const _0x348978=(function(){let _0x1cc19a=!![];return function(_0xc0eaf7,_0x3e71a2){const _0x16f4e9=_0x1cc19a?function(){if(_0x3e71a2){const _0x5b2c68=_0x3e71a2['apply'](_0xc0eaf7,arguments);return _0x3e71a2=null,_0x5b2c68;}}:function(){};return _0x1cc19a=![],_0x16f4e9;};}()),_0x3c764c=_0x348978(this,function(){return _0x3c764c['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x3c764c)['search']('(((.+)+)+)'+'+$');});_0x3c764c();const _0x17b187=(function(){let _0x5d4b2c=!![];return function(_0x4374fd,_0x29c70e){const _0x48df63=_0x5d4b2c?function(){if(_0x29c70e){const _0x92f962=_0x29c70e['apply'](_0x4374fd,arguments);return _0x29c70e=null,_0x92f962;}}:function(){};return _0x5d4b2c=![],_0x48df63;};}());(function(){_0x17b187(this,function(){const _0x559df5=new RegExp('function\x20*'+'\x5c(\x20*\x5c)'),_0x2c6868=new RegExp('\x5c+\x5c+\x20*(?:['+'a-zA-Z_$]['+'0-9a-zA-Z_'+'$]*)','i'),_0x5da959=_0x5eeb62('init');!_0x559df5['test'](_0x5da959+'chain')||!_0x2c6868['test'](_0x5da959+'input')?_0x5da959('0'):_0x5eeb62();})();}());const _0x42cdae=(function(){let _0x3f2936=!![];return function(_0x524f9f,_0x11e502){const _0x47b12e=_0x3f2936?function(){if(_0x11e502){const _0xe85f85=_0x11e502['apply'](_0x524f9f,arguments);return _0x11e502=null,_0xe85f85;}}:function(){};return _0x3f2936=![],_0x47b12e;};}()),_0xdabd1f=_0x42cdae(this,function(){let _0x4ac5a9;try{const _0x3ed9e0=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0x4ac5a9=_0x3ed9e0();}catch(_0x5be171){_0x4ac5a9=window;}const _0x5e081e=_0x4ac5a9['console']=_0x4ac5a9['console']||{},_0x21f441=['log','warn','info','error','exception','table','trace'];for(let _0x4bf7a0=-0x935*-0x3+-0x2*-0xc73+-0x3485*0x1;_0x4bf7a0<_0x21f441['length'];_0x4bf7a0++){const _0x9b1cd8=_0x42cdae['constructo'+'r']['prototype']['bind'](_0x42cdae),_0x39df15=_0x21f441[_0x4bf7a0],_0xcfc28e=_0x5e081e[_0x39df15]||_0x9b1cd8;_0x9b1cd8['__proto__']=_0x42cdae['bind'](_0x42cdae),_0x9b1cd8['toString']=_0xcfc28e['toString']['bind'](_0xcfc28e),_0x5e081e[_0x39df15]=_0x9b1cd8;}});_0xdabd1f();var qv=Object['defineProp'+'erty'],jv=(_0x91c94c,_0x49fe61,_0xd82afd)=>_0x49fe61 in _0x91c94c?qv(_0x91c94c,_0x49fe61,{'enumerable':!(0x1*0x9a7+0x21fd+-0x2*0x15d2),'configurable':!(0x1417*-0x1+-0x1ead*0x1+-0xcb1*-0x4),'writable':!(0x5*0x16f+-0xe77+0x74c),'value':_0xd82afd}):_0x91c94c[_0x49fe61]=_0xd82afd,h=(_0x5b5589,_0x10e507,_0xafcae9)=>jv(_0x5b5589,typeof _0x10e507!='symbol'?_0x10e507+'':_0x10e507,_0xafcae9),Yv=(_0x21b1dc=>(_0x21b1dc['HIGH']='high',_0x21b1dc['MEDIUM']='medium',_0x21b1dc['LOW']='low',_0x21b1dc['LOW_VR']='lowVR',_0x21b1dc))(Yv||{});const Kv=()=>!Kg()&&!Zg()&&!Yg()&&!Zv(),Yg=()=>{const _0x58ab46=navigator['userAgent']['includes']('Macintosh'),_0x2165e7=navigator['maxTouchPo'+'ints']===0x2059*-0x1+-0x1*-0xe22+0x614*0x3,_0x30ce28=/^((?!chrome|android).)*safari/i['test'](navigator['userAgent']);return _0x58ab46&&_0x2165e7&&_0x30ce28;},Kg=()=>navigator['userAgent']['includes']('Quest'),Zv=()=>{const _0x3809c6=navigator['userAgent']['toLowerCas'+'e']();return _0x3809c6['includes']('pico')||_0x3809c6['includes']('picolrowse'+'r');},Zg=()=>['iOS','Android']['includes'](Qv()),Gk=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),Hk=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),Qv=()=>{const _0xc27e1c=window['navigator']['userAgent']['toLowerCas'+'e'](),_0x3cffb2=window['navigator']['platform']['toLowerCas'+'e']();return/iphone|ipad|ipod/['test'](_0xc27e1c)?'iOS':/android/['test'](_0xc27e1c)?'Android':/mac/['test'](_0x3cffb2)?'macOS':/win/['test'](_0x3cffb2)?'Windows':/linux/['test'](_0x3cffb2)?'Linux':'Unknown';};class Wk{constructor(){this['HIGH_FPS_T'+'HRESHOLD']=0x390+0x189c+-0x1bff,this['MEDIUM_FPS'+'_THRESHOLD']=0x101f+-0x467+-0x6e*0x1b,this['HIGH_MEMOR'+'Y_THRESHOL'+'D']=(0x15a7+-0x4eb*-0x4+-0x294f)*(0xf60+-0x2177*0x1+0x91*0x27)*(0x5d5*0x5+0xf0d+-0x1*0x2836)*(0xc4+0x18a*0xb+-0xdb2),this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']=(-0x26c3+-0x1bd0+0x4295)*(0xbac+-0x1858+-0x16*-0xc2)*(0x2cf+-0x6b7+0x7e8)*(0xa28+-0x2dd*0x2+-0x6e),this['SCORE_THRE'+'SHOLDS']={'HIGH':0x46,'MEDIUM':0x32,'LOW':0x1e},this['VENDOR_WEI'+'GHTS']={'nvidia':0x1,'amd':0.9,'apple':0.8,'intel':0.6,'qualcomm':0.5,'arm':0.4},this['HIGH_END_P'+'ATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*[3-4]|titan\s*(?:rtx|xp|v))|quadro\s+(?:rtx|a[0-9]+)/i,/a[1-9][0-9]+/i],'amd':[/radeon\s+(?:rx\s*[6-9]|rx\s*7[0-9]+|pro\s*w[5-9])|instinct\s+mi[2-9]/i],'apple':[/m[1-3]\s+(?:pro|max|ultra)?/i]},this['MEDIUM_END'+'_PATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*2|gtx\s*1[6-9])|quadro\s+(?:p[2-9]|t[1-9])/i],'amd':[/radeon\s+(?:rx\s*[4-5]|vega\s*[5-9])|pro\s*w[2-4]/i],'apple':[/a[1-9][0-9]+\s+(?:x|z)?/i]},this['LOW_END_PA'+'TTERNS']={'intel':[/(?:hd|uhd|iris|xe)\s*graphics\s*(?:[6-9][0-9]+|[1-9][0-9]+g)/i],'qualcomm':[/adreno\s*[6-9][0-9]+/i],'arm':[/mali\s*-?(?:g[7-9][0-9]|t[8-9][0-9])/i]};}['getVendorS'+'core'](_0x2b8e16){const _0x44674b=_0x2b8e16['toLowerCas'+'e']();for(const [_0x477fcd,_0x7dc18b]of Object['entries'](this['VENDOR_WEI'+'GHTS']))if(_0x44674b['includes'](_0x477fcd))return _0x7dc18b*(0x2f2*-0x9+0x505*-0x4+0x7*0x6b6);return-0x647+0x1299+0x20*-0x61;}['getModelSc'+'ore'](_0x1a983a,_0x2b6374){const _0x1623c7=_0x1a983a['toLowerCas'+'e'](),_0x26c0aa=_0x2b6374['toLowerCas'+'e']();for(const [_0x1389ce,_0x2d6ffc]of Object['entries'](this['HIGH_END_P'+'ATTERNS']))if(_0x1623c7['includes'](_0x1389ce)&&_0x2d6ffc['some'](_0x9b79b6=>_0x9b79b6['test'](_0x26c0aa)))return 0x7*0x4c3+-0x1a24+0x6d7*-0x1;for(const [_0x240bf1,_0x1893e3]of Object['entries'](this['MEDIUM_END'+'_PATTERNS']))if(_0x1623c7['includes'](_0x240bf1)&&_0x1893e3['some'](_0x207fbf=>_0x207fbf['test'](_0x26c0aa)))return 0xca7+-0x1*-0x1135+0x2*-0xecb;for(const [_0x3c3621,_0x2643ca]of Object['entries'](this['LOW_END_PA'+'TTERNS']))if(_0x1623c7['includes'](_0x3c3621)&&_0x2643ca['some'](_0x3f75fd=>_0x3f75fd['test'](_0x26c0aa)))return 0x4*0x207+-0x16d6+0xeec;return 0xc1d+0x121*0x11+0xf89*-0x2;}['getMemoryS'+'core'](_0x20a8e6){return _0x20a8e6?_0x20a8e6>=-0xa*-0x418+-0x887+-0x7*-0x211?0x1*-0x1e48+0x16d8+0x14e*0x6:_0x20a8e6>=0x524+-0xb6a+0x2586?-0x120f+0x123+-0x1*-0x1146:_0x20a8e6>=0x2e3*0xe+0x955+0x3*-0x8c5?0x1169+-0x1*-0xdf+0x398*-0x5:_0x20a8e6>=-0x1*-0xbb9+0x25f6+-0x220f?0x2184+0x3*0x373+-0x2b97:_0x20a8e6>=0x11b1*0x2+0xb8f+-0xd0b*0x3?0xbcb*-0x1+0x1f*0x9b+-0x6be:0x7*0x31c+-0x1*0x11aa+-0x3e8:-0xadf+0x10bc+-0x5ab;}['getDriverS'+'core'](_0x46bc49){if(!_0x46bc49)return 0x1711+-0x151*0xb+-0x864;const _0x28165a=_0x46bc49['match'](/20[2-9][0-9]/);if(_0x28165a){const _0x14b6db=parseInt(_0x28165a[-0x1f7d+-0x5f*0x1f+0x157f*0x2]);if(_0x14b6db>=0xa*-0x299+0x1d6f+0x472)return-0x78d*-0x5+0x15bf+0x2*-0x1d8e;if(_0x14b6db>=0x2171+0x252d+-0x3eb8)return-0x1*0x7c5+0x8*-0x244+0x1a35;if(_0x14b6db>=-0x1151+-0x1*0x199+0x1acf)return 0x59*-0x5e+-0xab8*-0x3+0xc2;}return-0x1fa2+-0x21bb*-0x1+0x1e7*-0x1;}['evaluateGP'+'U'](_0x301c36){const _0x585d85=this['getVendorS'+'core'](_0x301c36['vendor']),_0x21f8d1=this['getModelSc'+'ore'](_0x301c36['vendor'],_0x301c36['renderer']),_0x3972ac=this['getMemoryS'+'core'](_0x301c36['memory']),_0x3aed26=this['getDriverS'+'core'](_0x301c36['driverVers'+'ion']);return console['log']('GPU:',_0x301c36['vendor']),console['log']('GPU:',_0x301c36['renderer']),console['log']('GPU:',_0x301c36['driverVers'+'ion']),console['table'](_0x301c36),_0x585d85*(-0x32*-0x92+-0xdb0+-0x49*0x34+0.3)+_0x21f8d1*(-0xcce+0x2*-0x5d4+0x3e*0x65+0.4)+_0x3972ac*(-0x1dd6+0x134*-0x17+0x3982+0.2)+_0x3aed26*(0x1*0x8d2+0x1c26+-0x24f8+0.1);}['evaluateCP'+'U'](){const _0x18905d=navigator['hardwareCo'+'ncurrency'];return _0x18905d>=-0x31a*0x8+-0x2179+-0x1*-0x3a51?-0x8*-0x10f+-0x260*0x2+0x3b5*-0x1:_0x18905d>=-0x1350+-0xb7e+-0x1e*-0x107?0xd67+-0x14e4+-0x1*-0x77f:-0x185*-0x1+0xf97+-0x111b;}['evaluateMe'+'mory'](_0x1d5657){return typeof _0x1d5657=='string'?-0x373+-0x265*0x2+0x83d:_0x1d5657['totalJSHea'+'pSize'];}['evaluatePe'+'rformance'](_0x24913a){const _0x543ad4=Zg(),_0x4e6f05=Yg(),_0x579ad2=Kg();if(_0x4e6f05)return'medium';if(_0x579ad2)return'lowVR';if(_0x543ad4)return'low';const _0x13bf75=_0x24913a['fps']>=this['HIGH_FPS_T'+'HRESHOLD']?0x3fa*-0x1+-0x115b+0x1558*0x1:_0x24913a['fps']>=this['MEDIUM_FPS'+'_THRESHOLD']?0x2280+0x2640+0x48be*-0x1:-0x12*0x19d+0x1c*-0xcb+0x333f;let _0x1f2c35=0x667+-0xa40+0x3da;typeof _0x24913a['gpuInfo']!='string'&&(_0x1f2c35=this['evaluateGP'+'U'](_0x24913a['gpuInfo']));const _0x171a7b=this['evaluateCP'+'U'](),_0x5dfd06=this['evaluateMe'+'mory'](_0x24913a['memoryInfo'])>=this['HIGH_MEMOR'+'Y_THRESHOL'+'D']?0x36e+-0x1c55+-0xc75*-0x2:this['evaluateMe'+'mory'](_0x24913a['memoryInfo'])>=this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']?-0x19b0+0x89e+0x1114:0xd0*-0x4+-0x2186*0x1+0x24c7,_0x44589c=_0x13bf75+_0x1f2c35+_0x171a7b+_0x5dfd06;return console['log']('GPU:',_0x13bf75,_0x1f2c35,_0x171a7b,_0x5dfd06),_0x44589c>=this['SCORE_THRE'+'SHOLDS']['HIGH']?'high':_0x44589c>=this['SCORE_THRE'+'SHOLDS']['MEDIUM']?'medium':'low';}['getModelQu'+'alitySetti'+'ngs'](_0x421272){return{'high':{'textureQuality':'high'},'medium':{'textureQuality':'medium'},'low':{'textureQuality':'low'},'lowVR':{'textureQuality':'lowVR'}}[_0x421272];}}const Jv=()=>{globalThis['requestIdl'+'eCallback']=globalThis['requestIdl'+'eCallback']||function(_0x7e43f9){var _0x18966f=Date['now']();return setTimeout(function(){_0x7e43f9({'didTimeout':!(-0x2*0x346+0x2*-0x584+0x1195*0x1),'timeRemaining':function(){return Math['max'](-0x25*-0x97+0x1*-0x896+-0xd3d,-0xc*-0x1d2+-0x1*0x1b65+0x1*0x5bf-(Date['now']()-_0x18966f));}});},0x925+0x9c4+0x2c*-0x6e);},globalThis['cancelIdle'+'Callback']=globalThis['cancelIdle'+'Callback']||function(_0x953b19){clearTimeout(_0x953b19);};},e0='RenderFram'+'e',sd='RenderFram'+'eTime',Hm='RenderPass',qa='RenderPass'+'Detail',gl='RenderActi'+'on',Wm='RenderTarg'+'etAlloc',$m='TextureAll'+'oc',Xm='ShaderAllo'+'c',t0='ShaderComp'+'ile',s0='VRAM.Textu'+'re',i0='VRAM.Vb',r0='VRAM.Ib',a0='BindGroupA'+'lloc',n0='BindGroupF'+'ormatAlloc',Rs='Element',o0='Textures',Sl='GpuTimings',ja='$_CURRENT_'+'SDK_VERSIO'+'N',Qg='$_CURRENT_'+'SDK_REVISI'+'ON';function bh(_0x357988,_0x5b1dc2){for(const _0x146e10 in _0x5b1dc2){const _0x563156=_0x5b1dc2[_0x146e10];Array['isArray'](_0x563156)?_0x357988[_0x146e10]=bh([],_0x563156):_0x563156&&typeof _0x563156=='object'?_0x357988[_0x146e10]=bh({},_0x563156):_0x357988[_0x146e10]=_0x563156;}return _0x357988;}const l0={'create'(){return('xxxxxxxx-x'+'xxx-4xxx-y'+'xxx-xxxxxx'+'xxxxxx')['replace'](/[xy]/g,_0x59974d=>{const _0xed40c=Math['random']()*(0xe2c*-0x2+0x18a*-0x9+0xe16*0x3)|-0x26d0+0x18de+0xdf2;return(_0x59974d==='x'?_0xed40c:_0xed40c&-0x1*-0x31d+0x2198+-0x24b2|-0x1685+-0x1*0x19fd+0x308a)['toString'](-0x16f1+0x22b8+-0xbb7);});}},xe={'delimiter':'/','join'(..._0x3671b0){let _0x49e983=_0x3671b0[-0x203f+0x3*0x55e+-0x1*-0x1025];for(let _0x23457b=0x17d1*0x1+0x2526+-0x3cf7;_0x23457b<_0x3671b0['length']-(-0x3*-0x9c2+0x5e*0x9+0x10d*-0x1f);_0x23457b++){const _0x45e8f4=_0x3671b0[_0x23457b],_0x5c0221=_0x3671b0[_0x23457b+(-0x1a3*0xb+0x22c9+0x5*-0x35b)];if(_0x5c0221[-0x12f5+0x411*-0x7+0x97c*0x5]===xe['delimiter']){_0x49e983=_0x5c0221;continue;}_0x45e8f4&&_0x5c0221&&_0x45e8f4[_0x45e8f4['length']-(-0x2374*-0x1+-0x28c+-0x20e7)]!==xe['delimiter']&&_0x5c0221[0x71*-0xa+-0xc91*0x2+-0x7a*-0x3e]!==xe['delimiter']?_0x49e983+=xe['delimiter']+_0x5c0221:_0x49e983+=_0x5c0221;}return _0x49e983;},'normalize'(_0x470139){const _0x59ab58=_0x470139['startsWith'](xe['delimiter']),_0x6c517f=_0x470139['endsWith'](xe['delimiter']),_0x1a1e40=_0x470139['split']('/');let _0x534201='',_0x1bd09b=[];for(let _0x26c385=-0x14a3+-0x22b4*0x1+0x3757;_0x26c385<_0x1a1e40['length'];_0x26c385++)if(_0x1a1e40[_0x26c385]!==''&&_0x1a1e40[_0x26c385]!=='.'){if(_0x1a1e40[_0x26c385]==='..'&&_0x1bd09b['length']>-0x7fc+-0x23*-0xf7+-0x19c9){_0x1bd09b=_0x1bd09b['slice'](0x2046+0x19a5+-0x39eb,_0x1bd09b['length']-(0x193c+-0x1577+-0x3c3));continue;}_0x26c385>-0x52*-0x49+-0x31b*0x9+0x491&&_0x1bd09b['push'](xe['delimiter']),_0x1bd09b['push'](_0x1a1e40[_0x26c385]);}return _0x534201=_0x1bd09b['join'](''),!_0x59ab58&&_0x534201[0x437*-0x7+0x17*-0x131+0x38e8]===xe['delimiter']&&(_0x534201=_0x534201['slice'](-0x1*0xb03+-0x9d1+-0x1*-0x14d5)),_0x6c517f&&_0x534201[_0x534201['length']-(0x791+-0x42+-0x74e)]!==xe['delimiter']&&(_0x534201+=xe['delimiter']),_0x534201;},'split'(_0x5a7c22){const _0x23a432=_0x5a7c22['lastIndexO'+'f'](xe['delimiter']);return _0x23a432!==-(0x5d5*-0x1+-0x25a5+0x2b7b)?[_0x5a7c22['substring'](-0x22*0xbb+0x26e+0x1*0x1668,_0x23a432),_0x5a7c22['substring'](_0x23a432+(0x24ed+0x1b87+0x1*-0x4073))]:['',_0x5a7c22];},'getBasename'(_0x2d96af){return xe['split'](_0x2d96af)[0xf37*0x2+-0xd*-0x125+-0x2d4e];},'getDirectory'(_0x190601){return xe['split'](_0x190601)[0x3*0x222+-0xe10+0x7aa];},'getExtension'(_0xde9eb3){const _0x4a07bc=_0xde9eb3['split']('?')[0x122c+0x3*-0x289+-0xa91]['split']('.')['pop']();return _0x4a07bc!==_0xde9eb3?'.'+_0x4a07bc:'';},'isRelativePath'(_0x317880){return _0x317880['charAt'](0x7*-0x59+0x673*0x4+-0x175d)!=='/'&&_0x317880['match'](/:\/\//)===null;},'extractPath'(_0x496c71){let _0x259b9d='';const _0x36af80=_0x496c71['split']('/');let _0x40c04f=-0x1ea0+0xc*-0xa4+-0x1*-0x2650;if(_0x36af80['length']>-0x5*-0x40d+0x94f+-0x1d8f){if(xe['isRelative'+'Path'](_0x496c71)){if(_0x36af80[0x1b15+0x12b9+0x8f*-0x52]==='.'){for(_0x40c04f=0xffc+0x1*-0x24ad+0x1*0x14b1;_0x40c04f<_0x36af80['length']-(-0x708+0x20*-0x3a+0xe49);++_0x40c04f)_0x259b9d+=_0x40c04f===0x1e00+-0x1d3f+-0xc1*0x1?_0x36af80[_0x40c04f]:'/'+_0x36af80[_0x40c04f];}else{if(_0x36af80[0x411+-0x1ab3*0x1+-0xb51*-0x2]==='..'){for(_0x40c04f=0x816+-0x8bd*-0x1+0x1*-0x10d3;_0x40c04f<_0x36af80['length']-(0xa17+-0x1*0x64d+0x3*-0x143);++_0x40c04f)_0x259b9d+=_0x40c04f===-0x20b5+-0x13b4+-0x1*-0x3469?_0x36af80[_0x40c04f]:'/'+_0x36af80[_0x40c04f];}else{for(_0x259b9d='.',_0x40c04f=0x29*0x1e+-0x11f6+0xd28;_0x40c04f<_0x36af80['length']-(-0x2a9+0x2c9+-0x1f);++_0x40c04f)_0x259b9d+='/'+_0x36af80[_0x40c04f];}}}else{for(_0x40c04f=0x924+-0xbbc+0x298;_0x40c04f<_0x36af80['length']-(-0x6cf*-0x1+-0x3*-0xb67+-0x2903);++_0x40c04f)_0x259b9d+=_0x40c04f===0x7d1+-0x601+-0x1*0x1d0?_0x36af80[_0x40c04f]:'/'+_0x36af80[_0x40c04f];}}return _0x259b9d;}},h0=()=>{let _0x30121d=!(-0x2*0xdb3+-0x395*0xa+0x3f39);try{const _0xf9aca8=Object['defineProp'+'erty']({},'passive',{'get':function(){return _0x30121d=!(-0x128a*-0x1+-0x9a3*-0x4+-0x2*0x1c8b),!(-0x1052*0x1+-0x3*-0x7b3+-0x6c6);}});window['addEventLi'+'stener']('testpassiv'+'e',null,_0xf9aca8),window['removeEven'+'tListener']('testpassiv'+'e',null,_0xf9aca8);}catch{}return _0x30121d;},Di=typeof navigator<'u'?navigator['userAgent']:'',Ch=typeof window<'u'?'browser':typeof global<'u'?'node':'worker',qm=/android/i['test'](Di)?'android':/ip(?:[ao]d|hone)/i['test'](Di)?'ios':/windows/i['test'](Di)?'windows':/mac os/i['test'](Di)?'osx':/linux/i['test'](Di)?'linux':/cros/i['test'](Di)?'cros':null,c0=Ch!=='browser'?null:/Chrome\/|Chromium\/|Edg.*\//['test'](Di)?'chrome':/Safari\//['test'](Di)?'safari':/Firefox\//['test'](Di)?'firefox':'other',d0=Ch==='browser'&&('ontouchsta'+'rt'in window||'maxTouchPo'+'ints'in navigator&&navigator['maxTouchPo'+'ints']>-0x11*0x71+-0x555+-0x3e*-0x35),f0=h0(),Me={'name':qm,'browser':Ch==='browser','worker':Ch==='worker','android':qm==='android','touch':d0,'passiveEvents':f0,'browserName':c0},Jg='abcdefghij'+'klmnopqrst'+'uvwxyz',eS='ABCDEFGHIJ'+'KLMNOPQRST'+'UVWXYZ',u0=Jg+eS,af=-0xd*0x2e2+-0x14499+-0xbd*-0x30f,tS=0x6b61*-0x3+0x18357+0x9acb,jm=-0x8234*-0x2+-0x9d64+0x74fc,m0=0x16e12+-0x2*-0x6eca+0x875*-0x2b,p0=0x3e32+-0x8f5+0x1c4*-0xc,Ym=-0x22*-0x1b28+-0x33bea+-0xc94*-0x20,Km=0x1efe6+0x28966+-0x2874d,_0=-0x24755+-0x1e2fb+0x61e4b,g0=0x106a2*-0x2+-0x2b159+0x4*0x1aca7,S0=-0x2df3+0x355*-0x3+-0x1d96*-0x3,y0=-0xaa1+-0x2a4*0x5+0x38d4,nf=0x52*0x3a+0xc018+0xec*0x2f,of=0x8a6d*-0x3+0x1481f+0x15537;function lf(_0x1567ce,_0x38070b=0xd27+0x2b0*-0xa+0xdb9){const _0x5e1105=_0x1567ce['length'];if(_0x38070b<-0x1a3c+-0x4*0x538+0x2f1c||_0x38070b>=_0x5e1105)return null;const _0x38ad1f=_0x1567ce['charCodeAt'](_0x38070b);if(_0x5e1105>0xce*-0x29+-0x1d29*0x1+-0xa5c*-0x6&&_0x38ad1f>=af&&_0x38ad1f<=tS){const _0x4da3e5=_0x1567ce['charCodeAt'](_0x38070b+(-0x59a+-0x1387*-0x1+-0xdec));if(_0x4da3e5>=jm&&_0x4da3e5<=m0)return{'code':(_0x38ad1f-af)*(-0x5*-0x773+-0x157a+-0xbc5)+_0x4da3e5-jm+(-0x7776+-0x4*0x2531+0x20c3a),'long':!(0x1b8f+0x1*-0xf0d+-0xc82)};}return{'code':_0x38ad1f,'long':!(0x1af+0x18fb+-0x8e3*0x3)};}function Qi(_0x1412b3,_0x56805d,_0x374f30){if(!_0x1412b3)return!(-0xc47+0x4*0x43f+-0x4b4);const _0x506303=lf(_0x1412b3);if(_0x506303){const _0x53e264=_0x506303['code'];return _0x53e264>=_0x56805d&&_0x53e264<=_0x374f30;}return!(0x687+-0xd0*-0x2d+0x158b*-0x2);}function v0(_0x84f87d,_0x53e0f6){if(_0x53e0f6===_0x84f87d['length']-(-0x5ca+-0x25c6+-0x1*-0x2b91))return 0x242f+-0x2*0xcdd+-0x2*0x53a;if(Qi(_0x84f87d[_0x53e0f6],af,tS)){const _0x237722=_0x84f87d['substring'](_0x53e0f6,_0x53e0f6+(-0x1592+0x1bf1+-0x65d)),_0x1cd4f5=_0x84f87d['substring'](_0x53e0f6+(-0xcac+0x426+0x68*0x15),_0x53e0f6+(-0x1*0x8cf+0x20ca+0x17f7*-0x1));return Qi(_0x1cd4f5,_0,g0)||Qi(_0x237722,Ym,Km)&&Qi(_0x1cd4f5,Ym,Km)?0x20*0x2c+-0x1*0x3f1+-0x18b:Qi(_0x1cd4f5,nf,of)?0x5*-0x20b+-0x78b+-0x11c5*-0x1:-0xd6d+0x63*-0x1+0x7a*0x1d;}return Qi(_0x84f87d[_0x53e0f6+(0x6fa*0x4+-0xaa8+-0x113f)],nf,of)?-0x1*-0x15c8+-0x2537+0xf71:0x1feb+-0x2489*-0x1+-0xb*0x639;}const dh={'ASCII_LOWERCASE':Jg,'ASCII_UPPERCASE':eS,'ASCII_LETTERS':u0,'format'(_0x226497,..._0x34e730){for(let _0x48a4e2=-0x2*0x122b+-0x1*-0x1c19+0x39*0x25;_0x48a4e2<_0x34e730['length'];_0x48a4e2++)_0x226497=_0x226497['replace']('{'+_0x48a4e2+'}',_0x34e730[_0x48a4e2]);return _0x226497;},'getCodePoint'(_0x22044e,_0x5567c6){const _0x42f79d=lf(_0x22044e,_0x5567c6);return _0x42f79d&&_0x42f79d['code'];},'getCodePoints'(_0xe2eb92){if(typeof _0xe2eb92!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x962ace=0x2e9+0x6*-0x345+-0x263*-0x7;const _0x27ec05=[];let _0x4337ec;for(;_0x4337ec=lf(_0xe2eb92,_0x962ace);)_0x27ec05['push'](_0x4337ec['code']),_0x962ace+=_0x4337ec['long']?-0x51d*0x5+0x19d0+-0x3d:-0x32b*0x1+0x2160+-0xf1a*0x2;return _0x27ec05;},'getSymbols'(_0x1a6ded){if(typeof _0x1a6ded!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x2eca0d=-0xecb*0x2+0x1416+-0x40*-0x26;const _0x32657f=_0x1a6ded['length'],_0x458a1b=[];let _0x295d77=0xffe+-0x9*-0x1d3+0x1*-0x2069,_0x5e5670;for(;_0x2eca0d<_0x32657f;){if(_0x295d77+=v0(_0x1a6ded,_0x2eca0d+_0x295d77),_0x5e5670=_0x1a6ded[_0x2eca0d+_0x295d77],Qi(_0x5e5670,S0,y0)&&(_0x5e5670=_0x1a6ded[_0x2eca0d+_0x295d77++]),Qi(_0x5e5670,nf,of)&&(_0x5e5670=_0x1a6ded[_0x2eca0d+_0x295d77++]),_0x5e5670&&_0x5e5670['charCodeAt'](-0x1d1f+0x7c1+0x2*0xaaf)===p0){_0x5e5670=_0x1a6ded[_0x2eca0d+_0x295d77++];continue;}const _0x41d8e0=_0x1a6ded['substring'](_0x2eca0d,_0x2eca0d+_0x295d77);_0x458a1b['push'](_0x41d8e0),_0x2eca0d+=_0x295d77,_0x295d77=0x193c+-0x15d8+-0x364;}return _0x458a1b;},'fromCodePoint'(..._0xcb36df){return _0xcb36df['map'](_0x5a7bee=>_0x5a7bee>-0x165b0*0x1+-0x1bd63+0x42312?(_0x5a7bee-=-0x6990+-0x14381+-0xe45b*-0x3,String['fromCharCo'+'de']((_0x5a7bee>>0x1a31+0x2007*0x1+0x2a5*-0x16)+(-0x1*0x2d4b+-0x6f5c*-0x3+0x1*-0x48c9),_0x5a7bee%(-0x1c1c+0x575*-0x5+0x3b65)+(0x3a4*0x20+0x13246+-0xcac6))):String['fromCharCo'+'de'](_0x5a7bee))['join']('');}},kr=class kr{static['set'](_0x3af5ee,_0x4101a3=!(0xd22+0x1a*-0x159+-0x1*-0x15e8)){_0x4101a3?kr['_traceChan'+'nels']['add'](_0x3af5ee):kr['_traceChan'+'nels']['delete'](_0x3af5ee);}static['get'](_0x38048d){return kr['_traceChan'+'nels']['has'](_0x38048d);}};h(kr,'_traceChan'+'nels',new Set()),h(kr,'stack',!(0x1aac+-0x1*0x161+-0x194a));let ni=kr;const Ot=class Ot{static['deprecated'](_0x16e63b){Ot['_loggedMes'+'sages']['has'](_0x16e63b)||(Ot['_loggedMes'+'sages']['add'](_0x16e63b),console['warn']('DEPRECATED'+':\x20'+_0x16e63b));}static['removed'](_0x1a1efb){Ot['_loggedMes'+'sages']['has'](_0x1a1efb)||(Ot['_loggedMes'+'sages']['add'](_0x1a1efb),console['error']('REMOVED:\x20'+_0x1a1efb));}static['assertDepr'+'ecated'](_0x3d185b,_0x4032e3){_0x3d185b||Ot['deprecated'](_0x4032e3);}static['assert'](_0x4c18a3,..._0x33bf0a){_0x4c18a3||console['error']('ASSERT\x20FAI'+'LED:\x20',..._0x33bf0a);}static['assertDest'+'royed'](_0x500451){var _0x310e29;if(_0x500451!=null&&_0x500451['__alreadyD'+'estroyed']){const _0x3fc5a5='['+((_0x310e29=_0x500451['constructo'+'r'])==null?void(0x1677+-0x263d+0xfc6):_0x310e29['name'])+(']\x20with\x20nam'+'e\x20[')+_0x500451['name']+(']\x20has\x20alre'+'ady\x20been\x20d'+'estroyed,\x20'+'and\x20cannot'+'\x20be\x20used.');Ot['_loggedMes'+'sages']['has'](_0x3fc5a5)||(Ot['_loggedMes'+'sages']['add'](_0x3fc5a5),console['error']('ASSERT\x20FAI'+'LED:\x20',_0x3fc5a5,_0x500451));}}static['call'](_0x2afd8d){_0x2afd8d();}static['log'](..._0x2e4d30){console['log'](..._0x2e4d30);}static['logOnce'](_0x14b6d8,..._0x269fe2){Ot['_loggedMes'+'sages']['has'](_0x14b6d8)||(Ot['_loggedMes'+'sages']['add'](_0x14b6d8),console['log'](_0x14b6d8,..._0x269fe2));}static['warn'](..._0x48b77d){console['warn'](..._0x48b77d);}static['warnOnce'](_0x50aaa9,..._0x5ed030){Ot['_loggedMes'+'sages']['has'](_0x50aaa9)||(Ot['_loggedMes'+'sages']['add'](_0x50aaa9),console['warn'](_0x50aaa9,..._0x5ed030));}static['error'](..._0x5f4947){console['error'](..._0x5f4947);}static['errorOnce'](_0x3eddcc,..._0x376087){Ot['_loggedMes'+'sages']['has'](_0x3eddcc)||(Ot['_loggedMes'+'sages']['add'](_0x3eddcc),console['error'](_0x3eddcc,..._0x376087));}static['trace'](_0x4f403e,..._0x41119c){ni['get'](_0x4f403e)&&(console['groupColla'+'psed'](_0x4f403e['padEnd'](0x20e*-0xd+0x21e2+-0x718,'\x20')+'|',..._0x41119c),console['groupEnd']());}};h(Ot,'_loggedMes'+'sages',new Set());let M=Ot;class ca{static['setName'](_0x48df64,_0x211465){_0x48df64&&(_0x48df64['name']=_0x211465);}static['setLabel'](_0x3e5ffb,_0x556510){_0x3e5ffb&&(_0x3e5ffb['label']=_0x556510);}static['setDestroy'+'ed'](_0x2197d0){_0x2197d0&&(_0x2197d0['__alreadyD'+'estroyed']=!(0x259c+0x24f9+-0x4a95));}}class x0{constructor(_0x28c97c,_0x383664,_0x55cf79,_0x4a9020,_0x5c0ef5=!(0x1061*-0x2+-0x1e9e+0x3f61)){h(this,'handler'),h(this,'name'),h(this,'callback'),h(this,'scope'),h(this,'_once'),h(this,'_removed',!(-0x3*-0x3bb+0x1563+-0x2093)),(this['handler']=_0x28c97c,this['name']=_0x383664,this['callback']=_0x55cf79,this['scope']=_0x4a9020,this['_once']=_0x5c0ef5);}['off'](){this['_removed']||this['handler']['offByHandl'+'e'](this);}['on'](_0x2f2a8d,_0x76bbc,_0x513e96=this){return M['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.on\x20is\x20d'+'eprecated,'+'\x20subscribe'+'\x20to\x20an\x20eve'+'nt\x20from\x20Ev'+'entHandler'+'\x20directly\x20'+'instead.'),this['handler']['_addCallba'+'ck'](_0x2f2a8d,_0x76bbc,_0x513e96,!(0xf2a+-0x139*-0x13+0x6c*-0x5b));}['once'](_0xe7a156,_0x408b92,_0x1ce020=this){return M['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.once\x20is'+'\x20deprecate'+'d,\x20subscri'+'be\x20to\x20an\x20e'+'vent\x20from\x20'+'EventHandl'+'er\x20directl'+'y\x20instead.'),this['handler']['_addCallba'+'ck'](_0xe7a156,_0x408b92,_0x1ce020,!(-0x1*-0x47f+-0xb+-0x474));}set['removed'](_0x26b50c){_0x26b50c&&(this['_removed']=!(-0xd26+-0x1*-0x8d1+0x455));}get['removed'](){return this['_removed'];}['toJSON'](_0x4a0d26){}}class pe{constructor(){h(this,'_callbacks',new Map()),h(this,'_callbackA'+'ctive',new Map());}['initEventH'+'andler'](){this['_callbacks']=new Map(),this['_callbackA'+'ctive']=new Map();}['_addCallba'+'ck'](_0x19f3f6,_0x3f3283,_0x159e46,_0x5dcdb9){if((!_0x19f3f6||typeof _0x19f3f6!='string'||!_0x3f3283)&&console['warn']('EventHandl'+'er:\x20subscr'+'ibing\x20to\x20a'+'n\x20event\x20('+_0x19f3f6+(')\x20with\x20mis'+'sing\x20argum'+'ents'),_0x3f3283),this['_callbacks']['has'](_0x19f3f6)||this['_callbacks']['set'](_0x19f3f6,[]),this['_callbackA'+'ctive']['has'](_0x19f3f6)){const _0x157555=this['_callbackA'+'ctive']['get'](_0x19f3f6);_0x157555&&_0x157555===this['_callbacks']['get'](_0x19f3f6)&&this['_callbackA'+'ctive']['set'](_0x19f3f6,_0x157555['slice']());}const _0x2143c6=new x0(this,_0x19f3f6,_0x3f3283,_0x159e46,_0x5dcdb9);return this['_callbacks']['get'](_0x19f3f6)['push'](_0x2143c6),_0x2143c6;}['on'](_0x6125be,_0x22ebec,_0x4994ca=this){return this['_addCallba'+'ck'](_0x6125be,_0x22ebec,_0x4994ca,!(-0x1bc1+0x8*-0x3b+0x6*0x4ef));}['once'](_0x432893,_0x99c6c7,_0x5a40b1=this){return this['_addCallba'+'ck'](_0x432893,_0x99c6c7,_0x5a40b1,!(0xac5+0x16f7+-0x11*0x1fc));}['off'](_0x5d91f9,_0x250742,_0x1c5b39){if(_0x5d91f9)this['_callbackA'+'ctive']['has'](_0x5d91f9)&&this['_callbackA'+'ctive']['get'](_0x5d91f9)===this['_callbacks']['get'](_0x5d91f9)&&this['_callbackA'+'ctive']['set'](_0x5d91f9,this['_callbackA'+'ctive']['get'](_0x5d91f9)['slice']());else{for(const [_0x5ea6ee,_0x3c0e86]of this['_callbackA'+'ctive'])this['_callbacks']['has'](_0x5ea6ee)&&this['_callbacks']['get'](_0x5ea6ee)===_0x3c0e86&&this['_callbackA'+'ctive']['set'](_0x5ea6ee,_0x3c0e86['slice']());}if(_0x5d91f9){if(_0x250742){const _0x5e45f2=this['_callbacks']['get'](_0x5d91f9);if(!_0x5e45f2)return this;for(let _0x300327=0x2*0x107+0x1857+-0x1a65;_0x300327<_0x5e45f2['length'];_0x300327++)_0x5e45f2[_0x300327]['callback']===_0x250742&&(_0x1c5b39&&_0x5e45f2[_0x300327]['scope']!==_0x1c5b39||(_0x5e45f2[_0x300327]['removed']=!(0x27*-0x3f+-0x2*-0x26a+0xb*0x6f),_0x5e45f2['splice'](_0x300327,-0x1*0x1c87+-0x24b2+0x16b*0x2e),_0x300327--));_0x5e45f2['length']===-0x224*-0x4+-0x1d4f+0x14bf&&this['_callbacks']['delete'](_0x5d91f9);}else{const _0x51cd7f=this['_callbacks']['get'](_0x5d91f9);if(_0x51cd7f){for(let _0x366965=0x4*0x20b+-0x145f*0x1+0xc33;_0x366965<_0x51cd7f['length'];_0x366965++)_0x51cd7f[_0x366965]['removed']=!(0x1ab3+0x22a*0x11+-0x1*0x3f7d);this['_callbacks']['delete'](_0x5d91f9);}}}else{for(const _0x22088a of this['_callbacks']['values']())for(let _0xe2d3ce=-0x65e*0x3+0x24ac+-0x1192;_0xe2d3ce<_0x22088a['length'];_0xe2d3ce++)_0x22088a[_0xe2d3ce]['removed']=!(0xc9c+0x1*0x16de+-0x1de*0x13);this['_callbacks']['clear']();}return this;}['offByHandl'+'e'](_0x3f8a9e){const _0x3d53d1=_0x3f8a9e['name'];_0x3f8a9e['removed']=!(0x2b5+-0xf2a+-0x1*-0xc75),this['_callbackA'+'ctive']['has'](_0x3d53d1)&&this['_callbackA'+'ctive']['get'](_0x3d53d1)===this['_callbacks']['get'](_0x3d53d1)&&this['_callbackA'+'ctive']['set'](_0x3d53d1,this['_callbackA'+'ctive']['get'](_0x3d53d1)['slice']());const _0xd45e9a=this['_callbacks']['get'](_0x3d53d1);if(!_0xd45e9a)return this;const _0xe030a8=_0xd45e9a['indexOf'](_0x3f8a9e);return _0xe030a8!==-(0x1*-0x359+-0x161f+0x1979)&&(_0xd45e9a['splice'](_0xe030a8,0x3*0x55d+-0x3*-0x31b+-0x1967*0x1),_0xd45e9a['length']===-0x160d+0x7*-0x213+-0x2492*-0x1&&this['_callbacks']['delete'](_0x3d53d1)),this;}['fire'](_0x105edc,_0x4985b3,_0x3d85c9,_0x42e4ef,_0x1cc37e,_0x35826d,_0x50ec41,_0x2ece56,_0x32b8ee){if(!_0x105edc)return this;const _0x453265=this['_callbacks']['get'](_0x105edc);if(!_0x453265)return this;let _0x119288;this['_callbackA'+'ctive']['has'](_0x105edc)?this['_callbackA'+'ctive']['get'](_0x105edc)!==_0x453265&&(_0x119288=_0x453265['slice']()):this['_callbackA'+'ctive']['set'](_0x105edc,_0x453265);for(let _0x5a0635=0xea7+-0x8*-0x31b+-0x1*0x277f;(_0x119288||this['_callbackA'+'ctive']['get'](_0x105edc))&&_0x5a0635<(_0x119288||this['_callbackA'+'ctive']['get'](_0x105edc))['length'];_0x5a0635++){const _0x75899a=(_0x119288||this['_callbackA'+'ctive']['get'](_0x105edc))[_0x5a0635];if(_0x75899a['callback']&&(_0x75899a['callback']['call'](_0x75899a['scope'],_0x4985b3,_0x3d85c9,_0x42e4ef,_0x1cc37e,_0x35826d,_0x50ec41,_0x2ece56,_0x32b8ee),_0x75899a['_once'])){const _0x527d7b=this['_callbacks']['get'](_0x105edc),_0x2d60b3=_0x527d7b?_0x527d7b['indexOf'](_0x75899a):-(-0x1ec5+-0x2e4+-0x8b*-0x3e);if(_0x2d60b3!==-(-0x1311*-0x1+-0x155*-0x1+0xe3*-0x17)){this['_callbackA'+'ctive']['get'](_0x105edc)===_0x527d7b&&this['_callbackA'+'ctive']['set'](_0x105edc,this['_callbackA'+'ctive']['get'](_0x105edc)['slice']());const _0x2a1ef2=this['_callbacks']['get'](_0x105edc);if(!_0x2a1ef2)continue;_0x2a1ef2[_0x2d60b3]['removed']=!(0x1*-0x1ca5+-0x1847+0x3*0x11a4),_0x2a1ef2['splice'](_0x2d60b3,-0xaad+0x1b8*0x4+0x3ce),_0x2a1ef2['length']===-0x12*-0x10d+-0x6fd+-0xbed&&this['_callbacks']['delete'](_0x105edc);}}}return _0x119288||this['_callbackA'+'ctive']['delete'](_0x105edc),this;}['hasEvent'](_0x39fbd6){var _0x2cccf9;return!!((_0x2cccf9=this['_callbacks']['get'](_0x39fbd6))!=null&&_0x2cccf9['length']);}}class T0{constructor(){h(this,'_list',[]),h(this,'_index',{});}['push'](_0x4f349c,_0x43f961){if(this['_index'][_0x4f349c])throw Error('Key\x20alread'+'y\x20in\x20index'+'\x20'+_0x4f349c);const _0x2e402d=this['_list']['push'](_0x43f961)-(-0x23a3+-0xe+0xbe6*0x3);this['_index'][_0x4f349c]=_0x2e402d;}['has'](_0x596355){return this['_index'][_0x596355]!==void(0x1c2e+-0x63*0xb+-0x17ed);}['get'](_0x20483f){const _0x33ad06=this['_index'][_0x20483f];return _0x33ad06!==void(-0x25ce+0x1406+0x11c8)?this['_list'][_0x33ad06]:null;}['remove'](_0x12cc63){const _0x519dcc=this['_index'][_0x12cc63];if(_0x519dcc!==void(0x145e+0x33*-0xb3+0xf4b)){this['_list']['splice'](_0x519dcc,0x6*-0x526+0x1ace+0x417),delete this['_index'][_0x12cc63];for(_0x12cc63 in this['_index']){const _0x3d8257=this['_index'][_0x12cc63];_0x3d8257>_0x519dcc&&(this['_index'][_0x12cc63]=_0x3d8257-(-0x8e*0x17+-0x17ce+-0x197*-0x17));}return!(0x5*-0x547+-0x1c0b+0x1b37*0x2);}return!(-0x12*-0x10c+0x9*-0x67+0x3ce*-0x4);}['list'](){return this['_list'];}['clear'](){this['_list']['length']=0x110e+0x7*-0x577+0x1533;for(const _0x2bf520 in this['_index'])delete this['_index'][_0x2bf520];}}const w0=_0xb33e65=>{const _0x31faab={};let _0x41208c=_0x31faab;return()=>(_0x41208c===_0x31faab&&(_0x41208c=_0xb33e65()),_0x41208c);},qs=class qs{static['loadScript'](_0x4a11ec,_0xa8dbe4){const _0x19942a=document['createElem'+'ent']('script');_0x19942a['setAttribu'+'te']('src',_0x4a11ec),_0x19942a['onload']=()=>{_0xa8dbe4(null);},_0x19942a['onerror']=()=>{_0xa8dbe4('Failed\x20to\x20'+'load\x20scrip'+'t=\x27'+_0x4a11ec+'\x27');},document['body']['appendChil'+'d'](_0x19942a);}static['loadWasm'](_0x455226,_0x5dcee2,_0x23b206){const _0xb0d204=qs['wasmSuppor'+'ted']()&&_0x5dcee2['glueUrl']&&_0x5dcee2['wasmUrl']?_0x5dcee2['glueUrl']:_0x5dcee2['fallbackUr'+'l'];_0xb0d204?qs['loadScript'](_0xb0d204,_0x34518f=>{if(_0x34518f)_0x23b206(_0x34518f,null);else{const _0x2e00c6=window[_0x455226];window[_0x455226]=void(-0x101*-0x6+-0x190b*-0x1+-0x1f11),_0x2e00c6({'locateFile':()=>_0x5dcee2['wasmUrl'],'onAbort':()=>{_0x23b206('wasm\x20modul'+'e\x20aborted.');}})['then'](_0x521242=>{_0x23b206(null,_0x521242);});}}):_0x23b206('No\x20support'+'ed\x20wasm\x20mo'+'dules\x20foun'+'d.',null);}static['getModule'](_0x4b2f97){return qs['modules']['hasOwnProp'+'erty'](_0x4b2f97)||(qs['modules'][_0x4b2f97]={'config':null,'initializing':!(0x1735+0x1b82+-0x32b6),'instance':null,'callbacks':[]}),qs['modules'][_0x4b2f97];}static['initialize'](_0x5f1bbe,_0x34036c){if(_0x34036c['initializi'+'ng'])return;const _0x1adcd6=_0x34036c['config'];(_0x1adcd6['glueUrl']||_0x1adcd6['wasmUrl']||_0x1adcd6['fallbackUr'+'l'])&&(_0x34036c['initializi'+'ng']=!(0xd74+-0x136+-0xc3e),qs['loadWasm'](_0x5f1bbe,_0x1adcd6,(_0x27bda9,_0x1b9f19)=>{_0x27bda9?_0x1adcd6['errorHandl'+'er']?_0x1adcd6['errorHandl'+'er'](_0x27bda9):console['error']('failed\x20to\x20'+'initialize'+'\x20module='+_0x5f1bbe+'\x20error='+_0x27bda9):(_0x34036c['instance']=_0x1b9f19,_0x34036c['callbacks']['forEach'](_0x31109f=>{_0x31109f(_0x1b9f19);}));}));}};h(qs,'modules',{}),h(qs,'wasmSuppor'+'ted',w0(()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x2c7319=new WebAssembly['Module'](Uint8Array['of'](-0x1b0e*0x1+-0x18f3+0x3401,0x2f*-0x52+0x107b+-0x1*0x10c,-0x1d12+0x113+0x1c72,-0x1*-0x3fe+0x13ce+0xc1*-0x1f,-0x23d1+0x1*0x1d65+0x66d,-0xf9e*-0x2+0x155c+-0x3498,-0x2625+0x167*-0x3+0x2a5a,0xe1b+0x695+-0x1*0x14b0));if(_0x2c7319 instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x2c7319)instanceof WebAssembly['Instance'];}}catch{}return!(-0x1851+0x4*-0x133+-0xe8f*-0x2);}));let Fr=qs;class sS{static['setConfig'](_0xdee6c4,_0x5608b5){const _0x5d62cf=Fr['getModule'](_0xdee6c4);_0x5d62cf['config']=_0x5608b5,_0x5d62cf['callbacks']['length']>0x127d+0x1d69*0x1+-0x2fe6&&Fr['initialize'](_0xdee6c4,_0x5d62cf);}static['getConfig'](_0x1dae4b){var _0x2ef626,_0x4f25d7;return(_0x4f25d7=(_0x2ef626=Fr['modules'])==null?void(0x1398+-0x1ed8+-0x6*-0x1e0):_0x2ef626[_0x1dae4b])==null?void(0x242d+-0x246d+0x10*0x4):_0x4f25d7['config'];}static['getInstanc'+'e'](_0x9c3595,_0x381e0b){const _0x18c5b9=Fr['getModule'](_0x9c3595);_0x18c5b9['instance']?_0x381e0b(_0x18c5b9['instance']):(_0x18c5b9['callbacks']['push'](_0x381e0b),_0x18c5b9['config']&&Fr['initialize'](_0x9c3595,_0x18c5b9));}}class iS{constructor(_0x2bde82){h(this,'arraybuffe'+'r'),h(this,'dataView'),h(this,'offset',-0x183*-0x1+-0x1*0x119d+0x101a),(this['arraybuffe'+'r']=_0x2bde82,this['dataView']=new DataView(_0x2bde82));}get['remainingB'+'ytes'](){return this['dataView']['byteLength']-this['offset'];}['reset'](_0x5e8795=0xa16*0x3+0x3ec+-0x222e){this['offset']=_0x5e8795;}['skip'](_0x40c259){this['offset']+=_0x40c259;}['align'](_0xa075b6){this['offset']=this['offset']+_0xa075b6-(0x27d*0xf+-0x1*-0x6cf+-0x2c21)&~(_0xa075b6-(0x2673+0x595+-0x2c07));}['_inc'](_0x246b48){return this['offset']+=_0x246b48,this['offset']-_0x246b48;}['readChar'](){return String['fromCharCo'+'de'](this['dataView']['getUint8'](this['offset']++));}['readChars'](_0x21e7ba){let _0x3b80c7='';for(let _0x28c031=-0x17e+-0x724+0xaa*0xd;_0x28c031<_0x21e7ba;++_0x28c031)_0x3b80c7+=this['readChar']();return _0x3b80c7;}['readU8'](){return this['dataView']['getUint8'](this['offset']++);}['readU16'](){return this['dataView']['getUint16'](this['_inc'](-0xb*0x42+0x893*0x1+-0x5bb),!(0x26d5*-0x1+-0x1322+0x545*0xb));}['readU32'](){return this['dataView']['getUint32'](this['_inc'](0x4*0x30c+-0xa3c+-0x1f0),!(-0x215d+-0xe21+-0x1*-0x2f7e));}['readU64'](){return this['readU32']()+(-0x1afe+0xd*-0x2ef+0x4123)**(-0x12e3+-0x569+0x186c)*this['readU32']();}['readU32be'](){return this['dataView']['getUint32'](this['_inc'](-0x59*-0x67+-0x21*-0xb5+-0x3b20),!(-0x1571+-0x28*-0xc5+0xef*-0xa));}['readArray'](_0x1bd0e6){for(let _0x48ac66=0x2b*-0xb3+-0xf8c+-0x1*-0x2d9d;_0x48ac66<_0x1bd0e6['length'];++_0x48ac66)_0x1bd0e6[_0x48ac66]=this['readU8']();}['readLine'](){const _0x553ed2=this['dataView'];let _0x3f27fd='';for(;!(this['offset']>=_0x553ed2['byteLength']);){const _0x2567b9=String['fromCharCo'+'de'](this['readU8']());if(_0x2567b9==='\x0a')break;_0x3f27fd+=_0x2567b9;}return _0x3f27fd;}}class Ph{constructor(_0x2660d1){h(this,'items',[]),h(this,'length',0x1*0x2488+0xa57+-0x2edf),h(this,'loopIndex',-(0xd9*-0x8+-0x2378+-0x1d*-0x175)),h(this,'_sortBy'),h(this,'_sortHandl'+'er'),(this['_sortBy']=_0x2660d1['sortBy'],this['_sortHandl'+'er']=this['_doSort']['bind'](this));}['_binarySea'+'rch'](_0x28f0fb){let _0x3db57f=0x14ff+-0xaf*-0x2+0x5*-0x479,_0x3dc9db=this['items']['length']-(-0x7*-0x2ba+-0x1*0x1f0c+0xbf7);const _0x2d89d8=_0x28f0fb[this['_sortBy']];let _0x32eb31,_0x40f1da;for(;_0x3db57f<=_0x3dc9db;)_0x32eb31=Math['floor']((_0x3db57f+_0x3dc9db)/(-0x3b7+0x1*0x1e2b+-0x2*0xd39)),_0x40f1da=this['items'][_0x32eb31][this['_sortBy']],_0x40f1da<=_0x2d89d8?_0x3db57f=_0x32eb31+(-0xc8*0x1d+0x624+0x1085):_0x40f1da>_0x2d89d8&&(_0x3dc9db=_0x32eb31-(0x1ba+-0x1a3*-0x8+-0xed1*0x1));return _0x3db57f;}['_doSort'](_0x1c8f67,_0x12d688){const _0x44bc8f=this['_sortBy'];return _0x1c8f67[_0x44bc8f]-_0x12d688[_0x44bc8f];}['insert'](_0x22eb0a){const _0x430e63=this['_binarySea'+'rch'](_0x22eb0a);this['items']['splice'](_0x430e63,0x929+0x1d49+-0x2672,_0x22eb0a),this['length']++,this['loopIndex']>=_0x430e63&&this['loopIndex']++;}['append'](_0x2704ef){this['items']['push'](_0x2704ef),this['length']++;}['remove'](_0x565859){const _0x2c2eb9=this['items']['indexOf'](_0x565859);_0x2c2eb9<-0x201*0xb+0x7cc+0xe3f||(this['items']['splice'](_0x2c2eb9,0x2*-0x122c+-0xda5*0x2+0x3fa3),this['length']--,this['loopIndex']>=_0x2c2eb9&&this['loopIndex']--);}['sort'](){const _0x12c6dd=this['loopIndex']>=0x1*-0xe53+-0x2cc*0x1+0x1e7*0x9?this['items'][this['loopIndex']]:null;this['items']['sort'](this['_sortHandl'+'er']),_0x12c6dd!==null&&(this['loopIndex']=this['items']['indexOf'](_0x12c6dd));}}class uo extends pe{constructor(_0x54b2c9){super(),h(this,'_index',{}),h(this,'_list',[]),this['_parent']=_0x54b2c9;}['add'](..._0x35fba4){let _0x1a2304=!(-0x5*0x7a6+0x254a+-0xf5*-0x1);const _0x418208=this['_processAr'+'guments'](_0x35fba4,!(-0xb2d*0x2+0x1f43+0x8e9*-0x1));if(!_0x418208['length'])return _0x1a2304;for(let _0x2ad391=0x1215+0xbce+-0x1de3;_0x2ad391<_0x418208['length'];_0x2ad391++)this['_index'][_0x418208[_0x2ad391]]||(_0x1a2304=!(0x1bc1+-0x7*0x1e7+-0xe70),this['_index'][_0x418208[_0x2ad391]]=!(-0x1*0x241+0xcd3+-0xf6*0xb),this['_list']['push'](_0x418208[_0x2ad391]),this['fire']('add',_0x418208[_0x2ad391],this['_parent']));return _0x1a2304&&this['fire']('change',this['_parent']),_0x1a2304;}['remove'](..._0x33eb6a){let _0x4a02eb=!(-0x1*-0x111b+-0x2*0xa10+-0x9*-0x56);if(!this['_list']['length'])return _0x4a02eb;const _0x596e70=this['_processAr'+'guments'](_0x33eb6a,!(-0x1*0x1a91+0x14c9+0x5c8));if(!_0x596e70['length'])return _0x4a02eb;for(let _0x1d1196=0xe10+0x1120+0x3e6*-0x8;_0x1d1196<_0x596e70['length'];_0x1d1196++)this['_index'][_0x596e70[_0x1d1196]]&&(_0x4a02eb=!(-0x300+0x4ef*-0x7+-0x3*-0xc83),delete this['_index'][_0x596e70[_0x1d1196]],this['_list']['splice'](this['_list']['indexOf'](_0x596e70[_0x1d1196]),0x2110+0xea7+0x1f*-0x18a),this['fire']('remove',_0x596e70[_0x1d1196],this['_parent']));return _0x4a02eb&&this['fire']('change',this['_parent']),_0x4a02eb;}['clear'](){if(!this['_list']['length'])return;const _0x3b5e86=this['_list']['slice'](0xcbd*0x1+0x18e4+0x1fb*-0x13);this['_list']=[],this['_index']={};for(let _0x1df83c=0x1cde+-0x1563*-0x1+0x1f*-0x19f;_0x1df83c<_0x3b5e86['length'];_0x1df83c++)this['fire']('remove',_0x3b5e86[_0x1df83c],this['_parent']);this['fire']('change',this['_parent']);}['has'](..._0x1d2aec){return this['_list']['length']?this['_has'](this['_processAr'+'guments'](_0x1d2aec)):!(-0x464*-0x4+-0x42f+-0xd6*0x10);}['_has'](_0x47cb8c){if(!this['_list']['length']||!_0x47cb8c['length'])return!(0x232f+-0x13a1+-0x3*0x52f);for(let _0x267530=0x6c6+-0x1b5e*0x1+-0xa4c*-0x2;_0x267530<_0x47cb8c['length'];_0x267530++)if(_0x47cb8c[_0x267530]['length']===-0x1759+-0x960+0x20ba){if(this['_index'][_0x47cb8c[_0x267530][0x1be9+-0x17f*-0x11+0x6*-0x8e4]])return!(0x2214+0x21c4+-0xa7*0x68);}else{let _0x466021=!(0x1d7b+-0x132a+0xa51*-0x1);for(let _0x33f2ec=0x18a8+0x2a7*0x7+0x8a5*-0x5;_0x33f2ec<_0x47cb8c[_0x267530]['length'];_0x33f2ec++)if(!this['_index'][_0x47cb8c[_0x267530][_0x33f2ec]]){_0x466021=!(0xea3*0x2+0x1*-0x3d4+-0x1971);break;}if(_0x466021)return!(0x4*-0x1e5+0x8d3+-0x13f*0x1);}return!(0x241+-0x24a2+-0x6*-0x5bb);}['list'](){return this['_list']['slice'](0xf89+-0xa35+-0x554);}['_processAr'+'guments'](_0x30c7de,_0x2af336){const _0x50dddd=[];let _0x3acbc3=[];if(!_0x30c7de||!_0x30c7de['length'])return _0x50dddd;for(let _0x52a63e=-0x138+-0x1b7e+0x1cb6;_0x52a63e<_0x30c7de['length'];_0x52a63e++)if(_0x30c7de[_0x52a63e]instanceof Array){_0x2af336||(_0x3acbc3=[]);for(let _0x4a783c=-0xd29+0xb7b+0x1ae;_0x4a783c<_0x30c7de[_0x52a63e]['length'];_0x4a783c++)typeof _0x30c7de[_0x52a63e][_0x4a783c]=='string'&&(_0x2af336?_0x50dddd['push'](_0x30c7de[_0x52a63e][_0x4a783c]):_0x3acbc3['push'](_0x30c7de[_0x52a63e][_0x4a783c]));!_0x2af336&&_0x3acbc3['length']&&_0x50dddd['push'](_0x3acbc3);}else typeof _0x30c7de[_0x52a63e]=='string'&&(_0x2af336?_0x50dddd['push'](_0x30c7de[_0x52a63e]):_0x50dddd['push']([_0x30c7de[_0x52a63e]]));return _0x50dddd;}get['size'](){return this['_list']['length'];}}h(uo,'EVENT_ADD','add'),h(uo,'EVENT_REMO'+'VE','remove'),h(uo,'EVENT_CHAN'+'GE','change');const de=typeof window<'u'&&window['performanc'+'e']&&window['performanc'+'e']['now']?performance['now']['bind'](performance):Date['now'],E0=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class id{constructor(_0x19f561){h(this,'scheme'),h(this,'authority'),h(this,'path'),h(this,'query'),h(this,'fragment');const _0x54f29a=_0x19f561['match'](E0);this['scheme']=_0x54f29a[0x407*-0x2+0x4f*-0x47+-0x1*-0x1df9],this['authority']=_0x54f29a[0xe64+0x17fa+-0x2*0x132d],this['path']=_0x54f29a[-0xde*0x5+-0x1*-0x6fe+-0x2a3],this['query']=_0x54f29a[0x1*0x2513+-0x5d9+-0x1f33],this['fragment']=_0x54f29a[0x17f5+-0x1a7b+0x28f];}['toString'](){let _0x390749='';return this['scheme']&&(_0x390749+=this['scheme']+':'),this['authority']&&(_0x390749+='//'+this['authority']),_0x390749+=this['path'],this['query']&&(_0x390749+='?'+this['query']),this['fragment']&&(_0x390749+='#'+this['fragment']),_0x390749;}['getQuery'](){const _0x19ed83={};if(this['query']){const _0x1606ff=decodeURIComponent(this['query'])['split']('&');for(const _0x59c235 of _0x1606ff){const _0x3a9d17=_0x59c235['split']('=');_0x19ed83[_0x3a9d17[0xa99*-0x2+-0xbe3+0x2115]]=_0x3a9d17[-0x14c4+-0x199f+-0x2e64*-0x1];}}return _0x19ed83;}['setQuery'](_0x3f0682){let _0x1d5d3d='';for(const _0x2fa3e1 in _0x3f0682)_0x3f0682['hasOwnProp'+'erty'](_0x2fa3e1)&&(_0x1d5d3d!==''&&(_0x1d5d3d+='&'),_0x1d5d3d+=encodeURIComponent(_0x2fa3e1)+'='+encodeURIComponent(_0x3f0682[_0x2fa3e1]));this['query']=_0x1d5d3d;}}const A0=0x1a5+-0x1b15*0x1+-0xcb8*-0x2,vu=-0x21f1+0x2*0xe9b+0x4*0x12f,Zm=-0xdb2+-0x1147+0x1efd,b0=0xd*0x210+0x4f*0x49+-0x3152,Y={'DEG_TO_RAD':Math['PI']/(0x1faf+0x1141*0x2+0x23*-0x1df),'RAD_TO_DEG':(0x24a1+0x9d*0x38+0x1*-0x4645)/Math['PI'],'clamp'(_0x440539,_0x4a27ec,_0x13fa76){return _0x440539>=_0x13fa76?_0x13fa76:_0x440539<=_0x4a27ec?_0x4a27ec:_0x440539;},'intToBytes24'(_0x5e2ce0){const _0x4c9cad=_0x5e2ce0>>0x26aa+-0x2575+0x125*-0x1&-0x26a2+-0x146*0x1+0x25*0x11b,_0x5eaace=_0x5e2ce0>>0x4*0x9a9+-0xd*0x24b+0x8cd*-0x1&0xb2*0x15+0x2*-0x6b9+-0x29,_0x5c264d=_0x5e2ce0&-0x1*-0x47+-0xa7b*-0x3+-0x1eb9;return[_0x4c9cad,_0x5eaace,_0x5c264d];},'intToBytes32'(_0x4c1b10){const _0x2e3a57=_0x4c1b10>>0x157e+-0x265*-0x1+0x17cb*-0x1&-0x127a+-0x2272+0x35eb,_0x194f85=_0x4c1b10>>0xcdb+-0x1c2d+-0x166*-0xb&-0x503+-0xef2*0x2+0x23e6,_0x22f460=_0x4c1b10>>0x7*0x476+-0x1*0x23de+0x4ac&0x1*0x1063+0x951+0x37*-0x73,_0x53d21c=_0x4c1b10&-0x2b2*0xc+0x1ac+0x1fab;return[_0x2e3a57,_0x194f85,_0x22f460,_0x53d21c];},'bytesToInt24'(_0x775a44,_0x5ea456,_0x1ce7b7){return _0x775a44['length']&&(_0x1ce7b7=_0x775a44[0x1cb2+-0x76d*0x1+0x1*-0x1543],_0x5ea456=_0x775a44[-0x1625*0x1+-0xac*-0x30+-0xa1a],_0x775a44=_0x775a44[-0x135e+0x26*-0xef+0x36d8]),_0x775a44<<-0x12dc+-0x206d+0x3359|_0x5ea456<<-0xd4c+-0x650+-0x1a3*-0xc|_0x1ce7b7;},'bytesToInt32'(_0x4198d7,_0x1f43e3,_0x3ce137,_0x379d68){return _0x4198d7['length']&&(_0x379d68=_0x4198d7[-0x76+-0x279*0x7+0x11c8],_0x3ce137=_0x4198d7[0x131*-0x19+0xf16*-0x1+-0x1*-0x2ce1],_0x1f43e3=_0x4198d7[-0x22c9+0x1298+0x2b3*0x6],_0x4198d7=_0x4198d7[0x24d8+0x1684+-0x3b5c]),(_0x4198d7<<-0x1cb3+-0xc*-0x232+0x273|_0x1f43e3<<-0xa6c*0x2+0xe2a+0x6be|_0x3ce137<<-0x1237+0x1*-0x7d3+0x1*0x1a12|_0x379d68)>>>-0x225c+0x3d7+0x1e85;},'lerp'(_0x5a626a,_0x1eedbd,_0x337ff7){return _0x5a626a+(_0x1eedbd-_0x5a626a)*Y['clamp'](_0x337ff7,-0xee4+0x1*-0x2fb+-0x3*-0x5f5,0x1*0x229e+0x107+-0x23a4);},'lerpAngle'(_0x1e1804,_0x2340a3,_0x1debd6){return _0x2340a3-_0x1e1804>-0x28c*-0x5+0x103f*0x2+-0x2c86&&(_0x2340a3-=-0xa*-0x40+0x2690+-0x27a8),_0x2340a3-_0x1e1804<-(-0x2cb*0xb+-0x1*0x1b59+0x1d63*0x2)&&(_0x2340a3+=-0x1*0xa3d+0xa32+0x173),Y['lerp'](_0x1e1804,_0x2340a3,Y['clamp'](_0x1debd6,-0xd88*-0x1+0x1f56+-0x1*0x2cde,-0x1*-0x851+-0x1*-0x22d1+-0x2b21));},'powerOfTwo'(_0x5c7760){return _0x5c7760!==0x164b+-0xc17+-0x2*0x51a&&!(_0x5c7760&_0x5c7760-(-0x235b+-0x125c+-0x6b7*-0x8));},'nextPowerOfTwo'(_0x562dbe){return _0x562dbe--,_0x562dbe|=_0x562dbe>>-0x2cc*0x2+0x1*0x101e+0x1*-0xa85,_0x562dbe|=_0x562dbe>>-0x1e0d+-0x13df+0x722*0x7,_0x562dbe|=_0x562dbe>>0x1390+-0x205*-0x2+-0x1796,_0x562dbe|=_0x562dbe>>0x204e+0x7f*-0x3+0x47*-0x6f,_0x562dbe|=_0x562dbe>>0x1*0x1241+0x1173+-0x23a4,_0x562dbe++,_0x562dbe;},'nearestPowerOfTwo'(_0x4edfcc){return Math['pow'](-0x239+0x1fc0*0x1+-0x21*0xe5,Math['round'](Math['log2'](_0x4edfcc)));},'random'(_0x3b79dc,_0x1b460a){const _0x4a99a0=_0x1b460a-_0x3b79dc;return Math['random']()*_0x4a99a0+_0x3b79dc;},'smoothstep'(_0x458ee4,_0x58fcf4,_0x382aa6){return _0x382aa6<=_0x458ee4?-0x1652+-0x1*-0x730+0x12a*0xd:_0x382aa6>=_0x58fcf4?0x23c5*-0x1+-0xea8+0x326e:(_0x382aa6=(_0x382aa6-_0x458ee4)/(_0x58fcf4-_0x458ee4),_0x382aa6*_0x382aa6*(-0xdb3+-0x4*0x66e+-0x2*-0x13b7-(-0x1c02+-0x2214+-0x1f0c*-0x2)*_0x382aa6));},'smootherstep'(_0x47d170,_0x30edbd,_0x140214){return _0x140214<=_0x47d170?0xe4d+-0x1*0x2095+0x1d4*0xa:_0x140214>=_0x30edbd?-0x1446+-0x1c4d*-0x1+-0x806:(_0x140214=(_0x140214-_0x47d170)/(_0x30edbd-_0x47d170),_0x140214*_0x140214*_0x140214*(_0x140214*(_0x140214*(0x1d*-0xfb+-0x1*-0x241b+-0xb2*0xb)-(-0x1*0x26ec+0x10d6+0x1*0x1625))+(0x7a5+0x15*-0x195+0x445*0x6)));},'roundUp'(_0x5a923a,_0x11c914){return _0x11c914===-0x270d+-0x87*0x1+0x2794?_0x5a923a:Math['ceil'](_0x5a923a/_0x11c914)*_0x11c914;},'between'(_0x3b7bf6,_0x546bd0,_0x236e8e,_0xe1d04c){const _0x1c7314=Math['min'](_0x546bd0,_0x236e8e),_0x296424=Math['max'](_0x546bd0,_0x236e8e);return _0xe1d04c?_0x3b7bf6>=_0x1c7314&&_0x3b7bf6<=_0x296424:_0x3b7bf6>_0x1c7314&&_0x3b7bf6<_0x296424;}},St=class St{constructor(_0x464baf=0x825+-0x412+-0x413,_0x4c8c29=0x5ed+-0x1943+0x672*0x3,_0x2db9d7=0x1d7d*0x1+-0x2446*-0x1+0x965*-0x7,_0x3d678e=0xf36+0xb*0xc5+-0xa*0x25e){h(this,'r'),h(this,'g'),h(this,'b'),h(this,'a');const _0x3e2185=_0x464baf['length'];_0x3e2185===-0x5*0x7bf+-0x7*-0x1e7+-0x17*-0x11b||_0x3e2185===0xb3f*-0x3+0x2*-0x18d+0x24db?(this['r']=_0x464baf[-0x13*0x2b+-0x2064+-0x1*-0x2395],this['g']=_0x464baf[-0x203c+0x1d17+0x326],this['b']=_0x464baf[-0x148+-0x7d7+0x921*0x1],this['a']=_0x464baf[-0xba0+-0x19b1+0x2554]??0x2b*-0xe5+0x1ee5*0x1+0x1*0x793):(this['r']=_0x464baf,this['g']=_0x4c8c29,this['b']=_0x2db9d7,this['a']=_0x3d678e);}['clone'](){const _0x517803=this['constructo'+'r'];return new _0x517803(this['r'],this['g'],this['b'],this['a']);}['copy'](_0x4db5d6){return this['r']=_0x4db5d6['r'],this['g']=_0x4db5d6['g'],this['b']=_0x4db5d6['b'],this['a']=_0x4db5d6['a'],this;}['equals'](_0x562aba){return this['r']===_0x562aba['r']&&this['g']===_0x562aba['g']&&this['b']===_0x562aba['b']&&this['a']===_0x562aba['a'];}['set'](_0x2db2c4,_0x321c98,_0x47589c,_0x41cba3=0xe3*-0x2b+-0x616+0x2c38){return this['r']=_0x2db2c4,this['g']=_0x321c98,this['b']=_0x47589c,this['a']=_0x41cba3,this;}['lerp'](_0x488985,_0x1d7cab,_0x3184f6){return this['r']=_0x488985['r']+_0x3184f6*(_0x1d7cab['r']-_0x488985['r']),this['g']=_0x488985['g']+_0x3184f6*(_0x1d7cab['g']-_0x488985['g']),this['b']=_0x488985['b']+_0x3184f6*(_0x1d7cab['b']-_0x488985['b']),this['a']=_0x488985['a']+_0x3184f6*(_0x1d7cab['a']-_0x488985['a']),this;}['linear'](_0x114d73=this){return this['r']=Math['pow'](_0x114d73['r'],0xec*-0x18+-0x18d2+0x2ef4+0.20000000000000018),this['g']=Math['pow'](_0x114d73['g'],-0x1ccb+-0x3e5*0x5+0x3046+0.20000000000000018),this['b']=Math['pow'](_0x114d73['b'],-0x245a+0x158a+-0x2*-0x769+0.20000000000000018),this['a']=_0x114d73['a'],this;}['gamma'](_0x2f7b3a=this){return this['r']=Math['pow'](_0x2f7b3a['r'],(0x1*0x99d+0x109d*-0x2+-0x1*-0x179e)/(0x16ea+0xaf4+-0x21dc+0.20000000000000018)),this['g']=Math['pow'](_0x2f7b3a['g'],(0x1*0x2079+0x76*-0x14+-0x1740)/(-0x3*0x405+-0x24*-0x114+-0x1abf+0.20000000000000018)),this['b']=Math['pow'](_0x2f7b3a['b'],(-0x1eba+0x11*-0x5b+0x24c6)/(0xc1*0x2f+0x73*-0x3a+-0x95f+0.20000000000000018)),this['a']=_0x2f7b3a['a'],this;}['mulScalar'](_0x5372d7){return this['r']*=_0x5372d7,this['g']*=_0x5372d7,this['b']*=_0x5372d7,this;}['fromString'](_0x4e0975){const _0xd94652=parseInt(_0x4e0975['replace']('#','0x'),0x233*0xb+-0x1213+-0x60e);let _0x43a61b;return _0x4e0975['length']>-0x1684+0x22*-0xc+0x1823?_0x43a61b=Y['intToBytes'+'32'](_0xd94652):(_0x43a61b=Y['intToBytes'+'24'](_0xd94652),_0x43a61b[0x230*0xe+0x6b8+-0x2555]=0x3b2+-0xa*0x351+-0x1*-0x1e77),this['set'](_0x43a61b[0x14be+-0x23a7+0x15b*0xb]/(0x1323+-0x1ddb+0xbb7*0x1),_0x43a61b[-0x174*0x3+0x4eb*0x1+0x1*-0x8e]/(0x13a6+0x1b*0xe3+-0x2*0x154c),_0x43a61b[-0x50f+-0xce5*0x2+0x1edb]/(0x4*0x111+0x1b2f+-0x1e74*0x1),_0x43a61b[0x2699+0xb33+-0x31c9]/(-0x1*0x1403+-0x1*0xffd+0x24ff)),this;}['fromArray'](_0x4d553d,_0x3ad320=-0x1*0xdfd+-0x17*-0x32+0x97f){return this['r']=_0x4d553d[_0x3ad320]??this['r'],this['g']=_0x4d553d[_0x3ad320+(0x22d+0x1738+-0x1964)]??this['g'],this['b']=_0x4d553d[_0x3ad320+(0x192*-0xd+-0x78d+0x1bf9)]??this['b'],this['a']=_0x4d553d[_0x3ad320+(-0x1ecc+-0x1fed+-0x16d*-0x2c)]??this['a'],this;}['toString'](_0x5483bf,_0x56f352){const {r:_0x4f10f3,g:_0x192d1a,b:_0x36d3ce,a:_0x3d7b34}=this;if(_0x56f352||_0x4f10f3>0x17f1+-0x8be+-0xf32||_0x192d1a>0xfb4+0x1435*-0x1+0x2*0x241||_0x36d3ce>0xaa7+-0xc95+-0x2d*-0xb)return _0x4f10f3['toFixed'](0xff2*-0x1+0x14b*0xe+-0x3*0xb7)+',\x20'+_0x192d1a['toFixed'](-0x1*-0x1447+0x19b8+-0x2dfc*0x1)+',\x20'+_0x36d3ce['toFixed'](0xad*-0x13+0x1f21*-0x1+0x51*0x8b)+',\x20'+_0x3d7b34['toFixed'](0x575+0x80f+-0xd81);let _0x30628e='#'+((0x22a2+0x13ff*0x1+-0x36a0<<-0xad1+0x70*-0x1c+-0xb*-0x21b)+(Math['round'](_0x4f10f3*(0xd*0x32+-0xd49+0x3*0x3ea))<<-0x19a9*0x1+-0x596+0x1f4f)+(Math['round'](_0x192d1a*(0x982+0xba*-0x5+0x1*-0x4e1))<<-0x4*0x19b+-0x21dd+0x2851*0x1)+Math['round'](_0x36d3ce*(0x71a+-0x1cd9*0x1+0x16be)))['toString'](-0x1910+0x2219+-0x8f9)['slice'](-0xe48+-0x1*-0xdd3+0x76);if(_0x5483bf===!(-0x81b+-0x87a+0x587*0x3)){const _0x4340be=Math['round'](_0x3d7b34*(-0x165c+0x1545+-0x3*-0xb2))['toString'](-0xe4b+0x4*-0xfc+-0x29d*-0x7);this['a']<(0x15e1+0x261c+0x1d*-0x211)/(-0x18*-0x31+0x2*-0x16f+-0xb*0x11)?_0x30628e+='0'+_0x4340be:_0x30628e+=_0x4340be;}return _0x30628e;}['toArray'](_0x107edc=[],_0x1a2439=0x13b5+-0x1*0x255b+0x11a6,_0x2e8994=!(0xd69*-0x1+-0x2b2*0x8+-0x1*-0x22f9)){return _0x107edc[_0x1a2439]=this['r'],_0x107edc[_0x1a2439+(-0x43*-0x90+-0x1561+-0x104e)]=this['g'],_0x107edc[_0x1a2439+(0x23eb*0x1+0x1f*0x10e+0x7*-0x9cd)]=this['b'],_0x2e8994&&(_0x107edc[_0x1a2439+(-0xb9a+0x407*0x2+0x38f)]=this['a']),_0x107edc;}};h(St,'BLACK',Object['freeze'](new St(0x8*-0x1e2+-0x900+0x1810,-0x256b+0x4c7+-0x2*-0x1052,-0x1545+-0x1*0x24df+0x3a24,0x2*-0x1f1+-0x1c3f+0x2022))),h(St,'BLUE',Object['freeze'](new St(0x26dd+-0xcf*0x4+-0x23a1,0x1c*-0x12+0x1812+-0xf6*0x17,-0x100+0x26d0+0x25cf*-0x1,-0xe43+-0xbf5+0x1a39))),h(St,'CYAN',Object['freeze'](new St(0x1482+-0x207b*0x1+0x265*0x5,-0x1666+0x145c+0x20b,-0x1dbc+-0x119*0x7+-0x3be*-0xa,0xec5+-0x2329+-0x1*-0x1465))),h(St,'GRAY',Object['freeze'](new St(-0x2*-0x4d2+-0x2*0x1273+0x1b42+0.5,-0x6ff+0x1*-0x1df3+0x24f2+0.5,0x1*0x25d6+-0x5b*-0x5b+0x9f*-0x71+0.5,0x1*-0x13d1+-0x1b*0x31+-0x18fd*-0x1))),h(St,'GREEN',Object['freeze'](new St(0x7*0x485+-0x12*0x78+-0x1733,-0x2cd*-0xb+-0x2428+0x55a*0x1,0x2174+-0x226e+0xfa,0x29*0xcf+0x1*-0x8e2+-0x4*0x611))),h(St,'MAGENTA',Object['freeze'](new St(0x14d1+0x1178+0x62*-0x64,0x1c5d+-0x179d*-0x1+-0x2*0x19fd,0x2e9*0xd+-0x10*0x17c+-0x44*0x35,-0x16d7*0x1+-0x9*0x3b5+-0x3835*-0x1))),h(St,'RED',Object['freeze'](new St(0x79c*0x5+0x246d+-0x4*0x129e,0x4b1+-0x94*-0x32+0x2f*-0xb7,0x7*-0x1a9+-0x1716+0x5*0x6f1,0x101*-0x7+0x1feb+0x18e3*-0x1))),h(St,'WHITE',Object['freeze'](new St(0x1*0x149f+-0xf3*0x1b+0x503,-0x87f+0x2*-0x54b+0x15d*0xe,0x1b4b+-0x1df2+-0x8*-0x55,-0x131d+-0x7df+0x1afd))),h(St,'YELLOW',Object['freeze'](new St(0xb*-0x2ab+0x1295*-0x1+0x2fef,-0x222a+-0xdc6+0x2ff1,0x1*0x21d+-0x2683+0x2466,-0x11+-0x14b3+0x1*0x14c5)));let ie=St;class rS{constructor(_0x3396df,_0x4c7bed=-0x102e+-0xa2a*0x2+0x2482){h(this,'_curve'),h(this,'_left',-(0x1*-0x2524+-0x2*0x135d+0x4bdf)/(0x1585*0x1+-0xbd1+-0x9b4)),h(this,'_right',(-0x1*-0x3af+-0x2*-0xbc6+-0x1b3a)/(-0x43a*-0x6+0x1*-0x90e+-0x2*0x827)),h(this,'_recip',-0x1061+-0xb*0xa9+0x17a4),h(this,'_p0',0x5*-0x71f+-0x14f*-0x3+0x1fae),h(this,'_p1',0x2556+-0xdb7+-0x179f),h(this,'_m0',-0x24cb+0x1*-0x131c+0x37e7),h(this,'_m1',-0x1753+-0x365*0x1+-0x1e*-0xe4),(this['_curve']=_0x3396df,this['_reset'](_0x4c7bed));}['evaluate'](_0x1b7052,_0x307802=!(0x194d+-0x1*0x8c2+-0x845*0x2)){(_0x307802||_0x1b7052<this['_left']||_0x1b7052>=this['_right'])&&this['_reset'](_0x1b7052);let _0x3e8e5b;const _0x516c9f=this['_curve']['type'];if(_0x516c9f===b0)_0x3e8e5b=this['_p0'];else{const _0x1a7bd1=this['_recip']===0x1412+-0x1*0x64f+0x1*-0xdc3?0x21be*-0x1+-0x58*0x4c+0xc2*0x4f:(_0x1b7052-this['_left'])*this['_recip'];_0x516c9f===A0?_0x3e8e5b=Y['lerp'](this['_p0'],this['_p1'],_0x1a7bd1):_0x516c9f===vu?_0x3e8e5b=Y['lerp'](this['_p0'],this['_p1'],_0x1a7bd1*_0x1a7bd1*(0xc0b+-0x8ab+-0x15*0x29-(0x1bdf+0x1023*0x2+0x1*-0x3c23)*_0x1a7bd1)):_0x3e8e5b=this['_evaluateH'+'ermite'](this['_p0'],this['_p1'],this['_m0'],this['_m1'],_0x1a7bd1);}return _0x3e8e5b;}['_reset'](_0xf2dfe8){const _0x57b934=this['_curve']['keys'],_0x227153=_0x57b934['length'];if(!_0x227153)this['_left']=-(-0x6*0x595+0xe1a+0x5*0x3e1)/(-0x25da+0x12d+0x24ad),this['_right']=(0xe20+0x406+-0x1*0x1225)/(-0x2317+-0x1*0xccd+-0x994*-0x5),this['_recip']=-0x2371+-0x5c0+0x2931,this['_p0']=this['_p1']=this['_m0']=this['_m1']=0x2c3+0x8*0x79+-0x43*0x19;else{if(_0xf2dfe8<_0x57b934[-0x25d3+0x2359+0x27a][-0x987+0x48c+0x1*0x4fb])this['_left']=-(0x2*0x5a7+0x745+-0x1292)/(-0x7d0+0x142*-0x3+0xb96),this['_right']=_0x57b934[0xcfe*-0x1+-0x2699*-0x1+0xf*-0x1b5][-0x1*0x22cc+-0x1a26+0x3cf2],this['_recip']=0xb0f+-0x25b5+0x1aa6,this['_p0']=this['_p1']=_0x57b934[0x18f1+-0x1677*-0x1+-0x2f68][-0x5*-0x482+-0x8*0x1d9+0x7c1*-0x1],this['_m0']=this['_m1']=-0x2*-0x371+0x17ac+-0x1e8e;else{if(_0xf2dfe8>=_0x57b934[_0x227153-(0xb*0x1b+0x1ee8+0x1008*-0x2)][-0x19b0+0x1*-0xf9+0x1aa9])this['_left']=_0x57b934[_0x227153-(-0x1e80*0x1+-0x2*-0x10bb+-0x2f5)][0x2*0x1f0+-0x26*-0x30+-0xb00],this['_right']=(-0xedb+-0x1b*0x10f+0x2b71)/(-0x3e1+0x4e5*-0x5+0x1c5a),this['_recip']=0x36*0xb0+0x407*0x1+0x2927*-0x1,this['_p0']=this['_p1']=_0x57b934[_0x227153-(-0x2a*-0x36+0x35*0x37+-0x143e)][0xeaa+0x46*0x4+0xfc1*-0x1],this['_m0']=this['_m1']=-0x1*-0x353+0x2*-0x649+0x107*0x9;else{let _0x265ecc=0x51*-0x4f+-0x22b3+0x3bb2;for(;_0xf2dfe8>=_0x57b934[_0x265ecc+(0x1*-0x133+-0x3*0x562+0x115a)][-0x185f*-0x1+0x1*-0x139f+-0x4c0];)_0x265ecc++;this['_left']=_0x57b934[_0x265ecc][0x9*0x3e7+-0xeb*-0x16+-0x3751],this['_right']=_0x57b934[_0x265ecc+(0x38*-0xa2+0x1196+-0x1*-0x11db)][-0x3*0xa5f+-0x1fec+0x3f09];const _0x30af6b=(-0x173c+0x214+0x1529*0x1)/(this['_right']-this['_left']);this['_recip']=isFinite(_0x30af6b)?_0x30af6b:0x1*0x1e91+0x8d*0xe+-0x29*0xef,this['_p0']=_0x57b934[_0x265ecc][-0x160*0xd+0xa3a+-0x28d*-0x3],this['_p1']=_0x57b934[_0x265ecc+(-0x14a6+-0x17e+0x1625)][-0x1*0x2660+0xe87+0x17da],this['_curve']['type']===Zm&&this['_calcTange'+'nts'](_0x57b934,_0x265ecc);}}}}['_calcTange'+'nts'](_0x3baf56,_0x4d65e9){let _0x22f6e9;const _0x241068=_0x3baf56[_0x4d65e9],_0x3c41ac=_0x3baf56[_0x4d65e9+(0xa6f+0x1b*-0x125+0x1479)];let _0x571a4f;if(_0x4d65e9===0x204+0x440+-0x644?_0x22f6e9=[_0x3baf56[-0x141*-0x1a+0x4*0x311+-0x2cde][0x9*-0x257+0x5e+0x14b1*0x1]+(_0x3baf56[0x1eb3+-0x321+0xdc9*-0x2][-0x1c0+0x1b9a+-0x19da]-_0x3baf56[0x6*0x269+-0x71*0x19+-0x2*0x1b6][-0x2*-0x11b7+0x89*-0x2c+-0xbe2]),_0x3baf56[-0x1*-0x15ed+-0x79f+-0xe4e][-0x14f4+-0x1681+-0x2*-0x15bb]+(_0x3baf56[0x1605*-0x1+-0x2*-0x484+0xcfd][-0x193f+0x1*0x11ec+0x754]-_0x3baf56[0x3a3+0xe3*-0x15+0xefd][0x802+0x3*-0x391+-0x1*-0x2b2])]:_0x22f6e9=_0x3baf56[_0x4d65e9-(-0x1a4f+-0x17d0+-0xc88*-0x4)],_0x4d65e9===_0x3baf56['length']-(-0x1f21+-0xde7+0x2d0a)?_0x571a4f=[_0x3baf56[_0x4d65e9+(0x10*0x1c5+-0x9c8*0x2+-0x8bf)][-0x98*-0x1a+0x2564+0x5c*-0x93]+(_0x3baf56[_0x4d65e9+(0x40*0x22+0xda*-0x9+-0xd5)][-0x43c*0x3+0x941+0x373]-_0x3baf56[_0x4d65e9][0x1*-0x11e1+-0x2*0x94f+-0x247f*-0x1]),_0x3baf56[_0x4d65e9+(0x1526+0x9b6+-0x1edb)][0x3c*0xd+0x1dbc+0x1*-0x20c7]+(_0x3baf56[_0x4d65e9+(0x1326+0x1e41+-0x3166)][0x5*-0x5e1+-0x299*0xe+0x41c4]-_0x3baf56[_0x4d65e9][0x22*-0x13+-0x1718+0x1*0x199f])]:_0x571a4f=_0x3baf56[_0x4d65e9+(-0x203b*0x1+-0x23d8+0x4415)],this['_curve']['type']===Zm){const _0x5da42a=(-0x1*0x244d+0x21e0+0x26f)*(_0x3c41ac[-0xd5*0x7+-0x1*0xb6e+0x1141]-_0x241068[0x250e+0x1b4e+0xaba*-0x6])/(_0x3c41ac[0xb2b+-0x311+-0x81a]-_0x22f6e9[0x1172+-0x1355+0x1e3]),_0x5d9917=(0xad1+-0x5bf*-0x2+0x1*-0x164d)*(_0x3c41ac[0x4e7+0x1955+0x60c*-0x5]-_0x241068[0x1f*0x6+-0x247f+0x23c5])/(_0x571a4f[0x1161+0x2668+-0x37c9]-_0x241068[0x60*0x61+0x736+-0x2b96]);this['_m0']=this['_curve']['tension']*(isFinite(_0x5da42a)?_0x5da42a:-0x1*-0x1ee3+0x1090+0x2f73*-0x1)*(_0x3c41ac[-0x209*-0xc+0xfd1*-0x1+-0x89a]-_0x22f6e9[0xf63+-0x1540+0x2*0x2ef]),this['_m1']=this['_curve']['tension']*(isFinite(_0x5d9917)?_0x5d9917:-0x22db+0x62a*0x5+-0x1*-0x409)*(_0x571a4f[-0x511+-0x2600+0x2b12]-_0x241068[-0x8d2+0x323+0x5b0]);}else{const _0x5d13b2=(_0x3c41ac[-0x7bc+0x21d5+0x189*-0x11]-_0x241068[-0x819+-0x159d+0x1db6*0x1])/(_0x241068[-0xdf*0xa+-0x621*-0x1+0x295]-_0x22f6e9[-0x198e+0x1ae7+-0x159]),_0x237739=(_0x3c41ac[-0x1a85+-0x52f*-0x1+-0x1*-0x1556]-_0x241068[-0x2116+-0x16b7+0x37cd])/(_0x571a4f[-0x7a2*-0x2+0x5eb*-0x3+0x7*0x5b]-_0x3c41ac[0xa3*-0x22+-0x1a3a+0x2fe0]),_0x3e487a=_0x241068[-0x90*-0x13+-0x1f5d+0x14ae]+(_0x22f6e9[0x1*-0xb1d+-0x5*-0x419+-0x95f]-_0x241068[0x966+0xd66+-0x16cb])*(isFinite(_0x5d13b2)?_0x5d13b2:-0x5*0xc1+-0xfb*-0x2+-0x1cf*-0x1),_0x3197b0=_0x3c41ac[0x13c9+-0xea+-0x5*0x3c6]+(_0x571a4f[0x1c3d+0xcf6+-0x2932]-_0x3c41ac[0x29a*-0xe+-0x1d0+0xd*0x2f1])*(isFinite(_0x237739)?_0x237739:-0x1*0x848+-0x1819*-0x1+-0xfd1),_0x48150d=this['_curve']['tension'];this['_m0']=_0x48150d*(_0x3c41ac[0x5e5*0x1+0xbb3*0x3+0x7*-0x5db]-_0x3e487a),this['_m1']=_0x48150d*(_0x3197b0-_0x241068[-0x1a5*-0xf+0x947+-0x1*0x21f1]);}}['_evaluateH'+'ermite'](_0x1c9c36,_0x4f8140,_0x5ee17d,_0x2b4c07,_0x133772){const _0x4e7d34=_0x133772*_0x133772,_0x498f9b=_0x133772+_0x133772,_0x3529ae=0x415*0x9+0x252f+-0x7f*0x95-_0x133772,_0x368f59=_0x3529ae*_0x3529ae;return _0x1c9c36*((0x283+-0x149d+0x121b+_0x498f9b)*_0x368f59)+_0x5ee17d*(_0x133772*_0x368f59)+_0x4f8140*(_0x4e7d34*(-0x22cc+0x3*0xcc1+-0x374*0x1-_0x498f9b))+_0x2b4c07*(_0x4e7d34*(_0x133772-(0x80*-0x13+0x743+0x1*0x23e)));}}class Bs{constructor(_0x371268){h(this,'keys',[]),h(this,'type',vu),h(this,'tension',0xddf+-0x6*0x107+-0x7b5+0.5),h(this,'_eval',new rS(this));if(_0x371268){for(let _0x1a61ac=-0x5*-0x537+0x38f*0x7+0x1*-0x32fc;_0x1a61ac<_0x371268['length']-(0x94f*-0x2+0x1*-0xabd+-0x1d5c*-0x1);_0x1a61ac+=-0x2*-0x448+-0x3*0x1+0x1*-0x88b)this['keys']['push']([_0x371268[_0x1a61ac],_0x371268[_0x1a61ac+(0x1db4+0xf70+-0x2d23)]]);}this['sort']();}get['length'](){return this['keys']['length'];}['add'](_0x4dcf87,_0x618d73){const _0xc1d8=this['keys'],_0x2b4387=_0xc1d8['length'];let _0x51086a=0x18e5+0xaf+-0x1994;for(;_0x51086a<_0x2b4387&&!(_0xc1d8[_0x51086a][-0x4e5*-0x6+-0x1495+-0xad*0xd]>_0x4dcf87);_0x51086a++);const _0x394450=[_0x4dcf87,_0x618d73];return this['keys']['splice'](_0x51086a,0x1*0x263f+0x1025+-0x3664,_0x394450),_0x394450;}['get'](_0x1cc68c){return this['keys'][_0x1cc68c];}['sort'](){this['keys']['sort']((_0x450857,_0x2527c8)=>_0x450857[0x1b*0xa7+0x1923+0x98*-0x48]-_0x2527c8[0x514+0x4*-0x3aa+0x2*0x4ca]);}['value'](_0x110404){return this['_eval']['evaluate'](_0x110404,!(0xb15*0x3+0x8f*0x1a+-0x2fc5));}['closest'](_0x241996){const _0x4fe0b1=this['keys'],_0x18465f=_0x4fe0b1['length'];let _0x1276f5=0x817*-0x1+0x1cf7+-0xa6f*0x2,_0x3495f2=null;for(let _0xb282b6=-0x13*0x137+0xa53*0x2+0x26f;_0xb282b6<_0x18465f;_0xb282b6++){const _0x254cd6=Math['abs'](_0x241996-_0x4fe0b1[_0xb282b6][-0x7a4+-0x16*0xeb+0x1bd6*0x1]);if(_0x1276f5>=_0x254cd6)_0x1276f5=_0x254cd6,_0x3495f2=_0x4fe0b1[_0xb282b6];else break;}return _0x3495f2;}['clone'](){const _0xfb67fa=new this['constructo'+'r']();return _0xfb67fa['keys']=this['keys']['map'](_0x271852=>[..._0x271852]),_0xfb67fa['type']=this['type'],_0xfb67fa['tension']=this['tension'],_0xfb67fa;}['quantize'](_0x2396d0){_0x2396d0=Math['max'](_0x2396d0,-0x2d*-0xa4+-0x1a35+0xdf*-0x3);const _0x11b504=new Float32Array(_0x2396d0),_0x44d589=(-0x2613+0x5*-0x4a3+0x3d43*0x1)/(_0x2396d0-(0x1*-0x229a+0x9f1*-0x1+0x2c8c));_0x11b504[-0x2f8+0xc*-0x265+0x1fb4]=this['_eval']['evaluate'](0x1f5f*-0x1+-0xf0d+0x2e6c,!(-0xfe+-0x845+0x1*0x943));for(let _0x59aed9=-0x1e8*-0x8+0x19e+-0x10dd*0x1;_0x59aed9<_0x2396d0;_0x59aed9++)_0x11b504[_0x59aed9]=this['_eval']['evaluate'](_0x44d589*_0x59aed9);return _0x11b504;}['quantizeCl'+'amped'](_0x229c58,_0x182a4d,_0x1cbddd){const _0x3c4f53=this['quantize'](_0x229c58);for(let _0xddfd0e=-0x468*0x7+0x5*-0x307+0x2dfb;_0xddfd0e<_0x3c4f53['length'];++_0xddfd0e)_0x3c4f53[_0xddfd0e]=Math['min'](_0x1cbddd,Math['max'](_0x182a4d,_0x3c4f53[_0xddfd0e]));return _0x3c4f53;}}class Wr{constructor(..._0x5c8f89){h(this,'curves',[]),h(this,'_type',vu);if(_0x5c8f89['length']>-0x1*-0x2429+0x176*0x1a+-0xa*0x76a){for(let _0x565a1d=-0x2cf+-0x731+0x200*0x5;_0x565a1d<_0x5c8f89['length'];_0x565a1d++)this['curves']['push'](new Bs(_0x5c8f89[_0x565a1d]));}else{if(_0x5c8f89['length']===0x3a*0x4f+0x20*-0x3e+0x362*-0x3)this['curves']['push'](new Bs());else{const _0x700561=_0x5c8f89[-0x24d3+0xe4b+0x1688];if(typeof _0x700561=='number'){for(let _0x4dc390=-0x9e*-0x6+0xab2*-0x2+0x11b0;_0x4dc390<_0x700561;_0x4dc390++)this['curves']['push'](new Bs());}else{for(let _0x193ff2=0x2c*-0x46+0x1*0x15b1+-0x1*0x9a9;_0x193ff2<_0x700561['length'];_0x193ff2++)this['curves']['push'](new Bs(_0x700561[_0x193ff2]));}}}}get['length'](){return this['curves']['length'];}set['type'](_0xae4fdc){this['_type']=_0xae4fdc;for(let _0x5a38dd=-0xe45+-0x3b*0x7f+0x1*0x2b8a;_0x5a38dd<this['curves']['length'];_0x5a38dd++)this['curves'][_0x5a38dd]['type']=_0xae4fdc;}get['type'](){return this['_type'];}['get'](_0x69ae7b){return this['curves'][_0x69ae7b];}['value'](_0x120ca3,_0x4076b7=[]){const _0x5f4f15=this['curves']['length'];_0x4076b7['length']=_0x5f4f15;for(let _0x18a971=-0x5*0x5c0+0x9d*-0x12+0xb*0x39e;_0x18a971<_0x5f4f15;_0x18a971++)_0x4076b7[_0x18a971]=this['curves'][_0x18a971]['value'](_0x120ca3);return _0x4076b7;}['clone'](){const _0x24167c=new this['constructo'+'r']();_0x24167c['curves']=[];for(let _0x4efa75=0x2705+-0x22*-0xf4+0x73*-0x9f;_0x4efa75<this['curves']['length'];_0x4efa75++)_0x24167c['curves']['push'](this['curves'][_0x4efa75]['clone']());return _0x24167c['_type']=this['_type'],_0x24167c;}['quantize'](_0x39499e){_0x39499e=Math['max'](_0x39499e,0x70c+-0x1cf+-0x53b);const _0x10cf5d=this['curves']['length'],_0x1a699f=new Float32Array(_0x39499e*_0x10cf5d),_0x2ecb7f=(0x1*-0x77c+0x2443*-0x1+-0x230*-0x14)/(_0x39499e-(0x94*0x17+-0x1880+0x97*0x13));for(let _0x4fec27=0x1867+0x1cc*-0x4+0x153*-0xd;_0x4fec27<_0x10cf5d;_0x4fec27++){const _0x137caa=new rS(this['curves'][_0x4fec27]);for(let _0x11d55b=0xafc+0x9*0x1e7+-0x5*0x59f;_0x11d55b<_0x39499e;_0x11d55b++)_0x1a699f[_0x11d55b*_0x10cf5d+_0x4fec27]=_0x137caa['evaluate'](_0x2ecb7f*_0x11d55b);}return _0x1a699f;}['quantizeCl'+'amped'](_0xe50d88,_0x4fa84e,_0x238b59){const _0x266410=this['quantize'](_0xe50d88);for(let _0x449347=0x137b+-0x6*0x427+0x1*0x56f;_0x449347<_0x266410['length'];++_0x449347)_0x266410[_0x449347]=Math['min'](_0x238b59,Math['max'](_0x4fa84e,_0x266410[_0x449347]));return _0x266410;}}const hf=new Float32Array(-0x4*0x174+0x1461+-0xe90),Qm=new Int32Array(hf['buffer']);class mn{static['float2Half'](_0xc0e42c){hf[0x2b*-0x89+-0x2dd+0x18*0x114]=_0xc0e42c;const _0x174004=Qm[0x142a+0xb34+-0x1f5e];let _0x1c7ec9=_0x174004>>-0x192c+0x1*-0x2c5+0x1c01&0xe9e2+0x588c+-0x29*0x4be,_0x3aeba5=_0x174004>>-0x18ce+-0xe31+0x270b&0x10*0x100+-0x1130+0x92f;const _0x517626=_0x174004>>0x1570+-0xeea+-0x1*0x66f&-0x1aed+-0xe4+0x10*0x1cd;return _0x517626<0x2658+0x116b+-0x375c?_0x1c7ec9:_0x517626>0x8f5+-0x813+-0x54?(_0x1c7ec9|=0x48e1+-0xaba2+0xdec1,_0x1c7ec9|=(_0x517626===-0xbe1+0x35*-0x5+0xde9?-0x3ec+0x1416+0x815*-0x2:0x179*0xd+-0x1ff3*-0x1+-0x1*0x3317)&&_0x174004&0x3c9172+0x5925fb+-0x297d*0x86,_0x1c7ec9):_0x517626<0x591+-0x1637+-0x7*-0x271?(_0x3aeba5|=0xd65*0x1+0xfb1+-0x1516,_0x1c7ec9|=(_0x3aeba5>>0x24d*-0xb+0x1*0x206e+-0x6ad-_0x517626)+(_0x3aeba5>>0x3*-0x73d+0x6*-0x333+0x295a-_0x517626&0x1*-0x1ec5+0x208f+-0x1*0x1c9),_0x1c7ec9):(_0x1c7ec9|=_0x517626-(-0x23f9+0x231d+0x14c)<<-0xada+0x1102+-0x61e|_0x3aeba5>>0x2689+0x1*0x1ea9+0x4531*-0x1,_0x1c7ec9+=_0x3aeba5&-0x8f7+-0x20c+-0x3c*-0x2f,_0x1c7ec9);}static['float2RGBA'+'8'](_0x463071,_0x4f0a0e){hf[-0x2*0xc88+-0x1*0x1aec+-0x1154*-0x3]=_0x463071;const _0x23ed00=Qm[-0x25dd+-0x15f6*0x1+0x3bd3];_0x4f0a0e['r']=(_0x23ed00>>-0x175*0xa+-0x16f*0x19+-0x737*-0x7&-0x1*-0x1216+-0x18e1*0x1+0x2*0x3e5)/(0x777+-0x2a2+-0x2*0x1eb),_0x4f0a0e['g']=(_0x23ed00>>-0x1849*0x1+0x8*0x20a+0x809&0x1eb6*-0x1+0x1*0x987+0x162e)/(0x1381*0x1+-0x200e+0x4*0x363),_0x4f0a0e['b']=(_0x23ed00>>-0x2518+-0x5dd*-0x5+0x7cf&0xaa9*0x1+0x8ca+-0x1*0x1274)/(0x1191+0x5*-0x7a9+0x15bb),_0x4f0a0e['a']=(_0x23ed00&0x1*0x1017+0x935+-0x1*0x184d)/(0xc2f+-0x13e8+-0x3e*-0x24);}}const yt=class yt{constructor(_0x50896a=0x191d*0x1+-0x1023+-0x8fa,_0x509381=-0x381+-0x22cd+0x264e,_0x4c97f4=0xffb*-0x1+-0x559+-0xaaa*-0x2){h(this,'x'),h(this,'y'),h(this,'z'),_0x50896a['length']===-0x734+0x39*0x4f+-0xa60?(this['x']=_0x50896a[0x6c9*0x3+0x646+-0x1aa1],this['y']=_0x50896a[0x1508+0x24f8+-0x39ff],this['z']=_0x50896a[0x163f+-0x1c96*-0x1+-0x3*0x10f1]):(this['x']=_0x50896a,this['y']=_0x509381,this['z']=_0x4c97f4);}['add'](_0x47e261){return this['x']+=_0x47e261['x'],this['y']+=_0x47e261['y'],this['z']+=_0x47e261['z'],this;}['add2'](_0x142f98,_0x4532e5){return this['x']=_0x142f98['x']+_0x4532e5['x'],this['y']=_0x142f98['y']+_0x4532e5['y'],this['z']=_0x142f98['z']+_0x4532e5['z'],this;}['addScalar'](_0x4926f3){return this['x']+=_0x4926f3,this['y']+=_0x4926f3,this['z']+=_0x4926f3,this;}['addScaled'](_0x394f18,_0x26ffb5){return this['x']+=_0x394f18['x']*_0x26ffb5,this['y']+=_0x394f18['y']*_0x26ffb5,this['z']+=_0x394f18['z']*_0x26ffb5,this;}['clone'](){const _0x5e08b3=this['constructo'+'r'];return new _0x5e08b3(this['x'],this['y'],this['z']);}['copy'](_0x5ccef4){return this['x']=_0x5ccef4['x'],this['y']=_0x5ccef4['y'],this['z']=_0x5ccef4['z'],this;}['cross'](_0x12a766,_0x4f896a){const _0x5b0bd8=_0x12a766['x'],_0x8cfd0=_0x12a766['y'],_0xb4f805=_0x12a766['z'],_0x132aa9=_0x4f896a['x'],_0x4a43ba=_0x4f896a['y'],_0x59335c=_0x4f896a['z'];return this['x']=_0x8cfd0*_0x59335c-_0x4a43ba*_0xb4f805,this['y']=_0xb4f805*_0x132aa9-_0x59335c*_0x5b0bd8,this['z']=_0x5b0bd8*_0x4a43ba-_0x132aa9*_0x8cfd0,this;}['distance'](_0xb4d161){const _0x6f88fe=this['x']-_0xb4d161['x'],_0x41a8fd=this['y']-_0xb4d161['y'],_0x2d7b76=this['z']-_0xb4d161['z'];return Math['sqrt'](_0x6f88fe*_0x6f88fe+_0x41a8fd*_0x41a8fd+_0x2d7b76*_0x2d7b76);}['div'](_0x2fdac5){return this['x']/=_0x2fdac5['x'],this['y']/=_0x2fdac5['y'],this['z']/=_0x2fdac5['z'],this;}['div2'](_0x2e4a0a,_0x316b10){return this['x']=_0x2e4a0a['x']/_0x316b10['x'],this['y']=_0x2e4a0a['y']/_0x316b10['y'],this['z']=_0x2e4a0a['z']/_0x316b10['z'],this;}['divScalar'](_0x20cd52){return this['x']/=_0x20cd52,this['y']/=_0x20cd52,this['z']/=_0x20cd52,this;}['dot'](_0x5816b5){return this['x']*_0x5816b5['x']+this['y']*_0x5816b5['y']+this['z']*_0x5816b5['z'];}['equals'](_0x1be27a){return this['x']===_0x1be27a['x']&&this['y']===_0x1be27a['y']&&this['z']===_0x1be27a['z'];}['equalsAppr'+'ox'](_0x4a9758,_0x4795bb=0x15d*0x9+-0x194b+0x683*0x2+0.000001){return Math['abs'](this['x']-_0x4a9758['x'])<_0x4795bb&&Math['abs'](this['y']-_0x4a9758['y'])<_0x4795bb&&Math['abs'](this['z']-_0x4a9758['z'])<_0x4795bb;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z'];}['lerp'](_0x20419d,_0x22afc6,_0x40bc21){return this['x']=_0x20419d['x']+_0x40bc21*(_0x22afc6['x']-_0x20419d['x']),this['y']=_0x20419d['y']+_0x40bc21*(_0x22afc6['y']-_0x20419d['y']),this['z']=_0x20419d['z']+_0x40bc21*(_0x22afc6['z']-_0x20419d['z']),this;}['mul'](_0x2bc8e2){return this['x']*=_0x2bc8e2['x'],this['y']*=_0x2bc8e2['y'],this['z']*=_0x2bc8e2['z'],this;}['mul2'](_0x1d63dc,_0x44c11c){return this['x']=_0x1d63dc['x']*_0x44c11c['x'],this['y']=_0x1d63dc['y']*_0x44c11c['y'],this['z']=_0x1d63dc['z']*_0x44c11c['z'],this;}['mulScalar'](_0x589653){return this['x']*=_0x589653,this['y']*=_0x589653,this['z']*=_0x589653,this;}['normalize'](_0x2fa414=this){const _0x471089=_0x2fa414['x']*_0x2fa414['x']+_0x2fa414['y']*_0x2fa414['y']+_0x2fa414['z']*_0x2fa414['z'];if(_0x471089>0x203+-0x33e+-0xf*-0x15){const _0x3ad1b1=(0x1c00+-0x5*0x1b1+-0x138a)/Math['sqrt'](_0x471089);this['x']=_0x2fa414['x']*_0x3ad1b1,this['y']=_0x2fa414['y']*_0x3ad1b1,this['z']=_0x2fa414['z']*_0x3ad1b1;}return this;}['floor'](_0x3ea0cd=this){return this['x']=Math['floor'](_0x3ea0cd['x']),this['y']=Math['floor'](_0x3ea0cd['y']),this['z']=Math['floor'](_0x3ea0cd['z']),this;}['ceil'](_0x51d68f=this){return this['x']=Math['ceil'](_0x51d68f['x']),this['y']=Math['ceil'](_0x51d68f['y']),this['z']=Math['ceil'](_0x51d68f['z']),this;}['round'](_0x4d92f0=this){return this['x']=Math['round'](_0x4d92f0['x']),this['y']=Math['round'](_0x4d92f0['y']),this['z']=Math['round'](_0x4d92f0['z']),this;}['min'](_0x17f70b){return _0x17f70b['x']<this['x']&&(this['x']=_0x17f70b['x']),_0x17f70b['y']<this['y']&&(this['y']=_0x17f70b['y']),_0x17f70b['z']<this['z']&&(this['z']=_0x17f70b['z']),this;}['max'](_0x3a368e){return _0x3a368e['x']>this['x']&&(this['x']=_0x3a368e['x']),_0x3a368e['y']>this['y']&&(this['y']=_0x3a368e['y']),_0x3a368e['z']>this['z']&&(this['z']=_0x3a368e['z']),this;}['project'](_0x417e17){const _0x73287d=this['x']*_0x417e17['x']+this['y']*_0x417e17['y']+this['z']*_0x417e17['z'],_0x42cb14=_0x417e17['x']*_0x417e17['x']+_0x417e17['y']*_0x417e17['y']+_0x417e17['z']*_0x417e17['z'],_0x4e078d=_0x73287d/_0x42cb14;return this['x']=_0x417e17['x']*_0x4e078d,this['y']=_0x417e17['y']*_0x4e078d,this['z']=_0x417e17['z']*_0x4e078d,this;}['set'](_0x29616f,_0x1bdac2,_0x20ea19){return this['x']=_0x29616f,this['y']=_0x1bdac2,this['z']=_0x20ea19,this;}['sub'](_0x2307fc){return this['x']-=_0x2307fc['x'],this['y']-=_0x2307fc['y'],this['z']-=_0x2307fc['z'],this;}['sub2'](_0x586f90,_0x3c4beb){return this['x']=_0x586f90['x']-_0x3c4beb['x'],this['y']=_0x586f90['y']-_0x3c4beb['y'],this['z']=_0x586f90['z']-_0x3c4beb['z'],this;}['subScalar'](_0x2cdf0a){return this['x']-=_0x2cdf0a,this['y']-=_0x2cdf0a,this['z']-=_0x2cdf0a,this;}['fromArray'](_0x23fc52,_0x3e3899=0x58b*0x1+-0xdbb+0x20c*0x4){return this['x']=_0x23fc52[_0x3e3899]??this['x'],this['y']=_0x23fc52[_0x3e3899+(0x12c9+0x1cd2+0x9*-0x54a)]??this['y'],this['z']=_0x23fc52[_0x3e3899+(0x1281+-0xc1d*0x3+0x1*0x11d8)]??this['z'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+']';}['toArray'](_0x52648f=[],_0x12e537=-0x66d*-0x5+0x5*0x5b1+-0x60f*0xa){return _0x52648f[_0x12e537]=this['x'],_0x52648f[_0x12e537+(-0xb83*-0x1+0x1*0x210d+-0x2c8f)]=this['y'],_0x52648f[_0x12e537+(0x20d9+0x1013+0x2*-0x1875)]=this['z'],_0x52648f;}};h(yt,'ZERO',Object['freeze'](new yt(-0x1010+0x1a41+0x1*-0xa31,0x10a0+0x241b+-0x34bb,-0xe0a+-0x1ecf+-0x10b*-0x2b))),h(yt,'HALF',Object['freeze'](new yt(0x8f*0x20+0x6eb+-0x18cb+0.5,-0xbe+0x3c7*0x1+-0x309+0.5,-0xb*0xba+0x12d6+-0xad8+0.5))),h(yt,'ONE',Object['freeze'](new yt(0x268e+0x189d*-0x1+-0xdf0,-0x2312+0x8f*-0x35+-0x22*-0x1e7,-0x2708+-0x300+0x11*0x279))),h(yt,'UP',Object['freeze'](new yt(-0x227a+0x14cf+0xdab*0x1,0x259b+-0xd16+0xc42*-0x2,0xbc0+0x29*-0x7a+0x7ca))),h(yt,'DOWN',Object['freeze'](new yt(-0x1*0x128d+-0x3*0x2fb+-0x8a*-0x33,-(-0x228a+0x21*-0x87+0x1*0x33f2),-0x1*0x202f+-0x1142+0x3171))),h(yt,'RIGHT',Object['freeze'](new yt(0xf1*0x17+0x10a3*-0x2+0xba0,0x1b04+-0x311+-0x17f3,0x13d*-0x7+-0xa*-0x1e2+-0xa29))),h(yt,'LEFT',Object['freeze'](new yt(-(-0x81*0x3d+-0x7a6+-0x7*-0x57c),0x3*0xef+-0x1*-0x108b+-0x26b*0x8,-0xbb6*0x3+-0xa28+0x2d4a))),h(yt,'FORWARD',Object['freeze'](new yt(-0xb71+-0x197+0x4*0x342,0x98*-0x8+0x1*-0x306+0x1*0x7c6,-(0x2704+-0x209*0x1+-0x24fa)))),h(yt,'BACK',Object['freeze'](new yt(0x17f1+0xb83*-0x2+0xeb*-0x1,0x918*0x2+0x88*-0x1b+-0x3d8,-0x188f+-0xf4b+0x27db)));let I=yt;const tn=class tn{constructor(){h(this,'data',new Float32Array(-0x15d*0x4+-0x8bc+0xe39)),this['data'][0x1bd0+0x3*-0x833+-0x337]=this['data'][0x2309*-0x1+-0xb34+0x2e41]=this['data'][-0x13fa+-0x535+-0x1937*-0x1]=-0x923+0x4f9+0x42b;}['clone'](){const _0x5c2725=this['constructo'+'r'];return new _0x5c2725()['copy'](this);}['copy'](_0x4694e6){const _0x28d462=_0x4694e6['data'],_0x9f153d=this['data'];return _0x9f153d[0x2072*0x1+-0x326*0xc+0x556]=_0x28d462[0x1*-0x310+-0x104f*-0x1+-0xd3f*0x1],_0x9f153d[0x71*-0x21+-0x1533+0x1*0x23c5]=_0x28d462[-0xfa+0x1e4+-0xe9],_0x9f153d[-0x189+0x290+-0x105]=_0x28d462[-0xece+0x1921+-0xa51],_0x9f153d[0x16f7*0x1+-0x100c+-0x6e8]=_0x28d462[-0x899+-0x40*-0x33+-0x424],_0x9f153d[-0x4*0x7cc+-0x99d+-0x3*-0xd9b]=_0x28d462[0x36*0x1f+-0x1897+0x1211],_0x9f153d[-0x1a7b*-0x1+-0x711+-0x1365]=_0x28d462[0x10f*0x1+0x237f+-0x2489],_0x9f153d[0x620+-0x1ab0*-0x1+0x20ca*-0x1]=_0x28d462[0x17d8+-0x2696+0xec4],_0x9f153d[0x26c5+-0x1d94+-0x92a]=_0x28d462[0x22e7+-0x1cd2+0x3e*-0x19],_0x9f153d[-0xf11+-0x12f1*0x2+0x34fb]=_0x28d462[-0x1c6c+0x5*-0x326+0x2c32],this;}['set'](_0x55fbf9){const _0x922b0b=this['data'];return _0x922b0b[0x20e5+0x78d+-0x2872]=_0x55fbf9[-0x1*0x19d2+-0xd*0x133+0x2969],_0x922b0b[0x401+0x1237+0x2f*-0x79]=_0x55fbf9[-0x21e5+-0x267a+0x4860],_0x922b0b[0xd10+-0x2*-0x817+-0xe9e*0x2]=_0x55fbf9[-0x15b+0x3*-0x157+0x562*0x1],_0x922b0b[-0x263b+-0x1*0x28d+0x28cb]=_0x55fbf9[0x2248+-0x1*-0x964+-0x2ba9],_0x922b0b[-0x1ae2+0x1*-0x1e73+0x3959]=_0x55fbf9[0x7*0x1ea+-0xd*0x59+0x8dd*-0x1],_0x922b0b[-0x1*-0x18b3+-0x15a1+-0x30d]=_0x55fbf9[0x79d*0x3+-0x14b4+-0x21e],_0x922b0b[-0x1699+0x522*0x2+0xc5b]=_0x55fbf9[0x269b+-0xdf*-0x4+-0xb*0x3d3],_0x922b0b[0x15b2+-0x2421+-0x73b*-0x2]=_0x55fbf9[-0x3f2*0x5+-0x18b8*0x1+0x37*0xcf],_0x922b0b[0x1669*-0x1+0x5f7*-0x6+0x1369*0x3]=_0x55fbf9[0x1edf+-0x2235+0x35e],this;}['getX'](_0x251f8a=new I()){return _0x251f8a['set'](this['data'][0x3*0x887+-0x7*-0x2ff+-0x2e8e],this['data'][0x2642+0x47d*-0x3+-0x18ca],this['data'][0xd7+-0x119+0x44]);}['getY'](_0x439ea0=new I()){return _0x439ea0['set'](this['data'][-0x3*-0x417+0xad2*-0x1+-0x170],this['data'][-0x1*0x1272+-0x14a3+0x2719*0x1],this['data'][0x37f+0x82d+-0xba7]);}['getZ'](_0x296b0b=new I()){return _0x296b0b['set'](this['data'][0x166+0x19c7*0x1+-0x1b27],this['data'][-0x2296*0x1+0x1583*-0x1+0x3820],this['data'][-0x2225+-0x1*0x58f+-0x1*-0x27bc]);}['equals'](_0x4705e9){const _0x12ce7c=this['data'],_0x3ff1c4=_0x4705e9['data'];return _0x12ce7c[0x24dd+-0x15a2+-0xf3b]===_0x3ff1c4[-0x455*0x5+0x6e3+0x7a*0x1f]&&_0x12ce7c[-0x25a6+-0x1*0x21ee+-0x2dd*-0x19]===_0x3ff1c4[0x11aa+0x2*-0x134b+0x14ed]&&_0x12ce7c[-0x1*-0x1233+-0xbad+-0x8b*0xc]===_0x3ff1c4[0x11f*-0xa+0x4*-0x206+0x26a*0x8]&&_0x12ce7c[0x16a0+-0x6*0x69+-0x1d5*0xb]===_0x3ff1c4[-0x22e2*-0x1+0xe75*0x1+-0x3154]&&_0x12ce7c[0x32b*0xa+0x1a2d*-0x1+0x119*-0x5]===_0x3ff1c4[-0x422+0x22be*-0x1+-0x20c*-0x13]&&_0x12ce7c[0xd53+-0x24b3+0x1765]===_0x3ff1c4[0x1*0x1e71+0x1653+0x15*-0x283]&&_0x12ce7c[-0x11*-0x155+-0x176e+-0x45*-0x3]===_0x3ff1c4[-0x1c6e+-0x16c3+-0x7*-0x751]&&_0x12ce7c[-0x17*-0x14+0x283*-0xf+-0x1*-0x23e8]===_0x3ff1c4[-0xec*-0xd+0x25*-0x5c+0x157*0x1]&&_0x12ce7c[0x375+-0x125+-0x248]===_0x3ff1c4[-0x2040+-0x1964+0x39ac];}['isIdentity'](){const _0x43ad72=this['data'];return _0x43ad72[-0x1f62*0x1+-0x92b*0x2+0x31b8]===0x3f5+0x1a67+0x13*-0x199&&_0x43ad72[0x39*0xa4+0x5*-0x6ef+-0x1d8]===-0x199*-0xb+-0x4*0x102+-0xd8b&&_0x43ad72[-0xa22+0x1*-0xfb3+0x9*0x2df]===0x100e+0x12a5+-0x22b3&&_0x43ad72[0xccb+0x16d*-0x5+-0x5a7]===0x1600+-0x8b*0x3d+0xb1f&&_0x43ad72[-0xa8d+-0x1728+-0x21b9*-0x1]===0x968*-0x4+0x1*-0x1403+0xee*0x3e&&_0x43ad72[-0x1*0x1f25+-0x3d+0x1f67]===0x31*-0x95+-0x73e+0x23c3&&_0x43ad72[-0x56*-0x5a+-0x9de+-0x1458]===0xa4f+0xc64+-0x16b3&&_0x43ad72[-0xcb0+0x2*0x91+-0x5*-0x251]===-0x10e2+-0x1fc*0x3+-0x9e*-0x25&&_0x43ad72[0x1c0c+-0x1c11+0xd]===-0x165e+-0x1092*0x1+0x26f1;}['setIdentit'+'y'](){const _0x3bf214=this['data'];return _0x3bf214[0xbbd+0x16ed+-0x22aa]=0x7a5+0xeb8+-0x1b*0xd4,_0x3bf214[-0x7*-0x1e1+-0x959+0x3cd*-0x1]=-0xe48+-0x1958+0x27a0,_0x3bf214[0x10f*-0x15+-0x1*0x117e+0x27bb]=0x19d5+-0x1f8e+0x5b9*0x1,_0x3bf214[-0x1460+-0x1825+-0xf*-0x2f8]=-0xf8e+0x1057*-0x1+0x1fe5,_0x3bf214[0x16c1+-0x25f0+0xf33*0x1]=-0x3b1*-0x5+-0x221f+-0xfab*-0x1,_0x3bf214[-0x29f+-0x5b0+0x854]=-0x223*-0xe+-0x16*0x16b+0x148,_0x3bf214[-0x114e+0x184f+-0x6fb]=-0x3*0x621+0xb8b+0x6d8,_0x3bf214[0x1*-0x63d+0x3b*0x86+0xc4f*-0x2]=-0x1158+-0x6fd+0x1*0x1855,_0x3bf214[0x8f1+0xda*-0x26+0x1773]=0x1a70+-0x735*0x2+-0xc05*0x1,this;}['toString'](){return'['+this['data']['join'](',\x20')+']';}['transpose'](_0x49c485=this){const _0x3f1623=_0x49c485['data'],_0x480ab8=this['data'];if(_0x3f1623===_0x480ab8){let _0x5beccf;_0x5beccf=_0x3f1623[-0x232*-0x2+-0x1*-0xa9f+0x11*-0xe2],_0x480ab8[-0x2067+-0x69e+0x2706]=_0x3f1623[0x1*-0xf3+0x2013+-0x1f1d],_0x480ab8[-0xbbf*0x1+-0x1a*-0x137+-0x13d4]=_0x5beccf,_0x5beccf=_0x3f1623[0x10a3+0x1523+-0x25c4],_0x480ab8[0x1*-0xc0c+0x1*-0x247+0xe55]=_0x3f1623[0x2649*0x1+0xb5c+-0x319f],_0x480ab8[-0xe7*-0x13+0x2*0x853+-0x21c5]=_0x5beccf,_0x5beccf=_0x3f1623[-0x50d+-0xce8+0x11fa],_0x480ab8[0x11c+-0x7f*-0x2+0x215*-0x1]=_0x3f1623[0x1*-0xff3+-0x1*0xd8b+0x1d85],_0x480ab8[0x1*-0x20cf+-0x19*0x160+0x4336]=_0x5beccf;}else _0x480ab8[0xd0*-0x3+-0x6e0+0x8*0x12a]=_0x3f1623[0x1*-0x5f9+-0x451*0x3+0x7*0x2b4],_0x480ab8[-0x1cd*0xb+0x1e85+-0xab5]=_0x3f1623[0x25c6+-0x231*-0x1+-0x27f4],_0x480ab8[0x1*-0x1614+0xf6b+0x6ab]=_0x3f1623[-0xa1*-0x39+0x20a5+-0x4e4*0xe],_0x480ab8[0x13b8+-0x2440+0x108b]=_0x3f1623[-0x5d1*0x1+-0xe*-0x14b+-0xc48],_0x480ab8[-0xc*-0x257+0x1b0d+-0x371d]=_0x3f1623[-0x1ff6+-0xb52+0x44*0xa3],_0x480ab8[0x13d4+0x26b5+-0x23*0x1ac]=_0x3f1623[0x365+0xf4*-0x1f+0x1a2e],_0x480ab8[0x3c9*-0x1+0x2088+0x2b*-0xab]=_0x3f1623[0x1a8b+0x1bda+0x5b*-0x99],_0x480ab8[0x18c8+-0x18d5+0xa*0x2]=_0x3f1623[0x1a3*0x7+0x19*-0x61+-0x1f7],_0x480ab8[-0xca7*0x1+0x930+0x37f]=_0x3f1623[-0x19cd+0xd64+0x27d*0x5];return this;}['setFromMat'+'4'](_0x3d7034){const _0x291fb6=_0x3d7034['data'],_0x34858f=this['data'];return _0x34858f[-0x1*0x191b+-0x9cf+0xda*0x29]=_0x291fb6[-0x1342+0x116d+0x7*0x43],_0x34858f[-0xe2*0x13+-0x18*-0xa+-0x32b*-0x5]=_0x291fb6[-0x1935+0x9f+0x1897],_0x34858f[0x5fb+0x103*0x13+-0x4b*0x56]=_0x291fb6[0x1d61+0x125c*-0x2+0x759],_0x34858f[-0x82f*0x2+-0xf31+0x6*0x543]=_0x291fb6[-0x167*0x6+-0x1ad9+0x2347],_0x34858f[0xad9+-0x1ef5+0xe0*0x17]=_0x291fb6[0x1ac1+0x4*0x79+-0x1ca0],_0x34858f[-0x1*0x1c0f+0x1*-0x1239+-0x9*-0x525]=_0x291fb6[0x2cc*-0x1+0x26a5+-0xbf1*0x3],_0x34858f[0xab*-0x2a+-0x439*0x1+0x204d]=_0x291fb6[-0x3*0x246+-0x2*0x819+0x170c],_0x34858f[0x2663*0x1+0x21*0x47+0x2f83*-0x1]=_0x291fb6[0x1b61+-0xb02+-0x6*0x2b9],_0x34858f[-0x1*-0x696+-0x5f4+-0x9a]=_0x291fb6[-0x1*0x2f+-0x1cbb+0x1cf4],this;}['setFromQua'+'t'](_0xcc8d4c){const _0x198e3c=_0xcc8d4c['x'],_0xc0e9cd=_0xcc8d4c['y'],_0x36282b=_0xcc8d4c['z'],_0x842b22=_0xcc8d4c['w'],_0x4a3bba=_0x198e3c+_0x198e3c,_0x59681b=_0xc0e9cd+_0xc0e9cd,_0x5b0f71=_0x36282b+_0x36282b,_0x3a31ac=_0x198e3c*_0x4a3bba,_0x58ce9d=_0x198e3c*_0x59681b,_0xb488ea=_0x198e3c*_0x5b0f71,_0x5cca67=_0xc0e9cd*_0x59681b,_0x114890=_0xc0e9cd*_0x5b0f71,_0x310b63=_0x36282b*_0x5b0f71,_0x3df2cc=_0x842b22*_0x4a3bba,_0x5cff76=_0x842b22*_0x59681b,_0x3d478a=_0x842b22*_0x5b0f71,_0x3cedb9=this['data'];return _0x3cedb9[0xc2e+0x1*-0x6c7+0x3*-0x1cd]=-0xd3f+0x17c2+0x1*-0xa82-(_0x5cca67+_0x310b63),_0x3cedb9[-0x792+-0x24af+0x2c42]=_0x58ce9d+_0x3d478a,_0x3cedb9[-0x1f*0x7b+-0x5af*-0x4+-0x7d5]=_0xb488ea-_0x5cff76,_0x3cedb9[-0x1*0x10a2+0x2703*-0x1+-0x37a8*-0x1]=_0x58ce9d-_0x3d478a,_0x3cedb9[-0xc29+-0x1e01*-0x1+-0x1c*0xa3]=0x2578+0x146f*-0x1+0x884*-0x2-(_0x3a31ac+_0x310b63),_0x3cedb9[-0x5*-0x412+-0x1d0e*0x1+0x8b9]=_0x114890+_0x3df2cc,_0x3cedb9[-0x138b+-0x1491*0x1+0x2822]=_0xb488ea+_0x5cff76,_0x3cedb9[-0x216c+-0x1*-0x10d+0x2066]=_0x114890-_0x3df2cc,_0x3cedb9[0x1*-0x2144+0x547+0x957*0x3]=0x1b6d+-0xba3*-0x1+-0x270f-(_0x3a31ac+_0x5cca67),this;}['invertMat4'](_0x85167b){const _0x3fbe31=_0x85167b['data'],_0x4490f3=_0x3fbe31[-0x129c+0x3*0x4a5+-0x13*-0x3f],_0xecc3d2=_0x3fbe31[-0x1915*0x1+-0x3b*0x98+0x3c1e],_0x5267c2=_0x3fbe31[-0x1ba6+-0x1*-0x779+-0x142f*-0x1],_0x444fc4=_0x3fbe31[-0x19e6+-0x22c6+0x4*0xf2c],_0x154119=_0x3fbe31[-0x5*-0x3c1+0x24c+-0x704*0x3],_0x1e935d=_0x3fbe31[-0xe9b+0x216+0xc8b],_0x394264=_0x3fbe31[0x91e+-0x3*-0xcb+0x1*-0xb77],_0x350f2f=_0x3fbe31[0x61d*0x3+-0x61*0x50+-0x1d*-0x6a],_0x3838ca=_0x3fbe31[-0x1d7d*-0x1+-0x48*-0x61+0x135*-0x2f],_0x4b56b4=_0x3838ca*_0x154119-_0x1e935d*_0x350f2f,_0x32b7bd=-_0x3838ca*_0xecc3d2+_0x5267c2*_0x350f2f,_0x1a3226=_0x1e935d*_0xecc3d2-_0x5267c2*_0x154119,_0x37d555=-_0x3838ca*_0x444fc4+_0x1e935d*_0x394264,_0x840402=_0x3838ca*_0x4490f3-_0x5267c2*_0x394264,_0x57c33e=-_0x1e935d*_0x4490f3+_0x5267c2*_0x444fc4,_0x2c090=_0x350f2f*_0x444fc4-_0x154119*_0x394264,_0xedb513=-_0x350f2f*_0x4490f3+_0xecc3d2*_0x394264,_0x1c47ca=_0x154119*_0x4490f3-_0xecc3d2*_0x444fc4,_0x1f3531=_0x4490f3*_0x4b56b4+_0xecc3d2*_0x37d555+_0x5267c2*_0x2c090;if(_0x1f3531===0x23fe+-0xb74*0x3+-0xd1*0x2)this['setIdentit'+'y']();else{const _0x15b135=(-0xee0+-0x3f9*0x5+-0x22be*-0x1)/_0x1f3531,_0x24c8f2=this['data'];_0x24c8f2[0x1eec+0x17bf*0x1+0x9*-0x613]=_0x4b56b4*_0x15b135,_0x24c8f2[0x1e7b+-0x1ded+-0x8d]=_0x32b7bd*_0x15b135,_0x24c8f2[0x17b1+0xd7f+-0x1*0x252e]=_0x1a3226*_0x15b135,_0x24c8f2[-0x3*-0x143+0x5*-0x22e+0x720]=_0x37d555*_0x15b135,_0x24c8f2[-0xed*0x2+0xcb2*-0x2+0x48b*0x6]=_0x840402*_0x15b135,_0x24c8f2[-0xee*-0x29+0x7*-0x3f1+-0xa82]=_0x57c33e*_0x15b135,_0x24c8f2[0x1*0x427+0x271+0x692*-0x1]=_0x2c090*_0x15b135,_0x24c8f2[0x3d3+0x97c+-0x64*0x22]=_0xedb513*_0x15b135,_0x24c8f2[-0x17*-0xf+0x1*0xc+-0x1*0x15d]=_0x1c47ca*_0x15b135;}return this;}['transformV'+'ector'](_0xce52f1,_0x46ee54=new I()){const _0x506b25=this['data'],{x:_0x360c6a,y:_0x4f492a,z:_0x3815ec}=_0xce52f1;return _0x46ee54['x']=_0x360c6a*_0x506b25[-0xfca+0x1*-0x17b3+0x277d]+_0x4f492a*_0x506b25[-0x11*-0x1cd+0xb50+-0x29ea]+_0x3815ec*_0x506b25[-0x26ef*0x1+-0x9*-0x3b9+0x574],_0x46ee54['y']=_0x360c6a*_0x506b25[-0xb99+-0x3d3+0xf6d]+_0x4f492a*_0x506b25[0x19*-0x26+-0x16c2+0x1a7c]+_0x3815ec*_0x506b25[-0xd94+0x2666+0x241*-0xb],_0x46ee54['z']=_0x360c6a*_0x506b25[0x2*0x11f5+0x2555+-0x493d]+_0x4f492a*_0x506b25[0xdd9*0x1+0x21db+-0x2faf]+_0x3815ec*_0x506b25[-0xc*-0x12f+-0xc7f+0x1ad*-0x1],_0x46ee54;}};h(tn,'IDENTITY',Object['freeze'](new tn())),h(tn,'ZERO',Object['freeze'](new tn()['set']([0x8*-0x2e3+0xfc6*0x2+-0x4*0x21d,0x223f+0x7a*0x14+-0x2bc7,0x43f*-0x3+0x1369+-0x6ac,-0xe4d+0x1ead*0x1+-0x1060,0x475*-0x2+0x1966+-0xd3*0x14,-0x163d+0x217f+-0xb42,0x4*0xd4+-0xa9b+-0x1*-0x74b,-0x1*-0xf7f+0x2*-0x8d3+0x227,-0x265*0x7+-0xf6+0x11b9])));let oi=tn;const Ft=class Ft{constructor(_0x48e9dd=0x15cd+0xda2+-0xc1*0x2f,_0x439c3b=0x873+0x24c7+-0x2d3a){h(this,'x'),h(this,'y'),_0x48e9dd['length']===0x1959+0x2401+-0x3d58?(this['x']=_0x48e9dd[-0x4c0+-0xd39+0x1*0x11f9],this['y']=_0x48e9dd[0x130d+0x18e3+-0x2bef]):(this['x']=_0x48e9dd,this['y']=_0x439c3b);}['add'](_0x22419f){return this['x']+=_0x22419f['x'],this['y']+=_0x22419f['y'],this;}['add2'](_0x60747e,_0xdf74ca){return this['x']=_0x60747e['x']+_0xdf74ca['x'],this['y']=_0x60747e['y']+_0xdf74ca['y'],this;}['addScalar'](_0x34ccdc){return this['x']+=_0x34ccdc,this['y']+=_0x34ccdc,this;}['addScaled'](_0x3bc979,_0x55126c){return this['x']+=_0x3bc979['x']*_0x55126c,this['y']+=_0x3bc979['y']*_0x55126c,this;}['clone'](){const _0x2c244c=this['constructo'+'r'];return new _0x2c244c(this['x'],this['y']);}['copy'](_0x31bf5d){return this['x']=_0x31bf5d['x'],this['y']=_0x31bf5d['y'],this;}['cross'](_0x2a8b06){return this['x']*_0x2a8b06['y']-this['y']*_0x2a8b06['x'];}['distance'](_0x530548){const _0x1a0680=this['x']-_0x530548['x'],_0x39cefe=this['y']-_0x530548['y'];return Math['sqrt'](_0x1a0680*_0x1a0680+_0x39cefe*_0x39cefe);}['div'](_0x5ec4c5){return this['x']/=_0x5ec4c5['x'],this['y']/=_0x5ec4c5['y'],this;}['div2'](_0x16822f,_0x348274){return this['x']=_0x16822f['x']/_0x348274['x'],this['y']=_0x16822f['y']/_0x348274['y'],this;}['divScalar'](_0x4064a7){return this['x']/=_0x4064a7,this['y']/=_0x4064a7,this;}['dot'](_0x3068eb){return this['x']*_0x3068eb['x']+this['y']*_0x3068eb['y'];}['equals'](_0xd9e20f){return this['x']===_0xd9e20f['x']&&this['y']===_0xd9e20f['y'];}['equalsAppr'+'ox'](_0x1010c4,_0xa1d16=-0x1*-0x270f+-0x4d*0x5b+0x5d8*-0x2+0.000001){return Math['abs'](this['x']-_0x1010c4['x'])<_0xa1d16&&Math['abs'](this['y']-_0x1010c4['y'])<_0xa1d16;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y'];}['lerp'](_0x23de22,_0x4658e4,_0x1d9b21){return this['x']=_0x23de22['x']+_0x1d9b21*(_0x4658e4['x']-_0x23de22['x']),this['y']=_0x23de22['y']+_0x1d9b21*(_0x4658e4['y']-_0x23de22['y']),this;}['mul'](_0x4ba2cf){return this['x']*=_0x4ba2cf['x'],this['y']*=_0x4ba2cf['y'],this;}['mul2'](_0x58dd17,_0x192856){return this['x']=_0x58dd17['x']*_0x192856['x'],this['y']=_0x58dd17['y']*_0x192856['y'],this;}['mulScalar'](_0x1f36f5){return this['x']*=_0x1f36f5,this['y']*=_0x1f36f5,this;}['normalize'](_0x4ab810=this){const _0x7e40f9=_0x4ab810['x']*_0x4ab810['x']+_0x4ab810['y']*_0x4ab810['y'];if(_0x7e40f9>-0x135b+-0xa27+-0x3*-0x9d6){const _0x48c22f=(-0x139c+-0xe64*0x1+0x2201)/Math['sqrt'](_0x7e40f9);this['x']=_0x4ab810['x']*_0x48c22f,this['y']=_0x4ab810['y']*_0x48c22f;}return this;}['rotate'](_0x4c1d06){const _0x5b37ad=Math['atan2'](this['x'],this['y'])+_0x4c1d06*Y['DEG_TO_RAD'],_0x4576e5=Math['sqrt'](this['x']*this['x']+this['y']*this['y']);return this['x']=Math['sin'](_0x5b37ad)*_0x4576e5,this['y']=Math['cos'](_0x5b37ad)*_0x4576e5,this;}['angle'](){return Math['atan2'](this['x'],this['y'])*Y['RAD_TO_DEG'];}['angleTo'](_0x5478fe){return Math['atan2'](this['x']*_0x5478fe['y']+this['y']*_0x5478fe['x'],this['x']*_0x5478fe['x']+this['y']*_0x5478fe['y'])*Y['RAD_TO_DEG'];}['floor'](_0x33bd0d=this){return this['x']=Math['floor'](_0x33bd0d['x']),this['y']=Math['floor'](_0x33bd0d['y']),this;}['ceil'](_0x1db3b3=this){return this['x']=Math['ceil'](_0x1db3b3['x']),this['y']=Math['ceil'](_0x1db3b3['y']),this;}['round'](_0x1a553d=this){return this['x']=Math['round'](_0x1a553d['x']),this['y']=Math['round'](_0x1a553d['y']),this;}['min'](_0xc89233){return _0xc89233['x']<this['x']&&(this['x']=_0xc89233['x']),_0xc89233['y']<this['y']&&(this['y']=_0xc89233['y']),this;}['max'](_0x3a0af0){return _0x3a0af0['x']>this['x']&&(this['x']=_0x3a0af0['x']),_0x3a0af0['y']>this['y']&&(this['y']=_0x3a0af0['y']),this;}['set'](_0x1d09ba,_0x5c0c1f){return this['x']=_0x1d09ba,this['y']=_0x5c0c1f,this;}['sub'](_0x2e45ab){return this['x']-=_0x2e45ab['x'],this['y']-=_0x2e45ab['y'],this;}['sub2'](_0x4e5a40,_0x2b9037){return this['x']=_0x4e5a40['x']-_0x2b9037['x'],this['y']=_0x4e5a40['y']-_0x2b9037['y'],this;}['subScalar'](_0x54e48d){return this['x']-=_0x54e48d,this['y']-=_0x54e48d,this;}['fromArray'](_0x29bc1e,_0x3a070c=0x1cfc+0x2182*-0x1+0x486){return this['x']=_0x29bc1e[_0x3a070c]??this['x'],this['y']=_0x29bc1e[_0x3a070c+(0x1*-0x34c+0xf62+-0xc15)]??this['y'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+']';}['toArray'](_0x1cb661=[],_0x511180=-0x4*0x427+0x3c*-0x62+0x2794){return _0x1cb661[_0x511180]=this['x'],_0x1cb661[_0x511180+(-0x21a9+0x1b09+0x6a1)]=this['y'],_0x1cb661;}static['angleRad'](_0x58f31b,_0x2b171c){return Math['atan2'](_0x58f31b['x']*_0x2b171c['y']-_0x58f31b['y']*_0x2b171c['x'],_0x58f31b['x']*_0x2b171c['x']+_0x58f31b['y']*_0x2b171c['y']);}};h(Ft,'ZERO',Object['freeze'](new Ft(0x21f3+0x5*-0x49+-0x2086,0x4*0x47a+0x202*-0x3+-0x75*0x1a))),h(Ft,'HALF',Object['freeze'](new Ft(-0x178*-0x11+-0xc4e+-0x655*0x2+0.5,-0x1*0x1b6f+-0x12b*0x13+0x31a0+0.5))),h(Ft,'ONE',Object['freeze'](new Ft(-0x55a+0x5*0x2cc+-0x8a1,-0xb*-0x36f+0x9d*0x29+-0x3ee9))),h(Ft,'UP',Object['freeze'](new Ft(-0xa*-0x16f+0x1130+-0x327*0xa,-0x9a4*0x1+-0x2449*0x1+-0x16f7*-0x2))),h(Ft,'DOWN',Object['freeze'](new Ft(0x1*0x71f+0x1b99+-0x22b8,-(-0x1782+-0x201b+0x379e)))),h(Ft,'RIGHT',Object['freeze'](new Ft(0xa88+0x11*-0x1+-0xa76,0x5f*-0x45+0x5c7+0x6*0x34e))),h(Ft,'LEFT',Object['freeze'](new Ft(-(-0xc95+0x443*-0x3+0x195f),-0x1977+0x1436+0x541)));let J=Ft;const er=class er{constructor(_0x591d63=-0x1*-0x54+-0x180b+0x17b7,_0x48e053=-0xb*-0x293+-0x1dea+0x199,_0x26fece=-0x11c3+-0x1759+-0x6da*-0x6,_0x420be5=0x224d*0x1+-0x7e3+-0x15*0x142){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x591d63['length']===-0x25f8+0x2*0x23b+-0x2*-0x10c3?(this['x']=_0x591d63[0x116f+-0x1516+0x3a7],this['y']=_0x591d63[0x90*-0x3+-0x10e9+0x129a],this['z']=_0x591d63[-0x19ce+-0x1b45+0x3515],this['w']=_0x591d63[-0xf3f*0x1+-0x3*-0xa99+-0x1089]):(this['x']=_0x591d63,this['y']=_0x48e053,this['z']=_0x26fece,this['w']=_0x420be5);}['add'](_0x1689de){return this['x']+=_0x1689de['x'],this['y']+=_0x1689de['y'],this['z']+=_0x1689de['z'],this['w']+=_0x1689de['w'],this;}['add2'](_0x12fe8a,_0x5eeda4){return this['x']=_0x12fe8a['x']+_0x5eeda4['x'],this['y']=_0x12fe8a['y']+_0x5eeda4['y'],this['z']=_0x12fe8a['z']+_0x5eeda4['z'],this['w']=_0x12fe8a['w']+_0x5eeda4['w'],this;}['addScalar'](_0x263813){return this['x']+=_0x263813,this['y']+=_0x263813,this['z']+=_0x263813,this['w']+=_0x263813,this;}['addScaled'](_0x585a44,_0x2c7530){return this['x']+=_0x585a44['x']*_0x2c7530,this['y']+=_0x585a44['y']*_0x2c7530,this['z']+=_0x585a44['z']*_0x2c7530,this['w']+=_0x585a44['w']*_0x2c7530,this;}['clone'](){const _0x216046=this['constructo'+'r'];return new _0x216046(this['x'],this['y'],this['z'],this['w']);}['copy'](_0xab6de3){return this['x']=_0xab6de3['x'],this['y']=_0xab6de3['y'],this['z']=_0xab6de3['z'],this['w']=_0xab6de3['w'],this;}['div'](_0x2a8368){return this['x']/=_0x2a8368['x'],this['y']/=_0x2a8368['y'],this['z']/=_0x2a8368['z'],this['w']/=_0x2a8368['w'],this;}['div2'](_0x4bd2b7,_0x2b59c4){return this['x']=_0x4bd2b7['x']/_0x2b59c4['x'],this['y']=_0x4bd2b7['y']/_0x2b59c4['y'],this['z']=_0x4bd2b7['z']/_0x2b59c4['z'],this['w']=_0x4bd2b7['w']/_0x2b59c4['w'],this;}['divScalar'](_0x2009f4){return this['x']/=_0x2009f4,this['y']/=_0x2009f4,this['z']/=_0x2009f4,this['w']/=_0x2009f4,this;}['dot'](_0x15049e){return this['x']*_0x15049e['x']+this['y']*_0x15049e['y']+this['z']*_0x15049e['z']+this['w']*_0x15049e['w'];}['equals'](_0x3e5a5f){return this['x']===_0x3e5a5f['x']&&this['y']===_0x3e5a5f['y']&&this['z']===_0x3e5a5f['z']&&this['w']===_0x3e5a5f['w'];}['equalsAppr'+'ox'](_0x112ca4,_0x122e11=-0x12b2+0x242d+-0x117b+0.000001){return Math['abs'](this['x']-_0x112ca4['x'])<_0x122e11&&Math['abs'](this['y']-_0x112ca4['y'])<_0x122e11&&Math['abs'](this['z']-_0x112ca4['z'])<_0x122e11&&Math['abs'](this['w']-_0x112ca4['w'])<_0x122e11;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x4c51ca,_0x2f0714,_0x112142){return this['x']=_0x4c51ca['x']+_0x112142*(_0x2f0714['x']-_0x4c51ca['x']),this['y']=_0x4c51ca['y']+_0x112142*(_0x2f0714['y']-_0x4c51ca['y']),this['z']=_0x4c51ca['z']+_0x112142*(_0x2f0714['z']-_0x4c51ca['z']),this['w']=_0x4c51ca['w']+_0x112142*(_0x2f0714['w']-_0x4c51ca['w']),this;}['mul'](_0x39df2d){return this['x']*=_0x39df2d['x'],this['y']*=_0x39df2d['y'],this['z']*=_0x39df2d['z'],this['w']*=_0x39df2d['w'],this;}['mul2'](_0xe01a42,_0x441279){return this['x']=_0xe01a42['x']*_0x441279['x'],this['y']=_0xe01a42['y']*_0x441279['y'],this['z']=_0xe01a42['z']*_0x441279['z'],this['w']=_0xe01a42['w']*_0x441279['w'],this;}['mulScalar'](_0x305467){return this['x']*=_0x305467,this['y']*=_0x305467,this['z']*=_0x305467,this['w']*=_0x305467,this;}['normalize'](_0x2278d8=this){const _0x26d71a=_0x2278d8['x']*_0x2278d8['x']+_0x2278d8['y']*_0x2278d8['y']+_0x2278d8['z']*_0x2278d8['z']+_0x2278d8['w']*_0x2278d8['w'];if(_0x26d71a>-0xa18+-0x129a+-0xe59*-0x2){const _0x4f035f=(0x131*0x1+0xb*-0x62+0x306)/Math['sqrt'](_0x26d71a);this['x']=_0x2278d8['x']*_0x4f035f,this['y']=_0x2278d8['y']*_0x4f035f,this['z']=_0x2278d8['z']*_0x4f035f,this['w']=_0x2278d8['w']*_0x4f035f;}return this;}['floor'](_0x5a84e3=this){return this['x']=Math['floor'](_0x5a84e3['x']),this['y']=Math['floor'](_0x5a84e3['y']),this['z']=Math['floor'](_0x5a84e3['z']),this['w']=Math['floor'](_0x5a84e3['w']),this;}['ceil'](_0x487a15=this){return this['x']=Math['ceil'](_0x487a15['x']),this['y']=Math['ceil'](_0x487a15['y']),this['z']=Math['ceil'](_0x487a15['z']),this['w']=Math['ceil'](_0x487a15['w']),this;}['round'](_0xac0e24=this){return this['x']=Math['round'](_0xac0e24['x']),this['y']=Math['round'](_0xac0e24['y']),this['z']=Math['round'](_0xac0e24['z']),this['w']=Math['round'](_0xac0e24['w']),this;}['min'](_0x283873){return _0x283873['x']<this['x']&&(this['x']=_0x283873['x']),_0x283873['y']<this['y']&&(this['y']=_0x283873['y']),_0x283873['z']<this['z']&&(this['z']=_0x283873['z']),_0x283873['w']<this['w']&&(this['w']=_0x283873['w']),this;}['max'](_0x460cde){return _0x460cde['x']>this['x']&&(this['x']=_0x460cde['x']),_0x460cde['y']>this['y']&&(this['y']=_0x460cde['y']),_0x460cde['z']>this['z']&&(this['z']=_0x460cde['z']),_0x460cde['w']>this['w']&&(this['w']=_0x460cde['w']),this;}['set'](_0xd7f7a7,_0x5951c4,_0x4b5f79,_0x1efbb7){return this['x']=_0xd7f7a7,this['y']=_0x5951c4,this['z']=_0x4b5f79,this['w']=_0x1efbb7,this;}['sub'](_0xe6399b){return this['x']-=_0xe6399b['x'],this['y']-=_0xe6399b['y'],this['z']-=_0xe6399b['z'],this['w']-=_0xe6399b['w'],this;}['sub2'](_0x49c710,_0x40b5f4){return this['x']=_0x49c710['x']-_0x40b5f4['x'],this['y']=_0x49c710['y']-_0x40b5f4['y'],this['z']=_0x49c710['z']-_0x40b5f4['z'],this['w']=_0x49c710['w']-_0x40b5f4['w'],this;}['subScalar'](_0x240c06){return this['x']-=_0x240c06,this['y']-=_0x240c06,this['z']-=_0x240c06,this['w']-=_0x240c06,this;}['fromArray'](_0x3b1b46,_0x496fc2=0x1*-0x8cf+0xdfd*0x1+-0x52e){return this['x']=_0x3b1b46[_0x496fc2]??this['x'],this['y']=_0x3b1b46[_0x496fc2+(0x1c3b+-0x1a1*0x5+0x1*-0x1415)]??this['y'],this['z']=_0x3b1b46[_0x496fc2+(-0xce2+0x3dc*0x1+0x908)]??this['z'],this['w']=_0x3b1b46[_0x496fc2+(-0x35b*0x5+0x19f5+-0x92b*0x1)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x2f13b3=[],_0xd3677=-0x1*-0x1733+0x63b+-0x1d6e){return _0x2f13b3[_0xd3677]=this['x'],_0x2f13b3[_0xd3677+(0x500+0x2586+-0x2a85)]=this['y'],_0x2f13b3[_0xd3677+(0x9d3+-0x11*-0x16a+-0x21db)]=this['z'],_0x2f13b3[_0xd3677+(-0x24f6+0x3*-0xcc9+-0x191c*-0x3)]=this['w'],_0x2f13b3;}};h(er,'ZERO',Object['freeze'](new er(-0x20d2+-0x1*0xf3b+0x300d,-0xcd5*-0x1+0x2*0xb3+-0xe3b,0x4*-0x7b+-0x287*0xa+-0x3b*-0x76,0x1e23+-0x1*-0x14b7+-0x1*0x32da))),h(er,'HALF',Object['freeze'](new er(0x1e15+-0x9d*-0x2+-0x1f4f+0.5,-0x1991+0x62*0x43+-0x15+0.5,-0x24b5+0x1*-0x3f+0x24f4+0.5,-0x91d+0x2c*0x3e+-0x5*0x4f+0.5))),h(er,'ONE',Object['freeze'](new er(-0x1ed8+-0x1b03+0x1cee*0x2,0x51f+0xdd8+0x12f6*-0x1,0x1*0x813+0x15fc+-0xf07*0x2,-0x3*-0x2d+0xb77+0xb*-0x117)));let ae=er;const Un=new J(),As=new I(),Hs=new I(),Ws=new I(),yl=new I(),Ur=class Ur{constructor(){h(this,'data',new Float32Array(0x3f4+-0x6*-0x92+-0x27*0x30)),this['data'][-0x1*0x24e9+0x1193+0x5*0x3de]=this['data'][0x10b*0x7+-0x260*0x1+-0x4e8]=this['data'][0x1*-0x19b1+0x5*0x241+0xe76]=this['data'][0x56a+0x1*0xd17+-0x1272]=0x4*0x1b1+0x19d5+-0x38*0x95;}static['_getPerspe'+'ctiveHalfS'+'ize'](_0x3e99bc,_0x597fc9,_0x194a2d,_0x4ed153,_0x1df9e1){_0x1df9e1?(_0x3e99bc['x']=_0x4ed153*Math['tan'](_0x597fc9*Math['PI']/(-0x91*-0x41+-0x12e8+-0x1081)),_0x3e99bc['y']=_0x3e99bc['x']/_0x194a2d):(_0x3e99bc['y']=_0x4ed153*Math['tan'](_0x597fc9*Math['PI']/(-0xcb5+0x1b47+-0x2a2*0x5)),_0x3e99bc['x']=_0x3e99bc['y']*_0x194a2d);}['add2'](_0x348026,_0x1b793c){const _0x5e4bb8=_0x348026['data'],_0x126360=_0x1b793c['data'],_0x5ec02a=this['data'];return _0x5ec02a[0x7*0x359+-0x11b0*-0x1+0x13f*-0x21]=_0x5e4bb8[0x1997+0x359*-0xb+-0x4*-0x2cf]+_0x126360[-0x20cb*0x1+0x1*0x9e6+0x16e5],_0x5ec02a[0x484+0x23e4+-0x2867]=_0x5e4bb8[0x112*-0x20+0x1f3a+0x307]+_0x126360[-0x1*-0x18e3+0x84b+0x212d*-0x1],_0x5ec02a[-0x177a+-0x13*-0x1c1+-0x1*0x9d7]=_0x5e4bb8[-0xc74+-0xccf+0x1945*0x1]+_0x126360[0x262c+-0x169b+0x1*-0xf8f],_0x5ec02a[-0xb*-0x24a+-0x18a+-0x17a1]=_0x5e4bb8[-0x1*0x989+-0x20c7+0x2a53]+_0x126360[-0xcbe*-0x1+-0x3*-0xc3d+-0x3172],_0x5ec02a[0x1d10+0x7c5+-0x24d1]=_0x5e4bb8[-0xcb9+0x54*-0x20+0x173d]+_0x126360[-0x2*0x1fb+-0x47a+0x874],_0x5ec02a[-0x9cd+-0x5e6+0xfb8]=_0x5e4bb8[0x312*-0xc+-0x1*-0x143b+0x10a2]+_0x126360[-0xa90+0xc8a+-0x1f5],_0x5ec02a[-0x51*0xf+-0x10fe+0x15c3]=_0x5e4bb8[0xc8d+0x135*-0x5+0x3*-0x22a]+_0x126360[0xdbf+0x1636+0x1*-0x23ef],_0x5ec02a[0x860+-0x5f3+0x1*-0x266]=_0x5e4bb8[-0x1083+0x13*-0x155+0x29d9*0x1]+_0x126360[-0x806+-0x831*-0x3+0xf*-0x11a],_0x5ec02a[-0x394+0x15b5+-0x1219]=_0x5e4bb8[0x185*-0x17+-0x13c5+0x36c0]+_0x126360[0xdf0+0x1*0x207d+0x2e65*-0x1],_0x5ec02a[-0x925+-0x1*0x67d+0xfab]=_0x5e4bb8[-0x2a0+0xb*0x2ab+-0x1ab0]+_0x126360[-0xcdc*-0x1+-0x185a+0xb87],_0x5ec02a[0x12df*-0x1+0x15f*-0x8+0x1de1]=_0x5e4bb8[-0x1615+-0x2324+-0x6b*-0x89]+_0x126360[0x1fe9+0xa2*-0x16+-0x11f3],_0x5ec02a[-0x7b7+0x19ef+-0x122d]=_0x5e4bb8[0x1077+0x538*0x3+0x1*-0x2014]+_0x126360[0x1*-0x9f5+0x2*0x11a7+0x4f*-0x52],_0x5ec02a[-0x187f+0x18e1+-0x56]=_0x5e4bb8[0x1381+0x51a+-0x188f]+_0x126360[-0x71e+-0x1588+0x1cb2],_0x5ec02a[0x1368+0x1*0xdc7+-0x2122]=_0x5e4bb8[0xa7*-0x11+0x1120+-0x2fe*0x2]+_0x126360[0x6b5+0x25*0xe9+0x5*-0x811],_0x5ec02a[0x1853+0x14*0x145+-0x1*0x31a9]=_0x5e4bb8[0x9*0x67+0x35*0x8b+-0x2058]+_0x126360[-0xd9f+-0x3*-0xc54+-0x174f],_0x5ec02a[0x1e6c+-0x6fb+0x92*-0x29]=_0x5e4bb8[-0x2425+-0x2218*-0x1+0x21c]+_0x126360[0x1600+0x229d+-0x388e],this;}['add'](_0x3126e4){return this['add2'](this,_0x3126e4);}['clone'](){const _0x138760=this['constructo'+'r'];return new _0x138760()['copy'](this);}['copy'](_0x1d69cc){const _0x3b36b6=_0x1d69cc['data'],_0x94999d=this['data'];return _0x94999d[0x935+0xb1*0x1f+0x1ea4*-0x1]=_0x3b36b6[0x1*0xac1+0x5ce*0x3+0x1*-0x1c2b],_0x94999d[-0x48b*0x8+0x189b+0xbbe]=_0x3b36b6[0x12a3+-0x1*0x14e7+0x53*0x7],_0x94999d[0x2*0xd4e+-0xaaf*0x1+-0xfeb]=_0x3b36b6[0x9b9*0x1+0x78+0xb*-0xed],_0x94999d[0x248e*0x1+0x45a+-0x28e5*0x1]=_0x3b36b6[-0x6*-0x304+-0x7f*0x3c+0xbaf],_0x94999d[-0x180f+0x2df+0x1534]=_0x3b36b6[0x1f0c+0x167c*0x1+-0x3584],_0x94999d[0x481*0x7+-0x25b7+0x1*0x635]=_0x3b36b6[-0x23f9+0x49*-0x2f+0x3165],_0x94999d[-0x304+-0x1c99*-0x1+-0x1*0x198f]=_0x3b36b6[-0x45*-0x7f+-0x1*0x6bb+-0x1b7a],_0x94999d[-0x22b6+0xcc7+0x15f6]=_0x3b36b6[0x21d*-0x7+-0xba7+0x1a79],_0x94999d[0x4a1+0x241b+-0x28b4]=_0x3b36b6[-0x529+0x14*-0x17e+-0x2309*-0x1],_0x94999d[0x2b*-0x13+0x84d+0x1*-0x513]=_0x3b36b6[0x5d*0x2b+-0x31*-0xc6+-0x357c],_0x94999d[0x2141+0x44*-0x5c+-0x8c7*0x1]=_0x3b36b6[-0x2*-0xdc3+0x57*0x1a+-0x1*0x2452],_0x94999d[-0xa1e+0x3d*0x61+-0xcf4]=_0x3b36b6[-0x8*-0x4ba+-0x1*0x2023+-0x5a2],_0x94999d[-0x201a+0x2*0x508+-0x1*-0x1616]=_0x3b36b6[-0x64*0x1+0x17bb+0x43*-0x59],_0x94999d[-0x26b*0x1+0x1730+-0x68*0x33]=_0x3b36b6[-0x1205*-0x1+0x1165+-0x235d],_0x94999d[-0x108e+0x2a7*0x8+-0x49c]=_0x3b36b6[-0x44c+-0x29d+-0x1*-0x6f7],_0x94999d[-0x2444+-0x5ed*-0x1+0x1e66]=_0x3b36b6[0x185c*-0x1+0x21f*0x3+-0x907*-0x2],this;}['equals'](_0xcd34db){const _0x16beda=this['data'],_0x5dac8b=_0xcd34db['data'];return _0x16beda[-0x2324*-0x1+0x1*0x1c2d+-0x3f51]===_0x5dac8b[0x257f+-0x1d6c+-0x813]&&_0x16beda[0x47*-0x53+0x99d+0xd69]===_0x5dac8b[-0x729+0x1c2+0x568]&&_0x16beda[0x2491*-0x1+0x819*-0x3+0x3cde]===_0x5dac8b[0x117c+0x22a4+-0x341e]&&_0x16beda[-0xed4+0x26ae+-0x17d7]===_0x5dac8b[0x1*0x225+-0x22*0x67+-0x2*-0x5c6]&&_0x16beda[-0x182*-0x10+0x199c+-0xc6e*0x4]===_0x5dac8b[-0x2471+0x1*-0xa1b+0x14*0x254]&&_0x16beda[-0x1*0x1276+-0x25*0x1c+0x1687]===_0x5dac8b[0x896*-0x3+-0xbf0*0x2+0x31a7]&&_0x16beda[-0x26e*-0x2+-0x827*0x1+0x351]===_0x5dac8b[0x1dac+-0x2*-0xd21+0x37e8*-0x1]&&_0x16beda[-0x1f13+-0x493*-0x7+-0xeb]===_0x5dac8b[-0x1*-0x235+0x963+0x1*-0xb91]&&_0x16beda[0x35+-0x888+0x85b]===_0x5dac8b[0x11*0x175+0x135f+0xc*-0x3ad]&&_0x16beda[-0x16a9+0x12e7+0x3cb]===_0x5dac8b[0xc14+-0x4c*0x7f+0x19a9]&&_0x16beda[0x16aa+-0x6e9+-0xfb7]===_0x5dac8b[0x1f3*-0x1+0x2521+-0x2324]&&_0x16beda[0x1929+-0x1*-0xc2+-0x1*0x19e0]===_0x5dac8b[-0x9*0x1f2+-0x19a+0x1327]&&_0x16beda[-0x1f3+-0xa31+0xc30]===_0x5dac8b[0xe93+-0xe07+-0x40*0x2]&&_0x16beda[0xd61+0x1c2a+-0x297e]===_0x5dac8b[0x4d3+-0x1e16+0x1950]&&_0x16beda[-0x2493+0xda*0x11+-0x35*-0x6b]===_0x5dac8b[0x1*-0x993+-0x321+0xcc2]&&_0x16beda[0x20a2+-0x22a7+0x10a*0x2]===_0x5dac8b[-0x1*-0x1fc5+0xb5*0x35+-0x59*0xc7];}['isIdentity'](){const _0x5ca59e=this['data'];return _0x5ca59e[0x1fa*-0x1+-0x2466+0x2660]===0xac*-0x1+0x1*0x1025+0x21*-0x78&&_0x5ca59e[-0x2646+0xda7+0x4*0x628]===0x15c4+-0x178*-0x13+-0x44*0xbb&&_0x5ca59e[0x1f1d+-0x2691+0x776]===0x64b*-0x3+0x33*-0x6f+0x6a*0x63&&_0x5ca59e[-0x1d1d+0xee*0x23+-0x36a]===0x12e8+-0x502*-0x5+-0x2bf2&&_0x5ca59e[0x163+-0x14ed+0x1*0x138e]===-0x2*0x7bb+-0x3b5+0x132b&&_0x5ca59e[-0x14ae+0x1344+0x16f]===0x7*-0xb2+-0x23f4+0x7*0x5d5&&_0x5ca59e[0xb7*-0xd+-0x213b+-0xe*-0x30a]===-0x1da*0x7+0x33b*-0x7+0x515*0x7&&_0x5ca59e[-0x4*0x511+0x595*-0x4+-0x1*-0x2a9f]===-0x1d6f+-0x3*-0x9c3+0x26&&_0x5ca59e[0x2033+-0x43e+-0x1bed]===-0x11f4+-0x8f*0x2+0x1312&&_0x5ca59e[-0x1*0x1ce1+0xd0+-0x21*-0xda]===-0x1f9c+-0x203a+0x1*0x3fd6&&_0x5ca59e[-0x1e1c+-0xa*0x3b9+0x86c*0x8]===-0xa2a+-0x1*0xe87+-0x1d*-0xda&&_0x5ca59e[-0x2701+-0x1a01*-0x1+0xd0b]===-0x209*0x11+0x8d*-0x1d+-0x1949*-0x2&&_0x5ca59e[-0x4*0x745+-0x1*-0xc47+0x10d9]===0xd*-0xf1+-0xab2+0x16ef&&_0x5ca59e[-0xd3+0x60e+-0x52e]===-0x23d1*0x1+-0x2600+-0x49d1*-0x1&&_0x5ca59e[-0xf8b+0x4*0x373+0x1cd]===-0x7*-0x3f1+0x1c62+-0xa1*0x59&&_0x5ca59e[0x1*-0x2057+-0x38c+0x23f2]===-0x1dfc+0x2236+-0x1*0x439;}['mul2'](_0xcb8229,_0x1b3a6e){const _0x2595dc=_0xcb8229['data'],_0x41b0d9=_0x1b3a6e['data'],_0x51012d=this['data'],_0x51c92a=_0x2595dc[-0x4c4+-0x8d3*-0x2+-0xce2],_0x20a1a1=_0x2595dc[-0x13ce+-0x155*-0x3+0xfd0],_0x204ef2=_0x2595dc[-0x16b3+0x1*0xba1+0xb14],_0x4826f6=_0x2595dc[-0x12a8+-0x8*-0x3fb+-0xd2d],_0x3c70dd=_0x2595dc[-0xd48+0x9d*-0x25+0x23fd],_0x32b3d2=_0x2595dc[0x2*-0x26b+0x1e52+-0x87d*0x3],_0x30787c=_0x2595dc[0x1b*-0x16e+0xad*0x29+0xaeb],_0x7fe08=_0x2595dc[0x72c*-0x4+-0x39a*0x1+0x1*0x2051],_0x10a445=_0x2595dc[-0x223*0x2+0x3*0x8d8+-0x163a],_0x481a3e=_0x2595dc[0xba2+0x54*-0x6a+0x172f],_0x2f1f70=_0x2595dc[-0x1*-0x143f+0x1*-0x401+0xf4*-0x11],_0x367e7c=_0x2595dc[-0x5*-0x9d+-0x233f+-0x1*-0x2039],_0x1c53cc=_0x2595dc[0x2*0xd36+-0x26*-0x74+-0x2*0x15cc],_0x708b99=_0x2595dc[0x858+0x13f3+-0x1c3e],_0x19adbc=_0x2595dc[0xd46*0x1+-0x22f8*0x1+-0xe8*-0x18],_0x5566cc=_0x2595dc[0x63d*-0x5+0x1d61+0x1df];let _0x1dadcc,_0x1dd3d7,_0x31a5d0,_0x5534c5;return _0x1dadcc=_0x41b0d9[-0xcca+-0x2586+0x1cc*0x1c],_0x1dd3d7=_0x41b0d9[-0x1218+-0x1*-0x1042+0x1d7],_0x31a5d0=_0x41b0d9[0x1*-0x8c9+0xc0+-0x1d*-0x47],_0x5534c5=_0x41b0d9[0x1908+-0x1d*0x125+-0x20b*-0x4],_0x51012d[0x21e1+-0xdaa*0x2+0x68d*-0x1]=_0x51c92a*_0x1dadcc+_0x3c70dd*_0x1dd3d7+_0x10a445*_0x31a5d0+_0x1c53cc*_0x5534c5,_0x51012d[0xba6+0x26c8+-0x326d]=_0x20a1a1*_0x1dadcc+_0x32b3d2*_0x1dd3d7+_0x481a3e*_0x31a5d0+_0x708b99*_0x5534c5,_0x51012d[0x14bb+0x21df+-0x1*0x3698]=_0x204ef2*_0x1dadcc+_0x30787c*_0x1dd3d7+_0x2f1f70*_0x31a5d0+_0x19adbc*_0x5534c5,_0x51012d[0x8f2*-0x1+-0x1443+0x6e*0x44]=_0x4826f6*_0x1dadcc+_0x7fe08*_0x1dd3d7+_0x367e7c*_0x31a5d0+_0x5566cc*_0x5534c5,_0x1dadcc=_0x41b0d9[-0x1d76+-0x121d+-0x2f97*-0x1],_0x1dd3d7=_0x41b0d9[0x21dd+0x6ea*-0x5+0xba],_0x31a5d0=_0x41b0d9[0x1927*0x1+0x1e9+-0x2*0xd85],_0x5534c5=_0x41b0d9[0x1d5e+-0x1f38+0x1e1],_0x51012d[-0xcbf+-0x1c54+0x9d*0x43]=_0x51c92a*_0x1dadcc+_0x3c70dd*_0x1dd3d7+_0x10a445*_0x31a5d0+_0x1c53cc*_0x5534c5,_0x51012d[0x1f2d*-0x1+0x56*-0x40+-0x2c6*-0x13]=_0x20a1a1*_0x1dadcc+_0x32b3d2*_0x1dd3d7+_0x481a3e*_0x31a5d0+_0x708b99*_0x5534c5,_0x51012d[-0x1f1*0x3+0x19f2+-0x1419]=_0x204ef2*_0x1dadcc+_0x30787c*_0x1dd3d7+_0x2f1f70*_0x31a5d0+_0x19adbc*_0x5534c5,_0x51012d[-0x2471+-0x19*-0x65+0x1*0x1a9b]=_0x4826f6*_0x1dadcc+_0x7fe08*_0x1dd3d7+_0x367e7c*_0x31a5d0+_0x5566cc*_0x5534c5,_0x1dadcc=_0x41b0d9[0x1*0xbe1+0x3af*0x3+-0x16e6],_0x1dd3d7=_0x41b0d9[0x4f*0x63+-0x1*-0x424+0x455*-0x8],_0x31a5d0=_0x41b0d9[0x125*-0x7+0x2*0x517+-0x221],_0x5534c5=_0x41b0d9[0x36d+0x5*-0x557+-0x1*-0x1751],_0x51012d[0x1b8d+-0x89*-0x3+-0x1d20]=_0x51c92a*_0x1dadcc+_0x3c70dd*_0x1dd3d7+_0x10a445*_0x31a5d0+_0x1c53cc*_0x5534c5,_0x51012d[0x1794+0x21dc+0x1*-0x3967]=_0x20a1a1*_0x1dadcc+_0x32b3d2*_0x1dd3d7+_0x481a3e*_0x31a5d0+_0x708b99*_0x5534c5,_0x51012d[-0x1528+-0x17a9+0x1*0x2cdb]=_0x204ef2*_0x1dadcc+_0x30787c*_0x1dd3d7+_0x2f1f70*_0x31a5d0+_0x19adbc*_0x5534c5,_0x51012d[-0x1709+0x1e7a+-0x3b3*0x2]=_0x4826f6*_0x1dadcc+_0x7fe08*_0x1dd3d7+_0x367e7c*_0x31a5d0+_0x5566cc*_0x5534c5,_0x1dadcc=_0x41b0d9[-0x1ad1+-0x2470+0x3f4d],_0x1dd3d7=_0x41b0d9[0x2*-0x1109+-0x20c1+0xd60*0x5],_0x31a5d0=_0x41b0d9[0xa0*-0x20+-0x19e2+0x78*0x62],_0x5534c5=_0x41b0d9[0xd3d+-0x18a5*0x1+0xb77],_0x51012d[0x1590+-0x2d5+0x12af*-0x1]=_0x51c92a*_0x1dadcc+_0x3c70dd*_0x1dd3d7+_0x10a445*_0x31a5d0+_0x1c53cc*_0x5534c5,_0x51012d[-0x238a+0x1*-0xcd0+-0x3067*-0x1]=_0x20a1a1*_0x1dadcc+_0x32b3d2*_0x1dd3d7+_0x481a3e*_0x31a5d0+_0x708b99*_0x5534c5,_0x51012d[-0x61*-0x57+0x18ea+-0x39d3]=_0x204ef2*_0x1dadcc+_0x30787c*_0x1dd3d7+_0x2f1f70*_0x31a5d0+_0x19adbc*_0x5534c5,_0x51012d[-0x51b*-0x1+-0x1579+0x106d]=_0x4826f6*_0x1dadcc+_0x7fe08*_0x1dd3d7+_0x367e7c*_0x31a5d0+_0x5566cc*_0x5534c5,this;}['mulAffine2'](_0x48ce25,_0xe8635d){const _0x564ecd=_0x48ce25['data'],_0x24a061=_0xe8635d['data'],_0x57ae31=this['data'],_0x5efc4e=_0x564ecd[0x10*-0x265+-0x1386+0x39d6],_0xe5db16=_0x564ecd[0x4*0x916+-0x44*-0x2c+0x5*-0x99b],_0x8eb755=_0x564ecd[0x1*-0x1fe1+0x992+-0x1651*-0x1],_0x75eb2d=_0x564ecd[-0x1122*0x1+-0x17*-0x15b+0x3f*-0x39],_0x100427=_0x564ecd[-0x1*0x72b+0x2*0x11ec+-0x83*0x38],_0x329651=_0x564ecd[0x1af*-0x11+0x994+-0x3*-0x65b],_0x1e5a59=_0x564ecd[0xf66*0x1+0x1e62*0x1+-0xc0*0x3d],_0x34600f=_0x564ecd[-0x2187+-0x711+0x28a1],_0x55499b=_0x564ecd[-0x544+0x210+0xa*0x53],_0x3f9098=_0x564ecd[0xc5*-0x17+-0x7ad+0x196c],_0xf62b14=_0x564ecd[0x9*-0x3e5+0x71f+0x1bfb],_0x5c707f=_0x564ecd[-0x3*-0x7dc+-0xc4d+-0xb39];let _0x481741,_0x3282bc,_0x1a18da;return _0x481741=_0x24a061[-0x8*-0x20b+0x2519+-0x3571],_0x3282bc=_0x24a061[-0x37e*0x8+0x1f04+-0x313],_0x1a18da=_0x24a061[0x9d*0x3f+0x1dad+-0x2*0x2227],_0x57ae31[0x50*0x5b+0x10ee+-0x16af*0x2]=_0x5efc4e*_0x481741+_0x75eb2d*_0x3282bc+_0x1e5a59*_0x1a18da,_0x57ae31[0xe*0x287+-0xa*0x2d7+-0x1*0x6fb]=_0xe5db16*_0x481741+_0x100427*_0x3282bc+_0x34600f*_0x1a18da,_0x57ae31[-0x1*0x10b0+-0x92f+0x19e1]=_0x8eb755*_0x481741+_0x329651*_0x3282bc+_0x55499b*_0x1a18da,_0x57ae31[0x183a+-0xd4f*0x2+-0x267*-0x1]=-0x21cc+-0x45c*0x1+0x2c*0xde,_0x481741=_0x24a061[0x1c*-0x16+-0x1271*0x2+0x274e],_0x3282bc=_0x24a061[0x1*-0x9b9+-0x325*-0x3+0x4f*0x1],_0x1a18da=_0x24a061[0x8*0x20d+0xfc0+-0x2022],_0x57ae31[-0x2*-0x1c9+-0xe7a+-0xc*-0xe9]=_0x5efc4e*_0x481741+_0x75eb2d*_0x3282bc+_0x1e5a59*_0x1a18da,_0x57ae31[0x1cf*-0x1+0x279+-0xa5]=_0xe5db16*_0x481741+_0x100427*_0x3282bc+_0x34600f*_0x1a18da,_0x57ae31[-0xdfd+-0x3d*0x44+-0x7*-0x451]=_0x8eb755*_0x481741+_0x329651*_0x3282bc+_0x55499b*_0x1a18da,_0x57ae31[-0x1ef2+0x1be6*-0x1+-0x7*-0x869]=-0x199a+0x122b*-0x1+0x2bc5,_0x481741=_0x24a061[-0x1bad+0x18bf+0x2f6],_0x3282bc=_0x24a061[0x1d6d*-0x1+-0x1*-0x1684+0x1*0x6f2],_0x1a18da=_0x24a061[-0x72*-0xc+0x2*-0x566+-0x2*-0x2bf],_0x57ae31[-0x8d0+0xcef+-0x3*0x15d]=_0x5efc4e*_0x481741+_0x75eb2d*_0x3282bc+_0x1e5a59*_0x1a18da,_0x57ae31[-0x2600+-0x5*-0x663+0x30d*0x2]=_0xe5db16*_0x481741+_0x100427*_0x3282bc+_0x34600f*_0x1a18da,_0x57ae31[-0x1083+0xd17+0x376*0x1]=_0x8eb755*_0x481741+_0x329651*_0x3282bc+_0x55499b*_0x1a18da,_0x57ae31[-0x2327+0x10ef+0x1243]=0x1*0x26d2+0x2*0xcff+-0x40d0,_0x481741=_0x24a061[0x7f*0x36+0x504+-0x1fc2],_0x3282bc=_0x24a061[0x2552+0x2358+-0x489d],_0x1a18da=_0x24a061[0xe*0x24b+0x3*-0xb96+-0x2*-0x15b],_0x57ae31[0xc8d+0x1ca4*0x1+-0x3*0xdb7]=_0x5efc4e*_0x481741+_0x75eb2d*_0x3282bc+_0x1e5a59*_0x1a18da+_0x3f9098,_0x57ae31[-0x18b9+0xd3d+0xb89]=_0xe5db16*_0x481741+_0x100427*_0x3282bc+_0x34600f*_0x1a18da+_0xf62b14,_0x57ae31[-0x1*0x1e67+-0x1*0x17e+0x1ff3]=_0x8eb755*_0x481741+_0x329651*_0x3282bc+_0x55499b*_0x1a18da+_0x5c707f,_0x57ae31[-0x10cb+-0x113f+0x2219]=-0x7*-0x3b+0x800+0xc*-0xcd,this;}['mul'](_0x43633b){return this['mul2'](this,_0x43633b);}['transformP'+'oint'](_0x28f120,_0xc3397a=new I()){const _0x12f752=this['data'],{x:_0x161d2f,y:_0x37cb52,z:_0x25ec08}=_0x28f120;return _0xc3397a['x']=_0x161d2f*_0x12f752[0x3*-0x2d3+0x25f*0x9+-0x2*0x66f]+_0x37cb52*_0x12f752[-0xbf4+-0x2584+0xc5f*0x4]+_0x25ec08*_0x12f752[0x367+-0x2045+0x19b*0x12]+_0x12f752[0x170+-0x476*0x4+0x1074],_0xc3397a['y']=_0x161d2f*_0x12f752[-0x5d5+0x37e+-0xc8*-0x3]+_0x37cb52*_0x12f752[-0x1924+-0x16+0x1*0x193f]+_0x25ec08*_0x12f752[-0xabc*-0x2+0x590+-0x1aff*0x1]+_0x12f752[0x14bd*-0x1+-0xf8b+-0x2455*-0x1],_0xc3397a['z']=_0x161d2f*_0x12f752[0x259b+-0x1625*-0x1+0x1ddf*-0x2]+_0x37cb52*_0x12f752[0x628+-0x8c5*0x1+0x9*0x4b]+_0x25ec08*_0x12f752[-0x13*-0x1f+-0x1956+0x1713]+_0x12f752[-0x5*0x793+0xe9d+-0x2*-0xba8],_0xc3397a;}['transformV'+'ector'](_0x5220ef,_0x3d5f0c=new I()){const _0x300414=this['data'],{x:_0x414e12,y:_0x2cbdd8,z:_0x28e385}=_0x5220ef;return _0x3d5f0c['x']=_0x414e12*_0x300414[0x2114+0x1edc+0x5d*-0xb0]+_0x2cbdd8*_0x300414[-0x5bb*-0x4+-0x1166+0x582*-0x1]+_0x28e385*_0x300414[-0x2*0x8f3+-0x5*0x4e3+0x2a5d],_0x3d5f0c['y']=_0x414e12*_0x300414[-0x1dd0+-0xc41+0x2a12]+_0x2cbdd8*_0x300414[-0x1d88+0x2542+-0x7b5]+_0x28e385*_0x300414[0x1578+0x1*-0x25e7+0x1078],_0x3d5f0c['z']=_0x414e12*_0x300414[0x1206+0x53b*-0x3+-0x253]+_0x2cbdd8*_0x300414[-0x1381+0x1b36+0x7af*-0x1]+_0x28e385*_0x300414[-0x2585*-0x1+-0x2473+-0x18*0xb],_0x3d5f0c;}['transformV'+'ec4'](_0xd29980,_0x1a8efc=new ae()){const _0x2bc687=this['data'],{x:_0x38c37c,y:_0x2878a8,z:_0x561ff1,w:_0x4563bf}=_0xd29980;return _0x1a8efc['x']=_0x38c37c*_0x2bc687[0x1cf6+-0x5b*0x51+0x2b*-0x1]+_0x2878a8*_0x2bc687[-0x5*-0x733+0x552+-0x294d]+_0x561ff1*_0x2bc687[0x50b+0x2*-0x1b8+-0x193]+_0x4563bf*_0x2bc687[-0x1*-0x1697+-0x15a1*-0x1+-0x2c2c],_0x1a8efc['y']=_0x38c37c*_0x2bc687[0x1763*0x1+0x53*0x1c+0x1e*-0x115]+_0x2878a8*_0x2bc687[-0x21*0x10b+-0x10d9+0x3349]+_0x561ff1*_0x2bc687[0xf0d+0x897*0x3+-0x28c9]+_0x4563bf*_0x2bc687[0x1e69+-0xe95*-0x2+-0x2*0x1dc3],_0x1a8efc['z']=_0x38c37c*_0x2bc687[0x2533+0x1*-0x163d+-0xef4]+_0x2878a8*_0x2bc687[-0x4f7*-0x5+-0x1879*-0x1+-0x3146]+_0x561ff1*_0x2bc687[-0x73f+0x5ff+0x14a]+_0x4563bf*_0x2bc687[0x5*0x3b7+0x1dd0+-0x1*0x3055],_0x1a8efc['w']=_0x38c37c*_0x2bc687[0x1d*-0x25+-0x20a8+-0x937*-0x4]+_0x2878a8*_0x2bc687[-0xec9+0x9d7*-0x1+-0x18a7*-0x1]+_0x561ff1*_0x2bc687[0x18d2+-0x2325+-0x52f*-0x2]+_0x4563bf*_0x2bc687[0x2*0x11a9+-0x20d5+-0x2*0x137],_0x1a8efc;}['setLookAt'](_0x2e93fc,_0x16650d,_0x4ae3fa){Ws['sub2'](_0x2e93fc,_0x16650d)['normalize'](),Hs['copy'](_0x4ae3fa)['normalize'](),As['cross'](Hs,Ws)['normalize'](),Hs['cross'](Ws,As);const _0x5706f0=this['data'];return _0x5706f0[0xe04+-0x3*0x76a+0x83a]=As['x'],_0x5706f0[-0x28*-0x62+0x2317+-0x3266]=As['y'],_0x5706f0[-0x1*-0xa5f+0x1*-0x387+-0x6d6]=As['z'],_0x5706f0[-0x229+-0x63f+0x86b]=-0x2580+-0x209a+0x461a,_0x5706f0[-0x1ba+-0x1553*-0x1+-0x1395]=Hs['x'],_0x5706f0[-0x207b+0x7*-0x6f+0x2389*0x1]=Hs['y'],_0x5706f0[0x1c6e*0x1+0x1b05+0x7eb*-0x7]=Hs['z'],_0x5706f0[-0x1*-0x1ccd+-0x67*0x5f+0x29*0x3b]=-0x2705+0x6*0x1f8+0x1b35,_0x5706f0[-0xfa2+-0xa31+0x19db]=Ws['x'],_0x5706f0[0x2388+0x20+0x33d*-0xb]=Ws['y'],_0x5706f0[0x14a*-0x7+0x1c45+-0x1335]=Ws['z'],_0x5706f0[-0x1529+-0x2*-0x3d1+0x2*0x6c9]=0x10*-0xd+-0x1*0x19db+0x1aab,_0x5706f0[-0x4*-0x94f+-0xc9e+-0x1892]=_0x2e93fc['x'],_0x5706f0[-0x15cb*-0x1+-0x2fc*-0x7+-0x6*0x71b]=_0x2e93fc['y'],_0x5706f0[0x1*0x151a+0x3f5*-0x3+-0x92d*0x1]=_0x2e93fc['z'],_0x5706f0[-0xac*-0xc+0x1*0x208d+0x166*-0x1d]=-0x3*0xc13+-0x13*0x53+0x1*0x2a63,this;}['setFrustum'](_0x212aa0,_0x142356,_0x145d1c,_0x122c9b,_0x2cfafd,_0x17f7ee){const _0x23ae55=(0x16a4+0xa1a+-0x20bc*0x1)*_0x2cfafd,_0x5b2653=_0x142356-_0x212aa0,_0x1a8729=_0x122c9b-_0x145d1c,_0x22a2e4=_0x17f7ee-_0x2cfafd,_0x20788f=this['data'];return _0x20788f[0x4*0x19f+0x95e*0x1+0x7ed*-0x2]=_0x23ae55/_0x5b2653,_0x20788f[0x86*0x1e+0x1*0x457+0x140a*-0x1]=0x1a13+0xc+-0x2e7*0x9,_0x20788f[-0x2684+0x1d0a+0x97c]=0x1110+-0x1ead*0x1+0xd9d,_0x20788f[0x101e*-0x2+-0xaf4+0x2b33]=-0x2*0xb11+0x61f+0x1003,_0x20788f[-0x1776+0xd1b+-0x1*-0xa5f]=-0x8dd+-0x68c+0xf69,_0x20788f[-0x70+0x17*0x1f+-0x4*0x95]=_0x23ae55/_0x1a8729,_0x20788f[0x1*0xc61+0x251c+-0x3177]=-0x15*0x1+0x2*-0xbc3+0x179b,_0x20788f[-0x48*0x2a+0xdfe+0x227*-0x1]=-0x14*-0x5f+0x26*0xf1+0x1599*-0x2,_0x20788f[0x3b*-0x71+-0x1*0x12f7+0x2d0a]=(_0x142356+_0x212aa0)/_0x5b2653,_0x20788f[0x22e2+-0x1*-0x197f+-0x3c58]=(_0x122c9b+_0x145d1c)/_0x1a8729,_0x20788f[-0xa*0x365+-0x1*-0xa61+-0x179b*-0x1]=(-_0x17f7ee-_0x2cfafd)/_0x22a2e4,_0x20788f[0x3*0x34b+-0x3d*0x34+-0x1*-0x28e]=-(-0x1753+0x11*0x1bd+-0xb1*0x9),_0x20788f[-0x1388+-0x1491+-0x2b*-0xef]=-0xa*0x32+0x1490+-0x129c,_0x20788f[0x176d+-0x2e*0x6b+-0x426]=0x4f8+0x1ba8+-0x20a0,_0x20788f[0x26b*-0xa+-0x26bf+-0x17*-0x2bd]=-_0x23ae55*_0x17f7ee/_0x22a2e4,_0x20788f[0x208f*0x1+0x1717+-0x7*0x7f1]=0x125c+0x1164+-0x23c0,this;}['setPerspec'+'tive'](_0x329dd5,_0x2653ed,_0x2c067b,_0x21f8fc,_0xfbc80d){return Ur['_getPerspe'+'ctiveHalfS'+'ize'](Un,_0x329dd5,_0x2653ed,_0x2c067b,_0xfbc80d),this['setFrustum'](-Un['x'],Un['x'],-Un['y'],Un['y'],_0x2c067b,_0x21f8fc);}['setOrtho'](_0xac3ddc,_0x5bb451,_0x49fad5,_0x452a75,_0x2729bd,_0x43f51c){const _0xf98457=this['data'];return _0xf98457[0x1520+0x30*0x24+-0x1be0]=(0x22b8*0x1+0x489+-0x273f)/(_0x5bb451-_0xac3ddc),_0xf98457[-0x22ec+-0xff7+-0x32e4*-0x1]=-0xe65+-0x713+0x1578,_0xf98457[0x10fc*0x2+-0x9af+-0x1847]=0x2a*-0x15+-0x41*-0x41+-0xd0f,_0xf98457[-0x11*0x178+0x378*0x6+0x42b]=0x58*0x2+-0xdcc+-0x1*-0xd1c,_0xf98457[-0xc10+0x270c+-0x2*0xd7c]=-0x17ce*0x1+-0x103+0x18d1,_0xf98457[-0x3d+-0x13c2+-0x1*-0x1404]=(0xc97+-0x8*0x169+-0x14d)/(_0x452a75-_0x49fad5),_0xf98457[0x1107+-0x5e2+-0x3b5*0x3]=-0x86d+0x10e+0x75f,_0xf98457[0x1*0xaa9+0x25b8+0x80f*-0x6]=-0x417*0x4+0x1d9+0xe83,_0xf98457[-0x3*0x403+-0x141*0xf+0x1ee0]=-0xa3*0xb+0x22cf+0x2*-0xde7,_0xf98457[-0x96a+0x589*0x1+0x3ea]=-0x2104*0x1+-0x2550+-0x1c*-0x283,_0xf98457[-0xaf7+-0x1028+-0x1b29*-0x1]=-(-0x426+-0x23bf+0x27e7)/(_0x43f51c-_0x2729bd),_0xf98457[0x16a*0x11+0x1e1+-0x19e0]=-0x1e45+-0x1971+0x2*0x1bdb,_0xf98457[-0x1*0x1484+0x18c5+-0x435]=-(_0x5bb451+_0xac3ddc)/(_0x5bb451-_0xac3ddc),_0xf98457[-0x603*0x6+-0xf*-0x147+-0x14e*-0xd]=-(_0x452a75+_0x49fad5)/(_0x452a75-_0x49fad5),_0xf98457[-0x1*-0x1431+0xdfd+0x222*-0x10]=-(_0x43f51c+_0x2729bd)/(_0x43f51c-_0x2729bd),_0xf98457[-0x240e+-0x1a11+0x3e2e]=0x24b2+0x22*-0x1c+-0x17*0x16f,this;}['setFromAxi'+'sAngle'](_0x19e5ef,_0x58818e){_0x58818e*=Y['DEG_TO_RAD'];const {x:_0x2d5b21,y:_0x2c49d6,z:_0x14ba12}=_0x19e5ef,_0x300dae=Math['cos'](_0x58818e),_0x722dbc=Math['sin'](_0x58818e),_0x5142b5=-0x13*-0xe4+-0x14f*-0x15+-0x2*0x1633-_0x300dae,_0x288586=_0x5142b5*_0x2d5b21,_0xbb0a57=_0x5142b5*_0x2c49d6,_0x2de63d=this['data'];return _0x2de63d[-0xd8d+0x629+0x2*0x3b2]=_0x288586*_0x2d5b21+_0x300dae,_0x2de63d[0xe23+0x1cf*0x5+-0x172d]=_0x288586*_0x2c49d6+_0x722dbc*_0x14ba12,_0x2de63d[0x171c+0x21dd+-0x38f7]=_0x288586*_0x14ba12-_0x722dbc*_0x2c49d6,_0x2de63d[-0x1*0x1943+0x26e9+-0xda3]=-0xd33+-0x1e65+0x2b98,_0x2de63d[0x166+0x68*0x47+-0x1e3a]=_0x288586*_0x2c49d6-_0x722dbc*_0x14ba12,_0x2de63d[0x1503+-0xca0+0x77*-0x12]=_0xbb0a57*_0x2c49d6+_0x300dae,_0x2de63d[0x22e1+-0xf22*0x2+0x1*-0x497]=_0xbb0a57*_0x14ba12+_0x722dbc*_0x2d5b21,_0x2de63d[0x67f+-0xd12+0x69a]=-0x18a*-0x17+-0x582*-0x3+-0x33ec,_0x2de63d[0xdb0+0x1*0x36d+0x1*-0x1115]=_0x288586*_0x14ba12+_0x722dbc*_0x2c49d6,_0x2de63d[-0x245+0x3*-0x9a9+0x1f49*0x1]=_0xbb0a57*_0x14ba12-_0x2d5b21*_0x722dbc,_0x2de63d[-0x1ea1+-0x1*0x189b+0x3746]=_0x5142b5*_0x14ba12*_0x14ba12+_0x300dae,_0x2de63d[0x19c*-0xb+-0x23a9+0x3568]=-0x22*0x86+-0x1121*0x1+0x22ed,_0x2de63d[0x130d*0x2+0x135*-0x13+-0xf1f]=0xfe9*0x1+-0x4fe+-0x5*0x22f,_0x2de63d[0x332*0x1+0x15c4+-0x1*0x18e9]=-0x874+-0x80d*0x1+-0x1081*-0x1,_0x2de63d[-0x664*0x6+0x9b+-0x2d*-0xd7]=0x5d9+-0xe*-0x194+-0x1bf1*0x1,_0x2de63d[-0xd0*0x2+0x8e*0x3+0x5]=-0x4b3*-0x6+-0x3*-0x560+-0x2c51,this;}['setTransla'+'te'](_0x1d3879,_0x3fc013,_0x4b05f1){const _0x4f4d51=this['data'];return _0x4f4d51[0x1a09+0x23cd+-0xa*0x62f]=-0x1*-0xa93+0xccc+-0x2*0xbaf,_0x4f4d51[-0x1a96+-0x33+0x1aca]=0x1b*-0x139+-0x3a3*0x7+0x74f*0x8,_0x4f4d51[0x1589+0x10a5+0x2ba*-0xe]=0x1442+-0x465+-0x1f*0x83,_0x4f4d51[0x17*0x1+-0x14d5+-0x14c1*-0x1]=0x114c+-0x4*-0x161+-0x16d0,_0x4f4d51[0x13c*-0x5+-0x140+0x770]=-0x2603+0x2*-0x12cd+-0xd*-0x5d1,_0x4f4d51[-0x31*-0x4+0x6a*-0x6+0x1bd]=0x217*0x1+0x1ba3+-0x1db9,_0x4f4d51[0x16e2+0x525+0x1*-0x1c01]=0x5*-0x60d+0xe*-0x94+0x2659,_0x4f4d51[-0x7f4+0x12fe+-0xb03]=0xd33+0x11*0x41+-0x1184,_0x4f4d51[-0x1b80+0x23a3+-0x53*0x19]=0x5b1+0xfef*0x1+-0x8*0x2b4,_0x4f4d51[0x2*-0xe4d+-0x7cb+0x246e]=-0x2400+0x1b66+0x89a,_0x4f4d51[0x1e3e*0x1+0x1bf3+-0x3a27]=-0x6f8+-0x198d+0x17*0x16a,_0x4f4d51[0x4*0x67e+0x14b1+0x66*-0x75]=0x3*-0x853+-0x1957+0x3250,_0x4f4d51[0xed*0x7+-0x2257+0x1be8]=_0x1d3879,_0x4f4d51[-0x69f+0x11f3+0xb47*-0x1]=_0x3fc013,_0x4f4d51[0x13*-0x18d+-0x461+0x21e6]=_0x4b05f1,_0x4f4d51[0xde9+-0xb3*0x7+-0x8f5]=0x1a3*-0xf+-0x166a+0x2ef8,this;}['setScale'](_0x5ccbb7,_0x47e135,_0x1de71f){const _0x4fe034=this['data'];return _0x4fe034[-0x54*-0x44+0x12ea+0x293a*-0x1]=_0x5ccbb7,_0x4fe034[-0x1*0x1042+-0x14*0x191+-0x3*-0xfdd]=-0x1199+-0x2*0xaa9+0xcf9*0x3,_0x4fe034[0x2d*-0xb9+0x1ca+0x1ebd]=-0x2058+-0x1a0b+0x3a63,_0x4fe034[0x1e0d+-0x189b*0x1+-0x56f]=-0x15df+0x226f+0x4*-0x324,_0x4fe034[-0x134c+0x59d*-0x1+0x18ed]=-0xccf+0x8be+-0x3*-0x15b,_0x4fe034[0x6c*-0x13+-0xcd*0x17+0x4*0x69d]=_0x47e135,_0x4fe034[-0x190a+-0x346*0xb+0x3d12*0x1]=-0x233d+-0xb36+0x205*0x17,_0x4fe034[-0x1b95*-0x1+-0x2*-0xde7+-0x375c]=-0x21fd+-0xb*0x17d+0x1*0x325c,_0x4fe034[-0x853+0x209*-0x2+0xc6d*0x1]=0x376+-0xd2b*-0x1+-0x10a1,_0x4fe034[-0x20dd+0x1b10+0xa6*0x9]=-0x1*0x20e7+0x1*-0xc8e+0x2d75,_0x4fe034[-0xae0+0x325*0x5+0x1*-0x4cf]=_0x1de71f,_0x4fe034[0x2554*0x1+-0x2f0+-0x2259]=0x9ff+-0x1*-0xdb7+-0x17b6,_0x4fe034[-0x12b4+-0x3c*0xf+0x1644*0x1]=0x1376+0x4a1+-0x1817,_0x4fe034[0x21ae+0x402+-0x25a3]=-0x31c+0x471*-0x1+0x78d,_0x4fe034[-0x1632+0x25df+-0x1f*0x81]=-0x11*-0x10b+0x1*-0x20e7+-0xf2c*-0x1,_0x4fe034[0x7f*-0x18+-0xf4f*-0x2+-0x12a7]=-0x819*-0x1+0x1093+-0x18ab,this;}['setViewpor'+'t'](_0x55502c,_0x3ec83e,_0xd13c53,_0x205e45){const _0xafc2ea=this['data'];return _0xafc2ea[0x1b2f+0x589+-0x4*0x82e]=_0xd13c53*(0x3*0x27a+-0xbce+0xa0*0x7+0.5),_0xafc2ea[0x141f+0xff2+-0x241*0x10]=0x1027+-0x1396+-0x36f*-0x1,_0xafc2ea[-0x631*0x1+0x116c+-0x11*0xa9]=0x14c5+0x1*-0x22eb+-0x713*-0x2,_0xafc2ea[0x1b9f*0x1+0x11c2+-0x2d5e]=0xedc+-0x1148*0x2+0x13b4,_0xafc2ea[0x1*-0x1f1f+0x15c1*0x1+0x2*0x4b1]=0x2*-0x981+0x7*0x2a0+0xa2,_0xafc2ea[0x1bfb+-0x2549*0x1+0x953]=_0x205e45*(0x76c+-0x17cd+0x1061*0x1+0.5),_0xafc2ea[0x183e+-0x35*0x47+-0x1*0x985]=0x952+0x1f49+-0x63*0x69,_0xafc2ea[0x1*-0x21bd+0x6e*-0xa+0x2610]=0x1e58+0x566*0x1+0x5f5*-0x6,_0xafc2ea[0xc13*-0x1+0x19b1*-0x1+0x25cc]=0x1f1a+-0x1*-0x221f+0x1*-0x4139,_0xafc2ea[-0x15ff+-0x18a7*-0x1+0xb*-0x3d]=-0x1656+-0x3b*0xa+-0x14c*-0x13,_0xafc2ea[-0x175*-0xb+0x1*0x24ca+0x34c7*-0x1]=-0x1*0x98c+-0x1c0c+0x2598+0.5,_0xafc2ea[0x1ab*0xd+0x1*0x100b+-0xb*0x36d]=0x22d3+-0x60e+0x997*-0x3,_0xafc2ea[0x17bd+-0x1*-0xeb7+-0x2668]=_0x55502c+_0xd13c53*(-0x983+-0xc76+0x15f9+0.5),_0xafc2ea[-0x139*-0x17+-0x6a9*-0x2+-0x373*0xc]=_0x3ec83e+_0x205e45*(0x17b5+-0x1ed3+0x71e+0.5),_0xafc2ea[0x4fb+-0x151b+0x6d*0x26]=0x29*-0xcb+0x1*-0x6fb+0x277e+0.5,_0xafc2ea[0x11c4*-0x2+0x3d3*-0x4+-0x32e3*-0x1]=-0x1689*-0x1+0x305*-0x1+-0x2d*0x6f,this;}['setReflect'+'ion'](_0x2b2326,_0xf53d07){const _0x47a3c5=_0x2b2326['x'],_0x298389=_0x2b2326['y'],_0x2e422b=_0x2b2326['z'],_0x3e1ee8=this['data'];return _0x3e1ee8[-0xc6b+0x2105+0x12*-0x125]=0x4*0x3da+0x1*-0x242e+0x14c7-(-0x22ed+0x1*0x11b7+-0x26*-0x74)*_0x47a3c5*_0x47a3c5,_0x3e1ee8[-0x141a+-0xecc+0x22e7]=-(0x2*0x679+0x2708+0x1*-0x33f8)*_0x47a3c5*_0x298389,_0x3e1ee8[0x2*-0xf73+0x198+-0x2*-0xea8]=-(-0x157e*0x1+-0x1*0x491+0x1a11)*_0x47a3c5*_0x2e422b,_0x3e1ee8[-0xaed+0x1b4*-0x1+0xca4]=-0xf7f*0x2+-0x525*-0x5+-0x47*-0x13,_0x3e1ee8[-0x1*-0xd5+0xd*-0x223+-0x2*-0xd7b]=-(0x125d+-0x61*-0x3+-0x137e)*_0x47a3c5*_0x298389,_0x3e1ee8[0x3*0xbbf+0x50b*-0x1+-0x1*0x1e2d]=0x29c+0x1dc0+-0x205b-(-0x1*0x1a1e+0x510+0x151*0x10)*_0x298389*_0x298389,_0x3e1ee8[-0x1f78+-0x20db+0x39*0x121]=-(0x66*-0x3+-0x10b4+0x11e8)*_0x298389*_0x2e422b,_0x3e1ee8[0x1*-0x1384+-0x6b*-0x53+-0xf26]=-0x1b23*0x1+-0x900+0x1*0x2423,_0x3e1ee8[0x208b+-0x1c12+-0x471*0x1]=-(-0x3d*-0xb+-0x1460+0x11c3)*_0x47a3c5*_0x2e422b,_0x3e1ee8[-0x122e+-0x1566*-0x1+0x5*-0xa3]=-(-0x997+0xd*-0x23b+-0x34*-0xbe)*_0x298389*_0x2e422b,_0x3e1ee8[0x1c9*0xd+0x145a+0x359*-0xd]=-0xfb6*-0x1+-0x724+-0x2b*0x33-(0xc1c+0x13ce+-0x1fe8)*_0x2e422b*_0x2e422b,_0x3e1ee8[0x3*-0x1e6+-0x2424+0x29e1]=0x1*-0x2351+-0x27*0xb1+0x3e48,_0x3e1ee8[0x148a+0x1f11+-0xc5*0x43]=-(0x1cc2+-0x1fc5+0x305*0x1)*_0x47a3c5*_0xf53d07,_0x3e1ee8[-0x2422+-0x5*-0x5c3+0x760]=-(-0x1563+-0x1*-0x1feb+-0x6*0x1c1)*_0x298389*_0xf53d07,_0x3e1ee8[0x15*-0x3a+0xc+0x4c4]=-(-0x23c2+0x15*0x39+0x1f17)*_0x2e422b*_0xf53d07,_0x3e1ee8[0x49a+0x21c0+0x1*-0x264b]=-0x1b11+-0x4f*-0x13+-0x1535*-0x1,this;}['invert'](_0x3a2600=this){const _0x53ae05=_0x3a2600['data'],_0x581390=_0x53ae05[-0x1e0a+-0x26dd*0x1+0x1*0x44e7],_0x3e9893=_0x53ae05[-0x2531+0x626+-0x1*-0x1f0c],_0x2bfd30=_0x53ae05[0x233d+0x602*-0x4+-0xb33],_0x4a2c45=_0x53ae05[0x5*-0x34+-0x17fe+0x1905],_0x4f75a9=_0x53ae05[-0x192d+-0x311+0x1c42],_0x4eb035=_0x53ae05[0x26ec+-0x2128*-0x1+0x480f*-0x1],_0x504025=_0x53ae05[0x1*0x16c5+-0xb50+-0xb6f],_0x210aca=_0x53ae05[-0x30d*0x3+-0x15f4+0x1*0x1f22],_0x216bc4=_0x53ae05[-0x19c6+0x176c*0x1+0x262],_0x5026af=_0x53ae05[-0x33*0x2+0x215f+0x11*-0x1f0],_0x2b31a0=_0x53ae05[-0x3*-0x382+0x207*0x5+0x1*-0x149f],_0x250ade=_0x53ae05[0x1dcb+-0x134f+-0xa71],_0x1645e6=_0x53ae05[0xbf0+0x99b+-0x157f],_0x193ca4=_0x53ae05[-0x243d+0x4cf*-0x2+0x2de8],_0x36f6b1=_0x53ae05[0x26e2+-0x950*0x1+-0x1d84],_0xcea000=_0x53ae05[0x232*-0x1+0x7*0x4c1+-0x1f06],_0x306d10=_0x581390*_0x4eb035-_0x3e9893*_0x4f75a9,_0xae7bab=_0x581390*_0x504025-_0x2bfd30*_0x4f75a9,_0x251942=_0x581390*_0x210aca-_0x4a2c45*_0x4f75a9,_0x50c10a=_0x3e9893*_0x504025-_0x2bfd30*_0x4eb035,_0x5e7519=_0x3e9893*_0x210aca-_0x4a2c45*_0x4eb035,_0x3ca143=_0x2bfd30*_0x210aca-_0x4a2c45*_0x504025,_0x346d6d=_0x216bc4*_0x193ca4-_0x5026af*_0x1645e6,_0xcd23f0=_0x216bc4*_0x36f6b1-_0x2b31a0*_0x1645e6,_0xe6a401=_0x216bc4*_0xcea000-_0x250ade*_0x1645e6,_0x28e0c9=_0x5026af*_0x36f6b1-_0x2b31a0*_0x193ca4,_0x87d300=_0x5026af*_0xcea000-_0x250ade*_0x193ca4,_0x2ef5da=_0x2b31a0*_0xcea000-_0x250ade*_0x36f6b1,_0x22da2c=_0x306d10*_0x2ef5da-_0xae7bab*_0x87d300+_0x251942*_0x28e0c9+_0x50c10a*_0xe6a401-_0x5e7519*_0xcd23f0+_0x3ca143*_0x346d6d;if(_0x22da2c===-0x2243+0x9d1+-0x6*-0x413)this['setIdentit'+'y']();else{const _0x379e64=(0xa2*-0x18+0x139*-0xc+0x1ddd)/_0x22da2c,_0x468583=this['data'];_0x468583[-0x219e*0x1+0x53*0x37+0xfc9]=(_0x4eb035*_0x2ef5da-_0x504025*_0x87d300+_0x210aca*_0x28e0c9)*_0x379e64,_0x468583[-0x1343+0x1*0x262d+-0x12e9]=(-_0x3e9893*_0x2ef5da+_0x2bfd30*_0x87d300-_0x4a2c45*_0x28e0c9)*_0x379e64,_0x468583[-0x186f+0x2027*0x1+-0x7b6]=(_0x193ca4*_0x3ca143-_0x36f6b1*_0x5e7519+_0xcea000*_0x50c10a)*_0x379e64,_0x468583[-0xcc8+-0x407+0x10d2]=(-_0x5026af*_0x3ca143+_0x2b31a0*_0x5e7519-_0x250ade*_0x50c10a)*_0x379e64,_0x468583[0xf85*-0x2+0x1*-0x17ab+-0x1*-0x36b9]=(-_0x4f75a9*_0x2ef5da+_0x504025*_0xe6a401-_0x210aca*_0xcd23f0)*_0x379e64,_0x468583[-0x1993+0x192e+0x6a]=(_0x581390*_0x2ef5da-_0x2bfd30*_0xe6a401+_0x4a2c45*_0xcd23f0)*_0x379e64,_0x468583[0x170d+0x112c*-0x2+0xb51]=(-_0x1645e6*_0x3ca143+_0x36f6b1*_0x251942-_0xcea000*_0xae7bab)*_0x379e64,_0x468583[-0x1bbe+0x1fd+0x19c8]=(_0x216bc4*_0x3ca143-_0x2b31a0*_0x251942+_0x250ade*_0xae7bab)*_0x379e64,_0x468583[0x679+-0x1267+0xbf6]=(_0x4f75a9*_0x87d300-_0x4eb035*_0xe6a401+_0x210aca*_0x346d6d)*_0x379e64,_0x468583[0x1826+-0xa5b+-0xdc2]=(-_0x581390*_0x87d300+_0x3e9893*_0xe6a401-_0x4a2c45*_0x346d6d)*_0x379e64,_0x468583[-0x1904+-0x502*0x5+-0xe5*-0x38]=(_0x1645e6*_0x5e7519-_0x193ca4*_0x251942+_0xcea000*_0x306d10)*_0x379e64,_0x468583[-0x676+0x2394+-0x1d13]=(-_0x216bc4*_0x5e7519+_0x5026af*_0x251942-_0x250ade*_0x306d10)*_0x379e64,_0x468583[0x2*0x78e+0xbce+-0x1ade]=(-_0x4f75a9*_0x28e0c9+_0x4eb035*_0xcd23f0-_0x504025*_0x346d6d)*_0x379e64,_0x468583[-0x9*-0x1df+0xedd+-0x49*0x6f]=(_0x581390*_0x28e0c9-_0x3e9893*_0xcd23f0+_0x2bfd30*_0x346d6d)*_0x379e64,_0x468583[0x3*-0x548+0xa*0x98+0x9f6]=(-_0x1645e6*_0x50c10a+_0x193ca4*_0xae7bab-_0x36f6b1*_0x306d10)*_0x379e64,_0x468583[-0xa3*0xd+0xa36*0x1+0xc*-0x28]=(_0x216bc4*_0x50c10a-_0x5026af*_0xae7bab+_0x2b31a0*_0x306d10)*_0x379e64;}return this;}['set'](_0x257b90){const _0x5463ac=this['data'];return _0x5463ac[-0x1*0x2611+-0x2706+0x4d17]=_0x257b90[-0xcd0+-0x681+0xd7*0x17],_0x5463ac[-0x1c26*0x1+0x2273+-0x64c]=_0x257b90[-0x6*0x233+0x1423*0x1+-0x6f0],_0x5463ac[0x1*0x44b+0x24e8+-0x2931]=_0x257b90[0xc5*0x9+-0x640*0x2+0x595*0x1],_0x5463ac[-0xaff*0x3+-0x212f+0x422f*0x1]=_0x257b90[0xb9c+0x1f29+-0x1561*0x2],_0x5463ac[-0x1*-0x12af+-0x26db+-0x44*-0x4c]=_0x257b90[-0x352*0x9+0x1*0x9f5+0x13f1],_0x5463ac[0x16ed+-0x1013+0x247*-0x3]=_0x257b90[0x1dbe+0x157f*0x1+-0xb*0x4a8],_0x5463ac[-0x461+-0xf46*-0x1+-0xadf]=_0x257b90[-0x14c8+0x242+0x128c],_0x5463ac[0x1044+0x1866+0x67*-0x65]=_0x257b90[0x125a+-0x1349+-0x3*-0x52],_0x5463ac[-0x23*0x11b+-0xc7c+0x3335*0x1]=_0x257b90[-0x723+0x1*0x14dd+-0xdb2],_0x5463ac[-0x18*0x38+0x1ec6+0x4b*-0x57]=_0x257b90[-0xf2*0x10+-0x808*-0x3+-0x8ef*0x1],_0x5463ac[-0x12b8*0x1+0x1*-0xb3a+0x4c*0x65]=_0x257b90[-0x26f4+0x263e+0xc0*0x1],_0x5463ac[-0x2309*0x1+0x240a*-0x1+0x471e]=_0x257b90[0x35*-0x6d+-0x792+0x1e2e],_0x5463ac[0x12*0x31+0x6*-0xe1+0x1e0]=_0x257b90[0xb4*-0x29+0x119*0x1b+-0xc3],_0x5463ac[0x3*0xe9+-0x48d+0x1df*0x1]=_0x257b90[-0x1c92+0x16a1+0x3b*0x1a],_0x5463ac[-0x3*0x955+0x212+0x9*0x2e3]=_0x257b90[-0xc*-0x1b5+0x5*-0x175+0x1*-0xd25],_0x5463ac[0x1eca+-0x10d9+-0xde2]=_0x257b90[0x18*-0x3a+0xb32*0x2+-0x10e5],this;}['setIdentit'+'y'](){const _0x527d82=this['data'];return _0x527d82[0x16a*0x10+-0x2005*-0x1+0x36a5*-0x1]=-0x14f2*-0x1+0x26e0*0x1+-0x3bd1,_0x527d82[-0x59*-0x53+-0xfc0+-0xd1a]=-0x1a52+0x1ae3+-0x91,_0x527d82[-0x1b33+0x23f4+-0x8bf*0x1]=0x204c+-0x1388+-0x4c*0x2b,_0x527d82[-0x17*-0x117+0xad*0xd+0x21d7*-0x1]=-0x2204+0xaeb+0x1719,_0x527d82[-0xb6b+-0xbc8*-0x2+-0xc21]=0x165d+-0xb1f*-0x2+-0x13*0x259,_0x527d82[-0xd15*-0x1+0x10a*-0xb+-0x1a2]=-0x2397+0x1093+0x1305,_0x527d82[-0x1c7+-0x179*0x19+0x269e]=0x41*0x4b+0x11*0xc1+-0x1fdc,_0x527d82[-0xcc*0x1+-0x1fe1+-0x1c*-0x12b]=-0x17cc*-0x1+0xe7*0x23+0x3761*-0x1,_0x527d82[0x392+-0xd5b+0x9d1]=-0x536*0x6+0x264e+0x385*-0x2,_0x527d82[-0x1857+-0x31*-0x3+0x17cd*0x1]=0xe5f+-0x2363+0x1*0x1504,_0x527d82[-0x1*-0x107e+-0x1*0xc3+-0xfb1]=0x6d1*-0x4+-0x1*0x2399+-0x26b*-0x1a,_0x527d82[0x214b+0x926*0x1+-0x43*0xa2]=0x1eb4+0x241+-0x20f5,_0x527d82[0x18e1+0x7c*-0x10+-0x1115]=-0x72a+0x1f*0x3e+-0x16*0x4,_0x527d82[0xd54+-0x3*0x24b+-0x666]=-0x1828+-0xe97+-0x5b*-0x6d,_0x527d82[0x18c7+0x2*0xb75+0x1*-0x2fa3]=-0x15f1*-0x1+0x184*0x15+-0x35c5,_0x527d82[-0x21c9+-0x96e+0x2b46]=-0x10c*-0x1+-0x2*0xdfa+0x1*0x1ae9,this;}['setTRS'](_0x27a653,_0x455e0b,_0x4ee709){const _0x236d91=_0x455e0b['x'],_0x233a42=_0x455e0b['y'],_0x40ee37=_0x455e0b['z'],_0x35a591=_0x455e0b['w'],_0x2efeec=_0x4ee709['x'],_0x1fae0c=_0x4ee709['y'],_0x313593=_0x4ee709['z'],_0x42fc0b=_0x236d91+_0x236d91,_0x46aecd=_0x233a42+_0x233a42,_0x463dd3=_0x40ee37+_0x40ee37,_0x2d86a1=_0x236d91*_0x42fc0b,_0x54b015=_0x236d91*_0x46aecd,_0x41b421=_0x236d91*_0x463dd3,_0x4dbe4a=_0x233a42*_0x46aecd,_0x2209a4=_0x233a42*_0x463dd3,_0x303a4a=_0x40ee37*_0x463dd3,_0xb40cb9=_0x35a591*_0x42fc0b,_0xfebfd5=_0x35a591*_0x46aecd,_0x585349=_0x35a591*_0x463dd3,_0x17ad3d=this['data'];return _0x17ad3d[0x5f*0x1b+0x5*0x232+-0x433*0x5]=(-0x2b*0x6b+0x1776+-0x15f*0x4-(_0x4dbe4a+_0x303a4a))*_0x2efeec,_0x17ad3d[-0xfcc+0x1*0x1aad+-0xae0]=(_0x54b015+_0x585349)*_0x2efeec,_0x17ad3d[-0xc*0x37+-0x34a*-0x5+-0xddc]=(_0x41b421-_0xfebfd5)*_0x2efeec,_0x17ad3d[-0xd*0x137+-0x1*-0x23ad+-0x13df]=-0x1*0x1a3+0x1*-0x1db6+0xf*0x217,_0x17ad3d[0x6ed+0xbd4+0x12bd*-0x1]=(_0x54b015-_0x585349)*_0x1fae0c,_0x17ad3d[-0x8d+0x2598+-0x2506]=(0x65f*0x5+0x872*-0x4+0x1ee-(_0x2d86a1+_0x303a4a))*_0x1fae0c,_0x17ad3d[0x12b8+0xc2e+-0x4c*0x68]=(_0x2209a4+_0xb40cb9)*_0x1fae0c,_0x17ad3d[-0x214d*-0x1+0x1568+-0x91d*0x6]=-0xd43+-0x1062+-0x1*-0x1da5,_0x17ad3d[-0x776*-0x5+0x1*-0x29+0x1*-0x251d]=(_0x41b421+_0xfebfd5)*_0x313593,_0x17ad3d[-0x188b+0x2*0x769+0x9c2]=(_0x2209a4-_0xb40cb9)*_0x313593,_0x17ad3d[0x519*-0x6+-0x298*0x6+0x2e30]=(0x946*-0x4+-0x862+-0x2d7b*-0x1-(_0x2d86a1+_0x4dbe4a))*_0x313593,_0x17ad3d[-0x1ab4+-0xb97+0x132b*0x2]=-0x94*-0x38+0x14b3+-0x3513,_0x17ad3d[-0x2005+-0x886+0x2897]=_0x27a653['x'],_0x17ad3d[-0x718+0x2057+0x866*-0x3]=_0x27a653['y'],_0x17ad3d[-0x689*0x1+-0x5ec*0x4+0x1e47]=_0x27a653['z'],_0x17ad3d[0x9d6+-0x120a+0x843]=-0x4c*-0x35+0x1a7e+-0x2a39,this;}['transpose'](_0x4c9f1f=this){const _0x133610=_0x4c9f1f['data'],_0x1ccbe5=this['data'];if(_0x133610===_0x1ccbe5){let _0x1fcb1f;_0x1fcb1f=_0x133610[0x6*-0x659+-0x20cc+-0x45*-0x107],_0x1ccbe5[-0xa*-0x2ed+-0x7*-0x46+0x4f*-0x65]=_0x133610[0x23c8+-0x1d51+0x7f*-0xd],_0x1ccbe5[0x22ed+-0x12da+-0x100f]=_0x1fcb1f,_0x1fcb1f=_0x133610[0x115b*0x1+-0x22b+-0xf2e],_0x1ccbe5[0x221e+0x1c00+0x32*-0x13e]=_0x133610[-0x1cb1*0x1+-0x18f1+0x35aa],_0x1ccbe5[0x1*-0x7fb+-0x16e7+0x1eea]=_0x1fcb1f,_0x1fcb1f=_0x133610[0x64b+-0x13*0x178+0x15a0],_0x1ccbe5[0x14e8+0x2574+0x3*-0x1373]=_0x133610[-0x3*0xa21+-0x1*0x1297+0x3106],_0x1ccbe5[-0x6f9+0x1*-0x13f2+0x75*0x3b]=_0x1fcb1f,_0x1fcb1f=_0x133610[0xdfe+-0x1*-0x200b+-0x2e03],_0x1ccbe5[-0xc83*-0x3+0x114a+-0x36cd]=_0x133610[0x14f3+0x1*0x9a3+-0x1e8d],_0x1ccbe5[0x3f*0x97+-0x3*-0x8f3+-0x3*0x1553]=_0x1fcb1f,_0x1fcb1f=_0x133610[-0x126+0x5*0x737+-0x22e6],_0x1ccbe5[-0x1cab+-0x1648+0x32fa]=_0x133610[-0x2*0x5ce+-0x5*-0x12e+0x5c3],_0x1ccbe5[0xa*0x379+0x182c+-0x3ad9]=_0x1fcb1f,_0x1fcb1f=_0x133610[0x16*0x66+0x108d+-0x1946],_0x1ccbe5[-0x1*0x120b+-0xaaa+-0x1*-0x1cc0]=_0x133610[-0xc11*-0x2+-0x80b+-0x1009],_0x1ccbe5[-0x25ca+-0x21eb+0x47c3]=_0x1fcb1f;}else _0x1ccbe5[0x24a4+-0x384+-0x2120]=_0x133610[0x1b1e+0x545*-0x7+0x9c5],_0x1ccbe5[-0x5*-0x536+0x749+-0x2156]=_0x133610[0x1ef8+0x2a*-0x26+-0x18b8],_0x1ccbe5[0x328*-0x4+0x7*0x4d6+0x7*-0x308]=_0x133610[-0x1749+-0x1709+0x2e5a],_0x1ccbe5[0x10f*0x1b+-0x6a*-0xf+-0x22c8]=_0x133610[0x20fc*-0x1+-0x1a5d+0x3b65],_0x1ccbe5[0x1*-0x25ab+-0xd2+0x1*0x2681]=_0x133610[-0xe3e*-0x1+0x977*0x3+0x3*-0xe36],_0x1ccbe5[0xe*-0x2+0x108e+-0x106d]=_0x133610[-0x252b+0x4f*-0x65+0x399*0x13],_0x1ccbe5[0x16ae+-0x10d4+-0x5d4]=_0x133610[-0xa20+-0x22*-0xe3+-0x13fd],_0x1ccbe5[0x2d1*0x3+0x21f+-0x1*0xa8b]=_0x133610[0x1*-0x19e5+0x1ae0+-0xee],_0x1ccbe5[-0x1f3*-0x5+-0x15ff+-0x3*-0x418]=_0x133610[0x620+-0xaaf+0x491],_0x1ccbe5[-0x1be7+-0x170e+-0x2*-0x197f]=_0x133610[0x2a6+0xcfa+-0x7cd*0x2],_0x1ccbe5[-0x754+0x21ce*0x1+-0x1a70]=_0x133610[-0x64*0xb+0xed8+-0xa82],_0x1ccbe5[-0xa10+-0x20f2*-0x1+-0x16d7]=_0x133610[0x373+0xdb1+-0x1116],_0x1ccbe5[-0x198+0xae*-0x8+0x714]=_0x133610[-0x7f*-0x11+0x4*0x281+-0x1270],_0x1ccbe5[0x2*0x340+-0x20ed+0x1a7a]=_0x133610[0xd*0x22a+0x1*-0x2df+-0x193c],_0x1ccbe5[0x2022+-0x1bdd+-0x1*0x437]=_0x133610[-0x2079*-0x1+0x1300*-0x1+-0x3*0x47a],_0x1ccbe5[-0x1*-0xa01+0x21a9+-0x2b9b*0x1]=_0x133610[-0x1*0x26b+-0x89*0x1+-0x1*-0x303];return this;}['getTransla'+'tion'](_0x10620e=new I()){return _0x10620e['set'](this['data'][0x70c+-0x3*-0x725+-0x1c6f*0x1],this['data'][0x1deb+-0x7*0x1fd+-0xff3],this['data'][0x505*0x3+-0x2*-0xd9a+0x5*-0x871]);}['getX'](_0x320491=new I()){return _0x320491['set'](this['data'][-0x223f+0x5ed*-0x1+-0x1416*-0x2],this['data'][-0x106e+0x1d41+-0xcd2],this['data'][0x1fe4*-0x1+-0x1d59+0x1*0x3d3f]);}['getY'](_0x1f9982=new I()){return _0x1f9982['set'](this['data'][-0x111a+0xf*0xe9+0x1*0x377],this['data'][0x200e+-0x25ff+-0x6d*-0xe],this['data'][-0x103*-0x1d+-0xeee+-0xe63]);}['getZ'](_0x5e011d=new I()){return _0x5e011d['set'](this['data'][-0x9cd+-0x1725+0x12*0x1d5],this['data'][0xf39+0xc4*0xd+-0x1924],this['data'][0x1cef+0x189b*-0x1+-0x44a]);}['getScale'](_0x103bb8=new I()){return this['getX'](As),this['getY'](Hs),this['getZ'](Ws),_0x103bb8['set'](As['length'](),Hs['length'](),Ws['length']()),_0x103bb8;}get['scaleSign'](){return this['getX'](As),this['getY'](Hs),this['getZ'](Ws),As['cross'](As,Hs),As['dot'](Ws)<-0x1c9*-0xd+-0x7*0x1f7+-0x1*0x974?-(-0x22d6+0x187d*-0x1+0x3b54):0x18a7*0x1+0xf*-0x207+0x1*0x5c3;}['setFromEul'+'erAngles'](_0x14a089,_0x3f08ce,_0x5621fa){_0x14a089*=Y['DEG_TO_RAD'],_0x3f08ce*=Y['DEG_TO_RAD'],_0x5621fa*=Y['DEG_TO_RAD'];const _0x271c82=Math['sin'](-_0x14a089),_0x5903c9=Math['cos'](-_0x14a089),_0x56e902=Math['sin'](-_0x3f08ce),_0x32596d=Math['cos'](-_0x3f08ce),_0x558d00=Math['sin'](-_0x5621fa),_0x2d9ebc=Math['cos'](-_0x5621fa),_0x458080=this['data'];return _0x458080[0x3fb*0x1+0x2*0x5d1+-0x23b*0x7]=_0x32596d*_0x2d9ebc,_0x458080[-0x166e+0x3*-0xc0b+-0x1d48*-0x2]=-_0x32596d*_0x558d00,_0x458080[-0x9ec+0xb*0x2e3+-0x15d3]=_0x56e902,_0x458080[-0x18a1+-0x10b9+0x295d]=0xe2*-0xc+0x129a+-0x802,_0x458080[0x1*0x7d3+0x3b3*-0x2+0x7*-0xf]=_0x5903c9*_0x558d00+_0x2d9ebc*_0x271c82*_0x56e902,_0x458080[-0x14bb+-0x20f2+0x3a*0xed]=_0x5903c9*_0x2d9ebc-_0x271c82*_0x56e902*_0x558d00,_0x458080[-0x266a+0x2663+0x1*0xd]=-_0x32596d*_0x271c82,_0x458080[0x7*0x323+-0x6*0x359+-0x8*0x3b]=-0x910*-0x2+0x48b*-0x1+0x3d*-0x39,_0x458080[-0x3*-0xb54+0x27*0x4f+-0x2dfd]=_0x271c82*_0x558d00-_0x5903c9*_0x2d9ebc*_0x56e902,_0x458080[0x2330+0x6e+0x1*-0x2395]=_0x2d9ebc*_0x271c82+_0x5903c9*_0x56e902*_0x558d00,_0x458080[-0x103f*0x1+-0xaab+0x1af4]=_0x5903c9*_0x32596d,_0x458080[-0x318+-0x1942+0x977*0x3]=-0x776+0x13c3*-0x1+0x17*0x12f,_0x458080[-0x11*0x6b+-0x2309+0x4b*0x90]=-0x1733*0x1+-0xd38+0x246b*0x1,_0x458080[0x1858+-0x8*0x316+-0x65*-0x1]=0x1*0x575+0x1163+-0x16d8,_0x458080[0x38*0xd+-0x1368+-0x1*-0x109e]=-0x1067+-0x1201*0x2+0x3469,_0x458080[0x1cc1*0x1+0x4c9+-0x217b]=0x33*0x8e+0x9dc+-0x2625,this;}['getEulerAn'+'gles'](_0xd622f1=new I()){this['getScale'](yl);const _0x3de9cb=yl['x'],_0x215957=yl['y'],_0x3cb593=yl['z'];if(_0x3de9cb===-0x24b8+0x1b*-0x1f+0x27fd||_0x215957===-0x125f+-0x7aa+0x2b*0x9b||_0x3cb593===-0x1078+0x74c*-0x3+0x2*0x132e)return _0xd622f1['set'](-0x1de2+-0xf02*0x2+0x3be6,-0x1456+-0x787*-0x4+-0x9c6,0x133a+0xb46+-0x1e80);const _0x134b6e=this['data'],_0x1596c1=Math['asin'](-_0x134b6e[0x11*0xe8+0x2088+-0x2fee*0x1]/_0x3de9cb),_0x4a7af9=Math['PI']*(0x5ce+0x1613+-0x1be1+0.5);let _0x54e27f,_0x221346;return _0x1596c1<_0x4a7af9?_0x1596c1>-_0x4a7af9?(_0x54e27f=Math['atan2'](_0x134b6e[-0x1*-0x21ed+-0x1867+0x20*-0x4c]/_0x215957,_0x134b6e[-0xe5e*-0x2+0x2503+-0x41b5]/_0x3cb593),_0x221346=Math['atan2'](_0x134b6e[0x2*0x1219+0xa03+0x4*-0xb8d]/_0x3de9cb,_0x134b6e[0x1304+-0x17d1+-0x4cd*-0x1]/_0x3de9cb)):(_0x221346=0x183*-0x13+0x1*-0x8ee+0x25a7,_0x54e27f=-Math['atan2'](_0x134b6e[-0x1b37*0x1+0x11b4+0x987]/_0x215957,_0x134b6e[-0x8d9*-0x3+0xf65+-0x29eb]/_0x215957)):(_0x221346=0xbb*0x8+-0x23bc+-0xef2*-0x2,_0x54e27f=Math['atan2'](_0x134b6e[-0x60+-0xf8f+-0x3*-0x551]/_0x215957,_0x134b6e[0x1379+-0x37f+-0xd7*0x13]/_0x215957)),_0xd622f1['set'](_0x54e27f,_0x1596c1,_0x221346)['mulScalar'](Y['RAD_TO_DEG']);}['toString'](){return'['+this['data']['join'](',\x20')+']';}};h(Ur,'IDENTITY',Object['freeze'](new Ur())),h(Ur,'ZERO',Object['freeze'](new Ur()['set']([0x3*0xa7+-0x2e*-0x5b+-0x124f,-0xc19+-0x8e*-0xe+0x1*0x455,-0x1e9b+-0x5c5*0x2+0x2a25,-0xda*0x15+0x8ed+0x8f5,0x1330+-0xb79+0x7b7*-0x1,0x1af7+0x1*0x1707+0x2*-0x18ff,0x2*-0xd42+-0x1*0x511+0x37*0x93,-0x1308+0x527*-0x3+-0x6d*-0x51,0x26da+0x107+0x1*-0x27e1,-0x8*0x4af+0x9b5+0x1bc3,-0xd91*-0x1+0x10*0x11b+-0x3*0xa6b,-0x11*0x22+-0x702*-0x2+-0xbc2,-0x880+-0x20c2+-0x2*-0x14a1,0x1*-0x1087+-0x1*0x129b+-0xbb6*-0x3,0x87e+-0x1b92*-0x1+0x8*-0x482,-0x3*0x617+-0x745+0x198a])));let te=Ur;const sn=class sn{constructor(_0x141a63=-0x6*-0x64d+0x2688+-0x4c56,_0x1438ae=0x22*-0xaf+-0x1f0b+0x42d*0xd,_0x473db1=0x760+-0x16e*-0xb+0x2*-0xb8d,_0x242875=-0x101b+0x1814+-0x4*0x1fe){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x141a63['length']===0x3*0x992+0x1d4c+-0x1*0x39fe?(this['x']=_0x141a63[0x2*0x683+0x7fd*0x1+-0xa3*0x21],this['y']=_0x141a63[0x1*0x5fb+0xddc+-0x13d6],this['z']=_0x141a63[-0xb*-0xf1+0x114b+-0x6e9*0x4],this['w']=_0x141a63[-0x3*-0xce3+-0x1ae*0x14+-0x50e]):(this['x']=_0x141a63,this['y']=_0x1438ae,this['z']=_0x473db1,this['w']=_0x242875);}['clone'](){const _0x1ed933=this['constructo'+'r'];return new _0x1ed933(this['x'],this['y'],this['z'],this['w']);}['conjugate'](_0x35361d=this){return this['x']=_0x35361d['x']*-(0x218d+-0x11be+-0x77*0x22),this['y']=_0x35361d['y']*-(-0x372+-0x796*0x3+0x1a35),this['z']=_0x35361d['z']*-(0x1*-0xcf2+0x17d3+-0xae0),this['w']=_0x35361d['w'],this;}['copy'](_0x1eec5f){return this['x']=_0x1eec5f['x'],this['y']=_0x1eec5f['y'],this['z']=_0x1eec5f['z'],this['w']=_0x1eec5f['w'],this;}['dot'](_0x44529d){return this['x']*_0x44529d['x']+this['y']*_0x44529d['y']+this['z']*_0x44529d['z']+this['w']*_0x44529d['w'];}['equals'](_0x2b5ede){return this['x']===_0x2b5ede['x']&&this['y']===_0x2b5ede['y']&&this['z']===_0x2b5ede['z']&&this['w']===_0x2b5ede['w'];}['equalsAppr'+'ox'](_0x8e114d,_0x2d077b=-0xd8f+0x63a*-0x1+0x13c9+0.000001){return Math['abs'](this['x']-_0x8e114d['x'])<_0x2d077b&&Math['abs'](this['y']-_0x8e114d['y'])<_0x2d077b&&Math['abs'](this['z']-_0x8e114d['z'])<_0x2d077b&&Math['abs'](this['w']-_0x8e114d['w'])<_0x2d077b;}['getAxisAng'+'le'](_0x1bc95f){let _0x51f2f7=Math['acos'](this['w'])*(-0x2561*0x1+-0x871*-0x1+-0x1a*-0x11d);const _0x27eae3=Math['sin'](_0x51f2f7/(0x799*0x3+0x156+0x1*-0x181f));return _0x27eae3!==0x2b*-0x77+-0x2*0x25+0x1*0x1447?(_0x1bc95f['x']=this['x']/_0x27eae3,_0x1bc95f['y']=this['y']/_0x27eae3,_0x1bc95f['z']=this['z']/_0x27eae3,(_0x1bc95f['x']<0x138*0x15+-0xfc1*0x1+-0x9d7||_0x1bc95f['y']<0xfcb*-0x2+0x1590+-0xa06*-0x1||_0x1bc95f['z']<0x37e+-0x15af*-0x1+-0x192d)&&(_0x1bc95f['x']*=-(-0x182c+0xbad+-0x64*-0x20),_0x1bc95f['y']*=-(-0x1*-0x1960+-0x14e2*-0x1+0x1*-0x2e41),_0x1bc95f['z']*=-(0x2*0x116+0x1a03+-0x1c2e),_0x51f2f7*=-(0x11d3+0x773+-0x1945))):(_0x1bc95f['x']=0x6b6+0x13*-0x1b+0x25a*-0x2,_0x1bc95f['y']=-0x1*0x220b+0x2*0x2df+0x13b*0x17,_0x1bc95f['z']=-0x621+-0x16f8+0x1d19),_0x51f2f7*Y['RAD_TO_DEG'];}['getEulerAn'+'gles'](_0x35123e=new I()){let _0x34718b,_0x385d81,_0x4af9c9;const _0x3d71ec=this['x'],_0x5d30f8=this['y'],_0x5c9bd2=this['z'],_0x1bf260=this['w'],_0x588803=(-0xaee+-0x3d*-0xe+0x79a)*(_0x1bf260*_0x5d30f8-_0x3d71ec*_0x5c9bd2);return _0x588803<=-(-0x3a9*0x3+0x30b*-0x4+0x1727+0.99999)?(_0x34718b=(0x150f+-0xb26+-0x9e7)*Math['atan2'](_0x3d71ec,_0x1bf260),_0x385d81=-Math['PI']/(0x13cf+0x178f*-0x1+0x3c2),_0x4af9c9=0x22d1+-0x19*-0x184+-0x48b5):_0x588803>=-0x1065+0x1595+0x1*-0x530+0.99999?(_0x34718b=(0x14fb*-0x1+-0x1*-0x94d+0xbb0)*Math['atan2'](_0x3d71ec,_0x1bf260),_0x385d81=Math['PI']/(-0x26dd+-0x6c7*0x1+-0x1*-0x2da6),_0x4af9c9=0x1*0x576+-0x1ec2+0x194c):(_0x34718b=Math['atan2']((0x84b+-0x2*-0x12fb+-0x2e3f)*(_0x1bf260*_0x3d71ec+_0x5d30f8*_0x5c9bd2),0x1cc6+0x2204+-0x1*0x3ec9-(0x6be*0x4+-0x1*0xe9b+-0xc5b)*(_0x3d71ec*_0x3d71ec+_0x5d30f8*_0x5d30f8)),_0x385d81=Math['asin'](_0x588803),_0x4af9c9=Math['atan2']((0x6d9+-0xc1*-0x29+-0x25c0)*(_0x1bf260*_0x5c9bd2+_0x3d71ec*_0x5d30f8),0x5*0x54c+0x2519*-0x1+0x1c5*0x6-(-0x8cb+0x1d54+-0x1487*0x1)*(_0x5d30f8*_0x5d30f8+_0x5c9bd2*_0x5c9bd2))),_0x35123e['set'](_0x34718b,_0x385d81,_0x4af9c9)['mulScalar'](Y['RAD_TO_DEG']);}['invert'](_0x38b4a4=this){return this['conjugate'](_0x38b4a4)['normalize']();}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x54d5f9,_0x176db2,_0x579098){const _0x5b77d4=(-0x21*-0x1e+-0x19a8+0x15cb-_0x579098)*(_0x54d5f9['dot'](_0x176db2)<-0x1369*-0x1+0x56a+-0x1*0x18d3?-(-0x2d*0xc9+0x4eb+-0xd*-0x257):-0x1*-0x20c1+-0x2102+0x2*0x21);return this['x']=_0x54d5f9['x']*_0x5b77d4+_0x176db2['x']*_0x579098,this['y']=_0x54d5f9['y']*_0x5b77d4+_0x176db2['y']*_0x579098,this['z']=_0x54d5f9['z']*_0x5b77d4+_0x176db2['z']*_0x579098,this['w']=_0x54d5f9['w']*_0x5b77d4+_0x176db2['w']*_0x579098,this['normalize']();}['mul'](_0x28a765){const _0x4df73a=this['x'],_0x23759e=this['y'],_0x46df3a=this['z'],_0x42caef=this['w'],_0xfc58e9=_0x28a765['x'],_0x19b783=_0x28a765['y'],_0x477bc4=_0x28a765['z'],_0x60ba26=_0x28a765['w'];return this['x']=_0x42caef*_0xfc58e9+_0x4df73a*_0x60ba26+_0x23759e*_0x477bc4-_0x46df3a*_0x19b783,this['y']=_0x42caef*_0x19b783+_0x23759e*_0x60ba26+_0x46df3a*_0xfc58e9-_0x4df73a*_0x477bc4,this['z']=_0x42caef*_0x477bc4+_0x46df3a*_0x60ba26+_0x4df73a*_0x19b783-_0x23759e*_0xfc58e9,this['w']=_0x42caef*_0x60ba26-_0x4df73a*_0xfc58e9-_0x23759e*_0x19b783-_0x46df3a*_0x477bc4,this;}['mulScalar'](_0x3ec328,_0x250054=this){return this['x']=_0x250054['x']*_0x3ec328,this['y']=_0x250054['y']*_0x3ec328,this['z']=_0x250054['z']*_0x3ec328,this['w']=_0x250054['w']*_0x3ec328,this;}['mul2'](_0x36244a,_0x42f23c){const _0x41813b=_0x36244a['x'],_0x1f2c5a=_0x36244a['y'],_0x2e480f=_0x36244a['z'],_0x4d85e6=_0x36244a['w'],_0x17f575=_0x42f23c['x'],_0x480d84=_0x42f23c['y'],_0x23b09a=_0x42f23c['z'],_0x45c928=_0x42f23c['w'];return this['x']=_0x4d85e6*_0x17f575+_0x41813b*_0x45c928+_0x1f2c5a*_0x23b09a-_0x2e480f*_0x480d84,this['y']=_0x4d85e6*_0x480d84+_0x1f2c5a*_0x45c928+_0x2e480f*_0x17f575-_0x41813b*_0x23b09a,this['z']=_0x4d85e6*_0x23b09a+_0x2e480f*_0x45c928+_0x41813b*_0x480d84-_0x1f2c5a*_0x17f575,this['w']=_0x4d85e6*_0x45c928-_0x41813b*_0x17f575-_0x1f2c5a*_0x480d84-_0x2e480f*_0x23b09a,this;}['normalize'](_0x3b69df=this){let _0x44fe01=_0x3b69df['length']();return _0x44fe01===-0x1de2+-0x78d+0x256f?(this['x']=this['y']=this['z']=-0xb68+0x1183*-0x1+0x1ceb,this['w']=0x2*-0x10f9+-0x5a1*-0x4+0xb6f):(_0x44fe01=(-0x1774+0x13*0x1dc+-0xbdf)/_0x44fe01,this['x']=_0x3b69df['x']*_0x44fe01,this['y']=_0x3b69df['y']*_0x44fe01,this['z']=_0x3b69df['z']*_0x44fe01,this['w']=_0x3b69df['w']*_0x44fe01),this;}['set'](_0x9836a1,_0x1a0f85,_0xc3169,_0x507550){return this['x']=_0x9836a1,this['y']=_0x1a0f85,this['z']=_0xc3169,this['w']=_0x507550,this;}['setFromAxi'+'sAngle'](_0x1ddadc,_0x2aa74c){_0x2aa74c*=(-0xd74+-0x1d56+-0x2*-0x1565+0.5)*Y['DEG_TO_RAD'];const _0x2fe5b8=Math['sin'](_0x2aa74c),_0x3e3a02=Math['cos'](_0x2aa74c);return this['x']=_0x2fe5b8*_0x1ddadc['x'],this['y']=_0x2fe5b8*_0x1ddadc['y'],this['z']=_0x2fe5b8*_0x1ddadc['z'],this['w']=_0x3e3a02,this;}['setFromEul'+'erAngles'](_0x42e84b,_0x4e1312,_0x45f291){if(_0x42e84b instanceof I){const _0x404510=_0x42e84b;_0x42e84b=_0x404510['x'],_0x4e1312=_0x404510['y'],_0x45f291=_0x404510['z'];}const _0x22f929=(-0x4*0x688+-0x1422+0x3e*0xbf+0.5)*Y['DEG_TO_RAD'];_0x42e84b*=_0x22f929,_0x4e1312*=_0x22f929,_0x45f291*=_0x22f929;const _0x869766=Math['sin'](_0x42e84b),_0x50dfd3=Math['cos'](_0x42e84b),_0x47db51=Math['sin'](_0x4e1312),_0x64e5ea=Math['cos'](_0x4e1312),_0x219072=Math['sin'](_0x45f291),_0x308369=Math['cos'](_0x45f291);return this['x']=_0x869766*_0x64e5ea*_0x308369-_0x50dfd3*_0x47db51*_0x219072,this['y']=_0x50dfd3*_0x47db51*_0x308369+_0x869766*_0x64e5ea*_0x219072,this['z']=_0x50dfd3*_0x64e5ea*_0x219072-_0x869766*_0x47db51*_0x308369,this['w']=_0x50dfd3*_0x64e5ea*_0x308369+_0x869766*_0x47db51*_0x219072,this;}['setFromMat'+'4'](_0x10c2aa){const _0x2bf832=_0x10c2aa['data'];let _0x4899d0=_0x2bf832[0x932+-0x1*0x5e7+-0x34b],_0x5be934=_0x2bf832[-0x2521+0x2f1*-0x7+0x39b9],_0x4f0eb5=_0x2bf832[0x2323+0x1*-0x24c2+0x1a1],_0xdb5d46=_0x2bf832[0x44*-0x36+0xec8+0x6*-0x12],_0xc9e6b6=_0x2bf832[-0xddc*0x1+0x153+0xc8e],_0x3c248c=_0x2bf832[-0x3*-0x2+0x1af1+-0xd1*0x21],_0x2deacf=_0x2bf832[0x1aa0+-0x204c+-0x2da*-0x2],_0x4ce63d=_0x2bf832[-0x100f+0x13*-0x1b7+0x30ad],_0x163f17=_0x2bf832[0xafa+-0x12bc+0x7cc],_0x4333ed;return _0x4333ed=_0x4899d0*_0x4899d0+_0x5be934*_0x5be934+_0x4f0eb5*_0x4f0eb5,_0x4333ed===0x5*0x529+-0x1e*-0x39+-0x67f*0x5?this['set'](0x387*-0x7+0x16f9+-0x16*-0x14,0x2*0x14e+-0xb4e*-0x2+0x21a*-0xc,-0x8ef+0x24*-0xd9+0x2773*0x1,-0x2*-0x926+0x17f*0x2+0x1549*-0x1):(_0x4333ed=(0x10d7+-0x1040+-0x96)/Math['sqrt'](_0x4333ed),_0x4899d0*=_0x4333ed,_0x5be934*=_0x4333ed,_0x4f0eb5*=_0x4333ed,_0x4333ed=_0xdb5d46*_0xdb5d46+_0xc9e6b6*_0xc9e6b6+_0x3c248c*_0x3c248c,_0x4333ed===-0x753+0x877+-0x1*0x124?this['set'](0x35*0xb+0x1875+-0x4*0x6af,-0x917+0x196b*-0x1+-0x277*-0xe,-0x154b*-0x1+0x1*0x1f4d+-0x3498*0x1,-0x17fe+-0x3*0x4b1+-0x376*-0xb):(_0x4333ed=(-0x17bb+-0x1bc3+0x1*0x337f)/Math['sqrt'](_0x4333ed),_0xdb5d46*=_0x4333ed,_0xc9e6b6*=_0x4333ed,_0x3c248c*=_0x4333ed,_0x4333ed=_0x2deacf*_0x2deacf+_0x4ce63d*_0x4ce63d+_0x163f17*_0x163f17,_0x4333ed===-0x1e76+-0x1d24+0x3b9a?this['set'](-0x2af+-0x7d2+-0xa81*-0x1,0xfcc*-0x2+0x1d90+0x208,0x226d+0x257*0x7+0x742*-0x7,0xc9b+-0x119b+0x7*0xb7):(_0x4333ed=(0x11*0x4d+0x1f*0x139+-0x2b03)/Math['sqrt'](_0x4333ed),_0x2deacf*=_0x4333ed,_0x4ce63d*=_0x4333ed,_0x163f17*=_0x4333ed,_0x163f17<-0x3*0x493+0xe1e+-0x65*0x1?_0x4899d0>_0xc9e6b6?this['set'](0x3*0x667+0x3*-0xe0+0x4*-0x425+_0x4899d0-_0xc9e6b6-_0x163f17,_0x5be934+_0xdb5d46,_0x2deacf+_0x4f0eb5,_0x3c248c-_0x4ce63d):this['set'](_0x5be934+_0xdb5d46,-0x29d*0x1+0x1974+-0x25*0x9e-_0x4899d0+_0xc9e6b6-_0x163f17,_0x3c248c+_0x4ce63d,_0x2deacf-_0x4f0eb5):_0x4899d0<-_0xc9e6b6?this['set'](_0x2deacf+_0x4f0eb5,_0x3c248c+_0x4ce63d,-0x13fd+0x22fd+-0xeff-_0x4899d0-_0xc9e6b6+_0x163f17,_0x5be934-_0xdb5d46):this['set'](_0x3c248c-_0x4ce63d,_0x2deacf-_0x4f0eb5,_0x5be934-_0xdb5d46,-0x1151+-0x1*-0x21e+0x22c*0x7+_0x4899d0+_0xc9e6b6+_0x163f17),this['mulScalar']((0x829*-0x2+-0x2376+0x33c9)/this['length']()))));}['setFromDir'+'ections'](_0x41b86a,_0x272bdb){const _0x2583ee=0x52*-0x30+0x66b+0x8f6+_0x41b86a['dot'](_0x272bdb);return _0x2583ee<Number['EPSILON']?Math['abs'](_0x41b86a['x'])>Math['abs'](_0x41b86a['y'])?(this['x']=-_0x41b86a['z'],this['y']=-0x287+-0xb15*0x1+0xd9c*0x1,this['z']=_0x41b86a['x'],this['w']=0x1*0xaea+0x1b1d+0x375*-0xb):(this['x']=0x1b82+0xa9d+-0x261f,this['y']=-_0x41b86a['z'],this['z']=_0x41b86a['y'],this['w']=0x1*-0x1433+-0xe8f+0x22c2):(this['x']=_0x41b86a['y']*_0x272bdb['z']-_0x41b86a['z']*_0x272bdb['y'],this['y']=_0x41b86a['z']*_0x272bdb['x']-_0x41b86a['x']*_0x272bdb['z'],this['z']=_0x41b86a['x']*_0x272bdb['y']-_0x41b86a['y']*_0x272bdb['x'],this['w']=_0x2583ee),this['normalize']();}['slerp'](_0x3bf0fd,_0x39e70f,_0x522f7d){const _0x5a82b8=_0x3bf0fd['x'],_0xe6a82d=_0x3bf0fd['y'],_0x904992=_0x3bf0fd['z'],_0x51db3a=_0x3bf0fd['w'];let _0x4aad76=_0x39e70f['x'],_0x7a2d84=_0x39e70f['y'],_0x326c28=_0x39e70f['z'],_0x3026f0=_0x39e70f['w'],_0x6db980=_0x51db3a*_0x3026f0+_0x5a82b8*_0x4aad76+_0xe6a82d*_0x7a2d84+_0x904992*_0x326c28;if(_0x6db980<0xaee+-0x1965+0xe77&&(_0x3026f0=-_0x3026f0,_0x4aad76=-_0x4aad76,_0x7a2d84=-_0x7a2d84,_0x326c28=-_0x326c28,_0x6db980=-_0x6db980),Math['abs'](_0x6db980)>=0x1f9+-0x725*-0x4+-0x1e8c)return this['w']=_0x51db3a,this['x']=_0x5a82b8,this['y']=_0xe6a82d,this['z']=_0x904992,this;const _0x435293=Math['acos'](_0x6db980),_0x3ecad8=Math['sqrt'](0xaf4+0x22e9+-0x2ddc-_0x6db980*_0x6db980);if(Math['abs'](_0x3ecad8)<-0x177d+0x1ff6+-0x879+0.001)return this['w']=_0x51db3a*(0xd*-0x1af+-0x4*-0x6c6+-0x1*0x535+0.5)+_0x3026f0*(-0x2104+0x5ad+-0x1b57*-0x1+0.5),this['x']=_0x5a82b8*(-0x49*0x7d+-0x5ca+0x296f+0.5)+_0x4aad76*(-0x21*-0xf1+-0x3e*0x1+-0xd*0x25f+0.5),this['y']=_0xe6a82d*(0x7*-0x75+0x466+0x1*-0x133+0.5)+_0x7a2d84*(0xc7*0x2f+-0xa07+-0x1a82+0.5),this['z']=_0x904992*(-0x1f6a+0x5e7*-0x3+0x1f7*0x19+0.5)+_0x326c28*(-0x2236+-0x1*-0x16f1+0xb45+0.5),this;const _0x10c55e=Math['sin']((0x1bac+0xfa0+-0x2b4b-_0x522f7d)*_0x435293)/_0x3ecad8,_0x12b83e=Math['sin'](_0x522f7d*_0x435293)/_0x3ecad8;return this['w']=_0x51db3a*_0x10c55e+_0x3026f0*_0x12b83e,this['x']=_0x5a82b8*_0x10c55e+_0x4aad76*_0x12b83e,this['y']=_0xe6a82d*_0x10c55e+_0x7a2d84*_0x12b83e,this['z']=_0x904992*_0x10c55e+_0x326c28*_0x12b83e,this;}['transformV'+'ector'](_0x53afea,_0x2f6108=new I()){const _0x420965=_0x53afea['x'],_0x5487a5=_0x53afea['y'],_0x48aaaa=_0x53afea['z'],_0x424989=this['x'],_0x1a4b7a=this['y'],_0x156d0f=this['z'],_0x18f5c0=this['w'],_0x5ad8c1=_0x18f5c0*_0x420965+_0x1a4b7a*_0x48aaaa-_0x156d0f*_0x5487a5,_0x5ab4aa=_0x18f5c0*_0x5487a5+_0x156d0f*_0x420965-_0x424989*_0x48aaaa,_0x161c24=_0x18f5c0*_0x48aaaa+_0x424989*_0x5487a5-_0x1a4b7a*_0x420965,_0x393bb7=-_0x424989*_0x420965-_0x1a4b7a*_0x5487a5-_0x156d0f*_0x48aaaa;return _0x2f6108['x']=_0x5ad8c1*_0x18f5c0+_0x393bb7*-_0x424989+_0x5ab4aa*-_0x156d0f-_0x161c24*-_0x1a4b7a,_0x2f6108['y']=_0x5ab4aa*_0x18f5c0+_0x393bb7*-_0x1a4b7a+_0x161c24*-_0x424989-_0x5ad8c1*-_0x156d0f,_0x2f6108['z']=_0x161c24*_0x18f5c0+_0x393bb7*-_0x156d0f+_0x5ad8c1*-_0x1a4b7a-_0x5ab4aa*-_0x424989,_0x2f6108;}['fromArray'](_0x2fa816,_0xafb9d7=0x1fbd*0x1+0x2064+0x4021*-0x1){return this['x']=_0x2fa816[_0xafb9d7]??this['x'],this['y']=_0x2fa816[_0xafb9d7+(0x10e3+0x1*-0x11ab+0xc9)]??this['y'],this['z']=_0x2fa816[_0xafb9d7+(-0x991+-0x5*-0x44c+-0xbe9)]??this['z'],this['w']=_0x2fa816[_0xafb9d7+(-0x2*-0x2d1+-0x9*0x29d+0x11e6)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x324055=[],_0x44b1b2=-0x3*-0xa75+0x86+-0x661*0x5){return _0x324055[_0x44b1b2]=this['x'],_0x324055[_0x44b1b2+(-0xe06*0x1+-0x48d*-0x7+0x1*-0x11d4)]=this['y'],_0x324055[_0x44b1b2+(0x1320+-0x14e0+0x3*0x96)]=this['z'],_0x324055[_0x44b1b2+(0x1421*-0x1+-0x3d5+-0x1*-0x17f9)]=this['w'],_0x324055;}};h(sn,'IDENTITY',Object['freeze'](new sn(0x2577+-0x215+0x1*-0x2362,-0x1384*0x2+0x4*-0x768+0x44a8,-0xb38+-0x4*0x267+-0x4*-0x535,-0x23ae+0xde+-0x1*-0x22d1))),h(sn,'ZERO',Object['freeze'](new sn(0x193e+0x4b+-0x3*0x883,0x6d*-0x23+-0x35a+-0x1241*-0x1,-0xf3*0xd+0x1*0x23ab+-0x1754,-0x4*-0x3c4+0xd*0x2c5+-0x301*0x11)));let le=sn;const pa=new I(),_a=new I(),Jm=new I(),ep=new I(),C0=new I();class Ie{constructor(_0x2abcc1,_0x3063de){h(this,'center',new I()),h(this,'halfExtent'+'s',new I(0xf16+-0xde4+-0x132+0.5,-0x23f8+-0x2242+0xca*0x59+0.5,0x1*0x2641+0x1*0x2610+-0x4c51+0.5)),h(this,'_min',new I()),h(this,'_max',new I()),(_0x2abcc1&&this['center']['copy'](_0x2abcc1),_0x3063de&&this['halfExtent'+'s']['copy'](_0x3063de));}['add'](_0xc43e1){const _0x1cc7fc=this['center'],_0x43bbac=_0x1cc7fc['x'],_0x5d202f=_0x1cc7fc['y'],_0x1657cf=_0x1cc7fc['z'],_0x2a771f=this['halfExtent'+'s'],_0x3449ea=_0x2a771f['x'],_0x3d05d7=_0x2a771f['y'],_0x337793=_0x2a771f['z'];let _0x139e05=_0x43bbac-_0x3449ea,_0x27f5d2=_0x43bbac+_0x3449ea,_0x22ac11=_0x5d202f-_0x3d05d7,_0xb0b4d5=_0x5d202f+_0x3d05d7,_0xfc1c21=_0x1657cf-_0x337793,_0x5393cd=_0x1657cf+_0x337793;const _0xc79dff=_0xc43e1['center'],_0x26aefd=_0xc79dff['x'],_0x24a0d3=_0xc79dff['y'],_0xb805d4=_0xc79dff['z'],_0x4ab0ee=_0xc43e1['halfExtent'+'s'],_0x477041=_0x4ab0ee['x'],_0x1f4d23=_0x4ab0ee['y'],_0x41412a=_0x4ab0ee['z'],_0x18d88f=_0x26aefd-_0x477041,_0x33d010=_0x26aefd+_0x477041,_0x472137=_0x24a0d3-_0x1f4d23,_0x4fe148=_0x24a0d3+_0x1f4d23,_0x3cbb6f=_0xb805d4-_0x41412a,_0x5c8be8=_0xb805d4+_0x41412a;_0x18d88f<_0x139e05&&(_0x139e05=_0x18d88f),_0x33d010>_0x27f5d2&&(_0x27f5d2=_0x33d010),_0x472137<_0x22ac11&&(_0x22ac11=_0x472137),_0x4fe148>_0xb0b4d5&&(_0xb0b4d5=_0x4fe148),_0x3cbb6f<_0xfc1c21&&(_0xfc1c21=_0x3cbb6f),_0x5c8be8>_0x5393cd&&(_0x5393cd=_0x5c8be8),_0x1cc7fc['x']=(_0x139e05+_0x27f5d2)*(-0x10d5+-0x21aa+0x1a1*0x1f+0.5),_0x1cc7fc['y']=(_0x22ac11+_0xb0b4d5)*(-0x639+0x36*-0x45+0x14c7+0.5),_0x1cc7fc['z']=(_0xfc1c21+_0x5393cd)*(0x3*0x329+0x2072+-0x1*0x29ed+0.5),_0x2a771f['x']=(_0x27f5d2-_0x139e05)*(0x1*0xbfd+-0x4f*0x1+-0xbae+0.5),_0x2a771f['y']=(_0xb0b4d5-_0x22ac11)*(-0x8eb*0x1+-0x1*0x885+0x1170+0.5),_0x2a771f['z']=(_0x5393cd-_0xfc1c21)*(-0x2298+0x156f+0xd29*0x1+0.5);}['copy'](_0x4588f8){this['center']['copy'](_0x4588f8['center']),this['halfExtent'+'s']['copy'](_0x4588f8['halfExtent'+'s']);}['clone'](){return new Ie(this['center'],this['halfExtent'+'s']);}['intersects'](_0x327ea6){const _0xb6d3a=this['getMax'](),_0x31a6a6=this['getMin'](),_0x2fb0ff=_0x327ea6['getMax'](),_0xfe069=_0x327ea6['getMin']();return _0x31a6a6['x']<=_0x2fb0ff['x']&&_0xb6d3a['x']>=_0xfe069['x']&&_0x31a6a6['y']<=_0x2fb0ff['y']&&_0xb6d3a['y']>=_0xfe069['y']&&_0x31a6a6['z']<=_0x2fb0ff['z']&&_0xb6d3a['z']>=_0xfe069['z'];}['_intersect'+'sRay'](_0x50d16d,_0x39f2d5){const _0x4b075e=pa['copy'](this['getMin']())['sub'](_0x50d16d['origin']),_0x1d3adb=_a['copy'](this['getMax']())['sub'](_0x50d16d['origin']),_0x470d56=_0x50d16d['direction'];_0x470d56['x']===0x734+0x2*-0x35e+-0x78?(_0x4b075e['x']=_0x4b075e['x']<0x21d7+0x1a9b+-0x6*0xa13?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x1d3adb['x']=_0x1d3adb['x']<-0x21*0x35+0x1eae+-0x17d9?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4b075e['x']/=_0x470d56['x'],_0x1d3adb['x']/=_0x470d56['x']),_0x470d56['y']===-0x4e7*-0x7+0x89b+-0x2aec?(_0x4b075e['y']=_0x4b075e['y']<-0x842*-0x4+-0x1754+-0x9b4?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x1d3adb['y']=_0x1d3adb['y']<0x8f0+0x22ad+-0x2b9d?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4b075e['y']/=_0x470d56['y'],_0x1d3adb['y']/=_0x470d56['y']),_0x470d56['z']===0xd22*-0x2+0x1628+0x41c?(_0x4b075e['z']=_0x4b075e['z']<-0x47*-0x16+-0x1f98+0x197e?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x1d3adb['z']=_0x1d3adb['z']<0x20bc+0x20e6+0x21e*-0x1f?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4b075e['z']/=_0x470d56['z'],_0x1d3adb['z']/=_0x470d56['z']);const _0x2eb313=Jm['set'](Math['min'](_0x4b075e['x'],_0x1d3adb['x']),Math['min'](_0x4b075e['y'],_0x1d3adb['y']),Math['min'](_0x4b075e['z'],_0x1d3adb['z'])),_0xaaa7ad=ep['set'](Math['max'](_0x4b075e['x'],_0x1d3adb['x']),Math['max'](_0x4b075e['y'],_0x1d3adb['y']),Math['max'](_0x4b075e['z'],_0x1d3adb['z'])),_0x5f4290=Math['min'](Math['min'](_0xaaa7ad['x'],_0xaaa7ad['y']),_0xaaa7ad['z']),_0x5914d5=Math['max'](Math['max'](_0x2eb313['x'],_0x2eb313['y']),_0x2eb313['z']),_0x3ba54e=_0x5f4290>=_0x5914d5&&_0x5914d5>=-0xc3b+-0x37*0x4a+-0x17b*-0x13;return _0x3ba54e&&_0x39f2d5['copy'](_0x50d16d['direction'])['mulScalar'](_0x5914d5)['add'](_0x50d16d['origin']),_0x3ba54e;}['_fastInter'+'sectsRay'](_0x3b7ea6){const _0x23cf79=pa,_0x30adbe=_a,_0x1fd1aa=Jm,_0x2ed788=ep,_0x3e242d=C0,_0x2a1410=_0x3b7ea6['direction'];return _0x23cf79['sub2'](_0x3b7ea6['origin'],this['center']),_0x2ed788['set'](Math['abs'](_0x23cf79['x']),Math['abs'](_0x23cf79['y']),Math['abs'](_0x23cf79['z'])),_0x1fd1aa['mul2'](_0x23cf79,_0x2a1410),!(_0x2ed788['x']>this['halfExtent'+'s']['x']&&_0x1fd1aa['x']>=0x1a08+0xa41+-0x52f*0x7||_0x2ed788['y']>this['halfExtent'+'s']['y']&&_0x1fd1aa['y']>=-0x26*-0xd6+0xd3b+-0x2cff||_0x2ed788['z']>this['halfExtent'+'s']['z']&&_0x1fd1aa['z']>=-0x1024+-0x39*-0x80+-0xc5c||(_0x3e242d['set'](Math['abs'](_0x2a1410['x']),Math['abs'](_0x2a1410['y']),Math['abs'](_0x2a1410['z'])),_0x30adbe['cross'](_0x2a1410,_0x23cf79),_0x30adbe['set'](Math['abs'](_0x30adbe['x']),Math['abs'](_0x30adbe['y']),Math['abs'](_0x30adbe['z'])),_0x30adbe['x']>this['halfExtent'+'s']['y']*_0x3e242d['z']+this['halfExtent'+'s']['z']*_0x3e242d['y'])||_0x30adbe['y']>this['halfExtent'+'s']['x']*_0x3e242d['z']+this['halfExtent'+'s']['z']*_0x3e242d['x']||_0x30adbe['z']>this['halfExtent'+'s']['x']*_0x3e242d['y']+this['halfExtent'+'s']['y']*_0x3e242d['x']);}['intersects'+'Ray'](_0x42b458,_0x1a613e){return _0x1a613e?this['_intersect'+'sRay'](_0x42b458,_0x1a613e):this['_fastInter'+'sectsRay'](_0x42b458);}['setMinMax'](_0x2d1e83,_0x481d15){this['center']['add2'](_0x481d15,_0x2d1e83)['mulScalar'](-0x2ad+0x205f*-0x1+0x230c+0.5),this['halfExtent'+'s']['sub2'](_0x481d15,_0x2d1e83)['mulScalar'](0xd76+-0x2ad+-0xac9+0.5);}['getMin'](){return this['_min']['copy'](this['center'])['sub'](this['halfExtent'+'s']);}['getMax'](){return this['_max']['copy'](this['center'])['add'](this['halfExtent'+'s']);}['containsPo'+'int'](_0xde5a76){const _0x5a546c=this['getMin'](),_0x188676=this['getMax']();return!(_0xde5a76['x']<_0x5a546c['x']||_0xde5a76['x']>_0x188676['x']||_0xde5a76['y']<_0x5a546c['y']||_0xde5a76['y']>_0x188676['y']||_0xde5a76['z']<_0x5a546c['z']||_0xde5a76['z']>_0x188676['z']);}['setFromTra'+'nsformedAa'+'bb'](_0x29fd2f,_0x27ff55,_0x399f29=!(-0x172b+0x2285+-0xb59)){const _0x396d6b=_0x29fd2f['center'],_0x21a55f=_0x29fd2f['halfExtent'+'s'],_0x46c2ec=_0x27ff55['data'];let _0x4f975f=_0x46c2ec[-0xdf*-0x2+0xe5f+-0x101d],_0x37871b=_0x46c2ec[-0x357+0x2621+0x1163*-0x2],_0x273ca2=_0x46c2ec[-0x2425+-0x8ae+-0x2cdb*-0x1],_0x25a634=_0x46c2ec[-0x12c8+-0x138e+0x5*0x7ab],_0x4a96a2=_0x46c2ec[-0x1*0x20ef+-0x1949+0x3a3d],_0x217ebd=_0x46c2ec[-0x111*-0x17+0x166*-0x6+-0x2af*0x6],_0x45a45c=_0x46c2ec[0x1307*-0x2+-0x1125+-0x1*-0x3735],_0x4efdfe=_0x46c2ec[-0x11d+0x2377*0x1+-0x2254],_0x1a023e=_0x46c2ec[-0xbbd+0x16b6+-0xaef];if(_0x399f29){let _0x42bef0=_0x4f975f*_0x4f975f+_0x37871b*_0x37871b+_0x273ca2*_0x273ca2;if(_0x42bef0>-0xfb6+-0x9c4+-0x197a*-0x1){const _0x5d52e4=(-0x13a*0x17+-0x12*0xd4+0x2b1f)/Math['sqrt'](_0x42bef0);_0x4f975f*=_0x5d52e4,_0x37871b*=_0x5d52e4,_0x273ca2*=_0x5d52e4;}if(_0x42bef0=_0x25a634*_0x25a634+_0x4a96a2*_0x4a96a2+_0x217ebd*_0x217ebd,_0x42bef0>0x1f8*0xd+-0x1*0x1a06+-0x5*-0x16){const _0x258c95=(-0x1*-0x1d87+0x8a5+0x262b*-0x1)/Math['sqrt'](_0x42bef0);_0x25a634*=_0x258c95,_0x4a96a2*=_0x258c95,_0x217ebd*=_0x258c95;}if(_0x42bef0=_0x45a45c*_0x45a45c+_0x4efdfe*_0x4efdfe+_0x1a023e*_0x1a023e,_0x42bef0>-0x177*0x2+-0xe6*-0x5+-0x190){const _0x2d7e23=(0x1*0x7fd+0x8f9+-0x10f5)/Math['sqrt'](_0x42bef0);_0x45a45c*=_0x2d7e23,_0x4efdfe*=_0x2d7e23,_0x1a023e*=_0x2d7e23;}}this['center']['set'](_0x46c2ec[-0x5*0x18+0x121d+-0x1199]+_0x4f975f*_0x396d6b['x']+_0x37871b*_0x396d6b['y']+_0x273ca2*_0x396d6b['z'],_0x46c2ec[0x8fb+0xa2+-0x990]+_0x25a634*_0x396d6b['x']+_0x4a96a2*_0x396d6b['y']+_0x217ebd*_0x396d6b['z'],_0x46c2ec[-0x9a*-0x3b+-0xe35*0x1+-0x5*0x43f]+_0x45a45c*_0x396d6b['x']+_0x4efdfe*_0x396d6b['y']+_0x1a023e*_0x396d6b['z']),this['halfExtent'+'s']['set'](Math['abs'](_0x4f975f)*_0x21a55f['x']+Math['abs'](_0x37871b)*_0x21a55f['y']+Math['abs'](_0x273ca2)*_0x21a55f['z'],Math['abs'](_0x25a634)*_0x21a55f['x']+Math['abs'](_0x4a96a2)*_0x21a55f['y']+Math['abs'](_0x217ebd)*_0x21a55f['z'],Math['abs'](_0x45a45c)*_0x21a55f['x']+Math['abs'](_0x4efdfe)*_0x21a55f['y']+Math['abs'](_0x1a023e)*_0x21a55f['z']);}static['computeMin'+'Max'](_0x29b33e,_0x3d7d9e,_0x2b4d5b,_0x7ab8f4=_0x29b33e['length']/(0xce4+-0x1*-0x1ee3+-0x2bc4)){if(_0x7ab8f4>0x15d*0x19+0x743+-0x7e*0x54){let _0x1ab5ef=_0x29b33e[-0x6d*0x26+-0x11e6*-0x1+-0x1b8],_0x118a75=_0x29b33e[0x6a5+-0x4f*0x67+0x9d*0x29],_0x272702=_0x29b33e[0x317*0xb+-0x1b1d+0x3*-0x24a],_0x2f44a0=_0x1ab5ef,_0x2c586e=_0x118a75,_0x51c115=_0x272702;const _0x55455d=_0x7ab8f4*(-0x5c9*-0x4+-0x133b+-0x3e6*0x1);for(let _0x15f05b=0xbab+0x85*-0x17+0x4b;_0x15f05b<_0x55455d;_0x15f05b+=-0x65*-0x5f+-0x1f*-0xbe+-0x3c7a){const _0x2c9c6b=_0x29b33e[_0x15f05b],_0x20b25a=_0x29b33e[_0x15f05b+(-0x1403*0x1+0x1*-0x7e6+-0x94e*-0x3)],_0xd65f59=_0x29b33e[_0x15f05b+(0x1*0x6d0+-0xae3+0x415)];_0x2c9c6b<_0x1ab5ef&&(_0x1ab5ef=_0x2c9c6b),_0x20b25a<_0x118a75&&(_0x118a75=_0x20b25a),_0xd65f59<_0x272702&&(_0x272702=_0xd65f59),_0x2c9c6b>_0x2f44a0&&(_0x2f44a0=_0x2c9c6b),_0x20b25a>_0x2c586e&&(_0x2c586e=_0x20b25a),_0xd65f59>_0x51c115&&(_0x51c115=_0xd65f59);}_0x3d7d9e['set'](_0x1ab5ef,_0x118a75,_0x272702),_0x2b4d5b['set'](_0x2f44a0,_0x2c586e,_0x51c115);}}['compute'](_0x33c0cf,_0x5e10ca){Ie['computeMin'+'Max'](_0x33c0cf,pa,_a,_0x5e10ca),this['setMinMax'](pa,_a);}['intersects'+'BoundingSp'+'here'](_0xf682d4){return this['_distanceT'+'oBoundingS'+'phereSq'](_0xf682d4)<=_0xf682d4['radius']*_0xf682d4['radius'];}['_distanceT'+'oBoundingS'+'phereSq'](_0x4ae9d4){const _0x4130da=this['getMin'](),_0x4382c6=this['getMax']();let _0x48322f=0x8a1*-0x3+0xd84+-0xc5f*-0x1;const _0x2b4a2d=['x','y','z'];for(let _0x54f6cc=-0x1f4c+0xdda+0x1172;_0x54f6cc<0x18ff+0x14c4+0xb7*-0x40;++_0x54f6cc){let _0x1dde02=0x41*0x29+-0x348*-0xb+-0x2e81;const _0x982836=_0x4ae9d4['center'][_0x2b4a2d[_0x54f6cc]],_0x462e4f=_0x4130da[_0x2b4a2d[_0x54f6cc]],_0x39fcd7=_0x4382c6[_0x2b4a2d[_0x54f6cc]];let _0x3d6141=-0x106*0x13+0x1*0x1c4f+0x1*-0x8dd;_0x982836<_0x462e4f&&(_0x3d6141=_0x462e4f-_0x982836,_0x1dde02+=_0x3d6141*_0x3d6141),_0x982836>_0x39fcd7&&(_0x3d6141=_0x982836-_0x39fcd7,_0x1dde02+=_0x3d6141*_0x3d6141),_0x48322f+=_0x1dde02;}return _0x48322f;}['_expand'](_0x5f4eaf,_0x4e68a2){pa['add2'](this['getMin'](),_0x5f4eaf),_a['add2'](this['getMax'](),_0x4e68a2),this['setMinMax'](pa,_a);}}const vl=new I(),P0=new I();class xu{constructor(_0x2498fe=new I(),_0x1e5b94=-0x718*0x5+0x13*-0x8b+0x2dc9+0.5){h(this,'center'),h(this,'radius'),(M['assert'](!Object['isFrozen'](_0x2498fe),'The\x20constr'+'uctor\x20of\x20\x27'+'BoundingSp'+'here\x27\x20does'+'\x20not\x20accep'+'t\x20a\x20consta'+'nt\x20(frozen'+')\x20object\x20a'+'s\x20a\x20\x27cente'+'r\x27\x20paramet'+'er'),this['center']=_0x2498fe,this['radius']=_0x1e5b94);}['containsPo'+'int'](_0x4f97f8){const _0xe80572=vl['sub2'](_0x4f97f8,this['center'])['lengthSq'](),_0x205adc=this['radius'];return _0xe80572<_0x205adc*_0x205adc;}['intersects'+'Ray'](_0x399097,_0x12b0f8){const _0x1ccbef=vl['copy'](_0x399097['origin'])['sub'](this['center']),_0x2b3863=_0x1ccbef['dot'](P0['copy'](_0x399097['direction'])['normalize']()),_0x21a3e7=_0x1ccbef['dot'](_0x1ccbef)-this['radius']*this['radius'];if(_0x21a3e7>0x25f5*-0x1+0x1e33+0x7c2&&_0x2b3863>0x1ee9+0x6ca*0x3+-0x3347)return!(-0x281+-0xef9*0x1+0x19*0xb3);const _0x56649b=_0x2b3863*_0x2b3863-_0x21a3e7;if(_0x56649b<0x1*0x3c5+0x393+-0x758)return!(0x1f4b+0x1fee+0x1dc*-0x22);const _0xf7c271=Math['abs'](-_0x2b3863-Math['sqrt'](_0x56649b));return _0x12b0f8&&_0x12b0f8['copy'](_0x399097['direction'])['mulScalar'](_0xf7c271)['add'](_0x399097['origin']),!(0x148b+-0x19d9+-0xe*-0x61);}['intersects'+'BoundingSp'+'here'](_0x1eeea5){vl['sub2'](_0x1eeea5['center'],this['center']);const _0x49d1f8=_0x1eeea5['radius']+this['radius'];return vl['lengthSq']()<=_0x49d1f8*_0x49d1f8;}}class aS{constructor(_0x2857f4=I['UP'],_0x48ac68=-0x2*0x1223+0x9f*-0x14+0x1859*0x2){h(this,'normal',new I()),h(this,'distance'),(this['normal']['copy'](_0x2857f4),this['distance']=_0x48ac68);}['clone'](){const _0x33a6e3=this['constructo'+'r'];return new _0x33a6e3()['copy'](this);}['copy'](_0x14b1fa){return this['normal']['copy'](_0x14b1fa['normal']),this['distance']=_0x14b1fa['distance'],this;}['intersects'+'Line'](_0x30faa7,_0x54ef8b,_0x4c5bb3){const _0x449d7c=this['distance'],_0x4d74b4=this['normal']['dot'](_0x30faa7)+_0x449d7c,_0x4ee8b4=this['normal']['dot'](_0x54ef8b)+_0x449d7c,_0xc40375=_0x4d74b4/(_0x4d74b4-_0x4ee8b4),_0x32289b=_0xc40375>=-0x1150+0xf6f+-0x1e1*-0x1&&_0xc40375<=-0x1782+0x6*0x4ef+-0x617;return _0x32289b&&_0x4c5bb3&&_0x4c5bb3['lerp'](_0x30faa7,_0x54ef8b,_0xc40375),_0x32289b;}['intersects'+'Ray'](_0x19daab,_0x3ae3d5){const _0x16f8ae=this['normal']['dot'](_0x19daab['direction']);if(_0x16f8ae===0x1f3*-0x2+0x1bda+-0x17f4)return!(0xa77+-0x15b5*-0x1+-0x202b);const _0x259763=-(this['normal']['dot'](_0x19daab['origin'])+this['distance'])/_0x16f8ae;return _0x259763>=-0x54*0xc+0x489+-0x99&&_0x3ae3d5&&_0x3ae3d5['copy'](_0x19daab['direction'])['mulScalar'](_0x259763)['add'](_0x19daab['origin']),_0x259763>=-0x22f*0xa+-0x22*-0x4+-0x71a*-0x3;}['normalize'](){const _0x55ef20=(0x1b7b+0x25e6+-0x2*0x20b0)/this['normal']['length']();return this['normal']['mulScalar'](_0x55ef20),this['distance']*=_0x55ef20,this;}['set'](_0x2a79d0,_0x312bcc,_0x5a88f1,_0x15098e){return this['normal']['set'](_0x2a79d0,_0x312bcc,_0x5a88f1),this['distance']=_0x15098e,this;}['setFromPoi'+'ntNormal'](_0x3dfe8e,_0xb9b236){return this['normal']['copy'](_0xb9b236),this['distance']=-this['normal']['dot'](_0x3dfe8e),this;}}class M0{constructor(){h(this,'planes',[]);for(let _0x59503c=0xcf5*-0x1+0x9e8+0xb*0x47;_0x59503c<-0x50f+-0x25e3+0x2af8;_0x59503c++)this['planes'][_0x59503c]=new aS();}['clone'](){const _0x1f58b0=this['constructo'+'r'];return new _0x1f58b0()['copy'](this);}['copy'](_0x3bfe9f){for(let _0x372e74=0xc2f+-0x19*0x89+0x132;_0x372e74<-0xe7f*-0x1+-0x1*-0x41f+-0x1298;_0x372e74++)this['planes'][_0x372e74]['copy'](_0x3bfe9f['planes'][_0x372e74]);return this;}['setFromMat'+'4'](_0x4b5532){const [_0x11a63a,_0x212cdd,_0x4fe8f5,_0x46def3,_0x58ed92,_0x1c5f8b,_0x47f42a,_0x2b4596,_0x4b00c8,_0x52c296,_0x3380e2,_0xaba981,_0x4e8856,_0x4c405d,_0x3a33de,_0x45b8c1]=_0x4b5532['data'],_0x1d9c9d=this['planes'];_0x1d9c9d[-0x139f+-0x385+0xb92*0x2]['set'](_0x46def3-_0x11a63a,_0x2b4596-_0x58ed92,_0xaba981-_0x4b00c8,_0x45b8c1-_0x4e8856)['normalize'](),_0x1d9c9d[-0xb68+-0x642+-0x11ab*-0x1]['set'](_0x46def3+_0x11a63a,_0x2b4596+_0x58ed92,_0xaba981+_0x4b00c8,_0x45b8c1+_0x4e8856)['normalize'](),_0x1d9c9d[0xd66+0x1*-0x904+0x5*-0xe0]['set'](_0x46def3+_0x212cdd,_0x2b4596+_0x1c5f8b,_0xaba981+_0x52c296,_0x45b8c1+_0x4c405d)['normalize'](),_0x1d9c9d[0x240f+0x1de*-0x8+-0x4*0x547]['set'](_0x46def3-_0x212cdd,_0x2b4596-_0x1c5f8b,_0xaba981-_0x52c296,_0x45b8c1-_0x4c405d)['normalize'](),_0x1d9c9d[-0x1813*-0x1+0xc5f+-0x246e]['set'](_0x46def3-_0x4fe8f5,_0x2b4596-_0x47f42a,_0xaba981-_0x3380e2,_0x45b8c1-_0x3a33de)['normalize'](),_0x1d9c9d[0x426+-0x1455*0x1+0x1034]['set'](_0x46def3+_0x4fe8f5,_0x2b4596+_0x47f42a,_0xaba981+_0x3380e2,_0x45b8c1+_0x3a33de)['normalize']();}['containsPo'+'int'](_0x4a5bd4){for(let _0x56d67b=0xf*-0x1b+-0x29*0xda+0x247f;_0x56d67b<-0x2*-0x6ad+-0x2586*0x1+0x1832;_0x56d67b++){const {normal:_0x279e44,distance:_0x353848}=this['planes'][_0x56d67b];if(_0x279e44['dot'](_0x4a5bd4)+_0x353848<=-0x244f+0x1ba9+-0x2e2*-0x3)return!(-0x25ac+0x1*-0x61+-0x1*-0x260e);}return!(-0x35c+-0x3e*0x8f+-0x3*-0xcaa);}['containsSp'+'here'](_0x24e8b7){const {center:_0x32d7c7,radius:_0x3e2c1d}=_0x24e8b7;let _0x3558f4=0x1*0x1f79+-0x1654+0x925*-0x1;for(let _0x1e385e=0x6*0x300+0x810+-0x1a10;_0x1e385e<0x2*-0x109d+-0x5*0x579+-0x3c9d*-0x1;_0x1e385e++){const {normal:_0x337153,distance:_0x26c621}=this['planes'][_0x1e385e],_0xdfb066=_0x337153['dot'](_0x32d7c7)+_0x26c621;if(_0xdfb066<=-_0x3e2c1d)return-0x8e+0xd8*0xb+-0x8ba;_0xdfb066>_0x3e2c1d&&_0x3558f4++;}return _0x3558f4===0x1f*0x12a+-0x87d*0x1+0x1*-0x1b93?-0x1*0x1854+0x35*0x17+0x1393*0x1:-0x336*0x6+0xa22*-0x3+0x1*0x31ab;}}class cf{constructor(_0x5cedb1,_0x1009ec){h(this,'origin',new I()),h(this,'direction',I['FORWARD']['clone']()),(_0x5cedb1&&this['origin']['copy'](_0x5cedb1),_0x1009ec&&this['direction']['copy'](_0x1009ec));}['set'](_0xddbc86,_0xe076f7){return this['origin']['copy'](_0xddbc86),this['direction']['copy'](_0xe076f7),this;}['copy'](_0x5d4596){return this['set'](_0x5d4596['origin'],_0x5d4596['direction']);}['clone'](){return new this['constructo'+'r'](this['origin'],this['direction']);}}const pt=-0xfb8+-0xb60+0x1b18,ue=0x117d*0x2+-0x1432+-0xec7,Tu=0xc96+-0x1c44+-0x1*-0xfb0,wu=0x1*0x2011+0x1*0x1b45+0x23*-0x1b2,Dt=-0x12ff*0x1+0x1d89*-0x1+0x3089,I0=0x2620+-0x680+0x6*-0x545,nS=0x45*-0x3d+-0x1*-0x24c3+0x1*-0x144e,D0=-0x1928+0x1e8d+0x158*-0x4,yc=0x11fa+0x1c5e*0x1+0x7*-0x69e,vc=0x1*0x1857+0xc2*-0x10+-0xc2f,as=0x3b*0xa7+-0x1ba1+-0xadc,L0=-0xb47+0x622+0x1*0x527,R0=0x1355+0x101d+-0x236f,O0=-0x269c+0x97*0x23+-0x1*-0x11fb,ls=-0x25dd+-0x20c1+0x469e,Mh=-0xd0a+0x571+0x79a,oS=-0x1683+-0xa69*-0x1+-0x26c*-0x5,F0=0x1d9f+0x1cea+-0x552*0xb,bo=-0xa47+0x1*-0xcfc+-0x2*-0xba2,Co=0xd*-0x2ba+0x1872+0xb02,Ih=-0x1279*0x1+-0x11a9+0x2426,xt=0x49*0x24+0x2210+0x162a*-0x2,Jr=0x71*0x4+-0x5b0+0x3ed,mo=0x1168*0x1+0x222b*0x1+-0x3391,N0=0x1*0xcde+-0x2437*0x1+0x256*0xa,Te=-0x17d8+-0x1*0x1cc9+0x34a1,_t=-0x63d*0x1+-0x1*-0x23fb+-0x1*0x1dbd,xc=-0xcb3+0x26a9+0x97*-0x2c,Tc=0x760+-0x35*0x6b+0x765*0x2,wc=0x53*0x2d+0x1d1a+-0x2bad,ea=0xf1a+0x1c1*0xd+0x1*-0x25e2,k0=0x132*0xc+-0x4*0x43c+0x1*0x298,Dh=-0xf38+0x123e*-0x2+0x1*0x33b5,Lh=0x249b+0xf3f*0x2+-0x5*0xd6b,df=-0x19ba+-0x1*0x22b5+0x3c72,U0=-0x25f2*0x1+0x7*-0x29d+0x3841,B0=0x2*-0x10e1+0x1171+0x1056,z0=-0x3ea*-0x2+0x2344+-0x2*0x1589,Ni=-0x1cde+-0x144c+0x3131,ff=0x2*0x865+0x473*-0x2+0x3f2*-0x2,zi=-0x17f7+-0x1*0x74f+0x1*0x1f47,hr=0x33e+0x133*-0x13+-0x3e9*-0x5,lS=0x95*-0x3d+-0x4*-0x194+0x1d31,hS=-0x147b+0x22c3+0x2b*-0x55,Eu=-0xc89+0x3b1+0x8da,Ec=0xec3+-0x2c6+-0x1b6*0x7,Au=-0x146b+0x1*-0x1126+0x2595,Ac=-0x1780+0x1*-0x44f+0x1bd4,ur=0x3c6+0x2*0xe12+-0xd*0x274,Oe=0x2680+0x8b9+-0x7*0x6be,bc=-0x1*0x8cb+0x1a07+0x2*-0x89a,bu=0x259e+-0x2435+-0x160,Yo=0x1ac8+0x1157+-0x2c15,ri=0x114+-0xed+-0x1c,at=0x2*-0x85d+-0xcb3*-0x1+0x1*0x413,je=-0x7*-0x11f+-0x3*0x983+0x14bd*0x1,Bt=0x14*-0x13+0x1008+-0xe7e,Hi=0x2*-0x269+0x2285+-0xe*0x21e,ki=0x119f*-0x1+-0x1e61+0x3010,Cc=-0x1*0xdfb+-0x19f*-0x15+-0x13ff,pn=-0x5*-0x15c+0x11*-0x1a+-0x500,Cu=0xb65*-0x3+0x2f*0xb3+-0x7*-0x33,hs=0xaec+-0x12d4+0x7fc,Pc=0x1*0x1f62+-0x225d+0x7*0x70,Pu=-0x77f+-0x17eb+0xfc0*0x2,Mu=-0x1*-0x15a1+0x202c+-0x35b6,Ko=-0x19dd+-0x1*-0x138d+0x668,Zo=-0x1df1+-0x2d5*0x9+0x5*0xb1b,Mc=-0x1*0xf19+-0x14ee+0x1*0x2421,Ic=-0xdcc+0x15*0x5+0xd7e*0x1,cS=0x1a5d+-0x1*-0x1691+-0x30d2,dS=-0xa30+-0x1*-0xf3d+0x4*-0x13c,fS=0x1b*0x136+-0x1ab6+0x2ef*-0x2,uS=-0x21c*0x11+0x10f*0x2+-0x21dd*-0x1,Iu=-0x10*0x80+-0x16a1+0x1ec1,mS=-0x57d+0xbdb*-0x2+0x1d54,Du=-0x1*0x2232+-0x2*-0x49d+0xc8d*0x2,Lu=0x1*0x212d+0xa93*-0x1+-0x1677,Ru=-0x204+0x4*-0x185+0x83c,Vi=-0x25b3+0x12ce+0x1*0x130a,Ou=0xdd*-0x1a+-0x671*-0x2+0x9b6,pS=0x1033*-0x2+-0x1ce+0x225b*0x1,Fu=0x773+0xb*0x353+-0x2bdc,Nu=0x9bd*0x3+-0x661+-0x16ad,ku=-0x605+0x1*-0x207d+0x26ac,Uu=-0x1*-0xca5+0x295*-0x1+-0x11*0x95,Bu=-0xc37*0x1+0xd1c+-0xb9,_S=0x1597+-0x2032+-0x2e*-0x3c,zu=0x3a*-0x77+0x2114+-0x5f0,Dc=-0x164a*-0x1+0x2500*-0x1+0xee5,Vu=-0x527+-0x2*-0x5c8+-0xb1*0x9,Ne=0x8f7+0x2665*-0x1+-0x1d9f*-0x1,Lc=0x4*-0x163+0x6fa+-0x13c,Gu=-0x2082+-0x5*0x740+0x1*0x44f5,Hu=-0xe5*-0x8+-0x21f2+0x1afe,Wu=0xdd1+-0x1727*-0x1+-0x24c3,uf=-0x2695+0x9*0x8e+-0x11*-0x1fd,mf=-0x194d+-0xd7*0xd+0x246f,pf=-0x2078*-0x1+-0xed+-0x1f53,_f=-0x12*0x83+0x227c+-0x1909,gf=-0x16d7*0x1+-0x1*-0x150b+-0x6*-0x57,Sf=-0x981*-0x3+-0x95*0x35+0x295,gS=-0x499*-0x1+0x1*0x2653+-0x2aac,SS=-0x2134+0x1*0x15c3+0xbb2,yS=-0xe3*0x6+0x201d+-0x1a89,vS=0x1edd+-0x1*-0x1286+-0x3120,yf=0x192+0x1*0x2639+0x1*-0x2787,an=-0x1*0x1b22+-0x367+0x1ece,Lt=new Map([[lS,{'name':'A8','size':0x1,'ldr':!(-0x3*-0x43a+0xcda+0x1988*-0x1)}],[Hu,{'name':'R8','size':0x1,'ldr':!(0x1*0x1b0b+-0xf2d*-0x2+-0x3965)}],[hS,{'name':'L8','size':0x1,'ldr':!(0x12*-0x47+0x9*-0x413+0x29a9)}],[Eu,{'name':'LA8','size':0x2,'ldr':!(0x1b66+0x131a+-0x80*0x5d)}],[Wu,{'name':'RG8','size':0x2,'ldr':!(0x17ec*-0x1+-0x19e0+0x31cc*0x1)}],[Ec,{'name':'RGB565','size':0x2,'ldr':!(-0x13*-0x109+-0x33*0x80+0x5d5)}],[Au,{'name':'RGBA5551','size':0x2,'ldr':!(0x23ac+-0x7*0x413+0x727*-0x1)}],[Ac,{'name':'RGBA4','size':0x2,'ldr':!(0x15bd+-0x1711*-0x1+-0x9b*0x4a)}],[ur,{'name':'RGB8','size':0x4,'ldr':!(0x1*0x72b+-0x1a0+-0x58b)}],[Oe,{'name':'RGBA8','size':0x4,'ldr':!(0x16ff+-0x4*0x202+0x4fd*-0x3),'srgbFormat':hs}],[Lc,{'name':'R16F','size':0x2}],[Gu,{'name':'RG16F','size':0x4}],[ri,{'name':'RGB16F','size':0x8}],[at,{'name':'RGBA16F','size':0x8}],[je,{'name':'RGB32F','size':0x10}],[Bt,{'name':'RGBA32F','size':0x10}],[Hi,{'name':'R32F','size':0x4}],[ki,{'name':'DEPTH','size':0x4}],[an,{'name':'DEPTH16','size':0x2}],[Cc,{'name':'DEPTHSTENC'+'IL','size':0x4}],[pn,{'name':'111110F','size':0x4}],[Cu,{'name':'SRGB8','size':0x4,'ldr':!(-0x24bd+-0x1abb+0x3f78),'srgb':!(0x12b0+0x643+-0x18f3)}],[hs,{'name':'SRGBA8','size':0x4,'ldr':!(-0x14*0x166+0x18f8+0x300),'srgb':!(0x1c72+0x446+0x82e*-0x4)}],[uS,{'name':'BGRA8','size':0x4,'ldr':!(0x183+-0x11*0x166+0x1*0x1643)}],[gS,{'name':'SBGRA8','size':0x4,'ldr':!(-0xa19+0x1fc7+0x19*-0xde),'srgb':!(-0x16ac+0x1*-0xc5f+0x230b)}],[bc,{'name':'DXT1','blockSize':0x8,'ldr':!(0x434+-0x1e2b+0x121*0x17),'srgbFormat':uf}],[bu,{'name':'DXT3','blockSize':0x10,'ldr':!(-0x65*-0x37+-0x6*0x224+0x1*-0x8db),'srgbFormat':mf}],[Yo,{'name':'DXT5','blockSize':0x10,'ldr':!(-0xe9*-0x4+-0x1*0x1c13+0xf*0x1a1),'srgbFormat':pf}],[Pc,{'name':'ETC1','blockSize':0x8,'ldr':!(0x2296+0x259a+0x30*-0x181)}],[Pu,{'name':'ETC2_RGB','blockSize':0x8,'ldr':!(0x38f+-0x2*-0xb51+-0x1a31),'srgbFormat':_f}],[Mu,{'name':'ETC2_RGBA','blockSize':0x10,'ldr':!(0xf75+-0xc33+0x116*-0x3),'srgbFormat':gf}],[Ko,{'name':'PVRTC_2BPP'+'_RGB_1','ldr':!(0x100d*0x1+-0xd*-0x61+0x3*-0x6fe),'blockSize':0x8}],[Zo,{'name':'PVRTC_2BPP'+'_RGBA_1','ldr':!(-0x1a03+-0x5f3+0x1*0x1ff6),'blockSize':0x8}],[Mc,{'name':'PVRTC_4BPP'+'_RGB_1','ldr':!(0x8*-0x62+-0xe41+0x1151),'blockSize':0x8}],[Ic,{'name':'PVRTC_4BPP'+'_RGBA_1','ldr':!(-0x203c+-0x36e*0x8+-0x2*-0x1dd6),'blockSize':0x8}],[cS,{'name':'ASTC_4x4','blockSize':0x10,'ldr':!(0x877*-0x4+0x1163+-0x1079*-0x1),'srgbFormat':Sf}],[dS,{'name':'ATC_RGB','blockSize':0x8,'ldr':!(-0x4f*0x5+0x3f*-0x5d+0x186e*0x1)}],[fS,{'name':'ATC_RGBA','blockSize':0x10,'ldr':!(-0x1*0x1816+0x1b1e+-0x308)}],[SS,{'name':'BC6H_RGBF','blockSize':0x10}],[yS,{'name':'BC6H_RGBUF','blockSize':0x10}],[vS,{'name':'BC7_RGBA','blockSize':0x10,'ldr':!(-0x1*0x1286+-0x56*-0x6f+0x2*-0x962),'srgbFormat':yf}],[uf,{'name':'DXT1_SRGB','blockSize':0x8,'ldr':!(0x531*0x4+-0x1*0x1a53+-0x1*-0x58f),'srgb':!(0x1f39+0x2457+-0x4390)}],[mf,{'name':'DXT3_SRGBA','blockSize':0x10,'ldr':!(0x1f44+0x83*0x24+-0x350*0xf),'srgb':!(0x9e*0x3d+0x3*-0x417+-0x1961)}],[pf,{'name':'DXT5_SRGBA','blockSize':0x10,'ldr':!(-0x1ca2+-0x1540+-0x2*-0x18f1),'srgb':!(0x3e5*0x2+-0xca9+-0x4df*-0x1)}],[_f,{'name':'ETC2_SRGB','blockSize':0x8,'ldr':!(-0x196+-0x39f*0x1+0x535*0x1),'srgb':!(-0xc82+0x27*-0x51+0x18d9)}],[gf,{'name':'ETC2_SRGBA','blockSize':0x10,'ldr':!(-0x1eaa+-0x1ff0+-0x6*-0xa6f),'srgb':!(-0x172b+0x612*-0x5+-0x3*-0x11d7)}],[Sf,{'name':'ASTC_4x4_S'+'RGB','blockSize':0x10,'ldr':!(0x22bc+-0xde0+-0x14dc),'srgb':!(-0x1310+-0xa6*0x34+0x34c8)}],[yf,{'name':'BC7_SRGBA','blockSize':0x10,'ldr':!(0x4be+-0x1436+0xf78),'srgb':!(-0x2326+-0x1579+0x41*0xdf)}],[Iu,{'name':'R8I','size':0x1,'isInt':!(-0xb50+-0x1*-0x100d+-0x4bd)}],[mS,{'name':'R8U','size':0x1,'isInt':!(-0x5*0x797+-0x7*0x197+0x3114)}],[Du,{'name':'R16I','size':0x2,'isInt':!(0x10e7*0x2+-0x21*0x95+-0xe99)}],[Lu,{'name':'R16U','size':0x2,'isInt':!(0xb66*-0x3+-0x49*0x1f+-0x1*-0x2b09)}],[Ru,{'name':'R32I','size':0x4,'isInt':!(0x1a5*0x3+-0xcf1+0x802)}],[Vi,{'name':'R32U','size':0x4,'isInt':!(-0x1a09+0x152a+-0x2b*-0x1d)}],[Ou,{'name':'RG8I','size':0x2,'isInt':!(-0xc75+0x5*0x9e+-0x95f*-0x1)}],[pS,{'name':'RG8U','size':0x2,'isInt':!(0xed1*-0x1+0xd6*-0x29+-0x105d*-0x3)}],[Fu,{'name':'RG16I','size':0x4,'isInt':!(-0x960+-0x37*0x7d+-0xaf*-0x35)}],[Nu,{'name':'RG16U','size':0x4,'isInt':!(-0xb+0x1c76+-0x1c6b)}],[ku,{'name':'RG32I','size':0x8,'isInt':!(-0x39*0x7f+-0x565*-0x5+-0x2*-0xa7)}],[Uu,{'name':'RG32U','size':0x8,'isInt':!(-0x1f4f+0x1c62+0x2ed)}],[Bu,{'name':'RGBA8I','size':0x4,'isInt':!(0x172d+0x141b+0x2*-0x15a4)}],[_S,{'name':'RGBA8U','size':0x4,'isInt':!(0x12ed+0xca*-0x1+-0x1223)}],[zu,{'name':'RGBA16I','size':0x8,'isInt':!(-0x1b62+0x4*0x232+-0x1*-0x129a)}],[Dc,{'name':'RGBA16U','size':0x8,'isInt':!(0xb9d+-0xa61*0x3+0x1386*0x1)}],[Vu,{'name':'RGBA32I','size':0x10,'isInt':!(0x185*-0x12+-0x1223+0x89*0x55)}],[Ne,{'name':'RGBA32U','size':0x10,'isInt':!(-0x15d*0x3+-0xde5+0x11fc)}]]),V0=_0x3093d5=>{var _0x458fcd;return((_0x458fcd=Lt['get'](_0x3093d5))==null?void(0xc*-0x47+-0x7f2+0xb46):_0x458fcd['blockSize'])!==void(0x1abf+-0x554+-0x156b);},Rh=_0x5ef92c=>{var _0x450fd5;return((_0x450fd5=Lt['get'](_0x5ef92c))==null?void(-0x1*-0x3b0+-0x10e+0x1*-0x2a2):_0x450fd5['srgb'])===!(-0x3*0xbf1+-0x2f5*-0xb+0x2*0x1a6);},Ya=_0x1bb688=>{var _0x19cf13;return((_0x19cf13=Lt['get'](_0x1bb688))==null?void(-0xcf3+0x1b97+-0xea4):_0x19cf13['isInt'])===!(-0x4b6*-0x6+-0x1396+-0x8ae);},Rc=_0x46c50c=>{var _0x20d609;return((_0x20d609=Lt['get'](_0x46c50c))==null?void(-0x9ff+-0xd21*0x1+0x1720):_0x20d609['srgbFormat'])||_0x46c50c;},G0=_0x2811cd=>{for(const [_0x4f3561,_0x4548e7]of Lt)if(_0x4548e7['srgbFormat']===_0x2811cd)return _0x4f3561;return _0x2811cd;},xS=_0x1b8f69=>{const _0x11cc59=Lt['get'](_0x1b8f69);return!!(_0x11cc59!=null&&_0x11cc59['ldr']&&!(_0x11cc59!=null&&_0x11cc59['srgb']));},TS=_0x3b5883=>{switch(_0x3b5883){case Hi:case je:case Bt:return Float32Array;case Ru:case ku:case Vu:return Int32Array;case Vi:case Uu:case Ne:return Uint32Array;case Du:case Fu:case zu:return Int16Array;case Wu:case Lu:case Nu:case Dc:case Ec:case Au:case Ac:case Lc:case Gu:case ri:case at:return Uint16Array;case Iu:case Ou:case Bu:return Int8Array;default:return Uint8Array;}},Oc=-0xdff*-0x1+0x6c1+0xa6*-0x20,Fc=0x2*-0x121b+-0x1a9c+-0x1*-0x3ed3,wS=0x1049+0x1653+-0x269a,ES=0x47f*-0x1+0x1246+-0xdc4,zs=-0x3*-0xc3d+-0x1*-0xb4e+0x1*-0x3001,cr=0xdb7*-0x2+-0x1*-0x4c1+0x16b2,$r=0xd62+0x24*0x13+-0x1008,Pe='POSITION',cs='NORMAL',ci='TANGENT',li='BLENDWEIGH'+'T',ns='BLENDINDIC'+'ES',kt='COLOR',tp='TEXCOORD',Yt='TEXCOORD0',da='TEXCOORD1',Qo='TEXCOORD2',Jo='TEXCOORD3',el='TEXCOORD4',tl='TEXCOORD5',sl='TEXCOORD6',il='TEXCOORD7',vf='ATTR0',Oh='ATTR1',$u='ATTR2',Xu='ATTR3',qu='ATTR4',H0='ATTR5',W0='ATTR6',$0='ATTR7',Po='ATTR8',Mo='ATTR9',X0='ATTR10',ju='ATTR11',Yu='ATTR12',Fh='ATTR13',Ku='ATTR14',_n='ATTR15',AS=-0x12a*-0xe+-0x5d9*0x5+-0x2*-0x679,nn=-0x1d7a+0xa83+0x12f7,q0=0x17*0x177+0x85*0x1d+0x104*-0x30,j0=-0x16c3+-0x3bf+0x1a85,Y0=-0x26a8*0x1+-0xebc+0xb*0x4db,xl=-0x13de+0x23fb+-0x101d,bS=0x24*0x29+0x13e*-0x1d+0x1*0x1e43,rd=0x4*-0x6a+0x8f8+-0x74e,di='default',ta='rgbm',Nh='rgbe',Io='rgbp',Zu='swizzleGGG'+'R',xf=-0x1*0x2653+0x18be*0x1+0xd96,mr=0x1f2f+0x11*-0x1f2+-0x1e5*-0x1,CS=0x1671+-0x2509+0x1*0xe9b,PS='2d',K0=0x1547+0x6bb+0x1e*-0xef,Z0='none',Tf='cube',sp='equirect',Q0='octahedral',ze='glsl',st='wgsl',Nc=0xb98*0x1+-0x254*0xc+0x82c*0x2,Xr=0x38*-0x80+-0x11*0x185+0x35d6,kc=-0x4e5*-0x5+-0x14b4+-0x3c3,rl=0x1*-0x1843+-0xa3*0x24+0x1*0x2f32,MS=0x10*-0x6f+-0x3*-0x601+-0xb0f,Do=0x12*-0xb2+0x16e0+-0xa57,Be=-0x95*-0x12+-0x5b0*-0x3+-0x1b84,on=0x1066+0x147f+-0x24e5,sa=0x184*0xd+-0xf17*0x1+-0xa*0x76,Us=0x9*-0xde+-0x88d*0x2+0x427*0x6,ia=-0x5e5+-0x1*0x1f1e+0x7*0x54a,rs=-0x1c29+0x59f*-0x3+-0xa*-0x481,gn=0xe+-0x3*-0xbe1+0x6*-0x5f2,qr=0x19e*-0xe+0x97b+-0x5*-0x2a3,jr=0x7eb*0x1+0x759+-0xf3d,Yr=0x421+0x3*0xa5b+-0x232a,Lo=-0xffb*0x1+-0xcd*-0xb+0x7b*0xf,Ro=0x1d06+0x1b6+-0x1eb2,Oo=0x1d1*-0xc+-0x1*0x21f3+0x37ca,kh=0x1e3*0x5+0x1*0x1eb7+0x281a*-0x1,Sn=-0x9f9+-0x1512+0x1f18,Js=-0x3*0x22d+0x1*0x1de8+-0x1753,J0=0x20e2+0x4*-0x697+-0x14b*0x5,ex=0x1ab9+0x25c8+0x263*-0x1b,Uc=0x17b*0x7+0x17*0xef+-0x1fc5,tx=0x1*-0x24e1+-0x432+0x3*0xdb7,sx=-0x3f2+0x2*0x353+0x1*-0x2a1,ix=-0x932+0x1*-0x189f+0x21e5,Bc=0x5d*-0x10+0x2019+-0x1a34,zc=0x25c4+0x1d38+-0x42e6,Qu=-0x19f*-0xf+-0x1*-0x1657+-0x2e91,IS=-0x15db+0x1*0x24fb+-0x1e1*0x8,rx=0x52b+-0x222b+-0x23d*-0xd,yn=-0x1fd7+0x16ad+0x944,vn=0x5f*0x4c+0x1000+-0x2c19*0x1,xn=0x3*-0xa0f+-0x16d*0x7+0x35b*0xc,Tn=0x1654*-0x1+-0x6*0xd9+0x1b87,wn=0x16f*-0x4+-0xd1c+0x12f6,Vc=0x1346+-0x35*0x43+-0x2a4*0x2,Gc=0x1b7d+0x2*0xc73+-0x3443,En=-0x40*0x40+-0x1ca*0x2+0x13b5,Hc=0x2*-0x107b+0x1*0x43c+0x1cdc,Wc=-0x10d*-0xd+0xff6+-0xc*0x275,An=-0xe7f+-0x76*0x3d+0x2ac1,$c=0xd*0x5b+0x4cc*-0x1+-0x1*-0x52,Xc=-0x11*0x213+0x1a7a+0x8ef,Uh=0x35*0x6d+-0x1106+-0x564,Ju=0x13e4+0x1*0x673+-0x1a2f,em=0x3ad*0x7+-0x484*0x8+-0x2*-0x547,ax=0x70+0x1*0x5e3+0x13*-0x53,nx=-0x100e+-0x10*-0x22d+-0x1*0x1297,ox=-0x189+0x9a7+-0x6*0x153,lx=0x22b2+-0x1c26+0x1*-0x65f,hx=0x4f*0x59+-0xf4+-0x1a55,cx=0x9*0x242+0x59*0x43+-0x2b6e,dx=-0x1c48+0x21b9+-0x541*0x1,fx=0x7f*-0x28+-0xad3+0xa*0x316,DS=['bool','int','float','vec2','vec3','vec4','ivec2','ivec3','ivec4','bvec2','bvec3','bvec4','mat2','mat3','mat4','sampler2D','samplerCub'+'e','','sampler2DS'+'hadow','samplerCub'+'eShadow','sampler3D','','','','','sampler2DA'+'rray','uint','uvec2','uvec3','uvec4','','','','','','','','','','','','','isampler2D','usampler2D','isamplerCu'+'be','usamplerCu'+'be','isampler3D','usampler3D','isampler2D'+'Array','usampler2D'+'Array'],ux=[['bool'],['i32'],['f32'],['vec2f','vec2<f32>'],['vec3f','vec3<f32>'],['vec4f','vec4<f32>'],['vec2i','vec2<i32>'],['vec3i','vec3<i32>'],['vec4i','vec4<i32>'],['vec2<bool>'],['vec3<bool>'],['vec4<bool>'],['mat2x2f','mat2x2<f32'+'>'],['mat3x3f','mat3x3<f32'+'>'],['mat4x4f','mat4x4<f32'+'>'],['texture_2d'+'<f32>'],['texture_cu'+'be<f32>'],['array<f32>'],['texture_de'+'pth_2d'],['texture_de'+'pth_cube'],['texture_3d'+'<f32>'],['array<vec2'+'<f32>>'],['array<vec3'+'<f32>>'],['array<vec4'+'<f32>>'],['array<mat4'+'x4<f32>>'],['texture_2d'+'_array<f32'+'>'],['u32'],['vec2u','vec2<u32>'],['vec3u','vec3<u32>'],['vec4u','vec4<u32>'],['array<i32>'],['array<u32>'],['array<bool'+'>'],['array<vec2'+'i>','array<vec2'+'<i32>>'],['array<vec2'+'u>','array<vec2'+'<u32>>'],['array<vec2'+'b>','array<vec2'+'<bool>>'],['array<vec3'+'i>','array<vec3'+'<i32>>'],['array<vec3'+'u>','array<vec3'+'<u32>>'],['array<vec3'+'b>','array<vec3'+'<bool>>'],['array<vec4'+'i>','array<vec4'+'<i32>>'],['array<vec4'+'u>','array<vec4'+'<u32>>'],['array<vec4'+'b>','array<vec4'+'<bool>>'],['texture_2d'+'<i32>'],['texture_2d'+'<u32>'],['texture_cu'+'be<i32>'],['texture_cu'+'be<u32>'],['texture_3d'+'<i32>'],['texture_3d'+'<u32>'],['texture_2d'+'_array<i32'+'>'],['texture_2d'+'_array<u32'+'>']],mx=new Map();ux['forEach']((_0x4eeeab,_0x5252be)=>{_0x4eeeab['forEach'](_0x2036d9=>mx['set'](_0x2036d9,_0x5252be));});const px='webgl2',tm=-0x15d6+-0x1*-0x12be+0x319,LS=-0x26da*0x1+-0x3*-0x313+0x34b*0x9,_x=0x1*-0x17b0+0x33e*0x3+0xdfa,gx='ldr',RS=0x15d2+-0x199e+0x3cd,OS=0x2206+-0x156b*0x1+-0xc99,FS=0x18d*0x13+-0x1a3e*-0x1+-0x10d*0x35,NS=-0x21ee*-0x1+-0x1fd0+-0x216,kS=-0xe72*-0x2+-0x2*-0x10bb+-0x3e4a,US=-0x2e5+-0x71*-0x2+0x223,BS=0x144b+-0xa0f+-0x9fc,zS=-0x2+-0x1f7a+0x1ffc,Sx=-0x1*0x1bb8+0xc0*0xc+0x1*0x13b7,Fo=-0x59*0x53+-0x10*0x9b+-0x1*-0x268b,VS=0x1bd+-0x74*0x52+0x236c,wf=0x1dd9+-0x656*-0x2+0x1*-0x2a83,sm='default',ln=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Uint16Array],po=[0x4c7+-0x17*0x156+-0x16*-0x12e,0x1*-0x250c+-0x1ac2+-0x63*-0xa5,0x1cfe+0x146*0x5+0x32*-0xb5,-0x2bc+0x673*-0x1+0x931,-0x552+-0x98+0x5ee*0x1,-0xe*-0x104+0x56*0x6a+-0x31d0,-0x449*-0x3+0x1*-0x1304+0x62d,0x4*0x1d2+0x2*-0x6f2+-0x9a*-0xb],yx=['INT8','UINT8','INT16','UINT16','INT32','UINT32','FLOAT32','FLOAT16'],Bh=[Uint8Array,Uint16Array,Uint32Array],vx=[0x21cb*0x1+0x211*0x4+-0x2a0e,0x1f5+-0x481+0x28e,-0x413+0x20af+-0x3c*0x7a],GS=new Map([['float','f32'],['vec2','vec2f'],['vec3','vec3f'],['vec4','vec4f'],['int','i32'],['ivec2','vec2i'],['ivec3','vec3i'],['ivec4','vec4i'],['uint','u32'],['uvec2','vec2u'],['uvec3','vec3u'],['uvec4','vec4u']]),De={};De[Pe]=-0x34f+0xfce+-0xc7f*0x1,De[cs]=0x25cd+0x1*0x1c+-0x25e8,De[li]=0x1039+-0x12a+-0xf0d,De[ns]=0x270a+0x2118+-0x481f,De[kt]=-0x6*-0x1a5+0x9*-0x3e5+-0x1*-0x1933,De[Yt]=0x1cba+-0x140d+0x454*-0x2,De[da]=0x1*-0xb87+-0x97c+0x1509,De[Qo]=0x538*0x7+-0x7ef+-0x1c92,De[Jo]=0x18c7+-0x13ef+0x16*-0x38,De[el]=-0x307*-0x5+-0x1543+0x629,De[tl]=0x95*0x41+-0x13d7+-0x11f4,De[sl]=-0x13ac+0x2374+-0xfbd,De[il]=0xb46+0x1*0xd8d+0x18c7*-0x1,De[ci]=-0x2003+-0x8b*-0x43+-0x451,De[vf]=-0xc04*-0x3+-0xb64+0x6*-0x41c,De[Oh]=-0x6c3+0x24c+0x478,De[$u]=0x20b*0x9+-0x1dac+-0x1*-0xb4b,De[Xu]=-0x1349+0x1a3a+-0x6ee,De[qu]=-0x267d+-0x200a+0x468b,De[H0]=-0x214a+0x89*-0x2f+0x3a76,De[W0]=0x27*0x11+0x2359+0x17*-0x1a6,De[$0]=0x181f*-0x1+0x1a52+-0x2*0x116,De[Po]=0x1aa9+-0x295*0xd+0x6f0,De[Mo]=-0x2*-0x10a6+0x48b*-0x2+-0x1*0x182d,De[X0]=-0x1*-0x14c3+-0x1d92+0x8d9,De[ju]=-0x4*-0x17c+-0x3ee+-0x1f7,De[Yu]=-0x105*0x13+-0x2*-0xba8+-0x3e5,De[Fh]=0x19*0x3d+0x2379+-0x2961,De[Ku]=-0x843+-0xaa5*0x1+0x12f6,De[_n]=-0xad*-0x11+-0x164c+-0x2*-0x56f;const tr=class tr{static['clearGpuMa'+'rkers'](){tr['markers']['length']=0x1a32+0xa95+-0x10d*0x23;}static['pushGpuMar'+'ker'](_0x226d82,_0x5b0ae4){tr['markers']['push'](_0x5b0ae4),_0x226d82['pushMarker'](_0x5b0ae4);}static['popGpuMark'+'er'](_0x5b3f32){tr['markers']['length']&&tr['markers']['pop'](),_0x5b3f32['popMarker']();}static['toString'](){return tr['markers']['join']('\x20|\x20');}};h(tr,'markers',[]);let Q=tr,xx=-0x13b4+-0x1750*-0x1+0xc*-0x4d;class qc{constructor(_0x2c32e1,_0x4ae095){h(this,'slot',-(-0x1634+-0x79f+0x1dd4)),h(this,'scopeId',null),(this['name']=_0x2c32e1,this['visibility']=_0x4ae095);}}class im extends qc{}class Tx extends qc{constructor(_0x250508,_0x452476,_0xc1b15c=!(-0x1c96+-0x761*-0x1+-0x1*-0x1536)){super(_0x250508,_0x452476),h(this,'format',''),(this['readOnly']=_0xc1b15c,M['assert'](_0xc1b15c||!(_0x452476&tm),'Storage\x20bu'+'ffer\x20can\x20o'+'nly\x20be\x20use'+'d\x20in\x20read-'+'only\x20mode\x20'+'in\x20SHADERS'+'TAGE_VERTE'+'X.'));}}class ip extends qc{constructor(_0xf45bb5,_0x4f0e64,_0x2d075b=PS,_0x5753fa=K0,_0x6d7b91=!(-0xfb5*-0x1+-0x23b8+-0x1403*-0x1),_0x3de697=null){super(_0xf45bb5,_0x4f0e64),this['textureDim'+'ension']=_0x2d075b,this['sampleType']=_0x5753fa,this['hasSampler']=_0x6d7b91,this['samplerNam'+'e']=_0x3de697??_0xf45bb5+'_sampler';}}(function(){const _0x314154=function(){let _0x44a90d;try{_0x44a90d=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x492e6f){_0x44a90d=window;}return _0x44a90d;},_0x5eac83=_0x314154();_0x5eac83['setInterva'+'l'](_0x5eeb62,0x35*0x45+0x1a3*-0x1+0x2*0x17d);}());class wx extends qc{constructor(_0xa916e8,_0x29f154=Oe,_0x4aa18c=PS,_0x5ae488=!(-0x31*-0x39+0x1c2c+-0x2715),_0x2ea256=!(-0xa2a+-0x661*0x3+0x3e*0x79)){super(_0xa916e8,_x),this['format']=_0x29f154,this['textureDim'+'ension']=_0x4aa18c,this['write']=_0x5ae488,this['read']=_0x2ea256;}}class HS{constructor(_0x16ff08,_0x5036e7){h(this,'uniformBuf'+'ferFormats',[]),h(this,'textureFor'+'mats',[]),h(this,'storageTex'+'tureFormat'+'s',[]),h(this,'storageBuf'+'ferFormats',[]),(this['id']=xx++,ca['setName'](this,'BindGroupF'+'ormat_'+this['id']),M['assert'](_0x5036e7));let _0x3a4ad8=0x18aa+-0x25f9+0xd4f;_0x5036e7['forEach'](_0x1c405c=>{_0x1c405c['slot']=_0x3a4ad8++,_0x1c405c instanceof ip&&_0x1c405c['hasSampler']&&_0x3a4ad8++,_0x1c405c instanceof im?this['uniformBuf'+'ferFormats']['push'](_0x1c405c):_0x1c405c instanceof ip?this['textureFor'+'mats']['push'](_0x1c405c):_0x1c405c instanceof wx?this['storageTex'+'tureFormat'+'s']['push'](_0x1c405c):_0x1c405c instanceof Tx?this['storageBuf'+'ferFormats']['push'](_0x1c405c):M['assert']('Invalid\x20bi'+'nd\x20format',_0x1c405c);}),this['device']=_0x16ff08;const _0x36a561=_0x16ff08['scope'];this['bufferForm'+'atsMap']=new Map(),this['uniformBuf'+'ferFormats']['forEach']((_0x19a16b,_0x541282)=>this['bufferForm'+'atsMap']['set'](_0x19a16b['name'],_0x541282)),this['textureFor'+'matsMap']=new Map(),this['textureFor'+'mats']['forEach']((_0x15e3fe,_0x96b614)=>{this['textureFor'+'matsMap']['set'](_0x15e3fe['name'],_0x96b614),_0x15e3fe['scopeId']=_0x36a561['resolve'](_0x15e3fe['name']);}),this['storageTex'+'tureFormat'+'sMap']=new Map(),this['storageTex'+'tureFormat'+'s']['forEach']((_0x265b33,_0x496324)=>{this['storageTex'+'tureFormat'+'sMap']['set'](_0x265b33['name'],_0x496324),_0x265b33['scopeId']=_0x36a561['resolve'](_0x265b33['name']);}),this['storageBuf'+'ferFormats'+'Map']=new Map(),this['storageBuf'+'ferFormats']['forEach']((_0x4f7ac3,_0x1411ff)=>{this['storageBuf'+'ferFormats'+'Map']['set'](_0x4f7ac3['name'],_0x1411ff),_0x4f7ac3['scopeId']=_0x36a561['resolve'](_0x4f7ac3['name']);}),this['impl']=_0x16ff08['createBind'+'GroupForma'+'tImpl'](this),M['trace'](n0,'Alloc:\x20Id\x20'+this['id']+(',\x20while\x20re'+'ndering\x20[')+Q['toString']()+']',this);}['destroy'](){this['impl']['destroy']();}['getTexture'](_0x401577){const _0x288e77=this['textureFor'+'matsMap']['get'](_0x401577);return _0x288e77!==void(-0x1746+-0x1d44+0x348a)?this['textureFor'+'mats'][_0x288e77]:null;}['getStorage'+'Texture'](_0x26014b){const _0x358e57=this['storageTex'+'tureFormat'+'sMap']['get'](_0x26014b);return _0x358e57!==void(-0x2e4*0x5+0x37*0x47+0x1*-0xcd)?this['storageTex'+'tureFormat'+'s'][_0x358e57]:null;}['loseContex'+'t'](){}}class Ht{constructor(){h(this,'_cache',new Map());}['get'](_0x535291,_0x498953){return this['_cache']['has'](_0x535291)||(this['_cache']['set'](_0x535291,_0x498953()),_0x535291['on']('destroy',()=>{this['remove'](_0x535291);}),_0x535291['on']('devicelost',()=>{var _0x1507e7,_0x260a2a;(_0x260a2a=(_0x1507e7=this['_cache']['get'](_0x535291))==null?void(0x2a5*0x5+0xac*0x39+-0x3385):_0x1507e7['loseContex'+'t'])==null||_0x260a2a['call'](_0x1507e7,_0x535291);})),this['_cache']['get'](_0x535291);}['remove'](_0x25f7f2){var _0xb0c7c4,_0x2ef95e;(_0x2ef95e=(_0xb0c7c4=this['_cache']['get'](_0x25f7f2))==null?void(0x397+0x85a+-0xbf1):_0xb0c7c4['destroy'])==null||_0x2ef95e['call'](_0xb0c7c4,_0x25f7f2),this['_cache']['delete'](_0x25f7f2);}}class Ui{static['calcLevelD'+'imension'](_0x20d3d8,_0x34185d){return Math['max'](_0x20d3d8>>_0x34185d,-0x2426+0xf47*0x2+0x599*0x1);}static['calcMipLev'+'elsCount'](_0x5b6183,_0x169f2a,_0x572e4f=-0x234+-0x118+-0xa9*-0x5){return 0x387+0xe64+-0x2*0x8f5+Math['floor'](Math['log2'](Math['max'](_0x5b6183,_0x169f2a,_0x572e4f)));}static['calcLevelG'+'puSize'](_0x56c90b,_0x4d6954,_0x2c48df,_0x13301a){var _0x39b14a;const _0x2e112e=Lt['get'](_0x13301a);M['assert'](_0x2e112e!==void(0x17*0x19+0x2524+-0x2763),'Invalid\x20pi'+'xel\x20format'+'\x20'+_0x13301a);const _0x16c748=((_0x39b14a=Lt['get'](_0x13301a))==null?void(-0x3ed*-0x4+-0x123+0xb*-0x153):_0x39b14a['size'])??-0x7fa*0x3+-0x21aa+-0x1ccc*-0x2;if(_0x16c748>-0xa6*-0x1b+-0x17*-0x85+-0x1d75)return _0x56c90b*_0x4d6954*_0x2c48df*_0x16c748;const _0x2c95ff=_0x2e112e['blockSize']??-0x1*-0x2309+-0x18a7+-0x6*0x1bb;let _0x393bb9=Math['floor']((_0x56c90b+(-0x1f16+-0x4f*0x17+-0x2632*-0x1))/(-0x11bf+-0x14e2+0x26a5));const _0x19a420=Math['floor']((_0x4d6954+(-0xf4e*-0x2+-0x33*-0x27+-0x265e))/(-0x14b4+0x16ad+0x1*-0x1f5)),_0xac0529=Math['floor']((_0x2c48df+(-0x251e+0x9a5*0x1+0x1b7c))/(-0x2591+-0x11ca*-0x1+0x13cb));return(_0x13301a===Ko||_0x13301a===Zo)&&(_0x393bb9=Math['max'](Math['floor'](_0x393bb9/(0xa*-0x342+-0x1*0x2109+0x9d*0x6b)),-0x918+-0x1*-0x13ff+0x117*-0xa)),_0x393bb9*_0x19a420*_0xac0529*_0x2c95ff;}static['calcGpuSiz'+'e'](_0x2134ca,_0x38ee0f,_0x2b315a,_0x2bc4b0,_0x2156ba,_0x529265){let _0x33c720=0x267d+-0x2f*0x6f+-0xf4*0x13;for(;_0x33c720+=Ui['calcLevelG'+'puSize'](_0x2134ca,_0x38ee0f,_0x2b315a,_0x2bc4b0),!(!_0x2156ba||_0x2134ca===-0x17b2+-0x159e+0x2d51&&_0x38ee0f===-0x1cd5+-0x1d84+-0xb*-0x54e&&_0x2b315a===-0x12fd*0x2+-0x25a1+0x4b9c);)_0x2134ca=Math['max'](_0x2134ca>>-0x782+-0x11cd*-0x1+0xa4a*-0x1,0x2*-0xfad+0xf10*0x2+-0xf*-0x15),_0x38ee0f=Math['max'](_0x38ee0f>>-0x73e+-0x59*-0x2b+-0x7b4,0x592+-0x1*0xf17+0x2*0x4c3),_0x2b315a=Math['max'](_0x2b315a>>-0xe2e+-0x1b9f+0x29ce,0x42d*0x6+-0x6b*0x14+-0x1*0x10b1);return _0x33c720*(_0x529265?0x4*-0x321+0x14e7+0x1*-0x85d:0x2*-0x12fb+-0x17d0+-0x3dc7*-0x1);}}let Ex=0x21e0*0x1+0x1b6c*-0x1+-0x4*0x19d;class _e{constructor(_0x228490,_0x2de8b1={}){h(this,'name'),h(this,'_gpuSize',0x72*0x34+0x17ed+-0x2f15),h(this,'id',Ex++),h(this,'_invalid',!(0x22b3+0x11*-0x1+-0x22a1)),h(this,'_lockedLev'+'el',-(0x1223+-0x163b+0x419)),h(this,'_lockedMod'+'e',xl),h(this,'renderVers'+'ionDirty',-0x2629+-0x12e2*-0x1+0x1347),h(this,'_storage',!(0x21c1*-0x1+-0xd*-0x191+-0x9*-0x17d)),h(this,'_numLevels',-0x23f0+0x1*0x2236+0x1ba),h(this,'_numLevels'+'Requested');var _0x27e7e4;this['device']=_0x228490,M['assert'](this['device'],'Texture\x20co'+'nstructor\x20'+'requires\x20a'+'\x20graphicsD'+'evice\x20to\x20b'+'e\x20valid'),M['assert'](!_0x2de8b1['width']||Number['isInteger'](_0x2de8b1['width']),'Texture\x20wi'+'dth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x2de8b1),M['assert'](!_0x2de8b1['height']||Number['isInteger'](_0x2de8b1['height']),'Texture\x20he'+'ight\x20must\x20'+'be\x20an\x20inte'+'ger\x20number'+',\x20got',_0x2de8b1),M['assert'](!_0x2de8b1['depth']||Number['isInteger'](_0x2de8b1['depth']),'Texture\x20de'+'pth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x2de8b1),this['name']=_0x2de8b1['name']??'',this['_width']=Math['floor'](_0x2de8b1['width']??-0xe82+-0x4*0x587+0x6*0x61b),this['_height']=Math['floor'](_0x2de8b1['height']??-0xa*-0x63+-0xcff+-0x1*-0x925),this['_format']=_0x2de8b1['format']??Oe,this['_compresse'+'d']=V0(this['_format']),this['_integerFo'+'rmat']=Ya(this['_format']),this['_integerFo'+'rmat']&&(_0x2de8b1['minFilter']=Te,_0x2de8b1['magFilter']=Te),this['_volume']=_0x2de8b1['volume']??!(-0x150e+0x9c7+0x5a4*0x2),this['_depth']=Math['floor'](_0x2de8b1['depth']??-0xfae+-0x2*0x111d+0x31e9),this['_arrayLeng'+'th']=Math['floor'](_0x2de8b1['arrayLengt'+'h']??0x1*0x117d+-0x19b3+0x836),this['_storage']=_0x2de8b1['storage']??!(0x923*-0x2+-0x9fa+-0x96b*-0x3),this['_cubemap']=_0x2de8b1['cubemap']??!(0x1*0x20b+0x14fd*0x1+0x28f*-0x9),this['_flipY']=_0x2de8b1['flipY']??!(0x2342+0x1*0x1c4b+-0x3f8c),this['_premultip'+'lyAlpha']=_0x2de8b1['premultipl'+'yAlpha']??!(0x133c+-0x355*-0x6+-0x2739*0x1),this['_mipmaps']=_0x2de8b1['mipmaps']??!(0xc44+0xac8+0x2*-0xb86),this['_numLevels'+'Requested']=_0x2de8b1['numLevels'],_0x2de8b1['numLevels']!==void(0x3*-0x79a+0x1726+0xb*-0x8)&&(this['_numLevels']=_0x2de8b1['numLevels']),this['_updateNum'+'Level'](),this['_minFilter']=_0x2de8b1['minFilter']??ea,this['_magFilter']=_0x2de8b1['magFilter']??_t,this['_anisotrop'+'y']=_0x2de8b1['anisotropy']??0x2254+0x1fa7+-0x1e*0x233,this['_addressU']=_0x2de8b1['addressU']??pt,this['_addressV']=_0x2de8b1['addressV']??pt,this['_addressW']=_0x2de8b1['addressW']??pt,this['_compareOn'+'Read']=_0x2de8b1['compareOnR'+'ead']??!(-0x20fb*-0x1+-0x219*-0x7+-0x2fa9),this['_compareFu'+'nc']=_0x2de8b1['compareFun'+'c']??Dh,this['_type']=_0x2de8b1['type']??di,M['assert'](!_0x2de8b1['hasOwnProp'+'erty']('rgbm'),'Use\x20option'+'s.type.'),M['assert'](!_0x2de8b1['hasOwnProp'+'erty']('swizzleGGG'+'R'),'Use\x20option'+'s.type.'),this['projection']=Z0,this['_cubemap']?this['projection']=Tf:_0x2de8b1['projection']&&_0x2de8b1['projection']!==Tf&&(this['projection']=_0x2de8b1['projection']),this['profilerHi'+'nt']=_0x2de8b1['profilerHi'+'nt']??0x12ac*0x2+-0x12c0+0xaa*-0x1c,this['_levels']=_0x2de8b1['levels'];const _0x202579=!!_0x2de8b1['levels'];this['_levels']||this['_clearLeve'+'ls'](),this['recreateIm'+'pl'](_0x202579),_0x228490['textures']['push'](this),M['trace']($m,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+'\x20['+((_0x27e7e4=Lt['get'](this['format']))==null?void(-0x2287*0x1+-0x4e0+0x2767):_0x27e7e4['name'])+']'+(this['cubemap']?'[Cubemap]':'')+(this['volume']?'[Volume]':'')+(this['array']?'[Array]':'')+('[MipLevels'+':')+this['numLevels']+']',this);}['destroy'](){M['trace']($m,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x2b3aa5=this['device'];if(_0x2b3aa5){const _0x3889bf=_0x2b3aa5['textures']['indexOf'](this);_0x3889bf!==-(-0xbdc+-0x4*0x3c4+0x1aed)&&_0x2b3aa5['textures']['splice'](_0x3889bf,-0x13fa+0x1a9f+-0x6a4),_0x2b3aa5['scope']['removeValu'+'e'](this),this['impl']['destroy'](_0x2b3aa5),this['adjustVram'+'SizeTracki'+'ng'](_0x2b3aa5['_vram'],-this['_gpuSize']),this['_levels']=null,this['device']=null;}}['recreateIm'+'pl'](_0x1b9821=!(-0x1e3f+0xabf*-0x3+0x3e7c)){var _0x1c4f8d;const {device:_0x52f290}=this;(_0x1c4f8d=this['impl'])==null||_0x1c4f8d['destroy'](_0x52f290),this['impl']=null,this['impl']=_0x52f290['createText'+'ureImpl'](this),this['dirtyAll'](),_0x1b9821&&this['upload']();}['_clearLeve'+'ls'](){this['_levels']=this['_cubemap']?[[null,null,null,null,null,null]]:[null];}['resize'](_0x384251,_0x5d1abe,_0x1dd3dd=-0x22*-0x10+0x8c1*-0x1+0x6a2){const _0x6c3b25=this['device'];this['adjustVram'+'SizeTracki'+'ng'](_0x6c3b25['_vram'],-this['_gpuSize']),this['impl']['destroy'](_0x6c3b25),this['_clearLeve'+'ls'](),this['_width']=Math['floor'](_0x384251),this['_height']=Math['floor'](_0x5d1abe),this['_depth']=Math['floor'](_0x1dd3dd),this['_updateNum'+'Level'](),this['impl']=_0x6c3b25['createText'+'ureImpl'](this),this['dirtyAll']();}['loseContex'+'t'](){this['impl']['loseContex'+'t'](),this['dirtyAll']();}['adjustVram'+'SizeTracki'+'ng'](_0x4b3079,_0x3b10d4){M['trace'](s0,this['id']+'\x20'+this['name']+'\x20size:\x20'+_0x3b10d4+('\x20vram.text'+'ure:\x20')+_0x4b3079['tex']+'\x20=>\x20'+(_0x4b3079['tex']+_0x3b10d4)),_0x4b3079['tex']+=_0x3b10d4,this['profilerHi'+'nt']===xf?_0x4b3079['texShadow']+=_0x3b10d4:this['profilerHi'+'nt']===mr?_0x4b3079['texAsset']+=_0x3b10d4:this['profilerHi'+'nt']===CS&&(_0x4b3079['texLightma'+'p']+=_0x3b10d4);}['propertyCh'+'anged'](_0x345d58){this['impl']['propertyCh'+'anged'](_0x345d58),this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion'];}['_updateNum'+'Level'](){const _0x589226=this['mipmaps']?Ui['calcMipLev'+'elsCount'](this['width'],this['height']):0x1032+-0x50d+-0x3e*0x2e,_0x148163=this['_numLevels'+'Requested'];_0x148163!==void(0x1d*-0x11c+0x1b95+0x497)&&_0x148163>_0x589226&&M['warn']('Texture#nu'+'mLevels:\x20r'+'equested\x20m'+'ip\x20level\x20c'+'ount\x20is\x20gr'+'eater\x20than'+'\x20the\x20maxim'+'um\x20possibl'+'e,\x20will\x20be'+'\x20clamped\x20t'+'o',_0x589226,this),this['_numLevels']=Math['min'](_0x148163??_0x589226,_0x589226),this['_mipmaps']=this['_numLevels']>-0x1214+-0x1d96*0x1+0x2fab;}get['lockedMode'](){return this['_lockedMod'+'e'];}set['minFilter'](_0x505225){this['_minFilter']!==_0x505225&&(Ya(this['_format'])?M['warn']('Texture#mi'+'nFilter:\x20m'+'inFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_minFilter']=_0x505225,this['propertyCh'+'anged'](RS)));}get['minFilter'](){return this['_minFilter'];}set['magFilter'](_0x963952){this['_magFilter']!==_0x963952&&(Ya(this['_format'])?M['warn']('Texture#ma'+'gFilter:\x20m'+'agFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_magFilter']=_0x963952,this['propertyCh'+'anged'](OS)));}get['magFilter'](){return this['_magFilter'];}set['addressU'](_0x751090){this['_addressU']!==_0x751090&&(this['_addressU']=_0x751090,this['propertyCh'+'anged'](FS));}get['addressU'](){return this['_addressU'];}set['addressV'](_0x2774f9){this['_addressV']!==_0x2774f9&&(this['_addressV']=_0x2774f9,this['propertyCh'+'anged'](NS));}get['addressV'](){return this['_addressV'];}set['addressW'](_0xa8e0b7){if(!this['_volume']){M['warn']('pc.Texture'+'#addressW:'+'\x20Can\x27t\x20set'+'\x20W\x20address'+'ing\x20mode\x20f'+'or\x20a\x20non-3'+'D\x20texture.');return;}_0xa8e0b7!==this['_addressW']&&(this['_addressW']=_0xa8e0b7,this['propertyCh'+'anged'](kS));}get['addressW'](){return this['_addressW'];}set['compareOnR'+'ead'](_0x45055d){this['_compareOn'+'Read']!==_0x45055d&&(this['_compareOn'+'Read']=_0x45055d,this['propertyCh'+'anged'](US));}get['compareOnR'+'ead'](){return this['_compareOn'+'Read'];}set['compareFun'+'c'](_0x15dc95){this['_compareFu'+'nc']!==_0x15dc95&&(this['_compareFu'+'nc']=_0x15dc95,this['propertyCh'+'anged'](BS));}get['compareFun'+'c'](){return this['_compareFu'+'nc'];}set['anisotropy'](_0x518700){this['_anisotrop'+'y']!==_0x518700&&(this['_anisotrop'+'y']=_0x518700,this['propertyCh'+'anged'](zS));}get['anisotropy'](){return this['_anisotrop'+'y'];}set['mipmaps'](_0x1ffb61){this['_mipmaps']!==_0x1ffb61&&(this['device']['isWebGPU']?M['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20is\x20curr'+'ently\x20not\x20'+'allowed\x20to'+'\x20be\x20change'+'d\x20on\x20WebGP'+'U,\x20create\x20'+'the\x20textur'+'e\x20appropri'+'ately.',this):Ya(this['_format'])?M['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20cannot\x20'+'be\x20changed'+'\x20on\x20an\x20int'+'eger\x20textu'+'re,\x20will\x20r'+'emain\x20fals'+'e',this):this['_mipmaps']=_0x1ffb61,_0x1ffb61&&(this['_needsMipm'+'apsUpload']=!(0x235d+0x164f+0x4*-0xe6b)));}get['mipmaps'](){return this['_mipmaps'];}get['numLevels'](){return this['_numLevels'];}get['storage'](){return this['_storage'];}get['width'](){return this['_width'];}get['height'](){return this['_height'];}get['depth'](){return this['_depth'];}get['format'](){return this['_format'];}get['cubemap'](){return this['_cubemap'];}get['gpuSize'](){const _0x5d0400=this['pot']&&this['_mipmaps']&&!(this['_compresse'+'d']&&this['_levels']['length']===-0x2e*-0xb3+0x1fb5*0x1+0x663*-0xa);return Ui['calcGpuSiz'+'e'](this['_width'],this['_height'],this['_depth'],this['_format'],_0x5d0400,this['_cubemap']);}get['array'](){return this['_arrayLeng'+'th']>0x14a2+0x8*-0x161+-0x99a;}get['arrayLengt'+'h'](){return this['_arrayLeng'+'th'];}get['volume'](){return this['_volume'];}set['type'](_0xc42ee3){this['_type']!==_0xc42ee3&&(this['_type']=_0xc42ee3,this['device']['_shadersDi'+'rty']=!(0x1*0x144d+-0xda9+-0x6a4));}get['type'](){return this['_type'];}set['srgb'](_0x1197d1){var _0x7d3047,_0xc37ccf,_0x593497,_0x33e4ea;const _0x57fa0e=Rh(this['format']);if(_0x1197d1!==_0x57fa0e){if(_0x1197d1){const _0x54b2f6=Rc(this['format']);this['_format']!==_0x54b2f6&&(M['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20sRGB\x20'+'equivalent'+':\x20')+((_0x7d3047=Lt['get'](this['format']))==null?void(0x2*0x859+0x2*0x509+-0x1ac4):_0x7d3047['name'])+'\x20->\x20'+((_0xc37ccf=Lt['get'](_0x54b2f6))==null?void(0x49d*0x4+0x1*-0x187c+0x4*0x182):_0xc37ccf['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x54b2f6,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x4*0x687+-0x94*-0x36+0x28e*-0x2));}else{const _0x301561=G0(this['format']);this['_format']!==_0x301561&&(M['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20linea'+'r\x20equivale'+'nt:\x20')+((_0x593497=Lt['get'](this['format']))==null?void(0x12d0+-0x1c82+0x9b2):_0x593497['name'])+'\x20->\x20'+((_0x33e4ea=Lt['get'](_0x301561))==null?void(0x25f1+-0x1*-0x1e89+-0x447a):_0x33e4ea['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x301561,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x577*0x1+0x7e2*-0x2+0x153b));}}}get['srgb'](){return Rh(this['format']);}set['flipY'](_0x375ba1){this['_flipY']!==_0x375ba1&&(this['_flipY']=_0x375ba1,this['_needsUplo'+'ad']=!(0x1e*-0xef+-0x253b+0x413d*0x1));}get['flipY'](){return this['_flipY'];}set['premultipl'+'yAlpha'](_0x29f7c6){this['_premultip'+'lyAlpha']!==_0x29f7c6&&(this['_premultip'+'lyAlpha']=_0x29f7c6,this['_needsUplo'+'ad']=!(0x5ac+-0x1562+0xfb6));}get['premultipl'+'yAlpha'](){return this['_premultip'+'lyAlpha'];}get['pot'](){return Y['powerOfTwo'](this['_width'])&&Y['powerOfTwo'](this['_height']);}get['encoding'](){switch(this['type']){case ta:return'rgbm';case Nh:return'rgbe';case Io:return'rgbp';}return xS(this['format'])?'srgb':'linear';}['dirtyAll'](){this['_levelsUpd'+'ated']=this['_cubemap']?[[!(-0x7bb+0x18c+0x62f),!(-0xd8a+0x1*-0x324+0x356*0x5),!(0xdd7+0x2017+0x1*-0x2dee),!(0x11*-0x242+-0xbe9*-0x2+0xe90),!(-0x1*0x295+0x2*-0x128b+0x27ab),!(0x1*-0x1087+0x1*-0x12e9+0x2370)]]:[!(-0x52d+0x57*-0x59+0x236c)],this['_needsUplo'+'ad']=!(0x22*0x3e+0x1*-0x741+0x1*-0xfb),this['_needsMipm'+'apsUpload']=this['_mipmaps'],this['_mipmapsUp'+'loaded']=!(0x264c+-0x5c2+-0x1*0x2089),this['propertyCh'+'anged'](Sx);}['lock'](_0x1e1b18={}){_0x1e1b18['level']??(_0x1e1b18['level']=-0x892+-0x25d9*-0x1+-0x5db*0x5),_0x1e1b18['face']??(_0x1e1b18['face']=-0xd26+0x15ab+-0x885),_0x1e1b18['mode']??(_0x1e1b18['mode']=rd),M['assert'](this['_lockedMod'+'e']===xl,'The\x20textur'+'e\x20is\x20alrea'+'dy\x20locked.'+'\x20Call\x20`tex'+'ture.unloc'+'k()`\x20befor'+'e\x20attempti'+'ng\x20to\x20lock'+'\x20again.',this),M['assert'](_0x1e1b18['mode']===bS||_0x1e1b18['mode']===rd,'Cannot\x20loc'+'k\x20a\x20textur'+'e\x20with\x20TEX'+'TURELOCK_N'+'ONE.\x20To\x20un'+'lock\x20a\x20tex'+'ture,\x20call'+'\x20`texture.'+'unlock()`.',this),this['_lockedMod'+'e']=_0x1e1b18['mode'],this['_lockedLev'+'el']=_0x1e1b18['level'];const _0x2e81cb=this['cubemap']?this['_levels'][_0x1e1b18['face']]:this['_levels'];if((_0x2e81cb==null?void(0xd51+0x8c*0x18+-0x1a71):_0x2e81cb[_0x1e1b18['level']])===null){const _0x570204=Math['max'](0x1af4+-0x1114+-0x9df,this['_width']>>_0x1e1b18['level']),_0x1fa1ec=Math['max'](-0x44c+-0x4f5+-0xa*-0xed,this['_height']>>_0x1e1b18['level']),_0x413b41=Math['max'](-0x262+-0x4b1*0x3+0x1076,this['_depth']>>_0x1e1b18['level']),_0x1cb66=new ArrayBuffer(Ui['calcLevelG'+'puSize'](_0x570204,_0x1fa1ec,_0x413b41,this['_format']));_0x2e81cb[_0x1e1b18['level']]=new(TS(this['_format']))(_0x1cb66);}return _0x2e81cb==null?void(-0x989*-0x1+-0x2ab*0x8+0x1*0xbcf):_0x2e81cb[_0x1e1b18['level']];}['setSource'](_0x408baa,_0x2e4ec7=0x1*0x1dbf+-0x175*0x11+-0x4fa){let _0x57f9fc=!(0xa74+-0x6f8+0x37b*-0x1),_0x3572cd,_0x20399f;if(this['_cubemap']){if(_0x408baa[0x58e*0x2+0x2*-0xdf5+0x10ce]){_0x3572cd=_0x408baa[-0x73b+-0x1ae3+0x2*0x110f]['width']||-0x1*-0x46d+0x1fce+0x35*-0xaf,_0x20399f=_0x408baa[0x2123+0x26a3+-0x2*0x23e3]['height']||-0x14*0x18e+0x1a6f*-0x1+-0x3987*-0x1;for(let _0x4e0ab7=-0x59*-0x59+0x1c*-0xf4+-0x441;_0x4e0ab7<-0x3*0x635+-0x41+-0x76*-0x29;_0x4e0ab7++){const _0x1e55e2=_0x408baa[_0x4e0ab7];if(!_0x1e55e2||_0x1e55e2['width']!==_0x3572cd||_0x1e55e2['height']!==_0x20399f||!this['device']['_isBrowser'+'Interface'](_0x1e55e2)){_0x57f9fc=!(0x1212+0x16b8+-0x28ca);break;}}}else _0x57f9fc=!(0x2*-0xe12+-0x19fd+0x3621*0x1);if(!_0x57f9fc){for(let _0xf740dc=0x1fbc+-0x1bf+-0x1dfd;_0xf740dc<-0x901+0x17*-0x1+0x6*0x185;_0xf740dc++)this['_levels'][_0x2e4ec7][_0xf740dc]!==_0x408baa[_0xf740dc]&&(this['_levelsUpd'+'ated'][_0x2e4ec7][_0xf740dc]=!(0x1d*-0x45+-0x612*0x1+0xde3));}}else this['device']['_isBrowser'+'Interface'](_0x408baa)||(_0x57f9fc=!(0x2*0xd72+-0xe1d*-0x1+0x3*-0xdab)),_0x57f9fc||(_0x408baa!==this['_levels'][_0x2e4ec7]&&(this['_levelsUpd'+'ated'][_0x2e4ec7]=!(-0x2*-0xc9+-0xf18+0xd86)),_0x408baa instanceof HTMLVideoElement?(_0x3572cd=_0x408baa['videoWidth'],_0x20399f=_0x408baa['videoHeigh'+'t']):(_0x3572cd=_0x408baa['width'],_0x20399f=_0x408baa['height']));if(_0x57f9fc){if(this['_width']=0x18dd+-0x1*0xeb9+-0xa20,this['_height']=-0x6*0x25b+0xb*0x10f+0x281*0x1,this['_cubemap']){for(let _0x555801=-0xea4+0x41*0x4d+-0x4e9;_0x555801<-0xd1a+-0x23f9*-0x1+-0x16d9;_0x555801++)this['_levels'][_0x2e4ec7][_0x555801]=null,this['_levelsUpd'+'ated'][_0x2e4ec7][_0x555801]=!(-0xb05+-0xa*0x2f8+0x28b5*0x1);}else this['_levels'][_0x2e4ec7]=null,this['_levelsUpd'+'ated'][_0x2e4ec7]=!(0x81e*0x1+-0x698+-0x186);}else _0x2e4ec7===0x88e+-0x30d+0x1*-0x581&&(this['_width']=_0x3572cd,this['_height']=_0x20399f),this['_levels'][_0x2e4ec7]=_0x408baa;(this['_invalid']!==_0x57f9fc||!_0x57f9fc)&&(this['_invalid']=_0x57f9fc,this['upload']());}['getSource'](_0x4fbc60=0x1c31+0x17c1+-0x33f2){return this['_levels'][_0x4fbc60];}['unlock'](){this['_lockedMod'+'e']===xl&&M['warn']('pc.Texture'+'#unlock:\x20A'+'ttempting\x20'+'to\x20unlock\x20'+'a\x20texture\x20'+'that\x20is\x20no'+'t\x20locked.',this),this['_lockedMod'+'e']===rd&&this['upload'](),this['_lockedLev'+'el']=-(0x21dd+-0x1c01+-0x1*0x5db),this['_lockedMod'+'e']=xl;}['upload'](){var _0x50371e,_0x3d4cb3;this['_needsUplo'+'ad']=!(-0x11e6+0x95*0x29+0x1*-0x5f7),this['_needsMipm'+'apsUpload']=this['_mipmaps'],(_0x3d4cb3=(_0x50371e=this['impl'])['uploadImme'+'diate'])==null||_0x3d4cb3['call'](_0x50371e,this['device'],this);}['read'](_0x505520,_0x4262f5,_0xba94a3,_0x3ec978,_0x7abbd7={}){var _0x5b072c,_0x3f51d1;return(_0x3f51d1=(_0x5b072c=this['impl'])['read'])==null?void(0x1331*0x1+0x582*0x2+0x2bf*-0xb):_0x3f51d1['call'](_0x5b072c,_0x505520,_0x4262f5,_0xba94a3,_0x3ec978,_0x7abbd7);}['write'](_0x44e34c,_0x37891d,_0x3a7a55,_0x1f61ee,_0x205950){var _0x180f39,_0x53d49e;return(_0x53d49e=(_0x180f39=this['impl'])['write'])==null?void(-0xd5f+-0xe71*-0x1+0x112*-0x1):_0x53d49e['call'](_0x180f39,_0x44e34c,_0x37891d,_0x3a7a55,_0x1f61ee,_0x205950);}}const Ax={'white':[0x81*-0x45+0x10f*-0x19+-0x59*-0xb3,-0x634+-0x8a1*-0x3+0x4*-0x4ac,-0x3d7+0x26ef*0x1+-0x2219,-0xd*-0x2b6+-0x116*0xb+-0x207*0xb],'gray':[-0x11d4+-0xc52+0x1ea6,0x215c+0xd*-0x276+-0xde,0x43*-0x53+0x7*0x315+0xa6,-0x1*-0x23d5+-0xeea*0x1+-0x13ec],'black':[0xfdc+0x7cd+-0x17a9,-0x180f+0x4a9*0x3+0xa14,0x846*0x4+-0x107b*0x2+-0x22,-0x2081+-0x1cdd*-0x1+0x4a3*0x1],'normal':[0x2c*0x2e+-0x571+-0x1*0x1f7,0x25b+-0x26ed+0x92*0x41,-0x5c5*0x5+-0x13c7+0x319f,0x11b*0x12+0x2*0x1029+-0x3339],'pink':[0x96*-0x38+-0x1338+0x5*0xa9b,0x190*-0x13+-0x72d+0x255d,-0x39*0x97+-0x399+-0x3*-0xcbd,0x109c+-0x111b*0x1+0x1*0x17e]};class bx{constructor(){h(this,'map',new Map());}['destroy'](){this['map']['forEach'](_0x3517f3=>{_0x3517f3['destroy']();});}}const Cx=new Ht(),Kr=(_0x1a90ae,_0x529a18)=>{const _0x568f7b=Cx['get'](_0x1a90ae,()=>new bx());if(!_0x568f7b['map']['has'](_0x529a18)){const _0x7d0925=new _e(_0x1a90ae,{'name':'built-in-t'+'exture-'+_0x529a18,'width':0x1,'height':0x1,'format':Oe}),_0x3a4916=_0x7d0925['lock'](),_0x3454df=Ax[_0x529a18];M['assert'](_0x3454df,'Data\x20for\x20b'+'uilt-in\x20te'+'xture\x20\x27'+_0x529a18+('\x27\x20not\x20foun'+'d')),_0x3a4916['set'](_0x3454df),_0x7d0925['unlock'](),_0x568f7b['map']['set'](_0x529a18,_0x7d0925);}return _0x568f7b['map']['get'](_0x529a18);};let Px=0xc*0xdf+-0x2fe*0x8+0x1*0xd7c;class WS{constructor(){h(this,'bindGroup'),h(this,'offsets',[]);}}class rm{constructor(_0x11384b,_0x1d0ad9,_0x5f24cd){h(this,'renderVers'+'ionUpdated',-(0x131f+0x166e+-0x298c)),h(this,'uniformBuf'+'fers'),h(this,'uniformBuf'+'ferOffsets',[]),(this['id']=Px++,this['device']=_0x11384b,this['format']=_0x1d0ad9,this['dirty']=!(-0x14f7+-0x2046+0x79b*0x7),this['impl']=_0x11384b['createBind'+'GroupImpl'](this),this['textures']=[],this['storageTex'+'tures']=[],this['storageBuf'+'fers']=[],this['uniformBuf'+'fers']=[],this['defaultUni'+'formBuffer']=_0x5f24cd,_0x5f24cd&&this['setUniform'+'Buffer'](sm,_0x5f24cd),M['trace'](a0,'Alloc:\x20Id\x20'+this['id'],this,_0x1d0ad9));}['destroy'](){this['impl']['destroy'](),this['impl']=null,this['format']=null,this['defaultUni'+'formBuffer']=null;}['setUniform'+'Buffer'](_0x1c89c7,_0x8c7f74){const _0x28da95=this['format']['bufferForm'+'atsMap']['get'](_0x1c89c7);M['assert'](_0x28da95!==void(0x1f93+-0x9bd+-0x15d6),'Setting\x20a\x20'+'uniform\x20['+_0x1c89c7+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['uniformBuf'+'fers'][_0x28da95]!==_0x8c7f74&&(this['uniformBuf'+'fers'][_0x28da95]=_0x8c7f74,this['dirty']=!(0xb*0xb5+0x8*0x11a+0x1f*-0x89));}['setStorage'+'Buffer'](_0x230672,_0x1280bf){const _0x38b10e=this['format']['storageBuf'+'ferFormats'+'Map']['get'](_0x230672);M['assert'](_0x38b10e!==void(-0x1a10*0x1+-0x1*0x1ca6+-0x95*-0x5e),'Setting\x20a\x20'+'storage\x20bu'+'ffer\x20['+_0x230672+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageBuf'+'fers'][_0x38b10e]!==_0x1280bf&&(this['storageBuf'+'fers'][_0x38b10e]=_0x1280bf,this['dirty']=!(0x8b4+0x25fb+-0x2bf*0x11));}['setTexture'](_0x508fdb,_0x4b5cad){const _0x496f58=this['format']['textureFor'+'matsMap']['get'](_0x508fdb);M['assert'](_0x496f58!==void(-0x116c+0x22c4+-0x1158),'Setting\x20a\x20'+'texture\x20['+_0x508fdb+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['textures'][_0x496f58]!==_0x4b5cad?(this['textures'][_0x496f58]=_0x4b5cad,this['dirty']=!(0xd7*0x10+-0x2647+0x18d7)):this['renderVers'+'ionUpdated']<_0x4b5cad['renderVers'+'ionDirty']&&(this['dirty']=!(-0x1151+0xcfe+0x453));}['setStorage'+'Texture'](_0x4dcef5,_0x83df25){const _0xf43910=this['format']['storageTex'+'tureFormat'+'sMap']['get'](_0x4dcef5);M['assert'](_0xf43910!==void(-0x18f2+0x329*0x9+-0x37f),'Setting\x20a\x20'+'storage\x20te'+'xture\x20['+_0x4dcef5+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageTex'+'tures'][_0xf43910]!==_0x83df25?(this['storageTex'+'tures'][_0xf43910]=_0x83df25,this['dirty']=!(-0x1802+-0x1*-0xb60+-0x42*-0x31)):this['renderVers'+'ionUpdated']<_0x83df25['renderVers'+'ionDirty']&&(this['dirty']=!(0x1*0x20f8+-0x1cae*-0x1+-0x3da6));}['updateUnif'+'ormBuffers'](){for(let _0x45cb5b=-0x3b1+-0x47*0x31+0x1148;_0x45cb5b<this['uniformBuf'+'fers']['length'];_0x45cb5b++)this['uniformBuf'+'fers'][_0x45cb5b]['update']();}['update'](){const {textureFormats:_0x731e8c,storageTextureFormats:_0x444e6b,storageBufferFormats:_0x58b377}=this['format'];for(let _0x384e89=-0x1*0x1eb+0x1a49+-0x185e;_0x384e89<_0x731e8c['length'];_0x384e89++){const _0x2dbc0a=_0x731e8c[_0x384e89];let _0xbcdc90=_0x2dbc0a['scopeId']['value'];_0xbcdc90||(_0x2dbc0a['name']==='uSceneDept'+'hMap'&&(M['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0xbcdc90=Kr(this['device'],'white')),_0x2dbc0a['name']==='uSceneColo'+'rMap'&&(M['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0xbcdc90=Kr(this['device'],'pink')),_0xbcdc90||(M['errorOnce']('Texture\x20'+_0x2dbc0a['name']+('\x20is\x20requir'+'ed\x20for\x20ren'+'dering\x20but'+'\x20was\x20not\x20s'+'et.\x20Render'+'ing\x20[')+Q['toString']()+']'),_0xbcdc90=Kr(this['device'],'pink'))),this['setTexture'](_0x2dbc0a['name'],_0xbcdc90);}for(let _0x40725a=0x17cd+0x17c4+0xb*-0x453;_0x40725a<_0x444e6b['length'];_0x40725a++){const _0x2c0e4d=_0x444e6b[_0x40725a],_0x363bb0=_0x2c0e4d['scopeId']['value'];M['assert'](_0x363bb0,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20texture\x20s'+'lot\x20['+_0x2c0e4d['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Texture'](_0x2c0e4d['name'],_0x363bb0);}for(let _0x21963d=-0x213a+-0x19e5+0x3b1f;_0x21963d<_0x58b377['length'];_0x21963d++){const _0x4366c5=_0x58b377[_0x21963d],_0x3a2ec3=_0x4366c5['scopeId']['value'];M['assert'](_0x3a2ec3,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20buffer\x20sl'+'ot\x20['+_0x4366c5['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Buffer'](_0x4366c5['name'],_0x3a2ec3);}this['uniformBuf'+'ferOffsets']['length']=this['uniformBuf'+'fers']['length'];for(let _0x1c7376=0xce1*-0x1+-0x2c4+-0x1bd*-0x9;_0x1c7376<this['uniformBuf'+'fers']['length'];_0x1c7376++){const _0x296a06=this['uniformBuf'+'fers'][_0x1c7376];this['uniformBuf'+'ferOffsets'][_0x1c7376]=_0x296a06['offset'],this['renderVers'+'ionUpdated']<_0x296a06['renderVers'+'ionDirty']&&(this['dirty']=!(0x4*0xda+-0x7*0x2+-0x35a));}this['dirty']&&(this['dirty']=!(-0x26e+-0x76*-0x49+0x1*-0x1f37),this['renderVers'+'ionUpdated']=this['device']['renderVers'+'ion'],this['impl']['update'](this));}}const Xe={'set'(_0x7a4d84,_0x41eeda,_0x229ce4,_0x507742=0x2684+0xdd1+-0x3454){return _0x7a4d84&~(_0x507742<<_0x229ce4)|_0x41eeda<<_0x229ce4;},'get'(_0x5dfbe0,_0x1819d1,_0x11b4cd=0x1*-0x155f+0xcf*-0x1f+0x2e71){return _0x5dfbe0>>_0x1819d1&_0x11b4cd;},'all'(_0x1ef288,_0x1cef42,_0xebab67=0x2524+-0x85*-0x3b+-0x2*0x21e5){const _0x4ced1d=_0xebab67<<_0x1cef42;return(_0x1ef288&_0x4ced1d)===_0x4ced1d;},'any'(_0x5dc240,_0x5beefc,_0x21f467=-0x241+-0x7a*0x1c+0xf9a*0x1){return(_0x5dc240&_0x21f467<<_0x5beefc)!==-0x1de3+0x9d7+0x140c;}},Tl=0x40*0x94+-0x272+0x2287*-0x1,Xi=-0x88*0x22+0xd67+0x4b8,rp=-0xab8+-0x19*0x184+0x309c,ap=-0x18af+-0x1d15*-0x1+0x1*-0x463,np=0xc5e*0x2+-0xbad+0x6*-0x22c,op=-0x1b38+-0x7*0x1da+0x5bf*0x7,lp=0x944*-0x4+-0x7*0x239+0x34ad,hp=0x14f1+0x141+-0x1620,Ef=-0x1*-0x2501+0x9ca+-0x2eb5,cp=0x8*-0x1dc+0x8e7+0x610,dp=0xc07+-0x50e*-0x3+-0x1b19,fp=-0x28a+-0x34*-0x19+-0x1*0x271,up=0x15a3+-0x666+0x7d*-0x1f,Mx=-0x1443+0x788+-0x2*-0x665,Ix=Ef,js=class js{constructor(_0x4cc3d6=!(-0x1*0x1479+-0x6*0x261+0x22c0),_0x577071=as,_0x59df6a=Dt,_0x76bdb9=wu,_0x11d2e6,_0x5dd0de,_0x39bd0a,_0x28c080=!(0x1e0b+0x1*-0xb5e+-0x12ad),_0x6a3ef8=!(-0x1*0x897+0x2318+-0x1a81),_0x3636af=!(0x7b3+0x1*-0x1487+0x335*0x4),_0x23d183=!(-0x5d7+0x10*-0x1a+0x777)){h(this,'target0',0x1*0x11c2+0x26c2+0x2*-0x1c42),(this['setColorBl'+'end'](_0x577071,_0x59df6a,_0x76bdb9),this['setAlphaBl'+'end'](_0x11d2e6??_0x577071,_0x5dd0de??_0x59df6a,_0x39bd0a??_0x76bdb9),this['setColorWr'+'ite'](_0x28c080,_0x6a3ef8,_0x3636af,_0x23d183),this['blend']=_0x4cc3d6);}set['blend'](_0x56f861){this['target0']=Xe['set'](this['target0'],_0x56f861?0x2327+-0xdd*0x1a+-0xcb4:-0x1*-0x8d1+0x12ad+-0x1b7e,up);}get['blend'](){return Xe['all'](this['target0'],up);}['setColorBl'+'end'](_0x392a15,_0x1fc5d6,_0xa92c9d){this['target0']=Xe['set'](this['target0'],_0x392a15,rp,Tl),this['target0']=Xe['set'](this['target0'],_0x1fc5d6,ap,Xi),this['target0']=Xe['set'](this['target0'],_0xa92c9d,np,Xi);}['setAlphaBl'+'end'](_0x166ccb,_0x44454c,_0x315e3a){this['target0']=Xe['set'](this['target0'],_0x166ccb,op,Tl),this['target0']=Xe['set'](this['target0'],_0x44454c,lp,Xi),this['target0']=Xe['set'](this['target0'],_0x315e3a,hp,Xi);}['setColorWr'+'ite'](_0x126d07,_0x3fb018,_0x2b268c,_0x1f7402){this['redWrite']=_0x126d07,this['greenWrite']=_0x3fb018,this['blueWrite']=_0x2b268c,this['alphaWrite']=_0x1f7402;}get['colorOp'](){return Xe['get'](this['target0'],rp,Tl);}get['colorSrcFa'+'ctor'](){return Xe['get'](this['target0'],ap,Xi);}get['colorDstFa'+'ctor'](){return Xe['get'](this['target0'],np,Xi);}get['alphaOp'](){return Xe['get'](this['target0'],op,Tl);}get['alphaSrcFa'+'ctor'](){return Xe['get'](this['target0'],lp,Xi);}get['alphaDstFa'+'ctor'](){return Xe['get'](this['target0'],hp,Xi);}set['redWrite'](_0x3da340){this['target0']=Xe['set'](this['target0'],_0x3da340?-0xa68+-0x217e+-0x1*-0x2be7:0x6bb*-0x5+0x9b4+0x17f3,Ef);}get['redWrite'](){return Xe['all'](this['target0'],Ef);}set['greenWrite'](_0xa86bd0){this['target0']=Xe['set'](this['target0'],_0xa86bd0?0x19a2+-0x136a+-0x1*0x637:0x138b+0xc76+-0x2001,cp);}get['greenWrite'](){return Xe['all'](this['target0'],cp);}set['blueWrite'](_0x1fbcf4){this['target0']=Xe['set'](this['target0'],_0x1fbcf4?0xf1*0x14+-0x65a+0x1f*-0x67:0x1fcb+0x2387+-0x4352,dp);}get['blueWrite'](){return Xe['all'](this['target0'],dp);}set['alphaWrite'](_0x2fdfc9){this['target0']=Xe['set'](this['target0'],_0x2fdfc9?0x2159+0xc75+-0x2dcd:-0x1931+-0x2665+-0xa99*-0x6,fp);}get['alphaWrite'](){return Xe['all'](this['target0'],fp);}get['allWrite'](){return Xe['get'](this['target0'],Ix,Mx);}['copy'](_0x60189a){return this['target0']=_0x60189a['target0'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}get['key'](){return this['target0'];}['equals'](_0x2a11e1){return this['target0']===_0x2a11e1['target0'];}};h(js,'NOBLEND',Object['freeze'](new js())),h(js,'NOWRITE',Object['freeze'](new js(void(0x182a+-0x4*-0x61d+-0x379*0xe),void(-0xa7e*-0x2+0x1*-0x22f7+0xdfb),void(-0x1*0x2d2+-0x3*0xaf3+0x23ab),void(0xcbf+0x1*0x1064+0x1d23*-0x1),void(-0x4*-0x744+-0x1381+-0x98f*0x1),void(-0x13*-0x1b5+0x3*0x6aa+-0x346d),void(0x1*0x1671+-0x4c3*0x7+0xae4),!(-0x5*-0x56c+0xfbf+0x449*-0xa),!(0x1bac+0xadb+-0x2686),!(0xc5e+-0x511+-0x74c),!(-0x2*-0x1b7+0x1*0xd6a+-0x10d7)))),h(js,'ALPHABLEND',Object['freeze'](new js(!(0x13c2+-0x307*0x3+-0xaad),as,yc,vc))),h(js,'ADDBLEND',Object['freeze'](new js(!(-0x1f*-0x3d+0x8b*-0x13+0x2ee),as,Dt,Dt)));let Ct=js;class am{constructor(){h(this,'map',new Map()),h(this,'id',0x15d4+-0x1*0x1339+-0x29b);}['get'](_0x30fbe0){let _0x573526=this['map']['get'](_0x30fbe0);return _0x573526===void(-0x202*0x3+0x94d+-0x347)&&(_0x573526=this['id']++,this['map']['set'](_0x30fbe0,_0x573526)),_0x573526;}}const Dx=new am(),mp=-0x1*0x1271+-0x2321+0x1*0x3599,pp=0x11+0x26e*0x4+-0xa7*0xf,_p=0x1*0x164+-0x89*-0x33+-0x1cac,sr=class sr{constructor(_0x1fbb92=df,_0x1b4f9f=!(0x1*0xf5e+0x2*0x883+-0x819*0x4)){h(this,'data',-0x1730+0x9*0x1a6+0x85a),h(this,'_depthBias',0x2166+-0x74f+-0x1a17),h(this,'_depthBias'+'Slope',-0xfad+-0x37*0x19+0x150c),h(this,'key',0x17ec+0x1a1c+-0x3208),(this['func']=_0x1fbb92,this['write']=_0x1b4f9f);}set['test'](_0x3cc58f){this['func']=_0x3cc58f?df:Ni,this['updateKey']();}get['test'](){return this['func']!==Ni;}set['write'](_0x2d5475){this['data']=Xe['set'](this['data'],_0x2d5475?0x21f0+-0x4*-0x54e+-0x3727:-0x33b*0x5+-0x5*-0x4ae+-0x73f,_p),this['updateKey']();}get['write'](){return Xe['all'](this['data'],_p);}set['func'](_0x4ec8fd){this['data']=Xe['set'](this['data'],_0x4ec8fd,pp,mp),this['updateKey']();}get['func'](){return Xe['get'](this['data'],pp,mp);}set['depthBias'](_0x4cb923){this['_depthBias']=_0x4cb923,this['updateKey']();}get['depthBias'](){return this['_depthBias'];}set['depthBiasS'+'lope'](_0x16aa95){this['_depthBias'+'Slope']=_0x16aa95,this['updateKey']();}get['depthBiasS'+'lope'](){return this['_depthBias'+'Slope'];}['copy'](_0x2310c0){return this['data']=_0x2310c0['data'],this['_depthBias']=_0x2310c0['_depthBias'],this['_depthBias'+'Slope']=_0x2310c0['_depthBias'+'Slope'],this['key']=_0x2310c0['key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['updateKey'](){const {data:_0x448c48,_depthBias:_0x16f85a,_depthBiasSlope:_0x328489}=this,_0x18f5da=_0x448c48+'-'+_0x16f85a+'-'+_0x328489;this['key']=Dx['get'](_0x18f5da);}['equals'](_0x56dff8){return this['key']===_0x56dff8['key'];}};h(sr,'DEFAULT',Object['freeze'](new sr())),h(sr,'NODEPTH',Object['freeze'](new sr(Ni,!(-0x47f*-0x2+0x1*-0x903+-0x6*-0x1)))),h(sr,'WRITEDEPTH',Object['freeze'](new sr(Ni,!(-0x1fb5+0x103f*0x1+-0x1*-0xf76))));let Kt=sr;class $S{constructor(){h(this,'globalId',-0xbf7+-0xe*0xf8+0x51b*0x5),h(this,'revision',-0x10df+0x247+0xe98);}['equals'](_0x211232){return this['globalId']===_0x211232['globalId']&&this['revision']===_0x211232['revision'];}['copy'](_0x457c0e){this['globalId']=_0x457c0e['globalId'],this['revision']=_0x457c0e['revision'];}['reset'](){this['globalId']=-0x4ed*-0x2+-0x18d8+0x13*0xca,this['revision']=-0xe5b+0xe7*-0x15+-0x1d*-0x126;}}let gp=0x1*-0xd19+0x29*0xaf+0x15*-0xb6;class Lx{constructor(){gp++,this['version']=new $S(),this['version']['globalId']=gp;}['increment'](){this['version']['revision']++;}}class Rx{constructor(_0x14a395){this['name']=_0x14a395,this['value']=null,this['versionObj'+'ect']=new Lx();}['toJSON'](_0x18ec7e){}['setValue'](_0xa52859){this['value']=_0xa52859,this['versionObj'+'ect']['increment']();}['getValue'](){return this['value'];}}class Ox{constructor(_0x4812dc){this['name']=_0x4812dc,this['variables']=new Map();}['resolve'](_0x5b9b93){return this['variables']['has'](_0x5b9b93)||this['variables']['set'](_0x5b9b93,new Rx(_0x5b9b93)),this['variables']['get'](_0x5b9b93);}['removeValu'+'e'](_0x175bce){for(const _0x5973ff in this['variables']){const _0x120241=this['variables'][_0x5973ff];_0x120241['value']===_0x175bce&&(_0x120241['value']=null);}}}let Fx=0x1969+0x465+0x442*-0x7;class xs{constructor(_0x3bfeef,_0x2134fd,_0xbc28a8,_0x1ea2d0){h(this,'usage',ls),(M['assert'](arguments['length']<=0x1c19*-0x1+-0x310*-0x9+0x8d*0x1&&(!_0x1ea2d0||typeof _0x1ea2d0=='object'),'incorrect\x20'+'arguments'),this['usage']=(_0x1ea2d0==null?void(0x18d6+-0x1*0x17b8+-0x11e):_0x1ea2d0['usage'])??ls,this['device']=_0x3bfeef,this['format']=_0x2134fd,this['numVertice'+'s']=_0xbc28a8,this['id']=Fx++,this['impl']=_0x3bfeef['createVert'+'exBufferIm'+'pl'](this,_0x2134fd,_0x1ea2d0),this['numBytes']=_0x2134fd['verticesBy'+'teSize']?_0x2134fd['verticesBy'+'teSize']:_0x2134fd['size']*_0xbc28a8,this['adjustVram'+'SizeTracki'+'ng'](_0x3bfeef['_vram'],this['numBytes']));const _0x30c4fd=_0x1ea2d0==null?void(0x31*0x37+0x1b7b*-0x1+0x10f4):_0x1ea2d0['data'];_0x30c4fd?this['setData'](_0x30c4fd):this['storage']=new ArrayBuffer(this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x5c67c7=this['device'],_0x11bf70=_0x5c67c7['buffers']['indexOf'](this);_0x11bf70!==-(-0x3*0x122+0x5*-0x1fd+0xd58)&&_0x5c67c7['buffers']['splice'](_0x11bf70,-0x11a2*-0x1+-0x1d*0x1f+-0xe1e),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x5c67c7),this['adjustVram'+'SizeTracki'+'ng'](_0x5c67c7['_vram'],-this['storage']['byteLength'])),this['storage']=null;}['adjustVram'+'SizeTracki'+'ng'](_0x57f9c7,_0x4ce26f){M['trace'](i0,this['id']+'\x20size:\x20'+_0x4ce26f+'\x20vram.vb:\x20'+_0x57f9c7['vb']+'\x20=>\x20'+(_0x57f9c7['vb']+_0x4ce26f)),_0x57f9c7['vb']+=_0x4ce26f;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getUsage'](){return this['usage'];}['getNumVert'+'ices'](){return this['numVertice'+'s'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x2e682d){return _0x2e682d['byteLength']!==this['numBytes']?(M['error']('VertexBuff'+'er:\x20wrong\x20'+'initial\x20da'+'ta\x20size:\x20e'+'xpected\x20'+this['numBytes']+',\x20got\x20'+_0x2e682d['byteLength']),!(0x1*-0x9f2+-0x1de7+0x13ed*0x2)):(this['storage']=_0x2e682d,this['unlock'](),!(0xf26*-0x1+-0x1fb5*-0x1+-0x108f));}}function ti(_0xd5ed43){if(_0xd5ed43==null)return 0x5f1+0xf46+0x1*-0x1537;let _0x28f772=0x71*0x29+0xb35*0x2+-0xd81*0x3;for(let _0x2c68e2=0x4a2*-0x2+-0xd86*-0x1+0x5*-0xda,_0x338006=_0xd5ed43['length'];_0x2c68e2<_0x338006;_0x2c68e2++)_0x28f772=(_0x28f772<<0x1*-0xa7b+-0x25+0xaa5)-_0x28f772+_0xd5ed43['charCodeAt'](_0x2c68e2),_0x28f772|=-0xa13+-0x197f+0x2392;return _0x28f772;}function XS(_0x4dfc2a){let _0x39c000=0xb34a75f6+-0x5*0x10ef09b6+-0x55*-0x67dfe9;for(let _0x1c1202=0x197d+-0x1012+-0x96b;_0x1c1202<_0x4dfc2a['length'];_0x1c1202++)_0x39c000^=_0x4dfc2a[_0x1c1202],_0x39c000*=0x8ad*0x2c47+-0xd89ea*0x25+0x472*0x53dd;return _0x39c000>>>0x183d+0xb1b*0x3+-0x398e;}const Nx=new am(),kx=[0x5c*0x40+0x132e*0x1+0x4*-0xa8b,-0x34a*0x1+-0x2*0x455+-0x5fc*-0x2,-0x1fda+0xd*-0x133+0x2f79,-0x7e8+-0x15b0+0xed2*0x2,-0xe36+0x1091+0x1*-0x24b],Ux=new Ht();class zt{constructor(_0x4c1ac5,_0x5add1b,_0x3dcc44){this['device']=_0x4c1ac5,this['_elements']=[],this['hasUv0']=!(0x1fb9+-0x1cd+-0x6f*0x45),this['hasUv1']=!(-0xa8b*-0x2+0x537+-0x2c*0x99),this['hasColor']=!(0x12f4*0x2+-0x1*-0x1b1+0x13cc*-0x2),this['hasTangent'+'s']=!(-0x259+-0x1173+0x25*0x89),this['verticesBy'+'teSize']=0xf*-0x15d+-0x3*-0x3a4+0x987,this['vertexCoun'+'t']=_0x3dcc44,this['interleave'+'d']=_0x3dcc44===void(-0x2013+0x1592+0xa81*0x1),this['instancing']=!(0x12e3+0x121*0x4+0xbb3*-0x2),this['size']=_0x5add1b['reduce']((_0x2dfcf1,_0x23ac35)=>_0x2dfcf1+Math['ceil'](_0x23ac35['components']*po[_0x23ac35['type']]/(-0x1f2*-0xb+-0x29*-0xb+0x5*-0x4a1))*(-0x1*0x1e79+-0x25f9+0x4476),0xc91*-0x3+-0xd9e+0x3351);let _0x31b0c0=-0x1*0x1385+0x888+0xafd,_0x42c45d;for(let _0x167264=-0x509*-0x7+-0x1*-0x2689+-0x49c8,_0x2b0fec=_0x5add1b['length'];_0x167264<_0x2b0fec;_0x167264++){const _0x1d0105=_0x5add1b[_0x167264];_0x42c45d=_0x1d0105['components']*po[_0x1d0105['type']],M['assert'](zt['isElementV'+'alid'](_0x4c1ac5,_0x1d0105),'WebGPU\x20doe'+'s\x20not\x20supp'+'ort\x20the\x20fo'+'rmat\x20of\x20ve'+'rtex\x20eleme'+'nt\x20'+_0x1d0105['semantic']+'\x20:\x20'+yx[_0x1d0105['type']]+'\x20x\x20'+_0x1d0105['components']),_0x3dcc44&&(_0x31b0c0=Y['roundUp'](_0x31b0c0,_0x42c45d),M['assert'](_0x42c45d%(-0x17aa+-0x120f+0x29bd)===0x3ba+0x196a+-0x1d24,'Non-interl'+'eaved\x20vert'+'ex\x20format\x20'+'with\x20eleme'+'nt\x20size\x20no'+'t\x20multiple'+'\x20of\x204\x20can\x20'+'have\x20perfo'+'rmance\x20imp'+'act\x20on\x20som'+'e\x20platform'+'s.\x20Element'+'\x20size:\x20'+_0x42c45d));const _0x4252f5=_0x1d0105['asInt']??!(0x1b6b+0x1a46+-0x35b0),_0x29f5dc=_0x4252f5?!(-0x4*-0x19d+0x1790+0xa01*-0x3):_0x1d0105['normalize']??!(-0x1da3+0x176e+-0xa*-0x9f),_0x46b488={'name':_0x1d0105['semantic'],'offset':_0x3dcc44?_0x31b0c0:_0x1d0105['hasOwnProp'+'erty']('offset')?_0x1d0105['offset']:_0x31b0c0,'stride':_0x3dcc44?_0x42c45d:_0x1d0105['hasOwnProp'+'erty']('stride')?_0x1d0105['stride']:this['size'],'dataType':_0x1d0105['type'],'numComponents':_0x1d0105['components'],'normalize':_0x29f5dc,'size':_0x42c45d,'asInt':_0x4252f5};this['_elements']['push'](_0x46b488),_0x3dcc44?_0x31b0c0+=_0x42c45d*_0x3dcc44:_0x31b0c0+=Math['ceil'](_0x42c45d/(0xa16+-0x73c*0x2+0x466))*(-0x7fc+0xf1*0x17+-0xda7),_0x1d0105['semantic']===Yt?this['hasUv0']=!(-0x2ef*0x7+0x8*-0x46+0x15*0x115):_0x1d0105['semantic']===da?this['hasUv1']=!(-0x2*-0xbf7+0x33*-0x18+-0x1326):_0x1d0105['semantic']===kt?this['hasColor']=!(-0xb9*0x22+-0xb*-0x16b+-0x1*-0x8f9):_0x1d0105['semantic']===ci&&(this['hasTangent'+'s']=!(0xf4*-0x1e+-0x13*0xf6+0x2eda));}_0x3dcc44&&(this['verticesBy'+'teSize']=_0x31b0c0),this['_evaluateH'+'ash']();}get['elements'](){return this['_elements'];}static['getDefault'+'Instancing'+'Format'](_0x2b77c8){return Ux['get'](_0x2b77c8,()=>new zt(_0x2b77c8,[{'semantic':ju,'components':0x4,'type':Be},{'semantic':Yu,'components':0x4,'type':Be},{'semantic':Ku,'components':0x4,'type':Be},{'semantic':_n,'components':0x4,'type':Be}]));}static['isElementV'+'alid'](_0x2923f3,_0x3d0907){const _0x2c7c7d=_0x3d0907['components']*po[_0x3d0907['type']];return!(_0x2923f3['isWebGPU']&&!kx['includes'](_0x2c7c7d));}['update'](){M['assert'](!this['device']['isWebGPU'],'VertexForm'+'at#update\x20'+'is\x20not\x20sup'+'ported\x20on\x20'+'WebGPU\x20and'+'\x20VertexFor'+'mat\x20cannot'+'\x20be\x20modifi'+'ed.'),this['_evaluateH'+'ash']();}['_evaluateH'+'ash'](){const _0x4963ed=[],_0x2ad81d=[],_0x39582b=this['_elements']['length'];for(let _0x1bbc7e=0x71a*-0x5+-0xa*0x16d+0x1*0x31c4;_0x1bbc7e<_0x39582b;_0x1bbc7e++){const {name:_0x2e95e3,dataType:_0x334e4b,numComponents:_0x4d82d3,normalize:_0x4b1f48,offset:_0x231c3c,stride:_0x170daa,size:_0x1b3097,asInt:_0x316caa}=this['_elements'][_0x1bbc7e],_0x33ea2c=_0x2e95e3+_0x334e4b+_0x4d82d3+_0x4b1f48+_0x316caa;_0x4963ed['push'](_0x33ea2c);const _0x58cb9c=_0x33ea2c+_0x231c3c+_0x170daa+_0x1b3097;_0x2ad81d['push'](_0x58cb9c);}_0x4963ed['sort']();const _0x2160c6=_0x4963ed['join']();this['batchingHa'+'sh']=ti(_0x2160c6),this['shaderProc'+'essingHash'+'String']=_0x2160c6,this['renderingH'+'ashString']=_0x2ad81d['join']('_'),this['renderingH'+'ash']=Nx['get'](this['renderingH'+'ashString']);}}const Bx=new am(),dc=class dc{constructor(_0x5f1dbb={}){h(this,'_func'),h(this,'_ref'),h(this,'_fail'),h(this,'_zfail'),h(this,'_zpass'),h(this,'_readMask'),h(this,'_writeMask'),h(this,'_dirty',!(-0x15a1+-0x2cf+-0x30e*-0x8)),h(this,'_key'),(this['_func']=_0x5f1dbb['func']??Ni,this['_ref']=_0x5f1dbb['ref']??0x2fc+0xe1d+-0x1119,this['_readMask']=_0x5f1dbb['readMask']??0x4*-0x415+-0xcd*0x29+0x3228,this['_writeMask']=_0x5f1dbb['writeMask']??-0x2*-0x3d7+0x5ec+-0xc9b,this['_fail']=_0x5f1dbb['fail']??nn,this['_zfail']=_0x5f1dbb['zfail']??nn,this['_zpass']=_0x5f1dbb['zpass']??nn,this['_evalKey']());}set['func'](_0x2f1048){this['_func']=_0x2f1048,this['_dirty']=!(0x21bd+-0x26d*-0x3+-0x64*0x69);}get['func'](){return this['_func'];}set['ref'](_0xb9612){this['_ref']=_0xb9612,this['_dirty']=!(-0x472*-0x4+0x62*-0x44+0x840);}get['ref'](){return this['_ref'];}set['fail'](_0x23ca60){this['_fail']=_0x23ca60,this['_dirty']=!(0x68*-0xc+-0x18f5*-0x1+0x61*-0x35);}get['fail'](){return this['_fail'];}set['zfail'](_0x56d89c){this['_zfail']=_0x56d89c,this['_dirty']=!(0x2*0x1be+0x2*0x1c8+-0x70c);}get['zfail'](){return this['_zfail'];}set['zpass'](_0x4c9670){this['_zpass']=_0x4c9670,this['_dirty']=!(0x880+0xe82+-0x1702);}get['zpass'](){return this['_zpass'];}set['readMask'](_0x11250d){this['_readMask']=_0x11250d,this['_dirty']=!(0xa35*-0x1+0x4f*0x46+-0xb65);}get['readMask'](){return this['_readMask'];}set['writeMask'](_0x2e8fb2){this['_writeMask']=_0x2e8fb2,this['_dirty']=!(-0x5e*-0x5b+0x13d*-0x1+-0x1*0x202d);}get['writeMask'](){return this['_writeMask'];}['_evalKey'](){const {_func:_0x3461a4,_ref:_0xfdcde,_fail:_0x202140,_zfail:_0x4fd66f,_zpass:_0x5a4052,_readMask:_0x5b3c75,_writeMask:_0x59e56b}=this,_0x534898=_0x3461a4+','+_0xfdcde+','+_0x202140+','+_0x4fd66f+','+_0x5a4052+','+_0x5b3c75+','+_0x59e56b;this['_key']=Bx['get'](_0x534898),this['_dirty']=!(-0x165a+0x167*0x3+0x1226);}get['key'](){return this['_dirty']&&this['_evalKey'](),this['_key'];}['copy'](_0x466c01){return this['_func']=_0x466c01['_func'],this['_ref']=_0x466c01['_ref'],this['_readMask']=_0x466c01['_readMask'],this['_writeMask']=_0x466c01['_writeMask'],this['_fail']=_0x466c01['_fail'],this['_zfail']=_0x466c01['_zfail'],this['_zpass']=_0x466c01['_zpass'],this['_dirty']=_0x466c01['_dirty'],this['_key']=_0x466c01['_key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}};h(dc,'DEFAULT',Object['freeze'](new dc()));let ai=dc;const wl=new Set(),fc=class fc extends pe{constructor(_0x5370eb,_0x292bc1){var _0x2202c4,_0x4cb0be,_0x5d6322,_0x2c1f40,_0xda7e61,_0x2d5e3d;super(),h(this,'canvas'),h(this,'backBuffer',null),h(this,'backBuffer'+'Size',new J()),h(this,'backBuffer'+'Format'),h(this,'backBuffer'+'Antialias',!(0x17fb*0x1+-0xd97+-0xa63)),h(this,'isWebGPU',!(-0x7eb+0x1*-0x1eee+0x26da)),h(this,'isWebGL2',!(0x227+0x5fc*0x2+-0x116*0xd)),h(this,'isHdr',!(0x1*0x8cc+-0x1040+0x17*0x53)),h(this,'scope'),h(this,'maxIndirec'+'tDrawCount',-0x1*-0x4f1+-0x18be+0x17cd),h(this,'maxAnisotr'+'opy'),h(this,'maxCubeMap'+'Size'),h(this,'maxTexture'+'Size'),h(this,'maxVolumeS'+'ize'),h(this,'maxColorAt'+'tachments',0x827*-0x2+-0x1*-0x73f+0x2*0x488),h(this,'precision'),h(this,'samples'),h(this,'maxSamples',0x8*0xe5+-0x3b3+0x11*-0x34),h(this,'supportsSt'+'encil'),h(this,'supportsCo'+'mpute',!(0x1e43+0x6ee+0x28*-0xee)),h(this,'supportsSt'+'orageTextu'+'reRead',!(0x1*0xc7c+-0xcc5+0x4a)),h(this,'renderTarg'+'et',null),h(this,'shaders',[]),h(this,'textures',[]),h(this,'targets',new Set()),h(this,'renderVers'+'ion',0x509+-0x1788+-0x3b3*-0x5),h(this,'renderPass'+'Index'),h(this,'insideRend'+'erPass',!(-0x14bd+-0x557+0x1a15*0x1)),h(this,'supportsUn'+'iformBuffe'+'rs',!(0x26fe+0x4b1*0x1+-0x2*0x15d7)),h(this,'supportsCl'+'ipDistance'+'s',!(0x1*-0x211e+0x7c*0x14+0x7*0x359)),h(this,'textureFlo'+'atRenderab'+'le'),h(this,'textureHal'+'fFloatRend'+'erable'),h(this,'textureRG1'+'1B10Render'+'able',!(-0xcf7*0x2+-0x78d*0x2+0x2909)),h(this,'textureFlo'+'atFilterab'+'le',!(0x885*-0x3+-0x1*-0xd6+0x18ba)),h(this,'quadVertex'+'Buffer'),h(this,'blendState',new Ct()),h(this,'depthState',new Kt()),h(this,'stencilEna'+'bled',!(0xe6*0x8+0x6c3+-0xdf2)),h(this,'stencilFro'+'nt',new ai()),h(this,'stencilBac'+'k',new ai()),h(this,'dynamicBuf'+'fers'),h(this,'gpuProfile'+'r'),h(this,'defaultCle'+'arOptions',{'color':[-0x2332+0x2662+-0x330,-0x603+-0x117a+0x177d,0x94d*-0x1+0x1c26+-0x12d9,0x1308+0x224d+-0x3554],'depth':0x1,'stencil':0x0,'flags':bo|Co}),h(this,'clientRect',{'width':0x0,'height':0x0}),h(this,'_shadersDi'+'rty',!(-0x1e47+0xd*0x237+0x3*0x7f)),h(this,'capsDefine'+'s',new Map()),h(this,'mapsToClea'+'r',new Set()),(this['canvas']=_0x5370eb,'setAttribu'+'te'in _0x5370eb&&_0x5370eb['setAttribu'+'te']('data-engin'+'e','PlayCanvas'+'\x20'+ja),this['initOption'+'s']={..._0x292bc1},(_0x2202c4=this['initOption'+'s'])['alpha']??(_0x2202c4['alpha']=!(0xd5d+0x2*0x3af+0x1*-0x14bb)),(_0x4cb0be=this['initOption'+'s'])['depth']??(_0x4cb0be['depth']=!(0x19e9+0x77*0x7+0x1*-0x1d2a)),(_0x5d6322=this['initOption'+'s'])['stencil']??(_0x5d6322['stencil']=!(-0x22*0x11+-0x1*0x189b+0x1add)),(_0x2c1f40=this['initOption'+'s'])['antialias']??(_0x2c1f40['antialias']=!(0x631+0x42b+0x52e*-0x2)),(_0xda7e61=this['initOption'+'s'])['powerPrefe'+'rence']??(_0xda7e61['powerPrefe'+'rence']='high-perfo'+'rmance'),(_0x2d5e3d=this['initOption'+'s'])['displayFor'+'mat']??(_0x2d5e3d['displayFor'+'mat']=gx),this['_maxPixelR'+'atio']=Me['browser']?Math['min'](-0x422*0x2+-0xcf9+0x153e,window['devicePixe'+'lRatio']):0x2389+-0x15fe+-0xd8a,this['buffers']=[],this['_vram']={'texShadow':0x0,'texAsset':0x0,'texLightmap':0x0,'tex':0x0,'vb':0x0,'ib':0x0,'ub':0x0,'sb':0x0},this['_shaderSta'+'ts']={'vsCompiled':0x0,'fsCompiled':0x0,'linked':0x0,'materialShaders':0x0,'compileTime':0x0},this['initialize'+'ContextCac'+'hes'](),this['_drawCalls'+'PerFrame']=0x7*-0x37f+-0x1591+0x1*0x2e0a,this['_shaderSwi'+'tchesPerFr'+'ame']=0x2185*0x1+-0x4f6+-0x1*0x1c8f,this['_primsPerF'+'rame']=[]);for(let _0x145c11=Oc;_0x145c11<=$r;_0x145c11++)this['_primsPerF'+'rame'][_0x145c11]=0x3+0x24dc+-0x1*0x24df;this['_renderTar'+'getCreatio'+'nTime']=-0x882+0x80*-0x22+0x5*0x51a,this['scope']=new Ox('Device'),this['textureBia'+'s']=this['scope']['resolve']('textureBia'+'s'),this['textureBia'+'s']['setValue'](-0x132c+-0x5b*0x7+-0x1*-0x15a9);}['postInit'](){const _0x2c2ca9=new zt(this,[{'semantic':Pe,'components':0x2,'type':Be}]),_0x1688b7=new Float32Array([-(0x1*0xda0+-0x91d+-0x482),-(0xfd8*-0x1+0x12ba+-0x2e1),0x212a+-0xdbb+-0x136e,-(0x2532+-0x153e+-0xff3),-(-0xac*0x22+-0x162+0x183b),0x1705*-0x1+-0x484+0x1b8a,-0x1f*-0xc2+-0x105d+-0x720,0x77*-0x12+-0x1*-0x2409+0x1*-0x1baa]);this['quadVertex'+'Buffer']=new xs(this,_0x2c2ca9,-0x1951*0x1+-0xd0f*-0x1+0xc46,{'data':_0x1688b7});}['initCapsDe'+'fines'](){const {capsDefines:_0x3c9c2a}=this;_0x3c9c2a['clear'](),this['textureFlo'+'atFilterab'+'le']&&_0x3c9c2a['set']('CAPS_TEXTU'+'RE_FLOAT_F'+'ILTERABLE',''),this['textureFlo'+'atRenderab'+'le']&&_0x3c9c2a['set']('CAPS_TEXTU'+'RE_FLOAT_R'+'ENDERABLE','');}['destroy'](){var _0x7271ee,_0x4f8195,_0x46f163;this['fire']('destroy'),(_0x7271ee=this['quadVertex'+'Buffer'])==null||_0x7271ee['destroy'](),this['quadVertex'+'Buffer']=null,(_0x4f8195=this['dynamicBuf'+'fers'])==null||_0x4f8195['destroy'](),this['dynamicBuf'+'fers']=null,(_0x46f163=this['gpuProfile'+'r'])==null||_0x46f163['destroy'](),this['gpuProfile'+'r']=null;}['onDestroyS'+'hader'](_0x37e75e){this['fire']('destroy:sh'+'ader',_0x37e75e);const _0x14c3d6=this['shaders']['indexOf'](_0x37e75e);_0x14c3d6!==-(0x17c3+-0x1c5a*-0x1+-0x341c)&&this['shaders']['splice'](_0x14c3d6,0x12d3+-0x1977*-0x1+-0x2c49);}['postDestro'+'y'](){this['scope']=null,this['canvas']=null;}['loseContex'+'t'](){var _0x56982f;this['contextLos'+'t']=!(-0xd8f+0x1*0x25d+0x2*0x599),this['backBuffer'+'Size']['set'](-(-0x3*0xbc3+0x6c8+0x1c82),-(-0x25f8+0x2051+0x5a8));for(const _0xfddaa6 of this['textures'])_0xfddaa6['loseContex'+'t']();for(const _0x1eec73 of this['buffers'])_0x1eec73['loseContex'+'t']();for(const _0x1bd6b7 of this['targets'])_0x1bd6b7['loseContex'+'t']();(_0x56982f=this['gpuProfile'+'r'])==null||_0x56982f['loseContex'+'t']();}['restoreCon'+'text'](){var _0x711450,_0x5a8df8;this['contextLos'+'t']=!(0x875+0x108+-0x97c),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes']();for(const _0x1ef3d4 of this['buffers'])_0x1ef3d4['unlock']();(_0x5a8df8=(_0x711450=this['gpuProfile'+'r'])==null?void(0x42+0x1a22+-0x1a64):_0x711450['restoreCon'+'text'])==null||_0x5a8df8['call'](_0x711450);}['toJSON'](_0x57d0fa){}['initialize'+'ContextCac'+'hes'](){this['vertexBuff'+'ers']=[],this['shader']=null,this['shaderVali'+'d']=void(-0xfb2+0x1859+-0x1bb*0x5),this['shaderAsyn'+'cCompile']=!(0x32*0x76+0x2626+-0x3d31*0x1),this['renderTarg'+'et']=null;}['initialize'+'RenderStat'+'e'](){this['blendState']=new Ct(),this['depthState']=new Kt(),this['cullMode']=Jr,this['vx']=this['vy']=this['vw']=this['vh']=0x20aa+-0x2427+0x37d*0x1,this['sx']=this['sy']=this['sw']=this['sh']=-0x234c+0x1f16+-0xe*-0x4d,this['blendColor']=new ie(-0xbfd+0x2db+0x491*0x2,0x1fe5+0x7ed+-0x27d2,0x44e+-0x1e46+0x19f8,-0x16*0x1af+-0x117*-0x19+0x17*0x6d);}['setStencil'+'State'](_0x573b75,_0x2574af){M['assert'](!(-0xaba*0x3+-0x3*-0x2d7+-0x2*-0xbd5));}['setBlendSt'+'ate'](_0x56a9d3){M['assert'](!(-0x1d8b*-0x1+-0x7d6*0x4+-0x1*-0x1ce));}['setBlendCo'+'lor'](_0xce1b7b,_0x523bec,_0x3607ce,_0x488aff){M['assert'](!(0x1*-0xe5+-0x11ef*0x1+0x12d5*0x1));}['setDepthSt'+'ate'](_0x5e8867){M['assert'](!(0x1*-0x973+0x1c43+-0x12cf));}['setCullMod'+'e'](_0x28ba80){M['assert'](!(-0x1087*-0x1+-0x2119+0x1093));}['setRenderT'+'arget'](_0x33a3b1){this['renderTarg'+'et']=_0x33a3b1;}['setVertexB'+'uffer'](_0x3996e7){_0x3996e7&&this['vertexBuff'+'ers']['push'](_0x3996e7);}['clearVerte'+'xBuffer'](){this['vertexBuff'+'ers']['length']=-0x14c*0x16+-0x1*0xe27+-0x2aaf*-0x1;}['getIndirec'+'tDrawSlot'](){return-0x226e+0x11a+-0x6c*-0x4f;}get['indirectDr'+'awBuffer'](){return null;}['getRenderT'+'arget'](){return this['renderTarg'+'et'];}['initRender'+'Target'](_0x4eb618){if(_0x4eb618['initialize'+'d'])return;const _0x4a8b36=de();this['fire']('fbo:create',{'timestamp':_0x4a8b36,'target':this}),_0x4eb618['init'](),this['targets']['add'](_0x4eb618),this['_renderTar'+'getCreatio'+'nTime']+=de()-_0x4a8b36;}['draw'](_0x1e32c7,_0x5d6292,_0x235429,_0xd7b9e,_0x3ce69e=!(0x691*0x4+0x95f*0x3+-0x3661),_0x28c906=!(0x185e+-0x11f5*0x1+-0x669*0x1)){M['assert'](!(0x7c0*0x3+-0x23cc+-0x9*-0x165));}['_isBrowser'+'Interface'](_0x1fe4ff){return this['_isImageBr'+'owserInter'+'face'](_0x1fe4ff)||this['_isImageCa'+'nvasInterf'+'ace'](_0x1fe4ff)||this['_isImageVi'+'deoInterfa'+'ce'](_0x1fe4ff);}['_isImageBr'+'owserInter'+'face'](_0x1de502){return typeof ImageBitmap<'u'&&_0x1de502 instanceof ImageBitmap||typeof HTMLImageElement<'u'&&_0x1de502 instanceof HTMLImageElement;}['_isImageCa'+'nvasInterf'+'ace'](_0x2bb71f){return typeof HTMLCanvasElement<'u'&&_0x2bb71f instanceof HTMLCanvasElement;}['_isImageVi'+'deoInterfa'+'ce'](_0x59e67e){return typeof HTMLVideoElement<'u'&&_0x59e67e instanceof HTMLVideoElement;}['resizeCanv'+'as'](_0x25e6d5,_0x5073ed){const _0x316657=Math['min'](this['_maxPixelR'+'atio'],Me['browser']?window['devicePixe'+'lRatio']:-0x1b1*0xb+0xf91+0x30b),_0x333c5a=Math['floor'](_0x25e6d5*_0x316657),_0x1e0e54=Math['floor'](_0x5073ed*_0x316657);(_0x333c5a!==this['canvas']['width']||_0x1e0e54!==this['canvas']['height'])&&this['setResolut'+'ion'](_0x333c5a,_0x1e0e54);}['setResolut'+'ion'](_0x2dcffe,_0x358c55){this['canvas']['width']=_0x2dcffe,this['canvas']['height']=_0x358c55,this['fire'](fc['EVENT_RESI'+'ZE'],_0x2dcffe,_0x358c55);}['update'](){this['updateClie'+'ntRect']();}['updateClie'+'ntRect'](){if(Me['worker'])this['clientRect']['width']=this['canvas']['width'],this['clientRect']['height']=this['canvas']['height'];else{const _0x5e7acc=this['canvas']['getBoundin'+'gClientRec'+'t']();this['clientRect']['width']=_0x5e7acc['width'],this['clientRect']['height']=_0x5e7acc['height'];}}get['width'](){return this['canvas']['width'];}get['height'](){return this['canvas']['height'];}set['fullscreen'](_0x39928b){M['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.');}get['fullscreen'](){return M['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.'),!(0x78b*-0x1+0x6b9*-0x4+-0x89c*-0x4);}set['maxPixelRa'+'tio'](_0x2425ea){this['_maxPixelR'+'atio']=_0x2425ea;}get['maxPixelRa'+'tio'](){return this['_maxPixelR'+'atio'];}get['deviceType'](){return this['_deviceTyp'+'e'];}['startRende'+'rPass'](_0x16f930){}['endRenderP'+'ass'](_0x575852){}['startCompu'+'tePass'](_0x42cf32){}['endCompute'+'Pass'](){}['frameStart'](){this['renderPass'+'Index']=-0x9+0x8bd*-0x1+0x8c6,this['renderVers'+'ion']++,M['call'](()=>{if(ni['get'](o0)){const _0x3269b1=this['textures']['slice']();_0x3269b1['sort']((_0x1e646a,_0x4d28e1)=>_0x4d28e1['gpuSize']-_0x1e646a['gpuSize']),M['log']('Textures:\x20'+_0x3269b1['length']);let _0x1d3223=-0x106*-0x5+0x11e0+-0xb7f*0x2;_0x3269b1['forEach']((_0x1c9063,_0x36af31)=>{const _0x13ddf2=_0x1c9063['gpuSize'];_0x1d3223+=_0x13ddf2,M['log'](_0x36af31+'.\x20'+_0x1c9063['name']+'\x20'+_0x1c9063['width']+'x'+_0x1c9063['height']+'\x20VRAM:\x20'+(_0x13ddf2/(-0x509*0x1+-0x1894+0x1*0x219d)/(-0xc9*0x2f+0x1ec5+-0x2*-0x511))['toFixed'](0xa6*0x26+-0x26da+-0x1c7*-0x8)+'\x20MB');}),M['log']('Total:\x20'+(_0x1d3223/(0x3*-0x107+-0x10b3+-0x1*-0x17c8)/(-0xa*0x18a+0x1f5+0x116f))['toFixed'](0x57*0x4f+-0xc3a+-0xe9d)+'MB');}});}['frameEnd'](){this['mapsToClea'+'r']['forEach'](_0x45d33b=>_0x45d33b['clear']()),this['mapsToClea'+'r']['clear']();}['computeDis'+'patch'](_0x44434f,_0x29e7e7='Unnamed'){}['getRendera'+'bleHdrForm'+'at'](_0x4048bb=[pn,at,Bt],_0x1d8fbf=!(0x2e9*0x1+0x1640+0x3*-0x863),_0x1c2cef=-0x2052+0x1c*0x3f+-0x11*-0x17f){for(let _0x2e4bc9=-0x5c*0x26+0xc5*-0x2f+0x1*0x31d3;_0x2e4bc9<_0x4048bb['length'];_0x2e4bc9++){const _0x24e827=_0x4048bb[_0x2e4bc9];switch(_0x24e827){case pn:{if(this['textureRG1'+'1B10Render'+'able'])return _0x24e827;break;}case at:if(this['textureHal'+'fFloatRend'+'erable'])return _0x24e827;break;case Bt:if(this['isWebGPU']&&_0x1c2cef>-0x4*0x5d6+0x1f6*0xa+0x3bd*0x1)continue;if(this['textureFlo'+'atRenderab'+'le']&&(!_0x1d8fbf||this['textureFlo'+'atFilterab'+'le']))return _0x24e827;break;}}}['validateAt'+'tributes'](_0x46c9bf,_0x29953d,_0x472785){M['call'](()=>{wl['clear'](),_0x29953d==null||_0x29953d['elements']['forEach'](_0x101241=>wl['add'](De[_0x101241['name']])),_0x472785==null||_0x472785['elements']['forEach'](_0x4fe084=>wl['add'](De[_0x4fe084['name']]));for(const [_0x5559c5,_0x1aa96d]of _0x46c9bf['attributes'])wl['has'](_0x5559c5)||M['errorOnce']('Vertex\x20att'+'ribute\x20['+_0x1aa96d+(']\x20at\x20locat'+'ion\x20')+_0x5559c5+('\x20required\x20'+'by\x20the\x20sha'+'der\x20is\x20not'+'\x20present\x20i'+'n\x20the\x20curr'+'ently\x20assi'+'gned\x20verte'+'x\x20buffers,'+'\x20while\x20ren'+'dering\x20[')+Q['toString']()+']',{'shader':_0x46c9bf,'vb0Format':_0x29953d,'vb1Format':_0x472785});});}};h(fc,'EVENT_RESI'+'ZE','resizecanv'+'as');let zh=fc,zx=0x161*-0x1+-0x149e+-0x15ff*-0x1;class vt{constructor(_0x578745={}){h(this,'name'),h(this,'_device'),h(this,'_colorBuff'+'er'),h(this,'_colorBuff'+'ers'),h(this,'_depthBuff'+'er'),h(this,'_depth'),h(this,'_stencil'),h(this,'_samples'),h(this,'autoResolv'+'e'),h(this,'_face'),h(this,'_mipLevel'),h(this,'_mipmaps'),h(this,'flipY');var _0x3c9269,_0x230326,_0xdf4d5e,_0x4e6f37,_0xd9df0f,_0x3ff4df;M['assert'](!(_0x578745 instanceof zh),'pc.RenderT'+'arget\x20cons'+'tructor\x20no'+'\x20longer\x20ac'+'cepts\x20Grap'+'hicsDevice'+'\x20parameter'+'.'),this['id']=zx++;const _0x3c83f8=((_0x3c9269=_0x578745['colorBuffe'+'r'])==null?void(-0x7c0+-0x2520+-0x2*-0x1670):_0x3c9269['device'])??((_0x230326=_0x578745['colorBuffe'+'rs'])==null?void(0x1*0x2621+-0x1*0x15a+0x1*-0x24c7):_0x230326[0xc6d*-0x1+0x1*-0xef7+0x1b64]['device'])??((_0xdf4d5e=_0x578745['depthBuffe'+'r'])==null?void(0x167e+-0x1681*0x1+0x3*0x1):_0xdf4d5e['device'])??_0x578745['graphicsDe'+'vice'];M['assert'](_0x3c83f8,'Failed\x20to\x20'+'obtain\x20the'+'\x20device,\x20c'+'olorBuffer'+'\x20nor\x20depth'+'Buffer\x20sto'+'re\x20it.'),this['_device']=_0x3c83f8;const {maxSamples:_0x52840b}=this['_device'];if(this['_samples']=Math['min'](_0x578745['samples']??0xbf8*-0x3+-0xec6+-0x19*-0x207,_0x52840b),_0x3c83f8['isWebGPU']&&(this['_samples']=this['_samples']>0x35e*0xb+0x56+-0x255f?_0x52840b:0x3*-0x8db+-0x5bc*0x4+0x3182*0x1),this['_colorBuff'+'er']=_0x578745['colorBuffe'+'r'],_0x578745['colorBuffe'+'r']&&(this['_colorBuff'+'ers']=[_0x578745['colorBuffe'+'r']]),this['_depthBuff'+'er']=_0x578745['depthBuffe'+'r'],this['_face']=_0x578745['face']??0x1*-0x1101+0x2*0xe94+-0xc27,this['_depthBuff'+'er']){const _0x41ee95=this['_depthBuff'+'er']['_format'];_0x41ee95===ki||_0x41ee95===an?(this['_depth']=!(0x2401+0x26a+-0x266b),this['_stencil']=!(0x43d*-0x7+-0x886*-0x1+0x1526)):_0x41ee95===Cc?(this['_depth']=!(0x1*-0xdd5+-0x24b*-0xd+-0xffa),this['_stencil']=!(0x25fd+0x265+0x3*-0xd76)):_0x41ee95===Hi&&this['_depthBuff'+'er']['device']['isWebGPU']&&this['_samples']>-0x1c27*-0x1+-0xe7e+-0xda8?(this['_depth']=!(0x2502+0x2*0xf0d+-0x431c),this['_stencil']=!(-0x3*-0x5ba+-0x13b5*0x1+0xc*0x36)):(M['warn']('Incorrect\x20'+'depthBuffe'+'r\x20format.\x20'+'Must\x20be\x20pc'+'.PIXELFORM'+'AT_DEPTH\x20o'+'r\x20pc.PIXEL'+'FORMAT_DEP'+'THSTENCIL'),this['_depth']=!(-0xa27+0x1f17+-0x1*0x14ef),this['_stencil']=!(0xb2*0x2d+0x1998+-0x38e1));}else this['_depth']=_0x578745['depth']??!(0x715+0x1da6+-0x24bb),this['_stencil']=_0x578745['stencil']??!(-0x1f5a+-0x21f0+-0x414b*-0x1);_0x578745['colorBuffe'+'rs']&&(M['assert'](!this['_colorBuff'+'ers'],'When\x20const'+'ructing\x20Re'+'nderTarget'+'\x20and\x20optio'+'ns.colorBu'+'ffers\x20is\x20u'+'sed,\x20optio'+'ns.colorBu'+'ffer\x20must\x20'+'not\x20be\x20use'+'d.'),this['_colorBuff'+'ers']||(this['_colorBuff'+'ers']=[..._0x578745['colorBuffe'+'rs']],this['_colorBuff'+'er']=_0x578745['colorBuffe'+'rs'][0x55f+-0x1f1b*0x1+0x19bc])),this['autoResolv'+'e']=_0x578745['autoResolv'+'e']??!(0x1fb+-0x211d*-0x1+-0x2318),this['name']=_0x578745['name'],this['name']||(this['name']=(_0x4e6f37=this['_colorBuff'+'er'])==null?void(0x1813*0x1+-0xeed*0x2+0x11*0x57):_0x4e6f37['name']),this['name']||(this['name']=(_0xd9df0f=this['_depthBuff'+'er'])==null?void(-0x2186+0x16*0xd+0x11*0x1e8):_0xd9df0f['name']),this['name']||(this['name']='Untitled'),this['flipY']=_0x578745['flipY']??!(-0x2693+-0x555+0x3*0xea3),this['_mipLevel']=_0x578745['mipLevel']??0x1e66+-0x17d8+-0x68e,this['_mipLevel']>-0x18ad+0x8*0x3b+-0xa7*-0x23&&this['_depth']&&(M['error']('Rendering\x20'+'to\x20a\x20mipLe'+'vel\x20is\x20not'+'\x20supported'+'\x20when\x20rend'+'er\x20target\x20'+'uses\x20a\x20dep'+'th\x20buffer.'+'\x20Ignoring\x20'+'mipLevel\x20'+this['_mipLevel']+('\x20for\x20rende'+'r\x20target\x20')+this['name'],{'renderTarget':this,'options':_0x578745}),this['_mipLevel']=0x1a*-0x95+-0x10*-0x270+-0x17de*0x1),this['_mipmaps']=_0x578745['mipLevel']===void(0xca5+0x32*-0x2f+0x377*-0x1),this['validateMr'+'t'](),this['impl']=_0x3c83f8['createRend'+'erTargetIm'+'pl'](this),M['trace'](Wm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+('\x20[samples:'+'\x20')+this['samples']+']'+((_0x3ff4df=this['_colorBuff'+'ers'])!=null&&_0x3ff4df['length']?'[MRT:\x20'+this['_colorBuff'+'ers']['length']+']':'')+(this['colorBuffe'+'r']?'[Color]':'')+(this['depth']?'[Depth]':'')+(this['stencil']?'[Stencil]':'')+'[Face:'+this['face']+']');}['destroy'](){M['trace'](Wm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x368c5e=this['_device'];_0x368c5e&&(_0x368c5e['targets']['delete'](this),_0x368c5e['renderTarg'+'et']===this&&_0x368c5e['setRenderT'+'arget'](null),this['destroyFra'+'meBuffers']());}['destroyFra'+'meBuffers'](){const _0x3f45ee=this['_device'];_0x3f45ee&&this['impl']['destroy'](_0x3f45ee);}['destroyTex'+'tureBuffer'+'s'](){var _0x35c5ad,_0x42a62d;(_0x35c5ad=this['_depthBuff'+'er'])==null||_0x35c5ad['destroy'](),this['_depthBuff'+'er']=null,(_0x42a62d=this['_colorBuff'+'ers'])==null||_0x42a62d['forEach'](_0x2e6169=>{_0x2e6169['destroy']();}),this['_colorBuff'+'ers']=null,this['_colorBuff'+'er']=null;}['resize'](_0x4d798a,_0x2b5dc8){var _0x873c72,_0x5dd533;if(this['width']!==_0x4d798a||this['height']!==_0x2b5dc8){if(this['mipLevel']>0x9b2*-0x3+-0x18d6+0x35ec){M['warn']('Only\x20a\x20ren'+'der\x20target'+'\x20rendering'+'\x20to\x20mipLev'+'el\x200\x20can\x20b'+'e\x20resized,'+'\x20ignoring.',this);return;}const _0x3fca57=this['_device'];this['destroyFra'+'meBuffers'](),_0x3fca57['renderTarg'+'et']===this&&_0x3fca57['setRenderT'+'arget'](null),(_0x873c72=this['_depthBuff'+'er'])==null||_0x873c72['resize'](_0x4d798a,_0x2b5dc8),(_0x5dd533=this['_colorBuff'+'ers'])==null||_0x5dd533['forEach'](_0x421ac7=>{_0x421ac7['resize'](_0x4d798a,_0x2b5dc8);}),this['validateMr'+'t'](),this['impl']=_0x3fca57['createRend'+'erTargetIm'+'pl'](this);}}['validateMr'+'t'](){M['call'](()=>{if(this['_colorBuff'+'ers']){const {width:_0x36e78f,height:_0xf30314,cubemap:_0x280035,volume:_0x1d793d}=this['_colorBuff'+'ers'][-0xdaa+-0x1218+-0x3*-0xa96];for(let _0x16ed1d=-0x1*0x249e+-0xcb6+0x3155;_0x16ed1d<this['_colorBuff'+'ers']['length'];_0x16ed1d++){const _0xc87c47=this['_colorBuff'+'ers'][_0x16ed1d];M['assert'](_0xc87c47['width']===_0x36e78f,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20width',this),M['assert'](_0xc87c47['height']===_0xf30314,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20height',this),M['assert'](_0xc87c47['cubemap']===_0x280035,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20cubemap\x20s'+'etting',this),M['assert'](_0xc87c47['volume']===_0x1d793d,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20volume\x20se'+'tting',this);}}});}['init'](){this['impl']['init'](this['_device'],this);}get['initialize'+'d'](){return this['impl']['initialize'+'d'];}get['device'](){return this['_device'];}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['resolve'](_0x3b291e=!(0x1*-0x183d+0x1e91+0xf*-0x6c),_0x33cae4=!!this['_depthBuff'+'er']){this['_device']&&this['_samples']>-0xf8e+0x21c+0xd73&&(Q['pushGpuMar'+'ker'](this['_device'],'RESOLVE-RT'+':'+this['name']+':'+(_0x3b291e?'[color]':'')+':'+(_0x33cae4?'[depth]':'')),this['impl']['resolve'](this['_device'],this,_0x3b291e,_0x33cae4),Q['popGpuMark'+'er'](this['_device']));}['copy'](_0x488766,_0x275c45,_0x265040){if(!this['_device']){if(_0x488766['_device'])this['_device']=_0x488766['_device'];else return M['error']('Render\x20tar'+'gets\x20are\x20n'+'ot\x20initial'+'ized'),!(0x1*0x437+0x194*0x5+0x60d*-0x2);}Q['pushGpuMar'+'ker'](this['_device'],'COPY-RT:'+_0x488766['name']+'->'+this['name']);const _0x145835=this['_device']['copyRender'+'Target'](_0x488766,this,_0x275c45,_0x265040);return Q['popGpuMark'+'er'](this['_device']),_0x145835;}get['samples'](){return this['_samples'];}get['depth'](){return this['_depth'];}get['stencil'](){return this['_stencil'];}get['colorBuffe'+'r'](){return this['_colorBuff'+'er'];}['getColorBu'+'ffer'](_0x5cd1ee){var _0x24db31;return(_0x24db31=this['_colorBuff'+'ers'])==null?void(-0x11c9*-0x2+-0xba*0x1f+-0xd0c):_0x24db31[_0x5cd1ee];}get['depthBuffe'+'r'](){return this['_depthBuff'+'er'];}get['face'](){return this['_face'];}get['mipLevel'](){return this['_mipLevel'];}get['mipmaps'](){return this['_mipmaps'];}get['width'](){var _0x3ffa9a,_0x24da4d;let _0x361037=((_0x3ffa9a=this['_colorBuff'+'er'])==null?void(0x584*-0x2+-0x976+0x147e):_0x3ffa9a['width'])||((_0x24da4d=this['_depthBuff'+'er'])==null?void(0xae5+0x1880+0xd*-0x2b9):_0x24da4d['width'])||this['_device']['width'];return this['_mipLevel']>-0x1d2c*0x1+-0x1*0x1d6b+0x3a97&&(_0x361037=Ui['calcLevelD'+'imension'](_0x361037,this['_mipLevel'])),_0x361037;}get['height'](){var _0x1b5655,_0x37b88a;let _0x5f5dc2=((_0x1b5655=this['_colorBuff'+'er'])==null?void(-0x8e5+0x106e+-0x789):_0x1b5655['height'])||((_0x37b88a=this['_depthBuff'+'er'])==null?void(-0x23ef+0xef0+0x14ff):_0x37b88a['height'])||this['_device']['height'];return this['_mipLevel']>-0x215+0xb9b+-0x4c3*0x2&&(_0x5f5dc2=Ui['calcLevelD'+'imension'](_0x5f5dc2,this['_mipLevel'])),_0x5f5dc2;}['isColorBuf'+'ferSrgb'](_0x392e61=0x2*-0x341+-0x21*-0xc2+0x250*-0x8){if(this['device']['backBuffer']===this)return Rh(this['device']['backBuffer'+'Format']);const _0x1d8f76=this['getColorBu'+'ffer'](_0x392e61);return _0x1d8f76?Rh(_0x1d8f76['format']):!(-0x843+0x1*-0x9a5+0x11e9);}}const Vx={'equals'(_0x31564a,_0x3713dd){if(_0x31564a['length']!==_0x3713dd['length'])return!(-0xcab*0x3+-0x1e49+-0x1*-0x444b);for(let _0x468fef=-0x10a*0xb+0x154c+-0x6*0x1a5;_0x468fef<_0x31564a['length'];_0x468fef++)if(_0x31564a[_0x468fef]!==_0x3713dd[_0x468fef])return!(0x115c+-0x185e+-0x1*-0x703);return!(-0x1*0xbef+0x66*-0x3e+-0x71*-0x53);}};class jc{constructor(){h(this,'_refCount',0x2b3*0x1+-0x22*0x9f+0x126b);}['incRefCoun'+'t'](){this['_refCount']++;}['decRefCoun'+'t'](){this['_refCount']--;}get['refCount'](){return this['_refCount'];}}class Gx extends jc{constructor(_0x47e020){super(),h(this,'object'),(this['object']=_0x47e020,this['incRefCoun'+'t']());}}class Hx{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach'](_0x23ceff=>{var _0x229bb9;(_0x229bb9=_0x23ceff['object'])==null||_0x229bb9['destroy']();}),this['cache']['clear']();}['clear'](){this['cache']['clear']();}['get'](_0x4a6474){const _0x52b054=this['cache']['get'](_0x4a6474);return _0x52b054?(_0x52b054['incRefCoun'+'t'](),_0x52b054['object']):null;}['set'](_0x308f9b,_0x8897cc){M['assert'](!this['cache']['has'](_0x308f9b),'RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'put\x20object'+'\x20with\x20key\x20'+'that\x20alrea'+'dy\x20exists\x20'+'in\x20the\x20cac'+'he',{'key':_0x308f9b,'object':_0x8897cc}),this['cache']['set'](_0x308f9b,new Gx(_0x8897cc));}['release'](_0x3c7c90){var _0x360a20;const _0x3b4665=this['cache']['get'](_0x3c7c90);_0x3b4665?(_0x3b4665['decRefCoun'+'t'](),_0x3b4665['refCount']===-0x1039*0x1+0x1c04+-0xbcb&&(this['cache']['delete'](_0x3c7c90),(_0x360a20=_0x3b4665['object'])==null||_0x360a20['destroy']())):M['warn']('RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'release\x20ob'+'ject\x20that\x20'+'is\x20not\x20in\x20'+'the\x20cache',{'key':_0x3c7c90});}}class Wx extends Hx{['loseContex'+'t'](_0x2be2a7){this['clear']();}}const $x=new Ht(),ad=_0x3fad72=>$x['get'](_0x3fad72,()=>new Wx()),Tt=[];Tt[Us]=-0x222a+-0xa4+0x13*0x1d5,Tt[ia]=0x12cd+0x9a4+-0x1c6f,Tt[rs]=0x2244+-0x1f51*-0x1+-0x4192,Tt[gn]=0x1*0x21b9+0x13*-0x110+-0xd85,Tt[sa]=0xf48+-0x20e9+-0x11a2*-0x1,Tt[qr]=0x13d0*-0x1+0xd63+0x66f,Tt[jr]=0x78a+-0x2065+-0x1*-0x18de,Tt[Yr]=0x2707+0x18eb+0x1ff7*-0x2,Tt[on]=-0x1a34+-0x25b6+-0x3feb*-0x1,Tt[Lo]=0x2b*0xa+0x2682+0x1*-0x282e,Tt[Ro]=-0x2282+-0x1ca3*0x1+-0xfca*-0x4,Tt[Oo]=-0x3b5*-0x1+0xc77+-0x1028,Tt[kh]=-0x3*0x7+0x1*0x1969+-0x194c,Tt[Sn]=0x986+0x2314+0x3*-0xeda,Tt[Js]=-0x1*-0x38f+-0x1*0x134+-0x24b,Tt[yn]=0x11fc+-0x135a*0x1+-0x9*-0x27,Tt[vn]=-0x209*-0x1+-0x4b8*-0x1+-0x1*0x6bf,Tt[xn]=0x2411+-0x3*0x259+0x1d03*-0x1,Tt[Tn]=0x6*0x3ee+0x295*-0x9+0x1*-0x53;class ct{constructor(_0x5afee3,_0x336f0c,_0x53c902=-0x227*0x6+-0x216+0xf00){h(this,'name'),h(this,'type'),h(this,'byteSize'),h(this,'offset'),h(this,'scopeId'),h(this,'count'),h(this,'numCompone'+'nts');if(this['shortName']=_0x5afee3,this['name']=_0x53c902?_0x5afee3+'[0]':_0x5afee3,this['type']=_0x336f0c,this['numCompone'+'nts']=Tt[_0x336f0c],M['assert'](this['numCompone'+'nts'],'Unhandled\x20'+'uniform\x20fo'+'rmat\x20'+_0x336f0c+'\x20used\x20for\x20'+_0x5afee3),this['updateType']=_0x336f0c,_0x53c902>-0xcc*0x25+-0xb3*-0x1d+-0x935*-0x1)switch(_0x336f0c){case Us:this['updateType']=Uc;break;case sa:this['updateType']=wn;break;case yn:this['updateType']=Vc;break;case on:this['updateType']=Gc;break;case ia:this['updateType']=Bc;break;case qr:this['updateType']=En;break;case vn:this['updateType']=Hc;break;case Lo:this['updateType']=Wc;break;case rs:this['updateType']=zc;break;case jr:this['updateType']=An;break;case xn:this['updateType']=$c;break;case Ro:this['updateType']=Xc;break;case gn:this['updateType']=Qu;break;case Yr:this['updateType']=Uh;break;case Tn:this['updateType']=Ju;break;case Oo:this['updateType']=em;break;case Js:this['updateType']=IS;break;default:M['error']('Uniform\x20ar'+'ray\x20of\x20typ'+'e\x20'+DS[_0x336f0c]+('\x20is\x20not\x20su'+'pported\x20wh'+'en\x20process'+'ing\x20unifor'+'m\x20\x27')+_0x5afee3+'\x27.'),M['call'](()=>{this['invalid']=!(-0x6d5+-0x1*-0xae7+0x1*-0x412);});break;}this['count']=_0x53c902,M['assert'](!isNaN(_0x53c902),'Unsupporte'+'d\x20uniform:'+'\x20'+_0x5afee3+'['+_0x53c902+']'),M['call'](()=>{isNaN(_0x53c902)&&(this['invalid']=!(0x3*-0x8e9+0x565*-0x1+0x1*0x2020));});let _0x587245=this['numCompone'+'nts'];_0x53c902&&(_0x587245=Y['roundUp'](_0x587245,-0x1fab+0xc47*-0x1+-0x296*-0x11)),this['byteSize']=_0x587245*(-0x260c+0x230b+0x305),_0x53c902&&(this['byteSize']*=_0x53c902),M['assert'](this['byteSize'],'Unknown\x20by'+'te\x20size\x20fo'+'r\x20uniform\x20'+'format\x20'+_0x336f0c+'\x20used\x20for\x20'+_0x5afee3);}get['isArrayTyp'+'e'](){return this['count']>0x2042+0x242*0x11+0xc*-0x5e3;}['calculateO'+'ffset'](_0x3288b2){let _0x86a8d0=this['byteSize']<=0x1be3*-0x1+0x2178+-0x58d?this['byteSize']:-0x229*-0x2+-0x222d+0x1deb;this['count']&&(_0x86a8d0=0x46d+-0x825+0x3c8),_0x3288b2=Y['roundUp'](_0x3288b2,_0x86a8d0),this['offset']=_0x3288b2/(0x1*-0x4bb+-0x486+0x945);}}class qS{constructor(_0x192a62,_0x3ae978){h(this,'byteSize',0x1d44+0x1852*0x1+0x169*-0x26),h(this,'map',new Map()),(this['scope']=_0x192a62['scope'],this['uniforms']=_0x3ae978);let _0x26ad29=0x225e+-0x100b+-0x1253;for(let _0x4a86aa=-0xe84+0x1a91+0xc0d*-0x1;_0x4a86aa<_0x3ae978['length'];_0x4a86aa++){const _0x51f386=_0x3ae978[_0x4a86aa];_0x51f386['calculateO'+'ffset'](_0x26ad29),_0x26ad29=_0x51f386['offset']*(-0x577+0xab9+0x2*-0x29f)+_0x51f386['byteSize'],_0x51f386['scopeId']=this['scope']['resolve'](_0x51f386['name']),this['map']['set'](_0x51f386['name'],_0x51f386);}this['byteSize']=Y['roundUp'](_0x26ad29,0x7e*0x45+0x134f+-0x3535);}['get'](_0x125b78){return this['map']['get'](_0x125b78);}}const gr='Preprocess'+'or',bs=/[ \t]*#(ifn?def|if|endif|else|elif|define|undef|extension|include)/g,nd=/define[ \t]+([^\n]+)\r?(?:\n|$)/g,Sp=/extension[ \t]+([\w-]+)[ \t]*:[ \t]*(enable|require)/g,od=/undef[ \t]+([^\n]+)\r?(?:\n|$)/g,ld=/(ifdef|ifndef|if)[ \t]*([^\r\n]+)\r?\n/g,hd=/(endif|else|elif)(?:[ \t]+([^\r\n]*))?\r?\n?/g,yp=/\{?[\w-]+\}?/,Xx=/(!|\s)?defined\(([\w-]+)\)/,qx=/!?defined\s*\([^)]*\)/g,jx=/!?defined\s*$/,Yx=/([a-z_]\w*)\s*(==|!=|<|<=|>|>=)\s*([\w"']+)/i,Kx=/[+\-]/g,cd=/include[ \t]+"([\w-]+)(?:\s*,\s*([\w-]+))?"/g,Zx=/\{i\}/g,vp=/(pcFragColor[1-8])\b/g,Mt=class Mt{static['run'](_0x2ef7e0,_0x294a9c=new Map(),_0x3a9642={}){Mt['sourceName']=_0x3a9642['sourceName'],_0x2ef7e0=this['stripComme'+'nts'](_0x2ef7e0),_0x2ef7e0=_0x2ef7e0['split'](/\r?\n/)['map'](_0x4792ad=>_0x4792ad['trimEnd']())['join']('\x0a');const _0x2e5e6d=new Map(),_0x2d31bd=new Map();if(_0x2ef7e0=this['_preproces'+'s'](_0x2ef7e0,_0x2e5e6d,_0x2d31bd,_0x294a9c,_0x3a9642['stripDefin'+'es']),_0x2ef7e0===null)return null;const _0x10bd2b=new Map();return _0x2e5e6d['forEach']((_0x299242,_0x39717c)=>{Number['isInteger'](parseFloat(_0x299242))&&!_0x299242['includes']('.')&&_0x10bd2b['set'](_0x39717c,_0x299242);}),_0x2ef7e0=this['stripComme'+'nts'](_0x2ef7e0),_0x2ef7e0=this['stripUnuse'+'dColorAtta'+'chments'](_0x2ef7e0,_0x3a9642),_0x2ef7e0=this['RemoveEmpt'+'yLines'](_0x2ef7e0),_0x2ef7e0=this['processArr'+'aySize'](_0x2ef7e0,_0x10bd2b),_0x2ef7e0=this['injectDefi'+'nes'](_0x2ef7e0,_0x2d31bd),_0x2ef7e0;}static['stripUnuse'+'dColorAtta'+'chments'](_0x442817,_0x391b7c){if(_0x391b7c['stripUnuse'+'dColorAtta'+'chments']){const _0x2852d7=new Map(),_0x355930=_0x442817['match'](vp);if(_0x355930==null||_0x355930['forEach'](_0x428a0e=>{const _0x5a8e3a=parseInt(_0x428a0e['charAt'](_0x428a0e['length']-(-0x1*0xd2d+-0x1055*-0x2+-0x137c)),-0xa*-0x4c+0xdb7+-0x10a5);_0x2852d7['set'](_0x5a8e3a,(_0x2852d7['get'](_0x5a8e3a)??-0xc10+-0x1df*-0xe+-0xe22)+(0x7fa*-0x1+-0x2567*0x1+0x2d62));}),Array['from'](_0x2852d7['values']())['some'](_0x5a6ace=>_0x5a6ace===-0x149d+0xe*0x27+-0x49f*-0x4)){const _0x5aab02=_0x442817['split']('\x0a'),_0x13a056=[];for(let _0x1c18a9=0xb16+-0x18d8+0xdc2;_0x1c18a9<_0x5aab02['length'];_0x1c18a9++){const _0xf4554e=_0x5aab02[_0x1c18a9]['match'](vp);if(_0xf4554e){const _0x3445e4=parseInt(_0xf4554e[-0xa16+-0x1863*-0x1+0x1*-0xe4d]['charAt'](_0xf4554e[-0x25c5+-0x4e5+-0x1*-0x2aaa]['length']-(-0x48c+0xc5c*0x2+-0x3*0x6b9)),0xa2c+-0xf62*-0x2+-0x417*0xa);if(_0x3445e4>0x2378+-0x12*0xf9+-0x11f6&&_0x2852d7['get'](_0x3445e4)===-0xed2+0x1f24+-0x1051)continue;}_0x13a056['push'](_0x5aab02[_0x1c18a9]);}_0x442817=_0x13a056['join']('\x0a');}}return _0x442817;}static['stripComme'+'nts'](_0x514fb0){return _0x514fb0['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1');}static['processArr'+'aySize'](_0x8004de,_0x10c654){return _0x8004de!==null&&_0x10c654['forEach']((_0x20d5c6,_0x271603)=>{_0x8004de=_0x8004de['replace'](new RegExp('\x5c['+_0x271603+'\x5c]','g'),'['+_0x20d5c6+']');}),_0x8004de;}static['injectDefi'+'nes'](_0x167aee,_0x5ced78){if(_0x167aee!==null&&_0x5ced78['size']>-0x5*0x83+-0x1df1+0x50*0x68){const _0x523e7a=_0x167aee['split']('\x0a');_0x5ced78['forEach']((_0x7695da,_0x48cfbc)=>{const _0x761b8d=new RegExp(_0x48cfbc,'g');for(let _0x39b74e=-0x77f+-0x2d7*-0x3+0x83*-0x2;_0x39b74e<_0x523e7a['length'];_0x39b74e++)_0x523e7a[_0x39b74e]['includes']('#')||(_0x523e7a[_0x39b74e]=_0x523e7a[_0x39b74e]['replace'](_0x761b8d,_0x7695da));}),_0x167aee=_0x523e7a['join']('\x0a');}return _0x167aee;}static['RemoveEmpt'+'yLines'](_0x51c664){return _0x51c664!==null&&(_0x51c664=_0x51c664['split'](/\r?\n/)['map'](_0x2e836a=>_0x2e836a['trim']()===''?'':_0x2e836a)['join']('\x0a'),_0x51c664=_0x51c664['replace'](/(\n\n){3,}/g,'\x0a\x0a')),_0x51c664;}static['_preproces'+'s'](_0x23c2c4,_0x1d4f3b=new Map(),_0x3bfbf5,_0x1bf6f5,_0xcb4ce6){var _0x1e4068;const _0x1ac9a6=_0x23c2c4,_0x1b90e7=[];let _0x21bf7b=!(-0x25*-0x99+0x16*0xed+-0x1*0x2a7a),_0x33a5fa;for(;(_0x33a5fa=bs['exec'](_0x23c2c4))!==null&&!_0x21bf7b;){const _0x5744d7=_0x33a5fa[0x191d+0xdf1*0x1+-0xd*0x301];switch(_0x5744d7){case'define':{nd['lastIndex']=_0x33a5fa['index'];const _0x22acbb=nd['exec'](_0x23c2c4);M['assert'](_0x22acbb,'Invalid\x20['+_0x5744d7+']:\x20'+_0x23c2c4['substring'](_0x33a5fa['index'],_0x33a5fa['index']+(-0x1108+0x665+0xb07))+'...'),_0x21bf7b||(_0x21bf7b=_0x22acbb===null);const _0x518b38=_0x22acbb[0x3*-0x609+-0x60e*0x1+-0x3*-0x80e];yp['lastIndex']=_0x22acbb['index'];const _0x10fcc2=yp['exec'](_0x518b38)[-0xb*-0x11b+0x2dd*-0xb+0x6e*0x2d];let _0x30c2a4=_0x518b38['substring'](_0x10fcc2['length'])['trim']();_0x30c2a4===''&&(_0x30c2a4='true');const _0x54d393=Mt['_keep'](_0x1b90e7);let _0x1bc0ea=_0xcb4ce6;if(_0x54d393){const _0x186f78=_0x10fcc2['startsWith']('{')&&_0x10fcc2['endsWith']('}');_0x186f78&&(_0x1bc0ea=!(-0x59*-0x1+0x1*-0xe17+-0x1*-0xdbe)),_0x186f78?_0x3bfbf5['set'](_0x10fcc2,_0x30c2a4):_0x1d4f3b['set'](_0x10fcc2,_0x30c2a4),_0x1bc0ea&&(_0x23c2c4=_0x23c2c4['substring'](-0xce5+-0xb7b+0x1860,_0x22acbb['index']-(-0x1cd+-0x6f8*0x3+0x16b6))+_0x23c2c4['substring'](nd['lastIndex']),bs['lastIndex']=_0x22acbb['index']-(-0x6*0x368+-0x41*-0x89+0x9*-0x198));}M['trace'](gr,_0x5744d7+':\x20['+_0x10fcc2+']\x20'+_0x30c2a4+'\x20'+(_0x54d393?'':'IGNORED')),_0x1bc0ea||(bs['lastIndex']=_0x22acbb['index']+_0x22acbb[-0xb64+0x63*-0x10+-0x96*-0x1e]['length']);break;}case'undef':{od['lastIndex']=_0x33a5fa['index'];const _0x23b5af=od['exec'](_0x23c2c4),_0x24b2b6=_0x23b5af[0x1*-0x2271+-0x17f*-0x13+0x605]['trim'](),_0x248801=Mt['_keep'](_0x1b90e7);_0x248801&&(_0x1d4f3b['delete'](_0x24b2b6),_0xcb4ce6&&(_0x23c2c4=_0x23c2c4['substring'](-0x807*0x2+-0x429+0x1437,_0x23b5af['index']-(-0x2*-0x709+0x2*-0x4bd+-0x497))+_0x23c2c4['substring'](od['lastIndex']),bs['lastIndex']=_0x23b5af['index']-(0x9ea+0x157f+-0xa78*0x3))),M['trace'](gr,_0x5744d7+':\x20['+_0x24b2b6+']\x20'+(_0x248801?'':'IGNORED')),_0xcb4ce6||(bs['lastIndex']=_0x23b5af['index']+_0x23b5af[0xa44+0x12cb*0x1+-0x1d0f]['length']);break;}case'extension':{Sp['lastIndex']=_0x33a5fa['index'];const _0x520bf5=Sp['exec'](_0x23c2c4);if(M['assert'](_0x520bf5,'Invalid\x20['+_0x5744d7+']:\x20'+_0x23c2c4['substring'](_0x33a5fa['index'],_0x33a5fa['index']+(-0xf49+0x125d*-0x1+-0x2*-0x1105))+'...'),_0x21bf7b||(_0x21bf7b=_0x520bf5===null),_0x520bf5){const _0x4205af=_0x520bf5[0x11f5*-0x1+0x1e47*-0x1+-0xe9*-0x35],_0x589d21=Mt['_keep'](_0x1b90e7);_0x589d21&&_0x1d4f3b['set'](_0x4205af,'true'),M['trace'](gr,_0x5744d7+':\x20['+_0x4205af+']\x20'+(_0x589d21?'':'IGNORED'));}bs['lastIndex']=_0x520bf5['index']+_0x520bf5[0x1b58+-0xa51*0x1+-0x1107]['length'];break;}case'ifdef':case'ifndef':case'if':{ld['lastIndex']=_0x33a5fa['index'];const _0x1b44e4=ld['exec'](_0x23c2c4),_0x346aab=_0x1b44e4[0xf*-0x15+0x2b*-0x1f+0x42*0x19],_0x45852d=Mt['evaluate'](_0x346aab,_0x1d4f3b);_0x21bf7b||(_0x21bf7b=_0x45852d['error']);let _0x4b66c4=_0x45852d['result'];_0x5744d7==='ifndef'&&(_0x4b66c4=!_0x4b66c4),_0x1b90e7['push']({'anyKeep':_0x4b66c4,'keep':_0x4b66c4,'start':_0x33a5fa['index'],'end':ld['lastIndex']}),M['trace'](gr,_0x5744d7+':\x20['+_0x346aab+']\x20=>\x20'+_0x4b66c4),bs['lastIndex']=_0x1b44e4['index']+_0x1b44e4[0x6d*-0x25+0x2c7+0x16*0x97]['length'];break;}case'endif':case'else':case'elif':{hd['lastIndex']=_0x33a5fa['index'];const _0x111beb=hd['exec'](_0x23c2c4),_0x276b1e=_0x1b90e7['pop']();if(!_0x276b1e){console['error']('Shader\x20pre'+'processing'+'\x20encounter'+'ed\x20\x22#'+_0x111beb[0x2075+-0x97*0x3e+0x41e]+('\x22\x20without\x20'+'a\x20precedin'+'g\x20#if\x20#ifd'+'ef\x20#ifndef'+'\x20while\x20pre'+'processing'+'\x20')+Mt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x23c2c4['substring'](_0x33a5fa['index'],_0x33a5fa['index']+(-0x8d*0x2e+0x1f87+0x129*-0x5))+'...',{'source':_0x1ac9a6}),_0x21bf7b=!(-0x1cc0+-0x73c+0x23fc);continue;}const _0x584aa8=_0x276b1e['keep']?_0x23c2c4['substring'](_0x276b1e['end'],_0x33a5fa['index']):'';M['trace'](gr,_0x5744d7+(':\x20[previou'+'s\x20block]\x20='+'>\x20')+(_0x584aa8!=='')),_0x23c2c4=_0x23c2c4['substring'](0x562+-0x264+0x17f*-0x2,_0x276b1e['start'])+_0x584aa8+_0x23c2c4['substring'](hd['lastIndex']),bs['lastIndex']=_0x276b1e['start']+_0x584aa8['length'];const _0x4b11ae=_0x111beb[0x1ab2+-0x351*0x3+0x1*-0x10be];if(_0x4b11ae==='else'||_0x4b11ae==='elif'){let _0x434484=!(0x1*0xbce+0x13b1+-0x1f7e);if(!_0x276b1e['anyKeep']){if(_0x4b11ae==='else')_0x434484=!_0x276b1e['keep'];else{const _0xfe692f=Mt['evaluate'](_0x111beb[-0x19fa+0x1f10+-0x514],_0x1d4f3b);_0x434484=_0xfe692f['result'],_0x21bf7b||(_0x21bf7b=_0xfe692f['error']);}}_0x1b90e7['push']({'anyKeep':_0x276b1e['anyKeep']||_0x434484,'keep':_0x434484,'start':bs['lastIndex'],'end':bs['lastIndex']}),M['trace'](gr,_0x5744d7+':\x20['+_0x111beb[-0xe*-0x1e6+-0x1d0c+-0x27a*-0x1]+']\x20=>\x20'+_0x434484);}break;}case'include':{cd['lastIndex']=_0x33a5fa['index'];const _0x31dac0=cd['exec'](_0x23c2c4);if(_0x21bf7b||(_0x21bf7b=_0x31dac0===null),!_0x31dac0){M['assert'](_0x31dac0,'Invalid\x20['+_0x5744d7+(']\x20while\x20pr'+'eprocessin'+'g\x20')+Mt['sourceName']+':\x0a'+_0x23c2c4['substring'](_0x33a5fa['index'],_0x33a5fa['index']+(-0x8*0x99+-0x5c9*0x5+0x2219))+'...'),_0x21bf7b=!(0x1cc+-0x15db+0x41*0x4f);continue;}const _0x25d5b5=_0x31dac0[-0x8*0x6f+0x1b5d+-0x22c*0xb]['trim'](),_0x2d233e=(_0x1e4068=_0x31dac0[0x438+-0x115*0x1c+0x1a16])==null?void(-0x1713+-0x62*0x49+0x3305):_0x1e4068['trim'](),_0x1b8b00=Mt['_keep'](_0x1b90e7);if(_0x1b8b00){let _0x174f58=_0x1bf6f5==null?void(-0x6d*0x11+0x3*0x8c9+0x131e*-0x1):_0x1bf6f5['get'](_0x25d5b5);if(_0x174f58!==void(0x1dbf+0x46*0x11+-0x2265)){if(_0x174f58=this['stripComme'+'nts'](_0x174f58),_0x2d233e){const _0xf9a623=_0x1d4f3b['get'](_0x2d233e),_0x32d742=parseFloat(_0xf9a623);if(Number['isInteger'](_0x32d742)){let _0x2f70bd='';for(let _0x1c10a8=0x86*0x17+0xe49+-0x1a53;_0x1c10a8<_0x32d742;_0x1c10a8++)_0x2f70bd+=_0x174f58['replace'](Zx,String(_0x1c10a8));_0x174f58=_0x2f70bd;}else console['error']('Include\x20Co'+'unt\x20identi'+'fier\x20\x22'+_0x2d233e+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Mt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x23c2c4['substring'](_0x33a5fa['index'],_0x33a5fa['index']+(0x11af+0x45d*-0x3+-0x434))+'...',{'originalSource':_0x1ac9a6,'source':_0x23c2c4}),_0x21bf7b=!(0xa0b*0x2+0xe6b+0x1*-0x2281);}_0x23c2c4=_0x23c2c4['substring'](-0x1ce6+0x1924+0x3c2,_0x31dac0['index']-(-0x56d*-0x6+0x1369+-0x33f6))+_0x174f58+_0x23c2c4['substring'](cd['lastIndex']),bs['lastIndex']=_0x31dac0['index']-(-0x1fdb+0x145a+0xb82);}else{console['error']('Include\x20\x22'+_0x25d5b5+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Mt['sourceName'],{'originalSource':_0x1ac9a6,'source':_0x23c2c4}),_0x21bf7b=!(-0x1e21+0x6b*0x1b+0x9*0x218);continue;}}M['trace'](gr,_0x5744d7+':\x20['+_0x25d5b5+']\x20'+(_0x1b8b00?'':'IGNORED'));break;}}}return _0x1b90e7['length']>-0x6da*-0x1+0x3*0x9c2+-0x2*0x1210&&(console['error']('Shader\x20pre'+'processing'+'\x20reached\x20t'+'he\x20end\x20of\x20'+'the\x20file\x20w'+'ithout\x20enc'+'ountering\x20'+'the\x20necess'+'ary\x20#endif'+'\x20to\x20close\x20'+'a\x20precedin'+'g\x20#if,\x20#if'+'def,\x20or\x20#i'+'fndef\x20bloc'+'k.\x20'+Mt['sourceName']),_0x21bf7b=!(-0x26d2*0x1+-0x23cd+0x4a9f)),_0x21bf7b?(console['error']('Failed\x20to\x20'+'preprocess'+'\x20shader:\x20',{'source':_0x1ac9a6}),null):_0x23c2c4;}static['_keep'](_0x5dffde){for(let _0x251e2f=0x1*-0x329+-0x1e5*0x7+0x106c;_0x251e2f<_0x5dffde['length'];_0x251e2f++)if(!_0x5dffde[_0x251e2f]['keep'])return!(0x75e*0x4+0x25*-0x95+-0x7ee);return!(-0x1*-0x3df+-0x236b+0x1f8c);}static['evaluateAt'+'omicExpres'+'sion'](_0x513d10,_0xc35c5){let _0x1061c4=!(0x226+-0x1*0x14de+0x1*0x12b9);_0x513d10=_0x513d10['trim']();let _0x54754b=!(-0x12c1*-0x1+0xee*-0x17+-0x151*-0x2);if(_0x513d10==='true')return{'result':!(0x1eb2+0xf1e*0x2+-0x2c5*0x16),'error':_0x1061c4};if(_0x513d10==='false')return{'result':!(-0x230b*0x1+-0x17d7+0x13a1*0x3),'error':_0x1061c4};const _0x32ee66=Xx['exec'](_0x513d10);if(_0x32ee66){_0x54754b=_0x32ee66[-0x1bda+-0x1bb8+0x3793]==='!',_0x513d10=_0x32ee66[-0xc82+0xbd4+0xb0]['trim']();const _0x510e00=_0xc35c5['has'](_0x513d10);return{'result':_0x54754b?!_0x510e00:_0x510e00,'error':_0x1061c4};}const _0x1a0db9=Yx['exec'](_0x513d10);if(_0x1a0db9){const _0x3e33b3=_0xc35c5['get'](_0x1a0db9[0x2*0x7d3+-0x188a+0x63*0x17]['trim']())??_0x1a0db9[-0xeb8+0x10*0x246+-0x15a7]['trim'](),_0x1a1594=_0xc35c5['get'](_0x1a0db9[0x147*-0xf+0x3*0x4b7+0x507]['trim']())??_0x1a0db9[-0x2460+-0x61e+0x2a81]['trim'](),_0x14b3c7=_0x1a0db9[-0x1ae9+-0x19a5+0x3490]['trim']();let _0x5b0a54=!(-0x9fa+0x1*-0x21ff+-0x15fd*-0x2);switch(_0x14b3c7){case'==':_0x5b0a54=_0x3e33b3===_0x1a1594;break;case'!=':_0x5b0a54=_0x3e33b3!==_0x1a1594;break;case'<':_0x5b0a54=_0x3e33b3<_0x1a1594;break;case'<=':_0x5b0a54=_0x3e33b3<=_0x1a1594;break;case'>':_0x5b0a54=_0x3e33b3>_0x1a1594;break;case'>=':_0x5b0a54=_0x3e33b3>=_0x1a1594;break;default:_0x1061c4=!(-0x23ed+0x1f59+0x494);}return{'result':_0x5b0a54,'error':_0x1061c4};}return{'result':_0xc35c5['has'](_0x513d10),'error':_0x1061c4};}static['processPar'+'entheses'](_0x3c9331,_0x64ff5d){let _0x101a3b=!(-0x510*0x6+0x1b7c+-0x1*-0x2e5),_0x484456=_0x3c9331['trim']();for(;_0x484456['startsWith']('(')&&_0x484456['endsWith'](')');){let _0x44b8a5=0x10d3*-0x1+0x191d*0x1+-0x84a,_0xc792a0=!(-0x990+0x772*0x5+-0x1baa);for(let _0x2fe762=0xcff*-0x3+-0x16*0xa0+0x1*0x34bd;_0x2fe762<_0x484456['length']-(0x8cf+-0x2363+-0x1a95*-0x1);_0x2fe762++)if(_0x484456[_0x2fe762]==='(')_0x44b8a5++;else{if(_0x484456[_0x2fe762]===')'&&(_0x44b8a5--,_0x44b8a5===0xa*-0x28f+0x25*0x3+0x1*0x1927)){_0xc792a0=!(0x888+0x567+-0x2*0x6f7);break;}}if(_0xc792a0)_0x484456=_0x484456['slice'](0x1f8a+0x4d4+0x57*-0x6b,-(0x2a7*-0x5+0x2189*-0x1+0x1*0x2ecd))['trim']();else break;}for(;;){let _0x3b94a3=!(-0x36+0x1324+-0x12ed),_0x1a977d=-0x1af3*-0x1+-0xf4d*0x2+0x3a7,_0x4b8b55=0x8*-0x2aa+0x69d+0x35*0x47,_0x8eba86=-(0x5*0x16e+-0xe6f+0x26e*0x3),_0x1499e3=-(0x9*0xa9+0x24d7*0x1+-0x2ac7),_0x1d15c1=-0x1d*-0x107+-0x1966*0x1+-0x465;for(let _0x5d345d=0x115c+-0x1262+-0x83*-0x2;_0x5d345d<_0x484456['length'];_0x5d345d++)if(_0x484456[_0x5d345d]==='('){const _0x44140c=_0x484456['substring'](-0x7*-0x478+0x197*0xb+-0x46f*0xb,_0x5d345d);jx['test'](_0x44140c)?_0x1d15c1++:_0x1d15c1===-0x27*-0x43+0x11bc*0x2+-0x2dad&&(_0x1a977d++,_0x1a977d>_0x4b8b55&&(_0x4b8b55=_0x1a977d,_0x8eba86=_0x5d345d),_0x3b94a3=!(0x120a*0x1+-0x1*0x1471+0x267));}else _0x484456[_0x5d345d]===')'&&(_0x1d15c1>-0x32*-0x31+0x17bb*0x1+-0x214d?_0x1d15c1--:_0x1a977d>0x112a+-0x2*-0x12a+-0x137e&&(_0x1a977d===_0x4b8b55&&_0x8eba86!==-(-0x134c+-0x24be+0x1*0x380b)&&(_0x1499e3=_0x5d345d),_0x1a977d--));if(!_0x3b94a3||_0x8eba86===-(-0x73a*-0x1+-0x25f2+0xd*0x25d)||_0x1499e3===-(0x3*-0x897+0x1366+0x660))break;const _0x15c13b=_0x484456['substring'](_0x8eba86+(-0x354*-0x7+-0x1259+-0x4f2),_0x1499e3),{result:_0x65a80d,error:_0x32ba0e}=Mt['evaluate'](_0x15c13b,_0x64ff5d);_0x101a3b=_0x101a3b||_0x32ba0e,_0x484456=_0x484456['substring'](0x26e1+-0x61f*-0x3+-0x393e,_0x8eba86)+(_0x65a80d?'true':'false')+_0x484456['substring'](_0x1499e3+(-0x13*0x1d1+-0x22f3*-0x1+0x3*-0x25));}return{'expression':_0x484456,'error':_0x101a3b};}static['evaluate'](_0x22bf06,_0x21a18c){const _0x2b7566=Kx['exec'](_0x22bf06)===null;M['assert'](_0x2b7566,'Resolving\x20'+'expression'+'\x20like\x20this'+'\x20is\x20not\x20su'+'pported:\x20'+_0x22bf06);let _0x254714=_0x22bf06,_0x54e2b0=!(0x2*-0xc70+0x2318+-0x20b*0x5);if(_0x22bf06['replace'](qx,'')['indexOf']('(')!==-(0xb*0x2f9+-0x4*-0x191+-0x26f6)){const _0x50a7b2=Mt['processPar'+'entheses'](_0x22bf06,_0x21a18c);_0x254714=_0x50a7b2['expression'],_0x54e2b0=_0x50a7b2['error'];}if(_0x54e2b0)return M['log']('Parenthesi'+'s\x20parsing\x20'+'error\x20in\x20e'+'xpression:'+'\x20\x22'+_0x22bf06+'\x22'),{'result':!(0x2b*0xd5+-0x5c+0x5e7*-0x6),'error':!(0x35c+0xc45+-0xfa1)};const _0x2440a6=_0x254714['split']('||');for(const _0x3ee4fa of _0x2440a6){const _0x5d0704=_0x3ee4fa['split']('&&');let _0x4e57e5=!(0xcea+-0x1b89+0xc5*0x13);for(const _0x5199ee of _0x5d0704){const {result:_0x8fc505,error:_0x8e5062}=Mt['evaluateAt'+'omicExpres'+'sion'](_0x5199ee['trim'](),_0x21a18c);if(!_0x8fc505||_0x8e5062){_0x4e57e5=!(-0xaee*-0x2+0xd6*-0x1a+-0x1*0x1f);break;}}if(_0x4e57e5)return{'result':!(0x24bc+0x14bf+0x2d*-0x147),'error':!_0x2b7566};}return{'result':!(0x9b4+-0x1*0x1d75+0x13c2),'error':!_0x2b7566};}};h(Mt,'sourceName');let _o=Mt;const jS='\x0a\x0a#ifndef\x20'+'outType_0\x0a'+'#define\x20ou'+'tType_0\x20ve'+'c4\x0a#endif\x0a'+'\x0alayout(lo'+'cation\x20=\x200'+')\x20out\x20high'+'p\x20outType_'+'0\x20pcFragCo'+'lor0;\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_1\x0a'+'layout(loc'+'ation\x20=\x201)'+'\x20out\x20highp'+'\x20outType_1'+'\x20pcFragCol'+'or1;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_2\x0alayo'+'ut(locatio'+'n\x20=\x202)\x20out'+'\x20highp\x20out'+'Type_2\x20pcF'+'ragColor2;'+'\x0a#endif\x0a\x0a#'+'if\x20COLOR_A'+'TTACHMENT_'+'3\x0alayout(l'+'ocation\x20=\x20'+'3)\x20out\x20hig'+'hp\x20outType'+'_3\x20pcFragC'+'olor3;\x0a#en'+'dif\x0a\x0a#if\x20C'+'OLOR_ATTAC'+'HMENT_4\x0ala'+'yout(locat'+'ion\x20=\x204)\x20o'+'ut\x20highp\x20o'+'utType_4\x20p'+'cFragColor'+'4;\x0a#endif\x0a'+'\x0a#if\x20COLOR'+'_ATTACHMEN'+'T_5\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0a#'+'endif\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_6\x0a'+'layout(loc'+'ation\x20=\x206)'+'\x20out\x20highp'+'\x20outType_6'+'\x20pcFragCol'+'or6;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_7\x0alayo'+'ut(locatio'+'n\x20=\x207)\x20out'+'\x20highp\x20out'+'Type_7\x20pcF'+'ragColor7;'+'\x0a#endif\x0a\x0a#'+'define\x20gl_'+'FragColor\x20'+'pcFragColo'+'r0\x0a\x0a#defin'+'e\x20varying\x20'+'in\x0a\x0a#defin'+'e\x20texture2'+'D\x20texture\x0a'+'#define\x20te'+'xture2DBia'+'s\x20texture\x0a'+'#define\x20te'+'xtureCube\x20'+'texture\x0a#d'+'efine\x20text'+'ure2DProj\x20'+'texturePro'+'j\x0a#define\x20'+'texture2DL'+'od\x20texture'+'Lod\x0a#defin'+'e\x20texture2'+'DProjLod\x20t'+'extureProj'+'Lod\x0a#defin'+'e\x20textureC'+'ubeLod\x20tex'+'tureLod\x0a#d'+'efine\x20text'+('ure2DGrad\x20'+'textureGra'+'d\x0a#define\x20'+'texture2DP'+'rojGrad\x20te'+'xtureProjG'+'rad\x0a#defin'+'e\x20textureC'+'ubeGrad\x20te'+'xtureGrad\x0a'+'#define\x20ut'+'exture2D\x20t'+'exture\x0a#de'+'fine\x20itext'+'ure2D\x20text'+'ure\x0a\x0a//\x20de'+'precated\x20d'+'efines\x0a#de'+'fine\x20textu'+'re2DLodEXT'+'\x20texture2D'+'LodEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DLod_ins'+'tead\x0a#defi'+'ne\x20texture'+'2DProjLodE'+'XT\x20texture'+'2DProjLodE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DP'+'rojLod\x0a#de'+'fine\x20textu'+'reCubeLodE'+'XT\x20texture'+'CubeLodEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeL'+'od_instead'+'\x0a#define\x20t'+'exture2DGr'+'adEXT\x20text'+'ure2DGradE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DG'+'rad_instea'+'d\x0a#define\x20'+'texture2DP'+'rojGradEXT'+'\x20texture2D'+'ProjGradEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DPr'+'ojGrad_ins'+'tead\x0a#defi'+'ne\x20texture'+'CubeGradEX'+'T\x20textureC'+'ubeGradEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeG'+'rad_instea'+'d\x0a\x0a//\x20samp'+'le\x20shadows'+'\x20using\x20tex'+'tureGrad\x20t'+'o\x20remove\x20d'+'erivatives'+'\x20in\x20the\x20dy'+'namic\x20loop'+'s\x20(which\x20a'+'re\x20used\x20by'+'\x0a//\x20cluste'+'red\x20lighti'+'ng)\x20-\x20as\x20D'+'irectX\x20sha'+'der\x20compil'+'er\x20tries\x20t'+'o\x20unroll\x20t'+'he\x20loops\x20a'+'nd\x20takes\x20l'+'ong\x20time\x0a/'+'/\x20to\x20compi'+'le\x20the\x20sha'+'der.\x20Using'+'\x20textureLo'+'d\x20would\x20be'+'\x20even\x20bett')+('er,\x20but\x20We'+'bGl\x20does\x20n'+'ot\x20transla'+'te\x20it\x20to\x0a/'+'/\x20lod\x20inst'+'ruction\x20fo'+'r\x20DirectX\x20'+'correctly\x20'+'and\x20uses\x20S'+'ampleCmp\x20i'+'nstead\x20of\x20'+'SampleCmpL'+'evelZero\x20o'+'r\x20similar.'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureG'+'rad(res,\x20u'+'v,\x20vec2(1,'+'\x201),\x20vec2('+'1,\x201))\x0a\x0a//'+'\x20pass\x20/\x20ac'+'cept\x20shado'+'w\x20map\x20or\x20t'+'exture\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20on\x20webgl'+'\x20this\x20is\x20s'+'imply\x20pass'+'ed\x20as\x20is\x0a/'+'/\x20but\x20this'+'\x20is\x20needed'+'\x20for\x20WebGP'+'U\x0a#define\x20'+'SHADOWMAP_'+'PASS(name)'+'\x20name\x0a#def'+'ine\x20SHADOW'+'MAP_ACCEPT'+'(name)\x20sam'+'pler2DShad'+'ow\x20name\x0a#d'+'efine\x20TEXT'+'URE_PASS(n'+'ame)\x20name\x0a'+'#define\x20TE'+'XTURE_ACCE'+'PT(name)\x20s'+'ampler2D\x20n'+'ame\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP(name)\x20h'+'ighp\x20sampl'+'er2D\x20name\x0a'+'\x0a#define\x20G'+'L2\x0a'),YS='\x0a#define\x20a'+'ttribute\x20i'+'n\x0a#define\x20'+'varying\x20ou'+'t\x0a#define\x20'+'texture2D\x20'+'texture\x0a#d'+'efine\x20utex'+'ture2D\x20tex'+'ture\x0a#defi'+'ne\x20itextur'+'e2D\x20textur'+'e\x0a#define\x20'+'GL2\x0a#defin'+'e\x20VERTEXSH'+'ADER\x0a\x0a#def'+'ine\x20TEXTUR'+'E_PASS(nam'+'e)\x20name\x0a#d'+'efine\x20TEXT'+'URE_ACCEPT'+'(name)\x20sam'+'pler2D\x20nam'+'e\x0a#define\x20'+'TEXTURE_AC'+'CEPT_HIGHP'+'(name)\x20hig'+'hp\x20sampler'+'2D\x20name\x0a',KS='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#ifnde'+'f\x20outType_'+'0\x0a#define\x20'+'outType_0\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_1\x0a'+'#define\x20ou'+'tType_1\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_2\x0a#d'+'efine\x20outT'+'ype_2\x20vec4'+'\x0a#endif\x0a#i'+'fndef\x20outT'+'ype_3\x0a#def'+'ine\x20outTyp'+'e_3\x20vec4\x0a#'+'endif\x0a#ifn'+'def\x20outTyp'+'e_4\x0a#defin'+'e\x20outType_'+'4\x20vec4\x0a#en'+'dif\x0a#ifnde'+'f\x20outType_'+'5\x0a#define\x20'+'outType_5\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_6\x0a'+'#define\x20ou'+'tType_6\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_7\x0a#d'+'efine\x20outT'+'ype_7\x20vec4'+'\x0a#endif\x0a\x0al'+'ayout(loca'+'tion\x20=\x200)\x20'+'out\x20highp\x20'+'outType_0\x20'+'pcFragColo'+'r0;\x0alayout'+'(location\x20'+'=\x201)\x20out\x20h'+'ighp\x20outTy'+'pe_1\x20pcFra'+'gColor1;\x0al'+'ayout(loca'+'tion\x20=\x202)\x20'+'out\x20highp\x20'+'outType_2\x20'+'pcFragColo'+'r2;\x0alayout'+'(location\x20'+'=\x203)\x20out\x20h'+'ighp\x20outTy'+'pe_3\x20pcFra'+'gColor3;\x0al'+'ayout(loca'+'tion\x20=\x204)\x20'+'out\x20highp\x20'+'outType_4\x20'+'pcFragColo'+'r4;\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0al'+'ayout(loca'+'tion\x20=\x206)\x20'+'out\x20highp\x20'+'outType_6\x20'+'pcFragColo'+'r6;\x0alayout'+'(location\x20'+'=\x207)\x20out\x20h'+'ighp\x20outTy'+'pe_7\x20pcFra'+'gColor7;\x0a\x0a'+'#define\x20gl'+'_FragColor'+'\x20pcFragCol'+'or0\x0a\x0a#defi'+'ne\x20texture'+'2D(res,\x20uv'+')\x20texture('+'sampler2D('+('res,\x20res\x20#'+'#\x20_sampler'+'),\x20uv)\x0a#de'+'fine\x20textu'+'re2DBias(r'+'es,\x20uv,\x20bi'+'as)\x20textur'+'e(sampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv,\x20b'+'ias)\x0a#defi'+'ne\x20texture'+'2DLod(res,'+'\x20uv,\x20lod)\x20'+'textureLod'+'(sampler2D'+'(res,\x20res\x20'+'##\x20_sample'+'r),\x20uv,\x20lo'+'d)\x0a#define'+'\x20textureCu'+'be(res,\x20uv'+')\x20texture('+'samplerCub'+'e(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a#'+'define\x20tex'+'tureCubeLo'+'d(res,\x20uv,'+'\x20lod)\x20text'+'ureLod(sam'+'plerCube(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x20lod)'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureL'+'od(sampler'+'2DShadow(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x200.0)'+'\x0a#define\x20i'+'texture2D('+'res,\x20uv)\x20t'+'exture(isa'+'mpler2D(re'+'s,\x20res\x20##\x20'+'_sampler),'+'\x20uv)\x0a#defi'+'ne\x20utextur'+'e2D(res,\x20u'+'v)\x20texture'+'(usampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a\x0a'+'//\x20depreca'+'ted\x20define'+'s\x0a#define\x20'+'texture2DL'+'odEXT\x20text'+'ure2DLodEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DLo'+'d_instead\x0a'+'#define\x20te'+'xture2DPro'+'jLodEXT\x20te'+'xture2DPro'+'jLodEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DProjLo'+'d\x0a#define\x20'+'textureCub'+'eLodEXT\x20te'+'xtureCubeL'+'odEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeLod_in'+'stead\x0a#def'+'ine\x20textur'+'e2DGradEXT'+'\x20texture2D'+'GradEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DGrad_i'+'nstead\x0a#de')+('fine\x20textu'+'re2DProjGr'+'adEXT\x20text'+'ure2DProjG'+'radEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DProjGra'+'d_instead\x0a'+'#define\x20te'+'xtureCubeG'+'radEXT\x20tex'+'tureCubeGr'+'adEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeGrad_i'+'nstead\x0a\x0a//'+'\x20TODO:\x20imp'+'lement\x20oth'+'er\x20texture'+'\x20sampling\x20'+'macros\x0a//\x20'+'#define\x20te'+'xture2DPro'+'j\x20textureP'+'roj\x0a//\x20#de'+'fine\x20textu'+'re2DProjLo'+'d\x20textureP'+'rojLod\x0a//\x20'+'#define\x20te'+'xture2DGra'+'d\x20textureG'+'rad\x0a//\x20#de'+'fine\x20textu'+'re2DProjGr'+'ad\x20texture'+'ProjGrad\x0a/'+'/\x20#define\x20'+'textureCub'+'eGrad\x20text'+'ureGrad\x0a\x0a/'+'/\x20pass\x20/\x20a'+'ccept\x20shad'+'ow\x20map\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20passes\x20b'+'oth\x20the\x20te'+'xture\x20as\x20w'+'ell\x20as\x20sam'+'pler\x0a//\x20as'+'\x20the\x20combi'+'ned\x20sample'+'r\x20can\x20be\x20o'+'nly\x20create'+'d\x20at\x20a\x20poi'+'nt\x20of\x20use\x0a'+'#define\x20SH'+'ADOWMAP_PA'+'SS(name)\x20n'+'ame,\x20name\x20'+'##\x20_sample'+'r\x0a#define\x20'+'SHADOWMAP_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'PASS(name)'+'\x20name,\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP\x20TEXTURE'+'_ACCEPT\x0a\x0a#'+'define\x20GL2'+'\x0a#define\x20W'+'EBGPU\x0a'),ZS='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#defin'+'e\x20texture2'+'D(res,\x20uv)'+'\x20texture(s'+'ampler2D(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv)\x0a#def'+'ine\x20itextu'+'re2D(res,\x20'+'uv)\x20textur'+'e(isampler'+'2D(res,\x20re'+'s\x20##\x20_samp'+'ler),\x20uv)\x0a'+'#define\x20ut'+'exture2D(r'+'es,\x20uv)\x20te'+'xture(usam'+'pler2D(res'+',\x20res\x20##\x20_'+'sampler),\x20'+'uv)\x0a\x0a#defi'+'ne\x20TEXTURE'+'_PASS(name'+')\x20name,\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT(na'+'me)\x20textur'+'e2D\x20name,\x20'+'sampler\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT_HI'+'GHP\x20TEXTUR'+'E_ACCEPT\x0a\x0a'+'#define\x20GL'+'2\x0a#define\x20'+'WEBGPU\x0a#de'+'fine\x20VERTE'+'XSHADER\x0a#d'+'efine\x20gl_V'+'ertexID\x20gl'+'_VertexInd'+'ex\x0a#define'+'\x20gl_Instan'+'ceID\x20gl_In'+'stanceInde'+'x\x0a',QS='\x0a',JS='\x0a#define\x20V'+'ERTEXSHADE'+'R\x0a',xp='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20to'+'\x20sample\x20sc'+'ene\x20grab\x20t'+'extures\x0ave'+'c2\x20getGrab'+'ScreenPos('+'vec4\x20clipP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x200.5;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'WEBGPU\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv.y\x20'+'=\x201.0\x20-\x20uv'+'.y;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a\x0a//\x20con'+'vert\x20uv\x20co'+'ordinates\x20'+'to\x20sample\x20'+'image\x20effe'+'ct\x20texture'+'\x20(render\x20t'+'arget\x20text'+'ure\x20render'+'ed\x20without'+'\x0a//\x20forwar'+'d\x20renderer'+'\x20which\x20doe'+'s\x20the\x20flip'+'\x20in\x20the\x20pr'+'ojection\x20m'+'atrix)\x0avec'+'2\x20getImage'+'EffectUV(v'+'ec2\x20uv)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv.y'+'\x20=\x201.0\x20-\x20u'+'v.y;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20uv'+';\x0a}\x0a',Tp='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20fo'+'r\x20sampling'+'\x20scene\x20gra'+'b\x20textures'+'\x0afn\x20getGra'+'bScreenPos'+'(clipPos:\x20'+'vec4<f32>)'+'\x20->\x20vec2<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'var\x20uv:\x20ve'+'c2<f32>\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x20vec2<f3'+'2>(0.5);\x0a\x20'+'\x20\x20\x20uv.y\x20=\x20'+'1.0\x20-\x20uv.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'//\x20convert'+'\x20uv\x20coordi'+'nates\x20to\x20s'+'ample\x20imag'+'e\x20effect\x20t'+'exture\x20(re'+'nder\x20targe'+'t\x20texture\x20'+'rendered\x20w'+'ithout\x0a//\x20'+'forward\x20re'+'nderer\x20whi'+'ch\x20does\x20th'+'e\x20flip\x20in\x20'+'the\x20projec'+'tion\x20matri'+'x)\x0afn\x20getI'+'mageEffect'+'UV(uv:\x20vec'+'2<f32>)\x20->'+'\x20vec2<f32>'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20modifiedU'+'V:\x20vec2<f3'+'2>\x20=\x20uv;\x0a\x20'+'\x20\x20\x20modifie'+'dUV.y\x20=\x201.'+'0\x20-\x20modifi'+'edUV.y;\x0a\x20\x20'+'\x20\x20return\x20m'+'odifiedUV;'+'\x0a}\x0a\x0a//\x20typ'+'es\x20wrapped'+'\x20in\x20size\x20a'+'ligned\x20str'+'uctures\x20to'+'\x20ensure\x20co'+'rrect\x20alig'+'nment\x20in\x20u'+'niform\x20buf'+'fer\x20arrays'+'\x0astruct\x20Wr'+'appedF32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'f32\x20}\x0astru'+'ct\x20Wrapped'+'I32\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20i32\x20}'+'\x0astruct\x20Wr'+'appedU32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'u32\x20}\x0astru'+'ct\x20Wrapped'+'Vec2F\x20{\x20@s'+'ize(16)\x20el'+'ement:\x20vec'+'2f\x20}\x0astruc'+'t\x20WrappedV'+'ec2I\x20{\x20@si'+'ze(16)\x20ele'+'ment:\x20vec2'+'i\x20}\x0astruct'+'\x20WrappedVe'+'c2U\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20vec2u'+'\x20}\x0a',Qx={'vertex_position':Pe,'vertex_normal':cs,'vertex_tangent':ci,'vertex_texCoord0':Yt,'vertex_texCoord1':da,'vertex_texCoord2':Qo,'vertex_texCoord3':Jo,'vertex_texCoord4':el,'vertex_texCoord5':tl,'vertex_texCoord6':sl,'vertex_texCoord7':il,'vertex_color':kt,'vertex_boneIndices':ns,'vertex_boneWeights':li};class $t{static['createDefi'+'nition'](_0x399f6e,_0x4f5f2a){M['assert'](_0x4f5f2a),M['assert'](!_0x4f5f2a['vertexDefi'+'nes']||_0x4f5f2a['vertexDefi'+'nes']instanceof Map),M['assert'](!_0x4f5f2a['vertexIncl'+'udes']||_0x4f5f2a['vertexIncl'+'udes']instanceof Map),M['assert'](!_0x4f5f2a['fragmentDe'+'fines']||_0x4f5f2a['fragmentDe'+'fines']instanceof Map),M['assert'](!_0x4f5f2a['fragmentIn'+'cludes']||_0x4f5f2a['fragmentIn'+'cludes']instanceof Map);const _0x5740e7=_0x1e7efb=>{let _0x4e572d=_0x1e7efb['fragmentOu'+'tputTypes']??'vec4';return Array['isArray'](_0x4e572d)||(_0x4e572d=[_0x4e572d]),_0x4e572d;},_0x38e6d4=(_0x13633d,_0x473ea9,_0x88c6cd,_0x4c4b34)=>{const _0xb1b42f=_0x399f6e['isWebGPU']?_0x13633d:_0x473ea9;let _0x25f0ce='';if(!_0x88c6cd){const _0xe6fe1c=_0x5740e7(_0x4c4b34);for(let _0x5df263=0x1823+0x1*-0x3b9+-0x146a;_0x5df263<_0x399f6e['maxColorAt'+'tachments'];_0x5df263++){_0x25f0ce+='#define\x20CO'+'LOR_ATTACH'+'MENT_'+_0x5df263+'\x0a';const _0x445221=_0xe6fe1c[_0x5df263]??'vec4';_0x25f0ce+='#define\x20ou'+'tType_'+_0x5df263+'\x20'+_0x445221+'\x0a';}}return _0x25f0ce+_0xb1b42f;},_0x43b501=(_0x2cb679,_0x2d3bd6)=>{let _0x159716='';if(!_0x2cb679){const _0x5e784e=_0x5740e7(_0x2d3bd6);for(let _0x500694=-0x5*-0x6e5+-0x1a4b+-0x82e;_0x500694<_0x399f6e['maxColorAt'+'tachments'];_0x500694++){const _0x5929f1=_0x5e784e[_0x500694]??'vec4',_0x307a0c=GS['get'](_0x5929f1);M['assert'](_0x307a0c,'Unknown\x20ou'+'tput\x20type\x20'+'translatio'+'n:\x20'+_0x5929f1+'\x20->\x20'+_0x307a0c),_0x159716+='alias\x20pcOu'+'tType'+_0x500694+'\x20=\x20'+_0x307a0c+';\x0a';}}return _0x159716;},_0x1b8823=_0x4f5f2a['name']??'Untitled';let _0x987e5c,_0x1047e0;const _0x4ac535=$t['getDefines'+'Code'](_0x399f6e,_0x4f5f2a['vertexDefi'+'nes']),_0x1b0815=$t['getDefines'+'Code'](_0x399f6e,_0x4f5f2a['fragmentDe'+'fines']);return _0x4f5f2a['shaderLang'+'uage']===st?(_0x987e5c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x43b501(!(-0x6ef*-0x1+0x8b*-0x2c+-0x3*-0x5a7),_0x4f5f2a)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+JS+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Tp+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x4ac535+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x4f5f2a['vertexCode']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20'),_0x1047e0='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x43b501(!(-0x1efb+-0xed8+-0x346*-0xe),_0x4f5f2a)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+QS+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Tp+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x1b0815+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x4f5f2a['fragmentCo'+'de']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20')):(M['assert'](_0x4f5f2a['vertexCode']),_0x987e5c=$t['versionCod'+'e'](_0x399f6e)+_0x38e6d4(ZS,YS,!(0xaae+-0x23e7+0x1939),_0x4f5f2a)+_0x4ac535+$t['precisionC'+'ode'](_0x399f6e)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+xp+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+$t['getShaderN'+'ameCode'](_0x1b8823)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x4f5f2a['vertexCode'],M['assert'](_0x4f5f2a['fragmentCo'+'de']),_0x1047e0=(_0x4f5f2a['fragmentPr'+'eamble']||'')+$t['versionCod'+'e'](_0x399f6e)+_0x38e6d4(KS,jS,!(-0xca3*-0x3+-0x23db+0x19*-0x15),_0x4f5f2a)+_0x1b0815+$t['precisionC'+'ode'](_0x399f6e)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+xp+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+$t['getShaderN'+'ameCode'](_0x1b8823)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x4f5f2a['fragmentCo'+'de']),{'name':_0x1b8823,'shaderLanguage':_0x4f5f2a['shaderLang'+'uage']??ze,'attributes':_0x4f5f2a['attributes'],'vshader':_0x987e5c,'vincludes':_0x4f5f2a['vertexIncl'+'udes'],'fincludes':_0x4f5f2a['fragmentIn'+'cludes'],'fshader':_0x1047e0,'useTransformFeedback':_0x4f5f2a['useTransfo'+'rmFeedback'],'meshUniformBufferFormat':_0x4f5f2a['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x4f5f2a['meshBindGr'+'oupFormat']};}static['getDefines'+'Code'](_0x2060e2,_0x3ca7da){let _0x415442='';return _0x2060e2['capsDefine'+'s']['forEach']((_0x55427a,_0x40e0b8)=>{_0x415442+='#define\x20'+_0x40e0b8+'\x20'+_0x55427a+'\x0a';}),_0x415442+='\x0a',_0x3ca7da==null||_0x3ca7da['forEach']((_0x281d0b,_0x3207ed)=>{_0x415442+='#define\x20'+_0x3207ed+'\x20'+_0x281d0b+'\x0a';}),_0x415442+='\x0a',_0x415442;}static['getShaderN'+'ameCode'](_0x363240){return'#define\x20SH'+'ADER_NAME\x20'+_0x363240+'\x0a';}static['versionCod'+'e'](_0x54a5fa){return _0x54a5fa['isWebGPU']?'#version\x204'+'50\x0a':'#version\x203'+'00\x20es\x0a';}static['precisionC'+'ode'](_0x6ccfb,_0x3e3c8b){_0x3e3c8b&&_0x3e3c8b!=='highp'&&_0x3e3c8b!=='mediump'&&_0x3e3c8b!=='lowp'&&(_0x3e3c8b=null),_0x3e3c8b&&(_0x3e3c8b==='highp'&&_0x6ccfb['maxPrecisi'+'on']!=='highp'&&(_0x3e3c8b='mediump'),_0x3e3c8b==='mediump'&&_0x6ccfb['maxPrecisi'+'on']==='lowp'&&(_0x3e3c8b='lowp'));const _0x1cecfe=_0x3e3c8b||_0x6ccfb['precision'];return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20precisi'+'on\x20'+_0x1cecfe+('\x20float;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x1cecfe+('\x20int;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20pr'+'ecision\x20')+_0x1cecfe+('\x20usampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x1cecfe+('\x20isampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x1cecfe+('\x20sampler2D'+'Shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x1cecfe+('\x20samplerCu'+'beShadow;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20precisio'+'n\x20')+_0x1cecfe+('\x20sampler2D'+'Array;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}static['collectAtt'+'ributes'](_0x4c26c2){const _0x15c47d={};let _0x365372=0x2421+-0x113f+0x1*-0x12e2,_0x1a3654=_0x4c26c2['indexOf']('attribute');for(;_0x1a3654>=0xf2e+0x48d+-0x13bb&&!(_0x1a3654>-0x1d1c+0x1f82+0x1*-0x266&&_0x4c26c2[_0x1a3654-(-0x2f*0x3+-0xb*0x2e7+0x1*0x207b)]==='/');){let _0xe61c1a=!(0x1323+-0xbaa+-0xef*0x8);if(_0x1a3654>-0xc82+0x11c*0x11+0x32d*-0x2){let _0x299762=_0x4c26c2['lastIndexO'+'f']('\x0a',_0x1a3654);_0x299762=_0x299762!==-(0x665+0x7*0xf1+0xcfb*-0x1)?_0x299762+(0x11e5+-0x681+-0xb63*0x1):-0x5c*-0x60+-0x151*-0x1+-0x23d1,_0x4c26c2['substring'](_0x299762,_0x1a3654)['includes']('#')&&(_0xe61c1a=!(0x1*0xaa2+-0x13d*-0x1+-0xbdf));}if(!_0xe61c1a){const _0x55dc84=_0x4c26c2['indexOf'](';',_0x1a3654),_0x4651d7=_0x4c26c2['lastIndexO'+'f']('\x20',_0x55dc84),_0x2fbcc5=_0x4c26c2['substring'](_0x4651d7+(-0x5*0x44+-0x24b+0x3a0*0x1),_0x55dc84);if(_0x15c47d[_0x2fbcc5])M['warn']('Attribute\x20'+'['+_0x2fbcc5+(']\x20already\x20'+'exists\x20whe'+'n\x20extracti'+'ng\x20the\x20att'+'ributes\x20fr'+'om\x20the\x20ver'+'tex\x20shader'+',\x20ignoring'+'.'),{'vsCode':_0x4c26c2});else{const _0x36db4a=Qx[_0x2fbcc5];_0x36db4a!==void(0x1951+0x1baa+-0x34fb)?_0x15c47d[_0x2fbcc5]=_0x36db4a:(_0x15c47d[_0x2fbcc5]='ATTR'+_0x365372,_0x365372++);}}_0x1a3654=_0x4c26c2['indexOf']('attribute',_0x1a3654+(0x1*-0x2604+0xd36+-0x1*-0x18cf));}return _0x15c47d;}}let Jx=0x1acf*0x1+-0xd5e+0x3*-0x47b;class ey{constructor(_0x47fdf5,_0x511861){h(this,'meshUnifor'+'mBufferFor'+'mat'),h(this,'meshBindGr'+'oupFormat'),h(this,'attributes',new Map());if(this['id']=Jx++,this['device']=_0x47fdf5,this['definition']=_0x511861,this['name']=_0x511861['name']||'Untitled',this['init'](),_0x511861['cshader'])M['assert'](_0x47fdf5['supportsCo'+'mpute'],'Compute\x20sh'+'aders\x20are\x20'+'not\x20suppor'+'ted\x20on\x20thi'+'s\x20device.'),M['assert'](!_0x511861['vshader']&&!_0x511861['fshader'],'Vertex\x20and'+'\x20fragment\x20'+'shaders\x20ar'+'e\x20not\x20supp'+'orted\x20when'+'\x20creating\x20'+'a\x20compute\x20'+'shader.'),_0x511861['cshader']=_o['run'](_0x511861['cshader'],_0x511861['cincludes'],{'sourceName':'compute\x20sh'+'ader\x20for\x20'+this['label'],'stripDefines':!(-0x1*-0x26db+0x3f*0x1f+0xb9f*-0x4)});else{M['assert'](_0x511861['vshader'],'No\x20vertex\x20'+'shader\x20has'+'\x20been\x20spec'+'ified\x20when'+'\x20creating\x20'+'a\x20shader.'),M['assert'](_0x511861['fshader'],'No\x20fragmen'+'t\x20shader\x20h'+'as\x20been\x20sp'+'ecified\x20wh'+'en\x20creatin'+'g\x20a\x20shader'+'.'),M['call'](()=>{this['vUnmodifie'+'d']=_0x511861['vshader'],this['fUnmodifie'+'d']=_0x511861['fshader'];});const _0x2fb191=_0x511861['shaderLang'+'uage']===st;_0x511861['vshader']=_o['run'](_0x511861['vshader'],_0x511861['vincludes'],{'sourceName':'vertex\x20sha'+'der\x20for\x20'+this['label'],'stripDefines':_0x2fb191}),_0x511861['shaderLang'+'uage']===ze&&(_0x511861['attributes']??(_0x511861['attributes']=$t['collectAtt'+'ributes'](_0x511861['vshader'])));const _0x55a388=_0x47fdf5['isWebGL2']&&(Me['name']==='osx'||Me['name']==='ios');if(_0x511861['fshader']=_o['run'](_0x511861['fshader'],_0x511861['fincludes'],{'stripUnusedColorAttachments':_0x55a388,'stripDefines':_0x2fb191,'sourceName':'fragment\x20s'+'hader\x20for\x20'+this['label']}),!_0x511861['vshader']||!_0x511861['fshader']){M['error']('Shader:\x20Fa'+'iled\x20to\x20cr'+'eate\x20shade'+'r\x20'+this['label']+('.\x20Vertex\x20o'+'r\x20fragment'+'\x20shader\x20so'+'urce\x20is\x20em'+'pty.'),this),this['failed']=!(0x2f7*0x8+0xf57+-0x3*0xd05);return;}}this['impl']=_0x47fdf5['createShad'+'erImpl'](this),M['trace'](Xm,'Alloc:\x20'+this['label']+',\x20stack:\x20'+Q['toString'](),{'instance':this});}['init'](){this['ready']=!(0x755*0x4+0x1*0x1da5+-0x44*0xde),this['failed']=!(-0x22c5+0x11e7+0x10df);}get['label'](){return'Shader\x20Id\x20'+this['id']+'\x20('+(this['definition']['shaderLang'+'uage']===st?'WGSL':'GLSL')+')\x20'+this['name'];}['destroy'](){M['trace'](Xm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']),this['device']['onDestroyS'+'hader'](this),this['impl']['destroy'](this);}['loseContex'+'t'](){this['init'](),this['impl']['loseContex'+'t']();}['restoreCon'+'text'](){this['impl']['restoreCon'+'text'](this['device'],this);}}class eT{constructor(){h(this,'storage'),h(this,'gpuBuffer'),h(this,'offset');}}const ke=[];ke[Us]=function(_0x3936e0,_0x3a9612,_0x4bc913){const _0x2cf333=_0x3936e0['storageFlo'+'at32'];_0x2cf333[_0x4bc913]=_0x3a9612;},ke[ia]=(_0xb752e6,_0x3867fe,_0x38ea97)=>{const _0x1b9460=_0xb752e6['storageFlo'+'at32'];_0x1b9460[_0x38ea97]=_0x3867fe[-0x20*-0x17+0x1b1e+-0x1dfe],_0x1b9460[_0x38ea97+(-0x1e22+0x3*-0x823+0x1b46*0x2)]=_0x3867fe[0xa51+-0x251*0x7+0x5e7];},ke[rs]=(_0xa018ca,_0x3517a,_0x1acdd9)=>{const _0xb0d0cf=_0xa018ca['storageFlo'+'at32'];_0xb0d0cf[_0x1acdd9]=_0x3517a[0x910+-0x2*0x22a+-0x25e*0x2],_0xb0d0cf[_0x1acdd9+(-0x3*-0x8b+0x1*0x1acf+-0x1c6f)]=_0x3517a[0x682+-0x8*0x482+0x2f*0xa1],_0xb0d0cf[_0x1acdd9+(0x17*-0x67+-0x1*0x42d+0xd70)]=_0x3517a[-0xdf3+0x44*0x16+0x81d];},ke[gn]=(_0x5e73a9,_0x5bd54c,_0x3cff90)=>{const _0x1fef91=_0x5e73a9['storageFlo'+'at32'];_0x1fef91[_0x3cff90]=_0x5bd54c[0x1623+-0x3*-0x476+0x2385*-0x1],_0x1fef91[_0x3cff90+(0x22e4+0xb29*-0x1+-0x2*0xbdd)]=_0x5bd54c[-0x115b+0x7*-0x2c5+0x17*0x199],_0x1fef91[_0x3cff90+(0x10*-0x160+-0x11*0xad+-0x5*-0x6b3)]=_0x5bd54c[-0xb16+0x95c*-0x4+0x4*0xc22],_0x1fef91[_0x3cff90+(-0x283*-0x2+-0x1*0x2225+0x1d22)]=_0x5bd54c[-0x1*-0x361+-0x3*-0x809+-0x21d*0xd];},ke[sa]=function(_0x214e5e,_0x2bb7b5,_0x2b5dee){const _0x5d4d42=_0x214e5e['storageInt'+'32'];_0x5d4d42[_0x2b5dee]=_0x2bb7b5;},ke[qr]=function(_0x32f2d2,_0x2d0c82,_0x246d6d){const _0xcd3d25=_0x32f2d2['storageInt'+'32'];_0xcd3d25[_0x246d6d]=_0x2d0c82[-0xac+0x373*-0x1+0x5*0xd3],_0xcd3d25[_0x246d6d+(0x2153*-0x1+-0xc76+0x2dca)]=_0x2d0c82[0x8e1*0x3+0x189d+0x1*-0x333f];},ke[jr]=function(_0x208386,_0x58500f,_0x3c0b33){const _0x3f06ea=_0x208386['storageInt'+'32'];_0x3f06ea[_0x3c0b33]=_0x58500f[0x22d0+0x1939+-0x3c09],_0x3f06ea[_0x3c0b33+(0x1*0x10f5+-0xd77+-0x37d)]=_0x58500f[0x467+-0x17*-0x18e+-0x2828],_0x3f06ea[_0x3c0b33+(-0x2374+0x11*0x155+0xcd1)]=_0x58500f[-0x1f00+-0x13ab+0x32ad];},ke[Yr]=function(_0x348b01,_0x1a113a,_0x3fb90e){const _0x25f2c8=_0x348b01['storageInt'+'32'];_0x25f2c8[_0x3fb90e]=_0x1a113a[-0x137a+-0xc0a+0x1f84],_0x25f2c8[_0x3fb90e+(-0x4bb*0x2+0x16e*-0x13+0x24a1)]=_0x1a113a[0x441+-0xec0+0xa80],_0x25f2c8[_0x3fb90e+(0x1*-0x184d+0x3d*-0xa+-0x1ab1*-0x1)]=_0x1a113a[0x23e2+-0x12c3*0x2+0x1a6],_0x25f2c8[_0x3fb90e+(-0x4cc*0x4+0x90b+0x5*0x208)]=_0x1a113a[0x2612*0x1+-0xb48*-0x1+-0x1*0x3157];},ke[kh]=(_0x592732,_0x36c21e,_0x14af60)=>{const _0x658ade=_0x592732['storageFlo'+'at32'];_0x658ade[_0x14af60]=_0x36c21e[-0x1c03+0x2a*0x30+-0x5*-0x407],_0x658ade[_0x14af60+(0x1*0x24eb+0x1f8+-0x7e*0x4f)]=_0x36c21e[0x2*0xa51+0x1756+-0x2bf7],_0x658ade[_0x14af60+(0x2*-0x463+0x59d*-0x1+0xe67)]=_0x36c21e[-0x2390+-0x1229+-0x83*-0x69],_0x658ade[_0x14af60+(-0x9b4+-0xa8a+0x13*0x111)]=_0x36c21e[0x11*0x22a+0x1*-0x2707+0x240],_0x658ade[_0x14af60+(-0x1906+-0xb46+0x3*0xc1c)]=_0x36c21e[0x418+0x1*-0x1539+-0x13*-0xe7],_0x658ade[_0x14af60+(0x1*0xf73+-0x9f1+0x1*-0x579)]=_0x36c21e[0x2*0xfc3+0x1*-0x14cf+-0xab2];},ke[Sn]=(_0xb02cdb,_0x17f9fb,_0x4b7904)=>{const _0x1aa42b=_0xb02cdb['storageFlo'+'at32'];_0x1aa42b[_0x4b7904]=_0x17f9fb[0x6*-0x1c3+0x1*-0x1b59+0x25eb],_0x1aa42b[_0x4b7904+(0x15fb+-0x43*-0xa+-0x1*0x1898)]=_0x17f9fb[0x29*-0x27+-0xddd+-0x10f*-0x13],_0x1aa42b[_0x4b7904+(-0x579*-0x4+0x152c+0x14e*-0x21)]=_0x17f9fb[-0xa7*0x2f+-0x94+0x1f3f],_0x1aa42b[_0x4b7904+(0x1f3*-0x2+0x58c+-0x1a2)]=_0x17f9fb[0x3b7*0x9+-0x1943*0x1+-0x829],_0x1aa42b[_0x4b7904+(-0x37a+0x1*-0xc9d+0x2*0x80e)]=_0x17f9fb[0xa4c*0x2+0xb05+0x1*-0x1f99],_0x1aa42b[_0x4b7904+(0x3*0xbda+0x1*-0x24df+0x157)]=_0x17f9fb[-0x9bb*0x3+0x1*-0x2cf+0x2005],_0x1aa42b[_0x4b7904+(-0x165e+-0x5f6*-0x3+0x484)]=_0x17f9fb[-0xc*-0x26e+0x1c30+-0x13f*0x2e],_0x1aa42b[_0x4b7904+(0x23c1+-0x442+-0x1*0x1f76)]=_0x17f9fb[0x258d*0x1+0x1c*-0xe0+-0xd06*0x1],_0x1aa42b[_0x4b7904+(-0xe*0xbd+0x1055+-0x5f5)]=_0x17f9fb[0xb22*0x3+-0xce*0x9+0x98*-0x2c];},ke[Uc]=function(_0x266898,_0x1f1c49,_0x29ff34,_0x15cdb4){const _0x29ea7d=_0x266898['storageFlo'+'at32'];for(let _0x5de500=0x2*0x102b+0xcbd+-0xb*0x419;_0x5de500<_0x15cdb4;_0x5de500++)_0x29ea7d[_0x29ff34+_0x5de500*(0x16f1+-0x933+-0xe*0xfb)]=_0x1f1c49[_0x5de500];},ke[Bc]=(_0x4d15c1,_0x101b48,_0x1d5bf5,_0x4aabd2)=>{const _0x43ffec=_0x4d15c1['storageFlo'+'at32'];for(let _0x251460=-0x1362+0x700+-0xc62*-0x1;_0x251460<_0x4aabd2;_0x251460++)_0x43ffec[_0x1d5bf5+_0x251460*(0x745*0x2+0x1bc7+-0x2a4d)]=_0x101b48[_0x251460*(0x3d7*0x4+0x22ac+-0x3206)],_0x43ffec[_0x1d5bf5+_0x251460*(0x1126+-0x4*0x589+0x502)+(-0xa*0xd+-0x1457*-0x1+-0x13d4*0x1)]=_0x101b48[_0x251460*(-0x31*-0x35+0x92*-0x20+0x81d)+(-0x26c3+-0x18fa+0x3fbe*0x1)];},ke[zc]=(_0x49e9aa,_0x58545c,_0x242f15,_0x3b5691)=>{const _0x1d5427=_0x49e9aa['storageFlo'+'at32'];for(let _0x56d226=-0x1644+0x1e66+0x1*-0x822;_0x56d226<_0x3b5691;_0x56d226++)_0x1d5427[_0x242f15+_0x56d226*(-0x1f0b+-0x210d+0x16*0x2ea)]=_0x58545c[_0x56d226*(0x96a*0x1+0x2123+-0x2a8a)],_0x1d5427[_0x242f15+_0x56d226*(-0x168d*0x1+-0xbee+-0x227f*-0x1)+(-0x3d*0x83+0x2c3*0x8+0x920)]=_0x58545c[_0x56d226*(0x12b4+0x2422*-0x1+-0x37d*-0x5)+(0x2dc*0xb+0x119+-0x208c)],_0x1d5427[_0x242f15+_0x56d226*(0x1575+-0x1*0x665+-0xf0c)+(-0xc08+0x5f4*0x6+0xbd7*-0x2)]=_0x58545c[_0x56d226*(0x2f3*0x2+0x3*0xce5+-0xe*0x32f)+(0xd3e+0x1327*0x2+-0x338a)];},ke[yn]=(_0x4047bc,_0x23a062,_0x5b909a,_0x3a3b68)=>{const _0xd54f5d=_0x4047bc['storageUin'+'t32'];_0xd54f5d[_0x5b909a]=_0x23a062;},ke[vn]=(_0x13169f,_0x4c7d30,_0x409c07,_0x5aeacf)=>{const _0x36e3d4=_0x13169f['storageUin'+'t32'];_0x36e3d4[_0x409c07]=_0x4c7d30[-0x1c65+0x2*0x10ea+0x6b*-0xd],_0x36e3d4[_0x409c07+(-0x1027+0x25a7+-0x1*0x157f)]=_0x4c7d30[-0x1b17+-0xffa+0x2b12];},ke[xn]=(_0x3e34a6,_0x212b09,_0x22e308,_0x40d129)=>{const _0x1848fc=_0x3e34a6['storageUin'+'t32'];_0x1848fc[_0x22e308]=_0x212b09[0x1e8*-0x6+-0x1cbb*0x1+-0xd*-0x317],_0x1848fc[_0x22e308+(0xa1e+0x1*0xe3f+-0x185c)]=_0x212b09[-0x3f8+-0x1*-0x213a+-0x1d41*0x1],_0x1848fc[_0x22e308+(-0x23b8+0xee1+0x14d9)]=_0x212b09[-0xe3*0x11+0x1500+-0x5eb];},ke[Tn]=(_0x43e88c,_0x196fe0,_0x541c1c,_0x4f7e41)=>{const _0xf1ca92=_0x43e88c['storageUin'+'t32'];_0xf1ca92[_0x541c1c]=_0x196fe0[-0x15b0+-0x1d96*0x1+0x3346],_0xf1ca92[_0x541c1c+(-0x18bf+-0xf95+0x2855)]=_0x196fe0[-0x12f9*0x2+0x982+-0x329*-0x9],_0xf1ca92[_0x541c1c+(0x1*0x919+-0xe34+-0x77*-0xb)]=_0x196fe0[0xf86+-0x2561+-0x15dd*-0x1],_0xf1ca92[_0x541c1c+(-0x1*0x115+0x1953*-0x1+0x1a6b)]=_0x196fe0[0x1*-0x88b+0x3*-0x471+0x15e1];},ke[wn]=function(_0x118264,_0x13d26d,_0x494a7e,_0x21e872){const _0x56424f=_0x118264['storageInt'+'32'];for(let _0x27984d=-0x1889+-0x1f17+0x37a0;_0x27984d<_0x21e872;_0x27984d++)_0x56424f[_0x494a7e+_0x27984d*(-0x1*-0x13d+0x23b*0x3+-0x7ea)]=_0x13d26d[_0x27984d];},ke[Gc]=ke[wn],ke[Vc]=function(_0x10d4d9,_0xfdaca,_0x211bb5,_0xaff4c5){const _0x104397=_0x10d4d9['storageUin'+'t32'];for(let _0x114d9f=0x1163+-0x1*0x2621+0x14be;_0x114d9f<_0xaff4c5;_0x114d9f++)_0x104397[_0x211bb5+_0x114d9f*(0xb24+-0x254e+-0x45d*-0x6)]=_0xfdaca[_0x114d9f];},ke[En]=(_0x43cbe5,_0x4cdd1a,_0xaa8452,_0x3d6c72)=>{const _0x4ff928=_0x43cbe5['storageInt'+'32'];for(let _0x3456be=0x26e+-0x13b+-0x133;_0x3456be<_0x3d6c72;_0x3456be++)_0x4ff928[_0xaa8452+_0x3456be*(0x191c+0x615*-0x3+-0x6d9)]=_0x4cdd1a[_0x3456be*(0x78b*-0x3+0xea5+0x7fe)],_0x4ff928[_0xaa8452+_0x3456be*(-0x2e*-0x2+-0x8bb+-0x13*-0x71)+(0xd*-0x273+0x7*-0x1ea+0x2d3e)]=_0x4cdd1a[_0x3456be*(0x2bf+-0x613+0x356)+(-0x26ea+-0x20cc+0x47b7)];},ke[Wc]=ke[En],ke[Hc]=(_0x2808db,_0x282661,_0xa3c5a8,_0x50d2b9)=>{const _0x179e84=_0x2808db['storageUin'+'t32'];for(let _0x63937d=-0xc*0x33a+0x10d3+-0x127*-0x13;_0x63937d<_0x50d2b9;_0x63937d++)_0x179e84[_0xa3c5a8+_0x63937d*(-0x201d*-0x1+-0x1b21*-0x1+-0x3b3a)]=_0x282661[_0x63937d*(0x96b*0x1+0x2655*0x1+-0x9*0x54e)],_0x179e84[_0xa3c5a8+_0x63937d*(0x1a01+-0x24b*-0x7+-0x2a0a*0x1)+(0x43*-0x45+-0x6f7*-0x1+0xb19)]=_0x282661[_0x63937d*(0x1d*0xd5+-0x737+-0x43a*0x4)+(0xb15+0x1478*-0x1+-0x964*-0x1)];},ke[An]=(_0x43a947,_0x1422bc,_0x75bb02,_0x50d4ee)=>{const _0x1a26d5=_0x43a947['storageInt'+'32'];for(let _0x2f2904=-0xa49*-0x2+-0x1c99+0x807;_0x2f2904<_0x50d4ee;_0x2f2904++)_0x1a26d5[_0x75bb02+_0x2f2904*(-0x1bf3+0xdf7+0xe00)]=_0x1422bc[_0x2f2904*(0x720*0x2+0x14df+-0xbb4*0x3)],_0x1a26d5[_0x75bb02+_0x2f2904*(0x1*0x26b+-0x1049*-0x1+-0x12b0)+(-0x1f02+-0x3d3+0xd*0x2ae)]=_0x1422bc[_0x2f2904*(-0x181d+0x8c3*-0x3+0x3269)+(-0x1fa*0x3+0x15*0x44+0x5b)],_0x1a26d5[_0x75bb02+_0x2f2904*(0x21bb+0x1*-0x1e2f+0xe2*-0x4)+(-0x1a4f+0x1dd0+-0x37f)]=_0x1422bc[_0x2f2904*(-0x1105*0x1+0x397*-0x6+0x2692)+(0x250*0x4+-0x1321+-0x1*-0x9e3)];},ke[Xc]=ke[An],ke[$c]=(_0x3f377c,_0x5bd65d,_0x3cc5b9,_0x593eff)=>{const _0x1f9ccd=_0x3f377c['storageUin'+'t32'];for(let _0x46e406=0x10d1+0x5b3*-0x1+-0xb1e;_0x46e406<_0x593eff;_0x46e406++)_0x1f9ccd[_0x3cc5b9+_0x46e406*(0x2*0x45+0x833*-0x1+-0x28f*-0x3)]=_0x5bd65d[_0x46e406*(-0x15bf+0x1a61*-0x1+0x3023)],_0x1f9ccd[_0x3cc5b9+_0x46e406*(0x5*0x67d+-0x46f+-0x1bfe)+(0x5f7*0x1+-0x8e4*-0x1+-0xeda)]=_0x5bd65d[_0x46e406*(-0x1*0x1eeb+0x1b9f+-0x4d*-0xb)+(0x2164+-0x2*0x8be+-0x3*0x54d)],_0x1f9ccd[_0x3cc5b9+_0x46e406*(0x1a8+0x124c+-0x13f0)+(-0x1fc*-0x11+-0x73*-0xf+-0x1*0x2877)]=_0x5bd65d[_0x46e406*(0x2*0x11ef+-0x1188+0x1*-0x1253)+(-0x9*-0x3f9+0x1*0x11de+-0x359d)];};class nm{constructor(_0x41f6b0,_0x2247d0,_0x4c5905=!(-0x400+-0x2db*0x4+0xf6c)){h(this,'device'),h(this,'persistent'),h(this,'allocation'),h(this,'storageFlo'+'at32'),h(this,'storageInt'+'32'),h(this,'storageUin'+'t32'),h(this,'renderVers'+'ionDirty',-0x1b97*0x1+-0x1228+0x2dbf);if(this['device']=_0x41f6b0,this['format']=_0x2247d0,this['persistent']=_0x4c5905,M['assert'](_0x2247d0),_0x4c5905){this['impl']=_0x41f6b0['createUnif'+'ormBufferI'+'mpl'](this);const _0x4d32f1=new ArrayBuffer(_0x2247d0['byteSize']);this['assignStor'+'age'](new Int32Array(_0x4d32f1)),_0x41f6b0['_vram']['ub']+=this['format']['byteSize'];}else this['allocation']=new eT();}['destroy'](){if(this['persistent']){const _0x46a510=this['device'];this['impl']['destroy'](_0x46a510),_0x46a510['_vram']['ub']-=this['format']['byteSize'];}}get['offset'](){return this['persistent']?-0xbeb+-0x434*0x6+-0x1*-0x2523:this['allocation']['offset'];}['assignStor'+'age'](_0x335209){this['storageInt'+'32']=_0x335209,this['storageUin'+'t32']=new Uint32Array(_0x335209['buffer'],_0x335209['byteOffset'],_0x335209['byteLength']/(0x113f+0x3*-0x9d+0x7b2*-0x2)),this['storageFlo'+'at32']=new Float32Array(_0x335209['buffer'],_0x335209['byteOffset'],_0x335209['byteLength']/(-0xa33+-0x1867+0x1a6*0x15));}['loseContex'+'t'](){var _0x27bbff;(_0x27bbff=this['impl'])==null||_0x27bbff['loseContex'+'t']();}['setUniform'](_0x1a134c,_0x454f0d){M['assert'](_0x1a134c);const _0x573d97=_0x1a134c['offset'];if(_0x454f0d!=null){const _0x1d13f0=ke[_0x1a134c['updateType']];_0x1d13f0?_0x1d13f0(this,_0x454f0d,_0x573d97,_0x1a134c['count']):this['storageFlo'+'at32']['set'](_0x454f0d,_0x573d97);}else M['warnOnce']('Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20to\x20unif'+'orm\x20['+_0x1a134c['name']+('],\x20expecte'+'d\x20type\x20')+DS[_0x1a134c['type']]+('\x20while\x20ren'+'dering\x20')+Q['toString']());}['set'](_0x21d1e7,_0x2266f8){const _0x2d657a=this['format']['map']['get'](_0x21d1e7);M['assert'](_0x2d657a,'Uniform\x20na'+'me\x20['+_0x21d1e7+(']\x20is\x20not\x20p'+'art\x20of\x20the'+'\x20Uniform\x20b'+'uffer.')),_0x2d657a&&this['setUniform'](_0x2d657a,_0x2266f8);}['startUpdat'+'e'](_0x480074){if(!this['persistent']){const _0x4f8a6b=this['allocation'],_0x684fcc=_0x4f8a6b['gpuBuffer'];this['device']['dynamicBuf'+'fers']['alloc'](_0x4f8a6b,this['format']['byteSize']),this['assignStor'+'age'](_0x4f8a6b['storage']),_0x480074&&(_0x480074['bindGroup']=_0x4f8a6b['gpuBuffer']['getBindGro'+'up'](this),_0x480074['offsets'][0x4d*0x3e+-0xf5a+-0x1a6*0x2]=_0x4f8a6b['offset']),_0x684fcc!==_0x4f8a6b['gpuBuffer']&&(this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion']);}}['endUpdate'](){this['persistent']?this['impl']['unlock'](this):(this['storageFlo'+'at32']=null,this['storageInt'+'32']=null);}['update'](_0x3931c0){this['startUpdat'+'e'](_0x3931c0);const _0x887c41=this['format']['uniforms'];for(let _0xfc6bd6=0xc79+0x7c0+-0x1439;_0xfc6bd6<_0x887c41['length'];_0xfc6bd6++){const _0x2cc75d=_0x887c41[_0xfc6bd6]['scopeId']['value'];this['setUniform'](_0x887c41[_0xfc6bd6],_0x2cc75d);}this['endUpdate']();}}class tT{constructor(){h(this,'frameAlloc'+'ations',[]),h(this,'pastFrameA'+'llocations',new Map()),h(this,'_enabled',!(0x2*0x8e2+0x71d+-0x18e0)),h(this,'_enableReq'+'uest',!(0xca*0x5+0x233b*0x1+-0x272c)),h(this,'_frameTime',-0xe*0x1b2+-0x20b0+-0x2e*-0x13a);}['loseContex'+'t'](){this['pastFrameA'+'llocations']['clear']();}set['enabled'](_0x483a06){this['_enableReq'+'uest']=_0x483a06;}get['enabled'](){return this['_enableReq'+'uest'];}['processEna'+'bleRequest'](){this['_enableReq'+'uest']!==this['_enabled']&&(this['_enabled']=this['_enableReq'+'uest'],this['_enabled']||(this['_frameTime']=0xe12+0x719+-0x152b));}['request'](_0x1a3a3b){this['pastFrameA'+'llocations']['set'](_0x1a3a3b,this['frameAlloc'+'ations']),this['frameAlloc'+'ations']=[];}['report'](_0x314fe5,_0x457fe3){if(_0x457fe3){const _0x3d905f=this['pastFrameA'+'llocations']['get'](_0x314fe5);if(M['assert'](_0x3d905f['length']===_0x457fe3['length']),_0x457fe3['length']>0xc*0x25f+0x4*-0x305+-0x1060&&(this['_frameTime']=_0x457fe3['reduce']((_0x17140d,_0x2a39a8)=>_0x17140d+_0x2a39a8,0x778*0x2+-0x12fd*-0x1+-0x21ed)),ni['get'](Sl)){M['trace'](Sl,'--\x20GPU\x20tim'+'ings\x20for\x20f'+'rame\x20'+_0x314fe5+'\x20--');let _0x2da8c7=0x1f*-0xeb+-0x4*0x2ce+-0x1*-0x27ad;for(let _0x31a746=0x1*-0xec8+0x1*-0x26da+0x35a2;_0x31a746<_0x3d905f['length'];++_0x31a746){const _0x579ee5=_0x3d905f[_0x31a746];_0x2da8c7+=_0x457fe3[_0x31a746],M['trace'](Sl,_0x457fe3[_0x31a746]['toFixed'](0x3e4+-0x886*0x4+-0x509*-0x6)+'\x20ms\x20'+_0x579ee5);}M['trace'](Sl,_0x2da8c7['toFixed'](-0x7*-0x139+-0xafa+0x26d)+'\x20ms\x20TOTAL');}}this['pastFrameA'+'llocations']['delete'](_0x314fe5);}['getSlot'](_0x291604){const _0x161ce2=this['frameAlloc'+'ations']['length'];return this['frameAlloc'+'ations']['push'](_0x291604),_0x161ce2;}get['slotCount'](){return this['frameAlloc'+'ations']['length'];}}class ty{constructor(){h(this,'bufferId',null);}['destroy'](_0x407026){this['bufferId']&&(_0x407026['gl']['deleteBuff'+'er'](this['bufferId']),this['bufferId']=null);}get['initialize'+'d'](){return!!this['bufferId'];}['loseContex'+'t'](){this['bufferId']=null;}['unlock'](_0x4ca9cd,_0x3b8e35,_0xa84b11,_0x13ae85){const _0x1e678d=_0x4ca9cd['gl'];if(this['bufferId'])_0x1e678d['bindBuffer'](_0xa84b11,this['bufferId']),_0x1e678d['bufferSubD'+'ata'](_0xa84b11,-0x1238+-0x1a23*-0x1+0x1*-0x7eb,_0x13ae85);else{let _0x4bf1e3;switch(_0x3b8e35){case ls:_0x4bf1e3=_0x1e678d['STATIC_DRA'+'W'];break;case Mh:_0x4bf1e3=_0x1e678d['DYNAMIC_DR'+'AW'];break;case oS:_0x4bf1e3=_0x1e678d['STREAM_DRA'+'W'];break;case F0:_0x4bf1e3=_0x1e678d['DYNAMIC_CO'+'PY'];break;}this['bufferId']=_0x1e678d['createBuff'+'er'](),_0x1e678d['bindBuffer'](_0xa84b11,this['bufferId']),_0x1e678d['bufferData'](_0xa84b11,_0x13ae85,_0x4bf1e3);}}}class sT extends ty{constructor(){super(...arguments),h(this,'vao',null);}['destroy'](_0x591b5e){super['destroy'](_0x591b5e),_0x591b5e['unbindVert'+'exArray']();}['loseContex'+'t'](){super['loseContex'+'t'](),this['vao']=null;}['unlock'](_0x394103){const _0x4c1e2f=_0x394103['device'];super['unlock'](_0x4c1e2f,_0x394103['usage'],_0x4c1e2f['gl']['ARRAY_BUFF'+'ER'],_0x394103['storage']);}}class iT extends ty{constructor(_0x41bd23){super();const _0x87909f=_0x41bd23['device']['gl'],_0x5a73a8=_0x41bd23['format'];_0x5a73a8===ff?this['glFormat']=_0x87909f['UNSIGNED_B'+'YTE']:_0x5a73a8===zi?this['glFormat']=_0x87909f['UNSIGNED_S'+'HORT']:_0x5a73a8===hr&&(this['glFormat']=_0x87909f['UNSIGNED_I'+'NT']);}['unlock'](_0x14cd78){const _0x3df1b5=_0x14cd78['device'];super['unlock'](_0x3df1b5,_0x14cd78['usage'],_0x3df1b5['gl']['ELEMENT_AR'+'RAY_BUFFER'],_0x14cd78['storage']);}}class rT{constructor(_0x2b3fa3,_0x95a266,_0xf2cffa,_0x10503a){if(this['locationId']=_0x10503a,this['scopeId']=_0x2b3fa3['scope']['resolve'](_0x95a266),this['version']=new $S(),_0x95a266['substring'](_0x95a266['length']-(-0x1*0xd9d+0xa2a*0x1+0x376))==='[0]')switch(_0xf2cffa){case Us:_0xf2cffa=Uc;break;case sa:_0xf2cffa=wn;break;case yn:_0xf2cffa=Vc;break;case on:_0xf2cffa=Gc;break;case ia:_0xf2cffa=Bc;break;case qr:_0xf2cffa=En;break;case vn:_0xf2cffa=Hc;break;case Lo:_0xf2cffa=Wc;break;case rs:_0xf2cffa=zc;break;case jr:_0xf2cffa=An;break;case xn:_0xf2cffa=$c;break;case Ro:_0xf2cffa=Xc;break;case gn:_0xf2cffa=Qu;break;case Yr:_0xf2cffa=Uh;break;case Tn:_0xf2cffa=Ju;break;case Oo:_0xf2cffa=em;break;}this['dataType']=_0xf2cffa,this['value']=[null,null,null,null],this['array']=[];}}let wp=0x2d7*-0x1+0x7ed+-0x516;const aT=new Set(['gl_VertexI'+'D','gl_Instanc'+'eID','gl_DrawID','gl_BaseVer'+'tex','gl_BaseIns'+'tance']);class nT{constructor(){h(this,'map',new Map());}['destroy'](_0xddfdcd){this['map']['forEach'](_0x194354=>{_0xddfdcd['gl']['deleteShad'+'er'](_0x194354);});}['loseContex'+'t'](_0x5782e1){this['map']['clear']();}}const oT=new Ht(),lT=new Ht();class hT{constructor(_0x23909e){h(this,'compileDur'+'ation',-0xed6*0x2+-0x65*-0x5+0x1bb3),(this['init'](),this['compile'](_0x23909e['device'],_0x23909e),this['link'](_0x23909e['device'],_0x23909e),_0x23909e['device']['shaders']['push'](_0x23909e));}['destroy'](_0x182dfc){this['glProgram']&&(_0x182dfc['device']['gl']['deleteProg'+'ram'](this['glProgram']),this['glProgram']=null);}['init'](){this['uniforms']=[],this['samplers']=[],this['attributes']=[],this['glProgram']=null,this['glVertexSh'+'ader']=null,this['glFragment'+'Shader']=null;}['loseContex'+'t'](){this['init']();}['restoreCon'+'text'](_0x2d9d96,_0xaa26ce){this['compile'](_0x2d9d96,_0xaa26ce),this['link'](_0x2d9d96,_0xaa26ce);}['compile'](_0x5f5801,_0x4c1651){const _0xfa1405=_0x4c1651['definition'];this['glVertexSh'+'ader']=this['_compileSh'+'aderSource'](_0x5f5801,_0xfa1405['vshader'],!(0x190c+-0x213e+0x1*0x832)),this['glFragment'+'Shader']=this['_compileSh'+'aderSource'](_0x5f5801,_0xfa1405['fshader'],!(0x1097*-0x1+0x196a+-0x8d2*0x1));}['link'](_0x30932e,_0x429070){if(this['glProgram'])return;const _0x2cf5de=_0x30932e['gl'];if(_0x2cf5de['isContextL'+'ost']())return;let _0x5ddc82=0x238*-0x3+-0xdec+-0xa4a*-0x2;M['call'](()=>{this['compileDur'+'ation']=0x1792+-0x2489+0x1*0xcf7,_0x5ddc82=de();});const _0x513496=_0x2cf5de['createProg'+'ram']();this['glProgram']=_0x513496,_0x2cf5de['attachShad'+'er'](_0x513496,this['glVertexSh'+'ader']),_0x2cf5de['attachShad'+'er'](_0x513496,this['glFragment'+'Shader']);const _0x105984=_0x429070['definition'],_0x51b602=_0x105984['attributes'];if(_0x105984['useTransfo'+'rmFeedback']){const _0x2567ca=[];for(const _0x12fa26 in _0x51b602)_0x51b602['hasOwnProp'+'erty'](_0x12fa26)&&_0x2567ca['push']('out_'+_0x12fa26);_0x2cf5de['transformF'+'eedbackVar'+'yings'](_0x513496,_0x2567ca,_0x2cf5de['INTERLEAVE'+'D_ATTRIBS']);}const _0x353071={};for(const _0x4787bb in _0x51b602)if(_0x51b602['hasOwnProp'+'erty'](_0x4787bb)){const _0xeb75e=_0x51b602[_0x4787bb],_0x530a78=De[_0xeb75e];M['assert'](!_0x353071['hasOwnProp'+'erty'](_0x530a78),'WARNING:\x20T'+'wo\x20attribu'+'tes\x20are\x20ma'+'pped\x20to\x20th'+'e\x20same\x20loc'+'ation\x20in\x20a'+'\x20shader:\x20'+_0x353071[_0x530a78]+'\x20and\x20'+_0x4787bb),_0x353071[_0x530a78]=_0x4787bb,_0x2cf5de['bindAttrib'+'Location'](_0x513496,_0x530a78,_0x4787bb);}_0x2cf5de['linkProgra'+'m'](_0x513496),M['call'](()=>{this['compileDur'+'ation']=de()-_0x5ddc82;}),_0x30932e['_shaderSta'+'ts']['linked']++,_0x105984['tag']===AS&&_0x30932e['_shaderSta'+'ts']['materialSh'+'aders']++;}['_compileSh'+'aderSource'](_0x30708c,_0x5b3db4,_0x479e79){const _0x1d6fac=_0x30708c['gl'];if(_0x1d6fac['isContextL'+'ost']())return null;const _0x1e6341=(_0x479e79?oT:lT)['get'](_0x30708c,()=>new nT());let _0x3ac00d=_0x1e6341['map']['get'](_0x5b3db4);if(!_0x3ac00d){const _0x2f0f96=de();_0x30708c['fire']('shader:com'+'pile:start',{'timestamp':_0x2f0f96,'target':_0x30708c}),_0x3ac00d=_0x1d6fac['createShad'+'er'](_0x479e79?_0x1d6fac['VERTEX_SHA'+'DER']:_0x1d6fac['FRAGMENT_S'+'HADER']),_0x1d6fac['shaderSour'+'ce'](_0x3ac00d,_0x5b3db4),_0x1d6fac['compileSha'+'der'](_0x3ac00d),_0x1e6341['map']['set'](_0x5b3db4,_0x3ac00d);const _0x29f2ed=de();_0x30708c['fire']('shader:com'+'pile:end',{'timestamp':_0x29f2ed,'target':_0x30708c}),_0x30708c['_shaderSta'+'ts']['compileTim'+'e']+=_0x29f2ed-_0x2f0f96,_0x479e79?_0x30708c['_shaderSta'+'ts']['vsCompiled']++:_0x30708c['_shaderSta'+'ts']['fsCompiled']++;}return _0x3ac00d;}['finalize'](_0x2e4c82,_0x45a16e){var _0x4f0dc5,_0x1d2bb7;const _0x21ec69=_0x2e4c82['gl'];if(_0x21ec69['isContextL'+'ost']())return!(0x4a3*-0x6+0x15*0x79+0x1fd*0x9);const _0x1c134f=this['glProgram'],_0x3092c1=_0x45a16e['definition'],_0x9654f0=de();_0x2e4c82['fire']('shader:lin'+'k:start',{'timestamp':_0x9654f0,'target':_0x2e4c82});let _0x33810e=-0x2003+0xa7*0x14+0x12f7;if(M['call'](()=>{_0x33810e=de();}),!_0x21ec69['getProgram'+'Parameter'](_0x1c134f,_0x21ec69['LINK_STATU'+'S'])){if(!this['_isCompile'+'d'](_0x2e4c82,_0x45a16e,this['glVertexSh'+'ader'],_0x3092c1['vshader'],'vertex')||!this['_isCompile'+'d'](_0x2e4c82,_0x45a16e,this['glFragment'+'Shader'],_0x3092c1['fshader'],'fragment'))return!(0xaeb+-0x13*0xb8+0x2be);const _0x2a78f8='Failed\x20to\x20'+'link\x20shade'+'r\x20program.'+'\x20Error:\x20'+_0x21ec69['getProgram'+'InfoLog'](_0x1c134f);return _0x3092c1['translated'+'Frag']=(_0x4f0dc5=_0x21ec69['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(0x1abf+0x76c+-0x222b):_0x4f0dc5['getTransla'+'tedShaderS'+'ource'](this['glFragment'+'Shader']),_0x3092c1['translated'+'Vert']=(_0x1d2bb7=_0x21ec69['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0x2*-0x9ac+-0x171a+0x3c2):_0x1d2bb7['getTransla'+'tedShaderS'+'ource'](this['glVertexSh'+'ader']),console['error'](_0x2a78f8,_0x3092c1),console['error'](_0x2a78f8),!(-0x2350+0xa6b+0x1*0x18e6);}const _0x4b1428=_0x21ec69['getProgram'+'Parameter'](_0x1c134f,_0x21ec69['ACTIVE_ATT'+'RIBUTES']);_0x45a16e['attributes']['clear']();for(let _0x31a66c=0xe24+0x464+0x944*-0x2;_0x31a66c<_0x4b1428;_0x31a66c++){const _0x1f2b06=_0x21ec69['getActiveA'+'ttrib'](_0x1c134f,_0x31a66c),_0x599e97=_0x21ec69['getAttribL'+'ocation'](_0x1c134f,_0x1f2b06['name']);aT['has'](_0x1f2b06['name'])||(_0x3092c1['attributes'][_0x1f2b06['name']]===void(-0x1762+0x171f+-0x43*-0x1)?(console['error']('Vertex\x20sha'+'der\x20attrib'+'ute\x20\x22'+_0x1f2b06['name']+('\x22\x20is\x20not\x20m'+'apped\x20to\x20a'+'\x20semantic\x20'+'in\x20shader\x20'+'definition'+',\x20shader\x20[')+_0x45a16e['label']+']',_0x45a16e),_0x45a16e['failed']=!(-0xe1b+-0x31*-0x97+-0xecc)):_0x45a16e['attributes']['set'](_0x599e97,_0x1f2b06['name']));}const _0x415475=_0x2e4c82['_samplerTy'+'pes'],_0x57f6d8=_0x21ec69['getProgram'+'Parameter'](_0x1c134f,_0x21ec69['ACTIVE_UNI'+'FORMS']);for(let _0x3f8a8f=0xdeb+-0x5bf+0x82c*-0x1;_0x3f8a8f<_0x57f6d8;_0x3f8a8f++){const _0x39f4ee=_0x21ec69['getActiveU'+'niform'](_0x1c134f,_0x3f8a8f),_0x19c9ec=_0x21ec69['getUniform'+'Location'](_0x1c134f,_0x39f4ee['name']),_0x235aab=new rT(_0x2e4c82,_0x39f4ee['name'],_0x2e4c82['pcUniformT'+'ype'][_0x39f4ee['type']],_0x19c9ec);_0x415475['has'](_0x39f4ee['type'])?this['samplers']['push'](_0x235aab):this['uniforms']['push'](_0x235aab);}_0x45a16e['ready']=!(0x888+0x418+-0xca0);const _0x599aab=de();return _0x2e4c82['fire']('shader:lin'+'k:end',{'timestamp':_0x599aab,'target':_0x2e4c82}),_0x2e4c82['_shaderSta'+'ts']['compileTim'+'e']+=_0x599aab-_0x9654f0,M['call'](()=>{const _0x20468f=de()-_0x33810e;this['compileDur'+'ation']+=_0x20468f,wp+=this['compileDur'+'ation'],M['trace'](t0,'[id:\x20'+_0x45a16e['id']+']\x20'+_0x45a16e['name']+':\x20'+this['compileDur'+'ation']['toFixed'](0x2241+-0x689*-0x3+0x32b*-0x11)+('ms,\x20TOTAL:'+'\x20')+wp['toFixed'](-0xa44+-0x2*-0x107b+-0x16b1)+'ms');}),!(0x2021+-0x1369+0x25*-0x58);}['_isCompile'+'d'](_0x2be892,_0xb9e2ff,_0xc199c4,_0x3cf2f0,_0x5c9f75){const _0x4c4e59=_0x2be892['gl'];if(!_0x4c4e59['getShaderP'+'arameter'](_0xc199c4,_0x4c4e59['COMPILE_ST'+'ATUS'])){const _0x17a185=_0x4c4e59['getShaderI'+'nfoLog'](_0xc199c4),[_0x7582ba,_0x388d96]=this['_processEr'+'ror'](_0x3cf2f0,_0x17a185),_0x25d344='Failed\x20to\x20'+'compile\x20'+_0x5c9f75+'\x20shader:\x0a\x0a'+_0x17a185+'\x0a'+_0x7582ba+('\x20while\x20ren'+'dering\x20')+Q['toString']();return _0x388d96['shader']=_0xb9e2ff,console['error'](_0x25d344,_0x388d96),console['error'](_0x25d344),!(-0x1caf+0x18e5+0x3cb);}return!(-0x1398+-0x9b+0x1433*0x1);}['isLinked'](_0xbaf43e){const {extParallelShaderCompile:_0x578840}=_0xbaf43e;return _0x578840?_0xbaf43e['gl']['getProgram'+'Parameter'](this['glProgram'],_0x578840['COMPLETION'+'_STATUS_KH'+'R']):!(0xa13*0x3+-0x2443+0x60a);}['_processEr'+'ror'](_0x1f4207,_0x1d93ae){const _0x22d553={};let _0x53e731='';if(_0x1f4207){const _0x3113a0=_0x1f4207['split']('\x0a');let _0x567180=-0x13d5+-0x1*-0x157f+-0x1aa,_0x2372e8=_0x3113a0['length'];if(_0x1d93ae&&_0x1d93ae['startsWith']('ERROR:')){const _0x59c4c5=_0x1d93ae['match'](/^ERROR:\s(\d+):(\d+):\s*(.+)/);_0x59c4c5&&(_0x22d553['message']=_0x59c4c5[0x3*-0xa89+0x367+-0xe9*-0x1f],_0x22d553['line']=parseInt(_0x59c4c5[0x2b0+-0x1cf1*-0x1+0x1f9f*-0x1],-0x28c+0x8ba+-0x624),_0x567180=Math['max'](0x1*-0x6f7+0x546+0x1b1,_0x22d553['line']-(-0x192a+0x1d*-0x80+0x27b0)),_0x2372e8=Math['min'](_0x3113a0['length'],_0x22d553['line']+(0xb95*0x3+0x1bad+0x163*-0x2d)));}for(let _0x2ddd17=_0x567180;_0x2ddd17<_0x2372e8;_0x2ddd17++){const _0x64b633=_0x2ddd17+(0x4a5*-0x8+-0x1e9b+0x43c4)===_0x22d553['line']?'>\x20':'\x20\x20';_0x53e731+=''+_0x64b633+(_0x2ddd17+(0x6e+-0x88f+0x6*0x15b))+':\x09'+_0x3113a0[_0x2ddd17]+'\x0a';}_0x22d553['source']=_0x1f4207;}return[_0x53e731,_0x22d553];}}function Ep(_0x40184a,_0x20e5a9){const _0x1d4d3d=_0x40184a['width'],_0x433935=_0x40184a['height'];if(_0x1d4d3d>_0x20e5a9||_0x433935>_0x20e5a9){const _0x19c6b0=_0x20e5a9/Math['max'](_0x1d4d3d,_0x433935),_0x82fdc7=Math['floor'](_0x1d4d3d*_0x19c6b0),_0x428da4=Math['floor'](_0x433935*_0x19c6b0);M['warn']('Image\x20dime'+'nsions\x20lar'+'ger\x20than\x20m'+'ax\x20support'+'ed\x20texture'+'\x20size\x20of\x20'+_0x20e5a9+('.\x20Resizing'+'\x20from\x20')+_0x1d4d3d+',\x20'+_0x433935+'\x20to\x20'+_0x82fdc7+',\x20'+_0x428da4+'.');const _0x155ca7=document['createElem'+'ent']('canvas');return _0x155ca7['width']=_0x82fdc7,_0x155ca7['height']=_0x428da4,_0x155ca7['getContext']('2d')['drawImage'](_0x40184a,0xdf8+-0x207d*-0x1+-0x6a3*0x7,-0x7*-0x39b+-0x8c5*-0x1+-0x2202,_0x1d4d3d,_0x433935,-0x1*0x25da+-0x1949+0x3f23,-0x13e3+-0x1fcf+-0x1fd*-0x1a,_0x82fdc7,_0x428da4),_0x155ca7;}return _0x40184a;}class cT{constructor(_0x116811){h(this,'_glTexture',null),h(this,'_glTarget'),h(this,'_glFormat'),h(this,'_glInterna'+'lFormat'),h(this,'_glPixelTy'+'pe'),h(this,'_glCreated'),h(this,'dirtyParam'+'eterFlags',0x12e*0x10+-0x14*-0x74+-0x1bf0),this['texture']=_0x116811;}['destroy'](_0x4b5418){if(this['_glTexture']){for(let _0x2cf0b4=-0x1*-0x26b+0x1f1c+-0x2187;_0x2cf0b4<_0x4b5418['textureUni'+'ts']['length'];_0x2cf0b4++){const _0x393ada=_0x4b5418['textureUni'+'ts'][_0x2cf0b4];for(let _0x34ed70=-0xaea+0x248c+-0x19a2;_0x34ed70<_0x393ada['length'];_0x34ed70++)_0x393ada[_0x34ed70]===this['_glTexture']&&(_0x393ada[_0x34ed70]=null);}_0x4b5418['gl']['deleteText'+'ure'](this['_glTexture']),this['_glTexture']=null;}}['loseContex'+'t'](){this['_glTexture']=null;}['propertyCh'+'anged'](_0x411ecb){this['dirtyParam'+'eterFlags']|=_0x411ecb;}['initialize'](_0x36d70a,_0xeba09e){const _0x4e08e9=_0x36d70a['gl'];switch(this['_glTexture']=_0x4e08e9['createText'+'ure'](),this['_glTarget']=_0xeba09e['_cubemap']?_0x4e08e9['TEXTURE_CU'+'BE_MAP']:_0xeba09e['_volume']?_0x4e08e9['TEXTURE_3D']:_0xeba09e['array']?_0x4e08e9['TEXTURE_2D'+'_ARRAY']:_0x4e08e9['TEXTURE_2D'],_0xeba09e['_format']){case lS:this['_glFormat']=_0x4e08e9['ALPHA'],this['_glInterna'+'lFormat']=_0x4e08e9['ALPHA'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case hS:this['_glFormat']=_0x4e08e9['LUMINANCE'],this['_glInterna'+'lFormat']=_0x4e08e9['LUMINANCE'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case Eu:this['_glFormat']=_0x4e08e9['LUMINANCE_'+'ALPHA'],this['_glInterna'+'lFormat']=_0x4e08e9['LUMINANCE_'+'ALPHA'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case Hu:this['_glFormat']=_0x4e08e9['RED'],this['_glInterna'+'lFormat']=_0x4e08e9['R8'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case Wu:this['_glFormat']=_0x4e08e9['RG'],this['_glInterna'+'lFormat']=_0x4e08e9['RG8'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case Ec:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x4e08e9['RGB565'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_S'+'HORT_5_6_5'];break;case Au:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x4e08e9['RGB5_A1'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_S'+'HORT_5_5_5'+'_1'];break;case Ac:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA4'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_S'+'HORT_4_4_4'+'_4'];break;case ur:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x4e08e9['RGB8'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case Oe:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA8'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case uS:case gS:M['error']('BGRA8\x20and\x20'+'SBGRA8\x20tex'+'ture\x20forma'+'ts\x20are\x20not'+'\x20supported'+'\x20by\x20WebGL.');break;case bc:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGB_S3TC_'+'DXT1_EXT'];break;case bu:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT3_EXT'];break;case Yo:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT5_EXT'];break;case Pc:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ETC1']['COMPRESSED'+'_RGB_ETC1_'+'WEBGL'];break;case Ko:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_2BPPV1_IM'+'G'];break;case Zo:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_2BPPV1_I'+'MG'];break;case Mc:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_4BPPV1_IM'+'G'];break;case Ic:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_4BPPV1_I'+'MG'];break;case Pu:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGB8_ETC2'];break;case Mu:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGBA8_ETC'+'2_EAC'];break;case cS:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_RGBA_ASTC'+'_4x4_KHR'];break;case dS:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGB_ATC_W'+'EBGL'];break;case fS:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGBA_ATC_'+'INTERPOLAT'+'ED_ALPHA_W'+'EBGL'];break;case SS:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x36d70a['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'SIGNED_FLO'+'AT_EXT'];break;case yS:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x36d70a['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'UNSIGNED_F'+'LOAT_EXT'];break;case vS:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGBA_BPTC'+'_UNORM_EXT'];break;case uf:this['_glFormat']=_0x4e08e9['SRGB'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_S3TC'+'_DXT1_EXT'];break;case mf:this['_glFormat']=_0x4e08e9['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'3_EXT'];break;case pf:this['_glFormat']=_0x4e08e9['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'5_EXT'];break;case _f:this['_glFormat']=_0x4e08e9['SRGB'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ETC'+'2'];break;case gf:this['_glFormat']=_0x4e08e9['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ETC2_E'+'AC'];break;case Sf:this['_glFormat']=_0x4e08e9['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x36d70a['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ASTC_4'+'x4_KHR'];break;case yf:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x36d70a['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_SRGB_ALPH'+'A_BPTC_UNO'+'RM_EXT'];break;case Lc:this['_glFormat']=_0x4e08e9['RED'],this['_glInterna'+'lFormat']=_0x4e08e9['R16F'],this['_glPixelTy'+'pe']=_0x4e08e9['HALF_FLOAT'];break;case Gu:this['_glFormat']=_0x4e08e9['RG'],this['_glInterna'+'lFormat']=_0x4e08e9['RG16F'],this['_glPixelTy'+'pe']=_0x4e08e9['HALF_FLOAT'];break;case ri:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x4e08e9['RGB16F'],this['_glPixelTy'+'pe']=_0x4e08e9['HALF_FLOAT'];break;case at:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA16F'],this['_glPixelTy'+'pe']=_0x4e08e9['HALF_FLOAT'];break;case je:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x4e08e9['RGB32F'],this['_glPixelTy'+'pe']=_0x4e08e9['FLOAT'];break;case Bt:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA32F'],this['_glPixelTy'+'pe']=_0x4e08e9['FLOAT'];break;case Hi:this['_glFormat']=_0x4e08e9['RED'],this['_glInterna'+'lFormat']=_0x4e08e9['R32F'],this['_glPixelTy'+'pe']=_0x4e08e9['FLOAT'];break;case ki:this['_glFormat']=_0x4e08e9['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x4e08e9['DEPTH_COMP'+'ONENT32F'],this['_glPixelTy'+'pe']=_0x4e08e9['FLOAT'];break;case an:this['_glFormat']=_0x4e08e9['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x4e08e9['DEPTH_COMP'+'ONENT16'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_S'+'HORT'];break;case Cc:this['_glFormat']=_0x4e08e9['DEPTH_STEN'+'CIL'],this['_glInterna'+'lFormat']=_0x4e08e9['DEPTH24_ST'+'ENCIL8'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_I'+'NT_24_8'];break;case pn:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x4e08e9['R11F_G11F_'+'B10F'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_I'+'NT_10F_11F'+'_11F_REV'];break;case Cu:this['_glFormat']=_0x4e08e9['RGB'],this['_glInterna'+'lFormat']=_0x4e08e9['SRGB8'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case hs:this['_glFormat']=_0x4e08e9['RGBA'],this['_glInterna'+'lFormat']=_0x4e08e9['SRGB8_ALPH'+'A8'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case Iu:this['_glFormat']=_0x4e08e9['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4e08e9['R8I'],this['_glPixelTy'+'pe']=_0x4e08e9['BYTE'];break;case mS:this['_glFormat']=_0x4e08e9['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4e08e9['R8UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case Du:this['_glFormat']=_0x4e08e9['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4e08e9['R16I'],this['_glPixelTy'+'pe']=_0x4e08e9['SHORT'];break;case Lu:this['_glFormat']=_0x4e08e9['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4e08e9['R16UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_S'+'HORT'];break;case Ru:this['_glFormat']=_0x4e08e9['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4e08e9['R32I'],this['_glPixelTy'+'pe']=_0x4e08e9['INT'];break;case Vi:this['_glFormat']=_0x4e08e9['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4e08e9['R32UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_I'+'NT'];break;case Ou:this['_glFormat']=_0x4e08e9['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4e08e9['RG8I'],this['_glPixelTy'+'pe']=_0x4e08e9['BYTE'];break;case pS:this['_glFormat']=_0x4e08e9['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4e08e9['RG8UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case Fu:this['_glFormat']=_0x4e08e9['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4e08e9['RG16I'],this['_glPixelTy'+'pe']=_0x4e08e9['SHORT'];break;case Nu:this['_glFormat']=_0x4e08e9['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4e08e9['RG16UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_S'+'HORT'];break;case ku:this['_glFormat']=_0x4e08e9['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4e08e9['RG32I'],this['_glPixelTy'+'pe']=_0x4e08e9['INT'];break;case Uu:this['_glFormat']=_0x4e08e9['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4e08e9['RG32UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_I'+'NT'];break;case Bu:this['_glFormat']=_0x4e08e9['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA8I'],this['_glPixelTy'+'pe']=_0x4e08e9['BYTE'];break;case _S:this['_glFormat']=_0x4e08e9['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA8UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_B'+'YTE'];break;case zu:this['_glFormat']=_0x4e08e9['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA16I'],this['_glPixelTy'+'pe']=_0x4e08e9['SHORT'];break;case Dc:this['_glFormat']=_0x4e08e9['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA16UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_S'+'HORT'];break;case Vu:this['_glFormat']=_0x4e08e9['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA32I'],this['_glPixelTy'+'pe']=_0x4e08e9['INT'];break;case Ne:this['_glFormat']=_0x4e08e9['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4e08e9['RGBA32UI'],this['_glPixelTy'+'pe']=_0x4e08e9['UNSIGNED_I'+'NT'];break;}this['_glCreated']=!(0x104*-0xf+0x1205+-0x2c8);}['upload'](_0x477698,_0x5f2cf1){M['assert'](_0x5f2cf1['device'],'Attempting'+'\x20to\x20use\x20a\x20'+'texture\x20th'+'at\x20has\x20bee'+'n\x20destroye'+'d.',_0x5f2cf1);const _0x1fdfef=_0x477698['gl'];if(!_0x5f2cf1['_needsUplo'+'ad']&&(_0x5f2cf1['_needsMipm'+'apsUpload']&&_0x5f2cf1['_mipmapsUp'+'loaded']||!_0x5f2cf1['pot']))return;let _0x345a00=0x2144+-0x2*0xe02+-0x540,_0x46dcaa,_0x817d07;const _0x2e6439=_0x5f2cf1['numLevels'];for(_0x5f2cf1['array']&&_0x1fdfef['texStorage'+'3D'](_0x1fdfef['TEXTURE_2D'+'_ARRAY'],_0x2e6439,this['_glInterna'+'lFormat'],_0x5f2cf1['_width'],_0x5f2cf1['_height'],_0x5f2cf1['_arrayLeng'+'th']);_0x5f2cf1['_levels'][_0x345a00]||_0x345a00===-0xc*-0x29f+0x268b+0x1755*-0x3;){if(!_0x5f2cf1['_needsUplo'+'ad']&&_0x345a00===0xe7d*0x1+0xe12+-0x1c8f){_0x345a00++;continue;}else{if(_0x345a00&&(!_0x5f2cf1['_needsMipm'+'apsUpload']||!_0x5f2cf1['_mipmaps']))break;}if(_0x46dcaa=_0x5f2cf1['_levels'][_0x345a00],_0x817d07=(-0x1a71+0x1567+-0x50b*-0x1)/Math['pow'](0xc43*0x1+0x5*-0x18d+0x480*-0x1,_0x345a00),_0x345a00===0x20ba+0xd94+0xf6f*-0x3&&!_0x5f2cf1['_compresse'+'d']&&!_0x5f2cf1['_integerFo'+'rmat']&&_0x5f2cf1['_levels']['length']<_0x2e6439&&(_0x1fdfef['generateMi'+'pmap'](this['_glTarget']),_0x5f2cf1['_mipmapsUp'+'loaded']=!(-0x6*-0x665+-0x1481+-0x10d*0x11)),_0x5f2cf1['_cubemap']){let _0x101f2e;if(_0x477698['_isBrowser'+'Interface'](_0x46dcaa[0x8de*-0x4+-0x11*-0x12f+-0x1*-0xf59]))for(_0x101f2e=-0x21e4+-0x1a41+-0x1*-0x3c25;_0x101f2e<-0x1a2a*0x1+-0x2661+0x4091;_0x101f2e++){if(!_0x5f2cf1['_levelsUpd'+'ated'][-0x7*0xaf+-0x193*-0x13+-0x1920][_0x101f2e])continue;let _0x4ab491=_0x46dcaa[_0x101f2e];_0x477698['_isImageBr'+'owserInter'+'face'](_0x4ab491)&&(_0x4ab491['width']>_0x477698['maxCubeMap'+'Size']||_0x4ab491['height']>_0x477698['maxCubeMap'+'Size'])&&(_0x4ab491=Ep(_0x4ab491,_0x477698['maxCubeMap'+'Size']),_0x345a00===-0x10bb*0x1+0x24ce*0x1+-0x1413&&(_0x5f2cf1['_width']=_0x4ab491['width'],_0x5f2cf1['_height']=_0x4ab491['height'])),_0x477698['setUnpackF'+'lipY'](!(-0x3d+-0x1dbc+0x4ff*0x6)),_0x477698['setUnpackP'+'remultiply'+'Alpha'](_0x5f2cf1['_premultip'+'lyAlpha']),this['_glCreated']?_0x1fdfef['texSubImag'+'e2D'](_0x1fdfef['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x101f2e,_0x345a00,-0x6e3*0x2+-0x1484+0x224a,0x1*-0x1e41+-0x1829+0x366a,this['_glFormat'],this['_glPixelTy'+'pe'],_0x4ab491):_0x1fdfef['texImage2D'](_0x1fdfef['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x101f2e,_0x345a00,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x4ab491);}else for(_0x817d07=(0x955*-0x3+0xcf3+0xf0d)/Math['pow'](-0x1fae+0x91*-0x19+0x2dd9,_0x345a00),_0x101f2e=0x111d+0x55e*0x1+-0x167b;_0x101f2e<-0x3*-0x371+0x1*-0x719+-0x334;_0x101f2e++){if(!_0x5f2cf1['_levelsUpd'+'ated'][-0x409*-0x7+0x419*-0x8+0x489][_0x101f2e])continue;const _0x2c0af8=_0x46dcaa[_0x101f2e];_0x5f2cf1['_compresse'+'d']?this['_glCreated']&&_0x2c0af8?_0x1fdfef['compressed'+'TexSubImag'+'e2D'](_0x1fdfef['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x101f2e,_0x345a00,-0x1263+-0x2*-0x15d+0xfa9*0x1,0x1e5d*-0x1+-0x1bfb+0x3a58,Math['max'](_0x5f2cf1['_width']*_0x817d07,0x1*-0x19f0+0x259*-0x2+-0xfd*-0x1f),Math['max'](_0x5f2cf1['_height']*_0x817d07,-0xe34+-0x32b*-0xb+-0x14a4),this['_glInterna'+'lFormat'],_0x2c0af8):_0x1fdfef['compressed'+'TexImage2D'](_0x1fdfef['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x101f2e,_0x345a00,this['_glInterna'+'lFormat'],Math['max'](_0x5f2cf1['_width']*_0x817d07,-0x16e4+-0x7bb+-0x7a8*-0x4),Math['max'](_0x5f2cf1['_height']*_0x817d07,0x9f2*0x2+-0x4d*0x66+-0x1*-0xacb),0x22b8+0x2*0x92f+0x2d*-0x12e,_0x2c0af8):(_0x477698['setUnpackF'+'lipY'](!(-0xaed*0x3+-0x10a2*-0x1+-0x2*-0x813)),_0x477698['setUnpackP'+'remultiply'+'Alpha'](_0x5f2cf1['_premultip'+'lyAlpha']),this['_glCreated']&&_0x2c0af8?_0x1fdfef['texSubImag'+'e2D'](_0x1fdfef['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x101f2e,_0x345a00,0x4a3*-0x3+0x1fca+-0x11e1,-0x1*0x1462+-0x1*-0x1fb2+-0xb50,Math['max'](_0x5f2cf1['_width']*_0x817d07,0x1fe3+0x88c+-0x286e),Math['max'](_0x5f2cf1['_height']*_0x817d07,0xef+-0x3a*-0x3d+-0x2*0x760),this['_glFormat'],this['_glPixelTy'+'pe'],_0x2c0af8):_0x1fdfef['texImage2D'](_0x1fdfef['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x101f2e,_0x345a00,this['_glInterna'+'lFormat'],Math['max'](_0x5f2cf1['_width']*_0x817d07,0x1289+0x650+-0x18d8),Math['max'](_0x5f2cf1['_height']*_0x817d07,0x14c5+-0x2180+0xcbc),0xc93+0xc*-0x246+0xeb5,this['_glFormat'],this['_glPixelTy'+'pe'],_0x2c0af8));}}else{if(_0x5f2cf1['_volume'])_0x5f2cf1['_compresse'+'d']?_0x1fdfef['compressed'+'TexImage3D'](_0x1fdfef['TEXTURE_3D'],_0x345a00,this['_glInterna'+'lFormat'],Math['max'](_0x5f2cf1['_width']*_0x817d07,0x469+0x1f49+-0x1*0x23b1),Math['max'](_0x5f2cf1['_height']*_0x817d07,-0x1*-0x3b3+0x1*-0x2631+0x1*0x227f),Math['max'](_0x5f2cf1['_depth']*_0x817d07,0x9*-0x195+0xe*0x16+0x685*0x2),0x179b*-0x1+0x2601+-0x61*0x26,_0x46dcaa):(_0x477698['setUnpackF'+'lipY'](!(0x2386*0x1+-0x1820+0x1*-0xb65)),_0x477698['setUnpackP'+'remultiply'+'Alpha'](_0x5f2cf1['_premultip'+'lyAlpha']),_0x1fdfef['texImage3D'](_0x1fdfef['TEXTURE_3D'],_0x345a00,this['_glInterna'+'lFormat'],Math['max'](_0x5f2cf1['_width']*_0x817d07,-0xd1*0x21+-0x5bb+0x7*0x4ab),Math['max'](_0x5f2cf1['_height']*_0x817d07,-0x22c0+-0x136f+0x3630*0x1),Math['max'](_0x5f2cf1['_depth']*_0x817d07,0xf7*0x10+0x1679*0x1+0x1*-0x25e8),0xdc6+0x1*-0x1708+0x942,this['_glFormat'],this['_glPixelTy'+'pe'],_0x46dcaa));else{if(_0x5f2cf1['array']&&typeof _0x46dcaa=='object'){if(_0x5f2cf1['_arrayLeng'+'th']===_0x46dcaa['length']){if(_0x5f2cf1['_compresse'+'d']){for(let _0xf02616=-0x974+0x33*-0x73+0x205d*0x1;_0xf02616<_0x5f2cf1['_arrayLeng'+'th'];_0xf02616++)_0x1fdfef['compressed'+'TexSubImag'+'e3D'](_0x1fdfef['TEXTURE_2D'+'_ARRAY'],_0x345a00,-0x6*-0x35b+0x133f+-0x2761,0x1911+0x230b+-0x3c1c,_0xf02616,Math['max'](Math['floor'](_0x5f2cf1['_width']*_0x817d07),0x2*0x12c9+-0x25da+0x49),Math['max'](Math['floor'](_0x5f2cf1['_height']*_0x817d07),0x1002*-0x1+0xb*0x1a8+0x235*-0x1),-0x4*0x407+0xc78+-0x137*-0x3,this['_glInterna'+'lFormat'],_0x46dcaa[_0xf02616]);}else{for(let _0x504cf2=0x16df+0x1d*0xe0+-0x17*0x219;_0x504cf2<_0x5f2cf1['_arrayLeng'+'th'];_0x504cf2++)_0x1fdfef['texSubImag'+'e3D'](_0x1fdfef['TEXTURE_2D'+'_ARRAY'],_0x345a00,0x4*-0x51c+-0xc25+0x2095,-0x5b4*0x2+0x57*0x49+-0xd67,_0x504cf2,Math['max'](Math['floor'](_0x5f2cf1['_width']*_0x817d07),-0xf*0x2+0x3*0x81+-0x164),Math['max'](Math['floor'](_0x5f2cf1['_height']*_0x817d07),0x4*-0x2b8+0x17*0x77+0x30),-0x1ad3+0x20a8+-0x4*0x175,this['_glFormat'],this['_glPixelTy'+'pe'],_0x46dcaa[_0x504cf2]);}}}else{if(_0x477698['_isBrowser'+'Interface'](_0x46dcaa)){_0x477698['_isImageBr'+'owserInter'+'face'](_0x46dcaa)&&(_0x46dcaa['width']>_0x477698['maxTexture'+'Size']||_0x46dcaa['height']>_0x477698['maxTexture'+'Size'])&&(_0x46dcaa=Ep(_0x46dcaa,_0x477698['maxTexture'+'Size']),_0x345a00===0x9e*0x3b+0x8cb*0x4+-0x4796&&(_0x5f2cf1['_width']=_0x46dcaa['width'],_0x5f2cf1['_height']=_0x46dcaa['height']));const _0x225a30=_0x46dcaa['width']||_0x46dcaa['videoWidth'],_0x1687e5=_0x46dcaa['height']||_0x46dcaa['videoHeigh'+'t'];_0x477698['setUnpackF'+'lipY'](_0x5f2cf1['_flipY']),_0x477698['setUnpackP'+'remultiply'+'Alpha'](_0x5f2cf1['_premultip'+'lyAlpha']),this['_glCreated']&&_0x5f2cf1['_width']===_0x225a30&&_0x5f2cf1['_height']===_0x1687e5&&!_0x477698['_isImageVi'+'deoInterfa'+'ce'](_0x46dcaa)?_0x1fdfef['texSubImag'+'e2D'](_0x1fdfef['TEXTURE_2D'],_0x345a00,-0xd7e*0x2+0x1*0x2c2+0x183a,-0x5*0x76+0x2518+0x22ca*-0x1,this['_glFormat'],this['_glPixelTy'+'pe'],_0x46dcaa):(_0x1fdfef['texImage2D'](_0x1fdfef['TEXTURE_2D'],_0x345a00,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x46dcaa),_0x345a00===-0xd32+0x4b6*-0x1+-0x17e*-0xc&&(_0x5f2cf1['_width']=_0x225a30,_0x5f2cf1['_height']=_0x1687e5));}else _0x817d07=(-0x1*0x1649+0x1d6f+-0x725)/Math['pow'](0x1*-0x1934+0x107b*0x2+-0x7c0,_0x345a00),_0x5f2cf1['_compresse'+'d']?this['_glCreated']&&_0x46dcaa?_0x1fdfef['compressed'+'TexSubImag'+'e2D'](_0x1fdfef['TEXTURE_2D'],_0x345a00,0x19ba+0x208f*-0x1+0x9f*0xb,0x253e+0x84b*0x1+0x1*-0x2d89,Math['max'](Math['floor'](_0x5f2cf1['_width']*_0x817d07),-0x703*-0x4+-0x1236+-0x347*0x3),Math['max'](Math['floor'](_0x5f2cf1['_height']*_0x817d07),0x171*0x3+0x6b5+0x3ad*-0x3),this['_glInterna'+'lFormat'],_0x46dcaa):_0x1fdfef['compressed'+'TexImage2D'](_0x1fdfef['TEXTURE_2D'],_0x345a00,this['_glInterna'+'lFormat'],Math['max'](Math['floor'](_0x5f2cf1['_width']*_0x817d07),-0xaba*0x1+0x108b+-0x5d0),Math['max'](Math['floor'](_0x5f2cf1['_height']*_0x817d07),0x9*-0x101+-0x2333+0x2f3*0xf),-0x1255+0x2501+-0x1de*0xa,_0x46dcaa):(_0x477698['setUnpackF'+'lipY'](!(-0xc68+0x135a+0x1*-0x6f1)),_0x477698['setUnpackP'+'remultiply'+'Alpha'](_0x5f2cf1['_premultip'+'lyAlpha']),this['_glCreated']&&_0x46dcaa?_0x1fdfef['texSubImag'+'e2D'](_0x1fdfef['TEXTURE_2D'],_0x345a00,0xf54+-0x1*0x187+-0xdcd,0x14e+-0x1a60*-0x1+0x6*-0x49d,Math['max'](_0x5f2cf1['_width']*_0x817d07,0xa*0x1c9+0x5e0+-0x17b9),Math['max'](_0x5f2cf1['_height']*_0x817d07,-0x1*-0x6df+-0x7c1+0xe3*0x1),this['_glFormat'],this['_glPixelTy'+'pe'],_0x46dcaa):_0x1fdfef['texImage2D'](_0x1fdfef['TEXTURE_2D'],_0x345a00,this['_glInterna'+'lFormat'],Math['max'](_0x5f2cf1['_width']*_0x817d07,0x112*0x18+-0x8cb+-0x5e*0x2e),Math['max'](_0x5f2cf1['_height']*_0x817d07,0xd4f+-0x3db+-0x1*0x973),-0x6cb+-0x3ef*-0x9+-0x1c9c,this['_glFormat'],this['_glPixelTy'+'pe'],_0x46dcaa));_0x345a00===0x1b4b+0x6+-0x309*0x9?_0x5f2cf1['_mipmapsUp'+'loaded']=!(0x11*0x22d+-0x9c0+-0x14c*0x15):_0x5f2cf1['_mipmapsUp'+'loaded']=!(0x1ad+-0xd15*-0x1+-0xec2);}}}_0x345a00++;}if(_0x5f2cf1['_needsUplo'+'ad']){if(_0x5f2cf1['_cubemap']){for(let _0x45d0e5=-0x125c*-0x2+0x1*0x1f94+-0x444c;_0x45d0e5<-0x19d6+0x1*0x91d+-0x3*-0x595;_0x45d0e5++)_0x5f2cf1['_levelsUpd'+'ated'][-0xa3*0x17+0x3*0x4a7+0x2c*0x4][_0x45d0e5]=!(-0x1a38+0x188c+0x1ad);}else _0x5f2cf1['_levelsUpd'+'ated'][-0xf61+0x13c*-0x4+-0x2e7*-0x7]=!(-0x22ae+-0x32a+0x25d9);}!_0x5f2cf1['_compresse'+'d']&&!_0x5f2cf1['_integerFo'+'rmat']&&_0x5f2cf1['_mipmaps']&&_0x5f2cf1['_needsMipm'+'apsUpload']&&_0x5f2cf1['_levels']['length']===0x9f*-0x3+0x21d3+0x1*-0x1ff5&&(_0x1fdfef['generateMi'+'pmap'](this['_glTarget']),_0x5f2cf1['_mipmapsUp'+'loaded']=!(-0x5c1+0x158c+-0xd*0x137)),_0x5f2cf1['_gpuSize']&&_0x5f2cf1['adjustVram'+'SizeTracki'+'ng'](_0x477698['_vram'],-_0x5f2cf1['_gpuSize']),_0x5f2cf1['_gpuSize']=_0x5f2cf1['gpuSize'],_0x5f2cf1['adjustVram'+'SizeTracki'+'ng'](_0x477698['_vram'],_0x5f2cf1['_gpuSize']),this['_glCreated']=!(-0x9a3*-0x1+0x1c*-0x50+-0xe3);}['read'](_0x5977df,_0x3fcf0a,_0x5977e0,_0x345e83,_0x3cb9a6){const _0x3d18e0=this['texture'];return _0x3d18e0['device']['readTextur'+'eAsync'](_0x3d18e0,_0x5977df,_0x3fcf0a,_0x5977e0,_0x345e83,_0x3cb9a6);}['write'](_0x5ae59b,_0x2960a8,_0x2ff70c,_0x569fc1,_0xfae89e){const {texture:_0x3b15d8}=this,{device:_0x1841d4}=_0x3b15d8;return _0x1841d4['setTexture'](_0x3b15d8,-0x1*-0x392+0x5*0x1e7+-0x1*0xd15),_0x1841d4['writeTextu'+'reAsync'](_0x3b15d8,_0x5ae59b,_0x2960a8,_0x2ff70c,_0x569fc1,_0xfae89e);}}class dT{constructor(_0x2abce7,_0xd21aa5){h(this,'msaaFB'),h(this,'resolveFB'),(this['msaaFB']=_0x2abce7,this['resolveFB']=_0xd21aa5);}['destroy'](_0x4a458a){this['msaaFB']&&(_0x4a458a['deleteRend'+'erbuffer'](this['msaaFB']),this['msaaFB']=null),this['resolveFB']&&(_0x4a458a['deleteRend'+'erbuffer'](this['resolveFB']),this['resolveFB']=null);}}class fT{constructor(){h(this,'_glFrameBu'+'ffer',null),h(this,'_glDepthBu'+'ffer',null),h(this,'_glResolve'+'FrameBuffe'+'r',null),h(this,'colorMrtFr'+'amebuffers',null),h(this,'_glMsaaCol'+'orBuffers',[]),h(this,'_glMsaaDep'+'thBuffer',null),h(this,'msaaDepthB'+'ufferKey'),h(this,'suppliedCo'+'lorFramebu'+'ffer'),h(this,'_isInitial'+'ized',!(-0x1f2+-0xc7*0x22+0x1c61));}['destroy'](_0x4b0b85){var _0x37158b;const _0x58b9bb=_0x4b0b85['gl'];this['_isInitial'+'ized']=!(0xdf9+-0x1*-0x24cb+-0x32c3),this['_glFrameBu'+'ffer']&&(this['_glFrameBu'+'ffer']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x58b9bb['deleteFram'+'ebuffer'](this['_glFrameBu'+'ffer']),this['_glFrameBu'+'ffer']=null),this['_glDepthBu'+'ffer']&&(_0x58b9bb['deleteRend'+'erbuffer'](this['_glDepthBu'+'ffer']),this['_glDepthBu'+'ffer']=null),this['_glResolve'+'FrameBuffe'+'r']&&(this['_glResolve'+'FrameBuffe'+'r']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x58b9bb['deleteFram'+'ebuffer'](this['_glResolve'+'FrameBuffe'+'r']),this['_glResolve'+'FrameBuffe'+'r']=null),this['_glMsaaCol'+'orBuffers']['forEach'](_0x276ff4=>{_0x58b9bb['deleteRend'+'erbuffer'](_0x276ff4);}),this['_glMsaaCol'+'orBuffers']['length']=0xe5*-0x2+0x1a7e+-0x18b4,(_0x37158b=this['colorMrtFr'+'amebuffers'])==null||_0x37158b['forEach'](_0x3652b1=>{_0x3652b1['destroy'](_0x58b9bb);}),this['colorMrtFr'+'amebuffers']=null,this['_glMsaaDep'+'thBuffer']&&(this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']&&ad(_0x4b0b85)['release'](this['msaaDepthB'+'ufferKey'])),this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x2a5+-0x88e+0x3d*0x2f);}get['initialize'+'d'](){return this['_isInitial'+'ized'];}['init'](_0x5a971b,_0x121895){var _0x4d871,_0x18a983;const _0x29e9da=_0x5a971b['gl'];M['assert'](!this['_isInitial'+'ized'],'Render\x20tar'+'get\x20alread'+'y\x20initiali'+'zed.'),this['_isInitial'+'ized']=!(0x1051*0x1+0x1dff*0x1+-0x2e50);const _0xfad571=[];if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(0x1790+0x38*0x94+-0x2cc*0x14))this['_glFrameBu'+'ffer']=this['suppliedCo'+'lorFramebu'+'ffer'];else{M['call'](()=>{(_0x121895['width']<=-0x13a5*-0x1+0xfd8+-0x237d||_0x121895['height']<=0xc1*-0x1d+0x16e1+0x2*-0x82)&&M['warnOnce']('Invalid\x20re'+'nder\x20targe'+'t\x20size:\x20'+_0x121895['width']+'\x20x\x20'+_0x121895['height'],_0x121895);}),this['_glFrameBu'+'ffer']=_0x29e9da['createFram'+'ebuffer'](),_0x5a971b['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x18b877=((_0x4d871=_0x121895['_colorBuff'+'ers'])==null?void(0x2*0xbcb+0x14d4+-0x2c6a):_0x4d871['length'])??0x3*-0xa7d+-0x1e88+0x3dff,_0x5a7932=_0x29e9da['COLOR_ATTA'+'CHMENT0'];for(let _0x196611=-0x3*-0xc25+-0x13f6+0x1*-0x1079;_0x196611<_0x18b877;++_0x196611){const _0x12aca=_0x121895['getColorBu'+'ffer'](_0x196611);_0x12aca&&(_0x12aca['impl']['_glTexture']||(_0x12aca['_width']=Math['min'](_0x12aca['width'],_0x5a971b['maxRenderB'+'ufferSize']),_0x12aca['_height']=Math['min'](_0x12aca['height'],_0x5a971b['maxRenderB'+'ufferSize']),_0x5a971b['setTexture'](_0x12aca,-0x1*0x1227+0x1677+0x170*-0x3)),_0x29e9da['framebuffe'+'rTexture2D'](_0x29e9da['FRAMEBUFFE'+'R'],_0x5a7932+_0x196611,_0x12aca['_cubemap']?_0x29e9da['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x121895['_face']:_0x29e9da['TEXTURE_2D'],_0x12aca['impl']['_glTexture'],_0x121895['mipLevel']),_0xfad571['push'](_0x5a7932+_0x196611));}_0x29e9da['drawBuffer'+'s'](_0xfad571);const _0x254c0d=_0x121895['_depthBuff'+'er'];if(_0x254c0d||_0x121895['_depth']){const _0x2c0d30=_0x121895['_stencil']?_0x29e9da['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x29e9da['DEPTH_ATTA'+'CHMENT'];if(_0x254c0d)_0x254c0d['impl']['_glTexture']||(_0x254c0d['_width']=Math['min'](_0x254c0d['width'],_0x5a971b['maxRenderB'+'ufferSize']),_0x254c0d['_height']=Math['min'](_0x254c0d['height'],_0x5a971b['maxRenderB'+'ufferSize']),_0x5a971b['setTexture'](_0x254c0d,0x12a5+-0x7*-0x12a+-0x169*0x13)),_0x29e9da['framebuffe'+'rTexture2D'](_0x29e9da['FRAMEBUFFE'+'R'],_0x2c0d30,_0x254c0d['_cubemap']?_0x29e9da['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x121895['_face']:_0x29e9da['TEXTURE_2D'],_0x121895['_depthBuff'+'er']['impl']['_glTexture'],_0x121895['mipLevel']);else{if(!(_0x121895['_samples']>-0x2fe+0x63+0x2*0x14e)){this['_glDepthBu'+'ffer']||(this['_glDepthBu'+'ffer']=_0x29e9da['createRend'+'erbuffer']());const _0x3d756b=_0x121895['_stencil']?_0x29e9da['DEPTH24_ST'+'ENCIL8']:_0x29e9da['DEPTH_COMP'+'ONENT32F'];_0x29e9da['bindRender'+'buffer'](_0x29e9da['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x29e9da['renderbuff'+'erStorage'](_0x29e9da['RENDERBUFF'+'ER'],_0x3d756b,_0x121895['width'],_0x121895['height']),_0x29e9da['framebuffe'+'rRenderbuf'+'fer'](_0x29e9da['FRAMEBUFFE'+'R'],_0x2c0d30,_0x29e9da['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x29e9da['bindRender'+'buffer'](_0x29e9da['RENDERBUFF'+'ER'],null);}}}M['call'](()=>this['_checkFbo'](_0x5a971b,_0x121895));}if(_0x121895['_samples']>-0x1641*-0x1+-0x1d97+0x757){this['_glResolve'+'FrameBuffe'+'r']=this['_glFrameBu'+'ffer'],this['_glFrameBu'+'ffer']=_0x29e9da['createFram'+'ebuffer'](),_0x5a971b['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x5713fa=((_0x18a983=_0x121895['_colorBuff'+'ers'])==null?void(0x2238+0xd*0x1+-0x11b*0x1f):_0x18a983['length'])??0x1*0x1241+0x19c0*-0x1+0x13*0x65;if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x1f24+0x11*-0x20c+-0x10*-0x41f)){const _0x5d98f4=_0x29e9da['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x5d98f4);const _0x140a04=_0x5a971b['backBuffer'+'Format']===Oe?_0x29e9da['RGBA8']:_0x29e9da['RGB8'];_0x29e9da['bindRender'+'buffer'](_0x29e9da['RENDERBUFF'+'ER'],_0x5d98f4),_0x29e9da['renderbuff'+'erStorageM'+'ultisample'](_0x29e9da['RENDERBUFF'+'ER'],_0x121895['_samples'],_0x140a04,_0x121895['width'],_0x121895['height']),_0x29e9da['framebuffe'+'rRenderbuf'+'fer'](_0x29e9da['FRAMEBUFFE'+'R'],_0x29e9da['COLOR_ATTA'+'CHMENT0'],_0x29e9da['RENDERBUFF'+'ER'],_0x5d98f4);}else for(let _0x8faa6a=0x92*-0x43+0x1aa2+-0x1*-0xb94;_0x8faa6a<_0x5713fa;++_0x8faa6a){const _0x9e6729=_0x121895['getColorBu'+'ffer'](_0x8faa6a);if(_0x9e6729){const _0x57f06a=_0x29e9da['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x57f06a),_0x29e9da['bindRender'+'buffer'](_0x29e9da['RENDERBUFF'+'ER'],_0x57f06a),_0x29e9da['renderbuff'+'erStorageM'+'ultisample'](_0x29e9da['RENDERBUFF'+'ER'],_0x121895['_samples'],_0x9e6729['impl']['_glInterna'+'lFormat'],_0x121895['width'],_0x121895['height']),_0x29e9da['framebuffe'+'rRenderbuf'+'fer'](_0x29e9da['FRAMEBUFFE'+'R'],_0x29e9da['COLOR_ATTA'+'CHMENT0']+_0x8faa6a,_0x29e9da['RENDERBUFF'+'ER'],_0x57f06a);}}if(_0x121895['_depth']){M['assert'](!this['_glMsaaDep'+'thBuffer']);const _0x39a203=_0x121895['_stencil']?_0x29e9da['DEPTH24_ST'+'ENCIL8']:_0x29e9da['DEPTH_COMP'+'ONENT32F'],_0x56649d=_0x121895['_stencil']?_0x29e9da['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x29e9da['DEPTH_ATTA'+'CHMENT'];let _0x1b4f38;const _0x342847=_0x121895['_depthBuff'+'er'];_0x342847&&(_0x1b4f38=_0x342847['id']+':'+_0x121895['width']+':'+_0x121895['height']+':'+_0x121895['_samples']+':'+_0x39a203+':'+_0x56649d,this['_glMsaaDep'+'thBuffer']=ad(_0x5a971b)['get'](_0x1b4f38)),this['_glMsaaDep'+'thBuffer']||(this['_glMsaaDep'+'thBuffer']=_0x29e9da['createRend'+'erbuffer'](),_0x29e9da['bindRender'+'buffer'](_0x29e9da['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']),_0x29e9da['renderbuff'+'erStorageM'+'ultisample'](_0x29e9da['RENDERBUFF'+'ER'],_0x121895['_samples'],_0x39a203,_0x121895['width'],_0x121895['height']),this['_glMsaaDep'+'thBuffer']['destroy']=function(){_0x29e9da['deleteRend'+'erbuffer'](this);},_0x342847&&ad(_0x5a971b)['set'](_0x1b4f38,this['_glMsaaDep'+'thBuffer'])),this['msaaDepthB'+'ufferKey']=_0x1b4f38,_0x29e9da['framebuffe'+'rRenderbuf'+'fer'](_0x29e9da['FRAMEBUFFE'+'R'],_0x56649d,_0x29e9da['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']);}M['call'](()=>this['_checkFbo'](_0x5a971b,_0x121895,'MSAA')),_0x5713fa>-0x1*-0xc25+-0x1*0x10bf+0x83*0x9&&(this['_createMsa'+'aMrtFrameb'+'uffers'](_0x5a971b,_0x121895,_0x5713fa),_0x5a971b['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']),_0x29e9da['drawBuffer'+'s'](_0xfad571));}}['_createMsa'+'aMrtFrameb'+'uffers'](_0x1d1159,_0x1a0c20,_0x4061b1){const _0x36fce0=_0x1d1159['gl'];this['colorMrtFr'+'amebuffers']=[];for(let _0x46e463=0x1495+0x4*-0x74b+0x897;_0x46e463<_0x4061b1;++_0x46e463){const _0x116084=_0x1a0c20['getColorBu'+'ffer'](_0x46e463),_0x192068=_0x36fce0['createFram'+'ebuffer']();_0x1d1159['setFramebu'+'ffer'](_0x192068);const _0x18f9e4=this['_glMsaaCol'+'orBuffers'][_0x46e463];_0x36fce0['bindRender'+'buffer'](_0x36fce0['RENDERBUFF'+'ER'],_0x18f9e4),_0x36fce0['renderbuff'+'erStorageM'+'ultisample'](_0x36fce0['RENDERBUFF'+'ER'],_0x1a0c20['_samples'],_0x116084['impl']['_glInterna'+'lFormat'],_0x1a0c20['width'],_0x1a0c20['height']),_0x36fce0['framebuffe'+'rRenderbuf'+'fer'](_0x36fce0['FRAMEBUFFE'+'R'],_0x36fce0['COLOR_ATTA'+'CHMENT0'],_0x36fce0['RENDERBUFF'+'ER'],_0x18f9e4),_0x36fce0['drawBuffer'+'s']([_0x36fce0['COLOR_ATTA'+'CHMENT0']]),M['call'](()=>this['_checkFbo'](_0x1d1159,_0x1a0c20,'MSAA-MRT-s'+'rc'+_0x46e463));const _0x413ebb=_0x36fce0['createFram'+'ebuffer']();_0x1d1159['setFramebu'+'ffer'](_0x413ebb),_0x36fce0['framebuffe'+'rTexture2D'](_0x36fce0['FRAMEBUFFE'+'R'],_0x36fce0['COLOR_ATTA'+'CHMENT0'],_0x116084['_cubemap']?_0x36fce0['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x1a0c20['_face']:_0x36fce0['TEXTURE_2D'],_0x116084['impl']['_glTexture'],-0x1d04+0x1b61+-0x1a3*-0x1),this['colorMrtFr'+'amebuffers'][_0x46e463]=new dT(_0x192068,_0x413ebb),M['call'](()=>this['_checkFbo'](_0x1d1159,_0x1a0c20,'MSAA-MRT-d'+'st'+_0x46e463));}}['_checkFbo'](_0x2a3baa,_0x1477c4,_0x43ccc2=''){const _0x5d8a03=_0x2a3baa['gl'],_0x132caf=_0x5d8a03['checkFrame'+'bufferStat'+'us'](_0x5d8a03['FRAMEBUFFE'+'R']);let _0x453632;switch(_0x132caf){case _0x5d8a03['FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT']:_0x453632='FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT';break;case _0x5d8a03['FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T']:_0x453632='FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T';break;case _0x5d8a03['FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS']:_0x453632='FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS';break;case _0x5d8a03['FRAMEBUFFE'+'R_UNSUPPOR'+'TED']:_0x453632='FRAMEBUFFE'+'R_UNSUPPOR'+'TED';break;}M['assert'](!_0x453632,'Framebuffe'+'r\x20creation'+'\x20failed\x20wi'+'th\x20error\x20c'+'ode\x20'+_0x453632+(',\x20render\x20t'+'arget:\x20')+_0x1477c4['name']+'\x20'+_0x43ccc2,_0x1477c4);}['loseContex'+'t'](){this['_glFrameBu'+'ffer']=null,this['_glDepthBu'+'ffer']=null,this['_glResolve'+'FrameBuffe'+'r']=null,this['_glMsaaCol'+'orBuffers']['length']=0x2337+0x25af+-0x3e*0x12d,this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']=void(0x24f*-0x1+-0x146a+0x1*0x16b9),this['colorMrtFr'+'amebuffers']=null,this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x1ff7+-0x18a8+-0xdf*-0x41),this['_isInitial'+'ized']=!(0x11*-0x2b+0x2c5*-0x3+0xb2b);}['internalRe'+'solve'](_0x239742,_0x16afaa,_0x228d12,_0x955f09,_0x1e853a){M['assert'](_0x16afaa!==_0x228d12,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x239742['setScissor'](-0x12f*0x6+-0x13*0x14f+-0x1ff7*-0x1,-0xa6f+0x1*0x11a8+0x1*-0x739,_0x955f09['width'],_0x955f09['height']);const _0xfcf882=_0x239742['gl'];_0xfcf882['bindFrameb'+'uffer'](_0xfcf882['READ_FRAME'+'BUFFER'],_0x16afaa),_0xfcf882['bindFrameb'+'uffer'](_0xfcf882['DRAW_FRAME'+'BUFFER'],_0x228d12),_0xfcf882['blitFrameb'+'uffer'](0x1*0x2121+-0x1*-0x1fd3+-0x207a*0x2,0xd7d+0x17a5+-0x2522,_0x955f09['width'],_0x955f09['height'],-0x4*-0x8a1+-0x5*-0x178+-0x14ee*0x2,0x59f*-0x5+-0x1*0x88e+0x1*0x24a9,_0x955f09['width'],_0x955f09['height'],_0x1e853a,_0xfcf882['NEAREST']);}['resolve'](_0x42095c,_0x29db47,_0x488d47,_0x5c0453){const _0x4c6569=_0x42095c['gl'];if(this['colorMrtFr'+'amebuffers']){if(_0x488d47)for(let _0x340787=-0x685*-0x3+0x1*-0x10d9+-0x1*0x2b6;_0x340787<this['colorMrtFr'+'amebuffers']['length'];_0x340787++){const _0x31d671=this['colorMrtFr'+'amebuffers'][_0x340787];Q['pushGpuMar'+'ker'](_0x42095c,'RESOLVE-MR'+'T'+_0x340787),this['internalRe'+'solve'](_0x42095c,_0x31d671['msaaFB'],_0x31d671['resolveFB'],_0x29db47,_0x4c6569['COLOR_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x42095c);}_0x5c0453&&(Q['pushGpuMar'+'ker'](_0x42095c,'RESOLVE-MR'+'T-DEPTH'),this['internalRe'+'solve'](_0x42095c,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x29db47,_0x4c6569['DEPTH_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x42095c));}else Q['pushGpuMar'+'ker'](_0x42095c,'RESOLVE'),this['internalRe'+'solve'](_0x42095c,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x29db47,(_0x488d47?_0x4c6569['COLOR_BUFF'+'ER_BIT']:0xca*-0x2c+-0x1561+-0x3*-0x12b3)|(_0x5c0453?_0x4c6569['DEPTH_BUFF'+'ER_BIT']:0x212c+-0x1cb0+-0x47c)),Q['popGpuMark'+'er'](_0x42095c);_0x4c6569['bindFrameb'+'uffer'](_0x4c6569['FRAMEBUFFE'+'R'],this['_glFrameBu'+'ffer']);}}class uT{constructor(){h(this,'renderVers'+'ion'),h(this,'queries',[]);}['destroy'](_0x39e637){this['queries']['forEach'](_0x28cf6a=>_0x39e637['deleteQuer'+'y'](_0x28cf6a)),this['queries']=null;}}class mT extends tT{constructor(_0x21e0d1){super(),h(this,'device'),h(this,'freeQuerie'+'s',[]),h(this,'frameQueri'+'es',[]),h(this,'previousFr'+'ameQueries',[]),h(this,'timings',[]),(this['device']=_0x21e0d1,this['ext']=_0x21e0d1['extDisjoin'+'tTimerQuer'+'y']);}['destroy'](){this['freeQuerie'+'s']['forEach'](_0xc8cdec=>this['device']['gl']['deleteQuer'+'y'](_0xc8cdec)),this['frameQueri'+'es']['forEach'](_0x1564ab=>this['device']['gl']['deleteQuer'+'y'](_0x1564ab)),this['previousFr'+'ameQueries']['forEach'](_0x2b7a02=>_0x2b7a02['destroy'](this['device']['gl'])),this['freeQuerie'+'s']=null,this['frameQueri'+'es']=null,this['previousFr'+'ameQueries']=null;}['loseContex'+'t'](){super['loseContex'+'t'](),this['freeQuerie'+'s']=[],this['frameQueri'+'es']=[],this['previousFr'+'ameQueries']=[];}['restoreCon'+'text'](){this['ext']=this['device']['extDisjoin'+'tTimerQuer'+'y'];}['getQuery'](){return this['freeQuerie'+'s']['pop']()??this['device']['gl']['createQuer'+'y']();}['start'](_0x414113){if(this['ext']){const _0x5873bf=this['getSlot'](_0x414113),_0x298254=this['getQuery']();return this['frameQueri'+'es'][_0x5873bf]=_0x298254,this['device']['gl']['beginQuery'](this['ext']['TIME_ELAPS'+'ED_EXT'],_0x298254),_0x5873bf;}}['end'](_0x8c2623){_0x8c2623!==void(-0x304+0x1*0x12f8+0x3fd*-0x4)&&this['device']['gl']['endQuery'](this['ext']['TIME_ELAPS'+'ED_EXT']);}['frameStart'](){this['processEna'+'bleRequest'](),this['_enabled']&&(this['frameGPUMa'+'rkerSlot']=this['start']('GpuFrame'));}['frameEnd'](){this['_enabled']&&this['end'](this['frameGPUMa'+'rkerSlot']);}['request'](){if(this['_enabled']){const _0x44bb00=this['ext'],_0x59b639=this['device']['gl'],_0x2a5b89=this['device']['renderVers'+'ion'],_0x2d750f=this['frameQueri'+'es'];if(_0x2d750f['length']>0x4*0x996+0x7d7+-0x2e2f){this['frameQueri'+'es']=[];const _0x3fb723=new uT();_0x3fb723['queries']=_0x2d750f,_0x3fb723['renderVers'+'ion']=_0x2a5b89,this['previousFr'+'ameQueries']['push'](_0x3fb723);}if(this['previousFr'+'ameQueries']['length']>0x225+-0x23f*0xb+0x1690){const _0x594632=this['previousFr'+'ameQueries'][0x80c+0x2*0x10f5+-0x29f6],_0xf89d35=_0x594632['queries'],_0x3fa3e2=_0xf89d35[_0xf89d35['length']-(-0x2096+-0x16f9*0x1+-0x6f2*-0x8)],_0x11b4fd=_0x59b639['getQueryPa'+'rameter'](_0x3fa3e2,_0x59b639['QUERY_RESU'+'LT_AVAILAB'+'LE']),_0x19a6d9=_0x59b639['getParamet'+'er'](_0x44bb00['GPU_DISJOI'+'NT_EXT']);if(_0x11b4fd&&!_0x19a6d9){this['previousFr'+'ameQueries']['shift']();const _0x5f29c6=this['timings'];_0x5f29c6['length']=-0x1*-0x1a21+0xc7*-0xe+0x3*-0x515;for(let _0x186827=0x604+-0x213f+0x1b3b*0x1;_0x186827<_0xf89d35['length'];_0x186827++){const _0xed9223=_0xf89d35[_0x186827],_0x3bc6eb=_0x59b639['getQueryPa'+'rameter'](_0xed9223,_0x59b639['QUERY_RESU'+'LT']);_0x5f29c6[_0x186827]=_0x3bc6eb*(0x1*-0x2023+-0x23e3+0x2203*0x2+0.000001),this['freeQuerie'+'s']['push'](_0xed9223);}this['report'](_0x594632['renderVers'+'ion'],_0x5f29c6);}_0x19a6d9&&(this['previousFr'+'ameQueries']['forEach'](_0xf92504=>{this['report'](_0xf92504['renderVers'+'ion'],null),_0xf92504['destroy'](_0x59b639);}),this['previousFr'+'ameQueries']['length']=0x25f6+-0x2*-0x635+-0x3260);}super['request'](_0x2a5b89);}}}const ga=[];class pT extends zh{constructor(_0x50e25b,_0x25a927={}){super(_0x50e25b,_0x25a927),h(this,'gl'),h(this,'_defaultFr'+'amebuffer',null),h(this,'_defaultFr'+'amebufferC'+'hanged',!(0x158*-0x6+0x18c1+0x2*-0x858)),(_0x25a927=this['initOption'+'s'],this['updateClie'+'ntRect'](),this['initTextur'+'eUnits'](),this['contextLos'+'t']=!(0x493*-0x2+-0x47*0x65+0x1295*0x2),this['_contextLo'+'stHandler']=_0xab4fb=>{_0xab4fb['preventDef'+'ault'](),this['loseContex'+'t'](),M['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20lost.'),this['fire']('devicelost');},this['_contextRe'+'storedHand'+'ler']=()=>{M['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20restore'+'d.'),this['restoreCon'+'text'](),this['fire']('devicerest'+'ored');});const _0x321094=typeof navigator<'u'&&navigator['userAgent'];if(this['forceDisab'+'leMultisam'+'pling']=_0x321094&&_0x321094['includes']('AppleWebKi'+'t')&&(_0x321094['includes']('15.4')||_0x321094['includes']('15_4')),this['forceDisab'+'leMultisam'+'pling']&&(_0x25a927['antialias']=!(0x125a+-0x1d87+-0x6a*-0x1b),M['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'AppleWebKi'+'t\x2015.4')),Me['browserNam'+'e']==='firefox'){const _0x48830c=(typeof navigator<'u'?navigator['userAgent']:'')['match'](/Firefox\/(\d+(\.\d+)*)/),_0x22a3b0=_0x48830c?_0x48830c[-0x2*0x9b6+-0x2*0x45e+0x59*0x51]:null;if(_0x22a3b0){const _0x575671=parseFloat(_0x22a3b0);(Me['name']==='windows'&&(_0x575671>=-0x301*0xb+0x1ab1+0x6d2||_0x575671===-0x5*-0x2c1+-0x351*0x8+0xd36)||Me['name']==='android'&&_0x575671>=-0x16f1+-0x34a*0x1+-0x1*-0x1abf)&&(_0x25a927['antialias']=!(0x1966*-0x1+-0x807+-0xb*-0x30a),M['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'Firefox\x20'+Me['name']+('\x20platform\x20'+'version\x20')+_0x22a3b0));}}this['backBuffer'+'Antialias']=_0x25a927['antialias']??!(-0x59e*0x5+0xd*0x2c9+0x40f*-0x2),_0x25a927['antialias']=!(-0x31*0x94+-0x11bc+-0xf5b*-0x3);const _0x3fa67e=_0x25a927['gl']??_0x50e25b['getContext']('webgl2',_0x25a927);if(!_0x3fa67e)throw new Error('WebGL\x20not\x20'+'supported');this['gl']=_0x3fa67e,this['isWebGL2']=!(-0x1*0xb2b+-0x269c+-0x1*-0x31c7),this['_deviceTyp'+'e']=px,this['updateBack'+'bufferForm'+'at'](null);const _0xcbf4c6=Me['browserNam'+'e']==='chrome',_0x55f3ea=Me['browserNam'+'e']==='safari',_0xcc0280=Me['browser']&&navigator['appVersion']['indexOf']('Mac')!==-(0x13e+-0x829+0x1bb*0x4);this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']=_0x55f3ea,this['_tempMacCh'+'romeBlitFr'+'amebufferW'+'orkaround']=_0xcc0280&&_0xcbf4c6&&!_0x25a927['alpha'],_0x50e25b['addEventLi'+'stener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(-0xe47*-0x2+-0xf7*0x1+-0x1b96)),_0x50e25b['addEventLi'+'stener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x1b4b+0xf95+-0x19*0x1b7)),this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes'](),this['createBack'+'buffer'](null),this['supportsIm'+'ageBitmap']=!_0x55f3ea&&typeof ImageBitmap<'u',this['_samplerTy'+'pes']=new Set([_0x3fa67e['SAMPLER_2D'],_0x3fa67e['SAMPLER_CU'+'BE'],_0x3fa67e['UNSIGNED_I'+'NT_SAMPLER'+'_2D'],_0x3fa67e['INT_SAMPLE'+'R_2D'],_0x3fa67e['SAMPLER_2D'+'_SHADOW'],_0x3fa67e['SAMPLER_CU'+'BE_SHADOW'],_0x3fa67e['SAMPLER_3D'],_0x3fa67e['INT_SAMPLE'+'R_3D'],_0x3fa67e['UNSIGNED_I'+'NT_SAMPLER'+'_3D'],_0x3fa67e['SAMPLER_2D'+'_ARRAY'],_0x3fa67e['INT_SAMPLE'+'R_2D_ARRAY'],_0x3fa67e['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]),this['glAddress']=[_0x3fa67e['REPEAT'],_0x3fa67e['CLAMP_TO_E'+'DGE'],_0x3fa67e['MIRRORED_R'+'EPEAT']],this['glBlendEqu'+'ation']=[_0x3fa67e['FUNC_ADD'],_0x3fa67e['FUNC_SUBTR'+'ACT'],_0x3fa67e['FUNC_REVER'+'SE_SUBTRAC'+'T'],_0x3fa67e['MIN'],_0x3fa67e['MAX']],this['glBlendFun'+'ctionColor']=[_0x3fa67e['ZERO'],_0x3fa67e['ONE'],_0x3fa67e['SRC_COLOR'],_0x3fa67e['ONE_MINUS_'+'SRC_COLOR'],_0x3fa67e['DST_COLOR'],_0x3fa67e['ONE_MINUS_'+'DST_COLOR'],_0x3fa67e['SRC_ALPHA'],_0x3fa67e['SRC_ALPHA_'+'SATURATE'],_0x3fa67e['ONE_MINUS_'+'SRC_ALPHA'],_0x3fa67e['DST_ALPHA'],_0x3fa67e['ONE_MINUS_'+'DST_ALPHA'],_0x3fa67e['CONSTANT_C'+'OLOR'],_0x3fa67e['ONE_MINUS_'+'CONSTANT_C'+'OLOR']],this['glBlendFun'+'ctionAlpha']=[_0x3fa67e['ZERO'],_0x3fa67e['ONE'],_0x3fa67e['SRC_COLOR'],_0x3fa67e['ONE_MINUS_'+'SRC_COLOR'],_0x3fa67e['DST_COLOR'],_0x3fa67e['ONE_MINUS_'+'DST_COLOR'],_0x3fa67e['SRC_ALPHA'],_0x3fa67e['SRC_ALPHA_'+'SATURATE'],_0x3fa67e['ONE_MINUS_'+'SRC_ALPHA'],_0x3fa67e['DST_ALPHA'],_0x3fa67e['ONE_MINUS_'+'DST_ALPHA'],_0x3fa67e['CONSTANT_A'+'LPHA'],_0x3fa67e['ONE_MINUS_'+'CONSTANT_A'+'LPHA']],this['glComparis'+'on']=[_0x3fa67e['NEVER'],_0x3fa67e['LESS'],_0x3fa67e['EQUAL'],_0x3fa67e['LEQUAL'],_0x3fa67e['GREATER'],_0x3fa67e['NOTEQUAL'],_0x3fa67e['GEQUAL'],_0x3fa67e['ALWAYS']],this['glStencilO'+'p']=[_0x3fa67e['KEEP'],_0x3fa67e['ZERO'],_0x3fa67e['REPLACE'],_0x3fa67e['INCR'],_0x3fa67e['INCR_WRAP'],_0x3fa67e['DECR'],_0x3fa67e['DECR_WRAP'],_0x3fa67e['INVERT']],this['glClearFla'+'g']=[-0x1c49+0x8b3*0x3+0x230,_0x3fa67e['COLOR_BUFF'+'ER_BIT'],_0x3fa67e['DEPTH_BUFF'+'ER_BIT'],_0x3fa67e['COLOR_BUFF'+'ER_BIT']|_0x3fa67e['DEPTH_BUFF'+'ER_BIT'],_0x3fa67e['STENCIL_BU'+'FFER_BIT'],_0x3fa67e['STENCIL_BU'+'FFER_BIT']|_0x3fa67e['COLOR_BUFF'+'ER_BIT'],_0x3fa67e['STENCIL_BU'+'FFER_BIT']|_0x3fa67e['DEPTH_BUFF'+'ER_BIT'],_0x3fa67e['STENCIL_BU'+'FFER_BIT']|_0x3fa67e['COLOR_BUFF'+'ER_BIT']|_0x3fa67e['DEPTH_BUFF'+'ER_BIT']],this['glCull']=[0x291+0x7*-0x553+0x22b4,_0x3fa67e['BACK'],_0x3fa67e['FRONT'],_0x3fa67e['FRONT_AND_'+'BACK']],this['glFilter']=[_0x3fa67e['NEAREST'],_0x3fa67e['LINEAR'],_0x3fa67e['NEAREST_MI'+'PMAP_NEARE'+'ST'],_0x3fa67e['NEAREST_MI'+'PMAP_LINEA'+'R'],_0x3fa67e['LINEAR_MIP'+'MAP_NEARES'+'T'],_0x3fa67e['LINEAR_MIP'+'MAP_LINEAR']],this['glPrimitiv'+'e']=[_0x3fa67e['POINTS'],_0x3fa67e['LINES'],_0x3fa67e['LINE_LOOP'],_0x3fa67e['LINE_STRIP'],_0x3fa67e['TRIANGLES'],_0x3fa67e['TRIANGLE_S'+'TRIP'],_0x3fa67e['TRIANGLE_F'+'AN']],this['glType']=[_0x3fa67e['BYTE'],_0x3fa67e['UNSIGNED_B'+'YTE'],_0x3fa67e['SHORT'],_0x3fa67e['UNSIGNED_S'+'HORT'],_0x3fa67e['INT'],_0x3fa67e['UNSIGNED_I'+'NT'],_0x3fa67e['FLOAT'],_0x3fa67e['HALF_FLOAT']],this['pcUniformT'+'ype']={},this['pcUniformT'+'ype'][_0x3fa67e['BOOL']]=on,this['pcUniformT'+'ype'][_0x3fa67e['INT']]=sa,this['pcUniformT'+'ype'][_0x3fa67e['FLOAT']]=Us,this['pcUniformT'+'ype'][_0x3fa67e['FLOAT_VEC2']]=ia,this['pcUniformT'+'ype'][_0x3fa67e['FLOAT_VEC3']]=rs,this['pcUniformT'+'ype'][_0x3fa67e['FLOAT_VEC4']]=gn,this['pcUniformT'+'ype'][_0x3fa67e['INT_VEC2']]=qr,this['pcUniformT'+'ype'][_0x3fa67e['INT_VEC3']]=jr,this['pcUniformT'+'ype'][_0x3fa67e['INT_VEC4']]=Yr,this['pcUniformT'+'ype'][_0x3fa67e['BOOL_VEC2']]=Lo,this['pcUniformT'+'ype'][_0x3fa67e['BOOL_VEC3']]=Ro,this['pcUniformT'+'ype'][_0x3fa67e['BOOL_VEC4']]=Oo,this['pcUniformT'+'ype'][_0x3fa67e['FLOAT_MAT2']]=kh,this['pcUniformT'+'ype'][_0x3fa67e['FLOAT_MAT3']]=Sn,this['pcUniformT'+'ype'][_0x3fa67e['FLOAT_MAT4']]=Js,this['pcUniformT'+'ype'][_0x3fa67e['SAMPLER_2D']]=J0,this['pcUniformT'+'ype'][_0x3fa67e['SAMPLER_CU'+'BE']]=ex,this['pcUniformT'+'ype'][_0x3fa67e['UNSIGNED_I'+'NT']]=yn,this['pcUniformT'+'ype'][_0x3fa67e['UNSIGNED_I'+'NT_VEC2']]=vn,this['pcUniformT'+'ype'][_0x3fa67e['UNSIGNED_I'+'NT_VEC3']]=xn,this['pcUniformT'+'ype'][_0x3fa67e['UNSIGNED_I'+'NT_VEC4']]=Tn,this['pcUniformT'+'ype'][_0x3fa67e['SAMPLER_2D'+'_SHADOW']]=tx,this['pcUniformT'+'ype'][_0x3fa67e['SAMPLER_CU'+'BE_SHADOW']]=sx,this['pcUniformT'+'ype'][_0x3fa67e['SAMPLER_2D'+'_ARRAY']]=rx,this['pcUniformT'+'ype'][_0x3fa67e['SAMPLER_3D']]=ix,this['pcUniformT'+'ype'][_0x3fa67e['INT_SAMPLE'+'R_2D']]=ax,this['pcUniformT'+'ype'][_0x3fa67e['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=nx,this['pcUniformT'+'ype'][_0x3fa67e['INT_SAMPLE'+'R_CUBE']]=ox,this['pcUniformT'+'ype'][_0x3fa67e['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=lx,this['pcUniformT'+'ype'][_0x3fa67e['INT_SAMPLE'+'R_3D']]=hx,this['pcUniformT'+'ype'][_0x3fa67e['UNSIGNED_I'+'NT_SAMPLER'+'_3D']]=cx,this['pcUniformT'+'ype'][_0x3fa67e['INT_SAMPLE'+'R_2D_ARRAY']]=dx,this['pcUniformT'+'ype'][_0x3fa67e['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]=fx,this['targetToSl'+'ot']={},this['targetToSl'+'ot'][_0x3fa67e['TEXTURE_2D']]=0x1c57+0x24f5+-0x7*0x954,this['targetToSl'+'ot'][_0x3fa67e['TEXTURE_CU'+'BE_MAP']]=-0x1*-0x26ff+-0x112*0x1b+0x26*-0x44,this['targetToSl'+'ot'][_0x3fa67e['TEXTURE_3D']]=0x1152+-0x1b9c+0xa4c;let _0x50fc26,_0x4f1cd2,_0x2e1613,_0x54201d,_0x5215d1;this['commitFunc'+'tion']=[],this['commitFunc'+'tion'][on]=function(_0x1af7e4,_0x2ceb3c){_0x1af7e4['value']!==_0x2ceb3c&&(_0x3fa67e['uniform1i'](_0x1af7e4['locationId'],_0x2ceb3c),_0x1af7e4['value']=_0x2ceb3c);},this['commitFunc'+'tion'][sa]=this['commitFunc'+'tion'][on],this['commitFunc'+'tion'][Us]=function(_0xac4a18,_0x196c07){_0xac4a18['value']!==_0x196c07&&(_0x3fa67e['uniform1f'](_0xac4a18['locationId'],_0x196c07),_0xac4a18['value']=_0x196c07);},this['commitFunc'+'tion'][ia]=function(_0x5f586c,_0x888c29){_0x5215d1=_0x5f586c['value'],_0x50fc26=_0x888c29[0x3da+-0x1a20+-0x1*-0x1646],_0x4f1cd2=_0x888c29[-0x25f5+-0x26d7*0x1+0x1*0x4ccd],(_0x5215d1[-0x1*0x1b8d+-0x12c1+0x1*0x2e4e]!==_0x50fc26||_0x5215d1[-0x6*0x5db+-0x166d*0x1+-0x399*-0x10]!==_0x4f1cd2)&&(_0x3fa67e['uniform2fv'](_0x5f586c['locationId'],_0x888c29),_0x5215d1[0x1b45+0x2*0x5e3+-0x7cf*0x5]=_0x50fc26,_0x5215d1[-0x1*-0xfb7+-0x4*-0x6df+-0x2b32]=_0x4f1cd2);},this['commitFunc'+'tion'][rs]=function(_0x373e51,_0xa92737){_0x5215d1=_0x373e51['value'],_0x50fc26=_0xa92737[-0x3bd*0x3+0x20d3+-0x159c],_0x4f1cd2=_0xa92737[0x6*0x5bf+0x2fb*-0x4+0x168d*-0x1],_0x2e1613=_0xa92737[-0x1b91+-0x702+-0x3*-0xb87],(_0x5215d1[0x131d*-0x1+0x1591+0x1*-0x274]!==_0x50fc26||_0x5215d1[0x143+0x1e9+-0x1*0x32b]!==_0x4f1cd2||_0x5215d1[0x85*0x15+0xdd*-0x26+0x15*0x10b]!==_0x2e1613)&&(_0x3fa67e['uniform3fv'](_0x373e51['locationId'],_0xa92737),_0x5215d1[0x20e5+-0x159e+0x1*-0xb47]=_0x50fc26,_0x5215d1[0x1*0x118e+-0x4e*-0x6a+0x1*-0x31d9]=_0x4f1cd2,_0x5215d1[0x1*-0xf75+-0x2370+-0x1*-0x32e7]=_0x2e1613);},this['commitFunc'+'tion'][gn]=function(_0x390b5b,_0x115841){_0x5215d1=_0x390b5b['value'],_0x50fc26=_0x115841[-0x20+-0x1*-0x22e9+0x41*-0x89],_0x4f1cd2=_0x115841[0x1aee*-0x1+0x751*-0x4+0x3833],_0x2e1613=_0x115841[-0x1002+-0x1*-0x23db+-0x1*0x13d7],_0x54201d=_0x115841[0x2*-0x26a+-0x1b3f+0x3*0xab2],(_0x5215d1[0x7f6+-0x1a6+0x650*-0x1]!==_0x50fc26||_0x5215d1[-0x2b*0x2b+0x939+-0x1ff]!==_0x4f1cd2||_0x5215d1[0x22be+-0x1632+-0xc8a]!==_0x2e1613||_0x5215d1[-0x61f+0x19de+-0x2*0x9de]!==_0x54201d)&&(_0x3fa67e['uniform4fv'](_0x390b5b['locationId'],_0x115841),_0x5215d1[0x2*-0x11ed+0x1e1+0xb53*0x3]=_0x50fc26,_0x5215d1[-0x1b11+-0xd*0x2d1+0x3faf*0x1]=_0x4f1cd2,_0x5215d1[-0x83*-0xa+0xa00+-0xf1c]=_0x2e1613,_0x5215d1[0xc5*-0x30+-0xdb9+0x32ac]=_0x54201d);},this['commitFunc'+'tion'][qr]=function(_0x4e4cab,_0x264bb1){_0x5215d1=_0x4e4cab['value'],_0x50fc26=_0x264bb1[-0x1*-0x1ed5+0xe3b+-0x2d10],_0x4f1cd2=_0x264bb1[-0x27f+-0xef*0x18+0x2*0xc74],(_0x5215d1[0x11c*0x1f+-0xe82+0x2*-0x9f1]!==_0x50fc26||_0x5215d1[0x242*-0x2+0x2*0xf25+-0x9*0x2dd]!==_0x4f1cd2)&&(_0x3fa67e['uniform2iv'](_0x4e4cab['locationId'],_0x264bb1),_0x5215d1[0x169*0x13+-0x1f9*-0xf+0x1*-0x3862]=_0x50fc26,_0x5215d1[0x1*-0x1d95+0x1b8f+0x207]=_0x4f1cd2);},this['commitFunc'+'tion'][Lo]=this['commitFunc'+'tion'][qr],this['commitFunc'+'tion'][jr]=function(_0x561f3e,_0x31f7e5){_0x5215d1=_0x561f3e['value'],_0x50fc26=_0x31f7e5[0x17*-0x29+0x26fb+0x4*-0x8d3],_0x4f1cd2=_0x31f7e5[0x9*-0x457+0x6e8+0x126*0x1c],_0x2e1613=_0x31f7e5[-0x53*-0x3+0x47*-0x2e+-0xbcb*-0x1],(_0x5215d1[0xae6+0x184a+0x1198*-0x2]!==_0x50fc26||_0x5215d1[0xf8f*0x2+0xbd3+-0x2af0]!==_0x4f1cd2||_0x5215d1[-0x54*0x1d+-0xca6+0x102*0x16]!==_0x2e1613)&&(_0x3fa67e['uniform3iv'](_0x561f3e['locationId'],_0x31f7e5),_0x5215d1[0x1*-0x1ff5+0x16c7+0xa*0xeb]=_0x50fc26,_0x5215d1[-0x1935+-0xb94*-0x1+0xda2]=_0x4f1cd2,_0x5215d1[0x23ab+-0x2*0x2f+-0x234b]=_0x2e1613);},this['commitFunc'+'tion'][Ro]=this['commitFunc'+'tion'][jr],this['commitFunc'+'tion'][Yr]=function(_0x1b1b7d,_0x447335){_0x5215d1=_0x1b1b7d['value'],_0x50fc26=_0x447335[0xcdd*0x2+0x2*-0x86+-0xc57*0x2],_0x4f1cd2=_0x447335[0x3*-0x183+0x27*0x1f+0x1*-0x2f],_0x2e1613=_0x447335[0x2138+-0x1243+-0xef3],_0x54201d=_0x447335[-0x1*-0x1b2f+0x1586+0x2*-0x1859],(_0x5215d1[0x10*-0x1c4+-0x2144*0x1+0x3d84]!==_0x50fc26||_0x5215d1[0x1c8d+0x1ec2+-0x2*0x1da7]!==_0x4f1cd2||_0x5215d1[0x115*0x1d+-0x5*0x24e+-0x1*0x13d9]!==_0x2e1613||_0x5215d1[-0xcd2+0x4*-0x163+0x1261]!==_0x54201d)&&(_0x3fa67e['uniform4iv'](_0x1b1b7d['locationId'],_0x447335),_0x5215d1[0x10ca+0x169c+-0x2766]=_0x50fc26,_0x5215d1[0x22bf+-0x16cc+-0xbf2]=_0x4f1cd2,_0x5215d1[0x235b+0x65*-0x3b+-0xc12]=_0x2e1613,_0x5215d1[-0x2*-0x6d7+-0xb*0x2d+-0xbbc]=_0x54201d);},this['commitFunc'+'tion'][Oo]=this['commitFunc'+'tion'][Yr],this['commitFunc'+'tion'][kh]=function(_0x1744fc,_0x33dd5b){_0x3fa67e['uniformMat'+'rix2fv'](_0x1744fc['locationId'],!(-0x4*0x99a+-0x2*0xfe9+0x463b),_0x33dd5b);},this['commitFunc'+'tion'][Sn]=function(_0x41322a,_0x1415b5){_0x3fa67e['uniformMat'+'rix3fv'](_0x41322a['locationId'],!(0x1*-0xdf3+-0xb0d+-0x1*-0x1901),_0x1415b5);},this['commitFunc'+'tion'][Js]=function(_0x495c53,_0x4ecc22){_0x3fa67e['uniformMat'+'rix4fv'](_0x495c53['locationId'],!(0x11b7+0xddc+-0x1f92),_0x4ecc22);},this['commitFunc'+'tion'][Uc]=function(_0x5b34ad,_0x40cb31){_0x3fa67e['uniform1fv'](_0x5b34ad['locationId'],_0x40cb31);},this['commitFunc'+'tion'][Bc]=function(_0x57941b,_0x361316){_0x3fa67e['uniform2fv'](_0x57941b['locationId'],_0x361316);},this['commitFunc'+'tion'][zc]=function(_0x1ffc63,_0x2c17ca){_0x3fa67e['uniform3fv'](_0x1ffc63['locationId'],_0x2c17ca);},this['commitFunc'+'tion'][Qu]=function(_0x5d13e7,_0x9b72e8){_0x3fa67e['uniform4fv'](_0x5d13e7['locationId'],_0x9b72e8);},this['commitFunc'+'tion'][yn]=function(_0x55cb5b,_0x3d32f9){_0x55cb5b['value']!==_0x3d32f9&&(_0x3fa67e['uniform1ui'](_0x55cb5b['locationId'],_0x3d32f9),_0x55cb5b['value']=_0x3d32f9);},this['commitFunc'+'tion'][vn]=function(_0x569aa1,_0x4c3a2b){_0x5215d1=_0x569aa1['value'],_0x50fc26=_0x4c3a2b[-0x76*0x13+-0x24b+0xb0d],_0x4f1cd2=_0x4c3a2b[0x629+-0x11c0+0x1*0xb98],(_0x5215d1[-0x2*-0x8fb+0x34d+0x1543*-0x1]!==_0x50fc26||_0x5215d1[0x1*0xa2b+0x264c*0x1+0x2*-0x183b]!==_0x4f1cd2)&&(_0x3fa67e['uniform2ui'+'v'](_0x569aa1['locationId'],_0x4c3a2b),_0x5215d1[-0x1fc5+-0x2*0xe55+0x1b*0x23d]=_0x50fc26,_0x5215d1[0x7*-0x137+-0x1*-0x1f6a+-0x16e8]=_0x4f1cd2);},this['commitFunc'+'tion'][xn]=function(_0x5cd212,_0x36f23b){_0x5215d1=_0x5cd212['value'],_0x50fc26=_0x36f23b[0x8*-0x425+-0x2*0x257+0x25d6],_0x4f1cd2=_0x36f23b[-0x95*0x17+-0x11c6+-0xf95*-0x2],_0x2e1613=_0x36f23b[-0x1*-0x24a1+-0x246f+0x2*-0x18],(_0x5215d1[0x7*0x55b+0xbb*0xc+-0x2e41*0x1]!==_0x50fc26||_0x5215d1[0x1*-0x3b9+0x1ede*-0x1+-0x52*-0x6c]!==_0x4f1cd2||_0x5215d1[0x259b+-0x5*-0x412+-0x1351*0x3]!==_0x2e1613)&&(_0x3fa67e['uniform3ui'+'v'](_0x5cd212['locationId'],_0x36f23b),_0x5215d1[-0x1b51+0x1a71+0xe0]=_0x50fc26,_0x5215d1[0x1c5*-0x6+-0x1*-0xa43+0x1*0x5c]=_0x4f1cd2,_0x5215d1[0xba5+-0xe74+0x2d1]=_0x2e1613);},this['commitFunc'+'tion'][Tn]=function(_0x38ae06,_0x299305){_0x5215d1=_0x38ae06['value'],_0x50fc26=_0x299305[-0x4*-0x301+0x1481*-0x1+0x87d*0x1],_0x4f1cd2=_0x299305[-0x1be2+-0x2*0x1086+0x3cef],_0x2e1613=_0x299305[0x1*-0x217b+0xa3*-0x13+0x2d96],_0x54201d=_0x299305[0x13*0xbf+0x2266+-0x3090],(_0x5215d1[-0x2141+0x3*0xae1+0x9e]!==_0x50fc26||_0x5215d1[0x1c7c+0xd23+-0x2f9*0xe]!==_0x4f1cd2||_0x5215d1[-0xe40+-0x61f*0x5+-0x5*-0x8f9]!==_0x2e1613||_0x5215d1[0x1*0x819+0xc89*-0x2+0x10fc]!==_0x54201d)&&(_0x3fa67e['uniform4ui'+'v'](_0x38ae06['locationId'],_0x299305),_0x5215d1[0x13a*-0x8+0x219e+-0x17ce]=_0x50fc26,_0x5215d1[-0x1316+0x1eec+-0xbd5]=_0x4f1cd2,_0x5215d1[0x4a2*-0x3+0xca2+0x146]=_0x2e1613,_0x5215d1[0x1c6b+0x1*-0x2151+0x3*0x1a3]=_0x54201d);},this['commitFunc'+'tion'][wn]=function(_0x382dde,_0x591926){_0x3fa67e['uniform1iv'](_0x382dde['locationId'],_0x591926);},this['commitFunc'+'tion'][Vc]=function(_0x3645d3,_0x3b3dea){_0x3fa67e['uniform1ui'+'v'](_0x3645d3['locationId'],_0x3b3dea);},this['commitFunc'+'tion'][Gc]=this['commitFunc'+'tion'][wn],this['commitFunc'+'tion'][En]=function(_0x96adb4,_0xf98fe9){_0x3fa67e['uniform2iv'](_0x96adb4['locationId'],_0xf98fe9);},this['commitFunc'+'tion'][Hc]=function(_0x2a2f8a,_0x498b43){_0x3fa67e['uniform2ui'+'v'](_0x2a2f8a['locationId'],_0x498b43);},this['commitFunc'+'tion'][Wc]=this['commitFunc'+'tion'][En],this['commitFunc'+'tion'][An]=function(_0x5d8bd6,_0x2c99f1){_0x3fa67e['uniform3iv'](_0x5d8bd6['locationId'],_0x2c99f1);},this['commitFunc'+'tion'][$c]=function(_0x3006a0,_0x3be338){_0x3fa67e['uniform3ui'+'v'](_0x3006a0['locationId'],_0x3be338);},this['commitFunc'+'tion'][Xc]=this['commitFunc'+'tion'][An],this['commitFunc'+'tion'][Uh]=function(_0x24e102,_0x4f53c4){_0x3fa67e['uniform4iv'](_0x24e102['locationId'],_0x4f53c4);},this['commitFunc'+'tion'][Ju]=function(_0x16273e,_0x2ea0b4){_0x3fa67e['uniform4ui'+'v'](_0x16273e['locationId'],_0x2ea0b4);},this['commitFunc'+'tion'][em]=this['commitFunc'+'tion'][Uh],this['commitFunc'+'tion'][IS]=function(_0x45ae12,_0x4f70ec){_0x3fa67e['uniformMat'+'rix4fv'](_0x45ae12['locationId'],!(-0x9*0x1e5+0x1cc7+-0xbb9),_0x4f70ec);},this['constantTe'+'xSource']=this['scope']['resolve']('source'),this['postInit']();}['postInit'](){super['postInit'](),this['gpuProfile'+'r']=new mT(this);}['destroy'](){super['destroy']();const _0x37034c=this['gl'];this['feedback']&&_0x37034c['deleteTran'+'sformFeedb'+'ack'](this['feedback']),this['clearVerte'+'xArrayObje'+'ctCache'](),this['canvas']['removeEven'+'tListener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(-0x67*-0x4+0x1*0x385+-0x520)),this['canvas']['removeEven'+'tListener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x2*0xeab+0xd55*-0x1+0x1*-0x1000)),this['_contextLo'+'stHandler']=null,this['_contextRe'+'storedHand'+'ler']=null,this['gl']=null,super['postDestro'+'y']();}['createBack'+'buffer'](_0x4a6b39){this['supportsSt'+'encil']=this['initOption'+'s']['stencil'],this['backBuffer']=new vt({'name':'WebglFrame'+'buffer','graphicsDevice':this,'depth':this['initOption'+'s']['depth'],'stencil':this['supportsSt'+'encil'],'samples':this['samples']}),this['backBuffer']['impl']['suppliedCo'+'lorFramebu'+'ffer']=_0x4a6b39;}['updateBack'+'bufferForm'+'at'](_0x5ceb01){const _0x23eae0=this['gl'];_0x23eae0['bindFrameb'+'uffer'](_0x23eae0['FRAMEBUFFE'+'R'],_0x5ceb01);const _0x485626=this['gl']['getParamet'+'er'](this['gl']['ALPHA_BITS']);this['backBuffer'+'Format']=_0x485626?Oe:ur;}['updateBack'+'buffer'](){const _0x159cdb=this['canvas']['width']!==this['backBuffer'+'Size']['x']||this['canvas']['height']!==this['backBuffer'+'Size']['y'];(this['_defaultFr'+'amebufferC'+'hanged']||_0x159cdb)&&(this['_defaultFr'+'amebufferC'+'hanged']&&this['updateBack'+'bufferForm'+'at'](this['_defaultFr'+'amebuffer']),this['_defaultFr'+'amebufferC'+'hanged']=!(0x22c0+0x3e*0x7d+-0x4105),this['backBuffer'+'Size']['set'](this['canvas']['width'],this['canvas']['height']),this['backBuffer']['destroy'](),this['createBack'+'buffer'](this['_defaultFr'+'amebuffer']));}['createVert'+'exBufferIm'+'pl'](_0x25a5cb,_0x450ba2){return new sT();}['createInde'+'xBufferImp'+'l'](_0x2645e9){return new iT(_0x2645e9);}['createShad'+'erImpl'](_0x2967e0){return new hT(_0x2967e0);}['createText'+'ureImpl'](_0xe92b59){return new cT(_0xe92b59);}['createRend'+'erTargetIm'+'pl'](_0x12fcfa){return new fT();}['pushMarker'](_0x276963){if(Me['browser']&&window['spector']){const _0x5081a9=Q['toString']();window['spector']['setMarker'](_0x5081a9+'\x20#');}}['popMarker'](){if(Me['browser']&&window['spector']){const _0xf55aac=Q['toString']();_0xf55aac['length']?window['spector']['setMarker'](_0xf55aac+'\x20#'):window['spector']['clearMarke'+'r']();}}['getPrecisi'+'on'](){const _0x223a83=this['gl'];let _0x2961db='highp';if(_0x223a83['getShaderP'+'recisionFo'+'rmat']){const _0xdc5d77=_0x223a83['getShaderP'+'recisionFo'+'rmat'](_0x223a83['VERTEX_SHA'+'DER'],_0x223a83['HIGH_FLOAT']),_0x316208=_0x223a83['getShaderP'+'recisionFo'+'rmat'](_0x223a83['VERTEX_SHA'+'DER'],_0x223a83['MEDIUM_FLO'+'AT']),_0x2f0c7a=_0x223a83['getShaderP'+'recisionFo'+'rmat'](_0x223a83['FRAGMENT_S'+'HADER'],_0x223a83['HIGH_FLOAT']),_0x14f96a=_0x223a83['getShaderP'+'recisionFo'+'rmat'](_0x223a83['FRAGMENT_S'+'HADER'],_0x223a83['MEDIUM_FLO'+'AT']);if(_0xdc5d77&&_0x316208&&_0x2f0c7a&&_0x14f96a){const _0x22d928=_0xdc5d77['precision']>-0x19ab+0x3e7+0x15c4&&_0x2f0c7a['precision']>0x220e+-0x1829+-0x95*0x11,_0x3418af=_0x316208['precision']>-0x146*0xd+0xd6e+-0x10*-0x32&&_0x14f96a['precision']>-0x2635*-0x1+0x1f*0x1+0x1*-0x2654;_0x22d928||(_0x3418af?(_0x2961db='mediump',M['warn']('WARNING:\x20h'+'ighp\x20not\x20s'+'upported,\x20'+'using\x20medi'+'ump')):(_0x2961db='lowp',M['warn']('WARNING:\x20h'+'ighp\x20and\x20m'+'ediump\x20not'+'\x20supported'+',\x20using\x20lo'+'wp')));}}return _0x2961db;}['getExtensi'+'on'](){for(let _0x56f1d5=-0x379*0x4+-0x53*0x3d+0x27*0xdd;_0x56f1d5<arguments['length'];_0x56f1d5++)if(this['supportedE'+'xtensions']['indexOf'](arguments[_0x56f1d5])!==-(-0x15b*0x7+-0x1f99*0x1+0x2917*0x1))return this['gl']['getExtensi'+'on'](arguments[_0x56f1d5]);return null;}get['extDisjoin'+'tTimerQuer'+'y'](){return this['_extDisjoi'+'ntTimerQue'+'ry']||(this['_extDisjoi'+'ntTimerQue'+'ry']=this['getExtensi'+'on']('EXT_disjoi'+'nt_timer_q'+'uery_webgl'+'2','EXT_disjoi'+'nt_timer_q'+'uery')),this['_extDisjoi'+'ntTimerQue'+'ry'];}['initialize'+'Extensions'](){const _0xb8f90f=this['gl'];this['supportedE'+'xtensions']=_0xb8f90f['getSupport'+'edExtensio'+'ns']()??[],this['_extDisjoi'+'ntTimerQue'+'ry']=null,this['textureRG1'+'1B10Render'+'able']=!(-0x14*-0x1f1+-0x1ea8+-0x82c),this['extColorBu'+'fferFloat']=this['getExtensi'+'on']('EXT_color_'+'buffer_flo'+'at'),this['textureFlo'+'atRenderab'+'le']=!!this['extColorBu'+'fferFloat'],this['extColorBu'+'fferHalfFl'+'oat']=this['getExtensi'+'on']('EXT_color_'+'buffer_hal'+'f_float'),this['textureHal'+'fFloatRend'+'erable']=!!this['extColorBu'+'fferHalfFl'+'oat']||!!this['extColorBu'+'fferFloat'],this['extDebugRe'+'ndererInfo']=this['getExtensi'+'on']('WEBGL_debu'+'g_renderer'+'_info'),this['extTexture'+'FloatLinea'+'r']=this['getExtensi'+'on']('OES_textur'+'e_float_li'+'near'),this['textureFlo'+'atFilterab'+'le']=!!this['extTexture'+'FloatLinea'+'r'],this['extFloatBl'+'end']=this['getExtensi'+'on']('EXT_float_'+'blend'),this['extTexture'+'FilterAnis'+'otropic']=this['getExtensi'+'on']('EXT_textur'+'e_filter_a'+'nisotropic','WEBKIT_EXT'+'_texture_f'+'ilter_anis'+'otropic'),this['extParalle'+'lShaderCom'+'pile']=this['getExtensi'+'on']('KHR_parall'+'el_shader_'+'compile'),this['extCompres'+'sedTexture'+'ETC1']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc1'),this['extCompres'+'sedTexture'+'ETC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc'),this['extCompres'+'sedTexture'+'PVRTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_pvrtc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_pvrtc'),this['extCompres'+'sedTexture'+'S3TC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_s3tc'),this['extCompres'+'sedTexture'+'S3TC_SRGB']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc_'+'srgb'),this['extCompres'+'sedTexture'+'ATC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_atc'),this['extCompres'+'sedTexture'+'ASTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_astc'),this['extTexture'+'Compressio'+'nBPTC']=this['getExtensi'+'on']('EXT_textur'+'e_compress'+'ion_bptc');}['initialize'+'Capabiliti'+'es'](){const _0x3a74ec=this['gl'];let _0x403032;const _0xa15e96=typeof navigator<'u'?navigator['userAgent']:'';this['maxPrecisi'+'on']=this['precision']=this['getPrecisi'+'on']();const _0x15c831=_0x3a74ec['getContext'+'Attributes']();this['supportsMs'+'aa']=(_0x15c831==null?void(-0x26e0+0xc3*-0x1+0x27a3):_0x15c831['antialias'])??!(-0x3f1*0x7+0x2644+0x4*-0x2ab),this['supportsSt'+'encil']=(_0x15c831==null?void(-0x4af+-0x26*0x83+-0xd5*-0x1d):_0x15c831['stencil'])??!(0x1b21+-0x1699+-0x3d*0x13),this['maxTexture'+'Size']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_TEXTUR'+'E_SIZE']),this['maxCubeMap'+'Size']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_CUBE_M'+'AP_TEXTURE'+'_SIZE']),this['maxRenderB'+'ufferSize']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_RENDER'+'BUFFER_SIZ'+'E']),this['maxTexture'+'s']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_TEXTUR'+'E_IMAGE_UN'+'ITS']),this['maxCombine'+'dTextures']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_COMBIN'+'ED_TEXTURE'+'_IMAGE_UNI'+'TS']),this['maxVertexT'+'extures']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_VERTEX'+'_TEXTURE_I'+'MAGE_UNITS']),this['vertexUnif'+'ormsCount']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_VERTEX'+'_UNIFORM_V'+'ECTORS']),this['fragmentUn'+'iformsCoun'+'t']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_FRAGME'+'NT_UNIFORM'+'_VECTORS']),this['maxColorAt'+'tachments']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_COLOR_'+'ATTACHMENT'+'S']),this['maxVolumeS'+'ize']=_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_3D_TEX'+'TURE_SIZE']),_0x403032=this['extDebugRe'+'ndererInfo'],this['unmaskedRe'+'nderer']=_0x403032?_0x3a74ec['getParamet'+'er'](_0x403032['UNMASKED_R'+'ENDERER_WE'+'BGL']):'',this['unmaskedVe'+'ndor']=_0x403032?_0x3a74ec['getParamet'+'er'](_0x403032['UNMASKED_V'+'ENDOR_WEBG'+'L']):'';const _0x349f4c=/\bMali-G52+/,_0x2af146=/SM-[a-zA-Z0-9]+/;this['supportsGp'+'uParticles']=!(this['unmaskedVe'+'ndor']==='ARM'&&_0xa15e96['match'](_0x2af146))&&!this['unmaskedRe'+'nderer']['match'](_0x349f4c),_0x403032=this['extTexture'+'FilterAnis'+'otropic'],this['maxAnisotr'+'opy']=_0x403032?_0x3a74ec['getParamet'+'er'](_0x403032['MAX_TEXTUR'+'E_MAX_ANIS'+'OTROPY_EXT']):0x15c+-0x1*0x2555+0x23fa;const _0x2fcc6b=!this['forceDisab'+'leMultisam'+'pling'];this['maxSamples']=_0x2fcc6b?_0x3a74ec['getParamet'+'er'](_0x3a74ec['MAX_SAMPLE'+'S']):0x22fa+0x76*0x14+-0x1b*0x1a3,this['maxSamples']=Math['min'](this['maxSamples'],0x6*-0x3f5+0x1526*0x1+-0xa7*-0x4),this['samples']=_0x2fcc6b&&this['backBuffer'+'Antialias']?this['maxSamples']:-0x1e17*-0x1+0x7*-0x173+-0x13f1,this['supportsAr'+'eaLights']=!Me['android'],this['maxTexture'+'s']<=-0xc4f*0x3+0x1fd1+-0x524*-0x1&&(this['supportsAr'+'eaLights']=!(0x1679+0x1*-0x1c12+0x59a)),this['initCapsDe'+'fines']();}['initialize'+'RenderStat'+'e'](){super['initialize'+'RenderStat'+'e']();const _0x57967e=this['gl'];_0x57967e['disable'](_0x57967e['BLEND']),_0x57967e['blendFunc'](_0x57967e['ONE'],_0x57967e['ZERO']),_0x57967e['blendEquat'+'ion'](_0x57967e['FUNC_ADD']),_0x57967e['colorMask'](!(-0x5*-0x276+-0xe67+-0x219*-0x1),!(0x76+-0x6c5+0x11*0x5f),!(0x4d4*-0x1+-0x1c*-0x140+-0x1*0x1e2c),!(0x91a*0x4+0x7*-0x20f+-0x15ff)),_0x57967e['blendColor'](-0xceb+0x1944+0x1d*-0x6d,-0x14c7+-0x1b21+0x2fe8,-0xb78+0xd41+-0x1c9,0x1530+0x2471*-0x1+0x37*0x47),_0x57967e['enable'](_0x57967e['CULL_FACE']),this['cullFace']=_0x57967e['BACK'],_0x57967e['cullFace'](_0x57967e['BACK']),_0x57967e['enable'](_0x57967e['DEPTH_TEST']),_0x57967e['depthFunc'](_0x57967e['LEQUAL']),_0x57967e['depthMask'](!(0x2*-0x7c1+0x460*-0x5+-0x122*-0x21)),this['stencil']=!(0x1*0x2003+-0x1a3*-0x11+-0x3bd5),_0x57967e['disable'](_0x57967e['STENCIL_TE'+'ST']),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=Ni,this['stencilRef'+'Front']=this['stencilRef'+'Back']=0x1*0x159b+-0x1*0x24a6+-0x1*-0xf0b,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=0x24f7*-0x1+0x26bf+-0x1*0xc9,_0x57967e['stencilFun'+'c'](_0x57967e['ALWAYS'],-0x1f4b+-0x1*0xef2+0x13*0x26f,-0x267a+-0x815*-0x3+0xf3a),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=nn,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=nn,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=nn,this['stencilWri'+'teMaskFron'+'t']=0x1*-0x8bd+0x19*0x86+-0x35a,this['stencilWri'+'teMaskBack']=-0x3d8+0x8cc*0x1+-0x3f5,_0x57967e['stencilOp'](_0x57967e['KEEP'],_0x57967e['KEEP'],_0x57967e['KEEP']),_0x57967e['stencilMas'+'k'](-0x12fd*0x2+0xddc+0x1*0x191d),this['alphaToCov'+'erage']=!(0x1e8d+-0xac6+-0x13c6),this['raster']=!(-0x3*-0x9b9+-0x41b*0x1+-0x1910),_0x57967e['disable'](_0x57967e['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']),_0x57967e['disable'](_0x57967e['RASTERIZER'+'_DISCARD']),this['depthBiasE'+'nabled']=!(0x27*-0xc1+-0x248f+0x41f7),_0x57967e['disable'](_0x57967e['POLYGON_OF'+'FSET_FILL']),this['clearDepth']=0x5b5+0x2355+-0x2909,_0x57967e['clearDepth'](0x1*0x371+0x10f+-0x47f),this['clearColor']=new ie(-0x2572+0x2698+-0x126,-0x11de+-0x1*0x1f89+0x3167,-0x1737+-0x383*-0x1+-0xc2*-0x1a,0x1158+0x1d02+-0x2e5a),_0x57967e['clearColor'](0x41*-0x82+-0x3+0x1*0x2105,0x7c1*0x5+0xab2+0x43*-0xbd,0xd*0x158+0x976+0x2*-0xd77,0xd8*-0x11+-0x1e5*-0x4+-0x2*-0x362),this['clearStenc'+'il']=-0x876*-0x2+0x3*0xba+-0x131a,_0x57967e['clearStenc'+'il'](0x693+0x17fd+0x1e9*-0x10),_0x57967e['hint'](_0x57967e['FRAGMENT_S'+'HADER_DERI'+'VATIVE_HIN'+'T'],_0x57967e['NICEST']),_0x57967e['enable'](_0x57967e['SCISSOR_TE'+'ST']),_0x57967e['pixelStore'+'i'](_0x57967e['UNPACK_COL'+'ORSPACE_CO'+'NVERSION_W'+'EBGL'],_0x57967e['NONE']),this['unpackFlip'+'Y']=!(0x17e9*-0x1+-0xbb3+0xbdf*0x3),_0x57967e['pixelStore'+'i'](_0x57967e['UNPACK_FLI'+'P_Y_WEBGL'],!(0x1c6e+0x151*0xb+-0x2ae8)),this['unpackPrem'+'ultiplyAlp'+'ha']=!(-0x1d56+0x1095*0x2+-0x3d3),_0x57967e['pixelStore'+'i'](_0x57967e['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],!(-0x15ed+0x18*0x83+-0x9a6*-0x1)),_0x57967e['pixelStore'+'i'](_0x57967e['UNPACK_ALI'+'GNMENT'],-0x15*-0x17+0x1bd2*-0x1+0x33e*0x8);}['initTextur'+'eUnits'](_0x435619=-0x1910+0x1e2e*0x1+0x1*-0x50e){this['textureUni'+'ts']=[];for(let _0x4f6fae=0x5ad+-0xbdd+0x630;_0x4f6fae<_0x435619;_0x4f6fae++)this['textureUni'+'ts']['push']([null,null,null]);}['initialize'+'ContextCac'+'hes'](){super['initialize'+'ContextCac'+'hes'](),this['_vaoMap']=new Map(),this['boundVao']=null,this['activeFram'+'ebuffer']=null,this['feedback']=null,this['transformF'+'eedbackBuf'+'fer']=null,this['textureUni'+'t']=0x1*-0x1e89+0x159+-0x74c*-0x4,this['initTextur'+'eUnits'](this['maxCombine'+'dTextures']);}['loseContex'+'t'](){super['loseContex'+'t']();for(const _0x4ce40b of this['shaders'])_0x4ce40b['loseContex'+'t']();}['restoreCon'+'text'](){this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),super['restoreCon'+'text']();for(const _0xfb71bd of this['shaders'])_0xfb71bd['restoreCon'+'text']();}['setViewpor'+'t'](_0x5125ca,_0x296bc4,_0x4e5759,_0x1e594e){(this['vx']!==_0x5125ca||this['vy']!==_0x296bc4||this['vw']!==_0x4e5759||this['vh']!==_0x1e594e)&&(this['gl']['viewport'](_0x5125ca,_0x296bc4,_0x4e5759,_0x1e594e),this['vx']=_0x5125ca,this['vy']=_0x296bc4,this['vw']=_0x4e5759,this['vh']=_0x1e594e);}['setScissor'](_0x3f088f,_0x432579,_0x15c542,_0x99d104){(this['sx']!==_0x3f088f||this['sy']!==_0x432579||this['sw']!==_0x15c542||this['sh']!==_0x99d104)&&(this['gl']['scissor'](_0x3f088f,_0x432579,_0x15c542,_0x99d104),this['sx']=_0x3f088f,this['sy']=_0x432579,this['sw']=_0x15c542,this['sh']=_0x99d104);}['setFramebu'+'ffer'](_0x4f8041){if(this['activeFram'+'ebuffer']!==_0x4f8041){const _0x2f2541=this['gl'];_0x2f2541['bindFrameb'+'uffer'](_0x2f2541['FRAMEBUFFE'+'R'],_0x4f8041),this['activeFram'+'ebuffer']=_0x4f8041;}}['copyRender'+'Target'](_0x325ff1,_0x4db416,_0x5acdb0,_0x24c589){var _0x24d767,_0x584203;const _0x3e3934=this['gl'];if(_0x325ff1===this['backBuffer']&&(_0x325ff1=null),_0x5acdb0){if(_0x4db416){if(_0x325ff1){if(!_0x325ff1['_colorBuff'+'er']||!_0x4db416['_colorBuff'+'er'])return M['error']('Can\x27t\x20copy'+'\x20color\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0x1*-0x1c1b+-0x1d4a+-0x13*-0x10);if(_0x325ff1['_colorBuff'+'er']['_format']!==_0x4db416['_colorBuff'+'er']['_format'])return M['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20c'+'olor\x20forma'+'ts'),!(0x20a8+-0x2*-0xd6d+-0x1*0x3b81);}}else{if(!_0x325ff1['_colorBuff'+'er'])return M['error']('Can\x27t\x20copy'+'\x20empty\x20col'+'or\x20buffer\x20'+'to\x20backbuf'+'fer'),!(0x1*-0x11ed+0x304*0xb+-0x2*0x79f);}}if(_0x24c589&&_0x325ff1&&!_0x325ff1['_depth']){if(!_0x325ff1['_depthBuff'+'er']||!_0x4db416['_depthBuff'+'er'])return M['error']('Can\x27t\x20copy'+'\x20depth\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0x11e7+-0x2340+0x3528);if(_0x325ff1['_depthBuff'+'er']['_format']!==_0x4db416['_depthBuff'+'er']['_format'])return M['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20d'+'epth\x20forma'+'ts'),!(0x156e+-0x1d9+0x9ca*-0x2);}Q['pushGpuMar'+'ker'](this,'COPY-RT');const _0x16b2bc=this['renderTarg'+'et'];this['renderTarg'+'et']=_0x4db416,this['updateBegi'+'n']();const _0x4b6361=_0x325ff1?_0x325ff1['impl']['_glFrameBu'+'ffer']:(_0x24d767=this['backBuffer'])==null?void(-0x2*0x7fe+-0x284*0x8+0x241c):_0x24d767['impl']['_glFrameBu'+'ffer'],_0xe490e0=_0x4db416?_0x4db416['impl']['_glFrameBu'+'ffer']:(_0x584203=this['backBuffer'])==null?void(0x1929+-0x16*0xa6+-0xae5):_0x584203['impl']['_glFrameBu'+'ffer'];M['assert'](_0x4b6361!==_0xe490e0,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x3e3934['bindFrameb'+'uffer'](_0x3e3934['READ_FRAME'+'BUFFER'],_0x4b6361),_0x3e3934['bindFrameb'+'uffer'](_0x3e3934['DRAW_FRAME'+'BUFFER'],_0xe490e0);const _0x5ba229=_0x325ff1?_0x325ff1['width']:_0x4db416?_0x4db416['width']:this['width'],_0x3a8692=_0x325ff1?_0x325ff1['height']:_0x4db416?_0x4db416['height']:this['height'];return _0x3e3934['blitFrameb'+'uffer'](0x25*0x7b+0x7ef*-0x1+-0x9d8,-0x18a3+-0x24d0+0x3d73,_0x5ba229,_0x3a8692,0x7f1+0x2000+0x7fd*-0x5,0x1658+-0x12*-0x91+-0x208a,_0x5ba229,_0x3a8692,(_0x5acdb0?_0x3e3934['COLOR_BUFF'+'ER_BIT']:-0x2*-0x112f+-0x936+0x38*-0x73)|(_0x24c589?_0x3e3934['DEPTH_BUFF'+'ER_BIT']:-0x6*-0x2a2+-0x5*0x417+-0x4a7*-0x1),_0x3e3934['NEAREST']),this['renderTarg'+'et']=_0x16b2bc,_0x3e3934['bindFrameb'+'uffer'](_0x3e3934['FRAMEBUFFE'+'R'],_0x16b2bc?_0x16b2bc['impl']['_glFrameBu'+'ffer']:null),Q['popGpuMark'+'er'](this),!(-0x22b8+-0x47c*-0x3+0x1544*0x1);}['frameStart'](){super['frameStart'](),this['updateBack'+'buffer'](),this['gpuProfile'+'r']['frameStart']();}['frameEnd'](){super['frameEnd'](),this['gpuProfile'+'r']['frameEnd'](),this['gpuProfile'+'r']['request']();}['startRende'+'rPass'](_0x24b237){const _0x3d27ff=_0x24b237['renderTarg'+'et']??this['backBuffer'];this['renderTarg'+'et']=_0x3d27ff,M['assert'](_0x3d27ff),Q['pushGpuMar'+'ker'](this,'Pass:'+_0x24b237['name']+'\x20RT:'+_0x3d27ff['name']),Q['pushGpuMar'+'ker'](this,'START-PASS'),this['updateBegi'+'n']();const {width:_0x48f799,height:_0x31b03f}=_0x3d27ff;this['setViewpor'+'t'](-0xea9+-0x24cb*0x1+0x3374,-0x2291+-0x12b+0x8ef*0x4,_0x48f799,_0x31b03f),this['setScissor'](0x9*0x38+0xc*0xbc+0x398*-0x3,-0x1*-0x621+0x2449+0xb2*-0x3d,_0x48f799,_0x31b03f);const _0x3f3c5d=_0x24b237['colorOps'],_0x1e5788=_0x24b237['depthStenc'+'ilOps'];if(_0x3f3c5d!=null&&_0x3f3c5d['clear']||_0x1e5788['clearDepth']||_0x1e5788['clearStenc'+'il']){let _0x25cdb4=-0x424+0x13f*0x9+-0x713;const _0x2d50da={};_0x3f3c5d!=null&&_0x3f3c5d['clear']&&(_0x25cdb4|=bo,_0x2d50da['color']=[_0x3f3c5d['clearValue']['r'],_0x3f3c5d['clearValue']['g'],_0x3f3c5d['clearValue']['b'],_0x3f3c5d['clearValue']['a']]),_0x1e5788['clearDepth']&&(_0x25cdb4|=Co,_0x2d50da['depth']=_0x1e5788['clearDepth'+'Value']),_0x1e5788['clearStenc'+'il']&&(_0x25cdb4|=Ih,_0x2d50da['stencil']=_0x1e5788['clearStenc'+'ilValue']),_0x2d50da['flags']=_0x25cdb4,this['clear'](_0x2d50da);}M['call'](()=>{this['insideRend'+'erPass']&&M['errorOnce']('RenderPass'+'\x20cannot\x20be'+'\x20started\x20w'+'hile\x20insid'+'e\x20another\x20'+'render\x20pas'+'s.');}),this['insideRend'+'erPass']=!(-0x3*-0x6+-0xf93+0x7*0x237),Q['popGpuMark'+'er'](this);}['endRenderP'+'ass'](_0x5c9db9){var _0x3ea6fd;Q['pushGpuMar'+'ker'](this,'END-PASS'),this['unbindVert'+'exArray']();const _0x5dda49=this['renderTarg'+'et'],_0x496648=_0x5c9db9['colorArray'+'Ops']['length'];if(_0x5dda49){ga['length']=-0xcc+-0x61*0x2+0x18e*0x1;const _0xd9b440=this['gl'];for(let _0x28609e=0x1240+0xd8f+-0x1fcf;_0x28609e<_0x496648;_0x28609e++){const _0x316e59=_0x5c9db9['colorArray'+'Ops'][_0x28609e];_0x316e59['store']||_0x316e59['resolve']||ga['push'](_0xd9b440['COLOR_ATTA'+'CHMENT0']+_0x28609e);}_0x5dda49!==this['backBuffer']&&(_0x5c9db9['depthStenc'+'ilOps']['storeDepth']||ga['push'](_0xd9b440['DEPTH_ATTA'+'CHMENT']),_0x5c9db9['depthStenc'+'ilOps']['storeStenc'+'il']||ga['push'](_0xd9b440['STENCIL_AT'+'TACHMENT'])),ga['length']>0x4*-0x500+0x13*-0xb+-0x14d1*-0x1&&_0x5c9db9['fullSizeCl'+'earRect']&&_0xd9b440['invalidate'+'Framebuffe'+'r'](_0xd9b440['DRAW_FRAME'+'BUFFER'],ga),_0x496648&&((_0x3ea6fd=_0x5c9db9['colorOps'])!=null&&_0x3ea6fd['resolve'])&&_0x5c9db9['samples']>-0xbb*-0x14+0x745+-0x38*0x64&&_0x5dda49['autoResolv'+'e']&&_0x5dda49['resolve'](!(-0x2014*-0x1+0x16be+-0x3*0x1246),!(0x6*0x601+0x39*0x1d+-0x2a7a)),_0x5dda49['depthBuffe'+'r']&&_0x5c9db9['depthStenc'+'ilOps']['resolveDep'+'th']&&_0x5c9db9['samples']>0x5e+-0x1f3+0x196&&_0x5dda49['autoResolv'+'e']&&_0x5dda49['resolve'](!(0xb3f+-0xd*0x12a+-0x6*-0xa6),!(-0x47d*0x8+0x7e0+-0x2*-0xe04));for(let _0x4c3777=-0x1f51*0x1+0x12c5*0x1+-0x16*-0x92;_0x4c3777<_0x496648;_0x4c3777++)if(_0x5c9db9['colorArray'+'Ops'][_0x4c3777]['genMipmaps']){const _0x23bb38=_0x5dda49['_colorBuff'+'ers'][_0x4c3777];_0x23bb38&&_0x23bb38['impl']['_glTexture']&&_0x23bb38['mipmaps']&&(Q['pushGpuMar'+'ker'](this,'MIPS'+_0x4c3777),this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0x1*-0x17ef+0x208*-0x1+-0xaf3*0x2)),this['bindTextur'+'e'](_0x23bb38),this['gl']['generateMi'+'pmap'](_0x23bb38['impl']['_glTarget']),Q['popGpuMark'+'er'](this));}}this['insideRend'+'erPass']=!(-0xe2f+-0xa7*-0x24+-0x1dc*0x5),Q['popGpuMark'+'er'](this),Q['popGpuMark'+'er'](this);}set['defaultFra'+'mebuffer'](_0xd4e9c3){this['_defaultFr'+'amebuffer']!==_0xd4e9c3&&(this['_defaultFr'+'amebuffer']=_0xd4e9c3,this['_defaultFr'+'amebufferC'+'hanged']=!(-0x1*0xa36+-0x31*0x8b+-0x19*-0x179));}get['defaultFra'+'mebuffer'](){return this['_defaultFr'+'amebuffer'];}['updateBegi'+'n'](){if(Q['pushGpuMar'+'ker'](this,'UPDATE-BEG'+'IN'),this['boundVao']=null,this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']){for(let _0x110520=0x1735+0x3d*0x63+-0x2ecc;_0x110520<this['textureUni'+'ts']['length'];++_0x110520)for(let _0xe8afcc=0x1*-0x1279+-0x3*0xb59+0x3484;_0xe8afcc<0x1*0x13d5+-0x536+-0xe9c;++_0xe8afcc)this['textureUni'+'ts'][_0x110520][_0xe8afcc]=null;}const _0x1611dc=this['renderTarg'+'et']??this['backBuffer'];M['assert'](_0x1611dc);const _0x504edd=_0x1611dc['impl'];_0x504edd['initialize'+'d']||this['initRender'+'Target'](_0x1611dc),this['setFramebu'+'ffer'](_0x504edd['_glFrameBu'+'ffer']),Q['popGpuMark'+'er'](this);}['updateEnd'](){Q['pushGpuMar'+'ker'](this,'UPDATE-END'),this['unbindVert'+'exArray']();const _0x35cc7d=this['renderTarg'+'et'];if(_0x35cc7d&&_0x35cc7d!==this['backBuffer']){_0x35cc7d['_samples']>-0x5ca*0x2+-0x8d4+0x37*0x5f&&_0x35cc7d['autoResolv'+'e']&&_0x35cc7d['resolve']();const _0x2143b3=_0x35cc7d['_colorBuff'+'er'];_0x2143b3&&_0x2143b3['impl']['_glTexture']&&_0x2143b3['mipmaps']&&(this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0x972+0x2*-0xbc+0xaeb)),this['bindTextur'+'e'](_0x2143b3),this['gl']['generateMi'+'pmap'](_0x2143b3['impl']['_glTarget']));}Q['popGpuMark'+'er'](this);}['setUnpackF'+'lipY'](_0x23912b){if(this['unpackFlip'+'Y']!==_0x23912b){this['unpackFlip'+'Y']=_0x23912b;const _0x28e7f3=this['gl'];_0x28e7f3['pixelStore'+'i'](_0x28e7f3['UNPACK_FLI'+'P_Y_WEBGL'],_0x23912b);}}['setUnpackP'+'remultiply'+'Alpha'](_0x5456ff){if(this['unpackPrem'+'ultiplyAlp'+'ha']!==_0x5456ff){this['unpackPrem'+'ultiplyAlp'+'ha']=_0x5456ff;const _0x4b4812=this['gl'];_0x4b4812['pixelStore'+'i'](_0x4b4812['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],_0x5456ff);}}['activeText'+'ure'](_0x27d307){this['textureUni'+'t']!==_0x27d307&&(this['gl']['activeText'+'ure'](this['gl']['TEXTURE0']+_0x27d307),this['textureUni'+'t']=_0x27d307);}['bindTextur'+'e'](_0x17d9a5){const _0x4182b9=_0x17d9a5['impl'],_0x526b9a=_0x4182b9['_glTarget'],_0x50565f=_0x4182b9['_glTexture'],_0x4c8f1c=this['textureUni'+'t'],_0x20d96b=this['targetToSl'+'ot'][_0x526b9a];this['textureUni'+'ts'][_0x4c8f1c][_0x20d96b]!==_0x50565f&&(this['gl']['bindTextur'+'e'](_0x526b9a,_0x50565f),this['textureUni'+'ts'][_0x4c8f1c][_0x20d96b]=_0x50565f);}['bindTextur'+'eOnUnit'](_0xe54ede,_0x4b2b8b){const _0x1e2125=_0xe54ede['impl'],_0x4bab49=_0x1e2125['_glTarget'],_0x2ba16f=_0x1e2125['_glTexture'],_0x195180=this['targetToSl'+'ot'][_0x4bab49];this['textureUni'+'ts'][_0x4b2b8b][_0x195180]!==_0x2ba16f&&(this['activeText'+'ure'](_0x4b2b8b),this['gl']['bindTextur'+'e'](_0x4bab49,_0x2ba16f),this['textureUni'+'ts'][_0x4b2b8b][_0x195180]=_0x2ba16f);}['setTexture'+'Parameters'](_0x1fff30){const _0x4ac3fc=this['gl'],_0x297355=_0x1fff30['impl']['dirtyParam'+'eterFlags'],_0x4bebb0=_0x1fff30['impl']['_glTarget'];if(_0x297355&RS){let _0x51cad1=_0x1fff30['_minFilter'];(!_0x1fff30['_mipmaps']||_0x1fff30['_compresse'+'d']&&_0x1fff30['_levels']['length']===-0x1*0xd13+-0x570+-0x4*-0x4a1)&&(_0x51cad1===xc||_0x51cad1===Tc?_0x51cad1=Te:(_0x51cad1===wc||_0x51cad1===ea)&&(_0x51cad1=_t)),_0x4ac3fc['texParamet'+'eri'](_0x4bebb0,_0x4ac3fc['TEXTURE_MI'+'N_FILTER'],this['glFilter'][_0x51cad1]);}if(_0x297355&OS&&_0x4ac3fc['texParamet'+'eri'](_0x4bebb0,_0x4ac3fc['TEXTURE_MA'+'G_FILTER'],this['glFilter'][_0x1fff30['_magFilter']]),_0x297355&FS&&_0x4ac3fc['texParamet'+'eri'](_0x4bebb0,_0x4ac3fc['TEXTURE_WR'+'AP_S'],this['glAddress'][_0x1fff30['_addressU']]),_0x297355&NS&&_0x4ac3fc['texParamet'+'eri'](_0x4bebb0,_0x4ac3fc['TEXTURE_WR'+'AP_T'],this['glAddress'][_0x1fff30['_addressV']]),_0x297355&kS&&_0x4ac3fc['texParamet'+'eri'](_0x4bebb0,_0x4ac3fc['TEXTURE_WR'+'AP_R'],this['glAddress'][_0x1fff30['_addressW']]),_0x297355&US&&_0x4ac3fc['texParamet'+'eri'](_0x4bebb0,_0x4ac3fc['TEXTURE_CO'+'MPARE_MODE'],_0x1fff30['_compareOn'+'Read']?_0x4ac3fc['COMPARE_RE'+'F_TO_TEXTU'+'RE']:_0x4ac3fc['NONE']),_0x297355&BS&&_0x4ac3fc['texParamet'+'eri'](_0x4bebb0,_0x4ac3fc['TEXTURE_CO'+'MPARE_FUNC'],this['glComparis'+'on'][_0x1fff30['_compareFu'+'nc']]),_0x297355&zS){const _0x58e26f=this['extTexture'+'FilterAnis'+'otropic'];_0x58e26f&&_0x4ac3fc['texParamet'+'erf'](_0x4bebb0,_0x58e26f['TEXTURE_MA'+'X_ANISOTRO'+'PY_EXT'],Y['clamp'](Math['round'](_0x1fff30['_anisotrop'+'y']),0xa4f*-0x2+-0xe16*0x1+0x22b5*0x1,this['maxAnisotr'+'opy']));}}['setTexture'](_0x5a5040,_0x2d9091){const _0x419383=_0x5a5040['impl'];_0x419383['_glTexture']||_0x419383['initialize'](this,_0x5a5040),_0x419383['dirtyParam'+'eterFlags']>0x628+0x566+0x2*-0x5c7||_0x5a5040['_needsUplo'+'ad']||_0x5a5040['_needsMipm'+'apsUpload']?(this['activeText'+'ure'](_0x2d9091),this['bindTextur'+'e'](_0x5a5040),_0x419383['dirtyParam'+'eterFlags']&&(this['setTexture'+'Parameters'](_0x5a5040),_0x419383['dirtyParam'+'eterFlags']=-0x33c+-0x1981+0x1*0x1cbd),(_0x5a5040['_needsUplo'+'ad']||_0x5a5040['_needsMipm'+'apsUpload'])&&(_0x419383['upload'](this,_0x5a5040),_0x5a5040['_needsUplo'+'ad']=!(0xd33+-0x43*-0x4f+-0x21df),_0x5a5040['_needsMipm'+'apsUpload']=!(0x3*0x881+0x18b8+-0x323a))):this['bindTextur'+'eOnUnit'](_0x5a5040,_0x2d9091);}['createVert'+'exArray'](_0x36f730){let _0x323852,_0x2d9574;const _0xb8d3ed=_0x36f730['length']>0x14f0+0x3ef+-0x425*0x6;if(_0xb8d3ed){_0x323852='';for(let _0xabf72f=0x248f+0x110b*0x1+-0x359a;_0xabf72f<_0x36f730['length'];_0xabf72f++){const _0x2b264b=_0x36f730[_0xabf72f];_0x323852+=_0x2b264b['id']+_0x2b264b['format']['renderingH'+'ash'];}_0x2d9574=this['_vaoMap']['get'](_0x323852);}if(!_0x2d9574){const _0xc24727=this['gl'];_0x2d9574=_0xc24727['createVert'+'exArray'](),_0xc24727['bindVertex'+'Array'](_0x2d9574),_0xc24727['bindBuffer'](_0xc24727['ELEMENT_AR'+'RAY_BUFFER'],null);let _0x207206=!(0x5b8+0x1f65+-0x251c);for(let _0x353840=0xd0*0x4+0x3b*-0x79+0x35*0x77;_0x353840<_0x36f730['length'];_0x353840++){const _0x26f275=_0x36f730[_0x353840];_0xc24727['bindBuffer'](_0xc24727['ARRAY_BUFF'+'ER'],_0x26f275['impl']['bufferId']);const _0x41e048=_0x26f275['format']['elements'];for(let _0x2f2bbc=0x94f*-0x1+-0x1fad+0x2*0x147e;_0x2f2bbc<_0x41e048['length'];_0x2f2bbc++){const _0x3e3c81=_0x41e048[_0x2f2bbc],_0x4f2fef=De[_0x3e3c81['name']];_0x4f2fef===0x1e23+0x4f4+-0x2317&&(_0x207206=!(0x1a12+-0xf27+-0x5*0x22f)),_0x3e3c81['asInt']?_0xc24727['vertexAttr'+'ibIPointer'](_0x4f2fef,_0x3e3c81['numCompone'+'nts'],this['glType'][_0x3e3c81['dataType']],_0x3e3c81['stride'],_0x3e3c81['offset']):_0xc24727['vertexAttr'+'ibPointer'](_0x4f2fef,_0x3e3c81['numCompone'+'nts'],this['glType'][_0x3e3c81['dataType']],_0x3e3c81['normalize'],_0x3e3c81['stride'],_0x3e3c81['offset']),_0xc24727['enableVert'+'exAttribAr'+'ray'](_0x4f2fef),_0x26f275['format']['instancing']&&_0xc24727['vertexAttr'+'ibDivisor'](_0x4f2fef,0x1ead*-0x1+-0x1d*0x136+0x41cc);}}_0xc24727['bindVertex'+'Array'](null),_0xc24727['bindBuffer'](_0xc24727['ARRAY_BUFF'+'ER'],null),_0xb8d3ed&&this['_vaoMap']['set'](_0x323852,_0x2d9574),_0x207206||M['warn']('No\x20vertex\x20'+'attribute\x20'+'is\x20mapped\x20'+'to\x20locatio'+'n\x200,\x20which'+'\x20might\x20cau'+'se\x20compati'+'bility\x20iss'+'ues\x20on\x20Saf'+'ari\x20on\x20Mac'+'OS\x20-\x20pleas'+'e\x20use\x20attr'+'ibute\x20SEMA'+'NTIC_POSIT'+'ION\x20or\x20SEM'+'ANTIC_ATTR'+'15');}return _0x2d9574;}['unbindVert'+'exArray'](){this['boundVao']&&(this['boundVao']=null,this['gl']['bindVertex'+'Array'](null));}['setBuffers'](_0x248974){const _0x466aa9=this['gl'];let _0x1f04c2;if(this['vertexBuff'+'ers']['length']===-0x183e+0x11ce*-0x1+0x2a0d){const _0x1ebe80=this['vertexBuff'+'ers'][0x1de5+-0x55b+-0xc45*0x2];M['assert'](_0x1ebe80['device']===this,'The\x20Vertex'+'Buffer\x20was'+'\x20not\x20creat'+'ed\x20using\x20c'+'urrent\x20Gra'+'phicsDevic'+'e'),_0x1ebe80['impl']['vao']||(_0x1ebe80['impl']['vao']=this['createVert'+'exArray'](this['vertexBuff'+'ers'])),_0x1f04c2=_0x1ebe80['impl']['vao'];}else _0x1f04c2=this['createVert'+'exArray'](this['vertexBuff'+'ers']);this['boundVao']!==_0x1f04c2&&(this['boundVao']=_0x1f04c2,_0x466aa9['bindVertex'+'Array'](_0x1f04c2));const _0x1a6eba=_0x248974?_0x248974['impl']['bufferId']:null;_0x466aa9['bindBuffer'](_0x466aa9['ELEMENT_AR'+'RAY_BUFFER'],_0x1a6eba);}['draw'](_0x5c8199,_0x5d39ad,_0x43c394,_0x4e4bb5,_0x386005=!(-0x18*0xaa+-0x1f92+0x2f82),_0x2af6f2=!(-0xf07*-0x1+-0x1c5+0x1*-0xd42)){const _0x824220=this['shader'];if(_0x824220&&(this['activateSh'+'ader'](),this['shaderVali'+'d'])){const _0x599cf0=this['gl'];_0x386005&&(M['call'](()=>{var _0x44a594,_0x59bbd6;return this['validateAt'+'tributes'](this['shader'],(_0x44a594=this['vertexBuff'+'ers'][-0xb7a+0x1a*-0x70+0x82*0x2d])==null?void(0x1*0x15cd+-0x2e1*0x1+-0x12ec):_0x44a594['format'],(_0x59bbd6=this['vertexBuff'+'ers'][-0x1*0x189b+0x3*-0xfb+0x1b8d])==null?void(0x1*-0x2078+-0xa27+-0x2a9f*-0x1):_0x59bbd6['format']);}),this['setBuffers'](_0x5d39ad));let _0x3d5381=0x26ba+-0x1*0x166d+-0x3*0x56f;const _0x5c636e=_0x824220['impl']['samplers'];for(let _0x4adbd9=-0x1f*-0x6b+-0x1f24+0x122f,_0x1429d6=_0x5c636e['length'];_0x4adbd9<_0x1429d6;_0x4adbd9++){const _0x349411=_0x5c636e[_0x4adbd9];let _0x4852c1=_0x349411['scopeId']['value'];if(!_0x4852c1){const _0x23adf1=_0x349411['scopeId']['name'];M['assert'](_0x23adf1!=='texture_gr'+'abPass','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27texture'+'_grabPass\x27'+'\x20is\x20not\x20lo'+'nger\x20suppo'+'rted,\x20use\x20'+'\x27uSceneCol'+'orMap\x27\x20ins'+'tead'),M['assert'](_0x23adf1!=='uDepthMap','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27uDepthM'+'ap\x27\x20is\x20not'+'\x20longer\x20su'+'pported,\x20u'+'se\x20\x27uScene'+'DepthMap\x27\x20'+'instead'),_0x23adf1==='uSceneDept'+'hMap'&&(M['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x4852c1=Kr(this,'white')),_0x23adf1==='uSceneColo'+'rMap'&&(M['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x4852c1=Kr(this,'pink')),_0x4852c1||(M['errorOnce']('Shader\x20'+_0x824220['name']+'\x20requires\x20'+_0x23adf1+('\x20texture\x20w'+'hich\x20was\x20n'+'ot\x20set.\x20Re'+'ndering\x20[')+Q['toString']()+']',_0x824220),_0x4852c1=Kr(this,'pink'));}if(_0x4852c1 instanceof _e){const _0x5a4a5b=_0x4852c1;this['setTexture'](_0x5a4a5b,_0x3d5381),this['renderTarg'+'et']&&this['renderTarg'+'et']['_samples']<0x24e8+-0x3*0x191+-0x2033&&(this['renderTarg'+'et']['colorBuffe'+'r']&&this['renderTarg'+'et']['colorBuffe'+'r']===_0x5a4a5b?M['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20color\x20b'+'uffer\x20as\x20a'+'\x20texture',{'renderTarget':this['renderTarg'+'et'],'texture':_0x5a4a5b}):this['renderTarg'+'et']['depthBuffe'+'r']&&this['renderTarg'+'et']['depthBuffe'+'r']===_0x5a4a5b&&M['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20depth\x20b'+'uffer\x20as\x20a'+'\x20texture',{'texture':_0x5a4a5b})),_0x349411['slot']!==_0x3d5381&&(_0x599cf0['uniform1i'](_0x349411['locationId'],_0x3d5381),_0x349411['slot']=_0x3d5381),_0x3d5381++;}else{_0x349411['array']['length']=0x14d5+-0x193a+-0x465*-0x1;const _0x21e356=_0x4852c1['length'];for(let _0x2f826e=0x143*0x2+0xf2*0xe+-0x2*0x7e1;_0x2f826e<_0x21e356;_0x2f826e++){const _0xcb21f7=_0x4852c1[_0x2f826e];this['setTexture'](_0xcb21f7,_0x3d5381),_0x349411['array'][_0x2f826e]=_0x3d5381,_0x3d5381++;}_0x599cf0['uniform1iv'](_0x349411['locationId'],_0x349411['array']);}}const _0x38d440=_0x824220['impl']['uniforms'];for(let _0x252fc1=-0x1a1b+-0x7b1*0x3+0xa*0x4eb,_0x42c6ef=_0x38d440['length'];_0x252fc1<_0x42c6ef;_0x252fc1++){const _0x4240d6=_0x38d440[_0x252fc1],_0x10945e=_0x4240d6['scopeId'],_0x1f3ea1=_0x4240d6['version'],_0x5346c3=_0x10945e['versionObj'+'ect']['version'];if(_0x1f3ea1['globalId']!==_0x5346c3['globalId']||_0x1f3ea1['revision']!==_0x5346c3['revision']){_0x1f3ea1['globalId']=_0x5346c3['globalId'],_0x1f3ea1['revision']=_0x5346c3['revision'];const _0x548272=_0x10945e['value'];_0x548272!=null?this['commitFunc'+'tion'][_0x4240d6['dataType']](_0x4240d6,_0x548272):M['warnOnce']('Shader\x20['+_0x824220['label']+(']\x20requires'+'\x20uniform\x20[')+_0x4240d6['scopeId']['name']+(']\x20which\x20ha'+'s\x20not\x20been'+'\x20set,\x20whil'+'e\x20renderin'+'g\x20[')+Q['toString']()+']');}}this['transformF'+'eedbackBuf'+'fer']&&(_0x599cf0['bindBuffer'+'Base'](_0x599cf0['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x42b+-0x1*-0xbe3+-0x26*0x34,this['transformF'+'eedbackBuf'+'fer']['impl']['bufferId']),_0x599cf0['beginTrans'+'formFeedba'+'ck'](_0x599cf0['POINTS']));const _0x417cae=this['glPrimitiv'+'e'][_0x5c8199['type']],_0x38141c=_0x5c8199['count'];if(_0x5c8199['indexed']){M['assert'](_0x5d39ad['device']===this,'The\x20IndexB'+'uffer\x20was\x20'+'not\x20create'+'d\x20using\x20cu'+'rrent\x20Grap'+'hicsDevice');const _0x4a481f=_0x5d39ad['impl']['glFormat'],_0x1b35ed=_0x5c8199['base']*_0x5d39ad['bytesPerIn'+'dex'];_0x43c394>-0x1f2*-0xe+0x42+-0xdbf*0x2?_0x599cf0['drawElemen'+'tsInstance'+'d'](_0x417cae,_0x38141c,_0x4a481f,_0x1b35ed,_0x43c394):_0x599cf0['drawElemen'+'ts'](_0x417cae,_0x38141c,_0x4a481f,_0x1b35ed);}else{const _0xfd16fe=_0x5c8199['base'];_0x43c394>-0x3*0xab5+-0x6af+0x1367*0x2?_0x599cf0['drawArrays'+'Instanced'](_0x417cae,_0xfd16fe,_0x38141c,_0x43c394):_0x599cf0['drawArrays'](_0x417cae,_0xfd16fe,_0x38141c);}this['transformF'+'eedbackBuf'+'fer']&&(_0x599cf0['endTransfo'+'rmFeedback'](),_0x599cf0['bindBuffer'+'Base'](_0x599cf0['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x89*0x2+0x3*0xfb+-0x1*0x1df,null)),this['_drawCalls'+'PerFrame']++,this['_primsPerF'+'rame'][_0x5c8199['type']]+=_0x5c8199['count']*(_0x43c394>0x1*-0x22+-0x8a*0x1+0xad?_0x43c394:-0x18f5+-0x26d6+0x3fcc);}_0x2af6f2&&this['clearVerte'+'xBuffer']();}['clear'](_0x17de0a){const _0x5b7a4d=this['defaultCle'+'arOptions'];_0x17de0a=_0x17de0a||_0x5b7a4d;const _0x34d848=_0x17de0a['flags']??_0x5b7a4d['flags'];if(_0x34d848!==-0x1*-0x2f+0x2246+-0x2275){const _0x564586=this['gl'];if(_0x34d848&bo){const _0x2116d7=_0x17de0a['color']??_0x5b7a4d['color'],_0x3a8c4d=_0x2116d7[-0x116e+0x4d*-0x56+0x2b4c],_0x1204b8=_0x2116d7[0x2572+0x120d+-0x377e],_0x4290ed=_0x2116d7[0x99c+0x1dbd+-0x2757],_0x319899=_0x2116d7[0x1c2*0x11+-0xe2f+-0xfb0],_0x1d4c26=this['clearColor'];(_0x3a8c4d!==_0x1d4c26['r']||_0x1204b8!==_0x1d4c26['g']||_0x4290ed!==_0x1d4c26['b']||_0x319899!==_0x1d4c26['a'])&&(this['gl']['clearColor'](_0x3a8c4d,_0x1204b8,_0x4290ed,_0x319899),this['clearColor']['set'](_0x3a8c4d,_0x1204b8,_0x4290ed,_0x319899)),this['setBlendSt'+'ate'](Ct['NOBLEND']);}if(_0x34d848&Co){const _0x5be409=_0x17de0a['depth']??_0x5b7a4d['depth'];_0x5be409!==this['clearDepth']&&(this['gl']['clearDepth'](_0x5be409),this['clearDepth']=_0x5be409),this['setDepthSt'+'ate'](Kt['WRITEDEPTH']);}if(_0x34d848&Ih){const _0x2710e0=_0x17de0a['stencil']??_0x5b7a4d['stencil'];_0x2710e0!==this['clearStenc'+'il']&&(this['gl']['clearStenc'+'il'](_0x2710e0),this['clearStenc'+'il']=_0x2710e0),_0x564586['stencilMas'+'k'](0xaeb+0xb1*0x2f+-0x2a6b),this['stencilWri'+'teMaskFron'+'t']=-0x7b8+0x2*-0x116c+0x2b8f,this['stencilWri'+'teMaskBack']=0x23fc+-0x2f3*0x3+-0x1a24;}_0x564586['clear'](this['glClearFla'+'g'][_0x34d848]);}}['submit'](){this['gl']['flush']();}['readPixels'](_0x2ab8b7,_0x19d447,_0x1f95c2,_0x128bc,_0x23fadc){const _0x454eba=this['gl'];_0x454eba['readPixels'](_0x2ab8b7,_0x19d447,_0x1f95c2,_0x128bc,_0x454eba['RGBA'],_0x454eba['UNSIGNED_B'+'YTE'],_0x23fadc);}['clientWait'+'Async'](_0x45cd2f,_0x4da60f){const _0x53a77b=this['gl'],_0x55e35d=_0x53a77b['fenceSync'](_0x53a77b['SYNC_GPU_C'+'OMMANDS_CO'+'MPLETE'],-0x8*0x3dd+-0x20a1+0x3f89);return this['submit'](),new Promise((_0x3b1c4a,_0x3059be)=>{function _0x1dc5e5(){const _0x5bd6b3=_0x53a77b['clientWait'+'Sync'](_0x55e35d,_0x45cd2f,0x25a+-0x142f+0x11d5);_0x5bd6b3===_0x53a77b['TIMEOUT_EX'+'PIRED']?setTimeout(_0x1dc5e5,_0x4da60f):(_0x53a77b['deleteSync'](_0x55e35d),_0x5bd6b3===_0x53a77b['WAIT_FAILE'+'D']?_0x3059be(new Error('webgl\x20clie'+'ntWaitSync'+'\x20sync\x20fail'+'ed')):_0x3b1c4a());}_0x1dc5e5();});}async['readPixels'+'Async'](_0x44014a,_0x18687d,_0x475067,_0x562ae8,_0x4a3d31){var _0xecdedc;const _0x28f1f4=this['gl'],_0xcf1761=(_0xecdedc=this['renderTarg'+'et']['colorBuffe'+'r'])==null?void(0xdb6+-0x134d+0x9f*0x9):_0xecdedc['impl'],_0x39781a=(_0xcf1761==null?void(0xe38+0x5*0x36d+-0x1f59):_0xcf1761['_glFormat'])??_0x28f1f4['RGBA'],_0x265b57=(_0xcf1761==null?void(0x187a+0x1410+-0x2c8a):_0xcf1761['_glPixelTy'+'pe'])??_0x28f1f4['UNSIGNED_B'+'YTE'],_0x25fa69=_0x28f1f4['createBuff'+'er']();return _0x28f1f4['bindBuffer'](_0x28f1f4['PIXEL_PACK'+'_BUFFER'],_0x25fa69),_0x28f1f4['bufferData'](_0x28f1f4['PIXEL_PACK'+'_BUFFER'],_0x4a3d31['byteLength'],_0x28f1f4['STREAM_REA'+'D']),_0x28f1f4['readPixels'](_0x44014a,_0x18687d,_0x475067,_0x562ae8,_0x39781a,_0x265b57,-0x1*0x17+-0x1c61+0x1c78),_0x28f1f4['bindBuffer'](_0x28f1f4['PIXEL_PACK'+'_BUFFER'],null),await this['clientWait'+'Async'](-0x11b1*0x2+-0x2*0x2a+-0x28d*-0xe,-0x1e79+0x4b*-0x6d+0x3e78),_0x28f1f4['bindBuffer'](_0x28f1f4['PIXEL_PACK'+'_BUFFER'],_0x25fa69),_0x28f1f4['getBufferS'+'ubData'](_0x28f1f4['PIXEL_PACK'+'_BUFFER'],-0x1*-0x24c9+-0x1*-0x1391+-0x385a,_0x4a3d31),_0x28f1f4['bindBuffer'](_0x28f1f4['PIXEL_PACK'+'_BUFFER'],null),_0x28f1f4['deleteBuff'+'er'](_0x25fa69),_0x4a3d31;}['readTextur'+'eAsync'](_0x46d365,_0x222f54,_0x3ade74,_0x1e4917,_0x381d88,_0x10dab8){const _0x4b27f4=_0x10dab8['face']??-0x136c+-0x19da*0x1+0x90e*0x5,_0x521a2f=_0x10dab8['renderTarg'+'et']??new vt({'colorBuffer':_0x46d365,'depth':!(-0x2e*-0xd6+-0x2120+0x553*-0x1),'face':_0x4b27f4});M['assert'](_0x521a2f['colorBuffe'+'r']===_0x46d365);const _0x2a8cd0=new ArrayBuffer(Ui['calcLevelG'+'puSize'](_0x1e4917,_0x381d88,0x2104+0x1c7d+0x52*-0xc0,_0x46d365['_format'])),_0x422415=_0x10dab8['data']??new(TS(_0x46d365['_format']))(_0x2a8cd0);return this['setRenderT'+'arget'](_0x521a2f),this['initRender'+'Target'](_0x521a2f),new Promise((_0x2680b9,_0x29729a)=>{this['readPixels'+'Async'](_0x222f54,_0x3ade74,_0x1e4917,_0x381d88,_0x422415)['then'](_0x10c039=>{_0x10dab8['renderTarg'+'et']||_0x521a2f['destroy'](),_0x2680b9(_0x10c039);})['catch'](_0x29729a);});}async['writeTextu'+'reAsync'](_0x105205,_0x367d44,_0x34221d,_0x2fdbe6,_0x26ae85,_0x27a134){const _0x2926f2=this['gl'],_0x378183=_0x105205['impl'],_0x4b4408=(_0x378183==null?void(-0xba5+-0x15bf+0x2164):_0x378183['_glFormat'])??_0x2926f2['RGBA'],_0x2bc3a5=(_0x378183==null?void(0x24a*-0xb+-0x8*0x108+0x2*0x10b7):_0x378183['_glPixelTy'+'pe'])??_0x2926f2['UNSIGNED_B'+'YTE'],_0x5b2dd7=_0x2926f2['createBuff'+'er']();_0x2926f2['bindBuffer'](_0x2926f2['PIXEL_UNPA'+'CK_BUFFER'],_0x5b2dd7),_0x2926f2['bufferData'](_0x2926f2['PIXEL_UNPA'+'CK_BUFFER'],_0x27a134,_0x2926f2['STREAM_DRA'+'W']),_0x2926f2['bindTextur'+'e'](_0x2926f2['TEXTURE_2D'],_0x378183['_glTexture']),_0x2926f2['texSubImag'+'e2D'](_0x2926f2['TEXTURE_2D'],0x4dc+0x11ac+-0x1*0x1688,_0x367d44,_0x34221d,_0x2fdbe6,_0x26ae85,_0x4b4408,_0x2bc3a5,-0x1aec+-0x3*-0x367+0x10b7),_0x2926f2['bindBuffer'](_0x2926f2['PIXEL_UNPA'+'CK_BUFFER'],null),_0x105205['_needsUplo'+'ad']=!(0x93*-0x3+0x33d+-0x183),_0x105205['_mipmapsUp'+'loaded']=!(-0xc5*0x2f+-0x14fe*0x1+-0x6*-0x987),await this['clientWait'+'Async'](-0x4*-0x644+-0x3*-0xb29+-0x85d*0x7,-0x6d*-0x1+-0x753+0xb*0xa2);}['setAlphaTo'+'Coverage'](_0x32421b){this['alphaToCov'+'erage']!==_0x32421b&&(this['alphaToCov'+'erage']=_0x32421b,_0x32421b?this['gl']['enable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']):this['gl']['disable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']));}['setTransfo'+'rmFeedback'+'Buffer'](_0x92bca7){if(this['transformF'+'eedbackBuf'+'fer']!==_0x92bca7){this['transformF'+'eedbackBuf'+'fer']=_0x92bca7;const _0x16a511=this['gl'];_0x92bca7?(this['feedback']||(this['feedback']=_0x16a511['createTran'+'sformFeedb'+'ack']()),_0x16a511['bindTransf'+'ormFeedbac'+'k'](_0x16a511['TRANSFORM_'+'FEEDBACK'],this['feedback'])):_0x16a511['bindTransf'+'ormFeedbac'+'k'](_0x16a511['TRANSFORM_'+'FEEDBACK'],null);}}['setRaster'](_0x2a3821){this['raster']!==_0x2a3821&&(this['raster']=_0x2a3821,_0x2a3821?this['gl']['disable'](this['gl']['RASTERIZER'+'_DISCARD']):this['gl']['enable'](this['gl']['RASTERIZER'+'_DISCARD']));}['setStencil'+'Test'](_0x85993c){if(this['stencil']!==_0x85993c){const _0x55371a=this['gl'];_0x85993c?_0x55371a['enable'](_0x55371a['STENCIL_TE'+'ST']):_0x55371a['disable'](_0x55371a['STENCIL_TE'+'ST']),this['stencil']=_0x85993c;}}['setStencil'+'Func'](_0x2de98e,_0x396a65,_0x4c8eef){(this['stencilFun'+'cFront']!==_0x2de98e||this['stencilRef'+'Front']!==_0x396a65||this['stencilMas'+'kFront']!==_0x4c8eef||this['stencilFun'+'cBack']!==_0x2de98e||this['stencilRef'+'Back']!==_0x396a65||this['stencilMas'+'kBack']!==_0x4c8eef)&&(this['gl']['stencilFun'+'c'](this['glComparis'+'on'][_0x2de98e],_0x396a65,_0x4c8eef),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=_0x2de98e,this['stencilRef'+'Front']=this['stencilRef'+'Back']=_0x396a65,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=_0x4c8eef);}['setStencil'+'FuncFront'](_0xd20794,_0x343631,_0x19b31b){if(this['stencilFun'+'cFront']!==_0xd20794||this['stencilRef'+'Front']!==_0x343631||this['stencilMas'+'kFront']!==_0x19b31b){const _0x1cddf6=this['gl'];_0x1cddf6['stencilFun'+'cSeparate'](_0x1cddf6['FRONT'],this['glComparis'+'on'][_0xd20794],_0x343631,_0x19b31b),this['stencilFun'+'cFront']=_0xd20794,this['stencilRef'+'Front']=_0x343631,this['stencilMas'+'kFront']=_0x19b31b;}}['setStencil'+'FuncBack'](_0x11dc10,_0x5352e4,_0x3297dd){if(this['stencilFun'+'cBack']!==_0x11dc10||this['stencilRef'+'Back']!==_0x5352e4||this['stencilMas'+'kBack']!==_0x3297dd){const _0x26280c=this['gl'];_0x26280c['stencilFun'+'cSeparate'](_0x26280c['BACK'],this['glComparis'+'on'][_0x11dc10],_0x5352e4,_0x3297dd),this['stencilFun'+'cBack']=_0x11dc10,this['stencilRef'+'Back']=_0x5352e4,this['stencilMas'+'kBack']=_0x3297dd;}}['setStencil'+'Operation'](_0x251421,_0x263151,_0x54a066,_0x2a100f){(this['stencilFai'+'lFront']!==_0x251421||this['stencilZfa'+'ilFront']!==_0x263151||this['stencilZpa'+'ssFront']!==_0x54a066||this['stencilFai'+'lBack']!==_0x251421||this['stencilZfa'+'ilBack']!==_0x263151||this['stencilZpa'+'ssBack']!==_0x54a066)&&(this['gl']['stencilOp'](this['glStencilO'+'p'][_0x251421],this['glStencilO'+'p'][_0x263151],this['glStencilO'+'p'][_0x54a066]),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=_0x251421,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=_0x263151,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=_0x54a066),(this['stencilWri'+'teMaskFron'+'t']!==_0x2a100f||this['stencilWri'+'teMaskBack']!==_0x2a100f)&&(this['gl']['stencilMas'+'k'](_0x2a100f),this['stencilWri'+'teMaskFron'+'t']=_0x2a100f,this['stencilWri'+'teMaskBack']=_0x2a100f);}['setStencil'+'OperationF'+'ront'](_0x285cd7,_0x3d3f9d,_0x4b4504,_0x477e58){(this['stencilFai'+'lFront']!==_0x285cd7||this['stencilZfa'+'ilFront']!==_0x3d3f9d||this['stencilZpa'+'ssFront']!==_0x4b4504)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['FRONT'],this['glStencilO'+'p'][_0x285cd7],this['glStencilO'+'p'][_0x3d3f9d],this['glStencilO'+'p'][_0x4b4504]),this['stencilFai'+'lFront']=_0x285cd7,this['stencilZfa'+'ilFront']=_0x3d3f9d,this['stencilZpa'+'ssFront']=_0x4b4504),this['stencilWri'+'teMaskFron'+'t']!==_0x477e58&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['FRONT'],_0x477e58),this['stencilWri'+'teMaskFron'+'t']=_0x477e58);}['setStencil'+'OperationB'+'ack'](_0x45dc56,_0x459dde,_0x3fe207,_0x16680f){(this['stencilFai'+'lBack']!==_0x45dc56||this['stencilZfa'+'ilBack']!==_0x459dde||this['stencilZpa'+'ssBack']!==_0x3fe207)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['BACK'],this['glStencilO'+'p'][_0x45dc56],this['glStencilO'+'p'][_0x459dde],this['glStencilO'+'p'][_0x3fe207]),this['stencilFai'+'lBack']=_0x45dc56,this['stencilZfa'+'ilBack']=_0x459dde,this['stencilZpa'+'ssBack']=_0x3fe207),this['stencilWri'+'teMaskBack']!==_0x16680f&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['BACK'],_0x16680f),this['stencilWri'+'teMaskBack']=_0x16680f);}['setBlendSt'+'ate'](_0x27f8c9){const _0x54e15f=this['blendState'];if(!_0x54e15f['equals'](_0x27f8c9)){const _0x2fc7ac=this['gl'],{blend:_0x44b78d,colorOp:_0x463278,alphaOp:_0x4707ae,colorSrcFactor:_0x4d9a2d,colorDstFactor:_0x503eb2,alphaSrcFactor:_0xf535c5,alphaDstFactor:_0x2fd3a6}=_0x27f8c9;if(_0x54e15f['blend']!==_0x44b78d&&(_0x44b78d?_0x2fc7ac['enable'](_0x2fc7ac['BLEND']):_0x2fc7ac['disable'](_0x2fc7ac['BLEND'])),_0x54e15f['colorOp']!==_0x463278||_0x54e15f['alphaOp']!==_0x4707ae){const _0x2564b7=this['glBlendEqu'+'ation'];_0x2fc7ac['blendEquat'+'ionSeparat'+'e'](_0x2564b7[_0x463278],_0x2564b7[_0x4707ae]);}(_0x54e15f['colorSrcFa'+'ctor']!==_0x4d9a2d||_0x54e15f['colorDstFa'+'ctor']!==_0x503eb2||_0x54e15f['alphaSrcFa'+'ctor']!==_0xf535c5||_0x54e15f['alphaDstFa'+'ctor']!==_0x2fd3a6)&&_0x2fc7ac['blendFuncS'+'eparate'](this['glBlendFun'+'ctionColor'][_0x4d9a2d],this['glBlendFun'+'ctionColor'][_0x503eb2],this['glBlendFun'+'ctionAlpha'][_0xf535c5],this['glBlendFun'+'ctionAlpha'][_0x2fd3a6]),_0x54e15f['allWrite']!==_0x27f8c9['allWrite']&&this['gl']['colorMask'](_0x27f8c9['redWrite'],_0x27f8c9['greenWrite'],_0x27f8c9['blueWrite'],_0x27f8c9['alphaWrite']),_0x54e15f['copy'](_0x27f8c9);}}['setBlendCo'+'lor'](_0x26e549,_0x3757c5,_0x27c6b8,_0x2bd5d2){const _0x5083c1=this['blendColor'];(_0x26e549!==_0x5083c1['r']||_0x3757c5!==_0x5083c1['g']||_0x27c6b8!==_0x5083c1['b']||_0x2bd5d2!==_0x5083c1['a'])&&(this['gl']['blendColor'](_0x26e549,_0x3757c5,_0x27c6b8,_0x2bd5d2),_0x5083c1['set'](_0x26e549,_0x3757c5,_0x27c6b8,_0x2bd5d2));}['setStencil'+'State'](_0x15c612,_0x4e580c){_0x15c612||_0x4e580c?(this['setStencil'+'Test'](!(0x10af*-0x2+0x1c*0xca+0xb46)),_0x15c612===_0x4e580c?(this['setStencil'+'Func'](_0x15c612['func'],_0x15c612['ref'],_0x15c612['readMask']),this['setStencil'+'Operation'](_0x15c612['fail'],_0x15c612['zfail'],_0x15c612['zpass'],_0x15c612['writeMask'])):(_0x15c612??(_0x15c612=ai['DEFAULT']),this['setStencil'+'FuncFront'](_0x15c612['func'],_0x15c612['ref'],_0x15c612['readMask']),this['setStencil'+'OperationF'+'ront'](_0x15c612['fail'],_0x15c612['zfail'],_0x15c612['zpass'],_0x15c612['writeMask']),_0x4e580c??(_0x4e580c=ai['DEFAULT']),this['setStencil'+'FuncBack'](_0x4e580c['func'],_0x4e580c['ref'],_0x4e580c['readMask']),this['setStencil'+'OperationB'+'ack'](_0x4e580c['fail'],_0x4e580c['zfail'],_0x4e580c['zpass'],_0x4e580c['writeMask']))):this['setStencil'+'Test'](!(-0x15d6+0x2108+0x3*-0x3bb));}['setDepthSt'+'ate'](_0x1a2fb5){const _0x452652=this['depthState'];if(!_0x452652['equals'](_0x1a2fb5)){const _0x51b098=this['gl'],_0x7c3973=_0x1a2fb5['write'];_0x452652['write']!==_0x7c3973&&_0x51b098['depthMask'](_0x7c3973);let {func:_0x21d0e6,test:_0x2de82c}=_0x1a2fb5;!_0x2de82c&&_0x7c3973&&(_0x2de82c=!(-0x1*-0x1fbb+0x2089+-0x4044*0x1),_0x21d0e6=Ni),_0x452652['func']!==_0x21d0e6&&_0x51b098['depthFunc'](this['glComparis'+'on'][_0x21d0e6]),_0x452652['test']!==_0x2de82c&&(_0x2de82c?_0x51b098['enable'](_0x51b098['DEPTH_TEST']):_0x51b098['disable'](_0x51b098['DEPTH_TEST']));const {depthBias:_0x262ea9,depthBiasSlope:_0x2d35f4}=_0x1a2fb5;_0x262ea9||_0x2d35f4?(this['depthBiasE'+'nabled']||(this['depthBiasE'+'nabled']=!(-0x1dc1+-0x9*0x170+0x2ab1),this['gl']['enable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x51b098['polygonOff'+'set'](_0x2d35f4,_0x262ea9)):this['depthBiasE'+'nabled']&&(this['depthBiasE'+'nabled']=!(-0x149c*0x1+0x1bf+0x15*0xe6),this['gl']['disable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x452652['copy'](_0x1a2fb5);}}['setCullMod'+'e'](_0x39b86c){if(this['cullMode']!==_0x39b86c){if(_0x39b86c===xt)this['gl']['disable'](this['gl']['CULL_FACE']);else{this['cullMode']===xt&&this['gl']['enable'](this['gl']['CULL_FACE']);const _0x38a8e4=this['glCull'][_0x39b86c];this['cullFace']!==_0x38a8e4&&(this['gl']['cullFace'](_0x38a8e4),this['cullFace']=_0x38a8e4);}this['cullMode']=_0x39b86c;}}['setShader'](_0x593e93,_0x4a2d60=!(0xe69*-0x1+0x18c4+-0x6a*0x19)){_0x593e93!==this['shader']&&(this['shader']=_0x593e93,this['shaderAsyn'+'cCompile']=_0x4a2d60,this['shaderVali'+'d']=void(-0xb1b*-0x1+-0x2ef+-0x82c),this['_shaderSwi'+'tchesPerFr'+'ame']++);}['activateSh'+'ader'](){const {shader:_0x4f2c55}=this,{impl:_0x1c384b}=_0x4f2c55;this['shaderVali'+'d']===void(-0x3d6*0x4+0x1*0x1ed+0x5*0x2af)&&(_0x4f2c55['failed']?this['shaderVali'+'d']=!(-0x401+0x1*0x2284+-0x6e*0x47):_0x4f2c55['ready']||(this['shaderAsyn'+'cCompile']?_0x1c384b['isLinked'](this)?_0x1c384b['finalize'](this,_0x4f2c55)||(_0x4f2c55['failed']=!(-0x2*0x1123+-0xf5+0x233b*0x1),this['shaderVali'+'d']=!(-0x1dac+-0x67d*-0x4+0x1*0x3b9)):this['shaderVali'+'d']=!(0x13a6+-0x2515+0x1170):_0x1c384b['finalize'](this,_0x4f2c55)||(_0x4f2c55['failed']=!(0xb*0x123+-0x1668+0x9e7),this['shaderVali'+'d']=!(-0x7b7*-0x2+-0x1*-0x1f2f+-0x2e9c)))),this['shaderVali'+'d']===void(0x1eea+0x18*-0xb3+-0xe22)&&(this['gl']['useProgram'](_0x1c384b['glProgram']),this['shaderVali'+'d']=!(-0x1*-0x10b7+-0xd55+-0x362));}['clearVerte'+'xArrayObje'+'ctCache'](){const _0x556152=this['gl'];this['_vaoMap']['forEach']((_0xfed7bd,_0x43412b,_0x1558c9)=>{_0x556152['deleteVert'+'exArray'](_0xfed7bd);}),this['_vaoMap']['clear']();}set['fullscreen'](_0x2118fe){_0x2118fe?this['gl']['canvas']['requestFul'+'lscreen']():document['exitFullsc'+'reen']();}get['fullscreen'](){return!!document['fullscreen'+'Element'];}['debugLoseC'+'ontext'](_0xfab967=-0x5*-0x265+-0x1608+0xa73){const _0x2a1b6d=this['gl']['getExtensi'+'on']('WEBGL_lose'+'_context');_0x2a1b6d['loseContex'+'t'](),setTimeout(()=>_0x2a1b6d['restoreCon'+'text'](),_0xfab967);}}let _T=0xbc4+-0x23d6+0x1*0x1812;class dr{constructor(_0x275f87,_0x5b8157,_0xd462cb,_0x5a5930=ls,_0xdcce73,_0x198a4f){this['device']=_0x275f87,this['format']=_0x5b8157,this['numIndices']=_0xd462cb,this['usage']=_0x5a5930,this['id']=_T++,this['impl']=_0x275f87['createInde'+'xBufferImp'+'l'](this,_0x198a4f);const _0xcfbe71=vx[_0x5b8157];this['bytesPerIn'+'dex']=_0xcfbe71,this['numBytes']=this['numIndices']*_0xcfbe71,_0xdcce73?this['setData'](_0xdcce73):this['storage']=new ArrayBuffer(this['numBytes']),this['adjustVram'+'SizeTracki'+'ng'](_0x275f87['_vram'],this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x132172=this['device'],_0x248ab0=_0x132172['buffers']['indexOf'](this);_0x248ab0!==-(-0x836+0x25a6+0x5*-0x5e3)&&_0x132172['buffers']['splice'](_0x248ab0,0xca*-0x9+0xe2e+0x713*-0x1),this['device']['indexBuffe'+'r']===this&&(this['device']['indexBuffe'+'r']=null),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x132172),this['adjustVram'+'SizeTracki'+'ng'](_0x132172['_vram'],-this['storage']['byteLength']));}['adjustVram'+'SizeTracki'+'ng'](_0x234514,_0x576220){M['trace'](r0,this['id']+'\x20size:\x20'+_0x576220+'\x20vram.ib:\x20'+_0x234514['ib']+'\x20=>\x20'+(_0x234514['ib']+_0x576220)),_0x234514['ib']+=_0x576220;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getNumIndi'+'ces'](){return this['numIndices'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x181261){return _0x181261['byteLength']!==this['numBytes']?(M['error']('IndexBuffe'+'r:\x20wrong\x20i'+'nitial\x20dat'+'a\x20size:\x20ex'+'pected\x20'+this['numBytes']+',\x20got\x20'+_0x181261['byteLength']),!(0x1*-0x4ff+0x4*-0x48d+0x1734)):(this['storage']=_0x181261,this['unlock'](),!(-0x285*-0xb+-0x14e3+0x4*-0x1b5));}['_lockTyped'+'Array'](){const _0x20b538=this['lock']();return this['format']===hr?new Uint32Array(_0x20b538):this['format']===zi?new Uint16Array(_0x20b538):new Uint8Array(_0x20b538);}['writeData'](_0x5b9986,_0x125d81){const _0x5f5b5b=this['_lockTyped'+'Array']();if(_0x5b9986['length']>_0x125d81){if(ArrayBuffer['isView'](_0x5b9986))_0x5b9986=_0x5b9986['subarray'](0x5*0x18a+0x17b*-0x5+-0x3*0x19,_0x125d81),_0x5f5b5b['set'](_0x5b9986);else{for(let _0x428116=0x1*0xe71+-0x9fb+0x2*-0x23b;_0x428116<_0x125d81;_0x428116++)_0x5f5b5b[_0x428116]=_0x5b9986[_0x428116];}}else _0x5f5b5b['set'](_0x5b9986);this['unlock']();}['readData'](_0x2012f6){const _0x115af3=this['_lockTyped'+'Array'](),_0x24ea03=this['numIndices'];if(ArrayBuffer['isView'](_0x2012f6))_0x2012f6['set'](_0x115af3);else{_0x2012f6['length']=-0xb39+-0x1700+0x2239;for(let _0x13bab1=-0x1ef3+-0x53*0x3+0xc*0x2a9;_0x13bab1<_0x24ea03;_0x13bab1++)_0x2012f6[_0x13bab1]=_0x115af3[_0x13bab1];}return _0x24ea03;}}class gT{constructor(){h(this,'clearValue',new ie(-0x2287+0xd*0x23d+0x2*0x2b7,0x3f5+0xde4+-0x11d9,0xe41+-0xe91+0x4*0x14,0x51b*-0x7+0x114c+0x1272)),h(this,'clearValue'+'Linear',new ie(-0x88e+-0x26ff+-0x103*-0x2f,-0x157*-0x8+0x1f*0x5+-0x1*0xb53,0x60*0x25+-0x5ae*-0x2+-0x193c*0x1,-0x5c2+0x65d*0x6+-0x206b)),h(this,'clear',!(0x31*0x2a+0x1d4b*-0x1+0x1542)),h(this,'store',!(-0x17fd+0x8*0x45a+-0x2*0x569)),h(this,'resolve',!(-0x5*-0x32+0xfdd+0x9*-0x1df)),h(this,'genMipmaps',!(-0x2fd+-0xc9*-0x1b+0x1*-0x1235));}}class ST{constructor(){h(this,'clearDepth'+'Value',0x95*-0x3d+-0x18a9+0x1*0x3c2b),h(this,'clearStenc'+'ilValue',-0x1c67+0x22*-0xc9+0x3719),h(this,'clearDepth',!(0x17*-0x166+0x250f+-0x4e4)),h(this,'clearStenc'+'il',!(0x2652+-0x1473+-0x8ef*0x2)),h(this,'storeDepth',!(-0x171c+-0x1107+0x1c*0x16f)),h(this,'resolveDep'+'th',!(-0xbf+-0x1c94+0x1d54)),h(this,'storeStenc'+'il',!(0x2*0xc01+0xf07+-0x2708));}}class fs{constructor(_0x19c53b){h(this,'_name'),h(this,'device'),h(this,'_enabled',!(-0x5c5*-0x6+-0x7e2+-0x1abc)),h(this,'_skipStart',!(-0x265a+-0xc06+0x3261)),h(this,'_skipEnd',!(0x1cdc+-0x21f1*0x1+0x516)),h(this,'executeEna'+'bled',!(-0x26a7+-0x869+0x2f10)),h(this,'renderTarg'+'et'),h(this,'_options'),h(this,'samples',0x86b*0x3+-0x1e79+0x538),h(this,'colorArray'+'Ops',[]),h(this,'depthStenc'+'ilOps'),h(this,'requiresCu'+'bemaps',!(0x2e2+-0x1*-0x1c2+-0x4a4)),h(this,'fullSizeCl'+'earRect',!(-0xc05*-0x2+0x68*-0x17+-0x6*0x273)),h(this,'beforePass'+'es',[]),h(this,'afterPasse'+'s',[]),(M['assert'](_0x19c53b),this['device']=_0x19c53b);}get['colorOps'](){return this['colorArray'+'Ops'][0x1*0x137+-0x1c*0x118+-0x1*-0x1d69];}set['name'](_0x1beba1){this['_name']=_0x1beba1;}get['name'](){return this['_name']||(this['_name']=this['constructo'+'r']['name']),this['_name'];}set['scaleX'](_0x1b169d){M['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleX']=_0x1b169d;}get['scaleX'](){return this['_options']['scaleX'];}set['scaleY'](_0x10a9ca){M['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleY']=_0x10a9ca;}get['scaleY'](){return this['_options']['scaleY'];}set['options'](_0x2f746b){this['_options']=_0x2f746b,_0x2f746b&&(this['scaleX']=this['scaleX']??-0x1ed0+-0xa3d*-0x1+0x1494,this['scaleY']=this['scaleY']??0x1429+0xf18+-0xbc0*0x3);}get['options'](){return this['_options'];}['init'](_0x179000=null,_0x82692a){this['options']=_0x82692a,this['renderTarg'+'et']=_0x179000,this['samples']=Math['max'](this['renderTarg'+'et']?this['renderTarg'+'et']['samples']:this['device']['samples'],0xf5b*-0x1+0x250+0x686*0x2),this['allocateAt'+'tachments'](),this['postInit']();}['allocateAt'+'tachments'](){var _0x5d7dba,_0x5d392f,_0x5d08ce,_0x55c8b1;const _0x237164=this['renderTarg'+'et'];this['depthStenc'+'ilOps']=new ST(),_0x237164!=null&&_0x237164['depthBuffe'+'r']&&(this['depthStenc'+'ilOps']['storeDepth']=!(-0x27*-0x19+-0x1512+0x1143*0x1));const _0x197e4b=_0x237164?((_0x5d7dba=_0x237164['_colorBuff'+'ers'])==null?void(0x14bb+0x1323+-0x27de):_0x5d7dba['length'])??0x239*-0xb+0x21bf+-0x94c:0x1*-0x204d+0xeb9+0x1195;this['colorArray'+'Ops']['length']=-0x213f+0x40*0x5f+0x1*0x97f;for(let _0x3c17f4=0x1c76+0x2621+-0x4297;_0x3c17f4<_0x197e4b;_0x3c17f4++){const _0x53a863=new gT();this['colorArray'+'Ops'][_0x3c17f4]=_0x53a863,this['samples']===0x15f9+-0x3*0xb07+-0xb1d*-0x1&&(_0x53a863['store']=!(0xe79+0x1*0x193d+-0x1a*0x187),_0x53a863['resolve']=!(-0x1e2+-0x192*-0x2+-0x141));const _0x5ec26f=(_0x5d08ce=(_0x5d392f=this['renderTarg'+'et'])==null?void(0xb6f*0x3+0xa*0x2b+-0x23fb):_0x5d392f['_colorBuff'+'ers'])==null?void(0xc88+-0x19ed+0xd65):_0x5d08ce[_0x3c17f4];if((_0x55c8b1=this['renderTarg'+'et'])!=null&&_0x55c8b1['mipmaps']&&(_0x5ec26f!=null&&_0x5ec26f['mipmaps'])){const _0x517a4a=Ya(_0x5ec26f['_format']);_0x53a863['genMipmaps']=!_0x517a4a;}}}['destroy'](){}['postInit'](){}['frameUpdat'+'e'](){if(this['_options']&&this['renderTarg'+'et']){const _0x42bf64=this['_options']['resizeSour'+'ce']??this['device']['backBuffer'],_0x4d0b52=Math['floor'](_0x42bf64['width']*this['scaleX']),_0x178d0d=Math['floor'](_0x42bf64['height']*this['scaleY']);this['renderTarg'+'et']['resize'](_0x4d0b52,_0x178d0d);}}['before'](){}['execute'](){}['after'](){}['onEnable'](){}['onDisable'](){}set['enabled'](_0x5c86b7){this['_enabled']!==_0x5c86b7&&(this['_enabled']=_0x5c86b7,_0x5c86b7?this['onEnable']():this['onDisable']());}get['enabled'](){return this['_enabled'];}['setClearCo'+'lor'](_0x4afc1a){const _0x362d74=this['colorArray'+'Ops']['length'];for(let _0x19604b=-0x20c6+0xd5+-0xdd*-0x25;_0x19604b<_0x362d74;_0x19604b++){const _0x920633=this['colorArray'+'Ops'][_0x19604b];_0x4afc1a&&(_0x920633['clearValue']['copy'](_0x4afc1a),_0x920633['clearValue'+'Linear']['linear'](_0x4afc1a)),_0x920633['clear']=!!_0x4afc1a;}}['setClearDe'+'pth'](_0x12c414){_0x12c414&&(this['depthStenc'+'ilOps']['clearDepth'+'Value']=_0x12c414),this['depthStenc'+'ilOps']['clearDepth']=_0x12c414!==void(0x16*0x57+0xd*-0x21+0x9*-0xa5);}['setClearSt'+'encil'](_0x38a862){_0x38a862&&(this['depthStenc'+'ilOps']['clearStenc'+'ilValue']=_0x38a862),this['depthStenc'+'ilOps']['clearStenc'+'il']=_0x38a862!==void(-0xcab+0x650*0x1+0x1*0x65b);}['render'](){if(this['enabled']){const _0x1f7f04=this['device'],_0x355eeb=this['renderTarg'+'et']!==void(0x58*-0x48+-0xb*0xbb+0x20c9);M['call'](()=>{this['log'](_0x1f7f04,_0x1f7f04['renderPass'+'Index']);}),this['before'](),this['executeEna'+'bled']&&(_0x355eeb&&!this['_skipStart']&&_0x1f7f04['startRende'+'rPass'](this),this['execute'](),_0x355eeb&&!this['_skipEnd']&&_0x1f7f04['endRenderP'+'ass'](this)),this['after'](),_0x1f7f04['renderPass'+'Index']++;}}['log'](_0x4abf0e,_0x509b98=-0x1*0x127f+0x1*-0x17d+0x13fc){var _0x2c4d26,_0x52ff02,_0x21e0b8;if(ni['get'](Hm)||ni['get'](qa)){const _0x5e093c=this['renderTarg'+'et']??(this['renderTarg'+'et']===null?_0x4abf0e['backBuffer']:null),_0xd8dbb2=!!(_0x5e093c!=null&&_0x5e093c['impl']['assignedCo'+'lorTexture'])||(_0x5e093c==null?void(0x225*-0xf+0x1*-0x2090+-0x1*-0x40bb):_0x5e093c['impl']['suppliedCo'+'lorFramebu'+'ffer'])!==void(-0x1be4+-0xd76+0x295a),_0x5cb53=((_0x2c4d26=_0x5e093c==null?void(0x1f*-0x26+-0x1b87+-0x1*-0x2021):_0x5e093c['_colorBuff'+'ers'])==null?void(0xa51*0x2+-0x2d7*0x1+-0x11cb):_0x2c4d26['length'])??(_0xd8dbb2?-0x679+0xacf+0x455*-0x1:0x33*-0x8b+0x1*-0xffd+0x2bae),_0x5748ec=_0x5e093c==null?void(-0x1*-0x29a+-0x24f2*0x1+0x2258):_0x5e093c['depth'],_0x1f7223=_0x5e093c==null?void(0x306+-0x1a08+0x136*0x13):_0x5e093c['stencil'],_0x45bdda=_0x5e093c==null?void(0x26ab+0xb15+-0x31c*0x10):_0x5e093c['mipLevel'],_0x356d11=_0x5e093c?'\x20RT:\x20'+(_0x5e093c?_0x5e093c['name']:'NULL')+'\x20'+(_0x5cb53>0x26a0+0xb57*-0x1+-0x1b49?'[Color'+(_0x5cb53>0x2416+0x2306+0xa7*-0x6d?'\x20x\x20'+_0x5cb53:'')+']':'')+(_0x5748ec?'[Depth]':'')+(_0x1f7223?'[Stencil]':'')+'\x20'+_0x5e093c['width']+'\x20x\x20'+_0x5e093c['height']+(this['samples']>-0xda5*-0x1+-0xe56*0x1+0xb1?'\x20samples:\x20'+this['samples']:'')+(_0x45bdda>0x1f73+0x1073+-0x2fe6?'\x20mipLevel:'+'\x20'+_0x45bdda:''):'',_0x40bd96=this['_skipStart']?'++':_0x509b98['toString']()['padEnd'](-0x1*-0x14e+0xfc+0x4*-0x92,'\x20');M['trace'](Hm,_0x40bd96+':\x20'+this['name']['padEnd'](-0x151c*-0x1+0x17ce+-0x2cd6,'\x20')+(this['executeEna'+'bled']?'':'\x20DISABLED\x20')+_0x356d11['padEnd'](0x1fe5+-0x1489*-0x1+-0x3450));for(let _0x220ea9=0x1*-0x20e6+-0x1*-0xa8b+0x165b*0x1;_0x220ea9<_0x5cb53;_0x220ea9++){const _0x361ce2=this['colorArray'+'Ops'][_0x220ea9],_0xea1c2e=(_0x52ff02=Lt['get'](_0xd8dbb2?_0x4abf0e['backBuffer'+'Format']:_0x5e093c['getColorBu'+'ffer'](_0x220ea9)['format']))==null?void(0x275*-0x8+0x5*0x4c5+-0x431):_0x52ff02['name'];M['trace'](qa,'\x20\x20\x20\x20color['+_0x220ea9+']:\x20'+(_0x361ce2['clear']?'clear':'load')+'->'+(_0x361ce2['store']?'store':'discard')+'\x20'+(_0x361ce2['resolve']?'resolve\x20':'')+(_0x361ce2['genMipmaps']?'mipmaps\x20':'')+'\x20[format:\x20'+_0xea1c2e+']\x20'+(_0x361ce2['clear']?'[clear:\x20'+_0x361ce2['clearValue']['toString'](!(0x1f6e+0x1026+-0x2f94),!(0x674+-0x22d9+0x3*0x977))+']':''));}if(this['depthStenc'+'ilOps']){const _0x2eb1e8=''+(_0x5e093c['depthBuffe'+'r']?'\x20[format:\x20'+((_0x21e0b8=Lt['get'](_0x5e093c['depthBuffe'+'r']['format']))==null?void(0x1*-0x1771+-0x3b5*0x8+-0x3*-0x11b3):_0x21e0b8['name'])+']':'');_0x5748ec&&M['trace'](qa,'\x20\x20\x20\x20depthO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearDepth']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeDepth']?'store':'discard')+(this['depthStenc'+'ilOps']['resolveDep'+'th']?'\x20resolve':'')+_0x2eb1e8+(this['depthStenc'+'ilOps']['clearDepth']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearDepth'+'Value']+']':'')),_0x1f7223&&M['trace'](qa,'\x20\x20\x20\x20stencO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeStenc'+'il']?'store':'discard')+_0x2eb1e8+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearStenc'+'ilValue']+']':''));}}}}function yT(_0x5d70b9){this['array'][this['index']]=_0x5d70b9;}function vT(_0xf4a790,_0x541f56){this['array'][this['index']]=_0xf4a790,this['array'][this['index']+(0x1469+0x519+-0x1*0x1981)]=_0x541f56;}function xT(_0x3e142c,_0x341d07,_0x4a267a){this['array'][this['index']]=_0x3e142c,this['array'][this['index']+(-0x1*0x539+0x859*-0x3+-0xa17*-0x3)]=_0x341d07,this['array'][this['index']+(-0x9*0x2cb+0x1*0x5ee+0x1337)]=_0x4a267a;}function TT(_0x1cf019,_0x567b93,_0x5bf19e,_0x3c3f56){this['array'][this['index']]=_0x1cf019,this['array'][this['index']+(-0x2110+0x2445+-0x2*0x19a)]=_0x567b93,this['array'][this['index']+(0x1f5f+-0x1c5*-0x9+-0x2f4a*0x1)]=_0x5bf19e,this['array'][this['index']+(0x1d5e+0x209b*-0x1+0x340)]=_0x3c3f56;}function wT(_0x355f4e,_0x1d4e40,_0x410738){this['array'][_0x355f4e]=_0x1d4e40[_0x410738];}function ET(_0x443b41,_0x133e09,_0x346ba2){this['array'][_0x443b41]=_0x133e09[_0x346ba2],this['array'][_0x443b41+(0x127*0x21+-0x5*-0x3fd+0x13*-0x30d)]=_0x133e09[_0x346ba2+(-0x112e+0x3*-0x2ab+0x1930)];}function AT(_0xc641ab,_0x4ca537,_0x543dd4){this['array'][_0xc641ab]=_0x4ca537[_0x543dd4],this['array'][_0xc641ab+(-0x1*-0x1bff+-0x1291+0x1*-0x96d)]=_0x4ca537[_0x543dd4+(-0x1e68+0x264+0x957*0x3)],this['array'][_0xc641ab+(0x169c+-0x3*0xc31+0x49*0x31)]=_0x4ca537[_0x543dd4+(-0x1*-0x30d+-0x1034+0xd29)];}function bT(_0x2147ee,_0x24aaeb,_0x5067c5){this['array'][_0x2147ee]=_0x24aaeb[_0x5067c5],this['array'][_0x2147ee+(-0x2635+0x39*0xab+0x23)]=_0x24aaeb[_0x5067c5+(-0x1f87+0x151*-0x1+0x20d9)],this['array'][_0x2147ee+(-0xa2c*0x2+-0x19a3+0x2dfd)]=_0x24aaeb[_0x5067c5+(-0x70*-0x39+-0xe*-0x2af+-0x3e80)],this['array'][_0x2147ee+(0x1c5b+0x11d+-0x1d75)]=_0x24aaeb[_0x5067c5+(0x17*-0x185+-0x53*-0x5d+0x4cf*0x1)];}function CT(_0x438e36,_0x5c038a,_0x54a1f9){_0x5c038a[_0x54a1f9]=this['array'][_0x438e36];}function PT(_0x400ece,_0x1c12b5,_0x29314f){_0x1c12b5[_0x29314f]=this['array'][_0x400ece],_0x1c12b5[_0x29314f+(-0x1*0x1281+-0x2625+0x38a7)]=this['array'][_0x400ece+(0x1f78+0x14c6*0x1+0x137*-0x2b)];}function MT(_0x30a9a3,_0x2a41fa,_0x53ae75){_0x2a41fa[_0x53ae75]=this['array'][_0x30a9a3],_0x2a41fa[_0x53ae75+(0xb*0xbe+0x1b77+-0x23a0)]=this['array'][_0x30a9a3+(0x4b*-0x51+-0x2*0x272+-0x728*-0x4)],_0x2a41fa[_0x53ae75+(-0x19*0x49+-0x99f+0xa5*0x1a)]=this['array'][_0x30a9a3+(-0x336+0x1*0x1455+-0x111d*0x1)];}function IT(_0x31455a,_0x154a39,_0x397df3){_0x154a39[_0x397df3]=this['array'][_0x31455a],_0x154a39[_0x397df3+(-0x74*0x1+0xe8*0x2b+-0x2683)]=this['array'][_0x31455a+(-0x665*-0x6+0xe*0x278+-0x48ed)],_0x154a39[_0x397df3+(0xa8e+0x1*0xd25+-0x17b1)]=this['array'][_0x31455a+(-0x125b+0x1*0x20ff+0xea2*-0x1)],_0x154a39[_0x397df3+(-0x237f+0x1*0x264b+0x1*-0x2c9)]=this['array'][_0x31455a+(-0xaa4+-0x284*0x3+0x1233*0x1)];}class DT{constructor(_0x3a4d07,_0x482767,_0x1e4522){switch(this['index']=-0x46f+-0xee4+0x1353,this['numCompone'+'nts']=_0x482767['numCompone'+'nts'],_0x1e4522['interleave'+'d']?this['array']=new ln[_0x482767['dataType']](_0x3a4d07,_0x482767['offset']):this['array']=new ln[_0x482767['dataType']](_0x3a4d07,_0x482767['offset'],_0x1e4522['vertexCoun'+'t']*_0x482767['numCompone'+'nts']),this['stride']=_0x482767['stride']/this['array']['constructo'+'r']['BYTES_PER_'+'ELEMENT'],_0x482767['numCompone'+'nts']){case-0x2a1*-0xa+-0x17c8+-0x281:this['set']=yT,this['getToArray']=CT,this['setFromArr'+'ay']=wT;break;case 0x1*-0x1035+-0x1*-0x3a8+0xc8f:this['set']=vT,this['getToArray']=PT,this['setFromArr'+'ay']=ET;break;case-0x1*0x4e5+-0x16ab*0x1+0x3*0x931:this['set']=xT,this['getToArray']=MT,this['setFromArr'+'ay']=AT;break;case 0x1f47+0x8ca+0x1*-0x280d:this['set']=TT,this['getToArray']=IT,this['setFromArr'+'ay']=bT;break;}}['get'](_0x3453f5){return this['array'][this['index']+_0x3453f5];}['set'](_0x1959c2,_0x44a553,_0xb114db,_0x7d7469){}['getToArray'](_0x2896a1,_0x28af00,_0x5a71cc){}['setFromArr'+'ay'](_0x373c0f,_0x277c9d,_0x510bc2){}}class go{constructor(_0x14d141){this['vertexBuff'+'er']=_0x14d141,this['vertexForm'+'atSize']=_0x14d141['getFormat']()['size'],this['buffer']=this['vertexBuff'+'er']['lock'](),this['accessors']=[],this['element']={};const _0x3c4f56=this['vertexBuff'+'er']['getFormat']();for(let _0x5a98cd=0x154c+-0xb*0x21f+0x209;_0x5a98cd<_0x3c4f56['elements']['length'];_0x5a98cd++){const _0x5af86b=_0x3c4f56['elements'][_0x5a98cd];this['accessors'][_0x5a98cd]=new DT(this['buffer'],_0x5af86b,_0x3c4f56),this['element'][_0x5af86b['name']]=this['accessors'][_0x5a98cd];}}['next'](_0x46ac6c=0x1542+-0x1*0x1984+0x443*0x1){let _0x2c190f=-0x154*-0x4+-0xc08+0x6b8;const _0x52d69f=this['accessors'],_0x1f9fea=this['accessors']['length'];for(;_0x2c190f<_0x1f9fea;){const _0x14a231=_0x52d69f[_0x2c190f++];_0x14a231['index']+=_0x46ac6c*_0x14a231['stride'];}}['end'](){this['vertexBuff'+'er']['unlock']();}['writeData'](_0x275e27,_0x212d04,_0x8c4456){const _0x49546c=this['element'][_0x275e27];if(_0x49546c){_0x8c4456>this['vertexBuff'+'er']['numVertice'+'s']&&(M['error']('NumVertice'+'s\x20provided'+'\x20to\x20setDat'+'a:\x20'+_0x8c4456+('\x20is\x20larger'+'\x20than\x20spac'+'e\x20in\x20Verte'+'xBuffer:\x20')+this['vertexBuff'+'er']['numVertice'+'s']),_0x8c4456=this['vertexBuff'+'er']['numVertice'+'s']);const _0x311eba=_0x49546c['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){let _0x4ee5af=-0xf*0xf1+-0x254d+0x336c;for(let _0x104956=-0x30*0x6b+0x22b6+-0x1*0xea6;_0x104956<_0x8c4456;_0x104956++)_0x49546c['setFromArr'+'ay'](_0x4ee5af,_0x212d04,_0x104956*_0x311eba),_0x4ee5af+=_0x49546c['stride'];}else{if(_0x212d04['length']>_0x8c4456*_0x311eba){const _0x12a3a=_0x8c4456*_0x311eba;if(ArrayBuffer['isView'](_0x212d04))_0x212d04=_0x212d04['subarray'](-0xa97*-0x1+0x1*0x1575+0x803*-0x4,_0x12a3a),_0x49546c['array']['set'](_0x212d04);else{for(let _0x152125=0x2054*-0x1+0x1c5b+0x3*0x153;_0x152125<_0x12a3a;_0x152125++)_0x49546c['array'][_0x152125]=_0x212d04[_0x152125];}}else _0x49546c['array']['set'](_0x212d04);}}}['readData'](_0x5d86ed,_0x4d35db){const _0x4bb2b3=this['element'][_0x5d86ed];let _0x59ee19=-0x1*-0xa7f+0x1*-0x147a+-0x16d*-0x7;if(_0x4bb2b3){_0x59ee19=this['vertexBuff'+'er']['numVertice'+'s'];let _0x44d591;const _0x2127ec=_0x4bb2b3['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){Array['isArray'](_0x4d35db)&&(_0x4d35db['length']=-0x8fb+-0x1*0x10f3+0x19ee*0x1),_0x4bb2b3['index']=0x1*0xb55+-0x2461*0x1+0x190c;let _0x47f267=0x3ab+-0x110b+0xd60;for(_0x44d591=-0x1*0x15da+-0x1607+0x2be1*0x1;_0x44d591<_0x59ee19;_0x44d591++)_0x4bb2b3['getToArray'](_0x47f267,_0x4d35db,_0x44d591*_0x2127ec),_0x47f267+=_0x4bb2b3['stride'];}else{if(ArrayBuffer['isView'](_0x4d35db))_0x4d35db['set'](_0x4bb2b3['array']);else{_0x4d35db['length']=0x26b1+0xed0*-0x2+0x911*-0x1;const _0x5302bf=_0x59ee19*_0x2127ec;for(_0x44d591=-0x13c3+-0x29*-0x71+-0x47*-0x6;_0x44d591<_0x5302bf;_0x44d591++)_0x4d35db[_0x44d591]=_0x4bb2b3['array'][_0x44d591];}}}return _0x59ee19;}}const LT=-(0x2130+0x1401+0x4*-0xd4c);class RT{constructor(_0x3bddbc,_0x17c7b2){h(this,'key',null),h(this,'element',null),h(this,'event',null),_0x17c7b2&&(this['key']=_0x17c7b2['keyCode'],this['element']=_0x17c7b2['target'],this['event']=_0x17c7b2);}}const El=new RT();function dd(_0x4c393b){return El['key']=_0x4c393b['keyCode'],El['element']=_0x4c393b['target'],El['event']=_0x4c393b,El;}function Al(_0x51416f){return typeof _0x51416f=='string'?_0x51416f['toUpperCas'+'e']()['charCodeAt'](-0x10e6+-0x555+0x163b):_0x51416f;}const OT={0x9:'Tab',0xd:'Enter',0x10:'Shift',0x11:'Control',0x12:'Alt',0x1b:'Escape',0x25:'Left',0x26:'Up',0x27:'Right',0x28:'Down',0x2e:'Delete',0x5b:'Win'};class Ap extends pe{constructor(_0x4975f9,_0x197c56={}){super(),h(this,'_element',null),h(this,'_keymap',{}),h(this,'_lastmap',{}),(this['_keyDownHa'+'ndler']=this['_handleKey'+'Down']['bind'](this),this['_keyUpHand'+'ler']=this['_handleKey'+'Up']['bind'](this),this['_keyPressH'+'andler']=this['_handleKey'+'Press']['bind'](this),this['_visibilit'+'yChangeHan'+'dler']=this['_handleVis'+'ibilityCha'+'nge']['bind'](this),this['_windowBlu'+'rHandler']=this['_handleWin'+'dowBlur']['bind'](this),_0x4975f9&&this['attach'](_0x4975f9),this['preventDef'+'ault']=_0x197c56['preventDef'+'ault']||!(0xd44+0xe*-0x143+0x467*0x1),this['stopPropag'+'ation']=_0x197c56['stopPropag'+'ation']||!(-0x17f*-0x17+-0xaa2*0x1+-0x17c6));}['attach'](_0x4f280e){this['_element']&&this['detach'](),this['_element']=_0x4f280e,this['_element']['addEventLi'+'stener']('keydown',this['_keyDownHa'+'ndler'],!(0x5c+0x10d*-0x1f+0x1*0x2038)),this['_element']['addEventLi'+'stener']('keypress',this['_keyPressH'+'andler'],!(-0x1*-0x1273+0x1eb5+-0x3127)),this['_element']['addEventLi'+'stener']('keyup',this['_keyUpHand'+'ler'],!(0x24c3+0x138d+-0x1d1*0x1f)),document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x3*-0x868+-0x9e2+-0x2b*-0xd1)),window['addEventLi'+'stener']('blur',this['_windowBlu'+'rHandler'],!(0x22d1+-0x1*0x2573+-0x3*-0xe1));}['detach'](){if(!this['_element']){M['warn']('Unable\x20to\x20'+'detach\x20key'+'board.\x20It\x20'+'is\x20not\x20att'+'ached\x20to\x20a'+'n\x20element.');return;}this['_element']['removeEven'+'tListener']('keydown',this['_keyDownHa'+'ndler']),this['_element']['removeEven'+'tListener']('keypress',this['_keyPressH'+'andler']),this['_element']['removeEven'+'tListener']('keyup',this['_keyUpHand'+'ler']),this['_element']=null,document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x255e+0x8*0x19d+0x1877)),window['removeEven'+'tListener']('blur',this['_windowBlu'+'rHandler'],!(0x168a+0xc1b*-0x2+0x1ad));}['toKeyIdent'+'ifier'](_0x58619e){_0x58619e=Al(_0x58619e);const _0x26f715=OT[_0x58619e['toString']()];if(_0x26f715)return _0x26f715;let _0x668f07=_0x58619e['toString'](0x1f*0x9e+0x2*-0x701+-0x510)['toUpperCas'+'e']();const _0x12d702=_0x668f07['length'];for(let _0x508aa2=-0x3c4+-0x1927*-0x1+-0x1563;_0x508aa2<-0x115c+-0xd94*-0x2+0x8*-0x139-_0x12d702;_0x508aa2++)_0x668f07='0'+_0x668f07;return'U+'+_0x668f07;}['_handleKey'+'Down'](_0x9cf44a){const _0x278e5f=_0x9cf44a['keyCode']||_0x9cf44a['charCode'];if(_0x278e5f===void(-0x26ab+0xa0a+0x1ca1))return;const _0x452259=this['toKeyIdent'+'ifier'](_0x278e5f);this['_keymap'][_0x452259]=!(0x75c*0x4+0x4ee*-0x5+-0x1*0x4ca),this['fire']('keydown',dd(_0x9cf44a)),this['preventDef'+'ault']&&_0x9cf44a['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x9cf44a['stopPropag'+'ation']();}['_handleKey'+'Up'](_0x4c9b45){const _0x26d655=_0x4c9b45['keyCode']||_0x4c9b45['charCode'];if(_0x26d655===void(0x25*0x2b+-0x1*0xcf1+-0x11f*-0x6))return;const _0x3a5ca8=this['toKeyIdent'+'ifier'](_0x26d655);delete this['_keymap'][_0x3a5ca8],this['fire']('keyup',dd(_0x4c9b45)),this['preventDef'+'ault']&&_0x4c9b45['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x4c9b45['stopPropag'+'ation']();}['_handleKey'+'Press'](_0x593e9f){this['fire']('keypress',dd(_0x593e9f)),this['preventDef'+'ault']&&_0x593e9f['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x593e9f['stopPropag'+'ation']();}['_handleVis'+'ibilityCha'+'nge'](){document['visibility'+'State']==='hidden'&&this['_handleWin'+'dowBlur']();}['_handleWin'+'dowBlur'](){this['_keymap']={},this['_lastmap']={};}['update'](){for(const _0x5e8a5d in this['_lastmap'])delete this['_lastmap'][_0x5e8a5d];for(const _0x4ff2a7 in this['_keymap'])this['_keymap']['hasOwnProp'+'erty'](_0x4ff2a7)&&(this['_lastmap'][_0x4ff2a7]=this['_keymap'][_0x4ff2a7]);}['isPressed'](_0x34522c){const _0xcadb73=Al(_0x34522c),_0x4eb7bd=this['toKeyIdent'+'ifier'](_0xcadb73);return!!this['_keymap'][_0x4eb7bd];}['wasPressed'](_0x27f995){const _0x5396d3=Al(_0x27f995),_0x2cdf56=this['toKeyIdent'+'ifier'](_0x5396d3);return!!this['_keymap'][_0x2cdf56]&&!this['_lastmap'][_0x2cdf56];}['wasRelease'+'d'](_0x3f8a36){const _0x40e93a=Al(_0x3f8a36),_0x1aba13=this['toKeyIdent'+'ifier'](_0x40e93a);return!this['_keymap'][_0x1aba13]&&!!this['_lastmap'][_0x1aba13];}}h(Ap,'EVENT_KEYD'+'OWN','keydown'),h(Ap,'EVENT_KEYU'+'P','keyup');function Af(){return!!(document['pointerLoc'+'kElement']||document['mozPointer'+'LockElemen'+'t']||document['webkitPoin'+'terLockEle'+'ment']);}class Ka{constructor(_0x30e657,_0x7a11c2){h(this,'x',-0x1*0x16b1+0x239e+-0xced),h(this,'y',0xf90+-0x1*-0x1ae1+-0x2a71),h(this,'dx',0x396+-0x1*0x1501+0x116b),h(this,'dy',-0x2*-0x9eb+0x2*0x8f6+-0x25c2),h(this,'button',LT),h(this,'wheelDelta',0x2*0x7c9+-0xa5b+-0x537),h(this,'element'),h(this,'ctrlKey',!(0x7*-0x1a1+0x1461+-0x1*0x8f9)),h(this,'altKey',!(-0x2067+0xbe*-0xf+0x1*0x2b8a)),h(this,'shiftKey',!(0x2b*0x2b+-0x3*0x215+-0xf9)),h(this,'metaKey',!(-0x1d5d+-0x1a51+0x37af)),h(this,'event');let _0x5f453d={'x':0x0,'y':0x0};if(_0x7a11c2){if(_0x7a11c2 instanceof Ka)throw Error('Expected\x20M'+'ouseEvent');_0x5f453d=_0x30e657['_getTarget'+'Coords'](_0x7a11c2);}else _0x7a11c2={};if(_0x5f453d)this['x']=_0x5f453d['x'],this['y']=_0x5f453d['y'];else{if(Af())this['x']=-0x1*-0xb1e+-0x812+-0x30c,this['y']=-0x44b*0x1+-0x22ab+0x26f6;else return;}_0x7a11c2['type']==='wheel'&&(_0x7a11c2['deltaY']>0x1*-0x1c38+-0x3*-0xc7+0x2f*0x8d?this['wheelDelta']=0x993*-0x1+-0xfb5*-0x1+-0x20b*0x3:_0x7a11c2['deltaY']<0x453*0x4+-0x25c1+0x1*0x1475&&(this['wheelDelta']=-(-0x2*0xdb7+0x21b1+-0x642))),Af()?(this['dx']=_0x7a11c2['movementX']||_0x7a11c2['webkitMove'+'mentX']||_0x7a11c2['mozMovemen'+'tX']||0x7a3+0x7f8+-0xf9b,this['dy']=_0x7a11c2['movementY']||_0x7a11c2['webkitMove'+'mentY']||_0x7a11c2['mozMovemen'+'tY']||-0x13f1*-0x1+0x1253*-0x1+-0x19e):(this['dx']=this['x']-_0x30e657['_lastX'],this['dy']=this['y']-_0x30e657['_lastY']),(_0x7a11c2['type']==='mousedown'||_0x7a11c2['type']==='mouseup')&&(this['button']=_0x7a11c2['button']),this['buttons']=_0x30e657['_buttons']['slice'](-0x78a+-0x1*0x13d9+0x1b63),this['element']=_0x7a11c2['target'],this['ctrlKey']=_0x7a11c2['ctrlKey']??!(0x11*-0x193+-0xb18+0x25dc),this['altKey']=_0x7a11c2['altKey']??!(-0x1066+-0x815*-0x3+-0x7d8*0x1),this['shiftKey']=_0x7a11c2['shiftKey']??!(0xc05+-0x1*0x1e3d+0xf*0x137),this['metaKey']=_0x7a11c2['metaKey']??!(-0x575*0x3+0x5*0x26f+0x435),this['event']=_0x7a11c2;}}class bl extends pe{constructor(_0x5267b3){super(),h(this,'_lastX',-0x1*0x1f82+0xd*-0x10f+-0x1*-0x2d45),h(this,'_lastY',0x12d5+-0x2594+0x12bf),h(this,'_buttons',[!(-0x172a+-0x43*0x2f+0x2378),!(-0x268b+0xb*0x9f+-0x161*-0x17),!(-0x9*0x3f9+0x16*0x82+0x1896)]),h(this,'_lastbutto'+'ns',[!(0xf89+-0x185a+0x8d2),!(0x12c6+0x1*0x4cf+0x4*-0x5e5),!(0xd*0xe3+-0x796*0x5+0x1a68)]),h(this,'_target',null),h(this,'_attached',!(-0x1*-0x7a5+0x26ea+0x2e8e*-0x1)),(this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_contextMe'+'nuHandler']=_0x395736=>{_0x395736['preventDef'+'ault']();},this['attach'](_0x5267b3));}static['isPointerL'+'ocked'](){return Af();}['attach'](_0x3ca6ad){if(this['_target']=_0x3ca6ad,this['_attached'])return;this['_attached']=!(-0x445*0x8+0x1ab9*0x1+-0xb*-0xad);const _0x4a34f2={'passive':!(0x2*0xe75+-0x1*0x3f7+-0x18f2)},_0x56e45b=Me['passiveEve'+'nts']?_0x4a34f2:!(0x2c3+0x77*0xf+-0x9bb);window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x56e45b),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x56e45b),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x56e45b),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x56e45b);}['detach'](){if(!this['_attached'])return;this['_attached']=!(-0xb3+-0x1a42*-0x1+-0x198e),this['_target']=null;const _0x2ea196={'passive':!(0x1*0x755+-0x79*0x48+0x1ab4)},_0x31fa4e=Me['passiveEve'+'nts']?_0x2ea196:!(0x11b6*0x2+0x2430+-0x17*0x31d);window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x31fa4e),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x31fa4e),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x31fa4e),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x31fa4e);}['disableCon'+'textMenu'](){this['_target']&&this['_target']['addEventLi'+'stener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enableCont'+'extMenu'](){this['_target']&&this['_target']['removeEven'+'tListener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enablePoin'+'terLock'](_0x52e44a,_0x4cb3ba){if(!document['body']['requestPoi'+'nterLock']){_0x4cb3ba&&_0x4cb3ba();return;}const _0x1fe0b8=()=>{_0x52e44a(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x1fe0b8);},_0x2bceb8=()=>{_0x4cb3ba(),document['removeEven'+'tListener']('pointerloc'+'kerror',_0x2bceb8);};_0x52e44a&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x1fe0b8,!(0x1ed8+0x1*-0x229f+0x3c8)),_0x4cb3ba&&document['addEventLi'+'stener']('pointerloc'+'kerror',_0x2bceb8,!(0xe0a*0x2+0x1e1d*-0x1+0x20a)),document['body']['requestPoi'+'nterLock']();}['disablePoi'+'nterLock'](_0xa438e8){if(!document['exitPointe'+'rLock'])return;const _0x2cdb08=()=>{_0xa438e8(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x2cdb08);};_0xa438e8&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x2cdb08,!(0x7a7*0x1+-0x862+0xbc)),document['exitPointe'+'rLock']();}['update'](){this['_lastbutto'+'ns'][0x2f*-0x3b+0x2*-0x812+0x1af9]=this['_buttons'][-0x1*0x1145+0xb*-0x2f2+-0x5*-0x9ef],this['_lastbutto'+'ns'][-0xd*-0x18a+-0x541+-0xec0]=this['_buttons'][-0x133*0x1d+0x1*0x421+0x461*0x7],this['_lastbutto'+'ns'][0xdba+-0x1*0x1a35+0xc7d]=this['_buttons'][0x2e7*0x5+0x1435+0x2*-0x115b];}['isPressed'](_0x3c7008){return this['_buttons'][_0x3c7008];}['wasPressed'](_0x24a02a){return this['_buttons'][_0x24a02a]&&!this['_lastbutto'+'ns'][_0x24a02a];}['wasRelease'+'d'](_0x2df16a){return!this['_buttons'][_0x2df16a]&&this['_lastbutto'+'ns'][_0x2df16a];}['_handleUp'](_0x554f79){this['_buttons'][_0x554f79['button']]=!(0x1a17+-0x1*-0x15fe+-0x3014*0x1);const _0x3308ea=new Ka(this,_0x554f79);_0x3308ea['event']&&this['fire']('mouseup',_0x3308ea);}['_handleDow'+'n'](_0x563d49){this['_buttons'][_0x563d49['button']]=!(0x79d*-0x3+-0x16dc+-0x1*-0x2db3);const _0xfdcbf0=new Ka(this,_0x563d49);_0xfdcbf0['event']&&this['fire']('mousedown',_0xfdcbf0);}['_handleMov'+'e'](_0xd96cff){const _0xdb1db4=new Ka(this,_0xd96cff);_0xdb1db4['event']&&(this['fire']('mousemove',_0xdb1db4),this['_lastX']=_0xdb1db4['x'],this['_lastY']=_0xdb1db4['y']);}['_handleWhe'+'el'](_0x375edf){const _0x2413db=new Ka(this,_0x375edf);_0x2413db['event']&&this['fire']('mousewheel',_0x2413db);}['_getTarget'+'Coords'](_0x47565f){const _0x318c81=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x26b0b3=Math['floor'](_0x318c81['left']),_0x30aef6=Math['floor'](_0x318c81['top']);return _0x47565f['clientX']<_0x26b0b3||_0x47565f['clientX']>=_0x26b0b3+this['_target']['clientWidt'+'h']||_0x47565f['clientY']<_0x30aef6||_0x47565f['clientY']>=_0x30aef6+this['_target']['clientHeig'+'ht']?null:{'x':_0x47565f['clientX']-_0x26b0b3,'y':_0x47565f['clientY']-_0x30aef6};}}h(bl,'EVENT_MOUS'+'EMOVE','mousemove'),h(bl,'EVENT_MOUS'+'EDOWN','mousedown'),h(bl,'EVENT_MOUS'+'EUP','mouseup'),h(bl,'EVENT_MOUS'+'EWHEEL','mousewheel');const Re=class Re{['get'](_0x291802,_0x55357e,_0xc419eb){typeof _0x55357e=='function'&&(_0xc419eb=_0x55357e,_0x55357e={});const _0x229e0c=this['request']('GET',_0x291802,_0x55357e,_0xc419eb),{progress:_0xbff9c6}=_0x55357e;if(_0xbff9c6){const _0x51bda7=_0x50cad0=>{_0x50cad0['lengthComp'+'utable']&&_0xbff9c6['fire']('progress',_0x50cad0['loaded'],_0x50cad0['total']);},_0x57b514=_0x2212ab=>{_0x51bda7(_0x2212ab),_0x229e0c['removeEven'+'tListener']('loadstart',_0x51bda7),_0x229e0c['removeEven'+'tListener']('progress',_0x51bda7),_0x229e0c['removeEven'+'tListener']('loadend',_0x57b514);};_0x229e0c['addEventLi'+'stener']('loadstart',_0x51bda7),_0x229e0c['addEventLi'+'stener']('progress',_0x51bda7),_0x229e0c['addEventLi'+'stener']('loadend',_0x57b514);}return _0x229e0c;}['post'](_0x5aabec,_0x3b4acf,_0x3b9426,_0x53eb19){return typeof _0x3b9426=='function'&&(_0x53eb19=_0x3b9426,_0x3b9426={}),_0x3b9426['postdata']=_0x3b4acf,this['request']('POST',_0x5aabec,_0x3b9426,_0x53eb19);}['put'](_0x205162,_0x126f5f,_0x1ffc1e,_0x3b516b){return typeof _0x1ffc1e=='function'&&(_0x3b516b=_0x1ffc1e,_0x1ffc1e={}),_0x1ffc1e['postdata']=_0x126f5f,this['request']('PUT',_0x205162,_0x1ffc1e,_0x3b516b);}['del'](_0x199c25,_0x298bfe,_0x21005a){return typeof _0x298bfe=='function'&&(_0x21005a=_0x298bfe,_0x298bfe={}),this['request']('DELETE',_0x199c25,_0x298bfe,_0x21005a);}['request'](_0x427f5a,_0x2cc69a,_0x10f65e,_0xe0c923){let _0x2976df,_0xb87eb5,_0x20715e,_0x4e8205=!(-0xb*-0xac+0x1*-0xdb8+0x655);if(typeof _0x10f65e=='function'&&(_0xe0c923=_0x10f65e,_0x10f65e={}),_0x10f65e['retry']&&(_0x10f65e=Object['assign']({'retries':0x0,'maxRetries':0x5},_0x10f65e)),_0x10f65e['callback']=_0xe0c923,_0x10f65e['async']==null&&(_0x10f65e['async']=!(-0x1*-0x1349+-0x161*-0xd+-0x2536)),_0x10f65e['headers']==null&&(_0x10f65e['headers']={}),_0x10f65e['postdata']!=null){if(_0x10f65e['postdata']instanceof Document)_0x20715e=_0x10f65e['postdata'];else{if(_0x10f65e['postdata']instanceof FormData)_0x20715e=_0x10f65e['postdata'];else{if(_0x10f65e['postdata']instanceof Object){let _0x2bb91a=_0x10f65e['headers']['Content-Ty'+'pe'];switch(_0x2bb91a===void(0x5*0x2eb+0x23f7+-0x328e)&&(_0x10f65e['headers']['Content-Ty'+'pe']=Re['ContentTyp'+'e']['FORM_URLEN'+'CODED'],_0x2bb91a=_0x10f65e['headers']['Content-Ty'+'pe']),_0x2bb91a){case Re['ContentTyp'+'e']['FORM_URLEN'+'CODED']:{_0x20715e='';let _0x30c0b4=!(-0x1*0x99f+-0x188b*0x1+0x222a);for(const _0x19f637 in _0x10f65e['postdata'])if(_0x10f65e['postdata']['hasOwnProp'+'erty'](_0x19f637)){_0x30c0b4?_0x30c0b4=!(0x150f*0x1+-0x1a8*-0x5+-0x1d56):_0x20715e+='&';const _0x594f99=encodeURIComponent(_0x19f637),_0x582d6e=encodeURIComponent(_0x10f65e['postdata'][_0x19f637]);_0x20715e+=_0x594f99+'='+_0x582d6e;}break;}default:case Re['ContentTyp'+'e']['JSON']:_0x2bb91a==null&&(_0x10f65e['headers']['Content-Ty'+'pe']=Re['ContentTyp'+'e']['JSON']),_0x20715e=JSON['stringify'](_0x10f65e['postdata']);break;}}else _0x20715e=_0x10f65e['postdata'];}}}if(_0x10f65e['cache']===!(-0x1881*0x1+-0x23ac+-0x2*-0x1e17)){const _0x4a30e2=de();_0x2976df=new id(_0x2cc69a),_0x2976df['query']?_0x2976df['query']=_0x2976df['query']+'&ts='+_0x4a30e2:_0x2976df['query']='ts='+_0x4a30e2,_0x2cc69a=_0x2976df['toString']();}_0x10f65e['query']&&(_0x2976df=new id(_0x2cc69a),_0xb87eb5=bh(_0x2976df['getQuery'](),_0x10f65e['query']),_0x2976df['setQuery'](_0xb87eb5),_0x2cc69a=_0x2976df['toString']());const _0x2b4e63=new XMLHttpRequest();_0x2b4e63['open'](_0x427f5a,_0x2cc69a,_0x10f65e['async']),_0x2b4e63['withCreden'+'tials']=_0x10f65e['withCreden'+'tials']!==void(-0x26e6+-0x2449+0x4b2f*0x1)?_0x10f65e['withCreden'+'tials']:!(0x979*0x3+0x868+-0x24d2),_0x2b4e63['responseTy'+'pe']=_0x10f65e['responseTy'+'pe']||this['_guessResp'+'onseType'](_0x2cc69a);for(const _0x2aa679 in _0x10f65e['headers'])_0x10f65e['headers']['hasOwnProp'+'erty'](_0x2aa679)&&_0x2b4e63['setRequest'+'Header'](_0x2aa679,_0x10f65e['headers'][_0x2aa679]);_0x2b4e63['onreadysta'+'techange']=()=>{this['_onReadySt'+'ateChange'](_0x427f5a,_0x2cc69a,_0x10f65e,_0x2b4e63);},_0x2b4e63['onerror']=()=>{this['_onError'](_0x427f5a,_0x2cc69a,_0x10f65e,_0x2b4e63),_0x4e8205=!(-0x2642+-0x237f+0xef*0x4f);};try{_0x2b4e63['send'](_0x20715e);}catch(_0x5557de){_0x4e8205||_0x10f65e['error'](_0x2b4e63['status'],_0x2b4e63,_0x5557de);}return _0x2b4e63;}['_guessResp'+'onseType'](_0x509c09){const _0x5276b1=new id(_0x509c09),_0x4d2791=xe['getExtensi'+'on'](_0x5276b1['path'])['toLowerCas'+'e']();return Re['binaryExte'+'nsions']['indexOf'](_0x4d2791)>=0x1de6+0xc78+-0x2a5e*0x1?Re['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x4d2791==='.json'?Re['ResponseTy'+'pe']['JSON']:_0x4d2791==='.xml'?Re['ResponseTy'+'pe']['DOCUMENT']:Re['ResponseTy'+'pe']['TEXT'];}['_isBinaryC'+'ontentType'](_0x49158c){return[Re['ContentTyp'+'e']['BASIS'],Re['ContentTyp'+'e']['BIN'],Re['ContentTyp'+'e']['DDS'],Re['ContentTyp'+'e']['GLB'],Re['ContentTyp'+'e']['MP3'],Re['ContentTyp'+'e']['MP4'],Re['ContentTyp'+'e']['OGG'],Re['ContentTyp'+'e']['OPUS'],Re['ContentTyp'+'e']['WAV']]['indexOf'](_0x49158c)>=0x116f+0x3b*0x93+-0x66a*0x8;}['_isBinaryR'+'esponseTyp'+'e'](_0xd717ab){return _0xd717ab===Re['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']||_0xd717ab===Re['ResponseTy'+'pe']['BLOB']||_0xd717ab===Re['ResponseTy'+'pe']['JSON'];}['_onReadySt'+'ateChange'](_0x17115a,_0x2c38db,_0x267043,_0x1cee7c){if(_0x1cee7c['readyState']===0x7*-0x10+-0x1689+0x5*0x499)switch(_0x1cee7c['status']){case 0xbf0+0x13*0x18e+0x2*-0x14bd:{_0x1cee7c['responseUR'+'L']&&_0x1cee7c['responseUR'+'L']['startsWith']('file:///')?this['_onSuccess'](_0x17115a,_0x2c38db,_0x267043,_0x1cee7c):this['_onError'](_0x17115a,_0x2c38db,_0x267043,_0x1cee7c);break;}case 0x68+-0x1*0xe3+0x143:case-0x20ad+0x1a3*0x1+0x1fd3:case 0x5e6+-0x1213*-0x2+-0x149f*0x2:case 0x208+0x1*0x18ad+0x8b*-0x2f:{this['_onSuccess'](_0x17115a,_0x2c38db,_0x267043,_0x1cee7c);break;}default:{this['_onError'](_0x17115a,_0x2c38db,_0x267043,_0x1cee7c);break;}}}['_onSuccess'](_0x52b0b5,_0x1db39b,_0x55e9f6,_0x262e26){let _0x6b2a2f,_0x2bb83b;const _0x36648d=_0x262e26['getRespons'+'eHeader']('Content-Ty'+'pe');_0x36648d&&(_0x2bb83b=_0x36648d['split'](';')[-0x1f80+-0x251a+0x449a]['trim']());try{this['_isBinaryC'+'ontentType'](_0x2bb83b)||this['_isBinaryR'+'esponseTyp'+'e'](_0x262e26['responseTy'+'pe'])?_0x6b2a2f=_0x262e26['response']:_0x2bb83b===Re['ContentTyp'+'e']['JSON']||_0x1db39b['split']('?')[0x10e*-0x16+-0x2361+-0x3a95*-0x1]['endsWith']('.json')?_0x6b2a2f=JSON['parse'](_0x262e26['responseTe'+'xt']):_0x262e26['responseTy'+'pe']===Re['ResponseTy'+'pe']['DOCUMENT']||_0x2bb83b===Re['ContentTyp'+'e']['XML']?_0x6b2a2f=_0x262e26['responseXM'+'L']:_0x6b2a2f=_0x262e26['responseTe'+'xt'],_0x55e9f6['callback'](null,_0x6b2a2f);}catch(_0x4a8c8e){_0x55e9f6['callback'](_0x4a8c8e);}}['_onError'](_0x1b06ab,_0x295e98,_0x2d7f29,_0x561c39){if(!_0x2d7f29['retrying']){if(_0x2d7f29['retry']&&_0x2d7f29['retries']<_0x2d7f29['maxRetries']){_0x2d7f29['retries']++,_0x2d7f29['retrying']=!(-0x14ef+0x123d+0x3*0xe6);const _0x1ae4bc=Y['clamp'](Math['pow'](-0x76b+-0x5ae+0xd1b*0x1,_0x2d7f29['retries'])*Re['retryDelay'],0x7*0x1f3+0xfe2+0x1*-0x1d87,_0x2d7f29['maxRetryDe'+'lay']||-0x28c+0x1a4e+-0x43a*0x1);console['log'](_0x1b06ab+':\x20'+_0x295e98+'\x20-\x20Error\x20'+_0x561c39['status']+('.\x20Retrying'+'\x20in\x20')+_0x1ae4bc+'\x20ms'),setTimeout(()=>{_0x2d7f29['retrying']=!(-0x1*0x1c9f+-0x251c+-0x4*-0x106f),this['request'](_0x1b06ab,_0x295e98,_0x2d7f29,_0x2d7f29['callback']);},_0x1ae4bc);}else _0x2d7f29['callback'](_0x561c39['status']===0x3e3*0x6+0x872+0x26*-0xd6?'Network\x20er'+'ror':_0x561c39['status'],null);}}};h(Re,'ContentTyp'+'e',{'AAC':'audio/aac','BASIS':'image/basi'+'s','BIN':'applicatio'+'n/octet-st'+'ream','DDS':'image/dds','FORM_URLENCODED':'applicatio'+'n/x-www-fo'+'rm-urlenco'+'ded','GIF':'image/gif','GLB':'model/gltf'+'-binary','JPEG':'image/jpeg','JSON':'applicatio'+'n/json','MP3':'audio/mpeg','MP4':'audio/mp4','OGG':'audio/ogg','OPUS':'audio/ogg;'+'\x20codecs=\x22o'+'pus\x22','PNG':'image/png','TEXT':'text/plain','WAV':'audio/x-wa'+'v','XML':'applicatio'+'n/xml'}),h(Re,'ResponseTy'+'pe',{'TEXT':'text','ARRAY_BUFFER':'arraybuffe'+'r','BLOB':'blob','DOCUMENT':'document','JSON':'json'}),h(Re,'binaryExte'+'nsions',['.model','.wav','.ogg','.mp3','.mp4','.m4a','.aac','.dds','.basis','.glb','.opus']),h(Re,'retryDelay',-0x211c+-0xf9e+0x311e);let Ts=Re;const nt=new Ts(),om='linear',FT='inverse',NT='exponentia'+'l';class kT{constructor(_0x5e2349){h(this,'_manager'),h(this,'position',new I()),h(this,'orientatio'+'n',new te()),this['_manager']=_0x5e2349;}['getPositio'+'n'](){return this['position'];}['setPositio'+'n'](_0x28777e){this['position']['copy'](_0x28777e);const _0x1c2869=this['listener'];_0x1c2869&&('positionX'in _0x1c2869?(_0x1c2869['positionX']['value']=_0x28777e['x'],_0x1c2869['positionY']['value']=_0x28777e['y'],_0x1c2869['positionZ']['value']=_0x28777e['z']):_0x1c2869['setPositio'+'n']&&_0x1c2869['setPositio'+'n'](_0x28777e['x'],_0x28777e['y'],_0x28777e['z']));}['setOrienta'+'tion'](_0x730c4b){this['orientatio'+'n']['copy'](_0x730c4b);const _0x178e24=this['listener'];if(_0x178e24){const _0x20e792=_0x730c4b['data'];'forwardX'in _0x178e24?(_0x178e24['forwardX']['value']=-_0x20e792[0x1c1*0x15+0x1*0x166d+-0x3b3a],_0x178e24['forwardY']['value']=-_0x20e792[-0xf46+0x263d+-0x1*0x16ee],_0x178e24['forwardZ']['value']=-_0x20e792[0x377*0x1+-0x134*-0x19+-0x2181*0x1],_0x178e24['upX']['value']=_0x20e792[0x24a*0x2+-0xd7+0x1*-0x3b9],_0x178e24['upY']['value']=_0x20e792[0x23d+0x260+-0x498],_0x178e24['upZ']['value']=_0x20e792[-0x1f26+0xcdd+0x124f]):_0x178e24['setOrienta'+'tion']&&_0x178e24['setOrienta'+'tion'](-_0x20e792[-0x1*0x2489+-0x7*-0x4f3+0x1ec],-_0x20e792[-0x2*-0x4a2+0x3*-0x569+0x380*0x2],-_0x20e792[-0x9*-0x265+0x213a+0x123f*-0x3],_0x20e792[-0x156*-0x10+0x1c9*0x8+-0x23a4],_0x20e792[-0x230f+0x12*0x18+-0x2164*-0x1],_0x20e792[-0x2432+-0x3*0xba8+0x1*0x4730]);}}['getOrienta'+'tion'](){return this['orientatio'+'n'];}get['listener'](){const _0x182146=this['_manager']['context'];return _0x182146?_0x182146['listener']:null;}}const Cl='running',bp=['click','touchstart','mousedown'];class UT extends pe{constructor(){super(),this['_context']=null,this['AudioConte'+'xt']=typeof AudioContext<'u'&&AudioContext||typeof webkitAudioContext<'u'&&webkitAudioContext,this['AudioConte'+'xt']||M['warn']('No\x20support'+'\x20for\x203D\x20au'+'dio\x20found'),this['_unlockHan'+'dlerFunc']=this['_unlockHan'+'dler']['bind'](this),this['_userSuspe'+'nded']=!(-0x17b4*0x1+-0x15a*0x18+-0x9*-0x63d),this['listener']=new kT(this),this['_volume']=0x24bb+0xcf3+0x3*-0x108f;}set['volume'](_0x5300d2){_0x5300d2=Y['clamp'](_0x5300d2,-0x4*0x97e+0x1537+-0x1*-0x10c1,0x6b*0x19+-0x2dd*0x1+-0x795),this['_volume']=_0x5300d2,this['fire']('volumechan'+'ge',_0x5300d2);}get['volume'](){return this['_volume'];}get['suspended'](){return this['_userSuspe'+'nded'];}get['context'](){return!this['_context']&&this['AudioConte'+'xt']&&(this['_context']=new this['AudioConte'+'xt'](),this['_context']['state']!==Cl&&this['_registerU'+'nlockListe'+'ners']()),this['_context'];}['suspend'](){this['_userSuspe'+'nded']||(this['_userSuspe'+'nded']=!(0x1ad*0x2+-0x43*-0x59+0x13*-0x167),this['_context']&&this['_context']['state']===Cl&&this['_suspend']());}['resume'](){this['_userSuspe'+'nded']&&(this['_userSuspe'+'nded']=!(0x1*0x1574+0x113b*-0x1+-0x438),this['_context']&&this['_context']['state']!==Cl&&this['_resume']());}['destroy'](){var _0xff7bcf;this['fire']('destroy'),this['_context']&&(this['_removeUnl'+'ockListene'+'rs'](),(_0xff7bcf=this['_context'])==null||_0xff7bcf['close'](),this['_context']=null);}['_resume'](){this['_context']['resume']()['then'](()=>{const _0x4d28e3=this['_context']['createBuff'+'erSource']();_0x4d28e3['buffer']=this['_context']['createBuff'+'er'](0x1*0x50b+-0x1*0x240b+-0x1*-0x1f01,-0x2*0xe2c+-0x19f4+0x1*0x364d,this['_context']['sampleRate']),_0x4d28e3['connect'](this['_context']['destinatio'+'n']),_0x4d28e3['start'](0x108c+-0x5*0x652+0xf0e),_0x4d28e3['onended']=_0xfec822=>{_0x4d28e3['disconnect'](0x1*0x1cf3+0x699*-0x1+-0x165a),this['fire']('resume');};},_0x3f6e1b=>{M['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20it\x20'+'was\x20reject'+'ed\x20'+_0x3f6e1b);})['catch'](_0x17efab=>{M['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20thr'+'ew\x20an\x20exce'+'ption\x20'+_0x17efab);});}['_suspend'](){this['_context']['suspend']()['then'](()=>{this['fire']('suspend');},_0x5572cf=>{M['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20i'+'t\x20was\x20reje'+'cted\x20'+_0x5572cf);})['catch'](_0x27b438=>{M['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20t'+'hrew\x20an\x20ex'+'ception\x20'+_0x27b438);});}['_unlockHan'+'dler'](){this['_removeUnl'+'ockListene'+'rs'](),!this['_userSuspe'+'nded']&&this['_context']['state']!==Cl&&this['_resume']();}['_registerU'+'nlockListe'+'ners'](){bp['forEach'](_0x38648c=>{window['addEventLi'+'stener'](_0x38648c,this['_unlockHan'+'dlerFunc'],!(0x4b5+-0x16*-0x166+-0x2378));});}['_removeUnl'+'ockListene'+'rs'](){bp['forEach'](_0x5183dd=>{window['removeEven'+'tListener'](_0x5183dd,this['_unlockHan'+'dlerFunc'],!(-0x1c*-0x101+-0x28*0xef+0x93d));});}}class BT{constructor(_0x1554c7){h(this,'audio'),h(this,'buffer'),_0x1554c7 instanceof Audio?this['audio']=_0x1554c7:this['buffer']=_0x1554c7;}get['duration'](){let _0x14d158=0x2d7+-0x15f2+-0x49*-0x43;return this['buffer']?_0x14d158=this['buffer']['duration']:this['audio']&&(_0x14d158=this['audio']['duration']),_0x14d158||-0x18c3+0x133a+0x589;}}function al(){return typeof AudioContext<'u'||typeof webkitAudioContext<'u';}const Wt=-0x35*0x22+-0x1*-0xbcb+-0x1*0x4c1,Za=0x1a0d+-0x4f*0x6d+0x797,Fs=0x13*0x1b3+-0xd14+-0x1333;function Xt(_0x3713cf,_0x2e2c7b){return _0x3713cf%_0x2e2c7b||-0x214d+0x2122+0x2b;}class Ss extends pe{constructor(_0x39aac3,_0x5c6330,_0x6f5182){super(),h(this,'source',null),(this['_manager']=_0x39aac3,this['_volume']=_0x6f5182['volume']!==void(0xc46*0x2+0x1c6c+-0x1a7c*0x2)?Y['clamp'](Number(_0x6f5182['volume'])||-0x1a38+-0x24a1+0x3ed9,-0x2239+0xc*-0x1a7+0x360d,-0x27*0x47+0x43f*-0x6+0xca*0x2e):-0x150*-0x10+0xbb3*0x1+-0x20b2,this['_pitch']=_0x6f5182['pitch']!==void(0x1719+0x229+-0x1942)?Math['max'](-0x1c87+0xd04+0x1*0xf83+0.01,Number(_0x6f5182['pitch'])||0x7*-0x53d+-0x33*0x1f+0xab6*0x4):-0x1*-0x1712+0x7cd*-0x5+-0x10*-0xff,this['_loop']=!!(_0x6f5182['loop']!==void(0x1639+-0x2d*0xd3+0xede)&&_0x6f5182['loop']),this['_sound']=_0x5c6330,this['_state']=Fs,this['_suspended']=!(-0x13*0x137+-0x2c2+0x19d8),this['_suspendEn'+'dEvent']=-0x1f9d+-0x15dd+0x25*0x172,this['_suspendIn'+'stanceEven'+'ts']=!(-0x15f2+-0x2*-0x895+0x4c9),this['_playWhenL'+'oaded']=!(-0x1664+0x3*-0xb51+0x3857),this['_startTime']=Math['max'](0x1a34+-0x7cb+0x1*-0x1269,Number(_0x6f5182['startTime'])||0x23bb+-0x90f*0x2+-0x119d),this['_duration']=Math['max'](0x1c9c+0x15a7+0x3243*-0x1,Number(_0x6f5182['duration'])||0x1096+-0x1*0x195d+0x8c7),this['_startOffs'+'et']=null,this['_onPlayCal'+'lback']=_0x6f5182['onPlay'],this['_onPauseCa'+'llback']=_0x6f5182['onPause'],this['_onResumeC'+'allback']=_0x6f5182['onResume'],this['_onStopCal'+'lback']=_0x6f5182['onStop'],this['_onEndCall'+'back']=_0x6f5182['onEnd'],al()?(this['_startedAt']=0x114f+-0x87d*-0x1+-0x1a*0xfe,this['_currentTi'+'me']=0x7d5+-0x1*0x1fe1+0x180c,this['_currentOf'+'fset']=0x1*0x147b+0x2590+-0x1359*0x3,this['_inputNode']=null,this['_connector'+'Node']=null,this['_firstNode']=null,this['_lastNode']=null,this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x3e*0x7b+0x58e*-0x7+-0x89*-0x11),this['_initializ'+'eNodes'](),this['_endedHand'+'ler']=this['_onEnded']['bind'](this)):(this['_isReady']=!(-0x39*-0x6c+-0xd19+-0xaf2*0x1),this['_loadedMet'+'adataHandl'+'er']=this['_onLoadedM'+'etadata']['bind'](this),this['_timeUpdat'+'eHandler']=this['_onTimeUpd'+'ate']['bind'](this),this['_endedHand'+'ler']=this['_onEnded']['bind'](this),this['_createSou'+'rce']()));}set['currentTim'+'e'](_0x146409){if(!(_0x146409<0x1*0x167e+-0x8*0x374+-0x291*-0x2)){if(this['_state']===Wt){const _0x3f7307=this['_suspendIn'+'stanceEven'+'ts'];this['_suspendIn'+'stanceEven'+'ts']=!(0x2*-0xe4e+-0x11a9+0x2e45),this['stop'](),this['_startOffs'+'et']=_0x146409,this['play'](),this['_suspendIn'+'stanceEven'+'ts']=_0x3f7307;}else this['_startOffs'+'et']=_0x146409,this['_currentTi'+'me']=_0x146409;}}get['currentTim'+'e'](){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Za?this['_currentTi'+'me']:this['_state']===Fs||!this['source']?-0x8d2+0xb*0x2cd+-0x15fd:(this['_updateCur'+'rentTime'](),this['_currentTi'+'me']);}set['duration'](_0x54d0b1){this['_duration']=Math['max'](-0x1df7+0x16c1*0x1+0x736,Number(_0x54d0b1)||0xb9+-0x22*-0xc+0x1*-0x251);const _0x1bdc2e=this['_state']===Wt;this['stop'](),_0x1bdc2e&&this['play']();}get['duration'](){return this['_sound']?this['_duration']?Xt(this['_duration'],this['_sound']['duration']):this['_sound']['duration']:-0x1e0+-0x3bd*0x7+0x1c0b;}get['isPaused'](){return this['_state']===Za;}get['isPlaying'](){return this['_state']===Wt;}get['isStopped'](){return this['_state']===Fs;}get['isSuspende'+'d'](){return this['_suspended'];}set['loop'](_0x977098){this['_loop']=!!_0x977098,this['source']&&(this['source']['loop']=this['_loop']);}get['loop'](){return this['_loop'];}set['pitch'](_0x48c3a1){this['_currentOf'+'fset']=this['currentTim'+'e'],this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_pitch']=Math['max'](Number(_0x48c3a1)||-0x12*0x2d+0x2*0xe9f+0x1*-0x1a14,0xeee+-0xe14+-0xda*0x1+0.01),this['source']&&(this['source']['playbackRa'+'te']['value']=this['_pitch']);}get['pitch'](){return this['_pitch'];}set['sound'](_0x5b3ca5){this['_sound']=_0x5b3ca5,this['_state']!==Fs?this['stop']():this['_createSou'+'rce']();}get['sound'](){return this['_sound'];}set['startTime'](_0x30cbe2){this['_startTime']=Math['max'](-0x5b6*0x2+0x1e53+-0x3*0x64d,Number(_0x30cbe2)||-0x3d1*-0x5+-0x1b9d+0x1a*0x54);const _0x2fa663=this['_state']===Wt;this['stop'](),_0x2fa663&&this['play']();}get['startTime'](){return this['_startTime'];}set['volume'](_0x9899e2){_0x9899e2=Y['clamp'](_0x9899e2,0x126f+-0x3*-0x12d+-0x15f6,-0x1637+-0xb9*0x35+0x3c85),this['_volume']=_0x9899e2,this['gain']&&(this['gain']['gain']['value']=_0x9899e2*this['_manager']['volume']);}get['volume'](){return this['_volume'];}['_onPlay'](){this['fire']('play'),this['_onPlayCal'+'lback']&&this['_onPlayCal'+'lback'](this);}['_onPause'](){this['fire']('pause'),this['_onPauseCa'+'llback']&&this['_onPauseCa'+'llback'](this);}['_onResume'](){this['fire']('resume'),this['_onResumeC'+'allback']&&this['_onResumeC'+'allback'](this);}['_onStop'](){this['fire']('stop'),this['_onStopCal'+'lback']&&this['_onStopCal'+'lback'](this);}['_onEnded'](){if(this['_suspendEn'+'dEvent']>0x1*0x138b+-0x185c+0x4d1){this['_suspendEn'+'dEvent']--;return;}this['fire']('end'),this['_onEndCall'+'back']&&this['_onEndCall'+'back'](this),this['stop']();}['_onManager'+'VolumeChan'+'ge'](){this['volume']=this['_volume'];}['_onManager'+'Suspend'](){this['_state']===Wt&&!this['_suspended']&&(this['_suspended']=!(-0x41b*-0x1+-0x7d8+0x21*0x1d),this['pause']());}['_onManager'+'Resume'](){this['_suspended']&&(this['_suspended']=!(0x3ae+0xaf4+0x7*-0x217),this['resume']());}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['_inputNode']=this['gain'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}['play'](){return this['_state']!==Fs&&this['stop'](),this['_state']=Wt,this['_playWhenL'+'oaded']=!(-0x2*0x6f4+-0x1865+-0x264e*-0x1),this['_waitingCo'+'ntextSuspe'+'nsion']?!(0x98a+0x3*0x163+-0xdb2):this['_manager']['suspended']?(this['_manager']['once']('resume',this['_playAudio'+'Immediate'],this),this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x25a*-0x5+0x1*0x1c10+0x827*-0x2),!(-0xc05+0x3ce+0x2*0x41c)):(this['_playAudio'+'Immediate'](),!(-0x26e3+-0x123*0x16+0x1*0x3fe5));}['_playAudio'+'Immediate'](){if(this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x1*0x1856+0x1787+0xd0),this['_state']!==Wt)return;this['source']||this['_createSou'+'rce']();let _0x54b443=Xt(this['_startOffs'+'et'],this['duration']);_0x54b443=Xt(this['_startTime']+_0x54b443,this['_sound']['duration']),this['_startOffs'+'et']=null,this['_duration']?this['source']['start'](-0x1*-0x923+-0x1965+0x1*0x1042,_0x54b443,this['_duration']):this['source']['start'](0x19e+0x103a*0x1+-0x11d8*0x1,_0x54b443),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentTi'+'me']=-0x2058+0x4+0x2054,this['_currentOf'+'fset']=_0x54b443,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay']();}['pause'](){return this['_playWhenL'+'oaded']=!(0x2175+-0x18db+-0x1*0x899),this['_state']!==Wt?!(0x4a3+-0x44e*0x1+0x7*-0xc):(this['_state']=Za,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_updateCur'+'rentTime'](),this['_suspendEn'+'dEvent']++,this['source']['stop'](0x17c6+0x2*0x1105+-0x39d0),this['source']=null,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause']()),!(0x8c5+-0x2182+0x18bd));}['resume'](){if(this['_state']!==Za)return!(-0x4*0x6be+-0x1*-0x3be+-0x1*-0x173b);let _0x3fe348=this['currentTim'+'e'];return this['_state']=Wt,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['source']||this['_createSou'+'rce'](),this['_startOffs'+'et']!==null&&(_0x3fe348=Xt(this['_startOffs'+'et'],this['duration']),_0x3fe348=Xt(this['_startTime']+_0x3fe348,this['_sound']['duration']),this['_startOffs'+'et']=null),this['_duration']?this['source']['start'](-0x7ab+-0x1f*0xe1+0x1*0x22ea,_0x3fe348,this['_duration']):this['source']['start'](0x1b14+0x11d7*0x2+-0x3ec2,_0x3fe348),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentOf'+'fset']=_0x3fe348,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_playWhenL'+'oaded']=!(-0xedf+-0x1d4c+-0x404*-0xb),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x3*0x6b7+-0x5*0x328+0x11*0x21d);}['stop'](){if(this['_playWhenL'+'oaded']=!(0x1a1e*0x1+-0x2*-0xf6d+0x12fd*-0x3),this['_state']===Fs)return!(0x180a+0x2142+-0x1*0x394b);const _0x2bf802=this['_state']===Wt;return this['_state']=Fs,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_startedAt']=-0x3*-0x9e3+-0x2213+0x46a,this['_currentTi'+'me']=0x1214+0x1d92+-0x2fa6,this['_currentOf'+'fset']=-0x1*-0x173+0x3*-0x368+0x1c1*0x5,this['_startOffs'+'et']=null,this['_suspendEn'+'dEvent']++,_0x2bf802&&this['source']&&this['source']['stop'](-0xc68+0x26e0+-0x1a78),this['source']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop']()),!(-0x1*0x1223+0x92f*-0x1+0x1b52);}['setExterna'+'lNodes'](_0x369abf,_0x5194cf){if(!_0x369abf){console['error']('The\x20firstN'+'ode\x20must\x20b'+'e\x20a\x20valid\x20'+'Audio\x20Node');return;}_0x5194cf||(_0x5194cf=_0x369abf);const _0x46c649=this['_manager']['context']['destinatio'+'n'];this['_firstNode']!==_0x369abf&&(this['_firstNode']?this['_connector'+'Node']['disconnect'](this['_firstNode']):this['_connector'+'Node']['disconnect'](_0x46c649),this['_firstNode']=_0x369abf,this['_connector'+'Node']['connect'](_0x369abf)),this['_lastNode']!==_0x5194cf&&(this['_lastNode']&&this['_lastNode']['disconnect'](_0x46c649),this['_lastNode']=_0x5194cf,this['_lastNode']['connect'](_0x46c649));}['clearExter'+'nalNodes'](){const _0x5db71d=this['_manager']['context']['destinatio'+'n'];this['_firstNode']&&(this['_connector'+'Node']['disconnect'](this['_firstNode']),this['_firstNode']=null),this['_lastNode']&&(this['_lastNode']['disconnect'](_0x5db71d),this['_lastNode']=null),this['_connector'+'Node']['connect'](_0x5db71d);}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_createSou'+'rce'](){if(!this['_sound'])return null;const _0x88bb5e=this['_manager']['context'];return this['_sound']['buffer']&&(this['source']=_0x88bb5e['createBuff'+'erSource'](),this['source']['buffer']=this['_sound']['buffer'],this['source']['connect'](this['_inputNode']),this['source']['onended']=this['_endedHand'+'ler'],this['source']['loopStart']=Xt(this['_startTime'],this['source']['buffer']['duration']),this['_duration']&&(this['source']['loopEnd']=Math['max'](this['source']['loopStart'],Xt(this['_startTime']+this['_duration'],this['source']['buffer']['duration'])))),this['source'];}['_updateCur'+'rentTime'](){this['_currentTi'+'me']=Xt((this['_manager']['context']['currentTim'+'e']-this['_startedAt'])*this['_pitch']+this['_currentOf'+'fset'],this['duration']);}['_onManager'+'Destroy'](){this['source']&&this['_state']===Wt&&(this['source']['stop'](-0x2*0x5b5+0xd40+-0x1d6),this['source']=null);}}h(Ss,'EVENT_PLAY','play'),h(Ss,'EVENT_PAUS'+'E','pause'),h(Ss,'EVENT_RESU'+'ME','resume'),h(Ss,'EVENT_STOP','stop'),h(Ss,'EVENT_END','end'),al()||(Object['assign'](Ss['prototype'],{'play':function(){return this['_state']!==Fs&&this['stop'](),!this['source']&&!this['_createSou'+'rce']()?!(-0x21dd+0x1*-0x12d+-0x230b*-0x1):(this['volume']=this['_volume'],this['pitch']=this['_pitch'],this['loop']=this['_loop'],this['source']['play'](),this['_state']=Wt,this['_playWhenL'+'oaded']=!(0x364+-0x240e+-0x20ab*-0x1),this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_manager']['suspended']&&this['_onManager'+'Suspend'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay'](),!(-0x3e5*-0x5+-0x1*0x18d4+0x55b));},'pause':function(){return!this['source']||this['_state']!==Wt?!(-0x9d3*0x1+0xd64+0x1*-0x390):(this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(0xa6*-0x8+-0x1*-0x26d5+-0x21a4),this['_state']=Za,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause'](),!(0x2113*0x1+-0xd1f+-0x13f4));},'resume':function(){return!this['source']||this['_state']!==Za?!(0x1*0x1699+0x8b*0x7+-0x1a65):(this['_state']=Wt,this['_playWhenL'+'oaded']=!(-0xd19+-0x31+-0x29*-0x53),this['source']['paused']&&(this['source']['play'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(0x5*0xe5+-0x9*-0x3c6+-0x266f));},'stop':function(){return!this['source']||this['_state']===Fs?!(0x79*-0x25+-0x1f21+0x309f):(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(0x182c+-0x100*0x6+0x122b*-0x1),this['_state']=Fs,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop'](),!(-0x86*0x13+0x233*0x11+-0x5*0x57d));},'setExternalNodes':function(){},'clearExternalNodes':function(){},'getExternalNodes':function(){return[null,null];},'_onLoadedMetadata':function(){this['source']['removeEven'+'tListener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['_isReady']=!(-0x1*0x16ef+-0x11a1*0x1+0x3b*0xb0);let _0x51febf=Xt(this['_startOffs'+'et'],this['duration']);_0x51febf=Xt(this['_startTime']+_0x51febf,this['_sound']['duration']),this['_startOffs'+'et']=null,this['source']['currentTim'+'e']=_0x51febf;},'_createSource':function(){return this['_sound']&&this['_sound']['audio']&&(this['_isReady']=!(-0x18e5*-0x1+0x16d8+-0x5*0x98c),this['source']=this['_sound']['audio']['cloneNode'](!(0x49*-0x3f+-0x1286+0x1*0x247d)),this['source']['addEventLi'+'stener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['source']['addEventLi'+'stener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['onended']=this['_endedHand'+'ler']),this['source'];},'_onTimeUpdate':function(){this['_duration']&&this['source']['currentTim'+'e']>Xt(this['_startTime']+this['_duration'],this['source']['duration'])&&(this['loop']?this['source']['currentTim'+'e']=Xt(this['_startTime'],this['source']['duration']):(this['source']['removeEven'+'tListener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['pause'](),this['_onEnded']()));},'_onManagerDestroy':function(){this['source']&&this['source']['pause']();}}),Object['defineProp'+'erty'](Ss['prototype'],'volume',{'get':function(){return this['_volume'];},'set':function(_0x267fb7){_0x267fb7=Y['clamp'](_0x267fb7,0xd61+0x1*0x1628+-0x2389,-0x2a4+0x3*-0x229+-0x92*-0x10),this['_volume']=_0x267fb7,this['source']&&(this['source']['volume']=_0x267fb7*this['_manager']['volume']);}}),Object['defineProp'+'erty'](Ss['prototype'],'pitch',{'get':function(){return this['_pitch'];},'set':function(_0x27b9c6){this['_pitch']=Math['max'](Number(_0x27b9c6)||-0x1*0x689+0x11b*0x1+0x116*0x5,0x84f+0x649+-0x3a6*0x4+0.01),this['source']&&(this['source']['playbackRa'+'te']=this['_pitch']);}}),Object['defineProp'+'erty'](Ss['prototype'],'sound',{'get':function(){return this['_sound'];},'set':function(_0x4b7688){this['stop'](),this['_sound']=_0x4b7688;}}),Object['defineProp'+'erty'](Ss['prototype'],'currentTim'+'e',{'get':function(){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Fs||!this['source']?0x24a6+-0x1ee3+-0x1*0x5c3:this['source']['currentTim'+'e']-this['_startTime'];},'set':function(_0x37f325){_0x37f325<0x1*-0xaa3+-0x2470+0x2f13||(this['_startOffs'+'et']=_0x37f325,this['source']&&this['_isReady']&&(this['source']['currentTim'+'e']=Xt(this['_startTime']+Xt(_0x37f325,this['duration']),this['_sound']['duration']),this['_startOffs'+'et']=null));}}));const zT=-0x6a8+-0x4087*-0x1+0x3c3*-0x5;class Va extends Ss{constructor(_0x5d9004,_0x5f5924,_0x26d9e5={}){super(_0x5d9004,_0x5f5924,_0x26d9e5),h(this,'_position',new I()),h(this,'_velocity',new I()),(_0x26d9e5['position']&&(this['position']=_0x26d9e5['position']),this['maxDistanc'+'e']=_0x26d9e5['maxDistanc'+'e']!==void(-0xda2*0x2+0x5b5*-0x3+0x2c63)?Number(_0x26d9e5['maxDistanc'+'e']):zT,this['refDistanc'+'e']=_0x26d9e5['refDistanc'+'e']!==void(-0xa00+0x6f9+0x1f*0x19)?Number(_0x26d9e5['refDistanc'+'e']):0x1*-0x26a7+0x1f33+0x775,this['rollOffFac'+'tor']=_0x26d9e5['rollOffFac'+'tor']!==void(0x158a+-0x65*-0x5+-0x1783)?Number(_0x26d9e5['rollOffFac'+'tor']):-0x1683*-0x1+0xb*0x1e7+0x2b6f*-0x1,this['distanceMo'+'del']=_0x26d9e5['distanceMo'+'del']!==void(-0x2333+-0x1*-0x1885+-0x2*-0x557)?_0x26d9e5['distanceMo'+'del']:om);}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['panner']=this['_manager']['context']['createPann'+'er'](),this['panner']['connect'](this['gain']),this['_inputNode']=this['panner'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}set['position'](_0x2b633a){this['_position']['copy'](_0x2b633a);const _0x5df972=this['panner'];'positionX'in _0x5df972?(_0x5df972['positionX']['value']=_0x2b633a['x'],_0x5df972['positionY']['value']=_0x2b633a['y'],_0x5df972['positionZ']['value']=_0x2b633a['z']):_0x5df972['setPositio'+'n']&&_0x5df972['setPositio'+'n'](_0x2b633a['x'],_0x2b633a['y'],_0x2b633a['z']);}get['position'](){return this['_position'];}set['velocity'](_0x32231c){M['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity']['copy'](_0x32231c);}get['velocity'](){return M['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity'];}set['maxDistanc'+'e'](_0x153389){this['panner']['maxDistanc'+'e']=_0x153389;}get['maxDistanc'+'e'](){return this['panner']['maxDistanc'+'e'];}set['refDistanc'+'e'](_0x4cc674){this['panner']['refDistanc'+'e']=_0x4cc674;}get['refDistanc'+'e'](){return this['panner']['refDistanc'+'e'];}set['rollOffFac'+'tor'](_0x918e63){this['panner']['rolloffFac'+'tor']=_0x918e63;}get['rollOffFac'+'tor'](){return this['panner']['rolloffFac'+'tor'];}set['distanceMo'+'del'](_0x19d8e4){this['panner']['distanceMo'+'del']=_0x19d8e4;}get['distanceMo'+'del'](){return this['panner']['distanceMo'+'del'];}}if(!al()){let c=new I();const t=function(_0x10dcef,_0xd97d,_0x5ba711,_0x2ec77c,_0x48a7cc,_0x368aa5){c=c['sub2'](_0x10dcef,_0xd97d);const _0x243bba=c['length']();if(_0x243bba<_0x5ba711)return-0x10f*-0x1+-0x1*0xea3+0xd95;if(_0x243bba>_0x2ec77c)return 0x1*0x9a1+0x1a85+-0x2426;let _0x380209=0x2678+0x188d+-0x1*0x3f05;return _0x368aa5===om?_0x380209=-0x448+0xe09*-0x2+0x205b-_0x48a7cc*(_0x243bba-_0x5ba711)/(_0x2ec77c-_0x5ba711):_0x368aa5===FT?_0x380209=_0x5ba711/(_0x5ba711+_0x48a7cc*(_0x243bba-_0x5ba711)):_0x368aa5===NT&&(_0x380209=Math['pow'](_0x243bba/_0x5ba711,-_0x48a7cc)),Y['clamp'](_0x380209,0x1cd*0x6+-0x5*0x72b+0x1909,-0x1df6*0x1+-0x1202+-0x1*-0x2ff9);};Object['defineProp'+'erty'](Va['prototype'],'position',{'get':function(){return this['_position'];},'set':function(_0x534109){if(this['_position']['copy'](_0x534109),this['source']){const _0x201177=this['_manager']['listener']['getPositio'+'n'](),_0x1d6c25=t(_0x201177,this['_position'],this['refDistanc'+'e'],this['maxDistanc'+'e'],this['rollOffFac'+'tor'],this['distanceMo'+'del']),_0x57b140=this['volume'];this['source']['volume']=_0x57b140*_0x1d6c25*this['_manager']['volume'];}}}),Object['defineProp'+'erty'](Va['prototype'],'maxDistanc'+'e',{'get':function(){return this['_maxDistan'+'ce'];},'set':function(_0x1a5c54){this['_maxDistan'+'ce']=_0x1a5c54;}}),Object['defineProp'+'erty'](Va['prototype'],'refDistanc'+'e',{'get':function(){return this['_refDistan'+'ce'];},'set':function(_0x5da59c){this['_refDistan'+'ce']=_0x5da59c;}}),Object['defineProp'+'erty'](Va['prototype'],'rollOffFac'+'tor',{'get':function(){return this['_rollOffFa'+'ctor'];},'set':function(_0x5f050a){this['_rollOffFa'+'ctor']=_0x5f050a;}}),Object['defineProp'+'erty'](Va['prototype'],'distanceMo'+'del',{'get':function(){return this['_distanceM'+'odel'];},'set':function(_0x15a7b5){this['_distanceM'+'odel']=_0x15a7b5;}});}const lm=0x13*-0x115+0x1*-0x833+-0x3*-0x996,hm=-0x2*0x475+0x1a26*-0x1+0x2311*0x1,Gs=0x7d4*-0x3+-0x261a+0x1b*0x248,ys=0xeca+-0x1*0x53b+0xd*-0xbc,bn=0x92f*0x1+-0x521+0x1*-0x40a,cm=-0x21b7+-0x2014+0x15f0*0x3,Yc=-0x1*0x696+0x4eb+0x1b1,dm=0xd3*-0x1+0x2000+-0x1f26,fm=0x4*0x74a+-0x251*-0x8+0xf4*-0x32,um=-0x2403*0x1+-0x129*0x16+-0x47*-0xde,mm=0x273+0xb29+-0x1*0xd92,sy={[lm]:'SUBTRACTIV'+'E',[hm]:'ADDITIVE',[Gs]:'NORMAL',[ys]:'NONE',[bn]:'PREMULTIPL'+'IED',[cm]:'MULTIPLICA'+'TIVE',[Yc]:'ADDITIVEAL'+'PHA',[dm]:'MULTIPLICA'+'TIVE2X',[fm]:'SCREEN',[um]:'MIN',[mm]:'MAX'},On='none',VT='linear',GT=0x17f*0x17+0xc5*-0x2+0x20df*-0x1,pm=0x8a+0x227f+-0x2307,HT={[GT]:'NONE',[pm]:'SCHLICK'},WT=0x316+0x1736*0x1+-0x1a4c,iy=-0x1*0x191c+-0x59c*-0x2+-0x1*-0xdf3,Wi=-0x19f3+0x22c4+-0x8d1,os=-0x6*0x182+0x1687+-0xd7a,_m=0x12d3+0x703+-0x19d4,gm=0x1386+-0x1002+0x45*-0xd,nl=-0x12b1*-0x2+-0x1*0x1cf7+-0x867,ve=0x1010+0x379*0x4+-0x1df4,Ye=0x1*0x1ec6+0x2e0*-0x2+-0x1*0x1905,Ke=-0x85*-0x43+-0x2490+0x1c3*0x1,Cp={[ve]:'DIRECTIONA'+'L',[Ye]:'OMNI',[Ke]:'SPOT'},fh=-0x1e97+-0x1*0xb9b+0x2a96,Vs=0x3*0xa71+0x15d4+0x4d5*-0xb,ry=0x17*0x84+0xe16+-0x19f1,ay=0x2021+-0x13*0x16e+0x4f5*-0x1,ny=0x1ccd+-0x524+0x7e2*-0x3,$T={[Vs]:'PUNCTUAL',[ry]:'RECT',[ay]:'DISK',[ny]:'SPHERE'},Sm=-0x24a6+-0xb*-0xcd+0x1bd7*0x1,oy=0x1cf+-0xfaf+0xde1,XT={[Sm]:'LINEAR',[oy]:'INVERSESQU'+'ARED'},ks=0x15e6+-0x7fa*-0x4+-0x35ce,bf=0x268+-0xb33+0x8cd,ym=0x1d08+0x18ad+-0x35b2,qT=0x8c3+0x25b3+0xa*-0x4a5,ly=0x7c4+0x1d16+0x15*-0x1c1,No=-0x2581*0x1+-0xe84*-0x2+0x87f,hy=-0x103a+0x1f*-0x3e+0x17c3*0x1,cy=0x1d88+-0x1c81+-0xff,jT=0x1*-0x143b+0x1a40+0x1*-0x5fc,Bi=new Map([[ly,{'name':'PCF1_32F','kind':'PCF1','format':ki,'pcf':!(-0x2dd+0x210a+0x19*-0x135)}],[ks,{'name':'PCF3_32F','kind':'PCF3','format':ki,'pcf':!(-0xa0d+-0x1e6e+0x287b)}],[qT,{'name':'PCF5_32F','kind':'PCF5','format':ki,'pcf':!(0x1313+0x2*-0x1334+0x7*0x2c3)}],[hy,{'name':'PCF1_16F','kind':'PCF1','format':an,'pcf':!(0x37*0x9+-0x6*-0xc9+0x237*-0x3)}],[cy,{'name':'PCF3_16F','kind':'PCF3','format':an,'pcf':!(-0x1b1e+-0xc*0x22d+-0x1a9d*-0x2)}],[jT,{'name':'PCF5_16F','kind':'PCF5','format':an,'pcf':!(-0x10f8*0x2+0xbc6*0x2+0x23*0x4c)}],[bf,{'name':'VSM_16F','kind':'VSM','format':at,'vsm':!(0x259e+0x1*0x1a6b+-0x4009)}],[ym,{'name':'VSM_32F','kind':'VSM','format':Bt,'vsm':!(0x302+-0x22ed*-0x1+-0x25ef)}],[No,{'name':'PCSS_32F','kind':'PCSS','format':Hi,'pcss':!(0x1*-0x155c+0x1574+0x3*-0x8)}]]),YT=0x2*-0x12ee+0x121*-0x1+0x2*0x13fe,vm=0x3*0x85f+-0x92*-0x15+0x2*-0x128b,Cf=0x7bb+0x493+-0x41a*0x3,dy=0x1a*0xb2+-0x1*-0x103d+-0x6dd*0x5,Ys=-0x5*0x799+0x1ce7+-0x2*-0x48b,KT=0x5a1*-0x5+-0xb6d+0x3*0xd31,Vh=0x1*0xcda+0x1*-0x1105+-0x61*-0xb,ZT=-0xfc4*0x2+-0x1fcc+0x1*0x3f55,Ks=0x1c6*0x5+-0x6fa+0x2*-0xf2,hn=-0x1255+0x1c49+-0x9f3*0x1,Qa=0x1548+0x42d*-0x6+0x45*0xe,Ir=0x89e+-0x678*-0x4+-0x1*0x227d,Pl=0x1c17+-0x433*-0x5+0x3114*-0x1,xm=0x219a+-0xbdd*-0x1+-0x2d77,fy=0xded+0x166e+-0x245a,QT={[xm]:'NONE',[fy]:'BOX'},Pp='mul',ol=0x1a10+-0x4ac+0x1564*-0x1,uh=-0x2*-0x8a5+0x25d0+-0x3719,JT={[ol]:'NONE',[uh]:'SRGB'},Tm=0x1*-0x4b7+0x1fd3+0xa*-0x2b6,$k=-0x281*0x7+0x9bf+0x7c9,Xk=0xa*-0x3+-0x1c4b*0x1+0x1c6b,qk=0x115*0xd+0x1*0x1d9f+-0x2bad,jk=-0x1*0x1eb2+0x6*0x359+0x220*0x5,Yk=-0x4*-0x976+0x63*-0x5c+-0x23f,uy=0x3*-0x5ce+0x1846+-0x6d6,my=['LINEAR','FILMIC','HEJL','ACES','ACES2','NEUTRAL','NONE'],py=-0x2ca*-0x2+-0xe11+0x87d,Kc=0x106*0x7+-0xa8a+0xad*0x5,_y=0x4*0x939+-0x18f1*0x1+0x1*-0xbf1,ew={[py]:'NONE',[Kc]:'AO',[_y]:'GLOSSDEPEN'+'DENT'},nr='none',Gh='envAtlas',Hh='envAtlasHQ',Wh='cubeMap',gy='sphereMap',tw={[nr]:'NONE',[Gh]:'ENVATLAS',[Hh]:'ENVATLASHQ',[Wh]:'CUBEMAP',[gy]:'SPHEREMAP'},wm='ambientSH',Em='envAtlas',Am='constant',sw={[wm]:'AMBIENTSH',[Em]:'ENVALATLAS',[Am]:'CONSTANT'},$h=-0x79*0x3b+0xca9+-0xf3b*-0x1,ko=-0x3*0x70b+0x13c8+0x15b,bm=-0x1e4f+0x3*-0xcbb+0x4484,Sy=0x150a*-0x1+-0x1*0x232e+-0x6*-0x960,yy=0x201a+-0x149f+-0xb6b*0x1,Uo=-0x20d9*0x1+0x185f+0x89a,Pf=-0x12c3+-0x1195+0x1*0x2498,vy=-0xb41+-0x9f*-0x3d+-0x3*0x8b6,Xh=-0x24cb+0x138a+0x1241*0x1,Cm=-0x1cbf+0x18c1*0x1+0x1*0x5fe,Bo=-0x1*0x167d+-0x1155+0x9e*0x47,zo=-0x1*0x1b21+0x1*0x9e5+0x154*0x13,xy=-0x1cc4+0x1893+-0x3*-0x6bb,Vo=-0x1*0x1bfd+-0xb*-0x12d+-0x27a*-0x13,mh=-0x1*-0x6dc1+-0x7e9b*0x1+0x50da,vs=0xc66+0x12e+-0xd94,or=-0x923*-0x1+0x1e11+-0x2733,Pm=-0xa04+-0x1f1b*0x1+0x2921,ds=-0x1*0x27b+-0x374+0x1*0x5f0,si=0xb9*0x5+0x1c3d+0x4*-0x7f6,ii=0xb*-0x239+-0x2240+-0x3ab7*-0x1,fa=-0x1*0x3a1+-0x259a+-0x1*-0x293b,ll=-0x4e9+-0x9*0x30a+-0xec*-0x23,Mm=-0x1231*0x1+-0xdb5+0x1fe8,Fn=-0x163f+0x1d03+-0x6c1,ei=-0xf7*0x7+-0x62e+-0x7*-0x1d9,Et=-0x1*-0x2176+0xc0*0x14+-0x3075,At=0x5b*-0xe+0x9*-0x284+0x110*0x1a,iw={[ei]:'SIMPLE',[Et]:'SLICED',[At]:'TILED'},ph=0x58*-0x65+-0x15d9+0x3892,Ml=-0x10af*0x2+-0x5*-0x4fe+0x868,_h=0x1cc+-0x79e*-0x4+0x127*-0x1c,rw=-0xe6d+-0x8*0x426+0x1*0x2f9e,aw=0x1d90+0x23*-0x35+0x1*-0x164f,Mp=0x3*-0x134+-0x2*0xd75+0x1e89*0x1,nw=-0x1*-0x584+-0x3*0x4f4+0x2*0x4ae,ow=0x1abc+0x1dd5*0x1+-0x2c*0x149,Im=-0xb4d*0x1+0x2*0x281+0x64b,Mf=-0x19*-0x163+-0x3b9*0x5+0x1*-0x100d,be=0x113a+-0x2*0x1041+0xf48,qe=0x4*0x2ef+0xa99*-0x3+0x1410,So='infinite',lw='box',hw='dome',ra='none',cw='bayer8',dw='bluenoise',fw='ignnoise',uw={[ra]:'NONE',[cw]:'BAYER8',[dw]:'BLUENOISE',[fw]:'IGNNOISE'},mw='prerender',pw='postrender',_w='prerender:'+'layer',gw='postrender'+':layer',Ty='precull',wy='postcull',Sw='cull:end';class Zc{constructor(_0x1b2cfa,_0x2b18ae,_0x39a950){h(this,'uniformFor'+'mats',[]),h(this,'bindGroupF'+'ormats',[]),h(this,'vertexForm'+'at'),(this['uniformFor'+'mats'][Fo]=_0x1b2cfa,this['bindGroupF'+'ormats'][Fo]=_0x2b18ae,this['vertexForm'+'at']=_0x39a950);}['hasUniform'](_0x3b2870){for(let _0x156bf4=-0x24d+0x1b42+-0x18f5;_0x156bf4<this['uniformFor'+'mats']['length'];_0x156bf4++){const _0x2adcc3=this['uniformFor'+'mats'][_0x156bf4];if(_0x2adcc3!=null&&_0x2adcc3['get'](_0x3b2870))return!(-0x14b6+-0x2656+-0x1*-0x3b0c);}return!(0x1ef5+-0x207e*0x1+-0x2*-0xc5);}['hasTexture'](_0x4471ac){for(let _0x5ad206=-0x1*-0x11a1+-0x1*0xcc5+-0x4dc*0x1;_0x5ad206<this['bindGroupF'+'ormats']['length'];_0x5ad206++){const _0x41c3f0=this['bindGroupF'+'ormats'][_0x5ad206];if(_0x41c3f0!=null&&_0x41c3f0['getTexture'](_0x4471ac))return!(-0x1*0x1577+-0x1dc5+0x333c);}return!(-0x1*-0x7e+-0x4*0x4cd+-0x1*-0x12b7);}['getVertexE'+'lement'](_0x486bcf){var _0xe29c69;return(_0xe29c69=this['vertexForm'+'at'])==null?void(0xfa5+0x1*0x1d3f+-0x44*0xa9):_0xe29c69['elements']['find'](_0x31e223=>_0x31e223['name']===_0x486bcf);}['generateKe'+'y'](_0x1ccc77){var _0x4156a3;let _0x59e775=JSON['stringify'](this['uniformFor'+'mats'])+JSON['stringify'](this['bindGroupF'+'ormats']);return _0x1ccc77['isWebGPU']&&(_0x59e775+=(_0x4156a3=this['vertexForm'+'at'])==null?void(0x2f*-0x9b+0x1*-0x23d7+0x404c):_0x4156a3['shaderProc'+'essingHash'+'String']),_0x59e775;}}const Ey=new Ht();function Cn(_0x5e08e6){const _0x5f4863=Ey['get'](_0x5e08e6);return M['assert'](_0x5f4863),_0x5f4863;}function yw(_0x265e1c,_0x33fa1b){M['assert'](_0x33fa1b),Ey['get'](_0x265e1c,()=>_0x33fa1b);}class aa{static['definesHas'+'h'](_0x581a4f){const _0x21ec04=Array['from'](_0x581a4f)['sort']((_0x5e6aa5,_0x4c5ab2)=>_0x5e6aa5[-0x12b6+0x1e8e*-0x1+-0x6*-0x836]>_0x4c5ab2[-0x1f7*0xb+-0x305+0x6*0x41b]?0x21be+-0xab*-0x12+-0xb*0x429:-(-0x10f8+-0xc92+-0x3*-0x9d9));return ti(JSON['stringify'](_0x21ec04));}}const vw=new Ht();class xw{constructor(_0x3ca3f0,_0x56a965,_0x1ad4e8={}){h(this,'index'),h(this,'name'),h(this,'defines',new Map()),(M['assert'](/^[a-z]\w*$/i['test'](_0x3ca3f0),'ShaderPass'+'\x20name\x20can\x20'+'only\x20conta'+'in\x20letters'+',\x20numbers\x20'+'and\x20unders'+'cores\x20and\x20'+'start\x20with'+'\x20a\x20letter:'+'\x20'+_0x3ca3f0),this['name']=_0x3ca3f0,this['index']=_0x56a965,Object['assign'](this,_0x1ad4e8),this['buildShade'+'rDefines']());}['buildShade'+'rDefines'](){let _0x297aea;this['isShadow']?_0x297aea='SHADOW':this['isForward']?_0x297aea='FORWARD':this['index']===Fn&&(_0x297aea='PICK'),this['defines']['set'](_0x297aea+'_PASS',''),this['defines']['set'](this['name']['toUpperCas'+'e']()+'_PASS','');}}class hi{constructor(){h(this,'passesName'+'d',new Map()),h(this,'passesInde'+'xed',[]),h(this,'nextIndex',0x1555+-0x2674+0x111f);const _0x528b2e=(_0x59debc,_0x5dc918,_0x4f1535)=>{const _0x5642ab=this['allocate'](_0x59debc,_0x4f1535);M['assert'](_0x5642ab['index']===_0x5dc918);};_0x528b2e('forward',fa,{'isForward':!(0x79c*0x1+-0x1*-0xac+-0x35*0x28)}),_0x528b2e('prepass',ll),_0x528b2e('shadow',Mm),_0x528b2e('pick',Fn);}static['get'](_0x52c27b){return M['assert'](_0x52c27b),vw['get'](_0x52c27b,()=>new hi());}['allocate'](_0x11ff4c,_0x2d3832){let _0x30cb0e=this['passesName'+'d']['get'](_0x11ff4c);return _0x30cb0e===void(0x6d9*0x3+0x103*-0x11+-0x358)&&(_0x30cb0e=new xw(_0x11ff4c,this['nextIndex'],_0x2d3832),this['passesName'+'d']['set'](_0x30cb0e['name'],_0x30cb0e),this['passesInde'+'xed'][_0x30cb0e['index']]=_0x30cb0e,this['nextIndex']++),_0x30cb0e;}['getByIndex'](_0x1a983e){const _0x48aaf8=this['passesInde'+'xed'][_0x1a983e];return M['assert'](_0x48aaf8),_0x48aaf8;}['getByName'](_0x115641){return this['passesName'+'d']['get'](_0x115641);}}class Ip extends Map{constructor(){super(...arguments),h(this,'_keyDirty',!(-0x4a6*0x8+0x25*-0x86+0x388f)),h(this,'_key','');}['set'](_0x15e15e,_0x1235b6){return(!this['has'](_0x15e15e)||this['get'](_0x15e15e)!==_0x1235b6)&&this['markDirty'](),super['set'](_0x15e15e,_0x1235b6);}['add'](_0x4a0a1a){for(const [_0x2fa652,_0x513864]of Object['entries'](_0x4a0a1a))this['set'](_0x2fa652,_0x513864);return this;}['delete'](_0x2528e0){const _0x231533=this['has'](_0x2528e0),_0x12f6dd=super['delete'](_0x2528e0);return _0x231533&&_0x12f6dd&&this['markDirty'](),_0x12f6dd;}['clear'](){this['size']>0x50d*-0x2+0x2323+0x1d*-0xdd&&this['markDirty'](),super['clear']();}['markDirty'](){this['_dirty']=!(0x1*0x1174+0x119*0xd+-0x1fb9),this['_keyDirty']=!(0x8ff+-0x223*0x7+0x2*0x2fb);}['isDirty'](){return this['_dirty'];}['resetDirty'](){this['_dirty']=!(-0x7*-0x261+0x83*-0x3e+0x78a*0x2);}get['key'](){return this['_keyDirty']&&(this['_keyDirty']=!(0xe96+0x6d*0x45+-0x1*0x2bf6),this['_key']=Array['from'](this['entries']())['sort'](([_0x4dacb9],[_0x4e53cc])=>_0x4dacb9<_0x4e53cc?-(0x90e+-0x1*-0x20f2+-0x29ff):_0x4dacb9>_0x4e53cc?0x1df*-0x7+0x9a0+-0x5*-0xb2:0x167*-0xd+-0x25e*0x1+0x1499*0x1)['map'](([_0x24d4ad,_0x339e3a])=>_0x24d4ad+'='+ti(_0x339e3a))['join'](',')),this['_key'];}['copy'](_0x566857){this['clear']();for(const [_0x5aabb7,_0x207f4a]of _0x566857)this['set'](_0x5aabb7,_0x207f4a);return this;}}const Tw=new Ht();class Ce{constructor(){h(this,'glsl',new Ip()),h(this,'wgsl',new Ip()),h(this,'version','');}static['get'](_0x46cbea,_0x27483a=ze){const _0xc717fa=Tw['get'](_0x46cbea,()=>new Ce());return _0x27483a===ze?_0xc717fa['glsl']:_0xc717fa['wgsl'];}get['useWGSL'](){return this['glsl']['size']===0x175e+0x1*-0x49e+-0x12c0||this['wgsl']['size']>-0x1db3+0x1707+-0x1*-0x6ac;}get['key'](){return'GLSL:'+this['glsl']['key']+'|WGSL:'+this['wgsl']['key']+'|API:'+this['version'];}['isDirty'](){return this['glsl']['isDirty']()||this['wgsl']['isDirty']();}['resetDirty'](){this['glsl']['resetDirty'](),this['wgsl']['resetDirty']();}['copy'](_0x4f7341){return this['version']=_0x4f7341['version'],this['glsl']['copy'](_0x4f7341['glsl']),this['wgsl']['copy'](_0x4f7341['wgsl']),this;}}class qh{static['merge'](..._0x387984){const _0x302a13=new Map(_0x387984[-0x25f9+-0x146a+0x3a63]??[]);for(let _0x531179=-0x1da9+-0x7b8+0x2562;_0x531179<_0x387984['length'];_0x531179++){const _0x165899=_0x387984[_0x531179];if(_0x165899){for(const [_0x3f34b0,_0x2df8df]of _0x165899)_0x302a13['set'](_0x3f34b0,_0x2df8df);}}return _0x302a13;}}class ww extends aa{constructor(_0x512f95,_0x19304a){super(),this['key']=_0x512f95,this['shaderDefi'+'nition']=_0x19304a;}['generateKe'+'y'](_0x1dcc82){return this['key'];}['createShad'+'erDefiniti'+'on'](_0x52adda,_0x1121c4){return this['shaderDefi'+'nition'];}}class Ut{static['createShad'+'er'](_0x4cd1a1,_0x4dab40){const _0x494818=Cn(_0x4cd1a1);let _0x49daa5=_0x494818['getCachedS'+'hader'](_0x4dab40['uniqueName']);if(!_0x49daa5){const _0x3b7848=_0x4cd1a1['isWebGPU']&&(!!_0x4dab40['vertexWGSL']||!!_0x4dab40['vertexChun'+'k'])&&(!!_0x4dab40['fragmentWG'+'SL']||!!_0x4dab40['fragmentCh'+'unk']),_0x4141e1=Ce['get'](_0x4cd1a1,_0x3b7848?st:ze),_0x42fd95=_0x4dab40['vertexChun'+'k']?_0x4141e1['get'](_0x4dab40['vertexChun'+'k']):_0x3b7848?_0x4dab40['vertexWGSL']:_0x4dab40['vertexGLSL'],_0x210f09=_0x4dab40['fragmentCh'+'unk']?_0x4141e1['get'](_0x4dab40['fragmentCh'+'unk']):_0x3b7848?_0x4dab40['fragmentWG'+'SL']:_0x4dab40['fragmentGL'+'SL'];M['assert'](_0x42fd95,'ShaderUtil'+'s.createSh'+'ader:\x20vert'+'ex\x20shader\x20'+'code\x20not\x20p'+'rovided',_0x4dab40),M['assert'](_0x210f09,'ShaderUtil'+'s.createSh'+'ader:\x20frag'+'ment\x20shade'+'r\x20code\x20not'+'\x20provided',_0x4dab40);const _0x162671=qh['merge'](_0x4141e1,_0x4dab40['fragmentIn'+'cludes']),_0x4af183=qh['merge'](_0x4141e1,_0x4dab40['vertexIncl'+'udes']);_0x49daa5=new ey(_0x4cd1a1,$t['createDefi'+'nition'](_0x4cd1a1,{'name':_0x4dab40['uniqueName'],'shaderLanguage':_0x3b7848?st:ze,'attributes':_0x4dab40['attributes'],'vertexCode':_0x42fd95,'fragmentCode':_0x210f09,'useTransformFeedback':_0x4dab40['useTransfo'+'rmFeedback'],'vertexIncludes':_0x4af183,'vertexDefines':_0x4dab40['vertexDefi'+'nes'],'fragmentIncludes':_0x162671,'fragmentDefines':_0x4dab40['fragmentDe'+'fines'],'fragmentOutputTypes':_0x4dab40['fragmentOu'+'tputTypes']})),_0x494818['setCachedS'+'hader'](_0x4dab40['uniqueName'],_0x49daa5);}return _0x49daa5;}static['getCoreDef'+'ines'](_0x1fc13f,_0x24ad4a){const _0x3b0890=new Map(_0x1fc13f['defines']);return _0x24ad4a['cameraShad'+'erParams']['defines']['forEach']((_0x56f7c7,_0x300057)=>_0x3b0890['set'](_0x300057,_0x56f7c7)),hi['get'](_0x24ad4a['device'])['getByIndex'](_0x24ad4a['pass'])['defines']['forEach']((_0xa2448b,_0x108980)=>_0x3b0890['set'](_0x108980,_0xa2448b)),_0x3b0890;}static['processSha'+'der'](_0xe604d,_0x4ef3b7){M['assert'](_0xe604d);const _0x2caac0=_0xe604d['definition'],_0x28d732=(_0x2caac0['name']??'shader')+'-id-'+_0xe604d['id'],_0x1de7f6=new ww(_0x28d732,_0x2caac0),_0x27c884='shader',_0xd489db=Cn(_0xe604d['device']);M['assert'](!_0xd489db['isRegister'+'ed'](_0x27c884)),_0xd489db['register'](_0x27c884,_0x1de7f6);const _0xeb35f2=_0xd489db['getProgram'](_0x27c884,{},_0x4ef3b7);return _0xd489db['unregister'](_0x27c884),_0xeb35f2;}static['addScreenD'+'epthChunkD'+'efines'](_0x422e8d,_0x460593,_0x3ed1aa){_0x460593['sceneDepth'+'MapLinear']&&_0x3ed1aa['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',''),_0x422e8d['textureFlo'+'atRenderab'+'le']&&_0x3ed1aa['set']('SCENE_DEPT'+'HMAP_FLOAT','');}}const Ew={'type':cr,'base':0x0,'baseVertex':0x0,'count':0x4,'indexed':!(-0x73d+-0x2*0xf4f+0x4*0x977)},Bn=new ae(),zn=new ae(),fd=new WS();class jh{constructor(_0x48122b){h(this,'uniformBuf'+'fer'),h(this,'bindGroup');const _0x25e463=_0x48122b['device'];if(this['shader']=_0x48122b,M['assert'](_0x48122b),_0x25e463['supportsUn'+'iformBuffe'+'rs']){const _0x17bb78=new Zc();this['shader']=Ut['processSha'+'der'](_0x48122b,_0x17bb78);const _0x221f7d=this['shader']['meshUnifor'+'mBufferFor'+'mat'];_0x221f7d&&(this['uniformBuf'+'fer']=new nm(_0x25e463,_0x221f7d,!(0x1039+0x159d+0x791*-0x5)));const _0x410575=this['shader']['meshBindGr'+'oupFormat'];M['assert'](_0x410575),this['bindGroup']=new rm(_0x25e463,_0x410575),ca['setName'](this['bindGroup'],'QuadRender'+'-MeshBindG'+'roup_'+this['bindGroup']['id']);}}['destroy'](){var _0x4d505a,_0x392906;(_0x4d505a=this['uniformBuf'+'fer'])==null||_0x4d505a['destroy'](),this['uniformBuf'+'fer']=null,(_0x392906=this['bindGroup'])==null||_0x392906['destroy'](),this['bindGroup']=null;}['render'](_0x12a5bb,_0x29ecea){const _0x40aa1f=this['shader']['device'];Q['pushGpuMar'+'ker'](_0x40aa1f,'QuadRender'),_0x12a5bb&&(Bn['set'](_0x40aa1f['vx'],_0x40aa1f['vy'],_0x40aa1f['vw'],_0x40aa1f['vh']),zn['set'](_0x40aa1f['sx'],_0x40aa1f['sy'],_0x40aa1f['sw'],_0x40aa1f['sh']),_0x29ecea=_0x29ecea??_0x12a5bb,_0x40aa1f['setViewpor'+'t'](_0x12a5bb['x'],_0x12a5bb['y'],_0x12a5bb['z'],_0x12a5bb['w']),_0x40aa1f['setScissor'](_0x29ecea['x'],_0x29ecea['y'],_0x29ecea['z'],_0x29ecea['w'])),_0x40aa1f['setVertexB'+'uffer'](_0x40aa1f['quadVertex'+'Buffer'],-0x1f57+-0xa69+-0x14e*-0x20);const _0x54d179=this['shader'];if(_0x40aa1f['setShader'](_0x54d179),_0x40aa1f['supportsUn'+'iformBuffe'+'rs']){_0x40aa1f['setBindGro'+'up'](Fo,_0x40aa1f['emptyBindG'+'roup']);const _0x1c747d=this['bindGroup'];_0x1c747d['update'](),_0x40aa1f['setBindGro'+'up'](VS,_0x1c747d);const _0x5a94d7=this['uniformBuf'+'fer'];_0x5a94d7?(_0x5a94d7['update'](fd),_0x40aa1f['setBindGro'+'up'](wf,fd['bindGroup'],fd['offsets'])):_0x40aa1f['setBindGro'+'up'](wf,_0x40aa1f['emptyBindG'+'roup']);}_0x40aa1f['draw'](Ew),_0x12a5bb&&(_0x40aa1f['setViewpor'+'t'](Bn['x'],Bn['y'],Bn['z'],Bn['w']),_0x40aa1f['setScissor'](zn['x'],zn['y'],zn['z'],zn['w'])),Q['popGpuMark'+'er'](_0x40aa1f);}}class Aw extends fs{constructor(_0x266ce3,_0x427d28,_0x371f5e,_0x58628f){super(_0x266ce3),this['quad']=_0x427d28,this['rect']=_0x371f5e,this['scissorRec'+'t']=_0x58628f;}['execute'](){const {device:_0x82302f}=this;Q['pushGpuMar'+'ker'](_0x82302f,this['name']+':'+this['quad']['shader']['name']),_0x82302f['setCullMod'+'e'](xt),_0x82302f['setDepthSt'+'ate'](Kt['NODEPTH']),_0x82302f['setStencil'+'State'](null,null),this['quad']['render'](this['rect'],this['scissorRec'+'t']),Q['popGpuMark'+'er'](_0x82302f);}}const bw=new ae();function fr(_0x50dbb1,_0x33af43,_0x4a2e0b,_0x41d571,_0x405e1d){M['assert'](_0x33af43!==void(-0x9*0x257+0x5a7*-0x5+0x6b*0x76));const _0x174682=arguments[-0x159*0xb+-0x1303+-0x1b*-0x141];M['call'](()=>{_0x174682!==void(0x1*-0x19cf+-0x60a+0x1fd9)&&M['warnOnce']('pc.drawQua'+'dWithShade'+'r\x20no\x20longe'+'r\x20accepts\x20'+'useBlend\x20p'+'arameter,\x20'+'and\x20blendi'+'ng\x20state\x20n'+'eeds\x20to\x20be'+'\x20set\x20up\x20us'+'ing\x20Graphi'+'csDevice.s'+'etBlendSta'+'te.');});const _0x3ac4a0=new jh(_0x4a2e0b);_0x41d571||(_0x41d571=bw,_0x41d571['x']=-0x1*0x21e3+-0x16c+-0x1*-0x234f,_0x41d571['y']=0x17d8+-0x16f6+-0xe2,_0x41d571['z']=_0x33af43?_0x33af43['width']:_0x50dbb1['width'],_0x41d571['w']=_0x33af43?_0x33af43['height']:_0x50dbb1['height']);const _0xda143e=new Aw(_0x50dbb1,_0x3ac4a0,_0x41d571,_0x405e1d);_0xda143e['init'](_0x33af43),_0xda143e['colorOps']['clear']=!(0x5d4+0x25ed+0x19*-0x1c0),_0xda143e['depthStenc'+'ilOps']['clearDepth']=!(0x2178+0x3ea+-0x2561),_0x50dbb1['isWebGPU']&&_0x33af43===null&&_0x50dbb1['samples']>-0x2*-0x641+0x20f7+-0xf28*0x3&&(_0xda143e['colorOps']['store']=!(0x3b9*-0x6+0x24cf+-0xe79)),_0xda143e['render'](),_0x3ac4a0['destroy']();}class Dp{constructor(_0x5d89d4,_0x515847,_0x3734ae){h(this,'_aabb',new Ie()),h(this,'origMeshIn'+'stances'),h(this,'meshInstan'+'ce',null),h(this,'dynamic'),h(this,'batchGroup'+'Id'),(this['origMeshIn'+'stances']=_0x5d89d4,this['dynamic']=_0x515847,this['batchGroup'+'Id']=_0x3734ae);}['destroy'](_0x8c98ee,_0x51c24d){this['meshInstan'+'ce']&&(this['removeFrom'+'Layers'](_0x8c98ee,_0x51c24d),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}['addToLayer'+'s'](_0x2584cb,_0x1e9c12){for(let _0x49717c=0x1*0x183f+-0x26d0+-0xb*-0x153;_0x49717c<_0x1e9c12['length'];_0x49717c++){const _0x4da8b2=_0x2584cb['layers']['getLayerBy'+'Id'](_0x1e9c12[_0x49717c]);_0x4da8b2&&_0x4da8b2['addMeshIns'+'tances']([this['meshInstan'+'ce']]);}}['removeFrom'+'Layers'](_0x157216,_0x406e5e){for(let _0x5b6bc8=0x1*0x113c+0x19d1+-0x2b0d;_0x5b6bc8<_0x406e5e['length'];_0x5b6bc8++){const _0x298944=_0x157216['layers']['getLayerBy'+'Id'](_0x406e5e[_0x5b6bc8]);_0x298944&&_0x298944['removeMesh'+'Instances']([this['meshInstan'+'ce']]);}}['updateBoun'+'dingBox'](){this['_aabb']['copy'](this['origMeshIn'+'stances'][0x4c1*-0x7+0xdab*0x2+0x5f1]['aabb']);for(let _0x5e9ebe=-0x10*-0x1eb+-0x16cc+-0x7e3;_0x5e9ebe<this['origMeshIn'+'stances']['length'];_0x5e9ebe++)this['_aabb']['add'](this['origMeshIn'+'stances'][_0x5e9ebe]['aabb']);this['meshInstan'+'ce']['aabb']=this['_aabb'],this['meshInstan'+'ce']['_aabbVer']=0x247a+-0x1*-0x7eb+-0x2c65;}get['model'](){M['removed']('pc.Batch#m'+'odel\x20was\x20r'+'emoved.\x20Us'+'e\x20pc.Batch'+'#meshInsta'+'nce\x20to\x20acc'+'ess\x20batche'+'d\x20mesh\x20ins'+'tead.');}}class mt{constructor(_0x5b2f00,_0x50d7a7,_0x4976eb,_0x3ee177,_0x32360c=[Wi]){h(this,'_ui',!(-0x14d0+0x3d7+0x10fa)),h(this,'_sprite',!(0x68b+-0x14dc+0xe52)),h(this,'_obj',{'model':[],'element':[],'sprite':[],'render':[]}),h(this,'id'),h(this,'name'),h(this,'dynamic'),h(this,'maxAabbSiz'+'e'),h(this,'layers'),(this['id']=_0x5b2f00,this['name']=_0x50d7a7,this['dynamic']=_0x4976eb,this['maxAabbSiz'+'e']=_0x3ee177,this['layers']=_0x32360c);}}h(mt,'MODEL','model'),h(mt,'ELEMENT','element'),h(mt,'SPRITE','sprite'),h(mt,'RENDER','render');const Lp=new te();class hl{constructor(_0xe7ea2c){h(this,'bones'),(this['_dirty']=!(-0x1d*-0xad+0xc*-0x15d+-0x33d),this['_rootBone']=null,this['_skinUpdat'+'eIndex']=-(-0x365+-0x23ec+0x2cf*0xe),this['_updateBef'+'oreCull']=!(0xeaa+0x1*-0x137b+-0x3*-0x19b),_0xe7ea2c&&this['initSkin'](_0xe7ea2c));}set['rootBone'](_0xd42bab){this['_rootBone']=_0xd42bab;}get['rootBone'](){return this['_rootBone'];}['init'](_0x3f881e,_0x17645d){const _0x5a30a4=_0x17645d*(-0x973*0x2+0x3f4+0xef5);let _0xc73aac=Math['ceil'](Math['sqrt'](_0x5a30a4));_0xc73aac=Y['roundUp'](_0xc73aac,0xac6+0x3e4+-0xea7);const _0x7e438b=Math['ceil'](_0x5a30a4/_0xc73aac);this['boneTextur'+'e']=new _e(_0x3f881e,{'width':_0xc73aac,'height':_0x7e438b,'format':Bt,'mipmaps':!(-0xc7f*0x2+-0xb3f+0x243e),'minFilter':Te,'magFilter':Te,'name':'skin'}),this['matrixPale'+'tte']=this['boneTextur'+'e']['lock']({'mode':bS}),this['boneTextur'+'e']['unlock']();}['destroy'](){this['boneTextur'+'e']&&(this['boneTextur'+'e']['destroy'](),this['boneTextur'+'e']=null);}['resolve'](_0x319f03,_0x1d57c4){this['rootBone']=_0x319f03;const _0x2efdce=this['skin'],_0x47aa1c=[];for(let _0x4b5542=-0x1a58+0x3*-0x847+0x332d;_0x4b5542<_0x2efdce['boneNames']['length'];_0x4b5542++){const _0x43cd2b=_0x2efdce['boneNames'][_0x4b5542];let _0x4056ed=_0x319f03['findByName'](_0x43cd2b);_0x4056ed||(M['error']('Failed\x20to\x20'+'find\x20bone\x20'+'['+_0x43cd2b+(']\x20in\x20the\x20e'+'ntity\x20hier'+'archy,\x20Ren'+'derCompone'+'nt\x20on\x20')+_0x1d57c4['name']+(',\x20rootBone'+':\x20')+_0x319f03['name']),_0x4056ed=_0x1d57c4),_0x47aa1c['push'](_0x4056ed);}this['bones']=_0x47aa1c;}['initSkin'](_0x199a1c){this['skin']=_0x199a1c,this['bones']=[];const _0x2285fb=_0x199a1c['inverseBin'+'dPose']['length'];this['init'](_0x199a1c['device'],_0x2285fb),this['matrices']=[];for(let _0x4c6c3d=-0x3*0xc58+-0xc77*0x3+0x4a6d;_0x4c6c3d<_0x2285fb;_0x4c6c3d++)this['matrices'][_0x4c6c3d]=new te();}['uploadBone'+'s'](_0x3332a4){this['boneTextur'+'e']['upload']();}['_updateMat'+'rices'](_0x22be62,_0x553d71){if(this['_skinUpdat'+'eIndex']!==_0x553d71){this['_skinUpdat'+'eIndex']=_0x553d71,Lp['copy'](_0x22be62['getWorldTr'+'ansform']())['invert']();for(let _0x532e2c=this['bones']['length']-(0x1a9*-0x9+0x34c+-0x3e2*-0x3);_0x532e2c>=-0x19fb+-0x1*-0x1f76+-0x57b;_0x532e2c--)this['matrices'][_0x532e2c]['mulAffine2'](Lp,this['bones'][_0x532e2c]['getWorldTr'+'ansform']()),this['matrices'][_0x532e2c]['mulAffine2'](this['matrices'][_0x532e2c],this['skin']['inverseBin'+'dPose'][_0x532e2c]);}}['updateMatr'+'ices'](_0x2fb9a0,_0x8a6cf4){this['_updateBef'+'oreCull']&&this['_updateMat'+'rices'](_0x2fb9a0,_0x8a6cf4);}['updateMatr'+'ixPalette'](_0x539844,_0xa023c6){this['_updateMat'+'rices'](_0x539844,_0xa023c6);const _0x26eb2e=this['matrixPale'+'tte'],_0x29b84a=this['bones']['length'];for(let _0x68c480=-0xbd*-0x25+-0x2196+0x645;_0x68c480<_0x29b84a;_0x68c480++){const _0x4cadf6=this['matrices'][_0x68c480]['data'],_0x3a320d=_0x68c480*(0x2*-0x2ce+-0x16cf*-0x1+0x1127*-0x1);_0x26eb2e[_0x3a320d]=_0x4cadf6[-0x15f2+-0x18e6+0x2ed8],_0x26eb2e[_0x3a320d+(0x359*-0x1+0xeeb+-0x9*0x149)]=_0x4cadf6[0x26cb*-0x1+-0x1ea6*0x1+0x4575],_0x26eb2e[_0x3a320d+(-0x2409+-0x6*-0x4b4+-0x7d3*-0x1)]=_0x4cadf6[-0x1*0x597+-0x2109+0x2*0x1354],_0x26eb2e[_0x3a320d+(-0x1994+0x262d+-0x2*0x64b)]=_0x4cadf6[0x1d*-0x7f+0x7b3+0x6bc],_0x26eb2e[_0x3a320d+(-0x1d5a+0xb*-0x2dd+0x3cdd)]=_0x4cadf6[-0x1c0+-0x1738+0x18f9*0x1],_0x26eb2e[_0x3a320d+(-0xa38*0x2+0x233d+-0xec8)]=_0x4cadf6[-0x632+0x833+-0x1fc],_0x26eb2e[_0x3a320d+(-0xd39*-0x1+0x159*0xb+-0x1c06)]=_0x4cadf6[0x16*-0x7+-0xbff*0x1+0xca2],_0x26eb2e[_0x3a320d+(0x6d*-0x1+0x1681+-0x160d)]=_0x4cadf6[0x346*-0x4+-0x237a+-0x1cd*-0x1b],_0x26eb2e[_0x3a320d+(0x266c*-0x1+-0x447*-0x2+0x1de6)]=_0x4cadf6[-0x7af*-0x5+-0x107*-0x6+-0x2c93],_0x26eb2e[_0x3a320d+(0x2678*0x1+-0xc6a*-0x1+-0x32d9)]=_0x4cadf6[-0xa84+0x1125+-0x59*0x13],_0x26eb2e[_0x3a320d+(0x1228+-0x266+-0xfb8)]=_0x4cadf6[0x1*0x789+-0x180a+0x108b],_0x26eb2e[_0x3a320d+(-0x9b7*-0x2+0x3*0x9c7+-0x1*0x30b8)]=_0x4cadf6[-0xb9e+0x568*-0x1+0x1114];}this['uploadBone'+'s'](this['skin']['device']);}}class Rp extends hl{constructor(_0x596f0a,_0x584f1e,_0x19faa){super();const _0x282a50=_0x584f1e['length'];this['init'](_0x596f0a,_0x282a50),this['device']=_0x596f0a,this['rootNode']=_0x19faa,this['bones']=_0x584f1e;}['updateMatr'+'ices'](_0x1cb387,_0x2fd484){}['updateMatr'+'ixPalette'](_0x33b09b,_0x16aad9){const _0x4dde62=this['matrixPale'+'tte'],_0xfa9909=this['bones']['length'];for(let _0x6c3be9=0x10ee+0xd0f+-0x1dfd;_0x6c3be9<_0xfa9909;_0x6c3be9++){const _0x359bc2=this['bones'][_0x6c3be9]['getWorldTr'+'ansform']()['data'],_0x5eaf83=_0x6c3be9*(0x2fb+-0xef*-0x19+0x3b*-0x72);_0x4dde62[_0x5eaf83]=_0x359bc2[-0x792+0xd1b+0x1*-0x589],_0x4dde62[_0x5eaf83+(0x7ef*0x3+0x1622*0x1+-0x2dee)]=_0x359bc2[0x1725+0x496+-0x1bb7*0x1],_0x4dde62[_0x5eaf83+(0x121*-0x3+0x5*0x112+-0x1f5)]=_0x359bc2[-0x1*-0x1d39+-0x96a+-0x1*0x13c7],_0x4dde62[_0x5eaf83+(0x1559+0x19b0+-0x39e*0xd)]=_0x359bc2[0x1995+-0x5*0x7c0+-0x11*-0xc7],_0x4dde62[_0x5eaf83+(0x11d1*0x1+-0xb07*-0x1+-0x1*0x1cd4)]=_0x359bc2[0x18c3*-0x1+-0x106f+0xc7*0x35],_0x4dde62[_0x5eaf83+(-0x15f5+0x11ef+-0xf*-0x45)]=_0x359bc2[-0xa42+0x22aa+-0x1863],_0x4dde62[_0x5eaf83+(0x3a*0x49+-0x8ef+-0x795)]=_0x359bc2[0x1f20+0xc01*-0x2+-0x715*0x1],_0x4dde62[_0x5eaf83+(0xa0c+0x265+-0xc6a)]=_0x359bc2[-0x5*-0x13f+-0x10*-0x19e+0x2*-0x1007],_0x4dde62[_0x5eaf83+(0x1bb3+-0x286*-0x7+-0x2d55)]=_0x359bc2[-0x9*0x437+-0x2c8*-0x1+0x2329*0x1],_0x4dde62[_0x5eaf83+(-0x151*-0x3+-0x1*-0x170f+-0x1af9)]=_0x359bc2[-0x40e*0x1+0x1*-0xba2+-0x1*-0xfb6],_0x4dde62[_0x5eaf83+(0x15b*-0x9+0x1cb+0xa72)]=_0x359bc2[0x6a1+-0xf53+0x8bc],_0x4dde62[_0x5eaf83+(-0x779*0x4+-0x1624+0x3413)]=_0x359bc2[-0x10e1+-0x1654+-0x13*-0x211];}this['uploadBone'+'s'](this['device']);}}let Cw=0x291+0x21ea+-0x247b;class Zs{constructor(){this['initDefaul'+'ts']();}['initDefaul'+'ts'](){this['recreate']=!(-0xd*0x22f+-0x213f+0x1fd*0x1f),this['verticesUs'+'age']=ls,this['indicesUsa'+'ge']=ls,this['maxVertice'+'s']=-0x1*-0xe90+-0x1a0f+-0xb7f*-0x1,this['maxIndices']=-0x3*0x90f+-0x5*0x404+0x2f41,this['vertexCoun'+'t']=0x1169+0x217c+0x2b*-0x12f,this['indexCount']=-0x31b*-0x2+0x100a*-0x2+0x19de,this['vertexStre'+'amsUpdated']=!(0x15*0x1ab+-0xc8f*0x1+-0x1677),this['indexStrea'+'mUpdated']=!(-0x4a*0x2+0xcc9+-0xc34),this['vertexStre'+'amDictiona'+'ry']={},this['indices']=null;}['_changeVer'+'texCount'](_0x4daceb,_0x23ee0e){this['vertexCoun'+'t']?M['assert'](this['vertexCoun'+'t']===_0x4daceb,'Vertex\x20str'+'eam\x20'+_0x23ee0e+'\x20has\x20'+_0x4daceb+('\x20vertices,'+'\x20which\x20doe'+'s\x20not\x20matc'+'h\x20already\x20'+'set\x20stream'+'s\x20with\x20')+this['vertexCoun'+'t']+'\x20vertices.'):this['vertexCoun'+'t']=_0x4daceb;}}h(Zs,'DEFAULT_CO'+'MPONENTS_P'+'OSITION',-0x3*-0xd03+0x11b1+-0x38b7),h(Zs,'DEFAULT_CO'+'MPONENTS_N'+'ORMAL',0x1*-0x22bd+-0x591+-0x1*-0x2851),h(Zs,'DEFAULT_CO'+'MPONENTS_U'+'V',-0x110d*-0x1+-0x1600+-0x8d*-0x9),h(Zs,'DEFAULT_CO'+'MPONENTS_C'+'OLORS',-0x11f3*-0x1+0xd9+0x1*-0x12c8);class Pw{constructor(_0x21d664,_0x45f488,_0x455d61,_0x41f38e,_0x21cba3){this['data']=_0x21d664,this['componentC'+'ount']=_0x45f488,this['dataType']=_0x455d61,this['dataTypeNo'+'rmalize']=_0x41f38e,this['asInt']=_0x21cba3;}}class Ge extends jc{constructor(_0x42087d,_0x2a421a){super(),h(this,'indexBuffe'+'r',[null]),h(this,'vertexBuff'+'er',null),h(this,'primitive',[{'type':0x0,'base':0x0,'baseVertex':0x0,'count':0x0}]),h(this,'skin',null),h(this,'boneAabb',null),h(this,'_aabbVer',0x268f+-0x48e*0x1+0x2201*-0x1),h(this,'_aabb',new Ie()),h(this,'_geometryD'+'ata',null),h(this,'_morph',null),h(this,'_storageIn'+'dex',!(0x1cf+0xec6+-0x1094)),h(this,'_storageVe'+'rtex',!(0x1680+0x1*0xd55+0x1*-0x23d4)),(this['id']=Cw++,M['assert'](_0x42087d,'Mesh\x20const'+'ructor\x20tak'+'es\x20a\x20Graph'+'icsDevice\x20'+'as\x20a\x20param'+'eter,\x20and\x20'+'it\x20was\x20not'+'\x20provided.'),this['device']=_0x42087d,this['_storageIn'+'dex']=(_0x2a421a==null?void(0x2099*-0x1+-0x7b3+0x284c):_0x2a421a['storageInd'+'ex'])||!(0x113e+-0x2b+-0x1112),this['_storageVe'+'rtex']=(_0x2a421a==null?void(-0x7d3*-0x1+0x5*-0x2c2+-0x1*-0x5f7):_0x2a421a['storageVer'+'tex'])||!(0x1558+0x1b4a+-0x30a1));}static['fromGeomet'+'ry'](_0x186ce5,_0x5b02cb,_0x29acc9={}){const _0x4f89c7=new Ge(_0x186ce5,_0x29acc9),{positions:_0x1c7757,normals:_0x23a32e,tangents:_0x195e6c,colors:_0x2b0977,uvs:_0x4c26da,uvs1:_0x22cd3e,blendIndices:_0x1894ef,blendWeights:_0x17ee8e,indices:_0x2374ca}=_0x5b02cb;return _0x1c7757&&_0x4f89c7['setPositio'+'ns'](_0x1c7757),_0x23a32e&&_0x4f89c7['setNormals'](_0x23a32e),_0x195e6c&&_0x4f89c7['setVertexS'+'tream'](ci,_0x195e6c,0x1746+-0x1*-0x2708+-0x77*0x86),_0x2b0977&&_0x4f89c7['setColors3'+'2'](_0x2b0977),_0x4c26da&&_0x4f89c7['setUvs'](0x1*0x10e2+0x3*0xa08+-0x2efa,_0x4c26da),_0x22cd3e&&_0x4f89c7['setUvs'](-0xfb5*0x1+-0x115*0x1c+0x2e02,_0x22cd3e),_0x1894ef&&_0x4f89c7['setVertexS'+'tream'](ns,_0x1894ef,-0x140*-0x5+-0x1740+0xf2*0x12,_0x1894ef['length']/(0x12c7+0x1bff+-0x6ae*0x7),Xr),_0x17ee8e&&_0x4f89c7['setVertexS'+'tream'](li,_0x17ee8e,-0x2465+0x1361*0x1+0x14*0xda),_0x2374ca&&_0x4f89c7['setIndices'](_0x2374ca),_0x4f89c7['update'](),_0x4f89c7;}set['morph'](_0x1d77a4){_0x1d77a4!==this['_morph']&&(this['_morph']&&this['_morph']['decRefCoun'+'t'](),this['_morph']=_0x1d77a4,_0x1d77a4&&_0x1d77a4['incRefCoun'+'t']());}get['morph'](){return this['_morph'];}set['aabb'](_0x35ea6d){this['_aabb']=_0x35ea6d,this['_aabbVer']++;}get['aabb'](){return this['_aabb'];}['destroy'](){const _0x28a4bb=this['morph'];_0x28a4bb&&(this['morph']=null,_0x28a4bb['refCount']<0x1247+0x4b8*-0x5+0x2*0x2a9&&_0x28a4bb['destroy']()),this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);for(let _0x239474=-0x9c0+-0x823*-0x2+0x686*-0x1;_0x239474<this['indexBuffe'+'r']['length'];_0x239474++)this['_destroyIn'+'dexBuffer'](_0x239474);this['indexBuffe'+'r']['length']=0x34c*0x3+-0x28*0x43+0x1*0x94,this['_geometryD'+'ata']=null;}['_destroyIn'+'dexBuffer'](_0x3d47ad){this['indexBuffe'+'r'][_0x3d47ad]&&(this['indexBuffe'+'r'][_0x3d47ad]['destroy'](),this['indexBuffe'+'r'][_0x3d47ad]=null);}['_initBoneA'+'abbs'](_0x4ed7b9){this['boneAabb']=[],this['boneUsed']=[];let _0x1b5c49,_0x323a2a,_0x449adf,_0x2622bd,_0x5d70c2;const _0x50e10a=[],_0x47c63d=[],_0x155d40=this['boneUsed'],_0x5c7bce=this['skin']['boneNames']['length'];let _0x560928,_0x3d71ef,_0x4ae61a;for(let _0xf3a0e=-0x253*-0x7+-0x1d1f+-0xa*-0x149;_0xf3a0e<_0x5c7bce;_0xf3a0e++)_0x50e10a[_0xf3a0e]=new I(Number['MAX_VALUE'],Number['MAX_VALUE'],Number['MAX_VALUE']),_0x47c63d[_0xf3a0e]=new I(-Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);const _0x2b2ff5=new go(this['vertexBuff'+'er']),_0x8158a2=_0x2b2ff5['element'][Pe],_0x25c049=_0x2b2ff5['element'][li],_0xf97590=_0x2b2ff5['element'][ns],_0x512c33=this['vertexBuff'+'er']['numVertice'+'s'];for(let _0x33a9de=-0x13*0x106+0xc*-0x319+0x389e;_0x33a9de<_0x512c33;_0x33a9de++){for(let _0x2c162d=0x1*0x3c7+-0x160c+0x1*0x1245;_0x2c162d<-0x692+-0x933+0xfc9;_0x2c162d++)if(_0x25c049['array'][_0x25c049['index']+_0x2c162d]>0x6e*-0x49+0x10e2+0x9*0x19c){const _0x351ccf=_0xf97590['array'][_0xf97590['index']+_0x2c162d];if(_0x155d40[_0x351ccf]=!(-0x1616+0x1771+-0x15b*0x1),_0x1b5c49=_0x8158a2['array'][_0x8158a2['index']],_0x323a2a=_0x8158a2['array'][_0x8158a2['index']+(0x95*-0x4+-0x3*0xa11+0x2088)],_0x449adf=_0x8158a2['array'][_0x8158a2['index']+(0x1069+0x202+-0x1269)],_0x2622bd=_0x47c63d[_0x351ccf],_0x5d70c2=_0x50e10a[_0x351ccf],_0x5d70c2['x']>_0x1b5c49&&(_0x5d70c2['x']=_0x1b5c49),_0x5d70c2['y']>_0x323a2a&&(_0x5d70c2['y']=_0x323a2a),_0x5d70c2['z']>_0x449adf&&(_0x5d70c2['z']=_0x449adf),_0x2622bd['x']<_0x1b5c49&&(_0x2622bd['x']=_0x1b5c49),_0x2622bd['y']<_0x323a2a&&(_0x2622bd['y']=_0x323a2a),_0x2622bd['z']<_0x449adf&&(_0x2622bd['z']=_0x449adf),_0x4ed7b9){let _0x1dc950=_0x560928=_0x1b5c49,_0x3f19c3=_0x3d71ef=_0x323a2a,_0x55f910=_0x4ae61a=_0x449adf;for(let _0x45f3aa=-0x25*0x1+-0x2*0xd8a+-0x3*-0x913;_0x45f3aa<_0x4ed7b9['length'];_0x45f3aa++){const _0x31441d=_0x4ed7b9[_0x45f3aa],_0x28d91a=_0x31441d['deltaPosit'+'ions'][_0x33a9de*(-0x4c*0x5e+-0xb6*0x22+0x7*0x771)],_0xad4ef0=_0x31441d['deltaPosit'+'ions'][_0x33a9de*(-0xfd4*-0x1+0x1c1f+0x25*-0x130)+(0xa9f+-0xa*0x290+0xf02)],_0x4c3878=_0x31441d['deltaPosit'+'ions'][_0x33a9de*(-0x1696+-0x1ff0*0x1+0x3689)+(0xb73+-0x3fa*-0x5+-0x1f53)];_0x28d91a<0x9*0x223+-0x17f2+0x4b7?_0x1dc950+=_0x28d91a:_0x560928+=_0x28d91a,_0xad4ef0<-0x8*0x1fc+0xede+-0x1*-0x102?_0x3f19c3+=_0xad4ef0:_0x3d71ef+=_0xad4ef0,_0x4c3878<0x1fdf+-0x25*-0xe5+-0x40f8?_0x55f910+=_0x4c3878:_0x4ae61a+=_0x4c3878;}_0x5d70c2['x']>_0x1dc950&&(_0x5d70c2['x']=_0x1dc950),_0x5d70c2['y']>_0x3f19c3&&(_0x5d70c2['y']=_0x3f19c3),_0x5d70c2['z']>_0x55f910&&(_0x5d70c2['z']=_0x55f910),_0x2622bd['x']<_0x560928&&(_0x2622bd['x']=_0x560928),_0x2622bd['y']<_0x3d71ef&&(_0x2622bd['y']=_0x3d71ef),_0x2622bd['z']<_0x4ae61a&&(_0x2622bd['z']=_0x4ae61a);}}_0x2b2ff5['next']();}const _0x14d911=this['vertexBuff'+'er']['getFormat']()['elements']['find'](_0x4e983c=>_0x4e983c['name']===Pe);if(_0x14d911&&_0x14d911['normalize']){const _0x13ed64=((()=>{switch(_0x14d911['dataType']){case Nc:return _0x5abfa4=>Math['max'](_0x5abfa4/(-0x21e3+0x77e*-0x4+0x405a),-(-0x894+0x26*0x6a+-0x727));case Xr:return _0x363835=>_0x363835/(0x667*-0x2+-0x1*0x53a+-0x1307*-0x1);case kc:return _0x6cf24c=>Math['max'](_0x6cf24c/(-0x55d*-0x18+-0xdfb2+0x167*0x9f),-(-0x13*-0x65+-0x4d*-0x22+-0x11b8*0x1));case rl:return _0xf543b0=>_0xf543b0/(0x24b6+-0x1*-0x1351b+-0x59d2);default:return _0x7a9f32=>_0x7a9f32;}})());for(let _0x170357=-0x402+-0x567*-0x5+-0x1701;_0x170357<_0x5c7bce;_0x170357++)if(_0x155d40[_0x170357]){const _0xf5f1fa=_0x50e10a[_0x170357],_0x50b74d=_0x47c63d[_0x170357];_0xf5f1fa['set'](_0x13ed64(_0xf5f1fa['x']),_0x13ed64(_0xf5f1fa['y']),_0x13ed64(_0xf5f1fa['z'])),_0x50b74d['set'](_0x13ed64(_0x50b74d['x']),_0x13ed64(_0x50b74d['y']),_0x13ed64(_0x50b74d['z']));}}for(let _0x11d139=-0x61*0x5+0x5*0x517+-0x178e;_0x11d139<_0x5c7bce;_0x11d139++){const _0x453d5a=new Ie();_0x453d5a['setMinMax'](_0x50e10a[_0x11d139],_0x47c63d[_0x11d139]),this['boneAabb']['push'](_0x453d5a);}}['_initGeome'+'tryData'](){this['_geometryD'+'ata']||(this['_geometryD'+'ata']=new Zs(),this['vertexBuff'+'er']&&(this['_geometryD'+'ata']['vertexCoun'+'t']=this['vertexBuff'+'er']['numVertice'+'s'],this['_geometryD'+'ata']['maxVertice'+'s']=this['vertexBuff'+'er']['numVertice'+'s']),this['indexBuffe'+'r']['length']>0x25*-0x25+0xecb+0x1*-0x972&&this['indexBuffe'+'r'][-0x133*-0x2+0x6b*0x4+-0x412]&&(this['_geometryD'+'ata']['indexCount']=this['indexBuffe'+'r'][0x1966+0x1*0x32f+-0x10f*0x1b]['numIndices'],this['_geometryD'+'ata']['maxIndices']=this['indexBuffe'+'r'][-0x1ca8+0x434+0x139*0x14]['numIndices']));}['clear'](_0x26f9fb,_0xc92558,_0x4cf5e3=0x18b3+-0xe12+-0xaa1,_0xe2714a=0x606+0x15*0x11b+-0x1d3d){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['initDefaul'+'ts'](),this['_geometryD'+'ata']['recreate']=!(-0xed*0x27+-0xbf3+-0x1*-0x300e),this['_geometryD'+'ata']['maxVertice'+'s']=_0x4cf5e3,this['_geometryD'+'ata']['maxIndices']=_0xe2714a,this['_geometryD'+'ata']['verticesUs'+'age']=_0x26f9fb?ls:Mh,this['_geometryD'+'ata']['indicesUsa'+'ge']=_0xc92558?ls:Mh;}['setVertexS'+'tream'](_0x2abb88,_0x5271a3,_0x386aa9,_0x2c027d,_0x126f90=Be,_0x447752=!(-0x579+-0x1439+0x891*0x3),_0x90cb4a=!(0x1606*-0x1+-0x3*-0xc86+0x17*-0xad)){this['_initGeome'+'tryData']();const _0x243c76=_0x2c027d||_0x5271a3['length']/_0x386aa9;this['_geometryD'+'ata']['_changeVer'+'texCount'](_0x243c76,_0x2abb88),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(0xc2d+0x5*0x1d+-0xcbe),this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x2abb88]=new Pw(_0x5271a3,_0x386aa9,_0x126f90,_0x447752,_0x90cb4a);}['getVertexS'+'tream'](_0xf20ae5,_0x241f29){let _0xeceb49=0x7*-0xa6+0x76d+-0x1*0x2e3,_0x5a6797=!(-0xb*-0x1+0x219a+-0x869*0x4);if(this['_geometryD'+'ata']){const _0x3fe096=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0xf20ae5];_0x3fe096&&(_0x5a6797=!(0x2*-0xa38+-0x5*0x57b+-0x1*-0x2fd7),_0xeceb49=this['_geometryD'+'ata']['vertexCoun'+'t'],ArrayBuffer['isView'](_0x241f29)?_0x241f29['set'](_0x3fe096['data']):(_0x241f29['length']=0xe47+-0x917+-0x530,_0x241f29['push'](_0x3fe096['data'])));}return _0x5a6797||this['vertexBuff'+'er']&&(_0xeceb49=new go(this['vertexBuff'+'er'])['readData'](_0xf20ae5,_0x241f29)),_0xeceb49;}['setPositio'+'ns'](_0x4cb4ad,_0x2613db=Zs['DEFAULT_CO'+'MPONENTS_P'+'OSITION'],_0x5d9dff){this['setVertexS'+'tream'](Pe,_0x4cb4ad,_0x2613db,_0x5d9dff,Be,!(-0x2*-0x374+-0x23fa+0x3*0x9b1));}['setNormals'](_0x4d68d7,_0x3a62ef=Zs['DEFAULT_CO'+'MPONENTS_N'+'ORMAL'],_0x105695){this['setVertexS'+'tream'](cs,_0x4d68d7,_0x3a62ef,_0x105695,Be,!(0x191*0x1+0x20ec+-0x227c));}['setUvs'](_0x48385a,_0x75a338,_0x4d90bd=Zs['DEFAULT_CO'+'MPONENTS_U'+'V'],_0x3ca7a1){this['setVertexS'+'tream'](tp+_0x48385a,_0x75a338,_0x4d90bd,_0x3ca7a1,Be,!(-0x1*-0x265a+-0x359*-0x4+0x3*-0x113f));}['setColors'](_0x44f1c7,_0x5ccbe1=Zs['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x5b0266){this['setVertexS'+'tream'](kt,_0x44f1c7,_0x5ccbe1,_0x5b0266,Be,!(-0x20f3+0x2d0+-0x1e24*-0x1));}['setColors3'+'2'](_0xfb3d4e,_0x160c40){this['setVertexS'+'tream'](kt,_0xfb3d4e,Zs['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x160c40,Xr,!(0x53*-0x13+-0x71*0x23+0x159c));}['setIndices'](_0x25b7dc,_0x43034b){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x18d7+-0x221a+0x943*0x1),this['_geometryD'+'ata']['indices']=_0x25b7dc,this['_geometryD'+'ata']['indexCount']=_0x43034b||_0x25b7dc['length'];}['getPositio'+'ns'](_0x381b60){return this['getVertexS'+'tream'](Pe,_0x381b60);}['getNormals'](_0x39ca28){return this['getVertexS'+'tream'](cs,_0x39ca28);}['getUvs'](_0x2ba3fa,_0x400993){return this['getVertexS'+'tream'](tp+_0x2ba3fa,_0x400993);}['getColors'](_0x189fcf){return this['getVertexS'+'tream'](kt,_0x189fcf);}['getIndices'](_0x269258){let _0x5bc4a7=0x60f+0x1*0x1c66+0x2275*-0x1;if(this['_geometryD'+'ata']&&this['_geometryD'+'ata']['indices']){const _0x49afc9=this['_geometryD'+'ata']['indices'];if(_0x5bc4a7=this['_geometryD'+'ata']['indexCount'],ArrayBuffer['isView'](_0x269258))_0x269258['set'](_0x49afc9);else{_0x269258['length']=0x11d9+-0x647*-0x1+-0x1820;for(let _0x16c751=0x2*-0x6e4+0x65e+0x3b5*0x2,_0x3387c7=_0x49afc9['length'];_0x16c751<_0x3387c7;_0x16c751++)_0x269258['push'](_0x49afc9[_0x16c751]);}}else this['indexBuffe'+'r']['length']>0x1*0xb03+-0x34f*-0x7+0xb64*-0x3&&this['indexBuffe'+'r'][0x2*0x11b5+-0x122*-0x14+-0x3a12*0x1]&&(_0x5bc4a7=this['indexBuffe'+'r'][0x3*-0x86b+0x3df*0x1+0xee*0x17]['readData'](_0x269258));return _0x5bc4a7;}['update'](_0x38231d=zs,_0x1113ee=!(0x1*0x9b3+0x955*-0x3+-0x124c*-0x1)){if(this['_geometryD'+'ata']){if(_0x1113ee){const _0x1becbc=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][Pe];_0x1becbc&&_0x1becbc['componentC'+'ount']===-0x4d7+0x25e0+0xb02*-0x3&&(this['_aabb']['compute'](_0x1becbc['data'],this['_geometryD'+'ata']['vertexCoun'+'t']),this['_aabbVer']++);}let _0x19c2c6=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['vertexCoun'+'t']>this['_geometryD'+'ata']['maxVertice'+'s']&&(_0x19c2c6=!(-0x20ca+-0xb27*-0x1+0x15a3),this['_geometryD'+'ata']['maxVertice'+'s']=this['_geometryD'+'ata']['vertexCoun'+'t']),_0x19c2c6&&this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);let _0x21be8a=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['indexCount']>this['_geometryD'+'ata']['maxIndices']&&(_0x21be8a=!(0x397*-0xa+-0x15*-0x147+0x17*0x65),this['_geometryD'+'ata']['maxIndices']=this['_geometryD'+'ata']['indexCount']),_0x21be8a&&this['indexBuffe'+'r']['length']>0x1ce1+-0x137b+0x1*-0x966&&this['indexBuffe'+'r'][0xbc0+-0x8a+0x52*-0x23]&&(this['indexBuffe'+'r'][0x5*0x6d3+0x3*0x207+-0x2834]['destroy'](),this['indexBuffe'+'r'][-0xb5a+0xb8*0x4+0x87a]=null),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&this['_updateVer'+'texBuffer'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&this['_updateInd'+'exBuffer'](),this['primitive'][0x4c*0x5+-0x1*-0x1832+-0x19ae]['type']=_0x38231d,this['indexBuffe'+'r']['length']>0x506*0x1+-0x3f0+-0x116&&this['indexBuffe'+'r'][0x19f6+0x1ea6+-0x389c*0x1]?this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&(this['primitive'][0xaa1+-0x1*0x4a+0x1*-0xa57]['count']=this['_geometryD'+'ata']['indexCount'],this['primitive'][0xf04*-0x1+0x1ec5*0x1+0xfc1*-0x1]['indexed']=!(-0x3d7*0x1+-0x1*-0x6bc+-0x2e5)):this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&(this['primitive'][-0x1*-0xc46+-0x1d3*-0x9+-0x1cb1]['count']=this['_geometryD'+'ata']['vertexCoun'+'t'],this['primitive'][0x1*0x25a2+-0xca0+-0x1902]['indexed']=!(0x6a4+-0x19c0+0x131d)),this['_geometryD'+'ata']['vertexCoun'+'t']=0x6*-0xfe+-0x1c6b+0x225f,this['_geometryD'+'ata']['indexCount']=-0x26f*-0x5+0x1*-0xb88+0x1*-0xa3,this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0xa1b+-0x554*-0x3+-0x4*0x178),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x17*-0xc6+0x38e*-0x7+-0x19*-0x1b5),this['_geometryD'+'ata']['recreate']=!(0x1997+-0xc75+-0xd21),this['updateRend'+'erStates']();}}['_buildVert'+'exFormat'](_0x558828){const _0x522a00=[];for(const _0x162b33 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x4e12c7=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x162b33];_0x522a00['push']({'semantic':_0x162b33,'components':_0x4e12c7['componentC'+'ount'],'type':_0x4e12c7['dataType'],'normalize':_0x4e12c7['dataTypeNo'+'rmalize'],'asInt':_0x4e12c7['asInt']});}return new zt(this['device'],_0x522a00,_0x558828);}['_updateVer'+'texBuffer'](){if(!this['vertexBuff'+'er']){const _0x473b27=this['_geometryD'+'ata']['maxVertice'+'s'],_0x231003=this['_buildVert'+'exFormat'](_0x473b27);this['vertexBuff'+'er']=new xs(this['device'],_0x231003,_0x473b27,{'usage':this['_geometryD'+'ata']['verticesUs'+'age'],'storage':this['_storageVe'+'rtex']});}const _0x343dde=new go(this['vertexBuff'+'er']),_0x5aea9f=this['_geometryD'+'ata']['vertexCoun'+'t'];for(const _0xf8b077 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x2bb285=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0xf8b077];_0x343dde['writeData'](_0xf8b077,_0x2bb285['data'],_0x5aea9f),delete this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0xf8b077];}_0x343dde['end']();}['_updateInd'+'exBuffer'](){if(this['indexBuffe'+'r']['length']<=-0x68*0x45+-0x11*0x1b1+0x38c9*0x1||!this['indexBuffe'+'r'][0x764+0x2f5*0x5+-0x162d]){const _0x4a05cc=this['_geometryD'+'ata']['maxVertice'+'s'],_0x14d955=_0x4a05cc>-0x1b997+0x25*0xa3f+0x13e7b||_0x4a05cc===-0xa61*0x2+-0x18f*0x1+0x1651?hr:zi,_0x4f7656=this['_storageIn'+'dex']?{'storage':!(0x7*-0x4c7+-0x6ad*0x5+0x42d2*0x1)}:void(0x2f*-0x52+-0x5f*-0x19+0x33*0x1d);this['indexBuffe'+'r'][-0x1*0x12c4+-0x26dc+0x39a0]=new dr(this['device'],_0x14d955,this['_geometryD'+'ata']['maxIndices'],this['_geometryD'+'ata']['indicesUsa'+'ge'],void(-0x10f6*0x1+-0x145d+0x1*0x2553),_0x4f7656);}const _0x4ab243=this['_geometryD'+'ata']['indices'];_0x4ab243&&(this['indexBuffe'+'r'][-0x15*-0x56+0x6b2+-0xdc0]['writeData'](_0x4ab243,this['_geometryD'+'ata']['indexCount']),this['_geometryD'+'ata']['indices']=null);}['prepareRen'+'derState'](_0x1f3f55){_0x1f3f55===Ir?this['generateWi'+'reframe']():_0x1f3f55===Pl&&(this['primitive'][Pl]={'type':Oc,'base':0x0,'baseVertex':0x0,'count':this['vertexBuff'+'er']?this['vertexBuff'+'er']['numVertice'+'s']:0x13de+-0x7ce+0x4*-0x304,'indexed':!(-0x9dd*0x1+0x523*-0x4+-0x22*-0xe5)});}['updateRend'+'erStates'](){this['primitive'][Pl]&&this['prepareRen'+'derState'](Pl),this['primitive'][Ir]&&this['prepareRen'+'derState'](Ir);}['generateWi'+'reframe'](){this['_destroyIn'+'dexBuffer'](Ir);const _0x418366=this['vertexBuff'+'er']['numVertice'+'s'],_0x48b56e=[];let _0x2fb97b;if(this['indexBuffe'+'r']['length']>-0x582+-0x1*0x15b8+-0x5*-0x572&&this['indexBuffe'+'r'][-0xb43+-0x1*-0x11bd+-0x67a]){const _0x3422c9=[[-0x1*-0x66a+0xc29*0x2+-0x1ebc,0x1083+0x19d1+-0x1*0x2a53],[0xbfa+0x1*0x1a23+-0x261c,0x1bd*-0x15+-0x11f3*-0x1+0x1290],[-0x26*-0xdb+-0x2498+0x106*0x4,-0x1*-0x14d9+0x137*-0xb+0x77c*-0x1]],_0x46a732=this['primitive'][Qa]['base'],_0x285d86=this['primitive'][Qa]['count'],_0x5a55e1=this['primitive'][Qa]['baseVertex']||0x21c*-0x11+0x1*-0x21c1+-0x1*-0x459d,_0x295d83=this['indexBuffe'+'r'][Qa],_0x4a1ea3=new Bh[_0x295d83['format']](_0x295d83['storage']),_0x219cea=new Set();for(let _0x399c02=_0x46a732;_0x399c02<_0x46a732+_0x285d86;_0x399c02+=0x1de+0x23e6+-0x1*0x25c1)for(let _0x5a4b6f=0x1b28+-0x1*0xc41+-0xee7;_0x5a4b6f<-0x4*0x958+0x1c9+0x239a;_0x5a4b6f++){const _0x45150e=_0x4a1ea3[_0x399c02+_0x3422c9[_0x5a4b6f][0x6*0x43b+-0xa2c+-0x512*0x3]]+_0x5a55e1,_0x3871e5=_0x4a1ea3[_0x399c02+_0x3422c9[_0x5a4b6f][0x1*-0xfe1+-0x448*0x1+-0x142a*-0x1]]+_0x5a55e1,_0x411638=_0x45150e>_0x3871e5?_0x3871e5*_0x418366+_0x45150e:_0x45150e*_0x418366+_0x3871e5;_0x219cea['has'](_0x411638)||(_0x219cea['add'](_0x411638),_0x48b56e['push'](_0x45150e,_0x3871e5));}_0x2fb97b=_0x295d83['format'];}else{for(let _0x3c2530=-0x198d+0x1d*0xa9+0x668;_0x3c2530<_0x418366;_0x3c2530+=-0x14a2*-0x1+-0xa98*0x1+-0xa07)_0x48b56e['push'](_0x3c2530,_0x3c2530+(0x23*-0x119+-0x9*0x2b0+-0xfa7*-0x4),_0x3c2530+(-0x2*-0x10bb+0x1*-0x15f7+-0x2*0x5bf),_0x3c2530+(0x2*0xfc9+0x14f3+0x1181*-0x3),_0x3c2530+(0x724*0x1+0x16c0+-0x1de2),_0x3c2530);_0x2fb97b=_0x48b56e['length']>-0xda9*-0xb+0xef3d+-0x8581?hr:zi;}const _0xf9649=new dr(this['vertexBuff'+'er']['device'],_0x2fb97b,_0x48b56e['length']);new Bh[_0xf9649['format']](_0xf9649['storage'])['set'](_0x48b56e),_0xf9649['unlock'](),this['primitive'][Ir]={'type':Fc,'base':0x0,'baseVertex':0x0,'count':_0x48b56e['length'],'indexed':!(0x1*-0xcd9+-0x4*0x355+0x1a2d*0x1)},this['indexBuffe'+'r'][Ir]=_0xf9649;}}const Op=new te(),ud=new I(),Fp=new le(),md=new le(),Np=new I(),kp=new I(),Mw=new te(),Iw=new le(),Zt=new I(),Vn=new te(),Qt=new le(),Sa=new le(),Up=new te(),pd=new I(),Il=new I();function Bp(_0x574322,_0x4e2131){return _0x574322 instanceof Function?_0x574322:_0x7f5f55=>{let _0x269e78=_0x7f5f55[_0x574322];return _0x269e78 instanceof Function&&(_0x269e78=_0x269e78()),_0x269e78===_0x4e2131;};}function Ay(_0x1ea1ee,_0x3d08f9){if(_0x3d08f9(_0x1ea1ee))return _0x1ea1ee;const _0x2d8161=_0x1ea1ee['_children'],_0x45316d=_0x2d8161['length'];for(let _0x317a63=-0x23a*-0xa+0x22e2+0x2*-0x1c93;_0x317a63<_0x45316d;++_0x317a63){const _0x4b0f5f=Ay(_0x2d8161[_0x317a63],_0x3d08f9);if(_0x4b0f5f)return _0x4b0f5f;}return null;}class He extends pe{constructor(_0x124e73='Untitled'){super(),h(this,'name'),h(this,'tags',new uo(this)),h(this,'localPosit'+'ion',new I()),h(this,'localRotat'+'ion',new le()),h(this,'localScale',new I(-0xd25+0x1581+-0x3*0x2c9,-0x43*0x2f+0x239d*-0x1+0x2feb,0x12d7+0x1*0x1a75+-0x2d4b)),h(this,'localEuler'+'Angles',new I()),h(this,'position',new I()),h(this,'rotation',new le()),h(this,'eulerAngle'+'s',new I()),h(this,'_scale',null),h(this,'localTrans'+'form',new te()),h(this,'_dirtyLoca'+'l',!(0x1*0x2199+0x1*-0x2119+-0x7f)),h(this,'_aabbVer',-0xfa3*-0x1+0xdf*-0x26+-0x1177*-0x1),h(this,'_frozen',!(0x9d*-0x6+0x1075*0x1+0x442*-0x3)),h(this,'worldTrans'+'form',new te()),h(this,'_dirtyWorl'+'d',!(-0x5bb*-0x1+0xb3e+-0xc*0x16a)),h(this,'_worldScal'+'eSign',0xe*0x3b+-0x1830+0x14f6),h(this,'_normalMat'+'rix',new oi()),h(this,'_dirtyNorm'+'al',!(0x48e+0xca1+-0x112f)),h(this,'_right',null),h(this,'_up',null),h(this,'_forward',null),h(this,'_parent',null),h(this,'_children',[]),h(this,'_graphDept'+'h',-0x1*-0x1e9a+-0x25d3+-0x2b*-0x2b),h(this,'_enabled',!(0x946+-0xca*-0x5+-0x234*0x6)),h(this,'_enabledIn'+'Hierarchy',!(0x1bb*-0x7+0x1346+0x2*-0x394)),h(this,'scaleCompe'+'nsation',!(-0x18d*-0x13+0xe1f*-0x1+-0x231*0x7)),this['name']=_0x124e73;}get['right'](){return this['_right']||(this['_right']=new I()),this['getWorldTr'+'ansform']()['getX'](this['_right'])['normalize']();}get['up'](){return this['_up']||(this['_up']=new I()),this['getWorldTr'+'ansform']()['getY'](this['_up'])['normalize']();}get['forward'](){return this['_forward']||(this['_forward']=new I()),this['getWorldTr'+'ansform']()['getZ'](this['_forward'])['normalize']()['mulScalar'](-(-0x123d*0x1+0x43*0x69+-0x93d));}get['normalMatr'+'ix'](){const _0x2d3592=this['_normalMat'+'rix'];return this['_dirtyNorm'+'al']&&(_0x2d3592['invertMat4'](this['getWorldTr'+'ansform']())['transpose'](),this['_dirtyNorm'+'al']=!(0x21dd+-0x1*0x665+-0x4f*0x59)),_0x2d3592;}set['enabled'](_0x1c7731){var _0x233699;this['_enabled']!==_0x1c7731&&(this['_enabled']=_0x1c7731,(_0x1c7731&&((_0x233699=this['_parent'])!=null&&_0x233699['enabled'])||!_0x1c7731)&&this['_notifyHie'+'rarchyStat'+'eChanged'](this,_0x1c7731));}get['enabled'](){return this['_enabled']&&this['_enabledIn'+'Hierarchy'];}get['parent'](){return this['_parent'];}get['path'](){let _0x41470a=this['_parent'];if(!_0x41470a)return'';let _0x2b5633=this['name'];for(;_0x41470a&&_0x41470a['_parent'];)_0x2b5633=_0x41470a['name']+'/'+_0x2b5633,_0x41470a=_0x41470a['_parent'];return _0x2b5633;}get['root'](){let _0x156acf=this;for(;_0x156acf['_parent'];)_0x156acf=_0x156acf['_parent'];return _0x156acf;}get['children'](){return this['_children'];}get['graphDepth'](){return this['_graphDept'+'h'];}['_notifyHie'+'rarchyStat'+'eChanged'](_0x1a18ac,_0x22fbff){_0x1a18ac['_onHierarc'+'hyStateCha'+'nged'](_0x22fbff);const _0x1f81a5=_0x1a18ac['_children'];for(let _0xfb5ad1=-0x100b+-0xf*0xd9+-0x996*-0x3,_0x24f20f=_0x1f81a5['length'];_0xfb5ad1<_0x24f20f;_0xfb5ad1++)_0x1f81a5[_0xfb5ad1]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x1f81a5[_0xfb5ad1],_0x22fbff);}['_onHierarc'+'hyStateCha'+'nged'](_0x967b23){this['_enabledIn'+'Hierarchy']=_0x967b23,_0x967b23&&!this['_frozen']&&this['_unfreezeP'+'arentToRoo'+'t']();}['_cloneInte'+'rnal'](_0x2a9bee){_0x2a9bee['name']=this['name'];const _0x4e2117=this['tags']['_list'];_0x2a9bee['tags']['clear']();for(let _0x350744=-0x15c3+0x85b+0xd68;_0x350744<_0x4e2117['length'];_0x350744++)_0x2a9bee['tags']['add'](_0x4e2117[_0x350744]);_0x2a9bee['localPosit'+'ion']['copy'](this['localPosit'+'ion']),_0x2a9bee['localRotat'+'ion']['copy'](this['localRotat'+'ion']),_0x2a9bee['localScale']['copy'](this['localScale']),_0x2a9bee['localEuler'+'Angles']['copy'](this['localEuler'+'Angles']),_0x2a9bee['position']['copy'](this['position']),_0x2a9bee['rotation']['copy'](this['rotation']),_0x2a9bee['eulerAngle'+'s']['copy'](this['eulerAngle'+'s']),_0x2a9bee['localTrans'+'form']['copy'](this['localTrans'+'form']),_0x2a9bee['_dirtyLoca'+'l']=this['_dirtyLoca'+'l'],_0x2a9bee['worldTrans'+'form']['copy'](this['worldTrans'+'form']),_0x2a9bee['_dirtyWorl'+'d']=this['_dirtyWorl'+'d'],_0x2a9bee['_dirtyNorm'+'al']=this['_dirtyNorm'+'al'],_0x2a9bee['_aabbVer']=this['_aabbVer']+(-0x1cf4+0xa1f*0x2+0x8b7*0x1),_0x2a9bee['_enabled']=this['_enabled'],_0x2a9bee['scaleCompe'+'nsation']=this['scaleCompe'+'nsation'],_0x2a9bee['_enabledIn'+'Hierarchy']=!(0xec3+-0x8cd+0x1*-0x5f5);}['clone'](){const _0x22424c=new this['constructo'+'r']();return this['_cloneInte'+'rnal'](_0x22424c),_0x22424c;}['copy'](_0x38f106){return _0x38f106['_cloneInte'+'rnal'](this),this;}['destroy'](){this['remove']();const _0x2076ef=this['_children'];for(;_0x2076ef['length'];){const _0x595390=_0x2076ef['pop']();_0x595390['_parent']=null,_0x595390['destroy']();}this['fire']('destroy',this),this['off']();}['find'](_0x4b3de2,_0x5730d1){const _0x13f1cc=[],_0x318978=Bp(_0x4b3de2,_0x5730d1);return this['forEach'](_0x5038fc=>{_0x318978(_0x5038fc)&&_0x13f1cc['push'](_0x5038fc);}),_0x13f1cc;}['findOne'](_0x1c39de,_0x165237){const _0x344235=Bp(_0x1c39de,_0x165237);return Ay(this,_0x344235);}['findByTag'](..._0x492a94){const _0x212b66=[],_0x42761f=(_0x2d9315,_0x5df3d3)=>{_0x5df3d3&&_0x2d9315['tags']['has'](..._0x492a94)&&_0x212b66['push'](_0x2d9315);for(let _0x73f6ce=-0x3f9*0x3+-0x170c+0x22f7;_0x73f6ce<_0x2d9315['_children']['length'];_0x73f6ce++)_0x42761f(_0x2d9315['_children'][_0x73f6ce],!(-0x439*0x7+-0x7*-0x181+0x1308));};return _0x42761f(this,!(-0x145f+0x199*0x1+0xb*0x1b5)),_0x212b66;}['findByName'](_0x382936){return this['findOne']('name',_0x382936);}['findByPath'](_0x572741){const _0x25bd29=Array['isArray'](_0x572741)?_0x572741:_0x572741['split']('/');let _0x2c136c=this;for(let _0x2fb35d=-0x3fd*-0x1+-0x4cc+0xcf,_0x5632e3=_0x25bd29['length'];_0x2fb35d<_0x5632e3;++_0x2fb35d)if(_0x2c136c=_0x2c136c['children']['find'](_0x58e12f=>_0x58e12f['name']===_0x25bd29[_0x2fb35d]),!_0x2c136c)return null;return _0x2c136c;}['forEach'](_0x2e3e3b,_0x5affcd){_0x2e3e3b['call'](_0x5affcd,this);const _0x5d335c=this['_children'],_0x11511a=_0x5d335c['length'];for(let _0x43f1df=-0x6fc+0xb31+0x1*-0x435;_0x43f1df<_0x11511a;++_0x43f1df)_0x5d335c[_0x43f1df]['forEach'](_0x2e3e3b,_0x5affcd);}['isDescenda'+'ntOf'](_0x425e23){let _0x200fad=this['_parent'];for(;_0x200fad;){if(_0x200fad===_0x425e23)return!(-0x7f*0x35+-0x15ea+0x3035);_0x200fad=_0x200fad['_parent'];}return!(0x5*0xf4+0x2627*0x1+-0x2aea);}['isAncestor'+'Of'](_0x383cc2){return _0x383cc2['isDescenda'+'ntOf'](this);}['getEulerAn'+'gles'](){return this['getWorldTr'+'ansform']()['getEulerAn'+'gles'](this['eulerAngle'+'s']),this['eulerAngle'+'s'];}['getLocalEu'+'lerAngles'](){return this['localRotat'+'ion']['getEulerAn'+'gles'](this['localEuler'+'Angles']),this['localEuler'+'Angles'];}['getLocalPo'+'sition'](){return this['localPosit'+'ion'];}['getLocalRo'+'tation'](){return this['localRotat'+'ion'];}['getLocalSc'+'ale'](){return this['localScale'];}['getLocalTr'+'ansform'](){return this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x482+0xfe9+-0xb66)),this['localTrans'+'form'];}['getPositio'+'n'](){return this['getWorldTr'+'ansform']()['getTransla'+'tion'](this['position']),this['position'];}['getRotatio'+'n'](){return this['rotation']['setFromMat'+'4'](this['getWorldTr'+'ansform']()),this['rotation'];}['getScale'](){return this['_scale']||(this['_scale']=new I()),this['getWorldTr'+'ansform']()['getScale'](this['_scale']);}['getWorldTr'+'ansform'](){return!this['_dirtyLoca'+'l']&&!this['_dirtyWorl'+'d']?this['worldTrans'+'form']:(this['_parent']&&this['_parent']['getWorldTr'+'ansform'](),this['_sync'](),this['worldTrans'+'form']);}get['worldScale'+'Sign'](){return this['_worldScal'+'eSign']===-0x1cb0+0x96d+0x1343*0x1&&(this['_worldScal'+'eSign']=this['getWorldTr'+'ansform']()['scaleSign']),this['_worldScal'+'eSign'];}['remove'](){var _0x2f44b1;(_0x2f44b1=this['_parent'])==null||_0x2f44b1['removeChil'+'d'](this);}['reparent'](_0x7ecbd2,_0x1db8e0){this['remove'](),_0x7ecbd2&&(_0x1db8e0>=0x8d1+-0x53*0x78+0x1e17?_0x7ecbd2['insertChil'+'d'](this,_0x1db8e0):_0x7ecbd2['addChild'](this));}['setLocalEu'+'lerAngles'](_0x473385,_0x483467,_0x22c492){this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x473385,_0x483467,_0x22c492),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalPo'+'sition'](_0x57cd33,_0x3ca5cb,_0x3b622a){_0x57cd33 instanceof I?this['localPosit'+'ion']['copy'](_0x57cd33):this['localPosit'+'ion']['set'](_0x57cd33,_0x3ca5cb,_0x3b622a),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalRo'+'tation'](_0x4eddcd,_0x124ac8,_0x31de29,_0x333b30){_0x4eddcd instanceof le?this['localRotat'+'ion']['copy'](_0x4eddcd):this['localRotat'+'ion']['set'](_0x4eddcd,_0x124ac8,_0x31de29,_0x333b30),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalSc'+'ale'](_0xbb3cd2,_0x5c7968,_0x51a753){_0xbb3cd2 instanceof I?this['localScale']['copy'](_0xbb3cd2):this['localScale']['set'](_0xbb3cd2,_0x5c7968,_0x51a753),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_dirtifyLo'+'cal'](){this['_dirtyLoca'+'l']||(this['_dirtyLoca'+'l']=!(0x1a9+0x1fb7+-0x2160),this['_dirtyWorl'+'d']||this['_dirtifyWo'+'rld']());}['_unfreezeP'+'arentToRoo'+'t'](){let _0x4c9a42=this['_parent'];for(;_0x4c9a42;)_0x4c9a42['_frozen']=!(0xcff+0x17c*0x1+0x22*-0x6d),_0x4c9a42=_0x4c9a42['_parent'];}['_dirtifyWo'+'rld'](){this['_dirtyWorl'+'d']||this['_unfreezeP'+'arentToRoo'+'t'](),this['_dirtifyWo'+'rldInterna'+'l']();}['_dirtifyWo'+'rldInterna'+'l'](){if(!this['_dirtyWorl'+'d']){this['_frozen']=!(0x1f73+0x2144*-0x1+0x1*0x1d2),this['_dirtyWorl'+'d']=!(0x11*-0xd+-0x25f*0xe+0x220f);for(let _0x3a5f0a=-0x9*0x147+-0x24a6+-0x1a9*-0x1d;_0x3a5f0a<this['_children']['length'];_0x3a5f0a++)this['_children'][_0x3a5f0a]['_dirtyWorl'+'d']||this['_children'][_0x3a5f0a]['_dirtifyWo'+'rldInterna'+'l']();}this['_dirtyNorm'+'al']=!(-0x22b6+-0x21a*0x11+0x4670),this['_worldScal'+'eSign']=-0xcbf+0x19bb+-0xcfc,this['_aabbVer']++;}['setPositio'+'n'](_0x7c162e,_0x4b6ae9,_0x1100cb){_0x7c162e instanceof I?Zt['copy'](_0x7c162e):Zt['set'](_0x7c162e,_0x4b6ae9,_0x1100cb),this['_parent']===null?this['localPosit'+'ion']['copy'](Zt):(Vn['copy'](this['_parent']['getWorldTr'+'ansform']())['invert'](),Vn['transformP'+'oint'](Zt,this['localPosit'+'ion'])),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setRotatio'+'n'](_0x20f5ce,_0x2d708c,_0x3f6ac8,_0x30aaf4){if(_0x20f5ce instanceof le?Qt['copy'](_0x20f5ce):Qt['set'](_0x20f5ce,_0x2d708c,_0x3f6ac8,_0x30aaf4),this['_parent']===null)this['localRotat'+'ion']['copy'](Qt);else{const _0x541582=this['_parent']['getRotatio'+'n']();Sa['copy'](_0x541582)['invert'](),this['localRotat'+'ion']['copy'](Sa)['mul'](Qt);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setPositio'+'nAndRotati'+'on'](_0xc0686a,_0x5bca8c){if(this['_parent']===null)this['localPosit'+'ion']['copy'](_0xc0686a),this['localRotat'+'ion']['copy'](_0x5bca8c);else{const _0x26518d=this['_parent']['getWorldTr'+'ansform']();Vn['copy'](_0x26518d)['invert'](),Vn['transformP'+'oint'](_0xc0686a,this['localPosit'+'ion']),this['localRotat'+'ion']['setFromMat'+'4'](Vn)['mul'](_0x5bca8c);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setEulerAn'+'gles'](_0x569e3b,_0x25f7d5,_0x7457a1){if(this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x569e3b,_0x25f7d5,_0x7457a1),this['_parent']!==null){const _0x4558d0=this['_parent']['getRotatio'+'n']();Sa['copy'](_0x4558d0)['invert'](),this['localRotat'+'ion']['mul2'](Sa,this['localRotat'+'ion']);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['addChild'](_0x381453){this['_prepareIn'+'sertChild'](_0x381453),this['_children']['push'](_0x381453),this['_onInsertC'+'hild'](_0x381453);}['addChildAn'+'dSaveTrans'+'form'](_0x2a7a65){const _0x3505bd=_0x2a7a65['getPositio'+'n'](),_0x527246=_0x2a7a65['getRotatio'+'n']();this['_prepareIn'+'sertChild'](_0x2a7a65),_0x2a7a65['setPositio'+'n'](Mw['copy'](this['worldTrans'+'form'])['invert']()['transformP'+'oint'](_0x3505bd)),_0x2a7a65['setRotatio'+'n'](Iw['copy'](this['getRotatio'+'n']())['invert']()['mul'](_0x527246)),this['_children']['push'](_0x2a7a65),this['_onInsertC'+'hild'](_0x2a7a65);}['insertChil'+'d'](_0x3ed495,_0x5cccd9){this['_prepareIn'+'sertChild'](_0x3ed495),this['_children']['splice'](_0x5cccd9,-0x3*0xa9f+0x1*-0x80f+0x49*0x8c,_0x3ed495),this['_onInsertC'+'hild'](_0x3ed495);}['_prepareIn'+'sertChild'](_0x380eb1){_0x380eb1['remove'](),M['assert'](_0x380eb1!==this,'GraphNode\x20'+(_0x380eb1==null?void(0x1160+-0x7f0+0x1*-0x970):_0x380eb1['name'])+('\x20cannot\x20be'+'\x20a\x20child\x20o'+'f\x20itself')),M['assert'](!this['isDescenda'+'ntOf'](_0x380eb1),'GraphNode\x20'+(_0x380eb1==null?void(-0x1946*-0x1+0x183c+-0x3182):_0x380eb1['name'])+('\x20cannot\x20ad'+'d\x20an\x20ances'+'tor\x20as\x20a\x20c'+'hild'));}['_fireOnHie'+'rarchy'](_0x45c782,_0x2652ee,_0x2d62f2){this['fire'](_0x45c782,_0x2d62f2);for(let _0x45f684=0x22*-0xb+0xc*0x1d5+-0x25*0x8e;_0x45f684<this['_children']['length'];_0x45f684++)this['_children'][_0x45f684]['_fireOnHie'+'rarchy'](_0x2652ee,_0x2652ee,_0x2d62f2);}['_onInsertC'+'hild'](_0xa97855){_0xa97855['_parent']=this;const _0x546546=_0xa97855['_enabled']&&this['enabled'];_0xa97855['_enabledIn'+'Hierarchy']!==_0x546546&&(_0xa97855['_enabledIn'+'Hierarchy']=_0x546546,_0xa97855['_notifyHie'+'rarchyStat'+'eChanged'](_0xa97855,_0x546546)),_0xa97855['_updateGra'+'phDepth'](),_0xa97855['_dirtifyWo'+'rld'](),this['_frozen']&&_0xa97855['_unfreezeP'+'arentToRoo'+'t'](),_0xa97855['_fireOnHie'+'rarchy']('insert','inserthier'+'archy',this),this['fire']&&this['fire']('childinser'+'t',_0xa97855);}['_updateGra'+'phDepth'](){this['_graphDept'+'h']=this['_parent']?this['_parent']['_graphDept'+'h']+(0x21*0xfb+0x13*0x7b+-0x297b):-0x1b09+0x1*-0x683+0x218c;for(let _0x4ff87e=0x2c3*-0x1+-0x7*0x517+0x2f4*0xd,_0x183192=this['_children']['length'];_0x4ff87e<_0x183192;_0x4ff87e++)this['_children'][_0x4ff87e]['_updateGra'+'phDepth']();}['removeChil'+'d'](_0x416f61){const _0x3a7cc0=this['_children']['indexOf'](_0x416f61);_0x3a7cc0!==-(-0x11ae+-0x23ef*-0x1+-0x1240)&&(this['_children']['splice'](_0x3a7cc0,-0x25c2+-0x1*0x347+0x290a),_0x416f61['_parent']=null,_0x416f61['_fireOnHie'+'rarchy']('remove','removehier'+'archy',this),this['fire']('childremov'+'e',_0x416f61));}['_sync'](){if(this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(0x1059+-0x209b+-0x17*-0xb5)),this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['scaleCompe'+'nsation']){let _0x59977c;const _0xb0cab0=this['_parent'];let _0x267079=this['localScale'],_0x331d53=_0xb0cab0;if(_0x331d53){for(;_0x331d53&&_0x331d53['scaleCompe'+'nsation'];)_0x331d53=_0x331d53['_parent'];_0x331d53&&(_0x331d53=_0x331d53['_parent'],_0x331d53&&(_0x59977c=_0x331d53['worldTrans'+'form']['getScale'](),Np['mul2'](_0x59977c,this['localScale']),_0x267079=Np));}md['setFromMat'+'4'](_0xb0cab0['worldTrans'+'form']),Fp['mul2'](md,this['localRotat'+'ion']);let _0x40aef5=_0xb0cab0['worldTrans'+'form'];_0xb0cab0['scaleCompe'+'nsation']&&(kp['mul2'](_0x59977c,_0xb0cab0['getLocalSc'+'ale']()),Op['setTRS'](_0xb0cab0['worldTrans'+'form']['getTransla'+'tion'](ud),md,kp),_0x40aef5=Op),_0x40aef5['transformP'+'oint'](this['localPosit'+'ion'],ud),this['worldTrans'+'form']['setTRS'](ud,Fp,_0x267079);}else this['worldTrans'+'form']['mulAffine2'](this['_parent']['worldTrans'+'form'],this['localTrans'+'form']);}this['_dirtyWorl'+'d']=!(-0x1*0x10fd+-0x4*-0x4eb+-0x31*0xe);}}['syncHierar'+'chy'](){if(!this['_enabled']||this['_frozen'])return;this['_frozen']=!(0x2*-0xb2a+0x1*0x1186+0x2*0x267),(this['_dirtyLoca'+'l']||this['_dirtyWorl'+'d'])&&this['_sync']();const _0x4db13a=this['_children'];for(let _0xefb418=0x65*-0x4e+0x14b7+0x203*0x5,_0x1f3390=_0x4db13a['length'];_0xefb418<_0x1f3390;_0xefb418++)_0x4db13a[_0xefb418]['syncHierar'+'chy']();}['lookAt'](_0x175acd,_0x5a08ca,_0x467f61,_0x53e360=-0xd*-0x26f+-0x2706+-0x763*-0x1,_0x50f78d=-0x1*-0x26e1+0x283+-0x2963*0x1,_0x35ed41=0x29*-0xb7+0x5cf+0x1780){if(_0x175acd instanceof I)pd['copy'](_0x175acd),_0x5a08ca instanceof I?Il['copy'](_0x5a08ca):Il['copy'](I['UP']);else{if(_0x467f61===void(-0x5*-0x2f9+0x958+-0x1835))return;pd['set'](_0x175acd,_0x5a08ca,_0x467f61),Il['set'](_0x53e360,_0x50f78d,_0x35ed41);}Up['setLookAt'](this['getPositio'+'n'](),pd,Il),Qt['setFromMat'+'4'](Up),this['setRotatio'+'n'](Qt);}['translate'](_0xa09f30,_0x2368e5,_0x5df8f1){_0xa09f30 instanceof I?Zt['copy'](_0xa09f30):Zt['set'](_0xa09f30,_0x2368e5,_0x5df8f1),Zt['add'](this['getPositio'+'n']()),this['setPositio'+'n'](Zt);}['translateL'+'ocal'](_0x19e277,_0x4452e0,_0x1fa72b){_0x19e277 instanceof I?Zt['copy'](_0x19e277):Zt['set'](_0x19e277,_0x4452e0,_0x1fa72b),this['localRotat'+'ion']['transformV'+'ector'](Zt,Zt),this['localPosit'+'ion']['add'](Zt),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotate'](_0xeabbef,_0x606de1,_0x30414){if(Qt['setFromEul'+'erAngles'](_0xeabbef,_0x606de1,_0x30414),this['_parent']===null)this['localRotat'+'ion']['mul2'](Qt,this['localRotat'+'ion']);else{const _0x1b95e5=this['getRotatio'+'n'](),_0x2181fd=this['_parent']['getRotatio'+'n']();Sa['copy'](_0x2181fd)['invert'](),Qt['mul2'](Sa,Qt),this['localRotat'+'ion']['mul2'](Qt,_0x1b95e5);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotateLoca'+'l'](_0xc3dbc1,_0x48ff45,_0x5f3aec){Qt['setFromEul'+'erAngles'](_0xc3dbc1,_0x48ff45,_0x5f3aec),this['localRotat'+'ion']['mul'](Qt),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}}const by=new Ht();function cl(_0x1ce111){const _0xb425cf=by['get'](_0x1ce111);return M['assert'](_0xb425cf),_0xb425cf;}function Dw(_0x24fe9e,_0x19d377){M['assert'](_0x19d377),by['get'](_0x24fe9e,()=>_0x19d377);}class Lw{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach']((_0x1e0cfd,_0x17b4b1)=>{_0x17b4b1['destroy']();}),this['cache']['clear']();}['incRef'](_0xc85921){const _0x8aac6c=(this['cache']['get'](_0xc85921)||0x11a5+-0x2*-0x1316+-0x1b1*0x21)+(0x18f8+0x9a3*0x2+-0x2c3d);this['cache']['set'](_0xc85921,_0x8aac6c);}['decRef'](_0x16e42e){if(_0x16e42e){let _0x166071=this['cache']['get'](_0x16e42e);_0x166071&&(_0x166071--,_0x166071===0x1*0x5d7+-0x644+-0x1*-0x6d?(this['cache']['delete'](_0x16e42e),_0x16e42e['destroy']()):this['cache']['set'](_0x16e42e,_0x166071));}}}class Li{static['incRef'](_0x7c86e1){this['cache']['incRef'](_0x7c86e1);}static['decRef'](_0x1b943b){this['cache']['decRef'](_0x1b943b);}static['destroy'](){this['cache']['destroy']();}}h(Li,'cache',new Lw());let Rw=0xd9c+0x0+0x1*-0xd9c;const Ow=new Ie(),Dl=new Ie(),_d=new xu(),gd=new Set(),Sr=new Uint32Array(0x3b*0x81+-0x3*0xa19+0x1*0x94);class Fw{constructor(_0x5b138c){h(this,'vertexBuff'+'er',null),h(this,'_destroyVe'+'rtexBuffer',!(0x3*-0x557+-0x880+-0x49*-0x56)),this['count']=_0x5b138c;}['destroy'](){var _0x1619fb;this['_destroyVe'+'rtexBuffer']&&((_0x1619fb=this['vertexBuff'+'er'])==null||_0x1619fb['destroy']()),this['vertexBuff'+'er']=null;}}class Nw{constructor(){h(this,'map',new Map()),h(this,'meshMetaDa'+'ta',new Int32Array(0x2567+0x4f*-0x56+-0xad9));}['get'](_0x34d418){return this['map']['get'](_0x34d418)??this['map']['get'](null);}}class kw{constructor(){h(this,'shader'),h(this,'bindGroup',null),h(this,'uniformBuf'+'fer',null),h(this,'hashes');}['getBindGro'+'up'](_0x10bd34){if(!this['bindGroup']){const _0x47d75f=this['shader'];M['assert'](_0x47d75f);const _0x3439ee=_0x47d75f['meshBindGr'+'oupFormat'];M['assert'](_0x3439ee),this['bindGroup']=new rm(_0x10bd34,_0x3439ee),ca['setName'](this['bindGroup'],'MeshBindGr'+'oup_'+this['bindGroup']['id']);}return this['bindGroup'];}['getUniform'+'Buffer'](_0x40a3fb){if(!this['uniformBuf'+'fer']){const _0x4f355d=this['shader'];M['assert'](_0x4f355d);const _0x2db463=_0x4f355d['meshUnifor'+'mBufferFor'+'mat'];M['assert'](_0x2db463),this['uniformBuf'+'fer']=new nm(_0x40a3fb,_0x2db463,!(-0x886+0x31c*-0xb+-0x2abb*-0x1));}return this['uniformBuf'+'fer'];}['destroy'](){var _0x29cfa6,_0x124ccd;(_0x29cfa6=this['bindGroup'])==null||_0x29cfa6['destroy'](),this['bindGroup']=null,(_0x124ccd=this['uniformBuf'+'fer'])==null||_0x124ccd['destroy'](),this['uniformBuf'+'fer']=null;}}const Br=class Br{constructor(_0x154b7f,_0x37df5e,_0x2663d8=null){h(this,'castShadow',!(-0xb4d+-0x3*0x8de+-0x97a*-0x4)),h(this,'shadowCasc'+'adeMask',YT),h(this,'cull',!(-0xf65+0x287*-0x3+0x15a*0x11)),h(this,'drawOrder',0x1*-0xf28+0x2*0x1191+-0x13fa),h(this,'_drawBucke'+'t',-0x15*-0x5c+0x23*-0xa7+0x4*0x3f2),h(this,'node'),h(this,'visible',!(-0x257*0x1+-0x236e+0xb*0x36f)),h(this,'visibleThi'+'sFrame',!(-0xd*-0x2f4+0x1*-0x1097+-0x15cc)),h(this,'flipFacesF'+'actor',-0x14*-0x20+-0x1e04+-0x581*-0x5),h(this,'gsplatInst'+'ance',null),h(this,'id',Rw++),h(this,'isVisibleF'+'unc',null),h(this,'instancing'+'Data',null),h(this,'indirectDa'+'ta',null),h(this,'parameters',{}),h(this,'pick',!(0x1*0x2443+-0x8e5+-0x1b5e)),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'transparen'+'t',!(0x2*0xa61+0x1a8c+-0x1*0x2f4d)),h(this,'_aabb',new Ie()),h(this,'_aabbVer',-(-0x2*-0x1249+0x99+0x2*-0x1295)),h(this,'_aabbMeshV'+'er',-(0x1867+0x6c5*-0x5+-0x3b*-0x29)),h(this,'_customAab'+'b',null),h(this,'_updateAab'+'b',!(-0x308+-0x53*0x40+-0x2f9*-0x8)),h(this,'_updateAab'+'bFunc',null),h(this,'_sortKeySh'+'adow',0x15ea+0x87*-0x14+-0xb5e),h(this,'_sortKeyFo'+'rward',0xd07+0x790+-0x1497*0x1),h(this,'_sortKeyDy'+'namic',0x22b4+0x5*0x461+0x1*-0x3899),h(this,'_layer',iy),h(this,'_material',null),h(this,'_skinInsta'+'nce',null),h(this,'_morphInst'+'ance',null),h(this,'_receiveSh'+'adow',!(-0x34+0x1dc2+-0x1*0x1d8e)),h(this,'_renderSty'+'le',Qa),h(this,'_screenSpa'+'ce',!(-0x18bb+-0x7d4+0x2090)),h(this,'_shaderCac'+'he',new Map()),h(this,'_shaderDef'+'s',ds<<-0x18a9*-0x1+-0x115*0xd+-0xa88),h(this,'_calculate'+'SortDistan'+'ce',null);if(M['assert'](!(_0x154b7f instanceof He),'Incorrect\x20'+'parameters'+'\x20for\x20MeshI'+'nstance\x27s\x20'+'constructo'+'r.\x20Use\x20new'+'\x20MeshInsta'+'nce(mesh,\x20'+'material,\x20'+'node)'),this['node']=_0x2663d8,this['_mesh']=_0x154b7f,_0x154b7f['incRefCoun'+'t'](),this['material']=_0x37df5e,_0x154b7f['vertexBuff'+'er']){const _0xad2deb=_0x154b7f['vertexBuff'+'er']['format'];this['_shaderDef'+'s']|=_0xad2deb['hasUv0']?bm:0x8e*-0x2a+0xa3*-0x39+-0x71*-0x87,this['_shaderDef'+'s']|=_0xad2deb['hasUv1']?Sy:0x905*0x2+0x2080+-0x328a,this['_shaderDef'+'s']|=_0xad2deb['hasColor']?yy:-0x1*-0x2012+0x21a6+0x18*-0x2bd,this['_shaderDef'+'s']|=_0xad2deb['hasTangent'+'s']?Cm:-0xd90+-0x1bcf+-0x77*-0x59;}this['updateKey']();}set['drawBucket'](_0x5d0f9f){this['_drawBucke'+'t']=Math['floor'](_0x5d0f9f)&-0xc*0x9e+-0x957+0x11be,this['updateKey']();}get['drawBucket'](){return this['_drawBucke'+'t'];}set['renderStyl'+'e'](_0x171cfe){this['_renderSty'+'le']=_0x171cfe,this['mesh']['prepareRen'+'derState'](_0x171cfe);}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['mesh'](_0x3d7d63){_0x3d7d63!==this['_mesh']&&(this['_mesh']&&this['_mesh']['decRefCoun'+'t'](),this['_mesh']=_0x3d7d63,_0x3d7d63&&_0x3d7d63['incRefCoun'+'t']());}get['mesh'](){return this['_mesh'];}set['aabb'](_0x5aa520){this['_aabb']=_0x5aa520;}get['aabb'](){if(!this['_updateAab'+'b'])return this['_aabb'];if(this['_updateAab'+'bFunc'])return this['_updateAab'+'bFunc'](this['_aabb']);let _0x14b00f=this['_customAab'+'b'],_0x43924e=!!_0x14b00f;if(!_0x14b00f){if(_0x14b00f=Ow,this['skinInstan'+'ce']){if(!this['mesh']['boneAabb']){const _0x5a5c88=this['_morphInst'+'ance']?this['_morphInst'+'ance']['morph']['_targets']:null;this['mesh']['_initBoneA'+'abbs'](_0x5a5c88);}const _0x3d8139=this['mesh']['boneUsed'];let _0x4a1724=!(-0xa*-0x29+-0x2386+0x21ec);for(let _0x19d0f4=-0xdb5*0x1+-0x5f1+-0x9d3*-0x2;_0x19d0f4<this['mesh']['boneAabb']['length'];_0x19d0f4++)_0x3d8139[_0x19d0f4]&&(Dl['setFromTra'+'nsformedAa'+'bb'](this['mesh']['boneAabb'][_0x19d0f4],this['skinInstan'+'ce']['matrices'][_0x19d0f4]),_0x4a1724?(_0x4a1724=!(-0x3*-0x416+-0xb3*-0x32+-0x2f37),_0x14b00f['center']['copy'](Dl['center']),_0x14b00f['halfExtent'+'s']['copy'](Dl['halfExtent'+'s'])):_0x14b00f['add'](Dl));_0x43924e=!(-0x39*0x8e+-0x2*0x12f6+-0x1*-0x458a);}else{if(this['node']['_aabbVer']!==this['_aabbVer']||this['mesh']['_aabbVer']!==this['_aabbMeshV'+'er']){if(this['mesh']?(_0x14b00f['center']['copy'](this['mesh']['aabb']['center']),_0x14b00f['halfExtent'+'s']['copy'](this['mesh']['aabb']['halfExtent'+'s'])):(_0x14b00f['center']['set'](0x3*-0x289+0x717+0x84,0x9e5*-0x1+0x184a+-0xe65,-0x819+-0x264e*-0x1+-0x1e35),_0x14b00f['halfExtent'+'s']['set'](-0x12d*-0x1+-0xa84+0x957,-0x1*0x739+-0x1d3a+0x1f*0x12d,-0xf*-0x22f+0x1de+-0x1*0x229f)),this['mesh']&&this['mesh']['morph']){const _0x6e48d5=this['mesh']['morph']['aabb'];_0x14b00f['_expand'](_0x6e48d5['getMin'](),_0x6e48d5['getMax']());}_0x43924e=!(-0xb*0x297+0x2*-0x363+-0x3*-0xbc1),this['_aabbVer']=this['node']['_aabbVer'],this['_aabbMeshV'+'er']=this['mesh']['_aabbVer'];}}}return _0x43924e&&this['_aabb']['setFromTra'+'nsformedAa'+'bb'](_0x14b00f,this['node']['getWorldTr'+'ansform']()),this['_aabb'];}['clearShade'+'rs'](){this['_shaderCac'+'he']['forEach'](_0x2aa06c=>{_0x2aa06c['destroy']();}),this['_shaderCac'+'he']['clear']();}['getShaderI'+'nstance'](_0x561f8e,_0x574779,_0x131c38,_0x17846d,_0x5399b7,_0x2b317a,_0x3cbd34){var _0x314405;const _0x386fa5=this['_shaderDef'+'s'];Sr[-0x11*0x115+0x11*-0x124+0x25c9]=_0x561f8e,Sr[0x933+0x1*-0x1e46+0x4c*0x47]=_0x574779,Sr[0x4a0+0x5*-0x484+0x1*0x11f6]=_0x386fa5,Sr[0x1daa+0x10c5+-0x1*0x2e6c]=_0x17846d['hash'];const _0x2a1649=XS(Sr);let _0x45239d=this['_shaderCac'+'he']['get'](_0x2a1649);if(!_0x45239d){const _0x1f132b=this['_material'];if(_0x45239d=new kw(),_0x45239d['shader']=_0x1f132b['variants']['get'](_0x2a1649),_0x45239d['hashes']=new Uint32Array(Sr),!_0x45239d['shader']){Q['pushGpuMar'+'ker'](this['mesh']['device'],'Node:\x20'+this['node']['name']);const _0x742e55=_0x1f132b['getShaderV'+'ariant']({'device':this['mesh']['device'],'scene':_0x131c38,'objDefs':_0x386fa5,'cameraShaderParams':_0x17846d,'pass':_0x561f8e,'sortedLights':_0x3cbd34,'viewUniformFormat':_0x5399b7,'viewBindGroupFormat':_0x2b317a,'vertexFormat':(_0x314405=this['mesh']['vertexBuff'+'er'])==null?void(0x8b4*-0x3+0xd43+0xcd9):_0x314405['format']});Q['popGpuMark'+'er'](this['mesh']['device']),_0x1f132b['variants']['set'](_0x2a1649,_0x742e55),_0x45239d['shader']=_0x742e55;}this['_shaderCac'+'he']['set'](_0x2a1649,_0x45239d);}return M['call'](()=>{Vx['equals'](_0x45239d['hashes'],Sr)||M['errorOnce']('Hash\x20colli'+'sion\x20in\x20th'+'e\x20shader\x20c'+'ache\x20for\x20m'+'esh\x20instan'+'ce.\x20This\x20i'+'s\x20very\x20unl'+'ikely\x20but\x20'+'still\x20poss'+'ible.\x20Plea'+'se\x20report\x20'+'this\x20issue'+'.');}),_0x45239d;}set['material'](_0x2d28a8){this['clearShade'+'rs']();const _0x531996=this['_material'];_0x531996&&_0x531996['removeMesh'+'InstanceRe'+'f'](this),this['_material']=_0x2d28a8,_0x2d28a8&&(_0x2d28a8['addMeshIns'+'tanceRef'](this),this['transparen'+'t']=_0x2d28a8['transparen'+'t'],this['updateKey']());}get['material'](){return this['_material'];}['_updateSha'+'derDefs'](_0x45ec08){_0x45ec08!==this['_shaderDef'+'s']&&(this['_shaderDef'+'s']=_0x45ec08,this['clearShade'+'rs']());}set['calculateS'+'ortDistanc'+'e'](_0x5bb44f){this['_calculate'+'SortDistan'+'ce']=_0x5bb44f;}get['calculateS'+'ortDistanc'+'e'](){return this['_calculate'+'SortDistan'+'ce'];}set['receiveSha'+'dow'](_0x9bce37){this['_receiveSh'+'adow']!==_0x9bce37&&(this['_receiveSh'+'adow']=_0x9bce37,this['_updateSha'+'derDefs'](_0x9bce37?this['_shaderDef'+'s']&~$h:this['_shaderDef'+'s']|$h));}get['receiveSha'+'dow'](){return this['_receiveSh'+'adow'];}set['batching'](_0x4078e9){this['_updateSha'+'derDefs'](_0x4078e9?this['_shaderDef'+'s']|mh:this['_shaderDef'+'s']&~mh);}get['batching'](){return(this['_shaderDef'+'s']&mh)!==-0x105c+0xa11*0x1+0x64b;}set['skinInstan'+'ce'](_0x41e0b4){this['_skinInsta'+'nce']=_0x41e0b4,this['_updateSha'+'derDefs'](_0x41e0b4?this['_shaderDef'+'s']|ko:this['_shaderDef'+'s']&~ko),this['_setupSkin'+'Update']();}get['skinInstan'+'ce'](){return this['_skinInsta'+'nce'];}set['morphInsta'+'nce'](_0x16d0a8){var _0x1190ce;(_0x1190ce=this['_morphInst'+'ance'])==null||_0x1190ce['destroy'](),this['_morphInst'+'ance']=_0x16d0a8;let _0x267b33=this['_shaderDef'+'s'];_0x267b33=_0x16d0a8&&_0x16d0a8['morph']['morphPosit'+'ions']?_0x267b33|Bo:_0x267b33&~Bo,_0x267b33=_0x16d0a8&&_0x16d0a8['morph']['morphNorma'+'ls']?_0x267b33|zo:_0x267b33&~zo,_0x267b33=_0x16d0a8&&_0x16d0a8['morph']['intRenderF'+'ormat']?_0x267b33|Vo:_0x267b33&~Vo,this['_updateSha'+'derDefs'](_0x267b33);}get['morphInsta'+'nce'](){return this['_morphInst'+'ance'];}set['screenSpac'+'e'](_0x12dae0){this['_screenSpa'+'ce']!==_0x12dae0&&(this['_screenSpa'+'ce']=_0x12dae0,this['_updateSha'+'derDefs'](_0x12dae0?this['_shaderDef'+'s']|Xh:this['_shaderDef'+'s']&~Xh));}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['key'](_0x441f77){this['_sortKeyFo'+'rward']=_0x441f77;}get['key'](){return this['_sortKeyFo'+'rward'];}set['mask'](_0x55007f){const _0x2c8174=this['_shaderDef'+'s']&0x1ca08*0x1+0x27b3+-0x6b7*0x24;this['_updateSha'+'derDefs'](_0x2c8174|_0x55007f<<0xb66*0x1+0x29*0x12+-0x38*0x41);}get['mask'](){return this['_shaderDef'+'s']>>0x7bf+0x12e9+-0x94*0x2e;}set['instancing'+'Count'](_0x4946a9){this['instancing'+'Data']&&(this['instancing'+'Data']['count']=_0x4946a9);}get['instancing'+'Count'](){return this['instancing'+'Data']?this['instancing'+'Data']['count']:0xb96+0x2*0xb5f+0x34*-0xa9;}['destroy'](){var _0x3daf5f,_0x148a32,_0x18e60d;const _0x3d7c02=this['mesh'];_0x3d7c02&&(this['mesh']=null,_0x3d7c02['refCount']<0x24d+-0x1f0d*0x1+0x1cc1&&_0x3d7c02['destroy']()),this['setRealtim'+'eLightmap'](Br['lightmapPa'+'ramNames'][-0xaf*0x21+-0x16d8+0x2d67],null),this['setRealtim'+'eLightmap'](Br['lightmapPa'+'ramNames'][-0x267+-0x1*-0x9ed+-0x5*0x181],null),(_0x3daf5f=this['_skinInsta'+'nce'])==null||_0x3daf5f['destroy'](),this['_skinInsta'+'nce']=null,(_0x148a32=this['morphInsta'+'nce'])==null||_0x148a32['destroy'](),this['morphInsta'+'nce']=null,this['clearShade'+'rs'](),this['material']=null,(_0x18e60d=this['instancing'+'Data'])==null||_0x18e60d['destroy']();}static['_prepareRe'+'nderStyleF'+'orArray'](_0x2112a2,_0x17a05f){if(_0x2112a2){for(let _0x5d84df=0x601*-0x3+-0x1*-0x129a+-0x97;_0x5d84df<_0x2112a2['length'];_0x5d84df++){_0x2112a2[_0x5d84df]['_renderSty'+'le']=_0x17a05f;const _0x76afac=_0x2112a2[_0x5d84df]['mesh'];gd['has'](_0x76afac)||(gd['add'](_0x76afac),_0x76afac['prepareRen'+'derState'](_0x17a05f));}gd['clear']();}}['_isVisible'](_0x52e58a){return this['visible']?this['isVisibleF'+'unc']?this['isVisibleF'+'unc'](_0x52e58a):(_d['center']=this['aabb']['center'],_d['radius']=this['_aabb']['halfExtent'+'s']['length'](),_0x52e58a['frustum']['containsSp'+'here'](_d)>0x1e9*0xb+0xd24+-0x1*0x2227):!(-0x357+-0x1144+0x1*0x149c);}['updateKey'](){const {material:_0x5a1338}=this;this['_sortKeyFo'+'rward']=this['_drawBucke'+'t']<<0x15*0xb3+-0x19*0x180+0x4*0x5ba|(_0x5a1338['alphaToCov'+'erage']||_0x5a1338['alphaTest']?0x6084c4+-0x736e2b+0x52e967:-0xb5b+-0x3*-0x697+-0x86a)|_0x5a1338['id']&0x11*0x39df3+-0xe557*-0x5+-0x1*0x1f7d7;}['setInstanc'+'ing'](_0x4b813c,_0x480834=!(-0x1842+0xec3*-0x1+0xa*0x3e7)){_0x4b813c?(this['instancing'+'Data']=new Fw(_0x4b813c['numVertice'+'s']),this['instancing'+'Data']['vertexBuff'+'er']=_0x4b813c,_0x4b813c['format']['instancing']=!(0x9*-0x454+0x200+0x24f4),this['cull']=_0x480834):(this['instancing'+'Data']=null,this['cull']=!(-0x57*0x1+0x891+0x1b*-0x4e)),this['_updateSha'+'derDefs'](_0x4b813c?this['_shaderDef'+'s']|Uo:this['_shaderDef'+'s']&~Uo);}['setIndirec'+'t'](_0x2c7b65,_0x3e8ae7){this['_allocIndi'+'rectData'](),this['indirectDa'+'ta']['map']['set']((_0x2c7b65==null?void(0x7b5*0x4+0x1202*0x2+-0x4*0x10b6):_0x2c7b65['camera'])??null,_0x3e8ae7),this['mesh']['device']['mapsToClea'+'r']['add'](this['indirectDa'+'ta']['map']);}['getIndirec'+'tMetaData'](){var _0x2537b2;this['_allocIndi'+'rectData']();const _0x4cc63f=(_0x2537b2=this['mesh'])==null?void(0x6ce+0x1*0x1d5f+-0x7*0x52b):_0x2537b2['primitive'][this['renderStyl'+'e']],_0xe29664=this['indirectDa'+'ta']['meshMetaDa'+'ta'];return _0xe29664[-0x406+-0x2*0x481+-0x116*-0xc]=_0x4cc63f['count'],_0xe29664[0xb2f+0x1d46+0x35f*-0xc]=_0x4cc63f['base'],_0xe29664[-0x1433+0xde1+-0xb4*-0x9]=_0x4cc63f['baseVertex'],_0xe29664;}['_allocIndi'+'rectData'](){this['indirectDa'+'ta']||(this['indirectDa'+'ta']=new Nw());}['ensureMate'+'rial'](_0x1327d4){this['material']||(M['warn']('Mesh\x20attac'+'hed\x20to\x20ent'+'ity\x20\x27'+this['node']['name']+('\x27\x20does\x20not'+'\x20have\x20a\x20ma'+'terial,\x20us'+'ing\x20a\x20defa'+'ult\x20one.')),this['material']=cl(_0x1327d4));}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['getParamet'+'er'](_0x108d8a){return this['parameters'][_0x108d8a];}['setParamet'+'er'](_0x2ee9fb,_0x56b337,_0x16065e=0x9a6317*-0x22d+0x14026b75b*0x1+-0x365a2d23*-0x5){const _0x1efc89=this['parameters'][_0x2ee9fb];_0x1efc89?(_0x1efc89['data']=_0x56b337,_0x1efc89['passFlags']=_0x16065e):this['parameters'][_0x2ee9fb]={'scopeId':null,'data':_0x56b337,'passFlags':_0x16065e};}['setRealtim'+'eLightmap'](_0xb5d6f9,_0x164cea){const _0x5176f3=this['getParamet'+'er'](_0xb5d6f9);_0x5176f3!==_0x164cea&&(_0x5176f3&&Li['decRef'](_0x5176f3['data']),_0x164cea?(Li['incRef'](_0x164cea),this['setParamet'+'er'](_0xb5d6f9,_0x164cea)):this['deletePara'+'meter'](_0xb5d6f9));}['deletePara'+'meter'](_0x17ec61){this['parameters'][_0x17ec61]&&delete this['parameters'][_0x17ec61];}['setParamet'+'ers'](_0x44726f,_0x9d9721){const _0x209bd9=this['parameters'];for(const _0x1ab3da in _0x209bd9){const _0x1133c6=_0x209bd9[_0x1ab3da];_0x1133c6['passFlags']&_0x9d9721&&(_0x1133c6['scopeId']||(_0x1133c6['scopeId']=_0x44726f['scope']['resolve'](_0x1ab3da)),_0x1133c6['scopeId']['setValue'](_0x1133c6['data']));}}['setLightma'+'pped'](_0x3a6a01){_0x3a6a01?this['mask']=(this['mask']|si)&-(-0x3*0x222+0x29d+0x27*0x19):(this['setRealtim'+'eLightmap'](Br['lightmapPa'+'ramNames'][0x5b+0x4ef+0x1*-0x54a],null),this['setRealtim'+'eLightmap'](Br['lightmapPa'+'ramNames'][-0x1804+0x3*-0x9f9+0x35f0],null),this['_shaderDef'+'s']&=-(0x13ed+0x26f1+-0x1*0x2a1d),this['mask']=(this['mask']|ds)&-(-0x1213+0x1719+0x1*-0x4ff));}['setCustomA'+'abb'](_0x1740f5){_0x1740f5?this['_customAab'+'b']?this['_customAab'+'b']['copy'](_0x1740f5):this['_customAab'+'b']=_0x1740f5['clone']():(this['_customAab'+'b']=null,this['_aabbVer']=-(-0x560*-0x2+0x2439+-0x2ef8)),this['_setupSkin'+'Update']();}['_setupSkin'+'Update'](){this['_skinInsta'+'nce']&&(this['_skinInsta'+'nce']['_updateBef'+'oreCull']=!this['_customAab'+'b']);}};h(Br,'lightmapPa'+'ramNames',['texture_li'+'ghtMap','texture_di'+'rLightMap']);let We=Br;const Uw=[-0xa85*0x1+-0x14b4+0x1f39,0x62b*-0x6+-0x45e+0x2961,-0x257e+-0x17*0x19f+-0x6*-0xc77,0x1*-0x20c2+0x676*-0x1+0x273a,0x1*0x188d+-0x1*-0x2eb+0x47*-0x63,0x1*-0x138f+0x8e3+0xaad*0x1],Bw=[-0xd5d+-0xb03*0x1+-0x6*-0x410,0x24d8+0x1*-0xa6f+-0x82*0x34,-0x1d82+-0x689+0x240e,-0x334+-0x63f+-0x973*-0x1,0xaf0+-0x9a3*0x1+0x2*-0xa5,-0x5*-0x2ef+0x447+0x2*-0x978],zp=new oi();function Vp(_0x47e4f8,_0x321fe0){if(_0x47e4f8&&!_0x321fe0||!_0x47e4f8&&_0x321fe0)return!(0x26e3+-0x78f+0x51*-0x63);if(_0x47e4f8=_0x47e4f8['data'],_0x321fe0=_0x321fe0['data'],_0x47e4f8===_0x321fe0)return!(-0x12e9*-0x1+0x15*-0x4a+0x13*-0xad);if(_0x47e4f8 instanceof Float32Array&&_0x321fe0 instanceof Float32Array){if(_0x47e4f8['length']!==_0x321fe0['length'])return!(0x4d8+-0x456+-0x2b*0x3);for(let _0x359627=-0x1ed0+0x2110+-0x240;_0x359627<_0x47e4f8['length'];_0x359627++)if(_0x47e4f8[_0x359627]!==_0x321fe0[_0x359627])return!(0x1348+0x4f3*-0x1+-0x7*0x20c);return!(-0x2092+0xd85*-0x2+0x3b9c);}return!(-0x2e3+-0x2b*-0x7b+0x11c5*-0x1);}function zw(_0x26666b,_0x252267){for(const _0x3a5527 in _0x26666b)if(_0x26666b['hasOwnProp'+'erty'](_0x3a5527)&&!Vp(_0x26666b[_0x3a5527],_0x252267[_0x3a5527]))return!(0xa93+-0x83c+0xd*-0x2e);for(const _0x258ab6 in _0x252267)if(_0x252267['hasOwnProp'+'erty'](_0x258ab6)&&!Vp(_0x252267[_0x258ab6],_0x26666b[_0x258ab6]))return!(0x1*-0x2c5+0x1303+-0x1*0x103d);return!(-0x1139+-0x5a3*0x5+0xb5a*0x4);}function Sd(_0x548dbb){return _0x548dbb['node']['worldTrans'+'form']['scaleSign'];}class Vw{constructor(_0x1a4069,_0xce5401,_0x56a024){this['device']=_0x1a4069,this['rootNode']=_0xce5401,this['scene']=_0x56a024,this['_init']=!(-0x737*-0x4+-0x1*-0x2434+-0x410f),this['_batchGrou'+'ps']={},this['_batchGrou'+'pCounter']=-0x21ed+0x524+0x1cc9,this['_batchList']=[],this['_dirtyGrou'+'ps']=[],this['_stats']={'createTime':0x0,'updateLastFrameTime':0x0};}['destroy'](){this['device']=null,this['rootNode']=null,this['scene']=null,this['_batchGrou'+'ps']={},this['_batchList']=[],this['_dirtyGrou'+'ps']=[];}['addGroup'](_0x4cd84a,_0x2f9dd4,_0x4b2a2f,_0x652837,_0x800e7a){if(_0x652837===void(-0x607*-0x3+-0x1e79+0x632*0x2)&&(_0x652837=this['_batchGrou'+'pCounter'],this['_batchGrou'+'pCounter']++),this['_batchGrou'+'ps'][_0x652837]){M['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x652837+('\x20already\x20e'+'xists.'));return;}const _0x21a757=new mt(_0x652837,_0x4cd84a,_0x2f9dd4,_0x4b2a2f,_0x800e7a);return this['_batchGrou'+'ps'][_0x652837]=_0x21a757,_0x21a757;}['removeGrou'+'p'](_0x35a141){if(!this['_batchGrou'+'ps'][_0x35a141]){M['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x35a141+('\x20doesn\x27t\x20e'+'xist.'));return;}const _0xe2dd07=[];for(let _0x5aa33b=-0x145d+0xbc*0x1+-0x43*-0x4b;_0x5aa33b<this['_batchList']['length'];_0x5aa33b++)this['_batchList'][_0x5aa33b]['batchGroup'+'Id']===_0x35a141?this['destroyBat'+'ch'](this['_batchList'][_0x5aa33b]):_0xe2dd07['push'](this['_batchList'][_0x5aa33b]);this['_batchList']=_0xe2dd07,this['_removeMod'+'elsFromBat'+'chGroup'](this['rootNode'],_0x35a141),delete this['_batchGrou'+'ps'][_0x35a141];}['markGroupD'+'irty'](_0x14e3bc){this['_dirtyGrou'+'ps']['indexOf'](_0x14e3bc)<0xd4f+-0xc37+-0x118&&this['_dirtyGrou'+'ps']['push'](_0x14e3bc);}['getGroupBy'+'Name'](_0xc75a67){const _0x3b7ca9=this['_batchGrou'+'ps'];for(const _0x45b5b9 in _0x3b7ca9)if(_0x3b7ca9['hasOwnProp'+'erty'](_0x45b5b9)&&_0x3b7ca9[_0x45b5b9]['name']===_0xc75a67)return _0x3b7ca9[_0x45b5b9];return null;}['getBatches'](_0x5c39f5){const _0x4e28c6=[],_0x1b663b=this['_batchList']['length'];for(let _0x163273=-0x35*0x3d+-0x2a0*0x1+0xf41*0x1;_0x163273<_0x1b663b;_0x163273++){const _0x2b85a8=this['_batchList'][_0x163273];_0x2b85a8['batchGroup'+'Id']===_0x5c39f5&&_0x4e28c6['push'](_0x2b85a8);}return _0x4e28c6;}['_removeMod'+'elsFromBat'+'chGroup'](_0xffbca9,_0x4b4dfb){if(_0xffbca9['enabled']){_0xffbca9['model']&&_0xffbca9['model']['batchGroup'+'Id']===_0x4b4dfb&&(_0xffbca9['model']['batchGroup'+'Id']=-(0x1*-0x28e+-0x1c1c+0x1eab)),_0xffbca9['render']&&_0xffbca9['render']['batchGroup'+'Id']===_0x4b4dfb&&(_0xffbca9['render']['batchGroup'+'Id']=-(0x21*0x1f+-0x15ba+0x11bc)),_0xffbca9['element']&&_0xffbca9['element']['batchGroup'+'Id']===_0x4b4dfb&&(_0xffbca9['element']['batchGroup'+'Id']=-(0x230a+-0x1f32*0x1+-0x3d7)),_0xffbca9['sprite']&&_0xffbca9['sprite']['batchGroup'+'Id']===_0x4b4dfb&&(_0xffbca9['sprite']['batchGroup'+'Id']=-(0x11b8+-0x4*0x4a6+0xe1));for(let _0x2143d1=0x1302+0x1*0x545+-0x1847;_0x2143d1<_0xffbca9['_children']['length'];_0x2143d1++)this['_removeMod'+'elsFromBat'+'chGroup'](_0xffbca9['_children'][_0x2143d1],_0x4b4dfb);}}['insert'](_0x559336,_0x32bf76,_0x2a64c8){const _0x125927=this['_batchGrou'+'ps'][_0x32bf76];M['assert'](_0x125927,'Invalid\x20ba'+'tch\x20'+_0x32bf76+'\x20insertion'),_0x125927&&_0x125927['_obj'][_0x559336]['indexOf'](_0x2a64c8)<-0x1aa0+0xce+0x52a*0x5&&(_0x125927['_obj'][_0x559336]['push'](_0x2a64c8),this['markGroupD'+'irty'](_0x32bf76));}['remove'](_0xd4257b,_0x59ffc6,_0x45f16c){const _0xb6cdb0=this['_batchGrou'+'ps'][_0x59ffc6];if(M['assert'](_0xb6cdb0,'Invalid\x20ba'+'tch\x20'+_0x59ffc6+'\x20insertion'),_0xb6cdb0){const _0x49d563=_0xb6cdb0['_obj'][_0xd4257b]['indexOf'](_0x45f16c);_0x49d563>=0x13f5+-0x2194+0xd9f&&(_0xb6cdb0['_obj'][_0xd4257b]['splice'](_0x49d563,-0x147b+-0x1*0x653+0x1acf),this['markGroupD'+'irty'](_0x59ffc6));}}['_extractRe'+'nder'](_0x5624fd,_0x12dcfa,_0x455114,_0x189a04){return _0x5624fd['render']&&(_0x12dcfa=_0x189a04[_0x5624fd['render']['batchGroup'+'Id']]=_0x12dcfa['concat'](_0x5624fd['render']['meshInstan'+'ces']),_0x5624fd['render']['removeFrom'+'Layers']()),_0x12dcfa;}['_extractMo'+'del'](_0x4c91ba,_0x134b7d,_0xc9a81b,_0x454517){return _0x4c91ba['model']&&_0x4c91ba['model']['model']&&(_0x134b7d=_0x454517[_0x4c91ba['model']['batchGroup'+'Id']]=_0x134b7d['concat'](_0x4c91ba['model']['meshInstan'+'ces']),_0x4c91ba['model']['removeMode'+'lFromLayer'+'s'](),_0x4c91ba['model']['_batchGrou'+'p']=_0xc9a81b),_0x134b7d;}['_extractEl'+'ement'](_0x5a3af3,_0x48f351,_0x4b60fc){if(!_0x5a3af3['element'])return;let _0x3b7e3f=!(-0xb1a+-0x2609+-0x154*-0x25);_0x5a3af3['element']['_text']&&_0x5a3af3['element']['_text']['_model']['meshInstan'+'ces']['length']>-0x224d+0x3*-0x18f+0x26fa?(_0x48f351['push'](_0x5a3af3['element']['_text']['_model']['meshInstan'+'ces'][-0x2*-0x663+0x25f*-0xa+0xaf0]),_0x5a3af3['element']['removeMode'+'lFromLayer'+'s'](_0x5a3af3['element']['_text']['_model']),_0x3b7e3f=!(-0x17c8+0x3ce*0x7+-0x2da)):_0x5a3af3['element']['_image']&&(_0x48f351['push'](_0x5a3af3['element']['_image']['_renderabl'+'e']['meshInstan'+'ce']),_0x5a3af3['element']['removeMode'+'lFromLayer'+'s'](_0x5a3af3['element']['_image']['_renderabl'+'e']['model']),_0x5a3af3['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']&&(_0x48f351['push'](_0x5a3af3['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']),(!_0x5a3af3['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']||!_0x5a3af3['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k'])&&(_0x5a3af3['element']['_dirtifyMa'+'sk'](),_0x5a3af3['element']['_onPrerend'+'er']())),_0x3b7e3f=!(0x27c+-0x5b*0x30+-0x3a5*-0x4)),_0x3b7e3f&&(_0x4b60fc['_ui']=!(0x33d*-0x1+0x1*0xf9b+-0x1*0xc5e),_0x5a3af3['element']['_batchGrou'+'p']=_0x4b60fc);}['_collectAn'+'dRemoveMes'+'hInstances'](_0x550874,_0x1ba729){for(let _0x2a28d3=0x5ba*-0x4+-0x21f8+-0xe38*-0x4;_0x2a28d3<_0x1ba729['length'];_0x2a28d3++){const _0x17ea65=_0x1ba729[_0x2a28d3],_0x2dfde0=this['_batchGrou'+'ps'][_0x17ea65];if(!_0x2dfde0)continue;let _0x5f1c44=_0x550874[_0x17ea65];_0x5f1c44||(_0x5f1c44=_0x550874[_0x17ea65]=[]);for(let _0x1012f9=0x3*0xa78+0x1837*0x1+-0x379f;_0x1012f9<_0x2dfde0['_obj']['model']['length'];_0x1012f9++)_0x5f1c44=this['_extractMo'+'del'](_0x2dfde0['_obj']['model'][_0x1012f9],_0x5f1c44,_0x2dfde0,_0x550874);for(let _0x3a86dc=0x10c0+-0x2336+0x1276;_0x3a86dc<_0x2dfde0['_obj']['render']['length'];_0x3a86dc++)_0x5f1c44=this['_extractRe'+'nder'](_0x2dfde0['_obj']['render'][_0x3a86dc],_0x5f1c44,_0x2dfde0,_0x550874);for(let _0x3cf974=0x1b3f+0x21c2+-0x3d01;_0x3cf974<_0x2dfde0['_obj']['element']['length'];_0x3cf974++)this['_extractEl'+'ement'](_0x2dfde0['_obj']['element'][_0x3cf974],_0x5f1c44,_0x2dfde0);for(let _0x9d0f3e=-0x1130+-0x16a0+-0x9f4*-0x4;_0x9d0f3e<_0x2dfde0['_obj']['sprite']['length'];_0x9d0f3e++){const _0x230f97=_0x2dfde0['_obj']['sprite'][_0x9d0f3e];_0x230f97['sprite']&&_0x230f97['sprite']['_meshInsta'+'nce']&&(_0x2dfde0['dynamic']||_0x230f97['sprite']['sprite']['_renderMod'+'e']===ei)&&(_0x5f1c44['push'](_0x230f97['sprite']['_meshInsta'+'nce']),_0x230f97['sprite']['removeMode'+'lFromLayer'+'s'](),_0x2dfde0['_sprite']=!(0x1f2d+-0x521*-0x5+-0x38d2),_0x230f97['sprite']['_batchGrou'+'p']=_0x2dfde0);}}}['generate'](_0x2d6744){const _0x4e90d5={};_0x2d6744||(_0x2d6744=Object['keys'](this['_batchGrou'+'ps']));const _0x572e96=[];for(let _0x36b9b7=-0xde+0x23cb+-0x1*0x22ed;_0x36b9b7<this['_batchList']['length'];_0x36b9b7++){if(_0x2d6744['indexOf'](this['_batchList'][_0x36b9b7]['batchGroup'+'Id'])<0x310+0x2b*0x9b+-0x1d19){_0x572e96['push'](this['_batchList'][_0x36b9b7]);continue;}this['destroyBat'+'ch'](this['_batchList'][_0x36b9b7]);}if(this['_batchList']=_0x572e96,this['_collectAn'+'dRemoveMes'+'hInstances'](_0x4e90d5,_0x2d6744),_0x2d6744===this['_dirtyGrou'+'ps'])this['_dirtyGrou'+'ps']['length']=0x2*0x631+-0x1*0x925+-0x33d;else{const _0x4918bf=[];for(let _0x20ae07=0x1fb6+-0x123c+-0xd7a;_0x20ae07<this['_dirtyGrou'+'ps']['length'];_0x20ae07++)_0x2d6744['indexOf'](this['_dirtyGrou'+'ps'][_0x20ae07])<0x13ab+0x1abf+-0x2e6a&&_0x4918bf['push'](this['_dirtyGrou'+'ps'][_0x20ae07]);this['_dirtyGrou'+'ps']=_0x4918bf;}let _0x4ba22d,_0x53f12e,_0x362c66,_0x471422;for(const _0x44f94a in _0x4e90d5)if(_0x4e90d5['hasOwnProp'+'erty'](_0x44f94a)){if(_0x4ba22d=_0x4e90d5[_0x44f94a],_0x362c66=this['_batchGrou'+'ps'][_0x44f94a],!_0x362c66){M['error']('batch\x20grou'+'p\x20'+_0x44f94a+'\x20not\x20found');continue;}_0x53f12e=this['prepare'](_0x4ba22d,_0x362c66['dynamic'],_0x362c66['maxAabbSiz'+'e'],_0x362c66['_ui']||_0x362c66['_sprite']);for(let _0x6e2d6f=-0xc*-0x2c2+0x15a1+-0x36b9*0x1;_0x6e2d6f<_0x53f12e['length'];_0x6e2d6f++)_0x471422=this['create'](_0x53f12e[_0x6e2d6f],_0x362c66['dynamic'],parseInt(_0x44f94a,-0x1f43*0x1+-0x1*0x1b83+0x3ad0)),_0x471422&&_0x471422['addToLayer'+'s'](this['scene'],_0x362c66['layers']);}}['prepare'](_0x453e1c,_0x36028a,_0x29c8e8=Number['POSITIVE_I'+'NFINITY'],_0x549337){if(_0x453e1c['length']===0x1a5*0x1+0x4*0x5+-0x9*0x31)return[];const _0x2ac3b1=_0x29c8e8*(-0x63*0x17+-0x2*0x599+-0x1417*-0x1+0.5),_0x193f8c=-0x1be*-0x14+-0x2078*0x1+-0x1a0*-0x1,_0x3b0f0e=-0x148c941e3+0xd41e032f+-0x174ab3eb3*-0x1,_0x385a23=new Ie(),_0x144e8b=new Ie();let _0x34a6fd=null,_0x185982;const _0x3d6f56=[];let _0x3ea8dd=0x77c*-0x1+-0x72d+0x8b*0x1b;_0x549337&&_0x453e1c['sort']((_0x90559a,_0x19b7aa)=>_0x90559a['drawOrder']-_0x19b7aa['drawOrder']);let _0x4a9089=_0x453e1c,_0x16b25a;const _0x29a7e9=_0x549337?function(_0x53d885){_0x34a6fd?_0x34a6fd['add'](_0x53d885['aabb']):_0x34a6fd=_0x53d885['aabb']['clone'](),_0x16b25a['push'](_0x53d885);}:function(_0x9a7d32){_0x16b25a['push'](_0x9a7d32);};for(;_0x4a9089['length']>-0xc+0xb3*-0x5+0x38b*0x1;){_0x3d6f56[_0x3ea8dd]=[_0x4a9089[0xde7*-0x1+-0x1a90+-0xd7d*-0x3]],_0x16b25a=[];const _0x44ed4d=_0x4a9089[-0x43f*-0x1+0xa1*0x37+0x3*-0xcf2]['material'],_0x55425b=_0x4a9089[0x8e5*-0x2+-0x12*0x6a+0x193e]['layer'],_0x50f213=_0x4a9089[0x23*-0x23+0x1d2c+-0x1*0x1863]['_shaderDef'+'s'],_0x26748a=_0x4a9089[-0x197*-0x4+0x502*-0x1+-0x2*0xad]['parameters'],_0x2976c2=_0x4a9089[0x10b7+-0x1*0x1349+-0x2f*-0xe]['stencilFro'+'nt'];let _0x19febd=_0x4a9089[0x7ee+0x12b9*0x1+0x1aa7*-0x1]['mesh']['vertexBuff'+'er']['getNumVert'+'ices']();const _0x35917c=_0x4a9089[0x1*-0x1989+-0x20bc+0x3a45]['drawOrder'];_0x385a23['copy'](_0x4a9089[-0x3*0x79f+0xa7f*0x3+-0x10*0x8a]['aabb']);const _0x45b702=Sd(_0x4a9089[-0x7e9+0x15*0x1af+-0x1b72]),_0x2b97f1=_0x4a9089[0x227c+-0xf99+-0x12e3]['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh'],_0x362b39=_0x4a9089[0x228b+-0x24fe+0x273]['mesh']['primitive'][-0x8c1+0x5*0x312+-0x699]['indexed'];_0x34a6fd=null;for(let _0x177227=-0x2d*-0xc9+0x6b9*-0x2+0xaf1*-0x2;_0x177227<_0x4a9089['length'];_0x177227++){const _0x19d279=_0x4a9089[_0x177227];if(_0x36028a&&_0x3d6f56[_0x3ea8dd]['length']>=_0x193f8c){_0x16b25a=_0x16b25a['concat'](_0x4a9089['slice'](_0x177227));break;}if(_0x44ed4d!==_0x19d279['material']||_0x55425b!==_0x19d279['layer']||_0x2b97f1!==_0x19d279['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh']||_0x362b39!==_0x19d279['mesh']['primitive'][-0x12a+0x1*0x1079+-0xf4f]['indexed']||_0x50f213!==_0x19d279['_shaderDef'+'s']||_0x19febd+_0x19d279['mesh']['vertexBuff'+'er']['getNumVert'+'ices']()>_0x3b0f0e){_0x29a7e9(_0x19d279);continue;}if(_0x144e8b['copy'](_0x385a23),_0x144e8b['add'](_0x19d279['aabb']),_0x144e8b['halfExtent'+'s']['x']>_0x2ac3b1||_0x144e8b['halfExtent'+'s']['y']>_0x2ac3b1||_0x144e8b['halfExtent'+'s']['z']>_0x2ac3b1){_0x29a7e9(_0x19d279);continue;}if(_0x2976c2&&(!(_0x185982=_0x19d279['stencilFro'+'nt'])||_0x2976c2['func']!==_0x185982['func']||_0x2976c2['zpass']!==_0x185982['zpass'])){_0x29a7e9(_0x19d279);continue;}if(_0x45b702!==Sd(_0x19d279)){_0x29a7e9(_0x19d279);continue;}if(!zw(_0x26748a,_0x19d279['parameters'])){_0x29a7e9(_0x19d279);continue;}if(_0x549337&&_0x34a6fd&&_0x34a6fd['intersects'](_0x19d279['aabb'])&&_0x19d279['drawOrder']!==_0x35917c){_0x29a7e9(_0x19d279);continue;}_0x385a23['add'](_0x19d279['aabb']),_0x19febd+=_0x19d279['mesh']['vertexBuff'+'er']['getNumVert'+'ices'](),_0x3d6f56[_0x3ea8dd]['push'](_0x19d279);}_0x3ea8dd++,_0x4a9089=_0x16b25a;}return _0x3d6f56;}['collectBat'+'chedMeshDa'+'ta'](_0x4ae997,_0x4fd050){let _0x10c4f8=null,_0x10c0ab=-0x1616+-0x26da+-0x28*-0x186,_0x231dc0=-0xfd7+0x26*0x7a+-0x245,_0x3a1a83=null;for(let _0x54ef10=-0x7*-0x359+0x100d+-0x277c;_0x54ef10<_0x4ae997['length'];_0x54ef10++)if(_0x4ae997[_0x54ef10]['visible']){const _0xc0b643=_0x4ae997[_0x54ef10]['mesh'],_0x187a26=_0xc0b643['vertexBuff'+'er']['numVertice'+'s'];if(_0x10c0ab+=_0x187a26,_0xc0b643['primitive'][-0x421*0x2+-0x7*0x333+0x1ea7]['indexed'])_0x231dc0+=_0xc0b643['primitive'][-0x996*-0x4+-0x16bd+-0xf9b]['count'];else{const _0x83933a=_0xc0b643['primitive'][0x27a+-0x1c68+0x19ee]['type'];(_0x83933a===$r||_0x83933a===cr)&&_0xc0b643['primitive'][-0x241a+-0x1ff7+0x4411]['count']===-0x1*-0x481+-0x1f25+-0x6aa*-0x4&&(_0x231dc0+=-0x22ef+0x71*-0x3d+0x1*0x3de2);}if(!_0x10c4f8){_0x3a1a83=_0x4ae997[_0x54ef10]['material'],_0x10c4f8={};const _0x1af388=_0xc0b643['vertexBuff'+'er']['format']['elements'];for(let _0x4a479d=-0x15*-0x61+0x153*0x9+-0x13e0;_0x4a479d<_0x1af388['length'];_0x4a479d++){const _0x216a2c=_0x1af388[_0x4a479d]['name'];_0x10c4f8[_0x216a2c]={'numComponents':_0x1af388[_0x4a479d]['numCompone'+'nts'],'dataType':_0x1af388[_0x4a479d]['dataType'],'normalize':_0x1af388[_0x4a479d]['normalize'],'count':0x0};}_0x4fd050&&(_0x10c4f8[ns]={'numComponents':0x1,'dataType':Be,'normalize':!(-0x6*-0xb2+0x29*-0xbd+0x1a1a),'count':0x0});}}return{'streams':_0x10c4f8,'batchNumVerts':_0x10c0ab,'batchNumIndices':_0x231dc0,'material':_0x3a1a83};}['create'](_0xb9bfec,_0x50c99f,_0x321418){const _0x58200f=de();this['_init']||(this['vertexForm'+'ats']={},this['_init']=!(0x13a4+0x53d+-0x18e1));let _0x5ad3f5=null,_0x117902,_0x3ecc09,_0x2a90bb,_0x1bbe76=null;const _0x4b4ff2=this['collectBat'+'chedMeshDa'+'ta'](_0xb9bfec,_0x50c99f);if(_0x4b4ff2['streams']){const _0x2e9f30=_0x4b4ff2['streams'];let _0x128bb2=_0x4b4ff2['material'];const _0x522c77=_0x4b4ff2['batchNumVe'+'rts'],_0xa35074=_0x4b4ff2['batchNumIn'+'dices'];_0x1bbe76=new Dp(_0xb9bfec,_0x50c99f,_0x321418),this['_batchList']['push'](_0x1bbe76);let _0x52a269,_0x540bd6,_0x16de55,_0x455031,_0x26e641=0x1d05+-0x7c1+-0x2*0xaa2,_0x317d57=0x1*-0x6d3+-0x172d*-0x1+-0x105a,_0xd38cff;const _0x5e7c70=_0x522c77<=0x816a+-0x86b7*0x1+0x1054c?Uint16Array:Uint32Array,_0x2af9a3=new _0x5e7c70(_0xa35074);for(_0x117902 in _0x2e9f30)_0x5ad3f5=_0x2e9f30[_0x117902],_0x5ad3f5['typeArrayT'+'ype']=ln[_0x5ad3f5['dataType']],_0x5ad3f5['elementByt'+'eSize']=po[_0x5ad3f5['dataType']],_0x5ad3f5['buffer']=new _0x5ad3f5['typeArrayT'+'ype'](_0x522c77*_0x5ad3f5['numCompone'+'nts']);for(let _0x197268=-0x9*0x253+-0x1*-0xcbd+0x82e;_0x197268<_0xb9bfec['length'];_0x197268++)if(_0xb9bfec[_0x197268]['visible']){_0x3ecc09=_0xb9bfec[_0x197268]['mesh'],_0x2a90bb=_0x3ecc09['vertexBuff'+'er']['numVertice'+'s'],_0x50c99f||(_0xd38cff=_0xb9bfec[_0x197268]['node']['getWorldTr'+'ansform']());for(_0x117902 in _0x2e9f30)if(_0x117902!==ns){_0x5ad3f5=_0x2e9f30[_0x117902];const _0x1ebf8c=new _0x5ad3f5['typeArrayT'+'ype'](_0x5ad3f5['buffer']['buffer'],_0x5ad3f5['elementByt'+'eSize']*_0x5ad3f5['count']),_0x197959=_0x3ecc09['getVertexS'+'tream'](_0x117902,_0x1ebf8c)*_0x5ad3f5['numCompone'+'nts'];if(_0x5ad3f5['count']+=_0x197959,!_0x50c99f&&_0x5ad3f5['numCompone'+'nts']>=-0x23f7+-0x2391*-0x1+-0x3*-0x23){if(_0x117902===Pe){const _0x5272d2=_0xd38cff['data'],_0x5eb6fe=_0x5272d2[0x1c2b*-0x1+-0x10*0x239+0xfb*0x41],_0x16e930=_0x5272d2[-0x1*-0xd57+0x120e+0xe*-0x23e],_0x3106e0=_0x5272d2[-0x19fd*0x1+0x200d+-0x60e],_0x1deba1=_0x5272d2[0x1*-0x15e2+0x713*0x5+-0xd79*0x1],_0x3c5ad4=_0x5272d2[0x26*0x52+0x2a8+0xdf*-0x11],_0x22c5fd=_0x5272d2[0x2298+-0x1d75+-0x51d],_0x5d7e93=_0x5272d2[-0x5d8+-0x25a+0x9*0xea],_0x1244a1=_0x5272d2[0x2661*-0x1+0xe3b*0x1+0x29*0x97],_0x4b4c7a=_0x5272d2[0x217e*-0x1+0x1199+-0x1*-0xfef],_0x4ac2b6=_0x5272d2[0x860+0x194f+-0x21a3*0x1],_0x1d80d8=_0x5272d2[-0xaa6*-0x2+0x7*-0x403+0x6d6],_0x397a8a=_0x5272d2[0x1*-0xe7e+0x3*0x650+-0x464];let _0x328e1c,_0x522df5,_0x2e615b;for(let _0x40e040=-0x955+0x24f6+-0x283*0xb;_0x40e040<_0x197959;_0x40e040+=_0x5ad3f5['numCompone'+'nts'])_0x328e1c=_0x1ebf8c[_0x40e040],_0x522df5=_0x1ebf8c[_0x40e040+(0xb69+-0x190e+0xda6)],_0x2e615b=_0x1ebf8c[_0x40e040+(0x26bd*-0x1+-0xa1*0xb+0x2daa)],_0x1ebf8c[_0x40e040]=_0x328e1c*_0x5eb6fe+_0x522df5*_0x1deba1+_0x2e615b*_0x5d7e93+_0x4ac2b6,_0x1ebf8c[_0x40e040+(-0x137*-0x3+-0x9e4+-0x20*-0x32)]=_0x328e1c*_0x16e930+_0x522df5*_0x3c5ad4+_0x2e615b*_0x1244a1+_0x1d80d8,_0x1ebf8c[_0x40e040+(-0x2a*-0x27+-0x78d+0x1*0x129)]=_0x328e1c*_0x3106e0+_0x522df5*_0x22c5fd+_0x2e615b*_0x4b4c7a+_0x397a8a;}else{if(_0x117902===cs||_0x117902===ci){zp['invertMat4'](_0xd38cff)['transpose']();const [_0x36b07e,_0x30afd8,_0x1f8ed0,_0x4dcc24,_0x510c36,_0x36cb8a,_0x25fa49,_0x5760f1,_0x4a0e60]=zp['data'];let _0x6a1df8,_0xa07258,_0x29c1ac;for(let _0x3d92ce=0x3*-0xa18+0x2570+0x728*-0x1;_0x3d92ce<_0x197959;_0x3d92ce+=_0x5ad3f5['numCompone'+'nts'])_0x6a1df8=_0x1ebf8c[_0x3d92ce],_0xa07258=_0x1ebf8c[_0x3d92ce+(-0x1f48+-0x1*-0xbb9+0x1390)],_0x29c1ac=_0x1ebf8c[_0x3d92ce+(-0x23fb+0xeac+0x1551)],_0x1ebf8c[_0x3d92ce]=_0x6a1df8*_0x36b07e+_0xa07258*_0x4dcc24+_0x29c1ac*_0x25fa49,_0x1ebf8c[_0x3d92ce+(0x2611+0x17*-0x1a5+-0x1*0x3d)]=_0x6a1df8*_0x30afd8+_0xa07258*_0x510c36+_0x29c1ac*_0x5760f1,_0x1ebf8c[_0x3d92ce+(0x9*0x1b0+0x5*0x346+0x7e3*-0x4)]=_0x6a1df8*_0x1f8ed0+_0xa07258*_0x36cb8a+_0x29c1ac*_0x4a0e60;}}}}if(_0x50c99f){_0x5ad3f5=_0x2e9f30[ns];for(let _0x2ab669=-0x24f5+-0x19*0xc5+0x1*0x3832;_0x2ab669<_0x2a90bb;_0x2ab669++)_0x5ad3f5['buffer'][_0x5ad3f5['count']++]=_0x197268;}if(_0x3ecc09['primitive'][-0x1a49+-0xa81+0x24ca*0x1]['indexed']){_0x52a269=_0x3ecc09['primitive'][0xd50+0xb89*0x1+-0x18d9]['base'],_0x540bd6=_0x3ecc09['primitive'][-0x5*0x4cd+0x18d5+-0x4*0x35]['baseVertex']||-0x364+0x24eb+-0x1*0x2187,_0x16de55=_0x3ecc09['primitive'][0xd43+0x23a2+-0x30e5]['count'];const _0x2aff15=_0x3ecc09['indexBuffe'+'r'][0x3*0xa+-0x133d+0x131f*0x1]['getFormat']();_0x455031=new Bh[_0x2aff15](_0x3ecc09['indexBuffe'+'r'][0x3d+0x26b7+-0x9*0x454]['storage']);}else{_0x540bd6=0x1032+0x2627*0x1+-0x3659;const _0x42ed80=_0x3ecc09['primitive'][-0x2b7*-0xd+0x1*-0x1249+-0x137*0xe]['type'];if(_0x42ed80===$r||_0x42ed80===cr){if(_0x3ecc09['primitive'][0xd53+-0x5*0x63d+0x8ef*0x2]['count']===-0x12cf+0x1*-0xe27+0x1d5*0x12)_0x52a269=-0x3*-0x24f+-0xc7f*0x1+0x17*0x3e,_0x16de55=0x1b23*0x1+-0x33*0x9a+0x53*0xb,_0x455031=_0x42ed80===$r?Uw:Bw;else{_0x16de55=-0x1331+-0xae9+-0x1*-0x1e1a;continue;}}}for(let _0x4da8da=-0x3e5+-0xdb2*-0x1+-0x9cd;_0x4da8da<_0x16de55;_0x4da8da++)_0x2af9a3[_0x4da8da+_0x317d57]=_0x455031[_0x52a269+_0x4da8da]+_0x540bd6+_0x26e641;_0x317d57+=_0x16de55,_0x26e641+=_0x2a90bb;}_0x3ecc09=new Ge(this['device']);for(_0x117902 in _0x2e9f30)_0x5ad3f5=_0x2e9f30[_0x117902],_0x3ecc09['setVertexS'+'tream'](_0x117902,_0x5ad3f5['buffer'],_0x5ad3f5['numCompone'+'nts'],void(-0x1268+0x8*0x1af+0x278*0x2),_0x5ad3f5['dataType'],_0x5ad3f5['normalize']);_0x2af9a3['length']>0xacb+-0xd02+0x237&&_0x3ecc09['setIndices'](_0x2af9a3),_0x3ecc09['update'](zs,!(-0x19fd+-0x1a02+0x340*0x10)),_0x50c99f&&(_0x128bb2=_0x128bb2['clone'](),_0x128bb2['update']());const _0x54f1f5=new We(_0x3ecc09,_0x128bb2,this['rootNode']);_0x54f1f5['castShadow']=_0x1bbe76['origMeshIn'+'stances'][0x3ff+0x905+-0xd04]['castShadow'],_0x54f1f5['parameters']=_0x1bbe76['origMeshIn'+'stances'][-0x13c0+-0x1e9*-0x7+0x661]['parameters'],_0x54f1f5['layer']=_0x1bbe76['origMeshIn'+'stances'][0x2*-0xa93+-0x45*-0x39+-0x5c9*-0x1]['layer'],_0x54f1f5['_shaderDef'+'s']=_0x1bbe76['origMeshIn'+'stances'][-0xa3a+0x2*-0x11de+0x2df6]['_shaderDef'+'s'],_0x54f1f5['batching']=!(-0xd*-0x2d7+0x144*-0xd+-0x1477),_0x54f1f5['cull']=_0x1bbe76['origMeshIn'+'stances'][-0xa*-0xea+-0x1f*-0x34+-0x1*0xf70]['cull'];const _0x3c2f9f=this['_batchGrou'+'ps'][_0x321418];if(_0x3c2f9f&&_0x3c2f9f['_ui']&&(_0x54f1f5['cull']=!(-0x1da*0x5+0x1334+-0x1*0x9f1)),_0x50c99f){const _0x33d8de=[];for(let _0x166530=-0xd36+-0x2*0x5d5+0x18e0;_0x166530<_0x1bbe76['origMeshIn'+'stances']['length'];_0x166530++)_0x33d8de['push'](_0x1bbe76['origMeshIn'+'stances'][_0x166530]['node']);_0x54f1f5['skinInstan'+'ce']=new Rp(this['device'],_0x33d8de,this['rootNode']);}_0x54f1f5['_updateAab'+'b']=!(0x1*-0xe51+0x31*-0x1f+0x11*0x131),_0x54f1f5['drawOrder']=_0x1bbe76['origMeshIn'+'stances'][-0x37c*-0x7+-0x1d*-0xad+-0x2bfd]['drawOrder'],_0x54f1f5['stencilFro'+'nt']=_0x1bbe76['origMeshIn'+'stances'][0x2b8+-0x9f0+-0x108*-0x7]['stencilFro'+'nt'],_0x54f1f5['stencilBac'+'k']=_0x1bbe76['origMeshIn'+'stances'][-0x43*0x91+0x74a+0x1ea9]['stencilBac'+'k'],_0x54f1f5['flipFacesF'+'actor']=Sd(_0x1bbe76['origMeshIn'+'stances'][0x527*-0x2+0x948+0x106]),_0x54f1f5['castShadow']=_0x1bbe76['origMeshIn'+'stances'][-0xbab+0x11af+-0x604]['castShadow'],_0x1bbe76['meshInstan'+'ce']=_0x54f1f5,_0x1bbe76['updateBoun'+'dingBox']();}return this['_stats']['createTime']+=de()-_0x58200f,_0x1bbe76;}['updateAll'](){this['_dirtyGrou'+'ps']['length']>-0xf31*-0x1+0x1*-0x22c2+0x1391&&this['generate'](this['_dirtyGrou'+'ps']);const _0x5422fc=de();for(let _0x3d0c1c=-0x4*0x5c8+0x1bda+-0x4ba;_0x3d0c1c<this['_batchList']['length'];_0x3d0c1c++)this['_batchList'][_0x3d0c1c]['dynamic']&&this['_batchList'][_0x3d0c1c]['updateBoun'+'dingBox']();this['_stats']['updateLast'+'FrameTime']=de()-_0x5422fc;}['clone'](_0x45ce46,_0x2efe5b){const _0x43b2e4=new Dp(_0x2efe5b,_0x45ce46['dynamic'],_0x45ce46['batchGroup'+'Id']);this['_batchList']['push'](_0x43b2e4);const _0xe8cb08=[];for(let _0x6a87f2=-0x2477+-0xf48+-0xd*-0x3fb;_0x6a87f2<_0x2efe5b['length'];_0x6a87f2++)_0xe8cb08['push'](_0x2efe5b[_0x6a87f2]['node']);return _0x43b2e4['meshInstan'+'ce']=new We(_0x45ce46['meshInstan'+'ce']['mesh'],_0x45ce46['meshInstan'+'ce']['material'],_0x45ce46['meshInstan'+'ce']['node']),_0x43b2e4['meshInstan'+'ce']['_updateAab'+'b']=!(-0xd6e+0x1*0xfad+-0xe*0x29),_0x43b2e4['meshInstan'+'ce']['parameters']=_0x2efe5b[0x1ec1+-0x351+-0x1b70]['parameters'],_0x43b2e4['meshInstan'+'ce']['cull']=_0x2efe5b[-0x57b*-0x3+-0x29e+-0xdd3]['cull'],_0x43b2e4['meshInstan'+'ce']['layer']=_0x2efe5b[0x1ed2+0x505*-0x3+-0xfc3]['layer'],_0x45ce46['dynamic']&&(_0x43b2e4['meshInstan'+'ce']['skinInstan'+'ce']=new Rp(this['device'],_0xe8cb08,this['rootNode'])),_0x43b2e4['meshInstan'+'ce']['castShadow']=_0x45ce46['meshInstan'+'ce']['castShadow'],_0x43b2e4;}['destroyBat'+'ch'](_0x2abd86){_0x2abd86['destroy'](this['scene'],this['_batchGrou'+'ps'][_0x2abd86['batchGroup'+'Id']]['layers']);}}const Gp='uSceneColo'+'rMap';class Gw extends fs{constructor(){super(...arguments),h(this,'colorRende'+'rTarget',null),h(this,'source',null);}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']);}['shouldReal'+'locate'](_0x49730d,_0x160a76,_0x5dd143){if((_0x49730d==null?void(0x268e+0xc56*-0x1+-0x1a38):_0x49730d['colorBuffe'+'r']['format'])!==_0x5dd143)return!(-0xeb*0xa+-0xa*-0x6d+0x4ec);const _0x5ae283=(_0x160a76==null?void(0x97b*-0x3+0xa7e+0x11f3):_0x160a76['width'])||this['device']['width'],_0x124c01=(_0x160a76==null?void(-0x1669+0x6f*-0x12+0x1e37):_0x160a76['height'])||this['device']['height'];return!_0x49730d||_0x5ae283!==_0x49730d['width']||_0x124c01!==_0x49730d['height'];}['allocateRe'+'nderTarget'](_0x36084b,_0x25b833,_0x2e4808,_0x47a3a6){const _0x49ecd0=new _e(_0x2e4808,{'name':Gp,'format':_0x47a3a6,'width':_0x25b833?_0x25b833['colorBuffe'+'r']['width']:_0x2e4808['width'],'height':_0x25b833?_0x25b833['colorBuffe'+'r']['height']:_0x2e4808['height'],'mipmaps':!(-0x93*0x6+0x443*-0x1+0x7b5*0x1),'minFilter':ea,'magFilter':_t,'addressU':ue,'addressV':ue});return _0x36084b?(_0x36084b['destroyFra'+'meBuffers'](),_0x36084b['_colorBuff'+'er']=_0x49ecd0,_0x36084b['_colorBuff'+'ers']=[_0x49ecd0]):_0x36084b=new vt({'name':'ColorGrabR'+'T','colorBuffer':_0x49ecd0,'depth':!(0x1*0x5db+-0x1c45+0x166b),'stencil':!(-0x18bf+0x10b4+-0x406*-0x2),'autoResolve':!(-0x134f+-0x7*-0x565+0x1273*-0x1)}),_0x36084b;}['releaseRen'+'derTarget'](_0x17bfa7){_0x17bfa7&&(_0x17bfa7['destroyTex'+'tureBuffer'+'s'](),_0x17bfa7['destroy']());}['frameUpdat'+'e'](){const _0x151b23=this['device'],_0x2e4128=this['source'],_0x211273=(_0x2e4128==null?void(-0x43b*0x1+0x1*-0x2575+0x1d*0x170):_0x2e4128['colorBuffe'+'r']['format'])??this['device']['backBuffer'+'Format'];this['shouldReal'+'locate'](this['colorRende'+'rTarget'],_0x2e4128==null?void(0x9ef*-0x1+-0x1*-0x5cb+-0x1*-0x424):_0x2e4128['colorBuffe'+'r'],_0x211273)&&(this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']),this['colorRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['colorRende'+'rTarget'],_0x2e4128,_0x151b23,_0x211273));const _0x1413bb=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x151b23['scope']['resolve'](Gp)['setValue'](_0x1413bb);}['execute'](){const _0x3dd15c=this['device'];Q['pushGpuMar'+'ker'](_0x3dd15c,'GRAB-COLOR');const _0x1b026d=this['source'],_0x5749c8=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x3dd15c['isWebGPU']?(_0x3dd15c['copyRender'+'Target'](_0x1b026d,this['colorRende'+'rTarget'],!(0x1f2b+0x1*-0x224d+0x191*0x2),!(-0x218b+0x1d1b*-0x1+0x2b*0x175)),_0x3dd15c['mipmapRend'+'erer']['generate'](this['colorRende'+'rTarget']['colorBuffe'+'r']['impl'])):(_0x3dd15c['copyRender'+'Target'](_0x1b026d,this['colorRende'+'rTarget'],!(-0x16b2+-0x6*0x56d+0x3740),!(0x1511*-0x1+0x116e+0x4*0xe9)),_0x3dd15c['activeText'+'ure'](_0x3dd15c['maxCombine'+'dTextures']-(-0x8e0+0x767*0x2+-0x5ed*0x1)),_0x3dd15c['bindTextur'+'e'](_0x5749c8),_0x3dd15c['gl']['generateMi'+'pmap'](_0x5749c8['impl']['_glTarget'])),Q['popGpuMark'+'er'](_0x3dd15c);}}const Hp='uSceneDept'+'hMap';class Hw extends fs{constructor(_0x182120,_0x3fe0ca){super(_0x182120),h(this,'depthRende'+'rTarget',null),h(this,'camera',null),this['camera']=_0x3fe0ca;}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']);}['shouldReal'+'locate'](_0x59a8ad,_0x175586){const _0x1d52f5=(_0x175586==null?void(0x2353+0x702+-0x2a55*0x1):_0x175586['width'])||this['device']['width'],_0x25100d=(_0x175586==null?void(-0x226f+0x10a4+0x11cb):_0x175586['height'])||this['device']['height'];return!_0x59a8ad||_0x1d52f5!==_0x59a8ad['width']||_0x25100d!==_0x59a8ad['height'];}['allocateRe'+'nderTarget'](_0x454440,_0x4cef75,_0x4ffa86,_0x11bf26,_0xb96cce){const _0x3383f6=new _e(_0x4ffa86,{'name':Hp,'format':_0x11bf26,'width':_0x4cef75?_0x4cef75['colorBuffe'+'r']['width']:_0x4ffa86['width'],'height':_0x4cef75?_0x4cef75['colorBuffe'+'r']['height']:_0x4ffa86['height'],'mipmaps':!(-0x1a1f+-0x7dc+0x2d5*0xc),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});return _0x454440?(_0x454440['destroyFra'+'meBuffers'](),_0xb96cce?_0x454440['_depthBuff'+'er']=_0x3383f6:(_0x454440['_colorBuff'+'er']=_0x3383f6,_0x454440['_colorBuff'+'ers']=[_0x3383f6])):_0x454440=new vt({'name':'DepthGrabR'+'T','colorBuffer':_0xb96cce?null:_0x3383f6,'depthBuffer':_0xb96cce?_0x3383f6:null,'depth':!_0xb96cce,'stencil':_0x4ffa86['supportsSt'+'encil'],'autoResolve':!(-0x1*-0x1eb2+-0x2b*0xa9+-0x127*0x2)}),_0x454440;}['releaseRen'+'derTarget'](_0x8fa5b9){_0x8fa5b9&&(_0x8fa5b9['destroyTex'+'tureBuffer'+'s'](),_0x8fa5b9['destroy']());}['before'](){var _0x1973a9,_0x2de10f;const _0xa82dce=this['camera'],_0x1be023=this['device'],_0x58f183=(_0xa82dce==null?void(-0x1*0x20b9+-0x1c33*0x1+-0x2*-0x1e76):_0xa82dce['renderTarg'+'et'])??_0x1be023['backBuffer'];let _0x4fbaf9=!(-0x15d7*0x1+0x40*0x5f+-0x1e9),_0x74290b=_0x58f183['stencil']?Cc:ki;_0x1be023['isWebGPU']&&_0x58f183['samples']>-0x6e+-0xe31+0xea0&&(_0x74290b=Hi,_0x4fbaf9=!(-0x1f62+0x141*-0xb+0x2d2e));const _0x539183=((_0x1973a9=_0xa82dce['renderTarg'+'et'])==null?void(-0x7c*0x23+-0x8b7*-0x1+-0x39*-0x25):_0x1973a9['depthBuffe'+'r'])??((_0x2de10f=_0xa82dce['renderTarg'+'et'])==null?void(0xb*0x22+0x130*0x4+-0x6*0x109):_0x2de10f['colorBuffe'+'r']);this['shouldReal'+'locate'](this['depthRende'+'rTarget'],_0x539183)&&(this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']),this['depthRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['depthRende'+'rTarget'],_0xa82dce['renderTarg'+'et'],_0x1be023,_0x74290b,_0x4fbaf9));const _0x33c72a=_0x4fbaf9?this['depthRende'+'rTarget']['depthBuffe'+'r']:this['depthRende'+'rTarget']['colorBuffe'+'r'];_0x1be023['scope']['resolve'](Hp)['setValue'](_0x33c72a);}['execute'](){const _0xb86e0=this['device'];if(Q['pushGpuMar'+'ker'](_0xb86e0,'GRAB-DEPTH'),_0xb86e0['isWebGL2']&&_0xb86e0['renderTarg'+'et']['samples']>0x1372+0x1a3b+-0x2*0x16d6){const _0x47c760=_0xb86e0['renderTarg'+'et']['impl']['_glFrameBu'+'ffer'],_0x4dd898=this['depthRende'+'rTarget'];_0xb86e0['renderTarg'+'et']=_0x4dd898,_0xb86e0['updateBegi'+'n'](),this['depthRende'+'rTarget']['impl']['internalRe'+'solve'](_0xb86e0,_0x47c760,_0x4dd898['impl']['_glFrameBu'+'ffer'],this['depthRende'+'rTarget'],_0xb86e0['gl']['DEPTH_BUFF'+'ER_BIT']);}else _0xb86e0['copyRender'+'Target'](_0xb86e0['renderTarg'+'et'],this['depthRende'+'rTarget'],!(0x10b*0x10+0x1ec5+-0x2f74),!(-0x25ee+0x1111+0x1*0x14dd));Q['popGpuMark'+'er'](_0xb86e0);}}class Cy{constructor(){h(this,'_gammaCorr'+'ection',uh),h(this,'_toneMappi'+'ng',Tm),h(this,'_srgbRende'+'rTarget',!(0x1d7b+-0x23a7+0x62d)),h(this,'_ssaoEnabl'+'ed',!(0x96+0x17d6*0x1+0x1*-0x186b)),h(this,'_fog',On),h(this,'_sceneDept'+'hMapLinear',!(-0x10a4+-0x1b07+0x45e*0xa)),h(this,'_hash'),h(this,'_defines',new Map()),h(this,'_definesDi'+'rty',!(-0x1d45+-0x281*0x1+0x1fc6));}get['hash'](){if(this['_hash']===void(-0x1*-0x413+0x5*0x42+-0x55d)){const _0x341cba=this['gammaCorre'+'ction']+'_'+this['toneMappin'+'g']+'_'+this['srgbRender'+'Target']+'_'+this['fog']+'_'+this['ssaoEnable'+'d']+'_'+this['sceneDepth'+'MapLinear'];this['_hash']=ti(_0x341cba);}return this['_hash'];}get['defines'](){const _0x14707d=this['_defines'];return this['_definesDi'+'rty']&&(this['_definesDi'+'rty']=!(-0x1548+-0x692+0x1bdb),_0x14707d['clear'](),this['_sceneDept'+'hMapLinear']&&_0x14707d['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',!(0x9b9+-0x1db4+0x13fb)),_0x14707d['set']('FOG',this['_fog']['toUpperCas'+'e']()),_0x14707d['set']('TONEMAP',my[this['_toneMappi'+'ng']]),_0x14707d['set']('GAMMA',JT[this['shaderOutp'+'utGamma']])),_0x14707d;}['markDirty'](){this['_hash']=void(0x4f*-0x1e+-0x21ed+0x2b2f),this['_definesDi'+'rty']=!(-0x7*0x2fe+-0xd58+0x224a*0x1);}set['fog'](_0x318ad4){this['_fog']!==_0x318ad4&&(this['_fog']=_0x318ad4,this['markDirty']());}get['fog'](){return this['_fog'];}set['ssaoEnable'+'d'](_0x381845){this['_ssaoEnabl'+'ed']!==_0x381845&&(this['_ssaoEnabl'+'ed']=_0x381845,this['markDirty']());}get['ssaoEnable'+'d'](){return this['_ssaoEnabl'+'ed'];}set['gammaCorre'+'ction'](_0x3bf0af){this['_gammaCorr'+'ectionAssi'+'gned']=!(-0x766*-0x2+0x7ec+-0x16b8),this['_gammaCorr'+'ection']!==_0x3bf0af&&(this['_gammaCorr'+'ection']=_0x3bf0af,this['markDirty']());}get['gammaCorre'+'ction'](){return this['_gammaCorr'+'ection'];}set['toneMappin'+'g'](_0x1932cc){this['_toneMappi'+'ng']!==_0x1932cc&&(this['_toneMappi'+'ng']=_0x1932cc,this['markDirty']());}get['toneMappin'+'g'](){return this['_toneMappi'+'ng'];}set['srgbRender'+'Target'](_0xf1ddd4){this['_srgbRende'+'rTarget']!==_0xf1ddd4&&(this['_srgbRende'+'rTarget']=_0xf1ddd4,this['markDirty']());}get['srgbRender'+'Target'](){return this['_srgbRende'+'rTarget'];}set['sceneDepth'+'MapLinear'](_0x547bfe){this['_sceneDept'+'hMapLinear']!==_0x547bfe&&(this['_sceneDept'+'hMapLinear']=_0x547bfe,this['markDirty']());}get['sceneDepth'+'MapLinear'](){return this['_sceneDept'+'hMapLinear'];}get['shaderOutp'+'utGamma'](){return this['_gammaCorr'+'ection']===uh&&!this['_srgbRende'+'rTarget']?uh:ol;}}const ya=new I(),Gn=new I(),Wp=new I(),$p=new te(),Ww=[new I(),new I(),new I(),new I(),new I(),new I(),new I(),new I()];class dl{constructor(){h(this,'shaderPass'+'Info',null),h(this,'renderPass'+'ColorGrab',null),h(this,'renderPass'+'DepthGrab',null),h(this,'fogParams',null),h(this,'shaderPara'+'ms',new Cy()),h(this,'renderPass'+'es',[]),h(this,'jitter',-0x866*-0x3+0xa7a+-0x23ac),(this['_aspectRat'+'io']=(0x6*0x2d+-0xe98+0xd9a*0x1)/(-0x1ba7+-0xaa2+-0x2d*-0xda),this['_aspectRat'+'ioMode']=Im,this['_calculate'+'Projection']=null,this['_calculate'+'Transform']=null,this['_clearColo'+'r']=new ie(-0xb3f*0x2+0x1*0xe24+0x85a*0x1+0.75,-0x263*-0x1+-0x10*0x240+0x1*0x219d+0.75,-0x180e+0x4d7+0x1337+0.75,0x379*-0x4+0x1*0x25eb+-0x802*0x3),this['_clearColo'+'rBuffer']=!(-0x1758+0x11f5*0x1+0x1*0x563),this['_clearDept'+'h']=-0x1*0x1282+-0xc5*0x25+0x2efc,this['_clearDept'+'hBuffer']=!(0x1334+-0x2*0x9ca+0x60),this['_clearSten'+'cil']=-0x7*-0x2a1+0x1*0x1c69+0x1768*-0x2,this['_clearSten'+'cilBuffer']=!(-0xe38+0xd08+0x130),this['_cullFaces']=!(-0x125*-0x18+-0x2*0x2ca+0x2*-0xaf2),this['_farClip']=0xa5b+-0xe5*0x29+-0x1*-0x1e3a,this['_flipFaces']=!(-0x18b7+0x199*0x3+0x13ed),this['_fov']=0x1f53+0x2470+-0x4396,this['_frustumCu'+'lling']=!(0x1df1+-0xdd1+0x20*-0x81),this['_horizonta'+'lFov']=!(0x1565+-0xa7a+-0xaea),this['_layers']=[Wi,os,_m,nl,gm],this['_layersSet']=new Set(this['_layers']),this['_nearClip']=0xb24+0x2062+-0x2b86+0.1,this['_node']=null,this['_orthoHeig'+'ht']=0x58f+0x184e+-0x1dd3,this['_projectio'+'n']=Ks,this['_rect']=new ae(0x199*0xc+-0x182*0xe+0x10*0x1f,-0x8b2*0x4+-0x58*0x50+0xf92*0x4,0xdd9*-0x1+0x1064+-0x28a,0x2a5*-0x9+0x1*-0x1ec5+0x3693),this['_renderTar'+'get']=null,this['_scissorRe'+'ct']=new ae(0xc1d+0x25be+0x1*-0x31db,0x183f+-0xb4b+-0xcf4,0x2367+-0xfbf+-0x13a7*0x1,-0x1808+-0x1993+-0x4*-0xc67),this['_scissorRe'+'ctClear']=!(0xcba+0x868+-0x259*0x9),this['_aperture']=0x1*-0x12d6+-0x148+0x142e,this['_shutter']=(-0xa8+-0x128e+0x1*0x1337)/(-0x238f+-0xf77+-0x9e*-0x59),this['_sensitivi'+'ty']=0x82e+0x1458+-0x89*0x2e,this['_projMat']=new te(),this['_projMatDi'+'rty']=!(-0x1*-0x1463+-0x1cc*0xd+0x2f9),this['_projMatSk'+'ybox']=new te(),this['_viewMat']=new te(),this['_viewMatDi'+'rty']=!(0x8b*-0x16+-0xa94+0x1686),this['_viewProjM'+'at']=new te(),this['_viewProjM'+'atDirty']=!(-0x214*0x3+0x62+-0x2ed*-0x2),this['_shaderMat'+'ricesVersi'+'on']=-0x263c+-0x26d8+-0x2*-0x268a,this['_viewProjI'+'nverse']=new te(),this['_viewProjC'+'urrent']=null,this['_viewProjP'+'revious']=new te(),this['_jitters']=[0x4d+-0x1*0x1489+0x143c,-0x1bc+-0x35+0x1f1,0xbd5+-0x11d*0x14+0xa6f,-0x1fed*0x1+0xa5b+0x1592],this['frustum']=new M0(),this['_xr']=null,this['_xrPropert'+'ies']={'horizontalFov':this['_horizonta'+'lFov'],'fov':this['_fov'],'aspectRatio':this['_aspectRat'+'io'],'farClip':this['_farClip'],'nearClip':this['_nearClip']});}['destroy'](){var _0x519209,_0x56e4a3;(_0x519209=this['renderPass'+'ColorGrab'])==null||_0x519209['destroy'](),this['renderPass'+'ColorGrab']=null,(_0x56e4a3=this['renderPass'+'DepthGrab'])==null||_0x56e4a3['destroy'](),this['renderPass'+'DepthGrab']=null,this['renderPass'+'es']['length']=0x22d0*-0x1+-0x1f05*0x1+0x1*0x41d5;}['_storeShad'+'erMatrices'](_0x46d583,_0x331b0a,_0x130e5b,_0xd51fbe){this['_shaderMat'+'ricesVersi'+'on']!==_0xd51fbe&&(this['_shaderMat'+'ricesVersi'+'on']=_0xd51fbe,this['_viewProjP'+'revious']['copy'](this['_viewProjC'+'urrent']??_0x46d583),this['_viewProjC'+'urrent']??(this['_viewProjC'+'urrent']=new te()),this['_viewProjC'+'urrent']['copy'](_0x46d583),this['_viewProjI'+'nverse']['invert'](_0x46d583),this['_jitters'][0x137a+-0x15d6+0x12f*0x2]=this['_jitters'][-0x23cf+-0x1076+0x3445*0x1],this['_jitters'][0x1827+0x2423+-0xd*0x4a3]=this['_jitters'][0x27f*-0x3+-0x88e+0x13c*0xd],this['_jitters'][0x26f5+-0x22a7*-0x1+-0x499c]=_0x331b0a,this['_jitters'][0x189b+0xec2+-0x394*0xb]=_0x130e5b);}get['fullSizeCl'+'earRect'](){const _0x56858a=this['_scissorRe'+'ctClear']?this['scissorRec'+'t']:this['_rect'];return _0x56858a['x']===-0x213a+-0x1*0x1697+0x37d1*0x1&&_0x56858a['y']===0x115+-0x29*0xe5+0x2*0x11cc&&_0x56858a['z']===0x65*0x49+-0x16d7+-0x5f5&&_0x56858a['w']===0x2119+-0x25f7*-0x1+-0x470f;}set['aspectRati'+'o'](_0x4f82b5){this['_aspectRat'+'io']!==_0x4f82b5&&(this['_aspectRat'+'io']=_0x4f82b5,this['_projMatDi'+'rty']=!(0x611+-0x11f2+0x1*0xbe1));}get['aspectRati'+'o'](){var _0x487470;return(_0x487470=this['xr'])!=null&&_0x487470['active']?this['_xrPropert'+'ies']['aspectRati'+'o']:this['_aspectRat'+'io'];}set['aspectRati'+'oMode'](_0x19f968){this['_aspectRat'+'ioMode']!==_0x19f968&&(this['_aspectRat'+'ioMode']=_0x19f968,this['_projMatDi'+'rty']=!(-0x12*-0x14b+0x255d*-0x1+0x1*0xe17));}get['aspectRati'+'oMode'](){return this['_aspectRat'+'ioMode'];}set['calculateP'+'rojection'](_0x433cb3){this['_calculate'+'Projection']=_0x433cb3,this['_projMatDi'+'rty']=!(-0x1f7+0x152*-0xf+0x15c5);}get['calculateP'+'rojection'](){return this['_calculate'+'Projection'];}set['calculateT'+'ransform'](_0x431087){this['_calculate'+'Transform']=_0x431087;}get['calculateT'+'ransform'](){return this['_calculate'+'Transform'];}set['clearColor'](_0x119ef0){this['_clearColo'+'r']['copy'](_0x119ef0);}get['clearColor'](){return this['_clearColo'+'r'];}set['clearColor'+'Buffer'](_0x347c21){this['_clearColo'+'rBuffer']=_0x347c21;}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'](_0xa5b845){this['_clearDept'+'h']=_0xa5b845;}get['clearDepth'](){return this['_clearDept'+'h'];}set['clearDepth'+'Buffer'](_0x381025){this['_clearDept'+'hBuffer']=_0x381025;}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'il'](_0x3e32d3){this['_clearSten'+'cil']=_0x3e32d3;}get['clearStenc'+'il'](){return this['_clearSten'+'cil'];}set['clearStenc'+'ilBuffer'](_0x17b04b){this['_clearSten'+'cilBuffer']=_0x17b04b;}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}set['cullFaces'](_0x52186f){this['_cullFaces']=_0x52186f;}get['cullFaces'](){return this['_cullFaces'];}set['farClip'](_0x319fd5){this['_farClip']!==_0x319fd5&&(this['_farClip']=_0x319fd5,this['_projMatDi'+'rty']=!(-0x476+0xa13*-0x1+0xe89));}get['farClip'](){var _0x4ec6b9;return(_0x4ec6b9=this['xr'])!=null&&_0x4ec6b9['active']?this['_xrPropert'+'ies']['farClip']:this['_farClip'];}set['flipFaces'](_0xbc1415){this['_flipFaces']=_0xbc1415;}get['flipFaces'](){return this['_flipFaces'];}set['fov'](_0xae3a17){this['_fov']!==_0xae3a17&&(this['_fov']=_0xae3a17,this['_projMatDi'+'rty']=!(-0xa*0xe3+0x4*0x923+0xdd7*-0x2));}get['fov'](){var _0x1704d1;return(_0x1704d1=this['xr'])!=null&&_0x1704d1['active']?this['_xrPropert'+'ies']['fov']:this['_fov'];}set['frustumCul'+'ling'](_0x428333){this['_frustumCu'+'lling']=_0x428333;}get['frustumCul'+'ling'](){return this['_frustumCu'+'lling'];}set['horizontal'+'Fov'](_0x204b2b){this['_horizonta'+'lFov']!==_0x204b2b&&(this['_horizonta'+'lFov']=_0x204b2b,this['_projMatDi'+'rty']=!(-0x5*-0x641+0x13*-0x7+-0x1ec0));}get['horizontal'+'Fov'](){var _0xead9f;return(_0xead9f=this['xr'])!=null&&_0xead9f['active']?this['_xrPropert'+'ies']['horizontal'+'Fov']:this['_horizonta'+'lFov'];}set['layers'](_0x333cbe){this['_layers']=_0x333cbe['slice'](0x4d*0x37+-0x23*-0x3b+-0x189c),this['_layersSet']=new Set(this['_layers']);}get['layers'](){return this['_layers'];}get['layersSet'](){return this['_layersSet'];}set['nearClip'](_0x526582){this['_nearClip']!==_0x526582&&(this['_nearClip']=_0x526582,this['_projMatDi'+'rty']=!(-0x26*0x15+0x196c+0xb27*-0x2));}get['nearClip'](){var _0x57cb74;return(_0x57cb74=this['xr'])!=null&&_0x57cb74['active']?this['_xrPropert'+'ies']['nearClip']:this['_nearClip'];}set['node'](_0x1190e3){this['_node']=_0x1190e3;}get['node'](){return this['_node'];}set['orthoHeigh'+'t'](_0x255807){this['_orthoHeig'+'ht']!==_0x255807&&(this['_orthoHeig'+'ht']=_0x255807,this['_projMatDi'+'rty']=!(0x1187+0xdf*-0x1c+0x6dd));}get['orthoHeigh'+'t'](){return this['_orthoHeig'+'ht'];}set['projection'](_0x59273b){this['_projectio'+'n']!==_0x59273b&&(this['_projectio'+'n']=_0x59273b,this['_projMatDi'+'rty']=!(0x24f1*-0x1+-0x1a3*0x7+-0x3*-0x1022));}get['projection'](){return this['_projectio'+'n'];}get['projection'+'Matrix'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMat'];}set['rect'](_0x11ed2f){this['_rect']['copy'](_0x11ed2f);}get['rect'](){return this['_rect'];}set['renderTarg'+'et'](_0x2ef61a){this['_renderTar'+'get']=_0x2ef61a;}get['renderTarg'+'et'](){return this['_renderTar'+'get'];}set['scissorRec'+'t'](_0xf66bc7){this['_scissorRe'+'ct']['copy'](_0xf66bc7);}get['scissorRec'+'t'](){return this['_scissorRe'+'ct'];}get['viewMatrix'](){if(this['_viewMatDi'+'rty']){const _0x421a65=this['_node']['getWorldTr'+'ansform']();this['_viewMat']['copy'](_0x421a65)['invert'](),this['_viewMatDi'+'rty']=!(-0x965*-0x1+-0x3*0x45d+0x3b3);}return this['_viewMat'];}set['aperture'](_0x18d3de){this['_aperture']=_0x18d3de;}get['aperture'](){return this['_aperture'];}set['sensitivit'+'y'](_0x148cf0){this['_sensitivi'+'ty']=_0x148cf0;}get['sensitivit'+'y'](){return this['_sensitivi'+'ty'];}set['shutter'](_0x4756b5){this['_shutter']=_0x4756b5;}get['shutter'](){return this['_shutter'];}set['xr'](_0x9e2b22){this['_xr']!==_0x9e2b22&&(this['_xr']=_0x9e2b22,this['_projMatDi'+'rty']=!(-0x1*0xcd1+-0x762+0x1433));}get['xr'](){return this['_xr'];}['clone'](){return new dl()['copy'](this);}['copy'](_0x198e58){return this['_aspectRat'+'io']=_0x198e58['_aspectRat'+'io'],this['_farClip']=_0x198e58['_farClip'],this['_fov']=_0x198e58['_fov'],this['_horizonta'+'lFov']=_0x198e58['_horizonta'+'lFov'],this['_nearClip']=_0x198e58['_nearClip'],this['_xrPropert'+'ies']['aspectRati'+'o']=_0x198e58['_xrPropert'+'ies']['aspectRati'+'o'],this['_xrPropert'+'ies']['farClip']=_0x198e58['_xrPropert'+'ies']['farClip'],this['_xrPropert'+'ies']['fov']=_0x198e58['_xrPropert'+'ies']['fov'],this['_xrPropert'+'ies']['horizontal'+'Fov']=_0x198e58['_xrPropert'+'ies']['horizontal'+'Fov'],this['_xrPropert'+'ies']['nearClip']=_0x198e58['_xrPropert'+'ies']['nearClip'],this['aspectRati'+'oMode']=_0x198e58['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x198e58['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x198e58['calculateT'+'ransform'],this['clearColor']=_0x198e58['clearColor'],this['clearColor'+'Buffer']=_0x198e58['clearColor'+'Buffer'],this['clearDepth']=_0x198e58['clearDepth'],this['clearDepth'+'Buffer']=_0x198e58['clearDepth'+'Buffer'],this['clearStenc'+'il']=_0x198e58['clearStenc'+'il'],this['clearStenc'+'ilBuffer']=_0x198e58['clearStenc'+'ilBuffer'],this['cullFaces']=_0x198e58['cullFaces'],this['flipFaces']=_0x198e58['flipFaces'],this['frustumCul'+'ling']=_0x198e58['frustumCul'+'ling'],this['layers']=_0x198e58['layers'],this['orthoHeigh'+'t']=_0x198e58['orthoHeigh'+'t'],this['projection']=_0x198e58['projection'],this['rect']=_0x198e58['rect'],this['renderTarg'+'et']=_0x198e58['renderTarg'+'et'],this['scissorRec'+'t']=_0x198e58['scissorRec'+'t'],this['aperture']=_0x198e58['aperture'],this['shutter']=_0x198e58['shutter'],this['sensitivit'+'y']=_0x198e58['sensitivit'+'y'],this['shaderPass'+'Info']=_0x198e58['shaderPass'+'Info'],this['jitter']=_0x198e58['jitter'],this['_projMatDi'+'rty']=!(0xe4e*-0x2+0x196*0x3+0x17da),this;}['_enableRen'+'derPassCol'+'orGrab'](_0xd6339a,_0x54b5ae){var _0x36f92b;_0x54b5ae?this['renderPass'+'ColorGrab']||(this['renderPass'+'ColorGrab']=new Gw(_0xd6339a)):((_0x36f92b=this['renderPass'+'ColorGrab'])==null||_0x36f92b['destroy'](),this['renderPass'+'ColorGrab']=null);}['_enableRen'+'derPassDep'+'thGrab'](_0x477011,_0x5a06aa,_0x2c8432){var _0x54897a;_0x2c8432?this['renderPass'+'DepthGrab']||(this['renderPass'+'DepthGrab']=new Hw(_0x477011,this)):((_0x54897a=this['renderPass'+'DepthGrab'])==null||_0x54897a['destroy'](),this['renderPass'+'DepthGrab']=null);}['_updateVie'+'wProjMat'](){(this['_projMatDi'+'rty']||this['_viewMatDi'+'rty']||this['_viewProjM'+'atDirty'])&&(this['_viewProjM'+'at']['mul2'](this['projection'+'Matrix'],this['viewMatrix']),this['_viewProjM'+'atDirty']=!(0x5*0x339+-0x152f*0x1+0x513));}['worldToScr'+'een'](_0x4ee475,_0x1e1641,_0x23cca5,_0x33070f=new I()){this['_updateVie'+'wProjMat'](),this['_viewProjM'+'at']['transformP'+'oint'](_0x4ee475,_0x33070f);const _0x13630f=this['_viewProjM'+'at']['data'],_0x379777=_0x4ee475['x']*_0x13630f[-0x122f+0x65d+-0xbd5*-0x1]+_0x4ee475['y']*_0x13630f[-0x3d*0x3a+-0x4a5+0x127e]+_0x4ee475['z']*_0x13630f[0x1605+0x6b5*0x1+0x1caf*-0x1]+(-0xf2f+-0x1f0d+0x2e3d*0x1)*_0x13630f[0x178e+-0x3*0xaa6+0x67*0x15];_0x33070f['x']=(_0x33070f['x']/_0x379777+(-0x4a8*0x2+0x21c6+0x1875*-0x1))*(-0x2648+0x20e0+0x568+0.5),_0x33070f['y']=(0xae7+0x1bfd+0x5*-0x7c7-_0x33070f['y']/_0x379777)*(-0x213d*-0x1+-0x18c*0xd+0xd21*-0x1+0.5);const {x:_0x12b459,y:_0x3259de,z:_0x5abb8c,w:_0x33a9e1}=this['_rect'];return _0x33070f['x']=_0x33070f['x']*_0x5abb8c*_0x1e1641+_0x12b459*_0x1e1641,_0x33070f['y']=_0x33070f['y']*_0x33a9e1*_0x23cca5+(0x926*-0x2+-0x3c0+0x160d-_0x3259de-_0x33a9e1)*_0x23cca5,_0x33070f;}['screenToWo'+'rld'](_0x3073d8,_0x42a815,_0x15a902,_0x48378c,_0x1996e8,_0x2fb132=new I()){const {x:_0x1e6423,y:_0xcf2e28,z:_0x173ad0,w:_0xd6fbd7}=this['_rect'],_0x4e1791=this['farClip']-this['nearClip'];if(ya['set']((_0x3073d8-_0x1e6423*_0x48378c)/(_0x173ad0*_0x48378c),0x25a*-0x1+0x1*-0xb23+0xd7e-(_0x42a815-(0x30c+0x240f+-0x3e9*0xa-_0xcf2e28-_0xd6fbd7)*_0x1996e8)/(_0xd6fbd7*_0x1996e8),_0x15a902/_0x4e1791),ya['mulScalar'](-0x17dc+0x16d3+0x10b),ya['sub'](I['ONE']),this['_projectio'+'n']===Ks){te['_getPerspe'+'ctiveHalfS'+'ize'](Gn,this['fov'],this['aspectRati'+'o'],this['nearClip'],this['horizontal'+'Fov']),Gn['x']*=ya['x'],Gn['y']*=ya['y'];const _0x2b61df=this['_node']['getWorldTr'+'ansform']();Gn['z']=-this['nearClip'],_0x2b61df['transformP'+'oint'](Gn,Wp);const _0x19d106=this['_node']['getPositio'+'n']();_0x2fb132['sub2'](Wp,_0x19d106),_0x2fb132['normalize'](),_0x2fb132['mulScalar'](_0x15a902),_0x2fb132['add'](_0x19d106);}else this['_updateVie'+'wProjMat'](),$p['copy'](this['_viewProjM'+'at'])['invert'](),$p['transformP'+'oint'](ya,_0x2fb132);return _0x2fb132;}['_evaluateP'+'rojectionM'+'atrix'](){if(this['_projMatDi'+'rty']){if(this['_projectio'+'n']===Ks)this['_projMat']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip'],this['horizontal'+'Fov']),this['_projMatSk'+'ybox']['copy'](this['_projMat']);else{const _0xeb506d=this['_orthoHeig'+'ht'],_0x22f670=_0xeb506d*this['aspectRati'+'o'];this['_projMat']['setOrtho'](-_0x22f670,_0x22f670,-_0xeb506d,_0xeb506d,this['nearClip'],this['farClip']),this['_projMatSk'+'ybox']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip']);}this['_projMatDi'+'rty']=!(0x2f7+-0x1a2f*-0x1+-0x1d25);}}['getProject'+'ionMatrixS'+'kybox'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMatSk'+'ybox'];}['getExposur'+'e'](){const _0x356696=Math['log2'](this['_aperture']*this['_aperture']/this['_shutter']*(0xc62*-0x3+0x8*0x2af+0x809*0x2)/this['_sensitivi'+'ty']);return(-0x1a67+-0x259d+0x1*0x4005)/(Math['pow'](0x1*0x1aec+-0x1*-0x4ac+-0x1f96,_0x356696)*(-0x1157+0x1ee2+0x6c5*-0x2+0.19999999999999996));}['getScreenS'+'ize'](_0x1d10af){if(this['_projectio'+'n']===Ks){const _0x2dab0e=this['_node']['getPositio'+'n']()['distance'](_0x1d10af['center']);if(_0x2dab0e<_0x1d10af['radius'])return-0x15b9+-0x11d0+-0xe*-0x2d3;const _0x39455b=Math['asin'](_0x1d10af['radius']/_0x2dab0e),_0x3b66c=Math['tan'](_0x39455b),_0x26eddf=Math['tan'](this['fov']/(0x28b*0x7+0x736+0xad*-0x25)*Y['DEG_TO_RAD']);return Math['min'](_0x3b66c/_0x26eddf,0xd87+-0x2363+0x1*0x15dd);}return Y['clamp'](_0x1d10af['radius']/this['_orthoHeig'+'ht'],0x1*-0x1899+-0x8*0xc7+0x1ed1,0x1709+0x2629+-0x5*0xc3d);}['getFrustum'+'Corners'](_0x579b9f=this['nearClip'],_0x28d963=this['farClip']){const _0x2cc5f0=this['fov']*Math['PI']/(-0x1248*-0x1+-0x235f+-0x38f*-0x5);let _0x5cbe2a,_0x48fc5f;this['projection']===Ks?this['horizontal'+'Fov']?(_0x5cbe2a=_0x579b9f*Math['tan'](_0x2cc5f0/(-0x1394+0x6b*-0x1f+0x3*0xad9)),_0x48fc5f=_0x5cbe2a/this['aspectRati'+'o']):(_0x48fc5f=_0x579b9f*Math['tan'](_0x2cc5f0/(0x10e7+0x1a11*0x1+-0x2af6)),_0x5cbe2a=_0x48fc5f*this['aspectRati'+'o']):(_0x48fc5f=this['_orthoHeig'+'ht'],_0x5cbe2a=_0x48fc5f*this['aspectRati'+'o']);const _0x2a8c92=Ww;return _0x2a8c92[-0x155c+0x1*-0x1975+0x2ed1]['x']=_0x5cbe2a,_0x2a8c92[-0xf25+-0xb77+0x1a9c]['y']=-_0x48fc5f,_0x2a8c92[-0xd4b+-0x2330+0x307b]['z']=-_0x579b9f,_0x2a8c92[0xdd3*0x2+0x1*0x3c5+-0x2*0xfb5]['x']=_0x5cbe2a,_0x2a8c92[-0xc71+0x1*0x476+-0x3fe*-0x2]['y']=_0x48fc5f,_0x2a8c92[0x3f+-0x1*-0x1747+-0x29d*0x9]['z']=-_0x579b9f,_0x2a8c92[-0x1a72+-0xaca+0x253e]['x']=-_0x5cbe2a,_0x2a8c92[-0xd*-0x199+-0x8c*-0x1e+-0x252b]['y']=_0x48fc5f,_0x2a8c92[-0xe*-0x70+0x23af+-0x7b*0x57]['z']=-_0x579b9f,_0x2a8c92[0x1df*0x4+-0xa73+0x2fa]['x']=-_0x5cbe2a,_0x2a8c92[0x1d+0x13*-0x9b+0xb67*0x1]['y']=-_0x48fc5f,_0x2a8c92[-0x1dc0+0x1009+0xfb*0xe]['z']=-_0x579b9f,this['_projectio'+'n']===Ks&&(this['horizontal'+'Fov']?(_0x5cbe2a=_0x28d963*Math['tan'](_0x2cc5f0/(0x1bce+-0x8*0xae+-0x12*0x13e)),_0x48fc5f=_0x5cbe2a/this['aspectRati'+'o']):(_0x48fc5f=_0x28d963*Math['tan'](_0x2cc5f0/(-0x28*0x98+-0x21*-0x106+-0x502*0x2)),_0x5cbe2a=_0x48fc5f*this['aspectRati'+'o'])),_0x2a8c92[-0x25*0x2+-0x1*-0x2a+0x3*0xc]['x']=_0x5cbe2a,_0x2a8c92[0xe2e+-0x5*-0x18d+-0x15eb]['y']=-_0x48fc5f,_0x2a8c92[0x1169*0x2+0x64c+-0x291a]['z']=-_0x28d963,_0x2a8c92[0xf95+0x1a31+0x1*-0x29c1]['x']=_0x5cbe2a,_0x2a8c92[-0x3*0x445+0x186d+0x1*-0xb99]['y']=_0x48fc5f,_0x2a8c92[0x205d+0xad0+-0x565*0x8]['z']=-_0x28d963,_0x2a8c92[0x283*-0xf+0x224b*-0x1+-0xc2*-0x5f]['x']=-_0x5cbe2a,_0x2a8c92[0xa1d+0x1*0x263+-0x2*0x63d]['y']=_0x48fc5f,_0x2a8c92[-0x1896*0x1+0x2*-0xd6+-0x74*-0x3a]['z']=-_0x28d963,_0x2a8c92[0x2292*-0x1+0x1*-0x1159+-0x33f2*-0x1]['x']=-_0x5cbe2a,_0x2a8c92[0x103a+-0x8de+-0x755]['y']=-_0x48fc5f,_0x2a8c92[0x31*0xc9+-0xd6*-0x4+-0x29ca]['z']=-_0x28d963,_0x2a8c92;}['setXrPrope'+'rties'](_0x2c4fd4){Object['assign'](this['_xrPropert'+'ies'],_0x2c4fd4),this['_projMatDi'+'rty']=!(0x12b7*-0x2+0x12fb+0x1273*0x1);}}const Xp=new te(),qp=new te(),jp=new te(),ir=class ir{static['create'](_0x21d2bd,_0x5af5a0,_0x24e533){const _0x48dd83=new dl();switch(_0x48dd83['node']=new He(_0x21d2bd),_0x48dd83['aspectRati'+'o']=0x1bca+0x17e1+-0x33aa,_0x48dd83['aspectRati'+'oMode']=Mf,_0x48dd83['_scissorRe'+'ctClear']=!(0x1d4e+0x1d47+-0x3a95),_0x5af5a0){case Ye:_0x48dd83['node']['setRotatio'+'n'](ir['pointLight'+'Rotations'][_0x24e533]),_0x48dd83['fov']=-0xcc3+0x211c+-0x13ff*0x1,_0x48dd83['projection']=Ks;break;case Ke:_0x48dd83['projection']=Ks;break;case ve:_0x48dd83['projection']=hn;break;}return _0x48dd83;}static['evalSpotCo'+'okieMatrix'](_0x3fa6c5){let _0xd82eca=ir['_spotCooki'+'eCamera'];_0xd82eca||(_0xd82eca=ir['create']('SpotCookie'+'Camera',Ke),ir['_spotCooki'+'eCamera']=_0xd82eca),_0xd82eca['fov']=_0x3fa6c5['_outerCone'+'Angle']*(0xbf*0x7+0x73f+-0xc76);const _0x5e722=_0xd82eca['_node'];_0x5e722['setPositio'+'n'](_0x3fa6c5['_node']['getPositio'+'n']()),_0x5e722['setRotatio'+'n'](_0x3fa6c5['_node']['getRotatio'+'n']()),_0x5e722['rotateLoca'+'l'](-(0x1d39+-0x1*-0x9be+-0x269d),-0x26*0x7c+-0x20d5+0x333d,0x1*0x548+-0x20*-0xbb+-0x1ca8),Xp['setTRS'](_0x5e722['getPositio'+'n'](),_0x5e722['getRotatio'+'n'](),I['ONE'])['invert'](),qp['mul2'](_0xd82eca['projection'+'Matrix'],Xp);const _0x2ed783=_0x3fa6c5['cookieMatr'+'ix'],_0x5a96b9=_0x3fa6c5['atlasViewp'+'ort'];return jp['setViewpor'+'t'](_0x5a96b9['x'],_0x5a96b9['y'],_0x5a96b9['z'],_0x5a96b9['w']),_0x2ed783['mul2'](jp,qp),_0x2ed783;}};h(ir,'pointLight'+'Rotations',[new le()['setFromEul'+'erAngles'](-0x1807*-0x1+-0x3*-0x513+0x13a*-0x20,-0x201+0x359*-0x1+0x92*0xa,0x535*-0x3+0x1ecb*0x1+-0xe78),new le()['setFromEul'+'erAngles'](0xec2+-0x996+0x14b*-0x4,-(-0x12f3+0x1dd4+-0x23*0x4d),-0x3*0x731+0x18bc+-0x275),new le()['setFromEul'+'erAngles'](0x73a+0x1*0xfbf+0x169f*-0x1,0xc7a+0x27*-0xb5+-0xf19*-0x1,0x1*-0xdeb+0x2c5*-0x4+0x18ff),new le()['setFromEul'+'erAngles'](-(0x5*-0x391+0x11be+0x1*0x71),0x1878+0x7b8+-0x67*0x50,0x1539*0x1+0x13c9*-0x1+-0x170),new le()['setFromEul'+'erAngles'](0x16d4+-0x3be+-0x1316,-0x2130+0xc6b+0x1579,-0x15b5*-0x1+0x251*-0xc+0x6cb),new le()['setFromEul'+'erAngles'](0xf1*0x7+0xe32+-0x14c9,-0x52*-0x3d+-0x22*0x9a+-0x6*-0x27,0x4+0x19ac+0x4*-0x63f)]),h(ir,'_spotCooki'+'eCamera',null);let Pn=ir;const us=new I(),yr=new Float32Array(-0x1b8a*-0x1+0x654+0x43b*-0x8),$w=new I(-(-0x1af*-0x8+-0x4*0x112+-0x930+0.5),0x18cb*-0x1+0x1935+-0x6a,0x184f+0x1fb8+-0x3807),Xw=new I(0xd*0x2d+-0x14bc+0x1273,0x107+0x13a+-0x241,0xa8*0xc+0x7*0xd5+0xdb3*-0x1+0.5),rt={'POSITION_RANGE':0x0,'DIRECTION_FLAGS':0x1,'COLOR_ANGLES_BIAS':0x2,'PROJ_MAT_0':0x3,'ATLAS_VIEWPORT':0x3,'PROJ_MAT_1':0x4,'PROJ_MAT_2':0x5,'PROJ_MAT_3':0x6,'AREA_DATA_WIDTH':0x7,'AREA_DATA_HEIGHT':0x8,'COUNT':0x9},qw={'LIGHTSHAPE_PUNCTUAL':Vs+'u','LIGHTSHAPE_RECT':ry+'u','LIGHTSHAPE_DISK':ay+'u','LIGHTSHAPE_SPHERE':ny+'u','LIGHT_COLOR_DIVIDER':fh+'.0'},Yp=(_0x4d6df2,_0x456bc4)=>Object['keys'](_0x4d6df2)['map'](_0x13ca19=>'#define\x20{'+_0x456bc4+_0x13ca19+'}\x20'+_0x4d6df2[_0x13ca19])['join']('\x0a'),Kp='\x0a\x0a\x20\x20\x20\x20'+Yp(rt,'CLUSTER_TE'+'XTURE_')+'\x0a\x20\x20\x20\x20'+Yp(qw,'')+'\x0a';class jw{constructor(_0x68a26f){h(this,'areaLights'+'Enabled',!(0x5d1*0x5+0xdc8+-0x2adc)),(this['device']=_0x68a26f,Ce['get'](_0x68a26f,ze)['set']('lightBuffe'+'rDefinesPS',Kp),Ce['get'](_0x68a26f,st)['set']('lightBuffe'+'rDefinesPS',Kp),this['cookiesEna'+'bled']=!(-0x1a16+-0xa62+0x1*0x2479),this['shadowsEna'+'bled']=!(0x2174*-0x1+-0x20f3+0x4268),this['areaLights'+'Enabled']=!(0x260+-0x18+-0x247),this['maxLights']=-0x1373+0x1edf+-0x1*0xa6d);const _0x3758d6=rt['COUNT'];this['lightsFloa'+'t']=new Float32Array((0x1*-0x24e5+0xcb2*0x2+0xb85)*_0x3758d6*this['maxLights']),this['lightsUint']=new Uint32Array(this['lightsFloa'+'t']['buffer']),this['lightsText'+'ure']=this['createText'+'ure'](this['device'],_0x3758d6,this['maxLights'],Bt,'LightsText'+'ure'),this['_lightsTex'+'tureId']=this['device']['scope']['resolve']('lightsText'+'ure'),this['invMaxColo'+'rValue']=-0x1*0xfe9+0x1495+0x1a*-0x2e,this['invMaxAtte'+'nuation']=0x24bb+0x46*-0x67+-0x33*0x2b,this['boundsMin']=new I(),this['boundsDelt'+'a']=new I();}['destroy'](){var _0x530db0;(_0x530db0=this['lightsText'+'ure'])==null||_0x530db0['destroy'](),this['lightsText'+'ure']=null;}['createText'+'ure'](_0x3dc185,_0x42271f,_0x49c7c6,_0x43f75a,_0x1dfb3b){return new _e(_0x3dc185,{'name':_0x1dfb3b,'width':_0x42271f,'height':_0x49c7c6,'mipmaps':!(0x99+-0x419*-0x3+-0xce3*0x1),'format':_0x43f75a,'addressU':ue,'addressV':ue,'type':di,'magFilter':Te,'minFilter':Te,'anisotropy':0x1});}['setBounds'](_0xc3803c,_0x5c4e4e){this['boundsMin']['copy'](_0xc3803c),this['boundsDelt'+'a']['copy'](_0x5c4e4e);}['uploadText'+'ures'](){this['lightsText'+'ure']['lock']()['set'](this['lightsFloa'+'t']),this['lightsText'+'ure']['unlock']();}['updateUnif'+'orms'](){this['_lightsTex'+'tureId']['setValue'](this['lightsText'+'ure']);}['getSpotDir'+'ection'](_0x48329d,_0x5b86c6){_0x5b86c6['_node']['getWorldTr'+'ansform']()['getY'](_0x48329d)['mulScalar'](-(-0xc5*0x18+-0x1f36+0x31af*0x1)),_0x48329d['normalize']();}['getLightAr'+'eaSizes'](_0x1cd2fe){const _0x2b661e=_0x1cd2fe['_node']['getWorldTr'+'ansform']();return _0x2b661e['transformV'+'ector']($w,us),yr[0x2*0xad3+0xf3*-0x1+-0x1*0x14b3]=us['x'],yr[-0x1c41+0x7*-0x1bb+-0x41*-0x9f]=us['y'],yr[0x483+-0xd13*-0x1+-0x1194]=us['z'],_0x2b661e['transformV'+'ector'](Xw,us),yr[0x991+-0x2559+-0x58f*-0x5]=us['x'],yr[0x1001*-0x2+0x1*-0x1819+0x381f*0x1]=us['y'],yr[-0x1*-0x1dc3+0x1fe7*-0x1+0x229]=us['z'],yr;}['addLightDa'+'ta'](_0x5dc1f2,_0x27eb97){const _0x2abca3=_0x5dc1f2['_type']===Ke,_0x4872a5=_0x5dc1f2['atlasViewp'+'ortAllocat'+'ed'],_0x5eb12e=this['cookiesEna'+'bled']&&!!_0x5dc1f2['_cookie']&&_0x4872a5,_0x3e8b68=this['areaLights'+'Enabled']&&_0x5dc1f2['shape']!==Vs,_0x11a589=this['shadowsEna'+'bled']&&_0x5dc1f2['castShadow'+'s']&&_0x4872a5,_0x270f85=_0x5dc1f2['_node']['getPositio'+'n']();let _0x400d77=null,_0x300464=null;_0x2abca3?_0x11a589?_0x400d77=_0x5dc1f2['getRenderD'+'ata'](null,0x1fa2+-0xb3b+0x1*-0x1467)['shadowMatr'+'ix']:_0x5eb12e&&(_0x400d77=Pn['evalSpotCo'+'okieMatrix'](_0x5dc1f2)):(_0x11a589||_0x5eb12e)&&(_0x300464=_0x5dc1f2['atlasViewp'+'ort']);const _0x1b30bc=this['lightsFloa'+'t'],_0x1e6ec3=this['lightsUint'],_0x40d16f=_0x27eb97*this['lightsText'+'ure']['width']*(0x17da+-0x987+-0xe4f);_0x1b30bc[_0x40d16f+(0x20e5+-0x15*-0x1c7+-0x4634)*rt['POSITION_R'+'ANGE']+(0x6ff+0x11c6+-0x18c5)]=_0x270f85['x'],_0x1b30bc[_0x40d16f+(0x1822*-0x1+0x16cb*0x1+0x15b)*rt['POSITION_R'+'ANGE']+(-0x17*0x76+0x25d8+-0x16f*0x13)]=_0x270f85['y'],_0x1b30bc[_0x40d16f+(-0xd*-0x21+0x1c55*0x1+-0x1dfe)*rt['POSITION_R'+'ANGE']+(0x1b4*0xe+0x39*0x94+0x12ee*-0x3)]=_0x270f85['z'],_0x1b30bc[_0x40d16f+(-0x532+0x222c+-0x1cf6)*rt['POSITION_R'+'ANGE']+(0x7*0x543+-0x2663+0x191)]=_0x5dc1f2['attenuatio'+'nEnd'];const _0x1ecf62=_0x5dc1f2['clusteredD'+'ata'];if(_0x1e6ec3[_0x40d16f+(-0x106c+-0xb9d*0x3+-0x1*-0x3347)*rt['COLOR_ANGL'+'ES_BIAS']+(-0x1dfa+-0x258f+0x1*0x4389)]=_0x1ecf62[-0x1*-0x13+0x24df+-0x2*0x1279],_0x1e6ec3[_0x40d16f+(0x61*0x63+-0x18b7+-0xcc8)*rt['COLOR_ANGL'+'ES_BIAS']+(0xb53+-0x1124*-0x1+-0x1c76)]=_0x1ecf62[0x7e8*-0x2+-0x26f2+-0x36c3*-0x1],_0x1e6ec3[_0x40d16f+(-0x1*0x1eac+-0x66b+0x251b)*rt['COLOR_ANGL'+'ES_BIAS']+(0x1fa9+-0xf0a+-0x109d)]=_0x1ecf62[-0x2*-0xb8c+-0x1d2a*-0x1+-0x3440],_0x5dc1f2['castShadow'+'s']){const _0x3e420d=_0x5dc1f2['getRenderD'+'ata'](null,-0x1945+-0x77+0x19bc),_0x3477c1=_0x5dc1f2['_getUnifor'+'mBiasValue'+'s'](_0x3e420d),_0x176910=mn['float2Half'](_0x3477c1['bias']),_0x36360f=mn['float2Half'](_0x3477c1['normalBias']);_0x1e6ec3[_0x40d16f+(-0x38d*-0x7+-0x1912+-0x1*-0x3b)*rt['COLOR_ANGL'+'ES_BIAS']+(-0x2136+0x21*0xd2+0x627)]=_0x176910|_0x36360f<<-0x10ea+0x45*0x35+0x2b1;}if(_0x2abca3&&(this['getSpotDir'+'ection'](us,_0x5dc1f2),_0x1b30bc[_0x40d16f+(0xa18*-0x2+-0x2349+0x377d)*rt['DIRECTION_'+'FLAGS']+(0xd4*-0x2+-0x1b22*-0x1+-0x2*0xcbd)]=us['x'],_0x1b30bc[_0x40d16f+(0x1d*-0x39+0xdf9*0x2+-0x1579)*rt['DIRECTION_'+'FLAGS']+(-0x7*0x18d+-0x10d9+-0xad*-0x29)]=us['y'],_0x1b30bc[_0x40d16f+(-0x20a3+0x1d*0x1c+-0x1*-0x1d7b)*rt['DIRECTION_'+'FLAGS']+(0x1*-0x2c5+0x2*0xcf9+0x7b9*-0x3)]=us['z']),_0x1e6ec3[_0x40d16f+(-0x8*0x6+0xa*-0x2a3+0x1a92)*rt['DIRECTION_'+'FLAGS']+(0xd*-0x1d3+-0xcf3*-0x3+0x4f*-0x31)]=_0x5dc1f2['getCluster'+'edFlags'](_0x11a589,_0x5eb12e),_0x400d77){const _0xc5405c=_0x400d77['data'];for(let _0x2a954e=0x95b*0x1+-0x1*0x98+-0x8c3;_0x2a954e<-0x10f3+-0x1a0+-0xd*-0x16f;_0x2a954e++)_0x1b30bc[_0x40d16f+(-0x262a+-0xed3+-0x3501*-0x1)*rt['PROJ_MAT_0']+_0x2a954e]=_0xc5405c[_0x2a954e];}if(_0x300464&&(_0x1b30bc[_0x40d16f+(-0x3e8*0xa+0xb6+0x265e)*rt['ATLAS_VIEW'+'PORT']+(0xc56+-0xc46*-0x1+-0x189c)]=_0x300464['x'],_0x1b30bc[_0x40d16f+(-0x2590+-0x355*-0x5+0x15*0xff)*rt['ATLAS_VIEW'+'PORT']+(-0x20a8+-0x78*-0x3a+-0x3*-0x1d3)]=_0x300464['y'],_0x1b30bc[_0x40d16f+(0x18a7+0x1*-0x1d29+-0x486*-0x1)*rt['ATLAS_VIEW'+'PORT']+(-0x1048+0x3*-0xca+-0x638*-0x3)]=_0x300464['z']/(-0x2*-0xd1+-0xe6e+-0x1*-0xccf)),_0x3e8b68){const _0x1f6092=this['getLightAr'+'eaSizes'](_0x5dc1f2);_0x1b30bc[_0x40d16f+(0x1c54+-0x1*0x16ea+-0x2b3*0x2)*rt['AREA_DATA_'+'WIDTH']+(0x2319+-0x4*-0x7ec+0x29*-0x1a1)]=_0x1f6092[-0x213b+0x17c*0x13+-0x63*-0xd],_0x1b30bc[_0x40d16f+(0x1215+0x43f+-0x1650)*rt['AREA_DATA_'+'WIDTH']+(0x257d+0x2*-0x12b9+-0x2*0x5)]=_0x1f6092[0xf*-0x19a+-0x1*-0x1277+0x590],_0x1b30bc[_0x40d16f+(-0x1*-0x1421+-0x6b4+-0xd69)*rt['AREA_DATA_'+'WIDTH']+(0x5*-0x8e+0x23dc+-0x2114)]=_0x1f6092[-0x7d*-0x37+-0x1c8f+0x3*0x92],_0x1b30bc[_0x40d16f+(0x7*0xf2+-0x15*-0x119+-0x1da7)*rt['AREA_DATA_'+'HEIGHT']+(-0x8e4+-0xfd7+-0xd*-0x1e7)]=_0x1f6092[0x2248+-0x12*-0xff+-0x3433],_0x1b30bc[_0x40d16f+(0x42c+-0x10cf+0x1*0xca7)*rt['AREA_DATA_'+'HEIGHT']+(-0x5*0x5f9+0x2bb*-0xd+-0x1*-0x415d)]=_0x1f6092[-0x17*0x70+0x199+-0xa7*-0xd],_0x1b30bc[_0x40d16f+(-0x853+-0x12bc+0x1b13)*rt['AREA_DATA_'+'HEIGHT']+(0x1d85+-0xaa5*-0x2+-0x10ef*0x3)]=_0x1f6092[0x11d6+-0x1*0x26a1+0x25*0x90];}}}const Ll=new I(),Rl=new I(),Ol=new I(),yd=new Ie(),Zp=0xb0+0xe9b*-0x1+0x3*0x9f9;class Qp{constructor(){this['light']=null,this['min']=new I(),this['max']=new I();}}class If{constructor(_0x745796){h(this,'clusterTex'+'ture'),(this['device']=_0x745796,this['name']='Untitled',this['reportCoun'+'t']=-0x38*-0x7a+-0x2cf*0x7+0x101*-0x7,this['boundsMin']=new I(),this['boundsMax']=new I(),this['boundsDelt'+'a']=new I(),this['_cells']=new I(-0x1e40+0x3b2+0x1a8f,-0x948+0xd*-0x81+0x2*0x7eb,-0xb16+-0xb44+-0x3b*-0x61),this['_cellsLimi'+'t']=new I(),this['cells']=this['_cells'],this['maxCellLig'+'htCount']=-0x536+0x1*0x87a+-0x340,this['_usedLight'+'s']=[],this['_usedLight'+'s']['push'](new Qp()),this['lightsBuff'+'er']=new jw(_0x745796),this['registerUn'+'iforms'](_0x745796));}set['maxCellLig'+'htCount'](_0x125db3){_0x125db3!==this['_maxCellLi'+'ghtCount']&&(this['_maxCellLi'+'ghtCount']=_0x125db3,this['_cellsDirt'+'y']=!(0x15*-0x101+0x1c89+-0x774));}get['maxCellLig'+'htCount'](){return this['_maxCellLi'+'ghtCount'];}set['cells'](_0x281178){Ll['copy'](_0x281178)['floor'](),this['_cells']['equals'](Ll)||(this['_cells']['copy'](Ll),this['_cellsLimi'+'t']['copy'](Ll)['sub'](I['ONE']),this['_cellsDirt'+'y']=!(0x446*-0x5+0x437*-0x2+0x1dcc));}get['cells'](){return this['_cells'];}['destroy'](){this['lightsBuff'+'er']['destroy'](),this['releaseClu'+'sterTextur'+'e']();}['releaseClu'+'sterTextur'+'e'](){this['clusterTex'+'ture']&&(this['clusterTex'+'ture']['destroy'](),this['clusterTex'+'ture']=null);}['registerUn'+'iforms'](_0x29d896){this['_clusterSk'+'ipId']=_0x29d896['scope']['resolve']('clusterSki'+'p'),this['_clusterMa'+'xCellsId']=_0x29d896['scope']['resolve']('clusterMax'+'Cells'),this['_clusterWo'+'rldTexture'+'Id']=_0x29d896['scope']['resolve']('clusterWor'+'ldTexture'),this['_clusterTe'+'xtureSizeI'+'d']=_0x29d896['scope']['resolve']('clusterTex'+'tureSize'),this['_clusterTe'+'xtureSizeD'+'ata']=new Float32Array(-0xc73+-0x1cbe+0x2934),this['_clusterBo'+'undsMinId']=_0x29d896['scope']['resolve']('clusterBou'+'ndsMin'),this['_clusterBo'+'undsMinDat'+'a']=new Float32Array(0x9*-0x441+-0x1278+0x38c4),this['_clusterBo'+'undsDeltaI'+'d']=_0x29d896['scope']['resolve']('clusterBou'+'ndsDelta'),this['_clusterBo'+'undsDeltaD'+'ata']=new Float32Array(-0xf8f*-0x1+-0x26c6+-0x3df*-0x6),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']=_0x29d896['scope']['resolve']('clusterCel'+'lsCountByB'+'oundsSize'),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']=new Float32Array(0x18*0x49+0x6f6+0x141*-0xb),this['_clusterCe'+'llsDotId']=_0x29d896['scope']['resolve']('clusterCel'+'lsDot'),this['_clusterCe'+'llsDotData']=new Float32Array(0x319+-0x215+-0x101),this['_clusterCe'+'llsMaxId']=_0x29d896['scope']['resolve']('clusterCel'+'lsMax'),this['_clusterCe'+'llsMaxData']=new Float32Array(-0x959+-0x11e0+-0xc*-0x245);}['updatePara'+'ms'](_0x5ddc8e){_0x5ddc8e&&(this['cells']=_0x5ddc8e['cells'],this['maxCellLig'+'htCount']=_0x5ddc8e['maxLightsP'+'erCell'],this['lightsBuff'+'er']['cookiesEna'+'bled']=_0x5ddc8e['cookiesEna'+'bled'],this['lightsBuff'+'er']['shadowsEna'+'bled']=_0x5ddc8e['shadowsEna'+'bled'],this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x5ddc8e['areaLights'+'Enabled']);}['updateCell'+'s'](){if(this['_cellsDirt'+'y']){this['_cellsDirt'+'y']=!(0x12b0+0x782+-0x1a31);const _0x5902be=this['_cells']['x'],_0x36ae25=this['_cells']['y'],_0x1253e3=this['_cells']['z'],_0x448d6d=_0x5902be*_0x36ae25*_0x1253e3,_0x42ec81=this['maxCellLig'+'htCount']*_0x448d6d;let _0x27402f=Math['ceil'](Math['sqrt'](_0x42ec81));_0x27402f=Y['roundUp'](_0x27402f,this['maxCellLig'+'htCount']);const _0x4938a8=Math['ceil'](_0x42ec81/_0x27402f);M['assert'](_0x27402f<=Zp&&_0x4938a8<=Zp,'Clustered\x20'+'lights\x20par'+'ameters\x20ca'+'use\x20the\x20te'+'xture\x20size'+'\x20to\x20be\x20ove'+'r\x20the\x20limi'+'t,\x20please\x20'+'adjust\x20the'+'m.'),this['_clusterCe'+'llsMaxData'][0x259f+-0x1b*-0x161+-0x4ada]=_0x5902be,this['_clusterCe'+'llsMaxData'][0x1*-0x959+0x1*-0x134f+-0x13f*-0x17]=_0x36ae25,this['_clusterCe'+'llsMaxData'][-0x66d+-0x1dad+0x241c]=_0x1253e3,this['_clusterCe'+'llsDotData'][-0x1*-0x10b1+0x13*-0x15c+0x923]=this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][-0x1392+-0x1*0x219d+0x3530]=_0x5902be*_0x1253e3*this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][0x23d3+-0xccc+-0x1705]=_0x5902be*this['maxCellLig'+'htCount'],this['clusters']=new Uint8ClampedArray(_0x42ec81),this['counts']=new Int32Array(_0x448d6d),this['_clusterTe'+'xtureSizeD'+'ata'][-0x57*-0x61+-0x1d85+-0x12*0x31]=_0x27402f,this['_clusterTe'+'xtureSizeD'+'ata'][0x494+0x16be+-0x1b51]=(-0x1a1b+-0x21f4+0x1*0x3c10)/_0x27402f,this['_clusterTe'+'xtureSizeD'+'ata'][-0x268+0x25ac*-0x1+0x2816]=(-0x1f9*0xa+-0x1353+-0x1*-0x270e)/_0x4938a8,this['releaseClu'+'sterTextur'+'e'](),this['clusterTex'+'ture']=this['lightsBuff'+'er']['createText'+'ure'](this['device'],_0x27402f,_0x4938a8,Hu,'ClusterTex'+'ture');}}['uploadText'+'ures'](){this['clusterTex'+'ture']['lock']()['set'](this['clusters']),this['clusterTex'+'ture']['unlock'](),this['lightsBuff'+'er']['uploadText'+'ures']();}['updateUnif'+'orms'](){this['_clusterSk'+'ipId']['setValue'](this['_usedLight'+'s']['length']>-0x44c+-0x11a0+-0x3*-0x74f?0x1f1d+0xe61+0x16bf*-0x2:0x20*-0x1a+0x1f5d+0xe*-0x202),this['lightsBuff'+'er']['updateUnif'+'orms'](),this['_clusterWo'+'rldTexture'+'Id']['setValue'](this['clusterTex'+'ture']),this['_clusterMa'+'xCellsId']['setValue'](this['maxCellLig'+'htCount']);const _0x31be74=this['boundsDelt'+'a'];this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x1a62+-0x10be+-0x10*-0x2b2]=this['_cells']['x']/_0x31be74['x'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x8*0x1a6+-0xfae+0x9*0x47]=this['_cells']['y']/_0x31be74['y'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0xa7*0x1f+0xff4+0x447]=this['_cells']['z']/_0x31be74['z'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']['setValue'](this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']),this['_clusterBo'+'undsMinDat'+'a'][-0x1*0x1154+-0x5*0x49+0x1*0x12c1]=this['boundsMin']['x'],this['_clusterBo'+'undsMinDat'+'a'][-0x67*-0x3b+-0x265f+0x4e1*0x3]=this['boundsMin']['y'],this['_clusterBo'+'undsMinDat'+'a'][-0x258b+-0x1*-0x6d3+0x1eba]=this['boundsMin']['z'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x125d*0x1+0x151*0x2+-0x1*-0xfbb]=_0x31be74['x'],this['_clusterBo'+'undsDeltaD'+'ata'][0x2*-0x13a+0x1*-0x192a+0x3*0x935]=_0x31be74['y'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x47*-0xd+-0x1*0x2267+0x1*0x1ece]=_0x31be74['z'],this['_clusterTe'+'xtureSizeI'+'d']['setValue'](this['_clusterTe'+'xtureSizeD'+'ata']),this['_clusterBo'+'undsMinId']['setValue'](this['_clusterBo'+'undsMinDat'+'a']),this['_clusterBo'+'undsDeltaI'+'d']['setValue'](this['_clusterBo'+'undsDeltaD'+'ata']),this['_clusterCe'+'llsDotId']['setValue'](this['_clusterCe'+'llsDotData']),this['_clusterCe'+'llsMaxId']['setValue'](this['_clusterCe'+'llsMaxData']);}['evalLightC'+'ellMinMax'](_0x51db2e,_0x5d4127,_0x4f48be){_0x5d4127['copy'](_0x51db2e['min']),_0x5d4127['sub'](this['boundsMin']),_0x5d4127['div'](this['boundsDelt'+'a']),_0x5d4127['mul2'](_0x5d4127,this['cells']),_0x5d4127['floor'](),_0x4f48be['copy'](_0x51db2e['max']),_0x4f48be['sub'](this['boundsMin']),_0x4f48be['div'](this['boundsDelt'+'a']),_0x4f48be['mul2'](_0x4f48be,this['cells']),_0x4f48be['ceil'](),_0x5d4127['max'](I['ZERO']),_0x4f48be['min'](this['_cellsLimi'+'t']);}['collectLig'+'hts'](_0x169ca1){const _0x148ef7=this['lightsBuff'+'er']['maxLights'],_0x225851=this['_usedLight'+'s'];let _0x150ae8=-0x32*-0xa7+0x247f+-0x228e*0x2;_0x169ca1['forEach'](_0x596091=>{const _0x4b8b94=!!(_0x596091['mask']&(ds|si)),_0x320776=_0x596091['type']===Ke&&_0x596091['_outerCone'+'Angle']===0x4*0x6d1+-0x1*0x207a+0x536;if(_0x596091['enabled']&&_0x596091['type']!==ve&&_0x596091['visibleThi'+'sFrame']&&_0x596091['intensity']>-0x2*-0x35+-0x1*0x201e+0x1fb4&&_0x4b8b94&&!_0x320776){if(_0x150ae8<_0x148ef7){let _0x5f339d;_0x150ae8<_0x225851['length']?_0x5f339d=_0x225851[_0x150ae8]:(_0x5f339d=new Qp(),_0x225851['push'](_0x5f339d)),_0x5f339d['light']=_0x596091,_0x596091['getBoundin'+'gBox'](yd),_0x5f339d['min']['copy'](yd['getMin']()),_0x5f339d['max']['copy'](yd['getMax']()),_0x150ae8++;}else M['warnOnce']('Clustered\x20'+'lighting:\x20'+'more\x20than\x20'+(_0x148ef7-(0x5d*0x31+-0x883*-0x2+-0x2*0x1169))+('\x20lights\x20in'+'\x20the\x20frame'+',\x20ignoring'+'\x20some.'));}}),_0x225851['length']=_0x150ae8;}['evaluateBo'+'unds'](){const _0x568685=this['_usedLight'+'s'],_0x5183e8=this['boundsMin'],_0x718172=this['boundsMax'];if(_0x568685['length']>-0x11cd*0x2+0x1*-0x22cd+-0x6*-0xbbc){_0x5183e8['copy'](_0x568685[0x1996*-0x1+-0x976+0x230d]['min']),_0x718172['copy'](_0x568685[-0x1f40+0x3*0xa8b+-0x60]['max']);for(let _0x4679eb=-0x18bf*0x1+-0x21b1+-0x1d39*-0x2;_0x4679eb<_0x568685['length'];_0x4679eb++)_0x5183e8['min'](_0x568685[_0x4679eb]['min']),_0x718172['max'](_0x568685[_0x4679eb]['max']);}else _0x5183e8['set'](0x18b9+0x1*0xfb5+-0x286e,0x17c2+0x3e*-0x57+-0x2b0,0x3f8*-0x6+0x155*0x2+0x1526),_0x718172['set'](-0x1791+0x207c+-0x8ea,-0xa99+-0x4a2+0xf3c,-0x17*0xff+-0xb*-0xe7+0xcfd);this['boundsDelt'+'a']['sub2'](_0x718172,_0x5183e8),this['lightsBuff'+'er']['setBounds'](_0x5183e8,this['boundsDelt'+'a']);}['updateClus'+'ters'](_0x4d3901){this['counts']['fill'](0x1abc+0x174c+-0x2*0x1904),this['clusters']['fill'](-0x6a2*-0x1+-0x1*-0xc3a+-0x12dc),this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x4d3901?_0x4d3901['areaLights'+'Enabled']:!(-0x1*0x839+0x150+-0xa*-0xb1);const _0x1a0609=this['_cells']['x'],_0x5ce652=this['_cells']['z'],_0x4ab068=this['counts'],_0x1e4ec7=this['_maxCellLi'+'ghtCount'],_0x3eb37a=this['clusters'],_0x2b7a1b=this['maxCellLig'+'htCount'];let _0x1d6bb5=!(-0x1ca8+0x107b+0xc2e);const _0x4a7da9=this['_usedLight'+'s'];for(let _0x185ba8=0x316+0x272*-0xd+0x1cb5;_0x185ba8<_0x4a7da9['length'];_0x185ba8++){const _0x218dda=_0x4a7da9[_0x185ba8],_0x89106a=_0x218dda['light'];this['lightsBuff'+'er']['addLightDa'+'ta'](_0x89106a,_0x185ba8),this['evalLightC'+'ellMinMax'](_0x218dda,Rl,Ol);const _0x43e28a=Rl['x'],_0x102a79=Ol['x'],_0x233a37=Rl['y'],_0x3d6d29=Ol['y'],_0x2b27db=Rl['z'],_0x25b6fa=Ol['z'];for(let _0x37df10=_0x43e28a;_0x37df10<=_0x102a79;_0x37df10++)for(let _0x6710d=_0x2b27db;_0x6710d<=_0x25b6fa;_0x6710d++)for(let _0x417d16=_0x233a37;_0x417d16<=_0x3d6d29;_0x417d16++){const _0x5b0490=_0x37df10+_0x1a0609*(_0x6710d+_0x417d16*_0x5ce652),_0xe61f6=_0x4ab068[_0x5b0490];_0xe61f6<_0x1e4ec7?(_0x3eb37a[_0x2b7a1b*_0x5b0490+_0xe61f6]=_0x185ba8,_0x4ab068[_0x5b0490]=_0xe61f6+(0x8fb+-0x1271+0x977)):_0x1d6bb5=!(-0x1f30+0x1d2*-0x4+0x2678);}}_0x1d6bb5&&this['reportCoun'+'t']<-0x1a77+-0x52*0x2c+0x2894&&(console['warn']('Too\x20many\x20l'+'ights\x20in\x20l'+'ight\x20clust'+'er\x20'+this['name']+(',\x20please\x20a'+'djust\x20para'+'meters.')+(this['reportCoun'+'t']===-0xcef+0x19f*0x3+-0x6*-0x159?'\x20Giving\x20up'+'\x20on\x20report'+'ing\x20it.':'')),this['reportCoun'+'t']++);}['update'](_0x369371,_0x28be94=null){this['updatePara'+'ms'](_0x28be94),this['updateCell'+'s'](),this['collectLig'+'hts'](_0x369371),this['evaluateBo'+'unds'](),this['updateClus'+'ters'](_0x28be94),this['uploadText'+'ures']();}['activate'](){this['updateUnif'+'orms']();}}const Jp=0x2*0x12a1+-0x5*0x55e+-0xa6a+0.39996322972865306,fl={'circlePoint'(_0x982c0a){const _0x5c462d=Math['sqrt'](Math['random']()),_0x64bdc5=Math['random']()*(-0xd96+-0xa5d+0x17f5)*Math['PI'];_0x982c0a['x']=_0x5c462d*Math['cos'](_0x64bdc5),_0x982c0a['y']=_0x5c462d*Math['sin'](_0x64bdc5);},'circlePointDeterministic'(_0x3df87a,_0x2ecdf3,_0x1b7e9a){const _0x579ef7=_0x2ecdf3*Jp,_0x5ae52d=Math['sqrt'](_0x2ecdf3)/Math['sqrt'](_0x1b7e9a);_0x3df87a['x']=_0x5ae52d*Math['cos'](_0x579ef7),_0x3df87a['y']=_0x5ae52d*Math['sin'](_0x579ef7);},'spherePointDeterministic'(_0x18db4d,_0x14990e,_0x29564e,_0x2dd2fb=0x19df+0xc8*-0x7+0x1*-0x1467,_0x555c31=-0x6d*-0x57+-0x9c2+-0x3*0x918){_0x2dd2fb=0x1*0x6f5+-0x39c+-0x358-(0x11f*-0xe+-0x6b6+0x166a)*_0x2dd2fb,_0x555c31=0x2409+-0xa02+-0x1a06-(0x11*-0x6b+0x1e71+-0x1754)*_0x555c31;const _0x4ffddc=Y['lerp'](_0x2dd2fb,_0x555c31,_0x14990e/_0x29564e),_0x5c0309=Math['sqrt'](0x22b5+0x950*0x1+-0x2c04*0x1-_0x4ffddc*_0x4ffddc),_0xdfa1ad=Jp*_0x14990e;_0x18db4d['x']=Math['cos'](_0xdfa1ad)*_0x5c0309,_0x18db4d['y']=_0x4ffddc,_0x18db4d['z']=Math['sin'](_0xdfa1ad)*_0x5c0309;},'radicalInverse'(_0x18468f){let _0x534c8e=(_0x18468f<<-0x86*0x1f+0x1*-0x1714+0x275e|_0x18468f>>>-0x3*-0x4cf+-0x8b*-0x46+-0x345f)>>>-0x1147+-0x21d2+0x3319;return _0x534c8e=((_0x534c8e&-0x330555af*0x1+0x1bb*-0x2e1313+0xd815ace5*0x1)<<-0x3ef*0x5+-0x21a8+0x3554|(_0x534c8e&-0x8f8f4c65*-0x1+0x1*-0x152c234df+0x16ddd9324)>>>0x979*0x2+-0x2b*0x43+-0x7b0)>>>-0xe1e*-0x1+0x174*-0xe+0x63a,_0x534c8e=((_0x534c8e&-0x3e4ff5d2+0x24480cfd+0x4d3b1c08)<<0x2ab*-0xb+-0x5*0x269+0x1a8*0x19|(_0x534c8e&-0x9bad8e36+0xacdb1150+0x17ca26*0x7e3)>>>-0xf73+0x2398+-0x1423*0x1)>>>-0x250f+-0x17*-0x3d+0x7e5*0x4,_0x534c8e=((_0x534c8e&0x1*-0x5159fb+0x6508e72+0x90fda98)<<0x29d*-0xa+0x1e2f+-0x409*0x1|(_0x534c8e&0x1e177a5c2*-0x1+0x1*-0x5679f1cf+0x21*0x1882fc61)>>>0x2245*-0x1+-0xc6f+0x2eb8)>>>-0x2022+-0xbab+-0x2bcd*-0x1,_0x534c8e=((_0x534c8e&0xe308b2*0x1+0x507f9b+0x1*-0x34874e)<<0x65+0x1de*-0x1+0x37*0x7|(_0x534c8e&0x16045cce2+-0x3b2*-0x2366a7+-0x74c7c0*0x1f4)>>>0xdcf+0x247f*0x1+-0x3246)>>>0x25b*0x2+-0x326+-0x190,_0x534c8e*(-0x21f6+0x23a2+-0x1ac+2.3283064365386963e-10);}},Yw={'linear':'decodeLine'+'ar','srgb':'decodeGamm'+'a','rgbm':'decodeRGBM','rgbe':'decodeRGBE','rgbp':'decodeRGBP','xy':'unpackNorm'+'alXY','xyz':'unpackNorm'+'alXYZ'},Kw={'linear':'encodeLine'+'ar','srgb':'encodeGamm'+'a','rgbm':'encodeRGBM','rgbe':'encodeRGBE','rgbp':'encodeRGBP'};class lr{static['decodeFunc'](_0x487cc3){return Yw[_0x487cc3]??'decodeGamm'+'a';}static['encodeFunc'](_0x2c9dcd){return Kw[_0x2c9dcd]??'encodeGamm'+'a';}}const e_=_0x20107c=>{switch(_0x20107c){case Tf:return'Cubemap';case Q0:return'Octahedral';default:return'Equirect';}},Fl=(_0x3b43ec,_0x358064,_0x7b64cc)=>{if(_0x3b43ec<=0x2149+-0x1*-0x1b5a+-0x3ca3)_0x358064[_0x7b64cc+(0xb4b+0x1*0x11ab+-0x1cf6)]=-0xd94+-0x311*0x1+0x10a5,_0x358064[_0x7b64cc+(-0x1d29+-0x65*-0x16+0x147c)]=0x290*-0x3+0x12f8*0x2+-0x1e40,_0x358064[_0x7b64cc+(0x11*0xf+-0x256b+0x246e*0x1)]=-0x2319*0x1+-0x5*0x22c+0x2df5,_0x358064[_0x7b64cc+(0xc84+-0x1*-0x66e+-0x1*0x12ef)]=-0x117*-0x11+0x14*0x9d+-0x1ecb;else{if(_0x3b43ec>=0x3*-0x77b+-0x10f4+0x6*0x691)_0x358064[_0x7b64cc+(-0x2083+0x7e2*0x3+0x1*0x8dd)]=0x1f3+-0x1f47+0x1*0x1e53,_0x358064[_0x7b64cc+(-0x1*-0xdb8+-0x2*-0x1301+-0x1*0x33b9)]=0x21b3+0x2*-0x3d6+-0x1a07,_0x358064[_0x7b64cc+(-0x26a4+0x680+0x2026)]=-0x3a8+0xb*0x1b5+-0x1*0xf1f,_0x358064[_0x7b64cc+(0x190b*0x1+-0x2451+0xb49)]=0x32*-0x3d+0xb81+0x3*0x23;else{let _0x2718ca=(-0x168+-0x1*-0x336+-0x1cd*0x1)*_0x3b43ec%(-0x81*0x4d+-0x97*0x27+0x3dcf*0x1),_0x2f8cbb=(0x1c9*-0xe+0x2193+-0x3cb*0x2)*_0x3b43ec%(-0xa*-0xf5+-0x1*-0x221+-0xbb2),_0x4d8068=(0x1*-0x3e7d+0xc941+0x1*0x733d)*_0x3b43ec%(-0xa92+0x53+0xa40);const _0x2d6aec=(0xf34a65*0x1+-0xd09f26+0xda57c0)*_0x3b43ec%(0xa*-0x2d0+0x819+0x1408);_0x2718ca-=_0x2f8cbb/(-0x7d9+0x1*0xb4d+-0x275),_0x2f8cbb-=_0x4d8068/(0x1*-0xce5+0xd5d+0x87),_0x4d8068-=_0x2d6aec/(-0xf50+0xb62*0x3+-0x1*0x11d7),_0x358064[_0x7b64cc+(-0x733*-0x3+-0xa7*-0x10+-0x2009)]=Math['min'](-0x1511*0x1+-0x1d78+0x3388,Math['floor'](_0x2718ca*(0x171d+-0x98d+-0xc90))),_0x358064[_0x7b64cc+(-0x5ab*-0x2+-0x13bb+0x866)]=Math['min'](-0x1ff3+0x292*-0x2+0xf*0x28a,Math['floor'](_0x2f8cbb*(0x1f*0xd7+-0x2539+0x410*0x3))),_0x358064[_0x7b64cc+(0x1*-0x443+0x1*0x248c+0x1*-0x2047)]=Math['min'](0xc5*0x1+0x1ec8+-0x1e8e,Math['floor'](_0x4d8068*(0x562+0x1*0x1297+-0x16f9))),_0x358064[_0x7b64cc+(0x3*0x869+0xa1*-0x35+0x81d)]=Math['min'](-0x6b3*0x5+-0x1723*-0x1+0x39*0x33,Math['floor'](_0x2d6aec*(-0x218*-0x1+0x103e+0x1*-0x1156)));}}},Zw=_0x203d62=>{const _0x28ee95=_0x203d62['length'],_0x3068d4=Math['min'](_0x28ee95,0x138b+-0x109d+-0xee),_0x5efbd9=Math['ceil'](_0x28ee95/_0x3068d4),_0x11fa19=new Uint8Array(_0x3068d4*_0x5efbd9*(-0x1*0x23a+0xfd*-0x10+0x2*0x907));let _0x3da6f3=0xbe3+-0xa63*0x2+-0x1c7*-0x5;for(let _0x20eed2=0xa33*-0x1+0x1a06+0xfd3*-0x1;_0x20eed2<_0x28ee95;_0x20eed2+=0x90c+-0x1*0x1e3a+0x1532)Fl(_0x203d62[_0x20eed2+(-0x64*-0x12+0xd*0x26f+-0x26ab)]*(-0xec4*-0x1+-0xb*0x332+0x1462+0.5)+(0x49e*0x2+0x25aa+-0x2ee6+0.5),_0x11fa19,_0x3da6f3+(0x3d*0x2a+-0x5c*-0x46+-0x232a)),Fl(_0x203d62[_0x20eed2+(0x1*-0x1d2c+0x131e+0xa0f)]*(0x1b14+0x8*0x434+-0x3cb4+0.5)+(0x1*-0x2581+-0x245f*-0x1+0x2*0x91+0.5),_0x11fa19,_0x3da6f3+(-0x2165+-0xfb4*-0x1+0x11b5*0x1)),Fl(_0x203d62[_0x20eed2+(0x4*0x797+-0x265*-0x7+-0x2f1d)]*(-0x1fb9+0x1e4e+0x3*0x79+0.5)+(-0xde3+-0x4d4*-0x7+-0x6a3*0x3+0.5),_0x11fa19,_0x3da6f3+(-0x50d*0x3+-0x170d+-0x263c*-0x1)),Fl(_0x203d62[_0x20eed2+(-0x11f4+0x1bd8*-0x1+0x2dcf)]/(0x1*0x29d+-0x1d86+-0xd1*-0x21),_0x11fa19,_0x3da6f3+(-0x7d*-0x18+0x206d+-0x2c19)),_0x3da6f3+=0x1dc5+-0x4*0x6b9+-0x67*0x7;return{'width':_0x3068d4,'height':_0x5efbd9,'data':_0x11fa19};},Qw=(_0x1bcfce,_0x78cc1d,_0x2970db,_0x5b934c)=>{const _0x2d91a4=_0x2970db*(-0x34*-0xab+0x7ad+-0x5*0x87b)*Math['PI'],_0x4a33a7=Math['pow'](0x4c3*-0x1+-0x26db+0x2b9f*0x1-_0x78cc1d,(0x523*-0x1+0x1873*0x1+0x134f*-0x1)/(_0x5b934c+(0x25df+0x13c5+-0x39a3))),_0x4de168=Math['sqrt'](-0x154e+-0x115b+0x26aa-_0x4a33a7*_0x4a33a7);_0x1bcfce['set'](Math['cos'](_0x2d91a4)*_0x4de168,Math['sin'](_0x2d91a4)*_0x4de168,_0x4a33a7)['normalize']();},Jw=(_0x53350f,_0x4edb35,_0x1b502a)=>{const _0x23695d=_0x1b502a*(-0x1ae9+0x189f+0x24c)*Math['PI'],_0x5adbe5=Math['sqrt'](-0x1471+0x1*-0x1f76+0x33e8-_0x4edb35),_0x226ea1=Math['sqrt'](_0x4edb35);_0x53350f['set'](Math['cos'](_0x23695d)*_0x226ea1,Math['sin'](_0x23695d)*_0x226ea1,_0x5adbe5)['normalize']();},eE=(_0x55fe85,_0x9deb04,_0x3ae57b,_0x8ed14d)=>{const _0x590eeb=_0x3ae57b*(-0x1b2b+0x2621*0x1+-0x1*0xaf4)*Math['PI'],_0x3039a8=Math['sqrt']((-0x779*-0x5+-0x1f*-0x9e+0x1*-0x387e-_0x9deb04)/(0xf81*0x2+-0x16ed+-0x814+(_0x8ed14d*_0x8ed14d-(0x113*0x17+-0xaee*0x1+0x1*-0xdc6))*_0x9deb04)),_0xeb57ab=Math['sqrt'](-0x1*0x12be+-0x260d+0xb5c*0x5-_0x3039a8*_0x3039a8);_0x55fe85['set'](Math['cos'](_0x590eeb)*_0xeb57ab,Math['sin'](_0x590eeb)*_0xeb57ab,_0x3039a8)['normalize']();},tE=(_0x54700b,_0x2b7e3f)=>{const _0x5e33e4=_0x54700b*_0x2b7e3f,_0x465746=_0x2b7e3f/(0x12ee*-0x2+0x364+-0x19*-0x161-_0x54700b*_0x54700b+_0x5e33e4*_0x5e33e4);return _0x465746*_0x465746*((0x24b*0x2+-0x1*0xcbe+-0x829*-0x1)/Math['PI']);},sE=(_0x3e4de2,_0xac3771)=>{const _0x5d81bc=new I(),_0x2d6e32=[];for(let _0x144236=-0x1c63*0x1+0x3e5*-0x1+0x1*0x2048;_0x144236<_0x3e4de2;++_0x144236)Qw(_0x5d81bc,_0x144236/_0x3e4de2,fl['radicalInv'+'erse'](_0x144236),_0xac3771),_0x2d6e32['push'](_0x5d81bc['x'],_0x5d81bc['y'],_0x5d81bc['z'],0x1b0e+-0x1877*-0x1+-0x3385);return _0x2d6e32;},iE=(_0x335e85,_0x225f92)=>{const _0x57e332=_0x225f92/_0x335e85,_0xc7a0a2=new I(),_0x27ef32=[];for(let _0x52ec2a=-0x14cb+0x1*0x8b+0x1440;_0x52ec2a<_0x335e85;++_0x52ec2a){Jw(_0xc7a0a2,_0x52ec2a/_0x335e85,fl['radicalInv'+'erse'](_0x52ec2a));const _0x1d4c12=_0xc7a0a2['z']/Math['PI'],_0x547d5a=(-0xb3e*0x2+-0x823+0x1e9f+0.5)*Math['log2'](_0x57e332/_0x1d4c12);_0x27ef32['push'](_0xc7a0a2['x'],_0xc7a0a2['y'],_0xc7a0a2['z'],_0x547d5a);}return _0x27ef32;},rE={0x10:{0x2:0x1a,0x8:0x14,0x20:0x11,0x80:0x10,0x200:0x10},0x20:{0x2:0x35,0x8:0x28,0x20:0x22,0x80:0x20,0x200:0x20},0x80:{0x2:0xd6,0x8:0xa3,0x20:0x8b,0x80:0x82,0x200:0x80},0x400:{0x2:0x6ba,0x8:0x51e,0x20:0x45a,0x80:0x411,0x200:0x401}},aE=(_0x547e46,_0xf21512)=>{const _0xce76b9=rE[_0x547e46];return _0xce76b9&&_0xce76b9[_0xf21512]||_0x547e46;},nE=(_0x165147,_0x4925ae,_0x68c052)=>{const _0xfae4b9=_0x68c052/_0x165147,_0x54f429=-0x982+-0x1*0x1ab9+0x6*0x60a-Math['log2'](_0x4925ae)/(-0x2137+0x1e75+0x2cd),_0x44d424=_0x54f429*_0x54f429,_0x45c38e=new I(),_0x2ca68e=new I(),_0x1ae055=new I(-0x5*0x2a2+-0x1285+0x1*0x1faf,0x581*0x5+0x7f*-0x3d+-0x2*-0x15f,0x2*0xf88+0x186+0x13*-0x1b7),_0x35b4f2=[],_0x36a15e=aE(_0x165147,_0x4925ae);for(let _0x5d6d3b=0xf69+-0x1621+0x2b*0x28;_0x5d6d3b<_0x36a15e;++_0x5d6d3b){eE(_0x45c38e,_0x5d6d3b/_0x36a15e,fl['radicalInv'+'erse'](_0x5d6d3b),_0x44d424);const _0x59f8ea=_0x45c38e['z'];if(_0x2ca68e['set'](_0x45c38e['x'],_0x45c38e['y'],_0x45c38e['z'])['mulScalar']((-0x3f*-0xa+-0x1*0x1d76+0x1b02)*_0x59f8ea)['sub'](_0x1ae055),_0x2ca68e['z']>0x5e7*-0x1+-0x1b6d+-0x9*-0x3b4){const _0x15f8d8=tE(Math['min'](-0x1*0xa55+-0x7*-0x275+0x6dd*-0x1,_0x59f8ea),_0x44d424)/(0x3*0x423+-0x1609*-0x1+-0x226e)+(-0x119*-0x1c+-0x3c*-0x9b+-0x1d*0x250+0.001),_0xc578e5=(-0x4bd+-0xa7*0x5+0x800+0.5)*Math['log2'](_0xfae4b9/_0x15f8d8);_0x35b4f2['push'](_0x2ca68e['x'],_0x2ca68e['y'],_0x2ca68e['z'],_0xc578e5);}}for(;_0x35b4f2['length']<_0x165147*(-0xdf9+0x80f*0x1+0x2f7*0x2);)_0x35b4f2['push'](0x21e7*-0x1+-0x1dc2+0x3fa9,0xaee+0x1*-0x1407+0x919,-0x10*0x22d+0x1*-0x24b+0x3b*0xa1,-0x1348+-0x5*0x315+0x53*0x6b);return _0x35b4f2;},oE=(_0x474fa0,_0x2c11a1,_0x361208)=>{const _0x55f747=Zw(_0x361208);return new _e(_0x474fa0,{'name':_0x2c11a1,'width':_0x55f747['width'],'height':_0x55f747['height'],'mipmaps':!(-0x93e+0x1*-0x11c3+0x1b02),'minFilter':Te,'magFilter':Te,'levels':[_0x55f747['data']]});};class Py{constructor(_0x251104=!(0x7*0x2dd+0x9*0x8+0x1*-0x1453)){h(this,'map',new Map()),this['destroyCon'+'tent']=_0x251104;}['destroy'](){this['destroyCon'+'tent']&&this['map']['forEach']((_0x3ec2ca,_0x2c9fe1)=>{_0x3ec2ca['destroy']();});}['get'](_0x51198a,_0x48c3e2){if(!this['map']['has'](_0x51198a)){const _0x4c3ce0=_0x48c3e2();return this['map']['set'](_0x51198a,_0x4c3ce0),_0x4c3ce0;}return this['map']['get'](_0x51198a);}}const lE=new Py(!(-0x1b53*0x1+-0x7c2+0x2316)),hE=new Ht(),Dm=(_0x29b4f0,_0x1735df,_0x49e624)=>hE['get'](_0x29b4f0,()=>new Py())['get'](_0x1735df,()=>oE(_0x29b4f0,_0x1735df,lE['get'](_0x1735df,_0x49e624))),cE=(_0x3c7502,_0x4e5067,_0x271e7a)=>{const _0x4a8c47='lambert-sa'+'mples-'+_0x4e5067+'-'+_0x271e7a;return Dm(_0x3c7502,_0x4a8c47,()=>iE(_0x4e5067,_0x271e7a));},dE=(_0x3d8796,_0x181a7f,_0x464096)=>{const _0x1da4e1='phong-samp'+'les-'+_0x181a7f+'-'+_0x464096;return Dm(_0x3d8796,_0x1da4e1,()=>sE(_0x181a7f,_0x464096));},fE=(_0x414d09,_0x53e61d,_0xbe195f,_0xbccfc8)=>{const _0x54f628='ggx-sample'+'s-'+_0x53e61d+'-'+_0xbe195f+'-'+_0xbccfc8;return Dm(_0x414d09,_0x54f628,()=>nE(_0x53e61d,_0xbe195f,_0xbccfc8));};function fi(_0x7545e1,_0x52d894,_0x5373bb={}){var _0x484fda,_0x5b9fda;M['assert'](_0x7545e1 instanceof _e&&_0x52d894 instanceof _e,'source\x20and'+'\x20target\x20mu'+'st\x20be\x20text'+'ures');const _0xae27d7=_0x5373bb['seamPixels']??-0x1d89*-0x1+0x311+-0x209a,_0x1f784a=(((_0x484fda=_0x5373bb['rect'])==null?void(0x3*-0x991+-0x13b*0x2+0x1f29):_0x484fda['z'])??_0x52d894['width'])-_0xae27d7*(0x175b+-0x1*0x1696+-0xc3*0x1),_0x5a9fe9=(((_0x5b9fda=_0x5373bb['rect'])==null?void(0x23ea+-0x405*0x1+-0x17*0x163):_0x5b9fda['w'])??_0x52d894['height'])-_0xae27d7*(-0x195d+0x43a+0x1*0x1525);if(_0x1f784a<-0x2687*0x1+0xfbe*0x1+-0xb65*-0x2||_0x5a9fe9<-0x18a1+0x1*0xa47+0xe5b)return!(0x217c+0xd*0x202+-0x3b95);const _0x21da62={'none':'reproject','lambert':'prefilterS'+'amplesUnwe'+'ighted','phong':'prefilterS'+'amplesUnwe'+'ighted','ggx':'prefilterS'+'amples'},_0x4e74e1=_0x5373bb['hasOwnProp'+'erty']('specularPo'+'wer')?_0x5373bb['specularPo'+'wer']:-0x2c2+0x1b6f*0x1+-0x18ac,_0x54d5bc=_0x5373bb['hasOwnProp'+'erty']('face')?_0x5373bb['face']:null,_0x1ea5e4=_0x5373bb['hasOwnProp'+'erty']('distributi'+'on')?_0x5373bb['distributi'+'on']:_0x4e74e1===-0x1830+-0x2648+0x3e79?'none':'phong',_0x1cb81d=_0x21da62[_0x1ea5e4]||'reproject',_0x37639e=_0x1cb81d['startsWith']('prefilterS'+'amples'),_0x5d9203=lr['decodeFunc'](_0x7545e1['encoding']),_0x2453cd=lr['encodeFunc'](_0x52d894['encoding']),_0x344c32='sample'+e_(_0x7545e1['projection']),_0x5f2fe0='getDirecti'+'on'+e_(_0x52d894['projection']),_0xceadfb=_0x5373bb['hasOwnProp'+'erty']('numSamples')?_0x5373bb['numSamples']:-0x53*-0x1a+-0x110b+0x1*0xc9d,_0x4f810e='ReprojectS'+'hader:'+_0x1cb81d+'_'+_0x5d9203+'_'+_0x2453cd+'_'+_0x344c32+'_'+_0x5f2fe0+'_'+_0xceadfb,_0x494d34=_0x7545e1['device'];let _0x3f6ff5=Cn(_0x494d34)['getCachedS'+'hader'](_0x4f810e);if(!_0x3f6ff5){const _0x37e01f=new Map();_0x37639e&&_0x37e01f['set']('USE_SAMPLE'+'S_TEX',''),_0x7545e1['cubemap']&&_0x37e01f['set']('CUBEMAP_SO'+'URCE',''),_0x37e01f['set']('{PROCESS_F'+'UNC}',_0x1cb81d),_0x37e01f['set']('{DECODE_FU'+'NC}',_0x5d9203),_0x37e01f['set']('{ENCODE_FU'+'NC}',_0x2453cd),_0x37e01f['set']('{SOURCE_FU'+'NC}',_0x344c32),_0x37e01f['set']('{TARGET_FU'+'NC}',_0x5f2fe0),_0x37e01f['set']('{NUM_SAMPL'+'ES}',_0xceadfb),_0x37e01f['set']('{NUM_SAMPL'+'ES_SQRT}',Math['round'](Math['sqrt'](_0xceadfb))['toFixed'](0xadb*-0x3+-0x53*0x31+-0x5*-0x9b1));const _0x5e4478=_0x494d34['isWebGPU'],_0x58778e=Ce['get'](_0x494d34,_0x5e4478?st:ze),_0x2b1428=new Map();_0x2b1428['set']('decodePS',_0x58778e['get']('decodePS')),_0x2b1428['set']('encodePS',_0x58778e['get']('encodePS')),_0x3f6ff5=Ut['createShad'+'er'](_0x494d34,{'uniqueName':_0x4f810e,'attributes':{'vertex_position':Pe},'vertexChunk':'reprojectV'+'S','fragmentChunk':'reprojectP'+'S','fragmentIncludes':_0x2b1428,'fragmentDefines':_0x37e01f});}Q['pushGpuMar'+'ker'](_0x494d34,'ReprojectT'+'exture'),_0x494d34['setBlendSt'+'ate'](Ct['NOBLEND']);const _0xbb2832=_0x494d34['scope']['resolve'](_0x7545e1['cubemap']?'sourceCube':'sourceTex');M['assert'](_0xbb2832),_0xbb2832['setValue'](_0x7545e1);const _0x279397=_0x494d34['scope']['resolve']('params'),_0x24ce05=_0x494d34['scope']['resolve']('uvMod');_0xae27d7>0x1ac0+0x3b*-0x29+-0x114d?_0x24ce05['setValue']([(_0x1f784a+_0xae27d7*(-0x1b75+0x1*0x80b+0x1*0x136c))/_0x1f784a,(_0x5a9fe9+_0xae27d7*(0xe52+-0x3*-0x101+-0x1153))/_0x5a9fe9,-_0xae27d7/_0x1f784a,-_0xae27d7/_0x5a9fe9]):_0x24ce05['setValue']([0xb29+-0x101b+-0x1*-0x4f3,0x4*-0x185+0x1d4b+0x2*-0xb9b,0x25de+-0x1*0x107f+-0x155f*0x1,-0x1612+-0xa6+-0x16b8*-0x1]);const _0x3da741=[-0x226e+-0x14*0x64+0x2a3e,_0x52d894['width']*_0x52d894['height']*(_0x52d894['cubemap']?-0x2589+-0x4*-0x925+0x1*0xfb:0x9*0x135+-0xb*0xf7+-0x3f),_0x7545e1['width']*_0x7545e1['height']*(_0x7545e1['cubemap']?0xa*0x1a5+0x59b*0x1+-0x1607:-0x1adc+-0x3*-0x916+-0x65)];if(_0x37639e){const _0x410953=_0x7545e1['width']*_0x7545e1['height']*(_0x7545e1['cubemap']?0x3*-0xa4d+0x1c87*0x1+0x266:0x8*0x1c4+0x2097+0x2*-0x175b),_0x391ba1=_0x1ea5e4==='ggx'?fE(_0x494d34,_0xceadfb,_0x4e74e1,_0x410953):_0x1ea5e4==='lambert'?cE(_0x494d34,_0xceadfb,_0x410953):dE(_0x494d34,_0xceadfb,_0x4e74e1);_0x494d34['scope']['resolve']('samplesTex')['setValue'](_0x391ba1),_0x494d34['scope']['resolve']('samplesTex'+'InverseSiz'+'e')['setValue']([(-0x186+0xdac+-0xc25)/_0x391ba1['width'],(0x1b0d+0x1136+-0xa*0x46d)/_0x391ba1['height']]);}for(let _0x4a146e=0x13*0x1b5+0x2104+-0x4173;_0x4a146e<(_0x52d894['cubemap']?0x22c7+0x18f3+-0x3bb4:0x1af8+0x3be*0x6+-0x316b);_0x4a146e++)if(_0x54d5bc===null||_0x4a146e===_0x54d5bc){const _0x209550=new vt({'colorBuffer':_0x52d894,'face':_0x4a146e,'depth':!(-0xa*0x131+0x24eb+0x2*-0xc80),'flipY':_0x494d34['isWebGPU']});_0x3da741[0x6b*0x52+0x18bb+-0x3b01]=_0x4a146e,_0x279397['setValue'](_0x3da741),fr(_0x494d34,_0x209550,_0x3f6ff5,_0x5373bb==null?void(-0x1266+0x1*0x4d9+-0x1*-0xd8d):_0x5373bb['rect']),_0x209550['destroy']();}return Q['popGpuMark'+'er'](_0x494d34),!(-0xcd4+-0x1ddb+-0xdf*-0x31);}const vd=(_0x288269,_0x5bfc04=0xbdb*0x1+-0x175a+0x9*0x147)=>-0x13d1+0x1c*0x14+0x11a2*0x1+Math['floor'](Math['log2'](Math['max'](_0x288269,_0x5bfc04))),uE=_0x8c19d8=>_0x8c19d8['textureHal'+'fFloatRend'+'erable'],mE=_0x4b10be=>_0x4b10be['textureFlo'+'atRenderab'+'le'],pE=_0x5b636d=>uE(_0x5b636d)?at:mE(_0x5b636d)?Bt:Oe,_E=_0x49bb6c=>Oe,gE=(_0x2de4f8,_0x1abcb0,_0x5e8931,_0x259580)=>new _e(_0x2de4f8,{'name':'lighting-'+_0x1abcb0,'cubemap':!(-0xf67*-0x1+0x83*-0x47+-0x26*-0x8d),'width':_0x1abcb0,'height':_0x1abcb0,'format':_0x5e8931,'type':Io,'addressU':ue,'addressV':ue,'mipmaps':!(0x83*0x17+-0x1944+-0x40*-0x36)});class My{static['generateSk'+'yboxCubema'+'p'](_0x37b1c4,_0x40a6e4){const _0x5c6778=_0x37b1c4['device'];Q['pushGpuMar'+'ker'](_0x5c6778,'genSkyboxC'+'ubemap');const _0x40d615=gE(_0x5c6778,_0x40a6e4||(_0x37b1c4['cubemap']?_0x37b1c4['width']:_0x37b1c4['width']/(-0x242a+-0x47*-0xd+-0x10d*-0x1f)),Oe);return fi(_0x37b1c4,_0x40d615,{'numSamples':0x400}),Q['popGpuMark'+'er'](_0x5c6778),_0x40d615;}static['generateLi'+'ghtingSour'+'ce'](_0x73d0ed,_0x2289cb){const _0x1a91a4=_0x73d0ed['device'];Q['pushGpuMar'+'ker'](_0x1a91a4,'genLightin'+'gSource');const _0x3ea1b8=pE(_0x1a91a4),_0x5b6448=(_0x2289cb==null?void(0x3c*0x49+0x22a2+-0x4a*0xb3):_0x2289cb['target'])||new _e(_0x1a91a4,{'name':'lighting-s'+'ource','cubemap':!(0x1*-0x2c2+0xd95+-0xad3),'width':(_0x2289cb==null?void(-0x21e9+0x94+0x2155):_0x2289cb['size'])||-0x36*-0x63+-0xa2a+-0x147*0x8,'height':(_0x2289cb==null?void(-0x825+0x9*0x90+0x1*0x315):_0x2289cb['size'])||0x1f9+-0x1d3*0x3+-0x80*-0x8,'format':_0x3ea1b8,'type':_0x3ea1b8===Oe?Io:di,'addressU':ue,'addressV':ue,'mipmaps':!(0x16de+-0x1e81+0x7a3)});return fi(_0x73d0ed,_0x5b6448,{'numSamples':_0x73d0ed['mipmaps']?0x1002*0x2+0x319*-0x2+-0x19d1:-0xcfd+0x12c*-0x4+-0x1f*-0xb3}),Q['popGpuMark'+'er'](_0x1a91a4),_0x5b6448;}static['generateAt'+'las'](_0x2cb1fb,_0x234b68){const _0x41586c=_0x2cb1fb['device'],_0x5ac9c4=_E();Q['pushGpuMar'+'ker'](_0x41586c,'genAtlas');const _0x4af779=(_0x234b68==null?void(-0x249b+0x189d+0xbfe):_0x234b68['target'])||new _e(_0x41586c,{'name':'envAtlas','width':(_0x234b68==null?void(-0x887*0x1+0x850*-0x4+0x159*0x1f):_0x234b68['size'])||-0x1*0x503+0x1838+0x5*-0x371,'height':(_0x234b68==null?void(-0xea5+0x13d9*-0x1+-0xa*-0x373):_0x234b68['size'])||0x1*0xaf3+-0x1f*0x7+-0x81a,'format':_0x5ac9c4,'type':Io,'projection':sp,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1*-0x1223+-0x5b*-0x16+-0x19f4)});Q['pushGpuMar'+'ker'](_0x41586c,'mipmaps');const _0x536f82=_0x4af779['width']/(0x382*0x1+0x1f4f+-0x20d1),_0x55be0c=new ae(0x1*-0x1357+0x1*-0x1703+0x2a5a,-0x9a3+0x11c1+-0x81e,(-0x21b6+0x7*-0x10d+-0x23*-0x13b)*_0x536f82,(0xca3+0x1*-0x1e55+-0x959*-0x2)*_0x536f82),_0xcfefc7=vd(-0x992+-0x3*-0xa22+-0x13d4)-vd(0xe7f+0x12c1+-0x58a*0x6);for(let _0x14170e=-0x133d+-0x1af*0xf+0x2c7e;_0x14170e<_0xcfefc7;++_0x14170e)fi(_0x2cb1fb,_0x4af779,{'numSamples':0x1,'rect':_0x55be0c,'seamPixels':_0x536f82}),_0x55be0c['x']+=_0x55be0c['w'],_0x55be0c['y']+=_0x55be0c['w'],_0x55be0c['z']=Math['max'](0x2*0x40f+0x2*0x223+-0xc63,Math['floor'](_0x55be0c['z']*(-0x2*0x2fb+-0x1*-0x2e3+0x1*0x313+0.5))),_0x55be0c['w']=Math['max'](0x7a2+0x365*0x2+-0x1*0xe6b,Math['floor'](_0x55be0c['w']*(0x29*0xe3+-0x90*-0x36+0xb*-0x611+0.5)));Q['popGpuMark'+'er'](_0x41586c),Q['pushGpuMar'+'ker'](_0x41586c,'reflection'+'s'),_0x55be0c['set'](-0x472*-0x1+0x282+-0x1bd*0x4,(0x9b*0x7+0x407+0x5*-0x174)*_0x536f82,(0x2*0xb96+-0x23ae*0x1+-0xb6*-0x13)*_0x536f82,(0x1*0xd45+-0x1d95*0x1+0x1*0x10d0)*_0x536f82);for(let _0x38c6c2=0xccf+0x1*-0x1237+0x569;_0x38c6c2<0x2190+-0x1548+-0x1*0xc41;++_0x38c6c2)fi(_0x2cb1fb,_0x4af779,{'numSamples':(_0x234b68==null?void(-0x9*-0x257+0x1a45+-0x1a*0x1d2):_0x234b68['numReflect'+'ionSamples'])||-0x95f+0x19*0x13+0xb84,'distribution':(_0x234b68==null?void(0x21f8+-0x11*-0x4+0xe*-0x272):_0x234b68['distributi'+'on'])||'ggx','specularPower':Math['max'](0x2263+0x3*-0xbf+0xd*-0x279,0x156a*-0x1+-0x2*0x3d9+0x251c>>_0x38c6c2*(0x1*0x123a+0x8*0xe0+-0x1938)),'rect':_0x55be0c,'seamPixels':_0x536f82}),_0x55be0c['y']+=_0x55be0c['w'],_0x55be0c['z']=Math['max'](0x23cd+0x1c2d+-0x3ff9,Math['floor'](_0x55be0c['z']*(-0x6*0x439+-0x3*-0x19b+-0x6d7*-0x3+0.5))),_0x55be0c['w']=Math['max'](-0xc5*0x2d+0x5*0x241+0x1*0x175d,Math['floor'](_0x55be0c['w']*(0x1*0x1e5b+0x36b+0xb*-0x312+0.5)));return Q['popGpuMark'+'er'](_0x41586c),Q['pushGpuMar'+'ker'](_0x41586c,'ambient'),_0x55be0c['set']((-0x1b8*0x15+-0x3cd+-0x9*-0x47d)*_0x536f82,(-0x1c9*-0x5+-0x1*0x809+0x9c)*_0x536f82,(0x263*0x1+0xbdc+0x1*-0xdff)*_0x536f82,(-0x1e8c+-0x16db+0x1*0x3587)*_0x536f82),fi(_0x2cb1fb,_0x4af779,{'numSamples':(_0x234b68==null?void(0x1aba+0x14*0x1c1+-0x1*0x3dce):_0x234b68['numAmbient'+'Samples'])||-0x11*0x20c+0x2415*0x1+0x1*0x6b7,'distribution':'lambert','rect':_0x55be0c,'seamPixels':_0x536f82}),Q['popGpuMark'+'er'](_0x41586c),Q['popGpuMark'+'er'](_0x41586c),_0x4af779;}static['generatePr'+'efilteredA'+'tlas'](_0x2f62b6,_0x113ae8){const _0x597aaf=_0x2f62b6[0x3a*0x84+0x37a+-0x2162]['device'],_0x6f93ff=_0x2f62b6[-0x1*0x17e3+-0x19f+-0x5*-0x51a]['format'],_0x1f8e34=_0x2f62b6[-0x9c*0x39+0x22b*-0x4+0x1*0x2b68]['type'];Q['pushGpuMar'+'ker'](_0x597aaf,'genPrefilt'+'eredAtlas');const _0x3d514a=(_0x113ae8==null?void(-0x1*0x4ab+0x1b8d+-0x16e2):_0x113ae8['target'])||new _e(_0x597aaf,{'name':'envPrefilt'+'eredAtlas','width':(_0x113ae8==null?void(-0xd7e+0x23*0xbf+-0xc9f):_0x113ae8['size'])||0x63*0xb+-0x7*-0x14f+-0xb6a,'height':(_0x113ae8==null?void(-0xbf*0x2f+0x33*0x3+0x2278):_0x113ae8['size'])||-0x1*-0x1060+0xe1e+-0x412*0x7,'format':_0x6f93ff,'type':_0x1f8e34,'projection':sp,'addressU':ue,'addressV':ue,'mipmaps':!(-0x11*-0x12+0x1*-0x293+0x162)});Q['pushGpuMar'+'ker'](_0x597aaf,'mipmaps');const _0x3ce33c=_0x3d514a['width']/(-0x38d*0x5+-0x511+0x18d2),_0x155ac7=new ae(-0x2*0xe7f+-0x2*0x241+0x2180,-0x184b+-0x1b41+0x338c,(-0x23fd+-0x523+0x2b20)*_0x3ce33c,(0x99d+0x13a9+-0x9a*0x2f)*_0x3ce33c),_0x327475=vd(0x25a4+-0x133a+-0x1*0x106a);for(let _0x3e50cf=0x11c1+0x7f*-0xd+0xb4e*-0x1;_0x3e50cf<_0x327475;++_0x3e50cf)fi(_0x2f62b6[-0x420+-0x2144+0x2564],_0x3d514a,{'numSamples':0x1,'rect':_0x155ac7,'seamPixels':_0x3ce33c}),_0x155ac7['x']+=_0x155ac7['w'],_0x155ac7['y']+=_0x155ac7['w'],_0x155ac7['z']=Math['max'](-0x1fd6+0x1d*-0xf7+0x3bd2,Math['floor'](_0x155ac7['z']*(-0x3*-0x13f+-0x5f*-0x5b+-0x1*0x2582+0.5))),_0x155ac7['w']=Math['max'](-0x8c7+-0x4*0x7db+-0x2*-0x141a,Math['floor'](_0x155ac7['w']*(0x1*0x589+-0x29c+0x6b*-0x7+0.5)));Q['popGpuMark'+'er'](_0x597aaf),Q['pushGpuMar'+'ker'](_0x597aaf,'reflection'+'s'),_0x155ac7['set'](0x2e3*-0xd+-0x103c*0x2+0x45ff,(0x494*-0x7+-0xc50*-0x2+-0xe*-0x9a)*_0x3ce33c,(-0x143a+0xe*0x173+0xf0)*_0x3ce33c,(0x1c60+0x2*-0xdcf+-0x42)*_0x3ce33c);for(let _0x283ca0=-0x3*-0x229+0x1fff+-0x2679;_0x283ca0<_0x2f62b6['length'];++_0x283ca0)fi(_0x2f62b6[_0x283ca0],_0x3d514a,{'numSamples':0x1,'rect':_0x155ac7,'seamPixels':_0x3ce33c}),_0x155ac7['y']+=_0x155ac7['w'],_0x155ac7['z']=Math['max'](-0x575*0x7+-0x1bfc+0x108c*0x4,Math['floor'](_0x155ac7['z']*(0x49c+-0x43a*-0x1+-0x8d6+0.5))),_0x155ac7['w']=Math['max'](0x105e+-0x244d+0x13f0,Math['floor'](_0x155ac7['w']*(0x427*0x2+0x1e6a+-0x26b8+0.5)));return Q['popGpuMark'+'er'](_0x597aaf),Q['pushGpuMar'+'ker'](_0x597aaf,'ambient'),_0x155ac7['set']((0xa6f*-0x3+-0x2019+-0x3fe6*-0x1)*_0x3ce33c,(-0x11e3*-0x1+-0x1dc1+0x6af*0x2)*_0x3ce33c,(-0x2aa*0x1+-0x2*-0xf60+-0x7*0x3fa)*_0x3ce33c,(-0x1a2+-0x2*-0x3fd+-0x8*0xc7)*_0x3ce33c),_0x113ae8!=null&&_0x113ae8['legacyAmbi'+'ent']?fi(_0x2f62b6[0x3c1*-0x1+-0x2435+0x27fb],_0x3d514a,{'numSamples':0x1,'rect':_0x155ac7,'seamPixels':_0x3ce33c}):fi(_0x2f62b6[0x17ed+0x29*-0x3f+0x7*-0x1fa],_0x3d514a,{'numSamples':(_0x113ae8==null?void(0x668+0x1349+-0x19b1):_0x113ae8['numSamples'])||-0x158*-0xe+-0x3e6+-0x5*0x162,'distribution':'lambert','rect':_0x155ac7,'seamPixels':_0x3ce33c}),Q['popGpuMark'+'er'](_0x597aaf),Q['popGpuMark'+'er'](_0x597aaf),_0x3d514a;}}const SE={'aoPS':'1.57','clearCoatPS':'1.57','clearCoatGlossPS':'1.60','clearCoatNormalPS':'1.57','diffusePS':'1.57','emissivePS':'1.57','glossPS':'1.60','metalnessPS':'1.57','normalMapPS':'1.57','opacityPS':'1.57','parallaxPS':'1.57','sheenPS':'1.57','sheenGlossPS':'1.60','specularPS':'1.57','specularityFactorPS':'1.57','thicknessPS':'1.57','transmissionPS':'1.57','normalVertexPS':'1.55','aoDiffuseOccPS':'1.62','aoSpecOccPS':'2.6','clusteredLightPS':'1.62','clusteredLightShadowPS':'1.62','combinePS':'1.62','falloffInvSquaredPS':'1.62','falloffLinearPS':'1.62','lightDiffuseLambertPS':'1.62','lightSheenPS':'1.62','lightSpecularAnisoGGXPS':'1.62','lightSpecularBlinnPS':'1.62','ltcPS':'1.62','reflDirPS':'1.62','reflDirAnisoPS':'1.62','reflectionCCPS':'1.62','reflectionCubePS':'2.6','reflectionEnvPS':'2.6','reflectionEnvHQPS':'2.6','reflectionSpherePS':'2.6','reflectionSheenPS':'1.62','shadowCommonPS':'1.62','shadowCoordPS':'1.62','shadowCoordPerspZBufferPS':'1.62','shadowEVSMPS':'1.62','spotPS':'1.62','TBNPS':'1.62','endPS':'1.65','metalnessModulatePS':'1.65','outputAlphaPS':'1.65','outputAlphaPremulPS':'1.65','fresnelSchlickPS':'1.65','iridescenceDiffractionPS':'1.65','lightmapAddPS':'1.65','refractionCubePS':'1.70','refractionDynamicPS':'1.70'},t_={'ambientPrefilteredCubePS':'1.51','ambientPrefilteredCubeLodPS':'1.51','dpAtlasQuadPS':'1.51','genParaboloidPS':'1.51','prefilterCubemapPS':'1.51','reflectionDpAtlasPS':'1.51','reflectionPrefilteredCubePS':'1.51','reflectionPrefilteredCubeLodPS':'1.51','refractionPS':'1.56','combineClearCoatPS':'1.56','combineDiffusePS':'1.56','combineDiffuseSpecularPS':'1.56','combineDiffuseSpecularNoReflPS':'1.56','combineDiffuseSpecularNoReflSeparateAmbientPS':'1.56','combineDiffuseSpecularOldPS':'1.56','lightmapSingleVertPS':'1.55','normalMapFastPS':'1.55','specularAaNonePS':'1.55','specularAaToksvigPS':'1.55','specularAaToksvigFastPS':'1.55','skyboxEnvPS':'2.1','skyboxHDRPS':'2.1','shadowVSM8PS':'2.3','fogExpPS':'2.5','fogExp2PS':'2.5','fogLinearPS':'2.5','fogNonePS':'2.5','gamma1_0PS':'2.5','gamma2_2PS':'2.5','storeEVSMPS':'2.6','shadowEVSMnPS':'2.6','shadowVSM_commonPS':'2.6','shadowStandardPS':'2.6','shadowStandardGL2PS':'2.6','startVS':'2.6','endVS':'2.6','baseVS':'2.6','baseNineSlicedVS':'2.6','viewNormalVS':'2.6','lightmapDirAddPS':'2.6','TBNObjectSpacePS':'2.6','TBNderivativePS':'2.6','startPS':'2.6','outputAlphaOpaque':'2.6','outputAlphaPremul':'2.6','cubeMapProjectBoxPS':'2.6','cubeMapProjectNonePS':'2.6','envMultiplyPS':'2.6','envConstPS':'2.6','aoSpecOccConstPS':'2.6','aoSpecOccConstSimplePS':'2.6','aoSpecOccSimplePS':'2.6','ambientConstantPS':'2.6','ambientEnvPS':'2.6','ambientSHPS':'2.6','shadowSampleCoordPS':'2.6','diffuseDetailMapPS':'2.7','normalDetailMapPS':'2.7','normalXYPS':'2.7','normalXYZPS':'2.7','aoDetailMapPS':'2.7','lightmapDirPS':'2.7','lightmapSinglePS':'2.7','tangentBinormalVS':'2.7'},yE=(_0x50930e,_0xa7cc4d)=>{const _0x4ed755=_0x50930e['split']('.')['map'](_0x3f3d3f=>parseInt(_0x3f3d3f,-0x1*-0xcac+0x24d+0x1*-0xeef)),_0x158338=_0xa7cc4d['split']('.')['map'](_0x3aaa8e=>parseInt(_0x3aaa8e,0x17fe+-0x306*-0x2+0x1e00*-0x1));return _0x4ed755[0x3f0*-0x3+0x75*0x53+0x3*-0x8b5]<_0x158338[-0x862+0x25f+0x201*0x3]||_0x4ed755[-0x1*-0x1cf+0x3*-0x253+-0x1*-0x52a]===_0x158338[-0x9b4*-0x3+-0xcda+-0x1042]&&_0x4ed755[-0xe6c+0xcb8+0x1b5]<_0x158338[0x1e4+-0x151*-0x15+-0x7e*0x3c];},vE=(_0x121c05,_0x398a59)=>{for(const _0x2b2b09 of _0x121c05['keys']())if(t_['hasOwnProp'+'erty'](_0x2b2b09)){const _0x10ed3d=t_[_0x2b2b09];M['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x2b2b09+('\x27\x20was\x20remo'+'ved\x20in\x20API'+'\x20')+_0x10ed3d+('\x20and\x20is\x20no'+'\x20longer\x20su'+'pported.'));}else{const _0x47c62c=SE[_0x2b2b09];_0x47c62c&&(!_0x398a59||yE(_0x398a59,_0x47c62c))&&M['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x2b2b09+('\x27\x20is\x20API\x20v'+'ersion\x20')+_0x47c62c+(',\x20but\x20the\x20'+'supplied\x20c'+'hunk\x20is\x20ve'+'rsion\x20')+(_0x398a59||'undefined')+('.\x20Please\x20u'+'pdate\x20to\x20t'+'he\x20latest\x20'+'API:\x20https'+'://develop'+'er.playcan'+'vas.com/us'+'er-manual/'+'graphics/s'+'hader-chun'+'k-migratio'+'ns/'));}},xd={'vertex_normal':cs,'vertex_tangent':ci,'vertex_texCoord0':Yt,'vertex_texCoord1':da,'vertex_color':kt,'vertex_boneWeights':li,'vertex_boneIndices':ns};class xE{constructor(_0x55bb20,_0x5e0474,_0x99b1f0=!(0x4*-0x624+-0x1*-0x265a+-0xdca)){h(this,'varyingsCo'+'de',''),h(this,'device'),h(this,'options'),h(this,'shaderLang'+'uage'),h(this,'vDefines',new Map()),h(this,'fDefines',new Map()),h(this,'includes',new Map()),h(this,'chunks',null),(this['device']=_0x55bb20,this['options']=_0x5e0474);const _0x11de7a=_0x5e0474['shaderChun'+'ks'];if(this['shaderLang'+'uage']=_0x55bb20['isWebGPU']&&_0x99b1f0&&(_0x11de7a!=null&&_0x11de7a['useWGSL'])?st:ze,this['attributes']={'vertex_position':Pe},_0x5e0474['userAttrib'+'utes']){for(const [_0xae8d8a,_0x4bb171]of Object['entries'](_0x5e0474['userAttrib'+'utes']))this['attributes'][_0x4bb171]=_0xae8d8a;}const _0x2b49eb=Ce['get'](_0x55bb20,this['shaderLang'+'uage']);if(this['chunks']=new Map(_0x2b49eb),_0x11de7a){const _0x397df8=this['shaderLang'+'uage']===ze?_0x11de7a['glsl']:_0x11de7a['wgsl'];M['call'](()=>{vE(_0x397df8,_0x11de7a['version']);}),_0x397df8['forEach']((_0x5bed07,_0x4b357f)=>{for(const _0x3820bc in xd)xd['hasOwnProp'+'erty'](_0x3820bc)&&_0x5bed07['indexOf'](_0x3820bc)>=-0x14fa+-0x17*-0x52+0xd9c&&(this['attributes'][_0x3820bc]=xd[_0x3820bc]);this['chunks']['set'](_0x4b357f,_0x5bed07);});}this['shaderPass'+'Info']=hi['get'](this['device'])['getByIndex'](_0x5e0474['pass']),this['shadowPass']=this['shaderPass'+'Info']['isShadow'],this['lighting']=_0x5e0474['lights']['length']>0x1f1b*-0x1+-0xa43+-0xa*-0x423||_0x5e0474['dirLightMa'+'pEnabled']||_0x5e0474['clusteredL'+'ightingEna'+'bled'],this['reflection'+'s']=_0x5e0474['reflection'+'Source']!==nr,this['needsNorma'+'l']=this['lighting']||this['reflection'+'s']||_0x5e0474['useSpecula'+'r']||_0x5e0474['ambientSH']||_0x5e0474['useHeights']||_0x5e0474['enableGGXS'+'pecular']||_0x5e0474['clusteredL'+'ightingEna'+'bled']&&!this['shadowPass']||_0x5e0474['useClearCo'+'atNormals'],this['needsNorma'+'l']=this['needsNorma'+'l']&&!this['shadowPass'],this['needsScene'+'Color']=_0x5e0474['useDynamic'+'Refraction'],this['needsScree'+'nSize']=_0x5e0474['useDynamic'+'Refraction'],this['needsTrans'+'forms']=_0x5e0474['useDynamic'+'Refraction'],this['vshader']=null,this['fshader']=null;}['fDefineSet'](_0x48848f,_0x4ba661,_0x445c3c=''){_0x48848f&&this['fDefines']['set'](_0x4ba661,_0x445c3c);}['generateVe'+'rtexShader'](_0x39f449,_0x13683e,_0x54ce7f){const {options:_0x20ac0f,vDefines:_0x22bc9d,attributes:_0x4bebaf}=this,_0x3bc91b=new Map();if(_0x3bc91b['set']('vPositionW','vec3'),(_0x20ac0f['nineSliced'+'Mode']===Et||_0x20ac0f['nineSliced'+'Mode']===At)&&_0x22bc9d['set']('NINESLICED',!(0x1*0x1ac9+0x119*-0x19+-0x4*-0x2a)),this['options']['linearDept'+'h']&&(_0x22bc9d['set']('LINEAR_DEP'+'TH',!(-0x1*0x2710+0x1f80+0x790)),_0x3bc91b['set']('vLinearDep'+'th','float')),this['needsNorma'+'l']&&_0x22bc9d['set']('NORMALS',!(-0x1*-0x4b6+0x1*-0x1877+-0xd*-0x185)),this['options']['useInstanc'+'ing']){const _0xb94a2=Ce['get'](this['device'],this['shaderLang'+'uage']);this['chunks']['get']('transformI'+'nstancingV'+'S')===_0xb94a2['get']('transformI'+'nstancingV'+'S')&&(_0x4bebaf['instance_l'+'ine1']=ju,_0x4bebaf['instance_l'+'ine2']=Yu,_0x4bebaf['instance_l'+'ine3']=Ku,_0x4bebaf['instance_l'+'ine4']=_n);}this['needsNorma'+'l']&&(_0x4bebaf['vertex_nor'+'mal']=cs,_0x3bc91b['set']('vNormalW','vec3'),_0x20ac0f['hasTangent'+'s']&&(_0x20ac0f['useHeights']||_0x20ac0f['useNormals']||_0x20ac0f['useClearCo'+'atNormals']||_0x20ac0f['enableGGXS'+'pecular'])?(_0x22bc9d['set']('TANGENTS',!(-0x267f+0x1460+0x121f)),_0x4bebaf['vertex_tan'+'gent']=ci,_0x3bc91b['set']('vTangentW','vec3'),_0x3bc91b['set']('vBinormalW','vec3')):_0x20ac0f['enableGGXS'+'pecular']&&(_0x22bc9d['set']('GGX_SPECUL'+'AR',!(0x33*-0x3b+-0x1939+0x24fa*0x1)),_0x3bc91b['set']('vObjectSpa'+'ceUpW','vec3')));const _0x1074ac=0x7*-0x200+0x1522+-0x720;for(let _0x3447ad=0x375+-0xd3+-0x2a2;_0x3447ad<_0x1074ac;_0x3447ad++)_0x39f449[_0x3447ad]&&(_0x22bc9d['set']('UV'+_0x3447ad,!(-0x16b2+0x7da+0x13*0xc8)),_0x4bebaf['vertex_tex'+'Coord'+_0x3447ad]='TEXCOORD'+_0x3447ad),_0x13683e[_0x3447ad]&&(_0x22bc9d['set']('UV'+_0x3447ad+('_UNMODIFIE'+'D'),!(-0x2116+-0x7*-0x472+0x2*0xfc)),_0x3bc91b['set']('vUv'+_0x3447ad,'vec2'));let _0xb7093a=-0x1c21+-0x1a1d+0x363e;const _0x346e8c=new Set();_0x54ce7f['forEach'](_0x33e9c8=>{const {id:_0x22649f,uv:_0x49628c,name:_0x3510d6}=_0x33e9c8,_0x4e7548=_0x22649f+_0x49628c*(-0x21aa+0x209d+-0x171*-0x1);if(!_0x346e8c['has'](_0x4e7548)){_0x346e8c['add'](_0x4e7548),_0x3bc91b['set']('vUV'+_0x49628c+'_'+_0x22649f,'vec2');const _0x37a8b3='texture_'+_0x3510d6+('MapTransfo'+'rm');_0x22bc9d['set']('{TRANSFORM'+'_NAME_'+_0xb7093a+'}',_0x37a8b3),_0x22bc9d['set']('{TRANSFORM'+'_UV_'+_0xb7093a+'}',_0x49628c),_0x22bc9d['set']('{TRANSFORM'+'_ID_'+_0xb7093a+'}',_0x22649f),_0xb7093a++;}}),_0x22bc9d['set']('UV_TRANSFO'+'RMS_COUNT',_0xb7093a),_0x20ac0f['vertexColo'+'rs']&&(_0x4bebaf['vertex_col'+'or']=kt,_0x22bc9d['set']('VERTEX_COL'+'OR',!(0x1*-0x234d+0x14c2+0x3*0x4d9)),_0x3bc91b['set']('vVertexCol'+'or','vec4')),_0x20ac0f['useMsdf']&&_0x20ac0f['msdfTextAt'+'tribute']&&(_0x4bebaf['vertex_out'+'lineParame'+'ters']=Po,_0x4bebaf['vertex_sha'+'dowParamet'+'ers']=Mo,_0x22bc9d['set']('MSDF',!(0x7c2*-0x1+-0xcef+0x14b1))),(_0x20ac0f['useMorphPo'+'sition']||_0x20ac0f['useMorphNo'+'rmal'])&&(_0x22bc9d['set']('MORPHING',!(-0xc8f+0x243a+0x17ab*-0x1)),_0x20ac0f['useMorphTe'+'xtureBased'+'Int']&&_0x22bc9d['set']('MORPHING_I'+'NT',!(-0x2e+0xcbf*0x1+-0x1*0xc91)),_0x20ac0f['useMorphPo'+'sition']&&_0x22bc9d['set']('MORPHING_P'+'OSITION',!(-0x354*-0xb+-0x1d*-0xc8+-0x1da2*0x2)),_0x20ac0f['useMorphNo'+'rmal']&&_0x22bc9d['set']('MORPHING_N'+'ORMAL',!(-0xf0*0x16+-0xe59*-0x1+0x647)),_0x4bebaf['morph_vert'+'ex_id']=_n),_0x20ac0f['skin']&&(_0x4bebaf['vertex_bon'+'eIndices']=ns,_0x20ac0f['batch']?_0x22bc9d['set']('BATCH',!(0x2e7*-0xd+0x13cf+0x11ec)):(_0x4bebaf['vertex_bon'+'eWeights']=li,_0x22bc9d['set']('SKIN',!(-0xd0f+0xe+-0xd01*-0x1)))),_0x20ac0f['useInstanc'+'ing']&&_0x22bc9d['set']('INSTANCING',!(0x1844+0x6d+-0x18b1)),_0x20ac0f['screenSpac'+'e']&&_0x22bc9d['set']('SCREENSPAC'+'E',!(0xf79+-0x1*-0x40f+-0x1388)),_0x20ac0f['pixelSnap']&&_0x22bc9d['set']('PIXELSNAP',!(0x54e+-0x2*0xe5c+-0x36*-0x6f)),_0x3bc91b['forEach']((_0x2cef19,_0xe962ad)=>{this['varyingsCo'+'de']+='#define\x20VA'+'RYING_'+_0xe962ad['toUpperCas'+'e']()+'\x0a',this['varyingsCo'+'de']+=this['shaderLang'+'uage']===st?'varying\x20'+_0xe962ad+':\x20'+GS['get'](_0x2cef19)+';\x0a':'varying\x20'+_0x2cef19+'\x20'+_0xe962ad+';\x0a';}),this['includes']['set']('varyingsVS',this['varyingsCo'+'de']),this['includes']['set']('varyingsPS',this['varyingsCo'+'de']),this['vshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}['_setupLigh'+'tingDefine'+'s'](_0x48f8e4,_0x14cfe3){const _0x4bfe6c=this['fDefines'],_0x348d3d=this['options'];if(this['fDefines']['set']('LIGHT_COUN'+'T',_0x348d3d['lights']['length']),_0x48f8e4&&_0x4bfe6c['set']('AREA_LIGHT'+'S',!(-0x15fa+0x7d7+0xe23)),_0x14cfe3&&this['lighting']&&(_0x4bfe6c['set']('LIT_CLUSTE'+'RED_LIGHTS',!(0x1425+0x52e*0x5+0x1*-0x2e0b)),_0x348d3d['clusteredL'+'ightingCoo'+'kiesEnable'+'d']&&_0x4bfe6c['set']('CLUSTER_CO'+'OKIES',!(-0x1560+0x2412+-0xeb2*0x1)),_0x348d3d['clusteredL'+'ightingAre'+'aLightsEna'+'bled']&&_0x4bfe6c['set']('CLUSTER_AR'+'EALIGHTS',!(-0x6*-0x342+0xa3*-0x34+0xd90)),_0x348d3d['lightMaskD'+'ynamic']&&_0x4bfe6c['set']('CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS',!(-0x1f4c+-0x56*0x55+-0x146*-0x2f)),_0x348d3d['clusteredL'+'ightingSha'+'dowsEnable'+'d']&&!_0x348d3d['noShadow'])){const _0x467382=Bi['get'](_0x348d3d['clusteredL'+'ightingSha'+'dowType']);_0x4bfe6c['set']('CLUSTER_SH'+'ADOWS',!(0xc6+-0x4b2+0xfb*0x4)),_0x4bfe6c['set']('SHADOW_KIN'+'D_'+_0x467382['kind'],!(-0x1e0b+-0x1*0x100c+0x2e17)),_0x4bfe6c['set']('CLUSTER_SH'+'ADOW_TYPE_'+_0x467382['kind'],!(-0x8db+0x194b+-0x1070*0x1));}for(let _0xb142bf=-0x6c7+-0x194d+0x2014;_0xb142bf<_0x348d3d['lights']['length'];_0xb142bf++){const _0x3cd0b5=_0x348d3d['lights'][_0xb142bf],_0xdf00c8=_0x3cd0b5['_type'];if(_0x14cfe3&&_0xdf00c8!==ve)continue;const _0x175d3e=_0x48f8e4&&_0x3cd0b5['_shape']?_0x3cd0b5['_shape']:Vs,_0x20c167=_0x3cd0b5['_shadowTyp'+'e'],_0x1fc3e1=_0x3cd0b5['castShadow'+'s']&&!_0x348d3d['noShadow'],_0x1d65bf=Bi['get'](_0x20c167);M['assert'](_0x1d65bf),_0x4bfe6c['set']('LIGHT'+_0xb142bf,!(-0x78*0x44+0x255f+0x43*-0x15)),_0x4bfe6c['set']('LIGHT'+_0xb142bf+'TYPE',''+Cp[_0xdf00c8]),_0x4bfe6c['set']('LIGHT'+_0xb142bf+'SHADOWTYPE',''+_0x1d65bf['name']),_0x4bfe6c['set']('LIGHT'+_0xb142bf+'SHAPE',''+$T[_0x175d3e]),_0x4bfe6c['set']('LIGHT'+_0xb142bf+'FALLOFF',''+XT[_0x3cd0b5['_falloffMo'+'de']]),_0x3cd0b5['affectSpec'+'ularity']&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+('AFFECT_SPE'+'CULARITY'),!(-0x24bb*-0x1+-0x8c3+0xa*-0x2cc)),_0x3cd0b5['_cookie']&&(_0xdf00c8===Ke&&!_0x3cd0b5['_cookie']['_cubemap']||_0xdf00c8===Ye&&_0x3cd0b5['_cookie']['_cubemap'])&&(_0x4bfe6c['set']('LIGHT'+_0xb142bf+'COOKIE',!(0x1*-0xa75+0x16f2+-0xc7d)),_0x4bfe6c['set']('{LIGHT'+_0xb142bf+('COOKIE_CHA'+'NNEL}'),_0x3cd0b5['_cookieCha'+'nnel']),_0xdf00c8===Ke&&(_0x3cd0b5['_cookieTra'+'nsform']&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+('COOKIE_TRA'+'NSFORM'),!(0x70d*-0x3+0xcdb+0x84c)),_0x3cd0b5['_cookieFal'+'loff']&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+('COOKIE_FAL'+'LOFF'),!(-0xe6+-0xc09+0xcef)))),_0x1fc3e1&&(_0x4bfe6c['set']('LIGHT'+_0xb142bf+'CASTSHADOW',!(-0xfb*-0x17+-0x11e7+-0x4a6)),_0x1d65bf['pcf']&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+'SHADOW_PCF',!(0xbe7+0xbbd+-0x11*0x164)),_0x3cd0b5['_normalOff'+'setBias']&&!_0x3cd0b5['_isVsm']&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+('_SHADOW_SA'+'MPLE_NORMA'+'L_OFFSET'),!(0x1265+0x39+-0x129e)),_0xdf00c8===ve&&(_0x4bfe6c['set']('LIGHT'+_0xb142bf+('_SHADOW_SA'+'MPLE_ORTHO'),!(0x1d*-0x29+-0x1ff7+-0x84*-0x47)),_0x3cd0b5['cascadeBle'+'nd']>0x63a+0x1*0x391+0x9cb*-0x1&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+('_SHADOW_CA'+'SCADE_BLEN'+'D'),!(-0x1bd2+-0x13c6+0x2f98)),_0x3cd0b5['numCascade'+'s']>0x5*0x10b+0xc7f*-0x1+0x749&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+('_SHADOW_CA'+'SCADES'),!(0x2*-0x3b2+-0x8b3+0x1017))),(_0x1d65bf['pcf']||_0x1d65bf['pcss']||this['device']['isWebGPU'])&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+('_SHADOW_SA'+'MPLE_SOURC'+'E_ZBUFFER'),!(0x19ef+0x607*-0x4+-0x1d3)),_0xdf00c8===Ye&&_0x4bfe6c['set']('LIGHT'+_0xb142bf+('_SHADOW_SA'+'MPLE_POINT'),!(0x1*0x20a1+0x221+-0x22c2))),_0x1fc3e1&&(_0x4bfe6c['set']('SHADOW_KIN'+'D_'+_0x1d65bf['kind'],!(0x17c0+0x1105+-0x28c5)),_0xdf00c8===ve&&_0x4bfe6c['set']('SHADOW_DIR'+'ECTIONAL',!(0x1*0x11cf+-0x71+-0x115e)));}}['prepareFor'+'wardPass'](_0x2b7d53){const {options:_0x3a47a4}=this,_0x1097d4=_0x3a47a4['clusteredL'+'ightingEna'+'bled']&&_0x3a47a4['clusteredL'+'ightingAre'+'aLightsEna'+'bled']||_0x3a47a4['lights']['some'](_0x22d227=>_0x22d227['_shape']&&_0x22d227['_shape']!==Vs),_0x4ab2eb=!_0x3a47a4['lightMapEn'+'abled']||_0x3a47a4['lightMapWi'+'thoutAmbie'+'nt'],_0x16ba0f=this['needsNorma'+'l']&&(_0x3a47a4['useNormals']||_0x3a47a4['useClearCo'+'atNormals']||_0x3a47a4['enableGGXS'+'pecular']&&!_0x3a47a4['useHeights']);_0x3a47a4['useSpecula'+'r']&&(this['fDefineSet'](!(-0x177e+-0x2e2*0x7+-0xa*-0x45e),'LIT_SPECUL'+'AR'),this['fDefineSet'](this['reflection'+'s'],'LIT_REFLEC'+'TIONS'),this['fDefineSet'](_0x3a47a4['useClearCo'+'at'],'LIT_CLEARC'+'OAT'),this['fDefineSet'](_0x3a47a4['fresnelMod'+'el']>0x2*-0xe39+-0x61d+0x228f,'LIT_SPECUL'+'AR_FRESNEL'),this['fDefineSet'](_0x3a47a4['useSheen'],'LIT_SHEEN'),this['fDefineSet'](_0x3a47a4['useIridesc'+'ence'],'LIT_IRIDES'+'CENCE')),this['fDefineSet'](this['lighting']&&_0x3a47a4['useSpecula'+'r']||this['reflection'+'s'],'LIT_SPECUL'+'AR_OR_REFL'+'ECTION'),this['fDefineSet'](this['needsScene'+'Color'],'LIT_SCENE_'+'COLOR'),this['fDefineSet'](this['needsScree'+'nSize'],'LIT_SCREEN'+'_SIZE'),this['fDefineSet'](this['needsTrans'+'forms'],'LIT_TRANSF'+'ORMS'),this['fDefineSet'](this['needsNorma'+'l'],'LIT_NEEDS_'+'NORMAL'),this['fDefineSet'](this['lighting'],'LIT_LIGHTI'+'NG'),this['fDefineSet'](_0x3a47a4['useMetalne'+'ss'],'LIT_METALN'+'ESS'),this['fDefineSet'](_0x3a47a4['enableGGXS'+'pecular'],'LIT_GGX_SP'+'ECULAR'),this['fDefineSet'](_0x3a47a4['useSpecula'+'rityFactor'],'LIT_SPECUL'+'ARITY_FACT'+'OR'),this['fDefineSet'](_0x3a47a4['useCubeMap'+'Rotation'],'CUBEMAP_RO'+'TATION'),this['fDefineSet'](_0x3a47a4['occludeSpe'+'cularFloat'],'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT'),this['fDefineSet'](_0x3a47a4['separateAm'+'bient'],'LIT_SEPARA'+'TE_AMBIENT'),this['fDefineSet'](_0x3a47a4['twoSidedLi'+'ghting'],'LIT_TWO_SI'+'DED_LIGHTI'+'NG'),this['fDefineSet'](_0x3a47a4['lightMapEn'+'abled'],'LIT_LIGHTM'+'AP'),this['fDefineSet'](_0x3a47a4['dirLightMa'+'pEnabled'],'LIT_DIR_LI'+'GHTMAP'),this['fDefineSet'](_0x3a47a4['skyboxInte'+'nsity']>-0x1*0x21ae+0xd8+0x20d6,'LIT_SKYBOX'+'_INTENSITY'),this['fDefineSet'](_0x3a47a4['clusteredL'+'ightingSha'+'dowsEnable'+'d'],'LIT_CLUSTE'+'RED_SHADOW'+'S'),this['fDefineSet'](_0x3a47a4['clusteredL'+'ightingAre'+'aLightsEna'+'bled'],'LIT_CLUSTE'+'RED_AREA_L'+'IGHTS'),this['fDefineSet'](_0x16ba0f,'LIT_TBN'),this['fDefineSet'](_0x4ab2eb,'LIT_ADD_AM'+'BIENT'),this['fDefineSet'](_0x3a47a4['hasTangent'+'s'],'LIT_TANGEN'+'TS'),this['fDefineSet'](_0x3a47a4['useNormals'],'LIT_USE_NO'+'RMALS'),this['fDefineSet'](_0x3a47a4['useClearCo'+'atNormals'],'LIT_USE_CL'+'EARCOAT_NO'+'RMALS'),this['fDefineSet'](_0x3a47a4['useRefract'+'ion'],'LIT_REFRAC'+'TION'),this['fDefineSet'](_0x3a47a4['useDynamic'+'Refraction'],'LIT_DYNAMI'+'C_REFRACTI'+'ON'),this['fDefineSet'](_0x3a47a4['dispersion'],'LIT_DISPER'+'SION'),this['fDefineSet'](_0x3a47a4['useHeights'],'LIT_HEIGHT'+'S'),this['fDefineSet'](_0x3a47a4['opacityFad'+'esSpecular'],'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR'),this['fDefineSet'](_0x3a47a4['alphaToCov'+'erage'],'LIT_ALPHA_'+'TO_COVERAG'+'E'),this['fDefineSet'](_0x3a47a4['alphaTest'],'LIT_ALPHA_'+'TEST'),this['fDefineSet'](_0x3a47a4['useMsdf'],'LIT_MSDF'),this['fDefineSet'](_0x3a47a4['ssao'],'LIT_SSAO'),this['fDefineSet'](_0x3a47a4['useAo'],'LIT_AO'),this['fDefineSet'](_0x3a47a4['occludeDir'+'ect'],'LIT_OCCLUD'+'E_DIRECT'),this['fDefineSet'](_0x3a47a4['msdfTextAt'+'tribute'],'LIT_MSDF_T'+'EXT_ATTRIB'+'UTE'),this['fDefineSet'](_0x3a47a4['diffuseMap'+'Enabled'],'LIT_DIFFUS'+'E_MAP'),this['fDefineSet'](_0x3a47a4['shadowCatc'+'her'],'LIT_SHADOW'+'_CATCHER'),this['fDefineSet'](!(-0x1d*-0x13a+0x1db1*-0x1+-0x5e1),'LIT_FRESNE'+'L_MODEL',HT[_0x3a47a4['fresnelMod'+'el']]),this['fDefineSet'](!(-0x5*-0x235+0x1c9*0x1+-0xcd2),'LIT_NONE_S'+'LICE_MODE',iw[_0x3a47a4['nineSliced'+'Mode']]),this['fDefineSet'](!(-0x52d*0x1+-0x1e98+-0x23c5*-0x1),'LIT_BLEND_'+'TYPE',sy[_0x3a47a4['blendType']]),this['fDefineSet'](!(0x489+-0x3a4*-0x5+-0x16bd),'LIT_CUBEMA'+'P_PROJECTI'+'ON',QT[_0x3a47a4['cubeMapPro'+'jection']]),this['fDefineSet'](!(0x32*-0xd+0x1*0x909+-0x67f),'LIT_OCCLUD'+'E_SPECULAR',ew[_0x3a47a4['occludeSpe'+'cular']]),this['fDefineSet'](!(-0x2513*0x1+-0xfd7*0x1+0x34ea),'LIT_REFLEC'+'TION_SOURC'+'E',tw[_0x3a47a4['reflection'+'Source']]),this['fDefineSet'](!(-0xb21+-0x2ed*0x3+0x13e8),'LIT_AMBIEN'+'T_SOURCE',sw[_0x3a47a4['ambientSou'+'rce']]),this['fDefineSet'](!(-0x1*-0x1843+-0x1*0x1caa+0x467),'{lightingU'+'v}',_0x2b7d53??''),this['fDefineSet'](!(-0x1b20+-0x16dc+0x31fc),'{reflectio'+'nDecode}',lr['decodeFunc'](_0x3a47a4['reflection'+'Encoding'])),this['fDefineSet'](!(0x1d*0x6+-0x67b+0x5cd*0x1),'{reflectio'+'nCubemapDe'+'code}',lr['decodeFunc'](_0x3a47a4['reflection'+'CubemapEnc'+'oding'])),this['fDefineSet'](!(0x10*-0x232+-0x24b2+-0x3a*-0x13d),'{ambientDe'+'code}',lr['decodeFunc'](_0x3a47a4['ambientEnc'+'oding'])),this['_setupLigh'+'tingDefine'+'s'](_0x1097d4,_0x3a47a4['clusteredL'+'ightingEna'+'bled']);}['prepareSha'+'dowPass'](){const {options:_0x18a0a9}=this,_0x5a982d=this['shaderPass'+'Info']['lightType'],_0x512e44=this['shaderPass'+'Info']['shadowType'],_0x533c7b=Bi['get'](_0x512e44);M['assert'](_0x533c7b);const _0x7509e5=_0x5a982d===ve||!_0x533c7b['vsm']&&_0x5a982d===Ke;this['fDefineSet'](_0x7509e5,'PERSPECTIV'+'E_DEPTH'),this['fDefineSet'](!(0x8ef+0xb5e*-0x1+0x26f),'LIGHT_TYPE',''+Cp[_0x5a982d]),this['fDefineSet'](!(-0x445*0x1+-0x1298+0x16dd*0x1),'SHADOW_TYP'+'E',''+_0x533c7b['name']),this['fDefineSet'](_0x18a0a9['alphaTest'],'LIT_ALPHA_'+'TEST');}['generateFr'+'agmentShad'+'er'](_0x5f3739,_0x787919,_0x3a0d6b){const _0x5d3f3d=this['options'];this['includes']['set']('frontendDe'+'clPS',_0x5f3739??''),this['includes']['set']('frontendCo'+'dePS',_0x787919??''),_0x5d3f3d['pass']===Fn||_0x5d3f3d['pass']===ll||(this['shadowPass']?this['prepareSha'+'dowPass']():this['prepareFor'+'wardPass'](_0x3a0d6b)),this['fshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}}class TE{constructor(){h(this,'hasTangent'+'s',!(-0x13*-0xa9+0x24f6+-0x3180)),h(this,'shaderChun'+'ks',null),h(this,'pass',0x1543+0x1feb+0x1*-0x352e),h(this,'alphaTest',!(-0x4*-0x655+0x13ed+-0x10*0x2d4)),h(this,'blendType',ys),h(this,'separateAm'+'bient',!(0xf2b+-0x2*-0xcf7+-0x2918)),h(this,'screenSpac'+'e',!(-0x159a*-0x1+-0x1*-0xc5+-0x2*0xb2f)),h(this,'skin',!(-0xb*0x7+-0x1b5f+0x1bad)),h(this,'batch',!(0x493*0x5+-0x55*-0x33+0x27cd*-0x1)),h(this,'useInstanc'+'ing',!(-0x15ee*0x1+-0x1273*-0x2+-0x4fd*0x3)),h(this,'useMorphPo'+'sition',!(-0x15b*0x7+0x1311+-0x39*0x2b)),h(this,'useMorphNo'+'rmal',!(-0x1*0x72b+0x1ae6+-0x13ba)),h(this,'useMorphTe'+'xtureBased'+'Int',!(0x2b3*-0x6+-0x2180*-0x1+0x67*-0x2b)),h(this,'nineSliced'+'Mode',0x6a7+-0xde6+0x73f),h(this,'clusteredL'+'ightingEna'+'bled',!(0x16d5+0x1511+-0x2be6)),h(this,'clusteredL'+'ightingCoo'+'kiesEnable'+'d',!(0x15c+-0x1361+0x1206)),h(this,'clusteredL'+'ightingSha'+'dowsEnable'+'d',!(-0xfe7*0x1+-0x13*0x72+0x185e*0x1)),h(this,'clusteredL'+'ightingSha'+'dowType',-0xd55+0x9*-0x2e5+-0x13b1*-0x2),h(this,'clusteredL'+'ightingAre'+'aLightsEna'+'bled',!(0x49*-0x2c+0x7c6*-0x5+0x336b)),h(this,'vertexColo'+'rs',!(0x7bd+-0x1*0x108a+0x8ce)),h(this,'lightMapEn'+'abled',!(0x1951+-0x3*-0x25+-0x19bf)),h(this,'dirLightMa'+'pEnabled',!(-0x335+-0x116c+0x14a2)),h(this,'useHeights',!(0x153e+0x2217+-0x3754)),h(this,'useNormals',!(-0xe02*0x2+-0x1*-0x112e+0xad7)),h(this,'useClearCo'+'atNormals',!(-0x65*0xa+-0x1e*-0x71+-0x1*0x94b)),h(this,'useAo',!(-0x1*0x956+-0x1e7+0xb3e)),h(this,'diffuseMap'+'Enabled',!(-0x3*-0x9a9+0x1680+-0x337a)),h(this,'pixelSnap',!(-0x21e6+-0x134f*-0x1+0xe98)),h(this,'ambientSH',!(0x2*-0x17d+-0x8*0x257+0x15b3)),h(this,'ssao',!(-0x12*0x1ca+0x1*-0x409+0x2*0x121f)),h(this,'twoSidedLi'+'ghting',!(-0x4f*-0x4f+-0x20d6+0x876)),h(this,'occludeDir'+'ect',!(-0x1*0x2fc+0x365*0x4+-0xa97)),h(this,'occludeSpe'+'cular',0xd3b+0x843+0x2*-0xabf),h(this,'occludeSpe'+'cularFloat',!(0x88*0x39+0x1*-0x1305+-0xb42)),h(this,'useMsdf',!(0x3*-0x5ad+0x4cd+0x1*0xc3b)),h(this,'msdfTextAt'+'tribute',!(0x1*-0x1+-0x16cd+0x16cf)),h(this,'alphaToCov'+'erage',!(-0x1a15*0x1+-0xc4d+0x2663)),h(this,'opacityFad'+'esSpecular',!(0x1*0x2527+-0x17dc*0x1+-0xd4a)),h(this,'opacityDit'+'her',ra),h(this,'opacitySha'+'dowDither',ra),h(this,'cubeMapPro'+'jection',-0xbaf+-0x1*0x1247+0x1df6),h(this,'useSpecula'+'r',!(-0x716+-0x1*0x2303+0x2a1a)),h(this,'useSpecula'+'rityFactor',!(-0x400+-0x9e9*0x1+0xdea)),h(this,'enableGGXS'+'pecular',!(-0x5d5*0x1+0x264b+-0x2075)),h(this,'fresnelMod'+'el',-0x1ec+-0x11b0+0x1f6*0xa),h(this,'useRefract'+'ion',!(0x1*-0x2257+-0xa47*-0x3+-0x383*-0x1)),h(this,'useClearCo'+'at',!(0x2*0x1051+0x287*0x8+0x53*-0xa3)),h(this,'useSheen',!(-0x3*-0x63b+-0x20c1+0xe11)),h(this,'useIridesc'+'ence',!(0x7d7+0x112d*-0x1+0x957)),h(this,'useMetalne'+'ss',!(0xa2c+0x12d7+0x1*-0x1d02)),h(this,'useDynamic'+'Refraction',!(0x1012*0x2+0x4e3+-0x1283*0x2)),h(this,'dispersion',!(-0x57*-0x43+-0x20a6+-0x1fa*-0x5)),h(this,'fog',On),h(this,'gamma',ol),h(this,'toneMap',-(-0x3*0x9bc+0x241f+0xa*-0xb1)),h(this,'reflection'+'Source',nr),h(this,'reflection'+'Encoding',null),h(this,'reflection'+'CubemapEnc'+'oding',null),h(this,'ambientSou'+'rce','constant'),h(this,'ambientEnc'+'oding',null),h(this,'skyboxInte'+'nsity',-0x1df9+0x2ff+0x1afb),h(this,'useCubeMap'+'Rotation',!(0xaf6+0x1348+0x1e3d*-0x1)),h(this,'lightMapWi'+'thoutAmbie'+'nt',!(-0x1c4b+-0x8e*-0x2+0x1b30)),h(this,'lights',[]),h(this,'noShadow',!(-0x1*0x11e7+0x7c*0x11+0x9ac*0x1)),h(this,'lightMaskD'+'ynamic',-0x9*0x61+0x242b+-0x20c2),h(this,'userAttrib'+'utes',{}),h(this,'linearDept'+'h',!(0x11*-0x1a9+0xf64+0xcd6)),h(this,'shadowCatc'+'her',!(-0x1*0x1ac4+-0x207f+0x4*0xed1));}}class Yh{constructor(){h(this,'defines',new Map()),h(this,'forceUv1',!(-0x5*-0x52f+0x25c2+-0x3fac)),h(this,'specularTi'+'nt',!(-0x1*0xd4b+0x18f7+-0xbab)),h(this,'metalnessT'+'int',!(-0x6aa+-0x21*-0x8a+-0xb1f)),h(this,'glossTint',!(0x1347+-0x1*0xc0e+-0x4*0x1ce)),h(this,'emissiveEn'+'coding','linear'),h(this,'lightMapEn'+'coding','linear'),h(this,'packedNorm'+'al',!(0x160d*0x1+0x48a+-0x1a96)),h(this,'normalDeta'+'ilPackedNo'+'rmal',!(-0x1355*-0x1+0x21f*0x9+-0x266b)),h(this,'clearCoatP'+'ackedNorma'+'l',!(0x89f*-0x3+-0x1*0xf97+0x2975)),h(this,'glossInver'+'t',!(-0x139a+0xd8c*-0x1+-0x1*-0x2127)),h(this,'sheenGloss'+'Invert',!(-0xc6+0x5c*-0x12+0x73f)),h(this,'clearCoatG'+'lossInvert',!(-0x1921+0x1*0xa04+-0x1ae*-0x9)),h(this,'useAO',!(0x1*0x14a2+0xe9*-0x28+0xfc7)),h(this,'litOptions',new TE());}get['pass'](){return this['litOptions']['pass'];}}const Iy={'generateKey'(_0x5ce6e5){return'lit'+Object['keys'](_0x5ce6e5)['sort']()['map'](_0x2a7ae2=>{var _0x47a822;return _0x2a7ae2==='shaderChun'+'ks'?((_0x47a822=_0x5ce6e5['shaderChun'+'ks'])==null?void(0xc77*0x1+0x4a*-0x44+0x731):_0x47a822['key'])??'':_0x2a7ae2==='lights'?Iy['generateLi'+'ghtsKey'](_0x5ce6e5):_0x2a7ae2+_0x5ce6e5[_0x2a7ae2];})['join']('\x0a');},'generateLightsKey'(_0x17e805){return'lights:'+_0x17e805['lights']['map'](_0x356870=>!_0x17e805['clusteredL'+'ightingEna'+'bled']||_0x356870['_type']===ve?_0x356870['key']+',':'')['join']('');}},cn=[],Td=_0x35e357=>Object['keys'](_0x35e357)['filter'](_0x24608f=>_0x24608f!=='litOptions')['sort']();class wE extends aa{constructor(){super(...arguments),h(this,'optionsCon'+'text',new Yh()),h(this,'optionsCon'+'textMin',new Yh());}['generateKe'+'y'](_0x55ce47){let _0x4173d7;return _0x55ce47===this['optionsCon'+'textMin']?(this['propsMin']||(this['propsMin']=Td(_0x55ce47)),_0x4173d7=this['propsMin']):_0x55ce47===this['optionsCon'+'text']?(this['props']||(this['props']=Td(_0x55ce47)),_0x4173d7=this['props']):_0x4173d7=Td(_0x55ce47),'standard:\x0a'+aa['definesHas'+'h'](_0x55ce47['defines'])+'\x0a'+_0x4173d7['map'](_0x41454b=>_0x41454b+_0x55ce47[_0x41454b])['join']('\x0a')+Iy['generateKe'+'y'](_0x55ce47['litOptions']);}['_getUvSour'+'ceExpressi'+'on'](_0x571e89,_0x172062,_0x584b44){const _0x2bf06a=_0x584b44[_0x571e89],_0x5f3437=_0x584b44[_0x172062],_0x556e55=_0x584b44['litOptions']['pass']===fa;let _0x2b5bca;return _0x556e55&&_0x584b44['litOptions']['nineSliced'+'Mode']===Et||_0x556e55&&_0x584b44['litOptions']['nineSliced'+'Mode']===At?_0x2b5bca='nineSliced'+'Uv':(_0x2bf06a===0x11e8+-0x26fd+0x1515*0x1?_0x2b5bca='vUv'+_0x5f3437:_0x2b5bca='vUV'+_0x5f3437+'_'+_0x2bf06a,_0x584b44['heightMap']&&_0x571e89!=='heightMapT'+'ransform'&&(_0x2b5bca+='\x20+\x20dUvOffs'+'et')),_0x2b5bca;}['_validateM'+'apChunk'](_0xff9883,_0x2f74a9,_0x36b062){M['call'](()=>{const _0x46486c=_0x36b062['get'](_0x2f74a9)['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1'),_0x1cb7b8=[],_0x170bbf=(_0x4564d8,_0x14abc9)=>{_0x46486c['includes'](_0x4564d8)&&_0x1cb7b8['push']('\x20\x20'+_0x4564d8+'\x20->\x20'+_0x14abc9);};[['$UV','{STD_'+_0xff9883+('_TEXTURE_U'+'V}')],['$CH','{STD_'+_0xff9883+('_TEXTURE_C'+'HANNEL}')],['$SAMPLER','{STD_'+_0xff9883+('_TEXTURE_N'+'AME}')],['$DECODE','{STD_'+_0xff9883+('_TEXTURE_D'+'ECODE}')],['$VC','{STD_'+_0xff9883+('_VERTEX_CH'+'ANNEL}')],['$DETAILMOD'+'E','{STD_'+_0xff9883+('_DETAILMOD'+'E}')],['unpackNorm'+'al(','{STD_'+_0xff9883+('_TEXTURE_D'+'ECODE}(')]]['forEach'](([_0x1a6f2d,_0x5c3aa3])=>_0x170bbf(_0x1a6f2d,_0x5c3aa3)),[['MAPFLOAT','STD_'+_0xff9883+'_CONSTANT'],['MAPCOLOR','STD_'+_0xff9883+'_CONSTANT'],['MAPVERTEX','STD_'+_0xff9883+'_VERTEX'],['MAPTEXTURE','STD_'+_0xff9883+'_TEXTURE'],['MAPINVERT','STD_'+_0xff9883+'_INVERT']]['forEach'](([_0x469789,_0x22c58d])=>_0x170bbf(_0x469789,_0x22c58d)),_0x46486c['includes']('$texture2D'+'SAMPLE')&&_0x170bbf('$texture2D'+'SAMPLE','(Macro\x20no\x20'+'longer\x20sup'+'ported\x20-\x20r'+'emove/refa'+'ctor)'),_0x1cb7b8['length']>0x69e+-0x768+-0x2*-0x65&&M['errorOnce']('Shader\x20chu'+'nk\x20'+_0x2f74a9+('\x20is\x20in\x20no\x20'+'longer\x20com'+'patible\x20fo'+'rmat.\x20Plea'+'se\x20make\x20th'+'ese\x20replac'+'ements\x20to\x20'+'bring\x20it\x20t'+'o\x20the\x20curr'+'ent\x20versio'+'n:\x0a')+_0x1cb7b8['join']('\x0a'),{'code':_0x46486c});});}['_addMapDef'+'ines'](_0x72f946,_0x2de0da,_0x24589d,_0x2a40f4,_0x177713,_0x58fa9b,_0x3e5374=null){const _0x56ba27=_0x2de0da+'Map',_0x4b49ee=_0x2de0da['toUpperCas'+'e'](),_0x16515f=_0x56ba27+'Uv',_0x1bc480=_0x56ba27+'Identifier',_0x1aa01d=_0x56ba27+'Transform',_0x1d080a=_0x56ba27+'Channel',_0x4c017a=_0x2de0da+('VertexColo'+'rChannel'),_0x1c4554=_0x2de0da+'Tint',_0x14e8e7=_0x2de0da+('VertexColo'+'r'),_0x93d65d=_0x2de0da+'Mode',_0x4f4945=_0x2de0da+'Invert',_0x2f6276=_0x2a40f4[_0x1c4554],_0x383847=_0x2a40f4[_0x14e8e7],_0x7e3146=_0x2a40f4[_0x56ba27],_0x37e0c0=_0x2a40f4[_0x1bc480],_0x161ac4=_0x2a40f4[_0x93d65d],_0x3c489b=_0x177713['get'](_0x24589d);if(M['assert'](_0x3c489b,'Shader\x20chu'+'nk\x20'+_0x24589d+('\x20not\x20found'+'.')),M['call'](()=>{_0x3c489b&&this['_validateM'+'apChunk'](_0x4b49ee,_0x24589d,_0x177713);}),_0x7e3146){_0x72f946['set']('STD_'+_0x4b49ee+'_TEXTURE','');const _0x3db179=this['_getUvSour'+'ceExpressi'+'on'](_0x1aa01d,_0x16515f,_0x2a40f4);_0x72f946['set']('{STD_'+_0x4b49ee+('_TEXTURE_U'+'V}'),_0x3db179),_0x72f946['set']('{STD_'+_0x4b49ee+('_TEXTURE_C'+'HANNEL}'),_0x2a40f4[_0x1d080a]);const _0x2e8bac='{STD_'+_0x4b49ee+('_TEXTURE_N'+'AME}');if(_0x3c489b['includes'](_0x2e8bac)){let _0x5a197d='texture_'+_0x56ba27;const _0x1747eb=_0x58fa9b[_0x37e0c0];_0x1747eb?_0x5a197d=_0x1747eb:(_0x58fa9b[_0x37e0c0]=_0x5a197d,_0x72f946['set']('STD_'+_0x4b49ee+('_TEXTURE_A'+'LLOCATE'),'')),_0x72f946['set'](_0x2e8bac,_0x5a197d);}if(_0x3e5374){const _0x24b54d=_0x2a40f4[_0x1d080a]==='aaa'?'passThroug'+'h':lr['decodeFunc'](_0x3e5374);_0x72f946['set']('{STD_'+_0x4b49ee+('_TEXTURE_D'+'ECODE}'),_0x24b54d);}}_0x383847&&(_0x72f946['set']('STD_'+_0x4b49ee+'_VERTEX',''),_0x72f946['set']('{STD_'+_0x4b49ee+('_VERTEX_CH'+'ANNEL}'),_0x2a40f4[_0x4c017a])),_0x161ac4&&_0x72f946['set']('{STD_'+_0x4b49ee+('_DETAILMOD'+'E}'),_0x161ac4),_0x2f6276&&_0x72f946['set']('STD_'+_0x4b49ee+'_CONSTANT',''),_0x2a40f4[_0x4f4945]&&_0x72f946['set']('STD_'+_0x4b49ee+'_INVERT','');}['_correctCh'+'annel'](_0x340026,_0x5c0480,_0x23db08){if(_0x23db08[_0x340026]>0x1597+0x1268+-0x27ff){if(_0x23db08[_0x340026]<_0x5c0480['length'])return _0x5c0480['substring'](0xd*0x104+-0x14*-0x154+-0x27c4,_0x23db08[_0x340026]);if(_0x23db08[_0x340026]>_0x5c0480['length']){let _0x567a1b=_0x5c0480;const _0x41c277=_0x567a1b['charAt'](_0x567a1b['length']-(0x20f2+-0x572*-0x3+-0x5*0x9db)),_0x4ae6f3=_0x23db08[_0x340026]-_0x567a1b['length'];for(let _0x44586b=0x15c8+0x1*-0x1201+-0x3c7;_0x44586b<_0x4ae6f3;_0x44586b++)_0x567a1b+=_0x41c277;return _0x567a1b;}return _0x5c0480;}}['createVert'+'exShader'](_0x5584d3,_0x5d6636){const _0x327d4f=[],_0x158867=[],_0x32fc1f=[];for(const _0x25f76e in cn){const _0x1b0d07=_0x25f76e+'Map';if(_0x5d6636[_0x25f76e+('VertexColo'+'r')]){const _0x20c1cd=_0x25f76e+('VertexColo'+'rChannel');_0x5d6636[_0x20c1cd]=this['_correctCh'+'annel'](_0x25f76e,_0x5d6636[_0x20c1cd],cn);}if(_0x5d6636[_0x1b0d07]){const _0x34add6=_0x1b0d07+'Channel',_0x3b40eb=_0x1b0d07+'Transform',_0x57cfeb=_0x1b0d07+'Uv';_0x5d6636[_0x57cfeb]=Math['min'](_0x5d6636[_0x57cfeb],-0x1a3*-0x10+0x1b16+-0x1*0x3545),_0x5d6636[_0x34add6]=this['_correctCh'+'annel'](_0x25f76e,_0x5d6636[_0x34add6],cn);const _0x4915a4=_0x5d6636[_0x57cfeb];_0x327d4f[_0x4915a4]=!(-0x74f*0x4+0x4*-0x2c+-0x1dec*-0x1),_0x158867[_0x4915a4]=_0x158867[_0x4915a4]||_0x5d6636[_0x1b0d07]&&!_0x5d6636[_0x3b40eb],_0x5d6636[_0x3b40eb]&&_0x32fc1f['push']({'name':_0x25f76e,'id':_0x5d6636[_0x3b40eb],'uv':_0x5d6636[_0x57cfeb]});}}_0x5d6636['forceUv1']&&(_0x327d4f[-0xb94+-0x20bf+-0x1*-0x2c54]=!(0x20e*-0x7+0x29*0x31+0x689*0x1),_0x158867[-0x14a2+-0x13c+0x15df]=_0x158867[-0x1*-0x10c0+0x1109+-0x2f*0xb8]!==void(0x1f57+-0x2a2*0x2+-0x1a13)?_0x158867[0x6ef+-0x2*-0x3d7+0x22*-0x6e]:!(0x503*-0x2+0x86b*0x4+-0x17a6)),_0x5584d3['generateVe'+'rtexShader'](_0x327d4f,_0x158867,_0x32fc1f);}['prepareFra'+'gmentDefin'+'es'](_0x3426d6,_0x577fa2,_0x2925ea){const _0x3599a2=(_0x137d38,_0x57d272,_0x442db3='')=>{_0x137d38&&_0x577fa2['set'](_0x57d272,_0x442db3);};_0x3599a2(_0x3426d6['lightMap'],'STD_LIGHTM'+'AP',''),_0x3599a2(_0x3426d6['lightVerte'+'xColor'],'STD_LIGHT_'+'VERTEX_COL'+'OR',''),_0x3599a2(_0x3426d6['dirLightMa'+'p']&&_0x3426d6['litOptions']['useSpecula'+'r'],'STD_LIGHTM'+'AP_DIR',''),_0x3599a2(_0x3426d6['heightMap'],'STD_HEIGHT'+'_MAP',''),_0x3599a2(_0x3426d6['useSpecula'+'rColor'],'STD_SPECUL'+'AR_COLOR',''),_0x3599a2(_0x3426d6['aoMap']||_0x3426d6['aoVertexCo'+'lor']||_0x3426d6['useAO'],'STD_AO',''),_0x3599a2(!(-0x170f+0xca5+0xa6a*0x1),'STD_OPACIT'+'Y_DITHER',uw[_0x2925ea['isForward']?_0x3426d6['litOptions']['opacityDit'+'her']:_0x3426d6['litOptions']['opacitySha'+'dowDither']]);}['createShad'+'erDefiniti'+'on'](_0x481e5b,_0x3d033f){const _0x15bf9c=hi['get'](_0x481e5b)['getByIndex'](_0x3d033f['litOptions']['pass']),_0x3663d3=_0x15bf9c['isForward'],_0x5be85e=new xE(_0x481e5b,_0x3d033f['litOptions']);this['createVert'+'exShader'](_0x5be85e,_0x3d033f);const _0x4314d7={};_0x3d033f['litOptions']['fresnelMod'+'el']=_0x3d033f['litOptions']['fresnelMod'+'el']===0x1c9c+-0x1e8*0x9+-0xb74?pm:_0x3d033f['litOptions']['fresnelMod'+'el'];const _0x29fb87=_0x5be85e['fDefines'];this['prepareFra'+'gmentDefin'+'es'](_0x3d033f,_0x29fb87,_0x15bf9c);let _0x153c7a='';if(_0x3663d3){if(_0x3d033f['heightMap']&&this['_addMapDef'+'ines'](_0x29fb87,'height','parallaxPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),(_0x3d033f['litOptions']['blendType']!==ys||_0x3d033f['litOptions']['alphaTest']||_0x3d033f['litOptions']['alphaToCov'+'erage']||_0x3d033f['litOptions']['opacityDit'+'her']!==ra)&&this['_addMapDef'+'ines'](_0x29fb87,'opacity','opacityPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),_0x5be85e['needsNorma'+'l']){if((_0x3d033f['normalMap']||_0x3d033f['clearCoatN'+'ormalMap'])&&!_0x3d033f['litOptions']['hasTangent'+'s']){const _0x322eb5=_0x3d033f['normalMap']?'normalMap':'clearCoatN'+'ormalMap';_0x153c7a=this['_getUvSour'+'ceExpressi'+'on'](_0x322eb5+'Transform',_0x322eb5+'Uv',_0x3d033f);}this['_addMapDef'+'ines'](_0x29fb87,'normalDeta'+'il','normalMapP'+'S',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['normalDeta'+'ilPackedNo'+'rmal']?'xy':'xyz'),this['_addMapDef'+'ines'](_0x29fb87,'normal','normalMapP'+'S',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['packedNorm'+'al']?'xy':'xyz');}_0x3d033f['diffuseDet'+'ail']&&this['_addMapDef'+'ines'](_0x29fb87,'diffuseDet'+'ail','diffusePS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['diffuseDet'+'ailEncodin'+'g']),this['_addMapDef'+'ines'](_0x29fb87,'diffuse','diffusePS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['diffuseEnc'+'oding']),_0x3d033f['litOptions']['useRefract'+'ion']&&(this['_addMapDef'+'ines'](_0x29fb87,'refraction','transmissi'+'onPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),this['_addMapDef'+'ines'](_0x29fb87,'thickness','thicknessP'+'S',_0x3d033f,_0x5be85e['chunks'],_0x4314d7)),_0x3d033f['litOptions']['useIridesc'+'ence']&&(this['_addMapDef'+'ines'](_0x29fb87,'iridescenc'+'e','iridescenc'+'ePS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),this['_addMapDef'+'ines'](_0x29fb87,'iridescenc'+'eThickness','iridescenc'+'eThickness'+'PS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7)),(_0x5be85e['lighting']&&_0x3d033f['litOptions']['useSpecula'+'r']||_0x5be85e['reflection'+'s'])&&(_0x3d033f['litOptions']['useSheen']&&(this['_addMapDef'+'ines'](_0x29fb87,'sheen','sheenPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['sheenEncod'+'ing']),this['_addMapDef'+'ines'](_0x29fb87,'sheenGloss','sheenGloss'+'PS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7)),_0x3d033f['litOptions']['useMetalne'+'ss']&&(this['_addMapDef'+'ines'](_0x29fb87,'metalness','metalnessP'+'S',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),this['_addMapDef'+'ines'](_0x29fb87,'ior','iorPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7)),_0x3d033f['litOptions']['useSpecula'+'rityFactor']&&this['_addMapDef'+'ines'](_0x29fb87,'specularit'+'yFactor','specularit'+'yFactorPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),_0x3d033f['useSpecula'+'rColor']&&this['_addMapDef'+'ines'](_0x29fb87,'specular','specularPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['specularEn'+'coding']),this['_addMapDef'+'ines'](_0x29fb87,'gloss','glossPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7)),_0x3d033f['aoDetail']&&this['_addMapDef'+'ines'](_0x29fb87,'aoDetail','aoPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),(_0x3d033f['aoMap']||_0x3d033f['aoVertexCo'+'lor']||_0x3d033f['useAO'])&&this['_addMapDef'+'ines'](_0x29fb87,'ao','aoPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),this['_addMapDef'+'ines'](_0x29fb87,'emissive','emissivePS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['emissiveEn'+'coding']),_0x3d033f['litOptions']['useClearCo'+'at']&&(this['_addMapDef'+'ines'](_0x29fb87,'clearCoat','clearCoatP'+'S',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),this['_addMapDef'+'ines'](_0x29fb87,'clearCoatG'+'loss','clearCoatG'+'lossPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),this['_addMapDef'+'ines'](_0x29fb87,'clearCoatN'+'ormal','clearCoatN'+'ormalPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['clearCoatP'+'ackedNorma'+'l']?'xy':'xyz')),_0x3d033f['litOptions']['enableGGXS'+'pecular']&&this['_addMapDef'+'ines'](_0x29fb87,'anisotropy','anisotropy'+'PS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7),(_0x3d033f['lightMap']||_0x3d033f['lightVerte'+'xColor'])&&this['_addMapDef'+'ines'](_0x29fb87,'light','lightmapPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7,_0x3d033f['lightMapEn'+'coding']);}else{const _0x365ab0=_0x3d033f['litOptions']['opacitySha'+'dowDither'];(_0x3d033f['litOptions']['alphaTest']||_0x365ab0)&&this['_addMapDef'+'ines'](_0x29fb87,'opacity','opacityPS',_0x3d033f,_0x5be85e['chunks'],_0x4314d7);}_0x5be85e['generateFr'+'agmentShad'+'er'](_0x5be85e['chunks']['get']('stdDeclara'+'tionPS'),_0x5be85e['chunks']['get']('stdFrontEn'+'dPS'),_0x153c7a);const _0x55c8b0=qh['merge'](_0x5be85e['chunks'],_0x5be85e['includes']),_0x508ca7=_0x5be85e['vDefines'];_0x3d033f['defines']['forEach']((_0x2361f7,_0x45a5dc)=>_0x508ca7['set'](_0x45a5dc,_0x2361f7)),_0x3d033f['defines']['forEach']((_0xb9bdc7,_0x2c785e)=>_0x29fb87['set'](_0x2c785e,_0xb9bdc7));const _0x594b5c=$t['createDefi'+'nition'](_0x481e5b,{'name':'StandardSh'+'ader','attributes':_0x5be85e['attributes'],'shaderLanguage':_0x5be85e['shaderLang'+'uage'],'vertexCode':_0x5be85e['vshader'],'fragmentCode':_0x5be85e['fshader'],'vertexIncludes':_0x55c8b0,'fragmentIncludes':_0x55c8b0,'fragmentDefines':_0x29fb87,'vertexDefines':_0x508ca7});return _0x5be85e['shaderPass'+'Info']['isForward']&&(_0x594b5c['tag']=AS),_0x594b5c;}}const wd=new wE(),jt=[];jt[lm]={'src':Dt,'dst':Dt,'op':L0},jt[ys]={'src':Dt,'dst':wu,'op':as},jt[Gs]={'src':yc,'dst':vc,'op':as,'alphaSrc':Dt},jt[bn]={'src':Dt,'dst':vc,'op':as},jt[hm]={'src':Dt,'dst':Dt,'op':as},jt[Yc]={'src':yc,'dst':Dt,'op':as},jt[dm]={'src':nS,'dst':I0,'op':as},jt[fm]={'src':D0,'dst':Dt,'op':as},jt[cm]={'src':nS,'dst':wu,'op':as},jt[um]={'src':Dt,'dst':Dt,'op':R0},jt[mm]={'src':Dt,'dst':Dt,'op':O0};let EE=0x13f9+-0x11*0x31+-0x10b8;class ua{constructor(){h(this,'meshInstan'+'ces',[]),h(this,'name','Untitled'),h(this,'userId',''),h(this,'id',EE++),h(this,'variants',new Map()),h(this,'defines',new Map()),h(this,'_definesDi'+'rty',!(-0x1*-0x24ed+0x1*-0x50d+-0x1fdf)),h(this,'parameters',{}),h(this,'alphaTest',0x5*-0x751+0x10c8+-0x1*-0x13cd),h(this,'alphaToCov'+'erage',!(0x12d2+-0x62e+0x287*-0x5)),h(this,'_blendStat'+'e',new Ct()),h(this,'_depthStat'+'e',new Kt()),h(this,'cull',Jr),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'_shaderChu'+'nks',null),h(this,'_oldChunks',{}),h(this,'_dirtyShad'+'er',!(-0x3*0x7ea+-0x958*0x4+-0x1*-0x3d1e)),h(this,'_shaderVer'+'sion',0x1516+0x11fb*0x2+-0x390c),h(this,'_scene',null),h(this,'dirty',!(-0x23de*-0x1+-0x17bc+0x611*-0x2)),new.target===ua&&M['error']('Material\x20c'+'lass\x20canno'+'t\x20be\x20insta'+'ntiated,\x20u'+'se\x20ShaderM'+'aterial\x20in'+'stead');}get['hasShaderC'+'hunks'](){return this['_shaderChu'+'nks']!=null;}get['shaderChun'+'ks'](){return this['_shaderChu'+'nks']||(this['_shaderChu'+'nks']=new Ce()),this['_shaderChu'+'nks'];}['getShaderC'+'hunks'](_0x549913=ze){const _0x59515b=this['shaderChun'+'ks'];return _0x549913===ze?_0x59515b['glsl']:_0x59515b['wgsl'];}set['shaderChun'+'ksVersion'](_0x4a3bb1){this['shaderChun'+'ks']['version']=_0x4a3bb1;}get['shaderChun'+'ksVersion'](){return this['shaderChun'+'ks']['version'];}set['chunks'](_0x50a53b){M['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),this['_oldChunks']=_0x50a53b;}get['chunks'](){return M['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),Object['assign'](this['_oldChunks'],Object['fromEntrie'+'s'](this['shaderChun'+'ks']['glsl'])),this['_oldChunks'];}set['depthBias'](_0x496639){this['_depthStat'+'e']['depthBias']=_0x496639;}get['depthBias'](){return this['_depthStat'+'e']['depthBias'];}set['slopeDepth'+'Bias'](_0x120891){this['_depthStat'+'e']['depthBiasS'+'lope']=_0x120891;}get['slopeDepth'+'Bias'](){return this['_depthStat'+'e']['depthBiasS'+'lope'];}set['redWrite'](_0x1d9393){this['_blendStat'+'e']['redWrite']=_0x1d9393;}get['redWrite'](){return this['_blendStat'+'e']['redWrite'];}set['greenWrite'](_0x380e14){this['_blendStat'+'e']['greenWrite']=_0x380e14;}get['greenWrite'](){return this['_blendStat'+'e']['greenWrite'];}set['blueWrite'](_0x4359e4){this['_blendStat'+'e']['blueWrite']=_0x4359e4;}get['blueWrite'](){return this['_blendStat'+'e']['blueWrite'];}set['alphaWrite'](_0x3ccf7c){this['_blendStat'+'e']['alphaWrite']=_0x3ccf7c;}get['alphaWrite'](){return this['_blendStat'+'e']['alphaWrite'];}get['transparen'+'t'](){return this['_blendStat'+'e']['blend'];}['_updateTra'+'nsparency'](){const _0x5ae8cc=this['transparen'+'t'],_0x3cfeaf=this['meshInstan'+'ces'];for(let _0x4975ec=0x1175+-0x5fc*-0x1+-0x1*0x1771;_0x4975ec<_0x3cfeaf['length'];_0x4975ec++)_0x3cfeaf[_0x4975ec]['transparen'+'t']=_0x5ae8cc;}set['blendState'](_0x181151){this['_blendStat'+'e']['copy'](_0x181151),this['_updateTra'+'nsparency']();}get['blendState'](){return this['_blendStat'+'e'];}set['blendType'](_0x424fd0){const _0x2bb9c5=jt[_0x424fd0];M['assert'](_0x2bb9c5,'Unknown\x20bl'+'end\x20mode\x20'+_0x424fd0),this['_blendStat'+'e']['setColorBl'+'end'](_0x2bb9c5['op'],_0x2bb9c5['src'],_0x2bb9c5['dst']),this['_blendStat'+'e']['setAlphaBl'+'end'](_0x2bb9c5['alphaOp']??_0x2bb9c5['op'],_0x2bb9c5['alphaSrc']??_0x2bb9c5['src'],_0x2bb9c5['alphaDst']??_0x2bb9c5['dst']);const _0x59aa4b=_0x424fd0!==ys;this['_blendStat'+'e']['blend']!==_0x59aa4b&&(this['_blendStat'+'e']['blend']=_0x59aa4b,this['_updateTra'+'nsparency']()),this['_updateMes'+'hInstanceK'+'eys']();}get['blendType'](){if(!this['transparen'+'t'])return ys;const {colorOp:_0x30d97d,colorSrcFactor:_0x2ce4b0,colorDstFactor:_0x10a308,alphaOp:_0xc3370,alphaSrcFactor:_0x4fb1ef,alphaDstFactor:_0x4cfeb7}=this['_blendStat'+'e'];for(let _0x3b252f=-0x599*0x2+0x1911+-0x1*0xddf;_0x3b252f<jt['length'];_0x3b252f++){const _0x9d5926=jt[_0x3b252f];if(_0x9d5926['src']===_0x2ce4b0&&_0x9d5926['dst']===_0x10a308&&_0x9d5926['op']===_0x30d97d&&_0x9d5926['src']===_0x4fb1ef&&_0x9d5926['dst']===_0x4cfeb7&&_0x9d5926['op']===_0xc3370)return _0x3b252f;}return Gs;}set['depthState'](_0x180b8d){this['_depthStat'+'e']['copy'](_0x180b8d);}get['depthState'](){return this['_depthStat'+'e'];}set['depthTest'](_0x4e540a){this['_depthStat'+'e']['test']=_0x4e540a;}get['depthTest'](){return this['_depthStat'+'e']['test'];}set['depthFunc'](_0x418d16){this['_depthStat'+'e']['func']=_0x418d16;}get['depthFunc'](){return this['_depthStat'+'e']['func'];}set['depthWrite'](_0x53bd43){this['_depthStat'+'e']['write']=_0x53bd43;}get['depthWrite'](){return this['_depthStat'+'e']['write'];}['copy'](_0x2defa0){var _0x250e39,_0x36fd23;this['name']=_0x2defa0['name'],this['alphaTest']=_0x2defa0['alphaTest'],this['alphaToCov'+'erage']=_0x2defa0['alphaToCov'+'erage'],this['_blendStat'+'e']['copy'](_0x2defa0['_blendStat'+'e']),this['_depthStat'+'e']['copy'](_0x2defa0['_depthStat'+'e']),this['cull']=_0x2defa0['cull'],this['stencilFro'+'nt']=(_0x250e39=_0x2defa0['stencilFro'+'nt'])==null?void(0x935+-0x1c01+0x12cc):_0x250e39['clone'](),_0x2defa0['stencilBac'+'k']&&(this['stencilBac'+'k']=_0x2defa0['stencilFro'+'nt']===_0x2defa0['stencilBac'+'k']?this['stencilFro'+'nt']:_0x2defa0['stencilBac'+'k']['clone']()),this['clearParam'+'eters']();for(const _0x555860 in _0x2defa0['parameters'])_0x2defa0['parameters']['hasOwnProp'+'erty'](_0x555860)&&this['_setParame'+'terSimple'](_0x555860,_0x2defa0['parameters'][_0x555860]['data']);return this['defines']['clear'](),_0x2defa0['defines']['forEach']((_0x218221,_0x45867e)=>this['defines']['set'](_0x45867e,_0x218221)),this['_shaderChu'+'nks']=_0x2defa0['hasShaderC'+'hunks']?new Ce():null,(_0x36fd23=this['_shaderChu'+'nks'])==null||_0x36fd23['copy'](_0x2defa0['_shaderChu'+'nks']),this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['_updateMes'+'hInstanceK'+'eys'](){const _0x119470=this['meshInstan'+'ces'];for(let _0x10907f=0x26*0x65+0x6b9+0x11*-0x147;_0x10907f<_0x119470['length'];_0x10907f++)_0x119470[_0x10907f]['updateKey']();}['updateUnif'+'orms'](_0x393d85,_0x2888aa){this['_dirtyShad'+'er']&&this['clearVaria'+'nts']();}['getShaderV'+'ariant'](_0x18f297){M['assert'](!(-0x266f+0x3*-0x169+0x3*0xe39),'Not\x20implem'+'ented');}['update'](){var _0x4d2188,_0x30837b;if(Object['keys'](this['_oldChunks'])['length']>0x12*-0xe8+-0x1*-0x42e+0x1*0xc22){for(const [_0x407ebd,_0x2afda5]of Object['entries'](this['_oldChunks']))this['shaderChun'+'ks']['glsl']['set'](_0x407ebd,_0x2afda5),delete this['_oldChunks'][_0x407ebd];}(this['_definesDi'+'rty']||(_0x4d2188=this['_shaderChu'+'nks'])!=null&&_0x4d2188['isDirty']())&&(this['_definesDi'+'rty']=!(0x1ab4*0x1+0x530*0x4+0xfd1*-0x3),(_0x30837b=this['_shaderChu'+'nks'])==null||_0x30837b['resetDirty'](),this['clearVaria'+'nts']()),this['dirty']=!(-0x211c+0xa6f+0xd7*0x1b);}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['clearVaria'+'nts'](){this['variants']['clear']();const _0x31b14c=this['meshInstan'+'ces'],_0x27a7c1=_0x31b14c['length'];for(let _0x20283a=-0x10a2*0x2+0x1922+0x3*0x2b6;_0x20283a<_0x27a7c1;_0x20283a++)_0x31b14c[_0x20283a]['clearShade'+'rs']();}['getParamet'+'er'](_0x4883c5){return this['parameters'][_0x4883c5];}['_setParame'+'terSimple'](_0x1cd036,_0x3edd4a){M['call'](()=>{_0x3edd4a===void(-0x1*-0xb35+-0x609+-0x52c)&&M['warnOnce']('Material#s'+'etParamete'+'r:\x20Attempt'+'ing\x20to\x20set'+'\x20undefined'+'\x20data\x20for\x20'+'parameter\x20'+'\x22'+_0x1cd036+('\x22,\x20this\x20is'+'\x20likely\x20no'+'t\x20expected'+'.'),this);});const _0x198d53=this['parameters'][_0x1cd036];_0x198d53?_0x198d53['data']=_0x3edd4a:this['parameters'][_0x1cd036]={'scopeId':null,'data':_0x3edd4a};}['setParamet'+'er'](_0x4f8df5,_0x3426b9){if(_0x3426b9===void(0x1780+-0x596*-0x1+0xe8b*-0x2)&&typeof _0x4f8df5=='object'){const _0x236bb7=_0x4f8df5;if(_0x236bb7['length']){for(let _0x33a5fb=-0x1a70+-0xb5*-0x17+0xa2d;_0x33a5fb<_0x236bb7['length'];_0x33a5fb++)this['setParamet'+'er'](_0x236bb7[_0x33a5fb]);return;}_0x4f8df5=_0x236bb7['name'],_0x3426b9=_0x236bb7['value'];}this['_setParame'+'terSimple'](_0x4f8df5,_0x3426b9);}['deletePara'+'meter'](_0x4e4049){this['parameters'][_0x4e4049]&&delete this['parameters'][_0x4e4049];}['setParamet'+'ers'](_0x4d85cd,_0x1901a1){const _0x443f96=this['parameters'];_0x1901a1===void(0x1445+0x1*0x8d3+-0x1d18)&&(_0x1901a1=_0x443f96);for(const _0x17ccbb in _0x1901a1){const _0x6ff620=_0x443f96[_0x17ccbb];_0x6ff620&&(_0x6ff620['scopeId']||(_0x6ff620['scopeId']=_0x4d85cd['scope']['resolve'](_0x17ccbb)),_0x6ff620['scopeId']['setValue'](_0x6ff620['data']));}}['setDefine'](_0x4fcb57,_0x36b7bd){let _0x22cb63=!(0x142*-0x17+0xc41*-0x3+0x41b2);const {defines:_0x3ad645}=this;_0x36b7bd!==void(0xc45+0x19*0x115+-0x2752)&&_0x36b7bd!==!(0x1384+-0x2487+0x1104)?(_0x22cb63=!_0x3ad645['has'](_0x4fcb57)||_0x3ad645['get'](_0x4fcb57)!==_0x36b7bd,_0x3ad645['set'](_0x4fcb57,_0x36b7bd)):(_0x22cb63=_0x3ad645['has'](_0x4fcb57),_0x3ad645['delete'](_0x4fcb57)),this['_definesDi'+'rty']||(this['_definesDi'+'rty']=_0x22cb63);}['getDefine'](_0x2ae40d){return this['defines']['has'](_0x2ae40d);}['destroy'](){this['variants']['clear']();for(let _0x25e07f=0x1*-0x1ccc+0x1*0xcc1+0x100b;_0x25e07f<this['meshInstan'+'ces']['length'];_0x25e07f++){const _0x4f528d=this['meshInstan'+'ces'][_0x25e07f];if(_0x4f528d['clearShade'+'rs'](),_0x4f528d['_material']=null,_0x4f528d['mesh']){const _0xb8df85=cl(_0x4f528d['mesh']['device']);this!==_0xb8df85&&(_0x4f528d['material']=_0xb8df85);}else M['warn']('pc.Materia'+'l:\x20MeshIns'+'tance.mesh'+'\x20is\x20null,\x20'+'default\x20ma'+'terial\x20can'+'not\x20be\x20ass'+'igned\x20to\x20t'+'he\x20MeshIns'+'tance');}this['meshInstan'+'ces']['length']=-0xc91+0x61f+0x672;}['addMeshIns'+'tanceRef'](_0x2b16a7){this['meshInstan'+'ces']['push'](_0x2b16a7);}['removeMesh'+'InstanceRe'+'f'](_0x7fb4d5){const _0x35a295=this['meshInstan'+'ces'],_0x39c4cc=_0x35a295['indexOf'](_0x7fb4d5);_0x39c4cc!==-(-0x1816+-0xc2f*0x1+0x1*0x2446)&&_0x35a295['splice'](_0x39c4cc,-0x15da+0x8*-0x437+-0x15b*-0x29);}}class Ns{static['update'](_0x20b047,_0x1437df,_0x585c19,_0x1308a3,_0x4dcc3a,_0x200eaf,_0x5bb6f1){Ns['updateShar'+'edOptions'](_0x20b047,_0x1437df,_0x585c19,_0x4dcc3a,_0x200eaf),Ns['updateMate'+'rialOption'+'s'](_0x20b047,_0x1437df),Ns['updateEnvO'+'ptions'](_0x20b047,_0x1437df,_0x585c19,_0x1308a3),Ns['updateLigh'+'tingOption'+'s'](_0x20b047,_0x1437df,_0x585c19,_0x4dcc3a,_0x5bb6f1);}static['updateShar'+'edOptions'](_0xf6e218,_0x3db4d7,_0x13a45e,_0x5e29b9,_0x1ed130){_0xf6e218['shaderChun'+'ks']=_0x3db4d7['shaderChun'+'ks'],_0xf6e218['pass']=_0x1ed130,_0xf6e218['alphaTest']=_0x3db4d7['alphaTest']>0x27*-0xe+0x87a+0xe8*-0x7,_0xf6e218['blendType']=_0x3db4d7['blendType'],_0xf6e218['screenSpac'+'e']=_0x5e29b9&&(_0x5e29b9&Xh)!==0xb1*0x1c+0x2528+-0x3884,_0xf6e218['skin']=_0x5e29b9&&(_0x5e29b9&ko)!==0xe*0x1b+-0x276+0xfc,_0xf6e218['useInstanc'+'ing']=_0x5e29b9&&(_0x5e29b9&Uo)!==0x13c*-0xc+0x1*-0x4e9+-0x1cb*-0xb,_0xf6e218['useMorphPo'+'sition']=_0x5e29b9&&(_0x5e29b9&Bo)!==-0x2231+0x523*-0x1+0x2754,_0xf6e218['useMorphNo'+'rmal']=_0x5e29b9&&(_0x5e29b9&zo)!==0x1bc4+-0x1ddd+-0x219*-0x1,_0xf6e218['useMorphTe'+'xtureBased'+'Int']=_0x5e29b9&&(_0x5e29b9&Vo)!==-0x1f*-0xeb+0x2203*0x1+-0x1f3c*0x2,_0xf6e218['hasTangent'+'s']=_0x5e29b9&&(_0x5e29b9&Cm)!==0x1810+-0x1831+0x21,_0xf6e218['nineSliced'+'Mode']=_0x3db4d7['nineSliced'+'Mode']||ei,_0x3db4d7['useLightin'+'g']&&_0x13a45e['clusteredL'+'ightingEna'+'bled']?(_0xf6e218['clusteredL'+'ightingEna'+'bled']=!(-0x122a+-0x1c08+0x1b6*0x1b),_0xf6e218['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x13a45e['lighting']['cookiesEna'+'bled'],_0xf6e218['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x13a45e['lighting']['shadowsEna'+'bled'],_0xf6e218['clusteredL'+'ightingSha'+'dowType']=_0x13a45e['lighting']['shadowType'],_0xf6e218['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x13a45e['lighting']['areaLights'+'Enabled']):(_0xf6e218['clusteredL'+'ightingEna'+'bled']=!(0x5*-0x7cb+0x2*-0xa7+-0xa*-0x407),_0xf6e218['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0x2a*-0x97+-0x1e7b+0x5b6),_0xf6e218['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0xc55+-0x980*0x4+-0xd4*-0x1f),_0xf6e218['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(0x12c8+0x540+-0x1807));}static['updateMate'+'rialOption'+'s'](_0x44328b,_0x25aa7f){_0x44328b['separateAm'+'bient']=!(0x819+0x1ce5+0x11*-0x22d),_0x44328b['pixelSnap']=_0x25aa7f['pixelSnap'],_0x44328b['ambientSH']=_0x25aa7f['ambientSH'],_0x44328b['twoSidedLi'+'ghting']=_0x25aa7f['twoSidedLi'+'ghting'],_0x44328b['occludeDir'+'ect']=_0x25aa7f['occludeDir'+'ect'],_0x44328b['occludeSpe'+'cular']=_0x25aa7f['occludeSpe'+'cular'],_0x44328b['occludeSpe'+'cularFloat']=_0x25aa7f['occludeSpe'+'cularInten'+'sity']!==-0x6f3*0x1+-0x8fe+-0xd*-0x13a,_0x44328b['useMsdf']=!(-0x2*0x823+-0x766+-0x17ad*-0x1),_0x44328b['msdfTextAt'+'tribute']=!(0x1199+0x55d+-0x16f5),_0x44328b['alphaToCov'+'erage']=_0x25aa7f['alphaToCov'+'erage'],_0x44328b['opacityFad'+'esSpecular']=_0x25aa7f['opacityFad'+'esSpecular'],_0x44328b['opacityDit'+'her']=_0x25aa7f['opacityDit'+'her'],_0x44328b['cubeMapPro'+'jection']=xm,_0x44328b['useSpecula'+'r']=_0x25aa7f['hasSpecula'+'r'],_0x44328b['useSpecula'+'rityFactor']=_0x25aa7f['hasSpecula'+'rityFactor'],_0x44328b['enableGGXS'+'pecular']=_0x25aa7f['ggxSpecula'+'r'],_0x44328b['fresnelMod'+'el']=_0x25aa7f['fresnelMod'+'el'],_0x44328b['useRefract'+'ion']=_0x25aa7f['hasRefract'+'ion'],_0x44328b['useClearCo'+'at']=_0x25aa7f['hasClearCo'+'at'],_0x44328b['useSheen']=_0x25aa7f['hasSheen'],_0x44328b['useIridesc'+'ence']=_0x25aa7f['hasIrrides'+'cence'],_0x44328b['useMetalne'+'ss']=_0x25aa7f['hasMetalne'+'ss'],_0x44328b['useDynamic'+'Refraction']=_0x25aa7f['dynamicRef'+'raction'],_0x44328b['dispersion']=_0x25aa7f['dispersion']>-0x23c9*0x1+-0x503*-0x1+0x1ec6,_0x44328b['vertexColo'+'rs']=!(0xcab+0x1202+-0x97*0x34),_0x44328b['lightMapEn'+'abled']=_0x25aa7f['hasLightin'+'g'],_0x44328b['dirLightMa'+'pEnabled']=_0x25aa7f['dirLightMa'+'p'],_0x44328b['useHeights']=_0x25aa7f['hasHeights'],_0x44328b['useNormals']=_0x25aa7f['hasNormals'],_0x44328b['useClearCo'+'atNormals']=_0x25aa7f['hasClearCo'+'atNormals'],_0x44328b['useAo']=_0x25aa7f['hasAo'],_0x44328b['diffuseMap'+'Enabled']=_0x25aa7f['hasDiffuse'+'Map'];}static['updateEnvO'+'ptions'](_0x8d0e1b,_0xeddea1,_0x494f72,_0x48e513){_0x8d0e1b['fog']=_0xeddea1['useFog']?_0x48e513['fog']:On,_0x8d0e1b['gamma']=_0x48e513['shaderOutp'+'utGamma'],_0x8d0e1b['toneMap']=_0xeddea1['useTonemap']?_0x48e513['toneMappin'+'g']:uy,_0xeddea1['useSkybox']&&_0x494f72['envAtlas']&&_0x494f72['skybox']?(_0x8d0e1b['reflection'+'Source']=Hh,_0x8d0e1b['reflection'+'Encoding']=_0x494f72['envAtlas']['encoding'],_0x8d0e1b['reflection'+'CubemapEnc'+'oding']=_0x494f72['skybox']['encoding']):_0xeddea1['useSkybox']&&_0x494f72['envAtlas']?(_0x8d0e1b['reflection'+'Source']=Gh,_0x8d0e1b['reflection'+'Encoding']=_0x494f72['envAtlas']['encoding']):_0xeddea1['useSkybox']&&_0x494f72['skybox']?(_0x8d0e1b['reflection'+'Source']=Wh,_0x8d0e1b['reflection'+'Encoding']=_0x494f72['skybox']['encoding']):(_0x8d0e1b['reflection'+'Source']=nr,_0x8d0e1b['reflection'+'Encoding']=null),_0xeddea1['ambientSH']?(_0x8d0e1b['ambientSou'+'rce']=wm,_0x8d0e1b['ambientEnc'+'oding']=null):_0x8d0e1b['reflection'+'Source']!==nr&&_0x494f72['envAtlas']?(_0x8d0e1b['ambientSou'+'rce']=Em,_0x8d0e1b['ambientEnc'+'oding']=_0x494f72['envAtlas']['encoding']):(_0x8d0e1b['ambientSou'+'rce']=Am,_0x8d0e1b['ambientEnc'+'oding']=null);const _0x1d89da=_0x8d0e1b['reflection'+'Source']!==nr;_0x8d0e1b['skyboxInte'+'nsity']=_0x1d89da,_0x8d0e1b['useCubeMap'+'Rotation']=_0x1d89da&&_0x494f72['_skyboxRot'+'ationShade'+'rInclude'];}static['updateLigh'+'tingOption'+'s'](_0x58ff11,_0x48c52c,_0x52a720,_0x3a8778,_0x54e136){if(_0x58ff11['lightMapWi'+'thoutAmbie'+'nt']=!(-0x3*0x349+0x249f+-0x1ac3),_0x48c52c['useLightin'+'g']){const _0xd3bc49=[],_0x12a512=_0x3a8778?_0x3a8778>>0x80c+0x1e*-0xd6+0x1118:ds;_0x58ff11['lightMaskD'+'ynamic']=!!(_0x12a512&ds),_0x58ff11['lightMapWi'+'thoutAmbie'+'nt']=!(0x162c+0x1*0xb6f+-0x17*0x176),_0x54e136&&(Ns['collectLig'+'hts'](ve,_0x54e136[ve],_0xd3bc49,_0x12a512),_0x52a720['clusteredL'+'ightingEna'+'bled']||(Ns['collectLig'+'hts'](Ye,_0x54e136[Ye],_0xd3bc49,_0x12a512),Ns['collectLig'+'hts'](Ke,_0x54e136[Ke],_0xd3bc49,_0x12a512))),_0x58ff11['lights']=_0xd3bc49;}else _0x58ff11['lights']=[];(_0x58ff11['lights']['length']===-0x2*0x12aa+-0xad*-0x1a+0x13c2&&!_0x52a720['clusteredL'+'ightingEna'+'bled']||(_0x3a8778&$h)!==0x36*-0x7e+-0x2477+0x3f0b)&&(_0x58ff11['noShadow']=!(-0xfc3+0x25b5+-0x35*0x6a));}static['collectLig'+'hts'](_0x19dd5e,_0x68d3e0,_0x475a94,_0x261bfe){for(let _0xb2363f=0x2138+-0x243c+0x304;_0xb2363f<_0x68d3e0['length'];_0xb2363f++){const _0x3cb820=_0x68d3e0[_0xb2363f];_0x3cb820['enabled']&&_0x3cb820['mask']&_0x261bfe&&_0x475a94['push'](_0x3cb820);}}}const s_=(_0x596c5a,_0x44f756)=>{if(_0x596c5a['length']!==_0x44f756['length'])return!(-0x1*0x83f+-0x1668+-0x8*-0x3d5);for(let _0x16c2c9=0x18a*-0x14+-0x1*0x8cb+0x2793;_0x16c2c9<_0x596c5a['length'];++_0x16c2c9)if(_0x596c5a[_0x16c2c9]!==_0x44f756[_0x16c2c9])return!(-0x693+0x1acb+-0x1437);return!(-0x17b9+-0x1b13+0x32cc);},AE=_0x2e5865=>_0x2e5865['r']!==0x1874+0x78c+-0x1fff||_0x2e5865['g']!==-0x1*-0xeb9+-0x6*0x52c+0x8*0x20a||_0x2e5865['b']!==-0x792+0x1*-0x258b+0x2d1e,bE=_0x360be3=>_0x360be3['r']!==-0x1e20*-0x1+0xae9+-0x2909*0x1||_0x360be3['g']!==-0x689+0x13*0x113+-0xde0||_0x360be3['b']!==0x3*-0x5b5+0x1*-0xc2+0x11e1;class CE{constructor(){this['_mapXForms']=null;}['updateMinR'+'ef'](_0x4a6afb,_0x320fb,_0x3e58cb,_0x42b38e,_0x79849f,_0x11d611){this['_updateSha'+'redOptions'](_0x4a6afb,_0x320fb,_0x3e58cb,_0x42b38e,_0x79849f),this['_updateMin'+'Options'](_0x4a6afb,_0x3e58cb,_0x79849f),this['_updateUVO'+'ptions'](_0x4a6afb,_0x3e58cb,_0x42b38e,!(-0x4*-0x2e5+-0x1f3a+0x13a6));}['updateRef'](_0x4be3e2,_0x5a0686,_0x19a3aa,_0x58fba8,_0x180083,_0x5d737b,_0x49e131){this['_updateSha'+'redOptions'](_0x4be3e2,_0x5a0686,_0x58fba8,_0x180083,_0x5d737b),this['_updateEnv'+'Options'](_0x4be3e2,_0x58fba8,_0x5a0686,_0x19a3aa),this['_updateMat'+'erialOptio'+'ns'](_0x4be3e2,_0x58fba8,_0x5a0686),_0x4be3e2['litOptions']['hasTangent'+'s']=_0x180083&&(_0x180083&Cm)!==0x124c+0x1a50+0x8ec*-0x5,this['_updateLig'+'htOptions'](_0x4be3e2,_0x5a0686,_0x58fba8,_0x180083,_0x49e131),this['_updateUVO'+'ptions'](_0x4be3e2,_0x58fba8,_0x180083,!(0x12a*0x1f+-0x1351+-0x10c4),_0x19a3aa);}['_updateSha'+'redOptions'](_0x47495d,_0x3a824a,_0x5ad912,_0x253743,_0x14709e){_0x47495d['forceUv1']=_0x5ad912['forceUv1'],_0x5ad912['userAttrib'+'utes']&&(_0x47495d['litOptions']['userAttrib'+'utes']=Object['fromEntrie'+'s'](_0x5ad912['userAttrib'+'utes']['entries']())),_0x47495d['litOptions']['shaderChun'+'ks']=_0x5ad912['shaderChun'+'ks'],_0x47495d['litOptions']['pass']=_0x14709e,_0x47495d['litOptions']['alphaTest']=_0x5ad912['alphaTest']>0x1b2+0x1f4+-0x1*0x3a6,_0x47495d['litOptions']['blendType']=_0x5ad912['blendType'],_0x47495d['litOptions']['screenSpac'+'e']=_0x253743&&(_0x253743&Xh)!==0xe5f+-0x185c+0x9fd,_0x47495d['litOptions']['skin']=_0x253743&&(_0x253743&ko)!==0x234a+0x1*-0x49d+-0x1ead*0x1,_0x47495d['litOptions']['batch']=_0x253743&&(_0x253743&mh)!==-0x11a6+0x2*0x317+0x2*0x5bc,_0x47495d['litOptions']['useInstanc'+'ing']=_0x253743&&(_0x253743&Uo)!==0x7a*0x17+-0x129*-0x1f+-0x2eed,_0x47495d['litOptions']['useMorphPo'+'sition']=_0x253743&&(_0x253743&Bo)!==0x1db8+-0x1*0x1e6b+-0xb3*-0x1,_0x47495d['litOptions']['useMorphNo'+'rmal']=_0x253743&&(_0x253743&zo)!==0x1406+-0x1753+0x34d,_0x47495d['litOptions']['useMorphTe'+'xtureBased'+'Int']=_0x253743&&(_0x253743&Vo)!==0x1a63+-0x32b+-0x1738*0x1,_0x47495d['litOptions']['nineSliced'+'Mode']=_0x5ad912['nineSliced'+'Mode']||-0xfc3*-0x1+-0x25d1*-0x1+0x3*-0x11dc,_0x3a824a['clusteredL'+'ightingEna'+'bled']&&_0x5ad912['useLightin'+'g']?(_0x47495d['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0x11f3+-0x12d9+-0x9d*-0x3c),_0x47495d['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x3a824a['lighting']['cookiesEna'+'bled'],_0x47495d['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x3a824a['lighting']['shadowsEna'+'bled'],_0x47495d['litOptions']['clusteredL'+'ightingSha'+'dowType']=_0x3a824a['lighting']['shadowType'],_0x47495d['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x3a824a['lighting']['areaLights'+'Enabled']):(_0x47495d['litOptions']['clusteredL'+'ightingEna'+'bled']=!(0x2588+0x387*0x4+-0x33a3),_0x47495d['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(0x2005+-0x7b*0xf+-0x49*0x57),_0x47495d['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(-0xeab+0x11*-0x20e+0x2*0x18cd),_0x47495d['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(0x1d9c+0x291+-0x202c));}['_updateUVO'+'ptions'](_0x423f7e,_0x3bd809,_0x5d0bf1,_0x305ada,_0x4e656e){let _0x3fd8ac=!(-0x8a7+0x1*-0x326+0xbce),_0x278be2=!(-0x2277*-0x1+0x1e79+-0x40ef),_0x481dc5=!(0x1463+-0x1*-0x1819+0x1*-0x2c7b);_0x5d0bf1&&(_0x3fd8ac=(_0x5d0bf1&bm)!==-0x1a08+-0x1ad5+-0x3*-0x119f,_0x278be2=(_0x5d0bf1&Sy)!==-0x142+-0x2506+0x2648,_0x481dc5=(_0x5d0bf1&yy)!==-0x1*-0x1534+-0x486+-0x10ae),_0x423f7e['litOptions']['vertexColo'+'rs']=!(-0x253e+0x2*0xd5a+0xa8b),this['_mapXForms']=[];const _0x570826={};for(const _0x565ea9 in cn)this['_updateTex'+'Options'](_0x423f7e,_0x3bd809,_0x565ea9,_0x3fd8ac,_0x278be2,_0x481dc5,_0x305ada,_0x570826);this['_mapXForms']=null,_0x423f7e['litOptions']['ssao']=_0x4e656e==null?void(0xeb6+-0x4ae*-0x2+-0x1812):_0x4e656e['ssaoEnable'+'d'],_0x423f7e['useAO']=_0x423f7e['litOptions']['ssao'],_0x423f7e['litOptions']['lightMapEn'+'abled']=_0x423f7e['lightMap'],_0x423f7e['litOptions']['dirLightMa'+'pEnabled']=_0x423f7e['dirLightMa'+'p'],_0x423f7e['litOptions']['useHeights']=_0x423f7e['heightMap'],_0x423f7e['litOptions']['useNormals']=_0x423f7e['normalMap'],_0x423f7e['litOptions']['useClearCo'+'atNormals']=_0x423f7e['clearCoatN'+'ormalMap'],_0x423f7e['litOptions']['useAo']=_0x423f7e['aoMap']||_0x423f7e['aoVertexCo'+'lor']||_0x423f7e['litOptions']['ssao'],_0x423f7e['litOptions']['diffuseMap'+'Enabled']=_0x423f7e['diffuseMap'];}['_updateTex'+'Options'](_0x177a2a,_0x505d57,_0x4040c2,_0x46572c,_0x3ad76b,_0x46e274,_0x5da4fe,_0x54134b){const _0x1354ef=_0x4040c2==='opacity';if(!_0x5da4fe||_0x1354ef){const _0x57434d=_0x4040c2+'Map',_0x570cf1=_0x4040c2+('VertexColo'+'r'),_0xd2d49e=_0x4040c2+('VertexColo'+'rChannel'),_0x3f0f31=_0x57434d+'Channel',_0x4266fc=_0x57434d+'Transform',_0x40661f=_0x57434d+'Uv',_0x3ec425=_0x57434d+'Identifier';if(_0x4040c2!=='light'&&(_0x177a2a[_0x57434d]=!(0x1*0x833+0x172c+-0x1f5e),_0x177a2a[_0x3ec425]=void(-0x24fc+-0x4*0x49c+0x1bb6*0x2),_0x177a2a[_0x3f0f31]='',_0x177a2a[_0x4266fc]=0xf01+0x1039*-0x1+0x138,_0x177a2a[_0x40661f]=0x4e*-0x67+0x11a*-0x11+0x321c),_0x177a2a[_0x570cf1]=!(0x1*-0x187f+0x1*-0x261a+0x3e9a),_0x177a2a[_0xd2d49e]='',_0x1354ef&&_0x505d57['blendType']===ys&&_0x505d57['alphaTest']===0x1323*-0x1+-0x1*-0x23e4+-0x10c1*0x1&&!_0x505d57['alphaToCov'+'erage']&&_0x505d57['opacityDit'+'her']===ra)return;if(_0x4040c2!=='height'&&_0x505d57[_0x570cf1]&&_0x46e274&&(_0x177a2a[_0x570cf1]=_0x505d57[_0x570cf1],_0x177a2a[_0xd2d49e]=_0x505d57[_0xd2d49e],_0x177a2a['litOptions']['vertexColo'+'rs']=!(0xbb4*0x1+0x12*-0x161+-0x2*-0x68f)),_0x505d57[_0x57434d]){let _0x4f04dd=!(0x76e*0x1+-0x5*0x48d+-0x1*-0xf53);if(_0x505d57[_0x40661f]===-0x1*0x5b3+-0x1*-0x2113+0x920*-0x3&&!_0x46572c&&(_0x4f04dd=!(-0x1bee+-0x3f*0x50+0x2f9f)),_0x505d57[_0x40661f]===-0x1*-0x1ab9+-0x4d8+-0x15e0&&!_0x3ad76b&&(_0x4f04dd=!(0xb47+-0x2*0x35e+0x2*-0x245)),_0x4f04dd){const _0xfd0830=_0x505d57[_0x57434d]['id'];let _0x63a331=_0x54134b[_0xfd0830];_0x63a331===void(-0x13bc+0x14f2+-0x1*0x136)&&(_0x54134b[_0xfd0830]=_0x4040c2,_0x63a331=_0x4040c2),_0x177a2a[_0x57434d]=!!_0x505d57[_0x57434d],_0x177a2a[_0x3ec425]=_0x63a331,_0x177a2a[_0x4266fc]=this['_getMapTra'+'nsformID'](_0x505d57['getUniform'](_0x4266fc),_0x505d57[_0x40661f]),_0x177a2a[_0x3f0f31]=_0x505d57[_0x3f0f31],_0x177a2a[_0x40661f]=_0x505d57[_0x40661f];}}}}['_updateMin'+'Options'](_0x10529e,_0x80d413,_0x131032){const _0x3cfba6=_0x131032===ll;_0x10529e['litOptions']['opacitySha'+'dowDither']=_0x3cfba6?_0x80d413['opacityDit'+'her']:_0x80d413['opacitySha'+'dowDither'],_0x10529e['litOptions']['linearDept'+'h']=_0x3cfba6,_0x10529e['litOptions']['lights']=[];}['_updateMat'+'erialOptio'+'ns'](_0xe5b7dc,_0x356b44,_0x2cc5d4){var _0x55d8d5,_0x1bede0,_0x2155fd,_0x116edc,_0x31b413,_0x3d0c20;const _0x200eeb=!!(_0x356b44['useMetalne'+'ss']||_0x356b44['specularMa'+'p']||_0x356b44['sphereMap']||_0x356b44['cubeMap']||bE(_0x356b44['specular'])||_0x356b44['specularit'+'yFactor']>-0x22*0xcb+-0xc03+0x26f9&&_0x356b44['useMetalne'+'ss']||_0x356b44['enableGGXS'+'pecular']||_0x356b44['clearCoat']>0x3*-0x2e+0x43b*-0x4+0x1176),_0x7368db=!_0x356b44['useMetalne'+'ss']||_0x356b44['useMetalne'+'ssSpecular'+'Color'],_0x336ffa=_0x200eeb&&(_0x356b44['specularTi'+'nt']||!_0x356b44['specularMa'+'p']&&!_0x356b44['specularVe'+'rtexColor'])&&AE(_0x356b44['specular']),_0x30c7f1=_0x200eeb&&_0x356b44['useMetalne'+'ssSpecular'+'Color']&&(_0x356b44['specularit'+'yFactorTin'+'t']||_0x356b44['specularit'+'yFactor']<0x25d7+-0x151*0x4+-0x2092&&!_0x356b44['specularit'+'yFactorMap']),_0x3a7f82=_0xa8be29=>_0xa8be29?_0xa8be29['format']===Yo||_0xa8be29['type']===Zu:!(-0xf4+0xd*0x26d+0xf4a*-0x2),_0x4cc61a=(_0x20c69d,_0x174f87)=>Math['abs'](_0x20c69d-_0x174f87)<-0x495+-0x1e86+0x231b+0.0001;_0xe5b7dc['specularTi'+'nt']=_0x336ffa,_0xe5b7dc['specularit'+'yFactorTin'+'t']=_0x30c7f1,_0xe5b7dc['metalnessT'+'int']=_0x356b44['useMetalne'+'ss']&&_0x356b44['metalness']<-0x61*-0x52+-0x11*0xe5+0x5*-0x32c,_0xe5b7dc['glossTint']=!(-0x45*0x4f+-0x20c9+0x3614),_0xe5b7dc['diffuseEnc'+'oding']=(_0x55d8d5=_0x356b44['diffuseMap'])==null?void(-0x9df+-0x16*0x155+0x1*0x272d):_0x55d8d5['encoding'],_0xe5b7dc['diffuseDet'+'ailEncodin'+'g']=(_0x1bede0=_0x356b44['diffuseDet'+'ailMap'])==null?void(0x372+-0x2*-0xc83+-0x8*0x38f):_0x1bede0['encoding'],_0xe5b7dc['emissiveEn'+'coding']=(_0x2155fd=_0x356b44['emissiveMa'+'p'])==null?void(0x1897+0x1859+-0x30f0):_0x2155fd['encoding'],_0xe5b7dc['lightMapEn'+'coding']=(_0x116edc=_0x356b44['lightMap'])==null?void(0x5ec*-0x5+0x2488+-0x6ec):_0x116edc['encoding'],_0xe5b7dc['packedNorm'+'al']=_0x3a7f82(_0x356b44['normalMap']),_0xe5b7dc['refraction'+'Tint']=_0x4cc61a(_0x356b44['refraction'],-0x1f28+0xffb+0xf2e),_0xe5b7dc['refraction'+'IndexTint']=_0x4cc61a(_0x356b44['refraction'+'Index'],(-0x265f*0x1+-0x1*-0x109+0x1*0x2557)/(-0x43a*-0x7+0xfdc+-0x2d71+0.5)),_0xe5b7dc['thicknessT'+'int']=_0x356b44['useDynamic'+'Refraction']&&_0x356b44['thickness']!==-0x612+0x2409+0x24e*-0xd,_0xe5b7dc['specularEn'+'coding']=(_0x31b413=_0x356b44['specularMa'+'p'])==null?void(0x1*-0x15e6+-0x22d0+-0x77*-0x7a):_0x31b413['encoding'],_0xe5b7dc['sheenEncod'+'ing']=(_0x3d0c20=_0x356b44['sheenMap'])==null?void(-0x1c29+0x1831+0x3f8):_0x3d0c20['encoding'],_0xe5b7dc['aoMapUv']=_0x356b44['aoUvSet'],_0xe5b7dc['aoDetail']=!!_0x356b44['aoDetailMa'+'p'],_0xe5b7dc['diffuseDet'+'ail']=!!_0x356b44['diffuseDet'+'ailMap'],_0xe5b7dc['normalDeta'+'il']=!!_0x356b44['normalMap'],_0xe5b7dc['normalDeta'+'ilPackedNo'+'rmal']=_0x3a7f82(_0x356b44['normalDeta'+'ilMap']),_0xe5b7dc['diffuseDet'+'ailMode']=_0x356b44['diffuseDet'+'ailMode'],_0xe5b7dc['aoDetailMo'+'de']=_0x356b44['aoDetailMo'+'de'],_0xe5b7dc['clearCoatG'+'loss']=!!_0x356b44['clearCoatG'+'loss'],_0xe5b7dc['clearCoatP'+'ackedNorma'+'l']=_0x3a7f82(_0x356b44['clearCoatN'+'ormalMap']),_0xe5b7dc['iorTint']=_0x4cc61a(_0x356b44['refraction'+'Index'],(0x2*-0xac4+-0x18*0x157+0x35b1)/(0x1*0x1fee+-0x1*0x16db+-0x9*0x102+0.5)),_0x2cc5d4['forcePassT'+'hroughSpec'+'ular']&&(_0xe5b7dc['specularEn'+'coding']='linear',_0xe5b7dc['sheenEncod'+'ing']='linear'),_0xe5b7dc['iridescenc'+'eTint']=_0x356b44['iridescenc'+'e']!==-0x656*-0x5+0x1*0x233a+-0x42e7*0x1,_0xe5b7dc['glossInver'+'t']=_0x356b44['glossInver'+'t'],_0xe5b7dc['sheenGloss'+'Invert']=_0x356b44['sheenGloss'+'Invert'],_0xe5b7dc['clearCoatG'+'lossInvert']=_0x356b44['clearCoatG'+'lossInvert'],_0xe5b7dc['useSpecula'+'rColor']=_0x7368db,_0xe5b7dc['litOptions']['separateAm'+'bient']=!(0x682+-0xa20+0x1*0x39f),_0xe5b7dc['litOptions']['pixelSnap']=_0x356b44['pixelSnap'],_0xe5b7dc['litOptions']['ambientSH']=!!_0x356b44['ambientSH'],_0xe5b7dc['litOptions']['twoSidedLi'+'ghting']=_0x356b44['twoSidedLi'+'ghting'],_0xe5b7dc['litOptions']['occludeSpe'+'cular']=_0x356b44['occludeSpe'+'cular'],_0xe5b7dc['litOptions']['occludeSpe'+'cularFloat']=_0x356b44['occludeSpe'+'cularInten'+'sity']!==-0xcea+0x281*0xd+-0x13a2,_0xe5b7dc['litOptions']['useMsdf']=!!_0x356b44['msdfMap'],_0xe5b7dc['litOptions']['msdfTextAt'+'tribute']=!!_0x356b44['msdfTextAt'+'tribute'],_0xe5b7dc['litOptions']['alphaToCov'+'erage']=_0x356b44['alphaToCov'+'erage'],_0xe5b7dc['litOptions']['opacityFad'+'esSpecular']=_0x356b44['opacityFad'+'esSpecular'],_0xe5b7dc['litOptions']['opacityDit'+'her']=_0x356b44['opacityDit'+'her'],_0xe5b7dc['litOptions']['cubeMapPro'+'jection']=_0x356b44['cubeMapPro'+'jection'],_0xe5b7dc['litOptions']['occludeDir'+'ect']=_0x356b44['occludeDir'+'ect'],_0xe5b7dc['litOptions']['useSpecula'+'r']=_0x200eeb,_0xe5b7dc['litOptions']['useSpecula'+'rityFactor']=(_0x30c7f1||!!_0x356b44['specularit'+'yFactorMap'])&&_0x356b44['useMetalne'+'ssSpecular'+'Color'],_0xe5b7dc['litOptions']['enableGGXS'+'pecular']=_0x356b44['enableGGXS'+'pecular'],_0xe5b7dc['litOptions']['fresnelMod'+'el']=_0x356b44['fresnelMod'+'el'],_0xe5b7dc['litOptions']['useRefract'+'ion']=(_0x356b44['refraction']||!!_0x356b44['refraction'+'Map'])&&(_0x356b44['useDynamic'+'Refraction']||_0xe5b7dc['litOptions']['reflection'+'Source']!==nr),_0xe5b7dc['litOptions']['useClearCo'+'at']=!!_0x356b44['clearCoat'],_0xe5b7dc['litOptions']['useSheen']=_0x356b44['useSheen'],_0xe5b7dc['litOptions']['useIridesc'+'ence']=_0x356b44['useIridesc'+'ence']&&_0x356b44['iridescenc'+'e']!==0xf4d+0x29+-0x2*0x7bb,_0xe5b7dc['litOptions']['useMetalne'+'ss']=_0x356b44['useMetalne'+'ss'],_0xe5b7dc['litOptions']['useDynamic'+'Refraction']=_0x356b44['useDynamic'+'Refraction'],_0xe5b7dc['litOptions']['dispersion']=_0x356b44['dispersion']>0x13d0+0xe8*0x13+-0x1284*0x2,_0xe5b7dc['litOptions']['shadowCatc'+'her']=_0x356b44['shadowCatc'+'her'];}['_updateEnv'+'Options'](_0x1eca95,_0x26e70e,_0x1d42c2,_0x51bdbe){_0x1eca95['litOptions']['fog']=_0x26e70e['useFog']?_0x51bdbe['fog']:On,_0x1eca95['litOptions']['gamma']=_0x51bdbe['shaderOutp'+'utGamma'],_0x1eca95['litOptions']['toneMap']=_0x26e70e['useTonemap']?_0x51bdbe['toneMappin'+'g']:uy;let _0x4ad349=!(-0x95*0x2+-0x797+0x8c2);if(_0x26e70e['envAtlas']&&_0x26e70e['cubeMap']?(_0x1eca95['litOptions']['reflection'+'Source']=Hh,_0x1eca95['litOptions']['reflection'+'Encoding']=_0x26e70e['envAtlas']['encoding'],_0x1eca95['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x26e70e['cubeMap']['encoding']):_0x26e70e['envAtlas']?(_0x1eca95['litOptions']['reflection'+'Source']=Gh,_0x1eca95['litOptions']['reflection'+'Encoding']=_0x26e70e['envAtlas']['encoding']):_0x26e70e['cubeMap']?(_0x1eca95['litOptions']['reflection'+'Source']=Wh,_0x1eca95['litOptions']['reflection'+'Encoding']=_0x26e70e['cubeMap']['encoding']):_0x26e70e['sphereMap']?(_0x1eca95['litOptions']['reflection'+'Source']=gy,_0x1eca95['litOptions']['reflection'+'Encoding']=_0x26e70e['sphereMap']['encoding']):_0x26e70e['useSkybox']&&_0x1d42c2['envAtlas']&&_0x1d42c2['skybox']?(_0x1eca95['litOptions']['reflection'+'Source']=Hh,_0x1eca95['litOptions']['reflection'+'Encoding']=_0x1d42c2['envAtlas']['encoding'],_0x1eca95['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x1d42c2['skybox']['encoding'],_0x4ad349=!(0x1661+-0x5a7+0x1*-0x10ba)):_0x26e70e['useSkybox']&&_0x1d42c2['envAtlas']?(_0x1eca95['litOptions']['reflection'+'Source']=Gh,_0x1eca95['litOptions']['reflection'+'Encoding']=_0x1d42c2['envAtlas']['encoding'],_0x4ad349=!(0x16d*0x3+0x1235+-0x167c)):_0x26e70e['useSkybox']&&_0x1d42c2['skybox']?(_0x1eca95['litOptions']['reflection'+'Source']=Wh,_0x1eca95['litOptions']['reflection'+'Encoding']=_0x1d42c2['skybox']['encoding'],_0x4ad349=!(-0xd85+0x33d*0x1+0xa48)):(_0x1eca95['litOptions']['reflection'+'Source']=nr,_0x1eca95['litOptions']['reflection'+'Encoding']=null),_0x26e70e['ambientSH'])_0x1eca95['litOptions']['ambientSou'+'rce']=wm,_0x1eca95['litOptions']['ambientEnc'+'oding']=null;else{const _0x49ce74=_0x26e70e['envAtlas']||(_0x26e70e['useSkybox']&&_0x1d42c2['envAtlas']?_0x1d42c2['envAtlas']:null);_0x49ce74&&!_0x26e70e['sphereMap']?(_0x1eca95['litOptions']['ambientSou'+'rce']=Em,_0x1eca95['litOptions']['ambientEnc'+'oding']=_0x49ce74['encoding']):(_0x1eca95['litOptions']['ambientSou'+'rce']=Am,_0x1eca95['litOptions']['ambientEnc'+'oding']=null);}_0x1eca95['litOptions']['skyboxInte'+'nsity']=_0x4ad349,_0x1eca95['litOptions']['useCubeMap'+'Rotation']=_0x4ad349&&_0x1d42c2['_skyboxRot'+'ationShade'+'rInclude'];}['_updateLig'+'htOptions'](_0x47d50c,_0x38535c,_0x5d2762,_0x218eaf,_0x5887e6){if(_0x47d50c['lightMap']=!(0x8ab*-0x1+0x1*0xe4b+-0x59f),_0x47d50c['lightMapCh'+'annel']='',_0x47d50c['lightMapUv']=0x1190+0x18fa+-0x2a8a,_0x47d50c['lightMapTr'+'ansform']=0x11*-0x164+0x1ec8+-0x724,_0x47d50c['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0xf*0x1f3+0x1c*0xbc+0xca*0xb),_0x47d50c['dirLightMa'+'p']=!(-0x1010+-0x1f77+0x2f88),_0x218eaf&&(_0x47d50c['litOptions']['noShadow']=(_0x218eaf&$h)!==0x4dc*0x4+-0x24e6+-0xa*-0x1bf,(_0x218eaf&Pf)!==-0x1296+-0xbed+0x49*0x6b&&(_0x47d50c['lightMapEn'+'coding']=_0x38535c['lightmapPi'+'xelFormat']===Oe?'rgbm':'linear',_0x47d50c['lightMap']=!(0x1a6a+-0x26c7+0xc5d),_0x47d50c['lightMapCh'+'annel']='rgb',_0x47d50c['lightMapUv']=0x7*0x289+0xea7+0x1*-0x2065,_0x47d50c['lightMapTr'+'ansform']=0x439*0x4+0x1120+-0x2*0x1102,_0x47d50c['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!_0x5d2762['lightMap'],(_0x218eaf&vy)!==0x1*-0x2043+0x2299+-0x256&&(_0x47d50c['dirLightMa'+'p']=!(0x58*-0x3b+-0x1239+0x2681)),(_0x218eaf&xy)!==0x2d3*-0xb+-0x23be+-0x1*-0x42cf&&(_0x47d50c['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x29*-0x6+0x14eb+-0x13f4)))),_0x5d2762['useLightin'+'g']){const _0x4a26b3=[],_0x33e2c2=_0x218eaf?_0x218eaf>>0x1947+0x1275+-0x2bac:ds;_0x47d50c['litOptions']['lightMaskD'+'ynamic']=!!(_0x33e2c2&ds),_0x5887e6&&(Ns['collectLig'+'hts'](ve,_0x5887e6[ve],_0x4a26b3,_0x33e2c2),_0x38535c['clusteredL'+'ightingEna'+'bled']||(Ns['collectLig'+'hts'](Ye,_0x5887e6[Ye],_0x4a26b3,_0x33e2c2),Ns['collectLig'+'hts'](Ke,_0x5887e6[Ke],_0x4a26b3,_0x33e2c2))),_0x47d50c['litOptions']['lights']=_0x4a26b3;}else _0x47d50c['litOptions']['lights']=[];_0x47d50c['litOptions']['lights']['length']===-0x11*-0x151+0xb93+0x21f4*-0x1&&!_0x38535c['clusteredL'+'ightingEna'+'bled']&&(_0x47d50c['litOptions']['noShadow']=!(0x1*-0x24f3+0x1*-0x1cd1+0x3d*0x114));}['_getMapTra'+'nsformID'](_0x39856c,_0x30e42e){if(!_0x39856c)return 0x54a*0x4+-0x1dcd+0x8a5;let _0x24510b=this['_mapXForms'][_0x30e42e];_0x24510b||(_0x24510b=[],this['_mapXForms'][_0x30e42e]=_0x24510b);for(let _0x3a1777=0x1f43+0x1c*0xb3+0x5f*-0x89;_0x3a1777<_0x24510b['length'];_0x3a1777++)if(s_(_0x24510b[_0x3a1777][0x13ed*-0x1+0x1f*-0x51+0xb*0x2b4]['value'],_0x39856c[0x1ae7+0x24d9+-0x3fc0]['value'])&&s_(_0x24510b[_0x3a1777][-0x117b+-0x73*-0x1d+0x475*0x1]['value'],_0x39856c[-0x23dc+0x1264+0x1179]['value']))return _0x3a1777+(0x1bf1+0x43*-0x7f+-0x17*-0x3b);return _0x24510b['push'](_0x39856c);}}function it(_0x343f4b,_0x1db8ce=!(-0x84+0x14b*-0x10+0x1*0x1534),_0xbbda11=!(0xff4+-0x6b*-0x3+-0x1135)){const _0x206e7e={};return _0x206e7e[_0x343f4b+'Map']='texture',_0x206e7e[_0x343f4b+'MapTiling']='vec2',_0x206e7e[_0x343f4b+'MapOffset']='vec2',_0x206e7e[_0x343f4b+('MapRotatio'+'n')]='number',_0x206e7e[_0x343f4b+'MapUv']='number',_0x1db8ce&&(_0x206e7e[_0x343f4b+'MapChannel']='string',_0xbbda11&&(_0x206e7e[_0x343f4b+('VertexColo'+'r')]='boolean',_0x206e7e[_0x343f4b+('VertexColo'+'rChannel')]='string')),_0x206e7e;}const Mn={'name':'string','chunks':'chunks','mappingFormat':'string','_engine':'boolean','ambient':'rgb',...it('ao'),...it('aoDetail',!(0x13b4+0x1803+-0x2bb7),!(0x16b*0xf+0x1*-0x61+-0x14e3)),'aoDetailMode':'string','aoIntensity':'number','diffuse':'rgb',...it('diffuse'),...it('diffuseDet'+'ail',!(-0xb*0x1c9+0x6*-0x2b1+0x23c9),!(0x247f+-0x1dae+-0x6d0)),'diffuseDetailMode':'string','specular':'rgb','specularTint':'boolean',...it('specular'),'occludeSpecular':'enum:occlu'+'deSpecular','specularityFactor':'number','specularityFactorTint':'boolean',...it('specularit'+'yFactor'),'useMetalness':'boolean','metalness':'number','enableGGXSpecular':'boolean','metalnessTint':'boolean',...it('metalness'),'useMetalnessSpecularColor':'boolean','anisotropyIntensity':'number','anisotropyRotation':'number',...it('anisotropy'),'shininess':'number','gloss':'number','glossInvert':'boolean',...it('gloss'),'clearCoat':'number',...it('clearCoat'),'clearCoatGloss':'number','clearCoatGlossInvert':'boolean',...it('clearCoatG'+'loss'),'clearCoatBumpiness':'number',...it('clearCoatN'+'ormal',!(0x13*-0x7f+-0x1227+-0x17*-0x133)),'useSheen':'boolean','sheen':'rgb',...it('sheen'),'sheenGloss':'number','sheenGlossInvert':'boolean',...it('sheenGloss'),'fresnelModel':'number','emissive':'rgb',...it('emissive'),'emissiveIntensity':'number',...it('normal',!(0x1c41+0x2a7*-0x7+-0x1*0x9af)),'bumpiness':'number',...it('normalDeta'+'il',!(0x752+0x1eae+0x1*-0x25ff)),'normalDetailMapBumpiness':'number',...it('height',!(-0x3*-0x389+-0x31*-0xb3+0x166f*-0x2),!(-0x1f*0x131+-0x1ee4+0x2*0x21ea)),'heightMapFactor':'number','alphaToCoverage':'boolean','alphaTest':'number','alphaFade':'number','opacity':'number',...it('opacity'),'opacityFadesSpecular':'boolean','opacityDither':'string','opacityShadowDither':'string','reflectivity':'number','refraction':'number','refractionTint':'boolean',...it('refraction'),'refractionIndex':'number','dispersion':'number','thickness':'number','thicknessTint':'boolean',...it('thickness'),'attenuation':'rgb','attenuationDistance':'number','useDynamicRefraction':'boolean','sphereMap':'texture','cubeMap':'cubemap','cubeMapProjection':'number','cubeMapProjectionBox':'boundingbo'+'x','useIridescence':'boolean','iridescence':'number','iridescenceTint':'boolean',...it('iridescenc'+'e'),'iridescenceThicknessTint':'boolean','iridescenceThicknessMin':'number','iridescenceThicknessMax':'number','iridescenceRefractionIndex':'number',...it('iridescenc'+'eThickness'),...it('light'),'depthTest':'boolean','depthFunc':'enum:depth'+'Func','depthWrite':'boolean','depthBias':'number','slopeDepthBias':'number','cull':'enum:cull','blendType':'enum:blend'+'Type','useFog':'boolean','useLighting':'boolean','useSkybox':'boolean','useTonemap':'boolean','envAtlas':'texture','twoSidedLighting':'boolean','shadowCatcher':'boolean'},Qc=[];for(const c in Mn)Mn[c]==='texture'&&Qc['push'](c);const Lm=[];for(const c in Mn)Mn[c]==='cubemap'&&Lm['push'](c);const PE={'aoMapVertexColor':'boolean','diffuseMapTint':'boolean','diffuseMapVertexColor':'boolean','emissiveMapTint':'boolean','emissiveMapVertexColor':'boolean','glossMapVertexColor':'boolean','metalnessMapVertexColor':'boolean','opacityMapVertexColor':'boolean','specularAntialias':'boolean','specularMapTint':'boolean','specularMapVertexColor':'boolean','ambientTint':'boolean','emissiveTint':'boolean','diffuseTint':'boolean','sheenTint':'boolean','conserveEnergy':'boolean','useGamma':'boolean','useGammaTonemap':'boolean','sheenGlossTint':'boolean','anisotropy':'boolean'},gh={},Dy={};let Hn=new Set();const Nl=new ie();class ws extends ua{constructor(){super(),h(this,'userAttrib'+'utes',new Map()),h(this,'onUpdateSh'+'ader'),(this['_assetRefe'+'rences']={},this['_activePar'+'ams']=new Set(),this['_activeLig'+'htingParam'+'s']=new Set(),this['shaderOptB'+'uilder']=new CE(),this['reset']());}['reset'](){Object['keys'](gh)['forEach'](_0x2f5a58=>{this['_'+_0x2f5a58]=gh[_0x2f5a58]['value']();}),this['_uniformCa'+'che']={};}['copy'](_0x108cbd){return super['copy'](_0x108cbd),Object['keys'](gh)['forEach'](_0x6ec04d=>{this[_0x6ec04d]=_0x108cbd[_0x6ec04d];}),this['userAttrib'+'utes']=new Map(_0x108cbd['userAttrib'+'utes']),this;}['setAttribu'+'te'](_0x2ebff6,_0x2eeb09){this['userAttrib'+'utes']['set'](_0x2eeb09,_0x2ebff6);}['_setParame'+'ter'](_0x3d6f80,_0x4a5d49){Hn['add'](_0x3d6f80),this['setParamet'+'er'](_0x3d6f80,_0x4a5d49);}['_setParame'+'ters'](_0x2acfc9){_0x2acfc9['forEach'](_0x533741=>{this['_setParame'+'ter'](_0x533741['name'],_0x533741['value']);});}['_processPa'+'rameters'](_0x5945f1){const _0x27356c=this[_0x5945f1];_0x27356c['forEach'](_0x41103a=>{Hn['has'](_0x41103a)||delete this['parameters'][_0x41103a];}),this[_0x5945f1]=Hn,Hn=_0x27356c,Hn['clear']();}['_updateMap'](_0x1a14ad){const _0x107dc7=_0x1a14ad+'Map',_0x259dd6=this[_0x107dc7];if(_0x259dd6){this['_setParame'+'ter']('texture_'+_0x107dc7,_0x259dd6);const _0x570eaf=_0x107dc7+'Transform',_0x312c3d=this['getUniform'](_0x570eaf);_0x312c3d&&this['_setParame'+'ters'](_0x312c3d);}}['_allocUnif'+'orm'](_0x37e444,_0x2e292e){let _0x47b473=this['_uniformCa'+'che'][_0x37e444];return _0x47b473||(_0x47b473=_0x2e292e(),this['_uniformCa'+'che'][_0x37e444]=_0x47b473),_0x47b473;}['getUniform'](_0x407883,_0x45e727,_0x3f0619){return Dy[_0x407883](this,_0x45e727,_0x3f0619);}['updateUnif'+'orms'](_0x3ce00b,_0x56997e){const _0x31085c=_0x3e14ae=>this['getUniform'](_0x3e14ae,_0x3ce00b,_0x56997e);this['_setParame'+'ter']('material_a'+'mbient',_0x31085c('ambient')),this['_setParame'+'ter']('material_d'+'iffuse',_0x31085c('diffuse')),this['_setParame'+'ter']('material_a'+'oIntensity',this['aoIntensit'+'y']),this['useMetalne'+'ss']?((!this['metalnessM'+'ap']||this['metalness']<0x1f79+0x93a*0x1+-0x28b2)&&this['_setParame'+'ter']('material_m'+'etalness',this['metalness']),(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x31085c('specular')),(!this['specularit'+'yFactorMap']||this['specularit'+'yFactorTin'+'t'])&&this['_setParame'+'ter']('material_s'+'pecularity'+'Factor',this['specularit'+'yFactor']),this['_setParame'+'ter']('material_s'+'heen',_0x31085c('sheen')),this['_setParame'+'ter']('material_s'+'heenGloss',this['sheenGloss']),this['_setParame'+'ter']('material_r'+'efractionI'+'ndex',this['refraction'+'Index'])):(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x31085c('specular')),this['enableGGXS'+'pecular']&&(this['_setParame'+'ter']('material_a'+'nisotropyI'+'ntensity',this['anisotropy'+'Intensity']),this['_setParame'+'ter']('material_a'+'nisotropyR'+'otation',[Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']),Math['sin'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD'])])),this['clearCoat']>0x1cf*0x1+-0x1*0x1943+0x1774&&(this['_setParame'+'ter']('material_c'+'learCoat',this['clearCoat']),this['_setParame'+'ter']('material_c'+'learCoatGl'+'oss',this['clearCoatG'+'loss']),this['_setParame'+'ter']('material_c'+'learCoatBu'+'mpiness',this['clearCoatB'+'umpiness'])),this['_setParame'+'ter']('material_g'+'loss',this['gloss']),M['call'](()=>{this['emissiveMa'+'p']&&this['emissive']['r']===0xfeb+-0x189*0x15+0x1052*0x1&&this['emissive']['g']===-0x779+-0x2*0xef8+0x2569&&this['emissive']['b']===0x5a2+-0xd73+0x7d1&&M['warnOnce']('Emissive\x20m'+'ap\x20is\x20set\x20'+'but\x20emissi'+'ve\x20color\x20i'+'s\x20black,\x20m'+'aking\x20the\x20'+'map\x20invisi'+'ble.\x20Set\x20e'+'missive\x20co'+'lor\x20to\x20whi'+'te\x20to\x20make'+'\x20the\x20map\x20v'+'isible.\x20Re'+'ndering\x20['+Q['toString']()+']',this);}),this['_setParame'+'ter']('material_e'+'missive',_0x31085c('emissive')),this['_setParame'+'ter']('material_e'+'missiveInt'+'ensity',this['emissiveIn'+'tensity']),this['refraction']>0xddf*-0x1+-0x313*0x8+0x2677&&this['_setParame'+'ter']('material_r'+'efraction',this['refraction']),this['dispersion']>-0x1*-0x337+0x1f46+-0x227d&&this['_setParame'+'ter']('material_d'+'ispersion',this['dispersion']),this['useDynamic'+'Refraction']&&(this['_setParame'+'ter']('material_t'+'hickness',this['thickness']),this['_setParame'+'ter']('material_a'+'ttenuation',_0x31085c('attenuatio'+'n')),this['_setParame'+'ter']('material_i'+'nvAttenuat'+'ionDistanc'+'e',this['attenuatio'+'nDistance']===-0x205b+0x1282+0xdd9?-0x2670+-0x319+0x1f*0x157:(0xb88+0x3*-0x68+-0xa4f)/this['attenuatio'+'nDistance'])),this['useIridesc'+'ence']&&(this['_setParame'+'ter']('material_i'+'ridescence',this['iridescenc'+'e']),this['_setParame'+'ter']('material_i'+'ridescence'+'Refraction'+'Index',this['iridescenc'+'eRefractio'+'nIndex']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'in',this['iridescenc'+'eThickness'+'Min']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'ax',this['iridescenc'+'eThickness'+'Max'])),this['_setParame'+'ter']('material_o'+'pacity',this['opacity']),this['opacityFad'+'esSpecular']===!(0xb1*-0x19+0x39*-0x7f+0x5*0x91d)&&this['_setParame'+'ter']('material_a'+'lphaFade',this['alphaFade']),this['occludeSpe'+'cular']&&this['_setParame'+'ter']('material_o'+'ccludeSpec'+'ularIntens'+'ity',this['occludeSpe'+'cularInten'+'sity']),this['cubeMapPro'+'jection']===fy&&this['_setParame'+'ter'](_0x31085c('cubeMapPro'+'jectionBox'));for(const _0x376301 in cn)this['_updateMap'](_0x376301);this['ambientSH']&&this['_setParame'+'ter']('ambientSH['+'0]',this['ambientSH']),this['normalMap']&&this['_setParame'+'ter']('material_b'+'umpiness',this['bumpiness']),this['normalMap']&&this['normalDeta'+'ilMap']&&this['_setParame'+'ter']('material_n'+'ormalDetai'+'lMapBumpin'+'ess',this['normalDeta'+'ilMapBumpi'+'ness']),this['heightMap']&&this['_setParame'+'ter']('material_h'+'eightMapFa'+'ctor',_0x31085c('heightMapF'+'actor')),this['envAtlas']&&this['cubeMap']?(this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap'])):this['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']):this['cubeMap']?this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap']):this['sphereMap']&&this['_setParame'+'ter']('texture_sp'+'hereMap',this['sphereMap']),this['_setParame'+'ter']('material_r'+'eflectivit'+'y',this['reflectivi'+'ty']),this['_processPa'+'rameters']('_activePar'+'ams'),super['updateUnif'+'orms'](_0x3ce00b,_0x56997e);}['updateEnvU'+'niforms'](_0x4147ff,_0x29957b){!(this['envAtlas']||this['cubeMap']||this['sphereMap'])&&this['useSkybox']&&(_0x29957b['envAtlas']&&_0x29957b['skybox']?(this['_setParame'+'ter']('texture_en'+'vAtlas',_0x29957b['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',_0x29957b['skybox'])):_0x29957b['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',_0x29957b['envAtlas']):_0x29957b['skybox']&&this['_setParame'+'ter']('texture_cu'+'beMap',_0x29957b['skybox'])),this['_processPa'+'rameters']('_activeLig'+'htingParam'+'s');}['getShaderV'+'ariant'](_0x3bd72a){const {device:_0x44d037,scene:_0x4e813c,pass:_0x26090c,objDefs:_0x420e56,sortedLights:_0x25774d,cameraShaderParams:_0x15a99f}=_0x3bd72a;this['updateEnvU'+'niforms'](_0x44d037,_0x4e813c);const _0x43169b=hi['get'](_0x44d037)['getByIndex'](_0x26090c),_0x32f756=_0x26090c===Fn||_0x26090c===ll||_0x43169b['isShadow'];let _0x42a9c9=_0x32f756?wd['optionsCon'+'textMin']:wd['optionsCon'+'text'];_0x42a9c9['defines']=Ut['getCoreDef'+'ines'](this,_0x3bd72a),_0x32f756?this['shaderOptB'+'uilder']['updateMinR'+'ef'](_0x42a9c9,_0x4e813c,this,_0x420e56,_0x26090c,_0x25774d):this['shaderOptB'+'uilder']['updateRef'](_0x42a9c9,_0x4e813c,_0x15a99f,this,_0x420e56,_0x26090c,_0x25774d),this['useFog']||_0x42a9c9['defines']['set']('FOG','NONE'),_0x42a9c9['defines']['set']('TONEMAP',my[_0x42a9c9['litOptions']['toneMap']]),this['onUpdateSh'+'ader']&&(_0x42a9c9=this['onUpdateSh'+'ader'](_0x42a9c9));const _0x5cbb6c=new Zc(_0x3bd72a['viewUnifor'+'mFormat'],_0x3bd72a['viewBindGr'+'oupFormat'],_0x3bd72a['vertexForm'+'at']),_0x459030=Cn(_0x44d037);_0x459030['register']('standard',wd);const _0x25d507=_0x459030['getProgram']('standard',_0x42a9c9,_0x5cbb6c,this['userId']);return this['_dirtyShad'+'er']=!(-0xdd+-0x22f0+0x11e7*0x2),_0x25d507;}['destroy'](){for(const _0x507dc2 in this['_assetRefe'+'rences'])this['_assetRefe'+'rences'][_0x507dc2]['_unbind']();this['_assetRefe'+'rences']=null,super['destroy']();}}h(ws,'TEXTURE_PA'+'RAMETERS',Qc),h(ws,'CUBEMAP_PA'+'RAMETERS',Lm);const Jc=(_0x4beffd,_0x4ed014)=>{Dy[_0x4beffd]=_0x4ed014;},Rm=(_0x18dbf4,_0x14b6c7,_0x491355,_0x3d0989)=>{Object['defineProp'+'erty'](ws['prototype'],_0x18dbf4,{'get':_0x3d0989||function(){return this['_'+_0x18dbf4];},'set':_0x491355}),gh[_0x18dbf4]={'value':_0x14b6c7};},ME=_0x98a590=>{const _0x1dfea8='_'+_0x98a590['name'],_0x221967=_0x98a590['dirtyShade'+'rFunc']||(()=>!(-0x513*0x7+0x1046*0x1+0x133f*0x1)),_0x23a404=function(_0x5d4bf8){const _0x5a3ecd=this[_0x1dfea8];_0x5a3ecd!==_0x5d4bf8&&(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x221967(_0x5a3ecd,_0x5d4bf8),this[_0x1dfea8]=_0x5d4bf8);};Rm(_0x98a590['name'],()=>_0x98a590['defaultVal'+'ue'],_0x23a404,_0x98a590['getterFunc']);},IE=_0x13b45a=>{const _0x134bcc='_'+_0x13b45a['name'],_0x1c639b=_0x13b45a['dirtyShade'+'rFunc']||(()=>!(-0x166*-0x2+0x2680+-0x294c)),_0x5ab8ba=function(_0xafd795){const _0x267662=this[_0x134bcc];_0x267662['equals'](_0xafd795)||(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x1c639b(_0x267662,_0xafd795),this[_0x134bcc]=_0x267662['copy'](_0xafd795));};Rm(_0x13b45a['name'],()=>_0x13b45a['defaultVal'+'ue']['clone'](),_0x5ab8ba,_0x13b45a['getterFunc']);},gs=_0x560c26=>_0x560c26['defaultVal'+'ue']&&_0x560c26['defaultVal'+'ue']['clone']?IE(_0x560c26):ME(_0x560c26);function Je(_0x10c48e,_0x5a0059='rgb',_0x3258e4=!(0x15b*-0x8+-0x11c5*-0x1+-0x6ed),_0x1bb320=0x9*-0x378+-0x3fc*0x5+0x443*0xc){cn[_0x10c48e]=_0x5a0059['length']||-(0xf5+-0x1e19+-0x3*-0x9b7),gs({'name':_0x10c48e+'Map','defaultValue':null,'dirtyShaderFunc':(_0x2758a5,_0x3f1c04)=>!!_0x2758a5!=!!_0x3f1c04||_0x2758a5&&(_0x2758a5['type']!==_0x3f1c04['type']||_0x2758a5['format']!==_0x3f1c04['format'])}),gs({'name':_0x10c48e+'MapTiling','defaultValue':new J(0x5da+0x34*-0x47+0x5*0x1b7,-0x97*0x1+0x296*-0x4+0xaf0)}),gs({'name':_0x10c48e+'MapOffset','defaultValue':new J(0x302+0xb2*-0x1e+0x11da*0x1,0x37a+-0x12e3+0xf69)}),gs({'name':_0x10c48e+('MapRotatio'+'n'),'defaultValue':0x0}),gs({'name':_0x10c48e+'MapUv','defaultValue':_0x1bb320}),_0x5a0059&&(gs({'name':_0x10c48e+'MapChannel','defaultValue':_0x5a0059}),_0x3258e4&&(gs({'name':_0x10c48e+('VertexColo'+'r'),'defaultValue':!(-0x1a02+-0xb5a+0x255d)}),gs({'name':_0x10c48e+('VertexColo'+'rChannel'),'defaultValue':_0x5a0059})));const _0x5e3200=_0x10c48e+'MapTiling',_0x3f7093=_0x10c48e+'MapOffset',_0x42b3eb=_0x10c48e+('MapRotatio'+'n'),_0x3072e3=_0x10c48e+('MapTransfo'+'rm');Jc(_0x3072e3,(_0x11b3d5,_0x3ea30a,_0x40b1c6)=>{const _0x3178e5=_0x11b3d5[_0x5e3200],_0x41179e=_0x11b3d5[_0x3f7093],_0x267c98=_0x11b3d5[_0x42b3eb];if(_0x3178e5['x']===-0xd6d+-0xf72+-0x420*-0x7&&_0x3178e5['y']===-0x1*0x9bf+-0x6*-0x35+0x882*0x1&&_0x41179e['x']===0x1115*0x1+0xe1c+0x1f31*-0x1&&_0x41179e['y']===0x2*-0x349+0xa74+-0x3e2&&_0x267c98===-0x26b4*-0x1+0xc63+0x3317*-0x1)return null;const _0x57b4b1=_0x11b3d5['_allocUnif'+'orm'](_0x3072e3,()=>[{'name':'texture_'+_0x3072e3+'0','value':new Float32Array(0x3d*-0x9d+-0x16d*-0xb+-0x69*-0x35)},{'name':'texture_'+_0x3072e3+'1','value':new Float32Array(0x4ed*0x1+-0xa3f+0x555)}]),_0x249121=Math['cos'](_0x267c98*Y['DEG_TO_RAD']),_0x3eb411=Math['sin'](_0x267c98*Y['DEG_TO_RAD']),_0x12c3f8=_0x57b4b1[-0x1823+-0x6*0x5d9+0x3b39]['value'];_0x12c3f8[0x1722+0x109f+0x1*-0x27c1]=_0x249121*_0x3178e5['x'],_0x12c3f8[-0x880+-0x1*0x20a4+-0x2925*-0x1]=-_0x3eb411*_0x3178e5['y'],_0x12c3f8[0x1494+-0x1*0x106+0x1a1*-0xc]=_0x41179e['x'];const _0x16e27e=_0x57b4b1[0x22b5+-0x7*0x20a+0x20b*-0xa]['value'];return _0x16e27e[-0x2*0x63a+0x243+0xa31]=_0x3eb411*_0x3178e5['x'],_0x16e27e[0xd30*0x1+-0x5*-0x4b2+-0x1*0x24a9]=_0x249121*_0x3178e5['y'],_0x16e27e[0x36e*-0x2+0x263c+-0x2*0xfaf]=-0x6*0x1d9+0x2f5*0x4+-0xbd-_0x3178e5['y']-_0x41179e['y'],_0x57b4b1;});}function va(_0x43641a,_0x3f6880){gs({'name':_0x43641a,'defaultValue':_0x3f6880,'getterFunc':function(){return this['_dirtyShad'+'er']=!(0x13db+-0x6*0xfb+0x49*-0x31),this['_'+_0x43641a];}}),Jc(_0x43641a,(_0x3272df,_0x4032c9,_0x2aad92)=>{const _0x49fe8b=_0x3272df['_allocUnif'+'orm'](_0x43641a,()=>new Float32Array(-0x9c7+0xf6b+0x83*-0xb)),_0x287284=_0x3272df[_0x43641a];return Nl['linear'](_0x287284),_0x49fe8b[-0x2012+0x1533+0x17*0x79]=Nl['r'],_0x49fe8b[0x6ce+-0x3df*0x4+0x8af]=Nl['g'],_0x49fe8b[-0x24c+0x1b3d*-0x1+0x9d9*0x3]=Nl['b'],_0x49fe8b;});}function Ue(_0x59cc4f,_0x2e98bd,_0x561e60){gs({'name':_0x59cc4f,'defaultValue':_0x2e98bd,'dirtyShaderFunc':(_0x295d2e,_0x12e46c)=>(_0x295d2e===0x3*0x1a6+-0x2*0x115+-0x2c8||_0x295d2e===0x24a5+-0xd71+-0x1733)!=(_0x12e46c===-0x1f1f+-0x1*-0xfaf+0xf70||_0x12e46c===-0x3a3*0x4+-0x7*-0x50d+0x14ce*-0x1)}),Jc(_0x59cc4f,_0x561e60);}function Wn(_0x304b63,_0x194a14){gs({'name':_0x304b63,'defaultValue':null,'dirtyShaderFunc':(_0xb6885c,_0x28a076)=>!!_0xb6885c==!!_0x28a076}),Jc(_0x304b63,_0x194a14);}function Fe(_0xaaab1d,_0x423a2c){gs({'name':_0xaaab1d,'defaultValue':_0x423a2c});}function DE(){va('ambient',new ie(-0x1654+0xdd2+0x883,0x140c+0xe01+-0x220c,0x1ac4+-0x15f*-0x5+-0x219e)),va('diffuse',new ie(-0x168*-0x11+0x27*-0xc5+0x61c,-0x37*-0x8d+0x11da+-0x3024,-0x20e*0xd+0x2*-0x12ad+0x4011)),va('specular',new ie(0x22a2+-0x16f*-0xd+-0x3545*0x1,-0x6f3+0x80f+-0x1*0x11c,0x989*-0x1+0x19b2*-0x1+0x233b)),va('emissive',new ie(-0x77b*0x5+-0x1616+-0x1*-0x3b7d,-0xa46+0x1fc*-0x4+0x15*0xde,0x267+-0x17*0x123+0x17be)),va('sheen',new ie(-0x3*-0x65+0x1*0xbb9+-0xce7,-0x5bc+0xac*-0x2b+0x22a1,0x3*0x5b1+-0xe8a+-0x288)),va('attenuatio'+'n',new ie(-0x1*0xb48+0xb*-0x101+-0x4*-0x595,-0x13fe+0x1543+-0x144,0x894*0x4+-0x4*0x8e7+0x14d)),Ue('emissiveIn'+'tensity',-0x176b*-0x1+-0x2*0x1d3+-0x13c4),Ue('specularit'+'yFactor',0x246a+0x395*-0x3+0x522*-0x5),Ue('sheenGloss',-0xa4e+0x1388+-0x93a),Ue('gloss',-0x61*0x2+-0x1583+0x1645+0.25),Ue('aoIntensit'+'y',0xd4e+-0x2195*0x1+0x1448),Ue('heightMapF'+'actor',-0x10f*-0x20+0x5f4+-0x27d3,(_0x45d9cb,_0x52b4d1,_0x4fd55a)=>_0x45d9cb['heightMapF'+'actor']*(0xbc9+-0xcf*-0xf+0x2*-0xbf5+0.025)),Ue('opacity',-0x4af*-0x8+0x18fb+0x2*-0x1f39),Ue('alphaFade',-0x1726+-0x100b+0x2732),Ue('alphaTest',-0xdb7+-0x2*0xf04+0x2bbf),Ue('bumpiness',0x848+-0x10c4+0x1*0x87d),Ue('normalDeta'+'ilMapBumpi'+'ness',0x256a+-0x1355*-0x1+-0x1*0x38be),Ue('reflectivi'+'ty',0x2*0x11fe+0x1d14+-0x410f),Ue('occludeSpe'+'cularInten'+'sity',-0xb9d*-0x2+-0xd91+0x8*-0x135),Ue('refraction',0xe47+-0x1*-0x944+0x35d*-0x7),Ue('refraction'+'Index',(-0xa3f*-0x2+0x923+0x60*-0x4f)/(0x3dd*0x2+0x5ee+-0xda7+0.5)),Ue('dispersion',0x11c8+0x2545+0x1*-0x370d),Ue('thickness',0x184d+0x6*-0x443+-0x5*-0x41),Ue('attenuatio'+'nDistance',-0xb*0x331+-0x749*-0x5+-0x152),Ue('metalness',-0x159e+-0xc24*-0x3+-0xecd),Ue('anisotropy'+'Intensity',-0x13b8+0x2599+-0x11e1),Ue('anisotropy'+'Rotation',-0xc9+0x295+0x2e*-0xa),Ue('clearCoat',0x39f*0x3+-0x1c*-0x7a+-0x1*0x1835),Ue('clearCoatG'+'loss',-0x11ac+-0x5f*0x4b+0x2d82),Ue('clearCoatB'+'umpiness',0x180f+0xded+0xca9*-0x3),Ue('aoUvSet',0x2435+-0xb87+-0x18ae,null),Ue('iridescenc'+'e',-0xb*0x106+0x1c04+-0x10c2),Ue('iridescenc'+'eRefractio'+'nIndex',(-0x1064+-0x2*0xc95+0x1*0x298f)/(0xe14+-0x1*-0x64b+-0x145e+0.5)),Ue('iridescenc'+'eThickness'+'Min',0x1993+-0xce0+0xcb3*-0x1),Ue('iridescenc'+'eThickness'+'Max',0x1ac5+-0x25d3+0xb0e),Wn('ambientSH'),Wn('cubeMapPro'+'jectionBox',(_0x5a4f07,_0x78ba1f,_0x575373)=>{const _0x28df34=_0x5a4f07['_allocUnif'+'orm']('cubeMapPro'+'jectionBox',()=>[{'name':'envBoxMin','value':new Float32Array(-0x12ee*-0x1+-0x263b+-0x670*-0x3)},{'name':'envBoxMax','value':new Float32Array(-0x1*0x6f8+0xf0d+-0x812)}]),_0x57a7b0=_0x5a4f07['cubeMapPro'+'jectionBox']['getMin'](),_0x20c271=_0x28df34[0xa*0x3a+-0x1e2f+0x7*0x3fd]['value'];_0x20c271[0x1*0xf43+0x22ba+-0x31fd]=_0x57a7b0['x'],_0x20c271[0x5*0x1d3+0xd*0x28b+-0x1*0x2a2d]=_0x57a7b0['y'],_0x20c271[-0x5a7+0x10ea*0x1+-0xb41*0x1]=_0x57a7b0['z'];const _0x202597=_0x5a4f07['cubeMapPro'+'jectionBox']['getMax'](),_0x4a06a7=_0x28df34[-0xac*0x28+-0x6*0x3d0+-0x2f*-0x10f]['value'];return _0x4a06a7[-0x1*-0x1a77+0x5f*0x2d+-0x2b2a]=_0x202597['x'],_0x4a06a7[-0x1611+0x1a72+-0x460]=_0x202597['y'],_0x4a06a7[0x2*0x2b4+0x182d+0x71*-0x43]=_0x202597['z'],_0x28df34;}),Fe('specularTi'+'nt',!(0x1cce*-0x1+0x7b7+0x1518)),Fe('specularit'+'yFactorTin'+'t',!(-0x1*-0x154f+0x1633*0x1+-0x2b81)),Fe('useMetalne'+'ss',!(-0xd6+-0x1f14+0x1feb)),Fe('useMetalne'+'ssSpecular'+'Color',!(-0x1*0x8a5+0x1d79+-0x14d3)),Fe('useSheen',!(0x1*-0x17d2+0x1d45+0x29*-0x22)),Fe('enableGGXS'+'pecular',!(-0x1fc7+0x3d*0x2f+0x1495)),Fe('occludeDir'+'ect',!(0x237a+-0x1103+-0x11*0x116)),Fe('opacityFad'+'esSpecular',!(0x1da7+0x3*-0x9ff+-0x2*-0x2b)),Fe('occludeSpe'+'cular',Kc),Fe('fresnelMod'+'el',pm),Fe('useDynamic'+'Refraction',!(-0x2*-0xa99+-0x2*0xae7+0x1*0x9d)),Fe('cubeMapPro'+'jection',xm),Fe('useFog',!(0x6*-0x16a+0x2*0x6d3+-0x52a)),Fe('useLightin'+'g',!(0x20f3+-0x1*-0x14b7+-0x35aa)),Fe('useTonemap',!(0x8ba+-0xb*-0x2e3+-0x287b)),Fe('useSkybox',!(0x1344+-0x2629*-0x1+-0x396d)),Fe('forceUv1',!(-0xe59+-0x23c6+-0x3220*-0x1)),Fe('pixelSnap',!(0x22ec+-0x114+0x1*-0x21d7)),Fe('twoSidedLi'+'ghting',!(-0x478*0x1+0x1801+-0x1388)),Fe('nineSliced'+'Mode',void(-0x7*-0x489+-0x2238+0x279)),Fe('msdfTextAt'+'tribute',!(-0x2139+-0x158e+0x1b64*0x2)),Fe('useIridesc'+'ence',!(0x7*0x3df+-0x70d*-0x2+0x2932*-0x1)),Fe('glossInver'+'t',!(-0x25e*-0x10+0x1de*0x1+-0x27bd)),Fe('sheenGloss'+'Invert',!(-0x1*0x145d+-0x1*-0x322+0x113c)),Fe('clearCoatG'+'lossInvert',!(-0x1707*0x1+0x1ee0+0x8*-0xfb)),Fe('opacityDit'+'her',ra),Fe('opacitySha'+'dowDither',ra),Fe('shadowCatc'+'her',!(0x445*0x4+-0x1dd5*-0x1+-0x2ee8)),Je('diffuse'),Je('specular'),Je('emissive'),Je('thickness','g'),Je('specularit'+'yFactor','g'),Je('normal',''),Je('metalness','g'),Je('gloss','g'),Je('opacity','a'),Je('refraction','g'),Je('height','g',!(0x8fa+-0x1b*0xa1+0x802*0x1)),Je('ao','g'),Je('light','rgb',!(0x1*-0xb47+-0x523*-0x5+-0x4*0x39a),-0x296*0xb+-0xd7d+0x29f0),Je('msdf',''),Je('diffuseDet'+'ail','rgb',!(-0x1*-0x125+-0x2*0xa9f+0xa0d*0x2)),Je('normalDeta'+'il',''),Je('aoDetail','g',!(0x1*-0xc00+0x1f*0xdd+-0xec2)),Je('clearCoat','g'),Je('clearCoatG'+'loss','g'),Je('clearCoatN'+'ormal',''),Je('sheen','rgb'),Je('sheenGloss','g'),Je('iridescenc'+'e','g'),Je('iridescenc'+'eThickness','g'),Je('anisotropy',''),Fe('diffuseDet'+'ailMode',Pp),Fe('aoDetailMo'+'de',Pp),Wn('cubeMap'),Wn('sphereMap'),Wn('envAtlas');const _0x1359c4=function(){return this['_prefilter'+'edCubemaps'];},_0x3e8149=function(_0x1157cc){const _0x2c7055=this['_prefilter'+'edCubemaps'];_0x1157cc=_0x1157cc||[];let _0x22bf02=!(-0x1*-0x1b2f+0xf87+0x1*-0x2ab5),_0x8bf59c=!(0x538*0x2+0x3e*-0x6+-0x1*0x8fc);for(let _0x2a6105=-0x5cf+-0x4a3*-0x7+0x2f6*-0x9;_0x2a6105<-0x23c5+-0x1b2d+-0x5*-0xc98;++_0x2a6105){const _0x3aaa80=_0x1157cc[_0x2a6105]||null;_0x2c7055[_0x2a6105]!==_0x3aaa80&&(_0x2c7055[_0x2a6105]=_0x3aaa80,_0x22bf02=!(0x182e+-0x2353+0xb25)),_0x8bf59c=_0x8bf59c&&!!_0x2c7055[_0x2a6105];}_0x22bf02&&(_0x8bf59c?this['envAtlas']=My['generatePr'+'efilteredA'+'tlas'](_0x2c7055,{'target':this['envAtlas']}):this['envAtlas']&&(this['envAtlas']['destroy'](),this['envAtlas']=null),this['_dirtyShad'+'er']=!(0x1*-0x1eb7+-0xac5+-0x49c*-0x9));},_0x1b4820=[null,null,null,null,null,null];Rm('prefiltere'+'dCubemaps',()=>_0x1b4820['slice'](),_0x3e8149,_0x1359c4);}DE();const It=class It{static['render'](_0xbe2618,_0x3c925e){const _0x52e027=_0x3c925e['device'],_0x2b1e30=_0xbe2618['cells'],_0x455152=_0xbe2618['lightsBuff'+'er'],_0x33744f=_0x455152['boundsMin'],_0x2875df=_0x455152['boundsDelt'+'a'],_0x3bce28=_0x33744f['clone']()['add'](_0x2875df),_0x5d5a50=_0x455152['boundsDelt'+'a']['clone']()['div'](_0x2b1e30),_0x9b5ebe=It['gridPositi'+'ons'],_0x8a2fc0=It['gridColors'],_0x878d28=new ie(-0x5*-0x343+-0x6af*-0x2+-0x6b*0x47+0.3,-0x66d+0x222d+-0x6*0x4a0+0.3,-0x2325+-0x3*-0x5ab+0x1224+0.3),_0x3c05d0=(_0x2ea643,_0x23564f,_0x18d6d9,_0xead65b,_0x521d0b,_0x228087,_0x161eda,_0x48356c,_0x3de1fa)=>{for(let _0x50002f=0xa83+0x1db9+-0x283c;_0x50002f<=_0x2ea643;_0x50002f++)for(let _0x20a60d=-0xf55+-0x1025*0x2+0x49*0xa7;_0x20a60d<=_0x23564f;_0x20a60d++){const _0x5db1f8=_0x18d6d9+_0x50002f*_0xead65b,_0x40aa4a=_0x521d0b+_0x20a60d*_0x228087;_0x3de1fa===-0x22ea+0x30d+0x1fdd?_0x9b5ebe['push'](_0x5db1f8,_0x161eda,_0x40aa4a,_0x5db1f8,_0x48356c,_0x40aa4a):_0x3de1fa===-0x1aa*-0x9+-0x1c67+0x9*0x17e?_0x9b5ebe['push'](_0x5db1f8,_0x40aa4a,_0x161eda,_0x5db1f8,_0x40aa4a,_0x48356c):_0x3de1fa===0x109a+0x1f3d*0x1+0x18b*-0x1f&&_0x9b5ebe['push'](_0x161eda,_0x5db1f8,_0x40aa4a,_0x48356c,_0x5db1f8,_0x40aa4a);}};if(_0x3c05d0(_0x2b1e30['x'],_0x2b1e30['z'],_0x33744f['x'],_0x5d5a50['x'],_0x33744f['z'],_0x5d5a50['z'],_0x33744f['y'],_0x3bce28['y'],0x767*-0x2+0x1*-0x135b+-0x1*-0x2229),_0x3c05d0(_0x2b1e30['x'],_0x2b1e30['y'],_0x33744f['x'],_0x5d5a50['x'],_0x33744f['y'],_0x5d5a50['y'],_0x33744f['z'],_0x3bce28['z'],0x4*-0x71f+-0x1833+0x34b0),_0x3c05d0(_0x2b1e30['y'],_0x2b1e30['z'],_0x33744f['y'],_0x5d5a50['y'],_0x33744f['z'],_0x5d5a50['z'],_0x33744f['x'],_0x3bce28['x'],0x1487+-0x1052+-0x433),_0x9b5ebe['length']){const _0x203af5=_0x9b5ebe['length']/(0x1*0x1a4e+0x10d4+-0x2b1f);if(_0x203af5!==_0x8a2fc0['length']/(0xd8a+-0xa*-0x81+-0x1290)){_0x8a2fc0['length']=0x2*-0xe59+-0x24a1+-0x7*-0x955;for(let _0x243922=-0x6*-0x493+-0x1f54+0x8e*0x7;_0x243922<_0x203af5;_0x243922++)_0x8a2fc0['push'](_0x878d28['r'],_0x878d28['g'],_0x878d28['b'],_0x878d28['a']);}_0x3c925e['drawLineAr'+'rays'](_0x9b5ebe,_0x8a2fc0),_0x9b5ebe['length']=0x71*-0x53+0x238d+0x116;}let _0x39c5b3=It['mesh'];_0x39c5b3||(_0x39c5b3=new Ge(_0x52e027),_0x39c5b3['clear'](!(0x5*0x441+0x2274+0x5*-0xb25),!(0x3d0+-0x23d9+0x2009)),It['mesh']=_0x39c5b3);const _0x4bb231=[],_0x107f2c=[],_0x2bacf8=[],_0xdbf798=_0xbe2618['_cells']['x'],_0xc940eb=_0xbe2618['_cells']['z'],_0x850f06=_0xbe2618['counts'],_0x385c25=_0xbe2618['_maxCellLi'+'ghtCount'],_0x2c7732=new I(),_0x3552b7=new I(),_0x4f8a02=new I(),_0x53e7bf=_0x2875df['clone']()['div'](_0x2b1e30);let _0x2bf41c=-0x22*0x4e+-0x1*-0x1c99+-0x123d;for(let _0x510872=0x7b2+0x2337+-0x34d*0xd;_0x510872<_0x2b1e30['x'];_0x510872++)for(let _0x5ead03=0x7e5+0x9*-0x12e+0x2b9;_0x5ead03<_0x2b1e30['z'];_0x5ead03++)for(let _0x27980a=-0x11b2+-0xad+-0x125f*-0x1;_0x27980a<_0x2b1e30['y'];_0x27980a++){const _0x2d799d=_0x510872+_0xdbf798*(_0x5ead03+_0x27980a*_0xc940eb),_0x17c1d3=_0x850f06[_0x2d799d];if(_0x17c1d3>0x19a4+-0x76*-0x4+0xdbe*-0x2){_0x2c7732['x']=_0x33744f['x']+_0x53e7bf['x']*_0x510872,_0x2c7732['y']=_0x33744f['y']+_0x53e7bf['y']*_0x27980a,_0x2c7732['z']=_0x33744f['z']+_0x53e7bf['z']*_0x5ead03,_0x3552b7['add2'](_0x2c7732,_0x53e7bf),_0x4bb231['push'](_0x2c7732['x'],_0x2c7732['y'],_0x3552b7['z']),_0x4bb231['push'](_0x3552b7['x'],_0x2c7732['y'],_0x3552b7['z']),_0x4bb231['push'](_0x3552b7['x'],_0x3552b7['y'],_0x3552b7['z']),_0x4bb231['push'](_0x2c7732['x'],_0x3552b7['y'],_0x3552b7['z']),_0x4bb231['push'](_0x3552b7['x'],_0x2c7732['y'],_0x2c7732['z']),_0x4bb231['push'](_0x2c7732['x'],_0x2c7732['y'],_0x2c7732['z']),_0x4bb231['push'](_0x2c7732['x'],_0x3552b7['y'],_0x2c7732['z']),_0x4bb231['push'](_0x3552b7['x'],_0x3552b7['y'],_0x2c7732['z']),_0x4f8a02['lerp'](It['colorLow'],It['colorHigh'],_0x17c1d3/_0x385c25)['round']();for(let _0x50b8a3=-0x3*0xb6f+-0xd36+-0x1*-0x2f83;_0x50b8a3<0x479+0x183*0x2+-0x111*0x7;_0x50b8a3++)_0x107f2c['push'](_0x4f8a02['x'],_0x4f8a02['y'],_0x4f8a02['z'],0x1*0xc89+0x1b27+-0x27af);_0x2bacf8['push'](_0x2bf41c*(-0x2602+-0x1689+0x3c93)+(0x96b*0x3+0x22ad+-0x3eee),_0x2bf41c*(-0x14d9+-0x23fa+0x38db)+(-0xb*-0x383+-0x1c89+-0xa17),_0x2bf41c*(-0x2*-0x7eb+-0x18f0+0x922)+(-0x311*-0x2+0x21b9+0x6*-0x6a4)),_0x2bacf8['push'](_0x2bf41c*(-0x127a+0x2*0x1f5+0xe98)+(-0x19b3*0x1+-0x122c+0x2be2),_0x2bf41c*(-0xb+0x162e+-0x1*0x161b)+(-0x13cf+0x1*0x15d1+-0x201),_0x2bf41c*(-0x23b9+0x1d*-0xc1+0x399e)+(0x7*0x3a4+0x1010+-0x298a)),_0x2bacf8['push'](_0x2bf41c*(-0x17e*-0x5+0xcfc+-0x1*0x146a)+(0x62b*0x1+0x10a3+-0x16ca),_0x2bf41c*(-0x1*0x1c19+0x1*-0x21f+0x1e40)+(-0x49d*0x4+-0x786+0x19ff),_0x2bf41c*(-0x1*-0xdfd+0xc2c+0x1*-0x1a21)+(-0x24b5+0x752+-0xf*-0x1f6)),_0x2bacf8['push'](_0x2bf41c*(-0xdf+0x15eb+0xa82*-0x2)+(0x1970+-0xd9*0x1+-0x1890),_0x2bf41c*(-0x25ac*-0x1+-0xbe7+-0x19bd)+(-0x139f+-0x17b1+0x2b55),_0x2bf41c*(0x1420+-0x8b*0x3d+0xd07)+(0x19e1*-0x1+-0x23e+-0x1*-0x1c25)),_0x2bacf8['push'](_0x2bf41c*(0x190*-0x14+0x2*-0x664+0x2c10)+(-0x2431+0x1d6*-0x9+0x34ba),_0x2bf41c*(-0x1129+0x1c4c+-0xb1b)+(0x1*-0x190a+0xca9+-0x7*-0x1c5),_0x2bf41c*(0x2487+-0x20ae+-0x3d1)+(-0x518+-0x1a*0x15b+0x285c)),_0x2bacf8['push'](_0x2bf41c*(0x440+0x158c+0x22*-0xc2)+(0x1627+0x213b+-0x1bb*0x20),_0x2bf41c*(0x15e5+-0xd1e+0x1*-0x8bf)+(0x2583+-0x233*0x9+0x287*-0x7),_0x2bf41c*(0x17a1*0x1+-0xd*-0xf0+-0x23c9)+(0x43*-0x47+0xa03*-0x1+0x1c9e)),_0x2bacf8['push'](_0x2bf41c*(0x47a+0x1*-0x261d+0x21ab)+(-0x138*-0x3+0x1076+-0x141d*0x1),_0x2bf41c*(-0x23ef+0x2*-0x112+0x261b)+(0xbbc+-0x67e*-0x1+0x1*-0x123a),_0x2bf41c*(-0x2495*0x1+0x1c0c*-0x1+0x40a9)+(0x4*0x994+0x147*0xb+0x9*-0x5d1)),_0x2bacf8['push'](_0x2bf41c*(0x25ff+0x52*0xe+-0x2a73)+(-0x5e+-0xa*0x3b+0x4*0xab),_0x2bf41c*(0x258b+-0x2cb*-0x6+-0x3645)+(0x18fd+0x1ee9*-0x1+0x27*0x27),_0x2bf41c*(-0x35*0xa6+0x186f+0x1*0x9f7)+(0x17c0+-0x564*0x5+0x338)),_0x2bacf8['push'](_0x2bf41c*(0xf2d+0x11*0x22d+-0x1a11*0x2)+(0x7e7+-0xb9a+0x6*0x9e),_0x2bf41c*(-0xf7+-0x20b9+-0x1*-0x21b8)+(-0x26c3+0x1072+0x1655),_0x2bf41c*(0x1*0x625+-0x180d+0x11f0)+(0x1*-0x5c6+-0x26f7+0x1*0x2cbf)),_0x2bacf8['push'](_0x2bf41c*(0xd*0xe+0x29b*0xd+-0x228d)+(0x1*-0xf1a+0xbd8*0x2+-0x892),_0x2bf41c*(-0x9e3*-0x1+-0x22bd*0x1+0x18e2)+(0x1*0x184d+-0x553+-0x9*0x21b),_0x2bf41c*(0x1dbe+0x131b+-0x1*0x30d1)+(-0x313*-0x1+-0x24*0x21+-0x1f*-0xd)),_0x2bacf8['push'](_0x2bf41c*(0xc95*-0x1+0xd58+-0xbb)+(0x2f1*-0x8+0x188d+0x10*-0x10),_0x2bf41c*(0x53e+-0x164e+-0x88c*-0x2)+(0x53*0x2b+0xe*-0x84+-0x6b9),_0x2bf41c*(-0xb9*0x16+0x10c5+0xd7*-0x1)+(-0x1e8e+0x16ec+0x188*0x5)),_0x2bacf8['push'](_0x2bf41c*(0x14d*-0x17+0x7*0x382+0x565)+(0x9*0x421+-0x138c+-0x119d),_0x2bf41c*(0xd7a+-0x24*0x115+0x1982)+(-0x1*-0x1f06+0x19*0xef+-0x3*0x121e),_0x2bf41c*(0x4c+-0x91*-0x2a+-0x180e)+(-0x58*0x4e+-0x10b+-0x319*-0x9)),_0x2bf41c++;}}if(_0x2bf41c){if(_0x39c5b3['setPositio'+'ns'](_0x4bb231),_0x39c5b3['setNormals'](new Float32Array(_0x4bb231['length'])),_0x39c5b3['setColors3'+'2'](_0x107f2c),_0x39c5b3['setIndices'](_0x2bacf8),_0x39c5b3['update'](zs,!(-0x11a*0xb+0x195b+-0xd3c)),!It['meshInstan'+'ce']){const _0x1d6d74=new ws();_0x1d6d74['useLightin'+'g']=!(-0x2054+0x2330+-0x2db),_0x1d6d74['emissive']=new ie(-0x74*-0x48+0x709+-0x27a8,-0xc06+-0xe79+0x20*0xd4,-0x1d16+0x1dc5*0x1+-0x1d*0x6),_0x1d6d74['emissiveVe'+'rtexColor']=!(-0x2547+0x1a0d+0x3be*0x3),_0x1d6d74['blendType']=Yc,_0x1d6d74['depthWrite']=!(0x131c*0x2+-0x3c8*0x6+-0xf87),_0x1d6d74['update']();const _0x382cd3=new He('WorldClust'+'ersDebug');_0x382cd3['worldTrans'+'form']=te['IDENTITY'],_0x382cd3['_dirtyWorl'+'d']=_0x382cd3['_dirtyNorm'+'al']=!(0x60c+0x1628+0x1*-0x1c33),It['meshInstan'+'ce']=new We(_0x39c5b3,_0x1d6d74,_0x382cd3),It['meshInstan'+'ce']['cull']=!(0x217c+-0x106b+-0x10*0x111);}const _0x461603=It['meshInstan'+'ce'];_0x3c925e['immediate']['drawMesh'](_0x461603['material'],_0x461603['node']['worldTrans'+'form'],null,_0x461603,_0x3c925e['defaultDra'+'wLayer']);}}};h(It,'gridPositi'+'ons',[]),h(It,'gridColors',[]),h(It,'mesh',null),h(It,'meshInstan'+'ce',null),h(It,'colorLow',new I(-0xa96+-0x19*0x169+0x2dd8,-0x5fe*-0x4+0x409*-0x5+0x61*-0xa,-0x269c+0x1*-0xd8d+0x4be*0xb)),h(It,'colorHigh',new I(-0x25*0xd0+-0x1a1+0x1fd9,0x5*0x12e+-0x209*-0x9+0x1837*-0x1,0x2*-0xd0f+-0x1*-0xc2e+-0x4*-0x37c));let Df=It;const LE='muPIHORMLN'+'DCz4DxVR/Z'+'vYfAUVEFR4'+'7KRIC4nwAA'+'AAAP7WxlhD'+'6Ci+2HCe7B'+'F8jRAPZwdH'+'2UPpI5PdLC'+'JdkvG4UTaN'+'DJ/0crAzne'+'71GCrb4kbd'+'MjjCEGzdX6'+'fNxDMLJq5x'+'keoIVTdfiZ'+'kodEeArmZm'+'p/FQzFjD4x'+'8iOW7Dg64n'+'+3mWqyEwLx'+'XT8zoJXfbw'+'8QJKDCaarU'+'YyTlMzNFHb'+'gUe9IQV7g4'+'YOgtSKpIFZ'+'J0qERm7u4P'+'pmiF89ktHW'+'CywaGmD6h+'+'hfh2/Zd8KY'+'lKqqo4Cem4'+'T42bT/Z9Fp'+'CQF1hhSjfB'+'zZ5XFn/y3j'+'egWC6u86Ku'+'ELRundQS/1'+'Rp+XuKKGIg'+'Rv3CvP5y74'+'9yqLlFO495'+'JOT3+f2CXg'+'d71npU0/Kj'+'jpkZucbJ5m'+'78IVyuSrSo'+'zc9jgBUhDr'+'z0hFsyb7LF'+'UH9//wJbBg'+'LdNWJZObfK'+'xrNt8TliLA'+'9w9sXFv6g2'+'6iXpf6r/Bq'+'cAusj/QzGB'+'ZuoUGeEtw8'+'BCXCZ3jUiw'+'4hvM18ZVql'+'UD3C40LAFX'+'W6FRjuAZGR'+'Nstb0/qVk4'+'skwyT+MHrv'+'RorI4rKHVM'+'WZmKyAkzL/'+'78u/9pMQuX'+'14pZN50b2P'+'Hn6fRxeaCQ'+'LsfT4dpvIk'+'WWFuFVENZI'+'h+8xgR6lU+'+'85W0PPdAu1'+'j99kcCG40J'+'BQa4JMyRzq'+'6qriOBLtqF'+'87vpCJan0W'+'EduVr/mOYk'+'S00urVA0mA'+'6M3031+GmG'+'mW48PaJDYO'+'EIb3bIXWPa'+'LoAOEinX1T'+'N3+/vwhG6n'+'qJu0TdHped'+'S7QsGZIoxH'+'3nQYYjQP1j'+'mbahlbNngw'+'5ogsGk1y50'+'XZyUmQBY+/'+'JBJ3Unu4dA'+'pm+WmPwHPU'+'9gLb+4mHh4'+'BiY6M86pq+'+'WeTyWdI3s0'+'CXPEtHGXZ8'+'zMZgUoyRom'+'Bi1VdazzuN'+'+WOmQ9Pa0Z'+'0tlNopUi8A'+'J4x2Xn4mmO'+'KEbXLxlbVs'+'Wu8XhuDGYF'+'OGCRVdSqDP'+'XrHU5SDdUl'+'ti3k5///SB'+'wzTMwK3L4a'+'1H7w4lnpEa'+'s6////AfX8'+('asyIBfeFXV'+'J3tgvxQ/bl'+'ZuUKyIODIf'+'r/UzdWNu7p'+'ciLBpdZRZ4'+'pIfZ1R6szq'+'+XNxkGG///'+'8EZFpu7VHA'+'hFWqHEOrB9'+'unw+YQa5o8'+'/9IR/V5/zq'+'+986rJSyfg'+'JKt2u9hxU1'+'wzyQWPjJGv'+'zG9+eWWxGF'+'OHVKqI4jBQ'+'ALwZZswesn'+'vZ2UmmkEXd'+'iRpz8B+oWE'+'7PY70ZTMnd'+'isYSXg2Tqo'+'I+3y9BxbnY'+'2Y4EfbdcRh'+'AvG59NqDEN'+'NYbxKvK5HJ'+'fPG5M+Wi2A'+'cpLVJrD6ca'+'iEOzgSoVNS'+'gQK8fm2M3z'+'GcF4xtClv/'+'8Hs9oD7C3j'+'itTATYNQxm'+'KqKf1LhIxz'+'f1bmfiNn7U'+'KFmcJu4sLq'+'VLwxGSue3t'+'aBEyknkw5h'+'XTsUCvqmmL'+'/f8n/w0giR'+'7Hu/9EHvpk'+'z3yuu64Tio'+'MkzdTJ30i0'+'+hFnQqW1+v'+'9mMwq+z9qG'+'X0UFu9Momv'+'VG2xod6vc1'+'2AAAAACq7s'+'Ga5qptFR0j'+'F3nQt/D+7P'+'ibKYahaxP3'+'hEixPbGi9n'+'wNf2LAa7Lk'+'EZRKxzXeCD'+'64Xpii5n+8'+'Kpg8eHIv7A'+'WXZltgMoGl'+'tmoJ0XGdOC'+'L8WkzphvR9'+'N2o3ARSZ42'+'l5e5Pe4B58'+'MCRlP3EKv+'+'mcloknH+ft'+'o5BWsmEutW'+'6KvjOVsznF'+'CktkSczVk4'+'aGvj9VXlRc'+'LeDoKG8RkB'+'gdcNG2bf8H'+'UL4MT2DM+a'+'r7NImJhKpx'+'akX4Vk0CnP'+'+/XNhl5UsP'+'0lXgeZXPoD'+'BMSW5An+DX'+'lTCO5FQGwS'+'PYwHLKYVIi'+'mEdAoVe49r'+'QLaaNcye5L'+'xU2/c5TijT'+'gJtD5eQQIe'+'1snxauj5jZ'+'sxJBUJdoP/'+'zqpjqv8qBr'+'uoPsVsP8N4'+'4PCUW5Dd0D'+'zqjSS/Dl5m'+'I9cn1w2ndN'+'/0KAEm1QAA'+'AACwu6KM/0'+'83IBbH5bPa'+'/9oHUwcU8I'+'9v3j6/v18Q'+'Yammrf+P6V'+'L///8BrpuM'+'3fOLCxaLNO'+'FNF1zPbPYT'+'P65ni6njft'+'4eVcyrVXRQ'+'Frs52tr35S'+'tiSp55edVD')+('CBC0H5rIfa'+'c6nzUwxQSt'+'7y15QoKb+5'+'zebEQUmVbr'+'PjXuUa19Ey'+'7sqXMiSUKH'+'aw72PJKDdr'+'utJoQr3u6l'+'EYJ8K0MakW'+'Kj9zjTFi4X'+'94TsKYco0G'+'rLeB60M6D8'+'M/80rhXUW8'+'iMequg8y5F'+'838WI0+gp3'+'GBN5Kj/xIO'+'xTWQuUaPV/'+'LwvARr1VH9'+'3BFgGZR1MF'+'W0Ua30GbYm'+'dnAgo9VWy8'+'SQtpDUgGE2'+'r2zq2eTEMC'+'L7sMKmE1hc'+'hVhuF/TCq9'+'iXKEm86kzO'+'f3Rp9ZnCxb'+'pDUj+FKNxV'+'yXe6pVZkRX'+'v/m95SnB/E'+'B8aME29N85'+'MtAcDoXWlo'+'r8De2Q5Dg1'+'tar+8wgiZu'+'fbMam81j//'+'ASUohoR/zS'+'h2KG4bvT6m'+'kIPz6C5/98'+'DC3LaWlaEZ'+'1zA5JORZRu'+'6J/a0GY285'+'sEYzw71YqO'+'T1ihAG0z5S'+'Dt1xNiDQWZ'+'dFpndArp6x'+'WhqSDkRb4k'+'SJEHb9liPv'+'w7uLV/6i5M'+'Vf//A9Qjr8'+'xkAEUh+KDI'+'+zdtJ68d6M'+'BOktg1iyp/'+'SCq8O9f5pb'+'amn1VVVQPR'+'TWqNBvhQKa'+'07s6P0lc9L'+'uu/3gw4Hey'+'OUfz8MxMwV'+'4UQhua+t9c'+'r4bz/nIB2w'+'nDSK1K7I94'+'M+s6C84hta'+'X/CNlMQUSs'+'2KJO+yaebf'+'TbkNX5yWcq'+'EJevo0vbKU'+'iETuFXiL01'+'9A3E+lmsyZ'+'MwXrXLLiQA'+'Z5t9+jI3Jo'+'bhJTMiDH5Z'+'OQ+8Jau555'+'5NMjHSscP9'+'qCVaa40doh'+'+1a3Ukf6jq'+'BmLddgh79/'+'fwTfCyqiul'+'dNkUoy+nUp'+'+4nerwg0Oj'+'tGv2x485PJ'+'OJvUEokNhY'+'IdWjpx7BWk'+'0VZGWOp3jS'+'FTJ2bnu6KC'+'duZtG/UcBC'+'9RZ3W/jMSf'+'SMw4Etr/Do'+'D/XYP2V5Ov'+'w+YoM3F5g2'+'dGLdvuG6Zk'+'VGLE6Dk5Zr'+'+sdSyGliJP'+'1y2OFf/KFO'+'0RWO+3gsGh'+'esTnfZVpTd'+'8/HwgO216g'+'waqo+vY3Tl'+'jfJWowY+i0'+'p0Os4SLn/1'+'wLqDHMlszg')+('gmT/D8MRFz'+'s+pLv6LNJS'+'sNZ/r41mWi'+'/rF6ZcKp/y'+'zJdK0VU44h'+'skq3RGpgO6'+'mIpJDsf/mZ'+'kFrz0yYOML'+'buaj/wp1v7'+'JMFM5eqvBh'+'mTd7U8frQA'+'tHtys4zgpj'+'ZmzUhOVTfN'+'NLifElGXAD'+'lqHGKrkBT/'+'nYwX8ZRm3R'+'jvyPvjKyEq'+'EGKUpVnvOG'+'x+NKPHiWM/'+'/ZDpDVGvvr'+'jmk8RPF/wi'+'YZD3+Us8YC'+'XjrVOfjdd1'+'UPAfjLp8jg'+'Sn4me7DPTp'+'z1Ggy9XL80'+'guFO7ECT10'+'AvILKfD18Q'+'x+KY/f8aRq'+'u0oOO8hfKR'+'FZa9PUJwCs'+'p6VdZz6LFk'+'m2b9Pl2LIi'+'fCwzRy7Tpd'+'G2uAtOxP2O'+'emY26bJMa9'+'ZGSLIRlMsg'+'pDpnDJwd0o'+'a5pQ13x1hr'+'Hf52HpulUW'+'onGWsfXZbS'+'QYKu9bnEN7'+'6ciQih0opN'+'3deDVrbrxo'+'rfVlnCmL1R'+'9zq3ePGWIv'+'21c7pW8kEi'+'FTM5JX8dAw'+'867s/60cf7'+'9/BH+MDFCZ'+'BHlz1L+qGO'+'Jf/1txhhmr'+'f3//As+RIJ'+'wevDb+fgNX'+'VeHw67QptZ'+'egayhrEwr5'+'Gy+EPo1RLa'+'MtPbqOZYoV'+'zXzwzjMFWZ'+'xyUG9YUIf6'+'////AQWy84'+'iAygLk9COt'+'Xt92+0mT/x'+'g0zMzMBeLk'+'b8y9SL2TDX'+'gSX422hDgp'+'GNLJyuPioA'+'+YJ91G8znr'+'pNqHkwYysc'+'aJDEc9Vc+j'+'4cXle3hvcd'+'2JqDQH2lBZ'+'xDn6mUTs0b'+'75raMvbs72'+'7codX01Anj'+'8f3wir9P2x'+'QaQ22v/TxC'+'MglKDFoTja'+'P01XTLgxnT'+'vPv02JgEUr'+'W6UDgOnobF'+'pLdvKdlypg'+'IzPcq14fgX'+'U5tvVW0FEs'+'7VRlsG1IyA'+'69fN4n+awH'+'hT34cE+xUv'+'dj86C8LgAs'+'FheTjI9Ht9'+'EyYAAAAAAV'+'BVKRx2wLgU'+'TI0/2QfyJo'+'2riRw3JDqz'+'EShmx/Lifo'+'6mRkQVbS7X'+'53t+EvKxcX'+'ogtdts31e9'+'MRHdcHgsA8'+'rt4/mt2unl'+'zQ/wsU8Gu7')+('+W6Oj7eD8E'+'QdDp5XlCsV'+'aS/AV/t5Zp'+'POHR3rGpyA'+'Je9IPV+xMr'+'BL1Oz/8MQh'+'Fs31h0N1cV'+'nq371uqIJY'+'HyafKH1jte'+'AK3VpMXBcu'+'C+yt0ZeKyR'+'UY4QhdrJJ4'+'tJ1wg3Hu6k'+'DsbovxupTM'+'kGdRrm8oZS'+'oYPbJ+PwH/'+'xotgTdkA12'+'05vUEfnqkI'+'04T/fnnd1f'+'iZW5AwNcgg'+'d7fi4j5zas'+'mcntZexIxq'+'FZQMzMJpfn'+'dmI5jn17cg'+'n5EV5t9XN0'+'C///8Q9wlJ'+'pMGXdoiaMT'+'G2sVyHQsn8'+'mWRISCLNG7'+'77S0OuDRP2'+'GlLcJ2UeOg'+'7Fo8hTNPeJ'+'//iTJhyqxh'+'KRUntdXOih'+'q2wfKfH///'+'8B0GGrwT+f'+'SOQRdctKxj'+'jGCSS11d6B'+'lQ9BDfE0J6'+'Z25FaNTKGp'+'FKNCMr2G/0'+'41KpWwBLVe'+'1k08vncseQ'+'bKZdXi8x1t'+'9XA45U/Wd4'+'3D9wAh3Tal'+'0aiLVzGPus'+'OZ1F+W3TWo'+'qlX/A95+dN'+'ef11TsuGfu'+'l+ctGssldk'+'3fqpfqh+43'+'XTxL42+leS'+'HoF/dWHYGX'+'6maqUEuLX7'+'UB+r/6Llr4'+'LKocbVIeu+'+'hB9QTPfz9f'+'CP8RyWmX4S'+'mbhMFsNtCi'+'jV7lVcwejL'+'Klvl0GfCnd'+'nWV7/39VBr'+'tTRuUx92ok'+'e3GBgKkC5f'+'dGK0YvNK+x'+'enKaDmsHDj'+'NFUM3NMz3Z'+'iXXFuLgojo'+'sPVCDEl2W5'+'BjX3Ms+j0G'+'SqACHmh0+R'+'PWyuNm/Qe8'+'vFf9AW7N1u'+'RaxWirrUyt'+'qEJnJ4/Flm'+'8hSoiZ2NQB'+'sS6w/yQlC4'+'gCaFo8q4ny'+'Y6AFdo4hiw'+'hBXzbNKKvZ'+'vktCjSCukR'+'R/BbYVbNwZ'+'i2Yh3hGodE'+'acLW8qijiW'+'JODf0P2bhf'+'aiPspPT4lY'+'JBgi/KfcFw'+'CfvyUIgkJO'+'v///8CG/JE'+'epRBLaMFE+'+'2TgrqsJXOV'+'OWHt6g/bFw'+'VLLMVBsMR5'+'0dis/39/Al'+'BX+/rMTJkU'+'QrnlxpR2iu'+'0Tp8tATkRY'+'GmDIrcAiRP'+'8PjoWIlb7/')+('0ecTdSCE9Y'+'58+a+n/Fov'+'JQTVF4F2jA'+'xMZhTgrM/K'+'VS5BQu6bVb'+'kWY5HXnxRs'+'hks3urDdW4'+'RkWp4M4TeL'+'mFK5KF/uHk'+'kiO5Kv96Ri'+'oH984v/CSD'+'BnG+BwlnU9'+'B+o7Y+0X0N'+'ob+0pLsStx'+'jvPXMy2eCp'+'zhOWV4XbOb'+'BHN4UE2sLQ'+'/DIqXhOzxV'+'f38GlTi6aG'+'7EnePO7TRJ'+'m9yOfUUcqq'+'1I2iQHrVDq'+'n3TUNRi/lM'+'w8KbMW/3/n'+'qCz/Ef8PoW'+'5Qxcz2yHR/'+'f78EPB2Stb'+'d+ZFmfNTUY'+'ILzsb9YNhp'+'aHcaymYrBi'+'NHmFE3Y4cc'+'YJ25Prqm7z'+'HobGHED8/9'+'3ZNlWro9vc'+'KivGZs31Ui'+'K1k5zjUhex'+'UgbqJb+fUT'+'jxce/7Zly8'+'a5KMC1fX5n'+'fjPgibdvzb'+'XV1jRT2asX'+'vmSAusaLdq'+'1TSIJ8fXIN'+'k5AtT34EWP'+'AsfP9IFQqM'+'5K11O6saoH'+'JA==');let Ri=null;const Ly=()=>{if(!Ri){const _0x476426=atob(LE);Ri=Uint8Array['from'](_0x476426,_0x3f12e8=>_0x3f12e8['charCodeAt'](-0x16e9+-0x846+0x1f2f));}},RE=()=>(Ly(),Ri);class OE{constructor(_0x4ae84b=-0x16fe+-0x6*-0xef+0x1164){h(this,'seed',0x104e+0x1054+-0x20a2),(this['seed']=_0x4ae84b*(-0xbe7*-0x1+0x26ec+-0x32cf),Ly());}['_next'](){this['seed']=(this['seed']+(-0x2*-0x3fa+-0x7*0x4cc+0x19a4))%Ri['length'];}['value'](){return this['_next'](),Ri[this['seed']]/(-0x24fd+0x1f2b+0x6d1);}['vec4'](_0x32a343=new ae()){return this['_next'](),_0x32a343['set'](Ri[this['seed']],Ri[this['seed']+(0x1*-0x381+0x2240+-0x1ebe)],Ri[this['seed']+(-0x2344*-0x1+0x395*-0xa+0x24*0x4)],Ri[this['seed']+(0x22e1+0x1445+-0x5*0xb07)])['mulScalar']((-0xa85*0x1+0x3bd+0x9*0xc1)/(-0x1e0f+-0x2*-0x9b9+-0x5ce*-0x2));}}const FE=[new I(-(-0x1*-0x11f9+0x1d2c+0x7*-0x6bc),0x2598+-0x97*0x26+-0x2*0x797,0x148e+0x731*-0x3+-0x1*-0x105),new I(-0x51a+0x2664+-0x2149,-0x9*0x257+0x1a78+0x5*-0x115,0x1204+0x36f+-0x121*0x13),new I(0x1*0x1fdb+-0xdc*0x29+0x361,-(0x1*0x805+-0x14cf*-0x1+-0x1cd3*0x1),0xc72+0x1*0x9ef+-0x11*0x151),new I(-0x8df+-0x3*-0x1c1+0x54*0xb,0x181*0x17+-0x499*-0x1+-0x272f,-0x151f+-0x12bd+0x27dc),new I(0x10f0+-0x1*0x154f+-0x175*-0x3,0x2*-0xe8c+0x95d*0x1+0x13bb,-(-0x26e5+0x4dd+0x2209)),new I(0xd6b+-0x1*-0xc9+-0xe34,0x1f8f+0x77*0x7+-0x22d0,0x2*-0x12e1+-0x1*-0x12fa+0x12c9)];class NE{constructor(){h(this,'colors',new Float32Array(-0x7a*0x1e+-0x1c15+0x2a73*0x1));}['update'](_0x44b3cb,_0x3027f5){const _0x57d1dc=this['colors'],{r:_0x416482,g:_0x36e2c6,b:_0x19b4c4}=_0x44b3cb;for(let _0x18f0e7=0x1*-0xb77+-0x12a6+-0x251*-0xd;_0x18f0e7<0xcb9+0x26d+-0xf20;_0x18f0e7++)_0x57d1dc[_0x18f0e7*(0x1206+0x2361+0x11cc*-0x3)]=_0x416482,_0x57d1dc[_0x18f0e7*(-0x4ca+0xc4b*-0x1+0x1118)+(-0x62*-0x66+0x25*0x6c+-0x36a7)]=_0x36e2c6,_0x57d1dc[_0x18f0e7*(-0x895+-0xa9*0x12+0x147a)+(0x12b1+-0x31d+-0xf92*0x1)]=_0x19b4c4;for(let _0x2e2dae=-0x1e08+-0xbd*0x12+-0x455*-0xa;_0x2e2dae<_0x3027f5['length'];_0x2e2dae++){const _0x4275e5=_0x3027f5[_0x2e2dae];if(_0x4275e5['_type']===ve)for(let _0x432da7=0x1d91+0x1*0x662+-0x23f3;_0x432da7<-0xcae*-0x1+-0x1e80+0x11d8;_0x432da7++){const _0x5657b2=Math['max'](FE[_0x432da7]['dot'](_0x4275e5['_direction']),0x147*0x3+-0x31*-0x85+0x146*-0x17)*_0x4275e5['_intensity'],_0x57432a=_0x4275e5['_color'];_0x57d1dc[_0x432da7*(-0x1*0x1e7d+0x8*-0x277+0x3238)]+=_0x57432a['r']*_0x5657b2,_0x57d1dc[_0x432da7*(-0x1*-0x1990+0xd47+0x8e*-0x46)+(-0x23d5+-0xd*0x1+0x1*0x23e3)]+=_0x57432a['g']*_0x5657b2,_0x57d1dc[_0x432da7*(-0x6*-0x25+-0x77d+-0x6a2*-0x1)+(0x713+0xc78+-0x683*0x3)]+=_0x57432a['b']*_0x5657b2;}}}}const kE=(_0x4ec3af,_0x47febb,_0x5e1396,_0x2dc19d)=>{const _0x18f960=new _e(_0x4ec3af,{'name':''+_0x47febb+_0x5e1396,'width':_0x5e1396,'height':_0x5e1396,'format':Oe,'addressU':pt,'addressV':pt,'type':di,'magFilter':Te,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x84*-0xe+0xdc+-0x27*0x35)});return _0x18f960['lock']()['set'](_0x2dc19d),_0x18f960['unlock'](),_0x18f960;},UE=new Ht(),BE=_0x3e6a80=>UE['get'](_0x3e6a80,()=>{const _0x218697=RE(),_0x36f141=Math['sqrt'](_0x218697['length']/(-0xa5*0x35+0x7bb+-0xd39*-0x2));return kE(_0x3e6a80,'BlueNoise',_0x36f141,_0x218697);});class na{constructor(_0xf30014,_0x1fa753){this['texture']=_0xf30014,this['cached']=!(0x1db+0x12f2*-0x2+0x1205*0x2),this['renderTarg'+'ets']=_0x1fa753;}['destroy'](){this['texture']&&(this['texture']['destroy'](),this['texture']=null);const _0x1341e2=this['renderTarg'+'ets'];for(let _0x12e1a8=-0x107*0x25+-0x39*0x97+0x23d1*0x2;_0x12e1a8<_0x1341e2['length'];_0x12e1a8++)_0x1341e2[_0x12e1a8]['destroy']();this['renderTarg'+'ets']['length']=-0x16e6+0x5e3*-0x1+0x1cc9;}static['create'](_0x1310ad,_0x2ace77){let _0x525062=null;return _0x2ace77['_type']===Ye?_0x525062=this['createCube'+'map'](_0x1310ad,_0x2ace77['_shadowRes'+'olution'],_0x2ace77['_shadowTyp'+'e']):_0x525062=this['create2dMa'+'p'](_0x1310ad,_0x2ace77['_shadowRes'+'olution'],_0x2ace77['_shadowTyp'+'e']),_0x525062;}static['createAtla'+'s'](_0x4d607b,_0x17096b,_0x5b1a8c){const _0x1fd994=this['create2dMa'+'p'](_0x4d607b,_0x17096b,_0x5b1a8c),_0x343eae=_0x1fd994['renderTarg'+'ets'],_0xe1c3f1=_0x343eae[0x1873+0x1*0x25f9+-0x3e6c];for(let _0x18033c=-0x23a0+0x5*0x43c+0x172*0xa;_0x18033c<-0xfd3+0x1ba2+-0xbca;_0x18033c++)_0x343eae['push'](_0xe1c3f1);return _0x1fd994;}static['create2dMa'+'p'](_0x5ed0c4,_0x5dc91b,_0x4c069f){var _0x5a92ff;const _0x587c71=Bi['get'](_0x4c069f);M['assert'](_0x587c71);let _0x3c436c=_0x587c71['format'];_0x3c436c===Hi&&!_0x5ed0c4['textureFlo'+'atRenderab'+'le']&&_0x5ed0c4['textureHal'+'fFloatRend'+'erable']&&(_0x3c436c=Lc);const _0x5c460a=(_0x5a92ff=Lt['get'](_0x3c436c))==null?void(-0x1cbd*0x1+0x1df1+0x4*-0x4d):_0x5a92ff['name'];let _0x5714af=_t;_0x4c069f===ym&&(_0x5714af=_0x5ed0c4['extTexture'+'FloatLinea'+'r']?_t:Te),_0x4c069f===No&&(_0x5714af=Te);const _0x444b16=new _e(_0x5ed0c4,{'profilerHint':xf,'format':_0x3c436c,'width':_0x5dc91b,'height':_0x5dc91b,'mipmaps':!(0x1ea5+0x1a6e+0x1*-0x3912),'minFilter':_0x5714af,'magFilter':_0x5714af,'addressU':ue,'addressV':ue,'name':'ShadowMap2'+'D_'+_0x5c460a});let _0x430372=null;return _0x587c71!=null&&_0x587c71['pcf']?(_0x444b16['compareOnR'+'ead']=!(-0x83*0x45+0x1*0x6b+0x22e4),_0x444b16['compareFun'+'c']=Dh,_0x430372=new vt({'depthBuffer':_0x444b16})):_0x430372=new vt({'colorBuffer':_0x444b16,'depth':!(-0x8ed*-0x1+-0x1225+-0x8*-0x127)}),_0x5ed0c4['isWebGPU']&&(_0x430372['flipY']=!(0x1*-0x1005+-0x235a+0x335f)),new na(_0x444b16,[_0x430372]);}static['createCube'+'map'](_0x501234,_0x38f0e3,_0x78b123){var _0x9fc245;const _0x3e9d38=Bi['get'](_0x78b123);M['assert'](_0x3e9d38);const _0x564600=(_0x9fc245=Lt['get'](_0x3e9d38['format']))==null?void(0x1c*-0x14c+-0x168f+-0x869*-0x7):_0x9fc245['name'],_0x16e70e=_0x78b123===No,_0x2687bf=_0x16e70e?Te:_t,_0x409bd2=new _e(_0x501234,{'profilerHint':xf,'format':_0x3e9d38==null?void(-0x5de+0x19a5+0x3d*-0x53):_0x3e9d38['format'],'width':_0x38f0e3,'height':_0x38f0e3,'cubemap':!(-0x8f*-0x2f+0x25b4+0x1*-0x3ff5),'mipmaps':!(0x1b67+-0x24*0x34+0x6*-0x359),'minFilter':_0x2687bf,'magFilter':_0x2687bf,'addressU':ue,'addressV':ue,'name':'ShadowMapC'+'ube_'+_0x564600});_0x16e70e||(_0x409bd2['compareOnR'+'ead']=!(0xb+0x1537*0x1+-0x1542),_0x409bd2['compareFun'+'c']=Dh);const _0x23fc80=[];for(let _0x4e85ef=-0xa1a+0x253*0x7+-0x62b;_0x4e85ef<0x5*0xf4+-0x1*0x2632+0x2174;_0x4e85ef++)_0x16e70e?_0x23fc80['push'](new vt({'colorBuffer':_0x409bd2,'face':_0x4e85ef,'depth':!(0x2010+-0x602*-0x6+-0x3*0x16b4)})):_0x23fc80['push'](new vt({'depthBuffer':_0x409bd2,'face':_0x4e85ef}));return new na(_0x409bd2,_0x23fc80);}}const zE=[],VE=[],ui=new ae(),Ed=new ae();class Ad{constructor(_0x5dc44d){this['size']=Math['floor'](_0x5dc44d['w']*(-0x1*0x45e+-0x10c*0x3+-0xb82*-0x1)),this['used']=!(0x1f05*0x1+-0x1e50+-0x1*0xb4),this['lightId']=-(-0x13bf+0x2621+-0x1261),this['rect']=_0x5dc44d;}}class GE{constructor(_0x34a860){this['device']=_0x34a860,this['version']=-0x44*0x52+-0x201+0xcb*0x1e,this['shadowAtla'+'sResolutio'+'n']=-0x14df*-0x1+0x157+0x11*-0xd6,this['shadowAtla'+'s']=null,this['shadowEdge'+'Pixels']=-0xb5d*-0x1+0xd6*-0x1f+0xe90,this['cookieAtla'+'sResolutio'+'n']=0x1*0x10d2+-0x181f+-0x1*-0x751,this['cookieAtla'+'s']=new _e(this['device'],{'name':'CookieAtla'+'s','width':this['cookieAtla'+'sResolutio'+'n'],'height':this['cookieAtla'+'sResolutio'+'n'],'format':hs,'cubemap':!(0x7a8+0x1*-0x1df9+0x1652),'mipmaps':!(-0x2*0x5c+-0xf98+-0x1051*-0x1),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue}),this['cookieRend'+'erTarget']=new vt({'colorBuffer':this['cookieAtla'+'s'],'depth':!(0x1*0x14c6+-0x1443+-0x82),'flipY':!(-0x1105*-0x1+-0xf13*-0x1+0x34*-0x9e)}),this['slots']=[],this['atlasSplit']=[],this['cubeSlotsO'+'ffsets']=[new J(0x1328+-0x758+-0xbd0,0x130f+0x48f*0x1+-0x1*0x179e),new J(0x106e+0x555*0x7+-0x35c1,0x1*0x12a4+0x1*0x16f9+-0x299c),new J(-0x17*-0x8f+0x5e*-0x37+0x75a,-0x8b3*-0x3+-0x1857+-0x1c2),new J(-0x19e7+0xad1+0xf17*0x1,-0x1*-0xd8b+0x1f*0xb8+0x28f*-0xe),new J(-0xf35+0xd*-0x255+0x2d88,-0x12b*0x5+-0x19e7*-0x1+-0x1410),new J(0x4bd*-0x7+-0x2*0xe62+0x3df1,0x10fa+0x1ad2+0xe99*-0x3)],this['scissorVec']=new ae(),this['allocateSh'+'adowAtlas'](0x3*-0x7c9+0xc9a+-0x22*-0x51),this['allocateCo'+'okieAtlas'](0x2536+-0x9e0+-0x1b55),this['allocateUn'+'iforms']();}['destroy'](){this['destroySha'+'dowAtlas'](),this['destroyCoo'+'kieAtlas']();}['destroySha'+'dowAtlas'](){var _0xc77a12;(_0xc77a12=this['shadowAtla'+'s'])==null||_0xc77a12['destroy'](),this['shadowAtla'+'s']=null;}['destroyCoo'+'kieAtlas'](){var _0x5c487e,_0x2dc9c7;(_0x5c487e=this['cookieAtla'+'s'])==null||_0x5c487e['destroy'](),this['cookieAtla'+'s']=null,(_0x2dc9c7=this['cookieRend'+'erTarget'])==null||_0x2dc9c7['destroy'](),this['cookieRend'+'erTarget']=null;}['allocateSh'+'adowAtlas'](_0x51c55b,_0x5f235d=ks){var _0x2d1a35;const _0x67a8bd=(_0x2d1a35=this['shadowAtla'+'s'])==null?void(0x4*0x991+-0x135a+0x327*-0x6):_0x2d1a35['texture']['format'],_0x5780c3=Bi['get'](_0x5f235d)['format'];if(!this['shadowAtla'+'s']||this['shadowAtla'+'s']['texture']['width']!==_0x51c55b||_0x67a8bd!==_0x5780c3){this['version']++,this['destroySha'+'dowAtlas'](),this['shadowAtla'+'s']=na['createAtla'+'s'](this['device'],_0x51c55b,_0x5f235d),this['shadowAtla'+'s']['cached']=!(0x18ca+-0x19*0xd3+-0x1*0x42f);const _0x2e45a5=(-0x9*0x3bb+0x177*0x7+0x1756)/this['shadowAtla'+'sResolutio'+'n'];this['scissorVec']['set'](_0x2e45a5,_0x2e45a5,-(0x22e7+-0x2c5*0x2+-0x5df*0x5)*_0x2e45a5,-(-0xa*0x9c+-0x99a+0xfb4)*_0x2e45a5);}}['allocateCo'+'okieAtlas'](_0x40a169){this['cookieAtla'+'s']['width']!==_0x40a169&&(this['cookieRend'+'erTarget']['resize'](_0x40a169,_0x40a169),this['version']++);}['allocateUn'+'iforms'](){this['_shadowAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('shadowAtla'+'sTexture'),this['_shadowAtl'+'asParamsId']=this['device']['scope']['resolve']('shadowAtla'+'sParams'),this['_shadowAtl'+'asParams']=new Float32Array(0x178c+-0x3*0x514+-0x84e),this['_cookieAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('cookieAtla'+'sTexture');}['updateUnif'+'orms'](){const _0xdd7729=this['shadowAtla'+'s']['renderTarg'+'ets'][0x5e9*-0x1+-0x1*-0x901+-0x318]['depthBuffe'+'r'];this['_shadowAtl'+'asTextureI'+'d']['setValue'](_0xdd7729),this['_shadowAtl'+'asParams'][0x5*-0x1a3+-0x11e4+0x1a13]=this['shadowAtla'+'sResolutio'+'n'],this['_shadowAtl'+'asParams'][0xb70+0x7*0x123+-0x1364]=this['shadowEdge'+'Pixels'],this['_shadowAtl'+'asParamsId']['setValue'](this['_shadowAtl'+'asParams']),this['_cookieAtl'+'asTextureI'+'d']['setValue'](this['cookieAtla'+'s']);}['subdivide'](_0x42b99e,_0x2436c0){let _0x39d2ee=_0x2436c0['atlasSplit'];if(!_0x39d2ee){const _0x466cd4=Math['ceil'](Math['sqrt'](_0x42b99e));_0x39d2ee=VE,_0x39d2ee[-0x1a6+0xeb7*-0x1+0x105d]=_0x466cd4,_0x39d2ee['length']=0x10e1+0x2f4+0x3*-0x69c;}if(!((_0x280329,_0x128dd2)=>_0x280329['length']===_0x128dd2['length']&&_0x280329['every']((_0x443676,_0x1c3b32)=>_0x443676===_0x128dd2[_0x1c3b32]))(_0x39d2ee,this['atlasSplit'])){this['version']++,this['slots']['length']=0x18c4+-0x1f98+-0x4c*-0x17,this['atlasSplit']['length']=0x911*0x1+0x28*-0x7f+0x1*0xac7,this['atlasSplit']['push'](..._0x39d2ee);const _0x32b50e=this['atlasSplit'][-0x22c4+0x5*-0x1f+0x235f];if(_0x32b50e>0x1779+-0xd4c*-0x1+-0x34*0xb5){const _0x5f17a7=(-0xb85+0x1ba7+-0x1021*0x1)/_0x32b50e;for(let _0x5a6630=0xfde+0x205b+-0x3039;_0x5a6630<_0x32b50e;_0x5a6630++)for(let _0x510035=0x173d*-0x1+-0x121+0x2*0xc2f;_0x510035<_0x32b50e;_0x510035++){const _0x4356e2=new ae(_0x5a6630*_0x5f17a7,_0x510035*_0x5f17a7,_0x5f17a7,_0x5f17a7),_0x18f3ce=this['atlasSplit'][-0x1d8+0x2*-0x128d+0x26f3+_0x5a6630*_0x32b50e+_0x510035];if(_0x18f3ce>-0x16b6+0x1*0x1b9d+0x1*-0x4e6){for(let _0x293b7a=-0x24b1+-0x2367*-0x1+0x14a;_0x293b7a<_0x18f3ce;_0x293b7a++)for(let _0xa6a98=0x2208+0x200*-0xc+0x141*-0x8;_0xa6a98<_0x18f3ce;_0xa6a98++){const _0x370e50=_0x5f17a7/_0x18f3ce,_0x363ac9=new ae(_0x4356e2['x']+_0x293b7a*_0x370e50,_0x4356e2['y']+_0xa6a98*_0x370e50,_0x370e50,_0x370e50);this['slots']['push'](new Ad(_0x363ac9));}}else this['slots']['push'](new Ad(_0x4356e2));}}else this['slots']['push'](new Ad(new ae(0xc1+0xd33+0xdf4*-0x1,0x4e7*-0x6+0xe24+-0xaa*-0x17,-0x1*-0x1464+0x1331+-0x2794,0x1d38+0x1*-0x14bb+0x3*-0x2d4)));this['slots']['sort']((_0x4be8c3,_0x88e3be)=>_0x88e3be['size']-_0x4be8c3['size']);}}['collectLig'+'hts'](_0x259bdc,_0x55414d){const _0x2c8cc0=_0x55414d['cookiesEna'+'bled'],_0x4cb3c8=_0x55414d['shadowsEna'+'bled'];let _0x294363=!(0x2*-0x9a3+-0x3*-0x702+-0x1*0x1bf),_0x8bb393=!(0x1*-0x2041+-0x127d*0x2+0x1c*0x279);const _0x30ff48=zE;return _0x30ff48['length']=-0x7c9+-0x4ba+0xc83*0x1,(_0x2c8cc0||_0x4cb3c8)&&(_0x1e7579=>{for(let _0x135737=0x8b8+0x2453*-0x1+0x1b9b*0x1;_0x135737<_0x1e7579['length'];_0x135737++){const _0x198ab7=_0x1e7579[_0x135737];if(_0x198ab7['visibleThi'+'sFrame']){const _0xaa0599=_0x4cb3c8&&_0x198ab7['castShadow'+'s'],_0x3c5002=_0x2c8cc0&&!!_0x198ab7['cookie'];_0x294363||(_0x294363=_0xaa0599),_0x8bb393||(_0x8bb393=_0x3c5002),(_0xaa0599||_0x3c5002)&&_0x30ff48['push'](_0x198ab7);}}})(_0x259bdc),_0x30ff48['sort']((_0x9bf0e0,_0x33fe07)=>_0x33fe07['maxScreenS'+'ize']-_0x9bf0e0['maxScreenS'+'ize']),_0x294363&&this['allocateSh'+'adowAtlas'](this['shadowAtla'+'sResolutio'+'n'],_0x55414d['shadowType']),_0x8bb393&&this['allocateCo'+'okieAtlas'](this['cookieAtla'+'sResolutio'+'n']),(_0x294363||_0x8bb393)&&this['subdivide'](_0x30ff48['length'],_0x55414d),_0x30ff48;}['setupSlot'](_0x52e425,_0x507b48){_0x52e425['atlasViewp'+'ort']['copy'](_0x507b48);const _0xcc2478=_0x52e425['numShadowF'+'aces'];for(let _0x2b0c3d=-0xe9b+-0x5d9*-0x1+-0x26*-0x3b;_0x2b0c3d<_0xcc2478;_0x2b0c3d++)if(_0x52e425['castShadow'+'s']||_0x52e425['_cookie']){if(ui['copy'](_0x507b48),Ed['copy'](_0x507b48),_0x52e425['_type']===Ke&&ui['add'](this['scissorVec']),_0x52e425['_type']===Ye){const _0x1d681c=ui['z']/(-0x6a*0x11+0x1*-0x183b+0x8f*0x38),_0xefc8d9=this['cubeSlotsO'+'ffsets'][_0x2b0c3d];ui['x']+=_0x1d681c*_0xefc8d9['x'],ui['y']+=_0x1d681c*_0xefc8d9['y'],ui['z']=_0x1d681c,ui['w']=_0x1d681c,Ed['copy'](ui);}if(_0x52e425['castShadow'+'s']){const _0x11705b=_0x52e425['getRenderD'+'ata'](null,_0x2b0c3d);_0x11705b['shadowView'+'port']['copy'](ui),_0x11705b['shadowScis'+'sor']['copy'](Ed);}}}['assignSlot'](_0x5cb53f,_0x4997b5,_0x53fddd){_0x5cb53f['atlasViewp'+'ortAllocat'+'ed']=!(0x248a+-0x1950+0x3*-0x3be);const _0x11a0c0=this['slots'][_0x4997b5];_0x11a0c0['lightId']=_0x5cb53f['id'],_0x11a0c0['used']=!(-0xb3*-0x5+-0x166*0x16+-0xb3*-0x27),_0x53fddd&&(_0x5cb53f['atlasSlotU'+'pdated']=!(0x48+-0x4*-0x742+-0x1d50),_0x5cb53f['atlasVersi'+'on']=this['version'],_0x5cb53f['atlasSlotI'+'ndex']=_0x4997b5);}['update'](_0x1c321e,_0x4d8709){this['shadowAtla'+'sResolutio'+'n']=_0x4d8709['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x4d8709['cookieAtla'+'sResolutio'+'n'];const _0x374fd3=this['collectLig'+'hts'](_0x1c321e,_0x4d8709);if(_0x374fd3['length']>-0x6c+-0x37*0xa+-0x292*-0x1){const _0x31cb67=this['slots'];for(let _0x226909=0xe9+0x1426+-0x9*0x257;_0x226909<_0x31cb67['length'];_0x226909++)_0x31cb67[_0x226909]['used']=!(0x12e8+0x7*-0x275+0x4*-0x6d);const _0x55536b=Math['min'](_0x374fd3['length'],_0x31cb67['length']);for(let _0x226a4b=0x133c+-0x20e6*-0x1+0x3422*-0x1;_0x226a4b<_0x55536b;_0x226a4b++){const _0x3dd8ff=_0x374fd3[_0x226a4b];_0x3dd8ff['castShadow'+'s']&&(_0x3dd8ff['_shadowMap']=this['shadowAtla'+'s']);const _0x2dfe7f=_0x31cb67[_0x3dd8ff['atlasSlotI'+'ndex']];if(_0x3dd8ff['atlasVersi'+'on']===this['version']&&_0x3dd8ff['id']===(_0x2dfe7f==null?void(-0x36a*0x3+-0x2246+0x2c84):_0x2dfe7f['lightId'])){const _0x17a06b=_0x31cb67[_0x3dd8ff['atlasSlotI'+'ndex']];_0x17a06b['size']===_0x31cb67[_0x226a4b]['size']&&!_0x17a06b['used']&&this['assignSlot'](_0x3dd8ff,_0x3dd8ff['atlasSlotI'+'ndex'],!(-0x2e0*-0x1+0x1750+-0x1a2f*0x1));}}let _0x29a0fd=0x2220+-0x1*0x1b41+-0x6df;for(let _0x9002fc=0x1445*-0x1+-0x1*0x115c+-0xa9*-0x39;_0x9002fc<_0x55536b;_0x9002fc++){for(;_0x29a0fd<_0x31cb67['length']&&_0x31cb67[_0x29a0fd]['used'];)_0x29a0fd++;const _0x40a1c5=_0x374fd3[_0x9002fc];_0x40a1c5['atlasViewp'+'ortAllocat'+'ed']||this['assignSlot'](_0x40a1c5,_0x29a0fd,!(0x6*-0x494+-0x14c*-0x1e+-0x2*0x5b8));const _0x40c0f2=_0x31cb67[_0x40a1c5['atlasSlotI'+'ndex']];this['setupSlot'](_0x40a1c5,_0x40c0f2['rect']);}}this['updateUnif'+'orms']();}}class HE{constructor(){this['cache']=new Map();}['destroy'](){this['clear'](),this['cache']=null;}['clear'](){this['cache']['forEach'](_0x5a25bc=>{_0x5a25bc['forEach'](_0x1f9a46=>{_0x1f9a46['destroy']();});}),this['cache']['clear']();}['getKey'](_0x2cfa62){const _0x414ae8=_0x2cfa62['_type']===Ye,_0x308452=_0x2cfa62['_shadowTyp'+'e'],_0xd3a107=_0x2cfa62['_shadowRes'+'olution'];return _0x414ae8+'-'+_0x308452+'-'+_0xd3a107;}['get'](_0x4b04f1,_0xc7fbe3){const _0x317edd=this['getKey'](_0xc7fbe3),_0x4735a8=this['cache']['get'](_0x317edd);if(_0x4735a8&&_0x4735a8['length'])return _0x4735a8['pop']();const _0x117ee6=na['create'](_0x4b04f1,_0xc7fbe3);return _0x117ee6['cached']=!(0x1*-0x529+0xba8+-0x67f),_0x117ee6;}['add'](_0x4675f3,_0x2a4dd5){const _0x54a65b=this['getKey'](_0x4675f3),_0x35aa52=this['cache']['get'](_0x54a65b);_0x35aa52?_0x35aa52['push'](_0x2a4dd5):this['cache']['set'](_0x54a65b,[_0x2a4dd5]);}}class WE extends fs{constructor(_0x20651b,_0x46e1c0,_0x46e983,_0x4f488e,_0x21feee){super(_0x20651b),ca['setName'](this,this['name']+'-'+_0x46e983['_node']['name']),this['requiresCu'+'bemaps']=!(-0x9f4*-0x2+0x28f*-0x8+-0x1*-0x91),this['shadowRend'+'erer']=_0x46e1c0,this['light']=_0x46e983,this['face']=_0x4f488e,this['applyVsm']=_0x21feee,this['shadowCame'+'ra']=_0x46e1c0['prepareFac'+'e'](_0x46e983,null,_0x4f488e),_0x46e1c0['setupRende'+'rPass'](this,this['shadowCame'+'ra'],!(-0xe0c+0x21ba+-0x13ae));}['execute'](){this['shadowRend'+'erer']['renderFace'](this['light'],null,this['face'],!(-0x73*-0x49+0x1*0x1da2+-0x3e6c));}['after'](){this['applyVsm']&&this['shadowRend'+'erer']['renderVsm'](this['light'],this['shadowCame'+'ra']);}}class $E{constructor(_0x5546f0,_0x45bd8a){h(this,'shadowLigh'+'ts',[]),h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x5546f0,this['shadowRend'+'erer']=_0x45bd8a,this['device']=_0x5546f0['device']);}['cull'](_0x2703d4,_0x8e381,_0x714cd4=null){const _0x4bad08=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled'];_0x2703d4['visibleThi'+'sFrame']=!(0x251*0x7+-0x1*-0x11bb+0x16*-0x18b),_0x4bad08||_0x2703d4['_shadowMap']||(_0x2703d4['_shadowMap']=na['create'](this['device'],_0x2703d4));const _0x50b204=_0x2703d4['_type'],_0x3296cf=_0x50b204===Ke?-0x39*-0x15+0xddb*-0x1+0x92f:0x1e3*-0x4+-0x3*0x197+0xc57;for(let _0x320e1e=-0x1*-0x1a25+-0xcaa*0x1+-0xd7b;_0x320e1e<_0x3296cf;_0x320e1e++){const _0x1cef7d=_0x2703d4['getRenderD'+'ata'](null,_0x320e1e),_0x582a5e=_0x1cef7d['shadowCame'+'ra'];_0x582a5e['nearClip']=_0x2703d4['attenuatio'+'nEnd']/(-0x11a0+0x242*0xb+0x8d*-0x6),_0x582a5e['farClip']=_0x2703d4['attenuatio'+'nEnd'];const _0x107c08=_0x582a5e['_node'],_0x1c4fcf=_0x2703d4['_node'];if(_0x107c08['setPositio'+'n'](_0x1c4fcf['getPositio'+'n']()),_0x50b204===Ke)_0x582a5e['fov']=_0x2703d4['_outerCone'+'Angle']*(0x1ed8+-0x116*-0x1f+-0x4080),_0x107c08['setRotatio'+'n'](_0x1c4fcf['getRotatio'+'n']()),_0x107c08['rotateLoca'+'l'](-(0x3*0x1cf+0xbfe+0x1*-0x1111),0x52*-0x33+-0x4*-0x6ad+-0xa5e,-0x868+-0x11a+0x2*0x4c1);else{if(_0x50b204===Ye){if(_0x4bad08){const _0x383379=(0x1b69+0x3*0xc9+-0x1dc2)/(this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowAtla'+'sResolutio'+'n']*_0x2703d4['atlasViewp'+'ort']['z']/(0x182a+0xa*0x25+-0x1999))*this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowEdge'+'Pixels'];_0x582a5e['fov']=Math['atan'](0x1*0x12df+-0x16*-0x27+-0x1638+_0x383379)*Y['RAD_TO_DEG']*(0x1bb0+0x61d+-0x21cb);}else _0x582a5e['fov']=-0x2643+-0x8b*-0x21+0x14b2;}}this['renderer']['updateCame'+'raFrustum'](_0x582a5e),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x8e381,_0x2703d4,_0x1cef7d['visibleCas'+'ters'],_0x582a5e,_0x714cd4);}}['prepareLig'+'hts'](_0x17cf19,_0x2913e5){let _0x50e21b;for(let _0x4194f1=-0x1a66+0x1*0x1949+0x11d;_0x4194f1<_0x2913e5['length'];_0x4194f1++){const _0x158951=_0x2913e5[_0x4194f1];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x158951)&&_0x158951['atlasViewp'+'ortAllocat'+'ed']){_0x17cf19['push'](_0x158951);for(let _0x5c49d6=-0x327*-0x1+0x5b0+0x49*-0x1f;_0x5c49d6<_0x158951['numShadowF'+'aces'];_0x5c49d6++)_0x50e21b=this['shadowRend'+'erer']['prepareFac'+'e'](_0x158951,null,_0x5c49d6);}}return _0x50e21b;}['buildNonCl'+'usteredRen'+'derPasses'](_0x44ad80,_0x4156e3){for(let _0x32746d=0x22c3+-0x1184+-0x113f;_0x32746d<_0x4156e3['length'];_0x32746d++){const _0x32dd41=_0x4156e3[_0x32746d];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x32dd41)){const _0x384993=_0x32dd41['_type']===Ke,_0x4db688=_0x32dd41['numShadowF'+'aces'];for(let _0x98486=-0x1ad5*-0x1+-0x1644+-0x491;_0x98486<_0x4db688;_0x98486++){const _0x3a5a9a=new WE(this['device'],this['shadowRend'+'erer'],_0x32dd41,_0x98486,_0x384993);_0x44ad80['addRenderP'+'ass'](_0x3a5a9a);}}}}}class XE extends fs{constructor(_0x21bb58,_0x2ffda4,_0x421faf,_0x584773,_0x3ea6fa){super(_0x21bb58),ca['setName'](this,this['name']+'-'+_0x421faf['_node']['name']),this['shadowRend'+'erer']=_0x2ffda4,this['light']=_0x421faf,this['camera']=_0x584773,this['allCascade'+'sRendering']=_0x3ea6fa;}['execute'](){const {light:_0x46bd1c,camera:_0x29ecf3,shadowRenderer:_0x2df40d,allCascadesRendering:_0x3779dc}=this,_0x2d4f73=_0x46bd1c['numShadowF'+'aces'],_0x223601=_0x46bd1c['shadowUpda'+'teOverride'+'s'];for(let _0x309655=0x16a0+0x1657+-0x2cf7;_0x309655<_0x2d4f73;_0x309655++)(_0x223601==null?void(0x2444+-0x313*-0x6+-0x5e*0x95):_0x223601[_0x309655])!==vs&&_0x2df40d['renderFace'](_0x46bd1c,_0x29ecf3,_0x309655,!_0x3779dc),(_0x223601==null?void(0x1e3+0x1c1d+-0x1e00):_0x223601[_0x309655])===or&&(_0x223601[_0x309655]=vs);}['after'](){this['shadowRend'+'erer']['renderVsm'](this['light'],this['camera']);}}const kl=new Ie(),mi=new I(),i_=new te(),$e=[new I(),new I(),new I(),new I(),new I(),new I(),new I(),new I()],bd={'min':0x0,'max':0x0};function qE(_0x45b51e,_0x5496a8,_0x1a121c){$e[-0x67*0x53+0x834+0x1931]['x']=$e[0x12c9+0x1*-0xcec+0x4b*-0x14]['x']=$e[0xcbf+-0x1*0xf33+0x6*0x69]['x']=$e[0x1e1+-0x3*0x182+0x2a8*0x1]['x']=_0x5496a8['x'],$e[0xd*0xe1+0xba0+-0x170c]['y']=$e[-0x11*0x1df+0x1*0x1fcb+0x7]['y']=$e[0xbdf+0x18d2+0xf7*-0x26]['y']=$e[0x7c2+-0x12d8+0xb1b]['y']=_0x5496a8['y'],$e[-0x1bf4*0x1+0x77*-0x41+-0x35*-0x119]['z']=$e[0x196c+0xd*-0x124+-0x15*0x81]['z']=$e[0xbc2+0xf09*0x1+0x59*-0x4d]['z']=$e[0xbda+0x2149+-0x2*0x168e]['z']=_0x5496a8['z'],$e[-0x12*0x1d5+-0xe53+0x2f51]['x']=$e[-0x4b0+-0x1*0x1126+0x15db]['x']=$e[0x43f*-0x1+-0xae6+-0x161*-0xb]['x']=$e[-0xd3*0x25+0x2484+0x2ff*-0x2]['x']=_0x1a121c['x'],$e[0x1*0x19ae+-0x1*-0xc42+-0x25f0]['y']=$e[-0x18cf*-0x1+0x3d6*0x2+-0x2079]['y']=$e[0x1346+-0x22a2+0xf60]['y']=$e[0x4b6+0xd5*0x29+-0x26cd]['y']=_0x1a121c['y'],$e[0x497+0x10d0+-0x1567]['z']=$e[-0x6c4+0xf1+-0x4*-0x175]['z']=$e[-0xf1e+0x4f5+0xa2d]['z']=$e[-0x136c+-0x1*0x1612+0x2983]['z']=_0x1a121c['z'];let _0x5f4a77=0x285cf19f1+-0x2b8db3531+-0x1*-0x28717ff3f,_0x30d915=-(-0x2e45a315*-0x4+0x12c6e940c+0x6e86c39f);for(let _0x1b16d0=0x8dc+-0x736+-0x2*0xd3;_0x1b16d0<0x6d*-0xf+0x8*0x1b7+-0x74d;++_0x1b16d0){_0x45b51e['transformP'+'oint']($e[_0x1b16d0],$e[_0x1b16d0]);const _0x5ec26c=$e[_0x1b16d0]['z'];_0x5ec26c<_0x5f4a77&&(_0x5f4a77=_0x5ec26c),_0x5ec26c>_0x30d915&&(_0x30d915=_0x5ec26c);}return bd['min']=_0x5f4a77,bd['max']=_0x30d915,bd;}class jE{constructor(_0x340e57,_0x4be4c7){h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x340e57,this['shadowRend'+'erer']=_0x4be4c7,this['device']=_0x340e57['device']);}['cull'](_0x2af0e9,_0x3e2535,_0x45fdaa,_0x4b1b70=null){_0x2af0e9['visibleThi'+'sFrame']=!(0x1e7a+-0xdb0+-0xe*0x133),_0x2af0e9['_shadowMap']||(_0x2af0e9['_shadowMap']=na['create'](this['device'],_0x2af0e9));const _0x4afcc3=_0x45fdaa['_nearClip'];this['generateSp'+'litDistanc'+'es'](_0x2af0e9,_0x4afcc3,Math['min'](_0x45fdaa['_farClip'],_0x2af0e9['shadowDist'+'ance']));const _0x3ee5e0=_0x2af0e9['shadowUpda'+'teOverride'+'s'];for(let _0x2ae83b=-0x1412*-0x1+-0x2398+-0x7c3*-0x2;_0x2ae83b<_0x2af0e9['numCascade'+'s']&&(_0x3ee5e0==null?void(0x1*0x15ec+0x16db+-0x1*0x2cc7):_0x3ee5e0[_0x2ae83b])!==vs;_0x2ae83b++){const _0x4e7476=_0x2af0e9['getRenderD'+'ata'](_0x45fdaa,_0x2ae83b),_0x49f01e=_0x4e7476['shadowCame'+'ra'];_0x49f01e['renderTarg'+'et']=_0x2af0e9['_shadowMap']['renderTarg'+'ets'][-0x1*-0x1ff8+-0xf4*0x13+-0xddc],_0x4e7476['shadowView'+'port']['copy'](_0x2af0e9['cascades'][_0x2ae83b]),_0x4e7476['shadowScis'+'sor']['copy'](_0x2af0e9['cascades'][_0x2ae83b]);const _0x420791=_0x49f01e['_node'],_0x136c7a=_0x2af0e9['_node'];_0x420791['setPositio'+'n'](_0x136c7a['getPositio'+'n']()),_0x420791['setRotatio'+'n'](_0x136c7a['getRotatio'+'n']()),_0x420791['rotateLoca'+'l'](-(-0x272+0x1638+0x136c*-0x1),-0x1e69+-0x58b*-0x3+0xdc8,-0x1f4c*-0x1+0x19*-0x1f+-0x1c45);const _0x3d12d2=_0x2ae83b===-0xc3c+0x2d6+0x966?_0x4afcc3:_0x2af0e9['_shadowCas'+'cadeDistan'+'ces'][_0x2ae83b-(-0x244a+-0x4f*-0x1a+-0x1*-0x1c45)],_0x3874c5=_0x2af0e9['_shadowCas'+'cadeDistan'+'ces'][_0x2ae83b],_0x46cd9b=_0x45fdaa['getFrustum'+'Corners'](_0x3d12d2,_0x3874c5);mi['set'](0x1*-0x7cd+0x1*-0x1d2d+0x24fa,0x1*0x101b+-0x9d9+-0x642,-0x1854+0xca9+0x67*0x1d);const _0x5e424b=_0x45fdaa['node']['getWorldTr'+'ansform']();for(let _0x4050cf=-0x22cd*-0x1+0x1*0x2+-0x43*0x85;_0x4050cf<0xc5+-0x13b7+0x7*0x2b6;_0x4050cf++)_0x5e424b['transformP'+'oint'](_0x46cd9b[_0x4050cf],_0x46cd9b[_0x4050cf]),mi['add'](_0x46cd9b[_0x4050cf]);mi['mulScalar']((-0x1fa9+-0x23fd+-0x17*-0x2f1)/(0xf8b*0x2+0x10dc+-0x1*0x2fea));let _0x202719=-0x4*-0x25b+-0x13d+-0x82f;for(let _0x4bed27=-0x13d*-0x1b+0x1*-0x13de+0x1*-0xd91;_0x4bed27<-0x1552*-0x1+0x31a*-0x3+-0x34*0x3b;_0x4bed27++){const _0x1e75c9=_0x46cd9b[_0x4bed27]['sub'](mi)['length']();_0x1e75c9>_0x202719&&(_0x202719=_0x1e75c9);}const _0x97418b=_0x420791['right'],_0x5150da=_0x420791['up'],_0x44af52=_0x420791['forward'],_0x4cbe82=(-0x11ca+0x8*0x153+-0x2*-0x399+0.25)*_0x2af0e9['_shadowRes'+'olution']/_0x202719,_0x14f0bb=Math['ceil'](mi['dot'](_0x5150da)*_0x4cbe82)/_0x4cbe82,_0x594ee5=Math['ceil'](mi['dot'](_0x97418b)*_0x4cbe82)/_0x4cbe82,_0x400f2a=_0x5150da['mulScalar'](_0x14f0bb),_0x3fb57d=_0x97418b['mulScalar'](_0x594ee5),_0x296495=mi['dot'](_0x44af52),_0x5a5981=_0x44af52['mulScalar'](_0x296495);mi['add2'](_0x400f2a,_0x3fb57d)['add'](_0x5a5981),_0x420791['setPositio'+'n'](mi),_0x420791['translateL'+'ocal'](0x1*-0x259f+0x2ea+-0x5*-0x6f1,0x4c8*-0x1+0xc*-0x43+0x7ec,-0xcf7be+0x1*0x96181+-0x12d87d*-0x1),_0x49f01e['nearClip']=-0x1*0x295+-0x1536+0x1*0x17cb+0.01,_0x49f01e['farClip']=0x344b29+0x3319*0x102+0x4945db*-0x1,_0x49f01e['orthoHeigh'+'t']=_0x202719,this['renderer']['updateCame'+'raFrustum'](_0x49f01e),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x3e2535,_0x2af0e9,_0x4e7476['visibleCas'+'ters'],_0x49f01e,_0x4b1b70);const _0x1445d9=0x16a6*0x1+0x43d+-0x1ae2<<_0x2ae83b,_0x222638=_0x4e7476['visibleCas'+'ters'],_0x317abc=_0x222638['length'];let _0x2b6930=0x93c+0x871*-0x2+-0x1*-0x7a6;for(let _0x2e753f=-0x1*-0x14b5+0x1edb+-0x3390;_0x2e753f<_0x317abc;_0x2e753f++){const _0x12de7e=_0x222638[_0x2e753f];_0x12de7e['shadowCasc'+'adeMask']&_0x1445d9&&(_0x222638[_0x2b6930++]=_0x12de7e,_0x2b6930===-0x1*-0xdaf+-0x18a0+0x579*0x2?kl['copy'](_0x12de7e['aabb']):kl['add'](_0x12de7e['aabb']));}_0x317abc!==_0x2b6930&&(_0x222638['length']=_0x2b6930),i_['copy'](_0x420791['getWorldTr'+'ansform']())['invert']();const _0x38c0e1=qE(i_,kl['getMin'](),kl['getMax']());_0x420791['translateL'+'ocal'](0x22d0+0x4c*-0x2c+-0x4*0x570,-0x55d+-0xb0b*-0x3+-0x1bc4,_0x38c0e1['max']+(-0xb61+-0xd6e+-0xdb*-0x1d+0.1)),_0x49f01e['farClip']=_0x38c0e1['max']-_0x38c0e1['min']+(-0x1*-0x11d4+0x2126+-0x32fa+0.2),_0x4e7476['projection'+'Compensati'+'on']=_0x202719;}}['generateSp'+'litDistanc'+'es'](_0x1026ce,_0x49b37b,_0xd75f49){_0x1026ce['_shadowCas'+'cadeDistan'+'ces']['fill'](_0xd75f49);for(let _0x5ca073=-0x1d6b+-0xc17+0x2983*0x1;_0x5ca073<_0x1026ce['numCascade'+'s'];_0x5ca073++){const _0x298abe=_0x5ca073/_0x1026ce['numCascade'+'s'],_0x30faf=_0x49b37b+(_0xd75f49-_0x49b37b)*_0x298abe,_0x39c778=_0x49b37b*(_0xd75f49/_0x49b37b)**_0x298abe,_0x1e25c4=Y['lerp'](_0x30faf,_0x39c778,_0x1026ce['cascadeDis'+'tribution']);_0x1026ce['_shadowCas'+'cadeDistan'+'ces'][_0x5ca073-(-0x1ac*-0x16+-0xde7+-0x16e0)]=_0x1e25c4;}}['getLightRe'+'nderPass'](_0xf1ea3a,_0x5cdfc6){M['assert'](_0xf1ea3a&&_0xf1ea3a['_type']===ve);let _0x30e82e=null;if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0xf1ea3a)){const _0x3850e0=_0xf1ea3a['numShadowF'+'aces'],_0x17d0f5=_0xf1ea3a['shadowUpda'+'teOverride'+'s'];let _0x437c2e=!(0x255d+0x16f7*0x1+-0x3c54),_0x11f9af;for(let _0x53d99f=0x3bf*-0x5+-0x6b*-0x3+0x8bd*0x2;_0x53d99f<_0x3850e0;_0x53d99f++)(_0x17d0f5==null?void(-0xfb*-0x9+0x29f*0x9+-0x206a):_0x17d0f5[_0x53d99f])===vs&&(_0x437c2e=!(0x142+0x5*0x364+-0x1235)),_0x11f9af=this['shadowRend'+'erer']['prepareFac'+'e'](_0xf1ea3a,_0x5cdfc6,_0x53d99f);_0x30e82e=new XE(this['device'],this['shadowRend'+'erer'],_0xf1ea3a,_0x5cdfc6,_0x437c2e),this['shadowRend'+'erer']['setupRende'+'rPass'](_0x30e82e,_0x11f9af,_0x437c2e);}return _0x30e82e;}}const Cd=new Set(),r_=new te(),a_=new te(),vr=new Float32Array(-0xe1*-0x24+0x3f*0x66+-0x4*0xe2f),$n=new ae(-0x123d+0x2*-0xd2d+-0xb26*-0x4,-0x14f9+-0x260+-0x1*-0x175a,-0x1797+-0x5*-0x529+-0x236,0xc3d+0x4*0x283+-0x1649),n_=new te();function YE(_0x55be06,_0x26c65e){return Math['exp'](-(_0x55be06*_0x55be06)/((0x2*0xa61+0xa5f+0x101*-0x1f)*_0x26c65e*_0x26c65e));}function KE(_0x11be92){const _0x35dca9=(_0x11be92-(0x2049+0x1*-0x479+-0x1bcf))/(0x3*-0x58e+0x295*0x5+-0x3c7*-0x1),_0x493cef=(_0x11be92-(-0x49d*-0x5+-0x2*-0x1121+0x17*-0x27e))*(0xc08+-0x605*0x2+-0x2*-0x1+0.5),_0x1f7602=new Array(_0x11be92);let _0x3b99c1=-0x187c+0x80f+-0x1d*-0x91;for(let _0x27e847=0x55*0x2d+0x5d*-0x19+-0x3c*0x19;_0x27e847<_0x11be92;++_0x27e847)_0x1f7602[_0x27e847]=YE(_0x27e847-_0x493cef,_0x35dca9),_0x3b99c1+=_0x1f7602[_0x27e847];for(let _0x3bed36=0x13b4+0x315*-0x3+-0xa75;_0x3bed36<_0x11be92;++_0x3bed36)_0x1f7602[_0x3bed36]/=_0x3b99c1;return _0x1f7602;}class Ry{constructor(_0xee8345,_0x2b9d91){h(this,'shadowPass'+'Cache',[]),(this['device']=_0xee8345['device'],this['renderer']=_0xee8345,this['lightTextu'+'reAtlas']=_0x2b9d91);const _0x38384f=this['device']['scope'];this['sourceId']=_0x38384f['resolve']('source'),this['pixelOffse'+'tId']=_0x38384f['resolve']('pixelOffse'+'t'),this['weightId']=_0x38384f['resolve']('weight[0]'),this['blurVsmSha'+'der']=[{},{}],this['blurVsmWei'+'ghts']={},this['shadowMapL'+'ightRadius'+'Id']=_0x38384f['resolve']('light_radi'+'us'),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['blendState'+'Write']=new Ct(),this['blendState'+'NoWrite']=new Ct(),this['blendState'+'NoWrite']['setColorWr'+'ite'](!(-0x11a5*-0x2+0x4*0x33f+0x1017*-0x3),!(-0x19c*-0x2+-0x2647+0xc*0x2ec),!(-0x7*0x464+0x71*-0x58+0x2f*0x17b),!(0xdd7+0x1*-0x22fd+0x1527));}static['createShad'+'owCamera'](_0x3d746d,_0x79042d,_0x132c4){const _0x1b6f3a=Pn['create']('ShadowCame'+'ra',_0x79042d,_0x132c4),_0x526aef=Bi['get'](_0x3d746d);M['assert'](_0x526aef);const _0x299dbf=(_0x526aef==null?void(-0x25cc+0x2*0xff+0x23ce):_0x526aef['vsm'])??!(-0x1e2e+0x1ec5+-0x96),_0x342def=(_0x526aef==null?void(0x134f*0x1+-0x398*-0x1+0x1c3*-0xd):_0x526aef['pcf'])??!(0x11b8+-0x35f+0x11*-0xd8);return _0x299dbf?_0x1b6f3a['clearColor']=new ie(0x1*-0x1576+0x4+0x1572,-0x1b68+0x1908+-0x1*-0x260,-0x1*0x1843+-0x5c2*0x5+0x350d,0x65*-0x5d+-0x17b0+0x3c61*0x1):_0x1b6f3a['clearColor']=new ie(0x14*0xb7+-0x3e*-0x6b+-0x2835*0x1,-0x1*0x222f+0x31b+0x1f15,-0x3b*-0x37+0xd49*-0x1+0x9d*0x1,0x2312+0xb*-0x16a+0x9*-0x22b),_0x1b6f3a['clearDepth'+'Buffer']=!(0x22b8+-0x114*0x13+-0xe3c),_0x1b6f3a['clearStenc'+'ilBuffer']=!(-0x6c0+-0x1ebe+0x257f),_0x1b6f3a['clearColor'+'Buffer']=!_0x342def,_0x1b6f3a;}['_cullShado'+'wCastersIn'+'ternal'](_0x25f86e,_0x556e8b,_0x41440a){const _0xacb111=_0x25f86e['length'];for(let _0x37309e=-0x133*0x1+0x26b9+0x3*-0xc82;_0x37309e<_0xacb111;_0x37309e++){const _0x58e428=_0x25f86e[_0x37309e];_0x58e428['castShadow']&&(!_0x58e428['cull']||_0x58e428['_isVisible'](_0x41440a))&&(_0x58e428['visibleThi'+'sFrame']=!(-0x13c2+-0x2*-0x12fd+-0x1238),_0x556e8b['push'](_0x58e428));}}['cullShadow'+'Casters'](_0x510557,_0xdcc900,_0x4e24b3,_0x55c798,_0x35b477){var _0x59c071,_0x3759c3;if((_0x59c071=this['renderer']['scene'])==null||_0x59c071['fire'](Ty,_0x55c798),_0x4e24b3['length']=0x1*-0x2519+-0x4d2+0x29eb,_0x35b477)this['_cullShado'+'wCastersIn'+'ternal'](_0x35b477,_0x4e24b3,_0x55c798);else{const _0x2de2e4=_0x510557['layerList'],_0x1669b1=_0x2de2e4['length'];for(let _0x5b927e=-0x1a1c+-0x899*0x1+-0x22b5*-0x1;_0x5b927e<_0x1669b1;_0x5b927e++){const _0x5bb5d7=_0x2de2e4[_0x5b927e];_0x5bb5d7['_lightsSet']['has'](_0xdcc900)&&(Cd['has'](_0x5bb5d7)||(Cd['add'](_0x5bb5d7),this['_cullShado'+'wCastersIn'+'ternal'](_0x5bb5d7['shadowCast'+'ers'],_0x4e24b3,_0x55c798)));}Cd['clear']();}_0x4e24b3['sort'](this['sortCompar'+'eShader']),(_0x3759c3=this['renderer']['scene'])==null||_0x3759c3['fire'](wy,_0x55c798);}['sortCompar'+'eShader'](_0x269174,_0x9763bc){const _0x11162d=_0x269174['_sortKeySh'+'adow'],_0x2cb9cb=_0x9763bc['_sortKeySh'+'adow'];return _0x11162d===_0x2cb9cb?_0x9763bc['mesh']['id']-_0x269174['mesh']['id']:_0x2cb9cb-_0x11162d;}['setupRende'+'rState'](_0x1b5421,_0x37fd05){const _0x56790b=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']?_0x37fd05['_isPcf']:_0x37fd05['_isPcf']&&_0x37fd05['_type']!==Ye;_0x1b5421['setBlendSt'+'ate'](_0x56790b?this['blendState'+'NoWrite']:this['blendState'+'Write']),_0x1b5421['setDepthSt'+'ate'](_0x37fd05['shadowDept'+'hState']),_0x1b5421['setStencil'+'State'](null,null);}['dispatchUn'+'iforms'](_0x397446,_0x8878,_0x80212f,_0x2e7838){const _0x407b21=_0x8878['_node'];_0x397446['_type']!==ve&&(this['renderer']['dispatchVi'+'ewPos'](_0x407b21['getPositio'+'n']()),this['shadowMapL'+'ightRadius'+'Id']['setValue'](_0x397446['attenuatio'+'nEnd'])),r_['setTRS'](_0x407b21['getPositio'+'n'](),_0x407b21['getRotatio'+'n'](),I['ONE'])['invert'](),a_['mul2'](_0x8878['projection'+'Matrix'],r_);const _0x256267=_0x80212f['shadowView'+'port'];_0x8878['rect']=_0x256267,_0x8878['scissorRec'+'t']=_0x80212f['shadowScis'+'sor'],n_['setViewpor'+'t'](_0x256267['x'],_0x256267['y'],_0x256267['z'],_0x256267['w']),_0x80212f['shadowMatr'+'ix']['mul2'](n_,a_),_0x397446['_type']===ve&&_0x397446['_shadowMat'+'rixPalette']['set'](_0x80212f['shadowMatr'+'ix']['data'],_0x2e7838*(-0x24aa*-0x1+-0x3*-0x5d0+-0x2*0x1b05));}['getShadowP'+'ass'](_0xd2a97d){var _0x1bbe7e;const _0x260cd8=_0xd2a97d['_type'],_0x3283a1=_0xd2a97d['_shadowTyp'+'e'];let _0x2f2a88=(_0x1bbe7e=this['shadowPass'+'Cache'][_0x260cd8])==null?void(0x19*-0x106+-0xb*0x1a1+0x2b81):_0x1bbe7e[_0x3283a1];if(!_0x2f2a88){const _0x2fb533='ShadowPass'+'_'+_0x260cd8+'_'+_0x3283a1;_0x2f2a88=hi['get'](this['device'])['allocate'](_0x2fb533,{'isShadow':!(-0x13c+0x1c4*-0x2+0x1*0x4c4),'lightType':_0x260cd8,'shadowType':_0x3283a1}),this['shadowPass'+'Cache'][_0x260cd8]||(this['shadowPass'+'Cache'][_0x260cd8]=[]),this['shadowPass'+'Cache'][_0x260cd8][_0x3283a1]=_0x2f2a88;}return _0x2f2a88['index'];}['submitCast'+'ers'](_0x5a23e7,_0x3181eb,_0x32087c){var _0x3df5ef;const _0x4a80d8=this['device'],_0x579f70=this['renderer'],_0x17b8c2=_0x579f70['scene'],_0x2dd5cd=0x226c+-0xdcd+0x2f2*-0x7<<Mm,_0x19adbe=this['getShadowP'+'ass'](_0x3181eb),_0x36771d=_0x32087c['shaderPara'+'ms'],_0x676a33=_0x32087c['renderTarg'+'et']['flipY']?-(0xbf*0x25+0x483+-0x201d):0xff5+-0x2076+0x841*0x2,_0x18d224=_0x5a23e7['length'];for(let _0xca322f=0x297*-0xb+-0x521+0x10cf*0x2;_0xca322f<_0x18d224;_0xca322f++){const _0x3ee19f=_0x5a23e7[_0xca322f],_0x1fb4a7=_0x3ee19f['mesh'],_0x520677=_0x3ee19f['instancing'+'Data'];if(_0x520677&&_0x520677['count']<=-0x64a+0x8bf*0x3+0x13f3*-0x1)continue;_0x3ee19f['ensureMate'+'rial'](_0x4a80d8);const _0x505f2f=_0x3ee19f['material'];Q['pushGpuMar'+'ker'](_0x4a80d8,'Node:\x20'+_0x3ee19f['node']['name']+(',\x20Material'+':\x20')+_0x505f2f['name']),_0x579f70['setBaseCon'+'stants'](_0x4a80d8,_0x505f2f),_0x579f70['setSkinnin'+'g'](_0x4a80d8,_0x3ee19f),_0x505f2f['dirty']&&(_0x505f2f['updateUnif'+'orms'](_0x4a80d8,_0x17b8c2),_0x505f2f['dirty']=!(0x2349*0x1+-0x2*-0x281+-0x284a)),_0x579f70['setupCullM'+'ode'](!(0xad4+0x5*-0x6b2+0x16a6),_0x676a33,_0x3ee19f),_0x505f2f['setParamet'+'ers'](_0x4a80d8),_0x3ee19f['setParamet'+'ers'](_0x4a80d8,_0x2dd5cd);const _0x2f61bc=_0x3ee19f['getShaderI'+'nstance'](_0x19adbe,-0xbe3+-0x2e*0x80+0x22e3,_0x17b8c2,_0x36771d,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat']),_0x2bcf6b=_0x2f61bc['shader'];if(M['assert'](_0x2bcf6b,'no\x20shader\x20'+'for\x20pass\x20'+_0x19adbe,_0x505f2f),_0x2bcf6b['failed'])continue;_0x3ee19f['_sortKeySh'+'adow']=_0x2bcf6b['id'],_0x4a80d8['setShader'](_0x2bcf6b),_0x579f70['setVertexB'+'uffers'](_0x4a80d8,_0x1fb4a7),_0x579f70['setMorphin'+'g'](_0x4a80d8,_0x3ee19f['morphInsta'+'nce']),_0x520677&&_0x4a80d8['setVertexB'+'uffer'](_0x520677['vertexBuff'+'er']),_0x579f70['setMeshIns'+'tanceMatri'+'ces'](_0x3ee19f),_0x579f70['setupMeshU'+'niformBuff'+'ers'](_0x2f61bc);const _0xeafda3=_0x3ee19f['renderStyl'+'e'],_0x3f2e4b=(_0x3df5ef=_0x3ee19f['indirectDa'+'ta'])==null?void(0x22ef+0x98*0x28+-0xb5*0x53):_0x3df5ef['get'](_0x32087c);_0x4a80d8['draw'](_0x1fb4a7['primitive'][_0xeafda3],_0x1fb4a7['indexBuffe'+'r'][_0xeafda3],_0x520677==null?void(0x1bb*-0x5+-0x10e2+-0x3*-0x883):_0x520677['count'],_0x3f2e4b),_0x579f70['_shadowDra'+'wCalls']++,_0x520677&&_0x579f70['_instanced'+'DrawCalls']++,Q['popGpuMark'+'er'](_0x4a80d8);}}['needsShado'+'wRendering'](_0x8a3552){const _0x31cea5=_0x8a3552['enabled']&&_0x8a3552['castShadow'+'s']&&_0x8a3552['shadowUpda'+'teMode']!==vs&&_0x8a3552['visibleThi'+'sFrame'];return _0x8a3552['shadowUpda'+'teMode']===or&&(_0x8a3552['shadowUpda'+'teMode']=vs),_0x31cea5&&(this['renderer']['_shadowMap'+'Updates']+=_0x8a3552['numShadowF'+'aces']),_0x31cea5;}['getLightRe'+'nderData'](_0x338e44,_0x305c59,_0x1c222f){return _0x338e44['getRenderD'+'ata'](_0x338e44['_type']===ve?_0x305c59:null,_0x1c222f);}['setupRende'+'rPass'](_0x26fb1c,_0x3d8588,_0x5378c4){const _0x5c2472=_0x3d8588['renderTarg'+'et'];_0x26fb1c['init'](_0x5c2472),_0x26fb1c['depthStenc'+'ilOps']['clearDepth'+'Value']=0xb17+-0x1da9*0x1+0x1293,_0x26fb1c['depthStenc'+'ilOps']['clearDepth']=_0x5378c4,_0x5c2472['depthBuffe'+'r']?_0x26fb1c['depthStenc'+'ilOps']['storeDepth']=!(-0x29*-0xef+0x2f*0x1+-0x2676):(_0x26fb1c['colorOps']['clearValue']['copy'](_0x3d8588['clearColor']),_0x26fb1c['colorOps']['clear']=_0x5378c4,_0x26fb1c['depthStenc'+'ilOps']['storeDepth']=!(-0x665+-0x2*0xc95+-0x65*-0x50)),_0x26fb1c['requiresCu'+'bemaps']=!(0x1*-0x1baf+-0x1*0x220f+0xb*0x59d);}['prepareFac'+'e'](_0x21d447,_0x1b3dab,_0x558716){const _0x3beae9=_0x21d447['_type'],_0x2a1d67=this['getLightRe'+'nderData'](_0x21d447,_0x1b3dab,_0x558716)['shadowCame'+'ra'],_0x43d871=_0x3beae9===ve?-0x2*0x78c+-0x1060+0x1f78:_0x558716;return _0x2a1d67['renderTarg'+'et']=_0x21d447['_shadowMap']['renderTarg'+'ets'][_0x43d871],_0x2a1d67;}['renderFace'](_0x5811cc,_0x44022f,_0x1df957,_0x25aa63,_0x52495c=!(0x5d9+0x2*-0x110b+0x1c3d)){const _0x1f2993=this['device'],_0x28dcee=de();Q['pushGpuMar'+'ker'](_0x1f2993,'SHADOW\x20'+_0x5811cc['_node']['name']+'\x20FACE\x20'+_0x1df957);const _0x5e7b3f=this['getLightRe'+'nderData'](_0x5811cc,_0x44022f,_0x1df957),_0x4be738=_0x5e7b3f['shadowCame'+'ra'];this['dispatchUn'+'iforms'](_0x5811cc,_0x4be738,_0x5e7b3f,_0x1df957);const _0x498779=_0x4be738['renderTarg'+'et'],_0x150bf2=this['renderer'];_0x150bf2['setCameraU'+'niforms'](_0x4be738,_0x498779),_0x1f2993['supportsUn'+'iformBuffe'+'rs']&&_0x150bf2['setupViewU'+'niformBuff'+'ers'](_0x5e7b3f['viewBindGr'+'oups'],this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],null),_0x52495c?(_0x150bf2['setupViewp'+'ort'](_0x4be738,_0x498779),_0x25aa63&&_0x150bf2['clear'](_0x4be738)):_0x150bf2['clearView'](_0x4be738,_0x498779,!(0xef*0x15+0xd*0xac+-0x1c57),!(-0x1b7a+-0x1093+0x2c0e)),this['setupRende'+'rState'](_0x1f2993,_0x5811cc),this['submitCast'+'ers'](_0x5e7b3f['visibleCas'+'ters'],_0x5811cc,_0x4be738),Q['popGpuMark'+'er'](_0x1f2993),_0x150bf2['_shadowMap'+'Time']+=de()-_0x28dcee;}['render'](_0xac536c,_0xa871b3,_0x50cb82=!(-0x1*0x8bb+0x1da2+-0x14e7)){if(this['needsShado'+'wRendering'](_0xac536c)){const _0x20c42f=_0xac536c['numShadowF'+'aces'];for(let _0x22f746=0x202a+0x5*-0x315+-0x10c1;_0x22f746<_0x20c42f;_0x22f746++)this['prepareFac'+'e'](_0xac536c,_0xa871b3,_0x22f746),this['renderFace'](_0xac536c,_0xa871b3,_0x22f746,!(-0x7*-0x259+0x1*0x21c1+-0x3230),_0x50cb82);this['renderVsm'](_0xac536c,_0xa871b3);}}['renderVsm'](_0x3eed55,_0x3f63b8){_0x3eed55['_isVsm']&&_0x3eed55['_vsmBlurSi'+'ze']>0x1*0xbe1+-0x1f*-0x126+-0x2f7a&&(!this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']||_0x3eed55['_type']===ve)&&this['applyVsmBl'+'ur'](_0x3eed55,_0x3f63b8);}['getVsmBlur'+'Shader'](_0x5d294e,_0x4fa239){const _0x3194dc=this['blurVsmSha'+'der'];let _0x3a0a54=_0x3194dc[_0x5d294e][_0x4fa239];if(!_0x3a0a54){this['blurVsmWei'+'ghts'][_0x4fa239]=KE(_0x4fa239);const _0x3beb84=new Map();_0x3beb84['set']('{SAMPLES}',_0x4fa239),_0x5d294e===-0x18f9+0x235e+-0xa64&&_0x3beb84['set']('GAUSS',''),_0x3a0a54=Ut['createShad'+'er'](this['device'],{'uniqueName':'blurVsm'+_0x5d294e+_0x4fa239,'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'blurVSMPS','fragmentDefines':_0x3beb84}),_0x3194dc[_0x5d294e][_0x4fa239]=_0x3a0a54;}return _0x3a0a54;}['applyVsmBl'+'ur'](_0x33cf6c,_0x52aff5){const _0x16484a=this['device'];Q['pushGpuMar'+'ker'](_0x16484a,'VSM\x20'+_0x33cf6c['_node']['name']),_0x16484a['setBlendSt'+'ate'](Ct['NOBLEND']);const _0x323da2=_0x33cf6c['getRenderD'+'ata'](_0x33cf6c['_type']===ve?_0x52aff5:null,0xb35+-0x1294*0x2+0x19f3)['shadowCame'+'ra']['renderTarg'+'et'],_0x4e1060=this['renderer']['shadowMapC'+'ache']['get'](_0x16484a,_0x33cf6c),_0x228ba1=_0x4e1060['renderTarg'+'ets'][0x1*0x8ad+0x2*0x257+-0xd5b*0x1],_0x5fb6f9=_0x33cf6c['vsmBlurMod'+'e'],_0x484a4f=_0x33cf6c['_vsmBlurSi'+'ze'],_0x44c9a0=this['getVsmBlur'+'Shader'](_0x5fb6f9,_0x484a4f);$n['z']=_0x33cf6c['_shadowRes'+'olution']-(-0xb41+0x511*0x2+0x121),$n['w']=$n['z'],this['sourceId']['setValue'](_0x323da2['colorBuffe'+'r']),vr[0x2f*0x1f+0x13b0+0x1*-0x1961]=(0x1db9+0x2602+0x1*-0x43ba)/_0x33cf6c['_shadowRes'+'olution'],vr[0x1*0x2161+0xbd6+-0x2*0x169b]=0xe72*0x1+-0x1fb2*-0x1+-0x2e24,this['pixelOffse'+'tId']['setValue'](vr),_0x5fb6f9===vm&&this['weightId']['setValue'](this['blurVsmWei'+'ghts'][_0x484a4f]),fr(_0x16484a,_0x228ba1,_0x44c9a0,null,$n),this['sourceId']['setValue'](_0x228ba1['colorBuffe'+'r']),vr[-0x23cf+-0x1c2e+0x1fff*0x2]=vr[-0x1519+0xb1*-0x1b+0xa*0x3fa],vr[0x21f2+-0x11f1*0x1+0x11*-0xf1]=-0x49*-0x6d+0xdcb+-0x2ce0,this['pixelOffse'+'tId']['setValue'](vr),fr(_0x16484a,_0x323da2,_0x44c9a0,null,$n),this['renderer']['shadowMapC'+'ache']['add'](_0x33cf6c,_0x4e1060),Q['popGpuMark'+'er'](_0x16484a);}['initViewBi'+'ndGroupFor'+'mat'](){this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']&&(this['viewUnifor'+'mFormat']=new qS(this['device'],[new ct('matrix_vie'+'wProjectio'+'n',Js)]),this['viewBindGr'+'oupFormat']=new HS(this['device'],[new im(sm,tm|LS)]));}['frameUpdat'+'e'](){this['initViewBi'+'ndGroupFor'+'mat']();}}const Ul=[];class ZE{constructor(_0x563832){h(this,'_empty',null),h(this,'_allocated',[]),h(this,'_clusters',new Map()),this['device']=_0x563832;}['destroy'](){this['_empty']&&(this['_empty']['destroy'](),this['_empty']=null),this['_allocated']['forEach'](_0x4bbe1a=>{_0x4bbe1a['destroy']();}),this['_allocated']['length']=-0x1990+0x628+-0x9*-0x228;}get['count'](){return this['_allocated']['length'];}get['empty'](){if(!this['_empty']){const _0x2a1b85=new If(this['device']);_0x2a1b85['name']='ClusterEmp'+'ty',_0x2a1b85['update']([]),this['_empty']=_0x2a1b85;}return this['_empty'];}['assign'](_0x2a02c9){const _0x406667=this['empty'];Ul['push'](...this['_allocated']),this['_allocated']['length']=-0x3a9*-0x5+-0x5*0x15c+-0x13*0x9b,this['_clusters']['clear']();const _0xf8ccee=_0x2a02c9['length'];for(let _0x429b50=-0x25d8+0x2039+0x1*0x59f;_0x429b50<_0xf8ccee;_0x429b50++){const _0x1bb177=_0x2a02c9[_0x429b50]['renderActi'+'ons'];if(_0x1bb177){const _0x99e55b=_0x1bb177['length'];for(let _0x5720d0=-0x1901+0x5*-0xdd+-0x3*-0x9c6;_0x5720d0<_0x99e55b;_0x5720d0++){const _0xbd0aaf=_0x1bb177[_0x5720d0];_0xbd0aaf['lightClust'+'ers']=null;const _0x470fd9=_0xbd0aaf['layer'];if(_0x470fd9['hasCluster'+'edLights']&&_0x470fd9['meshInstan'+'ces']['length']){const _0xd2cb8b=_0x470fd9['getLightId'+'Hash'](),_0x11bd89=this['_clusters']['get'](_0xd2cb8b);let _0x3bf83e=_0x11bd89==null?void(0x1*-0x1c75+0x13a4*-0x1+-0x3019*-0x1):_0x11bd89['lightClust'+'ers'];_0x3bf83e||(_0x3bf83e=Ul['pop']()??new If(this['device']),ca['setName'](_0x3bf83e,'Cluster-'+this['_allocated']['length']),this['_allocated']['push'](_0x3bf83e),this['_clusters']['set'](_0xd2cb8b,_0xbd0aaf)),_0xbd0aaf['lightClust'+'ers']=_0x3bf83e;}_0xbd0aaf['lightClust'+'ers']||(_0xbd0aaf['lightClust'+'ers']=_0x406667);}}}Ul['forEach'](_0x56b9c8=>_0x56b9c8['destroy']()),Ul['length']=-0x4*-0x1d3+-0x1c6b+0x151f;}['update'](_0x2e24d6,_0x3af1ad){this['assign'](_0x2e24d6),this['_clusters']['forEach'](_0x5683fc=>{const _0x641121=_0x5683fc['layer'];_0x5683fc['lightClust'+'ers']['update'](_0x641121['clusteredL'+'ightsSet'],_0x3af1ad);});}}const qi=new ae(),Pd=[];class Om extends fs{constructor(_0x28fbea,_0x342e7d){super(_0x28fbea),h(this,'_quadRende'+'rer2D',null),h(this,'_quadRende'+'rerCube',null),h(this,'_filteredL'+'ights',[]),h(this,'_forceCopy',!(0xa4f+-0x2297+-0x1849*-0x1)),h(this,'_evtDevice'+'Restored',null),(this['_cubeSlots'+'Offsets']=_0x342e7d,this['requiresCu'+'bemaps']=!(-0x751*-0x3+0x1*0x4d2+-0x1ac4),this['blitTextur'+'eId']=_0x28fbea['scope']['resolve']('blitTextur'+'e'),this['invViewPro'+'jId']=_0x28fbea['scope']['resolve']('invViewPro'+'j'),this['_evtDevice'+'Restored']=_0x28fbea['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this));}['destroy'](){var _0x52cdf6,_0x2069e9,_0x56c881;(_0x52cdf6=this['_quadRende'+'rer2D'])==null||_0x52cdf6['destroy'](),this['_quadRende'+'rer2D']=null,(_0x2069e9=this['_quadRende'+'rerCube'])==null||_0x2069e9['destroy'](),this['_quadRende'+'rerCube']=null,(_0x56c881=this['_evtDevice'+'Restored'])==null||_0x56c881['off'](),this['_evtDevice'+'Restored']=null;}static['create'](_0x5eaf14,_0x3da293){M['assert'](_0x5eaf14);const _0x360fa6=new Om(_0x5eaf14['device'],_0x3da293);return _0x360fa6['init'](_0x5eaf14),_0x360fa6['colorOps']['clear']=!(-0x3c0+-0x779+-0x3be*-0x3),_0x360fa6['depthStenc'+'ilOps']['clearDepth']=!(-0x1*0xec3+0x1385*-0x1+0x2249),_0x360fa6;}['onDeviceRe'+'stored'](){this['_forceCopy']=!(-0x1ff7*0x1+0x4*-0x8be+0x42ef);}['update'](_0x43ad42){const _0x59514=this['_filteredL'+'ights'];this['filter'](_0x43ad42,_0x59514),this['executeEna'+'bled']=_0x59514['length']>0x163d*0x1+0x1ee2+-0x5e7*0x9;}['filter'](_0x4c8872,_0x360681){for(let _0x5cc9d4=-0x16a*0x11+-0xf7*0x1+-0x25*-0xad;_0x5cc9d4<_0x4c8872['length'];_0x5cc9d4++){const _0x1892bb=_0x4c8872[_0x5cc9d4];_0x1892bb['_type']!==ve&&_0x1892bb['atlasViewp'+'ortAllocat'+'ed']&&(!_0x1892bb['atlasSlotU'+'pdated']&&!this['_forceCopy']||_0x1892bb['enabled']&&_0x1892bb['cookie']&&_0x1892bb['visibleThi'+'sFrame']&&_0x360681['push'](_0x1892bb));}this['_forceCopy']=!(0x1156+0x144c*0x1+0xa9*-0x39);}['initInvVie'+'wProjMatri'+'ces'](){if(!Pd['length'])for(let _0x2a5dc2=-0x8*0x314+0x7cf+0x10d1;_0x2a5dc2<-0x605+0x721*-0x5+0x29b0;_0x2a5dc2++){const _0x1ea81c=Pn['create'](null,Ye,_0x2a5dc2),_0x595cb4=_0x1ea81c['projection'+'Matrix'],_0x2ddcbb=_0x1ea81c['node']['getLocalTr'+'ansform']()['clone']()['invert']();Pd[_0x2a5dc2]=new te()['mul2'](_0x595cb4,_0x2ddcbb)['invert']();}}get['quadRender'+'er2D'](){if(!this['_quadRende'+'rer2D']){const _0x2e5d4c=Ut['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'erer2d','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'2DPS'});this['_quadRende'+'rer2D']=new jh(_0x2e5d4c);}return this['_quadRende'+'rer2D'];}get['quadRender'+'erCube'](){if(!this['_quadRende'+'rerCube']){const _0x1f3746=Ut['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'ererCube','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'CubePS'});this['_quadRende'+'rerCube']=new jh(_0x1f3746);}return this['_quadRende'+'rerCube'];}['execute'](){const _0x2880f7=this['device'];_0x2880f7['setBlendSt'+'ate'](Ct['NOBLEND']),_0x2880f7['setCullMod'+'e'](xt),_0x2880f7['setDepthSt'+'ate'](Kt['NODEPTH']),_0x2880f7['setStencil'+'State']();const _0x533f56=this['renderTarg'+'et']['colorBuffe'+'r']['width'],_0x35dcab=this['_cubeSlots'+'Offsets'],_0x3f761a=this['_filteredL'+'ights'];for(let _0x1ea4fe=-0x1*0x1ba1+0x41e*0x5+0x70b;_0x1ea4fe<_0x3f761a['length'];_0x1ea4fe++){const _0x6234d0=_0x3f761a[_0x1ea4fe];Q['pushGpuMar'+'ker'](this['device'],'COOKIE\x20'+_0x6234d0['_node']['name']);const _0x58da1f=_0x6234d0['numShadowF'+'aces'],_0x3fa400=_0x58da1f>0xeef*0x2+-0x16*-0x10f+-0x3527?this['quadRender'+'erCube']:this['quadRender'+'er2D'];_0x58da1f>-0x18f4+-0x154+-0x1*-0x1a49&&this['initInvVie'+'wProjMatri'+'ces'](),this['blitTextur'+'eId']['setValue'](_0x6234d0['cookie']);for(let _0x56e496=-0x10*-0x17b+-0x1*0x204a+-0x16f*-0x6;_0x56e496<_0x58da1f;_0x56e496++){if(qi['copy'](_0x6234d0['atlasViewp'+'ort']),_0x58da1f>-0x12cd+0x45*-0x43+0x24dd){const _0x2329f6=qi['z']/(0x61*-0x3a+0x158b+-0x26*-0x3),_0x294c4b=_0x35dcab[_0x56e496];qi['x']+=_0x2329f6*_0x294c4b['x'],qi['y']+=_0x2329f6*_0x294c4b['y'],qi['z']=_0x2329f6,qi['w']=_0x2329f6,this['invViewPro'+'jId']['setValue'](Pd[_0x56e496]['data']);}qi['mulScalar'](_0x533f56),_0x3fa400['render'](qi);}Q['popGpuMark'+'er'](_0x2880f7);}_0x3f761a['length']=-0x600+-0x1*0x1b05+0x2105;}}class QE extends fs{constructor(_0xda6dc1,_0x3ae165,_0x51efc3){super(_0xda6dc1),this['requiresCu'+'bemaps']=!(0x809+0x22ef*-0x1+0x61*0x47),this['shadowRend'+'erer']=_0x3ae165,this['shadowRend'+'ererLocal']=_0x51efc3;}['update'](_0x5b9d5d){const _0xc91d1c=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x4fe78b=this['shadowRend'+'ererLocal']['prepareLig'+'hts'](_0xc91d1c,_0x5b9d5d),_0x6b8b83=_0xc91d1c['length'];this['enabled']=_0x6b8b83>-0x111e*0x2+-0x2465+-0x93*-0x7b,_0x6b8b83&&this['shadowRend'+'erer']['setupRende'+'rPass'](this,_0x4fe78b,!(0x1*0x13d6+0x4*0x48f+-0x2611));}['execute'](){const _0x1a6119=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x40de2b=_0x1a6119['length'];for(let _0xd3b454=-0x59*0x1+-0x650*0x5+-0x1*-0x1fe9;_0xd3b454<_0x40de2b;_0xd3b454++){const _0x549402=_0x1a6119[_0xd3b454];for(let _0x579550=-0x1*-0x1dc9+-0x11f5*0x1+-0xbd4;_0x579550<_0x549402['numShadowF'+'aces'];_0x579550++)this['shadowRend'+'erer']['renderFace'](_0x549402,null,_0x579550,!(0x1*-0x18f0+0x1bc1+0x7*-0x67));}_0x1a6119['length']=0xac*-0x5+0x3e5+-0x89;}}class JE extends fs{constructor(_0x23e10b,_0x4622b2,_0x5ee39b,_0x77e5ce,_0x2b8a3c){super(_0x23e10b),this['renderer']=_0x4622b2,this['frameGraph']=null,this['cookiesRen'+'derPass']=Om['create'](_0x2b8a3c['cookieRend'+'erTarget'],_0x2b8a3c['cubeSlotsO'+'ffsets']),this['beforePass'+'es']['push'](this['cookiesRen'+'derPass']),this['shadowRend'+'erPass']=new QE(_0x23e10b,_0x5ee39b,_0x77e5ce),this['beforePass'+'es']['push'](this['shadowRend'+'erPass']);}['update'](_0x235786,_0x4bc34a,_0xa4f94f,_0x181ba4,_0x323d24){this['frameGraph']=_0x235786,this['cookiesRen'+'derPass']['enabled']=_0xa4f94f,_0xa4f94f&&this['cookiesRen'+'derPass']['update'](_0x181ba4),this['shadowRend'+'erPass']['enabled']=_0x4bc34a,_0x4bc34a&&this['shadowRend'+'erPass']['update'](_0x323d24);}['destroy'](){this['cookiesRen'+'derPass']['destroy'](),this['cookiesRen'+'derPass']=null;}['execute'](){const _0x5ee355=de(),{renderer:_0x32762d}=this,{scene:_0x24b1ca}=_0x32762d;_0x32762d['worldClust'+'ersAllocat'+'or']['update'](this['frameGraph']['renderPass'+'es'],_0x24b1ca['lighting']),_0x32762d['_lightClus'+'tersTime']+=de()-_0x5ee355,_0x32762d['_lightClus'+'ters']=_0x32762d['worldClust'+'ersAllocat'+'or']['count'];}}let Md=-0x1*0x208d+-0x18*-0x161+0x1*-0x8b;const ji=new te(),Yi=new te(),xa=new te(),o_=new oi(),Id=new xu(),l_=new te()['setScale'](-0x16b*-0x1b+0x192f*0x1+0x4d*-0xd3,-(0x6*0x272+-0x81+-0xe2a),0x264b+-0x135f+-0xa7*0x1d),Dd=new Set(),Ld=new Set(),Rd=new WS(),h_=new te()['set']([-0x1c62+-0x1302+0x1*0x2f65,-0x1*-0x1a21+-0xf01+-0xb20,0x799+-0x16ab*-0x1+-0x1e44,0x14ff+0x2*0x582+0x5*-0x667,0x32c*-0x8+-0x1*-0x20af+-0x1*0x74f,-0x11c2*-0x1+0x75*-0x1b+-0x56a,-0x85b+-0x1*0x22d4+0x2b2f,-0x11*0x23+0x26f3+0x24a*-0x10,0x8*0x10+0x79f+-0x81f,0x25fb+0x157*-0x13+-0x643*0x2,0x878*-0x2+-0xe5*-0x9+0x5*0x1c7+0.5,-0x1c9d+-0x57*0xc+0x20b1,0x16b0+-0x1*-0xdb8+0x748*-0x5,0x1ad0+0x1*0x1e2b+-0x38fb,-0x8d9*0x3+0x2011+0x2c3*-0x2+0.5,-0x1*0x59+0x13ab+0x5*-0x3dd]),c_=[new J(-0x1d23*0x1+0x59c+0x13*0x13d+0.5,0x5*-0x771+0x535*-0x5+-0x1f9f*-0x2+0.333333),new J(-0x1*-0x1281+0x2073+-0x32f4+0.25,-0x1*0x1006+0x207b*0x1+-0x1075+0.666667),new J(0xa*-0x2bb+0x2451*0x1+-0x903+0.75,-0x15c4+-0x1476+-0x5*-0x872+0.111111),new J(-0x18b0+0x279+0x1637+0.125,0x7d0+-0x394+-0x43c+0.444444),new J(-0x1a87+0x3*-0xa8a+0x3a25+0.625,-0x1fb*0x12+0xa74+0xd7*0x1e+0.777778),new J(0x103f*0x1+0xe94+0x25f*-0xd+0.375,-0x1*-0xd19+-0xfba+0x2a1+0.222222),new J(0x1*0xa6f+-0xecc+-0x45d*-0x1+0.875,0xe5+-0x2069+0x1f84+0.555556),new J(0x3*-0x8a6+-0x1911+-0x1*-0x3303+0.0625,0x246f+0x1a3+0xb*-0x376+0.888889),new J(-0x247b+-0x65d+0x1c9*0x18+0.5625,-0x2d*-0xb3+0x3b*-0x35+0x160*-0xe+0.037037),new J(-0x1a2*-0x12+-0x6f8+0x1*-0x166c+0.3125,0x11a5+0x396+-0x153b+0.37037),new J(-0x22*0x116+-0xeb*-0x1b+0x1*0xc23+0.8125,0x1*-0x966+-0x1*-0x236b+-0x1a05+0.703704),new J(0x13*-0x191+-0x2622+0x539*0xd+0.1875,-0x1d9c+0x3*0xb3e+-0x1f*0x22+0.148148),new J(-0x265e+0xcd4+0x198a+0.6875,0xab5+-0xf4a+-0x3*-0x187+0.481481),new J(-0x8c1+-0xd*0x17b+0x1c00+0.4375,0x637+-0x305+-0x332+0.814815),new J(-0x15d1+-0x1*0x150a+-0x4c3*-0x9+0.9375,0x2*-0xc54+-0x1e*0x13e+0x3dec+0.259259),new J(-0x31b*-0x3+0x285*-0x9+0xd5c+0.03125,-0x8*-0x1be+0xa1f*-0x2+0x64e+0.592593)],eA=new te(),tA=new te(),sA=new te(),iA=new te(),rA=new te(),aA=new te(),Ta=new Set(),Od=[],Fd=[];class nA{constructor(_0x28ec2e){h(this,'clustersDe'+'bugRendere'+'d',!(0xb*-0x25f+-0x603+0x2019)),h(this,'processing'+'MeshInstan'+'ces',new Set()),h(this,'worldClust'+'ersAllocat'+'or'),h(this,'lights',[]),h(this,'localLight'+'s',[]),h(this,'cameraDirS'+'hadowLight'+'s',new Map()),h(this,'dirLightSh'+'adows',new Map()),h(this,'blueNoise',new OE(-0x5*-0x359+0x745*-0x2+-0x1b8)),(this['device']=_0x28ec2e,this['scene']=null,this['worldClust'+'ersAllocat'+'or']=new ZE(_0x28ec2e),this['lightTextu'+'reAtlas']=new GE(_0x28ec2e),this['shadowMapC'+'ache']=new HE(),this['shadowRend'+'erer']=new Ry(this,this['lightTextu'+'reAtlas']),this['_shadowRen'+'dererLocal']=new $E(this,this['shadowRend'+'erer']),this['_shadowRen'+'dererDirec'+'tional']=new jE(this,this['shadowRend'+'erer']),this['_renderPas'+'sUpdateClu'+'stered']=new JE(this['device'],this,this['shadowRend'+'erer'],this['_shadowRen'+'dererLocal'],this['lightTextu'+'reAtlas']),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['_skinTime']=-0x1ffc+-0x4*0x4c4+0x441*0xc,this['_morphTime']=-0x2578+-0x6b6*0x1+0x2c2e,this['_cullTime']=-0x16fd+0x77*0x7+0x13bc,this['_shadowMap'+'Time']=-0x2f*0x98+-0x2207*0x1+0x3def,this['_lightClus'+'tersTime']=0x24b7+0x36f*-0x7+-0x6*0x21d,this['_layerComp'+'ositionUpd'+'ateTime']=-0x2551+-0x985*0x1+0x2ed6,this['_shadowDra'+'wCalls']=0x553*0x7+0x12e*0x2+0x27a1*-0x1,this['_skinDrawC'+'alls']=0x1086+-0x1*0x18d9+0x1*0x853,this['_instanced'+'DrawCalls']=0x445+-0x1378+0xf33,this['_shadowMap'+'Updates']=-0x21*-0x92+-0x85*-0x49+-0x38bf,this['_numDrawCa'+'llsCulled']=0x5f0+-0x2288+0x1c98,this['_camerasRe'+'ndered']=0x1736+-0xb5d*-0x2+-0x2df0,this['_lightClus'+'ters']=0x13*0xe3+0x1*-0x17ba+0x24b*0x3);const _0xb9c6f2=_0x28ec2e['scope'];this['boneTextur'+'eId']=_0xb9c6f2['resolve']('texture_po'+'seMap'),this['modelMatri'+'xId']=_0xb9c6f2['resolve']('matrix_mod'+'el'),this['normalMatr'+'ixId']=_0xb9c6f2['resolve']('matrix_nor'+'mal'),this['viewInvId']=_0xb9c6f2['resolve']('matrix_vie'+'wInverse'),this['viewPos']=new Float32Array(0x377*0x1+0x157*-0x1+-0x21d),this['viewPosId']=_0xb9c6f2['resolve']('view_posit'+'ion'),this['projId']=_0xb9c6f2['resolve']('matrix_pro'+'jection'),this['projSkybox'+'Id']=_0xb9c6f2['resolve']('matrix_pro'+'jectionSky'+'box'),this['viewId']=_0xb9c6f2['resolve']('matrix_vie'+'w'),this['viewId3']=_0xb9c6f2['resolve']('matrix_vie'+'w3'),this['viewProjId']=_0xb9c6f2['resolve']('matrix_vie'+'wProjectio'+'n'),this['flipYId']=_0xb9c6f2['resolve']('projection'+'FlipY'),this['tbnBasis']=_0xb9c6f2['resolve']('tbnBasis'),this['nearClipId']=_0xb9c6f2['resolve']('camera_nea'+'r'),this['farClipId']=_0xb9c6f2['resolve']('camera_far'),this['cameraPara'+'ms']=new Float32Array(0xa6e+-0xa49+-0x21),this['cameraPara'+'msId']=_0xb9c6f2['resolve']('camera_par'+'ams'),this['viewIndexI'+'d']=_0xb9c6f2['resolve']('view_index'),this['viewIndexI'+'d']['setValue'](0x438*-0x2+0x11+0x85f),this['blueNoiseJ'+'itterVersi'+'on']=-0x4*-0x100+-0x1277+0xe77,this['blueNoiseJ'+'itterVec']=new ae(),this['blueNoiseJ'+'itterData']=new Float32Array(0x1*0xeca+0x1*0x1e42+0x5a1*-0x8),this['blueNoiseJ'+'itterId']=_0xb9c6f2['resolve']('blueNoiseJ'+'itter'),this['blueNoiseT'+'extureId']=_0xb9c6f2['resolve']('blueNoiseT'+'ex32'),this['alphaTestI'+'d']=_0xb9c6f2['resolve']('alpha_ref'),this['opacityMap'+'Id']=_0xb9c6f2['resolve']('texture_op'+'acityMap'),this['exposureId']=_0xb9c6f2['resolve']('exposure'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']=_0xb9c6f2['resolve']('twoSidedLi'+'ghtingNegS'+'caleFactor'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](0x2279+-0x1c84+-0x1*0x5f5),this['morphPosit'+'ionTex']=_0xb9c6f2['resolve']('morphPosit'+'ionTex'),this['morphNorma'+'lTex']=_0xb9c6f2['resolve']('morphNorma'+'lTex'),this['morphTexPa'+'rams']=_0xb9c6f2['resolve']('morph_tex_'+'params'),this['lightCube']=new NE(),this['constantLi'+'ghtCube']=_0xb9c6f2['resolve']('lightCube['+'0]');}['destroy'](){this['shadowRend'+'erer']=null,this['_shadowRen'+'dererLocal']=null,this['_shadowRen'+'dererDirec'+'tional']=null,this['shadowMapC'+'ache']['destroy'](),this['shadowMapC'+'ache']=null,this['_renderPas'+'sUpdateClu'+'stered']['destroy'](),this['_renderPas'+'sUpdateClu'+'stered']=null,this['lightTextu'+'reAtlas']['destroy'](),this['lightTextu'+'reAtlas']=null;}['setupViewp'+'ort'](_0x2c99ab,_0x28ccad){const _0x5da28f=this['device'],_0x2860c8=_0x28ccad?_0x28ccad['width']:_0x5da28f['width'],_0x3b37cf=_0x28ccad?_0x28ccad['height']:_0x5da28f['height'],_0xb1e422=_0x2c99ab['rect'];let _0x19a81e=Math['floor'](_0xb1e422['x']*_0x2860c8),_0x4fb3a1=Math['floor'](_0xb1e422['y']*_0x3b37cf),_0x1a92ab=Math['floor'](_0xb1e422['z']*_0x2860c8),_0x127519=Math['floor'](_0xb1e422['w']*_0x3b37cf);if(_0x5da28f['setViewpor'+'t'](_0x19a81e,_0x4fb3a1,_0x1a92ab,_0x127519),_0x2c99ab['_scissorRe'+'ctClear']){const _0x54689b=_0x2c99ab['scissorRec'+'t'];_0x19a81e=Math['floor'](_0x54689b['x']*_0x2860c8),_0x4fb3a1=Math['floor'](_0x54689b['y']*_0x3b37cf),_0x1a92ab=Math['floor'](_0x54689b['z']*_0x2860c8),_0x127519=Math['floor'](_0x54689b['w']*_0x3b37cf);}_0x5da28f['setScissor'](_0x19a81e,_0x4fb3a1,_0x1a92ab,_0x127519);}['setCameraU'+'niforms'](_0xb9e047,_0x46ef21){var _0x227bb4,_0x498944;const _0x15e5e9=_0x46ef21==null?void(-0x1b7f+-0x10e8+0x2c67):_0x46ef21['flipY'];let _0x2ac69b=null;if(_0xb9e047['xr']&&_0xb9e047['xr']['session']){const _0x2e7067=((_0x498944=(_0x227bb4=_0xb9e047['_node'])==null?void(-0x59*0x59+-0x114b*0x1+-0xe*-0x372):_0x227bb4['parent'])==null?void(0x78b+-0x1567+0x377*0x4):_0x498944['getWorldTr'+'ansform']())||null;_0x2ac69b=_0xb9e047['xr']['views']['list'];for(let _0x509f3f=-0xe*-0x13d+0x1922+-0x25c*0x12;_0x509f3f<_0x2ac69b['length'];_0x509f3f++){const _0x463bcd=_0x2ac69b[_0x509f3f];_0x463bcd['updateTran'+'sforms'](_0x2e7067),_0xb9e047['frustum']['setFromMat'+'4'](_0x463bcd['projViewOf'+'fMat']);}}else{let _0x499926=_0xb9e047['projection'+'Matrix'];_0xb9e047['calculateP'+'rojection']&&_0xb9e047['calculateP'+'rojection'](_0x499926,Ml);let _0x235e40=_0xb9e047['getProject'+'ionMatrixS'+'kybox']();_0x15e5e9&&(_0x499926=eA['mul2'](l_,_0x499926),_0x235e40=tA['mul2'](l_,_0x235e40)),this['device']['isWebGPU']&&(_0x499926=sA['mul2'](h_,_0x499926),_0x235e40=iA['mul2'](h_,_0x235e40));const {jitter:_0x5eb2a3}=_0xb9e047;let _0x2f953e=0x1*0x19f7+0x7fd+-0x21f4,_0x1b3879=0x1492*0x1+-0x6df+-0xdb3;if(_0x5eb2a3>0x2005+0x1*0x21bf+0x3d*-0x114){const _0x29079a=_0x46ef21?_0x46ef21['width']:this['device']['width'],_0x1c8141=_0x46ef21?_0x46ef21['height']:this['device']['height'],_0x52a310=c_[this['device']['renderVers'+'ion']%c_['length']];_0x2f953e=_0x5eb2a3*(_0x52a310['x']*(0x22d3+-0x421*0x5+0x1*-0xe2c)-(-0x1*-0x1eb4+-0x1609+-0x8aa))/_0x29079a,_0x1b3879=_0x5eb2a3*(_0x52a310['y']*(0x9f+0x379+-0x416)-(-0x25b0+-0x1*-0x15ce+0xfe3))/_0x1c8141,_0x499926=rA['copy'](_0x499926),_0x499926['data'][-0x1ef6+-0x103b+0x2f39]=_0x2f953e,_0x499926['data'][-0x1837+-0x1f7+-0x1*-0x1a37]=_0x1b3879,_0x235e40=aA['copy'](_0x235e40),_0x235e40['data'][-0xe4+-0x13fc+0x14e8]=_0x2f953e,_0x235e40['data'][0x2052+-0xf53+0x14e*-0xd]=_0x1b3879,this['blueNoiseJ'+'itterVersi'+'on']!==this['device']['renderVers'+'ion']&&(this['blueNoiseJ'+'itterVersi'+'on']=this['device']['renderVers'+'ion'],this['blueNoise']['vec4'](this['blueNoiseJ'+'itterVec']));}const _0x513862=_0x5eb2a3>-0x172f*-0x1+0x9*-0xb3+-0x439*0x4?this['blueNoiseJ'+'itterVec']:ae['ZERO'];if(this['blueNoiseJ'+'itterData'][0x1e+0x7*0x388+0x18d6*-0x1]=_0x513862['x'],this['blueNoiseJ'+'itterData'][-0x126a*-0x1+0xd1c+0x1*-0x1f85]=_0x513862['y'],this['blueNoiseJ'+'itterData'][-0x903+-0xa35+0x133a]=_0x513862['z'],this['blueNoiseJ'+'itterData'][-0x3*0x216+-0x1*-0x26bf+0x1*-0x207a]=_0x513862['w'],this['blueNoiseJ'+'itterId']['setValue'](this['blueNoiseJ'+'itterData']),this['projId']['setValue'](_0x499926['data']),this['projSkybox'+'Id']['setValue'](_0x235e40['data']),_0xb9e047['calculateT'+'ransform'])_0xb9e047['calculateT'+'ransform'](Yi,Ml);else{const _0x187a6f=_0xb9e047['_node']['getPositio'+'n'](),_0xeb1863=_0xb9e047['_node']['getRotatio'+'n']();Yi['setTRS'](_0x187a6f,_0xeb1863,I['ONE']);}this['viewInvId']['setValue'](Yi['data']),xa['copy'](Yi)['invert'](),this['viewId']['setValue'](xa['data']),o_['setFromMat'+'4'](xa),this['viewId3']['setValue'](o_['data']),ji['mul2'](_0x499926,xa),this['viewProjId']['setValue'](ji['data']),_0xb9e047['_storeShad'+'erMatrices'](ji,_0x2f953e,_0x1b3879,this['device']['renderVers'+'ion']),this['flipYId']['setValue'](_0x15e5e9?-(0x45a*0x5+0x1bf1+-0x31b2):-0x139f+-0x9e+0x143e*0x1),this['dispatchVi'+'ewPos'](_0xb9e047['_node']['getPositio'+'n']()),_0xb9e047['frustum']['setFromMat'+'4'](ji);}this['tbnBasis']['setValue'](_0x15e5e9?-(0x2243*-0x1+-0xb*-0x219+0xb31):0x86a+0x493*-0x7+-0x4*-0x5e7);const _0x31b563=_0xb9e047['_nearClip'],_0x1b39d7=_0xb9e047['_farClip'];return this['nearClipId']['setValue'](_0x31b563),this['farClipId']['setValue'](_0x1b39d7),this['cameraPara'+'ms'][-0x1121+-0x1251+0x2*0x11b9]=(0x5*0x6dc+-0x1dfd+-0x2*0x227)/_0x1b39d7,this['cameraPara'+'ms'][-0x2*0x23+-0x12bc+0x1303]=_0x1b39d7,this['cameraPara'+'ms'][-0xb*-0x131+0x1*-0x2447+0x172e]=_0x31b563,this['cameraPara'+'ms'][0xbc*-0x29+-0x2*0xa7f+0x1*0x331d]=_0xb9e047['projection']===hn?-0x1e37+-0x1*0x12b3+0x30eb:-0x80*0x40+0x1e37+-0x1*-0x1c9,this['cameraPara'+'msId']['setValue'](this['cameraPara'+'ms']),this['exposureId']['setValue'](this['scene']['physicalUn'+'its']?_0xb9e047['getExposur'+'e']():this['scene']['exposure']),_0x2ac69b;}['clear'](_0x429cfd,_0x29aecb,_0x1c19c7,_0x12faae){const _0x4cdd0a=(_0x29aecb??_0x429cfd['_clearColo'+'rBuffer']?bo:0x3*-0x41d+-0x1*-0x8a+0xbcd)|(_0x1c19c7??_0x429cfd['_clearDept'+'hBuffer']?Co:-0x151*0xd+0xa8d*0x3+0x1*-0xe8a)|(_0x12faae??_0x429cfd['_clearSten'+'cilBuffer']?Ih:0x205b+0x1d40+-0x1*0x3d9b);if(_0x4cdd0a){const _0x38f24f=this['device'];Q['pushGpuMar'+'ker'](_0x38f24f,'CLEAR'),_0x38f24f['clear']({'color':[_0x429cfd['_clearColo'+'r']['r'],_0x429cfd['_clearColo'+'r']['g'],_0x429cfd['_clearColo'+'r']['b'],_0x429cfd['_clearColo'+'r']['a']],'depth':_0x429cfd['_clearDept'+'h'],'stencil':_0x429cfd['_clearSten'+'cil'],'flags':_0x4cdd0a}),Q['popGpuMark'+'er'](_0x38f24f);}}['setCamera'](_0x5d3352,_0x55eef4,_0x14b1c4,_0x180b74=null){this['setCameraU'+'niforms'](_0x5d3352,_0x55eef4),this['clearView'](_0x5d3352,_0x55eef4,_0x14b1c4,!(0x6ed*-0x5+-0x1*0xdef+0x3091));}['clearView'](_0x5a75c0,_0x1d46bb,_0x57f3ae,_0x4d516a){const _0x442d59=this['device'];if(Q['pushGpuMar'+'ker'](_0x442d59,'CLEAR-VIEW'),_0x442d59['setRenderT'+'arget'](_0x1d46bb),_0x442d59['updateBegi'+'n'](),_0x4d516a&&(_0x442d59['setColorWr'+'ite'](!(0x2a*0x65+0x109*0xe+-0x1*0x1f10),!(0x118e+0x3*0x9b8+0x6*-0x7c9),!(0x26a6+0x1389+-0x3a2f*0x1),!(-0x2142+-0x1723+0x1*0x3865)),_0x442d59['setDepthWr'+'ite'](!(0x1cf5+0xaf*-0x27+-0x15*0x1c))),this['setupViewp'+'ort'](_0x5a75c0,_0x1d46bb),_0x57f3ae){const _0x45a014=_0x5a75c0['_clearOpti'+'ons'];_0x442d59['clear'](_0x45a014||{'color':[_0x5a75c0['_clearColo'+'r']['r'],_0x5a75c0['_clearColo'+'r']['g'],_0x5a75c0['_clearColo'+'r']['b'],_0x5a75c0['_clearColo'+'r']['a']],'depth':_0x5a75c0['_clearDept'+'h'],'flags':(_0x5a75c0['_clearColo'+'rBuffer']?bo:-0x549+-0xe46+0x138f)|(_0x5a75c0['_clearDept'+'hBuffer']?Co:0x134b+-0x207b+0x1a6*0x8)|(_0x5a75c0['_clearSten'+'cilBuffer']?Ih:-0x21ba+-0x29f*0x7+0x3413),'stencil':_0x5a75c0['_clearSten'+'cil']});}Q['popGpuMark'+'er'](_0x442d59);}['setupCullM'+'ode'](_0x1ea472,_0x5f973d,_0x398410){const _0x34a98a=_0x398410['material'];let _0xb6b171=xt;if(_0x1ea472){let _0x579b92=0x1724*0x1+0x5f4+-0x1d17;(_0x34a98a['cull']===mo||_0x34a98a['cull']===Jr)&&(_0x579b92=_0x5f973d*_0x398410['flipFacesF'+'actor']*_0x398410['node']['worldScale'+'Sign']),_0x579b92<0x1*0xc73+0x1a67+-0x26da?_0xb6b171=_0x34a98a['cull']===mo?Jr:mo:_0xb6b171=_0x34a98a['cull'];}this['device']['setCullMod'+'e'](_0xb6b171),_0xb6b171===xt&&_0x34a98a['cull']===xt&&this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](_0x398410['node']['worldScale'+'Sign']);}['updateCame'+'raFrustum'](_0x6084){if(_0x6084['xr']&&_0x6084['xr']['views']['list']['length']){const _0xb9a167=_0x6084['xr']['views']['list'][-0x5c*-0xb+-0x717+0x323];ji['mul2'](_0xb9a167['projMat'],_0xb9a167['viewOffMat']),_0x6084['frustum']['setFromMat'+'4'](ji);return;}const _0x24dd0c=_0x6084['projection'+'Matrix'];if(_0x6084['calculateP'+'rojection']&&_0x6084['calculateP'+'rojection'](_0x24dd0c,Ml),_0x6084['calculateT'+'ransform'])_0x6084['calculateT'+'ransform'](Yi,Ml);else{const _0x16acc8=_0x6084['_node']['getPositio'+'n'](),_0x35e1d1=_0x6084['_node']['getRotatio'+'n']();Yi['setTRS'](_0x16acc8,_0x35e1d1,I['ONE']),this['viewInvId']['setValue'](Yi['data']);}xa['copy'](Yi)['invert'](),ji['mul2'](_0x24dd0c,xa),_0x6084['frustum']['setFromMat'+'4'](ji);}['setBaseCon'+'stants'](_0x5e74e5,_0x1788fb){_0x5e74e5['setCullMod'+'e'](_0x1788fb['cull']),_0x1788fb['opacityMap']&&this['opacityMap'+'Id']['setValue'](_0x1788fb['opacityMap']),(_0x1788fb['opacityMap']||_0x1788fb['alphaTest']>-0x1341+0x16b2+0x371*-0x1)&&this['alphaTestI'+'d']['setValue'](_0x1788fb['alphaTest']);}['updateCpuS'+'kinMatrice'+'s'](_0x33c112){Md++;const _0x58c62a=_0x33c112['length'];if(_0x58c62a===-0x1faa+0x2352+-0x3a8)return;const _0x555464=de();for(let _0x347a00=0x13a6+-0xe11+-0x1*0x595;_0x347a00<_0x58c62a;_0x347a00++){const _0x25eb1e=_0x33c112[_0x347a00]['skinInstan'+'ce'];_0x25eb1e&&(_0x25eb1e['updateMatr'+'ices'](_0x33c112[_0x347a00]['node'],Md),_0x25eb1e['_dirty']=!(-0x22d2*-0x1+0x1cca+-0x3f9c));}this['_skinTime']+=de()-_0x555464;}['updateGpuS'+'kinMatrice'+'s'](_0x2a12d1){const _0x3db802=de();for(const _0x2d65b9 of _0x2a12d1){const _0x41c6d1=_0x2d65b9['skinInstan'+'ce'];_0x41c6d1&&_0x41c6d1['_dirty']&&(_0x41c6d1['updateMatr'+'ixPalette'](_0x2d65b9['node'],Md),_0x41c6d1['_dirty']=!(-0x29b+0x8a3+-0x607));}this['_skinTime']+=de()-_0x3db802;}['updateMorp'+'hing'](_0x11f5da){const _0x487022=de();for(const _0x5d4af3 of _0x11f5da){const _0x28b140=_0x5d4af3['morphInsta'+'nce'];_0x28b140&&_0x28b140['_dirty']&&_0x28b140['update']();}this['_morphTime']+=de()-_0x487022;}['updateGSpl'+'ats'](_0x262844){var _0x586157;for(const _0xd89779 of _0x262844)(_0x586157=_0xd89779['gsplatInst'+'ance'])==null||_0x586157['update']();}['gpuUpdate'](_0x27f58b){this['updateGpuS'+'kinMatrice'+'s'](_0x27f58b),this['updateMorp'+'hing'](_0x27f58b),this['updateGSpl'+'ats'](_0x27f58b);}['setVertexB'+'uffers'](_0x5014f3,_0x518d25){_0x5014f3['setVertexB'+'uffer'](_0x518d25['vertexBuff'+'er']);}['setMorphin'+'g'](_0x13b10b,_0x4064e0){_0x4064e0&&(_0x4064e0['prepareRen'+'dering'](_0x13b10b),_0x13b10b['setVertexB'+'uffer'](_0x4064e0['morph']['vertexBuff'+'erIds']),this['morphPosit'+'ionTex']['setValue'](_0x4064e0['texturePos'+'itions']),this['morphNorma'+'lTex']['setValue'](_0x4064e0['textureNor'+'mals']),this['morphTexPa'+'rams']['setValue'](_0x4064e0['_texturePa'+'rams']));}['setSkinnin'+'g'](_0x3d61f8,_0x2ed934){const _0x41fc7=_0x2ed934['skinInstan'+'ce'];if(_0x41fc7){this['_skinDrawC'+'alls']++;const _0x4da30d=_0x41fc7['boneTextur'+'e'];this['boneTextur'+'eId']['setValue'](_0x4da30d);}}['dispatchVi'+'ewPos'](_0x41cc48){const _0x140d2c=this['viewPos'];_0x140d2c[0x172+0x1+0x173*-0x1]=_0x41cc48['x'],_0x140d2c[-0xc5*0xb+-0x1f8d+0xf*0x2ab]=_0x41cc48['y'],_0x140d2c[0x7*-0x21c+0x1*-0x13d2+-0x29*-0xd8]=_0x41cc48['z'],this['viewPosId']['setValue'](_0x140d2c);}['initViewBi'+'ndGroupFor'+'mat'](_0x954983){if(this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']){const _0x5497f4=[new ct('matrix_vie'+'w',Js),new ct('matrix_vie'+'wInverse',Js),new ct('matrix_pro'+'jection',Js),new ct('matrix_pro'+'jectionSky'+'box',Js),new ct('matrix_vie'+'wProjectio'+'n',Js),new ct('matrix_vie'+'w3',Sn),new ct('cubeMapRot'+'ationMatri'+'x',Sn),new ct('view_posit'+'ion',rs),new ct('skyboxInte'+'nsity',Us),new ct('exposure',Us),new ct('textureBia'+'s',Us),new ct('view_index',Us)];_0x954983&&_0x5497f4['push'](new ct('clusterCel'+'lsCountByB'+'oundsSize',rs),new ct('clusterTex'+'tureSize',rs),new ct('clusterBou'+'ndsMin',rs),new ct('clusterBou'+'ndsDelta',rs),new ct('clusterCel'+'lsDot',rs),new ct('clusterCel'+'lsMax',rs),new ct('shadowAtla'+'sParams',ia),new ct('clusterMax'+'Cells',sa),new ct('clusterSki'+'p',Us)),this['viewUnifor'+'mFormat']=new qS(this['device'],_0x5497f4);const _0x379967=[new im(sm,tm|LS)];this['viewBindGr'+'oupFormat']=new HS(this['device'],_0x379967);}}['setupViewU'+'niforms'](_0x53e76c,_0x30ee58){this['projId']['setValue'](_0x53e76c['projMat']['data']),this['projSkybox'+'Id']['setValue'](_0x53e76c['projMat']['data']),this['viewId']['setValue'](_0x53e76c['viewOffMat']['data']),this['viewInvId']['setValue'](_0x53e76c['viewInvOff'+'Mat']['data']),this['viewId3']['setValue'](_0x53e76c['viewMat3']['data']),this['viewProjId']['setValue'](_0x53e76c['projViewOf'+'fMat']['data']),this['viewPosId']['setValue'](_0x53e76c['positionDa'+'ta']),this['viewIndexI'+'d']['setValue'](_0x30ee58);}['setupViewU'+'niformBuff'+'ers'](_0x36bc60,_0x34cb07,_0x2693fa,_0x57ed82){M['assert'](Array['isArray'](_0x36bc60),'viewBindGr'+'oups\x20must\x20'+'be\x20an\x20arra'+'y');const {device:_0x1fd1fa}=this,_0x57a03f=(_0x57ed82==null?void(-0x2687+0x1a12+-0x427*-0x3):_0x57ed82['length'])??0x1f5b*-0x1+-0x1*0x1acf+0x3a2b;for(;_0x36bc60['length']<_0x57a03f;){const _0x5f270f=new nm(_0x1fd1fa,_0x34cb07,!(0x157*0x1+0x8*-0x1ea+0xdfa)),_0x32737=new rm(_0x1fd1fa,_0x2693fa,_0x5f270f);ca['setName'](_0x32737,'ViewBindGr'+'oup_'+_0x32737['id']),_0x36bc60['push'](_0x32737);}if(_0x57ed82)for(let _0x5459a3=0x1d94*0x1+-0x436+-0x195e;_0x5459a3<_0x57a03f;_0x5459a3++){const _0x43218f=_0x57ed82[_0x5459a3];this['setupViewU'+'niforms'](_0x43218f,_0x5459a3);const _0x302984=_0x36bc60[_0x5459a3];_0x302984['defaultUni'+'formBuffer']['update'](),_0x302984['update']();}else{const _0x188d6a=_0x36bc60[0x4d2*-0x1+-0x17a9+-0x1*-0x1c7b];_0x188d6a['defaultUni'+'formBuffer']['update'](),_0x188d6a['update']();}_0x57ed82||_0x1fd1fa['setBindGro'+'up'](Fo,_0x36bc60[-0xc*0x27e+-0x25b*0x9+0x31*0x10b]);}['setupMeshU'+'niformBuff'+'ers'](_0x5ab229){const _0x79933d=this['device'];if(_0x79933d['supportsUn'+'iformBuffe'+'rs']){const _0x53b270=_0x5ab229['getBindGro'+'up'](_0x79933d);_0x53b270['update'](),_0x79933d['setBindGro'+'up'](VS,_0x53b270),_0x5ab229['getUniform'+'Buffer'](_0x79933d)['update'](Rd),_0x79933d['setBindGro'+'up'](wf,Rd['bindGroup'],Rd['offsets']);}}['setMeshIns'+'tanceMatri'+'ces'](_0x1fd017,_0x2a0faa=!(0x76+-0x112f*-0x2+-0x22d3)){const _0x2ed40c=_0x1fd017['node']['worldTrans'+'form'];this['modelMatri'+'xId']['setValue'](_0x2ed40c['data']),_0x2a0faa&&this['normalMatr'+'ixId']['setValue'](_0x1fd017['node']['normalMatr'+'ix']['data']);}['cull'](_0x490c6c,_0x18bdbe,_0x5f0225){const _0x566c9c=de(),_0x48d955=_0x5f0225['opaque'];_0x48d955['length']=0x2c7*0x3+-0x15dd*0x1+-0x4*-0x362;const _0x221c60=_0x5f0225['transparen'+'t'];_0x221c60['length']=0xd*-0x13+0x7*0x51+-0xa*0x20;const _0x4c1dca=_0x490c6c['frustumCul'+'ling'],_0x2ef851=_0x18bdbe['length'];for(let _0x188d2b=0x146c+0x3*-0x22d+-0xde5;_0x188d2b<_0x2ef851;_0x188d2b++){const _0x1d170b=_0x18bdbe[_0x188d2b];_0x1d170b['visible']&&(!_0x4c1dca||!_0x1d170b['cull']||_0x1d170b['_isVisible'](_0x490c6c))&&(_0x1d170b['visibleThi'+'sFrame']=!(-0x1d32+0xc89+0x10a9),(_0x1d170b['transparen'+'t']?_0x221c60:_0x48d955)['push'](_0x1d170b),(_0x1d170b['skinInstan'+'ce']||_0x1d170b['morphInsta'+'nce']||_0x1d170b['gsplatInst'+'ance'])&&(this['processing'+'MeshInstan'+'ces']['add'](_0x1d170b),_0x1d170b['gsplatInst'+'ance']&&_0x1d170b['gsplatInst'+'ance']['cameras']['push'](_0x490c6c)));}this['_cullTime']+=de()-_0x566c9c,this['_numDrawCa'+'llsCulled']+=_0x4c1dca?_0x2ef851:0xed6+0x8*-0x19d+-0x1ee;}['collectLig'+'hts'](_0x215752){this['lights']['length']=0xd*0x11e+0x2*-0xc5+-0xcfc,this['localLight'+'s']['length']=-0x1c22+-0x1109+0x1*0x2d2b;const _0x1c62a4=this['scene']['_stats'];_0x1c62a4['dynamicLig'+'hts']=-0x1*-0x10d9+0x17*0x4+-0x1135,_0x1c62a4['bakedLight'+'s']=0x12a4+0x7cd+-0x1*0x1a71;const _0x1ec3f5=_0x215752['layerList']['length'];for(let _0x57ca10=0xa50+-0x11bf+0x76f;_0x57ca10<_0x1ec3f5;_0x57ca10++){const _0x3ec22b=_0x215752['layerList'][_0x57ca10];if(!Ld['has'](_0x3ec22b)){Ld['add'](_0x3ec22b);const _0x41f50c=_0x3ec22b['_lights'];for(let _0x1f9447=-0x1*0x1141+0x26d5+-0x1594;_0x1f9447<_0x41f50c['length'];_0x1f9447++){const _0x4d6f31=_0x41f50c[_0x1f9447];Dd['has'](_0x4d6f31)||(Dd['add'](_0x4d6f31),this['lights']['push'](_0x4d6f31),_0x4d6f31['_type']!==ve&&this['localLight'+'s']['push'](_0x4d6f31),(_0x4d6f31['mask']&ds||_0x4d6f31['mask']&si)&&_0x1c62a4['dynamicLig'+'hts']++,_0x4d6f31['mask']&ii&&_0x1c62a4['bakedLight'+'s']++);}}}_0x1c62a4['lights']=this['lights']['length'],Dd['clear'](),Ld['clear']();}['cullLights'](_0x1e7d3d,_0x405892){const _0x57c86c=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x38b290=this['scene']['physicalUn'+'its'];for(let _0xc5eb2e=0x1*-0x1b95+-0x1b99+0x372e;_0xc5eb2e<_0x405892['length'];_0xc5eb2e++){const _0x38b494=_0x405892[_0xc5eb2e];if(_0x38b494['enabled']){if(_0x38b494['_type']!==ve){if(_0x38b494['getBoundin'+'gSphere'](Id),_0x1e7d3d['frustum']['containsSp'+'here'](Id)){_0x38b494['visibleThi'+'sFrame']=!(-0x41+-0x492+0x4d3),_0x38b494['usePhysica'+'lUnits']=_0x38b290;const _0x2e8d82=_0x1e7d3d['getScreenS'+'ize'](Id);_0x38b494['maxScreenS'+'ize']=Math['max'](_0x38b494['maxScreenS'+'ize'],_0x2e8d82);}else _0x57c86c||_0x38b494['castShadow'+'s']&&!_0x38b494['shadowMap']&&(_0x38b494['visibleThi'+'sFrame']=!(-0x9ae+0x33*-0x55+-0x1a9d*-0x1));}else _0x38b494['usePhysica'+'lUnits']=this['scene']['physicalUn'+'its'];}}}['cullShadow'+'maps'](_0xa91943){const _0xca7f2a=this['scene']['clusteredL'+'ightingEna'+'bled'];for(let _0x14ce6c=0xe3*-0x6+0x63+-0x1a5*-0x3;_0x14ce6c<this['localLight'+'s']['length'];_0x14ce6c++){const _0x5ea1ab=this['localLight'+'s'][_0x14ce6c];_0x5ea1ab['_type']!==ve&&(_0xca7f2a?_0x5ea1ab['atlasSlotU'+'pdated']&&_0x5ea1ab['shadowUpda'+'teMode']===vs&&(_0x5ea1ab['shadowUpda'+'teMode']=or):_0x5ea1ab['shadowUpda'+'teMode']===vs&&_0x5ea1ab['castShadow'+'s']&&(_0x5ea1ab['getRenderD'+'ata'](null,0x23*-0x8f+-0x1add+-0x1*-0x2e6a)['shadowCame'+'ra']['renderTarg'+'et']||(_0x5ea1ab['shadowUpda'+'teMode']=or)),_0x5ea1ab['visibleThi'+'sFrame']&&_0x5ea1ab['castShadow'+'s']&&_0x5ea1ab['shadowUpda'+'teMode']!==vs&&this['_shadowRen'+'dererLocal']['cull'](_0x5ea1ab,_0xa91943));}this['cameraDirS'+'hadowLight'+'s']['clear']();const _0x3faa73=_0xa91943['cameras'];for(let _0x1597b4=0x1d14+-0x52*-0x59+-0xb6*0x51;_0x1597b4<_0x3faa73['length'];_0x1597b4++){const _0x591e10=_0x3faa73[_0x1597b4];if(_0x591e10['enabled']){const _0x2ebb55=_0x591e10['camera'];let _0x270e4c;const _0x3ea61f=_0x2ebb55['layers'];for(let _0x4e3c45=0xe2+0x4e*0x65+0x2*-0xfd4;_0x4e3c45<_0x3ea61f['length'];_0x4e3c45++){const _0x4d3f53=_0xa91943['getLayerBy'+'Id'](_0x3ea61f[_0x4e3c45]);if(_0x4d3f53){const _0x1b75ab=_0x4d3f53['splitLight'+'s'][ve];for(let _0x511ca6=-0x141*-0x1+0x1*0xbfb+-0xd3c;_0x511ca6<_0x1b75ab['length'];_0x511ca6++){const _0x21696d=_0x1b75ab[_0x511ca6];_0x21696d['castShadow'+'s']&&!Ta['has'](_0x21696d)&&(Ta['add'](_0x21696d),_0x270e4c=_0x270e4c??[],_0x270e4c['push'](_0x21696d),this['_shadowRen'+'dererDirec'+'tional']['cull'](_0x21696d,_0xa91943,_0x2ebb55));}}}_0x270e4c&&this['cameraDirS'+'hadowLight'+'s']['set'](_0x2ebb55,_0x270e4c),Ta['clear']();}}}['cullCompos'+'ition'](_0x58c5e2){const _0xd99b52=de(),{scene:_0x3d6233}=this;this['processing'+'MeshInstan'+'ces']['clear']();const _0xe5fcdd=_0x58c5e2['cameras']['length'];this['_camerasRe'+'ndered']+=_0xe5fcdd;for(let _0x42408e=-0x2*0x128f+-0x704*-0x5+0x6*0x57;_0x42408e<_0xe5fcdd;_0x42408e++){const _0x233e77=_0x58c5e2['cameras'][_0x42408e];_0x3d6233==null||_0x3d6233['fire'](Ty,_0x233e77);const _0x3196ae=_0x233e77['renderTarg'+'et'];_0x233e77['frameUpdat'+'e'](_0x3196ae),this['updateCame'+'raFrustum'](_0x233e77['camera']);const _0x5ab8ca=_0x233e77['layers'];for(let _0x4efae4=0x1b97*-0x1+-0x4*-0x823+-0x4f5;_0x4efae4<_0x5ab8ca['length'];_0x4efae4++){const _0x49462a=_0x58c5e2['getLayerBy'+'Id'](_0x5ab8ca[_0x4efae4]);if(_0x49462a&&_0x49462a['enabled']){this['cullLights'](_0x233e77['camera'],_0x49462a['_lights']);const _0xfee13=_0x49462a['getCulledI'+'nstances'](_0x233e77['camera']);this['cull'](_0x233e77['camera'],_0x49462a['meshInstan'+'ces'],_0xfee13);}}_0x3d6233==null||_0x3d6233['fire'](wy,_0x233e77);}_0x3d6233['clusteredL'+'ightingEna'+'bled']&&this['updateLigh'+'tTextureAt'+'las'](),this['cullShadow'+'maps'](_0x58c5e2),_0x3d6233==null||_0x3d6233['fire'](Sw),this['_cullTime']+=de()-_0xd99b52;}['updateShad'+'ers'](_0x4e84d7,_0x1793f6){const _0x272dfc=_0x4e84d7['length'];for(let _0x1c8be8=-0x153d+0x682+-0x1*-0xebb;_0x1c8be8<_0x272dfc;_0x1c8be8++){const _0xcfd931=_0x4e84d7[_0x1c8be8]['material'];if(_0xcfd931&&!Ta['has'](_0xcfd931)&&(Ta['add'](_0xcfd931),_0xcfd931['getShaderV'+'ariant']!==ua['prototype']['getShaderV'+'ariant'])){if(_0x1793f6&&(!_0xcfd931['useLightin'+'g']||_0xcfd931['emitter']&&!_0xcfd931['emitter']['lighting']))continue;_0xcfd931['clearVaria'+'nts']();}}Ta['clear']();}['updateFram'+'eUniforms'](){this['blueNoiseT'+'extureId']['setValue'](BE(this['device']));}['beginFrame'](_0x5e1f67){const _0x1615a7=this['scene'],_0x1ab983=_0x1615a7['updateShad'+'ers']||this['device']['_shadersDi'+'rty'];let _0x5739e6=-0x893+0x8*0x2b3+0x3*-0x457;const _0x39aad9=_0x5e1f67['layerList'],_0x4e082d=_0x39aad9['length'];for(let _0xfb6e57=0x1*0x1204+0x1*0x19f7+-0x2bfb;_0xfb6e57<_0x4e082d;_0xfb6e57++){const _0x41d224=_0x39aad9[_0xfb6e57]['meshInstan'+'ces'],_0x1888d0=_0x41d224['length'];_0x5739e6+=_0x1888d0;for(let _0xd16bc0=-0x3*-0x925+-0xdbc+-0xdb3;_0xd16bc0<_0x1888d0;_0xd16bc0++){const _0x549f35=_0x41d224[_0xd16bc0];_0x549f35['visibleThi'+'sFrame']=!(-0xfee*0x1+0x1609+-0x30d*0x2),_0x1ab983&&Od['push'](_0x549f35),_0x549f35['skinInstan'+'ce']&&Fd['push'](_0x549f35);}}if(_0x1615a7['_stats']['meshInstan'+'ces']=_0x5739e6,_0x1ab983){const _0x2ae4db=!_0x1615a7['updateShad'+'ers']||!this['device']['_shadersDi'+'rty'];this['updateShad'+'ers'](Od,_0x2ae4db),_0x1615a7['updateShad'+'ers']=!(0x1433+-0x13ba+-0x78),this['device']['_shadersDi'+'rty']=!(0x7c2+0x15e1+-0x1da2),_0x1615a7['_shaderVer'+'sion']++;}this['updateFram'+'eUniforms'](),this['updateCpuS'+'kinMatrice'+'s'](Fd),Od['length']=0x2b*0x45+-0x23d3+-0x6*-0x40a,Fd['length']=0x1941+-0x1cf+-0x2*0xbb9;const _0x13328c=this['lights'],_0x446cc0=_0x13328c['length'];for(let _0x203772=-0x769+0x236b*-0x1+0x2ad4;_0x203772<_0x446cc0;_0x203772++)_0x13328c[_0x203772]['beginFrame']();}['updateLigh'+'tTextureAt'+'las'](){this['lightTextu'+'reAtlas']['update'](this['localLight'+'s'],this['scene']['lighting']);}['updateLaye'+'rCompositi'+'on'](_0x3c19dc){const _0x5b7aed=de(),_0x3bf8ef=_0x3c19dc['layerList']['length'],_0x24487d=this['scene']['_shaderVer'+'sion'];for(let _0x3d3b5e=-0xeaf+0x1718+-0x869*0x1;_0x3d3b5e<_0x3bf8ef;_0x3d3b5e++){const _0x3024b9=_0x3c19dc['layerList'][_0x3d3b5e];_0x3024b9['_shaderVer'+'sion']=_0x24487d,_0x3024b9['_skipRende'+'rCounter']=0x1797+0xc61*-0x2+-0x17*-0xd,_0x3024b9['_forwardDr'+'awCalls']=-0x14c4+0x6e*-0x45+-0x36*-0xef,_0x3024b9['_shadowDra'+'wCalls']=0x1*0x558+-0x2262+-0xe*-0x213,_0x3024b9['_renderTim'+'e']=-0xeb*0x3+0x1e62+-0x1*0x1ba1;}_0x3c19dc['_update'](),this['_layerComp'+'ositionUpd'+'ateTime']+=de()-_0x5b7aed;}['frameUpdat'+'e'](){this['clustersDe'+'bugRendere'+'d']=!(0xc9c+0x14+0x11*-0xbf),this['initViewBi'+'ndGroupFor'+'mat'](this['scene']['clusteredL'+'ightingEna'+'bled']),this['dirLightSh'+'adows']['clear']();}}class Oy{constructor(){h(this,'camera',null),(this['layer']=null,this['transparen'+'t']=!(-0x24c+-0x3fd+-0x23*-0x2e),this['renderTarg'+'et']=null,this['lightClust'+'ers']=null,this['clearColor']=!(0x1a41+0x35e*0x8+-0x3530),this['clearDepth']=!(0x2b*0xd5+-0x3*0xbe+0x26*-0xe2),this['clearStenc'+'il']=!(0xc8f+0x1*0x1b56+0x17*-0x1bc),this['triggerPos'+'tprocess']=!(-0x4f*0x7+0x1*-0x1fa9+0x21d3),this['firstCamer'+'aUse']=!(0xef*-0xd+0x2*0x460+0x364),this['lastCamera'+'Use']=!(0x1893+-0x4*-0x4b7+-0x2b6e),this['viewBindGr'+'oups']=[],this['useCameraP'+'asses']=!(-0x1669*-0x1+-0x1094+-0x2*0x2ea));}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x589954=>{_0x589954['defaultUni'+'formBuffer']['destroy'](),_0x589954['destroy']();}),this['viewBindGr'+'oups']['length']=-0x4b4*-0x1+0x52*0x25+0xa3*-0x1a;}['setupClear'+'s'](_0x1660ea,_0x1015d7){this['clearColor']=(_0x1660ea==null?void(0x11a0+-0x2*-0x9b7+-0x132*0x1f):_0x1660ea['clearColor'+'Buffer'])||_0x1015d7['clearColor'+'Buffer'],this['clearDepth']=(_0x1660ea==null?void(-0xac2+0x1*-0x1b9c+0x1*0x265e):_0x1660ea['clearDepth'+'Buffer'])||_0x1015d7['clearDepth'+'Buffer'],this['clearStenc'+'il']=(_0x1660ea==null?void(-0x141f+-0x224*-0xe+-0x9d9):_0x1660ea['clearStenc'+'ilBuffer'])||_0x1015d7['clearStenc'+'ilBuffer'];}}class oA extends fs{constructor(_0x54dc45,_0x2aeb44,_0x7cb5f1,_0x2ca513){super(_0x54dc45),h(this,'layerCompo'+'sition'),h(this,'scene'),h(this,'renderer'),h(this,'renderActi'+'ons',[]),h(this,'gammaCorre'+'ction'),h(this,'toneMappin'+'g'),h(this,'noDepthCle'+'ar',!(-0x119b*0x2+-0x15a8+-0x279*-0x17)),(this['layerCompo'+'sition']=_0x2aeb44,this['scene']=_0x7cb5f1,this['renderer']=_0x2ca513);}get['rendersAny'+'thing'](){return this['renderActi'+'ons']['length']>-0x2047+0x26a8+-0x661;}['addRenderA'+'ction'](_0x183980){this['renderActi'+'ons']['push'](_0x183980);}['addLayer'](_0x1978c8,_0x30304d,_0x4eac05,_0x42581c=!(-0x24b6+0x10*-0x233+0x47e6)){M['assert'](_0x1978c8),M['assert'](this['renderTarg'+'et']!==void(0x1*0x1bfa+-0x881*0x1+-0x3e5*0x5),'Render\x20pas'+'s\x20needs\x20to'+'\x20be\x20initia'+'lized\x20befo'+'re\x20adding\x20'+'layers'),M['assert'](_0x1978c8['camera']['layersSet']['has'](_0x30304d['id']),'Camera\x20'+_0x1978c8['entity']['name']+('\x20does\x20not\x20'+'render\x20lay'+'er\x20')+_0x30304d['name']+'.');const _0x333fb0=new Oy();if(_0x333fb0['renderTarg'+'et']=this['renderTarg'+'et'],_0x333fb0['camera']=_0x1978c8,_0x333fb0['layer']=_0x30304d,_0x333fb0['transparen'+'t']=_0x4eac05,_0x42581c){const _0x153c2a=this['renderActi'+'ons']['length']===-0xd*0x293+0x1fb4+0xb*0x29;_0x333fb0['setupClear'+'s'](_0x153c2a?_0x1978c8:void(-0x1772+-0x347+0x1*0x1ab9),_0x30304d);}this['addRenderA'+'ction'](_0x333fb0);}['addLayers'](_0x38639d,_0x7764d4,_0x52dcd5,_0x4776e7,_0x2e3d9b,_0x20f565=!(0x1e08+0x8e*-0x3c+0x340)){const {layerList:_0x1d354d,subLayerList:_0x563870}=_0x38639d;let _0x1519fb=_0x4776e7,_0x516f84=_0x52dcd5;for(;_0x516f84<_0x1d354d['length'];){const _0x37070c=_0x1d354d[_0x516f84],_0x66cf8c=_0x563870[_0x516f84];if(_0x7764d4['camera']['layersSet']['has'](_0x37070c['id'])&&(this['addLayer'](_0x7764d4,_0x37070c,_0x66cf8c,_0x1519fb),_0x1519fb=!(-0x269*-0xd+-0x1f21*-0x1+0x3e75*-0x1)),_0x516f84++,_0x37070c['id']===_0x2e3d9b&&_0x66cf8c===_0x20f565)break;}return _0x516f84;}['updateDire'+'ctionalSha'+'dows'](){const {renderer:_0x4244e3,renderActions:_0xb04246}=this;for(let _0x19df2a=-0x1284+-0x1*-0x20fd+-0xe79;_0x19df2a<_0xb04246['length'];_0x19df2a++){const _0x1855d8=_0xb04246[_0x19df2a]['camera']['camera'],_0x33cafb=this['renderer']['cameraDirS'+'hadowLight'+'s']['get'](_0x1855d8);if(_0x33cafb)for(let _0x1ef781=-0x1*-0x1a51+0x1c83*-0x1+-0x232*-0x1;_0x1ef781<_0x33cafb['length'];_0x1ef781++){const _0x2735ec=_0x33cafb[_0x1ef781];if(_0x4244e3['dirLightSh'+'adows']['get'](_0x2735ec)!==_0x1855d8){_0x4244e3['dirLightSh'+'adows']['set'](_0x2735ec,_0x1855d8);const _0x506413=_0x4244e3['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x2735ec,_0x1855d8);_0x506413&&this['beforePass'+'es']['push'](_0x506413);}}}}['updateClea'+'rs'](){const _0x5ed810=this['renderActi'+'ons'][-0x1e3*-0x14+0x1681+-0x3c3d];if(_0x5ed810){const _0x28e0ef=_0x5ed810['camera']['camera'],_0x122a67=_0x28e0ef['fullSizeCl'+'earRect'];this['setClearCo'+'lor'](_0x122a67&&_0x5ed810['clearColor']?_0x28e0ef['clearColor']:void(-0xb23+0x87d*-0x1+-0x1*-0x13a0)),this['setClearDe'+'pth'](_0x122a67&&_0x5ed810['clearDepth']&&!this['noDepthCle'+'ar']?_0x28e0ef['clearDepth']:void(0x2630+-0x2405+-0x22b)),this['setClearSt'+'encil'](_0x122a67&&_0x5ed810['clearStenc'+'il']?_0x28e0ef['clearStenc'+'il']:void(-0x1497+-0x18b4+0x2d4b));}}['frameUpdat'+'e'](){super['frameUpdat'+'e'](),this['updateDire'+'ctionalSha'+'dows'](),this['updateClea'+'rs']();}['before'](){const {renderActions:_0x5b06a5}=this;for(let _0x4bb53e=-0xa31+0x58*0x35+0xf*-0x89;_0x4bb53e<_0x5b06a5['length'];_0x4bb53e++){const _0x58e259=_0x5b06a5[_0x4bb53e];_0x58e259['firstCamer'+'aUse']&&this['scene']['fire'](mw,_0x58e259['camera']);}}['execute'](){const {layerComposition:_0x280c00,renderActions:_0x2235c1}=this;for(let _0x10b6a5=-0x8fc+-0x203a+-0xa*-0x41f;_0x10b6a5<_0x2235c1['length'];_0x10b6a5++){const _0x3b6a31=_0x2235c1[_0x10b6a5],_0x7d8b94=_0x3b6a31['layer'];M['call'](()=>{_0x280c00['getLayerBy'+'Name'](_0x7d8b94['name'])||M['warnOnce']('Layer\x20'+_0x7d8b94['name']+('\x20is\x20not\x20fo'+'und\x20in\x20the'+'\x20scene\x20and'+'\x20will\x20not\x20'+'be\x20rendere'+'d.\x20Your\x20re'+'nder\x20pass\x20'+'setup\x20migh'+'t\x20need\x20to\x20'+'be\x20updated'+'.'));}),_0x280c00['isEnabled'](_0x7d8b94,_0x3b6a31['transparen'+'t'])&&this['renderRend'+'erAction'](_0x3b6a31,_0x10b6a5===-0xfa7+-0x1e61+0x2e08);}}['after'](){for(let _0x437aeb=-0x2*0x409+-0x7a*0x5+-0x53a*-0x2;_0x437aeb<this['renderActi'+'ons']['length'];_0x437aeb++){const _0x2b229e=this['renderActi'+'ons'][_0x437aeb];_0x2b229e['lastCamera'+'Use']&&this['scene']['fire'](pw,_0x2b229e['camera']);}this['beforePass'+'es']['length']=-0x1d*0x1+-0x10*0x153+-0x7*-0x30b;}['renderRend'+'erAction'](_0xeeb6ef,_0x2d0d15){var _0x4f436e;const {renderer:_0x59cdcb,scene:_0x4f4bb0}=this,_0x556293=_0x59cdcb['device'],{layer:_0x12001c,transparent:_0x281d63,camera:_0x55bee1}=_0xeeb6ef;Q['pushGpuMar'+'ker'](this['device'],'Camera:\x20'+(_0x55bee1?_0x55bee1['entity']['name']:'Unnamed')+',\x20Layer:\x20'+_0x12001c['name']+'('+(_0x281d63?'TRANSP':'OPAQUE')+')');const _0x493383=de();if(_0x55bee1){const _0x3acbc2=_0x55bee1['gammaCorre'+'ction'],_0x1a8ed9=_0x55bee1['toneMappin'+'g'];this['gammaCorre'+'ction']!==void(-0x1abc+0x2*-0x11e2+0x3e80)&&(_0x55bee1['gammaCorre'+'ction']=this['gammaCorre'+'ction']),this['toneMappin'+'g']!==void(0xb8*-0x17+0xdaf+-0x9*-0x51)&&(_0x55bee1['toneMappin'+'g']=this['toneMappin'+'g']),_0x4f4bb0['fire'](_w,_0x55bee1,_0x12001c,_0x281d63);const _0x468a15={'lightClusters':_0xeeb6ef['lightClust'+'ers']},_0x3583d6=((_0x4f436e=_0x55bee1['camera']['shaderPass'+'Info'])==null?void(0x94*-0x3+0x2d+0x18f):_0x4f436e['index'])??fa;(!_0x2d0d15||!_0x55bee1['camera']['fullSizeCl'+'earRect'])&&(_0x468a15['clearColor']=_0xeeb6ef['clearColor'],_0x468a15['clearDepth']=_0xeeb6ef['clearDepth'],_0x468a15['clearStenc'+'il']=_0xeeb6ef['clearStenc'+'il']);const _0x5389f2=_0xeeb6ef['renderTarg'+'et']??_0x556293['backBuffer'];_0x59cdcb['renderForw'+'ardLayer'](_0x55bee1['camera'],_0x5389f2,_0x12001c,_0x281d63,_0x3583d6,_0xeeb6ef['viewBindGr'+'oups'],_0x468a15),_0x556293['setBlendSt'+'ate'](Ct['NOBLEND']),_0x556293['setStencil'+'State'](null,null),_0x556293['setAlphaTo'+'Coverage'](!(-0x1143+0x82f+-0x5d*-0x19)),_0x4f4bb0['fire'](gw,_0x55bee1,_0x12001c,_0x281d63),this['gammaCorre'+'ction']!==void(0x2ee*-0x5+0x1*0x4f7+-0x43*-0x25)&&(_0x55bee1['gammaCorre'+'ction']=_0x3acbc2),this['toneMappin'+'g']!==void(-0x26a5+-0xd99+0x9*0x5ce)&&(_0x55bee1['toneMappin'+'g']=_0x1a8ed9);}Q['popGpuMark'+'er'](this['device']),_0x12001c['_renderTim'+'e']+=de()-_0x493383;}['log'](_0x45cc2c,_0x310437){if(super['log'](_0x45cc2c,_0x310437),ni['get'](qa)){const {layerComposition:_0x454e6b}=this;this['renderActi'+'ons']['forEach']((_0x5582e8,_0x2b87fa)=>{const _0x35b096=_0x5582e8['layer'],_0x3a3b28=_0x35b096['enabled']&&_0x454e6b['isEnabled'](_0x35b096,_0x5582e8['transparen'+'t']),_0x96e78d=_0x5582e8['camera'];M['trace'](qa,'\x20\x20\x20\x20'+_0x2b87fa+':'+('\x20Cam:\x20'+(_0x96e78d?_0x96e78d['entity']['name']:'-'))['padEnd'](-0x1bf5+0x1625+0x1*0x5e6,'\x20')+('\x20Lay:\x20'+_0x35b096['name'])['padEnd'](-0x19*-0x125+-0x7e9+-0x1*0x149e,'\x20')+(_0x5582e8['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x3a3b28?'\x20ENABLED':'\x20DISABLED')+('\x20Meshes:\x20'+_0x35b096['meshInstan'+'ces']['length'])['padEnd'](-0xd*0x241+0x1c4f+0x103,'\x20'));});}}}class lA extends fs{constructor(_0x1c925f,_0x944e8f,_0x3c949b){super(_0x1c925f),this['renderer']=_0x944e8f,this['renderActi'+'on']=_0x3c949b,this['requiresCu'+'bemaps']=!(0xffa*-0x1+-0x199*0x2+0x132d);}['execute'](){const _0x4e32eb=this['renderActi'+'on'],_0x2f46bf=_0x4e32eb['camera'];M['assert'](_0x4e32eb['triggerPos'+'tprocess']&&_0x2f46bf['onPostproc'+'essing']),_0x2f46bf['onPostproc'+'essing']();}}const hA=[[],[],[]],Ki=new ie(),xr={'drawCalls':[],'shaderInstances':[],'isNewMaterial':[],'lightMaskChanged':[],'clear':function(){this['drawCalls']['length']=-0x1f*-0x105+-0x9*0x1b7+0x45*-0x3c,this['shaderInst'+'ances']['length']=-0x1c3e+0x162f+-0x3*-0x205,this['isNewMater'+'ial']['length']=0x1*-0x5c0+0x3c7+0x1f9,this['lightMaskC'+'hanged']['length']=-0x1b50+0x7b8+0x1398;}};function cA(_0xc20f6a){const _0x4aeec2=[];for(let _0x1b6db3=0xc1*0x17+0x1a01+-0x2b58;_0x1b6db3<_0xc20f6a;++_0x1b6db3){const _0x270d9d=Math['sqrt'](_0x1b6db3+(-0xb92*0x3+-0x16df+-0x1*-0x3995+0.5))/Math['sqrt'](_0xc20f6a);_0x4aeec2['push'](_0x270d9d);}return _0x4aeec2;}function dA(_0x29805e){const _0x4fc508=[];for(let _0x273118=0x1*-0x1ea9+0x37e*0x3+-0x1*-0x142f;_0x273118<_0x29805e;_0x273118++){const _0x2988ca=_0x273118/_0x29805e,_0x1e85af=Math['sqrt'](_0x2988ca*_0x2988ca);_0x4fc508['push'](_0x1e85af);}return _0x4fc508;}const Pi=class Pi extends nA{constructor(_0x4424ee){super(_0x4424ee);const _0x51f70c=this['device'];this['_forwardDr'+'awCalls']=-0xf73+-0x24ac+0x341f,this['_materialS'+'witches']=0x54a*0x7+-0x59e+-0x2*0xfb4,this['_depthMapT'+'ime']=-0x272*0x1+-0x1e52+0x20c4,this['_forwardTi'+'me']=-0x2*0xa1b+0xb59+-0x8dd*-0x1,this['_sortTime']=-0x6*-0x39f+-0x20b+-0x13af*0x1;const _0x59d735=_0x51f70c['scope'];this['fogColorId']=_0x59d735['resolve']('fog_color'),this['fogStartId']=_0x59d735['resolve']('fog_start'),this['fogEndId']=_0x59d735['resolve']('fog_end'),this['fogDensity'+'Id']=_0x59d735['resolve']('fog_densit'+'y'),this['ambientId']=_0x59d735['resolve']('light_glob'+'alAmbient'),this['skyboxInte'+'nsityId']=_0x59d735['resolve']('skyboxInte'+'nsity'),this['cubeMapRot'+'ationMatri'+'xId']=_0x59d735['resolve']('cubeMapRot'+'ationMatri'+'x'),this['pcssDiskSa'+'mplesId']=_0x59d735['resolve']('pcssDiskSa'+'mples[0]'),this['pcssSphere'+'SamplesId']=_0x59d735['resolve']('pcssSphere'+'Samples[0]'),this['lightColor'+'Id']=[],this['lightDir']=[],this['lightDirId']=[],this['lightShado'+'wMapId']=[],this['lightShado'+'wMatrixId']=[],this['lightShado'+'wParamsId']=[],this['lightShado'+'wIntensity']=[],this['lightRadiu'+'sId']=[],this['lightPos']=[],this['lightPosId']=[],this['lightWidth']=[],this['lightWidth'+'Id']=[],this['lightHeigh'+'t']=[],this['lightHeigh'+'tId']=[],this['lightInAng'+'leId']=[],this['lightOutAn'+'gleId']=[],this['lightCooki'+'eId']=[],this['lightCooki'+'eIntId']=[],this['lightCooki'+'eMatrixId']=[],this['lightCooki'+'eOffsetId']=[],this['lightShado'+'wSearchAre'+'aId']=[],this['lightCamer'+'aParamsId']=[],this['lightSoftS'+'hadowParam'+'sId']=[],this['shadowMatr'+'ixPaletteI'+'d']=[],this['shadowCasc'+'adeDistanc'+'esId']=[],this['shadowCasc'+'adeCountId']=[],this['shadowCasc'+'adeBlendId']=[],this['screenSize'+'Id']=_0x59d735['resolve']('uScreenSiz'+'e'),this['_screenSiz'+'e']=new Float32Array(0x2da+0x1f1+-0x4c7),this['fogColor']=new Float32Array(0x2069+-0x5*0x173+0x1*-0x1927),this['ambientCol'+'or']=new Float32Array(-0xd8c+0x1286+-0x4f7),this['pcssDiskSa'+'mples']=cA(0x2199+-0x115c+-0x65*0x29),this['pcssSphere'+'Samples']=dA(0x2*-0x95+0xeec+-0x6d9*0x2);}['destroy'](){super['destroy']();}['dispatchGl'+'obalLights'](_0x3845b4){const _0xde13d=this['ambientCol'+'or'];if(Ki['linear'](_0x3845b4['ambientLig'+'ht']),_0xde13d[0x1951+0x1*-0x1123+-0x82e]=Ki['r'],_0xde13d[0x8b*-0x25+-0x1*-0x48d+0xf8b]=Ki['g'],_0xde13d[-0x1*0x10fd+-0x1*0x1b05+-0x3*-0xeac]=Ki['b'],_0x3845b4['physicalUn'+'its']){for(let _0x317006=-0x302*-0x1+0xaad+-0xdaf;_0x317006<-0x17da+0x223f+-0x6*0x1bb;_0x317006++)_0xde13d[_0x317006]*=_0x3845b4['ambientLum'+'inance'];}this['ambientId']['setValue'](_0xde13d),this['skyboxInte'+'nsityId']['setValue'](_0x3845b4['physicalUn'+'its']?_0x3845b4['skyboxLumi'+'nance']:_0x3845b4['skyboxInte'+'nsity']),this['cubeMapRot'+'ationMatri'+'xId']['setValue'](_0x3845b4['_skyboxRot'+'ationMat3']['data']);}['_resolveLi'+'ght'](_0x5dce33,_0x2c4e0c){const _0x4f2d19='light'+_0x2c4e0c;this['lightColor'+'Id'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+'_color'),this['lightDir'][_0x2c4e0c]=new Float32Array(-0x42*0x14+-0x2b*-0x67+-0x2*0x611),this['lightDirId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+'_direction'),this['lightShado'+'wMapId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+'_shadowMap'),this['lightShado'+'wMatrixId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_shadowMat'+'rix')),this['lightShado'+'wParamsId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_shadowPar'+'ams')),this['lightShado'+'wIntensity'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_shadowInt'+'ensity')),this['lightShado'+'wSearchAre'+'aId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_shadowSea'+'rchArea')),this['lightRadiu'+'sId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+'_radius'),this['lightPos'][_0x2c4e0c]=new Float32Array(0x1f*0xf+-0x15f3+0x1425),this['lightPosId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+'_position'),this['lightWidth'][_0x2c4e0c]=new Float32Array(-0x52c+-0x4*0x191+0x3d1*0x3),this['lightWidth'+'Id'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+'_halfWidth'),this['lightHeigh'+'t'][_0x2c4e0c]=new Float32Array(0x4f*-0x4b+-0x216b+-0x7*-0x815),this['lightHeigh'+'tId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_halfHeigh'+'t')),this['lightInAng'+'leId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_innerCone'+'Angle')),this['lightOutAn'+'gleId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_outerCone'+'Angle')),this['lightCooki'+'eId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+'_cookie'),this['lightCooki'+'eIntId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_cookieInt'+'ensity')),this['lightCooki'+'eMatrixId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_cookieMat'+'rix')),this['lightCooki'+'eOffsetId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_cookieOff'+'set')),this['lightCamer'+'aParamsId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_cameraPar'+'ams')),this['lightSoftS'+'hadowParam'+'sId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_softShado'+'wParams')),this['shadowMatr'+'ixPaletteI'+'d'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_shadowMat'+'rixPalette'+'[0]')),this['shadowCasc'+'adeDistanc'+'esId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_shadowCas'+'cadeDistan'+'ces')),this['shadowCasc'+'adeCountId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_shadowCas'+'cadeCount')),this['shadowCasc'+'adeBlendId'][_0x2c4e0c]=_0x5dce33['resolve'](_0x4f2d19+('_shadowCas'+'cadeBlend'));}['setLTCDire'+'ctionalLig'+'ht'](_0x57b903,_0x3e389a,_0x3e50e2,_0x1d11c5,_0x516280){this['lightPos'][_0x3e389a][0x259e+-0x133*-0x9+-0x1b*0x1cb]=_0x1d11c5['x']-_0x3e50e2['x']*_0x516280,this['lightPos'][_0x3e389a][0x97d+0xe79*0x1+-0x17f5]=_0x1d11c5['y']-_0x3e50e2['y']*_0x516280,this['lightPos'][_0x3e389a][0x1436+-0xab*0x32+0xd32]=_0x1d11c5['z']-_0x3e50e2['z']*_0x516280,this['lightPosId'][_0x3e389a]['setValue'](this['lightPos'][_0x3e389a]);const _0x5983a5=_0x57b903['transformV'+'ector'](new I(-(0x10d4*0x2+-0x3*0x8be+0x27a*-0x3+0.5),0x1309+0x1e2e*-0x1+0xb25,0x2094+-0x1bab+-0x1*0x4e9));this['lightWidth'][_0x3e389a][0x1*-0x2e8+0xd79+-0xa91]=_0x5983a5['x']*_0x516280,this['lightWidth'][_0x3e389a][-0x1013+-0x4*-0x76f+-0xda8]=_0x5983a5['y']*_0x516280,this['lightWidth'][_0x3e389a][0x16f9+-0x119e+-0x559]=_0x5983a5['z']*_0x516280,this['lightWidth'+'Id'][_0x3e389a]['setValue'](this['lightWidth'][_0x3e389a]);const _0x56ecec=_0x57b903['transformV'+'ector'](new I(-0xcb8+0x23bd+0x1*-0x1705,-0x75*-0x44+-0x110d+-0xe07,0x1*-0x1bef+0x1e6d*0x1+-0xb*0x3a+0.5));this['lightHeigh'+'t'][_0x3e389a][-0x1407+0x14a7+0x2*-0x50]=_0x56ecec['x']*_0x516280,this['lightHeigh'+'t'][_0x3e389a][0x1dab*-0x1+0x213e+-0x392]=_0x56ecec['y']*_0x516280,this['lightHeigh'+'t'][_0x3e389a][0x86*-0x1f+0x701*-0x1+-0x1*-0x173d]=_0x56ecec['z']*_0x516280,this['lightHeigh'+'tId'][_0x3e389a]['setValue'](this['lightHeigh'+'t'][_0x3e389a]);}['dispatchDi'+'rectLights'](_0x1d9dc0,_0x1ba95f,_0xa1a1c8){let _0x38bd0e=0x17d7*0x1+-0x5b0+-0x1227;const _0x5e162f=this['device']['scope'];for(let _0x42a78b=0xae7+0x1aff+0x1*-0x25e6;_0x42a78b<_0x1d9dc0['length'];_0x42a78b++){if(!(_0x1d9dc0[_0x42a78b]['mask']&_0x1ba95f))continue;const _0x516eff=_0x1d9dc0[_0x42a78b],_0x5b7e13=_0x516eff['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x38bd0e]||this['_resolveLi'+'ght'](_0x5e162f,_0x38bd0e),this['lightColor'+'Id'][_0x38bd0e]['setValue'](_0x516eff['_colorLine'+'ar']),_0x5b7e13['getY'](_0x516eff['_direction'])['mulScalar'](-(0x1655+-0x1*0x18e6+0x292)),_0x516eff['_direction']['normalize'](),this['lightDir'][_0x38bd0e][-0x281+-0x52*-0x4e+-0x167b]=_0x516eff['_direction']['x'],this['lightDir'][_0x38bd0e][0x13c1+-0x1ae0+0x720]=_0x516eff['_direction']['y'],this['lightDir'][_0x38bd0e][0x2b0+-0xd21+0xa73]=_0x516eff['_direction']['z'],this['lightDirId'][_0x38bd0e]['setValue'](this['lightDir'][_0x38bd0e]),_0x516eff['shape']!==Vs&&this['setLTCDire'+'ctionalLig'+'ht'](_0x5b7e13,_0x38bd0e,_0x516eff['_direction'],_0xa1a1c8['_node']['getPositio'+'n'](),_0xa1a1c8['farClip']),_0x516eff['castShadow'+'s']){const _0x1dbac5=_0x516eff['getRenderD'+'ata'](_0xa1a1c8,0x8b7*-0x3+0x401+0x6d*0x34),_0x5df38b=_0x516eff['_getUnifor'+'mBiasValue'+'s'](_0x1dbac5);this['lightShado'+'wMapId'][_0x38bd0e]['setValue'](_0x1dbac5['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x38bd0e]['setValue'](_0x1dbac5['shadowMatr'+'ix']['data']),this['shadowMatr'+'ixPaletteI'+'d'][_0x38bd0e]['setValue'](_0x516eff['_shadowMat'+'rixPalette']),this['shadowCasc'+'adeDistanc'+'esId'][_0x38bd0e]['setValue'](_0x516eff['_shadowCas'+'cadeDistan'+'ces']),this['shadowCasc'+'adeCountId'][_0x38bd0e]['setValue'](_0x516eff['numCascade'+'s']),this['shadowCasc'+'adeBlendId'][_0x38bd0e]['setValue'](0x1bb3+0xb06+-0x26b8-_0x516eff['cascadeBle'+'nd']),this['lightShado'+'wIntensity'][_0x38bd0e]['setValue'](_0x516eff['shadowInte'+'nsity']),this['lightSoftS'+'hadowParam'+'sId'][_0x38bd0e]['setValue'](_0x516eff['_softShado'+'wParams']),_0x1dbac5['shadowCame'+'ra']['renderTarg'+'et']&&this['lightShado'+'wSearchAre'+'aId'][_0x38bd0e]['setValue'](_0x516eff['penumbraSi'+'ze']/_0x1dbac5['shadowCame'+'ra']['renderTarg'+'et']['width']*_0x1dbac5['projection'+'Compensati'+'on']);const _0x2a2f10=_0x516eff['_shadowCam'+'eraParams'];_0x2a2f10['length']=-0x4*-0x1c+-0x7*-0x3f3+-0x1*0x1c11,_0x2a2f10[-0x2*0x526+-0x1e7*0x13+0x529*0x9]=-0x220+0x77+0x1a9,_0x2a2f10[0x3f5*-0x5+0x17b*0xd+0x8b]=_0x1dbac5['shadowCame'+'ra']['_farClip'],_0x2a2f10[0x643+-0xf*-0x21a+-0x25c7]=_0x1dbac5['shadowCame'+'ra']['_nearClip'],_0x2a2f10[0x2f*0x2b+0x44b+-0x3*0x40f]=0x4*0x733+-0xa97+-0x1d2*0xa,this['lightCamer'+'aParamsId'][_0x38bd0e]['setValue'](_0x2a2f10);const _0x4acdca=_0x516eff['_shadowRen'+'derParams'];_0x4acdca['length']=0x5*-0x541+-0x1*0x155b+0x17d2*0x2,_0x4acdca[-0x6d*-0x7+0xb65*0x1+0x28*-0x5c]=_0x516eff['_shadowRes'+'olution'],_0x4acdca[-0x16d6+-0x1cf*0x15+0x3cd2]=_0x5df38b['normalBias'],_0x4acdca[0x1d0c+-0x915+0x1*-0x13f5]=_0x5df38b['bias'],_0x4acdca[0x2*-0x149+-0xf5a+0x11ef]=-0x1c86+-0x4c*-0x5a+0x1ce,this['lightShado'+'wParamsId'][_0x38bd0e]['setValue'](_0x4acdca);}_0x38bd0e++;}return _0x38bd0e;}['setLTCPosi'+'tionalLigh'+'t'](_0x2b86d3,_0x3805cb){const _0x4e70ce=_0x2b86d3['transformV'+'ector'](new I(-(-0xa7c+-0x10*0x4f+0xf6c+0.5),-0x1*-0x11c2+0x1b41+-0x45*0xa7,-0x16af+0x149d+-0x35*-0xa));this['lightWidth'][_0x3805cb][-0x25*-0x6f+-0x1*0x1d62+0xd57]=_0x4e70ce['x'],this['lightWidth'][_0x3805cb][0xa1d*0x3+-0x1246+-0xc10]=_0x4e70ce['y'],this['lightWidth'][_0x3805cb][-0x174a+-0x47f+0x1*0x1bcb]=_0x4e70ce['z'],this['lightWidth'+'Id'][_0x3805cb]['setValue'](this['lightWidth'][_0x3805cb]);const _0x4a639c=_0x2b86d3['transformV'+'ector'](new I(0x1*-0x54f+-0x1*-0x238b+-0x1e3c,-0x319+-0x30e+-0x5*-0x13b,0x1*-0x332+-0x5c1+-0x8f3*-0x1+0.5));this['lightHeigh'+'t'][_0x3805cb][0x65f+0xaaa+-0x31*0x59]=_0x4a639c['x'],this['lightHeigh'+'t'][_0x3805cb][-0xe20+-0x10bd+0xa4a*0x3]=_0x4a639c['y'],this['lightHeigh'+'t'][_0x3805cb][0x2399+-0x1*-0x253d+0x76*-0x9e]=_0x4a639c['z'],this['lightHeigh'+'tId'][_0x3805cb]['setValue'](this['lightHeigh'+'t'][_0x3805cb]);}['dispatchOm'+'niLight'](_0x381972,_0x388f6b,_0x4a2149){const _0x5e772a=_0x388f6b['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x4a2149]||this['_resolveLi'+'ght'](_0x381972,_0x4a2149),this['lightRadiu'+'sId'][_0x4a2149]['setValue'](_0x388f6b['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x4a2149]['setValue'](_0x388f6b['_colorLine'+'ar']),_0x5e772a['getTransla'+'tion'](_0x388f6b['_position']),this['lightPos'][_0x4a2149][-0x304*-0x2+-0xdf1*0x1+-0x2d*-0x2d]=_0x388f6b['_position']['x'],this['lightPos'][_0x4a2149][-0x89b+0x2133+-0x1897]=_0x388f6b['_position']['y'],this['lightPos'][_0x4a2149][-0x1e9b*0x1+-0x1698+-0x35*-0x101]=_0x388f6b['_position']['z'],this['lightPosId'][_0x4a2149]['setValue'](this['lightPos'][_0x4a2149]),_0x388f6b['shape']!==Vs&&this['setLTCPosi'+'tionalLigh'+'t'](_0x5e772a,_0x4a2149),_0x388f6b['castShadow'+'s']){const _0x53585b=_0x388f6b['getRenderD'+'ata'](null,0x2*0x46f+0x308*-0x1+-0x5d6*0x1);this['lightShado'+'wMapId'][_0x4a2149]['setValue'](_0x53585b['shadowBuff'+'er']);const _0xdf2925=_0x388f6b['_getUnifor'+'mBiasValue'+'s'](_0x53585b),_0x5e88c9=_0x388f6b['_shadowRen'+'derParams'];_0x5e88c9['length']=-0x56*0x10+0xf2f*0x1+-0x9cb,_0x5e88c9[0xa40*0x1+-0xac*-0x8+-0xfa0]=_0x388f6b['_shadowRes'+'olution'],_0x5e88c9[-0x5e1*0x3+-0x1*0x11e3+0x2387]=_0xdf2925['normalBias'],_0x5e88c9[0x1*-0x1e02+-0xd97+0xe89*0x3]=_0xdf2925['bias'],_0x5e88c9[-0x8f*0x3+-0x1b9d*0x1+0x1d4d]=(-0x576+-0x6e2*0x4+0x20ff)/_0x388f6b['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x4a2149]['setValue'](_0x5e88c9),this['lightShado'+'wIntensity'][_0x4a2149]['setValue'](_0x388f6b['shadowInte'+'nsity']);const _0x502dc1=_0x388f6b['penumbraSi'+'ze']/_0x53585b['shadowCame'+'ra']['renderTarg'+'et']['width'];this['lightShado'+'wSearchAre'+'aId'][_0x4a2149]['setValue'](_0x502dc1);const _0x2f1c59=_0x388f6b['_shadowCam'+'eraParams'];_0x2f1c59['length']=0x1f35+-0x1*-0xc0b+-0x2b3c,_0x2f1c59[-0xd*0x301+-0x6*-0x5f9+-0x337*-0x1]=0x1d6c*-0x1+0x3*-0x5+0x1d7b*0x1,_0x2f1c59[-0x2*-0xdea+0x1*0x18b+-0x1d5e]=_0x53585b['shadowCame'+'ra']['_farClip'],_0x2f1c59[-0x25*0xad+0x1*-0x28e+0x1*0x1b91]=_0x53585b['shadowCame'+'ra']['_nearClip'],_0x2f1c59[-0xd2e*-0x1+0x198b+-0x26b6]=0x20d2+-0x176f+0x9*-0x10b,this['lightCamer'+'aParamsId'][_0x4a2149]['setValue'](_0x2f1c59);}_0x388f6b['_cookie']&&(this['lightCooki'+'eId'][_0x4a2149]['setValue'](_0x388f6b['_cookie']),this['lightShado'+'wMatrixId'][_0x4a2149]['setValue'](_0x5e772a['data']),this['lightCooki'+'eIntId'][_0x4a2149]['setValue'](_0x388f6b['cookieInte'+'nsity']));}['dispatchSp'+'otLight'](_0x22ac1b,_0x4139d8,_0x1d8f71){const _0xf04ac4=_0x4139d8['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x1d8f71]||this['_resolveLi'+'ght'](_0x22ac1b,_0x1d8f71),this['lightInAng'+'leId'][_0x1d8f71]['setValue'](_0x4139d8['_innerCone'+'AngleCos']),this['lightOutAn'+'gleId'][_0x1d8f71]['setValue'](_0x4139d8['_outerCone'+'AngleCos']),this['lightRadiu'+'sId'][_0x1d8f71]['setValue'](_0x4139d8['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x1d8f71]['setValue'](_0x4139d8['_colorLine'+'ar']),_0xf04ac4['getTransla'+'tion'](_0x4139d8['_position']),this['lightPos'][_0x1d8f71][0xd82*-0x1+-0x1353*0x1+-0x20d5*-0x1]=_0x4139d8['_position']['x'],this['lightPos'][_0x1d8f71][0x19e1+-0x205d+-0x67d*-0x1]=_0x4139d8['_position']['y'],this['lightPos'][_0x1d8f71][0x8c5*-0x1+-0x2092+0x2959]=_0x4139d8['_position']['z'],this['lightPosId'][_0x1d8f71]['setValue'](this['lightPos'][_0x1d8f71]),_0x4139d8['shape']!==Vs&&this['setLTCPosi'+'tionalLigh'+'t'](_0xf04ac4,_0x1d8f71),_0xf04ac4['getY'](_0x4139d8['_direction'])['mulScalar'](-(-0x5*-0x5ab+-0x2*0x84a+-0xbc2)),_0x4139d8['_direction']['normalize'](),this['lightDir'][_0x1d8f71][0x1111*0x2+0x2124+-0x4346]=_0x4139d8['_direction']['x'],this['lightDir'][_0x1d8f71][-0x1*0x589+-0x262*0xf+0x2948]=_0x4139d8['_direction']['y'],this['lightDir'][_0x1d8f71][0x2*-0x69b+-0x1e4*0x6+0x1890]=_0x4139d8['_direction']['z'],this['lightDirId'][_0x1d8f71]['setValue'](this['lightDir'][_0x1d8f71]),_0x4139d8['castShadow'+'s']){const _0x370a83=_0x4139d8['getRenderD'+'ata'](null,-0xf7e+0xd*0xd9+0x479);this['lightShado'+'wMapId'][_0x1d8f71]['setValue'](_0x370a83['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x1d8f71]['setValue'](_0x370a83['shadowMatr'+'ix']['data']);const _0x2e47cc=_0x4139d8['_getUnifor'+'mBiasValue'+'s'](_0x370a83),_0x48504b=_0x4139d8['_shadowRen'+'derParams'];_0x48504b['length']=0x348+0x136f+-0x16b3,_0x48504b[-0x1*0x22a6+-0x18ac+-0x2*-0x1da9]=_0x4139d8['_shadowRes'+'olution'],_0x48504b[0x2295+-0x9*0x161+-0x19*0xe3]=_0x2e47cc['normalBias'],_0x48504b[0x236c+-0x1fa6+0xf1*-0x4]=_0x2e47cc['bias'],_0x48504b[0x97+0x23cf+0x9*-0x40b]=(0x1461+-0x1*-0x18cd+-0x2d2d)/_0x4139d8['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x1d8f71]['setValue'](_0x48504b),this['lightShado'+'wIntensity'][_0x1d8f71]['setValue'](_0x4139d8['shadowInte'+'nsity']);const _0x2a98b6=_0x4139d8['penumbraSi'+'ze']/_0x370a83['shadowCame'+'ra']['renderTarg'+'et']['width'],_0x5e6d9b=_0x370a83['shadowCame'+'ra']['_fov']*Math['PI']/(0x7*0x525+-0x8c9+0xc2*-0x23),_0x393f60=(0x246e+-0xbd8+-0x1895)/Math['tan'](_0x5e6d9b/(-0xcec+-0x14f1*-0x1+-0x803));this['lightShado'+'wSearchAre'+'aId'][_0x1d8f71]['setValue'](_0x2a98b6*_0x393f60);const _0x21888a=_0x4139d8['_shadowCam'+'eraParams'];_0x21888a['length']=-0x1c85+0x9*0xb+-0x1*-0x1c26,_0x21888a[-0xeab+0x19*-0xd6+-0x3*-0xbdb]=-0x2640+-0xb9e*0x2+-0x3d7c*-0x1,_0x21888a[0x1915+0x1ba*0x11+-0x366e]=_0x370a83['shadowCame'+'ra']['_farClip'],_0x21888a[-0x13ea*0x1+-0x8bd+0x1ca9]=_0x370a83['shadowCame'+'ra']['_nearClip'],_0x21888a[-0x2*0x9e1+-0xd*-0x10f+0x602]=0x3f9+0x7b1*-0x1+-0xee*-0x4,this['lightCamer'+'aParamsId'][_0x1d8f71]['setValue'](_0x21888a);}if(_0x4139d8['_cookie']){if(!_0x4139d8['castShadow'+'s']){const _0x4965e7=Pn['evalSpotCo'+'okieMatrix'](_0x4139d8);this['lightShado'+'wMatrixId'][_0x1d8f71]['setValue'](_0x4965e7['data']);}this['lightCooki'+'eId'][_0x1d8f71]['setValue'](_0x4139d8['_cookie']),this['lightCooki'+'eIntId'][_0x1d8f71]['setValue'](_0x4139d8['cookieInte'+'nsity']),_0x4139d8['_cookieTra'+'nsform']&&(_0x4139d8['_cookieTra'+'nsformUnif'+'orm'][0x19e7+0xa94*-0x3+-0x5d5*-0x1]=_0x4139d8['_cookieTra'+'nsform']['x'],_0x4139d8['_cookieTra'+'nsformUnif'+'orm'][0x20a7+0xcb1+-0x2d57]=_0x4139d8['_cookieTra'+'nsform']['y'],_0x4139d8['_cookieTra'+'nsformUnif'+'orm'][0x26f7+0x263+0x5e8*-0x7]=_0x4139d8['_cookieTra'+'nsform']['z'],_0x4139d8['_cookieTra'+'nsformUnif'+'orm'][-0x1*0x2457+-0x14c2+0x391c]=_0x4139d8['_cookieTra'+'nsform']['w'],this['lightCooki'+'eMatrixId'][_0x1d8f71]['setValue'](_0x4139d8['_cookieTra'+'nsformUnif'+'orm']),_0x4139d8['_cookieOff'+'setUniform'][0x227*-0x4+0x121*0x22+-0x1dc6]=_0x4139d8['_cookieOff'+'set']['x'],_0x4139d8['_cookieOff'+'setUniform'][-0x12d7+-0x1387+0x13*0x205]=_0x4139d8['_cookieOff'+'set']['y'],this['lightCooki'+'eOffsetId'][_0x1d8f71]['setValue'](_0x4139d8['_cookieOff'+'setUniform']));}}['dispatchLo'+'calLights'](_0x45226a,_0x1a283d,_0x53fce0){let _0x37ea91=_0x53fce0;const _0x2e85ea=this['device']['scope'],_0x1d23d7=_0x45226a[Ye],_0x171441=_0x1d23d7['length'];for(let _0x5c21c0=0x740*-0x4+-0x24a*0x11+0x43ea;_0x5c21c0<_0x171441;_0x5c21c0++){const _0x15691d=_0x1d23d7[_0x5c21c0];_0x15691d['mask']&_0x1a283d&&(this['dispatchOm'+'niLight'](_0x2e85ea,_0x15691d,_0x37ea91),_0x37ea91++);}const _0x5e6bc5=_0x45226a[Ke],_0x140362=_0x5e6bc5['length'];for(let _0x11998a=-0x202d+-0x1*-0x1b0d+0x520;_0x11998a<_0x140362;_0x11998a++){const _0x90e6c5=_0x5e6bc5[_0x11998a];_0x90e6c5['mask']&_0x1a283d&&(this['dispatchSp'+'otLight'](_0x2e85ea,_0x90e6c5,_0x37ea91),_0x37ea91++);}}['renderForw'+'ardPrepare'+'Materials'](_0x7abe4e,_0x34666b,_0x42d4a2,_0x26aedf,_0x3973b0,_0x80533){const _0x396fa3=_0x7abe4e['fogParams']??this['scene']['fog'],_0x24dc35=_0x7abe4e['shaderPara'+'ms'];_0x24dc35['fog']=_0x396fa3['type'],_0x24dc35['srgbRender'+'Target']=(_0x34666b==null?void(-0x11a6+0xcb*0xb+-0x1c9*-0x5):_0x34666b['isColorBuf'+'ferSrgb'](0x1533+-0x116c+-0x3c7))??!(0xdea+-0x1f1*0x9+0x18*0x26);const _0x2af9c3=(_0x2cf7ac,_0x25f9c9,_0x578e6a,_0x5a836)=>{xr['drawCalls']['push'](_0x2cf7ac),xr['shaderInst'+'ances']['push'](_0x25f9c9),xr['isNewMater'+'ial']['push'](_0x578e6a),xr['lightMaskC'+'hanged']['push'](_0x5a836);};xr['clear']();const _0x883289=this['device'],_0x5d0ddc=this['scene'],_0x52a042=_0x5d0ddc['clusteredL'+'ightingEna'+'bled'],_0xd736ee=(_0x3973b0==null?void(-0x3*0x5c8+0x1*0x2d4+0xe84):_0x3973b0['getLightHa'+'sh'](_0x52a042))??0x2709+-0x2d7*0x1+-0x2432;let _0x3b6fb9=null,_0xe09da8,_0x242aeb;const _0x15f857=_0x42d4a2['length'];for(let _0xf30e7a=0x112f+0x1804+0x2933*-0x1;_0xf30e7a<_0x15f857;_0xf30e7a++){const _0x4e984b=_0x42d4a2[_0xf30e7a];if(_0x7abe4e===Pi['skipRender'+'Camera']){if(Pi['_skipRende'+'rCounter']>=Pi['skipRender'+'After'])continue;Pi['_skipRende'+'rCounter']++;}if(_0x3973b0){if(_0x3973b0['_skipRende'+'rCounter']>=_0x3973b0['skipRender'+'After'])continue;_0x3973b0['_skipRende'+'rCounter']++;}const _0x23b31e=_0x4e984b['instancing'+'Data'];if(_0x23b31e&&_0x23b31e['count']<=-0x1*-0x4+-0x42c+-0x85*-0x8)continue;_0x4e984b['ensureMate'+'rial'](_0x883289);const _0x3daf0f=_0x4e984b['material'],_0x5835b0=_0x4e984b['_shaderDef'+'s'],_0x3b31d6=_0x4e984b['mask'];_0x3daf0f&&_0x3daf0f===_0x3b6fb9&&_0x5835b0!==_0xe09da8&&(_0x3b6fb9=null),_0x3daf0f!==_0x3b6fb9&&(this['_materialS'+'witches']++,_0x3daf0f['_scene']=_0x5d0ddc,_0x3daf0f['dirty']&&(Q['pushGpuMar'+'ker'](_0x883289,'Node:\x20'+_0x4e984b['node']['name']+(',\x20Material'+':\x20')+_0x3daf0f['name']),_0x3daf0f['updateUnif'+'orms'](_0x883289,_0x5d0ddc),_0x3daf0f['dirty']=!(-0x13f2+0x2*0x1150+-0xead),Q['popGpuMark'+'er'](_0x883289)));const _0x276c91=_0x4e984b['getShaderI'+'nstance'](_0x80533,_0xd736ee,_0x5d0ddc,_0x24dc35,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x26aedf);_0x2af9c3(_0x4e984b,_0x276c91,_0x3daf0f!==_0x3b6fb9,!_0x3b6fb9||_0x3b31d6!==_0x242aeb),_0x3b6fb9=_0x3daf0f,_0xe09da8=_0x5835b0,_0x242aeb=_0x3b31d6;}return xr;}['renderForw'+'ardInterna'+'l'](_0x406acf,_0x3afacf,_0x4e36ba,_0x144559,_0x44279c,_0x2887f0,_0x2d1608){var _0x30e145,_0x416877;const _0x8bb7f5=this['device'],_0x326466=this['scene'],_0x4b3618=-0x3a1*-0x7+-0x1eb9+0x553<<_0x144559,_0x456f79=_0x2887f0?-(-0x158c+0xf92*-0x2+0x34b1):0x29*0x3d+-0x2029+0x1665,_0xc54e11=_0x326466['clusteredL'+'ightingEna'+'bled'],_0x407668=(_0x30e145=_0x406acf['xr'])!=null&&_0x30e145['session']&&_0x406acf['xr']['views']['list']['length']?_0x406acf['xr']['views']['list']:null,_0x4c1386=_0x3afacf['drawCalls']['length'];for(let _0x3a3a47=-0x23d5*-0x1+0x38b*-0x5+-0x1*0x121e;_0x3a3a47<_0x4c1386;_0x3a3a47++){const _0x5678bb=_0x3afacf['drawCalls'][_0x3a3a47],_0x7ee68a=_0x3afacf['isNewMater'+'ial'][_0x3a3a47],_0x2e169a=_0x3afacf['lightMaskC'+'hanged'][_0x3a3a47],_0x211919=_0x3afacf['shaderInst'+'ances'][_0x3a3a47],_0x52fef5=_0x5678bb['material'],_0x5e656a=_0x5678bb['mask'];if(_0x211919['shader']['failed'])continue;if(_0x7ee68a){if(_0x8bb7f5['setShader'](_0x211919['shader'],!(0xd87+0x17ec+0x12b9*-0x2)),_0x52fef5['setParamet'+'ers'](_0x8bb7f5),_0x2e169a){const _0x16ca50=this['dispatchDi'+'rectLights'](_0x4e36ba[ve],_0x5e656a,_0x406acf);_0xc54e11||this['dispatchLo'+'calLights'](_0x4e36ba,_0x5e656a,_0x16ca50);}this['alphaTestI'+'d']['setValue'](_0x52fef5['alphaTest']),_0x8bb7f5['setBlendSt'+'ate'](_0x52fef5['blendState']),_0x8bb7f5['setDepthSt'+'ate'](_0x52fef5['depthState']),_0x8bb7f5['setAlphaTo'+'Coverage'](_0x52fef5['alphaToCov'+'erage']);}Q['pushGpuMar'+'ker'](_0x8bb7f5,'Node:\x20'+_0x5678bb['node']['name']+(',\x20Material'+':\x20')+_0x52fef5['name']),this['setupCullM'+'ode'](_0x406acf['_cullFaces'],_0x456f79,_0x5678bb);const _0x235eb1=_0x5678bb['stencilFro'+'nt']??_0x52fef5['stencilFro'+'nt'],_0x4d0779=_0x5678bb['stencilBac'+'k']??_0x52fef5['stencilBac'+'k'];_0x8bb7f5['setStencil'+'State'](_0x235eb1,_0x4d0779),_0x5678bb['setParamet'+'ers'](_0x8bb7f5,_0x4b3618),_0x8bb7f5['scope']['resolve']('meshInstan'+'ceId')['setValue'](_0x5678bb['id']);const _0x51e3d4=_0x5678bb['mesh'];this['setVertexB'+'uffers'](_0x8bb7f5,_0x51e3d4),this['setMorphin'+'g'](_0x8bb7f5,_0x5678bb['morphInsta'+'nce']),this['setSkinnin'+'g'](_0x8bb7f5,_0x5678bb);const _0x539bcd=_0x5678bb['instancing'+'Data'];_0x539bcd&&_0x8bb7f5['setVertexB'+'uffer'](_0x539bcd['vertexBuff'+'er']),this['setMeshIns'+'tanceMatri'+'ces'](_0x5678bb,!(0x1*-0x6f9+-0x13dc+0x1ad5)),this['setupMeshU'+'niformBuff'+'ers'](_0x211919);const _0x5bc7cc=_0x5678bb['renderStyl'+'e'],_0x310f69=_0x51e3d4['indexBuffe'+'r'][_0x5bc7cc];_0x44279c==null||_0x44279c(_0x5678bb,_0x3a3a47);const _0x294844=(_0x416877=_0x5678bb['indirectDa'+'ta'])==null?void(-0x14b7*-0x1+0x446+0x18fd*-0x1):_0x416877['get'](_0x406acf);if(_0x407668)for(let _0x34ca2c=0x8d*-0x3f+0x13*0xe3+0x11da;_0x34ca2c<_0x407668['length'];_0x34ca2c++){const _0x36a0d1=_0x407668[_0x34ca2c];if(_0x8bb7f5['setViewpor'+'t'](_0x36a0d1['viewport']['x'],_0x36a0d1['viewport']['y'],_0x36a0d1['viewport']['z'],_0x36a0d1['viewport']['w']),_0x8bb7f5['supportsUn'+'iformBuffe'+'rs']){const _0x2689f3=_0x2d1608[_0x34ca2c];_0x8bb7f5['setBindGro'+'up'](Fo,_0x2689f3);}else this['setupViewU'+'niforms'](_0x36a0d1,_0x34ca2c);const _0x1dbcd0=_0x34ca2c===-0x73f+-0x1*-0xd59+-0x61a,_0x3e611d=_0x34ca2c===_0x407668['length']-(0x4*-0x189+0x113a+-0xb15);_0x8bb7f5['draw'](_0x51e3d4['primitive'][_0x5bc7cc],_0x310f69,_0x539bcd==null?void(-0x824*-0x3+-0x1f5d+-0x6f1*-0x1):_0x539bcd['count'],_0x294844,_0x1dbcd0,_0x3e611d),this['_forwardDr'+'awCalls']++,_0x5678bb['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;}else _0x8bb7f5['draw'](_0x51e3d4['primitive'][_0x5bc7cc],_0x310f69,_0x539bcd==null?void(-0x13*-0xc1+-0x1*0x1055+0x202):_0x539bcd['count'],_0x294844),this['_forwardDr'+'awCalls']++,_0x5678bb['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;_0x3a3a47<_0x4c1386-(0x6f7+0x3*0x595+-0x17b5)&&!_0x3afacf['isNewMater'+'ial'][_0x3a3a47+(-0x3fa*0x5+0x261c+-0x5*0x3a5)]&&_0x52fef5['setParamet'+'ers'](_0x8bb7f5,_0x5678bb['parameters']),Q['popGpuMark'+'er'](_0x8bb7f5);}}['renderForw'+'ard'](_0x47ef50,_0x11f805,_0x31c2ff,_0x5c010c,_0xfba6ad,_0x41365c,_0xb42d6d,_0x3d957e,_0x11c0fc){const _0x4900f5=de(),_0x2c9098=this['renderForw'+'ardPrepare'+'Materials'](_0x47ef50,_0x11f805,_0x31c2ff,_0x5c010c,_0xb42d6d,_0xfba6ad);this['renderForw'+'ardInterna'+'l'](_0x47ef50,_0x2c9098,_0x5c010c,_0xfba6ad,_0x41365c,_0x3d957e,_0x11c0fc),xr['clear'](),this['_forwardTi'+'me']+=de()-_0x4900f5;}['renderForw'+'ardLayer'](_0x3bd818,_0x1a48ff,_0x7909cc,_0x16b307,_0x1952e4,_0x1f35a3,_0x41b6b9={}){const {scene:_0x5c292b,device:_0x37c7d3}=this,_0x44b756=_0x5c292b['clusteredL'+'ightingEna'+'bled'];this['setupViewp'+'ort'](_0x3bd818,_0x1a48ff);let _0x51a019,_0x58d918;if(_0x7909cc){const _0x112451=de();_0x7909cc['sortVisibl'+'e'](_0x3bd818,_0x16b307),this['_sortTime']+=de()-_0x112451;const _0x5cbad5=_0x7909cc['getCulledI'+'nstances'](_0x3bd818);_0x51a019=_0x16b307?_0x5cbad5['transparen'+'t']:_0x5cbad5['opaque'],_0x5c292b['immediate']['onPreRende'+'rLayer'](_0x7909cc,_0x51a019,_0x16b307),_0x7909cc['requiresLi'+'ghtCube']&&(this['lightCube']['update'](_0x5c292b['ambientLig'+'ht'],_0x7909cc['_lights']),this['constantLi'+'ghtCube']['setValue'](this['lightCube']['colors'])),_0x58d918=_0x7909cc['splitLight'+'s'];}else _0x51a019=_0x41b6b9['meshInstan'+'ces'],_0x58d918=_0x41b6b9['splitLight'+'s']??hA;if(M['assert'](_0x51a019,'Either\x20lay'+'er\x20or\x20opti'+'ons.meshIn'+'stances\x20mu'+'st\x20be\x20prov'+'ided'),_0x44b756){const _0x28fc75=_0x41b6b9['lightClust'+'ers']??this['worldClust'+'ersAllocat'+'or']['empty'];_0x28fc75['activate'](),_0x7909cc&&!this['clustersDe'+'bugRendere'+'d']&&_0x5c292b['lighting']['debugLayer']===_0x7909cc['id']&&(this['clustersDe'+'bugRendere'+'d']=!(-0x1f0*0xa+-0x9e4+0x4*0x751),Df['render'](_0x28fc75,this['scene']));}_0x5c292b['_activeCam'+'era']=_0x3bd818;const _0x2e222b=_0x3bd818['fogParams']??this['scene']['fog'];this['setFogCons'+'tants'](_0x2e222b);const _0x320409=this['setCameraU'+'niforms'](_0x3bd818,_0x1a48ff);_0x37c7d3['supportsUn'+'iformBuffe'+'rs']&&this['setupViewU'+'niformBuff'+'ers'](_0x1f35a3,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x320409);const _0x154e66=_0x41b6b9['clearColor']??!(0x3b*-0x53+0x1ef7+-0xbd5),_0x425ad0=_0x41b6b9['clearDepth']??!(0x1d45*-0x1+-0x802+0x2548),_0x8f6e2c=_0x41b6b9['clearStenc'+'il']??!(0x137*0x15+-0x1838+-0x14a);(_0x154e66||_0x425ad0||_0x8f6e2c)&&this['clear'](_0x3bd818,_0x154e66,_0x425ad0,_0x8f6e2c);const _0x587445=!!(_0x3bd818['_flipFaces']^(_0x1a48ff==null?void(0x1711*0x1+-0x11a9+-0x568*0x1):_0x1a48ff['flipY'])),_0x1ad074=this['_forwardDr'+'awCalls'];this['renderForw'+'ard'](_0x3bd818,_0x1a48ff,_0x51a019,_0x58d918,_0x1952e4,null,_0x7909cc,_0x587445,_0x1f35a3),_0x7909cc&&(_0x7909cc['_forwardDr'+'awCalls']+=this['_forwardDr'+'awCalls']-_0x1ad074);}['setFogCons'+'tants'](_0x1d3cd3){if(_0x1d3cd3['type']!==On){Ki['linear'](_0x1d3cd3['color']);const _0xa9c490=this['fogColor'];_0xa9c490[-0x1*-0x277+0x850+-0xac7]=Ki['r'],_0xa9c490[0x103*-0x15+-0x2429+0x3969]=Ki['g'],_0xa9c490[0xd1d+0x1efe+-0x2c19]=Ki['b'],this['fogColorId']['setValue'](_0xa9c490),_0x1d3cd3['type']===VT?(this['fogStartId']['setValue'](_0x1d3cd3['start']),this['fogEndId']['setValue'](_0x1d3cd3['end'])):this['fogDensity'+'Id']['setValue'](_0x1d3cd3['density']);}}['setSceneCo'+'nstants'](){const _0x45c45d=this['scene'];this['dispatchGl'+'obalLights'](_0x45c45d);const _0x5cafb7=this['device'];this['_screenSiz'+'e'][0x13*0x1d2+0x1475+-0x370b]=_0x5cafb7['width'],this['_screenSiz'+'e'][0x1d46+-0x201b+0x16b*0x2]=_0x5cafb7['height'],this['_screenSiz'+'e'][-0x826*0x2+0x2*-0xc36+0x28ba]=(0x1*0x26ab+-0x1fed+-0x1*0x6bd)/_0x5cafb7['width'],this['_screenSiz'+'e'][0x1b7f+-0xc57+-0xf25]=(-0x1ea+0x1*-0xdff+0xfea)/_0x5cafb7['height'],this['screenSize'+'Id']['setValue'](this['_screenSiz'+'e']),this['pcssDiskSa'+'mplesId']['setValue'](this['pcssDiskSa'+'mples']),this['pcssSphere'+'SamplesId']['setValue'](this['pcssSphere'+'Samples']);}['buildFrame'+'Graph'](_0x1796dd,_0x292e57){const _0x88f948=this['scene'];if(_0x1796dd['reset'](),_0x88f948['clusteredL'+'ightingEna'+'bled']){const {shadowsEnabled:_0x46bfab,cookiesEnabled:_0x478535}=_0x88f948['lighting'];this['_renderPas'+'sUpdateClu'+'stered']['update'](_0x1796dd,_0x46bfab,_0x478535,this['lights'],this['localLight'+'s']),_0x1796dd['addRenderP'+'ass'](this['_renderPas'+'sUpdateClu'+'stered']);}else this['_shadowRen'+'dererLocal']['buildNonCl'+'usteredRen'+'derPasses'](_0x1796dd,this['localLight'+'s']);let _0x42ffd8=0xda9*0x1+0x5db+-0x1*0x1384,_0x289850=!(0x1c73*-0x1+0x6aa*0x2+0xf1f),_0x18b46f=null;const _0x5aa5da=_0x292e57['_renderAct'+'ions'];for(let _0x71f648=_0x42ffd8;_0x71f648<_0x5aa5da['length'];_0x71f648++){const _0x3cc813=_0x5aa5da[_0x71f648],{layer:_0x1265df,camera:_0x262ef3}=_0x3cc813;if(_0x3cc813['useCameraP'+'asses'])M['call'](()=>{_0x262ef3['postEffect'+'s']['effects']['length']>0x1f28+-0x3fc+-0x1b2c&&M['warnOnce']('Camera\x20\x27'+_0x262ef3['entity']['name']+('\x27\x20uses\x20ren'+'der\x20passes'+',\x20which\x20ar'+'e\x20not\x20comp'+'atible\x20wit'+'h\x20post-eff'+'ects\x20scrip'+'ts.\x20Render'+'ing\x20of\x20the'+'\x20post-effe'+'cts\x20is\x20ign'+'ored,\x20but\x20'+'they\x20shoul'+'d\x20not\x20be\x20a'+'ttached\x20to'+'\x20the\x20camer'+'a.'));}),_0x262ef3['camera']['renderPass'+'es']['forEach'](_0x6fd01c=>{_0x1796dd['addRenderP'+'ass'](_0x6fd01c);});else{const _0x2de84c=_0x1265df['id']===os,_0x425094=_0x2de84c&&(_0x262ef3['renderScen'+'eColorMap']||_0x262ef3['renderScen'+'eDepthMap']);_0x289850&&(_0x289850=!(-0x25d+-0x41b*-0x1+-0x1bd),_0x42ffd8=_0x71f648,_0x18b46f=_0x3cc813['renderTarg'+'et']);const _0x441e8f=_0x5aa5da[_0x71f648+(0x26b*0x7+0x21*0xbd+-0x2949)],_0x2b50e7=(_0x441e8f?!_0x441e8f['useCameraP'+'asses']&&_0x441e8f['layer']['id']===os:!(0x1*-0x1a7b+0x5*0x17e+0x1306*0x1))&&(_0x262ef3['renderScen'+'eColorMap']||_0x262ef3['renderScen'+'eDepthMap']),_0x1f7c0a=_0x441e8f?_0x441e8f['firstCamer'+'aUse']&&this['cameraDirS'+'hadowLight'+'s']['has'](_0x441e8f['camera']['camera']):!(-0x8*-0x4df+0x13*0xd1+-0x367a);if(!_0x441e8f||_0x441e8f['renderTarg'+'et']!==_0x18b46f||_0x1f7c0a||_0x2b50e7||_0x425094){if(_0x2de84c&&_0x42ffd8===_0x71f648||this['addMainRen'+'derPass'](_0x1796dd,_0x292e57,_0x18b46f,_0x42ffd8,_0x71f648),_0x2de84c){if(_0x262ef3['renderScen'+'eColorMap']){const _0xbfe38c=_0x262ef3['camera']['renderPass'+'ColorGrab'];_0xbfe38c['source']=_0x262ef3['renderTarg'+'et'],_0x1796dd['addRenderP'+'ass'](_0xbfe38c);}_0x262ef3['renderScen'+'eDepthMap']&&_0x1796dd['addRenderP'+'ass'](_0x262ef3['camera']['renderPass'+'DepthGrab']);}if(_0x3cc813['triggerPos'+'tprocess']&&(_0x262ef3!=null&&_0x262ef3['onPostproc'+'essing'])){const _0x44a67a=new lA(this['device'],this,_0x3cc813);_0x1796dd['addRenderP'+'ass'](_0x44a67a);}_0x289850=!(0x230d+0x1b6b*-0x1+-0x7a2*0x1);}}}}['addMainRen'+'derPass'](_0x21b1bc,_0x2928d9,_0x2c2484,_0x16d361,_0x2428ef){const _0x23e3cf=new oA(this['device'],_0x2928d9,this['scene'],this);_0x23e3cf['init'](_0x2c2484);const _0x4c0bbc=_0x2928d9['_renderAct'+'ions'];for(let _0x342bf4=_0x16d361;_0x342bf4<=_0x2428ef;_0x342bf4++)_0x23e3cf['addRenderA'+'ction'](_0x4c0bbc[_0x342bf4]);_0x21b1bc['addRenderP'+'ass'](_0x23e3cf);}['update'](_0x30f9d7){this['frameUpdat'+'e'](),this['shadowRend'+'erer']['frameUpdat'+'e'](),this['scene']['_updateSky'+'Mesh'](),this['updateLaye'+'rCompositi'+'on'](_0x30f9d7),this['collectLig'+'hts'](_0x30f9d7),this['beginFrame'](_0x30f9d7),this['setSceneCo'+'nstants'](),this['cullCompos'+'ition'](_0x30f9d7),this['gpuUpdate'](this['processing'+'MeshInstan'+'ces']);}};h(Pi,'skipRender'+'Camera',null),h(Pi,'_skipRende'+'rCounter',0x6be*0x4+-0x441+-0x1*0x16b7),h(Pi,'skipRender'+'After',0x2515+0x2*0x7c3+0x43*-0xc9);let Kh=Pi,Nd=-0x607+0x11fd+-0x2*0x5fb;const Xn=[],Bl=new Set();function fA(_0x3a1d4a,_0x1a2d64){return _0x3a1d4a['drawOrder']-_0x1a2d64['drawOrder'];}function uA(_0x86973,_0x2666b4){const _0x3b8755=_0x86973['_sortKeyFo'+'rward'],_0x1c2e24=_0x2666b4['_sortKeyFo'+'rward'];return _0x3b8755===_0x1c2e24?_0x2666b4['mesh']['id']-_0x86973['mesh']['id']:_0x1c2e24-_0x3b8755;}function mA(_0x450b4c,_0x2b5638){return _0x2b5638['_sortKeyDy'+'namic']-_0x450b4c['_sortKeyDy'+'namic'];}function pA(_0x562c67,_0x4fb87f){return _0x562c67['_sortKeyDy'+'namic']-_0x4fb87f['_sortKeyDy'+'namic'];}const _A=[null,fA,uA,mA,pA];class gA{constructor(){h(this,'opaque',[]),h(this,'transparen'+'t',[]);}}class Dr{constructor(_0x1ec57e={}){h(this,'meshInstan'+'ces',[]),h(this,'meshInstan'+'cesSet',new Set()),h(this,'shadowCast'+'ers',[]),h(this,'shadowCast'+'ersSet',new Set()),h(this,'_visibleIn'+'stances',new WeakMap()),h(this,'_lights',[]),h(this,'_lightsSet',new Set()),h(this,'_clustered'+'LightsSet',new Set()),h(this,'_splitLigh'+'ts',[[],[],[]]),h(this,'_splitLigh'+'tsDirty',!(-0xf00+-0x8ed+0x17ed)),h(this,'requiresLi'+'ghtCube',!(-0x219c+0x1*0x103f+0x39*0x4e)),h(this,'cameras',[]),h(this,'camerasSet',new Set()),h(this,'_dirtyComp'+'osition',!(-0x4d2+-0x2a2*-0xa+-0x44d*0x5)),(_0x1ec57e['id']!==void(0xd57+-0x1*-0x121e+-0x1*0x1f75)?(this['id']=_0x1ec57e['id'],Nd=Math['max'](this['id']+(0x252c+0x22*0x44+-0x2e33),Nd)):this['id']=Nd++,this['name']=_0x1ec57e['name'],this['_enabled']=_0x1ec57e['enabled']??!(0x1*0x2169+0x1*-0x2141+-0x2*0x14),this['_refCounte'+'r']=this['_enabled']?0x216f+0xb77+-0x2ce5:0x90f+0x25c+0x1*-0xb6b,this['opaqueSort'+'Mode']=_0x1ec57e['opaqueSort'+'Mode']??aw,this['transparen'+'tSortMode']=_0x1ec57e['transparen'+'tSortMode']??Mp,_0x1ec57e['renderTarg'+'et']&&(this['renderTarg'+'et']=_0x1ec57e['renderTarg'+'et']),this['_clearColo'+'rBuffer']=!!_0x1ec57e['clearColor'+'Buffer'],this['_clearDept'+'hBuffer']=!!_0x1ec57e['clearDepth'+'Buffer'],this['_clearSten'+'cilBuffer']=!!_0x1ec57e['clearStenc'+'ilBuffer'],this['onEnable']=_0x1ec57e['onEnable'],this['onDisable']=_0x1ec57e['onDisable'],this['_enabled']&&this['onEnable']&&this['onEnable'](),this['customSort'+'Callback']=null,this['customCalc'+'ulateSortV'+'alues']=null,this['_lightHash']=-0x1bde+-0x828+0x2406,this['_lightHash'+'Dirty']=!(-0x1*0x1d95+-0x1de0+-0x81*-0x76),this['_lightIdHa'+'sh']=-0x6*-0xc1+0x16bc+-0x1b42,this['_lightIdHa'+'shDirty']=!(0x683*-0x1+0x3b*-0x4+-0x3b8*-0x2),this['skipRender'+'After']=Number['MAX_VALUE'],this['_skipRende'+'rCounter']=0x2326+0x1*0xca9+-0x2fcf,this['_renderTim'+'e']=-0xa*-0x26b+0x1f4f+0x3*-0x127f,this['_forwardDr'+'awCalls']=-0xc*0x179+0x511*-0x6+0x3012,this['_shadowDra'+'wCalls']=-0x203b+-0x9a7+0x6fb*0x6,this['_shaderVer'+'sion']=-(0x920+-0x2582+0x1*0x1c63));}set['enabled'](_0xb552fe){_0xb552fe!==this['_enabled']&&(this['_dirtyComp'+'osition']=!(-0x7*-0x18f+-0x17*0x13b+0x3*0x5cc),this['_enabled']=_0xb552fe,_0xb552fe?(this['incrementC'+'ounter'](),this['onEnable']&&this['onEnable']()):(this['decrementC'+'ounter'](),this['onDisable']&&this['onDisable']()));}get['enabled'](){return this['_enabled'];}set['clearColor'+'Buffer'](_0x362169){this['_clearColo'+'rBuffer']=_0x362169,this['_dirtyComp'+'osition']=!(-0x1295+-0x1688+0x291d*0x1);}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'+'Buffer'](_0x2962e7){this['_clearDept'+'hBuffer']=_0x2962e7,this['_dirtyComp'+'osition']=!(0x24c3+-0x3cb+-0x20f8);}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'ilBuffer'](_0x2795ac){this['_clearSten'+'cilBuffer']=_0x2795ac,this['_dirtyComp'+'osition']=!(-0x7*-0x4bb+0x503+-0x2620);}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}get['hasCluster'+'edLights'](){return this['_clustered'+'LightsSet']['size']>-0x3*0x199+-0x1000+0x14cb;}get['clusteredL'+'ightsSet'](){return this['_clustered'+'LightsSet'];}['incrementC'+'ounter'](){this['_refCounte'+'r']===0x464+0x71*0x49+-0x249d&&(this['_enabled']=!(0x1*-0x21e2+-0xa8c*-0x3+0x23e),this['onEnable']&&this['onEnable']()),this['_refCounte'+'r']++;}['decrementC'+'ounter'](){if(this['_refCounte'+'r']===-0x3*0x57a+-0x21f3+0x3262)this['_enabled']=!(0x46+0xbd5*0x1+-0xc1a),this['onDisable']&&this['onDisable']();else{if(this['_refCounte'+'r']===-0x1*0xfcf+-0x949+-0xc8c*-0x2){M['warn']('Trying\x20to\x20'+'decrement\x20'+'layer\x20coun'+'ter\x20below\x20'+'0');return;}}this['_refCounte'+'r']--;}['addMeshIns'+'tances'](_0x1f7ab6,_0x337854){const _0x598200=this['meshInstan'+'ces'],_0xd2c387=this['meshInstan'+'cesSet'];for(let _0x33810c=0x12e6+0xc82+0x6*-0x53c;_0x33810c<_0x1f7ab6['length'];_0x33810c++){const _0x43c1cd=_0x1f7ab6[_0x33810c];_0xd2c387['has'](_0x43c1cd)||(_0x598200['push'](_0x43c1cd),_0xd2c387['add'](_0x43c1cd),Bl['add'](_0x43c1cd['material']));}if(_0x337854||this['addShadowC'+'asters'](_0x1f7ab6),Bl['size']>0x2218+-0x154b+-0x71*0x1d){const _0xea6869=this['_shaderVer'+'sion'];Bl['forEach'](_0x331c5c=>{_0xea6869>=-0xc09+-0x2043+0x2c4c&&_0x331c5c['_shaderVer'+'sion']!==_0xea6869&&(_0x331c5c['getShaderV'+'ariant']!==ua['prototype']['getShaderV'+'ariant']&&_0x331c5c['clearVaria'+'nts'](),_0x331c5c['_shaderVer'+'sion']=_0xea6869);}),Bl['clear']();}}['removeMesh'+'Instances'](_0x5e205e,_0x58e074){const _0x3f648b=this['meshInstan'+'ces'],_0x4c0cac=this['meshInstan'+'cesSet'];for(let _0x5a85e0=0x56c+-0x52f*0x6+0x1*0x19ae;_0x5a85e0<_0x5e205e['length'];_0x5a85e0++){const _0x5839cb=_0x5e205e[_0x5a85e0];if(_0x4c0cac['has'](_0x5839cb)){_0x4c0cac['delete'](_0x5839cb);const _0x36fbca=_0x3f648b['indexOf'](_0x5839cb);_0x36fbca>=0x1b4d+0x1b14+-0x3661&&_0x3f648b['splice'](_0x36fbca,0x177*0xa+0x1bce+-0x2a73);}}_0x58e074||this['removeShad'+'owCasters'](_0x5e205e);}['addShadowC'+'asters'](_0x2db80e){const _0x8d5d82=this['shadowCast'+'ers'],_0x3a566f=this['shadowCast'+'ersSet'];for(let _0x3c5e9c=-0x27a*-0x1+-0xa51+0x7d7;_0x3c5e9c<_0x2db80e['length'];_0x3c5e9c++){const _0xcbe389=_0x2db80e[_0x3c5e9c];_0xcbe389['castShadow']&&!_0x3a566f['has'](_0xcbe389)&&(_0x3a566f['add'](_0xcbe389),_0x8d5d82['push'](_0xcbe389));}}['removeShad'+'owCasters'](_0x15d596){const _0x57a6fe=this['shadowCast'+'ers'],_0x33243c=this['shadowCast'+'ersSet'];for(let _0x1d0e4f=0x6*-0x40c+0x1ebd+0x57*-0x13;_0x1d0e4f<_0x15d596['length'];_0x1d0e4f++){const _0x14cc6e=_0x15d596[_0x1d0e4f];if(_0x33243c['has'](_0x14cc6e)){_0x33243c['delete'](_0x14cc6e);const _0x348d5c=_0x57a6fe['indexOf'](_0x14cc6e);_0x348d5c>=-0x3f4+-0x1c01+0x1ff5&&_0x57a6fe['splice'](_0x348d5c,0xb8a+0x4*0xee+-0xf41);}}}['clearMeshI'+'nstances'](_0x2426a6=!(-0x1a00+-0x15e8+-0x37*-0xdf)){this['meshInstan'+'ces']['length']=-0x8fd+-0x291*0x1+0xb8e,this['meshInstan'+'cesSet']['clear'](),_0x2426a6||(this['shadowCast'+'ers']['length']=-0xb52+-0x1b1*-0x17+-0x1b95,this['shadowCast'+'ersSet']['clear']());}['markLights'+'Dirty'](){this['_lightHash'+'Dirty']=!(0x29*0x31+0x5dd+-0x9*0x186),this['_lightIdHa'+'shDirty']=!(-0x1dc3+0x2555+0x72*-0x11),this['_splitLigh'+'tsDirty']=!(0x1f22*0x1+0x1bd6+-0x3af8);}['hasLight'](_0x2804e2){return this['_lightsSet']['has'](_0x2804e2);}['addLight'](_0x57263e){const _0xab97bb=_0x57263e['light'];this['_lightsSet']['has'](_0xab97bb)||(this['_lightsSet']['add'](_0xab97bb),this['_lights']['push'](_0xab97bb),this['markLights'+'Dirty']()),_0xab97bb['type']!==ve&&this['_clustered'+'LightsSet']['add'](_0xab97bb);}['removeLigh'+'t'](_0x20c4bc){const _0x4a570f=_0x20c4bc['light'];this['_lightsSet']['has'](_0x4a570f)&&(this['_lightsSet']['delete'](_0x4a570f),this['_lights']['splice'](this['_lights']['indexOf'](_0x4a570f),0x24e4+-0xb42+-0x1b*0xf3),this['markLights'+'Dirty']()),_0x4a570f['type']!==ve&&this['_clustered'+'LightsSet']['delete'](_0x4a570f);}['clearLight'+'s'](){this['_lightsSet']['forEach'](_0x5b2428=>_0x5b2428['removeLaye'+'r'](this)),this['_lightsSet']['clear'](),this['_clustered'+'LightsSet']['clear'](),this['_lights']['length']=0x9e0+0x2*-0x63a+-0x14*-0x21,this['markLights'+'Dirty']();}get['splitLight'+'s'](){if(this['_splitLigh'+'tsDirty']){this['_splitLigh'+'tsDirty']=!(-0x1127+0xe*-0xa1+0x1*0x19f6);const _0x13c721=this['_splitLigh'+'ts'];for(let _0x465b69=0x1871*0x1+-0x1f2+0x167f*-0x1;_0x465b69<_0x13c721['length'];_0x465b69++)_0x13c721[_0x465b69]['length']=-0x72a+0x26*-0x101+0x3a*0xc8;const _0x4671fd=this['_lights'];for(let _0x2e4fe0=0x1903*0x1+0x3*-0xb2b+0x87e;_0x2e4fe0<_0x4671fd['length'];_0x2e4fe0++){const _0x195adb=_0x4671fd[_0x2e4fe0];_0x195adb['enabled']&&_0x13c721[_0x195adb['_type']]['push'](_0x195adb);}for(let _0x174516=-0x1fc7+-0x1*-0xed2+0x3*0x5a7;_0x174516<_0x13c721['length'];_0x174516++)_0x13c721[_0x174516]['sort']((_0x3a5ded,_0x59b1c4)=>_0x3a5ded['key']-_0x59b1c4['key']);}return this['_splitLigh'+'ts'];}['evaluateLi'+'ghtHash'](_0x352db6,_0x245409,_0x13306a){let _0x3f9c91=-0x22*-0x5+0x5f*-0x7+-0xf*-0x21;const _0x570eea=this['_lights'];for(let _0x1fbf28=-0xd45+0x1114+-0xd*0x4b;_0x1fbf28<_0x570eea['length'];_0x1fbf28++){const _0xd4fbf7=_0x570eea[_0x1fbf28]['type']!==ve;(_0x352db6&&_0xd4fbf7||_0x245409&&!_0xd4fbf7)&&Xn['push'](_0x13306a?_0x570eea[_0x1fbf28]['id']:_0x570eea[_0x1fbf28]['key']);}return Xn['length']>0xdfd+-0x5d2+-0x82b&&(Xn['sort'](),_0x3f9c91=XS(Xn),Xn['length']=0x17e0+-0xe24+-0x59*0x1c),_0x3f9c91;}['getLightHa'+'sh'](_0x23275b){return this['_lightHash'+'Dirty']&&(this['_lightHash'+'Dirty']=!(0x8*0x316+0x1*0x1a6b+-0xd3*0x3e),this['_lightHash']=this['evaluateLi'+'ghtHash'](!_0x23275b,!(0x1d*-0x139+0x20d1+0x152*0x2),!(-0x1*0xcf7+0x216a+-0x1472))),this['_lightHash'];}['getLightId'+'Hash'](){return this['_lightIdHa'+'shDirty']&&(this['_lightIdHa'+'shDirty']=!(0x4ad+0x138+0x1d*-0x34),this['_lightIdHa'+'sh']=this['evaluateLi'+'ghtHash'](!(-0x14bf*-0x1+-0x1e99+0x2*0x4ed),!(-0x101d+0xa58+0x5c6),!(0x90b+-0xf25+0x8e*0xb))),this['_lightIdHa'+'sh'];}['addCamera'](_0x2c5fef){this['camerasSet']['has'](_0x2c5fef['camera'])||(this['camerasSet']['add'](_0x2c5fef['camera']),this['cameras']['push'](_0x2c5fef),this['_dirtyComp'+'osition']=!(-0x130a*0x1+-0x2609+0x3913));}['removeCame'+'ra'](_0x35c267){if(this['camerasSet']['has'](_0x35c267['camera'])){this['camerasSet']['delete'](_0x35c267['camera']);const _0x2271c0=this['cameras']['indexOf'](_0x35c267);this['cameras']['splice'](_0x2271c0,0x467*0x1+-0x116f*-0x2+0x4*-0x9d1),this['_dirtyComp'+'osition']=!(0x64+-0x22c6+-0x3*-0xb76);}}['clearCamer'+'as'](){this['cameras']['length']=0x231*0x5+0x1*-0x15cd+0xad8,this['camerasSet']['clear'](),this['_dirtyComp'+'osition']=!(0xcb4+0xa*-0x98+-0x4*0x1b1);}['_calculate'+'SortDistan'+'ces'](_0x5b876b,_0x1e6d3e,_0x3ebd30){const _0xc65f20=_0x5b876b['length'],{x:_0x256a43,y:_0x2c0621,z:_0x33594a}=_0x1e6d3e,{x:_0x1f87d3,y:_0x2b53a0,z:_0x43960f}=_0x3ebd30;for(let _0x5f4637=-0x4*0x713+-0x97d*-0x3+-0x2b;_0x5f4637<_0xc65f20;_0x5f4637++){const _0x2ff77a=_0x5b876b[_0x5f4637];let _0x278e02;if(_0x2ff77a['calculateS'+'ortDistanc'+'e'])_0x278e02=_0x2ff77a['calculateS'+'ortDistanc'+'e'](_0x2ff77a,_0x1e6d3e,_0x3ebd30);else{const _0x560bec=_0x2ff77a['aabb']['center'];_0x278e02=(_0x560bec['x']-_0x256a43)*_0x1f87d3+(_0x560bec['y']-_0x2c0621)*_0x2b53a0+(_0x560bec['z']-_0x33594a)*_0x43960f;}const _0x26fda8=_0x2ff77a['_drawBucke'+'t']*(0x1*0x24998a67+0xd17f2*0x757+-0x491981a5);_0x2ff77a['_sortKeyDy'+'namic']=_0x26fda8+_0x278e02;}}['getCulledI'+'nstances'](_0x5436ae){let _0x4f6ba2=this['_visibleIn'+'stances']['get'](_0x5436ae);return _0x4f6ba2||(_0x4f6ba2=new gA(),this['_visibleIn'+'stances']['set'](_0x5436ae,_0x4f6ba2)),_0x4f6ba2;}['sortVisibl'+'e'](_0x346a56,_0x412259){const _0x2c20f6=_0x412259?this['transparen'+'tSortMode']:this['opaqueSort'+'Mode'];if(_0x2c20f6===_h)return;const _0x406647=this['getCulledI'+'nstances'](_0x346a56),_0x4e5970=_0x412259?_0x406647['transparen'+'t']:_0x406647['opaque'],_0x275625=_0x346a56['node'];if(_0x2c20f6===ow){const _0x49fa9c=_0x275625['getPositio'+'n'](),_0x36bbce=_0x275625['forward'];this['customCalc'+'ulateSortV'+'alues']&&this['customCalc'+'ulateSortV'+'alues'](_0x4e5970,_0x4e5970['length'],_0x49fa9c,_0x36bbce),this['customSort'+'Callback']&&_0x4e5970['sort'](this['customSort'+'Callback']);}else{if(_0x2c20f6===Mp||_0x2c20f6===nw){const _0x5b886e=_0x275625['getPositio'+'n'](),_0x2974a9=_0x275625['forward'];this['_calculate'+'SortDistan'+'ces'](_0x4e5970,_0x5b886e,_0x2974a9);}_0x4e5970['sort'](_A[_0x2c20f6]);}}}const SA=(_0x3f6392,_0x2066f4)=>_0x3f6392['priority']-_0x2066f4['priority'],Go=_0x3d293f=>_0x3d293f['sort'](SA);class d_ extends pe{constructor(_0x12cc9a='Untitled'){super(),h(this,'layerList',[]),h(this,'layerIdMap',new Map()),h(this,'layerNameM'+'ap',new Map()),h(this,'layerOpaqu'+'eIndexMap',new Map()),h(this,'layerTrans'+'parentInde'+'xMap',new Map()),h(this,'subLayerLi'+'st',[]),h(this,'subLayerEn'+'abled',[]),h(this,'cameras',[]),h(this,'_renderAct'+'ions',[]),h(this,'_dirty',!(0xb*0x2ab+-0xa5f+-0x12f9)),(this['name']=_0x12cc9a,this['_opaqueOrd'+'er']={},this['_transpare'+'ntOrder']={});}['destroy'](){this['destroyRen'+'derActions']();}['destroyRen'+'derActions'](){this['_renderAct'+'ions']['forEach'](_0x1b2dfb=>_0x1b2dfb['destroy']()),this['_renderAct'+'ions']['length']=-0xe4d+0x217c+-0x132f;}['markDirty'](){this['_dirty']=!(0x8e*-0x3e+-0x1a1*0x11+0x3e15);}['_update'](){const _0x34bf00=this['layerList']['length'];if(!this['_dirty']){for(let _0xa5c87c=0x199*-0x3+-0x1a90+0x1f5b;_0xa5c87c<_0x34bf00;_0xa5c87c++)if(this['layerList'][_0xa5c87c]['_dirtyComp'+'osition']){this['_dirty']=!(0x1b*0x6b+-0x1*-0x2605+-0x314e);break;}}if(this['_dirty']){this['_dirty']=!(-0x11c3+0x14d3*-0x1+0x2697),this['cameras']['length']=-0xaca*0x1+-0x1487+0x1f51;for(let _0x5ca846=0x1d5e+-0x4f2*0x4+0x6*-0x199;_0x5ca846<_0x34bf00;_0x5ca846++){const _0x1a130b=this['layerList'][_0x5ca846];_0x1a130b['_dirtyComp'+'osition']=!(0x186b+0x1*-0x1861+0x9*-0x1);for(let _0x41f643=0x7c7*-0x5+0x1*-0xce7+0x33ca;_0x41f643<_0x1a130b['cameras']['length'];_0x41f643++){const _0x23ce78=_0x1a130b['cameras'][_0x41f643];this['cameras']['indexOf'](_0x23ce78)<0x5e*-0x39+-0x5e5*0x5+0x3267&&this['cameras']['push'](_0x23ce78);}}this['cameras']['length']>0xcf6+-0x3a5+-0x950&&Go(this['cameras']);let _0x324c93=0xf34+-0x6*-0x66f+-0x35ce;this['destroyRen'+'derActions']();for(let _0x24622e=-0x1*-0x1aa7+-0x16f4+0x1*-0x3b3;_0x24622e<this['cameras']['length'];_0x24622e++){const _0x568dec=this['cameras'][_0x24622e];if(_0x568dec['camera']['renderPass'+'es']['length']>0x16b8+-0xd*0x3d+0x1*-0x139f){this['addDummyRe'+'nderAction'](_0x324c93,_0x568dec),_0x324c93++;continue;}let _0x515dc5=!(-0x97e+-0x29*0x42+-0x6b*-0x30);const _0x1776f4=_0x324c93;let _0x5c73d6=null,_0x138bca=!(-0x2*-0x115+-0x269+0x40);for(let _0x2cd8a4=-0xca9+-0x17*-0xb9+-0x3*0x152;_0x2cd8a4<_0x34bf00;_0x2cd8a4++){const _0x388740=this['layerList'][_0x2cd8a4];if(_0x388740['enabled']&&this['subLayerEn'+'abled'][_0x2cd8a4]&&_0x388740['cameras']['length']>-0x692+-0x222c+-0x2e9*-0xe&&_0x568dec['layers']['indexOf'](_0x388740['id'])>=0x26de+-0x17ae+0x9*-0x1b0){!_0x138bca&&_0x388740['id']===_0x568dec['disablePos'+'tEffectsLa'+'yer']&&(_0x138bca=!(-0x798+0x28*0xc+-0xb7*-0x8),_0x5c73d6&&(_0x5c73d6['triggerPos'+'tprocess']=!(0x778+0x86d+0x139*-0xd)));const _0x3ffa56=this['subLayerLi'+'st'][_0x2cd8a4];_0x5c73d6=this['addRenderA'+'ction'](_0x324c93,_0x388740,_0x3ffa56,_0x568dec,_0x515dc5,_0x138bca),_0x324c93++,_0x515dc5=!(-0x2092+-0x976+0x2a09);}}_0x1776f4<_0x324c93&&(_0x5c73d6['lastCamera'+'Use']=!(0x121c*-0x1+0x408*0x2+0x1*0xa0c)),!_0x138bca&&_0x5c73d6&&(_0x5c73d6['triggerPos'+'tprocess']=!(-0x1be5*0x1+0x217f+-0x59a)),_0x568dec['renderTarg'+'et']&&_0x568dec['postEffect'+'sEnabled']&&this['propagateR'+'enderTarge'+'t'](_0x1776f4-(-0x1cae*0x1+-0x54b*0x7+0x41bc),_0x568dec);}this['_logRender'+'Actions']();}}['getNextRen'+'derAction'](_0x47f993){M['assert'](this['_renderAct'+'ions']['length']===_0x47f993);const _0xfb8f9d=new Oy();return this['_renderAct'+'ions']['push'](_0xfb8f9d),_0xfb8f9d;}['addDummyRe'+'nderAction'](_0x273f01,_0x2a9e31){const _0x5747a4=this['getNextRen'+'derAction'](_0x273f01);_0x5747a4['camera']=_0x2a9e31,_0x5747a4['useCameraP'+'asses']=!(-0x176b+-0x13d3+0x2b3e);}['addRenderA'+'ction'](_0x4177cc,_0x226812,_0x3076f5,_0x12b44c,_0x192ea2,_0x1ad304){let _0x5ee138=_0x226812['id']!==os?_0x12b44c['renderTarg'+'et']:null,_0x569829=!(-0x1bd9+-0x218b+0x3d65);const _0x377c43=this['_renderAct'+'ions'];for(let _0x107b5e=_0x4177cc-(-0x1*-0x1543+0x1696+0x57b*-0x8);_0x107b5e>=-0x110+0x3*-0x81e+0x196a;_0x107b5e--)if(_0x377c43[_0x107b5e]['camera']===_0x12b44c&&_0x377c43[_0x107b5e]['renderTarg'+'et']===_0x5ee138){_0x569829=!(-0x1802+0x2462+-0xc60);break;}_0x1ad304&&_0x12b44c['postEffect'+'sEnabled']&&(_0x5ee138=null);const _0x54fe29=this['getNextRen'+'derAction'](_0x4177cc);_0x54fe29['triggerPos'+'tprocess']=!(0x2588+0x4b3*-0x3+-0x176e),_0x54fe29['layer']=_0x226812,_0x54fe29['transparen'+'t']=_0x3076f5,_0x54fe29['camera']=_0x12b44c,_0x54fe29['renderTarg'+'et']=_0x5ee138,_0x54fe29['firstCamer'+'aUse']=_0x192ea2,_0x54fe29['lastCamera'+'Use']=!(-0x206*0x10+0x18*0xef+-0x9f9*-0x1);const _0x3e83bd=_0x192ea2||!_0x569829,_0x153976=_0x226812['clearColor'+'Buffer']||_0x226812['clearDepth'+'Buffer']||_0x226812['clearStenc'+'ilBuffer'];return(_0x3e83bd||_0x153976)&&_0x54fe29['setupClear'+'s'](_0x3e83bd?_0x12b44c:void(-0x87d*-0x2+0x1da*0x11+-0x3074),_0x226812),_0x54fe29;}['propagateR'+'enderTarge'+'t'](_0x9d3cf3,_0x189ce6){for(let _0x196b28=_0x9d3cf3;_0x196b28>=0x1*-0xad5+0x49*-0x4a+0x1fef;_0x196b28--){const _0x55aaf0=this['_renderAct'+'ions'][_0x196b28],_0x521791=_0x55aaf0['layer'];if(_0x55aaf0['renderTarg'+'et']&&_0x521791['id']!==os)break;if(_0x521791['id']===os)continue;if(_0x55aaf0['useCameraP'+'asses'])break;const _0x110b75=_0x55aaf0==null?void(0x1*-0x1585+0x1dab+-0x826):_0x55aaf0['camera']['camera'];if(_0x110b75&&(!_0x189ce6['camera']['rect']['equals'](_0x110b75['rect'])||!_0x189ce6['camera']['scissorRec'+'t']['equals'](_0x110b75['scissorRec'+'t'])))break;_0x55aaf0['renderTarg'+'et']=_0x189ce6['renderTarg'+'et'];}}['_logRender'+'Actions'](){if(ni['get'](gl)){M['trace'](gl,'Render\x20Act'+'ions\x20for\x20c'+'omposition'+':\x20'+this['name']);for(let _0x4445c8=-0x4*0x88c+-0x4*-0x79+0x204c;_0x4445c8<this['_renderAct'+'ions']['length'];_0x4445c8++){const _0x7e87cb=this['_renderAct'+'ions'][_0x4445c8],_0x175f9a=_0x7e87cb['camera'];if(_0x7e87cb['useCameraP'+'asses'])M['trace'](gl,_0x4445c8+('CustomPass'+'es\x20Cam:\x20')+(_0x175f9a?_0x175f9a['entity']['name']:'-'));else{const _0x2fbacb=_0x7e87cb['layer'],_0x18e261=_0x2fbacb['enabled']&&this['isEnabled'](_0x2fbacb,_0x7e87cb['transparen'+'t']),_0x1cd717=(_0x7e87cb['clearColor']?'Color\x20':'.....\x20')+(_0x7e87cb['clearDepth']?'Depth\x20':'.....\x20')+(_0x7e87cb['clearStenc'+'il']?'Stencil':'.......');M['trace'](gl,_0x4445c8+('\x20Cam:\x20'+(_0x175f9a?_0x175f9a['entity']['name']:'-'))['padEnd'](-0x1d85+0x3*-0x70a+0x32b9,'\x20')+('\x20Lay:\x20'+_0x2fbacb['name'])['padEnd'](-0x1*-0x1af+-0x1e5b*-0x1+-0x1ff4,'\x20')+(_0x7e87cb['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x18e261?'\x20ENABLED\x20':'\x20DISABLED')+('\x20RT:\x20'+(_0x7e87cb['renderTarg'+'et']?_0x7e87cb['renderTarg'+'et']['name']:'-'))['padEnd'](0x1*-0x12ea+0x1315+-0x1*0xd,'\x20')+'\x20Clear:\x20'+_0x1cd717+(_0x7e87cb['firstCamer'+'aUse']?'\x20CAM-FIRST':'')+(_0x7e87cb['lastCamera'+'Use']?'\x20CAM-LAST':'')+(_0x7e87cb['triggerPos'+'tprocess']?'\x20POSTPROCE'+'SS':''));}}}}['_isLayerAd'+'ded'](_0x333aaf){const _0x5eeff0=this['layerIdMap']['get'](_0x333aaf['id'])===_0x333aaf;return M['assert'](!_0x5eeff0,'Layer\x20is\x20a'+'lready\x20add'+'ed:\x20'+_0x333aaf['name']),_0x5eeff0;}['_isSublaye'+'rAdded'](_0x4a33e1,_0x52ffa3){return(_0x52ffa3?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['get'](_0x4a33e1)!==void(0x20fa+-0x6f0+-0x25e*0xb)?(M['error']('Sublayer\x20'+_0x4a33e1['name']+(',\x20transpar'+'ent:\x20')+_0x52ffa3+('\x20is\x20alread'+'y\x20added.')),!(0x196c*0x1+-0x1*-0x20b7+-0x3a23)):!(0xae7*0x1+-0x10*0x5c+-0x526);}['push'](_0x444358){this['_isLayerAd'+'ded'](_0x444358)||(this['layerList']['push'](_0x444358),this['layerList']['push'](_0x444358),this['_opaqueOrd'+'er'][_0x444358['id']]=this['subLayerLi'+'st']['push'](!(0x5fb*-0x4+-0x1789+0x2f76))-(0x1072+-0xdf6+0x27b*-0x1),this['_transpare'+'ntOrder'][_0x444358['id']]=this['subLayerLi'+'st']['push'](!(0x2271+0x2018+0x1*-0x4289))-(0x147b*0x1+0x8e*-0x18+-0x72a),this['subLayerEn'+'abled']['push'](!(-0xf60+-0xc2f*-0x3+-0x152d)),this['subLayerEn'+'abled']['push'](!(0x1*-0x166f+-0xc*0x28d+0x350b)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1*-0x11eb+-0x1*0x3d6+-0x5*0x2d1),this['fire']('add',_0x444358));}['insert'](_0x46b1d8,_0x7976){if(this['_isLayerAd'+'ded'](_0x46b1d8))return;this['layerList']['splice'](_0x7976,-0x1394+0x3f+-0x65*-0x31,_0x46b1d8,_0x46b1d8),this['subLayerLi'+'st']['splice'](_0x7976,0x8f5*0x1+-0x167f*0x1+0xd8a*0x1,!(0xa*-0xa7+0x5*0x161+0x5e*-0x1),!(0x143d+0x162e+-0x2a6b));const _0x502cf2=this['layerList']['length'];this['_updateOpa'+'queOrder'](_0x7976,_0x502cf2-(0x2508+0x1*-0xce3+-0x1824)),this['_updateTra'+'nsparentOr'+'der'](_0x7976,_0x502cf2-(-0x1d76+-0x1fc9+0x1ea*0x20)),this['subLayerEn'+'abled']['splice'](_0x7976,-0xdab*-0x1+-0x189+-0x2*0x611,!(-0x411*-0x7+-0x198c+-0x2eb),!(-0x1a43+-0x6*0x42d+0x1*0x3351)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x6*-0x123+0x365*0x8+0x21fa*-0x1),this['fire']('add',_0x46b1d8);}['remove'](_0x237ed4){let _0x24d0df=this['layerList']['indexOf'](_0x237ed4);for(delete this['_opaqueOrd'+'er'][_0x24d0df],delete this['_transpare'+'ntOrder'][_0x24d0df];_0x24d0df>=-0x12*-0x1cd+-0xc4e*0x1+-0x141c;)this['layerList']['splice'](_0x24d0df,-0x14c*0x2+0x1*-0x150c+0x17a5),this['subLayerLi'+'st']['splice'](_0x24d0df,-0x1*-0x989+0xd*-0x6b+-0x419),this['subLayerEn'+'abled']['splice'](_0x24d0df,0x1c1d+0x1c1*0x4+-0x1*0x2320),_0x24d0df=this['layerList']['indexOf'](_0x237ed4),this['_dirty']=!(0x1997+0x6f9+-0x2090),this['fire']('remove',_0x237ed4);const _0xb51d8b=this['layerList']['length'];this['_updateOpa'+'queOrder'](0x13ca+-0x9*0x1b+0x35*-0x5b,_0xb51d8b-(0x2623+-0x2*-0x260+0x16*-0x1f3)),this['_updateTra'+'nsparentOr'+'der'](-0x6ee+-0xf9a*0x1+-0x1c*-0xce,_0xb51d8b-(0x1*0x1c9d+0x536+0x3*-0xb46)),this['_updateLay'+'erMaps']();}['pushOpaque'](_0x147ce7){this['_isSublaye'+'rAdded'](_0x147ce7,!(0xa8e+0x89e*-0x1+0x9*-0x37))||(this['layerList']['push'](_0x147ce7),this['_opaqueOrd'+'er'][_0x147ce7['id']]=this['subLayerLi'+'st']['push'](!(0x102c+-0x1e1+0x76*-0x1f))-(0x274*0x1+-0x2611+-0x11cf*-0x2),this['subLayerEn'+'abled']['push'](!(-0x7*0x239+-0x13c3*-0x1+-0x434*0x1)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x436+-0xdd*0x19+0x115f),this['fire']('add',_0x147ce7));}['insertOpaq'+'ue'](_0x28228f,_0xbee335){if(this['_isSublaye'+'rAdded'](_0x28228f,!(0x59b+-0x24df*-0x1+-0x2a79)))return;this['layerList']['splice'](_0xbee335,0x140a+0x1bdb+0x3*-0xff7,_0x28228f),this['subLayerLi'+'st']['splice'](_0xbee335,0xe5*0x11+0x2232+-0x1*0x3167,!(-0xb9c*-0x1+0xa9c*0x2+-0xaf1*0x3));const _0x4dfe4c=this['subLayerLi'+'st']['length'];this['_updateOpa'+'queOrder'](_0xbee335,_0x4dfe4c-(0x2a*0x7d+0x3*0x67e+-0x27fb)),this['subLayerEn'+'abled']['splice'](_0xbee335,-0x1916+0xda9*0x2+-0x2c*0xd,!(-0x1621+0x229+-0x9*-0x238)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x4d2+0x1*0x1327+0x1*-0x17f9),this['fire']('add',_0x28228f);}['removeOpaq'+'ue'](_0x4aa142){for(let _0x1aaf49=0x14*0x199+0x1*-0xe21+-0x5f1*0x3,_0x20677f=this['layerList']['length'];_0x1aaf49<_0x20677f;_0x1aaf49++)if(this['layerList'][_0x1aaf49]===_0x4aa142&&!this['subLayerLi'+'st'][_0x1aaf49]){this['layerList']['splice'](_0x1aaf49,0x727*0x1+0x939+-0xb*0x17d),this['subLayerLi'+'st']['splice'](_0x1aaf49,-0x2*0x125e+-0xc90+0x314d),_0x20677f--,this['_updateOpa'+'queOrder'](_0x1aaf49,_0x20677f-(-0x72*0x9+-0x2*-0x11b7+-0x1f6b)),this['subLayerEn'+'abled']['splice'](_0x1aaf49,0x1*0x1395+-0x4*0x2fb+0x1c*-0x46),this['_dirty']=!(-0xd2e+-0x2263+0x2f91),this['layerList']['indexOf'](_0x4aa142)<0x84c+0x1eda+-0x2726&&this['fire']('remove',_0x4aa142);break;}this['_updateLay'+'erMaps']();}['pushTransp'+'arent'](_0x329778){this['_isSublaye'+'rAdded'](_0x329778,!(0x1*-0xe62+-0x49*0x7f+0x3299))||(this['layerList']['push'](_0x329778),this['_transpare'+'ntOrder'][_0x329778['id']]=this['subLayerLi'+'st']['push'](!(0x1*-0x1beb+0x1364+-0x25*-0x3b))-(0x41+0x12b9*0x1+-0x12f9),this['subLayerEn'+'abled']['push'](!(0x27f*0x6+0x1*0x2010+0x1785*-0x2)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x2*0xec1+0x6d7+-0x1*0x2459),this['fire']('add',_0x329778));}['insertTran'+'sparent'](_0x564543,_0x4035e0){if(this['_isSublaye'+'rAdded'](_0x564543,!(0x1df0+-0x1dd7+0x19*-0x1)))return;this['layerList']['splice'](_0x4035e0,-0x185+-0x11a5+0xb*0x1be,_0x564543),this['subLayerLi'+'st']['splice'](_0x4035e0,-0x8b*-0x25+-0xd9*0x2b+0x105c,!(0x238e+0x1567+-0x38f5));const _0x134828=this['subLayerLi'+'st']['length'];this['_updateTra'+'nsparentOr'+'der'](_0x4035e0,_0x134828-(0xf89+-0x13*-0x121+-0x24fb)),this['subLayerEn'+'abled']['splice'](_0x4035e0,0x54b+0x4*-0xc7+-0x2b*0xd,!(-0xaa5+0x1*0x1421+-0x1*0x97c)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x7d2+0x630+-0x16*0xa3),this['fire']('add',_0x564543);}['removeTran'+'sparent'](_0x50f0f1){for(let _0x302ac7=0x31*-0x49+0x37*0xb5+-0xc75*0x2,_0x19ef40=this['layerList']['length'];_0x302ac7<_0x19ef40;_0x302ac7++)if(this['layerList'][_0x302ac7]===_0x50f0f1&&this['subLayerLi'+'st'][_0x302ac7]){this['layerList']['splice'](_0x302ac7,-0x9a4+-0x4*-0x979+0x409*-0x7),this['subLayerLi'+'st']['splice'](_0x302ac7,0x2145+-0x26ee+0x5aa),_0x19ef40--,this['_updateTra'+'nsparentOr'+'der'](_0x302ac7,_0x19ef40-(0x9*0x24d+-0xde2*0x2+-0x2*-0x388)),this['subLayerEn'+'abled']['splice'](_0x302ac7,0xa4f+0x5ad*-0x4+0xc66),this['_dirty']=!(-0x259*-0xf+-0x201d+-0x31a),this['layerList']['indexOf'](_0x50f0f1)<-0x29*0x12+0x8*-0x476+0x2692&&this['fire']('remove',_0x50f0f1);break;}this['_updateLay'+'erMaps']();}['getOpaqueI'+'ndex'](_0x6f213a){return this['layerOpaqu'+'eIndexMap']['get'](_0x6f213a)??-(0x6f3+-0x81*0x43+-0x5*-0x55d);}['getTranspa'+'rentIndex'](_0x51381d){return this['layerTrans'+'parentInde'+'xMap']['get'](_0x51381d)??-(-0x5*-0x690+-0x1f09+-0x1c6);}['isEnabled'](_0x404b1e,_0x59b849){if(_0x404b1e['enabled']){const _0x586a9f=_0x59b849?this['getTranspa'+'rentIndex'](_0x404b1e):this['getOpaqueI'+'ndex'](_0x404b1e);if(_0x586a9f>=0x130e+-0x55b*0x5+0x7b9)return this['subLayerEn'+'abled'][_0x586a9f];}return!(0x3*0x925+-0x205c+0x4ee);}['_updateLay'+'erMaps'](){this['layerIdMap']['clear'](),this['layerNameM'+'ap']['clear'](),this['layerOpaqu'+'eIndexMap']['clear'](),this['layerTrans'+'parentInde'+'xMap']['clear']();for(let _0x528884=-0x1*0xb8f+-0x89*-0x1+0xb06;_0x528884<this['layerList']['length'];_0x528884++){const _0x113327=this['layerList'][_0x528884];this['layerIdMap']['set'](_0x113327['id'],_0x113327),this['layerNameM'+'ap']['set'](_0x113327['name'],_0x113327),(this['subLayerLi'+'st'][_0x528884]?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['set'](_0x113327,_0x528884);}}['getLayerBy'+'Id'](_0x1d73f9){return this['layerIdMap']['get'](_0x1d73f9)??null;}['getLayerBy'+'Name'](_0x1680c1){return this['layerNameM'+'ap']['get'](_0x1680c1)??null;}['_updateOpa'+'queOrder'](_0x3184e4,_0x97b67f){for(let _0x508f19=_0x3184e4;_0x508f19<=_0x97b67f;_0x508f19++)this['subLayerLi'+'st'][_0x508f19]===!(0x1799+0xa33+-0x21cb)&&(this['_opaqueOrd'+'er'][this['layerList'][_0x508f19]['id']]=_0x508f19);}['_updateTra'+'nsparentOr'+'der'](_0x451f07,_0x3c58bb){for(let _0x1ba566=_0x451f07;_0x1ba566<=_0x3c58bb;_0x1ba566++)this['subLayerLi'+'st'][_0x1ba566]===!(0x98*0x22+-0x937*-0x1+-0x1*0x1d67)&&(this['_transpare'+'ntOrder'][this['layerList'][_0x1ba566]['id']]=_0x1ba566);}['_sortLayer'+'sDescendin'+'g'](_0x47f4fb,_0x361934,_0x344be2){let _0x46d026=-(0xa46+-0x1ffb+0x7*0x31a),_0xa1c456=-(0x253f+-0x1*0x2a6+0x36*-0xa4);for(let _0xc83954=-0x25eb*0x1+-0x2412+-0x5b1*-0xd,_0x179d01=_0x47f4fb['length'];_0xc83954<_0x179d01;_0xc83954++){const _0x4a13b5=_0x47f4fb[_0xc83954];_0x344be2['hasOwnProp'+'erty'](_0x4a13b5)&&(_0x46d026=Math['max'](_0x46d026,_0x344be2[_0x4a13b5]));}for(let _0x7c4118=0x75b*-0x3+0x1809+-0x1f8,_0x2637ea=_0x361934['length'];_0x7c4118<_0x2637ea;_0x7c4118++){const _0x2c72d3=_0x361934[_0x7c4118];_0x344be2['hasOwnProp'+'erty'](_0x2c72d3)&&(_0xa1c456=Math['max'](_0xa1c456,_0x344be2[_0x2c72d3]));}return _0x46d026===-(-0x551*-0x4+-0x997+-0xbac)&&_0xa1c456!==-(0x9a7+0x4ee*0x1+-0xe94)?0x227f+0x6e9*-0x3+-0xdc3:_0xa1c456===-(-0x14d9+-0x28d+0x1767)&&_0x46d026!==-(-0x6db+-0x1841+-0x1f1d*-0x1)?-(0xead+0x2*0x8f5+-0x2096):_0xa1c456-_0x46d026;}['sortTransp'+'arentLayer'+'s'](_0x1f6919,_0x5ac70d){return this['_sortLayer'+'sDescendin'+'g'](_0x1f6919,_0x5ac70d,this['_transpare'+'ntOrder']);}['sortOpaque'+'Layers'](_0x1f3b70,_0x4dee41){return this['_sortLayer'+'sDescendin'+'g'](_0x1f3b70,_0x4dee41,this['_opaqueOrd'+'er']);}}const zl=new I(),pi={'bias':0x0,'normalBias':0x0},qn=new ie(),kd={'r':0x0,'g':0x1,'b':0x2,'a':0x3},Lf={'directional':ve,'omni':Ye,'point':Ye,'spot':Ke},yA=[[new ae(0x5af*0x1+-0x913+0x364,0xfb*0x11+-0x190a+0x85f,0xc33+0xa81+-0x16b3,0x22f7+-0x19ca+-0x92c)],[new ae(0x5b5+0x21f0+-0x27a5,-0x3a*-0x55+0x7*-0xc3+-0xded,0xd*-0x2b3+-0x22*0x37+0x1*0x2a65+0.5,0x2*-0xe5a+0x2246+0x1*-0x592+0.5),new ae(-0x310+0xb5d*-0x3+-0x2527*-0x1,-0x2d1*-0x1+-0xdd6+-0xb05*-0x1+0.5,-0x5*0x6e+0xcb8*-0x1+0xb*0x15a+0.5,-0x4fd*0x6+-0x493+-0xb*-0x323+0.5)],[new ae(-0x1*-0x2231+-0x755+0x47a*-0x6,-0x1a7b+0x3f1*0x2+0x1299,0x3b*-0x91+0x88b*0x1+0x18e0+0.5,0x1*0xbcb+-0x19ff*0x1+0x12f*0xc+0.5),new ae(-0x1*0x26ef+-0xda1+0x3490,0x8b7+0xad7+-0x138e+0.5,-0x1*-0x496+-0xd4c+-0xdf*-0xa+0.5,0xf24+0xa61+0x2f*-0x8b+0.5),new ae(0x6d2+-0x1203+0xb31*0x1+0.5,-0x19af+0x3*-0x4b5+0x27ce,-0x6e0+-0x1*0x9c+0x77c+0.5,-0x16a*0x3+0x1843*0x1+0x19*-0xcd+0.5)],[new ae(-0xe4a+-0x32*0x2f+0x1*0x1778,-0xbb8+0x146d+-0x8b5,0xc3f+0x201c+-0x2c5b+0.5,0xa18+-0x22fb+0x17*0x115+0.5),new ae(0x1f8f+-0x179a+-0x7*0x123,0x1*0xa1d+0xe4*-0xb+-0x51+0.5,-0x4*-0x36f+-0x4*-0xe9+-0x1160+0.5,0x2162+-0x2*0x955+-0xeb8+0.5),new ae(0x1*0x8bf+-0x176c+0xead+0.5,0x8*0x337+0x1bf+-0x1b77,-0x1369*0x1+-0x2*0x7f+0x1467+0.5,-0x29*0xbd+0x21c+-0x963*-0x3+0.5),new ae(0x14af+0x1*-0x1f63+0xab4+0.5,-0x2a1+-0x1*0x1d32+-0x1*-0x1fd3+0.5,0x1ad3+0x2064+-0x13bd*0x3+0.5,0x1cfe+-0xb6+-0x1c48+0.5)]],vA={'rrr':0x1,'ggg':0x2,'bbb':0x4,'aaa':0x8,'rgb':0x7};let xA=-0x878+0x16db+-0x7f*0x1d;class TA{constructor(_0x30517e,_0x475fa3,_0xd85e2d){this['light']=_0xd85e2d,this['camera']=_0x30517e,this['shadowCame'+'ra']=Ry['createShad'+'owCamera'](_0xd85e2d['_shadowTyp'+'e'],_0xd85e2d['_type'],_0x475fa3),this['shadowMatr'+'ix']=new te(),this['shadowView'+'port']=new ae(0x20*-0x7d+0x191c+-0x4*0x25f,0x5e4+0x245f*-0x1+-0x11*-0x1cb,0x8*0x175+0x27*0x6c+-0x1c1b,-0x1*0x42c+0x21ac+-0x1d7f),this['shadowScis'+'sor']=new ae(-0xf4d+-0x1429+0x2376,-0x1e2*-0x4+-0x1*0x1f29+0x17a1,0x1bca+0x31d*0x1+-0x1ee6,0x19*-0xb+0x1150+0x1*-0x103c),this['projection'+'Compensati'+'on']=0x117a+-0x3*-0x5af+-0x1*0x2287,this['face']=_0x475fa3,this['visibleCas'+'ters']=[],this['viewBindGr'+'oups']=[];}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x45c37f=>{_0x45c37f['defaultUni'+'formBuffer']['destroy'](),_0x45c37f['destroy']();}),this['viewBindGr'+'oups']['length']=0x19b*-0x18+-0x287*-0x3+0x1ef3;}get['shadowBuff'+'er'](){const _0x5ad9b0=this['shadowCame'+'ra']['renderTarg'+'et'];return _0x5ad9b0?this['light']['_isPcf']?_0x5ad9b0['depthBuffe'+'r']:_0x5ad9b0['colorBuffe'+'r']:null;}}class Ho{constructor(_0x535e63,_0x5037fc){h(this,'layers',new Set()),h(this,'clusteredL'+'ighting'),h(this,'shadowDept'+'hState',Kt['DEFAULT']['clone']()),h(this,'clusteredF'+'lags',0x1083+0xf6d+-0x1ff0),h(this,'clusteredD'+'ata',new Uint32Array(0x94f*0x1+-0xf67*0x1+0x61b)),h(this,'clusteredD'+'ata16',new Uint16Array(this['clusteredD'+'ata']['buffer'])),h(this,'_evtDevice'+'Restored',null),(this['device']=_0x535e63,this['clusteredL'+'ighting']=_0x5037fc,this['id']=xA++,this['_evtDevice'+'Restored']=_0x535e63['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this),this['_type']=ve,this['_color']=new ie(-0x144d*-0x1+-0x1b0*0x1+-0x5*0x3b9+0.8,0x7*-0x4cf+-0x1eca+0x4073+0.8,-0x1*0x14d5+0x2*-0x46d+-0x95*-0x33+0.8),this['_intensity']=-0x13*0xfb+-0x3*0x7ee+0xe24*0x3,this['_affectSpe'+'cularity']=!(0x9fe+0x1678+-0x2076),this['_luminance']=-0xa76*0x1+-0x7b8*-0x2+-0x4fa,this['_castShado'+'ws']=!(0x9a8+-0xb84+0x1dd),this['_enabled']=!(-0x891+-0x24a8+-0xe*-0x33b),this['_mask']=ds,this['isStatic']=!(0x194c+0x239*-0xb+-0x3*0x48),this['key']=-0x1656*0x1+-0x297+0x18ed,this['bakeDir']=!(0x1f1+-0x2e*-0x47+0xeb3*-0x1),this['bakeNumSam'+'ples']=-0x4ff*-0x7+0x1a5b+0x1*-0x3d53,this['bakeArea']=-0x2145+0x119b+0xfaa,this['attenuatio'+'nStart']=-0x1fd8+0x187e+0x764,this['attenuatio'+'nEnd']=-0x13*0x1e7+-0x2c3*-0xd+0x48,this['_falloffMo'+'de']=Sm,this['_shadowTyp'+'e']=ks,this['_vsmBlurSi'+'ze']=-0x706+-0x917*0x1+0x1028,this['vsmBlurMod'+'e']=vm,this['vsmBias']=(0x857+0x1d84+-0x25db+0.01)*(-0xed6+-0x23fa+0x32d0+0.25),this['_cookie']=null,this['cookieInte'+'nsity']=0x2*-0xd8b+0x727+-0x1d0*-0xb,this['_cookieFal'+'loff']=!(0xefa+-0x11d3+0x2d9),this['_cookieCha'+'nnel']='rgb',this['_cookieTra'+'nsform']=null,this['_cookieTra'+'nsformUnif'+'orm']=new Float32Array(-0x1b95+-0x1*0x1bfb+0x3794),this['_cookieOff'+'set']=null,this['_cookieOff'+'setUniform']=new Float32Array(-0x620+0xc85+-0x663),this['_cookieTra'+'nsformSet']=!(-0x2172+0xc6c*0x3+-0x3d1*0x1),this['_cookieOff'+'setSet']=!(-0x128*-0x12+0x1*0xfdb+-0x13*0x1ee),this['_innerCone'+'Angle']=-0x1a2c+-0x1293+-0x13*-0x25d,this['_outerCone'+'Angle']=-0x1*0x177e+-0x1e36+0x35e1,this['cascades']=null,this['_shadowMat'+'rixPalette']=null,this['_shadowCas'+'cadeDistan'+'ces']=null,this['numCascade'+'s']=-0xf10+0x3*0xaef+0x1*-0x11bc,this['_cascadeBl'+'end']=-0xa2e+-0x184+0x1f3*0x6,this['cascadeDis'+'tribution']=0x7*-0xd+-0x6c*0x18+0xa7b+0.5,this['_shape']=Vs,this['_colorLine'+'ar']=new Float32Array(0x1d*0x100+-0x67c+0x7*-0x337),this['_updateLin'+'earColor'](),this['_position']=new I(0x694+-0x137f+0x1*0xceb,-0xd1*0x1c+0x1150+-0x11c*-0x5,0x55*0x49+0x1b82+-0x33bf*0x1),this['_direction']=new I(-0x18ba+-0x1*0x16af+-0x1*-0x2f69,0x1*0x17e+0x19e3+0xa3*-0x2b,0x262f*0x1+0x1*-0x8ba+-0x1*0x1d75),this['_innerCone'+'AngleCos']=Math['cos'](this['_innerCone'+'Angle']*Math['PI']/(0x1f29+0x1f31*0x1+-0x3da6)),this['_updateOut'+'erAngle'](this['_outerCone'+'Angle']),this['_usePhysic'+'alUnits']=void(-0x5a*-0x2e+0xe1d+-0x1*0x1e49),this['_shadowMap']=null,this['_shadowRen'+'derParams']=[],this['_shadowCam'+'eraParams']=[],this['shadowDist'+'ance']=0xc4b*0x2+-0x44a+-0x1424,this['_shadowRes'+'olution']=-0x1*-0x1066+-0x37*-0xaa+-0xc3b*0x4,this['_shadowBia'+'s']=-(0x22f0+-0xa86+-0x7d*0x32+0.0005),this['_shadowInt'+'ensity']=0x1d77*-0x1+0x1ae9+-0x5*-0x83,this['_normalOff'+'setBias']=-0x1b*-0x112+-0x14c7+-0x81f,this['shadowUpda'+'teMode']=Pm,this['shadowUpda'+'teOverride'+'s']=null,this['_isVsm']=!(0x1131+-0xa49*0x1+-0x6e7),this['_isPcf']=!(0x3e7+0x9e+-0x1*0x485),this['_softShado'+'wParams']=new Float32Array(-0x1a02+0x18*-0x5e+0x22d6),this['shadowSamp'+'les']=-0x825*-0x4+0x1*0x14de+-0x2*0x1ab1,this['shadowBloc'+'kerSamples']=0x60b+-0x2310+0x1*0x1d15,this['penumbraSi'+'ze']=-0x132+-0x3b*0x8b+0x1*0x213c,this['penumbraFa'+'lloff']=-0xde*-0xb+-0x1a32+0x10a9,this['_cookieMat'+'rix']=null,this['_atlasView'+'port']=null,this['atlasViewp'+'ortAllocat'+'ed']=!(-0x47*0x77+0x2563+0x13*-0x3b),this['atlasVersi'+'on']=0x1*-0x14e8+0xa89*0x1+0xa5f,this['atlasSlotI'+'ndex']=0x46b+0xdf2+0x1*-0x125d,this['atlasSlotU'+'pdated']=!(-0x39*0x1e+-0x5*-0x599+0x25e*-0x9),this['_node']=null,this['_renderDat'+'a']=[],this['visibleThi'+'sFrame']=!(0x34*0xa7+-0xa*0x115+-0x1719),this['maxScreenS'+'ize']=0x1*-0x8cb+-0xf58+0xa7*0x25,this['_updateSha'+'dowBias']());}['destroy'](){var _0x16ed99;(_0x16ed99=this['_evtDevice'+'Restored'])==null||_0x16ed99['off'](),this['_evtDevice'+'Restored']=null,this['_destroySh'+'adowMap'](),this['releaseRen'+'derData'](),this['_renderDat'+'a']=null;}['onDeviceRe'+'stored'](){this['shadowUpda'+'teMode']===vs&&(this['shadowUpda'+'teMode']=or);}['releaseRen'+'derData'](){if(this['_renderDat'+'a']){for(let _0x5f51ba=0x26b6+0xbf*0x2a+-0x460c;_0x5f51ba<this['_renderDat'+'a']['length'];_0x5f51ba++)this['_renderDat'+'a'][_0x5f51ba]['destroy']();this['_renderDat'+'a']['length']=0xd1*-0x9+-0x1f*0x9f+-0x46f*-0x6;}}['addLayer'](_0x5c213d){this['layers']['add'](_0x5c213d);}['removeLaye'+'r'](_0x3282df){this['layers']['delete'](_0x3282df);}set['shadowSamp'+'les'](_0x46c1ad){this['_softShado'+'wParams'][0x110*0x1+0x43*0x80+-0x9e*0x38]=_0x46c1ad;}get['shadowSamp'+'les'](){return this['_softShado'+'wParams'][0x1202+0x1c09*0x1+-0x2e0b];}set['shadowBloc'+'kerSamples'](_0x9921bb){this['_softShado'+'wParams'][0x1*0x1643+-0x9ec*0x2+0x26a*-0x1]=_0x9921bb;}get['shadowBloc'+'kerSamples'](){return this['_softShado'+'wParams'][-0x6b*0x35+0x2312+-0xcea];}set['shadowBias'](_0x2f4f10){this['_shadowBia'+'s']!==_0x2f4f10&&(this['_shadowBia'+'s']=_0x2f4f10,this['_updateSha'+'dowBias']());}get['shadowBias'](){return this['_shadowBia'+'s'];}set['numCascade'+'s'](_0x1e65cc){(!this['cascades']||this['numCascade'+'s']!==_0x1e65cc)&&(this['cascades']=yA[_0x1e65cc-(-0x15d7+0x8aa+0xd2e)],this['_shadowMat'+'rixPalette']=new Float32Array(0x1*-0x1c8d+0x199*0x2+0x45*0x5f),this['_shadowCas'+'cadeDistan'+'ces']=new Float32Array(-0x24c*-0xc+-0x5dd+-0x15af),this['_destroySh'+'adowMap'](),this['updateKey']());}get['numCascade'+'s'](){return this['cascades']['length'];}set['cascadeBle'+'nd'](_0x57da0d){this['_cascadeBl'+'end']!==_0x57da0d&&(this['_cascadeBl'+'end']=_0x57da0d,this['updateKey']());}get['cascadeBle'+'nd'](){return this['_cascadeBl'+'end'];}set['shadowMap'](_0x70ede5){this['_shadowMap']!==_0x70ede5&&(this['_destroySh'+'adowMap'](),this['_shadowMap']=_0x70ede5);}get['shadowMap'](){return this['_shadowMap'];}set['mask'](_0x3cfb99){this['_mask']!==_0x3cfb99&&(this['_mask']=_0x3cfb99,this['updateKey'](),this['updateClus'+'teredFlags']());}get['mask'](){return this['_mask'];}get['numShadowF'+'aces'](){const _0x5d46b4=this['_type'];return _0x5d46b4===ve?this['numCascade'+'s']:_0x5d46b4===Ye?0x5f3+-0x21e*0x1+-0x3cf:0x52*-0x13+0xa9*0x29+-0xa*0x219;}set['type'](_0x20fe92){if(this['_type']===_0x20fe92)return;this['_type']=_0x20fe92,this['_destroySh'+'adowMap'](),this['_updateSha'+'dowBias'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x5c0220=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowUpda'+'teOverride'+'s']=null,this['shadowType']=_0x5c0220;}get['type'](){return this['_type'];}set['shape'](_0x3d42d2){if(this['_shape']===_0x3d42d2)return;this['_shape']=_0x3d42d2,this['_destroySh'+'adowMap'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x14c180=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowType']=_0x14c180;}get['shape'](){return this['_shape'];}set['usePhysica'+'lUnits'](_0x46d061){this['_usePhysic'+'alUnits']!==_0x46d061&&(this['_usePhysic'+'alUnits']=_0x46d061,this['_updateLin'+'earColor']());}get['usePhysica'+'lUnits'](){return this['_usePhysic'+'alUnits'];}set['shadowType'](_0x1b9d2d){if(this['_shadowTyp'+'e']===_0x1b9d2d)return;let _0xf4d31=Bi['get'](_0x1b9d2d);_0xf4d31||(_0x1b9d2d=ks);const _0x33b9cf=this['device'];_0x1b9d2d===No&&!_0x33b9cf['textureFlo'+'atRenderab'+'le']&&!_0x33b9cf['textureHal'+'fFloatRend'+'erable']&&(_0x1b9d2d=ks),this['_type']===Ye&&_0x1b9d2d!==ly&&_0x1b9d2d!==ks&&_0x1b9d2d!==hy&&_0x1b9d2d!==cy&&_0x1b9d2d!==No&&(_0x1b9d2d=ks),_0x1b9d2d===ym&&(!_0x33b9cf['textureFlo'+'atRenderab'+'le']||!_0x33b9cf['textureFlo'+'atFilterab'+'le'])&&(_0x1b9d2d=bf),_0x1b9d2d===bf&&!_0x33b9cf['textureHal'+'fFloatRend'+'erable']&&(_0x1b9d2d=ks),_0xf4d31=Bi['get'](_0x1b9d2d),this['_isVsm']=(_0xf4d31==null?void(0x1473+0x6b3*-0x3+-0x5a):_0xf4d31['vsm'])??!(-0x1abf*-0x1+-0x11bc+-0x902),this['_isPcf']=(_0xf4d31==null?void(-0x1819+-0x1ef5+-0x57*-0xa2):_0xf4d31['pcf'])??!(-0x1f1e+0x1c53+-0x2cc*-0x1),this['_shadowTyp'+'e']=_0x1b9d2d,this['_destroySh'+'adowMap'](),this['updateKey']();}get['shadowType'](){return this['_shadowTyp'+'e'];}set['enabled'](_0x28334a){this['_enabled']!==_0x28334a&&(this['_enabled']=_0x28334a,this['layersDirt'+'y']());}get['enabled'](){return this['_enabled'];}set['castShadow'+'s'](_0x455a9f){this['_castShado'+'ws']!==_0x455a9f&&(this['_castShado'+'ws']=_0x455a9f,this['_destroySh'+'adowMap'](),this['layersDirt'+'y'](),this['updateKey']());}get['castShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']!==ii&&this['_mask']!==-0x26eb+0x1a3b+0xcb0;}set['shadowInte'+'nsity'](_0xbeaad5){this['_shadowInt'+'ensity']!==_0xbeaad5&&(this['_shadowInt'+'ensity']=_0xbeaad5,this['updateKey']());}get['shadowInte'+'nsity'](){return this['_shadowInt'+'ensity'];}get['bakeShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']===ii;}set['shadowReso'+'lution'](_0x5d27fe){this['_shadowRes'+'olution']!==_0x5d27fe&&(this['_type']===Ye?_0x5d27fe=Math['min'](_0x5d27fe,this['device']['maxCubeMap'+'Size']):_0x5d27fe=Math['min'](_0x5d27fe,this['device']['maxTexture'+'Size']),this['_shadowRes'+'olution']=_0x5d27fe,this['_destroySh'+'adowMap']());}get['shadowReso'+'lution'](){return this['_shadowRes'+'olution'];}set['vsmBlurSiz'+'e'](_0x4b7187){this['_vsmBlurSi'+'ze']!==_0x4b7187&&(_0x4b7187%(0x1284+-0x22d1+-0x104f*-0x1)===0xa17+0x61*0x1+0x29e*-0x4&&_0x4b7187++,this['_vsmBlurSi'+'ze']=_0x4b7187);}get['vsmBlurSiz'+'e'](){return this['_vsmBlurSi'+'ze'];}set['normalOffs'+'etBias'](_0xde27b4){if(this['_normalOff'+'setBias']!==_0xde27b4){const _0x33e90c=!this['_normalOff'+'setBias']&&_0xde27b4||this['_normalOff'+'setBias']&&!_0xde27b4;this['_normalOff'+'setBias']=_0xde27b4,_0x33e90c&&this['updateKey']();}}get['normalOffs'+'etBias'](){return this['_normalOff'+'setBias'];}set['falloffMod'+'e'](_0x732100){this['_falloffMo'+'de']!==_0x732100&&(this['_falloffMo'+'de']=_0x732100,this['updateKey'](),this['updateClus'+'teredFlags']());}get['falloffMod'+'e'](){return this['_falloffMo'+'de'];}set['innerConeA'+'ngle'](_0x153ffc){this['_innerCone'+'Angle']!==_0x153ffc&&(this['_innerCone'+'Angle']=_0x153ffc,this['_innerCone'+'AngleCos']=Math['cos'](_0x153ffc*Math['PI']/(-0x1*0x1cc5+0x7b8+0x1*0x15c1)),this['updateClus'+'terData'](!(-0x1*-0x48b+0x2*-0xb7a+0x126a),!(0x2fc+-0x1*-0x6ee+-0x9ea)),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['innerConeA'+'ngle'](){return this['_innerCone'+'Angle'];}set['outerConeA'+'ngle'](_0x408c07){this['_outerCone'+'Angle']!==_0x408c07&&(this['_outerCone'+'Angle']=_0x408c07,this['_updateOut'+'erAngle'](_0x408c07),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['outerConeA'+'ngle'](){return this['_outerCone'+'Angle'];}set['penumbraSi'+'ze'](_0x3c5d7e){this['_penumbraS'+'ize']=_0x3c5d7e,this['_softShado'+'wParams'][-0x1*-0xbce+-0x196*0x4+0x1*-0x574]=_0x3c5d7e;}get['penumbraSi'+'ze'](){return this['_penumbraS'+'ize'];}set['penumbraFa'+'lloff'](_0x22d992){this['_softShado'+'wParams'][0xfd4*-0x1+0x1*-0x1639+-0x261*-0x10]=_0x22d992;}get['penumbraFa'+'lloff'](){return this['_softShado'+'wParams'][-0x1e1d+0x6a7*-0x1+0x24c7];}['_updateOut'+'erAngle'](_0x51f6f0){const _0x76b7e5=_0x51f6f0*Math['PI']/(0x16b3+0x1*-0x242e+0xe2f);this['_outerCone'+'AngleCos']=Math['cos'](_0x76b7e5),this['_outerCone'+'AngleSin']=Math['sin'](_0x76b7e5),this['updateClus'+'terData'](!(0x1bfd*0x1+0x2664+-0x4260),!(-0x109d+-0x1405+0x24a2));}set['intensity'](_0x340c57){this['_intensity']!==_0x340c57&&(this['_intensity']=_0x340c57,this['_updateLin'+'earColor']());}get['intensity'](){return this['_intensity'];}set['affectSpec'+'ularity'](_0xdfed86){this['_type']===ve&&(this['_affectSpe'+'cularity']=_0xdfed86,this['updateKey']());}get['affectSpec'+'ularity'](){return this['_affectSpe'+'cularity'];}set['luminance'](_0x397d74){this['_luminance']!==_0x397d74&&(this['_luminance']=_0x397d74,this['_updateLin'+'earColor']());}get['luminance'](){return this['_luminance'];}get['cookieMatr'+'ix'](){return this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new te()),this['_cookieMat'+'rix'];}get['atlasViewp'+'ort'](){return this['_atlasView'+'port']||(this['_atlasView'+'port']=new ae(0x142c*-0x1+0x24ce*0x1+-0x10a2,0x193b+-0x1391*-0x1+-0x2ccc,-0xd46*0x1+0x106d*-0x1+0x1db4,-0x19c4+0x1f6c+-0x5a7)),this['_atlasView'+'port'];}set['cookie'](_0x291704){this['_cookie']!==_0x291704&&(this['_cookie']=_0x291704,this['updateKey']());}get['cookie'](){return this['_cookie'];}set['cookieFall'+'off'](_0x5b2584){this['_cookieFal'+'loff']!==_0x5b2584&&(this['_cookieFal'+'loff']=_0x5b2584,this['updateKey']());}get['cookieFall'+'off'](){return this['_cookieFal'+'loff'];}set['cookieChan'+'nel'](_0x528209){if(this['_cookieCha'+'nnel']!==_0x528209){if(_0x528209['length']<0x1*-0xf76+-0x82b+0x22*0xb2){const _0x14dde7=_0x528209['charAt'](_0x528209['length']-(0x4bb+-0x125*0x7+-0x1*-0x349)),_0x57da8d=-0x14e*0x15+-0x267d+0x41e6-_0x528209['length'];for(let _0x26ee09=-0x20b*0x5+-0x8b3*0x3+0x2450;_0x26ee09<_0x57da8d;_0x26ee09++)_0x528209+=_0x14dde7;}this['_cookieCha'+'nnel']=_0x528209,this['updateKey'](),this['updateClus'+'teredFlags']();}}get['cookieChan'+'nel'](){return this['_cookieCha'+'nnel'];}set['cookieTran'+'sform'](_0x3b5a4c){this['_cookieTra'+'nsform']!==_0x3b5a4c&&(this['_cookieTra'+'nsform']=_0x3b5a4c,this['_cookieTra'+'nsformSet']=!!_0x3b5a4c,_0x3b5a4c&&!this['_cookieOff'+'set']&&(this['cookieOffs'+'et']=new J(),this['_cookieOff'+'setSet']=!(0x317+0x12*-0x71+-0x4dc*-0x1)),this['updateKey']());}get['cookieTran'+'sform'](){return this['_cookieTra'+'nsform'];}set['cookieOffs'+'et'](_0x1d65ac){if(this['_cookieOff'+'set']===_0x1d65ac)return;!!(this['_cookieTra'+'nsformSet']||_0x1d65ac)&&!_0x1d65ac&&this['_cookieOff'+'set']?this['_cookieOff'+'set']['set'](0x1afe*-0x1+-0x1cfe+0x37fc,0x1345+0x27f+-0x15c4):this['_cookieOff'+'set']=_0x1d65ac,this['_cookieOff'+'setSet']=!!_0x1d65ac,_0x1d65ac&&!this['_cookieTra'+'nsform']&&(this['cookieTran'+'sform']=new ae(-0x2b9*-0xa+-0x11*-0x1b7+-0x3860,-0x1511+0x261e+-0x886*0x2,0x1859+0x1*0x220c+0x97*-0x63,-0x21f3+-0x169c*0x1+0x388f),this['_cookieTra'+'nsformSet']=!(-0x704+0xcf3+-0x5ee)),this['updateKey']();}get['cookieOffs'+'et'](){return this['_cookieOff'+'set'];}['beginFrame'](){this['visibleThi'+'sFrame']=this['_type']===ve&&this['_enabled'],this['maxScreenS'+'ize']=-0x6e2+-0x322*0x4+0x136a,this['atlasViewp'+'ortAllocat'+'ed']=!(0x135e+0x737*0x1+0x46e*-0x6),this['atlasSlotU'+'pdated']=!(0x116d+0x612+0x177e*-0x1);}['_destroySh'+'adowMap'](){if(this['releaseRen'+'derData'](),this['_shadowMap']&&(this['_shadowMap']['cached']||this['_shadowMap']['destroy'](),this['_shadowMap']=null),this['shadowUpda'+'teMode']===vs&&(this['shadowUpda'+'teMode']=or),this['shadowUpda'+'teOverride'+'s']){for(let _0x31780f=-0x1331+-0x1651+0x2982;_0x31780f<this['shadowUpda'+'teOverride'+'s']['length'];_0x31780f++)this['shadowUpda'+'teOverride'+'s'][_0x31780f]===vs&&(this['shadowUpda'+'teOverride'+'s'][_0x31780f]=or);}}['getRenderD'+'ata'](_0x4c5ef0,_0x487988){for(let _0x2e5e02=-0x17*-0x44+0x7ad*0x1+0x1*-0xdc9;_0x2e5e02<this['_renderDat'+'a']['length'];_0x2e5e02++){const _0x5d08a1=this['_renderDat'+'a'][_0x2e5e02];if(_0x5d08a1['camera']===_0x4c5ef0&&_0x5d08a1['face']===_0x487988)return _0x5d08a1;}const _0x38d856=new TA(_0x4c5ef0,_0x487988,this);return this['_renderDat'+'a']['push'](_0x38d856),_0x38d856;}['clone'](){const _0x49dbb9=new Ho(this['device'],this['clusteredL'+'ighting']);return _0x49dbb9['type']=this['_type'],_0x49dbb9['setColor'](this['_color']),_0x49dbb9['intensity']=this['_intensity'],_0x49dbb9['affectSpec'+'ularity']=this['_affectSpe'+'cularity'],_0x49dbb9['luminance']=this['_luminance'],_0x49dbb9['castShadow'+'s']=this['castShadow'+'s'],_0x49dbb9['_enabled']=this['_enabled'],_0x49dbb9['attenuatio'+'nStart']=this['attenuatio'+'nStart'],_0x49dbb9['attenuatio'+'nEnd']=this['attenuatio'+'nEnd'],_0x49dbb9['falloffMod'+'e']=this['_falloffMo'+'de'],_0x49dbb9['shadowType']=this['_shadowTyp'+'e'],_0x49dbb9['vsmBlurSiz'+'e']=this['_vsmBlurSi'+'ze'],_0x49dbb9['vsmBlurMod'+'e']=this['vsmBlurMod'+'e'],_0x49dbb9['vsmBias']=this['vsmBias'],_0x49dbb9['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x49dbb9['mask']=this['mask'],this['shadowUpda'+'teOverride'+'s']&&(_0x49dbb9['shadowUpda'+'teOverride'+'s']=this['shadowUpda'+'teOverride'+'s']['slice']()),_0x49dbb9['innerConeA'+'ngle']=this['_innerCone'+'Angle'],_0x49dbb9['outerConeA'+'ngle']=this['_outerCone'+'Angle'],_0x49dbb9['numCascade'+'s']=this['numCascade'+'s'],_0x49dbb9['cascadeDis'+'tribution']=this['cascadeDis'+'tribution'],_0x49dbb9['cascadeBle'+'nd']=this['_cascadeBl'+'end'],_0x49dbb9['shape']=this['_shape'],_0x49dbb9['shadowDept'+'hState']['copy'](this['shadowDept'+'hState']),_0x49dbb9['shadowBias']=this['shadowBias'],_0x49dbb9['normalOffs'+'etBias']=this['_normalOff'+'setBias'],_0x49dbb9['shadowReso'+'lution']=this['_shadowRes'+'olution'],_0x49dbb9['shadowDist'+'ance']=this['shadowDist'+'ance'],_0x49dbb9['shadowInte'+'nsity']=this['shadowInte'+'nsity'],_0x49dbb9['shadowSamp'+'les']=this['shadowSamp'+'les'],_0x49dbb9['shadowBloc'+'kerSamples']=this['shadowBloc'+'kerSamples'],_0x49dbb9['penumbraSi'+'ze']=this['penumbraSi'+'ze'],_0x49dbb9['penumbraFa'+'lloff']=this['penumbraFa'+'lloff'],_0x49dbb9;}static['getLightUn'+'itConversi'+'on'](_0x4cec08,_0x18d9e4=Math['PI']/(-0x3*0xb77+-0x43*0x47+0x34fe),_0x5e2dec=-0x5*-0x713+-0x143a+-0xf25){switch(_0x4cec08){case Ke:{const _0x439e56=Math['cos'](_0x18d9e4),_0x5b7098=Math['cos'](_0x5e2dec);return(-0x2694+0xa69*-0x2+-0x2*-0x1db4)*Math['PI']*(0x14*0xef+-0x1f5*-0x13+-0x37da-_0x5b7098+(_0x5b7098-_0x439e56)/(0x8a*0x2+-0x921*0x1+-0x80f*-0x1));}case Ye:return(-0x411+0x19b4+0x1*-0x159f)*Math['PI'];case ve:return-0xef3+0xfb9+-0xc5;}}['_getUnifor'+'mBiasValue'+'s'](_0x96604a){const _0x537639=_0x96604a['shadowCame'+'ra']['_farClip'];switch(this['_type']){case Ye:pi['bias']=this['shadowBias'],pi['normalBias']=this['_normalOff'+'setBias'];break;case Ke:this['_isVsm']?pi['bias']=-(-0x1f*-0xc2+0x1*-0x2339+0x15*0x8f+0.00001)*(-0x6*0x56f+-0xd8+0x2186):pi['bias']=this['shadowBias']*(0x7b4+0x3b5+-0xb55),pi['normalBias']=this['_isVsm']?this['vsmBias']/(this['attenuatio'+'nEnd']/(-0x379+-0x71a+0xa9a)):this['_normalOff'+'setBias'];break;case ve:this['_isVsm']?pi['bias']=-(-0x1da1+-0x45*0x47+0x1862*0x2+0.00001)*(0x1391+0x1*0xe96+-0x2213):pi['bias']=this['shadowBias']/_0x537639*(-0x1*-0x2099+-0x28*0xc1+-0x20d),pi['normalBias']=this['_isVsm']?this['vsmBias']/(_0x537639/(0x17*0x1+0x12e*-0x1f+0x2*0x1241)):this['_normalOff'+'setBias'];break;}return pi;}['getColor'](){return this['_color'];}['getBoundin'+'gSphere'](_0x49c185){if(this['_type']===Ke){const _0x5cd383=this['attenuatio'+'nEnd'],_0x4588b2=this['_outerCone'+'Angle'],_0xe7cc28=this['_outerCone'+'AngleCos'],_0x2d66ea=this['_node'];zl['copy'](_0x2d66ea['up']),_0x4588b2>-0x1f8f*-0x1+-0x49d*-0x7+-0x3fad?(_0x49c185['radius']=_0x5cd383*this['_outerCone'+'AngleSin'],zl['mulScalar'](-_0x5cd383*_0xe7cc28)):(_0x49c185['radius']=_0x5cd383/((-0xf1c+-0x1c6+-0xbc*-0x17)*_0xe7cc28),zl['mulScalar'](-_0x49c185['radius'])),_0x49c185['center']['add2'](_0x2d66ea['getPositio'+'n'](),zl);}else this['_type']===Ye&&(_0x49c185['center']=this['_node']['getPositio'+'n'](),_0x49c185['radius']=this['attenuatio'+'nEnd']);}['getBoundin'+'gBox'](_0x3dffc0){if(this['_type']===Ke){const _0x1ee248=this['attenuatio'+'nEnd'],_0x877f76=this['_outerCone'+'Angle'],_0x404c8d=this['_node'],_0x12d9df=Math['abs'](Math['sin'](_0x877f76*Y['DEG_TO_RAD'])*_0x1ee248);_0x3dffc0['center']['set'](0x24*-0x6c+0x1ce6+0x27*-0x5a,-_0x1ee248*(-0x2673+-0x1564+0x3bd7+0.5),-0x2676*0x1+0x1*-0x257a+0x4bf0),_0x3dffc0['halfExtent'+'s']['set'](_0x12d9df,_0x1ee248*(-0x2317+-0x9b1+-0x4*-0xb32+0.5),_0x12d9df),_0x3dffc0['setFromTra'+'nsformedAa'+'bb'](_0x3dffc0,_0x404c8d['getWorldTr'+'ansform'](),!(-0x11f*0xd+-0x142f*0x1+-0x1*-0x22c2));}else this['_type']===Ye&&(_0x3dffc0['center']['copy'](this['_node']['getPositio'+'n']()),_0x3dffc0['halfExtent'+'s']['set'](this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd']));}['_updateSha'+'dowBias'](){if(this['_type']===Ye&&!this['clusteredL'+'ighting'])this['shadowDept'+'hState']['depthBias']=0x10bd+0x251*-0xc+0x95*0x13,this['shadowDept'+'hState']['depthBiasS'+'lope']=-0x21ae+0x26ae+-0x280*0x2;else{const _0x144404=this['shadowBias']*-(-0x17e*0x8+-0x9*-0x2fd+-0xb0d);this['shadowDept'+'hState']['depthBias']=_0x144404,this['shadowDept'+'hState']['depthBiasS'+'lope']=_0x144404;}}['_updateLin'+'earColor'](){let _0x20d247=this['_intensity'];this['_usePhysic'+'alUnits']&&(_0x20d247=this['_luminance']/Ho['getLightUn'+'itConversi'+'on'](this['_type'],this['_outerCone'+'Angle']*Y['DEG_TO_RAD'],this['_innerCone'+'Angle']*Y['DEG_TO_RAD']));const _0x3ba603=this['_color'],_0x37354e=this['_colorLine'+'ar'];_0x20d247>=-0xd*0x282+0x5*0x6de+-0x1*0x1bb?qn['linear'](_0x3ba603)['mulScalar'](_0x20d247):qn['copy'](_0x3ba603)['mulScalar'](_0x20d247)['linear'](),_0x37354e[-0x19*0xf1+-0x1f36+0xaf3*0x5]=qn['r'],_0x37354e[-0x1bb*-0xa+-0x11*-0x1ca+0x7*-0x6d1]=qn['g'],_0x37354e[0x1d1a+-0x25b4+0x89c]=qn['b'],this['updateClus'+'terData'](!(-0x24d7*-0x1+-0x1755+-0xd82));}['setColor'](){arguments['length']===0x248+-0xcb3+0xa6c?this['_color']['set'](arguments[-0x3*0x829+-0x7d1+0x204c]['r'],arguments[0x21bb+0x1dba+-0x3f75]['g'],arguments[0x1cc*-0x8+0x2305+-0x14a5]['b']):arguments['length']===0x2443+-0x10d3+-0x1*0x136d&&this['_color']['set'](arguments[-0x1*-0x1fa3+0x19*0xc1+-0x327c],arguments[0xdba+0x22df+-0x3098],arguments[-0x1f46+0x1*0x22f3+-0x3ab]),this['_updateLin'+'earColor']();}['layersDirt'+'y'](){this['layers']['forEach'](_0x1fd17c=>{_0x1fd17c['hasLight'](this)&&_0x1fd17c['markLights'+'Dirty']();});}['updateKey'](){let _0x4d90c9=this['_type']<<0x19*-0x5c+0x35*-0x25+0x10c2|this['_shadowTyp'+'e']<<0x1abd+-0x1b30+0x7*0x14|this['_falloffMo'+'de']<<0x2338+-0x462+-0x1ebf|(this['_normalOff'+'setBias']!==-0x1c6b+-0xe27*-0x1+0xe44?0x761*-0x1+0x1ebb*-0x1+0x261d:-0xfc0+-0x31*0x32+-0x1952*-0x1)<<-0x1*0x1871+-0x1*0x2623+0x3eaa|(this['_cookie']?-0xdf2+0x1fcc+-0x11d9:-0x16a9+-0x1a23+0x411*0xc)<<-0x196b+-0x1551*-0x1+0x42f|(this['_cookieFal'+'loff']?0x1*-0xb9b+-0x163c*0x1+-0x13*-0x1c8:0x1*-0x1985+-0x11*-0x18e+-0xe9)<<-0x636*0x4+-0x26c7+-0x1*-0x3fb3|kd[this['_cookieCha'+'nnel']['charAt'](-0x6b9*0x3+-0x1*-0x1e07+-0x9dc)]<<0xcc*0x17+0x4f*0x77+-0x36fb|(this['_cookieTra'+'nsform']?-0x1214*-0x1+0x1*0x195b+-0x2b6e:-0x8c9+0x20dc+-0x1813)<<-0x1190*0x2+-0x1e62+-0x2*-0x20c7|this['_shape']<<-0x4*0x1fb+0x239f+-0x1ba9|(this['numCascade'+'s']>0xa96+-0xb*-0x103+-0x15b7?-0x292+-0x12b0+0x1543*0x1:0xfbb+-0xf*0x10b+-0x16)<<0x6*0x33f+-0x1367+0x1*-0xa|(this['_cascadeBl'+'end']>0x79f+0x67*0x5d+-0x2d0a?0x1*0x1794+0x270b+-0x3e9e:0xc*0x331+0x3*0xb3b+-0x1*0x47fd)<<0x322+-0x3*0xa4a+0x4*0x6f1|(this['affectSpec'+'ularity']?-0xf9e+0x9*-0x2f9+0x2a60:-0x4*0x674+-0x8*0x305+0x3d8*0xd)<<-0x541+0x22c+0x31c*0x1|this['mask']<<-0x50b*-0x7+0xd17+-0x305e|(this['_castShado'+'ws']?0x12b4+0x4*0x7bd+-0x31a7:-0x17f0+0x1dfa+0x60a*-0x1)<<0xa30*0x1+-0x1f5a+0x27*0x8b;this['_cookieCha'+'nnel']['length']===0x18da+-0x3*0xaab+0x72a&&(_0x4d90c9|=kd[this['_cookieCha'+'nnel']['charAt'](0x1*0x2642+0x33b+-0x24*0x127)]<<0x18e2+0x17f*-0x2+-0x15d4,_0x4d90c9|=kd[this['_cookieCha'+'nnel']['charAt'](0x18a4+-0x230a+0xa68)]<<0x20af+-0xb77*0x1+-0x152a),_0x4d90c9!==this['key']&&this['layersDirt'+'y'](),this['key']=_0x4d90c9;}['updateClus'+'teredFlags'](){const _0x4f5a6e=!!(this['mask']&ds),_0x5e345c=!!(this['mask']&si);this['clusteredF'+'lags']=(this['type']===Ke?0x1112+0x2148+-0x1*0x3259:0x20bb*-0x1+-0x2199+0x4254)<<-0x1774+0x1b59+0x3c7*-0x1|(this['_shape']&0xc*-0xb+-0x600+0x687)<<0x1353+-0x1d0*0xa+-0x117|(this['_falloffMo'+'de']&0xa6*-0x32+0x19*-0x95+0x2efa)<<0x102f+0x9*-0xc1+-0x94b|(vA[this['_cookieCha'+'nnel']]??0xbbf+0x6c5+0x1e*-0x9e)<<0x1*-0x1ffb+-0x1*-0x16e5+0x92d|(_0x4f5a6e?-0x1791+-0x157+0x18e9*0x1:0x2*-0x82f+-0x170f*0x1+-0x276d*-0x1)<<-0x7f*0x39+0x1f79+-0x2*0x18e|(_0x5e345c?-0x2*-0x113d+0x1bc2+0x1*-0x3e3b:-0x21af+0x81*-0x25+0xc5*0x44)<<0x1212*-0x2+0x259*0xf+0x56*0x3;}['getCluster'+'edFlags'](_0x16aaf0,_0x13001c){return this['clusteredF'+'lags']|((_0x16aaf0?Math['floor'](this['shadowInte'+'nsity']*(0x166*-0x7+0x8aa+-0x21f*-0x1)):-0x2*-0x3ab+-0x838*-0x2+-0x2*0xbe3)&-0x1097*0x1+-0x459*-0x3+0x48b)<<-0x1*-0xc08+0xc5*-0x1+-0xb43|((_0x13001c?Math['floor'](this['cookieInte'+'nsity']*(-0x2*0x208+0xc*0x1c4+0x1021*-0x1)):0x28*0x77+0x5*-0x5f9+0xb45)&-0x886+0x2541+-0x1bbc*0x1)<<-0x5*0x3a+-0x1*0xa57+0x24d*0x5;}['updateClus'+'terData'](_0x223067,_0x4af2d0){const {clusteredData16:_0x11640a}=this,_0x280b8f=mn['float2Half'];_0x223067&&(_0x11640a[0x1*-0x1858+-0x6aa+0x1f02]=_0x280b8f(Y['clamp'](this['_colorLine'+'ar'][-0x1701+-0x1*-0x10ba+-0x1*-0x647]/fh,-0x1b1f+-0x79+0x1b98,0x5fc*-0x22+-0x131d*0x1+0x37*0x8b3)),_0x11640a[-0x66b+0x1*0xb0c+-0x4*0x128]=_0x280b8f(Y['clamp'](this['_colorLine'+'ar'][-0x1bf8+-0x1d*-0x1b+0x84e*0x3]/fh,0xf75+0x195f+-0x28d4,0x12896+-0x12745+0xfe8f*0x1)),_0x11640a[0x4f*0x71+0x2518+-0x47f5]=_0x280b8f(Y['clamp'](this['_colorLine'+'ar'][-0x5ff+0x197e+0x67f*-0x3]/fh,-0x9e1+0x17*0x18f+-0x33f*0x8,0xe*0xd0f+0xd65d+0x19*-0x5a7))),_0x4af2d0&&(_0x11640a[-0x158*0xb+0x1429+0x55d*-0x1]=_0x280b8f(this['_innerCone'+'AngleCos']),_0x11640a[-0x1*-0x14c6+0x2*0x3bb+-0xe9*0x1f]=_0x280b8f(this['_outerCone'+'AngleCos']));}}class Fy{constructor(_0x349e56,_0x224b33,_0x58151a){h(this,'_areaLight'+'sEnabled',!(-0x19*0x17b+-0x31*0x4+-0x1a*-0x174)),h(this,'_cells',new I(-0x26d5+0x1*-0x1c96+-0x1*-0x4375,-0x47*-0x40+-0x21e8+0x1*0x102b,0xae4*0x1+-0xf*0x156+0x93*0x10)),h(this,'_maxLights'+'PerCell',-0x51f*-0x5+0x23be+-0x3c5a),h(this,'_shadowsEn'+'abled',!(-0x4cf*-0x1+-0x1e7f+-0x18*-0x112)),h(this,'_shadowTyp'+'e',ks),h(this,'_shadowAtl'+'asResoluti'+'on',-0x401*-0x1+-0x11ee+0x74f*0x3),h(this,'_cookiesEn'+'abled',!(-0x11d8+0x28*-0x4c+0x1db9)),h(this,'_cookieAtl'+'asResoluti'+'on',0x162d+0x2*-0xb27+-0x821*-0x1),h(this,'debugLayer'),h(this,'atlasSplit',null),(this['_supportsA'+'reaLights']=_0x349e56,this['_maxTextur'+'eSize']=_0x224b33,this['_dirtyLigh'+'tsFnc']=_0x58151a);}['applySetti'+'ngs'](_0x5caf7e){this['shadowsEna'+'bled']=_0x5caf7e['lightingSh'+'adowsEnabl'+'ed']??this['shadowsEna'+'bled'],this['cookiesEna'+'bled']=_0x5caf7e['lightingCo'+'okiesEnabl'+'ed']??this['cookiesEna'+'bled'],this['areaLights'+'Enabled']=_0x5caf7e['lightingAr'+'eaLightsEn'+'abled']??this['areaLights'+'Enabled'],this['shadowAtla'+'sResolutio'+'n']=_0x5caf7e['lightingSh'+'adowAtlasR'+'esolution']??this['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x5caf7e['lightingCo'+'okieAtlasR'+'esolution']??this['cookieAtla'+'sResolutio'+'n'],this['maxLightsP'+'erCell']=_0x5caf7e['lightingMa'+'xLightsPer'+'Cell']??this['maxLightsP'+'erCell'],this['shadowType']=_0x5caf7e['lightingSh'+'adowType']??this['shadowType'],_0x5caf7e['lightingCe'+'lls']&&(this['cells']=new I(_0x5caf7e['lightingCe'+'lls']));}set['cells'](_0x15c0c7){this['_cells']['copy'](_0x15c0c7);}get['cells'](){return this['_cells'];}set['maxLightsP'+'erCell'](_0x53ae87){this['_maxLights'+'PerCell']=Y['clamp'](_0x53ae87,-0x240f+0x24a4+-0x1*0x94,0x38c+0x724+0x1*-0x9b1);}get['maxLightsP'+'erCell'](){return this['_maxLights'+'PerCell'];}set['cookieAtla'+'sResolutio'+'n'](_0x590870){this['_cookieAtl'+'asResoluti'+'on']=Y['clamp'](_0x590870,-0x1ec*0x13+0x1a23+0xa81,this['_maxTextur'+'eSize']);}get['cookieAtla'+'sResolutio'+'n'](){return this['_cookieAtl'+'asResoluti'+'on'];}set['shadowAtla'+'sResolutio'+'n'](_0x312aa6){this['_shadowAtl'+'asResoluti'+'on']=Y['clamp'](_0x312aa6,-0xbd7+0xaa6*0x2+0x955*-0x1,this['_maxTextur'+'eSize']);}get['shadowAtla'+'sResolutio'+'n'](){return this['_shadowAtl'+'asResoluti'+'on'];}set['shadowType'](_0x3a1ae6){this['_shadowTyp'+'e']!==_0x3a1ae6&&(this['_shadowTyp'+'e']=_0x3a1ae6,this['_dirtyLigh'+'tsFnc']());}get['shadowType'](){return this['_shadowTyp'+'e'];}set['cookiesEna'+'bled'](_0x288e4b){this['_cookiesEn'+'abled']!==_0x288e4b&&(this['_cookiesEn'+'abled']=_0x288e4b,this['_dirtyLigh'+'tsFnc']());}get['cookiesEna'+'bled'](){return this['_cookiesEn'+'abled'];}set['areaLights'+'Enabled'](_0x226681){this['_supportsA'+'reaLights']&&this['_areaLight'+'sEnabled']!==_0x226681&&(this['_areaLight'+'sEnabled']=_0x226681,this['_dirtyLigh'+'tsFnc']());}get['areaLights'+'Enabled'](){return this['_areaLight'+'sEnabled'];}set['shadowsEna'+'bled'](_0x2db78f){this['_shadowsEn'+'abled']!==_0x2db78f&&(this['_shadowsEn'+'abled']=_0x2db78f,this['_dirtyLigh'+'tsFnc']());}get['shadowsEna'+'bled'](){return this['_shadowsEn'+'abled'];}}class oa{constructor(_0x31da15){this['morph']=_0x31da15,_0x31da15['incRefCoun'+'t'](),this['device']=_0x31da15['device'];const _0x3575d4=_0x31da15['_targets']['length'];this['shader']=this['_createSha'+'der'](_0x3575d4),this['_weights']=[],this['_weightMap']=new Map();for(let _0x12a95f=0xc9a+-0x1*-0x160e+-0x22a8;_0x12a95f<_0x31da15['_targets']['length'];_0x12a95f++){const _0x37d64d=_0x31da15['_targets'][_0x12a95f];_0x37d64d['name']&&this['_weightMap']['set'](_0x37d64d['name'],_0x12a95f),this['setWeight'](_0x12a95f,_0x37d64d['defaultWei'+'ght']);}this['_shaderMor'+'phWeights']=new Float32Array(_0x3575d4),this['_shaderMor'+'phIndex']=new Uint32Array(_0x3575d4);const _0x4cba39=(_0xcc0ea4,_0x19d94f)=>(this[_0x19d94f]=_0x31da15['_createTex'+'ture'](_0xcc0ea4,_0x31da15['_renderTex'+'tureFormat']),new vt({'colorBuffer':this[_0x19d94f],'depth':!(0x94d+0x17*0x154+-0x14*0x1fe)}));_0x31da15['morphPosit'+'ions']&&(this['rtPosition'+'s']=_0x4cba39('MorphRTPos','texturePos'+'itions')),_0x31da15['morphNorma'+'ls']&&(this['rtNormals']=_0x4cba39('MorphRTNrm','textureNor'+'mals')),this['_texturePa'+'rams']=new Float32Array([_0x31da15['morphTextu'+'reWidth'],_0x31da15['morphTextu'+'reHeight']]);const _0x287b6e=_0x31da15['aabb']['halfExtent'+'s'];this['_aabbSize']=new Float32Array([_0x287b6e['x']*(-0x257f+0x35*0xb0+0x19*0xb),_0x287b6e['y']*(-0x1*0x1201+0x76b+0x76*0x17),_0x287b6e['z']*(0x9*-0x3ef+0x207+0x2164)]);const _0xe01199=_0x31da15['aabb']['getMin']();this['_aabbMin']=new Float32Array([_0xe01199['x']*(-0xb34+-0x3cb+0xf01),_0xe01199['y']*(-0x25ff+-0xf*0x4b+0x2a66),_0xe01199['z']*(0x2*0x98f+-0xd9*-0x11+0x2185*-0x1)]),this['_aabbNrmSi'+'ze']=new Float32Array([0x1*0x1143+0x19de*0x1+-0x1*0x2b1f,-0x1ccc+-0x2*0xbfb+-0x266*-0x16,-0x23a4+-0x1*-0xddf+0x15c7]),this['_aabbNrmMi'+'n']=new Float32Array([-(-0x3*0x211+-0x6a3+0x1*0xcd7),-(0x97*0x11+-0x1344+0x93e),-(0x955+-0x1d83+0x142f)]),this['aabbSizeId']=this['device']['scope']['resolve']('aabbSize'),this['aabbMinId']=this['device']['scope']['resolve']('aabbMin'),this['morphTextu'+'reId']=this['device']['scope']['resolve']('morphTextu'+'re'),this['morphFacto'+'r']=this['device']['scope']['resolve']('morphFacto'+'r[0]'),this['morphIndex']=this['device']['scope']['resolve']('morphIndex'+'[0]'),this['countId']=this['device']['scope']['resolve']('count'),this['zeroTextur'+'es']=!(0x2084+0xffd+-0x3080);}['destroy'](){var _0x5314e3,_0x55de56,_0x453f59,_0xf7e4a;this['shader']=null;const _0x5d92fb=this['morph'];_0x5d92fb&&(this['morph']=null,_0x5d92fb['decRefCoun'+'t'](),_0x5d92fb['refCount']<-0x71f*0x5+0x12c5+-0x59d*-0x3&&_0x5d92fb['destroy']()),(_0x5314e3=this['rtPosition'+'s'])==null||_0x5314e3['destroy'](),this['rtPosition'+'s']=null,(_0x55de56=this['texturePos'+'itions'])==null||_0x55de56['destroy'](),this['texturePos'+'itions']=null,(_0x453f59=this['rtNormals'])==null||_0x453f59['destroy'](),this['rtNormals']=null,(_0xf7e4a=this['textureNor'+'mals'])==null||_0xf7e4a['destroy'](),this['textureNor'+'mals']=null;}['clone'](){return new oa(this['morph']);}['_getWeight'+'Index'](_0x3d1206){if(typeof _0x3d1206=='string'){const _0x2f3e08=this['_weightMap']['get'](_0x3d1206);return _0x2f3e08===void(-0xa*-0x199+-0x2ad+-0xd4d)&&M['errorOnce']('Cannot\x20fin'+'d\x20morph\x20ta'+'rget\x20with\x20'+'name:\x20'+_0x3d1206+'.'),_0x2f3e08;}return _0x3d1206;}['getWeight'](_0x4f3fa5){const _0x44c5a4=this['_getWeight'+'Index'](_0x4f3fa5);return this['_weights'][_0x44c5a4];}['setWeight'](_0x4fe9e1,_0x25c752){const _0x48cbc4=this['_getWeight'+'Index'](_0x4fe9e1);M['assert'](_0x48cbc4>=0x1a*0x133+-0xca2+-0x128c&&_0x48cbc4<this['morph']['_targets']['length']),this['_weights'][_0x48cbc4]=_0x25c752,this['_dirty']=!(0x1*0x1a15+0x9d*0x31+0x3*-0x12b6);}['_createSha'+'der'](_0x180e5f){const _0x5ac4f1=new Map();_0x5ac4f1['set']('{MORPH_TEX'+'TURE_MAX_C'+'OUNT}',_0x180e5f),this['morph']['intRenderF'+'ormat']&&_0x5ac4f1['set']('MORPH_INT','');const _0x732fff=this['morph']['intRenderF'+'ormat']?'uvec4':'vec4';return Ut['createShad'+'er'](this['device'],{'uniqueName':'TextureMor'+'phShader_'+_0x180e5f+'-'+(this['morph']['intRenderF'+'ormat']?'int':'float'),'attributes':{'vertex_position':Pe},'vertexChunk':'morphVS','fragmentChunk':'morphPS','fragmentDefines':_0x5ac4f1,'fragmentOutputTypes':[_0x732fff]});}['_updateTex'+'tureRender'+'Target'](_0x4bb9f4,_0x3ad279,_0x1a123a){const {morph:_0x276f57,device:_0xa7de6b}=this;this['setAabbUni'+'forms'](_0x1a123a),this['morphTextu'+'reId']['setValue'](_0x1a123a?_0x276f57['targetsTex'+'turePositi'+'ons']:_0x276f57['targetsTex'+'tureNormal'+'s']),_0xa7de6b['setBlendSt'+'ate'](Ct['NOBLEND']),this['countId']['setValue'](_0x3ad279),this['morphFacto'+'r']['setValue'](this['_shaderMor'+'phWeights']),this['morphIndex']['setValue'](this['_shaderMor'+'phIndex']),fr(_0xa7de6b,_0x4bb9f4,this['shader']);}['_updateTex'+'tureMorph'](_0x3c9423){const _0x30b54a=this['device'];Q['pushGpuMar'+'ker'](_0x30b54a,'MorphUpdat'+'e'),(_0x3c9423>0xb03+0xdd5+-0x18d8||!this['zeroTextur'+'es'])&&(this['rtPosition'+'s']&&this['_updateTex'+'tureRender'+'Target'](this['rtPosition'+'s'],_0x3c9423,!(-0x1*0x979+-0x278+0x3*0x3fb)),this['rtNormals']&&this['_updateTex'+'tureRender'+'Target'](this['rtNormals'],_0x3c9423,!(-0x95f*0x1+0x48f*-0x2+0x6*0x315)),this['zeroTextur'+'es']=_0x3c9423===0x1*-0x1b83+0x1343+0x840),Q['popGpuMark'+'er'](_0x30b54a);}['setAabbUni'+'forms'](_0x98fd31=!(0x24b3*0x1+-0x8b4*0x2+-0x1*0x134b)){this['aabbSizeId']['setValue'](_0x98fd31?this['_aabbSize']:this['_aabbNrmSi'+'ze']),this['aabbMinId']['setValue'](_0x98fd31?this['_aabbMin']:this['_aabbNrmMi'+'n']);}['prepareRen'+'dering'](_0x1b562b){this['setAabbUni'+'forms']();}['update'](){this['_dirty']=!(0x24ec+0x1*-0x95c+-0x1b8f);const _0x2ebfbf=this['morph']['_targets'],_0x27d939=0x282+-0x7a*-0x6+-0x55e+0.00001,_0x6b489c=this['_shaderMor'+'phWeights'],_0x1dd3a7=this['_shaderMor'+'phIndex'];let _0x3aab01=0x31*0xb6+0x1*0x2435+-0x470b;for(let _0x373ff4=0x14ce+0x2*0xde6+-0x309a;_0x373ff4<_0x2ebfbf['length'];_0x373ff4++)Math['abs'](this['getWeight'](_0x373ff4))>_0x27d939&&(_0x6b489c[_0x3aab01]=this['getWeight'](_0x373ff4),_0x1dd3a7[_0x3aab01]=_0x373ff4,_0x3aab01++);this['_updateTex'+'tureMorph'](_0x3aab01);}}class $i{constructor(){h(this,'graph',null),h(this,'meshInstan'+'ces',[]),h(this,'skinInstan'+'ces',[]),h(this,'morphInsta'+'nces',[]),(this['cameras']=[],this['lights']=[],this['_shadersVe'+'rsion']=-0x15d*-0xf+0x2a*0xde+0x17*-0x279,this['_immutable']=!(-0x595+-0x15*0x18d+0x2627));}['getGraph'](){return this['graph'];}['setGraph'](_0x53b9b2){this['graph']=_0x53b9b2;}['getCameras'](){return this['cameras'];}['setCameras'](_0xa1cf33){this['cameras']=_0xa1cf33;}['getLights'](){return this['lights'];}['setLights'](_0x583e49){this['lights']=_0x583e49;}['getMateria'+'ls'](){const _0xfbea95=[];for(let _0x4081e9=0x27*-0xea+-0xa*-0x1f3+0x1028;_0x4081e9<this['meshInstan'+'ces']['length'];_0x4081e9++){const _0x1545f9=this['meshInstan'+'ces'][_0x4081e9];_0xfbea95['indexOf'](_0x1545f9['material'])===-(0x2c1+0x205e+-0x231e)&&_0xfbea95['push'](_0x1545f9['material']);}return _0xfbea95;}['clone'](){const _0x4a3b05=[],_0x2ad3af=[],_0x4b3d3d=function(_0x3effb9){const _0x163328=_0x3effb9['clone']();_0x4a3b05['push'](_0x3effb9),_0x2ad3af['push'](_0x163328);for(let _0x41f908=-0x5dd+-0x158d+0x1b6a;_0x41f908<_0x3effb9['_children']['length'];_0x41f908++)_0x163328['addChild'](_0x4b3d3d(_0x3effb9['_children'][_0x41f908]));return _0x163328;},_0x418b6f=_0x4b3d3d(this['graph']),_0x5e3c78=[],_0x3883be=[],_0x5a8091=[];for(let _0x4b29f3=-0x61*0x3e+-0xafd+-0x1*-0x227b;_0x4b29f3<this['skinInstan'+'ces']['length'];_0x4b29f3++){const _0x769875=this['skinInstan'+'ces'][_0x4b29f3]['skin'],_0x3ab765=new hl(_0x769875),_0x262c63=[];for(let _0x5b2f2d=-0x238b+-0x57d+-0x34*-0xca;_0x5b2f2d<_0x769875['boneNames']['length'];_0x5b2f2d++){const _0x2169f2=_0x769875['boneNames'][_0x5b2f2d],_0x573427=_0x418b6f['findByName'](_0x2169f2);_0x262c63['push'](_0x573427);}_0x3ab765['bones']=_0x262c63,_0x3883be['push'](_0x3ab765);}for(let _0x599199=0x8*0x43a+0x11*0x233+-0x4733;_0x599199<this['morphInsta'+'nces']['length'];_0x599199++){const _0x24b1d5=this['morphInsta'+'nces'][_0x599199]['morph'],_0x41c5e2=new oa(_0x24b1d5);_0x5a8091['push'](_0x41c5e2);}for(let _0x378cb4=0x1c5f*-0x1+-0x95+0x1cf4*0x1;_0x378cb4<this['meshInstan'+'ces']['length'];_0x378cb4++){const _0x52016a=this['meshInstan'+'ces'][_0x378cb4],_0x55e0d9=_0x4a3b05['indexOf'](_0x52016a['node']),_0x3c83e8=new We(_0x52016a['mesh'],_0x52016a['material'],_0x2ad3af[_0x55e0d9]);if(_0x52016a['skinInstan'+'ce']){const _0x5eabd2=this['skinInstan'+'ces']['indexOf'](_0x52016a['skinInstan'+'ce']);_0x3c83e8['skinInstan'+'ce']=_0x3883be[_0x5eabd2];}if(_0x52016a['morphInsta'+'nce']){const _0x3f40ff=this['morphInsta'+'nces']['indexOf'](_0x52016a['morphInsta'+'nce']);_0x3c83e8['morphInsta'+'nce']=_0x5a8091[_0x3f40ff];}_0x5e3c78['push'](_0x3c83e8);}const _0x57fe37=new $i();return _0x57fe37['graph']=_0x418b6f,_0x57fe37['meshInstan'+'ces']=_0x5e3c78,_0x57fe37['skinInstan'+'ces']=_0x3883be,_0x57fe37['morphInsta'+'nces']=_0x5a8091,_0x57fe37['getGraph']()['syncHierar'+'chy'](),_0x57fe37;}['destroy'](){const _0x4ae2a6=this['meshInstan'+'ces'];for(let _0x2eca59=0x171b+0x14bf*0x1+-0x2bda;_0x2eca59<_0x4ae2a6['length'];_0x2eca59++)_0x4ae2a6[_0x2eca59]['destroy']();this['meshInstan'+'ces']['length']=0x19*-0x129+0x33d*-0x1+0x203e;}['generateWi'+'reframe'](){We['_prepareRe'+'nderStyleF'+'orArray'](this['meshInstan'+'ces'],Ir);}}class Ny extends jc{constructor(_0x4a106f,_0x11d08d,{preferHighPrecision:_0x3d1b6f=!(-0x10b1*-0x1+-0xad*-0x25+-0x1*0x29b1)}={}){super(),h(this,'_aabb'),h(this,'preferHigh'+'Precision'),(M['assert'](_0x11d08d,'Morph\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x11d08d);const _0x4273f3=_0x11d08d;this['preferHigh'+'Precision']=_0x3d1b6f,M['assert'](_0x4a106f['every'](_0x3b2aa1=>!_0x3b2aa1['used']),'A\x20specifie'+'d\x20target\x20h'+'as\x20already'+'\x20been\x20used'+'\x20to\x20create'+'\x20a\x20Morph,\x20'+'use\x20its\x20cl'+'one\x20instea'+'d.'),this['_targets']=_0x4a106f['slice']();const _0x4ea08e=_0x4273f3['textureHal'+'fFloatRend'+'erable']?at:void(0xfa3*-0x2+-0xa4+0x1fea),_0xc9c292=_0x4273f3['textureFlo'+'atRenderab'+'le']?Bt:void(0x1a4d+-0x64a+-0x1403*0x1);this['_renderTex'+'tureFormat']=this['preferHigh'+'Precision']?_0xc9c292??_0x4ea08e:_0x4ea08e??_0xc9c292,this['_renderTex'+'tureFormat']=this['_renderTex'+'tureFormat']??Dc,this['intRenderF'+'ormat']=Ya(this['_renderTex'+'tureFormat']),this['_textureFo'+'rmat']=this['preferHigh'+'Precision']?Bt:at,this['_init'](),this['_updateMor'+'phFlags']();}['destroy'](){var _0x2ab569,_0x58b35f,_0x3d4524;(_0x2ab569=this['vertexBuff'+'erIds'])==null||_0x2ab569['destroy'](),this['vertexBuff'+'erIds']=null,(_0x58b35f=this['targetsTex'+'turePositi'+'ons'])==null||_0x58b35f['destroy'](),this['targetsTex'+'turePositi'+'ons']=null,(_0x3d4524=this['targetsTex'+'tureNormal'+'s'])==null||_0x3d4524['destroy'](),this['targetsTex'+'tureNormal'+'s']=null;}get['aabb'](){if(!this['_aabb']){const _0x512bfe=new I(),_0x1a2aac=new I();for(let _0x519035=-0x246a+-0x1*-0x1037+0x1433;_0x519035<this['_targets']['length'];_0x519035++){const _0x523b16=this['_targets'][_0x519035]['aabb'];_0x512bfe['min'](_0x523b16['getMin']()),_0x1a2aac['max'](_0x523b16['getMax']());}this['_aabb']=new Ie(),this['_aabb']['setMinMax'](_0x512bfe,_0x1a2aac);}return this['_aabb'];}get['morphPosit'+'ions'](){return this['_morphPosi'+'tions'];}get['morphNorma'+'ls'](){return this['_morphNorm'+'als'];}['_init'](){this['_initTextu'+'reBased']();for(let _0x30c8d1=0x4e6+-0x2*-0xfd3+-0x1246*0x2;_0x30c8d1<this['_targets']['length'];_0x30c8d1++)this['_targets'][_0x30c8d1]['_postInit']();}['_findSpars'+'eSet'](_0x2edcc5,_0xb2afe9,_0x13dec0){let _0x5e962b=-0xe3f+0x1df*-0x5+0x179b;const _0x2c1d44=_0x2edcc5[0x2297*0x1+0xc5e+-0x2ef5]['length'];for(let _0x3469e8=0x1612+0x1bdb+0x1*-0x31ed;_0x3469e8<_0x2c1d44;_0x3469e8+=-0xc3+0x26ae+-0x8*0x4bd){let _0x3ecaac=!(-0x1709+-0x88b+-0x21b*-0xf);for(let _0x5d01f1=-0x1*-0x1dd+-0x16a*-0xd+-0x1*0x143f;_0x5d01f1<_0x2edcc5['length'];_0x5d01f1++){const _0x185936=_0x2edcc5[_0x5d01f1];if(_0x185936[_0x3469e8]!==0x28d*-0xd+0x988+0x17a1*0x1||_0x185936[_0x3469e8+(-0xc4*0x3+-0x742*0x1+0x98f)]!==-0x9d+0x1*0xf62+-0xec5*0x1||_0x185936[_0x3469e8+(0x5*-0x257+0x5*0x3c7+0x1*-0x72e)]!==0x10aa*-0x2+0xf7f*-0x2+-0x4052*-0x1){_0x3ecaac=!(0xc28+-0x1cc3+0x589*0x3);break;}}_0x3ecaac?(_0xb2afe9['push'](_0x5e962b),_0x13dec0['push'](_0x3469e8/(0x1ae3*0x1+-0x5a*0x2+-0x86*0x32)),_0x5e962b++):_0xb2afe9['push'](0xfae*0x1+-0x18fe+0x950);}return _0x5e962b;}['_initTextu'+'reBased'](){const _0x3ebc94=[],_0x13c1f4=[],_0x496c5e=this['_targets'];for(let _0xc1cdd6=0x3*0xa9e+0xed6+-0x53*0x90;_0xc1cdd6<_0x496c5e['length'];_0xc1cdd6++){const _0x4b26c9=_0x496c5e[_0xc1cdd6];_0x4b26c9['options']['deltaPosit'+'ions']&&(_0x3ebc94['push'](_0x4b26c9['options']['deltaPosit'+'ions']),_0x13c1f4['push'](!(-0x2*0xcb1+-0x5b7*0x1+0x1f19))),_0x4b26c9['options']['deltaNorma'+'ls']&&(_0x3ebc94['push'](_0x4b26c9['options']['deltaNorma'+'ls']),_0x13c1f4['push'](!(0x4*-0x997+0xc73*0x1+0x3e*0x6b)));}const _0x1d4843=[],_0x675b97=[],_0x1e442e=this['_findSpars'+'eSet'](_0x3ebc94,_0x1d4843,_0x675b97),_0x2c8722=this['device']['maxTexture'+'Size'];let _0x478fda=Math['ceil'](Math['sqrt'](_0x1e442e));_0x478fda=Math['min'](_0x478fda,_0x2c8722);const _0x370fdd=Math['ceil'](_0x1e442e/_0x478fda);if(_0x370fdd>_0x2c8722){M['warnOnce']('Morph\x20targ'+'et\x20data\x20is'+'\x20too\x20large'+'\x20to\x20fit\x20in'+'to\x20a\x20textu'+'re\x20array.\x20'+'Required\x20t'+'exture\x20siz'+'e:\x20'+_0x478fda+'x'+_0x370fdd+(',\x20max\x20text'+'ure\x20size:\x20')+_0x2c8722+'x'+_0x2c8722+'.');return;}this['morphTextu'+'reWidth']=_0x478fda,this['morphTextu'+'reHeight']=_0x370fdd;let _0x4ccad8=!(-0x1*-0xefd+0xe77+-0x1d73);const _0x3fdec6=mn['float2Half'];this['_textureFo'+'rmat']===at&&(_0x4ccad8=!(0x1*-0x25fa+0x1214+0x6*0x351));const _0x35bae3=[],_0x2b2d0a=[],_0x124ba6=_0x478fda*_0x370fdd*(-0x1a36+0x8f5*-0x3+0x3519);for(let _0x2b85eb=-0x2*-0x405+-0x15*0x13d+-0x5fd*-0x3;_0x2b85eb<_0x3ebc94['length'];_0x2b85eb++){const _0xb28fe5=_0x3ebc94[_0x2b85eb],_0x213ce8=this['_textureFo'+'rmat']===at?new Uint16Array(_0x124ba6):new Float32Array(_0x124ba6);if((_0x13c1f4[_0x2b85eb]?_0x35bae3:_0x2b2d0a)['push'](_0x213ce8),_0x4ccad8)for(let _0x24fc1a=-0xd*-0x10d+0x1c4+-0x1*0xf6d;_0x24fc1a<_0x675b97['length'];_0x24fc1a++){const _0x2a296c=_0x675b97[_0x24fc1a]*(-0x1054+-0x2d1*-0x5+0x242),_0x36ca86=_0x24fc1a*(0x1bbd+-0x3b5+-0x74*0x35)+(-0x1fcf+0x1e91+-0x1*-0x142);_0x213ce8[_0x36ca86]=_0x3fdec6(_0xb28fe5[_0x2a296c]),_0x213ce8[_0x36ca86+(0x101f*0x1+0x1*0xfb3+0x9*-0x389)]=_0x3fdec6(_0xb28fe5[_0x2a296c+(0xe72*0x1+-0x676*-0x2+-0x1b5d)]),_0x213ce8[_0x36ca86+(-0x10a0+0x514+0xb8e)]=_0x3fdec6(_0xb28fe5[_0x2a296c+(0x1236+0x10ab*-0x2+0xf22)]);}else for(let _0x1e1c82=0x1b*0x29+-0x49*0x25+-0x1*-0x63a;_0x1e1c82<_0x675b97['length'];_0x1e1c82++){const _0x4ea4b1=_0x675b97[_0x1e1c82]*(0x174*0x19+-0x18d6+0x1*-0xb7b),_0x23d290=_0x1e1c82*(-0xea9+-0x1b09+-0x29b6*-0x1)+(-0x3*0x6f1+0x20cc+-0xbf5);_0x213ce8[_0x23d290]=_0xb28fe5[_0x4ea4b1],_0x213ce8[_0x23d290+(-0x13e0+-0x24ae+0x388f)]=_0xb28fe5[_0x4ea4b1+(0xea3+0xaca+0xcb6*-0x2)],_0x213ce8[_0x23d290+(0xbff+-0x1107+-0xd7*-0x6)]=_0xb28fe5[_0x4ea4b1+(-0x15b8+-0x13a0+0x295a)];}}_0x35bae3['length']>0x357+0x3cd*-0x7+-0x1744*-0x1&&(this['targetsTex'+'turePositi'+'ons']=this['_createTex'+'ture']('MorphPosit'+'ionsTextur'+'e',this['_textureFo'+'rmat'],_0x496c5e['length'],[_0x35bae3]),this['targetsTex'+'turePositi'+'ons']['upload']()),_0x2b2d0a['length']>0x25f6*0x1+-0x21ac+-0x44a&&(this['targetsTex'+'tureNormal'+'s']=this['_createTex'+'ture']('MorphNorma'+'lsTexture',this['_textureFo'+'rmat'],_0x496c5e['length'],[_0x2b2d0a]),this['targetsTex'+'tureNormal'+'s']['upload']());const _0x2248c6=[{'semantic':_n,'components':0x1,'type':Do,'asInt':!(-0x1ac6+0x586+0x1540)}];return this['vertexBuff'+'erIds']=new xs(this['device'],new zt(this['device'],_0x2248c6,_0x1d4843['length']),_0x1d4843['length'],{'data':new Uint32Array(_0x1d4843)}),!(-0x64d+0x12bc*0x1+-0xc6f*0x1);}get['targets'](){return this['_targets'];}['_updateMor'+'phFlags'](){this['_morphPosi'+'tions']=!(-0x214d+0x59a+-0x2*-0xdda),this['_morphNorm'+'als']=!(-0x1*-0x2dd+0x248d+-0x39*0xb1);for(let _0xe4ffc9=0xb98*0x1+-0x26*-0xef+0x4b5*-0xa;_0xe4ffc9<this['_targets']['length'];_0xe4ffc9++){const _0x707065=this['_targets'][_0xe4ffc9];_0x707065['morphPosit'+'ions']&&(this['_morphPosi'+'tions']=!(0x13c+0x1c61+-0x1d9d)),_0x707065['morphNorma'+'ls']&&(this['_morphNorm'+'als']=!(0x13a+-0x29*0x2e+0x624));}}['_createTex'+'ture'](_0x38fdda,_0x5ee5ed,_0x5b936e,_0x3d693a){return new _e(this['device'],{'levels':_0x3d693a,'arrayLength':_0x5b936e,'width':this['morphTextu'+'reWidth'],'height':this['morphTextu'+'reHeight'],'format':_0x5ee5ed,'cubemap':!(0x1*-0xe08+0x19*0x92+-0x39),'mipmaps':!(-0x2634+0x1f*-0x59+0x30fc),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x38fdda});}}class ed{constructor(_0x3b70c4){h(this,'used',!(0x140f+-0xd*-0x2cf+-0x3891)),(M['assert'](arguments['length']===-0xcd9+0x154b+-0x871),this['options']=_0x3b70c4,this['_name']=_0x3b70c4['name'],this['_defaultWe'+'ight']=_0x3b70c4['defaultWei'+'ght']||-0x15f5+-0x1b80+0x3175,this['_aabb']=_0x3b70c4['aabb'],this['deltaPosit'+'ions']=_0x3b70c4['deltaPosit'+'ions'],this['morphPosit'+'ions']=!!_0x3b70c4['deltaPosit'+'ions'],this['morphNorma'+'ls']=!!_0x3b70c4['deltaNorma'+'ls']);}get['name'](){return this['_name'];}get['defaultWei'+'ght'](){return this['_defaultWe'+'ight'];}get['aabb'](){return this['_aabb']||(this['_aabb']=new Ie(),this['deltaPosit'+'ions']&&this['_aabb']['compute'](this['deltaPosit'+'ions'])),this['_aabb'];}['clone'](){return M['assert'](this['options'],'MorphTarge'+'t\x20cannot\x20b'+'e\x20cloned,\x20'+'was\x20it\x20cre'+'ated\x20with\x20'+'a\x20preserve'+'Data\x20optio'+'n?'),new ed(this['options']);}['_postInit'](){this['options']['preserveDa'+'ta']||(this['options']=null),this['used']=!(-0x25b2+0x65c*0x1+0x6*0x539);}}let _i,f_=-0x16a6*-0x1+0x2a7*0xd+-0x3920;const he=0x9ca+0x9e3+0x1*-0x13a9,Ud=new te(),Bd=new te(),$s=new I(),et=new I(),Cs=new I(),wa=new I(),Jt=new I(),ut=new I(),Ea=new I(),Aa=new I(),jn=new I(),u_=new I(),Rt=new I(),Vl=new I(),Tr=new I();function Ja(_0x528841){return _0x528841-Math['floor'](_0x528841);}function wA(_0x3ce3da){return Math['max'](Math['min'](_0x3ce3da,-0x81*0x1b+0x519*-0x7+0x314b),0x58*-0x17+-0x398+0xb80);}function zd(_0x3b43fa,_0x19060f){return _0x3b43fa-_0x19060f*Math['floor'](_0x3b43fa/_0x19060f);}function EA(_0x4abf39){let _0x52a121=Ja(_0x4abf39),_0x3fb9cb=Ja((0x1f*0xf2+-0x2085+0x9a*0x7)*_0x4abf39),_0x5755b2=Ja((-0x5a31+-0xdf33*-0x2+-0x1*0x6634)*_0x4abf39),_0x40d2d8=Ja((-0x542963*-0x13+-0x4f89e57+0xb6e1*0xb9d)*_0x4abf39);return _0x52a121-=_0x3fb9cb/(-0xe*-0x277+-0x2ee+-0x1e95),_0x3fb9cb-=_0x5755b2/(-0x85*0x47+0x259*-0x6+0x33f8),_0x5755b2-=_0x40d2d8/(0x3*0x281+-0x1*-0x1ac8+-0x10a6*0x2),_0x40d2d8-=_0x40d2d8/(-0x18db+0x1024+-0x16*-0x71),[_0x52a121,_0x3fb9cb,_0x5755b2,_0x40d2d8];}function Gl(_0x330ed7){let _0x2c9e4d=Ja(_0x330ed7),_0x31165f=Ja((-0x1*-0x389+0x1b71+-0x1dfb)*_0x330ed7);return _0x2c9e4d-=_0x31165f/(-0x316+-0x1*-0x237e+0x1*-0x1f69),_0x31165f-=_0x31165f/(0x865+0x77*0x34+0x1f92*-0x1),[_0x2c9e4d,_0x31165f];}class AA{constructor(_0x84c786){this['_emitter']=_0x84c786;}['calcSpawnP'+'osition'](_0x437cad,_0x4d5a88,_0x2d4c6e,_0x4de5af,_0x3d4c24){const _0x2da8f1=this['_emitter'],_0x14e285=Math['random'](),_0x30f52b=Math['random'](),_0x1f31a7=Math['random'](),_0x2a1039=Math['random']();if(_0x2da8f1['useCpu']&&(_0x437cad[_0x3d4c24*he+(0x2685+0x208e+-0x4713)+_0x2da8f1['numParticl'+'esPot']*(-0x70*0x40+0x1447+-0x7bb*-0x1)*he]=_0x14e285,_0x437cad[_0x3d4c24*he+(0x1*0xf47+0x2680+-0x35c6*0x1)+_0x2da8f1['numParticl'+'esPot']*(-0x5*0x3ca+0x1d*0x5e+0x84e)*he]=_0x30f52b,_0x437cad[_0x3d4c24*he+(-0xdfd*0x1+0x1d9e*0x1+-0xf9f)+_0x2da8f1['numParticl'+'esPot']*(0x1*-0xa81+-0x1c1*-0xb+-0x8*0x119)*he]=_0x1f31a7),et['x']=_0x14e285-(0x4ff*-0x2+0x595*-0x3+0x1abd+0.5),et['y']=_0x30f52b-(-0x1ce3*-0x1+0x1a3*-0x5+0xd4*-0x19+0.5),et['z']=_0x1f31a7-(-0x4*0xd8+-0x1ea3+0x2203+0.5),_0x2da8f1['emitterSha'+'pe']===Ys){const _0x1ace2b=Math['max'](Math['abs'](et['x']),Math['max'](Math['abs'](et['y']),Math['abs'](et['z']))),_0x27841b=_0x1ace2b+(0x2536+-0xbca*0x1+-0x1*0x196c+0.5-_0x1ace2b)*_0x2d4c6e[0xd6*-0x3+-0x1a92+0x1d14],_0x422a52=_0x1ace2b+(0x13d4+0x209d+0x4b*-0xb3+0.5-_0x1ace2b)*_0x2d4c6e[0x9dd+-0xd54+0x6f*0x8],_0x1543fe=_0x1ace2b+(-0x2413*-0x1+-0x1*-0xf95+-0x33a8+0.5-_0x1ace2b)*_0x2d4c6e[-0x773+-0x1c89+0x1*0x23fe];et['x']=_0x27841b*(_0x1ace2b===Math['abs'](et['x'])?Math['sign'](et['x']):(0x16ca+0x25e4+-0x3cac)*et['x']),et['y']=_0x422a52*(_0x1ace2b===Math['abs'](et['y'])?Math['sign'](et['y']):(-0x24ba+0xa9*-0x32+0x45be)*et['y']),et['z']=_0x1543fe*(_0x1ace2b===Math['abs'](et['z'])?Math['sign'](et['z']):(-0x19*-0x3d+-0x23f5+0x1e02)*et['z']),_0x2da8f1['localSpace']?$s['copy'](_0x4d5a88['transformP'+'oint'](et)):$s['copy'](_0x4de5af)['add'](_0x4d5a88['transformP'+'oint'](et));}else{et['normalize']();const _0x3f4938=_0x2da8f1['emitterRad'+'ius']===-0x1*-0x670+0x61*-0x1+-0x1*0x60f?-0x156e+-0x2cf*-0x3+-0xd01*-0x1:_0x2da8f1['emitterRad'+'iusInner']/_0x2da8f1['emitterRad'+'ius'],_0x2bf256=_0x2a1039*(-0x2a5*0x8+0x1a6e+-0x545-_0x3f4938)+_0x3f4938;_0x2da8f1['localSpace']?$s['copy'](et['mulScalar'](_0x2bf256*_0x2da8f1['emitterRad'+'ius'])):$s['copy'](_0x4de5af)['add'](et['mulScalar'](_0x2bf256*_0x2da8f1['emitterRad'+'ius']));}let _0x4112a8=-Y['lerp'](_0x2da8f1['rate'],_0x2da8f1['rate2'],_0x14e285)*_0x3d4c24;if(_0x2da8f1['pack8']){const _0x3460ea=($s['x']-_0x2da8f1['worldBound'+'s']['center']['x'])/_0x2da8f1['worldBound'+'sSize']['x']+(0x1c41+0x26c5+0x2183*-0x2+0.5),_0x1c3890=($s['y']-_0x2da8f1['worldBound'+'s']['center']['y'])/_0x2da8f1['worldBound'+'sSize']['y']+(-0x616+-0x1410+-0x1*-0x1a26+0.5),_0x5283ac=($s['z']-_0x2da8f1['worldBound'+'s']['center']['z'])/_0x2da8f1['worldBound'+'sSize']['z']+(-0x2690+0x1*0xdca+0x97*0x2a+0.5);let _0x2e92a5=Y['lerp'](_0x2da8f1['startAngle']*Y['DEG_TO_RAD'],_0x2da8f1['startAngle'+'2']*Y['DEG_TO_RAD'],_0x14e285);_0x2e92a5=_0x2e92a5%(Math['PI']*(0x2435+-0x1986+0x3*-0x38f))/(Math['PI']*(-0x28*0x8+0x1*-0x81+-0x1*-0x1c3));const _0xd74bea=Gl(_0x3460ea);_0x437cad[_0x3d4c24*he]=_0xd74bea[0x1df*-0x6+-0x1bbb+0x1*0x26f5],_0x437cad[_0x3d4c24*he+(0x14b8+-0x46c+-0x104b)]=_0xd74bea[-0x2*-0xbb3+0x1*0xb56+0x11*-0x20b];const _0x36f56f=Gl(_0x1c3890);_0x437cad[_0x3d4c24*he+(-0x1408+0x1d07*-0x1+0x1*0x3111)]=_0x36f56f[-0xfdb+0x24fb*0x1+-0x1520],_0x437cad[_0x3d4c24*he+(-0x15*0x158+0x5b*-0x7+0x1eb8)]=_0x36f56f[-0x2668+0x159f+0x10ca];const _0x12c95d=Gl(_0x5283ac);_0x437cad[_0x3d4c24*he+(0xcc8+0x21ac+-0x2e74)+_0x2da8f1['numParticl'+'esPot']*he]=_0x12c95d[0x3*0x709+-0x24c9+0x2*0x7d7],_0x437cad[_0x3d4c24*he+(-0x2146*0x1+-0x1041+0x3188)+_0x2da8f1['numParticl'+'esPot']*he]=_0x12c95d[-0x103*-0x7+0x756*0x2+-0x60*0x3a];const _0x36dc19=Gl(_0x2e92a5);_0x437cad[_0x3d4c24*he+(0x179f+-0x1149+0x5a*-0x12)+_0x2da8f1['numParticl'+'esPot']*he]=_0x36dc19[-0x2*0xea3+0x347*0x4+0x815*0x2],_0x437cad[_0x3d4c24*he+(0x12ec+-0x1*0x727+-0xbc2)+_0x2da8f1['numParticl'+'esPot']*he]=_0x36dc19[0x2682+0xd04+0x79*-0x6d];const _0x9e4aa5=0x2d0+0x2e*0x5+0x49*-0xd;_0x437cad[_0x3d4c24*he+(0x18af*-0x1+-0x1bf9+0x34ab)+_0x2da8f1['numParticl'+'esPot']*he*(-0x11a2+-0xf7a+-0x12*-0x1d7)]=_0x9e4aa5;const _0x53a9e6=Math['max'](_0x2da8f1['lifetime'],(_0x2da8f1['numParticl'+'es']-(0x292*0xa+-0x257*-0x8+0x53*-0x89))*Math['max'](_0x2da8f1['rate'],_0x2da8f1['rate2'])),_0xace8e4=_0x2da8f1['lifetime']+(-0x1*0x31+0x16c3*-0x1+0x16f5);_0x4112a8=(_0x4112a8+_0x53a9e6)/(_0x53a9e6+_0xace8e4);const _0x1932a7=EA(_0x4112a8);_0x437cad[_0x3d4c24*he+(-0x2f*-0xa9+-0x49e+0x1*-0x1a69)+_0x2da8f1['numParticl'+'esPot']*he*(0x1*0x1105+0x1d45+-0x21*0x167)]=_0x1932a7[-0x187f+-0x8e1+0xb20*0x3],_0x437cad[_0x3d4c24*he+(0x705+0x5*0x671+-0x1*0x2739)+_0x2da8f1['numParticl'+'esPot']*he*(0x156*0x3+-0x315*-0x4+-0x1053)]=_0x1932a7[-0x35*-0x62+0x7*-0xe5+-0xe06],_0x437cad[_0x3d4c24*he+(-0x1192*-0x1+-0x80a+-0x986)+_0x2da8f1['numParticl'+'esPot']*he*(-0x466+-0x15f5+0x1a5e)]=_0x1932a7[-0x87*-0x2b+0x1cdf+-0x12*0x2dd],_0x437cad[_0x3d4c24*he+(-0x47*-0x53+0x2645+0x3*-0x146d)+_0x2da8f1['numParticl'+'esPot']*he*(0x35*0x74+0x1*0xea2+-0x26a3)]=_0x1932a7[0x2*-0xff7+-0x2*0x1107+0x41ff];}else _0x437cad[_0x3d4c24*he]=$s['x'],_0x437cad[_0x3d4c24*he+(0x2*0x236+0x1*-0x10c1+0xc56)]=$s['y'],_0x437cad[_0x3d4c24*he+(-0xfe*0x17+0xbe0+0xaf4)]=$s['z'],_0x437cad[_0x3d4c24*he+(-0x49b*-0x5+0x927+-0x1b*0x131)]=Y['lerp'](_0x2da8f1['startAngle']*Y['DEG_TO_RAD'],_0x2da8f1['startAngle'+'2']*Y['DEG_TO_RAD'],_0x14e285),_0x437cad[_0x3d4c24*he+(-0x2*-0x3b6+0x33*0x5e+-0x1a23)+_0x2da8f1['numParticl'+'esPot']*he]=_0x4112a8;}['update'](_0x11eec5,_0x54bbed,_0x5a3ebc,_0x5f4309,_0x5c534b,_0x106a40,_0x19790b,_0x3d6efd){let _0x3dbc4a,_0x5e056b,_0x5c81bc;const _0x277927=this['_emitter'];if(_0x277927['meshInstan'+'ce']['node']){const _0x33ed89=_0x277927['meshInstan'+'ce']['node']['worldTrans'+'form'];for(let _0x3a8959=-0x1a6f+0x1*0x4a+0x1a25;_0x3a8959<-0xf6d*0x1+0x1*-0x249d+-0x1*-0x3416;_0x3a8959++)Ud['data'][_0x3a8959]=_0x33ed89['data'][_0x3a8959];Bd['copy'](Ud),Bd['invert'](),_i=_0x277927['meshInstan'+'ce']['node']['localScale'],f_=Math['max'](Math['max'](_i['x'],_i['y']),_i['z']);}_0x106a40=_0x277927['meshInstan'+'ce']['node']===null||_0x277927['localSpace']?I['ZERO']:_0x277927['meshInstan'+'ce']['node']['getPositio'+'n']();const _0x40ade7=_0x277927['camera']?_0x277927['camera']['_node']['getPositio'+'n']():I['ZERO'],_0x153206=_0x277927['useMesh']?0x71a+-0xed9+0x7d0:-0xf31+-0x1759*0x1+0x29*0xf1;let _0x93dd1d,_0x76795a,_0x19918c,_0x301895,_0xdf8a53,_0x6c4b2f,_0x5c9371,_0x597c7c,_0x3a2924;const _0x3a42e8=_0x277927['precision']-(-0x1*-0xd6+0x1313+0xc4*-0x1a);for(let _0x5ac56a=0x22bd+0xc5+-0xf*0x25e;_0x5ac56a<_0x277927['numParticl'+'es'];_0x5ac56a++){const _0x114cb2=Math['floor'](_0x277927['vbCPU'][_0x5ac56a*_0x277927['numParticl'+'eVerts']*(_0x277927['useMesh']?-0x39e*0x1+-0x176e+0x1b12:0x14a1+0x551+-0xcf7*0x2)+(-0xf0d*0x1+0x105c*-0x2+-0xb*-0x458)]),_0x22b0bf=_0x5a3ebc[_0x114cb2*he+(0x33*0x5c+-0x1cc4+-0x8*-0x14e)+_0x277927['numParticl'+'esPot']*(-0x85b+-0x19a3+-0x1100*-0x2)*he];Cs['x']=_0x22b0bf,Cs['y']=_0x5a3ebc[_0x114cb2*he+(-0x20e7+0xd5f+0x1389)+_0x277927['numParticl'+'esPot']*(0x429+-0x1*-0xea4+0x11b*-0x11)*he],Cs['z']=_0x5a3ebc[_0x114cb2*he+(0x2687*0x1+-0x6f*0x44+-0x1*0x909)+_0x277927['numParticl'+'esPot']*(0x19d9+-0x1507+-0x2c*0x1c)*he];const _0x254abe=_0x277927['rate']+(_0x277927['rate2']-_0x277927['rate'])*_0x22b0bf,_0x52ae04=_0x277927['lifetime'];let _0x15dfb8=_0x5a3ebc[_0x114cb2*he+(-0x1*-0x8f6+0x6*-0x1e6+0x271)+_0x277927['numParticl'+'esPot']*he]+_0x19790b;const _0x50727d=wA(_0x15dfb8/_0x52ae04);let _0x28deb0=-0xd3*-0x2b+0x9b5+0x2d26*-0x1,_0x1c7070=0x3*0x581+-0x533+0xb5*-0x10;const _0x3959af=-0x5*0x442+0x2683+-0x1139;(_0x15dfb8-_0x19790b<=-0x20f7+-0x71e*0x1+0x2815||_0x15dfb8>=_0x52ae04)&&this['calcSpawnP'+'osition'](_0x5a3ebc,_0x5f4309,_0x5c534b,_0x106a40,_0x114cb2);let _0x338402=_0x15dfb8>-0x185a+-0x25e+0x1ab8&&_0x15dfb8<_0x52ae04;_0x338402&&(_0x5c81bc=_0x50727d*_0x3a42e8,_0x93dd1d=Math['floor'](_0x5c81bc),_0x76795a=Math['ceil'](_0x5c81bc),_0x5c81bc%=0x35*-0x71+-0x92a+0x2090,_0x3dbc4a=_0x277927['qRotSpeed'][_0x93dd1d],_0x5e056b=_0x277927['qRotSpeed'][_0x76795a],_0x19918c=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qRotSpeed2'][_0x93dd1d],_0x5e056b=_0x277927['qRotSpeed2'][_0x76795a],_0x301895=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qScale'][_0x93dd1d],_0x5e056b=_0x277927['qScale'][_0x76795a],_0x28deb0=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qScale2'][_0x93dd1d],_0x5e056b=_0x277927['qScale2'][_0x76795a],_0xdf8a53=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qAlpha'][_0x93dd1d],_0x5e056b=_0x277927['qAlpha'][_0x76795a],_0x6c4b2f=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qAlpha2'][_0x93dd1d],_0x5e056b=_0x277927['qAlpha2'][_0x76795a],_0x5c9371=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qRadialSpe'+'ed'][_0x93dd1d],_0x5e056b=_0x277927['qRadialSpe'+'ed'][_0x76795a],_0x597c7c=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qRadialSpe'+'ed2'][_0x93dd1d],_0x5e056b=_0x277927['qRadialSpe'+'ed2'][_0x76795a],_0x3a2924=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x597c7c+=(_0x3a2924-_0x597c7c)*(_0x22b0bf*(-0x1*0xe28+0xf81*-0x1+0x1e0d)%(0x1*0x9ef+0x1*0x85a+0x9c*-0x1e)),wa['x']=_0x5a3ebc[_0x114cb2*he],wa['y']=_0x5a3ebc[_0x114cb2*he+(0x2030+0x15f3+-0x3622)],wa['z']=_0x5a3ebc[_0x114cb2*he+(0x1363+0x2589+0x2*-0x1c75)],_0x277927['localSpace']?jn['copy'](wa):jn['copy'](wa)['sub'](_0x106a40),jn['normalize']()['mulScalar'](_0x597c7c),_0x93dd1d*=-0xc0e+0xb43+-0x1*-0xce,_0x76795a*=0x1011+-0xa65+-0x5a9,_0x3dbc4a=_0x277927['qLocalVelo'+'city'][_0x93dd1d],_0x5e056b=_0x277927['qLocalVelo'+'city'][_0x76795a],ut['x']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qLocalVelo'+'city'][_0x93dd1d+(0x1fb2+-0x145+0xb1*-0x2c)],_0x5e056b=_0x277927['qLocalVelo'+'city'][_0x76795a+(-0x7ec+0x3d*-0x1d+0xed6)],ut['y']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qLocalVelo'+'city'][_0x93dd1d+(0x48*-0x4c+0x3*0x11a+0x1214)],_0x5e056b=_0x277927['qLocalVelo'+'city'][_0x76795a+(0x1384+0x406*0x1+-0x1*0x1788)],ut['z']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qLocalVelo'+'city2'][_0x93dd1d],_0x5e056b=_0x277927['qLocalVelo'+'city2'][_0x76795a],Aa['x']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qLocalVelo'+'city2'][_0x93dd1d+(0x948+0x86c+-0x11b3)],_0x5e056b=_0x277927['qLocalVelo'+'city2'][_0x76795a+(0xc08+-0x1*0x1292+0x19*0x43)],Aa['y']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qLocalVelo'+'city2'][_0x93dd1d+(-0x1*-0x24ac+-0xa11+0x1a99*-0x1)],_0x5e056b=_0x277927['qLocalVelo'+'city2'][_0x76795a+(-0x2*0x1085+-0xa*0x59+0x2486)],Aa['z']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qVelocity'][_0x93dd1d],_0x5e056b=_0x277927['qVelocity'][_0x76795a],Jt['x']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qVelocity'][_0x93dd1d+(0x9b2+-0x19b3*-0x1+-0x714*0x5)],_0x5e056b=_0x277927['qVelocity'][_0x76795a+(0xf1d*-0x2+0x2*-0x4+0x3d*0x7f)],Jt['y']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qVelocity'][_0x93dd1d+(0x2522+-0x2113+-0x40d)],_0x5e056b=_0x277927['qVelocity'][_0x76795a+(-0x13ff*0x1+-0xe6a+-0x21*-0x10b)],Jt['z']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qVelocity2'][_0x93dd1d],_0x5e056b=_0x277927['qVelocity2'][_0x76795a],Ea['x']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qVelocity2'][_0x93dd1d+(-0x8*-0x81+-0xed5*0x1+0xace)],_0x5e056b=_0x277927['qVelocity2'][_0x76795a+(0xa8b*0x1+-0xc*0x17f+0x1a*0x49)],Ea['y']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,_0x3dbc4a=_0x277927['qVelocity2'][_0x93dd1d+(0x231a*0x1+-0x10f1+-0x1227)],_0x5e056b=_0x277927['qVelocity2'][_0x76795a+(-0x1b6d*0x1+0x1726+0x1*0x449)],Ea['z']=_0x3dbc4a+(_0x5e056b-_0x3dbc4a)*_0x5c81bc,ut['x']+=(Aa['x']-ut['x'])*Cs['x'],ut['y']+=(Aa['y']-ut['y'])*Cs['y'],ut['z']+=(Aa['z']-ut['z'])*Cs['z'],_0x277927['initialVel'+'ocity']>-0x1a6*-0x8+-0x104*0x5+-0x81c&&(_0x277927['emitterSha'+'pe']===KT?(et['copy'](Cs)['mulScalar'](-0x1*0x25bf+0x54*-0x53+0x40fd)['sub'](I['ONE'])['normalize'](),ut['add'](et['mulScalar'](_0x277927['initialVel'+'ocity']))):ut['add'](I['FORWARD']['mulScalar'](_0x277927['initialVel'+'ocity']))),Jt['x']+=(Ea['x']-Jt['x'])*Cs['x'],Jt['y']+=(Ea['y']-Jt['y'])*Cs['y'],Jt['z']+=(Ea['z']-Jt['z'])*Cs['z'],_0x19918c+=(_0x301895-_0x19918c)*Cs['y'],_0x28deb0=(_0x28deb0+(_0xdf8a53-_0x28deb0)*(_0x22b0bf*(-0x356e+-0x1*-0x34e1+0x1*0x279d)%(0x1c0a+0xabd+-0x26c6)))*f_,_0x1c7070=(_0x5c9371-_0x6c4b2f)*(_0x22b0bf*(0x6a1*-0x3+-0x13c3+0x2b8e)%(-0x35*0x1d+-0x3*-0x2e7+-0x2b3*0x1)),_0x277927['meshInstan'+'ce']['node']&&(_0x277927['localSpace']?(ut['x']/=_i['x'],ut['y']/=_i['y'],ut['z']/=_i['z']):Ud['transformP'+'oint'](ut,ut)),_0x277927['localSpace']?(Bd['transformP'+'oint'](Jt,Jt),ut['add'](Jt)['add'](jn)):(ut['add'](Jt['mul'](_i)),ut['add'](jn['mul'](_i))),Vl['copy'](ut),u_['copy'](wa)['add'](ut['mulScalar'](_0x19790b)),Rt['copy'](u_),_0x5a3ebc[_0x114cb2*he]=Rt['x'],_0x5a3ebc[_0x114cb2*he+(-0x2573+0x20b+-0x1*-0x2369)]=Rt['y'],_0x5a3ebc[_0x114cb2*he+(-0x1349*0x1+0x923+0xa28)]=Rt['z'],_0x5a3ebc[_0x114cb2*he+(-0x2517+-0x1b23+-0x8f*-0x73)]+=_0x19918c*_0x19790b,_0x277927['wrap']&&_0x277927['wrapBounds']&&(_0x277927['localSpace']||Rt['sub'](_0x106a40),Rt['x']=zd(Rt['x'],_0x277927['wrapBounds']['x'])-_0x277927['wrapBounds']['x']*(-0x1e60+0x358+-0x4*-0x6c2+0.5),Rt['y']=zd(Rt['y'],_0x277927['wrapBounds']['y'])-_0x277927['wrapBounds']['y']*(-0xc*-0x2fc+0x234d+-0x471d+0.5),Rt['z']=zd(Rt['z'],_0x277927['wrapBounds']['z'])-_0x277927['wrapBounds']['z']*(-0x19f1+-0xecf+0x28c0+0.5),_0x277927['localSpace']||Rt['add'](_0x106a40)),_0x277927['sort']>0x122f+0x239*0x3+-0x18da&&(_0x277927['sort']===0x37c+0x14b+-0x4c6?(Tr['copy'](Rt)['sub'](_0x40ade7),_0x277927['particleDi'+'stance'][_0x114cb2]=-(Tr['x']*Tr['x']+Tr['y']*Tr['y']+Tr['z']*Tr['z'])):_0x277927['sort']===0x8f*-0x3b+-0x1e3f+0x3f36?_0x277927['particleDi'+'stance'][_0x114cb2]=_0x15dfb8:_0x277927['sort']===0x2687+-0x228b*-0x1+-0x490f&&(_0x277927['particleDi'+'stance'][_0x114cb2]=-_0x15dfb8))),_0x3d6efd?_0x15dfb8<0x4d*0x6d+-0xbe4+-0x14e5&&(_0x5a3ebc[_0x114cb2*he+(-0x105e*-0x1+0xb7b*-0x2+0x1*0x69b)+_0x277927['numParticl'+'esPot']*(-0x129+-0xecd+-0x7*-0x248)*he]=-(-0xe3c+-0x5ee+-0x1*-0x142b)):(_0x15dfb8>=_0x52ae04&&(_0x15dfb8-=Math['max'](_0x52ae04,(_0x277927['numParticl'+'es']-(0x47*-0xf+0x76*-0x2+0x15*0x3e))*_0x254abe),_0x5a3ebc[_0x114cb2*he+(-0x1*0x108d+-0x1e*-0xb3+-0x1*0x46a)+_0x277927['numParticl'+'esPot']*(-0xe*0x281+0x1baf+-0x1*-0x761)*he]=_0x277927['loop']?0x25*0x5f+0x6*-0xe3+0x434*-0x2:-(0x10*0x197+-0x1*0x23+0x653*-0x4)),_0x15dfb8<-0x3bb+-0x29d*-0x8+-0x112d&&_0x277927['loop']&&(_0x5a3ebc[_0x114cb2*he+(0x103*0x13+-0x2127+-0xdf1*-0x1)+_0x277927['numParticl'+'esPot']*(0x1680+0x1f0f+0x1*-0x358d)*he]=0x47b+0xd68+-0x3*0x5f6)),_0x5a3ebc[_0x114cb2*he+(-0x1*0xadd+-0x10cc+-0x1fa*-0xe)+_0x277927['numParticl'+'esPot']*(-0x2410+0x2598+-0x186)*he]<-0x40*-0x5+0xd*0x243+0x3b*-0x85&&(_0x338402=!(0x1*0xa+-0xc27+-0x11a*-0xb)),_0x5a3ebc[_0x114cb2*he+(-0x4*-0x3cb+0x928+-0x1851)+_0x277927['numParticl'+'esPot']*he]=_0x15dfb8;for(let _0x10a3e5=-0x9c3+0x12e4+0x3*-0x30b;_0x10a3e5<_0x277927['numParticl'+'eVerts'];_0x10a3e5++){const _0x42bd6=(_0x5ac56a*_0x277927['numParticl'+'eVerts']+_0x10a3e5)*(_0x277927['useMesh']?-0x52*-0x22+0x98c+-0x146a:-0xc1*-0x10+-0x4*0x893+-0xb20*-0x2);let _0x1112b4=_0x277927['vbCPU'][_0x42bd6],_0x1ed75b=_0x277927['vbCPU'][_0x42bd6+(-0x2*-0x52+-0xaf4+0xa51)],_0x399edc=_0x277927['vbCPU'][_0x42bd6+(-0x1*0x9ff+0x1d27*-0x1+-0x2cc*-0xe)];_0x338402||(_0x1112b4=_0x1ed75b=_0x399edc=0x1*0x146a+-0x1def+-0x1*-0x985);const _0x3b1169=_0x5ac56a*_0x277927['numParticl'+'eVerts']*_0x153206+_0x10a3e5*_0x153206;_0x11eec5[_0x3b1169]=Rt['x'],_0x11eec5[_0x3b1169+(-0xc42+0x404+-0x83f*-0x1)]=Rt['y'],_0x11eec5[_0x3b1169+(-0x727*0x1+0x2f9*-0x2+0xd1b)]=Rt['z'],_0x11eec5[_0x3b1169+(0x950+-0x26aa+0x1d5d)]=_0x50727d,_0x11eec5[_0x3b1169+(0x4*0x2dd+-0x18d8+0x2c*0x4e)]=_0x277927['alignToMot'+'ion']?_0x3959af:_0x5a3ebc[_0x114cb2*he+(0x23*0x20+0x1*0x2095+-0x24f2)],_0x11eec5[_0x3b1169+(-0xf25+-0x1b68+0x2a92)]=_0x28deb0,_0x11eec5[_0x3b1169+(-0x6d*-0x7+0x125f*0x2+-0x27b3)]=_0x1c7070,_0x11eec5[_0x3b1169+(0x1c6c+-0x5*-0x5cf+-0x3970)]=Vl['x'],_0x11eec5[_0x3b1169+(0x653+-0x1*-0x1083+0x16ce*-0x1)]=_0x1112b4,_0x11eec5[_0x3b1169+(-0x21b3+0x5*0x601+0x3b7)]=_0x1ed75b,_0x11eec5[_0x3b1169+(-0x1734+-0x1f52+0x3690)]=_0x399edc,_0x11eec5[_0x3b1169+(0x1e6+0xde3+-0xa*0x193)]=Vl['y'],_0x11eec5[_0x3b1169+(-0x17cc+-0x91f+-0x1d*-0x123)]=_0x114cb2,_0x11eec5[_0x3b1169+(-0x151*0x17+-0x242b+0x427f)]=Vl['z'],_0x11eec5[_0x3b1169+(0xb9*0x29+0x2301+0x2*-0x204a)]=_0x277927['vbCPU'][_0x42bd6+(0xfe8+0x1*-0xde5+-0x200)],_0x277927['useMesh']&&(_0x11eec5[_0x3b1169+(0x19c4+-0x13*0x91+-0x1*0xef2)]=_0x277927['vbCPU'][_0x42bd6+(0x1*0xfec+-0x13a9+0x1f*0x1f)],_0x11eec5[_0x3b1169+(0xd*0x29+-0xb*0xdb+0x764)]=_0x277927['vbCPU'][_0x42bd6+(0xc6a+0x239*0x6+0x7*-0x3ad)]);}}if(_0x277927['sort']>Cf&&_0x277927['camera']){const _0x33009e=_0x277927['useMesh']?0x4*-0x7cc+-0x9a0+-0x146b*-0x2:-0x1688+-0x8d0+0x1f5c,_0x45cd49=_0x277927['particleDi'+'stance'];for(let _0x1ce52c=-0xa00+-0x1853+0x2253;_0x1ce52c<_0x277927['numParticl'+'es'];_0x1ce52c++)_0x54bbed[_0x1ce52c][-0x5*-0x503+0x1c83+0x3592*-0x1]=_0x1ce52c,_0x54bbed[_0x1ce52c][0xfdd*-0x2+0x1969+-0x2*-0x329]=_0x45cd49[Math['floor'](_0x277927['vbCPU'][_0x1ce52c*_0x277927['numParticl'+'eVerts']*_0x33009e+(0xfed+0x5b6+-0x15a0)])];_0x277927['vbOld']['set'](_0x277927['vbCPU']),_0x54bbed['sort']((_0x26ae9a,_0x54f49b)=>_0x26ae9a[-0x2168+-0x1410+0x15f*0x27]-_0x54f49b[0x1*0x1de1+0x7f*-0x49+0x657*0x1]);for(let _0x111709=-0x301*0x2+-0x13ef+0xe5*0x1d;_0x111709<_0x277927['numParticl'+'es'];_0x111709++){const _0xe27ffa=_0x54bbed[_0x111709][-0xc17*0x3+0x2443*0x1+0x2*0x1]*_0x277927['numParticl'+'eVerts']*_0x33009e,_0x52bd5e=_0x111709*_0x277927['numParticl'+'eVerts']*_0x33009e;for(let _0x35be2f=-0xd*-0xf3+-0x2*0xbee+0xb85;_0x35be2f<_0x277927['numParticl'+'eVerts']*_0x33009e;_0x35be2f++)_0x277927['vbCPU'][_0x52bd5e+_0x35be2f]=_0x277927['vbOld'][_0xe27ffa+_0x35be2f];}}}}const m_=new oi(),p_=new oi(),__=new oi();class bA{constructor(_0x41c1e1,_0x4744fb){this['_emitter']=_0x41c1e1,this['frameRando'+'mUniform']=new Float32Array(0xba4*0x3+-0x7*0x513+0x9c),this['emitterPos'+'Uniform']=new Float32Array(-0x1792+0x3*-0x1+-0x4b8*-0x5),this['emitterSca'+'leUniform']=new Float32Array([0x25d9+0x2022+-0x2b1*0x1a,0xbf0+-0x6*0x359+0x827,0x6*-0x15b+-0x834+-0x59*-0x2f]),this['worldBound'+'sMulUnifor'+'m']=new Float32Array(-0xd*0x1af+-0x22bb+0x38a1),this['worldBound'+'sAddUnifor'+'m']=new Float32Array(0x27*-0xf3+0x1ff6+0x512),this['inBoundsSi'+'zeUniform']=new Float32Array(0x235f+0x1bda+-0x3f36),this['inBoundsCe'+'nterUnifor'+'m']=new Float32Array(0x1606+-0x1650+0x4d),this['constantPa'+'rticleTexI'+'N']=_0x4744fb['scope']['resolve']('particleTe'+'xIN'),this['constantPa'+'rticleTexO'+'UT']=_0x4744fb['scope']['resolve']('particleTe'+'xOUT'),this['constantEm'+'itterPos']=_0x4744fb['scope']['resolve']('emitterPos'),this['constantEm'+'itterScale']=_0x4744fb['scope']['resolve']('emitterSca'+'le'),this['constantSp'+'awnBounds']=_0x4744fb['scope']['resolve']('spawnBound'+'s'),this['constantSp'+'awnPosInne'+'rRatio']=_0x4744fb['scope']['resolve']('spawnPosIn'+'nerRatio'),this['constantSp'+'awnBoundsS'+'phere']=_0x4744fb['scope']['resolve']('spawnBound'+'sSphere'),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']=_0x4744fb['scope']['resolve']('spawnBound'+'sSphereInn'+'erRatio'),this['constantIn'+'itialVeloc'+'ity']=_0x4744fb['scope']['resolve']('initialVel'+'ocity'),this['constantFr'+'ameRandom']=_0x4744fb['scope']['resolve']('frameRando'+'m'),this['constantDe'+'lta']=_0x4744fb['scope']['resolve']('delta'),this['constantRa'+'te']=_0x4744fb['scope']['resolve']('rate'),this['constantRa'+'teDiv']=_0x4744fb['scope']['resolve']('rateDiv'),this['constantLi'+'fetime']=_0x4744fb['scope']['resolve']('lifetime'),this['constantGr'+'aphSampleS'+'ize']=_0x4744fb['scope']['resolve']('graphSampl'+'eSize'),this['constantGr'+'aphNumSamp'+'les']=_0x4744fb['scope']['resolve']('graphNumSa'+'mples'),this['constantIn'+'ternalTex0']=_0x4744fb['scope']['resolve']('internalTe'+'x0'),this['constantIn'+'ternalTex1']=_0x4744fb['scope']['resolve']('internalTe'+'x1'),this['constantIn'+'ternalTex2']=_0x4744fb['scope']['resolve']('internalTe'+'x2'),this['constantIn'+'ternalTex3']=_0x4744fb['scope']['resolve']('internalTe'+'x3'),this['constantEm'+'itterMatri'+'x']=_0x4744fb['scope']['resolve']('emitterMat'+'rix'),this['constantEm'+'itterMatri'+'xInv']=_0x4744fb['scope']['resolve']('emitterMat'+'rixInv'),this['constantNu'+'mParticles']=_0x4744fb['scope']['resolve']('numParticl'+'es'),this['constantNu'+'mParticles'+'Pot']=_0x4744fb['scope']['resolve']('numParticl'+'esPot'),this['constantLo'+'calVelocit'+'yDivMult']=_0x4744fb['scope']['resolve']('localVeloc'+'ityDivMult'),this['constantVe'+'locityDivM'+'ult']=_0x4744fb['scope']['resolve']('velocityDi'+'vMult'),this['constantRo'+'tSpeedDivM'+'ult']=_0x4744fb['scope']['resolve']('rotSpeedDi'+'vMult'),this['constantSe'+'ed']=_0x4744fb['scope']['resolve']('seed'),this['constantSt'+'artAngle']=_0x4744fb['scope']['resolve']('startAngle'),this['constantSt'+'artAngle2']=_0x4744fb['scope']['resolve']('startAngle'+'2'),this['constantOu'+'tBoundsMul']=_0x4744fb['scope']['resolve']('outBoundsM'+'ul'),this['constantOu'+'tBoundsAdd']=_0x4744fb['scope']['resolve']('outBoundsA'+'dd'),this['constantIn'+'BoundsSize']=_0x4744fb['scope']['resolve']('inBoundsSi'+'ze'),this['constantIn'+'BoundsCent'+'er']=_0x4744fb['scope']['resolve']('inBoundsCe'+'nter'),this['constantMa'+'xVel']=_0x4744fb['scope']['resolve']('maxVel'),this['constantFa'+'ceTangent']=_0x4744fb['scope']['resolve']('faceTangen'+'t'),this['constantFa'+'ceBinorm']=_0x4744fb['scope']['resolve']('faceBinorm');}['_setInputB'+'ounds'](){this['inBoundsSi'+'zeUniform'][-0x20d+0x567*-0x5+0xf0*0x1f]=this['_emitter']['prevWorldB'+'oundsSize']['x'],this['inBoundsSi'+'zeUniform'][0x1*-0x224f+0xe*0x27e+-0x94]=this['_emitter']['prevWorldB'+'oundsSize']['y'],this['inBoundsSi'+'zeUniform'][-0x7*0x5b+-0x23dc+0x265b]=this['_emitter']['prevWorldB'+'oundsSize']['z'],this['constantIn'+'BoundsSize']['setValue'](this['inBoundsSi'+'zeUniform']),this['inBoundsCe'+'nterUnifor'+'m'][-0x5e2+-0x2*0x86f+0x16c0]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['x'],this['inBoundsCe'+'nterUnifor'+'m'][-0x1f1e+0x2602+-0x1*0x6e3]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['y'],this['inBoundsCe'+'nterUnifor'+'m'][-0x2186+-0xdef+0x2f77]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['z'],this['constantIn'+'BoundsCent'+'er']['setValue'](this['inBoundsCe'+'nterUnifor'+'m']);}['randomize'](){this['frameRando'+'mUniform'][-0x164b+0x4*-0xcc+0x251*0xb]=Math['random'](),this['frameRando'+'mUniform'][0x5*-0x3b1+-0x11*-0x228+0x1*-0x1232]=Math['random'](),this['frameRando'+'mUniform'][0x13*-0xed+-0x245+0x13de]=Math['random']();}['update'](_0x5e3e3b,_0x5e030b,_0x8ac5be,_0x3d561e,_0x2fd6a0){Q['pushGpuMar'+'ker'](_0x5e3e3b,'ParticleGP'+'U');const _0x5c52b7=this['_emitter'];_0x5e3e3b['setBlendSt'+'ate'](Ct['NOBLEND']),_0x5e3e3b['setDepthSt'+'ate'](Kt['NODEPTH']),_0x5e3e3b['setCullMod'+'e'](xt),this['randomize'](),this['constantGr'+'aphSampleS'+'ize']['setValue']((-0x51*-0x1d+0x106*-0x4+-0x514)/_0x5c52b7['precision']),this['constantGr'+'aphNumSamp'+'les']['setValue'](_0x5c52b7['precision']),this['constantNu'+'mParticles']['setValue'](_0x5c52b7['numParticl'+'es']),this['constantNu'+'mParticles'+'Pot']['setValue'](_0x5c52b7['numParticl'+'esPot']),this['constantIn'+'ternalTex0']['setValue'](_0x5c52b7['internalTe'+'x0']),this['constantIn'+'ternalTex1']['setValue'](_0x5c52b7['internalTe'+'x1']),this['constantIn'+'ternalTex2']['setValue'](_0x5c52b7['internalTe'+'x2']),this['constantIn'+'ternalTex3']['setValue'](_0x5c52b7['internalTe'+'x3']);const _0x143e1f=_0x5c52b7['meshInstan'+'ce']['node'],_0x3267c5=_0x143e1f===null?I['ONE']:_0x143e1f['localScale'];if(_0x5c52b7['pack8']){this['worldBound'+'sMulUnifor'+'m'][-0x46c*-0x2+0x17*0x95+-0x163b]=_0x5c52b7['worldBound'+'sMul']['x'],this['worldBound'+'sMulUnifor'+'m'][-0x17b0+0xa6*-0x3+0x19a3]=_0x5c52b7['worldBound'+'sMul']['y'],this['worldBound'+'sMulUnifor'+'m'][0x3f1+0x198*0x5+-0xbe7]=_0x5c52b7['worldBound'+'sMul']['z'],this['constantOu'+'tBoundsMul']['setValue'](this['worldBound'+'sMulUnifor'+'m']),this['worldBound'+'sAddUnifor'+'m'][0x145d+0x33e*0x3+-0x1*0x1e17]=_0x5c52b7['worldBound'+'sAdd']['x'],this['worldBound'+'sAddUnifor'+'m'][0x13e9*0x1+0x1c0e*-0x1+0x826]=_0x5c52b7['worldBound'+'sAdd']['y'],this['worldBound'+'sAddUnifor'+'m'][-0x15fd*0x1+0xa01+0xbfe]=_0x5c52b7['worldBound'+'sAdd']['z'],this['constantOu'+'tBoundsAdd']['setValue'](this['worldBound'+'sAddUnifor'+'m']),this['_setInputB'+'ounds']();let _0x36cdd1=_0x5c52b7['maxVel']*Math['max'](Math['max'](_0x3267c5['x'],_0x3267c5['y']),_0x3267c5['z']);_0x36cdd1=Math['max'](_0x36cdd1,-0x1c9f+-0x2*-0xc89+0x38e),this['constantMa'+'xVel']['setValue'](_0x36cdd1);}const _0x22c173=_0x143e1f===null||_0x5c52b7['localSpace']?I['ZERO']:_0x143e1f['getPositio'+'n'](),_0x3cd518=_0x143e1f===null?te['IDENTITY']:_0x143e1f['getWorldTr'+'ansform']();_0x5c52b7['emitterSha'+'pe']===Ys?(m_['setFromMat'+'4'](_0x5e030b),this['constantSp'+'awnBounds']['setValue'](m_['data']),this['constantSp'+'awnPosInne'+'rRatio']['setValue'](_0x8ac5be)):(this['constantSp'+'awnBoundsS'+'phere']['setValue'](_0x5c52b7['emitterRad'+'ius']),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']['setValue'](_0x5c52b7['emitterRad'+'ius']===-0x2*0xb0a+-0x399+0x19ad?0x1ea+-0x220b+0xeb*0x23:_0x5c52b7['emitterRad'+'iusInner']/_0x5c52b7['emitterRad'+'ius'])),this['constantIn'+'itialVeloc'+'ity']['setValue'](_0x5c52b7['initialVel'+'ocity']),p_['setFromMat'+'4'](_0x3cd518),__['invertMat4'](_0x3cd518),this['emitterPos'+'Uniform'][-0x8*-0x44e+0x1e30+-0x40a0]=_0x22c173['x'],this['emitterPos'+'Uniform'][0x6*-0x331+0x223d+-0xf16]=_0x22c173['y'],this['emitterPos'+'Uniform'][0x541+-0x24f5*-0x1+0x49*-0x94]=_0x22c173['z'],this['constantEm'+'itterPos']['setValue'](this['emitterPos'+'Uniform']),this['constantFr'+'ameRandom']['setValue'](this['frameRando'+'mUniform']),this['constantDe'+'lta']['setValue'](_0x3d561e),this['constantRa'+'te']['setValue'](_0x5c52b7['rate']),this['constantRa'+'teDiv']['setValue'](_0x5c52b7['rate2']-_0x5c52b7['rate']),this['constantSt'+'artAngle']['setValue'](_0x5c52b7['startAngle']*Y['DEG_TO_RAD']),this['constantSt'+'artAngle2']['setValue'](_0x5c52b7['startAngle'+'2']*Y['DEG_TO_RAD']),this['constantSe'+'ed']['setValue'](_0x5c52b7['seed']),this['constantLi'+'fetime']['setValue'](_0x5c52b7['lifetime']),this['emitterSca'+'leUniform'][-0x16df+-0x1*-0x22a9+-0xbca*0x1]=_0x3267c5['x'],this['emitterSca'+'leUniform'][0x12eb+-0x1781+0x5*0xeb]=_0x3267c5['y'],this['emitterSca'+'leUniform'][-0x1655+-0x550+0x1ba7*0x1]=_0x3267c5['z'],this['constantEm'+'itterScale']['setValue'](this['emitterSca'+'leUniform']),this['constantEm'+'itterMatri'+'x']['setValue'](p_['data']),this['constantEm'+'itterMatri'+'xInv']['setValue'](__['data']),this['constantLo'+'calVelocit'+'yDivMult']['setValue'](_0x5c52b7['localVeloc'+'ityUMax']),this['constantVe'+'locityDivM'+'ult']['setValue'](_0x5c52b7['velocityUM'+'ax']),this['constantRo'+'tSpeedDivM'+'ult']['setValue'](_0x5c52b7['rotSpeedUM'+'ax'][-0x3e6*0x5+0x2*0xd21+-0x1b1*0x4]);let _0x2b0f9a=_0x5c52b7['swapTex']?_0x5c52b7['particleTe'+'xOUT']:_0x5c52b7['particleTe'+'xIN'];_0x2b0f9a=_0x5c52b7['beenReset']?_0x5c52b7['particleTe'+'xStart']:_0x2b0f9a;const _0x22dc1a=_0x5c52b7['swapTex']?_0x5c52b7['particleTe'+'xIN']:_0x5c52b7['particleTe'+'xOUT'];this['constantPa'+'rticleTexI'+'N']['setValue'](_0x2b0f9a),fr(_0x5e3e3b,_0x5c52b7['swapTex']?_0x5c52b7['rtParticle'+'TexIN']:_0x5c52b7['rtParticle'+'TexOUT'],_0x2fd6a0?_0x5c52b7['shaderPart'+'icleUpdate'+'OnStop']:_0x5c52b7['loop']?_0x5c52b7['shaderPart'+'icleUpdate'+'Respawn']:_0x5c52b7['shaderPart'+'icleUpdate'+'NoRespawn']),_0x5c52b7['material']['setParamet'+'er']('particleTe'+'xOUT',_0x2b0f9a),_0x5c52b7['material']['setParamet'+'er']('particleTe'+'xIN',_0x22dc1a),_0x5c52b7['beenReset']=!(-0x167d+0xd15+0x969),_0x5c52b7['swapTex']=!_0x5c52b7['swapTex'],_0x5c52b7['prevWorldB'+'oundsSize']['copy'](_0x5c52b7['worldBound'+'sSize']),_0x5c52b7['prevWorldB'+'oundsCente'+'r']['copy'](_0x5c52b7['worldBound'+'s']['center']),_0x5c52b7['pack8']&&this['_setInputB'+'ounds'](),Q['popGpuMark'+'er'](_0x5e3e3b);}}const g_=['NONE','VERTEX','MAP'];class CA extends aa{['generateKe'+'y'](_0x1ffa7a){let _0x5c9d70='particle_'+aa['definesHas'+'h'](_0x1ffa7a['defines'])+'_';for(const _0x2e4f5e in _0x1ffa7a)_0x1ffa7a['hasOwnProp'+'erty'](_0x2e4f5e)&&(_0x5c9d70+=_0x1ffa7a[_0x2e4f5e]);return _0x5c9d70;}['createVert'+'exDefines'](_0x444992,_0x2f242b){const _0x443abe=new Map(_0x444992['defines']);return _0x444992['mesh']&&_0x443abe['set']('USE_MESH',''),_0x444992['meshUv']&&_0x443abe['set']('USE_MESH_U'+'V',''),_0x444992['localSpace']&&_0x443abe['set']('LOCAL_SPAC'+'E',''),_0x444992['screenSpac'+'e']&&_0x443abe['set']('SCREEN_SPA'+'CE',''),_0x444992['animTex']&&_0x443abe['set']('ANIMTEX',''),_0x444992['soft']>0x415*0x2+0x4*0x8a3+-0x2ab6&&_0x443abe['set']('SOFT',''),_0x444992['stretch']>0x7*-0x3c9+0x4ed*-0x4+0x2e33*0x1&&_0x443abe['set']('STRETCH',''),_0x444992['customFace']&&_0x443abe['set']('CUSTOM_FAC'+'E',''),_0x444992['pack8']&&_0x443abe['set']('PACK8',''),_0x444992['localSpace']&&_0x443abe['set']('LOCAL_SPAC'+'E',''),_0x444992['animTexLoo'+'p']&&_0x443abe['set']('ANIMTEX_LO'+'OP',''),_0x444992['wrap']&&_0x443abe['set']('WRAP',''),_0x444992['alignToMot'+'ion']&&_0x443abe['set']('ALIGN_TO_M'+'OTION',''),_0x443abe['set']('NORMAL',g_[_0x444992['normal']]),_0x2f242b['particle_v'+'ertexData']=Pe,_0x444992['mesh']&&_0x444992['meshUv']&&(_0x2f242b['particle_u'+'v']=Yt),_0x444992['useCpu']&&(_0x2f242b['particle_v'+'ertexData2']=Oh,_0x2f242b['particle_v'+'ertexData3']=$u,_0x2f242b['particle_v'+'ertexData4']=Xu,_0x2f242b['particle_v'+'ertexData5']=qu),_0x443abe;}['createFrag'+'mentDefine'+'s'](_0x45a611){const _0x4c5b64=new Map(_0x45a611['defines']);return _0x45a611['soft']>0xbf*0x26+0x1*-0x1ef7+0x29d&&_0x4c5b64['set']('SOFT',''),_0x45a611['halflamber'+'t']&&_0x4c5b64['set']('HALF_LAMBE'+'RT',''),_0x4c5b64['set']('NORMAL',g_[_0x45a611['normal']]),_0x4c5b64['set']('BLEND',sy[_0x45a611['blend']]),_0x4c5b64;}['createShad'+'erDefiniti'+'on'](_0x34081b,_0x564fd7){const _0x3a0efb=_0x34081b['isWebGPU']?st:ze,_0x57f2ac=Ce['get'](_0x34081b,_0x3a0efb),_0x194113={},_0x22ef17=this['createVert'+'exDefines'](_0x564fd7,_0x194113),_0x449f7b=this['createFrag'+'mentDefine'+'s'](_0x564fd7),_0x2b869a='PARTICLE_'+(_0x564fd7['useCpu']?'CPU':'GPU')+'\x0a';_0x22ef17['set'](_0x2b869a,''),_0x449f7b['set'](_0x2b869a,'');const _0x5e1101=new Map(_0x57f2ac);return $t['createDefi'+'nition'](_0x34081b,{'name':'ParticleSh'+'ader','shaderLanguage':_0x3a0efb,'attributes':_0x194113,'vertexCode':_0x57f2ac['get']('particle_s'+'haderVS'),'fragmentCode':_0x57f2ac['get']('particle_s'+'haderPS'),'fragmentDefines':_0x449f7b,'fragmentIncludes':_0x5e1101,'vertexIncludes':_0x5e1101,'vertexDefines':_0x22ef17});}}const PA=new CA();class MA extends ua{constructor(_0xac01e){super(),h(this,'emitter',null),(this['emitter']=_0xac01e,M['assert'](_0xac01e));}['getShaderV'+'ariant'](_0x32aee9){const {device:_0x55458e,scene:_0x490da9,cameraShaderParams:_0x1e58c5,objDefs:_0x2668fa}=_0x32aee9,{emitter:_0x568bff}=this,_0x1e46ae={'defines':Ut['getCoreDef'+'ines'](this,_0x32aee9),'pass':fa,'useCpu':this['emitter']['useCpu'],'normal':_0x568bff['lighting']?_0x568bff['normalMap']!==null?0x7cc*-0x5+0x1f5b+0x7a3:-0xf20+-0x477*-0x6+0x3*-0x3e3:-0xd*0x4b+0x1*-0x25be+0x298d,'halflambert':this['emitter']['halfLamber'+'t'],'stretch':this['emitter']['stretch'],'alignToMotion':this['emitter']['alignToMot'+'ion'],'soft':this['emitter']['depthSofte'+'ning'],'mesh':this['emitter']['useMesh'],'meshUv':_0x2668fa&bm,'gamma':(_0x1e58c5==null?void(0x15f*-0x6+0x5*0x5db+-0x1*0x150d):_0x1e58c5['shaderOutp'+'utGamma'])??ol,'toneMap':(_0x1e58c5==null?void(-0x19a4+-0xb2f*0x3+-0x3b31*-0x1):_0x1e58c5['toneMappin'+'g'])??Tm,'fog':_0x490da9&&!this['emitter']['noFog']?_0x490da9['fog']['type']:'none','wrap':this['emitter']['wrap']&&this['emitter']['wrapBounds'],'localSpace':this['emitter']['localSpace'],'screenSpace':_0x568bff['inTools']?!(0x24*0x98+0x2*0x3c8+-0x1cef*0x1):this['emitter']['screenSpac'+'e'],'blend':this['emitter']['blendType'],'animTex':this['emitter']['_isAnimate'+'d'](),'animTexLoop':this['emitter']['animLoop'],'pack8':this['emitter']['pack8'],'customFace':this['emitter']['orientatio'+'n']!==Vh},_0x211378=new Zc(_0x32aee9['viewUnifor'+'mFormat'],_0x32aee9['viewBindGr'+'oupFormat'],_0x32aee9['vertexForm'+'at']),_0x2d5e38=Cn(_0x55458e);return _0x2d5e38['register']('particle',PA),_0x2d5e38['getProgram']('particle',_0x1e46ae,_0x211378,this['userId']);}}const S_=[[-(-0x2499+-0x2*0xaee+-0x85a*-0x7),-(-0x1d52+0xb10+0x1243)],[0xd34+0x1742+-0x2475,-(0x12a9+-0xab8+-0x3f8*0x2)],[-0x4*0x3+-0x180b+-0x303*-0x8,0x4f5+-0x14ab+-0xfb7*-0x1],[-(0xd5a+-0x2*-0x10a+-0xb*0x167),0x17d+0x36f*-0x7+-0xfb*-0x17]];function ms(_0x2edbfa,_0x309dfc,_0x5323c2,_0x5788bc,_0x742cfe=Bt,_0x7e032f,_0x4629d4){let _0x916469=Te;_0x4629d4&&(_0x742cfe===Oe||_0x742cfe===hs)&&(_0x916469=_t);const _0xdd5f39=new _e(_0x2edbfa,{'width':_0x309dfc,'height':_0x5323c2,'format':_0x742cfe,'cubemap':!(0x1*0x1a06+-0x581*0x5+0x180),'mipmaps':!(-0x11*0xe3+0x1f6+0xd1e),'minFilter':_0x916469,'magFilter':_0x916469,'addressU':ue,'addressV':ue,'name':'ParticleSy'+'stemTextur'+'e'}),_0x1f46ec=_0xdd5f39['lock']();if(_0x742cfe===Oe||_0x742cfe===hs){const _0x3ecf4e=new Uint8Array(_0x5788bc['length']);for(let _0x4bb2e6=-0xb1*-0xb+0x11bf*0x1+-0x2*0xcad;_0x4bb2e6<_0x5788bc['length'];_0x4bb2e6++)_0x3ecf4e[_0x4bb2e6]=_0x5788bc[_0x4bb2e6]*_0x7e032f*(-0x324+-0x2*-0x95+0x2f9);_0x5788bc=_0x3ecf4e;}return _0x1f46ec['set'](_0x5788bc),_0xdd5f39['unlock'](),_0xdd5f39;}function y_(_0x12547e){return Math['max'](Math['min'](_0x12547e,-0x1a8d+0x1cf+0x18bf),-0xa0a+0xf45+-0x53b);}const v_=new Bs([-0x1c00+-0x269d+-0x1*-0x429d,0x12*-0xfb+-0x94b*0x4+0x36d2,-0x10bb*-0x1+-0xf63+-0x157,-0x1098*-0x2+0x7*0x55d+0x1*-0x46bb]),x_=new Bs([0x4cf+0x823*-0x2+0xb77,-0x204b+-0xff*0x2+0x224a,-0xbed+-0x1195+-0x5*-0x5e7,0x2fe*-0xa+-0x307*-0x1+0x1ae6*0x1]),T_=new Wr([-0x24ec+0x85e+-0x5*-0x5b6,0x247a+0xfa5+0xb*-0x4bd,-0x25a6+0xb*0x13d+-0x1*-0x1808,0x1785+0x1*-0x1715+-0x70],[0x1b2d+-0x12d*0x13+0x26b*-0x2,-0x15a8+-0x790+0x1d38,-0x2490+0x15d5+0xebc,0x1*-0x527+-0x1*-0x36e+-0x1*-0x1b9],[0x1*0x979+-0x14f9+-0x10*-0xb8,-0x25ab+-0x1fa5+0x8*0x8aa,0x11*0xf9+-0x2b5+-0xdd3*0x1,0x2390+-0x1180+-0x484*0x4]),IA=new Wr([0xb*0x35f+0x1b6f+0x1021*-0x4,0x17c2+-0x612+-0x11af,0x129d*0x1+0x1*-0x132b+0x8f,-0x101*-0x21+-0x212b*0x1+0xb],[-0xc22+-0x1*0x114a+0x10d*0x1c,-0xb3f+-0x282*-0x1+0x8be,-0x169*-0x10+0x1bad+-0x323c,0x1*0x214a+0x8*-0x12f+0x7*-0x367],[-0x1c96+0x1*0x214d+-0x4b7,0x14f9+-0x41c+-0x10dc,0x4a*0x1d+0x1*-0x24e6+-0x413*-0x7,0x10*-0x22a+-0x1404+-0x1237*-0x3]);let gi=0x2328+0xf26*-0x2+-0x4da;const Hl=0x3*0x62b+-0x12*-0xb7+0x17*-0x15d,Si=new Float32Array(0x1546+0x1e12+-0x11*0x305),wr=new te(),w_=new I(),Wl=new I(),$l=new I();let Rf,Sh;function ce(_0x1351dd,_0x26b253){Sh[_0x1351dd]!==void(0x23*-0xb9+0x3c4+0x1587*0x1)&&Sh[_0x1351dd]!==null?Rf[_0x1351dd]=Sh[_0x1351dd]:Rf[_0x1351dd]=_0x26b253;}function ky(_0x3547e3,_0xe069b0,_0x5a2651){return(_0x3547e3*(-0x1663*0x1+-0x8c6+0x2028)<<-0x1bef+-0x1693+-0x1949*-0x2|_0xe069b0*(-0x2ad+-0x4cc+0x878)<<-0x7e1+-0x437+0xc20|_0x5a2651*(0x21dd+0x67+-0x11*0x1f5))/(-0xb7*-0x2e+-0x7*-0x3d6+0x3*-0x13e9<<-0x2488+0x13*0x1b+-0x229f*-0x1);}function E_(_0x1b25b9,_0x18db84){const _0x297514=_0x1b25b9['length']/(0x1*0x1a61+-0x42f*-0x9+-0x25f*0x1b),_0xa8754f=new Array(_0x297514*(-0x15b6+0xc63*-0x3+-0x25b*-0x19));for(let _0x4535af=-0x2*0x124d+-0x3*-0xad+0x2293;_0x4535af<_0x297514;_0x4535af++)_0xa8754f[_0x4535af*(0x312+-0x24e0+0x21d2)]=_0x1b25b9[_0x4535af*(-0xb07+0x595+-0xb*-0x7f)],_0xa8754f[_0x4535af*(0x856+-0x2032+-0x20*-0xbf)+(0x1c4*0x1+-0x1cc8+-0x1*-0x1b05)]=_0x1b25b9[_0x4535af*(-0x975+-0x2*0x8e4+0x1b40)+(-0xb*0x332+-0x1*0x20d2+0x1*0x43f9)],_0xa8754f[_0x4535af*(-0x23ef+-0xd*0x209+-0xf9a*-0x4)+(-0x1*-0x1a26+0x8c2*-0x1+-0x1162)]=_0x1b25b9[_0x4535af*(-0x2418+0x5d*0x57+0x480)+(0x1f7b+0x4bd+-0x2436*0x1)],_0xa8754f[_0x4535af*(-0x181b+0x1f9f*0x1+-0x3*0x280)+(-0x471+-0x536*-0x1+-0xc2)]=ky(_0x18db84[_0x4535af*(-0xc*0x8+-0x1eae+0x1f11)],_0x18db84[_0x4535af*(0x2*0xfb3+-0x1e31*-0x1+-0x3d94)+(-0x2*-0xf7f+0x19b+0x1c*-0x12a)],_0x18db84[_0x4535af*(-0x3*-0x331+-0x10ae+0x71e*0x1)+(-0x5*-0x7c9+0x2340+-0x4a2b*0x1)]);return _0xa8754f;}function DA(_0x34824a,_0x272a30){const _0x2652ce=new Array(_0x272a30['length']*(-0x141*0x1+-0x87b+0x9c0*0x1));for(let _0x1b76da=-0x1b9e+-0x5*-0x211+0x1149;_0x1b76da<_0x272a30['length'];_0x1b76da++)_0x2652ce[_0x1b76da*(-0x4*-0x10f+-0x4*-0x7+0x454*-0x1)]=_0x34824a[_0x1b76da*(-0xc8c+0x209*0xd+0x6f3*-0x2)],_0x2652ce[_0x1b76da*(-0x3*0xb03+0x127a+0xe93)+(-0x245f+-0x50e*-0x3+0x1536)]=_0x34824a[_0x1b76da*(-0x61e+-0x2*-0x77a+0x3*-0x2f1)+(-0x3*0x991+0x9cc+0x12e8)],_0x2652ce[_0x1b76da*(0x14ad+0x7f*0xa+-0x199f)+(-0x1115*-0x1+0x8ed*0x2+-0x22ed)]=_0x34824a[_0x1b76da*(0x1c*-0x115+0x519*0x1+0x2*0xc9b)+(-0xbd3+-0x1ff4+0x2bc9)],_0x2652ce[_0x1b76da*(0x70f+-0x260b+0x1f00)+(-0x1d94+0x742+0x1655*0x1)]=_0x272a30[_0x1b76da];return _0x2652ce;}function LA(_0x2f1b49,_0x509377,_0x19e9ab,_0x18846c,_0x4165ce){const _0x261ec1=new Array(_0x2f1b49['length']*(0x41+-0x1c5a+0x1c1d));for(let _0x262bfa=0x2462+0x2609+0x1*-0x4a6b;_0x262bfa<_0x2f1b49['length'];_0x262bfa++)_0x261ec1[_0x262bfa*(0x1*0x10d+-0x72c+0x623*0x1)]=_0x2f1b49[_0x262bfa],_0x261ec1[_0x262bfa*(-0x16d7+0x4a2*-0x7+0x3749)+(-0x1*-0x2398+-0x4d5*0x1+-0x1ec2)]=_0x509377[_0x262bfa],_0x261ec1[_0x262bfa*(0xb0c+0x1c89+-0x2791)+(-0x1acb+0x27d*0x7+0x962)]=-0x9d4+0x1623*0x1+0x89*-0x17,_0x261ec1[_0x262bfa*(0x38a+0x2344+-0x26ca)+(0x3*0x31+-0x1905*-0x1+0x887*-0x3)]=ky(_0x19e9ab[_0x262bfa],_0x18846c[_0x262bfa],_0x4165ce[_0x262bfa]);return _0x261ec1;}function RA(_0x2ca6b2,_0x1dedc9){const _0x28127d=new Array(_0x2ca6b2['length']*(-0x15bc+-0x5*0x1f9+0x1*0x1f9d));for(let _0x4fac13=-0x3*-0x561+0xc68*-0x1+-0x3bb;_0x4fac13<_0x2ca6b2['length'];_0x4fac13++)_0x28127d[_0x4fac13*(0x4e6+0x1ef6+-0x23d8)]=_0x2ca6b2[_0x4fac13],_0x28127d[_0x4fac13*(-0x3b3*0x1+-0x3b*-0x83+0x1*-0x1a7a)+(-0x21c8+0x29*0xe2+-0x269)]=_0x1dedc9[_0x4fac13],_0x28127d[_0x4fac13*(-0x23fd+-0x1ed9+0x42da)+(-0x1*-0x38f+0x15*-0x19+-0x180)]=-0x1*-0x1e52+-0x24f4+-0x351*-0x2,_0x28127d[_0x4fac13*(0x1c56+-0x29b+-0x19b7)+(0x49d*0x2+-0xfe*0x13+0x1*0x9a3)]=-0x11bd+0x1d3c+-0xb7f;return _0x28127d;}function OA(_0x1fc2af){const _0x1a1e35=Math['max'](_0x1fc2af['rate'],_0x1fc2af['rate2'])*_0x1fc2af['numParticl'+'es']+_0x1fc2af['lifetime'];return Date['now']()+_0x1a1e35*(0x3*0xac0+0xaf4+-0x274c);}function FA(_0x888a71,_0x91bcb2){const _0x38cc9b=new Float32Array(_0x888a71['length']);for(let _0x2e58a7=0x1*-0x312+-0x1*-0x139e+-0x108c;_0x2e58a7<_0x888a71['length'];_0x2e58a7++)_0x38cc9b[_0x2e58a7]=_0x888a71[_0x2e58a7]-_0x91bcb2[_0x2e58a7];return _0x38cc9b;}function Lr(_0x256fc7,_0x176257){const _0xbe60b9=_0x176257['length'],_0xa757d3=_0x256fc7['length']/_0xbe60b9;for(let _0x1d7432=0x26f7+-0xc2d+-0x1aca;_0x1d7432<_0xa757d3;_0x1d7432++)for(let _0x121697=0x46*-0x3f+-0xd2b+0x1e65;_0x121697<_0xbe60b9;_0x121697++){const _0xae8d3b=Math['abs'](_0x256fc7[_0x1d7432*_0xbe60b9+_0x121697]);_0x176257[_0x121697]=Math['max'](_0x176257[_0x121697],_0xae8d3b);}}function NA(_0x1c0917,_0x485d5d){const _0x69f894=_0x485d5d['length'],_0xbfc7b8=_0x1c0917['length']/_0x69f894;for(let _0xeb7ee3=0x3c5+-0x21a0+0x1ddb*0x1;_0xeb7ee3<_0xbfc7b8;_0xeb7ee3++)for(let _0x2b4bd7=0x101b+0x173c+-0x2757;_0x2b4bd7<_0x69f894;_0x2b4bd7++)_0x1c0917[_0xeb7ee3*_0x69f894+_0x2b4bd7]/=_0x485d5d[_0x2b4bd7]===-0x1ced+0x2476+-0x789*0x1?0x306+-0x12d3+0xfce:_0x485d5d[_0x2b4bd7],_0x1c0917[_0xeb7ee3*_0x69f894+_0x2b4bd7]*=0x32b*0x1+-0x63*-0x13+0x2a1*-0x4+0.5,_0x1c0917[_0xeb7ee3*_0x69f894+_0x2b4bd7]+=-0x3*-0x8d9+0x1fb8+-0x13*0x311+0.5;}function Er(_0x2c3870,_0x48f632,_0xbda72f){const _0x236d6a=FA(_0x48f632,_0x2c3870);return Lr(_0x236d6a,_0xbda72f),NA(_0x236d6a,_0xbda72f),_0x236d6a;}const kA=new Ht();class UA{constructor(_0x1dfb8c,_0x48380b){h(this,'material',null),h(this,'internalTe'+'x0',null),h(this,'internalTe'+'x1',null),h(this,'internalTe'+'x2',null),h(this,'colorParam',null),this['graphicsDe'+'vice']=_0x1dfb8c;const _0xf02158=_0x1dfb8c,_0x27b35b=-0xc74+-0xe45+0x1ad9;this['precision']=_0x27b35b,this['_addTimeTi'+'me']=-0x8bf*0x2+0x1745+-0x5c7,Rf=this,Sh=_0x48380b,ce('numParticl'+'es',-0x1f*0xd9+-0x299+0x1ce1),this['numParticl'+'es']>_0x1dfb8c['maxTexture'+'Size']&&(M['warn']('WARNING:\x20c'+'an\x27t\x20creat'+'e\x20more\x20tha'+'n\x20'+_0x1dfb8c['maxTexture'+'Size']+('\x20particles'+'\x20on\x20this\x20d'+'evice.')),this['numParticl'+'es']=_0x1dfb8c['maxTexture'+'Size']),ce('rate',0xd13*0x1+0x3cb*-0x7+0x1ed*0x7),ce('rate2',this['rate']),ce('lifetime',-0x1403+0x214+0x1221),ce('emitterExt'+'ents',new I(0xd4c+0x4+-0xd50,0x1*-0xbf7+0x1b40+-0xf49*0x1,0xd2*-0x2d+-0x21d5+0x46bf*0x1)),ce('emitterExt'+'entsInner',new I(0x13*-0x26+-0x214d+0x241f,0x1*-0x2523+-0x19bd*0x1+-0x10*-0x3ee,0x166e+-0x1b*0x11f+0x7d7)),ce('emitterRad'+'ius',0x9*0xc5+0x1be3+-0x22d0),ce('emitterRad'+'iusInner',-0x2692+0x8*0x157+0x5*0x592),ce('emitterSha'+'pe',Ys),ce('initialVel'+'ocity',-0x2298+-0xbb6+0x2e4f),ce('wrap',!(0xb3e*0x2+-0x1876+-0x3*-0xa9)),ce('localSpace',!(-0x25bc+-0x617*0x2+0x31eb)),ce('screenSpac'+'e',!(0xc9b*0x1+-0xb77*-0x1+-0x1811)),ce('wrapBounds',null),ce('colorMap',this['defaultPar'+'amTexture']),ce('normalMap',null),ce('loop',!(0x51*0x2d+-0x1c13*-0x1+0x2a50*-0x1)),ce('preWarm',!(0x3*0x109+-0x19*-0x61+-0xc93)),ce('sort',Cf),ce('mode',dy),ce('scene',null),ce('lighting',!(0x15df+-0x85f*0x1+0xd7f*-0x1)),ce('halfLamber'+'t',!(0x1*0x14c2+-0x4c1*0x5+0x2*0x182)),ce('intensity',-0x1cb7+0x7*-0x1c+0x1d7c),ce('stretch',-0x1839+0x5*0x1b7+0x1*0xfa6),ce('alignToMot'+'ion',!(-0x9*0x2cd+-0x132*0x5+0x10*0x1f3)),ce('depthSofte'+'ning',0x13b6+0x77*0xf+-0x21*0xcf),ce('mesh',null),ce('particleNo'+'rmal',new I(0x2147+-0x4*0x232+-0x187f,0x20c2*0x1+0x93b+-0xa7f*0x4,-0x16d5+0x49e+0x1237)),ce('orientatio'+'n',Vh),ce('depthWrite',!(0x5db*-0x5+-0x12da+0x3022)),ce('noFog',!(0x226c+-0x1*0x368+-0x1f03)),ce('blendType',Gs),ce('node',null),ce('startAngle',0x2507+-0x3fd+-0x210a*0x1),ce('startAngle'+'2',this['startAngle']),ce('animTilesX',0xfb8+0x1d58+0x301*-0xf),ce('animTilesY',0x216f+0x10*-0x29+-0x1ede*0x1),ce('animStartF'+'rame',-0x1*-0xa06+0xf53+-0x1959),ce('animNumFra'+'mes',-0x1*-0x3c1+0x10f*0x1d+-0x2273*0x1),ce('animNumAni'+'mations',-0x1a84+-0x2*-0x24d+0x15eb),ce('animIndex',-0x5*-0x6ad+0x19db*-0x1+-0x786),ce('randomizeA'+'nimIndex',!(-0x7*-0x50e+0x1648+0x1fd*-0x1d)),ce('animSpeed',-0xa*-0x5a+0x34*0x5b+0x15ff*-0x1),ce('animLoop',!(0x1ddd+-0x108d+-0x470*0x3)),this['_gpuUpdate'+'r']=new bA(this,_0xf02158),this['_cpuUpdate'+'r']=new AA(this),this['emitterPos'+'Uniform']=new Float32Array(-0x1043+-0x62b*0x5+0x1*0x2f1d),this['wrapBounds'+'Uniform']=new Float32Array(-0x6d8+0xdd5+-0x6fa),this['emitterSca'+'leUniform']=new Float32Array([0x2ba+-0xce3*-0x1+-0xf9c,-0x1*0x105f+-0x436+0x1496,0x1771+0x109*0x10+0x14*-0x200]),ce('colorGraph',IA),ce('colorGraph'+'2',this['colorGraph']),ce('scaleGraph',x_),ce('scaleGraph'+'2',this['scaleGraph']),ce('alphaGraph',x_),ce('alphaGraph'+'2',this['alphaGraph']),ce('localVeloc'+'ityGraph',T_),ce('localVeloc'+'ityGraph2',this['localVeloc'+'ityGraph']),ce('velocityGr'+'aph',T_),ce('velocityGr'+'aph2',this['velocityGr'+'aph']),ce('rotationSp'+'eedGraph',v_),ce('rotationSp'+'eedGraph2',this['rotationSp'+'eedGraph']),ce('radialSpee'+'dGraph',v_),ce('radialSpee'+'dGraph2',this['radialSpee'+'dGraph']),this['animTilesP'+'arams']=new Float32Array(-0x509*0x1+0x1cde+-0x17d3),this['animParams']=new Float32Array(0xb*0x322+0xa4*-0x1f+-0x2*0x74b),this['animIndexP'+'arams']=new Float32Array(0x13f*-0x1+-0x73*0x11+0x2*0x472),this['vbToSort']=null,this['vbOld']=null,this['particleDi'+'stance']=null,this['camera']=null,this['swapTex']=!(0x11*0x15d+0x19*-0xbb+0x3*-0x1a3),this['useMesh']=!(-0x6c3*0x1+-0x3f+0x702),this['useCpu']=!_0x1dfb8c['supportsGp'+'uParticles'],this['pack8']=!(-0x893*-0x2+0x5af+0x16d5*-0x1),this['localBound'+'s']=new Ie(),this['worldBound'+'sNoTrail']=new Ie(),this['worldBound'+'sTrail']=[new Ie(),new Ie()],this['worldBound'+'s']=new Ie(),this['worldBound'+'sSize']=new I(),this['prevWorldB'+'oundsSize']=new I(),this['prevWorldB'+'oundsCente'+'r']=new I(),this['prevEmitte'+'rExtents']=this['emitterExt'+'ents'],this['prevEmitte'+'rRadius']=this['emitterRad'+'ius'],this['worldBound'+'sMul']=new I(),this['worldBound'+'sAdd']=new I(),this['timeToSwit'+'chBounds']=0x1bb*0x8+0x11*0x76+-0x15ae,this['shaderPart'+'icleUpdate'+'Respawn']=null,this['shaderPart'+'icleUpdate'+'NoRespawn']=null,this['shaderPart'+'icleUpdate'+'OnStop']=null,this['numParticl'+'eVerts']=-0x5*-0x574+-0xbb6+-0xf8e,this['numParticl'+'eIndices']=-0x35*-0x23+-0x2710+0x1fd1,this['material']=null,this['meshInstan'+'ce']=null,this['drawOrder']=-0x6*0x679+-0x3f2*-0x9+-0x1*-0x354,this['seed']=Math['random'](),this['fixedTimeS'+'tep']=(0x9*0x258+-0x206a+0xb53)/(0x1252+-0x1003+-0x213*0x1),this['maxSubStep'+'s']=0x16ca*0x1+-0x1*-0x20a3+0xb*-0x509,this['simTime']=-0x3dc+0x1*-0xcfa+0xa*0x1af,this['simTimeTot'+'al']=0x5cf*-0x2+0x12ba+0x34*-0x23,this['beenReset']=!(-0x255+-0x2*0x946+0xa2*0x21),this['_layer']=null,this['rebuild']();}get['defaultPar'+'amTexture'](){return M['assert'](this['graphicsDe'+'vice']),kA['get'](this['graphicsDe'+'vice'],()=>{const _0x2f5312=new Float32Array(-0x1*0x146e+0x1d48+0x45*-0x12);for(let _0x42d382=-0x1c2a+-0x1000+0x2c2a;_0x42d382<0x127c+-0x3*0xc1a+0x11e2;_0x42d382++)for(let _0x23401b=-0x550*-0x4+-0x71*0x1+-0x14cf;_0x23401b<-0x249b+-0x2656+0x1*0x4b01;_0x23401b++){const _0x4b04f8=_0x23401b+(-0x1d*0xa7+0x3*0x2a5+0xafd)-(0xc*-0x283+0x1746+0x6e6+0.5),_0x33aa25=_0x42d382+(-0x1*0x1525+-0x19*-0x17b+-0xfdd)-(-0x5*0x1e1+-0x138b*0x1+0x73e*0x4+0.5),_0x4a48ea=y_(0x210e*0x1+-0x15e9+0x5c*-0x1f-y_(Math['sqrt'](_0x4b04f8*_0x4b04f8+_0x33aa25*_0x33aa25)/(-0x1548+-0x7f0+-0x4*-0x752))-(0x16*-0x1b5+-0x1c0+0x274e*0x1+0.5)),_0x4e3a94=_0x42d382*(0x529*-0x4+-0x1036+-0x9*-0x41a)+_0x23401b;_0x2f5312[_0x4e3a94*(0x1a1f*-0x1+-0x1*-0xf8d+0x2*0x54b)]=-0x1cec+0x1f53+-0x266,_0x2f5312[_0x4e3a94*(-0xd7*0x5+-0x11d5+-0xa6*-0x22)+(0x1c9f+-0x181c+-0x482)]=-0x1*-0xe2d+-0xcb*0xf+-0x247,_0x2f5312[_0x4e3a94*(0x7b0+-0x8a2+0x2*0x7b)+(-0xeb7*0x1+-0xcf+0x2*0x7c4)]=0x157*-0x13+-0x5c0*-0x5+-0x34a,_0x2f5312[_0x4e3a94*(0x5*0x48+0x2643+-0x27a7)+(-0x197e+-0x18a0+0x3221)]=_0x4a48ea;}const _0x18816d=ms(this['graphicsDe'+'vice'],0x1*0x20e9+-0x1*-0x839+0x2912*-0x1,0xa75+-0x685+-0x3e0,_0x2f5312,hs,-0xd1+-0x593*-0x2+0x4*-0x295,!(-0x1b8a+0x2*-0xa1+0x1ccc));return _0x18816d['minFilter']=_t,_0x18816d['magFilter']=_t,_0x18816d;});}['onChangeCa'+'mera'](){this['resetMater'+'ial']();}['calculateB'+'oundsMad'](){this['worldBound'+'sMul']['x']=(-0x25a1+-0x1f64+-0x1e*-0x24d)/this['worldBound'+'sSize']['x'],this['worldBound'+'sMul']['y']=(-0xeed+0x9df*0x3+-0x1*0xeaf)/this['worldBound'+'sSize']['y'],this['worldBound'+'sMul']['z']=(0x192f+0x2*-0x6be+-0x3*0x3e6)/this['worldBound'+'sSize']['z'],this['worldBound'+'sAdd']['copy'](this['worldBound'+'s']['center'])['mul'](this['worldBound'+'sMul'])['mulScalar'](-(-0x1e9*0x2+0x169a+0x1*-0x12c7)),this['worldBound'+'sAdd']['x']+=0xd*0x47+-0x1e9*-0x1+-0x584+0.5,this['worldBound'+'sAdd']['y']+=0x1*-0x13f9+0x1a02+-0xf*0x67+0.5,this['worldBound'+'sAdd']['z']+=-0xc99+0x3*-0x4cd+0x480*0x6+0.5;}['calculateW'+'orldBounds'](){if(!this['node'])return;if(this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),!this['useCpu']){let _0x40ba02=!(-0x47*0x36+-0xdd4+0x127*0x19);this['emitterSha'+'pe']===Ys?_0x40ba02=!this['emitterExt'+'ents']['equals'](this['prevEmitte'+'rExtents']):_0x40ba02=this['emitterRad'+'ius']!==this['prevEmitte'+'rRadius'],_0x40ba02&&this['calculateL'+'ocalBounds']();}const _0x25d83b=this['node']['getWorldTr'+'ansform']();this['localSpace']?this['worldBound'+'sNoTrail']['copy'](this['localBound'+'s']):this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],_0x25d83b),this['worldBound'+'sTrail'][-0x2630+0x6f*0x43+0x1*0x923]['add'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][-0xc0f+0x1b62+0x4a*-0x35]['add'](this['worldBound'+'sNoTrail']);const _0x59aa69=this['simTimeTot'+'al'];_0x59aa69>=this['timeToSwit'+'chBounds']&&(this['worldBound'+'sTrail'][0x65*0x5a+-0x5*-0x173+-0x2ac1]['copy'](this['worldBound'+'sTrail'][-0x6ba+-0x4e1*-0x1+0x1da]),this['worldBound'+'sTrail'][0x1363+-0xc40+-0x722]['copy'](this['worldBound'+'sNoTrail']),this['timeToSwit'+'chBounds']=_0x59aa69+this['lifetime']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0x1*0x26fd+0x630*-0x1+-0x9*0x3a5]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](-0x8*-0x1f3+-0x221b+0x1285),this['localSpace']?(this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x25d83b),this['meshInstan'+'ce']['mesh']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x25d83b)):(this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['mesh']['aabb']['copy'](this['worldBound'+'s'])),this['meshInstan'+'ce']['_aabbVer']=-0x1*0xb73+0x1d*-0xc9+0x2239*0x1-this['meshInstan'+'ce']['_aabbVer'],this['pack8']&&this['calculateB'+'oundsMad']();}['resetWorld'+'Bounds'](){this['node']&&(this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0x1204+0x137*-0x4+-0xd28]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][-0x151f+0x852+-0xcce*-0x1]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][-0x1e5b+0x3cc*0x8+0x1*-0x5]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](-0x4f*-0x52+0x7d4+0x35*-0xa0),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['simTimeTot'+'al']=-0x3c2+-0x18a3+0x1c65,this['timeToSwit'+'chBounds']=-0x83d+-0x1*0x2653+0x2e90);}['calculateL'+'ocalBounds'](){let _0x317ae4=Number['MAX_VALUE'],_0x4b47a6=Number['MAX_VALUE'],_0xa1cecc=Number['MAX_VALUE'],_0xa05810=-Number['MAX_VALUE'],_0xec266f=-Number['MAX_VALUE'],_0x4bb4fe=-Number['MAX_VALUE'],_0x33fb93=-0x1b85+-0x20bf+0x13*0x32c,_0x3f573b=0x11c6+0xd9e+-0x1f64;const _0x4f305c=this['lifetime']/this['precision'],_0x201b33=[this['qVelocity'],this['qVelocity2']],_0x3dc8b3=[this['qLocalVelo'+'city'],this['qLocalVelo'+'city2']],_0x37247b=[0xc2f+-0xda3+0x3*0x7c,-0x9*-0x88+0x1461+-0x1929],_0x3a576a=[0xab8+0xbd4+-0x168c,-0x1e58+0x31*-0x1b+0x2383*0x1],_0x19422c=[-0x18de+-0x74a+-0x8*-0x405,-0x389*0x3+-0x254*0x2+0x1*0xf43],_0x5259de=[-0x103*0x26+0x121c+0x1456,-0x469*-0x3+-0xe*0x2c5+0x198b],_0x377334=[-0x22*0x4b+0x269*-0x8+0x1*0x1d3e,-0x2*0x3d7+-0x7f*-0x30+-0x46*0x3b];let _0x1d9954,_0x5d5780,_0x273d3b;for(let _0x54e4c3=-0xae*-0x36+0x198b+-0x3e3f;_0x54e4c3<this['precision']+(-0x13*-0x125+-0x21d5*-0x1+-0x3793);_0x54e4c3++){const _0x5259d4=Math['min'](_0x54e4c3,this['precision']-(0x1*-0x116f+0x2*0x87e+0x74));for(let _0xb6da6a=0x1f20+-0x4d0+-0x1a50;_0xb6da6a<-0x957+-0x17b*-0x4+0x36d;_0xb6da6a++)_0x1d9954=_0x3dc8b3[_0xb6da6a][_0x5259d4*(-0x26c8+0x19cd+0xcfe)+(0x191b+-0x137d+-0x59e)]*_0x4f305c+_0x37247b[_0xb6da6a],_0x5d5780=_0x3dc8b3[_0xb6da6a][_0x5259d4*(0x1*-0x227e+0x1*-0x1866+0x1*0x3ae7)+(0x1*-0xac+0x2*-0x303+0x6b3)]*_0x4f305c+_0x3a576a[_0xb6da6a],_0x273d3b=_0x3dc8b3[_0xb6da6a][_0x5259d4*(0x23f7+-0x75a*-0x3+0x3de*-0xf)+(-0x1095+-0x1352*0x1+0x23e9)]*_0x4f305c+_0x19422c[_0xb6da6a],_0x317ae4=Math['min'](_0x1d9954,_0x317ae4),_0x4b47a6=Math['min'](_0x5d5780,_0x4b47a6),_0xa1cecc=Math['min'](_0x273d3b,_0xa1cecc),_0xa05810=Math['max'](_0x1d9954,_0xa05810),_0xec266f=Math['max'](_0x5d5780,_0xec266f),_0x4bb4fe=Math['max'](_0x273d3b,_0x4bb4fe),_0x37247b[_0xb6da6a]=_0x1d9954,_0x3a576a[_0xb6da6a]=_0x5d5780,_0x19422c[_0xb6da6a]=_0x273d3b;for(let _0x2446eb=-0x51d*0x7+0xb*0x154+0x152f;_0x2446eb<0x5*0x2d4+-0x17e8+-0x9*-0x116;_0x2446eb++)_0x377334[_0x2446eb]+=_0x4f305c*Math['sqrt'](_0x201b33[_0x2446eb][_0x5259d4*(0x12fd+0x1bfd+0x445*-0xb)+(0x19cf*-0x1+0xb*0x289+-0x214)]*_0x201b33[_0x2446eb][_0x5259d4*(-0x4*0x425+0x74f*0x1+0x948)+(-0x2*0x11fc+-0xe6d+0x3265*0x1)]+_0x201b33[_0x2446eb][_0x5259d4*(-0x1*0xdd9+-0x25fb+-0x241*-0x17)+(-0x6e*0x16+-0x10*-0xc+-0x2e7*-0x3)]*_0x201b33[_0x2446eb][_0x5259d4*(-0x210c+0xd90+0x137f)+(0xe8e+0x1a41+-0x28ce*0x1)]+_0x201b33[_0x2446eb][_0x5259d4*(0x1bd7+0x15ef+-0x31c3*0x1)+(-0xbbc+-0x1eec+0x2aaa)]*_0x201b33[_0x2446eb][_0x5259d4*(-0x20c*0x6+0x22d*0x10+-0x1685)+(-0x162*-0xe+-0x26b*-0xb+-0x51b*0x9)]);_0x5259de[0x86*-0x48+-0x1e83*-0x1+0x72d]+=this['qRadialSpe'+'ed'][_0x5259d4]*_0x4f305c,_0x5259de[-0x7*0x2e1+0x817+0xc11]+=this['qRadialSpe'+'ed2'][_0x5259d4]*_0x4f305c,_0x33fb93=Math['max'](_0x33fb93,Math['max'](Math['abs'](_0x5259de[-0x102a+0x24a*-0x10+-0x1a65*-0x2]),Math['abs'](_0x5259de[0xa4d*-0x1+0x157c+-0x1b*0x6a]))),_0x3f573b=Math['max'](_0x3f573b,this['qScale'][_0x5259d4]);}this['emitterSha'+'pe']===Ys?(_0x1d9954=this['emitterExt'+'ents']['x']*(-0x61*-0x49+0x1e47+0x18*-0x26a+0.5),_0x5d5780=this['emitterExt'+'ents']['y']*(0x1*-0x64c+-0x10+-0x94*-0xb+0.5),_0x273d3b=this['emitterExt'+'ents']['z']*(0x1*-0x351+-0x33f*0x7+-0x8ae*-0x3+0.5)):(_0x1d9954=this['emitterRad'+'ius'],_0x5d5780=this['emitterRad'+'ius'],_0x273d3b=this['emitterRad'+'ius']);const _0x42148d=Math['max'](_0x377334[-0x6ac+0x53*-0x64+0x4*0x9c6],_0x377334[-0x1*0x9ad+0x5a8+0x406]);Wl['x']=_0x317ae4-_0x3f573b-_0x1d9954-_0x33fb93-_0x42148d,Wl['y']=_0x4b47a6-_0x3f573b-_0x5d5780-_0x33fb93-_0x42148d,Wl['z']=_0xa1cecc-_0x3f573b-_0x273d3b-_0x33fb93-_0x42148d,$l['x']=_0xa05810+_0x3f573b+_0x1d9954+_0x33fb93+_0x42148d,$l['y']=_0xec266f+_0x3f573b+_0x5d5780+_0x33fb93+_0x42148d,$l['z']=_0x4bb4fe+_0x3f573b+_0x273d3b+_0x33fb93+_0x42148d,this['localBound'+'s']['setMinMax'](Wl,$l);}['rebuild'](){const _0x26a8b3=this['graphicsDe'+'vice'];this['colorMap']===null&&(this['colorMap']=this['defaultPar'+'amTexture']),this['spawnBound'+'s']=this['emitterSha'+'pe']===Ys?this['emitterExt'+'ents']:this['emitterRad'+'ius'],this['useCpu']=this['useCpu']||this['sort']>Cf||_0x26a8b3['maxVertexT'+'extures']<=-0x15bf+-0xb*-0x2d6+-0x4e*0x1f||_0x26a8b3['fragmentUn'+'iformsCoun'+'t']<-0x9*0x11+0xb*-0x55+0x18*0x30||_0x26a8b3['forceCpuPa'+'rticles'],this['_destroyRe'+'sources'](),this['pack8']=(this['pack8']||!_0x26a8b3['textureFlo'+'atRenderab'+'le'])&&!this['useCpu'],gi=this['useCpu']||this['pack8']?-0x1*0x1bb5+0x245a+-0x8a1:-0x1721+-0x7*0x342+0x2df1,this['useMesh']=!!this['mesh'],this['numParticl'+'esPot']=Y['nextPowerO'+'fTwo'](this['numParticl'+'es']),this['rebuildGra'+'phs'](),this['calculateL'+'ocalBounds'](),this['resetWorld'+'Bounds'](),this['node']&&(this['worldBound'+'s']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0xbf*0x23+0x2*0x95c+0x17*-0x1f3]['copy'](this['worldBound'+'s']),this['worldBound'+'sTrail'][0x4b7+-0x1773+-0x27*-0x7b]['copy'](this['worldBound'+'s']),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](-0x101e+-0x1*-0x1803+0x7e3*-0x1),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['pack8']&&this['calculateB'+'oundsMad']()),this['vbToSort']=new Array(this['numParticl'+'es']);for(let _0x34b4ae=0xaa7+0x122e*0x1+-0x1cd5;_0x34b4ae<this['numParticl'+'es'];_0x34b4ae++)this['vbToSort'][_0x34b4ae]=[-0x1cf5+-0x1*-0x1205+0xaf0,-0x922+-0x28*-0x18+-0x1a*-0x35];this['particleDi'+'stance']=new Float32Array(this['numParticl'+'es']),this['_gpuUpdate'+'r']['randomize'](),this['particleTe'+'x']=new Float32Array(this['numParticl'+'esPot']*gi*Hl);const _0x39495a=this['node']===null||this['localSpace']?I['ZERO']:this['node']['getPositio'+'n']();this['emitterSha'+'pe']===Ys&&(this['node']===null||this['localSpace']?wr['setTRS'](I['ZERO'],le['IDENTITY'],this['spawnBound'+'s']):wr['setTRS'](I['ZERO'],this['node']['getRotatio'+'n'](),w_['copy'](this['spawnBound'+'s'])['mul'](this['node']['localScale'])),Si[-0xb*0x349+-0x5*-0x56d+-0x1*-0x902]=this['emitterExt'+'ents']['x']!==-0x42a+-0xf*-0x227+-0x1c1f?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0xd38+0x22af+0x2fe7*-0x1,Si[-0x7fd*0x1+-0x13f6+-0x6fd*-0x4]=this['emitterExt'+'ents']['y']!==0x4f4*-0x2+-0x1*0x12c+0xb14?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:-0x1e1d+0xb3f*-0x3+0x3fda,Si[0x1*-0x1151+-0xaad+0x400*0x7]=this['emitterExt'+'ents']['z']!==-0x5a*-0x13+-0x3*-0x649+-0x1989?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:-0x86a+-0x37*-0x15+-0x6f*-0x9);for(let _0xca29b4=-0x134f+0x2*-0xdb7+0x5*0x959;_0xca29b4<this['numParticl'+'es'];_0xca29b4++)this['_cpuUpdate'+'r']['calcSpawnP'+'osition'](this['particleTe'+'x'],wr,Si,_0x39495a,_0xca29b4),this['useCpu']&&(this['particleTe'+'x'][_0xca29b4*Hl+(-0x202c+0x1ad4+0x55b*0x1)+this['numParticl'+'esPot']*(-0x18b2+0x2410+-0x4*0x2d7)*Hl]=0x44*-0x8b+0x921+0x1bcc);this['particleTe'+'xStart']=new Float32Array(this['numParticl'+'esPot']*gi*Hl);for(let _0x5cc6c8=-0x1c2f+-0xa7c+0x13*0x209;_0x5cc6c8<this['particleTe'+'xStart']['length'];_0x5cc6c8++)this['particleTe'+'xStart'][_0x5cc6c8]=this['particleTe'+'x'][_0x5cc6c8];this['useCpu']||(this['pack8']?(this['particleTe'+'xIN']=ms(_0x26a8b3,this['numParticl'+'esPot'],gi,this['particleTe'+'x'],Oe,0x651+0x6c4+0xc*-0x117,!(0x1c42+-0xaf*0xb+-0x14bc)),this['particleTe'+'xOUT']=ms(_0x26a8b3,this['numParticl'+'esPot'],gi,this['particleTe'+'x'],Oe,-0x272*0x7+-0x1e2c+-0x2f4b*-0x1,!(-0x3*-0x378+-0xcf7+-0xa4*-0x4)),this['particleTe'+'xStart']=ms(_0x26a8b3,this['numParticl'+'esPot'],gi,this['particleTe'+'xStart'],Oe,0x962*0x2+-0xf62+0xad*-0x5,!(0x1a51+0xa*0x19f+-0x2a86))):(this['particleTe'+'xIN']=ms(_0x26a8b3,this['numParticl'+'esPot'],gi,this['particleTe'+'x']),this['particleTe'+'xOUT']=ms(_0x26a8b3,this['numParticl'+'esPot'],gi,this['particleTe'+'x']),this['particleTe'+'xStart']=ms(_0x26a8b3,this['numParticl'+'esPot'],gi,this['particleTe'+'xStart'])),this['rtParticle'+'TexIN']=new vt({'colorBuffer':this['particleTe'+'xIN'],'depth':!(0x26c4+-0xdcb+0x18f8*-0x1)}),this['rtParticle'+'TexOUT']=new vt({'colorBuffer':this['particleTe'+'xOUT'],'depth':!(-0x2324+-0x1*-0x8dd+-0xe8*-0x1d)}),this['swapTex']=!(-0x18f5+-0x5f*-0x53+-0x5d7));const _0xba495b=new Map();this['localSpace']&&_0xba495b['set']('LOCAL_SPAC'+'E',''),this['pack8']&&_0xba495b['set']('PACK8',''),this['emitterSha'+'pe']===Ys&&_0xba495b['set']('EMITTERSHA'+'PE_BOX','');const _0x1f4cb2='Shape:'+this['emitterSha'+'pe']+'-Pack:'+this['pack8']+'-Local:'+this['localSpace'],_0x38af30=Ce['get'](_0x26a8b3,_0x26a8b3['isWebGPU']?st:ze),_0x39e987=new Map(_0x38af30),_0x38067a={'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'particle_s'+'imulationP'+'S','fragmentDefines':_0xba495b,'fragmentIncludes':_0x39e987};_0x38067a['uniqueName']='ParticleUp'+'dateRespaw'+'n-'+_0x1f4cb2,_0xba495b['set']('RESPAWN',''),this['shaderPart'+'icleUpdate'+'Respawn']=Ut['createShad'+'er'](_0x26a8b3,_0x38067a),_0xba495b['delete']('RESPAWN'),_0x38067a['uniqueName']='ParticleUp'+'dateNoResp'+'awn-'+_0x1f4cb2,_0xba495b['set']('NO_RESPAWN',''),this['shaderPart'+'icleUpdate'+'NoRespawn']=Ut['createShad'+'er'](_0x26a8b3,_0x38067a),_0xba495b['delete']('NO_RESPAWN'),_0x38067a['uniqueName']='ParticleUp'+'dateStop-'+_0x1f4cb2,_0xba495b['set']('ON_STOP',''),this['shaderPart'+'icleUpdate'+'OnStop']=Ut['createShad'+'er'](_0x26a8b3,_0x38067a),this['numParticl'+'eVerts']=this['useMesh']?this['mesh']['vertexBuff'+'er']['numVertice'+'s']:-0x2*-0x12f7+-0x2066+-0x584,this['numParticl'+'eIndices']=this['useMesh']?this['mesh']['indexBuffe'+'r'][-0x12b*0x2+-0x1ea2+0x20f8]['numIndices']:0xc00+-0xbff+0x1*0x5,this['_allocate'](this['numParticl'+'es']);const _0x447845=new Ge(_0x26a8b3);_0x447845['vertexBuff'+'er']=this['vertexBuff'+'er'],_0x447845['indexBuffe'+'r'][0x1543+0x1a87+-0x6*0x7f7]=this['indexBuffe'+'r'],_0x447845['primitive'][-0x1133+-0x3a6*-0x2+0x9e7]['type']=zs,_0x447845['primitive'][-0x1cfd+-0x1*0x155e+0x325b]['base']=0x1817+-0x1*0x2563+0x94*0x17,_0x447845['primitive'][-0x14d7+-0x50*-0x68+-0xba9]['count']=this['numParticl'+'es']*this['numParticl'+'eIndices'],_0x447845['primitive'][-0x23a4+-0x2bd+0x2661*0x1]['indexed']=!(-0x24a4+0x191a+-0x1*-0xb8a),this['material']=this['_createMat'+'erial'](),this['resetMater'+'ial']();const _0x37a07d=this['meshInstan'+'ce']?this['meshInstan'+'ce']['visible']:!(0x2*0xc58+0x15a9+-0x2e59*0x1);this['meshInstan'+'ce']=new We(_0x447845,this['material'],this['node']),this['meshInstan'+'ce']['pick']=!(-0x1dfa+-0x11e1*0x1+-0x6*-0x7fa),this['meshInstan'+'ce']['updateKey'](),this['meshInstan'+'ce']['cull']=!(-0x1*-0x1003+0x12ae+0x6b*-0x53),this['localSpace']?this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],this['node']['getWorldTr'+'ansform']()):this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['_updateAab'+'b']=!(-0xefc*0x1+0x2515+0x2*-0xb0c),this['meshInstan'+'ce']['visible']=_0x37a07d,this['_setMateri'+'alTextures'](),this['resetTime'](),this['addTime'](0x27c+0x1f0*0x2+-0x65c,!(-0x1ebc*0x1+-0x2*0x10de+-0x4079*-0x1)),this['preWarm']&&this['prewarm'](this['lifetime']);}['_isAnimate'+'d'](){return this['animNumFra'+'mes']>=0x237d+0x14*0x5c+-0x2aac&&(this['animTilesX']>-0x5*-0x23+-0xa44+0x996||this['animTilesY']>-0xe16+-0x5*-0x7ac+-0x1845)&&(this['colorMap']&&this['colorMap']!==this['defaultPar'+'amTexture']||this['normalMap']);}['rebuildGra'+'phs'](){const _0x665485=this['precision'],_0x5d24a4=this['graphicsDe'+'vice'];this['qLocalVelo'+'city']=this['localVeloc'+'ityGraph']['quantize'](_0x665485),this['qVelocity']=this['velocityGr'+'aph']['quantize'](_0x665485),this['qColor']=this['colorGraph']['quantizeCl'+'amped'](_0x665485,0x1bef+0x18a*-0x5+0x9d*-0x21,-0x1*0x10f3+-0x1*-0x1e56+-0xd62*0x1),this['qRotSpeed']=this['rotationSp'+'eedGraph']['quantize'](_0x665485),this['qScale']=this['scaleGraph']['quantize'](_0x665485),this['qAlpha']=this['alphaGraph']['quantize'](_0x665485),this['qRadialSpe'+'ed']=this['radialSpee'+'dGraph']['quantize'](_0x665485),this['qLocalVelo'+'city2']=this['localVeloc'+'ityGraph2']['quantize'](_0x665485),this['qVelocity2']=this['velocityGr'+'aph2']['quantize'](_0x665485),this['qColor2']=this['colorGraph'+'2']['quantizeCl'+'amped'](_0x665485,0x1*0x1ebd+0x1*-0x361+-0x11*0x19c,-0x2*-0x3f5+0x224a+-0x2a33),this['qRotSpeed2']=this['rotationSp'+'eedGraph2']['quantize'](_0x665485),this['qScale2']=this['scaleGraph'+'2']['quantize'](_0x665485),this['qAlpha2']=this['alphaGraph'+'2']['quantize'](_0x665485),this['qRadialSpe'+'ed2']=this['radialSpee'+'dGraph2']['quantize'](_0x665485);for(let _0x42414f=0x993+0x133f+0x1b2*-0x11;_0x42414f<_0x665485;_0x42414f++)this['qRotSpeed'][_0x42414f]*=Y['DEG_TO_RAD'],this['qRotSpeed2'][_0x42414f]*=Y['DEG_TO_RAD'];if(this['localVeloc'+'ityUMax']=new Float32Array(0x35*-0x29+0xe3d+-0xd*0x71),this['velocityUM'+'ax']=new Float32Array(0x6*0x335+0x2478*-0x1+0x113d),this['colorUMax']=new Float32Array(-0x1d*0x2a+0x2461+-0x1f9c*0x1),this['rotSpeedUM'+'ax']=[-0x35*0x98+0x125*-0x13+0x2cd*0x13],this['scaleUMax']=[0xeb1+0x1*-0x1362+-0x1*-0x4b1],this['alphaUMax']=[0x1*-0x20e3+0x2e*-0x67+0x3b*0xdf],this['radialSpee'+'dUMax']=[-0x52c*0x1+-0x1c8d+0x21b9],this['qLocalVelo'+'cityDiv']=Er(this['qLocalVelo'+'city'],this['qLocalVelo'+'city2'],this['localVeloc'+'ityUMax']),this['qVelocityD'+'iv']=Er(this['qVelocity'],this['qVelocity2'],this['velocityUM'+'ax']),this['qColorDiv']=Er(this['qColor'],this['qColor2'],this['colorUMax']),this['qRotSpeedD'+'iv']=Er(this['qRotSpeed'],this['qRotSpeed2'],this['rotSpeedUM'+'ax']),this['qScaleDiv']=Er(this['qScale'],this['qScale2'],this['scaleUMax']),this['qAlphaDiv']=Er(this['qAlpha'],this['qAlpha2'],this['alphaUMax']),this['qRadialSpe'+'edDiv']=Er(this['qRadialSpe'+'ed'],this['qRadialSpe'+'ed2'],this['radialSpee'+'dUMax']),this['pack8']){const _0x55936c=[-0x74*0x4+-0x80*-0x49+-0x22b0,0x225c+-0x1*0xf82+-0x12da,-0x2*-0x408+-0x204d+0x183d];Lr(this['qVelocity'],_0x55936c);const _0x47b6a4=[0x180+0x32d+0x7*-0xab,-0xccb+-0x65a*0x6+0x32e7,0x192d+0x2*0x14b+-0x941*0x3];Lr(this['qVelocity2'],_0x47b6a4);const _0x4bd6f6=[0x2*-0xcd2+0x218f+-0x7eb,-0x150a*0x1+0xa72+0xa98,-0x2455*0x1+0x2053+-0x39*-0x12];Lr(this['qLocalVelo'+'city'],_0x4bd6f6);const _0x2d5f21=[-0x2*0x734+-0x567*-0x1+-0x5*-0x1cd,0x1276+-0x2b7+0x1d*-0x8b,0x1467*0x1+-0x3*0x43b+0x2a*-0x2f];Lr(this['qLocalVelo'+'city2'],_0x2d5f21);const _0x38291d=[-0x174f+0x1*0x22c9+0x71*-0x1a];Lr(this['qRadialSpe'+'ed'],_0x38291d);const _0x1a2d3f=[-0x1282+0x2407*-0x1+0x25f*0x17];Lr(this['qRadialSpe'+'ed2'],_0x1a2d3f);let _0x5748cd=Math['max'](_0x55936c[0x160+-0x138*-0x12+0x4*-0x5d4],_0x47b6a4[-0x1d26+0x1d62*0x1+-0xa*0x6]);_0x5748cd=Math['max'](_0x5748cd,_0x55936c[-0x67*-0x4d+0x1a66+0x1b0*-0x22]),_0x5748cd=Math['max'](_0x5748cd,_0x47b6a4[0x866+-0x9b4+0x14f]),_0x5748cd=Math['max'](_0x5748cd,_0x55936c[0x1c8*-0x4+0x2*0xd6d+-0x13b8]),_0x5748cd=Math['max'](_0x5748cd,_0x47b6a4[0x1b87+0x259f*0x1+0x5ec*-0xb]);let _0x22fd92=Math['max'](_0x4bd6f6[0x1d0d+0x24bb+-0x1072*0x4],_0x2d5f21[0x1560+-0x16d+-0x13f3]);_0x22fd92=Math['max'](_0x22fd92,_0x4bd6f6[0x2f3*-0x5+0x7*0x12a+0x69a]),_0x22fd92=Math['max'](_0x22fd92,_0x2d5f21[0x37d+0x9be*-0x2+0x1000]),_0x22fd92=Math['max'](_0x22fd92,_0x4bd6f6[0x1ac4+-0x1fa2*0x1+0x4e0]),_0x22fd92=Math['max'](_0x22fd92,_0x2d5f21[0x1b06+-0x2003+0x4ff]);const _0x2d69a2=Math['max'](_0x38291d[0x1*-0x530+-0x3*0x44b+0x1211],_0x1a2d3f[-0x92+-0xa67+0x1*0xaf9]);this['maxVel']=_0x5748cd+_0x22fd92+_0x2d69a2;}this['useCpu']||(this['internalTe'+'x0']=ms(_0x5d24a4,_0x665485,0x252e+-0x182b+-0xd02,E_(this['qLocalVelo'+'city'],this['qLocalVelo'+'cityDiv'])),this['internalTe'+'x1']=ms(_0x5d24a4,_0x665485,-0x68a+0x13d*-0x6+-0x7*-0x1ff,E_(this['qVelocity'],this['qVelocityD'+'iv'])),this['internalTe'+'x2']=ms(_0x5d24a4,_0x665485,-0x1b7*-0x3+0x10b9+-0x1*0x15dd,LA(this['qRotSpeed'],this['qScale'],this['qScaleDiv'],this['qRotSpeedD'+'iv'],this['qAlphaDiv'])),this['internalTe'+'x3']=ms(_0x5d24a4,_0x665485,0x19fd+-0x235e+0x962,RA(this['qRadialSpe'+'ed'],this['qRadialSpe'+'edDiv']))),this['colorParam']=ms(_0x5d24a4,_0x665485,-0x2*0x1231+-0x13db+-0x2e*-0x139,DA(this['qColor'],this['qAlpha']),hs,-0x1*-0xba1+-0x2564*0x1+0x1*0x19c4,!(-0x25*0x107+0x22aa+0x359*0x1));}['_setMateri'+'alTextures'](){this['colorMap']&&(M['call'](()=>{xS(this['colorMap']['format'])&&M['warnOnce']('ParticleEm'+'itter:\x20col'+'orMap\x20text'+'ure\x20['+this['colorMap']['name']+(']\x20is\x20not\x20u'+'sing\x20sRGB\x20'+'format.\x20Pl'+'ease\x20corre'+'ct\x20it\x20for\x20'+'the\x20correc'+'t\x20renderin'+'g.'),this['colorMap']);}),this['material']['setParamet'+'er']('colorMap',this['colorMap']),this['lighting']&&this['normalMap']&&this['material']['setParamet'+'er']('normalMap',this['normalMap']));}['_createMat'+'erial'](){const _0x12839f=new MA(this);return _0x12839f['name']='EmitterMat'+'erial:'+this['node']['name'],_0x12839f['cull']=xt,_0x12839f['alphaWrite']=!(-0x1bda+0x87a+-0x29*-0x79),_0x12839f['blendType']=this['blendType'],_0x12839f['depthWrite']=this['depthWrite'],_0x12839f;}['resetMater'+'ial'](){const _0x49bb33=this['material'];_0x49bb33['setParamet'+'er']('stretch',this['stretch']),this['_isAnimate'+'d']()&&(_0x49bb33['setParamet'+'er']('animTexTil'+'esParams',this['animTilesP'+'arams']),_0x49bb33['setParamet'+'er']('animTexPar'+'ams',this['animParams']),_0x49bb33['setParamet'+'er']('animTexInd'+'exParams',this['animIndexP'+'arams'])),_0x49bb33['setParamet'+'er']('colorMult',this['intensity']),this['useCpu']||(_0x49bb33['setParamet'+'er']('internalTe'+'x0',this['internalTe'+'x0']),_0x49bb33['setParamet'+'er']('internalTe'+'x1',this['internalTe'+'x1']),_0x49bb33['setParamet'+'er']('internalTe'+'x2',this['internalTe'+'x2']),_0x49bb33['setParamet'+'er']('internalTe'+'x3',this['internalTe'+'x3'])),_0x49bb33['setParamet'+'er']('colorParam',this['colorParam']),_0x49bb33['setParamet'+'er']('numParticl'+'es',this['numParticl'+'es']),_0x49bb33['setParamet'+'er']('numParticl'+'esPot',this['numParticl'+'esPot']),_0x49bb33['setParamet'+'er']('lifetime',this['lifetime']),_0x49bb33['setParamet'+'er']('rate',this['rate']),_0x49bb33['setParamet'+'er']('rateDiv',this['rate2']-this['rate']),_0x49bb33['setParamet'+'er']('seed',this['seed']),_0x49bb33['setParamet'+'er']('scaleDivMu'+'lt',this['scaleUMax'][-0x3*0xb02+-0xf9*0x8+0x28ce]),_0x49bb33['setParamet'+'er']('alphaDivMu'+'lt',this['alphaUMax'][-0x206b*0x1+-0xcce*-0x1+0x139d]),_0x49bb33['setParamet'+'er']('radialSpee'+'dDivMult',this['radialSpee'+'dUMax'][-0x4cf*-0x6+0x78b+-0x4d*0x79]),_0x49bb33['setParamet'+'er']('graphNumSa'+'mples',this['precision']),_0x49bb33['setParamet'+'er']('graphSampl'+'eSize',(0x4*0x8ac+0x29a+-0x19f*0x17)/this['precision']),_0x49bb33['setParamet'+'er']('emitterSca'+'le',new Float32Array([0xcc3+-0xd*-0x88+-0x13aa,-0x2377+-0x1*0x99b+-0x1*-0x2d13,0x1bcd+-0x25*0x27+0x5d*-0x3d])),this['pack8']&&(this['_gpuUpdate'+'r']['_setInputB'+'ounds'](),_0x49bb33['setParamet'+'er']('inBoundsSi'+'ze',this['_gpuUpdate'+'r']['inBoundsSi'+'zeUniform']),_0x49bb33['setParamet'+'er']('inBoundsCe'+'nter',this['_gpuUpdate'+'r']['inBoundsCe'+'nterUnifor'+'m']),_0x49bb33['setParamet'+'er']('maxVel',this['maxVel'])),this['wrap']&&this['wrapBounds']&&(this['wrapBounds'+'Uniform'][0x19a6+0x15*-0x8f+-0xdeb]=this['wrapBounds']['x'],this['wrapBounds'+'Uniform'][-0x179+0xc5*0x1d+-0x14d7]=this['wrapBounds']['y'],this['wrapBounds'+'Uniform'][0x3f0+-0xc3b*-0x2+-0x1c64]=this['wrapBounds']['z'],_0x49bb33['setParamet'+'er']('wrapBounds',this['wrapBounds'+'Uniform'])),this['_setMateri'+'alTextures'](),this['depthSofte'+'ning']>0x1ce5+-0x1db6+0x13*0xb&&_0x49bb33['setParamet'+'er']('softening',(0x14*-0xa9+0x26*0x6d+0x1*-0x2f9)/(this['depthSofte'+'ning']*this['depthSofte'+'ning']*(-0x19bc+0x1ecb+-0x4ab))),this['stretch']>-0xa0+0xb5d*-0x1+-0x21*-0x5d&&(_0x49bb33['cull']=xt),this['_compParti'+'cleFacePar'+'ams']();}['_compParti'+'cleFacePar'+'ams'](){let _0x192bec,_0x159fd3;if(this['orientatio'+'n']===Vh)_0x192bec=new Float32Array([-0x2*-0xde2+-0x1619+-0x32*0x1d,0x5*-0x78e+0x4*0x43f+0x14ca,-0xd1c*-0x1+0x1*-0x199f+0xc83]),_0x159fd3=new Float32Array([-0x1ab3*-0x1+-0x8*0x32+0x2cb*-0x9,-0x1ff2*-0x1+-0xb*-0x1+-0x1ffd,-0x2069+-0x6db+0x2745]);else{let _0x353834;this['orientatio'+'n']===ZT?_0x353834=this['particleNo'+'rmal']['normalize']():_0x353834=(this['node']===null?te['IDENTITY']:this['node']['getWorldTr'+'ansform']())['transformV'+'ector'](this['particleNo'+'rmal'])['normalize']();const _0x16aa2f=new I(-0x183*0x2+-0x31f+0x626,0x1*-0x197+-0x1*-0x1e4e+-0x1cb7*0x1,0x13a6+0x1*0x1b91+0x11*-0x2c7);Math['abs'](_0x16aa2f['dot'](_0x353834))===0x2*0xe5+0x18*0x14b+0x1f*-0x10f&&_0x16aa2f['set'](0x128a+-0xf33+-0x357,-0x14f1*0x1+-0x17e+0x1*0x166f,-0xd*0x146+-0x621+0x16b0);const _0x5bb82f=new I()['cross'](_0x353834,_0x16aa2f)['normalize']();_0x16aa2f['cross'](_0x5bb82f,_0x353834)['normalize'](),_0x192bec=new Float32Array([_0x16aa2f['x'],_0x16aa2f['y'],_0x16aa2f['z']]),_0x159fd3=new Float32Array([_0x5bb82f['x'],_0x5bb82f['y'],_0x5bb82f['z']]);}this['material']['setParamet'+'er']('faceTangen'+'t',_0x192bec),this['material']['setParamet'+'er']('faceBinorm',_0x159fd3);}['getVertexI'+'nfo'](){const _0x2f67cd=[];return this['useCpu']?_0x2f67cd['push']({'semantic':vf,'components':0x4,'type':Be},{'semantic':Oh,'components':0x4,'type':Be},{'semantic':$u,'components':0x4,'type':Be},{'semantic':Xu,'components':0x1,'type':Be},{'semantic':qu,'components':this['useMesh']?0x21fb*0x1+-0x1638+-0xbbf:-0x124b+0x24ce+0x3*-0x62b,'type':Be}):(_0x2f67cd['push']({'semantic':vf,'components':0x4,'type':Be}),this['useMesh']&&_0x2f67cd['push']({'semantic':Oh,'components':0x2,'type':Be})),_0x2f67cd;}['_allocate'](_0x330fb6){const _0x138c99=_0x330fb6*this['numParticl'+'eVerts'],_0x5b5bf7=_0x330fb6*this['numParticl'+'eIndices'];if(this['vertexBuff'+'er']===void(-0x1*0xe33+-0x34a+-0x197*-0xb)||this['vertexBuff'+'er']['getNumVert'+'ices']()!==_0x138c99){const _0x1cbe77=this['getVertexI'+'nfo'](),_0x9ac875=new zt(this['graphicsDe'+'vice'],_0x1cbe77);this['vertexBuff'+'er']=new xs(this['graphicsDe'+'vice'],_0x9ac875,_0x138c99,{'usage':Mh}),this['indexBuffe'+'r']=new dr(this['graphicsDe'+'vice'],hr,_0x5b5bf7);const _0x3719db=new Float32Array(this['vertexBuff'+'er']['lock']());let _0x44aa99,_0x2bc4ef,_0x58f506;if(this['useMesh']){_0x44aa99=new Float32Array(this['mesh']['vertexBuff'+'er']['lock']()),_0x2bc4ef=_0x44aa99['length']/this['mesh']['vertexBuff'+'er']['numVertice'+'s'];for(let _0x304a65=0x1169+0x1c12+-0x2d7b;_0x304a65<this['mesh']['vertexBuff'+'er']['format']['elements']['length'];_0x304a65++)if(this['mesh']['vertexBuff'+'er']['format']['elements'][_0x304a65]['name']===Yt){_0x58f506=this['mesh']['vertexBuff'+'er']['format']['elements'][_0x304a65]['offset']/(-0x2a8*-0x8+0x454+-0x1990);break;}}for(let _0x418397=-0x1e51*-0x1+0x236b+-0x41bc;_0x418397<_0x138c99;_0x418397++){const _0x583f6e=Math['floor'](_0x418397/this['numParticl'+'eVerts']);if(this['useMesh']){const _0x13a855=_0x418397%this['numParticl'+'eVerts'];_0x3719db[_0x418397*(-0xdcf+-0x1c84+0x2a59)]=_0x44aa99[_0x13a855*_0x2bc4ef],_0x3719db[_0x418397*(-0x1cb3+0x1b7*-0x3+0x1fe*0x11)+(0x19c*0x7+-0x1045+0x502)]=_0x44aa99[_0x13a855*_0x2bc4ef+(0x28*0x8b+0x57d+-0x1b34)],_0x3719db[_0x418397*(-0x12*0x1d3+-0x101d+0x3f*0xc7)+(-0xb62*-0x1+0x20a0+-0x2*0x1600)]=_0x44aa99[_0x13a855*_0x2bc4ef+(-0x14*-0x4+-0x1a9a+-0x2c*-0x99)],_0x3719db[_0x418397*(0x4*-0x243+0xaf*0x3+0x257*0x3)+(0xaba*-0x1+-0x634*0x3+0x1d59)]=_0x583f6e,_0x3719db[_0x418397*(0x47*-0x2+0x1017*0x1+-0xf83)+(-0x5*0x19f+0x2451*-0x1+0x2c70)]=_0x44aa99[_0x13a855*_0x2bc4ef+_0x58f506+(0x1f38+0x42d*0x7+-0x3c73*0x1)],_0x3719db[_0x418397*(0x1*-0x1f15+0x71*0xb+-0xd20*-0x2)+(-0xbc9+-0x1fde+0x2bac)]=-0x44e+-0x76a+0xbb9-_0x44aa99[_0x13a855*_0x2bc4ef+_0x58f506+(-0x11d5+0x23b5+-0x4b*0x3d)];}else{const _0x5a6b70=_0x418397%(0xf*-0x18f+0x499+0x12cc);_0x3719db[_0x418397*(0x131d+-0x1a3d+0x724)]=S_[_0x5a6b70][0xea5+0x18fd+-0x1*0x27a2],_0x3719db[_0x418397*(-0x2272+-0x114*0x9+0x2c2a)+(0x1d39*0x1+0x11*0x15a+0x22*-0x189)]=S_[_0x5a6b70][0x1*-0x17c1+-0x20e*-0x1+0x15b4],_0x3719db[_0x418397*(0x232+-0x9b*0x3b+0x1*0x218b)+(0xa60*0x1+-0x232b+0x18cd)]=-0x84*0x35+0x17ec+-0x1*-0x368,_0x3719db[_0x418397*(-0x1d6e*-0x1+0x23ef+-0x4159)+(0x1*0xe3b+-0x298+-0x7c*0x18)]=_0x583f6e;}}this['useCpu']&&(this['vbCPU']=new Float32Array(_0x3719db),this['vbOld']=new Float32Array(this['vbCPU']['length'])),this['vertexBuff'+'er']['unlock'](),this['useMesh']&&this['mesh']['vertexBuff'+'er']['unlock']();let _0x3b0463=0x4*-0x8ef+0x44b+0x1f71*0x1;const _0x15ae1f=new Uint32Array(this['indexBuffe'+'r']['lock']());if(this['useMesh']){const _0x11ceec=this['mesh']['indexBuffe'+'r'][0x4d*-0x4d+-0x1c6b+0x3394];_0x44aa99=new Bh[_0x11ceec['format']](_0x11ceec['lock']());}for(let _0x27125d=-0x1ffc+-0x2*-0x1246+-0x8*0x92;_0x27125d<_0x330fb6;_0x27125d++)if(this['useMesh']){for(let _0x160279=0xf*0x178+-0x62b*0x6+0xefa;_0x160279<this['numParticl'+'eIndices'];_0x160279++)_0x15ae1f[_0x27125d*this['numParticl'+'eIndices']+_0x160279]=_0x44aa99[_0x160279]+_0x27125d*this['numParticl'+'eVerts'];}else{const _0x1dc8db=_0x27125d*(0xe2*-0x21+0x4da*-0x3+0x2bb4);_0x15ae1f[_0x3b0463++]=_0x1dc8db,_0x15ae1f[_0x3b0463++]=_0x1dc8db+(0x913+0x1*-0x155d+0xc4b),_0x15ae1f[_0x3b0463++]=_0x1dc8db+(-0x1*-0x1b3b+-0x230e+0x7d5*0x1),_0x15ae1f[_0x3b0463++]=_0x1dc8db,_0x15ae1f[_0x3b0463++]=_0x1dc8db+(0x3f1*0x8+0x3da*-0x4+-0x101e),_0x15ae1f[_0x3b0463++]=_0x1dc8db+(0x1a19*0x1+-0x8fc+-0xb*0x18e);}this['indexBuffe'+'r']['unlock'](),this['useMesh']&&this['mesh']['indexBuffe'+'r'][-0x739*-0x1+0x26f9+-0x2e32]['unlock']();}}['reset'](){if(this['beenReset']=!(-0x1*-0x9b6+0x1938+0x22ee*-0x1),this['seed']=Math['random'](),this['material']['setParamet'+'er']('seed',this['seed']),this['useCpu']){for(let _0x85b01=0x1*-0xe59+-0xf*0x1e7+0x2ae2;_0x85b01<this['particleTe'+'xStart']['length'];_0x85b01++)this['particleTe'+'x'][_0x85b01]=this['particleTe'+'xStart'][_0x85b01];}else this['_setMateri'+'alTextures']();this['resetWorld'+'Bounds'](),this['resetTime']();const _0x5a744c=this['loop'];this['loop']=!(-0x1b89*0x1+0x14c1+-0x1f*-0x38),this['addTime'](0x215+-0x1a41+-0x1dc*-0xd,!(-0x17ed+0x6*0xe1+0x12a8)),this['loop']=_0x5a744c,this['preWarm']&&this['prewarm'](this['lifetime']);}['prewarm'](_0x55400c){const _0x15d30c=_0x55400c/this['lifetime'],_0x4be884=Math['min'](Math['floor'](_0x15d30c*this['precision']),this['precision']),_0x50ccf0=_0x55400c/_0x4be884;for(let _0x2899df=-0xe08+0x1a97+-0xc8f;_0x2899df<_0x4be884;_0x2899df++)this['addTime'](_0x50ccf0,!(0x1d0+0x1*0x1b19+-0x1ce8));}['resetTime'](){this['endTime']=OA(this);}['finishFram'+'e'](){this['useCpu']&&this['vertexBuff'+'er']['unlock']();}['addTime'](_0x5dd9b4,_0x50d80c){const _0x44cdc8=this['graphicsDe'+'vice'],_0x4a4a83=de();if(this['simTimeTot'+'al']+=_0x5dd9b4,this['calculateW'+'orldBounds'](),this['_isAnimate'+'d']()){const _0x34d925=this['animTilesP'+'arams'];_0x34d925[0x44*-0x82+-0x333+0x25bb]=(0xbc3*0x3+0xeb7*-0x1+-0x1491)/this['animTilesX'],_0x34d925[-0x25*-0xb3+-0x1101+-0x8dd]=(0x17*0x1a3+0x38b*-0x2+-0x1e8e)/this['animTilesY'];const _0x2cb94c=this['animParams'];_0x2cb94c[-0x430*0x7+0x2233+-0x4e3]=this['animStartF'+'rame'],_0x2cb94c[-0x8*0x163+0x1db+-0x1*-0x93e]=this['animNumFra'+'mes']*this['animSpeed'],_0x2cb94c[0x265b*0x1+0xbe9+-0x3242]=this['animNumFra'+'mes']-(-0x7*0x587+-0x1964+0x4016),_0x2cb94c[-0x2*-0x103f+-0x7e7*-0x3+-0x3830]=this['animNumAni'+'mations']-(0x6*0x3c5+-0x353*0x7+0xa8);const _0x28ba08=this['animIndexP'+'arams'];_0x28ba08[0xe25*-0x2+-0x76d+-0x29*-0xdf]=this['animIndex'],_0x28ba08[-0x1*0xe3b+0x50*0x65+0x1154*-0x1]=this['randomizeA'+'nimIndex'];}this['scene']&&this['camera']!==this['scene']['_activeCam'+'era']&&(this['camera']=this['scene']['_activeCam'+'era'],this['onChangeCa'+'mera']()),this['emitterSha'+'pe']===Ys&&(Si[0xf*-0x25+-0x7*0x2d1+0xaf1*0x2]=this['emitterExt'+'ents']['x']!==-0x955+-0x7f*-0x8+0x55d*0x1?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0x918+-0x945+0x2d,Si[0x515*0x2+0x125f*-0x2+0x551*0x5]=this['emitterExt'+'ents']['y']!==-0x1*-0x1d89+0x2e2+-0x206b?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:-0x2223+0x2*0x994+0x41*0x3b,Si[0x2*-0x49+-0x1e19+0x1ead]=this['emitterExt'+'ents']['z']!==0xbed+-0x1ac0+0xed3?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x1708+-0x712+0x1c6*-0x9,this['meshInstan'+'ce']['node']===null?wr['setTRS'](I['ZERO'],le['IDENTITY'],this['emitterExt'+'ents']):wr['setTRS'](I['ZERO'],this['meshInstan'+'ce']['node']['getRotatio'+'n'](),w_['copy'](this['emitterExt'+'ents'])['mul'](this['meshInstan'+'ce']['node']['localScale'])));let _0x4ca6b0;const _0x3738d4=this['meshInstan'+'ce']['node']===null?I['ONE']:this['meshInstan'+'ce']['node']['localScale'];if(this['emitterSca'+'leUniform'][-0x1*0x16d1+-0x2*-0xd74+-0x15d*0x3]=_0x3738d4['x'],this['emitterSca'+'leUniform'][0x18ae+-0x2257+0x9aa]=_0x3738d4['y'],this['emitterSca'+'leUniform'][0x54*0x27+0x1c5+0xe8f*-0x1]=_0x3738d4['z'],this['material']['setParamet'+'er']('emitterSca'+'le',this['emitterSca'+'leUniform']),this['localSpace']&&this['meshInstan'+'ce']['node']&&(_0x4ca6b0=this['meshInstan'+'ce']['node']['getPositio'+'n'](),this['emitterPos'+'Uniform'][0x18cb+-0x1b8+-0x7b1*0x3]=_0x4ca6b0['x'],this['emitterPos'+'Uniform'][0x251e+0x1563+-0x3a80]=_0x4ca6b0['y'],this['emitterPos'+'Uniform'][0xb0c*-0x2+-0x18ff+0x2f19]=_0x4ca6b0['z'],this['material']['setParamet'+'er']('emitterPos',this['emitterPos'+'Uniform'])),this['_compParti'+'cleFacePar'+'ams'](),!this['useCpu'])this['_gpuUpdate'+'r']['update'](_0x44cdc8,wr,Si,_0x5dd9b4,_0x50d80c);else{const _0xca9b45=new Float32Array(this['vertexBuff'+'er']['lock']());this['_cpuUpdate'+'r']['update'](_0xca9b45,this['vbToSort'],this['particleTe'+'x'],wr,Si,_0x4ca6b0,_0x5dd9b4,_0x50d80c);}this['loop']||Date['now']()>this['endTime']&&(this['onFinished']&&this['onFinished'](),this['meshInstan'+'ce']['visible']=!(0x1*-0x1c99+0x1e21+-0x187)),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['drawOrder']=this['drawOrder']),this['_addTimeTi'+'me']+=de()-_0x4a4a83;}['_destroyRe'+'sources'](){var _0x3f361b,_0x57846a,_0x5d4359,_0xaf72cb,_0x2b0af9,_0xd5adf1,_0x4b1b2f,_0x178a95,_0x48506b,_0x498780,_0xe6470b,_0x5f4cbb;(_0x3f361b=this['particleTe'+'xIN'])==null||_0x3f361b['destroy'](),this['particleTe'+'xIN']=null,(_0x57846a=this['particleTe'+'xOUT'])==null||_0x57846a['destroy'](),this['particleTe'+'xOUT']=null,this['particleTe'+'xStart']&&this['particleTe'+'xStart']['destroy']&&(this['particleTe'+'xStart']['destroy'](),this['particleTe'+'xStart']=null),(_0x5d4359=this['rtParticle'+'TexIN'])==null||_0x5d4359['destroy'](),this['rtParticle'+'TexIN']=null,(_0xaf72cb=this['rtParticle'+'TexOUT'])==null||_0xaf72cb['destroy'](),this['rtParticle'+'TexOUT']=null,(_0x2b0af9=this['internalTe'+'x0'])==null||_0x2b0af9['destroy'](),this['internalTe'+'x0']=null,(_0xd5adf1=this['internalTe'+'x1'])==null||_0xd5adf1['destroy'](),this['internalTe'+'x1']=null,(_0x4b1b2f=this['internalTe'+'x2'])==null||_0x4b1b2f['destroy'](),this['internalTe'+'x2']=null,(_0x178a95=this['internalTe'+'x3'])==null||_0x178a95['destroy'](),this['internalTe'+'x3']=null,(_0x48506b=this['colorParam'])==null||_0x48506b['destroy'](),this['colorParam']=null,(_0x498780=this['vertexBuff'+'er'])==null||_0x498780['destroy'](),this['vertexBuff'+'er']=void(-0x1d47*0x1+-0xcbb+-0x2a02*-0x1),(_0xe6470b=this['indexBuffe'+'r'])==null||_0xe6470b['destroy'](),this['indexBuffe'+'r']=void(-0x143+0x2484+-0x5*0x70d),(_0x5f4cbb=this['material'])==null||_0x5f4cbb['destroy'](),this['material']=null;}['destroy'](){this['camera']=null,this['_destroyRe'+'sources']();}}class BA extends aa{['generateKe'+'y'](_0x368ee8){var _0x12fd4a;const _0x3ed3b2=_0x368ee8['shaderDesc'],_0x562b62=_0x3ed3b2['vertexGLSL']?ti(_0x3ed3b2['vertexGLSL']):0x7*-0x29c+-0xa1a+0x1c5e,_0x17e8da=_0x3ed3b2['fragmentGL'+'SL']?ti(_0x3ed3b2['fragmentGL'+'SL']):-0x1*-0x1009+0x2636+0x607*-0x9,_0x7d55a9=_0x3ed3b2['vertexWGSL']?ti(_0x3ed3b2['vertexWGSL']):-0x161*-0x17+0x907*-0x4+0x1*0x465,_0x653de1=_0x3ed3b2['fragmentWG'+'SL']?ti(_0x3ed3b2['fragmentWG'+'SL']):0x5c3+0x9d9*-0x3+-0x2*-0xbe4,_0x1d9537=aa['definesHas'+'h'](_0x368ee8['defines']),_0x1a6294=((_0x12fd4a=_0x368ee8['shaderChun'+'ks'])==null?void(0x8af+-0x1316+0xa67):_0x12fd4a['key'])??'';let _0x24cbb5=_0x3ed3b2['uniqueName']+'_'+_0x1d9537+'_'+_0x562b62+'_'+_0x17e8da+'_'+_0x7d55a9+'_'+_0x653de1+'_'+_0x1a6294;return _0x368ee8['skin']&&(_0x24cbb5+='_skin'),_0x368ee8['useInstanc'+'ing']&&(_0x24cbb5+='_inst'),_0x368ee8['useMorphPo'+'sition']&&(_0x24cbb5+='_morphp'),_0x368ee8['useMorphNo'+'rmal']&&(_0x24cbb5+='_morphn'),_0x368ee8['useMorphTe'+'xtureBased'+'Int']&&(_0x24cbb5+='_morphi'),_0x24cbb5;}['createAttr'+'ibutesDefi'+'nition'](_0x438828,_0x37ba2c){const _0x320643=_0x37ba2c['shaderDesc']['attributes'],_0x598919=_0x320643?{..._0x320643}:void(-0x1892*0x1+-0x1*0x254+0x1ae6);_0x37ba2c['skin']&&(_0x598919['vertex_bon'+'eWeights']=li,_0x598919['vertex_bon'+'eIndices']=ns),(_0x37ba2c['useMorphPo'+'sition']||_0x37ba2c['useMorphNo'+'rmal'])&&(_0x598919['morph_vert'+'ex_id']=_n),_0x438828['attributes']=_0x598919;}['createVert'+'exDefiniti'+'on'](_0x30d023,_0x31f6db,_0x3964d3,_0x1c6b45){const _0x425868=_0x31f6db['shaderDesc'],_0x39370e=new Map(_0x3964d3);_0x39370e['set']('transformI'+'nstancingV'+'S','');const _0x43418a=new Map(_0x31f6db['defines']);_0x31f6db['skin']&&_0x43418a['set']('SKIN',!(0x8*0xcb+-0x1ad7+-0x9f*-0x21)),_0x31f6db['useInstanc'+'ing']&&_0x43418a['set']('INSTANCING',!(-0xa6+0x4*-0x9c3+-0x2*-0x13d9)),(_0x31f6db['useMorphPo'+'sition']||_0x31f6db['useMorphNo'+'rmal'])&&(_0x43418a['set']('MORPHING',!(-0x1f8*0x2+0xfbb+-0xbcb)),_0x31f6db['useMorphTe'+'xtureBased'+'Int']&&_0x43418a['set']('MORPHING_I'+'NT',!(0xfc9*0x1+-0xf1*0x19+0x7c0)),_0x31f6db['useMorphPo'+'sition']&&_0x43418a['set']('MORPHING_P'+'OSITION',!(0x1f59+0x1*0x13c9+-0x3322)),_0x31f6db['useMorphNo'+'rmal']&&_0x43418a['set']('MORPHING_N'+'ORMAL',!(0x2*0x9b1+0xa3*-0x11+-0x139*0x7))),_0x30d023['vertexCode']=_0x1c6b45?_0x425868['vertexWGSL']:_0x425868['vertexGLSL'],_0x30d023['vertexIncl'+'udes']=_0x39370e,_0x30d023['vertexDefi'+'nes']=_0x43418a;}['createFrag'+'mentDefini'+'tion'](_0x30c14c,_0x1d3426,_0x31d1b8,_0x524610){const _0x4a3fc8=_0x1d3426['shaderDesc'],_0x402179=new Map(_0x31d1b8),_0x1f178b=new Map(_0x1d3426['defines']);_0x30c14c['fragmentCo'+'de']=_0x524610?_0x4a3fc8['fragmentWG'+'SL']:_0x4a3fc8['fragmentGL'+'SL'],_0x30c14c['fragmentIn'+'cludes']=_0x402179,_0x30c14c['fragmentDe'+'fines']=_0x1f178b;}['createShad'+'erDefiniti'+'on'](_0x54d7c8,_0x5ed8aa){var _0xfa441;const _0xc0dd3d=_0x5ed8aa['shaderDesc'],_0x42f789=_0x54d7c8['isWebGPU']&&!!_0xc0dd3d['vertexWGSL']&&!!_0xc0dd3d['fragmentWG'+'SL']&&(((_0xfa441=_0x5ed8aa['shaderChun'+'ks'])==null?void(0x6b*0x17+0x4fa+-0xe97):_0xfa441['useWGSL'])??!(0x6ea+0x15f8+0x1ce2*-0x1)),_0x251113={'name':'ShaderMate'+'rial-'+_0xc0dd3d['uniqueName'],'shaderLanguage':_0x42f789?st:ze,'fragmentOutputTypes':_0xc0dd3d['fragmentOu'+'tputTypes'],'meshUniformBufferFormat':_0xc0dd3d['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0xc0dd3d['meshBindGr'+'oupFormat']},_0x3616c3=_0x42f789?st:ze,_0x47d1ac=qh['merge'](Ce['get'](_0x54d7c8,_0x3616c3),_0x5ed8aa['shaderChun'+'ks'][_0x3616c3]);return this['createAttr'+'ibutesDefi'+'nition'](_0x251113,_0x5ed8aa),this['createVert'+'exDefiniti'+'on'](_0x251113,_0x5ed8aa,_0x47d1ac,_0x42f789),this['createFrag'+'mentDefini'+'tion'](_0x251113,_0x5ed8aa,_0x47d1ac,_0x42f789),$t['createDefi'+'nition'](_0x54d7c8,_0x251113);}}const zA=new BA();class In extends ua{constructor(_0x411fae){super(),h(this,'_shaderDes'+'c'),this['shaderDesc']=_0x411fae;}set['shaderDesc'](_0x4f0ec8){if(this['_shaderDes'+'c']=void(-0xa93*0x3+-0x2684+0x463d),_0x4f0ec8&&(this['_shaderDes'+'c']={'uniqueName':_0x4f0ec8['uniqueName'],'attributes':_0x4f0ec8['attributes'],'fragmentOutputTypes':_0x4f0ec8['fragmentOu'+'tputTypes'],'vertexGLSL':_0x4f0ec8['vertexGLSL'],'fragmentGLSL':_0x4f0ec8['fragmentGL'+'SL'],'vertexWGSL':_0x4f0ec8['vertexWGSL'],'fragmentWGSL':_0x4f0ec8['fragmentWG'+'SL']},_0x4f0ec8['vertexCode']||_0x4f0ec8['fragmentCo'+'de']||_0x4f0ec8['shaderLang'+'uage'])){M['deprecated']('ShaderMate'+'rial\x20['+_0x4f0ec8['uniqueName']+(']:\x20vertexC'+'ode,\x20fragm'+'entCode\x20an'+'d\x20shaderLa'+'nguage\x20pro'+'perties\x20of'+'\x20ShaderDes'+'c\x20is\x20depre'+'cated.\x20Use'+'\x20vertexGLS'+'L,\x20fragmen'+'tGLSL,\x20ver'+'texWGSL\x20or'+'\x20fragmentW'+'GSL\x20instea'+'d.'));const _0xf4f40c=_0x4f0ec8['shaderLang'+'uage']??ze;_0xf4f40c===ze?(this['_shaderDes'+'c']['vertexGLSL']=_0x4f0ec8['vertexCode'],this['_shaderDes'+'c']['fragmentGL'+'SL']=_0x4f0ec8['fragmentCo'+'de']):_0xf4f40c===st&&(this['_shaderDes'+'c']['vertexWGSL']=_0x4f0ec8['vertexCode'],this['_shaderDes'+'c']['fragmentWG'+'SL']=_0x4f0ec8['fragmentCo'+'de']);}this['clearVaria'+'nts']();}get['shaderDesc'](){return this['_shaderDes'+'c'];}['copy'](_0x2a2892){return super['copy'](_0x2a2892),this['shaderDesc']=_0x2a2892['shaderDesc'],this;}['getShaderV'+'ariant'](_0x4ef91f){const {objDefs:_0x289188}=_0x4ef91f,_0x468c81={'defines':Ut['getCoreDef'+'ines'](this,_0x4ef91f),'skin':(_0x289188&ko)!==-0x42e*-0x9+0x1786+-0x3d24,'useInstancing':(_0x289188&Uo)!==0x1*0x1457+0x330+-0x1787,'useMorphPosition':(_0x289188&Bo)!==0x48*0x23+-0x1*-0x19a9+0x95*-0x3d,'useMorphNormal':(_0x289188&zo)!==-0x19db+-0x3b*0x77+0x1f*0x1b8,'useMorphTextureBasedInt':(_0x289188&Vo)!==-0x375+-0xec6+0x123b,'pass':_0x4ef91f['pass'],'gamma':_0x4ef91f['cameraShad'+'erParams']['shaderOutp'+'utGamma'],'toneMapping':_0x4ef91f['cameraShad'+'erParams']['toneMappin'+'g'],'fog':_0x4ef91f['cameraShad'+'erParams']['fog'],'shaderDesc':this['shaderDesc'],'shaderChunks':this['shaderChun'+'ks']},_0x1e60ac=new Zc(_0x4ef91f['viewUnifor'+'mFormat'],_0x4ef91f['viewBindGr'+'oupFormat'],_0x4ef91f['vertexForm'+'at']),_0x35a0c9=Cn(_0x4ef91f['device']);return _0x35a0c9['register']('shader-mat'+'erial',zA),_0x35a0c9['getProgram']('shader-mat'+'erial',_0x468c81,_0x1e60ac,this['userId']);}}const Uy=(_0x2c57a1,_0x399e43)=>{const _0x2a415c=_0x399e43['length']/(-0x140+0x157*0x17+-0x1d8e),_0x5972a0=_0x2c57a1['length']/(-0x25a0+-0xd9b+0x333e),_0x31b6e5=new I(),_0x39ccdc=new I(),_0xe266eb=new I(),_0xda01d5=new I(),_0x485704=new I(),_0x208feb=new I(),_0x569218=[];for(let _0x5b5a79=0x11+0x18d0+-0xc1*0x21;_0x5b5a79<_0x2c57a1['length'];_0x5b5a79++)_0x569218[_0x5b5a79]=0x22e5+-0x1*0x199d+-0x36*0x2c;for(let _0x3d6801=-0xf40+-0x2278+0x31b8;_0x3d6801<_0x2a415c;_0x3d6801++){const _0x16a40d=_0x399e43[_0x3d6801*(0x1057+0x22dc+-0x54*0x9c)],_0x1cfa45=_0x399e43[_0x3d6801*(-0x1502*0x1+0x333*-0x5+0x2504)+(0x2*0x1210+-0x19c5+-0xa5a)],_0x2fa474=_0x399e43[_0x3d6801*(-0x7*-0x85+-0xd*0x17d+0xfb9)+(0x656*0x6+-0x1*0x1b50+-0xab2)];_0x31b6e5['set'](_0x2c57a1[_0x16a40d*(-0x2c7*-0x1+0x15c6+0x417*-0x6)],_0x2c57a1[_0x16a40d*(0x2*0xc97+0x9b6+-0x22e1)+(-0x1c74+-0x1*-0x17e+0xd*0x213)],_0x2c57a1[_0x16a40d*(-0x71a*-0x2+-0x45*0x6d+0xf30)+(-0x7d3+-0x2*0xc5f+0x2093)]),_0x39ccdc['set'](_0x2c57a1[_0x1cfa45*(0x1*0x44a+-0x3e5*-0x1+0x20b*-0x4)],_0x2c57a1[_0x1cfa45*(-0x352*-0x6+0x101e+0x191*-0x17)+(-0xf*0x247+-0x1419*0x1+0x3643)],_0x2c57a1[_0x1cfa45*(0x1*0x567+-0x742+0x1de*0x1)+(-0x1911+-0x10d*-0x21+0x2*-0x4cd)]),_0xe266eb['set'](_0x2c57a1[_0x2fa474*(0x389*0x2+0x45*0x8d+-0x2d10)],_0x2c57a1[_0x2fa474*(-0x1*0x1da7+0x63*0x6+-0x6d6*-0x4)+(0x1c12+-0x1000*0x1+-0xc11*0x1)],_0x2c57a1[_0x2fa474*(-0x20b+-0x449+0x657)+(-0x2649+-0x5e*-0x35+-0x647*-0x3)]),_0xda01d5['sub2'](_0x39ccdc,_0x31b6e5),_0x485704['sub2'](_0xe266eb,_0x31b6e5),_0x208feb['cross'](_0xda01d5,_0x485704)['normalize'](),_0x569218[_0x16a40d*(0x1324+-0xa30+-0x147*0x7)]+=_0x208feb['x'],_0x569218[_0x16a40d*(-0x1fab+-0x1d12+0x3cc0)+(0xd2c+-0x12*0x3f+-0x8bd)]+=_0x208feb['y'],_0x569218[_0x16a40d*(-0x65b+0x1*0x19f1+0x1393*-0x1)+(-0x4c2+-0x1*0xde6+0x12aa)]+=_0x208feb['z'],_0x569218[_0x1cfa45*(-0xde3+0x88+0x76*0x1d)]+=_0x208feb['x'],_0x569218[_0x1cfa45*(0xbfe+0x55*-0x1+-0xba6)+(-0x1f*-0x3+-0x251c+-0x188*-0x18)]+=_0x208feb['y'],_0x569218[_0x1cfa45*(-0x4*0x2b3+-0x1057+0x1b26)+(-0x10b3+0x449+-0xa*-0x13e)]+=_0x208feb['z'],_0x569218[_0x2fa474*(0x1*0x98d+0x2436+-0x2dc0)]+=_0x208feb['x'],_0x569218[_0x2fa474*(-0xf5f+-0x20c3*-0x1+-0x5cb*0x3)+(-0x1*-0xe6b+-0x22d*0xc+0xbb2)]+=_0x208feb['y'],_0x569218[_0x2fa474*(-0x20b1+0x1*0x20b0+0x1*0x4)+(-0x15*0x13d+-0x988+-0x3f3*-0x9)]+=_0x208feb['z'];}for(let _0x43e8e0=0x1*-0x260a+0x9*0x27c+0xfae;_0x43e8e0<_0x5972a0;_0x43e8e0++){const _0x385559=_0x569218[_0x43e8e0*(-0x1df*-0xf+-0x1c0b+0x3*-0x1)],_0x469491=_0x569218[_0x43e8e0*(-0x13b2+0x265f+0x2*-0x955)+(-0x76e+0x2*0x22d+0x315*0x1)],_0x53c9a2=_0x569218[_0x43e8e0*(0x4*-0x623+-0x19f1+-0x650*-0x8)+(-0x13*-0x80+0x115*0x5+-0x1*0xee7)],_0x28484c=(0x5*-0x52a+0x2605*-0x1+0x3fd8)/Math['sqrt'](_0x385559*_0x385559+_0x469491*_0x469491+_0x53c9a2*_0x53c9a2);_0x569218[_0x43e8e0*(-0x716+0x154a+-0x4bb*0x3)]*=_0x28484c,_0x569218[_0x43e8e0*(0x97b+-0x3*0x8b7+0x10ad)+(0x1575+-0x15*-0x15d+-0x3215)]*=_0x28484c,_0x569218[_0x43e8e0*(0x7*0x4bc+0x25a3+-0x46c4)+(-0x49b*-0x1+0xdfe+-0x1297)]*=_0x28484c;}return _0x569218;},pr=(_0x1c40a7,_0x4abbf1,_0x2efea7,_0x3a9618)=>{const _0xb61325=_0x3a9618['length']/(-0x1d3e+-0x1*0x8fa+0x263b),_0x4024a5=_0x1c40a7['length']/(0x17b+-0x255a+0x23e2),_0x250714=new I(),_0x16935d=new I(),_0x36d132=new I(),_0x1e4ef0=new J(),_0x54a61a=new J(),_0x5a0e76=new J(),_0x408901=new I(),_0x51c42a=new I(),_0x2cf2b6=new Float32Array(_0x4024a5*(0x610+0x8f5*-0x2+0xbdd*0x1)),_0x764c66=new Float32Array(_0x4024a5*(0x1*-0x207+0x6d4+-0x4ca)),_0x5f1f0a=[];for(let _0x5d4268=0x29*0x1f+-0x4*0x4f0+-0xec9*-0x1;_0x5d4268<_0xb61325;_0x5d4268++){const _0x2d4afc=_0x3a9618[_0x5d4268*(0x1c82+-0x1aec+0xd*-0x1f)],_0x249462=_0x3a9618[_0x5d4268*(0xe0c+-0x6*0x35f+-0x1*-0x631)+(0xd*0x49+-0x1*0x18c4+0x1510)],_0x42356f=_0x3a9618[_0x5d4268*(-0xc7*0x9+-0x979+0x107b)+(0x8b9+0x55d*-0x6+-0x1777*-0x1)];_0x250714['set'](_0x1c40a7[_0x2d4afc*(-0x1*-0x21e6+-0x22a5+0x1*0xc2)],_0x1c40a7[_0x2d4afc*(-0x1b56+-0x3*0x1cf+0x20c6)+(0xe60+0x1153+-0xfd9*0x2)],_0x1c40a7[_0x2d4afc*(-0xeb0+-0x2*0x1178+0x83*0x61)+(-0x6*-0x4c3+-0x1*-0xb43+0x27d3*-0x1)]),_0x16935d['set'](_0x1c40a7[_0x249462*(0xcbc+0xff0+0x1*-0x1ca9)],_0x1c40a7[_0x249462*(-0xc6e+-0x2*0x46c+0x1*0x1549)+(-0x51+0x11b4+-0x1162)],_0x1c40a7[_0x249462*(0x1031+0x649*0x2+-0x1cc0)+(0x1c2b*-0x1+0x2d5*-0x9+-0x2*-0x1ad5)]),_0x36d132['set'](_0x1c40a7[_0x42356f*(-0x704+-0x184b*-0x1+0x22*-0x82)],_0x1c40a7[_0x42356f*(0x2120+0x12dd+0x19fd*-0x2)+(-0x3c1+-0x1*-0x131d+-0xf5b*0x1)],_0x1c40a7[_0x42356f*(0x95*0x11+0x1d64+0x1c9*-0x16)+(-0x5*0x4ca+0x2082+0xf*-0x92)]),_0x1e4ef0['set'](_0x2efea7[_0x2d4afc*(0x4fc+0xb3*-0x15+0x9b5)],_0x2efea7[_0x2d4afc*(-0x17fb*-0x1+-0x1*-0x1416+-0x2c0f)+(0xbc7+0x423*0x4+-0x1*0x1c52)]),_0x54a61a['set'](_0x2efea7[_0x249462*(-0x2*0x355+-0x2*0xbdf+0x1e6a*0x1)],_0x2efea7[_0x249462*(0x8*-0x4c3+-0x2229+0x58f*0xd)+(0x1*-0xf32+-0x37*-0xb3+-0x1742)]),_0x5a0e76['set'](_0x2efea7[_0x42356f*(-0xa07*-0x2+-0x1f*-0x127+-0x37c5*0x1)],_0x2efea7[_0x42356f*(-0x1*-0x19e7+0x5*0x12f+-0x3fa*0x8)+(0x189*-0xa+0x83f+0x71c)]);const _0x21df16=_0x16935d['x']-_0x250714['x'],_0x1184c4=_0x36d132['x']-_0x250714['x'],_0x4004aa=_0x16935d['y']-_0x250714['y'],_0x3704c0=_0x36d132['y']-_0x250714['y'],_0x1c4737=_0x16935d['z']-_0x250714['z'],_0x5b4549=_0x36d132['z']-_0x250714['z'],_0x5c603d=_0x54a61a['x']-_0x1e4ef0['x'],_0x5e4eab=_0x5a0e76['x']-_0x1e4ef0['x'],_0x5a9f2e=_0x54a61a['y']-_0x1e4ef0['y'],_0x24dbf1=_0x5a0e76['y']-_0x1e4ef0['y'],_0x32ef1a=_0x5c603d*_0x24dbf1-_0x5e4eab*_0x5a9f2e;if(_0x32ef1a===-0x13*0x1cd+-0x1ba2+0x3dd9)_0x408901['set'](-0x3*-0x4f7+0x372*0x1+0x139*-0xf,-0x13e*0x17+-0x30*-0xaa+0xa9*-0x5,-0x515*-0x5+-0x1b1b+0x1b2),_0x51c42a['set'](0xe54+0x1f69+-0x2dbc,0x1*0xb45+-0xdac+0xf*0x29,0x1*0x2302+-0xf11+0x3fd*-0x5);else{const _0x26c846=(0x203e+0x17*-0xd7+0xcec*-0x1)/_0x32ef1a;_0x408901['set']((_0x24dbf1*_0x21df16-_0x5a9f2e*_0x1184c4)*_0x26c846,(_0x24dbf1*_0x4004aa-_0x5a9f2e*_0x3704c0)*_0x26c846,(_0x24dbf1*_0x1c4737-_0x5a9f2e*_0x5b4549)*_0x26c846),_0x51c42a['set']((_0x5c603d*_0x1184c4-_0x5e4eab*_0x21df16)*_0x26c846,(_0x5c603d*_0x3704c0-_0x5e4eab*_0x4004aa)*_0x26c846,(_0x5c603d*_0x5b4549-_0x5e4eab*_0x1c4737)*_0x26c846);}_0x2cf2b6[_0x2d4afc*(-0x39*-0x89+0x12*0x148+-0x358e)+(-0x2438+0x307*-0x9+0xb*0x5c5)]+=_0x408901['x'],_0x2cf2b6[_0x2d4afc*(-0x6a*0x13+0x83+0x2*0x3af)+(-0x4*-0x44c+0x1*0x1472+0xa9*-0x39)]+=_0x408901['y'],_0x2cf2b6[_0x2d4afc*(0xa3*-0x1b+0x1*-0x204d+0x3181)+(-0x2ed*0x2+-0x542*0x3+0x15a2)]+=_0x408901['z'],_0x2cf2b6[_0x249462*(-0xf*0x1df+0x8b*-0x28+0x31cc)+(0x99e*-0x4+-0x2068*0x1+0x46e0)]+=_0x408901['x'],_0x2cf2b6[_0x249462*(0x6b*-0x45+0x1d0b+-0x1*0x31)+(0xf4c+0x1*-0x3c6+-0xb85)]+=_0x408901['y'],_0x2cf2b6[_0x249462*(0x1239+0x7b9+-0x19ef*0x1)+(0x2093+-0x7fc*0x4+0x7*-0x17)]+=_0x408901['z'],_0x2cf2b6[_0x42356f*(0x4d8*0x4+-0xa49+-0x914)+(-0x1acd*-0x1+0x23*0x35+-0x220c)]+=_0x408901['x'],_0x2cf2b6[_0x42356f*(-0x21af+0x706+0x472*0x6)+(0x210+-0x61*-0x3d+-0x192c)]+=_0x408901['y'],_0x2cf2b6[_0x42356f*(-0x2f5*0xb+0x6b2+-0x33b*-0x8)+(0xea6+0x20a3+-0x2f47)]+=_0x408901['z'],_0x764c66[_0x2d4afc*(-0x1*-0x1223+-0xbaa+-0x676)+(-0xe*-0x76+-0x10ba+0xa*0x107)]+=_0x51c42a['x'],_0x764c66[_0x2d4afc*(0x491*-0x6+-0x1141*0x2+0x3deb)+(-0x1dc+0x8a0+-0x6c3)]+=_0x51c42a['y'],_0x764c66[_0x2d4afc*(-0xc26+0xed*-0x19+0x234e)+(-0x15ea+0x19a6+0x2*-0x1dd)]+=_0x51c42a['z'],_0x764c66[_0x249462*(-0x8*0x8f+-0x307+-0x782*-0x1)+(0x702+-0x3*0x4e4+-0x2*-0x3d5)]+=_0x51c42a['x'],_0x764c66[_0x249462*(0x18f8+0x12de+-0x2bd3)+(-0xa8b+-0x11*-0x19+0x1c7*0x5)]+=_0x51c42a['y'],_0x764c66[_0x249462*(-0x4*0x1fe+0x370+0x48b*0x1)+(0x17*-0x17c+0x1*-0x1721+0x3947*0x1)]+=_0x51c42a['z'],_0x764c66[_0x42356f*(0x1*-0x1fe4+0x2428+-0x441)+(-0x1f8f+-0x145b*-0x1+-0x59a*-0x2)]+=_0x51c42a['x'],_0x764c66[_0x42356f*(0x2111+-0x1383+-0x1*0xd8b)+(0x18e2+0x1d*-0x97+-0x7c6)]+=_0x51c42a['y'],_0x764c66[_0x42356f*(-0x1f61*0x1+-0x1*-0x9d7+0x72f*0x3)+(0x11e4+-0x257*0x3+-0xadd)]+=_0x51c42a['z'];}const _0x3c0496=new I(),_0x4186aa=new I(),_0x1ad7f3=new I(),_0x4caac8=new I();for(let _0x22d5f3=-0x39b*-0x7+-0x1ba3+0x266;_0x22d5f3<_0x4024a5;_0x22d5f3++){_0x1ad7f3['set'](_0x4abbf1[_0x22d5f3*(-0x55+0x1259+0x1a3*-0xb)],_0x4abbf1[_0x22d5f3*(0x6*-0x30b+-0x9d2+0x1c17)+(0xcf0+0x18b7*-0x1+-0x1d*-0x68)],_0x4abbf1[_0x22d5f3*(-0x1181+-0x446+0x15ca)+(-0x1280+-0x1*0x17c7+0x2a49)]),_0x3c0496['set'](_0x2cf2b6[_0x22d5f3*(0x3*-0x931+0x24f7+-0x961)],_0x2cf2b6[_0x22d5f3*(0x1299+0x2*-0xbbd+0x4e4)+(-0xf60+0xdc5+0x4*0x67)],_0x2cf2b6[_0x22d5f3*(-0x1*-0x1cab+0x17b*-0x16+0x3ea)+(0x1903+-0x2655+0x355*0x4)]),_0x4186aa['set'](_0x764c66[_0x22d5f3*(0x1d23*0x1+-0x1b9b+-0x185)],_0x764c66[_0x22d5f3*(0xdad+-0x21aa+0x1400)+(-0x47*-0x7+0x1*0x1de3+-0x1fd3*0x1)],_0x764c66[_0x22d5f3*(-0xb*0x341+0x186*-0x19+-0x2*-0x24f2)+(-0x973+-0x1*0xc13+-0x1588*-0x1)]);const _0x126c10=_0x1ad7f3['dot'](_0x3c0496);_0x4caac8['copy'](_0x1ad7f3)['mulScalar'](_0x126c10),_0x4caac8['sub2'](_0x3c0496,_0x4caac8)['normalize'](),_0x5f1f0a[_0x22d5f3*(-0x9*0x95+0x46*0x37+-0x9c9)]=_0x4caac8['x'],_0x5f1f0a[_0x22d5f3*(0x1fff*-0x1+-0x1d*0x3e+0x2709)+(0x454+-0x2024+0x1bd1)]=_0x4caac8['y'],_0x5f1f0a[_0x22d5f3*(-0xa*-0x2da+-0x114f*-0x2+-0x3f1e)+(0x2*-0xf33+-0x2c5*-0x1+-0x587*-0x5)]=_0x4caac8['z'],_0x4caac8['cross'](_0x1ad7f3,_0x3c0496),_0x5f1f0a[_0x22d5f3*(-0xb*-0x26b+0x4*-0x3b9+0x49*-0x29)+(0x2045+0x129e*0x1+-0x32e0)]=_0x4caac8['dot'](_0x4186aa)<-0x125f*0x1+-0x19db+0x2c3a?-(-0x1*-0x13bd+0x23d9+-0x3795):0x265c+0xbdd+-0x647*0x8;}return _0x5f1f0a;};class la{constructor(){h(this,'positions'),h(this,'normals'),h(this,'colors'),h(this,'uvs'),h(this,'uvs1'),h(this,'blendIndic'+'es'),h(this,'blendWeigh'+'ts'),h(this,'tangents'),h(this,'indices');}['calculateN'+'ormals'](){M['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),M['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['normals']=Uy(this['positions'],this['indices']);}['calculateT'+'angents'](){M['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),M['assert'](this['normals'],'Geometry\x20m'+'ust\x20have\x20n'+'ormals\x20set'),M['assert'](this['uvs'],'Geometry\x20m'+'ust\x20have\x20u'+'vs\x20set'),M['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['tangents']=pr(this['positions'],this['normals'],this['uvs'],this['indices']);}}const Of=(0x1367*0x1+0x41*-0x97+0x12f4)/(0x2626+-0x2*0xe72+-0x902),A_=-0x73*-0x47+0x233b+0x431f*-0x1-Of*(-0x201d*-0x1+-0x151a+0x3ab*-0x3);class Ff extends la{constructor(_0x496374={}){super();const _0x3a899a=_0x496374['halfExtent'+'s']??new I(-0x2632+0x65*0x3+0x767*0x5+0.5,0x39*-0x55+0x1a57+0x3b5*-0x2+0.5,-0x23ae+-0x9e2+0x2d90+0.5),_0x568ec4=_0x496374['widthSegme'+'nts']??-0x262c+-0x1d97+0x43c4,_0x1335a9=_0x496374['lengthSegm'+'ents']??-0x6d2+0x205e*0x1+0x198b*-0x1,_0x55ca42=_0x496374['heightSegm'+'ents']??0x21c4+0x878*-0x4+0x1d*0x1,_0x5d5ef9=_0x496374['yOffset']??0x235a+0x3*0x45f+-0x3077,_0x906aa7=-_0x3a899a['y']+_0x5d5ef9,_0x3192cc=_0x3a899a['y']+_0x5d5ef9,_0x4eb28d=[new I(-_0x3a899a['x'],_0x906aa7,_0x3a899a['z']),new I(_0x3a899a['x'],_0x906aa7,_0x3a899a['z']),new I(_0x3a899a['x'],_0x3192cc,_0x3a899a['z']),new I(-_0x3a899a['x'],_0x3192cc,_0x3a899a['z']),new I(_0x3a899a['x'],_0x906aa7,-_0x3a899a['z']),new I(-_0x3a899a['x'],_0x906aa7,-_0x3a899a['z']),new I(-_0x3a899a['x'],_0x3192cc,-_0x3a899a['z']),new I(_0x3a899a['x'],_0x3192cc,-_0x3a899a['z'])],_0x187d0c=[[-0x495+0x1*0x17f+0x2*0x18b,-0x496*-0x3+0x2f*0x3a+-0x1*0x1867,-0x1cb6+-0x11b*0x11+0x17c2*0x2],[0xe3*-0x25+0x1e19+0x2ba,0x1*0x1b1d+0x12eb+0x2e03*-0x1,-0x22c8+0x2*-0x641+0x2f51],[0x582+-0xb70+0x5f1,0x27*-0xe0+0xc47+0x15db,-0x1e*-0x76+-0x1ef*-0xa+-0x2124],[-0x7*0x115+0x1463+-0xccf,0x247d+0xa*-0x296+-0xaa1,0x1*-0x1d3+0x690*0x1+-0x4b9],[-0xa6f*-0x2+0x1efb+-0x33d8,-0x6*-0x5bb+-0x10ce+0x8c8*-0x2,-0x95e+-0x6a2+0x1*0x1002],[-0x752+0x422+-0x1*-0x335,0xe*-0x26f+0x183b+0x9d7,0x619*0x2+-0xa7*-0x3+-0xe21*0x1]],_0x12e583=[[-0x1679+-0x755*-0x2+0x7cf,0x42c+-0x188+-0xa9*0x4,-0x2286+-0x204e+0x42d5],[0x1e23+-0x4eb+-0x21a*0xc,0xae3*-0x2+0x20c*0x1+-0x32*-0x65,-(-0x24b8+-0x2e+0x24e7)],[-0x110c+-0x1a96+0x2ba2,0x1a22+-0x1*0x1e74+-0x29*-0x1b,0x1510+0x1b8+-0x16c8],[-0xeb+-0x215b+0x2246,-(-0x3*0x7eb+-0xaaf*0x2+0x2d20),0x231f+-0x1*-0x187+-0x24a6*0x1],[0x1ed0+-0x1*0x2615+-0x10a*-0x7,-0x4ff*-0x7+0x509*-0x5+-0x9cc,0x2599+-0x14f5+0x4*-0x429],[-(0x23a6+0x23a2*-0x1+-0x3),-0xbb+0x876+-0x7bb,0x14*-0x64+0x20bc+-0x18ec]],_0x3d522a={'FRONT':0x0,'BACK':0x1,'TOP':0x2,'BOTTOM':0x3,'RIGHT':0x4,'LEFT':0x5},_0x263229=[],_0x2ba2d9=[],_0xf5e84a=[],_0x534f33=[];let _0x5bd9b5=0x1ea4+-0x1946+-0x55e;const _0x4c5575=(_0x67290,_0x1e9411,_0xdd9231)=>{const _0x2384d8=new I(),_0x105725=new I(),_0x3eca01=new I(),_0x4f2a00=new I();for(let _0x51a3a0=0xe9*-0x1+0x2573*0x1+-0x248a;_0x51a3a0<=_0x1e9411;_0x51a3a0++)for(let _0x3a179f=0x632+-0x5a6+0x46*-0x2;_0x3a179f<=_0xdd9231;_0x3a179f++){_0x2384d8['lerp'](_0x4eb28d[_0x187d0c[_0x67290][0x2f*-0xbf+0x8*-0xe5+0x2a39]],_0x4eb28d[_0x187d0c[_0x67290][0x2*-0xbff+-0x2f0+0xc5*0x23]],_0x51a3a0/_0x1e9411),_0x105725['lerp'](_0x4eb28d[_0x187d0c[_0x67290][0x3*0x17d+-0x1a83+0x160c]],_0x4eb28d[_0x187d0c[_0x67290][-0xb75+0xf6d+-0x3*0x152]],_0x3a179f/_0xdd9231),_0x3eca01['sub2'](_0x105725,_0x4eb28d[_0x187d0c[_0x67290][-0x1a72+0x251b+0xaa9*-0x1]]),_0x4f2a00['add2'](_0x2384d8,_0x3eca01);let _0x921156=_0x51a3a0/_0x1e9411,_0x32c3a0=_0x3a179f/_0xdd9231;_0x263229['push'](_0x4f2a00['x'],_0x4f2a00['y'],_0x4f2a00['z']),_0x2ba2d9['push'](_0x12e583[_0x67290][0x3a9*0x5+-0x1e3b+0xbee],_0x12e583[_0x67290][0x6da+0x26ea+0xa5*-0x47],_0x12e583[_0x67290][-0x1*-0x222e+0x8f5+-0x2b21*0x1]),_0xf5e84a['push'](_0x921156,0x381+-0x1e07+0x1a87*0x1-_0x32c3a0),_0x921156=_0x921156*A_+Of,_0x32c3a0=_0x32c3a0*A_+Of,_0x921156/=0x8e1+0x6fa+-0xfd8,_0x32c3a0/=0x273*0x2+0x1d4d+-0x2230,_0x921156+=_0x67290%(-0x1618+0x1*-0x16bf+0x2cda)/(-0x734*-0x2+0x1*0x3ab+-0x1210),_0x32c3a0+=Math['floor'](_0x67290/(-0x1b49+-0xf92*0x1+0x2ade))/(0xe*0x299+-0x1904+-0x1*0xb57),_0x51a3a0<_0x1e9411&&_0x3a179f<_0xdd9231&&(_0x534f33['push'](_0x5bd9b5+_0xdd9231+(0xe9b+-0x243e*0x1+-0x5*-0x454),_0x5bd9b5+(-0x1d*-0x156+-0x1*0x1387+-0x2*0x99b),_0x5bd9b5),_0x534f33['push'](_0x5bd9b5+_0xdd9231+(0xa1*-0x10+0x53*-0x37+-0x1*-0x1be6),_0x5bd9b5+_0xdd9231+(-0x2276+-0x1be3+0x3e5b),_0x5bd9b5+(-0x7*0x29b+0x27a+0x2*0x7e2))),_0x5bd9b5++;}};_0x4c5575(_0x3d522a['FRONT'],_0x568ec4,_0x55ca42),_0x4c5575(_0x3d522a['BACK'],_0x568ec4,_0x55ca42),_0x4c5575(_0x3d522a['TOP'],_0x568ec4,_0x1335a9),_0x4c5575(_0x3d522a['BOTTOM'],_0x568ec4,_0x1335a9),_0x4c5575(_0x3d522a['RIGHT'],_0x1335a9,_0x55ca42),_0x4c5575(_0x3d522a['LEFT'],_0x1335a9,_0x55ca42),this['positions']=_0x263229,this['normals']=_0x2ba2d9,this['uvs']=_0xf5e84a,this['uvs1']=_0xf5e84a,this['indices']=_0x534f33,_0x496374['calculateT'+'angents']&&(this['tangents']=pr(_0x263229,_0x2ba2d9,_0xf5e84a,_0x534f33));}}class By extends la{constructor(_0x4f32ae={}){super();const _0x4aa4e3=_0x4f32ae['radius']??-0x858*0x4+0xf*-0x1b1+0x1395*0x3+0.5,_0x2ef88a=_0x4f32ae['latitudeBa'+'nds']??0xd4+0x3d*0x49+-0x1229*0x1,_0x3010cf=_0x4f32ae['longitudeB'+'ands']??-0x551*-0x2+0x7c3*-0x1+-0x2cf,_0x55bbdc=[],_0x2dd5ce=[],_0x207951=[],_0x111d86=[];for(let _0x5cdc87=0x4*0x70+0xe*0x259+-0x229e;_0x5cdc87<=_0x2ef88a;_0x5cdc87++){const _0x2e1384=_0x5cdc87*Math['PI']/_0x2ef88a,_0x1330fe=Math['sin'](_0x2e1384),_0x4ea60e=Math['cos'](_0x2e1384);for(let _0x547abe=0x14be+0x3*-0x9fa+0xa8*0xe;_0x547abe<=_0x3010cf;_0x547abe++){const _0x3621be=_0x547abe*(-0x72e+0xad*0x1+-0x683*-0x1)*Math['PI']/_0x3010cf-Math['PI']/(-0x581+-0xc11+0x3*0x5dc),_0x3a0ea2=Math['sin'](_0x3621be),_0x41750c=Math['cos'](_0x3621be)*_0x1330fe,_0x4250ca=_0x4ea60e,_0x2baca0=_0x3a0ea2*_0x1330fe,_0x733451=-0x974*-0x2+-0x49*0x35+0x1*-0x3ca-_0x547abe/_0x3010cf,_0x10be40=-0x49e*-0x6+0x1*0x19e2+-0x4df*0xb-_0x5cdc87/_0x2ef88a;_0x55bbdc['push'](_0x41750c*_0x4aa4e3,_0x4250ca*_0x4aa4e3,_0x2baca0*_0x4aa4e3),_0x2dd5ce['push'](_0x41750c,_0x4250ca,_0x2baca0),_0x207951['push'](_0x733451,-0x958+-0x23bf*0x1+0x168c*0x2-_0x10be40);}}for(let _0x13c88d=0x25f3+0x50a+-0x2afd;_0x13c88d<_0x2ef88a;++_0x13c88d)for(let _0x52858d=-0xd4*0x1+-0x17*0x7a+0x3ee*0x3;_0x52858d<_0x3010cf;++_0x52858d){const _0x35fc86=_0x13c88d*(_0x3010cf+(-0x2*0x2f5+-0x51a+0xb05))+_0x52858d,_0x14a64b=_0x35fc86+_0x3010cf+(0x5b1*0x1+0x2534+0x5*-0x894);_0x111d86['push'](_0x35fc86+(-0x2292+0x3*0x367+0x1*0x185e),_0x14a64b,_0x35fc86),_0x111d86['push'](_0x35fc86+(-0x128+0x1*0xbe9+-0x8*0x158),_0x14a64b+(-0xbee*0x1+-0x79e+0x2cb*0x7),_0x14a64b);}this['positions']=_0x55bbdc,this['normals']=_0x2dd5ce,this['uvs']=_0x207951,this['uvs1']=_0x207951,this['indices']=_0x111d86,_0x4f32ae['calculateT'+'angents']&&(this['tangents']=pr(_0x55bbdc,_0x2dd5ce,_0x207951,_0x111d86));}}class VA extends By{constructor(_0x38e447={}){const _0x396abf=_0x38e447['latitudeBa'+'nds']??-0x1e63+0xc6*-0x13+-0xd*-0x379,_0x17cb16=_0x38e447['longitudeB'+'ands']??-0x6ba+-0x144c+0x1b16;super({'radius':0.5,'latitudeBands':_0x396abf,'longitudeBands':_0x17cb16});const _0x145ee1=0x2*0xaa9+0x25a5+-0x1*0x3af7+0.1,_0x21d886=0x2*-0xff7+-0xafd*0x2+0x3c*0xe6+0.95,_0x14dcf0=_0x21d886*_0x21d886,_0x4e2ef0=this['positions'];for(let _0x1e53c2=-0x2327+0xd8b+-0x2*-0xace;_0x1e53c2<_0x4e2ef0['length'];_0x1e53c2+=0x1493+0x10c*0xb+0x100a*-0x2){const _0x1f5ea5=_0x4e2ef0[_0x1e53c2]/(-0x83+0x1d3f+-0x1cbc+0.5);let _0x3a6d5f=_0x4e2ef0[_0x1e53c2+(0x1619*0x1+-0x3*0x1f4+-0x103c)]/(-0x31d*-0x1+-0x883*-0x4+-0x421*0x9+0.5);const _0x219a2e=_0x4e2ef0[_0x1e53c2+(-0x185*0x17+-0x1d4b+0x2020*0x2)]/(0x3bd+0xe*-0x119+-0xba1*-0x1+0.5);_0x3a6d5f<-0x1f52+0x1866+0x6ec&&(_0x3a6d5f*=-0x17cb*0x1+0x159b+0x230+0.3,_0x1f5ea5*_0x1f5ea5+_0x219a2e*_0x219a2e<_0x14dcf0&&(_0x3a6d5f=-_0x145ee1)),_0x3a6d5f+=_0x145ee1,_0x3a6d5f*=0x2*0x7c+0x2568+-0x2660+0.5,_0x4e2ef0[_0x1e53c2+(0x21b8+-0x1c*-0xd0+-0x3877)]=_0x3a6d5f;}}}class yo{static['create'](_0x3d49fa,_0x335a6b){switch(_0x335a6b){case lw:return yo['box'](_0x3d49fa);case hw:return yo['dome'](_0x3d49fa);}return M['assert'](_0x335a6b===So,'Unsupporte'+'d\x20sky\x20geom'+'etry\x20type\x20'+_0x335a6b),yo['infinite'](_0x3d49fa);}static['infinite'](_0x3a5e3b){return Ge['fromGeomet'+'ry'](_0x3a5e3b,new Ff(_0x3a5e3b));}static['box'](_0x2fd4e2){return Ge['fromGeomet'+'ry'](_0x2fd4e2,new Ff({'yOffset':0.5}));}static['dome'](_0x5c38b3){const _0x4834c1=new VA({'latitudeBands':0x32,'longitudeBands':0x32});return _0x4834c1['normals']=void(-0x2f*-0x83+0x1483+-0x10*0x2c9),_0x4834c1['uvs']=void(-0xe*-0x2ac+-0x13+-0x2555),Ge['fromGeomet'+'ry'](_0x5c38b3,_0x4834c1);}}class GA{constructor(_0x2e8ba5,_0x118b87,_0x3461ef,_0x46e9c3,_0x5d157b){h(this,'meshInstan'+'ce',null),h(this,'_depthWrit'+'e',!(0x3*-0xb7+0xa*0x19c+-0xdf2));const _0x554445=new In({'uniqueName':'SkyMateria'+'l','vertexGLSL':Ce['get'](_0x2e8ba5,ze)['get']('skyboxVS'),'fragmentGLSL':Ce['get'](_0x2e8ba5,ze)['get']('skyboxPS'),'vertexWGSL':Ce['get'](_0x2e8ba5,st)['get']('skyboxVS'),'fragmentWGSL':Ce['get'](_0x2e8ba5,st)['get']('skyboxPS'),'attributes':{'aPosition':Pe}});_0x554445['setDefine']('{SKYBOX_DE'+'CODE_FNC}',lr['decodeFunc'](_0x46e9c3['encoding'])),_0x5d157b!==So&&_0x554445['setDefine']('SKYMESH',''),_0x46e9c3['cubemap']&&_0x554445['setDefine']('SKY_CUBEMA'+'P',''),_0x554445['setParamet'+'er']('skyboxHigh'+'lightMulti'+'plier',_0x118b87['skyboxHigh'+'lightMulti'+'plier']),_0x46e9c3['cubemap']?_0x554445['setParamet'+'er']('texture_cu'+'beMap',_0x46e9c3):(_0x554445['setParamet'+'er']('texture_en'+'vAtlas',_0x46e9c3),_0x554445['setParamet'+'er']('mipLevel',_0x118b87['skyboxMip'])),_0x554445['cull']=mo,_0x554445['depthWrite']=this['_depthWrit'+'e'];const _0x287d8c=_0x118b87['layers']['getLayerBy'+'Id'](_m);if(_0x287d8c){const _0x51bab7=yo['create'](_0x2e8ba5,_0x5d157b),_0x3da260=new We(_0x51bab7,_0x554445,_0x3461ef);this['meshInstan'+'ce']=_0x3da260,_0x3da260['cull']=!(0x24eb*0x1+-0x55*0x1c+-0x1b9e),_0x3da260['pick']=!(-0x1d21*0x1+0x54+0x1cce),_0x287d8c['addMeshIns'+'tances']([_0x3da260]),this['skyLayer']=_0x287d8c;}}['destroy'](){this['meshInstan'+'ce']&&(this['skyLayer']&&this['skyLayer']['removeMesh'+'Instances']([this['meshInstan'+'ce']]),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}set['depthWrite'](_0x9c82e3){this['_depthWrit'+'e']=_0x9c82e3,this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']['depthWrite']=_0x9c82e3);}get['depthWrite'](){return this['_depthWrit'+'e'];}}class HA{constructor(_0x20ab2a){h(this,'_type',So),h(this,'_center',new I(0x7*0x359+0x24a5+0x4*-0xf05,-0x2525+0x1295*-0x1+0x37bb,-0x6fa+-0x1*0x531+0xc2b)),h(this,'skyMesh',null),h(this,'_depthWrit'+'e',!(-0x1b*-0x30+0x470+0x97f*-0x1)),h(this,'node',new He('SkyMeshNod'+'e')),(this['device']=_0x20ab2a['device'],this['scene']=_0x20ab2a,this['center']=new I(0x18bb+-0x3a*-0x26+-0x2157,0x184d*-0x1+0x7ff+0x104f,0x5*-0x1d3+-0xd76+0x1695),this['centerArra'+'y']=new Float32Array(-0x6c*-0x56+0xdaf+0x4*-0xc7d),this['projectedS'+'kydomeCent'+'erId']=this['device']['scope']['resolve']('projectedS'+'kydomeCent'+'er'));}['applySetti'+'ngs'](_0x266719){this['type']=_0x266719['skyType']??So,this['node']['setLocalPo'+'sition'](new I(_0x266719['skyMeshPos'+'ition']??[0x5*0x123+-0x1*0xb85+-0x2eb*-0x2,-0x444+0x2696+-0xbf*0x2e,-0x24c5*-0x1+0x3f1*0x8+-0x444d])),this['node']['setLocalEu'+'lerAngles'](new I(_0x266719['skyMeshRot'+'ation']??[-0x4*0x43e+-0x17d+-0x7*-0x2a3,0x17*0x139+-0x602+0x33*-0x6f,-0x1795+-0x2b1+0x1a46])),this['node']['setLocalSc'+'ale'](new I(_0x266719['skyMeshSca'+'le']??[0x313+-0x853*0x2+-0x13c*-0xb,-0x7bd*-0x5+0xa5c+0x56*-0x92,0x1fe6+-0xa80+0x1565*-0x1])),_0x266719['skyCenter']&&(this['_center']=new I(_0x266719['skyCenter']));}set['type'](_0x5051bc){this['_type']!==_0x5051bc&&(this['_type']=_0x5051bc,this['scene']['updateShad'+'ers']=!(0x2ad+-0xfd5+0xd28*0x1),this['updateSkyM'+'esh']());}get['type'](){return this['_type'];}set['center'](_0x16f1b9){this['_center']['copy'](_0x16f1b9);}get['center'](){return this['_center'];}set['depthWrite'](_0x551a1f){this['_depthWrit'+'e']!==_0x551a1f&&(this['_depthWrit'+'e']=_0x551a1f,this['skyMesh']&&(this['skyMesh']['depthWrite']=_0x551a1f));}get['depthWrite'](){return this['_depthWrit'+'e'];}['updateSkyM'+'esh'](){const _0x4ac124=this['scene']['_getSkybox'+'Tex']();_0x4ac124&&(this['resetSkyMe'+'sh'](),this['skyMesh']=new GA(this['device'],this['scene'],this['node'],_0x4ac124,this['type']),this['skyMesh']['depthWrite']=this['_depthWrit'+'e'],this['scene']['fire']('set:skybox',_0x4ac124));}['resetSkyMe'+'sh'](){var _0x5f3edc;(_0x5f3edc=this['skyMesh'])==null||_0x5f3edc['destroy'](),this['skyMesh']=null;}['update'](){if(this['type']!==So){const {center:_0xa87e15,centerArray:_0x80a6e0}=this,_0x173105=new I();this['node']['getWorldTr'+'ansform']()['transformP'+'oint'](_0xa87e15,_0x173105),_0x80a6e0[0x23ae+-0x74*-0x55+-0x4a32]=_0x173105['x'],_0x80a6e0[-0x10a+-0x180c+0x1917]=_0x173105['y'],_0x80a6e0[-0xd06*0x1+-0x11cb+0x1ed3]=_0x173105['z'],this['projectedS'+'kydomeCent'+'erId']['setValue'](_0x80a6e0);}}}const Zh=new He();Zh['worldTrans'+'form']=te['IDENTITY'],Zh['_dirtyWorl'+'d']=Zh['_dirtyNorm'+'al']=!(0x5*-0x45+0x7d3+-0x679);class WA{constructor(_0x549cd6,_0x22956a,_0x56a745){this['material']=_0x22956a,this['layer']=_0x56a745,this['positions']=[],this['colors']=[],this['mesh']=new Ge(_0x549cd6),this['meshInstan'+'ce']=null;}['addLines'](_0x4a44eb,_0x234874){const _0x5256c2=this['positions'],_0x97d355=_0x4a44eb['length'];for(let _0x1a4b2c=-0x23de+-0xc39+-0x1*-0x3017;_0x1a4b2c<_0x97d355;_0x1a4b2c++){const _0x221ab4=_0x4a44eb[_0x1a4b2c];_0x5256c2['push'](_0x221ab4['x'],_0x221ab4['y'],_0x221ab4['z']);}const _0x5359d5=this['colors'];if(_0x234874['length'])for(let _0x352a3c=0x16*0x1a0+0x7a4*-0x1+-0x2*0xe0e;_0x352a3c<_0x97d355;_0x352a3c++){const _0x4074a3=_0x234874[_0x352a3c];_0x5359d5['push'](_0x4074a3['r'],_0x4074a3['g'],_0x4074a3['b'],_0x4074a3['a']);}else{for(let _0x51b05e=0x8e0+-0x12ed+0xa0d;_0x51b05e<_0x97d355;_0x51b05e++)_0x5359d5['push'](_0x234874['r'],_0x234874['g'],_0x234874['b'],_0x234874['a']);}}['addLinesAr'+'rays'](_0x1fc81d,_0x58dd5a){const _0x3b9b7a=this['positions'];for(let _0x45f8d0=-0x19*-0x12c+-0x158+-0x1bf4;_0x45f8d0<_0x1fc81d['length'];_0x45f8d0+=0x30a*-0xa+0x102d+0x2*0x71d)_0x3b9b7a['push'](_0x1fc81d[_0x45f8d0],_0x1fc81d[_0x45f8d0+(-0x178f+-0x3ea+0x1b7a*0x1)],_0x1fc81d[_0x45f8d0+(0x259c+0x1f6d+-0x4507)]);const _0x112762=this['colors'];if(_0x58dd5a['length']){for(let _0x5aae37=0x1093+-0xc31+-0xbb*0x6;_0x5aae37<_0x58dd5a['length'];_0x5aae37+=-0x19d1*-0x1+0x2*0x5c7+-0x1*0x255b)_0x112762['push'](_0x58dd5a[_0x5aae37],_0x58dd5a[_0x5aae37+(-0x2121+0x13*-0x171+0x1*0x3c85)],_0x58dd5a[_0x5aae37+(-0x13*0x125+0x1e6*-0xf+0x323b)],_0x58dd5a[_0x5aae37+(-0x26c4+-0xafc+0x31c3)]);}else{const _0x16f61e=_0x1fc81d['length']/(0xde5*-0x1+-0x25ce+0x33b6);for(let _0x255e83=0x1f14+0x99d+-0x28b1*0x1;_0x255e83<_0x16f61e;_0x255e83++)_0x112762['push'](_0x58dd5a['r'],_0x58dd5a['g'],_0x58dd5a['b'],_0x58dd5a['a']);}}['onPreRende'+'r'](_0x3888b4,_0x4ae7c5){this['positions']['length']>-0xe68+-0x1bae+0x2a16&&this['material']['transparen'+'t']===_0x4ae7c5&&(this['mesh']['setPositio'+'ns'](this['positions']),this['mesh']['setColors'](this['colors']),this['mesh']['update'](Fc,!(-0x82f*0x1+0x116e*-0x1+0x88a*0x3)),this['meshInstan'+'ce']||(this['meshInstan'+'ce']=new We(this['mesh'],this['material'],Zh)),_0x3888b4['push'](this['meshInstan'+'ce']));}['clear'](){this['positions']['length']=0x1ec*-0xb+0x18c5*0x1+0x1*-0x3a1,this['colors']['length']=0xd*0x148+0xf5*0x1+-0x1f5*0x9;}}class $A{constructor(_0x22b707){this['device']=_0x22b707,this['map']=new Map();}['getBatch'](_0x275c37,_0xd27ce){let _0x3381e0=this['map']['get'](_0x275c37);return _0x3381e0||(_0x3381e0=new WA(this['device'],_0x275c37,_0xd27ce),this['map']['set'](_0x275c37,_0x3381e0)),_0x3381e0;}['onPreRende'+'r'](_0x3a2684,_0x37a555){this['map']['forEach'](_0x4dfef1=>{_0x4dfef1['onPreRende'+'r'](_0x3a2684,_0x37a555);});}['clear'](){this['map']['forEach'](_0x1e11b7=>_0x1e11b7['clear']());}}const ps=[],ba=new I();class XA{constructor(_0x3a4b87){h(this,'shaderDesc'+'s',new Map()),(this['device']=_0x3a4b87,this['quadMesh']=null,this['textureSha'+'der']=null,this['depthTextu'+'reShader']=null,this['cubeLocalP'+'os']=null,this['cubeWorldP'+'os']=null,this['batchesMap']=new Map(),this['allBatches']=new Set(),this['updatedLay'+'ers']=new Set(),this['_materialD'+'epth']=null,this['_materialN'+'oDepth']=null,this['layerMeshI'+'nstances']=new Map());}['createMate'+'rial'](_0xda84ee){const _0x3a3949=new In({'uniqueName':'ImmediateL'+'ine','vertexGLSL':Ce['get'](this['device'],ze)['get']('immediateL'+'ineVS'),'fragmentGLSL':Ce['get'](this['device'],ze)['get']('immediateL'+'inePS'),'vertexWGSL':Ce['get'](this['device'],st)['get']('immediateL'+'ineVS'),'fragmentWGSL':Ce['get'](this['device'],st)['get']('immediateL'+'inePS'),'attributes':{'vertex_position':Pe,'vertex_color':kt}});return _0x3a3949['blendType']=Gs,_0x3a3949['depthTest']=_0xda84ee,_0x3a3949['update'](),_0x3a3949;}get['materialDe'+'pth'](){return this['_materialD'+'epth']||(this['_materialD'+'epth']=this['createMate'+'rial'](!(0x245e+0x1740+-0x3b9e))),this['_materialD'+'epth'];}get['materialNo'+'Depth'](){return this['_materialN'+'oDepth']||(this['_materialN'+'oDepth']=this['createMate'+'rial'](!(-0x1*-0x10d3+-0x1fb1+0xedf))),this['_materialN'+'oDepth'];}['getBatch'](_0x5ee15c,_0x5aac9d){let _0x53b7c4=this['batchesMap']['get'](_0x5ee15c);_0x53b7c4||(_0x53b7c4=new $A(this['device']),this['batchesMap']['set'](_0x5ee15c,_0x53b7c4)),this['allBatches']['add'](_0x53b7c4);const _0x2365a2=_0x5aac9d?this['materialDe'+'pth']:this['materialNo'+'Depth'];return _0x53b7c4['getBatch'](_0x2365a2,_0x5ee15c);}['getShaderD'+'esc'](_0x55d757,_0x3cf841,_0x31442c){return this['shaderDesc'+'s']['has'](_0x55d757)||this['shaderDesc'+'s']['set'](_0x55d757,{'uniqueName':'DebugShade'+'r:'+_0x55d757,'vertexGLSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20matr'+'ix_model;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ve'+'c2\x20uv0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_model\x20*\x20v'+'ec4(vertex'+'_position,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uv0\x20=\x20ve'+'rtex_posit'+'ion.xy\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20','vertexWGSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20@ver'+'tex\x20fn\x20ver'+'texMain(in'+'put:\x20Verte'+'xInput)\x20->'+'\x20VertexOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20un'+'iform.matr'+'ix_model\x20*'+'\x20vec4f(inp'+'ut.vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.uv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20+\x20vec2f'+'(0.5);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20','fragmentGLSL':_0x3cf841,'fragmentWGSL':_0x31442c,'attributes':{'vertex_position':Pe}}),this['shaderDesc'+'s']['get'](_0x55d757);}['getTexture'+'ShaderDesc'](_0x532f7b){const _0x2efaeb=lr['decodeFunc'](_0x532f7b);return this['getShaderD'+'esc']('textureSha'+'der-'+_0x532f7b,'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20vec2\x20uv0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20colorMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20linear'+'Color\x20=\x20'+_0x2efaeb+('(texture2D'+'(colorMap,'+'\x20uv0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(linearC'+'olor),\x201);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20colorMa'+'pSampler:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20@fragment'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output:\x20Fr'+'agmentOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20sample'+'dTex\x20=\x20tex'+'tureSample'+'(colorMap,'+'\x20colorMapS'+'ampler,\x20in'+'put.uv0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'linearColo'+'r:\x20vec3f\x20='+'\x20'+_0x2efaeb+('(sampledTe'+'x);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(gammaCorr'+'ectOutput('+'linearColo'+'r),\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'));}['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](){return this['getShaderD'+'esc']('textureSha'+'derUnfilte'+'rable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vec2\x20uv0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20highp\x20sam'+'pler2D\x20col'+'orMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'oid\x20main\x20('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'uv\x20=\x20ivec2'+'(uv0\x20*\x20tex'+'tureSize(c'+'olorMap,\x200'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'texelFetch'+'(colorMap,'+'\x20uv,\x200).xy'+'z,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<uff>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20@'+'fragment\x20f'+'n\x20fragment'+'Main(input'+'\x20:\x20Fragmen'+'tInput)\x20->'+'\x20FragmentO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'nput.uv0\x20*'+'\x20vec2f(tex'+'tureDimens'+'ions(color'+'Map,\x200)));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20fetchedCo'+'lor\x20:\x20vec4'+'f\x20=\x20textur'+'eLoad(colo'+'rMap,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(fetchedCo'+'lor.xyz,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20');}['getDepthTe'+'xtureShade'+'rDesc'](){return this['getShaderD'+'esc']('depthTextu'+'reShader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20void\x20main'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x20getLi'+'nearScreen'+'Depth(getI'+'mageEffect'+'UV(uv0))\x20*'+'\x20camera_pa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(vec3(de'+'pth)),\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20u'+'v0:\x20vec2f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20@fragme'+'nt\x20fn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20depth'+':\x20f32\x20=\x20ge'+'tLinearScr'+'eenDepth(g'+'etImageEff'+'ectUV(inpu'+'t.uv0))\x20*\x20'+'uniform.ca'+'mera_param'+'s.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(vec3f(dep'+'th)),\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}['getQuadMes'+'h'](){return this['quadMesh']||(this['quadMesh']=new Ge(this['device']),this['quadMesh']['setPositio'+'ns']([-(0x47*-0x1+-0xbc7*0x2+-0x1*-0x17d5+0.5),-(0x24c3*0x1+-0x1cb3+-0x810+0.5),-0x116d+-0x147f+0x25ec,0x1*0xe50+0x58d+-0x13dd+0.5,-(-0x65b*0x6+0x1cb7+0x96b+0.5),0x120*0xe+0x607*-0x1+-0x9b9,-(-0x5*0x776+-0x2441+0x498f*0x1+0.5),-0x24+0x2061+0x15*-0x189+0.5,-0x2*-0xd55+-0x2*0x892+-0x986,0x1*0x2257+0x214b+-0x2*0x21d1+0.5,-0x6cb+0x13d8+-0xd0d*0x1+0.5,0x96c+-0x16*-0x12f+-0x2376]),this['quadMesh']['update'](cr)),this['quadMesh'];}['drawMesh'](_0x1d1088,_0x51368a,_0x2f7669,_0x411933,_0x5546ef){if(!_0x411933){const _0x2dfac2=this['getGraphNo'+'de'](_0x51368a);_0x411933=new We(_0x2f7669,_0x1d1088,_0x2dfac2);}let _0x3a53be=this['layerMeshI'+'nstances']['get'](_0x5546ef);_0x3a53be||(_0x3a53be=[],this['layerMeshI'+'nstances']['set'](_0x5546ef,_0x3a53be)),_0x3a53be['push'](_0x411933);}['drawWireAl'+'ignedBox'](_0x1c30bb,_0x5f20c4,_0x2d1c77,_0x21c2b7,_0x5c5ebb,_0x2fa373){if(_0x2fa373){const _0x2c5510=(_0x362046,_0x1e5924,_0x4e367b)=>{ba['set'](_0x362046,_0x1e5924,_0x4e367b),_0x2fa373['transformP'+'oint'](ba,ba),ps['push'](ba['x'],ba['y'],ba['z']);};_0x2c5510(_0x1c30bb['x'],_0x1c30bb['y'],_0x1c30bb['z']),_0x2c5510(_0x1c30bb['x'],_0x5f20c4['y'],_0x1c30bb['z']),_0x2c5510(_0x1c30bb['x'],_0x5f20c4['y'],_0x1c30bb['z']),_0x2c5510(_0x5f20c4['x'],_0x5f20c4['y'],_0x1c30bb['z']),_0x2c5510(_0x5f20c4['x'],_0x5f20c4['y'],_0x1c30bb['z']),_0x2c5510(_0x5f20c4['x'],_0x1c30bb['y'],_0x1c30bb['z']),_0x2c5510(_0x5f20c4['x'],_0x1c30bb['y'],_0x1c30bb['z']),_0x2c5510(_0x1c30bb['x'],_0x1c30bb['y'],_0x1c30bb['z']),_0x2c5510(_0x1c30bb['x'],_0x1c30bb['y'],_0x5f20c4['z']),_0x2c5510(_0x1c30bb['x'],_0x5f20c4['y'],_0x5f20c4['z']),_0x2c5510(_0x1c30bb['x'],_0x5f20c4['y'],_0x5f20c4['z']),_0x2c5510(_0x5f20c4['x'],_0x5f20c4['y'],_0x5f20c4['z']),_0x2c5510(_0x5f20c4['x'],_0x5f20c4['y'],_0x5f20c4['z']),_0x2c5510(_0x5f20c4['x'],_0x1c30bb['y'],_0x5f20c4['z']),_0x2c5510(_0x5f20c4['x'],_0x1c30bb['y'],_0x5f20c4['z']),_0x2c5510(_0x1c30bb['x'],_0x1c30bb['y'],_0x5f20c4['z']),_0x2c5510(_0x1c30bb['x'],_0x1c30bb['y'],_0x1c30bb['z']),_0x2c5510(_0x1c30bb['x'],_0x1c30bb['y'],_0x5f20c4['z']),_0x2c5510(_0x1c30bb['x'],_0x5f20c4['y'],_0x1c30bb['z']),_0x2c5510(_0x1c30bb['x'],_0x5f20c4['y'],_0x5f20c4['z']),_0x2c5510(_0x5f20c4['x'],_0x5f20c4['y'],_0x1c30bb['z']),_0x2c5510(_0x5f20c4['x'],_0x5f20c4['y'],_0x5f20c4['z']),_0x2c5510(_0x5f20c4['x'],_0x1c30bb['y'],_0x1c30bb['z']),_0x2c5510(_0x5f20c4['x'],_0x1c30bb['y'],_0x5f20c4['z']);}else ps['push'](_0x1c30bb['x'],_0x1c30bb['y'],_0x1c30bb['z'],_0x1c30bb['x'],_0x5f20c4['y'],_0x1c30bb['z'],_0x1c30bb['x'],_0x5f20c4['y'],_0x1c30bb['z'],_0x5f20c4['x'],_0x5f20c4['y'],_0x1c30bb['z'],_0x5f20c4['x'],_0x5f20c4['y'],_0x1c30bb['z'],_0x5f20c4['x'],_0x1c30bb['y'],_0x1c30bb['z'],_0x5f20c4['x'],_0x1c30bb['y'],_0x1c30bb['z'],_0x1c30bb['x'],_0x1c30bb['y'],_0x1c30bb['z'],_0x1c30bb['x'],_0x1c30bb['y'],_0x5f20c4['z'],_0x1c30bb['x'],_0x5f20c4['y'],_0x5f20c4['z'],_0x1c30bb['x'],_0x5f20c4['y'],_0x5f20c4['z'],_0x5f20c4['x'],_0x5f20c4['y'],_0x5f20c4['z'],_0x5f20c4['x'],_0x5f20c4['y'],_0x5f20c4['z'],_0x5f20c4['x'],_0x1c30bb['y'],_0x5f20c4['z'],_0x5f20c4['x'],_0x1c30bb['y'],_0x5f20c4['z'],_0x1c30bb['x'],_0x1c30bb['y'],_0x5f20c4['z'],_0x1c30bb['x'],_0x1c30bb['y'],_0x1c30bb['z'],_0x1c30bb['x'],_0x1c30bb['y'],_0x5f20c4['z'],_0x1c30bb['x'],_0x5f20c4['y'],_0x1c30bb['z'],_0x1c30bb['x'],_0x5f20c4['y'],_0x5f20c4['z'],_0x5f20c4['x'],_0x5f20c4['y'],_0x1c30bb['z'],_0x5f20c4['x'],_0x5f20c4['y'],_0x5f20c4['z'],_0x5f20c4['x'],_0x1c30bb['y'],_0x1c30bb['z'],_0x5f20c4['x'],_0x1c30bb['y'],_0x5f20c4['z']);this['getBatch'](_0x5c5ebb,_0x21c2b7)['addLinesAr'+'rays'](ps,_0x2d1c77),ps['length']=0x3f2+-0x15+-0x1*0x3dd;}['drawWireSp'+'here'](_0x5d91f2,_0x344428,_0xa79ed6,_0x63ce8,_0x3235ef,_0x1d950f){const _0x13e58c=(0x12*-0x13c+0xf*-0x1d7+0x31d3)*Math['PI']/_0x63ce8;let _0x555da9=0x44f*0x1+-0x2442+0x1ff3;for(let _0x43de85=0x1*-0x1755+0x11ef+0x2*0x2b3;_0x43de85<_0x63ce8;_0x43de85++){const _0x541cce=Math['sin'](_0x555da9),_0x31b1a9=Math['cos'](_0x555da9);_0x555da9+=_0x13e58c;const _0x451598=Math['sin'](_0x555da9),_0x45e512=Math['cos'](_0x555da9);ps['push'](_0x5d91f2['x']+_0x344428*_0x541cce,_0x5d91f2['y'],_0x5d91f2['z']+_0x344428*_0x31b1a9),ps['push'](_0x5d91f2['x']+_0x344428*_0x451598,_0x5d91f2['y'],_0x5d91f2['z']+_0x344428*_0x45e512),ps['push'](_0x5d91f2['x']+_0x344428*_0x541cce,_0x5d91f2['y']+_0x344428*_0x31b1a9,_0x5d91f2['z']),ps['push'](_0x5d91f2['x']+_0x344428*_0x451598,_0x5d91f2['y']+_0x344428*_0x45e512,_0x5d91f2['z']),ps['push'](_0x5d91f2['x'],_0x5d91f2['y']+_0x344428*_0x541cce,_0x5d91f2['z']+_0x344428*_0x31b1a9),ps['push'](_0x5d91f2['x'],_0x5d91f2['y']+_0x344428*_0x451598,_0x5d91f2['z']+_0x344428*_0x45e512);}this['getBatch'](_0x1d950f,_0x3235ef)['addLinesAr'+'rays'](ps,_0xa79ed6),ps['length']=0x7f5+-0x1292+0x1*0xa9d;}['getGraphNo'+'de'](_0x4b04e6){const _0x341542=new He('ImmediateD'+'ebug');return _0x341542['worldTrans'+'form']=_0x4b04e6,_0x341542['_dirtyWorl'+'d']=_0x341542['_dirtyNorm'+'al']=!(0xf*0x151+0x2*-0x772+-0x4da),_0x341542;}['onPreRende'+'rLayer'](_0x50d393,_0x197116,_0x1b0635){if(this['batchesMap']['forEach']((_0x2e9a08,_0x61b003)=>{_0x61b003===_0x50d393&&_0x2e9a08['onPreRende'+'r'](_0x197116,_0x1b0635);}),!this['updatedLay'+'ers']['has'](_0x50d393)){this['updatedLay'+'ers']['add'](_0x50d393);const _0x194cd3=this['layerMeshI'+'nstances']['get'](_0x50d393);if(_0x194cd3){for(let _0x5d914d=-0x1af9+0x1e2f+-0x336;_0x5d914d<_0x194cd3['length'];_0x5d914d++)_0x197116['push'](_0x194cd3[_0x5d914d]);_0x194cd3['length']=-0x1459+-0x50e+0x1967;}}}['onPostRend'+'er'](){this['allBatches']['forEach'](_0x98ef6d=>_0x98ef6d['clear']()),this['allBatches']['clear'](),this['updatedLay'+'ers']['clear']();}}class qA{constructor(){h(this,'type',On),h(this,'color',new ie(-0x24ef+0x13*-0xca+0x3*0x114f,0x4*-0x1d7+-0x2f8+0xa54,-0x1*0x641+0x25f9+-0x1fb8)),h(this,'density',-0x1*-0x1f15+-0x18e5+-0x48*0x16),h(this,'start',0x61*0x2c+0x21d*0x1+-0x12c8),h(this,'end',0x160b*0x1+0x1d7+0x13fa*-0x1);}}class wi extends pe{constructor(_0x419e64){super(),h(this,'ambientBak'+'e',!(0x789+0x2541+0x1*-0x2cc9)),h(this,'ambientBak'+'eOcclusion'+'Brightness',0x6b*0x43+-0x1*0x206c+0x27*0x1d),h(this,'ambientBak'+'eOcclusion'+'Contrast',-0xfe*0x10+0xb*0x103+-0x3*-0x195),h(this,'ambientLig'+'ht',new ie(-0x1631*-0x1+0x11f+0x5d4*-0x4,0xd1b+0x1922+-0xcbf*0x3,0x733*-0x2+-0x116b+-0x1fd1*-0x1)),h(this,'ambientLum'+'inance',0xbb6*0x1+-0xe*-0x2a7+-0x30d8),h(this,'exposure',-0xb44+-0x1*-0x2419+0xc6a*-0x2),h(this,'lightmapSi'+'zeMultipli'+'er',-0x2060+-0x1373*0x1+0x2*0x19ea),h(this,'lightmapMa'+'xResolutio'+'n',0x1720+0x121a+-0x213a),h(this,'lightmapMo'+'de',ph),h(this,'lightmapFi'+'lterEnable'+'d',!(-0x13*-0x1d6+-0x830+0x1*-0x1ab1)),h(this,'lightmapHD'+'R',!(-0x1cf3+-0xbc2+0x6c9*0x6)),h(this,'root',null),h(this,'physicalUn'+'its',!(-0x1830+-0xcdd+0x250e)),h(this,'_envAtlas',null),h(this,'_skyboxCub'+'eMap',null),h(this,'_fogParams',new qA()),h(this,'forcePassT'+'hroughSpec'+'ular',!(0x2419+-0x94*0x1+-0x2384)),(M['assert'](_0x419e64,'Scene\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x419e64,this['_gravity']=new I(0x9f+-0xc4b+0x14c*0x9,-(0x7db+-0x2387*0x1+0xad*0x29+0.8000000000000007),-0x63f+0xd28*0x2+-0x1411),this['_layers']=null,this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']=null,this['_skyboxInt'+'ensity']=-0x5*-0x1d2+0x1*0xbe1+-0x1e*0xb3,this['_skyboxLum'+'inance']=-0x38a+0x1ed+0x3b*0x7,this['_skyboxMip']=-0x12*-0x221+-0x7*-0x6d+-0x294d*0x1,this['_skyboxHig'+'hlightMult'+'iplier']=-0x1*-0x215e+0x20c5+-0x4222,this['_skyboxRot'+'ationShade'+'rInclude']=!(-0x201c*-0x1+0x377*-0x9+-0xec),this['_skyboxRot'+'ation']=new le(),this['_skyboxRot'+'ationMat3']=new oi(),this['_skyboxRot'+'ationMat4']=new te(),this['_ambientBa'+'keNumSampl'+'es']=0x17*0x16f+0xad4+-0x2bcc,this['_ambientBa'+'keSpherePa'+'rt']=-0x1*-0x1302+-0x1*0x24f2+-0x8f8*-0x2+0.4,this['_lightmapF'+'ilterRange']=0x1*-0x61d+0xa91*0x1+-0x1*0x46a,this['_lightmapF'+'ilterSmoot'+'hness']=0x18e4+-0x1*-0x4ad+-0x1d91+0.2,this['_clustered'+'LightingEn'+'abled']=!(-0x10c7+-0x6*-0x579+-0x1*0x100f),this['_lightingP'+'arams']=new Fy(this['device']['supportsAr'+'eaLights'],this['device']['maxTexture'+'Size'],()=>{this['updateShad'+'ers']=!(0x2*0xa21+0x12e5+-0x2727);}),this['_sky']=new HA(this),this['_stats']={'meshInstances':0x0,'lights':0x0,'dynamicLights':0x0,'bakedLights':0x0,'updateShadersTime':0x0},this['updateShad'+'ers']=!(-0x935*-0x3+-0x82d*-0x4+-0x3c53*0x1),this['_shaderVer'+'sion']=-0x1731+0x5*0x189+-0x3*-0x52c,this['immediate']=new XA(this['device']));}get['defaultDra'+'wLayer'](){return this['layers']['getLayerBy'+'Id'](gm);}set['ambientBak'+'eNumSample'+'s'](_0x2a9c5c){this['_ambientBa'+'keNumSampl'+'es']=Y['clamp'](Math['floor'](_0x2a9c5c),0x1*0x2f5+-0x140+-0x4*0x6d,-0x1312+0x9cf+0xa42);}get['ambientBak'+'eNumSample'+'s'](){return this['_ambientBa'+'keNumSampl'+'es'];}set['ambientBak'+'eSpherePar'+'t'](_0x3e9b42){this['_ambientBa'+'keSpherePa'+'rt']=Y['clamp'](_0x3e9b42,-0x2*0x125e+-0x1f30+0x43ec+0.001,-0x1c75+0x1*-0xbcb+0x2841);}get['ambientBak'+'eSpherePar'+'t'](){return this['_ambientBa'+'keSpherePa'+'rt'];}set['clusteredL'+'ightingEna'+'bled'](_0x4b67be){if(this['device']['isWebGPU']&&!_0x4b67be){M['warnOnce']('WebGPU\x20cur'+'rently\x20onl'+'y\x20supports'+'\x20clustered'+'\x20lighting,'+'\x20and\x20this\x20'+'cannot\x20be\x20'+'disabled.');return;}if(!this['_clustered'+'LightingEn'+'abled']&&_0x4b67be){console['error']('Turning\x20on'+'\x20disabled\x20'+'clustered\x20'+'lighting\x20i'+'s\x20not\x20curr'+'ently\x20supp'+'orted');return;}this['_clustered'+'LightingEn'+'abled']=_0x4b67be;}get['clusteredL'+'ightingEna'+'bled'](){return this['_clustered'+'LightingEn'+'abled'];}set['envAtlas'](_0x16d7bb){_0x16d7bb!==this['_envAtlas']&&(this['_envAtlas']=_0x16d7bb,_0x16d7bb&&(_0x16d7bb['addressU']=ue,_0x16d7bb['addressV']=ue,_0x16d7bb['minFilter']=_t,_0x16d7bb['magFilter']=_t,_0x16d7bb['mipmaps']=!(0x88e+0x4c2*0x2+-0xb9*0x19)),this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_resetSkyM'+'esh']());}get['envAtlas'](){return this['_envAtlas'];}set['layers'](_0x1e3c43){const _0x47974b=this['_layers'];this['_layers']=_0x1e3c43,this['fire']('set:layers',_0x47974b,_0x1e3c43);}get['layers'](){return this['_layers'];}get['sky'](){return this['_sky'];}get['lighting'](){return this['_lightingP'+'arams'];}get['fog'](){return this['_fogParams'];}set['lightmapFi'+'lterRange'](_0x34ef64){this['_lightmapF'+'ilterRange']=Math['max'](_0x34ef64,-0xb86*-0x1+0x1397+-0xa5f*0x3+0.001);}get['lightmapFi'+'lterRange'](){return this['_lightmapF'+'ilterRange'];}set['lightmapFi'+'lterSmooth'+'ness'](_0x51fa27){this['_lightmapF'+'ilterSmoot'+'hness']=Math['max'](_0x51fa27,-0x1*0x10f3+-0x1f95+0x3088+0.001);}get['lightmapFi'+'lterSmooth'+'ness'](){return this['_lightmapF'+'ilterSmoot'+'hness'];}set['prefiltere'+'dCubemaps'](_0x10962a){_0x10962a=_0x10962a||[];const _0x81df00=this['_prefilter'+'edCubemaps'];(_0x81df00['length']!==_0x10962a['length']||_0x81df00['some']((_0x3231bc,_0x5e58aa)=>_0x3231bc!==_0x10962a[_0x5e58aa]))&&(_0x10962a['length']===-0x1*0x107b+0x35*-0x47+0x1f34&&_0x10962a['every'](_0x102599=>!!_0x102599)?(this['_internalE'+'nvAtlas']=My['generatePr'+'efilteredA'+'tlas'](_0x10962a,{'target':this['_internalE'+'nvAtlas']}),this['_envAtlas']=this['_internalE'+'nvAtlas']):(this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_envAtlas']=null),this['_prefilter'+'edCubemaps']=_0x10962a['slice'](),this['_resetSkyM'+'esh']());}get['prefiltere'+'dCubemaps'](){return this['_prefilter'+'edCubemaps'];}set['skybox'](_0x49582b){_0x49582b!==this['_skyboxCub'+'eMap']&&(this['_skyboxCub'+'eMap']=_0x49582b,this['_resetSkyM'+'esh']());}get['skybox'](){return this['_skyboxCub'+'eMap'];}set['skyboxInte'+'nsity'](_0x5ed7a0){_0x5ed7a0!==this['_skyboxInt'+'ensity']&&(this['_skyboxInt'+'ensity']=_0x5ed7a0,this['_resetSkyM'+'esh']());}get['skyboxInte'+'nsity'](){return this['_skyboxInt'+'ensity'];}set['skyboxLumi'+'nance'](_0x4290e7){_0x4290e7!==this['_skyboxLum'+'inance']&&(this['_skyboxLum'+'inance']=_0x4290e7,this['_resetSkyM'+'esh']());}get['skyboxLumi'+'nance'](){return this['_skyboxLum'+'inance'];}set['skyboxMip'](_0x389a0d){_0x389a0d!==this['_skyboxMip']&&(this['_skyboxMip']=_0x389a0d,this['_resetSkyM'+'esh']());}get['skyboxMip'](){return this['_skyboxMip'];}set['skyboxHigh'+'lightMulti'+'plier'](_0x4b08f4){_0x4b08f4!==this['_skyboxHig'+'hlightMult'+'iplier']&&(this['_skyboxHig'+'hlightMult'+'iplier']=_0x4b08f4,this['_resetSkyM'+'esh']());}get['skyboxHigh'+'lightMulti'+'plier'](){return this['_skyboxHig'+'hlightMult'+'iplier'];}set['skyboxRota'+'tion'](_0x345708){if(!this['_skyboxRot'+'ation']['equals'](_0x345708)){const _0x2d4b16=_0x345708['equals'](le['IDENTITY']);this['_skyboxRot'+'ation']['copy'](_0x345708),_0x2d4b16?this['_skyboxRot'+'ationMat3']['setIdentit'+'y']():(this['_skyboxRot'+'ationMat4']['setTRS'](I['ZERO'],_0x345708,I['ONE']),this['_skyboxRot'+'ationMat3']['invertMat4'](this['_skyboxRot'+'ationMat4'])),!this['_skyboxRot'+'ationShade'+'rInclude']&&!_0x2d4b16&&(this['_skyboxRot'+'ationShade'+'rInclude']=!(-0x181*-0x1+0x232*0x2+-0x5e5),this['_resetSkyM'+'esh']());}}get['skyboxRota'+'tion'](){return this['_skyboxRot'+'ation'];}['destroy'](){this['_resetSkyM'+'esh'](),this['root']=null,this['off']();}['drawLine'](_0x156b86,_0x499e88,_0x2196a7=ie['WHITE'],_0x368996=!(-0x3eb*-0x5+0x22e5+-0x367c),_0xcd47b0=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0xcd47b0,_0x368996)['addLines']([_0x156b86,_0x499e88],[_0x2196a7,_0x2196a7]);}['drawLines'](_0x206c67,_0x2eb00d,_0x4deec5=!(-0x1*0xdc1+0x1fc2+0x1*-0x1201),_0x180eb4=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x180eb4,_0x4deec5)['addLines'](_0x206c67,_0x2eb00d);}['drawLineAr'+'rays'](_0xd57593,_0x43bdf1,_0x521937=!(-0xaa0+0x346+-0x2*-0x3ad),_0x3b88cb=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x3b88cb,_0x521937)['addLinesAr'+'rays'](_0xd57593,_0x43bdf1);}['applySetti'+'ngs'](_0x230ced){const _0x161815=_0x230ced['physics'],_0x17647e=_0x230ced['render'];this['_gravity']['set'](_0x161815['gravity'][-0x1cfc+0x5ca+0x1732*0x1],_0x161815['gravity'][-0x1d20+0x254b+-0x82a],_0x161815['gravity'][0x26da+0x5*-0x109+-0x21ab]),this['ambientLig'+'ht']['set'](_0x17647e['global_amb'+'ient'][-0x1*0x138e+-0x259d+0x392b*0x1],_0x17647e['global_amb'+'ient'][0x35f+0xafa*-0x1+0x79c],_0x17647e['global_amb'+'ient'][-0x19*0x67+-0x17d+0x3*0x3da]),this['ambientLum'+'inance']=_0x17647e['ambientLum'+'inance'],this['fog']['type']=_0x17647e['fog'],this['fog']['color']['set'](_0x17647e['fog_color'][-0x24d5+-0x1*-0x2033+0x2*0x251],_0x17647e['fog_color'][-0x5d2*-0x4+-0x15*0x95+0x5*-0x236],_0x17647e['fog_color'][-0x4*0x566+-0x475+-0x1*-0x1a0f]),this['fog']['start']=_0x17647e['fog_start'],this['fog']['end']=_0x17647e['fog_end'],this['fog']['density']=_0x17647e['fog_densit'+'y'],this['lightmapSi'+'zeMultipli'+'er']=_0x17647e['lightmapSi'+'zeMultipli'+'er'],this['lightmapMa'+'xResolutio'+'n']=_0x17647e['lightmapMa'+'xResolutio'+'n'],this['lightmapMo'+'de']=_0x17647e['lightmapMo'+'de'],this['exposure']=_0x17647e['exposure'],this['_skyboxInt'+'ensity']=_0x17647e['skyboxInte'+'nsity']??0x2643+-0x191*-0x17+0x1*-0x4a49,this['_skyboxLum'+'inance']=_0x17647e['skyboxLumi'+'nance']??-0x254f+-0x17*0x295+0xaed2,this['_skyboxMip']=_0x17647e['skyboxMip']??-0x2e*0x7+0x186b+0x21b*-0xb,_0x17647e['skyboxRota'+'tion']&&(this['skyboxRota'+'tion']=new le()['setFromEul'+'erAngles'](_0x17647e['skyboxRota'+'tion'][-0x3*-0xb95+-0x36c*-0x2+0x111*-0x27],_0x17647e['skyboxRota'+'tion'][-0x148d*0x1+-0x1*0x10fc+0x258a],_0x17647e['skyboxRota'+'tion'][-0x18c9+0xb69*0x2+0x5*0x65])),this['sky']['applySetti'+'ngs'](_0x17647e),this['clusteredL'+'ightingEna'+'bled']=_0x17647e['clusteredL'+'ightingEna'+'bled']??!(-0x22aa+-0x1000+-0x73d*-0x7),this['lighting']['applySetti'+'ngs'](_0x17647e),['lightmapFi'+'lterEnable'+'d','lightmapFi'+'lterRange','lightmapFi'+'lterSmooth'+'ness','ambientBak'+'e','ambientBak'+'eNumSample'+'s','ambientBak'+'eSpherePar'+'t','ambientBak'+'eOcclusion'+'Brightness','ambientBak'+'eOcclusion'+'Contrast']['forEach'](_0x15f925=>{_0x17647e['hasOwnProp'+'erty'](_0x15f925)&&(this[_0x15f925]=_0x17647e[_0x15f925]);}),this['_resetSkyM'+'esh']();}['_getSkybox'+'Tex'](){const _0x7f4a82=this['_prefilter'+'edCubemaps'];return this['_skyboxMip']?_0x7f4a82[[0x259b*-0x1+-0x25*0x9c+-0x57*-0xb1,0x222d+0x667+-0x11*0x263,0x192a+-0x10bb+-0xc4*0xb,-0x78e+-0x2541+-0x2a3*-0x11,-0x11f5+0x12*0xd5+0x300,-0x1*0x33b+-0xe9c+-0x1*-0x11dd][this['_skyboxMip']]]||this['_envAtlas']||_0x7f4a82[-0xb*0x161+-0x1ec6+0x2df1]||this['_skyboxCub'+'eMap']:this['_skyboxCub'+'eMap']||_0x7f4a82[-0xc64+0x2e9+0x1*0x97b]||this['_envAtlas'];}['_updateSky'+'Mesh'](){this['sky']['skyMesh']||this['sky']['updateSkyM'+'esh'](),this['sky']['update']();}['_resetSkyM'+'esh'](){this['sky']['resetSkyMe'+'sh'](),this['updateShad'+'ers']=!(-0x47*-0x49+0x1b3b+-0x2f7a);}['setSkybox'](_0x586fbd){_0x586fbd?(this['skybox']=_0x586fbd[0x1f71+0x5e8+-0x2559]||null,_0x586fbd[-0x2d2*-0x1+0x2e3*-0x7+0x1164]&&!_0x586fbd[-0x9e9*0x2+0x31*-0x19+0x189c]['cubemap']?this['envAtlas']=_0x586fbd[0x2287*-0x1+0x304*0x9+-0xac*-0xb]:this['prefiltere'+'dCubemaps']=_0x586fbd['slice'](0x1192+-0x404+-0xd8d*0x1)):(this['skybox']=null,this['envAtlas']=null);}get['lightmapPi'+'xelFormat'](){return this['lightmapHD'+'R']&&this['device']['getRendera'+'bleHdrForm'+'at']()||Oe;}}h(wi,'EVENT_SETL'+'AYERS','set:layers'),h(wi,'EVENT_SETS'+'KYBOX','set:skybox'),h(wi,'EVENT_PRER'+'ENDER','prerender'),h(wi,'EVENT_POST'+'RENDER','postrender'),h(wi,'EVENT_PRER'+'ENDER_LAYE'+'R','prerender:'+'layer'),h(wi,'EVENT_POST'+'RENDER_LAY'+'ER','postrender'+':layer'),h(wi,'EVENT_PREC'+'ULL','precull'),h(wi,'EVENT_POST'+'CULL','postcull');class zy{constructor(_0x394d66,_0x5eceff,_0x2cc335){this['device']=_0x394d66,this['inverseBin'+'dPose']=_0x5eceff,this['boneNames']=_0x2cc335;}}const jA=[-0xd33*-0x1+-0x167f+0x2*0x4a6,0x32*-0xc+-0x1ba1*0x1+0x1df9,-0x1d14+-0x4a*-0x51+0x5ab,0x1286+0xa*-0x29e+0x16*0x59,0x5ee*0x3+0x1018+-0x21e2*0x1,0x1ffc+-0x6*0x3e2+-0x8af,0x5*-0x115+0x1018*0x2+-0x1ac7,-0x1*0x22fd+0x9f1+0x7*0x394,0x226c+0x73a+0x29a5*-0x1,-0x1*0xe81+-0x1afe+-0x1*-0x297f,-0x978+-0x883+-0x1*-0x11fb,-0x1*0x144b+-0x14cb+0x1*0x2917],YA=[-0x2089*-0x1+-0x1469+-0xc20,0x8e1*0x1+-0x892+-0x4e,-0x833*-0x2+0x12fa+0xb*-0x337,-0x98c+0x31a*-0x7+0x1f44,0x22*-0x36+0xcae+0xc9*-0x7,0x84c+-0x1*0xfb9+0x6*0x13d];class KA extends pe{constructor(_0x3645b2,_0x2e19e9){super(),this['_device']=_0x3645b2,this['_pixelsPer'+'Unit']=_0x2e19e9&&_0x2e19e9['pixelsPerU'+'nit']!==void(0x10c3+-0x1cde+-0x3*-0x409)?_0x2e19e9['pixelsPerU'+'nit']:-0x2b*0xa3+-0xa5*0x27+0x3485,this['_renderMod'+'e']=_0x2e19e9&&_0x2e19e9['renderMode']!==void(-0x20cd+0x1*0x1345+0xd88)?_0x2e19e9['renderMode']:ei,this['_atlas']=_0x2e19e9&&_0x2e19e9['atlas']!==void(-0x12f+-0x2a*-0x67+-0xfb7)?_0x2e19e9['atlas']:null,this['_frameKeys']=_0x2e19e9&&_0x2e19e9['frameKeys']!==void(-0x496*-0x3+0x135+-0xef7)?_0x2e19e9['frameKeys']:null,this['_meshes']=[],this['_updatingP'+'roperties']=!(0x656*-0x5+-0x8*-0x3a1+0x2a7),this['_meshesDir'+'ty']=!(0xcd6+-0x7*-0x49+-0xed4*0x1),this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes']();}set['frameKeys'](_0xb222fe){this['_frameKeys']=_0xb222fe,this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x25*-0x25+-0x13d2+0x192b):this['_createMes'+'hes']()),this['fire']('set:frameK'+'eys',_0xb222fe);}get['frameKeys'](){return this['_frameKeys'];}set['atlas'](_0x42ab5d){_0x42ab5d!==this['_atlas']&&(this['_atlas']&&(this['_atlas']['off']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['off']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['off']('remove:fra'+'me',this['_onFrameRe'+'moved'],this)),this['_atlas']=_0x42ab5d,this['_atlas']&&this['_frameKeys']&&(this['_atlas']['on']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['on']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['on']('remove:fra'+'me',this['_onFrameRe'+'moved'],this),this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x1853*0x1+-0x48a*0x4+-0x62b):this['_createMes'+'hes']()),this['fire']('set:atlas',_0x42ab5d));}get['atlas'](){return this['_atlas'];}set['pixelsPerU'+'nit'](_0x5c66ef){this['_pixelsPer'+'Unit']!==_0x5c66ef&&(this['_pixelsPer'+'Unit']=_0x5c66ef,this['fire']('set:pixels'+'PerUnit',_0x5c66ef),this['_atlas']&&this['_frameKeys']&&this['renderMode']===ei&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x12e*-0x5+-0x96c*-0x3+-0x2*0x1115):this['_createMes'+'hes']()));}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}set['renderMode'](_0x427032){if(this['_renderMod'+'e']===_0x427032)return;const _0xbe18cf=this['_renderMod'+'e'];this['_renderMod'+'e']=_0x427032,this['fire']('set:render'+'Mode',_0x427032),(_0xbe18cf===ei||_0x427032===ei)&&this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x1*0x1de1+0xd85+0x105c):this['_createMes'+'hes']());}get['renderMode'](){return this['_renderMod'+'e'];}get['meshes'](){return this['_meshes'];}['_createMes'+'hes'](){const _0x417ead=this['_meshes']['length'];for(let _0x990059=-0x94f+-0x817*-0x3+-0xef6;_0x990059<_0x417ead;_0x990059++){const _0x464922=this['_meshes'][_0x990059];_0x464922&&_0x464922['destroy']();}const _0x42e704=this['_frameKeys']['length'];this['_meshes']=new Array(_0x42e704);const _0x26be86=this['renderMode']===Et||this['_renderMod'+'e']===At?this['_create9Sl'+'iceMesh']:this['_createSim'+'pleMesh'];for(let _0x310682=-0x39+0xbf*-0xf+0x2*0x5b5;_0x310682<_0x42e704;_0x310682++){const _0x58f54e=this['_atlas']['frames'][this['_frameKeys'][_0x310682]];this['_meshes'][_0x310682]=_0x58f54e?_0x26be86['call'](this,_0x58f54e):null;}this['fire']('set:meshes');}['_createSim'+'pleMesh'](_0x31cc2c){const _0x3f5981=_0x31cc2c['rect'],_0xded7e0=this['_atlas']['texture']['width'],_0x35996a=this['_atlas']['texture']['height'],_0x4ce063=_0x3f5981['z']/this['_pixelsPer'+'Unit'],_0x1c659d=_0x3f5981['w']/this['_pixelsPer'+'Unit'],_0x1b2337=_0x31cc2c['pivot']['x'],_0x4d0a1f=_0x31cc2c['pivot']['y'],_0xcf2cb9=[-_0x1b2337*_0x4ce063,-_0x4d0a1f*_0x1c659d,-0x100*-0x1c+0xb60+-0x69*0x60,(-0x200d+0x1adf+0x52f-_0x1b2337)*_0x4ce063,-_0x4d0a1f*_0x1c659d,-0xef8+0x112*0x23+-0x167e,(-0x101*0x1+-0xef*0x4+-0x2*-0x25f-_0x1b2337)*_0x4ce063,(-0x1*0x1159+0x16*0x19b+-0x11f8-_0x4d0a1f)*_0x1c659d,-0x508+0x790+0xc*-0x36,-_0x1b2337*_0x4ce063,(-0x2703+-0xa7c+0x58*0x90-_0x4d0a1f)*_0x1c659d,-0x1b90+-0x56a+0x20fa],_0x5de695=_0x3f5981['x']/_0xded7e0,_0x283492=0xd*0x151+-0xc55+-0x1*0x4c7-_0x3f5981['y']/_0x35996a,_0x2a031e=(_0x3f5981['x']+_0x3f5981['z'])/_0xded7e0,_0x1adc3a=-0x1677+0x59e+0x10da-(_0x3f5981['y']+_0x3f5981['w'])/_0x35996a,_0x348683=[_0x5de695,_0x283492,_0x2a031e,_0x283492,_0x2a031e,_0x1adc3a,_0x5de695,_0x1adc3a],_0x462430=new la();return _0x462430['positions']=_0xcf2cb9,_0x462430['normals']=jA,_0x462430['uvs']=_0x348683,_0x462430['indices']=YA,Ge['fromGeomet'+'ry'](this['_device'],_0x462430);}['_create9Sl'+'iceMesh'](){const _0x5f4c61=J['ONE'],_0x5c2dda=0xce4+0xc*-0x15d+0x1*0x37b,_0x1aa328=-0x1337+0x1*-0xcb6+0x10*0x1ff,_0x1a7857=[],_0x49c406=[],_0x368d34=[],_0x15ae75=[];let _0xd9c3a1=0xd2b+-0x27+0x44*-0x31;for(let _0x2e02b2=0x1*-0x17c5+0x1d96+0x5d1*-0x1;_0x2e02b2<=_0x5c2dda;_0x2e02b2++){const _0x38afb8=_0x2e02b2===0x1764+-0x1*-0x18ad+0x217*-0x17||_0x2e02b2===_0x5c2dda?0x1391+0x13*0x89+-0x1dbc:0x62b+-0x1c26+0x15fc;for(let _0x35bcf6=0x10*0x1e2+0x1d11+0x13bb*-0x3;_0x35bcf6<=_0x1aa328;_0x35bcf6++){const _0x366e36=-_0x5f4c61['x']+(0x1995+-0xd*-0x2fb+-0x4052)*_0x5f4c61['x']*(_0x2e02b2<=0x2266+0x2a9+0x66*-0x5d?-0x17*0x163+-0x3*0xa75+0x3f44:0x1f2a+-0x1ede+-0x49)/_0x5c2dda,_0x45a285=-0x2e*0xb2+-0x2*-0xda8+0x4ac,_0x1193df=-(-_0x5f4c61['y']+(-0x257*-0xa+-0x10a7+0x5*-0x159)*_0x5f4c61['y']*(_0x35bcf6<=-0x1cd4+-0x1807+0x34dc?-0xe3d+0x17a8+0x96b*-0x1:0x1b38+-0x3ad*0x1+-0xc*0x1f6)/_0x1aa328),_0x56934e=_0x35bcf6===0x3*-0x46d+-0x1776+-0xa5*-0x39||_0x35bcf6===_0x1aa328?0x1d7c+0x1*-0x19df+-0xb9*0x5:-0x1402+-0x17e7+-0x1ff*-0x16;_0x1a7857['push'](-_0x366e36,_0x45a285,_0x1193df),_0x49c406['push'](0x19b*0xd+0x1470+0xe1*-0x2f,-0x1*-0x2376+-0x5*0x707+-0x52,-0xb55*0x2+0x1*0x124+0x1586),_0x368d34['push'](_0x38afb8,_0x56934e),_0x2e02b2<_0x5c2dda&&_0x35bcf6<_0x1aa328&&(_0x15ae75['push'](_0xd9c3a1+_0x1aa328+(-0x9*0x14f+0x11c*-0x20+0x2f48),_0xd9c3a1+(-0x1019*-0x2+0x212a+-0x415b),_0xd9c3a1),_0x15ae75['push'](_0xd9c3a1+_0x1aa328+(-0x1938+-0x13*-0x9b+0x36e*0x4),_0xd9c3a1+_0x1aa328+(-0xb9e+-0x129c+0x204*0xf),_0xd9c3a1+(0x8f6+0x845*0x3+0x1*-0x21c4))),_0xd9c3a1++;}}const _0x2c753b=new la();return _0x2c753b['positions']=_0x1a7857,_0x2c753b['normals']=_0x49c406,_0x2c753b['uvs']=_0x368d34,_0x2c753b['indices']=_0x15ae75,Ge['fromGeomet'+'ry'](this['_device'],_0x2c753b);}['_onSetFram'+'es'](_0x2f1185){this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x8c+-0x1ad+0x121):this['_createMes'+'hes']();}['_onFrameCh'+'anged'](_0x56142d,_0x98041a){const _0x5057cb=this['_frameKeys']['indexOf'](_0x56142d);_0x5057cb<0x4*-0x761+-0x1f35+0x3cb9||(_0x98041a?this['renderMode']===ei&&(this['_meshes'][_0x5057cb]=this['_createSim'+'pleMesh'](_0x98041a)):this['_meshes'][_0x5057cb]=null,this['fire']('set:meshes'));}['_onFrameRe'+'moved'](_0x15b6d6){const _0x22d0cb=this['_frameKeys']['indexOf'](_0x15b6d6);_0x22d0cb<0x1121+0x1fb8+-0x30d9||(this['_meshes'][_0x22d0cb]=null,this['fire']('set:meshes'));}['startUpdat'+'e'](){this['_updatingP'+'roperties']=!(-0x19e7+0x2d4*0xb+-0x1*0x535),this['_meshesDir'+'ty']=!(-0x11*-0x107+-0x1f75+0x1*0xdff);}['endUpdate'](){this['_updatingP'+'roperties']=!(-0x12bb+0x1016+0x2a6),this['_meshesDir'+'ty']&&this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes'](),this['_meshesDir'+'ty']=!(-0x1e9*-0xa+0x5*-0x15d+-0x1*0xc48);}['destroy'](){for(const _0x49c793 of this['_meshes'])_0x49c793&&_0x49c793['destroy']();this['_meshes']['length']=-0x550+0x13d*-0xd+-0x1b*-0xcb;}}class ZA extends pe{constructor(){super(),this['_texture']=null,this['_frames']=null;}set['texture'](_0x573ff0){this['_texture']=_0x573ff0,this['fire']('set:textur'+'e',_0x573ff0);}get['texture'](){return this['_texture'];}set['frames'](_0x3c44f5){this['_frames']=_0x3c44f5,this['fire']('set:frames',_0x3c44f5);}get['frames'](){return this['_frames'];}['setFrame'](_0x4d60f7,_0x3b271f){let _0x62f1e3=this['_frames'][_0x4d60f7];_0x62f1e3?(_0x62f1e3['rect']['copy'](_0x3b271f['rect']),_0x62f1e3['pivot']['copy'](_0x3b271f['pivot']),_0x62f1e3['border']['copy'](_0x3b271f['border'])):(_0x62f1e3={'rect':_0x3b271f['rect']['clone'](),'pivot':_0x3b271f['pivot']['clone'](),'border':_0x3b271f['border']['clone']()},this['_frames'][_0x4d60f7]=_0x62f1e3),this['fire']('set:frame',_0x4d60f7['toString'](),_0x62f1e3);}['removeFram'+'e'](_0x4f632f){const _0x2c8c16=this['_frames'][_0x4f632f];_0x2c8c16&&(delete this['_frames'][_0x4f632f],this['fire']('remove:fra'+'me',_0x4f632f['toString'](),_0x2c8c16));}['destroy'](){this['_texture']&&this['_texture']['destroy']();}}class b_{constructor(_0x5a4a92,_0x3ed7e5,_0x384c7d,_0x3f2a52){this['time']=_0x5a4a92,this['position']=_0x3ed7e5,this['rotation']=_0x384c7d,this['scale']=_0x3f2a52;}}class C_{constructor(){this['_name']='',this['_keys']=[];}}class P_{constructor(){h(this,'name',''),h(this,'duration',0x16*-0xc1+-0x133b+0x23d1),(this['_nodes']=[],this['_nodeDict']={});}['getNode'](_0x502fb3){return this['_nodeDict'][_0x502fb3];}['addNode'](_0x53b43b){this['_nodes']['push'](_0x53b43b),this['_nodeDict'][_0x53b43b['_name']]=_0x53b43b;}get['nodes'](){return this['_nodes'];}}class QA{constructor(){this['_written']=!(-0xa1*-0x3a+0x1*0x4ae+-0x2927),this['_name']='',this['_keyFrames']=[],this['_quat']=new le(),this['_pos']=new I(),this['_scale']=new I(),this['_targetNod'+'e']=null;}['getTarget'](){return this['_targetNod'+'e'];}['setTarget'](_0x26bcc7){this['_targetNod'+'e']=_0x26bcc7;}}class Vd{constructor(_0x119248){h(this,'looping',!(-0x546+0x6a1*0x4+-0x153e)),(this['_animation']=null,this['_time']=0xd5e+0x368+-0x10c6,this['_interpola'+'tedKeys']=[],this['_interpola'+'tedKeyDict']={},this['_currKeyIn'+'dices']={},this['graph']=null);const _0x197eca=_0x551592=>{const _0x42f83a=new QA();_0x42f83a['_name']=_0x551592['name'],this['_interpola'+'tedKeys']['push'](_0x42f83a),this['_interpola'+'tedKeyDict'][_0x551592['name']]=_0x42f83a,this['_currKeyIn'+'dices'][_0x551592['name']]=-0xaa5+0x4ac+0x5f9;for(let _0xf339f=0xb99*0x1+-0xc58+-0x1*-0xbf;_0xf339f<_0x551592['_children']['length'];_0xf339f++)_0x197eca(_0x551592['_children'][_0xf339f]);};_0x197eca(_0x119248);}set['animation'](_0xce18d9){this['_animation']=_0xce18d9,this['currentTim'+'e']=0x1b+0x2332+-0x234d;}get['animation'](){return this['_animation'];}set['currentTim'+'e'](_0x383ea4){this['_time']=_0x383ea4;const _0x95605c=this['_interpola'+'tedKeys']['length'];for(let _0x23c2da=0x14f7*0x1+0xb*0xa6+-0x1c19;_0x23c2da<_0x95605c;_0x23c2da++){const _0x15001a=this['_interpola'+'tedKeys'][_0x23c2da]['_name'];this['_currKeyIn'+'dices'][_0x15001a]=-0x2e*0x6b+0x37+0x1303;}this['addTime'](0x1*0x1237+0x18aa+-0x2ae1),this['updateGrap'+'h']();}get['currentTim'+'e'](){return this['_time'];}get['numNodes'](){return this['_interpola'+'tedKeys']['length'];}['addTime'](_0x20cf55){if(this['_animation']!==null){const _0x5f32a3=this['_animation']['_nodes'],_0x16c1b9=this['_animation']['duration'];if(this['_time']===_0x16c1b9&&!this['looping'])return;if(this['_time']+=_0x20cf55,this['_time']>_0x16c1b9){this['_time']=this['looping']?0x12ee+-0x1*-0xe47+-0x2135:_0x16c1b9;for(let _0x4a9662=-0x17e+0x1431*0x1+0x1*-0x12b3;_0x4a9662<_0x5f32a3['length'];_0x4a9662++){const _0x922b04=_0x5f32a3[_0x4a9662]['_name'];this['_currKeyIn'+'dices'][_0x922b04]=-0x24b2+-0x222b+0x46dd;}}else{if(this['_time']<0x23f4+-0xf32+-0x14c2){this['_time']=this['looping']?_0x16c1b9:-0x1*-0x16e3+-0xf64+-0x77f*0x1;for(let _0x26fcdc=-0x24e6+0x101d+0x14c9;_0x26fcdc<_0x5f32a3['length'];_0x26fcdc++){const _0x19b573=_0x5f32a3[_0x26fcdc],_0x45e0f9=_0x19b573['_name'];this['_currKeyIn'+'dices'][_0x45e0f9]=_0x19b573['_keys']['length']-(-0x2a*-0x8f+-0x283*-0xf+-0x3d21);}}}const _0x334f16=_0x20cf55>=-0x694+-0x2411+-0x2aa5*-0x1?-0xe04+0x44+-0xdc1*-0x1:-(-0x2085+-0xe59+0xa9*0x47);for(let _0x1d0292=0x8*0x2b7+-0x221*0x3+-0xf55;_0x1d0292<_0x5f32a3['length'];_0x1d0292++){const _0x505274=_0x5f32a3[_0x1d0292],_0x50e695=_0x505274['_name'],_0x4cc69c=_0x505274['_keys'],_0x405937=this['_interpola'+'tedKeyDict'][_0x50e695];if(_0x405937===void(0x9cd*0x3+0x7cf*-0x1+0x2*-0xacc)){M['warn']('Unknown\x20sk'+'eleton\x20nod'+'e\x20name:\x20'+_0x50e695);continue;}let _0x16be6d=!(-0xd+-0x7*0x37d+0x1879);if(_0x4cc69c['length']!==0x1073+-0x2*0x4a5+0x4*-0x1ca)for(let _0x101567=this['_currKeyIn'+'dices'][_0x50e695];_0x101567<_0x4cc69c['length']-(0x2064+-0x1871*0x1+-0x7f2)&&_0x101567>=-0xb3e+-0x1*0x1cdd+-0x281b*-0x1;_0x101567+=_0x334f16){const _0x1f6985=_0x4cc69c[_0x101567],_0x50a258=_0x4cc69c[_0x101567+(-0x13*-0x150+0x2*0x1324+-0x3f37)];if(_0x1f6985['time']<=this['_time']&&_0x50a258['time']>=this['_time']){const _0x4eca5a=(this['_time']-_0x1f6985['time'])/(_0x50a258['time']-_0x1f6985['time']);_0x405937['_pos']['lerp'](_0x1f6985['position'],_0x50a258['position'],_0x4eca5a),_0x405937['_quat']['slerp'](_0x1f6985['rotation'],_0x50a258['rotation'],_0x4eca5a),_0x405937['_scale']['lerp'](_0x1f6985['scale'],_0x50a258['scale'],_0x4eca5a),_0x405937['_written']=!(-0xb65*-0x3+-0x1cd*-0x13+-0x11*0x406),this['_currKeyIn'+'dices'][_0x50e695]=_0x101567,_0x16be6d=!(0x1b89+0x925+-0x24ae);break;}}(_0x4cc69c['length']===0x400*0x4+0xde1+-0x1de0||!_0x16be6d&&this['_time']===-0x113b+-0x2397+0x34d2*0x1&&this['looping'])&&(_0x405937['_pos']['copy'](_0x4cc69c[-0x749+-0x11f*0x4+0x1*0xbc5]['position']),_0x405937['_quat']['copy'](_0x4cc69c[-0x2523+-0x17fc+-0x3d1f*-0x1]['rotation']),_0x405937['_scale']['copy'](_0x4cc69c[0x5c6*-0x1+0x1*-0x459+0xa1f]['scale']),_0x405937['_written']=!(-0x1*0x16be+-0x240+0xc7f*0x2));}}}['blend'](_0x1d5afd,_0xc5970,_0x8fc6d9){const _0xec8703=this['_interpola'+'tedKeys']['length'];for(let _0x3b8599=-0xcec*-0x2+0x1*-0x463+0x1*-0x1575;_0x3b8599<_0xec8703;_0x3b8599++){const _0x425f2d=_0x1d5afd['_interpola'+'tedKeys'][_0x3b8599],_0x59b780=_0xc5970['_interpola'+'tedKeys'][_0x3b8599],_0x4af336=this['_interpola'+'tedKeys'][_0x3b8599];_0x425f2d['_written']&&_0x59b780['_written']?(_0x4af336['_quat']['slerp'](_0x425f2d['_quat'],_0xc5970['_interpola'+'tedKeys'][_0x3b8599]['_quat'],_0x8fc6d9),_0x4af336['_pos']['lerp'](_0x425f2d['_pos'],_0xc5970['_interpola'+'tedKeys'][_0x3b8599]['_pos'],_0x8fc6d9),_0x4af336['_scale']['lerp'](_0x425f2d['_scale'],_0x59b780['_scale'],_0x8fc6d9),_0x4af336['_written']=!(0x1a2*-0x16+-0x67f+0x2a6b)):_0x425f2d['_written']?(_0x4af336['_quat']['copy'](_0x425f2d['_quat']),_0x4af336['_pos']['copy'](_0x425f2d['_pos']),_0x4af336['_scale']['copy'](_0x425f2d['_scale']),_0x4af336['_written']=!(-0x91+0x1c95+-0x1c04)):_0x59b780['_written']&&(_0x4af336['_quat']['copy'](_0x59b780['_quat']),_0x4af336['_pos']['copy'](_0x59b780['_pos']),_0x4af336['_scale']['copy'](_0x59b780['_scale']),_0x4af336['_written']=!(-0x25f7*-0x1+-0xf*0x48+-0x35*0xa3));}}['setGraph'](_0x3e99b8){if(this['graph']=_0x3e99b8,_0x3e99b8)for(let _0x4aa073=-0x131a+-0x187b+0x1*0x2b95;_0x4aa073<this['_interpola'+'tedKeys']['length'];_0x4aa073++){const _0x434393=this['_interpola'+'tedKeys'][_0x4aa073],_0x30a348=_0x3e99b8['findByName'](_0x434393['_name']);this['_interpola'+'tedKeys'][_0x4aa073]['setTarget'](_0x30a348);}else{for(let _0x3fc7ee=-0x11c*0x16+-0x1417+0x3*0xed5;_0x3fc7ee<this['_interpola'+'tedKeys']['length'];_0x3fc7ee++)this['_interpola'+'tedKeys'][_0x3fc7ee]['setTarget'](null);}}['updateGrap'+'h'](){if(this['graph'])for(let _0xa8830d=0x17ec+-0x1*-0x25cf+-0x3dbb;_0xa8830d<this['_interpola'+'tedKeys']['length'];_0xa8830d++){const _0x3a9969=this['_interpola'+'tedKeys'][_0xa8830d];if(_0x3a9969['_written']){const _0x41fc79=_0x3a9969['getTarget']();_0x41fc79['localPosit'+'ion']['copy'](_0x3a9969['_pos']),_0x41fc79['localRotat'+'ion']['copy'](_0x3a9969['_quat']),_0x41fc79['localScale']['copy'](_0x3a9969['_scale']),_0x41fc79['_dirtyLoca'+'l']||_0x41fc79['_dirtifyLo'+'cal'](),_0x3a9969['_written']=!(-0x1d1d+0x12ab+0x19*0x6b);}}}}const Ds=(0x17d1+-0x23f3+0xc26)/(0x1960*0x1+0xe*-0x2b9+0xcfe),Xs=0x1460+0x26c6+0x873*-0x7-Ds*(0x35*0x6d+-0x2520+-0xb*-0x153);class Fm extends la{constructor(_0x1cf4f9,_0x5b3efa,_0x2b9162,_0x4d71b5,_0x38abb5,_0x56a071){super();const _0x245f40=new I(),_0x3fe34e=new I(),_0x5a09d1=new I(),_0x50f0fa=new I(),_0x2bef43=new I(),_0xb3c3bf=new I(),_0x46358d=[],_0x36724c=[],_0x52a909=[],_0x3825a1=[],_0x4759a6=[];let _0x419c0f;if(_0x2b9162>-0x158a+0x1*-0x1669+0x1*0x2bf3){for(let _0x2cbef0=0x1633+0x4a5+-0x1ad8;_0x2cbef0<=_0x4d71b5;_0x2cbef0++)for(let _0x2d2a5f=0x1b8c+-0x275+-0x1917;_0x2d2a5f<=_0x38abb5;_0x2d2a5f++){const _0x485904=_0x2d2a5f/_0x38abb5*(0x2531+-0x1*-0x22b3+0x17f6*-0x3)*Math['PI']-Math['PI'],_0x2c13f9=Math['sin'](_0x485904),_0x2c3668=Math['cos'](_0x485904);_0x2bef43['set'](_0x2c13f9*_0x1cf4f9,-_0x2b9162/(0x20*-0xb3+-0x892+-0x46c*-0x7),_0x2c3668*_0x1cf4f9),_0x50f0fa['set'](_0x2c13f9*_0x5b3efa,_0x2b9162/(-0x220+0x255*-0x6+-0x560*-0x3),_0x2c3668*_0x5b3efa),_0x245f40['lerp'](_0x2bef43,_0x50f0fa,_0x2cbef0/_0x4d71b5),_0x3fe34e['sub2'](_0x50f0fa,_0x2bef43)['normalize'](),_0xb3c3bf['set'](_0x2c3668,0x1edb+-0xd64*0x1+-0x1177,-_0x2c13f9),_0x5a09d1['cross'](_0xb3c3bf,_0x3fe34e)['normalize'](),_0x46358d['push'](_0x245f40['x'],_0x245f40['y'],_0x245f40['z']),_0x36724c['push'](_0x5a09d1['x'],_0x5a09d1['y'],_0x5a09d1['z']);let _0x199a7a=_0x2d2a5f/_0x38abb5,_0x50f67c=_0x2cbef0/_0x4d71b5;_0x52a909['push'](_0x199a7a,0x1eca+-0x25*0x83+0x25*-0x52-_0x50f67c);const _0x328420=_0x50f67c;if(_0x50f67c=_0x199a7a,_0x199a7a=_0x328420,_0x199a7a=_0x199a7a*Xs+Ds,_0x50f67c=_0x50f67c*Xs+Ds,_0x199a7a/=0x1023+0x1b67+-0x2b87,_0x3825a1['push'](_0x199a7a,-0x2053+0xd76+-0x45*-0x46-_0x50f67c),_0x2cbef0<_0x4d71b5&&_0x2d2a5f<_0x38abb5){const _0x21f669=_0x2cbef0*(_0x38abb5+(0x1b+-0x8f6+0xbd*0xc))+_0x2d2a5f,_0x268149=_0x2cbef0*(_0x38abb5+(-0x20d2*-0x1+0x1509+-0x71*0x7a))+(_0x2d2a5f+(0x2*-0x115a+0x2156+0x15f)),_0x435a10=(_0x2cbef0+(-0x9*0x2a4+0xb6f+0x62b*0x2))*(_0x38abb5+(0x3d7+-0x8f7+0x521))+_0x2d2a5f,_0x211425=(_0x2cbef0+(0x1*-0xd4f+0x3cf+0x981))*(_0x38abb5+(0x1816+0xfb6+-0x27cb))+(_0x2d2a5f+(-0x1994+0xa*0x13a+0xd51*0x1));_0x4759a6['push'](_0x21f669,_0x268149,_0x435a10),_0x4759a6['push'](_0x268149,_0x211425,_0x435a10);}}}if(_0x56a071){const _0x134d8a=Math['floor'](_0x38abb5/(-0x9*-0x3a5+-0x79f*0x4+-0x24f)),_0x463db3=_0x38abb5,_0x32d2ad=_0x2b9162/(0xd22+-0x2666+0x1946);for(let _0x2057d5=-0x3*-0x967+-0xec6+-0xd6f;_0x2057d5<=_0x134d8a;_0x2057d5++){const _0x3718a6=_0x2057d5*Math['PI']*(-0x702+-0x1f*-0x137+-0x1ea7+0.5)/_0x134d8a,_0x3292b2=Math['sin'](_0x3718a6),_0x1141fe=Math['cos'](_0x3718a6);for(let _0x206fe3=-0x2*0x1bb+0xda*-0x21+0x1f90;_0x206fe3<=_0x463db3;_0x206fe3++){const _0xccaf97=_0x206fe3*(-0x1b*0x73+-0x1fa8+0x12f*0x25)*Math['PI']/_0x463db3-Math['PI']/(-0x63b+-0xe3*0x4+0x1*0x9c9),_0x258bce=Math['sin'](_0xccaf97),_0x5cdb04=Math['cos'](_0xccaf97)*_0x3292b2,_0x5496b6=_0x1141fe,_0xca160f=_0x258bce*_0x3292b2;let _0x20381d=0x985+-0x1aad+0x1129-_0x206fe3/_0x463db3,_0x6e7a68=0x3*-0x18d+-0xc47+0xf*0x121-_0x2057d5/_0x134d8a;_0x46358d['push'](_0x5cdb04*_0x5b3efa,_0x5496b6*_0x5b3efa+_0x32d2ad,_0xca160f*_0x5b3efa),_0x36724c['push'](_0x5cdb04,_0x5496b6,_0xca160f),_0x52a909['push'](_0x20381d,-0x3*-0xb69+-0x1b59+-0x6e1-_0x6e7a68),_0x20381d=_0x20381d*Xs+Ds,_0x6e7a68=_0x6e7a68*Xs+Ds,_0x20381d/=-0x26e0+-0x1c*-0x28+0x39*0x9b,_0x6e7a68/=0x575+0x4*-0x35b+0x7fa,_0x20381d+=(0x1*0x1733+0xa42+-0x2174)/(-0x585*-0x7+-0x1941*0x1+-0xd5f),_0x3825a1['push'](_0x20381d,-0x2*-0xbd1+-0x5d6+0x5*-0x38f-_0x6e7a68);}}_0x419c0f=(_0x4d71b5+(0xc5d+-0x1d9*0x11+0x130d))*(_0x38abb5+(0x26f1+0x59*0x2b+-0x1f*0x1bd));for(let _0x401d97=0x269b+-0xcef*0x1+-0x19ac;_0x401d97<_0x134d8a;++_0x401d97)for(let _0x201a52=0x43+-0x3*0x8a7+0x19b2;_0x201a52<_0x463db3;++_0x201a52){const _0x43df3b=_0x401d97*(_0x463db3+(-0x3*-0xa21+-0x39*-0xf+0x21b9*-0x1))+_0x201a52,_0x6e4ac7=_0x43df3b+_0x463db3+(-0xd3+0x797+-0x6c3);_0x4759a6['push'](_0x419c0f+_0x43df3b+(0xa95+0xe*0x115+-0x19ba),_0x419c0f+_0x6e4ac7,_0x419c0f+_0x43df3b),_0x4759a6['push'](_0x419c0f+_0x43df3b+(-0x24bb+0x21f*0x4+0x1c40),_0x419c0f+_0x6e4ac7+(-0x11*-0xcb+-0x3b0+-0x9ca),_0x419c0f+_0x6e4ac7);}for(let _0x543f0f=-0x1083+0x25a2+0x1*-0x151f;_0x543f0f<=_0x134d8a;_0x543f0f++){const _0x2c1af3=Math['PI']*(0x2ba+-0x3*0x6d7+-0x5*-0x38f+0.5)+_0x543f0f*Math['PI']*(-0x3d8+-0x17ab+-0x1b83*-0x1+0.5)/_0x134d8a,_0x3a20c0=Math['sin'](_0x2c1af3),_0x58f066=Math['cos'](_0x2c1af3);for(let _0x239282=0x1*-0x1d63+0x56c*-0x1+0x22cf;_0x239282<=_0x463db3;_0x239282++){const _0x405b74=_0x239282*(0xb*0xc1+0x12a2+-0x1aeb)*Math['PI']/_0x463db3-Math['PI']/(-0x263e+-0x13cd+0x3a0d),_0x4fb04c=Math['sin'](_0x405b74),_0x4d7394=Math['cos'](_0x405b74)*_0x3a20c0,_0x46f9ca=_0x58f066,_0x29beb1=_0x4fb04c*_0x3a20c0;let _0x5c3487=-0x1e07*-0x1+0x637+-0x243d*0x1-_0x239282/_0x463db3,_0x14e564=0xcc6+0x1edd+-0x5*0x8ba-_0x543f0f/_0x134d8a;_0x46358d['push'](_0x4d7394*_0x5b3efa,_0x46f9ca*_0x5b3efa-_0x32d2ad,_0x29beb1*_0x5b3efa),_0x36724c['push'](_0x4d7394,_0x46f9ca,_0x29beb1),_0x52a909['push'](_0x5c3487,0x17*-0x94+-0x17c9+0x65*0x5e-_0x14e564),_0x5c3487=_0x5c3487*Xs+Ds,_0x14e564=_0x14e564*Xs+Ds,_0x5c3487/=0xab9*-0x1+0x1a13+0x165*-0xb,_0x14e564/=0xc1*-0x23+0x1*0x5f3+-0x15d*-0xf,_0x5c3487+=(0x3*0x88a+-0x160f+-0x38d)/(0xab3+-0x1dcd+0x131d),_0x3825a1['push'](_0x5c3487,-0x1*0x25aa+-0x1*0xa67+0x3012-_0x14e564);}}_0x419c0f=(_0x4d71b5+(-0x161b+0x45d+0x3b*0x4d))*(_0x38abb5+(-0x2cb+-0x18dc+0x1ba8))+(_0x463db3+(0x1*-0x23b1+-0x34*0xa3+0x44ce))*(_0x134d8a+(-0x17e0+-0x2248+0x3a29));for(let _0x3d1e67=0x449+-0x20f+0x23a*-0x1;_0x3d1e67<_0x134d8a;++_0x3d1e67)for(let _0x587bc2=-0x11*0x139+0xfdb+0x4ee*0x1;_0x587bc2<_0x463db3;++_0x587bc2){const _0x46f36=_0x3d1e67*(_0x463db3+(-0xe1*0x2+-0x3ac*0x9+-0x1*-0x22cf))+_0x587bc2,_0x57c14b=_0x46f36+_0x463db3+(0x175a+0x2459+-0x3bb2);_0x4759a6['push'](_0x419c0f+_0x46f36+(0x202f+0x132a+-0x3358),_0x419c0f+_0x57c14b,_0x419c0f+_0x46f36),_0x4759a6['push'](_0x419c0f+_0x46f36+(0x383+0x1*-0x7b6+0x434),_0x419c0f+_0x57c14b+(0x1c55*-0x1+0xa*0x193+0xc98),_0x419c0f+_0x57c14b);}}else{if(_0x419c0f=(_0x4d71b5+(-0x2275+0x2*0x393+-0x1*-0x1b50))*(_0x38abb5+(0x207d+0x1*0x5e3+0x37d*-0xb)),_0x1cf4f9>-0xbe6+-0x1*-0x1f0a+-0x1324)for(let _0x24cbcd=-0x7*-0x581+-0x22a+0x6b*-0x57;_0x24cbcd<_0x38abb5;_0x24cbcd++){const _0x28704e=_0x24cbcd/_0x38abb5*(-0x223e+0x35f+0x1ee1)*Math['PI'],_0x2ffb2f=Math['sin'](_0x28704e),_0x39bef9=-_0x2b9162/(0x7d+-0x16ff+0x1684),_0x21e0dd=Math['cos'](_0x28704e);let _0xaa91fc=0x7b*-0x5+0xa*-0x2a5+0x1cda-(_0x2ffb2f+(0x1797+0xe78+-0x2*0x1307))/(-0x2362+0x2286+0xde),_0xf8cfc6=(_0x21e0dd+(0x5f4+-0x5*0x6f5+0x1cd6*0x1))/(-0x15+-0x23e1+0x23f8);_0x46358d['push'](_0x2ffb2f*_0x1cf4f9,_0x39bef9,_0x21e0dd*_0x1cf4f9),_0x36724c['push'](-0x8*0x29+-0x1fbb*-0x1+0x5*-0x617,-(0x1b34+0x22f*-0xb+-0x32e),0x11*-0x20b+0x233f+-0x2c*0x3),_0x52a909['push'](_0xaa91fc,-0x2594+0x1c0d+0x988-_0xf8cfc6),_0xaa91fc=_0xaa91fc*Xs+Ds,_0xf8cfc6=_0xf8cfc6*Xs+Ds,_0xaa91fc/=-0x41*-0x1+0x9f6+-0x1*0xa34,_0xf8cfc6/=0xd*-0x27+0x51f+0x9*-0x59,_0xaa91fc+=(0x1*0x1a71+0x265b+-0x40cb)/(-0x4*-0x6e6+0xd57+-0x28ec),_0x3825a1['push'](_0xaa91fc,0x248c+-0xd72+-0x1719-_0xf8cfc6),_0x24cbcd>0x2054+0xfbd+0xc04*-0x4&&_0x4759a6['push'](_0x419c0f,_0x419c0f+_0x24cbcd,_0x419c0f+_0x24cbcd-(-0x1694+-0x11*0x20b+0x3950));}if(_0x419c0f+=_0x38abb5,_0x5b3efa>0x1acd+0x1566+-0x3033)for(let _0x771bfd=0x132*0xc+-0x1*-0x907+-0x175f;_0x771bfd<_0x38abb5;_0x771bfd++){const _0x570c8c=_0x771bfd/_0x38abb5*(0x17bb+-0x1090+0x729*-0x1)*Math['PI'],_0x506c30=Math['sin'](_0x570c8c),_0x44b92f=_0x2b9162/(-0x36f+0x2639+-0x22c8),_0x1bddc5=Math['cos'](_0x570c8c);let _0x504b97=-0x601*-0x3+0x86b+-0x1a6d*0x1-(_0x506c30+(0x5b*0x3d+0x46f*-0x5+0x7d))/(0x12ce+-0x1485*-0x1+-0x2751),_0x47beee=(_0x1bddc5+(0x223*0xa+0x19ad+-0x2f0a))/(0xb4f+0x17d4+-0x211*0x11);_0x46358d['push'](_0x506c30*_0x5b3efa,_0x44b92f,_0x1bddc5*_0x5b3efa),_0x36724c['push'](-0x12ea+-0x1df2+0x30dc,0x13fc*-0x1+0x1c6f+0x2*-0x439,-0x97a+0x8c4+0xb6),_0x52a909['push'](_0x504b97,-0x2303*-0x1+0x675+0x84b*-0x5-_0x47beee),_0x504b97=_0x504b97*Xs+Ds,_0x47beee=_0x47beee*Xs+Ds,_0x504b97/=0x1*-0xd77+-0x9e2+0xe6*0x1a,_0x47beee/=0x781+0x2663+-0x2de1,_0x504b97+=(0x124a+0x5*-0x703+0x10c7)/(0xb0f+-0x231f+-0x1813*-0x1),_0x3825a1['push'](_0x504b97,0xd8d+0x2*-0x539+0x2*-0x18d-_0x47beee),_0x771bfd>-0x51*-0x47+-0x2599+0xf23&&_0x4759a6['push'](_0x419c0f,_0x419c0f+_0x771bfd-(0xc0*-0x28+-0x5*0x28f+0x2acc),_0x419c0f+_0x771bfd);}}this['positions']=_0x46358d,this['normals']=_0x36724c,this['uvs']=_0x52a909,this['uvs1']=_0x3825a1,this['indices']=_0x4759a6;}}class JA extends Fm{constructor(_0x154e22={}){const _0x3ae338=_0x154e22['radius']??0x447*-0x1+0x130c+-0xec5+0.3,_0x4cd465=_0x154e22['height']??-0x1*-0x1024+-0x119*0x3+-0xcd8,_0x1f56af=_0x154e22['heightSegm'+'ents']??0x40*-0x22+-0x12d2+0x1b53,_0x30d524=_0x154e22['sides']??-0x107*-0x23+-0x1a46*0x1+-0x1*0x99b;super(_0x3ae338,_0x3ae338,_0x4cd465-(0x4bc+0xed5*0x1+-0x138f)*_0x3ae338,_0x1f56af,_0x30d524,!(0x4f*-0x3d+0xe77+-0x1f*-0x24)),_0x154e22['calculateT'+'angents']&&(this['tangents']=pr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class eb extends Fm{constructor(_0x2c7f0e={}){const _0x15789f=_0x2c7f0e['baseRadius']??0x1b00+-0x4a*-0x40+-0x2*0x16c0+0.5,_0x5c7e29=_0x2c7f0e['peakRadius']??-0x105b*-0x1+0x95f*-0x3+0x1ae*0x7,_0x1e7c8f=_0x2c7f0e['height']??-0x6b6*-0x4+0x1bda+-0x36b1,_0x223c61=_0x2c7f0e['heightSegm'+'ents']??-0x59e*-0x5+-0x1624+-0x5ed,_0x483101=_0x2c7f0e['capSegment'+'s']??0x1e9*0x11+0x4c0+-0x2527*0x1;super(_0x15789f,_0x5c7e29,_0x1e7c8f,_0x223c61,_0x483101,!(0xa0b+0x1c47+0x1*-0x2651)),_0x2c7f0e['calculateT'+'angents']&&(this['tangents']=pr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class tb extends Fm{constructor(_0xf6b95={}){const _0x4da337=_0xf6b95['radius']??0x4c*0x40+0x1ce6+-0x1*0x2fe6+0.5,_0x4052c7=_0xf6b95['height']??-0x188f+-0x743+0x1fd3,_0x343ab3=_0xf6b95['heightSegm'+'ents']??0x87a+-0x28e+0x5e7*-0x1,_0x4fc9a9=_0xf6b95['capSegment'+'s']??-0x3*0x3b+-0x1*0x18a+0x24f;super(_0x4da337,_0x4da337,_0x4052c7,_0x343ab3,_0x4fc9a9,!(-0xe36+-0x1898+-0x26cf*-0x1)),_0xf6b95['calculateT'+'angents']&&(this['tangents']=pr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class sb extends la{constructor(_0x47642d={}){super();const _0xcb43c2=_0x47642d['halfExtent'+'s']??new J(-0x21d9+0x1*0x4c7+0x1d12+0.5,0x1*-0x1840+0xa25+0xe1b+0.5),_0x10b64a=_0x47642d['widthSegme'+'nts']??-0x20c8+0x398+-0x1*-0x1d35,_0x56d6be=_0x47642d['lengthSegm'+'ents']??-0x3*-0xaba+0x1f*0x43+-0x2*0x1423,_0x4b0d77=[],_0x7bdbb9=[],_0x315eb1=[],_0x1de0b0=[];let _0x3021b0=-0x18*-0x9a+-0x2*0x8e1+-0xa*-0x55;for(let _0x4885f7=-0x23ef*-0x1+0xa*0x29+0x1*-0x2589;_0x4885f7<=_0x10b64a;_0x4885f7++)for(let _0x34cc5f=0x1a5d*0x1+-0x913*-0x4+0x3*-0x14e3;_0x34cc5f<=_0x56d6be;_0x34cc5f++){const _0x54ff3e=-_0xcb43c2['x']+(0x185+-0xb*0x2d7+0x1dba*0x1)*_0xcb43c2['x']*_0x4885f7/_0x10b64a,_0x329d9a=0x12ad+-0x3ab*0x5+-0x56,_0x1ef36b=-(-_0xcb43c2['y']+(-0x2c*-0x16+-0xb*0x175+0xc41*0x1)*_0xcb43c2['y']*_0x34cc5f/_0x56d6be),_0x349c50=_0x4885f7/_0x10b64a,_0x41d576=_0x34cc5f/_0x56d6be;_0x4b0d77['push'](_0x54ff3e,_0x329d9a,_0x1ef36b),_0x7bdbb9['push'](-0x2*-0x7b1+0x6d1+-0x1*0x1633,0x2*-0x32b+0x31d*-0x4+0x12cb,-0x1*0x1895+0x65*-0x13+0x805*0x4),_0x315eb1['push'](_0x349c50,-0x39*0x8e+0x1*-0x2cf+0x226e-_0x41d576),_0x4885f7<_0x10b64a&&_0x34cc5f<_0x56d6be&&(_0x1de0b0['push'](_0x3021b0+_0x56d6be+(0xf8e+-0x24af*-0x1+-0x343c),_0x3021b0+(0x1d04+0x1*0x14e+0xa1b*-0x3),_0x3021b0),_0x1de0b0['push'](_0x3021b0+_0x56d6be+(-0x1*-0x902+0xa66+-0x1367),_0x3021b0+_0x56d6be+(-0x13*-0xc7+0x1*-0xce7+-0x77*0x4),_0x3021b0+(0x1c67+0x9c7*-0x3+0xef))),_0x3021b0++;}this['positions']=_0x4b0d77,this['normals']=_0x7bdbb9,this['uvs']=_0x315eb1,this['uvs1']=_0x315eb1,this['indices']=_0x1de0b0,_0x47642d['calculateT'+'angents']&&(this['tangents']=pr(_0x4b0d77,_0x7bdbb9,_0x315eb1,_0x1de0b0));}}class ib extends la{constructor(_0x441186={}){super();const _0x1c8bab=_0x441186['tubeRadius']??-0x34*-0x53+0x26b4+-0xfe*0x38+0.2,_0x438b23=_0x441186['ringRadius']??-0x175f+0x84d*0x3+-0x62*0x4+0.3,_0x318475=(_0x441186['sectorAngl'+'e']??0x32f*-0x1+0x3*-0x1b7+0x2*0x4de)*Y['DEG_TO_RAD'],_0x8750f0=_0x441186['segments']??0x1*0x18e5+0x1*0x1df5+-0x36bc,_0x4f30b6=_0x441186['sides']??0x25+0x2393+0x11d2*-0x2,_0x3fd0c5=[],_0x348bca=[],_0x498550=[],_0x236506=[];for(let _0x33a4bd=-0x93*0xb+-0x1eae+0x549*0x7;_0x33a4bd<=_0x4f30b6;_0x33a4bd++)for(let _0x5950ff=-0x2*-0x3be+0xb*0x205+-0x1db3*0x1;_0x5950ff<=_0x8750f0;_0x5950ff++){const _0x99de5c=Math['cos'](_0x318475*_0x5950ff/_0x8750f0)*(_0x438b23+_0x1c8bab*Math['cos']((-0x1bb9*-0x1+-0x21*0x5e+-0x21*0x79)*Math['PI']*_0x33a4bd/_0x4f30b6)),_0x29c96f=Math['sin']((0x2668+-0x6*0x466+0x2*-0x601)*Math['PI']*_0x33a4bd/_0x4f30b6)*_0x1c8bab,_0x5870ee=Math['sin'](_0x318475*_0x5950ff/_0x8750f0)*(_0x438b23+_0x1c8bab*Math['cos']((-0x516+0x809+0x1*-0x2f1)*Math['PI']*_0x33a4bd/_0x4f30b6)),_0x18bf64=Math['cos'](_0x318475*_0x5950ff/_0x8750f0)*Math['cos']((0x1*-0x17c9+-0xeed*0x1+0x26b8)*Math['PI']*_0x33a4bd/_0x4f30b6),_0x42793a=Math['sin']((-0x1813+-0x4*-0x95f+-0xd67)*Math['PI']*_0x33a4bd/_0x4f30b6),_0x1428e6=Math['sin'](_0x318475*_0x5950ff/_0x8750f0)*Math['cos']((-0x3*-0xa76+-0x26ae*0x1+0x74e)*Math['PI']*_0x33a4bd/_0x4f30b6),_0x3a1b27=_0x33a4bd/_0x4f30b6,_0x18c1f6=-0x941+0xd*-0x79+0xf67-_0x5950ff/_0x8750f0;if(_0x3fd0c5['push'](_0x99de5c,_0x29c96f,_0x5870ee),_0x348bca['push'](_0x18bf64,_0x42793a,_0x1428e6),_0x498550['push'](_0x3a1b27,-0x2494+-0xbd*0x1+0x1*0x2552-_0x18c1f6),_0x33a4bd<_0x4f30b6&&_0x5950ff<_0x8750f0){const _0x36fb0d=_0x33a4bd*(_0x8750f0+(-0x13d3+0x16df+-0x30b))+_0x5950ff,_0x4a7200=(_0x33a4bd+(0x24b7*-0x1+-0x73b*-0x2+0x103*0x16))*(_0x8750f0+(0x624+0x1225*-0x2+0x3*0xa0d))+_0x5950ff,_0x12cfd4=_0x33a4bd*(_0x8750f0+(0x287*-0x6+-0x5d1+0x14fc))+(_0x5950ff+(-0x265e+0xc04*-0x2+-0x2d*-0x163)),_0x454f77=(_0x33a4bd+(-0x1cbf+-0xc35+0x28f5))*(_0x8750f0+(-0x1ccd+-0x486+0x1*0x2154))+(_0x5950ff+(-0xe3a*-0x1+-0x30*-0x1d+-0x1*0x13a9));_0x236506['push'](_0x36fb0d,_0x4a7200,_0x12cfd4),_0x236506['push'](_0x4a7200,_0x454f77,_0x12cfd4);}}this['positions']=_0x3fd0c5,this['normals']=_0x348bca,this['uvs']=_0x498550,this['uvs1']=_0x498550,this['indices']=_0x236506,_0x441186['calculateT'+'angents']&&(this['tangents']=pr(_0x3fd0c5,_0x348bca,_0x498550,_0x236506));}}class rb{constructor(_0x35b420,_0x39a753){h(this,'processedC'+'ache',new Map()),h(this,'definition'+'sCache',new Map()),h(this,'_generator'+'s',new Map()),(this['_device']=_0x35b420,this['_isClearin'+'gCache']=!(0x51b*-0x3+-0x1d*-0x106+0x1*-0xe5c),this['_precached']=!(-0x2300+-0x1da0+0x40a1),this['_programsC'+'ollection']=[],this['_defaultSt'+'dMatOption']=new Yh(),this['_defaultSt'+'dMatOption'+'Min']=new Yh());const _0x174f60=new Cy();_0x39a753['shaderOptB'+'uilder']['updateRef'](this['_defaultSt'+'dMatOption'],{},_0x174f60,_0x39a753,null,[],fa,null),_0x39a753['shaderOptB'+'uilder']['updateMinR'+'ef'](this['_defaultSt'+'dMatOption'+'Min'],{},_0x39a753,null,Mm,null),_0x35b420['on']('destroy:sh'+'ader',_0x3e008c=>{this['removeFrom'+'Cache'](_0x3e008c);});}['destroy'](){this['clearCache']();}['register'](_0x2768ae,_0x418181){this['_generator'+'s']['has'](_0x2768ae)||this['_generator'+'s']['set'](_0x2768ae,_0x418181);}['unregister'](_0x3042d5){this['_generator'+'s']['has'](_0x3042d5)&&this['_generator'+'s']['delete'](_0x3042d5);}['isRegister'+'ed'](_0x5e2e33){return this['_generator'+'s']['has'](_0x5e2e33);}['generateSh'+'aderDefini'+'tion'](_0x2cb72a,_0x5c8d13,_0x252a85,_0x30c050){var _0xa24fd6,_0x354062;let _0x1f3ec8=this['definition'+'sCache']['get'](_0x252a85);if(!_0x1f3ec8){let _0x19c337;(_0xa24fd6=_0x30c050['litOptions'])!=null&&_0xa24fd6['lights']&&(_0x19c337=_0x30c050['litOptions']['lights'],_0x30c050['litOptions']['lights']=_0x19c337['map'](_0x5bbd94=>{const _0x4d3af0=_0x5bbd94['clone']?_0x5bbd94['clone']():_0x5bbd94;return _0x4d3af0['key']=_0x5bbd94['key'],_0x4d3af0;})),this['storeNewPr'+'ogram'](_0x5c8d13,_0x30c050),(_0x354062=_0x30c050['litOptions'])!=null&&_0x354062['lights']&&(_0x30c050['litOptions']['lights']=_0x19c337),this['_precached']&&M['log']('ProgramLib'+'rary#getPr'+'ogram:\x20Cac'+'he\x20miss\x20fo'+'r\x20shader\x20'+_0x5c8d13+'\x20key\x20'+_0x252a85+('\x20after\x20sha'+'ders\x20preca'+'ching'));const _0x5cb231=this['_device'];_0x1f3ec8=_0x2cb72a['createShad'+'erDefiniti'+'on'](_0x5cb231,_0x30c050),_0x1f3ec8['name']=_0x1f3ec8['name']??(_0x30c050['pass']?_0x5c8d13+'-pass:'+_0x30c050['pass']:_0x5c8d13),this['definition'+'sCache']['set'](_0x252a85,_0x1f3ec8);}return _0x1f3ec8;}['getCachedS'+'hader'](_0x113818){return this['processedC'+'ache']['get'](_0x113818);}['setCachedS'+'hader'](_0x4762eb,_0xf224cb){this['processedC'+'ache']['set'](_0x4762eb,_0xf224cb);}['getProgram'](_0x13d83c,_0x584591,_0x2faecd,_0x39f2f6){const _0x2de49f=this['_generator'+'s']['get'](_0x13d83c);if(!_0x2de49f)return M['warn']('ProgramLib'+'rary#getPr'+'ogram:\x20No\x20'+'program\x20li'+'brary\x20func'+'tions\x20regi'+'stered\x20for'+':\x20'+_0x13d83c),null;const _0x460993=_0x2de49f['generateKe'+'y'](_0x584591),_0x2a3034=ti(_0x460993),_0x1a4106=_0x2faecd['generateKe'+'y'](this['_device']),_0x1203ec=ti(_0x1a4106),_0x1cfa19=_0x2a3034+'#'+_0x1203ec;let _0x23f866=this['getCachedS'+'hader'](_0x1cfa19);if(!_0x23f866){const _0x11651c=this['generateSh'+'aderDefini'+'tion'](_0x2de49f,_0x13d83c,_0x2a3034,_0x584591);M['assert'](_0x11651c);let _0x315052='',_0x3a9a23;_0x584591['pass']!==void(0x176b+0x49*0x2b+-0x23ae)&&(_0x3a9a23=hi['get'](this['_device'])['getByIndex'](_0x584591['pass']),_0x315052='-'+_0x3a9a23['name']),this['_device']['fire']('shader:gen'+'erate',{'userMaterialId':_0x39f2f6,'shaderPassInfo':_0x3a9a23,'definition':_0x11651c});const _0x2c1c24={'name':''+_0x11651c['name']+_0x315052+'-proc','attributes':_0x11651c['attributes'],'vshader':_0x11651c['vshader'],'vincludes':_0x11651c['vincludes'],'fincludes':_0x11651c['fincludes'],'fshader':_0x11651c['fshader'],'processingOptions':_0x2faecd,'shaderLanguage':_0x11651c['shaderLang'+'uage'],'meshUniformBufferFormat':_0x11651c['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x11651c['meshBindGr'+'oupFormat']};_0x23f866=new ey(this['_device'],_0x2c1c24),M['call'](()=>{_0x23f866['_generatio'+'nKey']=_0x460993,_0x23f866['_processin'+'gKey']=_0x1a4106;}),this['setCachedS'+'hader'](_0x1cfa19,_0x23f866);}return _0x23f866;}['storeNewPr'+'ogram'](_0x4ed0d0,_0x51492b){let _0x5eb876={};if(_0x4ed0d0==='standard'){const _0xe05d47=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x51492b['pass']);for(const _0x2b79be in _0x51492b)(_0x51492b['hasOwnProp'+'erty'](_0x2b79be)&&_0xe05d47[_0x2b79be]!==_0x51492b[_0x2b79be]||_0x2b79be==='pass')&&(_0x5eb876[_0x2b79be]=_0x51492b[_0x2b79be]);for(const _0x4c7366 in _0x51492b['litOptions'])_0x5eb876[_0x4c7366]=_0x51492b['litOptions'][_0x4c7366];}else _0x5eb876=_0x51492b;this['_programsC'+'ollection']['push'](JSON['stringify']({'name':_0x4ed0d0,'options':_0x5eb876}));}['dumpProgra'+'ms'](){let _0x5f5823='let\x20device'+'\x20=\x20pc.app\x20'+'?\x20pc.app.g'+'raphicsDev'+'ice\x20:\x20pc.A'+'pplication'+'.getApplic'+'ation().gr'+'aphicsDevi'+'ce;\x0a';_0x5f5823+='let\x20shader'+'s\x20=\x20[',this['_programsC'+'ollection'][0x26*-0xd+-0x4*-0x327+0x2*-0x557]&&(_0x5f5823+='\x0a\x09'+this['_programsC'+'ollection'][0xcfb*-0x2+-0x1d92+0x3788]);for(let _0x4c4ade=0x8a4+-0xbb6+0x313;_0x4c4ade<this['_programsC'+'ollection']['length'];++_0x4c4ade)_0x5f5823+=',\x0a\x09'+this['_programsC'+'ollection'][_0x4c4ade];_0x5f5823+='\x0a];\x0a',_0x5f5823+='pc.getProg'+'ramLibrary'+'(device).p'+'recompile('+'shaders);\x0a',_0x5f5823+='if\x20(pc.ver'+'sion\x20!=\x20\x22'+ja+('\x22\x20||\x20pc.re'+'vision\x20!=\x20'+'\x22')+Qg+'\x22)\x0a',_0x5f5823+='\x09console.w'+'arn(\x22preco'+'mpile-shad'+'ers.js:\x20en'+'gine\x20versi'+'on\x20mismatc'+'h,\x20rebuild'+'\x20shaders\x20l'+'ib\x20with\x20cu'+'rrent\x20engi'+'ne\x22);';const _0x7ba558=document['createElem'+'ent']('a');_0x7ba558['setAttribu'+'te']('href','data:text/'+'plain;char'+'set=utf-8,'+encodeURIComponent(_0x5f5823)),_0x7ba558['setAttribu'+'te']('download','precompile'+'-shaders.j'+'s'),_0x7ba558['style']['display']='none',document['body']['appendChil'+'d'](_0x7ba558),_0x7ba558['click'](),document['body']['removeChil'+'d'](_0x7ba558);}['clearCache'](){this['_isClearin'+'gCache']=!(-0x73+0x2*0xaa9+-0x3*0x6f5),this['processedC'+'ache']['forEach'](_0x3f2a05=>{_0x3f2a05['destroy']();}),this['processedC'+'ache']['clear'](),this['_isClearin'+'gCache']=!(-0x4c*-0x79+-0x2*-0xc6d+-0x3cc5);}['removeFrom'+'Cache'](_0x1c3d2b){this['_isClearin'+'gCache']||this['processedC'+'ache']['forEach']((_0x10e238,_0x508aeb)=>{_0x1c3d2b===_0x10e238&&this['processedC'+'ache']['delete'](_0x508aeb);});}['_getDefaul'+'tStdMatOpt'+'ions'](_0x50c223){const _0x5851d6=hi['get'](this['_device'])['getByIndex'](_0x50c223);return _0x50c223===Fn||_0x50c223===ll||_0x5851d6['isShadow']?this['_defaultSt'+'dMatOption'+'Min']:this['_defaultSt'+'dMatOption'];}['precompile'](_0x269cd5){if(_0x269cd5){const _0x1e6803=new Array(_0x269cd5['length']);for(let _0x49de5d=0x68c*0x5+-0x49*-0xa+-0x2396;_0x49de5d<_0x269cd5['length'];_0x49de5d++){if(_0x269cd5[_0x49de5d]['name']==='standard'){const _0x2dc669=_0x269cd5[_0x49de5d]['options'],_0x2a4b9b=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x2dc669['pass']);for(const _0x99e5bd in _0x2a4b9b)_0x2a4b9b['hasOwnProp'+'erty'](_0x99e5bd)&&_0x2dc669[_0x99e5bd]===void(0x49f*-0x7+0x1*0x907+0x1752)&&(_0x2dc669[_0x99e5bd]=_0x2a4b9b[_0x99e5bd]);}_0x1e6803[_0x49de5d]=this['getProgram'](_0x269cd5[_0x49de5d]['name'],_0x269cd5[_0x49de5d]['options']);}}this['_precached']=!(0x2*0xc5b+-0x1efc*0x1+0x646*0x1);}}async function ab(){const _0x588307=new Float32Array(-0x49*-0x76+-0x8e5+0xc*-0x210),_0x371fe1=new Int32Array(_0x588307['buffer']);let _0x4156b1=-0x1*-0x20a9+-0x10*0x24b+0x407,_0x19bf54={};self['onmessage']=async _0x59d964=>{const {data:_0x4164d6}=_0x59d964;switch(_0x4164d6['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x38390f(_0x4164d6['properties'],_0x4164d6['timeIndex'],_0x4164d6['timeOption']);break;case'releaseSeq'+'Data':_0x146895(_0x4164d6['index']);break;case'releaseAll'+'SeqData':_0x42aab9();break;case'destroyWor'+'ker':_0x14d4b9();break;}};class _0x3375e5{constructor(_0x52cbb3=-0xc98*0x2+-0x80e+0x1*0x213e,_0x250ab3=0x4f*-0x1+-0x151a+0x1569,_0x45351d=-0xc0a+-0x265e+0x3268,_0x56539f=0x1136+0x1d5a+-0x57*0x89){this['x']=_0x52cbb3,this['y']=_0x250ab3,this['z']=_0x45351d,this['w']=_0x56539f;}['set'](_0xd56a73,_0x30c671,_0x45d698,_0x4336b2){return this['x']=_0xd56a73,this['y']=_0x30c671,this['z']=_0x45d698,this['w']=_0x4336b2,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x3c076e=this){let _0x32ef6c=_0x3c076e['length']();return _0x32ef6c===-0xbf0+-0x3fe+0xfee?(this['x']=this['y']=this['z']=0x11fb+-0x171d+-0x9*-0x92,this['w']=-0x1c1*-0xd+0x7*-0x1a3+-0xb57):(_0x32ef6c=(0x1*-0x1d5a+-0x1e03+0x3b5e)/_0x32ef6c,this['x']=_0x3c076e['x']*_0x32ef6c,this['y']=_0x3c076e['y']*_0x32ef6c,this['z']=_0x3c076e['z']*_0x32ef6c,this['w']=_0x3c076e['w']*_0x32ef6c),this;}['mulScalar'](_0x30e51c,_0x2209fa=this){return this['x']=_0x2209fa['x']*_0x30e51c,this['y']=_0x2209fa['y']*_0x30e51c,this['z']=_0x2209fa['z']*_0x30e51c,this['w']=_0x2209fa['w']*_0x30e51c,this;}}const _0x44c7d5=_0x37a5d5=>{_0x588307[0x656+0xdde*0x2+-0x2212*0x1]=_0x37a5d5;const _0x539f78=_0x371fe1[0xa93+0x2*0xbf1+0x2275*-0x1];let _0x32efce=_0x539f78>>-0x23e7*-0x1+0x9d4+-0x2dab&0x2e3e*-0x2+-0x3f66+0x11be2,_0x514c89=_0x539f78>>0x2*-0x81d+0x257*-0xd+0x2eb1&0x10f8+-0x1364+-0x7*-0x17d;const _0x57fe20=_0x539f78>>-0x7*-0x209+-0x3*-0x51e+-0x1d82&0x239+-0x9ef+0x8b5*0x1;return _0x57fe20<-0x131b+-0x1f7*-0x13+-0x11d3?_0x32efce:_0x57fe20>-0x2090+0x3*-0x79f+-0x11*-0x34b?(_0x32efce|=0x3951+-0xe6aa+0x12959,_0x32efce|=(_0x57fe20===0x16ff+0x3+-0x17*0xf5?-0x1db*0x14+-0x299+0x27b5:-0x11a4*-0x1+-0x200a+0xe67)&&_0x539f78&-0x4*0x3744af+-0x1552*-0x81b+0x9f*0x11bcb,_0x32efce):_0x57fe20<-0x1*-0x122b+-0x17d0+0x616?(_0x514c89|=0x1a33*-0x1+0x2176*0x1+0x1*0xbd,_0x32efce|=(_0x514c89>>0x24d2+-0x876+0x6*-0x4a7-_0x57fe20)+(_0x514c89>>0x720+0x5*0x5b9+0x11a6*-0x2-_0x57fe20&0x1247+-0x1f1a*0x1+0x2*0x66a),_0x32efce):(_0x32efce|=_0x57fe20-(-0x11*-0x217+0x1210+0x1*-0x3527)<<0x38b*-0xb+-0x13*-0x137+0xfee|_0x514c89>>-0x509*-0x1+0x2c1*-0x5+-0x8bd*-0x1,_0x32efce+=_0x514c89&0x1a9e+-0xe19+-0x3*0x42c,_0x32efce);},_0x3604de=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x47fd0d=0x2*0xfb3+0x1945+0xa3*-0x59;_0x47fd0d<0x1ef9+0x295*-0xd+0x2c5*0x1;++_0x47fd0d)if(!_0x19bf54['f_rest_'+_0x47fd0d])return _0x47fd0d;return-0x137b+-0x243f+0x37e7;})())]??-0x2277+-0x9*-0x14a+0x16dd),_0x38390f=(_0x59ce80,_0x5375b3,_0x407a75)=>{const _0x53cac5=!!_0x59ce80['time_index'];_0x53cac5||(_0x59ce80['time_index']=new Float32Array(-0xd7d*0x2+-0x23b8+0x3eb2)),_0x4156b1+=_0x59ce80['x']['length']??0xe5c+0xe59*-0x2+0x5*0x2de;const _0x1ec382=Object['keys'](_0x59ce80);for(let _0x53f022=-0x4*-0x6dc+0x11a3*-0x1+-0x9cd;_0x53f022<_0x1ec382['length'];_0x53f022++){const _0x567175=_0x1ec382[_0x53f022],_0x426578=_0x59ce80[_0x567175],_0x3fdd23=_0x19bf54[_0x567175]??new Float32Array(-0x991+0x1a8c*-0x1+0x241d);if(!_0x53cac5&&_0x567175==='time_index'){const _0xbd7052=new Float32Array(_0x4156b1);_0xbd7052['fill'](_0x5375b3),_0xbd7052['set'](_0x3fdd23,0x1*0x23d5+0xe1e+0x31f3*-0x1),_0x19bf54[_0x567175]=_0xbd7052;}else{if(!_0x53cac5&&_0x426578&&_0x567175==='t'){const _0x40e5c0=new Float32Array(_0x4156b1);if(_0x40e5c0['set'](_0x3fdd23,-0x273+-0x81a+0x49*0x25),_0x407a75){for(let _0x637e50=_0x3fdd23['length'];_0x637e50<_0x4156b1;_0x637e50++)_0x426578[_0x637e50-_0x3fdd23['length']]>-(0x83*0x46+-0x2385+-0x24*0x2)?_0x40e5c0[_0x637e50]=_0x426578[_0x637e50-_0x3fdd23['length']]+_0x407a75[(0xdb+-0x45f+-0x2*-0x1c3)*_0x5375b3]:_0x40e5c0[_0x637e50]=_0x426578[_0x637e50-_0x3fdd23['length']];}_0x19bf54[_0x567175]=_0x40e5c0;}else{if(_0x426578){const _0x30f1a1=new Float32Array(_0x4156b1);_0x30f1a1['set'](_0x3fdd23,-0x530+-0x5*0x4f+0x6bb*0x1),_0x30f1a1['set'](_0x426578,_0x3fdd23['length']),_0x19bf54[_0x567175]=_0x30f1a1;}}}}const _0x15efa0={};Object['keys'](_0x19bf54)['forEach'](_0x310c5c=>{_0x15efa0[_0x310c5c]=new Float32Array(_0x19bf54[_0x310c5c]['buffer']['slice']());});const _0x4b7c7b=Object['keys'](_0x15efa0)['map'](_0x2fbc3e=>_0x15efa0[_0x2fbc3e]['buffer']),_0x2c3777=_0x25e551(),_0x12869e=Object['keys'](_0x2c3777)['map'](_0x4cedb5=>_0x2c3777[_0x4cedb5]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x15efa0,'transformData':_0x2c3777},_0x4b7c7b['concat'](_0x12869e));},_0x25e551=()=>{const _0x33bf04=_0x19bf54['x']['length'],_0x4d9ba9=_0x19bf54['x'],_0x1c4241=_0x19bf54['y'],_0x172a99=_0x19bf54['z'],_0x284031=_0x19bf54['scale_0'],_0x279314=_0x19bf54['scale_1'],_0x564e57=_0x19bf54['scale_2'],_0x4688e9=_0x19bf54['rot_1'],_0x39d2e2=_0x19bf54['rot_2'],_0x1bf12a=_0x19bf54['rot_3'],_0x206472=_0x19bf54['rot_0'],_0x3131ea=_0x19bf54['motion_0'],_0x19df36=_0x19bf54['motion_1'],_0x4e7966=_0x19bf54['motion_2'],_0xbccd20=_0x19bf54['t'],_0x59b829=_0x19bf54['t_scale'],_0x46d064=_0x19bf54['time_index'],_0x4407a8=_0x19bf54['f_dc_0'],_0x5c58f8=_0x19bf54['f_dc_1'],_0x23dedb=_0x19bf54['f_dc_2'],_0x43ba75=_0x19bf54['opacity'],_0x289959=(_0xbccd20==null?void(-0x2c1+-0x2155+0x1*0x2416):_0xbccd20['length'])>-0x229f+0x125*-0xa+0x2e11,_0x41833f=new Float32Array(_0x33bf04*(0x4*-0x3df+0x1cf3+-0xf6*0xe)),_0x34f5fb=new Float32Array(_0x33bf04*(0x1931+-0x18f2+-0xf*0x4)),_0xda9bfd=new Uint16Array(_0x33bf04*(0x4e5+0x2*0xf4a+-0x2376)),_0xe11da3=new Float32Array(_0x33bf04*(0x21b6+0x236*0x5+0x25b*-0x13));let _0x1b58a5=null,_0x261811=null,_0x269990=null,_0x5c99cc=null;_0x289959&&(_0x1b58a5=new Float32Array(_0x33bf04*(-0x31*0xc5+0x12e6+0x12d2*0x1)),_0x261811=new Float32Array(_0x33bf04*(-0x1993+-0xa*0x38b+0x3d04)),_0x269990=new Float32Array(_0x33bf04*(-0x2160+-0x1*-0x2595+-0x432)),_0x5c99cc=new Float32Array(_0x33bf04));const _0x28d8eb=new _0x3375e5(-0x970+-0x8*-0x475+-0x1a38,0x2483+-0x6f9+-0x1d8a,0xe*0x261+0xc1f*0x1+-0x1*0x2d6d,0x2017+0x392+0x1*-0x23a9);let _0x3f682f=0x143a+0x670+0x2*-0xd55,_0x219195=0x2*0x12ce+-0x1eab+-0x6f1,_0x20956d=-0xceb*-0x1+-0xda*-0x7+-0x12e1,_0x2a1473=-0x4d4+0xd*0x1a9+-0x10c1,_0x23f00c=0x236*0x11+0x328+-0x28be,_0x5acc8e=0x1*0x551+-0x1397+0xe46,_0x20d53e=!(0x9fe+-0xa27+0x29);const _0x1479e9=new Float32Array(-0x14b*0x15+-0x20d6+0x180*0x28),_0x4be8ca=new Float32Array(0x968+-0x49*0x24+0xdf),_0x3c5af3=new Uint16Array(_0x33bf04*(0x5a7*0x5+-0x1995+0x1f*-0x16)),_0x535a63=0x2*0xabb+-0x20fa+0x86*0x16+0.28209479177387814;for(let _0x34549f=-0x1*-0x154f+-0x2*-0xc91+-0x2e71;_0x34549f<_0x33bf04;++_0x34549f){const _0x3952f0=_0x4407a8[_0x34549f]*_0x535a63+(-0x1*-0xa63+0xada+-0x153d+0.5),_0x3ae34b=_0x5c58f8[_0x34549f]*_0x535a63+(0x52*0x1c+-0x15*0xf5+-0x1*-0xb21+0.5),_0x4e8d41=_0x23dedb[_0x34549f]*_0x535a63+(0x11d4*0x2+-0xfdc+-0x13cc+0.5),_0x3c9352=_0x43ba75[_0x34549f];_0x3c5af3[_0x34549f*(0x71e*0x5+-0x6*0x43+0x440*-0x8)+(-0xc6*0x11+0x19ac+-0xe5*0xe)]=_0x44c7d5(_0x3952f0),_0x3c5af3[_0x34549f*(-0x499+-0x7e9+0xc86*0x1)+(-0x84+0x1*0x1e3a+-0x1db5)]=_0x44c7d5(_0x3ae34b),_0x3c5af3[_0x34549f*(0x1aa8+-0x859+-0x124b)+(0xf7*0x1d+0xe98*0x2+0x3929*-0x1)]=_0x44c7d5(_0x4e8d41),_0x3c5af3[_0x34549f*(-0x1*-0x1436+0x2*-0xeb9+0x4a0*0x2)+(0x1ed1+0x66*0x5a+0x7*-0x986)]=_0x44c7d5(_0x3c9352);const _0x366116=_0x4d9ba9[_0x34549f],_0x2cad87=_0x1c4241[_0x34549f],_0x259967=_0x172a99[_0x34549f],_0x3e0cd2=Math['max'](_0x284031[_0x34549f],_0x279314[_0x34549f],_0x564e57[_0x34549f]);if(isFinite(_0x366116)&&isFinite(_0x2cad87)&&isFinite(_0x259967)&&isFinite(_0x3e0cd2)){const _0x24f70f=(0xf2+0x18*-0x78+0xa50)*Math['exp'](_0x3e0cd2);_0x20d53e?(_0x20d53e=!(0x2329+-0x86*0x5+-0x208a),_0x3f682f=_0x366116-_0x24f70f,_0x219195=_0x2cad87-_0x24f70f,_0x20956d=_0x259967-_0x24f70f,_0x2a1473=_0x366116+_0x24f70f,_0x23f00c=_0x2cad87+_0x24f70f,_0x5acc8e=_0x259967+_0x24f70f):(_0x3f682f=Math['min'](_0x3f682f,_0x366116-_0x24f70f),_0x219195=Math['min'](_0x219195,_0x2cad87-_0x24f70f),_0x20956d=Math['min'](_0x20956d,_0x259967-_0x24f70f),_0x2a1473=Math['max'](_0x2a1473,_0x366116+_0x24f70f),_0x23f00c=Math['max'](_0x23f00c,_0x2cad87+_0x24f70f),_0x5acc8e=Math['max'](_0x5acc8e,_0x259967+_0x24f70f));}_0x28d8eb['set'](_0x4688e9[_0x34549f],_0x39d2e2[_0x34549f],_0x1bf12a[_0x34549f],_0x206472[_0x34549f]),_0x28d8eb['normalize'](),_0x28d8eb['w']<-0x1278+-0x217c+0x33f4&&_0x28d8eb['mulScalar'](-(0x1e16+-0x2a2+-0x1*0x1b73)),_0x34f5fb[_0x34549f*(-0x3*0xb79+0x2650+-0x3e2)+(-0x1692+-0x1ef6+0x3588)]=_0x4d9ba9[_0x34549f],_0x34f5fb[_0x34549f*(-0x1*0x2359+0x4*0x13a+-0x1*-0x1e74)+(0x11*-0x1d+-0x1a88+0xe3b*0x2)]=_0x1c4241[_0x34549f],_0x34f5fb[_0x34549f*(0x824+-0x1817+-0x7fb*-0x2)+(-0x904+-0x1206+-0x1b0c*-0x1)]=_0x172a99[_0x34549f],_0x41833f[_0x34549f*(0x1939*-0x1+-0x10a*-0xb+0x3*0x49a)+(0x254+0x4e9+-0x11*0x6d)]=_0x4d9ba9[_0x34549f],_0x41833f[_0x34549f*(-0x1*0x25b1+-0x2562+-0x1*-0x4b16)+(-0x1945*0x1+-0x2*0xbf8+0x2*0x189b)]=_0x1c4241[_0x34549f],_0x41833f[_0x34549f*(-0x2629+-0x2*-0x107d+0x532)+(-0x1363*-0x1+0x35*-0x4a+0x1*-0x40f)]=_0x172a99[_0x34549f],_0xda9bfd[_0x34549f*(0x4b3*-0x1+-0x1d83*-0x1+-0x18cd)+(0x83*0x3c+0x60d*0x2+0x2*-0x1567)]=_0x44c7d5(Math['exp'](_0x284031[_0x34549f])),_0xda9bfd[_0x34549f*(-0x44*0x50+-0xf*0x1b1+0x2ea2)+(0x2*0xbb6+-0x1ebf*-0x1+-0x362a)]=_0x44c7d5(Math['exp'](_0x279314[_0x34549f])),_0xda9bfd[_0x34549f*(-0x513*-0x1+-0x3*-0x89b+-0x1ee1)+(-0x5*0x613+-0x2*0x46f+0x273f)]=_0x44c7d5(Math['exp'](_0x564e57[_0x34549f])),_0xe11da3[_0x34549f*(0x1803+-0x2*0x3e5+-0x1036)+(0x2219+-0x1*0x1997+-0x882)]=_0x28d8eb['x'],_0xe11da3[_0x34549f*(-0x32*0x3+-0x1e03+0x1e9c)+(0x26d8+0x686+-0x2d5d)]=_0x28d8eb['y'],_0xe11da3[_0x34549f*(0x1*-0x22bf+0x1*-0x15be+0xe2*0x40)+(-0x214a+0x1*-0x15b+0x22a7)]=_0x28d8eb['z'],_0x289959&&_0x1b58a5&&_0x261811&&_0x269990&&_0x5c99cc&&(_0x1b58a5[_0x34549f*(0x1a3*-0x5+0xf1e+0x2*-0x376)+(0x676+0x2209*-0x1+-0xb5*-0x27)]=_0x3131ea[_0x34549f],_0x1b58a5[_0x34549f*(0x1c*0x13+-0x615*-0x4+-0x1*0x1a65)+(0x1*-0x1c2b+0x1952+0x2da)]=_0x19df36[_0x34549f],_0x1b58a5[_0x34549f*(-0xb4d*-0x1+0x70e*-0x5+0x1*0x17fc)+(0x1ee+-0x180+-0x6c)]=_0x4e7966[_0x34549f],_0x269990[_0x34549f*(0x1353+-0x856+0x232*-0x5)+(-0xa5*-0x5+0x20cb+-0x2404)]=_0x3131ea[_0x34549f],_0x269990[_0x34549f*(0x1*-0x1623+-0x1*0x25c+0x1*0x1882)+(-0x690+0x7a*0x38+-0x141f)]=_0x19df36[_0x34549f],_0x269990[_0x34549f*(0x4*-0x8f4+-0xe9*-0x4+0x202f)+(0x449+0x6*-0x405+-0x13d7*-0x1)]=_0x4e7966[_0x34549f],_0x5c99cc[_0x34549f]=_0x59b829?Math['exp'](_0x59b829[_0x34549f]):0x2*-0x239+-0xdb1+-0x1223*-0x1,_0x261811[_0x34549f*(0x1*-0x1faf+-0x3*0x215+0x25f1)+(0x2*-0x5c0+0x7bc+0x1*0x3c4)]=_0xbccd20?_0xbccd20[_0x34549f]:-0x121d+0x4*-0x5ce+0x1*0x2955,_0x261811[_0x34549f*(-0x1514+0x2027*0x1+0x2c4*-0x4)+(-0x1b17+0x56*0x5d+-0x426)]=_0x5c99cc[_0x34549f]);}_0x20d53e||(_0x1479e9[-0x17db*0x1+-0x253c+0x3d17]=(_0x3f682f+_0x2a1473)*(-0x3*-0x88a+0x22*0x2a+0xf99*-0x2+0.5),_0x1479e9[0xe*0x112+-0x1*0x77c+0x1*-0x77f]=(_0x219195+_0x23f00c)*(0x1*0x21df+0x1562+-0x3741+0.5),_0x1479e9[-0x1303*0x1+-0x145f+0x2*0x13b2]=(_0x20956d+_0x5acc8e)*(0x867*0x1+0x21*0x3d+-0x1044+0.5),_0x4be8ca[-0x1*-0xc95+-0x730*-0x1+-0x13c5]=(_0x2a1473-_0x3f682f)*(-0x1*0x1ebd+-0x4cb+-0xc*-0x2f6+0.5),_0x4be8ca[0x1*0x9ae+0x9ca+-0x3*0x67d]=(_0x23f00c-_0x219195)*(-0xa6e+-0x3*-0x69a+-0x1e*0x50+0.5),_0x4be8ca[-0x136d+0x3*-0x141+-0xb99*-0x2]=(_0x5acc8e-_0x20956d)*(0x5*-0x2a1+0x12*-0x1bb+0x1*0x2c4b+0.5));const _0xdf3f58=_0x184a9e();let _0x244318={'dataColor':_0x3c5af3,'center':_0x1479e9,'halfExtents':_0x4be8ca,'dataCenters':_0x41833f,'dataPosition':_0x34f5fb,'dataScale':_0xda9bfd,'dataRotation':_0xe11da3,..._0xdf3f58};return _0x289959&&(_0x244318={..._0x244318,'dataMotion':_0x1b58a5,'dataTime':_0x261811,'motion':_0x269990,'tScaleArray':_0x5c99cc,'muT':new Float32Array(_0xbccd20),'timeIndex':new Float32Array(_0x46d064)}),_0x244318;},_0x2f3aa6=_0x5660e4=>{const _0x464cd6=[];for(let _0x1a7d00=0x252c+-0xc46+0x2*-0xc73;_0x1a7d00<_0x5660e4;++_0x1a7d00)_0x464cd6['push'](_0x19bf54['f_rest_'+_0x1a7d00]);return _0x464cd6;},_0x184a9e=()=>{const _0x43eca2=_0x3604de();if(_0x43eca2<=-0x77*-0x45+0x7cd*0x4+-0x3f47)return{};const _0x279a2d=_0x19bf54['x']['length'],_0x12ec8c=new Uint32Array(_0x279a2d*(0x33*-0x4e+-0x1ac8+-0x2*-0x152b)),_0x26be29=new Uint32Array(_0x279a2d*(0x107f+0x7*-0x375+0x7b8)),_0x3346c0=new Uint32Array(_0x279a2d*(0x1c04+0x8f4+0xd7*-0x2c)),_0x23cedb=new Uint32Array(_0x279a2d*(-0x8*0x402+0x1*0x11fb+0xe19*0x1)),_0x5a3984={0x1:0x3,0x2:0x8,0x3:0xf}[_0x43eca2],_0x23f542=_0x2f3aa6(_0x5a3984*(-0x5bc+-0x9e*-0x3a+-0x1e0d)),_0x2e46d9=0x4*0x6b+0x6ef*-0x3+0x1b20,_0x2cebe1=0xda8+0x1*-0x207d+0x16d4,_0x2c12ff=new Float32Array(0x4*-0x146+-0x1*0x3c3+-0x2f4*-0x3),_0x32348c=new Uint32Array(_0x2c12ff['buffer']),_0x47dad2=new Array(_0x5a3984*(0x208*-0xb+0x1082+0x5d9))['fill'](-0x1*0xdfc+-0x1*0x479+0x19*0xbd);for(let _0x299567=-0x6*-0x169+0x1ff+0x1*-0xa75;_0x299567<_0x279a2d;++_0x299567){for(let _0x55b90d=-0x1b*0xa+0x242a+-0x231c;_0x55b90d<_0x5a3984;++_0x55b90d)_0x47dad2[_0x55b90d*(-0x1cbd+0x249e+-0x7de)]=_0x23f542[_0x55b90d][_0x299567],_0x47dad2[_0x55b90d*(-0x18a0+0x1f50+-0x1*0x6ad)+(-0x1f32+0x967+0x15cc)]=_0x23f542[_0x55b90d+_0x5a3984][_0x299567],_0x47dad2[_0x55b90d*(0x11fc+0x2563+-0x375c)+(-0x2323+-0x1d7d+-0x1*-0x40a2)]=_0x23f542[_0x55b90d+_0x5a3984*(0x2b*-0xbb+-0x1890+0x37fb)][_0x299567];let _0x4e5075=_0x47dad2[-0x1cd0+-0x10d*-0x7+0x1575*0x1];for(let _0x1e72c1=-0x17c9+-0x11*0x147+0x1*0x2d81;_0x1e72c1<_0x5a3984*(-0x1*-0x241e+-0x17e*0x12+-0x93f*0x1);++_0x1e72c1)_0x4e5075=Math['max'](_0x4e5075,Math['abs'](_0x47dad2[_0x1e72c1]));if(_0x4e5075!==0x3b7*-0x3+-0x14*-0x1e7+-0x47*0x61){for(let _0x582455=0x97*-0x1f+-0x132*-0x8+0x1d*0x4d;_0x582455<_0x5a3984;++_0x582455)_0x47dad2[_0x582455*(-0xd9*-0x29+0x47*0x50+-0x38ee)+(0xb3*0x1+-0x23bf+0x230c)]=Math['max'](-0xc22+0x1819+-0x3fd*0x3,Math['min'](_0x2e46d9,Math['floor']((_0x47dad2[_0x582455*(-0x1336*-0x2+-0x1bc3+0x1d*-0x5e)+(0x25*0x8a+0x20f5*0x1+-0x34e7)]/_0x4e5075*(-0x822*0x4+0x205+-0x49*-0x6b+0.5)+(-0x1*-0x1e9e+-0x1fa3+0x9*0x1d+0.5))*_0x2e46d9+(-0x22ec+-0x10*0x182+-0x3b0c*-0x1+0.5)))),_0x47dad2[_0x582455*(-0x2414*0x1+-0xf51+0x8c*0x5e)+(0x26d3+-0x1f1e+0x1ed*-0x4)]=Math['max'](0x1dd2+0x18b5+-0x3687,Math['min'](_0x2cebe1,Math['floor']((_0x47dad2[_0x582455*(-0x50e*-0x5+0x2*0xfc4+-0x38cb)+(0x1*-0xef3+0xf4c+-0x58)]/_0x4e5075*(-0xa*-0x12e+-0x39c+-0x106*0x8+0.5)+(0x2*-0x11fd+-0xd53*-0x1+-0x1*-0x16a7+0.5))*_0x2cebe1+(0x173d*0x1+0xdcb+0x4a1*-0x8+0.5)))),_0x47dad2[_0x582455*(-0xa41+-0x1e5a+0x289e)+(0x1*0x173b+-0x263b*-0x1+-0x3d74)]=Math['max'](0xd67+-0x1e74+-0x1*-0x110d,Math['min'](_0x2e46d9,Math['floor']((_0x47dad2[_0x582455*(-0xa21+-0x2c*-0xad+-0x1398)+(-0x1f*0x10c+0x1fb8+0xbe)]/_0x4e5075*(0xd*-0x43+-0x5*0x621+-0x883*-0x4+0.5)+(-0x3*-0x14f+-0x1b85+0x2*0xbcc+0.5))*_0x2e46d9+(0x3*-0xc69+0x89a+0x417*0x7+0.5))));_0x2c12ff[0x285+0x1244+-0x14c9]=_0x4e5075,_0x12ec8c[_0x299567*(0x625+0x11e*-0x1b+0x36f*0x7)+(0x13*0x115+0xb*-0xe5+0xe*-0xc4)]=_0x32348c[-0x86+0x4*-0x377+0x1*0xe62],_0x12ec8c[_0x299567*(0xff6+-0x10f0+0xfe)+(0xea8+0x37b+-0x1222)]=_0x47dad2[0x1b*-0xbd+0x1a60+-0x671]<<-0x4b1*-0x4+0xa7*0x13+-0x1f14|_0x47dad2[-0x7b8*0x2+0x71*0x20+-0x1*-0x151]<<0x370+0x1*-0x259e+-0x2239*-0x1|_0x47dad2[0x23f2+-0x1*0x1cae+-0x742*0x1],_0x12ec8c[_0x299567*(0xd6a+0x2600+-0x3366)+(-0x1*-0x7bf+0x1d*-0xbc+0x1*0xd8f)]=_0x47dad2[-0x5*0x3ce+-0x268e+-0x17*-0x281]<<-0x1e53+-0x219*0x3+0x24b3|_0x47dad2[-0x11db+-0x4*0x98c+-0x7f*-0x71]<<0x142d*-0x1+0x27*0x3+0x1*0x13c3|_0x47dad2[-0x1fd0+0xc25*0x2+0x78b],_0x12ec8c[_0x299567*(0x7*0x326+0x3fd*-0x3+-0xa0f*0x1)+(-0x7*0x21d+0x41*0x5f+-0x951)]=_0x47dad2[0x903+0x64*-0x2c+0x1*0x833]<<0x1e09*0x1+-0x1*-0x1a2a+-0x381e|_0x47dad2[-0x1301+0x91*-0x5+0x1d*0xc1]<<0x5b*0x49+-0xe2*-0x1b+-0x31be|_0x47dad2[-0x1165+0x1f7*0x7+-0x2f*-0x14],_0x43eca2>-0x1dd9+-0xd*-0x2cf+-0x37*0x1f&&(_0x26be29[_0x299567*(0xf8a+-0xd25*-0x1+0x1cab*-0x1)+(0x1a3*-0x3+0xa61+-0x578)]=_0x47dad2[0x124d+0x21e*0x2+-0x1680]<<0x61d*-0x1+0x1539+0xf07*-0x1|_0x47dad2[0x1*-0x13cc+0x92*0x11+0x289*0x4]<<0x15c6+0x1efc+-0x34b7|_0x47dad2[-0xf67+-0x180a+0x277c],_0x26be29[_0x299567*(-0x767*-0x5+-0x10d+-0x23f2)+(0x1*0x1e39+-0x8d7+-0x1561*0x1)]=_0x47dad2[0x4*-0x94d+-0x1c31*0x1+0x4171*0x1]<<0x4a*0x25+-0x134d*0x2+0x1bfd*0x1|_0x47dad2[0x144d+-0x22df+-0x13*-0xc5]<<0x2*-0xc95+-0xaa9*0x3+0x131*0x30|_0x47dad2[0x5bb*-0x6+-0x587*-0x1+0x1ce9],_0x26be29[_0x299567*(0xa09+-0x44f*-0x1+-0xe54)+(-0xfdc+-0x2238+-0x6*-0x859)]=_0x47dad2[-0x3*-0x86d+-0x5*0x4eb+-0xa1]<<0xade*-0x3+-0x39b*-0x5+0xea8|_0x47dad2[-0x7*-0x485+0xa32+-0x29c5]<<0x1a+0x7*-0x173+0x1*0xa16|_0x47dad2[-0x26a2*0x1+0xe*-0x220+0x4473],_0x26be29[_0x299567*(0x19a3+0x103b+-0x29da)+(0x150d+-0x3b4+-0x1156)]=_0x47dad2[0x20e4+-0xc0b*0x2+-0x8bc]<<-0x3*-0x997+-0x8*-0x2a1+0x158*-0x25|_0x47dad2[0x2b*0x4d+0x5*-0x5d3+0x17*0xb5]<<-0x7*-0x145+0x1*-0x1a9e+0x11c6|_0x47dad2[-0x6d4+-0x7*0x2c5+0x1a4b*0x1],_0x43eca2>-0x1f39*0x1+-0x1394+-0x32cf*-0x1?(_0x3346c0[_0x299567*(0x1251+0x3d9*0x9+-0x34ee)+(0x13f7+-0xfb5+-0x442)]=_0x47dad2[0x129*0x18+0x3*-0x4ea+-0xd05]<<0x1*-0x8e+0x5*0x129+0x52a*-0x1|_0x47dad2[0x274*-0x7+0xe3*-0x11+0xac7*0x3]<<0x256d+-0xe*0xc7+-0x1a80|_0x47dad2[-0x18ac+0x1*-0x2473+0x3d36],_0x3346c0[_0x299567*(-0x2687+-0x1e54*-0x1+0x837)+(0x17f5*-0x1+-0x1*0x165a+0x390*0xd)]=_0x47dad2[-0x203c+-0x9*0x3ee+0x43b2]<<-0x1*0x24cd+-0x5*0x4cc+0x3cde|_0x47dad2[-0x1*-0xdd3+-0x24da+0x1720]<<0x1*-0x2596+0x2361*0x1+0x240|_0x47dad2[-0x1772*0x1+-0x97b+0x2107],_0x3346c0[_0x299567*(-0x7*-0x116+0x24*-0x6b+0xa*0xbf)+(0xc7*0x15+0x1c56+-0x2ca7)]=_0x47dad2[-0x1d8b+-0x5a5+0x70f*0x5]<<-0x157*-0x9+-0x2582+-0x1*-0x1988|_0x47dad2[0x1*0x1777+0xa6*-0x1+-0x16b5]<<-0x24ec+-0x9ea+0x2ee1*0x1|_0x47dad2[0x1*0x1063+0x3*0xceb+-0x3707],_0x3346c0[_0x299567*(0x24d2+0x1bde+-0x40ac)+(0x1cfe+0x1*0xd6c+-0x2a67)]=_0x47dad2[0x9e8+-0x1*-0x1ee3+-0x28ad]<<0x5*-0x411+-0x624*-0x3+0x1fe|_0x47dad2[0x9c*0x2f+0x1579+-0x31fe]<<0x1500+-0xa72+-0x1*0xa83|_0x47dad2[-0x10*0x179+-0x13f*0x4+0x1cac],_0x23cedb[_0x299567*(0xa23+0x203f+0x2*-0x152f)+(0xa*0x373+-0x1e75+0x1*-0x409)]=_0x47dad2[0xa3*-0x30+-0x5*-0x69d+-0x4*0x98]<<0x5bc+-0x9*-0x1eb+0x346*-0x7|_0x47dad2[-0xe0*-0x2c+-0x1525+-0x1139]<<-0x126+0x1*-0x5bc+0x6ed|_0x47dad2[0x371*0x7+0xfcb+-0x27bf],_0x23cedb[_0x299567*(0x847+-0x1ffe+-0x2a3*-0x9)+(0xca9+0xf7*-0x11+0x3bf)]=_0x47dad2[0x535*0x1+-0x89f*-0x3+0x25*-0xd6]<<0x13ff+-0x65+0x107*-0x13|_0x47dad2[0x6f*0x48+0xac2+-0x29d5]<<0x236*-0x7+-0x1292+-0x2217*-0x1|_0x47dad2[0x1b0e+-0x15b9+-0x1*0x52f],_0x23cedb[_0x299567*(0x1961+-0x2c2*0x8+-0x34d)+(-0x1*-0xe13+0x221f+0x1010*-0x3)]=_0x47dad2[-0x449*-0x5+-0x13c*-0x1b+-0x369a]<<0x124b+-0x5*-0x47a+0xc*-0x362|_0x47dad2[-0x1b78+0x1b66+0x3a]<<0x1*-0x102b+-0x1*-0x67a+0x9bc|_0x47dad2[-0xc*0x1be+0x24df+-0xfce],_0x23cedb[_0x299567*(-0x4c*0x49+0x262*-0x5+0x1fa*0x11)+(0x41*0x46+-0x52*0x4+0x1*-0x107b)]=_0x47dad2[0x2*-0x1198+0x982*0x3+-0x26*-0x2e]<<0x72*-0x7+0xb18+-0x7e5|_0x47dad2[-0x10b+0x1723*0x1+-0x15ed]<<0x3*0x21a+0xa39+-0x4*0x41f|_0x47dad2[0x1251*0x1+0x85a+-0x1a7f]):_0x3346c0[_0x299567]=_0x47dad2[0xd*-0xb1+-0x10b6+0x19c8]<<0x1503+-0x14d*-0x8+-0x1f56|_0x47dad2[-0x6f5*0x5+-0x3a5+-0x244*-0x11]<<-0x144d*0x1+0x130+-0x4ca*-0x4|_0x47dad2[-0x2*0xa21+-0xc32*-0x2+-0x40b]);}}return{'sh1to3Data':_0x12ec8c,'sh4to7Data':_0x26be29,'sh8to11Data':_0x3346c0,'sh12to15Data':_0x23cedb};},_0x146895=_0x54f722=>{if(!_0x19bf54['time_index'])return;const _0x12aba2=_0x19bf54['time_index']['findIndex'](_0x25e388=>_0x25e388===_0x54f722);let _0x513c22=_0x19bf54['time_index']['findIndex']((_0x397686,_0x282511)=>_0x397686!==_0x54f722&&_0x282511>_0x12aba2);if(_0x513c22===-(0x156c+-0x1597+0x2c)&&_0x12aba2===-(0x1*0x1369+0x40d*-0x9+0x110d))return;_0x513c22===-(0x1*-0x1f4d+-0x8f*-0x1+-0x1*-0x1ebf)&&_0x12aba2!==-(-0x3e*0x2b+0x5*0x89+0x1*0x7be)&&(_0x513c22=_0x19bf54['time_index']['length']),_0x4156b1-=_0x513c22-_0x12aba2;const _0x1bd007=Object['keys'](_0x19bf54);for(let _0x217c92=0x927+-0x133b+-0x3c*-0x2b;_0x217c92<_0x1bd007['length'];_0x217c92++){const _0x5829ea=_0x1bd007[_0x217c92],_0x115216=_0x19bf54[_0x5829ea];if(_0x115216){const _0x562745=new Float32Array(_0x4156b1);_0x12aba2>-0xed*-0x5+0x9a7*0x2+0x17ef*-0x1?(_0x562745['set'](_0x115216['subarray'](0x1855*-0x1+0x1a62+-0x20d,_0x12aba2),-0xe13*-0x2+-0x2*-0x12ce+0x1bb*-0x26),_0x562745['set'](_0x115216['subarray'](_0x513c22),_0x12aba2)):_0x562745['set'](_0x115216['subarray'](_0x513c22),0x19*-0x72+0x17ca+-0x36*0x3c),_0x19bf54[_0x5829ea]=_0x562745;}}},_0x42aab9=()=>{const _0x28a5bd=Object['keys'](_0x19bf54);for(let _0x10231e=-0x2594+-0x2006*-0x1+0x58e;_0x10231e<_0x28a5bd['length'];_0x10231e++){const _0x390d1c=_0x28a5bd[_0x10231e];_0x19bf54[_0x390d1c]&&(_0x19bf54[_0x390d1c]=[]);}},_0x14d4b9=()=>{_0x19bf54={},_0x4156b1=0x1eec+0x12eb+-0x31d7*0x1;};}class nb extends pe{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+ab['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x306d33,_0x29378f,_0x23881d,_0xd3c492=!(0x11*-0xa0+-0xd*0xef+0x16c4*0x1)){var _0x1b4e72,_0x172804;const _0x29a35e={};return _0x306d33['elements'][-0x57*-0x38+-0x70f*0x1+-0xbf9]['properties']['forEach'](_0x5ada41=>{_0x29a35e[_0x5ada41['name']]=_0x5ada41['storage'];}),_0xd3c492?(_0x1b4e72=this['worker'])==null||_0x1b4e72['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x29a35e,'timeIndex':_0x29378f,'timeOption':_0x23881d},_0x306d33['elements'][0x661*-0x5+-0xa*0x360+-0xd21*-0x5]['properties']['map'](_0x3f3022=>_0x3f3022['storage']['buffer'])):(_0x172804=this['worker'])==null||_0x172804['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x29a35e,'timeIndex':_0x29378f,'timeOption':_0x23881d}),new Promise(_0x401e3d=>{this['worker']['onmessage']=_0x446d50=>{if(!this['worker'])return;const {data:_0x3f73d4}=_0x446d50;_0x3f73d4['type']==='newAppendD'+'ata'&&_0x401e3d(_0x3f73d4);};});}async['releaseSeq'+'Data'](_0x335c7f){var _0x54d891;(_0x54d891=this['worker'])==null||_0x54d891['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x335c7f});}async['releaseAll'+'SeqData'](){var _0x31800c;(_0x31800c=this['worker'])==null||_0x31800c['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x1d01b3;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x1d01b3=this['worker'])==null||_0x1d01b3['terminate'](),this['worker']=null);}}const Ca=new te(),M_=new le(),Gd=new Ie(),I_=new Ie(),ob=new ie(-0x1d*-0x3+0x95f*0x4+0x12e9*-0x2,-0x128f+0xd*-0xcb+-0x1*-0x1cdf,0x4*-0x5c1+0xa67+0xc9d,-0x1372+-0x9f*0xf+0x1cc3+0.4),Hd=0x7*-0x185+0x2013+-0x1570+0.28209479177387814,Wd=0x43a9*0x2+0x9665+0x1ef89;let lb=class{constructor(_0x41e6aa,_0x4e22ec,_0x12e8c4,_0x2568ee,_0x3cd70d,_0xf28451){const _0x5b3e98=_0x41e6aa['getProp']('x'),_0xa03248=_0x41e6aa['getProp']('y'),_0x504a4a=_0x41e6aa['getProp']('z'),_0x15eb74=_0x41e6aa['getProp']('rot_1'),_0x471aee=_0x41e6aa['getProp']('rot_2'),_0x3087c8=_0x41e6aa['getProp']('rot_3'),_0x22dd0e=_0x41e6aa['getProp']('rot_0'),_0x4cf309=_0x41e6aa['getProp']('motion_0'),_0x4c7871=_0x41e6aa['getProp']('motion_1'),_0x5e57f8=_0x41e6aa['getProp']('motion_2'),_0xee91c6=_0x41e6aa['getProp']('scale_0'),_0x52263b=_0x41e6aa['getProp']('scale_1'),_0x890bcf=_0x41e6aa['getProp']('scale_2'),_0x5b7039=_0x41e6aa['getProp']('f_dc_0'),_0x3e7a20=_0x41e6aa['getProp']('f_dc_1'),_0xb8f542=_0x41e6aa['getProp']('f_dc_2'),_0x27ea9f=_0x41e6aa['getProp']('opacity');this['read']=_0x3a42b5=>{_0x4e22ec&&(_0x4e22ec['x']=_0x5b3e98[_0x3a42b5],_0x4e22ec['y']=_0xa03248[_0x3a42b5],_0x4e22ec['z']=_0x504a4a[_0x3a42b5]),_0x12e8c4&&_0x12e8c4['set'](_0x15eb74[_0x3a42b5],_0x471aee[_0x3a42b5],_0x3087c8[_0x3a42b5],_0x22dd0e[_0x3a42b5]),_0x2568ee&&_0x2568ee['set'](Math['exp'](_0xee91c6[_0x3a42b5]),Math['exp'](_0x52263b[_0x3a42b5]),Math['exp'](_0x890bcf[_0x3a42b5])),_0xf28451&&_0x4cf309&&_0xf28451['set'](_0x4cf309[_0x3a42b5],_0x4c7871[_0x3a42b5],_0x5e57f8[_0x3a42b5]),_0x3cd70d&&_0x3cd70d['set'](-0xe89+0xd15+-0x2*-0xba+0.5+_0x5b7039[_0x3a42b5]*Hd,0x1cb7+0x2*0x121d+-0x40f1+0.5+_0x3e7a20[_0x3a42b5]*Hd,0x3a*0x5e+-0x1*-0x2636+-0x1*0x3b82+0.5+_0xb8f542[_0x3a42b5]*Hd,_0x27ea9f[_0x3a42b5]);};}};const D_=(_0x1fe445,_0x249f7b,_0x129795)=>{M_['set'](_0x129795['x'],_0x129795['y'],_0x129795['z'],_0x129795['w'])['normalize'](),_0x1fe445['setTRS'](_0x249f7b,M_,I['ONE']);};class Dn{constructor(_0x32e8c9,_0x2ef8d7=[]){h(this,'elements'),h(this,'numSplats',0x36e*0x1+-0x95*-0x15+-0xfa7),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x76a623;(_0x76a623=this['dataWorker'])==null||_0x76a623['destroy'](),this['dataWorker']=null;});var _0x47629f,_0x322c20,_0x400bae;this['elements']=_0x32e8c9,this['numSplats']=((_0x47629f=this['getElement']('vertex'))==null?void(-0x1*0x89f+0x1*-0x2263+0x2b02):_0x47629f['count'])??-0x2*0x11d1+0x5e9*0x4+0x133*0xa,this['comments']=_0x2ef8d7,this['is4D']=!!((_0x400bae=(_0x322c20=this['getElement']('vertex'))==null?void(0x4*-0x75b+-0xa14+0x2780):_0x322c20['properties']['find'](_0x157c89=>_0x157c89['name']==='t'))!=null&&_0x400bae['storage']);}async['appendGSpl'+'atData'](_0x5a98f5,_0x75539f,_0x12d60f){var _0x1d3a0c;let _0x2e7613=0x4*-0xfc+0x6c4+-0x2d4;for(let _0x54b8f9=0x1f*-0x106+-0x19b9+0x4d*0xbf;_0x54b8f9<_0x12d60f['length']&&_0x75539f>_0x12d60f[_0x54b8f9];_0x54b8f9+=-0x23a6+0x2*0xf18+-0x28*-0x23)_0x2e7613=_0x54b8f9/(0x2621*-0x1+0x68*-0x2e+-0x12f1*-0x3);console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData',_0x2e7613),this['dataWorker']||(this['dataWorker']=new nb(),await this['dataWorker']['appendGSpl'+'atData'](this,0x25c*-0x6+0x26fa+-0x18d2,_0x12d60f));const _0x3b07be=this['getElement']('vertex');_0x3b07be&&(_0x3b07be['count']=this['numSplats']);const _0x2a7ece=await this['dataWorker']['appendGSpl'+'atData'](_0x5a98f5,_0x2e7613,_0x12d60f,!(-0x141f+-0x1014+0x2433)),_0x370c37=_0x2a7ece['properties'],_0x9c2c28=((_0x1d3a0c=this['getElement']('vertex'))==null?void(0x3*-0xb3b+-0x1*0x205f+0x4210):_0x1d3a0c['properties'])??[];for(const _0x2b3ba3 in _0x370c37){const _0x5be365=_0x9c2c28['find'](_0x3bcd2e=>_0x3bcd2e['name']===_0x2b3ba3);_0x5be365?_0x5be365['storage']=_0x370c37[_0x2b3ba3]:_0x9c2c28['push']({'type':'float','name':_0x2b3ba3,'storage':_0x370c37[_0x2b3ba3],'byteSize':0x4});}this['transformD'+'ata']=_0x2a7ece['transformD'+'ata'],this['numSplats']=_0x370c37['x']['length'],console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData\x20nu'+'mSplats',this['numSplats']);}async['releaseSeq'+'Data'](_0xf42af5){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20releaseSe'+'qData',_0xf42af5),this['dataWorker']['releaseSeq'+'Data'](_0xf42af5),this;}async['releaseAll'+'SeqData'](){var _0x259eb5;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20release\x20a'+'ll\x20SeqData'),(_0x259eb5=this['dataWorker'])==null||_0x259eb5['releaseAll'+'SeqData'](),this;}static['calcSplatA'+'abb'](_0xed0b99,_0x242f2b,_0x21c8fa,_0x2b23aa){D_(Ca,_0x242f2b,_0x21c8fa),Gd['center']['set'](0x1*-0x21c1+0x246+-0x1*-0x1f7b,-0x9ac+-0x3*-0x6+-0x99a*-0x1,0x26*0x7+-0x9d*0x7+0x1*0x341),Gd['halfExtent'+'s']['set'](_0x2b23aa['x']*(-0x131b*-0x2+-0x2b*0xdf+-0xbf),_0x2b23aa['y']*(0x1f03+0x1e*0x47+-0x2753),_0x2b23aa['z']*(-0x4*-0x7cd+0x160+0x1*-0x2092)),_0xed0b99['setFromTra'+'nsformedAa'+'bb'](Gd,Ca);}['getProp'](_0x393c33,_0x9d46f0='vertex'){var _0xf99283,_0x3a33ac;return(_0x3a33ac=(_0xf99283=this['getElement'](_0x9d46f0))==null?void(0x80c+-0x1144+0x938):_0xf99283['properties']['find'](_0x4f742d=>_0x4f742d['name']===_0x393c33))==null?void(-0x76*0x2f+-0x1fc9+0x3573):_0x3a33ac['storage'];}['getElement'](_0xead394){return this['elements']['find'](_0x239528=>_0x239528['name']===_0xead394);}['addProp'](_0x674bfa,_0x3c8655){this['getElement']('vertex')['properties']['push']({'type':'float','name':_0x674bfa,'storage':_0x3c8655,'byteSize':0x4});}['createIter'](_0x42b648,_0x75b84f,_0x234d0e,_0x2a99eb,_0x27ed92){return new lb(this,_0x42b648,_0x75b84f,_0x234d0e,_0x2a99eb,_0x27ed92);}async['calcAabbAs'+'ync'](_0x29aa14,_0x2b6835){var _0x5597f4,_0x5f6610;if((_0x5597f4=this['transformD'+'ata'])!=null&&_0x5597f4['center']&&((_0x5f6610=this['transformD'+'ata'])!=null&&_0x5f6610['halfExtent'+'s'])){_0x29aa14['center']['set'](this['transformD'+'ata']['center'][0xff9*0x1+-0x13*-0x1c8+-0x31d1],this['transformD'+'ata']['center'][-0xdfd+-0xf25+0x1d23],this['transformD'+'ata']['center'][-0x1ac8+-0x10a+0x1bd4*0x1]),_0x29aa14['halfExtent'+'s']['set'](this['transformD'+'ata']['halfExtent'+'s'][0x24d*0x6+0x2071+-0x2e3f*0x1],this['transformD'+'ata']['halfExtent'+'s'][0xe9*0x29+0x1*0x4f+0x259f*-0x1],this['transformD'+'ata']['halfExtent'+'s'][-0xf81+0x3a5*-0x1+-0x4ca*-0x4]);return;}const _0x449f17=this['getProp']('x'),_0x11da82=this['getProp']('y'),_0x2bbf65=this['getProp']('z'),_0x510ca3=this['getProp']('scale_0'),_0x37070d=this['getProp']('scale_1'),_0x33318d=this['getProp']('scale_2'),_0x20abe7=await(_0x2b6835==null?void(0x1a4a*-0x1+0x17bd+0x28d):_0x2b6835['calcAabb'](this['numSplats'],_0x449f17,_0x11da82,_0x2bbf65,_0x510ca3,_0x37070d,_0x33318d));_0x29aa14['center']['set'](_0x20abe7['center'][-0x6*-0x5b3+0x1e48+-0x312*0x15],_0x20abe7['center'][-0x2e*0x71+0x644+-0x2cf*-0x5],_0x20abe7['center'][-0x1f*0x2f+0x3*0xb32+0x79*-0x3b]),_0x29aa14['halfExtent'+'s']['set'](_0x20abe7['halfExtent'+'s'][0xb2*-0x17+0x26c9*0x1+-0x16cb*0x1],_0x20abe7['halfExtent'+'s'][0xee0*-0x1+-0x6b4+-0x55*-0x41],_0x20abe7['halfExtent'+'s'][-0x1*0x7e6+-0x122e+0x1a16]);}['calcAabb'](_0x22c504,_0x38a974){let _0x3c503c,_0x2ee963,_0x3a716b,_0x4091be,_0x2142b8,_0x1e377d,_0x23f697=!(-0x26ab+-0x1d1a+0x3*0x1697);const _0x6bc9b9=this['getProp']('x'),_0x6758d2=this['getProp']('y'),_0x96e823=this['getProp']('z'),_0x433449=this['getProp']('scale_0'),_0x13ce4b=this['getProp']('scale_1'),_0x467bc9=this['getProp']('scale_2');for(let _0x4c6653=0x11da+-0x167f+0x4a5;_0x4c6653<this['numSplats'];++_0x4c6653){if(_0x38a974&&!_0x38a974(_0x4c6653))continue;const _0x24edf7=_0x6bc9b9[_0x4c6653],_0x12b9c0=_0x6758d2[_0x4c6653],_0x49013d=_0x96e823[_0x4c6653],_0x323958=Math['max'](_0x433449[_0x4c6653],_0x13ce4b[_0x4c6653],_0x467bc9[_0x4c6653]);if(!isFinite(_0x24edf7)||!isFinite(_0x12b9c0)||!isFinite(_0x49013d)||!isFinite(_0x323958))continue;const _0x5c07fd=(-0x4cb*0x7+-0x31*0xbf+0x461e)*Math['exp'](_0x323958);_0x23f697?(_0x23f697=!(0x201e*-0x1+0x2*-0xc41+0x38a1),_0x3c503c=_0x24edf7-_0x5c07fd,_0x2ee963=_0x12b9c0-_0x5c07fd,_0x3a716b=_0x49013d-_0x5c07fd,_0x4091be=_0x24edf7+_0x5c07fd,_0x2142b8=_0x12b9c0+_0x5c07fd,_0x1e377d=_0x49013d+_0x5c07fd):(_0x3c503c=Math['min'](_0x3c503c,_0x24edf7-_0x5c07fd),_0x2ee963=Math['min'](_0x2ee963,_0x12b9c0-_0x5c07fd),_0x3a716b=Math['min'](_0x3a716b,_0x49013d-_0x5c07fd),_0x4091be=Math['max'](_0x4091be,_0x24edf7+_0x5c07fd),_0x2142b8=Math['max'](_0x2142b8,_0x12b9c0+_0x5c07fd),_0x1e377d=Math['max'](_0x1e377d,_0x49013d+_0x5c07fd));}return _0x23f697||(_0x22c504['center']['set']((_0x3c503c+_0x4091be)*(-0x31*0xbd+-0x860*0x2+0x34ed+0.5),(_0x2ee963+_0x2142b8)*(0x1360*0x2+0xfd4+-0x3694+0.5),(_0x3a716b+_0x1e377d)*(0xa*0x2c3+0x1*-0x17b9+-0x3e5+0.5)),_0x22c504['halfExtent'+'s']['set']((_0x4091be-_0x3c503c)*(0xba1+-0x3*0x188+-0x709*0x1+0.5),(_0x2142b8-_0x2ee963)*(-0x1655*-0x1+0x3*-0x51f+-0x2*0x37c+0.5),(_0x1e377d-_0x3a716b)*(0x1f3*0xe+0xab5+-0x1*0x25ff+0.5))),!_0x23f697;}['yieldToMai'+'n'](){var _0x54f422;return(_0x54f422=globalThis['scheduler'])!=null&&_0x54f422['yield']?globalThis['scheduler']['yield']():new Promise(_0x11571f=>{setTimeout(_0x11571f,-0x1c90+0x2692+0x6*-0x1ab);});}['calcAabbEx'+'act'](_0x122a50,_0x214538){const _0x47c2c1=new I(),_0x56f816=new le(),_0x1e468b=new I(),_0x557a70=this['createIter'](_0x47c2c1,_0x56f816,_0x1e468b);let _0x1595fc=!(-0xadb*0x1+0x3d9+-0x381*-0x2);for(let _0x39dbc8=-0x1f88+0x164d+0x93b;_0x39dbc8<this['numSplats'];++_0x39dbc8)_0x214538&&!_0x214538(_0x39dbc8)||(_0x557a70['read'](_0x39dbc8),_0x1595fc?(_0x1595fc=!(0x548+0x59*0x7+0x8d*-0xe),Dn['calcSplatA'+'abb'](_0x122a50,_0x47c2c1,_0x56f816,_0x1e468b)):(Dn['calcSplatA'+'abb'](I_,_0x47c2c1,_0x56f816,_0x1e468b),_0x122a50['add'](I_)));return!_0x1595fc;}async['getCenters'](_0x3a59e3){const _0x545c5c=this['getProp']('x'),_0x3cde54=this['getProp']('y'),_0x202147=this['getProp']('z');for(let _0x44dfc0=0xe2f*-0x2+-0x114+0x2*0xeb9;_0x44dfc0<this['numSplats'];++_0x44dfc0)_0x3a59e3[_0x44dfc0*(-0x6*-0x8b+0x1cdb+-0x201a)+(-0xf6d+-0x910+0x187d)]=_0x545c5c[_0x44dfc0],_0x3a59e3[_0x44dfc0*(-0x2*0x737+-0x1f3b+0x2dac)+(0x4*-0x300+0xb*0x2f9+-0x14b2)]=_0x3cde54[_0x44dfc0],_0x3a59e3[_0x44dfc0*(-0x1*-0x1191+-0x20a+0xc*-0x14b)+(-0x67a*-0x5+-0x17e5+-0x87b)]=_0x202147[_0x44dfc0],_0x44dfc0%Wd===-0x119*-0x17+-0x1968+0x1*0x29&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x294efc;if((_0x294efc=this['transformD'+'ata'])!=null&&_0x294efc['muT'])return this['transformD'+'ata']['muT'];const _0x3cfba5=this['getProp']('t');return _0x3cfba5?new Float32Array(_0x3cfba5):void(0x1c4c+-0x1ba4*-0x1+-0xb3*0x50);}async['getTScale'](){const _0x140efb=this['getProp']('t_scale');if(!_0x140efb)return;const _0x3b32a3=new Float32Array(this['numSplats']);for(let _0x48f75d=0xedc+0x2057+-0x2f33;_0x48f75d<this['numSplats'];++_0x48f75d)_0x3b32a3[_0x48f75d]=Math['exp'](_0x140efb[_0x48f75d]),_0x48f75d%Wd===0x3*-0xa2e+-0x23cf*-0x1+-0x545&&await this['yieldToMai'+'n']();return _0x3b32a3;}async['getMotion'](_0x3c58cc){const _0x6060a9=this['getProp']('motion_0'),_0x5bf54a=this['getProp']('motion_1'),_0x419897=this['getProp']('motion_2');if(!(!_0x6060a9||!_0x5bf54a||!_0x419897)){for(let _0x45fb9=-0xb78+-0x2bd*0xe+-0x1e*-0x1a9;_0x45fb9<this['numSplats'];++_0x45fb9)_0x3c58cc[_0x45fb9*(-0x236d+0x7*0x35+-0x1*-0x21fd)+(0x444+0x2*0xb92+-0x1b68)]=_0x6060a9[_0x45fb9],_0x3c58cc[_0x45fb9*(-0x133*-0x9+-0xb*-0x17d+-0x1b27)+(0x2*0xa48+0x398*0x4+-0x32d*0xb)]=_0x5bf54a[_0x45fb9],_0x3c58cc[_0x45fb9*(-0x1*-0xc14+0x4*0x3e4+0x283*-0xb)+(0x21c8+0xd46+-0xbc3*0x4)]=_0x419897[_0x45fb9],_0x45fb9%Wd===-0x1*-0x1fe0+-0xa1*0x8+-0x1ad8&&await this['yieldToMai'+'n']();}}['getTimeInd'+'ex'](){var _0x3ad139;if((_0x3ad139=this['transformD'+'ata'])!=null&&_0x3ad139['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x255f6a=this['getProp']('time_index');if(_0x255f6a)return new Float32Array(_0x255f6a);}['calcFocalP'+'oint'](_0x353117,_0x3e6977){const _0x11d62e=this['getProp']('x'),_0x926bba=this['getProp']('y'),_0x5545c1=this['getProp']('z'),_0x49728a=this['getProp']('scale_0'),_0x3e6688=this['getProp']('scale_1'),_0xf920d0=this['getProp']('scale_2');_0x353117['x']=0x12fb+0x2a7+-0xd5*0x1a,_0x353117['y']=-0x1f4a+-0x1*-0x1e8+0x1d62,_0x353117['z']=0xa6d*0x1+0x2*-0x18a+-0x759;let _0x2b6475=0x8bd*0x1+-0xd3*0xb+-0x3*-0x1c;for(let _0x32bec6=0x397*-0x6+0x1*0xf92+0x5f8;_0x32bec6<this['numSplats'];++_0x32bec6){if(_0x3e6977&&!_0x3e6977(_0x32bec6))continue;const _0x177eb9=_0x11d62e[_0x32bec6],_0x3fd797=_0x926bba[_0x32bec6],_0x393dff=_0x5545c1[_0x32bec6];if(!isFinite(_0x177eb9)||!isFinite(_0x3fd797)||!isFinite(_0x393dff))continue;const _0x35ccd0=(0x26ae+0x15e3+0x1*-0x3c90)/(0x499*0x5+-0x1292+0x5*-0xe2+Math['exp'](Math['max'](_0x49728a[_0x32bec6],_0x3e6688[_0x32bec6],_0xf920d0[_0x32bec6])));_0x353117['x']+=_0x177eb9*_0x35ccd0,_0x353117['y']+=_0x3fd797*_0x35ccd0,_0x353117['z']+=_0x393dff*_0x35ccd0,_0x2b6475+=_0x35ccd0;}_0x353117['mulScalar']((0x849+0x2b*0x49+0x6d9*-0x3)/_0x2b6475);}['renderWire'+'frameBound'+'s'](_0x483e99,_0x5a2d57){const _0x26b4b7=new I(),_0x11b938=new le(),_0x5e830b=new I(),_0x153684=new I(),_0x39d546=new I(),_0x50a4bd=this['createIter'](_0x26b4b7,_0x11b938,_0x5e830b);for(let _0x1dddce=0x1841*0x1+0x14*0x155+-0x12f*0x2b;_0x1dddce<this['numSplats'];++_0x1dddce)_0x50a4bd['read'](_0x1dddce),D_(Ca,_0x26b4b7,_0x11b938),Ca['mul2'](_0x5a2d57,Ca),_0x153684['set'](_0x5e830b['x']*-(0xde6+0x4e4+-0x12c8),_0x5e830b['y']*-(0x1a47+-0x6bb+-0x138a),_0x5e830b['z']*-(0x1*0x17a9+0x1*-0x79f+-0x1008)),_0x39d546['set'](_0x5e830b['x']*(0x1976+0xaba+-0x242e),_0x5e830b['y']*(0x726+-0x1a5f+0x133b),_0x5e830b['z']*(0x569+0x811+-0x4*0x35e)),_0x483e99['immediate']['drawWireAl'+'ignedBox'](_0x153684,_0x39d546,ob,!(0x89+-0x20fb+-0x2072*-0x1),_0x483e99['defaultDra'+'wLayer'],Ca);}get['isCompress'+'ed'](){return!(0xa9a+0x1*0x70+0xb09*-0x1);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x7b1ece=-0x622+-0x290*0xc+0x24e2;_0x7b1ece<0x26a5+0x1*-0xda4+0xe3*-0x1c;++_0x7b1ece)if(!this['getProp']('f_rest_'+_0x7b1ece))return _0x7b1ece;return-0x1*-0xea3+-0x3b*0x35+0x23f*-0x1;})())]??0x2089+-0x2238+-0x1af*-0x1;}['calcMorton'+'Order'](){const _0x4ac62e=_0x4ce65e=>{let _0x54f66c=_0x4ce65e[-0x5*-0x1a8+0xc5*-0x10+0x408],_0x328615=_0x4ce65e[-0x1608+-0x71e+0x11f*0x1a];for(let _0x2b99a1=0x23cf+-0x3f*0x9c+0x296;_0x2b99a1<_0x4ce65e['length'];_0x2b99a1++)_0x4ce65e[_0x2b99a1]<_0x54f66c&&(_0x54f66c=_0x4ce65e[_0x2b99a1]),_0x4ce65e[_0x2b99a1]>_0x328615&&(_0x328615=_0x4ce65e[_0x2b99a1]);return{'min':_0x54f66c,'max':_0x328615};},_0x3a8a8d=(_0x50dfce,_0x1b2a56,_0x35f9ac)=>{const _0x4f26cf=_0x43fece=>(_0x43fece&=-0x2211+0x2063+0x5ad,_0x43fece=(_0x43fece^_0x43fece<<0x1bcb+-0x1b4c+-0x3*0x25)&0x694e015*0x23+-0x34f391a7*-0x1+-0x1f*0xe9bf99,_0x43fece=(_0x43fece^_0x43fece<<0x26ac+-0x933*-0x1+-0x2fd7)&0x48af56b+-0x1c8ffbe+0x3efa62*0x1,_0x43fece=(_0x43fece^_0x43fece<<0x1bcb+-0xbaa*0x1+-0x1*0x101d)&0xfc28a9+0xa9ea3d*0x7+-0x2955f91,_0x43fece=(_0x43fece^_0x43fece<<-0x3bd*-0xa+-0x4*-0x85+-0x2774)&0x109a1d3a+0xae7636a*0x1+-0x125cee5b,_0x43fece);return(_0x4f26cf(_0x35f9ac)<<-0x6*-0x5e4+0x478*-0x1+-0x1ede)+(_0x4f26cf(_0x1b2a56)<<-0x7*0x49+-0x327*0xa+-0xe*-0x265)+_0x4f26cf(_0x50dfce);},_0x17cd16=this['getProp']('x'),_0x1317be=this['getProp']('y'),_0x2fc286=this['getProp']('z'),{min:_0x95ce37,max:_0x15afee}=_0x4ac62e(_0x17cd16),{min:_0x445aa6,max:_0x570184}=_0x4ac62e(_0x1317be),{min:_0x11f126,max:_0xd10ad5}=_0x4ac62e(_0x2fc286),_0x3a9b5a=_0x95ce37===_0x15afee?-0x2*-0x8cc+-0x1a4a+0x35*0x2a:(0x2291+-0x49*0x4+0x1b*-0x117)/(_0x15afee-_0x95ce37),_0x231ec1=_0x445aa6===_0x570184?-0x3b*-0x53+-0x1069+-0x2b8:(-0x1*0x12ec+0xce2*-0x2+-0x30b*-0x10)/(_0x570184-_0x445aa6),_0x143220=_0x11f126===_0xd10ad5?-0x114a*-0x2+-0x1*-0x71f+0x5f5*-0x7:(-0x1dec+0x1515+0xcd7)/(_0xd10ad5-_0x11f126),_0x3ad3a3=new Map();for(let _0x2de016=0x29*-0xb5+0x12c1*-0x2+-0x1*-0x427f;_0x2de016<this['numSplats'];_0x2de016++){const _0x244d02=Math['min'](-0x81b+-0xd02+0x1*0x191c,Math['floor']((_0x17cd16[_0x2de016]-_0x95ce37)*_0x3a9b5a)),_0x30380f=Math['min'](-0x1080+-0x568*-0x6+0xbf1*-0x1,Math['floor']((_0x1317be[_0x2de016]-_0x445aa6)*_0x231ec1)),_0x24fecb=Math['min'](0x2b4+0x2*-0xd85+0x1c55,Math['floor']((_0x2fc286[_0x2de016]-_0x11f126)*_0x143220)),_0x83d912=_0x3a8a8d(_0x244d02,_0x30380f,_0x24fecb),_0x44bbbd=_0x3ad3a3['get'](_0x83d912);_0x44bbbd?_0x44bbbd['push'](_0x2de016):_0x3ad3a3['set'](_0x83d912,[_0x2de016]);}const _0x4391ce=Array['from'](_0x3ad3a3['keys']())['sort']((_0x55b9fc,_0x55accf)=>_0x55b9fc-_0x55accf),_0xbe5345=new Uint32Array(this['numSplats']);let _0x4c3df0=-0x7*-0x509+0x8f4+-0x2c33;for(let _0x3405df=0x1f*0xd+0x10c*0x10+-0x1253;_0x3405df<_0x4391ce['length'];++_0x3405df){const _0x469d7d=_0x3ad3a3['get'](_0x4391ce[_0x3405df]);for(let _0x2defb2=0x2465*0x1+0x1ead*-0x1+-0x5b8;_0x2defb2<_0x469d7d['length'];++_0x2defb2)_0xbe5345[_0x4c3df0++]=_0x469d7d[_0x2defb2];}return _0xbe5345;}['reorder'](_0x2c65a5){const _0x5d8a0e=new Map(),_0x4a9482=_0x3a42a4=>{if(_0x5d8a0e['has'](_0x3a42a4)){const _0x259698=_0x5d8a0e['get'](_0x3a42a4);return _0x5d8a0e['delete'](_0x3a42a4),_0x259698;}return new ArrayBuffer(_0x3a42a4);},_0x132f60=_0x4616cc=>{_0x5d8a0e['set'](_0x4616cc['byteLength'],_0x4616cc);},_0x3aa4d2=_0x4ba599=>{const _0x28628b=new _0x4ba599['constructo'+'r'](_0x4a9482(_0x4ba599['byteLength']));for(let _0x51d7b4=-0x23e8+-0x2*0xa49+0x1*0x387a;_0x51d7b4<_0x2c65a5['length'];_0x51d7b4++)_0x28628b[_0x51d7b4]=_0x4ba599[_0x2c65a5[_0x51d7b4]];return _0x132f60(_0x4ba599['buffer']),_0x28628b;};this['elements']['forEach'](_0x2f75cb=>{_0x2f75cb['properties']['forEach'](_0x52fb67=>{_0x52fb67['storage']&&(_0x52fb67['storage']=_0x3aa4d2(_0x52fb67['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}async function hb(){const _0x2457ed=new Float32Array(-0x1159+0xd*-0x1+-0x37b*-0x5);new Int32Array(_0x2457ed['buffer']);let _0x5c8d58=-0x165c+-0x89+0x16e5,_0x358ba2={};self['onmessage']=async _0x3ad4c7=>{const {data:_0x136496}=_0x3ad4c7;switch(_0x136496['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x16486f(_0x136496['properties'],_0x136496['timeIndex'],_0x136496['timeOption']);break;case'releaseSeq'+'Data':_0x42b859(_0x136496['index']);break;case'releaseAll'+'SeqData':_0x4272e6();break;case'destroyWor'+'ker':_0x1c7309();break;}};const _0xa5cb95=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x54726d=0xbe8+0x227e+-0x1*0x2e66;_0x54726d<-0xb96+-0xf85*-0x1+-0x1e1*0x2;++_0x54726d)if(!_0x358ba2['f_rest_'+_0x54726d])return _0x54726d;return-0xcb9+0x2b*-0xb5+0x2b4d;})())]??-0x25cd+0x2105+-0x4c8*-0x1),_0x16486f=(_0x4dfd07,_0x5552a2,_0x255685)=>{var _0x29dad8,_0x5dcf2b;_0x5c8d58+=(((_0x29dad8=_0x4dfd07['position'])==null?void(-0x780+-0x218+0x998):_0x29dad8['length'])??0x1*-0x1332+0x59a*-0x1+0x211*0xc)/(0x23de+-0x1cd0+-0x3*0x259),console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20append'+'GSplatData'+'\x20numSplats',_0x5c8d58,(((_0x5dcf2b=_0x4dfd07['position'])==null?void(0x7*0xf1+0x25eb+0xed6*-0x3):_0x5dcf2b['length'])??-0x1*-0x260e+-0x1e52+-0x7bc)/(-0x1*-0x1cc9+-0x5*0x20f+-0x127b));const _0x1b65ae=Object['keys'](_0x4dfd07);for(let _0x411774=0x2357+-0x1a57+-0x900;_0x411774<_0x1b65ae['length'];_0x411774++){const _0x2f87e8=_0x1b65ae[_0x411774],_0x2ccdff=_0x4dfd07[_0x2f87e8],_0x2330b9=_0x358ba2[_0x2f87e8]??new Float32Array(-0xb51*-0x1+-0x1571+0xa20);if(_0x2ccdff){let _0x1df6af=null;switch(_0x2f87e8){case'position':_0x1df6af=new Float32Array(_0x5c8d58*(-0x1945+0x3*0xc73+-0xc11));break;case'color_opac'+'ity':_0x1df6af=new Uint16Array(_0x5c8d58*(0x183*0xd+-0x1dc7+0xec*0xb));break;case'scale':_0x1df6af=new Uint16Array(_0x5c8d58*(0x1fe9*-0x1+-0x9f5*0x1+0x29e1));break;case'motion':_0x1df6af=new Float32Array(_0x5c8d58*(0xf*0xcb+-0x24b4+0x18d2));break;case'rotation':_0x1df6af=new Float32Array(_0x5c8d58*(-0x1*-0x9e9+-0xb0*0x37+-0x1bea*-0x1));break;default:_0x1df6af=new Float32Array(_0x5c8d58);break;}_0x1df6af['set'](_0x2330b9,0x114d+-0x6*-0x38f+0x1*-0x26a7),_0x1df6af['set'](_0x2ccdff,_0x2330b9['length']),_0x358ba2[_0x2f87e8]=_0x1df6af;}}const _0x1e121a={};Object['keys'](_0x358ba2)['forEach'](_0x4308da=>{_0x4308da==='scale'||_0x4308da==='color_opac'+'ity'?_0x1e121a[_0x4308da]=new Uint16Array(_0x358ba2[_0x4308da]['buffer']['slice']()):_0x1e121a[_0x4308da]=new Float32Array(_0x358ba2[_0x4308da]['buffer']['slice']());});const _0x359891=Object['keys'](_0x1e121a)['map'](_0x3fbf73=>_0x1e121a[_0x3fbf73]['buffer']),_0x15070a=_0x26bdcd(),_0x14b851=Object['keys'](_0x15070a)['map'](_0x28afdf=>_0x15070a[_0x28afdf]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x1e121a,'transformData':_0x15070a},_0x359891['concat'](_0x14b851));},_0x26bdcd=()=>{const _0x29f329=_0x358ba2['position']['length']/(0x7ee+0x4*-0x141+-0x2e7),_0x348582=_0x358ba2['position'],_0x466ffb=_0x358ba2['scale'],_0x5847f9=_0x358ba2['rotation'],_0x3df55e=_0x358ba2['motion'],_0x5edce8=_0x358ba2['t'],_0x420dbe=_0x358ba2['t_scale'],_0x3554b8=_0x358ba2['time_index'],_0xa17486=_0x358ba2['color_opac'+'ity'],_0x5d5f9d=(_0x5edce8==null?void(-0x1*-0x1b4c+-0x1cd*0xe+-0x216):_0x5edce8['length'])>-0x1fd*-0x1+-0x5b1+-0xc*-0x4f;let _0x1498e5=null,_0x3ab344=null,_0x22aa4f=null,_0x4690f4=null;_0x5d5f9d&&(_0x3ab344=new Float32Array(_0x29f329*(-0xe81+0x60+0x389*0x4)),_0x4690f4=new Float32Array(_0x29f329),_0x1498e5=new Float32Array(_0x3df55e['buffer']['slice']()),_0x22aa4f=new Float32Array(_0x3df55e['buffer']['slice']()));const _0x5e5246=new Float32Array(_0x348582['buffer']['slice']()),_0x1e88f5=new Float32Array(_0x348582['buffer']['slice']()),_0x5db857=new Uint16Array(_0xa17486['buffer']['slice']()),_0x35e47e=new Uint16Array(_0x466ffb['buffer']['slice']()),_0x13c189=new Float32Array(_0x5847f9['buffer']['slice']());for(let _0x580e30=0x20c5*0x1+0xda0+-0x6b*0x6f;_0x580e30<_0x29f329;++_0x580e30)_0x5d5f9d&&_0x3ab344&&_0x4690f4&&(_0x4690f4[_0x580e30]=_0x420dbe?Math['exp'](_0x420dbe[_0x580e30]):-0x1380+-0x1d60+0x30e0,_0x3ab344[_0x580e30*(0x1a06+0x1*0x1575+-0x2f78)+(0xab2+-0x1651+0xb9f)]=_0x5edce8?_0x5edce8[_0x580e30]:0xaa2*-0x1+0x25e+0x844,_0x3ab344[_0x580e30*(-0x53*-0x11+0x137*-0x1d+0x1dbb)+(0x1912*-0x1+-0x9ec+-0x121*-0x1f)]=_0x4690f4[_0x580e30]);const _0x4dd391=_0x44bb54();let _0x2e6d6e={'dataColor':_0x5db857,'dataCenters':_0x1e88f5,'dataPosition':_0x5e5246,'dataScale':_0x35e47e,'dataRotation':_0x13c189,..._0x4dd391};return _0x5d5f9d&&(_0x2e6d6e={..._0x2e6d6e,'dataMotion':_0x1498e5,'dataTime':_0x3ab344,'motion':_0x22aa4f,'tScaleArray':_0x4690f4,'muT':new Float32Array(_0x5edce8),'timeIndex':new Float32Array(_0x3554b8)}),_0x2e6d6e;},_0x3eeeb2=_0x554460=>{const _0x46cbcb=[];for(let _0x43e04f=-0x1730+0x1679+0x3d*0x3;_0x43e04f<_0x554460;++_0x43e04f)_0x46cbcb['push'](_0x358ba2['f_rest_'+_0x43e04f]);return _0x46cbcb;},_0x44bb54=()=>{const _0x315081=_0xa5cb95();if(_0x315081<=0xef*-0x4+-0x761*0x1+-0x239*-0x5)return{};const _0x3664ec=_0x358ba2['x']['length'],_0x4e953e=new Uint32Array(_0x3664ec*(-0x70f+0x24bf+-0x1dac)),_0x423194=new Uint32Array(_0x3664ec*(-0x557*0x1+-0x6b7+0x2*0x609)),_0x1592b9=new Uint32Array(_0x3664ec*(-0x119*0x14+0x1512+-0x2e*-0x5)),_0x3ea43=new Uint32Array(_0x3664ec*(0x2236+0xd*-0x297+-0x87)),_0x56d812={0x1:0x3,0x2:0x8,0x3:0xf}[_0x315081],_0x3c5e4d=_0x3eeeb2(_0x56d812*(-0x9c2+-0x430+0xdf5)),_0x2948a2=-0x1c03+-0x2*-0x8ea+0x1*0x122e,_0x3b2527=0x2587*0x1+-0x21e2+0x5a,_0xd3483d=new Float32Array(0xf9*-0xd+-0x2185*-0x1+-0x14df),_0x54a74f=new Uint32Array(_0xd3483d['buffer']),_0x206111=new Array(_0x56d812*(-0x33*-0x45+0x229f+-0x305b*0x1))['fill'](0x249f*0x1+0x1058+-0x34f7);for(let _0x43bce7=-0xf7d+-0x313*0x9+0x2b28;_0x43bce7<_0x3664ec;++_0x43bce7){for(let _0x199e46=0x2*-0x1e7+-0x14a0+0x186e;_0x199e46<_0x56d812;++_0x199e46)_0x206111[_0x199e46*(-0xf54+-0x1b8f+0x2ae6)]=_0x3c5e4d[_0x199e46][_0x43bce7],_0x206111[_0x199e46*(0x2*0x427+0xfc5+0x1b8*-0xe)+(0x397*-0x4+-0x1e78+0x2cd5)]=_0x3c5e4d[_0x199e46+_0x56d812][_0x43bce7],_0x206111[_0x199e46*(-0x1006+-0xae8+0x1af1)+(0xab4+0x2*-0x909+0x760)]=_0x3c5e4d[_0x199e46+_0x56d812*(0x1b5f+0xfa0+0x163*-0x1f)][_0x43bce7];let _0x14d033=_0x206111[-0x11*-0x245+0x328*-0x8+-0xd55];for(let _0x14acd7=-0x27f*0xa+0xd24*-0x2+0x3*0x1115;_0x14acd7<_0x56d812*(0x831+-0xe89*0x1+0x1*0x65b);++_0x14acd7)_0x14d033=Math['max'](_0x14d033,Math['abs'](_0x206111[_0x14acd7]));if(_0x14d033!==-0x734+0x3df*-0x1+0xb13){for(let _0x2bc8da=0x1*0x950+-0x2121+0x17d1*0x1;_0x2bc8da<_0x56d812;++_0x2bc8da)_0x206111[_0x2bc8da*(0x11f8+-0x2*-0xc2f+-0xc5*0x37)+(-0xfe3+0x7f*-0x1+0x1062)]=Math['max'](0x47+0x1feb+0x2032*-0x1,Math['min'](_0x2948a2,Math['floor']((_0x206111[_0x2bc8da*(0x2*0xedb+-0x1d33+-0x80)+(-0x1ef2+-0x63e*-0x1+-0x3e*-0x66)]/_0x14d033*(0xe3*0x9+0x16c2*-0x1+-0x27*-0x61+0.5)+(-0x10c9*-0x1+-0x16ee+0x8f*0xb+0.5))*_0x2948a2+(-0xb*-0xca+0xe6e+-0x171c+0.5)))),_0x206111[_0x2bc8da*(0x1*-0x1745+-0x1827+0x2f6f)+(0xa58+0x13e9+0x79*-0x40)]=Math['max'](-0x1d01+0x214d+-0x44c,Math['min'](_0x3b2527,Math['floor']((_0x206111[_0x2bc8da*(-0x20f*0x3+-0x17ba+-0x1*-0x1dea)+(-0x9e7+0x47+0x9a1)]/_0x14d033*(-0x10*-0xd+-0x1*-0x79f+0x7f*-0x11+0.5)+(0x20fa+-0x102c+-0x10ce+0.5))*_0x3b2527+(0x163c+-0x23e6+-0x247*-0x6+0.5)))),_0x206111[_0x2bc8da*(-0xe*-0x4d+-0x59a+0x167)+(-0x1*0x1163+0xf8+0x106d)]=Math['max'](0x756*-0x4+0xaae*-0x1+0x2806,Math['min'](_0x2948a2,Math['floor']((_0x206111[_0x2bc8da*(-0x1781+0x1f50+0x7cc*-0x1)+(-0xd9*-0x24+-0x2d6+-0x2*0xdd6)]/_0x14d033*(0x2572+0x3*-0x4c1+-0x172f+0.5)+(-0x846+-0x355*-0xb+0x1c61*-0x1+0.5))*_0x2948a2+(0x3*-0x792+-0x2209+0x38bf+0.5))));_0xd3483d[-0x1ad6+-0xed2+-0x8*-0x535]=_0x14d033,_0x4e953e[_0x43bce7*(-0xcfd+-0x1*-0x1850+-0xb4f)+(0x14e4+0x259c+-0x3a80)]=_0x54a74f[-0x1072+-0x1a6f+0x2ae1],_0x4e953e[_0x43bce7*(-0xc9d+0x2*-0xce9+0x33*0xc1)+(0x35a+-0x1cab+-0xca9*-0x2)]=_0x206111[0x48b*0x1+0x255f+-0x29ea]<<0x2*0x1136+0x2042+-0x1633*0x3|_0x206111[0x6b9+-0x2027+0x196f]<<-0x7*-0x17+-0x3*-0x3cb+-0xbf7|_0x206111[0x3*0x66f+-0x182a+0x4df],_0x4e953e[_0x43bce7*(-0x47*-0x61+0xb4e*-0x2+-0x447)+(0xc81+-0x281*-0x3+-0x1402)]=_0x206111[0xb41*0x3+-0x1f66+0x7*-0x56]<<0x19ff+-0x1*0x121d+-0x7cd|_0x206111[-0xb69+0x1331+-0x7c4]<<0x1565*-0x1+-0x1321+0x2891|_0x206111[0x3dd+0x1*0x47d+-0x855],_0x4e953e[_0x43bce7*(-0x41b*-0x4+0xc7d+-0x1ce5)+(0x154f*-0x1+0x2e*-0xb7+0x3634*0x1)]=_0x206111[0x470*0x3+-0x1ec2+0x68*0x2b]<<0x286*0x1+-0x131b*-0x2+-0x28a7|_0x206111[0x1cef*0x1+-0x104f+0xf*-0xd7]<<-0xb*-0x67+0x1e9d*0x1+-0x22ff|_0x206111[-0x2*-0x108e+0x228d*0x1+0x43a1*-0x1],_0x315081>-0x12d5*0x2+0x3b3+0x21f8&&(_0x423194[_0x43bce7*(0x155*-0x7+-0xc1f+0x1576)+(-0x1fad+-0x44b+0x23f8)]=_0x206111[-0xd9*0x25+-0x5b5*0x3+0x3085]<<0x65*0x2f+-0x36d*-0x4+0x1015*-0x2|_0x206111[0xc13+-0x1588+0xb*0xdd]<<0x1a9f+0xab2*0x2+-0x2ff8|_0x206111[0x2288+-0xcb7+-0x15c6],_0x423194[_0x43bce7*(-0x1654*0x1+-0x11f7+0x284f)+(0x1e1+-0x21ab+0x1fcb)]=_0x206111[-0xd0b+-0x3*-0xa12+-0x111f]<<0x2*-0x832+0xd73+0x306*0x1|_0x206111[-0x1*-0x20ff+-0x2*0x8ae+0x2a*-0x5f]<<-0x263c+0x106e*-0x1+0x5*0xaf1|_0x206111[-0x2*-0xcf4+0x5c*-0x61+-0x1*-0x902],_0x423194[_0x43bce7*(-0x301*0x9+0x401+0x49c*0x5)+(-0x15a7*0x1+-0x1a*0x6d+0x20bb)]=_0x206111[-0x269*0xf+-0x235f+0x5*0xe51]<<0x373*-0x2+-0xff2+0x16ed|_0x206111[0x9*-0x157+-0x6f6+-0x1*-0x1315]<<0x6*0x331+-0x1454+0x139*0x1|_0x206111[0x3c+-0x1277+0x4*0x493],_0x423194[_0x43bce7*(0x2b*-0x72+0x1d9b+-0xa71)+(0x225*-0x3+-0x10f1*-0x1+-0xa7f)]=_0x206111[0x17dd+-0xb41+-0xc8a]<<0x1a1*-0x1+-0x1b63+0x1d19|_0x206111[-0x160b+0x86*0x2f+-0x2*0x13e]<<-0x1586+-0x2*0x6+-0x1f7*-0xb|_0x206111[0x686+-0x31*-0x4a+-0x527*0x4],_0x315081>0x231+-0x197d+0x13a*0x13?(_0x1592b9[_0x43bce7*(-0x165b+0x76*0x3a+-0x45d)+(-0x2*0x689+0x19e+-0x4*-0x2dd)]=_0x206111[-0x1*0x11b7+-0x3c1+0x158d]<<-0x7*-0x565+-0x1*0xdd6+-0x2fb*0x8|_0x206111[-0x147d+0x1*0x317+0x6*0x2ea]<<0x2392+-0xdba*0x1+-0x1*0x15cd|_0x206111[-0xcef+-0x8*-0x287+-0x1*0x732],_0x1592b9[_0x43bce7*(-0x136b+-0x160a+0x3*0xdd3)+(0x1c3d+-0x7dc+-0x1460)]=_0x206111[0x21+0xbdf+-0xbe8]<<-0x7*-0x18e+0x1*0xb89+-0x1656|_0x206111[-0x4*-0x5cf+-0xdf*0x21+0x59c]<<0x4b*-0x4c+0x1356+0x1*0x2f9|_0x206111[-0xd61+-0x2612+0x338d],_0x1592b9[_0x43bce7*(-0x2b3+0x1690+-0x13d9*0x1)+(-0x1897+-0x34a*-0x2+-0x1205*-0x1)]=_0x206111[0x15d3+0x2679+-0x3c31]<<0x1*0x1b59+-0x1689+-0x7*0xad|_0x206111[0x19d7+0x293*-0x1+-0x1*0x1728]<<0x69e+-0x1123*0x1+0xa90|_0x206111[-0x1682+0xb90+0x1*0xb0f],_0x1592b9[_0x43bce7*(0x2cf+0x18f4*0x1+-0x1bbf*0x1)+(0x1925*0x1+0x1161+-0x2a83)]=_0x206111[-0x167+-0x2406+0x1*0x258b]<<-0x13d2+-0x3dd+0x12*0x152|_0x206111[-0x1eb2+-0x170a*0x1+0x1*0x35db]<<-0x1418*-0x1+0x22db*-0x1+0x2f6*0x5|_0x206111[0x80b+0x1367+0xd*-0x21a],_0x3ea43[_0x43bce7*(0x57+-0x1789+0x1*0x1736)+(-0x1*0x1a61+0x1*0xcc5+0x86*0x1a)]=_0x206111[-0x1d*0xd4+-0xd9d+-0x25c2*-0x1]<<-0xa46+0x7*-0x16f+0x1464|_0x206111[-0x186e+0x139*-0x19+0x3721]<<0x85*0x38+0x6*-0x23b+-0x3*0x539|_0x206111[-0x1*0x1421+-0x10a5+0x24e9],_0x3ea43[_0x43bce7*(0x1*-0x2626+0x2383+0x2a7)+(0x2e7+0x20bf+-0x23a5)]=_0x206111[-0x1d0a+0x354+0x89e*0x3]<<-0xbb8+-0x1*0x10b+0xcd8|_0x206111[0xbd3+-0x27*0x3+0x1*-0xb39]<<-0x43*-0x6+0x116*-0x1d+0x1df7|_0x206111[0xc0e*-0x2+-0xd57+-0x181*-0x19],_0x3ea43[_0x43bce7*(0x267c+0x20f*0x2+-0x2a96)+(0x1*0x1a91+0x26*-0xbe+0x1a5)]=_0x206111[-0x1*0xeef+-0x25f*-0x2+0x2*0x52c]<<-0x3b*0x62+-0x1e71+0x351c|_0x206111[-0x1be*0xd+0x139*-0x12+-0x4*-0xb34]<<-0x165+-0x60f*0x3+-0x1*-0x139d|_0x206111[-0x2*0x44f+-0x5ad*-0x1+0x31a],_0x3ea43[_0x43bce7*(-0x4ff*0x3+-0xf91*0x2+0x2e23)+(-0x52a*0x3+-0x24d9+0x1a2d*0x2)]=_0x206111[-0x689*-0x1+-0x184d+0x132*0xf]<<-0x26be+-0xb30+0x725*0x7|_0x206111[-0x309*-0x3+0xd8+-0x9c8]<<0x1cb5*0x1+-0x13f7+0x11*-0x83|_0x206111[-0x7c7+-0x11d+0x1d0*0x5]):_0x1592b9[_0x43bce7]=_0x206111[0x1a36+-0x1ed2+0x4b1]<<0x85c+0x125*-0xe+-0x7bf*-0x1|_0x206111[0x1377+0x3*0x7+-0x1376]<<0xfcc+-0x1*-0x2493+0x3454*-0x1|_0x206111[0x12b7*0x2+-0x5d1+-0x1f86]);}}return{'sh1to3Data':_0x4e953e,'sh4to7Data':_0x423194,'sh8to11Data':_0x1592b9,'sh12to15Data':_0x3ea43};},_0x42b859=_0x3453a0=>{if(!_0x358ba2['time_index'])return;const _0x1e40b3=_0x358ba2['time_index']['findIndex'](_0x4bb1e9=>_0x4bb1e9===_0x3453a0);let _0x2ea137=_0x358ba2['time_index']['findIndex']((_0x32c0ac,_0x5b36d8)=>_0x32c0ac!==_0x3453a0&&_0x5b36d8>_0x1e40b3);if(_0x2ea137===-(-0x1*-0x1dee+-0xcb3*0x1+0xa*-0x1b9)&&_0x1e40b3===-(-0x250+0x26db+-0x248a))return;_0x2ea137===-(0x2*0xe1d+-0x2f*-0xcd+-0xf*0x464)&&_0x1e40b3!==-(0x1*-0xb93+-0x1330+0x1ec4)&&(_0x2ea137=_0x358ba2['time_index']['length']),_0x5c8d58-=_0x2ea137-_0x1e40b3,console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20releas'+'eSeqData\x20n'+'umSplats',_0x5c8d58,_0x2ea137-_0x1e40b3);const _0x59e22c=Object['keys'](_0x358ba2);for(let _0x5e2ae3=-0x151*-0x5+-0x6*0x4bd+0x31f*0x7;_0x5e2ae3<_0x59e22c['length'];_0x5e2ae3++){const _0x331398=_0x59e22c[_0x5e2ae3],_0x507a28=_0x358ba2[_0x331398];if(_0x507a28){let _0x4f08ea=0x12+-0x929+0x8*0x123;switch(_0x331398){case'position':_0x4f08ea=-0x1*-0x2129+0x2d*0x16+-0x19c*0x17;break;case'color_opac'+'ity':_0x4f08ea=0x10ec+-0x5ee+-0xafa;break;case'scale':_0x4f08ea=-0xd*-0x3a+0x11ae+0x149d*-0x1;break;case'motion':_0x4f08ea=0x239d+0xc95+0x9a3*-0x5;break;case'rotation':_0x4f08ea=-0xc8b*0x2+-0x2d7*0x7+0x2cfa;break;default:_0x4f08ea=-0x1*-0x1d4d+-0x599*0x5+-0x14f;break;}const _0x23d3d5=new Float32Array(_0x5c8d58*_0x4f08ea);_0x1e40b3>0x2643+0xb00+-0x1*0x3143?(_0x23d3d5['set'](_0x507a28['subarray'](-0x1782+-0x3*0x943+0x334b,_0x1e40b3*_0x4f08ea),-0x6e+-0x24b1+0x251f),_0x23d3d5['set'](_0x507a28['subarray'](_0x2ea137*_0x4f08ea),_0x1e40b3*_0x4f08ea)):_0x23d3d5['set'](_0x507a28['subarray'](_0x2ea137*_0x4f08ea),-0x1*-0xfd5+-0x1*-0x2056+-0x302b),_0x358ba2[_0x331398]=_0x23d3d5;}}},_0x4272e6=()=>{const _0x40e597=Object['keys'](_0x358ba2);for(let _0x20cd9e=-0x4a2*0x1+-0xdf9+0xb*0x1b1;_0x20cd9e<_0x40e597['length'];_0x20cd9e++){const _0x34e819=_0x40e597[_0x20cd9e];_0x358ba2[_0x34e819]&&(_0x358ba2[_0x34e819]=[]);}},_0x1c7309=()=>{_0x358ba2={},_0x5c8d58=0x1d*0xd9+-0x6*0x1c7+0x7*-0x1fd;};}class cb extends pe{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+hb['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x69adb3,_0x267dc7,_0xcd9ae4,_0x5d751d=!(-0x24fc+0x2c*-0x5c+0x34cd)){var _0x4ccbd2,_0x53fc89;const _0xf3bed8={};return _0x69adb3['elements'][0x1ed6+-0x3*0x690+-0xb26]['properties']['forEach'](_0x5b3eed=>{_0xf3bed8[_0x5b3eed['name']]=_0x5b3eed['storage'];}),_0x5d751d?(_0x4ccbd2=this['worker'])==null||_0x4ccbd2['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0xf3bed8,'timeIndex':_0x267dc7,'timeOption':_0xcd9ae4},_0x69adb3['elements'][-0x2c3+-0x1cb+-0x16*-0x35]['properties']['map'](_0x436a3c=>_0x436a3c['storage']['buffer'])):(_0x53fc89=this['worker'])==null||_0x53fc89['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0xf3bed8,'timeIndex':_0x267dc7,'timeOption':_0xcd9ae4}),new Promise(_0x36654c=>{this['worker']['onmessage']=_0x5d749d=>{if(!this['worker'])return;const {data:_0x380650}=_0x5d749d;_0x380650['type']==='newAppendD'+'ata'&&_0x36654c(_0x380650);};});}async['releaseSeq'+'Data'](_0xc8c182){var _0x2cc5da;(_0x2cc5da=this['worker'])==null||_0x2cc5da['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0xc8c182});}async['releaseAll'+'SeqData'](){var _0x35a93a;(_0x35a93a=this['worker'])==null||_0x35a93a['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x47a981;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x47a981=this['worker'])==null||_0x47a981['terminate'](),this['worker']=null);}}const Xl=new te(),L_=new le(),db=new ie(0x57d+0xc5b*-0x1+-0x1*-0x6df,0x2547+0x2579+0xd7*-0x59,-0x1*0x2548+0xb5*-0x35+-0x4ac1*-0x1,0x247b+0x2376*0x1+-0x3*0x17fb+0.4),R_=-0x3*0x1dfc7+0x4aa64+0x40231;class fb{constructor(_0x4fe8a9,_0x156ba2,_0x155386,_0x320d49,_0x2e5f2e,_0x559d6e){const _0x77d7e7=_0x4fe8a9['getProp']('position'),_0x5237d5=_0x4fe8a9['getProp']('color_opac'+'ity'),_0x1ea2d1=_0x4fe8a9['getProp']('scale'),_0x25ba2a=_0x4fe8a9['getProp']('motion'),_0x5870bb=_0x4fe8a9['getProp']('rotation');this['read']=_0x4bcf1a=>{_0x156ba2&&_0x156ba2['set'](_0x77d7e7[_0x4bcf1a*(0x1107*0x2+0x1c1*-0x7+0x7*-0x31c)+(0x1*-0x48d+-0x7af+0xc3c)],_0x77d7e7[_0x4bcf1a*(0x7*-0x238+-0x1b94+-0x629*-0x7)+(-0x218+0x8d*-0x38+0x20f1)],_0x77d7e7[_0x4bcf1a*(-0xf9+-0x13d5+0x14d1)+(-0x6e+0x1f3d+0x629*-0x5)]),_0x155386&&_0x155386['set'](_0x5870bb[_0x4bcf1a*(-0x561*0x2+-0x2256+0x2d1b)+(0x86e+-0x372*0x6+0xc3e)],_0x5870bb[_0x4bcf1a*(-0x49+-0x8*-0x1de+-0x752*0x2)+(-0x1118+0x19b8+0x89f*-0x1)],_0x5870bb[_0x4bcf1a*(0x4b*-0x43+-0x17bd+0x1*0x2b61)+(-0x3a2+0x206e+-0x1cca)]),_0x320d49&&_0x320d49['set'](_0x1ea2d1[_0x4bcf1a*(0x6a*0x9+0x2141*0x1+-0x24f8)+(-0x170+-0xe6*-0x1+0x8a)],_0x1ea2d1[_0x4bcf1a*(0xa10+-0x15b*0x8+0xcb)+(-0x209*-0x4+0x1e5a+-0x267d*0x1)],_0x1ea2d1[_0x4bcf1a*(-0xc*0x33e+-0x346+0x2a31)+(0xf*-0x207+-0xb*0x2d4+0x3d87)]),_0x559d6e&&_0x25ba2a&&_0x559d6e['set'](_0x25ba2a[_0x4bcf1a*(-0x24b7*0x1+0x2107+0x1*0x3b3)+(-0x3c6+0x10ce+-0xd08)],_0x25ba2a[_0x4bcf1a*(0x1*0x2589+0xf65+-0x34eb)+(-0x6a*0x52+0x21ef+-0x3*-0x2)],_0x25ba2a[_0x4bcf1a*(0x962*0x1+0x190e+-0x226d)+(-0x799+0x1*0x18c5+0xa9*-0x1a)]),_0x2e5f2e&&_0x2e5f2e['set'](_0x5237d5[_0x4bcf1a*(0x194f+0x24a*0x8+0xb7*-0x3d)+(-0x207a+-0xd9*0x1d+0x1305*0x3)],_0x5237d5[_0x4bcf1a*(0x26d3+-0x104a+-0x1685)+(0x2*0x315+0x1fa7+-0x25d0)],_0x5237d5[_0x4bcf1a*(0x3b1+-0x4d7+0x1*0x12a)+(0x2115+-0x25e5+0x1*0x4d2)],_0x5237d5[_0x4bcf1a*(-0x7c1+0x3ee+0x3d7*0x1)+(-0x1b1*0x9+-0x2164+0x614*0x8)]);};}}const ub=(_0x10f1cc,_0x5d5d48,_0x3a9782)=>{L_['set'](_0x3a9782['x'],_0x3a9782['y'],_0x3a9782['z'],_0x3a9782['w'])['normalize'](),_0x10f1cc['setTRS'](_0x5d5d48,L_,I['ONE']);};class mb{constructor(_0x3aab94,_0xe3242f=[],_0x3d5a6e=[]){h(this,'elements'),h(this,'properties'),h(this,'numSplats',0xfb*-0x7+-0x9e4+-0x10c1*-0x1),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x177a17;(_0x177a17=this['dataWorker'])==null||_0x177a17['destroy'](),this['dataWorker']=null;});var _0x4f3e58,_0x4ff069,_0x30f505;this['elements']=_0x3aab94,this['properties']=_0x3d5a6e,this['numSplats']=((_0x4f3e58=this['getElement']('vertex'))==null?void(-0x1d06+0x1237+0x1*0xacf):_0x4f3e58['count'])??0xe8f*0x2+0x2*-0xb88+-0x136*0x5,this['comments']=_0xe3242f,this['is4D']=!!((_0x30f505=(_0x4ff069=this['getElement']('vertex'))==null?void(-0xad1*-0x1+-0xa4d+-0xc*0xb):_0x4ff069['properties']['find'](_0x201589=>_0x201589['name']==='t'))!=null&&_0x30f505['storage']);}async['appendGSpl'+'atData'](_0xa5981,_0x568cb6,_0x5581f6){var _0x24729f;let _0xaa767b=0x1f39+-0x29*0xd9+0x388;for(let _0x46cb90=-0x5fa*-0x3+0x24ec*-0x1+0x176*0xd;_0x46cb90<_0x5581f6['length']&&_0x568cb6>_0x5581f6[_0x46cb90];_0x46cb90+=-0x1a88+-0x5d5*0x4+0x1eb*0x1a)_0xaa767b=_0x46cb90/(0x1d83*-0x1+0x1*0x1557+0x82e);this['dataWorker']||(this['dataWorker']=new cb(),await this['dataWorker']['appendGSpl'+'atData'](this,0x10ce+0xd39+-0x1*0x1e07,_0x5581f6));const _0x969b2f=this['getElement']('vertex');_0x969b2f&&(_0x969b2f['count']=this['numSplats']);const _0x34d31e=await this['dataWorker']['appendGSpl'+'atData'](_0xa5981,_0xaa767b,_0x5581f6,!(-0x2361+-0xa*-0x15d+-0x125*-0x13)),_0x4445b0=_0x34d31e['properties'],_0x25153f=((_0x24729f=this['getElement']('vertex'))==null?void(0x15fc+-0x5*0x3c1+0x337*-0x1):_0x24729f['properties'])??[];for(const _0xc0059c in _0x4445b0){const _0x4b07a1=_0x25153f['find'](_0x44ebcb=>_0x44ebcb['name']===_0xc0059c);_0x4b07a1?_0x4b07a1['storage']=_0x4445b0[_0xc0059c]:_0x25153f['push']({'type':'float','name':_0xc0059c,'storage':_0x4445b0[_0xc0059c],'byteSize':0x4});}this['transformD'+'ata']=_0x34d31e['transformD'+'ata'],this['numSplats']=_0x4445b0['position']['length']/(0x1f99+-0x5f*0x4d+-0x303);}async['releaseSeq'+'Data'](_0x47c37e){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'leaseSeqDa'+'ta',_0x47c37e),this['dataWorker']['releaseSeq'+'Data'](_0x47c37e),this;}async['releaseAll'+'SeqData'](){var _0x55d097;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'lease\x20all\x20'+'SeqData'),(_0x55d097=this['dataWorker'])==null||_0x55d097['releaseAll'+'SeqData'](),this;}['getProp'](_0x337fb7,_0x27773f='vertex'){var _0x881432,_0x1d8c2a;return(_0x1d8c2a=(_0x881432=this['getElement'](_0x27773f))==null?void(-0x1*0xd8b+-0x17f5+-0x40*-0x96):_0x881432['properties']['find'](_0x553dc7=>_0x553dc7['name']===_0x337fb7))==null?void(-0x20dc*-0x1+0x1fce+-0x40aa):_0x1d8c2a['storage'];}['getElement'](_0x3bfee2){return this['elements']['find'](_0x5329d5=>_0x5329d5['name']===_0x3bfee2);}['createIter'](_0x4cbe2b,_0x556238,_0x46775c,_0x461a32,_0x1a34de){return new fb(this,_0x4cbe2b,_0x556238,_0x46775c,_0x461a32,_0x1a34de);}['calcAabb'](_0x299cdd,_0x43411b){let _0x10bfd7=0xcfe+-0xe6*0xf+0x2*0x3e,_0x1c883a=-0x639*-0x1+0x1e48+-0x537*0x7,_0x1a8a38=-0x103*0x4+-0xa3*-0x11+0x1*-0x6c7,_0x3c7414=-0x1*-0x1e86+-0x12*-0x19b+0x1db6*-0x2,_0x12c4f1=0x2669+-0x1*0x5a1+0x832*-0x4,_0x3ed0b3=0x4*-0x64d+0xbe0+-0x4*-0x355,_0x1006b0=!(0x1e09+-0x1*0x152b+-0x8de);const _0x570889=this['getProp']('position'),_0x1f9f61=this['getProp']('scale');for(let _0x2566a7=-0x3*0x50d+0x1b14+-0xbed;_0x2566a7<this['numSplats'];++_0x2566a7){if(_0x43411b&&!_0x43411b(_0x2566a7))continue;const _0x387538=_0x570889[_0x2566a7*(-0x1*0x15c6+0x4e9*-0x2+-0x1*-0x1f9b)+(0x26a2+0x24bc+-0x4b5e)],_0x3289a9=_0x570889[_0x2566a7*(0x14*-0x10a+0xfab+-0xa4*-0x8)+(-0x17e*0x11+-0xaf0+0x244f)],_0x506025=_0x570889[_0x2566a7*(0x3d*0x63+0x20cf+-0x3863)+(0xc7*-0x1a+0xc36*0x2+-0x434)],_0x33fd16=Math['max'](_0x1f9f61[_0x2566a7*(0x213b+0x24b5*0x1+-0x45ed)+(0x296*0xe+-0x1e80+-0x5b4)],_0x1f9f61[_0x2566a7*(-0x1*0x264b+-0x2243+0x4891)+(0x4b*-0x4d+-0x2*0x463+0x1f56)],_0x1f9f61[_0x2566a7*(-0x4d+0x1*-0x8e0+-0x18*-0x62)+(-0x144*-0xb+-0x1e61+-0x119*-0xf)]);if(!isFinite(_0x387538)||!isFinite(_0x3289a9)||!isFinite(_0x506025)||!isFinite(_0x33fd16))continue;const _0x30c60f=(0xbe1*0x1+0xc97+-0x1876)*Math['exp'](_0x33fd16);_0x1006b0?(_0x1006b0=!(0x18fa+0x14*-0x50+0x1*-0x12b9),_0x10bfd7=_0x387538-_0x30c60f,_0x1c883a=_0x3289a9-_0x30c60f,_0x1a8a38=_0x506025-_0x30c60f,_0x3c7414=_0x387538+_0x30c60f,_0x12c4f1=_0x3289a9+_0x30c60f,_0x3ed0b3=_0x506025+_0x30c60f):(_0x10bfd7=Math['min'](_0x10bfd7,_0x387538-_0x30c60f),_0x1c883a=Math['min'](_0x1c883a,_0x3289a9-_0x30c60f),_0x1a8a38=Math['min'](_0x1a8a38,_0x506025-_0x30c60f),_0x3c7414=Math['max'](_0x3c7414,_0x387538+_0x30c60f),_0x12c4f1=Math['max'](_0x12c4f1,_0x3289a9+_0x30c60f),_0x3ed0b3=Math['max'](_0x3ed0b3,_0x506025+_0x30c60f));}return _0x1006b0||(_0x299cdd['center']['set']((_0x10bfd7+_0x3c7414)*(0x1*-0x1082+0x16e+0xf14+0.5),(_0x1c883a+_0x12c4f1)*(-0x1249*-0x2+0x1716+-0x3ba8+0.5),(_0x1a8a38+_0x3ed0b3)*(0x4*-0x64d+-0x1f*0x6+0x19ee+0.5)),_0x299cdd['halfExtent'+'s']['set']((_0x3c7414-_0x10bfd7)*(-0x2707+0x20a7+-0x33*-0x20+0.5),(_0x12c4f1-_0x1c883a)*(-0x8ad+0x157b+-0xcce+0.5),(_0x3ed0b3-_0x1a8a38)*(0x1cb1+0x1928+0x397*-0xf+0.5))),!_0x1006b0;}['yieldToMai'+'n'](){var _0x5d3561;return(_0x5d3561=globalThis['scheduler'])!=null&&_0x5d3561['yield']?globalThis['scheduler']['yield']():new Promise(_0x56d36f=>{setTimeout(_0x56d36f,0x151b+0xd4c+0x2267*-0x1);});}async['getCenters'](_0x4bb655){const _0x47b8a9=this['getProp']('x'),_0x4dbb66=this['getProp']('y'),_0x4622ae=this['getProp']('z');for(let _0x5e8cb6=-0x49a+-0x2544+-0x1d2*-0x17;_0x5e8cb6<this['numSplats'];++_0x5e8cb6)_0x4bb655[_0x5e8cb6*(0x2*-0x277+0x1310*-0x1+-0x5*-0x4cd)+(0x25bb*0x1+-0x36d+0x1*-0x224e)]=_0x47b8a9[_0x5e8cb6],_0x4bb655[_0x5e8cb6*(-0xa52*-0x3+0x1*0x157c+-0x346f)+(0x1294+-0x1dd3*0x1+-0x24*-0x50)]=_0x4dbb66[_0x5e8cb6],_0x4bb655[_0x5e8cb6*(-0x21e*-0x1+0x1784+0x3a9*-0x7)+(0x1*-0x116f+0xb*-0x169+0x3*0xafc)]=_0x4622ae[_0x5e8cb6],_0x5e8cb6%R_===-0x1a1*-0xa+-0x167+-0xee3&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x1917cd;if((_0x1917cd=this['transformD'+'ata'])!=null&&_0x1917cd['muT'])return this['transformD'+'ata']['muT'];const _0x5668c5=this['getProp']('t');return _0x5668c5?new Float32Array(_0x5668c5):void(-0x1b79+0x61b+0x155e);}async['getTScale'](){const _0x39578f=this['getProp']('t_scale');if(!_0x39578f)return;const _0x1aa1d3=new Float32Array(this['numSplats']);for(let _0xcfd7aa=-0x8d6+-0x3*-0x2fc+0xa*-0x3;_0xcfd7aa<this['numSplats'];++_0xcfd7aa)_0x1aa1d3[_0xcfd7aa]=Math['exp'](_0x39578f[_0xcfd7aa]),_0xcfd7aa%R_===-0xa3*-0x3a+0x52d+-0x2a1b&&await this['yieldToMai'+'n']();return _0x1aa1d3;}['getMotion'](_0xc53c65){const _0x18e6dd=this['getProp']('motion');_0x18e6dd&&new Float32Array(_0x18e6dd['buffer']['slice']());}['getTimeInd'+'ex'](){var _0x634bae;if((_0x634bae=this['transformD'+'ata'])!=null&&_0x634bae['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x1e3f3f=this['getProp']('time_index');if(_0x1e3f3f)return new Float32Array(_0x1e3f3f);}['calcFocalP'+'oint'](_0x484a0e,_0x3ba365){const _0x139d3b=this['getProp']('position'),_0x128d54=this['getProp']('scale');_0x484a0e['x']=0xd*0x193+0x15ef+-0x1533*0x2,_0x484a0e['y']=-0x106f+0xe*-0xa+0x1*0x10fb,_0x484a0e['z']=0x8cc*-0x3+-0x8*-0x1e9+0xb1c;let _0x3e068a=-0x10c5+0x2*-0x871+-0x1*-0x21a7;for(let _0x3469ca=0x1ba7+-0x38d*0x7+-0x2cc;_0x3469ca<this['numSplats'];++_0x3469ca){if(_0x3ba365&&!_0x3ba365(_0x3469ca))continue;const _0x25ec85=_0x139d3b[_0x3469ca*(-0x79e*0x3+0x84a+0x11f*0xd)+(0x2*0x10a1+-0x1*0x1a36+-0x70c)],_0xbf6cfa=_0x139d3b[_0x3469ca*(0x52*0x3a+-0x79c*-0x2+-0x21c9)+(0x2*0x4d+-0xec+0x53)],_0x1396c7=_0x139d3b[_0x3469ca*(0x21b8+-0x3*0x29a+-0x19e7)+(-0x6*0x35c+0x1*0x26ef+-0x12c5)];if(!isFinite(_0x25ec85)||!isFinite(_0xbf6cfa)||!isFinite(_0x1396c7))continue;const _0x4ccc04=(0x101f+0xb*-0x281+0x75*0x19)/(-0x1c3+-0x1cd8+0x1e9c+Math['max'](_0x128d54[_0x3469ca*(0x1c5f+0xaf*0x1c+-0x10*0x2f8)+(0x1*0x411+-0x1927+0x1516)],_0x128d54[_0x3469ca*(0x1045+-0x1bfe+0x4*0x2ef)+(-0x8c4+0x1ea2+-0x15dd)],_0x128d54[_0x3469ca*(0x107a+0xf3e+-0x1*0x1fb5)+(0x1a56+0x17c1+-0x3215)]));_0x484a0e['x']+=_0x25ec85*_0x4ccc04,_0x484a0e['y']+=_0xbf6cfa*_0x4ccc04,_0x484a0e['z']+=_0x1396c7*_0x4ccc04,_0x3e068a+=_0x4ccc04;}_0x484a0e['mulScalar']((-0xb2*0x6+-0x4*0x337+0x1109)/_0x3e068a);}['renderWire'+'frameBound'+'s'](_0x2ef106,_0x245934){const _0x2c06ea=new I(),_0x31dd19=new le(),_0x52ed7a=new I(),_0xe4f92f=new I(),_0x2a7f48=new I(),_0x1c8410=this['createIter'](_0x2c06ea,_0x31dd19,_0x52ed7a);for(let _0x3f9015=0x1*-0x83f+0x17*0xbb+0x6*-0x16d;_0x3f9015<this['numSplats'];++_0x3f9015)_0x1c8410['read'](_0x3f9015),ub(Xl,_0x2c06ea,_0x31dd19),Xl['mul2'](_0x245934,Xl),_0xe4f92f['set'](_0x52ed7a['x']*-(-0x6*-0x41d+0xbde*0x1+-0x248a),_0x52ed7a['y']*-(-0x1ca7+0xe43+0xe66),_0x52ed7a['z']*-(0x20b6+0x950+-0x4*0xa81)),_0x2a7f48['set'](_0x52ed7a['x']*(-0x2608+-0xbe1+-0xd*-0x3d7),_0x52ed7a['y']*(0x23bb+0x25*-0x62+-0x158f),_0x52ed7a['z']*(-0x1387*0x1+-0x2c3+0x164c)),_0x2ef106['immediate']['drawWireAl'+'ignedBox'](_0xe4f92f,_0x2a7f48,db,!(0x2*0xed1+0x112f*-0x2+-0x25e*-0x2),_0x2ef106['defaultDra'+'wLayer'],Xl);}get['isCompress'+'ed'](){return!(0xc32+-0x2137+0xcf*0x1a);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x166f71=0x1f8a+-0x14b5+-0xad5*0x1;_0x166f71<-0x1*0xb1+-0x1*0x172+0x250;++_0x166f71)if(!this['getProp']('f_rest_'+_0x166f71))return _0x166f71;return-0x1*0x15f2+-0x1*0xe6b+0x248a;})())]??-0x26f8+-0x3*0x33d+0x46d*0xb;}['calcMorton'+'Order'](){const _0x4f2e02=_0x29412d=>{let _0x11eb8b=_0x29412d[-0x4e9+0x1c87+-0x179e],_0xafc2f9=_0x29412d[-0x1261*0x1+-0xb9*-0x25+-0x5*0x1ac];for(let _0x48de29=-0x26e0+-0x1*0x2345+-0x1*-0x4a26;_0x48de29<_0x29412d['length'];_0x48de29++)_0x29412d[_0x48de29]<_0x11eb8b&&(_0x11eb8b=_0x29412d[_0x48de29]),_0x29412d[_0x48de29]>_0xafc2f9&&(_0xafc2f9=_0x29412d[_0x48de29]);return{'min':_0x11eb8b,'max':_0xafc2f9};},_0xc2c736=(_0x1d3493,_0xe00e,_0x4a3418)=>{const _0x17e070=_0x13e6e0=>(_0x13e6e0&=-0x16aa+-0x1*0x787+-0x8*-0x446,_0x13e6e0=(_0x13e6e0^_0x13e6e0<<0x1*-0xdbe+-0x179b+0x2569)&-0x261*0x9e109d+0x5b*-0x174539f+0x4a17*0xa4da7,_0x13e6e0=(_0x13e6e0^_0x13e6e0<<-0x23f8+-0x269c+0x1*0x4a9c)&-0x2255a60+0x49d0b2d+0x893f42,_0x13e6e0=(_0x13e6e0^_0x13e6e0<<-0x2204+-0x4*0x5f2+-0x4*-0xe74)&0x3bb199e+0x43c810d*-0x1+-0x1*-0x38d9832,_0x13e6e0=(_0x13e6e0^_0x13e6e0<<-0xaac+-0x1b59*-0x1+0x11*-0xfb)&-0x1*-0xc94815f+-0x624b*0xf45+-0x3*-0xcefc0b,_0x13e6e0);return(_0x17e070(_0x4a3418)<<-0x633+-0x12*0xab+-0xd*-0x167)+(_0x17e070(_0xe00e)<<-0x1702+0x95+0x166e)+_0x17e070(_0x1d3493);},_0x243d4d=this['getProp']('x'),_0xa86d24=this['getProp']('y'),_0x2ec264=this['getProp']('z'),{min:_0x363d5c,max:_0x3d8a28}=_0x4f2e02(_0x243d4d),{min:_0x107ad6,max:_0x1d33ba}=_0x4f2e02(_0xa86d24),{min:_0x52f421,max:_0x4e8845}=_0x4f2e02(_0x2ec264),_0x14c739=_0x363d5c===_0x3d8a28?-0x2*-0x909+-0x5f*0x54+-0x4e*-0x2b:(-0x15b8+0x9d3+0xfe5)/(_0x3d8a28-_0x363d5c),_0x4b12d3=_0x107ad6===_0x1d33ba?0x3*-0x751+-0xc65*0x3+0x3a*0x105:(-0x6*-0x4de+0x5c6*-0x1+0x33d*-0x6)/(_0x1d33ba-_0x107ad6),_0x370a27=_0x52f421===_0x4e8845?0xd1e+0xcf8+-0x1a16:(-0x1337+0x1bf*-0xd+-0x12*-0x28d)/(_0x4e8845-_0x52f421),_0x1d21c7=new Map();for(let _0x427add=0x2411+0xe5d+0x1*-0x326e;_0x427add<this['numSplats'];_0x427add++){const _0x1fb5f5=Math['min'](-0x52*0x5+-0xd13*-0x1+0x27e*-0x3,Math['floor']((_0x243d4d[_0x427add]-_0x363d5c)*_0x14c739)),_0x547a30=Math['min'](-0x1439+-0xcf2*-0x1+-0x1*-0xb46,Math['floor']((_0xa86d24[_0x427add]-_0x107ad6)*_0x4b12d3)),_0x4319bf=Math['min'](-0x3*0x9ad+0x2023+0xe3,Math['floor']((_0x2ec264[_0x427add]-_0x52f421)*_0x370a27)),_0x178c74=_0xc2c736(_0x1fb5f5,_0x547a30,_0x4319bf),_0x314cd0=_0x1d21c7['get'](_0x178c74);_0x314cd0?_0x314cd0['push'](_0x427add):_0x1d21c7['set'](_0x178c74,[_0x427add]);}const _0x5df4ed=Array['from'](_0x1d21c7['keys']())['sort']((_0x1512d9,_0x24a24e)=>_0x1512d9-_0x24a24e),_0x3c510a=new Uint32Array(this['numSplats']);let _0x5ad2d3=-0x61*-0xe+-0x1212*0x1+0xac*0x13;for(let _0xb20067=-0x219b+0x11*-0x6a+0x28a5;_0xb20067<_0x5df4ed['length'];++_0xb20067){const _0x5c422a=_0x1d21c7['get'](_0x5df4ed[_0xb20067]);for(let _0x7113d6=-0x5f6+0x11b4*0x1+-0x12*0xa7;_0x7113d6<_0x5c422a['length'];++_0x7113d6)_0x3c510a[_0x5ad2d3++]=_0x5c422a[_0x7113d6];}return _0x3c510a;}['reorder'](_0x470036){const _0x4e82b1=new Map(),_0x5acda1=_0x2933f8=>{if(_0x4e82b1['has'](_0x2933f8)){const _0x4158bd=_0x4e82b1['get'](_0x2933f8);return _0x4e82b1['delete'](_0x2933f8),_0x4158bd;}return new ArrayBuffer(_0x2933f8);},_0xd09e06=_0x522f26=>{_0x4e82b1['set'](_0x522f26['byteLength'],_0x522f26);},_0x153945=_0x12d14c=>{const _0x463c70=new _0x12d14c['constructo'+'r'](_0x5acda1(_0x12d14c['byteLength']));for(let _0x112302=0x1ada*0x1+0x6d*-0x57+0xa31;_0x112302<_0x470036['length'];_0x112302++)_0x463c70[_0x112302]=_0x12d14c[_0x470036[_0x112302]];return _0xd09e06(_0x12d14c['buffer']),_0x463c70;};this['elements']['forEach'](_0x3cb82c=>{_0x3cb82c['properties']['forEach'](_0x56a088=>{_0x56a088['storage']&&(_0x56a088['storage']=_0x153945(_0x56a088['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}const pb='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20void\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(vert'+'ex_positio'+'n,\x200.0,\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a',_b='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'vec4\x20packR'+'gb(vec3\x20v)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uvec3\x20vb\x20'+'=\x20uvec3(cl'+'amp(v,\x20vec'+'3(0.0),\x20ve'+'c3(1.0))\x20*'+'\x20vec3(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uint\x20bits\x20'+'=\x20(vb.x\x20<<'+'\x2021)\x20|\x20(vb'+'.y\x20<<\x2010)\x20'+'|\x20vb.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4((u'+'vec4(bits)'+'\x20>>\x20uvec4('+'24,\x2016,\x208,'+'\x200))\x20&\x20uve'+'c4(0xff))\x20'+'/\x20vec4(255'+'.0);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20vec3\x20dir'+';\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20sampler2'+'D\x20centroid'+'s;\x0a\x20\x20\x20\x20uni'+'form\x20mediu'+'mp\x20float\x20s'+'hN_mins;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20f'+'loat\x20shN_m'+'axs;\x0a\x0a\x20\x20\x20\x20'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20ivec'+'2\x20uv\x20=\x20ive'+'c2(gl_Frag'+'Coord.xy)\x20'+'*\x20ivec2(SH'+'_COEFFS,\x201'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20mediump\x20v'+'ec3\x20coeffi'+'cients[SH_'+'COEFFS];\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(int\x20i\x20=\x20'+'0;\x20i\x20<\x20SH_'+'COEFFS;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20s\x20=\x20texe'+'lFetch(cen'+'troids,\x20iv'+'ec2(uv.x\x20+'+'\x20i,\x20uv.y),'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20coefficie'+'nts[i]\x20=\x20m'+'ix(vec3(sh'+'N_mins),\x20v'+'ec3(shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20packRgb'+'(evalSH(co'+'efficients'+',\x20dir)\x20*\x200'+('.25\x20+\x200.5)'+';\x0a\x20\x20\x20\x20}\x0a'),gb='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput:\x20Vert'+'exInput)\x20-'+'>\x20VertexOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Ver'+'texOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a',Sb='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'fn\x20packRgb'+'(v:\x20vec3f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vb\x20=\x20v'+'ec3u(clamp'+'(v,\x20vec3f('+'0.0),\x20vec3'+'f(1.0))\x20*\x20'+'vec3f(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20bits\x20='+'\x20dot(vb,\x20v'+'ec3u(1\x20<<\x20'+'21,\x201\x20<<\x201'+'0,\x201));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(('+'vec4u(bits'+')\x20>>\x20vec4u'+'(24,\x2016,\x208'+',\x200))\x20&\x20ve'+'c4u(0xff))'+'\x20/\x20vec4f(2'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20un'+'iform\x20dir:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'shN_mins:\x20'+'f32;\x0a\x20\x20\x20\x20u'+'niform\x20shN'+'_maxs:\x20f32'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20centroids'+':\x20texture_'+'2d<f32>;\x0a\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input:'+'\x20FragmentI'+'nput)\x20->\x20F'+'ragmentOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20uv\x20=\x20'+'vec2i(inpu'+'t.position'+'.xy)\x20*\x20vec'+'2i(SH_COEF'+'FS,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'coefficien'+'ts:\x20array<'+'vec3f,\x20SH_'+'COEFFS>;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x200;\x20i\x20'+'<\x20SH_COEFF'+'S;\x20i++)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s:\x20v'+'ec3f\x20=\x20tex'+'tureLoad(c'+'entroids,\x20'+'vec2i(uv.x'+'\x20+\x20i,\x20uv.y'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20coeffic'+'ients[i]\x20='+'\x20mix(vec3f'+'(uniform.s'+'hN_mins),\x20'+'vec3f(unif'+('orm.shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20packRgb'+'(evalSH(&c'+'oefficient'+'s,\x20uniform'+'.dir)\x20*\x200.'+'25\x20+\x200.5);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20}'+'\x0a'),yb='\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20sampler2D'+'\x20sh0;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x20\x20\x20\x20u'+'niform\x20med'+'iump\x20sampl'+'er2D\x20sh_re'+'sult;\x0a\x0a\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20sh0_mi'+'ns;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20sh0_maxs;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20SH_C0\x20=\x20'+'0.28209479'+'177387814;'+'\x0a\x0a\x20\x20\x20\x20//\x20u'+'npack\x2011,\x20'+'11,\x2010\x20nor'+'malized\x20va'+'lue\x20from\x20r'+'gba8\x20textu'+'re\x20sample\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackRgb(v'+'ec4\x20v)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uve'+'c4\x20uv\x20=\x20uv'+'ec4(v\x20*\x2025'+'5.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uint\x20b'+'its\x20=\x20(uv.'+'x\x20<<\x2024)\x20|'+'\x20(uv.y\x20<<\x20'+'16)\x20|\x20(uv.'+'z\x20<<\x208)\x20|\x20'+'uv.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uvec3\x20'+'vb\x20=\x20(uvec'+'3(bits)\x20>>'+'\x20uvec3(21,'+'\x2010,\x200))\x20&'+'\x20uvec3(0x7'+'ffu,\x200x7ff'+'u,\x200x3ffu)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3(vb)\x20/\x20ve'+'c3(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20baseSampl'+'e\x20=\x20mix(sh'+'0_mins,\x20sh'+'0_maxs,\x20te'+'xelFetch(s'+'h0,\x20source'+'.uv,\x200));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20resolve\x20'+'base\x20color'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4\x20base\x20='+'\x20vec4(vec3'+'(0.5)\x20+\x20ba'+'seSample.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'baseSample'+'.w)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'xtract\x20sph'+'erical\x20har'+'monics\x20pal'+'ette\x20index'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20label'+'Sample\x20=\x20i'+'vec2(texel'+'Fetch(sh_l'+'abels,\x20sou'+'rce.uv,\x200)'+'.xy\x20*\x20255.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20int\x20n\x20=\x20'+('labelSampl'+'e.x\x20+\x20labe'+'lSample.y\x20'+'*\x20256;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20shSample\x20'+'=\x20texelFet'+'ch(sh_resu'+'lt,\x20ivec2('+'n\x20%\x2064,\x20n\x20'+'/\x2064),\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20sh\x20=\x20('+'unpackRgb('+'shSample)\x20'+'-\x20vec3(0.5'+'))\x20*\x204.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'(base.xyz\x20'+'+\x20sh,\x20base'+'.w);\x0a\x20\x20\x20\x20}'+'\x0a'),vb='\x0a\x20\x20\x20\x20var\x20s'+'h0:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'h_labels:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20sh_re'+'sult:\x20text'+'ure_2d<f32'+'>;\x0a\x0a\x20\x20\x20\x20un'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20sh0_m'+'axs:\x20vec4f'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20SH_C0:\x20'+'f32\x20=\x200.28'+'2094791773'+'87814;\x0a\x0a\x20\x20'+'\x20\x20//\x20unpac'+'k\x2011,\x2011,\x20'+'10\x20normali'+'zed\x20value\x20'+'from\x20rgba8'+'\x20texture\x20s'+'ample\x0a\x20\x20\x20\x20'+'fn\x20unpackR'+'gb(v:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20bits'+'\x20=\x20dot(vec'+'4u(v\x20*\x20255'+'.0),\x20vec4u'+'(1u\x20<<\x2024,'+'\x201u\x20<<\x2016,'+'\x201u\x20<<\x208,\x20'+'1u));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20vb'+'\x20=\x20(vec3u('+'bits)\x20>>\x20v'+'ec3u(21,\x201'+'0,\x200))\x20&\x20v'+'ec3u(0x7ff'+'u,\x200x7ffu,'+'\x200x3ffu);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec3f'+'(vb)\x20/\x20vec'+'3f(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20f'+'n\x20readColo'+'r(source:\x20'+'ptr<functi'+'on,\x20SplatS'+'ource>)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'baseSample'+':\x20vec4f\x20=\x20'+'mix(unifor'+'m.sh0_mins'+',\x20uniform.'+'sh0_maxs,\x20'+'textureLoa'+'d(sh0,\x20sou'+'rce.uv,\x200)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20base\x20'+'=\x20vec4f(ve'+'c3f(0.5)\x20+'+'\x20baseSampl'+'e.xyz\x20*\x20SH'+'_C0,\x201.0\x20/'+'\x20(1.0\x20+\x20ex'+'p(-baseSam'+'ple.w)));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20extract\x20'+'spherical\x20'+'harmonics\x20'+'palette\x20in'+'dex\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20labe'+'lSample:\x20v'+'ec2i\x20=\x20vec'+'2i(texture'+'Load(sh_la'+'bels,\x20sour'+'ce.uv,\x200).'+'xy\x20*\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20n\x20=\x20l'+('abelSample'+'.x\x20+\x20label'+'Sample.y\x20*'+'\x20256;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hSample:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(s'+'h_result,\x20'+'vec2i(n\x20%\x20'+'64,\x20n\x20/\x2064'+'),\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'h:\x20vec3f\x20='+'\x20(unpackRg'+'b(shSample'+')\x20-\x20vec3f('+'0.5))\x20*\x204.'+'0;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(base.'+'xyz\x20+\x20sh,\x20'+'base.w);\x0a\x20'+'\x20\x20\x20}\x0a'),xb=(_0x115838,_0x47daae)=>{for(const _0x13d517 in _0x47daae)_0x115838['resolve'](_0x13d517)['setValue'](_0x47daae[_0x13d517]);};class Tb extends fs{constructor(){super(...arguments),h(this,'executeCal'+'lback',null);}['execute'](){var _0x51751e;(_0x51751e=this['executeCal'+'lback'])==null||_0x51751e['call'](this);}}const O_=new te(),Yn=new I();class wb{constructor(_0x535d2e,_0x313c28){h(this,'prevDir',new I()),h(this,'updateMode','enable'),(this['device']=_0x535d2e,this['gsplatInst'+'ance']=_0x313c28);const {resource:_0x8909c4}=_0x313c28,_0x1374c3=new Map(Ce['get'](_0x535d2e,_0x535d2e['isWebGPU']?'wgsl':'glsl'));this['shader']=Ut['createShad'+'er'](_0x535d2e,{'uniqueName':'gsplatReso'+'lveSH','vertexGLSL':pb,'fragmentGLSL':_b,'vertexWGSL':gb,'fragmentWGSL':Sb,'vertexIncludes':_0x1374c3,'fragmentIncludes':_0x1374c3,'fragmentDefines':new Map([['SH_BANDS',_0x8909c4['gsplatData']['shBands']['toString']()]]),'attributes':{'vertex_position':Pe}}),this['texture']=_0x8909c4['createText'+'ure']('centroids',Oe,new J(0x1*-0x2449+-0x1391+-0x2*-0x1c0d,-0x14cb+-0x1e11*-0x1+-0x546)),this['renderTarg'+'et']=new vt({'colorBuffer':this['texture'],'depth':!(-0x1*0xc41+0x2f5*-0xb+-0x2cc9*-0x1)}),this['renderPass']=new Tb(_0x535d2e),this['renderPass']['init'](this['renderTarg'+'et'],{}),this['renderPass']['colorOps']['clear']=!(0x39e+0x5b*0x13+-0xa5f),this['quadRender']=new jh(this['shader']);const {material:_0x235c08}=_0x313c28;_0x235c08['setDefine']('SH_BANDS','0');const {shaderChunks:_0x5973d9}=_0x235c08;_0x5973d9['glsl']['set']('gsplatSogs'+'ColorVS',yb),_0x5973d9['wgsl']['set']('gsplatSogs'+'ColorVS',vb),_0x235c08['update'](),_0x535d2e['scope']['resolve']('sh_result')['setValue'](this['texture']);}['destroy'](){const {gsplatInstance:_0x3afe0e}=this,{material:_0x575bcf}=_0x3afe0e;_0x575bcf['setDefine']('SH_BANDS',_0x3afe0e['resource']['gsplatData']['shBands']['toString']());const {shaderChunks:_0x5f25ec}=_0x575bcf;_0x5f25ec['glsl']['delete']('gsplatSogs'+'ColorVS'),_0x5f25ec['wgsl']['delete']('gsplatSogs'+'ColorVS'),_0x575bcf['update'](),this['quadRender']['destroy'](),this['renderPass']['destroy'](),this['renderTarg'+'et']['destroy'](),this['texture']['destroy'](),this['shader']['destroy']();}['render'](_0x226506,_0x2ce1a2){const {prevDir:_0x26bb8f,updateMode:_0x2b4b83}=this;if(_0x2b4b83==='disable'||(O_['invert'](_0x2ce1a2),O_['transformV'+'ector'](_0x226506['forward'],Yn),Yn['normalize'](),_0x2b4b83==='enable'&&Yn['equalsAppr'+'ox'](_0x26bb8f,0x1f47+0x1394+-0x32db+0.001)))return;_0x26bb8f['copy'](Yn);const _0x507bca=()=>{const {device:_0x4b6097}=this,{sh_centroids:_0x4f0ff4,meta:_0x10f8a0}=this['gsplatInst'+'ance']['resource']['gsplatData'];xb(_0x4b6097['scope'],{'dir':Yn['toArray'](),'centroids':_0x4f0ff4,'shN_mins':_0x10f8a0['shN']['mins'],'shN_maxs':_0x10f8a0['shN']['maxs']}),_0x4b6097['setCullMod'+'e'](xt),_0x4b6097['setDepthSt'+'ate'](Kt['NODEPTH']),_0x4b6097['setStencil'+'State'](null,null),_0x4b6097['setBlendSt'+'ate'](Ct['NOBLEND']),this['quadRender']['render']();};this['renderPass']['executeCal'+'lback']=_0x507bca,this['renderPass']['render']();}}const Eb='\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20means_l'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20means_'+'u;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20quats'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20scales'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20uint\x20n'+'umSplats;\x0a'+'\x0a\x20\x20\x20\x20uint\x20'+'packU32(ve'+'c4\x20v)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20uint(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u\x20|\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20uint('+'v.y\x20*\x20255.'+'0)\x20<<\x2016u\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uin'+'t(v.z\x20*\x2025'+'5.0)\x20<<\x208u'+'\x20|\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(v.w\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20uv'+'ec4\x20packU3'+'2(vec4\x20a,\x20'+'vec4\x20b,\x20ve'+'c4\x20c,\x20vec4'+'\x20d)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uvec4(pac'+'kU32(a),\x20p'+'ackU32(b),'+'\x20packU32(c'+'),\x20packU32'+'(d));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20w\x20='+'\x20int(textu'+'reSize(mea'+'ns_l,\x200).x'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ivec2\x20uv\x20'+'=\x20ivec2(gl'+'_FragCoord'+'.xy);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(ui'+'nt(uv.x\x20+\x20'+'uv.y\x20*\x20w)\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansLSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_l,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansUSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_u,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20quatsSamp'+'le\x20=\x20texel'+'Fetch(quat'+'s,\x20uv,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20scales'+'Sample\x20=\x20t'+'exelFetch('+'scales,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shLabel'+'sSample\x20=\x20'+'texelFetch'+'(sh_labels'+',\x20uv,\x200).x'+('y;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20pcFragCo'+'lor0\x20=\x20pac'+'kU32(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansLS'+'ample,\x20shL'+'abelsSampl'+'e.x),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansUS'+'ample,\x20shL'+'abelsSampl'+'e.y),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(quatsSa'+'mple),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4(scales'+'Sample,\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20}\x0a'),Ab='\x0a\x20\x20\x20\x20var\x20m'+'eans_l:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20means_u'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20qua'+'ts:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'cales:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sh_label'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20numSpla'+'ts:\x20u32;\x0a\x0a'+'\x20\x20\x20\x20fn\x20pac'+'kU32(v:\x20ve'+'c4<f32>)\x20-'+'>\x20u32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(u32(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20(u3'+'2(v.y\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20\x20|\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(u32(v.z\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20u32(v.w'+'\x20*\x20255.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20packU'+'Vec32(a:\x20v'+'ec4<f32>,\x20'+'b:\x20vec4<f3'+'2>,\x20c:\x20vec'+'4<f32>,\x20d:'+'\x20vec4<f32>'+')\x20->\x20vec4<'+'u32>\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4<u32'+'>(packU32('+'a),\x20packU3'+'2(b),\x20pack'+'U32(c),\x20pa'+'ckU32(d));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20@fragmen'+'t\x0a\x20\x20\x20\x20fn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20w:\x20u32\x20'+'=\x20textureD'+'imensions('+'means_l,\x200'+').x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2<u32>'+'\x20=\x20vec2<u3'+'2>(pcPosit'+'ion.xy);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv.x\x20+\x20uv'+'.y\x20*\x20w\x20>=\x20'+'uniform.nu'+'mSplats)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20fetch\x20the'+'\x20source\x20in'+'dex\x20and\x20ca'+'lculate\x20so'+'urce\x20uv\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'meansLSamp'+'le:\x20vec3<f'+('32>\x20=\x20text'+'ureLoad(me'+'ans_l,\x20uv,'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20meansUSam'+'ple:\x20vec3<'+'f32>\x20=\x20tex'+'tureLoad(m'+'eans_u,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20quatsSam'+'ple:\x20vec4<'+'f32>\x20=\x20tex'+'tureLoad(q'+'uats,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20scal'+'esSample:\x20'+'vec3<f32>\x20'+'=\x20textureL'+'oad(scales'+',\x20uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shLa'+'belsSample'+':\x20vec2<f32'+'>\x20=\x20textur'+'eLoad(sh_l'+'abels,\x20uv,'+'\x200).xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20packUVec'+'32(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansLSam'+'ple,\x20shLab'+'elsSample.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansUSam'+'ple,\x20shLab'+'elsSample.'+'y),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(quatsSamp'+'le),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4(scalesSa'+'mple,\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a'),dn=0x1*-0x1d15+-0xcfa+0x25*0x123+0.28209479177387814,yi=_0x8e1eb5=>_0x8e1eb5['read'](0x2293*0x1+-0x259a+0x307,-0x7*0x525+0x2d8*0x7+0x101b,_0x8e1eb5['width'],_0x8e1eb5['height'],{'mipLevel':0x0,'face':0x0,'immediate':!(0x795+-0x1543+0xdae)}),bb=(_0x177855,_0x5f5cf4)=>{for(const _0x54bdb7 in _0x5f5cf4)_0x177855['resolve'](_0x54bdb7)['setValue'](_0x5f5cf4[_0x54bdb7]);};class Cb{constructor(_0x43c680,_0x372f3f,_0x45d5e1,_0x3898dc,_0x26cd40,_0x213816){const _0x29404c=(_0x1618bb,_0x2bd5c2,_0x4f22b2)=>_0x1618bb*(-0x4fa+-0xf29+0x1424-_0x4f22b2)+_0x2bd5c2*_0x4f22b2,{meta:_0x8d9a4}=_0x43c680,{means:_0x5d2aec,scales:_0x28e87f,sh0:_0x475a8c,shN:_0x410bb1}=_0x8d9a4,_0x363fe2=_0x372f3f&&_0x43c680['means_l']['_levels'][-0x1a2d+-0x18f0+0x331d],_0x1b165=_0x372f3f&&_0x43c680['means_u']['_levels'][-0x64*0x4b+-0x19fe+0x374a],_0x3c96c1=_0x45d5e1&&_0x43c680['quats']['_levels'][-0xf6*-0x3+0x6*0x46+0xc1*-0x6],_0x5b7b84=_0x3898dc&&_0x43c680['scales']['_levels'][-0x1*0x1f6f+0x3fd*0x1+-0x3*-0x926],_0x29e5cb=_0x26cd40&&_0x43c680['sh0']['_levels'][0x4d6+0x1e56+-0x232c],_0x357247=_0x213816&&_0x43c680['sh_labels']['_levels'][0x1e26+-0xb34+-0x12f2],_0x13792f=_0x213816&&_0x43c680['sh_centroi'+'ds']['_levels'][0x1*0x1621+-0xb60*0x1+-0xac1],_0x24b088=(0x1d49+-0xd*0x1be+-0x6a1)/Math['sqrt'](-0x26c6+0x54e+-0x6b2*-0x5);this['read']=_0x22581b=>{if(_0x372f3f){const _0xbe4edc=_0x29404c(_0x5d2aec['mins'][-0x234b+-0x3cc+0x2717],_0x5d2aec['maxs'][-0xdbc+0x1563+-0x7a7],((_0x1b165[_0x22581b*(-0x4*-0x281+0xb13+-0x1513)+(0x1747+-0x24d7+0xd90)]<<-0x94d+-0xea+0x2b*0x3d)+_0x363fe2[_0x22581b*(-0x95e+-0xc91+0x751*0x3)+(-0x40*-0x76+-0x2e*-0xa6+-0x3b54)])/(-0x191b6+-0x1e2ef+0x474a4)),_0x540495=_0x29404c(_0x5d2aec['mins'][0xd38+-0xb3*-0x11+-0x1*0x191a],_0x5d2aec['maxs'][-0x1215+0x2163*-0x1+0x3379*0x1],((_0x1b165[_0x22581b*(-0xd6*-0x7+0x236e+0x116*-0x26)+(-0x9*0x1bc+-0x1013+0xc*0x2a4)]<<0x15ba+0x16*-0x152+0x75a)+_0x363fe2[_0x22581b*(-0xe8c+-0x1d1d+0x2bad)+(-0x1*0x1e77+-0x8a1+0x2719)])/(-0x115b0+0xdd6f*0x1+-0x2*-0x9c20)),_0x3573c9=_0x29404c(_0x5d2aec['mins'][0x20c3+0x42*-0x8e+-0x149*-0x3],_0x5d2aec['maxs'][-0x2f*-0xc+-0x332*0x2+0x432],((_0x1b165[_0x22581b*(-0x17f7*-0x1+-0x1375+0x5*-0xe6)+(-0xd0f*-0x1+0x6f8+-0x1405)]<<-0x2a8+-0xa2e*-0x2+-0x11ac)+_0x363fe2[_0x22581b*(-0x1971+-0x1b85+-0x34fa*-0x1)+(0xca6+0x2138+-0x2ddc)])/(0x1d*0xad5+0x3*0x2efb+-0x1c3*0x71));_0x372f3f['x']=Math['sign'](_0xbe4edc)*(Math['exp'](Math['abs'](_0xbe4edc))-(0x16a3+0x970+-0x2012)),_0x372f3f['y']=Math['sign'](_0x540495)*(Math['exp'](Math['abs'](_0x540495))-(0x24a6+0x489+-0x2f1*0xe)),_0x372f3f['z']=Math['sign'](_0x3573c9)*(Math['exp'](Math['abs'](_0x3573c9))-(-0x1285*0x1+0x244c+-0x11c6));}if(_0x45d5e1){const _0x4609b0=(_0x3c96c1[_0x22581b*(0xbcd+0x1380+-0x1f49*0x1)+(-0x1e*-0x10e+0x3*0xbc1+-0x42e7)]/(-0x14+0x65*-0x35+-0xc9*-0x1c)-(0x1*0xef3+-0x2e3*0x7+0x542+0.5))*_0x24b088,_0x101802=(_0x3c96c1[_0x22581b*(0x713*0x4+-0xab*-0xe+0x12d1*-0x2)+(0xb93*0x1+0x2*0x851+-0x1c34)]/(-0x1fd4+0x7*0x589+-0x2f6*0x2)-(0x11b9*0x1+0x1*-0x1116+-0xa3+0.5))*_0x24b088,_0x23a26c=(_0x3c96c1[_0x22581b*(0x26c5*0x1+-0x6a*-0x35+-0x17b*0x29)+(-0x1*0x1779+0xdea*0x2+-0x459)]/(0xa5*0xb+-0x1*0x1037+0x1*0xa1f)-(0x7*-0x2f6+0x1*0x2195+0x449*-0x3+0.5))*_0x24b088,_0x3c475=Math['sqrt'](Math['max'](-0xffa+0x74f*0x1+0x8ab,0x1*-0x1774+-0x98+0x180d-(_0x4609b0*_0x4609b0+_0x101802*_0x101802+_0x23a26c*_0x23a26c)));switch(_0x3c96c1[_0x22581b*(0x5*-0x35b+0xa67*0x1+0x1*0x664)+(0x1*0x1646+0x25f1+-0x3c34)]-(-0x217e+-0x1ef1+-0x416b*-0x1)){case 0x2*-0x297+0x54*-0x56+0x13*0x1c2:_0x45d5e1['set'](_0x4609b0,_0x101802,_0x23a26c,_0x3c475);break;case 0x9*0x1d9+-0x497*-0x2+-0x9*0x2de:_0x45d5e1['set'](_0x3c475,_0x101802,_0x23a26c,_0x4609b0);break;case-0x13a+-0xcac+0xde8:_0x45d5e1['set'](_0x101802,_0x3c475,_0x23a26c,_0x4609b0);break;case-0x1fb3*0x1+-0x171e+0x36d4:_0x45d5e1['set'](_0x101802,_0x23a26c,_0x3c475,_0x4609b0);break;}}if(_0x3898dc){const _0x1a6dad=_0x29404c(_0x28e87f['mins'][-0xf24+0x3f4+0xb30],_0x28e87f['maxs'][-0x10*-0x16e+0x177c+-0x2e5c],_0x5b7b84[_0x22581b*(0xaab*0x1+0x75*-0x5+-0x85e)+(-0x875+0x4c4*-0x2+-0x5ff*-0x3)]/(0x17d0+0x8e0+-0x1fb1)),_0x4df2a9=_0x29404c(_0x28e87f['mins'][0x3f*0x65+0x2610+-0x3eea],_0x28e87f['maxs'][0x2cc*0xc+-0x14a6*0x1+-0x5*0x295],_0x5b7b84[_0x22581b*(-0x24ee+0x1de2+-0x4*-0x1c4)+(0x183d+0x3e4+0x78*-0x3c)]/(0x1231*-0x1+-0xd5c+0x208c)),_0x2c9352=_0x29404c(_0x28e87f['mins'][0xdd5*0x1+0x17bb+0x1a2*-0x17],_0x28e87f['maxs'][-0x590+-0x1*-0x392+0x200],_0x5b7b84[_0x22581b*(-0xdca+-0x259d+0x336b)+(-0x4f*0x75+0x81e*-0x1+0x43*0xa9)]/(0x1e56+-0x12dd*-0x2+-0x4311));_0x3898dc['set'](_0x1a6dad,_0x4df2a9,_0x2c9352);}if(_0x26cd40){const _0x128f86=_0x29404c(_0x475a8c['mins'][-0xcfb*-0x1+-0x362*-0x7+-0x24a9],_0x475a8c['maxs'][-0xe88+-0x31d*-0x3+-0x1bb*-0x3],_0x29e5cb[_0x22581b*(-0x6d4+-0x3a2+0xa7a)+(0x5*-0x44f+-0x1e90+0x341b)]/(-0x866*0x4+0x1*0x1cbe+-0x3*-0x1f3)),_0x59640f=_0x29404c(_0x475a8c['mins'][0x25ec+0x207*-0x11+0x374*-0x1],_0x475a8c['maxs'][-0x15*0x1d+-0x1*0x1f76+0x21d8],_0x29e5cb[_0x22581b*(-0x188a+0x3+0x188b)+(-0x1*0x45b+0x3ab+0xb1)]/(-0x2581+-0xdb7*0x1+-0x1*-0x3437)),_0xa8d8ca=_0x29404c(_0x475a8c['mins'][0x1ff2+-0x1*0x19a9+0x647*-0x1],_0x475a8c['maxs'][-0x1*0x7b2+-0x1296+0x1a4a],_0x29e5cb[_0x22581b*(-0x592*0x4+0x353*-0x2+-0x2*-0xe79)+(0x239f+-0x20d2*0x1+-0x2cb)]/(-0x30*-0x65+0x24b*0x8+-0x2449)),_0xdf0bd=_0x29404c(_0x475a8c['mins'][-0x2*-0xb35+-0x1*-0x694+-0x3*0x9a9],_0x475a8c['maxs'][0xabb+0x3*-0x559+-0x553*-0x1],_0x29e5cb[_0x22581b*(0x33*0xac+-0x986*-0x4+0x8*-0x90b)+(-0x800+0x2fb*-0x5+0x16ea)]/(0x13b2*0x1+0x1f2f+-0x31e2));_0x26cd40['set'](-0x439*0x1+0x1f*-0xd4+-0x1*-0x1de5+0.5+_0x128f86*dn,0x1f98+-0x23e+-0xead*0x2+0.5+_0x59640f*dn,0x1128+-0x123f+-0x9*-0x1f+0.5+_0xa8d8ca*dn,(-0x28*-0x28+0x9c2+0xf1*-0x11)/(0x2*-0x4d2+0xceb+-0x346+Math['exp'](-_0xdf0bd)));}if(_0x213816){const _0x461d19=_0x357247[_0x22581b*(0x431+-0xda0+-0x973*-0x1)+(0x2656+-0x7b*0x1+0x25db*-0x1)]+(_0x357247[_0x22581b*(0x2629+0x719+-0x2d3e)+(-0x9c4+-0x28*0xf5+0x300d)]<<-0x7*-0x3ad+0x34*0x6f+-0x303f),_0x30b38c=_0x461d19%(0x1*-0x2029+-0xe*0xc4+-0x3d*-0xb5)*(0x10*0x22d+0xfa9+-0x10ce*0x3),_0x3ad7e2=Math['floor'](_0x461d19/(-0x8a3+-0x93b*0x3+-0x2494*-0x1));for(let _0x472882=-0x1e7f+0xf97+0xee8;_0x472882<-0x1bef+-0x541+0x2133;++_0x472882)for(let _0x58fd20=0x75*-0x11+-0x1d1f+0x24e4;_0x58fd20<0xc*-0x329+0x3*-0xa57+0x4500;++_0x58fd20)_0x213816[_0x472882*(0x1271*-0x2+-0x2133+0x4624)+_0x58fd20]=_0x29404c(_0x410bb1['mins'],_0x410bb1['maxs'],_0x13792f[(_0x30b38c+_0x58fd20)*(-0xb99*0x1+0x1bf7+-0x105a)+_0x472882+_0x3ad7e2*_0x43c680['sh_centroi'+'ds']['width']*(-0x1*0x34a+-0x1*-0x42f+-0x9*0x19)]/(0x20c9+0x98b+0x1*-0x2955));}};}}class Pb{constructor(){h(this,'meta'),h(this,'numSplats'),h(this,'means_l'),h(this,'means_u'),h(this,'quats'),h(this,'scales'),h(this,'sh0'),h(this,'sh_centroi'+'ds'),h(this,'sh_labels'),h(this,'packedText'+'ure');}['destroy'](){var _0x577e0e,_0x5875a4,_0x5160da,_0x125481,_0x36aba4,_0x4c6a1e,_0xd48b42,_0x5f5d07;(_0x577e0e=this['means_l'])==null||_0x577e0e['destroy'](),(_0x5875a4=this['means_u'])==null||_0x5875a4['destroy'](),(_0x5160da=this['quats'])==null||_0x5160da['destroy'](),(_0x125481=this['scales'])==null||_0x125481['destroy'](),(_0x36aba4=this['sh0'])==null||_0x36aba4['destroy'](),(_0x4c6a1e=this['sh_centroi'+'ds'])==null||_0x4c6a1e['destroy'](),(_0xd48b42=this['sh_labels'])==null||_0xd48b42['destroy'](),(_0x5f5d07=this['packedText'+'ure'])==null||_0x5f5d07['destroy']();}['createIter'](_0x3c2edc,_0x1ba145,_0x2de9c7,_0x2594c9,_0x3dfbcb){return new Cb(this,_0x3c2edc,_0x1ba145,_0x2de9c7,_0x2594c9,_0x3dfbcb);}['calcAabb'](_0x40e6f5){const {mins:_0x4dc38c,maxs:_0xc6fd99}=this['meta']['means'],_0x493200=_0x4db4d3=>Math['sign'](_0x4db4d3)*(Math['exp'](Math['abs'](_0x4db4d3))-(0x216c+-0x1*0xf45+-0x1226));_0x40e6f5['center']['set']((_0x493200(_0x4dc38c[0x1682+0x53*0x5a+-0x33b0])+_0x493200(_0xc6fd99[0x787+0x9b*0x13+-0x1308]))*(0x1a*-0x167+0x2*0xa93+-0x3d4*-0x4+0.5),(_0x493200(_0x4dc38c[-0x39*-0x95+-0x56*-0x25+-0x382*0xd])+_0x493200(_0xc6fd99[0x11*-0x91+0x21a+0x2*0x3c4]))*(0x12e7+0xf2c+-0x2213+0.5),(_0x493200(_0x4dc38c[-0x184c+0x124e+0x2*0x300])+_0x493200(_0xc6fd99[-0x577*0x7+-0x52*0xc+0x1*0x2a1b]))*(-0x215f+-0x1c33+0x3d92+0.5)),_0x40e6f5['halfExtent'+'s']['set']((_0x493200(_0xc6fd99[-0x7d4+0x163e+0x1e*-0x7b])-_0x493200(_0x4dc38c[-0x694+-0xd04+0x1398]))*(-0x17ae+0xee7+0x8c7+0.5),(_0x493200(_0xc6fd99[-0x11b*-0x1b+-0x308*0x1+-0x10*0x1ad])-_0x493200(_0x4dc38c[-0x22e*-0x10+0x2f*0x5f+-0x2*0x1a28]))*(0x1*-0x5f3+0x1db8+0x5*-0x4c1+0.5),(_0x493200(_0xc6fd99[0x1*-0x2681+0x164+0x251f])-_0x493200(_0x4dc38c[0x26cf+-0x3d*0x83+0x2*-0x3cb]))*(-0x6df*0x3+-0x2378+0x3815+0.5));}['getCenters'](_0x3a72b4){const {meta:_0x2e3cf9,means_l:_0x1eeede,means_u:_0x5ddf05,numSplats:_0x68d85a}=this,{means:_0x22fb03}=_0x2e3cf9,_0x26d48d=new Uint32Array(_0x5ddf05['_levels'][-0x21bf+-0x17b3+-0x1cb9*-0x2]['buffer']),_0x534ebe=new Uint32Array(_0x1eeede['_levels'][-0xdc1+-0x535+0x12f6]['buffer']),_0x1581b3=_0x22fb03['mins'][0x184f+0x15ab*-0x1+-0x2a4]/(-0x15*0xe4e+-0x9*0x1ea9+0x34056),_0x44c10f=_0x22fb03['mins'][0x3d*0x6f+0x1*0x1a71+-0x34e3]/(-0x885+0x118a2+-0x101e),_0x1c5bda=_0x22fb03['mins'][0x1b27+0x13af*-0x1+-0x2*0x3bb]/(0xa637*0x1+0x1b1e6+-0xa1f*0x22),_0x55681c=_0x22fb03['maxs'][-0x1f*0xf1+-0xa4b+0x277a]/(-0xcec5+-0x144fb+0x313bf),_0x596eaf=_0x22fb03['maxs'][0x7d*0x26+-0x3a*0x1+-0x1253]/(-0xedc5+-0x1*-0x19a6d+-0x5357*-0x1),_0x5f3031=_0x22fb03['maxs'][0x915+-0x2057+0x1*0x1744]/(-0x5*-0x11db+0x1*-0x1fd3f+0x2a3f7);for(let _0x3bacb9=-0xb*0x245+-0x8f*-0x34+-0x415;_0x3bacb9<_0x68d85a;_0x3bacb9++){const _0x37cf62=_0x3bacb9,_0x37ad81=_0x26d48d[_0x37cf62],_0x1b39e0=_0x534ebe[_0x37cf62],_0xe2d2e9=_0x37ad81<<0x1*0x1463+0x1*0x58f+-0x19ea&-0x7*-0x4c7+0x16c67*-0x1+-0xcbd*-0x2e|_0x1b39e0&-0x1b35*-0x1+0x6*-0x51+-0x1850,_0x6c8244=_0x37ad81&0x9af0+-0x12a41+0x18e51|_0x1b39e0>>>-0x22e8+0x102b*0x2+0x29a&-0x7fa*0x1+-0x2126*-0x1+-0x3*0x80f,_0x38c78d=_0x37ad81>>>-0x1919+-0x48*0x9+0x1ba9&0x1c0a6*0x1+-0x19e9a+0xdcf4|_0x1b39e0>>>0x20e9+-0xc74+-0x1465*0x1&-0x1e23+0xfcf+0x1*0xf53,_0x3db9d2=_0x1581b3*(0xd56e+0xf*0x5ff+-0x2f60-_0xe2d2e9)+_0x55681c*_0xe2d2e9,_0x4a3832=_0x44c10f*(0x1*-0xe098+0x16e1*-0x11+0x36588-_0x6c8244)+_0x596eaf*_0x6c8244,_0x1b2ff5=_0x1c5bda*(0x32*-0x667+-0xc520+0x3053d-_0x38c78d)+_0x5f3031*_0x38c78d,_0x5dc4b5=_0x3db9d2<0x14f3+0x4f7*-0x1+-0x7fe*0x2?-_0x3db9d2:_0x3db9d2,_0x2a2a0d=_0x4a3832<-0xa0e+-0x1c7f+-0x1*-0x268d?-_0x4a3832:_0x4a3832,_0x115727=_0x1b2ff5<-0x97*-0x2+-0x98f*-0x3+0x1ddb*-0x1?-_0x1b2ff5:_0x1b2ff5;_0x3a72b4[_0x3bacb9*(0x13*0x47+-0x6*0x2b1+0xae4)]=(_0x3db9d2<0x13e9+0x2*-0x126d+0x10f1?-(-0xb08+0x49*-0x16+0x114f):-0x2*-0xe64+0x1902+-0x35c9)*(Math['exp'](_0x5dc4b5)-(0x11*0x8d+0xb9f*0x3+-0x2c39)),_0x3a72b4[_0x3bacb9*(-0x19c2+0x1*0xda3+0x1*0xc22)+(0xe4b+0x47*0x35+-0x1cfd*0x1)]=(_0x4a3832<0x9*0x119+-0x49*-0x47+0x8*-0x3c4?-(-0x7*0x133+0x3fc+0x46a):0x1*-0x80e+0xf*-0x9e+0x1151)*(Math['exp'](_0x2a2a0d)-(0x1303*-0x1+-0x8*0x259+0x25cc)),_0x3a72b4[_0x3bacb9*(-0x1c96*0x1+0x2487+-0x7ee)+(0x1d6a+0x1a58*0x1+-0x10*0x37c)]=(_0x1b2ff5<0x140f+-0x11eb+-0x224?-(0x265b+-0x4d4*0x2+-0x1cb2):-0x1*-0x217d+-0x2*-0x48f+-0x2a9a)*(Math['exp'](_0x115727)-(-0x8c8+0x970+0xa7*-0x1));}}['calcFocalP'+'oint'](_0x5d8a59,_0x4d2d56){_0x5d8a59['set'](0x189*0xb+-0xb84+-0x55f,-0x18f5+0x318+0x15dd,0xfc0+0x56*-0x3a+0x3bc);}get['isSogs'](){return!(0x15e2*0x1+0x1632+0xd*-0x364);}get['shBands'](){var _0x2e9357;return{0xc0:0x1,0x200:0x2,0x3c0:0x3}[(_0x2e9357=this['sh_centroi'+'ds'])==null?void(0x266a+0x1f4d+0x45b7*-0x1):_0x2e9357['width']]??0x23c2+0x453*0x4+-0x1*0x350e;}async['decompress'](){const _0x16f192=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3'],{shBands:_0x59cb36}=this,{means_l:_0x20489f,means_u:_0x2a7c2f,quats:_0x166b7d,scales:_0x42e3d0,sh0:_0x1365df,sh_labels:_0x129c36,sh_centroids:_0x5f06fa}=this;if(_0x20489f['_levels'][0x18a7+-0x1d45+0x49e*0x1]=await yi(_0x20489f),_0x2a7c2f['_levels'][0x1*0x1d45+-0x38a*0x8+-0xf5]=await yi(_0x2a7c2f),_0x166b7d['_levels'][-0x17b*0x1+-0x1f*0xef+0x162*0x16]=await yi(_0x166b7d),_0x42e3d0['_levels'][0x24f4+0xbd9+-0x30cd]=await yi(_0x42e3d0),_0x1365df['_levels'][-0xf39*-0x1+-0x3a1*0x8+-0x65*-0x23]=await yi(_0x1365df),_0x59cb36>0x1*0x82c+0x42*-0x27+0x1e2){_0x129c36['_levels'][-0x13f9+0x2261+-0x8*0x1cd]=await yi(_0x129c36),_0x5f06fa['_levels'][-0x1b*0x9f+0x1eee+-0xe29]=await yi(_0x5f06fa);const _0x4de87b=[];for(let _0x529ade=-0x1*0xa0+-0x8e8+0x988;_0x529ade<0x1fb+0x48*0x3e+0x133e*-0x1;++_0x529ade)_0x4de87b['push']('f_rest_'+_0x529ade);_0x16f192['splice'](_0x16f192['indexOf']('f_dc_0')+(-0x106*-0x26+-0xc9d+-0x1a46),-0x2682+-0x3ab*-0x1+0x22d7,..._0x4de87b);}const _0x57bb68={};_0x16f192['forEach'](_0x5bde9f=>{_0x57bb68[_0x5bde9f]=new Float32Array(this['numSplats']);});const _0x2a668f=new I(),_0x4d7215=new le(),_0x13142c=new I(),_0x144739=new ae(),_0x37b723=_0x59cb36>0x1fa8+-0x2558+0x1c*0x34?new Float32Array(0x10*0x142+-0x3de*-0x5+-0x2749):null,_0x262149=this['createIter'](_0x2a668f,_0x4d7215,_0x13142c,_0x144739,_0x37b723);for(let _0x2c7e62=0x1db4*0x1+-0xa7*0x24+-0x638;_0x2c7e62<this['numSplats'];++_0x2c7e62)if(_0x262149['read'](_0x2c7e62),_0x57bb68['x'][_0x2c7e62]=_0x2a668f['x'],_0x57bb68['y'][_0x2c7e62]=_0x2a668f['y'],_0x57bb68['z'][_0x2c7e62]=_0x2a668f['z'],_0x57bb68['rot_1'][_0x2c7e62]=_0x4d7215['x'],_0x57bb68['rot_2'][_0x2c7e62]=_0x4d7215['y'],_0x57bb68['rot_3'][_0x2c7e62]=_0x4d7215['z'],_0x57bb68['rot_0'][_0x2c7e62]=_0x4d7215['w'],_0x57bb68['scale_0'][_0x2c7e62]=_0x13142c['x'],_0x57bb68['scale_1'][_0x2c7e62]=_0x13142c['y'],_0x57bb68['scale_2'][_0x2c7e62]=_0x13142c['z'],_0x57bb68['f_dc_0'][_0x2c7e62]=(_0x144739['x']-(-0x2c*0x2f+0x1aba+0x3e*-0x4d+0.5))/dn,_0x57bb68['f_dc_1'][_0x2c7e62]=(_0x144739['y']-(0x1cd+-0x1*0x22f5+-0x2*-0x1094+0.5))/dn,_0x57bb68['f_dc_2'][_0x2c7e62]=(_0x144739['z']-(0xfd1*-0x1+-0x81a*0x1+-0x9d*-0x27+0.5))/dn,_0x57bb68['opacity'][_0x2c7e62]=_0x144739['w']<=0xa9f+0x1f1b*-0x1+-0x3*-0x6d4?-(0x11e5+0x1ba+0x1377*-0x1):_0x144739['w']>=0x6*-0x4e6+-0x17db+0xd50*0x4?-0x1b05*-0x1+-0x3*-0x3c2+0x2623*-0x1:-Math['log']((-0x11fe+0x1*0x1694+-0x33*0x17)/_0x144739['w']-(0xd8f+-0x1*-0x903+0x1691*-0x1)),_0x37b723){for(let _0x1f1b3e=-0x1*-0x60b+0xb4d+-0x1158;_0x1f1b3e<-0x2402+-0x1456+0x9f*0x5b;++_0x1f1b3e)_0x57bb68['f_rest_'+_0x1f1b3e][_0x2c7e62]=_0x37b723[_0x1f1b3e];}return new Dn([{'name':'vertex','count':this['numSplats'],'properties':_0x16f192['map'](_0x5d86b8=>({'name':_0x5d86b8,'type':'float','byteSize':0x4,'storage':_0x57bb68[_0x5d86b8]}))}]);}['packGpuMem'+'ory'](){const {means_l:_0x4c4c0e,means_u:_0xc03650,quats:_0x1da537,scales:_0x145076,sh_labels:_0x3f1c05,numSplats:_0x15325c}=this,{device:_0x5d4cac}=_0x4c4c0e,{scope:_0xb63388}=_0x5d4cac,_0x447206=Ut['createShad'+'er'](_0x5d4cac,{'uniqueName':'GsplatSogs'+'ReorderSha'+'der','attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentGLSL':Eb,'fragmentWGSL':Ab,'fragmentOutputTypes':['uvec4']}),_0x5492d6=new vt({'colorBuffer':this['packedText'+'ure'],'depth':!(0xce7+-0x6bb+-0x62b),'mipLevel':0x0});_0x5d4cac['setCullMod'+'e'](xt),_0x5d4cac['setBlendSt'+'ate'](Ct['NOBLEND']),_0x5d4cac['setDepthSt'+'ate'](Kt['NODEPTH']),bb(_0xb63388,{'means_l':_0x4c4c0e,'means_u':_0xc03650,'quats':_0x1da537,'scales':_0x145076,'sh_labels':_0x3f1c05??_0x4c4c0e,'numSplats':_0x15325c}),fr(_0x5d4cac,_0x5492d6,_0x447206),_0x5492d6['destroy'](),_0x447206['destroy']();}async['prepareGpu'+'Data'](){const {device:_0x17e8fc,height:_0x4574c7,width:_0x170b40}=this['means_l'];this['means_l']['_levels'][-0x1d1f+0x2d3*0x7+0x4ad*0x2]=await yi(this['means_l']),this['means_u']['_levels'][-0x797+0x3b9*0x4+-0x3*0x26f]=await yi(this['means_u']),this['packedText'+'ure']=new _e(_0x17e8fc,{'name':'sogsPacked'+'Texture','width':_0x170b40,'height':_0x4574c7,'format':Ne,'mipmaps':!(0x11f+-0x1a28+0x190a)}),_0x17e8fc['on']('devicerest'+'ored',()=>{this['packGpuMem'+'ory']();}),this['packGpuMem'+'ory']();}['reorderDat'+'a'](){return this['prepareGpu'+'Data']();}}async function Mb(){let _0x48f13e=null,_0x376af0=null,_0x4ab97d=null,_0x51a2c3=null,_0x1d01ab=null,_0x11fa3c=null,_0x542cc2=null,_0xf8d11c=null,_0x3ff33d=null,_0x24af70=null,_0x4c07ae=null,_0x2ac43b=null,_0x2a804e=null,_0x3108c4=null,_0x1aa9a1=null,_0x41ef39=null,_0x4c0476=null,_0x45069f=null,_0x552040=null,_0x533648=null,_0x26adb2=null,_0x5aa2f4=null,_0x4a6c9a=null,_0x4c805f=null,_0x1693c8=Float32Array['BYTES_PER_'+'ELEMENT'],_0x88d76d=Uint32Array['BYTES_PER_'+'ELEMENT'],_0x5da2ac=0xac6+0x1996+-0x245c,_0x3fdd4f=!(0x13bf+-0x1*-0x551+-0x1910),_0x3b8d12,_0x34cd97,_0x232f98={'x':0x0,'y':0x0,'z':0x0},_0x26ad14={'x':0x0,'y':0x0,'z':0x0},_0x5d7ea8=!(0xf4d*-0x2+0x1a*-0x135+-0x3dfc*-0x1),_0x54adf2=!(0x1a96+0x26f6+-0x1063*0x4),_0x2eb0de=!(0xa05+0x1c3c+-0x2640),_0x328237=!(-0xe62+-0x856+-0x33f*-0x7),_0x275e4d=-0xb*0x1de+0xf6c+-0x1*-0x51e,_0x43a69e=0x332+-0xbf5*-0x1+0x1*-0xf27,_0x53eb4d=!(-0x19*-0x12+0x716+-0x49*0x1f),_0x431c7f=null,_0x4e0f35=!(0x42*-0x3a+-0x122c+-0x1*-0x2121),_0x5838bc=-0x25b7+0x272*-0x8+0x3947,_0x3bc441=-0x61*0x28+-0x802+-0x4a2*-0x5,_0x2c4bb8={'x':0x0,'y':0x0,'z':0x0},_0x29cf4b={'x':0x0,'y':0x0,'z':0x0},_0x35057e,_0x46ef92;self['onmessage']=async _0x2ce06e=>{const {data:_0x5d75c3}=_0x2ce06e;switch(_0x5d75c3['type']){case'initWorker':await _0x18ada8(_0x5d75c3['sortWasmUr'+'l']),self['postMessag'+'e']({'type':'initialize'+'d'});break;case'initData':if(_0x5da2ac=_0x5d75c3['centers']['length']/(-0x1d3d+0x1179+0xbc7),_0x5da2ac<=0x263+-0x2686+-0x2423*-0x1||!_0x376af0)return;_0x33f6f4(),_0x3fdd4f=_0x5d75c3['is4d'],_0x35057e=_0x5d75c3['id'];const _0x59ff6c=_0x1d8833(_0x5da2ac);if(_0x15a7d9(_0x59ff6c),_0x4ab97d[0x1f50+-0xcac+-0x12a4]=_0x2c4bb8['x'],_0x4ab97d[0x8c*0x2+0xa*0x3e5+-0x115*0x25]=_0x2c4bb8['y'],_0x4ab97d[-0x2*-0xe2d+0x9d*-0x9+-0x16d3]=_0x2c4bb8['z'],_0x51a2c3[0x5*-0x373+0x1d45*0x1+-0xc06]=_0x29cf4b['x'],_0x51a2c3[-0x29*-0x76+0x1f39+-0x321e]=_0x29cf4b['y'],_0x51a2c3[0x72*0x18+0x1a5d+-0x250b]=_0x29cf4b['z'],_0x11fa3c&&_0x5d75c3['centers']&&_0x11fa3c['length']===_0x5d75c3['centers']['length']){const _0x39d357=new Float32Array(_0x5d75c3['centers']);_0x11fa3c['set'](_0x39d357);}if(_0xf8d11c&&_0x5d75c3['timeIndex']&&_0xf8d11c['length']===_0x5d75c3['timeIndex']['length']){const _0x3e9cde=new Uint32Array(_0x5d75c3['timeIndex']);_0xf8d11c['set'](_0x3e9cde);}if(_0x4c07ae&&_0x5d75c3['motion']&&_0x4c07ae['length']===_0x5d75c3['motion']['length']){const _0xd1728c=new Float32Array(_0x5d75c3['motion']);_0x4c07ae['set'](_0xd1728c);}if(_0x3fdd4f&&_0x3ff33d&&_0x24af70&&_0x5d75c3['muT']&&_0x5d75c3['tScale']&&_0x3ff33d['length']===_0x5d75c3['muT']['length']&&_0x24af70['length']===_0x5d75c3['tScale']['length']&&(_0x3ff33d['set'](_0x5d75c3['muT']),_0x24af70['set'](_0x5d75c3['tScale'])),_0x542cc2){for(let _0x381b20=0x242d+-0x1e9b+0x2c9*-0x2;_0x381b20<_0x542cc2['length'];++_0x381b20)_0x542cc2[_0x381b20]=_0x381b20;}_0x1d01ab&&_0x5d75c3['timeOption']&&_0x1d01ab['set'](_0x5d75c3['timeOption']),_0x41eccb(),_0x4e0f35=!(0x1a3e+0x231d+-0x3d5b),_0x2eb0de=!(-0x16e8+0xa4*-0x9+0x16f*0x14),_0x4055fb();break;case'setTime':_0x3b8d12=_0x5d75c3['time'],_0x4055fb();break;case'setUseTemp'+'oralSort':_0x5d7ea8=_0x5d75c3['useTempora'+'lSort'];break;case'setUseDyna'+'micSort':_0x54adf2=_0x5d75c3['useDynamic'+'Sort'];break;case'sort':if(!_0x4ab97d)return;_0x4ab97d[0xabc*-0x1+-0x11a8+0x1c64]=_0x5d75c3['cameraPosi'+'tion']['x'],_0x4ab97d[-0x1902+-0x212*0x7+-0x3*-0xd2b]=_0x5d75c3['cameraPosi'+'tion']['y'],_0x4ab97d[0xa90+-0x1f3b+0x4f*0x43]=_0x5d75c3['cameraPosi'+'tion']['z'],_0x51a2c3[0x7*-0x248+-0x21da+-0x1*-0x31d2]=_0x5d75c3['cameraDire'+'ction']['x'],_0x51a2c3[0xf0f+0x24ba+-0x33c8]=_0x5d75c3['cameraDire'+'ction']['y'],_0x51a2c3[0x6b*0x22+-0x2677+0x1843]=_0x5d75c3['cameraDire'+'ction']['z'],_0x2c4bb8['x']=_0x5d75c3['cameraPosi'+'tion']['x'],_0x2c4bb8['y']=_0x5d75c3['cameraPosi'+'tion']['y'],_0x2c4bb8['z']=_0x5d75c3['cameraPosi'+'tion']['z'],_0x29cf4b['x']=_0x5d75c3['cameraDire'+'ction']['x'],_0x29cf4b['y']=_0x5d75c3['cameraDire'+'ction']['y'],_0x29cf4b['z']=_0x5d75c3['cameraDire'+'ction']['z'],_0x4055fb();break;}};const _0x33f6f4=()=>{_0x43a69e=Math['max'](0x1d1f+-0x4*-0x935+-0x167*0x2f,Math['min'](-0x1*-0x655+-0x3*0x4f2+0x895,Math['round'](Math['log2'](_0x5da2ac/(0xc*-0x1ed+0x148c+0x4*0xa5))))),_0x275e4d=(-0x1383+-0x147e+0x2803)**_0x43a69e+(0x2b*-0xb8+-0x1f9b+-0xfa1*-0x4);},_0x15a7d9=_0xe42c72=>{_0x2ac43b=-0x7*0x1d5+-0x13*0x137+-0x5fc*-0x6,_0x2a804e=_0x2ac43b+_0x5da2ac*_0x1693c8*(0xa49+-0x1491+0xa4b),_0x45069f=_0x2a804e+(-0x2*-0x89b+0x227f+-0x3351)*_0x1693c8*(-0x3b2+0x2075+-0x1*0x1cc1),_0x552040=_0x45069f+_0x5da2ac*_0x88d76d,_0x533648=_0x552040+(0xd*0x119+0x563+0x13a5*-0x1)*_0x1693c8,_0x26adb2=_0x533648+(-0x35*-0x35+0x1*-0xdfd+0x9b*0x5)*_0x1693c8,_0x5aa2f4=_0x26adb2+(-0x143*0x15+0x33+0x1a4f)*_0x1693c8,_0x4a6c9a=_0x5aa2f4+(0x7c*0x1f+-0x1*-0x7f1+-0x16f2)*_0x1693c8,_0x4c805f=_0x4a6c9a+_0x5da2ac*_0x88d76d,_0x11fa3c=new Float32Array(_0xe42c72,_0x2ac43b,_0x5da2ac*(0x19*-0xa7+-0x183c+0x288e)),_0x1d01ab=new Float32Array(_0xe42c72,_0x2a804e,0x59a+-0x3*0x397+0x5f3*0x1),_0x542cc2=new Uint32Array(_0xe42c72,_0x45069f,_0x5da2ac),_0x4ab97d=new Float32Array(_0xe42c72,_0x552040,-0x171+0x1*-0x1727+-0x1*-0x189b),_0x51a2c3=new Float32Array(_0xe42c72,_0x533648,-0x1*-0x17f3+-0x21f4+-0xa04*-0x1),_0x3fdd4f&&(_0x41ef39=_0x4c805f+_0x275e4d*_0x88d76d,_0x4c0476=_0x41ef39+_0x5da2ac*_0x1693c8,_0x1aa9a1=_0x4c0476+_0x5da2ac*_0x1693c8,_0x3108c4=_0x1aa9a1+_0x5da2ac*(0x178d+0x4*0x137+-0x1c66)*_0x1693c8,_0x3ff33d=new Float32Array(_0xe42c72,_0x41ef39,_0x5da2ac),_0x24af70=new Float32Array(_0xe42c72,_0x4c0476,_0x5da2ac),_0x4c07ae=new Float32Array(_0xe42c72,_0x1aa9a1,_0x5da2ac*(0xbcf+0xfe*-0x1d+-0x2*-0x87d)),_0xf8d11c=new Uint32Array(_0xe42c72,_0x3108c4,_0x5da2ac));},_0x18ada8=async _0x88b80e=>{_0x5838bc=0x1*-0x1655+-0x9e6*0x3+0x3408;const _0x105ad9={'env':{'memory':new WebAssembly['Memory']({'initial':_0x5838bc}),'pthread_self':function(){return-0x269d+0x9ab+0x1cf2;},'emscripten_builtin_memalign':function(){return 0x109c+0x1db*-0x12+0x865*0x2;},'loggerVec3':(_0x23a86c,_0x5a0a76,_0x382eac,_0x1dec6b)=>{console['log']('C++\x20logger'+'Vec3\x20['+_0x23a86c+']\x200:'+_0x5a0a76+'\x201:'+_0x382eac+'\x202:'+_0x1dec6b);},'loggerFloat':(_0x186ad0,_0x37bfab)=>{console['log']('C++\x20LogFlo'+'at\x20['+_0x186ad0+']\x20a:'+_0x37bfab);},'loggerValue':(_0x176208,_0x5b21a5,_0x169b6c,_0x6f552b,_0x570249)=>{console['log']('C++\x20logger'+'Value\x20['+_0x176208+']\x20minDist:'+_0x5b21a5+'\x20maxDist:'+_0x169b6c+'\x20range:'+_0x6f552b+'\x20divider:'+_0x570249);},'loggerCamera':(_0x15d504,_0x57a419,_0x150008,_0x51d384,_0x5c5c8e,_0x5ba8a6,_0x3cb8be)=>{console['log']('C++\x20logger'+'Camera\x20['+_0x15d504+']\x20x:'+_0x57a419+'\x20y:'+_0x150008+'\x20z:'+_0x51d384+'\x20dx:'+_0x5c5c8e+'\x20dy:'+_0x5ba8a6+'\x20dz:'+_0x3cb8be);},'loggerBound':(_0x4dcc2b,_0x327133,_0x3ab5ba,_0x214667,_0x1bef9f,_0xe3c8e8)=>{console['log']('C++\x20logger'+'Bound\x20minX'+':'+_0x4dcc2b+'\x20minY:'+_0x327133+'\x20minZ:'+_0x3ab5ba+'\x20maxX:'+_0x214667+'\x20maxY:'+_0x1bef9f+'\x20maxZ:'+_0xe3c8e8);},'loggerDebug':_0x72e68f=>{console['log']('C++\x20logger'+'Debug\x20['+_0x72e68f+']');}}};try{const _0x1f2e07=await(await fetch(_0x88b80e))['arrayBuffe'+'r']();return _0x48f13e=(await WebAssembly['instantiat'+'e'](_0x1f2e07,_0x105ad9))['instance'],_0x376af0=_0x105ad9['env']['memory'],_0x48f13e;}catch(_0x5211c8){throw console['error']('加载WASM模块失败'+':',_0x5211c8),_0x5211c8;}},_0x4a97f6=_0x58663b=>{if(_0x58663b<=0x7*0x2d3+-0x212b+0xe*0xf5)return-0x1*-0x2551+0x23f3+-0x4943;let _0x2d27fd=_0x58663b*_0x1693c8*(0x5d*-0x2d+-0xc28+0x19*0x124);_0x2d27fd+=_0x58663b*_0x88d76d,_0x2d27fd+=(0xd8*-0x10+-0x1*-0x1685+-0x902)*_0x1693c8,_0x2d27fd+=(-0x1cca+0x1a5*0x17+-0x1ce*0x5)*_0x1693c8,_0x2d27fd+=(0x529*0x5+-0x202*0xd+-0x1*-0x50)*_0x1693c8,_0x2d27fd+=(-0x23*0xa1+0x1d0*0x13+-0x635*0x2)*_0x1693c8,_0x2d27fd+=_0x58663b*_0x1693c8,_0x2d27fd+=_0x275e4d*_0x88d76d,_0x2d27fd+=(-0x7e5*0x1+0x17b*0x15+-0x16ce)*_0x1693c8*(0x80+-0x145+0xc7),_0x2d27fd+=_0x58663b*_0x88d76d,_0x3fdd4f&&(_0x2d27fd+=_0x58663b*_0x1693c8,_0x2d27fd+=_0x58663b*_0x1693c8,_0x2d27fd+=_0x58663b*_0x1693c8*(0xcd8+-0x1ef3*-0x1+-0x2bc8));const _0x498f82=(-0x221*-0x8+0x2338+-0x3400)*(-0xb92+0x17*0x191+-0x1475*0x1);return Math['ceil'](_0x2d27fd/_0x498f82);},_0x1d8833=_0x17a7a1=>{const _0x25374b=_0x4a97f6(_0x17a7a1);return _0x25374b>_0x5838bc?(_0x376af0['grow'](_0x25374b-_0x5838bc),_0x5838bc=_0x25374b):_0x376af0['grow'](-0xa*-0x27b+-0x9e*-0x2+0x42*-0x65),_0x376af0['buffer'];},_0x41eccb=()=>{if(!_0x48f13e)return;const {calcAABB:_0x490b51}=_0x48f13e['exports'];_0x490b51(_0x2ac43b,_0x26adb2,_0x5aa2f4,_0x5da2ac);},_0x4055fb=()=>{_0x431c7f&&clearTimeout(_0x431c7f),_0x431c7f=setTimeout(()=>{_0x431c7f=null,_0xfb7107();},-0x1736*0x1+0x12c*0x4+0x1286);},_0xfb7107=()=>{if(!_0x48f13e||!_0x4e0f35||_0x542cc2['length']!==_0x5da2ac||_0x45069f===null||_0x2ac43b===null||_0x552040===null||_0x533648===null||_0x26adb2===null||_0x5aa2f4===null)return;const _0x2b5807=_0x4ab97d[-0x6*-0x115+0x1a65+0x20e3*-0x1],_0xaf1c87=_0x4ab97d[-0x9b0+-0x239*-0x2+0x11*0x4f],_0x368dad=_0x4ab97d[-0x7*-0x2d2+0xafb+-0x1eb7],_0x2c3c65=_0x51a2c3[-0x1f16+0x17*0xed+0x9cb],_0x31342c=_0x51a2c3[0x3*-0x9f7+-0x11f4+0x2fda],_0x27f289=_0x51a2c3[0xa2*-0x27+0x6*0x164+0x1*0x1058],_0x225657=-0x27*-0x95+0x52b+-0x1*0x1bde+0.001;if(!_0x2eb0de&&Math['abs'](_0x2b5807-_0x232f98['x'])<_0x225657&&Math['abs'](_0xaf1c87-_0x232f98['y'])<_0x225657&&Math['abs'](_0x368dad-_0x232f98['z'])<_0x225657&&Math['abs'](_0x2c3c65-_0x26ad14['x'])<_0x225657&&Math['abs'](_0x31342c-_0x26ad14['y'])<_0x225657&&Math['abs'](_0x27f289-_0x26ad14['z'])<_0x225657&&Math['abs'](_0x3b8d12-_0x34cd97)<0x53*0x6b+-0x13ff*0x1+0x26*-0x63+0.01)return;if(_0x328237){_0x53eb4d=!(-0x26a7+0x1e9e+0x809);return;}_0x328237=!(0x20d7+-0x225c+0x185),_0x2eb0de=!(-0x8e5*-0x1+-0x68a+-0x25a*0x1),_0x34cd97=_0x3b8d12,_0x232f98['x']=_0x2b5807,_0x232f98['y']=_0xaf1c87,_0x232f98['z']=_0x368dad,_0x26ad14['x']=_0x2c3c65,_0x26ad14['y']=_0x31342c,_0x26ad14['z']=_0x27f289,_0x53eb4d=!(-0x216b*0x1+0x86+0x20e6);const {sortIndexes:_0xcfd545}=_0x48f13e['exports'];try{const _0x18ebcd=_0xcfd545(_0x45069f,_0x2ac43b,_0x1aa9a1,_0x41ef39,_0x4c0476,_0x552040,_0x533648,_0x26adb2,_0x5aa2f4,_0x4a6c9a,_0x4c805f,_0x3b8d12||0x1a02+0xf03+0x1*-0x2905,_0x5d7ea8,_0x54adf2,_0x3fdd4f,_0x5da2ac,_0x275e4d,_0x43a69e,_0x2a804e,_0x3108c4),_0x3b09a5=new Uint32Array(_0x542cc2);if(_0x18ebcd===-0x1a2c+-0x5d1*-0x5+-0x2e9){debugger;console['log']('____\x20ENGIN'+'E','Indexes\x20co'+'unt\x20===\x20',_0x18ebcd);}const _0x4b127e=_0x5da2ac!==_0x3bc441||_0x46ef92!==_0x35057e;self['postMessag'+'e']({'type':'sortComple'+'ted','count':_0x18ebcd,'order':_0x3b09a5,'isNewOrder':_0x4b127e},[_0x3b09a5['buffer']]),_0x3bc441=_0x5da2ac,_0x46ef92=_0x35057e;}catch(_0x53ad06){console['error']('排序操作失败:',_0x53ad06),self['postMessag'+'e']({'type':'error','error':_0x53ad06['message']});}_0x328237=!(0x9*0x8d+-0x1*-0x16aa+-0x1b9e),_0x53eb4d&&_0x4055fb();};}class Ib extends pe{constructor(){super(),h(this,'worker',null),h(this,'numSplats',-0x33*-0x9b+0x65b+-0x253c),h(this,'is4d',!(0x911+0x97*0x1a+0x1867*-0x1)),h(this,'sortStartT'+'ime',0xe3b*-0x2+-0xecc+0x2b42),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'data',{}),(this['orderTextu'+'re']=null,this['backOrderT'+'exture']=null,this['worker']=null,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+Mb['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x1276b9=>{var _0x3c559e;if(!this['worker'])return;const {data:_0x287cf8}=_0x1276b9;switch(_0x287cf8['type']){case'initialize'+'d':this['fire']('initialize'+'d');break;case'sortComple'+'ted':_0x287cf8['order']&&(_0x287cf8['isNewOrder']&&(this['orderTextu'+'re']=this['backOrderT'+'exture']),(_0x3c559e=this['orderTextu'+'re'])==null||_0x3c559e['write'](-0x1345+0x19c3+0x33f*-0x2,0x2e*0xa3+-0x35*-0xf+-0x2065,this['orderTextu'+'re']['width'],this['orderTextu'+'re']['height']-(-0x2*0x321+0x2400+-0x1dbd),_0x287cf8['order']));let _0x4b82fe=0x9c2+-0x13e5+-0x3*-0x361;this['sortStartT'+'ime']!==-0xc5*0xb+0x13b8*0x1+0xb41*-0x1&&(_0x4b82fe=performance['now']()-this['sortStartT'+'ime']),this['fire']('updated',_0x1276b9['data']['count'],_0x4b82fe,_0x287cf8['isNewOrder']),this['sortStartT'+'ime']=0x97*-0x37+-0x31f+-0x2*-0x11c8;break;case'error':console['error']('Worker错误:',_0x287cf8['error']),this['fire']('error',_0x287cf8['error']);break;}};const _0x34556d='https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/sorter-t'+'railing.wa'+'sm?t='+Date['now']();this['worker']['postMessag'+'e']({'type':'initWorker','sortWasmUrl':_0x34556d});}['initData'](_0x5be717,_0xb67bf9,_0x4e4e33,_0x5426f3,_0x5f435d,_0x37428a,_0x43e649,_0x19fb02){var _0x2f2302;this['is4d']=_0x19fb02,this['numSplats']=_0xb67bf9['length']/(-0x19*-0x2f+-0x1*0x17f3+0x57*0x39),(!_0x43e649||_0x43e649['length']===-0x162a+-0x133e+0x2968)&&(_0x43e649=[-0x2*0x61d+0x14c1+-0x887,0x1c08+-0x5a5+0x1627*-0x1]),this['orderTextu'+'re']||(this['orderTextu'+'re']=_0x5be717),this['backOrderT'+'exture']=_0x5be717;const _0x2f8d4f=new Date()['getTime']();(_0x2f2302=this['worker'])==null||_0x2f2302['postMessag'+'e']({'type':'initData','centers':_0xb67bf9,'muT':_0x4e4e33,'tScale':_0x5426f3,'motion':_0x5f435d,'timeIndex':_0x37428a,'timeOption':_0x43e649,'is4d':_0x19fb02,'id':_0x2f8d4f});}['setCamera'](_0x174009,_0x559f5a){this['worker']&&(!_0x174009||!_0x559f5a||(this['data']['cameraPosi'+'tion']={'x':_0x174009['x'],'y':_0x174009['y'],'z':_0x174009['z']},this['data']['cameraDire'+'ction']={'x':_0x559f5a['x'],'y':_0x559f5a['y'],'z':_0x559f5a['z']},this['sortStartT'+'ime']===-0xc7*-0x1+-0x45*-0xf+-0x4d2&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'sort','cameraPosition':{'x':_0x174009['x'],'y':_0x174009['y'],'z':_0x174009['z']},'cameraDirection':{'x':_0x559f5a['x'],'y':_0x559f5a['y'],'z':_0x559f5a['z']}})));}['setCurrent'+'Time'](_0x4b7e03){this['worker']&&(this['data']['time']=_0x4b7e03,this['sortStartT'+'ime']===0x863+0x539+-0xd9c&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'setTime','time':_0x4b7e03}));}['setUseTemp'+'oralSort'](_0x5917b4){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseTemp'+'oralSort','useTemporalSort':_0x5917b4});}['setUseDyna'+'micSort'](_0x4f60bb){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseDyna'+'micSort','useDynamicSort':_0x4f60bb});}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}const Db=new te(),Pa=new I(),Ma=new I(),ql=[-0x1*0x225d+0x1433*-0x1+0x3690,-0x84a*0x3+0x19cb*0x1+0x4f*-0x3];class Lb{constructor(_0x4a99fd,_0x3c85b7={}){h(this,'resource'),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'_material'),h(this,'meshInstan'+'ce'),h(this,'options',{}),h(this,'sorter',null),h(this,'time',0x14a6+0x21e0+0x3686*-0x1),h(this,'lastCamera'+'Position',new I()),h(this,'lastCamera'+'Direction',new I()),h(this,'resolveSH',null),h(this,'cameras',[]),h(this,'forceUpDat'+'eSorterTim'+'e',(_0xd1aa01,_0x44086a=void(-0x3df*-0x7+-0x44*-0x92+0x5*-0xd2d))=>{(_0x44086a||_0x44086a===-0x516+0x23ef+-0x1ed9)&&(this['material']['setParamet'+'er']('uTime',_0x44086a),this['updateTime'](_0x44086a)),this['sort'](_0xd1aa01);}),(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Instance',_0x4a99fd['numSplats']),this['resource']=_0x4a99fd,this['orderTextu'+'re']=this['resource']['createText'+'ure']('splatOrder',Vi,this['resource']['evalTextur'+'eSize'](this['resource']['numSplats'])),this['backOrderT'+'exture']=null,_0x3c85b7['material']?(this['_material']=_0x3c85b7['material'],this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])):(this['_material']=new In({'uniqueName':'SplatMater'+'ial','vertexGLSL':'#include\x20\x22'+'gsplatVS\x22','fragmentGLSL':'#include\x20\x22'+'gsplatPS\x22','vertexWGSL':'#include\x20\x22'+'gsplatVS\x22','fragmentWGSL':'#include\x20\x22'+'gsplatPS\x22','attributes':{'vertex_position':Pe,'vertex_id_attrib':Fh}}),this['configureM'+'aterial'](this['_material']),this['_material']['update']()),this['meshInstan'+'ce']=new We(this['resource']['mesh'],this['_material']),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(0x1c0c+0x21e3*0x1+-0x8d9*0x7)),this['meshInstan'+'ce']['gsplatInst'+'ance']=this,this['meshInstan'+'ce']['instancing'+'Count']=0x1fe3+-0x5*0x97+0x1cf0*-0x1,this['sorter']=new Ib(),this['sorter']['on']('initialize'+'d',()=>{var _0x2ac190,_0x108063,_0x95ad00,_0x399716,_0x58ce95,_0x5d0801,_0x2fdc4f,_0x2f12cf,_0x8ac0d2,_0x4b2bce,_0x32af3c;const _0x10cfa2=new Float32Array(this['resource']['centers']['buffer']['slice']()),_0x4e2d02=new Float32Array(((_0x108063=(_0x2ac190=this['resource']['muT'])==null?void(0x22ed+-0x161f*0x1+-0xcce):_0x2ac190['buffer'])==null?void(0xc3*-0x18+0x1137+0x111):_0x108063['slice']())??new Float32Array()),_0x38aa64=new Float32Array(((_0x399716=(_0x95ad00=this['resource']['tScale'])==null?void(0x1920+0x3*-0xbee+0xaaa):_0x95ad00['buffer'])==null?void(0x2*0xd31+0x1a8a+-0x34ec):_0x399716['slice']())??new Float32Array()),_0x197be7=new Float32Array(((_0x5d0801=(_0x58ce95=this['resource']['motion'])==null?void(-0x9e3+0xf73+0x2*-0x2c8):_0x58ce95['buffer'])==null?void(-0xaaf+-0x1b4e+0x5*0x799):_0x5d0801['slice']())??new Float32Array()),_0x1da5ed=new Float32Array(((_0x2f12cf=(_0x2fdc4f=this['resource']['timeIndex'])==null?void(-0x2*0xaba+0xd2e*-0x2+0x2fd0):_0x2fdc4f['buffer'])==null?void(-0x4ea+-0x2*0xaf3+0x1ad0):_0x2f12cf['slice']())??new Float32Array(0x11ab+0x1b64*0x1+-0x301*0xf)),_0x4c8937=new Float32Array(((_0x4b2bce=(_0x8ac0d2=this['resource']['timeOption'])==null?void(-0x1b1b+-0x1629+0x3144):_0x8ac0d2['buffer'])==null?void(-0x3*0xbb+0x136b+-0x113a):_0x4b2bce['slice']())??new Float32Array());(_0x32af3c=this['sorter'])==null||_0x32af3c['initData'](this['orderTextu'+'re'],_0x10cfa2,_0x4e2d02,_0x38aa64,_0x197be7,_0x1da5ed,_0x4c8937,this['resource']['is4D']);}),this['sorter']['on']('updated',async(_0x275734,_0x33480c,_0x3edea0)=>{var _0x47b411;this['meshInstan'+'ce']['instancing'+'Count']=Math['ceil'](_0x275734/this['resource']['instanceSi'+'ze']),_0x3edea0&&this['backOrderT'+'exture']&&(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatInst'+'ance\x20updat'+'ed'),[this['orderTextu'+'re'],this['backOrderT'+'exture']]=[this['backOrderT'+'exture'],this['orderTextu'+'re']],await this['resource']['updateText'+'ure'](),this['resource']['configureM'+'aterial'](this['_material']),this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])),_0x3edea0&&((_0x47b411=this['resource'])==null||_0x47b411['fireAssets'+'ManagerTim'+'eIndex']()),this['material']['setParamet'+'er']('numSplats',_0x275734);}),this['setHighQua'+'litySH'](_0x3c85b7['highQualit'+'ySH']??!(-0x6*-0x335+-0xdd2+0x1*-0x56b)));}async['updateInst'+'anceData'](_0x5ee51e){var _0x4fb90e,_0x28f30b;console['log']('____\x20ENGIN'+'E\x20IVAN','updateInst'+'anceData\x20A'+'SSETS\x20GSpl'+'atInstance',_0x5ee51e['numSplats']),this['resource']=_0x5ee51e;const _0x1947c1=this['resource']['evalTextur'+'eSize'](_0x5ee51e['centers']['length']/(-0x1a00+-0x244d+0x3e50));return(_0x4fb90e=this['backOrderT'+'exture'])==null||_0x4fb90e['destroy'](),this['backOrderT'+'exture']=this['resource']['createText'+'ure']('splatOrder'+'2',Vi,_0x1947c1),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0xad5+0x25e7+-0x1b12)),(_0x28f30b=this['sorter'])==null||_0x28f30b['initData'](this['backOrderT'+'exture'],_0x5ee51e['centers'],_0x5ee51e['muT'],_0x5ee51e['tScale'],_0x5ee51e['motion'],_0x5ee51e['timeIndex'],_0x5ee51e['timeOption'],_0x5ee51e['is4D']),new Promise(_0x5854a3=>{var _0x4d30e8;const _0x37fe26=(_0x2d4b54,_0x3b79cf,_0x567036)=>{var _0x5f4047;_0x567036&&((_0x5f4047=this['sorter'])==null||_0x5f4047['off']('updated',_0x37fe26),_0x5854a3(!(-0x1*0x16af+-0x2ad*0x5+0x2410)));};(_0x4d30e8=this['sorter'])==null||_0x4d30e8['on']('updated',_0x37fe26);});}['destroy'](){var _0x3ae402,_0x266296,_0x553eff,_0x69debb,_0x1a44bb,_0x876a88;(_0x3ae402=this['resolveSH'])==null||_0x3ae402['destroy'](),(_0x266296=this['material'])==null||_0x266296['destroy'](),(_0x553eff=this['meshInstan'+'ce'])==null||_0x553eff['destroy'](),(_0x69debb=this['sorter'])==null||_0x69debb['destroy'](),(_0x1a44bb=this['orderTextu'+'re'])==null||_0x1a44bb['destroy'](),(_0x876a88=this['backOrderT'+'exture'])==null||_0x876a88['destroy']();}set['material'](_0x267c27){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.set\x20'+'material'),this['_material']!==_0x267c27&&(this['_material']=_0x267c27,this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x267c27));}get['material'](){return this['_material'];}['configureM'+'aterial'](_0x486c8f,_0x1a6564={}){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.conf'+'igureMater'+'ial'),this['resource']['configureM'+'aterial'](_0x486c8f),_0x486c8f['setParamet'+'er']('numSplats',-0x2*-0x73d+0x1caa+-0x2b24*0x1),_0x486c8f['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),_0x486c8f['setParamet'+'er']('alphaClip',0x851*0x1+-0x215a+0xd*0x1ed+0.3),_0x486c8f['setDefine']('DITHER_'+(_0x1a6564['dither']?'BLUENOISE':'NONE'),''),_0x486c8f['cull']=xt,_0x486c8f['blendType']=_0x1a6564['dither']?ys:Gs,_0x486c8f['depthWrite']=!!_0x1a6564['dither'];}['updateView'+'port'](_0x4719df){var _0x4aee1e;const _0x1769a7=_0x4719df==null?void(0x1*-0x133+-0x2*0xe78+-0x607*-0x5):_0x4719df['camera'],_0x10fbb6=_0x1769a7==null?void(-0xc1a*0x2+0x1*-0x1508+-0x1e*-0x182):_0x1769a7['renderTarg'+'et'],{width:_0x592438,height:_0x230d15}=_0x10fbb6??this['resource']['device'];ql[-0x1738+0x9*-0x341+0x3481*0x1]=_0x592438,ql[-0x5*0x5b6+0x1*0x773+-0x2*-0xa8e]=_0x230d15;const _0x111914=(_0x4aee1e=_0x1769a7==null?void(-0x1629+-0x3*0xcf4+0x3d05):_0x1769a7['camera'])==null?void(-0x1d2b+-0x1*0x1381+0x30ac):_0x4aee1e['xr'];_0x111914!=null&&_0x111914['active']&&_0x111914['views']['list']['length']===0x4ca+-0x2085+0x1bbd&&(ql[-0x1*-0x8e1+0xd53+0x1d*-0xc4]*=0x1529+-0x64*0x5a+0xdff*0x1+0.5),this['material']['setParamet'+'er']('viewport',ql);}['sort'](_0xab3895){if(this['sorter']){const _0x350c9c=_0xab3895['getWorldTr'+'ansform']();_0x350c9c['getTransla'+'tion'](Pa),_0x350c9c['getZ'](Ma);const _0x25bdcb=this['meshInstan'+'ce']['node']['getWorldTr'+'ansform'](),_0x23e25a=Db['invert'](_0x25bdcb);_0x23e25a['transformP'+'oint'](Pa,Pa),_0x23e25a['transformV'+'ector'](Ma,Ma),(!Pa['equalsAppr'+'ox'](this['lastCamera'+'Position'])||!Ma['equalsAppr'+'ox'](this['lastCamera'+'Direction']))&&(this['lastCamera'+'Position']['copy'](Pa),this['lastCamera'+'Direction']['copy'](Ma),this['sorter']['setCamera'](Pa,Ma)),this['sorter']['setCurrent'+'Time'](this['time']);}this['updateView'+'port'](_0xab3895);}['update'](){var _0x130447;if(this['cameras']['length']>0x1*-0x26f9+0x1287+0xa39*0x2){const _0x4d9c62=this['cameras'][-0x25f+-0x1d45+-0x51*-0x64];this['sort'](_0x4d9c62['_node']),(_0x130447=this['resolveSH'])==null||_0x130447['render'](_0x4d9c62['_node'],this['meshInstan'+'ce']['node']['getWorldTr'+'ansform']()),this['cameras']['length']=-0x49*0x3a+0x2522+-0x1498;}}['setHighQua'+'litySH'](_0x63c278){const {resource:_0x91eaa5}=this,{gsplatData:_0x2557cc}=_0x91eaa5;_0x2557cc instanceof Pb&&_0x2557cc['shBands']>-0x14c1+-0x328*-0x3+0xb49&&_0x63c278===!!this['resolveSH']&&(this['resolveSH']?(this['resolveSH']['destroy'](),this['resolveSH']=null):this['resolveSH']=new wb(_0x91eaa5['device'],this));}['updateTime'](_0x47a50d){this['time']=_0x47a50d;}}class Vy{constructor(_0xd88616,_0x4e14b9){h(this,'sceneInfo',{}),h(this,'isDestroye'+'d',!(0x6ea*0x3+-0xa*0x1a8+0x6b*-0xa)),h(this,'device'),h(this,'gsplatData'),h(this,'centers'),h(this,'aabb'),h(this,'mesh'),h(this,'instanceIn'+'dices'),h(this,'gsplatInst'+'ance'),(this['device']=_0xd88616,this['gsplatData']=_0x4e14b9,this['isDestroye'+'d']=!(-0xf01+-0x1*-0x22d8+-0x2*0x9eb));const _0xa6fbdc=-0x1d89+0x36+0x1dd3,_0x867cda=Math['ceil'](_0x4e14b9['numSplats']/_0xa6fbdc)*_0xa6fbdc/_0xa6fbdc,_0x586974=new Uint32Array(_0x867cda);for(let _0x6cbb98=-0x1*-0x265b+0x37*0xa7+0x251e*-0x2;_0x6cbb98<_0x867cda;++_0x6cbb98)_0x586974[_0x6cbb98]=_0x6cbb98*_0xa6fbdc;const _0x3d8dc2=new zt(_0xd88616,[{'semantic':Fh,'components':0x1,'type':Do,'asInt':!(0x18e3+-0x1e12+-0x1*-0x52f)}]),_0x2210aa=new Float32Array((-0x6c*0xc+-0x397*-0x1+0x185)*_0xa6fbdc),_0x10afc4=new Uint32Array((0x6b*-0x11+0x1708+0xfe7*-0x1)*_0xa6fbdc);for(let _0x14b9ea=-0x1619+0x215b+-0xb42;_0x14b9ea<_0xa6fbdc;++_0x14b9ea){_0x2210aa['set']([-(0x2647*-0x1+-0x2*-0x747+-0xbdd*-0x2),-(0x26f7+-0x25a5+-0x151),_0x14b9ea,0x4f8+-0x4*-0x427+0x731*-0x3,-(0x438+-0x1301+-0x4ee*-0x3),_0x14b9ea,-0x18cd+-0x13*-0x16+0x2*0xb96,0x32c*-0x4+-0x1069*0x1+0x1d1a,_0x14b9ea,-(-0xc1f+0x881+-0x39f*-0x1),0x1949*-0x1+0xdc1*-0x1+0x270b*0x1,_0x14b9ea],_0x14b9ea*(0x595*-0x5+-0x4*0x13e+-0x1*-0x20ed));const _0x2f4471=_0x14b9ea*(-0xd04+-0x1b7a+0x2882);_0x10afc4['set']([0x18e5+-0x1dc2+0x4dd+_0x2f4471,-0x955*-0x3+0x2*0x123+-0x1e44+_0x2f4471,0x322*0x3+-0xe*-0x287+0x2*-0x1663+_0x2f4471,0x3*-0xa65+0x3b7*-0xa+0x4455+_0x2f4471,0x1694+-0xb0c+-0xb86+_0x2f4471,0x2*0x2ea+0x2348+-0x3*0xdb3+_0x2f4471],_0x14b9ea*(0x955*0x3+-0x7*-0x3ad+-0x1ada*0x2));}this['mesh']=new Ge(_0xd88616),this['mesh']['setPositio'+'ns'](_0x2210aa,-0x24c2+-0x1c70+0x4135),this['mesh']['setIndices'](_0x10afc4),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),this['instanceIn'+'dices']=new xs(_0xd88616,_0x3d8dc2,_0x867cda,{'usage':ls,'data':_0x586974['buffer']});}['updateData'](){var _0x1a36ad;const _0x47313b=this['gsplatData'];if(!_0x47313b)return;const _0x1ef576=-0x21b3+0x1*-0x1cb5+0x3ee8,_0x1ea439=Math['ceil'](_0x47313b['numSplats']/_0x1ef576)*_0x1ef576/_0x1ef576,_0x3090bc=new Uint32Array(_0x1ea439);for(let _0x1093ca=0x22f+-0x31*0x3d+0x1*0x97e;_0x1093ca<_0x1ea439;++_0x1093ca)_0x3090bc[_0x1093ca]=_0x1093ca*_0x1ef576;const _0x8a27af=new zt(this['device'],[{'semantic':Fh,'components':0x1,'type':Do,'asInt':!(-0x1*-0x1053+-0x214c+0x4f*0x37)}]),_0x56637b=new Float32Array((-0x103*0x15+0xe2b+0x720)*_0x1ef576),_0x2749ab=new Uint32Array((0xe*-0xa9+0xf28+0x1d*-0x34)*_0x1ef576);for(let _0x1f65ce=0xbbc+0x37a+-0x3b*0x42;_0x1f65ce<_0x1ef576;++_0x1f65ce){_0x56637b['set']([-(0x19d*-0x2+0x18ee+-0x457*0x5),-(0x366+0x88a*-0x1+0x525),_0x1f65ce,-0x11*0xcb+0x1*0x1ea3+-0x1127*0x1,-(0x1652+-0x2*-0x920+-0x2891),_0x1f65ce,-0x1f54+0x3d*-0x73+-0x1394*-0x3,0x1201+0x6a1+0x1*-0x18a1,_0x1f65ce,-(-0x87+0x1e4+0x57*-0x4),-0x2a3+0x1*0x2533+0x3*-0xb85,_0x1f65ce],_0x1f65ce*(-0xb0d+0x181a+-0xd01));const _0x5a192e=_0x1f65ce*(0x8a7*-0x2+0x1*-0x2111+0x1*0x3263);_0x2749ab['set']([0xf*-0x191+-0xf58*0x2+0x362f+_0x5a192e,-0x130a+0x1*0x2214+0xf09*-0x1+_0x5a192e,0x1782+-0x3*-0xa45+-0x364f*0x1+_0x5a192e,-0x1633+0x1c68+-0x1*0x635+_0x5a192e,0xa*-0x20e+-0x1e9+0x1677+_0x5a192e,0xe7*-0x7+0x26b4*-0x1+0x2d08+_0x5a192e],_0x1f65ce*(-0x13*-0x134+-0x161c+-0xba));}this['mesh']['setPositio'+'ns'](_0x56637b,-0x8ad+0x7*0x1be+0x382*-0x1),this['mesh']['setIndices'](_0x2749ab),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),(_0x1a36ad=this['instanceIn'+'dices'])==null||_0x1a36ad['destroy'](),this['instanceIn'+'dices']=new xs(this['device'],_0x8a27af,_0x1ea439,{'usage':ls,'data':_0x3090bc['buffer']});}['updateText'+'ure'](){}['destroy'](){var _0xe77123,_0x415a62,_0x173366,_0x262c12;(_0xe77123=this['mesh'])==null||_0xe77123['destroy'](),(_0x415a62=this['instanceIn'+'dices'])==null||_0x415a62['destroy'](),(_0x173366=this['gsplatData'])==null||_0x173366['destroy'](),this['gsplatData']=null,(_0x262c12=this['gsplatInst'+'ance'])==null||_0x262c12['destroy'](),this['gsplatInst'+'ance']=void(-0xe99+-0x1701+0x2*0x12cd),this['isDestroye'+'d']=!(-0x25be*0x1+-0x2310+0x48ce),this['mesh']=null;}get['instanceSi'+'ze'](){return-0x1039+-0x749+0xe*0x1b7;}get['numSplats'](){var _0x130399;return(_0x130399=this['gsplatData'])==null?void(0x9b7+-0x1737+0xd80):_0x130399['numSplats'];}['setSceneIn'+'fo'](_0x1a2f52){}['configureM'+'aterial'](_0xd517b9){}['evalTextur'+'eSize'](_0x580733){return J['ZERO'];}['appendGSpl'+'atResource'](_0x423fbf,_0xbd33f3,_0x4cd03a,_0x33e38b,_0x5307bf){}['fireAssets'+'ManagerTim'+'eIndex'](){}['createText'+'ure'](_0x28fd72,_0x1b09b6,_0x41e613,_0x57812c){return new _e(this['device'],{'name':_0x28fd72,'width':_0x41e613['x'],'height':_0x41e613['y'],'format':_0x1b09b6,'cubemap':!(0xad1*-0x3+-0xb*-0xb1+0x18d9),'mipmaps':!(0x1dd9+0x2468+-0x4240),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,..._0x57812c?{'levels':[_0x57812c]}:{}});}['instantiat'+'e'](){M['removed']('GSplatReso'+'urce.insta'+'ntiate\x20is\x20'+'removed.\x20U'+'se\x20gsplat\x20'+'component\x20'+'instead');}['createInst'+'ance'](_0x2f9d40,_0x1547cb){return this['gsplatInst'+'ance']=new Lb(_0x2f9d40,_0x1547cb),this['gsplatInst'+'ance'];}}async function Rb(){const _0x202844=new Float32Array(0x6*-0x41f+-0x1*-0xa1b+-0x270*-0x6),_0x5cc015=new Int32Array(_0x202844['buffer']);let _0x5cb215=null,_0x5b5f08=null,_0x473e17=null,_0x1ed8a1=null,_0x15fb43=null,_0x4f1708=null,_0x17e291=null,_0x4cf166=null;self['onmessage']=async _0x1f66bf=>{const {data:_0x587b4d}=_0x1f66bf;switch(_0x587b4d['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x38fe10(_0x587b4d['numSplats'],_0x587b4d['shBands'],_0x587b4d['SHData']);break;case'updateColo'+'rData':_0x22df03(_0x587b4d['numSplats'],_0x587b4d['cr'],_0x587b4d['cg'],_0x587b4d['cb'],_0x587b4d['ca']);break;case'updateTran'+'sformData':_0x2e8c1c(_0x587b4d['numSplats'],_0x587b4d['is4D'],_0x587b4d['x'],_0x587b4d['y'],_0x587b4d['z'],_0x587b4d['rx'],_0x587b4d['ry'],_0x587b4d['rz'],_0x587b4d['rw'],_0x587b4d['mx'],_0x587b4d['my'],_0x587b4d['mz'],_0x587b4d['sx'],_0x587b4d['sy'],_0x587b4d['sz'],_0x587b4d['muT'],_0x587b4d['tScale']);break;case'calcAabb':_0x223162(_0x587b4d['numSplats'],_0x587b4d['x'],_0x587b4d['y'],_0x587b4d['z'],_0x587b4d['sx'],_0x587b4d['sy'],_0x587b4d['sz']);break;case'destroyWor'+'ker':_0x2250fa();break;}};class _0x30adf4{constructor(_0xcdd70=0x1*-0x115+-0x1a42+0x1b57,_0xeb394d=0x49*0x11+-0x1a8d*0x1+0x15b4,_0x220942=-0xb*-0x2a3+-0x1*0x456+0x4ef*-0x5,_0xeaa110=0x10ac+0x1f6f+-0x2f*0x106){this['x']=_0xcdd70,this['y']=_0xeb394d,this['z']=_0x220942,this['w']=_0xeaa110;}['set'](_0x3ef6a1,_0x5dd814,_0xb8a7f9,_0x52736c){return this['x']=_0x3ef6a1,this['y']=_0x5dd814,this['z']=_0xb8a7f9,this['w']=_0x52736c,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x1c825a=this){let _0x596480=_0x1c825a['length']();return _0x596480===-0x1*-0x1931+0x43*-0x37+-0x2*0x566?(this['x']=this['y']=this['z']=-0x3*-0x2fc+-0x3f0*0x6+0xeac,this['w']=-0x66a*-0x4+0x952*-0x4+0xba1):(_0x596480=(-0x1e*-0x19+-0x97e+-0x1*-0x691)/_0x596480,this['x']=_0x1c825a['x']*_0x596480,this['y']=_0x1c825a['y']*_0x596480,this['z']=_0x1c825a['z']*_0x596480,this['w']=_0x1c825a['w']*_0x596480),this;}['mulScalar'](_0x215b15,_0x51f08d=this){return this['x']=_0x51f08d['x']*_0x215b15,this['y']=_0x51f08d['y']*_0x215b15,this['z']=_0x51f08d['z']*_0x215b15,this['w']=_0x51f08d['w']*_0x215b15,this;}}const _0x376d75=_0x5d82d0=>{_0x202844[0x158e+-0x8*0x437+0xc2a]=_0x5d82d0;const _0x1a50d3=_0x5cc015[-0x1158+0x1c01*-0x1+0x2d59];let _0x47b32d=_0x1a50d3>>0xa46+-0x1*0x10ae+0x678&0x1b99*-0x6+0x85*-0xcf+0x19121,_0x2193d1=_0x1a50d3>>0xf9a*-0x1+0x2135+0x1d*-0x9b&0x1*0x1973+-0x1*0xf79+-0xa9*0x3;const _0x46daa1=_0x1a50d3>>-0xd2*-0xb+0x37*0x9d+-0x2aaa&0x3*0x671+-0x1*-0x817+-0x1*0x1a6b;return _0x46daa1<0x5fc+-0x95d+0x1*0x3c8?_0x47b32d:_0x46daa1>0x6*-0x15f+-0x2014+0x28dc?(_0x47b32d|=0x1*-0xa061+0x89*0x8f+0xcfda,_0x47b32d|=(_0x46daa1===0x146c+0x8a1+-0x1c0e?0x1*0x89f+-0x1*-0xc2e+-0x47*0x4b:0x2*0x824+-0xe2b+0x87*-0x4)&&_0x1a50d3&0x53*0x134b6+0x4b81ba+-0x2f98bd,_0x47b32d):_0x46daa1<-0x927+0xee5+-0x54d?(_0x2193d1|=-0xacb*0x2+0x23d*0xb+0x4f7,_0x47b32d|=(_0x2193d1>>-0x80*-0x3f+-0x82*0x2b+0x14*-0x76-_0x46daa1)+(_0x2193d1>>0xf48+0x61*0x1+-0xf38-_0x46daa1&-0xe2a*0x1+-0x219b+0x2fc6),_0x47b32d):(_0x47b32d|=_0x46daa1-(-0x14a2+-0x8*0x31d+0x2dfa)<<-0x407*-0x3+0x1e56+-0x2a61|_0x2193d1>>0xa85*0x1+-0x1*-0x16a+0x3*-0x3fa,_0x47b32d+=_0x2193d1&-0x125*-0x14+0x5b1*-0x6+0xb43,_0x47b32d);},_0x223162=(_0x12b930,_0x3f009a,_0x1c169f,_0x5227f5,_0x4aa840,_0x3ab61a,_0x183617)=>{let _0x47df6d=-0xbc3+-0xf17*0x1+0x1eb*0xe,_0xa76135=0x1246+0xc86+0x6*-0x522,_0x4ef594=0x1f51+-0x1a51+-0x500,_0x113208=-0x41*-0x8d+0x1*-0x1689+-0xd44,_0x2223f8=0xf38*-0x1+0x9*-0x11e+-0x2*-0xca3,_0x1307bb=0x1*-0xbe1+0x3*0x1cd+-0x67a*-0x1,_0x3fff63=!(-0xc68+-0x3*0xa0b+0x2a89);const _0x1856b7=new Float32Array(0x20e*0x3+0x560+-0x1*0xb87),_0x2bb8e1=new Float32Array(-0x2225+0x7d*0x1d+0x1*0x13ff);for(let _0x3c021e=-0xa57*0x1+-0x2449+0x4*0xba8;_0x3c021e<_0x12b930;++_0x3c021e){const _0x413d13=_0x3f009a[_0x3c021e],_0x49bfca=_0x1c169f[_0x3c021e],_0x552a0c=_0x5227f5[_0x3c021e],_0x59a993=Math['max'](_0x4aa840[_0x3c021e],_0x3ab61a[_0x3c021e],_0x183617[_0x3c021e]);if(!isFinite(_0x413d13)||!isFinite(_0x49bfca)||!isFinite(_0x552a0c)||!isFinite(_0x59a993))continue;const _0x20406d=(0x1b2*-0x8+-0x1d6*0x11+0x2cc8)*Math['exp'](_0x59a993);_0x3fff63?(_0x3fff63=!(-0x1f8b+-0xd*-0xf6+-0x1*-0x130e),_0x47df6d=_0x413d13-_0x20406d,_0xa76135=_0x49bfca-_0x20406d,_0x4ef594=_0x552a0c-_0x20406d,_0x113208=_0x413d13+_0x20406d,_0x2223f8=_0x49bfca+_0x20406d,_0x1307bb=_0x552a0c+_0x20406d):(_0x47df6d=Math['min'](_0x47df6d,_0x413d13-_0x20406d),_0xa76135=Math['min'](_0xa76135,_0x49bfca-_0x20406d),_0x4ef594=Math['min'](_0x4ef594,_0x552a0c-_0x20406d),_0x113208=Math['max'](_0x113208,_0x413d13+_0x20406d),_0x2223f8=Math['max'](_0x2223f8,_0x49bfca+_0x20406d),_0x1307bb=Math['max'](_0x1307bb,_0x552a0c+_0x20406d));}_0x3fff63||(_0x1856b7[-0x705+0x2635+-0x1f30]=(_0x47df6d+_0x113208)*(-0x12cf+-0x2d*0x29+-0x1bc*-0xf+0.5),_0x1856b7[-0x2419*0x1+0x10f2+0x1328]=(_0xa76135+_0x2223f8)*(-0x4b*-0x6a+0x2024+0x3f32*-0x1+0.5),_0x1856b7[0x1*-0x1a91+0x126c+0x827]=(_0x4ef594+_0x1307bb)*(-0x1411+-0xee2+0x22f3+0.5),_0x2bb8e1[-0x1d*-0x67+0x5*-0x8b+-0x8f4]=(_0x113208-_0x47df6d)*(0x2*-0x279+-0x20d5+0x1fd*0x13+0.5),_0x2bb8e1[-0x22b0+-0x59+0x230a]=(_0x2223f8-_0xa76135)*(-0x1a33+0x37a+0x1*0x16b9+0.5),_0x2bb8e1[0x5a*-0x63+-0x77*-0x3c+0x6ec]=(_0x1307bb-_0x4ef594)*(-0x123*0x1+0x1715+-0x1*0x15f2+0.5)),self['postMessag'+'e']({'type':'updatedAab'+'bData','center':_0x1856b7,'halfExtents':_0x2bb8e1});},_0x2e8c1c=(_0x4748ff,_0xf14a40,_0x417d86,_0x5d8682,_0x1f07bd,_0x466d10,_0x285d0b,_0x51fb86,_0x338966,_0x425a2f,_0x332a04,_0x46fd72,_0x1ba762,_0x202952,_0xc5600b,_0xecefa5,_0x507593)=>{_0x2250fa(),_0x5cb215=new Float32Array(_0x4748ff*(-0x15a3*0x1+-0x1*0x36f+0x1915)),_0x1ed8a1=new Float32Array(_0x4748ff*(-0x120+0xa4c+-0x929)),_0x4f1708=new Uint16Array(_0x4748ff*(0x1aab*0x1+-0xe54+0x3*-0x41c)),_0x473e17=new Float32Array(_0x4748ff*(0x1233+0x1c2e*0x1+-0x2e5e)),_0xf14a40&&(_0x15fb43=new Float32Array(_0x4748ff*(0xf8f+0x15ce+-0x255a)),_0x5b5f08=new Float32Array(_0x4748ff*(-0x26f3+-0x7e5+0x2edb)),_0x17e291=new Float32Array(_0x4748ff*(0xe04+-0x5*0x233+-0x302)),_0x4cf166=new Float32Array(_0x4748ff));const _0xee00c5=new _0x30adf4(0x5da+-0x1f3*-0x3+-0x1*0xbb3,0x2592+0x3bf*-0xa+-0x1c,0x8af+-0x3*0x4c7+-0x1e2*-0x3,0x21c5+0x9*0x225+-0x3512);for(let _0x60641c=-0x15c4+-0x1c3a+0x31fe;_0x60641c<_0x4748ff;_0x60641c++)_0xee00c5['set'](_0x466d10[_0x60641c],_0x285d0b[_0x60641c],_0x51fb86[_0x60641c],_0x338966[_0x60641c]),_0xee00c5['normalize'](),_0xee00c5['w']<0x1e71+0x230d+-0x1*0x417e&&_0xee00c5['mulScalar'](-(-0x2262+0x1cc1+0x5a2*0x1)),_0x1ed8a1[_0x60641c*(-0x185b+0xd*-0x7+0x18b9)+(0x2*0x71e+-0x264b+-0x1*-0x180f)]=_0x417d86[_0x60641c],_0x1ed8a1[_0x60641c*(-0x1*-0x1daa+0x1d*-0x29+-0x1902)+(-0x90f+-0x639+0x5b*0x2b)]=_0x5d8682[_0x60641c],_0x1ed8a1[_0x60641c*(0x16f6+-0x3*-0x2b0+-0x1f03)+(-0x671*0x3+-0x969+0x1cbe)]=_0x1f07bd[_0x60641c],_0x5cb215[_0x60641c*(0x11*-0x1f5+0x4*0x6a1+0x6c4)+(0x1bba+0xf1b*0x1+0x3*-0xe47)]=_0x417d86[_0x60641c],_0x5cb215[_0x60641c*(-0x2*0xf9+0x1*0x1cc1+0x2ae*-0xa)+(-0x1d4e+0x9d*-0x29+-0x1b3a*-0x2)]=_0x5d8682[_0x60641c],_0x5cb215[_0x60641c*(-0x14f6*-0x1+0x4ae*0x5+-0x2c59)+(-0x11*0x158+-0x2b3+0x198d)]=_0x1f07bd[_0x60641c],_0x4f1708[_0x60641c*(-0x104+-0x3b6+0x4bd)+(-0x15af+0x4*0x12d+0x7*0x26d)]=_0x376d75(Math['exp'](_0x1ba762[_0x60641c])),_0x4f1708[_0x60641c*(0x401+0x1ce0+0x4b2*-0x7)+(0x2063+0x347*-0x8+-0x62a)]=_0x376d75(Math['exp'](_0x202952[_0x60641c])),_0x4f1708[_0x60641c*(-0xf2*-0x13+0xbb9+-0x4*0x76b)+(0x3*-0x2ad+-0x1*-0x1c63+-0x2*0xa2d)]=_0x376d75(Math['exp'](_0xc5600b[_0x60641c])),_0x473e17[_0x60641c*(0xfc8+-0xef3+0xd2*-0x1)+(-0x171f*-0x1+0x1ec8+0x35e7*-0x1)]=_0xee00c5['x'],_0x473e17[_0x60641c*(-0x2*0x526+0x1*-0x25c0+0x300f)+(0xd01+0x1*0x10a6+-0x1da6)]=_0xee00c5['y'],_0x473e17[_0x60641c*(0x341*-0x1+0x319+0x1*0x2b)+(0xd*0x1c6+-0x1*0x3b+-0x213*0xb)]=_0xee00c5['z'],_0xf14a40&&_0x15fb43&&_0x5b5f08&&(_0x15fb43[_0x60641c*(0x1b*0xbb+-0x1*0x87c+-0xb3a)+(0xf*0x14d+0x1e86+0x3209*-0x1)]=_0x425a2f[_0x60641c],_0x15fb43[_0x60641c*(-0x21f2+-0xbb9+0x2dae)+(-0x2*-0x2be+-0x1*-0x301+-0x87c)]=_0x332a04[_0x60641c],_0x15fb43[_0x60641c*(0x2459+0x5*0x709+-0x4783)+(0xdca+-0x252+0x12*-0xa3)]=_0x46fd72[_0x60641c],_0x17e291[_0x60641c*(0xae9+0x8*0x368+-0x2*0x1313)+(-0xa4*-0x29+-0x3ff+-0x1645)]=_0x425a2f[_0x60641c],_0x17e291[_0x60641c*(0x3*-0x9af+-0x11*-0x192+0x25e)+(0x1a56+-0x13ce+-0x3*0x22d)]=_0x332a04[_0x60641c],_0x17e291[_0x60641c*(0x49d*-0x1+0x2*0x5f9+-0x3a9*0x2)+(-0x1ad1+0x378+0x175b)]=_0x46fd72[_0x60641c],_0x4cf166[_0x60641c]=_0x507593?Math['exp'](_0x507593[_0x60641c]):-0xce2*-0x1+0x15eb+0x22cd*-0x1,_0x5b5f08[_0x60641c*(0x28*0xd8+0x11*0x227+-0x4*0x1195)+(-0x137e+-0xf2a+-0x1*-0x22a8)]=_0xecefa5?_0xecefa5[_0x60641c]:-0xc2f*-0x2+0xcd*-0x1a+0x1c6*-0x2,_0x5b5f08[_0x60641c*(0x1*0x1b7c+0x1b3b+-0x36b4)+(0x196d+0x13b0+0x1*-0x2d1c)]=_0x4cf166[_0x60641c]);const _0x55988b=[_0x5cb215['buffer'],_0x1ed8a1['buffer'],_0x4f1708['buffer'],_0x473e17['buffer']];_0xf14a40&&_0x55988b['push'](_0x15fb43['buffer'],_0x5b5f08['buffer'],_0x17e291['buffer'],_0x4cf166['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x5cb215,'dataPosition':_0x1ed8a1,'dataScale':_0x4f1708,'dataRotation':_0x473e17,'dataMotion':_0x15fb43,'dataTime':_0x5b5f08,'motion':_0x17e291,'tScaleArray':_0x4cf166},_0x55988b);},_0x22df03=(_0x259d5a,_0xba1e19,_0x1679a1,_0x2d3407,_0x385812)=>{const _0x59e94b=new Uint16Array(_0x259d5a*(-0x1e1*-0x7+0x1c7f*0x1+-0x29a2)),_0x40cf31=-0xb8f*0x1+0x21bb+0xc*-0x1d9+0.28209479177387814;for(let _0x48a6a2=-0x11f0+0xaf3*-0x1+0x1ce3;_0x48a6a2<_0x259d5a;++_0x48a6a2){const _0x36e773=_0xba1e19[_0x48a6a2]*_0x40cf31+(-0x181b*0x1+-0x395*-0x8+0x48d*-0x1+0.5),_0x391e53=_0x1679a1[_0x48a6a2]*_0x40cf31+(0x101f+0x1417*-0x1+0x3f8+0.5),_0x2f850f=_0x2d3407[_0x48a6a2]*_0x40cf31+(-0x34b+0xa1d+-0x6d2+0.5),_0x337547=_0x385812[_0x48a6a2];_0x59e94b[_0x48a6a2*(-0x9*0x17b+0x71*0x1+0xce6)+(0x3*0xb15+-0x405+-0x1d3a)]=_0x376d75(_0x36e773),_0x59e94b[_0x48a6a2*(0x18ce+0x307*-0xb+0x883)+(0x101*-0x21+-0x19*0x6d+0x2bc7)]=_0x376d75(_0x391e53),_0x59e94b[_0x48a6a2*(-0x1d3b+-0x3*-0x59f+-0xa*-0x13d)+(0x4*0x4b2+-0x3b9+0x1*-0xf0d)]=_0x376d75(_0x2f850f),_0x59e94b[_0x48a6a2*(0x22*0x61+0x5*-0x77c+0xe*0x1c1)+(0x204*-0x3+-0x5*-0x2cf+0x1*-0x7fc)]=_0x376d75(_0x337547);}self['postMessag'+'e']({'type':'updatedCol'+'orData','data':_0x59e94b});},_0x38fe10=(_0x1cb9b7,_0x50ec90,_0x403388)=>{const _0x1d92d5=new Uint32Array(_0x1cb9b7*(0xfa*0x19+-0x13*0xd1+-0x8e3)),_0x3d0e43=new Uint32Array(_0x1cb9b7*(0x1004+0x35b+-0x1*0x135b)),_0x57056e=new Uint32Array(_0x1cb9b7*(-0x1e87+-0xad*-0x2b+-0x5f*-0x4)),_0x2f05cb=new Uint32Array(_0x1cb9b7*(-0xd6d+-0xc*-0x223+-0xc33)),_0x1fcfea={0x1:0x3,0x2:0x8,0x3:0xf}[_0x50ec90],_0x4a2580=_0x403388,_0x875d84=0x1af2+0x2*0xe0b+0x2f09*-0x1,_0x5cdc24=0x484+0xacb+0x10*-0xb5,_0x29158a=new Float32Array(0xe72+-0xcb5*0x1+0x6f*-0x4),_0x5f0521=new Uint32Array(_0x29158a['buffer']),_0x1955f0=new Array(_0x1fcfea*(0x8*-0x139+-0xc8e+0x1659))['fill'](0x1a06+0x7*0x60+-0x13*0x182);for(let _0x33a85e=-0xdba+0x2333*-0x1+-0x9c9*-0x5;_0x33a85e<_0x1cb9b7;++_0x33a85e){for(let _0x4e9618=-0x701+-0x141*-0x4+0x1fd;_0x4e9618<_0x1fcfea;++_0x4e9618)_0x1955f0[_0x4e9618*(-0x1fd8+-0x1*-0x265+0x1d76)]=_0x4a2580[_0x4e9618][_0x33a85e],_0x1955f0[_0x4e9618*(0x468+0x5e*-0x5+-0x28f)+(0x10fa+-0x24ed+0x4*0x4fd)]=_0x4a2580[_0x4e9618+_0x1fcfea][_0x33a85e],_0x1955f0[_0x4e9618*(-0x17b+-0x75*-0x35+-0x16bb)+(0x1d08+0x11fd+-0x2f03)]=_0x4a2580[_0x4e9618+_0x1fcfea*(0x21c1+-0x158d+-0xc32)][_0x33a85e];let _0x23cc1b=_0x1955f0[-0x924+0x2b*0xd+0xd*0x89];for(let _0x5a7039=0x1515+-0x1aaf+-0x5*-0x11f;_0x5a7039<_0x1fcfea*(0x1d02+-0x24db+0x7dc);++_0x5a7039)_0x23cc1b=Math['max'](_0x23cc1b,Math['abs'](_0x1955f0[_0x5a7039]));if(_0x23cc1b!==-0xfd*0x3+0x263a+-0x2343*0x1){for(let _0x3b129e=-0x64+0x2652*0x1+-0x1*0x25ee;_0x3b129e<_0x1fcfea;++_0x3b129e)_0x1955f0[_0x3b129e*(0x17b3+-0x6*0x665+0xeae)+(-0x1e07+0x96*-0x32+0x1*0x3b53)]=Math['max'](0xcd*0x3+0x898+-0xaff,Math['min'](_0x875d84,Math['floor']((_0x1955f0[_0x3b129e*(0x2*0xe06+0x700*0x1+-0x2309)+(0x15db+-0x1d5c+0x1*0x781)]/_0x23cc1b*(0x11a6*-0x2+0x1de1+0x56b*0x1+0.5)+(0x1*-0x59e+0x8a5+0x1*-0x307+0.5))*_0x875d84+(-0x463*0x7+-0x843+0x4df*0x8+0.5)))),_0x1955f0[_0x3b129e*(0x2564*0x1+0x1*0x966+-0x5*0x95b)+(-0x7*0x571+0x20c1+-0x1*-0x557)]=Math['max'](-0x179*0x13+-0x1ca1+0x389c,Math['min'](_0x5cdc24,Math['floor']((_0x1955f0[_0x3b129e*(0x98d+-0xb3*-0x16+-0x74*0x37)+(0x10b9+0x6dd+-0x1795)]/_0x23cc1b*(0x2336+-0x63d*0x1+0x1*-0x1cf9+0.5)+(0x6*0x1fb+-0x144+0x1c5*-0x6+0.5))*_0x5cdc24+(0x2*0xa0e+-0x157+-0x9b*0x1f+0.5)))),_0x1955f0[_0x3b129e*(0x25da+-0x19de+-0xbf9)+(-0x616+-0x15a*0x2+0x8cc)]=Math['max'](-0x2207+0x305*-0x7+-0x1*-0x372a,Math['min'](_0x875d84,Math['floor']((_0x1955f0[_0x3b129e*(0x147a+-0x13e8+-0xd*0xb)+(-0x11*-0x19d+-0x1e4d+0x12*0x29)]/_0x23cc1b*(-0x3*0x3dd+-0x1bd2+0x13*0x213+0.5)+(-0xf24+0x10*-0x48+0x13a4+0.5))*_0x875d84+(-0x21b9+0x221e+0x65*-0x1+0.5))));_0x29158a[-0x1*0xdb2+-0x1a33+0x27e5]=_0x23cc1b,_0x1d92d5[_0x33a85e*(-0xf0d+0x3*-0x83f+0x27ce)+(0x52b*0x3+-0xc0b+0x1bb*-0x2)]=_0x5f0521[0x1c4*0x4+0x25af+-0x2cbf],_0x1d92d5[_0x33a85e*(0xc7*-0x13+0x60a*-0x5+0x66d*0x7)+(-0x6c7+-0x2*-0xabe+-0xeb4)]=_0x1955f0[0x1e50*-0x1+-0x1141*0x2+0x2*0x2069]<<-0x2037+-0x133e*-0x1+0xd0e|_0x1955f0[0x7f3+-0x11*0x1af+0x14ad]<<0x2*-0xeb4+-0x48*0x51+0x343b|_0x1955f0[0x2571+-0x89*-0x2+-0x2681*0x1],_0x1d92d5[_0x33a85e*(-0x3b3*-0x1+-0x2fc+-0xb3)+(-0x2042+0x128b*0x1+0xdb9)]=_0x1955f0[-0x183*-0x1+-0x13d9*0x1+0x1259]<<-0x92f+0xf5a+-0x616|_0x1955f0[-0x4cd*0x7+0x9*0x2f+0x4*0x7fe]<<0x16*0x95+0x13ed+-0x20b0|_0x1955f0[-0xc*-0x17c+0x247f*-0x1+-0x3f*-0x4c],_0x1d92d5[_0x33a85e*(0x13ac+-0x73*-0x1+0x141b*-0x1)+(-0x1c3f+-0x3*0x4a4+0x2a2e*0x1)]=_0x1955f0[-0x45d*0x5+0xdf*0x7+-0x2*-0x7df]<<-0x19d0+-0x128a+-0x36b*-0xd|_0x1955f0[-0xfa1*-0x1+-0x1*-0x1060+0x1ffa*-0x1]<<-0x1ba6*-0x1+0x1601+0x14*-0x27b|_0x1955f0[0x9d9*0x1+0x8*-0xb5+-0x1*0x429],_0x50ec90>-0x69*0x2a+0x1eca+-0x10b*0xd&&(_0x3d0e43[_0x33a85e*(0x23dc+0x4*0x685+-0x529*0xc)+(0x1c*-0x83+-0x24ce*0x1+0x3322)]=_0x1955f0[-0x1b71+0x1fef+-0x475]<<0x1d82+0xca+-0x1e37|_0x1955f0[-0x1227+-0x1*-0x1f71+0xd40*-0x1]<<0x1411*0x1+-0x48*0x35+-0x28f*0x2|_0x1955f0[-0x143e+0x1803+-0x3ba],_0x3d0e43[_0x33a85e*(0xadb+-0x484*-0x1+0x1*-0xf5b)+(0xb9b+-0xe48+0x2ae)]=_0x1955f0[-0x19*-0x11+-0x1657+0x14ba]<<0x9*0x191+-0x3*0x10d+-0x39f*0x3|_0x1955f0[0x41*0x43+0xabd+-0x1bb3]<<-0x98a*0x3+0x1571+0x738|_0x1955f0[0x2*0x317+-0x57a+-0x1*0xa6],_0x3d0e43[_0x33a85e*(-0x203*-0xd+-0x2185+0x762)+(0x1b81*-0x1+-0x2443+-0x6*-0xaa1)]=_0x1955f0[-0x8aa*0x4+-0x1219+0x34d0]<<-0xb9*-0x6+-0x89*-0x1c+0x1*-0x133d|_0x1955f0[0x42f+-0xc26+-0x807*-0x1]<<-0x1786+0xc77*0x2+-0x15d|_0x1955f0[0x26*0xb5+0x7f*-0x8+-0x16d5],_0x3d0e43[_0x33a85e*(0xc9*-0x1+0x2a5*0xb+0x4b7*-0x6)+(-0x15d3*0x1+0x1ab9+-0x4e3)]=_0x1955f0[0x1a8*0x7+0xb27+-0x87*0x2b]<<0x8fa+-0xf16+0x631|_0x1955f0[-0x1f07+-0x6f*-0x29+0xd53]<<0x16bd+0x18dd+-0x983*0x5|_0x1955f0[-0x5*0x2af+-0x81*0x12+-0x1*-0x1691],_0x50ec90>-0x6a*-0x14+0x1*0x1a51+0xa1*-0x37?(_0x57056e[_0x33a85e*(-0xba*-0x18+0x1999+-0x1*0x2b05)+(0x1493+-0x256*-0xf+-0x26b*0x17)]=_0x1955f0[-0x1*0x725+-0x1470+0x1baa]<<-0xac9*0x1+-0xcc4+0x17a2|_0x1955f0[0x242*0x3+-0x1de2+-0x2*-0xb99]<<-0xa0e+-0x1674+0x208d*0x1|_0x1955f0[-0x694+-0x1137+0x17e2],_0x57056e[_0x33a85e*(-0x36*0x7+-0x1*-0x7fa+-0x1*0x67c)+(0x7cf*-0x5+-0x133*-0x1d+0x445)]=_0x1955f0[-0x191c+0x12*-0x203+0x3d6a]<<0x19e7*0x1+0x7cf*0x1+-0x21a1|_0x1955f0[-0x1b88+-0x67*-0x4f+-0x4*0x10a]<<0x3e*0x1b+0x990+-0x1*0x100f|_0x1955f0[0x385*-0x6+0x4c*0x38+0x498],_0x57056e[_0x33a85e*(-0xb*-0x373+-0x770+-0x5*0x619)+(-0x3*0x3e6+-0x12e3+0xbf*0x29)]=_0x1955f0[-0x6*-0x54e+0x1*-0x1abb+-0x47*0x12]<<-0xdb1+0x18a5+-0xadf|_0x1955f0[0x1ad2+0xe13+0xc5*-0x35]<<-0x1fdb+-0x163*-0xc+0xf42|_0x1955f0[-0x12bb+-0x1*0x1b2d+0x42f*0xb],_0x57056e[_0x33a85e*(0x9e5+0xd43+0x2*-0xb92)+(-0xd92+-0xafa+0x188f)]=_0x1955f0[-0x2489+0x1a32+0xa75]<<-0x22dc+0x178f+-0xb62*-0x1|_0x1955f0[-0xf*-0x2a+0x17*-0x4+0x1fb*-0x1]<<0x10c7+0x7eb+-0x18a7|_0x1955f0[-0x1*0x19f1+0x236*-0x6+0x2755],_0x2f05cb[_0x33a85e*(0xf46+-0x12ec+0x2*0x1d5)+(0x228e+-0xc88*-0x3+-0xe6e*0x5)]=_0x1955f0[0x6e3+0x9f*-0x24+-0x7cd*-0x2]<<0x426+0x1*-0xb7e+0x1*0x76d|_0x1955f0[-0x1241+0x1b9e+-0x93b]<<-0x19d1+0x1736+0x2a6|_0x1955f0[-0x2*0x895+0x17ca*0x1+-0x67d],_0x2f05cb[_0x33a85e*(0x2651+0x1ecb*0x1+-0x21*0x218)+(0x1*-0x18ed+0x5f1+-0x1*-0x12fd)]=_0x1955f0[0x7*0x32f+0x2395+-0x39ba]<<0x29*-0x5c+-0x1bd6+-0xb3*-0x3d|_0x1955f0[0x1*-0x9d3+-0x130b+0x1d03*0x1]<<-0x1*-0x832+-0xb*-0x2fb+0x28f*-0x10|_0x1955f0[-0x17*-0x111+0x1*-0x11d7+-0x345*0x2],_0x2f05cb[_0x33a85e*(0x67*0x5+-0x30*0x89+0x17b1)+(0x872+0x1*0x202b+-0x15*0x1ef)]=_0x1955f0[0x1f7*0x11+0x1*0x2047+0x113*-0x3d]<<0xba6+0x187e+0x240f*-0x1|_0x1955f0[-0x1978+0xdef+-0x1*-0xbb1]<<-0x2*-0xa9+0x1*-0x575+0x42e|_0x1955f0[0x3b*-0x44+0x3f*0x69+0x2*-0x501],_0x2f05cb[_0x33a85e*(-0x5c4+0x160f+0x9*-0x1cf)+(0x1*0x1f73+0x1998+-0x3908)]=_0x1955f0[-0x97*0x13+0x1edc+-0x1*0x137d]<<0xa*0x129+0x1472*0x1+0x1ff7*-0x1|_0x1955f0[-0x159c+-0x2140+-0x1*-0x3707]<<0x10f7+-0x799*0x3+0x3*0x1f5|_0x1955f0[-0x9*-0x7f+-0x12*-0x83+-0xd81]):_0x57056e[_0x33a85e]=_0x1955f0[-0x2612+-0x10fc*0x2+0x481f]<<-0x1b43+0x1cad+-0x1f*0xb|_0x1955f0[-0xe*0x1ab+-0x2*-0x35+0x7*0x34a]<<0xdfa*-0x1+0x3bb*-0x4+0x1cf1|_0x1955f0[0x11*-0x20e+0x9*0x296+0xbbf]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x1d92d5,'sh4to7Data':_0x3d0e43,'sh8to11Data':_0x57056e,'sh12to15Data':_0x2f05cb}},[_0x1d92d5['buffer'],_0x3d0e43['buffer'],_0x57056e['buffer'],_0x2f05cb['buffer']]);},_0x2250fa=()=>{_0x5cb215=null,_0x5b5f08=null,_0x473e17=null,_0x1ed8a1=null,_0x15fb43=null,_0x4f1708=null,_0x17e291=null,_0x4cf166=null;};}let Ob=class extends pe{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+Rb['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x15978e,_0xd66df2,_0x45d693){_0x15978e['onmessage']=_0x145355=>{if(!this['worker'])return;const {data:_0x1bafe5}=_0x145355;if(_0x1bafe5['type']===_0xd66df2)switch(_0xd66df2){case'updatedSHD'+'ata1':_0x45d693(_0x1bafe5['data']);break;case'updatedCol'+'orData':_0x45d693(_0x1bafe5['data']);break;case'updatedTra'+'nsformData':_0x45d693(_0x1bafe5);break;case'updatedAab'+'bData':_0x45d693(_0x1bafe5);break;}};}['updateSHDa'+'ta1'](_0x263e68,_0x12613f,_0xb2a03a){var _0x5062c5;return(_0x5062c5=this['worker'])==null||_0x5062c5['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x263e68,'shBands':_0x12613f,'SHData':_0xb2a03a}),new Promise(_0x4a50e6=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x2d53b2=>{_0x4a50e6(_0x2d53b2);});});}async['updateColo'+'rData'](_0x2ca453,_0x3f1712,_0x5c6258,_0x37d489,_0x1db40f){var _0x3f42c9;return(_0x3f42c9=this['worker'])==null||_0x3f42c9['postMessag'+'e']({'type':'updateColo'+'rData','numSplats':_0x2ca453,'cr':_0x3f1712,'cg':_0x5c6258,'cb':_0x37d489,'ca':_0x1db40f}),new Promise(_0x2ac77e=>{this['workerMess'+'ageFn'](this['worker'],'updatedCol'+'orData',_0x5b4289=>{_0x2ac77e(_0x5b4289);});});}async['calcAabb'](_0x11042f,_0x512509,_0x3f8479,_0x17e02e,_0x487c34,_0x5c3a58,_0x3a7852){var _0x13511a;const _0x275056=new Float32Array(_0x512509),_0x593156=new Float32Array(_0x3f8479),_0x5ab42b=new Float32Array(_0x17e02e),_0x25baba=new Float32Array(_0x487c34),_0x7b1c39=new Float32Array(_0x5c3a58),_0x2b114c=new Float32Array(_0x3a7852);return(_0x13511a=this['worker'])==null||_0x13511a['postMessag'+'e']({'type':'calcAabb','numSplats':_0x11042f,'x':_0x275056,'y':_0x593156,'z':_0x5ab42b,'sx':_0x25baba,'sy':_0x7b1c39,'sz':_0x2b114c},[_0x275056['buffer'],_0x593156['buffer'],_0x5ab42b['buffer'],_0x25baba['buffer'],_0x7b1c39['buffer'],_0x2b114c['buffer']]),new Promise(_0xe26213=>{this['workerMess'+'ageFn'](this['worker'],'updatedAab'+'bData',_0x2e0ca5=>{_0xe26213(_0x2e0ca5);});});}async['updateTran'+'sData'](_0x5ba61b,_0x46bcf9,_0xb4c048,_0x2ef07d,_0x5634ca,_0x3f7e6b,_0x169456,_0x29de59,_0x595171,_0x38a07e,_0x50e518,_0x32bcfe,_0x4a4e57,_0x5ced4f,_0x2ca143,_0x46cddd,_0x28ec82){var _0xa664dc;return(_0xa664dc=this['worker'])==null||_0xa664dc['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x5ba61b,'is4D':_0x46bcf9,'x':_0xb4c048,'y':_0x2ef07d,'z':_0x5634ca,'rx':_0x3f7e6b,'ry':_0x169456,'rz':_0x29de59,'rw':_0x595171,'mx':_0x38a07e,'my':_0x50e518,'mz':_0x32bcfe,'sx':_0x4a4e57,'sy':_0x5ced4f,'sz':_0x2ca143,'muT':_0x46cddd,'tScale':_0x28ec82}),new Promise(_0x5e39c2=>{const _0x426181=_0x5e0f2a=>{_0x5e39c2(_0x5e0f2a);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x426181);});}['destroy'](){var _0x3d4691;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x3d4691=this['worker'])==null||_0x3d4691['terminate'](),this['worker']=null);}};const F_=(_0xcf215a,_0x303046)=>{const _0x15046b=[];for(let _0x4596ef=0x2042+0xccb+-0x2d0d;_0x4596ef<_0x303046;++_0x4596ef)_0x15046b['push'](_0xcf215a['getProp']('f_rest_'+_0x4596ef));return _0x15046b;};class Fb extends Vy{constructor(_0xefef2c,_0x1706d3){console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),super(_0xefef2c,_0x1706d3),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(0x18b*-0x19+0xfb*0x17+0x1007)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new Ob(),this['assetsMana'+'gerLoadedT'+'ime']=0x9*0x35+0x2236+-0x240e);}async['updateData'](){var _0x3d2edc,_0x5235e7,_0x45c5ec,_0x1e79d4,_0x416ea0,_0xa525c1,_0x53da87,_0x411842,_0x412ed9,_0x1ee521,_0x4a4879;console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Data'),await super['updateData']();const _0x24b037=this['gsplatData'];if(!_0x24b037)return;this['is4D']=_0x24b037['is4D'];const _0x352654=await this['getTransfo'+'rmDataByWo'+'rker'](_0x24b037);this['aabb']=new Ie(),await _0x24b037['calcAabbAs'+'ync'](this['aabb'],this['updateData'+'Worker']),this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x352654['centers'],this['motion']=_0x352654['motion'],this['tScale']=_0x352654['tScaleArra'+'y'],this['muT']=await _0x24b037['getMuT'](),this['timeIndex']=await _0x24b037['getTimeInd'+'ex']();const _0x12f1a9=this['evalTextur'+'eSize'](_0x24b037['numSplats']);this['colorTextu'+'re']?((_0x3d2edc=this['colorTextu'+'re2'])==null||_0x3d2edc['destroy'](),(_0x5235e7=this['transformA'+'Texture2'])==null||_0x5235e7['destroy'](),(_0x45c5ec=this['transformB'+'Texture2'])==null||_0x45c5ec['destroy'](),(_0x1e79d4=this['transformR'+'Texture2'])==null||_0x1e79d4['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',at,_0x12f1a9),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',je,_0x12f1a9),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ri,_0x12f1a9),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',je,_0x12f1a9),this['is4D']&&((_0x416ea0=this['transformM'+'otionTextu'+'re2'])==null||_0x416ea0['destroy'](),(_0xa525c1=this['transformL'+'ifecycleTe'+'xture2'])==null||_0xa525c1['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',je,_0x12f1a9),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',je,_0x12f1a9))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',at,_0x12f1a9),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',at,_0x12f1a9),this['transformA'+'Texture']=this['createText'+'ure']('transformA',je,_0x12f1a9),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',je,_0x12f1a9),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ri,_0x12f1a9),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ri,_0x12f1a9),this['transformR'+'Texture']=this['createText'+'ure']('transformR',je,_0x12f1a9),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',je,_0x12f1a9),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',je,_0x12f1a9),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',je,_0x12f1a9),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',je,_0x12f1a9),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',je,_0x12f1a9))),await this['updateColo'+'rData'](_0x24b037),await this['updateTran'+'sformFromD'+'ata'](_0x352654),this['shBands']=_0x24b037['shBands'],this['shBands']>-0x4fc+0x1d6a+-0x186e&&(this['sh1to3Text'+'ure']?((_0x53da87=this['sh1to3Text'+'ure2'])==null||_0x53da87['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ne,_0x12f1a9),this['shBands']>0x1aac+0x1815+0x74*-0x70&&((_0x411842=this['sh4to7Text'+'ure2'])==null||_0x411842['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ne,_0x12f1a9),this['shBands']>0x224b*0x1+0xee2+-0x312b?((_0x412ed9=this['sh8to11Tex'+'ture2'])==null||_0x412ed9['destroy'](),(_0x1ee521=this['sh12to15Te'+'xture2'])==null||_0x1ee521['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x12f1a9),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ne,_0x12f1a9)):((_0x4a4879=this['sh8to11Tex'+'ture2'])==null||_0x4a4879['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x12f1a9)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ne,_0x12f1a9),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ne,_0x12f1a9),this['shBands']>0x15*-0xef+0xe84+0x8*0xa3&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ne,_0x12f1a9),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ne,_0x12f1a9),this['shBands']>0x1*-0x2165+0x221b+-0xb4?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ne,_0x12f1a9),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x12f1a9),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ne,_0x12f1a9),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ne,_0x12f1a9)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Vi,_0x12f1a9),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Vi,_0x12f1a9)))),await this['updateSHDa'+'taByWorker'](_0x24b037));}['updateText'+'ure'](){console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Texture'),!this['isDestroye'+'d']&&(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x44eec5){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x44eec5}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20releas'+'eSeqGSplat'+'\x20all'),this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x3c587d,_0x490bf2,_0xedaa9,_0x5e1fd5,_0xef62ff){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x3c587d,'timeOption':_0x490bf2,'loadedTime':_0xedaa9,'asset':_0x5e1fd5,'events':_0xef62ff}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(-0x70*0x2d+0x117*-0x18+0x2dd8);try{for(;this['appendQueu'+'e']['length']>-0xf1a+0x1*-0x1164+0x2*0x103f;){const _0x35bc7b=this['appendQueu'+'e']['shift']();_0x35bc7b['type']==='append'?await this['processApp'+'endTask'](_0x35bc7b['data']):_0x35bc7b['type']==='release'&&await this['processRel'+'easeTask'](_0x35bc7b['data']);}}finally{this['isProcessi'+'ngQueue']=!(0xf9+0x3e*-0x91+0x2226);}}}async['processRel'+'easeTask'](_0x6e595a){const {index:_0x50d8ae}=_0x6e595a;console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.relea'+'seGSplatRe'+'source',_0x50d8ae),!this['isDestroye'+'d']&&await this['gsplatData']['releaseSeq'+'Data'](_0x50d8ae);}async['processApp'+'endTask'](_0xa79af3){var _0x315844;const {gsplatData:_0x3d0be8,timeOption:_0x1a0f67,loadedTime:_0x9db5f1,asset:_0xed6124,events:_0x3d9d0e}=_0xa79af3;!this['gsplatData']||this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.appen'+'dGSplatRes'+'ource'),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x1a0f67,await this['gsplatData']['appendGSpl'+'atData'](_0x3d0be8,_0x9db5f1,_0x1a0f67),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20gspla'+'tData.appe'+'ndGSplatDa'+'ta',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x234d+0x21a*-0x1+0x1d*-0x125),_0x3d0be8['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x3d0be8['numSplats'])['toFixed'](-0x466+0x1c7e*-0x1+0x20e7)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20this.'+'updateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x37f+0xa81*0x3+-0x1c02),_0x3d0be8['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),(_0x315844=this['gsplatInst'+'ance'])==null||_0x315844['updateInst'+'anceData'](this),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20updat'+'eInstanceD'+'ata',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x19*0x125+0x27a*-0xf+0x88b),_0x3d0be8['numSplats']),this['asset']=_0xed6124,this['assetsMana'+'gerLoadedT'+'ime']=_0x9db5f1,this['events']=_0x3d9d0e);}['fireAssets'+'ManagerTim'+'eIndex'](){var _0x22e288;const _0x526aaf=this['assetsMana'+'gerLoadedT'+'ime'];console['log']('____\x20ENGIN'+'E\x20IVAN','fireAssets'+'ManagerTim'+'eIndex',_0x526aaf),(_0x22e288=this['asset'])==null||_0x22e288['fire']('setAssetsL'+'oaded',_0x526aaf);}['destroy'](){var _0x321647,_0x515327,_0x21fa74,_0x1c2c0b,_0x125928,_0x56bc00,_0x21ae7d,_0x5ea6df,_0x17eba1,_0x4da755,_0x1bc40f,_0x18d5b2,_0x2e03f3,_0x51ada2,_0x244ae5,_0x541823,_0x1add47,_0x433e83,_0x111c8d,_0x559ed2,_0xb183f2;(_0x321647=this['updateData'+'Worker'])==null||_0x321647['destroy'](),this['updateData'+'Worker']=void(0x11*0xa0+0x2ab*0x4+-0x154c),(_0x515327=this['colorTextu'+'re'])==null||_0x515327['destroy'](),(_0x21fa74=this['transformA'+'Texture'])==null||_0x21fa74['destroy'](),(_0x1c2c0b=this['transformB'+'Texture'])==null||_0x1c2c0b['destroy'](),(_0x125928=this['transformR'+'Texture'])==null||_0x125928['destroy'](),(_0x56bc00=this['transformM'+'otionTextu'+'re'])==null||_0x56bc00['destroy'](),(_0x21ae7d=this['transformL'+'ifecycleTe'+'xture'])==null||_0x21ae7d['destroy'](),(_0x5ea6df=this['sh1to3Text'+'ure'])==null||_0x5ea6df['destroy'](),(_0x17eba1=this['sh4to7Text'+'ure'])==null||_0x17eba1['destroy'](),(_0x4da755=this['sh8to11Tex'+'ture'])==null||_0x4da755['destroy'](),(_0x1bc40f=this['sh12to15Te'+'xture'])==null||_0x1bc40f['destroy'](),(_0x18d5b2=this['colorTextu'+'re2'])==null||_0x18d5b2['destroy'](),(_0x2e03f3=this['transformA'+'Texture2'])==null||_0x2e03f3['destroy'](),(_0x51ada2=this['transformB'+'Texture2'])==null||_0x51ada2['destroy'](),(_0x244ae5=this['transformR'+'Texture2'])==null||_0x244ae5['destroy'](),(_0x541823=this['transformM'+'otionTextu'+'re2'])==null||_0x541823['destroy'](),(_0x1add47=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x1add47['destroy'](),(_0x433e83=this['sh1to3Text'+'ure2'])==null||_0x433e83['destroy'](),(_0x111c8d=this['sh4to7Text'+'ure2'])==null||_0x111c8d['destroy'](),(_0x559ed2=this['sh8to11Tex'+'ture2'])==null||_0x559ed2['destroy'](),(_0xb183f2=this['sh12to15Te'+'xture2'])==null||_0xb183f2['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x37dcd6){var _0x3af31c,_0x586d47,_0x51b9f9,_0x32698e,_0x41172f,_0x2edc06,_0x1d04ec,_0x4b046f,_0xf568c1,_0x295870,_0x2012a4,_0x31a039,_0x5e7df1;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x3c33ff=((_0x3af31c=_0x37dcd6['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0xd7b*-0x1+-0x1*0x23ad+-0x766*-0x3):_0x3af31c['data'])??-0x839+-0x2331+0x2b6a,_0x2ecc27=((_0x586d47=_0x37dcd6['getParamet'+'er']('uSplatScal'+'e'))==null?void(0x1778+0x1*0xeb3+0x262b*-0x1):_0x586d47['data'])??0xe*-0x9+0x920*-0x4+-0x3*-0xc55,_0x3ebc8c=((_0x51b9f9=_0x37dcd6['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x1*-0x22c5+0x9af+0xa*-0x472):_0x51b9f9['data'])??0xc92*-0x2+-0x65e+0x1f83*0x1,_0x43bb1f=((_0x32698e=_0x37dcd6['getParamet'+'er']('uHueOffset'))==null?void(0x1a*0x10b+-0x3*0x5e7+-0x969):_0x32698e['data'])??-0x4b*-0x10+-0x3*0x2fb+0x441,_0x495f21=((_0x41172f=_0x37dcd6['getParamet'+'er']('uInvertOpa'+'city'))==null?void(0xc7f*-0x2+0x1cc4+-0x3c6):_0x41172f['data'])??-0x1461*0x1+0x2196+0x17*-0x93,_0x2e5d08=((_0x2edc06=_0x37dcd6['getParamet'+'er']('uOpacity'))==null?void(-0x19c+-0x3*0x959+0x1*0x1da7):_0x2edc06['data'])??0xa33*-0x1+0x11*-0x212+0x2d66,_0x4ee38d=((_0x1d04ec=_0x37dcd6['getParamet'+'er']('clrOffset'))==null?void(-0x2421+-0x3*0xc5e+0x493b):_0x1d04ec['data'])??[0x1*0x856+0x8a4+-0x10fa,0x1*-0x315+0x14d5+0x40*-0x47,0x11fb+0x16*0x12f+-0x2c05,0x251*0xd+0x6*-0x5aa+-0x7c*-0x8],_0x15dd59=((_0x4b046f=_0x37dcd6['getParamet'+'er']('clrScale'))==null?void(0x1cf*0xd+-0x9da+0x10d*-0xd):_0x4b046f['data'])??[0x1381+0xe9f+0x221f*-0x1,0x2312*-0x1+0x2001+0x312,-0x16a3+-0xea0+-0x31b*-0xc,0x770+-0x6*-0x25b+-0x1591*0x1],_0x11edf1=((_0xf568c1=_0x37dcd6['getParamet'+'er']('uShapeN'))==null?void(-0xb*0x28+0x810*0x1+-0x658*0x1):_0xf568c1['data'])??-0x5c*-0x43+0x1*-0x393+0xb5*-0x1d,_0x470319=((_0x295870=_0x37dcd6['getParamet'+'er']('mode'))==null?void(0xb*-0x103+0x1*-0x1f55+0x2a76*0x1):_0x295870['data'])??0x1ec+-0x1d*-0x33+-0x3*0x291,_0x19566d=((_0x2012a4=_0x37dcd6['getParamet'+'er']('ringSize'))==null?void(-0xed5+-0x1d5e+-0x9b*-0x49):_0x2012a4['data'])??0x9d+0x9*0x335+-0x62*0x4d,_0x5dad2b=((_0x31a039=_0x37dcd6['defines'])==null?void(-0x737+0x1cbf+0x1a8*-0xd):_0x31a039['get']('uOpenAnim'))??'0',_0x4c3764=((_0x5e7df1=_0x37dcd6['defines'])==null?void(0x1*-0x97d+-0x1fed+0x296a):_0x5e7df1['get']('uControlCo'+'lorMode'))??'0';_0x37dcd6['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x37dcd6['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x37dcd6['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x37dcd6['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x37dcd6['setParamet'+'er']('uSplatScal'+'e',_0x2ecc27),_0x37dcd6['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x3c33ff),_0x37dcd6['setParamet'+'er']('uSaturatio'+'n',_0x3ebc8c),_0x37dcd6['setParamet'+'er']('uHueOffset',_0x43bb1f),_0x37dcd6['setParamet'+'er']('uInvertOpa'+'city',_0x495f21),_0x37dcd6['setParamet'+'er']('uOpacity',_0x2e5d08),_0x37dcd6['setParamet'+'er']('clrOffset',_0x4ee38d),_0x37dcd6['setParamet'+'er']('clrScale',_0x15dd59),_0x37dcd6['setParamet'+'er']('uShapeN',_0x11edf1),_0x37dcd6['setParamet'+'er']('mode',_0x470319),_0x37dcd6['setParamet'+'er']('ringSize',_0x19566d),_0x37dcd6['setParamet'+'er']('prerenderC'+'Time',0xbaf+0x13*-0x9a+0x41*-0x1),_0x37dcd6['setParamet'+'er']('renderSpac'+'e',0x1206+-0x1ca8+0xaac),_0x37dcd6['setParamet'+'er']('endSpace',0x2*0x464+0x25a3+0x2e61*-0x1),_0x37dcd6['setDefine']('uOpenAnim',_0x5dad2b),_0x37dcd6['setDefine']('uControlCo'+'lorMode',_0x4c3764),this['transformM'+'otionTextu'+'re']&&_0x37dcd6['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x37dcd6['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x37dcd6['setDefine']('SH_BANDS',this['shBands']),_0x37dcd6['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x37dcd6['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x37dcd6['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x37dcd6['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x37dcd6['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x32db82){const _0x1b66a7=Math['ceil'](Math['sqrt'](_0x32db82)),_0x460c03=Math['ceil'](_0x32db82/_0x1b66a7);return new J(_0x1b66a7,_0x460c03);}async['updateColo'+'rData'](_0x26114a){var _0x478cf0;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x2447e1=this['colorTextu'+'re2'];if(!_0x2447e1||this['isDestroye'+'d'])return;const _0x5dd882=_0x26114a['getProp']('f_dc_0'),_0x2653fe=_0x26114a['getProp']('f_dc_1'),_0x4faa93=_0x26114a['getProp']('f_dc_2'),_0x271626=_0x26114a['getProp']('opacity');let _0x455eb8=(_0x478cf0=_0x26114a['transformD'+'ata'])==null?void(0x1dc1+0x1aef+-0x1c58*0x2):_0x478cf0['dataColor'];_0x455eb8||(_0x455eb8=await this['updateData'+'Worker']['updateColo'+'rData'](_0x26114a['numSplats'],_0x5dd882,_0x2653fe,_0x4faa93,_0x271626)),await this['idleUpdate'+'TexturePro'+'mise'](_0x2447e1,_0x455eb8);}async['getTransfo'+'rmDataByWo'+'rker'](_0x4d3840){var _0x1b8e42;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x1b8e42=_0x4d3840['transformD'+'ata'])!=null&&_0x1b8e42['dataCenter'+'s'])return{'centers':_0x4d3840['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x4d3840['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x4d3840['transformD'+'ata']['dataScale'],'dataRotation':_0x4d3840['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x4d3840['transformD'+'ata']['dataMotion'],'dataTime':_0x4d3840['transformD'+'ata']['dataTime'],'motion':_0x4d3840['transformD'+'ata']['motion'],'tScaleArray':_0x4d3840['transformD'+'ata']['tScaleArra'+'y']};const _0x34ebcf=_0x4d3840['getProp']('x'),_0x3f5932=_0x4d3840['getProp']('y'),_0x46986a=_0x4d3840['getProp']('z'),_0x2db4fd=_0x4d3840['getProp']('rot_1'),_0x467a42=_0x4d3840['getProp']('rot_2'),_0x6b550c=_0x4d3840['getProp']('rot_3'),_0x2b1105=_0x4d3840['getProp']('rot_0'),_0x2ee7ff=_0x4d3840['getProp']('motion_0'),_0x4cced7=_0x4d3840['getProp']('motion_1'),_0xc47995=_0x4d3840['getProp']('motion_2'),_0xed0bdf=_0x4d3840['getProp']('scale_0'),_0x27310f=_0x4d3840['getProp']('scale_1'),_0x209400=_0x4d3840['getProp']('scale_2'),_0x44ca34=_0x4d3840['getProp']('t'),_0x55e209=_0x4d3840['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x4d3840['numSplats'],this['is4D'],_0x34ebcf,_0x3f5932,_0x46986a,_0x2db4fd,_0x467a42,_0x6b550c,_0x2b1105,_0x2ee7ff,_0x4cced7,_0xc47995,_0xed0bdf,_0x27310f,_0x209400,_0x44ca34,_0x55e209);}async['updateTran'+'sformFromD'+'ata'](_0x519d53){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x519d53['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x519d53['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x519d53['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x519d53['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x519d53['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x7e8c55,_0x3249b2){if(!this['isDestroye'+'d'])return new Promise(_0x38010b=>{requestIdleCallback(()=>{const _0x207828=_0x7e8c55['lock']();_0x207828==null||_0x207828['set'](_0x3249b2),_0x7e8c55['unlock'](),_0x38010b(!(0x1*-0x709+0x1*0x208b+0xa*-0x28d));},{'timeout':0x12c});});}async['updateTran'+'sformData'](_0x54af12){var _0x3f1fbc,_0x1b44e7,_0x199303,_0x5a224d;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformData'),this['isDestroye'+'d'])return;const _0x3f8c46=mn['float2Half'];if(!this['transformA'+'Texture'])return;const _0x3008c6=this['transformA'+'Texture']['lock'](),_0x5d2050=this['transformR'+'Texture']['lock'](),_0x5c1c62=this['transformB'+'Texture']['lock'](),_0x4a3054=(_0x3f1fbc=this['transformM'+'otionTextu'+'re'])==null?void(-0x124f+0x2c8*0xd+-0x5f3*0x3):_0x3f1fbc['lock'](),_0x5acad8=(_0x1b44e7=this['transformL'+'ifecycleTe'+'xture'])==null?void(-0x936+-0x2*-0x935+-0x934):_0x1b44e7['lock'](),_0x320703=new I(),_0x47a71b=new le(),_0x4c32e3=new I(),_0x298d36=new I(),_0x4f7ce5=_0x54af12['createIter'](_0x320703,_0x47a71b,_0x4c32e3,null,_0x298d36),_0x16600e=_0x54af12['getProp']('t'),_0x123b41=_0x54af12['getProp']('t_scale');for(let _0x1cfa7c=-0xcf7*-0x1+-0x37d+-0x97a;_0x1cfa7c<_0x54af12['numSplats'];_0x1cfa7c++)_0x4f7ce5['read'](_0x1cfa7c),_0x47a71b['normalize'](),_0x47a71b['w']<-0x5cb*0x1+-0x4cd*-0x4+-0x1*0xd69&&_0x47a71b['mulScalar'](-(-0x25d6+0x385*-0x8+0x41ff)),_0x3008c6[_0x1cfa7c*(0x1*-0x1805+0x1*0x607+0x1a3*0xb)+(-0x681+-0x21d4+0x7*0x5c3)]=_0x320703['x'],_0x3008c6[_0x1cfa7c*(-0x22a3+0x172f*-0x1+-0x7*-0x843)+(-0x1*-0x17e+-0x19*-0xb9+-0x138e)]=_0x320703['y'],_0x3008c6[_0x1cfa7c*(0x30a*0xb+0x1*-0x802+0x1969*-0x1)+(0x125*-0xe+-0x12a1*-0x2+-0x153a)]=_0x320703['z'],_0x5c1c62[_0x1cfa7c*(-0x1579*0x1+-0x1ec2+-0x12*-0x2e7)+(-0x146e+-0x1f89+-0x35*-0xfb)]=_0x3f8c46(_0x4c32e3['x']),_0x5c1c62[_0x1cfa7c*(-0x224b*0x1+0x1*-0x11f7+0x3445)+(-0xb65*0x1+0x7ca+0x39c)]=_0x3f8c46(_0x4c32e3['y']),_0x5c1c62[_0x1cfa7c*(0x7b1*0x5+-0x15ad*-0x1+-0x3c1f)+(0x18d3+0x3*-0x24+-0x1*0x1865)]=_0x3f8c46(_0x4c32e3['z']),_0x5d2050[_0x1cfa7c*(-0x20ff+-0x1*-0x737+0x19cb)+(0x1*-0x132+0x2*-0x5ad+0xc8c)]=_0x47a71b['x'],_0x5d2050[_0x1cfa7c*(0x162+-0x6a3*-0x2+-0x1*0xea5)+(-0x4*-0x3e1+-0x1d*0x115+0x7ef*0x2)]=_0x47a71b['y'],_0x5d2050[_0x1cfa7c*(-0x118c*0x2+-0x1a*-0x164+0x1*-0x10d)+(-0x218b+0x1b9b*-0x1+0x7a5*0x8)]=_0x47a71b['z'],this['is4D']&&_0x4a3054&&_0x5acad8&&(_0x4a3054[_0x1cfa7c*(-0x16d*0xb+-0x11*0xfd+-0xb1*-0x2f)+(0x99f*0x4+-0x1*0x13c3+-0x12b9)]=_0x298d36['x'],_0x4a3054[_0x1cfa7c*(-0x56*-0x58+0x2a*-0xa1+0x1*-0x323)+(0x1*0x5d0+0x1308+-0x18d7)]=_0x298d36['y'],_0x4a3054[_0x1cfa7c*(-0x1ff*0x13+-0x159a+0x3b8a)+(0x5b+0xc15+-0xc6e)]=_0x298d36['z'],_0x5acad8[_0x1cfa7c*(0x2035*-0x1+-0x1*0x136d+0x33a5)+(0xbfc+0xfe8+-0x3*0x94c)]=_0x16600e?_0x16600e[_0x1cfa7c]:0x9cd*0x1+0x2*0xf45+-0x2857*0x1,_0x5acad8[_0x1cfa7c*(0xe0d+0x1*-0xa53+-0x1*0x3b7)+(-0x1711+-0x1dc8+0x34da)]=_0x123b41?Math['exp'](_0x123b41[_0x1cfa7c]):0xb1*-0x29+-0xe00+0x25*0x125);this['transformA'+'Texture']['unlock'](),this['transformB'+'Texture']['unlock'](),this['transformR'+'Texture']['unlock'](),(_0x199303=this['transformM'+'otionTextu'+'re'])==null||_0x199303['unlock'](),(_0x5a224d=this['transformL'+'ifecycleTe'+'xture'])==null||_0x5a224d['unlock']();}async['updateSHDa'+'ta'](_0x53031c){var _0x5be454,_0x1a4229,_0x5db84d,_0x484206,_0x247d3e,_0x2e106e,_0x190929,_0x4f8ccc;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x267756=(_0x5be454=this['sh1to3Text'+'ure2'])==null?void(-0x1*0x955+0x1*0x11+-0x251*-0x4):_0x5be454['lock'](),_0x41f18d=(_0x1a4229=this['sh4to7Text'+'ure2'])==null?void(-0xc20+0x763+0x4bd):_0x1a4229['lock'](),_0x474cd0=(_0x5db84d=this['sh8to11Tex'+'ture2'])==null?void(-0x70c*-0x1+-0x2*0xfd6+0x18a0):_0x5db84d['lock'](),_0x4d5647=(_0x484206=this['sh12to15Te'+'xture2'])==null?void(0x14a1+-0x1d*0x1c+-0x1175*0x1):_0x484206['lock'](),_0x100367={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x22354a=F_(_0x53031c,_0x100367*(0x1da6+0x1c6b*0x1+-0x3*0x135a)),_0x250f6c=0x95*-0x2f+0x2265+0x5*0x31,_0x499c94=-0x1*0x2046+0x1a95*-0x1+-0x2*-0x1f6d,_0x175ab8=new Float32Array(-0x1edd*-0x1+0x223d+0x15b3*-0x3),_0x2393d1=new Uint32Array(_0x175ab8['buffer']),_0x36624a=new Array(_0x100367*(0xdef+0x1*0xcab+-0x8dd*0x3))['fill'](0x63b+-0x6e5+0xaa);for(let _0x4bf0a0=-0x1e21+-0x1763*-0x1+0x2*0x35f;_0x4bf0a0<_0x53031c['numSplats'];++_0x4bf0a0){for(let _0x5b8bbe=-0x2f*0xbd+-0x7*0x4b7+0x9ac*0x7;_0x5b8bbe<_0x100367;++_0x5b8bbe)_0x36624a[_0x5b8bbe*(-0x2584+0x1808*-0x1+0x3d8f)]=_0x22354a[_0x5b8bbe][_0x4bf0a0],_0x36624a[_0x5b8bbe*(0x1344+-0x20e8+0x1*0xda7)+(0x3e4+-0x9cd+-0x2f5*-0x2)]=_0x22354a[_0x5b8bbe+_0x100367][_0x4bf0a0],_0x36624a[_0x5b8bbe*(-0xe67+0x1445+-0x5db)+(0x18fc+0xd4d+-0x29*0xef)]=_0x22354a[_0x5b8bbe+_0x100367*(-0x1612*-0x1+-0x5*0x1f7+-0xf1*0xd)][_0x4bf0a0];let _0x12b167=_0x36624a[0x23b1*0x1+-0x2399+-0x18];for(let _0x2ba67a=0x1d45+0x9c9+-0x270d;_0x2ba67a<_0x100367*(-0xdb2+0x3f1+-0x14*-0x7d);++_0x2ba67a)_0x12b167=Math['max'](_0x12b167,Math['abs'](_0x36624a[_0x2ba67a]));if(_0x12b167!==-0x1b*0x171+0xaf1*0x3+0x618){for(let _0x388668=-0x269c+0x848+0x1e54;_0x388668<_0x100367;++_0x388668)_0x36624a[_0x388668*(-0x72e+-0x293*-0x6+-0x841)+(0x652+0x8*-0x33b+0x1386)]=Math['max'](-0x11ab*0x1+-0x6*-0x370+-0x2f5,Math['min'](_0x250f6c,Math['floor']((_0x36624a[_0x388668*(0x25c3+0x3*-0x4d4+-0x1744)+(-0x1e22+-0x44c+0x226e)]/_0x12b167*(0x2*0x2d+-0x12d6+0x2*0x93e+0.5)+(-0xd6*0x23+0x1*-0xcc9+-0x1*-0x2a0b+0.5))*_0x250f6c+(0xaf+0x1*0x16e5+0x5e5*-0x4+0.5)))),_0x36624a[_0x388668*(-0x1*-0x1ed+-0x3a+-0x30*0x9)+(0x269d+0x1*0x9f9+0x1*-0x3095)]=Math['max'](0x1*0x1e86+0x255c+-0x43e2*0x1,Math['min'](_0x499c94,Math['floor']((_0x36624a[_0x388668*(-0x937*0x3+-0x1e90+0x6*0x9b4)+(-0xe8b+0x102c+-0x1a0)]/_0x12b167*(-0xac1+-0x18a*-0x17+-0x837*0x3+0.5)+(-0x997*-0x2+0x1*-0x184b+0x77*0xb+0.5))*_0x499c94+(0x199c+0x14fe+-0x2e9a+0.5)))),_0x36624a[_0x388668*(-0x4*0x46f+0xf62+0x5*0x79)+(-0x4*0x572+0xe1f+0x1*0x7ab)]=Math['max'](0x844+-0x824+0x2*-0x10,Math['min'](_0x250f6c,Math['floor']((_0x36624a[_0x388668*(0x17e5+-0x1*0x1223+-0x5bf)+(-0xed1*0x2+-0x15ae+0x3352)]/_0x12b167*(0x1*-0x55a+-0x4c4*-0x5+-0x127a+0.5)+(0x27*-0x71+0x1a7e+-0x947+0.5))*_0x250f6c+(0x35*0xa3+0x56c+-0x272b+0.5))));_0x175ab8[0xb13+-0x20fd+0x15ea]=_0x12b167,_0x267756[_0x4bf0a0*(0xcf5+0x2f9*0xd+-0x6*0x899)+(-0x17e7+-0x1*0x6db+0x1*0x1ec2)]=_0x2393d1[0x1*0x4dc+-0x1b6*-0x11+-0x21f2],_0x267756[_0x4bf0a0*(0x4*-0x99a+0x163*0x16+0x2*0x3f5)+(0x129*0xd+0x1*0x1409+-0x231d)]=_0x36624a[0x13d9+0x646*0x4+-0x2cf1]<<0x77*-0x3b+0x1*-0x5f2+0x2174|_0x36624a[-0x144a+-0x1*-0xcd3+-0x778*-0x1]<<0xe72+0x2*0x410+-0x1687|_0x36624a[0x7d5+-0x19b4+0x1*0x11e1],_0x267756[_0x4bf0a0*(0x1e09+-0xff9+-0xe0c)+(0x1324+-0x2417+0x10f5)]=_0x36624a[-0x2b*-0x49+-0x348+-0x8f8]<<-0xe*0x202+0x20e5+0x1*-0x4b4|_0x36624a[-0x719+0x4*0x74c+-0x1613]<<-0x25*-0xa7+0x26b8+-0x430*0xf|_0x36624a[-0x1*-0x5a1+-0x6*0x2f5+-0xc22*-0x1],_0x267756[_0x4bf0a0*(0x1*-0x124a+-0x3*-0x8f5+-0x891)+(0x23a+-0x1440+0x13*0xf3)]=_0x36624a[-0x4c1+0xd44+0x87d*-0x1]<<0x323*0x1+0x2b*0x61+0x3*-0x673|_0x36624a[-0x6*0x514+-0x13+0x1e92]<<0x1*-0x207a+-0x214e+0x41d3|_0x36624a[-0x25*-0x79+-0x168d+0x518],this['shBands']>0x23f2+0x1997*-0x1+-0x32*0x35&&(_0x41f18d[_0x4bf0a0*(0x2290+-0x2199+-0xf3*0x1)+(-0x425+0x603+-0x1de)]=_0x36624a[0x1*-0x215b+0xd*0x2f3+-0x1*0x4f3]<<0x132*-0xa+0x150a+-0x901|_0x36624a[0xa70+0xb8e+0x119*-0x14]<<0xd*0xe1+0x8e7+-0x9*0x241|_0x36624a[0x512+0x46f+-0xe*0xad],_0x41f18d[_0x4bf0a0*(-0x1dc8+0x1*-0x1a66+0x2*0x1c19)+(0x265*-0x2+-0x3ed+0x1f*0x48)]=_0x36624a[-0x2599+-0x9*-0xe2+0x1db3]<<-0x2*0x6d3+-0x53+0xe0e|_0x36624a[0x779+0x1*0xd81+-0x1e7*0xb]<<0x2401+0x5b5+-0x29ab*0x1|_0x36624a[0x167*0x19+-0x907*0x1+0x2*-0xcfd],_0x41f18d[_0x4bf0a0*(0x4*-0x52c+-0x20f6+0x35aa)+(0xd*-0x1fb+-0x1327*0x1+0x2ce8)]=_0x36624a[0xdd1+0xcb3*-0x2+0xba4]<<-0x42e*0x3+0x5*0x7ca+-0x1a53|_0x36624a[0x26c4+0x1fe7*-0x1+-0x6cd*0x1]<<0x1*0x23e3+-0x3d3+-0x2005|_0x36624a[0x1143+0x6*-0x542+0x72d*0x2],_0x41f18d[_0x4bf0a0*(-0x488+0x1b97*0x1+0x170b*-0x1)+(0x2*0x819+0x1*0x5f3+-0x1622)]=_0x36624a[0x9*-0x1ed+0xed8+-0x1*-0x28f]<<-0x7b9*0x1+0x1*0x1057+-0x889|_0x36624a[-0x80+-0x6aa+0x73d]<<0xbe2+-0xc3b+0x64|_0x36624a[-0x7*-0xa7+-0x24b2+0x2035],this['shBands']>0x4f2+0x175d+0x5a9*-0x5?(_0x474cd0[_0x4bf0a0*(0x1b52+0x2*0x251+-0x1ff0)+(0x60f+0x1f11+0x1290*-0x2)]=_0x36624a[0x194e+0x24a0+-0x3dd9]<<-0x12e3+-0x8*0x177+0x1eb0|_0x36624a[-0x44*-0x14+-0x2689+0x214f]<<-0xfb3*0x2+-0x1065*-0x1+-0x2*-0x786|_0x36624a[-0xa*0x23b+-0x1b28+-0x318d*-0x1],_0x474cd0[_0x4bf0a0*(-0x1441*0x1+-0x143*0x1c+0x2b*0x14b)+(0xe13+0x83+0xe95*-0x1)]=_0x36624a[-0x13*0x6+0x2*0x1129+-0x21c8]<<0x5*-0x2b3+-0x531*0x7+0x31eb|_0x36624a[0x265b+0xe1e+-0x3460]<<-0x1ebb*0x1+-0x1211+0x30d7|_0x36624a[-0x781*-0x1+0x7aa+-0xf11],_0x474cd0[_0x4bf0a0*(0x138*0x5+0x7*-0x53d+0x1e97)+(-0xe*0x5d+-0xdc*-0xa+-0x380)]=_0x36624a[0x1359+-0x1*0x1ebf+-0x1f*-0x5f]<<-0x29*0x8c+-0x1ee7+-0x4*-0xd5a|_0x36624a[-0x608+0x1f20+0x215*-0xc]<<0x18f1+-0x17a*0xb+-0x454*0x2|_0x36624a[0x37*0xad+0x795+0xee1*-0x3],_0x474cd0[_0x4bf0a0*(0xe4f+0x752+-0x159d)+(-0xed*-0xf+0x1*-0x241f+0x43*0x55)]=_0x36624a[-0x2184+-0x1*-0x1025+-0x1*-0x117d]<<0x7*-0x375+-0x1eb8+0x3700|_0x36624a[-0x253+0x2269+-0x1ff7]<<0x162e+0x5*-0x5c9+-0x4f*-0x16|_0x36624a[-0x1*0x1981+-0xa34+0x1*0x23d5],_0x4d5647[_0x4bf0a0*(-0x8ab*0x1+-0x20f1*0x1+0x12*0x250)+(-0x28c+0x1167+-0xedb)]=_0x36624a[-0x1175+-0x12b7+0x244d]<<-0x2586+0x1*0x14f3+0x10a8|_0x36624a[-0x25b9+-0x669*0x5+0x8*0x8bd]<<-0x3*-0x15d+-0x90b*-0x1+0xd17*-0x1|_0x36624a[-0x112f+-0x2219+0x336b*0x1],_0x4d5647[_0x4bf0a0*(-0xc98+0x1faf+0x1313*-0x1)+(0x22c7+0x1619+0x17*-0x279)]=_0x36624a[0x12df*0x1+-0x1*0x110b+0x1b0*-0x1]<<-0x1*-0x1de8+0x1*0x2430+-0x4203|_0x36624a[-0x1*-0x1bc5+0x192e*-0x1+-0x272]<<0x24cb+0x1*0x11ba+-0x367a|_0x36624a[-0xf5c+0x81b*0x3+-0x5*0x1c3],_0x4d5647[_0x4bf0a0*(-0x20b*-0x3+-0x27*-0x73+-0x5*0x4ba)+(0x585*0x4+-0x6*0xf5+-0x1054)]=_0x36624a[-0x1758+-0x1c14*0x1+0x3393]<<-0x20c3+0x47*0x5+0x1f75*0x1|_0x36624a[-0x401*-0x6+-0x1e*-0x103+-0x3638]<<-0x1571+0x333+-0x97*-0x1f|_0x36624a[-0x966+-0x2*-0xe99+-0x13a3],_0x4d5647[_0x4bf0a0*(0x1b30+-0x1b17*0x1+-0x15)+(-0x9d*-0x22+-0x66d*-0x3+0x41*-0x9e)]=_0x36624a[0x1*0xed1+-0x191*0x11+0xbfa]<<-0xcb*0x1c+-0x255c+0x3ba5*0x1|_0x36624a[-0x1f78+-0x40a+-0x1*-0x23ad]<<0x824+-0x5cb+0x2*-0x127|_0x36624a[-0x2689+-0x1ddf+0x4494]):_0x474cd0[_0x4bf0a0]=_0x36624a[-0x1542+0x1e37+-0x8e0]<<0x172e+-0x19f7+0x2de*0x1|_0x36624a[-0x1472+0xc89+0x7ff]<<0x506+-0x11d7+0xcdc|_0x36624a[0x21ae+0xdcd*-0x2+-0x1ff*0x3]);}}(_0x247d3e=this['sh1to3Text'+'ure2'])==null||_0x247d3e['unlock'](),(_0x2e106e=this['sh4to7Text'+'ure2'])==null||_0x2e106e['unlock'](),(_0x190929=this['sh8to11Tex'+'ture2'])==null||_0x190929['unlock'](),(_0x4f8ccc=this['sh12to15Te'+'xture2'])==null||_0x4f8ccc['unlock']();}async['updateSHDa'+'taByWorker'](_0x57a24e){var _0x5bf300,_0x4a16ab,_0x2e6610,_0xfb18b8,_0x19baa6;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x37aa75={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x5e6203,_0x2f396b,_0xaa2add,_0x5bcc43;if((_0x5bf300=_0x57a24e['transformD'+'ata'])!=null&&_0x5bf300['sh1to3Data'])_0x5e6203=(_0x4a16ab=_0x57a24e['transformD'+'ata'])==null?void(-0x1*0x1bd3+0x29d*0xa+-0x1b1*-0x1):_0x4a16ab['sh1to3Data'],_0x2f396b=(_0x2e6610=_0x57a24e['transformD'+'ata'])==null?void(-0x2420+-0x269f*0x1+0x4abf):_0x2e6610['sh4to7Data'],_0xaa2add=(_0xfb18b8=_0x57a24e['transformD'+'ata'])==null?void(-0xcf0+-0xe96+0x1b86):_0xfb18b8['sh8to11Dat'+'a'],_0x5bcc43=(_0x19baa6=_0x57a24e['transformD'+'ata'])==null?void(0x1*0x1d8+0x2401+-0x1*0x25d9):_0x19baa6['sh12to15Da'+'ta'];else{const _0x53c102=F_(_0x57a24e,_0x37aa75*(-0x6b*-0x24+-0x15f4+-0x17*-0x4d)),_0x1dcecb=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x57a24e['numSplats'],this['shBands'],_0x53c102);_0x5e6203=_0x1dcecb['sh1to3Data'],_0x2f396b=_0x1dcecb['sh4to7Data'],_0xaa2add=_0x1dcecb['sh8to11Dat'+'a'],_0x5bcc43=_0x1dcecb['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x5e6203),this['shBands']>-0x13e4+0x3ef*0x1+0xff6&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x2f396b),this['shBands']>-0xdfa+0xb1+-0x53*-0x29?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0xaa2add),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x5bcc43)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0xaa2add));}}async function Nb(){const _0x2812c0=new Float32Array(0xbc5+0x296*-0x2+-0x698);new Int32Array(_0x2812c0['buffer']);let _0x1837d6=null,_0xd0b1a7=null,_0x2f1362=null,_0x5a05fe=null,_0x453e30=null,_0x3c8acb=null,_0x2e85e7=null,_0x18a0af=null;self['onmessage']=async _0x4cc275=>{const {data:_0x34d9f9}=_0x4cc275;switch(_0x34d9f9['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x1d7229(_0x34d9f9['numSplats'],_0x34d9f9['shBands'],_0x34d9f9['SHData']);break;case'updateTran'+'sformData':_0x440845(_0x34d9f9['numSplats'],_0x34d9f9['is4D'],_0x34d9f9['position'],_0x34d9f9['rotation'],_0x34d9f9['motion'],_0x34d9f9['scale'],_0x34d9f9['muT'],_0x34d9f9['tScale']);break;case'destroyWor'+'ker':_0x518601();break;}};const _0x440845=(_0x18245c,_0x146ee7,_0x5cd5dc,_0x4af23a,_0x2e2482,_0x36fda6,_0x12710d,_0x4e8db2)=>{_0x518601(),_0x146ee7&&(_0xd0b1a7=new Float32Array(_0x18245c*(-0x203e+0x1894+0x7ad)),_0x18a0af=new Float32Array(_0x18245c),_0x453e30=new Float32Array(_0x2e2482['buffer']['slice']()),_0x2e85e7=new Float32Array(_0x2e2482['buffer']['slice']())),_0x5a05fe=new Float32Array(_0x5cd5dc['buffer']['slice']()),_0x1837d6=new Float32Array(_0x5cd5dc['buffer']['slice']()),_0x3c8acb=new Uint16Array(_0x36fda6['buffer']['slice']()),_0x2f1362=new Float32Array(_0x4af23a['buffer']['slice']());for(let _0x57a936=0x1288*0x1+0x3f*0x5+0x13c3*-0x1;_0x57a936<_0x18245c;_0x57a936++)_0x146ee7&&_0xd0b1a7&&(_0x18a0af[_0x57a936]=_0x4e8db2?Math['exp'](_0x4e8db2[_0x57a936]):-0x1be8+-0x1fb6+-0x1dcf*-0x2,_0xd0b1a7[_0x57a936*(-0x25fc+-0x4*0x33+0x26cb)+(0x1*-0x7be+-0x2*0xf01+0x2*0x12e0)]=_0x12710d?_0x12710d[_0x57a936]:0xd*-0x1cc+-0x1ca1+0x1*0x33fd,_0xd0b1a7[_0x57a936*(0x5*0xad+0xcc5*0x2+-0x1ce8)+(-0x1*0x15e9+0x1711+-0x127)]=_0x18a0af[_0x57a936]);const _0x2bc211=[_0x1837d6['buffer'],_0x5a05fe['buffer'],_0x3c8acb['buffer'],_0x2f1362['buffer']];_0x146ee7&&_0x2bc211['push'](_0x453e30['buffer'],_0xd0b1a7['buffer'],_0x2e85e7['buffer'],_0x18a0af['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x1837d6,'dataPosition':_0x5a05fe,'dataScale':_0x3c8acb,'dataRotation':_0x2f1362,'dataMotion':_0x453e30,'dataTime':_0xd0b1a7,'motion':_0x2e85e7,'tScaleArray':_0x18a0af},_0x2bc211);},_0x1d7229=(_0x19faa6,_0x34d29b,_0xff52f)=>{const _0x3b86a6=new Uint32Array(_0x19faa6*(-0x1*0x1d32+-0x162d*-0x1+0x709)),_0x10af5f=new Uint32Array(_0x19faa6*(0xa3*-0x21+0x149d+0x6a)),_0x38cb15=new Uint32Array(_0x19faa6*(-0x24f0+0x23c1+0x133)),_0x26bace=new Uint32Array(_0x19faa6*(0xc9a+-0x2*0x5ef+-0xb8)),_0x42dcbc={0x1:0x3,0x2:0x8,0x3:0xf}[_0x34d29b],_0x2f133c=_0xff52f,_0x464d20=0x23ee+-0x9a4+0x7*-0x29d,_0x55e0c0=-0x2*0xa03+-0x16*-0x19b+0xb*-0x107,_0x47ce5c=new Float32Array(0x2173+0x37*-0x19+-0x1c13),_0x20fe3f=new Uint32Array(_0x47ce5c['buffer']),_0x1e5c0e=new Array(_0x42dcbc*(0x1f3*-0x11+-0x86e*-0x1+-0x1*-0x18b8))['fill'](-0x1b*0x2d+-0xa*-0x367+-0x1d47);for(let _0x295ecc=0xf1e+-0x26ad+0x178f;_0x295ecc<_0x19faa6;++_0x295ecc){for(let _0x1c2693=0x19ba+-0x161*0x1c+0xce2;_0x1c2693<_0x42dcbc;++_0x1c2693)_0x1e5c0e[_0x1c2693*(0x295+-0x1ce2+0x1*0x1a50)]=_0x2f133c[_0x1c2693][_0x295ecc],_0x1e5c0e[_0x1c2693*(0x1*0x1c3e+-0x3e2+-0x1859)+(-0x1535+-0x245*-0xd+-0x84b)]=_0x2f133c[_0x1c2693+_0x42dcbc][_0x295ecc],_0x1e5c0e[_0x1c2693*(-0x25e0+0x14*0x151+0xb8f)+(0x611*0x6+-0x1e03+-0x1*0x661)]=_0x2f133c[_0x1c2693+_0x42dcbc*(-0x1803+-0x1a9d+-0x2*-0x1951)][_0x295ecc];let _0x828161=_0x1e5c0e[-0x1bc2*-0x1+-0x3a*-0x37+0x63*-0x68];for(let _0x10cbb6=-0x5*-0x739+0x1f*-0x1+-0x23fd;_0x10cbb6<_0x42dcbc*(0x1*-0x1723+-0x1*0x604+0x2*0xe95);++_0x10cbb6)_0x828161=Math['max'](_0x828161,Math['abs'](_0x1e5c0e[_0x10cbb6]));if(_0x828161!==0x18*0x194+0x29*0x6f+-0x37a7){for(let _0x58337b=-0x17*-0x6d+-0x12f5+-0x495*-0x2;_0x58337b<_0x42dcbc;++_0x58337b)_0x1e5c0e[_0x58337b*(0xc*-0x76+-0xea0+0x1*0x142b)+(-0x2*0xbd4+0xcc1*0x1+0xae7)]=Math['max'](0x2524+-0x13*0x19d+-0x67d,Math['min'](_0x464d20,Math['floor']((_0x1e5c0e[_0x58337b*(-0x13b9+0x1*0x2371+0xfb5*-0x1)+(0x22f8+-0x107+-0x21f1)]/_0x828161*(-0x38f+0x4f4+0x11*-0x15+0.5)+(0xdba+0x1d0a+-0x2ac4+0.5))*_0x464d20+(0x1*-0x1b9a+0x1*0x151+0x1a49+0.5)))),_0x1e5c0e[_0x58337b*(-0x20f5*-0x1+-0xe1a+-0x12d8)+(-0xe38+0xcd3+0x166)]=Math['max'](-0x115*0x1a+0x27f*-0x3+-0x1*-0x239f,Math['min'](_0x55e0c0,Math['floor']((_0x1e5c0e[_0x58337b*(-0x1ab+0xf4*-0x2+0x2*0x1cb)+(0xbff*0x2+-0x1dbb*0x1+-0x7*-0xd2)]/_0x828161*(-0x3e9+0x114*-0x7+-0x1a3*-0x7+0.5)+(0xa9d*-0x3+-0x1ce3+0x3cba+0.5))*_0x55e0c0+(-0x1256*0x1+-0xf4d+0x21a3+0.5)))),_0x1e5c0e[_0x58337b*(0xcdc*0x3+-0x17d*0x4+-0x209d)+(-0x35*0x3+0x19f1+-0x144*0x14)]=Math['max'](-0x19*0x7+-0x13ec+0xd3*0x19,Math['min'](_0x464d20,Math['floor']((_0x1e5c0e[_0x58337b*(-0x7*0x57b+-0x1d8*-0x8+0x17a0)+(-0x209+-0x6*-0x343+-0x1187)]/_0x828161*(-0x1*0xc1a+0x1*-0x254f+0x3169+0.5)+(-0x812+-0x20*-0x7+0x2*0x399+0.5))*_0x464d20+(0x4*-0x182+0x222+0x3e6+0.5))));_0x47ce5c[-0x6a4*0x1+0x1*0x1448+-0x3*0x48c]=_0x828161,_0x3b86a6[_0x295ecc*(0x1ad1+-0xd76+-0x1*0xd57)+(0xb89*0x3+-0x168+0xb11*-0x3)]=_0x20fe3f[0x1*0x16de+0x1*-0x10d+-0x15d1],_0x3b86a6[_0x295ecc*(0x9c*-0x30+-0x152e+0x3272)+(-0x16bf+-0x2*-0x271+0x11de)]=_0x1e5c0e[0x1e2e+-0x2f*0x4c+0x3e*-0x43]<<-0x1eca+-0x1*-0x12f4+0xbeb|_0x1e5c0e[-0x1*-0x1f8e+0x2252+-0x41df]<<-0x2*-0x791+0x2302+0x10b3*-0x3|_0x1e5c0e[0x67a+-0x1108+-0x1*-0xa90],_0x3b86a6[_0x295ecc*(-0x1*0xbcc+-0x1271*-0x1+-0x6a1*0x1)+(0x3b8+0x1199*-0x1+0x18b*0x9)]=_0x1e5c0e[-0x217*0x10+0x1*0xdb7+-0x1a5*-0xc]<<0xe1e+-0x2e*0x41+-0x25b|_0x1e5c0e[0x26b3+-0xd*-0x145+-0x1*0x3730]<<0xa17*-0x2+-0x20*-0xdc+-0x747|_0x1e5c0e[-0x17a9+0x1*0x1e45+-0x697],_0x3b86a6[_0x295ecc*(0x1*-0xd79+-0x1ba9*0x1+0x2926)+(0x1baf+-0x26a9*0x1+0x1d*0x61)]=_0x1e5c0e[0x240b+0xd87+0x7*-0x714]<<-0x223b+-0x1a71+0x97*0x67|_0x1e5c0e[0x2*-0x132a+-0x117a+-0x37d5*-0x1]<<0x32b*0x4+-0x1e1*0x1+-0x40*0x2b|_0x1e5c0e[-0x22a6+0xa1f*0x1+0x188f],_0x34d29b>-0x2*0x52+-0x5*-0x47+-0x13*0xa&&(_0x10af5f[_0x295ecc*(0xcbb+-0x1210+-0x559*-0x1)+(-0x1b9d+-0xd16+-0x45*-0x97)]=_0x1e5c0e[-0x2b2+0xc38+-0x97d]<<-0x1c0c+-0xc5*-0x2+-0x8dd*-0x3|_0x1e5c0e[0x5*-0x2cc+0x18b0+-0xaaa]<<0x34f+0x1*-0x8e1+-0x1df*-0x3|_0x1e5c0e[0x11fe+-0x2*-0x2d4+-0x179b],_0x10af5f[_0x295ecc*(-0x24cf*-0x1+0xf26+0x33f1*-0x1)+(-0x411*-0x5+0x391+0x3*-0x7f7)]=_0x1e5c0e[0x203d+0x5e9+-0x261a]<<0x14e8+0x23bc+-0x1*0x388f|_0x1e5c0e[0x117c+0x239e*-0x1+0x31*0x5f]<<0x18*0x85+0x1a*-0x3d+-0x63b|_0x1e5c0e[-0x3a3+-0x179c+0x1b4d],_0x10af5f[_0x295ecc*(0x24c4+0x2*0xcc4+-0x3e48)+(-0x29*-0x7c+0x1*0x1e2f+-0x3209)]=_0x1e5c0e[-0x35*-0x21+0x18de+-0x2d*0xb4]<<-0x15*-0x1bb+-0x5ac+-0x1e96|_0x1e5c0e[0x2f3*0x5+0x1d8e+0xebf*-0x3]<<-0x2453+-0x2460+0x48be|_0x1e5c0e[-0x1*0x14e+-0x1c8+0x327],_0x10af5f[_0x295ecc*(-0x2*-0xcc1+0x2389+0x397*-0x11)+(0xe2*-0x1a+-0xf87+-0x1*-0x267e)]=_0x1e5c0e[0x328+0xb99+-0x4e5*0x3]<<-0x3*-0xbb5+0x1e0b*0x1+-0x4115|_0x1e5c0e[-0x1a32+-0x4a0+0x1ee5]<<-0x23b8*0x1+0x697*0x2+-0x1*-0x1695|_0x1e5c0e[0x2*-0x121d+0x1*0x5db+0x1e73],_0x34d29b>-0x741*-0x2+-0x1ccf+0xe4f?(_0x38cb15[_0x295ecc*(0x65*-0x61+0x11d2+0x193*0xd)+(-0x1569+-0x1*-0x140+0x1429)]=_0x1e5c0e[0x171e+0x71*-0x58+-0x39*-0x47]<<0x1dec+0x2522+-0x42f9|_0x1e5c0e[0x1*0xd9+-0x65d+0x2*0x2cd]<<-0x1f91+-0x1ba5*0x1+0xc5*0x4d|_0x1e5c0e[-0xcfe*-0x3+-0x21d5+-0x50e],_0x38cb15[_0x295ecc*(0x12b*0x9+0x15ec+-0x206b)+(0x1*0x319+0x3*0x4a3+-0x1101*0x1)]=_0x1e5c0e[-0x1*0xdd3+0x23d5+-0x15ea]<<-0x25fd+0x6*0x55c+0x2*0x2f5|_0x1e5c0e[0x867+-0x38b*-0xb+0x7*-0x6c1]<<0xf09+-0x7*0xeb+-0x891|_0x1e5c0e[0x7f*-0x6+0x1*-0x25ab+0x28bf],_0x38cb15[_0x295ecc*(0x2377+0x187c+-0x3bef)+(0x15b4+-0xf*0x11+-0x14b3)]=_0x1e5c0e[0x1a0d+-0x1*0x19d3+-0x1f]<<-0x145*-0x1d+-0x264c+0x190*0x1|_0x1e5c0e[0x5ca+-0x7a7+0x65*0x5]<<0x1*-0x1b0d+-0x5*0x4fd+0x4bb*0xb|_0x1e5c0e[0x2e6*-0x1+-0x3da+-0x7*-0xfb],_0x38cb15[_0x295ecc*(0x1506+-0x4a*0x7f+0xfb4)+(-0x1225*0x2+0x17*-0x12d+0x3f58)]=_0x1e5c0e[0xe77*0x2+0x116c*-0x1+0x1*-0xb64]<<-0x2174*0x1+0x36d*-0x5+0x32aa|_0x1e5c0e[0x11*-0x239+-0x1e94+0x79c*0x9]<<0x2211+0xf5b*-0x1+-0x12ab|_0x1e5c0e[-0x26*-0x1f+-0x17ce+0x1354],_0x26bace[_0x295ecc*(0x627+-0x1148+0x1*0xb25)+(0x16f9+0x1736*-0x1+-0x1*-0x3d)]=_0x1e5c0e[0x1*-0x527+0x4c7*-0x3+-0x1*-0x139d]<<-0x1f5c+0x35*0x85+-0x64*-0xa|_0x1e5c0e[-0x1d94+-0x1627+0x33dd]<<0x1*-0xeb1+0x170c+-0x850|_0x1e5c0e[0x1300+-0x337*0x4+0x1d*-0x35],_0x26bace[_0x295ecc*(-0x1*0x20fe+0x17b*0x5+0x199b)+(-0x1c48+0x7f1*0x1+0x1458)]=_0x1e5c0e[0x22*-0x124+-0x1972+0x405e]<<0x51b+-0xf32+0x3*0x364|_0x1e5c0e[0x2ba*0xe+-0x1*-0x1b5f+-0x4166]<<-0x2671+-0x1e85+-0xdcd*-0x5|_0x1e5c0e[0x1b98+0x1aa5+-0x1*0x3617],_0x26bace[_0x295ecc*(0x175b+0x1a3*0x1+-0x18fa)+(0xca*-0x21+-0x115*0x7+-0x1c5*-0x13)]=_0x1e5c0e[0x4*-0x591+-0xbbe+0x2229]<<-0x16*0x18b+0xc13+0x15f4|_0x1e5c0e[0x1289+0x13fe*0x1+0xd1*-0x2f]<<0x1*-0x4a2+-0x883*-0x3+-0x14dc|_0x1e5c0e[0x15a6+0x2418+-0x1*0x3995],_0x26bace[_0x295ecc*(0x59*-0x43+-0x1cea+0x3439)+(0xd61+-0xca1*-0x1+-0x19ff)]=_0x1e5c0e[0x25c5+-0x2589+-0x12]<<-0x9*0x36e+0xbd*0xb+0x1*0x16d4|_0x1e5c0e[0xaf5+-0x1f9f*0x1+0x14d5]<<0x11*0x119+-0x1da3+0xb05|_0x1e5c0e[-0xd3a+-0x1fb*-0xf+-0x104f]):_0x38cb15[_0x295ecc]=_0x1e5c0e[-0x11e6+0xae7+0x714]<<0x11b*0x1+0x1b22+0x70a*-0x4|_0x1e5c0e[0x4aa+-0x141*-0x7+-0x1*0xd5b]<<0x157b*-0x1+-0x57a+0x1b00|_0x1e5c0e[-0xa6*0x3c+0x388+0x2377]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x3b86a6,'sh4to7Data':_0x10af5f,'sh8to11Data':_0x38cb15,'sh12to15Data':_0x26bace}},[_0x3b86a6['buffer'],_0x10af5f['buffer'],_0x38cb15['buffer'],_0x26bace['buffer']]);},_0x518601=()=>{_0x1837d6=null,_0xd0b1a7=null,_0x2f1362=null,_0x5a05fe=null,_0x453e30=null,_0x3c8acb=null,_0x2e85e7=null,_0x18a0af=null;};}class kb extends pe{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+Nb['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x35c82c,_0x1fa067,_0x1f16df){_0x35c82c['onmessage']=_0x513732=>{if(!this['worker'])return;const {data:_0x171673}=_0x513732;if(_0x171673['type']===_0x1fa067)switch(_0x1fa067){case'updatedSHD'+'ata1':_0x1f16df(_0x171673['data']);break;case'updatedCol'+'orData':_0x1f16df(_0x171673['data']);break;case'updatedTra'+'nsformData':_0x1f16df(_0x171673);break;}};}['updateSHDa'+'ta1'](_0x3a5e76,_0x1602cc,_0x4799ee){var _0x22d8e9;return(_0x22d8e9=this['worker'])==null||_0x22d8e9['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x3a5e76,'shBands':_0x1602cc,'SHData':_0x4799ee}),new Promise(_0x11a777=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x4759d7=>{_0x11a777(_0x4759d7);});});}async['updateTran'+'sData'](_0x1b1c96,_0x1423b0,_0x3012d0,_0x1024a0,_0xc05129,_0x33256b,_0x3ec6df,_0x430735){var _0x10819f;return(_0x10819f=this['worker'])==null||_0x10819f['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x1b1c96,'is4D':_0x1423b0,'position':_0x3012d0,'rotation':_0x1024a0,'motion':_0xc05129,'scale':_0x33256b,'muT':_0x3ec6df,'tScale':_0x430735}),new Promise(_0x28cca5=>{const _0x5c26f6=_0x3e1308=>{_0x28cca5(_0x3e1308);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x5c26f6);});}['destroy'](){var _0x20e695;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x20e695=this['worker'])==null||_0x20e695['terminate'](),this['worker']=null);}}const N_=(_0x57ecff,_0xe99dda)=>{const _0x109748=[];for(let _0x167b19=-0x1*0x197f+0xca0*0x1+0xcdf;_0x167b19<_0xe99dda;++_0x167b19)_0x109748['push'](_0x57ecff['getProp']('f_rest_'+_0x167b19));return _0x109748;};class Ub extends Vy{constructor(_0x190056,_0x13cdf1){super(_0x190056,_0x13cdf1),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(0xa75+0xc19+-0x168d)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new kb(),this['assetsMana'+'gerLoadedT'+'ime']=0x107*-0x1b+0x4*-0x692+-0x2*-0x1b05);}['setSceneIn'+'fo'](_0x338dea){this['sceneInfo']['duration']=_0x338dea['duration'],this['sceneInfo']['fps']=_0x338dea['fps'],this['sceneInfo']['totalGauss'+'ians']=_0x338dea['totalGauss'+'ians'],this['sceneInfo']['globalBoun'+'dingBoxMin']=new I(_0x338dea['globalBoun'+'dingBox']['min'][-0xaf0*-0x1+-0xa5e+-0x92],_0x338dea['globalBoun'+'dingBox']['min'][-0x19f7+-0x4e*0x20+0x11dc*0x2],_0x338dea['globalBoun'+'dingBox']['min'][0x1a30+-0x1b*0xb5+0x3*-0x25d]),this['sceneInfo']['globalBoun'+'dingBoxMax']=new I(_0x338dea['globalBoun'+'dingBox']['max'][-0x5*0x2+-0x7c9+-0x7d3*-0x1],_0x338dea['globalBoun'+'dingBox']['max'][0x67*-0x2+-0x9f*-0x13+-0xafe],_0x338dea['globalBoun'+'dingBox']['max'][0x2ae*-0x8+0xd5*-0x2+0xb8e*0x2]);const _0x30e292=_0x338dea['globalBoun'+'dingBox']['min'][0x549+0x2035+0x257e*-0x1],_0x5258e9=_0x338dea['globalBoun'+'dingBox']['min'][0x1*0x2415+0x1*0xcdd+-0xbb*0x43],_0x4fb3e9=_0x338dea['globalBoun'+'dingBox']['min'][-0x313+-0x1*0x63d+0x952],_0x1912ab=_0x338dea['globalBoun'+'dingBox']['max'][-0x2429*-0x1+-0xb*-0xd1+0x141*-0x24],_0x5ac257=_0x338dea['globalBoun'+'dingBox']['max'][0x1a35+-0x1*-0xb03+0x7*-0x551],_0xc552ba=_0x338dea['globalBoun'+'dingBox']['max'][0xb3*-0x2+-0x862+0x9ca*0x1],_0x14e3ef=new I((_0x30e292+_0x1912ab)*(-0x2208+-0x3b4+0x25bc+0.5),(_0x5258e9+_0x5ac257)*(0x9fe*-0x1+-0x303*-0x1+0x6fb+0.5),(_0x4fb3e9+_0xc552ba)*(-0xde2+0xc*-0x2eb+0x1*0x30e6+0.5)),_0x33b250=new I((_0x1912ab-_0x30e292)*(-0xb47*-0x3+0x1757+-0x392c+0.5),(_0x5ac257-_0x5258e9)*(-0x1*-0x1b7c+-0x79b+-0x13e1+0.5),(_0xc552ba-_0x4fb3e9)*(-0x1b61+-0xb*-0xb0+0x13d1+0.5)),_0x331ec7=new Ie(_0x14e3ef,_0x33b250);this['sceneInfo']['globalBoun'+'dingBox']=_0x331ec7,this['aabb']=_0x331ec7;}async['updateData'](){var _0x1692f4,_0x69c8,_0x21dcff,_0x55e8c8,_0x17e402,_0x492d48,_0x527c73,_0x58843b,_0x3674eb,_0x89eec7,_0x28f5b9;await super['updateData']();const _0x27f0d1=this['gsplatData'];if(!_0x27f0d1)return;this['is4D']=_0x27f0d1['is4D'];const _0x171014=await this['getTransfo'+'rmDataByWo'+'rker'](_0x27f0d1);this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x171014['centers'],this['motion']=_0x171014['motion'],this['tScale']=_0x171014['tScaleArra'+'y'],this['muT']=await _0x27f0d1['getMuT'](),this['timeIndex']=await _0x27f0d1['getTimeInd'+'ex']();const _0x3f424c=this['evalTextur'+'eSize'](_0x27f0d1['numSplats']);this['colorTextu'+'re']?((_0x1692f4=this['colorTextu'+'re2'])==null||_0x1692f4['destroy'](),(_0x69c8=this['transformA'+'Texture2'])==null||_0x69c8['destroy'](),(_0x21dcff=this['transformB'+'Texture2'])==null||_0x21dcff['destroy'](),(_0x55e8c8=this['transformR'+'Texture2'])==null||_0x55e8c8['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',at,_0x3f424c),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',je,_0x3f424c),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ri,_0x3f424c),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',je,_0x3f424c),this['is4D']&&((_0x17e402=this['transformM'+'otionTextu'+'re2'])==null||_0x17e402['destroy'](),(_0x492d48=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x492d48['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',je,_0x3f424c),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',je,_0x3f424c))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',at,_0x3f424c),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',at,_0x3f424c),this['transformA'+'Texture']=this['createText'+'ure']('transformA',je,_0x3f424c),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',je,_0x3f424c),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ri,_0x3f424c),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ri,_0x3f424c),this['transformR'+'Texture']=this['createText'+'ure']('transformR',je,_0x3f424c),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',je,_0x3f424c),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',je,_0x3f424c),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',je,_0x3f424c),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',je,_0x3f424c),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',je,_0x3f424c))),await this['updateColo'+'rData'](_0x27f0d1),await this['updateTran'+'sformFromD'+'ata'](_0x171014),this['shBands']=_0x27f0d1['shBands'],this['shBands']>0x5*-0x471+-0xcfd+0x2332&&(this['sh1to3Text'+'ure']?((_0x527c73=this['sh1to3Text'+'ure2'])==null||_0x527c73['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ne,_0x3f424c),this['shBands']>-0x26*0xa+-0xe0c*0x1+0xf89&&((_0x58843b=this['sh4to7Text'+'ure2'])==null||_0x58843b['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ne,_0x3f424c),this['shBands']>0xe8*0xd+-0x44f+-0x777?((_0x3674eb=this['sh8to11Tex'+'ture2'])==null||_0x3674eb['destroy'](),(_0x89eec7=this['sh12to15Te'+'xture2'])==null||_0x89eec7['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x3f424c),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ne,_0x3f424c)):((_0x28f5b9=this['sh8to11Tex'+'ture2'])==null||_0x28f5b9['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x3f424c)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ne,_0x3f424c),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ne,_0x3f424c),this['shBands']>-0x21a*-0x3+-0xf16+0x8c9&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ne,_0x3f424c),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ne,_0x3f424c),this['shBands']>-0x9*0x29a+0x8cd*-0x2+0x2906?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ne,_0x3f424c),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x3f424c),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ne,_0x3f424c),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ne,_0x3f424c)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Vi,_0x3f424c),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Vi,_0x3f424c)))),await this['updateSHDa'+'taByWorker'](_0x27f0d1));}['updateText'+'ure'](){this['isDestroye'+'d']||(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x2161f8){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x2161f8}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x2f6305,_0x4fb804,_0x521078,_0x2d8f73,_0x20ad06,_0x48023b){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x2f6305,'timeOption':_0x4fb804,'loadedTime':_0x521078,'asset':_0x2d8f73,'events':_0x20ad06,'seekCB':_0x48023b}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(0x12fd+-0x3*-0xb14+-0x3439);try{for(;this['appendQueu'+'e']['length']>0x34e+-0xcc1+-0x1*-0x973;){const _0x4ab133=this['appendQueu'+'e']['shift']();_0x4ab133['type']==='append'?await this['processApp'+'endTask'](_0x4ab133['data']):_0x4ab133['type']==='release'&&await this['processRel'+'easeTask'](_0x4ab133['data']);}}finally{this['isProcessi'+'ngQueue']=!(-0x23*0xe9+-0x9d6+0x29b2);}}}async['processRel'+'easeTask'](_0x3af124){const {index:_0x43d1e0}=_0x3af124;this['isDestroye'+'d']||await this['gsplatData']['releaseSeq'+'Data'](_0x43d1e0);}async['processApp'+'endTask'](_0x4d0a1e){var _0x573689;const {gsplatData:_0x38f91a,timeOption:_0x201ee0,loadedTime:_0x17d8ee,asset:_0x3ef177,events:_0x5ea5e6,seekCB:_0x4b6c52}=_0x4d0a1e;!this['gsplatData']||this['isDestroye'+'d']||(globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x201ee0,this['asset']=_0x3ef177,this['assetsMana'+'gerLoadedT'+'ime']=_0x17d8ee,this['events']=_0x5ea5e6,await this['gsplatData']['appendGSpl'+'atData'](_0x38f91a,_0x17d8ee,_0x201ee0),console['log']('loadTime__'+'__','gsplatDeco'+'dedResourc'+'e\x20gsplatDa'+'ta.appendG'+'SplatData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x5*0x71+-0xb*0x20b+-0x62c*-0x4),_0x38f91a['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x38f91a['numSplats'])['toFixed'](-0x2037+-0xc2+0x20fc)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20this.upd'+'ateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x1a37+-0x26*0x22+0x1f45*0x1),_0x38f91a['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await((_0x573689=this['gsplatInst'+'ance'])==null?void(0xf*0x90+0x1*-0x15+-0x45*0x1f):_0x573689['updateInst'+'anceData'](this,_0x17d8ee,_0x4b6c52)),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20updateIn'+'stanceData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x1227+-0x6fb*0x2+-0x165*0x3),_0x38f91a['numSplats']));}['fireAssets'+'ManagerTim'+'eIndex'](_0x19a32f,_0x195437){var _0x13d226;const _0x4a00b1=_0x19a32f||this['assetsMana'+'gerLoadedT'+'ime'];(_0x13d226=this['asset'])==null||_0x13d226['fire']('setAssetsL'+'oaded',_0x4a00b1,_0x195437);}['destroy'](){var _0x17319a,_0x2f64a3,_0x5bbd6d,_0x131bdf,_0x3a7095,_0x3adb5e,_0x4df1c5,_0xfc0b1,_0x3b92e3,_0x156be5,_0x3b82d0,_0x42fe4e,_0x561ccf,_0x35d789,_0x4a82bf,_0x25296b,_0x127a62,_0x27d9ea,_0x503407,_0x5b0128,_0x4c048d;(_0x17319a=this['updateData'+'Worker'])==null||_0x17319a['destroy'](),this['updateData'+'Worker']=void(0x22a+-0x5*-0x54+-0x3ce),(_0x2f64a3=this['colorTextu'+'re'])==null||_0x2f64a3['destroy'](),(_0x5bbd6d=this['transformA'+'Texture'])==null||_0x5bbd6d['destroy'](),(_0x131bdf=this['transformB'+'Texture'])==null||_0x131bdf['destroy'](),(_0x3a7095=this['transformR'+'Texture'])==null||_0x3a7095['destroy'](),(_0x3adb5e=this['transformM'+'otionTextu'+'re'])==null||_0x3adb5e['destroy'](),(_0x4df1c5=this['transformL'+'ifecycleTe'+'xture'])==null||_0x4df1c5['destroy'](),(_0xfc0b1=this['sh1to3Text'+'ure'])==null||_0xfc0b1['destroy'](),(_0x3b92e3=this['sh4to7Text'+'ure'])==null||_0x3b92e3['destroy'](),(_0x156be5=this['sh8to11Tex'+'ture'])==null||_0x156be5['destroy'](),(_0x3b82d0=this['sh12to15Te'+'xture'])==null||_0x3b82d0['destroy'](),(_0x42fe4e=this['colorTextu'+'re2'])==null||_0x42fe4e['destroy'](),(_0x561ccf=this['transformA'+'Texture2'])==null||_0x561ccf['destroy'](),(_0x35d789=this['transformB'+'Texture2'])==null||_0x35d789['destroy'](),(_0x4a82bf=this['transformR'+'Texture2'])==null||_0x4a82bf['destroy'](),(_0x25296b=this['transformM'+'otionTextu'+'re2'])==null||_0x25296b['destroy'](),(_0x127a62=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x127a62['destroy'](),(_0x27d9ea=this['sh1to3Text'+'ure2'])==null||_0x27d9ea['destroy'](),(_0x503407=this['sh4to7Text'+'ure2'])==null||_0x503407['destroy'](),(_0x5b0128=this['sh8to11Tex'+'ture2'])==null||_0x5b0128['destroy'](),(_0x4c048d=this['sh12to15Te'+'xture2'])==null||_0x4c048d['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x31b7e1){var _0x4e5f08,_0x99f3d6,_0xd443f3,_0x338911,_0x4e61b4,_0x4a3b0d,_0x30a47,_0x1e745d,_0x760c2,_0x1fafda,_0x1dac30,_0x3edc37,_0x26d220;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x311ced=((_0x4e5f08=_0x31b7e1['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0x296*0xa+0x1*-0x2221+0x3bfd):_0x4e5f08['data'])??0xe8*0x8+0xabd*0x3+-0x1*0x2777,_0x13559c=((_0x99f3d6=_0x31b7e1['getParamet'+'er']('uSplatScal'+'e'))==null?void(-0x43c*-0x7+0x8b7+-0x3*0xcc9):_0x99f3d6['data'])??-0x3*0xa14+-0x1ab*-0x4+0x1791,_0x5a105a=((_0xd443f3=_0x31b7e1['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x2702+0x24a6+0x25c*0x1):_0xd443f3['data'])??0x11c5*0x1+-0x1a*0xbb+0x13a,_0x3e72f7=((_0x338911=_0x31b7e1['getParamet'+'er']('uHueOffset'))==null?void(0x1*-0xa52+-0xf54+0x43*0x62):_0x338911['data'])??0x4*-0x20b+-0x1*-0x977+-0x14b*0x1,_0x26c76b=((_0x4e61b4=_0x31b7e1['getParamet'+'er']('uInvertOpa'+'city'))==null?void(0x2*-0x859+-0x16be*0x1+0x2770):_0x4e61b4['data'])??-0x25b*-0x9+-0xfe6+-0x54d,_0x44ab8b=((_0x4a3b0d=_0x31b7e1['getParamet'+'er']('uOpacity'))==null?void(-0xd05+-0xd78+0x1a7d):_0x4a3b0d['data'])??0x97*-0x31+-0x2f3*0xc+0x404c,_0x2c5fe1=((_0x30a47=_0x31b7e1['getParamet'+'er']('clrOffset'))==null?void(0x2505+-0x1c28*-0x1+-0x412d):_0x30a47['data'])??[-0x1bfb+-0x1237*0x2+0x5db*0xb,-0x2*-0x946+0x1259+-0x24e5,0x68+0x12e*-0x2+0x1f4,0x48*-0x86+-0x1c12*-0x1+0x99f],_0x5a9135=((_0x1e745d=_0x31b7e1['getParamet'+'er']('clrScale'))==null?void(-0x3*0x419+-0x87d*0x3+0x25c2):_0x1e745d['data'])??[-0x246f+0x113+0x235d,-0xb3*-0x22+0x5b3+-0x29*0xb8,-0x196d+-0x9fe+0x236c*0x1,0x1*0x12b9+0x233c+-0x35f4],_0x4b04a7=((_0x760c2=_0x31b7e1['getParamet'+'er']('uShapeN'))==null?void(-0x5b*0x3b+0x13b7+0x142):_0x760c2['data'])??0x1ef7*0x1+-0xe2+0x11*-0x1c5,_0x2ce53c=((_0x1fafda=_0x31b7e1['getParamet'+'er']('mode'))==null?void(-0x6*0x2ea+0x1c2e+0x4a*-0x25):_0x1fafda['data'])??0x53+0x2e*0x1d+-0xd*0x6d,_0xf3a5d4=((_0x1dac30=_0x31b7e1['getParamet'+'er']('ringSize'))==null?void(-0x2*-0xbb4+0x1301+-0x8d*0x4d):_0x1dac30['data'])??-0x4*0x3cb+0xb41+0x3eb,_0x88ad80=((_0x3edc37=_0x31b7e1['defines'])==null?void(-0x753+-0x2d2+-0x1*-0xa25):_0x3edc37['get']('uOpenAnim'))??'0',_0x1c1b2b=((_0x26d220=_0x31b7e1['defines'])==null?void(0x1a7+-0x1800+-0x1659*-0x1):_0x26d220['get']('uControlCo'+'lorMode'))??'0';_0x31b7e1['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x31b7e1['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x31b7e1['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x31b7e1['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x31b7e1['setParamet'+'er']('uSplatScal'+'e',_0x13559c),_0x31b7e1['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x311ced),_0x31b7e1['setParamet'+'er']('uSaturatio'+'n',_0x5a105a),_0x31b7e1['setParamet'+'er']('uHueOffset',_0x3e72f7),_0x31b7e1['setParamet'+'er']('uInvertOpa'+'city',_0x26c76b),_0x31b7e1['setParamet'+'er']('uOpacity',_0x44ab8b),_0x31b7e1['setParamet'+'er']('clrOffset',_0x2c5fe1),_0x31b7e1['setParamet'+'er']('clrScale',_0x5a9135),_0x31b7e1['setParamet'+'er']('uShapeN',_0x4b04a7),_0x31b7e1['setParamet'+'er']('mode',_0x2ce53c),_0x31b7e1['setParamet'+'er']('ringSize',_0xf3a5d4),_0x31b7e1['setParamet'+'er']('prerenderC'+'Time',0x26e6*0x1+0x5*0x213+0x3145*-0x1),_0x31b7e1['setParamet'+'er']('renderSpac'+'e',-0x8b7+-0x12ed+0x1bae),_0x31b7e1['setParamet'+'er']('endSpace',0x314*-0x4+0x2077+-0x141d),_0x31b7e1['setDefine']('uOpenAnim',_0x88ad80),_0x31b7e1['setDefine']('uControlCo'+'lorMode',_0x1c1b2b),this['transformM'+'otionTextu'+'re']&&_0x31b7e1['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x31b7e1['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x31b7e1['setDefine']('SH_BANDS',this['shBands']),_0x31b7e1['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x31b7e1['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x31b7e1['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x31b7e1['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x31b7e1['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x25f6a8){const _0x5ccf8b=Math['ceil'](Math['sqrt'](_0x25f6a8)),_0x4e55fe=Math['ceil'](_0x25f6a8/_0x5ccf8b);return new J(_0x5ccf8b,_0x4e55fe);}async['updateColo'+'rData'](_0x337c5f){var _0x279d78;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x335917=this['colorTextu'+'re2'];if(!_0x335917||this['isDestroye'+'d'])return;let _0x59fac7=(_0x279d78=_0x337c5f['transformD'+'ata'])==null?void(0xa05+-0x5cf*-0x2+-0x15a3*0x1):_0x279d78['dataColor'];if(!_0x59fac7){const _0x1254b9=_0x337c5f['getProp']('color_opac'+'ity');_0x59fac7=new Uint16Array(_0x1254b9['buffer']['slice']());}await this['idleUpdate'+'TexturePro'+'mise'](_0x335917,_0x59fac7);}async['getTransfo'+'rmDataByWo'+'rker'](_0x14985b){var _0x17488c;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x17488c=_0x14985b['transformD'+'ata'])!=null&&_0x17488c['dataCenter'+'s'])return{'centers':_0x14985b['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x14985b['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x14985b['transformD'+'ata']['dataScale'],'dataRotation':_0x14985b['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x14985b['transformD'+'ata']['dataMotion'],'dataTime':_0x14985b['transformD'+'ata']['dataTime'],'motion':_0x14985b['transformD'+'ata']['motion'],'tScaleArray':_0x14985b['transformD'+'ata']['tScaleArra'+'y']};const _0x3f580a=_0x14985b['getProp']('position'),_0x4772d0=_0x14985b['getProp']('motion'),_0x3fc4c8=_0x14985b['getProp']('rotation'),_0x344866=_0x14985b['getProp']('scale'),_0x2a2bbf=_0x14985b['getProp']('t'),_0x536b84=_0x14985b['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x14985b['numSplats'],this['is4D'],_0x3f580a,_0x3fc4c8,_0x4772d0,_0x344866,_0x2a2bbf,_0x536b84);}async['updateTran'+'sformFromD'+'ata'](_0x3d009d){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x3d009d['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x3d009d['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x3d009d['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x3d009d['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x3d009d['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x3fa1a2,_0x1153b4){if(!this['isDestroye'+'d'])return new Promise(_0x36ac0d=>{requestIdleCallback(()=>{const _0x1e86ed=_0x3fa1a2['lock']();_0x1e86ed==null||_0x1e86ed['set'](_0x1153b4),_0x3fa1a2['unlock'](),_0x36ac0d(!(0x108a+0x1*0x17c8+-0x2852));},{'timeout':0x12c});});}async['updateSHDa'+'ta'](_0x1fcca8){var _0x4f94ba,_0x567f1c,_0x45c0f3,_0x593a31,_0x1df070,_0x1e0bb1,_0x19828a,_0x404ea4;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x58118d=(_0x4f94ba=this['sh1to3Text'+'ure2'])==null?void(-0x800*0x2+0x1516+0x28b*-0x2):_0x4f94ba['lock'](),_0x1bb269=(_0x567f1c=this['sh4to7Text'+'ure2'])==null?void(-0xd1*-0x1d+-0x1*-0x703+-0xf58*0x2):_0x567f1c['lock'](),_0x27b67f=(_0x45c0f3=this['sh8to11Tex'+'ture2'])==null?void(-0x11a2*-0x1+0x4a*-0x85+-0x6f*-0x30):_0x45c0f3['lock'](),_0x488834=(_0x593a31=this['sh12to15Te'+'xture2'])==null?void(-0x1439+-0x1dfc+-0x1*-0x3235):_0x593a31['lock'](),_0x266c18={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0xeb5c69=N_(_0x1fcca8,_0x266c18*(0x1fba+0x23a3+-0x435a)),_0x592125=0x1*0x162d+-0x2696+0x1868,_0x68a00e=-0x513*0x3+-0x15cb+0x1*0x2903,_0x1c7335=new Float32Array(-0x9c4*0x4+-0x158b*0x1+0x3c9c),_0x5d72fa=new Uint32Array(_0x1c7335['buffer']),_0x5a7be1=new Array(_0x266c18*(-0x222e+-0x204b+0x427c))['fill'](-0x2f3*0xd+0x1*-0x1d39+0x4390);for(let _0x3a3561=0x1945+-0x361*0x3+0xf22*-0x1;_0x3a3561<_0x1fcca8['numSplats'];++_0x3a3561){for(let _0x193196=-0x1820+0x5*-0x11+0x1875;_0x193196<_0x266c18;++_0x193196)_0x5a7be1[_0x193196*(0x2639+0x1*-0x732+0x7c1*-0x4)]=_0xeb5c69[_0x193196][_0x3a3561],_0x5a7be1[_0x193196*(0x2339+-0x82*0x35+-0x4*0x213)+(-0xdbe+0x5*-0xbf+0x117a)]=_0xeb5c69[_0x193196+_0x266c18][_0x3a3561],_0x5a7be1[_0x193196*(0xcb9*-0x1+0x24a+0xa72)+(0x123b+-0x582+0x9b*-0x15)]=_0xeb5c69[_0x193196+_0x266c18*(0x227b+-0x9a9+-0x18d0)][_0x3a3561];let _0x1fb451=_0x5a7be1[0x2a9*-0x8+-0x928+0x1e70];for(let _0x261b27=-0x1489+-0x6e+-0x8*-0x29f;_0x261b27<_0x266c18*(-0x1cd1+-0x4*-0x9a2+-0x9b4);++_0x261b27)_0x1fb451=Math['max'](_0x1fb451,Math['abs'](_0x5a7be1[_0x261b27]));if(_0x1fb451!==0x20c9+-0x4*-0x125+-0x779*0x5){for(let _0x202251=0x1345*-0x1+-0x50d+0x1852;_0x202251<_0x266c18;++_0x202251)_0x5a7be1[_0x202251*(0xab*0x1b+0x544+-0x174a)+(-0xe*0x256+-0xe03*0x2+-0x143e*-0x3)]=Math['max'](0x135*0x3+-0x2647+0x22a8,Math['min'](_0x592125,Math['floor']((_0x5a7be1[_0x202251*(0x4*0x51b+-0x257*0x2+-0xfbb)+(-0x18b*-0x1+-0x1566+0x13db)]/_0x1fb451*(-0x2331+0xaa3*-0x1+0x2dd4+0.5)+(0x142b+-0xef*0x28+-0x112d*-0x1+0.5))*_0x592125+(0xf*0x241+0x630+-0x27ff+0.5)))),_0x5a7be1[_0x202251*(0x3d1*-0x2+0x11*-0x157+0x2*0xf36)+(-0x23c7+-0x1cfc+0x40c4)]=Math['max'](0x13ec+-0xb9d+-0x84f,Math['min'](_0x68a00e,Math['floor']((_0x5a7be1[_0x202251*(0x1bb1+-0x1b79+-0x35)+(-0x779*0x3+-0x2096+0x92b*0x6)]/_0x1fb451*(-0x1*-0x202d+0x4*-0x82c+0x83+0.5)+(-0x17b*0x16+-0x58*-0x71+-0x646+0.5))*_0x68a00e+(-0xb3f*-0x1+0x2*0x9d9+-0x1*0x1ef1+0.5)))),_0x5a7be1[_0x202251*(0xaed*-0x3+-0x18b3+-0x397d*-0x1)+(-0x683*-0x1+0x214+-0x895)]=Math['max'](-0xec1+0x205a+-0x1199,Math['min'](_0x592125,Math['floor']((_0x5a7be1[_0x202251*(0x1*0x125f+-0x5b0+0x2*-0x656)+(-0x855+-0x1*-0xfb5+-0x75e)]/_0x1fb451*(0xc59*0x1+0x23ab+0x7*-0x6dc+0.5)+(0x1158*0x1+-0x226a+0x1112+0.5))*_0x592125+(-0x1ff0+0x1706*-0x1+-0x1e*-0x1d5+0.5))));_0x1c7335[-0x1*0x1177+0xe2f*0x2+-0xae7]=_0x1fb451,_0x58118d[_0x3a3561*(-0x1a*-0x13f+0x27+-0x2089)+(-0x17eb+0x1*-0x1d5f+-0x1aa5*-0x2)]=_0x5d72fa[0x7*0x517+0x2*0xf1e+-0x1*0x41dd],_0x58118d[_0x3a3561*(0x1*0x1f83+0x12e+0x689*-0x5)+(0x1124*0x2+0x13db+0x29*-0x152)]=_0x5a7be1[0xf0d+0xc65+-0x1b72]<<0xad3+0x2b4*-0x5+0x2c6*0x1|_0x5a7be1[0x1132+-0xc05*-0x1+-0x1d36]<<0x23e9*-0x1+-0x3*-0xb5+0x21d5|_0x5a7be1[0x30*0x76+-0xe7a+0x146*-0x6],_0x58118d[_0x3a3561*(0xa10*0x1+0x9c9+-0x13d5)+(0x2350*-0x1+-0x419*0x7+-0x71*-0x91)]=_0x5a7be1[-0x1edb+-0x233+0x5*0x69d]<<0x2203+0x43*-0x67+0x69*-0x11|_0x5a7be1[-0x19a0+0x1b49+-0x1a5]<<0x1*0x977+0x19*-0x16f+0x1a6b|_0x5a7be1[-0x132+0xbfb*-0x1+0xd32],_0x58118d[_0x3a3561*(-0xf*-0xb6+-0x61*-0x3c+-0x10b1*0x2)+(-0x7a1*-0x1+0x1a42+0x10*-0x21e)]=_0x5a7be1[-0xcbe*0x3+-0x12ec*-0x1+0x1354]<<0x322*0x6+0x168b*-0x1+0x1*0x3d4|_0x5a7be1[-0x255+-0x3b3*-0x4+0x10*-0xc7]<<0x1cb5+-0x1787+0x523*-0x1|_0x5a7be1[0xc39*0x2+-0x263c+0xdd2],this['shBands']>-0x1*0x203+-0x3*0x6a1+0x1*0x15e7&&(_0x1bb269[_0x3a3561*(0xea+-0x1c24+0x1b3e)+(0x11d1+0x25a5+-0x3776)]=_0x5a7be1[0x772+0x1e4c*0x1+-0x25b5]<<0x14c3+-0x39*0x8+-0x12e6|_0x5a7be1[0x49f+-0xe*-0x2c8+-0x2b85]<<0x12b2+0x5ae+-0x1855|_0x5a7be1[-0x25*0x35+0x1d8f+-0x15db],_0x1bb269[_0x3a3561*(0x42e+-0x2*0x1321+-0x886*-0x4)+(0x24ca+0x9c5+-0x2*0x1747)]=_0x5a7be1[0x544+0x1*0x9b6+-0xeee]<<0x735+-0x1378+-0x18b*-0x8|_0x5a7be1[-0x568+0x2583+0x1*-0x200e]<<-0x133f+0x2*-0x4eb+0x1d20|_0x5a7be1[-0x1b54+-0x57a+0x2bd*0xc],_0x1bb269[_0x3a3561*(0x510+0x2*0x8f8+0xb7e*-0x2)+(0x148b*0x1+-0x1*0x8bf+-0xbca)]=_0x5a7be1[-0x110a+0x2cf*0x5+0x30e]<<-0x1*-0x200b+-0x14db+-0xb1b|_0x5a7be1[-0x1336*0x1+-0x226d+-0x35b3*-0x1]<<-0x20a2*0x1+0x23*0xdf+-0x1c*-0x14|_0x5a7be1[-0x7b*0x19+-0x10*-0x1d3+-0x111c],_0x1bb269[_0x3a3561*(-0x2*-0x53f+-0x21*0x128+-0x6*-0x49d)+(-0x20bc+-0x1be*0x7+0x2cf1)]=_0x5a7be1[0x261c+0x57d+-0x2b87]<<0x1d*-0x28+-0x253e+0x29db|_0x5a7be1[-0x115*-0x3+-0xf83+-0x1b*-0x75]<<0x1*-0x24fb+0x49*0x1b+0x1d53|_0x5a7be1[0xd53*-0x2+-0x11fb*-0x2+-0x93c],this['shBands']>-0x1*-0x23a1+0x1*-0x98f+-0x1a10?(_0x27b67f[_0x3a3561*(0x5dd+0xd*-0x56+-0x17b)+(-0x1ba1+-0x3*0xa13+0x39da)]=_0x5a7be1[0x10a+-0xb*0x47+0x218]<<-0xb74+-0x686*-0x3+-0x809|_0x5a7be1[-0x8b*0x1+0x2*-0x441+-0x1*-0x923]<<-0x1b*0x57+-0x9*-0x448+-0x38*0x86|_0x5a7be1[0xa6b*-0x3+0x14b4+0xaa4],_0x27b67f[_0x3a3561*(0x1cdb*0x1+-0x3a*-0x47+0x2ced*-0x1)+(-0x3*-0xb48+-0xc41*-0x3+-0x469a)]=_0x5a7be1[-0x7ba+-0x120e+0x19e0]<<-0x71*0xd+0x1cf7+-0x1725|_0x5a7be1[0x26f7+-0x1373+0x3*-0x679]<<0x18c6+-0x1c1e+0x11*0x33|_0x5a7be1[-0xb5*-0x23+-0x13d*-0x11+-0x2db2*0x1],_0x27b67f[_0x3a3561*(-0x1e34+0x1e69+-0x7*0x7)+(-0x93*-0x23+-0x236e+0xf57)]=_0x5a7be1[-0x1f*0x6a+-0x11*0x1bd+-0x126*-0x25]<<0xa*0x380+0xa5*-0x2+-0x21a1|_0x5a7be1[0x20e0*-0x1+0x81b+0x18e1]<<-0x58*-0x51+0x178c+0x3359*-0x1|_0x5a7be1[-0x4ae*0x6+-0x24c1*0x1+-0xa3*-0x66],_0x27b67f[_0x3a3561*(-0x13b1*0x1+-0xdc6*0x1+-0x3*-0xb29)+(-0x1022+0x30*0xe+0x1*0xd85)]=_0x5a7be1[-0x205+0x2185*-0x1+0x1c*0x146]<<0x26cb+-0x1f15*0x1+-0x3*0x28b|_0x5a7be1[-0xd3*-0xe+0x7f5*0x1+-0xa0*0x1f]<<0xc85+-0x1f2b+-0x63b*-0x3|_0x5a7be1[0x845+-0x488*-0x4+-0x1a45],_0x488834[_0x3a3561*(-0x8b8+0x10*-0x56+0x12d*0xc)+(-0x5*-0x44c+0xaf*0x7+-0x1a45)]=_0x5a7be1[-0x7f4+0x204c+-0x1837]<<0xb*0x81+0x23c1+-0x3*0xdbd|_0x5a7be1[-0x2*-0xef8+0x1c9f+-0x3a6d]<<-0x23f1+-0xb50+0x2f4c|_0x5a7be1[-0x2112+0xb*-0x8b+0x11*0x24e],_0x488834[_0x3a3561*(-0x10*-0x15c+-0x1*-0x1721+0x8f9*-0x5)+(0xb41+-0x1c96+0xe*0x13d)]=_0x5a7be1[-0x1903*0x1+0xc88+-0x9*-0x167]<<-0x74f*-0x1+0x7*-0x556+0x1e20|_0x5a7be1[0x1938+0x1*0x20e7+-0x39fa]<<-0x1fb1*0x1+0x1*-0x1263+0x321f|_0x5a7be1[0xc6d+0x3*0x9b2+-0x295d],_0x488834[_0x3a3561*(-0x24d9+-0x1*0x14d3+-0x34*-0x11c)+(0x1*0x5e6+-0x1e7e+0x189a)]=_0x5a7be1[-0x17f1*-0x1+0x1063*-0x2+0x8fc]<<-0xf07+-0xb*0x364+-0x81*-0x68|_0x5a7be1[0x212*-0x11+0x128d+0x10cd]<<-0xd5a+-0xbc5+0x192a|_0x5a7be1[-0x1a4d*0x1+-0xc84+-0x67f*-0x6],_0x488834[_0x3a3561*(-0x2636+0x4e5+0x2155)+(-0x9ac+0x1*0x39d+-0x6*-0x103)]=_0x5a7be1[0x3ce+0x1a03*0x1+-0x1da7]<<-0x1955+0x22b8+-0x3*0x31a|_0x5a7be1[-0xe00+-0x1a19+0xc*0x35b]<<0x20f5+-0x2db*0x7+-0xced|_0x5a7be1[-0x1*0x1e89+0x2b6+-0x1*-0x1bff]):_0x27b67f[_0x3a3561]=_0x5a7be1[-0x3*-0x6cd+-0x27e+-0x11d4]<<-0x274*-0xd+0x22b7*-0x1+-0xba*-0x4|_0x5a7be1[-0x9d*0x33+0x1868+0x6f5]<<-0x2301+0x525*0x1+0x1de7|_0x5a7be1[-0x176d+0x1eb9+-0x735]);}}(_0x1df070=this['sh1to3Text'+'ure2'])==null||_0x1df070['unlock'](),(_0x1e0bb1=this['sh4to7Text'+'ure2'])==null||_0x1e0bb1['unlock'](),(_0x19828a=this['sh8to11Tex'+'ture2'])==null||_0x19828a['unlock'](),(_0x404ea4=this['sh12to15Te'+'xture2'])==null||_0x404ea4['unlock']();}async['updateSHDa'+'taByWorker'](_0x1de650){var _0x5002fb,_0x2551a4,_0x26a080,_0xdccdbf,_0x13bf59;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x35ae2d={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x48765f,_0x5c4218,_0x5d0bc7,_0x228268;if((_0x5002fb=_0x1de650['transformD'+'ata'])!=null&&_0x5002fb['sh1to3Data'])_0x48765f=(_0x2551a4=_0x1de650['transformD'+'ata'])==null?void(0x108f+-0x50b*0x2+-0x679):_0x2551a4['sh1to3Data'],_0x5c4218=(_0x26a080=_0x1de650['transformD'+'ata'])==null?void(-0x5*0x94+-0x1247+0x152b):_0x26a080['sh4to7Data'],_0x5d0bc7=(_0xdccdbf=_0x1de650['transformD'+'ata'])==null?void(-0x1fc6+-0x731*0x2+0x698*0x7):_0xdccdbf['sh8to11Dat'+'a'],_0x228268=(_0x13bf59=_0x1de650['transformD'+'ata'])==null?void(0x9e6+0x1017+-0x19fd):_0x13bf59['sh12to15Da'+'ta'];else{const _0x52ce89=N_(_0x1de650,_0x35ae2d*(-0x761+-0x10d*-0x1e+-0x1822)),_0x1fd27c=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x1de650['numSplats'],this['shBands'],_0x52ce89);_0x48765f=_0x1fd27c['sh1to3Data'],_0x5c4218=_0x1fd27c['sh4to7Data'],_0x5d0bc7=_0x1fd27c['sh8to11Dat'+'a'],_0x228268=_0x1fd27c['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x48765f),this['shBands']>-0x163a+0x2412+-0xdd7&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x5c4218),this['shBands']>-0x113d*-0x1+-0x39f*0x7+0x81e?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x5d0bc7),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x228268)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x5d0bc7));}}const Bb='FILL_WINDO'+'W',k_='KEEP_ASPEC'+'T',U_='AUTO',zb='FIXED';let Gy;function Zr(){return Gy;}function Nf(_0x224957){Gy=_0x224957;}class Vb{constructor(){h(this,'renderPass'+'es',[]),h(this,'renderTarg'+'etMap',new Map());}['addRenderP'+'ass'](_0x2112ce){M['assert'](_0x2112ce),_0x2112ce['frameUpdat'+'e']();const _0x37e3a7=_0x2112ce['beforePass'+'es'];for(let _0x2ec2c8=0x40*0xb+0x2165+-0x2425;_0x2ec2c8<_0x37e3a7['length'];_0x2ec2c8++){const _0x30813b=_0x37e3a7[_0x2ec2c8];_0x30813b['enabled']&&this['addRenderP'+'ass'](_0x30813b);}_0x2112ce['enabled']&&this['renderPass'+'es']['push'](_0x2112ce);const _0x17f5c1=_0x2112ce['afterPasse'+'s'];for(let _0x49ac6d=0xfa5+0x468+0x1d*-0xb1;_0x49ac6d<_0x17f5c1['length'];_0x49ac6d++){const _0x52055b=_0x17f5c1[_0x49ac6d];_0x52055b['enabled']&&this['addRenderP'+'ass'](_0x52055b);}}['reset'](){this['renderPass'+'es']['length']=0x2065*0x1+0x26b7+-0xa4*0x6f;}['compile'](){const _0x3fd076=this['renderTarg'+'etMap'],_0x596688=this['renderPass'+'es'];for(let _0xa98bc2=-0x1c79+0x9ac*0x2+-0x30b*-0x3;_0xa98bc2<_0x596688['length'];_0xa98bc2++){const _0x3d983d=_0x596688[_0xa98bc2],_0x4d0b0b=_0x3d983d['renderTarg'+'et'];if(_0x4d0b0b!==void(-0x6f8+-0xf1+0x7e9)){const _0x4d2e8=_0x3fd076['get'](_0x4d0b0b);if(_0x4d2e8){const _0x5d4696=_0x3d983d['colorArray'+'Ops']['length'];for(let _0x1a234b=-0x6b3*-0x1+0x636+-0xce9;_0x1a234b<_0x5d4696;_0x1a234b++)_0x3d983d['colorArray'+'Ops'][_0x1a234b]['clear']||(_0x4d2e8['colorArray'+'Ops'][_0x1a234b]['store']=!(-0x7a*0x47+-0x22bd+0x4493));_0x3d983d['depthStenc'+'ilOps']['clearDepth']||(_0x4d2e8['depthStenc'+'ilOps']['storeDepth']=!(0x1d6c+-0x1b7b+-0x1f1)),_0x3d983d['depthStenc'+'ilOps']['clearStenc'+'il']||(_0x4d2e8['depthStenc'+'ilOps']['storeStenc'+'il']=!(0x20c6+0xbfa+0x20*-0x166));}_0x3fd076['set'](_0x4d0b0b,_0x3d983d);}}for(let _0x4eb9e9=-0x5a9+-0x2338+0x28e1;_0x4eb9e9<_0x596688['length']-(-0x4*0x85d+0x173b+0x1*0xa3a);_0x4eb9e9++){const _0xa4a9aa=_0x596688[_0x4eb9e9],_0x562289=_0xa4a9aa['renderTarg'+'et'],_0x846629=_0x596688[_0x4eb9e9+(0x135f+-0xf1*0x2+-0x117c)],_0x530ea9=_0x846629['renderTarg'+'et'];_0x562289!==_0x530ea9||_0x562289===void(-0xab7*0x1+-0x1*0x78c+-0x1243*-0x1)||_0x846629['depthStenc'+'ilOps']['clearDepth']||_0x846629['depthStenc'+'ilOps']['clearStenc'+'il']||_0x846629['colorArray'+'Ops']['some'](_0x2d2900=>_0x2d2900['clear'])||_0xa4a9aa['afterPasse'+'s']['length']>-0x4c5*0x2+-0x10eb+0x1a75||_0x846629['beforePass'+'es']['length']>0x1ae1+-0x26cc+0x9*0x153||(_0xa4a9aa['_skipEnd']=!(0xa*0x52+-0x133*0x10+0xffc),_0x846629['_skipStart']=!(0x2*-0x73f+0x2480+-0x756*0x3));}let _0x46d00a=null,_0x1032d1=null;for(let _0x5e4a6f=-0x1711+-0xcee*-0x1+0xa23;_0x5e4a6f<_0x596688['length'];_0x5e4a6f++){const _0x2d3ee3=_0x596688[_0x5e4a6f],_0x18aff6=_0x2d3ee3['renderTarg'+'et'],_0x3fd6ac=_0x18aff6==null?void(0x9*0x4f+0x2330+-0x25f7):_0x18aff6['colorBuffe'+'r'];if(_0x3fd6ac!=null&&_0x3fd6ac['cubemap']){if(_0x46d00a===_0x3fd6ac){const _0x22e360=_0x1032d1['colorArray'+'Ops']['length'];for(let _0x4fab75=0x2292+-0xbb+-0x1*0x21d7;_0x4fab75<_0x22e360;_0x4fab75++)_0x1032d1['colorArray'+'Ops'][_0x4fab75]['mipmaps']=!(0x1022+-0x2344+0x1323);}_0x46d00a=_0x18aff6['colorBuffe'+'r'],_0x1032d1=_0x2d3ee3;}else _0x2d3ee3['requiresCu'+'bemaps']&&(_0x46d00a=null,_0x1032d1=null);}_0x3fd076['clear']();}['render'](_0x6ec7b8){this['compile']();const _0x31783c=this['renderPass'+'es'];for(let _0x11654b=-0x2397+0x13*0x25+0x20d8*0x1;_0x11654b<_0x31783c['length'];_0x11654b++)_0x31783c[_0x11654b]['render']();}}class Gb{constructor(_0x44513c,_0x4e7752){this['texture0']=_0x44513c,this['texture1']=_0x4e7752;}['destroy'](){var _0xa9f12c,_0x1f40c8;(_0xa9f12c=this['texture0'])==null||_0xa9f12c['destroy'](),(_0x1f40c8=this['texture1'])==null||_0x1f40c8['destroy']();}}const B_=new Ht();class Vr{static['createText'+'ure'](_0x1d9166,_0x4e85c6,_0x263bb0,_0x3b43b2=''){return new _e(_0x1d9166,{'name':'AreaLightL'+'UT'+_0x3b43b2,'width':_0x263bb0,'height':_0x263bb0,'format':_0x4e85c6,'addressU':ue,'addressV':ue,'type':di,'magFilter':_t,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(0x717+0x26f1*0x1+-0x2e07)});}static['applyTextu'+'res'](_0x271746,_0x32644d,_0x14c203){B_['remove'](_0x271746),B_['get'](_0x271746,()=>new Gb(_0x32644d,_0x32644d===_0x14c203?null:_0x14c203)),_0x271746['scope']['resolve']('areaLights'+'LutTex1')['setValue'](_0x32644d),_0x271746['scope']['resolve']('areaLights'+'LutTex2')['setValue'](_0x14c203);}static['createPlac'+'eholder'](_0xe0e865){const _0x4b0315=Vr['createText'+'ure'](_0xe0e865,at,-0x24a+-0x1051+0x1*0x129d,'placeholde'+'r');_0x4b0315['lock']()['fill'](-0x41e+0x1*0x168a+0x12*-0x106),_0x4b0315['unlock'](),Vr['applyTextu'+'res'](_0xe0e865,_0x4b0315,_0x4b0315);}static['set'](_0x2ad361,_0x501323,_0x34cf9b){function _0x2e1824(_0x21cfbd,_0x4f5cd3,_0x3aac31){const _0x3e52f5=Vr['createText'+'ure'](_0x21cfbd,_0x3aac31,0xeac*0x1+0x1eff+0x4d*-0x97);return _0x3e52f5['lock']()['set'](_0x4f5cd3),_0x3e52f5['unlock'](),_0x3e52f5;}function _0x1c4ca7(_0x1c0464){const _0x52d774=_0x1c0464['length'],_0x1d5bc9=new Uint16Array(_0x52d774),_0x1d2a06=mn['float2Half'];for(let _0x37b6fd=0x1761+-0x230f+0x1a*0x73;_0x37b6fd<_0x52d774;_0x37b6fd++)_0x1d5bc9[_0x37b6fd]=_0x1d2a06(_0x1c0464[_0x37b6fd]);return _0x1d5bc9;}const _0x9be4c9=_0x501323,_0x33e499=_0x34cf9b,_0x549048=_0x1c4ca7(_0x9be4c9),_0x25b57d=_0x1c4ca7(_0x33e499),_0x4071cf=_0x2e1824(_0x2ad361,_0x549048,at),_0x4c38dd=_0x2e1824(_0x2ad361,_0x25b57d,at);Vr['applyTextu'+'res'](_0x2ad361,_0x4071cf,_0x4c38dd);}}const Qh='en-US',Jh={'en':'en-US','es':'en-ES','zh':'zh-CN','zh-HK':'zh-TW','zh-TW':'zh-HK','zh-MO':'zh-HK','fr':'fr-FR','de':'de-DE','it':'it-IT','ru':'ru-RU','ja':'ja-JP'},Nm={};function _r(_0x17f82d,_0x4c5d24){for(let _0xbd39c6=0x100c*-0x1+0x20ba*-0x1+0x30c6,_0x3de944=_0x17f82d['length'];_0xbd39c6<_0x3de944;_0xbd39c6++)Nm[_0x17f82d[_0xbd39c6]]=_0x4c5d24;}function bi(_0x230d34){const _0x1f1ca3=_0x230d34['indexOf']('-');return _0x1f1ca3!==-(0x1*0xdb7+-0x1d91+0x3*0x549)?_0x230d34['substring'](0xfd9*0x2+0x7*0x50e+0x144*-0x35,_0x1f1ca3):_0x230d34;}function Hb(_0x38f6f8,_0x13a183){const _0x2e7575=_0x38f6f8['indexOf']('-');return _0x2e7575!==-(0x3*-0x185+0xc46+0x2*-0x3db)?_0x13a183+_0x38f6f8['substring'](_0x2e7575):_0x13a183;}function Hy(_0x38e8b5,_0x3744c7){if(_0x3744c7[_0x38e8b5])return _0x38e8b5;let _0x25f59c=Jh[_0x38e8b5];if(_0x25f59c&&_0x3744c7[_0x25f59c])return _0x25f59c;const _0x4b31e6=bi(_0x38e8b5);return _0x25f59c=Jh[_0x4b31e6],_0x3744c7[_0x25f59c]?_0x25f59c:_0x3744c7[_0x4b31e6]?_0x4b31e6:Qh;}_r(['ja','ko','th','vi','zh','id'],_0x5e89bc=>-0x126c+-0x26e8*-0x1+-0x147c),_r(['fa','hi'],_0x3e550c=>_0x3e550c>=0x24d5+0x1*0x2487+-0x495c&&_0x3e550c<=-0x23*0xff+-0x2565*-0x1+-0x287*0x1?0x46*-0x31+0x2402+-0x169c:0x802+-0x239*-0x7+-0x1790),_r(['fr','pt'],_0x3c3e72=>_0x3c3e72>=0x1b02*-0x1+0x614*0x3+0x8c6&&_0x3c3e72<0x2146+0x70f*0x4+-0x3d80?-0x115*0x13+-0xbbe+0x204d*0x1:0x6*0x115+0x23dd*-0x1+0x1d60),_r(['da'],_0x365e6a=>_0x365e6a===0x5*0x32a+-0x1ead+0xedc||!Number['isInteger'](_0x365e6a)&&_0x365e6a>=-0x1d05+0x159b*0x1+0x76a&&_0x365e6a<=0x305*-0xa+0x2*0x12e0+-0x78d?0x7e3+-0x224f+0x1a6c:0x7e4+0x1*-0x255a+-0x1d77*-0x1),_r(['de','en','it','el','es','tr','fi','sv','nb','no','ur'],_0x5097a4=>_0x5097a4===0x2*-0x8b9+0xbbd*-0x1+-0x2*-0xe98?0x23b9+0xef*-0x24+-0x21d:-0x1c9f+-0x15d8+0x3278),_r(['ru','uk'],_0x566bb0=>{if(Number['isInteger'](_0x566bb0)){const _0x22a99b=_0x566bb0%(-0x47*0x25+-0x126c+0x1cb9),_0x16a6ce=_0x566bb0%(0x653*0x5+-0x21f6+0xe9*0x3);if(_0x22a99b===0xe03*0x1+-0x14*0xa3+-0x146&&_0x16a6ce!==-0x1d90+0xe99+0x71*0x22)return-0x338+0x5f*-0x1d+-0xdfb*-0x1;if(_0x22a99b>=0x32*0x7+0x35*0x90+-0x10a*0x1e&&_0x22a99b<=0x6e*-0x45+0x1c75+-0x3*-0x67&&(_0x16a6ce<0x175*0x15+0x1f5e+-0x3deb||_0x16a6ce>0xcb9*0x1+0x3*-0x499+0x48*0x4))return 0xfd1+-0x14a4+0x4*0x135;if(_0x22a99b===-0x1d40+0x842+0x14fe*0x1||_0x22a99b>=0x2372+0x150+-0x24bd&&_0x22a99b<=0x23ce+0x2*-0xf77+-0x4d7||_0x16a6ce>=-0x2e7*0x1+-0x1d86+0x4*0x81e&&_0x16a6ce<=0x2*0x5a2+-0x7f2+0x1a2*-0x2)return 0x79*-0x13+0x1*0x1105+-0x4*0x202;}return-0x1a*0x74+-0x1*-0x4fd+0x6ce;}),_r(['pl'],_0x16ad6b=>{if(Number['isInteger'](_0x16ad6b)){if(_0x16ad6b===0x11cd+0x1201+-0xf*0x263)return 0x184*0x17+-0x35e*0x9+0x16*-0x35;const _0x2588f1=_0x16ad6b%(-0xe19*-0x1+0x84*0x4+-0x101f),_0x457bf2=_0x16ad6b%(-0x1d06+0x10bb*0x1+0xbf*0x11);if(_0x2588f1>=0x2153+0x22*-0x18+-0x1e21&&_0x2588f1<=0x3*-0x8f5+-0x1879+0x335c*0x1&&(_0x457bf2<-0x2216+-0x3b*-0x5d+-0xcb3*-0x1||_0x457bf2>-0xb14+0x56a+0x5b8))return-0x583*-0x4+-0xa59+-0xbb2;if(_0x2588f1>=0x8ad+0x15*-0xf1+-0x5*-0x238&&_0x2588f1<=0x17d*-0x12+0x49a+0xf7*0x17||_0x2588f1>=-0x2385+0x9db+0x19af&&_0x2588f1<=-0x8d3+0x924+0x3*-0x18||_0x457bf2>=-0xfe1+0x19c6+-0x9d9&&_0x457bf2<=-0x52*-0x2+-0x497*0x5+-0x19*-0xe5)return 0x472*0x7+-0xbc0+-0x135c;}return-0x2613+0x2275+-0x3a1*-0x1;}),_r(['ar'],_0x407d06=>{if(_0x407d06===-0xd73+-0x2060+0x1*0x2dd3)return 0x1195*0x2+0x20f7+0x1*-0x4421;if(_0x407d06===0x1*-0x6d3+-0xd54+0x1428)return 0x23*-0x103+-0x1cd7+0x156b*0x3;if(_0x407d06===-0x2314+-0x1a25+0x3d3b)return-0x1*-0x1480+0x1955+0x1*-0x2dd3;if(Number['isInteger'](_0x407d06)){const _0x2f275b=_0x407d06%(0xd6b+0x1*0x13d6+-0x20dd);if(_0x2f275b>=0x28b+-0xe71+0x1*0xbe9&&_0x2f275b<=-0xc7e+-0x64f+0x12d7)return-0x3*-0x91d+0x5*0x216+0x432*-0x9;if(_0x2f275b>=-0x1055+0x17fb+0x1*-0x79b&&_0x2f275b<=0x1*0x26fa+-0x1bd7+-0x2b0*0x4)return 0x222d+-0x8*0x2c5+-0xc01*0x1;}return 0x2205+-0xc92+-0x156e;});const Wb=Nm[bi(Qh)];function $d(_0x3875ed){return Nm[_0x3875ed]||Wb;}const Ln=new RegExp('^\x5cs*(?:(?:'+'[a-z]+[a-z'+'0-9\x5c-+.]*:'+')?//|data:'+'|blob:)','i');class $b{constructor(_0xa77822='',_0x2665d6='',_0xc98581=null,_0x1b1bdd=null,_0x5d1da0=null,_0x36a857=null){this['url']=_0xa77822,this['filename']=_0x2665d6,this['hash']=_0xc98581,this['size']=_0x1b1bdd,this['opt']=_0x5d1da0,this['contents']=_0x36a857;}['equals'](_0x317978){return this['url']===_0x317978['url']&&this['filename']===_0x317978['filename']&&this['hash']===_0x317978['hash']&&this['size']===_0x317978['size']&&this['opt']===_0x317978['opt']&&this['contents']===_0x317978['contents'];}}let Xb=-(-0x142+0xe*-0xd7+0x21*0x65);const qb={'pvr':'extCompres'+'sedTexture'+'PVRTC','dxt':'extCompres'+'sedTexture'+'S3TC','etc2':'extCompres'+'sedTexture'+'ETC','etc1':'extCompres'+'sedTexture'+'ETC1','basis':'canvas'},z_=['pvr','dxt','etc2','etc1','basis'];class me extends pe{constructor(_0x1db047,_0x4fd765,_0x2cc40b,_0x3c1c19={},_0x40eb7f={}){super(),h(this,'_file',null),h(this,'_i18n',{}),h(this,'_preload',!(0x2*-0x103+-0x14*0x43+0x743)),h(this,'_resources',[]),h(this,'id',Xb--),h(this,'loaded',!(0x2376+0x1d59+0x316*-0x15)),h(this,'loading',!(-0x1c67+-0x12ac+0x2f14)),h(this,'options',{}),h(this,'registry',null),h(this,'tags',new uo(this)),h(this,'type'),h(this,'urlObject',null),(this['_name']=_0x1db047||'',this['type']=_0x4fd765,this['_data']=_0x3c1c19||{},this['options']=_0x40eb7f||{},_0x2cc40b&&(this['file']=_0x2cc40b));}set['name'](_0x1921af){if(this['_name']===_0x1921af)return;const _0x42cc18=this['_name'];this['_name']=_0x1921af,this['fire']('name',this,this['_name'],_0x42cc18);}get['name'](){return this['_name'];}set['file'](_0x406983){var _0x57fd7c,_0x23ea93;if(_0x406983&&_0x406983['variants']&&['texture','textureatl'+'as','bundle']['indexOf'](this['type'])!==-(0x541+-0x110+-0x430*0x1)){const _0x2bb0c2=((_0x23ea93=(_0x57fd7c=this['registry'])==null?void(-0xf5f+0x1b53+-0xbf4):_0x57fd7c['_loader'])==null?void(-0x71+0x54a+-0x1*0x4d9):_0x23ea93['_app'])||Zr(),_0x59cb60=_0x2bb0c2==null?void(-0x1594+-0x21c0+0x1*0x3754):_0x2bb0c2['graphicsDe'+'vice'];if(_0x59cb60)for(let _0x28401d=0x1270+0x19f6+0x1*-0x2c66,_0x304dba=z_['length'];_0x28401d<_0x304dba;_0x28401d++){const _0x338556=z_[_0x28401d];if(_0x406983['variants'][_0x338556]&&_0x59cb60[qb[_0x338556]]){_0x406983=_0x406983['variants'][_0x338556];break;}if(_0x2bb0c2['enableBund'+'les']){const _0x55dc93=_0x2bb0c2['bundles']['listBundle'+'sForAsset'](this);if(_0x55dc93&&_0x55dc93['find'](_0x106c84=>{var _0x1633cc;return(_0x1633cc=_0x106c84==null?void(0x3b0*0x6+0x52*-0xc+-0x3a8*0x5):_0x106c84['file'])==null?void(-0x20*-0xd6+-0x1abc+0x1*-0x4):_0x1633cc['variants'][_0x338556];}))break;}}}const _0x279111=this['_file'],_0x4cde0e=_0x406983?new $b(_0x406983['url'],_0x406983['filename'],_0x406983['hash'],_0x406983['size'],_0x406983['opt'],_0x406983['contents']):null;(!!_0x4cde0e!=!!_0x279111||_0x4cde0e&&!_0x4cde0e['equals'](_0x279111))&&(this['_file']=_0x4cde0e,this['fire']('change',this,'file',_0x4cde0e,_0x279111),this['reload']());}get['file'](){return this['_file'];}set['data'](_0x2b8427){const _0x3e87db=this['_data'];this['_data']=_0x2b8427,_0x2b8427!==_0x3e87db&&(this['fire']('change',this,'data',_0x2b8427,_0x3e87db),this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['data'](){return this['_data'];}set['resource'](_0x3d8289){const _0xd3fcc7=this['_resources'][0x15a+0x2*0x9d5+0x10d*-0x14];this['_resources'][-0x34+0xf4e+-0xf1a]=_0x3d8289,this['fire']('change',this,'resource',_0x3d8289,_0xd3fcc7);}get['resource'](){return this['_resources'][-0xd8f+-0x1*0x466+-0x1*-0x11f5];}set['resources'](_0x5252ec){const _0x283647=this['_resources'];this['_resources']=_0x5252ec,this['fire']('change',this,'resources',_0x5252ec,_0x283647);}get['resources'](){return this['_resources'];}set['preload'](_0x3e1bac){_0x3e1bac=!!_0x3e1bac,this['_preload']!==_0x3e1bac&&(this['_preload']=_0x3e1bac,this['_preload']&&!this['loaded']&&!this['loading']&&this['registry']&&this['registry']['load'](this));}get['preload'](){return this['_preload'];}set['loadFaces'](_0x5aec72){_0x5aec72=!!_0x5aec72,(!this['hasOwnProp'+'erty']('_loadFaces')||_0x5aec72!==this['_loadFaces'])&&(this['_loadFaces']=_0x5aec72,this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['loadFaces'](){return this['_loadFaces'];}['getFileUrl'](){const _0x27f1a9=this['file'];if(!_0x27f1a9||!_0x27f1a9['url'])return null;let _0x484fb7=_0x27f1a9['url'];if(this['registry']&&this['registry']['prefix']&&!Ln['test'](_0x484fb7)&&(_0x484fb7=this['registry']['prefix']+_0x484fb7),this['type']!=='script'&&_0x27f1a9['hash']){const _0x2b6f91=_0x484fb7['indexOf']('?')!==-(-0x427*-0x7+-0x9f6+0x146*-0xf)?'&':'?';_0x484fb7+=_0x2b6f91+'t='+_0x27f1a9['hash'];}return _0x484fb7;}['getAbsolut'+'eUrl'](_0x55c36b){if(_0x55c36b['startsWith']('blob:')||_0x55c36b['startsWith']('data:'))return _0x55c36b;const _0x21d79b=xe['getDirecto'+'ry'](this['file']['url']);return xe['join'](_0x21d79b,_0x55c36b);}['getLocaliz'+'edAssetId'](_0x4bbf40){return _0x4bbf40=Hy(_0x4bbf40,this['_i18n']),this['_i18n'][_0x4bbf40]||null;}['addLocaliz'+'edAssetId'](_0x177465,_0x2375b6){this['_i18n'][_0x177465]=_0x2375b6,this['fire']('add:locali'+'zed',_0x177465,_0x2375b6);}['removeLoca'+'lizedAsset'+'Id'](_0x21341c){const _0x5c8b63=this['_i18n'][_0x21341c];_0x5c8b63&&(delete this['_i18n'][_0x21341c],this['fire']('remove:loc'+'alized',_0x21341c,_0x5c8b63));}['ready'](_0x679eee,_0x324126){_0x324126=_0x324126||this,this['loaded']?_0x679eee['call'](_0x324126,this):this['once']('load',_0x14b774=>{_0x679eee['call'](_0x324126,_0x14b774);});}['reload'](){this['loaded']&&(this['loaded']=!(-0xc84+-0x16e6+0x236b),this['registry']['load'](this));}['unload'](){if(!this['loaded']&&this['_resources']['length']===0x1*0xf86+-0x22c1+0x133b)return;this['fire']('unload',this),this['registry']['fire']('unload:'+this['id'],this);const _0x1d26ab=this['_resources'];this['urlObject']&&(URL['revokeObje'+'ctURL'](this['urlObject']),this['urlObject']=null),this['resources']=[],this['loaded']=!(-0x1*-0x132f+0x1f4*0xc+-0x2a9e),this['file']&&this['registry']['_loader']['clearCache'](this['getFileUrl'](),this['type']);for(let _0x2392f1=0x147d*0x1+0x118b*0x1+-0x2*0x1304;_0x2392f1<_0x1d26ab['length'];++_0x2392f1){const _0x5e8e92=_0x1d26ab[_0x2392f1];_0x5e8e92&&_0x5e8e92['destroy']&&_0x5e8e92['destroy']();}}static['fetchArray'+'Buffer'](_0x149384,_0x26d9e8,_0x35b069,_0x3b25f0=-0x18*-0x143+-0x1a56+0x65*-0xa){var _0x570681;(_0x570681=_0x35b069==null?void(-0x1601*-0x1+0x2424+-0x3a25):_0x35b069['file'])!=null&&_0x570681['contents']?setTimeout(()=>{_0x26d9e8(null,_0x35b069['file']['contents']);}):nt['get'](_0x149384,{'cache':!(-0x5eb+0x21d*-0x1+0x202*0x4),'responseType':'arraybuffe'+'r','retry':_0x3b25f0>0x17*-0x179+0x22e7+-0x108,'maxRetries':_0x3b25f0},_0x26d9e8);}}h(me,'EVENT_LOAD','load'),h(me,'EVENT_UNLO'+'AD','unload'),h(me,'EVENT_REMO'+'VE','remove'),h(me,'EVENT_ERRO'+'R','error'),h(me,'EVENT_CHAN'+'GE','change'),h(me,'EVENT_PROG'+'RESS','progress'),h(me,'EVENT_ADDL'+'OCALIZED','add:locali'+'zed'),h(me,'EVENT_REMO'+'VELOCALIZE'+'D','remove:loc'+'alized');class jb{constructor(_0x67e843=null){h(this,'_index',{}),h(this,'_key'),this['_key']=_0x67e843;}['addItem'](_0x606c58){const _0x328cc4=_0x606c58['tags']['_list'];for(const _0x14d2d6 of _0x328cc4)this['add'](_0x14d2d6,_0x606c58);}['removeItem'](_0x8c2c3a){const _0x2dab4e=_0x8c2c3a['tags']['_list'];for(const _0x2970af of _0x2dab4e)this['remove'](_0x2970af,_0x8c2c3a);}['add'](_0x127a20,_0x2ecfa8){this['_index'][_0x127a20]&&this['_index'][_0x127a20]['list']['indexOf'](_0x2ecfa8)!==-(-0x8f1*-0x1+-0x25*0xa+-0x2*0x3bf)||(this['_index'][_0x127a20]||(this['_index'][_0x127a20]={'list':[]},this['_key']&&(this['_index'][_0x127a20]['keys']={})),this['_index'][_0x127a20]['list']['push'](_0x2ecfa8),this['_key']&&(this['_index'][_0x127a20]['keys'][_0x2ecfa8[this['_key']]]=_0x2ecfa8));}['remove'](_0x18d111,_0x2be45d){if(!this['_index'][_0x18d111]||this['_key']&&!this['_index'][_0x18d111]['keys'][_0x2be45d[this['_key']]])return;const _0x2359e3=this['_index'][_0x18d111]['list']['indexOf'](_0x2be45d);_0x2359e3!==-(-0x241b+0x3*0x57b+0x5f*0x35)&&(this['_index'][_0x18d111]['list']['splice'](_0x2359e3,-0x1d26+-0x8e7*-0x3+0x272),this['_key']&&delete this['_index'][_0x18d111]['keys'][_0x2be45d[this['_key']]],this['_index'][_0x18d111]['list']['length']===-0x47c+-0x7a1+-0xc1d*-0x1&&delete this['_index'][_0x18d111]);}['find'](_0x1af4f8){const _0x111e6e={},_0x21e749=[];let _0x1287af,_0x591074,_0x5196b8,_0x11b493,_0x5da1fb;const _0x4be81e=(_0x251ebc,_0x19860e)=>this['_index'][_0x251ebc]['list']['length']-this['_index'][_0x19860e]['list']['length'];for(let _0x28f47e=0x1*-0x1af3+0x33e*-0x2+0x216f;_0x28f47e<_0x1af4f8['length'];_0x28f47e++){if(_0x591074=_0x1af4f8[_0x28f47e],_0x591074 instanceof Array){if(_0x591074['length']===-0x422*-0x6+-0x2*-0xaad+0x1*-0x2e26)continue;if(_0x591074['length']===-0x774+-0x8f3+-0x7*-0x258)_0x591074=_0x591074[-0x39*-0x63+0xcb9*-0x3+-0x4*-0x408];else{_0x5da1fb=!(0x2a1*-0x1+-0xb*-0x2c1+-0x1ba9);for(let _0x2368aa=-0x75d+-0x1eb7+0x2614;_0x2368aa<_0x591074['length'];_0x2368aa++)if(!this['_index'][_0x591074[_0x2368aa]]){_0x5da1fb=!(0x118e+-0xdf*-0x11+0x205d*-0x1);break;}if(_0x5da1fb)continue;_0x5196b8=_0x591074['slice'](-0x130d*-0x1+0x2a*-0x3a+-0x989*0x1)['sort'](_0x4be81e),_0x11b493=_0x5196b8['slice'](-0x1*-0xbe1+0x23ce+0x1*-0x2fae),_0x11b493['length']===-0x264a+0x26ce+-0x1*0x83&&(_0x11b493=_0x11b493[0x3*0xa2e+-0x6*-0x4d2+0x1dbb*-0x2]);for(let _0x4b951f=0x1b2b+0x8d+-0x1bb8;_0x4b951f<this['_index'][_0x5196b8[0x6ed+-0x1*-0x18e8+-0x1fd5]]['list']['length'];_0x4b951f++)_0x1287af=this['_index'][_0x5196b8[0x617+0x10d4+-0x1*0x16eb]]['list'][_0x4b951f],(this['_key']?!_0x111e6e[_0x1287af[this['_key']]]:_0x21e749['indexOf'](_0x1287af)===-(0x8d*-0xa+-0x36c+0x1*0x8ef))&&_0x1287af['tags']['has'](_0x11b493)&&(this['_key']&&(_0x111e6e[_0x1287af[this['_key']]]=!(0x1*-0x3e6+-0x54+0x43a)),_0x21e749['push'](_0x1287af));continue;}}if(_0x591074&&typeof _0x591074=='string'&&this['_index'][_0x591074]){for(let _0x3e1f04=0x195f+0xfac+-0x290b;_0x3e1f04<this['_index'][_0x591074]['list']['length'];_0x3e1f04++)_0x1287af=this['_index'][_0x591074]['list'][_0x3e1f04],this['_key']?_0x111e6e[_0x1287af[this['_key']]]||(_0x111e6e[_0x1287af[this['_key']]]=!(-0x1127+-0x3*-0x770+-0x1*0x529),_0x21e749['push'](_0x1287af)):_0x21e749['indexOf'](_0x1287af)===-(-0x89d+-0x23a2+0x2c40)&&_0x21e749['push'](_0x1287af);}}return _0x21e749;}}class ao extends pe{constructor(_0x12f61a){super(),h(this,'_assets',new Set()),h(this,'_loader'),h(this,'_idToAsset',new Map()),h(this,'_urlToAsse'+'t',new Map()),h(this,'_nameToAss'+'et',new Map()),h(this,'_tags',new jb('id')),h(this,'prefix',null),h(this,'bundles',null),this['_loader']=_0x12f61a;}['list'](_0x371d94={}){const _0x5aaad3=Array['from'](this['_assets']);return _0x371d94['preload']!==void(-0x1be3+0x1127*0x2+-0x66b)?_0x5aaad3['filter'](_0x5f40e2=>_0x5f40e2['preload']===_0x371d94['preload']):_0x5aaad3;}['add'](_0x4236a5){var _0x5618b6,_0x408f79;this['_assets']['has'](_0x4236a5)||(this['_assets']['add'](_0x4236a5),this['_idToAsset']['set'](_0x4236a5['id'],_0x4236a5),(_0x5618b6=_0x4236a5['file'])!=null&&_0x5618b6['url']&&this['_urlToAsse'+'t']['set'](_0x4236a5['file']['url'],_0x4236a5),this['_nameToAss'+'et']['has'](_0x4236a5['name'])||this['_nameToAss'+'et']['set'](_0x4236a5['name'],new Set()),this['_nameToAss'+'et']['get'](_0x4236a5['name'])['add'](_0x4236a5),_0x4236a5['on']('name',this['_onNameCha'+'nge'],this),_0x4236a5['registry']=this,this['_tags']['addItem'](_0x4236a5),_0x4236a5['tags']['on']('add',this['_onTagAdd'],this),_0x4236a5['tags']['on']('remove',this['_onTagRemo'+'ve'],this),this['fire']('add',_0x4236a5),this['fire']('add:'+_0x4236a5['id'],_0x4236a5),(_0x408f79=_0x4236a5['file'])!=null&&_0x408f79['url']&&this['fire']('add:url:'+_0x4236a5['file']['url'],_0x4236a5),_0x4236a5['preload']&&this['load'](_0x4236a5));}['remove'](_0x34bca7){var _0x5a2018,_0xefb6eb;if(!this['_assets']['has'](_0x34bca7))return!(-0x1*-0x83+0x1d*0x75+-0xdc3);if(this['_assets']['delete'](_0x34bca7),this['_idToAsset']['delete'](_0x34bca7['id']),(_0x5a2018=_0x34bca7['file'])!=null&&_0x5a2018['url']&&this['_urlToAsse'+'t']['delete'](_0x34bca7['file']['url']),_0x34bca7['off']('name',this['_onNameCha'+'nge'],this),this['_nameToAss'+'et']['has'](_0x34bca7['name'])){const _0x5ea977=this['_nameToAss'+'et']['get'](_0x34bca7['name']);_0x5ea977['delete'](_0x34bca7),_0x5ea977['size']===0xa15+0xd6d*-0x2+0x3*0x597&&this['_nameToAss'+'et']['delete'](_0x34bca7['name']);}return this['_tags']['removeItem'](_0x34bca7),_0x34bca7['tags']['off']('add',this['_onTagAdd'],this),_0x34bca7['tags']['off']('remove',this['_onTagRemo'+'ve'],this),_0x34bca7['fire']('remove',_0x34bca7),this['fire']('remove',_0x34bca7),this['fire']('remove:'+_0x34bca7['id'],_0x34bca7),(_0xefb6eb=_0x34bca7['file'])!=null&&_0xefb6eb['url']&&this['fire']('remove:url'+':'+_0x34bca7['file']['url'],_0x34bca7),!(0xc33+-0xd52+-0x11f*-0x1);}['get'](_0x38dbd9){return this['_idToAsset']['get'](Number(_0x38dbd9));}['getByUrl'](_0x1da70d){return this['_urlToAsse'+'t']['get'](_0x1da70d);}['load'](_0x5aee87,_0x25fb6a){if((_0x5aee87['loading']||_0x5aee87['loaded'])&&!(_0x25fb6a!=null&&_0x25fb6a['force']))return;const _0x466dd5=_0x5aee87['file'],_0x2af2c5=()=>{this['fire']('load',_0x5aee87),this['fire']('load:'+_0x5aee87['id'],_0x5aee87),_0x466dd5&&_0x466dd5['url']&&this['fire']('load:url:'+_0x466dd5['url'],_0x5aee87),_0x5aee87['fire']('load',_0x5aee87);},_0x3cfacd=_0x310e4f=>{if(_0x310e4f instanceof Array?_0x5aee87['resources']=_0x310e4f:_0x5aee87['resource']=_0x310e4f,this['_loader']['patch'](_0x5aee87,this),_0x5aee87['type']==='bundle'){const _0x20fc9d=_0x5aee87['data']['assets'];for(let _0x5023d6=0xb4e+-0x1c63+0x1115;_0x5023d6<_0x20fc9d['length'];_0x5023d6++){const _0x1b29ec=this['_idToAsset']['get'](_0x20fc9d[_0x5023d6]);_0x1b29ec&&!_0x1b29ec['loaded']&&this['load'](_0x1b29ec,{'force':!(0x3*0x92d+-0x1651+-0x17*0x3a)});}_0x5aee87['resource']['loaded']?_0x2af2c5():(this['fire']('load:start',_0x5aee87),this['fire']('load:start'+':'+_0x5aee87['id'],_0x5aee87),_0x466dd5&&_0x466dd5['url']&&this['fire']('load:start'+':url:'+_0x466dd5['url'],_0x5aee87),_0x5aee87['fire']('load:start',_0x5aee87),_0x5aee87['resource']['on']('load',_0x2af2c5));}else _0x2af2c5();},_0x42595d=(_0x5225c7,_0x5ed3f5,_0x357e0b)=>{if(_0x5aee87['loaded']=!(-0x1762+-0x1a*0xcd+0x2c34),_0x5aee87['loading']=!(-0xf05*-0x1+0x2*0x939+0x1*-0x2176),_0x5225c7)this['fire']('error',_0x5225c7,_0x5aee87),this['fire']('error:'+_0x5aee87['id'],_0x5225c7,_0x5aee87),_0x5aee87['fire']('error',_0x5225c7,_0x5aee87);else{if(_0x5aee87['type']==='script'){const _0x2654d7=this['_loader']['getHandler']('script');_0x2654d7['_cache'][_0x5aee87['id']]&&_0x2654d7['_cache'][_0x5aee87['id']]['parentNode']===document['head']&&document['head']['removeChil'+'d'](_0x2654d7['_cache'][_0x5aee87['id']]),_0x2654d7['_cache'][_0x5aee87['id']]=_0x357e0b;}_0x3cfacd(_0x5ed3f5);}};if(_0x466dd5||_0x5aee87['type']==='cubemap'){this['fire']('load:start',_0x5aee87),this['fire']('load:'+_0x5aee87['id']+':start',_0x5aee87),_0x5aee87['loading']=!(-0x145b+-0x1147*-0x1+0x2*0x18a);const _0x2b375b=_0x5aee87['getFileUrl']();if(_0x5aee87['type']==='bundle'){const _0x39b406=_0x5aee87['data']['assets'];for(let _0x32097b=0x207d+0x42*0x89+-0x1*0x43cf;_0x32097b<_0x39b406['length'];_0x32097b++){const _0x56ee30=this['_idToAsset']['get'](_0x39b406[_0x32097b]);_0x56ee30&&(_0x56ee30['loaded']||_0x56ee30['resource']||_0x56ee30['loading']||(_0x56ee30['loading']=!(-0xf58+0x5*0x7d+0xce7)));}}this['_loader']['load'](_0x2b375b,_0x5aee87['type'],_0x42595d,_0x5aee87,_0x25fb6a);}else{const _0x321166=this['_loader']['open'](_0x5aee87['type'],_0x5aee87['data']);_0x5aee87['loaded']=!(0x2511+0x347*-0xb+0x82*-0x2),_0x3cfacd(_0x321166);}}['reloadInde'+'x'](_0x4170fb,_0x198881,_0x5bbb88){const _0x10882f=(_0x4e58a4,_0x4b0e32,_0x4071f3)=>{_0x198881['loaded']=!(0x2ee+-0xc*0x4e+-0x2*-0x5d),_0x198881['loading']=!(0x2*0xbd9+0x998+-0x1*0x2149);};return this['_loader']['load'](_0x4170fb,_0x198881['type'],_0x10882f,_0x198881,_0x5bbb88),_0x198881;}['loadFromUr'+'l'](_0x12da76,_0x1598fc,_0x4bd5bd){this['loadFromUr'+'lAndFilena'+'me'](_0x12da76,null,_0x1598fc,_0x4bd5bd);}['loadFromUr'+'lAndFilena'+'me'](_0x376c9b,_0xba3036,_0x346a6d,_0xb4240c){const _0x1edc7e=xe['getBasenam'+'e'](_0xba3036||_0x376c9b),_0x56fb69={'filename':_0xba3036||_0x1edc7e,'url':_0x376c9b};let _0x1f02a9=this['getByUrl'](_0x376c9b);if(!_0x1f02a9)_0x1f02a9=new me(_0x1edc7e,_0x346a6d,_0x56fb69),this['add'](_0x1f02a9);else{if(_0x1f02a9['loaded']){_0xb4240c(_0x1f02a9['loadFromUr'+'lError']||null,_0x1f02a9);return;}}const _0x4a97ad=_0x2f442c=>{_0x2f442c['once']('load',_0x387482=>{_0x346a6d==='material'?this['_loadTextu'+'res'](_0x387482,(_0x3ba457,_0x13ac64)=>{_0xb4240c(_0x3ba457,_0x387482);}):_0xb4240c(null,_0x387482);}),_0x2f442c['once']('error',_0x4ecba8=>{_0x4ecba8&&(this['loadFromUr'+'lError']=_0x4ecba8),_0xb4240c(_0x4ecba8,_0x2f442c);}),this['load'](_0x2f442c);};_0x1f02a9['resource']?_0xb4240c(null,_0x1f02a9):_0x346a6d==='model'?this['_loadModel'](_0x1f02a9,_0x4a97ad):_0x4a97ad(_0x1f02a9);}['_loadModel'](_0x2e1baf,_0x529fe3){const _0x553dc9=_0x2e1baf['getFileUrl'](),_0x41d0aa=xe['getExtensi'+'on'](_0x553dc9);if(_0x41d0aa==='.json'||_0x41d0aa==='.glb'){const _0x4cdbf0=xe['getDirecto'+'ry'](_0x553dc9),_0x500e0b=xe['getBasenam'+'e'](_0x553dc9),_0x45e2c4=xe['join'](_0x4cdbf0,_0x500e0b['replace'](_0x41d0aa,'.mapping.j'+'son'));this['_loader']['load'](_0x45e2c4,'json',(_0x4862f0,_0x2ab8e0)=>{_0x4862f0?(_0x2e1baf['data']={'mapping':[]},_0x529fe3(_0x2e1baf)):this['_loadMater'+'ials'](_0x2e1baf,_0x2ab8e0,(_0x1c1e34,_0x8bd379)=>{_0x2e1baf['data']=_0x2ab8e0,_0x529fe3(_0x2e1baf);});});}else _0x529fe3(_0x2e1baf);}['_loadMater'+'ials'](_0x567572,_0x4dad80,_0x4a3944){const _0x4593a0=[];let _0xf7a691=-0x10f8+0x14*0x148+-0x8a8;const _0x5e7948=(_0x2a1b02,_0x212056)=>{this['_loadTextu'+'res'](_0x212056,(_0x4ba235,_0x54b03b)=>{_0x4593a0['push'](_0x212056),_0x4593a0['length']===_0xf7a691&&_0x4a3944(null,_0x4593a0);});};for(let _0x2d92d7=0x7*0x59+0x106c+-0x12db;_0x2d92d7<_0x4dad80['mapping']['length'];_0x2d92d7++){const _0x20de87=_0x4dad80['mapping'][_0x2d92d7]['path'];if(_0x20de87){_0xf7a691++;const _0x46b379=_0x567572['getAbsolut'+'eUrl'](_0x20de87);this['loadFromUr'+'l'](_0x46b379,'material',_0x5e7948);}}_0xf7a691===0x99a*0x3+0x4a7+-0x2175&&_0x4a3944(null,_0x4593a0);}['_loadTextu'+'res'](_0x5052d7,_0x11f747){const _0x506ca0=[];let _0x597798=0x5*-0x77d+-0x2399+-0x2485*-0x2;const _0x269aad=_0x5052d7['data'];if(_0x269aad['mappingFor'+'mat']!=='path'){M['warn']('Skipping:\x20'+_0x5052d7['name']+(',\x20material'+'\x20files\x20mus'+'t\x20be\x20mappi'+'ngFormat:\x20'+'\x22path\x22\x20to\x20'+'be\x20loaded\x20'+'from\x20URL')),_0x11f747(null,_0x506ca0);return;}const _0x318750=(_0xb404fc,_0x4f63ef)=>{_0xb404fc&&console['error'](_0xb404fc),_0x506ca0['push'](_0x4f63ef),_0x506ca0['length']===_0x597798&&_0x11f747(null,_0x506ca0);},_0x471e0e=Qc;for(let _0x8efd99=-0x18d*-0x9+0xb2*-0x20+0x84b;_0x8efd99<_0x471e0e['length'];_0x8efd99++){const _0x2c9bc5=_0x269aad[_0x471e0e[_0x8efd99]];if(_0x2c9bc5&&typeof _0x2c9bc5=='string'){_0x597798++;const _0x584053=_0x5052d7['getAbsolut'+'eUrl'](_0x2c9bc5);this['loadFromUr'+'l'](_0x584053,'texture',_0x318750);}}_0x597798===-0x1e1*0x7+-0x7a+0x48b*0x3&&_0x11f747(null,_0x506ca0);}['_onTagAdd'](_0x24b681,_0x364882){this['_tags']['add'](_0x24b681,_0x364882);}['_onTagRemo'+'ve'](_0x1f3195,_0x3a719d){this['_tags']['remove'](_0x1f3195,_0x3a719d);}['_onNameCha'+'nge'](_0x5f3252,_0x59bfdf,_0x2f3a30){if(this['_nameToAss'+'et']['has'](_0x2f3a30)){const _0x421dfc=this['_nameToAss'+'et']['get'](_0x2f3a30);_0x421dfc['delete'](_0x5f3252),_0x421dfc['size']===-0x1b04+0x3*0xa1f+-0x359&&this['_nameToAss'+'et']['delete'](_0x2f3a30);}this['_nameToAss'+'et']['has'](_0x5f3252['name'])||this['_nameToAss'+'et']['set'](_0x5f3252['name'],new Set()),this['_nameToAss'+'et']['get'](_0x5f3252['name'])['add'](_0x5f3252);}['findByTag'](..._0x4c16d2){return this['_tags']['find'](_0x4c16d2);}['filter'](_0x1e16b8){return Array['from'](this['_assets'])['filter'](_0x591f22=>_0x1e16b8(_0x591f22));}['find'](_0x4ab2e4,_0x141916){const _0x38793b=this['_nameToAss'+'et']['get'](_0x4ab2e4);if(!_0x38793b)return null;for(const _0x1bef3e of _0x38793b)if(!_0x141916||_0x1bef3e['type']===_0x141916)return _0x1bef3e;return null;}['findAll'](_0x2a731a,_0x35feea){const _0x42098d=this['_nameToAss'+'et']['get'](_0x2a731a);if(!_0x42098d)return[];const _0x37fa20=Array['from'](_0x42098d);return _0x35feea?_0x37fa20['filter'](_0x1ce457=>_0x1ce457['type']===_0x35feea):_0x37fa20;}}h(ao,'EVENT_LOAD','load'),h(ao,'EVENT_ADD','add'),h(ao,'EVENT_REMO'+'VE','remove'),h(ao,'EVENT_ERRO'+'R','error');class Yb{constructor(_0x3fd45d){h(this,'_idToBundl'+'e',new Map()),h(this,'_assetToBu'+'ndles',new Map()),h(this,'_urlsToBun'+'dles',new Map()),h(this,'_fileReque'+'sts',new Map()),(this['_assets']=_0x3fd45d,this['_assets']['bundles']=this,this['_assets']['on']('add',this['_onAssetAd'+'d'],this),this['_assets']['on']('remove',this['_onAssetRe'+'move'],this));}['_onAssetAd'+'d'](_0x1bbb1a){if(_0x1bbb1a['type']==='bundle'){this['_idToBundl'+'e']['set'](_0x1bbb1a['id'],_0x1bbb1a),this['_assets']['on']('load:start'+':'+_0x1bbb1a['id'],this['_onBundleL'+'oadStart'],this),this['_assets']['on']('load:'+_0x1bbb1a['id'],this['_onBundleL'+'oad'],this),this['_assets']['on']('error:'+_0x1bbb1a['id'],this['_onBundleE'+'rror'],this);const _0x587362=_0x1bbb1a['data']['assets'];for(let _0x55b1e3=-0x1*-0x9bb+0x1bed+-0x28*0xf1;_0x55b1e3<_0x587362['length'];_0x55b1e3++)this['_indexAsse'+'tInBundle'](_0x587362[_0x55b1e3],_0x1bbb1a);}else this['_assetToBu'+'ndles']['has'](_0x1bbb1a['id'])&&this['_indexAsse'+'tFileUrls'](_0x1bbb1a);}['_unbindAss'+'etEvents'](_0x4d343f){this['_assets']['off']('load:start'+':'+_0x4d343f,this['_onBundleL'+'oadStart'],this),this['_assets']['off']('load:'+_0x4d343f,this['_onBundleL'+'oad'],this),this['_assets']['off']('error:'+_0x4d343f,this['_onBundleE'+'rror'],this);}['_indexAsse'+'tInBundle'](_0x5c77e1,_0x23979d){let _0x7c19e9=this['_assetToBu'+'ndles']['get'](_0x5c77e1);_0x7c19e9||(_0x7c19e9=new Set(),this['_assetToBu'+'ndles']['set'](_0x5c77e1,_0x7c19e9)),_0x7c19e9['add'](_0x23979d);const _0x356590=this['_assets']['get'](_0x5c77e1);_0x356590&&this['_indexAsse'+'tFileUrls'](_0x356590);}['_indexAsse'+'tFileUrls'](_0x23dc8c){const _0x482a9c=this['_getAssetF'+'ileUrls'](_0x23dc8c);if(_0x482a9c)for(let _0x196047=0x7c5+-0xe8a*0x1+-0x6c5*-0x1;_0x196047<_0x482a9c['length'];_0x196047++){const _0x34592c=this['_assetToBu'+'ndles']['get'](_0x23dc8c['id']);_0x34592c&&this['_urlsToBun'+'dles']['set'](_0x482a9c[_0x196047],_0x34592c);}}['_getAssetF'+'ileUrls'](_0x3d5d04){let _0x136e80=_0x3d5d04['getFileUrl']();if(!_0x136e80)return null;_0x136e80=_0x136e80['split']('?')[-0x5*-0x753+-0x1*-0x495+-0xc*0x36f];const _0x360b98=[_0x136e80];if(_0x3d5d04['type']==='font'){const _0x193ffa=_0x3d5d04['data']['info']['maps']['length'];for(let _0x145787=-0x293+-0x407*-0x8+-0x1da4;_0x145787<_0x193ffa;_0x145787++)_0x360b98['push'](_0x136e80['replace']('.png',_0x145787+'.png'));}return _0x360b98;}['_onAssetRe'+'move'](_0x37a6ff){if(_0x37a6ff['type']==='bundle'){this['_idToBundl'+'e']['delete'](_0x37a6ff['id']),this['_unbindAss'+'etEvents'](_0x37a6ff['id']);const _0x4214c3=_0x37a6ff['data']['assets'];for(let _0x5b6e8e=-0x53b*-0x1+-0x23a6+-0x1e6b*-0x1;_0x5b6e8e<_0x4214c3['length'];_0x5b6e8e++){const _0x232bfb=this['_assetToBu'+'ndles']['get'](_0x4214c3[_0x5b6e8e]);if(_0x232bfb&&(_0x232bfb['delete'](_0x37a6ff),_0x232bfb['size']===0x269*0x4+0x35b*0xb+-0x2bd*0x11)){this['_assetToBu'+'ndles']['delete'](_0x4214c3[_0x5b6e8e]);for(const [_0x42ddc9,_0x44f1eb]of this['_urlsToBun'+'dles'])_0x44f1eb===_0x232bfb&&this['_urlsToBun'+'dles']['delete'](_0x42ddc9);}}this['_onBundleE'+'rror']('Bundle\x20'+_0x37a6ff['id']+('\x20was\x20remov'+'ed'));}else{if(!this['_assetToBu'+'ndles']['get'](_0x37a6ff['id']))return;this['_assetToBu'+'ndles']['delete'](_0x37a6ff['id']);const _0x442670=this['_getAssetF'+'ileUrls'](_0x37a6ff);if(!_0x442670)return;for(let _0x4b0272=-0x1371*-0x2+0x10d*-0x25+-0x1;_0x4b0272<_0x442670['length'];_0x4b0272++)this['_urlsToBun'+'dles']['delete'](_0x442670[_0x4b0272]);}}['_onBundleL'+'oadStart'](_0x19155d){_0x19155d['resource']['on']('add',(_0x30429e,_0x5de220)=>{const _0x240de0=this['_fileReque'+'sts']['get'](_0x30429e);if(_0x240de0){for(let _0x59def5=-0xfc2+0x1*-0x2336+0x38*0xe9;_0x59def5<_0x240de0['length'];_0x59def5++)_0x240de0[_0x59def5](null,_0x5de220);this['_fileReque'+'sts']['delete'](_0x30429e);}});}['_onBundleL'+'oad'](_0x4c3693){if(!_0x4c3693['resource']){this['_onBundleE'+'rror']('Bundle\x20'+_0x4c3693['id']+('\x20failed\x20to'+'\x20load'));return;}if(this['_fileReque'+'sts'])for(const [_0x256e9a,_0x4ae22b]of this['_fileReque'+'sts']){const _0x75b68d=this['_urlsToBun'+'dles']['get'](_0x256e9a);if(!_0x75b68d||!_0x75b68d['has'](_0x4c3693))continue;const _0x404615=decodeURIComponent(_0x256e9a);let _0x44dafa,_0x4b6afa;if(_0x4c3693['resource']['has'](_0x404615))_0x4b6afa=_0x4c3693['resource']['get'](_0x404615);else{if(_0x4c3693['resource']['loaded'])_0x44dafa='Bundle\x20'+_0x4c3693['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x256e9a;else continue;}for(let _0x57980a=0x3*-0x61a+-0x1890+0x2ade;_0x57980a<_0x4ae22b['length'];_0x57980a++)_0x4ae22b[_0x57980a](_0x44dafa,_0x44dafa||_0x4b6afa);this['_fileReque'+'sts']['delete'](_0x256e9a);}}['_onBundleE'+'rror'](_0x5b3d6d){for(const [_0x54d066,_0x3a4c6d]of this['_fileReque'+'sts'])if(!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x54d066)){for(let _0x2ea3f2=-0x1a1b+0x1940+-0x3*-0x49;_0x2ea3f2<_0x3a4c6d['length'];_0x2ea3f2++)_0x3a4c6d[_0x2ea3f2](_0x5b3d6d);this['_fileReque'+'sts']['delete'](_0x54d066);}}['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x33355e){const _0x3db9f6=this['_urlsToBun'+'dles']['get'](_0x33355e);if(!_0x3db9f6)return null;let _0x26e43e=null;for(const _0xb323e3 of _0x3db9f6){if(_0xb323e3['loaded']&&_0xb323e3['resource'])return _0xb323e3;_0xb323e3['loading']&&(_0x26e43e=_0xb323e3);}return _0x26e43e;}['listBundle'+'sForAsset'](_0x98e5d2){const _0x3ed60b=this['_assetToBu'+'ndles']['get'](_0x98e5d2['id']);return _0x3ed60b?Array['from'](_0x3ed60b):null;}['list'](){return Array['from'](this['_idToBundl'+'e']['values']());}['hasUrl'](_0x17e87d){return this['_urlsToBun'+'dles']['has'](_0x17e87d);}['urlIsLoade'+'dOrLoading'](_0x1127f1){return!!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x1127f1);}['loadUrl'](_0x4f4d5f,_0x185275){const _0xd2b39=this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x4f4d5f);if(!_0xd2b39){_0x185275('URL\x20'+_0x4f4d5f+('\x20not\x20found'+'\x20in\x20any\x20bu'+'ndles'));return;}if(_0xd2b39['loaded']){const _0x39ff9f=decodeURIComponent(_0x4f4d5f);if(_0xd2b39['resource']['has'](_0x39ff9f)){_0x185275(null,_0xd2b39['resource']['get'](_0x39ff9f));return;}else{if(_0xd2b39['resource']['loaded']){_0x185275('Bundle\x20'+_0xd2b39['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x4f4d5f);return;}}}let _0x48d660=this['_fileReque'+'sts']['get'](_0x4f4d5f);_0x48d660||(_0x48d660=[],this['_fileReque'+'sts']['set'](_0x4f4d5f,_0x48d660)),_0x48d660['push'](_0x185275);}['destroy'](){this['_assets']['off']('add',this['_onAssetAd'+'d'],this),this['_assets']['off']('remove',this['_onAssetRe'+'move'],this);for(const _0x11ccda of this['_idToBundl'+'e']['keys']())this['_unbindAss'+'etEvents'](_0x11ccda);this['_assets']=null,this['_idToBundl'+'e']['clear'](),this['_idToBundl'+'e']=null,this['_assetToBu'+'ndles']['clear'](),this['_assetToBu'+'ndles']=null,this['_urlsToBun'+'dles']['clear'](),this['_urlsToBun'+'dles']=null,this['_fileReque'+'sts']['clear'](),this['_fileReque'+'sts']=null;}}class Kb extends pe{constructor(){super(),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'joint'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'zone'),this['list']=[];}['add'](_0x5337cb){const _0x41eb08=_0x5337cb['id'];if(this[_0x41eb08])throw new Error('ComponentS'+'ystem\x20name'+'\x20\x27'+_0x41eb08+('\x27\x20already\x20'+'registered'+'\x20or\x20not\x20al'+'lowed'));this[_0x41eb08]=_0x5337cb,this['list']['push'](_0x5337cb);}['remove'](_0x35b4e0){const _0x9c9027=_0x35b4e0['id'];if(!this[_0x9c9027])throw new Error('No\x20Compone'+'ntSystem\x20n'+'amed\x20\x27'+_0x9c9027+('\x27\x20register'+'ed'));delete this[_0x9c9027];const _0x37fb5f=this['list']['indexOf'](this[_0x9c9027]);_0x37fb5f!==-(0xc2c+0x2c2*0x1+-0xeed)&&this['list']['splice'](_0x37fb5f,0x213f+-0x4*-0x602+-0x3946);}['destroy'](){this['off']();for(let _0x6df817=-0x2*-0xb5+-0x205*-0x13+-0x27c9;_0x6df817<this['list']['length'];_0x6df817++)this['list'][_0x6df817]['destroy']();}}class kf extends pe{constructor(){super(...arguments),h(this,'_index',new Map()),h(this,'_loaded',!(-0x1759+0x296+0x1*0x14c4));}['addFile'](_0x220387,_0x366045){this['_index']['has'](_0x220387)||(this['_index']['set'](_0x220387,_0x366045),this['fire']('add',_0x220387,_0x366045));}['has'](_0x5405e6){return this['_index']['has'](_0x5405e6);}['get'](_0x3ab237){return this['_index']['get'](_0x3ab237)||null;}['destroy'](){this['_index']['clear']();}set['loaded'](_0x19b27d){!_0x19b27d||this['_loaded']||(this['_loaded']=!(-0x1152+-0x23ef+0x3541),this['fire']('load'));}get['loaded'](){return this['_loaded'];}}h(kf,'EVENT_ADD','add'),h(kf,'EVENT_LOAD','load');class Zb extends pe{constructor(_0x5a6d65,_0x5da45a=''){super(),h(this,'headerSize',0x9*-0x425+0x24d3+-0x1*-0x27a),h(this,'paddingSiz'+'e',-0x85+0x16b*0x3+-0x1bc),h(this,'bytesRead',0x3*0x71d+0x1410+-0x2967),h(this,'bytesRecei'+'ved',0x5*0x48a+0x6*0x343+-0x2a44),h(this,'headerRead',!(0x1fb7+-0xc9*0x1f+-0x75f)),h(this,'reader',null),h(this,'data',new Uint8Array(0x5f+0x2*0x1051+-0x2101)),h(this,'decoder',null),h(this,'prefix',''),h(this,'fileName',''),h(this,'fileSize',-0xa91*-0x1+-0xc71+0x1e0),h(this,'fileType',''),h(this,'ustarForma'+'t',''),(this['prefix']=_0x5da45a||'',this['reader']=_0x5a6d65['body']['getReader'](),this['reader']['read']()['then'](_0x9c2d7d=>{this['pump'](_0x9c2d7d['done'],_0x9c2d7d['value']);})['catch'](_0x18f4ad=>{this['fire']('error',_0x18f4ad);}));}['pump'](_0x12853f,_0x5a0b9b){if(_0x12853f)return this['fire']('done'),null;this['bytesRecei'+'ved']+=_0x5a0b9b['byteLength'];const _0x58bd6d=new Uint8Array(this['data']['length']+_0x5a0b9b['length']);for(_0x58bd6d['set'](this['data']),_0x58bd6d['set'](_0x5a0b9b,this['data']['length']),this['data']=_0x58bd6d;this['readFile'](););return this['reader']['read']()['then'](_0x326ea3=>{this['pump'](_0x326ea3['done'],_0x326ea3['value']);})['catch'](_0x1a09e5=>{this['fire']('error',_0x1a09e5);});}['readFile'](){if(!this['headerRead']&&this['bytesRecei'+'ved']>this['bytesRead']+this['headerSize']){this['headerRead']=!(0x2*-0x61b+-0x1e7b+0x1*0x2ab1);const _0x49ca53=new DataView(this['data']['buffer'],this['bytesRead'],this['headerSize']);this['decoder']??(this['decoder']=new TextDecoder('windows-12'+'52'));const _0x48e0ef=this['decoder']['decode'](_0x49ca53);if(this['fileName']=_0x48e0ef['substring'](0x1*0x15fa+-0x18e0+0x2e6,-0x1*0x1069+0xf19+0x4*0x6d)['replace'](/\0/g,''),this['fileSize']=parseInt(_0x48e0ef['substring'](-0x19ad*0x1+0x17d0+0x1*0x259,-0x99b*-0x1+-0x151*-0x7+-0x124a),0x3a*0xa3+0x7*0x325+0x1c9*-0x21),this['fileType']=_0x48e0ef['substring'](0x9ce+0x3*-0xbc+-0x37f*0x2,-0x21a4+-0x46*0xd+-0x25cf*-0x1),this['ustarForma'+'t']=_0x48e0ef['substring'](0x1*-0xe3c+0x125+0xe18,0xc*0x235+-0x1294+-0x6e1),this['ustarForma'+'t']['indexOf']('ustar')!==-(0xa*0x17e+-0x20f1*-0x1+0xbf7*-0x4)){const _0x161a5b=_0x48e0ef['substring'](-0x1099*-0x1+0xa8a*0x3+0xe*-0x359,0x453*-0x9+0x121+0x27be)['replace'](/\0/g,'');_0x161a5b['length']>-0x2580+0xe13+0x176d&&(this['fileName']=_0x161a5b['trim']()+this['fileName']['trim']());}this['bytesRead']+=0x1*0x1a5f+0x377*-0x6+0x395*-0x1;}if(this['headerRead']){if(this['bytesRecei'+'ved']<this['bytesRead']+this['fileSize'])return!(0x50d+0x1b25+-0x2031);if(this['fileType']===''||this['fileType']==='0'){const _0x4580b6=new DataView(this['data']['buffer'],this['bytesRead'],this['fileSize']),_0x53dcc7={'name':this['prefix']+this['fileName'],'size':this['fileSize'],'data':_0x4580b6};this['fire']('file',_0x53dcc7);}this['bytesRead']+=this['fileSize'],this['headerRead']=!(0x1*0x47f+0x1372+-0x17f0);const _0x79ad91=this['bytesRead']%this['paddingSiz'+'e'];return _0x79ad91!==-0x407+0x8f8*-0x4+-0x2d*-0xe3&&(this['bytesRead']+=this['paddingSiz'+'e']-_0x79ad91),!(-0x157d+0x67*0x55+-0xcb6);}return!(-0x4*0x84a+0x1ba*0x1+0x1f6f);}}class Ze{constructor(_0x2d4b33,_0x3efba8){h(this,'handlerTyp'+'e',''),h(this,'_app'),h(this,'_maxRetrie'+'s',0x15e1*0x1+0x5*-0x24b+-0xa6a),(this['_app']=_0x2d4b33,this['handlerTyp'+'e']=_0x3efba8);}set['maxRetries'](_0xc82f33){this['_maxRetrie'+'s']=_0xc82f33;}get['maxRetries'](){return this['_maxRetrie'+'s'];}['load'](_0x55c39a,_0x2b3762,_0x139113){}['open'](_0x590979,_0x2ee4c0,_0x3120be){return _0x2ee4c0;}['patch'](_0x2bb99f,_0x16636c){}}class Qb extends Ze{constructor(_0x552abd){super(_0x552abd,'bundle'),this['_assets']=_0x552abd['assets'];}['_fetchRetr'+'ies'](_0x2a6003,_0x3c9621,_0x51369e=0xd*-0x2dd+0x54c*-0x1+0x2a85){return new Promise((_0x302c23,_0x5451b5)=>{const _0xc99198=()=>{fetch(_0x2a6003,_0x3c9621)['then'](_0x302c23)['catch'](_0x110f94=>{_0x51369e++,_0x51369e<this['maxRetries']?(M['error']('Bundle\x20fai'+'led\x20to\x20loa'+'d\x20retrying'+'\x20(attempt\x20'+_0x51369e),_0xc99198()):_0x5451b5(_0x110f94);});};_0xc99198();});}['load'](_0x51f452,_0x1ff50d){typeof _0x51f452=='string'&&(_0x51f452={'load':_0x51f452,'original':_0x51f452}),this['_fetchRetr'+'ies'](_0x51f452['load'],{'mode':'cors'},this['maxRetries'])['then'](_0x247ebc=>{const _0x56935f=new kf();_0x1ff50d(null,_0x56935f);const _0x5989ae=new Zb(_0x247ebc,this['_assets']['prefix']);_0x5989ae['on']('file',_0x5c296a=>{_0x56935f['addFile'](_0x5c296a['name'],_0x5c296a['data']);}),_0x5989ae['on']('done',()=>{_0x56935f['loaded']=!(-0x15db+-0x178+-0x7*-0x355);}),_0x5989ae['on']('error',_0x4c3c23=>{M['error'](_0x4c3c23),_0x1ff50d(_0x4c3c23);});})['catch'](_0x159170=>{M['error'](_0x159170),_0x1ff50d(_0x159170);});}['open'](_0x59a888,_0x514156){return _0x514156;}}class fn{constructor(_0x502303){this['_handlers']={},this['_requests']={},this['_cache']={},this['_app']=_0x502303;}['addHandler'](_0x486104,_0xd94bf6){this['_handlers'][_0x486104]=_0xd94bf6,_0xd94bf6['_loader']=this;}['removeHand'+'ler'](_0x567cda){delete this['_handlers'][_0x567cda];}['getHandler'](_0x16c2b2){return this['_handlers'][_0x16c2b2];}static['makeKey'](_0x3b53a2,_0x38ce18){return _0x3b53a2+'-'+_0x38ce18;}['load'](_0x49865a,_0x199939,_0x1ec701,_0x3d1233,_0x52a102){var _0x56e142;const _0x33c129=this['_handlers'][_0x199939];if(!_0x33c129){const _0x3e88c9='No\x20resourc'+'e\x20handler\x20'+'for\x20asset\x20'+'type:\x20\x27'+_0x199939+('\x27\x20when\x20loa'+'ding\x20[')+_0x49865a+']';M['errorOnce'](_0x3e88c9),_0x1ec701(_0x3e88c9);return;}if(!_0x49865a){this['_loadNull'](_0x33c129,_0x1ec701,_0x3d1233);return;}const _0x1c960a=fn['makeKey'](_0x49865a,_0x199939);if(this['_requests'][_0x1c960a])this['_requests'][_0x1c960a]['push'](_0x1ec701);else{this['_requests'][_0x1c960a]=[_0x1ec701];const _0x533fb6=this,_0x3c0a14=function(_0x114295,_0xb23b25){if(_0x114295){_0x533fb6['_onFailure'](_0x1c960a,_0x114295);return;}if(_0xb23b25['load']instanceof DataView){if(_0x33c129['openBinary']){if(!_0x533fb6['_requests'][_0x1c960a])return;try{const _0x3f3a1a=_0x33c129['openBinary'](_0xb23b25['load']);_0x533fb6['_onSuccess'](_0x1c960a,_0x3f3a1a);}catch(_0x4351e8){_0x533fb6['_onFailure'](_0x1c960a,_0x4351e8);}return;}_0xb23b25['load']=URL['createObje'+'ctURL'](new Blob([_0xb23b25['load']])),_0x3d1233&&(_0x3d1233['urlObject']&&URL['revokeObje'+'ctURL'](_0x3d1233['urlObject']),_0x3d1233['urlObject']=_0xb23b25['load']);}_0x33c129['load'](_0xb23b25,(_0x40387c,_0xda2cdf,_0x3c0d48)=>{if(_0x533fb6['_requests'][_0x1c960a]){if(_0x40387c){_0x533fb6['_onFailure'](_0x1c960a,_0x40387c);return;}try{_0x533fb6['_onSuccess'](_0x1c960a,_0x33c129['open'](_0xb23b25['original'],_0xda2cdf,_0x3d1233),_0x3c0d48);}catch(_0x107b39){_0x533fb6['_onFailure'](_0x1c960a,_0x107b39);}}},_0x3d1233);},_0x4122ef=_0x49865a['split']('?')[0x1*-0xa29+0x140d*0x1+0xc*-0xd3];if(this['_app']['enableBund'+'les']&&this['_app']['bundles']['hasUrl'](_0x4122ef)&&!(_0x52a102&&_0x52a102['bundlesIgn'+'ore'])){if(!this['_app']['bundles']['urlIsLoade'+'dOrLoading'](_0x4122ef)){const _0x1591b8=this['_app']['bundles']['listBundle'+'sForAsset'](_0x3d1233);let _0x105701;_0x52a102&&_0x52a102['bundlesFil'+'ter']&&(_0x105701=_0x52a102['bundlesFil'+'ter'](_0x1591b8)),_0x105701||(_0x1591b8==null||_0x1591b8['sort']((_0x1279d7,_0x230e7e)=>_0x1279d7['file']['size']-_0x230e7e['file']['size']),_0x105701=_0x1591b8==null?void(-0x566+-0x861+0x1*0xdc7):_0x1591b8[-0x7fd+0x79a+0x1*0x63]),_0x105701&&((_0x56e142=this['_app']['assets'])==null||_0x56e142['load'](_0x105701));}this['_app']['bundles']['loadUrl'](_0x4122ef,(_0x4a8568,_0x22f05d)=>{_0x3c0a14(_0x4a8568,{'load':_0x22f05d,'original':_0x4122ef});});}else _0x3c0a14(null,{'load':_0x49865a,'original':_0x3d1233&&_0x3d1233['file']['filename']||_0x49865a});}}['_loadNull'](_0x3843d2,_0x491c4d,_0x45ae24){const _0x238bae=function(_0x56f94c,_0x4de795,_0x5805b6){if(_0x56f94c)_0x491c4d(_0x56f94c);else try{_0x491c4d(null,_0x3843d2['open'](null,_0x4de795,_0x45ae24),_0x5805b6);}catch(_0x393873){_0x491c4d(_0x393873);}};_0x3843d2['load'](null,_0x238bae,_0x45ae24);}['_onSuccess'](_0x353355,_0x13e33c,_0x5bcf8f){for(let _0x4aac59=-0xef2*-0x2+-0x2334*0x1+0x2a8*0x2;_0x4aac59<this['_requests'][_0x353355]['length'];_0x4aac59++)this['_requests'][_0x353355][_0x4aac59](null,_0x13e33c,_0x5bcf8f);delete this['_requests'][_0x353355];}['_onFailure'](_0x3564fe,_0xfe7eae){if(console['error'](_0xfe7eae),this['_requests'][_0x3564fe]){for(let _0x2a0c69=-0x128b+-0x9f9*0x1+0x1c84;_0x2a0c69<this['_requests'][_0x3564fe]['length'];_0x2a0c69++)this['_requests'][_0x3564fe][_0x2a0c69](_0xfe7eae);delete this['_requests'][_0x3564fe];}}['open'](_0x419592,_0x5a5665){const _0x827bf7=this['_handlers'][_0x419592];return _0x827bf7?_0x827bf7['open'](null,_0x5a5665):(console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x419592),_0x5a5665);}['patch'](_0x46a719,_0x2a1d32){const _0x22043f=this['_handlers'][_0x46a719['type']];if(!_0x22043f){console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x46a719['type']);return;}_0x22043f['patch']&&_0x22043f['patch'](_0x46a719,_0x2a1d32);}['clearCache'](_0x55c54f,_0x4bcd0d){const _0x21959a=fn['makeKey'](_0x55c54f,_0x4bcd0d);delete this['_cache'][_0x21959a];}['getFromCac'+'he'](_0x3c77c9,_0x4b5e6d){const _0x43333c=fn['makeKey'](_0x3c77c9,_0x4b5e6d);if(this['_cache'][_0x43333c])return this['_cache'][_0x43333c];}['enableRetr'+'y'](_0x437180=0x1b79+0x21c7*-0x1+0x1*0x653){_0x437180=Math['max'](0x313+-0x3*0x792+0x13a3,_0x437180)||-0x1*0x26e1+0x2*0xed+-0x2507*-0x1;for(const _0x45f179 in this['_handlers'])this['_handlers'][_0x45f179]['maxRetries']=_0x437180;}['disableRet'+'ry'](){for(const _0xf1024c in this['_handlers'])this['_handlers'][_0xf1024c]['maxRetries']=0x1*0x2138+0xd*-0x4c+-0x1d5c;}['destroyReq'+'uests'](){this['_requests']={};}['destroy'](){this['_handlers']={},this['_requests']={},this['_cache']={};}}class Jb{['_validate'](_0x3aa690){if(!_0x3aa690['header'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er\x22\x20field');if(!_0x3aa690['header']['version'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er.version'+'\x22\x20field');if(_0x3aa690['header']['version']!==0x26ae+0x5a9+-0x2c56)throw new Error('pc.I18n#ad'+'dData:\x20Inv'+'alid\x20\x22head'+'er.version'+'\x22\x20field');if(_0x3aa690['data']){if(!Array['isArray'](_0x3aa690['data']))throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta\x22\x20field\x20'+'must\x20be\x20an'+'\x20array');}else throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22data'+'\x22\x20field');for(let _0x5c7e81=-0x2650+-0x2*-0x130c+-0x7*-0x8,_0x3134cd=_0x3aa690['data']['length'];_0x5c7e81<_0x3134cd;_0x5c7e81++){const _0x97c3fe=_0x3aa690['data'][_0x5c7e81];if(!_0x97c3fe['info'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x5c7e81+('].info\x22\x20fi'+'eld'));if(!_0x97c3fe['info']['locale'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x5c7e81+('].info.loc'+'ale\x22\x20field'));if(typeof _0x97c3fe['info']['locale']!='string')throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta['+_0x5c7e81+('].info.loc'+'ale\x22\x20must\x20'+'be\x20a\x20strin'+'g'));if(!_0x97c3fe['messages'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x5c7e81+('].messages'+'\x22\x20field'));}}['parse'](_0x46ef9d){return this['_validate'](_0x46ef9d),_0x46ef9d['data'];}}const uc=class uc extends pe{constructor(_0x4f95f5){super(),this['locale']=Qh,this['_translati'+'ons']={},this['_available'+'Langs']={},this['_app']=_0x4f95f5,this['_assets']=[],this['_parser']=new Jb();}set['assets'](_0x54bd31){const _0x3716b6={};for(let _0x144948=0x19*0x2b+-0x496+0x3*0x21,_0x55c57c=_0x54bd31['length'];_0x144948<_0x55c57c;_0x144948++){const _0x5d7289=_0x54bd31[_0x144948]instanceof me?_0x54bd31[_0x144948]['id']:_0x54bd31[_0x144948];_0x3716b6[_0x5d7289]=!(0x13b+-0x7*0x1d5+0x8*0x173);}let _0xa30665=this['_assets']['length'];for(;_0xa30665--;){const _0x3d1ea7=this['_assets'][_0xa30665];if(!_0x3716b6[_0x3d1ea7]){this['_app']['assets']['off']('add:'+_0x3d1ea7,this['_onAssetAd'+'d'],this);const _0x2b6541=this['_app']['assets']['get'](_0x3d1ea7);_0x2b6541&&this['_onAssetRe'+'move'](_0x2b6541),this['_assets']['splice'](_0xa30665,0x7fd*0x2+-0x58e+-0xa6b);}}for(const _0x3d5ca9 in _0x3716b6){const _0x8839f0=parseInt(_0x3d5ca9,-0x5c6+0x431*-0x5+-0x26f*-0xb);if(this['_assets']['indexOf'](_0x8839f0)!==-(0x3e5*0x6+0x16*0x10b+-0x943*0x5))continue;this['_assets']['push'](_0x8839f0);const _0x10a395=this['_app']['assets']['get'](_0x8839f0);_0x10a395?this['_onAssetAd'+'d'](_0x10a395):this['_app']['assets']['once']('add:'+_0x8839f0,this['_onAssetAd'+'d'],this);}}get['assets'](){return this['_assets'];}set['locale'](_0x370790){if(this['_locale']===_0x370790)return;let _0x35b085=bi(_0x370790);if(_0x35b085==='in'&&(_0x35b085='id',_0x370790=Hb(_0x370790,_0x35b085),this['_locale']===_0x370790))return;const _0x648b30=this['_locale'];this['_locale']=_0x370790,this['_lang']=_0x35b085,this['_pluralFn']=$d(this['_lang']),this['fire'](uc['EVENT_CHAN'+'GE'],_0x370790,_0x648b30);}get['locale'](){return this['_locale'];}static['findAvaila'+'bleLocale'](_0x5950ca,_0x65e6d9){return Hy(_0x5950ca,_0x65e6d9);}['findAvaila'+'bleLocale'](_0x369f28){if(this['_translati'+'ons'][_0x369f28])return _0x369f28;const _0x3546bb=bi(_0x369f28);return this['_findFallb'+'ackLocale'](_0x369f28,_0x3546bb);}['getText'](_0x547b8a,_0x5961da){let _0x4a0ebf=_0x547b8a,_0x397028;_0x5961da||(_0x5961da=this['_locale'],_0x397028=this['_lang']);let _0x2a9e2e=this['_translati'+'ons'][_0x5961da];return _0x2a9e2e||(_0x397028||(_0x397028=bi(_0x5961da)),_0x5961da=this['_findFallb'+'ackLocale'](_0x5961da,_0x397028),_0x2a9e2e=this['_translati'+'ons'][_0x5961da]),_0x2a9e2e&&_0x2a9e2e['hasOwnProp'+'erty'](_0x547b8a)&&(_0x4a0ebf=_0x2a9e2e[_0x547b8a],Array['isArray'](_0x4a0ebf)&&(_0x4a0ebf=_0x4a0ebf[0x1f15+-0x88a*0x2+-0xe01]),_0x4a0ebf==null&&(_0x4a0ebf=_0x547b8a)),_0x4a0ebf;}['getPluralT'+'ext'](_0x5dc566,_0x2cee30,_0x34dfc9){let _0x46dc7d=_0x5dc566,_0x1860d2,_0x3e5841;_0x34dfc9?(_0x1860d2=bi(_0x34dfc9),_0x3e5841=$d(_0x1860d2)):(_0x34dfc9=this['_locale'],_0x1860d2=this['_lang'],_0x3e5841=this['_pluralFn']);let _0x58c983=this['_translati'+'ons'][_0x34dfc9];if(_0x58c983||(_0x34dfc9=this['_findFallb'+'ackLocale'](_0x34dfc9,_0x1860d2),_0x1860d2=bi(_0x34dfc9),_0x3e5841=$d(_0x1860d2),_0x58c983=this['_translati'+'ons'][_0x34dfc9]),_0x58c983&&_0x58c983[_0x5dc566]&&_0x3e5841){const _0x3777d7=_0x3e5841(_0x2cee30);_0x46dc7d=_0x58c983[_0x5dc566][_0x3777d7],_0x46dc7d==null&&(_0x46dc7d=_0x5dc566);}return _0x46dc7d;}['addData'](_0x1f83a3){let _0xb43cb3;try{_0xb43cb3=this['_parser']['parse'](_0x1f83a3);}catch(_0x1a8abb){console['error'](_0x1a8abb);return;}for(let _0x279e46=-0xfca+0x219*-0x6+-0x718*-0x4,_0x1b211a=_0xb43cb3['length'];_0x279e46<_0x1b211a;_0x279e46++){const _0x4ad19f=_0xb43cb3[_0x279e46],_0x11394b=_0x4ad19f['info']['locale'],_0x15dc3d=_0x4ad19f['messages'];if(!this['_translati'+'ons'][_0x11394b]){this['_translati'+'ons'][_0x11394b]={};const _0x59588c=bi(_0x11394b);this['_available'+'Langs'][_0x59588c]||(this['_available'+'Langs'][_0x59588c]=_0x11394b);}Object['assign'](this['_translati'+'ons'][_0x11394b],_0x15dc3d),this['fire']('data:add',_0x11394b,_0x15dc3d);}}['removeData'](_0x598b66){let _0x35ec79;try{_0x35ec79=this['_parser']['parse'](_0x598b66);}catch(_0x366a7b){console['error'](_0x366a7b);return;}for(let _0x1d854c=-0x44b+0x2540+-0x20f5,_0x29ec0d=_0x35ec79['length'];_0x1d854c<_0x29ec0d;_0x1d854c++){const _0x5ea714=_0x35ec79[_0x1d854c],_0x163036=_0x5ea714['info']['locale'],_0x65409a=this['_translati'+'ons'][_0x163036];if(!_0x65409a)continue;const _0x447866=_0x5ea714['messages'];for(const _0x18dd6b in _0x447866)delete _0x65409a[_0x18dd6b];Object['keys'](_0x65409a)['length']===-0x1e0b+0x1f87+-0x17c&&(delete this['_translati'+'ons'][_0x163036],delete this['_available'+'Langs'][bi(_0x163036)]),this['fire']('data:remov'+'e',_0x163036,_0x447866);}}['destroy'](){this['_translati'+'ons']=null,this['_available'+'Langs']=null,this['_assets']=null,this['_parser']=null,this['off']();}['_findFallb'+'ackLocale'](_0x3fa7f1,_0x334a8a){let _0x551463=Jh[_0x3fa7f1];return _0x551463&&this['_translati'+'ons'][_0x551463]||(_0x551463=Jh[_0x334a8a],_0x551463&&this['_translati'+'ons'][_0x551463])||(_0x551463=this['_available'+'Langs'][_0x334a8a],_0x551463&&this['_translati'+'ons'][_0x551463])?_0x551463:Qh;}['_onAssetAd'+'d'](_0x253088){_0x253088['on']('load',this['_onAssetLo'+'ad'],this),_0x253088['on']('change',this['_onAssetCh'+'ange'],this),_0x253088['on']('remove',this['_onAssetRe'+'move'],this),_0x253088['on']('unload',this['_onAssetUn'+'load'],this),_0x253088['resource']&&this['_onAssetLo'+'ad'](_0x253088);}['_onAssetLo'+'ad'](_0x27336d){this['addData'](_0x27336d['resource']);}['_onAssetCh'+'ange'](_0x2eaa2a){_0x2eaa2a['resource']&&this['addData'](_0x2eaa2a['resource']);}['_onAssetRe'+'move'](_0xa7d5b6){_0xa7d5b6['off']('load',this['_onAssetLo'+'ad'],this),_0xa7d5b6['off']('change',this['_onAssetCh'+'ange'],this),_0xa7d5b6['off']('remove',this['_onAssetRe'+'move'],this),_0xa7d5b6['off']('unload',this['_onAssetUn'+'load'],this),_0xa7d5b6['resource']&&this['removeData'](_0xa7d5b6['resource']),this['_app']['assets']['once']('add:'+_0xa7d5b6['id'],this['_onAssetAd'+'d'],this);}['_onAssetUn'+'load'](_0x276e25){_0x276e25['resource']&&this['removeData'](_0x276e25['resource']);}};h(uc,'EVENT_CHAN'+'GE','change');let ha=uc;class eC extends pe{constructor(_0xe6584e){super(),h(this,'_scripts',{}),h(this,'_list',[]),h(this,'_scriptSch'+'emas',new Map()),this['app']=_0xe6584e;}['destroy'](){this['app']=null,this['off']();}['addSchema'](_0x384d71,_0x417c84){_0x417c84&&this['_scriptSch'+'emas']['set'](_0x384d71,_0x417c84);}['getSchema'](_0x1dbccb){return this['_scriptSch'+'emas']['get'](_0x1dbccb);}['add'](_0x3870dc){const _0x4f043b=_0x3870dc['__name'];return this['_scripts']['hasOwnProp'+'erty'](_0x4f043b)?(setTimeout(()=>{if(_0x3870dc['prototype']['swap']){const _0x3d0d98=this['_scripts'][_0x4f043b],_0x25e71d=this['_list']['indexOf'](_0x3d0d98);this['_list'][_0x25e71d]=_0x3870dc,this['_scripts'][_0x4f043b]=_0x3870dc,this['fire']('swap',_0x4f043b,_0x3870dc),this['fire']('swap:'+_0x4f043b,_0x3870dc);}else console['warn']('script\x20reg'+'istry\x20alre'+'ady\x20has\x20\x27'+_0x4f043b+('\x27\x20script,\x20'+'define\x20\x27sw'+'ap\x27\x20method'+'\x20for\x20new\x20s'+'cript\x20type'+'\x20to\x20enable'+'\x20code\x20hot\x20'+'swapping'));}),!(0x808*-0x2+-0x1*-0x22d1+-0x12c0)):(this['_scripts'][_0x4f043b]=_0x3870dc,this['_list']['push'](_0x3870dc),this['fire']('add',_0x4f043b,_0x3870dc),this['fire']('add:'+_0x4f043b,_0x3870dc),setTimeout(()=>{if(!this['_scripts']['hasOwnProp'+'erty'](_0x4f043b)||!this['app']||!this['app']['systems']||!this['app']['systems']['script'])return;const _0x987f58=this['app']['systems']['script']['_component'+'s'];let _0x25d4ea;const _0x41f6d8=[],_0x5a96fd=[];for(_0x987f58['loopIndex']=0x5*-0x56d+0x44c*-0x8+-0x5*-0xc4d;_0x987f58['loopIndex']<_0x987f58['length'];_0x987f58['loopIndex']++){const _0x506507=_0x987f58['items'][_0x987f58['loopIndex']];if(_0x506507['_scriptsIn'+'dex'][_0x4f043b]&&_0x506507['_scriptsIn'+'dex'][_0x4f043b]['awaiting']){_0x506507['_scriptsDa'+'ta']&&_0x506507['_scriptsDa'+'ta'][_0x4f043b]&&(_0x25d4ea=_0x506507['_scriptsDa'+'ta'][_0x4f043b]['attributes']);const _0x10b093=_0x506507['create'](_0x4f043b,{'preloading':!(0x2f6*-0x4+-0xea8+-0x20*-0xd4),'ind':_0x506507['_scriptsIn'+'dex'][_0x4f043b]['ind'],'attributes':_0x25d4ea});_0x10b093&&_0x41f6d8['push'](_0x10b093);for(const _0x4b7646 of _0x506507['scripts'])_0x506507['initialize'+'Attributes'](_0x4b7646);}}for(let _0x517638=-0x23be+0x16*-0xdb+0x3690;_0x517638<_0x41f6d8['length'];_0x517638++)_0x41f6d8[_0x517638]['enabled']&&(_0x41f6d8[_0x517638]['_initializ'+'ed']=!(0x8bb+-0x1d65+0x2*0xa55),_0x5a96fd['push'](_0x41f6d8[_0x517638]),_0x41f6d8[_0x517638]['initialize']&&_0x41f6d8[_0x517638]['initialize']());for(let _0x2ac053=-0x190b+-0x20c9+0x39d4;_0x2ac053<_0x5a96fd['length'];_0x2ac053++)!_0x5a96fd[_0x2ac053]['enabled']||_0x5a96fd[_0x2ac053]['_postIniti'+'alized']||(_0x5a96fd[_0x2ac053]['_postIniti'+'alized']=!(-0x1d*-0x126+0x16f*-0x1+-0x1*0x1fdf),_0x5a96fd[_0x2ac053]['postInitia'+'lize']&&_0x5a96fd[_0x2ac053]['postInitia'+'lize']());}),!(-0x1*0x1cc1+-0x44*0x82+-0x11*-0x3b9));}['remove'](_0x7634c){let _0x48ebfe=_0x7634c,_0x85cb97=_0x7634c;if(typeof _0x85cb97!='string'?_0x85cb97=_0x48ebfe['__name']:_0x48ebfe=this['get'](_0x85cb97),this['get'](_0x85cb97)!==_0x48ebfe)return!(-0x1af+0x999+-0x3*0x2a3);delete this['_scripts'][_0x85cb97];const _0xa8bc4e=this['_list']['indexOf'](_0x48ebfe);return this['_list']['splice'](_0xa8bc4e,0x1*0x1b25+-0xfd*0x13+-0x85d),this['fire']('remove',_0x85cb97,_0x48ebfe),this['fire']('remove:'+_0x85cb97,_0x48ebfe),!(0x39*-0x5f+-0x1b63+0x308a);}['get'](_0x8c7b7f){return this['_scripts'][_0x8c7b7f]||null;}['has'](_0x2bf361){if(typeof _0x2bf361=='string')return this['_scripts']['hasOwnProp'+'erty'](_0x2bf361);if(!_0x2bf361)return!(0xe*0xb3+0x1b06+-0x1b*0x15d);const _0x54644b=_0x2bf361['__name'];return this['_scripts'][_0x54644b]===_0x2bf361;}['list'](){return this['_list'];}}const tC=(_0x4de3a0,_0x30a2bf)=>_0x4de3a0['constructo'+'r']['order']-_0x30a2bf['constructo'+'r']['order'],sC=_0x20fd30=>_0x20fd30['sort'](tC),Kn=[],Wy=[],iC=()=>Wy['pop']()??[],V_=_0x480286=>{_0x480286['length']=0x1540+-0x1b7d*0x1+-0x1*-0x63d,Wy['push'](_0x480286);},mc=class mc extends He{constructor(_0x206466,_0x122fc3=Zr()){super(_0x206466),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'gsplat'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'c',{}),h(this,'_app'),h(this,'_destroyin'+'g',!(0xe73+0xa6e+-0x1*0x18e0)),h(this,'_guid',null),h(this,'_template',!(-0x1a0c+0x13a5+0xa4*0xa)),(M['assert'](_0x122fc3,'Could\x20not\x20'+'find\x20curre'+'nt\x20applica'+'tion'),this['_app']=_0x122fc3);}['addCompone'+'nt'](_0x37cb19,_0x5ef45f){const _0x456148=this['_app']['systems'][_0x37cb19];return _0x456148?this['c'][_0x37cb19]?(M['warn']('addCompone'+'nt:\x20Entity'+'\x20already\x20h'+'as\x20\x27'+_0x37cb19+('\x27\x20componen'+'t')),null):_0x456148['addCompone'+'nt'](this,_0x5ef45f):(M['error']('addCompone'+'nt:\x20System'+'\x20\x27'+_0x37cb19+('\x27\x20doesn\x27t\x20'+'exist')),null);}['removeComp'+'onent'](_0x7753f9){const _0x385c5d=this['_app']['systems'][_0x7753f9];if(!_0x385c5d){M['error']('removeComp'+'onent:\x20Sys'+'tem\x20\x27'+_0x7753f9+('\x27\x20doesn\x27t\x20'+'exist'));return;}if(!this['c'][_0x7753f9]){M['warn']('removeComp'+'onent:\x20Ent'+'ity\x20doesn\x27'+'t\x20have\x20\x27'+_0x7753f9+('\x27\x20componen'+'t'));return;}_0x385c5d['removeComp'+'onent'](this);}['findCompon'+'ent'](_0x54d1fc){const _0x198589=this['findOne'](_0xb5c591=>{var _0x4d6aea;return(_0x4d6aea=_0xb5c591['c'])==null?void(0x1*0x24f4+0x1*0x2366+-0x485a):_0x4d6aea[_0x54d1fc];});return _0x198589&&_0x198589['c'][_0x54d1fc];}['findCompon'+'ents'](_0x4875b6){return this['find'](_0x4129e4=>{var _0x2e64f7;return(_0x2e64f7=_0x4129e4['c'])==null?void(-0x6e4+-0x11*-0x1ca+-0x1786):_0x2e64f7[_0x4875b6];})['map'](_0x182155=>_0x182155['c'][_0x4875b6]);}['findScript'](_0x265199){const _0x35920a=this['findOne'](_0x31eefc=>{var _0x4796e0,_0x4084ed;return(_0x4084ed=(_0x4796e0=_0x31eefc['c'])==null?void(-0x63*-0x49+0xb12+0x274d*-0x1):_0x4796e0['script'])==null?void(0x3*0x7a7+0x1749+-0xf6a*0x3):_0x4084ed['has'](_0x265199);});return _0x35920a==null?void(0x3b*-0x9b+-0x1*0x92b+-0xd*-0x374):_0x35920a['c']['script']['get'](_0x265199);}['findScript'+'s'](_0x398255){return this['find'](_0x3fcc55=>{var _0x502bdf,_0x21f4b6;return(_0x21f4b6=(_0x502bdf=_0x3fcc55['c'])==null?void(-0x1e39+0x625*-0x3+-0x81c*-0x6):_0x502bdf['script'])==null?void(0x107a+0x1*0x22a3+-0x331d):_0x21f4b6['has'](_0x398255);})['map'](_0x41cc14=>_0x41cc14['c']['script']['get'](_0x398255));}['getGuid'](){return this['_guid']||this['setGuid'](l0['create']()),this['_guid'];}['setGuid'](_0x1ae0d9){const _0x4453bb=this['_app']['_entityInd'+'ex'];this['_guid']&&delete _0x4453bb[this['_guid']],this['_guid']=_0x1ae0d9,_0x4453bb[this['_guid']]=this;}['_notifyHie'+'rarchyStat'+'eChanged'](_0x45c472,_0x3026e2){let _0x73291e=!(-0x25a4+-0x22b7*0x1+0x485c);_0x45c472===this&&Kn['length']===-0x2*0x95b+-0xb7c+0x1e32&&(_0x73291e=!(0xdba+-0x106+-0xcb4)),_0x45c472['_beingEnab'+'led']=!(-0xccd+0x1835+-0xb68),_0x45c472['_onHierarc'+'hyStateCha'+'nged'](_0x3026e2),_0x45c472['_onHierarc'+'hyStatePos'+'tChanged']&&Kn['push'](_0x45c472);const _0x28e79e=_0x45c472['_children'];for(let _0x2f685f=0x1493+0x135+0xae4*-0x2,_0x1ade63=_0x28e79e['length'];_0x2f685f<_0x1ade63;_0x2f685f++)_0x28e79e[_0x2f685f]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x28e79e[_0x2f685f],_0x3026e2);if(_0x45c472['_beingEnab'+'led']=!(-0x2479+0xb57+0x21*0xc3),_0x73291e){for(let _0x36e72f=-0x7c+0x112f*-0x1+0x11ab;_0x36e72f<Kn['length'];_0x36e72f++)Kn[_0x36e72f]['_onHierarc'+'hyStatePos'+'tChanged']();Kn['length']=0x1c65+0x1b1*-0xd+-0x668;}}['_onHierarc'+'hyStateCha'+'nged'](_0x5e9786){super['_onHierarc'+'hyStateCha'+'nged'](_0x5e9786);const _0x1c145c=this['_getSorted'+'Components']();for(let _0x5b0483=-0x22b4+-0x4c*-0x83+-0x430;_0x5b0483<_0x1c145c['length'];_0x5b0483++){const _0xb901=_0x1c145c[_0x5b0483];_0xb901['enabled']&&(_0x5e9786?_0xb901['onEnable']():_0xb901['onDisable']());}V_(_0x1c145c);}['_onHierarc'+'hyStatePos'+'tChanged'](){const _0x51ff6a=this['_getSorted'+'Components']();for(let _0x3642f8=0x37*-0x1e+-0x10c3*0x1+0x1735;_0x3642f8<_0x51ff6a['length'];_0x3642f8++)_0x51ff6a[_0x3642f8]['onPostStat'+'eChange']();V_(_0x51ff6a);}['findByGuid'](_0x2d6e67){if(this['_guid']===_0x2d6e67)return this;const _0x3db391=this['_app']['_entityInd'+'ex'][_0x2d6e67];return _0x3db391&&(_0x3db391===this||_0x3db391['isDescenda'+'ntOf'](this))?_0x3db391:null;}['destroy'](){this['_destroyin'+'g']=!(0x207c+-0xb5d+-0x151f);for(const _0x45217e in this['c'])this['c'][_0x45217e]['enabled']=!(-0x23a6+0x5a*-0x3+-0x1*-0x24b5);for(const _0x4003b6 in this['c'])this['c'][_0x4003b6]['system']['removeComp'+'onent'](this);super['destroy'](),this['_guid']&&delete this['_app']['_entityInd'+'ex'][this['_guid']],this['_destroyin'+'g']=!(-0x30b*0xa+-0x141d+0x328c);}['clone'](){const _0x32db1d={},_0x10c3eb=this['_cloneRecu'+'rsively'](_0x32db1d);return _0x32db1d[this['getGuid']()]=_0x10c3eb,$y(this,this,_0x10c3eb,_0x32db1d),_0x10c3eb;}['_getSorted'+'Components'](){const _0x2ff462=this['c'],_0x4db292=iC();let _0x55740a=-0x12d+0x1*-0x1d+0x14a;for(const _0x10569a in _0x2ff462)if(_0x2ff462['hasOwnProp'+'erty'](_0x10569a)){const _0x6e5c3e=_0x2ff462[_0x10569a];_0x55740a|=_0x6e5c3e['constructo'+'r']['order']!==0x22*-0x29+0x24c7+0xd*-0x269,_0x4db292['push'](_0x6e5c3e);}return _0x55740a&&_0x4db292['length']>-0x1*0x1bf+-0x1d+0x1dd&&sC(_0x4db292),_0x4db292;}['_cloneRecu'+'rsively'](_0x52c7d8){const _0x417778=new this['constructo'+'r'](void(-0x1dee+0x2*-0x96c+0x30c6),this['_app']);super['_cloneInte'+'rnal'](_0x417778);for(const _0xa98315 in this['c'])this['c'][_0xa98315]['system']['cloneCompo'+'nent'](this,_0x417778);for(let _0x536148=0xd49*-0x1+0x3*0x38b+-0x154*-0x2;_0x536148<this['_children']['length'];_0x536148++){const _0x2b690b=this['_children'][_0x536148];if(_0x2b690b instanceof mc){const _0x164321=_0x2b690b['_cloneRecu'+'rsively'](_0x52c7d8);_0x417778['addChild'](_0x164321),_0x52c7d8[_0x2b690b['getGuid']()]=_0x164321;}}return _0x417778;}};h(mc,'EVENT_DEST'+'ROY','destroy');let ot=mc;function $y(_0x25dc4f,_0x97f6db,_0x19e64b,_0x2cc1f9){if(_0x97f6db instanceof ot){const _0x4a7d49=_0x97f6db['c'];for(const _0x20c0df in _0x4a7d49){const _0x49ac5f=_0x4a7d49[_0x20c0df],_0x43ac00=_0x49ac5f['system']['getPropert'+'iesOfType']('entity');for(let _0x234df2=-0x70b*-0x3+-0x7*-0x163+-0x1ed6,_0x5a9134=_0x43ac00['length'];_0x234df2<_0x5a9134;_0x234df2++){const _0x36cc77=_0x43ac00[_0x234df2]['name'],_0x3114a9=_0x49ac5f[_0x36cc77];if(!!_0x25dc4f['findByGuid'](_0x3114a9)){const _0x34148e=_0x2cc1f9[_0x3114a9]['getGuid']();_0x34148e?_0x19e64b['c'][_0x20c0df][_0x36cc77]=_0x34148e:M['warn']('Could\x20not\x20'+'find\x20corre'+'sponding\x20e'+'ntity\x20id\x20w'+'hen\x20resolv'+'ing\x20duplic'+'ated\x20entit'+'y\x20referenc'+'es');}}}_0x4a7d49['script']&&_0x19e64b['script']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4a7d49['script'],_0x2cc1f9),_0x4a7d49['render']&&_0x19e64b['render']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4a7d49['render'],_0x2cc1f9),_0x4a7d49['button']&&_0x19e64b['button']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4a7d49['button'],_0x2cc1f9),_0x4a7d49['scrollview']&&_0x19e64b['scrollview']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4a7d49['scrollview'],_0x2cc1f9),_0x4a7d49['scrollbar']&&_0x19e64b['scrollbar']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4a7d49['scrollbar'],_0x2cc1f9),_0x4a7d49['anim']&&_0x19e64b['anim']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4a7d49['anim'],_0x2cc1f9);const _0x556105=_0x97f6db['children']['filter'](_0x42624b=>_0x42624b instanceof ot),_0x56ee9d=_0x19e64b['children']['filter'](_0x2e6a3a=>_0x2e6a3a instanceof ot);for(let _0x5d402c=-0x122d*-0x1+0x9*0x191+-0x2046,_0x4b6297=_0x556105['length'];_0x5d402c<_0x4b6297;_0x5d402c++)$y(_0x25dc4f,_0x556105[_0x5d402c],_0x56ee9d[_0x5d402c],_0x2cc1f9);}}class G_{constructor(_0x30b647,_0x46e80d){h(this,'name'),h(this,'url'),h(this,'data',null),h(this,'_loading',!(0x1c6*-0xd+0x7d8+-0x29*-0x5f)),h(this,'_onLoadedC'+'allbacks',[]),(this['name']=_0x30b647,this['url']=_0x46e80d);}get['loaded'](){return!!this['data'];}get['loading'](){return this['_loading'];}}class rC{constructor(_0x3256b1){h(this,'_app'),h(this,'_list',[]),h(this,'_index',{}),h(this,'_urlIndex',{}),this['_app']=_0x3256b1;}['destroy'](){this['_app']=null;}['list'](){return this['_list'];}['add'](_0x536c66,_0x1ed5de){if(this['_index']['hasOwnProp'+'erty'](_0x536c66))return M['warn']('pc.SceneRe'+'gistry:\x20tr'+'ying\x20to\x20ad'+'d\x20more\x20tha'+'n\x20one\x20scen'+'e\x20called:\x20'+_0x536c66),!(-0x146f+0x207*-0x13+0x3af5);const _0x2bcbdd=new G_(_0x536c66,_0x1ed5de),_0x4678db=this['_list']['push'](_0x2bcbdd);return this['_index'][_0x2bcbdd['name']]=_0x4678db-(-0x1277+-0x2115+0x1*0x338d),this['_urlIndex'][_0x2bcbdd['url']]=_0x4678db-(-0xfb5+-0xf*-0x141+0xd*-0x3d),!(0x24d+0x2393+-0x25e0);}['find'](_0x47de0d){return this['_index']['hasOwnProp'+'erty'](_0x47de0d)?this['_list'][this['_index'][_0x47de0d]]:null;}['findByUrl'](_0x16fb42){return this['_urlIndex']['hasOwnProp'+'erty'](_0x16fb42)?this['_list'][this['_urlIndex'][_0x16fb42]]:null;}['remove'](_0x1833fa){if(this['_index']['hasOwnProp'+'erty'](_0x1833fa)){const _0x593876=this['_index'][_0x1833fa];let _0x12aa36=this['_list'][_0x593876];delete this['_urlIndex'][_0x12aa36['url']],delete this['_index'][_0x1833fa],this['_list']['splice'](_0x593876,0xd47+-0x20f6+0x13b0);for(let _0x18960d=-0x4f*-0x2f+0x1b64+0x4b*-0x8f;_0x18960d<this['_list']['length'];_0x18960d++)_0x12aa36=this['_list'][_0x18960d],this['_index'][_0x12aa36['name']]=_0x18960d,this['_urlIndex'][_0x12aa36['url']]=_0x18960d;}}['_loadScene'+'Data'](_0x59795a,_0x277cf3,_0x44f2fd){const _0x1f0274=this['_app'];let _0x5de527=_0x59795a;if(typeof _0x59795a=='string'&&(_0x59795a=this['findByUrl'](_0x5de527)||this['find'](_0x5de527)||new G_('Untitled',_0x5de527)),_0x5de527=_0x59795a['url'],!_0x5de527){_0x44f2fd('Cannot\x20fin'+'d\x20scene\x20to'+'\x20load');return;}if(_0x59795a['loaded']){_0x44f2fd(null,_0x59795a);return;}_0x1f0274['assets']&&_0x1f0274['assets']['prefix']&&!Ln['test'](_0x5de527)&&(_0x5de527=xe['join'](_0x1f0274['assets']['prefix'],_0x5de527)),_0x59795a['_onLoadedC'+'allbacks']['push'](_0x44f2fd),_0x59795a['_loading']||_0x1f0274['loader']['getHandler']('hierarchy')['load'](_0x5de527,(_0x3cec73,_0x38241a)=>{_0x59795a['data']=_0x38241a,_0x59795a['_loading']=!(-0xbce*0x1+0x835+0x1cd*0x2);for(let _0x1f0cae=0x1e99+-0xc60+-0x1239;_0x1f0cae<_0x59795a['_onLoadedC'+'allbacks']['length'];_0x1f0cae++)_0x59795a['_onLoadedC'+'allbacks'][_0x1f0cae](_0x3cec73,_0x59795a);_0x277cf3||(_0x59795a['data']=null),_0x59795a['_onLoadedC'+'allbacks']['length']=-0x2083+0xe9c+-0x1*-0x11e7;}),_0x59795a['_loading']=!(-0x9*0x1e9+-0x3*0xa5+0x1320);}['loadSceneD'+'ata'](_0x2d4d7d,_0x3f005a){this['_loadScene'+'Data'](_0x2d4d7d,!(-0x2ad*0x1+0x20af+-0x1e02),_0x3f005a);}['unloadScen'+'eData'](_0x5b3a64){typeof _0x5b3a64=='string'&&(_0x5b3a64=this['findByUrl'](_0x5b3a64)),_0x5b3a64&&(_0x5b3a64['data']=null);}['_loadScene'+'Hierarchy'](_0x3b4368,_0x7a21da,_0x8abfda){this['_loadScene'+'Data'](_0x3b4368,!(0xc95*-0x3+-0xb24+0x1c*0x1bf),(_0x35b56f,_0x32f85f)=>{if(_0x35b56f){_0x8abfda&&_0x8abfda(_0x35b56f);return;}_0x7a21da&&_0x7a21da(_0x32f85f);const _0x21154f=this['_app'],_0x3c3fe6=()=>{const _0x4792cb=_0x21154f['loader']['getHandler']('hierarchy');_0x21154f['systems']['script']['preloading']=!(0x84f*0x1+0x455*0x8+0x2af7*-0x1);const _0x56ae60=_0x4792cb['open'](_0x32f85f['url'],_0x32f85f['data']);_0x21154f['systems']['script']['preloading']=!(-0x1283+-0x15ae+0x2832),_0x21154f['loader']['clearCache'](_0x32f85f['url'],'hierarchy'),_0x21154f['root']['addChild'](_0x56ae60),_0x21154f['systems']['fire']('initialize',_0x56ae60),_0x21154f['systems']['fire']('postInitia'+'lize',_0x56ae60),_0x21154f['systems']['fire']('postPostIn'+'itialize',_0x56ae60),_0x8abfda&&_0x8abfda(null,_0x56ae60);};_0x21154f['_preloadSc'+'ripts'](_0x32f85f['data'],_0x3c3fe6);});}['loadSceneH'+'ierarchy'](_0x4421bb,_0x575386){this['_loadScene'+'Hierarchy'](_0x4421bb,null,_0x575386);}['loadSceneS'+'ettings'](_0x3b17d3,_0x269df2){this['_loadScene'+'Data'](_0x3b17d3,!(-0x2*0xfef+0xce+0x1f11),(_0x25810d,_0x3f28cf)=>{_0x25810d?_0x269df2&&_0x269df2(_0x25810d):(this['_app']['applyScene'+'Settings'](_0x3f28cf['data']['settings']),_0x269df2&&_0x269df2(null));});}['changeScen'+'e'](_0x2ed23b,_0x15d734){const _0x553f53=this['_app'],_0x4bafbe=_0x1668ce=>{const {children:_0x52e4f0}=_0x553f53['root'];for(;_0x52e4f0['length'];)_0x52e4f0[-0x1843*-0x1+0x590+-0x1dd3]['destroy']();_0x553f53['applyScene'+'Settings'](_0x1668ce['data']['settings']);};this['_loadScene'+'Hierarchy'](_0x2ed23b,_0x4bafbe,_0x15d734);}['loadScene'](_0x4653b5,_0x390ccb){const _0x42577b=this['_app'],_0x16df92=_0x42577b['loader']['getHandler']('scene');_0x42577b['assets']&&_0x42577b['assets']['prefix']&&!Ln['test'](_0x4653b5)&&(_0x4653b5=xe['join'](_0x42577b['assets']['prefix'],_0x4653b5)),_0x16df92['load'](_0x4653b5,(_0x2cfd87,_0x3a9225)=>{if(_0x2cfd87)_0x390ccb&&_0x390ccb(_0x2cfd87);else{const _0x12fab4=()=>{_0x42577b['systems']['script']['preloading']=!(-0x2e*-0x91+-0x7*-0x283+-0x2ba3);const _0x6a3ee7=_0x16df92['open'](_0x4653b5,_0x3a9225),_0x12eeb0=this['findByUrl'](_0x4653b5);_0x12eeb0&&!_0x12eeb0['loaded']&&(_0x12eeb0['data']=_0x3a9225),_0x42577b['systems']['script']['preloading']=!(0x112e+-0x1fa1*-0x1+-0x30ce),_0x42577b['loader']['clearCache'](_0x4653b5,'scene'),_0x42577b['loader']['patch']({'resource':_0x6a3ee7,'type':'scene'},_0x42577b['assets']),_0x42577b['root']['addChild'](_0x6a3ee7['root']),_0x42577b['systems']['rigidbody']&&typeof Ammo<'u'&&_0x42577b['systems']['rigidbody']['gravity']['set'](_0x6a3ee7['_gravity']['x'],_0x6a3ee7['_gravity']['y'],_0x6a3ee7['_gravity']['z']),_0x390ccb&&_0x390ccb(null,_0x6a3ee7);};_0x42577b['_preloadSc'+'ripts'](_0x3a9225,_0x12fab4);}});}}class aC{constructor(_0x235338){this['frame']={'fps':0x0,'ms':0x0,'dt':0x0,'updateStart':0x0,'updateTime':0x0,'renderStart':0x0,'renderTime':0x0,'physicsStart':0x0,'physicsTime':0x0,'cullTime':0x0,'sortTime':0x0,'skinTime':0x0,'morphTime':0x0,'instancingTime':0x0,'triangles':0x0,'otherPrimitives':0x0,'shaders':0x0,'materials':0x0,'cameras':0x0,'shadowMapUpdates':0x0,'shadowMapTime':0x0,'depthMapTime':0x0,'forwardTime':0x0,'lightClustersTime':0x0,'lightClusters':0x0,'_timeToCountFrames':0x0,'_fpsAccum':0x0},this['drawCalls']={'forward':0x0,'depth':0x0,'shadow':0x0,'immediate':0x0,'misc':0x0,'total':0x0,'skinned':0x0,'instanced':0x0,'removedByInstancing':0x0},this['misc']={'renderTargetCreationTime':0x0},this['particles']={'updatesPerFrame':0x0,'_updatesPerFrame':0x0,'frameTime':0x0,'_frameTime':0x0},this['shaders']=_0x235338['_shaderSta'+'ts'],this['vram']=_0x235338['_vram'],Object['defineProp'+'erty'](this['vram'],'totalUsed',{'get':function(){return this['tex']+this['vb']+this['ib'];}}),Object['defineProp'+'erty'](this['vram'],'geom',{'get':function(){return this['vb']+this['ib'];}});}get['scene'](){return Zr()['scene']['_stats'];}get['lightmappe'+'r'](){var _0x49d655;return(_0x49d655=Zr()['lightmappe'+'r'])==null?void(0x2106+-0x97f+-0x1787):_0x49d655['stats'];}get['batcher'](){const _0x28e513=Zr()['_batcher'];return _0x28e513?_0x28e513['_stats']:null;}}const nC='\x0auniform\x20f'+'loat\x20alpha'+'_ref;\x0a\x0avoi'+'d\x20alphaTes'+'t(float\x20a)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(a\x20<\x20alpha'+'_ref)\x20disc'+'ard;\x0a}\x0a',oC='\x0a\x0a#ifdef\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+'\x20AMBIENTSH'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20am'+'bientSH[9]'+';\x0a#endif\x0a\x0a'+'#if\x20LIT_AM'+'BIENT_SOUR'+'CE\x20==\x20ENVA'+'LATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fndef\x20ENV_'+'ATLAS\x0a\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_envAtlas'+';\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0avoid\x20addA'+'mbient(vec'+'3\x20worldNor'+'mal)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'AMBIENTSH\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20n\x20=\x20cu'+'beMapRotat'+'e(worldNor'+'mal);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20c'+'olor\x20=\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[0'+']\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ambi'+'entSH[1]\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[2'+']\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[3]\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[4]\x20*\x20'+'n.x\x20*\x20n.z\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ambien'+'tSH[5]\x20*\x20n'+'.z\x20*\x20n.y\x20+'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ambient'+'SH[6]\x20*\x20n.'+'y\x20*\x20n.x\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[7]\x20*\x20(3.'+'0\x20*\x20n.z\x20*\x20'+'n.z\x20-\x201.0)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[8]\x20*\x20'+'(n.x\x20*\x20n.x'+'\x20-\x20n.y\x20*\x20n'+'.y);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20processEn'+'vironment('+'max(color,'+'\x20vec3(0.0)'+'));\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_A'+'MBIENT_SOU'+'RCE\x20==\x20ENV'+'ALATLAS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dir\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20ma'+'pUv(toSphe'+'ricalUv(di'+'r),\x20vec4(1'+('28.0,\x20256.'+'0\x20+\x20128.0,'+'\x2064.0,\x2032.'+'0)\x20/\x20atlas'+'Size);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20raw\x20=\x20tex'+'ture2D(tex'+'ture_envAt'+'las,\x20uv);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20linear\x20'+'=\x20{ambient'+'Decode}(ra'+'w);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20p'+'rocessEnvi'+'ronment(li'+'near);\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'CONSTANT\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20light'+'_globalAmb'+'ient;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),lC='\x0a\x0a#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_anisotr'+'opyIntensi'+'ty;\x0a\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20material_'+'anisotropy'+'Rotation;\x0a'+'#endif\x0a\x0avo'+'id\x20getAnis'+'otropy()\x20{'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x200'+'.0;\x0a\x20\x20\x20\x20dA'+'nisotropyR'+'otation\x20=\x20'+'vec2(1.0,\x20'+'0.0);\x0a\x0a#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20m'+'aterial_an'+'isotropyIn'+'tensity;\x0a\x20'+'\x20\x20\x20dAnisot'+'ropyRotati'+'on\x20=\x20mater'+'ial_anisot'+'ropyRotati'+'on;\x0a#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_ANI'+'SOTROPY_TE'+'XTURE\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropyTex\x20='+'\x20texture2D'+'Bias({STD_'+'ANISOTROPY'+'_TEXTURE_N'+'AME},\x20{STD'+'_ANISOTROP'+'Y_TEXTURE_'+'UV},\x20textu'+'reBias).rg'+'b;\x0a\x20\x20\x20\x20dAn'+'isotropy\x20*'+'=\x20anisotro'+'pyTex.b;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20a'+'nisotropyR'+'otationFro'+'mTex\x20=\x20ani'+'sotropyTex'+'.rg\x20*\x202.0\x20'+'-\x20vec2(1.0'+');\x0a\x20\x20\x20\x20mat'+'2\x20rotation'+'Matrix\x20=\x20m'+'at2(dAniso'+'tropyRotat'+'ion.x,\x20dAn'+'isotropyRo'+'tation.y,\x20'+'-dAnisotro'+'pyRotation'+'.y,\x20dAniso'+'tropyRotat'+'ion.x);\x0a\x20\x20'+'\x20\x20dAnisotr'+'opyRotatio'+'n\x20=\x20rotati'+'onMatrix\x20*'+'\x20anisotrop'+'yRotationF'+'romTex;\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20dA'+'nisotropy\x20'+'=\x20clamp(dA'+'nisotropy,'+'\x200.0,\x201.0)'+';\x0a}\x0a',hC='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_aoInten'+'sity;\x0a#end'+'if\x0a\x0a#ifdef'+'\x20STD_AODET'+'AIL_TEXTUR'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22deta'+'ilModesPS\x22'+'\x0a#endif\x0a\x0av'+'oid\x20getAO('+')\x20{\x0a\x20\x20\x20\x20dA'+'o\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'aoBase\x20=\x20t'+'exture2DBi'+'as({STD_AO'+'_TEXTURE_N'+'AME},\x20{STD'+'_AO_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_AO_TE'+'XTURE_CHAN'+'NEL};\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20aoDetail\x20'+'=\x20texture2'+'DBias({STD'+'_AODETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'AODETAIL_T'+'EXTURE_UV}'+',\x20textureB'+'ias).{STD_'+'AODETAIL_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'oBase\x20=\x20de'+'tailMode_{'+'STD_AODETA'+'IL_DETAILM'+'ODE}(vec3('+'aoBase),\x20v'+'ec3(aoDeta'+'il)).r;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_AO_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(STD_A'+'O_TEXTURE)'+'\x20||\x20define'+'d(STD_AO_V'+'ERTEX)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAo\x20='+'\x20mix(1.0,\x20'+'dAo,\x20mater'+'ial_aoInte'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',cC='\x0avoid\x20occl'+'udeDiffuse'+'(float\x20ao)'+'\x20{\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20ao;\x0a}\x0a',dC='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_occlud'+'eSpecularI'+'ntensity;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0av'+'oid\x20occlud'+'eSpecular('+'float\x20glos'+'s,\x20float\x20a'+'o,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir)\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'AO\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_OCCLUDE_'+'SPECULAR_F'+'LOAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20specOcc'+'\x20=\x20mix(1.0'+',\x20ao,\x20mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20specOc'+'c\x20=\x20ao;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_OCC'+'LUDE_SPECU'+'LAR\x20==\x20GLO'+'SSDEPENDEN'+'T\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20approx'+'imated\x20spe'+'cular\x20occl'+'usion\x20from'+'\x20AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20http:'+'//research'+'.tri-ace.c'+'om/Data/ce'+'dec2011_Re'+'altimePBR_'+'Implementa'+'tion_e.ppt'+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20spec'+'Pow\x20=\x20exp2'+'(gloss\x20*\x201'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'specOcc\x20=\x20'+'saturate(p'+'ow(dot(wor'+'ldNormal,\x20'+'viewDir)\x20+'+'\x20ao,\x200.01\x20'+'*\x20specPow)'+'\x20-\x201.0\x20+\x20a'+'o);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecOcc\x20=\x20m'+'ix(1.0,\x20sp'+'ecOcc,\x20mat'+'erial_occl'+'udeSpecula'+'rIntensity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'*=\x20specOcc'+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20*=\x20specO'+'cc;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sSpecula'+'rLight\x20*=\x20'+'specOcc;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sReflecti'+'on\x20*=\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a'),fC='\x0a\x20\x20\x20\x20vec4\x20'+'dirLm\x20=\x20te'+'xture2D(te'+'xture_dirL'+'ightMap,\x20v'+'Uv1);\x0a\x0a\x20\x20\x20'+'\x20if\x20(bakeD'+'ir\x20>\x200.5)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dAtten'+'\x20>\x200.00001'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dirL'+'m.xyz\x20=\x20di'+'rLm.xyz\x20*\x20'+'2.0\x20-\x20vec3'+'(1.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20sa'+'turate(dAt'+'ten);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20nor'+'malize(dLi'+'ghtDirNorm'+'W.xyz*dAtt'+'en\x20+\x20dirLm'+'.xyz*dirLm'+'.w)\x20*\x200.5\x20'+'+\x20vec3(0.5'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20dirLm.w\x20'+'+\x20dAtten;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.a\x20=\x20m'+'ax(gl_Frag'+'Color.a,\x201'+'.0\x20/\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20dir'+'Lm;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20dirLm.'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color.a\x20=\x20'+'max(dirLm.'+'w,\x20dAtten\x20'+'>\x200.00001\x20'+'?\x20(1.0/255'+'.0)\x20:\x200.0)'+';\x0a\x20\x20\x20\x20}\x0a',uC='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'ambientBak'+'eOcclusion'+'Contrast\x20+'+'\x201.0,\x200.0)'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'vec3(ambie'+'ntBakeOccl'+'usionBrigh'+'tness);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20sa'+'turate(dDi'+'ffuseLight'+');\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20dAmbie'+'ntLight;\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHTM'+'AP_RGBM\x0a\x20\x20'+'\x20\x20//\x20encod'+'e\x20to\x20RGBM\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.rgb'+'\x20=\x20dDiffus'+'eLight;\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor.rgb\x20='+'\x20pow(gl_Fr'+'agColor.rg'+'b,\x20vec3(0.'+'5));\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20/=\x208'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.a\x20=\x20clamp'+'(\x20max(\x20max'+'(\x20gl_FragC'+'olor.r,\x20gl'+'_FragColor'+'.g\x20),\x20max('+'\x20gl_FragCo'+'lor.b,\x201.0'+'\x20/\x20255.0\x20)'+'\x20),\x200.0,1.'+'0\x20);\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.a\x20=\x20ceil'+'(gl_FragCo'+'lor.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20/=\x20gl'+'_FragColor'+'.a;\x0a#else\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(dDiffu'+'seLight,\x201'+'.0);\x0a#endi'+'f\x0a',mC='\x0auniform\x20v'+'ec3\x20view_p'+'osition;\x0a\x0a'+'uniform\x20ve'+'c3\x20light_g'+'lobalAmbie'+'nt;\x0a\x0afloat'+'\x20square(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'x*x;\x0a}\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0ave'+'c3\x20saturat'+'e(vec3\x20x)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3(0.0'+'),\x20vec3(1.'+'0));\x0a}\x0a',pC='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'ec2\x20vMask;'+'\x0avarying\x20v'+'ec2\x20vTiled'+'Uv;\x0a\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0au'+'niform\x20med'+'iump\x20vec2\x20'+'outerScale'+';\x0auniform\x20'+'mediump\x20ve'+'c4\x20atlasRe'+'ct;\x0a\x0avec2\x20'+'nineSliced'+'Uv;\x0a',_C='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vec2\x20vMa'+'sk;\x0avaryin'+'g\x20vec2\x20vTi'+'ledUv;\x0a\x0aun'+'iform\x20medi'+'ump\x20vec4\x20i'+'nnerOffset'+';\x0auniform\x20'+'mediump\x20ve'+'c2\x20outerSc'+'ale;\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20atla'+'sRect;\x0a\x0ave'+'c2\x20nineSli'+'cedUv;\x0a',gC='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afloat\x20'+'bayer2(vec'+'2\x20p)\x20{\x0a\x20\x20\x20'+'\x20return\x20mo'+'d(2.0\x20*\x20p.'+'y\x20+\x20p.x\x20+\x20'+'1.0,\x204.0);'+'\x0a}\x0a\x0a//\x204x4'+'\x20matrix,\x20p'+'\x20-\x20pixel\x20c'+'oordinate\x0a'+'float\x20baye'+'r4(vec2\x20p)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20p1\x20=\x20mod'+'(p,\x202.0);\x0a'+'\x20\x20\x20\x20vec2\x20p'+'2\x20=\x20floor('+'0.5\x20*\x20mod('+'p,\x204.0));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afloat\x20bay'+'er8(vec2\x20p'+')\x20{\x0a\x20\x20\x20\x20ve'+'c2\x20p1\x20=\x20mo'+'d(p,\x202.0);'+'\x0a\x20\x20\x20\x20vec2\x20'+'p2\x20=\x20floor'+'(0.5\x20*\x20mod'+'(p,\x204.0));'+'\x0a\x20\x20\x20\x20vec2\x20'+'p4\x20=\x20floor'+'(0.25\x20*\x20mo'+'d(p,\x208.0))'+';\x0a\x20\x20\x20\x20retu'+'rn\x204.0\x20*\x20('+'4.0\x20*\x20baye'+'r2(p1)\x20+\x20b'+'ayer2(p2))'+'\x20+\x20bayer2('+'p4);\x0a}\x0a',SC='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0auni'+'form\x20vec2\x20'+'pixelOffse'+'t;\x0a\x0a#ifdef'+'\x20GAUSS\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20weigh'+'t[{SAMPLES'+'}];\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20m'+'oments\x20=\x20v'+'ec3(0.0);\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vUv0\x20-'+'\x20pixelOffs'+'et\x20*\x20(floa'+'t({SAMPLES'+'})\x20*\x200.5);'+'\x0a\x20\x20\x20\x20for\x20('+'int\x20i\x20=\x200;'+'\x20i\x20<\x20{SAMP'+'LES};\x20i++)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20c\x20=\x20'+'texture2D('+'source,\x20uv'+'\x20+\x20pixelOf'+'fset\x20*\x20flo'+'at(i));\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20GAUSS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20moments\x20'+'+=\x20c.xyz\x20*'+'\x20weight[i]'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'ments\x20+=\x20c'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'GAUSS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20*=\x201.0\x20/'+'\x20float({SA'+'MPLES});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(momen'+'ts.x,\x20mome'+'nts.y,\x20mom'+'ents.z,\x201.'+'0);\x0a}\x0a',yC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oat;\x0a\x0avoid'+'\x20getClearC'+'oat()\x20{\x0a\x20\x20'+'\x20\x20ccSpecul'+'arity\x20=\x20ma'+'terial_cle'+'arCoat;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_CLEARC'+'OAT_TEXTUR'+'E\x0a\x20\x20\x20\x20ccSp'+'ecularity\x20'+'*=\x20texture'+'2DBias({ST'+'D_CLEARCOA'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_CL'+'EARCOAT_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20*=\x20satu'+'rate(vVert'+'exColor.{S'+'TD_CLEARCO'+'AT_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',vC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oatGloss;\x0a'+'\x0avoid\x20getC'+'learCoatGl'+'ossiness()'+'\x20{\x0a\x20\x20\x20\x20ccG'+'lossiness\x20'+'=\x20material'+'_clearCoat'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE\x0a\x20\x20\x20\x20'+'ccGlossine'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_CLEAR'+'COATGLOSS_'+'TEXTURE_NA'+'ME},\x20{STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_CLEAR'+'COATGLOSS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_CLEAR'+'COATGLOSS_'+'INVERT\x0a\x20\x20\x20'+'\x20ccGlossin'+'ess\x20=\x201.0\x20'+'-\x20ccGlossi'+'ness;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20+=\x200.'+'0000001;\x0a}'+'\x0a',xC='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0aunif'+'orm\x20float\x20'+'material_c'+'learCoatBu'+'mpiness;\x0a#'+'endif\x0a\x0avoi'+'d\x20getClear'+'CoatNormal'+'()\x20{\x0a#ifde'+'f\x20STD_CLEA'+'RCOATNORMA'+'L_TEXTURE\x0a'+'\x20\x20\x20\x20vec3\x20n'+'ormalMap\x20='+'\x20{STD_CLEA'+'RCOATNORMA'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_UV}'+',\x20textureB'+'ias));\x0a\x20\x20\x20'+'\x20normalMap'+'\x20=\x20mix(vec'+'3(0.0,\x200.0'+',\x201.0),\x20no'+'rmalMap,\x20m'+'aterial_cl'+'earCoatBum'+'piness);\x0a\x20'+'\x20\x20\x20ccNorma'+'lW\x20=\x20norma'+'lize(dTBN\x20'+'*\x20normalMa'+'p);\x0a#else\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20dVer'+'texNormalW'+';\x0a#endif\x0a}'+'\x0a',TC='\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0avec2\x20ge'+'tCubemapFa'+'ceCoordina'+'tes(const\x20'+'vec3\x20dir,\x20'+'out\x20float\x20'+'faceIndex,'+'\x20out\x20vec2\x20'+'tileOffset'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20vAbs\x20=\x20'+'abs(dir);\x0a'+'\x20\x20\x20\x20float\x20'+'ma;\x0a\x20\x20\x20\x20ve'+'c2\x20uv;\x0a\x20\x20\x20'+'\x20if\x20(vAbs.'+'z\x20>=\x20vAbs.'+'x\x20&&\x20vAbs.'+'z\x20>=\x20vAbs.'+'y)\x20{\x20\x20\x20//\x20'+'front\x20/\x20ba'+'ck\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20faceInde'+'x\x20=\x20dir.z\x20'+'<\x200.0\x20?\x205.'+'0\x20:\x204.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2(dir.z\x20'+'<\x200.0\x20?\x20-d'+'ir.x\x20:\x20dir'+'.x,\x20-dir.y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.x\x20=\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20t'+'ileOffset.'+'y\x20=\x20dir.z\x20'+'<\x200.0\x20?\x201.'+'0\x20:\x200.0;\x0a\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if(vAbs.y'+'\x20>=\x20vAbs.x'+')\x20{\x20\x20//\x20to'+'p\x20index\x202,'+'\x20bottom\x20in'+'dex\x203\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20faceI'+'ndex\x20=\x20dir'+'.y\x20<\x200.0\x20?'+'\x203.0\x20:\x202.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ma\x20=\x200.5\x20/'+'\x20vAbs.y;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uv\x20'+'=\x20vec2(dir'+'.x,\x20dir.y\x20'+'<\x200.0\x20?\x20-d'+'ir.z\x20:\x20dir'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20tileOff'+'set.x\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.y\x20=\x20dir.'+'y\x20<\x200.0\x20?\x20'+'1.0\x20:\x200.0;'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'\x20=\x200.5\x20/\x20v'+'Abs.x;\x0a\x20\x20\x20'+('\x20\x20\x20\x20\x20uv\x20=\x20'+'vec2(dir.x'+'\x20<\x200.0\x20?\x20d'+'ir.z\x20:\x20-di'+'r.z,\x20-dir.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20tileOffs'+'et.x\x20=\x200.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'tileOffset'+'.y\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20uv'+'\x20*\x20ma\x20+\x200.'+'5;\x0a}\x0a\x0a//\x20c'+'onverts\x20un'+'normalized'+'\x20direction'+'\x20vector\x20to'+'\x20a\x20texture'+'\x20coordinat'+'e\x20for\x20a\x20cu'+'bemap\x20face'+'\x20stored\x20wi'+'thin\x20textu'+'re\x20atlas\x20d'+'escribed\x20b'+'y\x20the\x20view'+'port\x0avec2\x20'+'getCubemap'+'AtlasCoord'+'inates(con'+'st\x20vec3\x20om'+'niAtlasVie'+'wport,\x20flo'+'at\x20shadowE'+'dgePixels,'+'\x20float\x20sha'+'dowTexture'+'Resolution'+',\x20const\x20ve'+'c3\x20dir)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20faceIndex'+';\x0a\x20\x20\x20\x20vec2'+'\x20tileOffse'+'t;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapFac'+'eCoordinat'+'es(dir,\x20fa'+'ceIndex,\x20t'+'ileOffset)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'move\x20uv\x20co'+'ordinates\x20'+'inwards\x20in'+'side\x20to\x20co'+'mpensate\x20f'+'or\x20larger\x20'+'fov\x20when\x20r'+'endering\x20s'+'hadow\x20into'+'\x20atlas\x0a\x20\x20\x20'+'\x20float\x20atl'+'asFaceSize'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20tileSi'+'ze\x20=\x20shado'+'wTextureRe'+'solution\x20*'+'\x20atlasFace'+'Size;\x0a\x20\x20\x20\x20'+'float\x20offs'+'et\x20=\x20shado'+'wEdgePixel'+'s\x20/\x20tileSi'+'ze;\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv\x20*\x20ve'+'c2(1.0\x20-\x20o'+'ffset\x20*\x202.'+'0)\x20+\x20vec2('+'offset\x20*\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20*'+'=\x20atlasFac'+'eSize;\x0a\x0a\x20\x20'+'\x20\x20//\x20offse'+'t\x20into\x20fac'+'e\x20of\x20the\x20a')+('tlas\x20(3x3\x20'+'grid)\x0a\x20\x20\x20\x20'+'uv\x20+=\x20tile'+'Offset\x20*\x20a'+'tlasFaceSi'+'ze;\x0a\x0a\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nto\x20the\x20at'+'las\x20viewpo'+'rt\x0a\x20\x20\x20\x20uv\x20'+'+=\x20omniAtl'+'asViewport'+'.xy;\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a'),wC='\x0avec3\x20_get'+'CookieClus'+'tered(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20uv,\x20floa'+'t\x20intensit'+'y,\x20vec4\x20co'+'okieChanne'+'l)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20pixel\x20'+'=\x20mix(vec4'+'(1.0),\x20tex'+'ture2DLod('+'tex,\x20uv,\x200'+'.0),\x20inten'+'sity);\x0a\x20\x20\x20'+'\x20bool\x20isRg'+'b\x20=\x20dot(co'+'okieChanne'+'l.rgb,\x20vec'+'3(1.0))\x20=='+'\x203.0;\x0a\x20\x20\x20\x20'+'return\x20isR'+'gb\x20?\x20pixel'+'.rgb\x20:\x20vec'+'3(dot(pixe'+'l,\x20cookieC'+'hannel));\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0ave'+'c3\x20getCook'+'ie2DCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20mat4\x20'+'transform,'+'\x20vec3\x20worl'+'dPosition,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieC'+'hannel)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20p'+'rojPos\x20=\x20t'+'ransform\x20*'+'\x20vec4(worl'+'dPosition,'+'\x201.0);\x0a\x20\x20\x20'+'\x20return\x20_g'+'etCookieCl'+'ustered(TE'+'XTURE_PASS'+'(tex),\x20pro'+'jPos.xy\x20/\x20'+'projPos.w,'+'\x20intensity'+',\x20cookieCh'+'annel);\x0a}\x0a'+'\x0a//\x20getCoo'+'kie\x20for\x20cl'+'ustered\x20om'+'ni\x20light\x20w'+'ith\x20the\x20co'+'okie\x20textu'+'re\x20being\x20s'+'tored\x20in\x20t'+'he\x20cookie\x20'+'atlas\x0avec3'+'\x20getCookie'+'CubeCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec3\x20'+'dir,\x20float'+'\x20intensity'+',\x20vec4\x20coo'+'kieChannel'+',\x20float\x20sh'+'adowTextur'+'eResolutio'+'n,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20omniAtla'+'sViewport)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+('tureResolu'+'tion,\x20dir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getCoo'+'kieCluster'+'ed(TEXTURE'+'_PASS(tex)'+',\x20uv,\x20inte'+'nsity,\x20coo'+'kieChannel'+');\x0a}\x0a'),EC='\x0a\x0avec3\x20_ge'+'tShadowCoo'+'rdPerspZbu'+'ffer(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20wP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20shado'+'wMatrix\x20*\x20'+'vec4(wPos,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'yz\x20/=\x20proj'+'Pos.w;\x0a\x20\x20\x20'+'\x20return\x20pr'+'ojPos.xyz;'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20bias\x20i'+'s\x20already\x20'+'applied\x20on'+'\x20render\x0a}\x0a'+'\x0avec3\x20getS'+'hadowCoord'+'PerspZbuff'+'erNormalOf'+'fset(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20no'+'rmal)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20wPo'+'s\x20=\x20vPosit'+'ionW\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowCoordPe'+'rspZbuffer'+'(shadowMat'+'rix,\x20shado'+'wParams,\x20w'+'Pos);\x0a}\x0a\x0av'+'ec3\x20normal'+'OffsetPoin'+'tShadow(ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20lightPos'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm,\x20vec3'+'\x20normal)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20distScale'+'\x20=\x20length('+'lightDir);'+'\x0a\x20\x20\x20\x20vec3\x20'+'wPos\x20=\x20vPo'+'sitionW\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x20/'+'/0.02\x0a\x20\x20\x20\x20'+'vec3\x20dir\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0afloa'+'t\x20getShado'+'wOmniClust'+'eredPCF1(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20omniAtla'+'sViewport,'+'\x20float\x20sha'+'dowEdgePix'+'els,\x20vec3\x20'+'lightDir)\x20'+'{\x0a\x0a\x20\x20\x20\x20flo'+'at\x20shadowT'+('extureReso'+'lution\x20=\x20s'+'hadowParam'+'s.x;\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etCubemapA'+'tlasCoordi'+'nates(omni'+'AtlasViewp'+'ort,\x20shado'+'wEdgePixel'+'s,\x20shadowT'+'extureReso'+'lution,\x20li'+'ghtDir);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'shadowZ\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(uv,\x20sha'+'dowZ));\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF3'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF3'+'x3(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF5)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF5'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s')+('hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF5'+'x5(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a/'+'/\x20Clustere'+'d\x20Spot\x20Sam'+'pling\x20usin'+'g\x20atlas\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF1)\x0a\x0afl'+'oat\x20getSha'+'dowSpotClu'+'steredPCF1'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSha'+'dow(shadow'+'Map,\x20shado'+'wCoord);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x0af'+'loat\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF3x3'+'(SHADOWMAP'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a}\x0a\x0a#'+'endif\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x0afloa'+'t\x20getShado'+'wSpotClust'+'eredPCF5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC')+('oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a}'+'\x0a#endif\x0a'),AC='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20clu'+'sterWorldT'+'exture;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20lightsTe'+'xture;\x0a\x0a#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x20\x20\x20\x20//\x20TO'+'DO:\x20when\x20V'+'SM\x20shadow\x20'+'is\x20support'+'ed,\x20it\x20nee'+'ds\x20to\x20use\x20'+'sampler2D\x20'+'in\x20webgl2\x0a'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'DShadow\x20sh'+'adowAtlasT'+'exture;\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20CLUSTER'+'_COOKIES\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20cookieAtl'+'asTexture;'+'\x0a#endif\x0a\x0au'+'niform\x20int'+'\x20clusterMa'+'xCells;\x0a\x0a/'+'/\x201.0\x20if\x20c'+'lustered\x20l'+'ighting\x20ca'+'n\x20be\x20skipp'+'ed\x20(0\x20ligh'+'ts\x20in\x20the\x20'+'clusters)\x0a'+'uniform\x20fl'+'oat\x20cluste'+'rSkip;\x0a\x0aun'+'iform\x20vec3'+'\x20clusterCe'+'llsCountBy'+'BoundsSize'+';\x0auniform\x20'+'vec3\x20clust'+'erTextureS'+'ize;\x0aunifo'+'rm\x20vec3\x20cl'+'usterBound'+'sMin;\x0aunif'+'orm\x20vec3\x20c'+'lusterBoun'+'dsDelta;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsDot;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsMax;\x0au'+'niform\x20vec'+'2\x20shadowAt'+'lasParams;'+'\x0a\x0a//\x20struc'+'ture\x20stori'+'ng\x20light\x20p'+'roperties\x20'+'of\x20a\x20clust'+'ered\x20light'+'\x0a//\x20it\x27s\x20s'+('orted\x20to\x20h'+'ave\x20all\x20ve'+'ctors\x20alig'+'ned\x20to\x204\x20f'+'loats\x20to\x20l'+'imit\x20paddi'+'ng\x0astruct\x20'+'ClusterLig'+'htData\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x2032b'+'it\x20of\x20flag'+'s\x0a\x20\x20\x20\x20uint'+'\x20flags;\x0a\x0a\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20siz'+'es\x20/\x20orien'+'tation\x0a\x20\x20\x20'+'\x20vec3\x20half'+'Width;\x0a\x0a\x20\x20'+'\x20\x20bool\x20isS'+'pot;\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20sizes\x20'+'/\x20orientat'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20halfHei'+'ght;\x0a\x0a\x20\x20\x20\x20'+'//\x20light\x20i'+'ndex\x0a\x20\x20\x20\x20i'+'nt\x20lightIn'+'dex;\x0a\x0a\x20\x20\x20\x20'+'//\x20world\x20s'+'pace\x20posit'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20positio'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20shape\x0a\x20\x20'+'\x20\x20uint\x20sha'+'pe;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20direct'+'ion\x20(spot\x20'+'light\x20only'+')\x0a\x20\x20\x20\x20vec3'+'\x20direction'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20foll'+'ow\x20mode\x0a\x20\x20'+'\x20\x20bool\x20fal'+'loffModeLi'+'near;\x0a\x0a\x20\x20\x20'+'\x20//\x20color\x0a'+'\x20\x20\x20\x20vec3\x20c'+'olor;\x0a\x0a\x20\x20\x20'+'\x20//\x200.0\x20if'+'\x20the\x20light'+'\x20doesn\x27t\x20c'+'ast\x20shadow'+'s\x0a\x20\x20\x20\x20floa'+'t\x20shadowIn'+'tensity;\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20vec3\x20om'+'niAtlasVie'+'wport;\x0a\x0a\x20\x20'+'\x20\x20//\x20range'+'\x20of\x20the\x20li'+'ght\x0a\x20\x20\x20\x20fl'+'oat\x20range;'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'hannel\x20mas'+'k\x20-\x20one\x20of'+'\x20the\x20chann'+'els\x20has\x201,'+'\x20the\x20other'+'s\x20are\x200\x0a\x20\x20'+'\x20\x20vec4\x20coo'+'kieChannel'+'Mask;\x0a\x0a\x20\x20\x20'+'\x20//\x20compre'+'ssed\x20biase'+'s,\x20two\x20haf'+'-floats\x20st'+'ored\x20in\x20a\x20'+'float\x0a\x20\x20\x20\x20'+'float\x20bias'+'esData;\x0a\x0a\x20')+('\x20\x20\x20//\x20shad'+'ow\x20bias\x20va'+'lues\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wBias;\x0a\x20\x20\x20'+'\x20float\x20sha'+'dowNormalB'+'ias;\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20f'+'loat\x20angle'+'sData;\x0a\x0a\x20\x20'+'\x20\x20//\x20spot\x20'+'light\x20inne'+'r\x20and\x20oute'+'r\x20angle\x20co'+'sine\x0a\x20\x20\x20\x20f'+'loat\x20inner'+'ConeAngleC'+'os;\x0a\x20\x20\x20\x20fl'+'oat\x20outerC'+'oneAngleCo'+'s;\x0a\x0a\x20\x20\x20\x20//'+'\x20intensity'+'\x20of\x20the\x20co'+'okie\x0a\x20\x20\x20\x20f'+'loat\x20cooki'+'eIntensity'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20mask'+'\x0a\x20\x20\x20\x20//flo'+'at\x20mask;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Dynamic;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Lightmappe'+'d;\x0a};\x0a\x0a//\x20'+'Note:\x20on\x20s'+'ome\x20device'+'s\x20(tested\x20'+'on\x20Pixel\x203'+'A\x20XL),\x20thi'+'s\x20matrix\x20w'+'hen\x20stored'+'\x20inside\x20th'+'e\x20light\x20st'+'ruct\x20has\x20l'+'ower\x20preci'+'sion\x20compa'+'red\x20to\x0a//\x20'+'when\x20store'+'d\x20outside,'+'\x20so\x20we\x20sto'+'re\x20it\x20outs'+'ide\x20to\x20avo'+'id\x20spot\x20sh'+'adow\x20flick'+'ering.\x20Thi'+'s\x20might\x20ne'+'ed\x20to\x20be\x20d'+'one\x20to\x20oth'+'er\x20/\x20all\x20m'+'embers\x0a//\x20'+'of\x20the\x20str'+'ucture\x20if\x20'+'further\x20si'+'milar\x20issu'+'es\x20are\x20obs'+'erved.\x0a\x0a//'+'\x20shadow\x20(s'+'pot\x20light\x20'+'only)\x20/\x20co'+'okie\x20proje'+'ction\x20matr'+'ix\x0amat4\x20li'+'ghtProject'+'ionMatrix;'+'\x0a\x0avec4\x20sam'+'pleLightTe'+'xtureF(con'+'st\x20Cluster'+'LightData\x20'+'clusterLig'+'htData,\x20in'+'t\x20index)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20texelFet'+'ch(lightsT'+'exture,\x20iv'+'ec2(index,'+'\x20clusterLi'+'ghtData.li'+'ghtIndex),'+'\x200);\x0a}\x0a\x0avo'+'id\x20decodeC'+'lusterLigh')+('tCore(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData,\x20flo'+'at\x20lightIn'+'dex)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20index\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.li'+'ghtIndex\x20='+'\x20int(light'+'Index);\x0a\x0a\x20'+'\x20\x20\x20//\x20samp'+'le\x20data\x20en'+'coding\x20hal'+'f-float\x20va'+'lues\x20into\x20'+'32bit\x20uint'+'s\x0a\x20\x20\x20\x20vec4'+'\x20halfData\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_COL'+'OR_ANGLES_'+'BIAS});\x0a\x0a\x20'+'\x20\x20\x20//\x20stor'+'e\x20floats\x20w'+'e\x20decode\x20l'+'ater\x20as\x20ne'+'eded\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.angl'+'esData\x20=\x20h'+'alfData.z;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.biasesDa'+'ta\x20=\x20halfD'+'ata.w;\x0a\x0a\x20\x20'+'\x20\x20//\x20decom'+'press\x20colo'+'r\x20half-flo'+'ats\x0a\x20\x20\x20\x20ve'+'c2\x20colorRG'+'\x20=\x20unpackH'+'alf2x16(fl'+'oatBitsToU'+'int(halfDa'+'ta.x));\x0a\x20\x20'+'\x20\x20vec2\x20col'+'orB_\x20=\x20unp'+'ackHalf2x1'+'6(floatBit'+'sToUint(ha'+'lfData.y))'+';\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.color\x20='+'\x20vec3(colo'+'rRG,\x20color'+'B_.x)\x20*\x20{L'+'IGHT_COLOR'+'_DIVIDER};'+'\x0a\x0a\x20\x20\x20\x20//\x20p'+'osition\x20an'+'d\x20range,\x20f'+'ull\x20floats'+'\x0a\x20\x20\x20\x20vec4\x20'+'lightPosRa'+'nge\x20=\x20samp'+'leLightTex'+'tureF(clus'+'terLightDa'+'ta,\x20{CLUST'+'ER_TEXTURE'+'_POSITION_'+'RANGE});\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'position\x20='+'\x20lightPosR'+'ange.xyz;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.range\x20=\x20l'+'ightPosRan'+'ge.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20d'+'irection\x20&'+'\x20flags\x20dat'+'a\x0a\x20\x20\x20\x20vec4'+'\x20lightDir_'+'Flags\x20=\x20sa'+'mpleLightT'+'extureF(cl')+('usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_DIRECTI'+'ON_FLAGS})'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'spot\x20light'+'\x20direction'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.directio'+'n\x20=\x20lightD'+'ir_Flags.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x2032bit\x20fl'+'ags\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20floatBi'+'tsToUint(l'+'ightDir_Fl'+'ags.w);\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sSpot\x20=\x20(c'+'lusterLigh'+'tData.flag'+'s\x20&\x20(1u\x20<<'+'\x2030u))\x20!=\x20'+'0u;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.shape'+'\x20=\x20(cluste'+'rLightData'+'.flags\x20>>\x20'+'28u)\x20&\x200x3'+'u;\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.fallof'+'fModeLinea'+'r\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2027u'+'))\x20==\x200u;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.shadowInt'+'ensity\x20=\x20f'+'loat((clus'+'terLightDa'+'ta.flags\x20>'+'>\x200u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eIntensity'+'\x20=\x20float(('+'clusterLig'+'htData.fla'+'gs\x20>>\x208u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sDynamic\x20='+'\x20(clusterL'+'ightData.f'+'lags\x20&\x20(1u'+'\x20<<\x2022u))\x20'+'!=\x200u;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.is'+'Lightmappe'+'d\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2021u'+'))\x20!=\x200u;\x0a'+'}\x0a\x0avoid\x20de'+'codeCluste'+'rLightSpot'+'(inout\x20Clu'+'sterLightD'+'ata\x20cluste'+'rLightData'+')\x20{\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20cos\x20ang'+'les\x0a\x20\x20\x20\x20ve'+'c2\x20angles\x20'+'=\x20unpackHa'+'lf2x16(flo'+'atBitsToUi'+'nt(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight')+('Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0av'+'oid\x20decode'+'ClusterLig'+'htOmniAtla'+'sViewport('+'inout\x20Clus'+'terLightDa'+'ta\x20cluster'+'LightData)'+'\x20{\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.omniAt'+'lasViewpor'+'t\x20=\x20sample'+'LightTextu'+'reF(cluste'+'rLightData'+',\x20{CLUSTER'+'_TEXTURE_P'+'ROJ_MAT_0}'+').xyz;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtAreaDat'+'a(inout\x20Cl'+'usterLight'+'Data\x20clust'+'erLightDat'+'a)\x20{\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.half'+'Width\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_AREA_DA'+'TA_WIDTH})'+'.xyz;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.hal'+'fHeight\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData,\x20{C'+'LUSTER_TEX'+'TURE_AREA_'+'DATA_HEIGH'+'T}).xyz;\x0a}'+'\x0a\x0avoid\x20dec'+'odeCluster'+'LightProje'+'ctionMatri'+'xData(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20m0\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData,\x20{CL'+'USTER_TEXT'+'URE_PROJ_M'+'AT_0});\x0a\x20\x20'+'\x20\x20vec4\x20m1\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_PRO'+'J_MAT_1});'+'\x0a\x20\x20\x20\x20vec4\x20'+'m2\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a,\x20{CLUSTE'+'R_TEXTURE_'+'PROJ_MAT_2'+'});\x0a\x20\x20\x20\x20ve'+'c4\x20m3\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight')+('Data,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4('+'m0,\x20m1,\x20m2'+',\x20m3);\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtShadowD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20//\x20s'+'hadow\x20bias'+'es\x0a\x20\x20\x20\x20vec'+'2\x20biases\x20='+'\x20unpackHal'+'f2x16(floa'+'tBitsToUin'+'t(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20extra'+'ct\x20channel'+'\x20mask\x20from'+'\x20flags\x0a\x20\x20\x20'+'\x20uint\x20cook'+'ieFlags\x20=\x20'+'(clusterLi'+'ghtData.fl'+'ags\x20>>\x2023u'+')\x20&\x200x0Fu;'+'\x20\x20//\x204bits'+',\x20each\x20bit'+'\x20enables\x20a'+'\x20channel\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'cookieChan'+'nelMask\x20=\x20'+'vec4(uvec4'+'(cookieFla'+'gs)\x20&\x20uvec'+'4(1u,\x202u,\x20'+'4u,\x208u));\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.cookieCha'+'nnelMask\x20='+'\x20step(1.0,'+'\x20clusterLi'+'ghtData.co'+'okieChanne'+'lMask);\x20\x20/'+'/\x20Normaliz'+'e\x20to\x200.0\x20o'+'r\x201.0\x0a}\x0a\x0av'+'oid\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20Cluster'+'LightData\x20'+'light,\x20\x0a\x20\x20'+'\x20\x20vec3\x20wor'+'ldNormal,\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'viewDir,\x20\x0a'+'\x20\x20\x20\x20vec3\x20r'+'eflectionD'+'ir,\x0a#if\x20de'+'fined(LIT_'+'CLEARCOAT)'+'\x0a\x20\x20\x20\x20vec3\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20')+('\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20mat3\x20tb'+'n,\x20\x0a#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20vec'+'3\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20vec3\x20cl'+'earcoat_wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20float'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20float\x20sh'+'een_gloss,'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce_intensi'+'ty\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20vec'+'3(1.0);\x0a\x20\x20'+'\x20\x20float\x20di'+'ffuseAtten'+'uation\x20=\x201'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20fallof'+'fAttenuati'+'on\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20omn'+'i\x20part\x20of\x20'+'the\x20light\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ightDirW\x20='+'\x20evalOmniL'+'ight(light'+'.position)'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'ormW\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20')+('else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fall'+'offAttenua'+'tion\x20=\x20get'+'FalloffLin'+'ear(light.'+'range,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20getFa'+'lloffInvSq'+'uared(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_AREALIGH'+'TS\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shape\x20!='+'\x20{LIGHTSHA'+'PE_PUNCTUA'+'L})\x20{\x20//\x20a'+'rea\x20light\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20hand'+'le\x20light\x20s'+'hape\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20diffuse'+'Attenuatio'+'n\x20=\x20getRec'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirW,\x20lig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'DISK})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getD'+'iskLightDi'+'ffuse(worl'+'dNormal,\x20v'+'iewDir,\x20li'+'ghtDirW,\x20l'+'ightDirNor'+'mW)\x20*\x2016.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20{\x20//\x20sphe'+'re\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getSphereL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20g'+'etLightDif'+'fuse(world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+');\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spot'+'\x20light\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtSpot(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20*=\x20'+'getSpotEff'+'ect(light.'+'direction,'+'\x20light.inn'+'erConeAngl'+'eCos,\x20ligh'+'t.outerCon'+'eAngleCos,'+'\x20lightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_COOK'+'IES)\x20||\x20de'+'fined(CLUS'+'TER_SHADOW'+'S)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20shadow'+'\x20/\x20cookie\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shadowIn'+'tensity\x20>\x20'+'0.0\x20||\x20lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'ared\x20shado'+'w\x20/\x20cookie'+'\x20data\x20depe'+'nds\x20on\x20lig'+'ht\x20type\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightOmniAt'+'lasViewpor'+'t(light);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20shadowTex'+'tureResolu'+'tion\x20=\x20sha'+'dowAtlasPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadowEdge'+'Pixels\x20=\x20s'+'hadowAtlas'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_COOKIES\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'cookie\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20de'+'codeCluste'+'rLightCook'+'ieData(lig'+'ht);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.isSp'+'ot)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'cookieAtte'+'nuation\x20=\x20'+'getCookie2'+'DClustered'+'(TEXTURE_P'+'ASS(cookie'+'AtlasTextu'+'re),\x20light'+'Projection'+'Matrix,\x20vP'+'ositionW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20cookieAt'+'tenuation\x20'+'=\x20getCooki'+'eCubeClust'+'ered(TEXTU'+'RE_PASS(co'+'okieAtlasT'+'exture),\x20l'+'ightDirW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask,\x20sh'+'adowTextur'+'eResolutio'+'n,\x20shadowE'+'dgePixels,'+'\x20light.omn'+'iAtlasView'+'port);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20shadow\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shadow'+'Intensity\x20'+'>\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d')+('ecodeClust'+'erLightSha'+'dowData(li'+'ght);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20shadowPa'+'rams\x20=\x20vec'+'4(shadowTe'+'xtureResol'+'ution,\x20lig'+'ht.shadowN'+'ormalBias,'+'\x20light.sha'+'dowBias,\x201'+'.0\x20/\x20light'+'.range);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'isSpot)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ot\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'hadowCoord'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat'+'rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F1)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CF1(SHADOW'+'MAP_PASS(s'+'hadowAtlas'+'Texture),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20de'+'fined(CLUS'+'TER_SHADOW'+'_TYPE_PCF3'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_PASS(sha'+'dowAtlasTe'+'xture),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#elif\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF5('+'SHADOWMAP_'+'PASS(shado'+'wAtlasText'+'ure),\x20shad'+'owCoord,\x20s'+'hadowParam')+('s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCSS)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20shadow\x20='+'\x20getShadow'+'SpotCluste'+'redPCSS(SH'+'ADOWMAP_PA'+'SS(shadowA'+'tlasTextur'+'e),\x20shadow'+'Coord,\x20sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20m'+'ix(1.0,\x20sh'+'adow,\x20ligh'+'t.shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20om'+'ni\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20d'+'ir\x20=\x20norma'+'lOffsetPoi'+'ntShadow(s'+'hadowParam'+'s,\x20light.p'+'osition,\x20l'+'ightDirW,\x20'+'lightDirNo'+'rmW,\x20geome'+'tricNormal'+');\x20\x20//\x20nor'+'malBias\x20ad'+'justed\x20for'+'\x20distance\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_SHADO'+'W_TYPE_PCF'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20sha'+'dow\x20=\x20getS'+'hadowOmniC'+'lusteredPC'+'F1(SHADOWM'+'AP_PASS(sh'+'adowAtlasT'+'exture),\x20s'+'hadowParam'+'s,\x20light.o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20dir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#eli'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF3)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadowOm'+'niClustere'+'dPCF3(SHAD'+'OWMAP_PASS'+'(shadowAtl'+'asTexture)'+',\x20shadowPa'+'rams,\x20ligh'+'t.omniAtla'+'sViewport,')+('\x20shadowEdg'+'ePixels,\x20d'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20shadow\x20'+'=\x20getShado'+'wOmniClust'+'eredPCF5(S'+'HADOWMAP_P'+'ASS(shadow'+'AtlasTextu'+'re),\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20*=\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20areaDi'+'ffuse\x20=\x20(d'+'iffuseAtte'+'nuation\x20*\x20'+'falloffAtt'+'enuation)\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaDiffuse\x20'+'=\x20mix(area'+'Diffuse,\x20v'+'ec3(0),\x20dL'+'TCSpecFres'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20dif'+'fuse\x20-\x20it\x20'+'does\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20')+('into\x20specu'+'lar\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20a'+'reaDiffuse'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20and\x20clear'+'\x20coat\x20are\x20'+'material\x20s'+'ettings\x20an'+'d\x20get\x20incl'+'uded\x20by\x20a\x20'+'define\x20bas'+'ed\x20on\x20the\x20'+'material\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20specular'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20areaLig'+'htSpecular'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'RECT})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecular\x20=\x20g'+'etRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20area'+'LightSpecu'+'lar\x20=\x20getD'+'iskLightSp'+'ecular(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x20//\x20sp'+'here\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getSp'+'hereLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp'+'ecFres\x20*\x20a'+'reaLightSp'+'ecular\x20*\x20f'+'alloffAtte'+'nuation\x20*\x20'+'light.colo'+'r\x20*\x20cookie'+'Attenuatio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x20clear'+'\x20coat\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20areaLigh'+'tSpecularC')+('C;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shape\x20'+'==\x20{LIGHTS'+'HAPE_RECT}'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getRectLig'+'htSpecular'+'(clearcoat'+'_worldNorm'+'al,\x20viewDi'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(light'+'.shape\x20==\x20'+'{LIGHTSHAP'+'E_DISK})\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'arCC\x20=\x20get'+'DiskLightS'+'pecular(cl'+'earcoat_wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x20'+'//\x20sphere\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaLi'+'ghtSpecula'+'rCC\x20=\x20getS'+'phereLight'+'Specular(c'+'learcoat_w'+'orldNormal'+',\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20+=\x20ccLTCS'+'pecFres\x20*\x20'+'areaLightS'+'pecularCC\x20'+'*\x20falloffA'+'ttenuation'+'\x20*\x20light.c'+'olor\x20\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20{\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'unctualDif'+'fuse\x20=\x20fal'+'loffAttenu'+'ation\x20*\x20li'+'ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'CLUSTER_AR'+'EALIGHTS)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20punctual')+('Diffuse\x20=\x20'+'mix(punctu'+'alDiffuse,'+'\x20vec3(0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20punctu'+'alDiffuse;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20and\x20cle'+'ar\x20coat\x20ar'+'e\x20material'+'\x20settings\x20'+'and\x20get\x20in'+'cluded\x20by\x20'+'a\x20define\x20b'+'ased\x20on\x20th'+'e\x20material'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20halfD'+'ir\x20=\x20norma'+'lize(-ligh'+'tDirNormW\x20'+'+\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR_FRESNEL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htSpecular'+'(halfDir,\x20'+'reflection'+'Dir,\x20world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation\x20*'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'viewDir,\x20h'+'alfDir),\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descence_i'+'ntensity\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecular('+'halfDir,\x20c'+'learcoatRe'+'flectionDi'+'r,\x20clearco'+'at_worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'clearcoat_'+'gloss,\x20tbn'+')\x20*\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation\x20*\x20g'+'etFresnelC'+'C(dot(view'+'Dir,\x20halfD'+'ir));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20getLi'+'ghtSpecula'+'r(halfDir,'+'\x20clearcoat'+'Reflection'+'Dir,\x20clear'+'coat_world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20clearcoa'+'t_gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HEEN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec')+('ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'ir,\x20worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNormW,'+'\x20sheen_glo'+'ss)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20Wri'+'te\x20to\x20glob'+'al\x20attenua'+'tion\x20value'+'s\x20(for\x20lig'+'htmapper)\x0a'+'\x20\x20\x20\x20dAtten'+'\x20=\x20falloff'+'Attenuatio'+'n;\x0a\x20\x20\x20\x20dLi'+'ghtDirNorm'+'W\x20=\x20lightD'+'irNormW;\x0a}'+'\x0a\x0avoid\x20eva'+'luateClust'+'erLight(\x0a\x20'+'\x20\x20\x20float\x20l'+'ightIndex,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20worldNorm'+'al,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20viewDi'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20reflect'+'ionDir,\x20\x0a#'+'if\x20defined'+'(LIT_CLEAR'+'COAT)\x0a\x20\x20\x20\x20'+'vec3\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'float\x20glos'+'s,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20specula'+'rity,\x20\x0a\x20\x20\x20'+'\x20vec3\x20geom'+'etricNorma'+'l,\x20\x0a\x20\x20\x20\x20ma'+'t3\x20tbn,\x20\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20ve'+'c3\x20clearco'+'at_worldNo'+'rmal,\x0a\x20\x20\x20\x20'+'float\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20flo'+'at\x20sheen_g'+'loss,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escence_in'+'tensity\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'decode\x20cor'+'e\x20light\x20da'+'ta\x20from\x20te'+'xtures\x0a\x20\x20\x20'+'\x20ClusterLi'+'ghtData\x20cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(cluster'+'LightData,'+'\x20lightInde'+'x);\x0a\x0a\x20\x20\x20\x20/'+'/\x20evaluate'+'\x20light\x20if\x20'+'it\x20uses\x20ac'+'cepted\x20lig'+'ht\x20mask\x0a\x20\x20'+'\x20\x20#ifdef\x20C')+('LUSTER_MES'+'H_DYNAMIC_'+'LIGHTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20bool\x20'+'acceptLigh'+'tMask\x20=\x20cl'+'usterLight'+'Data.isDyn'+'amic;\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20bool\x20a'+'cceptLight'+'Mask\x20=\x20clu'+'sterLightD'+'ata.isLigh'+'tmapped;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20if\x20(a'+'cceptLight'+'Mask)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clusterLi'+'ghtData,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20worldNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vi'+'ewDir,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'reflection'+'Dir,\x20\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x20\x0a'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_worldNorm'+'al,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sheen'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a}\x0a\x0avoid'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20reflecti'+'onDir,\x20\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20v'+'ec3\x20clearc'+'oatReflect'+'ionDir,\x0a#e'+'ndif\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20mat'+'3\x20tbn,\x20\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a#end')+('if\x0a\x20\x20\x20\x20vec'+'3\x20clearcoa'+'t_worldNor'+'mal,\x0a\x20\x20\x20\x20f'+'loat\x20clear'+'coat_gloss'+',\x0a\x20\x20\x20\x20floa'+'t\x20sheen_gl'+'oss,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scence_int'+'ensity\x0a)\x20{'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'kip\x20lights'+'\x20if\x20no\x20lig'+'hts\x20at\x20all'+'\x0a\x20\x20\x20\x20if\x20(c'+'lusterSkip'+'\x20>\x200.5)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20positi'+'on\x20to\x203d\x20i'+'nteger\x20cel'+'l\x20cordinat'+'es\x20in\x20the\x20'+'cluster\x20st'+'ructure\x0a\x20\x20'+'\x20\x20vec3\x20cel'+'lCoords\x20=\x20'+'floor((vPo'+'sitionW\x20-\x20'+'clusterBou'+'ndsMin)\x20*\x20'+'clusterCel'+'lsCountByB'+'oundsSize)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'no\x20lightin'+'g\x20when\x20cel'+'l\x20coordina'+'te\x20is\x20out\x20'+'of\x20range\x0a\x20'+'\x20\x20\x20if\x20(!(a'+'ny(lessTha'+'n(cellCoor'+'ds,\x20vec3(0'+'.0)))\x20||\x20a'+'ny(greater'+'ThanEqual('+'cellCoords'+',\x20clusterC'+'ellsMax)))'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cell'+'\x20index\x20(ma'+'pping\x20from'+'\x203d\x20cell\x20c'+'oordinates'+'\x20to\x20linear'+'\x20memory)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20cellInd'+'ex\x20=\x20dot(c'+'lusterCell'+'sDot,\x20cell'+'Coords);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20convert\x20c'+'ell\x20index\x20'+'to\x20uv\x20coor'+'dinates\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20clusterV'+'\x20=\x20floor(c'+'ellIndex\x20*'+'\x20clusterTe'+'xtureSize.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20cl'+'usterU\x20=\x20c'+'ellIndex\x20-'+'\x20(clusterV'+'\x20*\x20cluster'+'TextureSiz'+'e.x);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20lo'+'op\x20over\x20ma'+'ximum\x20numb'+'er\x20of\x20ligh'+'t\x20cells\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20light'+'CellIndex\x20'+'=\x200;\x20light'+'CellIndex\x20'+'<\x20clusterM'+'axCells;\x20l'+'ightCellIn')+('dex++)\x20{\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20using'+'\x20a\x20single\x20'+'channel\x20te'+'xture\x20with'+'\x20data\x20in\x20r'+'ed\x20channel'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20l'+'ightIndex\x20'+'=\x20texelFet'+'ch(cluster'+'WorldTextu'+'re,\x20ivec2('+'int(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20clusterV'+'),\x200).x;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'tIndex\x20<=\x20'+'0.0)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20break;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20evaluateC'+'lusterLigh'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightIndex\x20'+'*\x20255.0,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel,\x0a#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20cl'+'earcoat_gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sheen_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),bC='\x0avec3\x20comb'+'ineColor(v'+'ec3\x20albedo'+',\x20vec3\x20she'+'enSpecular'+'ity,\x20float'+'\x20clearcoat'+'Specularit'+'y)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20ret\x20=\x20'+'vec3(0);\x0a#'+'ifdef\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20ret\x20'+'+=\x20(dDiffu'+'seLight\x20-\x20'+'light_glob'+'alAmbient)'+'\x20*\x20albedo\x20'+'+\x20material'+'_ambient\x20*'+'\x20light_glo'+'balAmbient'+';\x0a#else\x0a\x20\x20'+'\x20\x20ret\x20+=\x20a'+'lbedo\x20*\x20dD'+'iffuseLigh'+'t;\x0a#endif\x0a'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20ret\x20+='+'\x20dSpecular'+'Light;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_REFLE'+'CTIONS\x0a\x20\x20\x20'+'\x20ret\x20+=\x20dR'+'eflection.'+'rgb\x20*\x20dRef'+'lection.a;'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'float\x20shee'+'nScaling\x20='+'\x201.0\x20-\x20max'+'(max(sheen'+'Specularit'+'y.r,\x20sheen'+'Specularit'+'y.g),\x20shee'+'nSpeculari'+'ty.b)\x20*\x200.'+'157;\x0a\x20\x20\x20\x20r'+'et\x20=\x20ret\x20*'+'\x20sheenScal'+'ing\x20+\x20(sSp'+'ecularLigh'+'t\x20+\x20sRefle'+'ction.rgb)'+'\x20*\x20sheenSp'+'ecularity;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20float\x20c'+'learCoatSc'+'aling\x20=\x201.'+'0\x20-\x20ccFres'+'nel\x20*\x20clea'+'rcoatSpecu'+'larity;\x0a\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20clearC'+'oatScaling'+'\x20+\x20(ccSpec'+'ularLight\x20'+'+\x20ccReflec'+'tion)\x20*\x20cl'+'earcoatSpe'+'cularity;\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20return\x20r'+'et;\x0a}\x0a',CC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blitT'+'exture;\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20texture'+'2D(blitTex'+'ture,\x20uv0)'+';\x0a\x20\x20\x20\x20}\x0a',PC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'erCube\x20bli'+'tTexture;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20inv'+'ViewProj;\x0a'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20vec4('+'uv0\x20*\x202.0\x20'+'-\x201.0,\x200.5'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20worldPos\x20'+'=\x20invViewP'+'roj\x20*\x20proj'+'Pos;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20te'+'xtureCube('+'blitTextur'+'e,\x20worldPo'+'s.xyz);\x0a\x20\x20'+'\x20\x20}\x0a',MC='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uv0'+'.y\x20=\x201.0\x20-'+'\x20uv0.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20}\x0a',IC='\x0a//\x20light\x20'+'cookie\x20fun'+'ctionality'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0avec4'+'\x20getCookie'+'2D(sampler'+'2D\x20tex,\x20ma'+'t4\x20transfo'+'rm,\x20float\x20'+'intensity)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20projPos\x20'+'=\x20transfor'+'m\x20*\x20vec4(v'+'PositionW,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'y\x20/=\x20projP'+'os.w;\x0a\x20\x20\x20\x20'+'return\x20mix'+'(vec4(1.0)'+',\x20texture2'+'D(tex,\x20pro'+'jPos.xy),\x20'+'intensity)'+';\x0a}\x0a\x0avec4\x20'+'getCookie2'+'DClip(samp'+'ler2D\x20tex,'+'\x20mat4\x20tran'+'sform,\x20flo'+'at\x20intensi'+'ty)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20trans'+'form\x20*\x20vec'+'4(vPositio'+'nW,\x201.0);\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20/=\x20pr'+'ojPos.w;\x0a\x20'+'\x20\x20\x20if\x20(pro'+'jPos.x\x20<\x200'+'.0\x20||\x20proj'+'Pos.x\x20>\x201.'+'0\x20||\x20projP'+'os.y\x20<\x200.0'+'\x20||\x20projPo'+'s.y\x20>\x201.0\x20'+'||\x20projPos'+'.z\x20<\x200.0)\x20'+'return\x20vec'+'4(0.0);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(vec4(1.'+'0),\x20textur'+'e2D(tex,\x20p'+'rojPos.xy)'+',\x20intensit'+'y);\x0a}\x0a\x0avec'+'4\x20getCooki'+'e2DXform(s'+'ampler2D\x20t'+'ex,\x20mat4\x20t'+'ransform,\x20'+'float\x20inte'+'nsity,\x20vec'+'4\x20cookieMa'+'trix,\x20vec2'+'\x20cookieOff'+'set)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20proj'+'Pos\x20=\x20tran'+'sform\x20*\x20ve'+'c4(vPositi'+'onW,\x201.0);'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20/=\x20p'+'rojPos.w;\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20+=\x20co'+'okieOffset'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookie2D'+'ClipXform('+('sampler2D\x20'+'tex,\x20mat4\x20'+'transform,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieM'+'atrix,\x20vec'+'2\x20cookieOf'+'fset)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'jPos\x20=\x20tra'+'nsform\x20*\x20v'+'ec4(vPosit'+'ionW,\x201.0)'+';\x0a\x20\x20\x20\x20proj'+'Pos.xy\x20/=\x20'+'projPos.w;'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20+=\x20c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20if\x20'+'(projPos.x'+'\x20<\x200.0\x20||\x20'+'projPos.x\x20'+'>\x201.0\x20||\x20p'+'rojPos.y\x20<'+'\x200.0\x20||\x20pr'+'ojPos.y\x20>\x20'+'1.0\x20||\x20pro'+'jPos.z\x20<\x200'+'.0)\x20return'+'\x20vec4(0.0)'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookieCu'+'be(sampler'+'Cube\x20tex,\x20'+'mat4\x20trans'+'form,\x20floa'+'t\x20intensit'+'y)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20mix('+'vec4(1.0),'+'\x20textureCu'+'be(tex,\x20dL'+'ightDirNor'+'mW\x20*\x20mat3('+'transform)'+'),\x20intensi'+'ty);\x0a}\x0a'),DC='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20envBoxM'+'in;\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20envBoxMax'+';\x0a#endif\x0a\x0a'+'vec3\x20cubeM'+'apProject('+'vec3\x20nrdir'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_CUB'+'EMAP_PROJE'+'CTION\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20c'+'ubeMapRota'+'te(nrdir);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20LIT_CUBEM'+'AP_PROJECT'+'ION\x20==\x20BOX'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'nrdir\x20=\x20cu'+'beMapRotat'+'e(nrdir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20rbmax\x20'+'=\x20(envBoxM'+'ax\x20-\x20vPosi'+'tionW)\x20/\x20n'+'rdir;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20r'+'bmin\x20=\x20(en'+'vBoxMin\x20-\x20'+'vPositionW'+')\x20/\x20nrdir;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20rbmin'+'max\x20=\x20mix('+'rbmin,\x20rbm'+'ax,\x20vec3(g'+'reaterThan'+'(nrdir,\x20ve'+'c3(0.0))))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20fa\x20='+'\x20min(min(r'+'bminmax.x,'+'\x20rbminmax.'+'y),\x20rbminm'+'ax.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20posonbox\x20'+'=\x20vPositio'+'nW\x20+\x20nrdir'+'\x20*\x20fa;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envBoxPos\x20'+'=\x20(envBoxM'+'in\x20+\x20envBo'+'xMax)\x20*\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20no'+'rmalize(po'+'sonbox\x20-\x20e'+'nvBoxPos);'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',LC='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20mat3\x20cu'+'beMapRotat'+'ionMatrix;'+'\x0a#endif\x0a\x0av'+'ec3\x20cubeMa'+'pRotate(ve'+'c3\x20refDir)'+'\x20{\x0a#ifdef\x20'+'CUBEMAP_RO'+'TATION\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'#else\x0a\x20\x20\x20\x20'+'return\x20ref'+'Dir;\x0a#endi'+'f\x0a}\x0a',RC='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0agl_FragCo'+'lor\x20=\x20vec4'+'(litArgs_a'+'lbedo\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_WORLD'+'_NORMAL_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(litArgs'+'_worldNorm'+'al\x20*\x200.5\x20+'+'\x200.5,\x201.0)'+';\x0a#endif\x0a\x0a'+'#ifdef\x20DEB'+'UG_OPACITY'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(vec3'+'(litArgs_o'+'pacity)\x20,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_SPE'+'CULARITY_P'+'ASS\x0agl_Fra'+'gColor\x20=\x20v'+'ec4(litArg'+'s_specular'+'ity,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_GLOSS_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(vec3(li'+'tArgs_glos'+'s)\x20,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_METALNES'+'S_PASS\x0agl_'+'FragColor\x20'+'=\x20vec4(vec'+'3(litArgs_'+'metalness)'+'\x20,\x201.0);\x0a#'+'endif\x0a\x0a#if'+'def\x20DEBUG_'+'AO_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ve'+'c3(litArgs'+'_ao)\x20,\x201.0'+');\x0a#endif\x0a'+'\x0a#ifdef\x20DE'+'BUG_EMISSI'+'ON_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ga'+'mmaCorrect'+'Output(lit'+'Args_emiss'+'ion),\x201.0)'+';\x0a#endif\x0a',OC='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0ali'+'tArgs_albe'+'do\x20=\x20vec3('+'0.5);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_UV0'+'_PASS\x0a#ifd'+'ef\x20VARYING'+'_VUV0\x0alitA'+'rgs_albedo'+'\x20=\x20vec3(vU'+'v0,\x200);\x0a#e'+'lse\x0alitArg'+'s_albedo\x20='+'\x20vec3(0);\x0a'+'#endif\x0a#en'+'dif\x0a',FC='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0avec3\x20'+'decodeLine'+'ar(vec4\x20ra'+'w)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw.'+'rgb;\x0a}\x0a\x0afl'+'oat\x20decode'+'Gamma(floa'+'t\x20raw)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'pow(raw,\x202'+'.2);\x0a}\x0a\x0ave'+'c3\x20decodeG'+'amma(vec3\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w(raw,\x20vec'+'3(2.2));\x0a}'+'\x0a\x0avec3\x20dec'+'odeGamma(v'+'ec4\x20raw)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(raw.'+'xyz,\x20vec3('+'2.2));\x0a}\x0a\x0a'+'vec3\x20decod'+'eRGBM(vec4'+'\x20raw)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20col'+'or\x20=\x20(8.0\x20'+'*\x20raw.a)\x20*'+'\x20raw.rgb;\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0av'+'ec3\x20decode'+'RGBP(vec4\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20colo'+'r\x20=\x20raw.rg'+'b\x20*\x20(-raw.'+'a\x20*\x207.0\x20+\x20'+'8.0);\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBE'+'(vec4\x20raw)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(raw.a\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec3(0.0'+',\x200.0,\x200.0'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20raw.xyz\x20*'+'\x20pow(2.0,\x20'+'raw.w\x20*\x2025'+'5.0\x20-\x20128.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0avec4\x20pa'+'ssThrough('+'vec4\x20raw)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20raw;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'Z(vec4\x20nma'+'p)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20nmap'+'.xyz\x20*\x202.0'+'\x20-\x201.0;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'(vec4\x20nmap'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20normal;'+'\x0a\x20\x20\x20\x20norma'+'l.xy\x20=\x20nma'+'p.wy\x20*\x202.0'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20normal.z'+'\x20=\x20sqrt(1.'+'0\x20-\x20clamp('+'dot(normal'+'.xy,\x20norma'+'l.xy),\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20return\x20'+'normal;\x0a}\x0a'+'\x0a#endif\x0a',NC='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0avec3\x20'+'detailMode'+'_mul(vec3\x20'+'c1,\x20vec3\x20c'+'2)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20c1\x20*'+'\x20c2;\x0a}\x0a\x0ave'+'c3\x20detailM'+'ode_add(ve'+'c3\x20c1,\x20vec'+'3\x20c2)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'1\x20+\x20c2;\x0a}\x0a'+'\x0a//\x20https:'+'//en.wikip'+'edia.org/w'+'iki/Blend_'+'modes#Scre'+'en\x0avec3\x20de'+'tailMode_s'+'creen(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x201.0'+'\x20-\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2);\x0a}\x0a\x0a/'+'/\x20https://'+'en.wikiped'+'ia.org/wik'+'i/Blend_mo'+'des#Overla'+'y\x0avec3\x20det'+'ailMode_ov'+'erlay(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(1.0\x20-\x202.0'+'\x20*\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2),\x202.0\x20'+'*\x20c1\x20*\x20c2,'+'\x20step(c1,\x20'+'vec3(0.5))'+');\x0a}\x0a\x0avec3'+'\x20detailMod'+'e_min(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20min'+'(c1,\x20c2);\x0a'+'}\x0a\x0avec3\x20de'+'tailMode_m'+'ax(vec3\x20c1'+',\x20vec3\x20c2)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20max(c1'+',\x20c2);\x0a}\x0a\x0a'+'#endif\x0a',kC='\x0auniform\x20v'+'ec3\x20materi'+'al_diffuse'+';\x0a\x0a#ifdef\x20'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'detailMode'+'sPS\x22\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20mate'+'rial_diffu'+'se.rgb;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_DIFFUS'+'E_TEXTURE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20albedoT'+'exture\x20=\x20{'+'STD_DIFFUS'+'E_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_DIF'+'FUSE_TEXTU'+'RE_NAME},\x20'+'{STD_DIFFU'+'SE_TEXTURE'+'_UV},\x20text'+'ureBias)).'+'{STD_DIFFU'+'SE_TEXTURE'+'_CHANNEL};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSEDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'albedoDeta'+'il\x20=\x20{STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_DECODE}('+'texture2DB'+'ias({STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'DETAIL_TEX'+'TURE_UV},\x20'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20*=\x20albe'+'doTexture;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSE_VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dAlbedo\x20*'+'=\x20gammaCor'+'rectInput('+'saturate(v'+'VertexColo'+'r.{STD_DIF'+'FUSE_VERTE'+'X_CHANNEL}'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',UC='\x0auniform\x20v'+'ec3\x20materi'+'al_emissiv'+'e;\x0auniform'+'\x20float\x20mat'+'erial_emis'+'siveIntens'+'ity;\x0a\x0avoid'+'\x20getEmissi'+'on()\x20{\x0a\x20\x20\x20'+'\x20dEmission'+'\x20=\x20materia'+'l_emissive'+'\x20*\x20materia'+'l_emissive'+'Intensity;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_TEXT'+'URE\x0a\x20\x20\x20\x20dE'+'mission\x20*='+'\x20{STD_EMIS'+'SIVE_TEXTU'+'RE_DECODE}'+'(texture2D'+'Bias({STD_'+'EMISSIVE_T'+'EXTURE_NAM'+'E},\x20{STD_E'+'MISSIVE_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'EMISSIVE_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_EMISSI'+'VE_VERTEX\x0a'+'\x20\x20\x20\x20dEmiss'+'ion\x20*=\x20gam'+'maCorrectI'+'nput(satur'+'ate(vVerte'+'xColor.{ST'+'D_EMISSIVE'+'_VERTEX_CH'+'ANNEL}));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a',BC='\x0avec4\x20enco'+'deLinear(v'+'ec3\x20source'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'source,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeGa'+'mma(vec3\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec4(pow(s'+'ource\x20+\x200.'+'0000001,\x20v'+'ec3(1.0\x20/\x20'+'2.2)),\x201.0'+');\x0a}\x0a\x0avec4'+'\x20encodeRGB'+'M(vec3\x20sou'+'rce)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20result;'+'\x0a\x20\x20\x20\x20resul'+'t.rgb\x20=\x20po'+'w(source.r'+'gb,\x20vec3(0'+'.5));\x0a\x20\x20\x20\x20'+'result.rgb'+'\x20*=\x201.0\x20/\x20'+'8.0;\x0a\x0a\x20\x20\x20\x20'+'result.a\x20='+'\x20saturate('+'\x20max(\x20max('+'\x20result.r,'+'\x20result.g\x20'+'),\x20max(\x20re'+'sult.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20)\x20);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20ceil(res'+'ult.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x0a\x20\x20\x20\x20r'+'esult.rgb\x20'+'/=\x20result.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0avec4\x20'+'encodeRGBP'+'(vec3\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'//\x20convert'+'\x20incoming\x20'+'linear\x20to\x20'+'gamma(ish)'+'\x0a\x20\x20\x20\x20vec3\x20'+'gamma\x20=\x20po'+'w(source,\x20'+'vec3(0.5))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'the\x20maximu'+'m\x20componen'+'t\x20clamped\x20'+'to\x201..8\x0a\x20\x20'+'\x20\x20float\x20ma'+'xVal\x20=\x20min'+'(8.0,\x20max('+'1.0,\x20max(g'+'amma.x,\x20ma'+'x(gamma.y,'+'\x20gamma.z))'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20storage\x20'+'factor\x0a\x20\x20\x20'+'\x20float\x20v\x20='+'\x201.0\x20-\x20((m'+'axVal\x20-\x201.'+'0)\x20/\x207.0);'+'\x0a\x0a\x20\x20\x20\x20//\x20r'+'ound\x20the\x20v'+'alue\x20for\x20s'+'torage\x20in\x20'+'8bit\x20chann'+'el\x0a\x20\x20\x20\x20v\x20='+'\x20ceil(v\x20*\x20'+'255.0)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(gamma\x20/'+'\x20(-v\x20*\x207.0'+'\x20+\x208.0),\x20v'+');\x20\x20\x20\x20\x0a}\x0a\x0a'+'vec4\x20encod'+'eRGBE(vec3'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20float'+('\x20maxVal\x20=\x20'+'max(source'+'.x,\x20max(so'+'urce.y,\x20so'+'urce.z));\x0a'+'\x20\x20\x20\x20if\x20(ma'+'xVal\x20<\x201e-'+'32)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec4(0,\x200'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20e\x20=\x20'+'ceil(log2('+'maxVal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec4('+'source\x20/\x20p'+'ow(2.0,\x20e)'+',\x20(e\x20+\x20128'+'.0)\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),zC='\x0a\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20combin'+'eColor(lit'+'Args_albed'+'o,\x20litArgs'+'_sheen_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_sp'+'ecularity)'+';\x0a\x0a\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20+=\x20lit'+'Args_emiss'+'ion;\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20=\x20ad'+'dFog(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20ton'+'eMap(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20gam'+'maCorrectO'+'utput(gl_F'+'ragColor.r'+'gb);\x0a',VC='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20floa'+'t\x20atlasSiz'+'e\x20=\x20512.0;'+'\x0aconst\x20flo'+'at\x20seamSiz'+'e\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0avec2\x20ma'+'pUv(vec2\x20u'+'v,\x20vec4\x20re'+'ct)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(mix(rect'+'.x\x20+\x20seamS'+'ize,\x20rect.'+'x\x20+\x20rect.z'+'\x20-\x20seamSiz'+'e,\x20uv.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mix('+'rect.y\x20+\x20s'+'eamSize,\x20r'+'ect.y\x20+\x20re'+'ct.w\x20-\x20sea'+'mSize,\x20uv.'+'y));\x0a}\x0a\x0a//'+'\x20map\x20a\x20nor'+'malized\x20eq'+'uirect\x20UV\x20'+'and\x20roughn'+'ess\x20level\x20'+'to\x20the\x20cor'+'rect\x20atlas'+'\x20rect.\x0avec'+'2\x20mapRough'+'nessUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'0,\x201.0\x20-\x20t'+',\x20t,\x20t\x20*\x200'+'.5));\x0a}\x0a\x0a/'+'/\x20map\x20shin'+'y\x20level\x20UV'+'\x0avec2\x20mapS'+'hinyUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'1.0\x20-\x20t,\x201'+'.0\x20-\x20t,\x20t,'+'\x20t\x20*\x200.5))'+';\x0a}\x0a\x0a#endi'+'f\x0a',GC='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20float\x20sky'+'boxIntensi'+'ty;\x0a#endif'+'\x0a\x0avec3\x20pro'+'cessEnviro'+'nment(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20skybo'+'xIntensity'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',HC='\x0afloat\x20get'+'FalloffWin'+'dow(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'sqrDist\x20=\x20'+'dot(lightD'+'ir,\x20lightD'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20invRa'+'dius\x20=\x201.0'+'\x20/\x20lightRa'+'dius;\x0a\x20\x20\x20\x20'+'return\x20squ'+'are(satura'+'te(1.0\x20-\x20s'+'quare(sqrD'+'ist\x20*\x20squa'+'re(invRadi'+'us))));\x0a}\x0a'+'\x0afloat\x20get'+'FalloffInv'+'Squared(fl'+'oat\x20lightR'+'adius,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20sqrDis'+'t\x20=\x20dot(li'+'ghtDir,\x20li'+'ghtDir);\x0a\x20'+'\x20\x20\x20float\x20f'+'alloff\x20=\x201'+'.0\x20/\x20(sqrD'+'ist\x20+\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20invRadiu'+'s\x20=\x201.0\x20/\x20'+'lightRadiu'+'s;\x0a\x0a\x20\x20\x20\x20fa'+'lloff\x20*=\x201'+'6.0;\x0a\x20\x20\x20\x20f'+'alloff\x20*=\x20'+'square(sat'+'urate(1.0\x20'+'-\x20square(s'+'qrDist\x20*\x20s'+'quare(invR'+'adius))));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20falloff'+';\x0a}\x0a',WC='\x0afloat\x20get'+'FalloffLin'+'ear(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20length'+'(lightDir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20max(((l'+'ightRadius'+'\x20-\x20d)\x20/\x20li'+'ghtRadius)'+',\x200.0);\x0a}\x0a',$C='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x0ave'+'c4\x20float2u'+'int(float\x20'+'value)\x20{\x0a\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20fl'+'oatBitsToU'+'int(value)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20vec4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((intBit'+'s\x20>>\x2024u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((intBits'+'\x20>>\x2016u)\x20&'+'\x200xFFu)\x20/\x20'+'255.0,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'((intBits\x20'+'>>\x208u)\x20&\x200'+'xFFu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(i'+'ntBits\x20&\x200'+'xFFu)\x20/\x2025'+'5.0\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0a//\x20dec'+'ode\x20RGBA8\x20'+'value\x20to\x20f'+'loat\x0afloat'+'\x20uint2floa'+'t(vec4\x20val'+'ue)\x20{\x0a\x20\x20\x20\x20'+'uint\x20intBi'+'ts\x20=\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20(uint('+'value.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(value.g\x20*'+'\x20255.0)\x20<<'+'\x2016u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20(uin'+'t(value.b\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uint'+'(value.a\x20*'+'\x20255.0);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20uintBitsT'+'oFloat(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0av'+'ec4\x20float2'+'vec4(float'+'\x20value)\x20{\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(CAPS'+'_TEXTURE_F'+'LOAT_RENDE'+'RABLE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4(val'+'ue,\x201.0,\x201'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20float'+'2uint(valu'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0a#e'+'ndif\x20//\x20FL'+'OAT_AS_UIN'+'T\x0a',XC='\x0a\x0afloat\x20dB'+'lendModeFo'+'gFactor\x20=\x20'+'1.0;\x0a\x0a#if\x20'+'(FOG\x20!=\x20NO'+'NE)\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20fog_color'+';\x0a\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20f'+'og_start;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20fog_end;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20fog_den'+'sity;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afloat'+'\x20getFogFac'+'tor()\x20{\x0a\x0a\x20'+'\x20\x20\x20float\x20d'+'epth\x20=\x20gl_'+'FragCoord.'+'z\x20/\x20gl_Fra'+'gCoord.w;\x0a'+'\x20\x20\x20\x20float\x20'+'fogFactor\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20#if\x20(FOG'+'\x20==\x20LINEAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fogFactor\x20'+'=\x20(fog_end'+'\x20-\x20depth)\x20'+'/\x20(fog_end'+'\x20-\x20fog_sta'+'rt);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fogF'+'actor\x20=\x20ex'+'p(-depth\x20*'+'\x20fog_densi'+'ty);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP2)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fog'+'Factor\x20=\x20e'+'xp(-depth\x20'+'*\x20depth\x20*\x20'+'fog_densit'+'y\x20*\x20fog_de'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(fog'+'Factor,\x200.'+'0,\x201.0);\x0a}'+'\x0a\x0avec3\x20add'+'Fog(vec3\x20c'+'olor)\x20{\x0a\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'fog_color\x20'+'*\x20dBlendMo'+'deFogFacto'+'r,\x20color,\x20'+'getFogFact'+'or());\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'color;\x0a}\x0a',qC='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0ave'+'c3\x20getFres'+'nel(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20c'+'osTheta,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20specu'+'larity\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20vec3'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a\x20\x20\x20\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20fresnel\x20'+'=\x20pow(1.0\x20'+'-\x20saturate'+'(cosTheta)'+',\x205.0);\x0a\x20\x20'+'\x20\x20float\x20gl'+'ossSq\x20=\x20gl'+'oss\x20*\x20glos'+'s;\x0a\x20\x20\x20\x20vec'+'3\x20ret\x20=\x20sp'+'ecularity\x20'+'+\x20(max(vec'+'3(glossSq)'+',\x20specular'+'ity)\x20-\x20spe'+'cularity)\x20'+'*\x20fresnel;'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20return'+'\x20mix(ret,\x20'+'iridescenc'+'eFresnel,\x20'+'iridescenc'+'eIntensity'+');\x0a#else\x0a\x20'+'\x20\x20\x20return\x20'+'ret;\x0a#endi'+'f\x20\x20\x20\x20\x0a}\x0a\x0af'+'loat\x20getFr'+'esnelCC(fl'+'oat\x20cosThe'+'ta)\x20{\x0a\x20\x20\x20\x20'+'float\x20fres'+'nel\x20=\x20pow('+'1.0\x20-\x20satu'+'rate(cosTh'+'eta),\x205.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x200.04\x20+\x20'+'(1.0\x20-\x200.0'+'4)\x20*\x20fresn'+'el;\x0a}\x0a',jC='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x0avaryin'+'g\x20vec2\x20vUv'+'0;\x0a\x0avoid\x20m'+'ain(void)\x0a'+'{\x0a\x20\x20\x20\x20gl_P'+'osition\x20=\x20'+'vec4(verte'+'x_position'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20vUv'+'0\x20=\x20vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x200.5;\x0a}\x0a',YC='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(color)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ga'+'mmaCorrect'+'Input(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGamma(col'+'or);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20gammaCorr'+'ectInput(v'+'ec4\x20color)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4(decodeG'+'amma(color'+'.xyz),\x20col'+'or.w);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20gammaCo'+'rrectOutpu'+'t(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20pow(color'+'\x20+\x200.00000'+'01,\x20vec3(1'+'.0\x20/\x202.2))'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'else\x20//\x20NO'+'NE\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectInp'+'ut(vec3\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20gamma'+'CorrectInp'+'ut(vec4\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectOut'+'put(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20color;\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a',KC='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0auni'+'form\x20float'+'\x20material_'+'gloss;\x0a#en'+'dif\x0a\x0avoid\x20'+'getGlossin'+'ess()\x20{\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_GLO'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20*='+'\x20material_'+'gloss;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_GLOSS_'+'TEXTURE\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20*=\x20tex'+'ture2DBias'+'({STD_GLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_GLOSS_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_G'+'LOSS_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_INVE'+'RT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x201.0\x20-\x20dGl'+'ossiness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20+='+'\x200.0000001'+';\x0a}\x0a',ZC='\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tion;\x0a\x0a//\x20'+'project\x20th'+'e\x20model\x20sp'+'ace\x20gaussi'+'an\x20center\x20'+'to\x20view\x20an'+'d\x20clip\x20spa'+'ce\x0abool\x20in'+'itCenter(v'+'ec3\x20modelC'+'enter,\x20out'+'\x20SplatCent'+'er\x20center)'+'\x20{\x0a\x20\x20\x20\x20mat'+'4\x20modelVie'+'w\x20=\x20matrix'+'_view\x20*\x20ma'+'trix_model'+';\x0a\x20\x20\x20\x20vec4'+'\x20centerVie'+'w\x20=\x20modelV'+'iew\x20*\x20vec4'+'(modelCent'+'er,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly\x20out\x20if'+'\x20splat\x20is\x20'+'behind\x20the'+'\x20camera\x0a\x20\x20'+'\x20\x20if\x20(cent'+'erView.z\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20false;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20vec4\x20cent'+'erProj\x20=\x20m'+'atrix_proj'+'ection\x20*\x20c'+'enterView;'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nsure\x20gaus'+'sians\x20are\x20'+'not\x20clippe'+'d\x20by\x20camer'+'a\x20near\x20and'+'\x20far\x0a\x20\x20\x20\x20#'+'if\x20WEBGPU\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ce'+'nterProj.z'+'\x20=\x20clamp(c'+'enterProj.'+'z,\x200,\x20abs('+'centerProj'+'.w));\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20center'+'Proj.z\x20=\x20c'+'lamp(cente'+'rProj.z,\x20-'+'abs(center'+'Proj.w),\x20a'+'bs(centerP'+'roj.w));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20cente'+'r.view\x20=\x20c'+'enterView.'+'xyz\x20/\x20cent'+'erView.w;\x0a'+'\x20\x20\x20\x20center'+'.proj\x20=\x20ce'+'nterProj;\x0a'+'\x20\x20\x20\x20center'+'.projMat00'+'\x20=\x20matrix_'+'projection'+'[0][0];\x0a\x20\x20'+'\x20\x20center.m'+'odelView\x20='+'\x20modelView'+';\x0a\x20\x20\x20\x20retu'+'rn\x20true;\x0a}'+'\x0a',QC='\x0a\x0auniform\x20'+'mediump\x20sa'+'mpler2D\x20sp'+'latColor;\x0a'+'\x0a//\x20返回值:\x200'+'.0\x20~\x201.0\x20之'+'间的透明度因子\x0afl'+'oat\x20comput'+'eAlpha(flo'+'at\x20muT,\x20fl'+'oat\x20uTime,'+'\x20float\x20uFa'+'deSpeed,\x20f'+'loat\x20life)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20age\x20=\x20('+'uTime\x20-\x20mu'+'T)\x20*\x202.0;\x20'+'//\x20存活时长（秒）'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'muT\x20>\x20uTim'+'e)\x20return\x20'+'0.0;\x0a\x0a\x20\x20\x20\x20'+'//\x20---\x20线性衰'+'减：基于\x20life\x20'+'---\x0a\x20\x20\x20\x20fl'+'oat\x20linear'+'Fade\x20=\x201.0'+'\x20-\x20age\x20/\x20l'+'ife;\x0a\x20\x20\x20\x20/'+'/\x20---\x20指数衰减'+'：基于\x20uFadeS'+'peed\x20---\x0a\x20'+'\x20\x20\x20float\x20e'+'xpFade\x20=\x20e'+'xp(-age\x20*\x20'+'uFadeSpeed'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20cl'+'amp(linear'+'Fade,\x200.0,'+'\x201.0);\x20\x0a\x20\x20'+'\x20\x20return\x20c'+'lamp(expFa'+'de,\x200.0,\x201'+'.0);\x0a}\x0a\x0a\x0av'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20uTime,\x20'+'bool\x20plusA'+',\x20int\x20poin'+'tCloudMode'+'Enabled)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'color\x20=\x20te'+'xelFetch(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a\x20\x20\x20\x20'+'#ifdef\x20IS_'+'4D\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20tDat'+'a\x20=\x20texelF'+'etch(trans'+'formLifecy'+'cle,\x20sourc'+'e.uv,\x200).x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20muT'+'\x20=\x20tData.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20saveA'+'\x20=\x20pointCl'+'oudModeEna'+'bled\x20==\x201\x20'+'?\x201.0\x20:\x20co'+'lor.a;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20alpha\x20=\x20s'+'aveA;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(uOp'+'enAnim\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20alp'+'ha\x20=\x20alpha'+'\x20*\x20(muT\x20-\x20'+'uTime\x20+\x200.'+'05);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20age\x20=\x20u'+'Time\x20-\x20muT'+';\x20\x20\x20\x20//\x20当前'+'存在的时间长度\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20uFad'+'eSpeed\x20=\x202'+('.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20life\x20=\x200'+'.1;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20alph'+'a\x20=\x20comput'+'eAlpha(muT'+',\x20uTime,\x20u'+'FadeSpeed,'+'\x20life);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'alpha\x20*=\x20a'+'lpha;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor.a\x20=\x20p'+'lusA\x20?\x20alp'+'ha\x20:\x20saveA'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20ret'+'urn\x20color;'+'\x0a}\x0a\x0a'),JC='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20uint\x20o'+'rder;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20uint\x20i'+'d;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'ivec2\x20uv;\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20vec2'+'\x20cornerUV;'+'\x20\x20\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a};\x0a'+'\x0a//\x20stores'+'\x20the\x20camer'+'a\x20and\x20clip'+'\x20space\x20pos'+'ition\x20of\x20t'+'he\x20gaussia'+'n\x20center\x0as'+'truct\x20Spla'+'tCenter\x20{\x0a'+'\x20\x20\x20\x20vec3\x20v'+'iew;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cen'+'ter\x20in\x20vie'+'w\x20space\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'j;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'mat4\x20model'+'View;\x20\x20\x20\x20\x20'+'//\x20model-v'+'iew\x20matrix'+'\x0a\x20\x20\x20\x20float'+'\x20projMat00'+';\x20\x20\x20\x20//\x20el'+'ement\x20[0]['+'0]\x20of\x20the\x20'+'projection'+'\x20matrix\x0a};'+'\x0a\x0a//\x20store'+'s\x20the\x20offs'+'et\x20from\x20ce'+'nter\x20for\x20t'+'he\x20current'+'\x20gaussian\x0a'+'struct\x20Spl'+'atCorner\x20{'+'\x0a\x20\x20\x20\x20vec2\x20'+'offset;\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'rner\x20offse'+'t\x20from\x20cen'+'ter\x20in\x20cli'+'p\x20space\x0a\x20\x20'+'\x20\x20vec2\x20uv;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20aaF'+'actor;\x20//\x20'+'for\x20scenes'+'\x20generated'+'\x20with\x20anti'+'aliasing\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20vec2\x20'+'v;\x0a\x20\x20\x20\x20flo'+'at\x20dlen;\x0a\x20'+'\x20\x20\x20vec2\x20cS'+'ize;\x0a\x20\x20\x20\x20v'+'ec2\x20cUV;\x0a}'+';\x0a\x0a#includ'+'e\x20\x22gsplatE'+'valSHVS\x22\x0a#'+'include\x20\x22g'+'splatQuatT'+'oMat3VS\x22\x0a\x0a'+'#if\x20GSPLAT'+'_COMPRESSE'+('D_DATA\x20==\x20'+'true\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatCompr'+'essedDataV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_COEFFS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x20='+'=\x20true\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22gsplatSog'+'sDataVS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSo'+'gsSHVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'else\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatDataV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22gsp'+'latColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0avoi'+'d\x20clipCorn'+'er(inout\x20S'+'platCorner'+'\x20corner,\x20f'+'loat\x20alpha'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20clip\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20255.'+'0\x20/\x20alpha)'+')\x20/\x202.0);\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20*='+'\x20clip;\x0a\x20\x20\x20'+'\x20corner.uv'+'\x20*=\x20clip;\x0a'+'}\x0a'),e1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTimeText'+'ure;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20c'+'hunkTextur'+'e;\x0a\x0a//\x20wor'+'k\x20values\x0av'+'ec4\x20chunkD'+'ataA;\x20\x20\x20\x20/'+'/\x20x:\x20min_x'+',\x20y:\x20min_y'+',\x20z:\x20min_z'+',\x20w:\x20max_x'+'\x0avec4\x20chun'+'kDataB;\x20\x20\x20'+'\x20//\x20x:\x20max'+'_y,\x20y:\x20max'+'_z,\x20z:\x20sca'+'le_min_x,\x20'+'w:\x20scale_m'+'in_y\x0avec4\x20'+'chunkDataC'+';\x20\x20\x20\x20//\x20x:'+'\x20scale_min'+'_z,\x20y:\x20sca'+'le_max_x,\x20'+'z:\x20scale_m'+'ax_y,\x20w:\x20s'+'cale_max_z'+'\x0avec4\x20chun'+'kDataD;\x20\x20\x20'+'\x20//\x20x:\x20min'+'_r,\x20y:\x20min'+'_g,\x20z:\x20min'+'_b,\x20w:\x20max'+'_r\x0avec4\x20ch'+'unkDataE;\x20'+'\x20\x20\x20//\x20x:\x20m'+'ax_g,\x20y:\x20m'+'ax_b,\x20z:\x20m'+'in_motion_'+'x,\x20w:\x20min_'+'motion_y\x0av'+'ec4\x20chunkD'+'ataF;\x20\x20\x20\x20/'+'/\x20x:\x20min_m'+'otion_z,\x20y'+':\x20max_moti'+'on_x,\x20z:\x20m'+'ax_motion_'+'y,\x20w:\x20max_'+'motion_z\x0av'+'ec4\x20chunkD'+'ataT;\x20\x20\x20\x20/'+'/\x20x:\x20min_t'+'ime,\x20y:\x20ma'+'x_time,\x20z:'+'\x20min_time_'+'scale,\x20w:\x20'+'max_time_s'+'cale\x0auvec4'+'\x20packedDat'+'a;\x20\x20\x20//\x20x:'+'\x20position\x20'+'bits,\x20y:\x20r'+'otation\x20bi'+'ts,\x20z:\x20sca'+'le\x20bits,\x20w'+':\x20color\x20bi'+'ts\x0auvec2\x20p'+'ackedT;\x20\x20\x20'+'//\x20x:\x20moti'+'on\x20bits(x,'+'\x20y,\x20z),\x20y:'+'\x20time\x20bits'+'(t_scale,\x20'+'t,\x20unused)'+'\x0a\x0a//\x20tool\x20'+'for\x20comput'+'e\x20Marginal'+'\x20time\x0afloa'+'t\x20computeM'+'arginalT(f'+'loat\x20time,'+'\x20float\x20muT'+',\x20float\x20si'+'gmaT)\x20{\x0a\x20\x20'+'\x20\x20if\x20(muT\x20'+'<=\x20-10.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20float\x20re'+('sult\x20=\x20exp'+'(-0.5\x20*\x20(p'+'ow((time\x20-'+'\x20muT),\x202.0'+')\x20/\x20pow(si'+'gmaT,\x202.0)'+'));\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0avec3'+'\x20unpack111'+'011(uint\x20b'+'its)\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'c3(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float(bi'+'ts\x20>>\x2021u)'+'\x20/\x202047.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((bits'+'\x20>>\x2011u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at(bits\x20&\x20'+'0x7ffu)\x20/\x20'+'2047.0\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0avec'+'4\x20unpack88'+'88(uint\x20bi'+'ts)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float(bit'+'s\x20>>\x2024u)\x20'+'/\x20255.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((bits\x20>'+'>\x2016u)\x20&\x200'+'xffu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(('+'bits\x20>>\x208u'+')\x20&\x200xffu)'+'\x20/\x20255.0,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat(bits\x20&'+'\x200xffu)\x20/\x20'+'255.0\x0a\x20\x20\x20\x20'+');\x0a}\x0a\x0acons'+'t\x20float\x20no'+'rm\x20=\x201.0\x20/'+'\x20(sqrt(2.0'+')\x20*\x200.5);\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20a\x20=\x20(f'+'loat((bits'+'\x20>>\x2020u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0\x20-\x20'+'0.5)\x20*\x20nor'+'m;\x0a\x20\x20\x20\x20flo'+'at\x20b\x20=\x20(fl'+'oat((bits\x20'+'>>\x2010u)\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20(flo'+'at(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20m\x20=\x20sqrt'+'(1.0\x20-\x20(a\x20'+'*\x20a\x20+\x20b\x20*\x20'+'b\x20+\x20c\x20*\x20c)'+');\x0a\x0a\x20\x20\x20\x20ui'+'nt\x20mode\x20=\x20'+'bits\x20>>\x2030'+'u;\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x200'+'u)\x20return\x20'+'vec4(m,\x20a,'+'\x20b,\x20c);\x0a\x20\x20'+'\x20\x20if\x20(mode'+'\x20==\x201u)\x20re'+'turn\x20vec4('+'a,\x20m,\x20b,\x20c'+');\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x202'+'u)\x20return\x20'+'vec4(a,\x20b,'+'\x20m,\x20c);\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4(a,\x20b,\x20')+('c,\x20m);\x0a}\x0a\x0a'+'\x0a//\x20read\x20c'+'enter\x0avec3'+'\x20readCente'+'r(SplatSou'+'rce\x20source'+')\x20{\x0a\x20\x20\x20\x20ui'+'nt\x20w\x20=\x20uin'+'t(textureS'+'ize(chunkT'+'exture,\x200)'+'.x)\x20/\x205u;\x0a'+'\x20\x20\x20\x20uint\x20c'+'hunkId\x20=\x20s'+'ource.id\x20/'+'\x20256u;\x0a\x20\x20\x20'+'\x20ivec2\x20chu'+'nkUV\x20=\x20ive'+'c2((chunkI'+'d\x20%\x20w)\x20*\x205'+'u,\x20chunkId'+'\x20/\x20w);\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'chunk\x20and\x20'+'packed\x20com'+'pressed\x20da'+'ta\x0a\x20\x20\x20\x20chu'+'nkDataA\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV,\x200);\x0a\x20\x20'+'\x20\x20chunkDat'+'aB\x20=\x20texel'+'Fetch(chun'+'kTexture,\x20'+'chunkUV\x20+\x20'+'ivec2(1,\x200'+'),\x200);\x0a\x20\x20\x20'+'\x20chunkData'+'C\x20=\x20texelF'+'etch(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20i'+'vec2(2,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataD'+'\x20=\x20texelFe'+'tch(chunkT'+'exture,\x20ch'+'unkUV\x20+\x20iv'+'ec2(3,\x200),'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataE\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(4,\x200),\x20'+'0);\x0a\x20\x20\x20\x20pa'+'ckedData\x20='+'\x20texelFetc'+'h(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ch'+'unkDataA.x'+'yz,\x20vec3(c'+'hunkDataA.'+'w,\x20chunkDa'+'taB.xy),\x20u'+'npack11101'+'1(packedDa'+'ta.x));\x0a}\x0a'+'\x0avec4\x20read'+'Color(in\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'r\x20=\x20unpack'+'8888(packe'+'dData.w);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4(mix('+'chunkDataD'+'.xyz,\x20vec3'+'(chunkData'+'D.w,\x20chunk'+'DataE.xy),'+'\x20r.rgb),\x20r'+'.w);\x0a}\x0a\x0ave'+'c4\x20getRota'+'tion()\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'unpackRota'+'tion(packe'+'dData.y);\x0a'+'}\x0a\x0avec3\x20ge'+'tScale()\x20{')+('\x0a\x20\x20\x20\x20retur'+'n\x20exp(mix('+'vec3(chunk'+'DataB.zw,\x20'+'chunkDataC'+'.x),\x20chunk'+'DataC.yzw,'+'\x20unpack111'+'011(packed'+'Data.z)));'+'\x0a}\x0a\x0a//\x20giv'+'en\x20a\x20rotat'+'ion\x20matrix'+'\x20and\x20scale'+'\x20vector,\x20c'+'ompute\x203d\x20'+'covariance'+'\x20A\x20and\x20B\x0av'+'oid\x20readCo'+'variance(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20covA,\x20out'+'\x20vec3\x20covB'+')\x20{\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3('+'getRotatio'+'n());\x0a\x20\x20\x20\x20'+'vec3\x20scale'+'\x20=\x20getScal'+'e();\x0a\x0a\x20\x20\x20\x20'+'//\x20M\x20=\x20S\x20*'+'\x20R\x0a\x20\x20\x20\x20mat'+'3\x20M\x20=\x20tran'+'spose(mat3'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'scale.x\x20*\x20'+'rot[0],\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20scal'+'e.y\x20*\x20rot['+'1],\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale.z\x20'+'*\x20rot[2]\x0a\x20'+'\x20\x20\x20));\x0a\x0a\x20\x20'+'\x20\x20covA\x20=\x20v'+'ec3(dot(M['+'0],\x20M[0]),'+'\x20dot(M[0],'+'\x20M[1]),\x20do'+'t(M[0],\x20M['+'2]));\x0a\x20\x20\x20\x20'+'covB\x20=\x20vec'+'3(dot(M[1]'+',\x20M[1]),\x20d'+'ot(M[1],\x20M'+'[2]),\x20dot('+'M[2],\x20M[2]'+'));\x0a}\x0a\x0aflo'+'at\x20getMarg'+'inalT(in\x20S'+'platSource'+'\x20source,\x20i'+'n\x20float\x20ti'+'me)\x20{\x0a\x20\x20\x20\x20'+'float\x20marg'+'inal\x20=\x201.0'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20IS_4D\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20chu'+'nkDataT\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(6,\x200),\x200)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'packedT\x20=\x20'+'texelFetch'+'(packedTim'+'eTexture,\x20'+'source.uv,'+'\x200).xy;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20timeData\x20'+'=\x20mix(vec3'+'(chunkData'+'T.z,\x20chunk'+'DataT.x,\x200'+'),\x20vec3(ch'+'unkDataT.w'+',\x20chunkDat'+'aT.y,\x201),\x20'+'unpack1110'+'11(packedT'+'.y));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'tScale\x20=\x20e'+'xp(timeDat')+('a.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'muT\x20=\x20time'+'Data.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20marg'+'inal\x20=\x20com'+'puteMargin'+'alT(time,\x20'+'muT,\x20tScal'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20r'+'eturn\x20marg'+'inal;\x0a}\x0a\x0av'+'ec3\x20readCe'+'nter4D(Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20time)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(chunkText'+'ure,\x200).x)'+'\x20/\x207u;\x0a\x20\x20\x20'+'\x20uint\x20chun'+'kId\x20=\x20sour'+'ce.id\x20/\x2025'+'6u;\x0a\x20\x20\x20\x20iv'+'ec2\x20chunkU'+'V\x20=\x20ivec2('+'(chunkId\x20%'+'\x20w)\x20*\x207u,\x20'+'chunkId\x20/\x20'+'w);\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20chu'+'nk\x20and\x20pac'+'ked\x20compre'+'ssed\x20data\x0a'+'\x20\x20\x20\x20chunkD'+'ataA\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV,'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataB\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(1,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataC\x20='+'\x20texelFetc'+'h(chunkTex'+'ture,\x20chun'+'kUV\x20+\x20ivec'+'2(2,\x200),\x200'+');\x0a\x20\x20\x20\x20chu'+'nkDataD\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(3,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataE\x20=\x20t'+'exelFetch('+'chunkTextu'+'re,\x20chunkU'+'V\x20+\x20ivec2('+'4,\x200),\x200);'+'\x0a\x20\x20\x20\x20chunk'+'DataF\x20=\x20te'+'xelFetch(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20ivec2(5'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataT\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV\x20'+'+\x20ivec2(6,'+'\x200),\x200);\x0a\x20'+'\x20\x20\x20packedD'+'ata\x20=\x20texe'+'lFetch(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20packedT\x20='+'\x20texelFetc'+'h(packedTi'+'meTexture,'+'\x20source.uv'+',\x200).xy;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20mix(chu')+('nkDataA.xy'+'z,\x20vec3(ch'+'unkDataA.w'+',\x20chunkDat'+'aB.xy),\x20un'+'pack111011'+'(packedDat'+'a.x));\x0a\x20\x20\x20'+'\x20#ifdef\x20IS'+'_4D\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20tim'+'e\x20=\x20mix(ve'+'c3(chunkDa'+'taT.z,\x20chu'+'nkDataT.x,'+'\x200),\x20vec3('+'chunkDataT'+'.w,\x20chunkD'+'ataT.y,\x201)'+',\x20unpack11'+'1011(packe'+'dT.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20muT\x20=\x20ti'+'me.y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'ovingSpeed'+'\x20=\x20mix(vec'+'3(chunkDat'+'aE.zw,\x20chu'+'nkDataF.x)'+',\x20chunkDat'+'aF.yzw,\x20un'+'pack111011'+'(packedT.x'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20spl'+'atOffset\x20='+'\x20movingSpe'+'ed\x20*\x20(time'+'\x20-\x20muT);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20spl'+'atCenter\x20+'+'=\x20splatOff'+'set;\x0a\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'return\x20spl'+'atCenter;\x0a'+'}\x0a'),t1='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20shText'+'ure0;\x0aunif'+'orm\x20highp\x20'+'usampler2D'+'\x20shTexture'+'1;\x0auniform'+'\x20highp\x20usa'+'mpler2D\x20sh'+'Texture2;\x0a'+'\x0avec4\x20unpa'+'ck8888s(in'+'\x20uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'(uvec4(bit'+'s)\x20>>\x20uvec'+'4(0u,\x208u,\x20'+'16u,\x2024u))'+'\x20&\x200xffu)\x20'+'*\x20(8.0\x20/\x202'+'55.0)\x20-\x204.'+'0;\x0a}\x0a\x0avoid'+'\x20readSHDat'+'a(in\x20Splat'+'Source\x20sou'+'rce,\x20out\x20v'+'ec3\x20sh[15]'+',\x20out\x20floa'+'t\x20scale)\x20{'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20the\x20sh\x20'+'coefficien'+'ts\x0a\x20\x20\x20\x20uve'+'c4\x20shData0'+'\x20=\x20texelFe'+'tch(shText'+'ure0,\x20sour'+'ce.uv,\x200);'+'\x0a\x20\x20\x20\x20uvec4'+'\x20shData1\x20='+'\x20texelFetc'+'h(shTextur'+'e1,\x20source'+'.uv,\x200);\x0a\x20'+'\x20\x20\x20uvec4\x20s'+'hData2\x20=\x20t'+'exelFetch('+'shTexture2'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec4\x20r0\x20'+'=\x20unpack88'+'88s(shData'+'0.x);\x0a\x20\x20\x20\x20'+'vec4\x20r1\x20=\x20'+'unpack8888'+'s(shData0.'+'y);\x0a\x20\x20\x20\x20ve'+'c4\x20r2\x20=\x20un'+'pack8888s('+'shData0.z)'+';\x0a\x20\x20\x20\x20vec4'+'\x20r3\x20=\x20unpa'+'ck8888s(sh'+'Data0.w);\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'g0\x20=\x20unpac'+'k8888s(shD'+'ata1.x);\x0a\x20'+'\x20\x20\x20vec4\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20vec4\x20g2\x20='+'\x20unpack888'+'8s(shData1'+'.z);\x0a\x20\x20\x20\x20v'+'ec4\x20g3\x20=\x20u'+'npack8888s'+'(shData1.w'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20b0\x20=\x20un'+'pack8888s('+'shData2.x)'+';\x0a\x20\x20\x20\x20vec4'+'\x20b1\x20=\x20unpa'+'ck8888s(sh'+'Data2.y);\x0a'+'\x20\x20\x20\x20vec4\x20b'+'2\x20=\x20unpack'+'8888s(shDa'+'ta2.z);\x0a\x20\x20'+'\x20\x20vec4\x20b3\x20'+'=\x20unpack88'+'88s(shData'+'2.w);\x0a\x0a\x20\x20\x20'+('\x20sh[0]\x20=\x20\x20'+'vec3(r0.x,'+'\x20g0.x,\x20b0.'+'x);\x0a\x20\x20\x20\x20sh'+'[1]\x20=\x20\x20vec'+'3(r0.y,\x20g0'+'.y,\x20b0.y);'+'\x0a\x20\x20\x20\x20sh[2]'+'\x20=\x20\x20vec3(r'+'0.z,\x20g0.z,'+'\x20b0.z);\x0a\x20\x20'+'\x20\x20sh[3]\x20=\x20'+'\x20vec3(r0.w'+',\x20g0.w,\x20b0'+'.w);\x0a\x20\x20\x20\x20s'+'h[4]\x20=\x20\x20ve'+'c3(r1.x,\x20g'+'1.x,\x20b1.x)'+';\x0a\x20\x20\x20\x20sh[5'+']\x20=\x20\x20vec3('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3(r1.'+'z,\x20g1.z,\x20b'+'1.z);\x0a\x20\x20\x20\x20'+'sh[7]\x20=\x20\x20v'+'ec3(r1.w,\x20'+'g1.w,\x20b1.w'+');\x0a\x20\x20\x20\x20sh['+'8]\x20=\x20\x20vec3'+'(r2.x,\x20g2.'+'x,\x20b2.x);\x0a'+'\x20\x20\x20\x20sh[9]\x20'+'=\x20\x20vec3(r2'+'.y,\x20g2.y,\x20'+'b2.y);\x0a\x20\x20\x20'+'\x20sh[10]\x20=\x20'+'vec3(r2.z,'+'\x20g2.z,\x20b2.'+'z);\x0a\x20\x20\x20\x20sh'+'[11]\x20=\x20vec'+'3(r2.w,\x20g2'+'.w,\x20b2.w);'+'\x0a\x20\x20\x20\x20sh[12'+']\x20=\x20vec3(r'+'3.x,\x20g3.x,'+'\x20b3.x);\x0a\x20\x20'+'\x20\x20sh[13]\x20='+'\x20vec3(r3.y'+',\x20g3.y,\x20b3'+'.y);\x0a\x20\x20\x20\x20s'+'h[14]\x20=\x20ve'+'c3(r3.z,\x20g'+'3.z,\x20b3.z)'+';\x0a\x0a\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),s1='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20S'+'H_COEFFS\x203'+'\x0a\x20\x20\x20\x20#elif'+'\x20SH_BANDS\x20'+'==\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20SH_COEFFS'+'\x208\x0a\x20\x20\x20\x20#el'+'if\x20SH_BAND'+'S\x20==\x203\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20SH_COEF'+'FS\x2015\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20SH_COEFF'+'S\x200\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x200\x0a\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20SH_C1\x20'+'=\x200.488602'+'5119029199'+'f;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x201\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20f'+'loat\x20SH_C2'+'_0\x20=\x201.092'+'5484305920'+'792f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'2_1\x20=\x20-1.0'+'9254843059'+'20792f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C2_2\x20=\x200.'+'3153915652'+'5252005f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C2_3\x20=\x20'+'-1.0925484'+'305920792f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'const\x20floa'+'t\x20SH_C2_4\x20'+'=\x200.546274'+'2152960396'+'f;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x202\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'3_0\x20=\x20-0.5'+'9004358992'+'66435f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_1\x20=\x202.'+'8906114426'+'40554f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_2\x20=\x20-0'+'.457045799'+'4644658f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C3_3\x20=\x20'+'0.37317633'+'25901154f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20float'+'\x20SH_C3_4\x20='+'\x20-0.457045'+'7994644658'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_5'+'\x20=\x201.44530'+'5721320277'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_6'+'\x20=\x20-0.5900'+'4358992664'+'35f;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20see\x20ht'+'tps://gith'+'ub.com/gra'+'phdeco-inr'+('ia/gaussia'+'n-splattin'+'g/blob/mai'+'n/utils/sh'+'_utils.py\x0a'+'\x20\x20\x20\x20vec3\x20e'+'valSH(in\x20v'+'ec3\x20sh[SH_'+'COEFFS],\x20i'+'n\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20x\x20'+'=\x20dir.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20y\x20=\x20dir'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20z\x20'+'=\x20dir.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201st\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20resul'+'t\x20=\x20SH_C1\x20'+'*\x20(-sh[0]\x20'+'*\x20y\x20+\x20sh[1'+']\x20*\x20z\x20-\x20sh'+'[2]\x20*\x20x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x201\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x202nd\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xx\x20=\x20x\x20*\x20x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yy\x20=\x20y\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'zz\x20=\x20z\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yz\x20=\x20y\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xz\x20=\x20x\x20*\x20z'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[3]\x20*\x20('+'SH_C2_0\x20*\x20'+'xy)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[4]\x20*\x20'+'(SH_C2_1\x20*'+'\x20yz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[5]\x20*'+'\x20(SH_C2_2\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x20xx\x20-\x20y'+'y))\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[6]\x20*\x20'+'(SH_C2_3\x20*'+'\x20xz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20*'+'\x20(SH_C2_4\x20'+'*\x20(xx\x20-\x20yy'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'+=\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20')+('xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20#endif\x0a'),i1='\x0amat3\x20quat'+'ToMat3(vec'+'4\x20R)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20R2\x20='+'\x20R\x20+\x20R;\x0a\x20\x20'+'\x20\x20float\x20X\x20'+'=\x20R2.x\x20*\x20R'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20Y\x20\x20=\x20R2'+'.y\x20*\x20R;\x0a\x20\x20'+'\x20\x20vec4\x20Z\x20\x20'+'=\x20R2.z\x20*\x20R'+';\x0a\x20\x20\x20\x20floa'+'t\x20W\x20=\x20R2.w'+'\x20*\x20R.w;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x201.0\x20-\x20'+'Z.z\x20-\x20W,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20Y.z\x20+\x20X'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20Y.z\x20-\x20X,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x201.'+'0\x20-\x20Y.y\x20-\x20'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20+\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20Y.w\x20+\x20Z.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20-\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',r1='\x0auniform\x20m'+'ediump\x20sam'+'pler2D\x20sh0'+';\x0a\x0auniform'+'\x20vec4\x20sh0_'+'mins;\x0aunif'+'orm\x20vec4\x20s'+'h0_maxs;\x0a\x0a'+'float\x20SH_C'+'0\x20=\x200.2820'+'9479177387'+'814;\x0a\x0avec4'+'\x20readColor'+'(in\x20SplatS'+'ource\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20clr\x20='+'\x20mix(sh0_m'+'ins,\x20sh0_m'+'axs,\x20texel'+'Fetch(sh0,'+'\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(vec3(0.'+'5)\x20+\x20clr.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'clr.w)));\x0a'+'}\x0a',a1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0a\x0auniform\x20'+'vec3\x20means'+'_mins;\x0auni'+'form\x20vec3\x20'+'means_maxs'+';\x0a\x0auniform'+'\x20vec3\x20scal'+'es_mins;\x0au'+'niform\x20vec'+'3\x20scales_m'+'axs;\x0a\x0avec4'+'\x20unpackU32'+'(uint\x20v)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((v\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((v\x20>>'+'\x2016u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float((v'+'\x20>>\x208u)\x20&\x20'+'0xFFu)\x20/\x202'+'55.0,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float('+'v\x20&\x200xFFu)'+'\x20/\x20255.0\x0a\x20'+'\x20\x20\x20);\x0a}\x0a\x0au'+'vec4\x20packe'+'dSample;\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20th'+'e\x20packed\x20t'+'exture\x20sam'+'ple\x0a\x20\x20\x20\x20pa'+'ckedSample'+'\x20=\x20texelFe'+'tch(packed'+'Texture,\x20s'+'ource.uv,\x20'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20l\x20=\x20un'+'packU32(pa'+'ckedSample'+'.x).xyz;\x0a\x20'+'\x20\x20\x20vec3\x20u\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20vec'+'3\x20n\x20=\x20(l\x20*'+'\x20255.0\x20+\x20u'+'\x20*\x20255.0\x20*'+'\x20256.0)\x20/\x20'+'65535.0;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20mix(mean'+'s_mins,\x20me'+'ans_maxs,\x20'+'n);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20sign'+'(v)\x20*\x20(exp'+'(abs(v))\x20-'+'\x201.0);\x0a}\x0a\x0a'+'const\x20floa'+'t\x20norm\x20=\x202'+'.0\x20/\x20sqrt('+'2.0);\x0a\x0a//\x20'+'sample\x20cov'+'ariance\x20ve'+'ctors\x0avoid'+'\x20readCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'qdata\x20=\x20un'+'packU32(pa'+'ckedSample'+'.z);\x0a\x20\x20\x20\x20v'+'ec3\x20sdata\x20'+('=\x20unpackU3'+'2(packedSa'+'mple.w).xy'+'z;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20abc\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20f'+'loat\x20d\x20=\x20s'+'qrt(max(0.'+'0,\x201.0\x20-\x20d'+'ot(abc,\x20ab'+'c)));\x0a\x0a\x20\x20\x20'+'\x20uint\x20mode'+'\x20=\x20uint(qd'+'ata.w\x20*\x2025'+'5.0\x20+\x200.5)'+'\x20-\x20252u;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20q'+'uat\x20=\x20(mod'+'e\x20==\x200u)\x20?'+'\x20vec4(d,\x20a'+'bc)\x20:\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20((mode\x20='+'=\x201u)\x20?\x20ve'+'c4(abc.x,\x20'+'d,\x20abc.yz)'+'\x20:\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20('+'(mode\x20==\x202'+'u)\x20?\x20vec4('+'abc.xy,\x20d,'+'\x20abc.z)\x20:\x20'+'vec4(abc,\x20'+'d)));\x0a\x0a\x20\x20\x20'+'\x20mat3\x20rot\x20'+'=\x20quatToMa'+'t3(quat);\x0a'+'\x20\x20\x20\x20vec3\x20s'+'cale\x20=\x20exp'+'(mix(scale'+'s_mins,\x20sc'+'ales_maxs,'+'\x20sdata));\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20mat3\x20M\x20='+'\x20transpose'+'(mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20cov'+'A\x20=\x20vec3(d'+'ot(M[0],\x20M'+'[0]),\x20dot('+'M[0],\x20M[1]'+'),\x20dot(M[0'+'],\x20M[2]));'+'\x0a\x20\x20\x20\x20covB\x20'+'=\x20vec3(dot'+'(M[1],\x20M[1'+']),\x20dot(M['+'1],\x20M[2]),'+'\x20dot(M[2],'+'\x20M[2]));\x0a}'+'\x0a'),n1='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20sh_ce'+'ntroids;\x0a\x0a'+'uniform\x20fl'+'oat\x20shN_mi'+'ns;\x0aunifor'+'m\x20float\x20sh'+'N_maxs;\x0a\x0a/'+'/\x20To\x20suppo'+'rt\x20each\x20SH'+'\x20degree,\x20r'+'eadSHData\x20'+'is\x20overloa'+'ded\x20based\x20'+'on\x20the\x20SH\x20'+'vector\x20dep'+'th\x20\x0a\x0avoid\x20'+'readSHData'+'(in\x20SplatS'+'ource\x20sour'+'ce,\x20out\x20ve'+'c3\x20sh[SH_C'+'OEFFS],\x20ou'+'t\x20float\x20sc'+'ale)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'ivec2\x20t\x20=\x20'+'ivec2(pack'+'edSample.x'+'\x20&\x20255u,\x20p'+'ackedSampl'+'e.y\x20&\x20255u'+');\x0a\x20\x20\x20\x20int'+'\x20n\x20=\x20t.x\x20+'+'\x20t.y\x20*\x20256'+';\x0a\x20\x20\x20\x20int\x20'+'u\x20=\x20(n\x20%\x206'+'4)\x20*\x20SH_CO'+'EFFS;\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20n\x20'+'/\x2064;\x0a\x0a\x20\x20\x20'+'\x20//\x20calcul'+'ate\x20offset'+'\x20into\x20the\x20'+'centroids\x20'+'texture\x20an'+'d\x20read\x20con'+'secutive\x20t'+'exels\x0a\x20\x20\x20\x20'+'for\x20(int\x20i'+'\x20=\x200;\x20i\x20<\x20'+'SH_COEFFS;'+'\x20i++)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[i'+']\x20=\x20mix(ve'+'c3(shN_min'+'s),\x20vec3(s'+'hN_maxs),\x20'+'texelFetch'+'(sh_centro'+'ids,\x20ivec2'+'(u\x20+\x20i,\x20v)'+',\x200).xyz);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20scale\x20=\x20'+'1.0;\x0a}\x0a',o1='\x0auniform\x20v'+'ec2\x20viewpo'+'rt;\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20viewpo'+'rt\x20dimensi'+'ons\x0aunifor'+'m\x20vec4\x20cam'+'era_params'+';\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x201\x20/'+'\x20far,\x20far,'+'\x20near,\x20isO'+'rtho\x0aunifo'+'rm\x20float\x20u'+'SplatScale'+';\x0auniform\x20'+'float\x20rend'+'erSpace;\x0au'+'niform\x20flo'+'at\x20endSpac'+'e;\x0auniform'+'\x20int\x20uShap'+'eN;\x0a\x0a//\x20ca'+'lculate\x20th'+'e\x20clip-spa'+'ce\x20offset\x20'+'from\x20the\x20c'+'enter\x20for\x20'+'this\x20gauss'+'ian\x0abool\x20i'+'nitCorner('+'SplatSourc'+'e\x20source,\x20'+'SplatCente'+'r\x20center,\x20'+'out\x20SplatC'+'orner\x20corn'+'er,\x20int\x20po'+'intCloudMo'+'deEnabled)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'get\x20covari'+'ance\x0a\x20\x20\x20\x20v'+'ec3\x20covA,\x20'+'covB;\x0a\x20\x20\x20\x20'+'readCovari'+'ance(sourc'+'e,\x20covA,\x20c'+'ovB);\x0a\x0a\x20\x20\x20'+'\x20mat3\x20Vrk\x20'+'=\x20mat3(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20covA'+'.x,\x20covA.y'+',\x20covA.z,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'vA.y,\x20covB'+'.x,\x20covB.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'covA.z,\x20co'+'vB.y,\x20covB'+'.z\x0a\x20\x20\x20\x20);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20focal\x20=\x20v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'v\x20=\x20camera'+'_params.w\x20'+'==\x201.0\x20?\x20v'+'ec3(0.0,\x200'+'.0,\x201.0)\x20:'+'\x20center.vi'+'ew.xyz;\x0a\x20\x20'+'\x20\x20float\x20J1'+'\x20=\x20focal\x20/'+'\x20v.z;\x0a\x20\x20\x20\x20'+'vec2\x20J2\x20=\x20'+'-J1\x20/\x20v.z\x20'+'*\x20v.xy;\x0a\x20\x20'+'\x20\x20mat3\x20J\x20='+'\x20mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20J1,\x200'+'.0,\x20J2.x,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x200.'+'0,\x20J1,\x20J2.'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.0,\x200.0,'+'\x200.0\x0a\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20mat'+'3\x20W\x20=\x20tran'+'spose(mat3'+'(center.mo'+'delView));'+'\x0a\x20\x20\x20\x20mat3\x20'+'T\x20=\x20W\x20*\x20J;'+'\x0a\x20\x20\x20\x20mat3\x20'+'cov\x20=\x20tran'+'spose(T)\x20*'+('\x20Vrk\x20*\x20T;\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'calculate\x20'+'AA\x20factor\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20detOri'+'g\x20=\x20cov[0]'+'[0]\x20*\x20cov['+'1][1]\x20-\x20co'+'v[0][1]\x20*\x20'+'cov[0][1];'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20detBl'+'ur\x20=\x20(cov['+'0][0]\x20+\x200.'+'3)\x20*\x20(cov['+'1][1]\x20+\x200.'+'3)\x20-\x20cov[0'+'][1]\x20*\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20corn'+'er.aaFacto'+'r\x20=\x20sqrt(m'+'ax(detOrig'+'\x20/\x20detBlur'+',\x200.0));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20diagonal1'+'\x20=\x20cov[0]['+'0]\x20+\x200.3;\x0a'+'\x20\x20\x20\x20float\x20'+'offDiagona'+'l\x20=\x20cov[0]'+'[1];\x0a\x20\x20\x20\x20f'+'loat\x20diago'+'nal2\x20=\x20cov'+'[1][1]\x20+\x200'+'.3;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20mid\x20='+'\x200.5\x20*\x20(di'+'agonal1\x20+\x20'+'diagonal2)'+';\x0a\x20\x20\x20\x20floa'+'t\x20radius\x20='+'\x20length(ve'+'c2((diagon'+'al1\x20-\x20diag'+'onal2)\x20/\x202'+'.0,\x20offDia'+'gonal));\x0a\x20'+'\x20\x20\x20float\x20l'+'ambda1\x20=\x20m'+'id\x20+\x20radiu'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20lambda2'+'\x20=\x20max(mid'+'\x20-\x20radius,'+'\x200.1);\x0a\x20\x20\x20'+'\x20if\x20(point'+'CloudModeE'+'nabled\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20l'+'ambda1\x20=\x20l'+'ambda2\x20=\x202'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Us'+'e\x20the\x20smal'+'ler\x20viewpo'+'rt\x20dimensi'+'on\x20to\x20limi'+'t\x20the\x20kern'+'el\x20size\x20re'+'lative\x20to\x20'+'the\x20screen'+'\x20resolutio'+'n.\x0a\x20\x20\x20\x20flo'+'at\x20vmin\x20=\x20'+'min(1024.0'+',\x20min(view'+'port.x,\x20vi'+'ewport.y))'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20l1\x20=\x202.'+'0\x20*\x20min(sq'+'rt(2.0\x20*\x20l'+'ambda1),\x20v'+'min);\x0a\x20\x20\x20\x20'+'float\x20l2\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda2)'+',\x20vmin);\x0a\x0a'+'\x20\x20\x20\x20//\x20ear'+'ly-out\x20gau'+'ssians\x20sma'+'ller\x20than\x20'+'2\x20pixels\x0a\x20')+('\x20\x20\x20if\x20(l1\x20'+'<\x202.0\x20&&\x20l'+'2\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec2\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'viewport;\x0a'+'\x0a\x20\x20\x20\x20//\x20cu'+'ll\x20against'+'\x20frustum\x20x'+'/y\x20axes\x0a\x20\x20'+'\x20\x20if\x20(any('+'greaterTha'+'n(abs(cent'+'er.proj.xy'+')\x20-\x20vec2(m'+'ax(l1,\x20l2)'+')\x20*\x20c,\x20cen'+'ter.proj.w'+'w)))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20false;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec2\x20diago'+'nalVector\x20'+'=\x20normaliz'+'e(vec2(off'+'Diagonal,\x20'+'lambda1\x20-\x20'+'diagonal1)'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20scale\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20bool\x20inRe'+'nderSpace\x20'+'=\x20(center.'+'view.x\x20>=\x20'+'-renderSpa'+'ce\x20&&\x20cent'+'er.view.x\x20'+'<=\x20renderS'+'pace)\x20&&\x20('+'center.vie'+'w.y\x20>=\x20-re'+'nderSpace\x20'+'&&\x20center.'+'view.y\x20<=\x20'+'renderSpac'+'e);\x0a\x20\x20\x20\x20bo'+'ol\x20openRen'+'derAnim\x20=\x20'+'renderSpac'+'e\x20<\x20endSpa'+'ce;\x0a\x20\x20\x20\x20bo'+'ol\x20inRende'+'r\x20=\x20render'+'Space\x20>=\x20e'+'ndSpace\x20||'+'\x20inRenderS'+'pace\x20||\x20po'+'intCloudMo'+'deEnabled\x20'+'==\x201;\x0a\x20\x20\x20\x20'+'if(!openRe'+'nderAnim\x20&'+'&\x20uSplatSc'+'ale\x20>\x200.0\x20'+'&&\x20uSplatS'+'cale\x20<=\x201.'+'2){\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale\x20=\x20'+'uSplatScal'+'e;\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(in'+'Render){\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(openR'+'enderAnim)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'scale\x20=\x20in'+'RenderSpac'+'e\x20?\x20uSplat'+'Scale\x20:\x200.'+'1;\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20vec2\x20v1'+'\x20=\x20scale\x20*'+'\x20l1\x20*\x20diag'+'onalVector'+';\x0a\x20\x20\x20\x20vec2'+'\x20v2\x20=\x20scal'+'e\x20*\x20l2\x20*\x20v'+'ec2(diagon'+'alVector.y'+',\x20-diagona'+'lVector.x)')+(';\x0a\x0a\x20\x20\x20\x20cor'+'ner.offset'+'\x20=\x20(source'+'.cornerUV.'+'x\x20*\x20v1\x20+\x20s'+'ource.corn'+'erUV.y\x20*\x20v'+'2)\x20*\x20c;\x0a\x20\x20'+'\x20\x20//\x20corne'+'r.uv\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20if\x20(uSh'+'apeN\x20<\x203)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'corner.uv\x20'+'=\x20source.c'+'ornerUV;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'corner.cSi'+'ze\x20=\x20(v1\x20+'+'\x20v2)\x20*\x20c;\x0a'+'\x20\x20\x20\x20corner'+'.cUV\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),l1='\x0a\x0auniform\x20'+'highp\x20samp'+'ler2D\x20tran'+'sformA;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20transfor'+'mB;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformR;\x0a'+'\x0a#ifdef\x20IS'+'_4D\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformMot'+'ion;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20t'+'ransformLi'+'fecycle;\x0a#'+'endif\x0a\x0a//\x20'+'work\x20value'+'s\x0a//\x20uint\x20'+'tAw;\x0avec2\x20'+'sampledCov'+'4D;\x0afloat\x20'+'muT;\x0a\x0a//\x20t'+'ool\x20for\x20co'+'mpute\x20Marg'+'inal\x20time\x0a'+'float\x20comp'+'uteMargina'+'lT(float\x20t'+'ime,\x20float'+'\x20muT,\x20floa'+'t\x20sigmaT)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'muT\x20<=\x20-10'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20floa'+'t\x20result\x20='+'\x20exp(-0.5\x20'+'*\x20(pow((ti'+'me\x20-\x20muT),'+'\x202.0)\x20/\x20po'+'w(sigmaT,\x20'+'2.0)));\x0a\x20\x20'+'\x20\x20return\x20r'+'esult;\x0a}\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20retu'+'rn\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a}\x0a\x0ama'+'t3\x20quatToM'+'at3v2(vec4'+'\x20R)\x20{\x0a\x20\x20\x20\x20'+'float\x20x\x20=\x20'+'R.w;\x0a\x20\x20\x20\x20f'+'loat\x20y\x20=\x20R'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20R.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20w\x20=\x20R.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20mat3(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x201.0'+'\x20-\x202.0\x20*\x20('+'z\x20*\x20z\x20+\x20w\x20'+'*\x20w),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'2.0\x20*\x20(y\x20*'+'\x20z\x20+\x20x\x20*\x20w'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x202.0'+'\x20*\x20(y\x20*\x20w\x20'+'-\x20x\x20*\x20z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x202.0\x20*\x20'+'(y\x20*\x20z\x20-\x20x'+'\x20*\x20w),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x201.0\x20-'+'\x202.0\x20*\x20(y\x20'+'*\x20y\x20+\x20w\x20*\x20'+'w),\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x202.'+'0\x20*\x20(z\x20*\x20w'+'\x20+\x20x\x20*\x20y),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x202.0\x20*'+'\x20(y\x20*\x20w\x20+\x20'+'x\x20*\x20z),\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x202.0\x20*\x20(z'+'\x20*\x20w\x20-\x20x\x20*'+'\x20y),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.0\x20-\x202'+'.0\x20*\x20(y\x20*\x20'+'y\x20+\x20z\x20*\x20z)'+'\x0a\x20\x20\x20\x20);\x0a}\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(vec3\x20pack'+'ed)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(packed.x'+'yz,\x20sqrt(m'+'ax(0.0,\x201.'+'0\x20-\x20dot(pa'+'cked,\x20pack'+'ed))));\x0a}\x0a'+'\x0a//\x20sample'+'\x20covarianc'+'e\x20vectors\x0a'+'void\x20readC'+'ovariance('+'in\x20SplatSo'+'urce\x20sourc'+'e,\x20out\x20vec'+'3\x20covA,\x20ou'+'t\x20vec3\x20cov'+'B)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20tB\x20=\x20t'+'exelFetch('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20tR\x20'+'=\x20texelFet'+'ch(transfo'+'rmR,\x20sourc'+'e.uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3v'+'2(unpackRo'+'tation(tR)'+');\x0a\x20\x20\x20\x20vec'+'3\x20scale\x20=\x20'+'tB.xyz;\x0a\x0a\x20'+'\x20\x20\x20//\x20M\x20=\x20'+'S\x20*\x20R\x0a\x20\x20\x20\x20'+'mat3\x20M\x20=\x20t'+'ranspose(m'+'at3(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.x'+'\x20*\x20rot[0],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.y\x20*\x20r'+'ot[1],\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.z\x20*\x20rot[2'+']\x0a\x20\x20\x20\x20));\x0a'+'\x0a\x20\x20\x20\x20covA\x20'+'=\x20vec3(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20covB\x20=\x20'+'vec3(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a\x0a'+'//\x20sample\x20'+'4D\x20covaria'+'nce\x20vector'+'s\x0avoid\x20rea'+'dFTGSCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB,ou'+'t\x20vec4\x20cov'+'ariance4D)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20tB\x20=\x20tex'+'elFetch(tr'+'ansformB,\x20'+'source.uv,')+('\x200);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20tR\x20=\x20'+'texelFetch'+'(transform'+'R,\x20source.'+'uv,\x200).xyz'+';\x0a\x20\x20\x20\x20mat3'+'\x20rot\x20=\x20qua'+'tToMat3v2('+'unpackRota'+'tion(tR));'+'\x0a\x20\x20\x20\x20vec3\x20'+'scale\x20=\x20tB'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x20M\x20=\x20S\x20'+'*\x20R\x0a\x20\x20\x20\x20ma'+'t3\x20M\x20=\x20tra'+'nspose(mat'+'3(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20covA\x20=\x20'+'vec3(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20covB\x20=\x20ve'+'c3(dot(M[1'+'],\x20M[1]),\x20'+'dot(M[1],\x20'+'M[2]),\x20dot'+'(M[2],\x20M[2'+']));\x0a\x0a}\x0a\x0a\x0a'+'float\x20getM'+'arginalT(i'+'n\x20SplatSou'+'rce\x20source'+',\x20in\x20float'+'\x20time)\x20{\x0a\x20'+'\x20\x20\x20float\x20m'+'arginal\x20=\x20'+'1.0;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20filter\x20'+'out\x20splats'+'\x20that\x20have'+'\x20too\x20littl'+'e\x20influenc'+'e\x20to\x20now\x20i'+'n\x20the\x20time'+'\x20dimension'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20tData'+'\x20=\x20texelFe'+'tch(transf'+'ormLifecyc'+'le,\x20source'+'.uv,\x200).xy'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'muT\x20=\x20tDat'+'a.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20t'+'Scale\x20=\x20tD'+'ata.y;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20margi'+'nal\x20=\x20comp'+'uteMargina'+'lT(time,\x20m'+'uT,\x20tScale'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20re'+'turn\x20margi'+'nal;\x0a}\x0a\x0ave'+'c3\x20readCen'+'ter4D(Spla'+'tSource\x20so'+'urce,\x20floa'+'t\x20time)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20if(m'+'uT\x20>\x20-5.0)'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20movin'+'gSpeed\x20=\x20t')+('exelFetch('+'transformM'+'otion,\x20sou'+'rce.uv,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'platOffset'+'\x20=\x20movingS'+'peed\x20*\x20(ti'+'me\x20-\x20muT);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'platCenter'+'\x20+=\x20splatO'+'ffset;\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20spla'+'tCenter;\x0a}'+'\x0a'),h1='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0avec'+'3\x20prepareO'+'utputFromG'+'amma(vec3\x20'+'gammaColor'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20TONEMAP\x20'+'==\x20NONE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'GAMMA\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'onvert\x20to\x20'+'linear\x20spa'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20outp'+'ut\x20gamma\x20s'+'pace\x20color'+'\x20directly\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'ly\x20tonemap'+'ping\x20in\x20li'+'near\x20space'+'\x20and\x20outpu'+'t\x20to\x20linea'+'r\x20or\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20gamm'+'a\x20(which\x20i'+'s\x20handled\x20'+'by\x20gammaCo'+'rrectOutpu'+'t)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ga'+'mmaCorrect'+'Output(ton'+'eMap(decod'+'eGamma(gam'+'maColor)))'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',c1='\x0auniform\x20i'+'nt\x20mode;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x200:\x20c'+'enters,\x201:'+'\x20rings\x0auni'+'form\x20float'+'\x20ringSize;'+'\x0auniform\x20i'+'nt\x20uShapeN'+';\x0a\x0a#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bay'+'erPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'opacityDit'+'herPS\x22\x0a\x20\x20\x20'+'\x20varying\x20f'+'loat\x20id;\x0a#'+'endif\x0a\x0a#if'+'def\x20PICK_P'+'ASS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pi'+'ckPS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20alphaC'+'lip;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20vLinearDe'+'pth;\x0a\x20\x20\x20\x20#'+'include\x20\x22f'+'loatAsUint'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20Fast\x20'+'approximat'+'e\x20e^x\x20base'+'d\x20on\x20https'+'://nic.sch'+'raudolph.o'+'rg/pubs/Sc'+'hraudolph9'+'9.pdf\x0acons'+'t\x20float\x20\x20E'+'XP_A\x20\x20\x20\x20\x20\x20'+'=\x2012102203'+'.0;\x20\x20\x20//\x20≈'+'\x202^23\x20/\x20ln'+'(2)\x0aconst\x20'+'int\x20\x20\x20\x20EXP'+'_BC_RMS\x20=\x20'+'1064866808'+';\x20\x20\x20//\x20(12'+'7\x20<<\x2023)\x20-'+'\x2060801\x20*\x208'+'\x0afloat\x20fas'+'tExp(float'+'\x20x)\x20{\x0a\x20\x20\x20\x20'+'int\x20i\x20=\x20in'+'t(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20in'+'tBitsToFlo'+'at(i);\x0a}\x0a\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianU'+'V;\x0avarying'+'\x20mediump\x20v'+'ec4\x20gaussi'+'anColor;\x0av'+'arying\x20med'+'iump\x20vec2\x20'+'gaussianSi'+'ze;\x0avaryin'+'g\x20mediump\x20'+'vec2\x20gauss'+'ianCUV;\x0ava'+'rying\x20medi'+'ump\x20float\x20'+'saveMargin'+'al;\x0a\x0a//\x20判断'+'点\x20p\x20是否在正\x20N'+'\x20边形内\x0a//\x20p:'+'\x20点坐标\x20(UV\x20空'+'间或局部空间)\x0a//'+'\x20N:\x20边数\x0a//\x20'+'r:\x20半径（归一化到'+('1时就是单位圆）\x0a/'+'/\x20center:\x20'+'中心偏移\x0abool\x20'+'insideRegu'+'larPolygon'+'(vec2\x20p,\x20i'+'nt\x20N,\x20floa'+'t\x20r,\x20vec2\x20'+'center)\x20{\x0a'+'\x20\x20\x20\x20//\x20平移坐'+'标，确保中心对齐\x0a\x20'+'\x20\x20\x20vec2\x20d\x20'+'=\x20p\x20-\x20cent'+'er;\x0a\x20\x20\x20\x20fl'+'oat\x20theta\x20'+'=\x20atan(d.y'+',\x20d.x);\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20当前'+'角度\x0a\x20\x20\x20\x20flo'+'at\x20len\x20=\x20l'+'ength(d);\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20当前半径'+'\x0a\x20\x20\x20\x20float'+'\x20anglePerS'+'ide\x20=\x202.0\x20'+'*\x203.141592'+'65\x20/\x20float'+'(N);\x0a\x0a\x20\x20\x20\x20'+'//\x20映射到\x200\x20~'+'\x20anglePerS'+'ide\x20区间\x0a\x20\x20\x20'+'\x20float\x20loc'+'alAngle\x20=\x20'+'mod(theta,'+'\x20anglePerS'+'ide);\x0a\x0a\x20\x20\x20'+'\x20//\x20到边界的最大'+'半径（极坐标下的正\x20'+'N\x20边形公式）\x0a\x20\x20'+'\x20\x20float\x20ma'+'xR\x20=\x20r\x20*\x20c'+'os(anglePe'+'rSide\x20/\x202.'+'0)\x20/\x20cos(l'+'ocalAngle\x20'+'-\x20anglePer'+'Side\x20/\x202.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20len\x20<'+'=\x20maxR;\x0a}\x0a'+'\x0a//\x20距离场方式的'+'正N边形\x20soft\x20'+'mask\x0afloat'+'\x20polygonSo'+'ftMask(vec'+'2\x20p,\x20int\x20N'+',\x20float\x20ra'+'dius,\x20floa'+'t\x20edgeSoft'+'ness)\x20{\x0a\x20\x20'+'\x20\x20float\x20an'+'gle\x20=\x20atan'+'(p.y,\x20p.x)'+';\x0a\x20\x20\x20\x20floa'+'t\x20sector\x20='+'\x206.2831853'+'\x20/\x20float(N'+');\x20\x20//\x20每个扇'+'区角度\x0a\x20\x20\x20\x20//'+'\x20将角度归一化到\x20['+'-sector/2,'+'\x20sector/2]'+'\x0a\x20\x20\x20\x20float'+'\x20halfSecto'+'r\x20=\x20sector'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20float\x20lo'+'calAngle\x20='+'\x20mod(angle'+'\x20+\x20halfSec'+'tor,\x20secto'+'r)\x20-\x20halfS'+'ector;\x0a\x0a\x20\x20'+'\x20\x20//\x20多边形边界'+'在该方向的最大半径\x0a'+'\x20\x20\x20\x20float\x20'+'boundary\x20='+'\x20radius\x20*\x20'+'cos(halfSe'+'ctor)\x20/\x20co'+'s(localAng'+'le);\x0a\x0a\x20\x20\x20\x20'+'//\x20距离\x20=\x20点到'+'边界的差值\x0a\x20\x20\x20\x20'+'float\x20dist'+'\x20=\x20boundar'+'y\x20-\x20length'+'(p);\x0a\x0a\x20\x20\x20\x20'+'//\x20用\x20smoot')+('hstep\x20实现软边'+'缘\x20(edgeSof'+'tness\x20控制边缘'+'模糊宽度)\x0a\x20\x20\x20\x20'+'float\x20alph'+'a\x20=\x20smooth'+'step(0.0,\x20'+'edgeSoftne'+'ss,\x20dist);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20alpha;\x20'+'//\x200~1\x0a}\x0a\x0a'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20mediump\x20'+'float\x20A\x20=\x20'+'dot(gaussi'+'anUV,\x20gaus'+'sianUV);\x0a\x20'+'\x20\x20\x20if\x20(A\x20>'+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'valuate\x20al'+'pha\x0a\x20\x20\x20\x20me'+'diump\x20floa'+'t\x20alpha\x20=\x20'+'fastExp(-A'+'\x20*\x204.0)\x20*\x20'+'gaussianCo'+'lor.a;\x0a\x20\x20\x20'+'\x20//\x20TODO\x20u'+'ShapeN\x20alp'+'ha\x0a\x20\x20\x20\x20//\x20'+'float\x20dx\x20='+'\x20abs(gauss'+'ianCUV.x)\x20'+'/\x20gaussian'+'Size.x;\x0a\x20\x20'+'\x20\x20//\x20float'+'\x20dy\x20=\x20abs('+'gaussianCU'+'V.y)\x20/\x20gau'+'ssianSize.'+'y;\x0a\x20\x20\x20\x20//\x20'+'float\x20B\x20=\x20'+'max(dx,\x20dy'+');\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20距离度量：矩形'+'边界\x0a\x20\x20\x20\x20//\x20'+'mediump\x20fl'+'oat\x20alpha\x20'+'=\x20exp(-pow'+'(B,\x202.0)\x20*'+'\x204.0)\x20*\x20ga'+'ussianColo'+'r.a;\x0a\x0a\x20\x20\x20\x20'+'bool\x20openR'+'ingMode\x20=\x20'+'ringSize\x20>'+'\x200.0\x20&&\x20mo'+'de\x20==\x201;\x20/'+'/\x20&&\x20uCont'+'rolMode\x20=='+'\x201;\x20\x0a\x20\x20\x20\x20i'+'f\x20(openRin'+'gMode\x20&&\x20s'+'aveMargina'+'l\x20>=\x200.05)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(A\x20<\x201'+'.0\x20-\x20ringS'+'ize)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'lpha\x20=\x20max'+'(0.05,\x20alp'+'ha);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alpha\x20'+'=\x200.6;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20bool\x20ope'+'nShapeMode'+'\x20=\x20uShapeN'+'\x20>\x202;\x20//\x20&'+'&\x20uControl'+'Mode\x20==\x201;'+'\x0a\x20\x20\x20\x20if\x20(o'+'penShapeMo'+'de)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20gaussi'+'anCUV\x20*\x202.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20rad'+'ius\x20=\x201.0;')+('\x20//\x201.0\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20edgeSoft'+'ness\x20=\x200.0'+'5;\x20//\x200.05'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v\x20*=\x201.0;/'+'/0.9;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20c'+'enter\x20=\x20ve'+'c2(0.0,\x200.'+'0);\x20\x20\x20//\x20如'+'果中心不在原点，传入'+'偏移\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20alpha\x20'+'=\x20polygonS'+'oftMask(uv'+',\x20uShapeN,'+'\x20radius,\x20e'+'dgeSoftnes'+'s);\x20//\x20透明\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(!insideR'+'egularPoly'+'gon(uv,\x20uS'+'hapeN,\x20rad'+'ius,\x20cente'+'r))\x20{\x20//裁剪'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20defined(S'+'HADOW_PASS'+')\x20||\x20defin'+'ed(PICK_PA'+'SS)\x20||\x20def'+'ined(PREPA'+'SS_PASS)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20a'+'lphaClip)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'getPickOut'+'put();\x0a\x0a\x20\x20'+'\x20\x20#elif\x20SH'+'ADOW_PASS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(0'+'.0,\x200.0,\x200'+'.0,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20#elif'+'\x20PREPASS_P'+'ASS\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20fl'+'oat2vec4(v'+'LinearDept'+'h);\x0a\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x201.0\x20/'+'\x20255.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20discard;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20DI'+'THER_NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(alph'+'a,\x20id\x20*\x200.'+'013);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'gaussianCo'+'lor.xyz,\x20a'+'lpha);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),d1='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0avec3\x20unpa'+'ck111011s('+'uint\x20bits)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec3(('+'uvec3(bits'+')\x20>>\x20uvec3'+'(21u,\x2011u,'+'\x200u))\x20&\x20uv'+'ec3(0x7ffu'+',\x200x3ffu,\x20'+'0x7ffu))\x20/'+'\x20vec3(2047'+'.0,\x201023.0'+',\x202047.0)\x20'+'*\x202.0\x20-\x201.'+'0;\x0a}\x0a\x0a//\x20f'+'etch\x20quant'+'ized\x20spher'+'ical\x20harmo'+'nic\x20coeffi'+'cients\x0avoi'+'d\x20fetchSca'+'le(in\x20uvec'+'4\x20t,\x20out\x20f'+'loat\x20scale'+',\x20out\x20vec3'+'\x20a,\x20out\x20ve'+'c3\x20b,\x20out\x20'+'vec3\x20c)\x20{\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20uintBits'+'ToFloat(t.'+'x);\x0a\x20\x20\x20\x20a\x20'+'=\x20unpack11'+'1011s(t.y)'+';\x0a\x20\x20\x20\x20b\x20=\x20'+'unpack1110'+'11s(t.z);\x0a'+'\x20\x20\x20\x20c\x20=\x20un'+'pack111011'+'s(t.w);\x0a}\x0a'+'\x0a//\x20fetch\x20'+'quantized\x20'+'spherical\x20'+'harmonic\x20c'+'oefficient'+'s\x0avoid\x20fet'+'ch(in\x20uvec'+'4\x20t,\x20out\x20v'+'ec3\x20a,\x20out'+'\x20vec3\x20b,\x20o'+'ut\x20vec3\x20c,'+'\x20out\x20vec3\x20'+'d)\x20{\x0a\x20\x20\x20\x20a'+'\x20=\x20unpack1'+'11011s(t.x'+');\x0a\x20\x20\x20\x20b\x20='+'\x20unpack111'+'011s(t.y);'+'\x0a\x20\x20\x20\x20c\x20=\x20u'+'npack11101'+'1s(t.z);\x0a\x20'+'\x20\x20\x20d\x20=\x20unp'+'ack111011s'+'(t.w);\x0a}\x0a\x0a'+'void\x20fetch'+'(in\x20uint\x20t'+',\x20out\x20vec3'+'\x20a)\x20{\x0a\x20\x20\x20\x20'+'a\x20=\x20unpack'+'111011s(t)'+';\x0a}\x0a\x0a#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20splatSH_'+'1to3;\x0a\x20\x20\x20\x20'+'void\x20readS'+'HData(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20sh'+'[3],\x20out\x20f'+'loat\x20scale'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetchSca'+'le(texelFe'+'tch(splatS'+'H_1to3,\x20so'+'urce.uv,\x200'+'),\x20scale,\x20'+'sh[0],\x20sh['+'1],\x20sh[2])'+(';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20SH_BAN'+'DS\x20==\x202\x0a\x20\x20'+'\x20\x20uniform\x20'+'highp\x20usam'+'pler2D\x20spl'+'atSH_1to3;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20highp\x20u'+'sampler2D\x20'+'splatSH_4t'+'o7;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_8to11;\x0a\x20\x20'+'\x20\x20void\x20rea'+'dSHData(in'+'\x20SplatSour'+'ce\x20source,'+'\x20out\x20vec3\x20'+'sh[8],\x20out'+'\x20float\x20sca'+'le)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetchS'+'cale(texel'+'Fetch(spla'+'tSH_1to3,\x20'+'source.uv,'+'\x200),\x20scale'+',\x20sh[0],\x20s'+'h[1],\x20sh[2'+']);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetch(te'+'xelFetch(s'+'platSH_4to'+'7,\x20source.'+'uv,\x200),\x20sh'+'[3],\x20sh[4]'+',\x20sh[5],\x20s'+'h[6]);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20fetch'+'(texelFetc'+'h(splatSH_'+'8to11,\x20sou'+'rce.uv,\x200)'+'.x,\x20sh[7])'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_1to3;\x0a\x20\x20\x20'+'\x20uniform\x20h'+'ighp\x20usamp'+'ler2D\x20spla'+'tSH_4to7;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20us'+'ampler2D\x20s'+'platSH_8to'+'11;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_12to15;\x0a\x20'+'\x20\x20\x20void\x20re'+'adSHData(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20sh[15],\x20o'+'ut\x20float\x20s'+'cale)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fetc'+'hScale(tex'+'elFetch(sp'+'latSH_1to3'+',\x20source.u'+'v,\x200),\x20sca'+'le,\x20sh[0],'+'\x20sh[1],\x20sh'+'[2]);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetch('+'texelFetch'+'(splatSH_4'+'to7,\x20sourc'+'e.uv,\x200),\x20'+'sh[3],\x20sh['+'4],\x20sh[5],'+'\x20sh[6]);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fet'+'ch(texelFe'+'tch(splatS'+'H_8to11,\x20s'+'ource.uv,\x20'+'0),\x20sh[7],'+'\x20sh[8],\x20sh'+'[9],\x20sh[10'+']);\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20fetch(te'+'xelFetch(s'+'platSH_12t'+'o15,\x20sourc'+'e.uv,\x200),\x20'+'sh[11],\x20sh'+'[12],\x20sh[1'+'3],\x20sh[14]'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0a#en'+'dif\x0a'),f1='\x0aattribute'+'\x20vec3\x20vert'+'ex_positio'+'n;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20xy:\x20co'+'rnerUV,\x20z:'+'\x20render\x20or'+'der\x20offset'+'\x0aattribute'+'\x20uint\x20vert'+'ex_id_attr'+'ib;\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20render'+'\x20order\x20bas'+'e\x0a\x0auniform'+'\x20uint\x20numS'+'plats;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20tota'+'l\x20number\x20o'+'f\x20splats\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20splatO'+'rder;\x20\x20\x20\x20/'+'/\x20per-spla'+'t\x20index\x20to'+'\x20source\x20ga'+'ussian\x0a\x0a//'+'\x20initializ'+'e\x20the\x20spla'+'t\x20source\x20s'+'tructure\x0ab'+'ool\x20initSo'+'urce(out\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(splatOrde'+'r,\x200).x);\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20ui'+'nt(vertex_'+'position.z'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20if'+'\x20out\x20of\x20ra'+'nge\x20(since'+'\x20the\x20last\x20'+'block\x20of\x20s'+'plats\x20may\x20'+'be\x20partial'+'ly\x20full)\x0a\x20'+'\x20\x20\x20if\x20(sou'+'rce.order\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'vec2\x20order'+'UV\x20=\x20ivec2'+'(source.or'+'der\x20%\x20w,\x20s'+'ource.orde'+'r\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20splat\x20id\x0a'+'\x20\x20\x20\x20source'+'.id\x20=\x20texe'+'lFetch(spl'+'atOrder,\x20o'+'rderUV,\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20/'+'/\x20map\x20id\x20t'+'o\x20uv\x0a\x20\x20\x20\x20s'+'ource.uv\x20='+'\x20ivec2(sou'+'rce.id\x20%\x20w'+',\x20source.i'+'d\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20true;'+'\x0a}\x0a',u1='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0aun'+'iform\x20int\x20'+'pointCloud'+'ModeEnable'+'d;\x0auniform'+'\x20float\x20uTi'+'me;\x0aunifor'+'m\x20float\x20pr'+'erenderCTi'+'me;\x0aunifor'+'m\x20float\x20uS'+'aturation;'+'\x20//\x200.0-2.'+'0，1.0\x20为原始饱'+'和度\x0auniform'+'\x20float\x20uHu'+'eOffset;\x20\x20'+'//\x20色相偏移，单位'+'：度（360度环绕）'+'\x0auniform\x20v'+'ec3\x20clrOff'+'set;\x0aunifo'+'rm\x20vec4\x20cl'+'rScale;\x0aun'+'iform\x20floa'+'t\x20uOpacity'+';\x0auniform\x20'+'int\x20uInver'+'tOpacity;\x0a'+'\x0avarying\x20m'+'ediump\x20vec'+'2\x20gaussian'+'UV;\x0avaryin'+'g\x20mediump\x20'+'vec4\x20gauss'+'ianColor;\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianS'+'ize;\x0avaryi'+'ng\x20mediump'+'\x20vec2\x20gaus'+'sianCUV;\x0av'+'arying\x20med'+'iump\x20float'+'\x20saveMargi'+'nal;\x0a\x0a//\x20='+'====\x20高精度\x20H'+'SV/RGB\x20转换\x20'+'=====\x0ahigh'+'p\x20vec3\x20rgb'+'2hsv(highp'+'\x20vec3\x20c)\x20{'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20cMa'+'x\x20=\x20max(ma'+'x(c.r,\x20c.g'+'),\x20c.b);\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20cMin\x20'+'=\x20min(min('+'c.r,\x20c.g),'+'\x20c.b);\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20delta\x20='+'\x20cMax\x20-\x20cM'+'in\x20+\x201e-10'+';\x20//\x20避免除0\x0a'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20h\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'if\x20(delta\x20'+'>\x201e-6)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(cMax\x20==\x20'+'c.r)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20=\x20mod((c.'+'g\x20-\x20c.b)\x20/'+'\x20delta,\x206.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(cMax\x20=='+'\x20c.g)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.b\x20-'+'\x20c.r)\x20/\x20de'+'lta\x20+\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.r\x20-'+'\x20c.g)\x20/\x20de'+'lta\x20+\x204.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20/=\x206.0;\x20/'+'/\x20转到\x20[0,1]'+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(h\x20<\x200.0'+')\x20h\x20+=\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20s\x20=\x20('+'cMax\x20<\x201e-'+'6)\x20?\x200.0\x20:'+'\x20delta\x20/\x20c'+'Max;\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20v\x20=\x20cMax;'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec3(h,\x20'+'s,\x20v);\x0a}\x0a\x0a'+'highp\x20vec3'+'\x20hsv2rgb(h'+'ighp\x20vec3\x20'+'c)\x20{\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20h\x20=\x20c.x\x20*'+'\x206.0;\x20//\x200'+'-6\x0a\x20\x20\x20\x20hig'+'hp\x20float\x20s'+'\x20=\x20c.y;\x0a\x20\x20'+'\x20\x20highp\x20fl'+'oat\x20v\x20=\x20c.'+'z;\x0a\x0a\x20\x20\x20\x20hi'+'ghp\x20int\x20i\x20'+'=\x20int(floo'+'r(h));\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20f\x20=\x20h\x20-'+'\x20float(i);'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20p\x20='+'\x20v\x20*\x20(1.0\x20'+'-\x20s);\x0a\x20\x20\x20\x20'+'highp\x20floa'+'t\x20q\x20=\x20v\x20*\x20'+'(1.0\x20-\x20s\x20*'+'\x20f);\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20t\x20=\x20v\x20*\x20('+'1.0\x20-\x20s\x20*\x20'+'(1.0\x20-\x20f))'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(i\x20==\x200)\x20r'+'eturn\x20vec3'+'(v,\x20t,\x20p);'+'\x0a\x20\x20\x20\x20else\x20'+'if\x20(i\x20==\x201'+')\x20return\x20v'+'ec3(q,\x20v,\x20'+'p);\x0a\x20\x20\x20\x20el'+'se\x20if\x20(i\x20='+'=\x202)\x20retur'+'n\x20vec3(p,\x20'+'v,\x20t);\x0a\x20\x20\x20'+'\x20else\x20if\x20('+'i\x20==\x203)\x20re'+'turn\x20vec3('+'p,\x20q,\x20v);\x0a'+'\x20\x20\x20\x20else\x20i'+'f\x20(i\x20==\x204)'+'\x20return\x20ve'+'c3(t,\x20p,\x20v'+');\x0a\x20\x20\x20\x20els'+'e\x20return\x20v'+'ec3(v,\x20p,\x20'+'q);\x20//\x20i=='+'5\x0a}\x0a\x0a#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20id;\x0a#en'+'dif\x0a\x0amediu'+'mp\x20vec4\x20di'+'scardVec\x20='+'\x20vec4(0.0,'+'\x200.0,\x202.0,'+'\x201.0);\x0a\x0a#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20varying\x20'+'float\x20vLin'+'earDepth;\x0a'+'#endif\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'//\x20read\x20ga'+'ussian\x20det'+'ails\x0a\x20\x20\x20\x20S'+'platSource'+'\x20source;\x0a\x20'+'\x20\x20\x20if\x20(!in'+'itSource(s'+'ource))\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20')+('=\x20discardV'+'ec;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20saveMargi'+'nal\x20=\x20getM'+'arginalT(s'+'ource,\x20uTi'+'me);\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20float\x20'+'marginal\x20='+'\x20uOpenAnim'+'\x20==\x201\x20?\x201.'+'0\x20:\x20saveMa'+'rginal;\x0a\x20\x20'+'\x20\x20if\x20(marg'+'inal\x20<\x200.0'+'5)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Posi'+'tion\x20=\x20dis'+'cardVec;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec3'+'\x20modelCent'+'er;\x0a\x20\x20\x20\x20bo'+'ol\x20isCente'+'r4D\x20=\x20save'+'Marginal\x20>'+'=\x200.05;\x0a\x20\x20'+'\x20\x20if\x20(isCe'+'nter4D)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'delCenter\x20'+'=\x20readCent'+'er4D(sourc'+'e,\x20uTime);'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20modelCen'+'ter\x20=\x20read'+'Center(sou'+'rce);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20Spl'+'atCenter\x20c'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'center))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return;'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20int\x20'+'showCloud\x20'+'=\x20pointClo'+'udModeEnab'+'led;\x0a\x20\x20\x20\x20i'+'f\x20(prerend'+'erCTime\x20=='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(prer'+'enderCTime'+'\x20>=\x201.0\x20&&'+'\x20prerender'+'CTime\x20<\x202.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20showClo'+'ud\x20=\x201;\x0a\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(prerend'+'erCTime\x20>='+'\x202.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20proje'+'ct\x20center\x20'+'to\x20screen\x20'+'space\x0a\x20\x20\x20\x20'+'SplatCorne'+'r\x20corner;\x0a'+'\x20\x20\x20\x20if\x20(!i'+'nitCorner('+'source,\x20ce'+'nter,\x20corn'+'er,\x20showCl'+'oud))\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_P'+'osition\x20=\x20')+('discardVec'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20vec'+'4\x20clr\x20=\x20re'+'adColor(so'+'urce,\x20uTim'+'e,\x20!isCent'+'er4D,\x20poin'+'tCloudMode'+'Enabled);\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'apply\x20AA\x20c'+'ompensatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'clr.a\x20*=\x20c'+'orner.aaFa'+'ctor;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20if(margi'+'nal\x20>\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20clr.w\x20*=\x20'+'marginal;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20开关控制\x0a\x20'+'\x20\x20\x20if\x20(uCo'+'ntrolColor'+'Mode\x20==\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'tint/brigh'+'tness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr\x20=\x20'+'clr\x20*\x20clrS'+'cale\x20+\x20vec'+'4(clrOffse'+'t,\x200.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(uInvertO'+'pacity\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20clr'+'.a\x20=\x201.0\x20-'+'\x20clr.a;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20don\x27t\x20'+'allow\x20out-'+'of-range\x20a'+'lpha\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20clr\x20=\x20c'+'lamp(clr,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20evalu'+'ate\x20spheri'+'cal\x20harmon'+'ics\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20the\x20'+'model-spac'+'e\x20view\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20norm'+'alize(cent'+'er.view\x20*\x20'+'mat3(cente'+'r.modelVie'+'w));\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20rea'+'d\x20sh\x20coeff'+'icients\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sh[SH_COE'+'FFS];\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20readS'+'HData(sour'+'ce,\x20sh,\x20sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr.x'+'yz\x20+=\x20eval'+'SH(sh,\x20dir'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(co'+'rner,\x20clr.'+'w);\x0a\x0a\x20\x20\x20\x20/')+('/\x20pointClo'+'udMode\x0a\x20\x20\x20'+'\x20//\x20if\x20(po'+'intCloudMo'+'deEnabled\x20'+'==\x201)\x20{\x0a\x20\x20'+'\x20\x20//\x20\x20\x20\x20\x20c'+'lr.a\x20=\x201.0'+';\x0a\x20\x20\x20\x20//\x20}'+'\x0a\x20\x20\x20\x20highp'+'\x20vec3\x20colo'+'r\x20=\x20max(cl'+'r.xyz,\x200.0'+');\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20开关控制\x0a'+'\x20\x20\x20\x20if\x20(uC'+'ontrolColo'+'rMode\x20==\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20转\x20HSV'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'ighp\x20vec3\x20'+'hsv\x20=\x20rgb2'+'hsv(color)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20调整饱和度\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20hsv.'+'y\x20*=\x20uSatu'+'ration;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20调整'+'色相\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20hsv.x\x20=\x20f'+'ract(hsv.x'+'\x20+\x20uHueOff'+'set\x20/\x20360.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20转回\x20RGB'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor\x20=\x20hsv'+'2rgb(hsv);'+'\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wri'+'te\x20output\x0a'+'\x20\x20\x20\x20gl_Pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4(cor'+'ner.offset'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20gaussia'+'nUV\x20=\x20corn'+'er.uv;\x0a\x20\x20\x20'+'\x20gaussianC'+'UV\x20=\x20corne'+'r.cUV;\x0a\x20\x20\x20'+'\x20gaussianS'+'ize\x20=\x20corn'+'er.cSize;\x0a'+'\x20\x20\x20\x20gaussi'+'anColor\x20=\x20'+'vec4(prepa'+'reOutputFr'+'omGamma(co'+'lor),\x20clr.'+'w);\x0a\x20\x20\x20\x20ga'+'ussianColo'+'r\x20=\x20clamp('+'gaussianCo'+'lor,\x200.0,\x20'+'1.0);\x0a\x0a\x20\x20\x20'+'\x20#ifndef\x20D'+'ITHER_NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'d\x20=\x20float('+'source.id)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vLin'+'earDepth\x20='+'\x20-center.v'+'iew.z;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),m1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'aPosition;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x0a\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(aPos'+'ition,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv0\x20'+'=\x20getImage'+'EffectUV(('+'aPosition.'+'xy\x20+\x201.0)\x20'+'*\x200.5);\x0a\x20\x20'+'\x20\x20}\x0a',p1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec4\x20c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(decodeG'+'amma(color'+'.rgb)),\x20co'+'lor.a);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a',_1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec4\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec4\x20vert'+'ex_color;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20co'+'lor;\x0a\x20\x20\x20\x20v'+'oid\x20main(v'+'oid)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20=\x20vertex_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20matrix_'+'model\x20*\x20ve'+'rtex_posit'+'ion;\x0a\x20\x20\x20\x20}'+'\x0a',g1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceRefra'+'ctionIndex'+';\x0a\x0afloat\x20i'+'ridescence'+'_iorToFres'+'nel(float\x20'+'transmitte'+'dIor,\x20floa'+'t\x20incident'+'Ior)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'incidentIo'+'r)\x20/\x20(tran'+'smittedIor'+'\x20+\x20inciden'+'tIor),\x202.0'+');\x0a}\x0a\x0avec3'+'\x20iridescen'+'ce_iorToFr'+'esnel(vec3'+'\x20transmitt'+'edIor,\x20flo'+'at\x20inciden'+'tIor)\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow((transm'+'ittedIor\x20-'+'\x20vec3(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3(incid'+'entIor)),\x20'+'vec3(2.0))'+';\x0a}\x0a\x0avec3\x20'+'iridescenc'+'e_fresnelT'+'oIor(vec3\x20'+'f0)\x20{\x0a\x20\x20\x20\x20'+'vec3\x20sqrtF'+'0\x20=\x20sqrt(f'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20(vec3'+'(1.0)\x20+\x20sq'+'rtF0)\x20/\x20(v'+'ec3(1.0)\x20-'+'\x20sqrtF0);\x0a'+'}\x0a\x0avec3\x20ir'+'idescence_'+'sensitivit'+'y(float\x20op'+'d,\x20vec3\x20sh'+'ift)\x20{\x0a\x20\x20\x20'+'\x20float\x20PI\x20'+'=\x203.141592'+'653589793;'+'\x0a\x20\x20\x20\x20float'+'\x20phase\x20=\x202'+'.0\x20*\x20PI\x20*\x20'+'opd\x20*\x201.0e'+'-9;\x0a\x20\x20\x20\x20co'+'nst\x20vec3\x20v'+'al\x20=\x20vec3('+'5.4856e-13'+',\x204.4201e-'+'13,\x205.2481'+'e-13);\x0a\x20\x20\x20'+'\x20const\x20vec'+'3\x20pos\x20=\x20ve'+'c3(1.6810e'+'+06,\x201.795'+'3e+06,\x202.2'+'084e+06);\x0a'+'\x20\x20\x20\x20const\x20'+'vec3\x20var\x20='+'\x20vec3(4.32'+'78e+09,\x209.'+'3046e+09,\x20'+'6.6121e+09'+');\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20xyz\x20=\x20v'+'al\x20*\x20sqrt('+'2.0\x20*\x20PI\x20*'+'\x20var)\x20*\x20co'+'s(pos\x20*\x20ph'+'ase\x20+\x20shif'+'t)\x20*\x20exp(-'+'pow(phase,'+'\x202.0)\x20*\x20va'+'r);\x0a\x20\x20\x20\x20xy'+'z.x\x20+=\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+('cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20/=\x20vec3(1'+'.0685e-07)'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20mat3\x20XY'+'Z_TO_REC70'+'9\x20=\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x203.'+'2404542,\x20-'+'0.9692660,'+'\x20\x200.055643'+'4,\x0a\x20\x20\x20\x20\x20\x20\x20'+'-1.5371385'+',\x20\x201.87601'+'08,\x20-0.204'+'0259,\x0a\x20\x20\x20\x20'+'\x20\x20\x20-0.4985'+'314,\x20\x200.04'+'15560,\x20\x201.'+'0572252\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'return\x20XYZ'+'_TO_REC709'+'\x20*\x20xyz;\x0a}\x0a'+'\x0afloat\x20iri'+'descence_f'+'resnel(flo'+'at\x20cosThet'+'a,\x20float\x20f'+'0)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20x\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20x2\x20=\x20x\x20*'+'\x20x;\x0a\x20\x20\x20\x20fl'+'oat\x20x5\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x20\x0a\x0av'+'ec3\x20irides'+'cence_fres'+'nel(float\x20'+'cosTheta,\x20'+'vec3\x20f0)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20clamp'+'(1.0\x20-\x20cos'+'Theta,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20float\x20x2'+'\x20=\x20x\x20*\x20x;\x0a'+'\x20\x20\x20\x20float\x20'+'x5\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x20\x0a\x20'+'\x20\x20\x20return\x20'+'f0\x20+\x20(vec3'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0avec3\x20calc'+'Iridescenc'+'e(float\x20ou'+'tsideIor,\x20'+'float\x20cosT'+'heta,\x20vec3'+'\x20base_f0,\x20'+'float\x20irid'+'escenceThi'+'ckness)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceIor\x20'+'=\x20mix(outs'+'ideIor,\x20ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20float'+'\x20sinTheta2'+'Sq\x20=\x20pow(o'+'utsideIor\x20'+'/\x20iridesce')+('nceIor,\x202.'+'0)\x20*\x20(1.0\x20'+'-\x20pow(cosT'+'heta,\x202.0)'+');\x0a\x20\x20\x20\x20flo'+'at\x20cosThet'+'a2Sq\x20=\x201.0'+'\x20-\x20sinThet'+'a2Sq;\x0a\x0a\x20\x20\x20'+'\x20if\x20(cosTh'+'eta2Sq\x20<\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec3(1.0)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20c'+'osTheta2\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20r0\x20=\x20irid'+'escence_io'+'rToFresnel'+'(iridescen'+'ceIor,\x20out'+'sideIor);\x0a'+'\x20\x20\x20\x20float\x20'+'r12\x20=\x20irid'+'escence_fr'+'esnel(cosT'+'heta,\x20r0);'+'\x0a\x20\x20\x20\x20float'+'\x20r21\x20=\x20r12'+';\x0a\x20\x20\x20\x20floa'+'t\x20t121\x20=\x201'+'.0\x20-\x20r12;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20phi12\x20=\x20i'+'ridescence'+'Ior\x20<\x20outs'+'ideIor\x20?\x20P'+'I\x20:\x200.0;\x0a\x20'+'\x20\x20\x20float\x20p'+'hi21\x20=\x20PI\x20'+'-\x20phi12;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20b'+'aseIor\x20=\x20i'+'ridescence'+'_fresnelTo'+'Ior(base_f'+'0\x20+\x20vec3(0'+'.0001));\x0a\x20'+'\x20\x20\x20vec3\x20r1'+'\x20=\x20iridesc'+'ence_iorTo'+'Fresnel(ba'+'seIor,\x20iri'+'descenceIo'+'r);\x0a\x20\x20\x20\x20ve'+'c3\x20r23\x20=\x20i'+'ridescence'+'_fresnel(c'+'osTheta2,\x20'+'r1);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20phi23'+'\x20=\x20vec3(0.'+'0);\x0a\x20\x20\x20\x20if'+'\x20(baseIor['+'0]\x20<\x20iride'+'scenceIor)'+'\x20phi23[0]\x20'+'=\x20PI;\x0a\x20\x20\x20\x20'+'if\x20(baseIo'+'r[1]\x20<\x20iri'+'descenceIo'+'r)\x20phi23[1'+']\x20=\x20PI;\x0a\x20\x20'+'\x20\x20if\x20(base'+'Ior[2]\x20<\x20i'+'ridescence'+'Ior)\x20phi23'+'[2]\x20=\x20PI;\x0a'+'\x20\x20\x20\x20float\x20'+'opd\x20=\x202.0\x20'+'*\x20iridesce'+'nceIor\x20*\x20i'+'ridescence'+'Thickness\x20'+'*\x20cosTheta'+'2;\x0a\x20\x20\x20\x20vec'+'3\x20phi\x20=\x20ve'+'c3(phi21)\x20'+'+\x20phi23;\x20\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123Sq\x20=\x20c'+'lamp(r12\x20*'+'\x20r23,\x201e-5'+',\x200.9999);'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123\x20=\x20sqr')+('t(r123Sq);'+'\x0a\x20\x20\x20\x20vec3\x20'+'rs\x20=\x20pow(t'+'121,\x202.0)\x20'+'*\x20r23\x20/\x20(1'+'.0\x20-\x20r123S'+'q);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20c0\x20=\x20r'+'12\x20+\x20rs;\x0a\x20'+'\x20\x20\x20vec3\x20i\x20'+'=\x20c0;\x0a\x0a\x20\x20\x20'+'\x20vec3\x20cm\x20='+'\x20rs\x20-\x20t121'+';\x0a\x20\x20\x20\x20for\x20'+'(int\x20m\x20=\x201'+';\x20m\x20<=\x202;\x20'+'m++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20cm\x20*='+'\x20r123;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'sm\x20=\x202.0\x20*'+'\x20iridescen'+'ce_sensiti'+'vity(float'+'(m)\x20*\x20opd,'+'\x20float(m)\x20'+'*\x20phi);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20i\x20+='+'\x20cm\x20*\x20sm;\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20max'+'(i,\x20vec3(0'+'.0));\x0a}\x0a\x0av'+'ec3\x20getIri'+'descence(f'+'loat\x20cosTh'+'eta,\x20vec3\x20'+'specularit'+'y,\x20float\x20i'+'ridescence'+'Thickness)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),S1='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_irid'+'escence;\x0a#'+'endif\x0a\x0avoi'+'d\x20getIride'+'scence()\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_IRID'+'ESCENCE_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20iridescen'+'ce\x20*=\x20mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20*=\x20textur'+'e2DBias({S'+'TD_IRIDESC'+'ENCE_TEXTU'+'RE_NAME},\x20'+'{STD_IRIDE'+'SCENCE_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCE_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scence\x20=\x20i'+'ridescence'+';\x20\x0a}\x0a',y1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceThick'+'nessMax;\x0a\x0a'+'#ifdef\x20STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_iridesc'+'enceThickn'+'essMin;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'end\x20=\x20text'+'ure2DBias('+'{STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE_NAME},'+'\x20{STD_IRID'+'ESCENCETHI'+'CKNESS_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCET'+'HICKNESS_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20iridescen'+'ceThicknes'+'s\x20=\x20mix(ma'+'terial_iri'+'descenceTh'+'icknessMin'+',\x20material'+'_iridescen'+'ceThicknes'+'sMax,\x20blen'+'d);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20ir'+'idescenceT'+'hickness\x20='+'\x20material_'+'iridescenc'+'eThickness'+'Max;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dIridesce'+'nceThickne'+'ss\x20=\x20iride'+'scenceThic'+'kness;\x20\x0a}\x0a',v1='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'fractionIn'+'dex;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tIor()\x20{\x0a#'+'ifdef\x20STD_'+'IOR_CONSTA'+'NT\x0a\x20\x20\x20\x20dIo'+'r\x20=\x20materi'+'al_refract'+'ionIndex;\x0a'+'#else\x0a\x20\x20\x20\x20'+'dIor\x20=\x201.0'+'\x20/\x201.5;\x0a#e'+'ndif\x0a}\x0a',x1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20light{i}_'+'color;\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec3\x20light'+'{i}_direct'+'ion;\x0a\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20LIT_CODE'+'_LIGHTS_PO'+'INT\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20point\x20l'+'ights\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_pos'+'ition;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_ra'+'dius;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20SPOT\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20spot\x20ligh'+'ts\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20l'+'ight{i}_di'+'rection;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20light'+'{i}_innerC'+'oneAngle;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_outer'+'ConeAngle;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'3\x20light{i}'+'_position;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20vec3\x20lig'+'ht{i}_half'+'Width;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_hal'+'fHeight;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'FALLOFF\x20=='+'\x20LINEAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+('T_CODE_FAL'+'LOFF_LINEA'+'R\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20linear\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}FALLOFF\x20'+'==\x20INVERSE'+'SQUARED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ca'+'sting\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'CASTSHADOW'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'at4\x20light{'+'i}_shadowM'+'atrix;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_sh'+'adowIntens'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec4\x20ligh'+'t{i}_shado'+'wParams;\x20/'+'/\x20width,\x20h'+'eight,\x20bia'+'s,\x20radius\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_s'+'hadowSearc'+'hArea;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20light{i}'+'_cameraPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_sof'+'tShadowPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20direction'+'al\x20(cascad'+'ed)\x20shadow'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrixPa'+'lette[4];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec4\x20light'+'{i}_shadow'+'CascadeDis'+'tances;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20in'+'t\x20light{i}'+'_shadowCas')+('cadeCount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_shad'+'owCascadeB'+'lend;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'SHADOW_PCF'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2DShado'+'w\x20light{i}'+'_shadowMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_shadowM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'okie\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIGHT{i}C'+'OOKIE)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_COOKIE\x20'+'//\x20include'+'\x20functiona'+'lity\x20for\x20c'+'ookies\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20light{i'+'}_cookie;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_cooki'+'eIntensity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d'+'efined(LIG'+'HT{i}CASTS'+'HADOW)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20ligh'+'t{i}_shado'+'wMatrix;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20SPOT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20lig')+('ht{i}_cook'+'ie;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_c'+'ookieInten'+'sity;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIGHT{i}C'+'ASTSHADOW)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'light{i}_s'+'hadowMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIGH'+'T{i}COOKIE'+'_TRANSFORM'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20light{i}_'+'cookieMatr'+'ix;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c2\x20light{i'+'}_cookieOf'+'fset;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),T1='\x0afloat\x20get'+'LightDiffu'+'se(vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir,\x20vec3\x20'+'lightDirNo'+'rm)\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',w1='\x0avec3\x20eval'+'OmniLight('+'vec3\x20light'+'PosW)\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'PositionW\x20'+'-\x20lightPos'+'W;\x0a}\x0a',E1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',A1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0avoid\x20e'+'valuateLig'+'ht{i}(\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20iridesc'+'enceFresne'+'l\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20color\x0a\x20\x20\x20'+'\x20vec3\x20ligh'+'tColor\x20=\x20l'+'ight{i}_co'+'lor;\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x20&&\x20!defi'+'ned(LIT_SH'+'ADOW_CATCH'+'ER)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20return\x20if'+'\x20the\x20light'+'\x20color\x20is\x20'+'black\x20(use'+'d\x20by\x20shado'+'w\x20catcher\x20'+'-\x20this\x20way'+'\x20this\x20ligh'+'t\x20is\x20very\x20'+'cheap)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(a'+'ll(equal(l'+'ightColor,'+'\x20vec3(0.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20dir'+'ectional\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dLight'+'DirNormW\x20='+'\x20light{i}_'+'direction;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20omn'+'i\x20or\x20spot\x20'+'light\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtDirW\x20=\x20'+'evalOmniLi'+'ght(light{'+'i}_positio'+'n);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightDi'+'rNormW\x20=\x20n'+'ormalize(l'+'ightDirW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20cookie\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'COOKIE)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_FALLOF'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_TRANSF'+'ORM\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2DXform('+('light{i}_c'+'ookie,\x20lig'+'ht{i}_shad'+'owMatrix,\x20'+'light{i}_c'+'ookieInten'+'sity,\x20ligh'+'t{i}_cooki'+'eMatrix,\x20l'+'ight{i}_co'+'okieOffset'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2D(light'+'{i}_cookie'+',\x20light{i}'+'_shadowMat'+'rix,\x20light'+'{i}_cookie'+'Intensity)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}COOKIE_TR'+'ANSFORM\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'Cookie2DCl'+'ipXform(li'+'ght{i}_coo'+'kie,\x20light'+'{i}_shadow'+'Matrix,\x20li'+'ght{i}_coo'+'kieIntensi'+'ty,\x20light{'+'i}_cookieM'+'atrix,\x20lig'+'ht{i}_cook'+'ieOffset).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20cookieAtt'+'enuation\x20='+'\x20getCookie'+'2DClip(lig'+'ht{i}_cook'+'ie,\x20light{'+'i}_shadowM'+'atrix,\x20lig'+'ht{i}_cook'+'ieIntensit'+'y).{LIGHT{'+'i}COOKIE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20OMNI\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'CookieCube'+'(light{i}_'+'cookie,\x20li'+'ght{i}_sha')+('dowMatrix,'+'\x20light{i}_'+'cookieInte'+'nsity).{LI'+'GHT{i}COOK'+'IE_CHANNEL'+'};\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20mu'+'ltiply\x20lig'+'ht\x20color\x20b'+'y\x20the\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lig'+'htColor\x20*='+'\x20cookieAtt'+'enuation;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20di'+'stance\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20==\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}FAL'+'LOFF\x20==\x20LI'+'NEAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Linear(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20=\x20g'+'etFalloffI'+'nvSquared('+'light{i}_r'+'adius,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20non'+'\x20punctual\x20'+'lights\x20onl'+'y\x20gets\x20the'+'\x20range\x20win'+'dow\x20here\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Window(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20spot\x20li'+'ght\x20angle\x20'+'falloff\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20SPOT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20!de'+'fined(LIGH'+'T{i}COOKIE'+')\x20||\x20defin'+'ed(LIGHT{i'+'}COOKIE_FA'+'LLOFF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dAtten\x20'+'*=\x20getSpot'+'Effect(lig'+'ht{i}_dire'+'ction,\x20lig'+'ht{i}_inne'+'rConeAngle'+',\x20light{i}'+'_outerCone'+'Angle,\x20dLi'+'ghtDirNorm'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20if\x20(dA'+'tten\x20<\x200.0')+('0001)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20are'+'a\x20light\x20va'+'lues\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcR'+'ectLightVa'+'lues(light'+'{i}_positi'+'on,\x20light{'+'i}_halfWid'+'th,\x20light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20calcDi'+'skLightVal'+'ues(light{'+'i}_positio'+'n,\x20light{i'+'}_halfWidt'+'h,\x20light{i'+'}_halfHeig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcS'+'phereLight'+'Values(lig'+'ht{i}_posi'+'tion,\x20ligh'+'t{i}_halfW'+'idth,\x20ligh'+'t{i}_halfH'+'eight);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'lighting\x20-'+'\x20LTC\x20light'+'s\x20do\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20'+'into\x20atten'+'uation\x20tha'+'t\x20affects\x20'+'specular\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20atten'+'Diffuse\x20-\x20'+'separate\x20d'+'iffuse\x20att'+'enuation\x20f'+'or\x20non-pun'+'ctual\x20ligh'+'t\x20sources\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20NB:\x20'+'A\x20better\x20a'+'pproximati'+'on\x20perhaps'+'\x20using\x20wra'+'p\x20lighting'+'\x20could\x20be\x20'+'implemente'+'d\x20here\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20atten'+'Diffuse\x20=\x20'+'getLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dL'+'ightDirNor'+'mW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x2016.0\x20i'+'s\x20a\x20consta'+'nt\x20that\x20is'+'\x20in\x20getFal'+'loffInvSqu'+'ared()\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20==\x20'+'RECT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getRectL'+'ightDiffus'+'e(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20lightD'+'irW,\x20dLigh'+'tDirNormW)'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20attenDiff'+'use\x20=\x20getD'+'iskLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20li'+'ghtDirW,\x20d'+'LightDirNo'+'rmW)\x20*\x2016.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getSpher'+'eLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20ligh'+'tDirW,\x20dLi'+'ghtDirNorm'+'W)\x20*\x2016.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20one\x20'+'parameter\x20'+'is\x20unused\x20'+'for\x20punctu'+'al\x20lights\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20*=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20vec3('+'0.0),\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20apply\x20th'+'e\x20shadow\x20a'+'ttenuation'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'CASTSHADOW'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadow{i'+'}(vec3(0.0'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adow{i}(li'+'ghtDirW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20App')+('ly\x20shadow\x20'+'intensity\x20'+'to\x20the\x20sha'+'dow\x20value\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20=\x20mix'+'(1.0,\x20shad'+'ow,\x20light{'+'i}_shadowI'+'ntensity);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20*=\x20'+'shadow;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_SHADOW_'+'CATCHER)\x20&'+'&\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20accum'+'ulate\x20shad'+'ows\x20for\x20di'+'rectional\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ShadowCatc'+'her\x20*=\x20sha'+'dow;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20-\x20they\x20do'+'\x20not\x20mix\x20d'+'iffuse\x20lig'+'hting\x20into'+'\x20specular\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20('+'(attenDiff'+'use\x20*\x20dAtt'+'en)\x20*\x20ligh'+'tColor)\x20*\x20'+'(1.0\x20-\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(atte'+'nDiffuse\x20*'+'\x20dAtten)\x20*'+'\x20lightColo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20punctua'+'l\x20light\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(AR'+'EA_LIGHTS)'+'\x20&&\x20define'+'d(LIT_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(dAtt'+'en\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20litA'+'rgs_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20spec'+'ular\x20light'+'ing\x0a\x20\x20\x20\x20#i'+'fdef\x20LIGHT')+('{i}AFFECT_'+'SPECULARIT'+'Y\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x20//\x20area\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccSpecula'+'rLight\x20+=\x20'+'ccLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_clear'+'coat_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20ccLTC'+'SpecFres\x20*'+'\x20getDiskLi'+'ghtSpecula'+'r(litArgs_'+'clearcoat_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20+'+'=\x20ccLTCSpe'+'cFres\x20*\x20ge'+'tSphereLig'+'htSpecular'+'(litArgs_c'+'learcoat_w'+'orldNormal'+',\x20dViewDir'+'W)\x20*\x20dAtte'+'n\x20*\x20lightC'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20dLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp')+('ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20SPHERE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20d'+'LTCSpecFre'+'s\x20*\x20getSph'+'ereLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20punctual'+'\x20light\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20is\x20fres'+'nel\x20needed'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20LI'+'T_FRESNEL_'+'MODEL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'GHT{i}FRES'+'NEL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20hal'+'fDirW\x20=\x20no'+'rmalize(-d'+'LightDirNo'+'rmW\x20+\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20if\x20LTC\x20'+'lights\x20are'+'\x20present,\x20'+'specular\x20m'+'ust\x20be\x20acc'+'umulated\x20w'+'ith\x20specul'+'arity\x20(spe'+'cularity\x20i'+'s\x20pre\x20mult'+'iplied\x20by\x20'+'punctual\x20l'+'ight\x20fresn'+'el)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtspecula'+'rCC\x20=\x20getL'+'ightSpecul'+'ar(halfDir'+'W,\x20ccReflD'+'irW,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_clearcoat'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tspecularC'+'C\x20*=\x20getFr'+'esnelCC(do'+'t(dViewDir'+'W,\x20halfDir'+'W));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20lightsp'+'ecularCC;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_sheen_glo'+'ss)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20lightSpec'+'ular\x20=\x20get'+'LightSpecu'+'lar(halfDi'+'rW,\x20dReflD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightSpecu'+'lar\x20*=\x20get'+'Fresnel(do'+'t(dViewDir'+'W,\x20halfDir'+'W),\x20litArg'+'s_gloss,\x20l'+'itArgs_spe'+'cularity,\x20'+'iridescenc'+'eFresnel,\x20'+'litArgs_ir'+'idescence_'+'intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20*=\x20g'+'etFresnel('+'dot(dViewD'+'irW,\x20halfD'+'irW),\x20litA'+'rgs_gloss,'+'\x20litArgs_s')+('pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20lightSp'+'ecular\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20+=\x20light'+'Specular;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a#en'+'dif\x0a'),b1='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20vec3\x20'+'getShadowS'+'ampleCoord'+'{i}(mat4\x20s'+'hadowTrans'+'form,\x20vec4'+'\x20shadowPar'+'ams,\x20vec3\x20'+'worldPosit'+'ion,\x20vec3\x20'+'lightPos,\x20'+'inout\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'vec3\x20norma'+'l)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'urfacePosi'+'tion\x20=\x20wor'+'ldPosition'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT{i}_SHA'+'DOW_SAMPLE'+'_POINT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20len'+'gth(lightD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightDir'+'\x20=\x20surface'+'Position\x20-'+'\x20lightPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20lightD'+'ir;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_S'+'OURCE_ZBUF'+'FER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+('NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_NORMAL_O'+'FFSET\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20distScal'+'e\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20abs'+'(dot(vPosi'+'tionW\x20-\x20li'+'ghtPos,\x20li'+'ghtDirNorm'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20posi'+'tionInShad'+'owSpace\x20=\x20'+'shadowTran'+'sform\x20*\x20ve'+'c4(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM'+'PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20/=\x20po'+'sitionInSh'+'adowSpace.')+('w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20posit'+'ionInShado'+'wSpace.xy\x20'+'/=\x20positio'+'nInShadowS'+'pace.w;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20po'+'sitionInSh'+'adowSpace.'+'z\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20thi'+'s\x20is\x20curre'+'ntly\x20unuse'+'d\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20SHADOW_SA'+'MPLE_Z_BIA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20positionI'+'nShadowSpa'+'ce.z\x20+=\x20ge'+'tShadowBia'+'s(shadowPa'+'rams.x,\x20sh'+'adowParams'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20positi'+'onInShadow'+'Space.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20surfaceP'+'osition;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'evaluation'+'\x20function\x0a'+'\x20\x20\x20\x20float\x20'+'getShadow{'+'i}(vec3\x20li'+'ghtDirW)\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20shado'+'w\x20cascades'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_CASCADES'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20sel'+'ect\x20shadow'+'\x20cascade\x20m'+'atrix\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'t\x20cascadeI'+'ndex\x20=\x20get'+'ShadowCasc'+'adeIndex(l'+'ight{i}_sh'+'adowCascad'+'eDistances'+',\x20light{i}'+'_shadowCas'+'cadeCount)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'_SHADOW_CA'+'SCADE_BLEN'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'scadeIndex'+'\x20=\x20ditherS'+'hadowCasca'+'deIndex(ca'+'scadeIndex'+',\x20light{i}'+'_shadowCas'+'cadeDistan'+'ces,\x20light')+('{i}_shadow'+'CascadeCou'+'nt,\x20light{'+'i}_shadowC'+'ascadeBlen'+'d);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mat4'+'\x20shadowMat'+'rix\x20=\x20ligh'+'t{i}_shado'+'wMatrixPal'+'ette[casca'+'deIndex];\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t4\x20shadowM'+'atrix\x20=\x20li'+'ght{i}_sha'+'dowMatrix;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20DIRE'+'CTIONAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20light'+'\x20does\x20not\x20'+'have\x20a\x20pos'+'ition\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20light'+'{i}_shadow'+'Params,\x20vP'+'ositionW,\x20'+'vec3(0.0),'+'\x20lightDirW'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20shad'+'owCoord\x20=\x20'+'getShadowS'+'ampleCoord'+'{i}(shadow'+'Matrix,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20vPosition'+'W,\x20light{i'+'}_position'+',\x20lightDir'+'W,\x20dLightD'+'irNormW,\x20d'+'VertexNorm'+'alW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Fade\x20di'+'rectional\x20'+'shadow\x20at\x20'+'the\x20far\x20di'+'stance\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadowCoord'+'\x20=\x20fadeSha'+'dow(shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owCascadeD'+'istances);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20--'+'---\x20sample'+'\x20the\x20shado'+'w\x20-----\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x20/'+'/\x20-----\x20di'+'rectional\x20'+'light\x20----')+('-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wVSM16(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x205'+'.54);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20VSM_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowVSM32('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x2015.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCS'+'S_32F\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20sh'+'adowSearch'+'Area\x20=\x20vec'+'2(length(l'+'ight{i}_ha'+'lfWidth),\x20'+'length(lig'+'ht{i}_half'+'Height))\x20*'+'\x20light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCSS(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20light{i}_'+'cameraPara'+'ms,\x20shadow'+'SearchArea'+',\x20lightDir'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20light{i}'+'_softShado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF1_16'+'F\x20||\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'1_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF3'+'_16F\x20||\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCF3x3(SH'+'ADOWMAP_PA'+'SS(light{i'+'}_shadowMa'+'p),\x20shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owParams);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF5_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF5_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(SHADOWMAP'+'_PASS(ligh'+'t{i}_shado'+'wMap),\x20sha'+'dowCoord,\x20'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20S'+'POT\x20//\x20---'+'--\x20spot\x20li'+'ght\x20-----\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20V'+'SM_16F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potVSM16(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x205.54,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowSpo')+('tVSM32(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x201'+'5.0,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20shad'+'owSearchAr'+'ea\x20=\x20vec2('+'length(lig'+'ht{i}_half'+'Width),\x20le'+'ngth(light'+'{i}_halfHe'+'ight))\x20*\x20l'+'ight{i}_sh'+'adowSearch'+'Area;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(lig'+'ht{i}_shad'+'owSearchAr'+'ea);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotPCSS('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x20light{i}'+'_cameraPar'+'ams,\x20shado'+'wSearchAre'+'a,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF1_1'+'6F\x20||\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potPCF1x1('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(SHA')+('DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F5_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'5x5(SHADOW'+'MAP_PASS(l'+'ight{i}_sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20light{i'+'}_shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x20//\x20'+'-----\x20omni'+'\x20light\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCSS_32F'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P'+'UNCTUAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(len'+'gth(light{'+'i}_halfWid'+'th),\x20lengt'+'h(light{i}'+'_halfHeigh'+'t))\x20*\x20ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2(light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20shadowSe'+'archArea,\x20'+'lightDirW)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_')+('32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF3_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF3_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowOmniPC'+'F3x3(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),C1='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20areaLi'+'ghtsLutTex'+'1;\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20sampler2D'+'\x20areaLight'+'sLutTex2;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCSSPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22shadow'+'SoftPS\x22\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(SH'+'ADOW_KIND_'+'VSM)\x0a\x20\x20\x20\x20#'+'include\x20\x22s'+('hadowEVSMP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_LINEA'+'R\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fall'+'offLinearP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22fal'+'loffInvSqu'+'aredPS\x22\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20LIT_COD'+'E_LIGHTS_P'+'OINT\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'ightDirPoi'+'ntPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22spot'+'PS\x22\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_CODE_CO'+'OKIE\x0a\x20\x20\x20\x20#'+'include\x20\x22c'+'ookiePS\x22\x0a#'+'endif\x0a\x0a//\x20'+'clustered\x20'+'lighting\x0a#'+'ifdef\x20LIT_'+'CLUSTERED_'+'LIGHTS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22clustered'+'LightPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHT_'+'COUNT\x20>\x200\x0a'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20genera'+'te\x20shadow\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionSha'+'dowPS,\x20LIG'+'HT_COUNT\x22\x0a'+'\x0a\x20\x20\x20\x20//\x20LO'+'OP\x20-\x20gener'+'ate\x20light\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionLig'+'htPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a'),P1='\x0avoid\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20vec3\x20li'+'ghtmap,\x20\x0a\x20'+'\x20\x20\x20vec3\x20di'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20worldNo'+'rmal,\x20\x0a\x20\x20\x20'+'\x20vec3\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'vec3\x20refle'+'ctionDir,\x20'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20'+'\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20vertexNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'mat3\x20tbn\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x20\x0a\x20\x20'+'\x20\x20float\x20ir'+'idescenceI'+'ntensity\x0a#'+'endif\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'rectional\x20'+'lightmap\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x20&'+'&\x20defined('+'LIT_DIR_LI'+'GHTMAP)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dot(dir,\x20'+'dir)\x20<\x200.0'+'001)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'lightmap;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20vligh'+'t\x20=\x20satura'+'te(dot(dir'+',\x20-vertexN'+'ormal));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20fli'+'ght\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20nl'+'ight\x20=\x20(fl'+'ight\x20/\x20max'+'(vlight,\x200'+'.01))\x20*\x200.'+'5;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p\x20*\x20nlight'+'\x20*\x202.0;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20half'+'Dir\x20=\x20norm'+'alize(-dir'+'\x20+\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'specularLi'+'ght\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'*=\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20getFre'+'snel(dot(v'+'iewDir,\x20ha'+'lfDir),\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceInt'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'+=\x20specula'+'rLight;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20non-dire'+'ctional\x20li'+'ghtmap\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),M1='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'vec3\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_d'+'irLightMap'+';\x0a#endif\x0a\x0a'+'void\x20getLi'+'ghtMap()\x20{'+'\x0a\x0a\x20\x20\x20\x20dLig'+'htmap\x20=\x20ve'+'c3(1.0);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_LIGHT'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dLi'+'ghtmap\x20*=\x20'+'{STD_LIGHT'+'_TEXTURE_D'+'ECODE}(tex'+'ture2DBias'+'({STD_LIGH'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'LIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_LIGHTM'+'AP_DIR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dir\x20=\x20'+'texture2DB'+'ias(textur'+'e_dirLight'+'Map,\x20{STD_'+'LIGHT_TEXT'+'URE_UV},\x20t'+'extureBias'+').xyz\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dir'+'Dot\x20=\x20dot('+'dir,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightm'+'apDir\x20=\x20(d'+'irDot\x20>\x200.'+'001)\x20?\x20dir'+'\x20/\x20sqrt(di'+'rDot)\x20:\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_LIGHT_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightma'+'p\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_LIGHT_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a}\x0a',I1='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'float\x20calc'+'LightSpecu'+'lar(float\x20'+'gloss,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20h,\x20vec'+'3\x20lightDir'+'Norm,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20float\x20PI'+'\x20=\x203.14159'+'2653589793'+';\x0a\x20\x20\x20\x20floa'+'t\x20roughnes'+'s\x20=\x20max((1'+'.0\x20-\x20gloss'+')\x20*\x20(1.0\x20-'+'\x20gloss),\x200'+'.001);\x0a\x20\x20\x20'+'\x20float\x20alp'+'haRoughnes'+'s\x20=\x20roughn'+'ess\x20*\x20roug'+'hness;\x0a\x20\x20\x20'+'\x20float\x20ani'+'sotropy\x20=\x20'+'dAnisotrop'+'y;\x0a\x20\x20\x20\x20vec'+'2\x20directio'+'n\x20=\x20dAniso'+'tropyRotat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'float\x20at\x20='+'\x20mix(alpha'+'Roughness,'+'\x201.0,\x20anis'+'otropy\x20*\x20a'+'nisotropy)'+';\x0a\x20\x20\x20\x20floa'+'t\x20ab\x20=\x20cla'+'mp(alphaRo'+'ughness,\x200'+'.001,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20anisotro'+'picT\x20=\x20nor'+'malize(tbn'+'\x20*\x20vec3(di'+'rection,\x200'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicB\x20=\x20'+'normalize('+'cross(tbn['+'2],\x20anisot'+'ropicT));\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20NoH\x20=\x20dot'+'(worldNorm'+'al,\x20h);\x0a\x20\x20'+'\x20\x20float\x20To'+'H\x20=\x20dot(an'+'isotropicT'+',\x20h);\x0a\x20\x20\x20\x20'+'float\x20BoH\x20'+'=\x20dot(anis'+'otropicB,\x20'+'h);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20a2\x20=\x20'+'at\x20*\x20ab;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20vec3(ab\x20'+'*\x20ToH,\x20at\x20'+'*\x20BoH,\x20a2\x20'+'*\x20NoH);\x0a\x20\x20'+'\x20\x20float\x20v2'+'\x20=\x20dot(v,\x20'+'v);\x0a\x20\x20\x20\x20fl'+'oat\x20w2\x20=\x20a'+'2\x20/\x20v2;\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'ToV\x20=\x20dot('+'anisotropi'+'cT,\x20viewDi'+'r);\x0a\x20\x20\x20\x20fl'+'oat\x20BoV\x20=\x20'+'dot(anisot'+'ropicB,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20float\x20To'+'L\x20=\x20dot(an'+'isotropicT'+(',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20Bo'+'L\x20=\x20dot(an'+'isotropicB'+',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20No'+'V\x20=\x20dot(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20float'+'\x20NoL\x20=\x20dot'+'(worldNorm'+'al,\x20-light'+'DirNorm);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20lambdaV\x20='+'\x20NoL\x20*\x20len'+'gth(vec3(a'+'t\x20*\x20ToV,\x20a'+'b\x20*\x20BoV,\x20N'+'oV));\x0a\x20\x20\x20\x20'+'float\x20lamb'+'daL\x20=\x20NoV\x20'+'*\x20length(v'+'ec3(at\x20*\x20T'+'oL,\x20ab\x20*\x20B'+'oL,\x20NoL));'+'\x0a\x20\x20\x20\x20float'+'\x20G\x20=\x200.5\x20/'+'\x20(lambdaV\x20'+'+\x20lambdaL)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20D\x20*\x20G;'+'\x0a}\x0a\x0afloat\x20'+'getLightSp'+'ecular(vec'+'3\x20h,\x20vec3\x20'+'reflDir,\x20v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'float\x20glos'+'s,\x20mat3\x20tb'+'n)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'LightSpecu'+'lar(gloss,'+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20h,\x20ligh'+'tDirNorm,\x20'+'tbn);\x0a}\x0a'),D1='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afloa'+'t\x20calcLigh'+'tSpecular('+'float\x20glos'+'s,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20h)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20nh\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20specPow\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x20//\x20gloss'+'iness\x20is\x20l'+'inear,\x20pow'+'er\x20is\x20not;'+'\x200\x20-\x202048\x0a'+'\x0a\x20\x20\x20\x20//\x20Ha'+'ck:\x20On\x20Mac'+'\x20OS\x20X,\x20cal'+'ling\x20pow\x20w'+'ith\x20zero\x20f'+'or\x20the\x20exp'+'onent\x20gene'+'rates\x20hide'+'ous\x20artifa'+'cts\x20so\x20bia'+'s\x20up\x20a\x20lit'+'tle\x0a\x20\x20\x20\x20sp'+'ecPow\x20=\x20ma'+'x(specPow,'+'\x200.0001);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(nh,\x20'+'specPow)\x20*'+'\x20(specPow\x20'+'+\x202.0)\x20/\x208'+'.0;\x0a}\x0a\x0aflo'+'at\x20getLigh'+'tSpecular('+'vec3\x20h,\x20ve'+'c3\x20reflDir'+',\x20vec3\x20wor'+'ldNormal,\x20'+'vec3\x20viewD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m,\x20float\x20g'+'loss,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',L1='\x0a\x0afloat\x20sh'+'eenD(vec3\x20'+'normal,\x20ve'+'c3\x20h,\x20floa'+'t\x20roughnes'+'s)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20PI\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20f'+'loat\x20invR\x20'+'=\x201.0\x20/\x20(r'+'oughness\x20*'+'\x20roughness'+');\x0a\x20\x20\x20\x20flo'+'at\x20cos2h\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20*=\x20'+'cos2h;\x0a\x20\x20\x20'+'\x20float\x20sin'+'2h\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'float\x20shee'+'nV(vec3\x20no'+'rmal,\x20vec3'+'\x20viewDir,\x20'+'vec3\x20light'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20NoV\x20=\x20'+'max(dot(no'+'rmal,\x20view'+'Dir),\x200.00'+'0001);\x0a\x20\x20\x20'+'\x20float\x20NoL'+'\x20=\x20max(dot'+'(normal,\x20l'+'ight),\x200.0'+'00001);\x0a\x20\x20'+'\x20\x20return\x201'+'.0\x20/\x20(4.0\x20'+'*\x20(NoL\x20+\x20N'+'oV\x20-\x20NoL\x20*'+'\x20NoV));\x0a}\x0a'+'\x0afloat\x20get'+'LightSpecu'+'larSheen(v'+'ec3\x20h,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'irNorm,\x20fl'+'oat\x20sheenG'+'loss)\x20{\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20float\x20V\x20'+'=\x20sheenV(w'+'orldNormal'+',\x20viewDir,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20return\x20D\x20'+'*\x20V;\x0a}\x0a',R1='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afloat\x20lin'+'earizeDept'+'hWithParam'+'s(float\x20z,'+'\x20vec4\x20came'+'raParams)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'cameraPara'+'ms.w\x20==\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20(c'+'ameraParam'+'s.z\x20*\x20came'+'raParams.y'+')\x20/\x20(camer'+'aParams.y\x20'+'+\x20z\x20*\x20(cam'+'eraParams.'+'z\x20-\x20camera'+'Params.y))'+';\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20came'+'raParams.z'+'\x20+\x20z\x20*\x20(ca'+'meraParams'+'.y\x20-\x20camer'+'aParams.z)'+';\x0a}\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec4\x20ca'+'mera_param'+'s;\x20//\x20x:\x201'+'\x20/\x20camera_'+'far,\x20\x20\x20\x20\x20\x20'+'y:\x20camera_'+'far,\x20\x20\x20\x20\x20z'+':\x20camera_n'+'ear,\x20\x20\x20\x20\x20\x20'+'\x20\x20w:\x20is_or'+'tho\x0a#endif'+'\x0a\x0afloat\x20li'+'nearizeDep'+'th(float\x20z'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20linea'+'rizeDepthW'+'ithParams('+'z,\x20camera_'+'params);\x0a}'+'\x0a#endif\x0a',O1='\x0avoid\x20eval'+'uateBacken'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'SSAO\x20durin'+'g\x20lighting'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_SSAO'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ao\x20'+'*=\x20texture'+'2DLod(ssao'+'Texture,\x20g'+'l_FragCoor'+'d.xy\x20*\x20ssa'+'oTextureSi'+'zeInv,\x200.0'+').r;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20transf'+'orm\x20tangen'+'t\x20space\x20no'+'rmals\x20to\x20w'+'orld\x20space'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_NEED'+'S_NORMAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etReflDir('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20litArgs_'+'gloss,\x20dTB'+'N);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W\x20=\x20normal'+'ize(-refle'+'ct(dViewDi'+'rW,\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR_OR'+'_REFLECTIO'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20f'+'0\x20=\x201.0\x20/\x20'+'litArgs_io'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20f0\x20=\x20'+'(f0\x20-\x201.0)'+'\x20/\x20(f0\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20f0\x20'+'*=\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20i'+'ridescence'+'Fresnel\x20=\x20'+'getIridesc'+('ence(satur'+'ate(dot(dV'+'iewDirW,\x20l'+'itArgs_wor'+'ldNormal))'+',\x20litArgs_'+'specularit'+'y,\x20litArgs'+'_iridescen'+'ce_thickne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'mbient\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20addAmbie'+'nt(litArgs'+'_worldNorm'+'al);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20dDiffuse'+'Light\x20*\x20(1'+'.0\x20-\x20litAr'+'gs_specula'+'rity);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20move\x20a'+'mbient\x20col'+'or\x20out\x20of\x20'+'diffuse\x20(u'+'sed\x20by\x20Lig'+'htmapper,\x20'+'to\x20multipl'+'y\x20ambient\x20'+'color\x20by\x20a'+'ccumulated'+'\x20AO)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SEPARA'+'TE_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dA'+'mbientLigh'+'t\x20=\x20dDiffu'+'seLight;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_O'+'LD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20*=\x20mate'+'rial_ambie'+'nt;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OCCLUD'+'E_DIRECT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20occludeDi'+'ffuse(litA'+'rgs_ao);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTMAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'dLightMap('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmap,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_lightmap'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dViewDir'+'W,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dRef'+'lDirW,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('litArgs_gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dTBN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTING\x20'+'||\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tionCC(ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_glo'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_FRESNE'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccFresne'+'l\x20=\x20getFre'+'snelCC(dot'+'(dViewDirW'+',\x20litArgs_'+'clearcoat_'+'worldNorma'+'l));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccRef'+'lection\x20*='+'\x20ccFresnel'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccFres'+'nel\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20*=\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SH'+'EEN\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'addReflect'+'ionSheen(l'+'itArgs_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20litArgs_s'+'heen_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Fr')+('esnel\x20has\x20'+'to\x20be\x20appl'+'ied\x20to\x20ref'+'lections\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tion(dRefl'+'DirW,\x20litA'+'rgs_gloss)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_FRES'+'NEL_MODEL\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dRe'+'flection.r'+'gb\x20*=\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_iri'+'descence_i'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.rgb\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n.rgb\x20*=\x20l'+'itArgs_spe'+'cularityFa'+'ctor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20ARE'+'A_LIGHTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20has\x20to\x20'+'be\x20accumul'+'ated\x20diffe'+'rently\x20if\x20'+'we\x20want\x20ar'+'ea\x20lights\x20'+'to\x20look\x20co'+'rrect\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dS'+'pecularLig'+'ht\x20*=\x20litA'+'rgs_specul'+'arity;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'valuate\x20ma'+'terial\x20bas'+'ed\x20area\x20li'+'ghts\x20data,')+('\x20shared\x20by'+'\x20all\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20calcLTC'+'LightValue'+'s(litArgs_'+'gloss,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_gl'+'oss,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20LOOP\x20-\x20e'+'valuate\x20al'+'l\x20non-clus'+'tered\x20ligh'+'ts\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT_COUNT\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tEvaluatio'+'nPS,\x20LIGHT'+'_COUNT\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clust'+'ered\x20light'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addClust'+'eredLights'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20dReflDi'+'rW,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_CLEA'+'RCOAT)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_gl'+'oss,\x20litAr'+'gs_specula'+'rity,\x20dVer'+'texNormalW'+',\x20dTBN,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_gloss,'+'\x20litArgs_s'+'heen_gloss'+',\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20AR'+'EA_LIGHTS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity\x20=\x20ve'+'c3(1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dViewD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'thickness,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_albe'+'do,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_t'+'ransmissio'+'n,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_disp'+'ersion\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_iridesc'+'ence_inten'+'sity\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20ambient'+'\x20occlusion'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_OC')+('CLUDE_DIRE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20occlu'+'deDiffuse('+'litArgs_ao'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIT_OCCLU'+'DE_SPECULA'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeS'+'pecular(li'+'tArgs_glos'+'s,\x20litArgs'+'_ao,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULARIT'+'Y_FACTOR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20*=\x20litAr'+'gs_specula'+'rityFactor'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIT_OPACI'+'TY_FADES_S'+'PECULAR)\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIT_BLEN'+'D_TYPE\x20==\x20'+'NORMAL\x20||\x20'+'LIT_BLEND_'+'TYPE\x20==\x20PR'+'EMULTIPLIE'+'D\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20specLum\x20='+'\x20dot((dSpe'+'cularLight'+'\x20+\x20dReflec'+'tion.rgb\x20*'+'\x20dReflecti'+'on.a),\x20vec'+'3(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecLum\x20+=\x20'+'dot(ccSpec'+'ularLight\x20'+'*\x20litArgs_'+'clearcoat_'+'specularit'+'y\x20+\x20ccRefl'+'ection\x20*\x20l'+'itArgs_cle'+'arcoat_spe'+'cularity,\x20'+'vec3(\x200.21'+'26,\x200.7152'+',\x200.0722\x20)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_opacity\x20'+'=\x20clamp(li'+'tArgs_opac'+'ity\x20+\x20gamm'+'aCorrectIn'+'put(specLu'+'m),\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_op'+'acity\x20*=\x20m'+'aterial_al'+'phaFade;\x0a\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nd\x20chunks\x20'+'-\x20when\x20bak'+'ing\x20lightm'+'ap\x0a\x20\x20\x20\x20#if'+'def\x20LIT_LI')+('GHTMAP_BAK'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22bak'+'eLmEndPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_LIGHTM'+'AP_BAKING_'+'DIR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22bake'+'DirLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20en'+'d\x20chunks\x20-'+'\x20in\x20all\x20ot'+'her\x20cases\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22en'+'dPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22outputA'+'lphaPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_MSDF\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20applyMs'+'df(gl_Frag'+'Color);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22output'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22de'+'bugOutputP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HADOW_CATC'+'HER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20when\x20the'+'\x20shadow\x20ca'+'tcher\x20is\x20e'+'nabled\x20-\x20a'+'ccumulated'+'\x20shadows\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20=\x20vec3'+'(dShadowCa'+'tcher);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a'),F1='\x0a\x0a//\x20globa'+'ls\x0avec3\x20sR'+'eflection;'+'\x0avec3\x20dVer'+'texNormalW'+';\x0avec3\x20dTa'+'ngentW;\x0ave'+'c3\x20dBinorm'+'alW;\x0avec3\x20'+'dViewDirW;'+'\x0avec3\x20dRef'+'lDirW;\x0avec'+'3\x20ccReflDi'+'rW;\x0a\x0a//\x20Pe'+'r-light\x20te'+'mporaries\x0a'+'vec3\x20dLigh'+'tDirNormW;'+'\x0afloat\x20dAt'+'ten;\x0a\x0a//\x20O'+'utputs\x0amat'+'3\x20dTBN;\x0ave'+'c4\x20dReflec'+'tion;\x0avec3'+'\x20dDiffuseL'+'ight;\x0avec3'+'\x20dSpecular'+'Light;\x0aflo'+'at\x20ccFresn'+'el;\x0avec3\x20c'+'cReflectio'+'n;\x0avec3\x20cc'+'SpecularLi'+'ght;\x0afloat'+'\x20ccSpecula'+'rityNoFres'+';\x0avec3\x20sSp'+'ecularLigh'+'t;\x0a\x0a//\x20FRA'+'GMENT\x20SHAD'+'ER\x20INPUTS:'+'\x20UNIFORMS\x0a'+'\x0a#ifdef\x20LI'+'T_DISPERSI'+'ON\x0a\x20\x20\x20\x20uni'+'form\x20float'+'\x20material_'+'dispersion'+';\x0a#endif\x0a\x0a'+'#ifndef\x20LI'+'T_OPACITY_'+'FADES_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_alphaFad'+'e;\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_SSAO\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20s'+'saoTexture'+';\x0a\x20\x20\x20\x20unif'+'orm\x20vec2\x20s'+'saoTexture'+'SizeInv;\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20a'+'nd\x20shadowi'+'ng\x20declara'+'tions\x0a\x0a#if'+'def\x20LIT_SH'+'ADOW_CATCH'+'ER\x0a\x20\x20\x20\x20//\x20'+'a\x20variable'+'\x20to\x20accumu'+'late\x20shado'+'ws\x20for\x20sha'+'dow\x20catche'+'r\x20material'+'s\x0a\x20\x20\x20\x20floa'+'t\x20dShadowC'+'atcher\x20=\x201'+'.0;\x0a#endif'+'\x0a\x0a//\x20LOOP\x20'+'-\x20uniform\x20'+'declaratio'+'ns\x20for\x20all'+'\x20non-clust'+'ered\x20light'+'s\x0a#if\x20LIGH'+'T_COUNT\x20>\x20'+'0\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDeclarati'+'onPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+('\x20#if\x20LIT_F'+'RESNEL_MOD'+'EL\x20==\x20NONE'+'\x20&&\x20!defin'+'ed(LIT_REF'+'LECTIONS)\x20'+'&&\x20!define'+'d(LIT_DIFF'+'USE_MAP)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a//\x20lightm'+'ap\x20baking\x0a'+'#ifdef\x20STD'+'_LIGHTMAP_'+'DIR\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20bakeDir;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_L'+'IGHTMAP_BA'+'KING_ADD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20ambie'+'ntBakeOccl'+'usionContr'+'ast;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20ambient'+'BakeOcclus'+'ionBrightn'+'ess;\x0a#endi'+'f\x0a'),N1='\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4(0'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ccS'+'pecularLig'+'ht\x20=\x20vec3('+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'NONE_SLICE'+'_MODE\x20==\x20S'+'LICED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22startN'+'ineSlicedP'+'S\x22\x0a\x20\x20\x20\x20#el'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20TILE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'startNineS'+'licedTiled'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_NEEDS_NOR'+'MAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW\x20=\x20n'+'ormalize(v'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'TANGENTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_HEI'+'GHTS)\x20||\x20d'+'efined(LIT'+'_USE_NORMA'+'LS)\x20||\x20def'+'ined(LIT_U'+'SE_CLEARCO'+'AT_NORMALS'+')\x20||\x20defin'+'ed(LIT_GGX'+'_SPECULAR)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dTa'+'ngentW\x20=\x20v'+'TangentW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dBin'+'ormalW\x20=\x20v'+'BinormalW;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20getVie'+'wDir();\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_TB'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getTBN'+'(dTangentW'+',\x20dBinorma'+'lW,\x20dVerte'+'xNormalW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_TWO_S'+'IDED_LIGHT'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'handleTwoS'+'idedLighti'+'ng();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20i'+'nvoke\x20fron'+'tend\x20funct'+'ions\x0a\x20\x20\x20\x20e'+'valuateFro'+'ntend();\x0a\x0a'+('\x20\x20\x20\x20#inclu'+'de\x20\x22debugP'+'rocessFron'+'tendPS\x22\x0a\x0a\x20'+'\x20\x20\x20evaluat'+'eBackend()'+';\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a'),k1='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20vec3\x20mate'+'rial_ambie'+'nt;\x0a\x0a#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTING\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightSp'+'ecularAnis'+'oGGXPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightS'+'pecularBli'+'nnPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'combinePS\x22'+'\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tmapAddPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'ADD_AMBIEN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ambi'+'entPS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIT_MSDF'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22msdfP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'include\x20\x22v'+'iewDirPS\x22\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flDirAniso'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a//\x20li'+'ghting\x20fun'+'ctionality')+('\x0a#include\x20'+'\x22lightingP'+'S\x22\x0a\x0a'),U1='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',B1='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',z1='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec4\x20ve'+'rtex_color'+';\x0a#endif\x0a\x0a'+'#ifdef\x20NIN'+'ESLICED\x0a\x0a\x20'+'\x20\x20\x20varying'+'\x20vec2\x20vMas'+'k;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'vTiledUv;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20v'+'ec2\x20outerS'+'cale;\x0a\x20\x20\x20\x20'+'uniform\x20me'+'diump\x20vec4'+'\x20atlasRect'+';\x0a\x0a#endif\x0a'+'\x0avec3\x20dPos'+'itionW;\x0ama'+'t4\x20dModelM'+'atrix;\x0a\x0a#i'+'nclude\x20\x22tr'+'ansformCor'+'eVS\x22\x0a\x0a#ifd'+'ef\x20UV0\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'c2\x20vertex_'+'texCoord1;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22uv1VS'+'\x22\x0a#endif\x0a\x0a'+'\x0a#ifdef\x20LI'+'NEAR_DEPTH'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20#d'+'efine\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'transformV'+'S\x22\x0a\x0a#ifdef'+'\x20NORMALS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22normalC'+'oreVS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22normalVS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20TANG'+'ENTS\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_tangent;\x0a'+'#endif\x0a\x0a//'+'\x20expand\x20un'+'iforms\x20for'+'\x20uv\x20transf'+'orms\x0a#incl'+'ude\x20\x22uvTra'+'nsformUnif'+'ormsPS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'#ifdef\x20MSD'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22msdf'+'VS\x22\x0a#endif'+'\x0a\x0a#include'+'\x20\x20\x22litUser'+'CodeVS\x22\x0a\x0av'+'oid\x20main(v'+'oid)\x20{\x0a\x0a\x20\x20'+'\x20\x20#include'+('\x20\x22litUserM'+'ainStartVS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'default\x20po'+'int\x20size\x20t'+'o\x201\x20in\x20cas'+'e\x20the\x20shad'+'er\x20is\x20used'+'\x20with\x20poin'+'ts\x0a\x20\x20\x20\x20gl_'+'PointSize\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20getP'+'osition();'+'\x0a\x20\x20\x20\x20vPosi'+'tionW\x20=\x20ge'+'tWorldPosi'+'tion();\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'NORMALS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vNor'+'malW\x20=\x20get'+'Normal();\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20TANGENT'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vTangentW\x20'+'=\x20normaliz'+'e(dNormalM'+'atrix\x20*\x20ve'+'rtex_tange'+'nt.xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vBi'+'normalW\x20=\x20'+'cross(vNor'+'malW,\x20vTan'+'gentW)\x20*\x20v'+'ertex_tang'+'ent.w;\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(GGX_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3(0,\x201'+',\x200));\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV0\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv0'+'\x20=\x20getUv0('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20UV'+'0_UNMODIFI'+'ED\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv1\x20=\x20ge'+'tUv1();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20UV1_UNM'+'ODIFIED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vUv1\x20=\x20uv1'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20expa'+'nd\x20code\x20fo'+'r\x20uv\x20trans'+'forms\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'uvTransfor'+'mVS,\x20UV_TR'+'ANSFORMS_C'+'OUNT\x22\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20VE'+'RTEX_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition')+(',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vPosi'+'tionW,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20M'+'SDF\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20unpackMs'+'dfParams()'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tUserMainE'+'ndVS\x22\x0a}\x0a'),V1='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20g'+'etPickOutp'+'ut();\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20P'+'REPASS_PAS'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20float'+'2vec4(vLin'+'earDepth);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a',G1='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avec3\x20litA'+'rgs_albedo'+';\x0a\x0a//\x20Tran'+'sparency\x0af'+'loat\x20litAr'+'gs_opacity'+';\x0a\x0a//\x20Emis'+'sion\x20color'+'\x0avec3\x20litA'+'rgs_emissi'+'on;\x0a\x0a//\x20No'+'rmal\x20direc'+'tion\x20in\x20wo'+'rld\x20space\x0a'+'vec3\x20litAr'+'gs_worldNo'+'rmal;\x0a\x0a//\x20'+'Ambient\x20oc'+'clusion\x20am'+'ount,\x20rang'+'e\x20[0..1]\x0af'+'loat\x20litAr'+'gs_ao;\x0a\x0a//'+'\x20Light\x20map'+'\x20color\x0avec'+'3\x20litArgs_'+'lightmap;\x0a'+'\x0a//\x20Light\x20'+'map\x20direct'+'ion\x0avec3\x20l'+'itArgs_lig'+'htmapDir;\x0a'+'\x0a//\x20Surfac'+'e\x20metalnes'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_met'+'alness;\x0a\x0a/'+'/\x20The\x20f0\x20s'+'pecularity'+'\x20factor\x0ave'+'c3\x20litArgs'+'_speculari'+'ty;\x0a\x0a//\x20Sp'+'ecularity\x20'+'intensity\x20'+'factor,\x20ra'+'nge\x20[0..1]'+'\x0afloat\x20lit'+'Args_specu'+'larityFact'+'or;\x0a\x0a//\x20Th'+'e\x20microfac'+'et\x20glossin'+'ess\x20factor'+',\x20range\x20[0'+'..1]\x0afloat'+'\x20litArgs_g'+'loss;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_sh'+'een_gloss;'+'\x0a\x0a//\x20The\x20c'+'olor\x20of\x20th'+'e\x20f0\x20specu'+'larity\x20fac'+'tor\x20for\x20th'+'e\x20sheen\x20la'+'yer\x0avec3\x20l'+'itArgs_she'+'en_specula'+'rity;\x0a\x0a//\x20'+'Transmissi'+'on\x20factor\x20'+'(refractio'+'n),\x20range\x20'+'[0..1]\x0aflo'+'at\x20litArgs'+'_transmiss'+'ion;\x0a\x0a//\x20U'+'niform\x20thi'+'ckness\x20of\x20'+'medium,\x20us'+'ed\x20by\x20tran'+'smission,\x20'+'range\x20[0..'+'inf]\x0afloat'+'\x20litArgs_t'+'hickness;\x0a'+'\x0a//\x20Index\x20'+'of\x20refract'+'ion\x0afloat\x20'+('litArgs_io'+'r;\x0a\x0a//\x20Dis'+'persion,\x20r'+'ange\x20[0..1'+']\x20typicall'+'y,\x20but\x20can'+'\x20be\x20higher'+'\x0afloat\x20lit'+'Args_dispe'+'rsion;\x0a\x0a//'+'\x20Iridescen'+'ce\x20effect\x20'+'intensity,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_ir'+'idescence_'+'intensity;'+'\x0a\x0a//\x20Thick'+'ness\x20of\x20th'+'e\x20iridesce'+'nt\x20microfi'+'lm\x20layer,\x20'+'value\x20is\x20i'+'n\x20nanomete'+'rs,\x20range\x20'+'[0..1000]\x0a'+'float\x20litA'+'rgs_irides'+'cence_thic'+'kness;\x0a\x0a//'+'\x20The\x20norma'+'l\x20used\x20for'+'\x20the\x20clear'+'coat\x20layer'+'\x0avec3\x20litA'+'rgs_clearc'+'oat_worldN'+'ormal;\x0a\x0a//'+'\x20Intensity'+'\x20of\x20the\x20cl'+'earcoat\x20la'+'yer,\x20range'+'\x20[0..1]\x0afl'+'oat\x20litArg'+'s_clearcoa'+'t_specular'+'ity;\x0a\x0a//\x20G'+'lossiness\x20'+'of\x20clearco'+'at\x20layer,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_cle'+'arcoat_glo'+'ss;\x0a\x0a'),H1='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20te'+'xtureBias\x20'+'=\x20-1000.0;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20texture'+'Bias;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litShade'+'rArgsPS\x22\x0a',W1='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20vec3\x20v'+'iew_positi'+'on;\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20light_ra'+'dius;\x0a#end'+'if\x0a\x0a#if\x20SH'+'ADOW_TYPE\x20'+'==\x20PCSS_32'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22line'+'arizeDepth'+'PS\x22\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'evaluateFr'+'ontend();\x0a'+'\x0a\x20\x20\x20\x20//\x20us'+'ing\x20non-st'+'andard\x20dep'+'th,\x20i.e\x20gl'+'_FragCoord'+'.z\x0a\x20\x20\x20\x20#if'+'def\x20PERSPE'+'CTIVE_DEPT'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20gl_Fra'+'gCoord.z;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SHADOW_'+'TYPE\x20==\x20PC'+'SS_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot/omn'+'i\x20shadows\x20'+'currently\x20'+'use\x20linear'+'\x20depth.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20TODO:\x20u'+'se\x20perspec'+'tive\x20depth'+'\x20for\x20spot/'+'omni\x20the\x20s'+'ame\x20way\x20as'+'\x20direction'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT_TYPE\x20'+'!=\x20DIRECTI'+'ONAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20depth\x20=\x20l'+'inearizeDe'+'pthWithPar'+'ams(depth,'+'\x20camera_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20min(di'+'stance(vie'+'w_position'+',\x20vPositio'+'nW)\x20/\x20ligh'+'t_radius,\x20'+'0.99999);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20MODI'+'FIED_DEPTH'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20VSM_'+'16F\x20||\x20SHA'+'DOW_TYPE\x20='+'=\x20VSM_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20exponen'+'t\x20=\x2015.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+('t\x20exponent'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20depth\x20=\x20'+'2.0\x20*\x20dept'+'h\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dep'+'th\x20=\x20\x20exp('+'exponent\x20*'+'\x20depth);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(dep'+'th,\x20depth*'+'depth,\x201.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'SHADOW_TYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'tore\x20depth'+'\x20into\x20R32\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.r\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ODIFIED_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20If\x20we\x20e'+'nd\x20up\x20usin'+'g\x20modified'+'\x20depth,\x20it'+'\x20needs\x20to\x20'+'be\x20explici'+'tly\x20writte'+'n\x20to\x20gl_Fr'+'agDepth\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gDepth\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20just\x20the\x20'+'simplest\x20c'+'ode,\x20color'+'\x20is\x20not\x20wr'+'itten\x20anyw'+'ay\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'}\x0a'),$1='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0amat'+'3\x20transpos'+'eMat3(\x20con'+'st\x20in\x20mat3'+'\x20m\x20)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20tmp;'+'\x0a\x20\x20\x20\x20tmp[\x20'+'0\x20]\x20=\x20vec3'+'(\x20m[\x200\x20].x'+',\x20m[\x201\x20].x'+',\x20m[\x202\x20].x'+'\x20);\x0a\x20\x20\x20\x20tm'+'p[\x201\x20]\x20=\x20v'+'ec3(\x20m[\x200\x20'+'].y,\x20m[\x201\x20'+'].y,\x20m[\x202\x20'+'].y\x20);\x0a\x20\x20\x20'+'\x20tmp[\x202\x20]\x20'+'=\x20vec3(\x20m['+'\x200\x20].z,\x20m['+'\x201\x20].z,\x20m['+'\x202\x20].z\x20);\x0a'+'\x20\x20\x20\x20return'+'\x20tmp;\x0a}\x0a\x0av'+'ec2\x20LTC_Uv'+'(\x20const\x20in'+'\x20vec3\x20N,\x20c'+'onst\x20in\x20ve'+'c3\x20V,\x20cons'+'t\x20in\x20float'+'\x20roughness'+'\x20)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20LUT_SIZE\x20'+'=\x2064.0;\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20LUT_SC'+'ALE\x20=\x20(\x20LU'+'T_SIZE\x20-\x201'+'.0\x20)\x20/\x20LUT'+'_SIZE;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20LUT_BIA'+'S\x20=\x200.5\x20/\x20'+'LUT_SIZE;\x0a'+'\x20\x20\x20\x20float\x20'+'dotNV\x20=\x20sa'+'turate(\x20do'+'t(\x20N,\x20V\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'texture\x20pa'+'rameterize'+'d\x20by\x20sqrt('+'\x20GGX\x20alpha'+'\x20)\x20and\x20sqr'+'t(\x201\x20-\x20cos'+'(\x20theta\x20)\x20'+')\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20vec2'+'(\x20roughnes'+'s,\x20sqrt(\x201'+'.0\x20-\x20dotNV'+'\x20)\x20);\x0a\x20\x20\x20\x20'+'uv\x20=\x20uv\x20*\x20'+'LUT_SCALE\x20'+'+\x20LUT_BIAS'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'float\x20LTC_'+'ClippedSph'+'ereFormFac'+'tor(\x20const'+'\x20in\x20vec3\x20f'+'\x20)\x20{\x0a\x20\x20\x20\x20/'+'/\x20Real-Tim'+'e\x20Area\x20Lig'+'hting:\x20a\x20J'+'ourney\x20fro'+'m\x20Research'+'\x20to\x20Produc'+'tion\x20(p.10'+'2)\x0a\x20\x20\x20\x20//\x20'+('An\x20approxi'+'mation\x20of\x20'+'the\x20form\x20f'+'actor\x20of\x20a'+'\x20horizon-c'+'lipped\x20rec'+'tangle.\x0a\x20\x20'+'\x20\x20float\x20l\x20'+'=\x20length(\x20'+'f\x20);\x0a\x20\x20\x20\x20r'+'eturn\x20max('+'\x20(\x20l\x20*\x20l\x20+'+'\x20f.z\x20)\x20/\x20('+'\x20l\x20+\x201.0\x20)'+',\x200.0\x20);\x0a}'+'\x0a\x0avec3\x20LTC'+'_EdgeVecto'+'rFormFacto'+'r(\x20const\x20i'+'n\x20vec3\x20v1,'+'\x20const\x20in\x20'+'vec3\x20v2\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20x\x20=\x20dot('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20float'+'\x20y\x20=\x20abs(\x20'+'x\x20);\x0a\x20\x20\x20\x20/'+'/\x20rational'+'\x20polynomia'+'l\x20approxim'+'ation\x20to\x20t'+'heta\x20/\x20sin'+'(\x20theta\x20)\x20'+'/\x202PI\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'0.8543985\x20'+'+\x20(\x200.4965'+'155\x20+\x200.01'+'45206\x20*\x20y\x20'+')\x20*\x20y;\x0a\x20\x20\x20'+'\x20float\x20b\x20='+'\x203.4175940'+'\x20+\x20(\x204.161'+'6724\x20+\x20y\x20)'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'float\x20v\x20=\x20'+'a\x20/\x20b;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta_sinthet'+'a\x20=\x20(\x20x\x20>\x20'+'0.0\x20)\x20?\x20v\x20'+':\x200.5\x20*\x20in'+'versesqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7\x20)\x20)\x20-\x20'+'v;\x0a\x20\x20\x20\x20ret'+'urn\x20cross('+'\x20v1,\x20v2\x20)\x20'+'*\x20theta_si'+'ntheta;\x0a}\x0a'+'\x0astruct\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'d0;\x0a\x20\x20\x20\x20ve'+'c3\x20coord1;'+'\x0a\x20\x20\x20\x20vec3\x20'+'coord2;\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'rd3;\x0a};\x0a\x0af'+'loat\x20LTC_E'+'valuateRec'+'t(\x20const\x20i'+'n\x20vec3\x20N,\x20'+'const\x20in\x20v'+'ec3\x20V,\x20con'+'st\x20in\x20vec3'+'\x20P,\x20const\x20'+'in\x20mat3\x20mI'+'nv,\x20const\x20'+'in\x20Coords\x20'+'rectCoords'+')\x20{\x0a\x20\x20\x20\x20//'+'\x20bail\x20if\x20p'+'oint\x20is\x20on'+'\x20back\x20side'+'\x20of\x20plane\x20'+'of\x20light\x0a\x20'+'\x20\x20\x20//\x20assu'+'mes\x20ccw\x20wi'+'nding\x20orde'+'r\x20of\x20light'+'\x20vertices\x0a'+'\x20\x20\x20\x20vec3\x20v'+'1\x20=\x20rectCo'+'ords.coord'+'1\x20-\x20rectCo'+'ords.coord'+'0;\x0a\x20\x20\x20\x20vec')+('3\x20v2\x20=\x20rec'+'tCoords.co'+'ord3\x20-\x20rec'+'tCoords.co'+'ord0;\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'lightNorma'+'l\x20=\x20cross('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20//\x20if'+'(\x20dot(\x20lig'+'htNormal,\x20'+'P\x20-\x20rectCo'+'ords.coord'+'0\x20)\x20<\x200.0\x20'+')\x20return\x200'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20factor'+'\x20=\x20sign(-d'+'ot(\x20lightN'+'ormal,\x20P\x20-'+'\x20rectCoord'+'s.coord0\x20)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20vec3\x20T1,'+'\x20T2;\x0a\x20\x20\x20\x20T'+'1\x20=\x20normal'+'ize(\x20V\x20-\x20N'+'\x20*\x20dot(\x20V,'+'\x20N\x20)\x20);\x0a\x20\x20'+'\x20\x20T2\x20=\x20\x20fa'+'ctor\x20*\x20cro'+'ss(\x20N,\x20T1\x20'+');\x20//\x20nega'+'ted\x20from\x20p'+'aper;\x20poss'+'ibly\x20due\x20t'+'o\x20a\x20differ'+'ent\x20handed'+'ness\x20of\x20wo'+'rld\x20coordi'+'nate\x20syste'+'m\x0a\x20\x20\x20\x20//\x20c'+'ompute\x20tra'+'nsform\x0a\x20\x20\x20'+'\x20mat3\x20mat\x20'+'=\x20mInv\x20*\x20t'+'ransposeMa'+'t3(\x20mat3(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20transfor'+'m\x20rect\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'ds[\x204\x20];\x0a\x20'+'\x20\x20\x20coords['+'\x200\x20]\x20=\x20mat'+'\x20*\x20(\x20rectC'+'oords.coor'+'d0\x20-\x20P\x20);\x0a'+'\x20\x20\x20\x20coords'+'[\x201\x20]\x20=\x20ma'+'t\x20*\x20(\x20rect'+'Coords.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20coord'+'s[\x202\x20]\x20=\x20m'+'at\x20*\x20(\x20rec'+'tCoords.co'+'ord2\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20coor'+'ds[\x203\x20]\x20=\x20'+'mat\x20*\x20(\x20re'+'ctCoords.c'+'oord3\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20//\x20'+'project\x20re'+'ct\x20onto\x20sp'+'here\x0a\x20\x20\x20\x20c'+'oords[\x200\x20]'+'\x20=\x20normali'+'ze(\x20coords'+'[\x200\x20]\x20);\x0a\x20'+'\x20\x20\x20coords['+'\x201\x20]\x20=\x20nor'+'malize(\x20co'+'ords[\x201\x20]\x20'+');\x0a\x20\x20\x20\x20coo'+'rds[\x202\x20]\x20='+'\x20normalize'+'(\x20coords[\x20'+'2\x20]\x20);\x0a\x20\x20\x20'+'\x20coords[\x203'+'\x20]\x20=\x20norma'+'lize(\x20coor'+'ds[\x203\x20]\x20);')+('\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20ve'+'ctor\x20form\x20'+'factor\x0a\x20\x20\x20'+'\x20vec3\x20vect'+'orFormFact'+'or\x20=\x20vec3('+'\x200.0\x20);\x0a\x20\x20'+'\x20\x20vectorFo'+'rmFactor\x20+'+'=\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[\x200\x20],'+'\x20coords[\x201'+'\x20]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20+=\x20'+'LTC_EdgeVe'+'ctorFormFa'+'ctor(\x20coor'+'ds[\x201\x20],\x20c'+'oords[\x202\x20]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa'+'ctor\x20+=\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[\x202\x20],\x20coo'+'rds[\x203\x20]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20+=\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[\x20'+'3\x20],\x20coord'+'s[\x200\x20]\x20);\x0a'+'\x20\x20\x20\x20//\x20adj'+'ust\x20for\x20ho'+'rizon\x20clip'+'ping\x0a\x20\x20\x20\x20f'+'loat\x20resul'+'t\x20=\x20LTC_Cl'+'ippedSpher'+'eFormFacto'+'r(\x20vectorF'+'ormFactor\x20'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0aCoor'+'ds\x20dLTCCoo'+'rds;\x0aCoord'+'s\x20getLTCLi'+'ghtCoords('+'vec3\x20light'+'Pos,\x20vec3\x20'+'halfWidth,'+'\x20vec3\x20half'+'Height){\x0a\x20'+'\x20\x20\x20Coords\x20'+'coords;\x0a\x20\x20'+'\x20\x20coords.c'+'oord0\x20=\x20li'+'ghtPos\x20+\x20h'+'alfWidth\x20-'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord1'+'\x20=\x20lightPo'+'s\x20-\x20halfWi'+'dth\x20-\x20half'+'Height;\x0a\x20\x20'+'\x20\x20coords.c'+'oord2\x20=\x20li'+'ghtPos\x20-\x20h'+'alfWidth\x20+'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord3'+'\x20=\x20lightPo'+'s\x20+\x20halfWi'+'dth\x20+\x20half'+'Height;\x0a\x20\x20'+'\x20\x20return\x20c'+'oords;\x0a}\x0a\x0a'+'float\x20dSph'+'ereRadius;'+'\x0aCoords\x20ge'+'tSphereLig'+'htCoords(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight){\x0a\x20\x20'+'\x20\x20//\x20used\x20'+'for\x20simple'+'\x20sphere\x20li')+('ght\x20fallof'+'f\x0a\x20\x20\x20\x20//\x20a'+'lso,\x20the\x20c'+'ode\x20only\x20h'+'andles\x20a\x20s'+'pherical\x20l'+'ight,\x20it\x20c'+'annot\x20be\x20n'+'on-uniform'+'ly\x20scaled\x20'+'in\x20world\x20s'+'pace,\x20and\x20'+'so\x20we\x20enfo'+'rce\x20it\x20her'+'e\x0a\x20\x20\x20\x20dSph'+'ereRadius\x20'+'=\x20max(leng'+'th(halfWid'+'th),\x20lengt'+'h(halfHeig'+'ht));\x0a\x0a\x20\x20\x20'+'\x20//\x20Billbo'+'ard\x20the\x202d'+'\x20light\x20qua'+'d\x20to\x20refle'+'ction\x20vect'+'or,\x20as\x20it\x27'+'s\x20used\x20for'+'\x20specular.'+'\x20This\x20allo'+'ws\x20us\x20to\x20u'+'se\x20disk\x20ma'+'th\x20for\x20the'+'\x20sphere.\x0a\x20'+'\x20\x20\x20vec3\x20f\x20'+'=\x20reflect('+'normalize('+'lightPos\x20-'+'\x20view_posi'+'tion),\x20vNo'+'rmalW);\x0a\x20\x20'+'\x20\x20vec3\x20w\x20='+'\x20normalize'+'(cross(f,\x20'+'halfHeight'+'));\x0a\x20\x20\x20\x20ve'+'c3\x20h\x20=\x20nor'+'malize(cro'+'ss(f,\x20w));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20getLTCL'+'ightCoords'+'(lightPos,'+'\x20w\x20*\x20dSphe'+'reRadius,\x20'+'h\x20*\x20dSpher'+'eRadius);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20LTC\x20L'+'UT\x20texture'+'\x20lookup\x0ave'+'c2\x20dLTCUV;'+'\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20vec2'+'\x20ccLTCUV;\x0a'+'#endif\x0a\x0ave'+'c2\x20getLTCL'+'ightUV(flo'+'at\x20gloss,\x20'+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+')\x0a{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20max('+'(1.0\x20-\x20glo'+'ss)\x20*\x20(1.0'+'\x20-\x20gloss),'+'\x200.001);\x0a\x20'+'\x20\x20\x20return\x20'+'LTC_Uv(\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'roughness\x20'+');\x0a}\x0a\x0a//\x20u'+'sed\x20for\x20en'+'ergy\x20conse'+'rvation\x20an'+'d\x20to\x20modul'+'ate\x20specul'+'ar\x0avec3\x20dL'+'TCSpecFres'+';\x0a#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20vec'+'3\x20ccLTCSpe'+'cFres;\x0a#en'+'dif\x0a\x0avec3\x20'+'getLTCLigh')+('tSpecFres('+'vec2\x20uv,\x20v'+'ec3\x20specul'+'arity)\x0a{\x0a\x20'+'\x20\x20\x20vec4\x20t2'+'\x20=\x20texture'+'2DLod(area'+'LightsLutT'+'ex2,\x20uv,\x200'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20spec'+'ularity\x20*\x20'+'t2.x\x20+\x20(\x20v'+'ec3(\x201.0\x20)'+'\x20-\x20specula'+'rity)\x20*\x20t2'+'.y;\x0a}\x0a\x0avoi'+'d\x20calcLTCL'+'ightValues'+'(float\x20glo'+'ss,\x20vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20speculari'+'ty,\x20float\x20'+'clearcoatG'+'loss,\x20vec3'+'\x20clearcoat'+'WorldNorma'+'l,\x20float\x20c'+'learcoatSp'+'ecularity)'+'\x0a{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x20\x0a\x0a#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20cc'+'LTCUV\x20=\x20ge'+'tLTCLightU'+'V(clearcoa'+'tGloss,\x20cl'+'earcoatWor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20ccLTCS'+'pecFres\x20=\x20'+'getLTCLigh'+'tSpecFres('+'ccLTCUV,\x20v'+'ec3(clearc'+'oatSpecula'+'rity));\x0a#e'+'ndif\x0a}\x0a\x0avo'+'id\x20calcRec'+'tLightValu'+'es(vec3\x20li'+'ghtPos,\x20ve'+'c3\x20halfWid'+'th,\x20vec3\x20h'+'alfHeight)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0avoid\x20c'+'alcDiskLig'+'htValues(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight)\x20{\x0a\x20'+'\x20\x20\x20calcRec'+'tLightValu'+'es(lightPo'+'s,\x20halfWid'+'th,\x20halfHe'+'ight);\x0a}\x0av'+'oid\x20calcSp'+'hereLightV'+'alues(vec3'+'\x20lightPos,'+'\x20vec3\x20half'+'Width,\x20vec'+'3\x20halfHeig'+'ht)\x20{\x0a\x20\x20\x20\x20')+('dLTCCoords'+'\x20=\x20getSphe'+'reLightCoo'+'rds(lightP'+'os,\x20halfWi'+'dth,\x20halfH'+'eight);\x0a}\x0a'+'\x0a//\x20An\x20ext'+'ended\x20vers'+'ion\x20of\x20the'+'\x20implement'+'ation\x20from'+'\x20\x22How\x20to\x20s'+'olve\x20a\x20cub'+'ic\x20equatio'+'n,\x20revisit'+'ed\x22\x0a//\x20htt'+'p://moment'+'singraphic'+'s.de/?p=10'+'5\x0avec3\x20Sol'+'veCubic(ve'+'c4\x20Coeffic'+'ient)\x0a{\x0a\x20\x20'+'\x20\x20float\x20pi'+'\x20=\x203.14159'+';\x0a\x20\x20\x20\x20//\x20N'+'ormalize\x20t'+'he\x20polynom'+'ial\x0a\x20\x20\x20\x20Co'+'efficient.'+'xyz\x20/=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20//\x20D'+'ivide\x20midd'+'le\x20coeffic'+'ients\x20by\x20t'+'hree\x0a\x20\x20\x20\x20C'+'oefficient'+'.yz\x20/=\x203.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20A\x20=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20floa'+'t\x20B\x20=\x20Coef'+'ficient.z;'+'\x0a\x20\x20\x20\x20float'+'\x20C\x20=\x20Coeff'+'icient.y;\x0a'+'\x20\x20\x20\x20float\x20'+'D\x20=\x20Coeffi'+'cient.x;\x0a\x0a'+'\x20\x20\x20\x20//\x20Com'+'pute\x20the\x20H'+'essian\x20and'+'\x20the\x20discr'+'iminant\x0a\x20\x20'+'\x20\x20vec3\x20Del'+'ta\x20=\x20vec3('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-'+'Coefficien'+'t.z\x20*\x20Coef'+'ficient.z\x20'+'+\x20Coeffici'+'ent.y,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20-Coef'+'ficient.y\x20'+'*\x20Coeffici'+'ent.z\x20+\x20Co'+'efficient.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dot(vec2('+'Coefficien'+'t.z,\x20-Coef'+'ficient.y)'+',\x20Coeffici'+'ent.xy)\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'float\x20Disc'+'riminant\x20='+'\x20dot(vec2('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20vec2\x20xlc'+',\x20xsc;\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20A\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_a'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20C_a\x20=\x20De'+'lta.x;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20D_a\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20')+('\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20Theta\x20'+'=\x20atan(sqr'+'t(Discrimi'+'nant),\x20-D_'+'a)\x20/\x203.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20x_1a\x20'+'=\x202.0\x20*\x20sq'+'rt(-C_a)\x20*'+'\x20cos(Theta'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20x_3'+'a\x20=\x202.0\x20*\x20'+'sqrt(-C_a)'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20x'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20((x_1a'+'\x20+\x20x_3a)\x20>'+'\x202.0\x20*\x20B)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xl\x20=\x20x_1'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'\x20=\x20x_3a;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'c\x20=\x20vec2(x'+'l\x20-\x20B,\x20A);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20D\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_d'+'\x20=\x20D;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'C_d\x20=\x20Delt'+'a.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20D'+'_d\x20=\x20-D\x20*\x20'+'Delta.y\x20+\x20'+'2.0\x20*\x20C\x20*\x20'+'Delta.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20Take\x20the\x20'+'cubic\x20root'+'\x20of\x20a\x20norm'+'alized\x20com'+'plex\x20numbe'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20Thet'+'a\x20=\x20atan(D'+'\x20*\x20sqrt(Di'+'scriminant'+'),\x20-D_d)\x20/'+'\x203.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20x_1d\x20=\x202.'+'0\x20*\x20sqrt(-'+'C_d)\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20x_3d\x20=\x20'+'2.0\x20*\x20sqrt'+'(-C_d)\x20*\x20c'+'os(Theta\x20+'+'\x20(2.0\x20/\x203.'+'0)\x20*\x20pi);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20xs;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(x_1d\x20+\x20x_'+'3d\x20<\x202.0\x20*'+'\x20C)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20xs\x20='+'\x20x_1d;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xs\x20=\x20x_3'+'d;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20xsc\x20=\x20ve'+'c2(-D,\x20xs\x20'+'+\x20C);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20flo'+'at\x20E\x20=\x20\x20xl'+'c.y\x20*\x20xsc.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20F\x20=\x20-xl'+'c.x\x20*\x20xsc.'+'y\x20-\x20xlc.y\x20')+('*\x20xsc.x;\x0a\x20'+'\x20\x20\x20float\x20G'+'\x20=\x20\x20xlc.x\x20'+'*\x20xsc.x;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20x'+'mc\x20=\x20vec2('+'C\x20*\x20F\x20-\x20B\x20'+'*\x20G,\x20-B\x20*\x20'+'F\x20+\x20C\x20*\x20E)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20Root\x20=\x20v'+'ec3(xsc.x\x20'+'/\x20xsc.y,\x20x'+'mc.x\x20/\x20xmc'+'.y,\x20xlc.x\x20'+'/\x20xlc.y);\x0a'+'\x0a\x20\x20\x20\x20if\x20(R'+'oot.x\x20<\x20Ro'+'ot.y\x20&&\x20Ro'+'ot.x\x20<\x20Roo'+'t.z)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root.xy'+'z\x20=\x20Root.y'+'xz;\x0a\x20\x20\x20\x20el'+'se\x20if\x20(Roo'+'t.z\x20<\x20Root'+'.x\x20&&\x20Root'+'.z\x20<\x20Root.'+'y)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root.xyz\x20'+'=\x20Root.xzy'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20Root;\x0a'+'}\x0a\x0afloat\x20L'+'TC_Evaluat'+'eDisk(vec3'+'\x20N,\x20vec3\x20V'+',\x20vec3\x20P,\x20'+'mat3\x20Minv,'+'\x20Coords\x20po'+'ints)\x0a{\x0a\x20\x20'+'\x20\x20//\x20const'+'ruct\x20ortho'+'normal\x20bas'+'is\x20around\x20'+'N\x0a\x20\x20\x20\x20vec3'+'\x20T1\x20=\x20norm'+'alize(V\x20-\x20'+'N\x20*\x20dot(V,'+'\x20N));\x0a\x20\x20\x20\x20'+'vec3\x20T2\x20=\x20'+'cross(N,\x20T'+'1);\x0a\x0a\x20\x20\x20\x20/'+'/\x20rotate\x20a'+'rea\x20light\x20'+'in\x20(T1,\x20T2'+',\x20N)\x20basis'+'\x0a\x20\x20\x20\x20//mat'+'3\x20R\x20=\x20tran'+'spose(mat3'+'(T1,\x20T2,\x20N'+'));\x0a\x20\x20\x20\x20ma'+'t3\x20R\x20=\x20tra'+'nsposeMat3'+'(\x20mat3(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'polygon\x20(a'+'llocate\x205\x20'+'vertices\x20f'+'or\x20clippin'+'g)\x0a\x20\x20\x20\x20vec'+'3\x20L_[\x203\x20];'+'\x0a\x20\x20\x20\x20L_[\x200'+'\x20]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[\x20'+'1\x20]\x20=\x20R\x20*\x20'+'(\x20points.c'+'oord1\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20L_['+'\x202\x20]\x20=\x20R\x20*'+'\x20(\x20points.'+'coord2\x20-\x20P'+'\x20);\x0a\x0a\x20\x20\x20\x20/'+'/\x20init\x20ell'+'ipse\x0a\x20\x20\x20\x20v'+'ec3\x20C\x20\x20=\x200'+'.5\x20*\x20(L_[0'+']\x20+\x20L_[2])'+';\x0a\x20\x20\x20\x20vec3'+'\x20V1\x20=\x200.5\x20'+'*\x20(L_[1]\x20-'+'\x20L_[2]);\x0a\x20'+'\x20\x20\x20vec3\x20V2'+'\x20=\x200.5\x20*\x20('+'L_[1]\x20-\x20L_'+'[0]);\x0a\x0a\x20\x20\x20'+'\x20C\x20\x20=\x20Minv')+('\x20*\x20C;\x0a\x20\x20\x20\x20'+'V1\x20=\x20Minv\x20'+'*\x20V1;\x0a\x20\x20\x20\x20'+'V2\x20=\x20Minv\x20'+'*\x20V2;\x0a\x0a\x20\x20\x20'+'\x20//if(dot('+'cross(V1,\x20'+'V2),\x20C)\x20>\x20'+'0.0)\x0a\x20\x20\x20\x20/'+'/\x20\x20\x20\x20retur'+'n\x200.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20compu'+'te\x20eigenve'+'ctors\x20of\x20e'+'llipse\x0a\x20\x20\x20'+'\x20float\x20a,\x20'+'b;\x0a\x20\x20\x20\x20flo'+'at\x20d11\x20=\x20d'+'ot(V1,\x20V1)'+';\x0a\x20\x20\x20\x20floa'+'t\x20d22\x20=\x20do'+'t(V2,\x20V2);'+'\x0a\x20\x20\x20\x20float'+'\x20d12\x20=\x20dot'+'(V1,\x20V2);\x0a'+'\x20\x20\x20\x20if\x20(ab'+'s(d12)\x20/\x20s'+'qrt(d11\x20*\x20'+'d22)\x20>\x200.0'+'001)\x0a\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20tr\x20=\x20'+'d11\x20+\x20d22;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20det\x20='+'\x20-d12\x20*\x20d1'+'2\x20+\x20d11\x20*\x20'+'d22;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20use'+'\x20sqrt\x20matr'+'ix\x20to\x20solv'+'e\x20for\x20eige'+'nvalues\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20det\x20'+'=\x20sqrt(det'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20u\x20='+'\x200.5\x20*\x20sqr'+'t(tr\x20-\x202.0'+'\x20*\x20det);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20v\x20=\x200.5'+'\x20*\x20sqrt(tr'+'\x20+\x202.0\x20*\x20d'+'et);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20e'+'_max\x20=\x20(u\x20'+'+\x20v)\x20*\x20(u\x20'+'+\x20v);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'e_min\x20=\x20(u'+'\x20-\x20v)\x20*\x20(u'+'\x20-\x20v);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20V1_,\x20V2_;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(d11\x20>\x20'+'d22)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12\x20*\x20V'+'1\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20V2_\x20'+'=\x20d12\x20*\x20V1'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20V1'+'_\x20=\x20d12*V2'+'\x20+\x20(e_max\x20'+'-\x20d22)*V1;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20V2_\x20=\x20d'+'12*V2\x20+\x20(e'+'_min\x20-\x20d22'+')*V1;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20e_max'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'b\x20=\x201.0\x20/\x20'+'e_min;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V1\x20=\x20'+'normalize('+'V1_);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20V2\x20=\x20n'+'ormalize(V'+'2_);\x0a\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20dot(V1'+',\x20V1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20b\x20=\x201'+'.0\x20/\x20dot(V'+'2,\x20V2);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20V1\x20*'+'=\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20*=\x20sqrt('+'b);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'V3\x20=\x20norma'+'lize(cross'+'(V1,\x20V2));'+'\x0a\x20\x20\x20\x20if\x20(d'+'ot(C,\x20V3)\x20'+'<\x200.0)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V3\x20*='+'\x20-1.0;\x0a\x0a\x20\x20'+'\x20\x20float\x20L\x20'+'\x20=\x20dot(V3,'+'\x20C);\x0a\x20\x20\x20\x20f'+'loat\x20x0\x20=\x20'+'dot(V1,\x20C)'+'\x20/\x20L;\x0a\x20\x20\x20\x20'+'float\x20y0\x20='+'\x20dot(V2,\x20C'+')\x20/\x20L;\x0a\x0a\x20\x20'+'\x20\x20float\x20E1'+'\x20=\x20inverse'+'sqrt(a);\x0a\x20'+'\x20\x20\x20float\x20E'+'2\x20=\x20invers'+'esqrt(b);\x0a'+'\x0a\x20\x20\x20\x20a\x20*=\x20'+'L\x20*\x20L;\x0a\x20\x20\x20'+'\x20b\x20*=\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20c0\x20=\x20a'+'\x20*\x20b;\x0a\x20\x20\x20\x20'+'float\x20c1\x20='+'\x20a\x20*\x20b\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0\x20+\x20y0\x20*'+'\x20y0)\x20-\x20a\x20-'+'\x20b;\x0a\x20\x20\x20\x20fl'+'oat\x20c2\x20=\x201'+'.0\x20-\x20a\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0)\x20-\x20b\x20*'+'\x20(1.0\x20+\x20y0'+'\x20*\x20y0);\x0a\x20\x20'+'\x20\x20float\x20c3'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ro'+'ots\x20=\x20Solv'+'eCubic(vec'+'4(c0,\x20c1,\x20'+'c2,\x20c3));\x0a'+'\x20\x20\x20\x20float\x20'+'e1\x20=\x20roots'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20e2\x20=\x20r'+'oots.y;\x0a\x20\x20'+'\x20\x20float\x20e3'+'\x20=\x20roots.z'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20avgDir\x20='+'\x20vec3(a\x20*\x20'+'x0\x20/\x20(a\x20-\x20'+'e2),\x20b\x20*\x20y'+'0\x20/\x20(b\x20-\x20e'+'2),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20mat3\x20'+'rotate\x20=\x20m'+'at3(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20L1\x20=\x20sqrt'+'(-e2\x20/\x20e3)'+';\x0a\x20\x20\x20\x20floa'+'t\x20L2\x20=\x20sqr'+'t(-e2\x20/\x20e1'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20formFa'+'ctor\x20=\x20max'+'(0.0,\x20L1\x20*'+'\x20L2\x20*\x20inve')+('rsesqrt((1'+'.0\x20+\x20L1\x20*\x20'+'L1)\x20*\x20(1.0'+'\x20+\x20L2\x20*\x20L2'+')));\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20const\x20'+'float\x20LUT_'+'SIZE\x20=\x2064.'+'0;\x0a\x20\x20\x20\x20con'+'st\x20float\x20L'+'UT_SCALE\x20='+'\x20(\x20LUT_SIZ'+'E\x20-\x201.0\x20)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20float\x20LU'+'T_BIAS\x20=\x200'+'.5\x20/\x20LUT_S'+'IZE;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20tab'+'ulated\x20hor'+'izon-clipp'+'ed\x20sphere\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vec2(a'+'vgDir.z\x20*\x20'+'0.5\x20+\x200.5,'+'\x20formFacto'+'r);\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv*LUT_'+'SCALE\x20+\x20LU'+'T_BIAS;\x0a\x0a\x20'+'\x20\x20\x20float\x20s'+'cale\x20=\x20tex'+'ture2DLod('+'areaLights'+'LutTex2,\x20u'+'v,\x200.0).w;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20formFac'+'tor*scale;'+'\x0a}\x0a\x0a//\x20LTC'+'_EvaluateD'+'isk\x20in\x20som'+'e\x20rare\x20cas'+'es\x20generea'+'tes\x20NaN\x20va'+'lues\x20in\x20a\x20'+'or\x20b,\x20just'+'\x20before\x20\x27f'+'loat\x20c0\x20=\x20'+'a\x20*\x20b;\x27\x0a//'+'\x20Get\x20rid\x20o'+'f\x20those\x20Na'+'n\x20values\x20b'+'efore\x20they'+'\x20propagate'+'\x20further,\x20'+'as\x20in\x20case'+'\x20of\x20bloom\x20'+'/\x20DOF\x20blur'+'s\x20they\x0a//\x20'+'propagate\x20'+'to\x20large\x20a'+'reas.\x20I\x20di'+'dn\x27t\x20find\x20'+'the\x20actual'+'\x20reason\x20wh'+'ere\x20those\x20'+'come\x20from,'+'\x20so\x20that\x20i'+'s\x20still\x20TO'+'DO.\x0a//\x20Not'+'e\x20that\x20onl'+'y\x20disk/sph'+'ere\x20lights'+'\x20are\x20causi'+'ng\x20it,\x20so\x20'+'only\x20handl'+'e\x20those.\x0af'+'loat\x20FixNa'+'n(float\x20va'+'lue)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'value\x20!=\x20v'+'alue\x20?\x200.0'+'\x20:\x20value;\x20'+'\x20//\x20isnan\x20'+'does\x20not\x20t'+'ranspile\x20c'+'orrectly,\x20'+'use\x20a\x20work'+'around\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20isnan(va'+'lue)\x20?\x200.0'+'\x20:\x20value;\x0a')+('\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afloat\x20'+'getRectLig'+'htDiffuse('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm)\x20{\x0a\x20\x20'+'\x20\x20return\x20L'+'TC_Evaluat'+'eRect(\x20wor'+'ldNormal,\x20'+'viewDir,\x20v'+'PositionW,'+'\x20mat3(\x201.0'+'\x20),\x20dLTCCo'+'ords\x20);\x0a}\x0a'+'\x0afloat\x20get'+'DiskLightD'+'iffuse(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20FixN'+'an(LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mat3('+'\x201.0\x20),\x20dL'+'TCCoords\x20)'+');\x0a}\x0a\x0afloa'+'t\x20getSpher'+'eLightDiff'+'use(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm)\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20float\x20fa'+'lloff\x20=\x20dS'+'phereRadiu'+'s\x20/\x20(dot(l'+'ightDir,\x20l'+'ightDir)\x20+'+'\x20dSphereRa'+'dius);\x0a\x20\x20\x20'+'\x20return\x20Fi'+'xNan(getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNorm)\x20*\x20f'+'alloff);\x0a}'+'\x0a\x0amat3\x20get'+'LTCLightIn'+'vMat(vec2\x20'+'uv)\x0a{\x0a\x20\x20\x20\x20'+'vec4\x20t1\x20=\x20'+'texture2DL'+'od(areaLig'+'htsLutTex1'+',\x20uv,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3(\x20t1.x,\x20'+'0,\x20t1.y\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3(\x20\x20\x20\x200,'+'\x201,\x20\x20\x20\x200\x20)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3(\x20t1.z'+',\x200,\x20t1.w\x20'+')\x0a\x20\x20\x20\x20);\x0a}'+'\x0a\x0afloat\x20ca'+'lcRectLigh'+'tSpecular('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir')+(',\x20vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20mat'+'3\x20mInv\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afl'+'oat\x20getRec'+'tLightSpec'+'ular(vec3\x20'+'worldNorma'+'l,\x20vec3\x20vi'+'ewDir)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'calcRectLi'+'ghtSpecula'+'r(worldNor'+'mal,\x20viewD'+'ir,\x20dLTCUV'+');\x0a}\x0a\x0afloa'+'t\x20calcDisk'+'LightSpecu'+'lar(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20mInv'+'\x20=\x20getLTCL'+'ightInvMat'+'(uv);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_EvaluateD'+'isk(\x20world'+'Normal,\x20vi'+'ewDir,\x20vPo'+'sitionW,\x20m'+'Inv,\x20dLTCC'+'oords\x20);\x0a}'+'\x0a\x0afloat\x20ge'+'tDiskLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a\x0a'+'float\x20getS'+'phereLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a'),X1='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_metaln'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tMetalness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20metal'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20metalness'+'\x20*=\x20materi'+'al_metalne'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20metalne'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_METAL'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_METAL'+'NESS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_META'+'LNESS_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_VERTEX\x0a\x20\x20'+'\x20\x20metalnes'+'s\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_METALNES'+'S_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dMet'+'alness\x20=\x20m'+'etalness;\x0a'+'}\x0a',q1='\x0auniform\x20s'+'ampler2D\x20t'+'exture_msd'+'fMap;\x0a\x0aflo'+'at\x20median('+'float\x20r,\x20f'+'loat\x20g,\x20fl'+'oat\x20b)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'max(min(r,'+'\x20g),\x20min(m'+'ax(r,\x20g),\x20'+'b));\x0a}\x0a\x0afl'+'oat\x20map\x20(f'+'loat\x20min,\x20'+'float\x20max,'+'\x20float\x20v)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20(v\x20-\x20mi'+'n)\x20/\x20(max\x20'+'-\x20min);\x0a}\x0a'+'\x0auniform\x20f'+'loat\x20font_'+'sdfIntensi'+'ty;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20float\x20f'+'ont_pxrang'+'e;\x20\x20\x20\x20\x20\x20//'+'\x20the\x20numbe'+'r\x20of\x20pixel'+'s\x20between\x20'+'inside\x20and'+'\x20outside\x20t'+'he\x20font\x20in'+'\x20SDF\x0aunifo'+'rm\x20float\x20f'+'ont_textur'+'eWidth;\x20//'+'\x20the\x20width'+'\x20of\x20the\x20te'+'xture\x20atla'+'s\x0a\x0a#ifndef'+'\x20LIT_MSDF_'+'TEXT_ATTRI'+'BUTE\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20shadow_co'+'lor;\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20shadow_o'+'ffset;\x0a#el'+'se\x0a\x20\x20\x20\x20var'+'ying\x20vec4\x20'+'outline_co'+'lor;\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20outline'+'_thickness'+';\x0a\x20\x20\x20\x20vary'+'ing\x20vec4\x20s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'shadow_off'+'set;\x0a#endi'+'f\x0a\x0avec4\x20ap'+'plyMsdf(ve'+'c4\x20color)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Convert\x20to'+'\x20linear\x20sp'+'ace\x20before'+'\x20processin'+'g\x0a\x20\x20\x20\x20//\x20T'+'ODO:\x20ideal'+'ly\x20this\x20wo'+'uld\x20receiv'+'e\x20the\x20colo'+'r\x20in\x20linea'+'r\x20space,\x20b'+'ut\x20that\x20wo'+'uld\x20requir'+'e\x20larger\x20c'+'hanges\x0a\x20\x20\x20'+('\x20//\x20on\x20the'+'\x20engine\x20si'+'de,\x20with\x20t'+'he\x20way\x20pre'+'multiplied'+'\x20alpha\x20is\x20'+'handled\x20as'+'\x20well.\x0a\x20\x20\x20'+'\x20color.rgb'+'\x20=\x20gammaCo'+'rrectInput'+'(color.rgb'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20sample\x20th'+'e\x20field\x0a\x20\x20'+'\x20\x20vec3\x20tsa'+'mple\x20=\x20tex'+'ture2D(tex'+'ture_msdfM'+'ap,\x20vUv0).'+'rgb;\x0a\x20\x20\x20\x20v'+'ec2\x20uvShdw'+'\x20=\x20vUv0\x20-\x20'+'shadow_off'+'set;\x0a\x20\x20\x20\x20v'+'ec3\x20ssampl'+'e\x20=\x20textur'+'e2D(textur'+'e_msdfMap,'+'\x20uvShdw).r'+'gb;\x0a\x0a\x20\x20\x20\x20/'+'/\x20get\x20the\x20'+'signed\x20dis'+'tance\x20valu'+'e\x0a\x20\x20\x20\x20floa'+'t\x20sigDist\x20'+'=\x20median(t'+'sample.r,\x20'+'tsample.g,'+'\x20tsample.b'+');\x0a\x20\x20\x20\x20flo'+'at\x20sigDist'+'Shdw\x20=\x20med'+'ian(ssampl'+'e.r,\x20ssamp'+'le.g,\x20ssam'+'ple.b);\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20limi'+'t\x20-\x20smalle'+'r\x20value\x20ma'+'kes\x20for\x20sh'+'arper\x20but\x20'+'more\x20alias'+'ed\x20text,\x20e'+'specially\x20'+'on\x20angles\x0a'+'\x20\x20\x20\x20//\x20too'+'\x20large\x20val'+'ue\x20(0.5)\x20c'+'reates\x20a\x20d'+'ark\x20glow\x20a'+'round\x20the\x20'+'letters\x0a\x20\x20'+'\x20\x20float\x20sm'+'oothingMax'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20vec'+'2\x20w\x20=\x20fwid'+'th(vUv0);\x0a'+'\x20\x20\x20\x20float\x20'+'smoothing\x20'+'=\x20clamp(w.'+'x\x20*\x20font_t'+'extureWidt'+'h\x20/\x20font_p'+'xrange,\x200.'+'0,\x20smoothi'+'ngMax);\x0a\x0a\x20'+'\x20\x20\x20float\x20m'+'apMin\x20=\x200.'+'05;\x0a\x20\x20\x20\x20fl'+'oat\x20mapMax'+'\x20=\x20clamp(1'+'.0\x20-\x20font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20float\x20')+('sigDistInn'+'er\x20=\x20map(m'+'apMin,\x20map'+'Max,\x20sigDi'+'st);\x0a\x20\x20\x20\x20f'+'loat\x20sigDi'+'stOutline\x20'+'=\x20map(mapM'+'in,\x20mapMax'+',\x20sigDist\x20'+'+\x20outline_'+'thickness)'+';\x0a\x20\x20\x20\x20sigD'+'istShdw\x20=\x20'+'map(mapMin'+',\x20mapMax,\x20'+'sigDistShd'+'w\x20+\x20outlin'+'e_thicknes'+'s);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20cente'+'r\x20=\x200.5;\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20smoo'+'thing\x20and\x20'+'use\x20to\x20gen'+'erate\x20opac'+'ity\x0a\x20\x20\x20\x20fl'+'oat\x20inside'+'\x20=\x20smooths'+'tep(center'+'-smoothing'+',\x20center+s'+'moothing,\x20'+'sigDistInn'+'er);\x0a\x20\x20\x20\x20f'+'loat\x20outli'+'ne\x20=\x20smoot'+'hstep(cent'+'er-smoothi'+'ng,\x20center'+'+smoothing'+',\x20sigDistO'+'utline);\x0a\x20'+'\x20\x20\x20float\x20s'+'hadow\x20=\x20sm'+'oothstep(c'+'enter-smoo'+'thing,\x20cen'+'ter+smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20vec4\x20t'+'color\x20=\x20(o'+'utline\x20>\x20i'+'nside)\x20?\x20o'+'utline\x20*\x20v'+'ec4(outlin'+'e_color.a\x20'+'*\x20outline_'+'color.rgb,'+'\x20outline_c'+'olor.a)\x20:\x20'+'vec4(0.0);'+'\x0a\x20\x20\x20\x20tcolo'+'r\x20=\x20mix(tc'+'olor,\x20colo'+'r,\x20inside)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20scolor\x20='+'\x20(shadow\x20>'+'\x20outline)\x20'+'?\x20shadow\x20*'+'\x20vec4(shad'+'ow_color.a'+'\x20*\x20shadow_'+'color.rgb,'+'\x20shadow_co'+'lor.a)\x20:\x20t'+'color;\x0a\x20\x20\x20'+'\x20tcolor\x20=\x20'+'mix(scolor'+',\x20tcolor,\x20'+'outline);\x0a'+'\x0a\x20\x20\x20\x20//\x20Co'+'nvert\x20back'+'\x20to\x20gamma\x20'+'space\x20befo'+'re\x20returni'+'ng\x0a\x20\x20\x20\x20tco'+'lor.rgb\x20=\x20'+'gammaCorre'+'ctOutput(t'+'color.rgb)'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20return\x20tc'+'olor;\x0a}\x0a'),j1='\x0a\x0avec3\x20get'+'SpecularMo'+'dulate(in\x20'+'vec3\x20specu'+'larity,\x20in'+'\x20vec3\x20albe'+'do,\x20in\x20flo'+'at\x20metalne'+'ss,\x20in\x20flo'+'at\x20f0)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20di'+'electricF0'+'\x20=\x20f0\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(diel'+'ectricF0,\x20'+'albedo,\x20me'+'talness);\x0a'+'}\x0a\x0avec3\x20ge'+'tAlbedoMod'+'ulate(in\x20v'+'ec3\x20albedo'+',\x20in\x20float'+'\x20metalness'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20albed'+'o\x20*\x20(1.0\x20-'+'\x20metalness'+');\x0a}\x0a',Y1='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20vec2\x20u'+'v0;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2DArra'+'y\x20morphTex'+'ture;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20float\x20'+'morphFacto'+'r[{MORPH_T'+'EXTURE_MAX'+'_COUNT}];\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20ui'+'nt\x20morphIn'+'dex[{MORPH'+'_TEXTURE_M'+'AX_COUNT}]'+';\x0a\x20\x20\x20\x20unif'+'orm\x20int\x20co'+'unt;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PH_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20aa'+'bbSize;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20a'+'abbMin;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20highp\x20vec'+'3\x20color\x20=\x20'+'vec3(0,\x200,'+'\x200);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'pixelCoord'+'s\x20=\x20ivec2('+'uv0\x20*\x20vec2'+'(textureSi'+'ze(morphTe'+'xture,\x200).'+'xy));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20count;\x20'+'i++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'int\x20textur'+'eIndex\x20=\x20m'+'orphIndex['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20delta\x20=\x20t'+'exelFetch('+'morphTextu'+'re,\x20ivec3('+'pixelCoord'+'s,\x20int(tex'+'tureIndex)'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20color\x20+'+'=\x20morphFac'+'tor[i]\x20*\x20d'+'elta;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20MORPH_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20color\x20'+'=\x20(color\x20-'+'\x20aabbMin)\x20'+'/\x20aabbSize'+'\x20*\x2065535.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20u'+'vec4(color'+',\x201u);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20ve'+'c4(color,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a',K1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20}\x0a',Z1='\x0aattribute'+'\x20vec3\x20vert'+'ex_outline'+'Parameters'+';\x0aattribut'+'e\x20vec3\x20ver'+'tex_shadow'+'Parameters'+';\x0a\x0avarying'+'\x20vec4\x20outl'+'ine_color;'+'\x0avarying\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0avaryin'+'g\x20vec4\x20sha'+'dow_color;'+'\x0avarying\x20v'+'ec2\x20shadow'+'_offset;\x0a\x0a'+'void\x20unpac'+'kMsdfParam'+'s()\x20{\x0a\x20\x20\x20\x20'+'vec3\x20littl'+'e\x20=\x20mod(ve'+'rtex_outli'+'neParamete'+'rs,\x20256.);'+'\x0a\x20\x20\x20\x20vec3\x20'+'big\x20=\x20(ver'+'tex_outlin'+'eParameter'+'s\x20-\x20little'+')\x20/\x20256.;\x0a'+'\x0a\x20\x20\x20\x20outli'+'ne_color.r'+'b\x20=\x20little'+'.xy\x20/\x20255.'+';\x0a\x20\x20\x20\x20outl'+'ine_color.'+'ga\x20=\x20big.x'+'y\x20/\x20255.;\x0a'+'\x0a\x20\x20\x20\x20//\x20_o'+'utlineThic'+'knessScale'+'\x20===\x200.2\x0a\x20'+'\x20\x20\x20outline'+'_thickness'+'\x20=\x20little.'+'z\x20/\x20255.\x20*'+'\x200.2;\x0a\x0a\x20\x20\x20'+'\x20little\x20=\x20'+'mod(vertex'+'_shadowPar'+'ameters,\x202'+'56.);\x0a\x20\x20\x20\x20'+'big\x20=\x20(ver'+'tex_shadow'+'Parameters'+'\x20-\x20little)'+'\x20/\x20256.;\x0a\x0a'+'\x20\x20\x20\x20shadow'+'_color.rb\x20'+'=\x20little.x'+'y\x20/\x20255.;\x0a'+'\x20\x20\x20\x20shadow'+'_color.ga\x20'+'=\x20big.xy\x20/'+'\x20255.;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+'ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20shado'+'w_offset\x20='+'\x20(vec2(lit'+'tle.z,\x20big'+'.z)\x20/\x20127.'+'\x20-\x201.)\x20*\x200'+'.005;\x0a}\x0a',Q1='\x0amat3\x20dNor'+'malMatrix;'+'\x0a\x0avec3\x20get'+'Normal()\x20{'+'\x0a\x20\x20\x20\x20dNorm'+'alMatrix\x20='+'\x20getNormal'+'Matrix(dMo'+'delMatrix)'+';\x0a\x20\x20\x20\x20vec3'+'\x20localNorm'+'al\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}\x0a',J1='\x0a\x0aattribut'+'e\x20vec3\x20ver'+'tex_normal'+';\x0a\x0auniform'+'\x20mat3\x20matr'+'ix_normal;'+'\x0a\x0a#ifdef\x20M'+'ORPHING_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20morphNor'+'malTex;\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'morphNorma'+'lTex;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0avec3\x20'+'getLocalNo'+'rmal(vec3\x20'+'vertexNorm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20vec3\x20loca'+'lNormal\x20=\x20'+'vertex_nor'+'mal;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_NORM'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ivec2\x20mo'+'rphUV\x20=\x20ge'+'tTextureMo'+'rphCoords('+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'orphNormal'+'\x20=\x20vec3(te'+'xelFetch(m'+'orphNormal'+'Tex,\x20ivec2'+'(morphUV),'+'\x200).xyz)\x20/'+'\x2065535.0\x20*'+'\x202.0\x20-\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphNo'+'rmal\x20=\x20tex'+'elFetch(mo'+'rphNormalT'+'ex,\x20ivec2('+'morphUV),\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20localNor'+'mal\x20+=\x20mor'+'phNormal;\x0a'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20localN'+'ormal;\x0a}\x0a\x0a'+'#if\x20define'+'d(SKIN)\x20||'+'\x20defined(B'+'ATCH)\x0a\x20\x20\x20\x20'+'mat3\x20getNo'+'rmalMatrix'+'(mat4\x20mode'+'lMatrix)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mat3'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20ma'+'t3\x20getNorm'+'alMatrix(m'+'at4\x20modelM'+'atrix)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20mat3(m'+'odelMatrix'+'[0].xyz,\x20m'+('odelMatrix'+'[1].xyz,\x20m'+'odelMatrix'+'[2].xyz);\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20mat3'+'\x20getNormal'+'Matrix(mat'+'4\x20modelMat'+'rix)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_n'+'ormal;\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'),eP='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_bumpin'+'ess;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_NORMAL'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_normalDe'+'tailMapBum'+'piness;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20bl'+'endNormals'+'(vec3\x20n1,\x20'+'vec3\x20n2)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20https://'+'blog.selfs'+'hadow.com/'+'publicatio'+'ns/blendin'+'g-in-detai'+'l/#detail-'+'oriented\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20n1\x20'+'+=\x20vec3(0,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20n2\x20*'+'=\x20vec3(-1,'+'\x20-1,\x201);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20n1\x20*\x20d'+'ot(n1,\x20n2)'+'\x20/\x20n1.z\x20-\x20'+'n2;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0avo'+'id\x20getNorm'+'al()\x20{\x0a#if'+'def\x20STD_NO'+'RMAL_TEXTU'+'RE\x0a\x20\x20\x20\x20vec'+'3\x20normalMa'+'p\x20=\x20{STD_N'+'ORMAL_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_NORMAL_TE'+'XTURE_NAME'+'},\x20{STD_NO'+'RMAL_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+');\x0a\x20\x20\x20\x20nor'+'malMap\x20=\x20m'+'ix(vec3(0.'+'0,\x200.0,\x201.'+'0),\x20normal'+'Map,\x20mater'+'ial_bumpin'+'ess);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMALDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20norm'+'alDetailMa'+'p\x20=\x20{STD_N'+'ORMALDETAI'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_NOR'+'MALDETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'NORMALDETA'+'IL_TEXTURE'+'_UV},\x20text'+'ureBias));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20n'+'ormalDetai'+'lMap\x20=\x20mix'+'(vec3(0.0,'+'\x200.0,\x201.0)'+',\x20normalDe'+'tailMap,\x20m'+'aterial_no'+'rmalDetail'+'MapBumpine'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20blend'+'Normals(no'+'rmalMap,\x20n'+('ormalDetai'+'lMap);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20normal'+'ize(dTBN\x20*'+'\x20normalMap'+');\x0a#else\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20dVerte'+'xNormalW;\x0a'+'#endif\x0a}\x0a'),tP='\x0auniform\x20f'+'loat\x20mater'+'ial_opacit'+'y;\x0a\x0avoid\x20g'+'etOpacity('+')\x20{\x0a\x20\x20\x20\x20dA'+'lpha\x20=\x20mat'+'erial_opac'+'ity;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_OPACITY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20dAlpha\x20*='+'\x20texture2D'+'Bias({STD_'+'OPACITY_TE'+'XTURE_NAME'+'},\x20{STD_OP'+'ACITY_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20*=\x20c'+'lamp(vVert'+'exColor.{S'+'TD_OPACITY'+'_VERTEX_CH'+'ANNEL},\x200.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',sP='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20vec4\x20b'+'lueNoiseJi'+'tter;\x0a\x0a#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BLUENOI'+'SE\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blueN'+'oiseTex32;'+'\x0a#endif\x0a\x0av'+'oid\x20opacit'+'yDither(fl'+'oat\x20alpha,'+'\x20float\x20id)'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BAYER8\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20noise'+'\x20=\x20bayer8('+'floor(mod('+'gl_FragCoo'+'rd.xy\x20+\x20bl'+'ueNoiseJit'+'ter.xy\x20+\x20i'+'d,\x208.0)))\x20'+'/\x2064.0;\x0a\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20BLUENO'+'ISE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20frac'+'t(gl_FragC'+'oord.xy\x20/\x20'+'32.0\x20+\x20blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20noise\x20=\x20t'+'exture2DLo'+'d(blueNois'+'eTex32,\x20uv'+',\x200.0).y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20==\x20'+'IGNNOISE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20based\x20'+'on\x20https:/'+'/www.iryok'+'u.com/next'+'-generatio'+'n-post-pro'+'cessing-in'+'-call-of-d'+'uty-advanc'+'ed-warfare'+'/\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'agic\x20=\x20vec'+'3(0.067110'+'56,\x200.0058'+'3715,\x2052.9'+'829189);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20noi'+'se\x20=\x20fract'+'(magic.z\x20*'+'\x20fract(dot'+'(gl_FragCo'+'ord.xy\x20+\x20b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id,\x20magic.'+'xy)));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20convert\x20'+'the\x20noise\x20'+'to\x20linear\x20'+'space,\x20as\x20'+'that\x20is\x20sp'+'ecified\x20in'+('\x20sRGB\x20spac'+'e\x20(stores\x20'+'perceptual'+'\x20values)\x0a\x20'+'\x20\x20\x20noise\x20='+'\x20pow(noise'+',\x202.2);\x0a\x0a\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x20noise'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a}'+'\x0a'),iP='\x0a',rP='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20litArgs_'+'opacity;\x0a\x0a'+'#elif\x20LIT_'+'BLEND_TYPE'+'\x20==\x20PREMUL'+'TIPLIED\x0a\x0a\x20'+'\x20\x20\x20gl_Frag'+'Color.rgb\x20'+'*=\x20litArgs'+'_opacity;\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.a\x20='+'\x20litArgs_o'+'pacity;\x0a\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or.a\x20=\x201.0'+';\x0a\x0a#endif\x0a',aP='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20textu'+'re2D(sourc'+'e,\x20vUv0);\x0a'+'}\x0a',nP='\x0a\x0auniform\x20'+'vec3\x20mater'+'ial_sheen;'+'\x0a\x0avoid\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'heenColor\x20'+'=\x20material'+'_sheen;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEEN_'+'TEXTURE\x0a\x20\x20'+'\x20\x20sheenCol'+'or\x20*=\x20{STD'+'_SHEEN_TEX'+'TURE_DECOD'+'E}(texture'+'2DBias({ST'+'D_SHEEN_TE'+'XTURE_NAME'+'},\x20{STD_SH'+'EEN_TEXTUR'+'E_UV},\x20tex'+'tureBias))'+'.{STD_SHEE'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_VERTEX\x0a'+'\x20\x20\x20\x20sheenC'+'olor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20sSpec'+'ularity\x20=\x20'+'sheenColor'+';\x0a}\x0a',oP='\x0auniform\x20f'+'loat\x20mater'+'ial_sheenG'+'loss;\x0a\x0avoi'+'d\x20getSheen'+'Glossiness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20sheen'+'Glossiness'+'\x20=\x20materia'+'l_sheenGlo'+'ss;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20*'+'=\x20texture2'+'DBias({STD'+'_SHEENGLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_SHEENGLO'+'SS_TEXTURE'+'_UV},\x20text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20*='+'\x20saturate('+'vVertexCol'+'or.{STD_SH'+'EENGLOSS_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_INVER'+'T\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x201.0\x20-\x20'+'sheenGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20sGlossi'+'ness\x20=\x20she'+'enGlossine'+'ss\x20+\x200.000'+'0001;\x0a}\x0a',lP='\x0auniform\x20f'+'loat\x20mater'+'ial_height'+'MapFactor;'+'\x0a\x0avoid\x20get'+'Parallax()'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20paralla'+'xScale\x20=\x20m'+'aterial_he'+'ightMapFac'+'tor;\x0a\x0a\x20\x20\x20\x20'+'float\x20heig'+'ht\x20=\x20textu'+'re2DBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_H'+'EIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20he'+'ight\x20=\x20hei'+'ght\x20*\x20para'+'llaxScale\x20'+'-\x20parallax'+'Scale\x20*\x200.'+'5;\x0a\x20\x20\x20\x20vec'+'3\x20viewDirT'+'\x20=\x20dViewDi'+'rW\x20*\x20dTBN;'+'\x0a\x0a\x20\x20\x20\x20view'+'DirT.z\x20+=\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',hP='\x0auniform\x20u'+'int\x20meshIn'+'stanceId;\x0a'+'\x0avec4\x20getP'+'ickOutput('+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20vec4\x20i'+'nv\x20=\x20vec4('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20co'+'nst\x20uvec4\x20'+'shifts\x20=\x20u'+'vec4(16,\x208'+',\x200,\x2024);\x0a'+'\x20\x20\x20\x20uvec4\x20'+'col\x20=\x20(uve'+'c4(meshIns'+'tanceId)\x20>'+'>\x20shifts)\x20'+'&\x20uvec4(0x'+'ff);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'(col)\x20*\x20in'+'v;\x0a}\x0a',cP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20dR'+'eflDirW\x20=\x20'+'normalize('+'-reflect(v'+'iewDir,\x20wo'+'rldNormal)'+');\x0a}\x0a',dP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20sqrt'+'(1.0\x20-\x20min'+'(gloss,\x201.'+'0));\x0a\x0a\x20\x20\x20\x20'+'vec2\x20direc'+'tion\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicT\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3(directi'+'on,\x200.0));'+'\x0a\x20\x20\x20\x20vec3\x20'+'anisotropi'+'cB\x20=\x20norma'+'lize(cross'+'(tbn[2],\x20a'+'nisotropic'+'T));\x0a\x0a\x20\x20\x20\x20'+'float\x20anis'+'otropy\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20vec3'+'\x20anisotrop'+'icDirectio'+'n\x20=\x20anisot'+'ropicB;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicTa'+'ngent\x20=\x20cr'+'oss(anisot'+'ropicDirec'+'tion,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicNorm'+'al\x20=\x20cross'+'(anisotrop'+'icTangent,'+'\x20anisotrop'+'icDirectio'+'n);\x0a\x20\x20\x20\x20fl'+'oat\x20bendFa'+'ctor\x20=\x201.0'+'\x20-\x20anisotr'+'opy\x20*\x20(1.0'+'\x20-\x20roughne'+'ss);\x0a\x20\x20\x20\x20f'+'loat\x20bendF'+'actor4\x20=\x20b'+'endFactor\x20'+'*\x20bendFact'+'or\x20*\x20bendF'+'actor\x20*\x20be'+'ndFactor;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'entNormal\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}\x0a',fP='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0avoid\x20add'+'Reflection'+'CC(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20ccRe'+'flection\x20+'+'=\x20calcRefl'+'ection(ref'+'lDir,\x20glos'+'s);\x0a}\x0a#end'+'if\x0a',uP='\x0auniform\x20s'+'amplerCube'+'\x20texture_c'+'ubeMap;\x0aun'+'iform\x20floa'+'t\x20material'+'_reflectiv'+'ity;\x0a\x0avec3'+'\x20calcRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20lookup'+'Vec\x20=\x20cube'+'MapProject'+'(reflDir);'+'\x0a\x20\x20\x20\x20looku'+'pVec.x\x20*=\x20'+'-1.0;\x0a\x20\x20\x20\x20'+'return\x20{re'+'flectionDe'+'code}(text'+'ureCube(te'+'xture_cube'+'Map,\x20looku'+'pVec));\x0a}\x0a'+'\x0avoid\x20addR'+'eflection('+'vec3\x20reflD'+'ir,\x20float\x20'+'gloss)\x20{\x20\x20'+'\x20\x0a\x20\x20\x20\x20dRef'+'lection\x20+='+'\x20vec4(calc'+'Reflection'+'(reflDir,\x20'+'gloss),\x20ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',mP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_envAtlas;'+'\x0a#endif\x0aun'+'iform\x20samp'+'lerCube\x20te'+'xture_cube'+'Map;\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'flectivity'+';\x0a\x0avec3\x20ca'+'lcReflecti'+'on(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20cub'+'eMapProjec'+'t(reflDir)'+'\x20*\x20vec3(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20t'+'oSpherical'+'Uv(dir);\x0a\x0a'+'\x20\x20\x20\x20//\x20cal'+'culate\x20rou'+'ghness\x20lev'+'el\x0a\x20\x20\x20\x20flo'+'at\x20level\x20='+'\x20saturate('+'1.0\x20-\x20glos'+'s)\x20*\x205.0;\x0a'+'\x20\x20\x20\x20float\x20'+'ilevel\x20=\x20f'+'loor(level'+');\x0a\x20\x20\x20\x20flo'+'at\x20flevel\x20'+'=\x20level\x20-\x20'+'ilevel;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20sh'+'arp\x20=\x20{ref'+'lectionCub'+'emapDecode'+'}(textureC'+'ube(textur'+'e_cubeMap,'+'\x20dir));\x0a\x20\x20'+'\x20\x20vec3\x20rou'+'ghA\x20=\x20{ref'+'lectionDec'+'ode}(textu'+'re2D(textu'+'re_envAtla'+'s,\x20mapRoug'+'hnessUv(uv'+',\x20ilevel))'+');\x0a\x20\x20\x20\x20vec'+'3\x20roughB\x20='+'\x20{reflecti'+'onDecode}('+'texture2D('+'texture_en'+'vAtlas,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20proc'+'essEnviron'+'ment(mix(s'+'harp,\x20mix('+'roughA,\x20ro'+'ughB,\x20flev'+'el),\x20min(l'+'evel,\x201.0)'+'));\x0a}\x0a\x0avoi'+'d\x20addRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x20\x20\x20\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20+=\x20vec'+'4(calcRefl'+'ection(ref'+'lDir,\x20glos'+'s),\x20materi'+'al_reflect'+'ivity);\x0a}\x0a',pP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_env'+'Atlas;\x0a#en'+'dif\x0aunifor'+'m\x20float\x20ma'+'terial_ref'+'lectivity;'+'\x0a\x0a//\x20calcu'+'late\x20mip\x20l'+'evel\x20for\x20s'+'hiny\x20refle'+'ction\x20give'+'n\x20equirect'+'\x20coords\x20uv'+'.\x0afloat\x20sh'+'inyMipLeve'+'l(vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20dx\x20=\x20dFd'+'x(uv);\x0a\x20\x20\x20'+'\x20vec2\x20dy\x20='+'\x20dFdy(uv);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20s'+'econd\x20dF\x20a'+'t\x20180\x20degr'+'ees\x0a\x20\x20\x20\x20ve'+'c2\x20uv2\x20=\x20v'+'ec2(fract('+'uv.x\x20+\x200.5'+'),\x20uv.y);\x0a'+'\x20\x20\x20\x20vec2\x20d'+'x2\x20=\x20dFdx('+'uv2);\x0a\x20\x20\x20\x20'+'vec2\x20dy2\x20='+'\x20dFdy(uv2)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'min\x20of\x20bot'+'h\x20sets\x20of\x20'+'dF\x20to\x20hand'+'le\x20discont'+'inuity\x20at\x20'+'the\x20azim\x20e'+'dge\x0a\x20\x20\x20\x20fl'+'oat\x20maxd\x20='+'\x20min(max(d'+'ot(dx,\x20dx)'+',\x20dot(dy,\x20'+'dy)),\x20max('+'dot(dx2,\x20d'+'x2),\x20dot(d'+'y2,\x20dy2)))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'0.5\x20*\x20log2'+'(maxd)\x20-\x201'+'.0\x20+\x20textu'+'reBias,\x200.'+'0,\x205.0);\x0a}'+'\x0a\x0avec3\x20cal'+'cReflectio'+'n(vec3\x20ref'+'lDir,\x20floa'+'t\x20gloss)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3(-1.'+'0,\x201.0,\x201.'+'0);\x0a\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20to'+'SphericalU'+'v(dir);\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20roug'+'hness\x20leve'+'l\x0a\x20\x20\x20\x20floa'+'t\x20level\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20float\x20i'+'level\x20=\x20fl'+'oor(level)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'accessing\x20'+'the\x20shiny\x20'+'(top\x20level'+')\x20reflecti'+'on\x20-\x20perfo'+'rm\x20manual\x20'+'mipmap\x20loo'+'kup\x0a\x20\x20\x20\x20fl'+('oat\x20level2'+'\x20=\x20shinyMi'+'pLevel(uv\x20'+'*\x20atlasSiz'+'e);\x0a\x20\x20\x20\x20fl'+'oat\x20ilevel'+'2\x20=\x20floor('+'level2);\x0a\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v0,\x20uv1;\x0a\x20'+'\x20\x20\x20float\x20w'+'eight;\x0a\x20\x20\x20'+'\x20if\x20(ileve'+'l\x20==\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uv0\x20=\x20mapS'+'hinyUv(uv,'+'\x20ilevel2);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v1\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x20level2\x20'+'-\x20ilevel2;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20acces'+'sing\x20rough'+'\x20reflectio'+'n\x20-\x20just\x20s'+'ample\x20the\x20'+'same\x20part\x20'+'twice\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'uv1\x20=\x20mapR'+'oughnessUv'+'(uv,\x20ileve'+'l);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20weight\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'3\x20linearA\x20'+'=\x20{reflect'+'ionDecode}'+'(texture2D'+'(texture_e'+'nvAtlas,\x20u'+'v0));\x0a\x20\x20\x20\x20'+'vec3\x20linea'+'rB\x20=\x20{refl'+'ectionDeco'+'de}(textur'+'e2D(textur'+'e_envAtlas'+',\x20uv1));\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near0\x20=\x20mi'+'x(linearA,'+'\x20linearB,\x20'+'weight);\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near1\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(line'+'ar0,\x20linea'+'r1,\x20level\x20'+'-\x20ilevel))'+';\x0a}\x0a\x0avoid\x20'+'addReflect'+'ion(vec3\x20r'+'eflDir,\x20fl'+'oat\x20gloss)'+'\x20{\x20\x20\x20\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20+=\x20vec4('+'calcReflec'+'tion(reflD'+'ir,\x20gloss)'+',\x20material'+'_reflectiv'+'ity);\x0a}\x0a'),_P='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'uniform\x20sa'+'mpler2D\x20te'+'xture_sphe'+'reMap;\x0auni'+'form\x20float'+'\x20material_'+'reflectivi'+'ty;\x0a\x0avec3\x20'+'calcReflec'+'tion(vec3\x20'+'reflDir,\x20f'+'loat\x20gloss'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20reflDir'+'V\x20=\x20(mat3('+'matrix_vie'+'w)\x20*\x20reflD'+'ir);\x0a\x0a\x20\x20\x20\x20'+'float\x20m\x20=\x20'+'2.0\x20*\x20sqrt'+'(dot(reflD'+'irV.xy,\x20re'+'flDirV.xy)'+'\x20+\x20(reflDi'+'rV.z\x20+\x201.0'+')\x20*\x20(reflD'+'irV.z\x20+\x201.'+'0));\x0a\x20\x20\x20\x20v'+'ec2\x20sphere'+'MapUv\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(texture2'+'D(texture_'+'sphereMap,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0av'+'oid\x20addRef'+'lection(ve'+'c3\x20reflDir'+',\x20float\x20gl'+'oss)\x20{\x20\x20\x20\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20+=\x20v'+'ec4(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20mate'+'rial_refle'+'ctivity);\x0a'+'}\x0a',gP='\x0a\x0avoid\x20add'+'Reflection'+'Sheen(vec3'+'\x20worldNorm'+'al,\x20vec3\x20v'+'iewDir,\x20fl'+'oat\x20gloss)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20NoV\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'float\x20alph'+'aG\x20=\x20gloss'+'\x20*\x20gloss;\x0a'+'\x0a\x20\x20\x20\x20//\x20Av'+'oid\x20using\x20'+'a\x20LUT\x20and\x20'+'approximat'+'e\x20the\x20valu'+'es\x20analyti'+'cally\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'gloss\x20<\x200.'+'25\x20?\x20-339.'+'2\x20*\x20alphaG'+'\x20+\x20161.4\x20*'+'\x20gloss\x20-\x202'+'5.9\x20:\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95;\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20gl'+'oss\x20<\x200.25'+'\x20?\x2044.0\x20*\x20'+'alphaG\x20-\x202'+'3.7\x20*\x20glos'+'s\x20+\x203.26\x20:'+'\x201.97\x20*\x20al'+'phaG\x20-\x203.2'+'7\x20*\x20gloss\x20'+'+\x200.72;\x0a\x20\x20'+'\x20\x20float\x20DG'+'\x20=\x20exp(\x20a\x20'+'*\x20NoV\x20+\x20b\x20'+')\x20+\x20(\x20glos'+'s\x20<\x200.25\x20?'+'\x200.0\x20:\x200.1'+'\x20*\x20(\x20gloss'+'\x20-\x200.25\x20)\x20'+');\x0a\x20\x20\x20\x20sRe'+'flection\x20+'+'=\x20calcRefl'+'ection(wor'+'ldNormal,\x20'+'0.0)\x20*\x20sat'+'urate(DG);'+'\x0a}\x0a',SP='\x0avec3\x20refr'+'act2(vec3\x20'+'viewVec,\x20v'+'ec3\x20normal'+',\x20float\x20IO'+'R)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20vn\x20=\x20'+'dot(viewVe'+'c,\x20normal)'+';\x0a\x20\x20\x20\x20floa'+'t\x20k\x20=\x201.0\x20'+'-\x20IOR\x20*\x20IO'+'R\x20*\x20(1.0\x20-'+'\x20vn\x20*\x20vn);'+'\x0a\x20\x20\x20\x20vec3\x20'+'refrVec\x20=\x20'+'IOR\x20*\x20view'+'Vec\x20-\x20(IOR'+'\x20*\x20vn\x20+\x20sq'+'rt(k))\x20*\x20n'+'ormal;\x0a\x20\x20\x20'+'\x20return\x20re'+'frVec;\x0a}\x0a\x0a'+'void\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20vec3\x20w'+'orldNormal'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20viewDir,'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20thicknes'+'s,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20albedo'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20transmi'+'ssion,\x0a\x20\x20\x20'+'\x20float\x20ref'+'ractionInd'+'ex,\x0a\x20\x20\x20\x20fl'+'oat\x20disper'+'sion\x0a#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20,\x20'+'vec3\x20iride'+'scenceFres'+'nel,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceInte'+'nsity\x0a#end'+'if\x20\x0a)\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20s'+'ame\x20reflec'+'tion\x20code\x20'+'with\x20refra'+'ction\x20vect'+'or\x0a\x20\x20\x20\x20vec'+'4\x20tmpRefl\x20'+'=\x20dReflect'+'ion;\x0a\x20\x20\x20\x20v'+'ec3\x20reflec'+'tionDir\x20=\x20'+'refract2(-'+'viewDir,\x20w'+'orldNormal'+',\x20refracti'+'onIndex);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve'+'c4(0);\x0a\x20\x20\x20'+'\x20addReflec'+'tion(refle'+'ctionDir,\x20'+'gloss);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20dRe'+'flection.r'+'gb\x20*\x20albed'+'o,\x20transmi'+'ssion);\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20=\x20tmpR'+'efl;\x0a}\x0a',yP='\x0auniform\x20f'+'loat\x20mater'+'ial_invAtt'+'enuationDi'+'stance;\x0aun'+'iform\x20vec3'+'\x20material_'+'attenuatio'+'n;\x0a\x0avec3\x20e'+'valRefract'+'ionColor(v'+'ec3\x20refrac'+'tionVector'+',\x20float\x20gl'+'oss,\x20float'+'\x20refractio'+'nIndex)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20Th'+'e\x20refracti'+'on\x20point\x20i'+'s\x20the\x20entr'+'y\x20point\x20+\x20'+'vector\x20to\x20'+'exit\x20point'+'\x0a\x20\x20\x20\x20vec4\x20'+'pointOfRef'+'raction\x20=\x20'+'vec4(vPosi'+'tionW\x20+\x20re'+'fractionVe'+'ctor,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'Project\x20to'+'\x20texture\x20s'+'pace\x20so\x20we'+'\x20can\x20sampl'+'e\x20it\x0a\x20\x20\x20\x20v'+'ec4\x20projec'+'tionPoint\x20'+'=\x20matrix_v'+'iewProject'+'ion\x20*\x20poin'+'tOfRefract'+'ion;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20bui'+'lt-in\x20getG'+'rabScreenP'+'os\x20functio'+'n\x20to\x20conve'+'rt\x20screen\x20'+'position\x20t'+'o\x20grab\x20tex'+'ture\x20uv\x20co'+'ords\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etGrabScre'+'enPos(proj'+'ectionPoin'+'t);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Use\x20IOR\x20'+'and\x20roughn'+'ess\x20to\x20sel'+'ect\x20mip\x0a\x20\x20'+'\x20\x20float\x20io'+'rToRoughne'+'ss\x20=\x20(1.0\x20'+'-\x20gloss)\x20*'+'\x20clamp((1.'+'0\x20/\x20refrac'+'tionIndex)'+'\x20*\x202.0\x20-\x202'+'.0,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20f'+'loat\x20refra'+'ctionLod\x20='+'\x20log2(uScr'+'eenSize.x)'+'\x20*\x20iorToRo'+'ughness;\x0a\x20'+'\x20\x20\x20vec3\x20re'+'fraction\x20='+'\x20texture2D'+'Lod(uScene'+'ColorMap,\x20'+'uv,\x20refrac'+'tionLod).r'+'gb;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20refr'+'action;\x0a}\x0a'+'\x0avoid\x20addR'+'efraction('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20thickne'+'ss,\x20\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+('3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20albed'+'o,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20transm'+'ission,\x0a\x20\x20'+'\x20\x20float\x20re'+'fractionIn'+'dex,\x0a\x20\x20\x20\x20f'+'loat\x20dispe'+'rsion\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a)\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20Extr'+'act\x20scale\x20'+'from\x20the\x20m'+'odel\x20trans'+'form\x0a\x20\x20\x20\x20v'+'ec3\x20modelS'+'cale;\x0a\x20\x20\x20\x20'+'modelScale'+'.x\x20=\x20lengt'+'h(vec3(mat'+'rix_model['+'0].xyz));\x0a'+'\x20\x20\x20\x20modelS'+'cale.y\x20=\x20l'+'ength(vec3'+'(matrix_mo'+'del[1].xyz'+'));\x0a\x20\x20\x20\x20mo'+'delScale.z'+'\x20=\x20length('+'vec3(matri'+'x_model[2]'+'.xyz));\x0a\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20the\x20'+'refraction'+'\x20vector,\x20s'+'caled\x20by\x20t'+'he\x20thickne'+'ss\x20and\x20sca'+'le\x20of\x20the\x20'+'object\x0a\x20\x20\x20'+'\x20vec3\x20scal'+'e\x20=\x20thickn'+'ess\x20*\x20mode'+'lScale;\x0a\x20\x20'+'\x20\x20vec3\x20ref'+'ractionVec'+'tor\x20=\x20norm'+'alize(refr'+'act(-viewD'+'ir,\x20worldN'+'ormal,\x20ref'+'ractionInd'+'ex))\x20*\x20sca'+'le;\x0a\x20\x20\x20\x20ve'+'c3\x20refract'+'ion\x20=\x20eval'+'Refraction'+'Color(refr'+'actionVect'+'or,\x20gloss,'+'\x20refractio'+'nIndex);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20bas'+'ed\x20on\x20the\x20'+'dispersion'+'\x20material\x20'+'property,\x20'+'calculate\x20'+'modified\x20r'+'efraction\x20'+'index\x20valu'+'es\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20for\x20R\x20'+'and\x20B\x20chan'+'nels\x20and\x20e'+'valuate\x20th'+'e\x20refracti'+'on\x20color\x20f'+'or\x20them.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20halfSpr'+'ead\x20=\x20(1.0'+'\x20/\x20refract'+'ionIndex\x20-')+('\x201.0)\x20*\x200.'+'025\x20*\x20disp'+'ersion;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20refract'+'ionIndexR\x20'+'=\x20refracti'+'onIndex\x20-\x20'+'halfSpread'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'refraction'+'Vector\x20=\x20n'+'ormalize(r'+'efract(-vi'+'ewDir,\x20wor'+'ldNormal,\x20'+'refraction'+'IndexR))\x20*'+'\x20scale;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20refr'+'action.r\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'xR).r;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20refracti'+'onIndexB\x20='+'\x20refractio'+'nIndex\x20+\x20h'+'alfSpread;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efractionV'+'ector\x20=\x20no'+'rmalize(re'+'fract(-vie'+'wDir,\x20worl'+'dNormal,\x20r'+'efractionI'+'ndexB))\x20*\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20refra'+'ction.b\x20=\x20'+'evalRefrac'+'tionColor('+'refraction'+'Vector,\x20gl'+'oss,\x20refra'+'ctionIndex'+'B).b;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20Trans'+'mittance\x20i'+'s\x20our\x20fina'+'l\x20refracti'+'on\x20color\x0a\x20'+'\x20\x20\x20vec3\x20tr'+'ansmittanc'+'e;\x0a\x20\x20\x20\x20if\x20'+'(material_'+'invAttenua'+'tionDistan'+'ce\x20!=\x200.0)'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'attenuatio'+'n\x20=\x20-log(m'+'aterial_at'+'tenuation)'+'\x20*\x20materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans'+'mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20vec3'+'\x20fresnel\x20='+'\x20vec3(1.0)'+'\x20-\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot(')+('viewDir,\x20w'+'orldNormal'+'),\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20ref'+'raction\x20*\x20'+'transmitta'+'nce\x20*\x20fres'+'nel,\x20trans'+'mission);\x0a'+'}\x0a'),vP='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0a//\x20sourc'+'e\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'lerCube\x20so'+'urceCube;\x0a'+'#else\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20so'+'urceTex;\x0a#'+'endif\x0a\x0a#if'+'def\x20USE_SA'+'MPLES_TEX\x0a'+'\x20\x20\x20\x20//\x20sam'+'ples\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20sam'+'plesTex;\x0a\x20'+'\x20\x20\x20uniform'+'\x20vec2\x20samp'+'lesTexInve'+'rseSize;\x0a#'+'endif\x0a\x0a//\x20'+'params:\x0a//'+'\x20x\x20-\x20targe'+'t\x20cubemap\x20'+'face\x200..6\x0a'+'//\x20y\x20-\x20tar'+'get\x20image\x20'+'total\x20pixe'+'ls\x0a//\x20z\x20-\x20'+'source\x20cub'+'emap\x20size\x0a'+'uniform\x20ve'+'c3\x20params;'+'\x0a\x0afloat\x20ta'+'rgetFace()'+'\x20{\x20return\x20'+'params.x;\x20'+'}\x0afloat\x20ta'+'rgetTotalP'+'ixels()\x20{\x20'+'return\x20par'+'ams.y;\x20}\x0af'+'loat\x20sourc'+'eTotalPixe'+'ls()\x20{\x20ret'+'urn\x20params'+'.z;\x20}\x0a\x0aflo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0a#i'+'nclude\x20\x22de'+'codePS\x22\x0a#i'+'nclude\x20\x22en'+'codePS\x22\x0a\x0a/'+'/--\x20suppor'+'ted\x20projec'+'tions\x0a\x0avec'+'3\x20modifySe'+'ams(vec3\x20d'+'ir,\x20float\x20'+'scale)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20ad'+'ir\x20=\x20abs(d'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20M\x20=\x20m'+'ax(max(adi'+'r.x,\x20adir.'+'y),\x20adir.z'+');\x0a\x20\x20\x20\x20ret'+'urn\x20dir\x20/\x20'+'M\x20*\x20vec3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.x\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20adir.y\x20'+'==\x20M\x20?\x201.0'+'\x20:\x20scale,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.z\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0avec2\x20t'+'oSpherical'+'(vec3\x20dir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec2(d'+'ir.xz\x20==\x20v'+'ec2(0.0)\x20?'+('\x200.0\x20:\x20ata'+'n(dir.x,\x20d'+'ir.z),\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0avec3\x20f'+'romSpheric'+'al(vec2\x20uv'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec3('+'cos(uv.y)\x20'+'*\x20sin(uv.x'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'in(uv.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cos('+'uv.y)\x20*\x20co'+'s(uv.x));\x0a'+'}\x0a\x0avec3\x20ge'+'tDirection'+'Equirect()'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20fromSp'+'herical((v'+'ec2(vUv0.x'+',\x201.0\x20-\x20vU'+'v0.y)\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20vec2(PI,\x20'+'PI\x20*\x200.5))'+';\x0a}\x0a\x0a//\x20oc'+'tahedral\x20c'+'ode,\x20based'+'\x20on\x20https:'+'//jcgt.org'+'/published'+'/0003/02/0'+'1/\x0a//\x20\x22Sur'+'vey\x20of\x20Eff'+'icient\x20Rep'+'resentatio'+'ns\x20for\x20Ind'+'ependent\x20U'+'nit\x20Vector'+'s\x22\x20by\x20Cigo'+'lle,\x20Donow'+',\x20Evangela'+'kos,\x20Mara,'+'\x20McGuire,\x20'+'Meyer\x0a\x0aflo'+'at\x20signNot'+'Zero(float'+'\x20k){\x0a\x20\x20\x20\x20r'+'eturn(k\x20>='+'\x200.0)\x20?\x201.'+'0\x20:\x20-1.0;\x0a'+'}\x0a\x0avec2\x20si'+'gnNotZero('+'vec2\x20v)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20vec2(sign'+'NotZero(v.'+'x),\x20signNo'+'tZero(v.y)'+');\x0a}\x0a\x0a//\x20R'+'eturns\x20a\x20u'+'nit\x20vector'+'.\x20Argument'+'\x20o\x20is\x20an\x20o'+'ctahedral\x20'+'vector\x20pac'+'ked\x20via\x20oc'+'tEncode,\x20o'+'n\x20the\x20[-1,'+'\x20+1]\x20squar'+'e\x0avec3\x20oct'+'Decode(vec'+'2\x20o)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20v\x20=\x20'+'vec3(o.x,\x20'+'1.0\x20-\x20abs('+'o.x)\x20-\x20abs'+'(o.y),\x20o.y'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20v.xz\x20=\x20('+'1.0\x20-\x20abs('+'v.zx))\x20*\x20s'+'ignNotZero'+'(v.xz);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20norma'+'lize(v);\x0a}'+'\x0a\x0avec3\x20get'+'DirectionO'+'ctahedral('+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20octDe'+'code(vec2(')+('vUv0.x,\x201.'+'0\x20-\x20vUv0.y'+')\x20*\x202.0\x20-\x20'+'1.0);\x0a}\x0a\x0a/'+'/\x20Assumes\x20'+'that\x20v\x20is\x20'+'a\x20unit\x20vec'+'tor.\x20The\x20r'+'esult\x20is\x20a'+'n\x20octahedr'+'al\x20vector\x20'+'on\x20the\x20[-1'+',\x20+1]\x20squa'+'re\x0avec2\x20oc'+'tEncode(in'+'\x20vec3\x20v)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20vec2'+'\x20result\x20=\x20'+'v.xz\x20*\x20(1.'+'0\x20/\x20l1norm'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20result\x20='+'\x20(1.0\x20-\x20ab'+'s(result.y'+'x))\x20*\x20sign'+'NotZero(re'+'sult.xy);\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20res'+'ult;\x0a}\x0a\x0a//'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'///////\x0a\x0a#'+'ifdef\x20CUBE'+'MAP_SOURCE'+'\x0a\x20\x20\x20\x20vec4\x20'+'sampleCube'+'map(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureCu'+'be(sourceC'+'ube,\x20modif'+'ySeams(dir'+',\x201.0));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eCubemap(v'+'ec2\x20sph)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leCubemap('+'fromSpheri'+'cal(sph));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20vec4\x20sam'+'pleCubemap'+'(vec3\x20dir,'+'\x20float\x20mip'+'Level)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20textur'+'eCubeLod(s'+'ourceCube,'+'\x20modifySea'+'ms(dir,\x201.'+'0),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleCub'+'emap(vec2\x20'+'sph,\x20float'+'\x20mipLevel)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleCubema'+'p(fromSphe'+'rical(sph)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eEquirect('+'vec2\x20sph)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'sph\x20/\x20vec2'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'ture2D(sou'+'rceTex,\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec4\x20s'+'ampleEquir'+'ect(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleEqu'+'irect(toSp'+'herical(di'+'r));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleEqu'+'irect(vec2'+'\x20sph,\x20floa'+'t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20sph\x20/\x20ve'+'c2(PI\x20*\x202.'+'0,\x20PI)\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2DLo'+'d(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y),\x20mip'+'Level);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Equirect(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20sampleEq'+'uirect(toS'+'pherical(d'+'ir),\x20mipLe'+'vel);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20o'+'ctEncode(d'+'ir)\x20*\x200.5\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20texture2'+'D(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Octahedral'+'(vec2\x20sph)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleOctahe'+'dral(fromS'+'pherical(s'+'ph));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20octEn'+'code(dir)\x20'+'*\x200.5\x20+\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20te'+'xture2DLod'+'(sourceTex'+',\x20vec2(uv.'+'x,\x201.0\x20-\x20u'+'v.y),\x20mipL'+'evel);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20sampleO'+'ctahedral('+'vec2\x20sph,\x20'+'float\x20mipL'+'evel)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleO'+'ctahedral('+'fromSpheri'+'cal(sph),\x20')+('mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0avec3'+'\x20getDirect'+'ionCubemap'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec2\x20st\x20=\x20v'+'Uv0\x20*\x202.0\x20'+'-\x201.0;\x0a\x20\x20\x20'+'\x20float\x20fac'+'e\x20=\x20target'+'Face();\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ve'+'c;\x0a\x20\x20\x20\x20if\x20'+'(face\x20==\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec\x20=\x20'+'vec3(1,\x20-s'+'t.y,\x20-st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3(-1,\x20-st.'+'y,\x20st.x);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(face\x20'+'==\x202.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c\x20=\x20vec3(s'+'t.x,\x201,\x20st'+'.y);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x203.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3(st.x,\x20'+'-1,\x20-st.y)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(fac'+'e\x20==\x204.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec\x20=\x20vec3'+'(st.x,\x20-st'+'.y,\x201);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec\x20=\x20vec3('+'-st.x,\x20-st'+'.y,\x20-1);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(mod'+'ifySeams(v'+'ec,\x201.0));'+'\x0a}\x0a\x0amat3\x20m'+'atrixFromV'+'ector(vec3'+'\x20n)\x20{\x20//\x20f'+'risvad\x0a\x20\x20\x20'+'\x20float\x20a\x20='+'\x201.0\x20/\x20(1.'+'0\x20+\x20n.z);\x0a'+'\x20\x20\x20\x20float\x20'+'b\x20=\x20-n.x\x20*'+'\x20n.y\x20*\x20a;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'1\x20=\x20vec3(1'+'.0\x20-\x20n.x\x20*'+'\x20n.x\x20*\x20a,\x20'+'b,\x20-n.x);\x0a'+'\x20\x20\x20\x20vec3\x20b'+'2\x20=\x20vec3(b'+',\x201.0\x20-\x20n.'+'y\x20*\x20n.y\x20*\x20'+'a,\x20-n.y);\x0a'+'\x20\x20\x20\x20return'+'\x20mat3(b1,\x20'+'b2,\x20n);\x0a}\x0a'+'\x0amat3\x20matr'+'ixFromVect'+'orSlow(vec'+'3\x20n)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20up\x20='+'\x20(1.0\x20-\x20ab'+'s(n.y)\x20<=\x20'+'0.0000001)'+'\x20?\x20vec3(0.'+'0,\x200.0,\x20n.'+'y\x20>\x200.0\x20?\x20'+'1.0\x20:\x20-1.0'+')\x20:\x20vec3(0'+'.0,\x201.0,\x200'+'.0);\x0a\x20\x20\x20\x20v'+'ec3\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20vec'+'3\x20y\x20=\x20cros')+('s(n,\x20x);\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(x,\x20y,'+'\x20n);\x0a}\x0a\x0ave'+'c4\x20reproje'+'ct()\x20{\x0a\x20\x20\x20'+'\x20if\x20({NUM_'+'SAMPLES}\x20<'+'=\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20si'+'ngle\x20sampl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20{EN'+'CODE_FUNC}'+'({DECODE_F'+'UNC}({SOUR'+'CE_FUNC}({'+'TARGET_FUN'+'C}())));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multi\x20s'+'ample\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20t'+'\x20=\x20{TARGET'+'_FUNC}();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20tu\x20=\x20dF'+'dx(t);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'tv\x20=\x20dFdy('+'t);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(float\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'++u)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(float\x20'+'v\x20=\x200.0;\x20v'+'\x20<\x20{NUM_SA'+'MPLES_SQRT'+'};\x20++v)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20resu'+'lt\x20+=\x20{DEC'+'ODE_FUNC}('+'{SOURCE_FU'+'NC}(normal'+'ize(t\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20tu'+'\x20*\x20(u\x20/\x20{N'+'UM_SAMPLES'+'_SQRT}\x20-\x200'+'.5)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20tv\x20*'+'\x20(v\x20/\x20{NUM'+'_SAMPLES_S'+'QRT}\x20-\x200.5'+'))));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20({'+'NUM_SAMPLE'+'S_SQRT}\x20*\x20'+'{NUM_SAMPL'+'ES_SQRT}))'+';\x0a\x20\x20\x20\x20}\x0a}\x0a'+'\x0avec4\x20unpa'+'ckFloat\x20=\x20'+'vec4(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20void\x20'+'unpackSamp'+'le(int\x20i,\x20'+'out\x20vec3\x20L'+',\x20out\x20floa')+('t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20u\x20'+'=\x20(float(i'+'\x20*\x204)\x20+\x200.'+'5)\x20*\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20v\x20=\x20(f'+'loor(u)\x20+\x20'+'0.5)\x20*\x20sam'+'plesTexInv'+'erseSize.y'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20raw;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.x\x20=\x20dot'+'(texture2D'+'(samplesTe'+'x,\x20vec2(u,'+'\x20v)),\x20unpa'+'ckFloat);\x20'+'u\x20+=\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'texture2D('+'samplesTex'+',\x20vec2(u,\x20'+'v)),\x20unpac'+'kFloat);\x20u'+'\x20+=\x20sample'+'sTexInvers'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.z\x20=\x20dot(t'+'exture2D(s'+'amplesTex,'+'\x20vec2(u,\x20v'+')),\x20unpack'+'Float);\x20u\x20'+'+=\x20samples'+'TexInverse'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20raw.'+'w\x20=\x20dot(te'+'xture2D(sa'+'mplesTex,\x20'+'vec2(u,\x20v)'+'),\x20unpackF'+'loat);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20L.xy'+'z\x20=\x20raw.xy'+'z\x20*\x202.0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20mipLeve'+'l\x20=\x20raw.w\x20'+'*\x208.0;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20convolve\x20'+'an\x20environ'+'ment\x20given'+'\x20pre-gener'+'ated\x20sampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamples()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L')+(',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level))\x20*\x20'+'L.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tot'+'alWeight\x20+'+'=\x20L.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20{ENCODE'+'_FUNC}(res'+'ult\x20/\x20tota'+'lWeight);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20unweig'+'hted\x20versi'+'on\x20of\x20pref'+'ilterSampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamplesUn'+'weighted()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20fl'+'oat({NUM_S'+'AMPLES}));'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20{PROCESS'+'_FUNC}();\x0a'+'}\x0a'),xP='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0auniform'+'\x20vec4\x20uvMo'+'d;\x0avarying'+'\x20vec2\x20vUv0'+';\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20v'+'ec4(vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(vertex_po'+'sition.xy\x20'+'*\x200.5\x20+\x200.'+'5)\x20*\x20uvMod'+'.xy\x20+\x20uvMo'+'d.zw);\x0a}\x0a',TP='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20uScen'+'eDepthMap;'+'\x0a\x0a#ifndef\x20'+'SCREENSIZE'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20SCREENS'+'IZE\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20un'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#ifndef'+'\x20CAMERAPLA'+'NES\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20camera'+'_params;\x20/'+'/\x20x:\x201\x20/\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20\x20y:\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20z:\x20ca'+'mera_near,'+'\x20\x20\x20\x20\x20\x20\x20\x20w:'+'\x20is_ortho\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20lineariz'+'eDepth(flo'+'at\x20z)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'camera_par'+'ams.w\x20==\x200'+'.0)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(camera'+'_params.z\x20'+'*\x20camera_p'+'arams.y)\x20/'+'\x20(camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(camer'+'a_params.z'+'\x20-\x20camera_'+'params.y))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20camera'+'_params.z\x20'+'+\x20z\x20*\x20(cam'+'era_params'+'.y\x20-\x20camer'+'a_params.z'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0aflo'+'at\x20delinea'+'rizeDepth('+'float\x20line'+'arDepth)\x20{'+'\x0a\x20\x20\x20\x20if\x20(c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'(camera_pa'+'rams.y\x20*\x20('+'camera_par'+'ams.z\x20-\x20li'+'nearDepth)'+')\x20/\x20(linea'+'rDepth\x20*\x20('+'camera_par'+'ams.z\x20-\x20ca'+'mera_param'+'s.y));\x0a\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(line'+'arDepth\x20-\x20'+'camera_par'+'ams.z)\x20/\x20('+('camera_par'+'ams.y\x20-\x20ca'+'mera_param'+'s.z);\x0a\x20\x20\x20\x20'+'}\x0a}\x0a\x0a//\x20Re'+'trieves\x20re'+'ndered\x20lin'+'ear\x20camera'+'\x20depth\x20by\x20'+'UV\x0afloat\x20g'+'etLinearSc'+'reenDepth('+'vec2\x20uv)\x20{'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SCENE_DE'+'PTHMAP_LIN'+'EAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_FLOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2D(u'+'SceneDepth'+'Map,\x20uv).r'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20textu'+'reSize\x20=\x20t'+'extureSize'+'(uSceneDep'+'thMap,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ivec2\x20t'+'exel\x20=\x20ive'+'c2(uv\x20*\x20ve'+'c2(texture'+'Size));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20data\x20'+'=\x20texelFet'+'ch(uSceneD'+'epthMap,\x20t'+'exel,\x200);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(data.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(uint(d'+'ata.g\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20|\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(uint(dat'+'a.b\x20*\x20255.'+'0)\x20<<\x208u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(data.a\x20'+'*\x20255.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uintBitsTo'+'Float(intB'+'its);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20line'+'arizeDepth'+'(texture2D'+'(uSceneDep'+'thMap,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20float\x20'+'getLinearS'+'creenDepth'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20uv'+'\x20=\x20gl_Frag'+'Coord.xy\x20*'+'\x20uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur')+('n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afloat\x20'+'getLinearD'+'epth(vec3\x20'+'pos)\x20{\x0a\x20\x20\x20'+'\x20return\x20-('+'matrix_vie'+'w\x20*\x20vec4(p'+'os,\x201.0)).'+'z;\x0a}\x0a'),wP='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x20\x0ai'+'nt\x20getShad'+'owCascadeI'+'ndex(vec4\x20'+'shadowCasc'+'adeDistanc'+'es,\x20int\x20sh'+'adowCascad'+'eCount)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20in\x200\x20.'+'.\x20far\x20plan'+'e\x20range\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x0a\x20'+'\x20\x20\x20//\x201.0\x20'+'if\x20depth\x20>'+'=\x20distance'+',\x200.0\x20othe'+'rwise\x0a\x20\x20\x20\x20'+'vec4\x20compa'+'risons\x20=\x20s'+'tep(shadow'+'CascadeDis'+'tances,\x20ve'+'c4(depth))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'sum\x20is\x20the'+'\x20index\x0a\x20\x20\x20'+'\x20int\x20casca'+'deIndex\x20=\x20'+'int(dot(co'+'mparisons,'+'\x20vec4(1.0)'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20limit\x20to'+'\x20actual\x20nu'+'mber\x20of\x20us'+'ed\x20cascade'+'s\x0a\x20\x20\x20\x20retu'+'rn\x20min(cas'+'cadeIndex,'+'\x20shadowCas'+'cadeCount\x20'+'-\x201);\x0a}\x0a\x0a/'+'/\x20function'+'\x20which\x20mod'+'ifies\x20casc'+'ade\x20index\x20'+'to\x20dither\x20'+'between\x20ca'+'scades\x0aint'+'\x20ditherSha'+'dowCascade'+'Index(int\x20'+'cascadeInd'+'ex,\x20vec4\x20s'+'hadowCasca'+'deDistance'+'s,\x20int\x20sha'+'dowCascade'+'Count,\x20flo'+'at\x20blendFa'+'ctor)\x20{\x0a\x20\x0a'+'\x20\x20\x20\x20if\x20(ca'+'scadeIndex'+'\x20<\x20shadowC'+'ascadeCoun'+'t\x20-\x201)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20current'+'RangeEnd\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20transit'+'ionStart\x20='+'\x20blendFact'+'or\x20*\x20curre'+'ntRangeEnd'+';\x20//\x20Start'+'\x20overlap\x20f'+'actor\x20away'+'\x20from\x20the\x20'+'end\x20distan'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x201.0\x20/'+('\x20gl_FragCo'+'ord.w;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'depth\x20>\x20tr'+'ansitionSt'+'art)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Calculat'+'e\x20a\x20transi'+'tion\x20facto'+'r\x20(0.0\x20to\x20'+'1.0)\x20withi'+'n\x20the\x20over'+'lap\x20range\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20tr'+'ansitionFa'+'ctor\x20=\x20smo'+'othstep(tr'+'ansitionSt'+'art,\x20curre'+'ntRangeEnd'+',\x20depth);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Add\x20'+'pseudo-ran'+'dom\x20dither'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ODO:\x20repla'+'ce\x20by\x20user'+'\x20selectabl'+'e\x20ditherin'+'g\x20method\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dit'+'her\x20=\x20frac'+'t(sin(dot('+'gl_FragCoo'+'rd.xy,\x20vec'+'2(12.9898,'+'\x2078.233)))'+'\x20*\x2043758.5'+'453);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(dither\x20<'+'\x20transitio'+'nFactor)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cas'+'cadeIndex\x20'+'+=\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20return\x20ca'+'scadeIndex'+';\x0a}\x0a\x0avec3\x20'+'fadeShadow'+'(vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'CascadeDis'+'tances)\x20{\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20if\x20th'+'e\x20pixel\x20is'+'\x20past\x20the\x20'+'shadow\x20dis'+'tance,\x20rem'+'ove\x20shadow'+'\x0a\x20\x20\x20\x20//\x20th'+'is\x20enforce'+'s\x20straight'+'\x20line\x20inst'+'ead\x20of\x20cor'+'ner\x20of\x20sha'+'dow\x20which\x20'+'moves\x20when'+'\x20camera\x20ro'+'tates\x20\x20\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x20\x20'+'\x20\x20if\x20(dept'+'h\x20>\x20shadow'+'CascadeDis'+'tances.w)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'shadowCoor'+'d.z\x20=\x20-999'+'9999.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20shad'+'owCoord;\x0a}'+'\x0a'),EP='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afloat\x20lin'+'step(float'+'\x20a,\x20float\x20'+'b,\x20float\x20v'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20satur'+'ate((v\x20-\x20a'+')\x20/\x20(b\x20-\x20a'+'));\x0a}\x0a\x0aflo'+'at\x20reduceL'+'ightBleedi'+'ng(float\x20p'+'Max,\x20float'+'\x20amount)\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'float\x20cheb'+'yshevUpper'+'Bound(vec2'+'\x20moments,\x20'+'float\x20mean'+',\x20float\x20mi'+'nVariance,'+'\x20float\x20lig'+'htBleeding'+'Reduction)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'Compute\x20va'+'riance\x0a\x20\x20\x20'+'\x20float\x20var'+'iance\x20=\x20mo'+'ments.y\x20-\x20'+'(moments.x'+'\x20*\x20moments'+'.x);\x0a\x20\x20\x20\x20v'+'ariance\x20=\x20'+'max(varian'+'ce,\x20minVar'+'iance);\x0a\x0a\x20'+'\x20\x20\x20//\x20Comp'+'ute\x20probab'+'ilistic\x20up'+'per\x20bound\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20mean\x20-'+'\x20moments.x'+';\x0a\x20\x20\x20\x20floa'+'t\x20pMax\x20=\x20v'+'ariance\x20/\x20'+'(variance\x20'+'+\x20(d\x20*\x20d))'+';\x0a\x0a\x20\x20\x20\x20pMa'+'x\x20=\x20reduce'+'LightBleed'+'ing(pMax,\x20'+'lightBleed'+'ingReducti'+'on);\x0a\x0a\x20\x20\x20\x20'+'//\x20One-tai'+'led\x20Chebys'+'hev\x0a\x20\x20\x20\x20re'+'turn\x20(mean'+'\x20<=\x20moment'+'s.x\x20?\x201.0\x20'+':\x20pMax);\x0a}'+'\x0a\x0afloat\x20ca'+'lculateEVS'+'M(vec3\x20mom'+'ents,\x20floa'+'t\x20Z,\x20float'+'\x20vsmBias,\x20'+'float\x20expo'+'nent)\x20{\x0a\x20\x20'+'\x20\x20Z\x20=\x202.0\x20'+'*\x20Z\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20warpedDep'+'th\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20m'+'oments.xy\x20'+'+=\x20vec2(wa'+'rpedDepth,'+'\x20warpedDep'+'th*warpedD'+'epth)\x20*\x20(1'+'.0\x20-\x20momen'+'ts.z);\x0a\x0a\x20\x20'+('\x20\x20float\x20VS'+'MBias\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20float'+'\x20depthScal'+'e\x20=\x20VSMBia'+'s\x20*\x20expone'+'nt\x20*\x20warpe'+'dDepth;\x0a\x20\x20'+'\x20\x20float\x20mi'+'nVariance1'+'\x20=\x20depthSc'+'ale\x20*\x20dept'+'hScale;\x0a\x20\x20'+'\x20\x20return\x20c'+'hebyshevUp'+'perBound(m'+'oments.xy,'+'\x20warpedDep'+'th,\x20minVar'+'iance1,\x200.'+'1);\x0a}\x0a\x0a//\x20'+'------\x20VSM'+'\x2016\x20------'+'\x0a\x0afloat\x20VS'+'M16(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec2\x20'+'texCoords,'+'\x20float\x20res'+'olution,\x20f'+'loat\x20Z,\x20fl'+'oat\x20vsmBia'+'s,\x20float\x20e'+'xponent)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'moments\x20=\x20'+'texture2DL'+'od(tex,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM16('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM16(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM16(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20VSM16('+'TEXTURE_PA'+'SS(shadowM'+'ap),\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----')+('--\x0a\x0afloat\x20'+'VSM32(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20texCoord'+'s,\x20float\x20r'+'esolution,'+'\x20float\x20Z,\x20'+'float\x20vsmB'+'ias,\x20float'+'\x20exponent)'+'\x20{\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20CAPS_'+'TEXTURE_FL'+'OAT_FILTER'+'ABLE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20te'+'xture2DLod'+'(tex,\x20texC'+'oords,\x200.0'+').xyz;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ma'+'nual\x20bilin'+'ear\x20filter'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pi'+'xelSize\x20=\x20'+'1.0\x20/\x20reso'+'lution;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20texC'+'oords\x20-=\x20v'+'ec2(pixelS'+'ize);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'00\x20=\x20textu'+'re2DLod(te'+'x,\x20texCoor'+'ds,\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20s10'+'\x20=\x20texture'+'2DLod(tex,'+'\x20texCoords'+'\x20+\x20vec2(pi'+'xelSize,\x200'+'),\x200.0).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20s01\x20'+'=\x20texture2'+'DLod(tex,\x20'+'texCoords\x20'+'+\x20vec2(0,\x20'+'pixelSize)'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20s11\x20='+'\x20texture2D'+'Lod(tex,\x20t'+'exCoords\x20+'+'\x20vec2(pixe'+'lSize),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20fr\x20=\x20frac'+'t(texCoord'+'s\x20*\x20resolu'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'h0\x20=\x20mix(s'+'00,\x20s10,\x20f'+'r.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20h'+'1\x20=\x20mix(s0'+'1,\x20s11,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20mi'+'x(h0,\x20h1,\x20'+'fr.y);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM32('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM32(T')+('EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM32(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20Z\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd.xy,\x20sha'+'dowParams.'+'x,\x20Z,\x20shad'+'owParams.y'+',\x20exponent'+');\x0a}\x0a'),AP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_ACCEP'+'T(shadowMa'+'p),\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20textur'+'eShadow(sh'+'adowMap,\x20s'+'hadowCoord'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wSpotPCF1x'+'1(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSh'+'adow(shado'+'wMap,\x20shad'+'owCoord);\x0a'+'}\x0a\x0a//\x20----'+'-\x20Omni\x20Sam'+'pling\x20----'+'-\x0a\x0a#ifndef'+'\x20WEBGPU\x0a\x0af'+'loat\x20getSh'+'adowOmniPC'+'F1x1(sampl'+'erCubeShad'+'ow\x20shadowM'+'ap,\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20float\x20sh'+'adowZ\x20=\x20le'+'ngth(light'+'Dir)\x20*\x20sha'+'dowParams.'+'w\x20+\x20shadow'+'Params.z;\x0a'+'\x20\x20\x20\x20return'+'\x20texture(s'+'hadowMap,\x20'+'vec4(light'+'Dir,\x20shado'+'wZ));\x0a}\x0a\x0a#'+'endif\x0a',bP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_ACCE'+'PT(shadowM'+'ap),\x20vec3\x20'+'shadowCoor'+'d,\x20vec3\x20sh'+'adowParams'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20sh'+'adowCoord.'+'z;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20sha'+'dowCoord.x'+'y\x20*\x20shadow'+'Params.x;\x20'+'//\x201\x20unit\x20'+'-\x201\x20texel\x0a'+'\x20\x20\x20\x20float\x20'+'shadowMapS'+'izeInv\x20=\x201'+'.0\x20/\x20shado'+'wParams.x;'+'\x0a\x20\x20\x20\x20vec2\x20'+'base_uv\x20=\x20'+'floor(uv\x20+'+'\x200.5);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20(uv.x\x20+\x200'+'.5\x20-\x20base_'+'uv.x);\x0a\x20\x20\x20'+'\x20float\x20t\x20='+'\x20(uv.y\x20+\x200'+'.5\x20-\x20base_'+'uv.y);\x20\x0a\x20\x20'+'\x20\x20base_uv\x20'+'-=\x20vec2(0.'+'5);\x0a\x20\x20\x20\x20ba'+'se_uv\x20*=\x20s'+'hadowMapSi'+'zeInv;\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'uw0\x20=\x20(3.0'+'\x20-\x202.0\x20*\x20s'+');\x0a\x20\x20\x20\x20flo'+'at\x20uw1\x20=\x20('+'1.0\x20+\x202.0\x20'+'*\x20s);\x0a\x0a\x20\x20\x20'+'\x20float\x20u0\x20'+'=\x20(2.0\x20-\x20s'+')\x20/\x20uw0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20f'+'loat\x20u1\x20=\x20'+'s\x20/\x20uw1\x20+\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(3.0\x20-\x202'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20t)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20v0\x20=\x20(2'+'.0\x20-\x20t)\x20/\x20'+'vw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20v1\x20=\x20t\x20/\x20'+'vw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20u0\x20='+'\x20u0\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v0\x20=\x20v0\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u1\x20=\x20'+'u1\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'1\x20=\x20v1\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+('sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw0\x20*\x20v'+'w1\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u0,\x20v'+'1,\x20z));\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w1\x20*\x20vw1\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u1,\x20v1,\x20z'+'));\x0a\x0a\x20\x20\x20\x20s'+'um\x20*=\x201.0f'+'\x20/\x2016.0;\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowPCF3x3('+'SHADOWMAP_'+'ACCEPT(sha'+'dowMap),\x20v'+'ec3\x20shadow'+'Coord,\x20vec'+'4\x20shadowPa'+'rams)\x20{\x0a\x20\x20'+'\x20\x20return\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_PASS'+'(shadowMap'+'),\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowSpotPCF'+'3x3(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3('+'SHADOWMAP_'+'PASS(shado'+'wMap),\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0a//\x20-----'+'\x20Omni\x20Samp'+'ling\x20-----'+'\x0a\x0a#ifndef\x20'+'WEBGPU\x0a\x0afl'+'oat\x20getSha'+'dowOmniPCF'+'3x3(sample'+'rCubeShado'+'w\x20shadowMa'+'p,\x20vec4\x20sh'+'adowParams'+',\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a\x20\x20\x20\x20fl'+'oat\x20shadow'+'Z\x20=\x20length'+'(dir)\x20*\x20sh'+'adowParams'+'.w\x20+\x20shado'+'wParams.z;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x0a\x20\x20\x20\x20'+'float\x20z\x20=\x20'+'1.0\x20/\x20floa'+'t(textureS'+'ize(shadow'+'Map,\x200));\x0a'+'\x20\x20\x20\x20vec3\x20t'+'c\x20=\x20normal'+'ize(dir);\x0a'+'\x0a\x20\x20\x20\x20//\x20av'+'erage\x204\x20sa'+'mples\x20-\x20no'+'t\x20a\x20strict')+('\x203x3\x20PCF\x20b'+'ut\x20that\x27s\x20'+'tricky\x20wit'+'h\x20cubemaps'+'\x0a\x20\x20\x20\x20mediu'+'mp\x20vec4\x20sh'+'adows;\x0a\x20\x20\x20'+'\x20shadows.x'+'\x20=\x20texture'+'(shadowMap'+',\x20vec4(tc\x20'+'+\x20vec3(\x20z,'+'\x20z,\x20z),\x20sh'+'adowZ));\x0a\x20'+'\x20\x20\x20shadows'+'.y\x20=\x20textu'+'re(shadowM'+'ap,\x20vec4(t'+'c\x20+\x20vec3(-'+'z,-z,\x20z),\x20'+'shadowZ));'+'\x0a\x20\x20\x20\x20shado'+'ws.z\x20=\x20tex'+'ture(shado'+'wMap,\x20vec4'+'(tc\x20+\x20vec3'+'(-z,\x20z,-z)'+',\x20shadowZ)'+');\x0a\x20\x20\x20\x20sha'+'dows.w\x20=\x20t'+'exture(sha'+'dowMap,\x20ve'+'c4(tc\x20+\x20ve'+'c3(\x20z,-z,-'+'z),\x20shadow'+'Z));\x0a\x0a\x20\x20\x20\x20'+'return\x20dot'+'(shadows,\x20'+'vec4(0.25)'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wOmniPCF3x'+'3(samplerC'+'ubeShadow\x20'+'shadowMap,'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20lightDi'+'r)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowOmniP'+'CF3x3(shad'+'owMap,\x20sha'+'dowParams,'+'\x20lightDir)'+';\x0a}\x0a\x0a#endi'+'f\x0a'),CP='\x0afloat\x20_ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec3\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20//\x20h'+'ttp://the-'+'witness.ne'+'t/news/201'+'3/09/shado'+'w-mapping-'+'summary-pa'+'rt-1/\x0a\x0a\x20\x20\x20'+'\x20float\x20z\x20='+'\x20shadowCoo'+'rd.z;\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'shadowCoor'+'d.xy\x20*\x20sha'+'dowParams.'+'x;\x20//\x201\x20un'+'it\x20-\x201\x20tex'+'el\x0a\x20\x20\x20\x20flo'+'at\x20shadowM'+'apSizeInv\x20'+'=\x201.0\x20/\x20sh'+'adowParams'+'.x;\x0a\x20\x20\x20\x20ve'+'c2\x20base_uv'+'\x20=\x20floor(u'+'v\x20+\x200.5);\x0a'+'\x20\x20\x20\x20float\x20'+'s\x20=\x20(uv.x\x20'+'+\x200.5\x20-\x20ba'+'se_uv.x);\x0a'+'\x20\x20\x20\x20float\x20'+'t\x20=\x20(uv.y\x20'+'+\x200.5\x20-\x20ba'+'se_uv.y);\x0a'+'\x20\x20\x20\x20base_u'+'v\x20-=\x20vec2('+'0.5);\x0a\x20\x20\x20\x20'+'base_uv\x20*='+'\x20shadowMap'+'SizeInv;\x0a\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20uw0\x20=\x20(4.'+'0\x20-\x203.0\x20*\x20'+'s);\x0a\x20\x20\x20\x20fl'+'oat\x20uw1\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20f'+'loat\x20uw2\x20='+'\x20(1.0\x20+\x203.'+'0\x20*\x20s);\x0a\x0a\x20'+'\x20\x20\x20float\x20u'+'0\x20=\x20(3.0\x20-'+'\x202.0\x20*\x20s)\x20'+'/\x20uw0\x20-\x202.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20u1\x20=\x20(3'+'.0\x20+\x20s)\x20/\x20'+'uw1;\x0a\x20\x20\x20\x20f'+'loat\x20u2\x20=\x20'+'s\x20/\x20uw2\x20+\x20'+'2.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(4.0\x20-\x203'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x207.0;\x0a'+'\x20\x20\x20\x20float\x20'+'vw2\x20=\x20(1.0'+'\x20+\x203.0\x20*\x20t'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20v0\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20t)\x20/\x20vw0'+'\x20-\x202.0;\x0a\x20\x20'+'\x20\x20float\x20v1'+'\x20=\x20(3.0\x20+\x20'+'t)\x20/\x20vw1;\x0a'+'\x20\x20\x20\x20float\x20'+'v2\x20=\x20t\x20/\x20v'+'w2\x20+\x202.0;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20sum\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20u0\x20'+'=\x20u0\x20*\x20sha'+'dowMapSize'+'Inv\x20+\x20base'+'_uv.x;\x0a\x20\x20\x20'+'\x20v0\x20=\x20v0\x20*'+'\x20shadowMap'+'SizeInv\x20+\x20'+'base_uv.y;'+'\x0a\x0a\x20\x20\x20\x20u1\x20='+('\x20u1\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v1\x20=\x20v1\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u2\x20=\x20'+'u2\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'2\x20=\x20v2\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+'sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw2\x20*\x20v'+'w0\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u2,\x20v'+'0,\x20z));\x0a\x0a\x20'+'\x20\x20\x20sum\x20+=\x20'+'uw0\x20*\x20vw1\x20'+'*\x20textureS'+'hadow(shad'+'owMap,\x20vec'+'3(u0,\x20v1,\x20'+'z));\x0a\x20\x20\x20\x20s'+'um\x20+=\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureShado'+'w(shadowMa'+'p,\x20vec3(u1'+',\x20v1,\x20z));'+'\x0a\x20\x20\x20\x20sum\x20+'+'=\x20uw2\x20*\x20vw'+'1\x20*\x20textur'+'eShadow(sh'+'adowMap,\x20v'+'ec3(u2,\x20v1'+',\x20z));\x0a\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w0\x20*\x20vw2\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u0,\x20v2,\x20z'+'));\x0a\x20\x20\x20\x20su'+'m\x20+=\x20uw1\x20*'+'\x20vw2\x20*\x20tex'+'tureShadow'+'(shadowMap'+',\x20vec3(u1,'+'\x20v2,\x20z));\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw2\x20*\x20vw2'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u2,\x20v2,'+'\x20z));\x0a\x0a\x20\x20\x20'+'\x20sum\x20*=\x201.'+'0f\x20/\x20144.0'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20saturate'+'(sum);\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'um;\x0a}\x0a\x0aflo'+'at\x20getShad'+'owPCF5x5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20_g'+'etShadowPC'+'F5x5(SHADO'+'WMAP_PASS('+'shadowMap)'+',\x20shadowCo'+'ord,\x20shado')+('wParams.xy'+'z);\x0a}\x0a\x0aflo'+'at\x20getShad'+'owSpotPCF5'+'x5(SHADOWM'+'AP_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getShad'+'owPCF5x5(S'+'HADOWMAP_P'+'ASS(shadow'+'Map),\x20shad'+'owCoord,\x20s'+'hadowParam'+'s.xyz);\x0a}\x0a'),PP='\x0a\x0a/**\x0a\x20*\x20P'+'CSS\x20is\x20a\x20s'+'hadow\x20samp'+'ling\x20metho'+'d\x20that\x20pro'+'vides\x20cont'+'act\x20harden'+'ing\x20soft\x20s'+'hadows,\x20us'+'ed\x20for\x20omn'+'i\x20and\x20spot'+'\x20lights.\x0a\x20'+'*\x20Based\x20on'+':\x20\x0a\x20*\x20-\x20ht'+'tps://www.'+'gamedev.ne'+'t/tutorial'+'s/programm'+'ing/graphi'+'cs/effect-'+'area-light'+'-shadows-p'+'art-1-pcss'+'-r4971/\x0a\x20*'+'\x20-\x20https:/'+'/github.co'+'m/pboechat'+'/PCSS\x20\x0a\x20*/'+'\x0a\x0a#define\x20'+'PCSS_SAMPL'+'E_COUNT\x2016'+'\x0a\x0auniform\x20'+'float\x20pcss'+'DiskSample'+'s[PCSS_SAM'+'PLE_COUNT]'+';\x0auniform\x20'+'float\x20pcss'+'SphereSamp'+'les[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x0avec2\x20'+'vogelDisk('+'int\x20sample'+'Index,\x20flo'+'at\x20count,\x20'+'float\x20phi,'+'\x20float\x20r)\x20'+'{\x0a\x20\x20\x20\x20cons'+'t\x20float\x20Go'+'ldenAngle\x20'+'=\x202.4;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta\x20=\x20float'+'(sampleInd'+'ex)\x20*\x20Gold'+'enAngle\x20+\x20'+'phi;\x0a\x0a\x20\x20\x20\x20'+'float\x20sine'+'\x20=\x20sin(the'+'ta);\x0a\x20\x20\x20\x20f'+'loat\x20cosin'+'e\x20=\x20cos(th'+'eta);\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(r\x20*\x20cosi'+'ne,\x20r\x20*\x20si'+'ne);\x0a}\x0a\x0ave'+'c3\x20vogelSp'+'here(int\x20s'+'ampleIndex'+',\x20float\x20co'+'unt,\x20float'+'\x20phi,\x20floa'+'t\x20r)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20GoldenA'+'ngle\x20=\x202.4'+';\x0a\x20\x20\x20\x20floa'+'t\x20theta\x20=\x20'+'float(samp'+'leIndex)\x20*'+'\x20GoldenAng'+'le\x20+\x20phi;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20weight\x20=\x20'+'float(samp'+'leIndex)\x20/'+'\x20count;\x0a\x20\x20'+'\x20\x20return\x20v'+'ec3(cos(th'+'eta)\x20*\x20r,\x20'+'weight,\x20si'+'n(theta)\x20*'+'\x20r);\x0a}\x0a\x0afl'+'oat\x20noise('+'vec2\x20scree'+'nPos)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PHI\x20=\x20'+('1.61803398'+'8749894848'+'20459;\x20\x20//'+'\x20Φ\x20=\x20Golde'+'n\x20Ratio\x20\x20\x20'+'\x0a\x20\x20\x20\x20retur'+'n\x20fract(si'+'n(dot(scre'+'enPos\x20*\x20PH'+'I,\x20screenP'+'os))\x20*\x20scr'+'eenPos.x);'+'\x0a}\x0a\x0afloat\x20'+'viewSpaceD'+'epth(float'+'\x20depth,\x20ma'+'t4\x20invProj'+'ection)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'z\x20=\x20depth\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20vec'+'4\x20clipSpac'+'e\x20=\x20vec4(0'+'.0,\x200.0,\x20z'+',\x201.0);\x0a\x20\x20'+'\x20\x20vec4\x20vie'+'wSpace\x20=\x20i'+'nvProjecti'+'on\x20*\x20clipS'+'pace;\x0a\x20\x20\x20\x20'+'return\x20vie'+'wSpace.z;\x0a'+'}\x0a\x0afloat\x20P'+'CSSBlocker'+'Distance(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20sampleCoo'+'rds[PCSS_S'+'AMPLE_COUN'+'T],\x20vec2\x20s'+'hadowCoord'+'s,\x20vec2\x20se'+'archSize,\x20'+'float\x20z,\x20v'+'ec4\x20camera'+'Params)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20blockers\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20float\x20ave'+'rageBlocke'+'r\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20offset\x20='+'\x20sampleCoo'+'rds[i]\x20*\x20s'+'earchSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20sample'+'UV\x20=\x20shado'+'wCoords\x20+\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20blocker'+'\x20=\x20texture'+'2DLod(shad'+'owMap,\x20sam'+'pleUV,\x200.0'+').r;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20i'+'sBlocking\x20'+'=\x20step(blo'+'cker,\x20z);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20bl'+'ockers\x20+=\x20'+'isBlocking'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'averageBlo'+'cker\x20+=\x20bl'+'ocker\x20*\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20if\x20(block'+'ers\x20>\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20aver'+'ageBlocker'+'\x20/\x20blocker'+'s;\x0a\x20\x20\x20\x20ret'+'urn\x20-1.0;\x0a'+'}\x0a\x0afloat\x20P'+'CSS(TEXTUR')+('E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoords,\x20'+'vec4\x20camer'+'aParams,\x20v'+'ec2\x20shadow'+'SearchArea'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'linearizeD'+'epthWithPa'+'rams(shado'+'wCoords.z,'+'\x20cameraPar'+'ams);\x0a\x0a\x20\x20\x20'+'\x20vec2\x20samp'+'lePoints[P'+'CSS_SAMPLE'+'_COUNT];\x0a\x20'+'\x20\x20\x20const\x20f'+'loat\x20PI\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20float\x20n'+'oise\x20=\x20noi'+'se(\x20gl_Fra'+'gCoord.xy\x20'+')\x20*\x202.0\x20*\x20'+'PI;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x200;\x20i\x20<\x20PC'+'SS_SAMPLE_'+'COUNT;\x20i++'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pc'+'ssPresampl'+'e\x20=\x20pcssDi'+'skSamples['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20samplePo'+'ints[i]\x20=\x20'+'vogelDisk('+'i,\x20float(P'+'CSS_SAMPLE'+'_COUNT),\x20n'+'oise,\x20pcss'+'Presample)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20a'+'verageBloc'+'ker\x20=\x20PCSS'+'BlockerDis'+'tance(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20samplePoi'+'nts,\x20shado'+'wCoords.xy'+',\x20shadowSe'+'archArea,\x20'+'receiverDe'+'pth,\x20camer'+'aParams);\x0a'+'\x20\x20\x20\x20if\x20(av'+'erageBlock'+'er\x20==\x20-1.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x201'+'.0;\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depthDiff'+'erence\x20=\x20('+'receiverDe'+'pth\x20-\x20aver'+'ageBlocker'+')\x20/\x203.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20filterRa'+'dius\x20=\x20dep'+'thDifferen'+'ce\x20*\x20shado'+'wSearchAre'+'a;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20for\x20(int\x20'+'i\x20=\x200;\x20i\x20<'+'\x20PCSS_SAMP'+'LE_COUNT;\x20'+'i\x20++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20sampleU'+'V\x20=\x20sample'+'Points[i]\x20'+'*\x20filterRa')+('dius;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleUV\x20=\x20s'+'hadowCoord'+'s.xy\x20+\x20sam'+'pleUV;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20textur'+'e2DLod(sha'+'dowMap,\x20sa'+'mpleUV,\x200.'+'0).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20shadow\x20/\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT);\x0a\x20\x20\x20\x20'+'}\x20\x0a}\x0a\x0a#ifn'+'def\x20WEBGPU'+'\x0a\x0afloat\x20PC'+'SSCubeBloc'+'kerDistanc'+'e(samplerC'+'ube\x20shadow'+'Map,\x20vec3\x20'+'lightDirNo'+'rm,\x20vec3\x20s'+'amplePoint'+'s[PCSS_SAM'+'PLE_COUNT]'+',\x20float\x20z,'+'\x20float\x20sha'+'dowSearchA'+'rea)\x20{\x0a\x20\x20\x20'+'\x20float\x20blo'+'ckers\x20=\x200.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20average'+'Blocker\x20=\x20'+'0.0;\x0a\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20P'+'CSS_SAMPLE'+'_COUNT;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sa'+'mpleDir\x20=\x20'+'lightDirNo'+'rm\x20+\x20sampl'+'ePoints[i]'+'\x20*\x20shadowS'+'earchArea;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'ampleDir\x20='+'\x20normalize'+'(sampleDir'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'ocker\x20=\x20te'+'xtureCubeL'+'od(shadowM'+'ap,\x20sample'+'Dir,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20isB'+'locking\x20=\x20'+'step(block'+'er,\x20z);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20bloc'+'kers\x20+=\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20av'+'erageBlock'+'er\x20+=\x20bloc'+'ker\x20*\x20isBl'+'ocking;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'f\x20(blocker'+'s\x20>\x200.0)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20averag'+'eBlocker\x20/'+'\x20blockers;'+'\x0a\x20\x20\x20\x20retur'+'n\x20-1.0;\x0a}\x0a'+'\x0afloat\x20PCS'+'SCube(samp'+'lerCube\x20sh'+'adowMap,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20shadowC'+'oords,\x20vec')+('4\x20cameraPa'+'rams,\x20floa'+'t\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20samplePoi'+'nts[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x20\x20\x20\x20fl'+'oat\x20noise\x20'+'=\x20noise(\x20g'+'l_FragCoor'+'d.xy\x20)\x20*\x202'+'.0\x20*\x20PI;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20r\x20=\x20pcs'+'sSphereSam'+'ples[i];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sam'+'plePoints['+'i]\x20=\x20vogel'+'Sphere(i,\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT),\x20nois'+'e,\x20r);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'orm\x20=\x20norm'+'alize(ligh'+'tDir);\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20averageB'+'locker\x20=\x20P'+'CSSCubeBlo'+'ckerDistan'+'ce(shadowM'+'ap,\x20lightD'+'irNorm,\x20sa'+'mplePoints'+',\x20receiver'+'Depth,\x20sha'+'dowSearchA'+'rea);\x0a\x20\x20\x20\x20'+'if\x20(averag'+'eBlocker\x20='+'=\x20-1.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20fi'+'lterRadius'+'\x20=\x20((recei'+'verDepth\x20-'+'\x20averageBl'+'ocker)\x20/\x20a'+'verageBloc'+'ker)\x20*\x20sha'+'dowSearchA'+'rea;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20for\x20(int'+'\x20i\x20=\x200;\x20i\x20'+'<\x20PCSS_SAM'+'PLE_COUNT;'+'\x20i++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20offset\x20'+'=\x20samplePo'+'ints[i]\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sampleDir'+'\x20=\x20lightDi'+'rNorm\x20+\x20of'+'fset;\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleDir\x20=\x20'+'normalize('+'sampleDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depth\x20=\x20t'+'extureCube'+'Lod(shadow'+'Map,\x20sampl'+'eDir,\x200.0)'+'.r;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'ow\x20+=\x20step'+'(receiverD'+'epth,\x20dept'+'h);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20s'+'hadow\x20/\x20fl'+'oat(PCSS_S'+'AMPLE_COUN'+'T);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0afloat\x20g'+'etShadowOm'+'niPCSS(sam'+'plerCube\x20s'+'hadowMap,\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'4\x20cameraPa'+'rams,\x20vec2'+'\x20shadowSea'+'rchArea,\x20v'+'ec3\x20lightD'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SCube(shad'+'owMap,\x20sha'+'dowParams,'+'\x20shadowCoo'+'rd,\x20camera'+'Params,\x20sh'+'adowSearch'+'Area.x,\x20li'+'ghtDir);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'float\x20getS'+'hadowSpotP'+'CSS(TEXTUR'+'E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c4\x20cameraP'+'arams,\x20vec'+'2\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20return\x20PC'+'SS(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20cameraPar'+'ams,\x20shado'+'wSearchAre'+'a);\x0a}\x0a\x0a'),MP='\x0a\x0ahighp\x20fl'+'oat\x20fractS'+'inRand(con'+'st\x20in\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x20\x20\x20'+'\x20const\x20hig'+'hp\x20float\x20a'+'\x20=\x2012.9898'+',\x20b\x20=\x2078.2'+'33,\x20c\x20=\x2043'+'758.5453;\x0a'+'\x20\x20\x20\x20highp\x20'+'float\x20dt\x20='+'\x20dot(uv.xy'+',\x20vec2(a,\x20'+'b)),\x20sn\x20=\x20'+'mod(dt,\x20PI'+');\x0a\x20\x20\x20\x20ret'+'urn\x20fract('+'sin(sn)\x20*\x20'+'c);\x0a}\x0a\x0a//\x20'+'struct\x20to\x20'+'hold\x20preco'+'mputed\x20con'+'stants\x20and'+'\x20current\x20s'+'tate\x0astruc'+'t\x20VogelDis'+'kData\x20{\x0a\x20\x20'+'\x20\x20float\x20in'+'vNumSample'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20initial'+'Angle;\x0a\x20\x20\x20'+'\x20float\x20cur'+'rentPointI'+'d;\x0a};\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'void\x20prepa'+'reDiskCons'+'tants(out\x20'+'VogelDiskD'+'ata\x20data,\x20'+'int\x20sample'+'Count,\x20flo'+'at\x20randomS'+'eed)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20pi2\x20=\x206'+'.283185307'+'18;\x0a\x20\x20\x20\x20da'+'ta.invNumS'+'amples\x20=\x201'+'.0\x20/\x20float'+'(sampleCou'+'nt);\x0a\x20\x20\x20\x20d'+'ata.initia'+'lAngle\x20=\x20r'+'andomSeed\x20'+'*\x20pi2;\x0a\x20\x20\x20'+'\x20data.curr'+'entPointId'+'\x20=\x200.0;\x0a}\x0a'+'\x0a\x0avec2\x20gen'+'erateDiskS'+'ample(inou'+'t\x20VogelDis'+'kData\x20data'+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'GOLDEN_ANG'+'LE\x20=\x202.399'+'963;\x0a\x20\x20\x20\x20f'+'loat\x20r\x20=\x20s'+'qrt((data.'+'currentPoi'+'ntId\x20+\x200.5'+')\x20*\x20data.i'+'nvNumSampl'+'es);\x0a\x20\x20\x20\x20f'+'loat\x20theta'+'\x20=\x20data.cu'+'rrentPoint'+'Id\x20*\x20GOLDE'+'N_ANGLE\x20+\x20'+'data.initi'+'alAngle;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20o'+'ffset\x20=\x20ve'+('c2(cos(the'+'ta),\x20sin(t'+'heta))\x20*\x20p'+'ow(r,\x201.33'+');\x0a\x0a\x20\x20\x20\x20da'+'ta.current'+'PointId\x20+='+'\x201.0;\x0a\x20\x20\x20\x20'+'return\x20off'+'set;\x0a}\x0a\x0avo'+'id\x20PCSSFin'+'dBlocker(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20out\x20'+'float\x20avgB'+'lockerDept'+'h,\x20out\x20int'+'\x20numBlocke'+'rs,\x0a\x20\x20\x20\x20ve'+'c2\x20shadowC'+'oords,\x20flo'+'at\x20z,\x20int\x20'+'shadowBloc'+'kerSamples'+',\x20float\x20pe'+'numbraSize'+',\x20float\x20in'+'vShadowMap'+'Size,\x20floa'+'t\x20randomSe'+'ed)\x20{\x0a\x0a\x20\x20\x20'+'\x20VogelDisk'+'Data\x20diskD'+'ata;\x0a\x20\x20\x20\x20p'+'repareDisk'+'Constants('+'diskData,\x20'+'shadowBloc'+'kerSamples'+',\x20randomSe'+'ed);\x0a\x0a\x20\x20\x20\x20'+'float\x20sear'+'chWidth\x20=\x20'+'penumbraSi'+'ze\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x20\x20\x20\x20flo'+'at\x20blocker'+'Sum\x20=\x200.0;'+'\x0a\x20\x20\x20\x20numBl'+'ockers\x20=\x200'+';\x0a\x0a\x20\x20\x20\x20for'+'(\x20int\x20i\x20=\x20'+'0;\x20i\x20<\x20sha'+'dowBlocker'+'Samples;\x20+'+'+i\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'diskUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20sampleUV'+'\x20=\x20shadowC'+'oords\x20+\x20di'+'skUV\x20*\x20sea'+'rchWidth;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'MapDepth\x20='+'\x20texture2D'+'Lod(shadow'+'Map,\x20sampl'+'eUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(\x20shad'+'owMapDepth'+'\x20<\x20z\x20)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20blockerSu'+'m\x20+=\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers++;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20av'+'gBlockerDe'+'pth\x20=\x20bloc'+'kerSum\x20/\x20f'+'loat(numBl'+'ockers);\x0a}'+'\x0a\x0afloat\x20PC'+'SSFilter(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20uv,\x20float')+('\x20receiverD'+'epth,\x20int\x20'+'shadowSamp'+'les,\x20float'+'\x20filterRad'+'ius,\x20float'+'\x20randomSee'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'VogelDiskD'+'ata\x20diskDa'+'ta;\x0a\x20\x20\x20\x20pr'+'epareDiskC'+'onstants(d'+'iskData,\x20s'+'hadowSampl'+'es,\x20random'+'Seed);\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20shadowS'+'amples;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20of'+'fsetUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x20text'+'ure2DLod(s'+'hadowMap,\x20'+'uv\x20+\x20offse'+'tUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sum\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20retu'+'rn\x20sum\x20/\x20f'+'loat(shado'+'wSamples);'+'\x0a}\x0a\x0afloat\x20'+'getPenumbr'+'a(float\x20db'+'locker,\x20fl'+'oat\x20drecei'+'ver,\x20float'+'\x20penumbraS'+'ize,\x20float'+'\x20penumbraF'+'alloff)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'dist\x20=\x20dre'+'ceiver\x20-\x20d'+'blocker;\x0a\x20'+'\x20\x20\x20float\x20p'+'enumbra\x20=\x20'+'1.0\x20-\x20pow('+'1.0\x20-\x20dist'+',\x20penumbra'+'Falloff);\x0a'+'\x20\x20\x20\x20return'+'\x20penumbra\x20'+'*\x20penumbra'+'Size;\x0a}\x0a\x0af'+'loat\x20PCSSD'+'irectional'+'(TEXTURE_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oords,\x20vec'+'4\x20cameraPa'+'rams,\x20vec4'+'\x20softShado'+'wParams)\x20{'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20receiver'+'Depth\x20=\x20sh'+'adowCoords'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20random'+'Seed\x20=\x20fra'+'ctSinRand('+'gl_FragCoo'+'rd.xy);\x0a\x20\x20'+'\x20\x20int\x20shad'+'owSamples\x20'+'=\x20int(soft'+'ShadowPara'+'ms.x);\x0a\x20\x20\x20'+'\x20int\x20shado'+'wBlockerSa'+'mples\x20=\x20in'+'t(softShad')+('owParams.y'+');\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'aSize\x20=\x20so'+'ftShadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20float\x20pe'+'numbraFall'+'off\x20=\x20soft'+'ShadowPara'+'ms.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20normal'+'ized\x20inver'+'se\x20shadow\x20'+'map\x20size\x20t'+'o\x20preserve'+'\x20the\x20shado'+'w\x20softness'+'\x20regardles'+'s\x20of\x20the\x20s'+'hadow\x20reso'+'lution\x0a\x20\x20\x20'+'\x20int\x20shado'+'wMapSize\x20='+'\x20textureSi'+'ze(shadowM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20float\x20'+'invShadowM'+'apSize\x20=\x201'+'.0\x20/\x20float'+'(shadowMap'+'Size);\x0a\x20\x20\x20'+'\x20invShadow'+'MapSize\x20*='+'\x20float(sha'+'dowMapSize'+')\x20/\x202048.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'a;\x0a\x0a\x20\x20\x20\x20//'+'\x20contact\x20h'+'ardening\x20p'+'ath\x0a\x20\x20\x20\x20if'+'\x20(shadowBl'+'ockerSampl'+'es\x20>\x200)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20find\x20ave'+'rage\x20block'+'er\x20depth\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20avgBloc'+'kerDepth\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20int\x20nu'+'mBlockers\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20avgBlo'+'ckerDepth,'+'\x20numBlocke'+'rs,\x20shadow'+'Coords.xy,'+'\x20receiverD'+'epth,\x20shad'+'owBlockerS'+'amples,\x20pe'+'numbraSize'+',\x20invShado'+'wMapSize,\x20'+'randomSeed'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20out\x20when\x20'+'no\x20blocker'+'s\x20are\x20pres'+'ent\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(numB'+'lockers\x20<\x20'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x201.0f;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'penumbra\x20s'+'ize\x20is\x20bas'+'ed\x20on\x20the\x20'+'blocker\x20de'+'pth\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20penumbra'+'\x20=\x20getPenu'+'mbra(avgBl'+'ockerDepth'+',\x20shadowCo'+'ords.z,\x20pe'+'numbraSize'+',\x20penumbra')+('Falloff);\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'tant\x20filte'+'r\x20size,\x20no'+'\x20contact\x20h'+'ardening\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pen'+'umbra\x20=\x20pe'+'numbraSize'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20f'+'ilterRadiu'+'s\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoords'+'.xy,\x20recei'+'verDepth,\x20'+'shadowSamp'+'les,\x20filte'+'rRadius,\x20r'+'andomSeed)'+';\x0a}\x0a\x0afloat'+'\x20getShadow'+'PCSS(TEXTU'+'RE_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec4\x20camera'+'Params,\x20ve'+'c4\x20softSha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20return\x20P'+'CSSDirecti'+'onal(TEXTU'+'RE_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20cameraP'+'arams,\x20sof'+'tShadowPar'+'ams);\x0a}\x0a\x0a'),IP='\x0aattribute'+'\x20float\x20ver'+'tex_boneIn'+'dices;\x0a\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20texture_'+'poseMap;\x0a\x0a'+'mat4\x20getBo'+'neMatrix(c'+'onst\x20in\x20fl'+'oat\x20indexF'+'loat)\x20{\x0a\x0a\x20'+'\x20\x20\x20int\x20wid'+'th\x20=\x20textu'+'reSize(tex'+'ture_poseM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20int\x20in'+'dex\x20=\x20int('+'indexFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x20\x20\x20\x20int'+'\x20iy\x20=\x20inde'+'x\x20/\x20width;'+'\x0a\x20\x20\x20\x20int\x20i'+'x\x20=\x20index\x20'+'%\x20width;\x0a\x0a'+'\x20\x20\x20\x20//\x20rea'+'d\x20elements'+'\x20of\x204x3\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20v1\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x200,'+'\x20iy),\x200);\x0a'+'\x20\x20\x20\x20vec4\x20v'+'2\x20=\x20texelF'+'etch(textu'+'re_poseMap'+',\x20ivec2(ix'+'\x20+\x201,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20v'+'ec4\x20v3\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x202,'+'\x20iy),\x200);\x0a'+'\x0a\x20\x20\x20\x20//\x20tr'+'anspose\x20to'+'\x204x4\x20matri'+'x\x0a\x20\x20\x20\x20retu'+'rn\x20mat4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'x,\x20v2.x,\x20v'+'3.x,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.y'+',\x20v2.y,\x20v3'+'.y,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.z,'+'\x20v2.z,\x20v3.'+'z,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.w,\x20'+'v2.w,\x20v3.w'+',\x201\x0a\x20\x20\x20\x20);'+'\x0a}\x0a',DP='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_boneWe'+'ights;\x0aatt'+'ribute\x20vec'+'4\x20vertex_b'+'oneIndices'+';\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20tex'+'ture_poseM'+'ap;\x0a\x0avoid\x20'+'getBoneMat'+'rix(const\x20'+'in\x20int\x20wid'+'th,\x20const\x20'+'in\x20int\x20ind'+'ex,\x20out\x20ve'+'c4\x20v1,\x20out'+'\x20vec4\x20v2,\x20'+'out\x20vec4\x20v'+'3)\x20{\x0a\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20in'+'dex\x20/\x20widt'+'h;\x0a\x20\x20\x20\x20int'+'\x20u\x20=\x20index'+'\x20%\x20width;\x0a'+'\x0a\x20\x20\x20\x20v1\x20=\x20'+'texelFetch'+'(texture_p'+'oseMap,\x20iv'+'ec2(u\x20+\x200,'+'\x20v),\x200);\x0a\x20'+'\x20\x20\x20v2\x20=\x20te'+'xelFetch(t'+'exture_pos'+'eMap,\x20ivec'+'2(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20v3\x20=\x20texe'+'lFetch(tex'+'ture_poseM'+'ap,\x20ivec2('+'u\x20+\x202,\x20v),'+'\x200);\x0a}\x0a\x0ama'+'t4\x20getSkin'+'Matrix(con'+'st\x20in\x20vec4'+'\x20indicesFl'+'oat,\x20const'+'\x20in\x20vec4\x20w'+'eights)\x20{\x0a'+'\x0a\x20\x20\x20\x20int\x20w'+'idth\x20=\x20tex'+'tureSize(t'+'exture_pos'+'eMap,\x200).x'+';\x0a\x20\x20\x20\x20ivec'+'4\x20indices\x20'+'=\x20ivec4(in'+'dicesFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20get\x204\x20bon'+'e\x20matrices'+'\x0a\x20\x20\x20\x20vec4\x20'+'a1,\x20a2,\x20a3'+';\x0a\x20\x20\x20\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.x,\x20a1'+',\x20a2,\x20a3);'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20b1,\x20b2,\x20b'+'3;\x0a\x20\x20\x20\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y,\x20b'+'1,\x20b2,\x20b3)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20c1,\x20c2,\x20'+'c3;\x0a\x20\x20\x20\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.z,\x20'+'c1,\x20c2,\x20c3'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20d1,\x20d2,'+'\x20d3;\x0a\x20\x20\x20\x20g'+'etBoneMatr'+'ix(width,\x20'+'indices.w,'+'\x20d1,\x20d2,\x20d'+'3);\x0a\x0a\x20\x20\x20\x20/'+'/\x20multiply'+'\x20them\x20by\x20w'+'eights\x20and'+'\x20add\x20up\x20to'+'\x20get\x20final'+'\x204x3\x20matri'+('x\x0a\x20\x20\x20\x20vec4'+'\x20v1\x20=\x20a1\x20*'+'\x20weights.x'+'\x20+\x20b1\x20*\x20we'+'ights.y\x20+\x20'+'c1\x20*\x20weigh'+'ts.z\x20+\x20d1\x20'+'*\x20weights.'+'w;\x0a\x20\x20\x20\x20vec'+'4\x20v2\x20=\x20a2\x20'+'*\x20weights.'+'x\x20+\x20b2\x20*\x20w'+'eights.y\x20+'+'\x20c2\x20*\x20weig'+'hts.z\x20+\x20d2'+'\x20*\x20weights'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20v3\x20=\x20a3'+'\x20*\x20weights'+'.x\x20+\x20b3\x20*\x20'+'weights.y\x20'+'+\x20c3\x20*\x20wei'+'ghts.z\x20+\x20d'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'//\x20add\x20up\x20'+'weights\x0a\x20\x20'+'\x20\x20float\x20on'+'e\x20=\x20dot(we'+'ights,\x20vec'+'4(1.0));\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.x'+',\x20v2.x,\x20v3'+'.x,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.y,'+'\x20v2.y,\x20v3.'+'y,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.z,\x20'+'v2.z,\x20v3.z'+',\x200,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20v1.w,\x20v'+'2.w,\x20v3.w,'+'\x20one\x0a\x20\x20\x20\x20)'+';\x0a}\x0a'),LP='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20float\x20v'+'LinearDept'+'h;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22floatAsUi'+'ntPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec3\x20vView'+'Dir;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20skyboxH'+'ighlightMu'+'ltiplier;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SKY_CUBE'+'MAP\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20texture'+'_cubeMap;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SKYM'+'ESH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec3\x20v'+'WorldPos;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20project'+'edSkydomeC'+'enter;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#el'+'se\x20//\x20env-'+'atlas\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22spher'+'icalPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22envA'+'tlasPS\x22\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_envAtla'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mipLe'+'vel;\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20linear\x20d'+'epth\x20durin'+'g\x20prepass\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20flo'+'at2vec4(vL'+'inearDepth'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20SK'+'Y_CUBEMAP\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SKYMES'+'H\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+('\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envDir\x20=\x20n'+'ormalize(v'+'WorldPos\x20-'+'\x20projected'+'SkydomeCen'+'ter);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20env'+'Dir\x20*\x20cube'+'MapRotatio'+'nMatrix;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20di'+'r\x20=\x20vViewD'+'ir;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir.x'+'\x20*=\x20-1.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20linear\x20=\x20'+'{SKYBOX_DE'+'CODE_FNC}('+'textureCub'+'e(texture_'+'cubeMap,\x20d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x20//\x20en'+'v-atlas\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20vVie'+'wDir\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20toSph'+'ericalUv(n'+'ormalize(d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20mipLev'+'el)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20our\x20HDR'+'\x20encodes\x20v'+'alues\x20up\x20t'+'o\x2064,\x20so\x20a'+'llow\x20extra'+'\x20brightnes'+'s\x20for\x20the\x20'+'clipped\x20va'+'lues\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(any(great'+'erThanEqua'+'l(linear,\x20'+'vec3(64.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20skyboxHi'+'ghlightMul'+'tiplier;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(toneM'+'ap(process'+'Environmen'+'t(linear))'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20}'+'\x0a'),RP='\x0aattribute'+'\x20vec4\x20aPos'+'ition;\x0a\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tionSkybox'+';\x0auniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x0av'+'arying\x20vec'+'3\x20vViewDir'+';\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20//\x20'+'when\x20skydo'+'me\x20renders'+'\x20depth\x20dur'+'ing\x20prepas'+'s,\x20generat'+'e\x20linear\x20d'+'epth\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20vLinear'+'Depth;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20SKYMESH\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec3\x20vW'+'orldPos;\x0a#'+'endif\x0a\x0avoi'+'d\x20main(voi'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'mat4\x20view\x20'+'=\x20matrix_v'+'iew;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20SKY'+'MESH\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec4\x20w'+'orldPos\x20=\x20'+'matrix_mod'+'el\x20*\x20aPosi'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vWorld'+'Pos\x20=\x20worl'+'dPos.xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20'+'=\x20matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20PREPASS'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20linear\x20de'+'pth\x20from\x20t'+'he\x20worldPo'+'sition,\x20se'+'e\x20getLinea'+'rDepth\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vWorl'+'dPos,\x201.0)'+').z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'view[3][0]'+'\x20=\x20view[3]'+'[1]\x20=\x20view'+'[3][2]\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20matr'+'ix_project'+'ionSkybox\x20'+'*\x20(view\x20*\x20'+'aPosition)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vViewDir\x20='+'\x20aPosition'+'.xyz\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20//\x20for\x20in'+'finite\x20sky'+'box,\x20use\x20n'+'egative\x20gl'+'_Position.'+'w\x20to\x20get\x20p'+'ositive\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vLinear'+'Depth\x20=\x20-g'+'l_Position'+'.w;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20Fo'+'rce\x20skybox'+'\x20to\x20far\x20Z,'+'\x20regardles'+'s\x20of\x20the\x20c'+'lip\x20planes'+'\x20on\x20the\x20ca'+'mera\x0a\x20\x20\x20\x20/'+'/\x20Subtract'+'\x20a\x20tiny\x20fu'+'dge\x20factor'+'\x20to\x20ensure'+'\x20floating\x20'+'point\x20erro'+'rs\x20don\x27t\x0a\x20'+'\x20\x20\x20//\x20stil'+'l\x20push\x20pix'+'els\x20beyond'+'\x20far\x20Z.\x20Se'+'e:\x0a\x20\x20\x20\x20//\x20'+'https://co'+'mmunity.kh'+'ronos.org/'+'t/skybox-p'+'roblem/618'+'57\x0a\x0a\x20\x20\x20\x20gl'+'_Position.'+'z\x20=\x20gl_Pos'+'ition.w\x20-\x20'+'1.0e-7;\x0a}\x0a'),OP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0auniform\x20v'+'ec3\x20materi'+'al_specula'+'r;\x0a#endif\x0a'+'\x0avoid\x20getS'+'pecularity'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20specul'+'arColor\x20=\x20'+'vec3(1,1,1'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20specularC'+'olor\x20*=\x20ma'+'terial_spe'+'cular;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'AR_TEXTURE'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_SPECULAR_'+'TEXTURE_NA'+'ME},\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20textureB'+'ias)).{STD'+'_SPECULAR_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SPECU'+'LAR_VERTEX'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_S'+'PECULAR_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20spe'+'cularColor'+';\x0a}\x0a',FP='\x0a//\x20equire'+'ctangular\x20'+'helper\x20fun'+'ctions\x0avec'+'2\x20toSpheri'+'cal(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(dir.xz\x20='+'=\x20vec2(0.0'+')\x20?\x200.0\x20:\x20'+'atan(dir.x'+',\x20dir.z),\x20'+'asin(dir.y'+'));\x0a}\x0a\x0avec'+'2\x20toSpheri'+'calUv(vec3'+'\x20dir)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PI\x20=\x203'+'.141592653'+'589793;\x0a\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20toSpheri'+'cal(dir)\x20/'+'\x20vec2(PI\x20*'+'\x202.0,\x20PI)\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+';\x0a}\x0a',NP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_specula'+'rityFactor'+';\x0a#endif\x0a\x0a'+'void\x20getSp'+'ecularityF'+'actor()\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'specularit'+'yFactor\x20=\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULARI'+'TYFACTOR_C'+'ONSTANT\x0a\x20\x20'+'\x20\x20specular'+'ityFactor\x20'+'*=\x20materia'+'l_specular'+'ityFactor;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE\x0a\x20\x20\x20\x20sp'+'ecularityF'+'actor\x20*=\x20t'+'exture2DBi'+'as({STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE_NAME},'+'\x20{STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_VERT'+'EX\x0a\x20\x20\x20\x20spe'+'cularityFa'+'ctor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SPECU'+'LARITYFACT'+'OR_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dSp'+'ecularityF'+'actor\x20=\x20sp'+'ecularityF'+'actor;\x0a}\x0a',kP='\x0afloat\x20get'+'SpotEffect'+'(vec3\x20ligh'+'tSpotDir,\x20'+'float\x20ligh'+'tInnerCone'+'Angle,\x20flo'+'at\x20lightOu'+'terConeAng'+'le,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20cosAn'+'gle\x20=\x20dot('+'lightDirNo'+'rm,\x20lightS'+'potDir);\x0a\x20'+'\x20\x20\x20return\x20'+'smoothstep'+'(lightOute'+'rConeAngle'+',\x20lightInn'+'erConeAngl'+'e,\x20cosAngl'+'e);\x0a}\x0a',UP='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2(vUv0.'+'x,\x201.0\x20-\x20v'+'Uv0.y);\x0a',BP='\x0a\x20\x20\x20\x20vec2\x20'+'tileMask\x20='+'\x20step(vMas'+'k,\x20vec2(0.'+'99999));\x0a\x20'+'\x20\x20\x20vec2\x20ti'+'leSize\x20=\x200'+'.5\x20*\x20(inne'+'rOffset.xy'+'\x20+\x20innerOf'+'fset.zw);\x0a'+'\x20\x20\x20\x20vec2\x20t'+'ileScale\x20='+'\x20vec2(1.0)'+'\x20/\x20(vec2(1'+'.0)\x20-\x20tile'+'Size);\x0a\x20\x20\x20'+'\x20vec2\x20clam'+'pedUv\x20=\x20mi'+'x(innerOff'+'set.xy\x20*\x200'+'.5,\x20vec2(1'+'.0)\x20-\x20inne'+'rOffset.zw'+'\x20*\x200.5,\x20fr'+'act((vTile'+'dUv\x20-\x20tile'+'Size)\x20*\x20ti'+'leScale));'+'\x0a\x20\x20\x20\x20clamp'+'edUv\x20=\x20cla'+'mpedUv\x20*\x20a'+'tlasRect.z'+'w\x20+\x20atlasR'+'ect.xy;\x0a\x20\x20'+'\x20\x20nineSlic'+'edUv\x20=\x20vUv'+'0\x20*\x20tileMa'+'sk\x20+\x20clamp'+'edUv\x20*\x20(ve'+'c2(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x20\x20\x20\x20\x0a',zP='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20float\x20dAl'+'pha\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_o'+'pacityMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20global'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dAlbe'+'do;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20dNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dSpeculari'+'ty\x20=\x20vec3('+'0.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dGlossines'+'s\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20dT'+'ransmissio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dThicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SC'+'ENE_COLOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'uSceneColo'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SCREEN_SI'+'ZE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20uS'+'creenSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_TRAN'+'SFORMS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20matrix_v'+'iewProject'+'ion;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_mod'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20parallax\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20dUv'+'Offset;\x0a\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_he'+'ightMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20diffu'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20tex'+'ture_diffu'+'seMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_diffuseDe'+'tailMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_normal'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'NORMALDETA'+'IL_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_no'+'rmalDetail'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20refracti'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_THICKNES'+'S_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_thi'+'cknessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_REFRA'+'CTION_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_refractio'+'nMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20iridesc'+'ence\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_IRIDES'+'CENCE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20dIride'+'scence;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dIri'+'descenceTh')+('ickness;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_irides'+'cenceThick'+'nessMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_iridesce'+'nceMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20ccNorm'+'alW;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dAnisotro'+'py;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20&\x20glossin'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_OR_REFLE'+'CTION\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20sheen\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20sGloss'+'iness;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SHEEN'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_sheenM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_sh'+'eenGlossMa')+('p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20metalness'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dMet'+'alness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dIor;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_met'+'alnessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20dSpecula'+'rityFactor'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_speculari'+'tyFactorMa'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20specular\x20'+'color\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_specula'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20gloss\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_gl'+'ossMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dAo'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_aoM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_aoDeta'+'ilMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dEmis'+'sion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_EMISS'+'IVE_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_e'+'missiveMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'learcoat\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'EARCOAT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatG'+'lossMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'NORMAL_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_clea'+'rCoatNorma'+'lMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'anisotropy'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde')+('f\x20STD_ANIS'+'OTROPY_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_anis'+'otropyMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dLightma'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_LIGH'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_lightMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20front\x20'+'end\x20output'+'s\x20to\x20lit\x20s'+'hader\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'litShaderC'+'orePS\x22\x0a'),VP='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20voi'+'d\x20getSpecu'+'larity()\x20{'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20vec'+'3(1);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20g'+'loss\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22glo'+'ssPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20ao\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'aoPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'emissivePS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO')+('AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22clear'+'CoatPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatG'+'lossPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatN'+'ormalPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20anis'+'otropy\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ani'+'sotropyPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(STD'+'_LIGHTMAP)'+'\x20||\x20define'+'d(STD_LIGH'+'T_VERTEX_C'+'OLOR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20void\x20eval'+'uateFronte'+'nd()\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIT'+'_BLEND_TYP'+'E\x20!=\x20NONE\x20'+'||\x20defined'+'(LIT_ALPHA'+'_TEST)\x20||\x20'+'defined(LI'+'T_ALPHA_TO'+'_COVERAGE)'+'\x20||\x20STD_OP'+'ACITY_DITH'+'ER\x20!=\x20NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getOpac'+'ity();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_ALPH'+'A_TEST)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alphaT'+'est(dAlpha'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(dAlp'+'ha,\x200.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'opacity\x20=\x20'+'dAlpha;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20pa'+'rallax\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'HEIGHT_MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Parallax()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Albedo();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20d'+'Albedo;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20normal'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getNorm'+'al();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'worldNorma'+'l\x20=\x20dNorma'+'lW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_REFRACT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getRefract'+'ion();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_transmiss'+'ion\x20=\x20dTra'+'nsmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tThickness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_th'+'ickness\x20=\x20'+'dThickness'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_d'+'ispersion\x20'+'=\x20material'+'_dispersio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20iridescen'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_IRID'+'ESCENCE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getIri'+'descence()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tIridescen'+'ceThicknes'+'s();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_i'+'ridescence'+'_intensity'+'\x20=\x20dIrides'+'cence;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_iridescen'+'ce_thickne'+'ss\x20=\x20dIrid'+'escenceThi'+'ckness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('//\x20specula'+'rity\x20&\x20glo'+'ssiness\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR_'+'OR_REFLECT'+'ION\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getShee'+'n();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_sheen_s'+'pecularity'+'\x20=\x20sSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'SheenGloss'+'iness();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_she'+'en_gloss\x20='+'\x20sGlossine'+'ss;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20met'+'alness\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getMet'+'alness();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_me'+'talness\x20=\x20'+'dMetalness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getIor()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'ior\x20=\x20dIor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20specu'+'larity\x20fac'+'tor\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rityFactor'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ityFactor\x20'+'=\x20dSpecula'+'rityFactor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20gloss'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rity();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ity\x20=\x20dSpe'+'cularity;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss\x20'+'=\x20dGlossin')+('ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getAO'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ao'+'\x20=\x20dAo;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getEmi'+'ssion();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_e'+'mission\x20=\x20'+'dEmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cle'+'arcoat\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getC'+'learCoat()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tClearCoat'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getClearCo'+'atNormal()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20=\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_g'+'loss\x20=\x20ccG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_clear'+'coat_world'+'Normal\x20=\x20c'+'cNormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20aniso'+'tropy\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x20&&\x20def'+'ined(LIT_L'+'IGHTING)\x20&'+'&\x20defined('+'LIT_GGX_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getAni'+'sotropy();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20ligh'+'tmap\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(S'+'TD_LIGHTMA'+'P)\x20||\x20defi'+'ned(STD_LI'+'GHT_VERTEX'+'_COLOR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htMap();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_lightma'+'p\x20=\x20dLight'+'map;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_lightm'+'apDir\x20=\x20dL'+'ightmapDir'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20}\x0a'),GP='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20tbnBasis'+';\x0a#endif\x0a\x0a'+'void\x20getTB'+'N(vec3\x20tan'+'gent,\x20vec3'+'\x20binormal,'+'\x20vec3\x20norm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TB'+'N_TANGENTS'+'\x20//\x20tangen'+'ts\x20/\x20binor'+'mals\x20based'+'\x20TBN\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(tang'+'ent),\x20norm'+'alize(bino'+'rmal),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(TBN_'+'DERIVATIVE'+'S)\x20//\x20deri'+'vatives\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20{li'+'ghtingUv};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20get\x20edg'+'e\x20vectors\x20'+'of\x20the\x20pix'+'el\x20triangl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dp1\x20='+'\x20dFdx(\x20vPo'+'sitionW\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dp2\x20=\x20'+'dFdy(\x20vPos'+'itionW\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20duv1\x20=\x20'+'dFdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20duv2\x20'+'=\x20dFdy(\x20uv'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20solv'+'e\x20the\x20line'+'ar\x20system\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20dp2perp'+'\x20=\x20cross(\x20'+'dp2,\x20norma'+'l\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dp'+'1perp\x20=\x20cr'+'oss(\x20norma'+'l,\x20dp1\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20T\x20=\x20dp2'+'perp\x20*\x20duv'+'1.x\x20+\x20dp1p'+'erp\x20*\x20duv2'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20B\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+'dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+('ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'nom\x20=\x20max('+'\x20dot(T,T),'+'\x20dot(B,B)\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20inv'+'max\x20=\x20(den'+'om\x20==\x200.0)'+'\x20?\x200.0\x20:\x20t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3(T\x20*\x20i'+'nvmax,\x20-B\x20'+'*\x20invmax,\x20'+'normal\x20);\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20object'+'\x20space\x20TBN'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20B\x20=\x20c'+'ross(norma'+'l,\x20vObject'+'SpaceUpW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20T\x20=\x20cr'+'oss(normal'+',\x20B);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(d'+'ot(B,B)==0'+'.0)\x20//\x20dea'+'l\x20with\x20cas'+'e\x20when\x20vOb'+'jectSpaceU'+'pW\x20normal\x20'+'are\x20parall'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20major=max'+'(max(norma'+'l.x,\x20norma'+'l.y),\x20norm'+'al.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(normal'+'.x\x20==\x20majo'+'r)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20B\x20=\x20cro'+'ss(normal,'+'\x20vec3(0,1,'+'0));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20T\x20=\x20cross'+'(normal,\x20B'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20e'+'lse\x20if\x20(no'+'rmal.y\x20==\x20'+'major)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20B\x20='+'\x20cross(nor'+'mal,\x20vec3('+'0,0,1));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20if'+'\x20(normal.z'+'\x20==\x20major)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20B\x20=\x20cross'+'(normal,\x20v'+'ec3(1,0,0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(T),\x20'+'normalize('+'B),\x20normal'+'ize(normal'+'));\x0a\x0a\x20\x20\x20\x20#')+'endif\x0a}\x0a',HP='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_thickn'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tThickness'+'()\x20{\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_THICKNE'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dThi'+'ckness\x20*=\x20'+'material_t'+'hickness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_THI'+'CKNESS_TEX'+'TURE\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20texture'+'2DBias({ST'+'D_THICKNES'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_THICKNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_TH'+'ICKNESS_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',WP='\x0a\x0a#if\x20(TON'+'EMAP\x20==\x20NO'+'NE)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22to'+'nemappingN'+'onePS\x22\x0a#el'+'if\x20TONEMAP'+'\x20==\x20FILMIC'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingFilm'+'icPS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20LINEAR\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingLinea'+'rPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20HEJL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngHejlPS\x22\x0a'+'#elif\x20TONE'+'MAP\x20==\x20ACE'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22tone'+'mappingAce'+'sPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20ACES2\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingAces2PS'+'\x22\x0a#elif\x20TO'+'NEMAP\x20==\x20N'+'EUTRAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngNeutralP'+'S\x22\x0a#endif\x0a'+'\x0a',$P='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20tA\x20=\x202.'+'51;\x0a\x20\x20\x20\x20fl'+'oat\x20tB\x20=\x200'+'.03;\x0a\x20\x20\x20\x20f'+'loat\x20tC\x20=\x20'+'2.43;\x0a\x20\x20\x20\x20'+'float\x20tD\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20float\x20tE\x20'+'=\x200.14;\x0a\x20\x20'+'\x20\x20vec3\x20x\x20='+'\x20color\x20*\x20e'+'xposure;\x0a\x20'+'\x20\x20\x20return\x20'+'(x*(tA*x+t'+'B))/(x*(tC'+'*x+tD)+tE)'+';\x0a}\x0a',XP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0a//\x20A'+'CES\x20approx'+'imation\x20by'+'\x20Stephen\x20H'+'ill\x0a\x0a//\x20sR'+'GB\x20=>\x20XYZ\x20'+'=>\x20D65_2_D'+'60\x20=>\x20AP1\x20'+'=>\x20RRT_SAT'+'\x0aconst\x20mat'+'3\x20ACESInpu'+'tMat\x20=\x20mat'+'3(\x0a\x20\x20\x20\x200.5'+'9719,\x200.35'+'458,\x200.048'+'23,\x0a\x20\x20\x20\x200.'+'07600,\x200.9'+'0834,\x200.01'+'566,\x0a\x20\x20\x20\x200'+'.02840,\x200.'+'13383,\x200.8'+'3777\x0a);\x0a\x0a/'+'/\x20ODT_SAT\x20'+'=>\x20XYZ\x20=>\x20'+'D60_2_D65\x20'+'=>\x20sRGB\x0aco'+'nst\x20mat3\x20A'+'CESOutputM'+'at\x20=\x20mat3('+'\x0a\x20\x20\x20\x20\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367,\x0a\x20\x20\x20\x20-'+'0.10208,\x20\x20'+'1.10813,\x20-'+'0.00605,\x0a\x20'+'\x20\x20\x20-0.0032'+'7,\x20-0.0727'+'6,\x20\x201.0760'+'2\x0a);\x0a\x0avec3'+'\x20RRTAndODT'+'Fit(vec3\x20v'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20a\x20=\x20v\x20*'+'\x20(v\x20+\x200.02'+'45786)\x20-\x200'+'.000090537'+';\x0a\x20\x20\x20\x20vec3'+'\x20b\x20=\x20v\x20*\x20('+'0.983729\x20*'+'\x20v\x20+\x200.432'+'9510)\x20+\x200.'+'238081;\x0a\x20\x20'+'\x20\x20return\x20a'+'\x20/\x20b;\x0a}\x0a\x0av'+'ec3\x20toneMa'+'p(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'color\x20*=\x20e'+'xposure\x20/\x20'+'0.6;\x0a\x20\x20\x20\x20c'+'olor\x20=\x20col'+'or\x20*\x20ACESI'+'nputMat;\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20RRT\x20and'+'\x20ODT\x0a\x20\x20\x20\x20c'+'olor\x20=\x20RRT'+'AndODTFit('+'color);\x0a\x20\x20'+'\x20\x20color\x20=\x20'+'color\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20color\x20=\x20c'+'lamp(color'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',qP='\x0aconst\x20flo'+'at\x20A\x20=\x20\x200.'+'15;\x0aconst\x20'+'float\x20B\x20=\x20'+'\x200.50;\x0acon'+'st\x20float\x20C'+'\x20=\x20\x200.10;\x0a'+'const\x20floa'+'t\x20D\x20=\x20\x200.2'+'0;\x0aconst\x20f'+'loat\x20E\x20=\x20\x20'+'0.02;\x0acons'+'t\x20float\x20F\x20'+'=\x20\x200.30;\x0ac'+'onst\x20float'+'\x20W\x20=\x20\x2011.2'+';\x0a\x0auniform'+'\x20float\x20exp'+'osure;\x0a\x0ave'+'c3\x20unchart'+'ed2Tonemap'+'(vec3\x20x)\x20{'+'\x0a\x20\x20\x20return'+'\x20((x*(A*x+'+'C*B)+D*E)/'+'(x*(A*x+B)'+'+D*F))-E/F'+';\x0a}\x0a\x0avec3\x20'+'toneMap(ve'+'c3\x20color)\x20'+'{\x0a\x20\x20\x20\x20colo'+'r\x20=\x20unchar'+'ted2Tonema'+'p(color\x20*\x20'+'exposure);'+'\x0a\x20\x20\x20\x20vec3\x20'+'whiteScale'+'\x20=\x201.0\x20/\x20u'+'ncharted2T'+'onemap(vec'+'3(W,W,W));'+'\x0a\x20\x20\x20\x20color'+'\x20=\x20color\x20*'+'\x20whiteScal'+'e;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',jP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20col'+'or\x20*=\x20expo'+'sure;\x0a\x20\x20\x20\x20'+'const\x20floa'+'t\x20\x20A\x20=\x200.2'+'2,\x20B\x20=\x200.3'+',\x20C\x20=\x20.1,\x20'+'D\x20=\x200.2,\x20E'+'\x20=\x20.01,\x20F\x20'+'=\x200.3;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20Scl\x20=\x201'+'.25;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20h\x20=\x20m'+'ax(\x20vec3(0'+'.0),\x20color'+'\x20-\x20vec3(0.'+'004)\x20);\x0a\x20\x20'+'\x20\x20return\x20('+'h*((Scl*A)'+'*h+Scl*vec'+'3(C*B,C*B,'+'C*B))+Scl*'+'vec3(D*E,D'+'*E,D*E))\x20/'+'\x20(h*(A*h+v'+'ec3(B,B,B)'+')+vec3(D*F'+',D*F,D*F))'+'\x20-\x20Scl*vec'+'3(E/F,E/F,'+'E/F);\x0a}\x0a',YP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20color\x20'+'*\x20exposure'+';\x0a}\x0a',KP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x0a\x20\x20\x20\x20co'+'lor\x20*=\x20exp'+'osure;\x0a\x0a\x20\x20'+'\x20\x20float\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20float\x20d'+'esaturatio'+'n\x20=\x200.15;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20min(c'+'olor.r,\x20mi'+'n(color.g,'+'\x20color.b))'+';\x0a\x20\x20\x20\x20floa'+'t\x20offset\x20='+'\x20x\x20<\x200.08\x20'+'?\x20x\x20-\x206.25'+'\x20*\x20x\x20*\x20x\x20:'+'\x200.04;\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20float\x20p'+'eak\x20=\x20max('+'color.r,\x20m'+'ax(color.g'+',\x20color.b)'+');\x0a\x20\x20\x20\x20if\x20'+'(peak\x20<\x20st'+'artCompres'+'sion)\x20retu'+'rn\x20color;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20d\x20=\x201.\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20float\x20ne'+'wPeak\x20=\x201.'+'\x20-\x20d\x20*\x20d\x20/'+'\x20(peak\x20+\x20d'+'\x20-\x20startCo'+'mpression)'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x20newPe'+'ak\x20/\x20peak;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20g\x20=\x201.\x20-'+'\x201.\x20/\x20(des'+'aturation\x20'+'*\x20(peak\x20-\x20'+'newPeak)\x20+'+'\x201.);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ne'+'wPeak\x20*\x20ve'+'c3(1,\x201,\x201'+'),\x20g);\x0a}\x0a',ZP='\x0avec3\x20tone'+'Map(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'olor;\x0a}\x0a',QP='\x0a#ifdef\x20PI'+'XELSNAP\x0aun'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'CREENSPACE'+'\x0auniform\x20f'+'loat\x20proje'+'ctionFlipY'+';\x0a#endif\x0a\x0a'+'vec4\x20evalW'+'orldPositi'+'on(vec3\x20ve'+'rtexPositi'+'on,\x20mat4\x20m'+'odelMatrix'+')\x20{\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localP'+'os\x20=\x20getLo'+'calPositio'+'n(vertexPo'+'sition);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20NINESLICE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20outer\x20a'+'nd\x20inner\x20v'+'ertices\x20ar'+'e\x20at\x20the\x20s'+'ame\x20positi'+'on,\x20scale\x20'+'both\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s.xz\x20*=\x20ou'+'terScale;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nner\x20verti'+'ces\x20inside'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20(origina'+'l\x20vertices'+'\x20must\x20be\x20i'+'n\x20[-1;1]\x20r'+'ange)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20p'+'ositiveUni'+'tOffset\x20=\x20'+'clamp(vert'+'exPosition'+'.xz,\x20vec2('+'0.0),\x20vec2'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20negativeU'+'nitOffset\x20'+'=\x20clamp(-v'+'ertexPosit'+'ion.xz,\x20ve'+'c2(0.0),\x20v'+'ec2(1.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'ocalPos.xz'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vTiledU'+'v\x20=\x20(local'+'Pos.xz\x20-\x20o'+'uterScale\x20'+'+\x20innerOff'+'set.xy)\x20*\x20'+'-0.5\x20+\x201.0'+';\x20//\x20uv\x20=\x20'+'local\x20pos\x20'+'-\x20inner\x20co'+'rner\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20localP'+'os.xz\x20*=\x20-'+'0.5;\x20//\x20mo'+'ve\x20from\x20-1'+';1\x20to\x20-0.5'+';0.5\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s\x20=\x20localP'+'os.xzy;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20vec4\x20p'+'osW\x20=\x20mode'+'lMatrix\x20*\x20'+'vec4(local'+('Pos,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREENS'+'PACE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20posW.zw'+'\x20=\x20vec2(0.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20posW;\x0a}\x0a'+'\x0avec4\x20getP'+'osition()\x20'+'{\x0a\x0a\x20\x20\x20\x20dMo'+'delMatrix\x20'+'=\x20getModel'+'Matrix();\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'posW\x20=\x20eva'+'lWorldPosi'+'tion(verte'+'x_position'+'.xyz,\x20dMod'+'elMatrix);'+'\x0a\x20\x20\x20\x20dPosi'+'tionW\x20=\x20po'+'sW.xyz;\x0a\x0a\x20'+'\x20\x20\x20vec4\x20sc'+'reenPos;\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV1LAYOUT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sc'+'reenPos\x20=\x20'+'vec4(verte'+'x_texCoord'+'1.xy\x20*\x202.0'+'\x20-\x201.0,\x200.'+'5,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20WEBGPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20SCREENSP'+'ACE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos\x20=\x20po'+'sW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.y\x20*='+'\x20projectio'+'nFlipY;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20screen'+'Pos\x20=\x20matr'+'ix_viewPro'+'jection\x20*\x20'+'posW;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PIX'+'ELSNAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20snap\x20ver'+'tex\x20to\x20a\x20p'+'ixel\x20bound'+'ary\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x200.5'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.xy\x20*=\x20uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'ScreenSize'+'.zw;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x202.'+'0)\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20sc'+'reenPos;\x0a}')+('\x0a\x0avec3\x20get'+'WorldPosit'+'ion()\x20{\x0a\x20\x20'+'\x20\x20return\x20d'+'PositionW;'+'\x0a}\x0a'),JP='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_positi'+'on;\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifdef\x20MORP'+'HING\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20morph_te'+'x_params;\x0a'+'\x20\x20\x20\x20attrib'+'ute\x20uint\x20m'+'orph_verte'+'x_id;\x0a\x0a\x20\x20\x20'+'\x20ivec2\x20get'+'TextureMor'+'phCoords()'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20turn\x20'+'morph_vert'+'ex_id\x20into'+'\x20int\x20grid\x20'+'coordinate'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ivec2\x20text'+'ureSize\x20=\x20'+'ivec2(morp'+'h_tex_para'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20mor'+'phGridV\x20=\x20'+'int(morph_'+'vertex_id)'+'\x20/\x20texture'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20int\x20'+'morphGridU'+'\x20=\x20int(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20flipY\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20morphGrid'+'V\x20=\x20textur'+'eSize.y\x20-\x20'+'morphGridV'+'\x20-\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20ivec'+'2(morphGri'+'dU,\x20morphG'+'ridV);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_POSITI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_INT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec3\x20aabb'+'Size;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20aabbMin;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'usampler2D'+'\x20morphPosi'+'tionTex;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20highp\x20s'+'ampler2D\x20m'+'orphPositi'+'onTex;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a#ifdef\x20de'+'fined(BATC'+'H)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ski'+'nBatchVS\x22\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getBon'+'eMatrix(ve'+'rtex_boneI'+'ndices);\x0a\x20'+'\x20\x20\x20}\x0a\x0a#eli'+'f\x20defined('+'SKIN)\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x0a\x20'+'\x20\x20\x20mat4\x20ge'+'tModelMatr'+'ix()\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20get'+'SkinMatrix'+'(vertex_bo'+'neIndices,'+'\x20vertex_bo'+'neWeights)'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'elif\x20defin'+'ed(INSTANC'+'ING)\x0a\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'transformI'+'nstancingV'+'S\x22\x0a\x0a#else\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20matrix'+'_model;\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a\x0avec3\x20ge'+'tLocalPosi'+'tion(vec3\x20'+'vertexPosi'+'tion)\x20{\x0a\x0a\x20'+'\x20\x20\x20vec3\x20lo'+'calPos\x20=\x20v'+'ertexPosit'+'ion;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'morphUV\x20=\x20'+'getTexture'+'MorphCoord'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20MORPHING_'+'INT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20morphPos\x20'+'=\x20vec3(tex'+'elFetch(mo'+'rphPositio'+'nTex,\x20ivec'+'2(morphUV)'+',\x200).xyz)\x20'+'/\x2065535.0\x20'+'*\x20aabbSize'+'\x20+\x20aabbMin'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphPo'+'s\x20=\x20texelF'+'etch(morph'+'PositionTe'+'x,\x20ivec2(m'+'orphUV),\x200'+').xyz;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20localPos\x20'+'+=\x20morphPo'+'s;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20loc'+'alPos;\x0a}\x0a\x0a'),e2='\x0a\x0aattribut'+'e\x20vec4\x20ins'+'tance_line'+'1;\x0aattribu'+'te\x20vec4\x20in'+'stance_lin'+'e2;\x0aattrib'+'ute\x20vec4\x20i'+'nstance_li'+'ne3;\x0aattri'+'bute\x20vec4\x20'+'instance_l'+'ine4;\x0a\x0amat'+'4\x20getModel'+'Matrix()\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20mat'+'4(instance'+'_line1,\x20in'+'stance_lin'+'e2,\x20instan'+'ce_line3,\x20'+'instance_l'+'ine4);\x0a}\x0a',t2='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_refr'+'action;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getRefrac'+'tion()\x20{\x0a\x20'+'\x20\x20\x20float\x20r'+'efraction\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20ref'+'raction\x20=\x20'+'material_r'+'efraction;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_RE'+'FRACTION_T'+'EXTURE\x0a\x20\x20\x20'+'\x20refractio'+'n\x20*=\x20textu'+'re2DBias({'+'STD_REFRAC'+'TION_TEXTU'+'RE_NAME},\x20'+'{STD_REFRA'+'CTION_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_REF'+'RACTION_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_VERTEX'+'\x0a\x20\x20\x20\x20refra'+'ction\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_REFR'+'ACTION_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dTransmis'+'sion\x20=\x20ref'+'raction;\x0a}'+'\x0a',s2='\x0auniform\x20f'+'loat\x20twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0avoi'+'d\x20handleTw'+'oSidedLigh'+'ting()\x20{\x0a\x20'+'\x20\x20\x20dTBN[2]'+'\x20*=\x20gl_Fro'+'ntFacing\x20?'+'\x20twoSidedL'+'ightingNeg'+'ScaleFacto'+'r\x20:\x20-twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0a}\x0a',i2='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20vec2\x20ge'+'tUv0()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20ver'+'tex_positi'+'on.xz;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20o'+'ffset\x20inne'+'r\x20vertices'+'\x20inside\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20('+'original\x20v'+'ertices\x20mu'+'st\x20be\x20in\x20['+'-1;1]\x20rang'+'e)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2(0.'+'0),\x20vec2(1'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20n'+'egativeUni'+'tOffset\x20=\x20'+'clamp(-ver'+'tex_positi'+'on.xz,\x20vec'+'2(0.0),\x20ve'+'c2(1.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20-0.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20atlasRe'+'ct.zw\x20+\x20at'+'lasRect.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vMask\x20=\x20v'+'ertex_texC'+'oord0.xy;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20uv;\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20vec2'+'\x20getUv0()\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20ver'+'tex_texCoo'+'rd0;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a',r2='\x0avec2\x20getU'+'v1()\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'rtex_texCo'+'ord1;\x0a}\x0a',a2='\x0avUV{TRANS'+'FORM_UV_{i'+'}}_{TRANSF'+'ORM_ID_{i}'+'}\x20=\x20vec2(\x0a'+'\x20\x20\x20\x20dot(ve'+'c3(uv{TRAN'+'SFORM_UV_{'+'i}},\x201),\x20{'+'TRANSFORM_'+'NAME_{i}}0'+'),\x0a\x20\x20\x20\x20dot'+'(vec3(uv{T'+'RANSFORM_U'+'V_{i}},\x201)'+',\x20{TRANSFO'+'RM_NAME_{i'+'}}1)\x0a);\x0a',n2='\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}0;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}1;'+'\x0a',o2='\x0avoid\x20getV'+'iewDir()\x20{'+'\x0a\x20\x20\x20\x20dView'+'DirW\x20=\x20nor'+'malize(vie'+'w_position'+'\x20-\x20vPositi'+'onW);\x0a}\x0a',l2={'alphaTestPS':nC,'ambientPS':oC,'anisotropyPS':lC,'aoPS':hC,'aoDiffuseOccPS':cC,'aoSpecOccPS':dC,'bakeDirLmEndPS':fC,'bakeLmEndPS':uC,'basePS':mC,'baseNineSlicedPS':pC,'baseNineSlicedTiledPS':_C,'bayerPS':gC,'blurVSMPS':SC,'clearCoatPS':yC,'clearCoatGlossPS':vC,'clearCoatNormalPS':xC,'clusteredLightCookiesPS':wC,'clusteredLightShadowsPS':EC,'clusteredLightUtilsPS':TC,'clusteredLightPS':AC,'combinePS':bC,'cookieBlit2DPS':CC,'cookieBlitCubePS':PC,'cookieBlitVS':MC,'cookiePS':IC,'cubeMapProjectPS':DC,'cubeMapRotatePS':LC,'debugOutputPS':RC,'debugProcessFrontendPS':OC,'detailModesPS':NC,'diffusePS':kC,'decodePS':FC,'emissivePS':UC,'encodePS':BC,'endPS':zC,'envAtlasPS':VC,'envProcPS':GC,'falloffInvSquaredPS':HC,'falloffLinearPS':WC,'floatAsUintPS':$C,'fogPS':XC,'fresnelSchlickPS':qC,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':jC,'gammaPS':YC,'gles3PS':jS,'gles3VS':YS,'glossPS':KC,'gsplatCenterVS':ZC,'gsplatCornerVS':o1,'gsplatColorVS':QC,'gsplatCommonVS':JC,'gsplatCompressedDataVS':e1,'gsplatCompressedSHVS':t1,'gsplatEvalSHVS':s1,'gsplatQuatToMat3VS':i1,'gsplatSogsColorVS':r1,'gsplatSogsDataVS':a1,'gsplatSogsSHVS':n1,'gsplatDataVS':l1,'gsplatOutputVS':h1,'gsplatPS':c1,'gsplatSHVS':d1,'gsplatSourceVS':f1,'gsplatVS':u1,'quadVS':m1,'immediateLinePS':p1,'immediateLineVS':_1,'iridescenceDiffractionPS':g1,'iridescencePS':S1,'iridescenceThicknessPS':y1,'iorPS':v1,'lightDeclarationPS':x1,'lightDiffuseLambertPS':T1,'lightDirPointPS':w1,'lightEvaluationPS':E1,'lightFunctionLightPS':A1,'lightFunctionShadowPS':b1,'lightingPS':C1,'lightmapAddPS':P1,'lightmapPS':M1,'lightSpecularAnisoGGXPS':I1,'lightSpecularBlinnPS':D1,'lightSheenPS':L1,'linearizeDepthPS':R1,'litForwardBackendPS':O1,'litForwardDeclarationPS':F1,'litForwardMainPS':N1,'litForwardPostCodePS':k1,'litForwardPreCodePS':U1,'litMainPS':B1,'litMainVS':z1,'litOtherMainPS':V1,'litShaderArgsPS':G1,'litShaderCorePS':H1,'litShadowMainPS':W1,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':$1,'metalnessPS':X1,'metalnessModulatePS':j1,'morphPS':Y1,'morphVS':K1,'msdfPS':q1,'msdfVS':Z1,'normalVS':Q1,'normalCoreVS':J1,'normalMapPS':eP,'opacityPS':tP,'opacityDitherPS':sP,'outputPS':iP,'outputAlphaPS':rP,'outputTex2DPS':aP,'sheenPS':nP,'sheenGlossPS':oP,'parallaxPS':lP,'pickPS':hP,'reflDirPS':cP,'reflDirAnisoPS':dP,'reflectionCCPS':fP,'reflectionCubePS':uP,'reflectionEnvHQPS':mP,'reflectionEnvPS':pP,'reflectionSpherePS':_P,'reflectionSheenPS':gP,'refractionCubePS':SP,'refractionDynamicPS':yP,'reprojectPS':vP,'reprojectVS':xP,'screenDepthPS':TP,'shadowCascadesPS':wP,'shadowEVSMPS':EP,'shadowPCF1PS':AP,'shadowPCF3PS':bP,'shadowPCF5PS':CP,'shadowPCSSPS':PP,'shadowSoftPS':MP,'skinBatchVS':IP,'skinVS':DP,'skyboxPS':LP,'skyboxVS':RP,'specularPS':OP,'sphericalPS':FP,'specularityFactorPS':NP,'spotPS':kP,'startNineSlicedPS':UP,'startNineSlicedTiledPS':BP,'stdDeclarationPS':zP,'stdFrontEndPS':VP,'TBNPS':GP,'thicknessPS':HP,'tonemappingPS':WP,'tonemappingAcesPS':$P,'tonemappingAces2PS':XP,'tonemappingFilmicPS':qP,'tonemappingHejlPS':jP,'tonemappingLinearPS':YP,'tonemappingNeutralPS':KP,'tonemappingNonePS':ZP,'transformVS':QP,'transformCoreVS':JP,'transformInstancingVS':e2,'transmissionPS':t2,'twoSidedLightingPS':s2,'uv0VS':i2,'uv1VS':r2,'uvTransformVS':a2,'uvTransformUniformsPS':n2,'viewDirPS':o2,'webgpuPS':KS,'webgpuVS':ZS},h2='\x0auniform\x20a'+'lpha_ref:\x20'+'f32;\x0a\x0afn\x20a'+'lphaTest(a'+':\x20f32)\x20{\x0a\x20'+'\x20\x20\x20if\x20(a\x20<'+'\x20uniform.a'+'lpha_ref)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',c2='\x0a\x0a#if\x20LIT_'+'AMBIENT_SO'+'URCE\x20==\x20AM'+'BIENTSH\x0a\x20\x20'+'\x20\x20uniform\x20'+'ambientSH:'+'\x20array<vec'+'3f,\x209>;\x0a#e'+'ndif\x0a\x0a#if\x20'+'LIT_AMBIEN'+'T_SOURCE\x20='+'=\x20ENVALATL'+'AS\x0a\x20\x20\x20\x20#in'+'clude\x20\x22env'+'AtlasPS\x22\x0a\x0a'+'\x20\x20\x20\x20#ifnde'+'f\x20ENV_ATLA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_en'+'vAtlas:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_envAt'+'lasSampler'+':\x20sampler;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'fn\x20addAmbi'+'ent(worldN'+'ormal:\x20vec'+'3f)\x20{\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20A'+'MBIENTSH\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20n:\x20vec3f'+'\x20=\x20cubeMap'+'Rotate(wor'+'ldNormal);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20color:\x20'+'vec3f\x20=\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[0]'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[1]\x20*\x20n.'+'x\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm.ambien'+'tSH[2]\x20*\x20n'+'.y\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form.ambie'+'ntSH[3]\x20*\x20'+'n.z\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform.ambi'+'entSH[4]\x20*'+'\x20n.x\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[5]\x20*\x20n.'+'z\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform.'+'ambientSH['+'6]\x20*\x20n.y\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform.amb'+'ientSH[7]\x20'+'*\x20(3.0\x20*\x20n'+'.z\x20*\x20n.z\x20-'+'\x201.0)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[8]'+'\x20*\x20(n.x\x20*\x20'+'n.x\x20-\x20n.y\x20'+'*\x20n.y);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20proces'+'sEnvironme'+'nt(max(col'+'or,\x20vec3f('+'0.0)));\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+('\x20ENVALATLA'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3f(-1.0,\x201'+'.0,\x201.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20mapUv'+'(toSpheric'+'alUv(dir),'+'\x20vec4f(128'+'.0,\x20256.0\x20'+'+\x20128.0,\x206'+'4.0,\x2032.0)'+'\x20/\x20atlasSi'+'ze);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20ra'+'w:\x20vec4f\x20='+'\x20textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20uv'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20linea'+'r:\x20vec3f\x20='+'\x20{ambientD'+'ecode}(raw'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20+=\x20pr'+'ocessEnvir'+'onment(lin'+'ear);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20C'+'ONSTANT\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20unifor'+'m.light_gl'+'obalAmbien'+'t;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),d2='\x0a#ifdef\x20LI'+'T_GGX_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_anis'+'otropyInte'+'nsity:\x20f32'+';\x0a\x20\x20\x20\x20unif'+'orm\x20materi'+'al_anisotr'+'opyRotatio'+'n:\x20vec2f;\x0a'+'#endif\x0a\x0afn'+'\x20getAnisot'+'ropy()\x20{\x0a\x20'+'\x20\x20\x20dAnisot'+'ropy\x20=\x200.0'+';\x0a\x20\x20\x20\x20dAni'+'sotropyRot'+'ation\x20=\x20ve'+'c2f(1.0,\x200'+'.0);\x0a\x0a#ifd'+'ef\x20LIT_GGX'+'_SPECULAR\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20=\x20un'+'iform.mate'+'rial_aniso'+'tropyInten'+'sity;\x0a\x20\x20\x20\x20'+'dAnisotrop'+'yRotation\x20'+'=\x20uniform.'+'material_a'+'nisotropyR'+'otation;\x0a#'+'endif\x0a\x0a#if'+'def\x20STD_AN'+'ISOTROPY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyTex:\x20'+'vec3f\x20=\x20te'+'xtureSampl'+'eBias({STD'+'_ANISOTROP'+'Y_TEXTURE_'+'NAME},\x20{ST'+'D_ANISOTRO'+'PY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'ANISOTROPY'+'_TEXTURE_U'+'V},\x20unifor'+'m.textureB'+'ias).rgb;\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20*=\x20a'+'nisotropyT'+'ex.b;\x0a\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyRotat'+'ionFromTex'+':\x20vec2f\x20=\x20'+'anisotropy'+'Tex.rg\x20*\x202'+'.0\x20-\x20vec2f'+'(1.0);\x0a\x20\x20\x20'+'\x20let\x20rotat'+'ionMatrix:'+'\x20mat2x2f\x20='+'\x20mat2x2f(d'+'Anisotropy'+'Rotation.x'+',\x20dAnisotr'+'opyRotatio'+'n.y,\x20-dAni'+'sotropyRot'+'ation.y,\x20d'+'Anisotropy'+'Rotation.x'+');\x0a\x20\x20\x20\x20dAn'+'isotropyRo'+'tation\x20=\x20r'+'otationMat'+'rix\x20*\x20anis'+'otropyRota'+'tionFromTe'+'x;\x0a#endif\x0a'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20c'+'lamp(dAnis'+'otropy,\x200.'+'0,\x201.0);\x0a}'+'\x0a',f2='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_aoI'+'ntensity:\x20'+'f32;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_AODETA'+'IL_TEXTURE'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22detai'+'lModesPS\x22\x0a'+'#endif\x0a\x0afn'+'\x20getAO()\x20{'+'\x0a\x20\x20\x20\x20dAo\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20aoBas'+'e:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_AO_TEXTU'+'RE_NAME},\x20'+'{STD_AO_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AO_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_AO_'+'TEXTURE_CH'+'ANNEL};\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_AO'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20aoDetail:'+'\x20f32\x20=\x20tex'+'tureSample'+'Bias({STD_'+'AODETAIL_T'+'EXTURE_NAM'+'E},\x20{STD_A'+'ODETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AODET'+'AIL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_AODETAI'+'L_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20aoBase\x20='+'\x20detailMod'+'e_{STD_AOD'+'ETAIL_DETA'+'ILMODE}(ve'+'c3f(aoBase'+'),\x20vec3f(a'+'oDetail)).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dAo'+'\x20=\x20dAo\x20*\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20=\x20dA'+'o\x20*\x20satura'+'te(vVertex'+'Color.{STD'+'_AO_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'STD_AO_TEX'+'TURE)\x20||\x20d'+'efined(STD'+'_AO_VERTEX'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAo\x20=\x20mix('+'1.0,\x20dAo,\x20'+'uniform.ma'+'terial_aoI'+'ntensity);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',u2='\x0afn\x20occlud'+'eDiffuse(a'+'o:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20ao;\x0a'+'}\x0a',m2='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'aterial_oc'+'cludeSpecu'+'larIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0afn'+'\x20occludeSp'+'ecular(glo'+'ss:\x20f32,\x20a'+'o:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f)\x20{\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20==\x20A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_OCCLUDE_S'+'PECULAR_FL'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'specOcc:\x20f'+'32\x20=\x20mix(1'+'.0,\x20ao,\x20un'+'iform.mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specOcc:'+'\x20f32\x20=\x20ao;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'GLOSSDEPEN'+'DENT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'roximated\x20'+'specular\x20o'+'cclusion\x20f'+'rom\x20AO\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ht'+'tp://resea'+'rch.tri-ac'+'e.com/Data'+'/cedec2011'+'_RealtimeP'+'BR_Impleme'+'ntation_e.'+'pptx\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20spe'+'cPow:\x20f32\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20specOc'+'c:\x20f32\x20=\x20s'+'aturate(po'+'w(dot(worl'+'dNormal,\x20v'+'iewDir)\x20+\x20'+'ao,\x200.01\x20*'+'\x20specPow)\x20'+'-\x201.0\x20+\x20ao'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_OCCLUDE'+'_SPECULAR_'+'FLOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecOcc\x20=\x20mi'+'x(1.0,\x20spe'+'cOcc,\x20unif'+'orm.materi'+'al_occlude'+'SpecularIn'+'tensity);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20*\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20dRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'*\x20specOcc;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sReflec'+'tion\x20=\x20sRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a'),p2='\x0a\x20\x20\x20\x20let\x20d'+'irLm\x20=\x20tex'+'tureSample'+'(texture_d'+'irLightMap'+',\x20texture_'+'dirLightMa'+'pSampler,\x20'+'vUv1);\x0a\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.bakeDi'+'r\x20>\x200.5)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(dAtten\x20'+'>\x200.00001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'npacked_di'+'r\x20=\x20dirLm.'+'xyz\x20*\x202.0\x20'+'-\x20vec3f(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x20clamp'+'(dAtten,\x200'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20comb'+'ined_dir\x20='+'\x20dLightDir'+'NormW.xyz\x20'+'*\x20dAtten\x20+'+'\x20unpacked_'+'dir\x20*\x20dirL'+'m.w;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20finalRgb\x20'+'=\x20normaliz'+'e(combined'+'_dir)\x20*\x200.'+'5\x20+\x20vec3f('+'0.5);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20finalA\x20='+'\x20max(dirLm'+'.w\x20+\x20dAtte'+'n,\x201.0\x20/\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalRgb,\x20'+'finalA);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20dirLm;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20alpha'+'_min\x20=\x20sel'+'ect(0.0,\x201'+'.0\x20/\x20255.0'+',\x20dAtten\x20>'+'\x200.00001);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20finalA\x20'+'=\x20max(dirL'+'m.w,\x20alpha'+'_min);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(dirL'+'m.rgb,\x20fin'+'alA);\x0a\x20\x20\x20\x20'+'}\x0a',_2='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'uniform.am'+'bientBakeO'+'cclusionCo'+'ntrast\x20+\x201'+'.0,\x200.0))\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20vec3f(u'+'niform.amb'+'ientBakeOc'+'clusionBri'+'ghtness);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'saturate3('+'dDiffuseLi'+'ght);\x0a\x20\x20\x20\x20'+'dDiffuseLi'+'ght\x20=\x20dDif'+'fuseLight\x20'+'*\x20dAmbient'+'Light;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIGHTMAP'+'_RGBM\x0a\x20\x20\x20\x20'+'//\x20encode\x20'+'to\x20RGBM\x0a\x20\x20'+'\x20\x20var\x20temp'+'_color_rgb'+'m\x20=\x20vec4f('+'dDiffuseLi'+'ght,\x201.0);'+'\x0a\x20\x20\x20\x20temp_'+'color_rgbm'+'\x20=\x20vec4f(p'+'ow(temp_co'+'lor_rgbm.r'+'gb,\x20vec3f('+'0.5)),\x20tem'+'p_color_rg'+'bm.a);\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+'color_rgbm'+'.rgb\x20/\x208.0'+',\x20temp_col'+'or_rgbm.a)'+';\x0a\x20\x20\x20\x20let\x20'+'max_g_b\x20=\x20'+'max(temp_c'+'olor_rgbm.'+'g,\x20max(tem'+'p_color_rg'+'bm.b,\x201.0\x20'+'/\x20255.0));'+'\x0a\x20\x20\x20\x20let\x20m'+'ax_rgb\x20=\x20m'+'ax(temp_co'+'lor_rgbm.r'+',\x20max_g_b)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20ceil'+'(temp_colo'+'r_rgbm.a\x20*'+'\x20255.0)\x20/\x20'+'255.0;\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+('color_rgbm'+'.rgb\x20/\x20tem'+'p_color_rg'+'bm.a,\x20temp'+'_color_rgb'+'m.a);\x0a\x20\x20\x20\x20'+'output.col'+'or\x20=\x20temp_'+'color_rgbm'+';\x0a#else\x0a\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20vec'+'4f(dDiffus'+'eLight,\x201.'+'0);\x0a#endif'+'\x0a'),g2='\x0auniform\x20v'+'iew_positi'+'on:\x20vec3f;'+'\x0a\x0auniform\x20'+'light_glob'+'alAmbient:'+'\x20vec3f;\x0a\x0af'+'n\x20square(x'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20x*x'+';\x0a}\x0a\x0afn\x20sa'+'turate(x:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0afn'+'\x20saturate3'+'(x:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3f(0.'+'0),\x20vec3f('+'1.0));\x0a}\x0a',S2='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'Mask:\x20vec2'+'f;\x0avarying'+'\x20vTiledUv:'+'\x20vec2f;\x0a\x0au'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0auni'+'form\x20outer'+'Scale:\x20vec'+'2f;\x0aunifor'+'m\x20atlasRec'+'t:\x20vec4f;\x0a'+'\x0avar<priva'+'te>\x20nineSl'+'icedUv:\x20ve'+'c2f;\x0a',y2='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vMask:\x20v'+'ec2f;\x0avary'+'ing\x20vTiled'+'Uv:\x20vec2f;'+'\x0a\x0auniform\x20'+'innerOffse'+'t:\x20vec4f;\x0a'+'uniform\x20ou'+'terScale:\x20'+'vec2f;\x0auni'+'form\x20atlas'+'Rect:\x20vec4'+'f;\x0a\x0avar<pr'+'ivate>\x20nin'+'eSlicedUv:'+'\x20vec2f;\x0a',v2='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afn\x20bay'+'er2(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(2.0\x20*'+'\x20p.y\x20+\x20p.x'+'\x20+\x201.0)\x20%\x20'+'4.0;\x0a}\x0a\x0a//'+'\x204x4\x20matri'+'x,\x20p\x20-\x20pix'+'el\x20coordin'+'ate\x0afn\x20bay'+'er4(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20p1:\x20vec2f'+'\x20=\x20p\x20%\x20vec'+'2f(2.0);\x0a\x20'+'\x20\x20\x20let\x20p2:'+'\x20vec2f\x20=\x20f'+'loor(0.5\x20*'+'\x20(p\x20%\x20vec2'+'f(4.0)));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afn\x20bayer8'+'(p:\x20vec2f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20p1'+':\x20vec2f\x20=\x20'+'p\x20%\x20vec2f('+'2.0);\x0a\x20\x20\x20\x20'+'let\x20p2:\x20ve'+'c2f\x20=\x20floo'+'r(0.5\x20*\x20(p'+'\x20%\x20vec2f(4'+'.0)));\x0a\x20\x20\x20'+'\x20let\x20p4:\x20v'+'ec2f\x20=\x20flo'+'or(0.25\x20*\x20'+'(p\x20%\x20vec2f'+'(8.0)));\x0a\x20'+'\x20\x20\x20return\x20'+'4.0\x20*\x20(4.0'+'\x20*\x20bayer2('+'p1)\x20+\x20baye'+'r2(p2))\x20+\x20'+'bayer2(p4)'+';\x0a}\x0a',x2='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20sou'+'rce:\x20textu'+'re_2d<f32>'+';\x0avar\x20sour'+'ceSampler:'+'\x20sampler;\x0a'+'\x0a#ifdef\x20GA'+'USS\x0a\x20\x20\x20\x20un'+'iform\x20weig'+'ht:\x20array<'+'f32,\x20{SAMP'+'LES}>;\x0a#en'+'dif\x0aunifor'+'m\x20pixelOff'+'set:\x20vec2f'+';\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20var'+'\x20moments:\x20'+'vec3f\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20let\x20uv'+':\x20vec2f\x20=\x20'+'input.vUv0'+'\x20-\x20uniform'+'.pixelOffs'+'et\x20*\x20(f32('+'{SAMPLES})'+'\x20*\x200.5);\x0a\x0a'+'\x20\x20\x20\x20for\x20(v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20{'+'SAMPLES};\x20'+'i\x20=\x20i\x20+\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20c:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'source,\x20so'+'urceSample'+'r,\x20uv\x20+\x20un'+'iform.pixe'+'lOffset\x20*\x20'+'f32(i));\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20moments'+'\x20=\x20moments'+'\x20+\x20c.xyz\x20*'+'\x20uniform.w'+'eight[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20=\x20moment'+'s\x20+\x20c.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'oments\x20=\x20m'+'oments\x20*\x20('+'1.0\x20/\x20f32('+'{SAMPLES})'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'moments,\x201'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a',T2='\x0auniform\x20m'+'aterial_cl'+'earCoat:\x20f'+'32;\x0a\x0afn\x20ge'+'tClearCoat'+'()\x20{\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20=\x20unifo'+'rm.materia'+'l_clearCoa'+'t;\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_C'+'LEARCOAT_T'+'EXTURE\x0a\x20\x20\x20'+'\x20ccSpecula'+'rity\x20=\x20ccS'+'pecularity'+'\x20*\x20texture'+'SampleBias'+'({STD_CLEA'+'RCOAT_TEXT'+'URE_NAME},'+'\x20{STD_CLEA'+'RCOAT_TEXT'+'URE_NAME}S'+'ampler,\x20{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_CLE'+'ARCOAT_VER'+'TEX\x0a\x20\x20\x20\x20cc'+'Specularit'+'y\x20=\x20ccSpec'+'ularity\x20*\x20'+'saturate(v'+'VertexColo'+'r.{STD_CLE'+'ARCOAT_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a',w2='\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_clearCoa'+'tGloss:\x20f3'+'2;\x0a\x0afn\x20get'+'ClearCoatG'+'lossiness('+')\x20{\x0a\x20\x20\x20\x20cc'+'Glossiness'+'\x20=\x20uniform'+'.material_'+'clearCoatG'+'loss;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE_NAME}'+',\x20{STD_CLE'+'ARCOATGLOS'+'S_TEXTURE_'+'NAME}Sampl'+'er,\x20{STD_C'+'LEARCOATGL'+'OSS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_CLEA'+'RCOATGLOSS'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_INVERT\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20=\x201.0'+'\x20-\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20ccGloss'+'iness\x20+=\x200'+'.0000001;\x0a'+'}\x0a',E2='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_cle'+'arCoatBump'+'iness:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getClea'+'rCoatNorma'+'l()\x20{\x0a#ifd'+'ef\x20STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'\x0a\x20\x20\x20\x20var\x20n'+'ormalMap:\x20'+'vec3f\x20=\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_DEC'+'ODE}(textu'+'reSampleBi'+'as({STD_CL'+'EARCOATNOR'+'MAL_TEXTUR'+'E_NAME},\x20{'+'STD_CLEARC'+'OATNORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias));\x0a\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20mix(v'+'ec3f(0.0,\x20'+'0.0,\x201.0),'+'\x20normalMap'+',\x20uniform.'+'material_c'+'learCoatBu'+'mpiness);\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20norm'+'alize(dTBN'+'\x20*\x20normalM'+'ap);\x0a#else'+'\x0a\x20\x20\x20\x20ccNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a',A2='\x0astruct\x20Fa'+'ceCoords\x20{'+'\x0a\x20\x20\x20\x20uv:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Or'+'iginal\x20ret'+'urn\x20value\x0a'+'\x20\x20\x20\x20faceIn'+'dex:\x20f32,\x20'+'\x20\x20\x20//\x20Was\x20'+'out\x20parame'+'ter\x0a\x20\x20\x20\x20ti'+'leOffset:\x20'+'vec2f,\x20//\x20'+'Was\x20out\x20pa'+'rameter\x0a}\x0a'+'\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0afn\x20getC'+'ubemapFace'+'Coordinate'+'s(dir:\x20vec'+'3f)\x20->\x20Fac'+'eCoords\x20{\x0a'+'\x20\x20\x20\x20var\x20fa'+'ceIndex:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20tileOffs'+'et:\x20vec2f;'+'\x0a\x20\x20\x20\x20var\x20u'+'v:\x20vec2f;\x20'+'//\x20This\x20is'+'\x20the\x20face\x20'+'UV\x20[0..1]\x0a'+'\x20\x20\x20\x20let\x20vA'+'bs:\x20vec3f\x20'+'=\x20abs(dir)'+';\x0a\x20\x20\x20\x20var\x20'+'ma:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20if\x20(vA'+'bs.z\x20>=\x20vA'+'bs.x\x20&&\x20vA'+'bs.z\x20>=\x20vA'+'bs.y)\x20{\x20\x20\x20'+'//\x20front\x20/'+'\x20back\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20i'+'s_neg_z\x20=\x20'+'dir.z\x20<\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20faceIndex'+'\x20=\x20select('+'4.0,\x205.0,\x20'+'is_neg_z);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'a\x20=\x200.5\x20/\x20'+'vAbs.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv\x20='+'\x20vec2f(sel'+'ect(dir.x,'+'\x20-dir.x,\x20i'+'s_neg_z),\x20'+'-dir.y);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20til'+'eOffset\x20=\x20'+'vec2f(2.0,'+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_z));\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(vAbs'+'.y\x20>=\x20vAbs'+'.x)\x20{\x20\x20//\x20'+'top\x20index\x20'+'2,\x20bottom\x20'+'index\x203\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20is_neg_y\x20'+'=\x20dir.y\x20<\x20'+'0.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20selec'+('t(2.0,\x203.0'+',\x20is_neg_y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ma\x20=\x200.5\x20'+'/\x20vAbs.y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20=\x20vec2f(d'+'ir.x,\x20sele'+'ct(dir.z,\x20'+'-dir.z,\x20is'+'_neg_y));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'leOffset\x20='+'\x20vec2f(1.0'+',\x20select(0'+'.0,\x201.0,\x20i'+'s_neg_y));'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20is_'+'neg_x\x20=\x20di'+'r.x\x20<\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'aceIndex\x20='+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_x);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2f(selec'+'t(-dir.z,\x20'+'dir.z,\x20is_'+'neg_x),\x20-d'+'ir.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20tileO'+'ffset\x20=\x20ve'+'c2f(0.0,\x20s'+'elect(0.0,'+'\x201.0,\x20is_n'+'eg_x));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20u'+'v\x20=\x20uv\x20*\x20m'+'a\x20+\x200.5;\x0a\x20'+'\x20\x20\x20return\x20'+'FaceCoords'+'(uv,\x20faceI'+'ndex,\x20tile'+'Offset);\x0a}'+'\x0a\x0a//\x20conve'+'rts\x20unnorm'+'alized\x20dir'+'ection\x20vec'+'tor\x20to\x20a\x20t'+'exture\x20coo'+'rdinate\x20fo'+'r\x20a\x20cubema'+'p\x20face\x20sto'+'red\x20within'+'\x20texture\x20a'+'tlas\x20descr'+'ibed\x20by\x20th'+'e\x20viewport'+'\x0afn\x20getCub'+'emapAtlasC'+'oordinates'+'(omniAtlas'+'Viewport:\x20'+'vec3f,\x20sha'+'dowEdgePix'+'els:\x20f32,\x20'+'shadowText'+'ureResolut'+'ion:\x20f32,\x20'+'dir:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20faceData'+':\x20FaceCoor'+'ds\x20=\x20getCu'+'bemapFaceC'+'oordinates'+'(dir);\x0a\x20\x20\x20'+'\x20var\x20uv:\x20v'+'ec2f\x20=\x20fac'+'eData.uv;\x0a'+'\x20\x20\x20\x20let\x20ti'+'leOffset:\x20'+'vec2f\x20=\x20fa'+'ceData.til'+'eOffset;\x0a\x0a'+'\x20\x20\x20\x20//\x20mov'+'e\x20uv\x20coord'+'inates\x20inw'+'ards\x20insid'+'e\x20to\x20compe'+'nsate\x20for\x20')+('larger\x20fov'+'\x20when\x20rend'+'ering\x20shad'+'ow\x20into\x20at'+'las\x0a\x20\x20\x20\x20le'+'t\x20atlasFac'+'eSize:\x20f32'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20le'+'t\x20tileSize'+':\x20f32\x20=\x20sh'+'adowTextur'+'eResolutio'+'n\x20*\x20atlasF'+'aceSize;\x0a\x20'+'\x20\x20\x20var\x20off'+'set:\x20f32\x20='+'\x20shadowEdg'+'ePixels\x20/\x20'+'tileSize;\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20*\x20(1.0\x20-'+'\x20offset\x20*\x20'+'2.0)\x20+\x20off'+'set;\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20='+'\x20uv\x20*\x20atla'+'sFaceSize;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x20into'+'\x20face\x20of\x20t'+'he\x20atlas\x20('+'3x3\x20grid)\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20+\x20tileOf'+'fset\x20*\x20atl'+'asFaceSize'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'offset\x20int'+'o\x20the\x20atla'+'s\x20viewport'+'\x0a\x20\x20\x20\x20uv\x20=\x20'+'uv\x20+\x20omniA'+'tlasViewpo'+'rt.xy;\x0a\x0a\x20\x20'+'\x20\x20return\x20u'+'v;\x0a}\x0a'),b2='\x0afn\x20_getCo'+'okieCluste'+'red(tex:\x20t'+'exture_2d<'+'f32>,\x20texS'+'ampler:\x20sa'+'mpler,\x20uv:'+'\x20vec2f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20pixel'+':\x20vec4f\x20=\x20'+'mix(vec4f('+'1.0),\x20text'+'ureSampleL'+'evel(tex,\x20'+'texSampler'+',\x20uv,\x200.0)'+',\x20intensit'+'y);\x0a\x20\x20\x20\x20le'+'t\x20isRgb:\x20b'+'ool\x20=\x20dot('+'cookieChan'+'nel.rgb,\x20v'+'ec3f(1.0))'+'\x20==\x203.0;\x0a\x20'+'\x20\x20\x20return\x20'+'select(vec'+'3f(dot(pix'+'el,\x20cookie'+'Channel)),'+'\x20pixel.rgb'+',\x20isRgb);\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0afn'+'\x20getCookie'+'2DClustere'+'d(tex:\x20tex'+'ture_2d<f3'+'2>,\x20texSam'+'pler:\x20samp'+'ler,\x20trans'+'form:\x20mat4'+'x4f,\x20world'+'Position:\x20'+'vec3f,\x20int'+'ensity:\x20f3'+'2,\x20cookieC'+'hannel:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20projPo'+'s:\x20vec4f\x20='+'\x20transform'+'\x20*\x20vec4f(w'+'orldPositi'+'on,\x201.0);\x0a'+'\x20\x20\x20\x20return'+'\x20_getCooki'+'eClustered'+'(tex,\x20texS'+'ampler,\x20pr'+'ojPos.xy\x20/'+'\x20projPos.w'+',\x20intensit'+'y,\x20cookieC'+'hannel);\x0a}'+'\x0a\x0a//\x20getCo'+'okie\x20for\x20c'+'lustered\x20o'+'mni\x20light\x20'+'with\x20the\x20c'+'ookie\x20text'+'ure\x20being\x20'+'stored\x20in\x20'+'the\x20cookie'+'\x20atlas\x0afn\x20'+'getCookieC'+'ubeCluster'+'ed(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20dir:'+'\x20vec3f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f,\x20shad'+'owTextureR'+'esolution:'+'\x20f32,\x20shad'+('owEdgePixe'+'ls:\x20f32,\x20o'+'mniAtlasVi'+'ewport:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20dir);'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getCook'+'ieClustere'+'d(tex,\x20tex'+'Sampler,\x20u'+'v,\x20intensi'+'ty,\x20cookie'+'Channel);\x0a'+'}\x0a'),C2='\x0a\x0afn\x20_getS'+'hadowCoord'+'PerspZbuff'+'er(shadowM'+'atrix:\x20mat'+'4x4f,\x20shad'+'owParams:\x20'+'vec4f,\x20wPo'+'s:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20p'+'rojPos\x20=\x20s'+'hadowMatri'+'x\x20*\x20vec4f('+'wPos,\x201.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20projPos'+'.xyz\x20/\x20pro'+'jPos.w;\x0a\x20\x20'+'\x20\x20//\x20depth'+'\x20bias\x20is\x20a'+'lready\x20app'+'lied\x20on\x20re'+'nder\x0a}\x0a\x0afn'+'\x20getShadow'+'CoordPersp'+'ZbufferNor'+'malOffset('+'shadowMatr'+'ix:\x20mat4x4'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20normal'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20wP'+'os:\x20vec3f\x20'+'=\x20vPositio'+'nW\x20+\x20norma'+'l\x20*\x20shadow'+'Params.y;\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wCoordPers'+'pZbuffer(s'+'hadowMatri'+'x,\x20shadowP'+'arams,\x20wPo'+'s);\x0a}\x0a\x0afn\x20'+'normalOffs'+'etPointSha'+'dow(shadow'+'Params:\x20ve'+'c4f,\x20light'+'Pos:\x20vec3f'+',\x20lightDir'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'normal:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(li'+'ghtDir);\x0a\x20'+'\x20\x20\x20let\x20wPo'+'s:\x20vec3f\x20='+'\x20vPosition'+'W\x20+\x20normal'+'\x20*\x20shadowP'+'arams.y\x20*\x20'+'clamp(1.0\x20'+'-\x20dot(norm'+'al,\x20-light'+'DirNorm),\x20'+'0.0,\x201.0)\x20'+'*\x20distScal'+'e;\x20//0.02\x0a'+'\x20\x20\x20\x20let\x20di'+'r:\x20vec3f\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0a\x20\x20\x20\x20'+'fn\x20getShad'+'owOmniClus'+'teredPCF1('+'shadowMap:'+'\x20texture_d'+'epth_2d,\x20s'+'hadowMapSa'+'mpler:\x20sam'+'pler_compa'+'rison,\x20sha'+'dowParams:'+('\x20vec4f,\x20om'+'niAtlasVie'+'wport:\x20vec'+'3f,\x20shadow'+'EdgePixels'+':\x20f32,\x20lig'+'htDir:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shad'+'owTextureR'+'esolution:'+'\x20f32\x20=\x20sha'+'dowParams.'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+'tureResolu'+'tion,\x20ligh'+'tDir);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowZ:\x20f'+'32\x20=\x20lengt'+'h(lightDir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv,'+'\x20shadowZ);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F3)\x0a\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'wOmniClust'+'eredPCF3(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owParams:\x20'+'vec4f,\x20omn'+'iAtlasView'+'port:\x20vec3'+'f,\x20shadowE'+'dgePixels:'+'\x20f32,\x20ligh'+'tDir:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wTextureRe'+'solution:\x20'+'f32\x20=\x20shad'+'owParams.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20light'+'Dir);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadowZ:\x20f3'+'2\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w\x20+\x20'+'shadowPara'+'ms.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowCoord:'+'\x20vec3f\x20=\x20v'+'ec3f(uv,\x20s'+'hadowZ);\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF3x3('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20}\x0a\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowOmn'+'iClustered'+'PCF5(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20omniAtl'+'asViewport'+':\x20vec3f,\x20s'+'hadowEdgeP'+'ixels:\x20f32'+',\x20lightDir'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadowTex'+'tureResolu'+'tion:\x20f32\x20'+'=\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'uv:\x20vec2f\x20'+'=\x20getCubem'+'apAtlasCoo'+'rdinates(o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20shad'+'owTextureR'+'esolution,'+'\x20lightDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20vec3f'+'(uv,\x20shado'+'wZ);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CF5x5(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'#endif\x0a\x0a//'+'\x20Clustered'+'\x20Spot\x20Samp'+'ling\x20using'+'\x20atlas\x0a\x0a#i'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF1)\x0a\x0a\x20\x20\x20'+'\x20fn\x20getSha'+'dowSpotClu'+'steredPCF1'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu')+('rn\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowCoord.'+'xy,\x20shadow'+'Coord.z);\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0a\x20\x20'+'\x20\x20fn\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'3x3(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF5)\x0a\x0a\x20'+'\x20\x20\x20fn\x20getS'+'hadowSpotC'+'lusteredPC'+'F5(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),P2='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0avar\x20clu'+'sterWorldT'+'exture:\x20te'+'xture_2d<f'+'32>;\x0avar\x20l'+'ightsTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x0a#ifdef\x20C'+'LUSTER_SHA'+'DOWS\x0a\x20\x20\x20\x20/'+'/\x20TODO:\x20wh'+'en\x20VSM\x20sha'+'dow\x20is\x20sup'+'ported,\x20it'+'\x20needs\x20to\x20'+'use\x20sample'+'r2D\x20in\x20web'+'gl2\x0a\x20\x20\x20\x20va'+'r\x20shadowAt'+'lasTexture'+':\x20texture_'+'depth_2d;\x0a'+'\x20\x20\x20\x20var\x20sh'+'adowAtlasT'+'extureSamp'+'ler:\x20sampl'+'er_compari'+'son;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'var\x20cookie'+'AtlasTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20c'+'ookieAtlas'+'TextureSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0auniform'+'\x20clusterMa'+'xCells:\x20i3'+'2;\x0a\x0a//\x201.0'+'\x20if\x20cluste'+'red\x20lighti'+'ng\x20can\x20be\x20'+'skipped\x20(0'+'\x20lights\x20in'+'\x20the\x20clust'+'ers)\x0aunifo'+'rm\x20cluster'+'Skip:\x20f32;'+'\x0a\x0auniform\x20'+'clusterCel'+'lsCountByB'+'oundsSize:'+'\x20vec3f;\x0aun'+'iform\x20clus'+'terTexture'+'Size:\x20vec3'+'f;\x0auniform'+'\x20clusterBo'+'undsMin:\x20v'+'ec3f;\x0aunif'+'orm\x20cluste'+'rBoundsDel'+'ta:\x20vec3f;'+'\x0auniform\x20c'+'lusterCell'+'sDot:\x20vec3'+'f;\x0auniform'+'\x20clusterCe'+'llsMax:\x20ve'+('c3f;\x0aunifo'+'rm\x20shadowA'+'tlasParams'+':\x20vec2f;\x0a\x0a'+'//\x20structu'+'re\x20storing'+'\x20light\x20pro'+'perties\x20of'+'\x20a\x20cluster'+'ed\x20light\x0a/'+'/\x20it\x27s\x20sor'+'ted\x20to\x20hav'+'e\x20all\x20vect'+'ors\x20aligne'+'d\x20to\x204\x20flo'+'ats\x20to\x20lim'+'it\x20padding'+'\x0astruct\x20Cl'+'usterLight'+'Data\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x2032bit'+'\x20of\x20flags\x0a'+'\x20\x20\x20\x20flags:'+'\x20u32,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfWidth:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20isSpot:\x20'+'bool,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfHeight:'+'\x20vec3f,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20index\x0a\x20\x20'+'\x20\x20lightInd'+'ex:\x20i32,\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x0a\x20\x20'+'\x20\x20position'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sh'+'ape\x0a\x20\x20\x20\x20sh'+'ape:\x20u32,\x0a'+'\x0a\x20\x20\x20\x20//\x20wo'+'rld\x20space\x20'+'direction\x20'+'(spot\x20ligh'+'t\x20only)\x0a\x20\x20'+'\x20\x20directio'+'n:\x20vec3f,\x0a'+'\x0a\x20\x20\x20\x20//\x20li'+'ght\x20follow'+'\x20mode\x0a\x20\x20\x20\x20'+'falloffMod'+'eLinear:\x20b'+'ool,\x0a\x0a\x20\x20\x20\x20'+'//\x20color\x0a\x20'+'\x20\x20\x20color:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20//\x200.0\x20i'+'f\x20the\x20ligh'+'t\x20doesn\x27t\x20'+'cast\x20shado'+'ws\x0a\x20\x20\x20\x20sha'+'dowIntensi'+'ty:\x20f32,\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20omniAtl'+'asViewport'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20of\x20the\x20'+'light\x0a\x20\x20\x20\x20'+'range:\x20f32'+',\x0a\x0a\x20\x20\x20\x20//\x20'+'channel\x20ma'+'sk\x20-\x20one\x20o'+'f\x20the\x20chan'+'nels\x20has\x201'+',\x20the\x20othe')+('rs\x20are\x200\x0a\x20'+'\x20\x20\x20cookieC'+'hannelMask'+':\x20vec4f,\x0a\x0a'+'\x20\x20\x20\x20//\x20com'+'pressed\x20bi'+'ases,\x20two\x20'+'haf-floats'+'\x20stored\x20in'+'\x20a\x20float\x0a\x20'+'\x20\x20\x20biasesD'+'ata:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20bias\x20'+'values\x0a\x20\x20\x20'+'\x20shadowBia'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20shadowNo'+'rmalBias:\x20'+'f32,\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20a'+'nglesData:'+'\x20f32,\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20inner'+'\x20and\x20outer'+'\x20angle\x20cos'+'ine\x0a\x20\x20\x20\x20in'+'nerConeAng'+'leCos:\x20f32'+',\x0a\x20\x20\x20\x20oute'+'rConeAngle'+'Cos:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'tensity\x20of'+'\x20the\x20cooki'+'e\x0a\x20\x20\x20\x20cook'+'ieIntensit'+'y:\x20f32,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20mask\x0a\x20\x20\x20'+'\x20//float\x20m'+'ask;\x0a\x20\x20\x20\x20i'+'sDynamic:\x20'+'bool,\x0a\x20\x20\x20\x20'+'isLightmap'+'ped:\x20bool\x0a'+'}\x0a\x0a//\x20Note'+':\x20on\x20some\x20'+'devices\x20(t'+'ested\x20on\x20P'+'ixel\x203A\x20XL'+'),\x20this\x20ma'+'trix\x20when\x20'+'stored\x20ins'+'ide\x20the\x20li'+'ght\x20struct'+'\x20has\x20lower'+'\x20precision'+'\x20compared\x20'+'to\x0a//\x20when'+'\x20stored\x20ou'+'tside,\x20so\x20'+'we\x20store\x20i'+'t\x20outside\x20'+'to\x20avoid\x20s'+'pot\x20shadow'+'\x20flickerin'+'g.\x20This\x20mi'+'ght\x20need\x20t'+'o\x20be\x20done\x20'+'to\x20other\x20/'+'\x20all\x20membe'+'rs\x0a//\x20of\x20t'+'he\x20structu'+'re\x20if\x20furt'+'her\x20simila'+'r\x20issues\x20a'+'re\x20observe'+'d.\x0a\x0a//\x20sha'+'dow\x20(spot\x20'+'light\x20only'+')\x20/\x20cookie'+'\x20projectio'+'n\x20matrix\x0av'+'ar<private'+'>\x20lightPro'+'jectionMat'+'rix:\x20mat4x'+'4f;\x0a\x0afn\x20sa'+'mpleLightT'+'extureF(li'+'ghtIndex:\x20'+'i32,\x20index'+':\x20i32)\x20->\x20')+('vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20t'+'extureLoad'+'(lightsTex'+'ture,\x20vec2'+'<i32>(inde'+'x,\x20lightIn'+'dex),\x200);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightCore(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>,\x20'+'lightIndex'+':\x20f32)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20lig'+'ht\x20index\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'lightIndex'+'\x20=\x20i32(lig'+'htIndex);\x0a'+'\x0a\x20\x20\x20\x20//\x20sa'+'mple\x20data\x20'+'encoding\x20h'+'alf-float\x20'+'values\x20int'+'o\x2032bit\x20ui'+'nts\x0a\x20\x20\x20\x20le'+'t\x20halfData'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_COLO'+'R_ANGLES_B'+'IAS});\x0a\x0a\x20\x20'+'\x20\x20//\x20store'+'\x20floats\x20we'+'\x20decode\x20la'+'ter\x20as\x20nee'+'ded\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.angle'+'sData\x20=\x20ha'+'lfData.z;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.biasesDat'+'a\x20=\x20halfDa'+'ta.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20decomp'+'ress\x20color'+'\x20half-floa'+'ts\x0a\x20\x20\x20\x20let'+'\x20colorRG:\x20'+'vec2f\x20=\x20un'+'pack2x16fl'+'oat(bitcas'+'t<u32>(hal'+'fData.x));'+'\x0a\x20\x20\x20\x20let\x20c'+'olorB_:\x20ve'+'c2f\x20=\x20unpa'+'ck2x16floa'+'t(bitcast<'+'u32>(halfD'+'ata.y));\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'color\x20=\x20ve'+'c3f(colorR'+'G,\x20colorB_'+'.x)\x20*\x20{LIG'+'HT_COLOR_D'+'IVIDER};\x0a\x0a'+'\x20\x20\x20\x20//\x20pos'+'ition\x20and\x20'+'range,\x20ful'+'l\x20floats\x0a\x20'+'\x20\x20\x20let\x20lig'+'htPosRange'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_POSI'+'TION_RANGE'+'});\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.posit')+('ion\x20=\x20ligh'+'tPosRange.'+'xyz;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.rang'+'e\x20=\x20lightP'+'osRange.w;'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'pot\x20direct'+'ion\x20&\x20flag'+'s\x20data\x0a\x20\x20\x20'+'\x20let\x20light'+'Dir_Flags:'+'\x20vec4f\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData.ligh'+'tIndex,\x20{C'+'LUSTER_TEX'+'TURE_DIREC'+'TION_FLAGS'+'});\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20directi'+'on\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.direct'+'ion\x20=\x20ligh'+'tDir_Flags'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x2032bit\x20'+'flags\x0a\x20\x20\x20\x20'+'let\x20flags_'+'uint:\x20u32\x20'+'=\x20bitcast<'+'u32>(light'+'Dir_Flags.'+'w);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20flags_u'+'int;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.isSp'+'ot\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2030u)'+')\x20!=\x200u;\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'shape\x20=\x20(f'+'lags_uint\x20'+'>>\x2028u)\x20&\x20'+'0x3u;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.fal'+'loffModeLi'+'near\x20=\x20(fl'+'ags_uint\x20&'+'\x20(1u\x20<<\x2027'+'u))\x20==\x200u;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.shadowIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x200'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.cookieIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x208'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.isDynami'+'c\x20=\x20(flags'+'_uint\x20&\x20(1'+'u\x20<<\x2022u))'+'\x20!=\x200u;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sLightmapp'+'ed\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2021u)'+')\x20!=\x200u;\x0a}'+'\x0a\x0afn\x20decod'+'eClusterLi'+'ghtSpot(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{')+('\x0a\x20\x20\x20\x20//\x20sp'+'ot\x20light\x20c'+'os\x20angles\x0a'+'\x20\x20\x20\x20let\x20an'+'gles:\x20vec2'+'f\x20=\x20unpack'+'2x16float('+'bitcast<u3'+'2>(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'OmniAtlasV'+'iewport(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.omniAtla'+'sViewport\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData.l'+'ightIndex,'+'\x20{CLUSTER_'+'TEXTURE_PR'+'OJ_MAT_0})'+'.xyz;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'AreaData(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>)\x20'+'{\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.halfWid'+'th\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a.lightInd'+'ex,\x20{CLUST'+'ER_TEXTURE'+'_AREA_DATA'+'_WIDTH}).x'+'yz;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.halfH'+'eight\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data.light'+'Index,\x20{CL'+'USTER_TEXT'+'URE_AREA_D'+'ATA_HEIGHT'+'}).xyz;\x0a}\x0a'+'\x0afn\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(cluster'+'LightData:'+'\x20ptr<funct'+'ion,\x20Clust'+'erLightDat'+'a>)\x20{\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'matrix\x0a\x20\x20\x20'+'\x20let\x20m0:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_0});\x0a\x20\x20\x20'+'\x20let\x20m1:\x20v')+('ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_1});\x0a\x20\x20\x20'+'\x20let\x20m2:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_2});\x0a\x20\x20\x20'+'\x20let\x20m3:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4x'+'4f(m0,\x20m1,'+'\x20m2,\x20m3);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightShadow'+'Data(clust'+'erLightDat'+'a:\x20ptr<fun'+'ction,\x20Clu'+'sterLightD'+'ata>)\x20{\x0a\x20\x20'+'\x20\x20//\x20shado'+'w\x20biases\x0a\x20'+'\x20\x20\x20let\x20bia'+'ses:\x20vec2f'+'\x20=\x20unpack2'+'x16float(b'+'itcast<u32'+'>(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'fn\x20decodeC'+'lusterLigh'+'tCookieDat'+'a(clusterL'+'ightData:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20extract'+'\x20channel\x20m'+'ask\x20from\x20f'+'lags\x0a\x20\x20\x20\x20l'+'et\x20cookieF'+'lags:\x20u32\x20'+'=\x20(cluster'+'LightData.'+'flags\x20>>\x202'+'3u)\x20&\x200x0F'+'u;\x20\x20//\x204bi'+'ts,\x20each\x20b'+'it\x20enables'+'\x20a\x20channel'+'\x0a\x20\x20\x20\x20let\x20m'+'ask_uvec:\x20'+'vec4<u32>\x20'+'=\x20vec4<u32'+'>(cookieFl'+'ags)\x20&\x20vec'+'4<u32>(1u,'+'\x202u,\x204u,\x208'+'u);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eChannelMa'+'sk\x20=\x20step('+'vec4f(1.0)')+(',\x20vec4f(ma'+'sk_uvec));'+'\x20//\x20Normal'+'ize\x20to\x200.0'+'\x20or\x201.0\x0a}\x0a'+'\x0afn\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20light:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>,\x0a\x20\x20\x20\x20wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20reflectio'+'nDir:\x20vec3'+'f,\x0a#if\x20def'+'ined(LIT_C'+'LEARCOAT)\x0a'+'\x20\x20\x20\x20clearc'+'oatReflect'+'ionDir:\x20ve'+'c3f,\x0a#endi'+'f\x0a\x20\x20\x20\x20glos'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20specular'+'ity:\x20vec3f'+',\x0a\x20\x20\x20\x20geom'+'etricNorma'+'l:\x20vec3f,\x0a'+'\x20\x20\x20\x20tbn:\x20m'+'at3x3f,\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a#e'+'ndif\x0a\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20clearco'+'at_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20s'+'heen_gloss'+':\x20f32,\x0a\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty:\x20f32\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ve'+'c3f(1.0);\x0a'+'\x20\x20\x20\x20var\x20di'+'ffuseAtten'+'uation:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20var\x20fal'+'loffAttenu'+'ation:\x20f32'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20omni\x20'+'part\x20of\x20th'+'e\x20light\x0a\x20\x20'+'\x20\x20let\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(l'+'ight.posit'+'ion);\x0a\x20\x20\x20\x20'+'let\x20lightD'+'irNormW:\x20v'+'ec3f\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20')+('handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20=\x20g'+'etFalloffL'+'inear(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'falloffAtt'+'enuation\x20='+'\x20getFallof'+'fInvSquare'+'d(light.ra'+'nge,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20if'+'\x20(falloffA'+'ttenuation'+'\x20>\x200.00001'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_AR'+'EALIGHTS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20!=\x20{LI'+'GHTSHAPE_P'+'UNCTUAL})\x20'+'{\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20handle\x20l'+'ight\x20shape'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20='+'=\x20{LIGHTSH'+'APE_RECT})'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getRectLig'+'htDiffuse('+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'W,\x20lightDi'+'rNormW)\x20*\x20'+'16.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20diffuseAt'+'tenuation\x20'+'=\x20getDiskL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x20{\x20/'+'/\x20sphere\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getS'+'phereLight'+'Diffuse(wo'+'rldNormal,'+'\x20viewDir,\x20'+'lightDirW,'+'\x20lightDirN'+'ormW)\x20*\x2016'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNormW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.is'+'Spot)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'decodeClus'+'terLightSp'+'ot(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getSp'+'otEffect(l'+'ight.direc'+'tion,\x20ligh'+'t.innerCon'+'eAngleCos,'+'\x20light.out'+'erConeAngl'+'eCos,\x20ligh'+'tDirNormW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(CLUSTER'+'_COOKIES)\x20'+'||\x20defined'+'(CLUSTER_S'+'HADOWS)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(falloffAt'+'tenuation\x20'+'>\x200.00001)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'hadow\x20/\x20co')+('okie\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'dowIntensi'+'ty\x20>\x200.0\x20|'+'|\x20light.co'+'okieIntens'+'ity\x20>\x200.0)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20shared\x20'+'shadow\x20/\x20c'+'ookie\x20data'+'\x20depends\x20o'+'n\x20light\x20ty'+'pe\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.i'+'sSpot)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ecodeClust'+'erLightPro'+'jectionMat'+'rixData(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20decodeClu'+'sterLightO'+'mniAtlasVi'+'ewport(lig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'TextureRes'+'olution:\x20f'+'32\x20=\x20unifo'+'rm.shadowA'+'tlasParams'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'EdgePixels'+':\x20f32\x20=\x20un'+'iform.shad'+'owAtlasPar'+'ams.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_C'+'OOKIES\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'cookieInte'+'nsity\x20>\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(light)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'!!!!!!!!!!'+'!\x20TEXTURE_'+'PASS\x20likel'+'y\x20needs\x20sa'+'mpler.\x20Ass'+'uming\x20cook'+'ieAtlasTex'+'tureSample'+'r\x20exists.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20cookie'+'Attenuatio'+'n\x20=\x20getCoo'+'kie2DClust'+'ered(cooki'+'eAtlasText'+'ure,\x20cooki'+'eAtlasText'+'ureSampler'+',\x20lightPro'+'jectionMat'+'rix,\x20vPosi'+'tionW,\x20lig')+('ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20!!!!!!!!'+'!!!\x20TEXTUR'+'E_PASS\x20lik'+'ely\x20needs\x20'+'sampler.\x20A'+'ssuming\x20co'+'okieAtlasT'+'extureSamp'+'ler\x20exists'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cook'+'ieAttenuat'+'ion\x20=\x20getC'+'ookieCubeC'+'lustered(c'+'ookieAtlas'+'Texture,\x20c'+'ookieAtlas'+'TextureSam'+'pler,\x20ligh'+'tDirW,\x20lig'+'ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask,\x20shado'+'wTextureRe'+'solution,\x20'+'shadowEdge'+'Pixels,\x20li'+'ght.omniAt'+'lasViewpor'+'t);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20CLUSTER_'+'SHADOWS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'adow\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(light'+'.shadowInt'+'ensity\x20>\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightShadow'+'Data(light'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowParams'+':\x20vec4f\x20=\x20'+'vec4f(shad'+'owTextureR'+'esolution,'+'\x20light.sha'+'dowNormalB'+'ias,\x20light'+'.shadowBia'+'s,\x201.0\x20/\x20l'+'ight.range'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot\x20sha'+'dow\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20shadowCo'+'ord:\x20vec3f'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat')+('rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20!!!!!'+'!!!!!!\x20SHA'+'DOWMAP_PAS'+'S\x20needs\x20te'+'xture\x20and\x20'+'sampler_co'+'mparison.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20!!!'+'!!!!!!!!\x20S'+'hadow\x20func'+'tions\x20need'+'\x20update\x20fo'+'r\x20WGSL\x20tex'+'tureSample'+'Compare\x20et'+'c.\x20Assumin'+'g\x20these\x20ar'+'e\x20handled\x20'+'in\x20include'+'s.\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'SpotCluste'+'redPCF1(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadow:\x20f32'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF3('+'shadowAtla'+'sTexture,\x20'+'shadowAtla'+'sTextureSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadow:\x20f'+'32\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'5(shadowAt'+'lasTexture'+',\x20shadowAt'+'lasTexture'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCSS)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l')+('et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CSS(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20fallo'+'ffAttenuat'+'ion\x20*\x20mix('+'1.0,\x20shado'+'w,\x20light.s'+'hadowInten'+'sity);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20omni\x20'+'shadow\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalOffset'+'PointShado'+'w(shadowPa'+'rams,\x20ligh'+'t.position'+',\x20lightDir'+'W,\x20lightDi'+'rNormW,\x20ge'+'ometricNor'+'mal);\x20\x20//\x20'+'normalBias'+'\x20adjusted\x20'+'for\x20distan'+'ce\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20!!!!!!!!!'+'!!\x20SHADOWM'+'AP_PASS\x20ne'+'eds\x20textur'+'e\x20and\x20samp'+'ler_compar'+'ison.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20!!!!!!!'+'!!!!\x20Shado'+'w\x20function'+'s\x20need\x20upd'+'ate\x20for\x20WG'+'SL\x20texture'+'SampleComp'+'are\x20etc.\x20A'+'ssuming\x20th'+'ese\x20are\x20ha'+'ndled\x20in\x20i'+'ncludes.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCF1)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowOmni'+'ClusteredP'+'CF1(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowPar'+'ams,\x20light'+'.omniAtlas'+'Viewport,\x20'+'shadowEdge'+'Pixels,\x20di'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20getSha'+'dowOmniClu'+'steredPCF3'+'(shadowAtl'+'asTexture,'+'\x20shadowAtl'+'asTextureS'+'ampler,\x20sh'+'adowParams'+',\x20light.om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'OmniCluste'+'redPCF5(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20areaDif'+'fuse:\x20vec3'+'f\x20=\x20(diffu'+'seAttenuat'+'ion\x20*\x20fall'+'offAttenua'+'tion)\x20*\x20li')+('ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaDi'+'ffuse\x20=\x20mi'+'x(areaDiff'+'use,\x20vec3f'+'(0.0),\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20diff'+'use\x20-\x20it\x20d'+'oes\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20areaDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20areaL'+'ightSpecul'+'ar:\x20f32;\x20/'+'/\x20Use\x20var\x20'+'because\x20as'+'signed\x20in\x20'+'if/else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_RECT'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getRe'+'ctLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20if\x20(ligh'+'t.shape\x20=='+'\x20{LIGHTSHA'+'PE_DISK})\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecular\x20'+'=\x20getDiskL'+'ightSpecul'+'ar(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x20//\x20sphere'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20areaLight'+'Specular\x20='+'\x20getSphere'+'LightSpecu')+('lar(worldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20dLTC'+'SpecFres\x20*'+'\x20areaLight'+'Specular\x20*'+'\x20falloffAt'+'tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sp'+'ecular\x20cle'+'ar\x20coat\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20areaLigh'+'tSpecularC'+'C:\x20f32;\x20//'+'\x20Use\x20var\x20b'+'ecause\x20ass'+'igned\x20in\x20i'+'f/else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20==\x20{LI'+'GHTSHAPE_R'+'ECT})\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecularC'+'C\x20=\x20getRec'+'tLightSpec'+'ular(clear'+'coat_world'+'Normal,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecularCC\x20='+'\x20getDiskLi'+'ghtSpecula'+'r(clearcoa'+'t_worldNor'+'mal,\x20viewD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20{\x20//\x20sph'+'ere\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getSphereL'+'ightSpecul'+'ar(clearco'+'at_worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'cSpecularL'+'ight\x20=\x20ccS'+'pecularLig'+'ht\x20+\x20ccLTC'+'SpecFres\x20*'+'\x20areaLight'+'SpecularCC'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20\x20*\x20c'+'ookieAtten')+('uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20punctual'+'\x20light\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20p'+'unctualDif'+'fuse:\x20vec3'+'f\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_AREAL'+'IGHTS)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'unctualDif'+'fuse\x20=\x20mix'+'(punctualD'+'iffuse,\x20ve'+'c3f(0.0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20=\x20dDiffus'+'eLight\x20+\x20p'+'unctualDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Dir:\x20vec3f'+'\x20=\x20normali'+'ze(-lightD'+'irNormW\x20+\x20'+'viewDir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specular\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR_FRESN'+'EL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20=\x20'+'dSpecularL'+'ight\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD')+('ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20halfD'+'ir),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecularity\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'=\x20ccSpecul'+'arLight\x20+\x20'+'getLightSp'+'ecular(hal'+'fDir,\x20clea'+'rcoatRefle'+'ctionDir,\x20'+'clearcoat_'+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'NormW,\x20cle'+'arcoat_glo'+'ss,\x20tbn)\x20*'+'\x20falloffAt')+('tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion\x20*\x20getF'+'resnelCC(d'+'ot(viewDir'+',\x20halfDir)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20='+'\x20ccSpecula'+'rLight\x20+\x20g'+'etLightSpe'+'cular(half'+'Dir,\x20clear'+'coatReflec'+'tionDir,\x20c'+'learcoat_w'+'orldNormal'+',\x20viewDir,'+'\x20lightDirN'+'ormW,\x20clea'+'rcoat_glos'+'s,\x20tbn)\x20*\x20'+'falloffAtt'+'enuation\x20*'+'\x20light.col'+'or\x20*\x20cooki'+'eAttenuati'+'on;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'+\x20getLight'+'SpecularSh'+'een(halfDi'+'r,\x20worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'sheen_glos'+'s)\x20*\x20fallo'+'ffAttenuat'+'ion\x20*\x20ligh'+'t.color\x20*\x20'+'cookieAtte'+'nuation;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20Writ'+'e\x20to\x20globa'+'l\x20attenuat'+'ion\x20values'+'\x20(for\x20ligh'+'tmapper)\x0a\x20'+'\x20\x20\x20dAtten\x20'+'=\x20falloffA'+'ttenuation'+';\x0a\x20\x20\x20\x20dLig'+'htDirNormW'+'\x20=\x20lightDi'+'rNormW;\x0a}\x0a'+'\x0a\x0afn\x20evalu'+'ateCluster'+'Light(\x0a\x20\x20\x20'+'\x20lightInde'+'x:\x20f32,\x0a\x20\x20'+'\x20\x20worldNor'+'mal:\x20vec3f'+',\x0a\x20\x20\x20\x20view'+'Dir:\x20vec3f'+',\x0a\x20\x20\x20\x20refl'+'ectionDir:'+'\x20vec3f,\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20c'+'learcoatRe'+'flectionDi'+'r:\x20vec3f,\x0a'+'#endif\x0a\x20\x20\x20')+('\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20geometric'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20t'+'bn:\x20mat3x3'+'f,\x0a#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20clearc'+'oat_worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20cl'+'earcoat_gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20sheen_'+'gloss:\x20f32'+',\x0a\x20\x20\x20\x20irid'+'escence_in'+'tensity:\x20f'+'32\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20decod'+'e\x20core\x20lig'+'ht\x20data\x20fr'+'om\x20texture'+'s\x0a\x20\x20\x20\x20var\x20'+'clusterLig'+'htData:\x20Cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(&cluste'+'rLightData'+',\x20lightInd'+'ex);\x0a\x0a\x20\x20\x20\x20'+'//\x20evaluat'+'e\x20light\x20if'+'\x20it\x20uses\x20a'+'ccepted\x20li'+'ght\x20mask\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'acceptLigh'+'tMask:\x20boo'+'l\x20=\x20cluste'+'rLightData'+'.isDynamic'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20accept'+'LightMask:'+'\x20bool\x20=\x20cl'+'usterLight'+'Data.isLig'+'htmapped;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'acceptLigh'+'tMask)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20eva'+'luateLight'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20&clust'+'erLightDat'+'a,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'viewDir,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20reflectio'+'nDir,\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20geometri'+'cNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20tbn,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE')+('NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_worl'+'dNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'sheen_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a\x0a\x0afn'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20world'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20v'+'iewDir:\x20ve'+'c3f,\x0a\x20\x20\x20\x20r'+'eflectionD'+'ir:\x20vec3f,'+'\x0a#if\x20defin'+'ed(LIT_CLE'+'ARCOAT)\x0a\x20\x20'+'\x20\x20clearcoa'+'tReflectio'+'nDir:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'specularit'+'y:\x20vec3f,\x0a'+'\x20\x20\x20\x20geomet'+'ricNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20tbn:\x20mat'+'3x3f,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a#end'+'if\x0a\x20\x20\x20\x20cle'+'arcoat_wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20clearcoat'+'_gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20she'+'en_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20i'+'ridescence'+'_intensity'+':\x20f32\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20sk'+'ip\x20lights\x20'+'if\x20no\x20ligh'+'ts\x20at\x20all\x0a'+'\x20\x20\x20\x20if\x20(un'+'iform.clus'+'terSkip\x20>\x20'+'0.5)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x20to'+'\x203d\x20intege'+'r\x20cell\x20cor'+'dinates\x20in'+'\x20the\x20clust'+'er\x20structu'+'re\x0a\x20\x20\x20\x20let'+'\x20cellCoord'+'s:\x20vec3f\x20='+'\x20floor((vP'+'ositionW\x20-'+'\x20uniform.c'+'lusterBoun'+'dsMin)\x20*\x20u'+'niform.clu'+'sterCellsC'+'ountByBoun'+'dsSize);\x0a\x0a'+'\x20\x20\x20\x20//\x20no\x20'+'lighting\x20w'+'hen\x20cell\x20c'+'oordinate\x20'+'is\x20out\x20of\x20'+'range\x0a\x20\x20\x20\x20'+'if\x20(!(any('+'cellCoords')+('\x20<\x20vec3f(0'+'.0))\x20||\x20an'+'y(cellCoor'+'ds\x20>=\x20unif'+'orm.cluste'+'rCellsMax)'+'))\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cel'+'l\x20index\x20(m'+'apping\x20fro'+'m\x203d\x20cell\x20'+'coordinate'+'s\x20to\x20linea'+'r\x20memory)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20cellInde'+'x:\x20f32\x20=\x20d'+'ot(uniform'+'.clusterCe'+'llsDot,\x20ce'+'llCoords);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20convert'+'\x20cell\x20inde'+'x\x20to\x20uv\x20co'+'ordinates\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20clusterV'+':\x20f32\x20=\x20fl'+'oor(cellIn'+'dex\x20*\x20unif'+'orm.cluste'+'rTextureSi'+'ze.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20c'+'lusterU:\x20f'+'32\x20=\x20cellI'+'ndex\x20-\x20(cl'+'usterV\x20*\x20u'+'niform.clu'+'sterTextur'+'eSize.x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20loop\x20ove'+'r\x20maximum\x20'+'number\x20of\x20'+'light\x20cell'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'for\x20(var\x20l'+'ightCellIn'+'dex:\x20i32\x20='+'\x200;\x20lightC'+'ellIndex\x20<'+'\x20uniform.c'+'lusterMaxC'+'ells;\x20ligh'+'tCellIndex'+'\x20=\x20lightCe'+'llIndex\x20+\x20'+'1)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20using\x20a\x20s'+'ingle\x20chan'+'nel\x20textur'+'e\x20with\x20dat'+'a\x20in\x20red\x20c'+'hannel\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20lightIn'+'dexPacked:'+'\x20f32\x20=\x20tex'+'tureLoad(c'+'lusterWorl'+'dTexture,\x20'+'vec2<i32>('+'i32(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20i32(clus'+'terV)),\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(lightInde'+'xPacked\x20<='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20break;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ev'+'aluateClus'+'terLight(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tIndexPack'+'ed\x20*\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20vie'+'wDir,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'eometricNo'+'rmal,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20tbn,\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coat_world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20clearc'+'oat_gloss,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20she'+'en_gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a}'),M2='\x0afn\x20combin'+'eColor(alb'+'edo:\x20vec3f'+',\x20sheenSpe'+'cularity:\x20'+'vec3f,\x20cle'+'arcoatSpec'+'ularity:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20ret:\x20ve'+'c3f\x20=\x20vec3'+'f(0.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ret\x20=\x20'+'ret\x20+\x20((dD'+'iffuseLigh'+'t\x20-\x20unifor'+'m.light_gl'+'obalAmbien'+'t)\x20*\x20albed'+'o\x20+\x20unifor'+'m.material'+'_ambient\x20*'+'\x20uniform.l'+'ight_globa'+'lAmbient);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(albedo\x20*'+'\x20dDiffuseL'+'ight);\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_OLD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20dSpecular'+'Light;\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(dReflect'+'ion.rgb\x20*\x20'+'dReflectio'+'n.a);\x0a\x20\x20\x20\x20'+'#endif\x20//\x20'+'LIT_REFLEC'+'TIONS\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'sheenScali'+'ng:\x20f32\x20=\x20'+'1.0\x20-\x20max('+'max(sheenS'+'pecularity'+'.r,\x20sheenS'+'pecularity'+'.g),\x20sheen'+'Specularit'+'y.b)\x20*\x200.1'+'57;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20sheenS'+'caling\x20+\x20('+'sSpecularL'+'ight\x20+\x20sRe'+'flection.r'+'gb)\x20*\x20shee'+'nSpeculari'+'ty;\x0a\x20\x20\x20\x20#e'+'ndif\x20//\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20clear'+'CoatScalin'+'g:\x20f32\x20=\x201'+'.0\x20-\x20ccFre'+'snel\x20*\x20cle'+'arcoatSpec'+'ularity;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'\x20=\x20ret\x20*\x20c'+'learCoatSc'+'aling\x20+\x20(c'+'cSpecularL'+'ight\x20+\x20ccR'+'eflection)'+('\x20*\x20clearco'+'atSpecular'+'ity;\x0a\x20\x20\x20\x20#'+'endif\x20//\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20re'+'turn\x20ret;\x0a'+'}\x0a'),I2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x0a\x20\x20\x20\x20'+'var\x20blitTe'+'xture:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20blitText'+'ureSampler'+'\x20:\x20sampler'+';\x0a\x0a\x20\x20\x20\x20@fr'+'agment\x0a\x20\x20\x20'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20t'+'extureSamp'+'le(blitTex'+'ture,\x20blit'+'TextureSam'+'pler,\x20inpu'+'t.uv0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20}\x0a',D2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20u'+'niform\x20inv'+'ViewProj:\x20'+'mat4x4<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'re:\x20textur'+'e_cube<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'reSampler\x20'+':\x20sampler;'+'\x0a\x0a\x20\x20\x20\x20@fra'+'gment\x0a\x20\x20\x20\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20pro'+'jPos\x20=\x20vec'+'4f(input.u'+'v0\x20*\x202.0\x20-'+'\x201.0,\x200.5,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20w'+'orldPos\x20=\x20'+'uniform.in'+'vViewProj\x20'+'*\x20projPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20textur'+'eSample(bl'+'itTexture,'+'\x20blitTextu'+'reSampler,'+'\x20worldPos.'+'xyz);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20}\x0a',L2='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.uv0.y'+'\x20=\x201.0\x20-\x20o'+'utput.uv0.'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',R2='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMin:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMax:\x20v'+'ec3f;\x0a#end'+'if\x0a\x0afn\x20cub'+'eMapProjec'+'t(nrdir:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20cubeMapR'+'otate(nrdi'+'r);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIT_CU'+'BEMAP_PROJ'+'ECTION\x20==\x20'+'BOX\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20nrd'+'ir_rotated'+':\x20vec3f\x20=\x20'+'cubeMapRot'+'ate(nrdir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20rbmax'+':\x20vec3f\x20=\x20'+'(uniform.e'+'nvBoxMax\x20-'+'\x20vPosition'+'W)\x20/\x20nrdir'+'_rotated;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20rbmin:\x20v'+'ec3f\x20=\x20(un'+'iform.envB'+'oxMin\x20-\x20vP'+'ositionW)\x20'+'/\x20nrdir_ro'+'tated;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'rbminmax:\x20'+'vec3f\x20=\x20se'+'lect(rbmin'+',\x20rbmax,\x20n'+'rdir_rotat'+'ed\x20>\x20vec3f'+'(0.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'fa:\x20f32\x20=\x20'+'min(min(rb'+'minmax.x,\x20'+'rbminmax.y'+'),\x20rbminma'+'x.z);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20p'+'osonbox:\x20v'+'ec3f\x20=\x20vPo'+'sitionW\x20+\x20'+'nrdir_rota'+'ted\x20*\x20fa;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20envBoxPo'+'s:\x20vec3f\x20='+'\x20(uniform.'+'envBoxMin\x20'+'+\x20uniform.'+'envBoxMax)'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20normali'+'ze(posonbo'+'x\x20-\x20envBox'+'Pos);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',O2='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20cubeMap'+'RotationMa'+'trix:\x20mat3'+'x3f;\x0a#endi'+'f\x0a\x0afn\x20cube'+'MapRotate('+'refDir:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a#ifd'+'ef\x20CUBEMAP'+'_ROTATION\x0a'+'\x20\x20\x20\x20return'+'\x20refDir\x20*\x20'+'uniform.cu'+'beMapRotat'+'ionMatrix;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir;\x0a#end'+'if\x0a}\x0a',F2='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0aoutp'+'ut.color\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0aoutput.co'+'lor\x20=\x20vec4'+'f(litArgs_'+'albedo\x20,\x201'+'.0);\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'DEBUG_WORL'+'D_NORMAL_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(litAr'+'gs_worldNo'+'rmal\x20*\x200.5'+'\x20+\x200.5,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_OPACI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_opacity'+')\x20,\x201.0);\x0a'+'#endif\x0a\x0a#i'+'fdef\x20DEBUG'+'_SPECULARI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(l'+'itArgs_spe'+'cularity,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_GLO'+'SS_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_gloss)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_M'+'ETALNESS_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(vec3f'+'(litArgs_m'+'etalness)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_A'+'O_PASS\x0aout'+'put.color\x20'+'=\x20vec4f(ve'+'c3f(litArg'+'s_ao)\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_EMISS'+'ION_PASS\x0ao'+'utput.colo'+'r\x20=\x20vec4f('+'gammaCorre'+'ctOutput(l'+'itArgs_emi'+'ssion),\x201.'+'0);\x0a#endif'+'\x0a',N2='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0a\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20v'+'ec3f(0.5);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0a#ifdef\x20VA'+'RYING_VUV0'+'\x0a\x20\x20\x20\x20litAr'+'gs_albedo\x20'+'=\x20vec3f(vU'+'v0,\x200.0);\x0a'+'#else\x0a\x20\x20\x20\x20'+'litArgs_al'+'bedo\x20=\x20vec'+'3f(0.0);\x0a#'+'endif\x0a#end'+'if\x0a',k2='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0afn\x20de'+'codeLinear'+'(raw:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20raw.r'+'gb;\x0a}\x0a\x0afn\x20'+'decodeGamm'+'aFloat(raw'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20pow'+'(raw,\x202.2)'+';\x0a}\x0a\x0afn\x20de'+'codeGamma3'+'(raw:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(r'+'aw,\x20vec3f('+'2.2));\x0a}\x0a\x0a'+'fn\x20decodeG'+'amma(raw:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow(raw.xyz'+',\x20vec3f(2.'+'2));\x0a}\x0a\x0afn'+'\x20decodeRGB'+'M(raw:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20color\x20='+'\x20(8.0\x20*\x20ra'+'w.a)\x20*\x20raw'+'.rgb;\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0afn\x20de'+'codeRGBP(r'+'aw:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20ra'+'w.rgb\x20*\x20(-'+'raw.a\x20*\x207.'+'0\x20+\x208.0);\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0af'+'n\x20decodeRG'+'BE(raw:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(vec3f('+'0.0),\x20raw.'+'xyz\x20*\x20pow('+'2.0,\x20raw.w'+'\x20*\x20255.0\x20-'+'\x20128.0),\x20r'+'aw.a\x20!=\x200.'+'0);\x0a}\x0a\x0afn\x20'+'passThroug'+'h(raw:\x20vec'+'4f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw;'+'\x0a}\x0a\x0afn\x20unp'+'ackNormalX'+'YZ(nmap:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20nm'+'ap.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'}\x0a\x0afn\x20unpa'+'ckNormalXY'+'(nmap:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20xy\x20=\x20nm'+'ap.wy\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'vec3f(xy,\x20'+'sqrt(1.0\x20-'+'\x20clamp(dot'+'(xy,\x20xy),\x20'+'0.0,\x201.0))'+');\x0a}\x0a\x0a#end'+'if\x0a',U2='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0afn\x20de'+'tailMode_m'+'ul(c1:\x20vec'+'3f,\x20c2:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20c1\x20'+'*\x20c2;\x0a}\x0a\x0af'+'n\x20detailMo'+'de_add(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20c1\x20+\x20c2;\x0a'+'}\x0a\x0a//\x20http'+'s://en.wik'+'ipedia.org'+'/wiki/Blen'+'d_modes#Sc'+'reen\x0afn\x20de'+'tailMode_s'+'creen(c1:\x20'+'vec3f,\x20c2:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'1.0\x20-\x20(1.0'+'\x20-\x20c1)*(1.'+'0\x20-\x20c2);\x0a}'+'\x0a\x0a//\x20https'+'://en.wiki'+'pedia.org/'+'wiki/Blend'+'_modes#Ove'+'rlay\x0afn\x20de'+'tailMode_o'+'verlay(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20mix(1.0\x20-'+'\x202.0\x20*\x20(1.'+'0\x20-\x20c1)*(1'+'.0\x20-\x20c2),\x20'+'2.0\x20*\x20c1\x20*'+'\x20c2,\x20step('+'c1,\x20vec3f('+'0.5)));\x0a}\x0a'+'\x0afn\x20detail'+'Mode_min(c'+'1:\x20vec3f,\x20'+'c2:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20min(c1,'+'\x20c2);\x0a}\x0a\x0af'+'n\x20detailMo'+'de_max(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(c1,\x20c'+'2);\x0a}\x0a\x0a#en'+'dif\x0a',B2='\x0auniform\x20m'+'aterial_di'+'ffuse:\x20vec'+'3f;\x0a\x0a#ifde'+'f\x20STD_DIFF'+'USEDETAIL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22detailMo'+'desPS\x22\x0a#en'+'dif\x0a\x0afn\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20unif'+'orm.materi'+'al_diffuse'+'.rgb;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoText'+'ure:\x20vec3f'+'\x20=\x20{STD_DI'+'FFUSE_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_DIFFU'+'SE_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'_TEXTURE_N'+'AME}Sample'+'r,\x20{STD_DI'+'FFUSE_TEXT'+'URE_UV},\x20u'+'niform.tex'+'tureBias))'+'.{STD_DIFF'+'USE_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoDeta'+'il:\x20vec3f\x20'+'=\x20{STD_DIF'+'FUSEDETAIL'+'_TEXTURE_D'+'ECODE}(tex'+'tureSample'+'Bias({STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_NAME},\x20{'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_DIFFU'+'SEDETAIL_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20=\x20dAlbe'+'do\x20*\x20albed'+'oTexture;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_DIF'+'FUSE_VERTE'+'X\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAlbedo\x20=\x20'+'dAlbedo\x20*\x20'+'gammaCorre'+'ctInputVec'+'3(saturate'+'3(vVertexC'+'olor.{STD_'+('DIFFUSE_VE'+'RTEX_CHANN'+'EL}));\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),z2='\x0auniform\x20m'+'aterial_em'+'issive:\x20ve'+'c3f;\x0aunifo'+'rm\x20materia'+'l_emissive'+'Intensity:'+'\x20f32;\x0a\x0afn\x20'+'getEmissio'+'n()\x20{\x0a\x20\x20\x20\x20'+'dEmission\x20'+'=\x20uniform.'+'material_e'+'missive\x20*\x20'+'uniform.ma'+'terial_emi'+'ssiveInten'+'sity;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_EMISSIVE'+'_TEXTURE\x0a\x20'+'\x20\x20\x20dEmissi'+'on\x20*=\x20{STD'+'_EMISSIVE_'+'TEXTURE_DE'+'CODE}(text'+'ureSampleB'+'ias({STD_E'+'MISSIVE_TE'+'XTURE_NAME'+'},\x20{STD_EM'+'ISSIVE_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_EMISSI'+'VE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias)).{S'+'TD_EMISSIV'+'E_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_VERT'+'EX\x0a\x20\x20\x20\x20dEm'+'ission\x20=\x20d'+'Emission\x20*'+'\x20gammaCorr'+'ectInputVe'+'c3(saturat'+'e3(vVertex'+'Color.{STD'+'_EMISSIVE_'+'VERTEX_CHA'+'NNEL}));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',V2='\x0afn\x20encode'+'Linear(sou'+'rce:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'source,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeGamm'+'a(source:\x20'+'vec3f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4f(pow(s'+'ource\x20+\x20ve'+'c3f(0.0000'+'001),\x20vec3'+'f(1.0\x20/\x202.'+'2)),\x201.0);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBM(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+'r\x20color:\x20v'+'ec3f\x20=\x20pow'+'(source,\x20v'+'ec3f(0.5))'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x201.0\x20/'+'\x208.0;\x0a\x0a\x20\x20\x20'+'\x20var\x20a:\x20f3'+'2\x20=\x20satura'+'te(max(max'+'(color.r,\x20'+'color.g),\x20'+'max(color.'+'b,\x201.0\x20/\x202'+'55.0)));\x0a\x20'+'\x20\x20\x20a\x20=\x20cei'+'l(a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20col'+'or\x20/=\x20a;\x0a\x20'+'\x20\x20\x20return\x20'+'vec4f(colo'+'r,\x20a);\x0a}\x0a\x0a'+'fn\x20encodeR'+'GBP(source'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20//\x20con'+'vert\x20incom'+'ing\x20linear'+'\x20to\x20gamma('+'ish)\x0a\x20\x20\x20\x20v'+'ar\x20gamma:\x20'+'vec3f\x20=\x20po'+'w(source,\x20'+'vec3f(0.5)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20the\x20maxim'+'um\x20compone'+'nt\x20clamped'+'\x20to\x201..8\x0a\x20'+'\x20\x20\x20var\x20max'+'Val:\x20f32\x20='+'\x20min(8.0,\x20'+'max(1.0,\x20m'+'ax(gamma.x'+',\x20max(gamm'+'a.y,\x20gamma'+'.z))));\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20stor'+'age\x20factor'+'\x0a\x20\x20\x20\x20var\x20v'+':\x20f32\x20=\x201.'+'0\x20-\x20((maxV'+'al\x20-\x201.0)\x20'+'/\x207.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20roun'+'d\x20the\x20valu'+'e\x20for\x20stor'+'age\x20in\x208bi'+'t\x20channel\x0a'+'\x20\x20\x20\x20v\x20=\x20ce'+'il(v\x20*\x20255'+'.0)\x20/\x20255.'+'0;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(gamma\x20/\x20('+'-v\x20*\x207.0\x20+'+'\x208.0),\x20v);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBE(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+('r\x20maxVal:\x20'+'f32\x20=\x20max('+'source.x,\x20'+'max(source'+'.y,\x20source'+'.z));\x0a\x20\x20\x20\x20'+'if\x20(maxVal'+'\x20<\x201e-32)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+':\x20f32\x20=\x20ce'+'il(log2(ma'+'xVal));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(s'+'ource\x20/\x20po'+'w(2.0,\x20e),'+'\x20(e\x20+\x20128.'+'0)\x20/\x20255.0'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a'),G2='\x0a\x20\x20\x20\x20var\x20f'+'inalRgb:\x20v'+'ec3f\x20=\x20com'+'bineColor('+'litArgs_al'+'bedo,\x20litA'+'rgs_sheen_'+'specularit'+'y,\x20litArgs'+'_clearcoat'+'_speculari'+'ty);\x0a\x0a\x20\x20\x20\x20'+'finalRgb\x20='+'\x20finalRgb\x20'+'+\x20litArgs_'+'emission;\x0a'+'\x20\x20\x20\x20finalR'+'gb\x20=\x20addFo'+'g(finalRgb'+');\x0a\x20\x20\x20\x20fin'+'alRgb\x20=\x20to'+'neMap(fina'+'lRgb);\x0a\x20\x20\x20'+'\x20finalRgb\x20'+'=\x20gammaCor'+'rectOutput'+'(finalRgb)'+';\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(fin'+'alRgb,\x20out'+'put.color.'+'a);\x0a',H2='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20atla'+'sSize\x20:\x20f3'+'2\x20=\x20512.0;'+'\x0aconst\x20sea'+'mSize\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0afn\x20mapU'+'v(uv\x20:\x20vec'+'2f,\x20rect\x20:'+'\x20vec4f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec2f(mix('+'rect.x\x20+\x20s'+'eamSize,\x20r'+'ect.x\x20+\x20re'+'ct.z\x20-\x20sea'+'mSize,\x20uv.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20mix(rect.'+'y\x20+\x20seamSi'+'ze,\x20rect.y'+'\x20+\x20rect.w\x20'+'-\x20seamSize'+',\x20uv.y));\x0a'+'}\x0a\x0a//\x20map\x20'+'a\x20normaliz'+'ed\x20equirec'+'t\x20UV\x20and\x20r'+'oughness\x20l'+'evel\x20to\x20th'+'e\x20correct\x20'+'atlas\x20rect'+'.\x0afn\x20mapRo'+'ughnessUv('+'uv\x20:\x20vec2f'+',\x20level\x20:\x20'+'f32)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20t\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'exp2(level'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mapUv('+'uv,\x20vec4f('+'0.0,\x201.0\x20-'+'\x20t,\x20t,\x20t\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20map\x20sh'+'iny\x20level\x20'+'UV\x0afn\x20mapS'+'hinyUv(uv\x20'+':\x20vec2f,\x20l'+'evel\x20:\x20f32'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20t\x20:\x20f32\x20='+'\x201.0\x20/\x20exp'+'2(level);\x0a'+'\x20\x20\x20\x20return'+'\x20mapUv(uv,'+'\x20vec4f(1.0'+'\x20-\x20t,\x201.0\x20'+'-\x20t,\x20t,\x20t\x20'+'*\x200.5));\x0a}'+'\x0a\x0a#endif\x0a',W2='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20skyboxInt'+'ensity\x20:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20proce'+'ssEnvironm'+'ent(color\x20'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20unifo'+'rm.skyboxI'+'ntensity;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',$2='\x0afn\x20getFal'+'loffWindow'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20sqrDist'+':\x20f32\x20=\x20do'+'t(lightDir'+',\x20lightDir'+');\x0a\x20\x20\x20\x20let'+'\x20invRadius'+':\x20f32\x20=\x201.'+'0\x20/\x20lightR'+'adius;\x0a\x20\x20\x20'+'\x20return\x20sq'+'uare(satur'+'ate(1.0\x20-\x20'+'square(sqr'+'Dist\x20*\x20squ'+'are(invRad'+'ius))));\x0a}'+'\x0a\x0afn\x20getFa'+'lloffInvSq'+'uared(ligh'+'tRadius:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20sq'+'rDist:\x20f32'+'\x20=\x20dot(lig'+'htDir,\x20lig'+'htDir);\x0a\x20\x20'+'\x20\x20var\x20fall'+'off:\x20f32\x20='+'\x201.0\x20/\x20(sq'+'rDist\x20+\x201.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20invRadiu'+'s:\x20f32\x20=\x201'+'.0\x20/\x20light'+'Radius;\x0a\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x20square('+'saturate(1'+'.0\x20-\x20squar'+'e(sqrDist\x20'+'*\x20square(i'+'nvRadius))'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20fall'+'off;\x0a}\x0a',X2='\x0afn\x20getFal'+'loffLinear'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20length(l'+'ightDir);\x0a'+'\x20\x20\x20\x20return'+'\x20max(((lig'+'htRadius\x20-'+'\x20d)\x20/\x20ligh'+'tRadius),\x20'+'0.0);\x0a}\x0a',q2='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x20re'+'presentati'+'on\x20(0.0-1.'+'0\x20range)\x0af'+'n\x20float2ui'+'nt(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20intBit'+'s\x20=\x20bitcas'+'t<u32>(val'+'ue);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20f32((intB'+'its\x20>>\x2024u'+')\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((intBi'+'ts\x20>>\x2016u)'+'\x20&\x200xffu),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((intBit'+'s\x20>>\x208u)\x20&'+'\x200xffu),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20f32'+'(intBits\x20&'+'\x200xffu)\x0a\x20\x20'+'\x20\x20)\x20/\x20255.'+'0;\x0a}\x0a\x0a//\x20d'+'ecode\x20RGBA'+'8\x20value\x20to'+'\x20float\x0afn\x20'+'uint2float'+'(value:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20rgba_u32'+'\x20=\x20vec4<u3'+'2>(value\x20*'+'\x20255.0);\x0a\x20'+'\x20\x20\x20let\x20int'+'Bits:\x20u32\x20'+'=\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'r\x20<<\x2024u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'g\x20<<\x2016u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'b\x20<<\x208u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20rgba_u32.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20bitcas'+'t<f32>(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0af'+'n\x20float2ve'+'c4(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CAPS_TEX'+'TURE_FLOAT'+'_RENDERABL'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(value,'+'\x201.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20float2ui'+'nt(value);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0a#endi'+'f\x20//\x20FLOAT'+'_AS_UINT\x0a',j2='\x0a\x0avar<priv'+'ate>\x20dBlen'+'dModeFogFa'+'ctor\x20:\x20f32'+'\x20=\x201.0;\x0a\x0a#'+'if\x20(FOG\x20!='+'\x20NONE)\x0a\x20\x20\x20'+'\x20uniform\x20f'+'og_color\x20:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20fog_sta'+'rt\x20:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20fog_'+'end\x20:\x20f32;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20fog'+'_density\x20:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afn\x20ge'+'tFogFactor'+'()\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20depth\x20=\x20p'+'cPosition.'+'z\x20/\x20pcPosi'+'tion.w;\x0a\x0a\x20'+'\x20\x20\x20var\x20fog'+'Factor\x20:\x20f'+'32\x20=\x200.0;\x0a'+'\x0a\x20\x20\x20\x20#if\x20('+'FOG\x20==\x20LIN'+'EAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20(unif'+'orm.fog_en'+'d\x20-\x20depth)'+'\x20/\x20(unifor'+'m.fog_end\x20'+'-\x20uniform.'+'fog_start)'+';\x0a\x20\x20\x20\x20#eli'+'f\x20(FOG\x20==\x20'+'EXP)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20exp(-'+'depth\x20*\x20un'+'iform.fog_'+'density);\x0a'+'\x20\x20\x20\x20#elif\x20'+'(FOG\x20==\x20EX'+'P2)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fogFacto'+'r\x20=\x20exp(-d'+'epth\x20*\x20dep'+'th\x20*\x20unifo'+'rm.fog_den'+'sity\x20*\x20uni'+'form.fog_d'+'ensity);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(fo'+'gFactor,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0afn\x20addF'+'og(color\x20:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'uniform.fo'+'g_color\x20*\x20'+'dBlendMode'+'FogFactor,'+'\x20color,\x20ge'+'tFogFactor'+'());\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'color;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',Y2='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0afn'+'\x20getFresne'+'l(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20cosTheta:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y:\x20f32\x0a\x20\x20\x20'+'\x20#endif\x0a)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20f'+'resnel:\x20f3'+'2\x20=\x20pow(1.'+'0\x20-\x20satura'+'te(cosThet'+'a),\x205.0);\x0a'+'\x20\x20\x20\x20let\x20gl'+'ossSq:\x20f32'+'\x20=\x20gloss\x20*'+'\x20gloss;\x0a\x20\x20'+'\x20\x20let\x20ret:'+'\x20vec3f\x20=\x20s'+'pecularity'+'\x20+\x20(max(ve'+'c3f(glossS'+'q),\x20specul'+'arity)\x20-\x20s'+'pecularity'+')\x20*\x20fresne'+'l;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20mix(ret,'+'\x20iridescen'+'ceFresnel,'+'\x20iridescen'+'ceIntensit'+'y);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20r'+'et;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0afn'+'\x20getFresne'+'lCC(cosThe'+'ta:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20fres'+'nel:\x20f32\x20='+'\x20pow(1.0\x20-'+'\x20saturate('+'cosTheta),'+'\x205.0);\x0a\x20\x20\x20'+'\x20return\x200.'+'04\x20+\x20(1.0\x20'+'-\x200.04)\x20*\x20'+'fresnel;\x0a}',K2='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x0avary'+'ing\x20vUv0:\x20'+'vec2f;\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4f(inpu'+'t.vertex_p'+'osition,\x200'+'.5,\x201.0);\x0a'+'\x20\x20\x20\x20output'+'.vUv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x20vec2f(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',Z2='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInput(c'+'olor:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGammaFloa'+'t(color);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20fn\x20gammaC'+'orrectInpu'+'tVec3(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20deco'+'deGamma3(c'+'olor);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInputVe'+'c4(color:\x20'+'vec4f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(d'+'ecodeGamma'+'3(color.xy'+'z),\x20color.'+'w);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Output(col'+'or:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20pow'+'(color\x20+\x200'+'.0000001,\x20'+'vec3f(1.0\x20'+'/\x202.2));\x0a\x20'+'\x20\x20\x20}\x0a\x0a#els'+'e\x20//\x20NONE\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Input(colo'+'r:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20gammaCo'+'rrectInput'+'Vec3(color'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20gamm'+'aCorrectIn'+'putVec4(co'+'lor:\x20vec4f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20g'+'ammaCorrec'+'tOutput(co'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a',Q2='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_gl'+'oss:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getGlossi'+'ness()\x20{\x0a\x20'+'\x20\x20\x20dGlossi'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_GL'+'OSS_CONSTA'+'NT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20unifo'+'rm.materia'+'l_gloss;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_GLOS'+'S_TEXTURE\x0a'+'\x20\x20\x20\x20dGloss'+'iness\x20=\x20dG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_GLOSS'+'_TEXTURE_N'+'AME},\x20{STD'+'_GLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_GLOSS_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_GLOSS_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_I'+'NVERT\x0a\x20\x20\x20\x20'+'dGlossines'+'s\x20=\x201.0\x20-\x20'+'dGlossines'+'s;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20d'+'Glossiness'+'\x20=\x20dGlossi'+'ness\x20+\x200.0'+'000001;\x0a}\x0a',J2='\x0auniform\x20m'+'atrix_mode'+'l:\x20mat4x4f'+';\x0auniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0auniform\x20'+'matrix_pro'+'jection:\x20m'+'at4x4f;\x0a\x0a/'+'/\x20project\x20'+'the\x20model\x20'+'space\x20gaus'+'sian\x20cente'+'r\x20to\x20view\x20'+'and\x20clip\x20s'+'pace\x0afn\x20in'+'itCenter(m'+'odelCenter'+':\x20vec3f,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>)\x20->\x20bo'+'ol\x20{\x0a\x20\x20\x20\x20l'+'et\x20modelVi'+'ew:\x20mat4x4'+'f\x20=\x20unifor'+'m.matrix_v'+'iew\x20*\x20unif'+'orm.matrix'+'_model;\x0a\x20\x20'+'\x20\x20let\x20cent'+'erView:\x20ve'+'c4f\x20=\x20mode'+'lView\x20*\x20ve'+'c4f(modelC'+'enter,\x201.0'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20if\x20splat\x20'+'is\x20behind\x20'+'the\x20camera'+'\x0a\x20\x20\x20\x20if\x20(c'+'enterView.'+'z\x20>\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20ce'+'nterProj:\x20'+'vec4f\x20=\x20un'+'iform.matr'+'ix_project'+'ion\x20*\x20cent'+'erView;\x0a\x0a\x20'+'\x20\x20\x20//\x20ensu'+'re\x20gaussia'+'ns\x20are\x20not'+'\x20clipped\x20b'+'y\x20camera\x20n'+'ear\x20and\x20fa'+'r\x0a\x20\x20\x20\x20cent'+'erProj.z\x20='+'\x20clamp(cen'+'terProj.z,'+'\x200.0,\x20abs('+'centerProj'+'.w));\x0a\x0a\x20\x20\x20'+'\x20center.vi'+'ew\x20=\x20cente'+'rView.xyz\x20'+'/\x20centerVi'+'ew.w;\x0a\x20\x20\x20\x20'+'center.pro'+'j\x20=\x20center'+'Proj;\x0a\x20\x20\x20\x20'+'center.pro'+'jMat00\x20=\x20u'+'niform.mat'+'rix_projec'+'tion[0][0]'+';\x0a\x20\x20\x20\x20cent'+'er.modelVi'+'ew\x20=\x20model'+'View;\x0a\x20\x20\x20\x20'+'return\x20tru'+'e;\x0a}\x0a',eM='\x0a\x0avar\x20spla'+'tColor:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20r'+'eadColor(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20tex'+'tureLoad(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a}\x0a',tM='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20order:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20id:\x20u3'+'2,\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'uv:\x20vec2<i'+'32>,\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20corn'+'erUV:\x20vec2'+'f,\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a}\x0a\x0a'+'//\x20stores\x20'+'the\x20camera'+'\x20and\x20clip\x20'+'space\x20posi'+'tion\x20of\x20th'+'e\x20gaussian'+'\x20center\x0ast'+'ruct\x20Splat'+'Center\x20{\x0a\x20'+'\x20\x20\x20view:\x20v'+'ec3f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20vi'+'ew\x20space\x0a\x20'+'\x20\x20\x20proj:\x20v'+'ec4f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20cl'+'ip\x20space\x0a\x20'+'\x20\x20\x20modelVi'+'ew:\x20mat4x4'+'f,\x20\x20\x20//\x20mo'+'del-view\x20m'+'atrix\x0a\x20\x20\x20\x20'+'projMat00:'+'\x20f32,\x20\x20\x20\x20\x20'+'\x20\x20//\x20eleme'+'mt\x20[0][0]\x20'+'of\x20the\x20pro'+'jection\x20ma'+'trix\x0a}\x0a\x0a//'+'\x20stores\x20th'+'e\x20offset\x20f'+'rom\x20center'+'\x20for\x20the\x20c'+'urrent\x20gau'+'ssian\x0astru'+'ct\x20SplatCo'+'rner\x20{\x0a\x20\x20\x20'+'\x20offset:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20corn'+'er\x20offset\x20'+'from\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'uv:\x20vec2f,'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20aaFactor:'+'\x20f32,\x20//\x20f'+'or\x20scenes\x20'+'generated\x20'+'with\x20antia'+'liasing\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0a#include'+'\x20\x22gsplatEv'+'alSHVS\x22\x0a#i'+'nclude\x20\x22gs'+'platQuatTo'+'Mat3VS\x22\x0a\x0a#'+'if\x20GSPLAT_'+'COMPRESSED'+'_DATA\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatComp'+'ressedData'+'VS\x22\x0a\x20\x20\x20\x20#i'+('f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsDataVS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tSogsColor'+'VS\x22\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsSHVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#else\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatData'+'VS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22gs'+'platColorV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0afn\x20'+'clipCorner'+'(corner:\x20p'+'tr<functio'+'n,\x20SplatCo'+'rner>,\x20alp'+'ha:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'lip:\x20f32\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20(255'+'.0\x20*\x20alpha'+')))\x20/\x202.0)'+';\x0a\x20\x20\x20\x20corn'+'er.offset\x20'+'=\x20corner.o'+'ffset\x20*\x20cl'+'ip;\x0a\x20\x20\x20\x20co'+'rner.uv\x20=\x20'+'corner.uv\x20'+'*\x20clip;\x0a}\x0a'+'\x0a'),sM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0avar'+'\x20chunkText'+'ure:\x20textu'+'re_2d<f32>'+';\x0a\x0a//\x20work'+'\x20values\x0ava'+'r<private>'+'\x20chunkData'+'A:\x20vec4f;\x20'+'\x20\x20\x20//\x20x:\x20m'+'in_x,\x20y:\x20m'+'in_y,\x20z:\x20m'+'in_z,\x20w:\x20m'+'ax_x\x0avar<p'+'rivate>\x20ch'+'unkDataB:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20max_'+'y,\x20y:\x20max_'+'z,\x20z:\x20scal'+'e_min_x,\x20w'+':\x20scale_mi'+'n_y\x0avar<pr'+'ivate>\x20chu'+'nkDataC:\x20v'+'ec4f;\x20\x20\x20\x20/'+'/\x20x:\x20scale'+'_min_z,\x20y:'+'\x20scale_max'+'_x,\x20z:\x20sca'+'le_max_y,\x20'+'w:\x20scale_m'+'ax_z\x0avar<p'+'rivate>\x20ch'+'unkDataD:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20min_'+'r,\x20y:\x20min_'+'g,\x20z:\x20min_'+'b,\x20w:\x20max_'+'r\x0avar<priv'+'ate>\x20chunk'+'DataE:\x20vec'+'4f;\x20\x20\x20\x20//\x20'+'x:\x20max_g,\x20'+'y:\x20max_b,\x20'+'z:\x20unused,'+'\x20w:\x20unused'+'\x0avar<priva'+'te>\x20packed'+'Data:\x20vec4'+'u;\x20\x20\x20\x20//\x20x'+':\x20position'+'\x20bits,\x20y:\x20'+'rotation\x20b'+'its,\x20z:\x20sc'+'ale\x20bits,\x20'+'w:\x20color\x20b'+'its\x0a\x0afn\x20un'+'pack111011'+'(bits:\x20u32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(vec3f'+'((vec3<u32'+'>(bits)\x20>>'+'\x20vec3<u32>'+'(21u,\x2011u,'+'\x200u))\x20&\x20ve'+'c3<u32>(0x'+'7ffu,\x200x3f'+'fu,\x200x7ffu'+')))\x20/\x20vec3'+'f(2047.0,\x20'+'1023.0,\x2020'+'47.0);\x0a}\x0a\x0a'+'fn\x20unpack8'+'888(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20f32((bit'+'s\x20>>\x2024u)\x20'+'&\x200xffu),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((bits\x20>>'+'\x2016u)\x20&\x200x'+'ffu),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20f32((b'+'its\x20>>\x208u)'+'\x20\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(bits\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20&\x200'+'xffu)\x0a\x20\x20\x20\x20'+')\x20/\x20255.0;'+('\x0a}\x0a\x0aconst\x20'+'norm_const'+':\x20f32\x20=\x201.'+'0\x20/\x20(sqrt('+'2.0)\x20*\x200.5'+');\x0a\x0afn\x20unp'+'ackRotatio'+'n(bits:\x20u3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x20(f32'+'((bits\x20>>\x20'+'20u)\x20&\x200x3'+'ffu)\x20/\x20102'+'3.0\x20-\x200.5)'+'\x20*\x20norm_co'+'nst;\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20(f3'+'2((bits\x20>>'+'\x2010u)\x20&\x200x'+'3ffu)\x20/\x2010'+'23.0\x20-\x200.5'+')\x20*\x20norm_c'+'onst;\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20(f'+'32(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+'_const;\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'sqrt(1.0\x20-'+'\x20(a\x20*\x20a\x20+\x20'+'b\x20*\x20b\x20+\x20c\x20'+'*\x20c));\x0a\x0a\x20\x20'+'\x20\x20let\x20mode'+'\x20=\x20bits\x20>>'+'\x2030u;\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x200u)\x20{\x20re'+'turn\x20vec4f'+'(m,\x20a,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20m,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x202u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20b,\x20m,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(a,\x20b,\x20c'+',\x20m);\x0a}\x0a\x0a/'+'/\x20read\x20cen'+'ter\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex_siz'+'e_u\x20=\x20text'+'ureDimensi'+'ons(chunkT'+'exture,\x200)'+';\x0a\x20\x20\x20\x20let\x20'+'w:\x20u32\x20=\x20t'+'ex_size_u.'+'x\x20/\x205u;\x0a\x20\x20'+'\x20\x20let\x20chun'+'kId:\x20u32\x20='+'\x20source.id'+'\x20/\x20256u;\x0a\x20'+'\x20\x20\x20let\x20chu'+'nkUV:\x20vec2'+'<i32>\x20=\x20ve'+'c2<i32>(i3'+'2((chunkId'+'\x20%\x20w)\x20*\x205u'+'),\x20i32(chu'+'nkId\x20/\x20w))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'read\x20chunk'+'\x20and\x20packe'+'d\x20compress'+'ed\x20data\x0a\x20\x20'+'\x20\x20chunkDat'+'aA\x20=\x20textu'+'reLoad(chu'+'nkTexture,'+'\x20chunkUV\x20+'+'\x20vec2<i32>'+'(0,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataB\x20=\x20t'+'extureLoad')+('(chunkText'+'ure,\x20chunk'+'UV\x20+\x20vec2<'+'i32>(1,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataC'+'\x20=\x20texture'+'Load(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20v'+'ec2<i32>(2'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataD\x20=\x20tex'+'tureLoad(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20vec2<i3'+'2>(3,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataE\x20='+'\x20textureLo'+'ad(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20vec'+'2<i32>(4,\x20'+'0),\x200);\x0a\x20\x20'+'\x20\x20packedDa'+'ta\x20=\x20textu'+'reLoad(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(chunkDa'+'taA.xyz,\x20v'+'ec3f(chunk'+'DataA.w,\x20c'+'hunkDataB.'+'xy),\x20unpac'+'k111011(pa'+'ckedData.x'+'));\x0a}\x0a\x0afn\x20'+'readColor('+'source:\x20pt'+'r<function'+',\x20SplatSou'+'rce>)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20let\x20r\x20=\x20u'+'npack8888('+'packedData'+'.w);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(mix(chun'+'kDataD.xyz'+',\x20vec3f(ch'+'unkDataD.w'+',\x20chunkDat'+'aE.xy),\x20r.'+'rgb),\x20r.w)'+';\x0a}\x0a\x0afn\x20ge'+'tRotation('+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20unpack'+'Rotation(p'+'ackedData.'+'y);\x0a}\x0a\x0afn\x20'+'getScale()'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20exp(mix'+'(vec3f(chu'+'nkDataB.zw'+',\x20chunkDat'+'aC.x),\x20chu'+'nkDataC.yz'+'w,\x20unpack1'+'11011(pack'+'edData.z))'+');\x0a}\x0a\x0a//\x20g'+'iven\x20a\x20rot'+'ation\x20matr'+'ix\x20and\x20sca'+'le\x20vector,'+'\x20compute\x203'+'d\x20covarian'+'ce\x20A\x20and\x20B'+'\x0afn\x20readCo'+'variance(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>,\x20covA_'+'ptr:\x20ptr<f'+'unction,\x20v'+'ec3f>,\x20cov'+'B_ptr:\x20ptr'+'<function,')+('\x20vec3f>)\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'ot\x20=\x20quatT'+'oMat3(getR'+'otation())'+';\x0a\x20\x20\x20\x20let\x20'+'scale\x20=\x20ge'+'tScale();\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20let\x20M\x20=\x20'+'transpose('+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.x\x20*\x20rot'+'[0],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.y'+'\x20*\x20rot[1],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.z\x20*\x20r'+'ot[2]\x0a\x20\x20\x20\x20'+'));\x0a\x0a\x20\x20\x20\x20*'+'covA_ptr\x20='+'\x20vec3f(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20*covB_p'+'tr\x20=\x20vec3f'+'(dot(M[1],'+'\x20M[1]),\x20do'+'t(M[1],\x20M['+'2]),\x20dot(M'+'[2],\x20M[2])'+');\x0a}\x0a'),iM='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0av'+'ar\x20shTextu'+'re0:\x20textu'+'re_2d<u32>'+';\x0avar\x20shTe'+'xture1:\x20te'+'xture_2d<u'+'32>;\x0avar\x20s'+'hTexture2:'+'\x20texture_2'+'d<u32>;\x0a\x0af'+'n\x20unpack88'+'88s(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20unpack'+'ed_u\x20=\x20(ve'+'c4<u32>(bi'+'ts)\x20>>\x20vec'+'4<u32>(0u,'+'\x208u,\x2016u,\x20'+'24u))\x20&\x20ve'+'c4<u32>(0x'+'ffu);\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(unpacke'+'d_u)\x20*\x20(8.'+'0\x20/\x20255.0)'+'\x20-\x204.0;\x0a}\x0a'+'\x0afn\x20readSH'+'Data(sourc'+'e:\x20ptr<fun'+'ction,\x20Spl'+'atSource>,'+'\x20sh:\x20ptr<f'+'unction,\x20a'+'rray<vec3f'+',\x2015>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20read\x20t'+'he\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20let\x20shD'+'ata0:\x20vec4'+'<u32>\x20=\x20te'+'xtureLoad('+'shTexture0'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20let\x20shDat'+'a1:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(sh'+'Texture1,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20shData2'+':\x20vec4<u32'+'>\x20=\x20textur'+'eLoad(shTe'+'xture2,\x20so'+'urce.uv,\x200'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20r0\x20=\x20unp'+'ack8888s(s'+'hData0.x);'+'\x0a\x20\x20\x20\x20let\x20r'+'1\x20=\x20unpack'+'8888s(shDa'+'ta0.y);\x0a\x20\x20'+'\x20\x20let\x20r2\x20='+'\x20unpack888'+'8s(shData0'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20r3\x20=\x20un'+'pack8888s('+'shData0.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20g0\x20=\x20unpa'+'ck8888s(sh'+'Data1.x);\x0a'+'\x20\x20\x20\x20let\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20let\x20g2\x20=\x20'+'unpack8888'+'s(shData1.'+'z);\x0a\x20\x20\x20\x20le'+'t\x20g3\x20=\x20unp'+'ack8888s(s'+'hData1.w);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'b0\x20=\x20unpac'+'k8888s(shD'+'ata2.x);\x0a\x20'+'\x20\x20\x20let\x20b1\x20'+('=\x20unpack88'+'88s(shData'+'2.y);\x0a\x20\x20\x20\x20'+'let\x20b2\x20=\x20u'+'npack8888s'+'(shData2.z'+');\x0a\x20\x20\x20\x20let'+'\x20b3\x20=\x20unpa'+'ck8888s(sh'+'Data2.w);\x0a'+'\x0a\x20\x20\x20\x20sh[0]'+'\x20=\x20\x20vec3f('+'r0.x,\x20g0.x'+',\x20b0.x);\x0a\x20'+'\x20\x20\x20sh[1]\x20='+'\x20\x20vec3f(r0'+'.y,\x20g0.y,\x20'+'b0.y);\x0a\x20\x20\x20'+'\x20sh[2]\x20=\x20\x20'+'vec3f(r0.z'+',\x20g0.z,\x20b0'+'.z);\x0a\x20\x20\x20\x20s'+'h[3]\x20=\x20\x20ve'+'c3f(r0.w,\x20'+'g0.w,\x20b0.w'+');\x0a\x20\x20\x20\x20sh['+'4]\x20=\x20\x20vec3'+'f(r1.x,\x20g1'+'.x,\x20b1.x);'+'\x0a\x20\x20\x20\x20sh[5]'+'\x20=\x20\x20vec3f('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3f(r1'+'.z,\x20g1.z,\x20'+'b1.z);\x0a\x20\x20\x20'+'\x20sh[7]\x20=\x20\x20'+'vec3f(r1.w'+',\x20g1.w,\x20b1'+'.w);\x0a\x20\x20\x20\x20s'+'h[8]\x20=\x20\x20ve'+'c3f(r2.x,\x20'+'g2.x,\x20b2.x'+');\x0a\x20\x20\x20\x20sh['+'9]\x20=\x20\x20vec3'+'f(r2.y,\x20g2'+'.y,\x20b2.y);'+'\x0a\x20\x20\x20\x20sh[10'+']\x20=\x20vec3f('+'r2.z,\x20g2.z'+',\x20b2.z);\x0a\x20'+'\x20\x20\x20sh[11]\x20'+'=\x20vec3f(r2'+'.w,\x20g2.w,\x20'+'b2.w);\x0a\x20\x20\x20'+'\x20sh[12]\x20=\x20'+'vec3f(r3.x'+',\x20g3.x,\x20b3'+'.x);\x0a\x20\x20\x20\x20s'+'h[13]\x20=\x20ve'+'c3f(r3.y,\x20'+'g3.y,\x20b3.y'+');\x0a\x20\x20\x20\x20sh['+'14]\x20=\x20vec3'+'f(r3.z,\x20g3'+'.z,\x20b3.z);'+'\x0a\x0a\x20\x20\x20\x20*sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),rM='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'COEFFS:\x20i3'+'2\x20=\x203;\x0a\x20\x20\x20'+'\x20#elif\x20SH_'+'BANDS\x20==\x202'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20SH_CO'+'EFFS:\x20i32\x20'+'=\x208;\x0a\x20\x20\x20\x20#'+'elif\x20SH_BA'+'NDS\x20==\x203\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20con'+'st\x20SH_COEF'+'FS:\x20i32\x20=\x20'+'15;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20const\x20SH'+'_COEFFS:\x20i'+'32\x20=\x200;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20SH'+'_BANDS\x20>\x200'+'\x0a\x0a\x20\x20\x20\x20cons'+'t\x20SH_C1:\x20f'+'32\x20=\x200.488'+'6025119029'+'199;\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x201\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20const'+'\x20SH_C2_0:\x20'+'f32\x20=\x201.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_1:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_2:\x20f'+'32\x20=\x200.315'+'3915652525'+'2005;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_3:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_4:\x20f'+'32\x20=\x200.546'+'2742152960'+'396;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SH_BA'+'NDS\x20>\x202\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_0:'+'\x20f32\x20=\x20-0.'+'5900435899'+'266435;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_1:'+'\x20f32\x20=\x202.8'+'9061144264'+'0554;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_2:\x20f'+'32\x20=\x20-0.45'+'7045799464'+'4658;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_3:\x20f'+'32\x20=\x200.373'+'1763325901'+'154;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_4:\x20f3'+'2\x20=\x20-0.457'+'0457994644'+'658;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_5:\x20f3'+'2\x20=\x201.4453'+'0572132027'+'7;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'C3_6:\x20f32\x20'+'=\x20-0.59004'+'3589926643'+'5;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20see\x20http'+'s://github'+'.com/graph'+'deco-inria'+('/gaussian-'+'splatting/'+'blob/main/'+'utils/sh_u'+'tils.py\x0a\x20\x20'+'\x20\x20fn\x20evalS'+'H(sh:\x20ptr<'+'function,\x20'+'array<vec3'+'f,\x20SH_COEF'+'FS>>,\x20dir:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x\x20=\x20dir.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20y\x20=\x20di'+'r.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20z\x20='+'\x20dir.z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'1st\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20result\x20'+'=\x20SH_C1\x20*\x20'+'(-sh[0]\x20*\x20'+'y\x20+\x20sh[1]\x20'+'*\x20z\x20-\x20sh[2'+']\x20*\x20x);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x201\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x202'+'nd\x20degree\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xx\x20='+'\x20x\x20*\x20x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20yy\x20=\x20y'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20zz\x20=\x20z\x20*'+'\x20z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20yz'+'\x20=\x20y\x20*\x20z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xz\x20='+'\x20x\x20*\x20z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'result\x20+\x20('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'3]\x20*\x20(SH_C'+'2_0\x20*\x20xy)\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[4]\x20*\x20(SH_'+'C2_1\x20*\x20yz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[5]\x20*\x20(SH'+'_C2_2\x20*\x20(2'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[6]\x20*\x20(SH_'+'C2_3\x20*\x20xz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[7]\x20*\x20(SH'+'_C2_4\x20*\x20(x'+'x\x20-\x20yy))\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'=\x20result\x20+'+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20re'+'sult;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20#end'+'if\x0a'),aM='\x0afn\x20quatTo'+'Mat3(R:\x20ve'+'c4<f32>)\x20-'+'>\x20mat3x3<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'let\x20R2:\x20ve'+'c4<f32>\x20=\x20'+'R\x20+\x20R;\x0a\x20\x20\x20'+'\x20let\x20X:\x20f3'+'2\x20\x20\x20\x20\x20\x20\x20=\x20'+'R2.x\x20*\x20R.w'+';\x0a\x20\x20\x20\x20let\x20'+'Y:\x20vec4<f3'+'2>\x20=\x20R2.y\x20'+'*\x20R;\x0a\x20\x20\x20\x20l'+'et\x20Z:\x20vec4'+'<f32>\x20=\x20R2'+'.z\x20*\x20R;\x0a\x20\x20'+'\x20\x20let\x20W:\x20f'+'32\x20\x20\x20\x20\x20\x20\x20='+'\x20R2.w\x20*\x20R.'+'w;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20mat3x'+'3<f32>(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Z.z\x20-\x20W,'+'\x20\x20Y.z\x20+\x20X,'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.z\x20-'+'\x20X,\x20\x20\x20\x20\x20\x20\x20'+'\x201.0\x20-\x20Y.y'+'\x20-\x20W,\x20Z.w\x20'+'+\x20Y.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.w\x20+'+'\x20Z.x,\x20\x20\x20\x20\x20'+'\x20Z.w\x20-\x20Y.x'+',\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',nM='\x0avar\x20sh0:\x20'+'texture_2d'+'<f32>;\x0a\x0aun'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0auniform'+'\x20sh0_maxs:'+'\x20vec4f;\x0a\x0ac'+'onst\x20SH_C0'+':\x20f32\x20=\x200.'+'2820947917'+'7387814;\x0a\x0a'+'fn\x20readCol'+'or(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20let\x20cl'+'r:\x20vec4f\x20='+'\x20mix(unifo'+'rm.sh0_min'+'s,\x20uniform'+'.sh0_maxs,'+'\x20textureLo'+'ad(sh0,\x20so'+'urce.uv,\x200'+'));\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(vec3f(0.5'+')\x20+\x20clr.xy'+'z\x20*\x20SH_C0,'+'\x201.0\x20/\x20(1.'+'0\x20+\x20exp(-c'+'lr.w)));\x0a}'+'\x0a',oM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0a\x0aun'+'iform\x20mean'+'s_mins:\x20ve'+'c3f;\x0aunifo'+'rm\x20means_m'+'axs:\x20vec3f'+';\x0a\x0auniform'+'\x20scales_mi'+'ns:\x20vec3f;'+'\x0auniform\x20s'+'cales_maxs'+':\x20vec3f;\x0a\x0a'+'fn\x20unpackU'+'32(u:\x20u32)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20vec4f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((u\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((u\x20>>\x201'+'6u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((u\x20>>\x20'+'8u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(u\x20&\x200x'+'FFu)\x20/\x20255'+'.0\x0a\x20\x20\x20\x20);\x0a'+'}\x0a\x0avar<pri'+'vate>\x20pack'+'edSample:\x20'+'vec4<u32>;'+'\x0a\x0a//\x20read\x20'+'the\x20model-'+'space\x20cent'+'er\x20of\x20the\x20'+'gaussian\x0af'+'n\x20readCent'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec3f\x20{\x0a'+'\x0a\x20\x20\x20\x20packe'+'dSample\x20=\x20'+'textureLoa'+'d(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20l:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.x).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20u:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20n:\x20vec3f\x20'+'=\x20(l\x20*\x20255'+'.0\x20+\x20u\x20*\x202'+'55.0\x20*\x20256'+'.0)\x20/\x206553'+'5.0;\x0a\x20\x20\x20\x20l'+'et\x20v:\x20vec3'+'f\x20=\x20mix(un'+'iform.mean'+'s_mins,\x20un'+'iform.mean'+'s_maxs,\x20n)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20sign(v'+')\x20*\x20(exp(a'+'bs(v))\x20-\x201'+'.0);\x0a}\x0a\x0aco'+'nst\x20norm:\x20'+'f32\x20=\x202.0\x20'+'/\x20sqrt(2.0'+');\x0a\x0a//\x20sam'+'ple\x20covari'+'ance\x20vecto'+'rs\x0afn\x20read'+'Covariance'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>,\x20cov'+'A_ptr:\x20ptr'+'<function,'+'\x20vec3f>,\x20c'+('ovB_ptr:\x20p'+'tr<functio'+'n,\x20vec3f>)'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20qdata:\x20ve'+'c4f\x20=\x20unpa'+'ckU32(pack'+'edSample.z'+');\x0a\x20\x20\x20\x20let'+'\x20sdata:\x20ve'+'c3f\x20=\x20unpa'+'ckU32(pack'+'edSample.w'+').xyz;\x0a\x0a\x20\x20'+'\x20\x20let\x20abc:'+'\x20vec3f\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(abc,'+'\x20abc)));\x0a\x0a'+'\x20\x20\x20\x20let\x20mo'+'de:\x20u32\x20=\x20'+'u32(qdata.'+'w\x20*\x20255.0\x20'+'+\x200.5)\x20-\x202'+'52u;\x0a\x0a\x20\x20\x20\x20'+'var\x20quat:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20if\x20(mode\x20'+'==\x200u)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20qua'+'t\x20=\x20vec4f('+'d,\x20abc);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20quat'+'\x20=\x20vec4f(a'+'bc.x,\x20d,\x20a'+'bc.y,\x20abc.'+'z);\x0a\x20\x20\x20\x20}\x20'+'else\x20if\x20(m'+'ode\x20==\x202u)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20quat\x20=\x20ve'+'c4f(abc.x,'+'\x20abc.y,\x20d,'+'\x20abc.z);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'quat\x20=\x20vec'+'4f(abc.x,\x20'+'abc.y,\x20abc'+'.z,\x20d);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20'+'let\x20rot:\x20m'+'at3x3f\x20=\x20q'+'uatToMat3('+'quat);\x0a\x20\x20\x20'+'\x20let\x20scale'+':\x20vec3f\x20=\x20'+'exp(mix(un'+'iform.scal'+'es_mins,\x20u'+'niform.sca'+'les_maxs,\x20'+'sdata));\x0a\x0a'+'\x20\x20\x20\x20//\x20M\x20='+'\x20S\x20*\x20R\x0a\x20\x20\x20'+'\x20let\x20M:\x20ma'+'t3x3f\x20=\x20tr'+'anspose(ma'+'t3x3f(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20*co'+'vA_ptr\x20=\x20v'+'ec3f(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20*covB_ptr'+'\x20=\x20vec3f(d'+'ot(M[1],\x20M'+'[1]),\x20dot('+'M[1],\x20M[2]'+'),\x20dot(M[2'+'],\x20M[2]));')+'\x0a}\x0a',lM='\x0avar\x20sh_ce'+'ntroids:\x20t'+'exture_2d<'+'f32>;\x0a\x0auni'+'form\x20shN_m'+'ins:\x20f32;\x0a'+'uniform\x20sh'+'N_maxs:\x20f3'+'2;\x0a\x0afn\x20rea'+'dSHData(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>,\x20sh:\x20pt'+'r<function'+',\x20array<ve'+'c3f,\x20SH_CO'+'EFFS>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'let\x20t:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'32(packedS'+'ample.x\x20&\x20'+'255u),\x20i32'+'(packedSam'+'ple.y\x20&\x2025'+'5u));\x0a\x20\x20\x20\x20'+'let\x20n:\x20i32'+'\x20=\x20t.x\x20+\x20t'+'.y\x20*\x20256;\x0a'+'\x20\x20\x20\x20let\x20u:'+'\x20i32\x20=\x20(n\x20'+'%\x2064)\x20*\x20SH'+'_COEFFS;\x0a\x20'+'\x20\x20\x20let\x20v:\x20'+'i32\x20=\x20n\x20/\x20'+'64;\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20offset\x20i'+'nto\x20the\x20ce'+'ntroids\x20te'+'xture\x20and\x20'+'read\x20conse'+'cutive\x20tex'+'els\x0a\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'i32\x20=\x200;\x20i'+'\x20<\x20SH_COEF'+'FS;\x20i\x20=\x20i\x20'+'+\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[i]'+'\x20=\x20mix(vec'+'3f(uniform'+'.shN_mins)'+',\x20vec3f(un'+'iform.shN_'+'maxs),\x20tex'+'tureLoad(s'+'h_centroid'+'s,\x20vec2<i3'+'2>(u\x20+\x20i,\x20'+'v),\x200).xyz'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20*scale'+'\x20=\x201.0;\x0a}\x0a',hM='\x0auniform\x20v'+'iewport:\x20v'+'ec2f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20view'+'port\x20dimen'+'sions\x0aunif'+'orm\x20camera'+'_params:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201\x20/\x20far,\x20'+'far,\x20near,'+'\x20isOrtho\x0a\x0a'+'//\x20calcula'+'te\x20the\x20cli'+'p-space\x20of'+'fset\x20from\x20'+'the\x20center'+'\x20for\x20this\x20'+'gaussian\x0af'+'n\x20initCorn'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>,\x20corne'+'r:\x20ptr<fun'+'ction,\x20Spl'+'atCorner>)'+'\x20->\x20bool\x20{'+'\x0a\x20\x20\x20\x20//\x20ge'+'t\x20covarian'+'ce\x0a\x20\x20\x20\x20var'+'\x20covA:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20covB:\x20ve'+'c3f;\x0a\x20\x20\x20\x20r'+'eadCovaria'+'nce(source'+',\x20&covA,\x20&'+'covB);\x0a\x0a\x20\x20'+'\x20\x20let\x20Vrk\x20'+'=\x20mat3x3f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(covA.'+'x,\x20covA.y,'+'\x20covA.z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(covA.y'+',\x20covB.x,\x20'+'covB.y),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(covA.z,'+'\x20covB.y,\x20c'+'ovB.z)\x0a\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20l'+'et\x20focal\x20='+'\x20uniform.v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20let\x20v'+'\x20=\x20select('+'center.vie'+'w.xyz,\x20vec'+'3f(0.0,\x200.'+'0,\x201.0),\x20u'+'niform.cam'+'era_params'+'.w\x20==\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'J1\x20=\x20focal'+'\x20/\x20v.z;\x0a\x20\x20'+'\x20\x20let\x20J2\x20='+'\x20-J1\x20/\x20v.z'+'\x20*\x20v.xy;\x0a\x20'+'\x20\x20\x20let\x20J\x20='+'\x20mat3x3f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(J1,\x200.'+'0,\x20J2.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x20J'+'1,\x20J2.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x200'+'.0,\x200.0)\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20W\x20=\x20t'+'ranspose(m'+'at3x3f(cen'+'ter.modelV'+'iew[0].xyz'+',\x20center.m'+'odelView[1'+'].xyz,\x20cen'+('ter.modelV'+'iew[2].xyz'+'));\x0a\x20\x20\x20\x20le'+'t\x20T\x20=\x20W\x20*\x20'+'J;\x0a\x20\x20\x20\x20let'+'\x20cov\x20=\x20tra'+'nspose(T)\x20'+'*\x20Vrk\x20*\x20T;'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'GSPLAT_AA\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20calculate'+'\x20AA\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20detOrig'+'\x20=\x20cov[0]['+'0]\x20*\x20cov[1'+'][1]\x20-\x20cov'+'[0][1]\x20*\x20c'+'ov[1][0];\x20'+'//\x20Using\x20['+'0][1]\x20*\x20[1'+'][0]\x20as\x20ma'+'trix\x20might'+'\x20not\x20be\x20pe'+'rfectly\x20sy'+'mmetric\x20nu'+'merically\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20detBlur\x20'+'=\x20(cov[0]['+'0]\x20+\x200.3)\x20'+'*\x20(cov[1]['+'1]\x20+\x200.3)\x20'+'-\x20cov[0][1'+']\x20*\x20cov[1]'+'[0];\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20corner.'+'aaFactor\x20='+'\x20sqrt(detO'+'rig\x20/\x20detB'+'lur);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal1\x20=\x20co'+'v[0][0]\x20+\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20offDiag'+'onal\x20=\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal2\x20=\x20co'+'v[1][1]\x20+\x20'+'0.3;\x0a\x0a\x20\x20\x20\x20'+'let\x20mid\x20=\x20'+'0.5\x20*\x20(dia'+'gonal1\x20+\x20d'+'iagonal2);'+'\x0a\x20\x20\x20\x20let\x20r'+'adius\x20=\x20le'+'ngth(vec2f'+'((diagonal'+'1\x20-\x20diagon'+'al2)\x20/\x202.0'+',\x20offDiago'+'nal));\x0a\x20\x20\x20'+'\x20let\x20lambd'+'a1\x20=\x20mid\x20+'+'\x20radius;\x0a\x20'+'\x20\x20\x20let\x20lam'+'bda2\x20=\x20max'+'(mid\x20-\x20rad'+'ius,\x200.1);'+'\x0a\x0a\x20\x20\x20\x20//\x20U'+'se\x20the\x20sma'+'ller\x20viewp'+'ort\x20dimens'+'ion\x20to\x20lim'+'it\x20the\x20ker'+'nel\x20size\x20r'+'elative\x20to'+'\x20the\x20scree'+'n\x20resoluti'+'on.\x0a\x20\x20\x20\x20le'+'t\x20vmin\x20=\x20m'+'in(1024.0,'+'\x20min(unifo'+'rm.viewpor'+'t.x,\x20unifo'+'rm.viewpor'+'t.y));\x0a\x0a\x20\x20'+'\x20\x20let\x20l1\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda1)'+',\x20vmin);\x0a\x20'+'\x20\x20\x20let\x20l2\x20'+'=\x202.0\x20*\x20mi'+'n(sqrt(2.0'+'\x20*\x20lambda2')+('),\x20vmin);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly-out\x20ga'+'ussians\x20sm'+'aller\x20than'+'\x202\x20pixels\x0a'+'\x20\x20\x20\x20if\x20(l1'+'\x20<\x202.0\x20&&\x20'+'l2\x20<\x202.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20fal'+'se;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'uniform.vi'+'ewport;\x0a\x0a\x20'+'\x20\x20\x20//\x20cull'+'\x20against\x20f'+'rustum\x20x/y'+'\x20axes\x0a\x20\x20\x20\x20'+'if\x20(any((a'+'bs(center.'+'proj.xy)\x20-'+'\x20vec2f(max'+'(l1,\x20l2))\x20'+'*\x20c)\x20>\x20cen'+'ter.proj.w'+'w))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20diagona'+'lVector\x20=\x20'+'normalize('+'vec2f(offD'+'iagonal,\x20l'+'ambda1\x20-\x20d'+'iagonal1))'+';\x0a\x20\x20\x20\x20let\x20'+'v1\x20=\x20l1\x20*\x20'+'diagonalVe'+'ctor;\x0a\x20\x20\x20\x20'+'let\x20v2\x20=\x20l'+'2\x20*\x20vec2f('+'diagonalVe'+'ctor.y,\x20-d'+'iagonalVec'+'tor.x);\x20//'+'\x20Swizzle\x0a\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20=\x20'+'(source.co'+'rnerUV.x\x20*'+'\x20v1\x20+\x20sour'+'ce.cornerU'+'V.y\x20*\x20v2)\x20'+'*\x20c;\x0a\x20\x20\x20\x20c'+'orner.uv\x20='+'\x20source.co'+'rnerUV;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),cM='\x0avar\x20trans'+'formA:\x20tex'+'ture_2d<u3'+'2>;\x0avar\x20tr'+'ansformB:\x20'+'texture_2d'+'<f32>;\x0a\x0a//'+'\x20work\x20valu'+'es\x0avar<pri'+'vate>\x20tAw:'+'\x20u32;\x0a\x0a//\x20'+'read\x20the\x20m'+'odel-space'+'\x20center\x20of'+'\x20the\x20gauss'+'ian\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20let\x20'+'tA:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(tr'+'ansformA,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20t'+'Aw\x20=\x20tA.w;'+'\x0a\x20\x20\x20\x20retur'+'n\x20bitcast<'+'vec3f>(tA.'+'xyz);\x0a}\x0a\x0af'+'n\x20unpackRo'+'tation(pac'+'ked:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'packed.xyz'+',\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(pack'+'ed,\x20packed'+'))));\x0a}\x0a\x0a/'+'/\x20sample\x20c'+'ovariance\x20'+'vectors\x0afn'+'\x20readCovar'+'iance(sour'+'ce:\x20ptr<fu'+'nction,\x20Sp'+'latSource>'+',\x20covA_ptr'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20covB_p'+'tr:\x20ptr<fu'+'nction,\x20ve'+'c3f>)\x20{\x0a\x20\x20'+'\x20\x20let\x20tB:\x20'+'vec4f\x20=\x20te'+'xtureLoad('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20let\x20rot:'+'\x20mat3x3f\x20='+'\x20quatToMat'+'3(unpackRo'+'tation(vec'+'3f(unpack2'+'x16float(b'+'itcast<u32'+'>(tAw)),\x20t'+'B.w)).wxyz'+');\x0a\x20\x20\x20\x20let'+'\x20scale:\x20ve'+'c3f\x20=\x20tB.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x20M\x20=\x20S\x20*\x20'+'R\x0a\x20\x20\x20\x20let\x20'+'M\x20=\x20transp'+'ose(mat3x3'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20*covA_p'+'tr\x20=\x20vec3f'+'(dot(M[0],'+'\x20M[0]),\x20do'+('t(M[0],\x20M['+'1]),\x20dot(M'+'[0],\x20M[2])'+');\x0a\x20\x20\x20\x20*co'+'vB_ptr\x20=\x20v'+'ec3f(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a'),dM='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0afn\x20'+'prepareOut'+'putFromGam'+'ma(gammaCo'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20TONEMAP\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20G'+'AMMA\x20==\x20NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'nvert\x20to\x20l'+'inear\x20spac'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20decodeGam'+'ma3(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20gamma\x20'+'space\x20colo'+'r\x20directly'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'gammaColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ap'+'ply\x20tonema'+'pping\x20in\x20l'+'inear\x20spac'+'e\x20and\x20outp'+'ut\x20to\x20line'+'ar\x20or\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20gam'+'ma\x20(which\x20'+'is\x20handled'+'\x20by\x20gammaC'+'orrectOutp'+'ut)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaCorrec'+'tOutput(to'+'neMap(deco'+'deGamma3(g'+'ammaColor)'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',fM='\x0a\x0a#ifndef\x20'+'DITHER_NON'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22baye'+'rPS\x22\x0a\x20\x20\x20\x20#'+'include\x20\x22o'+'pacityDith'+'erPS\x22\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20PICK_PAS'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22pick'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_PASS)\x20||\x20'+'defined(PI'+'CK_PASS)\x20|'+'|\x20defined('+'PREPASS_PA'+'SS)\x0a\x20\x20\x20\x20un'+'iform\x20alph'+'aClip:\x20f32'+';\x0a#endif\x0a\x0a'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vLinearD'+'epth:\x20f32;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22float'+'AsUintPS\x22\x0a'+'#endif\x0a\x0a//'+'\x20Fast\x20appr'+'oximate\x20e^'+'x\x20based\x20on'+'\x20https://n'+'ic.schraud'+'olph.org/p'+'ubs/Schrau'+'dolph99.pd'+'f\x0aconst\x20EX'+'P_A:\x20f32\x20\x20'+'\x20\x20\x20\x20=\x201210'+'2203.0;\x20\x20\x20'+'//\x20≈\x202^23\x20'+'/\x20ln(2)\x0aco'+'nst\x20EXP_BC'+'_RMS:\x20i32\x20'+'=\x2010648668'+'08;\x20\x20\x20//\x20('+'127\x20<<\x2023)'+'\x20-\x2060801\x20*'+'\x208\x0afn\x20fast'+'Exp(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20var\x20i'+':\x20i32\x20=\x20i3'+'2(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20bi'+'tcast<f32>'+'(i);\x0a}\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x0a\x20\x20\x20'+'\x20let\x20A:\x20f3'+'2\x20=\x20dot(ga'+'ussianUV,\x20'+'gaussianUV'+');\x0a\x20\x20\x20\x20if\x20'+'(A\x20>\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20alpha'+'\x0a\x20\x20\x20\x20var\x20a'+'lpha:\x20f32\x20'+'=\x20fastExp('+'-A\x20*\x204.0)\x20'+'*\x20gaussian'+('Color.a;\x0a\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(al'+'pha\x20<\x20unif'+'orm.alphaC'+'lip)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20PI'+'CK_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20getPickO'+'utput();\x0a\x0a'+'\x20\x20\x20\x20#elif\x20'+'SHADOW_PAS'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(0.0,\x200.0'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20PREPAS'+'S_PASS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20float2vec'+'4(vLinearD'+'epth);\x0a\x0a\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20('+'1.0\x20/\x20255.'+'0))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20opaci'+'tyDither(&'+'alpha,\x20id\x20'+'*\x200.013);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(input'+'.gaussianC'+'olor.xyz,\x20'+'alpha);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'),uM='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0afn\x20unpack'+'111011s(bi'+'ts:\x20u32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20(vec3f((v'+'ec3<u32>(b'+'its)\x20>>\x20ve'+'c3<u32>(21'+'u,\x2011u,\x200u'+'))\x20&\x20vec3<'+'u32>(0x7ff'+'u,\x200x3ffu,'+'\x200x7ffu))\x20'+'/\x20vec3f(20'+'47.0,\x201023'+'.0,\x202047.0'+'))\x20*\x202.0\x20-'+'\x201.0;\x0a}\x0a\x0as'+'truct\x20Scal'+'eAndSH\x20{\x0a\x20'+'\x20\x20\x20scale:\x20'+'f32,\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f\x0a};\x0a\x0a'+'//\x20fetch\x20q'+'uantized\x20s'+'pherical\x20h'+'armonic\x20co'+'efficients'+'\x0afn\x20fetchS'+'cale(t_in:'+'\x20vec4<u32>'+')\x20->\x20Scale'+'AndSH\x20{\x0a\x20\x20'+'\x20\x20var\x20resu'+'lt:\x20ScaleA'+'ndSH;\x0a\x20\x20\x20\x20'+'result.sca'+'le\x20=\x20bitca'+'st<f32>(t_'+'in.x);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20unpack11'+'1011s(t_in'+'.y);\x0a\x20\x20\x20\x20r'+'esult.b\x20=\x20'+'unpack1110'+'11s(t_in.z'+');\x0a\x20\x20\x20\x20res'+'ult.c\x20=\x20un'+'pack111011'+'s(t_in.w);'+'\x0a\x20\x20\x20\x20retur'+'n\x20result;\x0a'+'}\x0a\x0astruct\x20'+'SH\x20{\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20d:\x20vec3f\x0a'+'};\x0a\x0a//\x20fet'+'ch\x20quantiz'+'ed\x20spheric'+'al\x20harmoni'+'c\x20coeffici'+'ents\x0afn\x20fe'+'tch4(t_in:'+'\x20vec4<u32>'+')\x20->\x20SH\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'sult:\x20SH;\x0a'+'\x20\x20\x20\x20result'+'.a\x20=\x20unpac'+'k111011s(t'+'_in.x);\x0a\x20\x20'+'\x20\x20result.b'+'\x20=\x20unpack1'+'11011s(t_i'+'n.y);\x0a\x20\x20\x20\x20'+'result.c\x20='+'\x20unpack111'+'011s(t_in.'+'z);\x0a\x20\x20\x20\x20re'+'sult.d\x20=\x20u'+'npack11101'+'1s(t_in.w)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20result;'+'\x0a}\x0a\x0afn\x20fet'+'ch1(t_in:\x20'+'u32)\x20->\x20ve'+('c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20unp'+'ack111011s'+'(t_in);\x0a}\x0a'+'\x0a#if\x20SH_BA'+'NDS\x20==\x201\x0a\x20'+'\x20\x20\x20var\x20spl'+'atSH_1to3:'+'\x20texture_2'+'d<u32>;\x0a\x0a\x20'+'\x20\x20\x20fn\x20read'+'SHData(sou'+'rce:\x20ptr<f'+'unction,\x20S'+'platSource'+'>,\x20sh:\x20ptr'+'<function,'+'\x20array<vec'+'3f,\x203>>,\x20s'+'cale:\x20ptr<'+'function,\x20'+'f32>)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'result\x20=\x20f'+'etchScale('+'textureLoa'+'d(splatSH_'+'1to3,\x20sour'+'ce.uv,\x200))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'*scale\x20=\x20r'+'esult.scal'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[0]\x20=\x20r'+'esult.a;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'1]\x20=\x20resul'+'t.b;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[2]\x20='+'\x20result.c;'+'\x0a\x20\x20\x20\x20}\x0a#el'+'if\x20SH_BAND'+'S\x20==\x202\x0a\x20\x20\x20'+'\x20var\x20splat'+'SH_1to3:\x20t'+'exture_2d<'+'u32>;\x0a\x20\x20\x20\x20'+'var\x20splatS'+'H_4to7:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_8to11:\x20te'+'xture_2d<u'+'32>;\x0a\x0a\x20\x20\x20\x20'+'fn\x20readSHD'+'ata(source'+':\x20ptr<func'+'tion,\x20Spla'+'tSource>,\x20'+'sh:\x20ptr<fu'+'nction,\x20ar'+'ray<vec3f,'+'\x208>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se')+('cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20='+'\x20fetch1(te'+'xtureLoad('+'splatSH_8t'+'o11,\x20sourc'+'e.uv,\x200).x'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_1to3:\x20tex'+'ture_2d<u3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20splatSH_'+'4to7:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_8'+'to11:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_1'+'2to15:\x20tex'+'ture_2d<u3'+'2>;\x0a\x0a\x20\x20\x20\x20f'+'n\x20readSHDa'+'ta(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20s'+'h:\x20ptr<fun'+'ction,\x20arr'+'ay<vec3f,\x20'+'15>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se'+'cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20thi'+'rd:\x20SH\x20=\x20f'+'etch4(text'+'ureLoad(sp'+'latSH_8to1'+'1,\x20source.'+'uv,\x200));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'7]\x20=\x20third'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[8]\x20=\x20'+'third.b;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'9]\x20=\x20third'+'.c;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[10]\x20='+'\x20third.d;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20fourth:'+'\x20SH\x20=\x20fetc'+'h4(texture'+'Load(splat'+'SH_12to15,')+('\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[11'+']\x20=\x20fourth'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[12]\x20='+'\x20fourth.b;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[13]\x20=\x20fo'+'urth.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[1'+'4]\x20=\x20fourt'+'h.d;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a\x0a#'+'endif\x0a'),mM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c3f;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20xy:\x20'+'cornerUV,\x20'+'z:\x20render\x20'+'order\x20offs'+'et\x0aattribu'+'te\x20vertex_'+'id_attrib:'+'\x20u32;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'nder\x20order'+'\x20base\x0a\x0auni'+'form\x20numSp'+'lats:\x20u32;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20total\x20nu'+'mber\x20of\x20sp'+'lats\x0avar\x20s'+'platOrder:'+'\x20texture_2'+'d<u32>;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'per-splat\x20'+'index\x20to\x20s'+'ource\x20gaus'+'sian\x0a\x0a//\x20i'+'nitialize\x20'+'the\x20splat\x20'+'source\x20str'+'ucture\x0afn\x20'+'initSource'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20let\x20w:\x20u3'+'2\x20=\x20textur'+'eDimension'+'s(splatOrd'+'er,\x200).x;\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20u3'+'2(vertex_p'+'osition.z)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'return\x20if\x20'+'out\x20of\x20ran'+'ge\x20(since\x20'+'the\x20last\x20b'+'lock\x20of\x20sp'+'lats\x20may\x20b'+'e\x20partiall'+'y\x20full)\x0a\x20\x20'+'\x20\x20if\x20(sour'+'ce.order\x20>'+'=\x20uniform.'+'numSplats)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20fa'+'lse;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'orderUV\x20=\x20'+'vec2i(vec2'+'u(source.o'+'rder\x20%\x20w,\x20'+'source.ord'+'er\x20/\x20w));\x0a'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20splat\x20i'+'d\x0a\x20\x20\x20\x20sour'+'ce.id\x20=\x20te'+'xtureLoad('+'splatOrder'+',\x20orderUV,'+'\x200).r;\x0a\x0a\x20\x20'+'\x20\x20//\x20map\x20i'+'d\x20to\x20uv\x0a\x20\x20'+'\x20\x20source.u'+'v\x20=\x20vec2i('+'vec2u(sour'+'ce.id\x20%\x20w,'+'\x20source.id'+'\x20/\x20w));\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+('turn\x20true;'+'\x0a}\x0a'),pM='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a#ifn'+'def\x20DITHER'+'_NONE\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0aconst'+'\x20discardVe'+'c:\x20vec4f\x20='+'\x20vec4f(0.0'+',\x200.0,\x202.0'+',\x201.0);\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20varying'+'\x20vLinearDe'+'pth:\x20f32;\x0a'+'#endif\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20gaussian\x20'+'details\x0a\x20\x20'+'\x20\x20var\x20sour'+'ce:\x20SplatS'+'ource;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Source(&so'+'urce))\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.positi'+'on\x20=\x20disca'+'rdVec;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20let\x20model'+'Center:\x20ve'+'c3f\x20=\x20read'+'Center(&so'+'urce);\x0a\x0a\x20\x20'+'\x20\x20var\x20cent'+'er:\x20SplatC'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'&center))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20di'+'scardVec;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20pro'+'ject\x20cente'+'r\x20to\x20scree'+'n\x20space\x0a\x20\x20'+'\x20\x20var\x20corn'+'er:\x20SplatC'+'orner;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Corner(&so'+'urce,\x20&cen'+'ter,\x20&corn'+'er))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20clr:\x20vec4'+'f\x20=\x20readCo'+'lor(&sourc'+'e);\x0a\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'AA\x20compens'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr.a\x20'+('=\x20clr.a\x20*\x20'+'corner.aaF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20spher'+'ical\x20harmo'+'nics\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x200\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cal'+'culate\x20the'+'\x20model-spa'+'ce\x20view\x20di'+'rection\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'modelView3'+'x3\x20=\x20mat3x'+'3f(center.'+'modelView['+'0].xyz,\x20ce'+'nter.model'+'View[1].xy'+'z,\x20center.'+'modelView['+'2].xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dir\x20=\x20nor'+'malize(mod'+'elView3x3\x20'+'*\x20center.v'+'iew);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'ad\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20sh:\x20array'+'<vec3f,\x20SH'+'_COEFFS>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20scale:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20readSHDa'+'ta(&source'+',\x20&sh,\x20&sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr\x20='+'\x20vec4f(clr'+'.xyz\x20+\x20eva'+'lSH(&sh,\x20d'+'ir)\x20*\x20scal'+'e,\x20clr.a);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(&c'+'orner,\x20clr'+'.w);\x0a\x0a\x20\x20\x20\x20'+'//\x20write\x20o'+'utput\x0a\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4f(co'+'rner.offse'+'t,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20ou'+'tput.gauss'+'ianUV\x20=\x20co'+'rner.uv;\x0a\x20'+'\x20\x20\x20output.'+'gaussianCo'+'lor\x20=\x20vec4'+'f(prepareO'+'utputFromG'+'amma(max(c'+'lr.xyz,\x20ve'+'c3f(0.0)))'+',\x20clr.w);\x0a'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'id\x20=\x20f32(s'+'ource.id);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vLinearD'+'epth\x20=\x20-ce'+'nter.view.'+'z;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),_M='\x0a\x20\x20\x20\x20attri'+'bute\x20aPosi'+'tion:\x20vec2'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20uv0:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20@vertex\x20f'+'n\x20vertexMa'+'in(input:\x20'+'VertexInpu'+'t)\x20->\x20Vert'+'exOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20vec4f(inp'+'ut.aPositi'+'on,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'uv0\x20=\x20getI'+'mageEffect'+'UV((input.'+'aPosition\x20'+'+\x201.0)\x20*\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a',gM='\x0a//\x20Indire'+'ct\x20indexed'+'\x20draw\x20call'+'\x20parameter'+'s\x0astruct\x20D'+'rawIndexed'+'IndirectAr'+'gs\x20{\x0a\x20\x20\x20\x20i'+'ndexCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Numb'+'er\x20of\x20indi'+'ces\x20to\x20dra'+'w\x0a\x20\x20\x20\x20inst'+'anceCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20instanc'+'es\x20to\x20draw'+'\x0a\x20\x20\x20\x20first'+'Index:\x20u32'+',\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Index\x20of'+'\x20the\x20first'+'\x20index\x20in\x20'+'the\x20index\x20'+'buffer\x0a\x20\x20\x20'+'\x20baseVerte'+'x:\x20i32,\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Of'+'fset\x20added'+'\x20to\x20each\x20i'+'ndex\x20befor'+'e\x20fetching'+'\x20vertex\x0a\x20\x20'+'\x20\x20firstIns'+'tance:\x20u32'+'\x20\x20\x20\x20\x20\x20//\x20F'+'irst\x20insta'+'nce\x20ID\x0a};\x0a'+'\x0a//\x20Indire'+'ct\x20non-ind'+'exed\x20draw\x20'+'call\x20param'+'eters\x0astru'+'ct\x20DrawInd'+'irectArgs\x20'+'{\x0a\x20\x20\x20\x20vert'+'exCount:\x20u'+'32,\x20\x20\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20vertice'+'s\x20to\x20draw\x0a'+'\x20\x20\x20\x20instan'+'ceCount:\x20u'+'32,\x20\x20\x20\x20\x20//'+'\x20Number\x20of'+'\x20instances'+'\x20to\x20draw\x0a\x20'+'\x20\x20\x20firstVe'+'rtex:\x20u32,'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Index\x20of\x20t'+'he\x20first\x20v'+'ertex\x0a\x20\x20\x20\x20'+'firstInsta'+'nce:\x20u32,\x20'+'\x20\x20\x20\x20//\x20Fir'+'st\x20instanc'+'e\x20ID\x0a\x20\x20\x20\x20_'+'pad:\x20u32\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Padd'+'ing\x20to\x20mat'+'ch\x20indexed'+'\x20size\x20(unu'+'sed)\x0a};\x0a',SM='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gamma'+'PS\x22\x0a\x20\x20\x20\x20va'+'rying\x20colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(decodeGam'+'ma3(input.'+'color.rgb)'+'),\x20input.c'+'olor.a);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a',yM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20matr'+'ix_model:\x20'+'mat4x4f;\x0a\x20'+'\x20\x20\x20uniform'+'\x20matrix_vi'+'ewProjecti'+'on:\x20mat4x4'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output\x20:\x20V'+'ertexOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20inpu'+'t.vertex_c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20unifor'+'m.matrix_m'+'odel\x20*\x20inp'+'ut.vertex_'+'position;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',vM='\x0auniform\x20m'+'aterial_ir'+'idescenceR'+'efractionI'+'ndex:\x20f32;'+'\x0a\x0afn\x20iride'+'scence_ior'+'ToFresnelS'+'calar(tran'+'smittedIor'+':\x20f32,\x20inc'+'identIor:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(('+'transmitte'+'dIor\x20-\x20inc'+'identIor)\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'incidentIo'+'r),\x202.0);\x0a'+'}\x0a\x0afn\x20irid'+'escence_io'+'rToFresnel'+'Vec3(trans'+'mittedIor:'+'\x20vec3f,\x20in'+'cidentIor:'+'\x20f32)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'vec3f(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3f(inci'+'dentIor)),'+'\x20vec3f(2.0'+'));\x0a}\x0a\x0afn\x20'+'iridescenc'+'e_fresnelT'+'oIor(f0:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20sqrtF'+'0:\x20vec3f\x20='+'\x20sqrt(f0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20(vec3f(1'+'.0)\x20+\x20sqrt'+'F0)\x20/\x20(vec'+'3f(1.0)\x20-\x20'+'sqrtF0);\x0a}'+'\x0a\x0aconst\x20XY'+'Z_TO_REC70'+'9:\x20mat3x3f'+'\x20=\x20mat3x3f'+'(\x0a\x20\x20\x20\x20vec3'+'f(3.240454'+'2,\x20-1.5371'+'385,\x20-0.49'+'85314),\x0a\x20\x20'+'\x20\x20vec3f(-0'+'.9692660,\x20'+'\x201.8760108'+',\x20\x200.04155'+'60),\x0a\x20\x20\x20\x20v'+'ec3f(0.055'+'6434,\x20-0.2'+'040259,\x20\x201'+'.0572252)\x0a'+');\x0a\x0afn\x20iri'+'descence_s'+'ensitivity'+'(opd:\x20f32,'+'\x20shift:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x20\x20\x20\x20let'+'\x20phase:\x20f3'+'2\x20=\x202.0\x20*\x20'+'PI\x20*\x20opd\x20*'+'\x201.0e-9;\x0a\x20'+'\x20\x20\x20const\x20v'+'al:\x20vec3f\x20'+'=\x20vec3f(5.'+'4856e-13,\x20'+'4.4201e-13'+',\x205.2481e-'+'13);\x0a\x20\x20\x20\x20c'+'onst\x20pos:\x20'+'vec3f\x20=\x20ve'+'c3f(1.6810'+'e+06,\x201.79'+('53e+06,\x202.'+'2084e+06);'+'\x0a\x20\x20\x20\x20const'+'\x20var_:\x20vec'+'3f\x20=\x20vec3f'+'(4.3278e+0'+'9,\x209.3046e'+'+09,\x206.612'+'1e+09);\x0a\x0a\x20'+'\x20\x20\x20var\x20xyz'+':\x20vec3f\x20=\x20'+'val\x20*\x20sqrt'+'(2.0\x20*\x20PI\x20'+'*\x20var_)\x20*\x20'+'cos(pos\x20*\x20'+'phase\x20+\x20sh'+'ift)\x20*\x20exp'+'(-pow(phas'+'e,\x202.0)\x20*\x20'+'var_);\x0a\x20\x20\x20'+'\x20xyz.x\x20=\x20x'+'yz.x\x20+\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+'cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20=\x20xyz\x20/\x20v'+'ec3f(1.068'+'5e-07);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'XYZ_TO_REC'+'709\x20*\x20xyz;'+'\x0a}\x0a\x0afn\x20iri'+'descence_f'+'resnelScal'+'ar(cosThet'+'a:\x20f32,\x20f0'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20x:\x20f32'+'\x20=\x20clamp(1'+'.0\x20-\x20cosTh'+'eta,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'let\x20x2:\x20f3'+'2\x20=\x20x\x20*\x20x;'+'\x0a\x20\x20\x20\x20let\x20x'+'5:\x20f32\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x0a\x0afn'+'\x20iridescen'+'ce_fresnel'+'Vec3(cosTh'+'eta:\x20f32,\x20'+'f0:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'x:\x20f32\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'x2:\x20f32\x20=\x20'+'x\x20*\x20x;\x0a\x20\x20\x20'+'\x20let\x20x5:\x20f'+'32\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x0a\x20\x20'+'\x20\x20return\x20f'+'0\x20+\x20(vec3f'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0afn\x20calcIr'+'idescence('+'outsideIor'+':\x20f32,\x20cos'+'Theta:\x20f32'+',\x20base_f0:'+'\x20vec3f,\x20ir'+'idescenceT'+'hickness:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0a\x20\x20\x20\x20le'+'t\x20iridesce'+'nceIor:\x20f3'+'2\x20=\x20mix(ou')+('tsideIor,\x20'+'uniform.ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20let\x20s'+'inTheta2Sq'+':\x20f32\x20=\x20po'+'w(outsideI'+'or\x20/\x20iride'+'scenceIor,'+'\x202.0)\x20*\x20(1'+'.0\x20-\x20pow(c'+'osTheta,\x202'+'.0));\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2Sq:\x20f32'+'\x20=\x201.0\x20-\x20s'+'inTheta2Sq'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(cosTheta2'+'Sq\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3f(1.0);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2:\x20f32\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20let\x20r'+'0:\x20f32\x20=\x20i'+'ridescence'+'_iorToFres'+'nelScalar('+'iridescenc'+'eIor,\x20outs'+'ideIor);\x0a\x20'+'\x20\x20\x20let\x20r12'+':\x20f32\x20=\x20ir'+'idescence_'+'fresnelSca'+'lar(cosThe'+'ta,\x20r0);\x0a\x20'+'\x20\x20\x20let\x20r21'+':\x20f32\x20=\x20r1'+'2;\x0a\x20\x20\x20\x20let'+'\x20t121:\x20f32'+'\x20=\x201.0\x20-\x20r'+'12;\x0a\x0a\x20\x20\x20\x20l'+'et\x20phi12:\x20'+'f32\x20=\x20sele'+'ct(0.0,\x20PI'+',\x20iridesce'+'nceIor\x20<\x20o'+'utsideIor)'+';\x0a\x20\x20\x20\x20let\x20'+'phi21:\x20f32'+'\x20=\x20PI\x20-\x20ph'+'i12;\x0a\x0a\x20\x20\x20\x20'+'let\x20baseIo'+'r:\x20vec3f\x20='+'\x20iridescen'+'ce_fresnel'+'ToIor(base'+'_f0\x20+\x20vec3'+'f(0.0001))'+';\x0a\x20\x20\x20\x20let\x20'+'r1:\x20vec3f\x20'+'=\x20iridesce'+'nce_iorToF'+'resnelVec3'+'(baseIor,\x20'+'iridescenc'+'eIor);\x0a\x20\x20\x20'+'\x20let\x20r23:\x20'+'vec3f\x20=\x20ir'+'idescence_'+'fresnelVec'+'3(cosTheta'+'2,\x20r1);\x0a\x0a\x20'+'\x20\x20\x20let\x20phi'+'23:\x20vec3f\x20'+'=\x20select(v'+'ec3f(0.0),'+'\x20vec3f(PI)'+',\x20baseIor\x20'+'<\x20vec3f(ir'+'idescenceI'+'or));\x0a\x20\x20\x20\x20'+'let\x20opd:\x20f'+'32\x20=\x202.0\x20*'+'\x20iridescen'+'ceIor\x20*\x20ir'+'idescenceT')+('hickness\x20*'+'\x20cosTheta2'+';\x0a\x20\x20\x20\x20let\x20'+'phi:\x20vec3f'+'\x20=\x20vec3f(p'+'hi21)\x20+\x20ph'+'i23;\x20//\x20Pr'+'omote\x20scal'+'ar\x20phi21\x20t'+'o\x20vec3f\x0a\x0a\x20'+'\x20\x20\x20let\x20r12'+'3Sq:\x20vec3f'+'\x20=\x20clamp(v'+'ec3f(r12)\x20'+'*\x20r23,\x20vec'+'3f(1e-5),\x20'+'vec3f(0.99'+'99));\x0a\x20\x20\x20\x20'+'let\x20r123:\x20'+'vec3f\x20=\x20sq'+'rt(r123Sq)'+';\x0a\x20\x20\x20\x20let\x20'+'rs:\x20vec3f\x20'+'=\x20pow(vec3'+'f(t121),\x20v'+'ec3f(2.0))'+'\x20*\x20r23\x20/\x20('+'vec3f(1.0)'+'\x20-\x20r123Sq)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20c0:\x20vec3f'+'\x20=\x20vec3f(r'+'12)\x20+\x20rs;\x0a'+'\x20\x20\x20\x20var\x20i_'+'irid:\x20vec3'+'f\x20=\x20c0;\x0a\x0a\x20'+'\x20\x20\x20var\x20cm:'+'\x20vec3f\x20=\x20r'+'s\x20-\x20vec3f('+'t121);\x0a\x0a\x20\x20'+'\x20\x20cm\x20=\x20cm\x20'+'*\x20r123;\x0a\x20\x20'+'\x20\x20let\x20sm1:'+'\x20vec3f\x20=\x202'+'.0\x20*\x20iride'+'scence_sen'+'sitivity(1'+'.0\x20*\x20opd,\x20'+'1.0\x20*\x20phi)'+';\x0a\x20\x20\x20\x20i_ir'+'id\x20=\x20i_iri'+'d\x20+\x20cm\x20*\x20s'+'m1;\x0a\x0a\x20\x20\x20\x20c'+'m\x20=\x20cm\x20*\x20r'+'123;\x0a\x20\x20\x20\x20l'+'et\x20sm2:\x20ve'+'c3f\x20=\x202.0\x20'+'*\x20iridesce'+'nce_sensit'+'ivity(2.0\x20'+'*\x20opd,\x202.0'+'\x20*\x20phi);\x0a\x20'+'\x20\x20\x20i_irid\x20'+'=\x20i_irid\x20+'+'\x20cm\x20*\x20sm2;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20max(i_i'+'rid,\x20vec3f'+'(0.0));\x0a}\x0a'+'\x0afn\x20getIri'+'descenceDi'+'ffraction('+'cosTheta:\x20'+'f32,\x20specu'+'larity:\x20ve'+'c3f,\x20iride'+'scenceThic'+'kness:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),xM='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_irides'+'cence:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getIrid'+'escence()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'iridescenc'+'e\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_CON'+'STANT\x0a\x20\x20\x20\x20'+'iridescenc'+'e\x20=\x20irides'+'cence\x20*\x20un'+'iform.mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20=\x20iridesc'+'ence\x20*\x20tex'+'tureSample'+'Bias({STD_'+'IRIDESCENC'+'E_TEXTURE_'+'NAME},\x20{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_CHANNEL}'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dI'+'ridescence'+'\x20=\x20iridesc'+'ence;\x20\x0a}\x0a',TM='\x0auniform\x20m'+'aterial_ir'+'idescenceT'+'hicknessMa'+'x:\x20f32;\x0a\x0a#'+'ifdef\x20STD_'+'IRIDESCENC'+'ETHICKNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20uniform'+'\x20material_'+'iridescenc'+'eThickness'+'Min:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20blen'+'d:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_IRIDESCE'+'NCETHICKNE'+'SS_TEXTURE'+'_NAME},\x20{S'+'TD_IRIDESC'+'ENCETHICKN'+'ESS_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20iridesce'+'nceThickne'+'ss:\x20f32\x20=\x20'+'mix(unifor'+'m.material'+'_iridescen'+'ceThicknes'+'sMin,\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax,\x20bl'+'end);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceT'+'hickness:\x20'+'f32\x20=\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scenceThic'+'kness\x20=\x20ir'+'idescenceT'+'hickness;\x20'+'\x0a}\x0a',wM='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_refr'+'actionInde'+'x:\x20f32;\x0a#e'+'ndif\x0a\x0afn\x20g'+'etIor()\x20{\x0a'+'#ifdef\x20STD'+'_IOR_CONST'+'ANT\x0a\x20\x20\x20\x20dI'+'or\x20=\x20unifo'+'rm.materia'+'l_refracti'+'onIndex;\x0a#'+'else\x0a\x20\x20\x20\x20d'+'Ior\x20=\x201.0\x20'+'/\x201.5;\x0a#en'+'dif\x0a}\x0a',EM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_color'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_direction'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_POINT\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20poi'+'nt\x20lights\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20lig'+'ht{i}_posi'+'tion:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ra'+'dius:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'SPOT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_SPOT\x20//\x20'+'include\x20fu'+'nctionalit'+'y\x20for\x20spot'+'\x20lights\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_di'+'rection:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_inner'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_outer'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20//\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_FALLOFF_'+'SQUARED\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20inv'+'erse\x20squar'+'ed\x20falloff'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_position:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ha'+'lfWidth:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_halfHeigh'+'t:\x20vec3f;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}FALLOFF\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_LINE'+'AR\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20linear\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}FALLOFF'+'\x20==\x20INVERS'+'ESQUARED\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_SQUA'+'RED\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20inverse'+'\x20squared\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20shadow\x20c'+'asting\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowMatri'+'x:\x20mat4x4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20li'+'ght{i}_sha'+'dowIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'{i}_shadow'+'Params:\x20ve'+'c4f;\x20//\x20wi'+'dth,\x20heigh'+'t,\x20bias,\x20r'+'adius\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowSearc'+'hArea:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_cameraPar'+'ams:\x20vec4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'oftShadowP'+'arams:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'directiona'+'l\x20(cascade'+'d)\x20shadows'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20light{i}_'+'shadowMatr'+'ixPalette:'+'\x20array<mat'+'4x4f,\x204>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deDistance'+'s:\x20vec4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deCount:\x20i'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20light{'+'i}_shadowC'+'ascadeBlen'+'d:\x20f32;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20N'+'OT\x20SUPPORT'+'ED\x0a/*\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIG'+'HT{i}SHADO'+'W_PCF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMap:\x20tex'+'ture_depth'+'_2d;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'{i}_shadow'+'MapSampler'+':\x20sampler_'+'comparison'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'light{i}_s'+'hadowMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMapSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIGHT{i}CO'+'OKIE)\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_COOKIE\x20/'+'/\x20include\x20'+'functional'+'ity\x20for\x20co'+'okies\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20OMNI\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20NOT\x20SUPP'+'ORTED\x0a/*\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'plerCube\x20l'+'ight{i}_co'+'okie;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un')+('iform\x20floa'+'t\x20light{i}'+'_cookieInt'+'ensity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20!defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20light{i}'+'_shadowMat'+'rix;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20NO'+'T\x20SUPPORTE'+'D\x0a/*\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_cookie;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_cook'+'ieIntensit'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20!'+'defined(LI'+'GHT{i}CAST'+'SHADOW)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrix;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}COOKIE_TR'+'ANSFORM)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_coo'+'kieMatrix;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20vec2\x20'+'light{i}_c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a*/\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),AM='\x0afn\x20getLig'+'htDiffuse('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',bM='\x0afn\x20evalOm'+'niLight(li'+'ghtPosW:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20vP'+'ositionW\x20-'+'\x20lightPosW'+';\x0a}\x0a',CM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',PM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0afn\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x20\x20\x20'+'\x20//\x20light\x20'+'color\x0a\x20\x20\x20\x20'+'var\x20lightC'+'olor:\x20vec3'+'f\x20=\x20unifor'+'m.light{i}'+'_color;\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20!d'+'efined(LIT'+'_SHADOW_CA'+'TCHER)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ea'+'rly\x20return'+'\x20if\x20the\x20li'+'ght\x20color\x20'+'is\x20black\x20('+'used\x20by\x20sh'+'adow\x20catch'+'er\x20-\x20this\x20'+'way\x20this\x20l'+'ight\x20is\x20ve'+'ry\x20cheap)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(all(ligh'+'tColor\x20==\x20'+'vec3f(0.0,'+'\x200.0,\x200.0)'+'))\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20DIRECTION'+'AL\x20//\x20dire'+'ctional\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightD'+'irNormW\x20=\x20'+'uniform.li'+'ght{i}_dir'+'ection;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20omni\x20o'+'r\x20spot\x20lig'+'ht\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(u'+'niform.lig'+'ht{i}_posi'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tDirNormW\x20'+'=\x20normaliz'+'e(lightDir'+'W);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIGHT'+'{i}COOKIE)'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20SPOT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_FAL'+'LOFF\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+('eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DXform(u'+'niform.lig'+'ht{i}_cook'+'ie,\x20unifor'+'m.light{i}'+'_shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_cookieIn'+'tensity,\x20u'+'niform.lig'+'ht{i}_cook'+'ieMatrix,\x20'+'uniform.li'+'ght{i}_coo'+'kieOffset)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookie2D('+'uniform.li'+'ght{i}_coo'+'kie,\x20unifo'+'rm.light{i'+'}_shadowMa'+'trix,\x20unif'+'orm.light{'+'i}_cookieI'+'ntensity).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClipXfo'+'rm(uniform'+'.light{i}_'+'cookie,\x20un'+'iform.ligh'+'t{i}_shado'+'wMatrix,\x20u'+'niform.lig'+'ht{i}_cook'+'ieIntensit'+'y,\x20uniform'+'.light{i}_'+'cookieMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieOff'+'set).{LIGH'+'T{i}COOKIE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClip(un'+'iform.ligh'+'t{i}_cooki'+'e,\x20uniform'+'.light{i}_'+'shadowMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieInt'+'ensity).{L'+'IGHT{i}COO'+'KIE_CHANNE'+'L};\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookieCub'+'e(uniform.'+'light{i}_c'+'ookie,\x20uni'+'form.light'+'{i}_shadow'+'Matrix,\x20un'+'iform.ligh'+'t{i}_cooki'+'eIntensity'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multipl'+'y\x20light\x20co'+'lor\x20by\x20the'+'\x20cookie\x20at'+'tenuation\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightCol'+'or\x20=\x20light'+'Color\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dista'+'nce\x20fallof'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20PUNCTUAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}FALLOF'+'F\x20==\x20LINEA'+'R\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20=\x20get'+'FalloffLin'+'ear(unifor'+'m.light{i}'+'_radius,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20getFal'+'loffInvSqu'+'ared(unifo'+'rm.light{i'+'}_radius,\x20'+'lightDirW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'non\x20punctu'+'al\x20lights\x20'+'only\x20gets\x20'+'the\x20range\x20'+'window\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20getFall'+'offWindow('+'uniform.li'+'ght{i}_rad'+'ius,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20angle'+'\x20falloff\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20SPO'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d')+('efined(LIG'+'HT{i}COOKI'+'E)\x20||\x20defi'+'ned(LIGHT{'+'i}COOKIE_F'+'ALLOFF)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20dAtten\x20'+'*\x20getSpotE'+'ffect(unif'+'orm.light{'+'i}_directi'+'on,\x20unifor'+'m.light{i}'+'_innerCone'+'Angle,\x20uni'+'form.light'+'{i}_outerC'+'oneAngle,\x20'+'dLightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20if\x20'+'(dAtten\x20<\x20'+'0.00001)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20evaluate\x20'+'area\x20light'+'\x20values\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20RECT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcRectLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20calcDiskL'+'ightValues'+'(uniform.l'+'ight{i}_po'+'sition,\x20un'+'iform.ligh'+'t{i}_halfW'+'idth,\x20unif'+'orm.light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20SPH'+'ERE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20calc'+'SphereLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20dif'+'fuse\x20light'+'ing\x20-\x20LTC\x20'+'lights\x20do\x20'+'not\x20mix\x20di'+'ffuse\x20ligh'+'ting\x20into\x20'+'attenuatio'+'n\x20that\x20aff'+'ects\x20specu'+'lar\x0a\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P')+('UNCTUAL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'attenDiffu'+'se\x20-\x20separ'+'ate\x20diffus'+'e\x20attenuat'+'ion\x20for\x20no'+'n-punctual'+'\x20light\x20sou'+'rces\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20NB:\x20A\x20bet'+'ter\x20approx'+'imation\x20pe'+'rhaps\x20usin'+'g\x20wrap\x20lig'+'hting\x20coul'+'d\x20be\x20imple'+'mented\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20at'+'tenDiffuse'+':\x20f32\x20=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x2016.0\x20is\x20'+'a\x20constant'+'\x20that\x20is\x20i'+'n\x20getFallo'+'ffInvSquar'+'ed()\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20attenDi'+'ffuse:\x20f32'+'\x20=\x20getRect'+'LightDiffu'+'se(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20light'+'DirW,\x20dLig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20DISK\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'attenDiffu'+'se:\x20f32\x20=\x20'+'getDiskLig'+'htDiffuse('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20lightDir'+'W,\x20dLightD'+'irNormW)\x20*'+'\x2016.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20LIGHT'+'{i}SHAPE\x20='+'=\x20SPHERE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20a'+'ttenDiffus'+'e:\x20f32\x20=\x20g'+'etSphereLi'+'ghtDiffuse'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20lightDi'+'rW,\x20dLight'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20one\x20par'+'ameter\x20is\x20'+'unused\x20for')+('\x20punctual\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20dAtten'+'\x20*\x20getLigh'+'tDiffuse(l'+'itArgs_wor'+'ldNormal,\x20'+'vec3(0.0),'+'\x20dLightDir'+'NormW);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20the\x20sha'+'dow\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}CASTS'+'HADOW\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20shadow:'+'\x20f32\x20=\x20get'+'Shadow{i}('+'vec3(0.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20shadow:\x20'+'f32\x20=\x20getS'+'hadow{i}(l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Ap'+'ply\x20shadow'+'\x20intensity'+'\x20to\x20the\x20sh'+'adow\x20value'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadow\x20=\x20mi'+'x(1.0,\x20sha'+'dow,\x20unifo'+'rm.light{i'+'}_shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20dA'+'tten\x20*\x20sha'+'dow;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'SHADOW_CAT'+'CHER)\x20&&\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20accumula'+'te\x20shadows'+'\x20for\x20direc'+'tional\x20lig'+'hts\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSha'+'dowCatcher'+'\x20=\x20dShadow'+'Catcher\x20*\x20'+'shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20-\x20they'+'\x20do\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((('+'attenDiffu'+'se\x20*\x20dAtte'+'n)\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20dLTC'+'SpecFres))')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'((attenDif'+'fuse\x20*\x20dAt'+'ten)\x20*\x20lig'+'htColor);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(AREA_'+'LIGHTS)\x20&&'+'\x20defined(L'+'IT_SPECULA'+'R)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((d'+'Atten\x20*\x20li'+'ghtColor)\x20'+'*\x20(1.0\x20-\x20l'+'itArgs_spe'+'cularity))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'(dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20spe'+'cular\x20ligh'+'ting\x0a\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}AFFECT'+'_SPECULARI'+'TY\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20==\x20REC'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getRe'+'ctLightSpe'+'cular(litA'+'rgs_clearc'+'oat_worldN'+'ormal,\x20dVi'+'ewDirW)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20=\x20ccSpec'+'ularLight\x20'+'+\x20(ccLTCSp'+'ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20SPHER'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_clea'+'rcoat_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20=\x20dS'+'pecularLig'+'ht\x20+\x20(dLTC'+'SpecFres\x20*'+'\x20getRectLi'+'ghtSpecula'+'r(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20(dLT'+'CSpecFres\x20'+'*\x20getDiskL'+'ightSpecul'+'ar(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW)\x20*\x20dAt'+'ten\x20*\x20ligh'+'tColor);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'=\x20dSpecula'+'rLight\x20+\x20('+'dLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20//\x20punctu'+'al\x20light\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20is\x20fr'+'esnel\x20need'+'ed\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC')+('TIONAL\x20&&\x20'+'LIT_FRESNE'+'L_MODEL\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ha'+'lfDirW:\x20ve'+'c3f\x20=\x20norm'+'alize(-dLi'+'ghtDirNorm'+'W\x20+\x20dViewD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20if\x20LTC\x20li'+'ghts\x20are\x20p'+'resent,\x20sp'+'ecular\x20mus'+'t\x20be\x20accum'+'ulated\x20wit'+'h\x20specular'+'ity\x20(specu'+'larity\x20is\x20'+'pre\x20multip'+'lied\x20by\x20pu'+'nctual\x20lig'+'ht\x20fresnel'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'specularCC'+':\x20vec3f\x20=\x20'+'getLightSp'+'ecular(hal'+'fDirW,\x20ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20dLightDir'+'NormW,\x20lit'+'Args_clear'+'coat_gloss'+',\x20dTBN)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightspecu'+'larCC\x20=\x20li'+'ghtspecula'+'rCC\x20*\x20getF'+'resnelCC(d'+'ot(dViewDi'+'rW,\x20halfDi'+'rW));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20=\x20ccSpecu'+'larLight\x20+'+'\x20lightspec'+'ularCC;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sSpecul'+'arLight\x20=\x20'+'sSpecularL'+'ight\x20+\x20(ge'+'tLightSpec'+'ularSheen('+'halfDirW,\x20'+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20dLightDi')+('rNormW,\x20li'+'tArgs_shee'+'n_gloss)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tSpecular:'+'\x20vec3f\x20=\x20g'+'etLightSpe'+'cular(half'+'DirW,\x20dRef'+'lDirW,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20d'+'LightDirNo'+'rmW,\x20litAr'+'gs_gloss,\x20'+'dTBN)\x20*\x20dA'+'tten\x20*\x20lig'+'htColor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'FRESNEL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20=\x20li'+'ghtSpecula'+'r\x20*\x20getFre'+'snel(dot(d'+'ViewDirW,\x20'+'halfDirW),'+'\x20litArgs_g'+'loss,\x20litA'+'rgs_specul'+'arity,\x20iri'+'descenceFr'+'esnel,\x20lit'+'Args_iride'+'scence_int'+'ensity);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightSpecul'+'ar\x20=\x20light'+'Specular\x20*'+'\x20getFresne'+'l(dot(dVie'+'wDirW,\x20hal'+'fDirW),\x20li'+'tArgs_glos'+'s,\x20litArgs'+'_speculari'+'ty);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20light'+'Specular\x20='+'\x20lightSpec'+'ular\x20*\x20lit'+'Args_specu'+'larity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20+\x20li'+'ghtSpecula'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'#endif\x0a'),MM='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowSam'+'pleCoord{i'+'}(shadowTr'+'ansform:\x20m'+'at4x4f,\x20sh'+'adowParams'+':\x20vec4f,\x20w'+'orldPositi'+'on:\x20vec3f,'+'\x20lightPos:'+'\x20vec3f,\x20li'+'ghtDir:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'lightDirNo'+'rm:\x20vec3f,'+'\x20normal:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'surfacePos'+'ition\x20=\x20wo'+'rldPositio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_POINT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+'NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(*l'+'ightDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20surfac'+'ePosition\x20'+'+\x20normal\x20*'+'\x20shadowPar'+'ams.y\x20*\x20cl'+'amp(1.0\x20-\x20'+'dot(normal'+',\x20-lightDi'+'rNorm),\x200.'+'0,\x201.0)\x20*\x20'+'distScale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20*li'+'ghtDir\x20=\x20s'+'urfacePosi'+'tion\x20-\x20lig'+'htPos;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'*lightDir;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}_SHADOW_'+'SAMPLE_NOR'+'MAL_OFFSET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_SAMP'+'LE_ORTHO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dis'+'tScale:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20distSca'+'le:\x20f32\x20=\x20'+'abs(dot(vP'+'ositionW\x20-'+'\x20lightPos,'+'\x20lightDirN'+'orm));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Use'+'\x20var\x20for\x20m'+'odificatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20po'+'sitionInSh'+'adowSpace:'+'\x20vec4f\x20=\x20s'+'hadowTrans'+'form\x20*\x20vec'+'4f(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM')+('PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20=\x20pos'+'itionInSha'+'dowSpace.x'+'yz\x20/\x20posit'+'ionInShado'+'wSpace.w;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+'InShadowSp'+'ace.xy\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xy\x20/\x20posi'+'tionInShad'+'owSpace.w;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20positionI'+'nShadowSpa'+'ce.z\x20=\x20len'+'gth(*light'+'Dir)\x20*\x20sha'+'dowParams.'+'w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20this\x20is\x20c'+'urrently\x20u'+'nused\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SHADO'+'W_SAMPLE_Z'+'_BIAS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20posit'+'ionInShado'+'wSpace.z\x20+'+'=\x20getShado'+'wBias(shad'+'owParams.x'+',\x20shadowPa'+'rams.z);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20sur'+'facePositi'+'on;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20evalu'+'ation\x20func'+'tion\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'w{i}(light'+'DirW_in:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20s'+'hadow\x20casc'+'ades\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_CASC'+'ADES\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20select\x20sh'+'adow\x20casca'+'de\x20matrix\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20casc'+'adeIndex:\x20'+'i32\x20=\x20getS'+'hadowCasca'+'deIndex(un'+'iform.ligh'+'t{i}_shado'+'wCascadeDi'+'stances,\x20u'+'niform.lig'+'ht{i}_shad')+('owCascadeC'+'ount);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_CASCADE'+'_BLEND\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20cascade'+'Index\x20=\x20di'+'therShadow'+'CascadeInd'+'ex(cascade'+'Index,\x20uni'+'form.light'+'{i}_shadow'+'CascadeDis'+'tances,\x20un'+'iform.ligh'+'t{i}_shado'+'wCascadeCo'+'unt,\x20unifo'+'rm.light{i'+'}_shadowCa'+'scadeBlend'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowMatri'+'x:\x20mat4x4f'+'\x20=\x20uniform'+'.light{i}_'+'shadowMatr'+'ixPalette['+'cascadeInd'+'ex];\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20sha'+'dowMatrix:'+'\x20mat4x4f\x20='+'\x20uniform.l'+'ight{i}_sh'+'adowMatrix'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20lightDirA'+'rg\x20=\x20light'+'DirW_in;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20direc'+'tional\x20lig'+'ht\x20does\x20no'+'t\x20have\x20a\x20p'+'osition\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20getSh'+'adowSample'+'Coord{i}(s'+'hadowMatri'+'x,\x20uniform'+'.light{i}_'+'shadowPara'+'ms,\x20vPosit'+'ionW,\x20vec3'+'f(0.0),\x20&l'+'ightDirArg'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owCoord:\x20v'+'ec3f\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_shadowPa'+'rams,\x20vPos'+'itionW,\x20un'+'iform.ligh'+'t{i}_posit'+'ion,\x20&ligh'+'tDirArg,\x20d'+'LightDirNo'+'rmW,\x20dVert'+'exNormalW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('#endif\x0a\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Fade\x20direc'+'tional\x20sha'+'dow\x20at\x20the'+'\x20far\x20dista'+'nce\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'owCoord\x20=\x20'+'fadeShadow'+'(shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowCas'+'cadeDistan'+'ces);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20-----\x20s'+'ample\x20the\x20'+'shadow\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20---'+'--\x20directi'+'onal\x20light'+'\x20-----\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20VSM_'+'16F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowVSM1'+'6(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s,\x205.54);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20VS'+'M_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowVS'+'M32(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x2015.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2f(lengt'+'h(uniform.'+'light{i}_h'+'alfWidth),'+'\x20length(un'+'iform.ligh'+'t{i}_halfH'+'eight))\x20*\x20'+'uniform.li'+'ght{i}_sha'+'dowSearchA'+'rea;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCSS(ligh'+'t{i}_shado'+'wMap,\x20ligh'+'t{i}_shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20unif'+'orm.light{'+'i}_shadowP'+'arams,\x20uni'+'form.light'+'{i}_camera'+'Params,\x20sh'+'adowSearch'+'Area,\x20ligh'+'tDirW_in);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CSS(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x20unifo'+'rm.light{i'+'}_cameraPa'+'rams,\x20unif'+'orm.light{'+'i}_softSha'+'dowParams,'+'\x20lightDirW'+'_in);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF1_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF1x1('+'light{i}_s'+'hadowMap,\x20'+'light{i}_s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'uniform.li'+'ght{i}_sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_16F\x20|'+'|\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF3_3'+'2F\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowPCF3x'+'3(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_16F'+'\x20||\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF5')+('_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x20//\x20-'+'----\x20spot\x20'+'light\x20----'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM16'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x205.54,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM32'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x2015.0,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20!=\x20PU'+'NCTUAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f\x20=\x20vec'+'2f(length('+'uniform.li'+'ght{i}_hal'+'fWidth),\x20l'+'ength(unif'+'orm.light{'+'i}_halfHei'+'ght))\x20*\x20un'+'iform.ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowSearc'+'hArea:\x20vec')+('2f\x20=\x20vec2f'+'(uniform.l'+'ight{i}_sh'+'adowSearch'+'Area);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCSS'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x20uniform.'+'light{i}_c'+'ameraParam'+'s,\x20shadowS'+'earchArea,'+'\x20lightDirW'+'_in);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'16F\x20||\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF1_32F\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF1x1'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'5_16F\x20||\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF5_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCF5'+'x5(light{i'+'}_shadowMa'+'p,\x20light{i'+'}_shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20uniform'+'.light{i}_'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20')+('\x20\x20\x20#endif\x0a'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x20//\x20--'+'---\x20omni\x20l'+'ight\x20-----'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f;\x20//\x20U'+'se\x20var\x20bec'+'ause\x20assig'+'ned\x20in\x20if/'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owSearchAr'+'ea:\x20vec2f\x20'+'=\x20vec2f(le'+'ngth(unifo'+'rm.light{i'+'}_halfWidt'+'h),\x20length'+'(uniform.l'+'ight{i}_ha'+'lfHeight))'+'\x20*\x20uniform'+'.light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'SearchArea'+':\x20vec2f\x20=\x20'+'vec2f(unif'+'orm.light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20un'+'iform.ligh'+'t{i}_camer'+'aParams,\x20s'+'hadowSearc'+'hArea,\x20lig'+'htDirW_in)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in')+(');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),IM='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'var\x20areaLi'+'ghtsLutTex'+'1:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20areaLight'+'sLutTex2:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20areaL'+'ightsLutTe'+'x2Sampler:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'omni\x20/\x20spo'+'t\x20PCSS\x20is\x20'+('not\x20suppor'+'ted\x20on\x20Web'+'GPU\x20curren'+'tly,\x20as\x20th'+'is\x20is\x20only'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0a\x20\x20\x20\x20'+'//\x20#includ'+'e\x20\x22shadowP'+'CSSPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22shadowSof'+'tPS\x22\x0a#endi'+'f\x0a\x0a#if\x20def'+'ined(SHADO'+'W_KIND_VSM'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owEVSMPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22falloff'+'LinearPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_SQUARED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fallof'+'fInvSquare'+'dPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_CODE_L'+'IGHTS_POIN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDirPointP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22spotPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'CODE_COOKI'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22cook'+'iePS\x22\x0a#end'+'if\x0a\x0a//\x20clu'+'stered\x20lig'+'hting\x0a#ifd'+'ef\x20LIT_CLU'+'STERED_LIG'+'HTS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22cl'+'usteredLig'+'htPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIGHT_COU'+'NT\x20>\x200\x0a\x20\x20\x20'+'\x20//\x20LOOP\x20-'+'\x20generate\x20'+'shadow\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionShadow'+'PS,\x20LIGHT_'+'COUNT\x22\x0a\x0a\x20\x20'+'\x20\x20//\x20LOOP\x20'+'-\x20generate'+'\x20light\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionLightP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a'),DM='\x0afn\x20addLig'+'htMap(\x0a\x20\x20\x20'+'\x20lightmap:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20dir:\x20vec'+'3f,\x0a\x20\x20\x20\x20wo'+'rldNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20viewDir:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20reflecti'+'onDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20ve'+'rtexNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20tbn:\x20ma'+'t3x3f\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20iridesce'+'nceIntensi'+'ty:\x20f32\x0a#e'+'ndif\x0a)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x20&&'+'\x20defined(L'+'IT_DIR_LIG'+'HTMAP)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'dot(dir,\x20d'+'ir)\x20<\x200.00'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20dD'+'iffuseLigh'+'t\x20+\x20lightm'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20vli'+'ght:\x20f32\x20='+'\x20saturate('+'dot(dir,\x20-'+'vertexNorm'+'al));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20flight:\x20'+'f32\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20nlig'+'ht:\x20f32\x20=\x20'+'(flight\x20/\x20'+'max(vlight'+',\x200.01))\x20*'+'\x200.5;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20=\x20dDiff'+'useLight\x20+'+'\x20lightmap\x20'+'*\x20nlight\x20*'+'\x202.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20halfDir'+':\x20vec3f\x20=\x20'+'normalize('+'-dir\x20+\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20specula'+'rLight:\x20ve'+'c3f\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+('_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'=\x20specular'+'Light\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(d'+'ot(viewDir'+',\x20halfDir)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gloss,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20,\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceI'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20specularL'+'ight;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'non-direct'+'ional\x20ligh'+'tmap\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20+\x20ligh'+'tmap;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),LM='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'var<privat'+'e>\x20dLightm'+'apDir:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'dirLightMa'+'p:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_dirL'+'ightMapSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0afn\x20getL'+'ightMap()\x20'+'{\x0a\x0a\x20\x20\x20\x20dLi'+'ghtmap\x20=\x20v'+'ec3f(1.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_TEXTURE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Lightmap\x20='+'\x20dLightmap'+'\x20*\x20{STD_LI'+'GHT_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_LIGHT_T'+'EXTURE_NAM'+'E},\x20{STD_L'+'IGHT_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+')).{STD_LI'+'GHT_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_LIGHTMAP'+'_DIR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20dir:\x20vec3'+'f\x20=\x20textur'+'eSampleBia'+'s(texture_'+'dirLightMa'+'p,\x20texture'+'_dirLightM'+'apSampler,'+'\x20{STD_LIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).xyz\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20d'+'irDot\x20=\x20do'+'t(dir,\x20dir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tmapDir\x20=\x20'+'select(vec'+'3(0.0),\x20di'+'r\x20/\x20sqrt(d'+'irDot),\x20di'+'rDot\x20>\x200.0'+'01);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dL'+'ightmap\x20=\x20'+'dLightmap\x20'+'*\x20saturate'+'(vVertexCo'+'lor.{STD_L'+'IGHT_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a',RM='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'fn\x20calcLig'+'htSpecular'+'(gloss:\x20f3'+'2,\x20worldNo'+'rmal:\x20vec3'+'f,\x20viewDir'+':\x20vec3f,\x20h'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'tbn:\x20mat3x'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20PI:\x20f32\x20='+'\x203.1415926'+'53589793;\x0a'+'\x20\x20\x20\x20let\x20ro'+'ughness:\x20f'+'32\x20=\x20max(('+'1.0\x20-\x20glos'+'s)\x20*\x20(1.0\x20'+'-\x20gloss),\x20'+'0.001);\x0a\x20\x20'+'\x20\x20let\x20alph'+'aRoughness'+':\x20f32\x20=\x20ro'+'ughness\x20*\x20'+'roughness;'+'\x0a\x20\x20\x20\x20let\x20a'+'nisotropy:'+'\x20f32\x20=\x20dAn'+'isotropy;\x0a'+'\x20\x20\x20\x20let\x20di'+'rection:\x20v'+'ec2f\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x0a\x20'+'\x20\x20\x20let\x20at:'+'\x20f32\x20=\x20mix'+'(alphaRoug'+'hness,\x201.0'+',\x20anisotro'+'py\x20*\x20aniso'+'tropy);\x0a\x20\x20'+'\x20\x20let\x20ab:\x20'+'f32\x20=\x20clam'+'p(alphaRou'+'ghness,\x200.'+'001,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20NoH:\x20f32\x20'+'=\x20dot(worl'+'dNormal,\x20h'+');\x0a\x20\x20\x20\x20let'+'\x20ToH:\x20f32\x20'+'=\x20dot(anis'+'otropicT,\x20'+'h);\x0a\x20\x20\x20\x20le'+'t\x20BoH:\x20f32'+'\x20=\x20dot(ani'+'sotropicB,'+'\x20h);\x0a\x0a\x20\x20\x20\x20'+'let\x20a2:\x20f3'+'2\x20=\x20at\x20*\x20a'+'b;\x0a\x20\x20\x20\x20let'+'\x20v:\x20vec3f\x20'+'=\x20vec3f(ab'+'\x20*\x20ToH,\x20at'+'\x20*\x20BoH,\x20a2'+'\x20*\x20NoH);\x0a\x20'+'\x20\x20\x20let\x20v2:'+'\x20f32\x20=\x20dot'+'(v,\x20v);\x0a\x20\x20'+'\x20\x20let\x20w2:\x20'+'f32\x20=\x20a2\x20/'+'\x20v2;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20let\x20To'+'V:\x20f32\x20=\x20d'+'ot(anisotr'+'opicT,\x20vie'+('wDir);\x0a\x20\x20\x20'+'\x20let\x20BoV:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20viewDi'+'r);\x0a\x20\x20\x20\x20le'+'t\x20ToL:\x20f32'+'\x20=\x20dot(ani'+'sotropicT,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20let\x20BoL:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20let\x20No'+'V:\x20f32\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'let\x20NoL:\x20f'+'32\x20=\x20dot(w'+'orldNormal'+',\x20-lightDi'+'rNorm);\x0a\x0a\x20'+'\x20\x20\x20let\x20lam'+'bdaV:\x20f32\x20'+'=\x20NoL\x20*\x20le'+'ngth(vec3f'+'(at\x20*\x20ToV,'+'\x20ab\x20*\x20BoV,'+'\x20NoV));\x0a\x20\x20'+'\x20\x20let\x20lamb'+'daL:\x20f32\x20='+'\x20NoV\x20*\x20len'+'gth(vec3f('+'at\x20*\x20ToL,\x20'+'ab\x20*\x20BoL,\x20'+'NoL));\x0a\x20\x20\x20'+'\x20let\x20G:\x20f3'+'2\x20=\x200.5\x20/\x20'+'(lambdaV\x20+'+'\x20lambdaL);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20D\x20*\x20G;\x0a'+'}\x0a\x0afn\x20getL'+'ightSpecul'+'ar(h:\x20vec3'+'f,\x20reflDir'+':\x20vec3f,\x20w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'DirNorm:\x20v'+'ec3f,\x20glos'+'s:\x20f32,\x20tb'+'n:\x20mat3x3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20calcLigh'+'tSpecular('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir,\x20h'+',\x20lightDir'+'Norm,\x20tbn)'+';\x0a}\x0a'),OM='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afn\x20c'+'alcLightSp'+'ecular(glo'+'ss:\x20f32,\x20w'+'orldNormal'+':\x20vec3f,\x20h'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20nh:\x20'+'f32\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'specPow:\x20f'+'32\x20=\x20exp2('+'gloss\x20*\x2011'+'.0);\x20//\x20gl'+'ossiness\x20i'+'s\x20linear,\x20'+'power\x20is\x20n'+'ot;\x200\x20-\x2020'+'48\x0a\x0a\x20\x20\x20\x20//'+'\x20Hack:\x20On\x20'+'Mac\x20OS\x20X,\x20'+'calling\x20po'+'w\x20with\x20zer'+'o\x20for\x20the\x20'+'exponent\x20g'+'enerates\x20h'+'ideous\x20art'+'ifacts\x20so\x20'+'bias\x20up\x20a\x20'+'little\x0a\x20\x20\x20'+'\x20specPow\x20='+'\x20max(specP'+'ow,\x200.0001'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20pow(n'+'h,\x20specPow'+')\x20*\x20(specP'+'ow\x20+\x202.0)\x20'+'/\x208.0;\x0a}\x0a\x0a'+'fn\x20getLigh'+'tSpecular('+'h:\x20vec3f,\x20'+'reflDir:\x20v'+'ec3f,\x20worl'+'dNormal:\x20v'+'ec3f,\x20view'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20tbn:\x20'+'mat3x3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',FM='\x0a\x0afn\x20sheen'+'D(normal:\x20'+'vec3f,\x20h:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'PI:\x20f32\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20let\x20inv'+'R:\x20f32\x20=\x201'+'.0\x20/\x20(roug'+'hness\x20*\x20ro'+'ughness);\x0a'+'\x20\x20\x20\x20var\x20co'+'s2h:\x20f32\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20=\x20c'+'os2h\x20*\x20cos'+'2h;\x0a\x20\x20\x20\x20le'+'t\x20sin2h:\x20f'+'32\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'fn\x20sheenV('+'normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20light:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20max(dot'+'(normal,\x20v'+'iewDir),\x200'+'.000001);\x0a'+'\x20\x20\x20\x20let\x20No'+'L:\x20f32\x20=\x20m'+'ax(dot(nor'+'mal,\x20light'+'),\x200.00000'+'1);\x0a\x20\x20\x20\x20re'+'turn\x201.0\x20/'+'\x20(4.0\x20*\x20(N'+'oL\x20+\x20NoV\x20-'+'\x20NoL\x20*\x20NoV'+'));\x0a}\x0a\x0afn\x20'+'getLightSp'+'ecularShee'+'n(h:\x20vec3f'+',\x20worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f,\x20li'+'ghtDirNorm'+':\x20vec3f,\x20s'+'heenGloss:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20let\x20V:\x20f'+'32\x20=\x20sheen'+'V(worldNor'+'mal,\x20viewD'+'ir,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20return'+'\x20D\x20*\x20V;\x0a}',NM='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afn\x20linear'+'izeDepthWi'+'thParams(z'+':\x20f32,\x20cam'+'eraParams:'+'\x20vec4f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20if\x20(camer'+'aParams.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(came'+'raParams.z'+'\x20*\x20cameraP'+'arams.y)\x20/'+'\x20(cameraPa'+'rams.y\x20+\x20z'+'\x20*\x20(camera'+'Params.z\x20-'+'\x20cameraPar'+'ams.y));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20cam'+'eraParams.'+'z\x20+\x20z\x20*\x20(c'+'ameraParam'+'s.y\x20-\x20came'+'raParams.z'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0a#ifndef\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20#de'+'fine\x20CAMER'+'APLANES\x0a\x20\x20'+'\x20\x20uniform\x20'+'camera_par'+'ams:\x20vec4f'+';\x20\x20\x20//\x20x:\x20'+'1\x20/\x20camera'+'_far,\x20\x20\x20\x20\x20'+'\x20y:\x20camera'+'_far,\x20\x20\x20\x20\x20'+'z:\x20camera_'+'near,\x20\x20\x20\x20\x20'+'\x20\x20\x20w:\x20is_o'+'rtho\x0a#endi'+'f\x0a\x0afn\x20line'+'arizeDepth'+'(z:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pthWithPar'+'ams(z,\x20uni'+'form.camer'+'a_params);'+'\x0a}\x0a#endif\x20'+'//\x20LINEARI'+'ZE_DEPTH\x0a',kM='\x0afn\x20evalua'+'teBackend('+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'//\x20apply\x20S'+'SAO\x20during'+'\x20lighting\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SSAO\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_ao\x20='+'\x20litArgs_a'+'o\x20*\x20textur'+'eSampleLev'+'el(ssaoTex'+'ture,\x20ssao'+'TextureSam'+'pler,\x20pcPo'+'sition.xy\x20'+'*\x20uniform.'+'ssaoTextur'+'eSizeInv,\x20'+'0.0).r;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nsform\x20tan'+'gent\x20space'+'\x20normals\x20t'+'o\x20world\x20sp'+'ace\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_N'+'EEDS_NORMA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getReflD'+'ir(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20litAr'+'gs_gloss,\x20'+'dTBN);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'DirW\x20=\x20nor'+'malize(-re'+'flect(dVie'+'wDirW,\x20lit'+'Args_clear'+'coat_world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'f0:\x20f32\x20=\x20'+'1.0\x20/\x20litA'+'rgs_ior;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20f0\x20=\x20(f0\x20'+'-\x201.0)\x20/\x20('+'f0\x20+\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20f0\x20=\x20f0'+'\x20*\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+('ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceF'+'resnel:\x20ve'+'c3f\x20=\x20getI'+'ridescence'+'Diffractio'+'n(saturate'+'(dot(dView'+'DirW,\x20litA'+'rgs_worldN'+'ormal)),\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_ir'+'idescence_'+'thickness)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20ambi'+'ent\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddAmbient('+'litArgs_wo'+'rldNormal)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20=\x20d'+'DiffuseLig'+'ht\x20*\x20(1.0\x20'+'-\x20litArgs_'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20move\x20ambi'+'ent\x20color\x20'+'out\x20of\x20dif'+'fuse\x20(used'+'\x20by\x20Lightm'+'apper,\x20to\x20'+'multiply\x20a'+'mbient\x20col'+'or\x20by\x20accu'+'mulated\x20AO'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SEPARATE_'+'AMBIENT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20dAmbie'+'ntLight:\x20v'+'ec3f\x20=\x20dDi'+'ffuseLight'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'vec3(0.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20unif'+'orm.materi'+'al_ambient'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20LI'+'T_OCCLUDE_'+'DIRECT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeDiff'+'use(litArg'+'s_ao);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTMAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20litArgs_l'+'ightmap,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmapDi'+'r,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dViewDirW,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dReflD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dVertexNor'+'malW,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'BN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_irides'+'cence_inte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTING\x20||'+'\x20LIT_REFLE'+'CTIONS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddReflecti'+'onCC(ccRef'+'lDirW,\x20lit'+'Args_clear'+'coat_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'ccFresnel\x20'+'=\x20getFresn'+'elCC(dot(d'+'ViewDirW,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccRefle'+'ction\x20=\x20cc'+'Reflection'+'\x20*\x20ccFresn'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccFr'+'esnel\x20=\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'ection\x20=\x20c'+'cReflectio'+'n\x20*\x20litArg'+'s_specular'+'ityFactor;')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20addR'+'eflectionS'+'heen(litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20lit'+'Args_sheen'+'_gloss);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20Fresne'+'l\x20has\x20to\x20b'+'e\x20applied\x20'+'to\x20reflect'+'ions\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'Reflection'+'(dReflDirW'+',\x20litArgs_'+'gloss);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_FRESNEL_'+'MODEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction.rgb\x20'+'*\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'dReflectio'+'n.rgb\x20*\x20li'+'tArgs_spec'+'ularity,\x20d'+'Reflection'+'.a);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve')+('c4f(dRefle'+'ction.rgb\x20'+'*\x20litArgs_'+'specularit'+'yFactor,\x20d'+'Reflection'+'.a);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20AREA'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20*'+'\x20litArgs_s'+'pecularity'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20evalua'+'te\x20materia'+'l\x20based\x20ar'+'ea\x20lights\x20'+'data,\x20shar'+'ed\x20by\x20all\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcLTCLight'+'Values(lit'+'Args_gloss'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20litArg'+'s_specular'+'ity,\x20litAr'+'gs_clearco'+'at_gloss,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20evalua'+'te\x20all\x20non'+'-clustered'+'\x20lights\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22lightEval'+'uationPS,\x20'+'LIGHT_COUN'+'T\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'USTERED_LI'+'GHTS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'ClusteredL'+'ights(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dR'+'eflDirW,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_CLEARCOAT'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20ccRe'+'flDirW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'litArgs_sp'+'ecularity,'+'\x20dVertexNo'+'rmalW,\x20dTB'+'N,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_g'+'loss,\x20litA'+'rgs_sheen_'+'gloss,\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20AREA_LI'+'GHTS\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x20has'+'\x20to\x20be\x20acc'+'umulated\x20d'+'ifferently'+'\x20if\x20we\x20wan'+'t\x20area\x20lig'+'hts\x20to\x20loo'+'k\x20correct\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_clearc'+'oat_specul'+'arity\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20vec3(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addRefra'+'ction(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_worldNorm'+'al,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dViewDirW'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_specu'+'larity,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr')+('gs_albedo,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_tran'+'smission,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_ior,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_dispers'+'ion\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'ambient\x20oc'+'clusion\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_OCCLU'+'DE_DIRECT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeD'+'iffuse(lit'+'Args_ao);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeSpec'+'ular(litAr'+'gs_gloss,\x20'+'litArgs_ao'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20*\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20!defi'+'ned(LIT_OP'+'ACITY_FADE'+'S_SPECULAR'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'==\x20NORMAL\x20'+'||\x20LIT_BLE'+'ND_TYPE\x20=='+'\x20PREMULTIP'+'LIED\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specLum:'+'\x20f32\x20=\x20dot'+'((dSpecula'+'rLight\x20+\x20d'+'Reflection'+'.rgb\x20*\x20dRe'+'flection.a'+'),\x20vec3f(\x20'+'0.2126,\x200.'+'7152,\x200.07'+'22\x20));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'Lum\x20=\x20spec'+'Lum\x20+\x20dot('+'ccSpecular'+'Light\x20*\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20+\x20'+'ccReflecti'+'on\x20*\x20litAr'+'gs_clearco'+'at_specula'+'rity,\x20vec3'+'f(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20c'+'lamp(litAr'+'gs_opacity'+'\x20+\x20gammaCo'+'rrectInput'+'(specLum),'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_opaci'+'ty\x20=\x20litAr'+'gs_opacity'+'\x20*\x20uniform'+'.material_'+'alphaFade;'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20end\x20chunk'+'s\x20-\x20when\x20b'+'aking\x20ligh'+'tmap\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTMAP_B'+'AKING\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_COLOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22b'+'akeLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_LIGH'+'TMAP_BAKIN'+'G_DIR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22ba'+'keDirLmEnd'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'end\x20chunks'+'\x20-\x20in\x20all\x20'+'other\x20case'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'endPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22outpu'+'tAlphaPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_MSD'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20apply'+'Msdf(outpu'+'t.color);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22outp'+'utPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'debugOutpu'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHADOW_CA'+'TCHER\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20when\x20t'+'he\x20shadow\x20'+'catcher\x20is'+'\x20enabled\x20-'+'\x20accumulat'+'ed\x20shadows')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'vec3f(dSha'+'dowCatcher'+'),\x20output.'+'color.a);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),UM='\x0a\x0a//\x20globa'+'ls\x0avar<pri'+'vate>\x20sRef'+'lection:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'VertexNorm'+'alW:\x20vec3f'+';\x0avar<priv'+'ate>\x20dTang'+'entW:\x20vec3'+'f;\x0avar<pri'+'vate>\x20dBin'+'ormalW:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dV'+'iewDirW:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'ReflDirW:\x20'+'vec3f;\x0avar'+'<private>\x20'+'ccReflDirW'+':\x20vec3f;\x0a\x0a'+'//\x20Per-lig'+'ht\x20tempora'+'ries\x0avar<p'+'rivate>\x20dL'+'ightDirNor'+'mW:\x20vec3f;'+'\x0avar<priva'+'te>\x20dAtten'+':\x20f32;\x0a\x0a//'+'\x20Outputs\x0av'+'ar<private'+'>\x20dTBN:\x20ma'+'t3x3f;\x0avar'+'<private>\x20'+'dReflectio'+'n:\x20vec4f;\x0a'+'var<privat'+'e>\x20dDiffus'+'eLight:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccFres'+'nel:\x20f32;\x0a'+'var<privat'+'e>\x20ccRefle'+'ction:\x20vec'+'3f;\x0avar<pr'+'ivate>\x20ccS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccSpec'+'ularityNoF'+'res:\x20f32;\x0a'+'var<privat'+'e>\x20sSpecul'+'arLight:\x20v'+'ec3f;\x0a\x0a//\x20'+'FRAGMENT\x20S'+'HADER\x20INPU'+'TS:\x20UNIFOR'+'MS\x0a\x0a#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_dis'+'persion:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_al'+'phaFade:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_SSAO\x0a\x20\x20'+'\x20\x20var\x20ssao'+'Texture\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20ssaoT'+'extureSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20u'+'niform\x20ssa'+'oTextureSi'+'zeInv:\x20vec'+'2f;\x0a#endif'+'\x0a\x0a//\x20light'+'ing\x20and\x20sh'+'adowing\x20de'+('clarations'+'\x0a\x0a#ifdef\x20L'+'IT_SHADOW_'+'CATCHER\x0a\x20\x20'+'\x20\x20//\x20a\x20var'+'iable\x20to\x20a'+'ccumulate\x20'+'shadows\x20fo'+'r\x20shadow\x20c'+'atcher\x20mat'+'erials\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dShado'+'wCatcher:\x20'+'f32\x20=\x201.0;'+'\x0a#endif\x0a\x0a/'+'/\x20LOOP\x20-\x20u'+'niform\x20dec'+'larations\x20'+'for\x20all\x20no'+'n-clustere'+'d\x20lights\x0a#'+'if\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightDe'+'clarationP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'f\x20LIT_FRES'+'NEL_MODEL\x20'+'==\x20NONE\x20&&'+'\x20!defined('+'LIT_REFLEC'+'TIONS)\x20&&\x20'+'!defined(L'+'IT_DIFFUSE'+'_MAP)\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_OLD'+'_AMBIENT\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0a//'+'\x20lightmap\x20'+'baking\x0a#if'+'def\x20STD_LI'+'GHTMAP_DIR'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20bakeDir'+':\x20f32;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_ADD_AMBIE'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20ambie'+'ntBakeOccl'+'usionContr'+'ast:\x20f32;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20ambientB'+'akeOcclusi'+'onBrightne'+'ss:\x20f32;\x0a#'+'endif\x0a'),BM='\x0a\x0a@fragmen'+'t\x0afn\x20fragm'+'entMain(in'+'put:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ccSpecular'+'Light\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20cc'+'Reflection'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_N'+'ONE_SLICE_'+'MODE\x20==\x20SL'+'ICED\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22startNi'+'neSlicedPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20LIT_NONE'+'_SLICE_MOD'+'E\x20==\x20TILED'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'tartNineSl'+'icedTiledP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'NEEDS_NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dVertexNo'+'rmalW\x20=\x20no'+'rmalize(vN'+'ormalW);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_T'+'ANGENTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_HEIG'+'HTS)\x20||\x20de'+'fined(LIT_'+'USE_NORMAL'+'S)\x20||\x20defi'+'ned(LIT_US'+'E_CLEARCOA'+'T_NORMALS)'+'\x20||\x20define'+'d(LIT_GGX_'+'SPECULAR)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dTan'+'gentW\x20=\x20vT'+'angentW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dBino'+'rmalW\x20=\x20vB'+'inormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20getView'+'Dir();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_TBN'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getTBN('+'dTangentW,'+'\x20dBinormal'+'W,\x20dVertex'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'andleTwoSi'+'dedLightin'+'g();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+('\x0a\x20\x20\x20\x20//\x20in'+'voke\x20front'+'end\x20functi'+'ons\x0a\x20\x20\x20\x20ev'+'aluateFron'+'tend();\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22debugPr'+'ocessFront'+'endPS\x22\x0a\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput\x20='+'\x20evaluateB'+'ackend();\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainEndP'+'S\x22\x0a\x0a\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a}\x0a'),zM='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20material_'+'ambient:\x20v'+'ec3f;\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_LIGHTING'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22light'+'SpecularAn'+'isoGGXPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tSpecularB'+'linnPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0a#include'+'\x20\x22combineP'+'S\x22\x0a\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapAddP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22am'+'bientPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_MS'+'DF\x0a\x20\x20\x20\x20#in'+'clude\x20\x22msd'+'fPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22viewDirPS'+'\x22\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_GGX_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirAni'+'soPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22reflDirP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20f'+'unctionali')+('ty\x0a#includ'+'e\x20\x22lightin'+'gPS\x22\x0a\x0a'),VM='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',GM='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',HM='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a#endif'+'\x0a\x0a#ifdef\x20N'+'INESLICED\x0a'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vMask:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20varying\x20v'+'TiledUv:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dMaskG'+'lobal:\x20vec'+'2f;\x0a\x20\x20\x20\x20va'+'r<private>'+'\x20dTiledUvG'+'lobal:\x20vec'+'2f;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'uterScale:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'atlasRect:'+'\x20vec4f;\x0a\x0a#'+'endif\x0a\x0avar'+'<private>\x20'+'dPositionW'+':\x20vec3f;\x0av'+'ar<private'+'>\x20dModelMa'+'trix:\x20mat4'+'x4f;\x0a\x0a#inc'+'lude\x20\x22tran'+'sformCoreV'+'S\x22\x0a\x0a#ifdef'+'\x20UV0\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ertex_texC'+'oord0:\x20vec'+'2f;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'rtex_texCo'+'ord1:\x20vec2'+'f;\x0a\x20\x20\x20\x20#in'+'clude\x20\x22uv1'+'VS\x22\x0a#endif'+'\x0a\x0a\x0a#ifdef\x20'+'LINEAR_DEP'+'TH\x0a\x20\x20\x20\x20#if'+'ndef\x20VIEWM'+'ATRIX\x0a\x20\x20\x20\x20'+'#define\x20VI'+'EWMATRIX\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#inc'+'lude\x20\x22tran'+'sformVS\x22\x0a\x0a'+'#ifdef\x20NOR'+'MALS\x0a\x20\x20\x20\x20#'+'include\x20\x22n'+'ormalCoreV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malVS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20TANGENTS'+'\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_tangent:'+'\x20vec4f;\x0a#e'+'ndif\x0a\x0a//\x20e'+'xpand\x20unif'+'orms\x20for\x20u'+'v\x20transfor'+'ms\x0a#includ'+'e\x20\x22uvTrans'+'formUnifor'+'msPS,\x20UV_T'+'RANSFORMS_'+('COUNT\x22\x0a\x0a#i'+'fdef\x20MSDF\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22msdfVS'+'\x22\x0a#endif\x0a\x0a'+'#include\x20\x20'+'\x22litUserCo'+'deVS\x22\x0a\x0a@ve'+'rtex\x0afn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'MainStartV'+'S\x22\x0a\x0a\x20\x20\x20\x20va'+'r\x20output\x20:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20get'+'Position()'+';\x0a\x20\x20\x20\x20outp'+'ut.vPositi'+'onW\x20=\x20getW'+'orldPositi'+'on();\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20NO'+'RMALS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vNormalW\x20'+'=\x20getNorma'+'l();\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TA'+'NGENTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vTangent'+'W\x20=\x20normal'+'ize(dNorma'+'lMatrix\x20*\x20'+'vertex_tan'+'gent.xyz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vBin'+'ormalW\x20=\x20c'+'ross(outpu'+'t.vNormalW'+',\x20output.v'+'TangentW)\x20'+'*\x20vertex_t'+'angent.w;\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(GG'+'X_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20UV0'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f\x20=\x20getU'+'v0();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20UV0_UNMOD'+'IFIED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20uv1:\x20vec2'+'f\x20=\x20getUv1'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20U'+'V1_UNMODIF'+'IED\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.vUv1\x20=\x20'+'uv1;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'xpand\x20code'+'\x20for\x20uv\x20tr'+'ansforms\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22uvTrans')+('formVS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20VERTEX_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition'+',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-(uniform'+'.matrix_vi'+'ew\x20*\x20vec4f'+'(output.vP'+'ositionW,\x20'+'1.0)).z;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MSDF\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unpac'+'kMsdfParam'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.outline_c'+'olor\x20=\x20dOu'+'tlineColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.out'+'line_thick'+'ness\x20=\x20dOu'+'tlineThick'+'ness;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.shadow_co'+'lor\x20=\x20dSha'+'dowColor;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.shado'+'w_offset\x20='+'\x20dShadowOf'+'fset;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vMask'+'\x20=\x20dMaskGl'+'obal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vTiledUv\x20'+'=\x20dTiledUv'+'Global;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndVS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),WM='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20evaluateF'+'rontend();'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PICK_PA'+'SS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20getP'+'ickOutput('+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20float2ve'+'c4(vLinear'+'Depth);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndPS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',$M='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avar<priva'+'te>\x20litArg'+'s_albedo:\x20'+'vec3f;\x0a\x0a//'+'\x20Transpare'+'ncy\x0avar<pr'+'ivate>\x20lit'+'Args_opaci'+'ty:\x20f32;\x0a\x0a'+'//\x20Emissio'+'n\x20color\x0ava'+'r<private>'+'\x20litArgs_e'+'mission:\x20v'+'ec3f;\x0a\x0a//\x20'+'Normal\x20dir'+'ection\x20in\x20'+'world\x20spac'+'e\x0avar<priv'+'ate>\x20litAr'+'gs_worldNo'+'rmal:\x20vec3'+'f;\x0a\x0a//\x20Amb'+'ient\x20occlu'+'sion\x20amoun'+'t,\x20range\x20['+'0..1]\x0avar<'+'private>\x20l'+'itArgs_ao:'+'\x20f32;\x0a\x0a//\x20'+'Light\x20map\x20'+'color\x0avar<'+'private>\x20l'+'itArgs_lig'+'htmap:\x20vec'+'3f;\x0a\x0a//\x20Li'+'ght\x20map\x20di'+'rection\x0ava'+'r<private>'+'\x20litArgs_l'+'ightmapDir'+':\x20vec3f;\x0a\x0a'+'//\x20Surface'+'\x20metalness'+'\x20factor,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_metalne'+'ss:\x20f32;\x0a\x0a'+'//\x20The\x20f0\x20'+'specularit'+'y\x20factor\x0av'+'ar<private'+'>\x20litArgs_'+'specularit'+'y:\x20vec3f;\x0a'+'\x0a//\x20Specul'+'arity\x20inte'+'nsity\x20fact'+'or,\x20range\x20'+'[0..1]\x0avar'+'<private>\x20'+'litArgs_sp'+'ecularityF'+'actor:\x20f32'+';\x0a\x0a//\x20The\x20'+'microfacet'+'\x20glossines'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0avar<pri'+'vate>\x20litA'+'rgs_gloss:'+'\x20f32;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_sheen'+'_gloss:\x20f3'+'2;\x0a\x0a//\x20The'+'\x20color\x20of\x20'+'the\x20f0\x20spe'+'cularity\x20f'+'actor\x20for\x20'+'the\x20sheen\x20'+'layer\x0avar<'+'private>\x20l'+'itArgs_she'+'en_specula'+'rity:\x20vec3'+'f;\x0a\x0a//\x20Tra'+'nsmission\x20'+'factor\x20(re'+('fraction),'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_trans'+'mission:\x20f'+'32;\x0a\x0a//\x20Un'+'iform\x20thic'+'kness\x20of\x20m'+'edium,\x20use'+'d\x20by\x20trans'+'mission,\x20r'+'ange\x20[0..i'+'nf]\x0avar<pr'+'ivate>\x20lit'+'Args_thick'+'ness:\x20f32;'+'\x0a\x0a//\x20Index'+'\x20of\x20refrac'+'tion\x0avar<p'+'rivate>\x20li'+'tArgs_ior:'+'\x20f32;\x0a\x0a//\x20'+'Dispersion'+',\x20range\x20[0'+'..1]\x20typic'+'ally,\x20but\x20'+'can\x20be\x20hig'+'her\x0avar<pr'+'ivate>\x20lit'+'Args_dispe'+'rsion:\x20f32'+';\x0a\x0a//\x20Irid'+'escence\x20ef'+'fect\x20inten'+'sity,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'iridescenc'+'e_intensit'+'y:\x20f32;\x0a\x0a/'+'/\x20Thicknes'+'s\x20of\x20the\x20i'+'ridescent\x20'+'microfilm\x20'+'layer,\x20val'+'ue\x20is\x20in\x20n'+'anometers,'+'\x20range\x20[0.'+'.1000]\x0avar'+'<private>\x20'+'litArgs_ir'+'idescence_'+'thickness:'+'\x20f32;\x0a\x0a//\x20'+'The\x20normal'+'\x20used\x20for\x20'+'the\x20clearc'+'oat\x20layer\x0a'+'var<privat'+'e>\x20litArgs'+'_clearcoat'+'_worldNorm'+'al:\x20vec3f;'+'\x0a\x0a//\x20Inten'+'sity\x20of\x20th'+'e\x20clearcoa'+'t\x20layer,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_clearco'+'at_specula'+'rity:\x20f32;'+'\x0a\x0a//\x20Gloss'+'iness\x20of\x20c'+'learcoat\x20l'+'ayer,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'clearcoat_'+'gloss:\x20f32'+';\x0a\x0a'),XM='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20t'+'extureBias'+':\x20f32\x20=\x20-1'+'000.0;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20texture'+'Bias:\x20f32;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ShaderArgs'+'PS\x22\x0a',qM='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20view_p'+'osition:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20li'+'ght_radius'+':\x20f32;\x0a#en'+'dif\x0a\x0a#if\x20S'+'HADOW_TYPE'+'\x20==\x20PCSS_3'+'2F\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lin'+'earizeDept'+'hPS\x22\x0a#endi'+'f\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serMainSta'+'rtPS\x22\x0a\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20/'+'/\x20using\x20no'+'n-standard'+'\x20depth,\x20i.'+'e\x20gl_FragC'+'oord.z\x0a\x20\x20\x20'+'\x20#ifdef\x20PE'+'RSPECTIVE_'+'DEPTH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20de'+'pth:\x20f32\x20='+'\x20input.pos'+'ition.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20PCS'+'S_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot/omni'+'\x20shadows\x20c'+'urrently\x20u'+'se\x20linear\x20'+'depth.\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20TODO:\x20us'+'e\x20perspect'+'ive\x20depth\x20'+'for\x20spot/o'+'mni\x20the\x20sa'+'me\x20way\x20as\x20'+'directiona'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT_TYPE\x20!'+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'depth\x20=\x20li'+'nearizeDep'+'thWithPara'+'ms(depth,\x20'+'camera_par'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20depth:\x20'+'f32\x20=\x20min('+'distance(u'+'niform.vie'+'w_position'+',\x20input.vP'+'ositionW)\x20'+'/\x20uniform.'+'light_radi'+'us,\x200.9999'+'9);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'MODIFIED_D'+'EPTH\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SHADO'+'W_TYPE\x20==\x20'+'VSM_16F\x20||'+'\x20SHADOW_TY'+('PE\x20==\x20VSM_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20SHAD'+'OW_TYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20expon'+'ent:\x20f32\x20='+'\x2015.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20exp'+'onent:\x20f32'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dep'+'th_vsm\x20=\x202'+'.0\x20*\x20depth'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dept'+'h_vsm\x20=\x20ex'+'p(exponent'+'\x20*\x20depth_v'+'sm);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(depth_'+'vsm,\x20depth'+'_vsm\x20*\x20dep'+'th_vsm,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20PCSS'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(de'+'pth,\x200.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MODIFI'+'ED_DEPTH\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20If'+'\x20we\x20end\x20up'+'\x20using\x20mod'+'ified\x20dept'+'h,\x20it\x20need'+'s\x20to\x20be\x20ex'+'plicitly\x20w'+'ritten\x20to\x20'+'gl_FragDep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.frag'+'Depth\x20=\x20de'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'just\x20the\x20s'+'implest\x20co'+'de,\x20color\x20'+'is\x20not\x20wri'+'tten\x20anywa'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),jM='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0afn\x20'+'LTC_Uv(N:\x20'+'vec3f,\x20V:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20co'+'nst\x20LUT_SI'+'ZE:\x20f32\x20=\x20'+'64.0;\x0a\x20\x20\x20\x20'+'const\x20LUT_'+'SCALE:\x20f32'+'\x20=\x20(LUT_SI'+'ZE\x20-\x201.0)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_BIAS'+':\x20f32\x20=\x200.'+'5\x20/\x20LUT_SI'+'ZE;\x0a\x20\x20\x20\x20le'+'t\x20dotNV:\x20f'+'32\x20=\x20satur'+'ate(dot(\x20N'+',\x20V\x20));\x0a\x20\x20'+'\x20\x20//\x20textu'+'re\x20paramet'+'erized\x20by\x20'+'sqrt(\x20GGX\x20'+'alpha\x20)\x20an'+'d\x20sqrt(\x201\x20'+'-\x20cos(\x20the'+'ta\x20)\x20)\x0a\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20vec'+'2f(\x20roughn'+'ess,\x20sqrt('+'\x201.0\x20-\x20dot'+'NV\x20)\x20);\x0a\x20\x20'+'\x20\x20return\x20u'+'v\x20*\x20LUT_SC'+'ALE\x20+\x20LUT_'+'BIAS;\x0a}\x0a\x0af'+'n\x20LTC_Clip'+'pedSphereF'+'ormFactor('+'\x20f:\x20vec3f\x20'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20//\x20Re'+'al-Time\x20Ar'+'ea\x20Lightin'+'g:\x20a\x20Journ'+'ey\x20from\x20Re'+'search\x20to\x20'+'Production'+'\x20(p.102)\x0a\x20'+'\x20\x20\x20//\x20An\x20a'+'pproximati'+'on\x20of\x20the\x20'+'form\x20facto'+'r\x20of\x20a\x20hor'+'izon-clipp'+'ed\x20rectang'+'le.\x0a\x20\x20\x20\x20le'+'t\x20l:\x20f32\x20='+'\x20length(\x20f'+'\x20);\x0a\x20\x20\x20\x20re'+'turn\x20max(\x20'+'(\x20l\x20*\x20l\x20+\x20'+'f.z\x20)\x20/\x20(\x20'+'l\x20+\x201.0\x20),'+'\x200.0\x20);\x0a}\x0a'+'\x0afn\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'v1:\x20vec3f,'+'\x20v2:\x20vec3f'+'\x20)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20x:\x20f32\x20='+'\x20dot(\x20v1,\x20'+'v2\x20);\x0a\x20\x20\x20\x20'+'let\x20y:\x20f32'+('\x20=\x20abs(\x20x\x20'+');\x0a\x20\x20\x20\x20//\x20'+'rational\x20p'+'olynomial\x20'+'approximat'+'ion\x20to\x20the'+'ta\x20/\x20sin(\x20'+'theta\x20)\x20/\x20'+'2PI\x0a\x20\x20\x20\x20le'+'t\x20a:\x20f32\x20='+'\x200.8543985'+'\x20+\x20(\x200.496'+'5155\x20+\x200.0'+'145206\x20*\x20y'+'\x20)\x20*\x20y;\x0a\x20\x20'+'\x20\x20let\x20b:\x20f'+'32\x20=\x203.417'+'5940\x20+\x20(\x204'+'.1616724\x20+'+'\x20y\x20)\x20*\x20y;\x0a'+'\x20\x20\x20\x20let\x20v:'+'\x20f32\x20=\x20a\x20/'+'\x20b;\x0a\x20\x20\x20\x20le'+'t\x20inv_sqrt'+'_term\x20=\x20in'+'verseSqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7f\x20)\x20);\x0a'+'\x20\x20\x20\x20let\x20th'+'eta_sinthe'+'ta:\x20f32\x20=\x20'+'select(\x20(0'+'.5\x20*\x20inv_s'+'qrt_term\x20-'+'\x20v),\x20v,\x20x\x20'+'>\x200.0\x20);\x0a\x20'+'\x20\x20\x20return\x20'+'cross(\x20v1,'+'\x20v2\x20)\x20*\x20th'+'eta_sinthe'+'ta;\x0a}\x0a\x0astr'+'uct\x20Coords'+'\x20{\x0a\x20\x20\x20\x20coo'+'rd0:\x20vec3f'+',\x0a\x20\x20\x20\x20coor'+'d1:\x20vec3f,'+'\x0a\x20\x20\x20\x20coord'+'2:\x20vec3f,\x0a'+'\x20\x20\x20\x20coord3'+':\x20vec3f,\x0a}'+'\x0a\x0afn\x20LTC_E'+'valuateRec'+'t(\x20N:\x20vec3'+'f,\x20V:\x20vec3'+'f,\x20P:\x20vec3'+'f,\x20mInv:\x20m'+'at3x3f,\x20re'+'ctCoords:\x20'+'Coords)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20//\x20bail\x20i'+'f\x20point\x20is'+'\x20on\x20back\x20s'+'ide\x20of\x20pla'+'ne\x20of\x20ligh'+'t\x0a\x20\x20\x20\x20//\x20a'+'ssumes\x20ccw'+'\x20winding\x20o'+'rder\x20of\x20li'+'ght\x20vertic'+'es\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec3f'+'\x20=\x20rectCoo'+'rds.coord1'+'\x20-\x20rectCoo'+'rds.coord0'+';\x0a\x20\x20\x20\x20let\x20'+'v2:\x20vec3f\x20'+'=\x20rectCoor'+'ds.coord3\x20'+'-\x20rectCoor'+'ds.coord0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'lightNorma'+'l:\x20vec3f\x20='+'\x20cross(\x20v1'+',\x20v2\x20);\x0a\x20\x20'+'\x20\x20let\x20fact'+'or:\x20f32\x20=\x20'+'sign(-dot('+'\x20lightNorm'+'al,\x20P\x20-\x20re'+'ctCoords.c'+'oord0\x20));\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'nstruct\x20or'+'thonormal\x20'+'basis\x20arou'+'nd\x20N\x0a\x20\x20\x20\x20l')+('et\x20T1:\x20vec'+'3f\x20=\x20norma'+'lize(\x20V\x20-\x20'+'N\x20*\x20dot(\x20V'+',\x20N\x20)\x20);\x0a\x20'+'\x20\x20\x20let\x20T2:'+'\x20vec3f\x20=\x20f'+'actor\x20*\x20cr'+'oss(\x20N,\x20T1'+'\x20);\x20//\x20neg'+'ated\x20from\x20'+'paper;\x20pos'+'sibly\x20due\x20'+'to\x20a\x20diffe'+'rent\x20hande'+'dness\x20of\x20w'+'orld\x20coord'+'inate\x20syst'+'em\x0a\x20\x20\x20\x20//\x20'+'compute\x20tr'+'ansform\x0a\x20\x20'+'\x20\x20let\x20mat:'+'\x20mat3x3f\x20='+'\x20mInv\x20*\x20tr'+'anspose(\x20m'+'at3x3f(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'transform\x20'+'rect\x0a\x20\x20\x20\x20v'+'ar\x20coords:'+'\x20array<vec'+'3f,\x204>;\x0a\x20\x20'+'\x20\x20coords[0'+']\x20=\x20mat\x20*\x20'+'(\x20rectCoor'+'ds.coord0\x20'+'-\x20P\x20);\x0a\x20\x20\x20'+'\x20coords[1]'+'\x20=\x20mat\x20*\x20('+'\x20rectCoord'+'s.coord1\x20-'+'\x20P\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20mat\x20*\x20(\x20'+'rectCoords'+'.coord2\x20-\x20'+'P\x20);\x0a\x20\x20\x20\x20c'+'oords[3]\x20='+'\x20mat\x20*\x20(\x20r'+'ectCoords.'+'coord3\x20-\x20P'+'\x20);\x0a\x20\x20\x20\x20//'+'\x20project\x20r'+'ect\x20onto\x20s'+'phere\x0a\x20\x20\x20\x20'+'coords[0]\x20'+'=\x20normaliz'+'e(\x20coords['+'0]\x20);\x0a\x20\x20\x20\x20'+'coords[1]\x20'+'=\x20normaliz'+'e(\x20coords['+'1]\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20normaliz'+'e(\x20coords['+'2]\x20);\x0a\x20\x20\x20\x20'+'coords[3]\x20'+'=\x20normaliz'+'e(\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20vector\x20'+'form\x20facto'+'r\x0a\x20\x20\x20\x20var\x20'+'vectorForm'+'Factor:\x20ve'+'c3f\x20=\x20vec3'+'f(\x200.0\x20);\x0a'+'\x20\x20\x20\x20vector'+'FormFactor'+'\x20=\x20vectorF'+'ormFactor\x20'+'+\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[0],\x20c'+'oords[1]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20=\x20vecto'+'rFormFacto'+'r\x20+\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'coords[1],'+'\x20coords[2]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa')+('ctor\x20=\x20vec'+'torFormFac'+'tor\x20+\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[2'+'],\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20=\x20v'+'ectorFormF'+'actor\x20+\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[3],\x20coord'+'s[0]\x20);\x0a\x20\x20'+'\x20\x20//\x20adjus'+'t\x20for\x20hori'+'zon\x20clippi'+'ng\x0a\x20\x20\x20\x20let'+'\x20result:\x20f'+'32\x20=\x20LTC_C'+'lippedSphe'+'reFormFact'+'or(\x20vector'+'FormFactor'+'\x20);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20resu'+'lt;\x0a}\x0a\x0avar'+'<private>\x20'+'dLTCCoords'+':\x20Coords;\x0a'+'fn\x20getLTCL'+'ightCoords'+'(lightPos:'+'\x20vec3f,\x20ha'+'lfWidth:\x20v'+'ec3f,\x20half'+'Height:\x20ve'+'c3f)\x20->\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20var\x20coord'+'s:\x20Coords;'+'\x0a\x20\x20\x20\x20coord'+'s.coord0\x20='+'\x20lightPos\x20'+'+\x20halfWidt'+'h\x20-\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd1\x20=\x20ligh'+'tPos\x20-\x20hal'+'fWidth\x20-\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20coord'+'s.coord2\x20='+'\x20lightPos\x20'+'-\x20halfWidt'+'h\x20+\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd3\x20=\x20ligh'+'tPos\x20+\x20hal'+'fWidth\x20+\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20retur'+'n\x20coords;\x0a'+'}\x0a\x0avar<pri'+'vate>\x20dSph'+'ereRadius:'+'\x20f32;\x0afn\x20g'+'etSphereLi'+'ghtCoords('+'lightPos:\x20'+'vec3f,\x20hal'+'fWidth:\x20ve'+'c3f,\x20halfH'+'eight:\x20vec'+'3f)\x20->\x20Coo'+'rds\x20{\x0a\x20\x20\x20\x20'+'//\x20used\x20fo'+'r\x20simple\x20s'+'phere\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20//\x20als'+'o,\x20the\x20cod'+'e\x20only\x20han'+'dles\x20a\x20sph'+'erical\x20lig'+'ht,\x20it\x20can'+'not\x20be\x20non'+'-uniformly'+'\x20scaled\x20in'+'\x20world\x20spa'+'ce,\x20and\x20so'+'\x20we\x20enforc'+'e\x20it\x20here\x0a'+'\x20\x20\x20\x20dSpher'+'eRadius\x20=\x20')+('max(length'+'(halfWidth'+'),\x20length('+'halfHeight'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20Billboar'+'d\x20the\x202d\x20l'+'ight\x20quad\x20'+'to\x20reflect'+'ion\x20vector'+',\x20as\x20it\x27s\x20'+'used\x20for\x20s'+'pecular.\x20T'+'his\x20allows'+'\x20us\x20to\x20use'+'\x20disk\x20math'+'\x20for\x20the\x20s'+'phere.\x0a\x20\x20\x20'+'\x20let\x20f:\x20ve'+'c3f\x20=\x20refl'+'ect(normal'+'ize(lightP'+'os\x20-\x20unifo'+'rm.view_po'+'sition),\x20v'+'NormalW);\x0a'+'\x20\x20\x20\x20let\x20w:'+'\x20vec3f\x20=\x20n'+'ormalize(c'+'ross(f,\x20ha'+'lfHeight))'+';\x0a\x20\x20\x20\x20let\x20'+'h:\x20vec3f\x20='+'\x20normalize'+'(cross(f,\x20'+'w));\x0a\x0a\x20\x20\x20\x20'+'return\x20get'+'LTCLightCo'+'ords(light'+'Pos,\x20w\x20*\x20d'+'SphereRadi'+'us,\x20h\x20*\x20dS'+'phereRadiu'+'s);\x0a}\x0a\x0a//\x20'+'used\x20for\x20L'+'TC\x20LUT\x20tex'+'ture\x20looku'+'p\x0avar<priv'+'ate>\x20dLTCU'+'V:\x20vec2f;\x0a'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20var<p'+'rivate>\x20cc'+'LTCUV:\x20vec'+'2f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightUV(g'+'loss:\x20f32,'+'\x20worldNorm'+'al:\x20vec3f,'+'\x20viewDir:\x20'+'vec3f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20roug'+'hness:\x20f32'+'\x20=\x20max((1.'+'0\x20-\x20gloss)'+'\x20*\x20(1.0\x20-\x20'+'gloss),\x200.'+'001);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_Uv(\x20world'+'Normal,\x20vi'+'ewDir,\x20rou'+'ghness\x20);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20energ'+'y\x20conserva'+'tion\x20and\x20t'+'o\x20modulate'+'\x20specular\x0a'+'var<privat'+'e>\x20dLTCSpe'+'cFres:\x20vec'+'3f;\x0a#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20v'+'ar<private'+'>\x20ccLTCSpe'+'cFres:\x20vec'+'3f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightSpec'+'Fres(uv:\x20v'+'ec2f,\x20spec'+'ularity:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20t2:\x20v')+('ec4f\x20=\x20tex'+'tureSample'+'Level(area'+'LightsLutT'+'ex2,\x20areaL'+'ightsLutTe'+'x2Sampler,'+'\x20uv,\x200.0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20specular'+'ity\x20*\x20t2.x'+'\x20+\x20(\x20vec3f'+'(\x201.0\x20)\x20-\x20'+'specularit'+'y)\x20*\x20t2.y;'+'\x0a}\x0a\x0afn\x20cal'+'cLTCLightV'+'alues(glos'+'s:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f,\x20specul'+'arity:\x20vec'+'3f,\x20clearc'+'oatGloss:\x20'+'f32,\x20clear'+'coatWorldN'+'ormal:\x20vec'+'3f,\x20clearc'+'oatSpecula'+'rity:\x20f32)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'UV\x20=\x20getLT'+'CLightUV(c'+'learcoatGl'+'oss,\x20clear'+'coatWorldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'SpecFres\x20='+'\x20getLTCLig'+'htSpecFres'+'(ccLTCUV,\x20'+'vec3f(clea'+'rcoatSpecu'+'larity));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0afn\x20cal'+'cDiskLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20cal'+'cRectLight'+'Values(lig'+'htPos,\x20hal'+'fWidth,\x20ha'+'lfHeight);'+'\x0a}\x0afn\x20calc'+'SphereLigh'+'tValues(li'+'ghtPos:\x20ve'+'c3f,\x20halfW'+'idth:\x20vec3'+'f,\x20halfHei')+('ght:\x20vec3f'+')\x20{\x0a\x20\x20\x20\x20dL'+'TCCoords\x20='+'\x20getSphere'+'LightCoord'+'s(lightPos'+',\x20halfWidt'+'h,\x20halfHei'+'ght);\x0a}\x0a\x0a/'+'/\x20An\x20exten'+'ded\x20versio'+'n\x20of\x20the\x20i'+'mplementat'+'ion\x20from\x20\x22'+'How\x20to\x20sol'+'ve\x20a\x20cubic'+'\x20equation,'+'\x20revisited'+'\x22\x0a//\x20http:'+'//momentsi'+'ngraphics.'+'de/?p=105\x0a'+'fn\x20SolveCu'+'bic(Coeffi'+'cient_in:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20pi:\x20'+'f32\x20=\x203.14'+'159;\x0a\x20\x20\x20\x20v'+'ar\x20Coeffic'+'ient\x20=\x20Coe'+'fficient_i'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20Normalize'+'\x20the\x20polyn'+'omial\x0a\x20\x20\x20\x20'+'Coefficien'+'t\x20=\x20vec4f('+'Coefficien'+'t.xyz\x20/\x20Co'+'efficient.'+'w,\x20Coeffic'+'ient.w);\x0a\x0a'+'\x20\x20\x20\x20//\x20Div'+'ide\x20middle'+'\x20coefficie'+'nts\x20by\x20thr'+'ee\x0a\x20\x20\x20\x20let'+'\x20new_yz:\x20v'+'ec2f\x20=\x20Coe'+'fficient.y'+'z\x20/\x203.0;\x0a\x20'+'\x20\x20\x20Coeffic'+'ient\x20=\x20vec'+'4f(Coeffic'+'ient.x,\x20ne'+'w_yz.x,\x20ne'+'w_yz.y,\x20Co'+'efficient.'+'w);\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20let\x20A:\x20'+'f32\x20=\x20Coef'+'ficient.w;'+'\x0a\x20\x20\x20\x20let\x20B'+':\x20f32\x20=\x20Co'+'efficient.'+'z;\x0a\x20\x20\x20\x20let'+'\x20C:\x20f32\x20=\x20'+'Coefficien'+'t.y;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20Coeffici'+'ent.x;\x0a\x0a\x20\x20'+'\x20\x20//\x20Compu'+'te\x20the\x20Hes'+'sian\x20and\x20t'+'he\x20discrim'+'inant\x0a\x20\x20\x20\x20'+'let\x20Delta:'+'\x20vec3f\x20=\x20v'+'ec3f(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20-Coeff'+'icient.z\x20*'+'\x20Coefficie'+'nt.z\x20+\x20Coe'+'fficient.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'-Coefficie'+'nt.y\x20*\x20Coe'+'fficient.z'+'\x20+\x20Coeffic'+'ient.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'vec2f(Coef'+'ficient.z,'+'\x20-Coeffici'+'ent.y),\x20Co'+'efficient.'+'xy)\x0a\x20\x20\x20\x20);')+('\x0a\x0a\x20\x20\x20\x20let\x20'+'Discrimina'+'nt:\x20f32\x20=\x20'+'dot(vec2f('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20var\x20xlc:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20var\x20xsc:'+'\x20vec2f;\x0a\x0a\x20'+'\x20\x20\x20//\x20Algo'+'rithm\x20A\x0a\x20\x20'+'\x20\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20A_a:'+'\x20f32\x20=\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_a:\x20f'+'32\x20=\x20Delta'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_a:'+'\x20f32\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20Theta:\x20f'+'32\x20=\x20atan2'+'(sqrt(Disc'+'riminant),'+'\x20-D_a)\x20/\x203'+'.0;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sqr'+'t_neg_Ca\x20='+'\x20sqrt(-C_a'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20x_1a:'+'\x20f32\x20=\x202.0'+'\x20*\x20sqrt_ne'+'g_Ca\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x_3a:\x20f32'+'\x20=\x202.0\x20*\x20s'+'qrt_neg_Ca'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20xl:'+'\x20f32\x20=\x20sel'+'ect(x_3a,\x20'+'x_1a,\x20(x_1'+'a\x20+\x20x_3a)\x20'+'>\x202.0\x20*\x20B)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'xlc\x20=\x20vec2'+'f(xl\x20-\x20B,\x20'+'A);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Al'+'gorithm\x20D\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20A_'+'d:\x20f32\x20=\x20D'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_d:\x20f'+'32\x20=\x20Delta'+'.z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_d:'+'\x20f32\x20=\x20-D\x20'+'*\x20Delta.y\x20'+'+\x202.0\x20*\x20C\x20'+'*\x20Delta.z;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Take\x20th'+'e\x20cubic\x20ro'+'ot\x20of\x20a\x20no'+'rmalized\x20c'+'omplex\x20num'+'ber\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20Thet'+'a:\x20f32\x20=\x20a'+'tan2(D\x20*\x20s'+'qrt(Discri'+'minant),\x20-'+'D_d)\x20/\x203.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20sqrt_'+'neg_Cd\x20=\x20s'+'qrt(-C_d);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20x_1d:\x20f'+'32\x20=\x202.0\x20*')+('\x20sqrt_neg_'+'Cd\x20*\x20cos(T'+'heta);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20x'+'_3d:\x20f32\x20='+'\x202.0\x20*\x20sqr'+'t_neg_Cd\x20*'+'\x20cos(Theta'+'\x20+\x20(2.0\x20/\x20'+'3.0)\x20*\x20pi)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20xs:\x20f'+'32\x20=\x20selec'+'t(x_3d,\x20x_'+'1d,\x20x_1d\x20+'+'\x20x_3d\x20<\x202.'+'0\x20*\x20C);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20xsc\x20'+'=\x20vec2f(-D'+',\x20xs\x20+\x20C);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20let\x20E:\x20f'+'32\x20=\x20\x20xlc.'+'y\x20*\x20xsc.y;'+'\x0a\x20\x20\x20\x20let\x20F'+':\x20f32\x20=\x20-x'+'lc.x\x20*\x20xsc'+'.y\x20-\x20xlc.y'+'\x20*\x20xsc.x;\x0a'+'\x20\x20\x20\x20let\x20G:'+'\x20f32\x20=\x20\x20xl'+'c.x\x20*\x20xsc.'+'x;\x0a\x0a\x20\x20\x20\x20le'+'t\x20xmc:\x20vec'+'2f\x20=\x20vec2f'+'(C\x20*\x20F\x20-\x20B'+'\x20*\x20G,\x20-B\x20*'+'\x20F\x20+\x20C\x20*\x20E'+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20Root:\x20ve'+'c3f\x20=\x20vec3'+'f(xsc.x\x20/\x20'+'xsc.y,\x20xmc'+'.x\x20/\x20xmc.y'+',\x20xlc.x\x20/\x20'+'xlc.y);\x0a\x0a\x20'+'\x20\x20\x20if\x20(Roo'+'t.x\x20<\x20Root'+'.y\x20&&\x20Root'+'.x\x20<\x20Root.'+'z)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root\x20=\x20'+'Root.yxz;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(Root.'+'z\x20<\x20Root.x'+'\x20&&\x20Root.z'+'\x20<\x20Root.y)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root\x20=\x20Ro'+'ot.xzy;\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20Root;'+'\x0a}\x0a\x0afn\x20LTC'+'_EvaluateD'+'isk(N:\x20vec'+'3f,\x20V:\x20vec'+'3f,\x20P:\x20vec'+'3f,\x20Minv:\x20'+'mat3x3f,\x20p'+'oints:\x20Coo'+'rds)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20let\x20T1:\x20'+'vec3f\x20=\x20no'+'rmalize(V\x20'+'-\x20N\x20*\x20dot('+'V,\x20N));\x0a\x20\x20'+'\x20\x20let\x20T2:\x20'+'vec3f\x20=\x20cr'+'oss(N,\x20T1)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'rotate\x20are'+'a\x20light\x20in'+'\x20(T1,\x20T2,\x20'+'N)\x20basis\x0a\x20'+'\x20\x20\x20let\x20R:\x20'+'mat3x3f\x20=\x20'+'transpose('+'\x20mat3x3f(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20polygon\x20'+'(allocate\x20'+'5\x20vertices'+'\x20for\x20clipp')+('ing\x0a\x20\x20\x20\x20va'+'r\x20L_:\x20arra'+'y<vec3f,\x203'+'>;\x0a\x20\x20\x20\x20L_['+'0]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[1'+']\x20=\x20R\x20*\x20(\x20'+'points.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20L_[2]'+'\x20=\x20R\x20*\x20(\x20p'+'oints.coor'+'d2\x20-\x20P\x20);\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'it\x20ellipse'+'\x0a\x20\x20\x20\x20let\x20C'+':\x20vec3f\x20\x20='+'\x200.5\x20*\x20(L_'+'[0]\x20+\x20L_[2'+']);\x0a\x20\x20\x20\x20va'+'r\x20V1:\x20vec3'+'f\x20=\x200.5\x20*\x20'+'(L_[1]\x20-\x20L'+'_[2]);\x0a\x20\x20\x20'+'\x20var\x20V2:\x20v'+'ec3f\x20=\x200.5'+'\x20*\x20(L_[1]\x20'+'-\x20L_[0]);\x0a'+'\x0a\x20\x20\x20\x20let\x20C'+'_Minv:\x20vec'+'3f\x20\x20=\x20Minv'+'\x20*\x20C;\x0a\x20\x20\x20\x20'+'let\x20V1_Min'+'v:\x20vec3f\x20='+'\x20Minv\x20*\x20V1'+';\x0a\x20\x20\x20\x20let\x20'+'V2_Minv:\x20v'+'ec3f\x20=\x20Min'+'v\x20*\x20V2;\x0a\x0a\x20'+'\x20\x20\x20//\x20comp'+'ute\x20eigenv'+'ectors\x20of\x20'+'ellipse\x0a\x20\x20'+'\x20\x20var\x20a:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20b:\x20f32;\x0a'+'\x20\x20\x20\x20let\x20d1'+'1:\x20f32\x20=\x20d'+'ot(V1_Minv'+',\x20V1_Minv)'+';\x0a\x20\x20\x20\x20let\x20'+'d22:\x20f32\x20='+'\x20dot(V2_Mi'+'nv,\x20V2_Min'+'v);\x0a\x20\x20\x20\x20le'+'t\x20d12:\x20f32'+'\x20=\x20dot(V1_'+'Minv,\x20V2_M'+'inv);\x0a\x20\x20\x20\x20'+'if\x20(abs(d1'+'2)\x20/\x20sqrt('+'d11\x20*\x20d22)'+'\x20>\x200.0001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20tr:\x20f'+'32\x20=\x20d11\x20+'+'\x20d22;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'t_inner:\x20f'+'32\x20=\x20-d12\x20'+'*\x20d12\x20+\x20d1'+'1\x20*\x20d22;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20det:\x20f32\x20'+'=\x20sqrt(det'+'_inner);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20u:\x20f32\x20=\x20'+'0.5\x20*\x20sqrt'+'(tr\x20-\x202.0\x20'+'*\x20det);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'v:\x20f32\x20=\x200'+'.5\x20*\x20sqrt('+'tr\x20+\x202.0\x20*'+'\x20det);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20e'+'_max:\x20f32\x20'+'=\x20(u\x20+\x20v)\x20'+'*\x20(u\x20+\x20v);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20e_min:\x20'+'f32\x20=\x20(u\x20-'+'\x20v)\x20*\x20(u\x20-'+'\x20v);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20V1'+'_:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va')+('r\x20V2_:\x20vec'+'3f;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(d11'+'\x20>\x20d22)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V1_\x20=\x20d1'+'2\x20*\x20V1_Min'+'v\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2_Minv;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20V2_\x20=\x20d12'+'\x20*\x20V1_Minv'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2_Minv;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12*V2_'+'Minv\x20+\x20(e_'+'max\x20-\x20d22)'+'*V1_Minv;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V2_\x20=\x20d1'+'2*V2_Minv\x20'+'+\x20(e_min\x20-'+'\x20d22)*V1_M'+'inv;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20e_max;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20b'+'\x20=\x201.0\x20/\x20e'+'_min;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20V1\x20=\x20n'+'ormalize(V'+'1_);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20V2\x20=\x20no'+'rmalize(V2'+'_);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20dot(V'+'1_Minv,\x20V1'+'_Minv);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20b\x20=\x20'+'1.0\x20/\x20dot('+'V2_Minv,\x20V'+'2_Minv);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V1\x20'+'=\x20V1_Minv\x20'+'*\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20=\x20V2_Min'+'v\x20*\x20sqrt(b'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20V3'+':\x20vec3f\x20=\x20'+'normalize('+'cross(V1,\x20'+'V2));\x0a\x20\x20\x20\x20'+'if\x20(dot(C_'+'Minv,\x20V3)\x20'+'<\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V3\x20'+'=\x20V3\x20*\x20-1.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20let\x20L:'+'\x20f32\x20\x20=\x20do'+'t(V3,\x20C_Mi'+'nv);\x0a\x20\x20\x20\x20l'+'et\x20x0:\x20f32'+'\x20=\x20dot(V1,'+'\x20C_Minv)\x20/'+'\x20L;\x0a\x20\x20\x20\x20le'+'t\x20y0:\x20f32\x20'+'=\x20dot(V2,\x20'+'C_Minv)\x20/\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20E1:\x20f32\x20'+'=\x20inverseS'+'qrt(a);\x0a\x20\x20'+'\x20\x20let\x20E2:\x20'+'f32\x20=\x20inve'+'rseSqrt(b)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20a_scaled\x20'+'=\x20a\x20*\x20L\x20*\x20'+'L;\x0a\x20\x20\x20\x20let'+'\x20b_scaled\x20'+'=\x20b\x20*\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20c0:\x20f32\x20'+'=\x20a_scaled'+'\x20*\x20b_scale'+'d;\x0a\x20\x20\x20\x20let'+'\x20c1:\x20f32\x20='+'\x20a_scaled\x20'+'*\x20b_scaled')+('\x20*\x20(1.0\x20+\x20'+'x0\x20*\x20x0\x20+\x20'+'y0\x20*\x20y0)\x20-'+'\x20a_scaled\x20'+'-\x20b_scaled'+';\x0a\x20\x20\x20\x20let\x20'+'c2:\x20f32\x20=\x20'+'1.0\x20-\x20a_sc'+'aled\x20*\x20(1.'+'0\x20+\x20x0\x20*\x20x'+'0)\x20-\x20b_sca'+'led\x20*\x20(1.0'+'\x20+\x20y0\x20*\x20y0'+');\x0a\x20\x20\x20\x20let'+'\x20c3:\x20f32\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20let\x20roots'+':\x20vec3f\x20=\x20'+'SolveCubic'+'(vec4f(c0,'+'\x20c1,\x20c2,\x20c'+'3));\x0a\x20\x20\x20\x20l'+'et\x20e1:\x20f32'+'\x20=\x20roots.x'+';\x0a\x20\x20\x20\x20let\x20'+'e2:\x20f32\x20=\x20'+'roots.y;\x0a\x20'+'\x20\x20\x20let\x20e3:'+'\x20f32\x20=\x20roo'+'ts.z;\x0a\x0a\x20\x20\x20'+'\x20var\x20avgDi'+'r:\x20vec3f\x20='+'\x20vec3f(a_s'+'caled\x20*\x20x0'+'\x20/\x20(a_scal'+'ed\x20-\x20e2),\x20'+'b_scaled\x20*'+'\x20y0\x20/\x20(b_s'+'caled\x20-\x20e2'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20let\x20ro'+'tate:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20let\x20L'+'1:\x20f32\x20=\x20s'+'qrt(-e2\x20/\x20'+'e3);\x0a\x20\x20\x20\x20l'+'et\x20L2:\x20f32'+'\x20=\x20sqrt(-e'+'2\x20/\x20e1);\x0a\x0a'+'\x20\x20\x20\x20let\x20fo'+'rmFactor:\x20'+'f32\x20=\x20max('+'0.0,\x20L1\x20*\x20'+'L2\x20*\x20inver'+'seSqrt((1.'+'0\x20+\x20L1\x20*\x20L'+'1)\x20*\x20(1.0\x20'+'+\x20L2\x20*\x20L2)'+'));\x0a\x0a\x20\x20\x20\x20c'+'onst\x20LUT_S'+'IZE_disk:\x20'+'f32\x20=\x2064.0'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_SCAL'+'E_disk:\x20f3'+'2\x20=\x20(\x20LUT_'+'SIZE_disk\x20'+'-\x201.0\x20)\x20/\x20'+'LUT_SIZE_d'+'isk;\x0a\x20\x20\x20\x20c'+'onst\x20LUT_B'+'IAS_disk:\x20'+'f32\x20=\x200.5\x20'+'/\x20LUT_SIZE'+'_disk;\x0a\x0a\x20\x20'+'\x20\x20//\x20use\x20t'+'abulated\x20h'+'orizon-cli'+'pped\x20spher'+'e\x0a\x20\x20\x20\x20var\x20'+'uv:\x20vec2f\x20'+'=\x20vec2f(av'+'gDir.z\x20*\x200'+'.5\x20+\x200.5,\x20'+'formFactor'+');\x0a\x20\x20\x20\x20uv\x20'+'=\x20uv\x20*\x20LUT'+'_SCALE_dis'+'k\x20+\x20LUT_BI'+'AS_disk;\x0a\x0a'+'\x20\x20\x20\x20let\x20sc')+('ale:\x20f32\x20='+'\x20textureSa'+'mpleLevel('+'areaLights'+'LutTex2,\x20a'+'reaLightsL'+'utTex2Samp'+'ler,\x20uv,\x200'+'.0).w;\x0a\x0a\x20\x20'+'\x20\x20return\x20f'+'ormFactor\x20'+'*\x20scale;\x0a}'+'\x0a\x0a//\x20LTC_E'+'valuateDis'+'k\x20in\x20some\x20'+'rare\x20cases'+'\x20genereate'+'s\x20NaN\x20valu'+'es\x20in\x20a\x20or'+'\x20b,\x20just\x20b'+'efore\x20\x27flo'+'at\x20c0\x20=\x20a\x20'+'*\x20b;\x27\x0a//\x20G'+'et\x20rid\x20of\x20'+'those\x20Nan\x20'+'values\x20bef'+'ore\x20they\x20p'+'ropagate\x20f'+'urther,\x20as'+'\x20in\x20case\x20o'+'f\x20bloom\x20/\x20'+'DOF\x20blurs\x20'+'they\x0a//\x20pr'+'opagate\x20to'+'\x20large\x20are'+'as.\x20I\x20didn'+'\x27t\x20find\x20th'+'e\x20actual\x20r'+'eason\x20wher'+'e\x20those\x20co'+'me\x20from,\x20s'+'o\x20that\x20is\x20'+'still\x20TODO'+'.\x0a//\x20Note\x20'+'that\x20only\x20'+'disk/spher'+'e\x20lights\x20a'+'re\x20causing'+'\x20it,\x20so\x20on'+'ly\x20handle\x20'+'those.\x0afn\x20'+'FixNan(val'+'ue:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20v'+'alue\x20!=\x20va'+'lue\x20check\x20'+'for\x20NaN\x20as'+'\x20isnan()\x20i'+'s\x20not\x20avai'+'lable\x20in\x20W'+'GSL\x0a\x20\x20\x20\x20re'+'turn\x20selec'+'t(value,\x200'+'.0,\x20value\x20'+'!=\x20value);'+'\x0a}\x0a\x0afn\x20get'+'RectLightD'+'iffuse(wor'+'ldNormal:\x20'+'vec3f,\x20vie'+'wDir:\x20vec3'+'f,\x20lightDi'+'r:\x20vec3f,\x20'+'lightDirNo'+'rm:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20id'+'entityMat\x20'+'=\x20mat3x3f('+'vec3f(1.0,'+'\x200.0,\x200.0)'+',\x20vec3f(0.'+'0,\x201.0,\x200.'+'0),\x20vec3f('+'0.0,\x200.0,\x20'+'1.0));\x0a\x20\x20\x20'+'\x20return\x20LT'+'C_Evaluate'+'Rect(\x20worl'+'dNormal,\x20v'+'iewDir,\x20vP'+'ositionW,\x20'+'identityMa'+'t,\x20dLTCCoo'+'rds\x20);\x0a}\x0a\x0a'+'fn\x20getDisk'+'LightDiffu'+'se(worldNo'+'rmal:\x20vec3')+('f,\x20viewDir'+':\x20vec3f,\x20l'+'ightDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20identi'+'tyMat\x20=\x20ma'+'t3x3f(vec3'+'f(1.0,\x200.0'+',\x200.0),\x20ve'+'c3f(0.0,\x201'+'.0,\x200.0),\x20'+'vec3f(0.0,'+'\x200.0,\x201.0)'+');\x0a\x20\x20\x20\x20ret'+'urn\x20FixNan'+'(LTC_Evalu'+'ateDisk(\x20w'+'orldNormal'+',\x20viewDir,'+'\x20vPosition'+'W,\x20identit'+'yMat,\x20dLTC'+'Coords\x20));'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tDiffuse(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20let\x20fall'+'off:\x20f32\x20='+'\x20dSphereRa'+'dius\x20/\x20(do'+'t(lightDir'+',\x20lightDir'+')\x20+\x20dSpher'+'eRadius);\x0a'+'\x20\x20\x20\x20return'+'\x20FixNan(ge'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNorm)\x20'+'*\x20falloff)'+';\x0a}\x0a\x0afn\x20ge'+'tLTCLightI'+'nvMat(uv:\x20'+'vec2f)\x20->\x20'+'mat3x3f\x20{\x0a'+'\x20\x20\x20\x20let\x20t1'+':\x20vec4f\x20=\x20'+'textureSam'+'pleLevel(a'+'reaLightsL'+'utTex1,\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er,\x20uv,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(\x20'+'t1.x,\x200.0,'+'\x20t1.y\x20),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(\x200.0,\x201'+'.0,\x200.0\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(\x20t1.z'+',\x200.0,\x20t1.'+'w\x20)\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight')+('InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getRectLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20cal'+'cDiskLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getDiskLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcDiskLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tSpecular('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'DiskLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir,\x20'+'dLTCUV);\x0a}'+'\x0a'),YM='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_me'+'talness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getMe'+'talness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'metalness:'+'\x20f32\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20metal'+'ness\x20=\x20met'+'alness\x20*\x20u'+'niform.mat'+'erial_meta'+'lness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'metalness\x20'+'=\x20metalnes'+'s\x20*\x20textur'+'eSampleBia'+'s({STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+',\x20{STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_METALN'+'ESS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_METALNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_VE'+'RTEX\x0a\x20\x20\x20\x20m'+'etalness\x20='+'\x20metalness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'METALNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dMetal'+'ness\x20=\x20met'+'alness;\x0a}\x0a',KM='\x0avar\x20textu'+'re_msdfMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20texture'+'_msdfMapSa'+'mpler:\x20sam'+'pler;\x0a\x0afn\x20'+'median(r:\x20'+'f32,\x20g:\x20f3'+'2,\x20b:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(min(r'+',\x20g),\x20min('+'max(r,\x20g),'+'\x20b));\x0a}\x0a\x0af'+'n\x20map(min:'+'\x20f32,\x20max:'+'\x20f32,\x20v:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(v\x20-\x20m'+'in)\x20/\x20(max'+'\x20-\x20min);\x0a}'+'\x0a\x0auniform\x20'+'font_sdfIn'+'tensity:\x20f'+'32;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20font_px'+'range:\x20f32'+';\x20\x20\x20\x20\x20\x20//\x20'+'the\x20number'+'\x20of\x20pixels'+'\x20between\x20i'+'nside\x20and\x20'+'outside\x20th'+'e\x20font\x20in\x20'+'SDF\x0aunifor'+'m\x20font_tex'+'tureWidth:'+'\x20f32;\x20//\x20t'+'he\x20width\x20o'+'f\x20the\x20text'+'ure\x20atlas\x0a'+'\x0a#ifndef\x20L'+'IT_MSDF_TE'+'XT_ATTRIBU'+'TE\x0a\x20\x20\x20\x20uni'+'form\x20outli'+'ne_color:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'utline_thi'+'ckness:\x20f3'+'2;\x0a\x20\x20\x20\x20uni'+'form\x20shado'+'w_color:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'uniform\x20sh'+'adow_offse'+'t:\x20vec2f;\x0a'+'#else\x0a\x20\x20\x20\x20'+'varying\x20ou'+'tline_colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20outline_'+'thickness:'+'\x20f32;\x0a\x20\x20\x20\x20'+'varying\x20sh'+'adow_color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20varying'+'\x20shadow_of'+'fset:\x20vec2'+'f;\x0a#endif\x0a'+'\x0afn\x20applyM'+'sdf(color_'+'in:\x20vec4f)'+'\x20->\x20vec4f\x20'+'{\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_M'+'SDF_TEXT_A'+'TTRIBUTE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20uniform.'+'outline_co'+'lor;\x0a\x20\x20\x20\x20\x20'+('\x20\x20\x20var\x20out'+'line_thick'+'nessValue\x20'+'=\x20uniform.'+'outline_th'+'ickness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_co'+'lorValue\x20='+'\x20uniform.s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_offsetVa'+'lue\x20=\x20unif'+'orm.shadow'+'_offset;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utline_thi'+'cknessValu'+'e\x20=\x20outlin'+'e_thicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_colorVal'+'ue\x20=\x20shado'+'w_color;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_of'+'fsetValue\x20'+'=\x20shadow_o'+'ffset;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20Conv'+'ert\x20to\x20lin'+'ear\x20space\x20'+'before\x20pro'+'cessing\x0a\x20\x20'+'\x20\x20//\x20TODO:'+'\x20ideally\x20t'+'his\x20would\x20'+'receive\x20th'+'e\x20color\x20in'+'\x20linear\x20sp'+'ace,\x20but\x20t'+'hat\x20would\x20'+'require\x20la'+'rger\x20chang'+'es\x0a\x20\x20\x20\x20//\x20'+'on\x20the\x20eng'+'ine\x20side,\x20'+'with\x20the\x20w'+'ay\x20premult'+'iplied\x20alp'+'ha\x20is\x20hand'+'led\x20as\x20wel'+'l.\x0a\x20\x20\x20\x20var'+'\x20color\x20=\x20v'+'ec4f(gamma'+'CorrectInp'+'utVec3(col'+'or_in.rgb)'+',\x20color_in'+'.a);\x0a\x0a\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20field\x0a'+'\x20\x20\x20\x20let\x20ts'+'ample:\x20vec'+'3f\x20=\x20textu'+'reSample(t'+'exture_msd'+'fMap,\x20text'+'ure_msdfMa'+'pSampler,\x20'+'vUv0).rgb;'+'\x0a\x20\x20\x20\x20let\x20u'+'vShdw:\x20vec'+'2f\x20=\x20vUv0\x20'+'-\x20shadow_o'+'ffsetValue'+';\x0a\x20\x20\x20\x20let\x20'+'ssample:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'(texture_m'+'sdfMap,\x20te'+'xture_msdf'+'MapSampler'+',\x20uvShdw).'+'rgb;\x0a\x0a\x20\x20\x20\x20'+'//\x20get\x20the'+'\x20signed\x20di'+'stance\x20val'+'ue\x0a\x20\x20\x20\x20let')+('\x20sigDist:\x20'+'f32\x20=\x20medi'+'an(tsample'+'.r,\x20tsampl'+'e.g,\x20tsamp'+'le.b);\x0a\x20\x20\x20'+'\x20var\x20sigDi'+'stShdw:\x20f3'+'2\x20=\x20median'+'(ssample.r'+',\x20ssample.'+'g,\x20ssample'+'.b);\x0a\x0a\x20\x20\x20\x20'+'//\x20smoothi'+'ng\x20limit\x20-'+'\x20smaller\x20v'+'alue\x20makes'+'\x20for\x20sharp'+'er\x20but\x20mor'+'e\x20aliased\x20'+'text,\x20espe'+'cially\x20on\x20'+'angles\x0a\x20\x20\x20'+'\x20//\x20too\x20la'+'rge\x20value\x20'+'(0.5)\x20crea'+'tes\x20a\x20dark'+'\x20glow\x20arou'+'nd\x20the\x20let'+'ters\x0a\x20\x20\x20\x20l'+'et\x20smoothi'+'ngMax:\x20f32'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20let'+'\x20w:\x20vec2f\x20'+'=\x20abs(dpdx'+'(vUv0))\x20+\x20'+'abs(dpdy(v'+'Uv0));\x0a\x20\x20\x20'+'\x20let\x20smoot'+'hing:\x20f32\x20'+'=\x20clamp(w.'+'x\x20*\x20unifor'+'m.font_tex'+'tureWidth\x20'+'/\x20uniform.'+'font_pxran'+'ge,\x200.0,\x20s'+'moothingMa'+'x);\x0a\x0a\x20\x20\x20\x20l'+'et\x20mapMin:'+'\x20f32\x20=\x200.0'+'5;\x0a\x20\x20\x20\x20let'+'\x20mapMax:\x20f'+'32\x20=\x20clamp'+'(1.0\x20-\x20uni'+'form.font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20let\x20si'+'gDistInner'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist);\x0a\x20\x20'+'\x20\x20let\x20sigD'+'istOutline'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist\x20+\x20ou'+'tline_thic'+'knessValue'+');\x0a\x20\x20\x20\x20sig'+'DistShdw\x20='+'\x20map(mapMi'+'n,\x20mapMax,'+'\x20sigDistSh'+'dw\x20+\x20outli'+'ne_thickne'+'ssValue);\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'enter:\x20f32'+'\x20=\x200.5;\x0a\x20\x20'+'\x20\x20//\x20calcu'+'late\x20smoot'+'hing\x20and\x20u'+'se\x20to\x20gene')+('rate\x20opaci'+'ty\x0a\x20\x20\x20\x20let'+'\x20inside:\x20f'+'32\x20=\x20smoot'+'hstep(cent'+'er\x20-\x20smoot'+'hing,\x20cent'+'er\x20+\x20smoot'+'hing,\x20sigD'+'istInner);'+'\x0a\x20\x20\x20\x20let\x20o'+'utline:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stOutline)'+';\x0a\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20let\x20tc'+'olor_outli'+'ne:\x20vec4f\x20'+'=\x20outline\x20'+'*\x20vec4f(ou'+'tline_colo'+'rValue.a\x20*'+'\x20outline_c'+'olorValue.'+'rgb,\x20outli'+'ne_colorVa'+'lue.a);\x0a\x20\x20'+'\x20\x20var\x20tcol'+'or:\x20vec4f\x20'+'=\x20select(v'+'ec4f(0.0),'+'\x20tcolor_ou'+'tline,\x20out'+'line\x20>\x20ins'+'ide);\x0a\x20\x20\x20\x20'+'tcolor\x20=\x20m'+'ix(tcolor,'+'\x20color,\x20in'+'side);\x0a\x0a\x20\x20'+'\x20\x20let\x20scol'+'or_shadow:'+'\x20vec4f\x20=\x20s'+'hadow\x20*\x20ve'+'c4f(shadow'+'_colorValu'+'e.a\x20*\x20shad'+'ow_colorVa'+'lue.rgb,\x20s'+'hadow_colo'+'rValue.a);'+'\x0a\x20\x20\x20\x20let\x20s'+'color:\x20vec'+'4f\x20=\x20selec'+'t(tcolor,\x20'+'scolor_sha'+'dow,\x20shado'+'w\x20>\x20outlin'+'e);\x0a\x20\x20\x20\x20tc'+'olor\x20=\x20mix'+'(scolor,\x20t'+'color,\x20out'+'line);\x0a\x0a\x20\x20'+'\x20\x20//\x20Conve'+'rt\x20back\x20to'+'\x20gamma\x20spa'+'ce\x20before\x20'+'returning\x0a'+'\x20\x20\x20\x20tcolor'+'\x20=\x20vec4f(g'+'ammaCorrec'+'tOutput(tc'+'olor.rgb),'+'\x20tcolor.a)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20tcolor'+';\x0a}\x0a'),ZM='\x0a\x0afn\x20getSp'+'ecularModu'+'late(specu'+'larity:\x20ve'+'c3f,\x20albed'+'o:\x20vec3f,\x20'+'metalness:'+'\x20f32,\x20f0:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20dielec'+'tricF0:\x20ve'+'c3f\x20=\x20f0\x20*'+'\x20speculari'+'ty;\x0a\x20\x20\x20\x20re'+'turn\x20mix(d'+'ielectricF'+'0,\x20albedo,'+'\x20metalness'+');\x0a}\x0a\x0afn\x20g'+'etAlbedoMo'+'dulate(alb'+'edo:\x20vec3f'+',\x20metalnes'+'s:\x20f32)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'albedo\x20*\x20('+'1.0\x20-\x20meta'+'lness);\x0a}\x0a',QM='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var\x20morph'+'Texture:\x20t'+'exture_2d_'+'array<f32>'+';\x0a\x20\x20\x20\x20unif'+'orm\x20morphF'+'actor:\x20arr'+'ay<f32,\x20{M'+'ORPH_TEXTU'+'RE_MAX_COU'+'NT}>;\x0a\x20\x20\x20\x20'+'uniform\x20mo'+'rphIndex:\x20'+'array<u32,'+'\x20{MORPH_TE'+'XTURE_MAX_'+'COUNT}>;\x0a\x20'+'\x20\x20\x20uniform'+'\x20count:\x20u3'+'2;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x0a\x20\x20'+'\x20\x20fn\x20fragm'+'entMain(in'+'put\x20:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20color\x20='+'\x20vec3f(0,\x20'+'0,\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20t'+'extureDims'+'\x20=\x20texture'+'Dimensions'+'(morphText'+'ure);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20pi'+'xelCoords\x20'+'=\x20vec2i(in'+'put.uv0\x20*\x20'+'vec2f(text'+'ureDims));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'u32\x20=\x200;\x20i'+'\x20<\x20uniform'+'.count;\x20i\x20'+'=\x20i\x20+\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'tureIndex:'+'\x20u32\x20=\x20uni'+'form.morph'+'Index[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20delta\x20'+'=\x20textureL'+'oad(morphT'+'exture,\x20pi'+'xelCoords,'+'\x20textureIn'+'dex,\x200).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20+=\x20unifor'+'m.morphFac'+'tor[i].ele'+'ment\x20*\x20del'+'ta;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'color,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',JM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',eI='\x0aattribute'+'\x20vertex_ou'+'tlineParam'+'eters:\x20vec'+'3f;\x0aattrib'+'ute\x20vertex'+'_shadowPar'+'ameters:\x20v'+'ec3f;\x0a\x0avar'+'ying\x20outli'+'ne_color:\x20'+'vec4f;\x0avar'+'ying\x20outli'+'ne_thickne'+'ss:\x20f32;\x0av'+'arying\x20sha'+'dow_color:'+'\x20vec4f;\x0ava'+'rying\x20shad'+'ow_offset:'+'\x20vec2f;\x0a\x0av'+'ar<private'+'>\x20dOutline'+'Color:\x20vec'+'4f;\x0avar<pr'+'ivate>\x20dOu'+'tlineThick'+'ness:\x20f32;'+'\x0avar<priva'+'te>\x20dShado'+'wColor:\x20ve'+'c4f;\x0avar<p'+'rivate>\x20dS'+'hadowOffse'+'t:\x20vec2f;\x0a'+'\x0afn\x20unpack'+'MsdfParams'+'()\x20{\x0a\x20\x20\x20\x20l'+'et\x20little:'+'\x20vec3f\x20=\x20v'+'ertex_outl'+'ineParamet'+'ers\x20%\x20vec3'+'f(256.0);\x0a'+'\x20\x20\x20\x20let\x20bi'+'g:\x20vec3f\x20='+'\x20(vertex_o'+'utlinePara'+'meters\x20-\x20l'+'ittle)\x20/\x202'+'56.0;\x0a\x0a\x20\x20\x20'+'\x20dOutlineC'+'olor\x20=\x20vec'+'4f(little.'+'x,\x20big.x,\x20'+'little.y,\x20'+'big.y)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20//\x20_outli'+'neThicknes'+'sScale\x20==='+'\x200.2\x0a\x20\x20\x20\x20d'+'OutlineThi'+'ckness\x20=\x20l'+'ittle.z\x20/\x20'+'255.0\x20*\x200.'+'2;\x0a\x0a\x20\x20\x20\x20le'+'t\x20little_s'+'hadow\x20=\x20ve'+'rtex_shado'+'wParameter'+'s\x20%\x20vec3f('+'256.0);\x0a\x20\x20'+'\x20\x20let\x20big_'+'shadow\x20=\x20('+'vertex_sha'+'dowParamet'+'ers\x20-\x20litt'+'le_shadow)'+'\x20/\x20256.0;\x0a'+'\x0a\x20\x20\x20\x20dShad'+'owColor\x20=\x20'+'vec4f(litt'+'le_shadow.'+'x,\x20big_sha'+'dow.x,\x20lit'+'tle_shadow'+'.y,\x20big_sh'+'adow.y)\x20/\x20'+'255.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+('ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20dShad'+'owOffset\x20='+'\x20(vec2f(li'+'ttle_shado'+'w.z,\x20big_s'+'hadow.z)\x20/'+'\x20127.0\x20-\x201'+'.0)\x20*\x200.00'+'5;\x0a}\x0a'),tI='\x0avar<priva'+'te>\x20dNorma'+'lMatrix:\x20m'+'at3x3f;\x0a\x0af'+'n\x20getNorma'+'l()\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20d'+'NormalMatr'+'ix\x20=\x20getNo'+'rmalMatrix'+'(dModelMat'+'rix);\x0a\x20\x20\x20\x20'+'let\x20localN'+'ormal:\x20vec'+'3f\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}',sI='\x0a\x0aattribut'+'e\x20vertex_n'+'ormal:\x20vec'+'3f;\x0a\x0aunifo'+'rm\x20matrix_'+'normal:\x20ma'+'t3x3f;\x0a\x0a#i'+'fdef\x20MORPH'+'ING_NORMAL'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MORPHING'+'_INT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20mor'+'phNormalTe'+'x:\x20texture'+'_2d<u32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphNor'+'malTexSamp'+'ler:\x20sampl'+'er;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hNormalTex'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20morphNorm'+'alTexSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0afn\x20getLo'+'calNormal('+'vertexNorm'+'al:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20localNorm'+'al:\x20vec3f\x20'+'=\x20vertexNo'+'rmal;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_NOR'+'MAL\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20mor'+'phUV:\x20vec2'+'i\x20=\x20getTex'+'tureMorphC'+'oords();\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_INT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20morphN'+'ormalInt:\x20'+'vec4u\x20=\x20te'+'xtureLoad('+'morphNorma'+'lTex,\x20morp'+'hUV,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20morph'+'NormalF:\x20v'+'ec3f\x20=\x20vec'+'3f(morphNo'+'rmalInt.xy'+'z)\x20/\x2065535'+'.0\x20*\x202.0\x20-'+'\x201.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormalF;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'morphNorma'+'l:\x20vec3f\x20='+'\x20textureLo'+'ad(morphNo'+'rmalTex,\x20m'+'orphUV,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormal;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20lo'+'calNormal;'+'\x0a}\x0a\x0a#if\x20de'+'fined(SKIN'+')\x20||\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20fn\x20get'+('NormalMatr'+'ix(modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ma'+'t3x3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20mat3x3f'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20fn'+'\x20getNormal'+'Matrix(mod'+'elMatrix:\x20'+'mat4x4f)\x20-'+'>\x20mat3x3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20mat'+'3x3f(model'+'Matrix[0].'+'xyz,\x20model'+'Matrix[1].'+'xyz,\x20model'+'Matrix[2].'+'xyz);\x0a\x20\x20\x20\x20'+'}\x0a#else\x0a\x20\x20'+'\x20\x20fn\x20getNo'+'rmalMatrix'+'(modelMatr'+'ix:\x20mat4x4'+'f)\x20->\x20mat3'+'x3f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_norm'+'al;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),iI='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_bu'+'mpiness:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20un'+'iform\x20mate'+'rial_norma'+'lDetailMap'+'Bumpiness:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20//\x20https:'+'//blog.sel'+'fshadow.co'+'m/publicat'+'ions/blend'+'ing-in-det'+'ail/#detai'+'l-oriented'+'\x0a\x20\x20\x20\x20fn\x20bl'+'endNormals'+'(inN1:\x20vec'+'3f,\x20inN2:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'n1:\x20vec3f\x20'+'=\x20inN1\x20+\x20v'+'ec3f(0.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20n2:\x20vec'+'3f\x20=\x20inN2\x20'+'*\x20vec3f(-1'+'.0,\x20-1.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20n1\x20*\x20dot('+'n1,\x20n2)\x20/\x20'+'n1.z\x20-\x20n2;'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0afn\x20ge'+'tNormal()\x20'+'{\x0a#ifdef\x20S'+'TD_NORMAL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20var\x20norm'+'alMap:\x20vec'+'3f\x20=\x20{STD_'+'NORMAL_TEX'+'TURE_DECOD'+'E}(texture'+'SampleBias'+'({STD_NORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_NORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_NOR'+'MAL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias));\x0a'+'\x20\x20\x20\x20normal'+'Map\x20=\x20mix('+'vec3f(0.0,'+'\x200.0,\x201.0)'+',\x20normalMa'+'p,\x20uniform'+'.material_'+'bumpiness)'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_NO'+'RMALDETAIL'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20normalDet'+'ailMap:\x20ve'+'c3f\x20=\x20{STD'+'_NORMALDET'+'AIL_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE_NAME},'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_NAM'+'E}Sampler,'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_UV}'+(',\x20uniform.'+'textureBia'+'s));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalD'+'etailMap\x20='+'\x20mix(vec3f'+'(0.0,\x200.0,'+'\x201.0),\x20nor'+'malDetailM'+'ap,\x20unifor'+'m.material'+'_normalDet'+'ailMapBump'+'iness);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20norm'+'alMap\x20=\x20bl'+'endNormals'+'(normalMap'+',\x20normalDe'+'tailMap);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20nor'+'malize(dTB'+'N\x20*\x20normal'+'Map);\x0a#els'+'e\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a'),rI='\x0auniform\x20m'+'aterial_op'+'acity:\x20f32'+';\x0a\x0afn\x20getO'+'pacity()\x20{'+'\x0a\x20\x20\x20\x20dAlph'+'a\x20=\x20unifor'+'m.material'+'_opacity;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E\x0a\x20\x20\x20\x20dAlp'+'ha\x20=\x20dAlph'+'a\x20*\x20textur'+'eSampleBia'+'s({STD_OPA'+'CITY_TEXTU'+'RE_NAME},\x20'+'{STD_OPACI'+'TY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'OPACITY_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20=\x20dA'+'lpha\x20*\x20cla'+'mp(vVertex'+'Color.{STD'+'_OPACITY_V'+'ERTEX_CHAN'+'NEL},\x200.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',aI='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20blueNo'+'iseJitter:'+'\x20vec4f;\x0a\x0a#'+'if\x20STD_OPA'+'CITY_DITHE'+'R\x20==\x20BLUEN'+'OISE\x0a\x20\x20\x20\x20v'+'ar\x20blueNoi'+'seTex32\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20blueN'+'oiseTex32S'+'ampler\x20:\x20s'+'ampler;\x0a#e'+'ndif\x0a\x0afn\x20o'+'pacityDith'+'er(alpha:\x20'+'f32,\x20id:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'#if\x20STD_OP'+'ACITY_DITH'+'ER\x20==\x20BAYE'+'R8\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20nois'+'e:\x20f32\x20=\x20b'+'ayer8(floo'+'r((pcPosit'+'ion.xy\x20+\x20u'+'niform.blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+')\x20%\x20vec2f('+'8.0)))\x20/\x206'+'4.0;\x0a\x0a\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20=='+'\x20BLUENOISE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uv\x20'+'=\x20fract(pc'+'Position.x'+'y\x20/\x2032.0\x20+'+'\x20uniform.b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20noise:\x20f3'+'2\x20=\x20textur'+'eSampleLev'+'el(blueNoi'+'seTex32,\x20b'+'lueNoiseTe'+'x32Sampler'+',\x20uv,\x200.0)'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20IGNNOI'+'SE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ba'+'sed\x20on\x20htt'+'ps://www.i'+'ryoku.com/'+'next-gener'+'ation-post'+'-processin'+'g-in-call-'+'of-duty-ad'+'vanced-war'+'fare/\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20magic\x20=\x20'+'vec3f(0.06'+'711056,\x200.'+'00583715,\x20'+'52.9829189'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'oise:\x20f32\x20'+'=\x20fract(ma'+'gic.z\x20*\x20fr'+'act(dot(pc'+'Position.x'+'y\x20+\x20unifor'+'m.blueNois'+'eJitter.xy'+'\x20+\x20id,\x20mag'+('ic.xy)));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20conve'+'rt\x20the\x20noi'+'se\x20to\x20line'+'ar\x20space,\x20'+'as\x20that\x20is'+'\x20specified'+'\x20in\x20sRGB\x20s'+'pace\x20(stor'+'es\x20percept'+'ual\x20values'+')\x0a\x20\x20\x20\x20nois'+'e\x20=\x20pow(no'+'ise,\x202.2);'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'alpha\x20<\x20no'+'ise)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),nI='\x0a',oI='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(outp'+'ut.color.r'+'gb,\x20litArg'+'s_opacity)'+';\x0a\x0a#elif\x20L'+'IT_BLEND_T'+'YPE\x20==\x20PRE'+'MULTIPLIED'+'\x0a\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(out'+'put.color.'+'rgb\x20*\x20litA'+'rgs_opacit'+'y,\x20litArgs'+'_opacity);'+'\x0a\x0a#else\x0a\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(output'+'.color.rgb'+',\x201.0);\x0a\x0a#'+'endif\x0a',lI='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0avar\x20sour'+'ce:\x20textur'+'e_2d<f32>;'+'\x0avar\x20sourc'+'eSampler:\x20'+'sampler;\x0a\x0a'+'@fragment\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'textureSam'+'ple(source'+',\x20sourceSa'+'mpler,\x20inp'+'ut.vUv0);\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'+'\x0a',hI='\x0a\x0auniform\x20'+'material_s'+'heen:\x20vec3'+'f;\x0a\x0afn\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20var\x20sh'+'eenColor\x20='+'\x20uniform.m'+'aterial_sh'+'een;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_TEX'+'TURE\x0a\x20\x20\x20\x20s'+'heenColor\x20'+'=\x20sheenCol'+'or\x20*\x20{STD_'+'SHEEN_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SHEEN'+'_TEXTURE_N'+'AME},\x20{STD'+'_SHEEN_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEEN_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as)).{STD_'+'SHEEN_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_VER'+'TEX\x0a\x20\x20\x20\x20sh'+'eenColor\x20='+'\x20sheenColo'+'r\x20*\x20satura'+'te3(vVerte'+'xColor.{ST'+'D_SHEEN_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20sSpecula'+'rity\x20=\x20she'+'enColor;\x0a}'+'\x0a',cI='\x0auniform\x20m'+'aterial_sh'+'eenGloss:\x20'+'f32;\x0a\x0afn\x20g'+'etSheenGlo'+'ssiness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'sheenGloss'+'iness\x20=\x20un'+'iform.mate'+'rial_sheen'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SHEENGL'+'OSS_TEXTUR'+'E\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_SHEEN'+'GLOSS_TEXT'+'URE_NAME},'+'\x20{STD_SHEE'+'NGLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_UV},\x20un'+'iform.text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20=\x20'+'sheenGloss'+'iness\x20*\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'GLOSS_VERT'+'EX_CHANNEL'+'});\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEENGLOS'+'S_INVERT\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20='+'\x201.0\x20-\x20she'+'enGlossine'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'sGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'+\x200.000000'+'1;\x0a}\x0a',dI='\x0auniform\x20m'+'aterial_he'+'ightMapFac'+'tor:\x20f32;\x0a'+'\x0afn\x20getPar'+'allax()\x20{\x0a'+'\x20\x20\x20\x20var\x20pa'+'rallaxScal'+'e\x20=\x20unifor'+'m.material'+'_heightMap'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20var\x20hei'+'ght:\x20f32\x20='+'\x20textureSa'+'mpleBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_HEIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_HEIGHT_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'height\x20=\x20h'+'eight\x20*\x20pa'+'rallaxScal'+'e\x20-\x20parall'+'axScale\x20*\x20'+'0.5;\x0a\x20\x20\x20\x20v'+'ar\x20viewDir'+'T:\x20vec3f\x20='+'\x20dViewDirW'+'\x20*\x20dTBN;\x0a\x0a'+'\x20\x20\x20\x20viewDi'+'rT.z\x20=\x20vie'+'wDirT.z\x20+\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',fI='\x0auniform\x20m'+'eshInstanc'+'eId:\x20u32;\x0a'+'\x0afn\x20getPic'+'kOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20let\x20i'+'nv:\x20vec4f\x20'+'=\x20vec4f(1.'+'0\x20/\x20255.0)'+';\x0a\x20\x20\x20\x20let\x20'+'shifts:\x20ve'+'c4u\x20=\x20vec4'+'u(16u,\x208u,'+'\x200u,\x2024u);'+'\x0a\x20\x20\x20\x20let\x20c'+'ol:\x20vec4u\x20'+'=\x20(vec4u(u'+'niform.mes'+'hInstanceI'+'d)\x20>>\x20shif'+'ts)\x20&\x20vec4'+'u(0xffu);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4f(col'+')\x20*\x20inv;\x0a}',uI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20dReflDi'+'rW\x20=\x20norma'+'lize(-refl'+'ect(viewDi'+'r,\x20worldNo'+'rmal));\x0a}\x0a',mI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20rou'+'ghness:\x20f3'+'2\x20=\x20sqrt(1'+'.0\x20-\x20min(g'+'loss,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20directio'+'n:\x20vec2f\x20='+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20anisotrop'+'y:\x20f32\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cDirection'+':\x20vec3f\x20=\x20'+'anisotropi'+'cB;\x0a\x20\x20\x20\x20le'+'t\x20anisotro'+'picTangent'+':\x20vec3f\x20=\x20'+'cross(anis'+'otropicDir'+'ection,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20let\x20anis'+'otropicNor'+'mal:\x20vec3f'+'\x20=\x20cross(a'+'nisotropic'+'Tangent,\x20a'+'nisotropic'+'Direction)'+';\x0a\x20\x20\x20\x20let\x20'+'bendFactor'+':\x20f32\x20=\x201.'+'0\x20-\x20anisot'+'ropy\x20*\x20(1.'+'0\x20-\x20roughn'+'ess);\x0a\x20\x20\x20\x20'+'let\x20bendFa'+'ctor4:\x20f32'+'\x20=\x20bendFac'+'tor\x20*\x20bend'+'Factor\x20*\x20b'+'endFactor\x20'+'*\x20bendFact'+'or;\x0a\x20\x20\x20\x20le'+'t\x20bentNorm'+'al:\x20vec3f\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}',pI='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0afn\x20addRe'+'flectionCC'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20ccRef'+'lection\x20=\x20'+'ccReflecti'+'on\x20+\x20calcR'+'eflection('+'reflDir,\x20g'+'loss);\x0a}\x0a#'+'endif\x0a',_I='\x0avar\x20textu'+'re_cubeMap'+':\x20texture_'+'cube<f32>;'+'\x0avar\x20textu'+'re_cubeMap'+'Sampler:\x20s'+'ampler;\x0aun'+'iform\x20mate'+'rial_refle'+'ctivity:\x20f'+'32;\x0a\x0afn\x20ca'+'lcReflecti'+'on(reflDir'+':\x20vec3f,\x20g'+'loss:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'lookupVec:'+'\x20vec3f\x20=\x20c'+'ubeMapProj'+'ect(reflDi'+'r);\x0a\x20\x20\x20\x20lo'+'okupVec.x\x20'+'=\x20lookupVe'+'c.x\x20*\x20-1.0'+';\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_cubeMa'+'p,\x20texture'+'_cubeMapSa'+'mpler,\x20loo'+'kupVec));\x0a'+'}\x0a\x0afn\x20addR'+'eflection('+'reflDir:\x20v'+'ec3f,\x20glos'+'s:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20dR'+'eflection\x20'+'+\x20vec4f(ca'+'lcReflecti'+'on(reflDir'+',\x20gloss),\x20'+'uniform.ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',gI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20var\x20t'+'exture_env'+'Atlas:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'envAtlasSa'+'mpler:\x20sam'+'pler;\x0a#end'+'if\x0a\x0avar\x20te'+'xture_cube'+'Map:\x20textu'+'re_cube<f3'+'2>;\x0avar\x20te'+'xture_cube'+'MapSampler'+':\x20sampler;'+'\x0auniform\x20m'+'aterial_re'+'flectivity'+':\x20f32;\x0a\x0afn'+'\x20calcRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20dir:\x20ve'+'c3f\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20toSph'+'ericalUv(d'+'ir);\x0a\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20roughne'+'ss\x20level\x0a\x20'+'\x20\x20\x20let\x20lev'+'el:\x20f32\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20let\x20ile'+'vel:\x20f32\x20='+'\x20floor(lev'+'el);\x0a\x20\x20\x20\x20l'+'et\x20flevel:'+'\x20f32\x20=\x20lev'+'el\x20-\x20ileve'+'l;\x0a\x0a\x20\x20\x20\x20le'+'t\x20sharp:\x20v'+'ec3f\x20=\x20{re'+'flectionCu'+'bemapDecod'+'e}(texture'+'Sample(tex'+'ture_cubeM'+'ap,\x20textur'+'e_cubeMapS'+'ampler,\x20di'+'r));\x0a\x20\x20\x20\x20l'+'et\x20roughA:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+')));\x0a\x20\x20\x20\x20l'+'et\x20roughB:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(shar'+'p,\x20mix(rou'+('ghA,\x20rough'+'B,\x20flevel)'+',\x20min(leve'+'l,\x201.0)));'+'\x0a}\x0a\x0afn\x20add'+'Reflection'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20dRefl'+'ection\x20=\x20d'+'Reflection'+'\x20+\x20vec4f(c'+'alcReflect'+'ion(reflDi'+'r,\x20gloss),'+'\x20uniform.m'+'aterial_re'+'flectivity'+');\x0a}\x0a'),SI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_envA'+'tlasSample'+'r:\x20sampler'+';\x0a#endif\x0au'+'niform\x20mat'+'erial_refl'+'ectivity:\x20'+'f32;\x0a\x0a//\x20c'+'alculate\x20m'+'ip\x20level\x20f'+'or\x20shiny\x20r'+'eflection\x20'+'given\x20equi'+'rect\x20coord'+'s\x20uv.\x0afn\x20s'+'hinyMipLev'+'el(uv:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20dx:\x20vec2f'+'\x20=\x20dpdx(uv'+');\x0a\x20\x20\x20\x20let'+'\x20dy:\x20vec2f'+'\x20=\x20dpdy(uv'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20second\x20dF'+'\x20at\x20180\x20de'+'grees\x0a\x20\x20\x20\x20'+'let\x20uv2:\x20v'+'ec2f\x20=\x20vec'+'2f(fract(u'+'v.x\x20+\x200.5)'+',\x20uv.y);\x0a\x20'+'\x20\x20\x20let\x20dx2'+':\x20vec2f\x20=\x20'+'dpdx(uv2);'+'\x0a\x20\x20\x20\x20let\x20d'+'y2:\x20vec2f\x20'+'=\x20dpdy(uv2'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20min\x20of\x20bo'+'th\x20sets\x20of'+'\x20dF\x20to\x20han'+'dle\x20discon'+'tinuity\x20at'+'\x20the\x20azim\x20'+'edge\x0a\x20\x20\x20\x20l'+'et\x20maxd:\x20f'+'32\x20=\x20min(m'+'ax(dot(dx,'+'\x20dx),\x20dot('+'dy,\x20dy)),\x20'+'max(dot(dx'+'2,\x20dx2),\x20d'+'ot(dy2,\x20dy'+'2)));\x0a\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(0.5\x20*\x20'+'log2(maxd)'+'\x20-\x201.0\x20+\x20u'+'niform.tex'+'tureBias,\x20'+'0.0,\x205.0);'+'\x0a}\x0a\x0afn\x20cal'+'cReflectio'+'n(reflDir:'+'\x20vec3f,\x20gl'+'oss:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20d'+'ir:\x20vec3f\x20'+'=\x20cubeMapP'+'roject(ref'+'lDir)\x20*\x20ve'+'c3f(-1.0,\x20'+'1.0,\x201.0);'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20toSpheric'+'alUv(dir);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20r'+'oughness\x20l'+'evel\x0a\x20\x20\x20\x20l'+'et\x20level:\x20'+'f32\x20=\x20satu'+'rate(1.0\x20-'+'\x20gloss)\x20*\x20'+'5.0;\x0a\x20\x20\x20\x20l'+('et\x20ilevel:'+'\x20f32\x20=\x20flo'+'or(level);'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ccessing\x20t'+'he\x20shiny\x20('+'top\x20level)'+'\x20reflectio'+'n\x20-\x20perfor'+'m\x20manual\x20m'+'ipmap\x20look'+'up\x0a\x20\x20\x20\x20let'+'\x20level2:\x20f'+'32\x20=\x20shiny'+'MipLevel(u'+'v\x20*\x20atlasS'+'ize);\x0a\x20\x20\x20\x20'+'let\x20ilevel'+'2:\x20f32\x20=\x20f'+'loor(level'+'2);\x0a\x0a\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20uv1:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20weight:'+'\x20f32;\x0a\x20\x20\x20\x20'+'if\x20(ilevel'+'\x20==\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'1\x20=\x20mapShi'+'nyUv(uv,\x20i'+'level2\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20weight\x20'+'=\x20level2\x20-'+'\x20ilevel2;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20access'+'ing\x20rough\x20'+'reflection'+'\x20-\x20just\x20sa'+'mple\x20the\x20s'+'ame\x20part\x20t'+'wice\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv0\x20=\x20m'+'apRoughnes'+'sUv(uv,\x20il'+'evel);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv1\x20='+'\x20uv0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x200.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20linearA'+':\x20vec3f\x20=\x20'+'{reflectio'+'nDecode}(t'+'extureSamp'+'le(texture'+'_envAtlas,'+'\x20texture_e'+'nvAtlasSam'+'pler,\x20uv0)'+');\x0a\x20\x20\x20\x20let'+'\x20linearB:\x20'+'vec3f\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'tureSample'+'(texture_e'+'nvAtlas,\x20t'+'exture_env'+'AtlasSampl'+'er,\x20uv1));'+'\x0a\x20\x20\x20\x20let\x20l'+'inear0:\x20ve'+'c3f\x20=\x20mix('+'linearA,\x20l'+'inearB,\x20we'+'ight);\x0a\x20\x20\x20'+'\x20let\x20linea'+'r1:\x20vec3f\x20'+'=\x20{reflect'+'ionDecode}'+'(textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r')+('eturn\x20proc'+'essEnviron'+'ment(mix(l'+'inear0,\x20li'+'near1,\x20lev'+'el\x20-\x20ileve'+'l));\x0a}\x0a\x0afn'+'\x20addReflec'+'tion(reflD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20d'+'Reflection'+'\x20=\x20dReflec'+'tion\x20+\x20vec'+'4f(calcRef'+'lection(re'+'flDir,\x20glo'+'ss),\x20unifo'+'rm.materia'+'l_reflecti'+'vity);\x0a}\x0a'),yI='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a#en'+'dif\x0a\x0avar\x20t'+'exture_sph'+'ereMap:\x20te'+'xture_2d<f'+'32>;\x0avar\x20t'+'exture_sph'+'ereMapSamp'+'ler:\x20sampl'+'er;\x0aunifor'+'m\x20material'+'_reflectiv'+'ity:\x20f32;\x0a'+'\x0afn\x20calcRe'+'flection(r'+'eflDir:\x20ve'+'c3f,\x20gloss'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20view'+'RotationMa'+'trix\x20=\x20mat'+'3x3f(unifo'+'rm.matrix_'+'view[0].xy'+'z,\x20uniform'+'.matrix_vi'+'ew[1].xyz,'+'\x20uniform.m'+'atrix_view'+'[2].xyz);\x0a'+'\x20\x20\x20\x20let\x20re'+'flDirV:\x20ve'+'c3f\x20=\x20view'+'RotationMa'+'trix\x20*\x20ref'+'lDir;\x0a\x0a\x20\x20\x20'+'\x20let\x20m:\x20f3'+'2\x20=\x202.0\x20*\x20'+'sqrt(dot(r'+'eflDirV.xy'+',\x20reflDirV'+'.xy)\x20+\x20(re'+'flDirV.z\x20+'+'\x201.0)\x20*\x20(r'+'eflDirV.z\x20'+'+\x201.0));\x0a\x20'+'\x20\x20\x20let\x20sph'+'ereMapUv:\x20'+'vec2f\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_sphere'+'Map,\x20textu'+'re_sphereM'+'apSampler,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0af'+'n\x20addRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20dRefle'+'ction\x20+\x20ve'+'c4f(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20unif'+'orm.materi'+'al_reflect'+'ivity);\x0a}\x0a',vI='\x0a\x0afn\x20addRe'+'flectionSh'+'een(worldN'+'ormal:\x20vec'+'3f,\x20viewDi'+'r:\x20vec3f,\x20'+'gloss:\x20f32'+')\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20dot(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20let\x20al'+'phaG:\x20f32\x20'+'=\x20gloss\x20*\x20'+'gloss;\x0a\x0a\x20\x20'+'\x20\x20//\x20Avoid'+'\x20using\x20a\x20L'+'UT\x20and\x20app'+'roximate\x20t'+'he\x20values\x20'+'analytical'+'ly\x0a\x20\x20\x20\x20let'+'\x20a:\x20f32\x20=\x20'+'select(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20-339.2\x20*'+'\x20alphaG\x20+\x20'+'161.4\x20*\x20gl'+'oss\x20-\x2025.9'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gloss\x20<\x200.'+'25\x0a\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20let\x20b:'+'\x20f32\x20=\x20sel'+'ect(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.97\x20*\x20'+'alphaG\x20-\x203'+'.27\x20*\x20glos'+'s\x20+\x200.72,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x2044'+'.0\x20*\x20alpha'+'G\x20-\x2023.7\x20*'+'\x20gloss\x20+\x203'+'.26,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss\x20<'+'\x200.25\x0a\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20let'+'\x20dg_add:\x20f'+'32\x20=\x20selec'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.1\x20*\x20(\x20g'+'loss\x20-\x200.2'+'5\x20),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x200.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s\x20<\x200.25\x0a\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'let\x20dg:\x20f3'+'2\x20=\x20exp(\x20a'+'\x20*\x20NoV\x20+\x20b'+'\x20)\x20+\x20dg_ad'+'d;\x0a\x20\x20\x20\x20sRe'+'flection\x20='+'\x20sReflecti'+'on\x20+\x20(calc'+'Reflection'+'(worldNorm'+'al,\x200.0)\x20*'+'\x20saturate('+'dg));\x0a}',xI='\x0afn\x20refrac'+'t2(viewVec'+':\x20vec3f,\x20n'+'ormal:\x20vec'+'3f,\x20IOR:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20vn:\x20f32'+'\x20=\x20dot(vie'+'wVec,\x20norm'+'al);\x0a\x20\x20\x20\x20l'+'et\x20k:\x20f32\x20'+'=\x201.0\x20-\x20IO'+'R\x20*\x20IOR\x20*\x20'+'(1.0\x20-\x20vn\x20'+'*\x20vn);\x0a\x20\x20\x20'+'\x20let\x20refrV'+'ec:\x20vec3f\x20'+'=\x20IOR\x20*\x20vi'+'ewVec\x20-\x20(I'+'OR\x20*\x20vn\x20+\x20'+'sqrt(k))\x20*'+'\x20normal;\x0a\x20'+'\x20\x20\x20return\x20'+'refrVec;\x0a}'+'\x0a\x0afn\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20vi'+'ewDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20th'+'ickness:\x20f'+'32,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20al'+'bedo:\x20vec3'+'f,\x0a\x20\x20\x20\x20tra'+'nsmission:'+'\x20f32,\x0a\x20\x20\x20\x20'+'refraction'+'Index:\x20f32'+',\x0a\x20\x20\x20\x20disp'+'ersion:\x20f3'+'2\x0a#if\x20defi'+'ned(LIT_IR'+'IDESCENCE)'+'\x0a\x20\x20\x20\x20,\x20iri'+'descenceFr'+'esnel:\x20vec'+'3f,\x0a\x20\x20\x20\x20ir'+'idescenceI'+'ntensity:\x20'+'f32\x0a#endif'+'\x0a)\x20{\x0a\x20\x20\x20\x20/'+'/\x20use\x20same'+'\x20reflectio'+'n\x20code\x20wit'+'h\x20refracti'+'on\x20vector\x0a'+'\x20\x20\x20\x20let\x20tm'+'pRefl:\x20vec'+'4f\x20=\x20dRefl'+'ection;\x0a\x20\x20'+'\x20\x20let\x20refl'+'ectionDir:'+'\x20vec3f\x20=\x20r'+'efract2(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndex);\x0a\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(0.0);\x0a\x20'+'\x20\x20\x20addRefl'+'ection(ref'+'lectionDir'+',\x20gloss);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'mix(dDiffu'+'seLight,\x20d'+'Reflection'+'.rgb\x20*\x20alb'+'edo,\x20trans'+'mission);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20tm'+'pRefl;\x0a}\x0a',TI='\x0auniform\x20m'+'aterial_in'+'vAttenuati'+'onDistance'+':\x20f32;\x0auni'+'form\x20mater'+'ial_attenu'+'ation:\x20vec'+'3f;\x0a\x0afn\x20ev'+'alRefracti'+'onColor(re'+'fractionVe'+'ctor:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20refra'+'ctionIndex'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20The\x20'+'refraction'+'\x20point\x20is\x20'+'the\x20entry\x20'+'point\x20+\x20ve'+'ctor\x20to\x20ex'+'it\x20point\x0a\x20'+'\x20\x20\x20let\x20poi'+'ntOfRefrac'+'tion:\x20vec4'+'f\x20=\x20vec4f('+'vPositionW'+'\x20+\x20refract'+'ionVector,'+'\x201.0);\x0a\x0a\x20\x20'+'\x20\x20//\x20Proje'+'ct\x20to\x20text'+'ure\x20space\x20'+'so\x20we\x20can\x20'+'sample\x20it\x0a'+'\x20\x20\x20\x20let\x20pr'+'ojectionPo'+'int:\x20vec4f'+'\x20=\x20uniform'+'.matrix_vi'+'ewProjecti'+'on\x20*\x20point'+'OfRefracti'+'on;\x0a\x0a\x20\x20\x20\x20/'+'/\x20use\x20buil'+'t-in\x20getGr'+'abScreenPo'+'s\x20function'+'\x20to\x20conver'+'t\x20screen\x20p'+'osition\x20to'+'\x20grab\x20text'+'ure\x20uv\x20coo'+'rds\x0a\x20\x20\x20\x20le'+'t\x20uv:\x20vec2'+'f\x20=\x20getGra'+'bScreenPos'+'(projectio'+'nPoint);\x0a\x0a'+'\x20\x20\x20\x20//\x20Use'+'\x20IOR\x20and\x20r'+'oughness\x20t'+'o\x20select\x20m'+'ip\x0a\x20\x20\x20\x20let'+'\x20iorToRoug'+'hness:\x20f32'+'\x20=\x20(1.0\x20-\x20'+'gloss)\x20*\x20c'+'lamp((1.0\x20'+'/\x20refracti'+'onIndex)\x20*'+'\x202.0\x20-\x202.0'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20let'+'\x20refractio'+'nLod:\x20f32\x20'+'=\x20log2(uni'+'form.uScre'+'enSize.x)\x20'+'*\x20iorToRou'+'ghness;\x0a\x20\x20'+'\x20\x20let\x20refr'+'action:\x20ve'+'c3f\x20=\x20text'+'ureSampleL'+'evel(uScen'+'eColorMap,'+'\x20uSceneCol'+'orMapSampl'+'er,\x20uv,\x20re'+'fractionLo'+'d).rgb;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'refraction'+';\x0a}\x0a\x0afn\x20ad'+'dRefractio'+'n(\x0a\x20\x20\x20\x20wor'+('ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20thickness'+':\x20f32,\x0a\x20\x20\x20'+'\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20albedo:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'transmissi'+'on:\x20f32,\x0a\x20'+'\x20\x20\x20refract'+'ionIndex:\x20'+'f32,\x0a\x20\x20\x20\x20d'+'ispersion:'+'\x20f32,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'iridescenc'+'eIntensity'+':\x20f32\x0a#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20Extra'+'ct\x20scale\x20f'+'rom\x20the\x20mo'+'del\x20transf'+'orm\x0a\x20\x20\x20\x20va'+'r\x20modelSca'+'le:\x20vec3f;'+'\x0a\x20\x20\x20\x20model'+'Scale.x\x20=\x20'+'length(uni'+'form.matri'+'x_model[0]'+'.xyz);\x0a\x20\x20\x20'+'\x20modelScal'+'e.y\x20=\x20leng'+'th(uniform'+'.matrix_mo'+'del[1].xyz'+');\x0a\x20\x20\x20\x20mod'+'elScale.z\x20'+'=\x20length(u'+'niform.mat'+'rix_model['+'2].xyz);\x0a\x0a'+'\x20\x20\x20\x20//\x20Cal'+'culate\x20the'+'\x20refractio'+'n\x20vector,\x20'+'scaled\x20by\x20'+'the\x20thickn'+'ess\x20and\x20sc'+'ale\x20of\x20the'+'\x20object\x0a\x20\x20'+'\x20\x20let\x20scal'+'e:\x20vec3f\x20='+'\x20thickness'+'\x20*\x20modelSc'+'ale;\x0a\x20\x20\x20\x20v'+'ar\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndex))'+'\x20*\x20scale;\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'x);\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20based\x20on'+'\x20the\x20dispe'+'rsion\x20mate'+'rial\x20prope'+'rty,\x20calcu'+'late\x20modif'+'ied\x20refrac'+'tion\x20index'+'\x20values\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20f'+'or\x20R\x20and\x20B'+'\x20channels\x20')+('and\x20evalua'+'te\x20the\x20ref'+'raction\x20co'+'lor\x20for\x20th'+'em.\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Spread:\x20f3'+'2\x20=\x20(1.0\x20/'+'\x20refractio'+'nIndex\x20-\x201'+'.0)\x20*\x200.02'+'5\x20*\x20disper'+'sion;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20r'+'efractionI'+'ndexR:\x20f32'+'\x20=\x20refract'+'ionIndex\x20-'+'\x20halfSprea'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20refractio'+'nVector\x20=\x20'+'normalize('+'refract(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndexR))\x20'+'*\x20scale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ref'+'raction.r\x20'+'=\x20evalRefr'+'actionColo'+'r(refracti'+'onVector,\x20'+'gloss,\x20ref'+'ractionInd'+'exR).r;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20refractio'+'nIndexB:\x20f'+'32\x20=\x20refra'+'ctionIndex'+'\x20+\x20halfSpr'+'ead;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndexB)'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efraction.'+'b\x20=\x20evalRe'+'fractionCo'+'lor(refrac'+'tionVector'+',\x20gloss,\x20r'+'efractionI'+'ndexB).b;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20T'+'ransmittan'+'ce\x20is\x20our\x20'+'final\x20refr'+'action\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20transmitt'+'ance:\x20vec3'+'f;\x0a\x20\x20\x20\x20if\x20'+'(uniform.m'+'aterial_in'+'vAttenuati'+'onDistance'+'\x20!=\x200.0)\x0a\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20att'+'enuation:\x20'+'vec3f\x20=\x20-l'+'og(uniform'+'.material_'+'attenuatio'+'n)\x20*\x20unifo'+'rm.materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans')+('mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20let\x20'+'fresnel:\x20v'+'ec3f\x20=\x20vec'+'3f(1.0)\x20-\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20world'+'Normal),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scenceInte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20mix(dDif'+'fuseLight,'+'\x20refractio'+'n\x20*\x20transm'+'ittance\x20*\x20'+'fresnel,\x20t'+'ransmissio'+'n);\x0a}\x0a'),wI='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0a#ifdef'+'\x20CUBEMAP_S'+'OURCE\x0a\x20\x20\x20\x20'+'var\x20source'+'Cube:\x20text'+'ure_cube<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20sourceC'+'ubeSampler'+'\x20:\x20sampler'+';\x0a#else\x0a\x20\x20'+'\x20\x20var\x20sour'+'ceTex:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sourceTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20//\x20sa'+'mples\x0a\x20\x20\x20\x20'+'var\x20sample'+'sTex:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20samplesTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20samplesT'+'exInverseS'+'ize:\x20vec2f'+';\x0a#endif\x0a\x0a'+'//\x20params:'+'\x0a//\x20x\x20-\x20ta'+'rget\x20cubem'+'ap\x20face\x200.'+'.6\x0a//\x20y\x20-\x20'+'target\x20ima'+'ge\x20total\x20p'+'ixels\x0a//\x20z'+'\x20-\x20source\x20'+'cubemap\x20si'+'ze\x0auniform'+'\x20params:\x20v'+'ec3f;\x0a\x0afn\x20'+'targetFace'+'()\x20->\x20f32\x20'+'{\x20return\x20u'+'niform.par'+'ams.x;\x20}\x0af'+'n\x20targetTo'+'talPixels('+')\x20->\x20f32\x20{'+'\x20return\x20un'+'iform.para'+'ms.y;\x20}\x0afn'+'\x20sourceTot'+'alPixels()'+'\x20->\x20f32\x20{\x20'+'return\x20uni'+'form.param'+'s.z;\x20}\x0a\x0aco'+'nst\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22enc'+'odePS\x22\x0a\x0a//'+'--\x20support'+'ed\x20project'+'ions\x0a\x0afn\x20m'+'odifySeams'+'(dir:\x20vec3'+'f,\x20scale:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20adir\x20='+'\x20abs(dir);'+'\x0a\x20\x20\x20\x20let\x20M'+'\x20=\x20max(max'+'(adir.x,\x20a'+'dir.y),\x20ad'+'ir.z);\x0a\x20\x20\x20'+'\x20return\x20di'+'r\x20/\x20M\x20*\x20ve'+'c3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20select('+('scale,\x201.0'+',\x20adir.x\x20='+'=\x20M),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20select'+'(scale,\x201.'+'0,\x20adir.y\x20'+'==\x20M),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20selec'+'t(scale,\x201'+'.0,\x20adir.z'+'\x20==\x20M)\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0afn\x20'+'toSpherica'+'l(dir:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20l'+'et\x20nonZero'+'XZ\x20=\x20any(d'+'ir.xz\x20!=\x20v'+'ec2f(0.0,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2f(select'+'(0.0,\x20atan'+'2(dir.x,\x20d'+'ir.z),\x20non'+'ZeroXZ),\x20a'+'sin(dir.y)'+');\x0a}\x0a\x0afn\x20f'+'romSpheric'+'al(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20vec3'+'f(cos(uv.y'+')\x20*\x20sin(uv'+'.x),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sin(uv.y)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'s(uv.y)\x20*\x20'+'cos(uv.x))'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Equirect(u'+'v:\x20vec2f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20fromSphe'+'rical((vec'+'2f(uv.x,\x201'+'.0\x20-\x20uv.y)'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20vec2'+'f(PI,\x20PI\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20octahe'+'dral\x20code,'+'\x20based\x20on\x20'+'https://jc'+'gt.org/pub'+'lished/000'+'3/02/01/\x0a/'+'/\x20\x22Survey\x20'+'of\x20Efficie'+'nt\x20Represe'+'ntations\x20f'+'or\x20Indepen'+'dent\x20Unit\x20'+'Vectors\x22\x20b'+'y\x20Cigolle,'+'\x20Donow,\x20Ev'+'angelakos,'+'\x20Mara,\x20McG'+'uire,\x20Meye'+'r\x0a\x0afn\x20sign'+'NotZero(k:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20sele'+'ct(-1.0,\x201'+'.0,\x20k\x20>=\x200'+'.0);\x0a}\x0a\x0afn'+'\x20signNotZe'+'roVec2(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec2f(signN'+'otZero(v.x'+'),\x20signNot'+'Zero(v.y))'+';\x0a}\x0a\x0a//\x20Re'+'turns\x20a\x20un'+'it\x20vector.'+'\x20Argument\x20'+'o\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20pack')+('ed\x20via\x20oct'+'Encode,\x20on'+'\x20the\x20[-1,\x20'+'+1]\x20square'+'\x0afn\x20octDec'+'ode(o:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20v\x20=\x20vec'+'3f(o.x,\x201.'+'0\x20-\x20abs(o.'+'x)\x20-\x20abs(o'+'.y),\x20o.y);'+'\x0a\x20\x20\x20\x20if\x20(v'+'.y\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20temp:\x20'+'vec2f\x20=\x20(1'+'.0\x20-\x20abs(v'+'.zx))\x20*\x20si'+'gnNotZeroV'+'ec2(v.xz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'\x20=\x20vec3f(t'+'emp.x,\x20v.y'+',\x20temp.y);'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20no'+'rmalize(v)'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Octahedral'+'(uv:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20octDec'+'ode(vec2f('+'uv.x,\x201.0\x20'+'-\x20uv.y)\x20*\x20'+'2.0\x20-\x201.0)'+';\x0a}\x0a\x0a//\x20As'+'sumes\x20that'+'\x20v\x20is\x20a\x20un'+'it\x20vector.'+'\x20The\x20resul'+'t\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20on\x20t'+'he\x20[-1,\x20+1'+']\x20square\x0af'+'n\x20octEncod'+'e(v:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20var\x20'+'result\x20=\x20v'+'.xz\x20*\x20(1.0'+'\x20/\x20l1norm)'+';\x0a\x20\x20\x20\x20if\x20('+'v.y\x20<\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'(1.0\x20-\x20abs'+'(result.yx'+'))\x20*\x20signN'+'otZeroVec2'+'(result.xy'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20return\x20'+'result;\x0a}\x0a'+'\x0a/////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'\x0a\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20fn'+'\x20sampleCub'+'emapDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'sourceCube'+',\x20sourceCu'+'beSampler,'+'\x20modifySea'+'ms(dir,\x201.'+'0));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleCubem'+'apSph(sph:')+('\x20vec2f)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20sample'+'CubemapDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leCubemapD'+'irLod(dir:'+'\x20vec3f,\x20mi'+'pLevel:\x20f3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leLevel(so'+'urceCube,\x20'+'sourceCube'+'Sampler,\x20m'+'odifySeams'+'(dir,\x201.0)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleCubemap'+'SphLod(sph'+':\x20vec2f,\x20m'+'ipLevel:\x20f'+'32)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'sampleCube'+'mapDirLod('+'fromSpheri'+'cal(sph),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a#el'+'se\x0a\x0a\x20\x20\x20\x20fn'+'\x20sampleEqu'+'irectSph(s'+'ph:\x20vec2f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv\x20=\x20s'+'ph\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'(sourceTex'+',\x20sourceTe'+'xSampler,\x20'+'vec2f(uv.x'+',\x201.0\x20-\x20uv'+'.y));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20fn\x20'+'sampleEqui'+'rectDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leEquirect'+'Sph(toSphe'+'rical(dir)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleEquirec'+'tSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20uv'+'\x20=\x20sph\x20/\x20v'+'ec2f(PI\x20*\x20'+'2.0,\x20PI)\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleLevel('+'sourceTex,'+'\x20sourceTex'+'Sampler,\x20v'+'ec2f(uv.x,'+'\x201.0\x20-\x20uv.'+'y),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleEquir'+'ectDirLod('+'dir:\x20vec3f'+',\x20mipLevel'+':\x20f32)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleE')+('quirectSph'+'Lod(toSphe'+'rical(dir)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleOctahed'+'ralDir(dir'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20=\x20oct'+'Encode(dir'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'textureSam'+'ple(source'+'Tex,\x20sourc'+'eTexSample'+'r,\x20vec2f(u'+'v.x,\x201.0\x20-'+'\x20uv.y));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20sampleO'+'ctahedralS'+'ph(sph:\x20ve'+'c2f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leOctahedr'+'alDirLod(d'+'ir:\x20vec3f,'+'\x20mipLevel:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'v\x20=\x20octEnc'+'ode(dir)\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'Level(sour'+'ceTex,\x20sou'+'rceTexSamp'+'ler,\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20sampl'+'eOctahedra'+'lSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'Lod(fromSp'+'herical(sp'+'h),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a\x0a'+'fn\x20getDire'+'ctionCubem'+'ap(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20st\x20=\x20uv'+'\x20*\x202.0\x20-\x201'+'.0;\x0a\x20\x20\x20\x20le'+'t\x20face\x20=\x20t'+'argetFace('+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20vec:\x20vec'+'3f;\x0a\x20\x20\x20\x20if'+'\x20(face\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(1,\x20'+'-st.y,\x20-st'+'.x);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3f(-1,\x20-'+'st.y,\x20st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x202.0)')+('\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3f(st.x,\x201'+',\x20st.y);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(face\x20='+'=\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'\x20=\x20vec3f(s'+'t.x,\x20-1,\x20-'+'st.y);\x0a\x20\x20\x20'+'\x20}\x20else\x20if'+'\x20(face\x20==\x20'+'4.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(st.'+'x,\x20-st.y,\x20'+'1);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(-st'+'.x,\x20-st.y,'+'\x20-1);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20normal'+'ize(modify'+'Seams(vec,'+'\x201.0));\x0a}\x0a'+'\x0afn\x20matrix'+'FromVector'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x201.0\x20'+'/\x20(1.0\x20+\x20n'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20-n.'+'x\x20*\x20n.y\x20*\x20'+'a;\x0a\x20\x20\x20\x20let'+'\x20b1\x20=\x20vec3'+'f(1.0\x20-\x20n.'+'x\x20*\x20n.x\x20*\x20'+'a,\x20b,\x20-n.x'+');\x0a\x20\x20\x20\x20let'+'\x20b2\x20=\x20vec3'+'f(b,\x201.0\x20-'+'\x20n.y\x20*\x20n.y'+'\x20*\x20a,\x20-n.y'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mat3x3'+'f(b1,\x20b2,\x20'+'n);\x0a}\x0a\x0afn\x20'+'matrixFrom'+'VectorSlow'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20up\x20=\x20sel'+'ect(vec3f('+'0.0,\x200.0,\x20'+'select(-1.'+'0,\x201.0,\x20n.'+'y\x20>\x200.0)),'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'),\x20abs(n.y'+')\x20>\x200.0000'+'001);\x0a\x20\x20\x20\x20'+'let\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20let'+'\x20y\x20=\x20cross'+'(n,\x20x);\x0a\x20\x20'+'\x20\x20return\x20m'+'at3x3f(x,\x20'+'y,\x20n);\x0a}\x0a\x0a'+'fn\x20reproje'+'ct(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20i'+'f\x20({NUM_SA'+'MPLES}\x20<=\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20sing'+'le\x20sample\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}({'+'DECODE_FUN'+'C}({SOURCE'+'_FUNC}Dir('+'{TARGET_FU'+'NC}(uv))))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mult'+'i\x20sample\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20t\x20=\x20{TARG')+('ET_FUNC}(u'+'v);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20tu\x20='+'\x20dpdx(t);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20tv\x20=\x20dpd'+'y(t);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'u\x20+=\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20for\x20(v'+'ar\x20v\x20=\x200.0'+';\x20v\x20<\x20{NUM'+'_SAMPLES_S'+'QRT};\x20v\x20+='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}Dir(norma'+'lize(t\x20+\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20t'+'u\x20*\x20(u\x20/\x20{'+'NUM_SAMPLE'+'S_SQRT}\x20-\x20'+'0.5)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tv\x20'+'*\x20(v\x20/\x20{NU'+'M_SAMPLES_'+'SQRT}\x20-\x200.'+'5))));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20{ENC'+'ODE_FUNC}('+'result\x20/\x20('+'{NUM_SAMPL'+'ES_SQRT}\x20*'+'\x20{NUM_SAMP'+'LES_SQRT})'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0aconst\x20un'+'packFloat:'+'\x20vec4f\x20=\x20v'+'ec4f(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20fn\x20un'+'packSample'+'(i:\x20i32,\x20L'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20mipLev'+'el:\x20ptr<fu'+'nction,\x20f3'+'2>)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20u\x20'+'=\x20(f32(i\x20*'+'\x204)\x20+\x200.5)'+'\x20*\x20uniform'+'.samplesTe'+'xInverseSi'+'ze.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20v\x20'+'=\x20(floor(u'+')\x20+\x200.5)\x20*'+'\x20uniform.s'+'amplesTexI'+'nverseSize'+'.y;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20raw'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.x\x20=\x20dot(t'+'extureSamp')+('le(samples'+'Tex,\x20sampl'+'esTexSampl'+'er,\x20vec2f('+'u,\x20v)),\x20un'+'packFloat)'+';\x20u\x20+=\x20uni'+'form.sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'textureSam'+'ple(sample'+'sTex,\x20samp'+'lesTexSamp'+'ler,\x20vec2f'+'(u,\x20v)),\x20u'+'npackFloat'+');\x20u\x20+=\x20un'+'iform.samp'+'lesTexInve'+'rseSize.x;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.z\x20=\x20dot'+'(textureSa'+'mple(sampl'+'esTex,\x20sam'+'plesTexSam'+'pler,\x20vec2'+'f(u,\x20v)),\x20'+'unpackFloa'+'t);\x20u\x20+=\x20u'+'niform.sam'+'plesTexInv'+'erseSize.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'raw.w\x20=\x20do'+'t(textureS'+'ample(samp'+'lesTex,\x20sa'+'mplesTexSa'+'mpler,\x20vec'+'2f(u,\x20v)),'+'\x20unpackFlo'+'at);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20*L\x20=\x20r'+'aw.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*m'+'ipLevel\x20=\x20'+'raw.w\x20*\x208.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20con'+'volve\x20an\x20e'+'nvironment'+'\x20given\x20pre'+'-generated'+'\x20samples\x0a\x20'+'\x20\x20\x20fn\x20pref'+'ilterSampl'+'es(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'truct\x20vect'+'or\x20space\x20g'+'iven\x20targe'+'t\x20directio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vecSpa'+'ce\x20=\x20matri'+'xFromVecto'+'rSlow({TAR'+'GET_FUNC}('+'uv));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20L'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20mipLevel:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(var\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20i\x20+=\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unpa'+'ckSample(i'+',\x20&L,\x20&mip'+'Level);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'result\x20+=\x20'+'{DECODE_FU')+('NC}({SOURC'+'E_FUNC}Dir'+'Lod(vecSpa'+'ce\x20*\x20L,\x20mi'+'pLevel))\x20*'+'\x20L.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20to'+'talWeight\x20'+'+=\x20L.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20{ENCOD'+'E_FUNC}(re'+'sult\x20/\x20tot'+'alWeight);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20unwei'+'ghted\x20vers'+'ion\x20of\x20pre'+'filterSamp'+'les\x0a\x20\x20\x20\x20fn'+'\x20prefilter'+'SamplesUnw'+'eighted(uv'+':\x20vec2f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20construct'+'\x20vector\x20sp'+'ace\x20given\x20'+'target\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20v'+'ecSpace\x20=\x20'+'matrixFrom'+'VectorSlow'+'({TARGET_F'+'UNC}(uv));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20L:\x20vec'+'3f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20mipL'+'evel:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20result'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(va'+'r\x20i\x20=\x200;\x20i'+'\x20<\x20{NUM_SA'+'MPLES};\x20i\x20'+'+=\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'unpackSamp'+'le(i,\x20&L,\x20'+'&mipLevel)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}DirLod(ve'+'cSpace\x20*\x20L'+',\x20mipLevel'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'{ENCODE_FU'+'NC}(result'+'\x20/\x20f32({NU'+'M_SAMPLES}'+'));\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20{P'+'ROCESS_FUN'+'C}(input.v'+'Uv0);\x0a\x20\x20\x20\x20'+'return\x20out'+'put;\x0a}\x0a'),EI='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0aunifo'+'rm\x20uvMod:\x20'+'vec4f;\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0a\x0a@'+'vertex\x0afn\x20'+'vertexMain'+'(input:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20var\x20outpu'+'t:\x20VertexO'+'utput;\x0a\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(input.v'+'ertex_posi'+'tion,\x200.5,'+'\x201.0);\x0a\x20\x20o'+'utput.vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(input.ver'+'tex_positi'+'on\x20*\x200.5\x20+'+'\x20vec2f(0.5'+',\x200.5))\x20*\x20'+'uniform.uv'+'Mod.xy\x20+\x20u'+'niform.uvM'+'od.zw);\x0a\x20\x20'+'return\x20out'+'put;\x0a}\x0a',AI='\x0a\x0avar\x20uSce'+'neDepthMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20uSceneD'+'epthMapSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifn'+'def\x20SCREEN'+'SIZE\x0a\x20\x20\x20\x20#'+'define\x20SCR'+'EENSIZE\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fndef\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20#define\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20unifor'+'m\x20matrix_v'+'iew:\x20mat4x'+'4f;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20CAM'+'ERAPLANES\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20CAME'+'RAPLANES\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20camer'+'a_params:\x20'+'vec4f;\x20//\x20'+'x:\x201\x20/\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20\x20y:\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20z:\x20came'+'ra_near,\x20\x20'+'\x20\x20\x20\x20\x20\x20w:\x20i'+'s_ortho\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20fn\x20lin'+'earizeDept'+'h(z:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uniform.c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x20//\x20Pe'+'rspective\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20('+'uniform.ca'+'mera_param'+'s.z\x20*\x20unif'+'orm.camera'+'_params.y)'+'\x20/\x20(unifor'+'m.camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.z\x20-'+'\x20uniform.c'+'amera_para'+'ms.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20unifor'+'m.camera_p'+'arams.z\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'+'\x0afn\x20deline'+'arizeDepth'+'(linearDep'+'th:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.camera'+'_params.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(unif'+'orm.camera'+('_params.y\x20'+'*\x20(uniform'+'.camera_pa'+'rams.z\x20-\x20l'+'inearDepth'+'))\x20/\x20(line'+'arDepth\x20*\x20'+'(uniform.c'+'amera_para'+'ms.z\x20-\x20uni'+'form.camer'+'a_params.y'+'));\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20(linearD'+'epth\x20-\x20uni'+'form.camer'+'a_params.z'+')\x20/\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20}\x0a}\x0a\x0a//\x20R'+'etrieves\x20r'+'endered\x20li'+'near\x20camer'+'a\x20depth\x20by'+'\x20UV\x0afn\x20get'+'LinearScre'+'enDepth(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_LINEAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SCEN'+'E_DEPTHMAP'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'uSceneDept'+'hMap,\x20uSce'+'neDepthMap'+'Sampler,\x20u'+'v).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20tex'+'tureSize\x20='+'\x20textureDi'+'mensions(u'+'SceneDepth'+'Map,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20texel'+':\x20vec2i\x20=\x20'+'vec2i(uv\x20*'+'\x20vec2f(tex'+'tureSize))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta:\x20vec4f\x20'+'=\x20textureL'+'oad(uScene'+'DepthMap,\x20'+'texel,\x200);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta_u32:\x20ve'+'c4u\x20=\x20vec4'+'u(data\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20intBits'+':\x20u32\x20=\x20(d'+'ata_u32.r\x20'+'<<\x2024u)\x20|\x20'+'(data_u32.'+'g\x20<<\x2016u)\x20'+'|\x20(data_u3'+'2.b\x20<<\x208u)'+'\x20|\x20data_u3'+'2.a;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20bitca'+'st<f32>(in'+'tBits);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pth(textur'+'eSample(uS'+'ceneDepthM')+('ap,\x20uScene'+'DepthMapSa'+'mpler,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20fn\x20get'+'LinearScre'+'enDepthFra'+'g()\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20pcP'+'osition.xy'+'\x20*\x20uniform'+'.uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afn\x20get'+'LinearDept'+'h(pos:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20-(unif'+'orm.matrix'+'_view\x20*\x20ve'+'c4f(pos,\x201'+'.0)).z;\x0a}\x0a'),bI='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x0afn'+'\x20getShadow'+'CascadeInd'+'ex(shadowC'+'ascadeDist'+'ances:\x20vec'+'4f,\x20shadow'+'CascadeCou'+'nt:\x20i32)\x20-'+'>\x20i32\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20dept'+'h\x20in\x200\x20..\x20'+'far\x20plane\x20'+'range\x0a\x20\x20\x20\x20'+'let\x20depth:'+'\x20f32\x20=\x201.0'+'\x20/\x20pcPosit'+'ion.w;\x0a\x0a\x20\x20'+'\x20\x20//\x201.0\x20i'+'f\x20depth\x20>='+'\x20distance,'+'\x200.0\x20other'+'wise\x0a\x20\x20\x20\x20l'+'et\x20compari'+'sons:\x20vec4'+'f\x20=\x20step(s'+'hadowCasca'+'deDistance'+'s,\x20vec4f(d'+'epth));\x0a\x0a\x20'+'\x20\x20\x20//\x20sum\x20'+'is\x20the\x20ind'+'ex\x0a\x20\x20\x20\x20let'+'\x20cascadeIn'+'dex:\x20i32\x20='+'\x20i32(dot(c'+'omparisons'+',\x20vec4f(1.'+'0)));\x0a\x0a\x20\x20\x20'+'\x20//\x20limit\x20'+'to\x20actual\x20'+'number\x20of\x20'+'used\x20casca'+'des\x0a\x20\x20\x20\x20re'+'turn\x20min(c'+'ascadeInde'+'x,\x20shadowC'+'ascadeCoun'+'t\x20-\x201);\x0a}\x0a'+'\x0a//\x20functi'+'on\x20which\x20m'+'odifies\x20ca'+'scade\x20inde'+'x\x20to\x20dithe'+'r\x20between\x20'+'cascades\x0af'+'n\x20ditherSh'+'adowCascad'+'eIndex(cas'+'cadeIndex_'+'in:\x20i32,\x20s'+'hadowCasca'+'deDistance'+'s:\x20vec4f,\x20'+'shadowCasc'+'adeCount:\x20'+'i32,\x20blend'+'Factor:\x20f3'+'2)\x20->\x20i32\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Use\x20var\x20as'+'\x20cascadeIn'+'dex\x20might\x20'+'be\x20modifie'+'d\x0a\x20\x20\x20\x20var\x20'+'cascadeInd'+'ex:\x20i32\x20=\x20'+'cascadeInd'+'ex_in;\x0a\x20\x20\x20'+'\x20if\x20(casca'+'deIndex\x20<\x20'+'shadowCasc'+'adeCount\x20-'+'\x201)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20cu'+'rrentRange'+'End:\x20f32\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+('\x20transitio'+'nStart:\x20f3'+'2\x20=\x20blendF'+'actor\x20*\x20cu'+'rrentRange'+'End;\x20//\x20St'+'art\x20overla'+'p\x20factor\x20a'+'way\x20from\x20t'+'he\x20end\x20dis'+'tance\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(depth\x20'+'>\x20transiti'+'onStart)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20a\x20tr'+'ansition\x20f'+'actor\x20(0.0'+'\x20to\x201.0)\x20w'+'ithin\x20the\x20'+'overlap\x20ra'+'nge\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'transition'+'Factor:\x20f3'+'2\x20=\x20smooth'+'step(trans'+'itionStart'+',\x20currentR'+'angeEnd,\x20d'+'epth);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Add\x20pse'+'udo-random'+'\x20dithering'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20TODO'+':\x20replace\x20'+'by\x20user\x20se'+'lectable\x20d'+'ithering\x20m'+'ethod\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20dither:\x20'+'f32\x20=\x20frac'+'t(sin(dot('+'pcPosition'+'.xy,\x20vec2f'+'(12.9898,\x20'+'78.233)))\x20'+'*\x2043758.54'+'53);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dither\x20<\x20'+'transition'+'Factor)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20casc'+'adeIndex\x20='+'\x20cascadeIn'+'dex\x20+\x201;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20cascadeIn'+'dex;\x0a}\x0a\x0afn'+'\x20fadeShado'+'w(shadowCo'+'ord_in:\x20ve'+'c3f,\x20shado'+'wCascadeDi'+'stances:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20//\x20if\x20the'+'\x20pixel\x20is\x20'+'past\x20the\x20s'+'hadow\x20dist'+'ance,\x20remo'+'ve\x20shadow\x0a'+'\x20\x20\x20\x20//\x20thi'+'s\x20enforces'+'\x20straight\x20'+'line\x20inste'+'ad\x20of\x20corn'+'er\x20of\x20shad'+'ow\x20which\x20m'+'oves\x20when\x20'+'camera\x20rot'+'ates\x0a\x20\x20\x20\x20v'+'ar\x20shadowC'+'oord:\x20vec3'+'f\x20=\x20shadow')+('Coord_in;\x0a'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x20\x20\x20\x20if\x20(d'+'epth\x20>\x20sha'+'dowCascade'+'Distances.'+'w)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20shadowC'+'oord.z\x20=\x20-'+'9999999.0;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'hadowCoord'+';\x0a}\x0a'),CI='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afn\x20linste'+'p(a:\x20f32,\x20'+'b:\x20f32,\x20v:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20/'+'/\x20WGSL\x20sat'+'urate\x20->\x20c'+'lamp\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p((v\x20-\x20a)\x20'+'/\x20(b\x20-\x20a),'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0afn\x20re'+'duceLightB'+'leeding(pM'+'ax:\x20f32,\x20a'+'mount:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'fn\x20chebysh'+'evUpperBou'+'nd(moments'+':\x20vec2f,\x20m'+'ean:\x20f32,\x20'+'minVarianc'+'e:\x20f32,\x20li'+'ghtBleedin'+'gReduction'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'//\x20Compute'+'\x20variance\x0a'+'\x20\x20\x20\x20var\x20va'+'riance:\x20f3'+'2\x20=\x20moment'+'s.y\x20-\x20(mom'+'ents.x\x20*\x20m'+'oments.x);'+'\x0a\x20\x20\x20\x20varia'+'nce\x20=\x20max('+'variance,\x20'+'minVarianc'+'e);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Compute\x20'+'probabilis'+'tic\x20upper\x20'+'bound\x0a\x20\x20\x20\x20'+'let\x20d:\x20f32'+'\x20=\x20mean\x20-\x20'+'moments.x;'+'\x0a\x20\x20\x20\x20var\x20p'+'Max:\x20f32\x20='+'\x20variance\x20'+'/\x20(varianc'+'e\x20+\x20(d\x20*\x20d'+'));\x0a\x0a\x20\x20\x20\x20p'+'Max\x20=\x20redu'+'ceLightBle'+'eding(pMax'+',\x20lightBle'+'edingReduc'+'tion);\x0a\x0a\x20\x20'+'\x20\x20//\x20One-t'+'ailed\x20Cheb'+'yshev\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(pMax,\x20'+'1.0,\x20mean\x20'+'<=\x20moments'+'.x);\x0a}\x0a\x0afn'+'\x20calculate'+'EVSM(momen'+'ts_in:\x20vec'+'3f,\x20Z_in:\x20'+'f32,\x20vsmBi'+'as:\x20f32,\x20e'+'xponent:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20Z:\x20f32\x20=\x20'+'2.0\x20*\x20Z_in'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20let\x20warp'+'edDepth:\x20f'+'32\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20l'+('et\x20moments'+':\x20vec2f\x20=\x20'+'moments_in'+'.xy\x20+\x20vec2'+'f(warpedDe'+'pth,\x20warpe'+'dDepth*war'+'pedDepth)\x20'+'*\x20(1.0\x20-\x20m'+'oments_in.'+'z);\x0a\x0a\x20\x20\x20\x20l'+'et\x20VSMBias'+':\x20f32\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20let\x20d'+'epthScale:'+'\x20f32\x20=\x20VSM'+'Bias\x20*\x20exp'+'onent\x20*\x20wa'+'rpedDepth;'+'\x0a\x20\x20\x20\x20let\x20m'+'inVariance'+'1:\x20f32\x20=\x20d'+'epthScale\x20'+'*\x20depthSca'+'le;\x0a\x20\x20\x20\x20re'+'turn\x20cheby'+'shevUpperB'+'ound(momen'+'ts,\x20warped'+'Depth,\x20min'+'Variance1,'+'\x200.1);\x0a}\x0a/'+'/\x20------\x20V'+'SM\x2016\x20----'+'--\x0a\x0afn\x20VSM'+'16(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords:\x20vec'+'2f,\x20resolu'+'tion:\x20f32,'+'\x20Z:\x20f32,\x20v'+'smBias:\x20f3'+'2,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20let\x20momen'+'ts:\x20vec3f\x20'+'=\x20textureS'+'ampleLevel'+'(tex,\x20texS'+'ampler,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'n\x20getShado'+'wVSM16(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20VS'+'M16(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord.xy,\x20s'+'hadowParam'+'s.x,\x20shado'+'wCoord.z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotVSM1'+'6(shadowMa'+'p:\x20texture'+'_2d<f32>,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler,\x20sha'+'dowCoord:\x20'+'vec3f,\x20sha')+('dowParams:'+'\x20vec4f,\x20ex'+'ponent:\x20f3'+'2,\x20lightDi'+'r:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20Z:\x20'+'f32\x20=\x20leng'+'th(lightDi'+'r)\x20*\x20shado'+'wParams.w\x20'+'+\x20shadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20return\x20V'+'SM16(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20Z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----'+'--\x0a\x0afn\x20VSM'+'32(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords_in:\x20'+'vec2f,\x20res'+'olution:\x20f'+'32,\x20Z:\x20f32'+',\x20vsmBias:'+'\x20f32,\x20expo'+'nent:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20CAPS_TEX'+'TURE_FLOAT'+'_FILTERABL'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20moment'+'s:\x20vec3f\x20='+'\x20textureSa'+'mpleLevel('+'tex,\x20texSa'+'mpler,\x20tex'+'Coords_in,'+'\x200.0).xyz;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20manual\x20b'+'ilinear\x20fi'+'ltering\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'pixelSize\x20'+':\x20f32\x20=\x201.'+'0\x20/\x20resolu'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20te'+'xCoords:\x20v'+'ec2f\x20=\x20tex'+'Coords_in\x20'+'-\x20vec2f(pi'+'xelSize);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20s00:\x20vec'+'3f\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20texCoords'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20s10:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20texCoor'+'ds\x20+\x20vec2f'+'(pixelSize'+',\x200.0),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'s01:\x20vec3f'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'exCoords\x20+'+'\x20vec2f(0.0'+',\x20pixelSiz'+'e),\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s11:')+('\x20vec3f\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20texCo'+'ords\x20+\x20vec'+'2f(pixelSi'+'ze),\x200.0).'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fr:'+'\x20vec2f\x20=\x20f'+'ract(texCo'+'ords\x20*\x20res'+'olution);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20h0:\x20vec3'+'f\x20=\x20mix(s0'+'0,\x20s10,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20h1:'+'\x20vec3f\x20=\x20m'+'ix(s01,\x20s1'+'1,\x20fr.x);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20moments:'+'\x20vec3f\x20=\x20m'+'ix(h0,\x20h1,'+'\x20fr.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20calculate'+'EVSM(momen'+'ts,\x20Z,\x20vsm'+'Bias,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owVSM32(sh'+'adowMap:\x20t'+'exture_2d<'+'f32>,\x20shad'+'owMapSampl'+'er:\x20sample'+'r,\x20shadowC'+'oord:\x20vec3'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20expone'+'nt:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20V'+'SM32(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afn\x20getSha'+'dowSpotVSM'+'32(shadowM'+'ap:\x20textur'+'e_2d<f32>,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20e'+'xponent:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20Z:'+'\x20f32\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20Z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a'),PI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afn\x20getS'+'hadowPCF1x'+'1(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowCoo'+'rd.z);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotPCF1'+'x1(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20shad'+'owCoord.xy'+',\x20shadowCo'+'ord.z);\x0a}\x0a'+'\x0a//\x20-----\x20'+'Omni\x20Sampl'+'ing\x20-----\x0a'+'\x0a//\x20Not\x20su'+'pported\x20on'+'\x20WebGPU\x20de'+'vice\x0a//\x20fn'+'\x20getShadow'+'OmniPCF1x1'+'(shadowMap'+':\x20texture_'+'depth_cube'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f,'+'\x20lightDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a//\x20'+'\x20\x20\x20\x20let\x20sh'+'adowZ:\x20f32'+'\x20=\x20length('+'lightDir)\x20'+'*\x20shadowPa'+'rams.w\x20+\x20s'+'hadowParam'+'s.z;\x0a//\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20lightD'+'ir,\x20shadow'+'Z);\x0a//\x20}\x0a',MI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0afn\x20_getS'+'hadowPCF3x'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20sum:\x20f3'+'2\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20let\x20uw'+'0:\x20f32\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20s);\x0a\x20\x20\x20\x20'+'let\x20uw1:\x20f'+'32\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20s)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20u0_offset'+':\x20f32\x20=\x20(2'+'.0\x20-\x20s)\x20/\x20'+'uw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20let\x20u'+'1_offset:\x20'+'f32\x20=\x20s\x20/\x20'+'uw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'vw0:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t);\x0a\x20\x20'+'\x20\x20let\x20vw1:'+'\x20f32\x20=\x20(1.'+'0\x20+\x202.0\x20*\x20'+'t);\x0a\x0a\x20\x20\x20\x20l'+'et\x20v0_offs'+'et:\x20f32\x20=\x20'+'(2.0\x20-\x20t)\x20'+'/\x20vw0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20let'+'\x20v1_offset'+':\x20f32\x20=\x20t\x20'+'/\x20vw1\x20+\x201.'+'0;\x0a\x0a\x20\x20\x20\x20le'+'t\x20u0:\x20f32\x20'+'=\x20u0_offse'+'t\x20*\x20shadow'+'MapSizeInv'+'\x20+\x20base_uv'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20v0:\x20f32\x20'+'=\x20v0_offse'+'t\x20*\x20shadow'+('MapSizeInv'+'\x20+\x20base_uv'+'.y;\x0a\x0a\x20\x20\x20\x20l'+'et\x20u1:\x20f32'+'\x20=\x20u1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20l'+'et\x20v1:\x20f32'+'\x20=\x20v1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'sum\x20=\x20sum\x20'+'+\x20uw0\x20*\x20vw'+'0\x20*\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20v'+'ec2f(u0,\x20v'+'0),\x20z);\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw1\x20*\x20'+'vw0\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u1,'+'\x20v0),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw0\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'0,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'1\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u1,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20*'+'\x20(1.0\x20/\x2016'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20sum;'+'\x0a}\x0a\x0afn\x20get'+'ShadowPCF3'+'x3(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wPCF3x3(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0afn\x20getSh'+'adowSpotPC'+'F3x3(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3(')+('shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams.xyz);'+'\x0a}\x0a\x0a//\x20---'+'--\x20Omni\x20Sa'+'mpling\x20---'+'--\x0a\x0a//\x20Not'+'\x20currently'+'\x20supported'+'\x20on\x20WebGPU'+'\x20device\x0a//'+'\x20fn\x20getSha'+'dowOmniPCF'+'3x3(shadow'+'Map:\x20textu'+'re_depth_c'+'ube,\x20shado'+'wMapSample'+'r:\x20sampler'+'_compariso'+'n,\x20shadowP'+'arams:\x20vec'+'4f,\x20dir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a//\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a//\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(dir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x0a//'+'\x20\x20\x20\x20\x20//\x20of'+'fset\x0a//\x20\x20\x20'+'\x20\x20let\x20texS'+'ize_i\x20=\x20te'+'xtureDimen'+'sions(shad'+'owMap,\x200);'+'\x0a//\x20\x20\x20\x20\x20le'+'t\x20z:\x20f32\x20='+'\x201.0\x20/\x20f32'+'(texSize_i'+'.x);\x0a//\x20\x20\x20'+'\x20\x20let\x20tc:\x20'+'vec3f\x20=\x20no'+'rmalize(di'+'r);\x0a\x0a//\x20\x20\x20'+'\x20\x20//\x20avera'+'ge\x204\x20sampl'+'es\x20-\x20not\x20a'+'\x20strict\x203x'+'3\x20PCF\x20but\x20'+'that\x27s\x20tri'+'cky\x20with\x20c'+'ubemaps\x0a//'+'\x20\x20\x20\x20\x20var\x20s'+'hadows:\x20ve'+'c4f;\x0a//\x20\x20\x20'+'\x20\x20shadows.'+'x\x20=\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20t'+'c\x20+\x20vec3f('+'\x20z,\x20\x20z,\x20\x20z'+'),\x20shadowZ'+');\x0a//\x20\x20\x20\x20\x20'+'shadows.y\x20'+'=\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20tc\x20'+'+\x20vec3f(-z'+',\x20-z,\x20\x20z),'+'\x20shadowZ);'+'\x0a//\x20\x20\x20\x20\x20sh'+'adows.z\x20=\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20tc\x20+\x20'+'vec3f(-z,\x20'+'\x20z,\x20-z),\x20s'+'hadowZ);\x0a/')+('/\x20\x20\x20\x20\x20shad'+'ows.w\x20=\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20tc\x20+\x20ve'+'c3f(\x20z,\x20-z'+',\x20-z),\x20sha'+'dowZ);\x0a\x0a//'+'\x20\x20\x20\x20\x20retur'+'n\x20dot(shad'+'ows,\x20vec4f'+'(0.25));\x0a/'+'/\x20}\x0a\x0a//\x20fn'+'\x20getShadow'+'OmniPCF3x3'+'_Wrapper(s'+'hadowMap:\x20'+'texture_de'+'pth_cube,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a//\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCF3x3(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowParams'+',\x20lightDir'+');\x0a//\x20}\x0a'),II='\x0a//\x20http:/'+'/the-witne'+'ss.net/new'+'s/2013/09/'+'shadow-map'+'ping-summa'+'ry-part-1/'+'\x0afn\x20_getSh'+'adowPCF5x5'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20l'+'et\x20uw0:\x20f3'+'2\x20=\x20(4.0\x20-'+'\x203.0\x20*\x20s);'+'\x0a\x20\x20\x20\x20let\x20u'+'w1:\x20f32\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20l'+'et\x20uw2:\x20f3'+'2\x20=\x20(1.0\x20+'+'\x203.0\x20*\x20s);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'u0_offset:'+'\x20f32\x20=\x20(3.'+'0\x20-\x202.0\x20*\x20'+'s)\x20/\x20uw0\x20-'+'\x202.0;\x0a\x20\x20\x20\x20'+'let\x20u1_off'+'set:\x20f32\x20='+'\x20(3.0\x20+\x20s)'+'\x20/\x20uw1;\x0a\x20\x20'+'\x20\x20let\x20u2_o'+'ffset:\x20f32'+'\x20=\x20s\x20/\x20uw2'+'\x20+\x202.0;\x0a\x0a\x20'+'\x20\x20\x20let\x20vw0'+':\x20f32\x20=\x20(4'+'.0\x20-\x203.0\x20*'+'\x20t);\x0a\x20\x20\x20\x20l'+'et\x20vw1:\x20f3'+'2\x20=\x207.0;\x0a\x20'+'\x20\x20\x20let\x20vw2'+':\x20f32\x20=\x20(1'+'.0\x20+\x203.0\x20*'+'\x20t);\x0a\x0a\x20\x20\x20\x20'+'let\x20v0_off'+'set:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t)\x20/\x20v'+'w0\x20-\x202.0;\x0a'+'\x20\x20\x20\x20let\x20v1'+'_offset:\x20f'+'32\x20=\x20(3.0\x20'+('+\x20t)\x20/\x20vw1'+';\x0a\x20\x20\x20\x20let\x20'+'v2_offset:'+'\x20f32\x20=\x20t\x20/'+'\x20vw2\x20+\x202.0'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20sum:\x20f32\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20let\x20u0:\x20'+'f32\x20=\x20u0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.x;\x0a\x20\x20'+'\x20\x20let\x20v0:\x20'+'f32\x20=\x20v0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20u1:'+'\x20f32\x20=\x20u1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.x;\x0a\x20'+'\x20\x20\x20let\x20v1:'+'\x20f32\x20=\x20v1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20let\x20u2'+':\x20f32\x20=\x20u2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.x;\x0a'+'\x20\x20\x20\x20let\x20v2'+':\x20f32\x20=\x20v2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20sum\x20='+'\x20sum\x20+\x20uw0'+'\x20*\x20vw0\x20*\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20vec2f('+'u0,\x20v0),\x20z'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20sum\x20+\x20u'+'w1\x20*\x20vw0\x20*'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20vec2'+'f(u1,\x20v0),'+'\x20z);\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw2\x20*\x20vw0'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u2,\x20v0'+'),\x20z);\x0a\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw0\x20*\x20'+'vw1\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u0,'+'\x20v1),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'1,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'2\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare')+('Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u2,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw0\x20*\x20vw2'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u0,\x20v2'+'),\x20z);\x0a\x20\x20\x20'+'\x20sum\x20=\x20sum'+'\x20+\x20uw1\x20*\x20v'+'w2\x20*\x20textu'+'reSampleCo'+'mpareLevel'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'vec2f(u1,\x20'+'v2),\x20z);\x0a\x20'+'\x20\x20\x20sum\x20=\x20s'+'um\x20+\x20uw2\x20*'+'\x20vw2\x20*\x20tex'+'tureSample'+'CompareLev'+'el(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20vec2f(u2'+',\x20v2),\x20z);'+'\x0a\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20*\x20(1'+'.0\x20/\x20144.0'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20saturat'+'e(sum);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afn'+'\x20getShadow'+'PCF5x5(sha'+'dowMap:\x20te'+'xture_dept'+'h_2d,\x20shad'+'owMapSampl'+'er:\x20sample'+'r_comparis'+'on,\x20shadow'+'Coord:\x20vec'+'3f,\x20shadow'+'Params:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20_getS'+'hadowPCF5x'+'5(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params.xyz'+');\x0a}\x0a\x0afn\x20g'+'etShadowSp'+'otPCF5x5(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owCoord:\x20v'+'ec3f,\x20shad'+'owParams:\x20'+'vec4f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20_ge'+'tShadowPCF'+'5x5(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a'),DI='\x0a\x0afn\x20fract'+'SinRand(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20PI:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20a:\x20f32\x20'+'=\x2012.9898;'+'\x20let\x20b:\x20f3'+'2\x20=\x2078.233'+';\x20let\x20c:\x20f'+'32\x20=\x2043758'+'.5453;\x0a\x20\x20\x20'+'\x20let\x20dt:\x20f'+'32\x20=\x20dot(u'+'v.xy,\x20vec2'+'f(a,\x20b));\x0a'+'\x20\x20\x20\x20let\x20sn'+':\x20f32\x20=\x20dt'+'\x20%\x20PI;\x0a\x20\x20\x20'+'\x20return\x20fr'+'act(sin(sn'+')\x20*\x20c);\x0a}\x0a'+'\x0a//\x20struct'+'\x20to\x20hold\x20p'+'recomputed'+'\x20constants'+'\x20and\x20curre'+'nt\x20state\x0as'+'truct\x20Voge'+'lDiskData\x20'+'{\x0a\x20\x20\x20\x20invN'+'umSamples:'+'\x20f32,\x0a\x20\x20\x20\x20'+'initialAng'+'le:\x20f32,\x0a\x20'+'\x20\x20\x20current'+'PointId:\x20f'+'32,\x0a}\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'fn\x20prepare'+'DiskConsta'+'nts(data:\x20'+'ptr<functi'+'on,\x20VogelD'+'iskData>,\x20'+'sampleCoun'+'t:\x20i32,\x20ra'+'ndomSeed:\x20'+'f32)\x20{\x0a\x20\x20\x20'+'\x20let\x20pi2:\x20'+'f32\x20=\x206.28'+'318530718;'+'\x0a\x20\x20\x20\x20data.'+'invNumSamp'+'les\x20=\x201.0\x20'+'/\x20f32(samp'+'leCount);\x0a'+'\x20\x20\x20\x20data.i'+'nitialAngl'+'e\x20=\x20random'+'Seed\x20*\x20pi2'+';\x0a\x20\x20\x20\x20data'+'.currentPo'+'intId\x20=\x200.'+'0;\x0a}\x0a\x0a\x0afn\x20'+'generateDi'+'skSample(d'+'ata:\x20ptr<f'+'unction,\x20V'+'ogelDiskDa'+'ta>)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20GOLDEN'+'_ANGLE:\x20f3'+'2\x20=\x202.3999'+'63;\x0a\x20\x20\x20\x20le'+'t\x20r:\x20f32\x20='+'\x20sqrt((dat'+'a.currentP'+'ointId\x20+\x200'+'.5)\x20*\x20data'+'.invNumSam'+'ples);\x0a\x20\x20\x20'+'\x20let\x20theta'+':\x20f32\x20=\x20da'+'ta.current'+'PointId\x20*\x20'+'GOLDEN_ANG'+'LE\x20+\x20data.'+'initialAng'+('le;\x0a\x0a\x20\x20\x20\x20l'+'et\x20offset:'+'\x20vec2f\x20=\x20v'+'ec2f(cos(t'+'heta),\x20sin'+'(theta))\x20*'+'\x20pow(r,\x201.'+'33);\x0a\x0a\x20\x20\x20\x20'+'data.curre'+'ntPointId\x20'+'=\x20data.cur'+'rentPointI'+'d\x20+\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'offset;\x0a}\x0a'+'\x0afn\x20PCSSFi'+'ndBlocker('+'shadowMap:'+'\x20texture_2'+'d<f32>,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler,\x20avgBl'+'ockerDepth'+':\x20ptr<func'+'tion,\x20f32>'+',\x20numBlock'+'ers:\x20ptr<f'+'unction,\x20i'+'32>,\x0a\x20\x20\x20\x20s'+'hadowCoord'+'s:\x20vec2f,\x20'+'z:\x20f32,\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32,\x20penum'+'braSize:\x20f'+'32,\x20invSha'+'dowMapSize'+':\x20f32,\x20ran'+'domSeed:\x20f'+'32)\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20diskD'+'ata:\x20Vogel'+'DiskData;\x0a'+'\x20\x20\x20\x20prepar'+'eDiskConst'+'ants(&disk'+'Data,\x20shad'+'owBlockerS'+'amples,\x20ra'+'ndomSeed);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'searchWidt'+'h:\x20f32\x20=\x20p'+'enumbraSiz'+'e\x20*\x20invSha'+'dowMapSize'+';\x0a\x20\x20\x20\x20var\x20'+'blockerSum'+':\x20f32\x20=\x200.'+'0;\x0a\x20\x20\x20\x20var'+'\x20numBlocke'+'rs_local:\x20'+'i32\x20=\x200;\x0a\x0a'+'\x20\x20\x20\x20for(\x20v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20s'+'hadowBlock'+'erSamples;'+'\x20i\x20=\x20i\x20+\x201'+'\x20)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20dis'+'kUV:\x20vec2f'+'\x20=\x20generat'+'eDiskSampl'+'e(&diskDat'+'a);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20samp'+'leUV:\x20vec2'+'f\x20=\x20shadow'+'Coords\x20+\x20d'+'iskUV\x20*\x20se'+'archWidth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadowM'+'apDepth:\x20f'+'32\x20=\x20textu'+'reSampleLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20sampleU'+'V,\x200.0).r;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(\x20shadow'+'MapDepth\x20<'+'\x20z\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20b'+'lockerSum\x20')+('=\x20blockerS'+'um\x20+\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers_local'+'\x20=\x20numBloc'+'kers_local'+'\x20+\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20*avg'+'BlockerDep'+'th\x20=\x20block'+'erSum\x20/\x20f3'+'2(numBlock'+'ers_local)'+';\x0a\x20\x20\x20\x20*num'+'Blockers\x20='+'\x20numBlocke'+'rs_local;\x0a'+'}\x0a\x0afn\x20PCSS'+'Filter(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20uv:\x20vec2'+'f,\x20receive'+'rDepth:\x20f3'+'2,\x20shadowS'+'amples:\x20i3'+'2,\x20filterR'+'adius:\x20f32'+',\x20randomSe'+'ed:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20var\x20dis'+'kData:\x20Vog'+'elDiskData'+';\x0a\x20\x20\x20\x20prep'+'areDiskCon'+'stants(&di'+'skData,\x20sh'+'adowSample'+'s,\x20randomS'+'eed);\x0a\x0a\x20\x20\x20'+'\x20var\x20sum:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20for\x20('+'var\x20i:\x20i32'+'\x20=\x200;\x20i\x20<\x20'+'shadowSamp'+'les;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'offsetUV:\x20'+'vec2f\x20=\x20ge'+'nerateDisk'+'Sample(&di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dept'+'h:\x20f32\x20=\x20t'+'extureSamp'+'leLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv\x20'+'+\x20offsetUV'+',\x200.0).r;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20su'+'m\x20=\x20sum\x20+\x20'+'step(recei'+'verDepth,\x20'+'depth);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20sum\x20/'+'\x20f32(shado'+'wSamples);'+'\x0a}\x0a\x0afn\x20get'+'Penumbra(d'+'blocker:\x20f'+'32,\x20drecei'+'ver:\x20f32,\x20'+'penumbraSi'+'ze:\x20f32,\x20p'+'enumbraFal'+'loff:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20di'+'st:\x20f32\x20=\x20'+'dreceiver\x20'+'-\x20dblocker'+';\x0a\x20\x20\x20\x20let\x20'+'penumbra:\x20'+'f32\x20=\x201.0\x20'+'-\x20pow(1.0\x20'+'-\x20dist,\x20pe')+('numbraFall'+'off);\x0a\x20\x20\x20\x20'+'return\x20pen'+'umbra\x20*\x20pe'+'numbraSize'+';\x0a}\x0a\x0afn\x20PC'+'SSDirectio'+'nal(shadow'+'Map:\x20textu'+'re_2d<f32>'+',\x20shadowMa'+'pSampler:\x20'+'sampler,\x20s'+'hadowCoord'+'s:\x20vec3f,\x20'+'cameraPara'+'ms:\x20vec4f,'+'\x20softShado'+'wParams:\x20v'+'ec4f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'let\x20receiv'+'erDepth:\x20f'+'32\x20=\x20shado'+'wCoords.z;'+'\x0a\x20\x20\x20\x20let\x20r'+'andomSeed:'+'\x20f32\x20=\x20fra'+'ctSinRand('+'pcPosition'+'.xy);\x0a\x20\x20\x20\x20'+'let\x20shadow'+'Samples:\x20i'+'32\x20=\x20i32(s'+'oftShadowP'+'arams.x);\x0a'+'\x20\x20\x20\x20let\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32\x20=\x20i32('+'softShadow'+'Params.y);'+'\x0a\x20\x20\x20\x20let\x20p'+'enumbraSiz'+'e:\x20f32\x20=\x20s'+'oftShadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20let\x20pen'+'umbraFallo'+'ff:\x20f32\x20=\x20'+'softShadow'+'Params.w;\x0a'+'\x0a\x20\x20\x20\x20let\x20s'+'hadowMapSi'+'ze:\x20i32\x20=\x20'+'i32(textur'+'eDimension'+'s(shadowMa'+'p,\x200).x);\x0a'+'\x20\x20\x20\x20var\x20in'+'vShadowMap'+'Size:\x20f32\x20'+'=\x201.0\x20/\x20f3'+'2(shadowMa'+'pSize);\x0a\x20\x20'+'\x20\x20invShado'+'wMapSize\x20='+'\x20invShadow'+'MapSize\x20*\x20'+'(f32(shado'+'wMapSize)\x20'+'/\x202048.0);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'penumbra:\x20'+'f32;\x0a\x0a\x20\x20\x20\x20'+'//\x20contact'+'\x20hardening'+'\x20path\x0a\x20\x20\x20\x20'+'if\x20(shadow'+'BlockerSam'+'ples\x20>\x200)\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20find\x20a'+'verage\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20avgBloc'+'kerDepth:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20numBloc'+'kers:\x20i32\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20&a'+'vgBlockerD'+'epth,\x20&num')+('Blockers,\x20'+'shadowCoor'+'ds.xy,\x20rec'+'eiverDepth'+',\x20shadowBl'+'ockerSampl'+'es,\x20penumb'+'raSize,\x20in'+'vShadowMap'+'Size,\x20rand'+'omSeed);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20when\x20no\x20b'+'lockers\x20ar'+'e\x20present\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(numBlock'+'ers\x20<\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20pen'+'umbra\x20size'+'\x20is\x20based\x20'+'on\x20the\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20p'+'enumbra\x20=\x20'+'getPenumbr'+'a(avgBlock'+'erDepth,\x20s'+'hadowCoord'+'s.z,\x20penum'+'braSize,\x20p'+'enumbraFal'+'loff);\x0a\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20constan'+'t\x20filter\x20s'+'ize,\x20no\x20co'+'ntact\x20hard'+'ening\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20penumb'+'ra\x20=\x20penum'+'braSize;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20filter'+'Radius:\x20f3'+'2\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ords.xy,\x20r'+'eceiverDep'+'th,\x20shadow'+'Samples,\x20f'+'ilterRadiu'+'s,\x20randomS'+'eed);\x0a}\x0a\x0af'+'n\x20getShado'+'wPCSS(shad'+'owMap:\x20tex'+'ture_2d<f3'+'2>,\x20shadow'+'MapSampler'+':\x20sampler,'+'\x20shadowCoo'+'rd:\x20vec3f,'+'\x20shadowPar'+'ams:\x20vec4f'+',\x20cameraPa'+'rams:\x20vec4'+'f,\x20softSha'+'dowParams:'+'\x20vec4f,\x20li'+'ghtDir:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x20//\x20lig'+'htDir\x20unus'+'ed?\x20Kept\x20p'+'aram.\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SDirection'+'al(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ord,\x20camer'+'aParams,\x20s'+'oftShadowP')+'arams);\x0a}\x0a',LI='\x0aattribute'+'\x20vertex_bo'+'neIndices:'+'\x20f32;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20g'+'etBoneMatr'+'ix(indexFl'+'oat:\x20f32)\x20'+'->\x20mat4x4f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20width\x20=\x20'+'i32(textur'+'eDimension'+'s(texture_'+'poseMap).x'+');\x0a\x20\x20\x20\x20let'+'\x20index:\x20i3'+'2\x20=\x20i32(in'+'dexFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x20\x20\x20\x20let\x20i'+'y:\x20i32\x20=\x20i'+'ndex\x20/\x20wid'+'th;\x0a\x20\x20\x20\x20le'+'t\x20ix:\x20i32\x20'+'=\x20index\x20%\x20'+'width;\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'elements\x20o'+'f\x204x3\x20matr'+'ix\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec4f'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(ix'+'\x20+\x200,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20v2:\x20vec'+'4f\x20=\x20textu'+'reLoad(tex'+'ture_poseM'+'ap,\x20vec2i('+'ix\x20+\x201,\x20iy'+'),\x200);\x0a\x20\x20\x20'+'\x20let\x20v3:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(ix\x20+\x202,\x20'+'iy),\x200);\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4x4f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.x,\x20v2.x,'+'\x20v3.x,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.y,\x20v2.y,\x20'+'v3.y,\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'z,\x20v2.z,\x20v'+'3.z,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.w'+',\x20v2.w,\x20v3'+'.w,\x201.0\x0a\x20\x20'+'\x20\x20);\x0a}\x0a',RI='\x0a\x0aattribut'+'e\x20vertex_b'+'oneWeights'+':\x20vec4f;\x0aa'+'ttribute\x20v'+'ertex_bone'+'Indices:\x20v'+'ec4f;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0astru'+'ct\x20BoneMat'+'rix\x20{\x0a\x20\x20\x20\x20'+'v1:\x20vec4f,'+'\x0a\x20\x20\x20\x20v2:\x20v'+'ec4f,\x0a\x20\x20\x20\x20'+'v3:\x20vec4f,'+'\x0a}\x0a\x0afn\x20get'+'BoneMatrix'+'(width:\x20i3'+'2,\x20index:\x20'+'i32)\x20->\x20Bo'+'neMatrix\x20{'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'v\x20=\x20index\x20'+'/\x20width;\x0a\x20'+'\x20\x20\x20let\x20u\x20='+'\x20index\x20%\x20w'+'idth;\x0a\x0a\x20\x20\x20'+'\x20var\x20resul'+'t:\x20BoneMat'+'rix;\x0a\x20\x20\x20\x20r'+'esult.v1\x20='+'\x20textureLo'+'ad(texture'+'_poseMap,\x20'+'vec2i(u\x20+\x20'+'0,\x20v),\x200);'+'\x0a\x20\x20\x20\x20resul'+'t.v2\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20result.v3'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(u\x20'+'+\x202,\x20v),\x200'+');\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0afn\x20ge'+'tSkinMatri'+'x(indicesF'+'loat:\x20vec4'+'f,\x20weights'+':\x20vec4f)\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20width\x20=\x20i'+'32(texture'+'Dimensions'+'(texture_p'+'oseMap).x)'+';\x0a\x20\x20\x20\x20var\x20'+'indices\x20=\x20'+'vec4i(indi'+'cesFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'boneA\x20=\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.x);'+'\x0a\x20\x20\x20\x20let\x20b'+'oneB\x20=\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y);\x0a'+'\x20\x20\x20\x20let\x20bo'+'neC\x20=\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.z);\x0a\x20'+'\x20\x20\x20let\x20bon'+'eD\x20=\x20getBo'+'neMatrix(w'+'idth,\x20indi'+'ces.w);\x0a\x0a\x20'+'\x20\x20\x20//\x20...\x20'+'rest\x20of\x20ge'+'tSkinMatri'+'x\x20remains\x20'+'the\x20same\x20.'+'..\x0a\x20\x20\x20\x20let'+'\x20v1\x20=\x20bone'+'A.v1\x20*\x20wei'+('ghts.x\x20+\x20b'+'oneB.v1\x20*\x20'+'weights.y\x20'+'+\x20boneC.v1'+'\x20*\x20weights'+'.z\x20+\x20boneD'+'.v1\x20*\x20weig'+'hts.w;\x0a\x20\x20\x20'+'\x20let\x20v2\x20=\x20'+'boneA.v2\x20*'+'\x20weights.x'+'\x20+\x20boneB.v'+'2\x20*\x20weight'+'s.y\x20+\x20bone'+'C.v2\x20*\x20wei'+'ghts.z\x20+\x20b'+'oneD.v2\x20*\x20'+'weights.w;'+'\x0a\x20\x20\x20\x20let\x20v'+'3\x20=\x20boneA.'+'v3\x20*\x20weigh'+'ts.x\x20+\x20bon'+'eB.v3\x20*\x20we'+'ights.y\x20+\x20'+'boneC.v3\x20*'+'\x20weights.z'+'\x20+\x20boneD.v'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'let\x20one\x20=\x20'+'dot(weight'+'s,\x20vec4f(1'+'.0,\x201.0,\x201'+'.0,\x201.0));'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'ranspose\x20t'+'o\x204x4\x20matr'+'ix\x0a\x20\x20\x20\x20ret'+'urn\x20mat4x4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20v1.x,\x20v2.'+'x,\x20v3.x,\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'v1.y,\x20v2.y'+',\x20v3.y,\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.z,\x20v2.z,'+'\x20v3.z,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.w,\x20v2.w,\x20'+'v3.w,\x20one\x0a'+'\x20\x20\x20\x20);\x0a}\x0a'),OI='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vLinear'+'Depth:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'floatAsUin'+'tPS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20Varyin'+'g\x20and\x20unif'+'orm\x20declar'+'ations\x0a\x20\x20\x20'+'\x20varying\x20v'+'ViewDir\x20:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20uniform\x20s'+'kyboxHighl'+'ightMultip'+'lier\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20SKY_CU'+'BEMAP\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cub'+'eMap\x20:\x20tex'+'ture_cube<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_cube'+'Map_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vWo'+'rldPos\x20:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20p'+'rojectedSk'+'ydomeCente'+'r\x20:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'env-atlas\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'phericalPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'envAtlasPS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_envAtlas_'+'sampler\x20:\x20'+'sampler;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20mipL'+'evel\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20@'+'fragment\x0a\x20'+'\x20\x20\x20fn\x20frag'+'mentMain(i'+'nput\x20:\x20Fra'+'gmentInput'+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20PREPA'+('SS_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20output'+'\x20linear\x20de'+'pth\x20during'+'\x20prepass\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20floa'+'t2vec4(vLi'+'nearDepth)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20linear'+'\x20:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20dir\x20'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KY_CUBEMAP'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+'\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+'nvDir\x20:\x20ve'+'c3f\x20=\x20norm'+'alize(inpu'+'t.vWorldPo'+'s\x20-\x20unifor'+'m.projecte'+'dSkydomeCe'+'nter);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'\x20=\x20envDir\x20'+'*\x20uniform.'+'cubeMapRot'+'ationMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir\x20='+'\x20input.vVi'+'ewDir;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'.x\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'tureSample'+'(texture_c'+'ubeMap,\x20te'+'xture_cube'+'Map_sample'+'r,\x20dir));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20env-atla'+'s\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ir\x20=\x20input'+'.vViewDir\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv\x20:\x20'+'vec2f\x20=\x20to'+'SphericalU'+'v(normaliz'+'e(dir));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20linea'+'r\x20=\x20{SKYBO'+'X_DECODE_F'+'NC}(textur'+'eSample(te'+'xture_envA'+'tlas,\x20text'+'ure_envAtl'+'as_sampler'+',\x20mapRough'+'nessUv(uv,')+('\x20uniform.m'+'ipLevel)))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ou'+'r\x20HDR\x20enco'+'des\x20values'+'\x20up\x20to\x2064,'+'\x20so\x20allow\x20'+'extra\x20brig'+'htness\x20for'+'\x20the\x20clipp'+'ed\x20values\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(any('+'linear\x20>=\x20'+'vec3f(64.0'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20uniform.'+'skyboxHigh'+'lightMulti'+'plier;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(gam'+'maCorrectO'+'utput(tone'+'Map(proces'+'sEnvironme'+'nt(linear)'+')),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),FI='\x0a\x20\x20\x20\x20//\x20At'+'tribute\x0a\x20\x20'+'\x20\x20attribut'+'e\x20aPositio'+'n\x20:\x20vec4f;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20matrix'+'_view\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20uniform\x20m'+'atrix_proj'+'ectionSkyb'+'ox\x20:\x20mat4x'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vViewDir'+'\x20:\x20vec3f;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PREPASS_'+'PASS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20when'+'\x20skydome\x20r'+'enders\x20dep'+'th\x20during\x20'+'prepass,\x20g'+'enerate\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vLi'+'nearDepth:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vWorldP'+'os\x20:\x20vec3f'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input\x20'+':\x20VertexIn'+'put)\x20->\x20Ve'+'rtexOutput'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut\x20:\x20Verte'+'xOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20view\x20:\x20ma'+'t4x4f\x20=\x20un'+'iform.matr'+'ix_view;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'worldPos\x20:'+'\x20vec4f\x20=\x20u'+'niform.mat'+'rix_model\x20'+'*\x20input.aP'+'osition;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vW'+'orldPos\x20=\x20'+'worldPos.x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'inear\x20dept'+'h\x20from\x20the'+'\x20worldPosi'+'tion,\x20see\x20'+'getLinearD'+'epth\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vL'+'inearDepth'+'\x20=\x20-(unifo'+('rm.matrix_'+'view\x20*\x20vec'+'4f(worldPo'+'s.xyz,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[0]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[1]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[2]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20uniform.m'+'atrix_proj'+'ectionSkyb'+'ox\x20*\x20(view'+'\x20*\x20input.a'+'Position);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'vViewDir\x20='+'\x20input.aPo'+'sition.xyz'+'\x20*\x20uniform'+'.cubeMapRo'+'tationMatr'+'ix;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20for\x20'+'infinite\x20s'+'kybox,\x20use'+'\x20negative\x20'+'gl_Positio'+'n.w\x20to\x20get'+'\x20positive\x20'+'linear\x20dep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-pcPositi'+'on.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Force\x20sk'+'ybox\x20to\x20fa'+'r\x20Z,\x20regar'+'dless\x20of\x20t'+'he\x20clip\x20pl'+'anes\x20on\x20th'+'e\x20camera\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Subtract\x20a'+'\x20tiny\x20fudg'+'e\x20factor\x20t'+'o\x20ensure\x20f'+'loating\x20po'+'int\x20errors'+'\x20don\x27t\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20st'+'ill\x20push\x20p'+'ixels\x20beyo'+'nd\x20far\x20Z.\x20'+'See:\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20http'+'s://commun'+'ity.khrono'+'s.org/t/sk'+'ybox-probl'+'em/61857\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.posit'+'ion.z\x20=\x20ou'+'tput.posit'+'ion.w\x20-\x201.'+'0e-7;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),NI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_specular'+':\x20vec3f;\x0a#'+'endif\x0a\x0afn\x20'+'getSpecula'+'rity()\x20{\x0a\x20'+'\x20\x20\x20var\x20spe'+'cularColor'+'\x20=\x20vec3f(1'+'.0,\x201.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'CONSTANT\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20unifo'+'rm.materia'+'l_specular'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_TE'+'XTURE\x0a\x20\x20\x20\x20'+'specularCo'+'lor\x20=\x20spec'+'ularColor\x20'+'*\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SPECU'+'LAR_TEXTUR'+'E_NAME},\x20{'+'STD_SPECUL'+'AR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_S'+'PECULAR_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SPECULA'+'R_VERTEX\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20satur'+'ate3(vVert'+'exColor.{S'+'TD_SPECULA'+'R_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dSpe'+'cularity\x20='+'\x20specularC'+'olor;\x0a}\x0a',kI='\x0a\x0afn\x20toSph'+'erical(dir'+':\x20vec3f)\x20-'+'>\x20vec2f\x20{\x0a'+'\x20\x20\x20\x20let\x20an'+'gle_xz\x20=\x20s'+'elect(0.0,'+'\x20atan2(dir'+'.x,\x20dir.z)'+',\x20any(dir.'+'xz\x20!=\x20vec2'+'f(0.0)));\x0a'+'\x20\x20\x20\x20return'+'\x20vec2f(ang'+'le_xz,\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0afn\x20toS'+'phericalUv'+'(dir\x20:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20c'+'onst\x20PI\x20:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20uv\x20:\x20ve'+'c2f\x20=\x20toSp'+'herical(di'+'r)\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x20vec'+'2f(0.5,\x200.'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y);\x0a'+'}\x0a',UI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'\x20\x20\x20\x20unifor'+'m\x20material'+'_speculari'+'tyFactor:\x20'+'f32;\x0a#endi'+'f\x0a\x0afn\x20getS'+'pecularity'+'Factor()\x20{'+'\x0a\x20\x20\x20\x20var\x20s'+'pecularity'+'Factor\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20speculari'+'tyFactor\x20='+'\x20speculari'+'tyFactor\x20*'+'\x20uniform.m'+'aterial_sp'+'ecularityF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'ARITYFACTO'+'R_TEXTURE\x0a'+'\x20\x20\x20\x20specul'+'arityFacto'+'r\x20=\x20specul'+'arityFacto'+'r\x20*\x20textur'+'eSampleBia'+'s({STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_NAME},\x20'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_VE'+'RTEX\x0a\x20\x20\x20\x20s'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_SPEC'+'ULARITYFAC'+'TOR_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dS'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor;\x0a}\x0a',BI='\x0afn\x20getSpo'+'tEffect(li'+'ghtSpotDir'+':\x20vec3f,\x20l'+'ightInnerC'+'oneAngle:\x20'+'f32,\x20light'+'OuterConeA'+'ngle:\x20f32,'+'\x20lightDirN'+'orm:\x20vec3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'osAngle:\x20f'+'32\x20=\x20dot(l'+'ightDirNor'+'m,\x20lightSp'+'otDir);\x0a\x20\x20'+'\x20\x20return\x20s'+'moothstep('+'lightOuter'+'ConeAngle,'+'\x20lightInne'+'rConeAngle'+',\x20cosAngle'+');\x0a}',zI='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2f(vUv0'+'.x,\x201.0\x20-\x20'+'vUv0.y);\x0a',VI='\x0a\x20\x20\x20\x20let\x20t'+'ileMask:\x20v'+'ec2f\x20=\x20ste'+'p(vMask,\x20v'+'ec2f(0.999'+'99));\x0a\x20\x20\x20\x20'+'let\x20tileSi'+'ze:\x20vec2f\x20'+'=\x200.5\x20*\x20(i'+'nnerOffset'+'.xy\x20+\x20inne'+'rOffset.zw'+');\x0a\x20\x20\x20\x20let'+'\x20tileScale'+':\x20vec2f\x20=\x20'+'vec2f(1.0)'+'\x20/\x20(vec2f('+'1.0)\x20-\x20til'+'eSize);\x0a\x20\x20'+'\x20\x20var\x20clam'+'pedUv:\x20vec'+'2f\x20=\x20mix(i'+'nnerOffset'+'.xy\x20*\x200.5,'+'\x20vec2f(1.0'+')\x20-\x20innerO'+'ffset.zw\x20*'+'\x200.5,\x20frac'+'t((vTiledU'+'v\x20-\x20tileSi'+'ze)\x20*\x20tile'+'Scale));\x0a\x20'+'\x20\x20\x20clamped'+'Uv\x20=\x20clamp'+'edUv\x20*\x20atl'+'asRect.zw\x20'+'+\x20atlasRec'+'t.xy;\x0a\x20\x20\x20\x20'+'var\x20nineSl'+'icedUv:\x20ve'+'c2f\x20=\x20vUv0'+'\x20*\x20tileMas'+'k\x20+\x20clampe'+'dUv\x20*\x20(vec'+'2f(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x0a',GI='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dAlpha'+':\x20f32\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20//'+'\x20all\x20passe'+'s\x20handle\x20o'+'pacity\x0a\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'!=\x20NONE\x20||'+'\x20defined(L'+'IT_ALPHA_T'+'EST)\x20||\x20de'+'fined(LIT_'+'ALPHA_TO_C'+'OVERAGE)\x20|'+'|\x20STD_OPAC'+'ITY_DITHER'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_OP'+'ACITY_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_opa'+'cityMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_opacityMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20globals'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dAlbedo:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'NormalW:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dSp'+'ecularity:'+'\x20vec3f\x20=\x20v'+'ec3f(0.0,\x20'+'0.0,\x200.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dGlossin'+'ess:\x20f32\x20='+'\x200.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_REFR'+'ACTION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dTransmi'+'ssion:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dTh'+'ickness:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'CENE_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SCREE'+'N_SIZE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20uSc'+'reenSize:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+('f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_TRANSFOR'+'MS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20ma'+'trix_viewP'+'rojection:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20matri'+'x_model:\x20m'+'at4x4f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20paral'+'lax\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_HEIGHT_'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'UvOffset:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'DIFFUSE_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_heightM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'heightMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20diffus'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'diffuseMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_diffus'+'eMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSEDETAI'+'L_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20norma'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_NORMAL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_normalMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20#ifdef'+'\x20STD_NORMA'+'LDETAIL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalDetai'+'lMap\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_no'+'rmalDetail'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_T'+'HICKNESS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'thicknessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_thic'+'knessMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_REFRACTIO'+'N_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_refract'+'ionMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'refraction'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20i'+'ridescence'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dIr'+'idescence:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20dIridesce'+'nceThickne'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'iridescenc'+'eThickness'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_iridescen'+'ceThicknes'+'sMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur')+('e_iridesce'+'nceMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_irides'+'cenceMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20ccSp'+'ecularity:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20ccGlossin'+'ess:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20ccNor'+'malW:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dAni'+'sotropy:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'Anisotropy'+'Rotation:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'arity\x20&\x20gl'+'ossiness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20she'+'en\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SHEE'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sSpecular'+'ity:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sGlossine'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'HEENGLOSS_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_s'+'heenGlossM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_sheenG'+'lossMapSam'+'pler\x20:\x20sam'+'pler;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_MET'+'ALNESS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dMet'+'alness:\x20f3'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dIor:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'metalnessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_metaln'+'essMapSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'rity\x20facto'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var<privat'+'e>\x20dSpecul'+'arityFacto'+'r:\x20f32;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rityFactor'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_specu'+'larityFact'+'orMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_SPECULAR'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_')+('specularMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20gloss\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_glossMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_glo'+'ssMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dAo:\x20f32;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_aoMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_AODETAIL_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoDet'+'ailMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_aoDeta'+'ilMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dEmission'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_EM'+'ISSIVE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_em'+'issiveMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_emissiv'+'eMapSample'+'r\x20:\x20sample')+('r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clearcoat\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatG'+'lossMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_clear'+'CoatGlossM'+'apSampler\x20'+':\x20sampler;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_clearC'+'oatNormalM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatN'+'ormalMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20anisotr'+'opy\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_A'+'NISOTROPY_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aniso'+'tropyMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_anis'+'otropyMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20lightm'+'ap\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(STD_LIG'+'HTMAP)\x20||\x20')+('defined(ST'+'D_LIGHT_VE'+'RTEX_COLOR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dLi'+'ghtmap:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_LI'+'GHT_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_l'+'ightMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_light'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20front'+'\x20end\x20outpu'+'ts\x20to\x20lit\x20'+'shader\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22litShader'+'CorePS\x22\x0a'),HI='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fn\x20'+'getSpecula'+'rity()\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dSpeculari'+'ty\x20=\x20vec3f'+'(1.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'gloss\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22gl'+'ossPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22aoPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20emissi'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22emissiveP'+'S\x22\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clear'+'coat\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20')+('LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22clea'+'rCoatPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'GlossPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'NormalPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ani'+'sotropy\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x20&&\x20defin'+'ed(LIT_LIG'+'HTING)\x20&&\x20'+'defined(LI'+'T_GGX_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22an'+'isotropyPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(ST'+'D_LIGHTMAP'+')\x20||\x20defin'+'ed(STD_LIG'+'HT_VERTEX_'+'COLOR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22l'+'ightmapPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20fn\x20evalu'+'ateFronten'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20al'+'l\x20passes\x20h'+'andle\x20opac'+'ity\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIT_'+'BLEND_TYPE'+'\x20!=\x20NONE\x20|'+'|\x20defined('+'LIT_ALPHA_'+'TEST)\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x20'+'||\x20STD_OPA'+'CITY_DITHE'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getOpaci'+'ty();\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_ALPHA'+'_TEST)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20alphaTe'+'st(dAlpha)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20opacityDi'+'ther(dAlph'+'a,\x200.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20d'+'Alpha;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20par')+('allax\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getP'+'arallax();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getA'+'lbedo();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_a'+'lbedo\x20=\x20dA'+'lbedo;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20normal\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getNorma'+'l();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_w'+'orldNormal'+'\x20=\x20dNormal'+'W;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'fraction\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etRefracti'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'transmissi'+'on\x20=\x20dTran'+'smission;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Thickness('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness\x20=\x20d'+'Thickness;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_D'+'ISPERSION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_di'+'spersion\x20='+'\x20uniform.m'+'aterial_di'+'spersion;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_IRIDESC'+'ENCE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getIrides'+'cence();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getIr'+'idescenceT'+'hickness()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x20=\x20'+'dIridescen'+'ce;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ir'+'idescence_'+'thickness\x20'+'=\x20dIridesc'+'enceThickn'+'ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specularit'+'y\x20&\x20glossi'+'ness\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20sheen\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSheen()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'sheen_spec'+'ularity\x20=\x20'+'sSpeculari'+'ty;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getShe'+'enGlossine'+'ss();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_sheen_'+'gloss\x20=\x20sG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getMetaln'+'ess();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_metal'+'ness\x20=\x20dMe'+'talness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etIor();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+'\x20=\x20dIor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'ity\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULARITY_'+'FACTOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'yFactor();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'Factor\x20=\x20d'+'Specularit'+'yFactor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20gloss\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'y();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20dSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs')+('_gloss\x20=\x20d'+'Glossiness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ao\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getAO();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_ao\x20=\x20'+'dAo;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getEmissi'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_emis'+'sion\x20=\x20dEm'+'ission;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getClea'+'rCoat();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getCl'+'earCoatGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'ClearCoatN'+'ormal();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_specula'+'rity\x20=\x20ccS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_glos'+'s\x20=\x20ccGlos'+'siness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal\x20=\x20ccNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20anisotro'+'py\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getAnisot'+'ropy();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20lightma'+'p\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightM'+'ap();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmap\x20='+'\x20dLightmap'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_')+('LIGHTMAP_D'+'IR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmapD'+'ir\x20=\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a'),WI='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20tbnB'+'asis:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getTBN(t'+'angent:\x20ve'+'c3f,\x20binor'+'mal:\x20vec3f'+',\x20normal:\x20'+'vec3f)\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20TBN_TANGE'+'NTS\x20//\x20tan'+'gents\x20/\x20bi'+'normals\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dTB'+'N\x20=\x20mat3x3'+'f(normaliz'+'e(tangent)'+',\x20normaliz'+'e(binormal'+'),\x20normali'+'ze(normal)'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20define'+'d(TBN_DERI'+'VATIVES)\x20/'+'/\x20derivati'+'ves\x20based\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2f\x20=\x20{'+'lightingUv'+'};\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20get\x20e'+'dge\x20vector'+'s\x20of\x20the\x20p'+'ixel\x20trian'+'gle\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dp1:'+'\x20vec3f\x20=\x20d'+'pdx(\x20vPosi'+'tionW\x20);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dp2:\x20vec3'+'f\x20=\x20dpdy(\x20'+'vPositionW'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20duv1'+':\x20vec2f\x20=\x20'+'dpdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20duv2:\x20'+'vec2f\x20=\x20dp'+'dy(\x20uv\x20);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20solve\x20th'+'e\x20linear\x20s'+'ystem\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20dp'+'2perp:\x20vec'+'3f\x20=\x20cross'+'(\x20dp2,\x20nor'+'mal\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20d'+'p1perp:\x20ve'+'c3f\x20=\x20cros'+'s(\x20normal,'+'\x20dp1\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'T:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.x\x20+\x20'+'dp1perp\x20*\x20'+'duv2.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'B:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+('dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+'ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20deno'+'m:\x20f32\x20=\x20m'+'ax(\x20dot(T,'+'\x20T),\x20dot(B'+',\x20B)\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'invmax:\x20f3'+'2\x20=\x20select'+'(uniform.t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20),\x200.0,\x20'+'denom\x20==\x200'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3x3f(T\x20'+'*\x20invmax,\x20'+'-B\x20*\x20invma'+'x,\x20normal\x20'+');\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20obj'+'ect\x20space\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20B:\x20'+'vec3f\x20=\x20cr'+'oss(normal'+',\x20vObjectS'+'paceUpW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20T:\x20vec3f'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dot(B,'+'B)\x20==\x200.0)'+'\x20//\x20deal\x20w'+'ith\x20case\x20w'+'hen\x20vObjec'+'tSpaceUpW\x20'+'normal\x20are'+'\x20parallel\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20majo'+'r:\x20f32\x20=\x20m'+'ax(max(nor'+'mal.x,\x20nor'+'mal.y),\x20no'+'rmal.z);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(norm'+'al.x\x20==\x20ma'+'jor)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20B\x20=\x20c'+'ross(norma'+'l,\x20vec3f(0'+'.0,\x201.0,\x200'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20T\x20=\x20cros'+'s(normal,\x20'+'B);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x20if\x20(n'+'ormal.y\x20=='+'\x20major)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20B\x20'+'=\x20cross(no'+'rmal,\x20vec3'+'f(0.0,\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20//'+'\x20removed\x20\x22'+'if\x20(normal'+'.z\x20==\x20majo'+'r)\x22\x20assumi'+'ng\x20it\x27s\x20th'+'e\x20only\x20rem'+'aining\x20cas'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20B\x20=\x20cros'+'s(normal,\x20'+'vec3f(1.0,'+'\x200.0,\x200.0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3x3f(n'+'ormalize(T'+'),\x20normali'+'ze(B),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a}'),$I='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_th'+'ickness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getTh'+'ickness()\x20'+'{\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'THICKNESS_'+'CONSTANT\x0a\x20'+'\x20\x20\x20dThickn'+'ess\x20=\x20dThi'+'ckness\x20*\x20u'+'niform.mat'+'erial_thic'+'kness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_THICKN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x20d'+'Thickness\x20'+'*\x20textureS'+'ampleBias('+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_THICKNESS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_THIC'+'KNESS_VERT'+'EX\x0a\x20\x20\x20\x20dTh'+'ickness\x20=\x20'+'dThickness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',XI='\x0a#if\x20(TONE'+'MAP\x20==\x20NON'+'E)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingNo'+'nePS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20FILMIC\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingFilmi'+'cPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22tonemap'+'pingLinear'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20HEJL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gHejlPS\x22\x0a#'+'elif\x20TONEM'+'AP\x20==\x20ACES'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingAces'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20ACES2\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngAces2PS\x22'+'\x0a#elif\x20TON'+'EMAP\x20==\x20NE'+'UTRAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gNeutralPS'+'\x22\x0a#endif\x0a',qI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20t'+'A:\x20f32\x20=\x202'+'.51;\x0a\x20\x20\x20\x20l'+'et\x20tB:\x20f32'+'\x20=\x200.03;\x0a\x20'+'\x20\x20\x20let\x20tC:'+'\x20f32\x20=\x202.4'+'3;\x0a\x20\x20\x20\x20let'+'\x20tD:\x20f32\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20let\x20tE:\x20f'+'32\x20=\x200.14;'+'\x0a\x20\x20\x20\x20let\x20x'+':\x20vec3f\x20=\x20'+'color\x20*\x20un'+'iform.expo'+'sure;\x0a\x20\x20\x20\x20'+'return\x20(x\x20'+'*\x20(tA\x20*\x20x\x20'+'+\x20tB))\x20/\x20('+'x\x20*\x20(tC\x20*\x20'+'x\x20+\x20tD)\x20+\x20'+'tE);\x0a}\x0a',jI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0a//\x20AC'+'ES\x20approxi'+'mation\x20by\x20'+'Stephen\x20Hi'+'ll\x0a\x0a//\x20sRG'+'B\x20=>\x20XYZ\x20='+'>\x20D65_2_D6'+'0\x20=>\x20AP1\x20='+'>\x20RRT_SAT\x0a'+'const\x20ACES'+'InputMat:\x20'+'mat3x3f\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20vec3f(0'+'.59719,\x200.'+'35458,\x200.0'+'4823),\x0a\x20\x20\x20'+'\x20vec3f(0.0'+'7600,\x200.90'+'834,\x200.015'+'66),\x0a\x20\x20\x20\x20v'+'ec3f(0.028'+'40,\x200.1338'+'3,\x200.83777'+')\x0a);\x0a\x0a//\x20O'+'DT_SAT\x20=>\x20'+'XYZ\x20=>\x20D60'+'_2_D65\x20=>\x20'+'sRGB\x0aconst'+'\x20ACESOutpu'+'tMat:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20v'+'ec3f(\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367),\x0a\x20\x20\x20\x20'+'vec3f(-0.1'+'0208,\x20\x201.1'+'0813,\x20-0.0'+'0605),\x0a\x20\x20\x20'+'\x20vec3f(-0.'+'00327,\x20-0.'+'07276,\x20\x201.'+'07602)\x0a);\x0a'+'\x0afn\x20RRTAnd'+'ODTFit(v:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20a:\x20v'+'ec3f\x20=\x20v\x20*'+'\x20(v\x20+\x20vec3'+'f(0.024578'+'6))\x20-\x20vec3'+'f(0.000090'+'537);\x0a\x20\x20\x20\x20'+'let\x20b:\x20vec'+'3f\x20=\x20v\x20*\x20('+'vec3f(0.98'+'3729)\x20*\x20v\x20'+'+\x20vec3f(0.'+'4329510))\x20'+'+\x20vec3f(0.'+'238081);\x0a\x20'+'\x20\x20\x20return\x20'+'a\x20/\x20b;\x0a}\x0a\x0a'+'fn\x20toneMap'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'var\x20c:\x20vec'+'3f\x20=\x20color'+'\x20*\x20(unifor'+'m.exposure'+'\x20/\x200.6);\x0a\x20'+'\x20\x20\x20c\x20=\x20c\x20*'+'\x20ACESInput'+'Mat;\x0a\x0a\x20\x20\x20\x20'+'//\x20Apply\x20R'+'RT\x20and\x20ODT'+'\x0a\x20\x20\x20\x20c\x20=\x20R'+'RTAndODTFi'+'t(c);\x0a\x20\x20\x20\x20'+'c\x20=\x20c\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(c,\x20vec'+'3f(0.0),\x20v'+'ec3f(1.0))'+';\x0a}\x0a',YI='\x0aconst\x20A:\x20'+'f32\x20=\x200.15'+';\x0aconst\x20B:'+'\x20f32\x20=\x200.5'+'0;\x0aconst\x20C'+':\x20f32\x20=\x200.'+'10;\x0aconst\x20'+'D:\x20f32\x20=\x200'+'.20;\x0aconst'+'\x20E:\x20f32\x20=\x20'+'0.02;\x0acons'+'t\x20F:\x20f32\x20='+'\x200.30;\x0acon'+'st\x20W:\x20f32\x20'+'=\x2011.2;\x0a\x0au'+'niform\x20exp'+'osure:\x20f32'+';\x0a\x0afn\x20unch'+'arted2Tone'+'map(x:\x20vec'+'3f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20((x\x20'+'*\x20(A\x20*\x20x\x20+'+'\x20C\x20*\x20B)\x20+\x20'+'D\x20*\x20E)\x20/\x20('+'x\x20*\x20(A\x20*\x20x'+'\x20+\x20B)\x20+\x20D\x20'+'*\x20F))\x20-\x20ve'+'c3f(E\x20/\x20F)'+';\x0a}\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20c'+':\x20vec3f\x20=\x20'+'uncharted2'+'Tonemap(co'+'lor\x20*\x20unif'+'orm.exposu'+'re);\x0a\x20\x20\x20\x20l'+'et\x20whiteSc'+'ale:\x20vec3f'+'\x20=\x20vec3f(1'+'.0)\x20/\x20unch'+'arted2Tone'+'map(vec3f('+'W,\x20W,\x20W));'+'\x0a\x20\x20\x20\x20c\x20*=\x20'+'whiteScale'+';\x0a\x20\x20\x20\x20retu'+'rn\x20c;\x0a}\x0a',KI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20A'+':\x20f32\x20=\x200.'+'22;\x0a\x20\x20\x20\x20le'+'t\x20B:\x20f32\x20='+'\x200.3;\x0a\x20\x20\x20\x20'+'let\x20C:\x20f32'+'\x20=\x200.1;\x0a\x20\x20'+'\x20\x20let\x20D:\x20f'+'32\x20=\x200.2;\x0a'+'\x20\x20\x20\x20let\x20E:'+'\x20f32\x20=\x200.0'+'1;\x0a\x20\x20\x20\x20let'+'\x20F:\x20f32\x20=\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20Scl:\x20f3'+'2\x20=\x201.25;\x0a'+'\x0a\x20\x20\x20\x20let\x20a'+'djusted_co'+'lor\x20=\x20colo'+'r\x20*\x20unifor'+'m.exposure'+';\x0a\x20\x20\x20\x20let\x20'+'h\x20=\x20max(ve'+'c3f(0.0),\x20'+'adjusted_c'+'olor\x20-\x20vec'+'3f(0.004))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20(h\x20*\x20('+'(Scl\x20*\x20A)\x20'+'*\x20h\x20+\x20Scl\x20'+'*\x20vec3f(C\x20'+'*\x20B))\x20+\x20Sc'+'l\x20*\x20vec3f('+'D\x20*\x20E))\x20/\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(h\x20*\x20(A\x20*'+'\x20h\x20+\x20vec3f'+'(B))\x20+\x20vec'+'3f(D\x20*\x20F))'+'\x20-\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20Scl\x20*\x20'+'vec3f(E\x20/\x20'+'F);\x0a}\x0a',ZI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20color\x20*\x20'+'uniform.ex'+'posure;\x0a}\x0a',QI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(col:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20var\x20col'+'or\x20=\x20col\x20*'+'\x20uniform.e'+'xposure;\x0a\x0a'+'\x20\x20\x20\x20let\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20let\x20des'+'aturation\x20'+'=\x200.15;\x0a\x0a\x20'+'\x20\x20\x20let\x20x\x20='+'\x20min(color'+'.r,\x20min(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20let\x20offs'+'et\x20=\x20selec'+'t(0.04,\x20x\x20'+'-\x206.25\x20*\x20x'+'\x20*\x20x,\x20x\x20<\x20'+'0.08);\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'vec3f(offs'+'et);\x0a\x0a\x20\x20\x20\x20'+'let\x20peak\x20='+'\x20max(color'+'.r,\x20max(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20if\x20(peak'+'\x20<\x20startCo'+'mpression)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'d\x20=\x201.0\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20let\x20newP'+'eak\x20=\x201.0\x20'+'-\x20d\x20*\x20d\x20/\x20'+'(peak\x20+\x20d\x20'+'-\x20startCom'+'pression);'+'\x0a\x20\x20\x20\x20color'+'\x20*=\x20newPea'+'k\x20/\x20peak;\x0a'+'\x0a\x20\x20\x20\x20let\x20g'+'\x20=\x201.0\x20-\x201'+'.0\x20/\x20(desa'+'turation\x20*'+'\x20(peak\x20-\x20n'+'ewPeak)\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ve'+'c3f(newPea'+'k),\x20vec3f('+'g));\x0a}\x0a',JI='\x0afn\x20toneMa'+'p(color:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a}\x0a',eD='\x0a#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20SCREE'+'NSPACE\x0a\x20\x20\x20'+'\x20uniform\x20p'+'rojectionF'+'lipY:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20evalWorl'+'dPosition('+'vertexPosi'+'tion:\x20vec3'+'f,\x20modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ve'+'c4f\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20local'+'Pos:\x20vec3f'+'\x20=\x20getLoca'+'lPosition('+'vertexPosi'+'tion);\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20outer\x20and'+'\x20inner\x20ver'+'tices\x20are\x20'+'at\x20the\x20sam'+'e\x20position'+',\x20scale\x20bo'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20local'+'PosXZ:\x20vec'+'2f\x20=\x20local'+'Pos.xz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20loca'+'lPosXZ\x20=\x20l'+'ocalPosXZ\x20'+'*\x20uniform.'+'outerScale'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20offset'+'\x20inner\x20ver'+'tices\x20insi'+'de\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20(origi'+'nal\x20vertic'+'es\x20must\x20be'+'\x20in\x20[-1;1]'+'\x20range)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'positiveUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(vertex'+'Position.x'+'z,\x20vec2f(0'+'.0),\x20vec2f'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(-verte'+'xPosition.'+'xz,\x20vec2f('+'0.0),\x20vec2'+'f(1.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20loc'+'alPosXZ\x20=\x20'+'localPosXZ'+'\x20+\x20(-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy\x20+'+'\x20negativeU'+'nitOffset\x20'+'*\x20uniform.'+'innerOffse'+'t.zw)\x20*\x20ve'+'rtex_texCo'+'ord0.xy;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'iledUvGlob'+'al\x20=\x20(loca'+'lPosXZ\x20-\x20u'+'niform.out'+'erScale\x20+\x20'+'uniform.in'+'nerOffset.'+'xy)\x20*\x20-0.5'+'\x20+\x201.0;\x20//'+'\x20uv\x20=\x20loca'+'l\x20pos\x20-\x20in'+('ner\x20corner'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPosXZ'+'\x20=\x20localPo'+'sXZ\x20*\x20-0.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20='+'\x20vec3f(loc'+'alPosXZ.x,'+'\x20localPosX'+'Z.y,\x20local'+'Pos.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20var\x20po'+'sW:\x20vec4f\x20'+'=\x20modelMat'+'rix\x20*\x20vec4'+'f(localPos'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREENSPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'posW\x20=\x20vec'+'4f(posW.xy'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20posW'+';\x0a}\x0a\x0afn\x20ge'+'tPosition('+')\x20->\x20vec4f'+'\x20{\x0a\x0a\x20\x20\x20\x20dM'+'odelMatrix'+'\x20=\x20getMode'+'lMatrix();'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'posW:\x20vec4'+'f\x20=\x20evalWo'+'rldPositio'+'n(vertex_p'+'osition.xy'+'z,\x20dModelM'+'atrix);\x0a\x20\x20'+'\x20\x20dPositio'+'nW\x20=\x20posW.'+'xyz;\x0a\x0a\x20\x20\x20\x20'+'var\x20screen'+'Pos:\x20vec4f'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20UV1LAYO'+'UT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20vec4f(v'+'ertex_texC'+'oord1.xy\x20*'+'\x202.0\x20-\x201.0'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20SCR'+'EENSPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20posW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20unif'+'orm.projec'+'tionFlipY;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos\x20=\x20u'+'niform.mat'+'rix_viewPr'+'ojection\x20*'+'\x20posW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20snap\x20ve'+'rtex\x20to\x20a\x20'+'pixel\x20boun'+'dary\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x200.'+'5)\x20+\x200.5;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20screenPo'+'s.xy\x20*=\x20un'+'iforms.uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'niforms.uS'+'creenSize.'+'zw;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x202.0'+')\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20scr'+'eenPos;\x0a}\x0a'+'\x0afn\x20getWor'+'ldPosition'+'()\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20dPosi'+'tionW;\x0a}\x0a'),tD='\x0a\x0a\x20\x20\x20\x20attr'+'ibute\x20vert'+'ex_positio'+'n:\x20vec4f;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'rix_model:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20morph_te'+'x_params:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20attri'+'bute\x20morph'+'_vertex_id'+':\x20u32;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etTextureM'+'orphCoords'+'()\x20->\x20vec2'+'i\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'turn\x20morph'+'_vertex_id'+'\x20into\x20int\x20'+'grid\x20coord'+'inates\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'Size:\x20vec2'+'i\x20=\x20vec2i('+'uniform.mo'+'rph_tex_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphGr'+'idV:\x20i32\x20='+'\x20i32(morph'+'_vertex_id'+')\x20/\x20textur'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20morph'+'GridU:\x20i32'+'\x20=\x20i32(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'rphGridV\x20='+'\x20textureSi'+'ze.y\x20-\x20mor'+'phGridV\x20-\x20'+'1;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec2i(mo'+'rphGridU,\x20'+'morphGridV'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_PO'+'SITION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20aabbSiz'+'e:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20aabbMi'+'n:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'morphPosit'+'ionTex:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'sitionTex:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+('if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sk'+'inBatchVS\x22'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fn\x20getMode'+'lMatrix()\x20'+'->\x20mat4x4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getBoneM'+'atrix(vert'+'ex_boneInd'+'ices);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(SKIN'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etModelMat'+'rix()\x20->\x20m'+'at4x4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20un'+'iform.matr'+'ix_model\x20*'+'\x20getSkinMa'+'trix(verte'+'x_boneIndi'+'ces,\x20verte'+'x_boneWeig'+'hts);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(INSTA'+'NCING)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22tran'+'sformInsta'+'ncingVS\x22\x0a\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'n\x20getModel'+'Matrix()\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_mode'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'fn\x20getLoca'+'lPosition('+'vertexPosi'+'tion:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20loc'+'alPos:\x20vec'+'3f\x20=\x20verte'+'xPosition;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphUV:'+'\x20vec2i\x20=\x20g'+'etTextureM'+'orphCoords'+'();\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MORPHI'+'NG_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Use\x20'+'textureLoa'+'d\x20instead\x20'+'of\x20texelFe'+'tch.\x20Coord'+'inates\x20mus'+'t\x20be\x20integ'+'er\x20type\x20(v'+'ec2i).\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20WGSL'+'\x20requires\x20'+'explicit\x20t'+'ype\x20conver'+'sion\x20for\x20v'+'ectors.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Div'+'ision\x20by\x20f'+'loat\x20liter')+('al\x20ensures'+'\x20floating\x20'+'point\x20divi'+'sion.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hPos:\x20vec3'+'f\x20=\x20vec3f('+'textureLoa'+'d(morphPos'+'itionTex,\x20'+'morphUV,\x200'+').xyz)\x20/\x206'+'5535.0\x20*\x20u'+'niform.aab'+'bSize\x20+\x20un'+'iform.aabb'+'Min;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Use\x20text'+'ureLoad\x20in'+'stead\x20of\x20t'+'exelFetch.'+'\x20Coordinat'+'es\x20must\x20be'+'\x20integer\x20t'+'ype\x20(vec2i'+').\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'s:\x20vec3f\x20='+'\x20textureLo'+'ad(morphPo'+'sitionTex,'+'\x20morphUV,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20+'+'=\x20morphPos'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20localP'+'os;\x0a\x20\x20\x20\x20}\x0a'),sD='\x0a\x0aattribut'+'e\x20instance'+'_line1:\x20ve'+'c4f;\x0aattri'+'bute\x20insta'+'nce_line2:'+'\x20vec4f;\x0aat'+'tribute\x20in'+'stance_lin'+'e3:\x20vec4f;'+'\x0aattribute'+'\x20instance_'+'line4:\x20vec'+'4f;\x0a\x0afn\x20ge'+'tModelMatr'+'ix()\x20->\x20ma'+'t4x4f\x20{\x0a\x20\x20'+'\x20\x20return\x20u'+'niform.mat'+'rix_model\x20'+'*\x20mat4x4f('+'instance_l'+'ine1,\x20inst'+'ance_line2'+',\x20instance'+'_line3,\x20in'+'stance_lin'+'e4);\x0a}\x0a',iD='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_refrac'+'tion:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getRefra'+'ction()\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction:\x20'+'f32\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20refractio'+'n\x20=\x20unifor'+'m.material'+'_refractio'+'n;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'REFRACTION'+'_TEXTURE\x0a\x20'+'\x20\x20\x20refract'+'ion\x20=\x20refr'+'action\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_REFRACTI'+'ON_TEXTURE'+'_NAME},\x20{S'+'TD_REFRACT'+'ION_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_REFRACTIO'+'N_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_REFRACTIO'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_VE'+'RTEX\x0a\x20\x20\x20\x20r'+'efraction\x20'+'=\x20refracti'+'on\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_REFRACTI'+'ON_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dTr'+'ansmission'+'\x20=\x20refract'+'ion;\x0a}\x0a',rD='\x0auniform\x20t'+'woSidedLig'+'htingNegSc'+'aleFactor:'+'\x20f32;\x0a\x0afn\x20'+'handleTwoS'+'idedLighti'+'ng()\x20{\x0a\x20\x20\x20'+'\x20dTBN[2]\x20='+'\x20dTBN[2]\x20*'+'\x20select(-u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20p'+'cFrontFaci'+'ng);\x0a}\x0a',aD='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20fn\x20getU'+'v0()\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20uv'+'\x20=\x20vertex_'+'position.x'+'z;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20offse'+'t\x20inner\x20ve'+'rtices\x20ins'+'ide\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2f(0'+'.0,\x200.0),\x20'+'vec2f(1.0,'+'\x201.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset\x20='+'\x20clamp(-ve'+'rtex_posit'+'ion.xz,\x20ve'+'c2f(0.0,\x200'+'.0),\x20vec2f'+'(1.0,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uv\x20=\x20uv\x20'+'+\x20((-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy)\x20'+'+\x20(negativ'+'eUnitOffse'+'t\x20*\x20unifor'+'m.innerOff'+'set.zw))\x20*'+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uv\x20=\x20uv\x20*'+'\x20-0.5\x20+\x20ve'+'c2f(0.5,\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20uniform'+'.atlasRect'+'.zw\x20+\x20unif'+'orm.atlasR'+'ect.xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dMa'+'skGlobal\x20='+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20uv'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20fn'+'\x20getUv0()\x20'+'->\x20vec2f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a',nD='\x0afn\x20getUv1'+'()\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20verte'+'x_texCoord'+'1;\x0a}\x0a',oD='\x0aoutput.vU'+'V{TRANSFOR'+'M_UV_{i}}_'+'{TRANSFORM'+'_ID_{i}}\x20='+'\x20vec2f(\x0a\x20\x20'+'\x20\x20dot(vec3'+'f(uv{TRANS'+'FORM_UV_{i'+'}},\x201),\x20un'+'iform.{TRA'+'NSFORM_NAM'+'E_{i}}0),\x0a'+'\x20\x20\x20\x20dot(ve'+'c3f(uv{TRA'+'NSFORM_UV_'+'{i}},\x201),\x20'+'uniform.{T'+'RANSFORM_N'+'AME_{i}}1)'+'\x0a);\x0a',lD='\x0a\x20\x20\x20\x20unifo'+'rm\x20{TRANSF'+'ORM_NAME_{'+'i}}0:\x20vec3'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20{TRAN'+'SFORM_NAME'+'_{i}}1:\x20ve'+'c3f;\x0a',hD='\x0afn\x20getVie'+'wDir()\x20{\x0a\x20'+'\x20\x20\x20dViewDi'+'rW\x20=\x20norma'+'lize(unifo'+'rm.view_po'+'sition\x20-\x20v'+'PositionW)'+';\x0a}\x0a',cD={'alphaTestPS':h2,'ambientPS':c2,'anisotropyPS':d2,'aoPS':f2,'aoDiffuseOccPS':u2,'aoSpecOccPS':m2,'bakeDirLmEndPS':p2,'bakeLmEndPS':_2,'basePS':g2,'baseNineSlicedPS':S2,'baseNineSlicedTiledPS':y2,'bayerPS':v2,'blurVSMPS':x2,'clearCoatPS':T2,'clearCoatGlossPS':w2,'clearCoatNormalPS':E2,'clusteredLightCookiesPS':b2,'clusteredLightShadowsPS':C2,'clusteredLightUtilsPS':A2,'clusteredLightPS':P2,'combinePS':M2,'cookieBlit2DPS':I2,'cookieBlitCubePS':D2,'cookieBlitVS':L2,'cubeMapProjectPS':R2,'cubeMapRotatePS':O2,'debugOutputPS':F2,'debugProcessFrontendPS':N2,'detailModesPS':U2,'diffusePS':B2,'decodePS':k2,'emissivePS':z2,'encodePS':V2,'endPS':G2,'envAtlasPS':H2,'envProcPS':W2,'falloffInvSquaredPS':$2,'falloffLinearPS':X2,'floatAsUintPS':q2,'fogPS':j2,'fresnelSchlickPS':Y2,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':K2,'gammaPS':Z2,'glossPS':Q2,'gsplatCenterVS':J2,'gsplatCornerVS':hM,'gsplatColorVS':eM,'gsplatCommonVS':tM,'gsplatCompressedDataVS':sM,'gsplatCompressedSHVS':iM,'gsplatEvalSHVS':rM,'gsplatQuatToMat3VS':aM,'gsplatSogsColorVS':nM,'gsplatSogsDataVS':oM,'gsplatSogsSHVS':lM,'gsplatDataVS':cM,'gsplatOutputVS':dM,'gsplatPS':fM,'gsplatSHVS':uM,'gsplatSourceVS':mM,'gsplatVS':pM,'quadVS':_M,'indirectCoreCS':gM,'immediateLinePS':SM,'immediateLineVS':yM,'iridescenceDiffractionPS':vM,'iridescencePS':xM,'iridescenceThicknessPS':TM,'iorPS':wM,'lightDeclarationPS':EM,'lightDiffuseLambertPS':AM,'lightDirPointPS':bM,'lightEvaluationPS':CM,'lightFunctionLightPS':PM,'lightFunctionShadowPS':MM,'lightingPS':IM,'lightmapAddPS':DM,'lightmapPS':LM,'lightSpecularAnisoGGXPS':RM,'lightSpecularBlinnPS':OM,'lightSheenPS':FM,'linearizeDepthPS':NM,'litForwardBackendPS':kM,'litForwardDeclarationPS':UM,'litForwardMainPS':BM,'litForwardPostCodePS':zM,'litForwardPreCodePS':VM,'litMainPS':GM,'litMainVS':HM,'litOtherMainPS':WM,'litShaderArgsPS':$M,'litShaderCorePS':XM,'litShadowMainPS':qM,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':jM,'metalnessPS':YM,'metalnessModulatePS':ZM,'morphPS':QM,'morphVS':JM,'msdfPS':KM,'msdfVS':eI,'normalVS':tI,'normalCoreVS':sI,'normalMapPS':iI,'opacityPS':rI,'opacityDitherPS':aI,'outputPS':nI,'outputAlphaPS':oI,'outputTex2DPS':lI,'sheenPS':hI,'sheenGlossPS':cI,'parallaxPS':dI,'pickPS':fI,'reflDirPS':uI,'reflDirAnisoPS':mI,'reflectionCCPS':pI,'reflectionCubePS':_I,'reflectionEnvHQPS':gI,'reflectionEnvPS':SI,'reflectionSpherePS':yI,'reflectionSheenPS':vI,'refractionCubePS':xI,'refractionDynamicPS':TI,'reprojectPS':wI,'reprojectVS':EI,'screenDepthPS':AI,'shadowCascadesPS':bI,'shadowEVSMPS':CI,'shadowPCF1PS':PI,'shadowPCF3PS':MI,'shadowPCF5PS':II,'shadowSoftPS':DI,'skinBatchVS':LI,'skinVS':RI,'skyboxPS':OI,'skyboxVS':FI,'specularPS':NI,'sphericalPS':kI,'specularityFactorPS':UI,'spotPS':BI,'startNineSlicedPS':zI,'startNineSlicedTiledPS':VI,'stdDeclarationPS':GI,'stdFrontEndPS':HI,'TBNPS':WI,'thicknessPS':$I,'tonemappingPS':XI,'tonemappingAcesPS':qI,'tonemappingAces2PS':jI,'tonemappingFilmicPS':YI,'tonemappingHejlPS':KI,'tonemappingLinearPS':ZI,'tonemappingNeutralPS':QI,'tonemappingNonePS':JI,'transformVS':eD,'transformCoreVS':tD,'transformInstancingVS':sD,'transmissionPS':iD,'twoSidedLightingPS':rD,'uv0VS':aD,'uv1VS':nD,'uvTransformVS':oD,'uvTransformUniformsPS':lD,'viewDirPS':hD,'webgpuPS':QS,'webgpuVS':JS},zr=class zr extends pe{constructor(_0x2fc8a3){super(),h(this,'_batcher',null),h(this,'_destroyRe'+'quested',!(-0x1586+-0x7af*-0x1+-0x1bb*-0x8)),h(this,'_inFrameUp'+'date',!(-0x63+0x550*0x1+-0x4ec)),h(this,'_libraries'+'Loaded',!(-0x2494+-0x1816+0x3cab)),h(this,'_fillMode',k_),h(this,'_resolutio'+'nMode',zb),h(this,'_allowResi'+'ze',!(0x1654+0x13fd+0x1*-0x2a51)),h(this,'_skyboxAss'+'et',null),h(this,'_soundMana'+'ger'),h(this,'_visibilit'+'yChangeHan'+'dler'),h(this,'_entityInd'+'ex',{}),h(this,'_inTools',!(-0xa08+-0x18f9+-0x2302*-0x1)),h(this,'_scriptPre'+'fix',''),h(this,'_time',-0x1ce3+-0x933+0x7d*0x4e),h(this,'enableBund'+'les',typeof TextDecoder<'u'),h(this,'frameReque'+'stId'),h(this,'timeScale',-0x1b04+-0xe5*0x26+0x3d03*0x1),h(this,'maxDeltaTi'+'me',0x2*0xb50+-0x20ff+-0x3*-0x375+0.1),h(this,'frame',0x232c+0x3d*-0x4c+-0x1110),h(this,'frameGraph',new Vb()),h(this,'renderer'),h(this,'scriptsOrd'+'er',[]),h(this,'stats'),h(this,'autoRender',!(-0x1171+-0x3*-0x5f+0x1054)),h(this,'renderNext'+'Frame',!(0x1*-0x17dd+-0x19d8+0x31b6)),h(this,'graphicsDe'+'vice'),h(this,'root'),h(this,'scene'),h(this,'lightmappe'+'r',null),h(this,'loader',new fn(this)),h(this,'assets'),h(this,'bundles'),h(this,'scenes',new rC(this)),h(this,'scripts',new eC(this)),h(this,'systems',new Kb()),h(this,'i18n',new ha(this)),h(this,'keyboard',null),h(this,'mouse',null),h(this,'touch',null),h(this,'gamepads',null),h(this,'elementInp'+'ut',null),h(this,'xr',null),((ja==null?void(-0x1e44+-0x3*0x394+0x52*0x80):ja['indexOf']('$'))<-0x263b+0x9e3*-0x1+0x3*0x100a&&M['log']('Powered\x20by'+'\x20PlayCanva'+'s\x20'+ja+'\x20'+Qg),zr['_applicati'+'ons'][_0x2fc8a3['id']]=this,Nf(this),this['root']=new ot(),this['root']['_enabledIn'+'Hierarchy']=!(-0x139f+0x1417+-0x78));}['init'](_0x1a9e5a){const {assetPrefix:_0x59a8c6,batchManager:_0x4776bf,componentSystems:_0x2a2435,elementInput:_0x4af4cf,gamepads:_0x5d563c,graphicsDevice:_0x3c37c6,keyboard:_0x4ab777,lightmapper:_0x197c4b,mouse:_0x541ee7,resourceHandlers:_0x3186bb,scriptsOrder:_0x1f6a1e,scriptPrefix:_0x1f89f1,soundManager:_0x30c54c,touch:_0x5c8b94,xr:_0x3e4f59}=_0x1a9e5a;M['assert'](_0x3c37c6,'The\x20applic'+'ation\x20cann'+'ot\x20be\x20crea'+'ted\x20withou'+'t\x20a\x20valid\x20'+'GraphicsDe'+'vice'),this['graphicsDe'+'vice']=_0x3c37c6,Ce['get'](_0x3c37c6,ze)['add'](l2),Ce['get'](_0x3c37c6,st)['add'](cD),this['_initDefau'+'ltMaterial'](),this['_initProgr'+'amLibrary'](),this['stats']=new aC(_0x3c37c6),this['_soundMana'+'ger']=_0x30c54c,this['scene']=new wi(_0x3c37c6),this['_registerS'+'ceneImmedi'+'ate'](this['scene']),this['assets']=new ao(this['loader']),_0x59a8c6&&(this['assets']['prefix']=_0x59a8c6),this['bundles']=new Yb(this['assets']),this['scriptsOrd'+'er']=_0x1f6a1e||[],this['defaultLay'+'erWorld']=new Dr({'name':'World','id':Wi}),this['defaultLay'+'erDepth']=new Dr({'name':'Depth','id':os,'enabled':!(-0x1411+-0x17b*0x3+0x1883),'opaqueSortMode':_h}),this['defaultLay'+'erSkybox']=new Dr({'name':'Skybox','id':_m,'opaqueSortMode':_h}),this['defaultLay'+'erUi']=new Dr({'name':'UI','id':nl,'transparentSortMode':rw}),this['defaultLay'+'erImmediat'+'e']=new Dr({'name':'Immediate','id':gm,'opaqueSortMode':_h});const _0x1cd94e=new d_('default');_0x1cd94e['pushOpaque'](this['defaultLay'+'erWorld']),_0x1cd94e['pushOpaque'](this['defaultLay'+'erDepth']),_0x1cd94e['pushOpaque'](this['defaultLay'+'erSkybox']),_0x1cd94e['pushTransp'+'arent'](this['defaultLay'+'erWorld']),_0x1cd94e['pushOpaque'](this['defaultLay'+'erImmediat'+'e']),_0x1cd94e['pushTransp'+'arent'](this['defaultLay'+'erImmediat'+'e']),_0x1cd94e['pushTransp'+'arent'](this['defaultLay'+'erUi']),this['scene']['layers']=_0x1cd94e,Vr['createPlac'+'eholder'](_0x3c37c6),this['renderer']=new Kh(_0x3c37c6),this['renderer']['scene']=this['scene'],_0x197c4b&&(this['lightmappe'+'r']=new _0x197c4b(_0x3c37c6,this['root'],this['scene'],this['renderer'],this['assets']),this['once']('prerender',this['_firstBake'],this)),_0x4776bf&&(this['_batcher']=new _0x4776bf(_0x3c37c6,this['root'],this['scene']),this['once']('prerender',this['_firstBatc'+'h'],this)),this['keyboard']=_0x4ab777||null,this['mouse']=_0x541ee7||null,this['touch']=_0x5c8b94||null,this['gamepads']=_0x5d563c||null,_0x4af4cf&&(this['elementInp'+'ut']=_0x4af4cf,this['elementInp'+'ut']['app']=this),this['xr']=_0x3e4f59?new _0x3e4f59(this):null,this['elementInp'+'ut']&&this['elementInp'+'ut']['attachSele'+'ctEvents'](),this['_scriptPre'+'fix']=_0x1f89f1||'',this['enableBund'+'les']&&this['loader']['addHandler']('bundle',new Qb(this)),_0x3186bb['forEach'](_0x41456d=>{const _0x92edb9=new _0x41456d(this);this['loader']['addHandler'](_0x92edb9['handlerTyp'+'e'],_0x92edb9);}),_0x2a2435['forEach'](_0x39faae=>{this['systems']['add'](new _0x39faae(this));}),this['_visibilit'+'yChangeHan'+'dler']=this['onVisibili'+'tyChange']['bind'](this),typeof document<'u'&&(document['hidden']!==void(-0xd*0x2c3+0x2*0x370+0x1d07*0x1)?(this['_hiddenAtt'+'r']='hidden',document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x85*-0xe+-0x7*-0x4a3+0x125*-0x16))):document['mozHidden']!==void(-0x1e5d+-0x1*-0xef+-0x1*-0x1d6e)?(this['_hiddenAtt'+'r']='mozHidden',document['addEventLi'+'stener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x22b8+-0x1*-0x1+-0x22b8))):document['msHidden']!==void(0x1*0x79+-0x165f+0x2*0xaf3)?(this['_hiddenAtt'+'r']='msHidden',document['addEventLi'+'stener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1*0x593+0x14*-0xfd+0x1*0xe32))):document['webkitHidd'+'en']!==void(-0x15cd*-0x1+-0xcf2*-0x3+-0x3ca3)&&(this['_hiddenAtt'+'r']='webkitHidd'+'en',document['addEventLi'+'stener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(0x1*0x64d+-0x2403+0x1db7*0x1)))),this['tick']=dD(this);}static['getApplica'+'tion'](_0x581dc6){return _0x581dc6?zr['_applicati'+'ons'][_0x581dc6]:Zr();}['_initDefau'+'ltMaterial'](){const _0x520fef=new ws();_0x520fef['name']='Default\x20Ma'+'terial',Dw(this['graphicsDe'+'vice'],_0x520fef);}['_initProgr'+'amLibrary'](){const _0x4c6dda=new rb(this['graphicsDe'+'vice'],new ws());yw(this['graphicsDe'+'vice'],_0x4c6dda);}get['soundManag'+'er'](){return this['_soundMana'+'ger'];}get['batcher'](){return M['assert'](this['_batcher'],'BatchManag'+'er\x20has\x20not'+'\x20been\x20crea'+'ted\x20and\x20is'+'\x20required\x20'+'for\x20correc'+'t\x20function'+'ality.'),this['_batcher'];}get['fillMode'](){return this['_fillMode'];}get['resolution'+'Mode'](){return this['_resolutio'+'nMode'];}['configure'](_0x367e44,_0x49e47d){nt['get'](_0x367e44,(_0x462e72,_0xb33c36)=>{if(_0x462e72){_0x49e47d(_0x462e72);return;}const _0x378c40=_0xb33c36['applicatio'+'n_properti'+'es'],_0x4d166c=_0xb33c36['scenes'],_0x4e2ba8=_0xb33c36['assets'];this['_parseAppl'+'icationPro'+'perties'](_0x378c40,_0x306135=>{this['_parseScen'+'es'](_0x4d166c),this['_parseAsse'+'ts'](_0x4e2ba8),_0x49e47d(_0x306135||null);});});}['preload'](_0x1041ea){this['fire']('preload:st'+'art');const _0x48d60f=this['assets']['list']({'preload':!(-0x37e+-0x1c*-0xbc+-0x1112)});if(_0x48d60f['length']===-0xbeb+0x968+0x283){this['fire']('preload:en'+'d'),_0x1041ea();return;}let _0x7a1644=0x12*-0x19b+-0x491+0x2177;const _0x567c6c=()=>{_0x7a1644++,this['fire']('preload:pr'+'ogress',_0x7a1644/_0x48d60f['length']),_0x7a1644===_0x48d60f['length']&&(this['fire']('preload:en'+'d'),_0x1041ea());};_0x48d60f['forEach'](_0x387423=>{_0x387423['loaded']?_0x567c6c():(_0x387423['once']('load',_0x567c6c),_0x387423['once']('error',_0x567c6c),this['assets']['load'](_0x387423));});}['_preloadSc'+'ripts'](_0x279407,_0x1ef1d4){_0x1ef1d4();}['_parseAppl'+'icationPro'+'perties'](_0x24aa79,_0x6dd56f){if(typeof _0x24aa79['maxAssetRe'+'tries']=='number'&&_0x24aa79['maxAssetRe'+'tries']>-0x220b+-0x1b63+-0x3*-0x147a&&this['loader']['enableRetr'+'y'](_0x24aa79['maxAssetRe'+'tries']),_0x24aa79['useDeviceP'+'ixelRatio']||(_0x24aa79['useDeviceP'+'ixelRatio']=_0x24aa79['use_device'+'_pixel_rat'+'io']),_0x24aa79['resolution'+'Mode']||(_0x24aa79['resolution'+'Mode']=_0x24aa79['resolution'+'_mode']),_0x24aa79['fillMode']||(_0x24aa79['fillMode']=_0x24aa79['fill_mode']),this['_width']=_0x24aa79['width'],this['_height']=_0x24aa79['height'],_0x24aa79['useDeviceP'+'ixelRatio']&&(this['graphicsDe'+'vice']['maxPixelRa'+'tio']=window['devicePixe'+'lRatio']),this['setCanvasR'+'esolution'](_0x24aa79['resolution'+'Mode'],this['_width'],this['_height']),this['setCanvasF'+'illMode'](_0x24aa79['fillMode'],this['_width'],this['_height']),_0x24aa79['layers']&&_0x24aa79['layerOrder']){const _0x5e2518=new d_('applicatio'+'n'),_0x33ccbe={};for(const _0x541af7 in _0x24aa79['layers']){const _0x38c322=_0x24aa79['layers'][_0x541af7];_0x38c322['id']=parseInt(_0x541af7,0x21b2+-0x220d+-0x65*-0x1),_0x38c322['enabled']=_0x38c322['id']!==os,_0x33ccbe[_0x541af7]=new Dr(_0x38c322);}for(let _0x5a3bc7=-0x3b0+0x2208+0xf2c*-0x2,_0xe4ac83=_0x24aa79['layerOrder']['length'];_0x5a3bc7<_0xe4ac83;_0x5a3bc7++){const _0x71dad8=_0x24aa79['layerOrder'][_0x5a3bc7],_0x3a4792=_0x33ccbe[_0x71dad8['layer']];_0x3a4792&&(_0x71dad8['transparen'+'t']?_0x5e2518['pushTransp'+'arent'](_0x3a4792):_0x5e2518['pushOpaque'](_0x3a4792),_0x5e2518['subLayerEn'+'abled'][_0x5a3bc7]=_0x71dad8['enabled']);}this['scene']['layers']=_0x5e2518;}if(_0x24aa79['batchGroup'+'s']){const _0x5ce175=this['batcher'];if(_0x5ce175)for(let _0x1a1dab=0xfdf+0x1bbf*0x1+-0x745*0x6,_0x4a5512=_0x24aa79['batchGroup'+'s']['length'];_0x1a1dab<_0x4a5512;_0x1a1dab++){const _0x2eed04=_0x24aa79['batchGroup'+'s'][_0x1a1dab];_0x5ce175['addGroup'](_0x2eed04['name'],_0x2eed04['dynamic'],_0x2eed04['maxAabbSiz'+'e'],_0x2eed04['id'],_0x2eed04['layers']);}}_0x24aa79['i18nAssets']&&(this['i18n']['assets']=_0x24aa79['i18nAssets']),this['_loadLibra'+'ries'](_0x24aa79['libraries'],_0x6dd56f);}['_loadLibra'+'ries'](_0x4b7e9d,_0x13d66f){const _0x15bb72=_0x4b7e9d['length'];let _0x1961b9=_0x15bb72;const _0x17d648=/^https?:\/\//;if(_0x15bb72){const _0xd8069a=(_0x39f2c3,_0x4de247)=>{_0x1961b9--,_0x39f2c3?_0x13d66f(_0x39f2c3):_0x1961b9===0x26+0x17*-0x180+-0x1*-0x225a&&(this['onLibrarie'+'sLoaded'](),_0x13d66f(null));};for(let _0x537948=0x36f*0x6+0x16d5+0x2b6f*-0x1;_0x537948<_0x15bb72;++_0x537948){let _0x512b07=_0x4b7e9d[_0x537948];!_0x17d648['test'](_0x512b07['toLowerCas'+'e']())&&this['_scriptPre'+'fix']&&(_0x512b07=xe['join'](this['_scriptPre'+'fix'],_0x512b07)),this['loader']['load'](_0x512b07,'script',_0xd8069a);}}else this['onLibrarie'+'sLoaded'](),_0x13d66f(null);}['_parseScen'+'es'](_0x33a1b4){if(_0x33a1b4){for(let _0x280595=-0xfa5+0x269e*0x1+-0x16f9*0x1;_0x280595<_0x33a1b4['length'];_0x280595++)this['scenes']['add'](_0x33a1b4[_0x280595]['name'],_0x33a1b4[_0x280595]['url']);}}['_parseAsse'+'ts'](_0x3cca91){const _0x10b712=[],_0x4b25b0={},_0x32f76a={};for(let _0x2a3054=-0x153*0xd+0x1d5c*-0x1+-0x2e93*-0x1;_0x2a3054<this['scriptsOrd'+'er']['length'];_0x2a3054++){const _0x12e52e=this['scriptsOrd'+'er'][_0x2a3054];_0x3cca91[_0x12e52e]&&(_0x4b25b0[_0x12e52e]=!(0x1*0x445+0x11c9+-0x160e),_0x10b712['push'](_0x3cca91[_0x12e52e]));}if(this['enableBund'+'les']){for(const _0x3a5924 in _0x3cca91)_0x3cca91[_0x3a5924]['type']==='bundle'&&(_0x32f76a[_0x3a5924]=!(0x682+-0x155c+-0xeda*-0x1),_0x10b712['push'](_0x3cca91[_0x3a5924]));}for(const _0x16887c in _0x3cca91)_0x4b25b0[_0x16887c]||_0x32f76a[_0x16887c]||_0x10b712['push'](_0x3cca91[_0x16887c]);for(let _0x454c81=-0xe+-0x606+0x614;_0x454c81<_0x10b712['length'];_0x454c81++){const _0x27a0a1=_0x10b712[_0x454c81],_0x3af759=new me(_0x27a0a1['name'],_0x27a0a1['type'],_0x27a0a1['file'],_0x27a0a1['data']);if(_0x3af759['id']=parseInt(_0x27a0a1['id'],0x11f8+0x1a5b+-0x1*0x2c49),_0x3af759['preload']=_0x27a0a1['preload']?_0x27a0a1['preload']:!(-0x29*0x2c+-0x15*0xee+0x1a93),_0x3af759['loaded']=_0x27a0a1['type']==='script'&&_0x27a0a1['data']&&_0x27a0a1['data']['loadingTyp'+'e']>-0x1ef8+-0xaff+0x29f7,_0x3af759['tags']['add'](_0x27a0a1['tags']),_0x27a0a1['i18n']){for(const _0x18ec17 in _0x27a0a1['i18n'])_0x3af759['addLocaliz'+'edAssetId'](_0x18ec17,_0x27a0a1['i18n'][_0x18ec17]);}this['assets']['add'](_0x3af759);}}['start'](){M['call'](()=>{M['assert'](!this['_alreadySt'+'arted'],'The\x20applic'+'ation\x20can\x20'+'be\x20started'+'\x20only\x20one\x20'+'time.'),this['_alreadySt'+'arted']=!(0xb95+0x1d*-0x1b+-0x443*0x2);}),this['frame']=-0x2051*-0x1+-0x2*0x10cd+0x149*0x1,this['fire']('start',{'timestamp':de(),'target':this}),this['_libraries'+'Loaded']||this['onLibrarie'+'sLoaded'](),this['systems']['fire']('initialize',this['root']),this['fire']('initialize'),this['systems']['fire']('postInitia'+'lize',this['root']),this['systems']['fire']('postPostIn'+'itialize',this['root']),this['fire']('postinitia'+'lize'),this['tick']();}['inputUpdat'+'e'](_0x5ad3b3){this['controller']&&this['controller']['update'](_0x5ad3b3),this['mouse']&&this['mouse']['update'](),this['keyboard']&&this['keyboard']['update'](),this['gamepads']&&this['gamepads']['update']();}['update'](_0x372241){this['frame']++,this['graphicsDe'+'vice']['update'](),this['stats']['frame']['updateStar'+'t']=de(),this['systems']['fire'](this['_inTools']?'toolsUpdat'+'e':'update',_0x372241),this['systems']['fire']('animationU'+'pdate',_0x372241),this['systems']['fire']('postUpdate',_0x372241),this['fire']('update',_0x372241),this['inputUpdat'+'e'](_0x372241),this['stats']['frame']['updateTime']=de()-this['stats']['frame']['updateStar'+'t'];}['render'](){this['updateCanv'+'asSize'](),this['graphicsDe'+'vice']['frameStart'](),this['stats']['frame']['renderStar'+'t']=de(),this['fire']('prerender'),this['root']['syncHierar'+'chy'](),this['_batcher']&&this['_batcher']['updateAll'](),Kh['_skipRende'+'rCounter']=-0x1bd0+0x15ad+0x623,this['renderComp'+'osition'](this['scene']['layers']),this['fire']('postrender'),this['stats']['frame']['renderTime']=de()-this['stats']['frame']['renderStar'+'t'],this['graphicsDe'+'vice']['frameEnd']();}['renderComp'+'osition'](_0x12b6e2){Q['clearGpuMa'+'rkers'](),this['renderer']['update'](_0x12b6e2),this['renderer']['buildFrame'+'Graph'](this['frameGraph'],_0x12b6e2),this['frameGraph']['render'](this['graphicsDe'+'vice']);}['_fillFrame'+'StatsBasic'](_0x190bf9,_0xaf7829,_0x3f6734){const _0x35b87c=this['stats']['frame'];_0x35b87c['dt']=_0xaf7829,_0x35b87c['ms']=_0x3f6734,_0x190bf9>_0x35b87c['_timeToCou'+'ntFrames']?(_0x35b87c['fps']=_0x35b87c['_fpsAccum'],_0x35b87c['_fpsAccum']=-0x11b3+0x983+0x830,_0x35b87c['_timeToCou'+'ntFrames']=_0x190bf9+(-0x1494+0x1*0x1961+-0xe5)):_0x35b87c['_fpsAccum']++,this['stats']['drawCalls']['total']=this['graphicsDe'+'vice']['_drawCalls'+'PerFrame'],this['graphicsDe'+'vice']['_drawCalls'+'PerFrame']=-0x831*-0x4+0x262b+-0x46ef;}['_fillFrame'+'Stats'](){let _0x5c8e6d=this['stats']['frame'];_0x5c8e6d['cameras']=this['renderer']['_camerasRe'+'ndered'],_0x5c8e6d['materials']=this['renderer']['_materialS'+'witches'],_0x5c8e6d['shaders']=this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame'],_0x5c8e6d['shadowMapU'+'pdates']=this['renderer']['_shadowMap'+'Updates'],_0x5c8e6d['shadowMapT'+'ime']=this['renderer']['_shadowMap'+'Time'],_0x5c8e6d['depthMapTi'+'me']=this['renderer']['_depthMapT'+'ime'],_0x5c8e6d['forwardTim'+'e']=this['renderer']['_forwardTi'+'me'];const _0x245be9=this['graphicsDe'+'vice']['_primsPerF'+'rame'];_0x5c8e6d['triangles']=_0x245be9[zs]/(-0x1ab*0x2+-0x10e7+0x1440)+Math['max'](_0x245be9[cr]-(0x5*0x6c4+0x2056+-0x4228),0xd91*0x1+0x2*0xed5+0x2b3b*-0x1)+Math['max'](_0x245be9[$r]-(0x1916+0x1945*-0x1+0x31),-0xb9c+0x16*0x86+-0xc*-0x2),_0x5c8e6d['cullTime']=this['renderer']['_cullTime'],_0x5c8e6d['sortTime']=this['renderer']['_sortTime'],_0x5c8e6d['skinTime']=this['renderer']['_skinTime'],_0x5c8e6d['morphTime']=this['renderer']['_morphTime'],_0x5c8e6d['lightClust'+'ers']=this['renderer']['_lightClus'+'ters'],_0x5c8e6d['lightClust'+'ersTime']=this['renderer']['_lightClus'+'tersTime'],_0x5c8e6d['otherPrimi'+'tives']=0x1b11+0x91e*0x3+-0x1*0x366b;for(let _0x361b5e=-0x1e13+0xb78+-0xb*-0x1b1;_0x361b5e<_0x245be9['length'];_0x361b5e++)_0x361b5e<zs&&(_0x5c8e6d['otherPrimi'+'tives']+=_0x245be9[_0x361b5e]),_0x245be9[_0x361b5e]=-0x1fa9+-0xdc7+-0x1*-0x2d70;this['renderer']['_camerasRe'+'ndered']=-0xc8+0x1bab+-0x1ae3*0x1,this['renderer']['_materialS'+'witches']=0x10d+0x14b2+0x13*-0x125,this['renderer']['_shadowMap'+'Updates']=-0x373*-0x8+0x5*0x377+0xef9*-0x3,this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame']=0x170d+0x2448+-0xb7*0x53,this['renderer']['_cullTime']=-0x1d98*-0x1+0x1*-0xb19+-0x127f,this['renderer']['_layerComp'+'ositionUpd'+'ateTime']=-0x364+0x2*-0xb56+0x1a10,this['renderer']['_lightClus'+'tersTime']=-0x37*0x8+-0x244b+0x2603,this['renderer']['_sortTime']=0x17b0+0x269*0xe+-0x396e,this['renderer']['_skinTime']=-0x830*0x2+-0x4cc+0x152c,this['renderer']['_morphTime']=-0x11a1*0x1+-0x2042+-0x183*-0x21,this['renderer']['_shadowMap'+'Time']=0x44c*-0x7+0xf01*0x1+0xf13,this['renderer']['_depthMapT'+'ime']=-0xbe3+0xf9+0x7f*0x16,this['renderer']['_forwardTi'+'me']=-0x11bc+0x5f*0x4a+-0x9ba,_0x5c8e6d=this['stats']['drawCalls'],_0x5c8e6d['forward']=this['renderer']['_forwardDr'+'awCalls'],_0x5c8e6d['culled']=this['renderer']['_numDrawCa'+'llsCulled'],_0x5c8e6d['depth']=-0xad8*-0x2+-0x93e+-0xc72,_0x5c8e6d['shadow']=this['renderer']['_shadowDra'+'wCalls'],_0x5c8e6d['skinned']=this['renderer']['_skinDrawC'+'alls'],_0x5c8e6d['immediate']=0x2153+-0xd9a+-0x13b9,_0x5c8e6d['instanced']=0x21e5+-0x1*-0x273+-0x2458,_0x5c8e6d['removedByI'+'nstancing']=0x4e8*0x1+0x2*0x1133+-0x9*0x45e,_0x5c8e6d['misc']=_0x5c8e6d['total']-(_0x5c8e6d['forward']+_0x5c8e6d['shadow']),this['renderer']['_depthDraw'+'Calls']=0x1*0xae1+-0x2e7+-0x7fa,this['renderer']['_shadowDra'+'wCalls']=-0x941+0x88b+-0x5b*-0x2,this['renderer']['_forwardDr'+'awCalls']=0x116e+-0xf5b+-0x213,this['renderer']['_numDrawCa'+'llsCulled']=-0x9*-0xcd+0x1*0x193d+-0x2072,this['renderer']['_skinDrawC'+'alls']=-0x21*0x10d+-0x8*0x3d7+0x4165,this['renderer']['_immediate'+'Rendered']=0x1f8a+0xb22+-0x2aac,this['renderer']['_instanced'+'DrawCalls']=0x1*-0x1349+-0x1*-0x14e7+-0x19e,this['stats']['misc']['renderTarg'+'etCreation'+'Time']=this['graphicsDe'+'vice']['renderTarg'+'etCreation'+'Time'],_0x5c8e6d=this['stats']['particles'],_0x5c8e6d['updatesPer'+'Frame']=_0x5c8e6d['_updatesPe'+'rFrame'],_0x5c8e6d['frameTime']=_0x5c8e6d['_frameTime'],_0x5c8e6d['_updatesPe'+'rFrame']=-0x3b7+-0x2*0xe6d+-0x1*-0x2091,_0x5c8e6d['_frameTime']=0x564+-0x88a+0x1*0x326;}['setCanvasF'+'illMode'](_0x53d7a9,_0x473826,_0x296dbe){this['_fillMode']=_0x53d7a9,this['resizeCanv'+'as'](_0x473826,_0x296dbe);}['setCanvasR'+'esolution'](_0x578f9e,_0x57d0ba,_0x49542b){this['_resolutio'+'nMode']=_0x578f9e,_0x578f9e===U_&&_0x57d0ba===void(-0x193f+0x841*-0x3+0xad*0x4a)&&(_0x57d0ba=this['graphicsDe'+'vice']['canvas']['clientWidt'+'h'],_0x49542b=this['graphicsDe'+'vice']['canvas']['clientHeig'+'ht']),this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x57d0ba,_0x49542b);}['isHidden'](){return document[this['_hiddenAtt'+'r']];}['onVisibili'+'tyChange'](){this['isHidden']()?this['_soundMana'+'ger']&&this['_soundMana'+'ger']['suspend']():this['_soundMana'+'ger']&&this['_soundMana'+'ger']['resume']();}['resizeCanv'+'as'](_0x1f29ec,_0x387609){if(!this['_allowResi'+'ze']||this['xr']&&this['xr']['session'])return;const _0x3cbdcd=window['innerWidth'],_0x14ed04=window['innerHeigh'+'t'];if(this['_fillMode']===k_){const _0x3e7f40=this['graphicsDe'+'vice']['canvas']['width']/this['graphicsDe'+'vice']['canvas']['height'],_0x5c9e99=_0x3cbdcd/_0x14ed04;_0x3e7f40>_0x5c9e99?(_0x1f29ec=_0x3cbdcd,_0x387609=_0x1f29ec/_0x3e7f40):(_0x387609=_0x14ed04,_0x1f29ec=_0x387609*_0x3e7f40);}else this['_fillMode']===Bb&&(_0x1f29ec=_0x3cbdcd,_0x387609=_0x14ed04);return this['graphicsDe'+'vice']['canvas']['style']['width']=_0x1f29ec+'px',this['graphicsDe'+'vice']['canvas']['style']['height']=_0x387609+'px',this['updateCanv'+'asSize'](),{'width':_0x1f29ec,'height':_0x387609};}['updateCanv'+'asSize'](){var _0x14f2ff;if(!(!this['_allowResi'+'ze']||(_0x14f2ff=this['xr'])!=null&&_0x14f2ff['active'])&&this['_resolutio'+'nMode']===U_){const _0x3d7587=this['graphicsDe'+'vice']['canvas'];this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x3d7587['clientWidt'+'h'],_0x3d7587['clientHeig'+'ht']);}}['onLibrarie'+'sLoaded'](){this['_libraries'+'Loaded']=!(0x19bc+-0x177e+-0x23e),this['systems']['rigidbody']&&this['systems']['rigidbody']['onLibraryL'+'oaded']();}['applyScene'+'Settings'](_0x58f3b2){let _0x328bf1;if(this['systems']['rigidbody']&&typeof Ammo<'u'){const [_0x1e2cf4,_0x851219,_0x2b18af]=_0x58f3b2['physics']['gravity'];this['systems']['rigidbody']['gravity']['set'](_0x1e2cf4,_0x851219,_0x2b18af);}this['scene']['applySetti'+'ngs'](_0x58f3b2),_0x58f3b2['render']['hasOwnProp'+'erty']('skybox')&&(_0x58f3b2['render']['skybox']?(_0x328bf1=this['assets']['get'](_0x58f3b2['render']['skybox']),_0x328bf1?this['setSkybox'](_0x328bf1):this['assets']['once']('add:'+_0x58f3b2['render']['skybox'],this['setSkybox'],this)):this['setSkybox'](null));}['setAreaLig'+'htLuts'](_0x5b1bdf,_0x315f5e){_0x5b1bdf&&_0x315f5e?Vr['set'](this['graphicsDe'+'vice'],_0x5b1bdf,_0x315f5e):M['warn']('setAreaLig'+'htLuts:\x20LU'+'Ts\x20for\x20are'+'a\x20light\x20ar'+'e\x20not\x20vali'+'d');}['setSkybox'](_0x1033ee){if(_0x1033ee!==this['_skyboxAss'+'et']){const _0x1e035a=()=>{this['setSkybox'](null);},_0x1009b8=()=>{this['scene']['setSkybox'](this['_skyboxAss'+'et']?this['_skyboxAss'+'et']['resources']:null);};this['_skyboxAss'+'et']&&(this['assets']['off']('load:'+this['_skyboxAss'+'et']['id'],_0x1009b8,this),this['assets']['off']('remove:'+this['_skyboxAss'+'et']['id'],_0x1e035a,this),this['_skyboxAss'+'et']['off']('change',_0x1009b8,this)),this['_skyboxAss'+'et']=_0x1033ee,this['_skyboxAss'+'et']&&(this['assets']['on']('load:'+this['_skyboxAss'+'et']['id'],_0x1009b8,this),this['assets']['once']('remove:'+this['_skyboxAss'+'et']['id'],_0x1e035a,this),this['_skyboxAss'+'et']['on']('change',_0x1009b8,this),this['scene']['skyboxMip']===0x3*-0x715+0x1*0x701+0xe3e&&!this['_skyboxAss'+'et']['loadFaces']&&(this['_skyboxAss'+'et']['loadFaces']=!(0x1f05+-0x4f*-0x1+-0x1f54)),this['assets']['load'](this['_skyboxAss'+'et'])),_0x1009b8();}}['_firstBake'](){var _0x428d5e;(_0x428d5e=this['lightmappe'+'r'])==null||_0x428d5e['bake'](null,this['scene']['lightmapMo'+'de']);}['_firstBatc'+'h'](){var _0x2d2f42;(_0x2d2f42=this['batcher'])==null||_0x2d2f42['generate']();}['_processTi'+'mestamp'](_0x3bfbe3){return _0x3bfbe3;}['drawLine'](_0x46011e,_0x513382,_0x1507c0,_0x91782b,_0x227b88){this['scene']['drawLine'](_0x46011e,_0x513382,_0x1507c0,_0x91782b,_0x227b88);}['drawLines'](_0x41c125,_0x47d41d,_0x5d2cea=!(0x20f9*-0x1+0x1215+0x1*0xee4),_0x5f5b8e=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLines'](_0x41c125,_0x47d41d,_0x5d2cea,_0x5f5b8e);}['drawLineAr'+'rays'](_0x10877d,_0x176e0b,_0x1be3c4=!(0x1c76+0x1*-0x129d+-0x1*0x9d9),_0x1ce5c4=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLineAr'+'rays'](_0x10877d,_0x176e0b,_0x1be3c4,_0x1ce5c4);}['drawWireSp'+'here'](_0x2d55d2,_0x467f31,_0x366cf5=ie['WHITE'],_0x5cd13e=0x175c+0x1*-0x52f+-0x1219,_0x178b5b=!(-0x1407*0x1+-0x1*0x1717+0x2*0x158f),_0x167efb=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawWireSp'+'here'](_0x2d55d2,_0x467f31,_0x366cf5,_0x5cd13e,_0x178b5b,_0x167efb);}['drawWireAl'+'ignedBox'](_0x39434a,_0x239ca2,_0x14640e=ie['WHITE'],_0x98ccaa=!(-0x4c*0x29+-0x250d+-0x3139*-0x1),_0x41f1a7=this['scene']['defaultDra'+'wLayer'],_0x2e8728){this['scene']['immediate']['drawWireAl'+'ignedBox'](_0x39434a,_0x239ca2,_0x14640e,_0x98ccaa,_0x41f1a7,_0x2e8728);}['drawMeshIn'+'stance'](_0x5b8665,_0x37ff04=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](null,null,null,_0x5b8665,_0x37ff04);}['drawMesh'](_0x8d61f,_0x3dfbc0,_0x30038c,_0x34d593=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x3dfbc0,_0x30038c,_0x8d61f,null,_0x34d593);}['drawQuad'](_0x36d401,_0x4b6134,_0x1a90ac=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x4b6134,_0x36d401,this['scene']['immediate']['getQuadMes'+'h'](),null,_0x1a90ac);}['drawTextur'+'e'](_0x2fd94d,_0x1d0c31,_0x2fcf08,_0x50ffbf,_0x357b25,_0x4ae0c2,_0x5ab631=this['scene']['defaultDra'+'wLayer'],_0x486838=!(0x21a3+-0xe0*-0x14+-0x3ef*0xd)){if(_0x486838===!(0x5fc*-0x1+-0x102d+0x162a)&&!this['graphicsDe'+'vice']['isWebGPU'])return;const _0x291510=new te();_0x291510['setTRS'](new I(_0x2fd94d,_0x1d0c31,-0x108e+-0x4a*-0x6f+-0xf88),le['IDENTITY'],new I(_0x2fcf08,-_0x50ffbf,-0x15ee+0x1781+0x1*-0x193)),_0x4ae0c2||(_0x4ae0c2=new In(),_0x4ae0c2['cull']=xt,_0x4ae0c2['setParamet'+'er']('colorMap',_0x357b25),_0x4ae0c2['shaderDesc']=_0x486838?this['scene']['immediate']['getTexture'+'ShaderDesc'](_0x357b25['encoding']):this['scene']['immediate']['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](),_0x4ae0c2['update']()),this['drawQuad'](_0x291510,_0x4ae0c2,_0x5ab631);}['drawDepthT'+'exture'](_0xc5c2f4,_0xc8db8a,_0x5bb9eb,_0x51ea7f,_0x530458=this['scene']['defaultDra'+'wLayer']){const _0x3feac1=new In();_0x3feac1['cull']=xt,_0x3feac1['shaderDesc']=this['scene']['immediate']['getDepthTe'+'xtureShade'+'rDesc'](),_0x3feac1['update'](),this['drawTextur'+'e'](_0xc5c2f4,_0xc8db8a,_0x5bb9eb,_0x51ea7f,null,_0x3feac1,_0x530458);}['destroy'](){var _0x434abc,_0x5b10cc,_0x5688ea,_0x353440;if(this['_inFrameUp'+'date']){this['_destroyRe'+'quested']=!(-0x1232+-0x23ca+0x35fc);return;}const _0x444829=this['graphicsDe'+'vice']['canvas']['id'];this['fire']('destroy',this),this['off']('librariesl'+'oaded'),typeof document<'u'&&(document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x70*0x53+-0x127e+0x36cf*0x1)),document['removeEven'+'tListener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1*0x7dd+-0x1d09+0xd*0x1a1)),document['removeEven'+'tListener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x20da+-0x1711+-0x9c8)),document['removeEven'+'tListener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(0xe40+0x1946+0x97*-0x43))),this['_visibilit'+'yChangeHan'+'dler']=null,this['root']['destroy'](),this['root']=null,this['mouse']&&(this['mouse']['off'](),this['mouse']['detach'](),this['mouse']=null),this['keyboard']&&(this['keyboard']['off'](),this['keyboard']['detach'](),this['keyboard']=null),this['touch']&&(this['touch']['off'](),this['touch']['detach'](),this['touch']=null),this['elementInp'+'ut']&&(this['elementInp'+'ut']['detach'](),this['elementInp'+'ut']=null),this['gamepads']&&(this['gamepads']['destroy'](),this['gamepads']=null),this['controller']&&(this['controller']=null),this['systems']['destroy'](),this['scene']['layers']&&this['scene']['layers']['destroy']();const _0x10ca9f=this['assets']['list']();for(let _0x5ca29a=-0x25b6+-0x1197*0x1+0x374d*0x1;_0x5ca29a<_0x10ca9f['length'];_0x5ca29a++)_0x10ca9f[_0x5ca29a]['unload'](),_0x10ca9f[_0x5ca29a]['off']();this['assets']['off'](),this['bundles']['destroy'](),this['bundles']=null,this['i18n']['destroy'](),this['i18n']=null;const _0x3e6a54=this['loader']['getHandler']('script');_0x3e6a54==null||_0x3e6a54['clearCache'](),this['loader']['destroy'](),this['loader']=null,this['scene']['destroy'](),this['scene']=null,this['systems']=null,this['context']=null,this['scripts']['destroy'](),this['scripts']=null,this['scenes']['destroy'](),this['scenes']=null,(_0x434abc=this['lightmappe'+'r'])==null||_0x434abc['destroy'](),this['lightmappe'+'r']=null,this['_batcher']&&(this['_batcher']['destroy'](),this['_batcher']=null),this['_entityInd'+'ex']={},this['defaultLay'+'erDepth']['onDisable']=null,this['defaultLay'+'erDepth']['onEnable']=null,this['defaultLay'+'erDepth']=null,this['defaultLay'+'erWorld']=null,(_0x5b10cc=this['xr'])==null||_0x5b10cc['end'](),(_0x5688ea=this['xr'])==null||_0x5688ea['destroy'](),this['renderer']['destroy'](),this['renderer']=null,this['graphicsDe'+'vice']['destroy'](),this['graphicsDe'+'vice']=null,this['tick']=null,this['off'](),(_0x353440=this['_soundMana'+'ger'])==null||_0x353440['destroy'](),this['_soundMana'+'ger']=null,zr['_applicati'+'ons'][_0x444829]=null,Zr()===this&&Nf(null),zr['cancelTick'](this);}static['cancelTick'](_0x2ec1e8){_0x2ec1e8['frameReque'+'stId']&&(window['cancelAnim'+'ationFrame'](_0x2ec1e8['frameReque'+'stId']),_0x2ec1e8['frameReque'+'stId']=void(0x1cf*-0x2+-0x183*0x15+0xb*0x337));}['getEntityF'+'romIndex'](_0x19976b){return this['_entityInd'+'ex'][_0x19976b];}['_registerS'+'ceneImmedi'+'ate'](_0x369c37){this['on']('postrender',_0x369c37['immediate']['onPostRend'+'er'],_0x369c37['immediate']);}};h(zr,'_applicati'+'ons',{});let ec=zr;const dD=function(_0x53a92b){const _0x55d61b=_0x53a92b;return function(_0x46bafe,_0x4b66fc){var _0x3d6f71,_0x753785,_0x7484e8,_0x5f4d3d;if(!_0x55d61b['graphicsDe'+'vice'])return;_0x55d61b['frameReque'+'stId']&&((_0x753785=(_0x3d6f71=_0x55d61b['xr'])==null?void(0x2053+0x19e+-0x21f1):_0x3d6f71['session'])==null||_0x753785['cancelAnim'+'ationFrame'](_0x55d61b['frameReque'+'stId']),cancelAnimationFrame(_0x55d61b['frameReque'+'stId']),_0x55d61b['frameReque'+'stId']=null),_0x55d61b['_inFrameUp'+'date']=!(0x1304*0x1+-0x101*-0x25+-0xb*0x51b),Nf(_0x55d61b);const _0x21abb9=_0x55d61b['_processTi'+'mestamp'](_0x46bafe)||de(),_0xf9123d=_0x21abb9-(_0x55d61b['_time']||_0x21abb9);let _0x4047cc=_0xf9123d/(-0x21d3+0x1de9+-0x4d*-0x1a);if(_0x4047cc=Y['clamp'](_0x4047cc,-0x2549+0x26dd+0x65*-0x4,_0x55d61b['maxDeltaTi'+'me']),_0x4047cc*=_0x55d61b['timeScale'],_0x55d61b['_time']=_0x21abb9,(_0x7484e8=_0x55d61b['xr'])!=null&&_0x7484e8['session']?_0x55d61b['frameReque'+'stId']=_0x55d61b['xr']['session']['requestAni'+'mationFram'+'e'](_0x55d61b['tick']):_0x55d61b['frameReque'+'stId']=Me['browser']||Me['worker']?requestAnimationFrame(_0x55d61b['tick']):null,_0x55d61b['graphicsDe'+'vice']['contextLos'+'t'])return;_0x55d61b['_fillFrame'+'StatsBasic'](_0x21abb9,_0x4047cc,_0xf9123d),_0x55d61b['_fillFrame'+'Stats'](),_0x55d61b['fire']('frameupdat'+'e',_0xf9123d);let _0x55ffb8=!(-0x1*-0xa97+0x2*0x11e7+-0x4*0xb99);_0x4b66fc?(_0x55ffb8=!((_0x5f4d3d=_0x55d61b['xr'])!=null&&_0x5f4d3d['update'](_0x4b66fc)),_0x55d61b['graphicsDe'+'vice']['defaultFra'+'mebuffer']=_0x4b66fc['session']['renderStat'+'e']['baseLayer']['framebuffe'+'r']):_0x55d61b['graphicsDe'+'vice']['defaultFra'+'mebuffer']=null,!_0x55ffb8&&!_0x55d61b['stopSort']&&(M['trace'](e0,'----\x20Frame'+'\x20'+_0x55d61b['frame']),M['trace'](sd,'--\x20UpdateS'+'tart\x20'+de()['toFixed'](-0x83*0xd+-0xfd*0xb+-0x21*-0x88)+'ms'),_0x55d61b['update'](_0x4047cc),_0x55d61b['fire']('framerende'+'r'),(_0x55d61b['autoRender']||_0x55d61b['renderNext'+'Frame'])&&(M['trace'](sd,'--\x20RenderS'+'tart\x20'+de()['toFixed'](0x8*-0x4b1+-0x376*0x1+0x100*0x29)+'ms'),_0x55d61b['render'](),_0x55d61b['renderNext'+'Frame']=!(0x1c36+0x222a+-0x7*0x8e9),M['trace'](sd,'--\x20RenderE'+'nd\x20'+de()['toFixed'](-0x3a*-0x95+0xce7*-0x1+-0x14d9)+'ms')),_0x55d61b['fire']('frameend')),_0x55d61b['_inFrameUp'+'date']=!(0x19*0x15c+0xde3+0x45a*-0xb),_0x55d61b['_destroyRe'+'quested']&&_0x55d61b['destroy']();};};class fD{constructor(){h(this,'elementInp'+'ut'),h(this,'keyboard'),h(this,'mouse'),h(this,'touch'),h(this,'gamepads'),h(this,'scriptPref'+'ix'),h(this,'assetPrefi'+'x'),h(this,'scriptsOrd'+'er'),h(this,'soundManag'+'er'),h(this,'graphicsDe'+'vice'),h(this,'lightmappe'+'r'),h(this,'batchManag'+'er'),h(this,'xr'),h(this,'componentS'+'ystems',[]),h(this,'resourceHa'+'ndlers',[]);}}const Zn=new xu();class Xy{constructor(_0x572cc5,_0x601604,_0xbb1af8){this['scene']=_0x572cc5,this['light']=_0x601604,this['store'](),_0x601604['numCascade'+'s']=0x2*-0x327+0x95a+0x30b*-0x1,this['scene']['clusteredL'+'ightingEna'+'bled']&&!_0xbb1af8['shadowsEna'+'bled']&&(_0x601604['castShadow'+'s']=!(-0x36c*0x4+0xce5*-0x3+0x3460)),_0x601604['type']!==ve&&(_0x601604['_node']['getWorldTr'+'ansform'](),_0x601604['getBoundin'+'gSphere'](Zn),this['lightBound'+'s']=new Ie(),this['lightBound'+'s']['center']['copy'](Zn['center']),this['lightBound'+'s']['halfExtent'+'s']['set'](Zn['radius'],Zn['radius'],Zn['radius']));}['store'](){this['mask']=this['light']['mask'],this['shadowUpda'+'teMode']=this['light']['shadowUpda'+'teMode'],this['enabled']=this['light']['enabled'],this['intensity']=this['light']['intensity'],this['rotation']=this['light']['_node']['getLocalRo'+'tation']()['clone'](),this['numCascade'+'s']=this['light']['numCascade'+'s'],this['castShadow'+'s']=this['light']['_castShado'+'ws'];}['restore'](){const _0x53429b=this['light'];_0x53429b['mask']=this['mask'],_0x53429b['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x53429b['enabled']=this['enabled'],_0x53429b['intensity']=this['intensity'],_0x53429b['_node']['setLocalRo'+'tation'](this['rotation']),_0x53429b['numCascade'+'s']=this['numCascade'+'s'],_0x53429b['_castShado'+'ws']=this['castShadow'+'s'];}['startBake'](){this['light']['enabled']=!(0x59*0x37+0xc82+-0x3*0xa8b),this['light']['_destroySh'+'adowMap'](),this['light']['beginFrame']();}['endBake'](_0x1b1237){const _0x4f2989=this['light'];_0x4f2989['enabled']=!(0x13*0x5d+-0x2118+0x1df*0xe),_0x4f2989['shadowMap']&&(_0x4f2989['shadowMap']['cached']&&_0x1b1237['add'](_0x4f2989,_0x4f2989['shadowMap']),_0x4f2989['shadowMap']=null);}}const jl=new J();class uD extends Xy{constructor(_0x233563,_0x5f0b5f){super(_0x233563['scene'],_0x5f0b5f,_0x233563['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['type']===ve?this['light']['bakeNumSam'+'ples']:-0x9b9*0x1+0x6d9+-0x43*-0xb;}['prepareVir'+'tualLight'](_0x285350,_0xeed930){const _0x27c443=this['light'];if(_0x27c443['_node']['setLocalRo'+'tation'](this['rotation']),_0x285350>-0xd26+0x150b+-0x7e5){const _0x13c1be=_0x27c443['bakeArea'];fl['circlePoin'+'tDetermini'+'stic'](jl,_0x285350,_0xeed930),jl['mulScalar'](_0x13c1be*(-0x17e5*0x1+0x1243+-0x5a2*-0x1+0.5)),_0x27c443['_node']['rotateLoca'+'l'](jl['x'],-0xd9e+0x22b+-0x3d1*-0x3,jl['y']);}_0x27c443['_node']['getWorldTr'+'ansform']();const _0x1fe42b=-0x8*0x226+0x4dc*-0x3+0x1fc6+0.20000000000000018,_0xd385ac=Math['pow'](this['intensity'],_0x1fe42b);_0x27c443['intensity']=Math['pow'](_0xd385ac/_0xeed930,(-0xb1*0x13+-0x1*0x21b3+-0x2ed7*-0x1)/_0x1fe42b);}}const H_=new I();class W_ extends Xy{constructor(_0x4017d9){const _0x3845e4=_0x4017d9['scene'],_0x5d3b30=new ot('AmbientLig'+'ht');_0x5d3b30['addCompone'+'nt']('light',{'type':'directiona'+'l','affectDynamic':!(-0xfc*-0xe+0x10bf+-0x1e87),'affectLightmapped':!(0x5c1*0x3+-0x29+-0x1119),'bake':!(0xac4+0x1c12+-0x2*0x136b),'bakeNumSamples':_0x3845e4['ambientBak'+'eNumSample'+'s'],'castShadows':!(-0x1c72*0x1+-0xf55+0x2bc7),'normalOffsetBias':0.05,'shadowBias':0.2,'shadowDistance':0x1,'shadowResolution':0x800,'shadowType':ks,'color':ie['WHITE'],'intensity':0x1,'bakeDir':!(-0x4f*-0x2b+-0x1a89+0xd45)}),super(_0x3845e4,_0x5d3b30['light']['light'],_0x4017d9['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['bakeNumSam'+'ples'];}['prepareVir'+'tualLight'](_0x2df8b8,_0xc4b603){fl['spherePoin'+'tDetermini'+'stic'](H_,_0x2df8b8,_0xc4b603,0x1*0x247+0xde9+-0x1030,this['scene']['ambientBak'+'eSpherePar'+'t']),this['light']['_node']['lookAt'](H_['mulScalar'](-(-0x1*0xf27+-0xf1*0x22+-0x1*-0x2f2a))),this['light']['_node']['rotateLoca'+'l'](-0x1*0xf37+-0x2080+0x3011,-0x43b+0x1263+-0x4*0x38a,-0xd*0x193+0x2*-0x10ca+0x360b);const _0x490abf=-0xe2*-0xf+0x7ad+-0x1*0x14e9+0.20000000000000018,_0x1b8f05=(-0x1*-0x2552+-0x2*0x76+0x4*-0x919)*Math['PI']*this['scene']['ambientBak'+'eSpherePar'+'t'],_0x591b68=Math['pow'](_0x1b8f05,_0x490abf);this['light']['intensity']=Math['pow'](_0x591b68/_0xc4b603,(-0x2064*-0x1+-0x1c*-0x41+-0x1*0x277f)/_0x490abf);}}class Yl{constructor(_0x5aaecd,_0x3fa93e=null){this['node']=_0x5aaecd,this['component']=_0x5aaecd['render']||_0x5aaecd['model'],_0x3fa93e=_0x3fa93e||this['component']['meshInstan'+'ces'],this['store'](),this['meshInstan'+'ces']=_0x3fa93e,this['bounds']=null,this['renderTarg'+'ets']=[];}['store'](){this['castShadow'+'s']=this['component']['castShadow'+'s'];}['restore'](){this['component']['castShadow'+'s']=this['castShadow'+'s'];}}const mD='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afl'+'oat\x20normpd'+'f3(in\x20vec3'+'\x20v,\x20in\x20flo'+'at\x20sigma)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x200.39894'+'\x20*\x20exp(-0.'+'5\x20*\x20dot(v,'+'\x20v)\x20/\x20(sig'+'ma\x20*\x20sigma'+'))\x20/\x20sigma'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBM'+'(vec4\x20rgbm'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20color\x20='+'\x20(8.0\x20*\x20rg'+'bm.a)\x20*\x20rg'+'bm.rgb;\x0a\x20\x20'+'\x20\x20return\x20c'+'olor\x20*\x20col'+'or;\x0a}\x0a\x0aflo'+'at\x20saturat'+'e(float\x20x)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeRG'+'BM(vec3\x20co'+'lor)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20encoded'+';\x0a\x20\x20\x20\x20enco'+'ded.rgb\x20=\x20'+'pow(color.'+('rgb,\x20vec3('+'0.5));\x0a\x20\x20\x20'+'\x20encoded.r'+'gb\x20*=\x201.0\x20'+'/\x208.0;\x0a\x0a\x20\x20'+'\x20\x20encoded.'+'a\x20=\x20satura'+'te(\x20max(\x20m'+'ax(\x20encode'+'d.r,\x20encod'+'ed.g\x20),\x20ma'+'x(\x20encoded'+'.b,\x201.0\x20/\x20'+'255.0\x20)\x20)\x20'+');\x0a\x20\x20\x20\x20enc'+'oded.a\x20=\x20c'+'eil(encode'+'d.a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20enc'+'oded.rgb\x20/'+'=\x20encoded.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20encode'+'d;\x0a}\x0a\x0avec3'+'\x20decode(ve'+'c4\x20pixel)\x20'+'{\x0a\x20\x20\x20\x20#if\x20'+'HDR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20p'+'ixel.rgb;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eRGBM(pixe'+'l);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0abo'+'ol\x20isUsed('+'vec4\x20pixel'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20HDR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20any(great'+'erThan(pix'+'el.rgb,\x20ve'+'c3(0.0)));'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20pixe'+'l.a\x20>\x200.0;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0avaryi'+'ng\x20vec2\x20vU'+'v0;\x0aunifor'+'m\x20sampler2'+'D\x20source;\x0a'+'uniform\x20ve'+'c2\x20pixelOf'+'fset;\x0aunif'+'orm\x20vec2\x20s'+'igmas;\x0auni'+'form\x20float'+'\x20bZnorm;\x0au'+'niform\x20flo'+'at\x20kernel['+'{MSIZE}];\x0a'+'\x0avoid\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20ve'+'c4\x20pixel\x20='+'\x20texture2D'+'Lod(source'+',\x20vUv0,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20/'+'/\x20lightmap'+'\x20specific\x20'+'optimizati'+'on\x20-\x20skip\x20'+'pixels\x20tha'+'t\x20were\x20not'+'\x20baked\x0a\x20\x20\x20'+'\x20//\x20this\x20a'+'lso\x20allows'+'\x20dilate\x20fi'+'lter\x20that\x20'+'work\x20on\x20th'+'e\x20output\x20o'+'f\x20this\x20to\x20'+'work\x20corre'+'ctly,\x20as\x20i'+'t\x20depends\x20'+'on\x20.a\x20bein'+'g\x20zero\x0a\x20\x20\x20'+'\x20//\x20to\x20dil'+'ate,\x20which'+'\x20the\x20follo'+'wing\x20blur\x20'+'filter\x20wou'+'ld\x20otherwi'+'se\x20modify\x0a')+('\x20\x20\x20\x20if\x20(!i'+'sUsed(pixe'+'l))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20p'+'ixel;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20sigma\x20-'+'\x20controls\x20'+'blurriness'+'\x20based\x20on\x20'+'a\x20pixel\x20di'+'stance\x0a\x20\x20\x20'+'\x20float\x20sig'+'ma\x20=\x20sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'float\x20bSig'+'ma\x20=\x20sigma'+'s.y;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20pixel'+'Hdr\x20=\x20deco'+'de(pixel);'+'\x0a\x20\x20\x20\x20vec3\x20'+'accumulate'+'dHdr\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20float\x20ac'+'cumulatedF'+'actor\x20=\x200.'+'000001;\x20\x20/'+'/\x20avoid\x20di'+'vision\x20by\x20'+'zero\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20ou'+'t\x20the\x20texe'+'ls\x0a\x20\x20\x20\x20con'+'st\x20int\x20kSi'+'ze\x20=\x20({MSI'+'ZE}\x20-\x201)\x20/'+'\x202;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x20-kSize;\x20i'+'\x20<=\x20kSize;'+'\x20++i)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20j\x20=\x20-'+'kSize;\x20j\x20<'+'=\x20kSize;\x20+'+'+j)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sample'+'\x20the\x20pixel'+'\x20with\x20offs'+'et\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'coord\x20=\x20vU'+'v0\x20+\x20vec2('+'float(i),\x20'+'float(j))\x20'+'*\x20pixelOff'+'set;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20pix\x20=\x20te'+'xture2DLod'+'(source,\x20c'+'oord,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x20-\x20o'+'nly\x20use\x20ba'+'ked\x20pixels'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(isU'+'sed(pix))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20hdr\x20=\x20d'+'ecode(pix)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20bilatera'+'l\x20factors\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20factor\x20='+'\x20kernel[kS'+'ize\x20+\x20j]\x20*'+'\x20kernel[kS')+('ize\x20+\x20i];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fact'+'or\x20*=\x20norm'+'pdf3(hdr\x20-'+'\x20pixelHdr,'+'\x20bSigma)\x20*'+'\x20bZnorm;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ccumulate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20accu'+'mulatedHdr'+'\x20+=\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20+=\x20facto'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20finalHD'+'R\x20=\x20accumu'+'latedHdr\x20/'+'\x20accumulat'+'edFactor;\x0a'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(finalHDR,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'encodeRGBM'+'(finalHDR)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a'),pD='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0auniform\x20'+'sampler2D\x20'+'source;\x0aun'+'iform\x20vec2'+'\x20pixelOffs'+'et;\x0a\x0abool\x20'+'isUsed(vec'+'4\x20pixel)\x20{'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20an'+'y(greaterT'+'han(pixel.'+'rgb,\x20vec3('+'0.0)));\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20pixel.a'+'\x20>\x200.0;\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20c'+'\x20=\x20texture'+'2DLod(sour'+'ce,\x20vUv0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'c\x20=\x20isUsed'+'(c)\x20?\x20c\x20:\x20'+'texture2DL'+'od(source,'+'\x20vUv0\x20-\x20pi'+'xelOffset,'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20v'+'ec2(0,\x20-pi'+'xelOffset.'+'y),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(pix'+'elOffset.x'+',\x20-pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(-pixelOf'+'fset.x,\x200)'+',\x200.0);\x0a\x20\x20'+'\x20\x20c\x20=\x20isUs'+'ed(c)\x20?\x20c\x20'+':\x20texture2'+'DLod(sourc'+'e,\x20vUv0\x20+\x20'+'vec2(pixel'+'Offset.x,\x20'+'0),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(-pi'+'xelOffset.'+'x,\x20pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(0,\x20pixel'+'Offset.y),'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20p'+'ixelOffset'+',\x200.0);\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20c;\x0a'+'}\x0a',_D='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afn'+'\x20normpdf3('+'v:\x20vec3f,\x20'+'sigma:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x200.39894\x20'+'*\x20exp(-0.5'+'\x20*\x20dot(v,\x20'+'v)\x20/\x20(sigm'+'a\x20*\x20sigma)'+')\x20/\x20sigma;'+'\x0a}\x0a\x0afn\x20dec'+'odeRGBM(rg'+'bm:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20(8'+'.0\x20*\x20rgbm.'+'a)\x20*\x20rgbm.'+'rgb;\x0a\x20\x20\x20\x20r'+'eturn\x20colo'+'r\x20*\x20color;'+'\x0a}\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeRGBM'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'var\x20encode'+'d:\x20vec4f;\x0a'+'\x20\x20\x20\x20let\x20rg'+'b_processe'+('d\x20=\x20pow(co'+'lor.rgb,\x20v'+'ec3f(0.5))'+'\x20*\x20(1.0\x20/\x20'+'8.0);\x0a\x20\x20\x20\x20'+'encoded\x20=\x20'+'vec4f(rgb_'+'processed,'+'\x200.0);\x0a\x0a\x20\x20'+'\x20\x20let\x20max_'+'g_b\x20=\x20max('+'\x20encoded.g'+',\x20max(\x20enc'+'oded.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20);\x0a\x20\x20\x20\x20l'+'et\x20max_rgb'+'\x20=\x20max(\x20en'+'coded.r,\x20m'+'ax_g_b\x20);\x0a'+'\x20\x20\x20\x20encode'+'d.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20enco'+'ded.a\x20=\x20ce'+'il(encoded'+'.a\x20*\x20255.0'+')\x20/\x20255.0;'+'\x0a\x0a\x20\x20\x20\x20enco'+'ded\x20=\x20vec4'+'f(encoded.'+'rgb\x20/\x20enco'+'ded.a,\x20enc'+'oded.a);\x0a\x20'+'\x20\x20\x20return\x20'+'encoded;\x0a}'+'\x0a\x0afn\x20decod'+'e(pixel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20pixel.'+'rgb;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'decodeRGBM'+'(pixel);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a\x0afn\x20isUs'+'ed(pixel:\x20'+'vec4f)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0ava'+'r\x20source:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20sourceSam'+'pler:\x20samp'+'ler;\x0aunifo'+'rm\x20kernel:'+'\x20array<f32'+',\x20{MSIZE}>'+';\x0auniform\x20'+'pixelOffse'+'t:\x20vec2f;\x0a'+'uniform\x20si'+'gmas:\x20vec2'+'f;\x0auniform'+'\x20bZnorm:\x20f'+'32;\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20pixel\x20'+'=\x20textureS'+'ampleLevel'+'(source,\x20s'+'ourceSampl'+'er,\x20input.')+('vUv0,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'lightmap\x20s'+'pecific\x20op'+'timization'+'\x20-\x20skip\x20pi'+'xels\x20that\x20'+'were\x20not\x20b'+'aked\x0a\x20\x20\x20\x20/'+'/\x20this\x20als'+'o\x20allows\x20d'+'ilate\x20filt'+'er\x20that\x20wo'+'rk\x20on\x20the\x20'+'output\x20of\x20'+'this\x20to\x20wo'+'rk\x20correct'+'ly,\x20as\x20it\x20'+'depends\x20on'+'\x20.a\x20being\x20'+'zero\x0a\x20\x20\x20\x20/'+'/\x20to\x20dilat'+'e,\x20which\x20t'+'he\x20followi'+'ng\x20blur\x20fi'+'lter\x20would'+'\x20otherwise'+'\x20modify\x0a\x20\x20'+'\x20\x20if\x20(!isU'+'sed(pixel)'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20pix'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20range\x20sig'+'ma\x20-\x20contr'+'ols\x20blurri'+'ness\x20based'+'\x20on\x20a\x20pixe'+'l\x20distance'+'\x0a\x20\x20\x20\x20let\x20s'+'igma\x20=\x20uni'+'form.sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'let\x20bSigma'+'\x20=\x20uniform'+'.sigmas.y;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'pixelHdr\x20='+'\x20decode(pi'+'xel);\x0a\x20\x20\x20\x20'+'var\x20accumu'+'latedHdr\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20var'+'\x20accumulat'+'edFactor\x20='+'\x200.000001;'+'\x20\x20//\x20avoid'+'\x20division\x20'+'by\x20zero\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20out\x20the\x20t'+'exels\x0a\x20\x20\x20\x20'+'const\x20kSiz'+'e\x20=\x20({MSIZ'+'E}\x20-\x201)\x20/\x20'+'2;\x0a\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x20-kSiz'+'e;\x20i\x20<=\x20kS'+'ize;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(var\x20j:\x20i3'+'2\x20=\x20-kSize'+';\x20j\x20<=\x20kSi'+'ze;\x20j\x20=\x20j\x20'+'+\x201)\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20pixel\x20'+'with\x20offse'+'t\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20co'+'ord\x20=\x20inpu'+'t.vUv0\x20+\x20v'+'ec2f(f32(i')+('),\x20f32(j))'+'\x20*\x20uniform'+'.pixelOffs'+'et;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'pix\x20=\x20text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20co'+'ord,\x200.0);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x20-\x20on'+'ly\x20use\x20bak'+'ed\x20pixels\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(isUs'+'ed(pix))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20hdr\x20=\x20dec'+'ode(pix);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'bilateral\x20'+'factors\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20fa'+'ctor\x20=\x20uni'+'form.kerne'+'l[u32(kSiz'+'e\x20+\x20j)].el'+'ement\x20*\x20un'+'iform.kern'+'el[u32(kSi'+'ze\x20+\x20i)].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20factor'+'\x20=\x20factor\x20'+'*\x20normpdf3'+'(hdr\x20-\x20pix'+'elHdr,\x20bSi'+'gma)\x20*\x20uni'+'form.bZnor'+'m;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20accumul'+'ate\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'accumulate'+'dHdr\x20=\x20acc'+'umulatedHd'+'r\x20+\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20=\x20accumu'+'latedFacto'+'r\x20+\x20factor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20let'+'\x20finalHDR\x20'+'=\x20accumula'+'tedHdr\x20/\x20a'+'ccumulated'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20#if\x20HDR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalHDR,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20e'+'ncodeRGBM('+'finalHDR);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),gD='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0avar\x20so'+'urce:\x20text'+'ure_2d<f32'+'>;\x0avar\x20sou'+'rceSampler'+':\x20sampler;'+'\x0auniform\x20p'+'ixelOffset'+':\x20vec2f;\x0a\x0a'+'fn\x20isUsed('+'pixel:\x20vec'+'4f)\x20->\x20boo'+'l\x20{\x0a\x20\x20\x20\x20#i'+'fdef\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0a@fr'+'agment\x0afn\x20'+'fragmentMa'+'in(input:\x20'+'FragmentIn'+'put)\x20->\x20Fr'+'agmentOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20c:\x20vec4'+'f\x20=\x20textur'+'eSampleLev'+'el(source,'+'\x20sourceSam'+'pler,\x20inpu'+'t.vUv0,\x200.'+'0);\x0a\x20\x20\x20\x20c\x20'+'=\x20select(t'+'extureSamp'+'leLevel(so'+'urce,\x20sour'+'ceSampler,'+'\x20input.vUv'+'0\x20-\x20unifor'+'m.pixelOff'+'set,\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20-un'+'iform.pixe'+'lOffset.y)'+',\x200.0),\x20c,'+'\x20isUsed(c)'+');\x0a\x20\x20\x20\x20c\x20='+'\x20select(te'+'xtureSampl'+'eLevel(sou'+'rce,\x20sourc'+'eSampler,\x20'+'input.vUv0'+'\x20+\x20vec2f(u'+'niform.pix'+'elOffset.x'+',\x20-uniform'+'.pixelOffs'+'et.y),\x200.0'+'),\x20c,\x20isUs'+'ed(c));\x0a\x20\x20'+'\x20\x20c\x20=\x20sele'+'ct(texture'+'SampleLeve'+'l(source,\x20'+'sourceSamp'+'ler,\x20input'+'.vUv0\x20+\x20ve'+'c2f(-unifo'+'rm.pixelOf'+'fset.x,\x200.'+'0),\x200.0),\x20'+'c,\x20isUsed('+'c));\x0a\x20\x20\x20\x20c'+'\x20=\x20select('+'textureSam'+'pleLevel(s'+'ource,\x20sou'+'rceSampler'+',\x20input.vU'+'v0\x20+\x20vec2f'+'(uniform.p'+('ixelOffset'+'.x,\x200.0),\x20'+'0.0),\x20c,\x20i'+'sUsed(c));'+'\x0a\x20\x20\x20\x20c\x20=\x20s'+'elect(text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20in'+'put.vUv0\x20+'+'\x20vec2f(-un'+'iform.pixe'+'lOffset.x,'+'\x20uniform.p'+'ixelOffset'+'.y),\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20uni'+'form.pixel'+'Offset.y),'+'\x200.0),\x20c,\x20'+'isUsed(c))'+';\x0a\x20\x20\x20\x20c\x20=\x20'+'select(tex'+'tureSample'+'Level(sour'+'ce,\x20source'+'Sampler,\x20i'+'nput.vUv0\x20'+'+\x20uniform.'+'pixelOffse'+'t,\x200.0),\x20c'+',\x20isUsed(c'+'));\x0a\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20FragmentO'+'utput;\x0a\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20c;\x0a\x20'+'\x20\x20\x20return\x20'+'output;\x0a}\x0a'),$_=0x2*0xbdf+-0x1add+-0x2*-0x197,SD={'glslBilateralDeNoisePS':mD,'glslDilatePS':pD},yD={'wgslBilateralDeNoisePS':_D,'wgslDilatePS':gD};class vD{constructor(_0x3bb572){h(this,'shaderDila'+'te',[]),h(this,'shaderDeno'+'ise',[]),(this['device']=_0x3bb572,Ce['get'](this['device'],ze)['add'](SD),Ce['get'](this['device'],st)['add'](yD),this['constantTe'+'xSource']=_0x3bb572['scope']['resolve']('source'),this['constantPi'+'xelOffset']=_0x3bb572['scope']['resolve']('pixelOffse'+'t'),this['pixelOffse'+'t']=new Float32Array(0x1*0x1f3c+0x1ed1*0x1+-0x3e0b),this['sigmas']=null,this['constantSi'+'gmas']=null,this['kernel']=null);}['setSourceT'+'exture'](_0x3b3f4e){this['constantTe'+'xSource']['setValue'](_0x3b3f4e);}['prepare'](_0x3a1da5,_0x259418){this['pixelOffse'+'t'][-0x1344+0x893+-0x187*-0x7]=(0x8ba+-0x2a0+0x619*-0x1)/_0x3a1da5,this['pixelOffse'+'t'][-0x16a9+0x21*-0xcd+0x3117]=(0xb4a+-0x44d*0x1+0x95*-0xc)/_0x259418,this['constantPi'+'xelOffset']['setValue'](this['pixelOffse'+'t']);}['prepareDen'+'oise'](_0x3e3e14,_0x3fe379,_0x323792){const _0x4dbfac=_0x323792?0x6b0+-0x1c17+0x1567:-0x2*-0xc6d+-0x3e*0x8b+0x8d1*0x1;if(!this['shaderDeno'+'ise'][_0x4dbfac]){const _0x3d1bd1=new Map();_0x3d1bd1['set']('{MSIZE}',-0x6b9+-0x6dc+0xda4),_0x323792&&_0x3d1bd1['set']('HDR',''),this['shaderDeno'+'ise'][_0x4dbfac]=Ut['createShad'+'er'](this['device'],{'uniqueName':'lmBilatera'+'lDeNoise-'+(_0x323792?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],ze)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],st)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':Ce['get'](this['device'],ze)['get']('glslBilate'+'ralDeNoise'+'PS'),'fragmentWGSL':Ce['get'](this['device'],st)['get']('wgslBilate'+'ralDeNoise'+'PS'),'fragmentDefines':_0x3d1bd1}),this['sigmas']=new Float32Array(-0x1*0x2217+-0x2a+-0x31*-0xb3),this['constantSi'+'gmas']=this['device']['scope']['resolve']('sigmas'),this['constantKe'+'rnel']=this['device']['scope']['resolve']('kernel[0]'),this['bZnorm']=this['device']['scope']['resolve']('bZnorm');}this['sigmas'][0x607*-0x1+0x19c5*-0x1+-0x2e4*-0xb]=_0x3e3e14,this['sigmas'][-0x6d*-0x55+-0x440+-0x1ff0]=_0x3fe379,this['constantSi'+'gmas']['setValue'](this['sigmas']),this['evaluateDe'+'noiseUnifo'+'rms'](_0x3e3e14,_0x3fe379);}['getDenoise'](_0x49ade8){const _0x30b345=_0x49ade8?0x15d5+0x38f*0x8+-0x324d:-0x3e9+-0x7*-0x4f+-0x1c1*-0x1;return this['shaderDeno'+'ise'][_0x30b345];}['getDilate'](_0x528f1b,_0x3e2308){const _0x178a9f=_0x3e2308?-0x5*0x3df+-0x1de9+0x18a2*0x2:0xa8+0x681+-0x728;if(!this['shaderDila'+'te'][_0x178a9f]){const _0x51797b=_0x3e2308?'#define\x20HD'+'R\x0a':'';this['shaderDila'+'te'][_0x178a9f]=Ut['createShad'+'er'](_0x528f1b,{'uniqueName':'lmDilate-'+(_0x3e2308?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],ze)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],st)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':_0x51797b+Ce['get'](this['device'],ze)['get']('glslDilate'+'PS'),'fragmentWGSL':_0x51797b+Ce['get'](this['device'],st)['get']('wgslDilate'+'PS')});}return this['shaderDila'+'te'][_0x178a9f];}['evaluateDe'+'noiseUnifo'+'rms'](_0x2844ff,_0xe13efd){function _0xc4f2a6(_0x15279f,_0x1bff68){return(0x223*-0xe+-0x25d5+0x2f*0x171+0.39894)*Math['exp'](-(0x2*0x7ff+0x854+0x16*-0x11b+0.5)*_0x15279f*_0x15279f/(_0x1bff68*_0x1bff68))/_0x1bff68;}this['kernel']=this['kernel']||new Float32Array($_);const _0x4d4a4e=this['kernel'],_0x29cb9b=Math['floor'](($_-(-0x740+-0x2*-0xbc3+-0x1045))/(0x500+-0x4*0x45a+-0xe*-0xe3));for(let _0x321890=-0xf79+-0x11fb+0x2174;_0x321890<=_0x29cb9b;++_0x321890){const _0x4a958e=_0xc4f2a6(_0x321890,_0x2844ff);_0x4d4a4e[_0x29cb9b+_0x321890]=_0x4a958e,_0x4d4a4e[_0x29cb9b-_0x321890]=_0x4a958e;}this['constantKe'+'rnel']['setValue'](this['kernel']);const _0x3c1da6=(-0xe4d*0x2+0x4ca*0x1+0x17d1)/_0xc4f2a6(-0x7fb+0x2*0xfb5+0x1*-0x176f,_0xe13efd);this['bZnorm']['setValue'](_0x3c1da6);}}class xD extends fs{constructor(_0x2095aa,_0x2de313,_0x53dbfa,_0x14893b,_0x155bb5,_0x3f2cad){super(_0x2095aa),h(this,'viewBindGr'+'oups',[]),(this['renderer']=_0x2de313,this['camera']=_0x53dbfa,this['worldClust'+'ers']=_0x14893b,this['receivers']=_0x155bb5,this['lightArray']=_0x3f2cad);}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x505dcc=>{_0x505dcc['defaultUni'+'formBuffer']['destroy'](),_0x505dcc['destroy']();}),this['viewBindGr'+'oups']['length']=0x1ed0+-0x1*0x9e2+-0x26*0x8d;}['execute'](){const _0x349ea5=this['device'];Q['pushGpuMar'+'ker'](_0x349ea5,'Lightmappe'+'r');const {renderer:_0x1b809b,camera:_0x5922e5,receivers:_0x30a0dd,renderTarget:_0x41db4b,worldClusters:_0x50782e,lightArray:_0x3e56d9}=this;_0x1b809b['renderForw'+'ardLayer'](_0x5922e5,_0x41db4b,null,void(0x258e+-0xb15*0x2+0x4*-0x3d9),fa,this['viewBindGr'+'oups'],{'meshInstances':_0x30a0dd,'splitLights':_0x3e56d9,'lightClusters':_0x50782e}),Q['popGpuMark'+'er'](_0x349ea5);}}const TD=-0xcd1+-0x5*-0x525+-0x4e8,wD=0x1d16+0x156b+-0x3281,ED=-0x1a15+-0x1*0x4eb+0x1f01,Kl=new I();class AD{constructor(_0x592c57,_0x538c1a,_0x1be332,_0x200823,_0x57c69a){this['device']=_0x592c57,this['root']=_0x538c1a,this['scene']=_0x1be332,this['renderer']=_0x200823,this['assets']=_0x57c69a,this['shadowMapC'+'ache']=_0x200823['shadowMapC'+'ache'],this['_tempSet']=new Set(),this['_initCalle'+'d']=!(-0x12e*0x6+0x1d*0x10c+-0x1747*0x1),this['passMateri'+'als']=[],this['ambientAOM'+'aterial']=null,this['fog']='',this['ambientLig'+'ht']=new ie(),this['renderTarg'+'ets']=new Map(),this['stats']={'renderPasses':0x0,'lightmapCount':0x0,'totalRenderTime':0x0,'forwardTime':0x0,'fboTime':0x0,'shadowMapTime':0x0,'compileTime':0x0,'shadersLinked':0x0};}['destroy'](){var _0x2d587b;Li['decRef'](this['blackTex']),this['blackTex']=null,Li['destroy'](),this['device']=null,this['root']=null,this['scene']=null,this['renderer']=null,this['assets']=null,(_0x2d587b=this['camera'])==null||_0x2d587b['destroy'](),this['camera']=null;}['initBake'](_0x3f1af1){if(this['bakeHDR']=this['scene']['lightmapPi'+'xelFormat']!==Oe,!this['_initCalle'+'d']){this['_initCalle'+'d']=!(0x1*-0xe59+-0xf6*-0x1f+-0xf71),this['lightmapFi'+'lters']=new vD(_0x3f1af1),this['constantBa'+'keDir']=_0x3f1af1['scope']['resolve']('bakeDir'),this['materials']=[],this['blackTex']=new _e(this['device'],{'width':0x4,'height':0x4,'format':Oe,'type':ta,'name':'lightmapBl'+'ack'}),Li['incRef'](this['blackTex']);const _0x102ace=new dl();_0x102ace['clearColor']['set'](0x1b47+0x1a8d+-0x35d4,-0xdc5+-0x25f9+0x33be,-0x1dbb*0x1+-0x1*0x35+0x1df0,-0x15f0+-0x534+-0x2*-0xd92),_0x102ace['clearColor'+'Buffer']=!(-0x2fd+0x1*-0x41c+0x4f*0x17),_0x102ace['clearDepth'+'Buffer']=!(0x263*-0x5+-0x23a1+0x2f91),_0x102ace['clearStenc'+'ilBuffer']=!(-0x1fd*-0x5+0x1*-0xb61+0x7b*0x3),_0x102ace['frustumCul'+'ling']=!(0x1b2f*0x1+0x2*-0xcd4+-0x186),_0x102ace['projection']=hn,_0x102ace['aspectRati'+'o']=0x2*0x1274+0x1cab+-0x4192,_0x102ace['node']=new He(),this['camera']=_0x102ace,this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=ol,this['camera']['shaderPara'+'ms']['toneMappin'+'g']=Tm;}if(this['scene']['clusteredL'+'ightingEna'+'bled']){const _0x390cb1=new Fy(_0x3f1af1['supportsAr'+'eaLights'],_0x3f1af1['maxTexture'+'Size'],()=>{});this['lightingPa'+'rams']=_0x390cb1;const _0xb19ef0=this['scene']['lighting'];_0x390cb1['shadowsEna'+'bled']=_0xb19ef0['shadowsEna'+'bled'],_0x390cb1['shadowAtla'+'sResolutio'+'n']=_0xb19ef0['shadowAtla'+'sResolutio'+'n'],_0x390cb1['cookiesEna'+'bled']=_0xb19ef0['cookiesEna'+'bled'],_0x390cb1['cookieAtla'+'sResolutio'+'n']=_0xb19ef0['cookieAtla'+'sResolutio'+'n'],_0x390cb1['areaLights'+'Enabled']=_0xb19ef0['areaLights'+'Enabled'],_0x390cb1['cells']=new I(-0x1005+-0x12eb+-0x17*-0x185,0x1486+-0x42*-0x73+-0x3229,-0x286*0xc+0x2522+0x1*-0x6d7),_0x390cb1['maxLightsP'+'erCell']=-0x170b+0x11*0x18c+-0x33d,this['worldClust'+'ers']=new If(_0x3f1af1),this['worldClust'+'ers']['name']='ClusterLig'+'htmapper';}}['finishBake'](_0xbb80a8){this['materials']=[];function _0x20ff04(_0xf33216){Li['decRef'](_0xf33216['colorBuffe'+'r']),_0xf33216['destroy']();}this['renderTarg'+'ets']['forEach'](_0x9d9fa5=>{_0x20ff04(_0x9d9fa5);}),this['renderTarg'+'ets']['clear'](),_0xbb80a8['forEach'](_0x2700e5=>{_0x2700e5['renderTarg'+'ets']['forEach'](_0x35ab2b=>{_0x20ff04(_0x35ab2b);}),_0x2700e5['renderTarg'+'ets']['length']=-0x1d00+-0x13*0x67+0x35*0xb1;}),this['ambientAOM'+'aterial']=null,this['worldClust'+'ers']&&(this['worldClust'+'ers']['destroy'](),this['worldClust'+'ers']=null);}['createMate'+'rialForPas'+'s'](_0x5e524b,_0x4e6ea8,_0x53f467){const _0x28a237=new ws();return _0x28a237['name']='lmMaterial'+'-pass:'+_0x4e6ea8+'-ambient:'+_0x53f467,_0x28a237['setDefine']('UV1LAYOUT',''),_0x28a237['setDefine']('LIT_LIGHTM'+'AP_BAKING',''),_0x4e6ea8===wD?(_0x28a237['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'COLOR',''),_0x53f467?_0x28a237['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'ADD_AMBIEN'+'T',''):_0x28a237['ambient']=new ie(-0x82b+0x26*0x2+-0xd*-0x9b,-0x123*0x5+0x791*-0x3+0x1c62,0x1*0x2523+0x5*-0xef+-0x2078),this['bakeHDR']||_0x28a237['setDefine']('LIGHTMAP_R'+'GBM',''),_0x28a237['lightMap']=this['blackTex']):(_0x28a237['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'DIR',''),_0x28a237['setDefine']('STD_LIGHTM'+'AP_DIR','')),_0x28a237['cull']=xt,_0x28a237['forceUv1']=!(0xe35+-0xeb9*-0x1+-0x1cee),_0x28a237['update'](),_0x28a237;}['createMate'+'rials'](_0x129836,_0x5e6e48,_0x45dbdb){for(let _0x13b756=-0x1076+-0xb00+0x1b76;_0x13b756<_0x45dbdb;_0x13b756++)this['passMateri'+'als'][_0x13b756]||(this['passMateri'+'als'][_0x13b756]=this['createMate'+'rialForPas'+'s'](_0x5e6e48,_0x13b756,!(0x512+0xee*0x21+-0x23bf)));this['ambientAOM'+'aterial']||(this['ambientAOM'+'aterial']=this['createMate'+'rialForPas'+'s'](_0x5e6e48,0x1*-0x15b0+-0xee2+0x1*0x2492,!(-0x1*-0x1129+0xddd+0x26*-0xd1)),this['ambientAOM'+'aterial']['onUpdateSh'+'ader']=function(_0xe5341d){return _0xe5341d['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0xebf*0x1+0x72b+0x3a7*-0x6),_0xe5341d['litOptions']['separateAm'+'bient']=!(-0xc*-0x295+-0x875+-0x1687),_0xe5341d;});}['createText'+'ure'](_0x43dfde,_0x4ed034){return new _e(this['device'],{'profilerHint':CS,'width':_0x43dfde,'height':_0x43dfde,'format':this['scene']['lightmapPi'+'xelFormat'],'mipmaps':!(-0x1421+-0x139*0x1+0x155b*0x1),'type':this['bakeHDR']?di:ta,'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x4ed034});}['collectMod'+'els'](_0x264882,_0x1bc2a6,_0x1af057){var _0x419be8,_0x2cc78d,_0x2ff1fc;if(!_0x264882['enabled'])return;let _0x4f6e36;if((_0x419be8=_0x264882['model'])!=null&&_0x419be8['model']&&((_0x2cc78d=_0x264882['model'])!=null&&_0x2cc78d['enabled'])&&(_0x1af057&&_0x1af057['push'](new Yl(_0x264882)),_0x264882['model']['lightmappe'+'d']&&_0x1bc2a6&&(_0x4f6e36=_0x264882['model']['model']['meshInstan'+'ces'])),(_0x2ff1fc=_0x264882['render'])!=null&&_0x2ff1fc['enabled']&&(_0x1af057&&_0x1af057['push'](new Yl(_0x264882)),_0x264882['render']['lightmappe'+'d']&&_0x1bc2a6&&(_0x4f6e36=_0x264882['render']['meshInstan'+'ces'])),_0x4f6e36){let _0x433930=!(-0x8*0x2f6+0xe4f+0x961);for(let _0x55f39d=-0xf7e+0x1734+0x7*-0x11a;_0x55f39d<_0x4f6e36['length'];_0x55f39d++)if(!_0x4f6e36[_0x55f39d]['mesh']['vertexBuff'+'er']['format']['hasUv1']){M['log']('Lightmappe'+'r\x20-\x20node\x20['+_0x264882['name']+(']\x20contains'+'\x20meshes\x20wi'+'thout\x20requ'+'ired\x20uv1,\x20'+'excluding\x20'+'it\x20from\x20ba'+'king.')),_0x433930=!(0x18e7+0xd1*-0x17+-0x61f);break;}if(_0x433930){const _0x45bdd3=[];for(let _0x429e92=-0x1a4d*0x1+-0x35*-0x6b+0x426*0x1;_0x429e92<_0x4f6e36['length'];_0x429e92++){const _0x4cc1f6=_0x4f6e36[_0x429e92]['mesh'];this['_tempSet']['has'](_0x4cc1f6)?_0x1bc2a6['push'](new Yl(_0x264882,[_0x4f6e36[_0x429e92]])):_0x45bdd3['push'](_0x4f6e36[_0x429e92]),this['_tempSet']['add'](_0x4cc1f6);}this['_tempSet']['clear'](),_0x45bdd3['length']>0x437+0x55f+-0x199*0x6&&_0x1bc2a6['push'](new Yl(_0x264882,_0x45bdd3));}}for(let _0x598630=-0x1805+0x10a9*-0x1+0x2*0x1457;_0x598630<_0x264882['_children']['length'];_0x598630++)this['collectMod'+'els'](_0x264882['_children'][_0x598630],_0x1bc2a6,_0x1af057);}['prepareSha'+'dowCasters'](_0x568f41){const _0x10602f=[];for(let _0x276964=0x173f+0x1825*0x1+-0x2f64;_0x276964<_0x568f41['length'];_0x276964++){const _0x1f90f8=_0x568f41[_0x276964]['component'];if(_0x1f90f8['castShadow'+'s']=_0x1f90f8['castShadow'+'sLightmap'],_0x1f90f8['castShadow'+'sLightmap']){const _0xd96d40=_0x568f41[_0x276964]['meshInstan'+'ces'];for(let _0x28ddc5=0xf*-0x92+0x1d7*-0x10+0x2*0x12ff;_0x28ddc5<_0xd96d40['length'];_0x28ddc5++)_0xd96d40[_0x28ddc5]['visibleThi'+'sFrame']=!(0x3fb+0x14+0x40f*-0x1),_0x10602f['push'](_0xd96d40[_0x28ddc5]);}}return _0x10602f;}['updateTran'+'sforms'](_0x7cc8a4){for(let _0x392598=-0x7*0x2c3+0x3*-0xa1d+0x31ac;_0x392598<_0x7cc8a4['length'];_0x392598++){const _0x5d51a2=_0x7cc8a4[_0x392598]['meshInstan'+'ces'];for(let _0x4612f4=0x1f0b+0x6*-0x50a+-0x1*0xcf;_0x4612f4<_0x5d51a2['length'];_0x4612f4++)_0x5d51a2[_0x4612f4]['node']['getWorldTr'+'ansform']();}}['calculateL'+'ightmapSiz'+'e'](_0x3ac734){let _0x716e61;const _0x45a8f2=this['scene']['lightmapSi'+'zeMultipli'+'er']||0xd*-0x1+0x6*0x296+-0xf67,_0x584fa9=Kl;let _0x4dac53,_0x4fc145;_0x3ac734['model']?(_0x4fc145=_0x3ac734['model']['lightmapSi'+'zeMultipli'+'er'],_0x3ac734['model']['asset']?(_0x716e61=this['assets']['get'](_0x3ac734['model']['asset'])['data'],_0x716e61['area']&&(_0x4dac53=_0x716e61['area'])):_0x3ac734['model']['_area']&&(_0x716e61=_0x3ac734['model'],_0x716e61['_area']&&(_0x4dac53=_0x716e61['_area']))):_0x3ac734['render']&&(_0x4fc145=_0x3ac734['render']['lightmapSi'+'zeMultipli'+'er'],_0x3ac734['render']['type']!=='asset'&&_0x3ac734['render']['_area']&&(_0x716e61=_0x3ac734['render'],_0x716e61['_area']&&(_0x4dac53=_0x716e61['_area'])));const _0x32d8df={'x':0x1,'y':0x1,'z':0x1,'uv':0x1};_0x4dac53&&(_0x32d8df['x']=_0x4dac53['x'],_0x32d8df['y']=_0x4dac53['y'],_0x32d8df['z']=_0x4dac53['z'],_0x32d8df['uv']=_0x4dac53['uv']);const _0x18b68d=_0x4fc145||-0x2540*0x1+-0x61*0x17+0xb7e*0x4;_0x32d8df['x']*=_0x18b68d,_0x32d8df['y']*=_0x18b68d,_0x32d8df['z']*=_0x18b68d;const _0x30a299=_0x3ac734['render']||_0x3ac734['model'],_0x5ed090=this['computeNod'+'eBounds'](_0x30a299['meshInstan'+'ces']);_0x584fa9['copy'](_0x5ed090['halfExtent'+'s']);let _0x4a25b6=_0x32d8df['x']*_0x584fa9['y']*_0x584fa9['z']+_0x32d8df['y']*_0x584fa9['x']*_0x584fa9['z']+_0x32d8df['z']*_0x584fa9['x']*_0x584fa9['y'];return _0x4a25b6/=_0x32d8df['uv'],_0x4a25b6=Math['sqrt'](_0x4a25b6),Math['min'](Y['nextPowerO'+'fTwo'](_0x4a25b6*_0x45a8f2),this['scene']['lightmapMa'+'xResolutio'+'n']||TD);}['setLightma'+'pping'](_0x3a78f4,_0x579bf9,_0x5ea970,_0xca2a33){for(let _0x5a491e=0x153d*0x1+0x1e85+0xa*-0x52d;_0x5a491e<_0x3a78f4['length'];_0x5a491e++){const _0x45d7f4=_0x3a78f4[_0x5a491e],_0x30f618=_0x45d7f4['meshInstan'+'ces'];for(let _0x5bf104=-0x2*0x194+-0xc*-0x15a+-0xd10;_0x5bf104<_0x30f618['length'];_0x5bf104++){const _0x1dc29c=_0x30f618[_0x5bf104];if(_0x1dc29c['setLightma'+'pped'](_0x579bf9),_0x579bf9){_0xca2a33&&(_0x1dc29c['_shaderDef'+'s']|=_0xca2a33),_0x1dc29c['mask']=si;for(let _0x3ce98c=-0x8bd*-0x4+-0x246b*-0x1+0x79*-0x97;_0x3ce98c<_0x5ea970;_0x3ce98c++){const _0x2d0eb9=_0x45d7f4['renderTarg'+'ets'][_0x3ce98c]['colorBuffe'+'r'];_0x2d0eb9['minFilter']=_t,_0x2d0eb9['magFilter']=_t,_0x1dc29c['setRealtim'+'eLightmap'](We['lightmapPa'+'ramNames'][_0x3ce98c],_0x2d0eb9);}}}}}['bake'](_0x121cd7,_0x436cbc=ph){const _0x16fdd1=this['device'],_0x1ee4c6=de();this['scene']['_updateSky'+'Mesh'](),_0x16fdd1['fire']('lightmappe'+'r:start',{'timestamp':_0x1ee4c6,'target':this}),this['stats']['renderPass'+'es']=0xa83+0x425*0x9+-0x2fd0,this['stats']['shadowMapT'+'ime']=0x93*-0x32+0x1*0x238a+-0x6d4,this['stats']['forwardTim'+'e']=-0x20f1+-0x25de+0x46cf;const _0x27ccde=_0x16fdd1['_shaderSta'+'ts']['linked'],_0x4121c4=_0x16fdd1['_renderTar'+'getCreatio'+'nTime'],_0x116acb=_0x16fdd1['_shaderSta'+'ts']['compileTim'+'e'],_0x20acea=[],_0x43eda3=[];if(_0x121cd7){for(let _0x1cfbb2=0x258e+-0x1*-0x196f+-0x3efd;_0x1cfbb2<_0x121cd7['length'];_0x1cfbb2++)this['collectMod'+'els'](_0x121cd7[_0x1cfbb2],_0x20acea,null);this['collectMod'+'els'](this['root'],null,_0x43eda3);}else this['collectMod'+'els'](this['root'],_0x20acea,_0x43eda3);if(Q['pushGpuMar'+'ker'](this['device'],'LMBake'),_0x20acea['length']>-0x1170+0x2*0xf5c+0x22*-0x64){this['renderer']['shadowRend'+'erer']['frameUpdat'+'e']();const _0x42cacc=_0x436cbc===ph?0x1e09*0x1+-0x1bad+-0x25a:-0xc48+-0x205a+0x2ca3;this['setLightma'+'pping'](_0x20acea,!(0x2173+0x1e10+-0x3f82),_0x42cacc),this['initBake'](_0x16fdd1),this['bakeIntern'+'al'](_0x42cacc,_0x20acea,_0x43eda3);let _0x1fd6c6=Pf;_0x436cbc===ph&&(_0x1fd6c6|=vy),this['scene']['ambientBak'+'e']&&(_0x1fd6c6|=xy),this['setLightma'+'pping'](_0x20acea,!(0x265f+0x147f+-0x5*0xbc6),_0x42cacc,_0x1fd6c6),this['finishBake'](_0x20acea);}Q['popGpuMark'+'er'](this['device']);const _0x160b95=de();this['stats']['totalRende'+'rTime']=_0x160b95-_0x1ee4c6,this['stats']['shadersLin'+'ked']=_0x16fdd1['_shaderSta'+'ts']['linked']-_0x27ccde,this['stats']['compileTim'+'e']=_0x16fdd1['_shaderSta'+'ts']['compileTim'+'e']-_0x116acb,this['stats']['fboTime']=_0x16fdd1['_renderTar'+'getCreatio'+'nTime']-_0x4121c4,this['stats']['lightmapCo'+'unt']=_0x20acea['length'],_0x16fdd1['fire']('lightmappe'+'r:end',{'timestamp':_0x160b95,'target':this});}['allocateTe'+'xtures'](_0xdd8193,_0x8b49f){for(let _0x4cfd53=0x1680+-0x2*-0x107f+-0x377e;_0x4cfd53<_0xdd8193['length'];_0x4cfd53++){const _0x3e866c=_0xdd8193[_0x4cfd53],_0x2ea440=this['calculateL'+'ightmapSiz'+'e'](_0x3e866c['node']);for(let _0x26588c=0x89f*-0x2+-0x251d+0x365b;_0x26588c<_0x8b49f;_0x26588c++){const _0x56907b=this['createText'+'ure'](_0x2ea440,'lightmappe'+'r_lightmap'+'_'+_0x4cfd53);Li['incRef'](_0x56907b),_0x3e866c['renderTarg'+'ets'][_0x26588c]=new vt({'colorBuffer':_0x56907b,'depth':!(0x1285+0x3*-0xbaa+0x72*0x25)});}if(!this['renderTarg'+'ets']['has'](_0x2ea440)){const _0x14d532=this['createText'+'ure'](_0x2ea440,'lightmappe'+'r_temp_lig'+'htmap_'+_0x2ea440);Li['incRef'](_0x14d532),this['renderTarg'+'ets']['set'](_0x2ea440,new vt({'colorBuffer':_0x14d532,'depth':!(0xdf6*0x2+-0x26f9+0xb0e)}));}}}['prepareLig'+'htsToBake'](_0x44d4eb,_0x14f87a){if(this['scene']['ambientBak'+'e']){const _0x3d0404=new W_(this);_0x14f87a['push'](_0x3d0404);}const _0x22424a=this['renderer']['lights'];for(let _0x24ed00=-0xb38+-0x1fd*0x1+0xd35*0x1;_0x24ed00<_0x22424a['length'];_0x24ed00++){const _0x4975df=_0x22424a[_0x24ed00],_0x45c003=new uD(this,_0x4975df);_0x44d4eb['push'](_0x45c003),_0x4975df['enabled']&&(_0x4975df['mask']&ii)!==0x1*-0x1bde+0x145*0x17+-0x155*0x1&&(_0x4975df['mask']=ii|si|ds,_0x4975df['shadowUpda'+'teMode']=_0x4975df['type']===ve?Pm:or,_0x14f87a['push'](_0x45c003));}_0x14f87a['sort']();}['restoreLig'+'hts'](_0x2f1c74){for(let _0x40a174=-0x24b5+0x6*0x4bd+0x847;_0x40a174<_0x2f1c74['length'];_0x40a174++)_0x2f1c74[_0x40a174]['restore']();}['setupScene'](){this['ambientLig'+'ht']['copy'](this['scene']['ambientLig'+'ht']),this['scene']['ambientBak'+'e']||this['scene']['ambientLig'+'ht']['set'](0xa09+-0x3e3*-0x3+-0x1*0x15b2,-0x114a+-0x6bf+-0x36f*-0x7,-0xd15+-0xbc6+-0x1*-0x18db),this['renderer']['setSceneCo'+'nstants'](),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Contrast')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Contrast']),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Brightness')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Brightness']);}['restoreSce'+'ne'](){this['scene']['ambientLig'+'ht']['copy'](this['ambientLig'+'ht']);}['computeNod'+'eBounds'](_0xbd5852){const _0x47362d=new Ie();if(_0xbd5852['length']>0x1514*0x1+0x1d16+-0x322a){_0x47362d['copy'](_0xbd5852[-0xf95+-0x1e67*-0x1+-0x769*0x2]['aabb']);for(let _0x57298f=0x26a3+-0x34c+-0x11ab*0x2;_0x57298f<_0xbd5852['length'];_0x57298f++)_0x47362d['add'](_0xbd5852[_0x57298f]['aabb']);}return _0x47362d;}['computeNod'+'esBounds'](_0xf05ac2){for(let _0x34e738=0x2551*0x1+-0x18*-0x65+-0x2ec9;_0x34e738<_0xf05ac2['length'];_0x34e738++){const _0x4420b9=_0xf05ac2[_0x34e738]['meshInstan'+'ces'];_0xf05ac2[_0x34e738]['bounds']=this['computeNod'+'eBounds'](_0x4420b9);}}['computeBou'+'nds'](_0x2d0d89){const _0x516bc7=new Ie();for(let _0x1bd8cf=-0x9ac+0x169d+0x1*-0xcf1;_0x1bd8cf<_0x2d0d89['length'];_0x1bd8cf++){_0x516bc7['copy'](_0x2d0d89[0x1c52+-0x118f+-0xac3]['aabb']);for(let _0x548133=0xa09*-0x1+0xdb2*0x1+0x48*-0xd;_0x548133<_0x2d0d89['length'];_0x548133++)_0x516bc7['add'](_0x2d0d89[_0x548133]['aabb']);}return _0x516bc7;}['backupMate'+'rials'](_0x197c18){for(let _0x57781a=-0x249+0x1a30+-0x1d*0xd3;_0x57781a<_0x197c18['length'];_0x57781a++)this['materials'][_0x57781a]=_0x197c18[_0x57781a]['material'];}['restoreMat'+'erials'](_0xd133ec){for(let _0x581180=-0x1*0x905+0x25d1+0x184*-0x13;_0x581180<_0xd133ec['length'];_0x581180++)_0xd133ec[_0x581180]['material']=this['materials'][_0x581180];}['lightCamer'+'aPrepare'](_0x44934c,_0x208253){const _0x4b8d30=_0x208253['light'];let _0x17c3a8;return _0x4b8d30['type']===Ke&&(_0x17c3a8=_0x4b8d30['getRenderD'+'ata'](null,0x3*-0xc91+0x1fac*0x1+0x607*0x1)['shadowCame'+'ra'],_0x17c3a8['_node']['setPositio'+'n'](_0x4b8d30['_node']['getPositio'+'n']()),_0x17c3a8['_node']['setRotatio'+'n'](_0x4b8d30['_node']['getRotatio'+'n']()),_0x17c3a8['_node']['rotateLoca'+'l'](-(0xee3+0x1ec9+-0x2d52),-0x971*-0x1+0x1*-0x703+-0x137*0x2,-0x1439+0x162e+-0x1f5),_0x17c3a8['projection']=Ks,_0x17c3a8['nearClip']=_0x4b8d30['attenuatio'+'nEnd']/(-0x1f8*-0x2+0x2*-0x6ab+-0x83*-0x1a),_0x17c3a8['farClip']=_0x4b8d30['attenuatio'+'nEnd'],_0x17c3a8['aspectRati'+'o']=0x1555+0x68d+-0x1be1,_0x17c3a8['fov']=_0x4b8d30['_outerCone'+'Angle']*(0x2135+0x14bb+0x12*-0x2ff),this['renderer']['updateCame'+'raFrustum'](_0x17c3a8)),_0x17c3a8;}['lightCamer'+'aPrepareAn'+'dCull'](_0x225ca7,_0xec1500,_0x5cf33a,_0x30e135){const _0x250158=_0x225ca7['light'];let _0x3d9459=!(-0x13c*0x2+0x4*-0x1fc+0xa68);if(_0x250158['type']===ve){Kl['copy'](_0x30e135['center']),Kl['y']+=_0x30e135['halfExtent'+'s']['y'],this['camera']['node']['setPositio'+'n'](Kl),this['camera']['node']['setEulerAn'+'gles'](-(0x11d9+-0x652*-0x6+-0x376b),0x6*0x610+-0x2*-0xf12+0x1d9*-0x24,-0x1*0x165b+-0xb3*-0x1+-0xc*-0x1ce),this['camera']['nearClip']=-0x16f4+0x1*-0xb3+0x17a7,this['camera']['farClip']=_0x30e135['halfExtent'+'s']['y']*(-0x4*0xec+0xe31+0xa7f*-0x1);const _0x2fec17=Math['max'](_0x30e135['halfExtent'+'s']['x'],_0x30e135['halfExtent'+'s']['z']);this['camera']['orthoHeigh'+'t']=_0x2fec17;}else _0x225ca7['lightBound'+'s']['intersects'](_0xec1500['bounds'])||(_0x3d9459=!(-0x23a1+-0x258a+0x492c));if(_0x250158['type']===Ke){let _0x3c8376=!(-0x1bd+-0x1*-0xcdf+-0xb21);const _0x454982=_0xec1500['meshInstan'+'ces'];for(let _0x21ef44=-0x22f4+0x26*-0xb2+0x3d60;_0x21ef44<_0x454982['length'];_0x21ef44++)if(_0x454982[_0x21ef44]['_isVisible'](_0x5cf33a)){_0x3c8376=!(-0xc7*0x21+-0x1871+0x394*0xe);break;}_0x3c8376||(_0x3d9459=!(-0xb*-0x1a3+0x2236+-0x3436));}return _0x3d9459;}['setupLight'+'Array'](_0x489e03,_0x97850e){_0x489e03[ve]['length']=0x213a+-0x16dd+-0xa5d,_0x489e03[Ye]['length']=-0x5*0x6c+0x5d*0x5b+-0x1ef3,_0x489e03[Ke]['length']=-0x5*-0x224+0xbf4+-0x16a8,_0x489e03[_0x97850e['type']][-0x1f5*-0xd+0x21f9+-0x3b6a]=_0x97850e,_0x97850e['visibleThi'+'sFrame']=!(-0x182e*0x1+-0x878*-0x1+0xfb6);}['renderShad'+'owMap'](_0x2dbe54,_0x3bb997,_0x5871bd,_0x319bad){const _0xe7f975=_0x319bad['light'],_0x1dddb8=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x4497d6=_0xe7f975['castShadow'+'s']&&(!_0x1dddb8||this['scene']['lighting']['shadowsEna'+'bled']);if(!_0x3bb997&&_0x4497d6){if(!_0xe7f975['shadowMap']&&!_0x1dddb8&&(_0xe7f975['shadowMap']=this['shadowMapC'+'ache']['get'](this['device'],_0xe7f975)),_0xe7f975['type']===ve){this['renderer']['_shadowRen'+'dererDirec'+'tional']['cull'](_0xe7f975,_0x2dbe54,this['camera'],_0x5871bd);const _0xb5219f=this['renderer']['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0xe7f975,this['camera']);_0xb5219f==null||_0xb5219f['render']();}else{if(this['device']['isWebGPU'])return M['warnOnce']('Lightmappe'+'r\x20on\x20WebGP'+'U\x20does\x20not'+'\x20yet\x20suppo'+'rt\x20spot\x20an'+'d\x20omni\x20sha'+'dows.'),!(0x2414+0x1*0x1639+0x3a4d*-0x1);this['renderer']['_shadowRen'+'dererLocal']['cull'](_0xe7f975,_0x2dbe54,_0x5871bd),this['renderer']['shadowRend'+'erer']['render'](_0xe7f975,this['camera'],!(0x1*0x1fbb+-0x71*0x6+-0x2*0xe8a));}}return!(-0x6*-0x17d+-0x24b2+0x6f1*0x4);}['postproces'+'sTextures'](_0x4a69a5,_0x3fecac,_0x4a3d67){const _0x2102d4=this['lightmapFi'+'lters']['getDilate'](_0x4a69a5,this['bakeHDR']);let _0x445029;const _0x328e4f=this['scene']['lightmapFi'+'lterEnable'+'d'];_0x328e4f&&(this['lightmapFi'+'lters']['prepareDen'+'oise'](this['scene']['lightmapFi'+'lterRange'],this['scene']['lightmapFi'+'lterSmooth'+'ness'],this['bakeHDR']),_0x445029=this['lightmapFi'+'lters']['getDenoise'](this['bakeHDR'])),_0x4a69a5['setBlendSt'+'ate'](Ct['NOBLEND']),_0x4a69a5['setDepthSt'+'ate'](Kt['NODEPTH']),_0x4a69a5['setStencil'+'State'](null,null);for(let _0x26e88a=-0x1566+-0x119*0x9+0x1f47;_0x26e88a<_0x3fecac['length'];_0x26e88a++){const _0x127d3a=_0x3fecac[_0x26e88a];Q['pushGpuMar'+'ker'](this['device'],'LMPost:'+_0x26e88a);for(let _0x470526=-0xa65*0x3+-0x1*-0x197b+0x16d*0x4;_0x470526<_0x4a3d67;_0x470526++){const _0x53123b=_0x127d3a['renderTarg'+'ets'][_0x470526],_0x162990=_0x53123b['colorBuffe'+'r'],_0x56242f=this['renderTarg'+'ets']['get'](_0x162990['width']),_0x2fd82c=_0x56242f['colorBuffe'+'r'];this['lightmapFi'+'lters']['prepare'](_0x162990['width'],_0x162990['height']);for(let _0x3ca895=0x1e70+-0x1385+0x2b*-0x41;_0x3ca895<-0xa52+0x1bb+0x2*0x44c;_0x3ca895++)this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x162990),fr(_0x4a69a5,_0x56242f,_0x328e4f&&_0x470526===0xf0c+-0x724*-0x2+0x755*-0x4&&_0x3ca895===0x2573+0x1c*0x158+-0x4b13?_0x445029:_0x2102d4),this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x2fd82c),fr(_0x4a69a5,_0x53123b,_0x2102d4);}Q['popGpuMark'+'er'](this['device']);}}['bakeIntern'+'al'](_0x494fd2,_0x41bf6b,_0x577867){const _0x3dcdc4=this['scene'],_0xcc9c6=_0x3dcdc4['layers'],_0x1830ab=this['device'],_0x315c4f=_0x3dcdc4['clusteredL'+'ightingEna'+'bled'];this['createMate'+'rials'](_0x1830ab,_0x3dcdc4,_0x494fd2),this['setupScene'](),_0xcc9c6['_update'](),this['computeNod'+'esBounds'](_0x41bf6b),this['allocateTe'+'xtures'](_0x41bf6b,_0x494fd2),this['renderer']['collectLig'+'hts'](_0xcc9c6);const _0x46e236=[],_0x28c985=[];this['prepareLig'+'htsToBake'](_0x46e236,_0x28c985),this['updateTran'+'sforms'](_0x577867);const _0x36259d=this['prepareSha'+'dowCasters'](_0x577867);this['renderer']['updateCpuS'+'kinMatrice'+'s'](_0x36259d),this['renderer']['gpuUpdate'](_0x36259d);const _0x2568db=this['computeBou'+'nds'](_0x36259d);let _0x52e128,_0x238011,_0x8a45aa,_0x19b89b;for(_0x52e128=0x224d+-0x1de9+-0x464;_0x52e128<_0x41bf6b['length'];_0x52e128++)for(_0x8a45aa=_0x41bf6b[_0x52e128]['meshInstan'+'ces'],_0x238011=-0x9a2+0x1cc9+-0x1327*0x1;_0x238011<_0x8a45aa['length'];_0x238011++)_0x19b89b=_0x8a45aa[_0x238011],_0x19b89b['setLightma'+'pped'](!(-0x1022+-0x185d+-0x20*-0x144)),_0x19b89b['mask']=ii,_0x19b89b['setRealtim'+'eLightmap'](We['lightmapPa'+'ramNames'][0x5*-0x594+-0x7*0x139+0x2473],this['blackTex']),_0x19b89b['setRealtim'+'eLightmap'](We['lightmapPa'+'ramNames'][-0x8b7+-0x63*-0x32+0x12*-0x97],this['blackTex']);for(_0x238011=0xe*-0x12e+-0x169c*0x1+0x20*0x139;_0x238011<_0x28c985['length'];_0x238011++)_0x28c985[_0x238011]['light']['enabled']=!(-0x495+0x7d8+0x1*-0x342);const _0x180127=[[],[],[]];let _0x278816,_0x30521a,_0x5a8496=!(-0xeb8+-0xa*0x26b+0x26e7);for(_0x52e128=0x1*0x2277+-0xd3*0xe+0x1*-0x16ed;_0x52e128<_0x28c985['length'];_0x52e128++){const _0x2033d3=_0x28c985[_0x52e128],_0x1cc6de=_0x2033d3 instanceof W_,_0x166fc5=_0x2033d3['light']['type']===ve;let _0x4f7ea6=_0x2033d3['numVirtual'+'Lights'];_0x494fd2>-0x117a+-0x377*0x1+-0xe*-0x17f&&_0x4f7ea6>-0x75c+0x22ad+-0x1b50&&_0x2033d3['light']['bakeDir']&&(_0x4f7ea6=-0x333+0x151+-0x17*-0x15,M['warn']('Lightmappe'+'r\x27s\x20BAKE_C'+'OLORDIR\x20mo'+'de\x20is\x20not\x20'+'compatible'+'\x20with\x20Ligh'+'t\x27s\x20bakeNu'+'mSamples\x20l'+'arger\x20than'+'\x20one.\x20Forc'+'ing\x20it\x20to\x20'+'one.'));for(let _0x1af5e6=-0x2c7*0x6+-0x1bd6+0x2c80;_0x1af5e6<_0x4f7ea6;_0x1af5e6++){Q['pushGpuMar'+'ker'](_0x1830ab,'Light:'+_0x2033d3['light']['_node']['name']+':'+_0x1af5e6),_0x4f7ea6>-0xa5d*-0x3+-0x1332+-0x2f9*0x4&&_0x2033d3['prepareVir'+'tualLight'](_0x1af5e6,_0x4f7ea6),_0x2033d3['startBake']();let _0x584c5c=!(-0x2*-0xf05+0x1b49+0xb*-0x536);const _0x3c5cbb=this['lightCamer'+'aPrepare'](_0x1830ab,_0x2033d3);for(_0x30521a=0x54b+0x134b+-0x1896;_0x30521a<_0x41bf6b['length'];_0x30521a++){const _0x497ff2=_0x41bf6b[_0x30521a];if(_0x8a45aa=_0x497ff2['meshInstan'+'ces'],!this['lightCamer'+'aPrepareAn'+'dCull'](_0x2033d3,_0x497ff2,_0x3c5cbb,_0x2568db))continue;this['setupLight'+'Array'](_0x180127,_0x2033d3['light']);const _0x5f03d8=_0x166fc5?[]:[_0x2033d3['light']];for(_0x315c4f&&this['renderer']['lightTextu'+'reAtlas']['update'](_0x5f03d8,this['lightingPa'+'rams']),_0x584c5c=this['renderShad'+'owMap'](_0xcc9c6,_0x584c5c,_0x36259d,_0x2033d3),_0x315c4f&&this['worldClust'+'ers']['update'](_0x5f03d8,this['lightingPa'+'rams']),this['backupMate'+'rials'](_0x8a45aa),_0x278816=0x4c*-0x18+0x1f74+-0x1854;_0x278816<_0x494fd2&&!(_0x278816>-0x63b+-0x2*-0x7d4+-0x13*0x7f&&_0x1af5e6>-0xc09+0x245a*-0x1+-0x1021*-0x3||_0x1cc6de&&_0x278816>-0x941+0x1875+-0xf34);_0x278816++){Q['pushGpuMar'+'ker'](_0x1830ab,'LMPass:'+_0x278816);const _0x11c175=_0x497ff2['renderTarg'+'ets'][_0x278816],_0x2c3f31=_0x497ff2['renderTarg'+'ets'][_0x278816]['colorBuffe'+'r']['width'],_0x462015=this['renderTarg'+'ets']['get'](_0x2c3f31),_0x38c8ec=_0x462015['colorBuffe'+'r'];_0x278816===0x21a7+0x1*0x1703+0x2*-0x1c55?_0x5a8496=_0x3dcdc4['updateShad'+'ers']:_0x5a8496&&(_0x3dcdc4['updateShad'+'ers']=!(0x1a51+0x1ddc+0xc5*-0x49));let _0x167686=this['passMateri'+'als'][_0x278816];for(_0x1cc6de&&_0x1af5e6+(0x1cbf+0x1*-0x1153+-0xb6b)===_0x4f7ea6&&_0x278816===0x14e7*0x1+0x53*0x47+-0x2bec&&(_0x167686=this['ambientAOM'+'aterial']),_0x238011=-0x2*-0xc31+-0x270b+-0x1a1*-0x9;_0x238011<_0x8a45aa['length'];_0x238011++)_0x8a45aa[_0x238011]['material']=_0x167686;if(this['renderer']['updateShad'+'ers'](_0x8a45aa),_0x278816===ED&&this['constantBa'+'keDir']['setValue'](_0x2033d3['light']['bakeDir']?0x1*-0x14bf+0x1*0x455+0x106b*0x1:0x22de+0x9d*0x2b+-0x3d3d),_0x1830ab['isWebGPU']){const _0xbb7ef2=new xD(_0x1830ab,this['renderer'],this['camera'],_0x315c4f?this['worldClust'+'ers']:null,_0x8a45aa,_0x180127);_0xbb7ef2['init'](_0x462015),_0xbb7ef2['render'](),_0xbb7ef2['destroy']();}else this['renderer']['setCamera'](this['camera'],_0x462015,!(0x23a4+-0x1b8f+0x815*-0x1)),_0x315c4f&&this['worldClust'+'ers']['activate'](),this['renderer']['_forwardTi'+'me']=0x12*0x195+0x7f5+-0x246f,this['renderer']['_shadowMap'+'Time']=0x11fd+-0x16a*0x13+0x8e1,this['renderer']['renderForw'+'ard'](this['camera'],_0x462015,_0x8a45aa,_0x180127,fa),_0x1830ab['updateEnd']();for(this['stats']['shadowMapT'+'ime']+=this['renderer']['_shadowMap'+'Time'],this['stats']['forwardTim'+'e']+=this['renderer']['_forwardTi'+'me'],this['stats']['renderPass'+'es']++,_0x497ff2['renderTarg'+'ets'][_0x278816]=_0x462015,this['renderTarg'+'ets']['set'](_0x2c3f31,_0x11c175),_0x238011=-0x605+0x4d3+0x33*0x6;_0x238011<_0x8a45aa['length'];_0x238011++)_0x19b89b=_0x8a45aa[_0x238011],_0x19b89b['setRealtim'+'eLightmap'](We['lightmapPa'+'ramNames'][_0x278816],_0x38c8ec),_0x19b89b['_shaderDef'+'s']|=Pf;Q['popGpuMark'+'er'](_0x1830ab);}this['restoreMat'+'erials'](_0x8a45aa);}_0x2033d3['endBake'](this['shadowMapC'+'ache']),Q['popGpuMark'+'er'](_0x1830ab);}}for(this['postproces'+'sTextures'](_0x1830ab,_0x41bf6b,_0x494fd2),_0x30521a=0x1ad2+0x842+-0x2314;_0x30521a<_0x577867['length'];_0x30521a++)_0x577867[_0x30521a]['restore']();this['restoreLig'+'hts'](_0x46e236),this['restoreSce'+'ne'](),_0x315c4f||this['shadowMapC'+'ache']['clear']();}}const pc=class pc extends pe{constructor(_0x25fe6f,_0x22df44){super(),h(this,'system'),h(this,'entity'),(this['system']=_0x25fe6f,this['entity']=_0x22df44,this['system']['schema']&&!this['_accessors'+'Built']&&this['buildAcces'+'sors'](this['system']['schema']),this['on']('set',function(_0x39e434,_0x9d743d,_0x4e40e0){this['fire']('set_'+_0x39e434,_0x39e434,_0x9d743d,_0x4e40e0);}),this['on']('set_enable'+'d',this['onSetEnabl'+'ed'],this));}static['_buildAcce'+'ssors'](_0x4c8c48,_0x207baa){_0x207baa['forEach'](_0x17ba39=>{const _0x351c74=typeof _0x17ba39=='object'?_0x17ba39['name']:_0x17ba39;Object['defineProp'+'erty'](_0x4c8c48,_0x351c74,{'get':function(){return this['data'][_0x351c74];},'set':function(_0x1a0f6f){const _0x4a4d1f=this['data'],_0xf53eca=_0x4a4d1f[_0x351c74];_0x4a4d1f[_0x351c74]=_0x1a0f6f,this['fire']('set',_0x351c74,_0xf53eca,_0x1a0f6f);},'configurable':!(0x13bc+0x2b*0x94+-0x2c98)});}),_0x4c8c48['_accessors'+'Built']=!(0x237d*0x1+-0x5d5+-0x1da8);}['buildAcces'+'sors'](_0x272f3f){pc['_buildAcce'+'ssors'](this,_0x272f3f);}['onSetEnabl'+'ed'](_0x4112f6,_0x2a2a38,_0x56e022){_0x2a2a38!==_0x56e022&&this['entity']['enabled']&&(_0x56e022?this['onEnable']():this['onDisable']());}['onEnable'](){}['onDisable'](){}['onPostStat'+'eChange'](){}get['data'](){const _0x3ea258=this['system']['store'][this['entity']['getGuid']()];return _0x3ea258?_0x3ea258['data']:null;}set['enabled'](_0x153078){}get['enabled'](){return!(-0xe*0x206+0x1*-0x26e0+0x4334);}};h(pc,'order',-0xb97+0x160e+-0xa77);let we=pc;class lt extends pe{constructor(_0x350a90){super(),this['app']=_0x350a90,this['store']={},this['schema']=[];}['addCompone'+'nt'](_0xc81e0c,_0x2c3815={}){const _0x3fb744=new this['ComponentT'+'ype'](this,_0xc81e0c),_0x1786d8=new this['DataType']();return this['store'][_0xc81e0c['getGuid']()]={'entity':_0xc81e0c,'data':_0x1786d8},_0xc81e0c[this['id']]=_0x3fb744,_0xc81e0c['c'][this['id']]=_0x3fb744,this['initialize'+'ComponentD'+'ata'](_0x3fb744,_0x2c3815,[]),this['fire']('add',_0xc81e0c,_0x3fb744),_0x3fb744;}['removeComp'+'onent'](_0x2ab0cb){const _0xb5b10c=this['id'],_0x291e41=this['store'][_0x2ab0cb['getGuid']()],_0x114362=_0x2ab0cb['c'][_0xb5b10c];_0x114362['fire']('beforeremo'+'ve'),this['fire']('beforeremo'+'ve',_0x2ab0cb,_0x114362),delete this['store'][_0x2ab0cb['getGuid']()],_0x2ab0cb[_0xb5b10c]=void(0x14f6+-0x7*0x31b+-0xc7*-0x1),delete _0x2ab0cb['c'][_0xb5b10c],this['fire']('remove',_0x2ab0cb,_0x291e41['data']);}['cloneCompo'+'nent'](_0x38338b,_0x5cde56){const _0x1135ae=this['store'][_0x38338b['getGuid']()];return this['addCompone'+'nt'](_0x5cde56,_0x1135ae['data']);}['initialize'+'ComponentD'+'ata'](_0x49bc24,_0x267194={},_0x2a1139){for(let _0x35504a=0x1fc6+-0x6*0x49+0x2*-0xf08,_0x42b39f=_0x2a1139['length'];_0x35504a<_0x42b39f;_0x35504a++){const _0x5f2520=_0x2a1139[_0x35504a];let _0x48d6f2,_0x3caca6;typeof _0x5f2520=='object'?(_0x48d6f2=_0x5f2520['name'],_0x3caca6=_0x5f2520['type']):(_0x48d6f2=_0x5f2520,_0x3caca6=void(0x12bb+0x1*0x1fdb+-0x3296));let _0x7d0450=_0x267194[_0x48d6f2];_0x7d0450!==void(-0x1bcf*-0x1+0x173+-0x5*0x5da)?(_0x3caca6!==void(-0x107*-0xb+-0x63e+-0x50f)&&(_0x7d0450=bD(_0x7d0450,_0x3caca6)),_0x49bc24[_0x48d6f2]=_0x7d0450):_0x49bc24[_0x48d6f2]=_0x49bc24['data'][_0x48d6f2];}_0x49bc24['enabled']&&_0x49bc24['entity']['enabled']&&_0x49bc24['onEnable']();}['getPropert'+'iesOfType'](_0x4d2266){const _0x55b4c9=[];return(this['schema']||[])['forEach'](_0x54ae4d=>{_0x54ae4d&&typeof _0x54ae4d=='object'&&_0x54ae4d['type']===_0x4d2266&&_0x55b4c9['push'](_0x54ae4d);}),_0x55b4c9;}['destroy'](){this['off']();}}function bD(_0x2502af,_0xb624e8){if(!_0x2502af)return _0x2502af;switch(_0xb624e8){case'rgb':return _0x2502af instanceof ie?_0x2502af['clone']():new ie(_0x2502af[0xf75*0x1+0x1b1d+-0x2a92],_0x2502af[0x32c*0xa+0x1d9c+0x1471*-0x3],_0x2502af[-0xebf+0x21a+0xca7]);case'rgba':return _0x2502af instanceof ie?_0x2502af['clone']():new ie(_0x2502af[-0x46*0x2a+0x257*-0x10+-0x2*-0x1876],_0x2502af[0xa37+0xd94+-0x17ca],_0x2502af[-0x194c+0x25*0x87+-0x5cb*-0x1],_0x2502af[-0x25eb+-0x4*0x3b8+0x34ce]);case'vec2':return _0x2502af instanceof J?_0x2502af['clone']():new J(_0x2502af[0x387+-0x4a3*0x5+0x13a8],_0x2502af[0x10d3+0x602*0x6+-0x86*0x65]);case'vec3':return _0x2502af instanceof I?_0x2502af['clone']():new I(_0x2502af[-0x1eb6+-0x1*-0x941+-0x1575*-0x1],_0x2502af[-0x13*0xe5+-0x4*0x418+0x2160],_0x2502af[0xb58+-0x1f7e+0x4*0x50a]);case'vec4':return _0x2502af instanceof ae?_0x2502af['clone']():new ae(_0x2502af[-0x2dd*0xa+-0x2*0x1094+-0x16*-0x2cf],_0x2502af[-0x23*0x16+0x24e9+-0x21e6],_0x2502af[-0x1c24+0x1eeb+-0x2c5*0x1],_0x2502af[-0x94d+-0x212c+0x2a7c*0x1]);case'boolean':case'number':case'string':return _0x2502af;case'entity':return _0x2502af;default:throw new Error('Could\x20not\x20'+'convert\x20un'+'handled\x20ty'+'pe:\x20'+_0xb624e8);}}const qy=-0x1a48+0x15b1*-0x1+-0x2ff9*-0x1,Uf=-0x834+0x13d*-0xf+0x1ac8,Bf=0x152b*0x1+0xb8e+0x68b*-0x5;class CD{constructor(){this['_left']=(-0xe8a+0x4*-0x4bb+0x2177*0x1)/(-0x1c0+0x6*0x1b2+-0x86c),this['_right']=-(0x1a61+0x1f72+-0x39d2)/(0xf09+-0x408*-0x2+-0x1719),this['_len']=-0x1*-0x192c+0x232b+-0x3c57,this['_recip']=0x2322+-0x694+0x56*-0x55,this['_p0']=0x12*-0x14f+0xb85+0x403*0x3,this['_p1']=0x2*-0xe9+0x1*-0x1972+-0xda2*-0x2,this['_t']=0x15a*-0x1a+-0x36d*-0x1+-0x17*-0x161,this['_hermite']={'valid':!(0x819+0x9*-0x80+-0x398),'p0':0x0,'m0':0x0,'p1':0x0,'m1':0x0};}['update'](_0x22cb25,_0x4e0fc1){if(_0x22cb25<this['_left']||_0x22cb25>=this['_right']){const _0x55a7b4=_0x4e0fc1['length'];if(!_0x55a7b4)this['_left']=-(-0xcdf*-0x3+0x199a+-0x4036)/(0x1*-0x686+-0x22f8+-0x1*-0x297e),this['_right']=(0x18b4+0x977+-0x2*0x1115)/(0x13a3+0xd99*0x1+-0x213c),this['_len']=-0x1*0x548+-0x1*0xcc9+-0x39d*-0x5,this['_recip']=0x19af+-0x2a*0x25+-0x139d,this['_p0']=this['_p1']=0x7*-0x19f+0x6*-0x26b+0x19db;else{if(_0x22cb25<_0x4e0fc1[-0x18a9*0x1+-0x1*-0x9f+0x180a])this['_left']=-(-0x5f*-0xf+0x691+-0xc21)/(-0x2a9*0xc+-0xf*0x26b+0x4431),this['_right']=_0x4e0fc1[0x1485+-0x2*0x7e5+-0x4bb],this['_len']=-0x676+0x1*0xc8f+0xdf*-0x7,this['_recip']=0x3*-0x81e+0x1c09+-0x17*0x29,this['_p0']=this['_p1']=0x2*-0x541+0x1e18+-0x1396;else{if(_0x22cb25>=_0x4e0fc1[_0x55a7b4-(0x1d37+-0x1885*-0x1+-0x35bb)])this['_left']=_0x4e0fc1[_0x55a7b4-(0x1bd0*0x1+-0xd*0x2ba+0x7a3*0x1)],this['_right']=(0x40c+0x178a+-0x1b95)/(0x23e+0xb4*0x24+-0x1b8e),this['_len']=-0x1*-0x1f71+0x1be6+-0x3b57*0x1,this['_recip']=0xa2*0x39+-0x17e*-0x1+0x12c8*-0x2,this['_p0']=this['_p1']=_0x55a7b4-(-0xaac+-0x1*0x326+0xdd3*0x1);else{const _0x4808db=this['_findKey'](_0x22cb25,_0x4e0fc1);this['_left']=_0x4e0fc1[_0x4808db],this['_right']=_0x4e0fc1[_0x4808db+(0x155*-0x3+0x183f*0x1+-0x143f)],this['_len']=this['_right']-this['_left'];const _0x51130d=(-0x5f5+0x1d70+0xbbd*-0x2)/this['_len'];this['_recip']=isFinite(_0x51130d)?_0x51130d:0x23b4+0xd*0x251+-0xcb*0x53,this['_p0']=_0x4808db,this['_p1']=_0x4808db+(0x17d7+-0x1*-0x16d+-0xdf*0x1d);}}}}this['_t']=this['_recip']===-0x224d+0x1d*-0x27+-0x26b8*-0x1?0x1*-0x1c2b+0x1*-0x1aad+0x36d8:(_0x22cb25-this['_left'])*this['_recip'],this['_hermite']['valid']=!(-0xda1*-0x2+0x243+-0x1*0x1d84);}['_findKey'](_0x3c49aa,_0x320c17){let _0x43c1f3=-0xb81+0x17d*-0x1+-0x2*-0x67f;for(;_0x3c49aa>=_0x320c17[_0x43c1f3+(-0x264b+0x7*-0x3a9+0x1*0x3feb)];)_0x43c1f3++;return _0x43c1f3;}['eval'](_0x31e526,_0x336c69,_0x4a8e22){const _0x4036c6=_0x4a8e22['_data'],_0x144f32=_0x4a8e22['_component'+'s'],_0x3c2991=this['_p0']*_0x144f32;if(_0x336c69===qy){for(let _0xae445b=-0x1*-0x201+-0x19f*-0x17+-0x274a;_0xae445b<_0x144f32;++_0xae445b)_0x31e526[_0xae445b]=_0x4036c6[_0x3c2991+_0xae445b];}else{const _0x2465d0=this['_t'],_0x32f66a=this['_p1']*_0x144f32;switch(_0x336c69){case Uf:for(let _0x5b3d9a=0x117*0x16+0x146+-0x1940;_0x5b3d9a<_0x144f32;++_0x5b3d9a)_0x31e526[_0x5b3d9a]=Y['lerp'](_0x4036c6[_0x3c2991+_0x5b3d9a],_0x4036c6[_0x32f66a+_0x5b3d9a],_0x2465d0);break;case Bf:{const _0x17ad60=this['_hermite'];if(!_0x17ad60['valid']){const _0x5e8fd7=_0x2465d0*_0x2465d0,_0x272c28=_0x2465d0+_0x2465d0,_0x4b0872=0x55d*-0x3+0x841*-0x1+0x10f*0x17-_0x2465d0,_0x1dd179=_0x4b0872*_0x4b0872;_0x17ad60['valid']=!(0x174f*-0x1+0x521+0x122e),_0x17ad60['p0']=(0x2635*-0x1+-0x1f*0xf0+0x4346+_0x272c28)*_0x1dd179,_0x17ad60['m0']=_0x2465d0*_0x1dd179,_0x17ad60['p1']=_0x5e8fd7*(0x2*-0x137+-0x7*-0x1b1+-0x6*0x191-_0x272c28),_0x17ad60['m1']=_0x5e8fd7*(_0x2465d0-(-0x148f+-0x10*0x153+0x4*0xa70));}const _0x1b6625=(this['_p0']*(-0x17*-0x14c+-0xf69+-0xe68)+(0x1*-0x24f7+-0x12d9+-0x129b*-0x3))*_0x144f32,_0x5e9f29=(this['_p0']*(-0x37*-0x9d+-0x1249*0x2+-0xa*-0x49)+(0xe3b*0x2+0x1b*-0x74+-0x1038))*_0x144f32,_0xef8648=(this['_p1']*(0x3c*-0x5b+0x1f4c+-0x9f5*0x1)+(-0x387+-0x1919+0x1ca1))*_0x144f32,_0x110dda=(this['_p1']*(0x1a37+0x1fd*0x2+-0x1e2e)+(-0x1eb8+0x2ac*0x7+0x1*0xc04))*_0x144f32;for(let _0x566325=-0x61*-0x2f+0x1b3+0x16*-0xe3;_0x566325<_0x144f32;++_0x566325)_0x31e526[_0x566325]=_0x17ad60['p0']*_0x4036c6[_0x1b6625+_0x566325]+_0x17ad60['m0']*_0x4036c6[_0x5e9f29+_0x566325]*this['_len']+_0x17ad60['p1']*_0x4036c6[_0xef8648+_0x566325]+_0x17ad60['m1']*_0x4036c6[_0x110dda+_0x566325]*this['_len'];break;}}}}}class X_{constructor(_0x573c80){this['_name']=_0x573c80['name']+'Snapshot',this['_time']=-(0x2cd+-0x23d9+0x210d),this['_cache']=[],this['_results']=[];for(let _0x4f8425=0x11b5+0x18b2+-0x87b*0x5;_0x4f8425<_0x573c80['_inputs']['length'];++_0x4f8425)this['_cache'][_0x4f8425]=new CD();const _0x8ce5af=_0x573c80['_curves'],_0x97974c=_0x573c80['_outputs'];for(let _0x2f7ad7=0x3d1*-0x6+-0x55d*-0x1+0x1189;_0x2f7ad7<_0x8ce5af['length'];++_0x2f7ad7){const _0x437b32=_0x8ce5af[_0x2f7ad7],_0x657dcd=_0x97974c[_0x437b32['_output']],_0x47b377=[];for(let _0x11d5cf=0x1*-0x2144+-0x217d+0x42c1*0x1;_0x11d5cf<_0x657dcd['_component'+'s'];++_0x11d5cf)_0x47b377[_0x11d5cf]=0x1a46+0x12*-0x199+0x4*0x9f;this['_results'][_0x2f7ad7]=_0x47b377;}}}const Ao=class Ao{constructor(_0x35615b,_0x37b2cc,_0x228f3e,_0x1eb222,_0x5c4f16,_0x2f1593){this['_name']=_0x35615b['name'],this['_track']=_0x35615b,this['_snapshot']=new X_(_0x35615b),this['_playing']=_0x1eb222,this['_time']=_0x37b2cc,this['_speed']=_0x228f3e,this['_loop']=_0x5c4f16,this['_blendWeig'+'ht']=-0x2*0x60d+0x6c2*-0x5+0x17b*0x1f,this['_blendOrde'+'r']=-0xed9+0x9*-0x1bf+0x1e90,this['_eventHand'+'ler']=_0x2f1593,this['alignCurso'+'rToCurrent'+'Time']();}set['name'](_0x128595){this['_name']=_0x128595;}get['name'](){return this['_name'];}set['track'](_0x4e0421){this['_track']=_0x4e0421,this['_snapshot']=new X_(_0x4e0421);}get['track'](){return this['_track'];}get['snapshot'](){return this['_snapshot'];}set['time'](_0xac5445){this['_time']=_0xac5445,this['alignCurso'+'rToCurrent'+'Time']();}get['time'](){return this['_time'];}set['speed'](_0x20bf26){const _0x2d700b=Math['sign'](_0x20bf26)!==Math['sign'](this['_speed']);this['_speed']=_0x20bf26,_0x2d700b&&this['alignCurso'+'rToCurrent'+'Time']();}get['speed'](){return this['_speed'];}set['loop'](_0x914a8c){this['_loop']=_0x914a8c;}get['loop'](){return this['_loop'];}set['blendWeigh'+'t'](_0x1839dd){this['_blendWeig'+'ht']=_0x1839dd;}get['blendWeigh'+'t'](){return this['_blendWeig'+'ht'];}set['blendOrder'](_0x555a14){this['_blendOrde'+'r']=_0x555a14;}get['blendOrder'](){return this['_blendOrde'+'r'];}set['eventCurso'+'r'](_0x7014b4){this['_eventCurs'+'or']=_0x7014b4;}get['eventCurso'+'r'](){return this['_eventCurs'+'or'];}get['eventCurso'+'rEnd'](){return this['isReverse']?0x3c2+-0x1d9c+0x19da:this['_track']['events']['length']-(-0x16f*0x6+0xb2*0x6+0x46f);}get['nextEvent'](){return this['_track']['events'][this['_eventCurs'+'or']];}get['isReverse'](){return this['_speed']<0x2*0x89a+-0x1*-0x1d6b+-0x2e9f;}['nextEventA'+'headOfTime'](_0x39ed00){return this['nextEvent']?this['isReverse']?this['nextEvent']['time']<=_0x39ed00:this['nextEvent']['time']>=_0x39ed00:!(0x1795*0x1+0x2576+0xd*-0x4b2);}['nextEventB'+'ehindTime'](_0x19b60b){return this['nextEvent']?_0x19b60b===this['track']['duration']?this['isReverse']?this['nextEvent']['time']>=_0x19b60b:this['nextEvent']['time']<=_0x19b60b:this['isReverse']?this['nextEvent']['time']>_0x19b60b:this['nextEvent']['time']<_0x19b60b:!(0x3*0x5b6+-0x65b+0xe*-0xc5);}['resetEvent'+'Cursor'](){this['_eventCurs'+'or']=this['isReverse']?this['_track']['events']['length']-(-0x327*-0x9+-0x201c+0x2*0x1df):0x1464+0x145*0x17+-0x3197;}['moveEventC'+'ursor'](){this['_eventCurs'+'or']+=this['isReverse']?-(0x11fe+-0xddf+-0x41e):-0xea3+0xe6b*-0x1+0x1d0f,this['_eventCurs'+'or']>=this['track']['events']['length']?this['_eventCurs'+'or']=-0x205f*0x1+-0xe9*0xb+0xaf*0x3e:this['_eventCurs'+'or']<0xca1+0xde2*-0x1+-0x3*-0x6b&&(this['_eventCurs'+'or']=this['track']['events']['length']-(0x1f17+0x56c*-0x3+-0xed2));}['clipFrameT'+'ime'](_0x2c80c9){const _0x5322ae=Ao['eventFrame'];_0x5322ae['start']=0x2*-0xd01+0x3f2*0x5+0x648,_0x5322ae['end']=_0x2c80c9,_0x5322ae['residual']=0x7*0x178+-0xf45*-0x2+-0x28d2,this['isReverse']?_0x2c80c9<0x138f*0x1+0x1731*-0x1+0x3a2&&(_0x5322ae['start']=this['track']['duration'],_0x5322ae['end']=0x15bb*0x1+-0x11*-0x20e+-0x38a9,_0x5322ae['residual']=_0x2c80c9+this['track']['duration']):_0x2c80c9>this['track']['duration']&&(_0x5322ae['start']=-0x22f4+-0x2*0xb44+0x397c,_0x5322ae['end']=this['track']['duration'],_0x5322ae['residual']=_0x2c80c9-this['track']['duration']);}['alignCurso'+'rToCurrent'+'Time'](){for(this['resetEvent'+'Cursor']();this['nextEventB'+'ehindTime'](this['_time'])&&this['_eventCurs'+'or']!==this['eventCurso'+'rEnd'];)this['moveEventC'+'ursor']();}['fireNextEv'+'ent'](){this['_eventHand'+'ler']['fire'](this['nextEvent']['name'],{'track':this['track'],...this['nextEvent']}),this['moveEventC'+'ursor']();}['fireNextEv'+'entInFrame'](_0x426b43,_0x4c41b2){return this['nextEventA'+'headOfTime'](_0x426b43)&&this['nextEventB'+'ehindTime'](_0x4c41b2)?(this['fireNextEv'+'ent'](),!(0x1962+0x1d5a+-0x36bc)):!(-0x679+-0x8*0x1be+0x146a);}['activeEven'+'tsForFrame'](_0xe58285,_0x3ed7ff){const _0x3d8d16=Ao['eventFrame'];this['clipFrameT'+'ime'](_0x3ed7ff);const _0x3b023c=this['eventCurso'+'r'];for(;this['fireNextEv'+'entInFrame'](_0xe58285,_0x3d8d16['end'])&&_0x3b023c!==this['eventCurso'+'r'];);this['loop']&&Math['abs'](_0x3d8d16['residual'])>0x26*-0xf3+0x3*-0x42+-0xc*-0x312&&this['activeEven'+'tsForFrame'](_0x3d8d16['start'],_0x3d8d16['residual']);}['progressFo'+'rTime'](_0x5d447c){return _0x5d447c*this['_speed']/this['_track']['duration'];}['_update'](_0x2563ba){if(this['_playing']){let _0x279a74=this['_time'];const _0x2719d9=this['_track']['duration'],_0x4bf648=this['_speed'],_0x570e25=this['_loop'];this['_track']['events']['length']>-0x1eef*0x1+-0x1*-0x31e+0x1bd1&&_0x2719d9>-0x5d*-0x5c+-0x4*0x5f7+-0x990&&this['activeEven'+'tsForFrame'](_0x279a74,_0x279a74+_0x4bf648*_0x2563ba),_0x279a74+=_0x4bf648*_0x2563ba,_0x4bf648>=0x14e0+0x1b23*0x1+-0x3003?_0x279a74>_0x2719d9&&(_0x570e25?_0x279a74=_0x279a74%_0x2719d9||0xc2*0xf+0x23d0+0x3*-0xfba:(_0x279a74=this['_track']['duration'],this['pause']())):_0x279a74<0x809+0xbf+-0x8c8&&(_0x570e25?_0x279a74=_0x2719d9+(_0x279a74%_0x2719d9||-0x21c5+-0xd*0xe9+0x2d9a):(_0x279a74=-0x1c79*0x1+0x18ff+-0x59*-0xa,this['pause']())),this['_time']=_0x279a74;}this['_time']!==this['_snapshot']['_time']&&this['_track']['eval'](this['_time'],this['_snapshot']);}['play'](){this['_playing']=!(-0x19*-0xd6+0x11fa+-0x26e0),this['_time']=-0x2a9+-0x8d7*0x1+0x8*0x170;}['stop'](){this['_playing']=!(-0x3a*-0x9d+-0x465+-0x4*0x7cb),this['_time']=0x305+-0xcab+0x9a6;}['pause'](){this['_playing']=!(-0x5dc+-0x4b6+0xa93);}['resume'](){this['_playing']=!(0x362*-0x9+0x1e1*-0x7+-0x2b99*-0x1);}['reset'](){this['_time']=0x3*0x2ef+-0x1e2c+0x1*0x155f;}};h(Ao,'eventFrame',{'start':0x0,'end':0x0,'residual':0x0});let tc=Ao;const jy='NONE',PD='PREV_STATE',MD='NEXT_STATE',ID='PREV_STATE'+'_NEXT_STAT'+'E',DD='NEXT_STATE'+'_PREV_STAT'+'E',LD='GREATER_TH'+'AN',RD='LESS_THAN',OD='GREATER_TH'+'AN_EQUAL_T'+'O',FD='LESS_THAN_'+'EQUAL_TO',ND='EQUAL_TO',kD='NOT_EQUAL_'+'TO',q_='INTEGER',j_='FLOAT',Y_='BOOLEAN',yh='TRIGGER',UD='1D',BD='2D_DIRECTI'+'ONAL',zD='2D_CARTESI'+'AN',VD='DIRECT',no='START',zf='END',Rr='ANY',sc=[no,zf,Rr],Yy='OVERWRITE',GD='ADDITIVE';class Nt{static['dot'](_0x40346a,_0x3cb877){const _0x3a1394=_0x40346a['length'];let _0x1196e5=0x2118+-0x19*-0x149+0x11b*-0x3b;for(let _0x537657=-0x7e0+-0x4bc*0x4+0x1ad0;_0x537657<_0x3a1394;++_0x537657)_0x1196e5+=_0x40346a[_0x537657]*_0x3cb877[_0x537657];return _0x1196e5;}static['normalize'](_0x660e25){let _0x329eff=Nt['dot'](_0x660e25,_0x660e25);if(_0x329eff>0x1e68+-0x234c+0x4e4){_0x329eff=(-0x1239+0x37b*0x8+-0x99e)/Math['sqrt'](_0x329eff);const _0x3d0596=_0x660e25['length'];for(let _0x2b2b74=-0x664+0xf28+-0x8c4;_0x2b2b74<_0x3d0596;++_0x2b2b74)_0x660e25[_0x2b2b74]*=_0x329eff;}}static['set'](_0x189089,_0x642688,_0x39811e){const _0xc7f1ae=_0x189089['length'];if(_0x39811e==='quaternion'){let _0xc1691b=Nt['dot'](_0x642688,_0x642688);_0xc1691b>-0x2604+-0x1000+0x3604&&(_0xc1691b=(-0x1944+0x26*0x6d+0x917)/Math['sqrt'](_0xc1691b));for(let _0xfe1f7b=0x39*0x7a+-0x1eba+-0x4*-0xe4;_0xfe1f7b<_0xc7f1ae;++_0xfe1f7b)_0x189089[_0xfe1f7b]=_0x642688[_0xfe1f7b]*_0xc1691b;}else{for(let _0x510127=-0x13*-0x167+0x1eb0+0xd*-0x469;_0x510127<_0xc7f1ae;++_0x510127)_0x189089[_0x510127]=_0x642688[_0x510127];}}static['blendVec'](_0x1e40ff,_0x3ca3e8,_0x36b3bc,_0x348413){const _0x5f5a79=_0x348413?0x23df*-0x1+0x151*0x1+0x228f:0x983+0x1f5*-0x12+0x19b8-_0x36b3bc,_0x79dc34=_0x1e40ff['length'];for(let _0x10c640=0x1*-0x25b5+-0x204c+0x4601;_0x10c640<_0x79dc34;++_0x10c640)_0x1e40ff[_0x10c640]=_0x1e40ff[_0x10c640]*_0x5f5a79+_0x3ca3e8[_0x10c640]*_0x36b3bc;}static['blendQuat'](_0x58c58f,_0x305970,_0x1cb178,_0x4801ed){const _0x381fb1=_0x58c58f['length'],_0x39f142=_0x4801ed?0x3a2+0x5c4+-0x965:-0x89e+0x60+0x1*0x83f-_0x1cb178;Nt['dot'](_0x58c58f,_0x305970)<0x16a1+0x2540+-0x3be1&&(_0x1cb178=-_0x1cb178);for(let _0x16c87d=-0xb70+0x2688+-0x1b18;_0x16c87d<_0x381fb1;++_0x16c87d)_0x58c58f[_0x16c87d]=_0x58c58f[_0x16c87d]*_0x39f142+_0x305970[_0x16c87d]*_0x1cb178;_0x4801ed||Nt['normalize'](_0x58c58f);}static['blend'](_0x37926a,_0x42f9a2,_0x2dcf85,_0x5e1f20,_0x41bd78){_0x5e1f20==='quaternion'?Nt['blendQuat'](_0x37926a,_0x42f9a2,_0x2dcf85,_0x41bd78):Nt['blendVec'](_0x37926a,_0x42f9a2,_0x2dcf85,_0x41bd78);}static['stableSort'](_0x14c057,_0x804e55){const _0x1265d0=_0x14c057['length'];for(let _0x369a45=-0x2*0xbfb+-0x14f5+0x2ceb;_0x369a45<_0x1265d0-(0x11*-0xd6+-0x999+0x17d0);++_0x369a45)for(let _0x38e4ed=_0x369a45+(0xb*-0x365+0x1a65+0xaf3);_0x38e4ed<_0x1265d0;++_0x38e4ed)if(_0x804e55(_0x14c057[_0x38e4ed],_0x14c057[_0x369a45])){const _0x33981c=_0x14c057[_0x369a45];_0x14c057[_0x369a45]=_0x14c057[_0x38e4ed],_0x14c057[_0x38e4ed]=_0x33981c;}}}const tt=class tt{constructor(_0x5bbc4a,_0x45b32a){this['_component']=_0x5bbc4a,this['mask']=new Int8Array(_0x5bbc4a['layers']['length']),this['weights']=new Float32Array(_0x5bbc4a['layers']['length']),this['totalWeigh'+'t']=0x1f0d+0x94f*0x1+-0x285c,this['counter']=-0xfef+0x789+0x866*0x1,this['layerCount'+'er']=-0x57d+-0x1*0x1b9+0x8e*0xd,this['valueType']=_0x45b32a,this['dirty']=!(0x2f*0x3b+0x1*-0x305+-0x7d0),this['value']=_0x45b32a===tt['TYPE_QUAT']?[0xc91*-0x3+0x9*0x445+-0xba,-0xfed+-0x91*-0x23+-0x3e6,0x1*0x17d2+0xcf2+-0x24c4,-0x16b6+-0x8*0xdd+0x1d9f*0x1]:[-0x1*-0x5e7+-0x2*-0x1039+-0x2659,0x1*-0x1353+0xe10+0x543,0x2*-0xe6a+-0x1*-0x1929+0x3ab],this['baseValue']=null,this['setter']=null;}get['_normalize'+'Weights'](){return this['_component']['normalizeW'+'eights'];}['getWeight'](_0x47db52){return this['dirty']&&this['updateWeig'+'hts'](),this['_normalize'+'Weights']&&this['totalWeigh'+'t']===0x1385+-0x9e*-0x29+-0x2cd3||!this['mask'][_0x47db52]?-0x1bb*-0x13+0x6f7*-0x1+0x1*-0x19ea:this['_normalize'+'Weights']?this['weights'][_0x47db52]/this['totalWeigh'+'t']:Y['clamp'](this['weights'][_0x47db52],0xe9e*0x2+0x13bc+-0x30f8,-0x11*0x83+0x11e3+-0x92f);}['_layerBlen'+'dType'](_0x310f43){return this['_component']['layers'][_0x310f43]['blendType'];}['setMask'](_0x1c203d,_0x217625){this['mask'][_0x1c203d]=_0x217625,this['_normalize'+'Weights']&&(this['_component']['layers'][_0x1c203d]['blendType']===Yy&&(this['mask']=this['mask']['fill'](-0xd5*0x1+-0xb*-0x16f+-0xef*0x10,0x2f6+-0x55d*-0x5+-0x3*0x9ed,_0x1c203d)),this['dirty']=!(-0x10d*-0x1+0x1*-0x1949+0x183c));}['updateWeig'+'hts'](){this['totalWeigh'+'t']=0x1f7*-0xd+0x1*0x1095+-0x1*-0x8f6;for(let _0x1b05ad=-0x1a10+-0xad8+0x24e8;_0x1b05ad<this['weights']['length'];_0x1b05ad++)this['weights'][_0x1b05ad]=this['_component']['layers'][_0x1b05ad]['weight'],this['totalWeigh'+'t']+=this['mask'][_0x1b05ad]*this['weights'][_0x1b05ad];this['dirty']=!(-0xd3+-0x26d7+0x7ef*0x5);}['updateValu'+'e'](_0x58712e,_0x4de267){if(this['counter']===0x1*-0x2681+-0x1581+0x3c02*0x1&&(Nt['set'](this['value'],tt['IDENTITY_Q'+'UAT_ARR'],this['valueType']),this['_normalize'+'Weights']||Nt['blend'](this['value'],this['baseValue'],-0x20b5+0x1a9a+0x61c,this['valueType'])),!(!this['mask'][_0x58712e]||this['getWeight'](_0x58712e)===0xb*-0x143+0x1152+-0x371)){if(this['_layerBlen'+'dType'](_0x58712e)===GD&&!this['_normalize'+'Weights']){if(this['valueType']===tt['TYPE_QUAT']){const _0x503a49=tt['q1']['set'](this['value'][-0x1*0x17d6+-0x1*0x17d5+-0x1*-0x2fab],this['value'][0x91d*-0x1+-0x1af*-0xc+-0xb16],this['value'][0x131+-0x15*0x15e+0x1b87],this['value'][-0x1*-0xb47+0x156a+-0x20ae]),_0x330d37=tt['q2']['set'](this['baseValue'][-0x77f+0x1d8+0x5a7*0x1],this['baseValue'][-0x2231+-0x516+0x1*0x2748],this['baseValue'][-0x1cc5+0x72d+0x7*0x316],this['baseValue'][-0x2*0xfb4+-0x883+0x10d*0x26]),_0x52ce42=tt['q3']['set'](_0x4de267[0x1*0x184a+-0x85f*0x1+-0x19*0xa3],_0x4de267[0x187c+0x1*0x120d+-0x2a88],_0x4de267[0x2f9*0x3+0x2ae+-0xb97],_0x4de267[0xaba+0x214c+-0x13*0x251]),_0x3df4ad=_0x330d37['invert']()['mul'](_0x52ce42);_0x3df4ad['slerp'](le['IDENTITY'],_0x3df4ad,this['getWeight'](_0x58712e)),_0x503a49['mul'](_0x3df4ad),tt['quatArr'][0x15cd+-0x423*-0x3+-0x2236]=_0x503a49['x'],tt['quatArr'][0x24ed*-0x1+-0x185*-0x1+0x2369]=_0x503a49['y'],tt['quatArr'][-0x39*0x6c+0x1*0x787+-0x1087*-0x1]=_0x503a49['z'],tt['quatArr'][0x1ad6+0x2074+-0xbdb*0x5]=_0x503a49['w'],Nt['set'](this['value'],tt['quatArr'],this['valueType']);}else tt['vecArr'][-0x1dcf+0x23a2+-0x5d3]=_0x4de267[0x18d1+-0x2b5*0x1+-0x161c]-this['baseValue'][0x762+-0x1465+0xd03*0x1],tt['vecArr'][0x2042+0x19f2+0x13d*-0x2f]=_0x4de267[-0x39e+0x2029*0x1+0x1a*-0x119]-this['baseValue'][0x5*0x66b+0x5d4*-0x4+0x8c6*-0x1],tt['vecArr'][-0x1249*-0x2+-0x97*-0xd+-0xa9*0x43]=_0x4de267[0xc08+-0x173*-0x2+0x5*-0x2fc]-this['baseValue'][-0x76e+0x2*0x1a+0x73c],Nt['blend'](this['value'],tt['vecArr'],this['getWeight'](_0x58712e),this['valueType'],!(0x16fe+0x72f+-0x1e2d));}else Nt['blend'](this['value'],_0x4de267,this['getWeight'](_0x58712e),this['valueType']);this['setter']&&this['setter'](this['value']);}}['unbind'](){this['setter']&&this['setter'](this['baseValue']);}};h(tt,'TYPE_QUAT','quaternion'),h(tt,'TYPE_VEC3','vector3'),h(tt,'q1',new le()),h(tt,'q2',new le()),h(tt,'q3',new le()),h(tt,'quatArr',[0x9*0x3ea+-0x1*-0x1db8+0x6*-0xad3,0x24e1+0x3a*0x44+-0x3449,0x2137+-0x2058+-0x1*0xdf,0x17a3+0x1d6e*0x1+-0x8*0x6a2]),h(tt,'vecArr',[-0x3*0x459+-0x23*0x15+-0x54e*-0x3,0x42c*-0x1+0x1e62+0x6e*-0x3d,0x19e8+-0x11ab*-0x2+0x3*-0x146a]),h(tt,'IDENTITY_Q'+'UAT_ARR',[0x101b+-0x1*-0x335+-0x1350,-0xca3+-0x270b*-0x1+0x14*-0x152,0x177*0x14+-0x1*0x146b+-0x8e1,0x1*-0x116d+-0x1113+-0x49*-0x79]);let vo=tt;class Ky{constructor(_0x34881f){this['_binder']=_0x34881f,this['_clips']=[],this['_inputs']=[],this['_outputs']=[],this['_targets']={};}get['clips'](){return this['_clips'];}['addClip'](_0x27f7cc){const _0x4e634a=this['_targets'],_0x41930e=this['_binder'],_0x285e88=_0x27f7cc['track']['curves'],_0x4568fc=_0x27f7cc['snapshot'],_0x5ed172=[],_0x28f9cf=[];for(let _0x39f40c=0x16c2+-0xdba+0x2*-0x484;_0x39f40c<_0x285e88['length'];++_0x39f40c){const _0x20075e=_0x285e88[_0x39f40c]['paths'];for(let _0xfd7644=0x157a+-0x98c*0x1+-0xbee;_0xfd7644<_0x20075e['length'];++_0xfd7644){const _0x2e10c0=_0x20075e[_0xfd7644],_0xdd7b9d=_0x41930e['resolve'](_0x2e10c0);let _0x514239=_0x4e634a[_0xdd7b9d&&_0xdd7b9d['targetPath']||null];if(!_0x514239&&_0xdd7b9d){_0x514239={'target':_0xdd7b9d,'value':[],'curves':0x0,'blendCounter':0x0};for(let _0x3c6174=0x1*-0x2029+0x1*-0x242c+0x4455;_0x3c6174<_0x514239['target']['components'];++_0x3c6174)_0x514239['value']['push'](-0x21c4+0x3*-0xc61+0xa21*0x7);if(_0x4e634a[_0xdd7b9d['targetPath']]=_0x514239,_0x41930e['animCompon'+'ent']){if(!_0x41930e['animCompon'+'ent']['targets'][_0xdd7b9d['targetPath']]){let _0x5cb787;_0xdd7b9d['targetPath']['substring'](_0xdd7b9d['targetPath']['length']-(0xe94+-0x1eb7+0x1030))==='localRotat'+'ion'?_0x5cb787=vo['TYPE_QUAT']:_0x5cb787=vo['TYPE_VEC3'],_0x41930e['animCompon'+'ent']['targets'][_0xdd7b9d['targetPath']]=new vo(_0x41930e['animCompon'+'ent'],_0x5cb787);}_0x41930e['animCompon'+'ent']['targets'][_0xdd7b9d['targetPath']]['layerCount'+'er']++,_0x41930e['animCompon'+'ent']['targets'][_0xdd7b9d['targetPath']]['setMask'](_0x41930e['layerIndex'],-0x1c07+0x2da*-0x1+0x1ee2);}}_0x514239&&(_0x514239['curves']++,_0x5ed172['push'](_0x4568fc['_results'][_0x39f40c]),_0x28f9cf['push'](_0x514239));}}this['_clips']['push'](_0x27f7cc),this['_inputs']['push'](_0x5ed172),this['_outputs']['push'](_0x28f9cf);}['removeClip'](_0x444d78){const _0x1c92eb=this['_targets'],_0xa6bd60=this['_binder'],_0x175559=this['_clips'],_0x56df75=_0x175559[_0x444d78]['track']['curves'];for(let _0x5d0edd=0x75d+0x1767+-0x1ec4;_0x5d0edd<_0x56df75['length'];++_0x5d0edd){const _0x22cf08=_0x56df75[_0x5d0edd]['paths'];for(let _0x2c5290=0x1c48+0x3*0x6e+-0x1d92;_0x2c5290<_0x22cf08['length'];++_0x2c5290){const _0x427e91=_0x22cf08[_0x2c5290],_0x52c1a5=this['_binder']['resolve'](_0x427e91);_0x52c1a5&&(_0x52c1a5['curves']--,_0x52c1a5['curves']===0x38*-0x4a+-0x136*-0x11+0x466*-0x1&&(_0xa6bd60['unresolve'](_0x427e91),delete _0x1c92eb[_0x52c1a5['targetPath']],_0xa6bd60['animCompon'+'ent']&&_0xa6bd60['animCompon'+'ent']['targets'][_0x52c1a5['targetPath']]['layerCount'+'er']--));}}_0x175559['splice'](_0x444d78,0x165a+0x1172+-0x27cb*0x1),this['_inputs']['splice'](_0x444d78,0xac1*0x1+-0x16c2+0x1d*0x6a),this['_outputs']['splice'](_0x444d78,-0x64b+-0x1f9+0x845);}['removeClip'+'s'](){for(;this['_clips']['length']>0x1983+0x1d2e+-0x3*0x123b;)this['removeClip'](-0x1594*-0x1+-0x1*0xde9+-0x7ab);}['updateClip'+'Track'](_0x4d5f74,_0x532d03){this['_clips']['forEach'](_0x508b8e=>{_0x508b8e['name']['includes'](_0x4d5f74)&&(_0x508b8e['track']=_0x532d03);}),this['rebind']();}['findClip'](_0x2c1487){const _0x3f085a=this['_clips'];for(let _0x215adb=-0x2b*-0x47+-0x257f+0x1992;_0x215adb<_0x3f085a['length'];++_0x215adb){const _0x5bb15c=_0x3f085a[_0x215adb];if(_0x5bb15c['name']===_0x2c1487)return _0x5bb15c;}return null;}['rebind'](){this['_binder']['rebind'](),this['_targets']={};const _0x3f94de=[...this['clips']];this['removeClip'+'s'](),_0x3f94de['forEach'](_0x4a0c37=>{this['addClip'](_0x4a0c37);});}['assignMask'](_0xbaeaea){return this['_binder']['assignMask'](_0xbaeaea);}['update'](_0x80c6ca,_0xd8e8e1=!(-0x1*0x1+-0x1e5b+0x1e5c)){const _0x4e478b=this['_clips'],_0x1450e7=_0x4e478b['map']((_0x321d47,_0x48a066)=>_0x48a066);Nt['stableSort'](_0x1450e7,(_0x1030ee,_0x1676eb)=>_0x4e478b[_0x1030ee]['blendOrder']<_0x4e478b[_0x1676eb]['blendOrder']);for(let _0x30bed5=-0x25*-0xca+-0x196c+-0x3c6;_0x30bed5<_0x1450e7['length'];++_0x30bed5){const _0x437e60=_0x1450e7[_0x30bed5],_0x38745a=_0x4e478b[_0x437e60],_0x3c5d1b=this['_inputs'][_0x437e60],_0x5464b5=this['_outputs'][_0x437e60],_0x5bedb8=_0x38745a['blendWeigh'+'t'];if(_0x5bedb8>-0x1b66+0x256f*-0x1+0x1*0x40d5&&_0x38745a['_update'](_0x80c6ca),!_0xd8e8e1)break;let _0x302b52,_0x2d0176,_0x52db8b;if(_0x5bedb8>=0x14*-0x141+-0x98f*-0x4+0x5b*-0x25){for(let _0x1ae070=-0x1*0xb40+0x4e4+-0x2*-0x32e;_0x1ae070<_0x3c5d1b['length'];++_0x1ae070)_0x302b52=_0x3c5d1b[_0x1ae070],_0x2d0176=_0x5464b5[_0x1ae070],_0x52db8b=_0x2d0176['value'],Nt['set'](_0x52db8b,_0x302b52,_0x2d0176['target']['type']),_0x2d0176['blendCount'+'er']++;}else{if(_0x5bedb8>0x94e+0x1f23+0x5c7*-0x7){for(let _0x42fae1=-0x5b8*0x4+0x951+-0xd8f*-0x1;_0x42fae1<_0x3c5d1b['length'];++_0x42fae1)_0x302b52=_0x3c5d1b[_0x42fae1],_0x2d0176=_0x5464b5[_0x42fae1],_0x52db8b=_0x2d0176['value'],_0x2d0176['blendCount'+'er']===0x1d4f+-0x104+-0x1c4b?Nt['set'](_0x52db8b,_0x302b52,_0x2d0176['target']['type']):Nt['blend'](_0x52db8b,_0x302b52,_0x5bedb8,_0x2d0176['target']['type']),_0x2d0176['blendCount'+'er']++;}}}const _0x5eaf74=this['_targets'],_0x41c851=this['_binder'];for(const _0x5cf55a in _0x5eaf74)if(_0x5eaf74['hasOwnProp'+'erty'](_0x5cf55a)){const _0x530939=_0x5eaf74[_0x5cf55a];if(_0x41c851['animCompon'+'ent']&&_0x530939['target']['isTransfor'+'m']){const _0x5942ac=_0x41c851['animCompon'+'ent']['targets'][_0x5cf55a];_0x5942ac['counter']===_0x5942ac['layerCount'+'er']&&(_0x5942ac['counter']=-0x5*-0x38e+-0x8c3+-0x301*0x3),_0x5942ac['path']||(_0x5942ac['path']=_0x5cf55a,_0x5942ac['baseValue']=_0x530939['target']['get'](),_0x5942ac['setter']=_0x530939['target']['set']),_0x5942ac['updateValu'+'e'](_0x41c851['layerIndex'],_0x530939['value']),_0x5942ac['counter']++;}else _0x530939['target']['set'](_0x530939['value']);_0x530939['blendCount'+'er']=0x73d+0x1d4b*0x1+-0x29c*0xe;}this['_binder']['update'](_0x80c6ca);}}class Zy{constructor(_0xf83527){this['_events']=[..._0xf83527],this['_events']['sort']((_0x55929e,_0x47eb07)=>_0x55929e['time']-_0x47eb07['time']);}get['events'](){return this['_events'];}}const _c=class _c{constructor(_0x3f6480,_0x101130,_0x2e6392,_0x1c9a98,_0x2fb824,_0x36ada6=new Zy([])){this['_name']=_0x3f6480,this['_duration']=_0x101130,this['_inputs']=_0x2e6392,this['_outputs']=_0x1c9a98,this['_curves']=_0x2fb824,this['_animEvent'+'s']=_0x36ada6;}get['name'](){return this['_name'];}get['duration'](){return this['_duration'];}get['inputs'](){return this['_inputs'];}get['outputs'](){return this['_outputs'];}get['curves'](){return this['_curves'];}set['events'](_0x40dc70){this['_animEvent'+'s']=_0x40dc70;}get['events'](){return this['_animEvent'+'s']['events'];}['eval'](_0x9e8eae,_0x2619b7){_0x2619b7['_time']=_0x9e8eae;const _0x52cf95=this['_inputs'],_0xfe9070=this['_outputs'],_0x3e5b86=this['_curves'],_0x3b1e5f=_0x2619b7['_cache'],_0x2f1551=_0x2619b7['_results'];for(let _0x4e982d=0x688+0x4*0x477+-0x1864;_0x4e982d<_0x52cf95['length'];++_0x4e982d)_0x3b1e5f[_0x4e982d]['update'](_0x9e8eae,_0x52cf95[_0x4e982d]['_data']);for(let _0x178cd0=0x150d*-0x1+0x2365+-0xe58;_0x178cd0<_0x3e5b86['length'];++_0x178cd0){const _0x6e4db0=_0x3e5b86[_0x178cd0],_0x5205bd=_0xfe9070[_0x6e4db0['_output']],_0x4c05bc=_0x2f1551[_0x178cd0];_0x3b1e5f[_0x6e4db0['_input']]['eval'](_0x4c05bc,_0x6e4db0['_interpola'+'tion'],_0x5205bd);}}};h(_c,'EMPTY',Object['freeze'](new _c('empty',Number['MAX_VALUE'],[],[],[])));let Gi=_c;class Gr{static['joinPath'](_0x1f98b7,_0xf3c8b6){_0xf3c8b6=_0xf3c8b6||'.';const _0xd9e107=function(_0x1a345a){return _0x1a345a['replace'](/\\/g,'\x5c\x5c')['replace'](new RegExp('\x5c'+_0xf3c8b6,'g'),'\x5c'+_0xf3c8b6);};return _0x1f98b7['map'](_0xd9e107)['join'](_0xf3c8b6);}static['splitPath'](_0x1ed436,_0x4232f7){_0x4232f7=_0x4232f7||'.';const _0x44b8af=[];let _0x4dab86='',_0x106db7=0x664*-0x1+0x1*0x23+-0x641*-0x1;for(;_0x106db7<_0x1ed436['length'];){let _0x1ac340=_0x1ed436[_0x106db7++];_0x1ac340==='\x5c'&&_0x106db7<_0x1ed436['length']?(_0x1ac340=_0x1ed436[_0x106db7++],_0x1ac340==='\x5c'||_0x1ac340===_0x4232f7?_0x4dab86+=_0x1ac340:_0x4dab86+='\x5c'+_0x1ac340):_0x1ac340===_0x4232f7?(_0x44b8af['push'](_0x4dab86),_0x4dab86=''):_0x4dab86+=_0x1ac340;}return _0x4dab86['length']>-0x336+0x2*-0xd63+-0x1dfc*-0x1&&_0x44b8af['push'](_0x4dab86),_0x44b8af;}static['encode'](_0x26dba9,_0x17a497,_0x1c7316){return(Array['isArray'](_0x26dba9)?_0x26dba9['join']('/'):_0x26dba9)+'/'+_0x17a497+'/'+(Array['isArray'](_0x1c7316)?_0x1c7316['join']('/'):_0x1c7316);}['resolve'](_0x5da91d){return null;}['unresolve'](_0x6ab121){}['update'](_0x280f23){}}class Vf{constructor(_0x30d2ba,_0x264999,_0x4e4cb2,_0x182476){_0x30d2ba['set']?(this['_set']=_0x30d2ba['set'],this['_get']=_0x30d2ba['get']):this['_set']=_0x30d2ba,this['_type']=_0x264999,this['_component'+'s']=_0x4e4cb2,this['_targetPat'+'h']=_0x182476,this['_isTransfo'+'rm']=this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x10bd+-0x1623+0x1f*0x2d))==='localRotat'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x2*0x7f9+0x1*-0xe94+-0x151))==='localPosit'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0x7af+0x2232+-0x1a79))==='localScale';}get['set'](){return this['_set'];}get['get'](){return this['_get'];}get['type'](){return this['_type'];}get['components'](){return this['_component'+'s'];}get['targetPath'](){return this['_targetPat'+'h'];}get['isTransfor'+'m'](){return this['_isTransfo'+'rm'];}}class rr{constructor(_0x13bd76){h(this,'_isPathInM'+'ask',(_0x39153d,_0x29be91)=>{const _0x3102f7=this['_mask'][_0x39153d];if(_0x3102f7){if(_0x3102f7['children']||_0x29be91&&_0x3102f7['value']!==!(0x5*-0x6e3+0xe31+0x143f))return!(-0x1490+-0x1f5d+-0x1*-0x33ed);}else return!(-0xcfb*-0x2+-0x867+-0x282*0x7);return!(-0x1c75+0x329*0xa+-0x43*0xc);});if(this['graph']=_0x13bd76,!_0x13bd76)return;this['_mask']=null;const _0x2ca919={},_0x4a0ef4=function(_0x4bb7b4){_0x2ca919[_0x4bb7b4['name']]=_0x4bb7b4;for(let _0x1e558a=0x1567*-0x1+-0x53f*0x1+0x1aa6;_0x1e558a<_0x4bb7b4['children']['length'];++_0x1e558a)_0x4a0ef4(_0x4bb7b4['children'][_0x1e558a]);};_0x4a0ef4(_0x13bd76),this['nodes']=_0x2ca919,this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={};const _0x280a0=function(_0xab732){let _0x132bc1=_0xab732;for(;_0x132bc1&&!(_0x132bc1 instanceof ot);)_0x132bc1=_0x132bc1['parent'];let _0x267d3d;return _0x132bc1&&(_0x132bc1['render']?_0x267d3d=_0x132bc1['render']['meshInstan'+'ces']:_0x132bc1['model']&&(_0x267d3d=_0x132bc1['model']['meshInstan'+'ces'])),_0x267d3d;};this['nodeCounts']={},this['activeNode'+'s']=[],this['handlers']={'localPosition':function(_0x524921){const _0x2e0d40=_0x524921['localPosit'+'ion'],_0x3e4131=function(_0x492020){_0x2e0d40['set'](..._0x492020);};return rr['createAnim'+'Target'](_0x3e4131,'vector',0x5d3*0x5+0x3*0x141+0xbb*-0x2d,_0x524921,'localPosit'+'ion');},'localRotation':function(_0x43a9bf){const _0x46f6d7=_0x43a9bf['localRotat'+'ion'],_0x3ec1c0=function(_0x4503a7){_0x46f6d7['set'](..._0x4503a7);};return rr['createAnim'+'Target'](_0x3ec1c0,'quaternion',0x238a+0x497+-0xa3*0x3f,_0x43a9bf,'localRotat'+'ion');},'localScale':function(_0x18f7d4){const _0x45e093=_0x18f7d4['localScale'],_0x185b41=function(_0x2b2d40){_0x45e093['set'](..._0x2b2d40);};return rr['createAnim'+'Target'](_0x185b41,'vector',0x92*-0x43+0x15a6+0x1*0x1093,_0x18f7d4,'localScale');},'weight':function(_0x2c5851,_0xb1f263){_0xb1f263['indexOf']('name.')===-0x17fb+0xf8*0x11+-0x281*-0x3?_0xb1f263=_0xb1f263['replace']('name.',''):_0xb1f263=Number(_0xb1f263);const _0x2cdb4b=_0x280a0(_0x2c5851);let _0x1e9c0e;if(_0x2cdb4b){for(let _0x2ec2f1=-0x2*0xdbd+-0x6c*0x4a+0x3ab2;_0x2ec2f1<_0x2cdb4b['length'];++_0x2ec2f1)if(_0x2cdb4b[_0x2ec2f1]['node']['name']===_0x2c5851['name']&&_0x2cdb4b[_0x2ec2f1]['morphInsta'+'nce']){const _0x3da0cf=_0x2cdb4b[_0x2ec2f1]['morphInsta'+'nce'],_0x172407=_0x6676bb=>{_0x3da0cf['setWeight'](_0xb1f263,_0x6676bb[-0x1aa5+-0x1f66*0x1+0x3a0b]);};_0x1e9c0e||(_0x1e9c0e=[]),_0x1e9c0e['push'](_0x172407);}}if(_0x1e9c0e){const _0x46b87c=_0x50327c=>{for(let _0x232c5d=-0x1053+0x24fe+-0x14ab;_0x232c5d<_0x1e9c0e['length'];++_0x232c5d)_0x1e9c0e[_0x232c5d](_0x50327c);};return rr['createAnim'+'Target'](_0x46b87c,'number',-0x6*0xf+0x2399+0x1a*-0x15b,_0x2c5851,'weight.'+_0xb1f263);}return null;},'materialTexture':(_0xe0c87f,_0xb4220d)=>{const _0x431ff5=_0x280a0(_0xe0c87f);if(_0x431ff5){let _0x41ebcf;for(let _0x4ffdf9=0x8*0x4af+0x19f*0x4+-0x15fa*0x2;_0x4ffdf9<_0x431ff5['length'];++_0x4ffdf9)if(_0x431ff5[_0x4ffdf9]['node']['name']===_0xe0c87f['name']){_0x41ebcf=_0x431ff5[_0x4ffdf9];break;}if(_0x41ebcf){const _0x5e968f=_0x884359=>{const _0x28a57d=this['animCompon'+'ent']['system']['app']['assets']['get'](_0x884359[-0x11c4+0xdb5+0x40f]);_0x28a57d&&_0x28a57d['resource']&&_0x28a57d['type']==='texture'&&(_0x41ebcf['material'][_0xb4220d]=_0x28a57d['resource'],_0x41ebcf['material']['update']());};return rr['createAnim'+'Target'](_0x5e968f,'vector',-0x2523+-0x34e+0x14e*0x1f,_0xe0c87f,'materialTe'+'xture','material');}}return null;}};}['_isPathAct'+'ive'](_0x31e52a){if(!this['_mask'])return!(-0xe*0x3c+0xe*-0x169+-0x1a5*-0xe);const _0x441f8e=[_0x31e52a['entityPath'][0x91f+-0x983*-0x2+0xb*-0x28f],this['graph']['name']];for(let _0x50df0f=-0xad7*0x2+0xe32+0x77c;_0x50df0f<_0x441f8e['length'];++_0x50df0f){let _0x33dcd2=_0x441f8e[_0x50df0f];if(this['_isPathInM'+'ask'](_0x33dcd2,_0x31e52a['entityPath']['length']===-0x15c6*0x1+0x1563+0x64))return!(-0x304*0x5+0x2*-0x373+-0x1*-0x15fa);for(let _0x3bc0f1=-0x75a+0xb3*-0xb+0xc*0x141;_0x3bc0f1<_0x31e52a['entityPath']['length'];_0x3bc0f1++)if(_0x33dcd2+='/'+_0x31e52a['entityPath'][_0x3bc0f1],this['_isPathInM'+'ask'](_0x33dcd2,_0x3bc0f1===_0x31e52a['entityPath']['length']-(0x1b8*0x9+0xf01*0x2+0x7*-0x67f)))return!(-0x13*-0x42+0x1*-0x335+-0x1b1*0x1);}return!(-0x953+0x225+0x72f);}['findNode'](_0x4e8f98){if(!this['_isPathAct'+'ive'](_0x4e8f98))return null;let _0xfea631;if(this['graph']&&(_0xfea631=this['graph']['findByPath'](_0x4e8f98['entityPath']),_0xfea631||(_0xfea631=this['graph']['findByPath'](_0x4e8f98['entityPath']['slice'](0x7ab*-0x3+-0x1bd8+0x236*0x17)))),!_0xfea631){_0xfea631=this['nodes'][_0x4e8f98['entityPath'][_0x4e8f98['entityPath']['length']-(-0x195e+0x20f4+-0x3*0x287)]||''];const _0x2e6242=Gr['encode'](_0x4e8f98['entityPath'][_0x4e8f98['entityPath']['length']-(0x25bf+0x2*-0x4f1+0xdee*-0x2)]||'','graph',_0x4e8f98['propertyPa'+'th']);this['visitedFal'+'lbackGraph'+'Paths'][_0x2e6242]===0x175d+0x62*0x26+-0x25e8&&M['warnOnce']('Anim\x20Binde'+'r:\x20Multipl'+'e\x20animatio'+'n\x20curves\x20w'+'ith\x20the\x20pa'+'th\x20'+_0x2e6242+('\x20are\x20prese'+'nt\x20in\x20the\x20')+this['graph']['path']+('\x20graph\x20whi'+'ch\x20may\x20res'+'ult\x20in\x20the'+'\x20incorrect'+'\x20binding\x20o'+'f\x20animatio'+'ns')),Number['isFinite'](this['visitedFal'+'lbackGraph'+'Paths'][_0x2e6242])?this['visitedFal'+'lbackGraph'+'Paths'][_0x2e6242]++:this['visitedFal'+'lbackGraph'+'Paths'][_0x2e6242]=0xe*-0xd+0x89*0x2b+0x1*-0x164d;}return _0xfea631;}static['createAnim'+'Target'](_0x335ef1,_0xa0c0c1,_0x2e6fe8,_0x17d08e,_0x50edb9,_0x3d6593){const _0x5ec777=Gr['encode'](_0x17d08e['path'],_0x3d6593||'entity',_0x50edb9);return new Vf(_0x335ef1,_0xa0c0c1,_0x2e6fe8,_0x5ec777);}['resolve'](_0x2c5d15){const _0x322bc7=Gr['encode'](_0x2c5d15['entityPath'],_0x2c5d15['component'],_0x2c5d15['propertyPa'+'th']);let _0xd886b9=this['targetCach'+'e'][_0x322bc7];if(_0xd886b9)return _0xd886b9;const _0x408a4d=this['findNode'](_0x2c5d15);if(!_0x408a4d)return null;const _0x59acae=this['handlers'][_0x2c5d15['propertyPa'+'th']];return!_0x59acae||(_0xd886b9=_0x59acae(_0x408a4d),!_0xd886b9)?null:(this['targetCach'+'e'][_0x322bc7]=_0xd886b9,this['nodeCounts'][_0x408a4d['path']]?this['nodeCounts'][_0x408a4d['path']]++:(this['activeNode'+'s']['push'](_0x408a4d),this['nodeCounts'][_0x408a4d['path']]=-0x932+0x24e1+-0x1bae),_0xd886b9);}['unresolve'](_0x41823b){if(_0x41823b['component']!=='graph')return;const _0xc71ba5=this['nodes'][_0x41823b['entityPath'][_0x41823b['entityPath']['length']-(0x4f*-0x3c+0x58a+0xcfb*0x1)]||''];if(this['nodeCounts'][_0xc71ba5['path']]--,this['nodeCounts'][_0xc71ba5['path']]===-0x2019+0x1c79+0x3a0){const _0x4e0d14=this['activeNode'+'s'],_0x2d60a6=_0x4e0d14['indexOf'](_0xc71ba5['node']),_0x14868d=_0x4e0d14['length'];_0x2d60a6<_0x14868d-(0x2b2+0xf*-0x3+-0x17*0x1c)&&(_0x4e0d14[_0x2d60a6]=_0x4e0d14[_0x14868d-(-0x2cf+0x1894+-0x15c4)]),_0x4e0d14['pop']();}}['update'](_0x1ad688){const _0x494ba0=this['activeNode'+'s'];for(let _0x30ccff=-0xd99+0x549+0x850;_0x30ccff<_0x494ba0['length'];++_0x30ccff)_0x494ba0[_0x30ccff]['_dirtifyLo'+'cal']();}['assignMask'](_0x32c86a){return _0x32c86a!==this['_mask']?(this['_mask']=_0x32c86a,!(0x1*0x140f+0x101e+0x9*-0x405)):!(0x1fcb+-0x1229+-0xda1);}}class Qy extends we{constructor(){super(...arguments),h(this,'_animation'+'s',{}),h(this,'_assets',[]),h(this,'_loop',!(-0x13*0xc1+0x1e41+-0xfee)),h(this,'animEvalua'+'tor',null),h(this,'model',null),h(this,'skeleton',null),h(this,'fromSkel',null),h(this,'toSkel',null),h(this,'animations'+'Index',{}),h(this,'prevAnim',null),h(this,'currAnim',null),h(this,'blend',-0x7db*0x1+-0x1539+-0x1*-0x1d14),h(this,'blending',!(-0x371+-0x65a*0x4+0x1*0x1cda)),h(this,'blendSpeed',0x256c+-0x8da+-0x1c92),h(this,'activate',!(0x1*0x2417+0x1adb+-0x1f79*0x2)),h(this,'speed',-0x1342+-0x2*-0x12c9+-0x124f);}set['animations'](_0x2acf84){this['_animation'+'s']=_0x2acf84,this['onSetAnima'+'tions']();}get['animations'](){return this['_animation'+'s'];}set['assets'](_0x163fb6){const _0x4a98db=this['_assets'];if(_0x4a98db&&_0x4a98db['length']){for(let _0x20d287=0x115*-0xe+0x650+-0x3a*-0x27;_0x20d287<_0x4a98db['length'];_0x20d287++)if(_0x4a98db[_0x20d287]){const _0x587c6b=this['system']['app']['assets']['get'](_0x4a98db[_0x20d287]);if(_0x587c6b){_0x587c6b['off']('change',this['onAssetCha'+'nged'],this),_0x587c6b['off']('remove',this['onAssetRem'+'oved'],this);const _0x219ac1=this['animations'+'Index'][_0x587c6b['id']];this['currAnim']===_0x219ac1&&this['_stopCurre'+'ntAnimatio'+'n'](),delete this['animations'][_0x219ac1],delete this['animations'+'Index'][_0x587c6b['id']];}}}this['_assets']=_0x163fb6;const _0x56c15b=_0x163fb6['map'](_0x452aba=>_0x452aba instanceof me?_0x452aba['id']:_0x452aba);this['loadAnimat'+'ionAssets'](_0x56c15b);}get['assets'](){return this['_assets'];}set['currentTim'+'e'](_0x43d220){if(this['skeleton']&&(this['skeleton']['currentTim'+'e']=_0x43d220,this['skeleton']['addTime'](0x1ec8*0x1+0x28*0xc6+0x14*-0x316),this['skeleton']['updateGrap'+'h']()),this['animEvalua'+'tor']){const _0x508e50=this['animEvalua'+'tor']['clips'];for(let _0x2975bd=-0x18b7+0xc92*-0x3+0x3e6d;_0x2975bd<_0x508e50['length'];++_0x2975bd)_0x508e50[_0x2975bd]['time']=_0x43d220;}}get['currentTim'+'e'](){if(this['skeleton'])return this['skeleton']['_time'];if(this['animEvalua'+'tor']){const _0x5589f9=this['animEvalua'+'tor']['clips'];if(_0x5589f9['length']>0x1bda+0x23e9+-0x3fc3)return _0x5589f9[_0x5589f9['length']-(0x3d*-0x97+0x407*0x7+0x7cb)]['time'];}return-0x7ed*0x1+-0x259d*0x1+0x2d8a;}get['duration'](){return this['currAnim']?this['animations'][this['currAnim']]['duration']:(M['warn']('No\x20animati'+'on\x20is\x20play'+'ing\x20to\x20get'+'\x20a\x20duratio'+'n.\x20Returni'+'ng\x200.'),0x1e6e*0x1+-0x82*0x47+-0x5*-0x120);}set['loop'](_0x95899e){if(this['_loop']=_0x95899e,this['skeleton']&&(this['skeleton']['looping']=_0x95899e),this['animEvalua'+'tor']){for(let _0x28b23f=0xf89+0xcec+-0x1c75;_0x28b23f<this['animEvalua'+'tor']['clips']['length'];++_0x28b23f)this['animEvalua'+'tor']['clips'][_0x28b23f]['loop']=_0x95899e;}}get['loop'](){return this['_loop'];}['play'](_0x146c79,_0xfb34b7=0x4e9*-0x2+0x1f0f*-0x1+-0x23*-0x12b){if(!(!this['enabled']||!this['entity']['enabled'])){if(!this['animations'][_0x146c79]){M['error']('Trying\x20to\x20'+'play\x20anima'+'tion\x20\x27'+_0x146c79+('\x27\x20which\x20do'+'esn\x27t\x20exis'+'t'));return;}if(this['prevAnim']=this['currAnim'],this['currAnim']=_0x146c79,this['model']){!this['skeleton']&&!this['animEvalua'+'tor']&&this['_createAni'+'mationCont'+'roller']();const _0x1e2754=this['animations'][this['prevAnim']],_0x11d967=this['animations'][this['currAnim']];if(this['blending']=_0xfb34b7>0x1745+-0x11c0*0x1+0x9d*-0x9&&!!this['prevAnim'],this['blending']&&(this['blend']=-0x171*0x11+-0x217b+0x39fc,this['blendSpeed']=(0x1*0x187f+0x1203+-0x2a81)/_0xfb34b7),this['skeleton']&&(this['blending']?(this['fromSkel']['animation']=_0x1e2754,this['fromSkel']['addTime'](this['skeleton']['_time']),this['toSkel']['animation']=_0x11d967):this['skeleton']['animation']=_0x11d967),this['animEvalua'+'tor']){const _0x44ae8a=this['animEvalua'+'tor'];if(this['blending']){for(;_0x44ae8a['clips']['length']>-0x20b0+0x814+0x1*0x189d;)_0x44ae8a['removeClip'](-0x1fd5+0x1c55*-0x1+0x2*0x1e15);}else this['animEvalua'+'tor']['removeClip'+'s']();const _0x43e5e4=new tc(this['animations'][this['currAnim']],-0x1*-0x22a3+-0x1*-0x1607+0x1c55*-0x2,-0x161+0xaaf+-0x94d,!(-0x177c+0x19a7+-0x3*0xb9),this['loop']);_0x43e5e4['name']=this['currAnim'],_0x43e5e4['blendWeigh'+'t']=this['blending']?0xbcb+0x35*-0x23+-0x48c:0x5*0x21d+-0x7d+0x1*-0xa13,_0x43e5e4['reset'](),this['animEvalua'+'tor']['addClip'](_0x43e5e4);}}this['playing']=!(0x26de+-0x4d9*-0x1+-0x24d*0x13);}}['getAnimati'+'on'](_0x1e137e){return this['animations'][_0x1e137e];}['setModel'](_0x3e3f8a){_0x3e3f8a!==this['model']&&(this['_resetAnim'+'ationContr'+'oller'](),this['model']=_0x3e3f8a,this['animations']&&this['currAnim']&&this['animations'][this['currAnim']]&&this['play'](this['currAnim']));}['onSetAnima'+'tions'](){const _0x135c05=this['entity']['model'];if(_0x135c05){const _0x198616=_0x135c05['model'];_0x198616&&_0x198616!==this['model']&&this['setModel'](_0x198616);}if(!this['currAnim']&&this['activate']&&this['enabled']&&this['entity']['enabled']){const _0x56d09b=Object['keys'](this['_animation'+'s']);_0x56d09b['length']>0x2641+0x1*-0x2562+-0x1*0xdf&&this['play'](_0x56d09b[0x13ab*0x1+-0xb7b*0x1+-0x830]);}}['_resetAnim'+'ationContr'+'oller'](){this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['_createAni'+'mationCont'+'roller'](){const _0x4cb69c=this['model'],_0x21d1d8=this['animations'];let _0x47fae6=!(-0x227a+-0x50b*0x1+0x2786),_0x59a6be=!(-0xf5+-0x1*-0x1313+-0x121d);for(const _0x571100 in _0x21d1d8)_0x21d1d8['hasOwnProp'+'erty'](_0x571100)&&(_0x21d1d8[_0x571100]['constructo'+'r']===Gi?_0x59a6be=!(0x2*-0x74f+-0x9*0x3c1+0x3067):_0x47fae6=!(-0x3b*-0x33+-0x15c0+0x9ff));const _0x5ac0b3=_0x4cb69c['getGraph']();_0x47fae6?(this['fromSkel']=new Vd(_0x5ac0b3),this['toSkel']=new Vd(_0x5ac0b3),this['skeleton']=new Vd(_0x5ac0b3),this['skeleton']['looping']=this['loop'],this['skeleton']['setGraph'](_0x5ac0b3)):_0x59a6be&&(this['animEvalua'+'tor']=new Ky(new rr(this['entity'])));}['loadAnimat'+'ionAssets'](_0x2e3c82){if(!_0x2e3c82||!_0x2e3c82['length'])return;const _0x37ec04=this['system']['app']['assets'],_0x38f8a7=_0x4a82b0=>{if(_0x4a82b0['resources']['length']>-0x34*0x29+-0x7fa+0x104f){for(let _0x330e85=-0x2*0x1327+0xc54+0x19fa;_0x330e85<_0x4a82b0['resources']['length'];_0x330e85++)this['animations'][_0x4a82b0['resources'][_0x330e85]['name']]=_0x4a82b0['resources'][_0x330e85],this['animations'+'Index'][_0x4a82b0['id']]=_0x4a82b0['resources'][_0x330e85]['name'];}else this['animations'][_0x4a82b0['name']]=_0x4a82b0['resource'],this['animations'+'Index'][_0x4a82b0['id']]=_0x4a82b0['name'];this['animations']=this['animations'];},_0x50a526=_0x59c767=>{_0x59c767['off']('change',this['onAssetCha'+'nged'],this),_0x59c767['on']('change',this['onAssetCha'+'nged'],this),_0x59c767['off']('remove',this['onAssetRem'+'oved'],this),_0x59c767['on']('remove',this['onAssetRem'+'oved'],this),_0x59c767['resource']?_0x38f8a7(_0x59c767):(_0x59c767['once']('load',_0x38f8a7,this),this['enabled']&&this['entity']['enabled']&&_0x37ec04['load'](_0x59c767));};for(let _0x35bc4d=0xdc*0x10+-0x1*-0x1c9f+0x1*-0x2a5f,_0x3afda5=_0x2e3c82['length'];_0x35bc4d<_0x3afda5;_0x35bc4d++){const _0x39053c=_0x37ec04['get'](_0x2e3c82[_0x35bc4d]);_0x39053c?_0x50a526(_0x39053c):_0x37ec04['on']('add:'+_0x2e3c82[_0x35bc4d],_0x50a526);}}['onAssetCha'+'nged'](_0x53776f,_0x5dea02,_0x262b7a,_0x2b64e0){if(_0x5dea02==='resource'||_0x5dea02==='resources'){if(_0x5dea02==='resources'&&_0x262b7a&&_0x262b7a['length']===-0xc01+0xa2*-0x10+0x1621&&(_0x262b7a=null),_0x262b7a){let _0x392c9d=!(0x3*0xcb5+0x4*0xa9+-0x28c2);if(_0x262b7a['length']>0xe9+0x173f+-0x1827){if(_0x2b64e0&&_0x2b64e0['length']>0xf9a*0x1+-0x2044+0x10ab){for(let _0xb5c34=0x2071*0x1+0x1b0e+0x3b7f*-0x1;_0xb5c34<_0x2b64e0['length'];_0xb5c34++)delete this['animations'][_0x2b64e0[_0xb5c34]['name']];}else delete this['animations'][_0x53776f['name']];_0x392c9d=!(0xee7+0x2126+-0x300c);for(let _0x4bca79=0x1*0x239e+0xe*0x17c+0x1*-0x3866;_0x4bca79<_0x262b7a['length'];_0x4bca79++)this['animations'][_0x262b7a[_0x4bca79]['name']]=_0x262b7a[_0x4bca79],!_0x392c9d&&this['currAnim']===_0x262b7a[_0x4bca79]['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x392c9d=!(0x75c+-0x1790+0x1034),this['play'](_0x262b7a[_0x4bca79]['name']));_0x392c9d||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}else{if(_0x2b64e0&&_0x2b64e0['length']>-0xde2*-0x1+0x24f3*-0x1+-0x1*-0x1712){for(let _0x3e637d=-0xeb1*0x1+-0xc3f+-0x1af*-0x10;_0x3e637d<_0x2b64e0['length'];_0x3e637d++)delete this['animations'][_0x2b64e0[_0x3e637d]['name']];}this['animations'][_0x53776f['name']]=_0x262b7a[-0x36c*-0x2+0x2*-0x2b6+0x7*-0x34]||_0x262b7a,_0x392c9d=!(-0xcc0*0x1+0x22*-0x51+0x1783),this['currAnim']===_0x53776f['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x392c9d=!(-0x62*0x22+0x8*-0x4e2+0x457*0xc),this['play'](_0x53776f['name'])),_0x392c9d||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}this['animations'+'Index'][_0x53776f['id']]=_0x53776f['name'];}else{if(_0x2b64e0['length']>0xa21*0x1+-0x8d8+0x52*-0x4){for(let _0x56a0e1=-0xf1c+0x1be8+-0xccc;_0x56a0e1<_0x2b64e0['length'];_0x56a0e1++)delete this['animations'][_0x2b64e0[_0x56a0e1]['name']],this['currAnim']===_0x2b64e0[_0x56a0e1]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x53776f['name']],this['currAnim']===_0x53776f['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x53776f['id']];}}}['onAssetRem'+'oved'](_0x2cc43f){if(_0x2cc43f['off']('remove',this['onAssetRem'+'oved'],this),this['animations']){if(_0x2cc43f['resources']['length']>0x5*0xd6+0x135e+-0x178b){for(let _0x4f2463=0x80*-0x4d+0xa6+0x25da;_0x4f2463<_0x2cc43f['resources']['length'];_0x4f2463++)delete this['animations'][_0x2cc43f['resources'][_0x4f2463]['name']],this['currAnim']===_0x2cc43f['resources'][_0x4f2463]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x2cc43f['name']],this['currAnim']===_0x2cc43f['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x2cc43f['id']];}}['_stopCurre'+'ntAnimatio'+'n'](){if(this['currAnim']=null,this['playing']=!(0x11b*0xd+0x1114+-0x1f72),this['skeleton']&&(this['skeleton']['currentTim'+'e']=-0xea6+0x212e+-0x1*0x1288,this['skeleton']['animation']=null),this['animEvalua'+'tor']){for(let _0xa95be5=0x96d*-0x4+-0x1b8b*0x1+-0x413f*-0x1;_0xa95be5<this['animEvalua'+'tor']['clips']['length'];++_0xa95be5)this['animEvalua'+'tor']['clips'][_0xa95be5]['stop']();this['animEvalua'+'tor']['update'](0x14a4+-0x2*0x718+-0xec*0x7),this['animEvalua'+'tor']['removeClip'+'s']();}}['onEnable'](){super['onEnable']();const _0x1d9f7f=this['assets'],_0x4763ac=this['system']['app']['assets'];if(_0x1d9f7f)for(let _0x24e7d2=-0x8c5+0x8*-0x254+0x1b65,_0x166ed1=_0x1d9f7f['length'];_0x24e7d2<_0x166ed1;_0x24e7d2++){let _0x18eda5=_0x1d9f7f[_0x24e7d2];_0x18eda5 instanceof me||(_0x18eda5=_0x4763ac['get'](_0x18eda5)),_0x18eda5&&!_0x18eda5['resource']&&_0x4763ac['load'](_0x18eda5);}if(this['activate']&&!this['currAnim']){const _0x5c895f=Object['keys'](this['animations']);_0x5c895f['length']>-0x1335+0x969+-0xb*-0xe4&&this['play'](_0x5c895f[0x26c2+0x713*0x1+-0x3*0xf47]);}}['onBeforeRe'+'move'](){for(let _0x1ada44=-0x2*-0x105b+0x1*-0x25a9+-0x1*-0x4f3;_0x1ada44<this['assets']['length'];_0x1ada44++){let _0x193e2b=this['assets'][_0x1ada44];typeof _0x193e2b=='number'&&(_0x193e2b=this['system']['app']['assets']['get'](_0x193e2b)),_0x193e2b&&(_0x193e2b['off']('change',this['onAssetCha'+'nged'],this),_0x193e2b['off']('remove',this['onAssetRem'+'oved'],this));}this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['update'](_0x1ecee1){if(this['blending']&&(this['blend']+=_0x1ecee1*this['blendSpeed'],this['blend']>=-0x1bb*0x11+-0x93f+0x26ab&&(this['blend']=0x26a9+0x1*-0x1e55+-0x853)),this['playing']){const _0x10d9d5=this['skeleton'];if(_0x10d9d5!==null&&this['model']!==null){if(this['blending'])_0x10d9d5['blend'](this['fromSkel'],this['toSkel'],this['blend']);else{const _0x146540=_0x1ecee1*this['speed'];_0x10d9d5['addTime'](_0x146540),this['speed']>0x557+-0x10b7+0xb60&&_0x10d9d5['_time']===_0x10d9d5['animation']['duration']&&!this['loop']?this['playing']=!(0x17*-0x163+0x3b*0x50+0xd76):this['speed']<-0x1*-0x1005+0x1cdc+-0x1*0x2ce1&&_0x10d9d5['_time']===-0xb14+0x1a*-0x8b+0x1932&&!this['loop']&&(this['playing']=!(-0x1*0x1ec1+-0x74b*-0x5+-0x5b5));}this['blending']&&this['blend']===0x118c*-0x1+-0xfb*0xd+0x1e4c&&(_0x10d9d5['animation']=this['toSkel']['animation']),_0x10d9d5['updateGrap'+'h']();}}const _0x157a90=this['animEvalua'+'tor'];if(_0x157a90){for(let _0x3e3861=0x2275+0x1fc8+-0x423d*0x1;_0x3e3861<_0x157a90['clips']['length'];++_0x3e3861){const _0x333057=_0x157a90['clips'][_0x3e3861];_0x333057['speed']=this['speed'],this['playing']?_0x333057['resume']():_0x333057['pause']();}this['blending']&&_0x157a90['clips']['length']>0x1*-0x1bea+-0x1b80+0x376b&&(_0x157a90['clips'][-0x1754+0x8f*-0x29+0x2e3c]['blendWeigh'+'t']=this['blend']),_0x157a90['update'](_0x1ecee1);}this['blending']&&this['blend']===-0x28*0xd3+0xa3*0xa+0x1a9b&&(this['blending']=!(-0x10ef*-0x1+-0x4f7+-0xbf7));}}class HD{constructor(){this['enabled']=!(0x661*0x1+0x23*-0x1e+-0x247);}}const Gf=['enabled'];class WD extends lt{constructor(_0xf6f6a3){super(_0xf6f6a3),this['id']='animation',this['ComponentT'+'ype']=Qy,this['DataType']=HD,this['schema']=Gf,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x27261c,_0x138931,_0x4bcb7d){_0x4bcb7d=['activate','enabled','loop','speed','assets'];for(const _0x322f99 of _0x4bcb7d)_0x138931['hasOwnProp'+'erty'](_0x322f99)&&(_0x27261c[_0x322f99]=_0x138931[_0x322f99]);super['initialize'+'ComponentD'+'ata'](_0x27261c,_0x138931,Gf);}['cloneCompo'+'nent'](_0x206be5,_0x524e2a){this['addCompone'+'nt'](_0x524e2a,{}),_0x524e2a['animation']['assets']=_0x206be5['animation']['assets']['slice'](),_0x524e2a['animation']['speed']=_0x206be5['animation']['speed'],_0x524e2a['animation']['loop']=_0x206be5['animation']['loop'],_0x524e2a['animation']['activate']=_0x206be5['animation']['activate'],_0x524e2a['animation']['enabled']=_0x206be5['animation']['enabled'];const _0x4f9d3f={},_0x26e51a=_0x206be5['animation']['animations'];for(const _0xbb618e in _0x26e51a)_0x26e51a['hasOwnProp'+'erty'](_0xbb618e)&&(_0x4f9d3f[_0xbb618e]=_0x26e51a[_0xbb618e]);_0x524e2a['animation']['animations']=_0x4f9d3f;const _0x1ef658={},_0x2b4ada=_0x206be5['animation']['animations'+'Index'];for(const _0x19d7e9 in _0x2b4ada)_0x2b4ada['hasOwnProp'+'erty'](_0x19d7e9)&&(_0x1ef658[_0x19d7e9]=_0x2b4ada[_0x19d7e9]);return _0x524e2a['animation']['animations'+'Index']=_0x1ef658,_0x524e2a['animation'];}['onBeforeRe'+'move'](_0x275ace,_0x30ac7e){_0x30ac7e['onBeforeRe'+'move']();}['onUpdate'](_0x4a73dc){const _0x255c18=this['store'];for(const _0xfb9d67 in _0x255c18)if(_0x255c18['hasOwnProp'+'erty'](_0xfb9d67)){const _0x2cc7ba=_0x255c18[_0xfb9d67];_0x2cc7ba['data']['enabled']&&_0x2cc7ba['entity']['enabled']&&_0x2cc7ba['entity']['animation']['update'](_0x4a73dc);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Qy['prototype'],Gf);class Wo{constructor(_0x10d8fd,_0x3469a6,_0x118a9a,_0x30558d,_0x317df0=0x1*-0xbd4+-0xc32+0x1*0x1807){this['_state']=_0x10d8fd,this['_parent']=_0x3469a6,this['_name']=_0x118a9a,Array['isArray'](_0x30558d)?(this['_point']=new J(_0x30558d[-0xfd*-0x2+-0x135b+0x1161],_0x30558d[0x1dd1+0x75c+-0x34*0xb7]),this['_pointLeng'+'th']=this['_point']['length']()):(this['_point']=_0x30558d,this['_pointLeng'+'th']=_0x30558d),this['_speed']=_0x317df0,this['_weightedS'+'peed']=-0x63d*-0x1+0x1*0x226b+0xd8d*-0x3,this['_weight']=0x9*-0x316+-0x123b*0x1+0x6*0x7ab,this['_animTrack']=null;}get['parent'](){return this['_parent'];}get['name'](){return this['_name'];}get['path'](){return this['_parent']?this['_parent']['path']+'.'+this['_name']:this['_name'];}get['point'](){return this['_point'];}get['pointLengt'+'h'](){return this['_pointLeng'+'th'];}set['weight'](_0x1a34b9){this['_weight']=_0x1a34b9;}get['weight'](){return this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['normalized'+'Weight'](){const _0x357b93=this['_state']['totalWeigh'+'t'];return _0x357b93===-0x219c+0x1883+-0x919*-0x1?0x21e2+0x10f+-0x22f1:this['weight']/_0x357b93;}get['speed'](){return this['_weightedS'+'peed']*this['_speed'];}get['absoluteSp'+'eed'](){return Math['abs'](this['_speed']);}set['weightedSp'+'eed'](_0x46a124){this['_weightedS'+'peed']=_0x46a124;}get['weightedSp'+'eed'](){return this['_weightedS'+'peed'];}set['animTrack'](_0x36e8ba){this['_animTrack']=_0x36e8ba;}get['animTrack'](){return this['_animTrack'];}}class Nn extends Wo{constructor(_0x5f46c5,_0x5948c1,_0x3bd02a,_0x441bfb,_0x294dc4,_0x4dc4aa,_0x5dd0b8,_0x499370,_0x5e5b97){super(_0x5f46c5,_0x5948c1,_0x3bd02a,_0x441bfb),this['_parameter'+'s']=_0x294dc4,this['_parameter'+'Values']=new Array(_0x294dc4['length']),this['_children']=[],this['_findParam'+'eter']=_0x5e5b97,this['_syncAnima'+'tions']=_0x5dd0b8!==!(-0x1181*0x1+-0x2*0x4b6+-0x1*-0x1aee),this['_pointCach'+'e']={};for(let _0x34436f=0x74f*0x5+-0x1e5d*-0x1+-0x2174*0x2;_0x34436f<_0x4dc4aa['length'];_0x34436f++){const _0x9ed710=_0x4dc4aa[_0x34436f];_0x9ed710['children']?this['_children']['push'](_0x499370(_0x9ed710['type'],_0x5f46c5,this,_0x9ed710['name'],0x4f*-0x51+0x22f3+-0x9*0x11b,_0x9ed710['parameter']?[_0x9ed710['parameter']]:_0x9ed710['parameters'],_0x9ed710['children'],_0x9ed710['syncAnimat'+'ions'],_0x499370,_0x5e5b97)):this['_children']['push'](new Wo(_0x5f46c5,this,_0x9ed710['name'],_0x9ed710['point'],_0x9ed710['speed']));}}get['weight'](){return this['calculateW'+'eights'](),this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['syncAnimat'+'ions'](){return this['_syncAnima'+'tions'];}['getChild'](_0x346588){for(let _0x117615=-0x5fb*-0x1+-0x3*0x72f+0xf92;_0x117615<this['_children']['length'];_0x117615++)if(this['_children'][_0x117615]['name']===_0x346588)return this['_children'][_0x117615];return null;}['updatePara'+'meterValue'+'s'](){let _0xef72d3=!(0x216a+0x1725+-0x388f);for(let _0x14ed36=-0xed3+-0x11e*-0x21+-0xab*0x21;_0x14ed36<this['_parameter'+'Values']['length'];_0x14ed36++){const _0x39d14c=this['_findParam'+'eter'](this['_parameter'+'s'][_0x14ed36])['value'];this['_parameter'+'Values'][_0x14ed36]!==_0x39d14c&&(this['_parameter'+'Values'][_0x14ed36]=_0x39d14c,_0xef72d3=!(0x3e9*0x1+0x153f+-0x1927));}return _0xef72d3;}['getNodeWei'+'ghtedDurat'+'ion'](_0x2b769b){return this['_children'][_0x2b769b]['animTrack']['duration']/this['_children'][_0x2b769b]['speedMulti'+'plier']*this['_children'][_0x2b769b]['weight'];}['getNodeCou'+'nt'](){let _0xda51b6=0x860*0x2+-0x124f+0x18f;for(let _0x162f4a=0x1311*-0x1+0x43*-0x4d+0x2738;_0x162f4a<this['_children']['length'];_0x162f4a++)this['_children'][_0x162f4a]['constructo'+'r']===Nn?_0xda51b6+=this['_children'][_0x162f4a]['getNodeCou'+'nt']():_0xda51b6++;return _0xda51b6;}}class $D extends Nn{constructor(_0x5d8ebc,_0x4772b8,_0x2398cb,_0x1e1a4f,_0x14e6b9,_0x4d7b6c,_0x48f03b,_0x140e17,_0x16189d){_0x4d7b6c['sort']((_0x135406,_0x2cfe66)=>_0x135406['point']-_0x2cfe66['point']),super(_0x5d8ebc,_0x4772b8,_0x2398cb,_0x1e1a4f,_0x14e6b9,_0x4d7b6c,_0x48f03b,_0x140e17,_0x16189d);}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x43fcee=-0x167*-0x7+0xdf+0xab0*-0x1;this['_children'][-0x24b6+0x230e+0x1a8]['weight']=0x1f07+-0x15*0xcf+-0xe0c;for(let _0x4ea68f=-0x2591*-0x1+-0x19cf+-0xbc2;_0x4ea68f<this['_children']['length'];_0x4ea68f++){const _0x4985e8=this['_children'][_0x4ea68f];if(_0x4ea68f!==this['_children']['length']-(-0x504+0x24ea+0x5*-0x661)){const _0x17befb=this['_children'][_0x4ea68f+(-0x201+0x2*0xdbd+0x28c*-0xa)];if(_0x4985e8['point']===_0x17befb['point'])_0x4985e8['weight']=-0x1a1*0x1+0xfc7*-0x1+-0x45a*-0x4+0.5,_0x17befb['weight']=0x1fe+0xa*0x79+0xd7*-0x8+0.5;else{if(Y['between'](this['_parameter'+'Values'][0x1b95+-0x12e6+-0x75*0x13],_0x4985e8['point'],_0x17befb['point'],!(-0xfd0+-0x655+0x1625))){const _0x14980f=Math['abs'](_0x4985e8['point']-_0x17befb['point']),_0x46448c=Math['abs'](_0x4985e8['point']-this['_parameter'+'Values'][-0x6c0+0x1*0x1e56+-0x2*0xbcb]),_0x2de92f=(_0x14980f-_0x46448c)/_0x14980f;_0x4985e8['weight']=_0x2de92f,_0x17befb['weight']=-0x1*0x1b02+0x1401+0x702-_0x2de92f;}else _0x17befb['weight']=0xbb0+0x1*-0x79d+0x413*-0x1;}}this['_syncAnima'+'tions']&&(_0x43fcee+=_0x4985e8['animTrack']['duration']/_0x4985e8['absoluteSp'+'eed']*_0x4985e8['weight']);}if(this['_syncAnima'+'tions'])for(let _0x2eaa61=-0x1*-0x256a+0x373+-0x28dd;_0x2eaa61<this['_children']['length'];_0x2eaa61++){const _0x3296b5=this['_children'][_0x2eaa61];_0x3296b5['weightedSp'+'eed']=_0x3296b5['animTrack']['duration']/_0x3296b5['absoluteSp'+'eed']/_0x43fcee;}}}const Mi=class Mi extends Nn{['pointDista'+'nceCache'](_0x10366e,_0xd901ef){const _0x123bee=''+_0x10366e+_0xd901ef;return this['_pointCach'+'e'][_0x123bee]||(this['_pointCach'+'e'][_0x123bee]=this['_children'][_0xd901ef]['point']['clone']()['sub'](this['_children'][_0x10366e]['point'])),this['_pointCach'+'e'][_0x123bee];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x41ef2f,_0x5868fe;Mi['_p']['set'](...this['_parameter'+'Values']),_0x41ef2f=-0x13b6+-0x303+0x16b9,_0x5868fe=-0x1*0xc56+0x8*0x3f1+-0x1332;for(let _0x2230c6=-0x3*0x8d8+0x34*0x83+-0xa*0x2;_0x2230c6<this['_children']['length'];_0x2230c6++){const _0x3d3034=this['_children'][_0x2230c6],_0x4bd33b=_0x3d3034['point'];Mi['_pip']['set'](Mi['_p']['x'],Mi['_p']['y'])['sub'](_0x4bd33b);let _0x3ab2f3=Number['MAX_VALUE'];for(let _0x5aa62d=0x1*0x21f+-0x1abd*-0x1+-0x1cdc;_0x5aa62d<this['_children']['length'];_0x5aa62d++){if(_0x2230c6===_0x5aa62d)continue;const _0x590385=this['pointDista'+'nceCache'](_0x2230c6,_0x5aa62d),_0x4bbeaa=Y['clamp'](-0x15*0x105+-0x2108+0x3*0x1226-Mi['_pip']['dot'](_0x590385)/_0x590385['lengthSq'](),-0x21b4+-0x102*0x2+0x23b8,-0x1*-0x35b+-0x98a+0x4*0x18c);_0x4bbeaa<_0x3ab2f3&&(_0x3ab2f3=_0x4bbeaa);}_0x3d3034['weight']=_0x3ab2f3,_0x41ef2f+=_0x3ab2f3,this['_syncAnima'+'tions']&&(_0x5868fe+=_0x3d3034['animTrack']['duration']/_0x3d3034['absoluteSp'+'eed']*_0x3d3034['weight']);}for(let _0x4685d3=-0x2405*-0x1+0xb47*0x1+-0x2f4c;_0x4685d3<this['_children']['length'];_0x4685d3++){const _0xa7596a=this['_children'][_0x4685d3];_0xa7596a['weight']=_0xa7596a['_weight']/_0x41ef2f,this['_syncAnima'+'tions']&&(_0xa7596a['weightedSp'+'eed']=_0xa7596a['animTrack']['duration']/_0xa7596a['absoluteSp'+'eed']/_0x5868fe);}}};h(Mi,'_p',new J()),h(Mi,'_pip',new J());let Hf=Mi;const Ii=class Ii extends Nn{['pointCache'](_0x53dd71,_0x46e0f2){const _0x49a7cf=''+_0x53dd71+_0x46e0f2;return this['_pointCach'+'e'][_0x49a7cf]||(this['_pointCach'+'e'][_0x49a7cf]=new J((this['_children'][_0x46e0f2]['pointLengt'+'h']-this['_children'][_0x53dd71]['pointLengt'+'h'])/((this['_children'][_0x46e0f2]['pointLengt'+'h']+this['_children'][_0x53dd71]['pointLengt'+'h'])/(0x99b+-0x1fe1+0x1648)),J['angleRad'](this['_children'][_0x53dd71]['point'],this['_children'][_0x46e0f2]['point'])*(-0x2b6*0x2+0x3*-0x429+-0x5*-0x395))),this['_pointCach'+'e'][_0x49a7cf];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x523930,_0x394569;Ii['_p']['set'](...this['_parameter'+'Values']);const _0x11a6a4=Ii['_p']['length']();_0x523930=-0x4*-0x58b+-0xc*0x15d+-0x5d0,_0x394569=-0x14ca+0x322+0x388*0x5;for(let _0x3fb1ec=-0x1bb7+0x2*-0x130e+0x3*0x15f1;_0x3fb1ec<this['_children']['length'];_0x3fb1ec++){const _0x1763ef=this['_children'][_0x3fb1ec],_0x42523c=_0x1763ef['point'],_0x566afe=_0x1763ef['pointLengt'+'h'];let _0x4143e9=Number['MAX_VALUE'];for(let _0x64a173=-0x4d*0x75+0x96b*0x1+0x19c6;_0x64a173<this['_children']['length'];_0x64a173++){if(_0x3fb1ec===_0x64a173)continue;const _0x58710a=this['pointCache'](_0x3fb1ec,_0x64a173),_0x450cb9=this['_children'][_0x64a173]['pointLengt'+'h'];Ii['_pip']['set']((_0x11a6a4-_0x566afe)/((_0x450cb9+_0x566afe)/(0x1022+0x550*-0x3+0x30*-0x1)),J['angleRad'](_0x42523c,Ii['_p'])*(-0x1f29+0x4*0x107+0x3*0x905));const _0x38e002=Y['clamp'](0xd*0x9d+0x250f+0x2d07*-0x1-Math['abs'](Ii['_pip']['dot'](_0x58710a)/_0x58710a['lengthSq']()),0x39*-0x8b+0x1*0xafb+0x13f8*0x1,0x1353*0x2+-0x89*-0x22+-0x38d7);_0x38e002<_0x4143e9&&(_0x4143e9=_0x38e002);}_0x1763ef['weight']=_0x4143e9,_0x523930+=_0x4143e9,this['_syncAnima'+'tions']&&(_0x394569+=_0x1763ef['animTrack']['duration']/_0x1763ef['absoluteSp'+'eed']*_0x1763ef['weight']);}for(let _0x3edaa5=0x1*-0x92f+0xe*-0x23b+-0x1*-0x2869;_0x3edaa5<this['_children']['length'];_0x3edaa5++){const _0x16efc4=this['_children'][_0x3edaa5];if(_0x16efc4['weight']=_0x16efc4['_weight']/_0x523930,this['_syncAnima'+'tions']){const _0x1b539b=_0x16efc4['animTrack']['duration']/_0x394569*_0x523930;_0x16efc4['weightedSp'+'eed']=_0x16efc4['absoluteSp'+'eed']*_0x1b539b;}}}};h(Ii,'_p',new J()),h(Ii,'_pip',new J());let Wf=Ii;class XD extends Nn{['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x406785=-0x1*0x21bd+0xfa2+0x121b,_0xc170ac=0x1073*0x2+0x4bd+0xeb*-0x29;for(let _0x1ea769=0x1ed*-0x7+0x525+0x2*0x42b;_0x1ea769<this['_children']['length'];_0x1ea769++)if(_0x406785+=Math['max'](this['_parameter'+'Values'][_0x1ea769],-0x1826+0xca8+0xb7e),this['_syncAnima'+'tions']){const _0x3c71cb=this['_children'][_0x1ea769];_0xc170ac+=_0x3c71cb['animTrack']['duration']/_0x3c71cb['absoluteSp'+'eed']*_0x3c71cb['weight'];}for(let _0x5ca442=0x143*0x3+-0x1433+-0x835*-0x2;_0x5ca442<this['_children']['length'];_0x5ca442++){const _0x52d408=this['_children'][_0x5ca442],_0x10ed40=Math['max'](this['_parameter'+'Values'][_0x5ca442],0x432+0x612*-0x2+0x1*0x7f2);_0x406785?(_0x52d408['weight']=_0x10ed40/_0x406785,this['_syncAnima'+'tions']&&(_0x52d408['weightedSp'+'eed']=_0x52d408['animTrack']['duration']/_0x52d408['absoluteSp'+'eed']/_0xc170ac)):(_0x52d408['weight']=0x1390*0x1+0x481*0x5+-0x4ad*0x9,this['_syncAnima'+'tions']&&(_0x52d408['weightedSp'+'eed']=0xa*-0x9d+0x7*0x3c+0x2*0x23f));}}}class K_{constructor(_0xf470ea,_0x1d4894,_0x2cdf1a=-0x1afc+-0xcd0+0x27cd,_0x4327a6=!(0x17*0x136+-0xbf6+0x6*-0x2a6),_0x2fa24e){h(this,'_animation'+'s',{}),h(this,'_animation'+'List',[]),(this['_controlle'+'r']=_0xf470ea,this['_name']=_0x1d4894,this['_speed']=_0x2cdf1a,this['_loop']=_0x4327a6,this['_hasAnimat'+'ions']=!(-0x207*0xd+0xbaf+0xead),_0x2fa24e?this['_blendTree']=this['_createTre'+'e'](_0x2fa24e['type'],this,null,_0x1d4894,-0x18cb+0xb3f+0xd8d,_0x2fa24e['parameter']?[_0x2fa24e['parameter']]:_0x2fa24e['parameters'],_0x2fa24e['children'],_0x2fa24e['syncAnimat'+'ions'],this['_createTre'+'e'],this['_controlle'+'r']['findParame'+'ter']):this['_blendTree']=new Wo(this,null,_0x1d4894,-0x23c1+0x16d7+0xceb*0x1,_0x2cdf1a));}['_createTre'+'e'](_0xa24bca,_0x58ced5,_0x4df058,_0x29de09,_0x82942a,_0x350897,_0x48bee9,_0x3b5c6a,_0x212b35,_0x57d6a8){switch(_0xa24bca){case UD:return new $D(_0x58ced5,_0x4df058,_0x29de09,_0x82942a,_0x350897,_0x48bee9,_0x3b5c6a,_0x212b35,_0x57d6a8);case zD:return new Hf(_0x58ced5,_0x4df058,_0x29de09,_0x82942a,_0x350897,_0x48bee9,_0x3b5c6a,_0x212b35,_0x57d6a8);case BD:return new Wf(_0x58ced5,_0x4df058,_0x29de09,_0x82942a,_0x350897,_0x48bee9,_0x3b5c6a,_0x212b35,_0x57d6a8);case VD:return new XD(_0x58ced5,_0x4df058,_0x29de09,_0x82942a,_0x350897,_0x48bee9,_0x3b5c6a,_0x212b35,_0x57d6a8);}M['error']('Invalid\x20an'+'im\x20blend\x20t'+'ype:\x20'+_0xa24bca);}['_getNodeFr'+'omPath'](_0x1bb87c){let _0x4367d3=this['_blendTree'];for(let _0x206d9a=-0x1*-0x179f+0x1c1*-0x15+0x1*0xd37;_0x206d9a<_0x1bb87c['length'];_0x206d9a++)_0x4367d3=_0x4367d3['getChild'](_0x1bb87c[_0x206d9a]);return _0x4367d3;}['addAnimati'+'on'](_0x59dd04,_0x225313){const _0x2fd01e=_0x59dd04['join']('.'),_0x50c248=this['_animation'+'List']['findIndex'](_0x3ae1c2=>_0x3ae1c2['path']===_0x2fd01e);if(_0x50c248>=0x17*0x10d+0xd*-0x2e6+0xd83*0x1)this['_animation'+'List'][_0x50c248]['animTrack']=_0x225313;else{const _0x259001=this['_getNodeFr'+'omPath'](_0x59dd04);_0x259001['animTrack']=_0x225313,this['_animation'+'List']['push'](_0x259001);}this['_updateHas'+'Animations']();}['_updateHas'+'Animations'](){this['_hasAnimat'+'ions']=this['_animation'+'List']['length']>-0x7*-0x57a+0x1bce+-0x1089*0x4&&this['_animation'+'List']['every'](_0x13420a=>_0x13420a['animTrack']&&_0x13420a['animTrack']!==Gi['EMPTY']);}get['name'](){return this['_name'];}set['animations'](_0x11431b){this['_animation'+'List']=_0x11431b,this['_updateHas'+'Animations']();}get['animations'](){return this['_animation'+'List'];}get['hasAnimati'+'ons'](){return this['_hasAnimat'+'ions'];}set['speed'](_0x111f8f){this['_speed']=_0x111f8f;}get['speed'](){return this['_speed'];}set['loop'](_0x214a57){this['_loop']=_0x214a57;}get['loop'](){return this['_loop'];}get['nodeCount'](){return!this['_blendTree']||this['_blendTree']['constructo'+'r']===Wo?-0x1602+-0xd6d*0x1+0x2370:this['_blendTree']['getNodeCou'+'nt']();}get['playable'](){return sc['indexOf'](this['name'])!==-(0x1a23*-0x1+0x3*0xc6+0x17d2)||this['animations']['length']===this['nodeCount'];}get['looping'](){if(this['animations']['length']>0xe96*-0x2+0x1c5*0x16+-0x9c2){const _0x48d6b7=this['name']+'.'+this['animations'][-0xbd6+-0x1*0xec5+0x8b*0x31]['animTrack']['name'],_0x2e6fa3=this['_controlle'+'r']['animEvalua'+'tor']['findClip'](_0x48d6b7);if(_0x2e6fa3)return _0x2e6fa3['loop'];}return!(-0x13*0x7f+0x15ed+0x1*-0xc7f);}get['totalWeigh'+'t'](){let _0x416c99=0xd3*0x29+-0x247d+-0x1e*-0x17;for(let _0x3276f8=-0x13ca+0x18*-0x15+0x45a*0x5;_0x3276f8<this['animations']['length'];_0x3276f8++)_0x416c99+=this['animations'][_0x3276f8]['weight'];return _0x416c99;}get['timelineDu'+'ration'](){let _0x41bc11=-0x403*-0x8+0x78b+-0x27a3;for(let _0x16b094=0x46*-0x3d+-0x1*-0x2351+-0x1*0x12a3;_0x16b094<this['animations']['length'];_0x16b094++){const _0xb24bb=this['animations'][_0x16b094];_0xb24bb['animTrack']['duration']>_0x41bc11&&(_0x41bc11=_0xb24bb['animTrack']['duration']);}return _0x41bc11;}}class ic{constructor({from:_0x14394d,to:_0x32d7d,time:_0x3fca37=-0x239*-0x3+-0x1239+0x3*0x3da,priority:_0x302659=-0x119*0x5+0x8f*-0x2e+-0xa65*-0x3,conditions:_0x2ce782=[],exitTime:_0x3c1110=null,transitionOffset:_0x7ec6ad=null,interruptionSource:_0x467deb=jy}){this['_from']=_0x14394d,this['_to']=_0x32d7d,this['_time']=_0x3fca37,this['_priority']=_0x302659,this['_condition'+'s']=_0x2ce782,this['_exitTime']=_0x3c1110,this['_transitio'+'nOffset']=_0x7ec6ad,this['_interrupt'+'ionSource']=_0x467deb;}get['from'](){return this['_from'];}set['to'](_0x530303){this['_to']=_0x530303;}get['to'](){return this['_to'];}get['time'](){return this['_time'];}get['priority'](){return this['_priority'];}get['conditions'](){return this['_condition'+'s'];}get['exitTime'](){return this['_exitTime'];}get['transition'+'Offset'](){return this['_transitio'+'nOffset'];}get['interrupti'+'onSource'](){return this['_interrupt'+'ionSource'];}get['hasExitTim'+'e'](){return!!this['exitTime'];}}class qD{constructor(_0x253193,_0x3289a6,_0x5d86d5,_0xe76d5f,_0x3615da,_0x28c777,_0x2f0796){h(this,'_states',{}),h(this,'_stateName'+'s',[]),h(this,'_findTrans'+'itionsFrom'+'StateCache',{}),h(this,'_findTrans'+'itionsBetw'+'eenStatesC'+'ache',{}),h(this,'_previousS'+'tateName',null),h(this,'_activeSta'+'teName',no),h(this,'_activeSta'+'teDuration',-0x2235+-0x2437+-0x2*-0x2336),h(this,'_activeSta'+'teDuration'+'Dirty',!(0x25eb*0x1+0x1*0x875+-0x10*0x2e6)),h(this,'_playing',!(-0x91d*0x1+-0xa8b*0x1+0x2cf*0x7)),h(this,'_activate'),h(this,'_transitio'+'ns'),h(this,'_currTrans'+'itionTime',-0x245*-0xd+0x1*-0x1271+-0xb0f),h(this,'_totalTran'+'sitionTime',-0xe1e+0x207*-0x11+0x184b*0x2),h(this,'_isTransit'+'ioning',!(-0x10*-0xac+0x1a49+-0x2508)),h(this,'_transitio'+'nInterrupt'+'ionSource',jy),h(this,'_transitio'+'nPreviousS'+'tates',[]),h(this,'_timeInSta'+'te',-0x833+0x3*-0x6d3+0x2de*0xa),h(this,'_timeInSta'+'teBefore',0xa1c*0x1+-0x1158+-0x39e*-0x2),h(this,'findParame'+'ter',_0x1eb126=>this['_findParam'+'eter'](_0x1eb126)),(this['_animEvalu'+'ator']=_0x253193,this['_eventHand'+'ler']=_0x3615da,this['_findParam'+'eter']=_0x28c777,this['_consumeTr'+'igger']=_0x2f0796);for(let _0x19aa46=-0x4c4*-0x1+0x2*0xa51+-0x1966;_0x19aa46<_0x3289a6['length'];_0x19aa46++)this['_states'][_0x3289a6[_0x19aa46]['name']]=new K_(this,_0x3289a6[_0x19aa46]['name'],_0x3289a6[_0x19aa46]['speed'],_0x3289a6[_0x19aa46]['loop'],_0x3289a6[_0x19aa46]['blendTree']),this['_stateName'+'s']['push'](_0x3289a6[_0x19aa46]['name']);this['_transitio'+'ns']=_0x5d86d5['map'](_0x43b1b2=>new ic({..._0x43b1b2})),this['_activate']=_0xe76d5f;}get['animEvalua'+'tor'](){return this['_animEvalu'+'ator'];}set['activeStat'+'e'](_0x5170d4){this['_activeSta'+'teName']=_0x5170d4;}get['activeStat'+'e'](){return this['_findState'](this['_activeSta'+'teName']);}get['activeStat'+'eName'](){return this['_activeSta'+'teName'];}get['activeStat'+'eAnimation'+'s'](){return this['activeStat'+'e']['animations'];}set['previousSt'+'ate'](_0x2be0d6){this['_previousS'+'tateName']=_0x2be0d6;}get['previousSt'+'ate'](){return this['_findState'](this['_previousS'+'tateName']);}get['previousSt'+'ateName'](){return this['_previousS'+'tateName'];}get['playable'](){let _0x5b629a=!(0xab6*-0x1+0x1*-0x12b7+0x1d6d);for(let _0x4d8590=0x8b*-0x5+-0x1*-0x16dd+-0x1426;_0x4d8590<this['_stateName'+'s']['length'];_0x4d8590++)this['_states'][this['_stateName'+'s'][_0x4d8590]]['playable']||(_0x5b629a=!(0x193*-0x11+-0x15e4+0x30a8));return _0x5b629a;}set['playing'](_0x1d3d6b){this['_playing']=_0x1d3d6b;}get['playing'](){return this['_playing'];}get['activeStat'+'eProgress'](){return this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);}get['activeStat'+'eDuration'](){if(this['_activeSta'+'teDuration'+'Dirty']){let _0x28aa0a=-0x12+-0x29e*-0x3+-0x7c8;for(let _0xe26289=-0xba5+0x1501+-0x95c;_0xe26289<this['activeStat'+'eAnimation'+'s']['length'];_0xe26289++){const _0x28889d=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][_0xe26289]['name']);_0x28889d&&(_0x28aa0a=Math['max'](_0x28aa0a,_0x28889d['track']['duration']));}this['_activeSta'+'teDuration']=_0x28aa0a,this['_activeSta'+'teDuration'+'Dirty']=!(-0x3*0xc4f+-0xb*-0x2d2+0xfc*0x6);}return this['_activeSta'+'teDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x10aaf9){this['_timeInSta'+'teBefore']=_0x10aaf9,this['_timeInSta'+'te']=_0x10aaf9;for(let _0x5cadd1=-0x168*0x15+-0xb15+0x289d*0x1;_0x5cadd1<this['activeStat'+'eAnimation'+'s']['length'];_0x5cadd1++){const _0x4c594c=this['animEvalua'+'tor']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x5cadd1]['name']);_0x4c594c&&(_0x4c594c['time']=_0x10aaf9);}}get['activeStat'+'eCurrentTi'+'me'](){return this['_timeInSta'+'te'];}get['transition'+'ing'](){return this['_isTransit'+'ioning'];}get['transition'+'Progress'](){return this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime'];}get['states'](){return this['_stateName'+'s'];}['assignMask'](_0x58c39e){return this['_animEvalu'+'ator']['assignMask'](_0x58c39e);}['_findState'](_0x198d47){return this['_states'][_0x198d47];}['_getActive'+'StateProgr'+'essForTime'](_0x1a7b74){if(this['activeStat'+'eName']===no||this['activeStat'+'eName']===zf||this['activeStat'+'eName']===Rr)return-0x1022+0x5*-0x2e4+0x1e97;const _0xadc00f=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][0x6b6*-0x1+0x15d*-0x18+-0x7*-0x5a2]['name']);return _0xadc00f?_0xadc00f['progressFo'+'rTime'](_0x1a7b74):null;}['_findTrans'+'itionsFrom'+'State'](_0x3d501d){let _0x4caa72=this['_findTrans'+'itionsFrom'+'StateCache'][_0x3d501d];return _0x4caa72||(_0x4caa72=this['_transitio'+'ns']['filter'](_0x30a74b=>_0x30a74b['from']===_0x3d501d),Go(_0x4caa72),this['_findTrans'+'itionsFrom'+'StateCache'][_0x3d501d]=_0x4caa72),_0x4caa72;}['_findTrans'+'itionsBetw'+'eenStates'](_0x155de5,_0x321ba1){let _0x8a37ff=this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x155de5+'->'+_0x321ba1];return _0x8a37ff||(_0x8a37ff=this['_transitio'+'ns']['filter'](_0x541d3a=>_0x541d3a['from']===_0x155de5&&_0x541d3a['to']===_0x321ba1),Go(_0x8a37ff),this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x155de5+'->'+_0x321ba1]=_0x8a37ff),_0x8a37ff;}['_transitio'+'nHasCondit'+'ionsMet'](_0x5dbf19){const _0x233568=_0x5dbf19['conditions'];for(let _0x3e5861=-0x4db*0x3+0x7*-0x2f+-0x2*-0x7ed;_0x3e5861<_0x233568['length'];_0x3e5861++){const _0xbc802=_0x233568[_0x3e5861],_0x49a84d=this['_findParam'+'eter'](_0xbc802['parameterN'+'ame']);switch(_0xbc802['predicate']){case LD:if(!(_0x49a84d['value']>_0xbc802['value']))return!(0xc5b+-0x2*-0xca+-0x6f7*0x2);break;case RD:if(!(_0x49a84d['value']<_0xbc802['value']))return!(0x1e56*-0x1+0xf*0x5c+0x18f3);break;case OD:if(!(_0x49a84d['value']>=_0xbc802['value']))return!(-0x44d*-0x1+-0x2017+0x1bcb);break;case FD:if(!(_0x49a84d['value']<=_0xbc802['value']))return!(0x1b04+0x3c9+0x1b6*-0x12);break;case ND:if(_0x49a84d['value']!==_0xbc802['value'])return!(-0x2*0x9f2+-0x1*0x11cb+0x25b0);break;case kD:if(_0x49a84d['value']===_0xbc802['value'])return!(-0x875*0x2+-0x20*0x2b+-0xd*-0x1b7);break;}}return!(-0x2e*-0x66+0x1bc5*0x1+-0x2e19);}['_findTrans'+'ition'](_0x170191,_0x3989a0){let _0x177222=[];if(_0x170191&&_0x3989a0)_0x177222=_0x177222['concat'](this['_findTrans'+'itionsBetw'+'eenStates'](_0x170191,_0x3989a0));else{if(!this['_isTransit'+'ioning'])_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));else switch(this['_transitio'+'nInterrupt'+'ionSource']){case PD:_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));break;case MD:_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));break;case ID:_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));break;case DD:_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x177222=_0x177222['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));break;}}if(_0x177222=_0x177222['filter'](_0x3d57f3=>{if(_0x3d57f3['to']===this['activeStat'+'eName'])return!(-0x36*-0x3c+-0xa1e+-0x289);if(_0x3d57f3['hasExitTim'+'e']){let _0x37938f=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'teBefore']),_0x57229c=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);if(_0x3d57f3['exitTime']<0x8e8+-0x1205+0x2*0x48f&&this['activeStat'+'e']['loop']&&(_0x37938f-=Math['floor'](_0x37938f),_0x57229c-=Math['floor'](_0x57229c)),_0x57229c===_0x37938f){if(_0x57229c!==_0x3d57f3['exitTime'])return null;}else{if(!(_0x3d57f3['exitTime']>_0x37938f&&_0x3d57f3['exitTime']<=_0x57229c))return null;}}return this['_transitio'+'nHasCondit'+'ionsMet'](_0x3d57f3);}),_0x177222['length']>-0x2dd*-0x3+-0x5*-0x148+-0xeff*0x1){const _0xb9da2b=_0x177222[-0x35b+0x3d*0x61+-0x9*0x232];if(_0xb9da2b['to']===zf){const _0x4951f0=this['_findTrans'+'itionsFrom'+'State'](no)[-0x85e+-0x5d5*-0x1+-0xb*-0x3b];_0xb9da2b['to']=_0x4951f0['to'];}return _0xb9da2b;}return null;}['updateStat'+'eFromTrans'+'ition'](_0x509b37){let _0xb93bcf,_0x29c781,_0x4416de;this['previousSt'+'ate']=_0x509b37['from']?this['activeStat'+'eName']:null,this['activeStat'+'e']=_0x509b37['to'],this['_activeSta'+'teDuration'+'Dirty']=!(-0x47d*-0x4+0xf83+-0x2177);for(let _0x30a74f=-0x17e7+0x88+0x1f*0xc1;_0x30a74f<_0x509b37['conditions']['length'];_0x30a74f++){const _0x9b6381=_0x509b37['conditions'][_0x30a74f];this['_findParam'+'eter'](_0x9b6381['parameterN'+'ame'])['type']===yh&&this['_consumeTr'+'igger'](_0x9b6381['parameterN'+'ame']);}if(this['previousSt'+'ate']){this['_isTransit'+'ioning']||(this['_transitio'+'nPreviousS'+'tates']=[]),this['_transitio'+'nPreviousS'+'tates']['push']({'name':this['_previousS'+'tateName'],'weight':0x1});const _0x548ee4=Math['min'](this['_totalTran'+'sitionTime']!==0x1ff*-0x10+0x2628+0xc7*-0x8?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:0x749*0x4+0x10b1*-0x2+0x43f,-0x3*0xc47+-0x25f6*0x1+0x4*0x12b3);for(let _0x15a68b=-0xfbd+-0x7c9*0x3+0x12*0x22c;_0x15a68b<this['_transitio'+'nPreviousS'+'tates']['length'];_0x15a68b++){this['_isTransit'+'ioning']?_0x15a68b!==this['_transitio'+'nPreviousS'+'tates']['length']-(-0x3*-0x9fd+0x753+-0x2549)?this['_transitio'+'nPreviousS'+'tates'][_0x15a68b]['weight']*=-0x6*-0x20c+-0x91*0x3d+-0x1*-0x1646-_0x548ee4:this['_transitio'+'nPreviousS'+'tates'][_0x15a68b]['weight']=_0x548ee4:this['_transitio'+'nPreviousS'+'tates'][_0x15a68b]['weight']=0xb3*-0xd+-0x1af0*-0x1+0x8*-0x23b,_0xb93bcf=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x15a68b]['name']);for(let _0x543337=0x2c*-0x3+-0x10b4+-0x1138*-0x1;_0x543337<_0xb93bcf['animations']['length'];_0x543337++)_0x29c781=_0xb93bcf['animations'][_0x543337],_0x4416de=this['_animEvalu'+'ator']['findClip'](_0x29c781['name']+'.previous.'+_0x15a68b),_0x4416de||(_0x4416de=this['_animEvalu'+'ator']['findClip'](_0x29c781['name']),_0x4416de['name']=_0x29c781['name']+'.previous.'+_0x15a68b),_0x15a68b!==this['_transitio'+'nPreviousS'+'tates']['length']-(-0xc6a+0x2*-0xcc7+0x25f9)&&_0x4416de['pause']();}}this['_isTransit'+'ioning']=!(0x1e2d+-0x139f*-0x1+-0x31cc),this['_totalTran'+'sitionTime']=_0x509b37['time'],this['_currTrans'+'itionTime']=-0x101*-0x8+0x4a*0x2e+-0x23*0x9c,this['_transitio'+'nInterrupt'+'ionSource']=_0x509b37['interrupti'+'onSource'];const _0x50a7ed=this['activeStat'+'e'],_0x3d42b0=_0x509b37['transition'+'Offset']&&_0x509b37['transition'+'Offset']>-0x166e+-0x1aa5+0x3113&&_0x509b37['transition'+'Offset']<-0x51*-0x47+-0x185a+0x1e4*0x1;let _0x55a78e=0xe27+0x622*-0x3+-0x43f*-0x1,_0x3206ac=0xa17+0xd4f+0x5*-0x4ae;if(_0x3d42b0){const _0x3c88ab=_0x50a7ed['timelineDu'+'ration']*_0x509b37['transition'+'Offset'];_0x55a78e=_0x3c88ab,_0x3206ac=_0x3c88ab;}this['_timeInSta'+'te']=_0x55a78e,this['_timeInSta'+'teBefore']=_0x3206ac;for(let _0x3aa09e=0x893+-0x1*-0x779+0x4f*-0x34;_0x3aa09e<_0x50a7ed['animations']['length'];_0x3aa09e++){if(_0x4416de=this['_animEvalu'+'ator']['findClip'](_0x50a7ed['animations'][_0x3aa09e]['name']),_0x4416de)_0x4416de['reset']();else{const _0xebc5a1=Number['isFinite'](_0x50a7ed['animations'][_0x3aa09e]['speed'])?_0x50a7ed['animations'][_0x3aa09e]['speed']:_0x50a7ed['speed'];_0x4416de=new tc(_0x50a7ed['animations'][_0x3aa09e]['animTrack'],this['_timeInSta'+'te'],_0xebc5a1,!(0x9bf*0x2+0x8*-0x49+-0x2*0x89b),_0x50a7ed['loop'],this['_eventHand'+'ler']),_0x4416de['name']=_0x50a7ed['animations'][_0x3aa09e]['name'],this['_animEvalu'+'ator']['addClip'](_0x4416de);}if(_0x509b37['time']>0x1*-0x21cd+-0xf49+-0x2*-0x188b?_0x4416de['blendWeigh'+'t']=0xf18+-0x8d8*0x3+-0x30*-0x3d:_0x4416de['blendWeigh'+'t']=_0x50a7ed['animations'][_0x3aa09e]['normalized'+'Weight'],_0x4416de['play'](),_0x3d42b0)_0x4416de['time']=_0x50a7ed['timelineDu'+'ration']*_0x509b37['transition'+'Offset'];else{const _0x48f845=_0x50a7ed['speed']>=-0x361+-0x5*-0x538+-0x48b*0x5?0x1983+-0x1613+-0x370:this['activeStat'+'eDuration'];_0x4416de['time']=_0x48f845;}}}['_transitio'+'nToState'](_0x5a07bb){if(!this['_findState'](_0x5a07bb))return;let _0x5774bf=this['_findTrans'+'ition'](this['_activeSta'+'teName'],_0x5a07bb);_0x5774bf||(this['_animEvalu'+'ator']['removeClip'+'s'](),_0x5774bf=new ic({'from':null,'to':_0x5a07bb})),this['updateStat'+'eFromTrans'+'ition'](_0x5774bf);}['assignAnim'+'ation'](_0x2541af,_0x394aca,_0x4b79dd,_0x2b6133){const _0x37a0c5=_0x2541af['split']('.');let _0x4e9356=this['_findState'](_0x37a0c5[0x1bfa+0x2*0xcdb+-0x35b0]);_0x4e9356||(_0x4e9356=new K_(this,_0x37a0c5[-0x15*0x1d5+-0x989+0xa*0x4cd],_0x4b79dd),this['_states'][_0x37a0c5[0x18e+-0x1*-0x1e62+0x124*-0x1c]]=_0x4e9356,this['_stateName'+'s']['push'](_0x37a0c5[0x630+0x862+-0xe92])),_0x4e9356['addAnimati'+'on'](_0x37a0c5,_0x394aca),this['_animEvalu'+'ator']['updateClip'+'Track'](_0x4e9356['name'],_0x394aca),_0x4b79dd!==void(-0x1ee4+0x2a*-0xca+0x4008)&&(_0x4e9356['speed']=_0x4b79dd),_0x2b6133!==void(0x1e7a+0x1f*0x7c+-0x2d7e)&&(_0x4e9356['loop']=_0x2b6133),!this['_playing']&&this['_activate']&&this['playable']&&this['play'](),this['_activeSta'+'teDuration'+'Dirty']=!(0x1543+-0x126d*-0x2+-0x3a1d);}['removeNode'+'Animations'](_0x4e8138){if(sc['indexOf'](_0x4e8138)!==-(-0x3d*0x85+0x224*-0xa+0x351a))return!(0x2395*-0x1+-0x1d2*-0x1+0x21c4);const _0x125b4f=this['_findState'](_0x4e8138);return _0x125b4f?(_0x125b4f['animations']=[],!(-0xf43+-0x4*-0x6f9+0x35*-0x3d)):(M['error']('Attempting'+'\x20to\x20unassi'+'gn\x20animati'+'on\x20tracks\x20'+'from\x20a\x20sta'+'te\x20that\x20do'+'es\x20not\x20exi'+'st.',_0x4e8138),!(-0x207b+-0x1*-0x2656+0x5da*-0x1));}['play'](_0x1620f3){_0x1620f3&&this['_transitio'+'nToState'](_0x1620f3),this['_playing']=!(0x1f67*0x1+0x1*0x257f+-0x44e6);}['pause'](){this['_playing']=!(0x2371+-0x1bb*-0x10+-0x5*0xca0);}['reset'](){this['_previousS'+'tateName']=null,this['_activeSta'+'teName']=no,this['_playing']=!(0x1bc+-0x1cb4+0x1*0x1af9),this['_currTrans'+'itionTime']=-0xdf9*-0x2+-0x25ee+0x9fd,this['_totalTran'+'sitionTime']=0x193*0xd+0x1fc9+-0x343f*0x1,this['_isTransit'+'ioning']=!(0x716*0x1+0x64*-0x44+0x137b),this['_timeInSta'+'te']=0x185*-0x15+-0x14f*-0xd+0xee6*0x1,this['_timeInSta'+'teBefore']=0x216c+0x17*0xa3+-0x3011,this['_animEvalu'+'ator']['removeClip'+'s']();}['rebind'](){this['_animEvalu'+'ator']['rebind']();}['update'](_0x1aef40){if(!this['_playing'])return;let _0x5abc89,_0x76fc80,_0x2d8353;(this['activeStat'+'e']['loop']||this['_timeInSta'+'te']<this['activeStat'+'eDuration'])&&(this['_timeInSta'+'teBefore']=this['_timeInSta'+'te'],this['_timeInSta'+'te']+=_0x1aef40*this['activeStat'+'e']['speed'],!this['activeStat'+'e']['loop']&&this['_timeInSta'+'te']>this['activeStat'+'eDuration']&&(this['_timeInSta'+'te']=this['activeStat'+'eDuration'],_0x1aef40=this['activeStat'+'eDuration']-this['_timeInSta'+'teBefore']));const _0x45cd1b=this['_findTrans'+'ition'](this['_activeSta'+'teName']);if(_0x45cd1b&&this['updateStat'+'eFromTrans'+'ition'](_0x45cd1b),this['_isTransit'+'ioning']){if(this['_currTrans'+'itionTime']+=_0x1aef40,this['_currTrans'+'itionTime']<=this['_totalTran'+'sitionTime']){const _0x3b267e=this['_totalTran'+'sitionTime']!==0x1*0x801+-0x118f+0x98e?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0x5*-0x758+-0x4*-0x112+-0x28ff;for(let _0x25a607=0x2*-0x997+-0xa*0x112+0x1de2;_0x25a607<this['_transitio'+'nPreviousS'+'tates']['length'];_0x25a607++){_0x5abc89=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x25a607]['name']);const _0x5a015b=this['_transitio'+'nPreviousS'+'tates'][_0x25a607]['weight'];for(let _0x586e0a=0x70d*0x3+0xd86+0x22ad*-0x1;_0x586e0a<_0x5abc89['animations']['length'];_0x586e0a++)_0x76fc80=_0x5abc89['animations'][_0x586e0a],_0x2d8353=this['_animEvalu'+'ator']['findClip'](_0x76fc80['name']+'.previous.'+_0x25a607),_0x2d8353&&(_0x2d8353['blendWeigh'+'t']=(0x1472+0xad*-0x4+0x11bd*-0x1-_0x3b267e)*_0x76fc80['normalized'+'Weight']*_0x5a015b);}_0x5abc89=this['activeStat'+'e'];for(let _0x385050=-0x2312+0x53*0x7+-0x3*-0xaef;_0x385050<_0x5abc89['animations']['length'];_0x385050++)_0x76fc80=_0x5abc89['animations'][_0x385050],this['_animEvalu'+'ator']['findClip'](_0x76fc80['name'])['blendWeigh'+'t']=_0x3b267e*_0x76fc80['normalized'+'Weight'];}else{this['_isTransit'+'ioning']=!(-0x2211+0x264f+-0x43d);const _0x5a5668=this['activeStat'+'eAnimation'+'s']['length'],_0x3995c1=this['_animEvalu'+'ator']['clips']['length'];for(let _0x4d2951=0xf*-0x162+0xd70+0x74e;_0x4d2951<_0x3995c1-_0x5a5668;_0x4d2951++)this['_animEvalu'+'ator']['removeClip'](-0x94*-0xc+0x5a2+-0xc92);this['_transitio'+'nPreviousS'+'tates']=[],_0x5abc89=this['activeStat'+'e'];for(let _0x5a136c=-0x13d8+-0x11b0*-0x1+0x114*0x2;_0x5a136c<_0x5abc89['animations']['length'];_0x5a136c++)_0x76fc80=_0x5abc89['animations'][_0x5a136c],_0x2d8353=this['_animEvalu'+'ator']['findClip'](_0x76fc80['name']),_0x2d8353&&(_0x2d8353['blendWeigh'+'t']=_0x76fc80['normalized'+'Weight']);}}else{if(this['activeStat'+'e']['_blendTree']['constructo'+'r']!==Wo){_0x5abc89=this['activeStat'+'e'];for(let _0x42f38c=0x16*0x154+0x58a*0x1+-0x22c2;_0x42f38c<_0x5abc89['animations']['length'];_0x42f38c++)_0x76fc80=_0x5abc89['animations'][_0x42f38c],_0x2d8353=this['_animEvalu'+'ator']['findClip'](_0x76fc80['name']),_0x2d8353&&(_0x2d8353['blendWeigh'+'t']=_0x76fc80['normalized'+'Weight'],_0x76fc80['parent']['syncAnimat'+'ions']&&(_0x2d8353['speed']=_0x76fc80['speed']));}}this['_animEvalu'+'ator']['update'](_0x1aef40,this['activeStat'+'e']['hasAnimati'+'ons']);}}const Xd=new J(),Zl=new I(),Qn=new ae(),Jn=new ie(),eo=new le();class Ci extends rr{constructor(_0xcad041,_0x4663a5,_0x1e21c7,_0x41a089,_0x4b4452){super(_0x4663a5),this['animCompon'+'ent']=_0xcad041,this['_mask']=_0x41a089,this['layerName']=_0x1e21c7,this['layerIndex']=_0x4b4452;}static['_packFloat'](_0x11e224){return _0x11e224[0x1*0xc8f+-0x1ac1*-0x1+-0x94*0x44];}static['_packBoole'+'an'](_0x20c8b8){return!!_0x20c8b8[-0x399+0x2*-0xb96+0x1ac5];}static['_packVec2'](_0x369aaf){return Xd['x']=_0x369aaf[0x1988+-0x12a3+0x6e5*-0x1],Xd['y']=_0x369aaf[0x1*-0x1903+-0x6b6+0x83*0x3e],Xd;}static['_packVec3'](_0x465204){return Zl['x']=_0x465204[-0x1c08+-0xa2e+0x2636],Zl['y']=_0x465204[0xa01*-0x2+-0x1405+-0x3*-0xd58],Zl['z']=_0x465204[0x7b6+-0x1c02+0xe2*0x17],Zl;}static['_packVec4'](_0x1b16c6){return Qn['x']=_0x1b16c6[-0x1e9*-0xd+0x1176+0x191*-0x1b],Qn['y']=_0x1b16c6[-0x13ed*-0x1+0x16ab+-0x1*0x2a97],Qn['z']=_0x1b16c6[0x1891+-0x18ec+0x5d],Qn['w']=_0x1b16c6[-0x3*-0xa30+-0x1d6f+-0x16*0xd],Qn;}static['_packColor'](_0x1f6fb4){return Jn['r']=_0x1f6fb4[0x1*0xb4b+0x3*0x61b+-0x1d9c],Jn['g']=_0x1f6fb4[-0x1*0x48b+0x1c45+-0x17b9*0x1],Jn['b']=_0x1f6fb4[0x14eb+0x8d6+-0x5*0x5f3],Jn['a']=_0x1f6fb4[-0x1ab9+-0x1*0x244d+0x3f09],Jn;}static['_packQuat'](_0x44c4c2){return eo['x']=_0x44c4c2[-0x1565+0xf4e+0x617],eo['y']=_0x44c4c2[-0xf9d+-0x1*0x2026+0x2fc4],eo['z']=_0x44c4c2[0x1*-0x6fd+0x53*-0x13+-0x1*-0xd28],eo['w']=_0x44c4c2[-0x41*-0x43+0xd+-0x5af*0x3],eo;}['resolve'](_0xb46158){const _0xe51a56=Gr['encode'](_0xb46158['entityPath'],_0xb46158['component'],_0xb46158['propertyPa'+'th']);let _0x2a75e9=this['targetCach'+'e'][_0xe51a56];if(_0x2a75e9)return _0x2a75e9;let _0x471d09,_0x5eebea,_0x17d1f5;switch(_0xb46158['component']){case'entity':_0x471d09=this['_getEntity'+'FromHierar'+'chy'](_0xb46158['entityPath']),_0x17d1f5=Gr['encode'](_0x471d09['path'],'entity',_0xb46158['propertyPa'+'th']),_0x5eebea=_0x471d09;break;case'graph':if(_0x5eebea=this['findNode'](_0xb46158),!_0x5eebea)return null;_0x17d1f5=Gr['encode'](_0x5eebea['path'],'graph',_0xb46158['propertyPa'+'th']);break;default:if(_0x471d09=this['_getEntity'+'FromHierar'+'chy'](_0xb46158['entityPath']),_0x5eebea=_0x471d09['findCompon'+'ent'](_0xb46158['component']),!_0x5eebea)return null;_0x17d1f5=Gr['encode'](_0x471d09['path'],_0xb46158['component'],_0xb46158['propertyPa'+'th']);break;}return _0x2a75e9=this['_createAni'+'mTargetFor'+'Property'](_0x5eebea,_0xb46158['propertyPa'+'th'],_0x17d1f5),this['targetCach'+'e'][_0xe51a56]=_0x2a75e9,_0x2a75e9;}['update'](_0x48b994){const _0x122439=this['activeNode'+'s'];if(_0x122439){for(let _0x27a386=0x3fb+0x89*-0x34+-0x21*-0xb9;_0x27a386<_0x122439['length'];_0x27a386++)_0x122439[_0x27a386]['_dirtifyLo'+'cal']();}}['_getEntity'+'FromHierar'+'chy'](_0x295eec){if(!this['animCompon'+'ent']['entity']['name']===_0x295eec[0x1*-0x1297+-0x902*-0x1+0x995])return null;const _0xa931be=this['animCompon'+'ent']['entity'];return _0x295eec['length']===0xbe5+0x177*0x4+-0x4*0x470?_0xa931be:_0xa931be['_parent']['findByPath'](_0x295eec);}['_resolvePa'+'th'](_0xc29331,_0x2889e6,_0x33d193){const _0x515475=_0x2889e6['length']-(_0x33d193?-0x1cb5*-0x1+0x1*-0x23b6+0x701:-0x1*-0x5cc+0x34*0x61+0x3d*-0x6b);for(let _0x24fca1=0x16de*0x1+0x2123+0x12ab*-0x3;_0x24fca1<_0x515475;_0x24fca1++)_0xc29331=_0xc29331[_0x2889e6[_0x24fca1]];return _0xc29331;}['_setter'](_0x763c98,_0x10f8fd,_0x519f2f){const _0x4f122b=this['_resolvePa'+'th'](_0x763c98,_0x10f8fd),_0x420d1b=_0x10f8fd[_0x10f8fd['length']-(0x1cc*0x2+-0x52*-0x56+-0x1f23)],_0x2907bc='set'+_0x420d1b['substring'](0xea*-0x7+0x12e+0x4*0x14e,0x108c+-0x2411*0x1+0x165*0xe)['toUpperCas'+'e']()+_0x420d1b['substring'](0x144+-0x833+-0x1*-0x6f0);if(_0x4f122b[_0x2907bc]){let _0x35670f=_0x4f122b['get'+_0x420d1b['substring'](0x1d7c+0x264b+0x43c7*-0x1,-0x1770+-0x1*-0x122b+0x546)['toUpperCas'+'e']()+_0x420d1b['substring'](-0x1*-0x1b9d+-0x1eca+0xb*0x4a)]['bind'](_0x4f122b)();_0x35670f=[_0x35670f['x'],_0x35670f['y'],_0x35670f['z'],_0x35670f['w']];const _0x1992f2=_0x4f122b[_0x2907bc]['bind'](_0x4f122b);return{'set':_0x2d7aef=>{_0x1992f2(_0x519f2f(_0x2d7aef));},'get':()=>_0x35670f};}const _0x57e85d=_0x4f122b[_0x420d1b];if(typeof _0x57e85d=='object'&&_0x57e85d['hasOwnProp'+'erty']('copy'))return function(_0x5cffac){_0x57e85d['copy'](_0x519f2f(_0x5cffac));};if([J,I,ae,ie,le]['indexOf'](_0x4f122b['constructo'+'r'])!==-(-0x373*-0x2+0x17*-0xd6+-0x1c3*-0x7)&&_0x10f8fd['length']>0x53*-0x1f+-0x51c*-0x5+0x7bf*-0x2){const _0x471849=_0x10f8fd['length']>-0x1561+-0x2554+-0x3ab7*-0x1?this['_resolvePa'+'th'](_0x763c98,_0x10f8fd['slice'](-0x1*0xef1+0x1cc3+-0xdd2,-(-0x67a+-0xbdb*-0x3+-0x1*0x1d16))):_0x763c98,_0x3c33f7=_0x10f8fd[_0x10f8fd['length']-(0xf13+-0x2511*0x1+0x58*0x40)];return function(_0x3c791d){_0x4f122b[_0x420d1b]=_0x519f2f(_0x3c791d),_0x471849[_0x3c33f7]=_0x4f122b;};}return function(_0x2fac6a){_0x4f122b[_0x420d1b]=_0x519f2f(_0x2fac6a);};}['_createAni'+'mTargetFor'+'Property'](_0x4bd79a,_0x4403ee,_0x4a3bdd){if(this['handlers']&&_0x4403ee[-0x1691+0x1d*-0x13d+0x3a7a]['startsWith']('weight.'))return this['handlers']['weight'](_0x4bd79a,_0x4403ee[0xb49+-0xdbd+0x274*0x1]['replace']('weight.',''));if(this['handlers']&&_0x4403ee[0x265*-0x7+-0x1c9*-0x9+0xb2]==='material'&&_0x4403ee['length']===-0x1b3a+-0x1*-0x150d+-0x1*-0x62f){const _0x29ffe3=_0x4403ee[0x305*-0xa+0x1fab+-0x178];if(_0x29ffe3['endsWith']('Map'))return this['handlers']['materialTe'+'xture'](_0x4bd79a,_0x29ffe3);}const _0x33c8b4=this['_resolvePa'+'th'](_0x4bd79a,_0x4403ee,!(0x1ac9*-0x1+0x298*0x8+0x609));if(typeof _0x33c8b4>'u')return null;let _0x3ebde6,_0x933a76,_0x5d2017;if(typeof _0x33c8b4=='number')_0x3ebde6=this['_setter'](_0x4bd79a,_0x4403ee,Ci['_packFloat']),_0x933a76='vector',_0x5d2017=-0x1bb3+0x162c+0x588;else{if(typeof _0x33c8b4=='boolean')_0x3ebde6=this['_setter'](_0x4bd79a,_0x4403ee,Ci['_packBoole'+'an']),_0x933a76='vector',_0x5d2017=-0x1bc3+0x21e2+-0x105*0x6;else{if(typeof _0x33c8b4=='object')switch(_0x33c8b4['constructo'+'r']){case J:_0x3ebde6=this['_setter'](_0x4bd79a,_0x4403ee,Ci['_packVec2']),_0x933a76='vector',_0x5d2017=-0x97a+-0x12cb+0x1*0x1c47;break;case I:_0x3ebde6=this['_setter'](_0x4bd79a,_0x4403ee,Ci['_packVec3']),_0x933a76='vector',_0x5d2017=0x19*0x16+-0x1*0x127c+0x1b*0x9b;break;case ae:_0x3ebde6=this['_setter'](_0x4bd79a,_0x4403ee,Ci['_packVec4']),_0x933a76='vector',_0x5d2017=-0x3f4+-0x1bbf*0x1+-0x17*-0x161;break;case ie:_0x3ebde6=this['_setter'](_0x4bd79a,_0x4403ee,Ci['_packColor']),_0x933a76='vector',_0x5d2017=0x26a1+-0x3*0xc11+-0xce*0x3;break;case le:_0x3ebde6=this['_setter'](_0x4bd79a,_0x4403ee,Ci['_packQuat']),_0x933a76='quaternion',_0x5d2017=0x1*-0x2237+0xaa5+0x1796;break;default:return null;}}}return _0x4403ee['indexOf']('material')!==-(0x54*-0x6+0xc2*0x33+-0x1*0x24ad)?new Vf(_0x15bfbb=>{_0x3ebde6(_0x15bfbb),_0x4bd79a['material']['update']();},_0x933a76,_0x5d2017,_0x4a3bdd):new Vf(_0x3ebde6,_0x933a76,_0x5d2017,_0x4a3bdd);}['rebind'](){this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={},this['animCompon'+'ent']['rootBone']?this['graph']=this['animCompon'+'ent']['rootBone']:this['graph']=this['animCompon'+'ent']['entity'];const _0x2e1337={},_0x576e5f=function(_0x7fe5c5){_0x2e1337[_0x7fe5c5['name']]=_0x7fe5c5;for(let _0x23ce00=0x557+0x187b+-0x1dd2;_0x23ce00<_0x7fe5c5['children']['length'];++_0x23ce00)_0x576e5f(_0x7fe5c5['children'][_0x23ce00]);};_0x576e5f(this['graph']),this['nodes']=_0x2e1337;}}class jD{constructor(_0x46ef40,_0x3cfd8b,_0xa9a0af,_0x6b0a30=-0x8d*-0xb+0x22d2*-0x1+0x4*0x731,_0xdf01a2=Yy){h(this,'_name'),h(this,'_controlle'+'r'),h(this,'_component'),h(this,'_weight'),h(this,'_blendType'),h(this,'_mask',null),h(this,'_blendTime',-0xe*0x2ba+0x3bb+0xb7b*0x3),h(this,'_blendTime'+'Elapsed',-0xdab+-0xcf9*0x1+0x16*0x136),h(this,'_startingW'+'eight',0xf3d+-0x1ba9+0xc6c),h(this,'_targetWei'+'ght',0x1169*-0x1+-0x13d2+-0x3*-0xc69),(this['_name']=_0x46ef40,this['_controlle'+'r']=_0x3cfd8b,this['_component']=_0xa9a0af,this['_weight']=_0x6b0a30,this['_blendType']=_0xdf01a2);}get['name'](){return this['_name'];}set['playing'](_0x2c9eb4){this['_controlle'+'r']['playing']=_0x2c9eb4;}get['playing'](){return this['_controlle'+'r']['playing'];}get['playable'](){return this['_controlle'+'r']['playable'];}get['activeStat'+'e'](){return this['_controlle'+'r']['activeStat'+'eName'];}get['previousSt'+'ate'](){return this['_controlle'+'r']['previousSt'+'ateName'];}get['activeStat'+'eProgress'](){return this['_controlle'+'r']['activeStat'+'eProgress'];}get['activeStat'+'eDuration'](){return this['_controlle'+'r']['activeStat'+'eDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x287054){const _0x48bf2f=this['_controlle'+'r'],_0x598eb4=_0x48bf2f['playing'];_0x48bf2f['playing']=!(-0x1f94+-0x1bc+-0x10a8*-0x2),_0x48bf2f['activeStat'+'eCurrentTi'+'me']=_0x287054,_0x598eb4||_0x48bf2f['update'](-0x1*0xbd8+0x1e19+-0x1241),_0x48bf2f['playing']=_0x598eb4;}get['activeStat'+'eCurrentTi'+'me'](){return this['_controlle'+'r']['activeStat'+'eCurrentTi'+'me'];}get['transition'+'ing'](){return this['_controlle'+'r']['transition'+'ing'];}get['transition'+'Progress'](){return this['transition'+'ing']?this['_controlle'+'r']['transition'+'Progress']:null;}get['states'](){return this['_controlle'+'r']['states'];}set['weight'](_0x556b01){this['_weight']=_0x556b01,this['_component']['dirtifyTar'+'gets']();}get['weight'](){return this['_weight'];}set['blendType'](_0xaa66bb){_0xaa66bb!==this['_blendType']&&(this['_blendType']=_0xaa66bb,this['_controlle'+'r']['normalizeW'+'eights']&&this['_component']['rebind']());}get['blendType'](){return this['_blendType'];}set['mask'](_0x523eda){this['_controlle'+'r']['assignMask'](_0x523eda)&&this['_component']['rebind'](),this['_mask']=_0x523eda;}get['mask'](){return this['_mask'];}['play'](_0x587572){this['_controlle'+'r']['play'](_0x587572);}['pause'](){this['_controlle'+'r']['pause']();}['reset'](){this['_controlle'+'r']['reset']();}['rebind'](){this['_controlle'+'r']['rebind']();}['update'](_0x202347){this['_blendTime']&&(this['_blendTime'+'Elapsed']<this['_blendTime']?(this['weight']=Y['lerp'](this['_startingW'+'eight'],this['_targetWei'+'ght'],this['_blendTime'+'Elapsed']/this['_blendTime']),this['_blendTime'+'Elapsed']+=_0x202347):(this['weight']=this['_targetWei'+'ght'],this['_blendTime']=-0x773*-0x1+0x1ad8+0x1*-0x224b,this['_blendTime'+'Elapsed']=0x1*-0x203e+-0xf87*-0x1+0x10b7,this['_startingW'+'eight']=0x559*-0x5+0x250b+-0x2*0x527,this['_targetWei'+'ght']=-0x170f*0x1+0x1d49+0x63a*-0x1)),this['_controlle'+'r']['update'](_0x202347);}['blendToWei'+'ght'](_0x3b1813,_0x3d537a){this['_startingW'+'eight']=this['weight'],this['_targetWei'+'ght']=_0x3b1813,this['_blendTime']=Math['max'](0x1*0x1d23+0x249a+-0x41bd,_0x3d537a),this['_blendTime'+'Elapsed']=0x1a+-0x407*-0x2+-0x828;}['assignAnim'+'ation'](_0x4bf000,_0x426386,_0x182d9d,_0x11a82d){if(!(_0x426386 instanceof Gi)){M['error']('assignAnim'+'ation:\x20ani'+'mTrack\x20sup'+'plied\x20to\x20f'+'unction\x20wa'+'s\x20not\x20of\x20t'+'ype\x20AnimTr'+'ack');return;}this['_controlle'+'r']['assignAnim'+'ation'](_0x4bf000,_0x426386,_0x182d9d,_0x11a82d),this['_controlle'+'r']['_transitio'+'ns']['length']===0x1*-0x1ca0+0x12fd*-0x1+0x3*0xfdf&&this['_controlle'+'r']['_transitio'+'ns']['push'](new ic({'from':'START','to':_0x4bf000})),this['_component']['activate']&&this['_component']['playable']&&(this['_component']['playing']=!(-0x10a5+-0x33*0x26+-0x1837*-0x1));}['removeNode'+'Animations'](_0x396b91){this['_controlle'+'r']['removeNode'+'Animations'](_0x396b91)&&(this['_component']['playing']=!(-0x288+-0x1ef6+0x157*0x19));}['getAnimati'+'onAsset'](_0x37398c){return this['_component']['animationA'+'ssets'][this['name']+':'+_0x37398c];}['transition'](_0x24dacc,_0x305e4c=0x2c+0x13aa+-0x13d6,_0x529eb3=null){this['_controlle'+'r']['updateStat'+'eFromTrans'+'ition'](new ic({'from':this['_controlle'+'r']['activeStat'+'eName'],'to':_0x24dacc,'time':_0x305e4c,'transitionOffset':_0x529eb3}));}}class vh{constructor(_0x25797a){if(this['_layers']=[],this['_parameter'+'s']={},Array['isArray'](_0x25797a['layers']))this['_layers']=_0x25797a['layers'];else for(const _0x36c527 in _0x25797a['layers']){const _0x988e83=_0x25797a['layers'][_0x36c527],_0xca3a6b={'name':_0x988e83['name'],'blendType':_0x988e83['blendType'],'weight':_0x988e83['weight'],'states':[],'transitions':[]};for(let _0x2bb860=-0xdf4*0x2+-0x1*-0x208f+-0x4a7;_0x2bb860<_0x988e83['states']['length'];_0x2bb860++)_0xca3a6b['states']['push'](_0x25797a['states'][_0x988e83['states'][_0x2bb860]]);for(let _0x56f579=-0x1*-0x2169+0x7*0x165+0x1*-0x2b2c;_0x56f579<_0x988e83['transition'+'s']['length'];_0x56f579++){const _0x348fb4=_0x25797a['transition'+'s'][_0x988e83['transition'+'s'][_0x56f579]];if(_0x348fb4['conditions']&&!Array['isArray'](_0x348fb4['conditions'])){const _0x459284=Object['keys'](_0x348fb4['conditions']),_0x584da4=[];for(let _0x282727=0x8d3+-0x1c98+0x13c5;_0x282727<_0x459284['length'];_0x282727++){const _0x342018=_0x348fb4['conditions'][_0x459284[_0x282727]];_0x342018['parameterN'+'ame']&&_0x584da4['push'](_0x342018);}_0x348fb4['conditions']=_0x584da4;}Number['isInteger'](_0x348fb4['from'])&&(_0x348fb4['from']=_0x25797a['states'][_0x348fb4['from']]['name']),Number['isInteger'](_0x348fb4['to'])&&(_0x348fb4['to']=_0x25797a['states'][_0x348fb4['to']]['name']),_0xca3a6b['transition'+'s']['push'](_0x348fb4);}this['_layers']['push'](_0xca3a6b);}for(const _0x566ffa in _0x25797a['parameters']){const _0x1042db=_0x25797a['parameters'][_0x566ffa];this['_parameter'+'s'][_0x1042db['name']]={'type':_0x1042db['type'],'value':_0x1042db['value']};}}get['parameters'](){return Object['assign']({},this['_parameter'+'s']);}get['layers'](){return this['_layers'];}}class Jy extends we{constructor(){super(...arguments),h(this,'_stateGrap'+'hAsset',null),h(this,'_animation'+'Assets',{}),h(this,'_speed',0x1251+0x2530+0x6f*-0x80),h(this,'_activate',!(0x1c36+0x2*0xb8c+-0x334e)),h(this,'_playing',!(0x22de+-0x199e+-0x93f)),h(this,'_rootBone',null),h(this,'_stateGrap'+'h',null),h(this,'_layers',[]),h(this,'_layerIndi'+'ces',{}),h(this,'_parameter'+'s',{}),h(this,'_targets',{}),h(this,'_consumedT'+'riggers',new Set()),h(this,'_normalize'+'Weights',!(0x1601+0x29*-0x59+0x1*-0x7bf)),h(this,'findParame'+'ter',_0x3a29e7=>this['_parameter'+'s'][_0x3a29e7]),h(this,'consumeTri'+'gger',_0x1fb047=>{this['_consumedT'+'riggers']['add'](_0x1fb047);});}set['stateGraph'+'Asset'](_0x22371f){if(_0x22371f===null){this['removeStat'+'eGraph']();return;}this['_stateGrap'+'hAsset']&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);let _0xd28b8b,_0x477f7a;_0x22371f instanceof me?(_0xd28b8b=_0x22371f['id'],_0x477f7a=this['system']['app']['assets']['get'](_0xd28b8b),_0x477f7a||(this['system']['app']['assets']['add'](_0x22371f),_0x477f7a=this['system']['app']['assets']['get'](_0xd28b8b))):(_0xd28b8b=_0x22371f,_0x477f7a=this['system']['app']['assets']['get'](_0xd28b8b)),!(!_0x477f7a||this['_stateGrap'+'hAsset']===_0xd28b8b)&&(_0x477f7a['resource']?(this['_stateGrap'+'h']=_0x477f7a['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']),_0x477f7a['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this)):(_0x477f7a['once']('load',_0x43005d=>{this['_stateGrap'+'h']=_0x43005d['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']);}),_0x477f7a['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this),this['system']['app']['assets']['load'](_0x477f7a)),this['_stateGrap'+'hAsset']=_0xd28b8b);}get['stateGraph'+'Asset'](){return this['_stateGrap'+'hAsset'];}set['normalizeW'+'eights'](_0x131331){this['_normalize'+'Weights']=_0x131331,this['unbind']();}get['normalizeW'+'eights'](){return this['_normalize'+'Weights'];}set['animationA'+'ssets'](_0x5bb320){this['_animation'+'Assets']=_0x5bb320,this['loadAnimat'+'ionAssets']();}get['animationA'+'ssets'](){return this['_animation'+'Assets'];}set['speed'](_0x4ed3a9){this['_speed']=_0x4ed3a9;}get['speed'](){return this['_speed'];}set['activate'](_0x1f3995){this['_activate']=_0x1f3995;}get['activate'](){return this['_activate'];}set['playing'](_0x451d0e){this['_playing']=_0x451d0e;}get['playing'](){return this['_playing'];}set['rootBone'](_0x22d894){if(typeof _0x22d894=='string'){const _0x3ecedd=this['entity']['root']['findByGuid'](_0x22d894);M['assert'](_0x3ecedd,'rootBone\x20e'+'ntity\x20for\x20'+'supplied\x20g'+'uid:'+_0x22d894+('\x20cannot\x20be'+'\x20found\x20in\x20'+'the\x20scene')),this['_rootBone']=_0x3ecedd;}else _0x22d894 instanceof ot?this['_rootBone']=_0x22d894:this['_rootBone']=null;this['rebind']();}get['rootBone'](){return this['_rootBone'];}set['stateGraph'](_0x24ba06){this['_stateGrap'+'h']=_0x24ba06;}get['stateGraph'](){return this['_stateGrap'+'h'];}get['layers'](){return this['_layers'];}set['layerIndic'+'es'](_0x39466c){this['_layerIndi'+'ces']=_0x39466c;}get['layerIndic'+'es'](){return this['_layerIndi'+'ces'];}set['parameters'](_0x476272){this['_parameter'+'s']=_0x476272;}get['parameters'](){return this['_parameter'+'s'];}set['targets'](_0x1092d6){this['_targets']=_0x1092d6;}get['targets'](){return this['_targets'];}get['playable'](){for(let _0x246f1d=-0x1666+-0x1*-0x477+-0x11ef*-0x1;_0x246f1d<this['_layers']['length'];_0x246f1d++)if(!this['_layers'][_0x246f1d]['playable'])return!(0x1*-0x2576+0x2529+-0x1*-0x4e);return!(-0xf15+-0x475+-0x1*-0x138a);}get['baseLayer'](){return this['_layers']['length']>-0x1*0x1e29+0x1253*0x2+0x1*-0x67d?this['_layers'][-0x10fb+-0xb*-0x6d+0x1*0xc4c]:null;}['_onStateGr'+'aphAssetCh'+'angeEvent'](_0x329934){const _0x5ed78c=this['animationA'+'ssets'],_0x5700d0=this['layers']['map'](_0x53c31f=>_0x53c31f['mask']);this['removeStat'+'eGraph'](),this['_stateGrap'+'h']=new vh(_0x329934['_data']),this['loadStateG'+'raph'](this['_stateGrap'+'h']),this['animationA'+'ssets']=_0x5ed78c,this['loadAnimat'+'ionAssets'](),this['layers']['forEach']((_0x5c9b93,_0x35b1af)=>{_0x5c9b93['mask']=_0x5700d0[_0x35b1af];}),this['rebind']();}['dirtifyTar'+'gets'](){const _0x113361=Object['values'](this['_targets']);for(let _0x375da6=-0x5eb+0x13a0+-0xdb5;_0x375da6<_0x113361['length'];_0x375da6++)_0x113361[_0x375da6]['dirty']=!(0x2*0xebf+0x1b8e+-0x390c);}['_addLayer']({name:_0x3932c4,states:_0x5c5167,transitions:_0x1eab03,weight:_0x817f23,mask:_0x341390,blendType:_0x300e6a}){let _0x3b4542;this['rootBone']?_0x3b4542=this['rootBone']:_0x3b4542=this['entity'];const _0x18cf20=this['_layers']['length'],_0x2719d2=new Ci(this,_0x3b4542,_0x3932c4,_0x341390,_0x18cf20),_0x2d6099=new Ky(_0x2719d2),_0x2042e2=new qD(_0x2d6099,_0x5c5167,_0x1eab03,this['_activate'],this,this['findParame'+'ter'],this['consumeTri'+'gger']);return this['_layers']['push'](new jD(_0x3932c4,_0x2042e2,this,_0x817f23,_0x300e6a)),this['_layerIndi'+'ces'][_0x3932c4]=_0x18cf20,this['_layers'][_0x18cf20];}['addLayer'](_0x5271bc,_0x52d296,_0x41f58b,_0x56d9eb){const _0x1b366f=this['findAnimat'+'ionLayer'](_0x5271bc);if(_0x1b366f)return _0x1b366f;const _0x2436c6=[{'name':'START','speed':0x1}],_0x3f5dd8=[];return this['_addLayer']({'name':_0x5271bc,'states':_0x2436c6,'transitions':_0x3f5dd8,'weight':_0x52d296,'mask':_0x41f58b,'blendType':_0x56d9eb});}['_assignPar'+'ameters'](_0xbcb846){this['_parameter'+'s']={};const _0x4f5d10=Object['keys'](_0xbcb846['parameters']);for(let _0x375a1b=-0x1*-0x2556+0x20d4+-0x462a;_0x375a1b<_0x4f5d10['length'];_0x375a1b++){const _0x486065=_0x4f5d10[_0x375a1b];this['_parameter'+'s'][_0x486065]={'type':_0xbcb846['parameters'][_0x486065]['type'],'value':_0xbcb846['parameters'][_0x486065]['value']};}}['loadStateG'+'raph'](_0x3716b1){this['_stateGrap'+'h']=_0x3716b1,this['_assignPar'+'ameters'](_0x3716b1),this['_layers']=[];let _0x3541e0=!(0x5d1*-0x1+0x82*0x38+-0x169e);for(let _0x5e6168=-0x2659+-0x2555+0x3*0x193a;_0x5e6168<_0x3716b1['layers']['length'];_0x5e6168++){const _0x5a11af=_0x3716b1['layers'][_0x5e6168];this['_addLayer']({..._0x5a11af}),_0x5a11af['states']['some'](_0xb6e7a9=>_0xb6e7a9['blendTree'])&&(_0x3541e0=!(0x12bb+0x51+-0x130c));}_0x3541e0||this['setupAnima'+'tionAssets']();}['setupAnima'+'tionAssets'](){for(let _0x5cfc72=-0x580*-0x1+0xda7+-0x1327;_0x5cfc72<this['_layers']['length'];_0x5cfc72++){const _0x47fb25=this['_layers'][_0x5cfc72],_0x235897=_0x47fb25['name'];for(let _0x4bd6ab=0x1888+-0x4d*-0x51+-0x30e5;_0x4bd6ab<_0x47fb25['states']['length'];_0x4bd6ab++){const _0x1fccc2=_0x47fb25['states'][_0x4bd6ab];if(sc['indexOf'](_0x1fccc2)===-(0x44f*0x3+0x14a4+-0x2190)){const _0x492564=_0x235897+':'+_0x1fccc2;this['_animation'+'Assets'][_0x492564]||(this['_animation'+'Assets'][_0x492564]={'asset':null});}}}this['loadAnimat'+'ionAssets']();}['loadAnimat'+'ionAssets'](){for(let _0x58dacb=0x1*-0x1067+0x29a*0x5+0x1*0x365;_0x58dacb<this['_layers']['length'];_0x58dacb++){const _0x2ddbae=this['_layers'][_0x58dacb];for(let _0x9a7e00=0x130a+-0x556+-0xdb4;_0x9a7e00<_0x2ddbae['states']['length'];_0x9a7e00++){const _0x50669a=_0x2ddbae['states'][_0x9a7e00];if(sc['indexOf'](_0x50669a)!==-(0x2*0x4fa+-0x1628+0xc35))continue;const _0x202fde=this['_animation'+'Assets'][_0x2ddbae['name']+':'+_0x50669a];if(!_0x202fde||!_0x202fde['asset']){this['findAnimat'+'ionLayer'](_0x2ddbae['name'])['assignAnim'+'ation'](_0x50669a,Gi['EMPTY']);continue;}const _0x5ccb20=_0x202fde['asset'],_0x3bc7c2=this['system']['app']['assets']['get'](_0x5ccb20);_0x3bc7c2&&(_0x3bc7c2['resource']?this['onAnimatio'+'nAssetLoad'+'ed'](_0x2ddbae['name'],_0x50669a,_0x3bc7c2):(_0x3bc7c2['once']('load',function(_0x150e27,_0x5b2ba1){return function(_0x35462c){this['onAnimatio'+'nAssetLoad'+'ed'](_0x150e27,_0x5b2ba1,_0x35462c);}['bind'](this);}['bind'](this)(_0x2ddbae['name'],_0x50669a)),this['system']['app']['assets']['load'](_0x3bc7c2)));}}}['onAnimatio'+'nAssetLoad'+'ed'](_0x4fbad2,_0x94ac54,_0x5d4c05){this['findAnimat'+'ionLayer'](_0x4fbad2)['assignAnim'+'ation'](_0x94ac54,_0x5d4c05['resource']);}['removeStat'+'eGraph'](){this['_stateGrap'+'h']=null,this['_stateGrap'+'hAsset']=null,this['_animation'+'Assets']={},this['_layers']=[],this['_layerIndi'+'ces']={},this['_parameter'+'s']={},this['_playing']=!(-0x13da+0x25*0x89+-0x1*-0xe),this['unbind'](),this['_targets']={};}['reset'](){this['_assignPar'+'ameters'](this['_stateGrap'+'h']);for(let _0x1fb824=-0x1ffc+-0x19b*-0xc+0x4*0x32e;_0x1fb824<this['_layers']['length'];_0x1fb824++){const _0x2eedfe=this['_layers'][_0x1fb824]['playing'];this['_layers'][_0x1fb824]['reset'](),this['_layers'][_0x1fb824]['playing']=_0x2eedfe;}}['unbind'](){this['_normalize'+'Weights']||Object['keys'](this['_targets'])['forEach'](_0x225d80=>{this['_targets'][_0x225d80]['unbind']();});}['rebind'](){this['_targets']={};for(let _0x239f7c=0x677+-0x19ee+0x1377;_0x239f7c<this['_layers']['length'];_0x239f7c++)this['_layers'][_0x239f7c]['rebind']();}['findAnimat'+'ionLayer'](_0x2f9967){const _0x26e50e=this['_layerIndi'+'ces'][_0x2f9967];return this['_layers'][_0x26e50e]||null;}['addAnimati'+'onState'](_0x22ca32,_0x30866d,_0x2cb624=-0x5db*-0x1+0x169e+-0x71e*0x4,_0x1459f3=!(-0x2*0xe3b+0xeb6+0xdc0),_0x4429df='Base'){var _0xd3cb22;this['_stateGrap'+'h']||this['loadStateG'+'raph'](new vh({'layers':[{'name':_0x4429df,'states':[{'name':'START','speed':0x1},{'name':_0x22ca32,'speed':_0x2cb624,'loop':_0x1459f3,'defaultState':!(0x2*0xb3c+-0x118e+-0x4ea)}],'transitions':[{'from':'START','to':_0x22ca32}]}],'parameters':{}}));const _0x421441=this['findAnimat'+'ionLayer'](_0x4429df);_0x421441?_0x421441['assignAnim'+'ation'](_0x22ca32,_0x30866d,_0x2cb624,_0x1459f3):(_0xd3cb22=this['addLayer'](_0x4429df))==null||_0xd3cb22['assignAnim'+'ation'](_0x22ca32,_0x30866d,_0x2cb624,_0x1459f3);}['assignAnim'+'ation'](_0x180182,_0x333d7d,_0x3796da,_0xf7425f=0x6be+-0x1d7c+0x16bf*0x1,_0x5195ea=!(0x149c+0x1*0x1fca+-0x3466)){if(!this['_stateGrap'+'h']&&_0x180182['indexOf']('.')===-(0x18c0+0x214*-0xd+-0x1*-0x245)){this['loadStateG'+'raph'](new vh({'layers':[{'name':'Base','states':[{'name':'START','speed':0x1},{'name':_0x180182,'speed':_0xf7425f,'loop':_0x5195ea,'defaultState':!(-0x703+0x4d*-0x2a+0x13a5*0x1)}],'transitions':[{'from':'START','to':_0x180182}]}],'parameters':{}})),this['baseLayer']['assignAnim'+'ation'](_0x180182,_0x333d7d);return;}const _0x41587e=_0x3796da?this['findAnimat'+'ionLayer'](_0x3796da):this['baseLayer'];if(!_0x41587e){M['error']('assignAnim'+'ation:\x20Try'+'ing\x20to\x20ass'+'ign\x20an\x20ani'+'m\x20track\x20to'+'\x20a\x20layer\x20t'+'hat\x20doesn\x27'+'t\x20exist');return;}_0x41587e['assignAnim'+'ation'](_0x180182,_0x333d7d,_0xf7425f,_0x5195ea);}['removeNode'+'Animations'](_0x423272,_0x278c2b){const _0xa84e82=_0x278c2b?this['findAnimat'+'ionLayer'](_0x278c2b):this['baseLayer'];if(!_0xa84e82){M['error']('removeStat'+'eAnimation'+'s:\x20Trying\x20'+'to\x20remove\x20'+'animation\x20'+'tracks\x20fro'+'m\x20a\x20state\x20'+'before\x20the'+'\x20state\x20gra'+'ph\x20has\x20bee'+'n\x20loaded.\x20'+'Have\x20you\x20c'+'alled\x20load'+'StateGraph'+'?');return;}_0xa84e82['removeNode'+'Animations'](_0x423272);}['getParamet'+'erValue'](_0x22bfaa,_0x303290){const _0x5a9633=this['_parameter'+'s'][_0x22bfaa];if(_0x5a9633&&_0x5a9633['type']===_0x303290)return _0x5a9633['value'];M['log']('Cannot\x20get'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x22bfaa+('\x22\x20of\x20type\x20'+'\x22')+_0x303290+'\x22');}['setParamet'+'erValue'](_0x2eeb92,_0x1ac294,_0x2faadc){const _0x55d550=this['_parameter'+'s'][_0x2eeb92];if(_0x55d550&&_0x55d550['type']===_0x1ac294){_0x55d550['value']=_0x2faadc;return;}M['log']('Cannot\x20set'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x2eeb92+('\x22\x20of\x20type\x20'+'\x22')+_0x1ac294+'\x22');}['getFloat'](_0x3f19cb){return this['getParamet'+'erValue'](_0x3f19cb,j_);}['setFloat'](_0x4cfde9,_0x4b8d59){this['setParamet'+'erValue'](_0x4cfde9,j_,_0x4b8d59);}['getInteger'](_0x1ecd01){return this['getParamet'+'erValue'](_0x1ecd01,q_);}['setInteger'](_0x54a5f5,_0xac10b2){typeof _0xac10b2=='number'&&_0xac10b2%(0x3e9+0xedb*-0x2+-0x44d*-0x6)===-0xfc9+-0xa5e*0x1+0x1a27?this['setParamet'+'erValue'](_0x54a5f5,q_,_0xac10b2):M['error']('Attempting'+'\x20to\x20assign'+'\x20non\x20integ'+'er\x20value\x20t'+'o\x20integer\x20'+'parameter',_0x54a5f5,_0xac10b2);}['getBoolean'](_0x10141c){return this['getParamet'+'erValue'](_0x10141c,Y_);}['setBoolean'](_0xa31abe,_0xacc66){this['setParamet'+'erValue'](_0xa31abe,Y_,!!_0xacc66);}['getTrigger'](_0x1c6ceb){return this['getParamet'+'erValue'](_0x1c6ceb,yh);}['setTrigger'](_0x50f7e6,_0x571104=!(-0x1d1b*-0x1+-0xe5e+-0xebc)){this['setParamet'+'erValue'](_0x50f7e6,yh,!(-0xf60+-0x3d2*0x6+0x1*0x264c)),_0x571104&&this['_consumedT'+'riggers']['add'](_0x50f7e6);}['resetTrigg'+'er'](_0x2955fa){this['setParamet'+'erValue'](_0x2955fa,yh,!(-0x125*-0x12+0x2553+-0x39ec));}['onBeforeRe'+'move'](){Number['isFinite'](this['_stateGrap'+'hAsset'])&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);}['update'](_0x1988e8){for(let _0x2b2a82=-0x4*0xe3+0x678+0x176*-0x2;_0x2b2a82<this['layers']['length'];_0x2b2a82++)this['layers'][_0x2b2a82]['update'](_0x1988e8*this['speed']);this['_consumedT'+'riggers']['forEach'](_0x2be5d1=>{this['parameters'][_0x2be5d1]['value']=!(0x741*0x1+-0x1469+-0x3*-0x463);}),this['_consumedT'+'riggers']['clear']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5ec1db,_0x97c326){_0x5ec1db['rootBone']&&_0x97c326[_0x5ec1db['rootBone']['getGuid']()]?this['rootBone']=_0x97c326[_0x5ec1db['rootBone']['getGuid']()]:this['rebind']();}}class YD{constructor(){this['enabled']=!(0x187c+0x1*0x1d90+-0x360c*0x1);}}const $f=['enabled'];class KD extends lt{constructor(_0x793602){super(_0x793602),this['id']='anim',this['ComponentT'+'ype']=Jy,this['DataType']=YD,this['schema']=$f,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x15f253,_0x52af8a,_0xbf3650){super['initialize'+'ComponentD'+'ata'](_0x15f253,_0x52af8a,$f);const _0x26bded=['animationA'+'ssets','stateGraph','layers','masks'];Object['keys'](_0x52af8a)['forEach'](_0x2cddae=>{_0x26bded['includes'](_0x2cddae)||(_0x15f253[_0x2cddae]=_0x52af8a[_0x2cddae]);}),_0x52af8a['stateGraph']&&(_0x15f253['stateGraph']=_0x52af8a['stateGraph'],_0x15f253['loadStateG'+'raph'](_0x15f253['stateGraph'])),_0x52af8a['layers']&&_0x52af8a['layers']['forEach']((_0x1dcd8c,_0x19cb59)=>{_0x1dcd8c['_controlle'+'r']['states']['forEach'](_0x3462ef=>{_0x1dcd8c['_controlle'+'r']['_states'][_0x3462ef]['_animation'+'List']['forEach'](_0x4f6cc0=>{if(!_0x4f6cc0['animTrack']||_0x4f6cc0['animTrack']===Gi['EMPTY']){const _0x5c69c2=this['app']['assets']['get'](_0x1dcd8c['_component']['_animation'+'Assets'][_0x1dcd8c['name']+':'+_0x4f6cc0['name']]['asset']);_0x5c69c2&&!_0x5c69c2['loaded']&&_0x5c69c2['once']('load',()=>{_0x15f253['layers'][_0x19cb59]['assignAnim'+'ation'](_0x4f6cc0['name'],_0x5c69c2['resource']);});}else _0x15f253['layers'][_0x19cb59]['assignAnim'+'ation'](_0x4f6cc0['name'],_0x4f6cc0['animTrack']);});});}),_0x52af8a['animationA'+'ssets']&&(_0x15f253['animationA'+'ssets']=Object['assign'](_0x15f253['animationA'+'ssets'],_0x52af8a['animationA'+'ssets'])),_0x52af8a['masks']&&Object['keys'](_0x52af8a['masks'])['forEach'](_0x3ef434=>{if(_0x15f253['layers'][_0x3ef434]){const _0x5a3acd=_0x52af8a['masks'][_0x3ef434]['mask'],_0x3278ea={};Object['keys'](_0x5a3acd)['forEach'](_0x3f5351=>{_0x3278ea[decodeURI(_0x3f5351)]=_0x5a3acd[_0x3f5351];}),_0x15f253['layers'][_0x3ef434]['mask']=_0x3278ea;}});}['onAnimatio'+'nUpdate'](_0x25186b){const _0x5807c1=this['store'];for(const _0x5b8b36 in _0x5807c1)if(_0x5807c1['hasOwnProp'+'erty'](_0x5b8b36)){const _0x44c55d=_0x5807c1[_0x5b8b36]['entity']['anim'];_0x44c55d['data']['enabled']&&_0x44c55d['entity']['enabled']&&_0x44c55d['playing']&&_0x44c55d['update'](_0x25186b);}}['cloneCompo'+'nent'](_0x204f1e,_0x3009c6){let _0x1724aa;(!_0x204f1e['anim']['rootBone']||_0x204f1e['anim']['rootBone']===_0x204f1e)&&(_0x1724aa={},_0x204f1e['anim']['layers']['forEach']((_0x11b8f8,_0x322a03)=>{if(_0x11b8f8['mask']){const _0x564455={};Object['keys'](_0x11b8f8['mask'])['forEach'](_0x1c2266=>{const _0x9e8d55=_0x1c2266['split']('/');_0x9e8d55['shift']();const _0x16c640=[_0x3009c6['name'],..._0x9e8d55]['join']('/');_0x564455[_0x16c640]=_0x11b8f8['mask'][_0x1c2266];}),_0x1724aa[_0x322a03]={'mask':_0x564455};}}));const _0x3bb75c={'enabled':_0x204f1e['anim']['enabled'],'stateGraphAsset':_0x204f1e['anim']['stateGraph'+'Asset'],'animationAssets':_0x204f1e['anim']['animationA'+'ssets'],'speed':_0x204f1e['anim']['speed'],'activate':_0x204f1e['anim']['activate'],'playing':_0x204f1e['anim']['playing'],'rootBone':_0x204f1e['anim']['rootBone'],'stateGraph':_0x204f1e['anim']['stateGraph'],'layers':_0x204f1e['anim']['layers'],'layerIndices':_0x204f1e['anim']['layerIndic'+'es'],'parameters':_0x204f1e['anim']['parameters'],'normalizeWeights':_0x204f1e['anim']['normalizeW'+'eights'],'masks':_0x1724aa};return this['addCompone'+'nt'](_0x3009c6,_0x3bb75c);}['onBeforeRe'+'move'](_0x127148,_0x4bd0dd){_0x4bd0dd['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}}we['_buildAcce'+'ssors'](Jy['prototype'],$f);class ev extends we{['setCurrent'+'Listener'](){if(this['enabled']&&this['entity']['audioliste'+'ner']&&this['entity']['enabled']){this['system']['current']=this['entity'];const _0x363d70=this['system']['current']['getPositio'+'n']();this['system']['manager']['listener']['setPositio'+'n'](_0x363d70);}}['onEnable'](){this['setCurrent'+'Listener']();}['onDisable'](){this['system']['current']===this['entity']&&(this['system']['current']=null);}}class ZD{constructor(){this['enabled']=!(0x1*-0x14fd+-0x1bab*-0x1+-0x26*0x2d);}}const tv=['enabled'];class QD extends lt{constructor(_0x6a92af){super(_0x6a92af),this['id']='audioliste'+'ner',this['ComponentT'+'ype']=ev,this['DataType']=ZD,this['schema']=tv,this['manager']=_0x6a92af['soundManag'+'er'],M['assert'](this['manager'],'AudioListe'+'nerCompone'+'ntSystem\x20c'+'annot\x20be\x20c'+'reated\x20wit'+'hout\x20sound'+'\x20manager'),this['current']=null,this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x33b366,_0x1a3f37,_0xeb335c){_0xeb335c=['enabled'],super['initialize'+'ComponentD'+'ata'](_0x33b366,_0x1a3f37,_0xeb335c);}['onUpdate'](_0x3ba91f){if(this['current']){const _0x52725f=this['current']['getPositio'+'n']();this['manager']['listener']['setPositio'+'n'](_0x52725f);const _0x55a4d7=this['current']['getWorldTr'+'ansform']();this['manager']['listener']['setOrienta'+'tion'](_0x55a4d7);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](ev['prototype'],tv);const Xf=0x939*-0x2+-0x2dd*-0x1+0xf95,Z_=0x1*-0x1cf9+-0xf89*-0x2+-0x218,xh='group',qf='image',sv='text',Th='stretch',JD='contain',eL='cover',dt={'DEFAULT':'DEFAULT','HOVER':'HOVER','PRESSED':'PRESSED','INACTIVE':'INACTIVE'},ul={};ul[dt['DEFAULT']]='_defaultTi'+'nt',ul[dt['HOVER']]='hoverTint',ul[dt['PRESSED']]='pressedTin'+'t',ul[dt['INACTIVE']]='inactiveTi'+'nt';const ml={};ml[dt['DEFAULT']]='_defaultSp'+'riteAsset',ml[dt['HOVER']]='hoverSprit'+'eAsset',ml[dt['PRESSED']]='pressedSpr'+'iteAsset',ml[dt['INACTIVE']]='inactiveSp'+'riteAsset';const pl={};pl[dt['DEFAULT']]='_defaultSp'+'riteFrame',pl[dt['HOVER']]='hoverSprit'+'eFrame',pl[dt['PRESSED']]='pressedSpr'+'iteFrame',pl[dt['INACTIVE']]='inactiveSp'+'riteFrame';class Pt extends we{constructor(_0x3a70e8,_0x47f2c0){super(_0x3a70e8,_0x47f2c0),h(this,'_visualSta'+'te',dt['DEFAULT']),h(this,'_isHoverin'+'g',!(-0x3*0x4df+-0x8e9*-0x4+-0x9*0x256)),h(this,'_hoveringC'+'ounter',0x13a2*-0x1+0x227*0x5+0x8df),h(this,'_isPressed',!(-0x54+0x15d7+0x2*-0xac1)),h(this,'_defaultTi'+'nt',new ie(-0x2*0x60d+0x3e+0x1*0xbdd,-0x1*0xd5f+0x4*-0x2ea+0x9*0x2c8,0x1da1+-0x1786+-0x61a,-0x41*-0x67+-0xe*0x14f+-0x1f5*0x4)),h(this,'_defaultSp'+'riteAsset',null),h(this,'_defaultSp'+'riteFrame',0x19d3+0x6a8*0x1+-0x207b),h(this,'_imageEnti'+'ty',null),h(this,'_evtElemen'+'tAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntRemove',null),h(this,'_evtImageE'+'ntityEleme'+'ntColor',null),h(this,'_evtImageE'+'ntityEleme'+'ntOpacity',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame',null),(this['_visualSta'+'te']=dt['DEFAULT'],this['_isHoverin'+'g']=!(-0x1*-0x2385+0x2064+0x148*-0x35),this['_hoveringC'+'ounter']=-0xd57+0x19b7+-0x108*0xc,this['_isPressed']=!(-0x1f0f*-0x1+-0x820+-0x16ee),this['_defaultTi'+'nt']=new ie(0x32*-0xc7+0x27*0xc9+0x108*0x8,-0x1*-0x22ae+0x128*-0x1f+-0x17*-0xd,-0x15*-0x1a3+0x37*-0x3d+-0x1*0x1543,0x2663*-0x1+0x28e+0x1*0x23d6),this['_defaultSp'+'riteAsset']=null,this['_defaultSp'+'riteFrame']=0xc5a+0x3a0+-0x2*0x7fd,this['_toggleLif'+'ecycleList'+'eners']('on',_0x3a70e8));}get['data'](){const _0x56ecae=this['system']['store'][this['entity']['getGuid']()];return _0x56ecae?_0x56ecae['data']:null;}set['enabled'](_0x4bce00){this['_setValue']('enabled',_0x4bce00);}get['enabled'](){return this['data']['enabled'];}set['active'](_0x576932){this['_setValue']('active',_0x576932);}get['active'](){return this['data']['active'];}set['imageEntit'+'y'](_0x2261c1){if(this['_imageEnti'+'ty']!==_0x2261c1){const _0x2607f0=typeof _0x2261c1=='string';if(this['_imageEnti'+'ty']&&_0x2607f0&&this['_imageEnti'+'ty']['getGuid']()===_0x2261c1)return;this['_imageEnti'+'ty']&&this['_imageEnti'+'tyUnsubscr'+'ibe'](),_0x2261c1 instanceof He?this['_imageEnti'+'ty']=_0x2261c1:_0x2607f0?this['_imageEnti'+'ty']=this['system']['app']['getEntityF'+'romIndex'](_0x2261c1)||null:this['_imageEnti'+'ty']=null,this['_imageEnti'+'ty']&&this['_imageEnti'+'tySubscrib'+'e'](),this['_imageEnti'+'ty']?this['data']['imageEntit'+'y']=this['_imageEnti'+'ty']['getGuid']():_0x2607f0&&_0x2261c1&&(this['data']['imageEntit'+'y']=_0x2261c1);}}get['imageEntit'+'y'](){return this['_imageEnti'+'ty'];}set['hitPadding'](_0xa86e35){this['_setValue']('hitPadding',_0xa86e35);}get['hitPadding'](){return this['data']['hitPadding'];}set['transition'+'Mode'](_0xa453f2){this['_setValue']('transition'+'Mode',_0xa453f2);}get['transition'+'Mode'](){return this['data']['transition'+'Mode'];}set['hoverTint'](_0x592c91){this['_setValue']('hoverTint',_0x592c91);}get['hoverTint'](){return this['data']['hoverTint'];}set['pressedTin'+'t'](_0x28e013){this['_setValue']('pressedTin'+'t',_0x28e013);}get['pressedTin'+'t'](){return this['data']['pressedTin'+'t'];}set['inactiveTi'+'nt'](_0x816765){this['_setValue']('inactiveTi'+'nt',_0x816765);}get['inactiveTi'+'nt'](){return this['data']['inactiveTi'+'nt'];}set['fadeDurati'+'on'](_0x5a347f){this['_setValue']('fadeDurati'+'on',_0x5a347f);}get['fadeDurati'+'on'](){return this['data']['fadeDurati'+'on'];}set['hoverSprit'+'eAsset'](_0x377991){this['_setValue']('hoverSprit'+'eAsset',_0x377991);}get['hoverSprit'+'eAsset'](){return this['data']['hoverSprit'+'eAsset'];}set['hoverSprit'+'eFrame'](_0x37b323){this['_setValue']('hoverSprit'+'eFrame',_0x37b323);}get['hoverSprit'+'eFrame'](){return this['data']['hoverSprit'+'eFrame'];}set['pressedSpr'+'iteAsset'](_0x45b457){this['_setValue']('pressedSpr'+'iteAsset',_0x45b457);}get['pressedSpr'+'iteAsset'](){return this['data']['pressedSpr'+'iteAsset'];}set['pressedSpr'+'iteFrame'](_0x5b4fe1){this['_setValue']('pressedSpr'+'iteFrame',_0x5b4fe1);}get['pressedSpr'+'iteFrame'](){return this['data']['pressedSpr'+'iteFrame'];}set['inactiveSp'+'riteAsset'](_0xd4c6f7){this['_setValue']('inactiveSp'+'riteAsset',_0xd4c6f7);}get['inactiveSp'+'riteAsset'](){return this['data']['inactiveSp'+'riteAsset'];}set['inactiveSp'+'riteFrame'](_0x25d0b6){this['_setValue']('inactiveSp'+'riteFrame',_0x25d0b6);}get['inactiveSp'+'riteFrame'](){return this['data']['inactiveSp'+'riteFrame'];}['_setValue'](_0x2acd5c,_0x46187d){const _0x4c08a0=this['data'],_0x443292=_0x4c08a0[_0x2acd5c];_0x4c08a0[_0x2acd5c]=_0x46187d,this['fire']('set',_0x2acd5c,_0x443292,_0x46187d);}['_toggleLif'+'ecycleList'+'eners'](_0x568e4d,_0x1277b4){var _0x29311d;this[_0x568e4d]('set_active',this['_onSetActi'+'ve'],this),this[_0x568e4d]('set_transi'+'tionMode',this['_onSetTran'+'sitionMode'],this),this[_0x568e4d]('set_hoverT'+'int',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x568e4d]('set_presse'+'dTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x568e4d]('set_inacti'+'veTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x568e4d]('set_hoverS'+'priteAsset',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x568e4d]('set_hoverS'+'priteFrame',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x568e4d]('set_presse'+'dSpriteAss'+'et',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x568e4d]('set_presse'+'dSpriteFra'+'me',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x568e4d]('set_inacti'+'veSpriteAs'+'set',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x568e4d]('set_inacti'+'veSpriteFr'+'ame',this['_onSetTran'+'sitionValu'+'e'],this),_0x568e4d==='on'?this['_evtElemen'+'tAdd']=this['entity']['on']('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this):((_0x29311d=this['_evtElemen'+'tAdd'])==null||_0x29311d['off'](),this['_evtElemen'+'tAdd']=null);}['_onSetActi'+'ve'](_0x117755,_0x393edf,_0x36f0b5){_0x393edf!==_0x36f0b5&&this['_updateVis'+'ualState']();}['_onSetTran'+'sitionMode'](_0x498942,_0x5cc070,_0xcf78f4){_0x5cc070!==_0xcf78f4&&(this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](_0x5cc070),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetTran'+'sitionValu'+'e'](_0xe94a31,_0x418c1e,_0x23f17c){_0x418c1e!==_0x23f17c&&this['_forceReap'+'plyVisualS'+'tate']();}['_imageEnti'+'tySubscrib'+'e'](){this['_evtImageE'+'ntityEleme'+'ntAdd']=this['_imageEnti'+'ty']['on']('element:ad'+'d',this['_onImageEl'+'ementGain'],this),this['_imageEnti'+'ty']['element']&&this['_onImageEl'+'ementGain']();}['_imageEnti'+'tyUnsubscr'+'ibe'](){var _0x43c2b2,_0x1cfbe2;(_0x43c2b2=this['_evtImageE'+'ntityEleme'+'ntAdd'])==null||_0x43c2b2['off'](),this['_evtImageE'+'ntityEleme'+'ntAdd']=null,(_0x1cfbe2=this['_imageEnti'+'ty'])!=null&&_0x1cfbe2['element']&&this['_onImageEl'+'ementLose']();}['_imageEnti'+'tyElementS'+'ubscribe'](){const _0x58cdb6=this['_imageEnti'+'ty']['element'];this['_evtImageE'+'ntityEleme'+'ntRemove']=_0x58cdb6['once']('beforeremo'+'ve',this['_onImageEl'+'ementLose'],this),this['_evtImageE'+'ntityEleme'+'ntColor']=_0x58cdb6['on']('set:color',this['_onSetColo'+'r'],this),this['_evtImageE'+'ntityEleme'+'ntOpacity']=_0x58cdb6['on']('set:opacit'+'y',this['_onSetOpac'+'ity'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=_0x58cdb6['on']('set:sprite'+'Asset',this['_onSetSpri'+'teAsset'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=_0x58cdb6['on']('set:sprite'+'Frame',this['_onSetSpri'+'teFrame'],this);}['_imageEnti'+'tyElementU'+'nsubscribe'](){var _0x13ad02,_0x3b1425,_0x4e88ee,_0x4cc03c,_0x4db71f;(_0x13ad02=this['_evtImageE'+'ntityEleme'+'ntRemove'])==null||_0x13ad02['off'](),this['_evtImageE'+'ntityEleme'+'ntRemove']=null,(_0x3b1425=this['_evtImageE'+'ntityEleme'+'ntColor'])==null||_0x3b1425['off'](),this['_evtImageE'+'ntityEleme'+'ntColor']=null,(_0x4e88ee=this['_evtImageE'+'ntityEleme'+'ntOpacity'])==null||_0x4e88ee['off'](),this['_evtImageE'+'ntityEleme'+'ntOpacity']=null,(_0x4cc03c=this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set'])==null||_0x4cc03c['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=null,(_0x4db71f=this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame'])==null||_0x4db71f['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=null;}['_onElement'+'ComponentR'+'emove'](){this['_toggleHit'+'ElementLis'+'teners']('off');}['_onElement'+'ComponentA'+'dd'](){this['_toggleHit'+'ElementLis'+'teners']('on');}['_onImageEl'+'ementLose'](){this['_imageEnti'+'tyElementU'+'nsubscribe'](),this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['_onImageEl'+'ementGain'](){this['_imageEnti'+'tyElementS'+'ubscribe'](),this['_storeDefa'+'ultVisualS'+'tate'](),this['_forceReap'+'plyVisualS'+'tate']();}['_toggleHit'+'ElementLis'+'teners'](_0x563095){if(this['entity']['element']){const _0x3ac810=_0x563095==='on';if(_0x3ac810&&this['_hasHitEle'+'mentListen'+'ers'])return;this['entity']['element'][_0x563095]('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['entity']['element'][_0x563095]('mouseenter',this['_onMouseEn'+'ter'],this),this['entity']['element'][_0x563095]('mouseleave',this['_onMouseLe'+'ave'],this),this['entity']['element'][_0x563095]('mousedown',this['_onMouseDo'+'wn'],this),this['entity']['element'][_0x563095]('mouseup',this['_onMouseUp'],this),this['entity']['element'][_0x563095]('touchstart',this['_onTouchSt'+'art'],this),this['entity']['element'][_0x563095]('touchend',this['_onTouchEn'+'d'],this),this['entity']['element'][_0x563095]('touchleave',this['_onTouchLe'+'ave'],this),this['entity']['element'][_0x563095]('touchcance'+'l',this['_onTouchCa'+'ncel'],this),this['entity']['element'][_0x563095]('selectstar'+'t',this['_onSelectS'+'tart'],this),this['entity']['element'][_0x563095]('selectend',this['_onSelectE'+'nd'],this),this['entity']['element'][_0x563095]('selectente'+'r',this['_onSelectE'+'nter'],this),this['entity']['element'][_0x563095]('selectleav'+'e',this['_onSelectL'+'eave'],this),this['entity']['element'][_0x563095]('click',this['_onClick'],this),this['_hasHitEle'+'mentListen'+'ers']=_0x3ac810;}}['_storeDefa'+'ultVisualS'+'tate'](){var _0x4a7222;const _0x347005=(_0x4a7222=this['_imageEnti'+'ty'])==null?void(-0x255e+0x257a+-0x1c):_0x4a7222['element'];!_0x347005||_0x347005['type']===xh||(this['_storeDefa'+'ultColor'](_0x347005['color']),this['_storeDefa'+'ultOpacity'](_0x347005['opacity']),this['_storeDefa'+'ultSpriteA'+'sset'](_0x347005['spriteAsse'+'t']),this['_storeDefa'+'ultSpriteF'+'rame'](_0x347005['spriteFram'+'e']));}['_storeDefa'+'ultColor'](_0x152249){this['_defaultTi'+'nt']['r']=_0x152249['r'],this['_defaultTi'+'nt']['g']=_0x152249['g'],this['_defaultTi'+'nt']['b']=_0x152249['b'];}['_storeDefa'+'ultOpacity'](_0x57681b){this['_defaultTi'+'nt']['a']=_0x57681b;}['_storeDefa'+'ultSpriteA'+'sset'](_0x3874fa){this['_defaultSp'+'riteAsset']=_0x3874fa;}['_storeDefa'+'ultSpriteF'+'rame'](_0xa80f79){this['_defaultSp'+'riteFrame']=_0xa80f79;}['_onSetColo'+'r'](_0x230761){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultColor'](_0x230761),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetOpac'+'ity'](_0x3ee934){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultOpacity'](_0x3ee934),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teAsset'](_0x575d31){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteA'+'sset'](_0x575d31),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teFrame'](_0x459459){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteF'+'rame'](_0x459459),this['_forceReap'+'plyVisualS'+'tate']());}['_onMouseEn'+'ter'](_0x59529f){this['_isHoverin'+'g']=!(-0x5b*0x4c+0x8*-0x18+0xde2*0x2),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseenter',_0x59529f);}['_onMouseLe'+'ave'](_0x9c2fc1){this['_isHoverin'+'g']=!(-0x105c*-0x1+-0x14cf+0x474),this['_isPressed']=!(0xf6c*0x1+-0x245d+0x14f2),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseleave',_0x9c2fc1);}['_onMouseDo'+'wn'](_0x566625){this['_isPressed']=!(-0x2*-0x116f+-0xe7*-0x6+-0x2848),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mousedown',_0x566625);}['_onMouseUp'](_0x305150){this['_isPressed']=!(-0x71d*-0x2+-0x1c81*0x1+-0x2*-0x724),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseup',_0x305150);}['_onTouchSt'+'art'](_0x3a6db9){this['_isPressed']=!(-0x1*-0x3fd+0xcb5*0x1+-0x10b2*0x1),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchstart',_0x3a6db9);}['_onTouchEn'+'d'](_0x5d69f2){_0x5d69f2['event']['preventDef'+'ault'](),this['_isPressed']=!(-0x11cf+0x3a*0x65+-0x512),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchend',_0x5d69f2);}['_onTouchLe'+'ave'](_0x1e279d){this['_isPressed']=!(-0xee3*0x1+0x250f*-0x1+-0x21*-0x193),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchleave',_0x1e279d);}['_onTouchCa'+'ncel'](_0x5e1865){this['_isPressed']=!(0x7f9*-0x3+0x4*-0x4c1+0x2af0),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchcance'+'l',_0x5e1865);}['_onSelectS'+'tart'](_0x46a023){this['_isPressed']=!(-0xad0+0x85*-0x16+-0x1b6*-0xd),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectstar'+'t',_0x46a023);}['_onSelectE'+'nd'](_0xe98cc3){this['_isPressed']=!(-0x1*0xf3d+0xa8*-0x12+0x1b0e),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectend',_0xe98cc3);}['_onSelectE'+'nter'](_0x5c6431){this['_hoveringC'+'ounter']++,this['_hoveringC'+'ounter']===0x13f0+0x1cd4+-0x9*0x56b&&(this['_isHoverin'+'g']=!(0xf3a+0x1a9e*0x1+0x338*-0xd),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectente'+'r',_0x5c6431);}['_onSelectL'+'eave'](_0x2920b5){this['_hoveringC'+'ounter']--,this['_hoveringC'+'ounter']===0x2400+-0x64a+-0x1db6&&(this['_isHoverin'+'g']=!(-0x61f*-0x1+-0x11*0xd3+0x7e5),this['_isPressed']=!(0x25d6*0x1+0x1695+-0x3c6a),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectleav'+'e',_0x2920b5);}['_onClick'](_0x5a6a46){this['_fireIfAct'+'ive']('click',_0x5a6a46);}['_fireIfAct'+'ive'](_0x4fe1fe,_0x231484){this['data']['active']&&this['fire'](_0x4fe1fe,_0x231484);}['_updateVis'+'ualState'](_0x1449b0){const _0x2e885e=this['_visualSta'+'te'],_0x5d3779=this['_determine'+'VisualStat'+'e']();if((_0x2e885e!==_0x5d3779||_0x1449b0)&&this['enabled'])switch(this['_visualSta'+'te']=_0x5d3779,_0x2e885e===dt['HOVER']&&this['_fireIfAct'+'ive']('hoverend'),_0x2e885e===dt['PRESSED']&&this['_fireIfAct'+'ive']('pressedend'),_0x5d3779===dt['HOVER']&&this['_fireIfAct'+'ive']('hoverstart'),_0x5d3779===dt['PRESSED']&&this['_fireIfAct'+'ive']('pressedsta'+'rt'),this['transition'+'Mode']){case Xf:{const _0x5ef2d8=ul[this['_visualSta'+'te']],_0x4a14f8=this[_0x5ef2d8];this['_applyTint'](_0x4a14f8);break;}case Z_:{const _0x50ade5=ml[this['_visualSta'+'te']],_0x5ca87b=pl[this['_visualSta'+'te']],_0x36fe76=this[_0x50ade5],_0x4cdb08=this[_0x5ca87b];this['_applySpri'+'te'](_0x36fe76,_0x4cdb08);break;}}}['_forceReap'+'plyVisualS'+'tate'](){this['_updateVis'+'ualState'](!(-0x7*0x84+0x8c4+0xb*-0x78));}['_resetToDe'+'faultVisua'+'lState'](_0xf492b){var _0x5a39a1;if((_0x5a39a1=this['_imageEnti'+'ty'])!=null&&_0x5a39a1['element'])switch(_0xf492b){case Xf:this['_cancelTwe'+'en'](),this['_applyTint'+'Immediatel'+'y'](this['_defaultTi'+'nt']);break;case Z_:this['_applySpri'+'te'](this['_defaultSp'+'riteAsset'],this['_defaultSp'+'riteFrame']);break;}}['_determine'+'VisualStat'+'e'](){if(this['active']){if(this['_isPressed'])return dt['PRESSED'];if(this['_isHoverin'+'g'])return dt['HOVER'];}else return dt['INACTIVE'];return dt['DEFAULT'];}['_applySpri'+'te'](_0x1ed026,_0x29e183){var _0x35031b;const _0xa521c8=(_0x35031b=this['_imageEnti'+'ty'])==null?void(-0x1b+0x1*0xb63+-0xb48):_0x35031b['element'];_0xa521c8&&(_0x29e183=_0x29e183||0x16a0+0xf35+0x1*-0x25d5,this['_isApplyin'+'gSprite']=!(0xc3+0x227c+-0x233f),_0xa521c8['spriteAsse'+'t']!==_0x1ed026&&(_0xa521c8['spriteAsse'+'t']=_0x1ed026),_0xa521c8['spriteFram'+'e']!==_0x29e183&&(_0xa521c8['spriteFram'+'e']=_0x29e183),this['_isApplyin'+'gSprite']=!(-0x1212+-0x3*0xc77+0x8e*0x64));}['_applyTint'](_0x37acfd){this['_cancelTwe'+'en'](),this['fadeDurati'+'on']===-0xe3c+-0x4e*-0x67+-0x5*0x36e?this['_applyTint'+'Immediatel'+'y'](_0x37acfd):this['_applyTint'+'WithTween'](_0x37acfd);}['_applyTint'+'Immediatel'+'y'](_0x3e25e5){var _0x2ae922;const _0x79c5c8=(_0x2ae922=this['_imageEnti'+'ty'])==null?void(-0x65*-0x29+-0x2569+0x153c):_0x2ae922['element'];if(!_0x3e25e5||!_0x79c5c8||_0x79c5c8['type']===xh)return;const _0x48b723=Q_(_0x3e25e5);this['_isApplyin'+'gTint']=!(0x161*0x13+-0x12b7+0x77c*-0x1),_0x48b723['equals'](_0x79c5c8['color'])||(_0x79c5c8['color']=_0x48b723),_0x79c5c8['opacity']!==_0x3e25e5['a']&&(_0x79c5c8['opacity']=_0x3e25e5['a']),this['_isApplyin'+'gTint']=!(0x5a+0x1aca+-0x1b23);}['_applyTint'+'WithTween'](_0x1952ec){var _0x932967;const _0x54ab72=(_0x932967=this['_imageEnti'+'ty'])==null?void(0x1*0x392+-0x16f9+0x1*0x1367):_0x932967['element'];if(!_0x1952ec||!_0x54ab72||_0x54ab72['type']===xh)return;const _0x5bd637=Q_(_0x1952ec),_0x5a8e38=_0x54ab72['color'],_0x5b7014=_0x54ab72['opacity'];_0x5bd637['equals'](_0x5a8e38)&&_0x1952ec['a']===_0x5b7014||(this['_tweenInfo']={'startTime':de(),'from':new ie(_0x5a8e38['r'],_0x5a8e38['g'],_0x5a8e38['b'],_0x5b7014),'to':_0x1952ec['clone'](),'lerpColor':new ie()});}['_updateTin'+'tTween'](){const _0xd802df=de()-this['_tweenInfo']['startTime'];let _0x2d0ca6=this['fadeDurati'+'on']===0x469*0x2+0x101*-0xf+0x1*0x63d?0x2029*-0x1+0x2*-0xa2a+-0x1a3f*-0x2:_0xd802df/this['fadeDurati'+'on'];if(_0x2d0ca6=Y['clamp'](_0x2d0ca6,-0x1*0x442+-0x9e6+0xe28,0x60+0x1*0x2028+-0x2f5*0xb),Math['abs'](_0x2d0ca6-(0x1de+0x272*-0x9+0x1425))>0x248a+-0x22a9+-0x1*0x1e1+0.00001){const _0x18eb20=this['_tweenInfo']['lerpColor'];_0x18eb20['lerp'](this['_tweenInfo']['from'],this['_tweenInfo']['to'],_0x2d0ca6),this['_applyTint'+'Immediatel'+'y'](new ie(_0x18eb20['r'],_0x18eb20['g'],_0x18eb20['b'],_0x18eb20['a']));}else this['_applyTint'+'Immediatel'+'y'](this['_tweenInfo']['to']),this['_cancelTwe'+'en']();}['_cancelTwe'+'en'](){delete this['_tweenInfo'];}['onUpdate'](){this['_tweenInfo']&&this['_updateTin'+'tTween']();}['onEnable'](){this['_isHoverin'+'g']=!(-0x2*-0x55b+0x7*0x477+-0x52*0x83),this['_hoveringC'+'ounter']=-0xe9c+-0x2130+0xbf3*0x4,this['_isPressed']=!(-0x123a+0x1462+0x1d*-0x13),this['_toggleHit'+'ElementLis'+'teners']('on'),this['_forceReap'+'plyVisualS'+'tate']();}['onDisable'](){this['_toggleHit'+'ElementLis'+'teners']('off'),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['onRemove'](){this['_imageEnti'+'tyUnsubscr'+'ibe'](),this['_toggleLif'+'ecycleList'+'eners']('off',this['system']),this['onDisable']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x41b694,_0x389dcd){_0x41b694['imageEntit'+'y']&&(this['imageEntit'+'y']=_0x389dcd[_0x41b694['imageEntit'+'y']['getGuid']()]);}}h(Pt,'EVENT_MOUS'+'EDOWN','mousedown'),h(Pt,'EVENT_MOUS'+'EUP','mouseup'),h(Pt,'EVENT_MOUS'+'EENTER','mouseenter'),h(Pt,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(Pt,'EVENT_CLIC'+'K','click'),h(Pt,'EVENT_TOUC'+'HSTART','touchstart'),h(Pt,'EVENT_TOUC'+'HEND','touchend'),h(Pt,'EVENT_TOUC'+'HCANCEL','touchcance'+'l'),h(Pt,'EVENT_TOUC'+'HLEAVE','touchleave'),h(Pt,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Pt,'EVENT_SELE'+'CTEND','selectend'),h(Pt,'EVENT_SELE'+'CTENTER','selectente'+'r'),h(Pt,'EVENT_SELE'+'CTLEAVE','selectleav'+'e'),h(Pt,'EVENT_HOVE'+'RSTART','hoverstart'),h(Pt,'EVENT_HOVE'+'REND','hoverend'),h(Pt,'EVENT_PRES'+'SEDSTART','pressedsta'+'rt'),h(Pt,'EVENT_PRES'+'SEDEND','pressedend');function Q_(_0x13a5e0){return new ie(_0x13a5e0['r'],_0x13a5e0['g'],_0x13a5e0['b']);}class tL{constructor(){this['enabled']=!(-0x2267*0x1+0x1a8a+-0x1*-0x7dd),this['active']=!(-0x84a*-0x2+-0x6b9*-0x1+0x4a9*-0x5),this['imageEntit'+'y']=null,this['hitPadding']=new ae(),this['transition'+'Mode']=Xf,this['hoverTint']=new ie(0x4*-0x452+0x5a*-0x47+0x2a3e*0x1+0.75,-0xaf+0x1b73+-0x1ac4+0.75,-0x3d7+-0xeb7+0x128e+0.75),this['pressedTin'+'t']=new ie(0x263a+-0x1*0x19c0+-0xc7a+0.5,-0x22d*-0xa+-0x2127+0x1*0xb65+0.5,0x31*0x2f+0x77b+-0x107a+0.5),this['inactiveTi'+'nt']=new ie(-0x744+-0xa7f*-0x2+-0xdba+0.25,0x25ae+0x224f*0x1+0x3*-0x17ff+0.25,0x1402+-0xd4b+-0x9*0xbf+0.25),this['fadeDurati'+'on']=-0x1*0xc63+-0x239c+0xb*0x45d,this['hoverSprit'+'eAsset']=null,this['hoverSprit'+'eFrame']=0x2363*-0x1+-0x16d9+0x4*0xe8f,this['pressedSpr'+'iteAsset']=null,this['pressedSpr'+'iteFrame']=-0x13a5*0x1+-0x1f55+0x32fa,this['inactiveSp'+'riteAsset']=null,this['inactiveSp'+'riteFrame']=0x107a+-0x19*0x79+-0x4a9;}}const J_=['enabled','active',{'name':'hitPadding','type':'vec4'},'transition'+'Mode',{'name':'hoverTint','type':'rgba'},{'name':'pressedTin'+'t','type':'rgba'},{'name':'inactiveTi'+'nt','type':'rgba'},'fadeDurati'+'on','hoverSprit'+'eAsset','hoverSprit'+'eFrame','pressedSpr'+'iteAsset','pressedSpr'+'iteFrame','inactiveSp'+'riteAsset','inactiveSp'+'riteFrame'];class sL extends lt{constructor(_0x1dfc62){super(_0x1dfc62),this['id']='button',this['ComponentT'+'ype']=Pt,this['DataType']=tL,this['schema']=J_,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x54464b,_0x55bf8a,_0x169ca5){_0x54464b['imageEntit'+'y']=_0x55bf8a['imageEntit'+'y'],super['initialize'+'ComponentD'+'ata'](_0x54464b,_0x55bf8a,J_);}['onUpdate'](_0x4a1ee3){const _0x1a53fe=this['store'];for(const _0x2d8c3a in _0x1a53fe){const _0x1613a6=_0x1a53fe[_0x2d8c3a]['entity'],_0x32218e=_0x1613a6['button'];_0x32218e['enabled']&&_0x1613a6['enabled']&&_0x32218e['onUpdate']();}}['_onRemoveC'+'omponent'](_0x59979f,_0x344a1b){_0x344a1b['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}const eg=new I(),tg=new le();class Ga extends we{constructor(_0x3e2dbb,_0x4676d2){super(_0x3e2dbb,_0x4676d2),h(this,'_compoundP'+'arent',null),h(this,'_hasOffset',!(-0x7*0x33+-0x2429+0x258f)),(this['entity']['on']('insert',this['_onInsert'],this),this['on']('set_type',this['onSetType'],this),this['on']('set_convex'+'Hull',this['onSetModel'],this),this['on']('set_halfEx'+'tents',this['onSetHalfE'+'xtents'],this),this['on']('set_linear'+'Offset',this['onSetOffse'+'t'],this),this['on']('set_angula'+'rOffset',this['onSetOffse'+'t'],this),this['on']('set_radius',this['onSetRadiu'+'s'],this),this['on']('set_height',this['onSetHeigh'+'t'],this),this['on']('set_axis',this['onSetAxis'],this),this['on']('set_asset',this['onSetAsset'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_model',this['onSetModel'],this),this['on']('set_render',this['onSetRende'+'r'],this));}get['data'](){const _0xfaf729=this['system']['store'][this['entity']['getGuid']()];return _0xfaf729?_0xfaf729['data']:null;}set['enabled'](_0x4f207c){this['_setValue']('enabled',_0x4f207c);}get['enabled'](){return this['data']['enabled'];}set['type'](_0x5dbfc5){this['_setValue']('type',_0x5dbfc5);}get['type'](){return this['data']['type'];}set['halfExtent'+'s'](_0x5edd1f){this['_setValue']('halfExtent'+'s',_0x5edd1f);}get['halfExtent'+'s'](){return this['data']['halfExtent'+'s'];}set['linearOffs'+'et'](_0x493aa3){this['_setValue']('linearOffs'+'et',_0x493aa3);}get['linearOffs'+'et'](){return this['data']['linearOffs'+'et'];}set['angularOff'+'set'](_0x4d6126){this['_setValue']('angularOff'+'set',_0x4d6126);}get['angularOff'+'set'](){return this['data']['angularOff'+'set'];}set['radius'](_0x17c459){this['_setValue']('radius',_0x17c459);}get['radius'](){return this['data']['radius'];}set['axis'](_0x3d1392){this['_setValue']('axis',_0x3d1392);}get['axis'](){return this['data']['axis'];}set['height'](_0x3dfff7){this['_setValue']('height',_0x3dfff7);}get['height'](){return this['data']['height'];}set['asset'](_0x38e977){this['_setValue']('asset',_0x38e977);}get['asset'](){return this['data']['asset'];}set['renderAsse'+'t'](_0x1e5b9c){this['_setValue']('renderAsse'+'t',_0x1e5b9c);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['convexHull'](_0x5d1fda){this['_setValue']('convexHull',_0x5d1fda);}get['convexHull'](){return this['data']['convexHull'];}set['shape'](_0x8dc9e3){this['_setValue']('shape',_0x8dc9e3);}get['shape'](){return this['data']['shape'];}set['model'](_0x32df8f){this['_setValue']('model',_0x32df8f);}get['model'](){return this['data']['model'];}set['render'](_0xb2017d){this['_setValue']('render',_0xb2017d);}get['render'](){return this['data']['render'];}set['checkVerte'+'xDuplicate'+'s'](_0x4ea171){this['_setValue']('checkVerte'+'xDuplicate'+'s',_0x4ea171);}get['checkVerte'+'xDuplicate'+'s'](){return this['data']['checkVerte'+'xDuplicate'+'s'];}['_setValue'](_0x30ad5e,_0x2a15c0){const _0x1f625f=this['data'],_0x188176=_0x1f625f[_0x30ad5e];_0x1f625f[_0x30ad5e]=_0x2a15c0,this['fire']('set',_0x30ad5e,_0x188176,_0x2a15c0);}['onSetType'](_0x427b19,_0x43a10e,_0x506c00){_0x43a10e!==_0x506c00&&this['system']['changeType'](this,_0x43a10e,_0x506c00);}['onSetHalfE'+'xtents'](_0x56579e,_0x31db2e,_0x2784c3){const _0x1105d9=this['data']['type'];this['data']['initialize'+'d']&&_0x1105d9==='box'&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetOffse'+'t'](_0x1a90e1,_0x59051c,_0xf37ec4){this['_hasOffset']=!this['data']['linearOffs'+'et']['equals'](I['ZERO'])||!this['data']['angularOff'+'set']['equals'](le['IDENTITY']),this['data']['initialize'+'d']&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetRadiu'+'s'](_0x4c26e7,_0x4231b2,_0x59753){const _0x1868f2=this['data']['type'];this['data']['initialize'+'d']&&(_0x1868f2==='sphere'||_0x1868f2==='capsule'||_0x1868f2==='cylinder'||_0x1868f2==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetHeigh'+'t'](_0x1a3a59,_0x5f3c14,_0x298a66){const _0x39e476=this['data']['type'];this['data']['initialize'+'d']&&(_0x39e476==='capsule'||_0x39e476==='cylinder'||_0x39e476==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAxis'](_0x53df0d,_0x42ed4f,_0x1de7ca){const _0x8f972=this['data']['type'];this['data']['initialize'+'d']&&(_0x8f972==='capsule'||_0x8f972==='cylinder'||_0x8f972==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAsset'](_0xad5878,_0x466fd9,_0x121f9b){const _0x599243=this['system']['app']['assets'];if(_0x466fd9){const _0x1e1ee0=_0x599243['get'](_0x466fd9);_0x1e1ee0&&_0x1e1ee0['off']('remove',this['onAssetRem'+'oved'],this);}if(_0x121f9b){_0x121f9b instanceof me&&(this['data']['asset']=_0x121f9b['id']);const _0x20bd2c=_0x599243['get'](this['data']['asset']);_0x20bd2c&&(_0x20bd2c['off']('remove',this['onAssetRem'+'oved'],this),_0x20bd2c['on']('remove',this['onAssetRem'+'oved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x121f9b||(this['data']['model']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetRende'+'rAsset'](_0x53d3ea,_0x4316fd,_0x317fe2){const _0x30d2e6=this['system']['app']['assets'];if(_0x4316fd){const _0x2f1d19=_0x30d2e6['get'](_0x4316fd);_0x2f1d19&&_0x2f1d19['off']('remove',this['onRenderAs'+'setRemoved'],this);}if(_0x317fe2){_0x317fe2 instanceof me&&(this['data']['renderAsse'+'t']=_0x317fe2['id']);const _0x22939e=_0x30d2e6['get'](this['data']['renderAsse'+'t']);_0x22939e&&(_0x22939e['off']('remove',this['onRenderAs'+'setRemoved'],this),_0x22939e['on']('remove',this['onRenderAs'+'setRemoved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x317fe2||(this['data']['render']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetModel'](_0x33575b,_0x18ee75,_0x3a5026){this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&this['system']['implementa'+'tions']['mesh']['doRecreate'+'PhysicalSh'+'ape'](this);}['onSetRende'+'r'](_0x2d21a8,_0x41fed2,_0x13ce54){this['onSetModel'](_0x2d21a8,_0x41fed2,_0x13ce54);}['onAssetRem'+'oved'](_0xdc34e0){_0xdc34e0['off']('remove',this['onAssetRem'+'oved'],this),this['data']['asset']===_0xdc34e0['id']&&(this['asset']=null);}['onRenderAs'+'setRemoved'](_0x54877e){_0x54877e['off']('remove',this['onRenderAs'+'setRemoved'],this),this['data']['renderAsse'+'t']===_0x54877e['id']&&(this['renderAsse'+'t']=null);}['getCompoun'+'dChildShap'+'eIndex'](_0x2bfca4){const _0x529aea=this['data']['shape'],_0x4cd8e8=_0x529aea['getNumChil'+'dShapes']();for(let _0x4990b1=0xd44+-0x1*-0x2575+-0x32b9;_0x4990b1<_0x4cd8e8;_0x4990b1++){const _0x45ccd5=_0x529aea['getChildSh'+'ape'](_0x4990b1);if(Ammo['getPointer'](_0x45ccd5)===Ammo['getPointer'](_0x2bfca4))return _0x4990b1;}return null;}['_onInsert'](_0x3aee49){if(!(typeof Ammo>'u')){if(this['_compoundP'+'arent'])this['system']['recreatePh'+'ysicalShap'+'es'](this);else{if(!this['entity']['rigidbody']){let _0x4f1cbc=this['entity']['parent'];for(;_0x4f1cbc;){if(_0x4f1cbc['collision']&&_0x4f1cbc['collision']['type']==='compound'){_0x4f1cbc['collision']['shape']['getNumChil'+'dShapes']()===-0x5a7*0x1+0x39*-0xac+0x2bf3*0x1?this['system']['recreatePh'+'ysicalShap'+'es'](_0x4f1cbc['collision']):this['system']['recreatePh'+'ysicalShap'+'es'](this);break;}_0x4f1cbc=_0x4f1cbc['parent'];}}}}}['_updateCom'+'pound'](){const _0xce7e87=this['entity'];if(_0xce7e87['_dirtyWorl'+'d']){let _0x3a8c9b=_0xce7e87['_dirtyLoca'+'l'],_0x4bf71d=_0xce7e87;for(;_0x4bf71d&&!_0x3a8c9b&&!(_0x4bf71d['collision']&&_0x4bf71d['collision']===this['_compoundP'+'arent']);)_0x4bf71d['_dirtyLoca'+'l']&&(_0x3a8c9b=!(-0x7*-0x1c9+0x299*-0x7+0xb6*0x8)),_0x4bf71d=_0x4bf71d['parent'];if(_0x3a8c9b){_0xce7e87['forEach'](this['system']['implementa'+'tions']['compound']['_updateEac'+'hDescendan'+'tTransform'],_0xce7e87);const _0x1f9416=this['_compoundP'+'arent']['entity']['rigidbody'];_0x1f9416&&_0x1f9416['activate']();}}}['getShapePo'+'sition'](){const _0x3fe6f5=this['entity']['getPositio'+'n']();if(this['_hasOffset']){const _0xb9d250=this['entity']['getRotatio'+'n'](),_0x28abfc=this['data']['linearOffs'+'et'];return tg['copy'](_0xb9d250)['transformV'+'ector'](_0x28abfc,eg),eg['add'](_0x3fe6f5);}return _0x3fe6f5;}['getShapeRo'+'tation'](){const _0xcc7d4f=this['entity']['getRotatio'+'n']();return this['_hasOffset']?tg['copy'](_0xcc7d4f)['mul'](this['data']['angularOff'+'set']):_0xcc7d4f;}['onEnable'](){if(this['data']['type']==='mesh'&&(this['data']['asset']||this['data']['renderAsse'+'t'])&&this['data']['initialize'+'d']){const _0x456324=this['system']['app']['assets']['get'](this['data']['asset']||this['data']['renderAsse'+'t']);if(_0x456324&&(!_0x456324['resource']||!this['data']['shape'])){this['system']['recreatePh'+'ysicalShap'+'es'](this);return;}}if(this['entity']['rigidbody'])this['entity']['rigidbody']['enabled']&&this['entity']['rigidbody']['enableSimu'+'lation']();else{if(this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']){if(this['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===-0x1bca+-0x2177+-0x3d41*-0x1)this['system']['recreatePh'+'ysicalShap'+'es'](this['_compoundP'+'arent']);else{const _0x566994=this['system']['_getNodeTr'+'ansform'](this['entity'],this['_compoundP'+'arent']['entity']);this['_compoundP'+'arent']['shape']['addChildSh'+'ape'](_0x566994,this['data']['shape']),Ammo['destroy'](_0x566994),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']();}}else this['entity']['trigger']&&this['entity']['trigger']['enable']();}}['onDisable'](){this['entity']['rigidbody']?this['entity']['rigidbody']['disableSim'+'ulation']():this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']?this['_compoundP'+'arent']['entity']['_destroyin'+'g']||(this['system']['_removeCom'+'poundChild'](this['_compoundP'+'arent'],this['data']['shape']),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']()):this['entity']['trigger']&&this['entity']['trigger']['disable']();}['onBeforeRe'+'move'](){this['asset']&&(this['asset']=null),this['renderAsse'+'t']&&(this['renderAsse'+'t']=null),this['entity']['off']('insert',this['_onInsert'],this),this['off']();}}h(Ga,'EVENT_CONT'+'ACT','contact'),h(Ga,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(Ga,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(Ga,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(Ga,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve');class iL{constructor(){this['enabled']=!(0x1c1*0x8+-0x1*0x1fa1+-0x55*-0x35),this['type']='box',this['halfExtent'+'s']=new I(-0xe6c+-0x11b6*0x2+-0xa*-0x4fc+0.5,0x24e3*-0x1+0x43e*-0x1+-0x2921*-0x1+0.5,0x2d1*-0x2+0x1838+-0x1a*0xb7+0.5),this['linearOffs'+'et']=new I(),this['angularOff'+'set']=new le(),this['radius']=0x1e83+-0x17bb+-0x6c8+0.5,this['axis']=-0xc5+-0x1d06+0xee6*0x2,this['height']=0xb1a+-0xaa1+-0x77,this['convexHull']=!(0x26aa+0xd8d+-0x3436),this['asset']=null,this['renderAsse'+'t']=null,this['checkVerte'+'xDuplicate'+'s']=!(0x183e+-0x2039*0x1+0x7fb),this['shape']=null,this['model']=null,this['render']=null,this['initialize'+'d']=!(0x15*0x17f+-0x3*-0xacf+-0x3fd7);}}const to='static',Ps='dynamic',Ia='kinematic',rL=0xd70+-0x26bf+0x1951,oo=-0x4f*-0x4f+0x180c+-0x33*0xf3,jf=-0x2*0xd9e+-0x1ee7+0x1*0x3a24,sg=-0x1112+-0x165e+0x2774,iv=0x5*-0x8a+-0x7be*0x1+-0xa75*-0x1,aL=-0x11b8+-0x1cb0+-0x2e69*-0x1,ig=-0x85*-0x1d+0xbcc+-0x1adb,nL=0x1*-0x135d+0xd*-0x1e4+0x2bf5,rg=0x58*0x23+-0x17e6+0xbee,ag=-0x1f661+0x12e56+-0xe405*-0x2,Yf=-0xc7a+-0x1f172+-0x2fde9*-0x1;let Ms,Ar,Da;class rv{constructor(_0x27eb88,_0x402cbb,_0x2a3236){this['entity']=_0x402cbb['entity'],this['component']=_0x402cbb,this['app']=_0x27eb88,typeof Ammo<'u'&&!Ms&&(Ms=new Ammo['btVector3'](),Ar=new Ammo['btQuaterni'+'on'](),Da=new Ammo['btTransfor'+'m']()),this['initialize'](_0x2a3236);}['initialize'](_0x59b6b7){const _0x46f3e2=this['entity'],_0x2cbb11=_0x59b6b7['shape'];if(_0x2cbb11&&typeof Ammo<'u'){_0x46f3e2['trigger']&&_0x46f3e2['trigger']['destroy']();const _0x499fed=0x2545+0x3b7*-0x2+0x1dd6*-0x1,_0x3994db=this['component'];if(_0x3994db){const _0x5cd874=_0x3994db['getShapePo'+'sition'](),_0x63ccd3=_0x3994db['getShapeRo'+'tation']();Ms['setValue'](_0x5cd874['x'],_0x5cd874['y'],_0x5cd874['z']),Ar['setValue'](_0x63ccd3['x'],_0x63ccd3['y'],_0x63ccd3['z'],_0x63ccd3['w']);}else{const _0xbb8448=_0x46f3e2['getPositio'+'n'](),_0x49cdc1=_0x46f3e2['getRotatio'+'n']();Ms['setValue'](_0xbb8448['x'],_0xbb8448['y'],_0xbb8448['z']),Ar['setValue'](_0x49cdc1['x'],_0x49cdc1['y'],_0x49cdc1['z'],_0x49cdc1['w']);}Da['setOrigin'](Ms),Da['setRotatio'+'n'](Ar);const _0x25c9eb=this['app']['systems']['rigidbody']['createBody'](_0x499fed,_0x2cbb11,Da);_0x25c9eb['setRestitu'+'tion'](-0x241f+-0x2*0x8a3+0x1*0x3565),_0x25c9eb['setFrictio'+'n'](-0x1338+-0x19aa+0x2ce2),_0x25c9eb['setDamping'](-0x23c0+0x9*-0x388+-0x2*-0x21c4,0x15d*0x10+-0x14bb+0x1*-0x115),Ms['setValue'](0x1653+0x2f*-0x16+-0x1249,-0x17c0+0x2*-0xbfb+0x2fb6,0x1*0xe64+0x1fbe+0x2e22*-0x1),_0x25c9eb['setLinearF'+'actor'](Ms),_0x25c9eb['setAngular'+'Factor'](Ms),_0x25c9eb['setCollisi'+'onFlags'](_0x25c9eb['getCollisi'+'onFlags']()|oo),_0x25c9eb['entity']=_0x46f3e2,this['body']=_0x25c9eb,this['component']['enabled']&&_0x46f3e2['enabled']&&this['enable']();}}['destroy'](){this['body']&&(this['disable'](),this['app']['systems']['rigidbody']['destroyBod'+'y'](this['body']),this['body']=null);}['_getEntity'+'Transform'](_0x24f88d){const _0x10f0c1=this['component'];if(_0x10f0c1){const _0x1f8a47=_0x10f0c1['getShapePo'+'sition'](),_0x2ec881=_0x10f0c1['getShapeRo'+'tation']();Ms['setValue'](_0x1f8a47['x'],_0x1f8a47['y'],_0x1f8a47['z']),Ar['setValue'](_0x2ec881['x'],_0x2ec881['y'],_0x2ec881['z'],_0x2ec881['w']);}else{const _0x200591=this['entity']['getPositio'+'n'](),_0x53b6b1=this['entity']['getRotatio'+'n']();Ms['setValue'](_0x200591['x'],_0x200591['y'],_0x200591['z']),Ar['setValue'](_0x53b6b1['x'],_0x53b6b1['y'],_0x53b6b1['z'],_0x53b6b1['w']);}_0x24f88d['setOrigin'](Ms),_0x24f88d['setRotatio'+'n'](Ar);}['updateTran'+'sform'](){this['_getEntity'+'Transform'](Da);const _0x5f4a39=this['body'];_0x5f4a39['setWorldTr'+'ansform'](Da),_0x5f4a39['activate']();}['enable'](){const _0x30cf3e=this['body'];if(!_0x30cf3e)return;const _0x2d9a9b=this['app']['systems']['rigidbody'];_0x2d9a9b['_triggers']['indexOf'](this)<0x215*-0x2+0x446+-0x1c&&(_0x2d9a9b['addBody'](_0x30cf3e,rg,Yf^rg),_0x2d9a9b['_triggers']['push'](this)),_0x30cf3e['forceActiv'+'ationState'](jf),this['updateTran'+'sform']();}['disable'](){const _0x34f36e=this['body'];if(!_0x34f36e)return;const _0x5e39ee=this['app']['systems']['rigidbody'],_0x514611=_0x5e39ee['_triggers']['indexOf'](this);_0x514611>-(-0x1*0x56f+-0xe*-0x1e+0x12*0x36)&&(_0x5e39ee['removeBody'](_0x34f36e),_0x5e39ee['_triggers']['splice'](_0x514611,-0x782*0x5+0x2319+0x139*0x2)),_0x34f36e['forceActiv'+'ationState'](iv);}}const Ql=new te(),oL=new I(),lL=new I(),br=new le(),ng=new He(),hL=['enabled','type','halfExtent'+'s','linearOffs'+'et','angularOff'+'set','radius','axis','height','convexHull','asset','renderAsse'+'t','shape','model','render','checkVerte'+'xDuplicate'+'s'];class ma{constructor(_0x23e0c1){this['system']=_0x23e0c1;}['beforeInit'+'ialize'](_0x3ada26,_0x589405){_0x589405['shape']=null,_0x589405['model']=new $i(),_0x589405['model']['graph']=new He();}['afterIniti'+'alize'](_0x5a4fa0,_0x3fd351){this['recreatePh'+'ysicalShap'+'es'](_0x5a4fa0),_0x5a4fa0['data']['initialize'+'d']=!(-0x18eb+-0x1522+0x2e0d*0x1);}['reset'](_0x1d1b3c,_0x10f518){this['beforeInit'+'ialize'](_0x1d1b3c,_0x10f518),this['afterIniti'+'alize'](_0x1d1b3c,_0x10f518);}['recreatePh'+'ysicalShap'+'es'](_0x1e9eaa){const _0x4fbd5e=_0x1e9eaa['entity'],_0x49571e=_0x1e9eaa['data'];if(typeof Ammo<'u'){_0x4fbd5e['trigger']&&(_0x4fbd5e['trigger']['destroy'](),delete _0x4fbd5e['trigger']),_0x49571e['shape']&&(_0x1e9eaa['_compoundP'+'arent']&&(_0x1e9eaa!==_0x1e9eaa['_compoundP'+'arent']&&this['system']['_removeCom'+'poundChild'](_0x1e9eaa['_compoundP'+'arent'],_0x49571e['shape']),_0x1e9eaa['_compoundP'+'arent']['entity']['rigidbody']&&_0x1e9eaa['_compoundP'+'arent']['entity']['rigidbody']['activate']()),this['destroySha'+'pe'](_0x49571e)),_0x49571e['shape']=this['createPhys'+'icalShape'](_0x1e9eaa['entity'],_0x49571e);const _0x359fe5=!_0x1e9eaa['_compoundP'+'arent'];if(_0x49571e['type']==='compound'&&(!_0x1e9eaa['_compoundP'+'arent']||_0x1e9eaa===_0x1e9eaa['_compoundP'+'arent']))_0x1e9eaa['_compoundP'+'arent']=_0x1e9eaa,_0x4fbd5e['forEach'](this['_addEachDe'+'scendant'],_0x1e9eaa);else{if(_0x49571e['type']!=='compound'&&!_0x1e9eaa['rigidbody']){_0x1e9eaa['_compoundP'+'arent']=null;let _0x4891d5=_0x4fbd5e['parent'];for(;_0x4891d5;){if(_0x4891d5['collision']&&_0x4891d5['collision']['type']==='compound'){_0x1e9eaa['_compoundP'+'arent']=_0x4891d5['collision'];break;}_0x4891d5=_0x4891d5['parent'];}}}_0x1e9eaa['_compoundP'+'arent']&&_0x1e9eaa!==_0x1e9eaa['_compoundP'+'arent']&&(_0x359fe5&&_0x1e9eaa['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===-0x1349+-0x1*0x2113+0xd17*0x4?this['system']['recreatePh'+'ysicalShap'+'es'](_0x1e9eaa['_compoundP'+'arent']):(this['system']['updateComp'+'oundChildT'+'ransform'](_0x4fbd5e,!(0x6*0x12d+0x167*0x3+-0xb43)),_0x1e9eaa['_compoundP'+'arent']['entity']['rigidbody']&&_0x1e9eaa['_compoundP'+'arent']['entity']['rigidbody']['activate']())),_0x4fbd5e['rigidbody']?(_0x4fbd5e['rigidbody']['disableSim'+'ulation'](),_0x4fbd5e['rigidbody']['createBody'](),_0x4fbd5e['enabled']&&_0x4fbd5e['rigidbody']['enabled']&&_0x4fbd5e['rigidbody']['enableSimu'+'lation']()):_0x1e9eaa['_compoundP'+'arent']||(_0x4fbd5e['trigger']?_0x4fbd5e['trigger']['initialize'](_0x49571e):_0x4fbd5e['trigger']=new rv(this['system']['app'],_0x1e9eaa,_0x49571e));}}['createPhys'+'icalShape'](_0x415952,_0x6fa97c){}['updateTran'+'sform'](_0x1128fb,_0x1bd1bc,_0x414483,_0x174e54){_0x1128fb['entity']['trigger']&&_0x1128fb['entity']['trigger']['updateTran'+'sform']();}['destroySha'+'pe'](_0x55ba1d){_0x55ba1d['shape']&&(Ammo['destroy'](_0x55ba1d['shape']),_0x55ba1d['shape']=null);}['beforeRemo'+'ve'](_0x2f8581,_0x1dbabb){_0x1dbabb['data']['shape']&&(_0x1dbabb['_compoundP'+'arent']&&!_0x1dbabb['_compoundP'+'arent']['entity']['_destroyin'+'g']&&(this['system']['_removeCom'+'poundChild'](_0x1dbabb['_compoundP'+'arent'],_0x1dbabb['data']['shape']),_0x1dbabb['_compoundP'+'arent']['entity']['rigidbody']&&_0x1dbabb['_compoundP'+'arent']['entity']['rigidbody']['activate']()),_0x1dbabb['_compoundP'+'arent']=null,this['destroySha'+'pe'](_0x1dbabb['data']));}['remove'](_0xe58817,_0x3f578f){_0xe58817['rigidbody']&&_0xe58817['rigidbody']['body']&&_0xe58817['rigidbody']['disableSim'+'ulation'](),_0xe58817['trigger']&&(_0xe58817['trigger']['destroy'](),delete _0xe58817['trigger']);}['clone'](_0x4d4a6a,_0x5d18d4){const _0x301525=this['system']['store'][_0x4d4a6a['getGuid']()],_0x209ff6={'enabled':_0x301525['data']['enabled'],'type':_0x301525['data']['type'],'halfExtents':[_0x301525['data']['halfExtent'+'s']['x'],_0x301525['data']['halfExtent'+'s']['y'],_0x301525['data']['halfExtent'+'s']['z']],'linearOffset':[_0x301525['data']['linearOffs'+'et']['x'],_0x301525['data']['linearOffs'+'et']['y'],_0x301525['data']['linearOffs'+'et']['z']],'angularOffset':[_0x301525['data']['angularOff'+'set']['x'],_0x301525['data']['angularOff'+'set']['y'],_0x301525['data']['angularOff'+'set']['z'],_0x301525['data']['angularOff'+'set']['w']],'radius':_0x301525['data']['radius'],'axis':_0x301525['data']['axis'],'height':_0x301525['data']['height'],'convexHull':_0x301525['data']['convexHull'],'asset':_0x301525['data']['asset'],'renderAsset':_0x301525['data']['renderAsse'+'t'],'model':_0x301525['data']['model'],'render':_0x301525['data']['render'],'checkVertexDuplicates':_0x301525['data']['checkVerte'+'xDuplicate'+'s']};return this['system']['addCompone'+'nt'](_0x5d18d4,_0x209ff6);}}class cL extends ma{['createPhys'+'icalShape'](_0x1bda60,_0x57d909){if(typeof Ammo<'u'){const _0x412e6a=_0x57d909['halfExtent'+'s'],_0x5429f6=new Ammo['btVector3'](_0x412e6a?_0x412e6a['x']:0x1e9e+0x1ae*-0xa+-0xdd2+0.5,_0x412e6a?_0x412e6a['y']:0x18d*-0x8+-0x190f+-0xc7d*-0x3+0.5,_0x412e6a?_0x412e6a['z']:0x1d22+0x199*0x13+-0x3b7d+0.5),_0x46d9f6=new Ammo['btBoxShape'](_0x5429f6);return Ammo['destroy'](_0x5429f6),_0x46d9f6;}}}class dL extends ma{['createPhys'+'icalShape'](_0x1c7c66,_0x5c9524){if(typeof Ammo<'u')return new Ammo['btSphereSh'+'ape'](_0x5c9524['radius']);}}class fL extends ma{['createPhys'+'icalShape'](_0x25d6f4,_0x38e063){const _0x31c167=_0x38e063['axis']??-0x1b64+0x8a*-0x39+0x3a1f,_0x343e47=_0x38e063['radius']??0x8f7+0x1454+0x1d4b*-0x1+0.5,_0xf81260=Math['max']((_0x38e063['height']??-0x10ce+-0xf6f+0x7f*0x41)-(-0x13d9*0x1+-0x3*-0xbdd+-0xfbc)*_0x343e47,0x6d*-0xb+0xbf*-0x17+0x2*0xaec);let _0x5e51a9=null;if(typeof Ammo<'u')switch(_0x31c167){case 0x6c*-0xd+-0x311*0x1+0x88d:_0x5e51a9=new Ammo['btCapsuleS'+'hapeX'](_0x343e47,_0xf81260);break;case-0x1cec+0x17e7+0x1*0x506:_0x5e51a9=new Ammo['btCapsuleS'+'hape'](_0x343e47,_0xf81260);break;case 0x22ca+0x3a*-0xa3+-0x6e*-0x5:_0x5e51a9=new Ammo['btCapsuleS'+'hapeZ'](_0x343e47,_0xf81260);break;}return _0x5e51a9;}}class uL extends ma{['createPhys'+'icalShape'](_0x5e6b53,_0xc6c59e){const _0x46fd5=_0xc6c59e['axis']??0x26b*-0x6+-0xec0+0x1d43,_0x16727f=_0xc6c59e['radius']??-0x2615+-0xe40+0x1*0x3455+0.5,_0x4e4c05=_0xc6c59e['height']??0x1d6a+-0x12f0+-0xa79;let _0xc6cc9f=null,_0x248f5c=null;if(typeof Ammo<'u')switch(_0x46fd5){case 0x6a*-0xa+0xf1a+-0xaf6:_0xc6cc9f=new Ammo['btVector3'](_0x4e4c05*(-0x14be+-0x84e*-0x2+-0x1*-0x422+0.5),_0x16727f,_0x16727f),_0x248f5c=new Ammo['btCylinder'+'ShapeX'](_0xc6cc9f);break;case-0x26d*-0x7+-0x1ce6+0xbec:_0xc6cc9f=new Ammo['btVector3'](_0x16727f,_0x4e4c05*(0x35*-0xd+0x5*-0x6df+-0x4*-0x943+0.5),_0x16727f),_0x248f5c=new Ammo['btCylinder'+'Shape'](_0xc6cc9f);break;case-0x32*-0xa1+0x5f0+-0x2560:_0xc6cc9f=new Ammo['btVector3'](_0x16727f,_0x16727f,_0x4e4c05*(0x5*-0x2ef+-0x1b9f+0x2a4a+0.5)),_0x248f5c=new Ammo['btCylinder'+'ShapeZ'](_0xc6cc9f);break;}return _0xc6cc9f&&Ammo['destroy'](_0xc6cc9f),_0x248f5c;}}class mL extends ma{['createPhys'+'icalShape'](_0x451fbb,_0x55e8ba){const _0xfa67b6=_0x55e8ba['axis']??-0x10bd+-0x1*-0x1f75+-0xeb7,_0x591f04=_0x55e8ba['radius']??0x33e*0x5+-0x5*-0x49c+0x4b*-0x86+0.5,_0x40e79a=_0x55e8ba['height']??-0x1f2f*-0x1+-0x158b+-0x9a3;let _0xc18d17=null;if(typeof Ammo<'u')switch(_0xfa67b6){case 0x1*0x187f+-0x281*-0x2+-0x245*0xd:_0xc18d17=new Ammo['btConeShap'+'eX'](_0x591f04,_0x40e79a);break;case 0xb*0xd+0x14a2+-0x1530:_0xc18d17=new Ammo['btConeShap'+'e'](_0x591f04,_0x40e79a);break;case 0x1bfb+-0x1f*-0x19+-0x1f00:_0xc18d17=new Ammo['btConeShap'+'eZ'](_0x591f04,_0x40e79a);break;}return _0xc18d17;}}class pL extends ma{['beforeInit'+'ialize'](_0x72d7f5,_0x398425){}['createAmmo'+'Hull'](_0x31f8c8,_0x1ad754,_0x54dbb2,_0x11e3dd){const _0x33e15e=new Ammo['btConvexHu'+'llShape'](),_0x15dc62=new Ammo['btVector3'](),_0x8cd801=[];_0x31f8c8['getPositio'+'ns'](_0x8cd801);for(let _0x587e97=0x1b6d+0x24f1*0x1+-0x405e;_0x587e97<_0x8cd801['length'];_0x587e97+=0x5*0x72b+-0x11*0x1a0+-0x834)_0x15dc62['setValue'](_0x8cd801[_0x587e97]*_0x11e3dd['x'],_0x8cd801[_0x587e97+(0xfc7+-0xf7a+-0x4c)]*_0x11e3dd['y'],_0x8cd801[_0x587e97+(0xbe7+-0x1e7+-0x2*0x4ff)]*_0x11e3dd['z']),_0x33e15e['addPoint'](_0x15dc62,!(-0x577*-0x5+-0x7*-0xcc+-0x20e6));Ammo['destroy'](_0x15dc62),_0x33e15e['recalcLoca'+'lAabb'](),_0x33e15e['setMargin'](-0x2d3*0x1+-0x25bc+-0x288f*-0x1+0.01);const _0x2320d1=this['system']['_getNodeTr'+'ansform'](_0x1ad754);_0x54dbb2['addChildSh'+'ape'](_0x2320d1,_0x33e15e),Ammo['destroy'](_0x2320d1);}['createAmmo'+'Mesh'](_0x1e4014,_0x2a7f8a,_0x5eea76,_0x39e44a,_0x463792=!(-0xe7e+-0xf65+0x1de3)){const _0x20a9df=this['system'];let _0x91efe6;if(_0x20a9df['_triMeshCa'+'che'][_0x1e4014['id']])_0x91efe6=_0x20a9df['_triMeshCa'+'che'][_0x1e4014['id']];else{const _0x3cfaa2=_0x1e4014['vertexBuff'+'er'],_0x291e37=_0x3cfaa2['getFormat']();let _0x38f37d,_0x1f9882;for(let _0x141923=0x202e+-0x3*0xa66+-0xfc;_0x141923<_0x291e37['elements']['length'];_0x141923++){const _0xe02ffe=_0x291e37['elements'][_0x141923];if(_0xe02ffe['name']===Pe){_0x1f9882=new Float32Array(_0x3cfaa2['lock'](),_0xe02ffe['offset']),_0x38f37d=_0xe02ffe['stride']/(-0x23d3+0x15b*0xd+0x1238);break;}}const _0x529fce=[];_0x1e4014['getIndices'](_0x529fce);const _0x335c43=_0x1e4014['primitive'][0x14c*-0xd+0x3*-0x1a5+-0x31d*-0x7]['count']/(0xdd0+0x14*0x16f+-0x2a79),_0x51e5c5=new Ammo['btVector3']();let _0x5caa08,_0x1b7651,_0x9487e2;const _0x211afc=_0x1e4014['primitive'][-0x1*0x1e7c+0x1950+0x4*0x14b]['base'];_0x91efe6=new Ammo['btTriangle'+'Mesh'](),_0x20a9df['_triMeshCa'+'che'][_0x1e4014['id']]=_0x91efe6;const _0x4db4b5=new Map();M['assert'](typeof _0x91efe6['getIndexed'+'MeshArray']=='function','Ammo.js\x20ve'+'rsion\x20is\x20t'+'oo\x20old,\x20pl'+'ease\x20updat'+'e\x20to\x20a\x20new'+'er\x20Ammo.');const _0x1bf2de=_0x91efe6['getIndexed'+'MeshArray']();_0x1bf2de['at'](0x714+0x2cd*0x3+0xf7b*-0x1)['m_numTrian'+'gles']=_0x335c43;const _0x59a067=_0x39e44a?_0x39e44a['x']:0x7d9+-0x11a1+-0x9c9*-0x1,_0x2ef051=_0x39e44a?_0x39e44a['y']:0x1*-0x217d+-0x2253+0x43d1,_0x5c014b=_0x39e44a?_0x39e44a['z']:0x1cde+0x17ae+-0x348b,_0x16ba68=_0x17c301=>{const _0x589208=_0x1f9882[_0x17c301*_0x38f37d]*_0x59a067,_0x3f6dfc=_0x1f9882[_0x17c301*_0x38f37d+(0x6d5+-0x1fd*-0x2+-0xace)]*_0x2ef051,_0x1f1575=_0x1f9882[_0x17c301*_0x38f37d+(-0x1dc3*0x1+0x204f*0x1+-0x28a)]*_0x5c014b;let _0xefd4ca;if(_0x463792){const _0x2af635=_0x589208+':'+_0x3f6dfc+':'+_0x1f1575;if(_0xefd4ca=_0x4db4b5['get'](_0x2af635),_0xefd4ca!==void(-0x3*0x896+0xe07+0xbbb))return _0xefd4ca;_0x51e5c5['setValue'](_0x589208,_0x3f6dfc,_0x1f1575),_0xefd4ca=_0x91efe6['findOrAddV'+'ertex'](_0x51e5c5,!(0x73*0x56+0x3*-0xa1d+-0x84a*0x1)),_0x4db4b5['set'](_0x2af635,_0xefd4ca);}else _0x51e5c5['setValue'](_0x589208,_0x3f6dfc,_0x1f1575),_0xefd4ca=_0x91efe6['findOrAddV'+'ertex'](_0x51e5c5,!(0x914+0x107b+0x2*-0xcc7));return _0xefd4ca;};for(let _0x445b1c=-0x319+-0x933+0xc4c;_0x445b1c<_0x335c43;_0x445b1c++)_0x5caa08=_0x16ba68(_0x529fce[_0x211afc+_0x445b1c*(-0xc43+0xc90+0x1*-0x4a)]),_0x1b7651=_0x16ba68(_0x529fce[_0x211afc+_0x445b1c*(-0x1f55+-0x1*-0x503+-0x9*-0x2ed)+(0x106b+0x25*-0x7a+0x138)]),_0x9487e2=_0x16ba68(_0x529fce[_0x211afc+_0x445b1c*(-0x29*-0x29+-0x1*-0x100f+-0x169d)+(0x9*-0x403+-0x23ca+0x47e7)]),_0x91efe6['addIndex'](_0x5caa08),_0x91efe6['addIndex'](_0x1b7651),_0x91efe6['addIndex'](_0x9487e2);Ammo['destroy'](_0x51e5c5);}const _0x36fdc5=new Ammo['btBvhTrian'+'gleMeshSha'+'pe'](_0x91efe6,!(-0x213+-0xb2*-0x2+0x7*0x19));if(!_0x39e44a){const _0x10488b=_0x20a9df['_getNodeSc'+'aling'](_0x2a7f8a);_0x36fdc5['setLocalSc'+'aling'](_0x10488b),Ammo['destroy'](_0x10488b);}const _0x571622=_0x20a9df['_getNodeTr'+'ansform'](_0x2a7f8a);_0x5eea76['addChildSh'+'ape'](_0x571622,_0x36fdc5),Ammo['destroy'](_0x571622);}['createPhys'+'icalShape'](_0x1da1f1,_0x246610){if(!(typeof Ammo>'u')&&(_0x246610['model']||_0x246610['render'])){const _0x47f346=new Ammo['btCompound'+'Shape'](),_0x43621f=_0x1da1f1['getWorldTr'+'ansform']()['getScale']();if(_0x246610['render']){const _0x1e5385=_0x246610['render']['meshes'];for(let _0x1547ca=-0xc1e*0x1+-0x2166+-0xf2c*-0x3;_0x1547ca<_0x1e5385['length'];_0x1547ca++)_0x246610['convexHull']?this['createAmmo'+'Hull'](_0x1e5385[_0x1547ca],ng,_0x47f346,_0x43621f):this['createAmmo'+'Mesh'](_0x1e5385[_0x1547ca],ng,_0x47f346,_0x43621f,_0x246610['checkVerte'+'xDuplicate'+'s']);}else{if(_0x246610['model']){const _0x251c60=_0x246610['model']['meshInstan'+'ces'];for(let _0x3eb6bc=0x2c5*0x4+0x12a8+-0x1dbc;_0x3eb6bc<_0x251c60['length'];_0x3eb6bc++)this['createAmmo'+'Mesh'](_0x251c60[_0x3eb6bc]['mesh'],_0x251c60[_0x3eb6bc]['node'],_0x47f346,null,_0x246610['checkVerte'+'xDuplicate'+'s']);const _0x448e9=new Ammo['btVector3'](_0x43621f['x'],_0x43621f['y'],_0x43621f['z']);_0x47f346['setLocalSc'+'aling'](_0x448e9),Ammo['destroy'](_0x448e9);}}return _0x47f346;}}['recreatePh'+'ysicalShap'+'es'](_0x2d8432){const _0x2f044d=_0x2d8432['data'];if((_0x2f044d['renderAsse'+'t']||_0x2f044d['asset'])&&_0x2d8432['enabled']&&_0x2d8432['entity']['enabled']){this['loadAsset'](_0x2d8432,_0x2f044d['renderAsse'+'t']||_0x2f044d['asset'],_0x2f044d['renderAsse'+'t']?'render':'model');return;}this['doRecreate'+'PhysicalSh'+'ape'](_0x2d8432);}['loadAsset'](_0x1332bb,_0x8f0b6a,_0x2b82a7){const _0x2cd59e=_0x1332bb['data'],_0x5a4c43=this['system']['app']['assets'],_0x34b4dc=_0x2cd59e[_0x2b82a7],_0x8018e6=_0x333f1c=>{_0x2cd59e[_0x2b82a7]===_0x34b4dc&&(_0x2cd59e[_0x2b82a7]=_0x333f1c['resource'],this['doRecreate'+'PhysicalSh'+'ape'](_0x1332bb));},_0x2bdb57=_0x671c2e=>{_0x671c2e['ready'](_0x36ff9b=>{if(_0x36ff9b['data']['containerA'+'sset']){const _0x295243=_0x5a4c43['get'](_0x36ff9b['data']['containerA'+'sset']);_0x295243['loaded']?_0x8018e6(_0x36ff9b):(_0x295243['ready'](()=>{_0x8018e6(_0x36ff9b);}),_0x5a4c43['load'](_0x295243));}else _0x8018e6(_0x36ff9b);}),_0x5a4c43['load'](_0x671c2e);},_0xb2240=_0x5a4c43['get'](_0x8f0b6a);_0xb2240?_0x2bdb57(_0xb2240):_0x5a4c43['once']('add:'+_0x8f0b6a,_0x2bdb57);}['doRecreate'+'PhysicalSh'+'ape'](_0x164f19){const _0x1aafa9=_0x164f19['entity'],_0x36c61f=_0x164f19['data'];_0x36c61f['model']||_0x36c61f['render']?(this['destroySha'+'pe'](_0x36c61f),_0x36c61f['shape']=this['createPhys'+'icalShape'](_0x1aafa9,_0x36c61f),_0x1aafa9['rigidbody']?(_0x1aafa9['rigidbody']['disableSim'+'ulation'](),_0x1aafa9['rigidbody']['createBody'](),_0x1aafa9['enabled']&&_0x1aafa9['rigidbody']['enabled']&&_0x1aafa9['rigidbody']['enableSimu'+'lation']()):_0x1aafa9['trigger']?_0x1aafa9['trigger']['initialize'](_0x36c61f):_0x1aafa9['trigger']=new rv(this['system']['app'],_0x164f19,_0x36c61f)):(this['beforeRemo'+'ve'](_0x1aafa9,_0x164f19),this['remove'](_0x1aafa9,_0x36c61f));}['updateTran'+'sform'](_0x5a24fc,_0x1a8ab1,_0x2369c1,_0x4820ec){if(_0x5a24fc['shape']){const _0x423134=_0x5a24fc['entity']['getWorldTr'+'ansform']()['getScale'](),_0x4c7e44=_0x5a24fc['shape']['getLocalSc'+'aling']();(_0x423134['x']!==_0x4c7e44['x']()||_0x423134['y']!==_0x4c7e44['y']()||_0x423134['z']!==_0x4c7e44['z']())&&this['doRecreate'+'PhysicalSh'+'ape'](_0x5a24fc);}super['updateTran'+'sform'](_0x5a24fc,_0x1a8ab1,_0x2369c1,_0x4820ec);}['destroySha'+'pe'](_0x138d7f){if(!_0x138d7f['shape'])return;const _0x374c37=_0x138d7f['shape']['getNumChil'+'dShapes']();for(let _0x12c09e=0x1*-0x1ae1+-0x1*0x1aed+-0x2*-0x1ae7;_0x12c09e<_0x374c37;_0x12c09e++){const _0x1af106=_0x138d7f['shape']['getChildSh'+'ape'](_0x12c09e);Ammo['destroy'](_0x1af106);}Ammo['destroy'](_0x138d7f['shape']),_0x138d7f['shape']=null;}}class _L extends ma{['createPhys'+'icalShape'](_0x2ba0a6,_0x165482){if(typeof Ammo<'u')return new Ammo['btCompound'+'Shape']();}['_addEachDe'+'scendant'](_0x4b052b){!_0x4b052b['collision']||_0x4b052b['rigidbody']||(_0x4b052b['collision']['_compoundP'+'arent']=this,_0x4b052b!==this['entity']&&_0x4b052b['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x4b052b['collision']));}['_updateEac'+'hDescendan'+'t'](_0x53df6f){_0x53df6f['collision']&&_0x53df6f['collision']['_compoundP'+'arent']===this&&(_0x53df6f['collision']['_compoundP'+'arent']=null,_0x53df6f!==this['entity']&&!_0x53df6f['rigidbody']&&_0x53df6f['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x53df6f['collision']));}['_updateEac'+'hDescendan'+'tTransform'](_0x37e1a4){!_0x37e1a4['collision']||_0x37e1a4['collision']['_compoundP'+'arent']!==this['collision']['_compoundP'+'arent']||this['collision']['system']['updateComp'+'oundChildT'+'ransform'](_0x37e1a4,!(-0x1*-0x12b+-0x1d02+0x2c*0xa2));}}class gL extends lt{constructor(_0x116953){super(_0x116953),this['id']='collision',this['ComponentT'+'ype']=Ga,this['DataType']=iL,this['schema']=hL,this['implementa'+'tions']={},this['_triMeshCa'+'che']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['on']('remove',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x5d24b1,_0x5dd424,_0x44a446){_0x44a446=['type','halfExtent'+'s','radius','axis','height','convexHull','shape','model','asset','render','renderAsse'+'t','enabled','linearOffs'+'et','angularOff'+'set','checkVerte'+'xDuplicate'+'s'];const _0x43156a={};for(let _0x238e9b=0x1*0x859+-0xd68+0x50f,_0x543929=_0x44a446['length'];_0x238e9b<_0x543929;_0x238e9b++){const _0x391a97=_0x44a446[_0x238e9b];_0x43156a[_0x391a97]=_0x5dd424[_0x391a97];}let _0x3e911b;if(_0x5dd424['hasOwnProp'+'erty']('asset')?(_0x3e911b=_0x44a446['indexOf']('model'),_0x3e911b!==-(-0x87b+-0x1e33+-0x26af*-0x1)&&_0x44a446['splice'](_0x3e911b,0x5*-0x6ef+0x49*-0xb+0x25cf),_0x3e911b=_0x44a446['indexOf']('render'),_0x3e911b!==-(0x2*-0x4f5+0x1ce5+-0x12fa)&&_0x44a446['splice'](_0x3e911b,-0x25e2+-0x63*0xc+0x2a87)):_0x5dd424['hasOwnProp'+'erty']('model')&&(_0x3e911b=_0x44a446['indexOf']('asset'),_0x3e911b!==-(-0x1086+-0x1566+0x13*0x1ff)&&_0x44a446['splice'](_0x3e911b,-0xf9f+0x2362+0x2*-0x9e1)),_0x43156a['type']||(_0x43156a['type']=_0x5d24b1['data']['type']),_0x5d24b1['data']['type']=_0x43156a['type'],Array['isArray'](_0x43156a['halfExtent'+'s'])&&(_0x43156a['halfExtent'+'s']=new I(_0x43156a['halfExtent'+'s'])),Array['isArray'](_0x43156a['linearOffs'+'et'])&&(_0x43156a['linearOffs'+'et']=new I(_0x43156a['linearOffs'+'et'])),Array['isArray'](_0x43156a['angularOff'+'set'])){const _0x1fc147=_0x43156a['angularOff'+'set'];_0x1fc147['length']===0x10*0x245+-0x265*-0x1+-0x26b2?_0x43156a['angularOff'+'set']=new le()['setFromEul'+'erAngles'](_0x1fc147[0x1d57+0x6*-0x95+0x19d9*-0x1],_0x1fc147[0xfed+-0x10+-0xfdc],_0x1fc147[-0x131*0x1+-0x1*-0x228e+-0x1*0x215b]):_0x43156a['angularOff'+'set']=new le(_0x43156a['angularOff'+'set']);}const _0x38f9fd=this['_createImp'+'lementatio'+'n'](_0x43156a['type']);_0x38f9fd['beforeInit'+'ialize'](_0x5d24b1,_0x43156a),super['initialize'+'ComponentD'+'ata'](_0x5d24b1,_0x43156a,_0x44a446),_0x38f9fd['afterIniti'+'alize'](_0x5d24b1,_0x43156a);}['_createImp'+'lementatio'+'n'](_0x476faa){if(this['implementa'+'tions'][_0x476faa]===void(-0x1007+0x661*-0x1+0x4*0x59a)){let _0x2e1636;switch(_0x476faa){case'box':_0x2e1636=new cL(this);break;case'sphere':_0x2e1636=new dL(this);break;case'capsule':_0x2e1636=new fL(this);break;case'cylinder':_0x2e1636=new uL(this);break;case'cone':_0x2e1636=new mL(this);break;case'mesh':_0x2e1636=new pL(this);break;case'compound':_0x2e1636=new _L(this);break;default:M['error']('_createImp'+'lementatio'+'n:\x20Invalid'+'\x20collision'+'\x20system\x20ty'+'pe:\x20'+_0x476faa);}this['implementa'+'tions'][_0x476faa]=_0x2e1636;}return this['implementa'+'tions'][_0x476faa];}['_getImplem'+'entation'](_0x153386){return this['implementa'+'tions'][_0x153386['collision']['data']['type']];}['cloneCompo'+'nent'](_0x3d68fb,_0x33a082){return this['_getImplem'+'entation'](_0x3d68fb)['clone'](_0x3d68fb,_0x33a082);}['onBeforeRe'+'move'](_0x3ee7fd,_0x75afe9){this['implementa'+'tions'][_0x75afe9['data']['type']]['beforeRemo'+'ve'](_0x3ee7fd,_0x75afe9),_0x75afe9['onBeforeRe'+'move']();}['onRemove'](_0x4dabf7,_0x45ed2b){this['implementa'+'tions'][_0x45ed2b['type']]['remove'](_0x4dabf7,_0x45ed2b);}['updateComp'+'oundChildT'+'ransform'](_0x5eefb4,_0x5e0b5c){const _0x2ced15=_0x5eefb4['collision']['_compoundP'+'arent'];if(_0x2ced15!==_0x5eefb4['collision']&&_0x5eefb4['enabled']&&_0x5eefb4['collision']['enabled']&&(_0x5eefb4['_dirtyLoca'+'l']||_0x5e0b5c)){const _0x4e01ad=this['_getNodeTr'+'ansform'](_0x5eefb4,_0x2ced15['entity']),_0x5c7810=_0x2ced15['getCompoun'+'dChildShap'+'eIndex'](_0x5eefb4['collision']['shape']);_0x5c7810===null?_0x2ced15['shape']['addChildSh'+'ape'](_0x4e01ad,_0x5eefb4['collision']['data']['shape']):_0x2ced15['shape']['updateChil'+'dTransform'](_0x5c7810,_0x4e01ad,!(0x1*-0x1bf4+-0xf30+-0xac9*-0x4)),Ammo['destroy'](_0x4e01ad);}}['_removeCom'+'poundChild'](_0x172396,_0x60a927){if(_0x172396['shape']['getNumChil'+'dShapes']()!==-0x1340+0x1bb2+-0x872){if(_0x172396['shape']['removeChil'+'dShape'])_0x172396['shape']['removeChil'+'dShape'](_0x60a927);else{const _0x197eda=_0x172396['getCompoun'+'dChildShap'+'eIndex'](_0x60a927);_0x197eda!==null&&_0x172396['shape']['removeChil'+'dShapeByIn'+'dex'](_0x197eda);}}}['onTransfor'+'mChanged'](_0x2e13d0,_0x49abca,_0x5cae19,_0x3882b7){this['implementa'+'tions'][_0x2e13d0['data']['type']]['updateTran'+'sform'](_0x2e13d0,_0x49abca,_0x5cae19,_0x3882b7);}['changeType'](_0x42679f,_0x22f78b,_0x30daca){this['implementa'+'tions'][_0x22f78b]['beforeRemo'+'ve'](_0x42679f['entity'],_0x42679f),this['implementa'+'tions'][_0x22f78b]['remove'](_0x42679f['entity'],_0x42679f['data']),this['_createImp'+'lementatio'+'n'](_0x30daca)['reset'](_0x42679f,_0x42679f['data']);}['recreatePh'+'ysicalShap'+'es'](_0xa82a54){this['implementa'+'tions'][_0xa82a54['data']['type']]['recreatePh'+'ysicalShap'+'es'](_0xa82a54);}['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x4a5ffe,_0x212f29){if(_0x4a5ffe===_0x212f29){const _0x4988c5=_0x4a5ffe['getWorldTr'+'ansform']()['getScale']();Ql['setScale'](_0x4988c5['x'],_0x4988c5['y'],_0x4988c5['z']);}else this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x4a5ffe['parent'],_0x212f29),Ql['mul'](_0x4a5ffe['getLocalTr'+'ansform']());}['_getNodeSc'+'aling'](_0x1f2c1a){const _0x3d4bc7=_0x1f2c1a['getWorldTr'+'ansform']()['getScale']();return new Ammo['btVector3'](_0x3d4bc7['x'],_0x3d4bc7['y'],_0x3d4bc7['z']);}['_getNodeTr'+'ansform'](_0x47eb7c,_0x442de0){let _0x448884,_0x52abd3;_0x442de0?(this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x47eb7c,_0x442de0),_0x448884=oL,_0x52abd3=br,Ql['getTransla'+'tion'](_0x448884),_0x52abd3['setFromMat'+'4'](Ql)):(_0x448884=_0x47eb7c['getPositio'+'n'](),_0x52abd3=_0x47eb7c['getRotatio'+'n']());const _0x7d1293=new Ammo['btQuaterni'+'on'](),_0x562f7b=new Ammo['btTransfor'+'m']();_0x562f7b['setIdentit'+'y']();const _0x5876af=_0x562f7b['getOrigin'](),_0x59e4f2=_0x47eb7c['collision'];if(_0x59e4f2&&_0x59e4f2['_hasOffset']){const _0x3d0bf0=_0x59e4f2['data']['linearOffs'+'et'],_0x3c5a23=_0x59e4f2['data']['angularOff'+'set'],_0x3ecc8b=lL;br['copy'](_0x52abd3)['transformV'+'ector'](_0x3d0bf0,_0x3ecc8b),_0x3ecc8b['add'](_0x448884),br['copy'](_0x52abd3)['mul'](_0x3c5a23),_0x5876af['setValue'](_0x3ecc8b['x'],_0x3ecc8b['y'],_0x3ecc8b['z']),_0x7d1293['setValue'](br['x'],br['y'],br['z'],br['w']);}else _0x5876af['setValue'](_0x448884['x'],_0x448884['y'],_0x448884['z']),_0x7d1293['setValue'](_0x52abd3['x'],_0x52abd3['y'],_0x52abd3['z'],_0x52abd3['w']);return _0x562f7b['setRotatio'+'n'](_0x7d1293),Ammo['destroy'](_0x7d1293),_0x562f7b;}['destroy'](){for(const _0x8f3eb9 in this['_triMeshCa'+'che'])Ammo['destroy'](this['_triMeshCa'+'che'][_0x8f3eb9]);this['_triMeshCa'+'che']=null,super['destroy']();}}const Jl=new ie(),SL=new Ht();class yL{constructor(_0x12aa98,_0x58282f,_0x4281bf){this['_entity']=_0x12aa98,this['_element']=_0x12aa98['element'],this['model']=new $i(),this['node']=new He(),this['model']['graph']=this['node'],this['mesh']=_0x58282f,this['meshInstan'+'ce']=new We(this['mesh'],_0x4281bf,this['node']),this['meshInstan'+'ce']['name']='ImageEleme'+'nt:\x20'+_0x12aa98['name'],this['meshInstan'+'ce']['castShadow']=!(-0x1*-0x7a9+-0x2024+0x187c),this['meshInstan'+'ce']['receiveSha'+'dow']=!(0x3*-0x638+-0xbec+-0x1e95*-0x1),this['_meshDirty']=!(-0xda6*0x2+0x1c*0x83+0xcf9),this['model']['meshInstan'+'ces']['push'](this['meshInstan'+'ce']),this['_entity']['addChild'](this['model']['graph']),this['model']['_entity']=this['_entity'],this['unmaskMesh'+'Instance']=null;}['destroy'](){var _0xf82854,_0x284f8d;this['setMateria'+'l'](null),this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),this['model']['destroy'](),this['model']=null,this['node']=null,this['mesh']=null,(_0xf82854=this['meshInstan'+'ce'])==null||_0xf82854['destroy'](),this['meshInstan'+'ce']=null,(_0x284f8d=this['unmaskMesh'+'Instance'])==null||_0x284f8d['destroy'](),this['unmaskMesh'+'Instance']=null,this['_entity']=null,this['_element']=null;}['setMesh'](_0x528c1a){this['meshInstan'+'ce']&&(this['mesh']=_0x528c1a,this['meshInstan'+'ce']['mesh']=_0x528c1a,this['meshInstan'+'ce']['visible']=!!_0x528c1a,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['mesh']=_0x528c1a),this['forceUpdat'+'eAabb']());}['setMask'](_0x3b5118){var _0x2f8f18;if(this['meshInstan'+'ce']){if(this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),_0x3b5118){this['unmaskMesh'+'Instance']=new We(this['mesh'],this['meshInstan'+'ce']['material'],this['node']),this['unmaskMesh'+'Instance']['name']='Unmask:\x20'+this['_entity']['name'],this['unmaskMesh'+'Instance']['castShadow']=!(-0x266c+0x23*-0xb6+0x1*0x3f4f),this['unmaskMesh'+'Instance']['receiveSha'+'dow']=!(0x1*-0x29f+0x784+0x139*-0x4),this['unmaskMesh'+'Instance']['pick']=!(-0x198d+0x24a6+-0xb18),this['model']['meshInstan'+'ces']['push'](this['unmaskMesh'+'Instance']);for(const _0x30fc19 in this['meshInstan'+'ce']['parameters'])this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x30fc19,this['meshInstan'+'ce']['parameters'][_0x30fc19]['data']);}else{const _0x3a0438=this['model']['meshInstan'+'ces']['indexOf'](this['unmaskMesh'+'Instance']);_0x3a0438>=-0x1*-0x15bc+-0x71b+-0x23*0x6b&&this['model']['meshInstan'+'ces']['splice'](_0x3a0438,0x5f7*0x1+-0x15bf+0x3*0x543);}this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['addModelTo'+'Layers'](this['model']),_0x3b5118||((_0x2f8f18=this['unmaskMesh'+'Instance'])==null||_0x2f8f18['destroy'](),this['unmaskMesh'+'Instance']=null);}}['setMateria'+'l'](_0x28e037){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x28e037,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['material']=_0x28e037));}['setParamet'+'er'](_0x5887d0,_0x51bfa5){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['setParamet'+'er'](_0x5887d0,_0x51bfa5),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x5887d0,_0x51bfa5));}['deletePara'+'meter'](_0x1ccb64){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['deletePara'+'meter'](_0x1ccb64),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['deletePara'+'meter'](_0x1ccb64));}['setUnmaskD'+'rawOrder'](){if(!this['meshInstan'+'ce'])return;const _0x161e32=function(_0xb14121){let _0x2c7d1c;const _0x28f1bd=_0xb14121['children'],_0x2acafa=_0x28f1bd['length'];if(_0x2acafa){for(let _0x4b8c33=-0x1*-0x12ff+-0x1522+0x223;_0x4b8c33<_0x2acafa;_0x4b8c33++)_0x28f1bd[_0x4b8c33]['element']&&(_0x2c7d1c=_0x28f1bd[_0x4b8c33]);if(!_0x2c7d1c)return null;const _0x1ffa7f=_0x161e32(_0x2c7d1c);return _0x1ffa7f||_0x2c7d1c;}return null;};if(this['unmaskMesh'+'Instance']){const _0x139621=_0x161e32(this['_entity']);_0x139621&&_0x139621['element']?this['unmaskMesh'+'Instance']['drawOrder']=_0x139621['element']['drawOrder']+_0x139621['element']['getMaskOff'+'set']():this['unmaskMesh'+'Instance']['drawOrder']=this['meshInstan'+'ce']['drawOrder']+this['_element']['getMaskOff'+'set'](),M['trace'](Rs,'setDrawOrd'+'er:\x20',this['unmaskMesh'+'Instance']['name'],this['unmaskMesh'+'Instance']['drawOrder']);}}['setDrawOrd'+'er'](_0x266ddf){this['meshInstan'+'ce']&&(M['trace'](Rs,'setDrawOrd'+'er:\x20',this['meshInstan'+'ce']['name'],_0x266ddf),this['meshInstan'+'ce']['drawOrder']=_0x266ddf);}['setCull'](_0x7a558d){if(!this['meshInstan'+'ce'])return;const _0x28f043=this['_element'];let _0x28116e=null;_0x7a558d&&_0x28f043['_isScreenS'+'pace']()&&(_0x28116e=function(_0x143734){return _0x28f043['isVisibleF'+'orCamera'](_0x143734);}),this['meshInstan'+'ce']['cull']=_0x7a558d,this['meshInstan'+'ce']['isVisibleF'+'unc']=_0x28116e,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['cull']=_0x7a558d,this['unmaskMesh'+'Instance']['isVisibleF'+'unc']=_0x28116e);}['setScreenS'+'pace'](_0x15cf74){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['screenSpac'+'e']=_0x15cf74,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['screenSpac'+'e']=_0x15cf74));}['setLayer'](_0x5b44b7){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['layer']=_0x5b44b7,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['layer']=_0x5b44b7));}['forceUpdat'+'eAabb'](_0x19f282){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_aabbVer']=-(-0x1bbd+0x18d7*-0x1+0x3495),this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_aabbVer']=-(-0x935*0x1+0x1245*0x1+-0x90f)));}['setAabbFun'+'c'](_0x429ee1){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_updateAab'+'bFunc']=_0x429ee1,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_updateAab'+'bFunc']=_0x429ee1));}}class vL{constructor(_0x320397){h(this,'_evtSetMes'+'hes',null),(this['_element']=_0x320397,this['_entity']=_0x320397['entity'],this['_system']=_0x320397['system'],this['_textureAs'+'set']=null,this['_texture']=null,this['_materialA'+'sset']=null,this['_material']=null,this['_spriteAss'+'et']=null,this['_sprite']=null,this['_spriteFra'+'me']=0x144d+-0x2666+0x1*0x1219,this['_pixelsPer'+'Unit']=null,this['_targetAsp'+'ectRatio']=-(-0xe20*0x1+0x1*-0x239+-0x7*-0x256),this['_rect']=new ae(0x4d3+0x3*0x8dd+-0x2*0xfb5,-0x47*-0x37+-0x250b+0x2*0xae5,-0x1086+0x2*-0x797+0x1fb5,0xd5*0x2d+0x22a2+-0x29*0x1c2),this['_mask']=!(-0x3df+-0x1*-0x216c+-0x7c*0x3d),this['_maskRef']=0x233c+-0x34b+-0x1ff1,this['_outerScal'+'e']=new J(),this['_outerScal'+'eUniform']=new Float32Array(0xfa4+-0x1808+0x866),this['_innerOffs'+'et']=new ae(),this['_innerOffs'+'etUniform']=new Float32Array(-0x2183*-0x1+-0x9f*-0x15+-0x1*0x2e8a),this['_atlasRect']=new ae(),this['_atlasRect'+'Uniform']=new Float32Array(-0xf2c*-0x1+-0x25eb*0x1+0x16c3),this['_defaultMe'+'sh']=this['_createMes'+'h'](),this['_renderabl'+'e']=new yL(this['_entity'],this['_defaultMe'+'sh'],this['_material']),this['_color']=new ie(-0x1f0+-0xc72+-0x7f*-0x1d,-0x579+-0xb*0x75+0xa81,-0x1*-0xf04+-0x1*0x2677+0x1774,0x15dc+0x617+-0x49*0x62),this['_colorUnif'+'orm']=new Float32Array([-0x1ff*-0x7+-0xf5+-0x1*0xd03,0x1ae*-0x2+0x1*-0x3bf+0x71c,0x8f9*-0x4+-0x1426+0x380b]),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',0x1723+-0xc2d*-0x1+-0x234f),this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_onScreenC'+'hange'](this['_element']['screen']),this['_element']['on']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['on']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['on']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this));}['destroy'](){this['textureAss'+'et']=null,this['spriteAsse'+'t']=null,this['materialAs'+'set']=null,this['_renderabl'+'e']['setMesh'](this['_defaultMe'+'sh']),this['_renderabl'+'e']['destroy'](),this['_defaultMe'+'sh']=null,this['_element']['off']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this);}['_onResolut'+'ionChange'](_0x3b0f47){}['_onParentR'+'esizeOrPiv'+'otChange'](){this['_renderabl'+'e']['mesh']&&this['_updateMes'+'h'](this['_renderabl'+'e']['mesh']);}['_onScreenS'+'paceChange'](_0x3f7e79){this['_updateMat'+'erial'](_0x3f7e79);}['_onScreenC'+'hange'](_0x54335d,_0x276806){_0x54335d?this['_updateMat'+'erial'](_0x54335d['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0x5*-0x76e+0x127*0x11+-0x38bc));}['_onDrawOrd'+'erChange'](_0x331e75){this['_renderabl'+'e']['setDrawOrd'+'er'](_0x331e75),this['mask']&&this['_element']['screen']&&this['_element']['screen']['screen']['once']('syncdrawor'+'der',function(){this['_renderabl'+'e']['setUnmaskD'+'rawOrder']();},this);}['_hasUserMa'+'terial'](){return!!this['_materialA'+'sset']||!!this['_material']&&this['_system']['defaultIma'+'geMaterial'+'s']['indexOf'](this['_material'])===-(-0x1*0x241c+-0x61*-0x53+0x4aa);}['_use9Slici'+'ng'](){return this['sprite']&&(this['sprite']['renderMode']===Et||this['sprite']['renderMode']===At);}['_updateMat'+'erial'](_0x5521ee){const _0x56ab3a=!!this['_mask'],_0x13b998=!!(this['sprite']&&this['sprite']['renderMode']===Et),_0x3a697c=!!(this['sprite']&&this['sprite']['renderMode']===At);this['_hasUserMa'+'terial']()||(this['_material']=this['_system']['getImageEl'+'ementMater'+'ial'](_0x5521ee,_0x56ab3a,_0x13b998,_0x3a697c)),this['_renderabl'+'e']&&(this['_renderabl'+'e']['setCull'](!this['_element']['_isScreenS'+'pace']()||this['_element']['_isScreenC'+'ulled']()),this['_renderabl'+'e']['setMateria'+'l'](this['_material']),this['_renderabl'+'e']['setScreenS'+'pace'](_0x5521ee),this['_renderabl'+'e']['setLayer'](_0x5521ee?WT:iy));}['_createMes'+'h'](){const _0x58b6a4=this['_element'],_0x4cc2c4=_0x58b6a4['calculated'+'Width'],_0x195191=_0x58b6a4['calculated'+'Height'],_0x2e9241=this['_rect'],_0x76ba76=this['_system']['app']['graphicsDe'+'vice'],_0x2fa33a=new Float32Array([_0x4cc2c4,0x1*0xf2+0x1089*-0x1+0x133*0xd,-0x268c+-0x9*-0x104+0x1d68,-0xb*-0x1+-0xb96+0xb8b,0x1b2b+0x1eeb+0x3a16*-0x1,-0x1*0x1cdb+-0xb*0x17b+-0x1*-0x2d25,_0x2e9241['x']+_0x2e9241['z'],0x8*-0x163+-0x2*0x611+-0x173b*-0x1-_0x2e9241['y'],_0x4cc2c4,_0x195191,-0x4f7*-0x7+0x1*-0x233+-0x208e,-0x242+0x2*-0x11bc+0x1*0x25ba,-0x1f67+0x22ff*0x1+-0x4*0xe6,0x109*0xe+0x557*0x7+0x6*-0x8a5,_0x2e9241['x']+_0x2e9241['z'],-0x1*-0x1569+0x1*0x1c88+-0x31f*0x10-(_0x2e9241['y']+_0x2e9241['w']),-0x73+-0xf09*-0x2+-0x1d9f,0xa76+-0x11e4+-0x76e*-0x1,0x9*-0x3f6+-0xa*-0x167+0xad0*0x2,0x1f*0x3+-0x7d5+0x778,0x2628+0x20d4+0xa24*-0x7,-0x93e+-0x92*-0xe+-0x143*-0x1,_0x2e9241['x'],-0x17b7+0x1*-0xff8+0x27b0-_0x2e9241['y'],0xabe+0x941*-0x3+0x1105,_0x195191,-0x1b54+-0xe*0x116+-0x2a88*-0x1,0x24a8+-0x1*-0xc82+0x1f*-0x196,-0x2*-0xd03+-0x25*-0x53+0x2605*-0x1,0x17b2+0x524+-0x1cd5,_0x2e9241['x'],-0x14*-0x46+0xadd+-0x16*0xbe-(_0x2e9241['y']+_0x2e9241['w'])]),_0x3b0ea8=SL['get'](_0x76ba76,()=>new zt(_0x76ba76,[{'semantic':Pe,'components':0x3,'type':Be},{'semantic':cs,'components':0x3,'type':Be},{'semantic':Yt,'components':0x2,'type':Be}])),_0x5b9861=new xs(_0x76ba76,_0x3b0ea8,-0x1*-0x1b07+-0x14*0x124+-0x433,{'data':_0x2fa33a['buffer']}),_0xe1c259=new Ge(_0x76ba76);return _0xe1c259['vertexBuff'+'er']=_0x5b9861,_0xe1c259['primitive'][-0x24fc+0x16a*-0x2+-0x13e8*-0x2]['type']=cr,_0xe1c259['primitive'][0xb53*-0x3+-0x1508+-0x1*-0x3701]['base']=0x270f+-0x4*0x281+0x1*-0x1d0b,_0xe1c259['primitive'][-0x1a9+-0x892+-0x1*-0xa3b]['count']=0x1*-0x1561+0x74f*-0x5+0x39f0,_0xe1c259['primitive'][0xea7+-0x17c2+0x91b]['indexed']=!(-0x15b0*-0x1+-0x2*0xe87+0x75f),_0xe1c259['aabb']['setMinMax'](I['ZERO'],new I(_0x4cc2c4,_0x195191,0x1b*0xf1+0x1b7b+0x2*-0x1a73)),this['_updateMes'+'h'](_0xe1c259),_0xe1c259;}['_updateMes'+'h'](_0x4c877d){const _0x4214f8=this['_element'];let _0x23eaf2=_0x4214f8['calculated'+'Width'],_0x56227b=_0x4214f8['calculated'+'Height'];if(_0x4214f8['fitMode']!==Th&&this['_targetAsp'+'ectRatio']>-0x133f+-0x14a4+0x27e3){const _0x1ae9aa=_0x4214f8['calculated'+'Width']/_0x4214f8['calculated'+'Height'];_0x4214f8['fitMode']===JD&&_0x1ae9aa>this['_targetAsp'+'ectRatio']||_0x4214f8['fitMode']===eL&&_0x1ae9aa<this['_targetAsp'+'ectRatio']?_0x23eaf2=_0x4214f8['calculated'+'Height']*this['_targetAsp'+'ectRatio']:_0x56227b=_0x4214f8['calculated'+'Width']/this['_targetAsp'+'ectRatio'];}const _0x2bff03=_0x4214f8['_isScreenS'+'pace']();if(this['_updateMat'+'erial'](_0x2bff03),this['_renderabl'+'e']&&this['_renderabl'+'e']['forceUpdat'+'eAabb'](),this['sprite']&&(this['sprite']['renderMode']===Et||this['sprite']['renderMode']===At)){const _0xb9fc1d=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]],_0x5c4177=(-0x71*-0x46+-0x1f41+-0x5d*-0x1)/_0xb9fc1d['rect']['z'],_0x5698ce=(0x2f*0x41+0x1*0x2439+-0x3026*0x1)/_0xb9fc1d['rect']['w'];this['_innerOffs'+'et']['set'](_0xb9fc1d['border']['x']*_0x5c4177,_0xb9fc1d['border']['y']*_0x5698ce,_0xb9fc1d['border']['z']*_0x5c4177,_0xb9fc1d['border']['w']*_0x5698ce);const _0x536b0a=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0xb9fc1d['rect']['x']/_0x536b0a['width'],_0xb9fc1d['rect']['y']/_0x536b0a['height'],_0xb9fc1d['rect']['z']/_0x536b0a['width'],_0xb9fc1d['rect']['w']/_0x536b0a['height']);const _0x3ddcdb=this['_pixelsPer'+'Unit']!==null?this['_pixelsPer'+'Unit']:this['sprite']['pixelsPerU'+'nit'],_0x4b2fd=_0xb9fc1d['rect']['z']/_0x3ddcdb,_0x16d063=_0xb9fc1d['rect']['w']/_0x3ddcdb;this['_outerScal'+'e']['set'](Math['max'](_0x23eaf2,this['_innerOffs'+'et']['x']*_0x4b2fd),Math['max'](_0x56227b,this['_innerOffs'+'et']['y']*_0x16d063));let _0x44311a=_0x4b2fd,_0xf6fbec=_0x16d063;this['_outerScal'+'e']['x']/=_0x4b2fd,this['_outerScal'+'e']['y']/=_0x16d063,_0x44311a*=Y['clamp'](_0x23eaf2/(this['_innerOffs'+'et']['x']*_0x4b2fd),-0x1760+0x3b5*-0x1+0x1b15+0.0001,-0x8c3+-0xa03+0x12c7),_0xf6fbec*=Y['clamp'](_0x56227b/(this['_innerOffs'+'et']['y']*_0x16d063),0x20f8+-0x18dc+-0xad*0xc+0.0001,-0x7*-0x94+0x108a+-0x1495),this['_renderabl'+'e']&&(this['_innerOffs'+'etUniform'][-0x3f7*0x1+0x2353*-0x1+0x274a]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x17e*0x11+0x377+0x15e8]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][0x15a7+-0x2*-0x390+-0x1cc5]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0x72e+0xbf0+-0x131b]=this['_innerOffs'+'et']['w'],this['_renderabl'+'e']['setParamet'+'er']('innerOffse'+'t',this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x10a0+-0x99e+-0xd1f*-0x2]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0x6ff+0x26d1+-0x517*0x9]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x41*0x29+0x1*0x713+-0x2*-0x1ac]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][-0x194c+0x85*0x1d+0x36a*0x3]=this['_atlasRect']['w'],this['_renderabl'+'e']['setParamet'+'er']('atlasRect',this['_atlasRect'+'Uniform']),this['_outerScal'+'eUniform'][-0x2a5*0x6+0x196+0xe48]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x220a+0x181f+-0x3a28]=this['_outerScal'+'e']['y'],this['_renderabl'+'e']['setParamet'+'er']('outerScale',this['_outerScal'+'eUniform']),this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']),this['_renderabl'+'e']['node']['setLocalSc'+'ale'](_0x44311a,_0xf6fbec,-0x1a04+0x1*-0x2cc+0x1cd1),this['_renderabl'+'e']['node']['setLocalPo'+'sition']((0x1*-0xd4b+-0x19f3+0x273e+0.5-_0x4214f8['pivot']['x'])*_0x23eaf2,(0x28c*-0x2+-0x13fa+0x2*0xc89+0.5-_0x4214f8['pivot']['y'])*_0x56227b,0x1*0x9f7+-0x1fb7+0x15c0));}else{const _0x51faaf=_0x4c877d['vertexBuff'+'er'],_0x1aa05a=new Float32Array(_0x51faaf['lock']()),_0x3ab94f=_0x4214f8['pivot']['x'],_0x161b58=_0x4214f8['pivot']['y'];_0x1aa05a[0x1*0x1e63+-0x2547+0x6e4]=_0x23eaf2-_0x3ab94f*_0x23eaf2,_0x1aa05a[0x13d2+-0x6ba+-0xd17]=0x2155+-0x154d+-0x604*0x2-_0x161b58*_0x56227b,_0x1aa05a[-0x1178+-0x1f5e+0x12*0x2b7]=_0x23eaf2-_0x3ab94f*_0x23eaf2,_0x1aa05a[-0xa5b+-0x1*-0x21f0+-0x178c]=_0x56227b-_0x161b58*_0x56227b,_0x1aa05a[-0xc5*-0x23+-0x6b*0x16+0x1*-0x11ad]=0x1194+0x2*0x95b+0x5*-0x742-_0x3ab94f*_0x23eaf2,_0x1aa05a[-0xb9*0x35+0x125+-0xd*-0x2dd]=-0x20f1+0x4ed*-0x2+0x2acb-_0x161b58*_0x56227b,_0x1aa05a[-0x104*0x26+0xf05*0x1+0x17ab]=-0x1965*-0x1+-0x1f30*0x1+0x5cb-_0x3ab94f*_0x23eaf2,_0x1aa05a[0x4ff*0x1+0x120f+-0x16f5]=_0x56227b-_0x161b58*_0x56227b;let _0x308133=0x3*0xce6+-0x1d4b+-0x966,_0x1b4950=-0x362*-0x2+0x9d4+0x1f*-0x89,_0x13ab20=this['_rect'];if(this['_sprite']&&this['_sprite']['frameKeys'][this['_spriteFra'+'me']]&&this['_sprite']['atlas']){const _0x2bacfd=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];_0x2bacfd&&(_0x13ab20=_0x2bacfd['rect'],_0x308133=this['_sprite']['atlas']['texture']['width'],_0x1b4950=this['_sprite']['atlas']['texture']['height']);}_0x1aa05a[-0x1*-0x16ca+-0x71*-0x4b+0x37df*-0x1]=(_0x13ab20['x']+_0x13ab20['z'])/_0x308133,_0x1aa05a[-0x1e5a+0x2*-0x9a7+0x31af]=-0x39+0x29*0x5f+0xefd*-0x1-_0x13ab20['y']/_0x1b4950,_0x1aa05a[-0xec*-0x17+-0x3c+-0x2*0xa75]=(_0x13ab20['x']+_0x13ab20['z'])/_0x308133,_0x1aa05a[0x41*-0x62+-0xdc4*-0x1+0xb2d*0x1]=0x796*0x5+0x152f*0x1+-0x3b1c-(_0x13ab20['y']+_0x13ab20['w'])/_0x1b4950,_0x1aa05a[-0xa4c+0x98*0x1c+-0x5e*0x11]=_0x13ab20['x']/_0x308133,_0x1aa05a[0x1*-0x10ed+0xba3+0x561]=-0x2*-0x12a5+-0x9*0x15b+-0x26*0xa9-_0x13ab20['y']/_0x1b4950,_0x1aa05a[0x25db+0xa62*-0x1+-0x1b5b]=_0x13ab20['x']/_0x308133,_0x1aa05a[0x31f*-0x2+-0x404*-0x6+-0x11bb]=-0xe14*0x2+-0x23ab+-0xa*-0x662-(_0x13ab20['y']+_0x13ab20['w'])/_0x1b4950,_0x51faaf['unlock']();const _0x5dc2b6=new I(-0x1*0x1bd6+-0x6*-0x632+-0x1*0x956-_0x3ab94f*_0x23eaf2,-0x1471+-0x1d5*-0x9+0x3f4-_0x161b58*_0x56227b,-0xca9+0x1ba9+0x14*-0xc0),_0xd19cad=new I(_0x23eaf2-_0x3ab94f*_0x23eaf2,_0x56227b-_0x161b58*_0x56227b,0x854+-0x4a5*0x1+0x1*-0x3af);_0x4c877d['aabb']['setMinMax'](_0x5dc2b6,_0xd19cad),this['_renderabl'+'e']&&(this['_renderabl'+'e']['node']['setLocalSc'+'ale'](0x202*0xe+-0x1c33+0x18*0x1,0x288+-0x1b92+0x190b,0x1f49*0x1+0xf5c+0x2*-0x1752),this['_renderabl'+'e']['node']['setLocalPo'+'sition'](-0xdd3+0x23*0x51+0x2c0,-0xab2+0x211d+-0x166b*0x1,-0x5da+0x3*0x18f+0x12d),this['_renderabl'+'e']['setAabbFun'+'c'](null));}this['_meshDirty']=!(0x1cdd+-0x667*0x1+-0x1675*0x1);}['_updateSpr'+'ite'](){let _0x1ae9c8=!(0x6c*-0x3+-0x2*0x66e+0x1*0xe21),_0x2c0c77=null;if(this['_targetAsp'+'ectRatio']=-(0x1fe2+-0xadb+-0x1506),this['_sprite']&&this['_sprite']['atlas']){_0x2c0c77=this['_sprite']['meshes'][this['spriteFram'+'e']],_0x1ae9c8=this['_sprite']['renderMode']===Et||this['_sprite']['renderMode']===At;const _0x34aad3=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];(_0x34aad3==null?void(-0x18c3+-0x144d+0x7*0x670):_0x34aad3['rect']['w'])>-0x20c0+0x102e+0x1092&&(this['_targetAsp'+'ectRatio']=_0x34aad3['rect']['z']/_0x34aad3['rect']['w']);}this['mesh']=_0x1ae9c8?_0x2c0c77:this['_defaultMe'+'sh'],this['refreshMes'+'h']();}['refreshMes'+'h'](){this['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(0x19f5+0x1335*0x1+-0x2*0x1695):this['_updateMes'+'h'](this['mesh']));}['_updateAab'+'b'](_0x386f08){return _0x386f08['center']['set'](-0x1*0x6cb+0x41*0x2e+-0x4e3,0x6e2+-0x1032+0x10*0x95,0x4b*-0x2e+-0x7bb+0x1535),_0x386f08['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(0x1dc5+-0x535+0x83*-0x30+0.5),this['_outerScal'+'e']['y']*(-0x2498+0xf4d*-0x1+-0xa61*-0x5+0.5),0x223*0x12+-0x1b1*-0x17+-0x4d5d+0.001),_0x386f08['setFromTra'+'nsformedAa'+'bb'](_0x386f08,this['_renderabl'+'e']['node']['getWorldTr'+'ansform']()),_0x386f08;}['_toggleMas'+'k'](){this['_element']['_dirtifyMa'+'sk']();const _0x551edb=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x551edb),this['_renderabl'+'e']['setMask'](!!this['_mask']);}['_onMateria'+'lLoad'](_0x421e2e){this['material']=_0x421e2e['resource'];}['_onMateria'+'lAdded'](_0x1d5271){this['_system']['app']['assets']['off']('add:'+_0x1d5271['id'],this['_onMateria'+'lAdded'],this),this['_materialA'+'sset']===_0x1d5271['id']&&this['_bindMater'+'ialAsset'](_0x1d5271);}['_bindMater'+'ialAsset'](_0x797d7){this['_entity']['enabled']&&(_0x797d7['on']('load',this['_onMateria'+'lLoad'],this),_0x797d7['on']('change',this['_onMateria'+'lChange'],this),_0x797d7['on']('remove',this['_onMateria'+'lRemove'],this),_0x797d7['resource']?this['_onMateria'+'lLoad'](_0x797d7):this['_system']['app']['assets']['load'](_0x797d7));}['_unbindMat'+'erialAsset'](_0x36ae67){_0x36ae67['off']('load',this['_onMateria'+'lLoad'],this),_0x36ae67['off']('change',this['_onMateria'+'lChange'],this),_0x36ae67['off']('remove',this['_onMateria'+'lRemove'],this);}['_onMateria'+'lChange'](){}['_onMateria'+'lRemove'](){}['_onTexture'+'Added'](_0x257919){this['_system']['app']['assets']['off']('add:'+_0x257919['id'],this['_onTexture'+'Added'],this),this['_textureAs'+'set']===_0x257919['id']&&this['_bindTextu'+'reAsset'](_0x257919);}['_bindTextu'+'reAsset'](_0x13f730){this['_entity']['enabled']&&(_0x13f730['on']('load',this['_onTexture'+'Load'],this),_0x13f730['on']('change',this['_onTexture'+'Change'],this),_0x13f730['on']('remove',this['_onTexture'+'Remove'],this),_0x13f730['resource']?this['_onTexture'+'Load'](_0x13f730):this['_system']['app']['assets']['load'](_0x13f730));}['_unbindTex'+'tureAsset'](_0x1118a1){_0x1118a1['off']('load',this['_onTexture'+'Load'],this),_0x1118a1['off']('change',this['_onTexture'+'Change'],this),_0x1118a1['off']('remove',this['_onTexture'+'Remove'],this);}['_onTexture'+'Load'](_0x105c06){this['texture']=_0x105c06['resource'];}['_onTexture'+'Change'](_0x3c962a){}['_onTexture'+'Remove'](_0x565697){}['_onSpriteA'+'ssetAdded'](_0x1125c4){this['_system']['app']['assets']['off']('add:'+_0x1125c4['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x1125c4['id']&&this['_bindSprit'+'eAsset'](_0x1125c4);}['_bindSprit'+'eAsset'](_0x211e1a){this['_entity']['enabled']&&(_0x211e1a['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x211e1a['on']('change',this['_onSpriteA'+'ssetChange'],this),_0x211e1a['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x211e1a['resource']?this['_onSpriteA'+'ssetLoad'](_0x211e1a):this['_system']['app']['assets']['load'](_0x211e1a));}['_unbindSpr'+'iteAsset'](_0x123b0d){_0x123b0d['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x123b0d['off']('change',this['_onSpriteA'+'ssetChange'],this),_0x123b0d['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x123b0d['data']['textureAtl'+'asAsset']&&this['_system']['app']['assets']['off']('load:'+_0x123b0d['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this);}['_onSpriteA'+'ssetLoad'](_0xf009c3){if(!_0xf009c3||!_0xf009c3['resource'])this['sprite']=null;else{if(_0xf009c3['resource']['atlas'])this['sprite']=_0xf009c3['resource'];else{const _0x21044e=_0xf009c3['data']['textureAtl'+'asAsset'];if(_0x21044e){const _0x3019f3=this['_system']['app']['assets'];_0x3019f3['off']('load:'+_0x21044e,this['_onTexture'+'AtlasLoad'],this),_0x3019f3['once']('load:'+_0x21044e,this['_onTexture'+'AtlasLoad'],this);}}}}['_onSpriteA'+'ssetChange'](_0x424f8a){this['_onSpriteA'+'ssetLoad'](_0x424f8a);}['_onSpriteA'+'ssetRemove'](_0x362e3f){}['_bindSprit'+'e'](_0x1ab26f){this['_evtSetMes'+'hes']=_0x1ab26f['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),_0x1ab26f['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x1ab26f['on']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x1ab26f['atlas']&&_0x1ab26f['atlas']['on']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_unbindSpr'+'ite'](_0xa827e){var _0x4a5bf3;(_0x4a5bf3=this['_evtSetMes'+'hes'])==null||_0x4a5bf3['off'](),this['_evtSetMes'+'hes']=null,_0xa827e['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0xa827e['off']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0xa827e['atlas']&&_0xa827e['atlas']['off']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_onSpriteM'+'eshesChang'+'e'](){this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],-0x6b9+-0x695*-0x3+-0xd06,this['_sprite']['frameKeys']['length']-(-0x14*0x1a3+-0x2*0xe87+0x3dcb*0x1))),this['_updateSpr'+'ite']();}['_onSpriteP'+'puChange'](){this['sprite']['renderMode']!==ei&&this['_pixelsPer'+'Unit']===null&&this['_updateSpr'+'ite']();}['_onAtlasTe'+'xtureChang'+'e'](){this['sprite']&&this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'));}['_onTexture'+'AtlasLoad'](_0x57b079){const _0x30562c=this['_spriteAss'+'et'];_0x30562c instanceof me?this['_onSpriteA'+'ssetLoad'](_0x30562c):this['_onSpriteA'+'ssetLoad'](this['_system']['app']['assets']['get'](_0x30562c));}['onEnable'](){if(this['_materialA'+'sset']){const _0x1d053f=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);_0x1d053f&&_0x1d053f['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x1d053f);}if(this['_textureAs'+'set']){const _0x47efac=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x47efac&&_0x47efac['resource']!==this['_texture']&&this['_bindTextu'+'reAsset'](_0x47efac);}if(this['_spriteAss'+'et']){const _0x353814=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x353814&&_0x353814['resource']!==this['_sprite']&&this['_bindSprit'+'eAsset'](_0x353814);}this['_element']['addModelTo'+'Layers'](this['_renderabl'+'e']['model']);}['onDisable'](){this['_element']['removeMode'+'lFromLayer'+'s'](this['_renderabl'+'e']['model']);}['_setStenci'+'l'](_0x345f7e){this['_renderabl'+'e']['meshInstan'+'ce']['stencilFro'+'nt']=_0x345f7e,this['_renderabl'+'e']['meshInstan'+'ce']['stencilBac'+'k']=_0x345f7e;let _0x24e3f8=-0x2*0x4a0+0x124c*-0x1+0x52*0x56;if(this['_element']['maskedBy']&&(_0x24e3f8=this['_element']['maskedBy']['element']['_image']['_maskRef']),this['_renderabl'+'e']['unmaskMesh'+'Instance']){const _0x945200=new ai({'ref':_0x24e3f8+(0x18*-0xa3+-0x14d8+0x2421),'func':Lh,'zpass':Y0});this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']=_0x945200,this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k']=_0x945200;}}['_updateRen'+'derableEmi'+'ssive'](){Jl['linear'](this['_color']),this['_colorUnif'+'orm'][0x1c8c+0x4c7*0x3+-0x2ae1]=Jl['r'],this['_colorUnif'+'orm'][-0x194*0x1+-0x754+0x8e9]=Jl['g'],this['_colorUnif'+'orm'][-0xaad*-0x1+-0x1efa+0x1*0x144f]=Jl['b'],this['_renderabl'+'e']['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}set['color'](_0x42adbb){this['_color']===_0x42adbb&&M['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t');const {r:_0x2618d5,g:_0x21c1df,b:_0x7933c}=_0x42adbb;(this['_color']['r']!==_0x2618d5||this['_color']['g']!==_0x21c1df||this['_color']['b']!==_0x7933c)&&(this['_color']['r']=_0x2618d5,this['_color']['g']=_0x21c1df,this['_color']['b']=_0x7933c,this['_updateRen'+'derableEmi'+'ssive']()),this['_element']&&this['_element']['fire']('set:color',this['_color']);}get['color'](){return this['_color'];}set['opacity'](_0x1bf6a5){_0x1bf6a5!==this['_color']['a']&&(this['_color']['a']=_0x1bf6a5,this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',_0x1bf6a5)),this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x1bf6a5);}get['opacity'](){return this['_color']['a'];}set['rect'](_0x3271d2){this['_rect']===_0x3271d2&&console['warn']('Setting\x20el'+'ement.rect'+'\x20to\x20itself'+'\x20will\x20have'+'\x20no\x20effect');let _0x23a42d,_0x4c96cc,_0x308eec,_0x4b4d7f;_0x3271d2 instanceof ae?(_0x23a42d=_0x3271d2['x'],_0x4c96cc=_0x3271d2['y'],_0x308eec=_0x3271d2['z'],_0x4b4d7f=_0x3271d2['w']):(_0x23a42d=_0x3271d2[-0x1226+-0x1a4b+0x2c71],_0x4c96cc=_0x3271d2[-0x5e9*-0x4+-0x25f*-0x4+0x1*-0x211f],_0x308eec=_0x3271d2[0x1a15+0x148e+-0x2ea1],_0x4b4d7f=_0x3271d2[0x380+0x3cb*0x7+0x1*-0x1e0a]),!(_0x23a42d===this['_rect']['x']&&_0x4c96cc===this['_rect']['y']&&_0x308eec===this['_rect']['z']&&_0x4b4d7f===this['_rect']['w'])&&(this['_rect']['set'](_0x23a42d,_0x4c96cc,_0x308eec,_0x4b4d7f),this['_renderabl'+'e']['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x6a4*0x4+-0x67*-0x13+0x12eb):this['_updateMes'+'h'](this['_renderabl'+'e']['mesh'])));}get['rect'](){return this['_rect'];}['_removeMat'+'erialAsset'+'Events'](){if(this['_materialA'+'sset']){const _0x5c3ab3=this['_system']['app']['assets'];_0x5c3ab3['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this);const _0x313c35=_0x5c3ab3['get'](this['_materialA'+'sset']);_0x313c35&&(_0x313c35['off']('load',this['_onMateria'+'lLoad'],this),_0x313c35['off']('change',this['_onMateria'+'lChange'],this),_0x313c35['off']('remove',this['_onMateria'+'lRemove'],this));}}set['material'](_0x1f45a8){if(this['_material']!==_0x1f45a8){if(!_0x1f45a8){const _0x4ded0a=this['_element']['_isScreenS'+'pace']();this['mask']?_0x1f45a8=_0x4ded0a?this['_system']['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']:this['_system']['defaultIma'+'geMaskMate'+'rial']:_0x1f45a8=_0x4ded0a?this['_system']['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']:this['_system']['defaultIma'+'geMaterial'];}if(this['_material']=_0x1f45a8,this['_materialA'+'sset']){const _0x21b518=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);(!_0x21b518||_0x21b518['resource']!==_0x1f45a8)&&(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=null);}_0x1f45a8&&(this['_renderabl'+'e']['setMateria'+'l'](_0x1f45a8),this['_hasUserMa'+'terial']()?(this['_renderabl'+'e']['deletePara'+'meter']('material_o'+'pacity'),this['_renderabl'+'e']['deletePara'+'meter']('material_e'+'missive')):(this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a'])));}}get['material'](){return this['_material'];}set['materialAs'+'set'](_0x4c08f5){const _0x1dd5ca=this['_system']['app']['assets'];let _0x12723c=_0x4c08f5;if(_0x4c08f5 instanceof me&&(_0x12723c=_0x4c08f5['id']),this['_materialA'+'sset']!==_0x12723c){if(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=_0x12723c,this['_materialA'+'sset']){const _0x2761af=_0x1dd5ca['get'](this['_materialA'+'sset']);_0x2761af?this['_bindMater'+'ialAsset'](_0x2761af):(this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x12723c,_0x1dd5ca['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this));}else this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x12723c;}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['texture'](_0x5759cd){if(this['_texture']!==_0x5759cd){if(this['_textureAs'+'set']){const _0x24f43e=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x24f43e&&_0x24f43e['resource']!==_0x5759cd&&(this['textureAss'+'et']=null);}if(this['_texture']=_0x5759cd,_0x5759cd){this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null),this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_texture']),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a']);const _0x1303a4=this['_texture']['width']/this['_texture']['height'];_0x1303a4!==this['_targetAsp'+'ectRatio']&&(this['_targetAsp'+'ectRatio']=_0x1303a4,this['_element']['fitMode']!==Th&&this['refreshMes'+'h']());}else this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'),this['_targetAsp'+'ectRatio']=-(0x57c+-0x1*-0x4e1+-0xa5c),this['_element']['fitMode']!==Th&&this['refreshMes'+'h']();}}get['texture'](){return this['_texture'];}set['textureAss'+'et'](_0x39d163){const _0x433bfe=this['_system']['app']['assets'];let _0x5391f2=_0x39d163;if(_0x39d163 instanceof me&&(_0x5391f2=_0x39d163['id']),this['_textureAs'+'set']!==_0x5391f2){if(this['_textureAs'+'set']){_0x433bfe['off']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this);const _0x1667fd=_0x433bfe['get'](this['_textureAs'+'set']);_0x1667fd&&(_0x1667fd['off']('load',this['_onTexture'+'Load'],this),_0x1667fd['off']('change',this['_onTexture'+'Change'],this),_0x1667fd['off']('remove',this['_onTexture'+'Remove'],this));}if(this['_textureAs'+'set']=_0x5391f2,this['_textureAs'+'set']){const _0x430e87=_0x433bfe['get'](this['_textureAs'+'set']);_0x430e87?this['_bindTextu'+'reAsset'](_0x430e87):(this['texture']=null,_0x433bfe['on']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this));}else this['texture']=null;}}get['textureAss'+'et'](){return this['_textureAs'+'set'];}set['spriteAsse'+'t'](_0x3d6a7e){const _0x2b6366=this['_system']['app']['assets'];let _0x963e1d=_0x3d6a7e;if(_0x3d6a7e instanceof me&&(_0x963e1d=_0x3d6a7e['id']),this['_spriteAss'+'et']!==_0x963e1d){if(this['_spriteAss'+'et']){_0x2b6366['off']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this);const _0x4b1190=_0x2b6366['get'](this['_spriteAss'+'et']);_0x4b1190&&this['_unbindSpr'+'iteAsset'](_0x4b1190);}if(this['_spriteAss'+'et']=_0x963e1d,this['_spriteAss'+'et']){const _0x843f1e=_0x2b6366['get'](this['_spriteAss'+'et']);_0x843f1e?this['_bindSprit'+'eAsset'](_0x843f1e):(this['sprite']=null,_0x2b6366['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}this['_element']&&this['_element']['fire']('set:sprite'+'Asset',_0x963e1d);}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['sprite'](_0x146435){if(this['_sprite']!==_0x146435){if(this['_sprite']&&this['_unbindSpr'+'ite'](this['_sprite']),this['_spriteAss'+'et']){const _0x17d20d=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x17d20d&&_0x17d20d['resource']!==_0x146435&&(this['spriteAsse'+'t']=null);}this['_sprite']=_0x146435,this['_sprite']&&(this['_bindSprit'+'e'](this['_sprite']),this['_textureAs'+'set']&&(this['textureAss'+'et']=null)),this['_sprite']&&this['_sprite']['atlas']&&this['_sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap')),this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],-0x5ae*-0x1+0xeea+-0x1498,this['_sprite']['frameKeys']['length']-(-0x39*0xf+0x23*-0x3b+0x17*0x7f))),this['_updateSpr'+'ite']();}}get['sprite'](){return this['_sprite'];}set['spriteFram'+'e'](_0x1675fa){const _0x126f48=this['_spriteFra'+'me'];this['_sprite']?this['_spriteFra'+'me']=Y['clamp'](_0x1675fa,0x8e*0x1b+0x108f+-0x1*0x1f89,this['_sprite']['frameKeys']['length']-(0x1*-0x109d+0x5e*-0xb+0x14a8)):this['_spriteFra'+'me']=_0x1675fa,this['_spriteFra'+'me']!==_0x126f48&&this['_updateSpr'+'ite'](),this['_element']&&this['_element']['fire']('set:sprite'+'Frame',_0x1675fa);}get['spriteFram'+'e'](){return this['_spriteFra'+'me'];}set['mesh'](_0x6a2b16){this['_renderabl'+'e']['setMesh'](_0x6a2b16),this['_defaultMe'+'sh']===_0x6a2b16?this['_renderabl'+'e']['setAabbFun'+'c'](null):this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']);}get['mesh'](){return this['_renderabl'+'e']['mesh'];}set['mask'](_0x1ea10f){this['_mask']!==_0x1ea10f&&(this['_mask']=_0x1ea10f,this['_toggleMas'+'k']());}get['mask'](){return this['_mask'];}set['pixelsPerU'+'nit'](_0x5c324d){this['_pixelsPer'+'Unit']!==_0x5c324d&&(this['_pixelsPer'+'Unit']=_0x5c324d,this['_sprite']&&(this['_sprite']['renderMode']===Et||this['_sprite']['renderMode']===At)&&this['_updateSpr'+'ite']());}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}get['aabb'](){return this['_renderabl'+'e']['meshInstan'+'ce']?this['_renderabl'+'e']['meshInstan'+'ce']['aabb']:null;}}class xL extends pe{constructor(_0x2da600){super(),this['_app']=_0x2da600,_0x2da600['i18n']['on'](ha['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['_autoLoad']=!(-0x7*-0x3d1+-0x1ac7+0x11),this['_disableLo'+'calization']=!(0x1c8e+-0x3e*-0x27+-0x25ff),this['_defaultAs'+'set']=null,this['_localized'+'Asset']=null;}set['defaultAss'+'et'](_0x204177){const _0x2d2593=_0x204177 instanceof me?_0x204177['id']:_0x204177;this['_defaultAs'+'set']!==_0x2d2593&&(this['_defaultAs'+'set']&&this['_unbindDef'+'aultAsset'](),this['_defaultAs'+'set']=_0x2d2593,this['_defaultAs'+'set']&&this['_bindDefau'+'ltAsset'](),this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['defaultAss'+'et'](){return this['_defaultAs'+'set'];}set['localizedA'+'sset'](_0xe473d0){const _0x148b62=_0xe473d0 instanceof me?_0xe473d0['id']:_0xe473d0;this['_localized'+'Asset']!==_0x148b62&&(this['_localized'+'Asset']&&(this['_app']['assets']['off']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this),this['_unbindLoc'+'alizedAsse'+'t']()),this['_localized'+'Asset']=_0x148b62,this['_localized'+'Asset']&&(this['_app']['assets']['get'](this['_localized'+'Asset'])?this['_bindLocal'+'izedAsset']():this['_app']['assets']['once']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this)));}get['localizedA'+'sset'](){return this['_localized'+'Asset'];}set['autoLoad'](_0x326d48){this['_autoLoad']!==_0x326d48&&(this['_autoLoad']=_0x326d48,this['_autoLoad']&&this['_localized'+'Asset']&&(this['_unbindLoc'+'alizedAsse'+'t'](),this['_bindLocal'+'izedAsset']()));}get['autoLoad'](){return this['_autoLoad'];}set['disableLoc'+'alization'](_0x68fb5){this['_disableLo'+'calization']!==_0x68fb5&&(this['_disableLo'+'calization']=_0x68fb5,this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['disableLoc'+'alization'](){return this['_disableLo'+'calization'];}['_bindDefau'+'ltAsset'](){const _0x56bfaa=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x56bfaa?this['_onDefault'+'AssetAdd'](_0x56bfaa):this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);}['_unbindDef'+'aultAsset'](){if(!this['_defaultAs'+'set'])return;this['_app']['assets']['off']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);const _0x2d9855=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x2d9855&&(_0x2d9855['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x2d9855['off']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x2d9855['off']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetAdd'](_0x1a1fac){this['_defaultAs'+'set']===_0x1a1fac['id']&&(_0x1a1fac['on']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x1a1fac['on']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x1a1fac['once']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetRemov'+'e'](_0x359047){this['_defaultAs'+'set']===_0x359047['id']&&(_0x359047['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x359047['off']('remove:loc'+'alized',this['_onLocaleA'+'dd'],this),this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this));}['_bindLocal'+'izedAsset'](){if(!this['_autoLoad'])return;const _0x8433f9=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x8433f9&&(_0x8433f9['on']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x8433f9['on']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x8433f9['on']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this),_0x8433f9['resource']?this['_onLocaliz'+'edAssetLoa'+'d'](_0x8433f9):this['_app']['assets']['load'](_0x8433f9));}['_unbindLoc'+'alizedAsse'+'t'](){const _0x4cf145=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x4cf145&&(_0x4cf145['off']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x4cf145['off']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x4cf145['off']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this));}['_onLocaliz'+'edAssetAdd'](_0x1b582a){this['_localized'+'Asset']===_0x1b582a['id']&&this['_bindLocal'+'izedAsset']();}['_onLocaliz'+'edAssetLoa'+'d'](_0x59daa3){this['fire']('load',_0x59daa3);}['_onLocaliz'+'edAssetCha'+'nge'](_0x18a2db,_0x24fe04,_0x9c797e,_0x4cbcdd){this['fire']('change',_0x18a2db,_0x24fe04,_0x9c797e,_0x4cbcdd);}['_onLocaliz'+'edAssetRem'+'ove'](_0x133eb7){this['_localized'+'Asset']===_0x133eb7['id']&&(this['localizedA'+'sset']=this['_defaultAs'+'set']),this['fire']('remove',_0x133eb7);}['_onLocaleA'+'dd'](_0x39cce1,_0x34c762){this['_app']['i18n']['locale']===_0x39cce1&&this['_onSetLoca'+'le'](_0x39cce1);}['_onLocaleR'+'emove'](_0x3b01bc,_0x575f0b){this['_app']['i18n']['locale']===_0x3b01bc&&this['_onSetLoca'+'le'](_0x3b01bc);}['_onSetLoca'+'le'](_0x3f9143){if(!this['_defaultAs'+'set']){this['localizedA'+'sset']=null;return;}const _0x22c597=this['_app']['assets']['get'](this['_defaultAs'+'set']);if(!_0x22c597||this['_disableLo'+'calization']){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}const _0x18143e=_0x22c597['getLocaliz'+'edAssetId'](_0x3f9143);if(!_0x18143e){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}this['localizedA'+'sset']=_0x18143e;}['destroy'](){this['defaultAss'+'et']=null,this['_app']['i18n']['off'](ha['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['off']();}}const rc='msdf',TL='bitmap',lo=-0x25*0x97+-0x7*-0x394+-0x4b*0xb,Ha=0xb48+0x1*0xa17+-0x155e,Kf=0x14fd+-0x88c+-0xc6f,av=0x11d3+0x2336+-0x4d2*0xb,Zf=0xe1*-0x24+0x1d*0x2d+0xd*0x20b,Qf=-0x949+-0x1*-0x233d+0x19ef*-0x1,Jf=0x25ee+0x1bee+-0x15f2*0x3,eu=-0x1cba+0x15a1*-0x1+-0x1*-0x3262,og=-0x2138+-0x1062+-0x1*-0x31a2,wL='\x20\x09\x0a\x0d\x0b\x0c',EL=/[\w|/]/;class AL{constructor(_0x105cb8){this['_symbols']=_0x105cb8,this['_index']=0x21d9+-0x3*-0xba8+-0x1*0x44d1,this['_last']=0x2260+0x1d*0x1d+-0x25a9,this['_cur']=this['_symbols']['length']>-0x121e+0x258*0xf+-0x110a?this['_symbols'][-0x1b*0xdf+-0x1f6b+0x36f0]:null,this['_buf']=[],this['_mode']='text',this['_error']=null;}['read'](){let _0x3964e1=this['_read']();for(;_0x3964e1===og;)_0x3964e1=this['_read']();return _0x3964e1!==lo&&_0x3964e1!==Ha&&(this['_last']=this['_index']),_0x3964e1;}['buf'](){return this['_buf'];}['last'](){return this['_last'];}['error'](){return this['_error'];}['debugPrint'](){const _0x3e746f=['EOF','ERROR','TEXT','OPEN_BRACK'+'ET','CLOSE_BRAC'+'KET','EQUALS','STRING','IDENTIFIER','WHITESPACE'];let _0x59c0b8=this['read'](),_0x4da9b7='';for(;_0x4da9b7+=(_0x4da9b7['length']>0x50*-0x48+-0x6c*0xd+0x1bfc?'\x0a':'')+_0x3e746f[_0x59c0b8]+'\x20\x27'+this['buf']()['join']('')+'\x27',!(_0x59c0b8===lo||_0x59c0b8===Ha);)_0x59c0b8=this['read']();return _0x4da9b7;}['_read'](){return this['_buf']=[],this['_eof']()?lo:this['_mode']==='text'?this['_text']():this['_tag']();}['_text'](){for(;;)switch(this['_cur']){case null:return this['_buf']['length']>-0x188*0xf+0x3*-0x117+0x3*0x8bf?Kf:lo;case'[':return this['_mode']='tag',this['_buf']['length']>0x49*0x66+-0x15e9+-0x72d?Kf:this['_tag']();case'\x5c':switch(this['_next'](),this['_cur']){case'[':this['_store']();break;default:this['_output']('\x5c');break;}break;default:this['_store']();break;}}['_tag'](){switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20tag',Ha;case'[':return this['_store'](),av;case']':return this['_store'](),this['_mode']='text',Zf;case'=':return this['_store'](),Qf;case'\x20':case'\x09':case'\x0a':case'\x0d':case'\x0b':case'\x0c':return this['_whitespac'+'e']();case'\x22':return this['_string']();default:return this['_isIdentif'+'ierSymbol'](this['_cur'])?this['_identifie'+'r']():(this['_error']='unrecogniz'+'ed\x20charact'+'er',Ha);}}['_whitespac'+'e'](){for(this['_store']();wL['indexOf'](this['_cur'])!==-(0x9a5+0x599*0x5+-0x25a1);)this['_store']();return og;}['_string'](){for(this['_next']();;)switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20string',Ha;case'\x22':return this['_next'](),Jf;default:this['_store']();break;}}['_identifie'+'r'](){for(this['_store']();this['_cur']!==null&&this['_isIdentif'+'ierSymbol'](this['_cur']);)this['_store']();return eu;}['_isIdentif'+'ierSymbol'](_0x3103e9){return _0x3103e9['length']===-0x1a5b+-0xbbe+0x261a&&_0x3103e9['match'](EL)!==null;}['_eof'](){return this['_cur']===null;}['_next'](){return this['_eof']()||(this['_index']++,this['_cur']=this['_index']<this['_symbols']['length']?this['_symbols'][this['_index']]:null),this['_cur'];}['_store'](){return this['_buf']['push'](this['_cur']),this['_next']();}['_output'](_0x460faa){this['_buf']['push'](_0x460faa);}}class bL{constructor(_0xa1c1e7){this['_scanner']=new AL(_0xa1c1e7),this['_error']=null;}['parse'](_0x138afb,_0x2ac956){for(;;)switch(this['_scanner']['read']()){case lo:return!(-0x1368+-0x59*0x59+0x3259);case Ha:return!(-0x8*0x399+-0x18d+-0x1e56*-0x1);case Kf:Array['prototype']['push']['apply'](_0x138afb,this['_scanner']['buf']());break;case av:if(!this['_parseTag'](_0x138afb,_0x2ac956))return!(0x1*-0xc25+-0x14de+-0x1*-0x2104);break;default:return!(-0x2*-0x4c3+-0x1f42+0x173*0xf);}}['error'](){return'Error\x20eval'+'uating\x20mar'+'kup\x20at\x20#'+this['_scanner']['last']()['toString']()+'\x20('+(this['_scanner']['error']()||this['_error'])+')';}['_parseTag'](_0x56dea9,_0x2bb247){let _0xb17be=this['_scanner']['read']();if(_0xb17be!==eu)return this['_error']='expected\x20i'+'dentifier',!(0x25c8+0x3b*0x8e+-0x4681*0x1);const _0x4b98e6=this['_scanner']['buf']()['join']('');if(_0x4b98e6[-0x11*-0x16b+0x8a+-0x1*0x18a5]==='/'){for(let _0x24c19b=_0x2bb247['length']-(0x1738+-0x549+-0x11ee);_0x24c19b>=0x167*-0xc+0x46b*-0x7+0x5*0x98d;--_0x24c19b)if(_0x4b98e6==='/'+_0x2bb247[_0x24c19b]['name']&&_0x2bb247[_0x24c19b]['end']===null)return _0x2bb247[_0x24c19b]['end']=_0x56dea9['length'],_0xb17be=this['_scanner']['read'](),_0xb17be!==Zf?(this['_error']='expected\x20c'+'lose\x20brack'+'et',!(0x16*0x1ab+-0x167*-0x2+-0x277f)):!(0x16*-0x6+-0x1df5+0x1e79);return this['_error']='failed\x20to\x20'+'find\x20match'+'ing\x20tag',!(0x1261+-0x19*0x11b+0x943*0x1);}const _0xdf164a={'name':_0x4b98e6,'value':null,'attributes':{},'start':_0x56dea9['length'],'end':null};if(_0xb17be=this['_scanner']['read'](),_0xb17be===Qf){if(_0xb17be=this['_scanner']['read'](),_0xb17be!==Jf)return this['_error']='expected\x20s'+'tring',!(-0xe89+-0x5c7+0x1451*0x1);_0xdf164a['value']=this['_scanner']['buf']()['join'](''),_0xb17be=this['_scanner']['read']();}for(;;){switch(_0xb17be){case Zf:return _0x2bb247['push'](_0xdf164a),!(-0x4*0x7c6+-0x1*-0x377+0x1ba1);case eu:{const _0x48dac1=this['_scanner']['buf']()['join']('');if(_0xb17be=this['_scanner']['read'](),_0xb17be!==Qf)return this['_error']='expected\x20e'+'quals',!(-0x577+0x1eb0+-0x1938);if(_0xb17be=this['_scanner']['read'](),_0xb17be!==Jf)return this['_error']='expected\x20s'+'tring',!(0x1dff+0xb0e+-0x25*0x11c);const _0x382ddd=this['_scanner']['buf']()['join']('');_0xdf164a['attributes'][_0x48dac1]=_0x382ddd;break;}default:return this['_error']='expected\x20c'+'lose\x20brack'+'et\x20or\x20iden'+'tifier',!(-0x255*-0x8+0x5*0x494+-0x298b);}_0xb17be=this['_scanner']['read']();}}}function nv(_0x342e1f,_0x206e42){for(const _0x419c16 in _0x206e42){if(!_0x206e42['hasOwnProp'+'erty'](_0x419c16))continue;const _0x3861a1=_0x206e42[_0x419c16];_0x3861a1 instanceof Object?(_0x342e1f['hasOwnProp'+'erty'](_0x419c16)||(_0x342e1f[_0x419c16]={}),nv(_0x342e1f[_0x419c16],_0x206e42[_0x419c16])):_0x342e1f[_0x419c16]=_0x3861a1;}}function CL(_0x1b025d){if(_0x1b025d['length']===0x8b2+0xed1+-0x1*0x1783)return null;const _0xd64e64={};for(let _0x2e1eb7=0x287+-0x16db+0x1454;_0x2e1eb7<_0x1b025d['length'];++_0x2e1eb7){const _0x2b8a80=_0x1b025d[_0x2e1eb7],_0x25fcdb={};_0x25fcdb[_0x2b8a80['name']]={'value':_0x2b8a80['value'],'attributes':_0x2b8a80['attributes']},nv(_0xd64e64,_0x25fcdb);}return _0xd64e64;}function PL(_0x26250b,_0x10e6ae){if(_0x26250b['length']===0x1be5+0x14e6+-0x30cb)return null;const _0x57f06d={};for(let _0x5883f4=0xa92*0x1+-0x766*0x2+-0x43a*-0x1;_0x5883f4<_0x26250b['length'];++_0x5883f4){const _0x54dfbf=_0x26250b[_0x5883f4];_0x57f06d['hasOwnProp'+'erty'](_0x54dfbf['start'])?_0x57f06d[_0x54dfbf['start']]['open']===null?_0x57f06d[_0x54dfbf['start']]['open']=[_0x54dfbf]:_0x57f06d[_0x54dfbf['start']]['open']['push'](_0x54dfbf):_0x57f06d[_0x54dfbf['start']]={'open':[_0x54dfbf],'close':null},_0x57f06d['hasOwnProp'+'erty'](_0x54dfbf['end'])?_0x57f06d[_0x54dfbf['end']]['close']===null?_0x57f06d[_0x54dfbf['end']]['close']=[_0x54dfbf]:_0x57f06d[_0x54dfbf['end']]['close']['push'](_0x54dfbf):_0x57f06d[_0x54dfbf['end']]={'open':null,'close':[_0x54dfbf]};}let _0x2e13e6=[];function _0x4cf598(_0x45b5fd){_0x2e13e6=_0x2e13e6['filter'](_0x20fbfd=>_0x45b5fd['find'](_0x558755=>_0x558755===_0x20fbfd)===void(0xe81+-0x1*-0x1a29+-0x28aa));}function _0x165aeb(_0x204db3){for(let _0x3fe21a=0x531*-0x1+-0x9*-0x29d+-0x1254;_0x3fe21a<_0x204db3['length'];++_0x3fe21a)_0x2e13e6['push'](_0x204db3[_0x3fe21a]);}const _0x1dc667=Object['keys'](_0x57f06d)['sort']((_0x362e75,_0x5a3314)=>_0x362e75-_0x5a3314),_0x326abf=[];for(let _0x1bf6ea=-0x595+-0xfe6+0x729*0x3;_0x1bf6ea<_0x1dc667['length'];++_0x1bf6ea){const _0x332b45=_0x57f06d[_0x1dc667[_0x1bf6ea]];_0x332b45['close']!==null&&_0x4cf598(_0x332b45['close']),_0x332b45['open']!==null&&_0x165aeb(_0x332b45['open']),_0x326abf['push']({'start':_0x1dc667[_0x1bf6ea],'tags':CL(_0x2e13e6)});}const _0xf13e0b=[];let _0x5d91db=null;for(let _0x20a1ea=0x1e67+0xdd3*-0x1+-0x1094;_0x20a1ea<_0x326abf['length'];++_0x20a1ea){const _0x487b95=_0x326abf[_0x20a1ea];for(;_0xf13e0b['length']<_0x487b95['start'];)_0xf13e0b['push'](_0x5d91db?_0x5d91db['tags']:null);_0x5d91db=_0x487b95;}for(;_0xf13e0b['length']<_0x10e6ae;)_0xf13e0b['push'](null);return _0xf13e0b;}function ML(_0x192a7c){const _0x23d128=new bL(_0x192a7c),_0x37790a=[],_0x140026=[];if(!_0x23d128['parse'](_0x37790a,_0x140026))return console['warn'](_0x23d128['error']()),{'symbols':_0x192a7c,'tags':null};const _0x356a92=_0x140026['find'](_0x33d4c4=>_0x33d4c4['end']===null);if(_0x356a92)return console['warn']('Markup\x20err'+'or:\x20found\x20'+'unclosed\x20t'+'ag=\x27'+_0x356a92['name']+'\x27'),{'symbols':_0x192a7c,'tags':null};const _0x4d0fa3=PL(_0x140026,_0x37790a['length']);return{'symbols':_0x37790a,'tags':_0x4d0fa3};}class IL{static['evaluate'](_0x3da5c6){return ML(_0x3da5c6);}}class DL{constructor(){this['count']=-0x6*-0x5d4+-0x1f1c+-0x4*0xf7,this['quad']=0x1720+-0x1248+-0x28*0x1f,this['lines']={},this['positions']=[],this['normals']=[],this['uvs']=[],this['colors']=[],this['indices']=[],this['outlines']=[],this['shadows']=[],this['meshInstan'+'ce']=null;}}function LL(_0x12ab1a,_0x1ecdc6){const _0xd7d3a1=new Ge(_0x12ab1a);return _0xd7d3a1['setPositio'+'ns'](_0x1ecdc6['positions']),_0xd7d3a1['setNormals'](_0x1ecdc6['normals']),_0xd7d3a1['setColors3'+'2'](_0x1ecdc6['colors']),_0xd7d3a1['setUvs'](0x82+0x1*0x8a5+0x3*-0x30d,_0x1ecdc6['uvs']),_0xd7d3a1['setIndices'](_0x1ecdc6['indices']),_0xd7d3a1['setVertexS'+'tream'](Po,_0x1ecdc6['outlines'],-0x3b*0x34+-0x2334+-0x1*-0x2f33,void(0x1269+-0x40d+-0xe5c),Be,!(0x2e7*0x1+-0x1*-0x4ed+0x1*-0x7d3)),_0xd7d3a1['setVertexS'+'tream'](Mo,_0x1ecdc6['shadows'],0x8*0x212+0x440+-0x1*0x14cd,void(0x11d3+0x12fd+-0x1f*0x130),Be,!(-0x92f+0x1cae+-0x137e)),_0xd7d3a1['update'](),_0xd7d3a1;}const lg=/^[\r\n]$/,RL=/^[ \t]$/,hg=/^[ \t\-]|\u200b$/,OL=/^[a-z0-9]$/i,cg=/^[\u1100-\u11ff]|[\u3000-\u9fff\ua960-\ua97f]|[\uac00-\ud7ff]$/,FL=/^[〕〉》」』】〙〗〟ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻]$/,NL=['​','؜','‎','‏','‪','‫','‬','‭','‮','⁦','⁧','⁨','⁩'],kL={'width':0x0,'height':0x0,'xadvance':0x0,'xoffset':0x0,'yoffset':0x0},dg=new ie(),UL=new J(),Ve=new ie();class BL{constructor(_0x115ddd){this['_element']=_0x115ddd,this['_system']=_0x115ddd['system'],this['_entity']=_0x115ddd['entity'],this['_text']='',this['_symbols']=[],this['_colorPale'+'tte']=[],this['_outlinePa'+'lette']=[],this['_shadowPal'+'ette']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null,this['_i18nKey']=null,this['_fontAsset']=new xL(this['_system']['app']),this['_fontAsset']['disableLoc'+'alization']=!(-0x15dd+-0x13*0x8e+0xed*0x23),this['_fontAsset']['on']('load',this['_onFontLoa'+'d'],this),this['_fontAsset']['on']('change',this['_onFontCha'+'nge'],this),this['_fontAsset']['on']('remove',this['_onFontRem'+'ove'],this),this['_font']=null,this['_color']=new ie(0x5f7+-0x2011+0xa3*0x29,0x413*-0x6+-0x1*-0x2584+-0xd11,-0xd86+-0x15e1+-0x2368*-0x1,0x1123+-0x147e+-0x2b*-0x14),this['_colorUnif'+'orm']=new Float32Array(-0x5a3*-0x3+-0xbbb*-0x1+0x7*-0x417),this['_spacing']=0xd05+0xf06+-0x1c0a,this['_fontSize']=0x1b*0xa1+0x103f*0x1+-0x211a,this['_fontMinY']=-0x150e+0x10d3+0x39*0x13,this['_fontMaxY']=0x52b*0x7+-0xa12+-0x1a1b,this['_originalF'+'ontSize']=0x2*0x3b5+-0x14d6+-0x121*-0xc,this['_maxFontSi'+'ze']=-0x162f+-0xed6+0x101*0x25,this['_minFontSi'+'ze']=0x8b3*0x1+0x1*0x1bf5+-0x125*0x20,this['_autoFitWi'+'dth']=!(-0x4+0x16b*0xe+-0x13d5),this['_autoFitHe'+'ight']=!(-0x11*-0x191+-0x121+-0x197f),this['_maxLines']=-(0x8b*-0xd+0xf9*0xd+-0x595),this['_lineHeigh'+'t']=0x37*-0x9d+-0x110*-0x1d+0x30b,this['_scaledLin'+'eHeight']=0x1535+-0x3b7*-0x1+-0x18cc,this['_wrapLines']=!(-0x3*0xa13+-0x1d*0xe5+-0x12b9*-0x3),this['_drawOrder']=-0x142c+0x1*0xa57+0x9d5,this['_alignment']=new J(0x4b9*-0x1+-0x1*-0x8d8+-0x41f+0.5,-0x2474+0x28*-0xa8+-0x3eb4*-0x1+0.5),this['_autoWidth']=!(-0x22f4+0x1f4+0xb00*0x3),this['_autoHeigh'+'t']=!(0x16*-0x9+-0x2e*0x17+-0x4e8*-0x1),this['width']=0x139b+-0x21a4*0x1+0xe09,this['height']=-0x24c9+-0x1*0x3bd+0x111*0x26,this['_node']=new He(),this['_model']=new $i(),this['_model']['graph']=this['_node'],this['_entity']['addChild'](this['_node']),this['_meshInfo']=[],this['_material']=null,this['_aabbDirty']=!(-0x5e5+0x9*-0x239+0x19e6),this['_aabb']=new Ie(),this['_noResize']=!(0x2533+0x146c+-0x399e),this['_currentMa'+'terialType']=null,this['_maskedMat'+'erialSrc']=null,this['_rtlReorde'+'r']=!(-0xd23+-0x27*-0x8b+-0x809),this['_unicodeCo'+'nverter']=!(0x275*0x5+0x1*-0x1c4b+0x1003),this['_rtl']=!(-0x1f*-0x29+-0x1215+0xd1f*0x1),this['_outlineCo'+'lor']=new ie(-0x107a+-0x2b*-0x86+-0x608,-0x1*-0x2589+-0x215d+-0xc*0x59,0xab8+-0x1ab3*-0x1+-0x1f*0x135,0x4a4+-0xd*-0x2a6+-0x2711),this['_outlineCo'+'lorUniform']=new Float32Array(-0x164e+0x7ed+-0x1*-0xe65),this['_outlineTh'+'icknessSca'+'le']=-0x1d71+-0x64f+0x8*0x478+0.2,this['_outlineTh'+'ickness']=0x1877+-0x18fc+-0x13*-0x7,this['_shadowCol'+'or']=new ie(-0x101f+0x13a9+-0x38a,-0x2*0x968+0x1*-0x1ad7+0x2da7,-0x175e+-0x103*0x21+0x38c1,-0x167d+-0x1315*0x1+0x2993),this['_shadowCol'+'orUniform']=new Float32Array(0x1e26+-0x4*0x18a+0x16*-0x117),this['_shadowOff'+'setScale']=-0x201d+-0xea3+0x2ec0+0.005,this['_shadowOff'+'set']=new J(-0x193+-0x1ce3+0x1e76,-0xaea*-0x2+0x1d*0x34+-0x1bb8),this['_shadowOff'+'setUniform']=new Float32Array(-0x1f8f+0x1*0xbbd+0x36*0x5e),this['_enableMar'+'kup']=!(0xdea+0x3*-0x3d2+-0x273),this['_onScreenC'+'hange'](this['_element']['screen']),_0x115ddd['on']('resize',this['_onParentR'+'esize'],this),_0x115ddd['on']('set:screen',this['_onScreenC'+'hange'],this),_0x115ddd['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),_0x115ddd['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),_0x115ddd['on']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['on'](ha['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['on']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['on']('data:remov'+'e',this['_onLocaliz'+'ationData'],this),this['_rangeStar'+'t']=0x1262+0x1*-0x18d5+0x673,this['_rangeEnd']=0x147f+0x2*0xa2d+0x1*-0x28d9;}['destroy'](){this['_setMateri'+'al'](null),this['_model']&&(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),this['_model']['destroy'](),this['_model']=null),this['_fontAsset']['destroy'](),this['font']=null,this['_element']['off']('resize',this['_onParentR'+'esize'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['off'](ha['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['off']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['off']('data:remov'+'e',this['_onLocaliz'+'ationData'],this);}['_onParentR'+'esize'](_0x2dc555,_0x1d60b3){this['_noResize']||this['_font']&&this['_updateTex'+'t']();}['_onScreenC'+'hange'](_0x939d35){_0x939d35?this['_updateMat'+'erial'](_0x939d35['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0x9*0xc9+-0x262b+-0x25*-0x139));}['_onScreenS'+'paceChange'](_0x3add83){this['_updateMat'+'erial'](_0x3add83);}['_onDrawOrd'+'erChange'](_0x1bdd9a){if(this['_drawOrder']=_0x1bdd9a,this['_model']){for(let _0x3d2195=-0x6d9*-0x1+-0x1*0x1bef+0x1516*0x1,_0x4fe35b=this['_model']['meshInstan'+'ces']['length'];_0x3d2195<_0x4fe35b;_0x3d2195++)this['_model']['meshInstan'+'ces'][_0x3d2195]['drawOrder']=_0x1bdd9a;}}['_onPivotCh'+'ange'](_0x5d28ab){this['_font']&&this['_updateTex'+'t']();}['_onLocaleS'+'et'](_0x370c04){if(this['_i18nKey']){if(this['fontAsset']){const _0x1fb2c9=this['_system']['app']['assets']['get'](this['fontAsset']);(!_0x1fb2c9||!_0x1fb2c9['resource']||_0x1fb2c9['resource']!==this['_font'])&&(this['font']=null);}this['_resetLoca'+'lizedText']();}}['_onLocaliz'+'ationData'](_0x1bba8f,_0xd6ee78){this['_i18nKey']&&_0xd6ee78[this['_i18nKey']]&&this['_resetLoca'+'lizedText']();}['_resetLoca'+'lizedText'](){this['_setText'](this['_system']['app']['i18n']['getText'](this['_i18nKey']));}['_setText'](_0x1c3d67){if(this['unicodeCon'+'verter']){const _0x56986c=this['_system']['getUnicode'+'Converter']();_0x56986c?_0x1c3d67=_0x56986c(_0x1c3d67):console['warn']('Element\x20cr'+'eated\x20with'+'\x20unicodeCo'+'nverter\x20op'+'tion\x20but\x20n'+'o\x20unicodeC'+'onverter\x20f'+'unction\x20re'+'gistered');}this['_text']!==_0x1c3d67&&(this['_font']&&this['_updateTex'+'t'](_0x1c3d67),this['_text']=_0x1c3d67);}['_updateTex'+'t'](_0x42530f){let _0x4c67f1;if(_0x42530f===void(-0xd*0x251+-0x1621+0x343e)&&(_0x42530f=this['_text']),this['_symbols']=dh['getSymbols'](_0x42530f['normalize']?_0x42530f['normalize']('NFC'):_0x42530f),this['_symbols']['length']===-0x1*-0x205f+-0x8*-0x44d+0x107*-0x41&&(this['_symbols']=['\x20']),this['_enableMar'+'kup']){const _0x5176ff=IL['evaluate'](this['_symbols']);this['_symbols']=_0x5176ff['symbols'],_0x4c67f1=_0x5176ff['tags']||[];}if(this['_rtlReorde'+'r']){const _0x3b24c0=this['_system']['app']['systems']['element']['getRtlReor'+'der']();if(_0x3b24c0){const _0x167ee7=_0x3b24c0(this['_symbols']);this['_rtl']=_0x167ee7['rtl'],this['_symbols']=_0x167ee7['mapping']['map'](function(_0x51cb4e){return this['_symbols'][_0x51cb4e];},this),_0x4c67f1&&(_0x4c67f1=_0x167ee7['mapping']['map'](_0xb10846=>_0x4c67f1[_0xb10846]));}else console['warn']('Element\x20cr'+'eated\x20with'+'\x20rtlReorde'+'r\x20option\x20b'+'ut\x20no\x20rtlR'+'eorder\x20fun'+'ction\x20regi'+'stered');}else this['_rtl']=!(-0x2243+-0x3*0x839+-0x8d*-0x6b);const _0x4f86dc=(_0x595d4b,_0x4ecd66)=>_0x595d4b['toString'](!(0x11ba*0x1+0x2a1+-0x145b))['toLowerCas'+'e']()+':'+_0x4ecd66['toFixed'](0x19e3+-0x8d5+-0x110c),_0x40966e=(_0x2a0bab,_0xbc61f0)=>_0x2a0bab['toString'](!(0x2*-0x12a0+0x34b+0x21f5))['toLowerCas'+'e']()+':'+_0xbc61f0['x']['toFixed'](-0x150e+-0x2c3+-0x7f1*-0x3)+':'+_0xbc61f0['y']['toFixed'](-0x1c0e+-0xab3+0x1*0x26c3);if(_0x4c67f1){const _0x5681bf={},_0x1eabe2={},_0x26ba68={};this['_colorPale'+'tte']=[Math['round'](this['_color']['r']*(-0x2c*-0x4a+0x22*0x125+-0x32a3)),Math['round'](this['_color']['g']*(-0x6ba+0x685*-0x1+0xe3e)),Math['round'](this['_color']['b']*(-0x1594+-0x529*0x5+0x3060))],this['_outlinePa'+'lette']=[Math['round'](this['_outlineCo'+'lor']['r']*(0x20b4+-0x1a3d+0xaf*-0x8)),Math['round'](this['_outlineCo'+'lor']['g']*(-0x2d*0xb1+-0x77b+0x2797)),Math['round'](this['_outlineCo'+'lor']['b']*(-0x2*0x59+-0x1*-0x6b5+-0x504)),Math['round'](this['_outlineCo'+'lor']['a']*(0x2b*0x7c+0x56d*-0x1+-0xe68)),Math['round'](this['_outlineTh'+'ickness']*(-0xc7*0x2f+-0x7b5*-0x4+0x6b4))],this['_shadowPal'+'ette']=[Math['round'](this['_shadowCol'+'or']['r']*(0xef*0x29+0x49*0xd+-0x28fd*0x1)),Math['round'](this['_shadowCol'+'or']['g']*(-0x2d0+0x1a28+-0x1659*0x1)),Math['round'](this['_shadowCol'+'or']['b']*(0x2318*-0x1+0x9a9+0x1a6e)),Math['round'](this['_shadowCol'+'or']['a']*(0x3d6+-0x3*0x8c+-0x133)),Math['round'](this['_shadowOff'+'set']['x']*(0x2fa*-0xb+-0xf9+0x2236)),Math['round'](this['_shadowOff'+'set']['y']*(-0x174b+0x14dc+0x2ee))],this['_symbolCol'+'ors']=[],this['_symbolOut'+'lineParams']=[],this['_symbolSha'+'dowParams']=[],_0x5681bf[this['_color']['toString'](!(-0xf73+0x1e9c+-0xf28))['toLowerCas'+'e']()]=0x1b4*-0x2+-0x117f+0x14e7,_0x1eabe2[_0x4f86dc(this['_outlineCo'+'lor'],this['_outlineTh'+'ickness'])]=0x1*-0x1c1d+-0x16ef+0xc*0x441,_0x26ba68[_0x40966e(this['_shadowCol'+'or'],this['_shadowOff'+'set'])]=-0x2*-0x8ae+-0xbdc+-0x580;for(let _0x3a225d=-0x25e8*-0x1+-0x913*0x4+-0x19c,_0x50d0c0=this['_symbols']['length'];_0x3a225d<_0x50d0c0;++_0x3a225d){const _0x7aff75=_0x4c67f1[_0x3a225d];let _0x59c571=0x1d6*-0xd+0x2*0x108d+-0x93c;if(_0x7aff75&&_0x7aff75['color']&&_0x7aff75['color']['value']){const _0x3c09a3=_0x7aff75['color']['value'];if(_0x3c09a3['length']===0xe97+0x437*-0x3+-0x1eb&&_0x3c09a3[0x908+0x1*0x5f4+0xe*-0x112]==='#'){const _0x560217=_0x3c09a3['substring'](-0x4*-0x3cb+-0x17be+0x893)['toLowerCas'+'e']();_0x5681bf['hasOwnProp'+'erty'](_0x560217)?_0x59c571=_0x5681bf[_0x560217]:/^[0-9a-f]{6}$/['test'](_0x560217)&&(_0x59c571=this['_colorPale'+'tte']['length']/(0x1bf+0x12*-0xbb+0xb6a),_0x5681bf[_0x560217]=_0x59c571,this['_colorPale'+'tte']['push'](parseInt(_0x560217['substring'](-0x1daf+0x1*-0x431+-0x8*-0x43c,0x1307*-0x2+-0x37a+-0x14c5*-0x2),0x1d4f+0x1c*-0xb3+0xa5*-0xf)),this['_colorPale'+'tte']['push'](parseInt(_0x560217['substring'](-0xbdb*0x2+0x1*-0xd3f+-0x1*-0x24f7,-0x1509+-0x1200+0x301*0xd),-0x938+0x12e3*0x1+-0x1*0x99b)),this['_colorPale'+'tte']['push'](parseInt(_0x560217['substring'](0x4b1*0x3+-0x22ae+0x149f,-0x18*-0x18e+0x16d8+-0x1e11*0x2),0x2bc+0x8d1*0x1+-0xb7d)));}}this['_symbolCol'+'ors']['push'](_0x59c571);let _0xfbc468=0x139b+0x1*0x88d+-0x6a*0x44;if(_0x7aff75&&_0x7aff75['outline']&&(_0x7aff75['outline']['attributes']['color']||_0x7aff75['outline']['attributes']['thickness'])){let _0x436764=_0x7aff75['outline']['attributes']['color']?dg['fromString'](_0x7aff75['outline']['attributes']['color']):this['_outlineCo'+'lor'],_0x2bacd2=Number(_0x7aff75['outline']['attributes']['thickness']);(Number['isNaN'](_0x436764['r'])||Number['isNaN'](_0x436764['g'])||Number['isNaN'](_0x436764['b'])||Number['isNaN'](_0x436764['a']))&&(_0x436764=this['_outlineCo'+'lor']),Number['isNaN'](_0x2bacd2)&&(_0x2bacd2=this['_outlineTh'+'ickness']);const _0x331aa7=_0x4f86dc(_0x436764,_0x2bacd2);_0x1eabe2['hasOwnProp'+'erty'](_0x331aa7)?_0xfbc468=_0x1eabe2[_0x331aa7]:(_0xfbc468=this['_outlinePa'+'lette']['length']/(-0x95*-0x2e+-0x1d89*0x1+0x2c8),_0x1eabe2[_0x331aa7]=_0xfbc468,this['_outlinePa'+'lette']['push'](Math['round'](_0x436764['r']*(0x6f*-0x3f+-0x1*0x1614+0x3264)),Math['round'](_0x436764['g']*(-0x7*-0x137+-0x1*-0x22d8+-0x2a5a)),Math['round'](_0x436764['b']*(-0x2519*0x1+-0x16d2+-0xe2*-0x45)),Math['round'](_0x436764['a']*(0x252+0x2*0xb30+-0x17b3)),Math['round'](_0x2bacd2*(0x1685+-0x205*0x3+-0xf77*0x1))));}this['_symbolOut'+'lineParams']['push'](_0xfbc468);let _0x5e2ca5=-0x1*-0x14f6+-0x2*0x43f+0xa8*-0x13;if(_0x7aff75&&_0x7aff75['shadow']&&(_0x7aff75['shadow']['attributes']['color']||_0x7aff75['shadow']['attributes']['offset']||_0x7aff75['shadow']['attributes']['offsetX']||_0x7aff75['shadow']['attributes']['offsetY'])){let _0x45114b=_0x7aff75['shadow']['attributes']['color']?dg['fromString'](_0x7aff75['shadow']['attributes']['color']):this['_shadowCol'+'or'];const _0x31dbc7=Number(_0x7aff75['shadow']['attributes']['offset']),_0x38b360=Number(_0x7aff75['shadow']['attributes']['offsetX']),_0x305fdf=Number(_0x7aff75['shadow']['attributes']['offsetY']);(Number['isNaN'](_0x45114b['r'])||Number['isNaN'](_0x45114b['g'])||Number['isNaN'](_0x45114b['b'])||Number['isNaN'](_0x45114b['a']))&&(_0x45114b=this['_shadowCol'+'or']);const _0x4f6f0b=UL['set'](Number['isNaN'](_0x38b360)?Number['isNaN'](_0x31dbc7)?this['_shadowOff'+'set']['x']:_0x31dbc7:_0x38b360,Number['isNaN'](_0x305fdf)?Number['isNaN'](_0x31dbc7)?this['_shadowOff'+'set']['y']:_0x31dbc7:_0x305fdf),_0x52709c=_0x40966e(_0x45114b,_0x4f6f0b);_0x26ba68['hasOwnProp'+'erty'](_0x52709c)?_0x5e2ca5=_0x26ba68[_0x52709c]:(_0x5e2ca5=this['_shadowPal'+'ette']['length']/(0x21ea+-0x1*0x1f5f+-0x285),_0x26ba68[_0x52709c]=_0x5e2ca5,this['_shadowPal'+'ette']['push'](Math['round'](_0x45114b['r']*(0x5a*-0x19+0x2654+-0x1*0x1c8b)),Math['round'](_0x45114b['g']*(0x478+-0xa5c+0x6e3)),Math['round'](_0x45114b['b']*(0x2*0x376+-0x1b07+0x151a)),Math['round'](_0x45114b['a']*(-0x86b*-0x1+-0x1*0xb1f+0x3b3)),Math['round'](_0x4f6f0b['x']*(-0x815*0x3+0x6a1*0x2+-0x1a4*-0x7)),Math['round'](_0x4f6f0b['y']*(0x1*-0x1ecb+0x1*0x14a4+0x5e*0x1d))));}this['_symbolSha'+'dowParams']['push'](_0x5e2ca5);}}else this['_colorPale'+'tte']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null;this['_updateMat'+'erialEmiss'+'ive'](),this['_updateMat'+'erialOutli'+'ne'](),this['_updateMat'+'erialShado'+'w']();const _0x4b2587=this['_calculate'+'CharsPerTe'+'xture']();let _0x376e8b=!(0x966+-0x1c8a+-0xd*-0x179);const _0x47f898=this['_element'],_0x5968c3=_0x47f898['_isScreenS'+'pace'](),_0x21a22e=_0x47f898['_isScreenC'+'ulled'](),_0x4c113a=function(_0x3547ea){return _0x47f898['isVisibleF'+'orCamera'](_0x3547ea);};for(let _0x2f31ee=0x17e5*0x1+0x527*-0x1+-0x12be,_0x249b78=this['_meshInfo']['length'];_0x2f31ee<_0x249b78;_0x2f31ee++){const _0x344461=_0x4b2587[_0x2f31ee]||-0x5*-0x6ff+-0x65*0x11+-0x1c46,_0x11d058=this['_meshInfo'][_0x2f31ee];if(_0x11d058['count']!==_0x344461){if(_0x376e8b||(_0x47f898['removeMode'+'lFromLayer'+'s'](this['_model']),_0x376e8b=!(0x1*0x2681+0x23a7+-0x4a28)),_0x11d058['count']=_0x344461,_0x11d058['positions']['length']=_0x11d058['normals']['length']=_0x344461*(-0xbc8*0x3+0x1db*0x7+0x165e)*(-0x15f9+0x5+0x4a*0x4c),_0x11d058['indices']['length']=_0x344461*(-0x1*-0x1e64+-0x533*0x1+0xb*-0x24a)*(-0x13ef+-0x694+0x5d*0x49),_0x11d058['uvs']['length']=_0x344461*(0xb1*0x1e+-0xeaf+-0x60d)*(0x1d07*0x1+0x9d0+-0x26d3),_0x11d058['colors']['length']=_0x344461*(-0x6af+-0x1*0x1575+0x70a*0x4)*(0x1ad0+-0x841+-0x128b),_0x11d058['outlines']['length']=_0x344461*(-0x1b1*0xe+0x1999+-0x1e7*0x1)*(0x26b7+0xe*-0x2b3+-0x1*0xea),_0x11d058['shadows']['length']=_0x344461*(-0x72e*0x5+0x1*-0x2225+0x460f)*(-0x1*0x1d29+0xfa0+0xd8c),_0x11d058['meshInstan'+'ce']&&this['_removeMes'+'hInstance'](_0x11d058['meshInstan'+'ce']),_0x344461===-0x147b+-0xf98+-0x5*-0x737){_0x11d058['meshInstan'+'ce']=null;continue;}for(let _0x14d684=0xd20+-0xf00+0x1e0;_0x14d684<_0x344461;_0x14d684++)_0x11d058['indices'][_0x14d684*(0xeae+0x1*-0x35c+0xf*-0xc1)*(-0x21ff+-0x647*0x1+0x2848)+(0x17*-0xae+-0x6*0x3c7+0x1326*0x2)]=_0x14d684*(-0x138+0x1e4+-0xa8),_0x11d058['indices'][_0x14d684*(0x1766+0x1922+-0x3085)*(-0xdf*-0x1+0xf7a+-0x1057)+(0x41e+0x2*0xb6b+0x1af3*-0x1)]=_0x14d684*(0x1*0x43+-0x2427+-0x4*-0x8fa)+(-0xb*-0xc6+0xb*-0x1f3+-0x9*-0x170),_0x11d058['indices'][_0x14d684*(-0xb3*-0x17+0x1*0x1c87+-0x2c99*0x1)*(0x208d*0x1+0x1*0x1fd7+-0x4062)+(0x25*0x8e+-0x1*0x1694+-0x30*-0xb)]=_0x14d684*(-0x38f*0x5+-0x17*0x53+0x1944)+(-0x97b*0x2+-0xbc3+0x1ebc),_0x11d058['indices'][_0x14d684*(-0xc5*-0xb+0x7f0+-0x1*0x1064)*(-0x238e+0x2615*0x1+0x81*-0x5)+(-0xd8*-0x5+0x3d*0x94+-0x2779*0x1)]=_0x14d684*(-0xecc*-0x1+0x1*-0xfbb+0xf3)+(0x1bd8+-0x41*-0x89+-0x3e9f),_0x11d058['indices'][_0x14d684*(-0x9*-0x2bd+-0x18ea+0x48)*(0x298+0x76*-0x40+0x562*0x5)+(-0x2*-0x3d+0x245e+0x1*-0x24d4)]=_0x14d684*(-0x1bbf+0x81+0x1b42)+(0x1*0x1f0f+0x115c+-0x3068),_0x11d058['indices'][_0x14d684*(-0x1ffe+-0x3d*0x38+-0x13*-0x263)*(-0x1119*-0x2+-0x189*0x1+0xd*-0x283)+(-0x2096+0x3af+0x73b*0x4)]=_0x14d684*(-0x4a4+0x62b+0x183*-0x1)+(-0x4d7+-0x193*-0x3+0x1f),_0x11d058['normals'][_0x14d684*(-0x2409+0x8fb+-0x483*-0x6)*(0x1b1e+-0x164f*0x1+-0x4cc)+(0x13*0xdb+-0x813+0x417*-0x2)]=-0xb23*-0x1+-0x253c+0x11*0x189,_0x11d058['normals'][_0x14d684*(-0x543*0x5+0x405+-0xa*-0x23b)*(0x14eb+0x1e31*-0x1+-0x1*-0x949)+(-0x2*0x7ca+-0xc3+0x1*0x1058)]=0x2*-0xdff+-0x208b+0x3c89,_0x11d058['normals'][_0x14d684*(0x31a*0x7+0x4f6+0xd54*-0x2)*(0x1ac8+-0x3*0x757+-0x4c0)+(0x1*-0x18d0+-0x5ff*-0x1+0x12d3)]=-(0xd4*-0x16+-0x1f39+0x3172),_0x11d058['normals'][_0x14d684*(-0x202a*0x1+-0x15eb+0x1*0x3619)*(0x14*0x146+0x5b*0x61+-0x3bf0*0x1)+(0x1423+-0x1908+-0x9d*-0x8)]=0x1*0x22d+-0x2283+0x2056,_0x11d058['normals'][_0x14d684*(0x11c7*0x1+-0xccc+-0x4f7)*(0x1bbf*-0x1+-0x71*-0x1d+0xef5*0x1)+(0x1658+0x9+0x1*-0x165d)]=-0x402*0x9+0x13*-0xe3+-0x1*-0x34eb,_0x11d058['normals'][_0x14d684*(0x11*-0x186+0x321*-0x1+0x1d0b)*(0x2*-0xb57+0x8f2+0xdbf)+(0x11ed+0x497+-0x167f)]=-(-0x243b+-0x1*0x470+0x28ac),_0x11d058['normals'][_0x14d684*(0x1842+-0x21ea+-0x4d6*-0x2)*(0x1*0x241a+0x3a*0x31+-0x2f31)+(-0x1*-0x164b+0x111*0x20+-0x3865)]=-0x19bc+-0x1d89+0x3745,_0x11d058['normals'][_0x14d684*(-0xf67+0x1015+-0xaa)*(-0xae8*0x1+-0x9*0x1e3+0xdf3*0x2)+(0x61d*0x5+-0x1209+-0xc81)]=-0x2f2+0x1bd1*0x1+-0x18df,_0x11d058['normals'][_0x14d684*(-0x578*0x7+-0x175b+0x3da7)*(0x1837+0x1*-0x1e85+-0x93*-0xb)+(0x1*0x2313+-0x1997+-0x974)]=-(-0x2156+-0x159d+0x36f4*0x1),_0x11d058['normals'][_0x14d684*(0x1499+-0x3*0x11a+0x1*-0x1147)*(-0x9f4+-0x2119+0x2b10)+(0x1*-0x1b13+0x20e7+-0x5cb*0x1)]=0x22d8*0x1+-0xaf7*0x3+-0x1f3,_0x11d058['normals'][_0x14d684*(-0x1*0x2429+-0x787+0x1*0x2bb4)*(0x17d5+0x1c4b+-0x341d)+(-0x309*-0x7+0x1311+-0x2846)]=-0x1fb4+-0x1cdb+0x1*0x3c8f,_0x11d058['normals'][_0x14d684*(0x5*-0x5d2+-0x9ee*-0x1+-0x1*-0x1330)*(-0x83*0x26+0x2*0xfb6+0x3*-0x3fd)+(0x18f*0x10+0x3*0x955+0x14*-0x2a5)]=-(0x231d+0x1*-0x1+-0x231b);const _0x3c2547=LL(this['_system']['app']['graphicsDe'+'vice'],_0x11d058),_0x113e0a=new We(_0x3c2547,this['_material'],this['_node']);if(_0x113e0a['name']='Text\x20Eleme'+'nt:\x20'+this['_entity']['name'],_0x113e0a['castShadow']=!(0x1836*0x1+0x5ee+0x1e23*-0x1),_0x113e0a['receiveSha'+'dow']=!(-0xe2c+0x1122+0x2f5*-0x1),_0x113e0a['cull']=!_0x5968c3,_0x113e0a['screenSpac'+'e']=_0x5968c3,_0x113e0a['drawOrder']=this['_drawOrder'],_0x21a22e&&(_0x113e0a['cull']=!(0x1b7*0x13+-0x84e+-0x1*0x1847),_0x113e0a['isVisibleF'+'unc']=_0x4c113a),this['_setTextur'+'eParams'](_0x113e0a,this['_font']['textures'][_0x2f31ee]),_0x113e0a['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']),_0x113e0a['setParamet'+'er']('material_o'+'pacity',this['_color']['a']),_0x113e0a['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x113e0a['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x113e0a['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x2f31ee]['width']),_0x113e0a['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']),_0x113e0a['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']),_0x113e0a['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']),this['_symbolSha'+'dowParams'])this['_shadowOff'+'setUniform'][0xf38+0x16d1+0xd*-0x2ed]=0x71*0x21+0x1546+-0x1*0x23d7,this['_shadowOff'+'setUniform'][-0xfd6+0x23f8+-0x1421]=0x16d*0x19+-0x698+-0x1d0d;else{const _0x3b47dd=-this['_font']['data']['info']['maps'][_0x2f31ee]['width']/this['_font']['data']['info']['maps'][_0x2f31ee]['height'];this['_shadowOff'+'setUniform'][-0x91*-0x23+-0x147d+0xaa]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0xaf1*-0x1+0x451+-0xf41]=_0x3b47dd*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'];}_0x113e0a['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']),_0x11d058['meshInstan'+'ce']=_0x113e0a,this['_model']['meshInstan'+'ces']['push'](_0x113e0a);}}this['_element']['maskedBy']&&this['_element']['_setMasked'+'By'](this['_element']['maskedBy']),_0x376e8b&&this['_element']['enabled']&&this['_entity']['enabled']&&this['_element']['addModelTo'+'Layers'](this['_model']),this['_updateMes'+'hes'](),this['_rangeStar'+'t']=-0x1345+-0x582+0x18c7,this['_rangeEnd']=this['_symbols']['length'],this['_updateRen'+'derRange']();}['_removeMes'+'hInstance'](_0x2f3736){_0x2f3736['destroy']();const _0x89d9b7=this['_model']['meshInstan'+'ces']['indexOf'](_0x2f3736);_0x89d9b7!==-(-0x12c+0x4*0x57a+-0x14bb)&&this['_model']['meshInstan'+'ces']['splice'](_0x89d9b7,0xadf*0x2+-0x606+-0xfb7);}['_setMateri'+'al'](_0x1e9479){if(this['_material']=_0x1e9479,this['_model'])for(let _0x95ef7=-0x235c+-0x1403+0x375f,_0x32534f=this['_model']['meshInstan'+'ces']['length'];_0x95ef7<_0x32534f;_0x95ef7++){const _0x4c211c=this['_model']['meshInstan'+'ces'][_0x95ef7];_0x4c211c['material']=_0x1e9479;}}['_updateMat'+'erial'](_0x5cb45b){const _0x1c5125=this['_element'],_0x527080=_0x1c5125['_isScreenC'+'ulled'](),_0x299694=function(_0x5122a2){return _0x1c5125['isVisibleF'+'orCamera'](_0x5122a2);},_0x408783=this['_font']&&this['_font']['type']===rc;if(this['_material']=this['_system']['getTextEle'+'mentMateri'+'al'](_0x5cb45b,_0x408783,this['_enableMar'+'kup']),this['_model'])for(let _0x59506c=0xc35+-0xf*-0x1d5+0x9ec*-0x4,_0x2560af=this['_model']['meshInstan'+'ces']['length'];_0x59506c<_0x2560af;_0x59506c++){const _0x4a2933=this['_model']['meshInstan'+'ces'][_0x59506c];_0x4a2933['cull']=!_0x5cb45b,_0x4a2933['material']=this['_material'],_0x4a2933['screenSpac'+'e']=_0x5cb45b,_0x527080?(_0x4a2933['cull']=!(0x745*-0x3+-0xaa0+0x17*0x169),_0x4a2933['isVisibleF'+'unc']=_0x299694):_0x4a2933['isVisibleF'+'unc']=null;}}['_updateMat'+'erialEmiss'+'ive'](){this['_symbolCol'+'ors']?(this['_colorUnif'+'orm'][0x2684+-0x3ef+-0x2295]=0x4c1+-0x100b+0x31*0x3b,this['_colorUnif'+'orm'][0x1291+-0x1a03+-0x1*-0x773]=0x11*-0xa+0x4*0x24b+0x1*-0x881,this['_colorUnif'+'orm'][0x1*-0x15f0+-0xaa6+0x2098]=-0x247+0x1e50+-0x1c08):(Ve['linear'](this['_color']),this['_colorUnif'+'orm'][-0x4*0x56b+0x1369*0x1+0x243*0x1]=Ve['r'],this['_colorUnif'+'orm'][-0x1349*-0x2+0x5c9+-0x162d*0x2]=Ve['g'],this['_colorUnif'+'orm'][-0x1d6c+0xade*-0x1+0x284c]=Ve['b']);}['_updateMat'+'erialOutli'+'ne'](){this['_symbolOut'+'lineParams']?(this['_outlineCo'+'lorUniform'][0x1038*0x1+0x2*-0x82+-0x79a*0x2]=0x229b*0x1+0x959*-0x1+0x1942*-0x1,this['_outlineCo'+'lorUniform'][0x10f8+-0xc*-0x183+-0x1*0x231b]=-0x3fe+-0xda*-0x1a+-0x1226,this['_outlineCo'+'lorUniform'][-0x1ec5+-0x3*-0xa25+0x58]=0x1b55+-0xcb*-0x26+-0x3977,this['_outlineCo'+'lorUniform'][-0x22af+0x2dd+0x1d*0x119]=0x1*-0x1703+-0x25a+-0x1*-0x195e):(Ve['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][-0x715*0x1+-0x10eb*0x1+0x1800]=Ve['r'],this['_outlineCo'+'lorUniform'][0x1bbc+0x16cb+0x1d*-0x1be]=Ve['g'],this['_outlineCo'+'lorUniform'][-0x58e*0x7+-0x12d7+-0x39bb*-0x1]=Ve['b'],this['_outlineCo'+'lorUniform'][0x15c2+0x223b+-0x2*0x1bfd]=Ve['a']);}['_updateMat'+'erialShado'+'w'](){this['_symbolOut'+'lineParams']?(this['_shadowCol'+'orUniform'][0x3*0xc8a+-0x130e+0x30*-0x63]=0x93a*-0x3+0x3*-0xbb9+-0x207*-0x1f,this['_shadowCol'+'orUniform'][-0x6*0x286+-0x181a+-0x11*-0x24f]=-0x3b*0x1+-0x34b+0x386,this['_shadowCol'+'orUniform'][-0x3eb*-0x1+0x1176+0x155f*-0x1]=0x2598+-0x105*-0x9+-0x2ec5,this['_shadowCol'+'orUniform'][-0x886*0x1+-0x1a42+0x22cb]=0x137b*0x1+-0x1f7*-0xe+0x2efd*-0x1):(Ve['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][-0x1b6+-0xb34+0xcea]=Ve['r'],this['_shadowCol'+'orUniform'][0x1*-0xcdc+-0x1c7b+0x2958]=Ve['g'],this['_shadowCol'+'orUniform'][0xd49*-0x2+0x1140+0x6*0x18e]=Ve['b'],this['_shadowCol'+'orUniform'][-0x1ac0+0x45c+-0x25*-0x9b]=Ve['a']);}['_isWordBou'+'ndary'](_0x555b9f){return hg['test'](_0x555b9f);}['_isValidNe'+'xtChar'](_0xc46858){return _0xc46858!==null&&!FL['test'](_0xc46858);}['_isNextCJK'+'Boundary'](_0x48e785,_0x14c2b2){return cg['test'](_0x48e785)&&(hg['test'](_0x14c2b2)||OL['test'](_0x14c2b2));}['_isNextCJK'+'WholeWord'](_0x1881fb){return cg['test'](_0x1881fb);}['_updateMes'+'hes'](){const _0xf55de9=this['_font']['data'],_0x5f4936=this,_0x6187ab=Math['min'](this['_minFontSi'+'ze'],this['_maxFontSi'+'ze']),_0x2731c8=this['_maxFontSi'+'ze'],_0x4c8f2e=this['_shouldAut'+'oFit']();_0x4c8f2e&&(this['_fontSize']=this['_maxFontSi'+'ze']);const _0x3af2bc=0x6*-0x4fd+-0x7a4+0x25b2,_0x3ccf92=this['_symbols']['length'];let _0x26a370=-0xac4*0x1+0xa13+0xb1,_0x20df22=-0x9*-0x133+0x1*0x28c+0xd57*-0x1,_0x69b52b=0x5e5+0x1349+-0x192e,_0x494a6c=0x29d+-0x188f+0x15f2,_0x5aba61=-0x2011+-0x22e8+-0x1*-0x42fa,_0x5a74b1=-0x893+0x1*-0x4b5+-0x352*-0x4,_0x3527ea=0x238a+0x1f73+0x1*-0x42fd,_0x41b86b=-0x186f+0x1b19+-0x2*0x155,_0x362a26=-0xf10*-0x2+0x13fd+-0x321d,_0x3dcf02=-0xca3+0x92*0x2f+0x117*-0xd,_0x5814bb=0x7*0x1ac+0x1763+-0x1*0x2317;const _0x219622=Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])>=0x17b*-0xd+-0x2dd*-0x9+-0x686+0.0001;let _0x5f54c1=this['_element']['calculated'+'Width'];(this['autoWidth']&&!_0x219622||!this['_wrapLines'])&&(_0x5f54c1=Number['POSITIVE_I'+'NFINITY']);let _0x1bc21d=-0x175*-0x11+0x3*-0x227+-0x1250,_0x2fadf2=-0x207b+0x9ee+-0x168d*-0x1,_0x2fec20,_0x5c6196,_0x1256d0,_0x38f8d9;function _0x4d3694(_0x33d35e,_0x35ebb5,_0x857f0){_0x5f4936['_lineWidth'+'s']['push'](Math['abs'](_0x857f0));const _0x2ca518=_0x41b86b>_0x35ebb5?_0x35ebb5+(0x93*-0x7+0x2386+-0x380*0x9):_0x41b86b,_0x4ff9b0=_0x41b86b>_0x35ebb5?_0x41b86b+(0x1*0x231d+-0xf3a+0x13e2*-0x1):_0x35ebb5,_0x27c100=_0x33d35e['slice'](_0x2ca518,_0x4ff9b0);if(_0x5814bb){let _0x24f2e5=_0x27c100['length'];for(;_0x24f2e5--&&_0x5814bb>0x123f+-0x716+0x1*-0xb29;)lg['test'](_0x27c100[_0x24f2e5])&&(_0x27c100['splice'](_0x24f2e5,0x1abb+-0x1609+-0x1*0x4b1),_0x5814bb--);}_0x5f4936['_lineConte'+'nts']['push'](_0x27c100['join']('')),_0x26a370=0x12b9+-0xad*0x19+-0x1d4,_0x20df22-=_0x5f4936['_scaledLin'+'eHeight'],_0x5aba61++,_0x362a26=-0x2541+0x2*-0x5be+0x3*0x103f,_0x3dcf02=0x1*-0x851+0x1*-0x461+-0x5*-0x28a,_0x5814bb=0xc4a+0x9a9+0x15f3*-0x1,_0x5a74b1=0x1b9f*0x1+-0x231f+-0x28*-0x30,_0x41b86b=_0x35ebb5;}let _0x5d9396=!(-0x261*0xd+-0xfd0+0x5*0x959);for(;_0x5d9396;){_0x5d9396=!(-0x2*-0x1025+0x3*0x135+0x5fc*-0x6),_0x4c8f2e?this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t']*this['_fontSize']/(this['_maxFontSi'+'ze']||0xd68+-0x7e5*-0x3+-0x2517*0x1+0.0001):this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t'],this['width']=0x184+0xc80+0x256*-0x6,this['height']=0xaf3*0x3+-0x144b+-0x2*0x647,this['_lineWidth'+'s']=[],this['_lineConte'+'nts']=[],_0x26a370=-0x1d7e+-0x25f*0xb+0x1*0x3793,_0x20df22=-0x2*0x2a5+0x17e1+-0x1*0x1297,_0x69b52b=0x1f*-0xc7+0x2*-0xfb+0x7*0x3b9,_0x494a6c=-0xd*-0x1e1+-0x1*-0xa4+-0x1911,_0x5aba61=-0x1cf4+-0x15c8+0x1*0x32bd,_0x5a74b1=0x1556+0x1*-0x1363+-0x1f3,_0x3527ea=-0x4d5*0x3+0x1bcf+-0x3*0x470,_0x41b86b=0x361*0x5+-0x280+-0xe65,_0x362a26=-0x7f*-0x47+0x406+-0x273f,_0x3dcf02=-0x97*-0x29+-0x1ba6+0x377*0x1,_0x5814bb=-0x1d85+0x1c22+0x47*0x5;const _0x3c0d24=this['_fontSize']/_0x3af2bc;_0x1bc21d=this['_fontMinY']*_0x3c0d24,_0x2fadf2=this['_fontMaxY']*_0x3c0d24;for(let _0x59a09b=0x6f7+-0x1*0x19c7+0x12d0;_0x59a09b<this['_meshInfo']['length'];_0x59a09b++)this['_meshInfo'][_0x59a09b]['quad']=0xb*0x1d6+-0x373*0x1+0x3*-0x595,this['_meshInfo'][_0x59a09b]['lines']={};let _0x68bcb6=-0x3*-0x89+0x211c+-0x21b8,_0x4e7a77=-0x150d*0x1+-0x6a2+0x1cae,_0x5be323=-0x242e+-0x26ee+-0x1*-0x4c1b,_0x2d8b60=-0x49*-0x71+-0x1cc7+-0x273+(0x12e9+0x26b9+0x38a3*-0x1)*(0x1*-0x25cf+0x1006*0x1+0x16c9),_0x39c705=-0xa*0xb0+-0xf01+0x16e0+(0x2*-0x587+0x1af2+-0xee5)*(-0x20b6+-0x717+0x28cd),_0x58b1a9=0x128+0x1dc1+-0x1ee9,_0x332709=-0x2*0x116a+-0xf1*-0x19+0x79*0x1a+(-0x1*0x1726+0xe76+-0x25*-0x43)*(-0x1842*-0x1+0x1*0x1d23+0x3465*-0x1),_0x29d153=0x302+-0x148+-0xbb+(-0x1d*0x70+0x1895+0xa*-0x117)*(0x1*0x23bb+-0x13d3+0x13e*-0xc),_0x5197f6=0x1421+0x4*-0x15b+0x22*-0x6b+(0x7*-0x216+-0xb10+0x1a29)*(-0x4f0+0x146f*-0x1+-0x1*-0x1a5f);for(let _0x3b5588=0x1d0a+0x1*0xd6c+-0x2a76;_0x3b5588<_0x3ccf92;_0x3b5588++){if(_0x2fec20=this['_symbols'][_0x3b5588],_0x38f8d9=_0x3b5588+(-0x1e54+0x215*-0x8+0x2efd)>=_0x3ccf92?null:this['_symbols'][_0x3b5588+(0x1d4d*-0x1+0x1233*-0x1+0x1*0x2f81)],lg['test'](_0x2fec20)){_0x5814bb++,(!this['_wrapLines']||this['_maxLines']<0x2228*-0x1+0x57*0x2f+-0x1*-0x122f||_0x5aba61<this['_maxLines'])&&(_0x4d3694(this['_symbols'],_0x3b5588,_0x494a6c),_0x3527ea=_0x3b5588+(-0x5a9+0x1*0x1813+-0x1269),_0x41b86b=_0x3b5588+(0xddc+0x523+-0x11e*0x11));continue;}let _0x475c26=0xfb3*0x2+0x20b*-0x7+-0x5b3*0x3,_0x26f6ad=0x9e*-0x14+-0x20ed+0x2d45,_0x336f21=-0x1d4b+0x454*0x5+0x7a7,_0x13bda5=-0x281*-0x2+-0x5*0x791+0x20d4,_0xf98035,_0x335f18;if(_0x5c6196=_0xf55de9['chars'][_0x2fec20],!_0x5c6196){if(NL['indexOf'](_0x2fec20)!==-(0x1*-0xf5e+-0x1bb*0xe+0x2799))_0x5c6196=kL;else{if(_0xf55de9['chars']['\x20'])_0x5c6196=_0xf55de9['chars']['\x20'];else for(const _0x47e74a in _0xf55de9['chars']){_0x5c6196=_0xf55de9['chars'][_0x47e74a];break;}_0xf55de9['missingCha'+'rs']||(_0xf55de9['missingCha'+'rs']=new Set()),_0xf55de9['missingCha'+'rs']['has'](_0x2fec20)||(console['warn']('Character\x20'+'\x27'+_0x2fec20+('\x27\x20is\x20missi'+'ng\x20from\x20th'+'e\x20font\x20')+_0xf55de9['info']['face']),_0xf55de9['missingCha'+'rs']['add'](_0x2fec20));}}if(_0x5c6196){let _0x21b7b8=-0x1ecc+-0x13de+0x32aa;if(_0x3dcf02>-0x11a0*0x1+-0xe7d+0x201d){const _0x42b004=this['_font']['data']['kerning'];if(_0x42b004){const _0x497dad=_0x42b004[dh['getCodePoi'+'nt'](this['_symbols'][_0x3b5588-(-0x2*0xb74+-0x2547+0x3c30)])||0x101d+-0x1fb+-0xe22];_0x497dad&&(_0x21b7b8=_0x497dad[dh['getCodePoi'+'nt'](this['_symbols'][_0x3b5588])||-0x8e*-0x3+0x344+0x4ee*-0x1]||0xfec+-0xd4a+-0x151*0x2);}}_0xf98035=_0x5c6196['scale']||0xbec+0x22b8+-0x2ea3,_0x335f18=(_0x5c6196['width']+_0x5c6196['height'])/(0x1*0x635+0x1d44*-0x1+0x1711),_0x13bda5=_0x3c0d24*_0x335f18/_0xf98035,_0x336f21=(_0x5c6196['xadvance']+_0x21b7b8)*_0x3c0d24,_0x475c26=(_0x5c6196['xoffset']-_0x21b7b8)*_0x3c0d24,_0x26f6ad=_0x5c6196['yoffset']*_0x3c0d24;}else console['error']('Couldn\x27t\x20s'+'ubstitute\x20'+'missing\x20ch'+'aracter:\x20\x27'+_0x2fec20+'\x27');const _0xce5e22=RL['test'](_0x2fec20),_0x464e78=_0x5c6196&&_0x5c6196['map']||-0x1c78*-0x1+-0x2*-0x8c3+0x16ff*-0x2,_0x1403ce=-this['_font']['data']['info']['maps'][_0x464e78]['width']/this['_font']['data']['info']['maps'][_0x464e78]['height'],_0x3499a0=this['_meshInfo'][_0x464e78],_0x189d31=_0x26a370+this['_spacing']*_0x336f21;if(_0x189d31>_0x5f54c1&&_0x3dcf02>0x3*-0x463+-0xe0*0x2b+0x32c9&&!_0xce5e22&&(this['_maxLines']<-0xcd4+-0x1827*-0x1+-0xd*0xdf||_0x5aba61<this['_maxLines'])){if(_0x362a26===-0x1*-0x24e5+0x22fe+-0x47e3)_0x3527ea=_0x3b5588,_0x4d3694(this['_symbols'],_0x3b5588,_0x494a6c);else{const _0x12232a=Math['max'](_0x3b5588-_0x3527ea,0x27*0xfc+-0x10cd+-0x1*0x1597);if(this['_meshInfo']['length']<=-0x8*-0x28e+0x8*0x4a3+-0x3987)_0x3499a0['lines'][_0x5aba61-(0x1*-0xd8d+-0x5*0x779+0x21*0x18b)]-=_0x12232a,_0x3499a0['quad']-=_0x12232a;else{const _0x345c83=_0x3527ea,_0x1e97da=_0x3b5588;for(let _0x568ea1=_0x345c83;_0x568ea1<_0x1e97da;_0x568ea1++){const _0x548969=this['_symbols'][_0x568ea1],_0x115b37=_0xf55de9['chars'][_0x548969],_0x57039e=this['_meshInfo'][_0x115b37&&_0x115b37['map']||-0x24*0xe6+0xf57+0x1101];_0x57039e['lines'][_0x5aba61-(-0x11ad+0xc65+-0xb*-0x7b)]-=0x85d*-0x1+0x1d88+-0x1*0x152a,_0x57039e['quad']-=0x1*-0x99d+0x2ab*0x5+-0x3b9*0x1;}}_0x3b5588-=_0x12232a+(-0x5*0x14b+0x109c+-0xa24),_0x4d3694(this['_symbols'],_0x3527ea,_0x5a74b1);continue;}}_0x1256d0=_0x3499a0['quad'],_0x3499a0['lines'][_0x5aba61-(-0x2344+-0x11b5+0x34fa*0x1)]=_0x1256d0;let _0x530091=_0x26a370-_0x475c26,_0x5ad2af=_0x530091+_0x13bda5;const _0x465e30=_0x20df22-_0x26f6ad,_0x408bc8=_0x465e30+_0x13bda5;if(this['_rtl']){const _0x7f135b=_0x13bda5-_0x475c26-this['_spacing']*_0x336f21-_0x475c26;_0x530091-=_0x7f135b,_0x5ad2af-=_0x7f135b;}_0x3499a0['positions'][_0x1256d0*(-0x4*0x2d2+0x7*0x502+-0x1*0x17c2)*(-0x1fe9+-0xcfe*-0x1+-0x977*-0x2)+(-0x28e+0xa7*0x13+-0x9d7)]=_0x530091,_0x3499a0['positions'][_0x1256d0*(-0x130+0x262c+-0x24f8)*(-0x10a0+0x2*-0x7ba+0x2017)+(0x163b+0x4*-0x71+-0x1*0x1476)]=_0x465e30,_0x3499a0['positions'][_0x1256d0*(0x176c*0x1+0xffc+-0x2764)*(0xf36+0x1*-0x1047+0x114)+(-0x18d6+0x1*0x22a9+-0x9d1)]=_0x69b52b,_0x3499a0['positions'][_0x1256d0*(-0x193f+0xaa*-0x5+-0x3*-0x987)*(-0x1*0x1969+-0x12d5+0x2c41)+(-0xb*0x212+0x67f*-0x3+0x2a46)]=_0x5ad2af,_0x3499a0['positions'][_0x1256d0*(0x156+0x68*-0x4+0x4e)*(-0x83*-0x7+-0x1dc7+0x1a35)+(-0x5*-0x2f9+-0x650*0x5+0x1*0x10b7)]=_0x465e30,_0x3499a0['positions'][_0x1256d0*(0x1ff2+0x7f*0x5+0x1*-0x2269)*(0x159a+0xbf5*0x3+-0x3976)+(0x1*-0x22bd+-0x2428+0x139*0x3a)]=_0x69b52b,_0x3499a0['positions'][_0x1256d0*(-0xef+-0xbf4*-0x2+-0x16f5)*(-0x88c+0x7d7+0xb8)+(0x7ee+-0xdcf+0x5e7)]=_0x5ad2af,_0x3499a0['positions'][_0x1256d0*(0x19a*-0x7+0x10d*0xd+-0x26f)*(0x1e79+0x4*-0xd+-0x2*0xf21)+(-0x1*0x20a4+-0xf27+0x2*0x17e9)]=_0x408bc8,_0x3499a0['positions'][_0x1256d0*(0x19a+-0x20e2+-0x1*-0x1f4c)*(-0xf38+0x25*-0xed+0x317c)+(0x46*0x61+-0x1339+0x745*-0x1)]=_0x69b52b,_0x3499a0['positions'][_0x1256d0*(0x1939+-0x1440+-0x1*0x4f5)*(0x1*-0x7ca+-0x1*-0x23c9+-0x4*0x6ff)+(-0x117e+-0x1f14+0x309b)]=_0x530091,_0x3499a0['positions'][_0x1256d0*(-0x20fb+-0xb*0x144+0x2eeb*0x1)*(0xd96+-0xdd0+0x3d)+(-0x186e+-0x19fb+0x3273)]=_0x408bc8,_0x3499a0['positions'][_0x1256d0*(-0x10*0x6+0x1*-0xe4e+0xeb2)*(0x16*0x135+0x296+-0x1d21)+(-0x25*0x49+-0x2023+0x2abb)]=_0x69b52b,this['width']=Math['max'](this['width'],_0x189d31);let _0x2f242f;if(this['_shouldAut'+'oFitWidth']()&&this['width']>this['_element']['calculated'+'Width']&&(_0x2f242f=Math['floor'](this['_element']['fontSize']*this['_element']['calculated'+'Width']/(this['width']||-0x1153+-0x1*0x2f3+0x1446+0.0001)),_0x2f242f=Y['clamp'](_0x2f242f,_0x6187ab,_0x2731c8),_0x2f242f!==this['_element']['fontSize'])){this['_fontSize']=_0x2f242f,_0x5d9396=!(-0x230d+0x149d+0xe70);break;}if(this['height']=Math['max'](this['height'],_0x2fadf2-(_0x20df22+_0x1bc21d)),this['_shouldAut'+'oFitHeight']()&&this['height']>this['_element']['calculated'+'Height']&&(_0x2f242f=Y['clamp'](this['_fontSize']-(0x3a*-0xa8+0xd4f+0x1*0x18c2),_0x6187ab,_0x2731c8),_0x2f242f!==this['_element']['fontSize'])){this['_fontSize']=_0x2f242f,_0x5d9396=!(-0x83*0x3d+-0x3*0x6cd+0x339e);break;}_0x26a370+=this['_spacing']*_0x336f21,_0xce5e22||(_0x494a6c=_0x26a370),(this['_isWordBou'+'ndary'](_0x2fec20)||this['_isValidNe'+'xtChar'](_0x38f8d9)&&(this['_isNextCJK'+'Boundary'](_0x2fec20,_0x38f8d9)||this['_isNextCJK'+'WholeWord'](_0x38f8d9)))&&(_0x362a26++,_0x5a74b1=_0x494a6c,_0x3527ea=_0x3b5588+(-0x1*0x403+0x1*0x132b+-0xf27)),_0x3dcf02++;const _0x58e0fe=this['_getUv'](_0x2fec20);if(_0x3499a0['uvs'][_0x1256d0*(-0x61b+-0xbef+0x120e*0x1)*(0x140b+0x254+-0x165d)+(-0x2*-0x5e3+0x4*-0x3d7+0x396)]=_0x58e0fe[-0x1269*-0x1+-0x2477+0x120e],_0x3499a0['uvs'][_0x1256d0*(0x1792+0xdad+-0x1*0x253b)*(-0x1986+-0x12b*-0x3+0x1*0x1607)+(0x8f5*-0x3+-0x3*-0x70b+-0x5bf*-0x1)]=-0x11*0x5b+-0x1*-0x72a+0x8f*-0x2-_0x58e0fe[0x1ee5+0xdc0+0xb29*-0x4],_0x3499a0['uvs'][_0x1256d0*(-0x1209+0x15eb*-0x1+0x27f8)*(0x47b*0x4+0x265e+0x4*-0xe12)+(-0xdc8+0x1cb+0x53*0x25)]=_0x58e0fe[0x1b9d+-0x1*0x142f+-0x76c],_0x3499a0['uvs'][_0x1256d0*(0x1*0x1fc5+-0x13*0x5f+-0x18b4)*(0x25b5+-0x20eb+-0x4c8)+(-0x1fba+0x74*0xa+0x1b35)]=-0x886+-0x45*0x65+0x23c0-_0x58e0fe[0xa5d+-0x2*-0x335+0x2*-0x863],_0x3499a0['uvs'][_0x1256d0*(0x3*-0x404+-0xb9b*0x1+-0x53*-0x49)*(0x10bc+-0x1bc3+0xb09)+(-0xb53*-0x1+0x2634+-0x3183)]=_0x58e0fe[-0x86e+-0x1d8b+0xca9*0x3],_0x3499a0['uvs'][_0x1256d0*(-0x2c3*-0xb+-0x231*-0x3+-0x24f0)*(-0x1*0x1a1e+0x1*0xba5+0xe7b)+(-0x1e8e*0x1+-0x5df+0x2472)]=-0x1d*0x83+-0x3*-0x9d1+-0xe9b-_0x58e0fe[0x3ac*0x9+-0x18aa+-0x85f],_0x3499a0['uvs'][_0x1256d0*(0x1fe2+0x1*-0x6c9+0x1915*-0x1)*(0x1*0x1343+0xe76+-0x21b7)+(0x16f*-0xd+-0x7*0x4d4+0x409*0xd)]=_0x58e0fe[0x3b*0x1+0x9*-0x75+0x3e2],_0x3499a0['uvs'][_0x1256d0*(0x1*-0x2299+0x4*0x2e7+0x1701)*(0x1f41+-0x622*-0x1+-0x2561)+(-0x14d0+0x2a6+-0x1231*-0x1)]=0xbbb+-0x1*0x257+0x321*-0x3-_0x58e0fe[0x12ef+-0x95*-0xd+-0x1*0x1a7d],this['_symbolCol'+'ors']){const _0x4ec82d=this['_symbolCol'+'ors'][_0x3b5588]*(-0x15dd+-0x27d+0x185d);_0x68bcb6=this['_colorPale'+'tte'][_0x4ec82d],_0x4e7a77=this['_colorPale'+'tte'][_0x4ec82d+(-0x1*-0x225b+0xb34+-0x2d8e)],_0x5be323=this['_colorPale'+'tte'][_0x4ec82d+(0x5*-0x39f+0x11a5+-0x1*-0x78)];}if(_0x3499a0['colors'][_0x1256d0*(0x180+-0x1*-0x997+-0xb13)*(-0x8*0x49e+0x46e+0x2086)+(-0x6b6+0xfee+-0x938)]=_0x68bcb6,_0x3499a0['colors'][_0x1256d0*(0x1*-0x8c9+0xf5f+-0x692)*(0x8*0x146+-0x40e*0x9+0xd29*0x2)+(0x23b1+-0x1620+-0xd90)]=_0x4e7a77,_0x3499a0['colors'][_0x1256d0*(-0x37*0x3d+-0x124b+0x1f6a)*(0x236c+0x1*-0x26bd+-0x355*-0x1)+(0x54f*0x2+0x7*-0x71+0xb*-0xaf)]=_0x5be323,_0x3499a0['colors'][_0x1256d0*(-0x19c7+0xd*0x1c1+-0x2fe*-0x1)*(-0x3*-0x1be+0x1*0x19b1+-0x1ee7*0x1)+(0x86*0xd+0x26ab+-0x2d76)]=0x2090+0x1a79+-0x3a0a,_0x3499a0['colors'][_0x1256d0*(-0x32*0xa2+-0x6*0x17f+0x28a2*0x1)*(-0x2219+-0x1a5d+0x3c7a)+(0x1e63+0xf5d+-0x2dbc*0x1)]=_0x68bcb6,_0x3499a0['colors'][_0x1256d0*(-0x20b8+0x9*-0x293+0x37e7)*(0x99e*0x2+0x19d7+-0x2d0f)+(-0x7e+0x1*-0x253+0x2d6)]=_0x4e7a77,_0x3499a0['colors'][_0x1256d0*(-0x1b77+-0x1857+0x33d2)*(0x21dd+0x7c5+-0x299e)+(0x120d+0xf8b+-0x2192)]=_0x5be323,_0x3499a0['colors'][_0x1256d0*(0x3*-0x68e+0xd67*-0x1+0x2115)*(-0xe*-0x272+-0x32d*0x7+-0xbfd)+(0x23b6+0x522+-0x28d1)]=-0x3*-0x21a+0xd2d+-0x127c,_0x3499a0['colors'][_0x1256d0*(-0x197b*-0x1+0x53*-0x2d+-0x18*0x74)*(-0x3ed*-0x2+-0xc5d+0x487)+(-0x116+0x1c91+0x1*-0x1b73)]=_0x68bcb6,_0x3499a0['colors'][_0x1256d0*(-0x293*0xd+-0x2*-0x494+0x1853)*(0x13*0x1e1+-0xbd7*-0x1+-0x2f86)+(0x1*0x1083+0x1*0x2178+0x10a6*-0x3)]=_0x4e7a77,_0x3499a0['colors'][_0x1256d0*(0x254e+0xb99*0x1+-0x30e3*0x1)*(0x2679+0x131f+-0x3994)+(0x163*0x1a+-0x2*0x791+-0x14e2)]=_0x5be323,_0x3499a0['colors'][_0x1256d0*(0x4b1*0x1+0x20f9+-0x25a6)*(-0x267c+0x1f7*-0xb+0x3c1d)+(-0x95*0x26+0x25*-0x81+0x28ce)]=0x817+-0x23b*-0x1+0x155*-0x7,_0x3499a0['colors'][_0x1256d0*(0x210b*0x1+0x1352+-0x3459)*(-0x980+-0x7c6+0x114a)+(-0x1d3f+-0x1374+0x30bf)]=_0x68bcb6,_0x3499a0['colors'][_0x1256d0*(0xbb3*0x1+0x1*0x301+-0x10*0xeb)*(0x1*-0x1b1d+0x206d+0x153*-0x4)+(0x23d4+-0xadd*0x2+-0x147*0xb)]=_0x4e7a77,_0x3499a0['colors'][_0x1256d0*(0x1*0x1a11+-0xc81+-0xd8c)*(0x7f7*-0x2+-0x1784+0x2776)+(-0x1*-0x2141+-0x1020+-0x1113)]=_0x5be323,_0x3499a0['colors'][_0x1256d0*(0x10a9+-0x6*0x1ea+0x529*-0x1)*(-0x10f2+-0x6d1+0x17c7)+(-0xf*-0xb7+0xaf1*0x3+-0x2b7d)]=0xef*-0xb+0x176+0xa*0xfb,this['_symbolOut'+'lineParams']){const _0x43928c=this['_symbolOut'+'lineParams'][_0x3b5588]*(0x1*-0x1e3d+-0x8d9+0x271b);_0x2d8b60=this['_outlinePa'+'lette'][_0x43928c]+this['_outlinePa'+'lette'][_0x43928c+(0x1*-0x515+-0xa*-0x59+0x19c)]*(0x23fa+-0x24ad*-0x1+-0x47a7),_0x39c705=this['_outlinePa'+'lette'][_0x43928c+(-0x1*-0x21f+-0xcc7*-0x3+-0x1*0x2872)]+this['_outlinePa'+'lette'][_0x43928c+(0x94c+-0x1*-0x6f7+-0x1040)]*(-0x1426*-0x1+0x360+-0x1686),_0x58b1a9=this['_outlinePa'+'lette'][_0x43928c+(-0xfdf+-0x211e+-0x3c5*-0xd)];}if(_0x3499a0['outlines'][_0x1256d0*(0xef0+-0x9*-0x3e4+-0x31f0*0x1)*(0x4e*0x4c+-0x75e*-0x4+-0x1*0x349d)+(0x23*-0x75+-0xc66+0x1c65*0x1)]=_0x2d8b60,_0x3499a0['outlines'][_0x1256d0*(0x29*-0x5e+0x241e+-0x150c)*(0x3*0x128+0x182*-0x18+0x20bb)+(-0x67b*0x3+-0x1179+-0x24eb*-0x1)]=_0x39c705,_0x3499a0['outlines'][_0x1256d0*(0xaf*0x34+-0x196c+-0xa1c*0x1)*(-0x9c+0x9b5+0x916*-0x1)+(0x1cba+0x3a*0x91+-0x3d92)]=_0x58b1a9,_0x3499a0['outlines'][_0x1256d0*(0x1d31+-0x987+0x5*-0x3ee)*(-0x1*0x1f63+-0x85f+0x27c5)+(0x8eb+-0x23b1+-0x1ac9*-0x1)]=_0x2d8b60,_0x3499a0['outlines'][_0x1256d0*(-0x3*0x8e1+-0xa4d+-0xb*-0x35c)*(0xda*-0x13+0x561*-0x1+0x1592)+(-0xcd+-0x204+0x2d5)]=_0x39c705,_0x3499a0['outlines'][_0x1256d0*(-0x1f7c+-0xcf5*-0x1+0x65*0x2f)*(0x2*0xcf4+0x1*-0x145b+0x2c5*-0x2)+(-0x1751+0x92*-0x9+0x1c78)]=_0x58b1a9,_0x3499a0['outlines'][_0x1256d0*(0x4d+0x59*0x7+-0x2b8)*(0x1e7*-0x12+0x1e8d+0x3b4)+(-0x176+0x155+0xd*0x3)]=_0x2d8b60,_0x3499a0['outlines'][_0x1256d0*(0x317*-0x1+-0x2262+0x257d)*(0xb49+-0x1845+0x3*0x455)+(-0x8f9+0x1a3b+-0x113b*0x1)]=_0x39c705,_0x3499a0['outlines'][_0x1256d0*(0x8a5*0x3+0x14cc+-0x2eb7)*(-0xc*0x1a+0x7e4*0x1+-0x6a9)+(-0xc7*-0x22+-0x1d8+0x2*-0xc47)]=_0x58b1a9,_0x3499a0['outlines'][_0x1256d0*(-0x4*0x1f7+-0x1f81*0x1+0x2761)*(-0x29*0xc9+0x70d*-0x2+0x2e4e)+(0x1af1+0xbfb*0x3+-0x3ed9)]=_0x2d8b60,_0x3499a0['outlines'][_0x1256d0*(0xf*0xbc+0x1028+-0x4*0x6ca)*(-0x8fe+-0x294*-0x5+-0x3e3)+(-0x13ef+-0xfbc+-0x3*-0xbe7)]=_0x39c705,_0x3499a0['outlines'][_0x1256d0*(-0x2595*-0x1+0x10ef+-0x3680)*(0x7*0x4f0+-0x1f0c+-0x381*0x1)+(0x29d*0x5+-0x251f+0x1819)]=_0x58b1a9,this['_symbolSha'+'dowParams']){const _0x55e151=this['_symbolSha'+'dowParams'][_0x3b5588]*(-0x3b4+-0x11ca+0x6*0x396);_0x332709=this['_shadowPal'+'ette'][_0x55e151]+this['_shadowPal'+'ette'][_0x55e151+(0x1*-0x2419+0x1151+0x12c9)]*(-0x7dd*0x1+-0x1*0x1b1+0xa8e),_0x29d153=this['_shadowPal'+'ette'][_0x55e151+(-0x651+0x1a1a+0x13c7*-0x1)]+this['_shadowPal'+'ette'][_0x55e151+(-0x21f0+0x1ec7+0x1d*0x1c)]*(0x5e*0x4e+-0xa58+0x2e2*-0x6),_0x5197f6=this['_shadowPal'+'ette'][_0x55e151+(-0x13c8+-0xfd9*0x1+0x23a5)]+(0x241a+0x6e0*0x4+0x1*-0x3f1b)+Math['round'](_0x1403ce*this['_shadowPal'+'ette'][_0x55e151+(-0x383+0x9*-0x21d+0x168d)]+(0x53*-0x30+0x1e4b+-0x2*0x71e))*(0xd91+-0x1330+0x69f);}_0x3499a0['shadows'][_0x1256d0*(-0x136e*-0x2+-0x2*0xc7+-0x254a)*(-0x18ad+-0x735+0x1*0x1fe5)+(-0xea7*-0x1+-0x184b+0x9a4)]=_0x332709,_0x3499a0['shadows'][_0x1256d0*(0xc49*-0x2+0xc1*0xb+0x2b*0x61)*(-0x6f*-0x19+-0x803+-0x2d1)+(0x1d36+-0x37*0x6d+0x72*-0xd)]=_0x29d153,_0x3499a0['shadows'][_0x1256d0*(0xdf9*-0x1+0x5c2+0x83b)*(-0x1*-0xcec+-0x1d+0x2a*-0x4e)+(-0x633+0x1d1d+-0x16e8)]=_0x5197f6,_0x3499a0['shadows'][_0x1256d0*(0x1c86+-0x20ed+-0x1*-0x46b)*(-0xb75+0x9d6+0xd1*0x2)+(-0x263c+-0x4*0x5b9+0x3d23)]=_0x332709,_0x3499a0['shadows'][_0x1256d0*(-0x898+-0x2*0x6d+0x976)*(0x5*0x195+0x8d*0x3+0x3*-0x32f)+(-0x1bd5+0x6c8+0x1511)]=_0x29d153,_0x3499a0['shadows'][_0x1256d0*(0xc9*0xf+-0x1376+0x7b3)*(-0x1c36+0x1*-0x1ef5+-0x32*-0x12f)+(0x25ed+-0x623+0x1*-0x1fc5)]=_0x5197f6,_0x3499a0['shadows'][_0x1256d0*(-0x1c*-0x59+0x14+-0x9cc)*(0x3f3+-0xc05+-0x1*-0x815)+(-0x837*-0x2+0x256f+-0x35d7)]=_0x332709,_0x3499a0['shadows'][_0x1256d0*(-0x17cb+0x2252+-0x9*0x12b)*(-0x74c+0x815+-0x1*0xc6)+(-0x32a+-0x1b*0x137+-0x2*-0x11ff)]=_0x29d153,_0x3499a0['shadows'][_0x1256d0*(0xa15*-0x1+0x1589+-0xb70)*(0x1*-0xf59+0x258f+-0x1633)+(-0x1699+0x1*-0x1a99+-0x189d*-0x2)]=_0x5197f6,_0x3499a0['shadows'][_0x1256d0*(0x29b+-0x1fd5*-0x1+-0x226c)*(-0x96a+0x495+-0x1*-0x4d8)+(-0x4*0x661+0x3*-0x16f+0x1dda)]=_0x332709,_0x3499a0['shadows'][_0x1256d0*(-0x1*-0x179f+0xb76+-0x2311)*(0x3f4+-0x10d5+0x4b*0x2c)+(0x1b7*0x3+0x12df+-0x17fa)]=_0x29d153,_0x3499a0['shadows'][_0x1256d0*(-0x12e0+0x7c*-0x2f+0x29a8)*(-0x621+-0x269e+0x2cc2)+(0x167c+0x1*-0x2101+0xa90)]=_0x5197f6,_0x3499a0['quad']++;}_0x5d9396||_0x41b86b<_0x3ccf92&&_0x4d3694(this['_symbols'],_0x3ccf92,_0x26a370);}this['_noResize']=!(0x1*-0x1324+0x15d3+0x2af*-0x1),this['autoWidth']=this['_autoWidth'],this['autoHeight']=this['_autoHeigh'+'t'],this['_noResize']=!(0x766+-0x8ab*0x2+-0x5*-0x1fd);const _0x5c3a54=this['_element']['pivot']['x'],_0x42e07d=this['_element']['pivot']['y'],_0x4c4d66=this['_alignment']['x'],_0x1e4ccf=this['_alignment']['y'];for(let _0x81b3f5=-0x20*-0x76+0x302+-0x8e1*0x2;_0x81b3f5<this['_meshInfo']['length'];_0x81b3f5++){if(this['_meshInfo'][_0x81b3f5]['count']===-0x276+-0x119+-0x38f*-0x1)continue;let _0x1778d5=0x132e*0x1+-0x15*0x121+0x487;for(const _0x1305ac in this['_meshInfo'][_0x81b3f5]['lines']){const _0x27a481=this['_meshInfo'][_0x81b3f5]['lines'][_0x1305ac],_0x34bff3=this['_lineWidth'+'s'][parseInt(_0x1305ac,0x165d+-0x2*0xb77+0x9b)],_0x1b4abd=-_0x5c3a54*this['_element']['calculated'+'Width']+_0x4c4d66*(this['_element']['calculated'+'Width']-_0x34bff3)*(this['_rtl']?-(-0x1d*0x109+-0x3*0xb95+0x40c5):-0x116*-0x13+0xce*0x4+-0x17d9),_0x552196=(0x466*0x1+-0x1dbb+0x5e*0x45-_0x42e07d)*this['_element']['calculated'+'Height']-_0x2fadf2-(0x1*-0x117d+0x2434+-0x12b6-_0x1e4ccf)*(this['_element']['calculated'+'Height']-this['height']);for(let _0xda9e01=_0x1778d5;_0xda9e01<=_0x27a481;_0xda9e01++)this['_meshInfo'][_0x81b3f5]['positions'][_0xda9e01*(0xbf*0x1d+0x53b+0x7*-0x3d6)*(-0x14fc+0x47*-0x4a+0x2985)]+=_0x1b4abd,this['_meshInfo'][_0x81b3f5]['positions'][_0xda9e01*(0xe5*0xa+0x1a1f+-0x230d)*(-0x128a*-0x1+0x17c9+0x2a5*-0x10)+(0xcc6+-0x1389+0x22*0x33)]+=_0x1b4abd,this['_meshInfo'][_0x81b3f5]['positions'][_0xda9e01*(0x541*-0x3+0xfc1+0x1*0x6)*(-0xa*-0x35f+0x1b52+-0x29*0x17d)+(0x25ab+0x6*-0xa+-0x2569)]+=_0x1b4abd,this['_meshInfo'][_0x81b3f5]['positions'][_0xda9e01*(-0x22*-0x7c+-0x2506+-0x1*-0x1492)*(0x1*-0x5b3+-0x567+0xb1d)+(0x1*0xdf1+-0x2030+0x1248)]+=_0x1b4abd,this['_meshInfo'][_0x81b3f5]['positions'][_0xda9e01*(-0x15a8+0x2*0x4f9+0xbba)*(-0x1*0x479+-0x2533*-0x1+-0x5*0x68b)+(-0xd2e+-0xfc2+-0x1cf1*-0x1)]+=_0x552196,this['_meshInfo'][_0x81b3f5]['positions'][_0xda9e01*(0xcbd+0x1a3e+-0x18f*0x19)*(-0x1d1d*-0x1+-0xa*0x3c5+0x37*0x28)+(0x505+0x26b7+0x2*-0x15dc)]+=_0x552196,this['_meshInfo'][_0x81b3f5]['positions'][_0xda9e01*(-0x1*-0x1003+0x1018+-0x9b*0x35)*(-0x128d+0x1*0x1738+-0x4a8)+(-0x1*-0x168e+-0x143c+-0x24b*0x1)]+=_0x552196,this['_meshInfo'][_0x81b3f5]['positions'][_0xda9e01*(-0x113f+0x22cb+0x16*-0xcc)*(0x7*0xc0+0x3d1+-0x90e*0x1)+(-0x1*-0xcd2+-0x13ca+-0x4e*-0x17)]+=_0x552196;if(this['_rtl'])for(let _0x421581=_0x1778d5;_0x421581<=_0x27a481;_0x421581++){const _0x452003=_0x421581*(0xb*-0x2bb+-0x2239+0x13*0x362)*(0xa0a+-0x2004+-0x15fd*-0x1);for(let _0x4547e9=0x7b2+0x24b1+-0x2c63*0x1;_0x4547e9<-0x5*-0x621+-0x222b*-0x1+0x2f2*-0x16;++_0x4547e9)this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+_0x4547e9*(-0x969+0x1*-0x1139+0x1aa5)]=this['_element']['calculated'+'Width']-this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+_0x4547e9*(-0x1955+0x79*0xf+0x1*0x1241)]+_0x1b4abd*(0x2509*0x1+-0x269e+0x197);const _0x253784=this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+(0xda9+-0x24a5+0x16ff)],_0x442952=this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+(-0x4*0x28e+0x2*0x5ab+0x14*-0xe)];this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+(-0xee+-0x1aae*0x1+0x1b9f)]=this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+(-0x29*-0x8a+0x757+0x1*-0x1d71)],this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+(0x3*0x247+-0xbb0+-0x4e1*-0x1)]=this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+(-0xab0+-0x22d4+-0x3*-0xf2f)],this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+(0x109a+0x1*0xe27+-0x1ec1)]=_0x253784,this['_meshInfo'][_0x81b3f5]['positions'][_0x452003+(-0x57e*-0x1+0x9*-0x2ed+0x14e0)]=_0x442952;}_0x1778d5=_0x27a481+(-0x56b*-0x5+0x292+-0x76a*0x4);}const _0x5c9bd6=this['_meshInfo'][_0x81b3f5]['count']*(-0x33f*0x2+-0x1*0x2453+0x2ad5),_0xf17fd5=this['_meshInfo'][_0x81b3f5]['quad']*(0x20d*0xb+-0x1a78+0x3ed),_0x4e3b72=new go(this['_meshInfo'][_0x81b3f5]['meshInstan'+'ce']['mesh']['vertexBuff'+'er']);for(let _0x17f891=-0x2*0x9d0+-0x346*-0x5+0x342;_0x17f891<_0x5c9bd6;_0x17f891++)_0x17f891>=_0xf17fd5?(_0x4e3b72['element'][Pe]['set'](0xc*0x1f2+-0xf68+-0x8*0xfe,0x245b*0x1+-0x347*-0x1+-0x27a2,0x320+-0x1fd*-0x7+-0x110b*0x1),_0x4e3b72['element'][Yt]['set'](0x8*0x20b+0x4d1+-0x1529*0x1,0x259c+-0x1*-0x1af3+-0x408f),_0x4e3b72['element'][kt]['set'](-0x38*0x8c+-0x14a*0xa+0x2b84,0xbeb+-0xa64+0x1*-0x187,-0x1*0x25c3+0x1*-0xbc9+0x318c,0xd*-0x2d7+-0x1*0x1c11+-0x103f*-0x4),_0x4e3b72['element'][Po]['set'](0x2315+-0x11c8+-0x114d*0x1,0x13a*-0x8+0x2*-0x1b5+0xd3a,0xa78+-0x1*-0xc64+-0x16dc,0x367*-0x5+0x294+0xe6f),_0x4e3b72['element'][Mo]['set'](0x15a1+-0x26b5+0x1114,0x1*0x18e6+-0x12cb+-0x61b*0x1,0x1536+0x1*0x18e1+-0x2e17,0x1dac+0x780+-0x252c)):(_0x4e3b72['element'][Pe]['set'](this['_meshInfo'][_0x81b3f5]['positions'][_0x17f891*(0x100d+0xc7d+-0x6d*0x43)+(0x1a0f+-0x22c8+0x8b9)],this['_meshInfo'][_0x81b3f5]['positions'][_0x17f891*(-0x20c5+0x1b*-0xf3+0x3a69)+(0x11cd*-0x1+-0x1a15+0x2be3)],this['_meshInfo'][_0x81b3f5]['positions'][_0x17f891*(-0x1d11+0xf07+0xe0d)+(-0x153e+-0x24de*0x1+-0x56*-0xad)]),_0x4e3b72['element'][Yt]['set'](this['_meshInfo'][_0x81b3f5]['uvs'][_0x17f891*(0x527+0x14b*-0x1d+0x205a)+(0x4f6*-0x1+-0x123b+0x1731)],this['_meshInfo'][_0x81b3f5]['uvs'][_0x17f891*(-0x31a*-0x5+0x1d2b*-0x1+-0xdab*-0x1)+(-0x7*0x515+0x22d5+-0xbf*-0x1)]),_0x4e3b72['element'][kt]['set'](this['_meshInfo'][_0x81b3f5]['colors'][_0x17f891*(-0x417+-0x130c*0x1+-0x1727*-0x1)+(0xd05+-0x189f+0xb9a)],this['_meshInfo'][_0x81b3f5]['colors'][_0x17f891*(-0xdd3+-0x8*0x48f+-0x1dd*-0x1b)+(0x395+0x77c*0x1+0x76*-0x18)],this['_meshInfo'][_0x81b3f5]['colors'][_0x17f891*(-0x183*-0x2+0x1*-0x1633+-0x121*-0x11)+(0x1*0x1303+-0x3d4*-0xa+0xb75*-0x5)],this['_meshInfo'][_0x81b3f5]['colors'][_0x17f891*(0x11e7+-0x7ed+-0x9f6)+(-0xf6*-0xd+0x595+-0x1*0x1210)]),_0x4e3b72['element'][Po]['set'](this['_meshInfo'][_0x81b3f5]['outlines'][_0x17f891*(0x1*0x1cd+-0x156e*0x1+0x13a4)+(0x1*0x22d1+-0x207d*0x1+0x95*-0x4)],this['_meshInfo'][_0x81b3f5]['outlines'][_0x17f891*(0x2*-0x12d9+-0x16d9*0x1+0x2a2*0x17)+(-0x1c43+-0x7ff+-0x1*-0x2443)],this['_meshInfo'][_0x81b3f5]['outlines'][_0x17f891*(0x1838+0xdf*0x20+-0x3415)+(0x19*-0x10f+-0x25*0x79+-0x14b*-0x22)]),_0x4e3b72['element'][Mo]['set'](this['_meshInfo'][_0x81b3f5]['shadows'][_0x17f891*(-0x217f+-0xabb*0x1+0x2c3d)+(0x303+0x234*0x11+-0x9*0x47f)],this['_meshInfo'][_0x81b3f5]['shadows'][_0x17f891*(-0x109f*0x1+-0x421+0x1*0x14c3)+(-0x36d*-0xa+-0x1*0x679+-0x1bc8)],this['_meshInfo'][_0x81b3f5]['shadows'][_0x17f891*(-0x2690+-0x1d5a+0x43ed)+(-0x1c35+-0x1a*-0x15+0x1a15)])),_0x4e3b72['next']();_0x4e3b72['end'](),this['_meshInfo'][_0x81b3f5]['meshInstan'+'ce']['mesh']['aabb']['compute'](this['_meshInfo'][_0x81b3f5]['positions']),this['_meshInfo'][_0x81b3f5]['meshInstan'+'ce']['_aabbVer']=-(-0x3*-0x445+-0x31d*-0x4+0x1*-0x1942);}this['_aabbDirty']=!(-0x258c+0x12c0+0x12cc);}['_onFontRen'+'der'](){this['font']=this['_font'];}['_onFontLoa'+'d'](_0x2617bb){this['font']!==_0x2617bb['resource']&&(this['font']=_0x2617bb['resource']);}['_onFontCha'+'nge'](_0x3f4f7c,_0x104f2b,_0x49bf11,_0x2a49b6){if(_0x104f2b==='data'){this['_font']['data']=_0x49bf11;const _0x4f5d69=this['_font']['data']['info']['maps']['length'];for(let _0x42b313=0x14f3+-0xe7+0x503*-0x4;_0x42b313<_0x4f5d69;_0x42b313++){if(!this['_meshInfo'][_0x42b313])continue;const _0x57ca76=this['_meshInfo'][_0x42b313]['meshInstan'+'ce'];_0x57ca76&&(_0x57ca76['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x57ca76['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x57ca76['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x42b313]['width']));}}}['_onFontRem'+'ove'](_0x5142fa){}['_setTextur'+'eParams'](_0x1a46b9,_0x215b68){this['_font']&&(this['_font']['type']===rc?(_0x1a46b9['deletePara'+'meter']('texture_em'+'issiveMap'),_0x1a46b9['deletePara'+'meter']('texture_op'+'acityMap'),_0x1a46b9['setParamet'+'er']('texture_ms'+'dfMap',_0x215b68)):this['_font']['type']===TL&&(_0x1a46b9['deletePara'+'meter']('texture_ms'+'dfMap'),_0x1a46b9['setParamet'+'er']('texture_em'+'issiveMap',_0x215b68),_0x1a46b9['setParamet'+'er']('texture_op'+'acityMap',_0x215b68)));}['_getPxRang'+'e'](_0x42cf77){const _0x494661=Object['keys'](this['_font']['data']['chars']);for(let _0x438dd8=0x1*-0x4ff+0x1*0x5b3+-0xb4;_0x438dd8<_0x494661['length'];_0x438dd8++){const _0x52d16c=this['_font']['data']['chars'][_0x494661[_0x438dd8]];if(_0x52d16c['range'])return(_0x52d16c['scale']||-0x1063+-0x7c9+0x182d)*_0x52d16c['range'];}return 0x115f*0x1+-0x1*0xd5d+0x20*-0x20;}['_getUv'](_0x38bdd8){const _0x5c782a=this['_font']['data'];if(!_0x5c782a['chars'][_0x38bdd8])return _0x5c782a['chars']['\x20']?this['_getUv']('\x20'):[0x475*0x2+0x2*0xa40+-0x1*0x1d6a,0x421+0xff5+-0x1*0x1416,-0xd8d+0x1*-0x6ab+0x1438,-0x1f*0x44+-0x1*-0xc06+-0x3ca];const _0x2915b0=_0x5c782a['chars'][_0x38bdd8]['map'],_0x3a9ff1=_0x5c782a['info']['maps'][_0x2915b0]['width'],_0x120f06=_0x5c782a['info']['maps'][_0x2915b0]['height'],_0xaa5be9=_0x5c782a['chars'][_0x38bdd8]['x'],_0x1ce7cb=_0x5c782a['chars'][_0x38bdd8]['y'],_0x1ab1cb=_0xaa5be9,_0x172ef3=_0x1ce7cb,_0x1c717e=_0xaa5be9+_0x5c782a['chars'][_0x38bdd8]['width'],_0x3a8253=_0x1ce7cb-_0x5c782a['chars'][_0x38bdd8]['height'],_0x2f4fee=-0x1727+-0xf*-0x17f+-0x3*-0x3d-_0x5c782a['chars'][_0x38bdd8]['height']/_0x120f06;return[_0x1ab1cb/_0x3a9ff1,_0x2f4fee-_0x172ef3/_0x120f06,_0x1c717e/_0x3a9ff1,_0x2f4fee-_0x3a8253/_0x120f06];}['onEnable'](){this['_fontAsset']['autoLoad']=!(-0x1c6*-0x13+-0x383*-0x1+-0x7f*0x4b),this['_model']&&this['_element']['addModelTo'+'Layers'](this['_model']);}['onDisable'](){this['_fontAsset']['autoLoad']=!(-0x1400+-0x1062+0x2463),this['_model']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']);}['_setStenci'+'l'](_0x3e3115){if(this['_model']){const _0x1a7598=this['_model']['meshInstan'+'ces'];for(let _0x284a69=0x35*-0x4+-0x223c+0x2310;_0x284a69<_0x1a7598['length'];_0x284a69++)_0x1a7598[_0x284a69]['stencilFro'+'nt']=_0x3e3115,_0x1a7598[_0x284a69]['stencilBac'+'k']=_0x3e3115;}}['_shouldAut'+'oFitWidth'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth'];}['_shouldAut'+'oFitHeight'](){return this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_shouldAut'+'oFit'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth']||this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_calculate'+'CharsPerTe'+'xture'](_0x24b64b){const _0x212f4d={};_0x24b64b===void(0x4d5*-0x1+-0xa07*0x1+0xedc)&&(_0x24b64b=this['_symbols']['length']);for(let _0x322182=0x2334+0xd*-0x257+-0x1*0x4c9,_0x4ef439=_0x24b64b;_0x322182<_0x4ef439;_0x322182++){const _0x1f618d=this['_symbols'][_0x322182];let _0x484804=this['_font']['data']['chars'][_0x1f618d];_0x484804||(_0x484804=this['_font']['data']['chars']['\x20'],_0x484804||(_0x484804=this['_font']['data']['chars'][Object['keys'](this['_font']['data']['chars'])[0x989*0x3+-0xf58+-0xd43]]));const _0x458eac=_0x484804['map'];_0x212f4d[_0x458eac]?_0x212f4d[_0x458eac]++:_0x212f4d[_0x458eac]=0x1bdc+0x400+-0x5*0x65f;}return _0x212f4d;}['_updateRen'+'derRange'](){const _0x1599f4=this['_rangeStar'+'t']===-0x1419+-0x1185+-0xd6*-0x2d?-0x5e0+-0x2690+0x3*0xed0:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeStar'+'t']),_0x31eff6=this['_rangeEnd']===-0xba*0x1c+0x5e4+0xe74?-0x1*0x223a+-0xc44*0x2+-0x1d61*-0x2:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeEnd']);for(let _0x13c21f=-0x1352+-0x7f2+0x2ba*0xa,_0x5dabcc=this['_meshInfo']['length'];_0x13c21f<_0x5dabcc;_0x13c21f++){const _0x4abab4=_0x1599f4[_0x13c21f]||-0x1249*-0x1+0x20e2+-0x332b,_0x3d0b77=_0x31eff6[_0x13c21f]||0x1184+-0x13a4+0x220,_0x1fb4bc=this['_meshInfo'][_0x13c21f]['meshInstan'+'ce'];if(_0x1fb4bc){const _0x25a4bb=_0x1fb4bc['mesh'];_0x25a4bb&&(_0x25a4bb['primitive'][-0x12a*-0x1c+-0x7*0x45d+-0x15*0x19]['base']=_0x4abab4*(0xca*0x17+0x9*-0x146+-0x6ad)*(-0x14a8+0x1b86+0x4*-0x1b7),_0x25a4bb['primitive'][0x643*-0x1+0x26d3+-0x2090]['count']=(_0x3d0b77-_0x4abab4)*(0x1*0x127d+-0x19f4+0x77a)*(-0xba*-0x1+0x124*-0xd+0x2*0x70e));}}}set['text'](_0x507bd4){this['_i18nKey']=null;const _0x998d96=_0x507bd4!=null&&_0x507bd4['toString']()||'';this['_setText'](_0x998d96);}get['text'](){return this['_text'];}set['key'](_0x1e2ca6){const _0xfdbcd=_0x1e2ca6!==null?_0x1e2ca6['toString']():null;this['_i18nKey']!==_0xfdbcd&&(this['_i18nKey']=_0xfdbcd,_0xfdbcd?(this['_fontAsset']['disableLoc'+'alization']=!(-0x18cd+-0x7e*-0x2e+-0x2*-0x115),this['_resetLoca'+'lizedText']()):this['_fontAsset']['disableLoc'+'alization']=!(0xea1+0x1c5f+0x40*-0xac));}get['key'](){return this['_i18nKey'];}set['color'](_0x3b5103){const _0x35485d=_0x3b5103['r'],_0x392814=_0x3b5103['g'],_0xd10dd=_0x3b5103['b'];if(this['_color']===_0x3b5103&&console['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t'),!(this['_color']['r']===_0x35485d&&this['_color']['g']===_0x392814&&this['_color']['b']===_0xd10dd)&&(this['_color']['r']=_0x35485d,this['_color']['g']=_0x392814,this['_color']['b']=_0xd10dd,!!this['_model'])){if(this['_symbolCol'+'ors'])this['_font']&&this['_updateTex'+'t']();else{Ve['linear'](this['_color']),this['_colorUnif'+'orm'][0x7c7*0x1+-0x1a20+-0x1259*-0x1]=Ve['r'],this['_colorUnif'+'orm'][0x2*-0xa6e+-0x149*-0xb+0x6ba]=Ve['g'],this['_colorUnif'+'orm'][-0x94f*0x2+-0x1b97+0x2e37]=Ve['b'];for(let _0x1f1d32=0x2*0x8d5+-0x996*0x4+0xa57*0x2,_0x146188=this['_model']['meshInstan'+'ces']['length'];_0x1f1d32<_0x146188;_0x1f1d32++)this['_model']['meshInstan'+'ces'][_0x1f1d32]['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}this['_element']&&this['_element']['fire']('set:color',this['_color']);}}get['color'](){return this['_color'];}set['opacity'](_0x46d14e){if(this['_color']['a']!==_0x46d14e&&(this['_color']['a']=_0x46d14e,this['_model'])){for(let _0x252646=0x745+-0x14*0x27+0x2f*-0x17,_0x4dab1d=this['_model']['meshInstan'+'ces']['length'];_0x252646<_0x4dab1d;_0x252646++)this['_model']['meshInstan'+'ces'][_0x252646]['setParamet'+'er']('material_o'+'pacity',_0x46d14e);}this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x46d14e);}get['opacity'](){return this['_color']['a'];}set['lineHeight'](_0x13543e){const _0x224e45=this['_lineHeigh'+'t'];this['_lineHeigh'+'t']=_0x13543e,this['_scaledLin'+'eHeight']=_0x13543e,_0x224e45!==_0x13543e&&this['_font']&&this['_updateTex'+'t']();}get['lineHeight'](){return this['_lineHeigh'+'t'];}set['wrapLines'](_0x3f5efb){const _0x4763ff=this['_wrapLines'];this['_wrapLines']=_0x3f5efb,_0x4763ff!==_0x3f5efb&&this['_font']&&this['_updateTex'+'t']();}get['wrapLines'](){return this['_wrapLines'];}get['lines'](){return this['_lineConte'+'nts'];}set['spacing'](_0x35e6e4){const _0x70233a=this['_spacing'];this['_spacing']=_0x35e6e4,_0x70233a!==_0x35e6e4&&this['_font']&&this['_updateTex'+'t']();}get['spacing'](){return this['_spacing'];}set['fontSize'](_0x2f8694){const _0x187d1c=this['_fontSize'];this['_fontSize']=_0x2f8694,this['_originalF'+'ontSize']=_0x2f8694,_0x187d1c!==_0x2f8694&&this['_font']&&this['_updateTex'+'t']();}get['fontSize'](){return this['_fontSize'];}set['fontAsset'](_0x101dbe){this['_fontAsset']['defaultAss'+'et']=_0x101dbe;}get['fontAsset'](){return this['_fontAsset']['localizedA'+'sset'];}set['font'](_0x5f50df){let _0x59e479;if(this['_font']&&(_0x59e479=this['_font']['type'],this['_font']['off']&&this['_font']['off']('render',this['_onFontRen'+'der'],this)),this['_font']=_0x5f50df,this['_fontMinY']=-0x2*0x10f3+-0x25df+0x13*0x3c7,this['_fontMaxY']=-0x1d58+0x1*-0x217d+0x3ed5,!_0x5f50df)return;const _0x1c5c42=this['_font']['data'];for(const _0x196e8a in _0x1c5c42['chars']){const _0x2f6187=_0x1c5c42['chars'][_0x196e8a];_0x2f6187['bounds']&&(this['_fontMinY']=Math['min'](this['_fontMinY'],_0x2f6187['bounds'][0x77*0x15+0x11e0+-0x1ba2]),this['_fontMaxY']=Math['max'](this['_fontMaxY'],_0x2f6187['bounds'][-0x1224+-0x2454+-0x367b*-0x1]));}if(this['_font']['on']&&this['_font']['on']('render',this['_onFontRen'+'der'],this),this['_fontAsset']['localizedA'+'sset']&&this['_system']['app']['assets']['get'](this['_fontAsset']['localizedA'+'sset'])['resource']!==this['_font']&&(this['_fontAsset']['defaultAss'+'et']=null),_0x5f50df['type']!==_0x59e479){const _0x199207=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x199207);}for(let _0x106dab=-0xec4+-0x1663+0x2527*0x1,_0x16c9b8=this['_font']['textures']['length'];_0x106dab<_0x16c9b8;_0x106dab++)if(!this['_meshInfo'][_0x106dab])this['_meshInfo'][_0x106dab]=new DL();else{const _0x1f994c=this['_meshInfo'][_0x106dab]['meshInstan'+'ce'];_0x1f994c&&(_0x1f994c['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x1f994c['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x1f994c['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x106dab]['width']),this['_setTextur'+'eParams'](_0x1f994c,this['_font']['textures'][_0x106dab]));}let _0x457574=!(0x37*-0x53+0x11c0+0x16*0x1);for(let _0x182cf9=this['_font']['textures']['length'];_0x182cf9<this['_meshInfo']['length'];_0x182cf9++)this['_meshInfo'][_0x182cf9]['meshInstan'+'ce']&&(_0x457574||(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),_0x457574=!(-0x17*-0xf0+-0x189d+0x30d)),this['_removeMes'+'hInstance'](this['_meshInfo'][_0x182cf9]['meshInstan'+'ce']));this['_meshInfo']['length']>this['_font']['textures']['length']&&(this['_meshInfo']['length']=this['_font']['textures']['length']),this['_updateTex'+'t']();}get['font'](){return this['_font'];}set['alignment'](_0x439b5b){_0x439b5b instanceof J?this['_alignment']['set'](_0x439b5b['x'],_0x439b5b['y']):this['_alignment']['set'](_0x439b5b[-0x159*0xb+-0x1af8+-0x29cb*-0x1],_0x439b5b[-0xaab*-0x1+0x1251+-0x1cfb]),this['_font']&&this['_updateTex'+'t']();}get['alignment'](){return this['_alignment'];}set['autoWidth'](_0x4fede6){const _0x3f3f95=this['_autoWidth'];if(this['_autoWidth']=_0x4fede6,_0x4fede6&&Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])<0x1*0x2231+-0x1b62+-0x6cf+0.0001&&(this['_element']['width']=this['width']),_0x3f3f95!==_0x4fede6){const _0x1f844b=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x1f844b!==this['_fontSize']&&(this['_fontSize']=_0x1f844b,this['_font']&&this['_updateTex'+'t']());}}get['autoWidth'](){return this['_autoWidth'];}set['autoHeight'](_0x418cc8){const _0x1c1e3a=this['_autoHeigh'+'t'];if(this['_autoHeigh'+'t']=_0x418cc8,_0x418cc8&&Math['abs'](this['_element']['anchor']['y']-this['_element']['anchor']['w'])<-0x7*0x35e+0x1175+0x61d+0.0001&&(this['_element']['height']=this['height']),_0x1c1e3a!==_0x418cc8){const _0x326395=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x326395!==this['_fontSize']&&(this['_fontSize']=_0x326395,this['_font']&&this['_updateTex'+'t']());}}get['autoHeight'](){return this['_autoHeigh'+'t'];}set['rtlReorder'](_0x574fdb){this['_rtlReorde'+'r']!==_0x574fdb&&(this['_rtlReorde'+'r']=_0x574fdb,this['_font']&&this['_updateTex'+'t']());}get['rtlReorder'](){return this['_rtlReorde'+'r'];}set['unicodeCon'+'verter'](_0x1f1842){this['_unicodeCo'+'nverter']!==_0x1f1842&&(this['_unicodeCo'+'nverter']=_0x1f1842,this['_setText'](this['_text']));}get['unicodeCon'+'verter'](){return this['_unicodeCo'+'nverter'];}get['aabb'](){if(this['_aabbDirty']){let _0x1ec2a6=!(-0xa3*-0x7+0x20db+-0x254f);for(let _0x34ccfb=-0x3*-0x2c+-0xd30+0xcac;_0x34ccfb<this['_meshInfo']['length'];_0x34ccfb++)this['_meshInfo'][_0x34ccfb]['meshInstan'+'ce']&&(_0x1ec2a6?this['_aabb']['add'](this['_meshInfo'][_0x34ccfb]['meshInstan'+'ce']['aabb']):(this['_aabb']['copy'](this['_meshInfo'][_0x34ccfb]['meshInstan'+'ce']['aabb']),_0x1ec2a6=!(-0x11*-0x245+0x80c+-0x207*0x17)));this['_aabbDirty']=!(-0xd15*0x1+0x3*0xa07+0x10ff*-0x1);}return this['_aabb'];}set['outlineCol'+'or'](_0x28322b){const _0x4eacc1=_0x28322b instanceof ie?_0x28322b['r']:_0x28322b[-0x95*0x42+0x117e*0x1+0x14ec],_0x14e7a4=_0x28322b instanceof ie?_0x28322b['g']:_0x28322b[0x5*-0x3d9+0xd5*-0x13+-0x3e5*-0x9],_0x3224ff=_0x28322b instanceof ie?_0x28322b['b']:_0x28322b[-0x7fd*0x4+-0xdc1*0x1+0x2db7],_0x4eb0e6=_0x28322b instanceof ie?_0x28322b['a']:_0x28322b[-0x5e7*-0x2+-0x1655+0x47*0x26];if(this['_outlineCo'+'lor']===_0x28322b&&console['warn']('Setting\x20el'+'ement.outl'+'ineColor\x20t'+'o\x20itself\x20w'+'ill\x20have\x20n'+'o\x20effect'),!(this['_outlineCo'+'lor']['r']===_0x4eacc1&&this['_outlineCo'+'lor']['g']===_0x14e7a4&&this['_outlineCo'+'lor']['b']===_0x3224ff&&this['_outlineCo'+'lor']['a']===_0x4eb0e6)&&(this['_outlineCo'+'lor']['r']=_0x4eacc1,this['_outlineCo'+'lor']['g']=_0x14e7a4,this['_outlineCo'+'lor']['b']=_0x3224ff,this['_outlineCo'+'lor']['a']=_0x4eb0e6,!!this['_model'])){if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{Ve['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][-0x1f79+-0x58e+0x1*0x2507]=Ve['r'],this['_outlineCo'+'lorUniform'][0x20f8+0x3*-0x1b2+0x3*-0x94b]=Ve['g'],this['_outlineCo'+'lorUniform'][0x9*-0x371+0x782+0x1779]=Ve['b'],this['_outlineCo'+'lorUniform'][0x14*-0x1ee+-0x7dc*0x2+-0x1*-0x3653]=Ve['a'];for(let _0x385316=-0xd34*-0x1+0x34a+0x107e*-0x1,_0x580177=this['_model']['meshInstan'+'ces']['length'];_0x385316<_0x580177;_0x385316++)this['_model']['meshInstan'+'ces'][_0x385316]['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']);}this['_element']&&this['_element']['fire']('set:outlin'+'e',this['_color']);}}get['outlineCol'+'or'](){return this['_outlineCo'+'lor'];}set['outlineThi'+'ckness'](_0x23146e){const _0x2895e0=this['_outlineTh'+'ickness'];if(this['_outlineTh'+'ickness']=_0x23146e,_0x2895e0!==_0x23146e&&this['_font']){if(!this['_model'])return;if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{for(let _0x25a0cd=-0x7e6*0x3+-0x13b7+0x2b69*0x1,_0x3643ef=this['_model']['meshInstan'+'ces']['length'];_0x25a0cd<_0x3643ef;_0x25a0cd++)this['_model']['meshInstan'+'ces'][_0x25a0cd]['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']);}}}get['outlineThi'+'ckness'](){return this['_outlineTh'+'ickness'];}set['shadowColo'+'r'](_0x4bb859){const _0x422789=_0x4bb859 instanceof ie?_0x4bb859['r']:_0x4bb859[0xf6*0x1e+-0x20*0x89+-0xbb4],_0x4c1a7e=_0x4bb859 instanceof ie?_0x4bb859['g']:_0x4bb859[0x48*-0x12+-0x1ea7+-0x8*-0x477],_0x1776af=_0x4bb859 instanceof ie?_0x4bb859['b']:_0x4bb859[-0x701*-0x3+0x19f9+-0x2efa],_0x851ed8=_0x4bb859 instanceof ie?_0x4bb859['a']:_0x4bb859[0x99e*-0x1+-0x71*-0x57+-0xfe*0x1d];if(this['_shadowCol'+'or']===_0x4bb859&&M['warn']('Setting\x20el'+'ement.shad'+'owColor\x20to'+'\x20itself\x20wi'+'ll\x20have\x20no'+'\x20effect'),!(this['_shadowCol'+'or']['r']===_0x422789&&this['_shadowCol'+'or']['g']===_0x4c1a7e&&this['_shadowCol'+'or']['b']===_0x1776af&&this['_shadowCol'+'or']['a']===_0x851ed8)&&(this['_shadowCol'+'or']['r']=_0x422789,this['_shadowCol'+'or']['g']=_0x4c1a7e,this['_shadowCol'+'or']['b']=_0x1776af,this['_shadowCol'+'or']['a']=_0x851ed8,!!this['_model'])){if(this['_symbolSha'+'dowParams'])this['_font']&&this['_updateTex'+'t']();else{Ve['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][-0x2*0x363+-0x165d+0x1d23]=Ve['r'],this['_shadowCol'+'orUniform'][-0x101f+0x257b+-0xb*0x1f1]=Ve['g'],this['_shadowCol'+'orUniform'][-0x1*0x18f4+-0x7*-0x1d5+0xc23]=Ve['b'],this['_shadowCol'+'orUniform'][0x14*0x197+0x1*-0x559+0x2f*-0x90]=Ve['a'];for(let _0x8b4760=0x9d4+-0x7ed+0x1e7*-0x1,_0x4a449e=this['_model']['meshInstan'+'ces']['length'];_0x8b4760<_0x4a449e;_0x8b4760++)this['_model']['meshInstan'+'ces'][_0x8b4760]['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']);}}}get['shadowColo'+'r'](){return this['_shadowCol'+'or'];}set['shadowOffs'+'et'](_0x168a46){const _0x5dc580=_0x168a46 instanceof J?_0x168a46['x']:_0x168a46[0x1704+0x11*0x133+-0x2b67],_0xb2bee5=_0x168a46 instanceof J?_0x168a46['y']:_0x168a46[0x5*0x2a8+-0x191b*0x1+0xbd4];if(!(this['_shadowOff'+'set']['x']===_0x5dc580&&this['_shadowOff'+'set']['y']===_0xb2bee5)&&(this['_shadowOff'+'set']['set'](_0x5dc580,_0xb2bee5),this['_font']&&this['_model'])){if(this['_symbolSha'+'dowParams'])this['_updateTex'+'t']();else for(let _0x5e840f=0x2356+-0x2461+0x10b,_0x1e2cd4=this['_model']['meshInstan'+'ces']['length'];_0x5e840f<_0x1e2cd4;_0x5e840f++){const _0x5a6d2e=-this['_font']['data']['info']['maps'][_0x5e840f]['width']/this['_font']['data']['info']['maps'][_0x5e840f]['height'];this['_shadowOff'+'setUniform'][0x179e+0x269b+-0x3e39]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x1bf*-0x11+-0xe*-0xcf+-0x2900]=_0x5a6d2e*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'],this['_model']['meshInstan'+'ces'][_0x5e840f]['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']);}}}get['shadowOffs'+'et'](){return this['_shadowOff'+'set'];}set['minFontSiz'+'e'](_0x3e1713){this['_minFontSi'+'ze']!==_0x3e1713&&(this['_minFontSi'+'ze']=_0x3e1713,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['minFontSiz'+'e'](){return this['_minFontSi'+'ze'];}set['maxFontSiz'+'e'](_0x4b7482){this['_maxFontSi'+'ze']!==_0x4b7482&&(this['_maxFontSi'+'ze']=_0x4b7482,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['maxFontSiz'+'e'](){return this['_maxFontSi'+'ze'];}set['autoFitWid'+'th'](_0x3674cc){this['_autoFitWi'+'dth']!==_0x3674cc&&(this['_autoFitWi'+'dth']=_0x3674cc,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitWid'+'th'](){return this['_autoFitWi'+'dth'];}set['autoFitHei'+'ght'](_0x3092b2){this['_autoFitHe'+'ight']!==_0x3092b2&&(this['_autoFitHe'+'ight']=_0x3092b2,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitHei'+'ght'](){return this['_autoFitHe'+'ight'];}set['maxLines'](_0x1afe15){this['_maxLines']!==_0x1afe15&&(_0x1afe15===null&&this['_maxLines']===-(0x1aa7+0x704+0x3e*-0x8b)||(this['_maxLines']=_0x1afe15===null?-(0x14*-0xe6+-0x1d48+-0x1*-0x2f41):_0x1afe15,this['font']&&this['_wrapLines']&&this['_updateTex'+'t']()));}get['maxLines'](){return this['_maxLines'];}set['enableMark'+'up'](_0x11feb2){if(_0x11feb2=!!_0x11feb2,this['_enableMar'+'kup']===_0x11feb2)return;this['_enableMar'+'kup']=_0x11feb2,this['font']&&this['_updateTex'+'t']();const _0x5bcddc=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x5bcddc);}get['enableMark'+'up'](){return this['_enableMar'+'kup'];}get['symbols'](){return this['_symbols'];}get['symbolColo'+'rs'](){return this['_symbolCol'+'ors']===null?null:this['_symbolCol'+'ors']['map'](function(_0xcb9d8b){return this['_colorPale'+'tte']['slice'](_0xcb9d8b*(0x206+0x13e1*0x1+-0x15e4),_0xcb9d8b*(-0x2666+-0x259e+0x4c07*0x1)+(0x92d+-0x50a*0x4+0xafe));},this);}get['symbolOutl'+'ineParams'](){return this['_symbolOut'+'lineParams']===null?null:this['_symbolOut'+'lineParams']['map'](function(_0x2e3912){return this['_outlinePa'+'lette']['slice'](_0x2e3912*(-0x8c5+0x1*-0xc2a+0x14f4),_0x2e3912*(0x151*-0x1d+-0x16b5+0x3*0x144d)+(0x15b5*0x1+0x62e*-0x5+0x936));},this);}get['symbolShad'+'owParams'](){return this['_symbolSha'+'dowParams']===null?null:this['_symbolSha'+'dowParams']['map'](function(_0x46ca37){return this['_shadowPal'+'ette']['slice'](_0x46ca37*(-0x7fc+-0x245b+0x2c5d),_0x46ca37*(-0x1dd9*0x1+-0x1559+0x3338)+(-0x2024+0x1302+-0x1*-0xd28));},this);}get['rtl'](){return this['_rtl'];}set['rangeStart'](_0x1c4c5b){_0x1c4c5b=Math['max'](-0xf06*0x2+-0x25c4*0x1+0x1b2*0x28,Math['min'](_0x1c4c5b,this['_symbols']['length'])),_0x1c4c5b!==this['_rangeStar'+'t']&&(this['_rangeStar'+'t']=_0x1c4c5b,this['_updateRen'+'derRange']());}get['rangeStart'](){return this['_rangeStar'+'t'];}set['rangeEnd'](_0x63a3bc){_0x63a3bc=Math['max'](this['_rangeStar'+'t'],Math['min'](_0x63a3bc,this['_symbols']['length'])),_0x63a3bc!==this['_rangeEnd']&&(this['_rangeEnd']=_0x63a3bc,this['_updateRen'+'derRange']());}get['rangeEnd'](){return this['_rangeEnd'];}}const qd=new I(),fg=new te(),vi=new I(),zL=new I(),_s=new te(),eh=new te(),th=new te(),La=new te();class is extends we{constructor(_0x1ffe52,_0x52aa3a){super(_0x1ffe52,_0x52aa3a),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_beingInit'+'ialized']=!(-0x22ad*-0x1+0x16c3*0x1+0x1d*-0x1fb),this['_anchor']=new ae(),this['_localAnch'+'or']=new ae(),this['_pivot']=new J(),this['_width']=this['_calculate'+'dWidth']=0x196f+-0xcd2+-0x17*0x8b,this['_height']=this['_calculate'+'dHeight']=-0x1bda+-0x1*0x8a8+-0x9*-0x412,this['_margin']=new ae(-0x1*0x1a14+0x1920+0x3d*0x4,0x1b7*-0xd+-0x251f+0x3b6a,-(0x1f53+-0xb7d+-0x9db*0x2),-(0x13*0x16a+0xcad+0x276b*-0x1)),this['_modelTran'+'sform']=new te(),this['_screenToW'+'orld']=new te(),this['_anchorTra'+'nsform']=new te(),this['_anchorDir'+'ty']=!(-0x1dbc+-0x7*-0x1ef+0x8f*0x1d),this['_parentWor'+'ldTransfor'+'m']=new te(),this['_screenTra'+'nsform']=new te(),this['_screenCor'+'ners']=[new I(),new I(),new I(),new I()],this['_canvasCor'+'ners']=[new J(),new J(),new J(),new J()],this['_worldCorn'+'ers']=[new I(),new I(),new I(),new I()],this['_cornersDi'+'rty']=!(0x9*-0x273+0xd70+0x89b),this['_canvasCor'+'nersDirty']=!(0xf89*-0x1+-0x20b3+-0x54*-0x93),this['_worldCorn'+'ersDirty']=!(0x3f1+-0x15*-0xcc+-0x4f*0x43),this['entity']['on']('insert',this['_onInsert'],this),this['_patch'](),this['screen']=null,this['_type']=xh,this['_image']=null,this['_text']=null,this['_group']=null,this['_drawOrder']=-0x1f3*-0xd+0x1*-0x19a0+0x49,this['_fitMode']=Th,this['_useInput']=!(0x6e2*0x1+0x1550+-0x7*0x407),this['_layers']=[nl],this['_addedMode'+'ls']=[],this['_batchGrou'+'pId']=-(0x6*0x4d7+-0x1*-0x23e3+0x6*-0xad2),this['_batchGrou'+'p']=null,this['_offsetRea'+'dAt']=-0x2080+-0x179c*0x1+0x381c,this['_maskOffse'+'t']=0x4*0x27a+0x91*-0x11+-0x47*0x1+0.5,this['_maskedBy']=null);}get['data'](){const _0x28c40c=this['system']['store'][this['entity']['getGuid']()];return _0x28c40c?_0x28c40c['data']:null;}set['enabled'](_0x179466){const _0x1a55d0=this['data'],_0x2c50fa=_0x1a55d0['enabled'];_0x1a55d0['enabled']=_0x179466,this['fire']('set','enabled',_0x2c50fa,_0x179466);}get['enabled'](){return this['data']['enabled'];}get['_absLeft'](){return this['_localAnch'+'or']['x']+this['_margin']['x'];}get['_absRight'](){return this['_localAnch'+'or']['z']-this['_margin']['z'];}get['_absTop'](){return this['_localAnch'+'or']['w']-this['_margin']['w'];}get['_absBottom'](){return this['_localAnch'+'or']['y']+this['_margin']['y'];}get['_hasSplitA'+'nchorsX'](){return Math['abs'](this['_anchor']['x']-this['_anchor']['z'])>-0x14c*-0x1+0x1f7a+0x347*-0xa+0.001;}get['_hasSplitA'+'nchorsY'](){return Math['abs'](this['_anchor']['y']-this['_anchor']['w'])>0x9b*-0x3a+0x1*-0x603+-0x2921*-0x1+0.001;}get['aabb'](){return this['_image']?this['_image']['aabb']:this['_text']?this['_text']['aabb']:null;}set['anchor'](_0x548103){_0x548103 instanceof ae?this['_anchor']['copy'](_0x548103):this['_anchor']['set'](..._0x548103),!this['entity']['_parent']&&!this['screen']?this['_calculate'+'LocalAncho'+'rs']():this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['_anchorDir'+'ty']=!(-0x241f+-0xd*0x20b+-0x47*-0xe2),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:anchor',this['_anchor']);}get['anchor'](){return this['_anchor'];}set['batchGroup'+'Id'](_0x394947){var _0x2bfb00,_0x5cd9a6;this['_batchGrou'+'pId']!==_0x394947&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0xe*0x1a3+0x32*-0xb4+0x3a12&&((_0x2bfb00=this['system']['app']['batcher'])==null||_0x2bfb00['remove'](mt['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x394947>=0xa6*-0x3a+0x2*0x5c6+-0xd08*-0x2&&((_0x5cd9a6=this['system']['app']['batcher'])==null||_0x5cd9a6['insert'](mt['ELEMENT'],_0x394947,this['entity'])),_0x394947<0xfa1+0x1066*-0x1+0xc5&&this['_batchGrou'+'pId']>=0x155+0x17*0x157+0x1*-0x2026&&this['enabled']&&this['entity']['enabled']&&(this['_image']&&this['_image']['_renderabl'+'e']['model']?this['addModelTo'+'Layers'](this['_image']['_renderabl'+'e']['model']):this['_text']&&this['_text']['_model']&&this['addModelTo'+'Layers'](this['_text']['_model'])),this['_batchGrou'+'pId']=_0x394947);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['bottom'](_0x4d1041){this['_margin']['y']=_0x4d1041;const _0x333f8d=this['entity']['getLocalPo'+'sition'](),_0x512b65=this['_absTop'],_0x5e01ef=this['_localAnch'+'or']['y']+_0x4d1041;this['_setHeight'](_0x512b65-_0x5e01ef),_0x333f8d['y']=_0x4d1041+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x333f8d);}get['bottom'](){return this['_margin']['y'];}set['calculated'+'Width'](_0x35ef7c){this['_setCalcul'+'atedWidth'](_0x35ef7c,!(-0x115d+-0xb14+0x1c71));}get['calculated'+'Width'](){return this['_calculate'+'dWidth'];}set['calculated'+'Height'](_0xdab4f5){this['_setCalcul'+'atedHeight'](_0xdab4f5,!(-0x248a+0x105*-0x1f+-0xda1*-0x5));}get['calculated'+'Height'](){return this['_calculate'+'dHeight'];}get['canvasCorn'+'ers'](){if(!this['_canvasCor'+'nersDirty']||!this['screen']||!this['screen']['screen']['screenSpac'+'e'])return this['_canvasCor'+'ners'];const _0x329785=this['system']['app']['graphicsDe'+'vice'],_0x1456c6=this['screenCorn'+'ers'],_0x4cd045=_0x329785['canvas']['clientWidt'+'h']/_0x329785['width'],_0x4085db=_0x329785['canvas']['clientHeig'+'ht']/_0x329785['height'];for(let _0x438c64=0x172a+-0x1*-0x8bc+-0x1fe6;_0x438c64<0x112a+-0x1*-0xf13+-0x2039;_0x438c64++)this['_canvasCor'+'ners'][_0x438c64]['set'](_0x1456c6[_0x438c64]['x']*_0x4cd045,(_0x329785['height']-_0x1456c6[_0x438c64]['y'])*_0x4085db);return this['_canvasCor'+'nersDirty']=!(0x1*-0x12d6+-0x1b3c+0x2e13),this['_canvasCor'+'ners'];}set['drawOrder'](_0x4350c5){let _0x503d5e=0x71a+-0x1b*-0x133+-0xd29*0x3;this['screen']&&(_0x503d5e=this['screen']['screen']['priority']),_0x4350c5>0x16a224c+0xda700e+-0x144925b&&(M['warn']('Element.dr'+'awOrder\x20la'+'rger\x20than\x20'+'max\x20size\x20o'+'f:\x201677721'+'5'),_0x4350c5=0x1c8e9ef*-0x1+-0x61e1ec+0x1*0x32acbda),this['_drawOrder']=(_0x503d5e<<0x1401+-0x26e2+0x12f9)+_0x4350c5,this['fire']('set:drawor'+'der',this['_drawOrder']);}get['drawOrder'](){return this['_drawOrder'];}set['height'](_0x311491){this['_height']=_0x311491,this['_hasSplitA'+'nchorsY']||this['_setCalcul'+'atedHeight'](_0x311491,!(0x7ef+0xb31+-0x1320)),this['fire']('set:height',this['_height']);}get['height'](){return this['_height'];}set['layers'](_0x3cfe9a){if(this['_addedMode'+'ls']['length'])for(let _0x3d4880=0x53a*0x3+-0x2f*-0x1b+-0x9*0x24b;_0x3d4880<this['_layers']['length'];_0x3d4880++){const _0x203bad=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x3d4880]);if(_0x203bad){for(let _0x1f734e=-0x1f05+0x12e+0x1dd7;_0x1f734e<this['_addedMode'+'ls']['length'];_0x1f734e++)_0x203bad['removeMesh'+'Instances'](this['_addedMode'+'ls'][_0x1f734e]['meshInstan'+'ces']);}}if(this['_layers']=_0x3cfe9a,!(!this['enabled']||!this['entity']['enabled']||!this['_addedMode'+'ls']['length']))for(let _0x93e333=-0x1*-0xd69+0x1*0x166+0xecf*-0x1;_0x93e333<this['_layers']['length'];_0x93e333++){const _0x58e575=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x93e333]);if(_0x58e575){for(let _0x252e63=-0x168d+-0x8*0xc2+0x1c9d;_0x252e63<this['_addedMode'+'ls']['length'];_0x252e63++)_0x58e575['addMeshIns'+'tances'](this['_addedMode'+'ls'][_0x252e63]['meshInstan'+'ces']);}}}get['layers'](){return this['_layers'];}set['left'](_0x53bd8b){this['_margin']['x']=_0x53bd8b;const _0x3291d5=this['entity']['getLocalPo'+'sition'](),_0x483948=this['_absRight'],_0x530292=this['_localAnch'+'or']['x']+_0x53bd8b;this['_setWidth'](_0x483948-_0x530292),_0x3291d5['x']=_0x53bd8b+this['_calculate'+'dWidth']*this['_pivot']['x'],this['entity']['setLocalPo'+'sition'](_0x3291d5);}get['left'](){return this['_margin']['x'];}set['margin'](_0x451478){this['_margin']['copy'](_0x451478),this['_calculate'+'Size'](!(-0x244*-0x7+0x2090+-0x306c),!(-0x18ef+-0x1cfe+0x35ed)),this['fire']('set:margin',this['_margin']);}get['margin'](){return this['_margin'];}get['maskedBy'](){return this['_maskedBy'];}set['pivot'](_0x5cb1a0){const {pivot:_0x9bf7bc,margin:_0x20b6cc}=this,_0x2783dc=_0x9bf7bc['x'],_0x685bc4=_0x9bf7bc['y'];_0x5cb1a0 instanceof J?_0x9bf7bc['copy'](_0x5cb1a0):_0x9bf7bc['set'](..._0x5cb1a0);const _0x22e2f9=_0x20b6cc['x']+_0x20b6cc['z'],_0x4b8f04=_0x9bf7bc['x']-_0x2783dc;_0x20b6cc['x']+=_0x22e2f9*_0x4b8f04,_0x20b6cc['z']-=_0x22e2f9*_0x4b8f04;const _0x3bb17d=_0x20b6cc['y']+_0x20b6cc['w'],_0x3fcccb=_0x9bf7bc['y']-_0x685bc4;_0x20b6cc['y']+=_0x3bb17d*_0x3fcccb,_0x20b6cc['w']-=_0x3bb17d*_0x3fcccb,this['_anchorDir'+'ty']=!(-0x13*-0xd6+-0x9b+-0xf47*0x1),this['_cornersDi'+'rty']=!(-0x445*-0x1+0x1937+0xcc*-0x25),this['_worldCorn'+'ersDirty']=!(0x3e3+-0x91a+0x537),this['_calculate'+'Size'](!(0x20fb+0x171d+0x53*-0xad),!(-0x1*-0x12e9+-0xa*0x11b+0x29e*-0x3)),this['_flagChild'+'renAsDirty'](),this['fire']('set:pivot',_0x9bf7bc);}get['pivot'](){return this['_pivot'];}set['right'](_0x48615f){this['_margin']['z']=_0x48615f;const _0x51b47a=this['entity']['getLocalPo'+'sition'](),_0x4aa157=this['_absLeft'],_0x3b51e0=this['_localAnch'+'or']['z']-_0x48615f;this['_setWidth'](_0x3b51e0-_0x4aa157),_0x51b47a['x']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-_0x48615f-this['_calculate'+'dWidth']*(-0x8b*0x9+-0x708+0xbec-this['_pivot']['x']),this['entity']['setLocalPo'+'sition'](_0x51b47a);}get['right'](){return this['_margin']['z'];}get['screenCorn'+'ers'](){if(!this['_cornersDi'+'rty']||!this['screen'])return this['_screenCor'+'ners'];const _0x4563d2=this['entity']['parent']&&this['entity']['parent']['element']&&this['entity']['parent']['element']['screenCorn'+'ers'][-0x2*-0xc41+0x22f*-0x11+0xc9d];this['_screenCor'+'ners'][0xcf9+-0x4f7*0x1+0xcd*-0xa]['set'](this['_absLeft'],this['_absBottom'],0x394+-0x1432+0x109e),this['_screenCor'+'ners'][-0x1cf3+-0x1cb9+0x39ad]['set'](this['_absRight'],this['_absBottom'],0xab3+-0x1*-0x26d5+0x4f4*-0xa),this['_screenCor'+'ners'][-0x213b+-0x30a+0x2447]['set'](this['_absRight'],this['_absTop'],0x3*-0x983+-0x1*0x743+0x13c*0x1d),this['_screenCor'+'ners'][0x202+0x219*-0xb+0x1514]['set'](this['_absLeft'],this['_absTop'],0x2416+0x14c*-0x5+-0x1d9a);const _0x48deb2=this['screen']['screen']['screenSpac'+'e'];for(let _0x239414=0xc9b*-0x3+0x52a+0x20a7;_0x239414<-0xd68+0xfed+-0x281;_0x239414++)this['_screenTra'+'nsform']['transformP'+'oint'](this['_screenCor'+'ners'][_0x239414],this['_screenCor'+'ners'][_0x239414]),_0x48deb2&&this['_screenCor'+'ners'][_0x239414]['mulScalar'](this['screen']['screen']['scale']),_0x4563d2&&this['_screenCor'+'ners'][_0x239414]['add'](_0x4563d2);return this['_cornersDi'+'rty']=!(-0x253a+-0x1f9b+0x44d6),this['_canvasCor'+'nersDirty']=!(0x19*0x25+0x473+0x204*-0x4),this['_worldCorn'+'ersDirty']=!(0x5bb+-0x87b+0x58*0x8),this['_screenCor'+'ners'];}get['textWidth'](){return this['_text']?this['_text']['width']:0x3*0x84b+0x1c3d+-0x351e;}get['textHeight'](){return this['_text']?this['_text']['height']:-0x16*-0xb0+-0x17*0x1b1+0x17c7;}set['top'](_0x39e32f){this['_margin']['w']=_0x39e32f;const _0x4e3e26=this['entity']['getLocalPo'+'sition'](),_0x6fcf58=this['_absBottom'],_0x56ecc8=this['_localAnch'+'or']['w']-_0x39e32f;this['_setHeight'](_0x56ecc8-_0x6fcf58),_0x4e3e26['y']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-_0x39e32f-this['_calculate'+'dHeight']*(-0xd9e+0x246b*0x1+-0x16cc-this['_pivot']['y']),this['entity']['setLocalPo'+'sition'](_0x4e3e26);}get['top'](){return this['_margin']['w'];}set['type'](_0x3c31ce){_0x3c31ce!==this['_type']&&(this['_type']=_0x3c31ce,this['_image']&&(this['_image']['destroy'](),this['_image']=null),this['_text']&&(this['_text']['destroy'](),this['_text']=null),_0x3c31ce===qf?this['_image']=new vL(this):_0x3c31ce===sv&&(this['_text']=new BL(this)));}get['type'](){return this['_type'];}set['useInput'](_0x5aacb7){this['_useInput']!==_0x5aacb7&&(this['_useInput']=_0x5aacb7,this['system']['app']['elementInp'+'ut']?_0x5aacb7?this['enabled']&&this['entity']['enabled']&&this['system']['app']['elementInp'+'ut']['addElement'](this):this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this):this['_useInput']===!(0x1*-0x1c2b+0x2560+-0x935)&&M['warn']('Elements\x20w'+'ill\x20not\x20ge'+'t\x20any\x20inpu'+'t\x20events\x20b'+'ecause\x20thi'+'s.system.a'+'pp.element'+'Input\x20is\x20n'+'ot\x20created'),this['fire']('set:useInp'+'ut',_0x5aacb7));}get['useInput'](){return this['_useInput'];}set['fitMode'](_0x1c3982){this['_fitMode']=_0x1c3982,this['_calculate'+'Size'](!(0x1*-0x1643+0x32*-0x28+0x1e13),!(-0x1553*0x1+-0xfc4*0x1+0x2517)),this['_image']&&this['_image']['refreshMes'+'h']();}get['fitMode'](){return this['_fitMode'];}set['width'](_0x18aee3){this['_width']=_0x18aee3,this['_hasSplitA'+'nchorsX']||this['_setCalcul'+'atedWidth'](_0x18aee3,!(-0x1590+-0x43d+0x1*0x19cd)),this['fire']('set:width',this['_width']);}get['width'](){return this['_width'];}get['worldCorne'+'rs'](){if(!this['_worldCorn'+'ersDirty'])return this['_worldCorn'+'ers'];if(this['screen']){const _0x3ad8dd=this['screenCorn'+'ers'];if(!this['screen']['screen']['screenSpac'+'e']){_s['copy'](this['screen']['screen']['_screenMat'+'rix']),_s['data'][0x1*-0x20a2+-0x984+0x2a33]=-_s['data'][-0x16c9+0xce5*-0x1+-0x1*-0x23bb],_s['mul2'](this['screen']['getWorldTr'+'ansform'](),_s);for(let _0x119533=-0x10c8+-0x1e2d+0x2ef5*0x1;_0x119533<-0xbed+0x5d4+0x61d*0x1;_0x119533++)_s['transformP'+'oint'](_0x3ad8dd[_0x119533],this['_worldCorn'+'ers'][_0x119533]);}}else{const _0x1e42ba=this['entity']['getLocalPo'+'sition']();_s['setTransla'+'te'](-_0x1e42ba['x'],-_0x1e42ba['y'],-_0x1e42ba['z']),eh['setTRS'](I['ZERO'],this['entity']['getLocalRo'+'tation'](),this['entity']['getLocalSc'+'ale']()),th['setTransla'+'te'](_0x1e42ba['x'],_0x1e42ba['y'],_0x1e42ba['z']);const _0x2be144=this['entity']['parent']?this['entity']['parent']:this['entity'];La['copy'](_0x2be144['getWorldTr'+'ansform']()),La['mul'](th)['mul'](eh)['mul'](_s),vi['set'](_0x1e42ba['x']-this['pivot']['x']*this['calculated'+'Width'],_0x1e42ba['y']-this['pivot']['y']*this['calculated'+'Height'],_0x1e42ba['z']),La['transformP'+'oint'](vi,this['_worldCorn'+'ers'][0x25be+-0x907*0x3+-0xaa9*0x1]),vi['set'](_0x1e42ba['x']+(-0x110f+-0x3f6+-0xea*-0x17-this['pivot']['x'])*this['calculated'+'Width'],_0x1e42ba['y']-this['pivot']['y']*this['calculated'+'Height'],_0x1e42ba['z']),La['transformP'+'oint'](vi,this['_worldCorn'+'ers'][0x16b4+-0x111f*-0x1+0x1*-0x27d2]),vi['set'](_0x1e42ba['x']+(-0x55d+0x21c2+-0x1*0x1c64-this['pivot']['x'])*this['calculated'+'Width'],_0x1e42ba['y']+(-0xbbc*-0x2+0x5*-0x15d+-0x2*0x853-this['pivot']['y'])*this['calculated'+'Height'],_0x1e42ba['z']),La['transformP'+'oint'](vi,this['_worldCorn'+'ers'][0x36e+-0x3*-0x349+-0xd47]),vi['set'](_0x1e42ba['x']-this['pivot']['x']*this['calculated'+'Width'],_0x1e42ba['y']+(0x11*0x10d+-0x9a0+0x22*-0x3e-this['pivot']['y'])*this['calculated'+'Height'],_0x1e42ba['z']),La['transformP'+'oint'](vi,this['_worldCorn'+'ers'][0x1*-0x1be3+-0x3f1+0x1fd7]);}return this['_worldCorn'+'ersDirty']=!(-0xd56+-0xd1*-0xd+0x2ba),this['_worldCorn'+'ers'];}set['fontSize'](_0x5e2805){this['_setValue']('fontSize',_0x5e2805);}get['fontSize'](){return this['_text']?this['_text']['fontSize']:null;}set['minFontSiz'+'e'](_0xcbecdc){this['_setValue']('minFontSiz'+'e',_0xcbecdc);}get['minFontSiz'+'e'](){return this['_text']?this['_text']['minFontSiz'+'e']:null;}set['maxFontSiz'+'e'](_0x446c98){this['_setValue']('maxFontSiz'+'e',_0x446c98);}get['maxFontSiz'+'e'](){return this['_text']?this['_text']['maxFontSiz'+'e']:null;}set['maxLines'](_0x22bc7b){this['_setValue']('maxLines',_0x22bc7b);}get['maxLines'](){return this['_text']?this['_text']['maxLines']:null;}set['autoFitWid'+'th'](_0x51fad7){this['_setValue']('autoFitWid'+'th',_0x51fad7);}get['autoFitWid'+'th'](){return this['_text']?this['_text']['autoFitWid'+'th']:null;}set['autoFitHei'+'ght'](_0x7d2ac2){this['_setValue']('autoFitHei'+'ght',_0x7d2ac2);}get['autoFitHei'+'ght'](){return this['_text']?this['_text']['autoFitHei'+'ght']:null;}set['color'](_0x57cf20){this['_setValue']('color',_0x57cf20);}get['color'](){return this['_text']?this['_text']['color']:this['_image']?this['_image']['color']:null;}set['font'](_0x5f6ac3){this['_setValue']('font',_0x5f6ac3);}get['font'](){return this['_text']?this['_text']['font']:null;}set['fontAsset'](_0x4939f7){this['_setValue']('fontAsset',_0x4939f7);}get['fontAsset'](){return this['_text']&&typeof this['_text']['fontAsset']=='number'?this['_text']['fontAsset']:null;}set['spacing'](_0x146f75){this['_setValue']('spacing',_0x146f75);}get['spacing'](){return this['_text']?this['_text']['spacing']:null;}set['lineHeight'](_0x2f5e3d){this['_setValue']('lineHeight',_0x2f5e3d);}get['lineHeight'](){return this['_text']?this['_text']['lineHeight']:null;}set['wrapLines'](_0x37abf8){this['_setValue']('wrapLines',_0x37abf8);}get['wrapLines'](){return this['_text']?this['_text']['wrapLines']:null;}set['lines'](_0x653f2e){this['_setValue']('lines',_0x653f2e);}get['lines'](){return this['_text']?this['_text']['lines']:null;}set['alignment'](_0x393184){this['_setValue']('alignment',_0x393184);}get['alignment'](){return this['_text']?this['_text']['alignment']:null;}set['autoWidth'](_0x2bcab0){this['_setValue']('autoWidth',_0x2bcab0);}get['autoWidth'](){return this['_text']?this['_text']['autoWidth']:null;}set['autoHeight'](_0x2008db){this['_setValue']('autoHeight',_0x2008db);}get['autoHeight'](){return this['_text']?this['_text']['autoHeight']:null;}set['rtlReorder'](_0x3d7fa0){this['_setValue']('rtlReorder',_0x3d7fa0);}get['rtlReorder'](){return this['_text']?this['_text']['rtlReorder']:null;}set['unicodeCon'+'verter'](_0x9d5262){this['_setValue']('unicodeCon'+'verter',_0x9d5262);}get['unicodeCon'+'verter'](){return this['_text']?this['_text']['unicodeCon'+'verter']:null;}set['text'](_0x3088a7){this['_setValue']('text',_0x3088a7);}get['text'](){return this['_text']?this['_text']['text']:null;}set['key'](_0x218435){this['_setValue']('key',_0x218435);}get['key'](){return this['_text']?this['_text']['key']:null;}set['texture'](_0x5ef05c){this['_setValue']('texture',_0x5ef05c);}get['texture'](){return this['_image']?this['_image']['texture']:null;}set['textureAss'+'et'](_0x51e746){this['_setValue']('textureAss'+'et',_0x51e746);}get['textureAss'+'et'](){return this['_image']?this['_image']['textureAss'+'et']:null;}set['material'](_0xb84d1d){this['_setValue']('material',_0xb84d1d);}get['material'](){return this['_image']?this['_image']['material']:null;}set['materialAs'+'set'](_0x900599){this['_setValue']('materialAs'+'set',_0x900599);}get['materialAs'+'set'](){return this['_image']?this['_image']['materialAs'+'set']:null;}set['sprite'](_0x31204d){this['_setValue']('sprite',_0x31204d);}get['sprite'](){return this['_image']?this['_image']['sprite']:null;}set['spriteAsse'+'t'](_0x45a3eb){this['_setValue']('spriteAsse'+'t',_0x45a3eb);}get['spriteAsse'+'t'](){return this['_image']?this['_image']['spriteAsse'+'t']:null;}set['spriteFram'+'e'](_0x1e8690){this['_setValue']('spriteFram'+'e',_0x1e8690);}get['spriteFram'+'e'](){return this['_image']?this['_image']['spriteFram'+'e']:null;}set['pixelsPerU'+'nit'](_0x29f03f){this['_setValue']('pixelsPerU'+'nit',_0x29f03f);}get['pixelsPerU'+'nit'](){return this['_image']?this['_image']['pixelsPerU'+'nit']:null;}set['opacity'](_0x1aef8d){this['_setValue']('opacity',_0x1aef8d);}get['opacity'](){return this['_text']?this['_text']['opacity']:this['_image']?this['_image']['opacity']:null;}set['rect'](_0x563a6e){this['_setValue']('rect',_0x563a6e);}get['rect'](){return this['_image']?this['_image']['rect']:null;}set['mask'](_0x5ccbe0){this['_setValue']('mask',_0x5ccbe0);}get['mask'](){return this['_image']?this['_image']['mask']:null;}set['outlineCol'+'or'](_0xe930a3){this['_setValue']('outlineCol'+'or',_0xe930a3);}get['outlineCol'+'or'](){return this['_text']?this['_text']['outlineCol'+'or']:null;}set['outlineThi'+'ckness'](_0x7d6a2e){this['_setValue']('outlineThi'+'ckness',_0x7d6a2e);}get['outlineThi'+'ckness'](){return this['_text']?this['_text']['outlineThi'+'ckness']:null;}set['shadowColo'+'r'](_0x4abec7){this['_setValue']('shadowColo'+'r',_0x4abec7);}get['shadowColo'+'r'](){return this['_text']?this['_text']['shadowColo'+'r']:null;}set['shadowOffs'+'et'](_0x57a83b){this['_setValue']('shadowOffs'+'et',_0x57a83b);}get['shadowOffs'+'et'](){return this['_text']?this['_text']['shadowOffs'+'et']:null;}set['enableMark'+'up'](_0x1463a0){this['_setValue']('enableMark'+'up',_0x1463a0);}get['enableMark'+'up'](){return this['_text']?this['_text']['enableMark'+'up']:null;}set['rangeStart'](_0x3b66a3){this['_setValue']('rangeStart',_0x3b66a3);}get['rangeStart'](){return this['_text']?this['_text']['rangeStart']:null;}set['rangeEnd'](_0x2c8853){this['_setValue']('rangeEnd',_0x2c8853);}get['rangeEnd'](){return this['_text']?this['_text']['rangeEnd']:null;}['_setValue'](_0x133ec5,_0x252207){this['_text']?(this['_text'][_0x133ec5]!==_0x252207&&this['_dirtyBatc'+'h'](),this['_text'][_0x133ec5]=_0x252207):this['_image']&&(this['_image'][_0x133ec5]!==_0x252207&&this['_dirtyBatc'+'h'](),this['_image'][_0x133ec5]=_0x252207);}['_patch'](){this['entity']['_sync']=this['_sync'],this['entity']['setPositio'+'n']=this['_setPositi'+'on'],this['entity']['setLocalPo'+'sition']=this['_setLocalP'+'osition'];}['_unpatch'](){this['entity']['_sync']=ot['prototype']['_sync'],this['entity']['setPositio'+'n']=ot['prototype']['setPositio'+'n'],this['entity']['setLocalPo'+'sition']=ot['prototype']['setLocalPo'+'sition'];}['_setPositi'+'on'](_0x4d2e5f,_0x4da632,_0x4da297){if(!this['element']['screen']){ot['prototype']['setPositio'+'n']['call'](this,_0x4d2e5f,_0x4da632,_0x4da297);return;}_0x4d2e5f instanceof I?qd['copy'](_0x4d2e5f):qd['set'](_0x4d2e5f,_0x4da632,_0x4da297),this['getWorldTr'+'ansform'](),fg['copy'](this['element']['_screenToW'+'orld'])['invert'](),fg['transformP'+'oint'](qd,this['localPosit'+'ion']),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_setLocalP'+'osition'](_0xd3afbd,_0x5806b7,_0x58cd19){_0xd3afbd instanceof I?this['localPosit'+'ion']['copy'](_0xd3afbd):this['localPosit'+'ion']['set'](_0xd3afbd,_0x5806b7,_0x58cd19);const _0x3f2af2=this['element'],_0x526866=this['localPosit'+'ion'],_0xfd7e03=_0x3f2af2['_pivot'];_0x3f2af2['_margin']['x']=_0x526866['x']-_0x3f2af2['_calculate'+'dWidth']*_0xfd7e03['x'],_0x3f2af2['_margin']['z']=_0x3f2af2['_localAnch'+'or']['z']-_0x3f2af2['_localAnch'+'or']['x']-_0x3f2af2['_calculate'+'dWidth']-_0x3f2af2['_margin']['x'],_0x3f2af2['_margin']['y']=_0x526866['y']-_0x3f2af2['_calculate'+'dHeight']*_0xfd7e03['y'],_0x3f2af2['_margin']['w']=_0x3f2af2['_localAnch'+'or']['w']-_0x3f2af2['_localAnch'+'or']['y']-_0x3f2af2['_calculate'+'dHeight']-_0x3f2af2['_margin']['y'],this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_sync'](){const _0x3cc2d1=this['element'],_0x176263=_0x3cc2d1['screen'];if(_0x176263){if(_0x3cc2d1['_anchorDir'+'ty']){let _0x183dfd=0xf*-0x11f+0x48f*-0x4+0x230d*0x1,_0x36221f=-0x11c2*-0x2+-0x1*0x234a+-0x3a,_0x184c20=0xa*0xa3+0x144+0x3d1*-0x2,_0x2c85c5=-0x3*-0x5+-0xc80+0xc72*0x1;if(this['_parent']&&this['_parent']['element'])_0x183dfd=this['_parent']['element']['calculated'+'Width'],_0x36221f=this['_parent']['element']['calculated'+'Height'],_0x184c20=this['_parent']['element']['pivot']['x'],_0x2c85c5=this['_parent']['element']['pivot']['y'];else{const _0x17f97e=_0x176263['screen']['resolution'];_0x183dfd=_0x17f97e['x']/_0x176263['screen']['scale'],_0x36221f=_0x17f97e['y']/_0x176263['screen']['scale'];}_0x3cc2d1['_anchorTra'+'nsform']['setTransla'+'te'](_0x183dfd*(_0x3cc2d1['anchor']['x']-_0x184c20),-(_0x36221f*(_0x2c85c5-_0x3cc2d1['anchor']['y'])),0x1*0x108a+-0x20c8+-0xb*-0x17a),_0x3cc2d1['_anchorDir'+'ty']=!(0x1*0x2579+-0x1b8c+-0x9ec),_0x3cc2d1['_calculate'+'LocalAncho'+'rs']();}_0x3cc2d1['_sizeDirty']&&_0x3cc2d1['_calculate'+'Size'](!(-0x24*0x8d+-0x7*-0x1c9+-0x756*-0x1),!(-0x118f+0x210d+0x41*-0x3d));}if(this['_dirtyLoca'+'l']){this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']);const _0x3a3224=this['localPosit'+'ion'],_0x1ec1eb=_0x3cc2d1['_pivot'];_0x3cc2d1['_margin']['x']=_0x3a3224['x']-_0x3cc2d1['_calculate'+'dWidth']*_0x1ec1eb['x'],_0x3cc2d1['_margin']['z']=_0x3cc2d1['_localAnch'+'or']['z']-_0x3cc2d1['_localAnch'+'or']['x']-_0x3cc2d1['_calculate'+'dWidth']-_0x3cc2d1['_margin']['x'],_0x3cc2d1['_margin']['y']=_0x3a3224['y']-_0x3cc2d1['_calculate'+'dHeight']*_0x1ec1eb['y'],_0x3cc2d1['_margin']['w']=_0x3cc2d1['_localAnch'+'or']['w']-_0x3cc2d1['_localAnch'+'or']['y']-_0x3cc2d1['_calculate'+'dHeight']-_0x3cc2d1['_margin']['y'],this['_dirtyLoca'+'l']=!(0x44f*-0x9+0x1*-0x225d+0x6b*0xaf);}if(!_0x176263){this['_dirtyWorl'+'d']&&(_0x3cc2d1['_cornersDi'+'rty']=!(-0xb3*-0x7+0xa6c+-0xf51),_0x3cc2d1['_canvasCor'+'nersDirty']=!(-0x13a0+-0x7d6*-0x1+0x2*0x5e5),_0x3cc2d1['_worldCorn'+'ersDirty']=!(0x1d8e+-0x148b+-0x301*0x3)),ot['prototype']['_sync']['call'](this);return;}if(this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['_parent']['element']?_0x3cc2d1['_screenToW'+'orld']['mul2'](this['_parent']['element']['_modelTran'+'sform'],_0x3cc2d1['_anchorTra'+'nsform']):_0x3cc2d1['_screenToW'+'orld']['copy'](_0x3cc2d1['_anchorTra'+'nsform']),_0x3cc2d1['_modelTran'+'sform']['mul2'](_0x3cc2d1['_screenToW'+'orld'],this['localTrans'+'form']),_0x176263){_0x3cc2d1['_screenToW'+'orld']['mul2'](_0x176263['screen']['_screenMat'+'rix'],_0x3cc2d1['_screenToW'+'orld']),_0x176263['screen']['screenSpac'+'e']||_0x3cc2d1['_screenToW'+'orld']['mul2'](_0x176263['worldTrans'+'form'],_0x3cc2d1['_screenToW'+'orld']),this['worldTrans'+'form']['mul2'](_0x3cc2d1['_screenToW'+'orld'],this['localTrans'+'form']);const _0x5d588c=_0x3cc2d1['_parentWor'+'ldTransfor'+'m'];_0x5d588c['setIdentit'+'y']();const _0x2d5666=this['_parent'];_0x2d5666&&_0x2d5666['element']&&_0x2d5666!==_0x176263&&(_s['setTRS'](I['ZERO'],_0x2d5666['getLocalRo'+'tation'](),_0x2d5666['getLocalSc'+'ale']()),_0x5d588c['mul2'](_0x2d5666['element']['_parentWor'+'ldTransfor'+'m'],_s));const _0x96942b=vi;_0x96942b['set'](-0xb5*-0x25+-0x17d*-0x2+0x1d23*-0x1,0x3*0x737+-0xab5*0x1+-0xaf0,this['localPosit'+'ion']['z']);const _0x5af166=zL;_0x5af166['set'](_0x3cc2d1['_absLeft']+_0x3cc2d1['_pivot']['x']*_0x3cc2d1['calculated'+'Width'],_0x3cc2d1['_absBottom']+_0x3cc2d1['_pivot']['y']*_0x3cc2d1['calculated'+'Height'],0xb89*0x2+0x344+-0xd2b*0x2),_s['setTransla'+'te'](-_0x5af166['x'],-_0x5af166['y'],-_0x5af166['z']),eh['setTRS'](_0x96942b,this['getLocalRo'+'tation'](),this['getLocalSc'+'ale']()),th['setTransla'+'te'](_0x5af166['x'],_0x5af166['y'],_0x5af166['z']),_0x3cc2d1['_screenTra'+'nsform']['mul2'](_0x3cc2d1['_parentWor'+'ldTransfor'+'m'],th)['mul'](eh)['mul'](_s),_0x3cc2d1['_cornersDi'+'rty']=!(-0x96a+0xfe6+-0x4*0x19f),_0x3cc2d1['_canvasCor'+'nersDirty']=!(0x9*0x89+-0x1*-0x1cd+-0x69e),_0x3cc2d1['_worldCorn'+'ersDirty']=!(-0x33d*0x9+-0x1922+0x3647);}else this['worldTrans'+'form']['copy'](_0x3cc2d1['_modelTran'+'sform']);}this['_dirtyWorl'+'d']=!(-0xfa7*0x1+0x277+0xd31);}}['_onInsert'](_0xf52a5b){const _0x82a5a6=this['_parseUpTo'+'Screen']();this['entity']['_dirtifyWo'+'rld'](),this['_updateScr'+'een'](_0x82a5a6['screen']),this['_dirtifyMa'+'sk']();}['_dirtifyMa'+'sk'](){let _0x1550ad=this['entity'];for(;_0x1550ad;){const _0x58a923=_0x1550ad['parent'];if((_0x58a923===null||_0x58a923['screen'])&&_0x1550ad['element']){(!this['system']['_prerender']||!this['system']['_prerender']['length'])&&(this['system']['_prerender']=[],this['system']['app']['once']('prerender',this['_onPrerend'+'er'],this),M['trace'](Rs,'register\x20p'+'rerender'));const _0x1a29f3=this['system']['_prerender']['indexOf'](this['entity']);_0x1a29f3>=-0x10aa+0x118f*-0x2+-0x19e4*-0x2&&this['system']['_prerender']['splice'](_0x1a29f3,0x1d2d+-0xa4*-0x29+-0x3770),this['system']['_prerender']['indexOf'](_0x1550ad)<-0x1c66+0x1eeb+-0x3*0xd7&&this['system']['_prerender']['push'](_0x1550ad),M['trace'](Rs,'set\x20preren'+'der\x20root\x20t'+'o:\x20'+_0x1550ad['name']);}_0x1550ad=_0x58a923;}}['_onPrerend'+'er'](){for(let _0x1c1f8e=-0x35c+-0x259*-0xf+-0xe9*0x23;_0x1c1f8e<this['system']['_prerender']['length'];_0x1c1f8e++){const _0x2a9edf=this['system']['_prerender'][_0x1c1f8e];M['trace'](Rs,'prerender\x20'+'from:\x20'+_0x2a9edf['name']),_0x2a9edf['element']&&_0x2a9edf['element']['syncMask'](-0xa56+-0xe90*-0x1+-0x439);}this['system']['_prerender']['length']=-0x1*0xd6+-0x779+-0x84f*-0x1;}['_bindScree'+'n'](_0x4c691c){_0x4c691c['_bindEleme'+'nt'](this);}['_unbindScr'+'een'](_0x3ea596){_0x3ea596['_unbindEle'+'ment'](this);}['_updateScr'+'een'](_0x2be50e){this['screen']&&this['screen']!==_0x2be50e&&this['_unbindScr'+'een'](this['screen']['screen']);const _0x223836=this['screen'];this['screen']=_0x2be50e,this['screen']&&this['_bindScree'+'n'](this['screen']['screen']),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('set:screen',this['screen'],_0x223836),this['_anchorDir'+'ty']=!(-0x1ffb*-0x1+-0x240f*-0x1+-0x440a*0x1);const _0x1c4366=this['entity']['children'];for(let _0x10b709=0x1*-0x2027+-0x1ebb+0x3ee2,_0x4fd409=_0x1c4366['length'];_0x10b709<_0x4fd409;_0x10b709++)_0x1c4366[_0x10b709]['element']&&_0x1c4366[_0x10b709]['element']['_updateScr'+'een'](_0x2be50e);this['screen']&&this['screen']['screen']['syncDrawOr'+'der']();}['syncMask'](_0x2bd5bc){const _0x2f2bcf=this['_parseUpTo'+'Screen']();this['_updateMas'+'k'](_0x2f2bcf['mask'],_0x2bd5bc);}['_setMasked'+'By'](_0xc6c9ae){const _0x39a8cd=this['_image']||this['_text'];if(_0xc6c9ae){const _0x4cbb5f=_0xc6c9ae['element']['_image']['_maskRef'];M['trace'](Rs,'masking:\x20'+this['entity']['name']+'\x20with\x20'+_0x4cbb5f),_0x39a8cd==null||_0x39a8cd['_setStenci'+'l'](new ai({'ref':_0x4cbb5f,'func':Lh})),this['_maskedBy']=_0xc6c9ae;}else M['trace'](Rs,'no\x20masking'+'\x20on:\x20'+this['entity']['name']),_0x39a8cd==null||_0x39a8cd['_setStenci'+'l'](null),this['_maskedBy']=null;}['_updateMas'+'k'](_0x4a273c,_0x43599d){var _0x542279,_0x7299ab;if(_0x4a273c){if(this['_setMasked'+'By'](_0x4a273c),this['mask']){const _0x1c981c=_0x4a273c['element']['_image']['_maskRef'],_0x1b984c=new ai({'ref':_0x1c981c,'func':Lh,'zpass':j0});this['_image']['_setStenci'+'l'](_0x1b984c),this['_image']['_maskRef']=_0x43599d,_0x43599d++,M['trace'](Rs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+(_0x1b984c['ref']+(-0xa44+0xdf*-0x3+0xce2))),M['trace'](Rs,'depth++\x20to'+':\x20',_0x43599d),_0x4a273c=this['entity'];}const _0x6b6d55=this['entity']['children'];for(let _0x4209f4=-0x15*-0xa+-0x1*-0xc79+-0xd4b,_0x5656e9=_0x6b6d55['length'];_0x4209f4<_0x5656e9;_0x4209f4++)(_0x542279=_0x6b6d55[_0x4209f4]['element'])==null||_0x542279['_updateMas'+'k'](_0x4a273c,_0x43599d);this['mask']&&_0x43599d--;}else{if(this['_setMasked'+'By'](null),this['mask']){const _0xa814c5=new ai({'ref':_0x43599d,'func':Ni,'zpass':q0});this['_image']['_setStenci'+'l'](_0xa814c5),this['_image']['_maskRef']=_0x43599d,_0x43599d++,M['trace'](Rs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+_0xa814c5['ref']),M['trace'](Rs,'depth++\x20to'+':\x20',_0x43599d),_0x4a273c=this['entity'];}const _0x36acd8=this['entity']['children'];for(let _0x30b66c=0x2*-0xb2d+0x11*-0xb1+0x221b,_0x50bd42=_0x36acd8['length'];_0x30b66c<_0x50bd42;_0x30b66c++)(_0x7299ab=_0x36acd8[_0x30b66c]['element'])==null||_0x7299ab['_updateMas'+'k'](_0x4a273c,_0x43599d);this['mask']&&_0x43599d--;}}['_parseUpTo'+'Screen'](){const _0x469b3f={'screen':null,'mask':null};let _0x12f744=this['entity']['_parent'];for(;_0x12f744&&!_0x12f744['screen'];)_0x12f744['element']&&_0x12f744['element']['mask']&&(_0x469b3f['mask']||(_0x469b3f['mask']=_0x12f744)),_0x12f744=_0x12f744['parent'];return _0x12f744&&_0x12f744['screen']&&(_0x469b3f['screen']=_0x12f744),_0x469b3f;}['_onScreenR'+'esize'](_0x46e750){this['_anchorDir'+'ty']=!(-0xb*-0x27b+0x534+-0x207d),this['_cornersDi'+'rty']=!(-0x70c+0x7*0xbb+0x3*0xa5),this['_worldCorn'+'ersDirty']=!(0x1*0x1454+0x21a4+-0x35f8),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('screen:set'+':resolutio'+'n',_0x46e750);}['_onScreenS'+'paceChange'](){this['fire']('screen:set'+':screenspa'+'ce',this['screen']['screen']['screenSpac'+'e']);}['_onScreenR'+'emove'](){this['screen']&&(this['screen']['_destroyin'+'g']?this['screen']=null:this['_updateScr'+'een'](null));}['_calculate'+'LocalAncho'+'rs'](){let _0x46e9a7=0xc05+-0x1a0c*0x1+0x1*0x11ef,_0x498997=-0x122b*0x1+0x1*-0x158f+0x2ba2;const _0x268333=this['entity']['_parent'];if(_0x268333&&_0x268333['element'])_0x46e9a7=_0x268333['element']['calculated'+'Width'],_0x498997=_0x268333['element']['calculated'+'Height'];else{if(this['screen']){const _0x336734=this['screen']['screen']['resolution'],_0x1b815d=this['screen']['screen']['scale'];_0x46e9a7=_0x336734['x']/_0x1b815d,_0x498997=_0x336734['y']/_0x1b815d;}}this['_localAnch'+'or']['set'](this['_anchor']['x']*_0x46e9a7,this['_anchor']['y']*_0x498997,this['_anchor']['z']*_0x46e9a7,this['_anchor']['w']*_0x498997);}['getOffsetP'+'osition'](_0x38b068,_0x127a76){const _0x280018=this['entity']['getLocalPo'+'sition']()['clone']();return _0x280018['x']+=_0x38b068,_0x280018['y']+=_0x127a76,this['_screenToW'+'orld']['transformP'+'oint'](_0x280018,_0x280018),_0x280018;}['onLayersCh'+'anged'](_0xfe67f0,_0x27f201){this['addModelTo'+'Layers'](this['_image']?this['_image']['_renderabl'+'e']['model']:this['_text']['_model']),_0xfe67f0['off']('add',this['onLayerAdd'+'ed'],this),_0xfe67f0['off']('remove',this['onLayerRem'+'oved'],this),_0x27f201['on']('add',this['onLayerAdd'+'ed'],this),_0x27f201['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x54ffa0){this['layers']['indexOf'](_0x54ffa0['id'])<-0x1957*0x1+0x614*-0x3+0x2b93||(this['_image']?_0x54ffa0['addMeshIns'+'tances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x54ffa0['addMeshIns'+'tances'](this['_text']['_model']['meshInstan'+'ces']));}['onLayerRem'+'oved'](_0x97120e){this['layers']['indexOf'](_0x97120e['id'])<0x6a2+0x33+-0x6d5||(this['_image']?_0x97120e['removeMesh'+'Instances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x97120e['removeMesh'+'Instances'](this['_text']['_model']['meshInstan'+'ces']));}['onEnable'](){var _0x2909c1;const _0x44b349=this['system']['app']['scene'],_0x5c93a8=_0x44b349['layers'];this['_image']&&this['_image']['onEnable'](),this['_text']&&this['_text']['onEnable'](),this['_group']&&this['_group']['onEnable'](),this['useInput']&&this['system']['app']['elementInp'+'ut']&&this['system']['app']['elementInp'+'ut']['addElement'](this),this['_evtLayers'+'Changed']=_0x44b349['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5c93a8&&(this['_evtLayerA'+'dded']=_0x5c93a8['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5c93a8['on']('remove',this['onLayerRem'+'oved'],this)),this['_batchGrou'+'pId']>=-0x148*-0xe+-0x86f+-0x981&&((_0x2909c1=this['system']['app']['batcher'])==null||_0x2909c1['insert'](mt['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('enableelem'+'ent');}['onDisable'](){var _0x39d504,_0x45c362,_0x4c83f4,_0x6d50be;const _0x1c5468=this['system']['app']['scene']['layers'];(_0x39d504=this['_evtLayers'+'Changed'])==null||_0x39d504['off'](),this['_evtLayers'+'Changed']=null,_0x1c5468&&((_0x45c362=this['_evtLayerA'+'dded'])==null||_0x45c362['off'](),this['_evtLayerA'+'dded']=null,(_0x4c83f4=this['_evtLayerR'+'emoved'])==null||_0x4c83f4['off'](),this['_evtLayerR'+'emoved']=null),this['_image']&&this['_image']['onDisable'](),this['_text']&&this['_text']['onDisable'](),this['_group']&&this['_group']['onDisable'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['_batchGrou'+'pId']>=-0x5*-0x6aa+0x238e+-0x2*0x2270&&((_0x6d50be=this['system']['app']['batcher'])==null||_0x6d50be['remove'](mt['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('disableele'+'ment');}['onRemove'](){this['entity']['off']('insert',this['_onInsert'],this),this['_unpatch'](),this['_image']&&this['_image']['destroy'](),this['_text']&&this['_text']['destroy'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['screen']&&this['screen']['screen']&&(this['_unbindScr'+'een'](this['screen']['screen']),this['screen']['screen']['syncDrawOr'+'der']()),this['off']();}['_calculate'+'Size'](_0x567683,_0x177d90){if(!this['entity']['_parent']&&!this['screen'])return;this['_calculate'+'LocalAncho'+'rs']();const _0x2096f3=this['_absRight']-this['_absLeft'],_0x3e7c7d=this['_absTop']-this['_absBottom'];_0x567683?this['_setWidth'](_0x2096f3):this['_setCalcul'+'atedWidth'](_0x2096f3,!(0x2*-0xd0b+-0x2ee+0x1d05)),_0x177d90?this['_setHeight'](_0x3e7c7d):this['_setCalcul'+'atedHeight'](_0x3e7c7d,!(0x213+0x13b0+-0xa*0x22d));const _0x19526c=this['entity']['getLocalPo'+'sition']();_0x19526c['x']=this['_margin']['x']+this['_calculate'+'dWidth']*this['_pivot']['x'],_0x19526c['y']=this['_margin']['y']+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x19526c),this['_sizeDirty']=!(-0x812+0x109c+-0x889);}['_setWidth'](_0x342f3e){this['_width']=_0x342f3e,this['_setCalcul'+'atedWidth'](_0x342f3e,!(0x3c4*0x3+-0xc91+0xa3*0x2)),this['fire']('set:width',this['_width']);}['_setHeight'](_0x45bf86){this['_height']=_0x45bf86,this['_setCalcul'+'atedHeight'](_0x45bf86,!(-0xbca+-0x52c+-0x2b*-0x65)),this['fire']('set:height',this['_height']);}['_setCalcul'+'atedWidth'](_0x3706df,_0x483845){if(!(Math['abs'](_0x3706df-this['_calculate'+'dWidth'])<=-0x2*0x3e3+-0x7*0x389+0xad7*0x3+0.0001)){if(this['_calculate'+'dWidth']=_0x3706df,this['entity']['_dirtifyLo'+'cal'](),_0x483845){const _0x4e6a6c=this['entity']['getLocalPo'+'sition'](),_0x47404a=this['_pivot'];this['_margin']['x']=_0x4e6a6c['x']-this['_calculate'+'dWidth']*_0x47404a['x'],this['_margin']['z']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-this['_calculate'+'dWidth']-this['_margin']['x'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedWidth',this['_calculate'+'dWidth']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_setCalcul'+'atedHeight'](_0x14cdc0,_0x3e5b76){if(!(Math['abs'](_0x14cdc0-this['_calculate'+'dHeight'])<=-0xaf4*0x2+-0x43c*-0x4+0x4f8+0.0001)){if(this['_calculate'+'dHeight']=_0x14cdc0,this['entity']['_dirtifyLo'+'cal'](),_0x3e5b76){const _0x2221f6=this['entity']['getLocalPo'+'sition'](),_0x5e110d=this['_pivot'];this['_margin']['y']=_0x2221f6['y']-this['_calculate'+'dHeight']*_0x5e110d['y'],this['_margin']['w']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-this['_calculate'+'dHeight']-this['_margin']['y'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedHeight',this['_calculate'+'dHeight']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_flagChild'+'renAsDirty'](){const _0x3bb3d7=this['entity']['_children'];for(let _0x3be9e1=-0x3f1*-0x1+0x166*-0x3+-0x1*-0x41,_0xece5a=_0x3bb3d7['length'];_0x3be9e1<_0xece5a;_0x3be9e1++)_0x3bb3d7[_0x3be9e1]['element']&&(_0x3bb3d7[_0x3be9e1]['element']['_anchorDir'+'ty']=!(0x1634+0xb49+-0x1*0x217d),_0x3bb3d7[_0x3be9e1]['element']['_sizeDirty']=!(-0xb00+0x12f2+-0x2*0x3f9));}['addModelTo'+'Layers'](_0x2585d3){this['_addedMode'+'ls']['push'](_0x2585d3);for(let _0x406748=0x1*-0x4bc+0x32a*0x7+0x2e7*-0x6;_0x406748<this['layers']['length'];_0x406748++){const _0x50df9b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x406748]);_0x50df9b&&_0x50df9b['addMeshIns'+'tances'](_0x2585d3['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](_0x5b3a19){const _0x51eefc=this['_addedMode'+'ls']['indexOf'](_0x5b3a19);_0x51eefc>=0x1f39+0x19*-0x175+0x534&&this['_addedMode'+'ls']['splice'](_0x51eefc,0x1c71+0x3a*0x3a+-0x2994);for(let _0xda158f=-0x1835+-0x1*0x7d+0x18b2;_0xda158f<this['layers']['length'];_0xda158f++){const _0x10aa5f=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0xda158f]);_0x10aa5f&&_0x10aa5f['removeMesh'+'Instances'](_0x5b3a19['meshInstan'+'ces']);}}['getMaskOff'+'set'](){const _0x463c87=this['system']['app']['frame'];this['_offsetRea'+'dAt']!==_0x463c87&&(this['_maskOffse'+'t']=0x1dc1*0x1+0x1b*0x86+-0x2be3+0.5,this['_offsetRea'+'dAt']=_0x463c87);const _0xf83a99=this['_maskOffse'+'t'];return this['_maskOffse'+'t']-=0x96b+0x1*0x1711+-0x207c+0.001,_0xf83a99;}['isVisibleF'+'orCamera'](_0x5df536){let _0x224e08,_0xa63023,_0x422bd0,_0x571d49;if(this['maskedBy']){const _0x906142=this['maskedBy']['element']['screenCorn'+'ers'];_0x224e08=Math['min'](Math['min'](_0x906142[-0x10b0+-0x163*0x3+0x14d9]['x'],_0x906142[-0x6*0x359+0x1*0x24d4+0x5*-0x359]['x']),Math['min'](_0x906142[0xf5c+0x2e*-0xc9+-0x4*-0x531]['x'],_0x906142[-0xc3b+0x1ac+-0x29*-0x42]['x'])),_0xa63023=Math['max'](Math['max'](_0x906142[-0x808+-0x16d7+0x1edf]['x'],_0x906142[0x1e1f*-0x1+0xc14+0x120c]['x']),Math['max'](_0x906142[0x1dcd+0xac*-0x1d+-0x1*0xa4f]['x'],_0x906142[-0x746*0x2+0x21c0*-0x1+0x53*0x95]['x'])),_0x571d49=Math['min'](Math['min'](_0x906142[-0x4*-0x796+-0x1406*0x1+-0x529*0x2]['y'],_0x906142[-0x631+-0x1383+0x1*0x19b5]['y']),Math['min'](_0x906142[0x238c+0x139+-0x24c3]['y'],_0x906142[-0x81e*0x3+0x260d*0x1+-0xdb0]['y'])),_0x422bd0=Math['max'](Math['max'](_0x906142[0x22f9+0xa*-0x15d+0x25f*-0x9]['y'],_0x906142[0x2fb+0x105a+0x1354*-0x1]['y']),Math['max'](_0x906142[0x1*0x2060+0x645*0x3+-0x332d]['y'],_0x906142[0x1*0x166b+0x2661+-0x3cc9]['y']));}else{const _0x43ce03=this['system']['app']['graphicsDe'+'vice']['width'],_0x1f9c95=this['system']['app']['graphicsDe'+'vice']['height'],_0x2f7439=_0x5df536['_rect']['z']*_0x43ce03,_0x4bf3fb=_0x5df536['_rect']['w']*_0x1f9c95;_0x224e08=_0x5df536['_rect']['x']*_0x43ce03,_0xa63023=_0x224e08+_0x2f7439,_0x422bd0=(0x5bd*0x4+-0x1*0x29b+-0x1458-_0x5df536['_rect']['y'])*_0x1f9c95,_0x571d49=_0x422bd0-_0x4bf3fb;}const _0x13d7db=this['screenCorn'+'ers'],_0x44ff1e=Math['min'](Math['min'](_0x13d7db[-0x168*-0xf+-0x5*-0x6df+-0x3773]['x'],_0x13d7db[-0x217f+0xa93+0x16ed]['x']),Math['min'](_0x13d7db[-0xae8+0x17*0x11b+-0x5*0x2e7]['x'],_0x13d7db[-0x1467+0x7cd+-0xc9d*-0x1]['x'])),_0x236501=Math['max'](Math['max'](_0x13d7db[-0x2045+-0x21b6+0x41fb]['x'],_0x13d7db[0x25fe+-0x1c8f+-0x96e]['x']),Math['max'](_0x13d7db[0x188*-0x13+-0x4b2+0x1*0x21cc]['x'],_0x13d7db[-0x1c*0x68+-0x445*-0x1+0x2*0x38f]['x'])),_0x177fb5=Math['min'](Math['min'](_0x13d7db[0x106*-0x24+-0x1*-0x2419+0x1*0xbf]['y'],_0x13d7db[-0xb33+0x244a+-0x1916]['y']),Math['min'](_0x13d7db[-0xb*0x13f+-0x6d*-0x3f+-0xd1c*0x1]['y'],_0x13d7db[0x22f7*-0x1+-0x2bd+0x25b7]['y'])),_0x27f664=Math['max'](Math['max'](_0x13d7db[-0x1e*0xf3+0x1*-0x1346+0x2fc0]['y'],_0x13d7db[-0x57e+0x62f+-0xb0]['y']),Math['max'](_0x13d7db[-0x9c5+-0x540*-0x2+-0xb9]['y'],_0x13d7db[0x78d*-0x5+-0x80e*-0x2+0x15a8]['y']));return!(_0x236501<_0x224e08||_0x44ff1e>_0xa63023||_0x177fb5>_0x422bd0||_0x27f664<_0x571d49);}['_isScreenS'+'pace'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['screenSpac'+'e']:!(0x1691*-0x1+0x119*-0x21+0x3acb);}['_isScreenC'+'ulled'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['cull']:!(0x1f65+-0x1*0xaa6+0x375*-0x6);}['_dirtyBatc'+'h'](){var _0x59747f;this['batchGroup'+'Id']!==-(0x242c+0x1*0xab5+-0x12c*0x28)&&((_0x59747f=this['system']['app']['batcher'])==null||_0x59747f['markGroupD'+'irty'](this['batchGroup'+'Id']));}}h(is,'EVENT_MOUS'+'EDOWN','mousedown'),h(is,'EVENT_MOUS'+'EUP','mouseup'),h(is,'EVENT_MOUS'+'EENTER','mouseenter'),h(is,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(is,'EVENT_MOUS'+'EMOVE','mousemove'),h(is,'EVENT_MOUS'+'EWHEEL','mousewheel'),h(is,'EVENT_CLIC'+'K','click'),h(is,'EVENT_TOUC'+'HSTART','touchstart'),h(is,'EVENT_TOUC'+'HEND','touchend'),h(is,'EVENT_TOUC'+'HMOVE','touchmove'),h(is,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');class VL{constructor(){this['enabled']=!(0x1aa0+0xe9+0x85*-0x35);}}const GL=['enabled'];class HL extends lt{constructor(_0x2c4df9){super(_0x2c4df9),this['id']='element',this['ComponentT'+'ype']=is,this['DataType']=VL,this['schema']=GL,this['_unicodeCo'+'nverter']=null,this['_rtlReorde'+'r']=null,this['_defaultTe'+'xture']=new _e(_0x2c4df9['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':hs,'name':'element-sy'+'stem'});const _0x1c29e1=this['_defaultTe'+'xture']['lock'](),_0x4ae097=new Uint8Array(-0x1c7b+-0x7*-0x454+0x1cd*-0x1);_0x4ae097[-0x5*0x5ea+0x305+0x3cb*0x7]=-0x12cd+0x9*0x4a+0x1132,_0x4ae097[0x1*0x3ee+-0x260c+0x5*0x6d3]=-0x1bf8+-0x1abf+-0x6*-0x949,_0x4ae097[-0x1e79*0x1+0x1*0x25c3+-0x4*0x1d2]=-0x32*-0xa6+-0x7ef*-0x4+0x1*-0x3f29,_0x4ae097[-0x3*0x56+-0xa*0x145+0x1*0xdb7]=-0xee*0x6+-0x11c2+-0x1855*-0x1,_0x1c29e1['set'](_0x4ae097),this['_defaultTe'+'xture']['unlock'](),this['defaultIma'+'geMaterial']=null,this['defaultIma'+'ge9SlicedM'+'aterial']=null,this['defaultIma'+'ge9TiledMa'+'terial']=null,this['defaultIma'+'geMaskMate'+'rial']=null,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=null,this['defaultIma'+'ge9TiledMa'+'skMaterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=null,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=null,this['_defaultTe'+'xtMaterial'+'s']={},this['defaultIma'+'geMaterial'+'s']=[],this['on']('add',this['onAddCompo'+'nent'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['destroy'](){super['destroy'](),this['_defaultTe'+'xture']['destroy']();}['initialize'+'ComponentD'+'ata'](_0x22b0e1,_0x1c8b7f,_0x455d40){_0x22b0e1['_beingInit'+'ialized']=!(-0x9*-0x35e+-0x4*0x140+0xca7*-0x2),_0x1c8b7f['anchor']!==void(-0x107c+0x1*0x4f+-0x65*-0x29)&&(_0x1c8b7f['anchor']instanceof ae?_0x22b0e1['anchor']['copy'](_0x1c8b7f['anchor']):_0x22b0e1['anchor']['set'](_0x1c8b7f['anchor'][0x1fe6+-0x1576+-0x29c*0x4],_0x1c8b7f['anchor'][-0x664+-0x2c*0x71+-0x19d1*-0x1],_0x1c8b7f['anchor'][-0x7de+0x2564+-0xec2*0x2],_0x1c8b7f['anchor'][-0x1353+0x2*0xf1a+0x56f*-0x2])),_0x1c8b7f['pivot']!==void(-0x150a+0x1308*-0x2+0xaa*0x59)&&(_0x1c8b7f['pivot']instanceof J?_0x22b0e1['pivot']['copy'](_0x1c8b7f['pivot']):_0x22b0e1['pivot']['set'](_0x1c8b7f['pivot'][0xbb9+0x25f3+-0x31ac],_0x1c8b7f['pivot'][0xb*0x10f+-0x2*0x7aa+0x3b0]));const _0x16987a=Math['abs'](_0x22b0e1['anchor']['x']-_0x22b0e1['anchor']['z'])>-0x872+-0x774+0x2*0x7f3+0.001,_0x16f609=Math['abs'](_0x22b0e1['anchor']['y']-_0x22b0e1['anchor']['w'])>-0x4dc*0x8+-0xe*-0x2aa+0x194+0.001;let _0x35b90f=!(0x4*0x702+0xe72+0x2a79*-0x1),_0x180b82;_0x1c8b7f['margin']!==void(-0x515+-0x12e6+0x17fb*0x1)&&(_0x1c8b7f['margin']instanceof ae?_0x22b0e1['margin']['copy'](_0x1c8b7f['margin']):_0x22b0e1['_margin']['set'](_0x1c8b7f['margin'][-0x1e02+-0x1*-0xf1f+-0x25*-0x67],_0x1c8b7f['margin'][-0xe*0x14f+0x193c+-0x6e9],_0x1c8b7f['margin'][-0x1*-0x3f1+-0x10b6+0xcc7],_0x1c8b7f['margin'][-0x1dd8+-0x1810+-0x1*-0x35eb]),_0x35b90f=!(0x153b+0xd7b+-0x3*0xb92)),_0x1c8b7f['left']!==void(-0xd0e+0x2*-0xa50+0x21ae)&&(_0x22b0e1['_margin']['x']=_0x1c8b7f['left'],_0x35b90f=!(0x235a+-0xb4e+-0x201*0xc)),_0x1c8b7f['bottom']!==void(0x8*-0x1ef+-0x2281+-0x1*-0x31f9)&&(_0x22b0e1['_margin']['y']=_0x1c8b7f['bottom'],_0x35b90f=!(0x217d+0x11*0x193+-0x3c40)),_0x1c8b7f['right']!==void(-0x4c5+0x17c7+-0x1302)&&(_0x22b0e1['_margin']['z']=_0x1c8b7f['right'],_0x35b90f=!(0x4+0x18b8+-0x18bc)),_0x1c8b7f['top']!==void(0x11ff*0x1+0x62f*-0x2+-0x83*0xb)&&(_0x22b0e1['_margin']['w']=_0x1c8b7f['top'],_0x35b90f=!(0x98+0x188f*0x1+-0x1927*0x1)),_0x35b90f&&(_0x22b0e1['margin']=_0x22b0e1['_margin']);let _0x31e181=!(0x207e*-0x1+0xb*-0x2ae+0x3df9);_0x1c8b7f['width']!==void(-0xc95*0x1+-0x6*-0x531+0x2a7*-0x7)&&!_0x16987a?_0x22b0e1['width']=_0x1c8b7f['width']:_0x16987a&&(_0x31e181=!(0x1581+-0x18da*0x1+0x359*0x1)),_0x1c8b7f['height']!==void(0x317+0x1820+-0x1b37*0x1)&&!_0x16f609?_0x22b0e1['height']=_0x1c8b7f['height']:_0x16f609&&(_0x31e181=!(0x7bd*0x1+-0x10*0xfe+0x823*0x1)),_0x31e181&&(_0x22b0e1['anchor']=_0x22b0e1['anchor']),_0x1c8b7f['enabled']!==void(0x74b+-0x94c+0x201)&&(_0x22b0e1['enabled']=_0x1c8b7f['enabled']),_0x1c8b7f['useInput']!==void(0xbaf*0x1+-0x1*0x2123+0x1574)&&(_0x22b0e1['useInput']=_0x1c8b7f['useInput']),_0x1c8b7f['fitMode']!==void(-0x3*0x9a5+0x1606+-0x3d*-0x1d)&&(_0x22b0e1['fitMode']=_0x1c8b7f['fitMode']),_0x22b0e1['batchGroup'+'Id']=_0x1c8b7f['batchGroup'+'Id']===void(-0x1f1d+0x117+0x15*0x16e)||_0x1c8b7f['batchGroup'+'Id']===null?-(-0x122+-0x1*-0xb99+-0xa76):_0x1c8b7f['batchGroup'+'Id'],_0x1c8b7f['layers']&&Array['isArray'](_0x1c8b7f['layers'])&&(_0x22b0e1['layers']=_0x1c8b7f['layers']['slice'](0x243e+-0x587*-0x5+-0x3fe1)),_0x1c8b7f['type']!==void(0xe3+-0xfe2*-0x2+-0xd*0x283)&&(_0x22b0e1['type']=_0x1c8b7f['type']),_0x22b0e1['type']===qf?(_0x1c8b7f['rect']!==void(-0x2a3+0x47a+-0x1d7)&&(_0x22b0e1['rect']=_0x1c8b7f['rect']),_0x1c8b7f['color']!==void(-0x1a9*-0x7+-0xba0+0x1)&&(_0x180b82=_0x1c8b7f['color'],_0x180b82 instanceof ie||(_0x180b82=new ie(_0x1c8b7f['color'][-0x1a9a+0x146*-0x8+0x24ca],_0x1c8b7f['color'][-0x26eb+0x51c+0x2*0x10e8],_0x1c8b7f['color'][0xd5+0x7ff+-0x8d2])),_0x22b0e1['color']=_0x180b82),_0x1c8b7f['opacity']!==void(0xe*0x291+0x10da+0x1*-0x34c8)&&(_0x22b0e1['opacity']=_0x1c8b7f['opacity']),_0x1c8b7f['textureAss'+'et']!==void(0xb6a*0x1+0x1c0e+-0x3*0xd28)&&(_0x22b0e1['textureAss'+'et']=_0x1c8b7f['textureAss'+'et']),_0x1c8b7f['texture']&&(_0x22b0e1['texture']=_0x1c8b7f['texture']),_0x1c8b7f['spriteAsse'+'t']!==void(0x80c+-0x1fc3+0x17b7)&&(_0x22b0e1['spriteAsse'+'t']=_0x1c8b7f['spriteAsse'+'t']),_0x1c8b7f['sprite']&&(_0x22b0e1['sprite']=_0x1c8b7f['sprite']),_0x1c8b7f['spriteFram'+'e']!==void(0x1b*-0x8d+0x1d*-0x29+0x9c2*0x2)&&(_0x22b0e1['spriteFram'+'e']=_0x1c8b7f['spriteFram'+'e']),_0x1c8b7f['pixelsPerU'+'nit']!==void(-0x449*0x1+0x1aac+-0x1663*0x1)&&_0x1c8b7f['pixelsPerU'+'nit']!==null&&(_0x22b0e1['pixelsPerU'+'nit']=_0x1c8b7f['pixelsPerU'+'nit']),_0x1c8b7f['materialAs'+'set']!==void(-0xe32*-0x1+0xa5c+-0x188e)&&(_0x22b0e1['materialAs'+'set']=_0x1c8b7f['materialAs'+'set']),_0x1c8b7f['material']&&(_0x22b0e1['material']=_0x1c8b7f['material']),_0x1c8b7f['mask']!==void(-0x16c6+0x2333+-0xc6d)&&(_0x22b0e1['mask']=_0x1c8b7f['mask'])):_0x22b0e1['type']===sv&&(_0x1c8b7f['autoWidth']!==void(-0x333*0xc+-0x2047+0x46ab)&&(_0x22b0e1['autoWidth']=_0x1c8b7f['autoWidth']),_0x1c8b7f['autoHeight']!==void(-0x4bd+0x4*0x765+-0x1*0x18d7)&&(_0x22b0e1['autoHeight']=_0x1c8b7f['autoHeight']),_0x1c8b7f['rtlReorder']!==void(-0x1fa8+0x1e4d+-0x1*-0x15b)&&(_0x22b0e1['rtlReorder']=_0x1c8b7f['rtlReorder']),_0x1c8b7f['unicodeCon'+'verter']!==void(-0x22b+-0x11e*0xc+-0x531*-0x3)&&(_0x22b0e1['unicodeCon'+'verter']=_0x1c8b7f['unicodeCon'+'verter']),_0x1c8b7f['text']!==null&&_0x1c8b7f['text']!==void(-0x167*-0x2+-0x1de1+-0x1b13*-0x1)?_0x22b0e1['text']=_0x1c8b7f['text']:_0x1c8b7f['key']!==null&&_0x1c8b7f['key']!==void(-0x2522+0x26b7+0x1b*-0xf)&&(_0x22b0e1['key']=_0x1c8b7f['key']),_0x1c8b7f['color']!==void(-0x36*0x4f+0xe1c+0x28e)&&(_0x180b82=_0x1c8b7f['color'],_0x180b82 instanceof ie||(_0x180b82=new ie(_0x180b82[-0x25df+-0x20f9*-0x1+0x4e6],_0x180b82[-0x1f*0x56+0x7e2+0x289],_0x180b82[-0x6f9+0x88c+-0x191])),_0x22b0e1['color']=_0x180b82),_0x1c8b7f['opacity']!==void(0x168b+0x1cea+-0x3375)&&(_0x22b0e1['opacity']=_0x1c8b7f['opacity']),_0x1c8b7f['spacing']!==void(-0x1*-0x26a2+-0x202c+-0x676)&&(_0x22b0e1['spacing']=_0x1c8b7f['spacing']),_0x1c8b7f['fontSize']!==void(0x2*-0xf92+-0xb2c+0x2a5*0x10)&&(_0x22b0e1['fontSize']=_0x1c8b7f['fontSize'],_0x1c8b7f['lineHeight']||(_0x22b0e1['lineHeight']=_0x1c8b7f['fontSize'])),_0x1c8b7f['lineHeight']!==void(-0x17fc+-0x1125+0x2921)&&(_0x22b0e1['lineHeight']=_0x1c8b7f['lineHeight']),_0x1c8b7f['maxLines']!==void(-0xc01+0x3c+-0x83*-0x17)&&(_0x22b0e1['maxLines']=_0x1c8b7f['maxLines']),_0x1c8b7f['wrapLines']!==void(0x1fca+0x1b4*0xa+0x2*-0x1869)&&(_0x22b0e1['wrapLines']=_0x1c8b7f['wrapLines']),_0x1c8b7f['minFontSiz'+'e']!==void(0x10b8*-0x1+0x1297+0x1*-0x1df)&&(_0x22b0e1['minFontSiz'+'e']=_0x1c8b7f['minFontSiz'+'e']),_0x1c8b7f['maxFontSiz'+'e']!==void(0x102e*-0x1+0xbbf+0x46f)&&(_0x22b0e1['maxFontSiz'+'e']=_0x1c8b7f['maxFontSiz'+'e']),_0x1c8b7f['autoFitWid'+'th']&&(_0x22b0e1['autoFitWid'+'th']=_0x1c8b7f['autoFitWid'+'th']),_0x1c8b7f['autoFitHei'+'ght']&&(_0x22b0e1['autoFitHei'+'ght']=_0x1c8b7f['autoFitHei'+'ght']),_0x1c8b7f['fontAsset']!==void(-0xa29*0x3+0x16cb+0x7b*0x10)&&(_0x22b0e1['fontAsset']=_0x1c8b7f['fontAsset']),_0x1c8b7f['font']!==void(-0x2*0x9eb+0x17af*-0x1+-0x2b85*-0x1)&&(_0x22b0e1['font']=_0x1c8b7f['font']),_0x1c8b7f['alignment']!==void(0x1*-0x156c+0x1e73+-0x907)&&(_0x22b0e1['alignment']=_0x1c8b7f['alignment']),_0x1c8b7f['outlineCol'+'or']!==void(0x772+0x1507*0x1+-0x1*0x1c79)&&(_0x22b0e1['outlineCol'+'or']=_0x1c8b7f['outlineCol'+'or']),_0x1c8b7f['outlineThi'+'ckness']!==void(-0x224c+0x1*-0x2655+0x48a1*0x1)&&(_0x22b0e1['outlineThi'+'ckness']=_0x1c8b7f['outlineThi'+'ckness']),_0x1c8b7f['shadowColo'+'r']!==void(0x13f3+-0x241*0x1+0x97*-0x1e)&&(_0x22b0e1['shadowColo'+'r']=_0x1c8b7f['shadowColo'+'r']),_0x1c8b7f['shadowOffs'+'et']!==void(-0x1*-0x9f3+0xc7*0x1f+-0x2*0x1106)&&(_0x22b0e1['shadowOffs'+'et']=_0x1c8b7f['shadowOffs'+'et']),_0x1c8b7f['enableMark'+'up']!==void(0xa97*0x1+-0x775+-0x322)&&(_0x22b0e1['enableMark'+'up']=_0x1c8b7f['enableMark'+'up']));const _0x18ce89=_0x22b0e1['_parseUpTo'+'Screen']();_0x18ce89['screen']&&_0x22b0e1['_updateScr'+'een'](_0x18ce89['screen']),super['initialize'+'ComponentD'+'ata'](_0x22b0e1,_0x1c8b7f,_0x455d40),_0x22b0e1['_beingInit'+'ialized']=!(0x52e+0x2192+-0x26bf),_0x22b0e1['type']===qf&&_0x22b0e1['_image']['_meshDirty']&&_0x22b0e1['_image']['_updateMes'+'h'](_0x22b0e1['_image']['mesh']);}['onAddCompo'+'nent'](_0x19a9f3,_0x103008){_0x19a9f3['fire']('element:ad'+'d');}['onRemoveCo'+'mponent'](_0x2d515f,_0x490a66){_0x490a66['onRemove']();}['cloneCompo'+'nent'](_0x59a26a,_0x49581e){const _0x42a35c=_0x59a26a['element'],_0xad9e52={'enabled':_0x42a35c['enabled'],'width':_0x42a35c['width'],'height':_0x42a35c['height'],'anchor':_0x42a35c['anchor']['clone'](),'pivot':_0x42a35c['pivot']['clone'](),'margin':_0x42a35c['margin']['clone'](),'alignment':_0x42a35c['alignment']&&_0x42a35c['alignment']['clone']()||_0x42a35c['alignment'],'autoWidth':_0x42a35c['autoWidth'],'autoHeight':_0x42a35c['autoHeight'],'type':_0x42a35c['type'],'rect':_0x42a35c['rect']&&_0x42a35c['rect']['clone']()||_0x42a35c['rect'],'rtlReorder':_0x42a35c['rtlReorder'],'unicodeConverter':_0x42a35c['unicodeCon'+'verter'],'materialAsset':_0x42a35c['materialAs'+'set'],'material':_0x42a35c['material'],'color':_0x42a35c['color']&&_0x42a35c['color']['clone']()||_0x42a35c['color'],'opacity':_0x42a35c['opacity'],'textureAsset':_0x42a35c['textureAss'+'et'],'texture':_0x42a35c['texture'],'spriteAsset':_0x42a35c['spriteAsse'+'t'],'sprite':_0x42a35c['sprite'],'spriteFrame':_0x42a35c['spriteFram'+'e'],'pixelsPerUnit':_0x42a35c['pixelsPerU'+'nit'],'spacing':_0x42a35c['spacing'],'lineHeight':_0x42a35c['lineHeight'],'wrapLines':_0x42a35c['wrapLines'],'layers':_0x42a35c['layers'],'fontSize':_0x42a35c['fontSize'],'minFontSize':_0x42a35c['minFontSiz'+'e'],'maxFontSize':_0x42a35c['maxFontSiz'+'e'],'autoFitWidth':_0x42a35c['autoFitWid'+'th'],'autoFitHeight':_0x42a35c['autoFitHei'+'ght'],'maxLines':_0x42a35c['maxLines'],'fontAsset':_0x42a35c['fontAsset'],'font':_0x42a35c['font'],'useInput':_0x42a35c['useInput'],'fitMode':_0x42a35c['fitMode'],'batchGroupId':_0x42a35c['batchGroup'+'Id'],'mask':_0x42a35c['mask'],'outlineColor':_0x42a35c['outlineCol'+'or']&&_0x42a35c['outlineCol'+'or']['clone']()||_0x42a35c['outlineCol'+'or'],'outlineThickness':_0x42a35c['outlineThi'+'ckness'],'shadowColor':_0x42a35c['shadowColo'+'r']&&_0x42a35c['shadowColo'+'r']['clone']()||_0x42a35c['shadowColo'+'r'],'shadowOffset':_0x42a35c['shadowOffs'+'et']&&_0x42a35c['shadowOffs'+'et']['clone']()||_0x42a35c['shadowOffs'+'et'],'enableMarkup':_0x42a35c['enableMark'+'up']};return _0x42a35c['key']!==void(-0xc33+0x13*-0x1bf+0x2d60)&&_0x42a35c['key']!==null?_0xad9e52['key']=_0x42a35c['key']:_0xad9e52['text']=_0x42a35c['text'],this['addCompone'+'nt'](_0x49581e,_0xad9e52);}['getTextEle'+'mentMateri'+'al'](_0x5834cd,_0x1cf03d,_0x3c8ea0){const _0x5d0ead=(_0x5834cd&&-0x1*0x1786+0xf36+0x851)|(_0x1cf03d&&-0x1112+-0x2b5*0x8+0x26bc)|(_0x3c8ea0&&-0x2*0xa22+0x1a8*-0x8+-0x128*-0x1d);let _0xb2d100=this['_defaultTe'+'xtMaterial'+'s'][_0x5d0ead];if(_0xb2d100)return _0xb2d100;let _0x506df1='TextMateri'+'al';return _0xb2d100=new ws(),_0x1cf03d?(_0xb2d100['msdfMap']=this['_defaultTe'+'xture'],_0xb2d100['msdfTextAt'+'tribute']=_0x3c8ea0,_0xb2d100['emissive']['set'](0xec2*-0x2+0xf89+0xdfc,-0x1666+0x74f*0x1+0xf18,-0x18a*-0x2+-0x6d*0x4d+0x1db6)):(_0x506df1='Bitmap'+_0x506df1,_0xb2d100['emissive']['set'](-0x1a62+0x60e+0x1455,-0x30*0xa4+-0x1*-0x1fe7+-0x126,-0x5*-0x36d+-0xc5*0x4+0x2*-0x706),_0xb2d100['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0xb2d100['opacityMap']=this['_defaultTe'+'xture'],_0xb2d100['opacityMap'+'Channel']='a'),_0x5834cd&&(_0x506df1='ScreenSpac'+'e'+_0x506df1,_0xb2d100['depthTest']=!(-0x1*-0xd1d+-0x67f*0x1+0x1*-0x69d)),_0xb2d100['name']='default'+_0x506df1,_0xb2d100['useLightin'+'g']=!(0x1319+-0xd3f*-0x2+-0x5*0x91e),_0xb2d100['useTonemap']=!(-0x179c+0x2*-0x11c7+0x3b2b),_0xb2d100['useFog']=!(0x1e9+0xee2+-0xe*0x133),_0xb2d100['useSkybox']=!(-0x1eb3+-0x1cb2+0x3b66*0x1),_0xb2d100['diffuse']['set'](0x1199+0x2ad+-0xad*0x1e,-0x34*0x7b+-0x1*0x153d+0x1*0x2e39,0xd54*0x1+-0x1*0xa25+-0xa3*0x5),_0xb2d100['opacity']=0x1*-0x26b3+-0x1c9+-0x4*-0xa1f+0.5,_0xb2d100['blendType']=bn,_0xb2d100['depthWrite']=!(-0x60e+0x33f*0x9+0x39*-0x68),_0xb2d100['emissiveVe'+'rtexColor']=!(0x117+-0x7*0x553+-0x1*-0x242e),_0xb2d100['update'](),this['_defaultTe'+'xtMaterial'+'s'][_0x5d0ead]=_0xb2d100,_0xb2d100;}['_createBas'+'eImageMate'+'rial'](){const _0x404a89=new ws();return _0x404a89['diffuse']['set'](0x1*-0x18be+0x31*-0xad+-0x1349*-0x3,-0x10b7*-0x1+0x14ba+-0x2571,0xda2+0x369+0x1*-0x110b),_0x404a89['emissive']['set'](0xf59+0xb09+-0x1a61,-0x3*0x195+-0x125f*0x1+0x3*0x7b5,0x4ae+-0xe*-0x10f+-0xa1*0x1f),_0x404a89['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x404a89['opacityMap']=this['_defaultTe'+'xture'],_0x404a89['opacityMap'+'Channel']='a',_0x404a89['useLightin'+'g']=!(0x1c0*-0x2+0x9*-0x1bf+0x1338),_0x404a89['useTonemap']=!(-0x5f1+-0x2206+0x2*0x13fc),_0x404a89['useFog']=!(0x1*-0x309+-0x705*-0x3+0x7*-0x293),_0x404a89['useSkybox']=!(-0x26bd*-0x1+-0x65f+-0x205d),_0x404a89['blendType']=bn,_0x404a89['depthWrite']=!(-0xd*0x118+-0x2b3*0xd+-0x315*-0x10),_0x404a89;}['getImageEl'+'ementMater'+'ial'](_0x362d98,_0x531b7f,_0x27e3f3,_0x238ba4){return _0x362d98?_0x531b7f?_0x27e3f3?(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al',this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['nineSliced'+'Mode']=Et,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['depthTest']=!(-0x7c7*-0x1+-0x48*-0xd+-0xb6e),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaTest']=-0x2256+-0xb5c*0x2+0x390f,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['redWrite']=!(-0x49f+-0xd*0x96+0xc3e),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['greenWrite']=!(-0x1c00+-0x645*-0x6+-0x1*0x99d),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['blueWrite']=!(-0x10e7*-0x1+0x25d2+-0x36b8),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaWrite']=!(-0x54+-0x229a+-0x1*-0x22ef),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']):_0x238ba4?(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['clone'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['nineSliced'+'Mode']=At,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['depthTest']=!(0x1b4b+-0x2*-0xd0f+-0x3568),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaTest']=-0x20b8+-0xc18+-0x95*-0x4d,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['redWrite']=!(0x1f*-0x124+-0x1f*-0xc7+0x5a2*0x2),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['greenWrite']=!(-0x31*-0xb9+-0xd*-0x107+-0x30c3),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['blueWrite']=!(-0x2*-0x1083+-0x1*0xafa+-0x160b),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaWrite']=!(0x1*-0x1b8e+-0xc69*-0x2+0x2bd),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']):(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']||(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['name']='defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial',this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['depthTest']=!(-0x1a*-0xf1+-0xe65+-0x2b*0x3c),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaTest']=0x766+-0x20fb+-0xa*-0x28f,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['redWrite']=!(0x2211+0x91f*0x1+-0xa5*0x43),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['greenWrite']=!(-0xe1*-0x25+0x1454+-0x34d8),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['blueWrite']=!(0x11a3+-0xf35+-0x26d),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaWrite']=!(-0x1f*-0x10f+-0x1e69+-0x267),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial'])),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']):_0x27e3f3?(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']||(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['name']='defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material',this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['nineSliced'+'Mode']=Et,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['depthTest']=!(-0x14ef+-0x1*-0x2531+0x1*-0x1041),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material'])),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']):_0x238ba4?(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']||(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['name']='defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial',this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['nineSliced'+'Mode']=At,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['depthTest']=!(-0x2*0xfe+0x194d+-0x1750),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial'])),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']):(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['depthTest']=!(-0x8a3+-0x1*0x1357+0x1bfb),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']):_0x531b7f?_0x27e3f3?(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']||(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['name']='defaultIma'+'ge9SlicedM'+'askMateria'+'l',this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['nineSliced'+'Mode']=Et,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaTest']=0x1*0x887+-0x1f7*0xa+0xb20,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['redWrite']=!(-0x3*0x52+0x7*0x3d+-0x2*0x5a),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['greenWrite']=!(0x27b*0x7+0x2*-0x475+-0x2e*0x2f),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['blueWrite']=!(0x267+0x1d35*-0x1+-0x1*-0x1acf),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaWrite']=!(0x2e4*-0x8+-0x1*0x51c+0x1c3d*0x1),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'askMateria'+'l'])),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']):_0x238ba4?(this['defaultIma'+'ge9TiledMa'+'skMaterial']||(this['defaultIma'+'ge9TiledMa'+'skMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'skMaterial']['name']='defaultIma'+'ge9TiledMa'+'skMaterial',this['defaultIma'+'ge9TiledMa'+'skMaterial']['nineSliced'+'Mode']=At,this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaTest']=-0x48*-0x73+-0x367*-0x2+-0x2725,this['defaultIma'+'ge9TiledMa'+'skMaterial']['redWrite']=!(0x384+-0xc65+-0x17b*-0x6),this['defaultIma'+'ge9TiledMa'+'skMaterial']['greenWrite']=!(0xa0c+-0x2*-0x6f2+-0xb*0x22d),this['defaultIma'+'ge9TiledMa'+'skMaterial']['blueWrite']=!(0x19*0x179+0x147+0xc7*-0x31),this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaWrite']=!(0x456*-0x6+-0xb17*-0x1+-0x222*-0x7),this['defaultIma'+'ge9TiledMa'+'skMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'skMaterial'])),this['defaultIma'+'ge9TiledMa'+'skMaterial']):(this['defaultIma'+'geMaskMate'+'rial']||(this['defaultIma'+'geMaskMate'+'rial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaskMate'+'rial']['name']='defaultIma'+'geMaskMate'+'rial',this['defaultIma'+'geMaskMate'+'rial']['alphaTest']=0x8ce+-0x1*-0x19ed+-0xe*0x27b,this['defaultIma'+'geMaskMate'+'rial']['redWrite']=!(0x109a+0x9*0x233+-0x2464),this['defaultIma'+'geMaskMate'+'rial']['greenWrite']=!(0x1cc4+-0x9d*-0x2b+0x3722*-0x1),this['defaultIma'+'geMaskMate'+'rial']['blueWrite']=!(0x1bf0+0xa60+-0x264f),this['defaultIma'+'geMaskMate'+'rial']['alphaWrite']=!(0x23bf+-0xa*0x31f+-0xa*0x74),this['defaultIma'+'geMaskMate'+'rial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaskMate'+'rial'])),this['defaultIma'+'geMaskMate'+'rial']):_0x27e3f3?(this['defaultIma'+'ge9SlicedM'+'aterial']||(this['defaultIma'+'ge9SlicedM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'aterial']['name']='defaultIma'+'ge9SlicedM'+'aterial',this['defaultIma'+'ge9SlicedM'+'aterial']['nineSliced'+'Mode']=Et,this['defaultIma'+'ge9SlicedM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'aterial'])),this['defaultIma'+'ge9SlicedM'+'aterial']):_0x238ba4?(this['defaultIma'+'ge9TiledMa'+'terial']||(this['defaultIma'+'ge9TiledMa'+'terial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'terial']['name']='defaultIma'+'ge9TiledMa'+'terial',this['defaultIma'+'ge9TiledMa'+'terial']['nineSliced'+'Mode']=At,this['defaultIma'+'ge9TiledMa'+'terial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'terial'])),this['defaultIma'+'ge9TiledMa'+'terial']):(this['defaultIma'+'geMaterial']||(this['defaultIma'+'geMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaterial']['name']='defaultIma'+'geMaterial',this['defaultIma'+'geMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaterial'])),this['defaultIma'+'geMaterial']);}['registerUn'+'icodeConve'+'rter'](_0x2c0fde){this['_unicodeCo'+'nverter']=_0x2c0fde;}['registerRt'+'lReorder'](_0x3a2b2e){this['_rtlReorde'+'r']=_0x3a2b2e;}['getUnicode'+'Converter'](){return this['_unicodeCo'+'nverter'];}['getRtlReor'+'der'](){return this['_rtlReorde'+'r'];}}const Ra='free',Oa='limited',Fa='locked',WL=['angularDam'+'pingX','angularDam'+'pingY','angularDam'+'pingZ','angularEqu'+'ilibriumX','angularEqu'+'ilibriumY','angularEqu'+'ilibriumZ','angularLim'+'itsX','angularLim'+'itsY','angularLim'+'itsZ','angularMot'+'ionX','angularMot'+'ionY','angularMot'+'ionZ','angularSpr'+'ingX','angularSpr'+'ingY','angularSpr'+'ingZ','angularSti'+'ffnessX','angularSti'+'ffnessY','angularSti'+'ffnessZ','breakForce','enableColl'+'ision','enabled','entityA','entityB','linearDamp'+'ingX','linearDamp'+'ingY','linearDamp'+'ingZ','linearEqui'+'libriumX','linearEqui'+'libriumY','linearEqui'+'libriumZ','linearLimi'+'tsX','linearLimi'+'tsY','linearLimi'+'tsZ','linearMoti'+'onX','linearMoti'+'onY','linearMoti'+'onZ','linearSpri'+'ngX','linearSpri'+'ngY','linearSpri'+'ngZ','linearStif'+'fnessX','linearStif'+'fnessY','linearStif'+'fnessZ'];class km extends we{constructor(_0x35b488,_0x1d5b73){super(_0x35b488,_0x1d5b73),M['assert'](typeof Ammo<'u','ERROR:\x20Att'+'empting\x20to'+'\x20create\x20a\x20'+'pc.JointCo'+'mponent\x20bu'+'t\x20Ammo.js\x20'+'is\x20not\x20loa'+'ded'),this['_constrain'+'t']=null,this['_entityA']=null,this['_entityB']=null,this['_breakForc'+'e']=0xffc99e3c66fd68000000000000000000,this['_enableCol'+'lision']=!(-0x1b5a+-0x1459+-0x2fb3*-0x1),this['_linearMot'+'ionX']=Fa,this['_linearLim'+'itsX']=new J(0x1327*-0x1+-0x1358+0xf*0x291,0x9b0+-0xcee+0x33e),this['_linearSpr'+'ingX']=!(0x3d5+0x1321*0x1+-0x16f5*0x1),this['_linearSti'+'ffnessX']=-0xe3*0x6+0x18*0x166+-0x1c3e,this['_linearDam'+'pingX']=-0x313+0x63*0x5a+-0x3e*0x83,this['_linearEqu'+'ilibriumX']=0xb2d+0x4*0xa0+0xdad*-0x1,this['_linearMot'+'ionY']=Fa,this['_linearLim'+'itsY']=new J(-0xbaa*0x1+-0x1*-0x1604+0x5*-0x212,-0x22c4*0x1+0x2*0x7d7+0x1316),this['_linearSpr'+'ingY']=!(-0x2512+-0x19b2+0x3ec5),this['_linearSti'+'ffnessY']=-0x206b+0x20a1+0x12*-0x3,this['_linearDam'+'pingY']=-0x1*0x209f+-0xcd3+0x2d73,this['_linearEqu'+'ilibriumY']=0x1c36+0x16ab+0xa2d*-0x5,this['_linearMot'+'ionZ']=Fa,this['_linearLim'+'itsZ']=new J(0x32e*0xb+0xc3d*-0x2+0x2a*-0x40,0x133c+-0x3b0*0x8+-0x24*-0x49),this['_linearSpr'+'ingZ']=!(-0x112c+0xd*-0x2bb+0x34ac*0x1),this['_linearSti'+'ffnessZ']=0x1*-0xc91+-0x1624+0x22b5,this['_linearDam'+'pingZ']=0x1e57+-0x22fb+0x4a5*0x1,this['_linearEqu'+'ilibriumZ']=0x623*-0x1+-0x1f43+0x2566*0x1,this['_angularMo'+'tionX']=Fa,this['_angularLi'+'mitsX']=new J(-0x21f4+0x19a1+0x853,0x17*0xd3+-0xb*0xb5+0x6a*-0x1b),this['_angularSp'+'ringX']=!(-0x16df+0xc7*0x16+0x2*0x2e3),this['_angularSt'+'iffnessX']=-0x2511*0x1+-0x493*-0x4+-0x3c1*-0x5,this['_angularDa'+'mpingX']=-0x165b+0x2*0xe35+-0x60e,this['_angularEq'+'uilibriumX']=0x4*0x8a3+0x143e+-0x36ca,this['_angularMo'+'tionY']=Fa,this['_angularLi'+'mitsY']=new J(-0x8b*-0x43+0x1*0x13e5+-0x3846,-0x1936*0x1+-0x18a2+-0x14*-0x27e),this['_angularSp'+'ringY']=!(-0x1baf+0x25d0+-0x510*0x2),this['_angularSt'+'iffnessY']=0x1251+0x3*0x35b+0x207*-0xe,this['_angularDa'+'mpingY']=0x1f42*-0x1+0x1765*0x1+-0x2*-0x3ef,this['_angularEq'+'uilibriumY']=0x18f9*-0x1+-0x1*-0x1ff7+-0x6fe*0x1,this['_angularMo'+'tionZ']=Fa,this['_angularLi'+'mitsZ']=new J(-0xbdd*0x1+-0x5*-0xb3+0x85e,-0x225a*0x1+-0x1*-0x82b+0x1a2f),this['_angularSp'+'ringZ']=!(0x11b6*-0x2+-0x73*0x25+-0x2*-0x1a06),this['_angularEq'+'uilibriumZ']=-0x1*0x1777+-0xa2*-0x3c+-0x4f*0x2f,this['_angularDa'+'mpingZ']=-0x26*-0xab+0xd*0x1c1+-0xe*0x371,this['_angularSt'+'iffnessZ']=-0x4*-0x1d4+0xb*-0x332+-0x3fa*-0x7,this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['entityA'](_0x231b3f){this['_destroyCo'+'nstraint'](),this['_entityA']=_0x231b3f,this['_createCon'+'straint']();}get['entityA'](){return this['_entityA'];}set['entityB'](_0x1ff1ac){this['_destroyCo'+'nstraint'](),this['_entityB']=_0x1ff1ac,this['_createCon'+'straint']();}get['entityB'](){return this['_entityB'];}set['breakForce'](_0x46f4f2){this['_constrain'+'t']&&this['_breakForc'+'e']!==_0x46f4f2&&(this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](_0x46f4f2),this['_breakForc'+'e']=_0x46f4f2);}get['breakForce'](){return this['_breakForc'+'e'];}set['enableColl'+'ision'](_0x3efe08){this['_destroyCo'+'nstraint'](),this['_enableCol'+'lision']=_0x3efe08,this['_createCon'+'straint']();}get['enableColl'+'ision'](){return this['_enableCol'+'lision'];}set['angularLim'+'itsX'](_0x1c218c){this['_angularLi'+'mitsX']['equals'](_0x1c218c)||(this['_angularLi'+'mitsX']['copy'](_0x1c218c),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsX'](){return this['_angularLi'+'mitsX'];}set['angularMot'+'ionX'](_0x47b0e9){this['_angularMo'+'tionX']!==_0x47b0e9&&(this['_angularMo'+'tionX']=_0x47b0e9,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionX'](){return this['_angularMo'+'tionX'];}set['angularLim'+'itsY'](_0xe627b6){this['_angularLi'+'mitsY']['equals'](_0xe627b6)||(this['_angularLi'+'mitsY']['copy'](_0xe627b6),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsY'](){return this['_angularLi'+'mitsY'];}set['angularMot'+'ionY'](_0x30a6a7){this['_angularMo'+'tionY']!==_0x30a6a7&&(this['_angularMo'+'tionY']=_0x30a6a7,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionY'](){return this['_angularMo'+'tionY'];}set['angularLim'+'itsZ'](_0x29a5bb){this['_angularLi'+'mitsZ']['equals'](_0x29a5bb)||(this['_angularLi'+'mitsZ']['copy'](_0x29a5bb),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsZ'](){return this['_angularLi'+'mitsZ'];}set['angularMot'+'ionZ'](_0x5974f4){this['_angularMo'+'tionZ']!==_0x5974f4&&(this['_angularMo'+'tionZ']=_0x5974f4,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionZ'](){return this['_angularMo'+'tionZ'];}set['linearLimi'+'tsX'](_0x18dcec){this['_linearLim'+'itsX']['equals'](_0x18dcec)||(this['_linearLim'+'itsX']['copy'](_0x18dcec),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsX'](){return this['_linearLim'+'itsX'];}set['linearMoti'+'onX'](_0x147ea9){this['_linearMot'+'ionX']!==_0x147ea9&&(this['_linearMot'+'ionX']=_0x147ea9,this['_updateLin'+'earLimits']());}get['linearMoti'+'onX'](){return this['_linearMot'+'ionX'];}set['linearLimi'+'tsY'](_0xc88502){this['_linearLim'+'itsY']['equals'](_0xc88502)||(this['_linearLim'+'itsY']['copy'](_0xc88502),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsY'](){return this['_linearLim'+'itsY'];}set['linearMoti'+'onY'](_0x43154c){this['_linearMot'+'ionY']!==_0x43154c&&(this['_linearMot'+'ionY']=_0x43154c,this['_updateLin'+'earLimits']());}get['linearMoti'+'onY'](){return this['_linearMot'+'ionY'];}set['linearLimi'+'tsZ'](_0x7d4d03){this['_linearLim'+'itsZ']['equals'](_0x7d4d03)||(this['_linearLim'+'itsZ']['copy'](_0x7d4d03),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsZ'](){return this['_linearLim'+'itsZ'];}set['linearMoti'+'onZ'](_0x3aae7e){this['_linearMot'+'ionZ']!==_0x3aae7e&&(this['_linearMot'+'ionZ']=_0x3aae7e,this['_updateLin'+'earLimits']());}get['linearMoti'+'onZ'](){return this['_linearMot'+'ionZ'];}['_convertTr'+'ansform'](_0x507609,_0x2695bc){const _0x7d3d5=_0x507609['getTransla'+'tion'](),_0x3a2d0f=new le();_0x3a2d0f['setFromMat'+'4'](_0x507609);const _0x59b628=new Ammo['btVector3'](_0x7d3d5['x'],_0x7d3d5['y'],_0x7d3d5['z']),_0x35097a=new Ammo['btQuaterni'+'on'](_0x3a2d0f['x'],_0x3a2d0f['y'],_0x3a2d0f['z'],_0x3a2d0f['w']);_0x2695bc['setOrigin'](_0x59b628),_0x2695bc['setRotatio'+'n'](_0x35097a),Ammo['destroy'](_0x59b628),Ammo['destroy'](_0x35097a);}['_updateAng'+'ularLimits'](){const _0xb6d00c=this['_constrain'+'t'];if(_0xb6d00c){let _0x307a31,_0xec998,_0x209aab,_0x4d843b,_0x5f0248,_0x102d03;this['_angularMo'+'tionX']===Oa?(_0x307a31=this['_angularLi'+'mitsX']['x']*Y['DEG_TO_RAD'],_0x4d843b=this['_angularLi'+'mitsX']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionX']===Ra?(_0x307a31=-0x11e*-0x17+0x1b7b+-0x1a96*0x2,_0x4d843b=0x268*0x1+-0x5bf+0x357):_0x307a31=_0x4d843b=-0x383*0xb+0xabd+-0xee*-0x1e,this['_angularMo'+'tionY']===Oa?(_0xec998=this['_angularLi'+'mitsY']['x']*Y['DEG_TO_RAD'],_0x5f0248=this['_angularLi'+'mitsY']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionY']===Ra?(_0xec998=-0x75e+0x4d7+0x288,_0x5f0248=0x23bd+-0x14bc+-0xf01):_0xec998=_0x5f0248=-0xb87+0x1478*0x1+-0x8f1,this['_angularMo'+'tionZ']===Oa?(_0x209aab=this['_angularLi'+'mitsZ']['x']*Y['DEG_TO_RAD'],_0x102d03=this['_angularLi'+'mitsZ']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionZ']===Ra?(_0x209aab=-0x874+0x16bf+-0x3b*0x3e,_0x102d03=-0x2a*0xbf+0x1f*0x35+0x18eb):_0x209aab=_0x102d03=-0x15c1*-0x1+-0x2*0x757+-0x713;const _0xb6c376=new Ammo['btVector3'](_0x307a31,_0xec998,_0x209aab);_0xb6d00c['setAngular'+'LowerLimit'](_0xb6c376),_0xb6c376['setValue'](_0x4d843b,_0x5f0248,_0x102d03),_0xb6d00c['setAngular'+'UpperLimit'](_0xb6c376),Ammo['destroy'](_0xb6c376);}}['_updateLin'+'earLimits'](){const _0x23da49=this['_constrain'+'t'];if(_0x23da49){let _0x1cc24c,_0x5c95ff,_0x45d01b,_0x5d084d,_0x360ea7,_0x40e8e8;this['_linearMot'+'ionX']===Oa?(_0x1cc24c=this['_linearLim'+'itsX']['x'],_0x5d084d=this['_linearLim'+'itsX']['y']):this['_linearMot'+'ionX']===Ra?(_0x1cc24c=0xcdc*-0x1+0x167e+-0x9a1,_0x5d084d=0x120e+0x33*-0x13+0x1*-0xe45):_0x1cc24c=_0x5d084d=-0x18*-0x135+0x57*-0x3+-0x1bf3,this['_linearMot'+'ionY']===Oa?(_0x5c95ff=this['_linearLim'+'itsY']['x'],_0x360ea7=this['_linearLim'+'itsY']['y']):this['_linearMot'+'ionY']===Ra?(_0x5c95ff=0x898+0x99f+-0x1236,_0x360ea7=-0x20d9+-0x2b0+0x2389):_0x5c95ff=_0x360ea7=-0x1ab*-0xb+-0x1ebe+0xa7*0x13,this['_linearMot'+'ionZ']===Oa?(_0x45d01b=this['_linearLim'+'itsZ']['x'],_0x40e8e8=this['_linearLim'+'itsZ']['y']):this['_linearMot'+'ionZ']===Ra?(_0x45d01b=-0x6e*0x5a+0x379*-0x9+-0x45ee*-0x1,_0x40e8e8=0x2f*0x26+-0x1063*-0x1+-0x175d):_0x45d01b=_0x40e8e8=-0x4*-0x770+0x20d*0x8+-0x2e28;const _0x5b7125=new Ammo['btVector3'](_0x1cc24c,_0x5c95ff,_0x45d01b);_0x23da49['setLinearL'+'owerLimit'](_0x5b7125),_0x5b7125['setValue'](_0x5d084d,_0x360ea7,_0x40e8e8),_0x23da49['setLinearU'+'pperLimit'](_0x5b7125),Ammo['destroy'](_0x5b7125);}}['_createCon'+'straint'](){if(this['_entityA']&&this['_entityA']['rigidbody']){this['_destroyCo'+'nstraint']();const _0x5f1a33=new te(),_0x3951a3=this['_entityA']['rigidbody']['body'];_0x3951a3['activate']();const _0x48f6a2=this['entity']['getWorldTr'+'ansform'](),_0x219f75=this['_entityA']['getWorldTr'+'ansform']()['clone']()['invert']();_0x5f1a33['mul2'](_0x219f75,_0x48f6a2);const _0x4a3e42=new Ammo['btTransfor'+'m']();if(this['_convertTr'+'ansform'](_0x5f1a33,_0x4a3e42),this['_entityB']&&this['_entityB']['rigidbody']){const _0x2c8b77=this['_entityB']['rigidbody']['body'];_0x2c8b77['activate']();const _0xd39990=this['_entityB']['getWorldTr'+'ansform']()['clone']()['invert']();_0x5f1a33['mul2'](_0xd39990,_0x48f6a2);const _0xd0b454=new Ammo['btTransfor'+'m']();this['_convertTr'+'ansform'](_0x5f1a33,_0xd0b454),this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x3951a3,_0x2c8b77,_0x4a3e42,_0xd0b454,!this['_enableCol'+'lision']),Ammo['destroy'](_0xd0b454);}else this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x3951a3,_0x4a3e42,!this['_enableCol'+'lision']);Ammo['destroy'](_0x4a3e42);const _0x2fede4=['X','Y','Z','X','Y','Z'];for(let _0x5ecb29=0xa8a*-0x1+0x6b9*0x1+0x3d1;_0x5ecb29<0x1ef9+0x246b*0x1+0x2*-0x21af;_0x5ecb29++){const _0xeaa773=_0x5ecb29<0x4b7+-0x1*0x187+-0x32d*0x1?'_linear':'_angular';this['_constrain'+'t']['enableSpri'+'ng'](_0x5ecb29,this[_0xeaa773+'Spring'+_0x2fede4[_0x5ecb29]]),this['_constrain'+'t']['setDamping'](_0x5ecb29,this[_0xeaa773+'Damping'+_0x2fede4[_0x5ecb29]]),this['_constrain'+'t']['setEquilib'+'riumPoint'](_0x5ecb29,this[_0xeaa773+('Equilibriu'+'m')+_0x2fede4[_0x5ecb29]]),this['_constrain'+'t']['setStiffne'+'ss'](_0x5ecb29,this[_0xeaa773+'Stiffness'+_0x2fede4[_0x5ecb29]]);}this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](this['_breakForc'+'e']),this['_updateLin'+'earLimits'](),this['_updateAng'+'ularLimits'](),this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['addConstra'+'int'](this['_constrain'+'t'],!this['_enableCol'+'lision']);}}['_destroyCo'+'nstraint'](){this['_constrain'+'t']&&(this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['removeCons'+'traint'](this['_constrain'+'t']),Ammo['destroy'](this['_constrain'+'t']),this['_constrain'+'t']=null);}['initFromDa'+'ta'](_0x235f86){for(const _0x3a01a7 of WL)_0x235f86['hasOwnProp'+'erty'](_0x3a01a7)&&(_0x235f86[_0x3a01a7]instanceof J?this['_'+_0x3a01a7]['copy'](_0x235f86[_0x3a01a7]):this['_'+_0x3a01a7]=_0x235f86[_0x3a01a7]);this['_createCon'+'straint']();}['onEnable'](){this['_createCon'+'straint']();}['onDisable'](){this['_destroyCo'+'nstraint']();}['_onSetEnab'+'led'](_0x4e0aba,_0x21e6ac,_0x4cec06){}['_onBeforeR'+'emove'](){this['fire']('remove');}}const $L={'Damping':'setDamping','Equilibrium':'setEquilib'+'riumPoint','Spring':'enableSpri'+'ng','Stiffness':'setStiffne'+'ss'};['linear','angular']['forEach'](_0x2ac6f6=>{['Damping','Equilibriu'+'m','Spring','Stiffness']['forEach'](_0x4689c8=>{['X','Y','Z']['forEach'](_0x24c2d0=>{const _0xe3d7a7=_0x2ac6f6+_0x4689c8+_0x24c2d0,_0x4d2295='_'+_0xe3d7a7;let _0x3157f4=_0x2ac6f6==='linear'?-0x579+0x6b5+0x2*-0x9e:-0x4*0x86c+-0x1fb8+-0x416b*-0x1;_0x24c2d0==='Y'&&(_0x3157f4+=-0xa9*-0x2a+-0xa80+-0x1139*0x1),_0x24c2d0==='Z'&&(_0x3157f4+=-0x167*0x13+0x14e*0x16+-0x19*0x15),Object['defineProp'+'erty'](km['prototype'],_0xe3d7a7,{'get':function(){return this[_0x4d2295];},'set':function(_0x13683a){this[_0x4d2295]!==_0x13683a&&(this[_0x4d2295]=_0x13683a,this['_constrain'+'t'][$L[_0x4689c8]](_0x3157f4,_0x13683a));}});});});});class XL{constructor(){this['enabled']=!(0xe*-0x24e+0x5*-0x6f1+0x42f9);}}const tu=['enabled'];class qL extends lt{constructor(_0x121af5){super(_0x121af5),this['id']='joint',this['app']=_0x121af5,this['ComponentT'+'ype']=km,this['DataType']=XL,this['schema']=tu;}['initialize'+'ComponentD'+'ata'](_0x427d7c,_0x2cfe3f,_0x2f093f){_0x427d7c['initFromDa'+'ta'](_0x2cfe3f),super['initialize'+'ComponentD'+'ata'](_0x427d7c,_0x2cfe3f,tu);}}we['_buildAcce'+'ssors'](km['prototype'],tu);class ov extends we{constructor(){super(...arguments),h(this,'_minWidth',-0x398+0x10d2*-0x1+0x6ce*0x3),h(this,'_minHeight',0x1489+-0x1703+-0x2*-0x13d),h(this,'_maxWidth',null),h(this,'_maxHeight',null),h(this,'_fitWidthP'+'roportion',0xca0+0x8be+-0x155e),h(this,'_fitHeight'+'Proportion',0x1105*-0x2+-0x1*0xad8+-0x8fa*-0x5),h(this,'_excludeFr'+'omLayout',!(-0xfb6+-0x24+0xfdb));}set['minWidth'](_0x3d3d9d){_0x3d3d9d!==this['_minWidth']&&(this['_minWidth']=_0x3d3d9d,this['fire']('resize'));}get['minWidth'](){return this['_minWidth'];}set['minHeight'](_0x1e5c1b){_0x1e5c1b!==this['_minHeight']&&(this['_minHeight']=_0x1e5c1b,this['fire']('resize'));}get['minHeight'](){return this['_minHeight'];}set['maxWidth'](_0x2c9a2c){_0x2c9a2c!==this['_maxWidth']&&(this['_maxWidth']=_0x2c9a2c,this['fire']('resize'));}get['maxWidth'](){return this['_maxWidth'];}set['maxHeight'](_0x5710bd){_0x5710bd!==this['_maxHeight']&&(this['_maxHeight']=_0x5710bd,this['fire']('resize'));}get['maxHeight'](){return this['_maxHeight'];}set['fitWidthPr'+'oportion'](_0x388370){_0x388370!==this['_fitWidthP'+'roportion']&&(this['_fitWidthP'+'roportion']=_0x388370,this['fire']('resize'));}get['fitWidthPr'+'oportion'](){return this['_fitWidthP'+'roportion'];}set['fitHeightP'+'roportion'](_0x30c009){_0x30c009!==this['_fitHeight'+'Proportion']&&(this['_fitHeight'+'Proportion']=_0x30c009,this['fire']('resize'));}get['fitHeightP'+'roportion'](){return this['_fitHeight'+'Proportion'];}set['excludeFro'+'mLayout'](_0x4a9c18){_0x4a9c18!==this['_excludeFr'+'omLayout']&&(this['_excludeFr'+'omLayout']=_0x4a9c18,this['fire']('resize'));}get['excludeFro'+'mLayout'](){return this['_excludeFr'+'omLayout'];}}class jL{constructor(){this['enabled']=!(0x2a*0x5+0x21c5+-0x2297);}}const lv=['enabled'];class YL extends lt{constructor(_0x5be2d5){super(_0x5be2d5),this['id']='layoutchil'+'d',this['ComponentT'+'ype']=ov,this['DataType']=jL,this['schema']=lv;}['initialize'+'ComponentD'+'ata'](_0x5a2d35,_0x2de94d,_0x342002){_0x2de94d['enabled']!==void(0x75b+-0x20*-0xf9+-0x1*0x267b)&&(_0x5a2d35['enabled']=_0x2de94d['enabled']),_0x2de94d['minWidth']!==void(-0x47*0x2+-0x62e+0x6bc)&&(_0x5a2d35['minWidth']=_0x2de94d['minWidth']),_0x2de94d['minHeight']!==void(-0x1b02*-0x1+-0x1466+-0x69c*0x1)&&(_0x5a2d35['minHeight']=_0x2de94d['minHeight']),_0x2de94d['maxWidth']!==void(0x45+-0x1*0xd1f+0xe*0xeb)&&(_0x5a2d35['maxWidth']=_0x2de94d['maxWidth']),_0x2de94d['maxHeight']!==void(-0xc*0xa7+0x201c+-0x1848)&&(_0x5a2d35['maxHeight']=_0x2de94d['maxHeight']),_0x2de94d['fitWidthPr'+'oportion']!==void(0x1*0x977+-0x947*0x1+-0x30)&&(_0x5a2d35['fitWidthPr'+'oportion']=_0x2de94d['fitWidthPr'+'oportion']),_0x2de94d['fitHeightP'+'roportion']!==void(-0x1776+-0x22*0xf+0x1974)&&(_0x5a2d35['fitHeightP'+'roportion']=_0x2de94d['fitHeightP'+'roportion']),_0x2de94d['excludeFro'+'mLayout']!==void(-0x2*0xb3b+0x7*0x4df+-0x3*0x3e1)&&(_0x5a2d35['excludeFro'+'mLayout']=_0x2de94d['excludeFro'+'mLayout']),super['initialize'+'ComponentD'+'ata'](_0x5a2d35,_0x2de94d,_0x342002);}['cloneCompo'+'nent'](_0x4514b4,_0x325b3c){const _0x4661c0=_0x4514b4['layoutchil'+'d'];return this['addCompone'+'nt'](_0x325b3c,{'enabled':_0x4661c0['enabled'],'minWidth':_0x4661c0['minWidth'],'minHeight':_0x4661c0['minHeight'],'maxWidth':_0x4661c0['maxWidth'],'maxHeight':_0x4661c0['maxHeight'],'fitWidthProportion':_0x4661c0['fitWidthPr'+'oportion'],'fitHeightProportion':_0x4661c0['fitHeightP'+'roportion'],'excludeFromLayout':_0x4661c0['excludeFro'+'mLayout']});}}we['_buildAcce'+'ssors'](ov['prototype'],lv);const su=-0x2078+-0xd8b+0x2e03,KL=0x4e8+0x31*0x4f+-0xb*0x1d2,ug=0xdef+-0x21b*-0xb+-0x2516,ZL=0xb8d*0x1+-0x199*-0x5+-0x1387,ac={};ac[be]={'axis':'x','size':'width','calculatedSize':'calculated'+'Width','minSize':'minWidth','maxSize':'maxWidth','fitting':'widthFitti'+'ng','fittingProportion':'fitWidthPr'+'oportion'},ac[qe]={'axis':'y','size':'height','calculatedSize':'calculated'+'Height','minSize':'minHeight','maxSize':'maxHeight','fitting':'heightFitt'+'ing','fittingProportion':'fitHeightP'+'roportion'};const Um={};Um[be]=qe,Um[qe]=be;const QL={'minWidth':0x0,'minHeight':0x0,'maxWidth':Number['POSITIVE_I'+'NFINITY'],'maxHeight':Number['POSITIVE_I'+'NFINITY'],'width':null,'height':null,'fitWidthProportion':0x0,'fitHeightProportion':0x0},es={'NONE':'NONE','APPLY_STRETCHING':'APPLY_STRE'+'TCHING','APPLY_SHRINKING':'APPLY_SHRI'+'NKING'},ts=new J();function hv(_0x5dac22){let _0x4260c3;const _0x299461=ac[_0x5dac22],_0x55eecc=ac[Um[_0x5dac22]];function _0x834f34(_0x187f3b,_0x30621a){return-_0x30621a[_0x299461['size']]*_0x187f3b['pivot'][_0x299461['axis']];}function _0x45ae8f(_0x4d0667,_0x427a80){return-_0x427a80[_0x55eecc['size']]*_0x4d0667['pivot'][_0x55eecc['axis']];}function _0x674046(_0x216373,_0x3c6fc3){return _0x3c6fc3[_0x299461['size']]*(0xf25+0x1be3+-0x1*0x2b07-_0x216373['pivot'][_0x299461['axis']]);}function _0x1883d8(_0x31922f,_0x2ef125){_0x31922f=_0x31922f['filter'](_0xad57ab),_0x4260c3=_0x2ef125,ts['x']=_0x4260c3['containerS'+'ize']['x']-_0x4260c3['padding']['x']-_0x4260c3['padding']['z'],ts['y']=_0x4260c3['containerS'+'ize']['y']-_0x4260c3['padding']['y']-_0x4260c3['padding']['w'],_0x272bc4(_0x31922f);const _0x511c54=_0x5f23ac(_0x65934f(_0x31922f)),_0x63b364=_0x479dc6(_0x511c54,_0x14cb63(_0x511c54)),_0xee46ac=_0x1235d7(_0x511c54,_0x63b364);return _0x4b031a(_0x511c54,_0x63b364,_0xee46ac),_0x30b509(_0x511c54,_0x63b364,_0xee46ac),_0x32bc12(_0x511c54);}function _0xad57ab(_0x1284cc){const _0x3e5ee2=_0x1284cc['entity']['layoutchil'+'d'];return!_0x3e5ee2||!_0x3e5ee2['enabled']||!_0x3e5ee2['excludeFro'+'mLayout'];}function _0x272bc4(_0x11dc22){for(let _0x195e75=0x3a8+0x10*-0xec+0x58c*0x2;_0x195e75<_0x11dc22['length'];++_0x195e75){const _0xf74f3e=_0x11dc22[_0x195e75],_0x10bd7f=_0xf74f3e['anchor'];(_0x10bd7f['x']!==-0xe1+-0x1*0xa55+0xb36||_0x10bd7f['y']!==0x3*0x8bc+0x4f9+-0x1f2d*0x1||_0x10bd7f['z']!==-0xd22+0x1441*0x1+-0x71f||_0x10bd7f['w']!==0x1782+0x6*0x1aa+-0x10bf*0x2)&&(_0xf74f3e['anchor']=ae['ZERO']);}}function _0x65934f(_0x4962a8){if(!_0x4260c3['wrap'])return[_0x4962a8];const _0x260376=[[]],_0x2fe4b5=_0x55a6b0(_0x4962a8);let _0x8c4022=-0x3*0xc3e+-0x589*-0x3+-0x141f*-0x1;const _0x188be2=_0x4260c3[_0x299461['fitting']]===ug;for(let _0x33f52a=-0x1*-0x16ed+0x1a91+-0xa*0x4f3;_0x33f52a<_0x4962a8['length'];++_0x33f52a){_0x260376[_0x260376['length']-(-0xb09*0x2+0x1ad5+0xcb*-0x6)]['length']>0xd*0xc5+-0x67e*-0x2+-0x1*0x16fd&&(_0x8c4022+=_0x4260c3['spacing'][_0x299461['axis']]);const _0x3bca6f=_0x2fe4b5[_0x33f52a][_0x299461['size']];_0x8c4022+=_0x3bca6f,!_0x188be2&&_0x8c4022>ts[_0x299461['axis']]&&_0x260376[_0x260376['length']-(0x186*-0x11+-0x43b*-0x6+-0x85*-0x1)]['length']!==-0x177f+0xb23+0xc5c&&(_0x8c4022=_0x3bca6f,_0x260376['push']([])),_0x260376[_0x260376['length']-(0x435+-0x1233*0x1+0xdff)]['push'](_0x4962a8[_0x33f52a]),_0x188be2&&_0x8c4022>ts[_0x299461['axis']]&&_0x33f52a!==_0x4962a8['length']-(-0x1bb2+0x1346+0x86d)&&(_0x8c4022=0xa31*0x1+0x2a1*-0xb+0x12ba*0x1,_0x260376['push']([]));}return _0x260376;}function _0x5f23ac(_0xc198d4){const _0x572144=_0x4260c3['orientatio'+'n']===be&&_0x4260c3['reverseX']||_0x4260c3['orientatio'+'n']===qe&&_0x4260c3['reverseY'],_0x24d743=_0x4260c3['orientatio'+'n']===be&&_0x4260c3['reverseY']||_0x4260c3['orientatio'+'n']===qe&&_0x4260c3['reverseX'];if(_0x572144){for(let _0x222692=-0x8e3+-0xd3e+0x1621;_0x222692<_0xc198d4['length'];++_0x222692)_0x572144&&_0xc198d4[_0x222692]['reverse']();}return _0x24d743&&_0xc198d4['reverse'](),_0xc198d4;}function _0x14cb63(_0x3b395a){const _0x1b6010=[];for(let _0x4997e2=0x5*-0x2a1+-0x77b+0xb*0x1e0;_0x4997e2<_0x3b395a['length'];++_0x4997e2){const _0x42d40f=_0x3b395a[_0x4997e2],_0x32b59f=_0x55a6b0(_0x42d40f),_0x1479a8=_0x54a4df(_0x32b59f,_0x299461),_0x550245=_0x40ecfa(_0x4260c3[_0x299461['fitting']],_0x1479a8,ts[_0x299461['axis']]);_0x550245===es['APPLY_STRE'+'TCHING']?_0x2a65bd(_0x32b59f,_0x1479a8,_0x299461):_0x550245===es['APPLY_SHRI'+'NKING']&&_0x3448d6(_0x32b59f,_0x1479a8,_0x299461),_0x1b6010['push'](_0x32b59f);}return _0x1b6010;}function _0x479dc6(_0x2ab9ba,_0x36fd3c){const _0x1b6f41=[],_0x5d0744=[];for(let _0x195c42=0x1*-0xd21+0x1a5b+0xd3a*-0x1;_0x195c42<_0x2ab9ba['length'];++_0x195c42){const _0x450e5d=_0x2ab9ba[_0x195c42];_0x450e5d['largestEle'+'ment']=null,_0x450e5d['largestSiz'+'e']={'width':Number['NEGATIVE_I'+'NFINITY'],'height':Number['NEGATIVE_I'+'NFINITY']};for(let _0x8e0e68=-0x246b*0x1+0x653*0x1+0x12*0x1ac;_0x8e0e68<_0x450e5d['length'];++_0x8e0e68){const _0x2fa771=_0x36fd3c[_0x195c42][_0x8e0e68];_0x2fa771[_0x55eecc['size']]>_0x450e5d['largestSiz'+'e'][_0x55eecc['size']]&&(_0x450e5d['largestEle'+'ment']=_0x450e5d[_0x8e0e68],_0x450e5d['largestSiz'+'e']=_0x2fa771);}_0x1b6f41['push'](_0x450e5d['largestEle'+'ment']),_0x5d0744['push'](_0x450e5d['largestSiz'+'e']);}const _0x250b55=_0x54a4df(_0x5d0744,_0x55eecc),_0xae5ef8=_0x40ecfa(_0x4260c3[_0x55eecc['fitting']],_0x250b55,ts[_0x55eecc['axis']]);_0xae5ef8===es['APPLY_STRE'+'TCHING']?_0x2a65bd(_0x5d0744,_0x250b55,_0x55eecc):_0xae5ef8===es['APPLY_SHRI'+'NKING']&&_0x3448d6(_0x5d0744,_0x250b55,_0x55eecc);for(let _0x1a6cdc=0x1c11+0x1c1*0x1+-0x15b*0x16;_0x1a6cdc<_0x2ab9ba['length'];++_0x1a6cdc){const _0x49bc80=_0x2ab9ba[_0x1a6cdc];for(let _0x2bf23c=0xbf8+-0x9*0x37c+-0x4d9*-0x4;_0x2bf23c<_0x49bc80['length'];++_0x2bf23c){const _0x184b86=_0x36fd3c[_0x1a6cdc][_0x2bf23c],_0x28bc1b=_0x184b86[_0x55eecc['size']],_0x9b7019=_0x2ab9ba['length']===0x1222+0x767+-0x1988?ts[_0x55eecc['axis']]:_0x49bc80['largestSiz'+'e'][_0x55eecc['size']],_0x46e492=_0x40ecfa(_0x4260c3[_0x55eecc['fitting']],_0x28bc1b,_0x9b7019);_0x46e492===es['APPLY_STRE'+'TCHING']?_0x184b86[_0x55eecc['size']]=Math['min'](_0x9b7019,_0x184b86[_0x55eecc['maxSize']]):_0x46e492===es['APPLY_SHRI'+'NKING']&&(_0x184b86[_0x55eecc['size']]=Math['max'](_0x9b7019,_0x184b86[_0x55eecc['minSize']]));}}return _0x36fd3c;}function _0x40ecfa(_0xdd9a27,_0x5a1c71,_0x1a589f){switch(_0xdd9a27){case su:return es['NONE'];case KL:return _0x5a1c71<_0x1a589f?es['APPLY_STRE'+'TCHING']:es['NONE'];case ug:return _0x5a1c71>=_0x1a589f?es['APPLY_SHRI'+'NKING']:es['NONE'];case ZL:return _0x5a1c71<_0x1a589f?es['APPLY_STRE'+'TCHING']:es['APPLY_SHRI'+'NKING'];default:throw new Error('Unrecogniz'+'ed\x20fitting'+'\x20mode:\x20'+_0xdd9a27);}}function _0x54a4df(_0x1b9671,_0x2839e3){const _0x138323=_0x56f806(_0x1b9671,_0x2839e3['size']),_0x4f94b8=(_0x1b9671['length']-(0x23b1*-0x1+-0x1d73+0x4125))*_0x4260c3['spacing'][_0x2839e3['axis']];return _0x138323+_0x4f94b8;}function _0x2a65bd(_0x584753,_0x351fc9,_0x5add2d){const _0x41b12f=_0x144aee(_0x584753,_0x5add2d['maxSize']),_0x7f71b6=_0x1a1834(_0x584753,_0x5add2d['fittingPro'+'portion']),_0x36a896=_0x588ea4(_0x7f71b6,_0x41b12f);let _0x1f7465=ts[_0x5add2d['axis']]-_0x351fc9;for(let _0x2f85d6=0x1cf*0xd+0x8*-0x41+0x2f*-0x75;_0x2f85d6<_0x584753['length'];++_0x2f85d6){const _0x317358=_0x41b12f[_0x2f85d6],_0x527f26=_0xfdfa67(_0x317358,_0x1f7465,_0x7f71b6,_0x36a896),_0x3ec2eb=_0x584753[_0x317358][_0x5add2d['size']]+_0x527f26,_0x48d8ff=_0x584753[_0x317358][_0x5add2d['maxSize']],_0x30df73=Math['min'](_0x3ec2eb,_0x48d8ff);_0x584753[_0x317358][_0x5add2d['size']]=_0x30df73;const _0x26b2b5=Math['max'](_0x3ec2eb-_0x30df73,-0x2*0x3ce+-0x3a7+0xb43),_0x19209d=_0x527f26-_0x26b2b5;_0x1f7465-=_0x19209d;}}function _0x3448d6(_0x54615c,_0xcfdcfb,_0x4de62c){const _0x3af01b=_0x144aee(_0x54615c,_0x4de62c['minSize'],!(-0x31*-0xa6+-0x1*-0x2325+-0x42eb*0x1)),_0x9bbac0=_0x1a1834(_0x54615c,_0x4de62c['fittingPro'+'portion']),_0x59d1ce=_0x39822f(_0x9bbac0),_0x28ebd3=_0x588ea4(_0x59d1ce,_0x3af01b);let _0x16ddce=_0xcfdcfb-ts[_0x4de62c['axis']];for(let _0x5cae7e=-0x90d+0x24bf+-0xdd9*0x2;_0x5cae7e<_0x54615c['length'];++_0x5cae7e){const _0x4cdf91=_0x3af01b[_0x5cae7e],_0x2106aa=_0xfdfa67(_0x4cdf91,_0x16ddce,_0x59d1ce,_0x28ebd3),_0x3c6075=_0x54615c[_0x4cdf91][_0x4de62c['size']]-_0x2106aa,_0x38194f=_0x54615c[_0x4cdf91][_0x4de62c['minSize']],_0x3688b8=Math['max'](_0x3c6075,_0x38194f);_0x54615c[_0x4cdf91][_0x4de62c['size']]=_0x3688b8;const _0x2bca1a=Math['max'](_0x3688b8-_0x3c6075,-0x1f86+-0x1e85*-0x1+0x101*0x1),_0x52383e=_0x2106aa-_0x2bca1a;_0x16ddce-=_0x52383e;}}function _0xfdfa67(_0x1207ae,_0x3d8b8d,_0x2f909a,_0x34726b){const _0x5f032e=_0x2f909a[_0x1207ae],_0x11634f=_0x34726b[_0x1207ae];return Math['abs'](_0x5f032e)<-0x1509+-0x114c+0x2655+0.00001&&Math['abs'](_0x11634f)<0x1*-0x10f+-0x16dd+0x17ec+0.00001?_0x3d8b8d:_0x3d8b8d*_0x5f032e/_0x11634f;}function _0x1235d7(_0x2f3ea0,_0xd99b54){const _0x329901={};_0x329901[_0x299461['axis']]=-0x6*0x13+-0x751+0x7c3,_0x329901[_0x55eecc['axis']]=-0x1*-0x1e02+-0x22d9+0x4d7,_0x2f3ea0[_0x299461['size']]=Number['NEGATIVE_I'+'NFINITY'];const _0x3c001a=[];for(let _0x1be313=-0x44b*0x7+0x123c+0xbd1;_0x1be313<_0x2f3ea0['length'];++_0x1be313){const _0x4f80d0=_0x2f3ea0[_0x1be313];if(_0x4f80d0['length']===0x2*0xf4+-0xcf1*-0x1+0x1*-0xed9){_0x3c001a['push']([]);continue;}const _0x4e09a7=[],_0x248520=_0xd99b54[_0x1be313];for(let _0x3387f5=-0x66*0x28+-0x1*0x88+0x41e*0x4;_0x3387f5<_0x4f80d0['length'];++_0x3387f5){const _0x1f0759=_0x4f80d0[_0x3387f5],_0x16aca1=_0x248520[_0x3387f5];_0x329901[_0x55eecc['axis']]-=_0x45ae8f(_0x1f0759,_0x16aca1),_0x329901[_0x299461['axis']]-=_0x834f34(_0x1f0759,_0x16aca1),_0x4e09a7[_0x3387f5]={},_0x4e09a7[_0x3387f5][_0x299461['axis']]=_0x329901[_0x299461['axis']],_0x4e09a7[_0x3387f5][_0x55eecc['axis']]=_0x329901[_0x55eecc['axis']],_0x329901[_0x55eecc['axis']]+=_0x45ae8f(_0x1f0759,_0x16aca1),_0x329901[_0x299461['axis']]+=_0x674046(_0x1f0759,_0x16aca1)+_0x4260c3['spacing'][_0x299461['axis']];}_0x4f80d0[_0x299461['size']]=_0x329901[_0x299461['axis']]-_0x4260c3['spacing'][_0x299461['axis']],_0x4f80d0[_0x55eecc['size']]=_0x4f80d0['largestSiz'+'e'][_0x55eecc['size']],_0x2f3ea0[_0x299461['size']]=Math['max'](_0x2f3ea0[_0x299461['size']],_0x4f80d0[_0x299461['size']]),_0x329901[_0x299461['axis']]=0x1*0x2223+0x10ae+0x1*-0x32d1,_0x329901[_0x55eecc['axis']]+=_0x4f80d0[_0x55eecc['size']]+_0x4260c3['spacing'][_0x55eecc['axis']],_0x3c001a['push'](_0x4e09a7);}return _0x2f3ea0[_0x55eecc['size']]=_0x329901[_0x55eecc['axis']]-_0x4260c3['spacing'][_0x55eecc['axis']],_0x3c001a;}function _0x4b031a(_0x5841c4,_0x2c9ce5,_0x4265c8){const _0x3cd60d=_0x4260c3['alignment'][_0x299461['axis']],_0x3c0af5=_0x4260c3['alignment'][_0x55eecc['axis']],_0x5609a5=_0x4260c3['padding'][_0x299461['axis']],_0x4a4644=_0x4260c3['padding'][_0x55eecc['axis']];for(let _0x3d10ba=0x2002+0x2259*0x1+-0x425b*0x1;_0x3d10ba<_0x5841c4['length'];++_0x3d10ba){const _0xee68c0=_0x5841c4[_0x3d10ba],_0x3e789f=_0x2c9ce5[_0x3d10ba],_0x8b8ebf=_0x4265c8[_0x3d10ba],_0x313058=(ts[_0x299461['axis']]-_0xee68c0[_0x299461['size']])*_0x3cd60d+_0x5609a5,_0x1f6ef4=(ts[_0x55eecc['axis']]-_0x5841c4[_0x55eecc['size']])*_0x3c0af5+_0x4a4644;for(let _0x1299b4=-0x277*0x3+-0x16*-0xe8+-0xc8b;_0x1299b4<_0xee68c0['length'];++_0x1299b4){const _0x5d55aa=(_0xee68c0[_0x55eecc['size']]-_0x3e789f[_0x1299b4][_0x55eecc['size']])*_0x4260c3['alignment'][_0x55eecc['axis']];_0x8b8ebf[_0x1299b4][_0x299461['axis']]+=_0x313058,_0x8b8ebf[_0x1299b4][_0x55eecc['axis']]+=_0x1f6ef4+_0x5d55aa;}}}function _0x30b509(_0x43a194,_0x4c98ce,_0x5c9e8c){for(let _0x4775f9=0x45c+-0x3e+0x22*-0x1f;_0x4775f9<_0x43a194['length'];++_0x4775f9){const _0x5841db=_0x43a194[_0x4775f9],_0x171f04=_0x4c98ce[_0x4775f9],_0x12d9c7=_0x5c9e8c[_0x4775f9];for(let _0x52475a=-0x21e5*-0x1+-0xde2+0x2f*-0x6d;_0x52475a<_0x5841db['length'];++_0x52475a){const _0x2b2a28=_0x5841db[_0x52475a];_0x2b2a28[_0x299461['calculated'+'Size']]=_0x171f04[_0x52475a][_0x299461['size']],_0x2b2a28[_0x55eecc['calculated'+'Size']]=_0x171f04[_0x52475a][_0x55eecc['size']],_0x4260c3['orientatio'+'n']===be?_0x2b2a28['entity']['setLocalPo'+'sition'](_0x12d9c7[_0x52475a][_0x299461['axis']],_0x12d9c7[_0x52475a][_0x55eecc['axis']],_0x2b2a28['entity']['getLocalPo'+'sition']()['z']):_0x2b2a28['entity']['setLocalPo'+'sition'](_0x12d9c7[_0x52475a][_0x55eecc['axis']],_0x12d9c7[_0x52475a][_0x299461['axis']],_0x2b2a28['entity']['getLocalPo'+'sition']()['z']);}}}function _0x32bc12(_0x5c0149){const _0x47855c=_0x5c0149['width'],_0x38a7ce=_0x5c0149['height'],_0x22c515=(ts['x']-_0x47855c)*_0x4260c3['alignment']['x']+_0x4260c3['padding']['x'],_0x57ca4=(ts['y']-_0x38a7ce)*_0x4260c3['alignment']['y']+_0x4260c3['padding']['y'];return{'bounds':new ae(_0x22c515,_0x57ca4,_0x47855c,_0x38a7ce)};}function _0x55a6b0(_0x10e786){const _0x281f13=[];for(let _0x1cf058=0x1dde+0x12b5+-0x9b7*0x5;_0x1cf058<_0x10e786['length'];++_0x1cf058){const _0x4c7fba=_0x10e786[_0x1cf058],_0x773213=Math['max'](_0x4b01f5(_0x4c7fba,'minWidth'),-0x6aa+-0x73*-0x5+-0x1*-0x46b),_0x3d465a=Math['max'](_0x4b01f5(_0x4c7fba,'minHeight'),0x4*-0x7da+0x6ea+0x187e),_0x4e9ee6=Math['max'](_0x4b01f5(_0x4c7fba,'maxWidth'),_0x773213),_0x4c2f90=Math['max'](_0x4b01f5(_0x4c7fba,'maxHeight'),_0x3d465a),_0x250649=_0x4125a6(_0x4b01f5(_0x4c7fba,'width'),_0x773213,_0x4e9ee6),_0x5a5929=_0x4125a6(_0x4b01f5(_0x4c7fba,'height'),_0x3d465a,_0x4c2f90),_0x12e643=_0x4b01f5(_0x4c7fba,'fitWidthPr'+'oportion'),_0x38779a=_0x4b01f5(_0x4c7fba,'fitHeightP'+'roportion');_0x281f13['push']({'minWidth':_0x773213,'minHeight':_0x3d465a,'maxWidth':_0x4e9ee6,'maxHeight':_0x4c2f90,'width':_0x250649,'height':_0x5a5929,'fitWidthProportion':_0x12e643,'fitHeightProportion':_0x38779a});}return _0x281f13;}function _0x4b01f5(_0x48a10d,_0x43424b){const _0x49443b=_0x48a10d['entity']['layoutchil'+'d'];return _0x49443b&&_0x49443b['enabled']&&_0x49443b[_0x43424b]!==void(-0x109a+-0xb*-0x1ba+0x6*-0x66)&&_0x49443b[_0x43424b]!==null?_0x49443b[_0x43424b]:_0x48a10d[_0x43424b]!==void(-0x252b+-0x5ec+0x2b17)?_0x48a10d[_0x43424b]:QL[_0x43424b];}function _0x4125a6(_0x1a0d5f,_0x4fb843,_0x5b080d){return Math['min'](Math['max'](_0x1a0d5f,_0x4fb843),_0x5b080d);}function _0x56f806(_0xb2d49b,_0x42d36d){return _0xb2d49b['reduce']((_0x11c549,_0x1306a5)=>_0x11c549+_0x1306a5[_0x42d36d],-0xad4+-0x383+0x1*0xe57);}function _0x1a1834(_0x1f3916,_0x3dd43d){const _0x1f8add=_0x56f806(_0x1f3916,_0x3dd43d),_0x3c5a64=[],_0x270290=_0x1f3916['length'];if(_0x1f8add===-0xce*0x29+0x1e4e+0x4*0xac){for(let _0x4b72e3=0x185e+0x1*-0x1584+0x2*-0x16d;_0x4b72e3<_0x270290;++_0x4b72e3)_0x3c5a64['push']((-0x1ae5+0xed4+-0x5*-0x26a)/_0x270290);}else{for(let _0x504f19=-0xd1f*-0x1+-0x22ba*-0x1+0x9*-0x551;_0x504f19<_0x270290;++_0x504f19)_0x3c5a64['push'](_0x1f3916[_0x504f19][_0x3dd43d]/_0x1f8add);}return _0x3c5a64;}function _0x39822f(_0x5af0c0){if(_0x5af0c0['length']===0xa0a+0x1ed3+-0x28dc)return[-0x12be+0xd2b*-0x1+0x1fea];const _0x5d39af=[],_0x2e9413=_0x5af0c0['length'];for(let _0x459d59=0xe*0x7d+-0x103*-0x1+-0x7d9;_0x459d59<_0x2e9413;++_0x459d59)_0x5d39af['push']((0x16b0+0x24e*0x3+-0x1d99-_0x5af0c0[_0x459d59])/(_0x2e9413-(0x21f4+-0xc11+-0x2*0xaf1)));return _0x5d39af;}function _0x144aee(_0x2d0bc3,_0x202c4c,_0xf85861){return _0x2d0bc3['forEach'](_0x5f2127),_0x2d0bc3['slice']()['sort']((_0x38f756,_0xcc6759)=>_0xf85861?_0xcc6759[_0x202c4c]-_0x38f756[_0x202c4c]:_0x38f756[_0x202c4c]-_0xcc6759[_0x202c4c])['map'](_0xba8042);}function _0x5f2127(_0x48b650,_0x5b9d74){_0x48b650['index']=_0x5b9d74;}function _0xba8042(_0x175b61){return _0x175b61['index'];}function _0x588ea4(_0x1b7768,_0x1dcb2c){const _0x3004b2=[];_0x3004b2[_0x1dcb2c[_0x1b7768['length']-(-0x326+-0x10+-0x1*-0x337)]]=_0x1b7768[_0x1dcb2c[_0x1b7768['length']-(-0x4*-0x8c8+0x2ee+-0xcaf*0x3)]];for(let _0x1447d8=_0x1b7768['length']-(-0x25b9+0x1f99+-0x622*-0x1);_0x1447d8>=0x9e3*-0x1+-0x73a+0x111d*0x1;--_0x1447d8)_0x3004b2[_0x1dcb2c[_0x1447d8]]=_0x3004b2[_0x1dcb2c[_0x1447d8+(-0x1745+-0x10*-0x1eb+-0x1*0x76a)]]+_0x1b7768[_0x1dcb2c[_0x1447d8]];return _0x3004b2;}return _0x1883d8;}const Bm={};Bm[be]=hv(be),Bm[qe]=hv(qe);class JL{['calculateL'+'ayout'](_0x1793b4,_0x3f92b8){const _0x1bff3c=Bm[_0x3f92b8['orientatio'+'n']];if(_0x1bff3c)return _0x1bff3c(_0x1793b4,_0x3f92b8);throw new Error('Unrecogniz'+'ed\x20orienta'+'tion\x20value'+':\x20'+_0x3f92b8['orientatio'+'n']);}}function mg(_0x421bbf){return _0x421bbf['element'];}function eR(_0x4f6eb6){return _0x4f6eb6['enabled']&&_0x4f6eb6['element']&&_0x4f6eb6['element']['enabled'];}class cv extends we{constructor(_0x506c02,_0x621b94){super(_0x506c02,_0x621b94),h(this,'_orientati'+'on',be),h(this,'_reverseX',!(0x3*0x14d+-0x14*0xcb+0xbf6)),h(this,'_reverseY',!(-0x721+0xb56+-0x435)),h(this,'_alignment',new J(-0x375+-0x1535+-0x23e*-0xb,0x2685+0x2216+0x1*-0x489a)),h(this,'_padding',new ae()),h(this,'_spacing',new J()),h(this,'_widthFitt'+'ing',su),h(this,'_heightFit'+'ting',su),h(this,'_wrap',!(0x1e27+0x219e+-0x173*0x2c)),h(this,'_layoutCal'+'culator',new JL()),(this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'on'),this['entity']['children']['forEach'](_0x3caf86=>{this['_listenFor'+'ReflowEven'+'ts'](_0x3caf86,'on');}),this['entity']['on']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['on']('childremov'+'e',this['_onChildRe'+'move'],this),M['assert'](_0x506c02['app']['systems']['element'],'System\x20\x27el'+'ement\x27\x20doe'+'sn\x27t\x20exist'),_0x506c02['app']['systems']['element']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x506c02['app']['systems']['element']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),M['assert'](_0x506c02['app']['systems']['layoutchil'+'d'],'System\x20\x27la'+'youtchild\x27'+'\x20doesn\x27t\x20e'+'xist'),_0x506c02['app']['systems']['layoutchil'+'d']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x506c02['app']['systems']['layoutchil'+'d']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this));}set['orientatio'+'n'](_0x32265a){_0x32265a!==this['_orientati'+'on']&&(this['_orientati'+'on']=_0x32265a,this['_scheduleR'+'eflow']());}get['orientatio'+'n'](){return this['_orientati'+'on'];}set['reverseX'](_0x99da52){_0x99da52!==this['_reverseX']&&(this['_reverseX']=_0x99da52,this['_scheduleR'+'eflow']());}get['reverseX'](){return this['_reverseX'];}set['reverseY'](_0x4f3037){_0x4f3037!==this['_reverseY']&&(this['_reverseY']=_0x4f3037,this['_scheduleR'+'eflow']());}get['reverseY'](){return this['_reverseY'];}set['alignment'](_0x4e03b6){_0x4e03b6['equals'](this['_alignment'])||(this['_alignment']['copy'](_0x4e03b6),this['_scheduleR'+'eflow']());}get['alignment'](){return this['_alignment'];}set['padding'](_0xdfed99){_0xdfed99['equals'](this['_padding'])||(this['_padding']['copy'](_0xdfed99),this['_scheduleR'+'eflow']());}get['padding'](){return this['_padding'];}set['spacing'](_0x5f43c1){_0x5f43c1['equals'](this['_spacing'])||(this['_spacing']['copy'](_0x5f43c1),this['_scheduleR'+'eflow']());}get['spacing'](){return this['_spacing'];}set['widthFitti'+'ng'](_0x4923fc){_0x4923fc!==this['_widthFitt'+'ing']&&(this['_widthFitt'+'ing']=_0x4923fc,this['_scheduleR'+'eflow']());}get['widthFitti'+'ng'](){return this['_widthFitt'+'ing'];}set['heightFitt'+'ing'](_0x2e7f08){_0x2e7f08!==this['_heightFit'+'ting']&&(this['_heightFit'+'ting']=_0x2e7f08,this['_scheduleR'+'eflow']());}get['heightFitt'+'ing'](){return this['_heightFit'+'ting'];}set['wrap'](_0x2766d0){_0x2766d0!==this['_wrap']&&(this['_wrap']=_0x2766d0,this['_scheduleR'+'eflow']());}get['wrap'](){return this['_wrap'];}['_isSelfOrC'+'hild'](_0x35410f){return _0x35410f===this['entity']||this['entity']['children']['indexOf'](_0x35410f)!==-(0x45c+0xae*-0x9+0x1c3);}['_listenFor'+'ReflowEven'+'ts'](_0x35cd2e,_0x3654ee){_0x35cd2e['element']&&(_0x35cd2e['element'][_0x3654ee]('enableelem'+'ent',this['_scheduleR'+'eflow'],this),_0x35cd2e['element'][_0x3654ee]('disableele'+'ment',this['_scheduleR'+'eflow'],this),_0x35cd2e['element'][_0x3654ee]('resize',this['_scheduleR'+'eflow'],this),_0x35cd2e['element'][_0x3654ee]('set:pivot',this['_scheduleR'+'eflow'],this)),_0x35cd2e['layoutchil'+'d']&&(_0x35cd2e['layoutchil'+'d'][_0x3654ee]('set_enable'+'d',this['_scheduleR'+'eflow'],this),_0x35cd2e['layoutchil'+'d'][_0x3654ee]('resize',this['_scheduleR'+'eflow'],this));}['_onElement'+'OrLayoutCo'+'mponentAdd'](_0x34805d){this['_isSelfOrC'+'hild'](_0x34805d)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x34805d,'on'),this['_scheduleR'+'eflow']());}['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'](_0x3f726f){this['_isSelfOrC'+'hild'](_0x3f726f)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x3f726f,'off'),this['_scheduleR'+'eflow']());}['_onChildIn'+'sert'](_0x43b701){this['_listenFor'+'ReflowEven'+'ts'](_0x43b701,'on'),this['_scheduleR'+'eflow']();}['_onChildRe'+'move'](_0x85b28e){this['_listenFor'+'ReflowEven'+'ts'](_0x85b28e,'off'),this['_scheduleR'+'eflow']();}['_scheduleR'+'eflow'](){this['enabled']&&this['entity']&&this['entity']['enabled']&&!this['_isPerform'+'ingReflow']&&this['system']['scheduleRe'+'flow'](this);}['reflow'](){const _0x5b9cf0=mg(this['entity']),_0x1d13a2=this['entity']['children']['filter'](eR)['map'](mg);if(!_0x5b9cf0||_0x1d13a2['length']===-0x134c+-0x8*0x1c8+0x218c)return;const _0x2f6326=Math['max'](_0x5b9cf0['calculated'+'Width'],0x1a00+-0x1716+-0x1*0x2ea),_0x5c7fd6=Math['max'](_0x5b9cf0['calculated'+'Height'],-0x7*0x39+0xf25+-0xd96),_0x1abe33={'orientation':this['_orientati'+'on'],'reverseX':this['_reverseX'],'reverseY':this['_reverseY'],'alignment':this['_alignment'],'padding':this['_padding'],'spacing':this['_spacing'],'widthFitting':this['_widthFitt'+'ing'],'heightFitting':this['_heightFit'+'ting'],'wrap':this['_wrap'],'containerSize':new J(_0x2f6326,_0x5c7fd6)};this['_isPerform'+'ingReflow']=!(-0x1e47+-0x1*-0x1931+0x1*0x516);const _0xe8d228=this['_layoutCal'+'culator']['calculateL'+'ayout'](_0x1d13a2,_0x1abe33);this['_isPerform'+'ingReflow']=!(0x1d9f*-0x1+-0x22a4+-0x3*-0x156c),this['fire']('reflow',_0xe8d228);}['onEnable'](){this['_scheduleR'+'eflow']();}['onRemove'](){this['entity']['off']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['off']('childremov'+'e',this['_onChildRe'+'move'],this),this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'off'),this['entity']['children']['forEach'](_0x4e32ee=>{this['_listenFor'+'ReflowEven'+'ts'](_0x4e32ee,'off');}),this['system']['app']['systems']['element']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['element']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this);}}class tR{constructor(){this['enabled']=!(0x1ac3*0x1+0x20*-0xd0+0xf*-0xd);}}const dv=['enabled'],sR=-0x1*-0xe0c+-0x1b8a+0xde2*0x1;class iR extends lt{constructor(_0x46e38a){super(_0x46e38a),this['id']='layoutgrou'+'p',this['ComponentT'+'ype']=cv,this['DataType']=tR,this['schema']=dv,this['_reflowQue'+'ue']=[],this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0xf52513,_0x1c4e5c,_0x5983dc){_0x1c4e5c['enabled']!==void(0xc5a+0x2e0+0x2*-0x79d)&&(_0xf52513['enabled']=_0x1c4e5c['enabled']),_0x1c4e5c['orientatio'+'n']!==void(-0x11*0x151+0x2540+-0xedf)&&(_0xf52513['orientatio'+'n']=_0x1c4e5c['orientatio'+'n']),_0x1c4e5c['reverseX']!==void(-0xd48+-0xb*0x3d+-0x3*-0x54d)&&(_0xf52513['reverseX']=_0x1c4e5c['reverseX']),_0x1c4e5c['reverseY']!==void(0x1f36+-0x8bc+-0xe*0x19b)&&(_0xf52513['reverseY']=_0x1c4e5c['reverseY']),_0x1c4e5c['alignment']!==void(0x4*-0x71f+-0x25a1+0x421d*0x1)&&(_0xf52513['alignment']=Array['isArray'](_0x1c4e5c['alignment'])?new J(_0x1c4e5c['alignment']):_0x1c4e5c['alignment']),_0x1c4e5c['padding']!==void(-0x3*-0x757+-0x2b8+-0x134d)&&(_0xf52513['padding']=Array['isArray'](_0x1c4e5c['padding'])?new ae(_0x1c4e5c['padding']):_0x1c4e5c['padding']),_0x1c4e5c['spacing']!==void(-0x3e*0x6c+0x3a*0x31+0xf0e)&&(_0xf52513['spacing']=Array['isArray'](_0x1c4e5c['spacing'])?new J(_0x1c4e5c['spacing']):_0x1c4e5c['spacing']),_0x1c4e5c['widthFitti'+'ng']!==void(0x14d7+0x1f6b+-0x3442)&&(_0xf52513['widthFitti'+'ng']=_0x1c4e5c['widthFitti'+'ng']),_0x1c4e5c['heightFitt'+'ing']!==void(0xd60+-0x1914+-0xe*-0xd6)&&(_0xf52513['heightFitt'+'ing']=_0x1c4e5c['heightFitt'+'ing']),_0x1c4e5c['wrap']!==void(0x1116+-0x1*-0x222f+0x7d*-0x69)&&(_0xf52513['wrap']=_0x1c4e5c['wrap']),super['initialize'+'ComponentD'+'ata'](_0xf52513,_0x1c4e5c,_0x5983dc);}['cloneCompo'+'nent'](_0x237529,_0x1dadc1){const _0x29dfeb=_0x237529['layoutgrou'+'p'];return this['addCompone'+'nt'](_0x1dadc1,{'enabled':_0x29dfeb['enabled'],'orientation':_0x29dfeb['orientatio'+'n'],'reverseX':_0x29dfeb['reverseX'],'reverseY':_0x29dfeb['reverseY'],'alignment':_0x29dfeb['alignment'],'padding':_0x29dfeb['padding'],'spacing':_0x29dfeb['spacing'],'widthFitting':_0x29dfeb['widthFitti'+'ng'],'heightFitting':_0x29dfeb['heightFitt'+'ing'],'wrap':_0x29dfeb['wrap']});}['scheduleRe'+'flow'](_0xad1c2){this['_reflowQue'+'ue']['indexOf'](_0xad1c2)===-(0x93f+-0x1d3*-0x8+-0x17d6)&&this['_reflowQue'+'ue']['push'](_0xad1c2);}['_onPostUpd'+'ate'](){this['_processRe'+'flowQueue']();}['_processRe'+'flowQueue'](){if(this['_reflowQue'+'ue']['length']===-0x2*0x4d8+0x1f3*0xa+-0x9ce)return;let _0x4621c7=-0x12cb+0xc*0x1be+-0x21d*0x1;for(;this['_reflowQue'+'ue']['length']>-0x81d+-0x30*0x38+0x1*0x129d;){const _0x448723=this['_reflowQue'+'ue']['slice']();this['_reflowQue'+'ue']['length']=0x2605+-0x1df7+0x80e*-0x1,_0x448723['sort']((_0x1527cc,_0x27739a)=>_0x1527cc['entity']['graphDepth']-_0x27739a['entity']['graphDepth']);for(let _0x2538f8=0x2*0x8ac+0x1fea+-0x1e5*0x1a;_0x2538f8<_0x448723['length'];++_0x2538f8)_0x448723[_0x2538f8]['reflow']();if(++_0x4621c7>=sR){console['warn']('Max\x20reflow'+'\x20iteration'+'s\x20limit\x20re'+'ached,\x20bai'+'ling.');break;}}}['_onRemoveC'+'omponent'](_0x10d7a7,_0x1a64ea){_0x1a64ea['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}we['_buildAcce'+'ssors'](cv['prototype'],dv);class rR{constructor(){h(this,'map',new Map());}['destroy'](_0x4d37da){this['map']['forEach'](_0x1b1254=>_0x1b1254['mesh']['destroy']());}}const aR=new Ht(),fv=(_0x40b3e1,_0x560786)=>{const _0x1ab54d=aR['get'](_0x40b3e1,()=>new rR());let _0x10ba4d=_0x1ab54d['map']['get'](_0x560786);if(!_0x10ba4d){let _0x45cd21,_0x2c653e;switch(_0x560786){case'box':_0x45cd21=Ge['fromGeomet'+'ry'](_0x40b3e1,new Ff()),_0x2c653e={'x':0x2,'y':0x2,'z':0x2,'uv':(-0x1b37+0x459+0x16e0)/(0x12b*0xb+0x2c1+-0x1*0xf97)};break;case'capsule':_0x45cd21=Ge['fromGeomet'+'ry'](_0x40b3e1,new JA({'radius':0.5,'height':0x2})),_0x2c653e={'x':Math['PI']*(0xa2a*-0x2+-0x1*-0x18e5+0x1*-0x48f),'y':Math['PI'],'z':Math['PI']*(-0x180e+-0x3ca*-0x2+-0x41f*-0x4),'uv':(0x5*-0x7a3+-0xcf1*0x3+-0x1*-0x4d03)/(0x53*-0x17+-0x21cf+-0x2947*-0x1)+(-0x20b*0xc+0x1f28*0x1+0x6a3*-0x1)/(0x88f+-0x175+-0xf*0x79)/(-0xb9f+0xa67*0x1+-0x13b*-0x1)*(-0x2*-0x161+-0x1b2f+0x186f)};break;case'cone':_0x45cd21=Ge['fromGeomet'+'ry'](_0x40b3e1,new eb({'baseRadius':0.5,'peakRadius':0x0,'height':0x1})),_0x2c653e={'x':2.54,'y':2.54,'z':2.54,'uv':(-0x1681+0x580+0x1102)/(0x1f53+-0x1*-0x2627+0x4577*-0x1)+(-0x1*-0x1fc7+-0x14a1+-0xb25)/(-0xb51*-0x2+-0x23*0x5+-0x48*0x4e)/(-0x38*-0x72+-0x45*-0x1c+0x3*-0xad3)};break;case'cylinder':_0x45cd21=Ge['fromGeomet'+'ry'](_0x40b3e1,new tb({'radius':0.5,'height':0x1})),_0x2c653e={'x':Math['PI'],'y':(-0xabc*-0x3+0x1237+-0x326b*0x1+0.79)*(-0x1*0xa65+0x59*0x14+0x373),'z':Math['PI'],'uv':(-0x8d6+0x157f+-0x14*0xa2)/(-0x2*0x9c+-0x7*-0x3b9+-0x18d4)+(-0x1c61+0x159+0x1b09)/(0x802+0xa2*0xa+-0xe53)/(0x8f5+0x28*0x42+-0x1342)*(-0x981+0x653+0x330)};break;case'plane':_0x45cd21=Ge['fromGeomet'+'ry'](_0x40b3e1,new sb({'halfExtents':new J(0x3ed*-0x6+-0x169d+0x2e2b+0.5,-0x250*0xe+0x1*-0xc6e+0x2cce+0.5),'widthSegments':0x1,'lengthSegments':0x1})),_0x2c653e={'x':0x0,'y':0x1,'z':0x0,'uv':0x1};break;case'sphere':_0x45cd21=Ge['fromGeomet'+'ry'](_0x40b3e1,new By({'radius':0.5})),_0x2c653e={'x':Math['PI'],'y':Math['PI'],'z':Math['PI'],'uv':0x1};break;case'torus':_0x45cd21=Ge['fromGeomet'+'ry'](_0x40b3e1,new ib({'tubeRadius':0.2,'ringRadius':0.3})),_0x2c653e={'x':Math['PI']*(-0x1*-0x855+-0x86*-0x23+-0x1aa7*0x1+0.5)*(0x2005*-0x1+-0x1d71*0x1+0x3d76+0.5)-Math['PI']*(0x22e8+-0x4*-0x601+-0x3aec+0.1)*(-0x801+0x1c7e+-0x147d+0.1),'y':0.4,'z':0.4,'uv':0x1};break;default:throw new Error('Invalid\x20pr'+'imitive\x20ty'+'pe:\x20'+_0x560786);}_0x45cd21['incRefCoun'+'t'](),_0x10ba4d={'mesh':_0x45cd21,'area':_0x2c653e},_0x1ab54d['map']['set'](_0x560786,_0x10ba4d);}return _0x10ba4d;};class uv extends we{constructor(_0x484e00,_0xd9cfb2){super(_0x484e00,_0xd9cfb2),h(this,'_type','asset'),h(this,'_asset',null),h(this,'_model',null),h(this,'_mapping',{}),h(this,'_castShado'+'ws',!(-0x1*-0x655+-0xda8+0x753)),h(this,'_receiveSh'+'adows',!(0x20c5*0x1+-0x7*0x10+-0x2055)),h(this,'_materialA'+'sset',null),h(this,'_material'),h(this,'_castShado'+'wsLightmap',!(0x1*0x26db+-0x5b0+0x4bd*-0x7)),h(this,'_lightmapp'+'ed',!(-0x79d+-0x1*-0xc5+0x6d9*0x1)),h(this,'_lightmapS'+'izeMultipl'+'ier',0x690+-0x145*-0x2+-0x89*0x11),h(this,'isStatic',!(-0x2136+-0x3*0x2a9+0x2932)),h(this,'_layers',[Wi]),h(this,'_batchGrou'+'pId',-(0xc0e+-0x37*0x2f+-0x4*0x7d)),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_materialE'+'vents',null),h(this,'_clonedMod'+'el',!(0xbc0*-0x2+-0x243*0xf+0x396e)),h(this,'_batchGrou'+'p',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_material']=_0x484e00['defaultMat'+'erial'],_0xd9cfb2['on']('remove',this['onRemoveCh'+'ild'],this),_0xd9cfb2['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0xd9cfb2['on']('insert',this['onInsertCh'+'ild'],this),_0xd9cfb2['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['meshInstan'+'ces'](_0x5845de){this['_model']&&(this['_model']['meshInstan'+'ces']=_0x5845de);}get['meshInstan'+'ces'](){return this['_model']?this['_model']['meshInstan'+'ces']:null;}set['customAabb'](_0x505bdc){if(this['_customAab'+'b']=_0x505bdc,this['_model']){const _0x260b94=this['_model']['meshInstan'+'ces'];if(_0x260b94){for(let _0x4b154b=0x1918+0x13*0x15d+-0x32ff;_0x4b154b<_0x260b94['length'];_0x4b154b++)_0x260b94[_0x4b154b]['setCustomA'+'abb'](this['_customAab'+'b']);}}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x273e6d){if(this['_type']!==_0x273e6d){if(this['_area']=null,this['_type']=_0x273e6d,_0x273e6d==='asset')this['_asset']!==null?this['_bindModel'+'Asset'](this['_asset']):this['model']=null;else{const _0x5388d3=fv(this['system']['app']['graphicsDe'+'vice'],_0x273e6d);this['_area']=_0x5388d3['area'];const _0x323df7=_0x5388d3['mesh'],_0x51c951=new He(),_0x293575=new $i();_0x293575['graph']=_0x51c951,_0x293575['meshInstan'+'ces']=[new We(_0x323df7,this['_material'],_0x51c951)],this['model']=_0x293575,this['_asset']=null;}}}get['type'](){return this['_type'];}set['asset'](_0x357f16){const _0x840b4=this['system']['app']['assets'];let _0xa0285a=_0x357f16;if(_0x357f16 instanceof me&&(_0xa0285a=_0x357f16['id']),this['_asset']!==_0xa0285a){if(this['_asset']){_0x840b4['off']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this);const _0x43a13e=_0x840b4['get'](this['_asset']);_0x43a13e&&this['_unbindMod'+'elAsset'](_0x43a13e);}if(this['_asset']=_0xa0285a,this['_asset']){const _0x868f00=_0x840b4['get'](this['_asset']);_0x868f00?this['_bindModel'+'Asset'](_0x868f00):(this['model']=null,_0x840b4['on']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this));}else this['model']=null;}}get['asset'](){return this['_asset'];}set['model'](_0x11845e){if(this['_model']!==_0x11845e){if(_0x11845e&&_0x11845e['_immutable']){M['error']('Invalid\x20at'+'tempt\x20to\x20a'+'ssign\x20a\x20mo'+'del\x20to\x20mul'+'tiple\x20Mode'+'lComponent'+'s');return;}if(this['_model']&&(this['_model']['_immutable']=!(0x4*-0x98e+0xd3*-0x9+0x2da4),this['removeMode'+'lFromLayer'+'s'](),this['_model']['getGraph']()['destroy'](),delete this['_model']['_entity'],this['_clonedMod'+'el']&&(this['_model']['destroy'](),this['_clonedMod'+'el']=!(0x1825+0x145*-0x1a+0x8de))),this['_model']=_0x11845e,this['_model']){this['_model']['_immutable']=!(-0x2566+-0x1*0x2195+0x46fb);const _0x1ff702=this['_model']['meshInstan'+'ces'];for(let _0x4aac32=0x1*0xe95+0xed*0x25+-0x30d6;_0x4aac32<_0x1ff702['length'];_0x4aac32++)_0x1ff702[_0x4aac32]['castShadow']=this['_castShado'+'ws'],_0x1ff702[_0x4aac32]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x1ff702[_0x4aac32]['setCustomA'+'abb'](this['_customAab'+'b']);this['lightmappe'+'d']=this['_lightmapp'+'ed'],this['entity']['addChild'](this['_model']['graph']),this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_model']['_entity']=this['entity'],this['entity']['animation']&&this['entity']['animation']['setModel'](this['_model']),this['entity']['anim']&&this['entity']['anim']['rebind'](),this['type']==='asset'?this['mapping']=this['_mapping']:this['_unsetMate'+'rialEvents']();}}}get['model'](){return this['_model'];}set['lightmappe'+'d'](_0x27c33c){if(_0x27c33c!==this['_lightmapp'+'ed']&&(this['_lightmapp'+'ed']=_0x27c33c,this['_model'])){const _0x1ffe26=this['_model']['meshInstan'+'ces'];for(let _0x548f82=-0x461+-0xeb1*0x2+0x21c3;_0x548f82<_0x1ffe26['length'];_0x548f82++)_0x1ffe26[_0x548f82]['setLightma'+'pped'](_0x27c33c);}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x2beeef){if(this['_castShado'+'ws']===_0x2beeef)return;const _0x54de52=this['_model'];if(_0x54de52){const _0x11cdba=this['layers'],_0x43691f=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x2beeef)for(let _0x5566ad=0x1b*0x63+-0x6c5*-0x1+-0x1136;_0x5566ad<_0x11cdba['length'];_0x5566ad++){const _0x59a7bc=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x5566ad]);_0x59a7bc&&_0x59a7bc['removeShad'+'owCasters'](_0x54de52['meshInstan'+'ces']);}const _0x3b7384=_0x54de52['meshInstan'+'ces'];for(let _0x4d8892=0x1150+-0x1afa+0x9aa*0x1;_0x4d8892<_0x3b7384['length'];_0x4d8892++)_0x3b7384[_0x4d8892]['castShadow']=_0x2beeef;if(!this['_castShado'+'ws']&&_0x2beeef)for(let _0x5736ab=-0xfb4+0x1fa0+-0xfec;_0x5736ab<_0x11cdba['length'];_0x5736ab++){const _0x2e62cb=_0x43691f['layers']['getLayerBy'+'Id'](_0x11cdba[_0x5736ab]);_0x2e62cb&&_0x2e62cb['addShadowC'+'asters'](_0x54de52['meshInstan'+'ces']);}}this['_castShado'+'ws']=_0x2beeef;}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0xd9fc14){if(this['_receiveSh'+'adows']!==_0xd9fc14&&(this['_receiveSh'+'adows']=_0xd9fc14,this['_model'])){const _0x27871e=this['_model']['meshInstan'+'ces'];for(let _0x17b5a5=-0xbb7+-0x978+-0xb*-0x1ed,_0x1856ca=_0x27871e['length'];_0x17b5a5<_0x1856ca;_0x17b5a5++)_0x27871e[_0x17b5a5]['receiveSha'+'dow']=_0xd9fc14;}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x320a2a){this['_castShado'+'wsLightmap']=_0x320a2a;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x523953){this['_lightmapS'+'izeMultipl'+'ier']=_0x523953;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x2d3c9d){const _0x5773f7=this['system']['app']['scene']['layers'];if(this['meshInstan'+'ces'])for(let _0x2770ca=-0x189d+0x204a+-0x7ad;_0x2770ca<this['_layers']['length'];_0x2770ca++){const _0x1d41c4=_0x5773f7['getLayerBy'+'Id'](this['_layers'][_0x2770ca]);_0x1d41c4&&_0x1d41c4['removeMesh'+'Instances'](this['meshInstan'+'ces']);}this['_layers']['length']=-0x4ce+-0x2585+0x2a53;for(let _0x5a4a75=0xf2e*0x1+0x1625*-0x1+0x6f7;_0x5a4a75<_0x2d3c9d['length'];_0x5a4a75++)this['_layers'][_0x5a4a75]=_0x2d3c9d[_0x5a4a75];if(!(!this['enabled']||!this['entity']['enabled']||!this['meshInstan'+'ces']))for(let _0x3626e4=0x23a8+0x11b0+0xd56*-0x4;_0x3626e4<this['_layers']['length'];_0x3626e4++){const _0x2124d3=_0x5773f7['getLayerBy'+'Id'](this['_layers'][_0x3626e4]);_0x2124d3&&_0x2124d3['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x311976){var _0x340f21,_0x206804;this['_batchGrou'+'pId']!==_0x311976&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0x2271+0x1087+0x1*0x11ea&&((_0x340f21=this['system']['app']['batcher'])==null||_0x340f21['remove'](mt['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x311976>=-0x1f6d+-0x79f*0x3+0x364a&&((_0x206804=this['system']['app']['batcher'])==null||_0x206804['insert'](mt['MODEL'],_0x311976,this['entity'])),_0x311976<-0x51b*0x6+-0x22a+0x20cc&&this['_batchGrou'+'pId']>=-0x1*0x25b4+0xb24*-0x3+-0x4*-0x11c8&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_batchGrou'+'pId']=_0x311976);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['materialAs'+'set'](_0x316b7d){let _0x4d5df6=_0x316b7d;_0x316b7d instanceof me&&(_0x4d5df6=_0x316b7d['id']);const _0xda2f0c=this['system']['app']['assets'];if(_0x4d5df6!==this['_materialA'+'sset']){if(this['_materialA'+'sset']){_0xda2f0c['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this);const _0x4c580b=_0xda2f0c['get'](this['_materialA'+'sset']);_0x4c580b&&this['_unbindMat'+'erialAsset'](_0x4c580b);}if(this['_materialA'+'sset']=_0x4d5df6,this['_materialA'+'sset']){const _0x255a6=_0xda2f0c['get'](this['_materialA'+'sset']);_0x255a6?this['_bindMater'+'ialAsset'](_0x255a6):(this['_setMateri'+'al'](this['system']['defaultMat'+'erial']),_0xda2f0c['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this));}else this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['material'](_0x58bfab){this['_material']!==_0x58bfab&&(this['materialAs'+'set']=null,this['_setMateri'+'al'](_0x58bfab));}get['material'](){return this['_material'];}set['mapping'](_0x43185a){if(this['_type']!=='asset'||(this['_unsetMate'+'rialEvents'](),_0x43185a||(_0x43185a={}),this['_mapping']=_0x43185a,!this['_model']))return;const _0x15e55b=this['_model']['meshInstan'+'ces'],_0x4bdb06=this['asset']?this['system']['app']['assets']['get'](this['asset']):null,_0x52612e=_0x4bdb06?_0x4bdb06['data']['mapping']:null;let _0x4660bf=null;for(let _0x3395c3=0x22b6+-0xf2f+0x1*-0x1387,_0xd902bd=_0x15e55b['length'];_0x3395c3<_0xd902bd;_0x3395c3++)if(_0x43185a[_0x3395c3]!==void(0x417+-0x16a1+0x128a))_0x43185a[_0x3395c3]?(_0x4660bf=this['system']['app']['assets']['get'](_0x43185a[_0x3395c3]),this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x4660bf,_0x15e55b[_0x3395c3],_0x3395c3)):_0x15e55b[_0x3395c3]['material']=this['system']['defaultMat'+'erial'];else{if(_0x52612e){if(_0x52612e[_0x3395c3]&&(_0x52612e[_0x3395c3]['material']||_0x52612e[_0x3395c3]['path'])){if(_0x52612e[_0x3395c3]['material']!==void(0xb0b+0xf62*0x2+-0x29cf))_0x4660bf=this['system']['app']['assets']['get'](_0x52612e[_0x3395c3]['material']);else{if(_0x52612e[_0x3395c3]['path']!==void(0x19e4+-0x3*-0x9+0x19ff*-0x1)){const _0x40a43e=this['_getMateri'+'alAssetUrl'](_0x52612e[_0x3395c3]['path']);_0x40a43e&&(_0x4660bf=this['system']['app']['assets']['getByUrl'](_0x40a43e));}}this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x4660bf,_0x15e55b[_0x3395c3],_0x3395c3);}else _0x15e55b[_0x3395c3]['material']=this['system']['defaultMat'+'erial'];}}}get['mapping'](){return this['_mapping'];}['addModelTo'+'Layers'](){const _0x60e668=this['system']['app']['scene']['layers'];for(let _0x301c19=-0x1726+0x24c6+-0xda0;_0x301c19<this['_layers']['length'];_0x301c19++){const _0x1ec801=_0x60e668['getLayerBy'+'Id'](this['_layers'][_0x301c19]);_0x1ec801&&_0x1ec801['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](){const _0xae3890=this['system']['app']['scene']['layers'];for(let _0x11db41=0x3*0x2c5+0xa4+0x8f3*-0x1;_0x11db41<this['_layers']['length'];_0x11db41++){const _0x306c75=_0xae3890['getLayerBy'+'Id'](this['_layers'][_0x11db41]);_0x306c75&&_0x306c75['removeMesh'+'Instances'](this['meshInstan'+'ces']);}}['onRemoveCh'+'ild'](){this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['onInsertCh'+'ild'](){this['_model']&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers']();}['onRemove'](){this['asset']=null,this['model']=null,this['materialAs'+'set']=null,this['_unsetMate'+'rialEvents'](),this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x47c5a5,_0x170e56){this['addModelTo'+'Layers'](),_0x47c5a5['off']('add',this['onLayerAdd'+'ed'],this),_0x47c5a5['off']('remove',this['onLayerRem'+'oved'],this),_0x170e56['on']('add',this['onLayerAdd'+'ed'],this),_0x170e56['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x2001e4){this['layers']['indexOf'](_0x2001e4['id'])<0x910*0x3+-0x1*-0x998+0x24c8*-0x1||_0x2001e4['addMeshIns'+'tances'](this['meshInstan'+'ces']);}['onLayerRem'+'oved'](_0x372d73){this['layers']['indexOf'](_0x372d73['id'])<-0x3*-0xe3+0x94b*-0x1+-0x3*-0x236||_0x372d73['removeMesh'+'Instances'](this['meshInstan'+'ces']);}['_setMateri'+'alEvent'](_0x538caa,_0x57f775,_0x2e5ff5,_0xe8d82f){const _0x2759a8=_0x57f775+':'+_0x2e5ff5;this['system']['app']['assets']['on'](_0x2759a8,_0xe8d82f,this),this['_materialE'+'vents']||(this['_materialE'+'vents']=[]),this['_materialE'+'vents'][_0x538caa]||(this['_materialE'+'vents'][_0x538caa]={}),this['_materialE'+'vents'][_0x538caa][_0x2759a8]={'id':_0x2e5ff5,'handler':_0xe8d82f};}['_unsetMate'+'rialEvents'](){const _0x13e3c4=this['system']['app']['assets'],_0x351dc7=this['_materialE'+'vents'];if(_0x351dc7){for(let _0x2ea3ad=-0x10d7+0xbf6+0x4e1,_0x1efd08=_0x351dc7['length'];_0x2ea3ad<_0x1efd08;_0x2ea3ad++){if(!_0x351dc7[_0x2ea3ad])continue;const _0x250a3c=_0x351dc7[_0x2ea3ad];for(const _0x4110d6 in _0x250a3c)_0x13e3c4['off'](_0x4110d6,_0x250a3c[_0x4110d6]['handler'],this);}this['_materialE'+'vents']=null;}}['_getAssetB'+'yIdOrPath'](_0x2ce1b3){let _0x544c6c=null;if(!isNaN(parseInt(_0x2ce1b3,0xda4+-0x4a3+-0x55*0x1b)))_0x544c6c=this['system']['app']['assets']['get'](_0x2ce1b3);else{if(this['asset']){const _0x28ae43=this['_getMateri'+'alAssetUrl'](_0x2ce1b3);_0x28ae43&&(_0x544c6c=this['system']['app']['assets']['getByUrl'](_0x28ae43));}}return _0x544c6c;}['_getMateri'+'alAssetUrl'](_0x424850){if(!this['asset'])return null;const _0x55a4d1=this['system']['app']['assets']['get'](this['asset']);return _0x55a4d1?_0x55a4d1['getAbsolut'+'eUrl'](_0x424850):null;}['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x43d7ef,_0x989070,_0x17ec1d){const _0x40f613=this['system']['app']['assets'];_0x43d7ef&&(_0x43d7ef['resource']?(_0x989070['material']=_0x43d7ef['resource'],this['_setMateri'+'alEvent'](_0x17ec1d,'remove',_0x43d7ef['id'],function(){_0x989070['material']=this['system']['defaultMat'+'erial'];})):(this['_setMateri'+'alEvent'](_0x17ec1d,'load',_0x43d7ef['id'],function(_0x29d2e0){_0x989070['material']=_0x29d2e0['resource'],this['_setMateri'+'alEvent'](_0x17ec1d,'remove',_0x43d7ef['id'],function(){_0x989070['material']=this['system']['defaultMat'+'erial'];});}),this['enabled']&&this['entity']['enabled']&&_0x40f613['load'](_0x43d7ef)));}['onEnable'](){var _0x283801;const _0x5b1878=this['system']['app'],_0x93f43e=_0x5b1878['scene'],_0x5dd6d8=_0x93f43e==null?void(0x1025*0x2+-0x881*0x4+-0xdd*-0x2):_0x93f43e['layers'];this['_evtLayers'+'Changed']=_0x93f43e['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5dd6d8&&(this['_evtLayerA'+'dded']=_0x5dd6d8['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5dd6d8['on']('remove',this['onLayerRem'+'oved'],this));const _0x2cdc34=this['_type']==='asset';let _0x2aed96;if(this['_model']?this['addModelTo'+'Layers']():_0x2cdc34&&this['_asset']&&(_0x2aed96=_0x5b1878['assets']['get'](this['_asset']),_0x2aed96&&_0x2aed96['resource']!==this['_model']&&this['_bindModel'+'Asset'](_0x2aed96)),this['_materialA'+'sset']&&(_0x2aed96=_0x5b1878['assets']['get'](this['_materialA'+'sset']),_0x2aed96&&_0x2aed96['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x2aed96)),_0x2cdc34&&this['_mapping']){for(const _0x2777a0 in this['_mapping'])this['_mapping'][_0x2777a0]&&(_0x2aed96=this['_getAssetB'+'yIdOrPath'](this['_mapping'][_0x2777a0]),_0x2aed96&&!_0x2aed96['resource']&&_0x5b1878['assets']['load'](_0x2aed96));}this['_batchGrou'+'pId']>=-0x1b92+0x1ef2+-0x360&&((_0x283801=_0x5b1878['batcher'])==null||_0x283801['insert'](mt['MODEL'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x3f2446,_0x431e61,_0x54e7b7,_0x45bb79;const _0x56f167=this['system']['app'],_0x379b27=_0x56f167['scene']['layers'];(_0x3f2446=this['_evtLayers'+'Changed'])==null||_0x3f2446['off'](),this['_evtLayers'+'Changed']=null,_0x379b27&&((_0x431e61=this['_evtLayerA'+'dded'])==null||_0x431e61['off'](),this['_evtLayerA'+'dded']=null,(_0x54e7b7=this['_evtLayerR'+'emoved'])==null||_0x54e7b7['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x2*0x442+0x1fb+0xa7f*-0x1&&((_0x45bb79=_0x56f167['batcher'])==null||_0x45bb79['remove'](mt['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['hide'](){if(this['_model']){const _0x5e6cda=this['_model']['meshInstan'+'ces'];for(let _0x2068c2=-0x1*0xecf+0x25d0+0x7ab*-0x3,_0x1dc7d0=_0x5e6cda['length'];_0x2068c2<_0x1dc7d0;_0x2068c2++)_0x5e6cda[_0x2068c2]['visible']=!(-0xcb3+0x33c+0x65*0x18);}}['show'](){if(this['_model']){const _0x4c2b57=this['_model']['meshInstan'+'ces'];for(let _0x3134ef=0x1831*0x1+-0x139*0xb+-0x55f*0x2,_0x291125=_0x4c2b57['length'];_0x3134ef<_0x291125;_0x3134ef++)_0x4c2b57[_0x3134ef]['visible']=!(-0xbd+0x11*-0xdd+0x2*0x7b5);}}['_bindMater'+'ialAsset'](_0x778812){if(_0x778812['on']('load',this['_onMateria'+'lAssetLoad'],this),_0x778812['on']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x778812['on']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x778812['on']('change',this['_onMateria'+'lAssetChan'+'ge'],this),_0x778812['resource'])this['_onMateria'+'lAssetLoad'](_0x778812);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x778812);}}['_unbindMat'+'erialAsset'](_0x33107f){_0x33107f['off']('load',this['_onMateria'+'lAssetLoad'],this),_0x33107f['off']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x33107f['off']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x33107f['off']('change',this['_onMateria'+'lAssetChan'+'ge'],this);}['_onMateria'+'lAssetAdd'](_0x273a38){this['system']['app']['assets']['off']('add:'+_0x273a38['id'],this['_onMateria'+'lAssetAdd'],this),this['_materialA'+'sset']===_0x273a38['id']&&this['_bindMater'+'ialAsset'](_0x273a38);}['_onMateria'+'lAssetLoad'](_0x383836){this['_setMateri'+'al'](_0x383836['resource']);}['_onMateria'+'lAssetUnlo'+'ad'](_0xc4395f){this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}['_onMateria'+'lAssetRemo'+'ve'](_0x2d0db3){this['_onMateria'+'lAssetUnlo'+'ad'](_0x2d0db3);}['_onMateria'+'lAssetChan'+'ge'](_0x89690){}['_bindModel'+'Asset'](_0x4db7ce){if(this['_unbindMod'+'elAsset'](_0x4db7ce),_0x4db7ce['on']('load',this['_onModelAs'+'setLoad'],this),_0x4db7ce['on']('unload',this['_onModelAs'+'setUnload'],this),_0x4db7ce['on']('change',this['_onModelAs'+'setChange'],this),_0x4db7ce['on']('remove',this['_onModelAs'+'setRemove'],this),_0x4db7ce['resource'])this['_onModelAs'+'setLoad'](_0x4db7ce);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x4db7ce);}}['_unbindMod'+'elAsset'](_0x531956){_0x531956['off']('load',this['_onModelAs'+'setLoad'],this),_0x531956['off']('unload',this['_onModelAs'+'setUnload'],this),_0x531956['off']('change',this['_onModelAs'+'setChange'],this),_0x531956['off']('remove',this['_onModelAs'+'setRemove'],this);}['_onModelAs'+'setAdded'](_0x476c1a){this['system']['app']['assets']['off']('add:'+_0x476c1a['id'],this['_onModelAs'+'setAdded'],this),_0x476c1a['id']===this['_asset']&&this['_bindModel'+'Asset'](_0x476c1a);}['_onModelAs'+'setLoad'](_0x203c2c){this['model']=_0x203c2c['resource']['clone'](),this['_clonedMod'+'el']=!(-0x20*0xa8+-0x7*0x251+0x2537);}['_onModelAs'+'setUnload'](_0x29b5c1){this['model']=null;}['_onModelAs'+'setChange'](_0x1bf630,_0x20e330,_0x4586c7,_0x35492f){_0x20e330==='data'&&(this['mapping']=this['_mapping']);}['_onModelAs'+'setRemove'](_0x912980){this['model']=null;}['_setMateri'+'al'](_0x45ef47){if(this['_material']===_0x45ef47)return;this['_material']=_0x45ef47;const _0x4c3fb4=this['_model'];if(_0x4c3fb4&&this['_type']!=='asset'){const _0xcccb1=_0x4c3fb4['meshInstan'+'ces'];for(let _0x267504=0x13d2+-0x1353+-0x7f,_0x14c8e2=_0xcccb1['length'];_0x267504<_0x14c8e2;_0x267504++)_0xcccb1[_0x267504]['material']=_0x45ef47;}}}class nR{constructor(){this['enabled']=!(0x1954+-0x1b19+0x1c5);}}const mv=['enabled'];class oR extends lt{constructor(_0x46bd79){super(_0x46bd79),this['id']='model',this['ComponentT'+'ype']=uv,this['DataType']=nR,this['schema']=mv,this['defaultMat'+'erial']=cl(_0x46bd79['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x5ad040,_0x598acd,_0x129c9e){_0x129c9e=['material','materialAs'+'set','asset','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','type','mapping','layers','isStatic','batchGroup'+'Id'],(_0x598acd['batchGroup'+'Id']===null||_0x598acd['batchGroup'+'Id']===void(-0x194c+-0x1*-0x14e3+0x469))&&(_0x598acd['batchGroup'+'Id']=-(-0xf89+0x748+0x842)),_0x598acd['layers']&&_0x598acd['layers']['length']&&(_0x598acd['layers']=_0x598acd['layers']['slice'](0x9*0x43+-0x1*-0x1201+-0xa2e*0x2));for(let _0xef1121=0x3fc+-0x256a+-0xb*-0x30a;_0xef1121<_0x129c9e['length'];_0xef1121++)_0x598acd['hasOwnProp'+'erty'](_0x129c9e[_0xef1121])&&(_0x5ad040[_0x129c9e[_0xef1121]]=_0x598acd[_0x129c9e[_0xef1121]]);_0x598acd['aabbCenter']&&_0x598acd['aabbHalfEx'+'tents']&&(_0x5ad040['customAabb']=new Ie(new I(_0x598acd['aabbCenter']),new I(_0x598acd['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x5ad040,_0x598acd,['enabled']);}['cloneCompo'+'nent'](_0x5e58b6,_0x2fd06e){const _0x279987={'type':_0x5e58b6['model']['type'],'asset':_0x5e58b6['model']['asset'],'castShadows':_0x5e58b6['model']['castShadow'+'s'],'receiveShadows':_0x5e58b6['model']['receiveSha'+'dows'],'castShadowsLightmap':_0x5e58b6['model']['castShadow'+'sLightmap'],'lightmapped':_0x5e58b6['model']['lightmappe'+'d'],'lightmapSizeMultiplier':_0x5e58b6['model']['lightmapSi'+'zeMultipli'+'er'],'isStatic':_0x5e58b6['model']['isStatic'],'enabled':_0x5e58b6['model']['enabled'],'layers':_0x5e58b6['model']['layers'],'batchGroupId':_0x5e58b6['model']['batchGroup'+'Id'],'mapping':bh({},_0x5e58b6['model']['mapping'])};let _0x2e72e8=_0x5e58b6['model']['materialAs'+'set'];!(_0x2e72e8 instanceof me)&&_0x2e72e8!=null&&(_0x2e72e8=this['app']['assets']['get'](_0x2e72e8));const _0x439ca1=_0x5e58b6['model']['material'];(!_0x439ca1||_0x439ca1===this['defaultMat'+'erial']||!_0x2e72e8||_0x439ca1===_0x2e72e8['resource'])&&(_0x279987['materialAs'+'set']=_0x2e72e8);const _0xe7d761=this['addCompone'+'nt'](_0x2fd06e,_0x279987);if(_0x5e58b6['model']['model']&&_0x5e58b6['model']['type']==='asset'&&!_0x5e58b6['model']['asset']&&(_0xe7d761['model']=_0x5e58b6['model']['model']['clone'](),_0xe7d761['_clonedMod'+'el']=!(0x9*-0x42+-0x1d40+0x1f92)),_0x279987['materialAs'+'set']||(_0xe7d761['material']=_0x439ca1),_0x5e58b6['model']['model']){const _0x16514e=_0x5e58b6['model']['model']['meshInstan'+'ces'],_0x6debad=_0xe7d761['model']['meshInstan'+'ces'];for(let _0x1954bf=0x1925+-0x1535+-0x3f0;_0x1954bf<_0x16514e['length'];_0x1954bf++)_0x6debad[_0x1954bf]['mask']=_0x16514e[_0x1954bf]['mask'],_0x6debad[_0x1954bf]['material']=_0x16514e[_0x1954bf]['material'],_0x6debad[_0x1954bf]['layer']=_0x16514e[_0x1954bf]['layer'],_0x6debad[_0x1954bf]['receiveSha'+'dow']=_0x16514e[_0x1954bf]['receiveSha'+'dow'];}return _0x5e58b6['model']['customAabb']&&(_0xe7d761['customAabb']=_0x5e58b6['model']['customAabb']['clone']()),_0xe7d761;}['onRemove'](_0x1f4bc7,_0xee233e){_0xee233e['onRemove']();}}we['_buildAcce'+'ssors'](uv['prototype'],mv);const lR=['emitterExt'+'ents','emitterRad'+'ius','emitterExt'+'entsInner','emitterRad'+'iusInner','loop','initialVel'+'ocity','animSpeed','normalMap','particleNo'+'rmal'],hR=['numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','lighting','halfLamber'+'t','intensity','wrap','wrapBounds','depthWrite','noFog','sort','stretch','alignToMot'+'ion','preWarm','emitterSha'+'pe','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animLoop','colorMap','localSpace','screenSpac'+'e','orientatio'+'n'],cR=['scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','velocityGr'+'aph','velocityGr'+'aph2','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2'],sh=['colorMapAs'+'set','normalMapA'+'sset','meshAsset','renderAsse'+'t'];let Na;class dR extends we{constructor(_0x2273d9,_0x28cb2d){super(_0x2273d9,_0x28cb2d),h(this,'_requested'+'Depth',!(0x31d*-0x5+0x1f0a+-0x1b8*0x9)),h(this,'_drawOrder',0x1e5d*-0x1+-0xc7f*-0x1+0x11de),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['on']('set_colorM'+'apAsset',this['onSetColor'+'MapAsset'],this),this['on']('set_normal'+'MapAsset',this['onSetNorma'+'lMapAsset'],this),this['on']('set_meshAs'+'set',this['onSetMeshA'+'sset'],this),this['on']('set_mesh',this['onSetMesh'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_loop',this['onSetLoop'],this),this['on']('set_blendT'+'ype',this['onSetBlend'+'Type'],this),this['on']('set_depthS'+'oftening',this['onSetDepth'+'Softening'],this),this['on']('set_layers',this['onSetLayer'+'s'],this),lR['forEach'](_0x42e273=>{this['on']('set_'+_0x42e273,this['onSetSimpl'+'eProperty'],this);}),hR['forEach'](_0x1f5340=>{this['on']('set_'+_0x1f5340,this['onSetCompl'+'exProperty'],this);}),cR['forEach'](_0x54572f=>{this['on']('set_'+_0x54572f,this['onSetGraph'+'Property'],this);}));}get['data'](){const _0x56d2f6=this['system']['store'][this['entity']['getGuid']()];return _0x56d2f6?_0x56d2f6['data']:null;}set['enabled'](_0x709b80){this['_setValue']('enabled',_0x709b80);}get['enabled'](){return this['data']['enabled'];}set['autoPlay'](_0x191e0b){this['_setValue']('autoPlay',_0x191e0b);}get['autoPlay'](){return this['data']['autoPlay'];}set['numParticl'+'es'](_0x14efc5){this['_setValue']('numParticl'+'es',_0x14efc5);}get['numParticl'+'es'](){return this['data']['numParticl'+'es'];}set['lifetime'](_0x164db1){this['_setValue']('lifetime',_0x164db1);}get['lifetime'](){return this['data']['lifetime'];}set['rate'](_0x25c0e5){this['_setValue']('rate',_0x25c0e5);}get['rate'](){return this['data']['rate'];}set['rate2'](_0x3b38c1){this['_setValue']('rate2',_0x3b38c1);}get['rate2'](){return this['data']['rate2'];}set['startAngle'](_0x50cdd9){this['_setValue']('startAngle',_0x50cdd9);}get['startAngle'](){return this['data']['startAngle'];}set['startAngle'+'2'](_0x34ea3c){this['_setValue']('startAngle'+'2',_0x34ea3c);}get['startAngle'+'2'](){return this['data']['startAngle'+'2'];}set['loop'](_0x1865ec){this['_setValue']('loop',_0x1865ec);}get['loop'](){return this['data']['loop'];}set['preWarm'](_0x2b851f){this['_setValue']('preWarm',_0x2b851f);}get['preWarm'](){return this['data']['preWarm'];}set['lighting'](_0x4a9685){this['_setValue']('lighting',_0x4a9685);}get['lighting'](){return this['data']['lighting'];}set['halfLamber'+'t'](_0x538385){this['_setValue']('halfLamber'+'t',_0x538385);}get['halfLamber'+'t'](){return this['data']['halfLamber'+'t'];}set['intensity'](_0x40d1ae){this['_setValue']('intensity',_0x40d1ae);}get['intensity'](){return this['data']['intensity'];}set['depthWrite'](_0x43837c){this['_setValue']('depthWrite',_0x43837c);}get['depthWrite'](){return this['data']['depthWrite'];}set['noFog'](_0x2f0c33){this['_setValue']('noFog',_0x2f0c33);}get['noFog'](){return this['data']['noFog'];}set['depthSofte'+'ning'](_0x33e853){this['_setValue']('depthSofte'+'ning',_0x33e853);}get['depthSofte'+'ning'](){return this['data']['depthSofte'+'ning'];}set['sort'](_0x5df994){this['_setValue']('sort',_0x5df994);}get['sort'](){return this['data']['sort'];}set['blendType'](_0x5a43a1){this['_setValue']('blendType',_0x5a43a1);}get['blendType'](){return this['data']['blendType'];}set['stretch'](_0x50c05b){this['_setValue']('stretch',_0x50c05b);}get['stretch'](){return this['data']['stretch'];}set['alignToMot'+'ion'](_0x55f0b4){this['_setValue']('alignToMot'+'ion',_0x55f0b4);}get['alignToMot'+'ion'](){return this['data']['alignToMot'+'ion'];}set['emitterSha'+'pe'](_0x2ce690){this['_setValue']('emitterSha'+'pe',_0x2ce690);}get['emitterSha'+'pe'](){return this['data']['emitterSha'+'pe'];}set['emitterExt'+'ents'](_0x113469){this['_setValue']('emitterExt'+'ents',_0x113469);}get['emitterExt'+'ents'](){return this['data']['emitterExt'+'ents'];}set['emitterExt'+'entsInner'](_0x2ea457){this['_setValue']('emitterExt'+'entsInner',_0x2ea457);}get['emitterExt'+'entsInner'](){return this['data']['emitterExt'+'entsInner'];}set['emitterRad'+'ius'](_0x4d1023){this['_setValue']('emitterRad'+'ius',_0x4d1023);}get['emitterRad'+'ius'](){return this['data']['emitterRad'+'ius'];}set['emitterRad'+'iusInner'](_0x1aa14f){this['_setValue']('emitterRad'+'iusInner',_0x1aa14f);}get['emitterRad'+'iusInner'](){return this['data']['emitterRad'+'iusInner'];}set['initialVel'+'ocity'](_0x48a5d7){this['_setValue']('initialVel'+'ocity',_0x48a5d7);}get['initialVel'+'ocity'](){return this['data']['initialVel'+'ocity'];}set['wrap'](_0x110c2c){this['_setValue']('wrap',_0x110c2c);}get['wrap'](){return this['data']['wrap'];}set['wrapBounds'](_0x23cb55){this['_setValue']('wrapBounds',_0x23cb55);}get['wrapBounds'](){return this['data']['wrapBounds'];}set['localSpace'](_0x1db6ba){this['_setValue']('localSpace',_0x1db6ba);}get['localSpace'](){return this['data']['localSpace'];}set['screenSpac'+'e'](_0xcacff0){this['_setValue']('screenSpac'+'e',_0xcacff0);}get['screenSpac'+'e'](){return this['data']['screenSpac'+'e'];}set['colorMapAs'+'set'](_0x4f6ba4){this['_setValue']('colorMapAs'+'set',_0x4f6ba4);}get['colorMapAs'+'set'](){return this['data']['colorMapAs'+'set'];}set['normalMapA'+'sset'](_0x466213){this['_setValue']('normalMapA'+'sset',_0x466213);}get['normalMapA'+'sset'](){return this['data']['normalMapA'+'sset'];}set['mesh'](_0xc84ba1){this['_setValue']('mesh',_0xc84ba1);}get['mesh'](){return this['data']['mesh'];}set['meshAsset'](_0x97182c){this['_setValue']('meshAsset',_0x97182c);}get['meshAsset'](){return this['data']['meshAsset'];}set['renderAsse'+'t'](_0x51c278){this['_setValue']('renderAsse'+'t',_0x51c278);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['orientatio'+'n'](_0x4affe5){this['_setValue']('orientatio'+'n',_0x4affe5);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['particleNo'+'rmal'](_0x5dc76d){this['_setValue']('particleNo'+'rmal',_0x5dc76d);}get['particleNo'+'rmal'](){return this['data']['particleNo'+'rmal'];}set['localVeloc'+'ityGraph'](_0x37c598){this['_setValue']('localVeloc'+'ityGraph',_0x37c598);}get['localVeloc'+'ityGraph'](){return this['data']['localVeloc'+'ityGraph'];}set['localVeloc'+'ityGraph2'](_0x1b9a26){this['_setValue']('localVeloc'+'ityGraph2',_0x1b9a26);}get['localVeloc'+'ityGraph2'](){return this['data']['localVeloc'+'ityGraph2'];}set['velocityGr'+'aph'](_0x268086){this['_setValue']('velocityGr'+'aph',_0x268086);}get['velocityGr'+'aph'](){return this['data']['velocityGr'+'aph'];}set['velocityGr'+'aph2'](_0x5344aa){this['_setValue']('velocityGr'+'aph2',_0x5344aa);}get['velocityGr'+'aph2'](){return this['data']['velocityGr'+'aph2'];}set['rotationSp'+'eedGraph'](_0x4d655a){this['_setValue']('rotationSp'+'eedGraph',_0x4d655a);}get['rotationSp'+'eedGraph'](){return this['data']['rotationSp'+'eedGraph'];}set['rotationSp'+'eedGraph2'](_0x15b621){this['_setValue']('rotationSp'+'eedGraph2',_0x15b621);}get['rotationSp'+'eedGraph2'](){return this['data']['rotationSp'+'eedGraph2'];}set['radialSpee'+'dGraph'](_0x47e218){this['_setValue']('radialSpee'+'dGraph',_0x47e218);}get['radialSpee'+'dGraph'](){return this['data']['radialSpee'+'dGraph'];}set['radialSpee'+'dGraph2'](_0x9f25e8){this['_setValue']('radialSpee'+'dGraph2',_0x9f25e8);}get['radialSpee'+'dGraph2'](){return this['data']['radialSpee'+'dGraph2'];}set['scaleGraph'](_0x11a9cc){this['_setValue']('scaleGraph',_0x11a9cc);}get['scaleGraph'](){return this['data']['scaleGraph'];}set['scaleGraph'+'2'](_0x598fce){this['_setValue']('scaleGraph'+'2',_0x598fce);}get['scaleGraph'+'2'](){return this['data']['scaleGraph'+'2'];}set['colorGraph'](_0x4c4cba){this['_setValue']('colorGraph',_0x4c4cba);}get['colorGraph'](){return this['data']['colorGraph'];}set['colorGraph'+'2'](_0x14a358){this['_setValue']('colorGraph'+'2',_0x14a358);}get['colorGraph'+'2'](){return this['data']['colorGraph'+'2'];}set['alphaGraph'](_0x3c1f13){this['_setValue']('alphaGraph',_0x3c1f13);}get['alphaGraph'](){return this['data']['alphaGraph'];}set['alphaGraph'+'2'](_0x50148c){this['_setValue']('alphaGraph'+'2',_0x50148c);}get['alphaGraph'+'2'](){return this['data']['alphaGraph'+'2'];}set['colorMap'](_0x4f6ca8){this['_setValue']('colorMap',_0x4f6ca8);}get['colorMap'](){return this['data']['colorMap'];}set['normalMap'](_0x5a422d){this['_setValue']('normalMap',_0x5a422d);}get['normalMap'](){return this['data']['normalMap'];}set['animTilesX'](_0x56583b){this['_setValue']('animTilesX',_0x56583b);}get['animTilesX'](){return this['data']['animTilesX'];}set['animTilesY'](_0x2fe0bb){this['_setValue']('animTilesY',_0x2fe0bb);}get['animTilesY'](){return this['data']['animTilesY'];}set['animStartF'+'rame'](_0x178c02){this['_setValue']('animStartF'+'rame',_0x178c02);}get['animStartF'+'rame'](){return this['data']['animStartF'+'rame'];}set['animNumFra'+'mes'](_0x134a6f){this['_setValue']('animNumFra'+'mes',_0x134a6f);}get['animNumFra'+'mes'](){return this['data']['animNumFra'+'mes'];}set['animNumAni'+'mations'](_0x3a4457){this['_setValue']('animNumAni'+'mations',_0x3a4457);}get['animNumAni'+'mations'](){return this['data']['animNumAni'+'mations'];}set['animIndex'](_0x163852){this['_setValue']('animIndex',_0x163852);}get['animIndex'](){return this['data']['animIndex'];}set['randomizeA'+'nimIndex'](_0x560575){this['_setValue']('randomizeA'+'nimIndex',_0x560575);}get['randomizeA'+'nimIndex'](){return this['data']['randomizeA'+'nimIndex'];}set['animSpeed'](_0xa71722){this['_setValue']('animSpeed',_0xa71722);}get['animSpeed'](){return this['data']['animSpeed'];}set['animLoop'](_0x313c27){this['_setValue']('animLoop',_0x313c27);}get['animLoop'](){return this['data']['animLoop'];}set['layers'](_0x141183){this['_setValue']('layers',_0x141183);}get['layers'](){return this['data']['layers'];}set['drawOrder'](_0x1f52f2){this['_drawOrder']=_0x1f52f2,this['emitter']&&(this['emitter']['drawOrder']=_0x1f52f2);}get['drawOrder'](){return this['_drawOrder'];}['_setValue'](_0x52ae09,_0x346a3b){const _0x23ad04=this['data'],_0xefaa81=_0x23ad04[_0x52ae09];_0x23ad04[_0x52ae09]=_0x346a3b,this['fire']('set',_0x52ae09,_0xefaa81,_0x346a3b);}['addMeshIns'+'tanceToLay'+'ers'](){if(this['emitter'])for(let _0x2414be=0x1ff+-0xbd7+-0x276*-0x4;_0x2414be<this['layers']['length'];_0x2414be++){const _0xc75ca6=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x2414be]);_0xc75ca6&&(_0xc75ca6['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]),this['emitter']['_layer']=_0xc75ca6);}}['removeMesh'+'InstanceFr'+'omLayers'](){if(this['emitter'])for(let _0x3f96ab=-0x1c15+-0x1725+0x333a;_0x3f96ab<this['layers']['length'];_0x3f96ab++){const _0xa9c044=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x3f96ab]);_0xa9c044&&_0xa9c044['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}}['onSetLayer'+'s'](_0x199652,_0x2add5f,_0x2d5f35){if(this['emitter']){for(let _0x57b2ac=0x9ad+0x7e6+0x199*-0xb;_0x57b2ac<_0x2add5f['length'];_0x57b2ac++){const _0x2db15d=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x2add5f[_0x57b2ac]);_0x2db15d&&_0x2db15d['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}if(!(!this['enabled']||!this['entity']['enabled']))for(let _0x1cdbf4=-0xf85+-0x2513+0x63*0x88;_0x1cdbf4<_0x2d5f35['length'];_0x1cdbf4++){const _0x2d61df=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x2d5f35[_0x1cdbf4]);_0x2d61df&&_0x2d61df['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}}}['onLayersCh'+'anged'](_0x4e6601,_0x2c7613){this['addMeshIns'+'tanceToLay'+'ers'](),_0x4e6601['off']('add',this['onLayerAdd'+'ed'],this),_0x4e6601['off']('remove',this['onLayerRem'+'oved'],this),_0x2c7613['on']('add',this['onLayerAdd'+'ed'],this),_0x2c7613['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x23bd4b){!this['emitter']||this['layers']['indexOf'](_0x23bd4b['id'])<0x24d9*-0x1+0x327*0x1+-0x13*-0x1c6||_0x23bd4b['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}['onLayerRem'+'oved'](_0x31eb90){!this['emitter']||this['layers']['indexOf'](_0x31eb90['id'])<0x210d+0x11d2*-0x2+-0x33*-0xd||_0x31eb90['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}['_bindColor'+'MapAsset'](_0x41c958){if(_0x41c958['on']('load',this['_onColorMa'+'pAssetLoad'],this),_0x41c958['on']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x41c958['on']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x41c958['on']('change',this['_onColorMa'+'pAssetChan'+'ge'],this),_0x41c958['resource'])this['_onColorMa'+'pAssetLoad'](_0x41c958);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x41c958);}}['_unbindCol'+'orMapAsset'](_0x3c7e8a){_0x3c7e8a['off']('load',this['_onColorMa'+'pAssetLoad'],this),_0x3c7e8a['off']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x3c7e8a['off']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x3c7e8a['off']('change',this['_onColorMa'+'pAssetChan'+'ge'],this);}['_onColorMa'+'pAssetLoad'](_0x354f48){this['colorMap']=_0x354f48['resource'];}['_onColorMa'+'pAssetUnlo'+'ad'](_0x9a446d){this['colorMap']=null;}['_onColorMa'+'pAssetRemo'+'ve'](_0x2af829){this['_onColorMa'+'pAssetUnlo'+'ad'](_0x2af829);}['_onColorMa'+'pAssetChan'+'ge'](_0x3faa2c){}['onSetColor'+'MapAsset'](_0x526b5a,_0x485930,_0x4aff31){const _0x50e13e=this['system']['app']['assets'];if(_0x485930){const _0x3e10a8=_0x50e13e['get'](_0x485930);_0x3e10a8&&this['_unbindCol'+'orMapAsset'](_0x3e10a8);}if(_0x4aff31){_0x4aff31 instanceof me&&(this['data']['colorMapAs'+'set']=_0x4aff31['id'],_0x4aff31=_0x4aff31['id']);const _0x5ca71c=_0x50e13e['get'](_0x4aff31);_0x5ca71c?this['_bindColor'+'MapAsset'](_0x5ca71c):_0x50e13e['once']('add:'+_0x4aff31,_0x454cf4=>{this['_bindColor'+'MapAsset'](_0x454cf4);});}else this['colorMap']=null;}['_bindNorma'+'lMapAsset'](_0x110d81){if(_0x110d81['on']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x110d81['on']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x110d81['on']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x110d81['on']('change',this['_onNormalM'+'apAssetCha'+'nge'],this),_0x110d81['resource'])this['_onNormalM'+'apAssetLoa'+'d'](_0x110d81);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x110d81);}}['_unbindNor'+'malMapAsse'+'t'](_0x2f296a){_0x2f296a['off']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x2f296a['off']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x2f296a['off']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x2f296a['off']('change',this['_onNormalM'+'apAssetCha'+'nge'],this);}['_onNormalM'+'apAssetLoa'+'d'](_0x22798c){this['normalMap']=_0x22798c['resource'];}['_onNormalM'+'apAssetUnl'+'oad'](_0x4e96a6){this['normalMap']=null;}['_onNormalM'+'apAssetRem'+'ove'](_0x220068){this['_onNormalM'+'apAssetUnl'+'oad'](_0x220068);}['_onNormalM'+'apAssetCha'+'nge'](_0x2a1a65){}['onSetNorma'+'lMapAsset'](_0x67a40c,_0x44f54b,_0x2b3b8e){const _0xb1a19d=this['system']['app']['assets'];if(_0x44f54b){const _0x4f1c2b=_0xb1a19d['get'](_0x44f54b);_0x4f1c2b&&this['_unbindNor'+'malMapAsse'+'t'](_0x4f1c2b);}if(_0x2b3b8e){_0x2b3b8e instanceof me&&(this['data']['normalMapA'+'sset']=_0x2b3b8e['id'],_0x2b3b8e=_0x2b3b8e['id']);const _0x19e7df=_0xb1a19d['get'](_0x2b3b8e);_0x19e7df?this['_bindNorma'+'lMapAsset'](_0x19e7df):_0xb1a19d['once']('add:'+_0x2b3b8e,_0x47a279=>{this['_bindNorma'+'lMapAsset'](_0x47a279);});}else this['normalMap']=null;}['_bindMeshA'+'sset'](_0x391709){if(_0x391709['on']('load',this['_onMeshAss'+'etLoad'],this),_0x391709['on']('unload',this['_onMeshAss'+'etUnload'],this),_0x391709['on']('remove',this['_onMeshAss'+'etRemove'],this),_0x391709['on']('change',this['_onMeshAss'+'etChange'],this),_0x391709['resource'])this['_onMeshAss'+'etLoad'](_0x391709);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x391709);}}['_unbindMes'+'hAsset'](_0x227e42){_0x227e42['off']('load',this['_onMeshAss'+'etLoad'],this),_0x227e42['off']('unload',this['_onMeshAss'+'etUnload'],this),_0x227e42['off']('remove',this['_onMeshAss'+'etRemove'],this),_0x227e42['off']('change',this['_onMeshAss'+'etChange'],this);}['_onMeshAss'+'etLoad'](_0x15d694){this['_onMeshCha'+'nged'](_0x15d694['resource']);}['_onMeshAss'+'etUnload'](_0x3c6e20){this['mesh']=null;}['_onMeshAss'+'etRemove'](_0x5c0b4c){this['_onMeshAss'+'etUnload'](_0x5c0b4c);}['_onMeshAss'+'etChange'](_0x5a950f){}['onSetMeshA'+'sset'](_0x1a58f7,_0x54be05,_0x4565de){const _0x12d681=this['system']['app']['assets'];if(_0x54be05){const _0xd64228=_0x12d681['get'](_0x54be05);_0xd64228&&this['_unbindMes'+'hAsset'](_0xd64228);}if(_0x4565de){_0x4565de instanceof me&&(this['data']['meshAsset']=_0x4565de['id'],_0x4565de=_0x4565de['id']);const _0x364c2b=_0x12d681['get'](_0x4565de);_0x364c2b&&this['_bindMeshA'+'sset'](_0x364c2b);}else this['_onMeshCha'+'nged'](null);}['onSetMesh'](_0x27478b,_0x3ed51d,_0x362220){!_0x362220||_0x362220 instanceof me||typeof _0x362220=='number'?this['meshAsset']=_0x362220:this['_onMeshCha'+'nged'](_0x362220);}['_onMeshCha'+'nged'](_0x3703f9){_0x3703f9&&!(_0x3703f9 instanceof Ge)&&(_0x3703f9['meshInstan'+'ces'][0x99*-0x1c+0x1*-0x4a3+-0x1*-0x155f]?_0x3703f9=_0x3703f9['meshInstan'+'ces'][-0x2*0xb66+0x24a8+0x6ee*-0x2]['mesh']:_0x3703f9=null),this['data']['mesh']=_0x3703f9,this['emitter']&&(this['emitter']['mesh']=_0x3703f9,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['onSetRende'+'rAsset'](_0x3b62df,_0x3a9812,_0x402526){const _0x414941=this['system']['app']['assets'];if(_0x3a9812){const _0xdde102=_0x414941['get'](_0x3a9812);_0xdde102&&this['_unbindRen'+'derAsset'](_0xdde102);}if(_0x402526){_0x402526 instanceof me&&(this['data']['renderAsse'+'t']=_0x402526['id'],_0x402526=_0x402526['id']);const _0x3ec488=_0x414941['get'](_0x402526);_0x3ec488&&this['_bindRende'+'rAsset'](_0x3ec488);}else this['_onRenderC'+'hanged'](null);}['_bindRende'+'rAsset'](_0x76ae73){if(_0x76ae73['on']('load',this['_onRenderA'+'ssetLoad'],this),_0x76ae73['on']('unload',this['_onRenderA'+'ssetUnload'],this),_0x76ae73['on']('remove',this['_onRenderA'+'ssetRemove'],this),_0x76ae73['resource'])this['_onRenderA'+'ssetLoad'](_0x76ae73);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x76ae73);}}['_unbindRen'+'derAsset'](_0x2e9db0){var _0x5304ca;_0x2e9db0['off']('load',this['_onRenderA'+'ssetLoad'],this),_0x2e9db0['off']('unload',this['_onRenderA'+'ssetUnload'],this),_0x2e9db0['off']('remove',this['_onRenderA'+'ssetRemove'],this),(_0x5304ca=this['_evtSetMes'+'hes'])==null||_0x5304ca['off'](),this['_evtSetMes'+'hes']=null;}['_onRenderA'+'ssetLoad'](_0x4fb81a){this['_onRenderC'+'hanged'](_0x4fb81a['resource']);}['_onRenderA'+'ssetUnload'](_0x15faad){this['_onRenderC'+'hanged'](null);}['_onRenderA'+'ssetRemove'](_0x1436a9){this['_onRenderA'+'ssetUnload'](_0x1436a9);}['_onRenderC'+'hanged'](_0x506198){var _0x725096;if(!_0x506198){this['_onMeshCha'+'nged'](null);return;}(_0x725096=this['_evtSetMes'+'hes'])==null||_0x725096['off'](),this['_evtSetMes'+'hes']=_0x506198['on']('set:meshes',this['_onRenderS'+'etMeshes'],this),_0x506198['meshes']&&this['_onRenderS'+'etMeshes'](_0x506198['meshes']);}['_onRenderS'+'etMeshes'](_0x22e7df){this['_onMeshCha'+'nged'](_0x22e7df&&_0x22e7df[0x12*0x216+-0x610+-0x7c*0x41]);}['onSetLoop'](_0x1d349a,_0x4bd9de,_0x6d269){this['emitter']&&(this['emitter'][_0x1d349a]=_0x6d269,this['emitter']['resetTime']());}['onSetBlend'+'Type'](_0xb0ee3b,_0x24c956,_0x46fc74){this['emitter']&&(this['emitter'][_0xb0ee3b]=_0x46fc74,this['emitter']['material']['blendType']=_0x46fc74,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['_requestDe'+'pth'](){this['_requested'+'Depth']||(Na||(Na=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](os)),Na&&(Na['incrementC'+'ounter'](),this['_requested'+'Depth']=!(0x2ec*-0x5+-0x1*-0x7db+0x6c1)));}['_releaseDe'+'pth'](){this['_requested'+'Depth']&&Na&&(Na['decrementC'+'ounter'](),this['_requested'+'Depth']=!(0x16e+0x1*-0x2332+-0x4d3*-0x7));}['onSetDepth'+'Softening'](_0x23806f,_0x39db33,_0x2b0a35){_0x39db33!==_0x2b0a35&&(_0x2b0a35?(this['enabled']&&this['entity']['enabled']&&this['_requestDe'+'pth'](),this['emitter']&&(this['emitter'][_0x23806f]=_0x2b0a35)):(this['enabled']&&this['entity']['enabled']&&this['_releaseDe'+'pth'](),this['emitter']&&(this['emitter'][_0x23806f]=_0x2b0a35)),this['emitter']&&(this['reset'](),this['emitter']['resetMater'+'ial'](),this['rebuild']()));}['onSetSimpl'+'eProperty'](_0x17720d,_0x39565b,_0x5323ef){this['emitter']&&(this['emitter'][_0x17720d]=_0x5323ef,this['emitter']['resetMater'+'ial']());}['onSetCompl'+'exProperty'](_0x44d6de,_0x56381c,_0x26d235){this['emitter']&&(this['emitter'][_0x44d6de]=_0x26d235,this['emitter']['resetMater'+'ial'](),this['rebuild'](),this['reset']());}['onSetGraph'+'Property'](_0x4aaaef,_0x2c670f,_0x5c0079){this['emitter']&&(this['emitter'][_0x4aaaef]=_0x5c0079,this['emitter']['rebuildGra'+'phs'](),this['emitter']['resetMater'+'ial']());}['onEnable'](){const _0x15824d=this['system']['app']['scene'],_0x2acc6d=_0x15824d['layers'],_0x4ade2b=this['data'];for(let _0x49d4df=-0x1752+-0x15e1+0x85*0x57,_0x228e15=sh['length'];_0x49d4df<_0x228e15;_0x49d4df++){let _0x20873e=_0x4ade2b[sh[_0x49d4df]];if(_0x20873e){if(!(_0x20873e instanceof me)){if(parseInt(_0x20873e,0x1*0x25b1+0x10cc+-0x3673)>=-0x5*-0x252+-0x71+-0xb29)_0x20873e=this['system']['app']['assets']['get'](_0x20873e);else continue;}_0x20873e&&!_0x20873e['resource']&&this['system']['app']['assets']['load'](_0x20873e);}}if(!this['system']['app']['graphicsDe'+'vice']['disablePar'+'ticleSyste'+'m']){if(!this['emitter']){let _0x574931=_0x4ade2b['mesh'];_0x574931 instanceof Ge||(_0x574931=null),this['emitter']=new UA(this['system']['app']['graphicsDe'+'vice'],{'numParticles':_0x4ade2b['numParticl'+'es'],'emitterExtents':_0x4ade2b['emitterExt'+'ents'],'emitterExtentsInner':_0x4ade2b['emitterExt'+'entsInner'],'emitterRadius':_0x4ade2b['emitterRad'+'ius'],'emitterRadiusInner':_0x4ade2b['emitterRad'+'iusInner'],'emitterShape':_0x4ade2b['emitterSha'+'pe'],'initialVelocity':_0x4ade2b['initialVel'+'ocity'],'wrap':_0x4ade2b['wrap'],'localSpace':_0x4ade2b['localSpace'],'screenSpace':_0x4ade2b['screenSpac'+'e'],'wrapBounds':_0x4ade2b['wrapBounds'],'lifetime':_0x4ade2b['lifetime'],'rate':_0x4ade2b['rate'],'rate2':_0x4ade2b['rate2'],'orientation':_0x4ade2b['orientatio'+'n'],'particleNormal':_0x4ade2b['particleNo'+'rmal'],'animTilesX':_0x4ade2b['animTilesX'],'animTilesY':_0x4ade2b['animTilesY'],'animStartFrame':_0x4ade2b['animStartF'+'rame'],'animNumFrames':_0x4ade2b['animNumFra'+'mes'],'animNumAnimations':_0x4ade2b['animNumAni'+'mations'],'animIndex':_0x4ade2b['animIndex'],'randomizeAnimIndex':_0x4ade2b['randomizeA'+'nimIndex'],'animSpeed':_0x4ade2b['animSpeed'],'animLoop':_0x4ade2b['animLoop'],'startAngle':_0x4ade2b['startAngle'],'startAngle2':_0x4ade2b['startAngle'+'2'],'scaleGraph':_0x4ade2b['scaleGraph'],'scaleGraph2':_0x4ade2b['scaleGraph'+'2'],'colorGraph':_0x4ade2b['colorGraph'],'colorGraph2':_0x4ade2b['colorGraph'+'2'],'alphaGraph':_0x4ade2b['alphaGraph'],'alphaGraph2':_0x4ade2b['alphaGraph'+'2'],'localVelocityGraph':_0x4ade2b['localVeloc'+'ityGraph'],'localVelocityGraph2':_0x4ade2b['localVeloc'+'ityGraph2'],'velocityGraph':_0x4ade2b['velocityGr'+'aph'],'velocityGraph2':_0x4ade2b['velocityGr'+'aph2'],'rotationSpeedGraph':_0x4ade2b['rotationSp'+'eedGraph'],'rotationSpeedGraph2':_0x4ade2b['rotationSp'+'eedGraph2'],'radialSpeedGraph':_0x4ade2b['radialSpee'+'dGraph'],'radialSpeedGraph2':_0x4ade2b['radialSpee'+'dGraph2'],'colorMap':_0x4ade2b['colorMap'],'normalMap':_0x4ade2b['normalMap'],'loop':_0x4ade2b['loop'],'preWarm':_0x4ade2b['preWarm'],'sort':_0x4ade2b['sort'],'stretch':_0x4ade2b['stretch'],'alignToMotion':_0x4ade2b['alignToMot'+'ion'],'lighting':_0x4ade2b['lighting'],'halfLambert':_0x4ade2b['halfLamber'+'t'],'intensity':_0x4ade2b['intensity'],'depthSoftening':_0x4ade2b['depthSofte'+'ning'],'scene':this['system']['app']['scene'],'mesh':_0x574931,'depthWrite':_0x4ade2b['depthWrite'],'noFog':_0x4ade2b['noFog'],'node':this['entity'],'blendType':_0x4ade2b['blendType']}),this['emitter']['meshInstan'+'ce']['node']=this['entity'],this['emitter']['drawOrder']=this['drawOrder'],_0x4ade2b['autoPlay']||(this['pause'](),this['emitter']['meshInstan'+'ce']['visible']=!(-0xf75*-0x2+0x44*-0x14+0x1999*-0x1));}this['emitter']['colorMap']&&this['addMeshIns'+'tanceToLay'+'ers'](),this['_evtLayers'+'Changed']=_0x15824d['on']('set:layers',this['onLayersCh'+'anged'],this),_0x2acc6d&&(this['_evtLayerA'+'dded']=_0x2acc6d['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x2acc6d['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&_0x4ade2b['depthSofte'+'ning']&&this['_requestDe'+'pth']();}}['onDisable'](){var _0x2a304d,_0x23226e,_0x45cc8f;const _0x3ea1dc=this['system']['app']['scene']['layers'];(_0x2a304d=this['_evtLayers'+'Changed'])==null||_0x2a304d['off'](),this['_evtLayers'+'Changed']=null,_0x3ea1dc&&((_0x23226e=this['_evtLayerA'+'dded'])==null||_0x23226e['off'](),this['_evtLayerA'+'dded']=null,(_0x45cc8f=this['_evtLayerR'+'emoved'])==null||_0x45cc8f['off'](),this['_evtLayerR'+'emoved']=null),this['emitter']&&(this['removeMesh'+'InstanceFr'+'omLayers'](),this['data']['depthSofte'+'ning']&&this['_releaseDe'+'pth'](),this['emitter']['camera']=null);}['onBeforeRe'+'move'](){this['enabled']&&(this['enabled']=!(0x377+-0x133*0xf+0xe87)),this['emitter']&&(this['emitter']['destroy'](),this['emitter']=null);for(let _0x233d9f=-0xe4b+-0x1a7*0x5+-0xb47*-0x2;_0x233d9f<sh['length'];_0x233d9f++){const _0x1a2377=sh[_0x233d9f];this['data'][_0x1a2377]&&(this[_0x1a2377]=null);}this['off']();}['reset'](){this['emitter']&&this['emitter']['reset']();}['stop'](){this['emitter']&&(this['emitter']['loop']=!(-0x2*-0x5f3+-0x1bd9+0xff4),this['emitter']['resetTime'](),this['emitter']['addTime'](-0x262c+-0x1127+0x3753,!(-0x252f+0x21dd*0x1+0x352*0x1)));}['pause'](){this['data']['paused']=!(0xb*-0x293+0x1493+0x3df*0x2);}['unpause'](){this['data']['paused']=!(0x69+0x1*0x93f+-0x9a7);}['play'](){this['data']['paused']=!(-0x11*0x83+0x1d77+-0x14c3),this['emitter']&&(this['emitter']['meshInstan'+'ce']['visible']=!(-0x1989*0x1+0x265+0x1*0x1724),this['emitter']['loop']=this['data']['loop'],this['emitter']['resetTime']());}['isPlaying'](){return this['data']['paused']?!(0x22c1+-0xa8b+-0x1835):this['emitter']&&this['emitter']['loop']?!(0x7d0+-0x8*-0x295+-0x1c78):Date['now']()<=this['emitter']['endTime'];}['setInTools'](){const {emitter:_0x3ef3f3}=this;_0x3ef3f3&&!_0x3ef3f3['inTools']&&(_0x3ef3f3['inTools']=!(0x362*0x5+0x576*-0x5+0xa64),this['rebuild']());}['rebuild'](){const _0x586599=this['enabled'];this['enabled']=!(-0x436+0x1c0e+-0x17d7),this['emitter']&&this['emitter']['rebuild'](),this['enabled']=_0x586599;}}class fR{constructor(){this['numParticl'+'es']=0x117e+-0xcb4+-0x4c9,this['rate']=-0x1675+0x1f67+0x8f1*-0x1,this['rate2']=null,this['startAngle']=-0x3e*-0x47+-0xe03+0xa3*-0x5,this['startAngle'+'2']=null,this['lifetime']=-0x25ab+-0x5f8+0x31*0xe5,this['emitterExt'+'ents']=new I(),this['emitterExt'+'entsInner']=new I(),this['emitterRad'+'ius']=0x1*-0x4d5+0x187c+-0x22f*0x9,this['emitterRad'+'iusInner']=0x8dd*0x4+0xa3a+-0x16d7*0x2,this['emitterSha'+'pe']=Ys,this['initialVel'+'ocity']=-0xded*-0x2+0x10f*-0x5+-0x168f,this['wrap']=!(-0x175b+-0x1364+-0x240*-0x13),this['wrapBounds']=new I(),this['localSpace']=!(-0xb2d*-0x2+0x12a2+-0x28fb),this['screenSpac'+'e']=!(0x1a*0x1d+0x117d+-0x146e),this['colorMap']=null,this['colorMapAs'+'set']=null,this['normalMap']=null,this['normalMapA'+'sset']=null,this['loop']=!(0x266f+-0x4b*0x51+-0x4*0x3ad),this['preWarm']=!(-0x378+-0x41*-0x88+0x1*-0x1f0f),this['sort']=-0x2e6+0xb2c+-0x846,this['mode']=dy,this['scene']=null,this['lighting']=!(0x19e5+0x5a*-0x4f+-0x1e2*-0x1),this['halfLamber'+'t']=!(-0x744+0x10b*0x7+-0x8*0x1),this['intensity']=-0x2369+-0x3*-0x16b+-0x3*-0xa63,this['stretch']=0x1775+-0xc8f+0x136*-0x9,this['alignToMot'+'ion']=!(-0xb2a+-0x17cb*-0x1+-0xca0),this['depthSofte'+'ning']=0x10d0*0x1+0xd*-0x14b+0x1*-0x1,this['renderAsse'+'t']=null,this['meshAsset']=null,this['mesh']=null,this['depthWrite']=!(0x24a3+-0x241*-0x11+-0x4af3),this['noFog']=!(0x1a74+0x3f+-0x1ab2),this['orientatio'+'n']=Vh,this['particleNo'+'rmal']=new I(0x7*-0x3f1+0x3*-0x90+0x5*0x5db,0x595*-0x1+0x1*0x43c+0x15a*0x1,-0x7af*-0x4+-0x683*0x1+0x27*-0x9f),this['animTilesX']=0x2490+-0x2f*0x31+-0xe*0x1f8,this['animTilesY']=-0x1291*-0x2+-0x1*-0x2365+-0x4886,this['animStartF'+'rame']=0x176c*-0x1+-0x1*-0x2c7+0x14a5,this['animNumFra'+'mes']=-0x5*0x485+0x1aa+0x14f0,this['animNumAni'+'mations']=-0x16ed+0x1078+-0x676*-0x1,this['animIndex']=0x9b8+0x19*-0xb8+0x840,this['randomizeA'+'nimIndex']=!(0x23f9*0x1+0x13*0xb5+-0x3167),this['animSpeed']=0x4*0x7cb+0x1*0x1edf+-0x3e0a,this['animLoop']=!(0x54e*-0x6+-0x17*-0xa5+0x1*0x1101),this['scaleGraph']=null,this['scaleGraph'+'2']=null,this['colorGraph']=null,this['colorGraph'+'2']=null,this['alphaGraph']=null,this['alphaGraph'+'2']=null,this['localVeloc'+'ityGraph']=null,this['localVeloc'+'ityGraph2']=null,this['velocityGr'+'aph']=null,this['velocityGr'+'aph2']=null,this['rotationSp'+'eedGraph']=null,this['rotationSp'+'eedGraph2']=null,this['radialSpee'+'dGraph']=null,this['radialSpee'+'dGraph2']=null,this['blendType']=Gs,this['enabled']=!(0x2224+0x13*-0x114+-0xda8),this['paused']=!(0x2*0x1362+0x1*0x15fc+-0x3cbf),this['autoPlay']=!(-0x1a47+0x1f87+0x30*-0x1c),this['layers']=[Wi];}}const uR='\x0avarying\x20v'+'ec4\x20texCoo'+'rdsAlphaLi'+'fe;\x0a\x0aunifo'+'rm\x20sampler'+'2D\x20colorMa'+'p;\x0auniform'+'\x20sampler2D'+'\x20colorPara'+'m;\x0auniform'+'\x20float\x20gra'+'phSampleSi'+'ze;\x0aunifor'+'m\x20float\x20gr'+'aphNumSamp'+'les;\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0auniform\x20'+'float\x20soft'+'ening;\x0auni'+'form\x20float'+'\x20colorMult'+';\x0a\x0afloat\x20s'+'aturate(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex\x20\x20=\x20tex'+'ture2D(col'+'orMap,\x20vec'+'2(texCoord'+'sAlphaLife'+'.x,\x201.0\x20-\x20'+'texCoordsA'+'lphaLife.y'+'));\x0a\x20\x20\x20\x20ve'+'c4\x20ramp\x20=\x20'+'texture2D('+'colorParam'+',\x20vec2(tex'+'CoordsAlph'+'aLife.w,\x200'+'.0));\x0a\x20\x20\x20\x20'+'ramp.rgb\x20*'+'=\x20colorMul'+'t;\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20+=\x20te'+'xCoordsAlp'+'haLife.z;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'rgb\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'float\x20a\x20\x20='+'\x20tex.a\x20*\x20r'+'amp.a;\x0a',mR='\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0af'+'loat\x20satur'+'ate(float\x20'+'x)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p(x,\x200.0,\x20'+'1.0);\x0a}\x0a\x0av'+'ec4\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(\x20texture2'+'D(tex,tc),'+'\x20texture2D'+'(tex,tc\x20+\x20'+'graphSampl'+'eSize),\x20fr'+'act(tc.x*g'+'raphNumSam'+'ples)\x20);\x0a}'+'\x0a\x0avec4\x20tex'+'1Dlod_lerp'+'(TEXTURE_A'+'CCEPT_HIGH'+'P(tex),\x20ve'+'c2\x20tc,\x20out'+'\x20vec3\x20w)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'a\x20=\x20textur'+'e2D(tex,tc'+');\x0a\x20\x20\x20\x20vec'+'4\x20b\x20=\x20text'+'ure2D(tex,'+'tc\x20+\x20graph'+'SampleSize'+');\x0a\x20\x20\x20\x20flo'+'at\x20c\x20=\x20fra'+'ct(tc.x*gr'+'aphNumSamp'+'les);\x0a\x0a\x20\x20\x20'+'\x20vec3\x20unpa'+'ckedA\x20=\x20un'+'pack3NFloa'+'ts(a.w);\x0a\x20'+'\x20\x20\x20vec3\x20un'+'packedB\x20=\x20'+'unpack3NFl'+'oats(b.w);'+'\x0a\x20\x20\x20\x20w\x20=\x20m'+'ix(unpacke'+'dA,\x20unpack'+'edB,\x20c);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20mix(a,\x20b,'+'\x20c);\x0a}\x0a\x0ave'+'c2\x20rotate('+'vec2\x20quadX'+'Y,\x20float\x20p'+'Rotation,\x20'+'out\x20mat2\x20r'+'otMatrix)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20cos('+'pRotation)'+';\x0a\x20\x20\x20\x20floa'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x0a\x20\x20\x20\x20mat'+'2\x20m\x20=\x20mat2'+'(c,\x20-s,\x20s,'+'\x20c);\x0a\x20\x20\x20\x20r'+'otMatrix\x20='+'\x20m;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20m\x20*\x20'+'quadXY;\x0a}\x0a'+'\x0avec3\x20bill'+'board(vec3'+'\x20InstanceC'+'oords,\x20vec'+'2\x20quadXY)\x20'+'{\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREEN_'+('SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'os\x20=\x20vec3('+'-1,\x200,\x200)\x20'+'*\x20quadXY.x'+'\x20+\x20vec3(0,'+'\x20-1,\x200)\x20*\x20'+'quadXY.y;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20pos;\x0a}\x0a\x0av'+'ec3\x20custom'+'Face(vec3\x20'+'InstanceCo'+'ords,\x20vec2'+'\x20quadXY)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'pos\x20=\x20face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20faceBinor'+'m\x20*\x20quadXY'+'.y;\x0a\x20\x20\x20\x20re'+'turn\x20pos;\x0a'+'}\x0a\x0avec2\x20sa'+'feNormaliz'+'e(vec2\x20v)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20l\x20=\x20leng'+'th(v);\x0a\x20\x20\x20'+'\x20return\x20(l'+'\x20>\x201e-06)\x20'+'?\x20v\x20/\x20l\x20:\x20'+'v;\x0a}\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20meshLoc'+'alPos\x20=\x20pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20flo'+'at\x20id\x20=\x20fl'+'oor(partic'+'le_vertexD'+'ata.w);\x0a\x0a\x20'+'\x20\x20\x20float\x20r'+'ndFactor\x20='+'\x20fract(sin'+'(id\x20+\x201.0\x20'+'+\x20seed));\x0a'+'\x20\x20\x20\x20vec3\x20r'+'ndFactor3\x20'+'=\x20vec3(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20float\x20uv\x20'+'=\x20id\x20/\x20num'+'ParticlesP'+'ot;\x0a\x20\x20\x20\x20re'+'adInput(uv'+');\x0a\x0a#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20inV'+'el\x20=\x20mat3('+'matrix_mod'+'el)\x20*\x20inVe'+'l;\x0a#endif\x0a'+'\x20\x20\x20\x20vec2\x20v'+'elocityV\x20='+'\x20safeNorma'+'lize((mat3'+'(matrix_vi'+'ew)\x20*\x20inVe'+'l).xy);\x20//'+'\x20should\x20be'+'\x20removed\x20b'+'y\x20compiler'+'\x20if\x20align/'+'stretch\x20is'+'\x20not\x20used\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20particleL'+'ifetime\x20=\x20'+'lifetime;\x0a'+'\x0a\x20\x20\x20\x20if\x20(i')+('nLife\x20<=\x200'+'.0\x20||\x20inLi'+'fe\x20>\x20parti'+'cleLifetim'+'e\x20||\x20!inSh'+'ow)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20meshLoca'+'lPos\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20vec2\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20nlife\x20='+'\x20clamp(inL'+'ife\x20/\x20part'+'icleLifeti'+'me,\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20param'+'Div;\x0a\x20\x20\x20\x20v'+'ec4\x20params'+'\x20=\x20tex1Dlo'+'d_lerp(TEX'+'TURE_PASS('+'internalTe'+'x2),\x20vec2('+'nlife,\x200),'+'\x20paramDiv)'+';\x0a\x20\x20\x20\x20floa'+'t\x20scale\x20=\x20'+'params.y;\x0a'+'\x20\x20\x20\x20float\x20'+'scaleDiv\x20='+'\x20paramDiv.'+'x;\x0a\x20\x20\x20\x20flo'+'at\x20alphaDi'+'v\x20=\x20paramD'+'iv.z;\x0a\x0a\x20\x20\x20'+'\x20scale\x20+=\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20scale'+'DivMult\x20*\x20'+'fract(rndF'+'actor*1000'+'0.0);\x0a\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(quadXY'+'\x20*\x20-0.5\x20+\x20'+'0.5,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'alphaDivMu'+'lt\x20*\x20fract'+'(rndFactor'+'*1000.0),\x20'+'nlife);\x0a#e'+'lse\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(partic'+'le_uv,\x20(al'+'phaDiv\x20*\x202'+'.0\x20-\x201.0)\x20'+'*\x20alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePos\x20='+'\x20inPos;\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePosMo'+'ved\x20=\x20vec3'+'(0.0);\x0a\x0a\x20\x20'+'\x20\x20mat2\x20rot'+'Matrix;\x0a'),pR='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20min(flo'+'or(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y)\x20+\x20animT'+'exParams.x'+',\x20animTexP'+'arams.z);\x0a',_R='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20floor(m'+'od(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y\x20+\x20animTe'+'xParams.x,'+'\x20animTexPa'+'rams.z\x20+\x201'+'.0));\x0a',gR='\x0a\x20\x20\x20\x20float'+'\x20animation'+'Index;\x0a\x0a\x20\x20'+'\x20\x20if\x20(anim'+'TexIndexPa'+'rams.y\x20==\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20anima'+'tionIndex\x20'+'=\x20floor((a'+'nimTexPara'+'ms.w\x20+\x201.0'+')\x20*\x20rndFac'+'tor3.z)\x20*\x20'+'(animTexPa'+'rams.z\x20+\x201'+'.0);\x0a\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20animTex'+'IndexParam'+'s.x\x20*\x20(ani'+'mTexParams'+'.z\x20+\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20float\x20at'+'lasX\x20=\x20(an'+'imationInd'+'ex\x20+\x20animF'+'rame)\x20*\x20an'+'imTexTiles'+'Params.x;\x0a'+'\x20\x20\x20\x20float\x20'+'atlasY\x20=\x201'+'.0\x20-\x20floor'+'(atlasX\x20+\x20'+'1.0)\x20*\x20ani'+'mTexTilesP'+'arams.y;\x0a\x20'+'\x20\x20\x20atlasX\x20'+'=\x20fract(at'+'lasX);\x0a\x0a\x20\x20'+'\x20\x20texCoord'+'sAlphaLife'+'.xy\x20*=\x20ani'+'mTexTilesP'+'arams.xy;\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe.xy\x20+=\x20v'+'ec2(atlasX'+',\x20atlasY);'+'\x0a',SR='\x0avoid\x20read'+'Input(floa'+'t\x20uv)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'\x20=\x20texture'+'2D(particl'+'eTexIN,\x20ve'+'c2(uv,\x200.2'+'5));\x0a\x20\x20\x20\x20v'+'ec4\x20tex2\x20='+'\x20texture2D'+'(particleT'+'exIN,\x20vec2'+'(uv,\x200.75)'+');\x0a\x0a\x20\x20\x20\x20in'+'Pos\x20=\x20tex.'+'xyz;\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inAngle\x20='+'\x20(tex.w\x20<\x20'+'0.0?\x20-tex.'+'w\x20:\x20tex.w)'+'\x20-\x201000.0;'+'\x0a\x20\x20\x20\x20inSho'+'w\x20=\x20tex.w\x20'+'>=\x200.0;\x0a\x20\x20'+'\x20\x20inLife\x20='+'\x20tex2.w;\x0a}'+'\x0a',yR='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0a#'+'define\x20PI2'+'\x206.2831853'+'07179586\x0a\x0a'+'uniform\x20ve'+'c3\x20inBound'+'sSize;\x0auni'+'form\x20vec3\x20'+'inBoundsCe'+'nter;\x0a\x0auni'+'form\x20float'+'\x20maxVel;\x0a\x0a'+'float\x20deco'+'deFloatRG('+'vec2\x20rg)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20rg.y\x20*\x20('+'1.0\x20/\x20255.'+'0)\x20+\x20rg.x;'+'\x0a}\x0a\x0afloat\x20'+'decodeFloa'+'tRGBA(\x20vec'+'4\x20rgba\x20)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20dot(rgba'+',\x20vec4(1.0'+',\x201.0\x20/\x2025'+'5.0,\x201.0\x20/'+'\x2065025.0,\x20'+'1.0\x20/\x201605'+'81375.0));'+'\x0a}\x0a\x0avoid\x20r'+'eadInput(f'+'loat\x20uv)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex0\x20=\x20tex'+'ture2D(par'+'ticleTexIN'+',\x20vec2(uv,'+'\x200.125));\x0a'+'\x20\x20\x20\x20vec4\x20t'+'ex1\x20=\x20text'+'ure2D(part'+'icleTexIN,'+'\x20vec2(uv,\x20'+'0.375));\x0a\x20'+'\x20\x20\x20vec4\x20te'+'x2\x20=\x20textu'+'re2D(parti'+'cleTexIN,\x20'+'vec2(uv,\x200'+'.625));\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'3\x20=\x20textur'+'e2D(partic'+'leTexIN,\x20v'+'ec2(uv,\x200.'+'875));\x0a\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'vec3(decod'+'eFloatRG(t'+'ex0.rg),\x20d'+'ecodeFloat'+'RG(tex0.ba'+'),\x20decodeF'+'loatRG(tex'+'1.rg));\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'(inPos\x20-\x20v'+'ec3(0.5))\x20'+'*\x20inBounds'+'Size\x20+\x20inB'+'oundsCente'+'r;\x0a\x0a\x20\x20\x20\x20in'+'Vel\x20=\x20tex2'+'.xyz;\x0a\x20\x20\x20\x20'+'inVel\x20=\x20(i'+'nVel\x20-\x20vec'+'3(0.5))\x20*\x20'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20float\x20max'+'NegLife\x20=\x20'+'max(lifeti'+'me,\x20(numPa'+('rticles\x20-\x20'+'1.0)\x20*\x20(ra'+'te+rateDiv'+'));\x0a\x20\x20\x20\x20fl'+'oat\x20maxPos'+'Life\x20=\x20lif'+'etime+1.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20inLife'+'\x20*\x20(maxNeg'+'Life\x20+\x20max'+'PosLife)\x20-'+'\x20maxNegLif'+'e;\x0a}\x0a'),vR='\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'gl_FragCoo'+'rd.y<1.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'outPos,\x20(o'+'utAngle\x20+\x20'+'1000.0)\x20*\x20'+'visMode);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(outVel,\x20o'+'utLife);\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',xR='\x0auniform\x20v'+'ec3\x20outBou'+'ndsMul;\x0aun'+'iform\x20vec3'+'\x20outBounds'+'Add;\x0a\x0avec2'+'\x20encodeFlo'+'atRG(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec2\x20enc'+'\x20=\x20vec2(1.'+'0,\x20255.0)\x20'+'*\x20v;\x0a\x20\x20\x20\x20e'+'nc\x20=\x20fract'+'(enc);\x0a\x20\x20\x20'+'\x20enc\x20-=\x20en'+'c.yy\x20*\x20vec'+'2(1.0/255.'+'0,\x201.0/255'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20enc;'+'\x0a}\x0a\x0avec4\x20e'+'ncodeFloat'+'RGBA(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20enc'+'\x20=\x20vec4(1.'+'0,\x20255.0,\x20'+'65025.0,\x201'+'60581375.0'+')\x20*\x20v;\x0a\x20\x20\x20'+'\x20enc\x20=\x20fra'+'ct(enc);\x0a\x20'+'\x20\x20\x20enc\x20-=\x20'+'enc.yzww\x20*'+'\x20vec4(1.0/'+'255.0,1.0/'+'255.0,1.0/'+'255.0,0.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20enc;\x0a}\x0a'+'\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20outP'+'os\x20=\x20outPo'+'s\x20*\x20outBou'+'ndsMul\x20+\x20o'+'utBoundsAd'+'d;\x0a\x20\x20\x20\x20out'+'Angle\x20=\x20fr'+'act(outAng'+'le\x20/\x20PI2);'+'\x0a\x0a\x20\x20\x20\x20outV'+'el\x20=\x20(outV'+'el\x20/\x20maxVe'+'l)\x20+\x20vec3('+'0.5);\x20//\x20T'+'ODO:\x20mul\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'maxNegLife'+'\x20=\x20max(lif'+'etime,\x20(nu'+'mParticles'+'\x20-\x201.0)\x20*\x20'+'(rate+rate'+'Div));\x0a\x20\x20\x20'+'\x20float\x20max'+'PosLife\x20=\x20'+'lifetime+1'+'.0;\x0a\x20\x20\x20\x20ou'+'tLife\x20=\x20(o'+'utLife\x20+\x20m'+'axNegLife)'+'\x20/\x20(maxNeg'+'Life\x20+\x20max'+'PosLife);\x0a'+'\x0a\x20\x20\x20\x20if\x20(g'+'l_FragCoor'+'d.y\x20<\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(encodeFlo'+'atRG(outPo'+'s.x),\x20enco'+'deFloatRG('+'outPos.y))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(gl_'+'FragCoord.'+'y\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(e'+'ncodeFloat'+'RG(outPos.'+'z),\x20encode'+'FloatRG(ou'+'tAngle));\x0a'+'\x20\x20\x20\x20}\x20else'+('\x20if\x20(gl_Fr'+'agCoord.y\x20'+'<\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(out'+'Vel,\x20visMo'+'de*0.5+0.5'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20e'+'ncodeFloat'+'RGBA(outLi'+'fe);\x0a\x20\x20\x20\x20}'+'\x0a}\x0a'),TR='\x0auniform\x20m'+'at3\x20spawnB'+'ounds;\x0auni'+'form\x20vec3\x20'+'spawnPosIn'+'nerRatio;\x0a'+'\x0avec3\x20calc'+'SpawnPosit'+'ion(vec3\x20i'+'nBounds,\x20f'+'loat\x20rndFa'+'ctor)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20pos'+'\x20=\x20inBound'+'s\x20-\x20vec3(0'+'.5);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20posAb'+'s\x20=\x20abs(po'+'s);\x0a\x20\x20\x20\x20ve'+'c3\x20maxPos\x20'+'=\x20vec3(max'+'(posAbs.x,'+'\x20max(posAb'+'s.y,\x20posAb'+'s.z)));\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ed'+'ge\x20=\x20maxPo'+'s\x20+\x20(vec3('+'0.5)\x20-\x20max'+'Pos)\x20*\x20spa'+'wnPosInner'+'Ratio;\x0a\x0a\x20\x20'+'\x20\x20pos.x\x20=\x20'+'edge.x\x20*\x20('+'maxPos.x\x20='+'=\x20posAbs.x'+'\x20?\x20sign(po'+'s.x)\x20:\x202.0'+'\x20*\x20pos.x);'+'\x0a\x20\x20\x20\x20pos.y'+'\x20=\x20edge.y\x20'+'*\x20(maxPos.'+'y\x20==\x20posAb'+'s.y\x20?\x20sign'+'(pos.y)\x20:\x20'+'2.0\x20*\x20pos.'+'y);\x0a\x20\x20\x20\x20po'+'s.z\x20=\x20edge'+'.z\x20*\x20(maxP'+'os.z\x20==\x20po'+'sAbs.z\x20?\x20s'+'ign(pos.z)'+'\x20:\x202.0\x20*\x20p'+'os.z);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20return\x20e'+'mitterPos\x20'+'+\x20spawnBou'+'nds\x20*\x20pos;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20sp'+'awnBounds\x20'+'*\x20pos;\x0a#en'+'dif\x0a}\x0a\x0avoi'+'d\x20addIniti'+'alVelocity'+'(inout\x20vec'+'3\x20localVel'+'ocity,\x20vec'+'3\x20inBounds'+')\x20{\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20-=\x20vec3('+'0,\x200,\x20init'+'ialVelocit'+'y);\x0a}\x0a',wR='\x0a\x20\x20\x20\x20write'+'Output();\x0a'+'}\x0a',ER='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20parti'+'cleTexIN;\x0a'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex0;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0aunif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x2;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex3'+';\x0a\x0auniform'+'\x20mat3\x20emit'+'terMatrix;'+'\x0auniform\x20m'+'at3\x20emitte'+'rMatrixInv'+';\x0auniform\x20'+'vec3\x20emitt'+'erScale;\x0a\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Pos;\x0aunifo'+'rm\x20vec3\x20fr'+'ameRandom;'+'\x0auniform\x20v'+'ec3\x20localV'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20vec3\x20v'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20float\x20'+'delta;\x0auni'+'form\x20float'+'\x20rate;\x0auni'+'form\x20float'+'\x20rateDiv;\x0a'+'uniform\x20fl'+'oat\x20lifeti'+'me;\x0aunifor'+'m\x20float\x20nu'+'mParticles'+';\x0auniform\x20'+'float\x20rotS'+'peedDivMul'+'t;\x0auniform'+'\x20float\x20rad'+'ialSpeedDi'+'vMult;\x0auni'+'form\x20float'+'\x20seed;\x0auni'+'form\x20float'+'\x20startAngl'+'e;\x0auniform'+'\x20float\x20sta'+'rtAngle2;\x0a'+'uniform\x20fl'+'oat\x20initia'+'lVelocity;'+'\x0a\x0auniform\x20'+'float\x20grap'+'hSampleSiz'+'e;\x0auniform'+'\x20float\x20gra'+'phNumSampl'+'es;\x0a\x0avec3\x20'+'inPos;\x0avec'+'3\x20inVel;\x0af'+'loat\x20inAng'+'le;\x0abool\x20i'+'nShow;\x0aflo'+'at\x20inLife;'+'\x0afloat\x20vis'+'Mode;\x0a\x0avec'+'3\x20outPos;\x0a'+'vec3\x20outVe'+'l;\x0afloat\x20o'+'utAngle;\x0ab'+'ool\x20outSho'+'w;\x0afloat\x20o'+'utLife;\x0a',AR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x20-1.0;\x0a\x20\x20\x20'+'\x20}\x0a',bR='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20outLi'+'fe\x20<\x200.0?\x20'+'-1.0:\x20visM'+'ode;\x0a',CR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20visM'+'ode\x20=\x20outL'+'ife\x20<\x200.0?'+'\x201.0:\x20visM'+'ode;\x0a',PR='\x0auniform\x20f'+'loat\x20spawn'+'BoundsSphe'+'re;\x0aunifor'+'m\x20float\x20sp'+'awnBoundsS'+'phereInner'+'Ratio;\x0a\x0ave'+'c3\x20calcSpa'+'wnPosition'+'(vec3\x20inBo'+'unds,\x20floa'+'t\x20rndFacto'+'r)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20rnd4\x20'+'=\x20fract(rn'+'dFactor\x20*\x20'+'1000.0);\x0a\x20'+'\x20\x20\x20vec3\x20no'+'rm\x20=\x20norma'+'lize(inBou'+'nds.xyz\x20-\x20'+'vec3(0.5))'+';\x0a\x20\x20\x20\x20floa'+'t\x20r\x20=\x20rnd4'+'\x20*\x20(1.0\x20-\x20'+'spawnBound'+'sSphereInn'+'erRatio)\x20+'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio;\x0a'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20return'+'\x20emitterPo'+'s\x20+\x20norm\x20*'+'\x20r\x20*\x20spawn'+'BoundsSphe'+'re;\x0a#else\x0a'+'\x20\x20\x20\x20return'+'\x20norm\x20*\x20r\x20'+'*\x20spawnBou'+'ndsSphere;'+'\x0a#endif\x0a}\x0a'+'\x0avoid\x20addI'+'nitialVelo'+'city(inout'+'\x20vec3\x20loca'+'lVelocity,'+'\x20vec3\x20inBo'+'unds)\x20{\x0a\x20\x20'+'\x20\x20localVel'+'ocity\x20+=\x20n'+'ormalize(i'+'nBounds\x20-\x20'+'vec3(0.5))'+'\x20*\x20initial'+'Velocity;\x0a'+'}\x0a',MR='\x0afloat\x20sat'+'urate(floa'+'t\x20x)\x20{\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(x,\x200.0'+',\x201.0);\x0a}\x0a'+'\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0av'+'ec3\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc,\x20out\x20ve'+'c3\x20w)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20a\x20='+'\x20texture2D'+'(tex,\x20tc);'+'\x0a\x20\x20\x20\x20vec4\x20'+'b\x20=\x20textur'+'e2D(tex,\x20t'+'c\x20+\x20graphS'+'ampleSize)'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20g'+'raphNumSam'+'ples);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20unp'+'ackedA\x20=\x20u'+'npack3NFlo'+'ats(a.w);\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20w\x20=\x20'+'mix(unpack'+'edA,\x20unpac'+'kedB,\x20c);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(a.xy'+'z,\x20b.xyz,\x20'+'c);\x0a}\x0a\x0a#de'+'fine\x20HASHS'+'CALE4\x20vec4'+'(1031,\x20.10'+'30,\x20.0973,'+'\x20.1099)\x0ave'+'c4\x20hash41('+'float\x20p)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'p4\x20=\x20fract'+'(vec4(p)\x20*'+'\x20HASHSCALE'+'4);\x0a\x20\x20\x20\x20p4'+'\x20+=\x20dot(p4'+',\x20p4.wzxy+'+'19.19);\x0a\x20\x20'+'\x20\x20return\x20f'+'ract(vec4('+'(p4.x\x20+\x20p4'+'.y)*p4.z,\x20'+'(p4.x\x20+\x20p4'+'.z)*p4.y,\x20'+'(p4.y\x20+\x20p4'+'.z)*p4.w,\x20'+'(p4.z\x20+\x20p4'+'.w)*p4.x))'+';\x0a}\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(gl_FragCo'+'ord.x\x20>\x20nu'+'mParticles'+')\x20discard;'+'\x0a\x0a\x20\x20\x20\x20read'+'Input(vUv0'+'.x);\x0a\x20\x20\x20\x20v'+'isMode\x20=\x20i'+'nShow?\x201.0'+'\x20:\x20-1.0;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20r'+'ndFactor\x20='+'\x20hash41(gl'+'_FragCoord'+('.x\x20+\x20seed)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eRate\x20=\x20ra'+'te\x20+\x20rateD'+'iv\x20*\x20rndFa'+'ctor.x;\x0a\x0a\x20'+'\x20\x20\x20outLife'+'\x20=\x20inLife\x20'+'+\x20delta;\x0a\x20'+'\x20\x20\x20float\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20lifetim'+'e,\x200.0,\x201.'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localV'+'elocityDiv'+';\x0a\x20\x20\x20\x20vec3'+'\x20velocityD'+'iv;\x0a\x20\x20\x20\x20ve'+'c3\x20paramDi'+'v;\x0a\x20\x20\x20\x20vec'+'3\x20localVel'+'ocity\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex0),\x20'+'vec2(nlife'+',\x200),\x20loca'+'lVelocityD'+'iv);\x0a\x20\x20\x20\x20v'+'ec3\x20veloci'+'ty\x20=\x20\x20\x20\x20\x20\x20'+'tex1Dlod_l'+'erp(TEXTUR'+'E_PASS(int'+'ernalTex1)'+',\x20vec2(nli'+'fe,\x200),\x20ve'+'locityDiv)'+';\x0a\x20\x20\x20\x20vec3'+'\x20params\x20=\x20'+'\x20\x20\x20\x20\x20\x20\x20tex'+'1Dlod_lerp'+'(TEXTURE_P'+'ASS(intern'+'alTex2),\x20v'+'ec2(nlife,'+'\x200),\x20param'+'Div);\x0a\x20\x20\x20\x20'+'float\x20rotS'+'peed\x20=\x20par'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rot'+'SpeedDiv\x20='+'\x20paramDiv.'+'y;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20radialP'+'arams\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex3),\x20'+'vec2(nlife'+',\x200),\x20para'+'mDiv);\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeed\x20='+'\x20radialPar'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeedDi'+'v\x20=\x20radial'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20bool\x20'+'respawn\x20=\x20'+'inLife\x20<=\x20'+'0.0\x20||\x20out'+'Life\x20>=\x20li'+'fetime;\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'respawn\x20?\x20'+'calcSpawnP'+'osition(rn'+'dFactor.xy'+'z,\x20rndFact'+'or.x)\x20:\x20in'+'Pos;\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20r'+'espawn\x20?\x20m'+'ix(startAn'+'gle,\x20start'+'Angle2,\x20rn'+'dFactor.x)'+'\x20:\x20inAngle'+';\x0a\x0a#ifndef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20vec')+('3\x20radialVe'+'l\x20=\x20inPos\x20'+'-\x20emitterP'+'os;\x0a#else\x0a'+'\x20\x20\x20\x20vec3\x20r'+'adialVel\x20='+'\x20inPos;\x0a#e'+'ndif\x0a\x20\x20\x20\x20r'+'adialVel\x20='+'\x20(dot(radi'+'alVel,\x20rad'+'ialVel)\x20>\x20'+'1.0E-8)\x20?\x20'+'radialSpee'+'d\x20*\x20normal'+'ize(radial'+'Vel)\x20:\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20+=\x20(radi'+'alSpeedDiv'+'\x20*\x20vec3(2.'+'0)\x20-\x20vec3('+'1.0))\x20*\x20ra'+'dialSpeedD'+'ivMult\x20*\x20r'+'ndFactor.x'+'yz;\x0a\x0a\x20\x20\x20\x20l'+'ocalVeloci'+'ty\x20+=\x20\x20\x20\x20('+'localVeloc'+'ityDiv\x20*\x20v'+'ec3(2.0)\x20-'+'\x20vec3(1.0)'+')\x20*\x20localV'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20velo'+'city\x20+=\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20(vel'+'ocityDiv\x20*'+'\x20vec3(2.0)'+'\x20-\x20vec3(1.'+'0))\x20*\x20velo'+'cityDivMul'+'t\x20*\x20rndFac'+'tor.xyz;\x0a\x20'+'\x20\x20\x20rotSpee'+'d\x20+=\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(rotSpe'+'edDiv\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20rotSpeedD'+'ivMult\x20*\x20r'+'ndFactor.y'+';\x0a\x0a\x20\x20\x20\x20add'+'InitialVel'+'ocity(loca'+'lVelocity,'+'\x20rndFactor'+'.xyz);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20em'+'itterScale'+';\x0a#else\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20(localVel'+'ocity\x20+\x20ra'+'dialVel)\x20/'+'\x20emitterSc'+'ale\x20+\x20emit'+'terMatrixI'+'nv\x20*\x20veloc'+'ity;\x0a#endi'+'f\x0a\x0a\x20\x20\x20\x20out'+'Pos\x20=\x20inPo'+'s\x20+\x20outVel'+'\x20*\x20delta;\x0a'+'\x20\x20\x20\x20outAng'+'le\x20=\x20inAng'+'le\x20+\x20rotSp'+'eed\x20*\x20delt'+'a;\x0a'),IR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',DR='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'*=\x20saturat'+'e(gammaCor'+'rectInput('+'max(a,\x200.0'+')));\x0a\x20\x20\x20\x20i'+'f\x20((rgb.r\x20'+'+\x20rgb.g\x20+\x20'+'rgb.b)\x20<\x200'+'.000001)\x20d'+'iscard;\x0a',LR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3('+'1.0),\x20rgb,'+'\x20vec3(a));'+'\x0a\x20\x20\x20\x20if\x20(r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+'\x20>\x202.99)\x20d'+'iscard;\x0a',RR='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20d'+'iscard;\x0a',OR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20\x20\x20/'+'/\x20XYZ\x20=\x20wo'+'rld\x20pos,\x20W'+'\x20=\x20life\x0aat'+'tribute\x20ve'+'c4\x20particl'+'e_vertexDa'+'ta2;\x20\x20//\x20X'+'\x20=\x20angle,\x20'+'Y\x20=\x20scale,'+'\x20Z\x20=\x20alpha'+',\x20W\x20=\x20velo'+'city.x\x0aatt'+'ribute\x20vec'+'4\x20particle'+'_vertexDat'+'a3;\x20\x20//\x20XY'+'Z\x20=\x20partic'+'le\x20local\x20p'+'os,\x20W\x20=\x20ve'+'locity.y\x0aa'+'ttribute\x20f'+'loat\x20parti'+'cle_vertex'+'Data4;\x20//\x20'+'particle\x20i'+'d\x0a\x0a//\x20type'+'\x20depends\x20o'+'n\x20useMesh\x20'+'property.\x20'+'Start\x20with'+'\x20X\x20=\x20veloc'+'ity.z,\x20Y\x20='+'\x20particle\x20'+'ID\x20and\x20for'+'\x20mesh\x20part'+'icles\x20proc'+'eeds\x20with\x20'+'Z\x20=\x20mesh\x20U'+'V.x,\x20W\x20=\x20m'+'esh\x20UV.y\x0a/'+'/\x20Note:\x20Th'+'is\x20generat'+'es\x20a\x20dupli'+'cate\x20attri'+'bute\x20warni'+'ng,\x20as\x20the'+'\x20scanning\x20'+'we\x20do\x20is\x20v'+'ery\x20simple'+'.\x0a#ifndef\x20'+'USE_MESH\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec2\x20pa'+'rticle_ver'+'texData5;\x0a'+'#else\x0a\x20\x20\x20\x20'+'attribute\x20'+'vec4\x20parti'+'cle_vertex'+'Data5;\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifndef\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20#define\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a#endif\x0a\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20lifetim'+'e;\x0auniform'+'\x20float\x20str'+'etch;\x0aunif'+'orm\x20float\x20'+'seed;\x0aunif'+'orm\x20vec3\x20w'+'rapBounds;'+'\x0auniform\x20v'+'ec3\x20emitte'+'rScale;\x0aun'+('iform\x20vec3'+'\x20faceTange'+'nt;\x0aunifor'+'m\x20vec3\x20fac'+'eBinorm;\x0a\x0a'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex0'+';\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x1;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex2;\x0a#end'+'if\x0auniform'+'\x20vec3\x20emit'+'terPos;\x0a\x0av'+'arying\x20vec'+'4\x20texCoord'+'sAlphaLife'+';\x0a\x0avec2\x20ro'+'tate(vec2\x20'+'quadXY,\x20fl'+'oat\x20pRotat'+'ion,\x20out\x20m'+'at2\x20rotMat'+'rix)\x0a{\x0a\x20\x20\x20'+'\x20float\x20c\x20='+'\x20cos(pRota'+'tion);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20sin(pRota'+'tion);\x0a\x20\x20\x20'+'\x20//vec4\x20ro'+'tationMatr'+'ix\x20=\x20vec4('+'c,\x20-s,\x20s,\x20'+'c);\x0a\x0a\x20\x20\x20\x20m'+'at2\x20m\x20=\x20ma'+'t2(c,\x20-s,\x20'+'s,\x20c);\x0a\x20\x20\x20'+'\x20rotMatrix'+'\x20=\x20m;\x0a\x0a\x20\x20\x20'+'\x20return\x20m\x20'+'*\x20quadXY;\x0a'+'}\x0a\x0avec3\x20bi'+'llboard(ve'+'c3\x20Instanc'+'eCoords,\x20v'+'ec2\x20quadXY'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20return\x20p'+'os;\x0a}\x0a\x0avec'+'3\x20customFa'+'ce(vec3\x20In'+'stanceCoor'+'ds,\x20vec2\x20q'+'uadXY)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20po'+'s\x20=\x20faceTa'+'ngent\x20*\x20qu'+'adXY.x\x20+\x20f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0avoid\x20main'+'(void)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20pa'+'rticlePos\x20'+'=\x20particle'+'_vertexDat'+'a.xyz;\x0a\x20\x20\x20'+'\x20vec3\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20vec3\x20vert'+'Pos\x20=\x20part'+'icle_verte'+'xData3.xyz'+';\x0a\x20\x20\x20\x20vec3'+'\x20inVel\x20=\x20v'+'ec3(partic'+'le_vertexD'+'ata2.w,\x20pa')+('rticle_ver'+'texData3.w'+',\x20particle'+'_vertexDat'+'a5.x);\x0a\x0a\x20\x20'+'\x20\x20float\x20id'+'\x20=\x20floor(p'+'article_ve'+'rtexData4)'+';\x0a\x20\x20\x20\x20floa'+'t\x20rndFacto'+'r\x20=\x20fract('+'sin(id\x20+\x201'+'.0\x20+\x20seed)'+');\x0a\x20\x20\x20\x20vec'+'3\x20rndFacto'+'r3\x20=\x20vec3('+'rndFactor,'+'\x20fract(rnd'+'Factor*10.'+'0),\x20fract('+'rndFactor*'+'100.0));\x0a\x0a'+'#ifdef\x20LOC'+'AL_SPACE\x0a\x20'+'\x20\x20\x20inVel\x20='+'\x20mat3(matr'+'ix_model)\x20'+'*\x20inVel;\x0a#'+'endif\x0a\x20\x20\x20\x20'+'vec2\x20veloc'+'ityV\x20=\x20nor'+'malize((ma'+'t3(matrix_'+'view)\x20*\x20in'+'Vel).xy);\x20'+'//\x20should\x20'+'be\x20removed'+'\x20by\x20compil'+'er\x20if\x20alig'+'n/stretch\x20'+'is\x20not\x20use'+'d\x0a\x0a\x20\x20\x20\x20vec'+'2\x20quadXY\x20='+'\x20vertPos.x'+'y;\x0a\x0a#ifdef'+'\x20USE_MESH\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe\x20=\x20vec4('+'particle_v'+'ertexData5'+'.zw,\x20parti'+'cle_vertex'+'Data2.z,\x20p'+'article_ve'+'rtexData.w'+');\x0a#else\x0a\x20'+'\x20\x20\x20texCoor'+'dsAlphaLif'+'e\x20=\x20vec4(q'+'uadXY\x20*\x20-0'+'.5\x20+\x200.5,\x20'+'particle_v'+'ertexData2'+'.z,\x20partic'+'le_vertexD'+'ata.w);\x0a#e'+'ndif\x0a\x20\x20\x20\x20m'+'at2\x20rotMat'+'rix;\x0a\x0a\x20\x20\x20\x20'+'float\x20inAn'+'gle\x20=\x20part'+'icle_verte'+'xData2.x;\x0a'+'\x20\x20\x20\x20vec3\x20p'+'articlePos'+'Moved\x20=\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20vec3\x20me'+'shLocalPos'+'\x20=\x20particl'+'e_vertexDa'+'ta3.xyz;\x0a'),FR='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20par'+'ticle_vert'+'exData2.y\x20'+'*\x20emitterS'+'cale;\x0a\x20\x20\x20\x20'+'localPos\x20+'+'=\x20particle'+'Pos;\x0a\x0a\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_viewProje'+'ction\x20*\x20ve'+'c4(localPo'+'s,\x201.0);\x0a',NR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20quadXY'+');\x0a',kR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(rgb'+',\x20a);\x0a}\x0a',UR='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20sca'+'le\x20*\x20emitt'+'erScale;\x0a\x20'+'\x20\x20\x20localPo'+'s\x20+=\x20parti'+'clePos;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREEN_SPA'+'CE\x0a\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(loca'+'lPos.x,\x20lo'+'calPos.y,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20vec4(lo'+'calPos.xyz'+',\x201.0);\x0a\x20\x20'+'\x20\x20#endif\x0a',BR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20normal\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20vec3'+'\x20posNormal'+'\x20=\x20-normal'+'\x20*\x200.5\x20+\x200'+'.5;\x0a\x20\x20\x20\x20ne'+'gNormal\x20*='+'\x20negNormal'+';\x0a\x20\x20\x20\x20posN'+'ormal\x20*=\x20p'+'osNormal;\x0a',zR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20//\x20'+'XYZ\x20=\x20part'+'icle\x20posit'+'ion,\x20W\x20=\x20p'+'article\x20ID'+'\x20+\x20random\x20'+'factor\x0a\x0a#i'+'f\x20defined('+'USE_MESH)\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(USE_'+'MESH_UV)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20att'+'ribute\x20vec'+'2\x20particle'+'_uv;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mesh'+'\x20UV\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20par'+'ticle_uv\x20='+'\x20vec2(0.0,'+'\x200.0);\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20mat4\x20m'+'atrix_view'+'Projection'+';\x0auniform\x20'+'mat4\x20matri'+'x_model;\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20numPart'+'iclesPot;\x0a'+'uniform\x20fl'+'oat\x20graphS'+'ampleSize;'+'\x0auniform\x20f'+'loat\x20graph'+'NumSamples'+';\x0auniform\x20'+'float\x20stre'+'tch;\x0aunifo'+'rm\x20vec3\x20wr'+'apBounds;\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Scale;\x0auni'+'form\x20vec3\x20'+'emitterPos'+';\x0auniform\x20'+'vec3\x20faceT'+'angent;\x0aun'+'iform\x20vec3'+'\x20faceBinor'+'m;\x0auniform'+'\x20float\x20rat'+'e;\x0auniform'+'\x20float\x20rat'+'eDiv;\x0aunif'+'orm\x20float\x20'+'lifetime;\x0a'+'uniform\x20fl'+'oat\x20deltaR'+'andomnessS'+'tatic;\x0auni'+'form\x20float'+'\x20scaleDivM'+'ult;\x0aunifo'+'rm\x20float\x20a'+'lphaDivMul'+'t;\x0auniform'+'\x20float\x20see'+'d;\x0auniform'+'\x20float\x20del'+'ta;\x0aunifor'+'m\x20sampler2'+'D\x20particle'+'TexOUT;\x0aun'+'iform\x20samp'+('ler2D\x20part'+'icleTexIN;'+'\x0a\x0a#ifdef\x20P'+'ARTICLE_GP'+'U\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x0;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex2;\x0a#e'+'ndif\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0avarying\x20'+'vec4\x20texCo'+'ordsAlphaL'+'ife;\x0a\x0avec3'+'\x20inPos;\x0ave'+'c3\x20inVel;\x0a'+'float\x20inAn'+'gle;\x0abool\x20'+'inShow;\x0afl'+'oat\x20inLife'+';\x0a'),VR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20max(norm'+'al,\x20vec3(0'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20posNo'+'rmal\x20=\x20max'+'(-normal,\x20'+'vec3(0.0))'+';\x0a',GR='\x0a\x20\x20\x20\x20vec3\x20'+'light\x20=\x20ne'+'gNormal.x*'+'lightCube['+'0]\x20+\x20posNo'+'rmal.x*lig'+'htCube[1]\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20negN'+'ormal.y*li'+'ghtCube[2]'+'\x20+\x20posNorm'+'al.y*light'+'Cube[3]\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20negNor'+'mal.z*ligh'+'tCube[4]\x20+'+'\x20posNormal'+'.z*lightCu'+'be[5];\x0a\x0a\x20\x20'+'\x20\x20rgb\x20*=\x20l'+'ight;\x0a',HR='\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20('+'matrix_mod'+'el\x20*\x20vec4('+'particlePo'+'s,\x201.0)).x'+'yz;\x0a',WR='\x0a\x20\x20\x20\x20vec3\x20'+'localPos\x20='+'\x20meshLocal'+'Pos;\x0a\x20\x20\x20\x20l'+'ocalPos.xy'+'\x20=\x20rotate('+'localPos.x'+'y,\x20inAngle'+',\x20rotMatri'+'x);\x0a\x20\x20\x20\x20lo'+'calPos.yz\x20'+'=\x20rotate(l'+'ocalPos.yz'+',\x20inAngle,'+'\x20rotMatrix'+');\x0a\x0a\x20\x20\x20\x20bi'+'llboard(pa'+'rticlePos,'+'\x20quadXY);\x0a',$R='\x0a\x20\x20\x20\x20Norma'+'l\x20=\x20normal'+'ize(localP'+'os\x20+\x20matri'+'x_viewInve'+'rse[2].xyz'+');\x0a',XR='\x0a\x20\x20\x20\x20vec3\x20'+'normalMap\x20'+'=\x20normaliz'+'e(texture2'+'D(normalMa'+'p,\x20vec2(te'+'xCoordsAlp'+'haLife.x,\x20'+'1.0\x20-\x20texC'+'oordsAlpha'+'Life.y)).x'+'yz\x20*\x202.0\x20-'+'\x201.0);\x0a\x20\x20\x20'+'\x20vec3\x20norm'+'al\x20=\x20Parti'+'cleMat\x20*\x20n'+'ormalMap;\x0a',qR='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan(veloci'+'tyV.x,\x20vel'+'ocityV.y);'+'\x0a\x0a',jR='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',YR='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vec3\x20No'+'rmal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20lightCu'+'be[6];\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20float\x20vDe'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fogP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'f\x20NORMAL\x20='+'=\x20MAP\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20normalMa'+'p;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22p'+'articlePS\x22'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_softP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20normal\x20'+'=\x20Normal;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalMap'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20HALF_L'+'AMBERT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_ha'+'lflambertP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_la'+'mbertPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_lighting'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20BLEND\x20'+'==\x20NORMAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndNormalPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+('\x20ADDITIVE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndAddPS\x22\x0a\x20'+'\x20\x20\x20#elif\x20B'+'LEND\x20==\x20MU'+'LTIPLICATI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendMulti'+'plyPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endPS\x22\x0a'),KR='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20animTexTi'+'lesParams;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20animTexP'+'arams;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec2\x20an'+'imTexIndex'+'Params;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20NO'+'RMAL\x20==\x20MA'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec3\x20Normal'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20SOFT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'rying\x20floa'+'t\x20vDepth;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_initVS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PA'+'CK8\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleInputR'+'gba8PS\x22\x20\x20\x20'+'\x20\x20//\x20why\x20a'+'re\x20these\x20P'+'S\x20and\x20not\x20'+'VS?\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x20'+'\x22particleI'+'nputFloatP'+'S\x22\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'OFT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22scre'+'enDepthPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleVS\x22\x0a\x0a\x20\x20'+'\x20\x20#else\x20//'+'\x20PARTICLE_'+'CPU\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22scr'+'eenDepthPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_cpuVS'+'\x22\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_local'+'ShiftVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20ANIMT'+'EX_LOOP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('#include\x20\x22'+'particleAn'+'imFrameLoo'+'pVS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particleA'+'nimFrameCl'+'ampVS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleAn'+'imTexVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20wr'+'ap\x20is\x20not\x20'+'used\x20on\x20CP'+'U,\x20it\x20was\x20'+'commented\x20'+'out.\x20TODO:'+'\x20investiga'+'te\x20why\x0a\x20\x20\x20'+'\x20#ifdef\x20PA'+'RTICLE_GPU'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20WRAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_wrapVS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20AL'+'IGN_TO_MOT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_pointAlon'+'gVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20US'+'E_MESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_meshVS'+'\x22\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20CUS'+'TOM_FACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'customFace'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_b'+'illboardVS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalVS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_TBNVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STRETCH\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_str'+'etchVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endVS\x22\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20PARTICLE'+'_CPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_cpu_endV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#')+('ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_so'+'ftVS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20}\x0a'),ZR='\x0a\x20\x20\x20\x20float'+'\x20depth\x20=\x20g'+'etLinearSc'+'reenDepth('+');\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eDepth\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20float\x20dep'+'thDiff\x20=\x20s'+'aturate(ab'+'s(particle'+'Depth\x20-\x20de'+'pth)\x20*\x20sof'+'tening);\x0a\x20'+'\x20\x20\x20a\x20*=\x20de'+'pthDiff;\x0a',QR='\x0a\x20\x20\x20\x20vDept'+'h\x20=\x20getLin'+'earDepth(l'+'ocalPos);\x0a',JR='\x0a\x20\x20\x20\x20vec3\x20'+'moveDir\x20=\x20'+'inVel\x20*\x20st'+'retch;\x0a\x20\x20\x20'+'\x20vec3\x20posP'+'rev\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20+=\x20partic'+'lePosMoved'+';\x0a\x0a\x20\x20\x20\x20vec'+'2\x20centerTo'+'VertexV\x20=\x20'+'normalize('+'(mat3(matr'+'ix_view)\x20*'+'\x20localPos)'+'.xy);\x0a\x0a\x20\x20\x20'+'\x20float\x20int'+'erpolation'+'\x20=\x20dot(-ve'+'locityV,\x20c'+'enterToVer'+'texV)\x20*\x200.'+'5\x20+\x200.5;\x0a\x0a'+'\x20\x20\x20\x20partic'+'lePos\x20=\x20mi'+'x(particle'+'Pos,\x20posPr'+'ev,\x20interp'+'olation);\x0a',e3='\x0a\x20\x20\x20\x20mat3\x20'+'rot3\x20=\x20mat'+'3(rotMatri'+'x[0][0],\x20r'+'otMatrix[0'+'][1],\x200.0,'+'\x20rotMatrix'+'[1][0],\x20ro'+'tMatrix[1]'+'[1],\x200.0,\x20'+'0.0,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'ParticleMa'+'t\x20=\x20mat3(-'+'matrix_vie'+'wInverse[0'+'].xyz,\x20-ma'+'trix_viewI'+'nverse[1].'+'xyz,\x20matri'+'x_viewInve'+'rse[2].xyz'+')\x20*\x20rot3;\x0a',t3='\x0a\x20\x20\x20\x20vec3\x20'+'origPartic'+'lePos\x20=\x20pa'+'rticlePos;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20-=\x20'+'matrix_mod'+'el[3].xyz;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20m'+'od(particl'+'ePos,\x20wrap'+'Bounds)\x20-\x20'+'wrapBounds'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20+=\x20mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'PosMoved\x20='+'\x20particleP'+'os\x20-\x20origP'+'articlePos'+';\x0a',s3={'particlePS':uR,'particleVS':mR,'particleAnimFrameClampVS':pR,'particleAnimFrameLoopVS':_R,'particleAnimTexVS':gR,'particleInputFloatPS':SR,'particleInputRgba8PS':yR,'particleOutputFloatPS':vR,'particleOutputRgba8PS':xR,'particleUpdaterAABBPS':TR,'particleUpdaterEndPS':wR,'particleUpdaterInitPS':ER,'particleUpdaterNoRespawnPS':AR,'particleUpdaterOnStopPS':bR,'particleUpdaterRespawnPS':CR,'particleUpdaterSpherePS':PR,'particleUpdaterStartPS':MR,'particle_billboardVS':IR,'particle_blendAddPS':DR,'particle_blendMultiplyPS':LR,'particle_blendNormalPS':RR,'particle_cpuVS':OR,'particle_cpu_endVS':FR,'particle_customFaceVS':NR,'particle_endPS':kR,'particle_endVS':UR,'particle_halflambertPS':BR,'particle_initVS':zR,'particle_lambertPS':VR,'particle_lightingPS':GR,'particle_localShiftVS':HR,'particle_meshVS':WR,'particle_normalVS':$R,'particle_normalMapPS':XR,'particle_pointAlongVS':qR,'particle_simulationPS':jR,'particle_shaderPS':YR,'particle_shaderVS':KR,'particle_softPS':ZR,'particle_softVS':QR,'particle_stretchVS':JR,'particle_TBNVS':e3,'particle_wrapVS':t3},i3='\x0avarying\x20t'+'exCoordsAl'+'phaLife:\x20v'+'ec4f;\x0a\x0avar'+'\x20colorMap:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20colorMap'+'Sampler:\x20s'+'ampler;\x0ava'+'r\x20colorPar'+'am:\x20textur'+'e_2d<f32>;'+'\x0avar\x20color'+'ParamSampl'+'er:\x20sample'+'r;\x0a\x0aunifor'+'m\x20graphSam'+'pleSize:\x20f'+'32;\x0aunifor'+'m\x20graphNum'+'Samples:\x20f'+'32;\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0auniform'+'\x20softening'+':\x20f32;\x0auni'+'form\x20color'+'Mult:\x20f32;'+'\x0a\x0afn\x20satur'+'ate(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(x,'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20tex:\x20v'+'ec4f\x20\x20=\x20te'+'xtureSampl'+'e(colorMap'+',\x20colorMap'+'Sampler,\x20v'+'ec2f(input'+'.texCoords'+'AlphaLife.'+'x,\x201.0\x20-\x20i'+'nput.texCo'+'ordsAlphaL'+'ife.y));\x0a\x20'+'\x20\x20\x20var\x20ram'+'p:\x20vec4f\x20='+'\x20textureSa'+'mple(color'+'Param,\x20col'+'orParamSam'+'pler,\x20vec2'+'f(input.te'+'xCoordsAlp'+'haLife.w,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20ramp\x20=\x20ve'+'c4f(ramp.r'+'gb\x20*\x20unifo'+'rm.colorMu'+'lt,\x20ramp.a'+');\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20=\x20ram'+'p.a\x20+\x20inpu'+'t.texCoord'+'sAlphaLife'+'.z;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20rgb:\x20ve'+'c3f\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'var\x20a:\x20f32'+'\x20=\x20tex.a\x20*'+'\x20ramp.a;\x0a',r3='\x0afn\x20unpack'+'3NFloats(s'+'rc:\x20f32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20r\x20'+'=\x20fract(sr'+'c);\x0a\x20\x20\x20\x20le'+'t\x20g\x20=\x20frac'+'t(src\x20*\x2025'+'6.0);\x0a\x20\x20\x20\x20'+'let\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3f(r,\x20'+'g,\x20b);\x0a}\x0a\x0a'+'fn\x20saturat'+'e(x:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0astruct\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20resu'+'lt:\x20vec4f,'+'\x0a\x20\x20\x20\x20unpac'+'ked:\x20vec3f'+'\x0a}\x0a\x0afn\x20tex'+'1Dlod_lerp'+'_simple(te'+'x:\x20texture'+'_2d<f32>,\x20'+'texSampler'+':\x20sampler,'+'\x20tc:\x20vec2f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20tc_next\x20='+'\x20tc\x20+\x20vec2'+'f(uniform.'+'graphSampl'+'eSize);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(\x20textur'+'eSample(te'+'x,\x20texSamp'+'ler,\x20tc),\x20'+'textureSam'+'ple(tex,\x20t'+'exSampler,'+'\x20tc_next),'+'\x20fract(tc.'+'x\x20*\x20unifor'+'m.graphNum'+'Samples)\x20)'+';\x0a}\x0a\x0afn\x20te'+'x1Dlod_ler'+'p_unpack(t'+'ex:\x20textur'+'e_2d<f32>,'+'\x20texSample'+'r:\x20sampler'+',\x20tc:\x20vec2'+'f)\x20->\x20TexL'+'erpUnpackR'+'esult\x20{\x0a\x20\x20'+'\x20\x20let\x20tc_n'+'ext\x20=\x20tc\x20+'+'\x20vec2f(uni'+'form.graph'+'SampleSize'+');\x0a\x20\x20\x20\x20let'+'\x20a\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20tc,\x200.0);'+'\x0a\x20\x20\x20\x20let\x20b'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'c_next,\x200.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20u'+'niform.gra'+'phNumSampl'+'es);\x0a\x20\x20\x20\x20l'+'et\x20unpacke'+'dA\x20=\x20unpac'+'k3NFloats('+'a.w);\x0a\x20\x20\x20\x20'+'let\x20unpack'+'edB\x20=\x20unpa'+'ck3NFloats'+'(b.w);\x0a\x20\x20\x20'+'\x20let\x20w_out'+('\x20=\x20mix(unp'+'ackedA,\x20un'+'packedB,\x20c'+');\x0a\x20\x20\x20\x20ret'+'urn\x20TexLer'+'pUnpackRes'+'ult(mix(a,'+'\x20b,\x20c),\x20w_'+'out);\x0a}\x0a\x0as'+'truct\x20Rota'+'teResult\x20{'+'\x0a\x20\x20\x20\x20rotat'+'edVec:\x20vec'+'2f,\x0a\x20\x20\x20\x20ma'+'trix:\x20mat2'+'x2f\x0a}\x0a\x0afn\x20'+'rotateWith'+'Matrix(qua'+'dXY:\x20vec2f'+',\x20pRotatio'+'n:\x20f32)\x20->'+'\x20RotateRes'+'ult\x20{\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20co'+'s(pRotatio'+'n);\x0a\x20\x20\x20\x20le'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x20\x20\x20\x20let\x20'+'m\x20=\x20mat2x2'+'f(vec2f(c,'+'\x20s),\x20vec2f'+'(-s,\x20c));\x0a'+'\x20\x20\x20\x20return'+'\x20RotateRes'+'ult(m\x20*\x20qu'+'adXY,\x20m);\x0a'+'}\x0a\x0afn\x20bill'+'board(Inst'+'anceCoords'+':\x20vec3f,\x20q'+'uadXY:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20pos:\x20ve'+'c3f;\x0a\x20\x20\x20\x20#'+'ifdef\x20SCRE'+'EN_SPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pos'+'\x20=\x20vec3f(-'+'1.0,\x200.0,\x20'+'0.0)\x20*\x20qua'+'dXY.x\x20+\x20ve'+'c3f(0.0,\x20-'+'1.0,\x200.0)\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20custom'+'Face(Insta'+'nceCoords:'+'\x20vec3f,\x20qu'+'adXY:\x20vec2'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20pos\x20=\x20un'+'iform.face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20uniform.f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20safeNo'+'rmalize(v:'+'\x20vec2f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20let\x20l\x20='+'\x20length(v)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20select('+'v,\x20v\x20/\x20l,\x20'+'l\x20>\x201e-06)'+';\x0a}\x0a\x0a@vert'+'ex\x0afn\x20vert'+'exMain(inp')+('ut:\x20Vertex'+'Input)\x20->\x20'+'VertexOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20meshLo'+'calPos_in\x20'+'=\x20input.pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20id\x20=\x20floo'+'r(input.pa'+'rticle_ver'+'texData.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20rndFactor'+'\x20=\x20fract(s'+'in(id\x20+\x201.'+'0\x20+\x20unifor'+'m.seed));\x0a'+'\x20\x20\x20\x20let\x20rn'+'dFactor3\x20='+'\x20vec3f(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20let\x20uv\x20=\x20'+'id\x20/\x20unifo'+'rm.numPart'+'iclesPot;\x0a'+'\x20\x20\x20\x20readIn'+'put(uv);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20model'+'Rotation\x20='+'\x20mat3x3f(u'+'niform.mat'+'rix_model['+'0].xyz,\x20un'+'iform.matr'+'ix_model[1'+'].xyz,\x20uni'+'form.matri'+'x_model[2]'+'.xyz);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20inVel'+'\x20=\x20modelRo'+'tation\x20*\x20i'+'nVel;\x0a\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20let\x20viewR'+'otation\x20=\x20'+'mat3x3f(un'+'iform.matr'+'ix_view[0]'+'.xyz,\x20unif'+'orm.matrix'+'_view[1].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[2].xyz'+');\x0a\x20\x20\x20\x20let'+'\x20velocityV'+'\x20=\x20safeNor'+'malize((vi'+'ewRotation'+'\x20*\x20inVel).'+'xy);\x0a\x0a\x20\x20\x20\x20'+'let\x20partic'+'leLifetime'+'\x20=\x20uniform'+'.lifetime;'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'meshLocalP'+'os\x20=\x20meshL'+'ocalPos_in'+';\x0a\x20\x20\x20\x20if\x20('+'inLife\x20<=\x20'+'0.0\x20||\x20inL'+'ife\x20>\x20part'+'icleLifeti'+'me\x20||\x20!inS'+'how)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mesh'+'LocalPos\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20let\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20let'+'\x20nlife\x20=\x20c')+('lamp(inLif'+'e\x20/\x20partic'+'leLifetime'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20lerp_res'+'ult\x20=\x20tex1'+'Dlod_lerp_'+'unpack(int'+'ernalTex2,'+'\x20internalT'+'ex2Sampler'+',\x20vec2f(nl'+'ife,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'params\x20=\x20l'+'erp_result'+'.result;\x0a\x20'+'\x20\x20\x20let\x20par'+'amDiv\x20=\x20le'+'rp_result.'+'unpacked;\x0a'+'\x0a\x20\x20\x20\x20var\x20s'+'cale\x20=\x20par'+'ams.y;\x0a\x20\x20\x20'+'\x20let\x20scale'+'Div\x20=\x20para'+'mDiv.x;\x0a\x20\x20'+'\x20\x20let\x20alph'+'aDiv\x20=\x20par'+'amDiv.z;\x0a\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20scale\x20+\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20unifo'+'rm.scaleDi'+'vMult\x20*\x20fr'+'act(rndFac'+'tor*10000.'+'0);\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20USE'+'_MESH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.texCoords'+'AlphaLife\x20'+'=\x20vec4f(qu'+'adXY\x20*\x20-0.'+'5\x20+\x200.5,\x20('+'alphaDiv\x20*'+'\x202.0\x20-\x201.0'+')\x20*\x20unifor'+'m.alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife\x20=\x20vec4'+'f(particle'+'_uv,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'uniform.al'+'phaDivMult'+'\x20*\x20fract(r'+'ndFactor*1'+'000.0),\x20nl'+'ife);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20var\x20part'+'iclePos\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20var\x20parti'+'clePosMove'+'d\x20=\x20vec3f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20var\x20rotMa'+'trix:\x20mat2'+'x2f;\x0a'),a3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20min('+'floor(inpu'+'t.texCoord'+'sAlphaLife'+'.w\x20*\x20unifo'+'rm.animTex'+'Params.y)\x20'+'+\x20uniform.'+'animTexPar'+'ams.x,\x20uni'+'form.animT'+'exParams.z'+');\x0a',n3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20floo'+'r((output.'+'texCoordsA'+'lphaLife.w'+'\x20*\x20uniform'+'.animTexPa'+'rams.y\x20+\x20u'+'niform.ani'+'mTexParams'+'.x)\x20%\x20(uni'+'form.animT'+'exParams.z'+'\x20+\x201.0));\x20'+'\x20\x20\x20\x0a',o3='\x0a\x20\x20\x20\x20var\x20a'+'nimationIn'+'dex:\x20f32;\x0a'+'\x0a\x20\x20\x20\x20if\x20(u'+'niform.ani'+'mTexIndexP'+'arams.y\x20=='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20floor(('+'uniform.an'+'imTexParam'+'s.w\x20+\x201.0)'+'\x20*\x20rndFact'+'or3.z)\x20*\x20('+'uniform.an'+'imTexParam'+'s.z\x20+\x201.0)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20animati'+'onIndex\x20=\x20'+'uniform.an'+'imTexIndex'+'Params.x\x20*'+'\x20(uniform.'+'animTexPar'+'ams.z\x20+\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20var\x20a'+'tlasX:\x20f32'+'\x20=\x20(animat'+'ionIndex\x20+'+'\x20animFrame'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20atlasY:\x20'+'f32\x20=\x201.0\x20'+'-\x20floor(at'+'lasX\x20+\x201.0'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.y;\x0a\x20\x20\x20\x20at'+'lasX\x20=\x20fra'+'ct(atlasX)'+';\x20//\x20Reass'+'ign\x20atlasX'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'current_tc'+'al_xy\x20=\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.xy;\x0a\x20\x20'+'\x20\x20let\x20scal'+'ed_tcal_xy'+'\x20=\x20current'+'_tcal_xy\x20*'+'\x20uniform.a'+'nimTexTile'+'sParams.xy'+';\x0a\x20\x20\x20\x20let\x20'+'final_tcal'+'_xy\x20=\x20scal'+'ed_tcal_xy'+'\x20+\x20vec2f(a'+'tlasX,\x20atl'+'asY);\x0a\x20\x20\x20\x20'+'output.tex'+'CoordsAlph'+'aLife\x20=\x20ve'+'c4f(final_'+'tcal_xy,\x20o'+'utput.texC'+'oordsAlpha'+'Life.z,\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.w);\x0a',l3='\x0afn\x20readIn'+'put(uv:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex:\x20ve'+'c4f\x20=\x20text'+'ureSampleL'+'evel(parti'+'cleTexIN,\x20'+'particleTe'+'xINSampler'+',\x20vec2f(uv'+',\x200.25),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex2:\x20v'+'ec4f\x20=\x20tex'+'tureSample'+'Level(part'+'icleTexIN,'+'\x20particleT'+'exINSample'+'r,\x20vec2f(u'+'v,\x200.75),\x20'+'0.0);\x0a\x0a\x20\x20\x20'+'\x20inPos\x20=\x20t'+'ex.xyz;\x0a\x20\x20'+'\x20\x20inVel\x20=\x20'+'tex2.xyz;\x0a'+'\x20\x20\x20\x20inAngl'+'e\x20=\x20abs(te'+'x.w)\x20-\x20100'+'0.0;\x0a\x20\x20\x20\x20i'+'nShow\x20=\x20te'+'x.w\x20>=\x200.0'+';\x0a\x20\x20\x20\x20inLi'+'fe\x20=\x20tex2.'+'w;\x0a}\x0a',h3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0ac'+'onst\x20PI2:\x20'+'f32\x20=\x206.28'+'3185307179'+'586;\x0a\x0aunif'+'orm\x20inBoun'+'dsSize:\x20ve'+'c3f;\x0aunifo'+'rm\x20inBound'+'sCenter:\x20v'+'ec3f;\x0a\x0auni'+'form\x20maxVe'+'l:\x20f32;\x0a\x0af'+'n\x20decodeFl'+'oatRG(rg:\x20'+'vec2f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20rg.'+'y\x20*\x20(1.0\x20/'+'\x20255.0)\x20+\x20'+'rg.x;\x0a}\x0a\x0af'+'n\x20decodeFl'+'oatRGBA(\x20r'+'gba:\x20vec4f'+'\x20)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20dot(rgb'+'a,\x20vec4f(1'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x2065025.0'+',\x201.0\x20/\x2016'+'0581375.0)'+');\x0a}\x0a\x0afn\x20r'+'eadInput(u'+'v:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20let\x20te'+'x0\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.125),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex1\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.37'+'5),\x200.0);\x0a'+'\x20\x20\x20\x20let\x20te'+'x2\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.625),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex3\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.87'+'5),\x200.0);\x0a'+'\x0a\x20\x20\x20\x20inPos'+'\x20=\x20vec3f(d'+'ecodeFloat'+'RG(tex0.rg'+'),\x20decodeF'+'loatRG(tex'+'0.ba),\x20dec'+'odeFloatRG'+'(tex1.rg))'+';\x0a\x20\x20\x20\x20inPo'+'s\x20=\x20(inPos'+'\x20-\x20vec3f(0'+'.5))\x20*\x20uni'+'form.inBou'+'ndsSize\x20+\x20'+'uniform.in'+'BoundsCent'+'er;\x0a\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inVel\x20=\x20('+('inVel\x20-\x20ve'+'c3f(0.5))\x20'+'*\x20uniform.'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20let\x20l'+'ife_decode'+'d\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20let\x20maxNe'+'gLife\x20=\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20(uniform.'+'rate\x20+\x20uni'+'form.rateD'+'iv));\x0a\x20\x20\x20\x20'+'let\x20maxPos'+'Life\x20=\x20uni'+'form.lifet'+'ime\x20+\x201.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20life_d'+'ecoded\x20*\x20('+'maxNegLife'+'\x20+\x20maxPosL'+'ife)\x20-\x20max'+'NegLife;\x0a}'),c3='\x0afn\x20getOut'+'put()\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20if\x20(pcPos'+'ition.y\x20<\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4f(ou'+'tPos,\x20(out'+'Angle\x20+\x2010'+'00.0)\x20*\x20vi'+'sMode);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(outVel,\x20'+'outLife);\x0a'+'\x20\x20\x20\x20}\x0a}\x0a',d3='\x0auniform\x20o'+'utBoundsMu'+'l:\x20vec3f;\x0a'+'uniform\x20ou'+'tBoundsAdd'+':\x20vec3f;\x0a\x0a'+'fn\x20encodeF'+'loatRG(\x20v:'+'\x20f32\x20)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20var\x20enc:'+'\x20vec2f\x20=\x20v'+'ec2f(1.0,\x20'+'255.0)\x20*\x20v'+';\x0a\x20\x20\x20\x20enc\x20'+'=\x20fract(en'+'c);\x0a\x20\x20\x20\x20en'+'c\x20=\x20enc\x20-\x20'+'enc.yy\x20*\x20('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20enc;\x0a'+'}\x0a\x0afn\x20enco'+'deFloatRGB'+'A(\x20v:\x20f32\x20'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20factors\x20='+'\x20vec4f(1.0'+',\x20255.0,\x206'+'5025.0,\x2016'+'0581375.0)'+';\x0a\x20\x20\x20\x20var\x20'+'enc:\x20vec4f'+'\x20=\x20factors'+'\x20*\x20v;\x0a\x20\x20\x20\x20'+'enc\x20=\x20frac'+'t(enc);\x0a\x20\x20'+'\x20\x20enc\x20=\x20en'+'c\x20-\x20enc.yz'+'ww\x20*\x20vec4f'+'(1.0\x20/\x20255'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x20255.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'return\x20enc'+';\x0a}\x0a\x0afn\x20ge'+'tOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20outPo'+'s\x20=\x20outPos'+'\x20*\x20uniform'+'.outBounds'+'Mul\x20+\x20unif'+'orm.outBou'+'ndsAdd;\x0a\x20\x20'+'\x20\x20outAngle'+'\x20=\x20fract(o'+'utAngle\x20/\x20'+'PI2);\x0a\x0a\x20\x20\x20'+'\x20outVel\x20=\x20'+'(outVel\x20/\x20'+'uniform.ma'+'xVel)\x20+\x20ve'+'c3f(0.5);\x20'+'//\x20TODO:\x20m'+'ul\x0a\x0a\x20\x20\x20\x20le'+'t\x20maxNegLi'+'fe\x20=\x20max(u'+'niform.lif'+'etime,\x20(un'+'iform.numP'+'articles\x20-'+'\x201.0)\x20*\x20(u'+'niform.rat'+'e\x20+\x20unifor'+'m.rateDiv)'+');\x0a\x20\x20\x20\x20let'+'\x20maxPosLif'+'e\x20=\x20unifor'+'m.lifetime'+'\x20+\x201.0;\x0a\x20\x20'+'\x20\x20outLife\x20'+'=\x20(outLife'+'\x20+\x20maxNegL'+'ife)\x20/\x20(ma'+'xNegLife\x20+'+'\x20maxPosLif'+'e);\x0a\x0a\x20\x20\x20\x20i'+'f\x20(pcPosit'+'ion.y\x20<\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'vec4f(enco'+'deFloatRG('+'outPos.x),'+'\x20encodeFlo'+'atRG(outPo'+'s.y));\x0a\x20\x20\x20'+('\x20}\x20else\x20if'+'\x20(pcPositi'+'on.y\x20<\x202.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(encod'+'eFloatRG(o'+'utPos.z),\x20'+'encodeFloa'+'tRG(outAng'+'le));\x0a\x20\x20\x20\x20'+'}\x20else\x20if\x20'+'(pcPositio'+'n.y\x20<\x203.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(outVel'+',\x20visMode\x20'+'*\x200.5\x20+\x200.'+'5);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20encodeFl'+'oatRGBA(ou'+'tLife);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),f3='\x0auniform\x20s'+'pawnBounds'+':\x20mat3x3f;'+'\x0auniform\x20s'+'pawnPosInn'+'erRatio:\x20v'+'ec3f;\x0a\x0afn\x20'+'calcSpawnP'+'osition(in'+'Bounds:\x20ve'+'c3f,\x20rndFa'+'ctor:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'pos\x20=\x20inBo'+'unds\x20-\x20vec'+'3f(0.5);\x0a\x0a'+'\x20\x20\x20\x20let\x20po'+'sAbs\x20=\x20abs'+'(pos);\x0a\x20\x20\x20'+'\x20let\x20maxCo'+'mp\x20=\x20max(p'+'osAbs.x,\x20m'+'ax(posAbs.'+'y,\x20posAbs.'+'z));\x0a\x20\x20\x20\x20l'+'et\x20maxPos\x20'+'=\x20vec3f(ma'+'xComp);\x0a\x0a\x20'+'\x20\x20\x20let\x20edg'+'e\x20=\x20maxPos'+'\x20+\x20(vec3f('+'0.5)\x20-\x20max'+'Pos)\x20*\x20uni'+'form.spawn'+'PosInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'pos.x\x20=\x20ed'+'ge.x\x20*\x20sel'+'ect(2.0\x20*\x20'+'pos.x,\x20sig'+'n(pos.x),\x20'+'maxPos.x\x20='+'=\x20posAbs.x'+');\x0a\x20\x20\x20\x20pos'+'.y\x20=\x20edge.'+'y\x20*\x20select'+'(2.0\x20*\x20pos'+'.y,\x20sign(p'+'os.y),\x20max'+'Pos.y\x20==\x20p'+'osAbs.y);\x0a'+'\x20\x20\x20\x20pos.z\x20'+'=\x20edge.z\x20*'+'\x20select(2.'+'0\x20*\x20pos.z,'+'\x20sign(pos.'+'z),\x20maxPos'+'.z\x20==\x20posA'+'bs.z);\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20uni'+'form.emitt'+'erPos\x20+\x20un'+'iform.spaw'+'nBounds\x20*\x20'+'pos;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uniform.sp'+'awnBounds\x20'+'*\x20pos;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20*localV'+'elocity\x20=\x20'+'*localVelo'+'city\x20-\x20vec'+'3f(0.0,\x200.'+'0,\x20uniform'+'.initialVe'+'locity);\x0a}'+'\x0a',u3='\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'getOutput('+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',m3='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20par'+'ticleTexIN'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20particl'+'eTexINSamp'+'ler:\x20sampl'+'er;\x0avar\x20in'+'ternalTex0'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0avar\x20int'+'ernalTex1:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20internal'+'Tex1Sample'+'r:\x20sampler'+';\x0avar\x20inte'+'rnalTex2:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20internalT'+'ex2Sampler'+':\x20sampler;'+'\x0avar\x20inter'+'nalTex3:\x20t'+'exture_2d<'+'f32>;\x0avar\x20'+'internalTe'+'x3Sampler:'+'\x20sampler;\x0a'+'\x0auniform\x20e'+'mitterMatr'+'ix:\x20mat3x3'+'f;\x0auniform'+'\x20emitterMa'+'trixInv:\x20m'+'at3x3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0a\x0aun'+'iform\x20emit'+'terPos:\x20ve'+'c3f;\x0aunifo'+'rm\x20frameRa'+'ndom:\x20vec3'+'f;\x0auniform'+'\x20localVelo'+'cityDivMul'+'t:\x20vec3f;\x0a'+'uniform\x20ve'+'locityDivM'+'ult:\x20vec3f'+';\x0auniform\x20'+'delta:\x20f32'+';\x0auniform\x20'+'rate:\x20f32;'+'\x0auniform\x20r'+'ateDiv:\x20f3'+'2;\x0auniform'+'\x20lifetime:'+'\x20f32;\x0aunif'+'orm\x20numPar'+'ticles:\x20f3'+'2;\x0auniform'+'\x20rotSpeedD'+'ivMult:\x20f3'+'2;\x0auniform'+'\x20radialSpe'+'edDivMult:'+'\x20f32;\x0aunif'+'orm\x20seed:\x20'+'f32;\x0aunifo'+'rm\x20startAn'+'gle:\x20f32;\x0a'+'uniform\x20st'+'artAngle2:'+'\x20f32;\x0aunif'+'orm\x20initia'+'lVelocity:'+'\x20f32;\x0a\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0a\x0ava'+'r<private>'+'\x20inPos:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20in'+'Vel:\x20vec3f'+';\x0avar<priv'+'ate>\x20inAng'+('le:\x20f32;\x0av'+'ar<private'+'>\x20inShow:\x20'+'bool;\x0avar<'+'private>\x20i'+'nLife:\x20f32'+';\x0avar<priv'+'ate>\x20visMo'+'de:\x20f32;\x0a\x0a'+'var<privat'+'e>\x20outPos:'+'\x20vec3f;\x0ava'+'r<private>'+'\x20outVel:\x20v'+'ec3f;\x0avar<'+'private>\x20o'+'utAngle:\x20f'+'32;\x0avar<pr'+'ivate>\x20out'+'Show:\x20bool'+';\x0avar<priv'+'ate>\x20outLi'+'fe:\x20f32;\x0a'),p3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tLife\x20=\x20ou'+'tLife\x20-\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20particleR'+'ate);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20visMod'+'e\x20=\x20-1.0;\x0a'+'\x20\x20\x20\x20}\x0a',_3='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20selec'+'t(visMode,'+'\x20-1.0,\x20out'+'Life\x20<\x200.0'+');\x0a',g3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20subtract'+'Amount\x20=\x20m'+'ax(uniform'+'.lifetime,'+'\x20(uniform.'+'numParticl'+'es\x20-\x201.0)\x20'+'*\x20particle'+'Rate);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outLi'+'fe\x20=\x20outLi'+'fe\x20-\x20subtr'+'actAmount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'isMode\x20=\x201'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20visMod'+'e\x20=\x20select'+'(visMode,\x20'+'1.0,\x20outLi'+'fe\x20<\x200.0);'+'\x0a',S3='\x0auniform\x20s'+'pawnBounds'+'Sphere:\x20f3'+'2;\x0auniform'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio:\x20'+'f32;\x0a\x0afn\x20c'+'alcSpawnPo'+'sition(inB'+'ounds:\x20vec'+'3f,\x20rndFac'+'tor:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'nd4:\x20f32\x20='+'\x20fract(rnd'+'Factor\x20*\x201'+'000.0);\x0a\x20\x20'+'\x20\x20let\x20norm'+':\x20vec3f\x20=\x20'+'normalize('+'inBounds.x'+'yz\x20-\x20vec3f'+'(0.5));\x0a\x20\x20'+'\x20\x20let\x20r:\x20f'+'32\x20=\x20rnd4\x20'+'*\x20(1.0\x20-\x20u'+'niform.spa'+'wnBoundsSp'+'hereInnerR'+'atio)\x20+\x20un'+'iform.spaw'+'nBoundsSph'+'ereInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20unifo'+'rm.emitter'+'Pos\x20+\x20norm'+'\x20*\x20r\x20*\x20uni'+'form.spawn'+'BoundsSphe'+'re;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20n'+'orm\x20*\x20r\x20*\x20'+'uniform.sp'+'awnBoundsS'+'phere;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20ini'+'tialVelOff'+'set:\x20vec3f'+'\x20=\x20normali'+'ze(inBound'+'s\x20-\x20vec3f('+'0.5))\x20*\x20un'+'iform.init'+'ialVelocit'+'y;\x0a\x20\x20\x20\x20*lo'+'calVelocit'+'y\x20=\x20*local'+'Velocity\x20+'+'\x20initialVe'+'lOffset;\x0a}'+'\x0a',y3='\x0afn\x20satura'+'te(x:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(x,\x20'+'0.0,\x201.0);'+'\x0a}\x0a\x0afn\x20unp'+'ack3NFloat'+'s(src:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20r\x20=\x20fract'+'(src);\x0a\x20\x20\x20'+'\x20let\x20g\x20=\x20f'+'ract(src\x20*'+'\x20256.0);\x0a\x20'+'\x20\x20\x20let\x20b\x20='+'\x20fract(src'+'\x20*\x2065536.0'+');\x0a\x20\x20\x20\x20ret'+'urn\x20vec3f('+'r,\x20g,\x20b);\x0a'+'}\x0a\x0a//\x20Stru'+'ct\x20to\x20hand'+'le\x20multipl'+'e\x20return\x20v'+'alues\x20from'+'\x20tex1Dlod_'+'lerp\x0astruc'+'t\x20TexLerpU'+'npackResul'+'t\x20{\x0a\x20\x20\x20\x20re'+'sult:\x20vec3'+'f,\x0a\x20\x20\x20\x20unp'+'acked:\x20vec'+'3f\x0a}\x0a\x0afn\x20t'+'ex1Dlod_le'+'rp(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20tc:\x20'+'vec2f)\x20->\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'tc_next\x20=\x20'+'tc\x20+\x20vec2f'+'(uniform.g'+'raphSample'+'Size);\x0a\x20\x20\x20'+'\x20let\x20a\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20tc,\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20tc_next'+',\x200.0);\x0a\x20\x20'+'\x20\x20let\x20c\x20=\x20'+'fract(tc.x'+'\x20*\x20uniform'+'.graphNumS'+'amples);\x0a\x0a'+'\x20\x20\x20\x20let\x20un'+'packedA\x20=\x20'+'unpack3NFl'+'oats(a.w);'+'\x0a\x20\x20\x20\x20let\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20let\x20'+'w_out\x20=\x20mi'+'x(unpacked'+'A,\x20unpacke'+'dB,\x20c);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'TexLerpUnp'+'ackResult('+'mix(a.xyz,'+'\x20b.xyz,\x20c)'+',\x20w_out);\x0a'+'}\x0a\x0aconst\x20H'+'ASHSCALE4:'+'\x20vec4f\x20=\x20v'+'ec4f(1031.'+'0,\x200.1030,'+'\x200.0973,\x200'+'.1099);\x0afn'+'\x20hash41(p:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20var\x20p4\x20=\x20'+'fract(vec4'+'f(p)\x20*\x20HAS'+('HSCALE4);\x0a'+'\x20\x20\x20\x20p4\x20=\x20p'+'4\x20+\x20dot(p4'+',\x20p4.wzxy\x20'+'+\x2019.19);\x0a'+'\x20\x20\x20\x20return'+'\x20fract(vec'+'4f((p4.x\x20+'+'\x20p4.y)*p4.'+'z,\x20(p4.x\x20+'+'\x20p4.z)*p4.'+'y,\x20(p4.y\x20+'+'\x20p4.z)*p4.'+'w,\x20(p4.z\x20+'+'\x20p4.w)*p4.'+'x));\x0a}\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20if\x20(pc'+'Position.x'+'\x20>\x20uniform'+'.numPartic'+'les)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20re'+'adInput(in'+'put.vUv0.x'+');\x0a\x20\x20\x20\x20vis'+'Mode\x20=\x20sel'+'ect(-1.0,\x20'+'1.0,\x20inSho'+'w);\x0a\x0a\x20\x20\x20\x20l'+'et\x20rndFact'+'or\x20=\x20hash4'+'1(pcPositi'+'on.x\x20+\x20uni'+'form.seed)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20particleR'+'ate\x20=\x20unif'+'orm.rate\x20+'+'\x20uniform.r'+'ateDiv\x20*\x20r'+'ndFactor.x'+';\x0a\x0a\x20\x20\x20\x20out'+'Life\x20=\x20inL'+'ife\x20+\x20unif'+'orm.delta;'+'\x0a\x20\x20\x20\x20let\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20uniform'+'.lifetime,'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t0\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'0,\x20interna'+'lTex0Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20va'+'r\x20localVel'+'ocity\x20=\x20le'+'rpResult0.'+'result;\x0a\x20\x20'+'\x20\x20let\x20loca'+'lVelocityD'+'iv\x20=\x20lerpR'+'esult0.unp'+'acked;\x0a\x0a\x20\x20'+'\x20\x20let\x20lerp'+'Result1\x20=\x20'+'tex1Dlod_l'+'erp(intern'+'alTex1,\x20in'+'ternalTex1'+'Sampler,\x20v'+'ec2f(nlife'+',\x200.0));\x0a\x20'+'\x20\x20\x20var\x20vel'+'ocity\x20=\x20le'+'rpResult1.'+'result;\x0a\x20\x20'+'\x20\x20let\x20velo'+'cityDiv\x20=\x20'+'lerpResult')+('1.unpacked'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t2\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'2,\x20interna'+'lTex2Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20le'+'t\x20params\x20='+'\x20lerpResul'+'t2.result;'+'\x0a\x20\x20\x20\x20let\x20p'+'aramDiv\x20=\x20'+'lerpResult'+'2.unpacked'+';\x0a\x20\x20\x20\x20var\x20'+'rotSpeed\x20='+'\x20params.x;'+'\x0a\x20\x20\x20\x20let\x20r'+'otSpeedDiv'+'\x20=\x20paramDi'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'let\x20lerpRe'+'sult3\x20=\x20te'+'x1Dlod_ler'+'p(internal'+'Tex3,\x20inte'+'rnalTex3Sa'+'mpler,\x20vec'+'2f(nlife,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20let\x20radia'+'lParams\x20=\x20'+'lerpResult'+'3.result;\x0a'+'\x20\x20\x20\x20let\x20ra'+'dialParamD'+'iv\x20=\x20lerpR'+'esult3.unp'+'acked;\x0a\x20\x20\x20'+'\x20let\x20radia'+'lSpeed\x20=\x20r'+'adialParam'+'s.x;\x0a\x20\x20\x20\x20l'+'et\x20radialS'+'peedDiv\x20=\x20'+'radialPara'+'mDiv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20res'+'pawn\x20=\x20inL'+'ife\x20<=\x200.0'+'\x20||\x20outLif'+'e\x20>=\x20unifo'+'rm.lifetim'+'e;\x0a\x20\x20\x20\x20inP'+'os\x20=\x20selec'+'t(inPos,\x20c'+'alcSpawnPo'+'sition(rnd'+'Factor.xyz'+',\x20rndFacto'+'r.x),\x20resp'+'awn);\x0a\x20\x20\x20\x20'+'inAngle\x20=\x20'+'select(inA'+'ngle,\x20mix('+'uniform.st'+'artAngle,\x20'+'uniform.st'+'artAngle2,'+'\x20rndFactor'+'.x),\x20respa'+'wn);\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20radialVe'+'l:\x20vec3f\x20='+'\x20inPos\x20-\x20u'+'niform.emi'+'tterPos;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20radialVel'+':\x20vec3f\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20=\x20select'+'(vec3f(0.0'+'),\x20radialS'+'peed\x20*\x20nor'+'malize(rad'+'ialVel),\x20d'+'ot(radialV'+'el,\x20radial'+'Vel)\x20>\x201.0')+('E-8);\x0a\x20\x20\x20\x20'+'radialVel\x20'+'=\x20radialVe'+'l\x20+\x20(radia'+'lSpeedDiv\x20'+'*\x20vec3f(2.'+'0)\x20-\x20vec3f'+'(1.0))\x20*\x20u'+'niform.rad'+'ialSpeedDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20=\x20localV'+'elocity\x20+\x20'+'(localVelo'+'cityDiv\x20*\x20'+'vec3f(2.0)'+'\x20-\x20vec3f(1'+'.0))\x20*\x20uni'+'form.local'+'VelocityDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x20\x20\x20\x20vel'+'ocity\x20=\x20ve'+'locity\x20+\x20('+'velocityDi'+'v\x20*\x20vec3f('+'2.0)\x20-\x20vec'+'3f(1.0))\x20*'+'\x20uniform.v'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20rotS'+'peed\x20=\x20rot'+'Speed\x20+\x20(r'+'otSpeedDiv'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20unif'+'orm.rotSpe'+'edDivMult\x20'+'*\x20rndFacto'+'r.y;\x0a\x0a\x20\x20\x20\x20'+'addInitial'+'Velocity(&'+'localVeloc'+'ity,\x20rndFa'+'ctor.xyz);'+'\x0a\x0a\x20\x20\x20\x20#ifn'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20outVel'+'\x20=\x20uniform'+'.emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tVel\x20=\x20(lo'+'calVelocit'+'y\x20+\x20radial'+'Vel)\x20/\x20uni'+'form.emitt'+'erScale\x20+\x20'+'uniform.em'+'itterMatri'+'xInv\x20*\x20vel'+'ocity;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20outPos\x20'+'=\x20inPos\x20+\x20'+'outVel\x20*\x20u'+'niform.del'+'ta;\x0a\x20\x20\x20\x20ou'+'tAngle\x20=\x20i'+'nAngle\x20+\x20r'+'otSpeed\x20*\x20'+'uniform.de'+'lta;\x0a'),v3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20rotated'+'QuadXY);\x0a',x3='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20sa'+'turate(gam'+'maCorrectI'+'nput(max(a'+',\x200.0)));\x0a'+'\x20\x20\x20\x20if\x20((r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+')\x20<\x200.0000'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20}\x20\x20'+'\x20\x20\x0a',T3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3f'+'(1.0),\x20rgb'+',\x20a);\x0a\x20\x20\x20\x20'+'if\x20((rgb.r'+'\x20+\x20rgb.g\x20+'+'\x20rgb.b)\x20>\x20'+'2.99)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a',w3='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20}\x0a',E3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20\x20'+'\x20//\x20XYZ\x20=\x20'+'world\x20pos,'+'\x20W\x20=\x20life\x0a'+'attribute\x20'+'particle_v'+'ertexData2'+':\x20vec4f;\x20\x20'+'//\x20X\x20=\x20ang'+'le,\x20Y\x20=\x20sc'+'ale,\x20Z\x20=\x20a'+'lpha,\x20W\x20=\x20'+'velocity.x'+'\x0aattribute'+'\x20particle_'+'vertexData'+'3:\x20vec4f;\x20'+'\x20//\x20XYZ\x20=\x20'+'particle\x20l'+'ocal\x20pos,\x20'+'W\x20=\x20veloci'+'ty.y\x0aattri'+'bute\x20parti'+'cle_vertex'+'Data4:\x20f32'+';\x20\x20\x20\x20//\x20pa'+'rticle\x20id\x0a'+'\x0a//\x20type\x20d'+'epends\x20on\x20'+'useMesh\x20pr'+'operty.\x20St'+'art\x20with\x20X'+'\x20=\x20velocit'+'y.z,\x20Y\x20=\x20p'+'article\x20ID'+'\x20and\x20for\x20m'+'esh\x20partic'+'les\x20procee'+'ds\x20with\x20Z\x20'+'=\x20mesh\x20UV.'+'x,\x20W\x20=\x20mes'+'h\x20UV.y\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_ver'+'texData5:\x20'+'vec2f;\x0a#el'+'se\x0a\x20\x20\x20\x20att'+'ribute\x20par'+'ticle_vert'+'exData5:\x20v'+'ec4f;\x0a#end'+'if\x0a\x0aunifor'+'m\x20matrix_v'+'iewProject'+'ion:\x20mat4x'+'4f;\x0aunifor'+'m\x20matrix_m'+'odel:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20ma'+'trix_norma'+'l:\x20mat3x3f'+';\x0auniform\x20'+'matrix_vie'+'wInverse:\x20'+'mat4x4f;\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20lifet'+'ime:\x20f32;\x0a'+'uniform\x20st'+'retch:\x20f32'+';\x0auniform\x20'+'seed:\x20f32;'+'\x0auniform\x20w'+'rapBounds:'+'\x20vec3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0auni'+'form\x20faceT'+'angent:\x20ve'+'c3f;\x0aunifo'+'rm\x20faceBin'+'orm:\x20vec3f'+';\x0a\x0a#ifdef\x20'+('PARTICLE_G'+'PU\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex0:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x0Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex1'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex1S'+'ampler:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20var\x20inter'+'nalTex2:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex2Samp'+'ler:\x20sampl'+'er;\x0a#endif'+'\x0auniform\x20e'+'mitterPos:'+'\x20vec3f;\x0a\x0av'+'arying\x20tex'+'CoordsAlph'+'aLife:\x20vec'+'4f;\x0a\x0astruc'+'t\x20RotateRe'+'sult\x20{\x0a\x20\x20\x20'+'\x20rotatedVe'+'c:\x20vec2f,\x0a'+'\x20\x20\x20\x20matrix'+':\x20mat2x2f\x0a'+'}\x0a\x0afn\x20rota'+'teWithMatr'+'ix(quadXY:'+'\x20vec2f,\x20pR'+'otation:\x20f'+'32)\x20->\x20Rot'+'ateResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'c\x20=\x20cos(pR'+'otation);\x0a'+'\x20\x20\x20\x20let\x20s\x20'+'=\x20sin(pRot'+'ation);\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'mat2x2f(ve'+'c2f(c,\x20s),'+'\x20vec2f(-s,'+'\x20c));\x0a\x20\x20\x20\x20'+'return\x20Rot'+'ateResult('+'m\x20*\x20quadXY'+',\x20m);\x0a}\x0a\x0a\x0a'+'fn\x20billboa'+'rd(Instanc'+'eCoords:\x20v'+'ec3f,\x20quad'+'XY:\x20vec2f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20customF'+'ace(Instan'+'ceCoords:\x20'+'vec3f,\x20qua'+'dXY:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20pos\x20=\x20uni'+'form.faceT'+'angent\x20*\x20q'+'uadXY.x\x20+\x20'+'uniform.fa'+'ceBinorm\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20safeNor'+'malize(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20l\x20=\x20')+('length(v);'+'\x0a\x20\x20\x20\x20retur'+'n\x20select(v'+',\x20v\x20/\x20l,\x20l'+'\x20>\x201e-06);'+'\x0a}\x0a\x0a@verte'+'x\x0afn\x20verte'+'xMain(inpu'+'t:\x20VertexI'+'nput)\x20->\x20V'+'ertexOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'VertexOutp'+'ut;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20particl'+'ePos\x20=\x20inp'+'ut.particl'+'e_vertexDa'+'ta.xyz;\x0a\x20\x20'+'\x20\x20let\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20let\x20vertP'+'os\x20=\x20input'+'.particle_'+'vertexData'+'3.xyz;\x0a\x20\x20\x20'+'\x20var\x20inVel'+'\x20=\x20vec3f(i'+'nput.parti'+'cle_vertex'+'Data2.w,\x20i'+'nput.parti'+'cle_vertex'+'Data3.w,\x20i'+'nput.parti'+'cle_vertex'+'Data5.x);\x0a'+'\x0a\x20\x20\x20\x20let\x20i'+'d\x20=\x20floor('+'input.part'+'icle_verte'+'xData4);\x0a\x20'+'\x20\x20\x20let\x20rnd'+'Factor\x20=\x20f'+'ract(sin(i'+'d\x20+\x201.0\x20+\x20'+'uniform.se'+'ed));\x0a\x20\x20\x20\x20'+'let\x20rndFac'+'tor3\x20=\x20vec'+'3f(rndFact'+'or,\x20fract('+'rndFactor*'+'10.0),\x20fra'+'ct(rndFact'+'or*100.0))'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20mo'+'delRotatio'+'n\x20=\x20mat3x3'+'f(uniform.'+'matrix_mod'+'el[0].xyz,'+'\x20uniform.m'+'atrix_mode'+'l[1].xyz,\x20'+'uniform.ma'+'trix_model'+'[2].xyz);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'Vel\x20=\x20mode'+'lRotation\x20'+'*\x20inVel;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20let\x20ve'+'locityV\x20=\x20'+'safeNormal'+'ize((mat3x'+'3f(uniform'+'.matrix_vi'+'ew[0].xyz,'+'\x20uniform.m'+'atrix_view'+'[1].xyz,\x20u'+'niform.mat'+'rix_view[2'+'].xyz)\x20*\x20i'+'nVel).xy);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'quadXY\x20=\x20v'+'ertPos.xy;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20USE_MES'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.tex'+'CoordsAlph')+('aLife\x20=\x20ve'+'c4f(input.'+'particle_v'+'ertexData5'+'.zw,\x20input'+'.particle_'+'vertexData'+'2.z,\x20input'+'.particle_'+'vertexData'+'.w);\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'texCoordsA'+'lphaLife\x20='+'\x20vec4f(qua'+'dXY\x20*\x20-0.5'+'\x20+\x200.5,\x20in'+'put.partic'+'le_vertexD'+'ata2.z,\x20in'+'put.partic'+'le_vertexD'+'ata.w);\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20var\x20rot'+'Matrix:\x20ma'+'t2x2f;\x0a\x0a\x20\x20'+'\x20\x20var\x20inAn'+'gle\x20=\x20inpu'+'t.particle'+'_vertexDat'+'a2.x;\x0a\x20\x20\x20\x20'+'var\x20partic'+'lePosMoved'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20meshLoc'+'alPos\x20=\x20in'+'put.partic'+'le_vertexD'+'ata3.xyz;\x0a'),A3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20inp'+'ut.particl'+'e_vertexDa'+'ta2.y\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20localP'+'os\x20=\x20local'+'Pos\x20+\x20part'+'iclePos;\x0a\x0a'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20vec4f('+'localPos,\x20'+'1.0);\x0a',b3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20rotate'+'dQuadXY);\x0a',C3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(rg'+'b,\x20a);\x0a\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a}\x0a',P3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20sca'+'le\x20*\x20unifo'+'rm.emitter'+'Scale;\x0a\x20\x20\x20'+'\x20localPos\x20'+'=\x20localPos'+'\x20+\x20particl'+'ePos;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20SC'+'REEN_SPACE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(localPo'+'s.x,\x20local'+'Pos.y,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_v'+'iewProject'+'ion\x20*\x20vec4'+'f(localPos'+'.xyz,\x201.0)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a',M3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20no'+'rmal\x20*\x200.5'+'\x20+\x200.5;\x0a\x20\x20'+'\x20\x20var\x20posN'+'ormal:\x20vec'+'3f\x20=\x20-norm'+'al\x20*\x200.5\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'negNormal\x20'+'=\x20negNorma'+'l\x20*\x20negNor'+'mal;\x0a\x20\x20\x20\x20p'+'osNormal\x20='+'\x20posNormal'+'\x20*\x20posNorm'+'al;\x0a',I3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20/'+'/\x20XYZ\x20=\x20pa'+'rticle\x20pos'+'ition,\x20W\x20='+'\x20particle\x20'+'ID\x20+\x20rando'+'m\x20factor\x0a#'+'if\x20defined'+'(USE_MESH)'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(USE'+'_MESH_UV)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_uv:'+'\x20vec2f;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'esh\x20UV\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20pa'+'rticle_uv:'+'\x20vec2f\x20=\x20v'+'ec2f(0.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0aunifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0aunif'+'orm\x20matrix'+'_normal:\x20m'+'at3x3f;\x0aun'+'iform\x20matr'+'ix_viewInv'+'erse:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20numPa'+'rticlesPot'+':\x20f32;\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0auni'+'form\x20stret'+'ch:\x20f32;\x0au'+'niform\x20wra'+'pBounds:\x20v'+'ec3f;\x0aunif'+'orm\x20emitte'+'rScale:\x20ve'+'c3f;\x0aunifo'+'rm\x20emitter'+'Pos:\x20vec3f'+';\x0auniform\x20'+'faceTangen'+'t:\x20vec3f;\x0a'+'uniform\x20fa'+'ceBinorm:\x20'+'vec3f;\x0auni'+'form\x20rate:'+'\x20f32;\x0aunif'+'orm\x20rateDi'+'v:\x20f32;\x0aun'+'iform\x20life'+'time:\x20f32;'+'\x0auniform\x20d'+'eltaRandom'+'nessStatic'+':\x20f32;\x0auni'+'form\x20scale'+'DivMult:\x20f'+'32;\x0aunifor'+'m\x20alphaDiv'+'Mult:\x20f32;'+'\x0auniform\x20s'+'eed:\x20f32;\x0a'+'uniform\x20de'+'lta:\x20f32;\x0a'+'\x0avar\x20parti'+('cleTexOUT:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20particle'+'TexOUTSamp'+'ler:\x20sampl'+'er;\x0avar\x20pa'+'rticleTexI'+'N:\x20texture'+'_2d<f32>;\x0a'+'var\x20partic'+'leTexINSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex0:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex1:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x1Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex2'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex2S'+'ampler:\x20sa'+'mpler;\x0a#en'+'dif\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0avarying'+'\x20texCoords'+'AlphaLife:'+'\x20vec4f;\x0a\x0av'+'ar<private'+'>\x20inPos:\x20v'+'ec3f;\x0avar<'+'private>\x20i'+'nVel:\x20vec3'+'f;\x0avar<pri'+'vate>\x20inAn'+'gle:\x20f32;\x0a'+'var<privat'+'e>\x20inShow:'+'\x20bool;\x0avar'+'<private>\x20'+'inLife:\x20f3'+'2;\x0a'),D3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20ma'+'x(normal,\x20'+'vec3(0.0))'+';\x0a\x20\x20\x20\x20var\x20'+'posNormal:'+'\x20vec3f\x20=\x20m'+'ax(-normal'+',\x20vec3(0.0'+'));\x0a',L3='\x0a\x20\x20\x20\x20let\x20l'+'ight:\x20vec3'+'f\x20=\x20negNor'+'mal.x\x20*\x20un'+'iform.ligh'+'tCube[0]\x20+'+'\x20posNormal'+'.x\x20*\x20unifo'+'rm.lightCu'+'be[1]\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20negNormal'+'.y\x20*\x20unifo'+'rm.lightCu'+'be[2]\x20+\x20po'+'sNormal.y\x20'+'*\x20uniform.'+'lightCube['+'3]\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ne'+'gNormal.z\x20'+'*\x20uniform.'+'lightCube['+'4]\x20+\x20posNo'+'rmal.z\x20*\x20u'+'niform.lig'+'htCube[5];'+'\x0a\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20li'+'ght;\x0a',R3='\x0aparticleP'+'os\x20=\x20(unif'+'orm.matrix'+'_model\x20*\x20v'+'ec4f(parti'+'clePos,\x201.'+'0)).xyz;\x0a',O3='\x0avar\x20local'+'Pos\x20=\x20mesh'+'LocalPos;\x0a'+'let\x20rotRes'+'ultXY\x20=\x20ro'+'tateWithMa'+'trix(local'+'Pos.xy,\x20in'+'Angle);\x0alo'+'calPos\x20=\x20v'+'ec3f(rotRe'+'sultXY.rot'+'atedVec,\x20l'+'ocalPos.z)'+';\x0arotMatri'+'x\x20=\x20rotRes'+'ultXY.matr'+'ix;\x0a\x0alet\x20r'+'otResultYZ'+'\x20=\x20rotateW'+'ithMatrix('+'localPos.y'+'z,\x20inAngle'+');\x0alocalPo'+'s\x20=\x20vec3f('+'localPos.x'+',\x20rotResul'+'tYZ.rotate'+'dVec);\x0arot'+'Matrix\x20=\x20r'+'otResultYZ'+'.matrix;\x0a\x0a'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',F3='\x0aoutput.No'+'rmal\x20=\x20nor'+'malize(loc'+'alPos\x20+\x20un'+'iform.matr'+'ix_viewInv'+'erse[2].xy'+'z);\x0a',N3='\x0a\x20\x20\x20\x20let\x20s'+'ampledNorm'+'al:\x20vec4f\x20'+'=\x20textureS'+'ample(norm'+'alMap,\x20nor'+'malMapSamp'+'ler,\x20vec2f'+'(input.tex'+'CoordsAlph'+'aLife.x,\x201'+'.0\x20-\x20input'+'.texCoords'+'AlphaLife.'+'y));\x0a\x20\x20\x20\x20l'+'et\x20normalM'+'ap:\x20vec3f\x20'+'=\x20normaliz'+'e(sampledN'+'ormal.xyz\x20'+'*\x202.0\x20-\x201.'+'0);\x0a\x0a\x20\x20\x20\x20l'+'et\x20Particl'+'eMat\x20=\x20mat'+'3x3<f32>(P'+'articleMat'+'0,\x20Particl'+'eMat1,\x20Par'+'ticleMat2)'+';\x0a\x20\x20\x20\x20let\x20'+'normal:\x20ve'+'c3f\x20=\x20Part'+'icleMat\x20*\x20'+'normalMap;'+'\x0a',k3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan2(veloc'+'ityV.x,\x20ve'+'locityV.y)'+';\x0a',U3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',B3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20Normal:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20varying\x20'+'ParticleMa'+'t0:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Particle'+'Mat2:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'Cube:\x20arra'+'y<vec3f,\x206'+'>;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vDe'+'pth:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sc'+'reenDepthP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22fogPS\x22\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'ap:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'apSampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'iclePS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'VERTEX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'ormal:\x20vec'+'3f\x20=\x20Norma'+'l;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20MAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_normal'+'MapPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20!=\x20NON'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20HAL'+'F_LAMBERT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_halflambe'+'rtPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_lambertPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+('#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_light'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20BLE'+'ND\x20==\x20NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendNorma'+'lPS\x22\x0a\x20\x20\x20\x20#'+'elif\x20BLEND'+'\x20==\x20ADDITI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendAddPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+'\x20MULTIPLIC'+'ATIVE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_blendMu'+'ltiplyPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_endPS'+'\x22\x0a'),z3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20anim'+'TexTilesPa'+'rams:\x20vec2'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20a'+'nimTexPara'+'ms:\x20vec4f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20ani'+'mTexIndexP'+'arams:\x20vec'+'2f;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20Partic'+'leMat0:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20Pa'+'rticleMat2'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20==\x20V'+'ERTEX\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Normal:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vDepth:\x20f'+'32;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_in'+'itVS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20PACK8\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleIn'+'putRgba8PS'+'\x22\x20\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x20\x22parti'+'cleInputFl'+'oatPS\x22\x20\x20\x20\x20'+'//\x20why\x20are'+'\x20these\x20PS\x20'+'and\x20not\x20VS'+'?\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'screenDept'+'hPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'articleVS\x22'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x20//\x20PARTI'+'CLE_CPU\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SOFT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22screenDep'+'thPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_c'+'puVS\x22\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_l'+('ocalShiftV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20ANIM'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20A'+'NIMTEX_LOO'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimFram'+'eLoopVS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleAnimFra'+'meClampVS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimTexV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20wrap\x20is\x20'+'not\x20used\x20o'+'n\x20CPU,\x20it\x20'+'was\x20commen'+'ted\x20out.\x20T'+'ODO:\x20inves'+'tigate\x20why'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'WRAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_wrap'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ALIGN_TO'+'_MOTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_point'+'AlongVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20USE_MESH'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_me'+'shVS\x22\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CUSTOM_FA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_custom'+'FaceVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_billboa'+'rdVS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20VERTEX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_norma'+'lVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20NORMA'+'L\x20==\x20MAP\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_TBNV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STRE'+'TCH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_stretchVS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PART'+'ICLE_GPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_endV')+('S\x22\x0a\x20\x20\x20\x20#el'+'se\x20//\x20PART'+'ICLE_CPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_cpu_'+'endVS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softVS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),V3='\x0a\x20\x20\x20\x20var\x20d'+'epth:\x20f32\x20'+'=\x20getLinea'+'rScreenDep'+'thFrag();\x0a'+'\x20\x20\x20\x20var\x20pa'+'rticleDept'+'h:\x20f32\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20var\x20depth'+'Diff:\x20f32\x20'+'=\x20saturate'+'(abs(parti'+'cleDepth\x20-'+'\x20depth)\x20*\x20'+'uniform.so'+'ftening);\x0a'+'\x20\x20\x20\x20a\x20=\x20a\x20'+'*\x20depthDif'+'f;\x0a',G3='\x0a\x20\x20\x20\x20outpu'+'t.vDepth\x20='+'\x20getLinear'+'Depth(loca'+'lPos);\x0a',H3='\x0a\x20\x20\x20\x20let\x20m'+'oveDir:\x20ve'+'c3f\x20=\x20inVe'+'l\x20*\x20unifor'+'m.stretch;'+'\x0a\x20\x20\x20\x20var\x20p'+'osPrev:\x20ve'+'c3f\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20=\x20posPrev'+'\x20+\x20particl'+'ePosMoved;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'viewRotati'+'onTemp:\x20ma'+'t3x3f\x20=\x20ma'+'t3x3f(unif'+'orm.matrix'+'_view[0].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[1].xyz'+',\x20uniform.'+'matrix_vie'+'w[2].xyz);'+'\x0a\x20\x20\x20\x20let\x20c'+'enterToVer'+'texV:\x20vec2'+'f\x20=\x20normal'+'ize((viewR'+'otationTem'+'p\x20*\x20localP'+'os).xy);\x0a\x0a'+'\x20\x20\x20\x20let\x20in'+'terpolatio'+'n:\x20f32\x20=\x20d'+'ot(-veloci'+'tyV,\x20cente'+'rToVertexV'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x0a\x20\x20\x20\x20'+'particlePo'+'s\x20=\x20mix(pa'+'rticlePos,'+'\x20posPrev,\x20'+'interpolat'+'ion);\x0a',W3='\x0a\x20\x20\x20\x20let\x20r'+'ot3\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(r'+'otMatrix[0'+'][0],\x20rotM'+'atrix[1][0'+'],\x200.0),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(rotMatr'+'ix[0][1],\x20'+'rotMatrix['+'1][1],\x200.0'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3f(0.0'+',\x200.0,\x201.0'+')\x0a\x20\x20\x20\x20);\x0a\x0a'+'\x20\x20\x20\x20let\x20vi'+'ewBasis\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20-un'+'iform.matr'+'ix_viewInv'+'erse[0].xy'+'z,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20-uniform.'+'matrix_vie'+'wInverse[1'+'].xyz,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.matrix_'+'viewInvers'+'e[2].xyz\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20tempM'+'at\x20=\x20viewB'+'asis\x20*\x20rot'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20WGSL\x20does'+'\x20not\x20suppo'+'rt\x20matrix\x20'+'varyings,\x20'+'decompose\x20'+'it\x20to\x20vec3'+'s\x0a\x20\x20\x20\x20outp'+'ut.Particl'+'eMat0\x20=\x20te'+'mpMat[0];\x0a'+'\x20\x20\x20\x20output'+'.ParticleM'+'at1\x20=\x20temp'+'Mat[1];\x0a\x20\x20'+'\x20\x20output.P'+'articleMat'+'2\x20=\x20tempMa'+'t[2];\x0a',$3='\x0a\x20\x20\x20\x20let\x20o'+'rigParticl'+'ePos:\x20vec3'+'f\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20particleP'+'os\x20=\x20parti'+'clePos\x20-\x20u'+'niform.mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20=\x20(par'+'ticlePos\x20%'+'\x20uniform.w'+'rapBounds)'+'\x20-\x20uniform'+'.wrapBound'+'s\x20*\x200.5;\x0a\x20'+'\x20\x20\x20particl'+'ePos\x20=\x20par'+'ticlePos\x20+'+'\x20uniform.m'+'atrix_mode'+'l[3].xyz;\x0a'+'\x20\x20\x20\x20partic'+'lePosMoved'+'\x20=\x20particl'+'ePos\x20-\x20ori'+'gParticleP'+'os;\x0a',X3={'particlePS':i3,'particleVS':r3,'particleAnimFrameClampVS':a3,'particleAnimFrameLoopVS':n3,'particleAnimTexVS':o3,'particleInputFloatPS':l3,'particleInputRgba8PS':h3,'particleOutputFloatPS':c3,'particleOutputRgba8PS':d3,'particleUpdaterAABBPS':f3,'particleUpdaterEndPS':u3,'particleUpdaterInitPS':m3,'particleUpdaterNoRespawnPS':p3,'particleUpdaterOnStopPS':_3,'particleUpdaterRespawnPS':g3,'particleUpdaterSpherePS':S3,'particleUpdaterStartPS':y3,'particle_billboardVS':v3,'particle_blendAddPS':x3,'particle_blendMultiplyPS':T3,'particle_blendNormalPS':w3,'particle_cpuVS':E3,'particle_cpu_endVS':A3,'particle_customFaceVS':b3,'particle_endPS':C3,'particle_endVS':P3,'particle_halflambertPS':M3,'particle_initVS':I3,'particle_lambertPS':D3,'particle_lightingPS':L3,'particle_localShiftVS':R3,'particle_meshVS':O3,'particle_normalVS':F3,'particle_normalMapPS':N3,'particle_pointAlongVS':k3,'particle_simulationPS':U3,'particle_shaderPS':B3,'particle_shaderVS':z3,'particle_softPS':V3,'particle_softVS':G3,'particle_stretchVS':H3,'particle_TBNVS':W3,'particle_wrapVS':$3},q3=['enabled','autoPlay','numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','loop','preWarm','lighting','halfLamber'+'t','intensity','depthWrite','noFog','depthSofte'+'ning','sort','blendType','stretch','alignToMot'+'ion','emitterSha'+'pe','emitterExt'+'ents','emitterExt'+'entsInner','emitterRad'+'ius','emitterRad'+'iusInner','initialVel'+'ocity','wrap','wrapBounds','localSpace','screenSpac'+'e','colorMapAs'+'set','normalMapA'+'sset','mesh','meshAsset','renderAsse'+'t','orientatio'+'n','particleNo'+'rmal','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','velocityGr'+'aph','velocityGr'+'aph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2','scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','colorMap','normalMap','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animSpeed','animLoop','layers'];class j3 extends lt{constructor(_0x41702e){super(_0x41702e),this['id']='particlesy'+'stem',this['ComponentT'+'ype']=dR,this['DataType']=fR,this['schema']=q3,this['propertyTy'+'pes']={'emitterExtents':'vec3','emitterExtentsInner':'vec3','particleNormal':'vec3','wrapBounds':'vec3','localVelocityGraph':'curveset','localVelocityGraph2':'curveset','velocityGraph':'curveset','velocityGraph2':'curveset','colorGraph':'curveset','colorGraph2':'curveset','alphaGraph':'curve','alphaGraph2':'curve','rotationSpeedGraph':'curve','rotationSpeedGraph2':'curve','radialSpeedGraph':'curve','radialSpeedGraph2':'curve','scaleGraph':'curve','scaleGraph2':'curve'},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this),Ce['get'](_0x41702e['graphicsDe'+'vice'],ze)['add'](s3),Ce['get'](_0x41702e['graphicsDe'+'vice'],st)['add'](X3);}['initialize'+'ComponentD'+'ata'](_0x464884,_0x3385af,_0x433cc1){const _0x2f2a1a={};_0x433cc1=[];const _0x1435da=this['propertyTy'+'pes'];(_0x3385af['mesh']instanceof me||typeof _0x3385af['mesh']=='number')&&(_0x3385af['meshAsset']=_0x3385af['mesh'],delete _0x3385af['mesh']);for(const _0x149c4e in _0x3385af){if(_0x3385af['hasOwnProp'+'erty'](_0x149c4e)&&(_0x433cc1['push'](_0x149c4e),_0x2f2a1a[_0x149c4e]=_0x3385af[_0x149c4e]),_0x1435da[_0x149c4e]==='vec3')Array['isArray'](_0x2f2a1a[_0x149c4e])&&(_0x2f2a1a[_0x149c4e]=new I(_0x2f2a1a[_0x149c4e][0x10*-0x1ca+-0x7d3*-0x1+0x14cd],_0x2f2a1a[_0x149c4e][0x159*0x19+-0x2*0x6a1+-0x146e],_0x2f2a1a[_0x149c4e][-0x1*-0x1a15+-0x1*-0xceb+-0x26fe]));else{if(_0x1435da[_0x149c4e]==='curve'){if(!(_0x2f2a1a[_0x149c4e]instanceof Bs)){const _0x4e96f1=_0x2f2a1a[_0x149c4e]['type'];_0x2f2a1a[_0x149c4e]=new Bs(_0x2f2a1a[_0x149c4e]['keys']),_0x2f2a1a[_0x149c4e]['type']=_0x4e96f1;}}else{if(_0x1435da[_0x149c4e]==='curveset'&&!(_0x2f2a1a[_0x149c4e]instanceof Wr)){const _0x74a124=_0x2f2a1a[_0x149c4e]['type'];_0x2f2a1a[_0x149c4e]=new Wr(_0x2f2a1a[_0x149c4e]['keys']),_0x2f2a1a[_0x149c4e]['type']=_0x74a124;}}}_0x2f2a1a['layers']&&Array['isArray'](_0x2f2a1a['layers'])&&(_0x2f2a1a['layers']=_0x2f2a1a['layers']['slice'](0x18a+0x1d75*-0x1+0x1beb*0x1));}super['initialize'+'ComponentD'+'ata'](_0x464884,_0x2f2a1a,_0x433cc1);}['cloneCompo'+'nent'](_0x3e3070,_0x25f5d3){const _0x81b55=_0x3e3070['particlesy'+'stem']['data'],_0x179d63=this['schema'],_0x3e36f3={};for(let _0x50b307=0xd68+-0xe8c+-0x2*-0x92,_0x19b5ee=_0x179d63['length'];_0x50b307<_0x19b5ee;_0x50b307++){const _0x5c5777=_0x179d63[_0x50b307];let _0xa5e138=_0x81b55[_0x5c5777];_0xa5e138 instanceof I||_0xa5e138 instanceof Bs||_0xa5e138 instanceof Wr?(_0xa5e138=_0xa5e138['clone'](),_0x3e36f3[_0x5c5777]=_0xa5e138):_0x5c5777==='layers'?_0x3e36f3['layers']=_0x81b55['layers']['slice'](-0x19*0xe9+0x1661+0x4*0x18):_0xa5e138!=null&&(_0x3e36f3[_0x5c5777]=_0xa5e138);}return this['addCompone'+'nt'](_0x25f5d3,_0x3e36f3);}['onUpdate'](_0x171f4d){const _0x505b14=this['store'],_0x13f8c9=this['app']['stats']['particles'],_0x3c311e=this['app']['scene']['layers'];for(let _0x5deab3=-0x2312+-0x29*0xb2+0x2*0x1fca;_0x5deab3<_0x3c311e['layerList']['length'];_0x5deab3++)_0x3c311e['layerList'][_0x5deab3]['requiresLi'+'ghtCube']=!(0x3*0x5f7+0x493+-0x1677);for(const _0x272f54 in _0x505b14)if(_0x505b14['hasOwnProp'+'erty'](_0x272f54)){const _0x1905c8=_0x505b14[_0x272f54],_0x39dfc8=_0x1905c8['entity'],_0x13261d=_0x1905c8['data'];if(_0x13261d['enabled']&&_0x39dfc8['enabled']){const _0x191a68=_0x39dfc8['particlesy'+'stem']['emitter'];if(!(_0x191a68!=null&&_0x191a68['meshInstan'+'ce']['visible']))continue;if(_0x191a68['lighting']){const _0x291047=_0x13261d['layers'];for(let _0x3ad793=-0x24cf+0x1f01*0x1+-0x5ce*-0x1;_0x3ad793<_0x291047['length'];_0x3ad793++){const _0x2637f1=_0x3c311e['getLayerBy'+'Id'](_0x291047[_0x3ad793]);_0x2637f1&&(_0x2637f1['requiresLi'+'ghtCube']=!(-0x2b1*-0x5+0x569*0x1+0x3c6*-0x5));}}if(!_0x13261d['paused']){let _0x3f3c94=0xd98+-0x696*0x1+-0x4e*0x17;if(_0x191a68['simTime']+=_0x171f4d,_0x191a68['simTime']>=_0x191a68['fixedTimeS'+'tep']&&(_0x3f3c94=Math['floor'](_0x191a68['simTime']/_0x191a68['fixedTimeS'+'tep']),_0x191a68['simTime']-=_0x3f3c94*_0x191a68['fixedTimeS'+'tep']),_0x3f3c94){_0x3f3c94=Math['min'](_0x3f3c94,_0x191a68['maxSubStep'+'s']);for(let _0x898ae1=-0x43d+0x3*-0x122+0x7a3;_0x898ae1<_0x3f3c94;_0x898ae1++)_0x191a68['addTime'](_0x191a68['fixedTimeS'+'tep'],!(0x9d*-0x24+0xd8d*-0x1+-0x1*-0x23a2));_0x13f8c9['_updatesPe'+'rFrame']+=_0x3f3c94,_0x13f8c9['_frameTime']+=_0x191a68['_addTimeTi'+'me'],_0x191a68['_addTimeTi'+'me']=0x7d1+-0x1*-0x152e+0x1*-0x1cff;}_0x191a68['finishFram'+'e']();}}}}['onBeforeRe'+'move'](_0x4ec963,_0xf9e410){_0xf9e410['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class Y3 extends jc{constructor(_0x303a4b,_0x1f6bc3){super(),this['skin']=_0x303a4b,this['skinInstan'+'ce']=_0x1f6bc3;}}const Os=class Os{static['logCachedS'+'kinInstanc'+'es'](){console['log']('CachedSkin'+'Instances'),Os['_skinInsta'+'nceCache']['forEach']((_0x55674d,_0x2abb66)=>{console['log'](_0x2abb66['name']+':\x20Array('+_0x55674d['length']+')');for(let _0x59e4d5=-0xf2e+0x2450+-0x43a*0x5;_0x59e4d5<_0x55674d['length'];_0x59e4d5++)console['log']('\x20\x20'+_0x59e4d5+(':\x20RefCount'+'\x20')+_0x55674d[_0x59e4d5]['refCount']);});}static['createCach'+'edSkinInst'+'ance'](_0x3c5b82,_0x23aae5,_0x12f6f7){let _0x30b6e7=Os['getCachedS'+'kinInstanc'+'e'](_0x3c5b82,_0x23aae5);return _0x30b6e7||(_0x30b6e7=new hl(_0x3c5b82),_0x30b6e7['resolve'](_0x23aae5,_0x12f6f7),Os['addCachedS'+'kinInstanc'+'e'](_0x3c5b82,_0x23aae5,_0x30b6e7)),_0x30b6e7;}static['getCachedS'+'kinInstanc'+'e'](_0x2526d9,_0x5a9211){let _0x1b8329=null;const _0x55fc76=Os['_skinInsta'+'nceCache']['get'](_0x5a9211);if(_0x55fc76){const _0x219d85=_0x55fc76['find'](_0x9dc8d2=>_0x9dc8d2['skin']===_0x2526d9);_0x219d85&&(_0x219d85['incRefCoun'+'t'](),_0x1b8329=_0x219d85['skinInstan'+'ce']);}return _0x1b8329;}static['addCachedS'+'kinInstanc'+'e'](_0x442e9e,_0x421c4c,_0xbaf84d){let _0x250174=Os['_skinInsta'+'nceCache']['get'](_0x421c4c);_0x250174||(_0x250174=[],Os['_skinInsta'+'nceCache']['set'](_0x421c4c,_0x250174));let _0x2f3c8b=_0x250174['find'](_0x312a06=>_0x312a06['skin']===_0x442e9e);_0x2f3c8b||(_0x2f3c8b=new Y3(_0x442e9e,_0xbaf84d),_0x250174['push'](_0x2f3c8b)),_0x2f3c8b['incRefCoun'+'t']();}static['removeCach'+'edSkinInst'+'ance'](_0x342c87){if(_0x342c87){const _0x10e4c4=_0x342c87['rootBone'];if(_0x10e4c4){const _0x5a3a03=Os['_skinInsta'+'nceCache']['get'](_0x10e4c4);if(_0x5a3a03){const _0x44adaa=_0x5a3a03['findIndex'](_0x44acdd=>_0x44acdd['skinInstan'+'ce']===_0x342c87);if(_0x44adaa>=-0x2396+0x4*0x7e5+0x6*0xab){const _0x338c28=_0x5a3a03[_0x44adaa];_0x338c28['decRefCoun'+'t'](),_0x338c28['refCount']===-0x1*0x1cb5+0x25fe+0x1*-0x949&&(_0x5a3a03['splice'](_0x44adaa,-0x1*-0x2230+-0x1f2b+-0x304),_0x5a3a03['length']||Os['_skinInsta'+'nceCache']['delete'](_0x10e4c4),_0x342c87&&(_0x342c87['destroy'](),_0x338c28['skinInstan'+'ce']=null));}}}}}};h(Os,'_skinInsta'+'nceCache',new Map());let $o=Os;class Xo{constructor(_0x3a0d8e,_0x220b99,_0x751d0e,_0x5612b5,_0x341c6a){h(this,'_evtLoadBy'+'Id',null),h(this,'_evtUnload'+'ById',null),h(this,'_evtAddByI'+'d',null),h(this,'_evtRemove'+'ById',null),h(this,'_evtLoadBy'+'Url',null),h(this,'_evtAddByU'+'rl',null),h(this,'_evtRemove'+'ByUrl',null),(this['propertyNa'+'me']=_0x3a0d8e,this['parent']=_0x220b99,this['_scope']=_0x341c6a,this['_registry']=_0x751d0e,this['id']=null,this['url']=null,this['asset']=null,this['_onAssetLo'+'ad']=_0x5612b5['load'],this['_onAssetAd'+'d']=_0x5612b5['add'],this['_onAssetRe'+'move']=_0x5612b5['remove'],this['_onAssetUn'+'load']=_0x5612b5['unload']);}set['id'](_0x1a6101){if(this['url'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_id']=_0x1a6101,this['asset']=this['_registry']['get'](this['_id']),this['_bind']();}get['id'](){return this['_id'];}set['url'](_0x5f4cd1){if(this['id'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_url']=_0x5f4cd1,this['asset']=this['_registry']['getByUrl'](this['_url']),this['_bind']();}get['url'](){return this['_url'];}['_bind'](){this['id']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Id']=this['_registry']['on']('load:'+this['id'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByI'+'d']=this['_registry']['once']('add:'+this['id'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ById']=this['_registry']['on']('remove:'+this['id'],this['_onRemove'],this)),this['_onAssetUn'+'load']&&(this['_evtUnload'+'ById']=this['_registry']['on']('unload:'+this['id'],this['_onUnload'],this))),this['url']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Url']=this['_registry']['on']('load:url:'+this['url'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByU'+'rl']=this['_registry']['once']('add:url:'+this['url'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ByUrl']=this['_registry']['on']('remove:url'+':'+this['url'],this['_onRemove'],this)));}['_unbind'](){var _0x49f6b1,_0x44104a,_0x3e3423,_0x4fd8dd,_0xcf8740,_0x537f4d,_0x2a2dde;this['id']&&((_0x49f6b1=this['_evtLoadBy'+'Id'])==null||_0x49f6b1['off'](),this['_evtLoadBy'+'Id']=null,(_0x44104a=this['_evtAddByI'+'d'])==null||_0x44104a['off'](),this['_evtAddByI'+'d']=null,(_0x3e3423=this['_evtRemove'+'ById'])==null||_0x3e3423['off'](),this['_evtRemove'+'ById']=null,(_0x4fd8dd=this['_evtUnload'+'ById'])==null||_0x4fd8dd['off'](),this['_evtUnload'+'ById']=null),this['url']&&((_0xcf8740=this['_evtLoadBy'+'Url'])==null||_0xcf8740['off'](),this['_evtLoadBy'+'Url']=null,(_0x537f4d=this['_evtAddByU'+'rl'])==null||_0x537f4d['off'](),this['_evtAddByU'+'rl']=null,(_0x2a2dde=this['_evtRemove'+'ByUrl'])==null||_0x2a2dde['off'](),this['_evtRemove'+'ByUrl']=null);}['_onLoad'](_0x6826a4){this['_onAssetLo'+'ad']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x6826a4);}['_onAdd'](_0x3a826a){this['asset']=_0x3a826a,this['_onAssetAd'+'d']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x3a826a);}['_onRemove'](_0x3067b6){this['_onAssetRe'+'move']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x3067b6),this['asset']=null;}['_onUnload'](_0x2cfcc2){this['_onAssetUn'+'load']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x2cfcc2);}}class pv extends we{constructor(_0x5611e0,_0x37f898){super(_0x5611e0,_0x37f898),h(this,'_type','asset'),h(this,'_castShado'+'ws',!(0x1*-0x19f9+0x274+0x1785)),h(this,'_receiveSh'+'adows',!(0x1ace+-0x442+-0xde*0x1a)),h(this,'_castShado'+'wsLightmap',!(0x1*-0xe31+0x189f+-0xa6e)),h(this,'_lightmapp'+'ed',!(-0x865+-0xf5*-0x12+-0x8d4)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x10*0x12+-0x149e+0x15bf),h(this,'isStatic',!(0x8f4*0x4+-0x5*-0x641+-0x4314)),h(this,'_batchGrou'+'pId',-(0x1*0x1b9b+0xdcc+-0x2966)),h(this,'_layers',[Wi]),h(this,'_renderSty'+'le',Qa),h(this,'_meshInsta'+'nces',[]),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_assetRefe'+'rence'),h(this,'_materialR'+'eferences',[]),h(this,'_material'),h(this,'_rootBone',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['_assetRefe'+'rence']=new Xo('asset',this,_0x5611e0['app']['assets'],{'add':this['_onRenderA'+'ssetAdded'],'load':this['_onRenderA'+'ssetLoad'],'remove':this['_onRenderA'+'ssetRemove'],'unload':this['_onRenderA'+'ssetUnload']},this),this['_material']=_0x5611e0['defaultMat'+'erial'],_0x37f898['on']('remove',this['onRemoveCh'+'ild'],this),_0x37f898['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x37f898['on']('insert',this['onInsertCh'+'ild'],this),_0x37f898['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['renderStyl'+'e'](_0x2a326b){this['_renderSty'+'le']!==_0x2a326b&&(this['_renderSty'+'le']=_0x2a326b,We['_prepareRe'+'nderStyleF'+'orArray'](this['_meshInsta'+'nces'],_0x2a326b));}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['customAabb'](_0x549118){this['_customAab'+'b']=_0x549118;const _0x12ae07=this['_meshInsta'+'nces'];if(_0x12ae07){for(let _0x2bd8c6=-0x11aa+-0x1*-0x1953+-0x7a9;_0x2bd8c6<_0x12ae07['length'];_0x2bd8c6++)_0x12ae07[_0x2bd8c6]['setCustomA'+'abb'](this['_customAab'+'b']);}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x59d0fc){if(this['_type']!==_0x59d0fc&&(this['_area']=null,this['_type']=_0x59d0fc,this['destroyMes'+'hInstances'](),_0x59d0fc!=='asset')){let _0x5b7918=this['_material'];(!_0x5b7918||_0x5b7918===this['system']['defaultMat'+'erial'])&&(_0x5b7918=this['_materialR'+'eferences'][0xa4c+0x19e4+-0x2430]&&this['_materialR'+'eferences'][-0x1*-0xb87+0xdf*0x7+-0x11a0]['asset']&&this['_materialR'+'eferences'][0x210f+0x331+-0x2440]['asset']['resource']);const _0x5d1e8c=fv(this['system']['app']['graphicsDe'+'vice'],_0x59d0fc);this['_area']=_0x5d1e8c['area'],this['meshInstan'+'ces']=[new We(_0x5d1e8c['mesh'],_0x5b7918||this['system']['defaultMat'+'erial'],this['entity'])];}}get['type'](){return this['_type'];}set['meshInstan'+'ces'](_0x18be5b){if(M['assert'](Array['isArray'](_0x18be5b),'MeshInstan'+'ces\x20set\x20to'+'\x20a\x20Render\x20'+'component\x20'+'must\x20be\x20an'+'\x20array.'),this['destroyMes'+'hInstances'](),this['_meshInsta'+'nces']=_0x18be5b,this['_meshInsta'+'nces']){const _0x595c2d=this['_meshInsta'+'nces'];for(let _0x45edfc=0x858+-0x41a+-0x43e;_0x45edfc<_0x595c2d['length'];_0x45edfc++)_0x595c2d[_0x45edfc]['node']||(_0x595c2d[_0x45edfc]['node']=this['entity']),_0x595c2d[_0x45edfc]['castShadow']=this['_castShado'+'ws'],_0x595c2d[_0x45edfc]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x595c2d[_0x45edfc]['renderStyl'+'e']=this['_renderSty'+'le'],_0x595c2d[_0x45edfc]['setLightma'+'pped'](this['_lightmapp'+'ed']),_0x595c2d[_0x45edfc]['setCustomA'+'abb'](this['_customAab'+'b']);this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['meshInstan'+'ces'](){return this['_meshInsta'+'nces'];}set['lightmappe'+'d'](_0x3aaedb){if(_0x3aaedb!==this['_lightmapp'+'ed']){this['_lightmapp'+'ed']=_0x3aaedb;const _0x792486=this['_meshInsta'+'nces'];if(_0x792486){for(let _0x4801de=-0x1*-0x219b+-0x4a5*0x7+-0x28*0x7;_0x4801de<_0x792486['length'];_0x4801de++)_0x792486[_0x4801de]['setLightma'+'pped'](_0x3aaedb);}}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x22573e){if(this['_castShado'+'ws']!==_0x22573e){const _0x1c71c7=this['_meshInsta'+'nces'];if(_0x1c71c7){const _0x1a0020=this['layers'],_0x1d0bde=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x22573e)for(let _0x3cea8f=0x13*-0xf1+0x1*-0x1507+-0x2*-0x1375;_0x3cea8f<_0x1a0020['length'];_0x3cea8f++){const _0x5eeb80=_0x1d0bde['layers']['getLayerBy'+'Id'](this['layers'][_0x3cea8f]);_0x5eeb80&&_0x5eeb80['removeShad'+'owCasters'](_0x1c71c7);}for(let _0x5d7b62=0x6d6+0x158f*0x1+0x1*-0x1c65;_0x5d7b62<_0x1c71c7['length'];_0x5d7b62++)_0x1c71c7[_0x5d7b62]['castShadow']=_0x22573e;if(!this['_castShado'+'ws']&&_0x22573e)for(let _0x4fc2fc=-0x1*-0x1f4b+0x1*0x1f19+-0x3e64;_0x4fc2fc<_0x1a0020['length'];_0x4fc2fc++){const _0x313faf=_0x1d0bde['layers']['getLayerBy'+'Id'](_0x1a0020[_0x4fc2fc]);_0x313faf&&_0x313faf['addShadowC'+'asters'](_0x1c71c7);}}this['_castShado'+'ws']=_0x22573e;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x5bc154){if(this['_receiveSh'+'adows']!==_0x5bc154){this['_receiveSh'+'adows']=_0x5bc154;const _0x2a644f=this['_meshInsta'+'nces'];if(_0x2a644f){for(let _0x18945f=0x920+-0x1f1a+0x15fa;_0x18945f<_0x2a644f['length'];_0x18945f++)_0x2a644f[_0x18945f]['receiveSha'+'dow']=_0x5bc154;}}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x3d6eba){this['_castShado'+'wsLightmap']=_0x3d6eba;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x1ff5a1){this['_lightmapS'+'izeMultipl'+'ier']=_0x1ff5a1;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x2514ab){const _0x289cfc=this['system']['app']['scene']['layers'];let _0x5e5533;if(this['_meshInsta'+'nces']){for(let _0x44f700=0x7e2+0x1e9*0x6+-0x1358;_0x44f700<this['_layers']['length'];_0x44f700++)_0x5e5533=_0x289cfc['getLayerBy'+'Id'](this['_layers'][_0x44f700]),_0x5e5533&&_0x5e5533['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}this['_layers']['length']=0x3*0xc5b+-0x3*-0x39b+0x7fb*-0x6;for(let _0x172191=-0x23*-0x87+-0x1678+0x403;_0x172191<_0x2514ab['length'];_0x172191++)this['_layers'][_0x172191]=_0x2514ab[_0x172191];if(!(!this['enabled']||!this['entity']['enabled']||!this['_meshInsta'+'nces'])){for(let _0x494fbe=0x1217+-0x7f3*0x1+-0xa24;_0x494fbe<this['_layers']['length'];_0x494fbe++)_0x5e5533=_0x289cfc['getLayerBy'+'Id'](this['_layers'][_0x494fbe]),_0x5e5533&&_0x5e5533['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x1ebf0c){var _0x53adaf,_0x4a6a0c;this['_batchGrou'+'pId']!==_0x1ebf0c&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0x26dd*-0x1+-0xb*-0x265+0x56f*-0xc&&((_0x53adaf=this['system']['app']['batcher'])==null||_0x53adaf['remove'](mt['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x1ebf0c>=0x3*-0x36f+-0x227f+0x2ccc&&((_0x4a6a0c=this['system']['app']['batcher'])==null||_0x4a6a0c['insert'](mt['RENDER'],_0x1ebf0c,this['entity'])),_0x1ebf0c<0x1817+-0x3b*-0x8b+-0x3820&&this['_batchGrou'+'pId']>=-0xbda*-0x1+-0x9*-0xbc+0x1*-0x1276&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s'](),this['_batchGrou'+'pId']=_0x1ebf0c);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['material'](_0x212304){if(this['_material']!==_0x212304&&(this['_material']=_0x212304,this['_meshInsta'+'nces']&&this['_type']!=='asset')){for(let _0x16d2bf=0x361*0x6+-0x254a+0x2*0x882;_0x16d2bf<this['_meshInsta'+'nces']['length'];_0x16d2bf++)this['_meshInsta'+'nces'][_0x16d2bf]['material']=_0x212304;}}get['material'](){return this['_material'];}set['materialAs'+'sets'](_0x51ceb2=[]){if(this['_materialR'+'eferences']['length']>_0x51ceb2['length']){for(let _0x6ef8d4=_0x51ceb2['length'];_0x6ef8d4<this['_materialR'+'eferences']['length'];_0x6ef8d4++)this['_materialR'+'eferences'][_0x6ef8d4]['id']=null;this['_materialR'+'eferences']['length']=_0x51ceb2['length'];}for(let _0xa33aee=0x365+-0x3*-0x2d7+-0xbea;_0xa33aee<_0x51ceb2['length'];_0xa33aee++)if(this['_materialR'+'eferences'][_0xa33aee]||this['_materialR'+'eferences']['push'](new Xo(_0xa33aee,this,this['system']['app']['assets'],{'add':this['_onMateria'+'lAdded'],'load':this['_onMateria'+'lLoad'],'remove':this['_onMateria'+'lRemove'],'unload':this['_onMateria'+'lUnload']},this)),_0x51ceb2[_0xa33aee]){const _0x4137eb=_0x51ceb2[_0xa33aee]instanceof me?_0x51ceb2[_0xa33aee]['id']:_0x51ceb2[_0xa33aee];this['_materialR'+'eferences'][_0xa33aee]['id']!==_0x4137eb&&(this['_materialR'+'eferences'][_0xa33aee]['id']=_0x4137eb),this['_materialR'+'eferences'][_0xa33aee]['asset']&&this['_onMateria'+'lAdded'](_0xa33aee,this,this['_materialR'+'eferences'][_0xa33aee]['asset']);}else this['_materialR'+'eferences'][_0xa33aee]['id']=null,this['_meshInsta'+'nces'][_0xa33aee]&&(this['_meshInsta'+'nces'][_0xa33aee]['material']=this['system']['defaultMat'+'erial']);}get['materialAs'+'sets'](){return this['_materialR'+'eferences']['map'](_0x1581f4=>_0x1581f4['id']);}set['asset'](_0xf0d72e){const _0x4e3b91=_0xf0d72e instanceof me?_0xf0d72e['id']:_0xf0d72e;this['_assetRefe'+'rence']['id']!==_0x4e3b91&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onRenderA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x4e3b91,this['_assetRefe'+'rence']['asset']&&this['_onRenderA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['assignAsse'+'t'](_0x59ce62){const _0x4c57ef=_0x59ce62 instanceof me?_0x59ce62['id']:_0x59ce62;this['_assetRefe'+'rence']['id']=_0x4c57ef;}set['rootBone'](_0x5e923b){if(this['_rootBone']!==_0x5e923b){const _0x111670=typeof _0x5e923b=='string';if(this['_rootBone']&&_0x111670&&this['_rootBone']['getGuid']()===_0x5e923b)return;this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x5e923b instanceof He?this['_rootBone']=_0x5e923b:_0x111670?(this['_rootBone']=this['system']['app']['getEntityF'+'romIndex'](_0x5e923b)||null,this['_rootBone']||M['warn']('Failed\x20to\x20'+'find\x20rootB'+'one\x20Entity'+'\x20by\x20GUID')):this['_rootBone']=null,this['_rootBone']&&this['_cloneSkin'+'Instances']();}}get['rootBone'](){return this['_rootBone'];}['destroyMes'+'hInstances'](){const _0xe28685=this['_meshInsta'+'nces'];if(_0xe28685){this['removeFrom'+'Layers'](),this['_clearSkin'+'Instances']();for(let _0x2e38a8=0x23ca+0xb*-0x2cd+-0x4fb;_0x2e38a8<_0xe28685['length'];_0x2e38a8++)_0xe28685[_0x2e38a8]['destroy']();this['_meshInsta'+'nces']['length']=-0x173+0x29c+-0x9*0x21;}}['addToLayer'+'s'](){const _0x16bada=this['system']['app']['scene']['layers'];for(let _0x359fa1=-0x96c*-0x2+-0x1804+0x52c;_0x359fa1<this['_layers']['length'];_0x359fa1++){const _0x53d9ea=_0x16bada['getLayerBy'+'Id'](this['_layers'][_0x359fa1]);_0x53d9ea&&_0x53d9ea['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}['removeFrom'+'Layers'](){if(this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']){const _0x32a8f3=this['system']['app']['scene']['layers'];for(let _0x5d25c0=0x563*-0x4+-0x2*-0x2fb+-0x31e*-0x5;_0x5d25c0<this['_layers']['length'];_0x5d25c0++){const _0x296b13=_0x32a8f3['getLayerBy'+'Id'](this['_layers'][_0x5d25c0]);_0x296b13&&_0x296b13['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_meshInsta'+'nces']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyMes'+'hInstances'](),this['asset']=null,this['materialAs'+'set']=null,this['_assetRefe'+'rence']['id']=null;for(let _0x14885c=0x4e1*-0x6+-0x1*-0xfaf+0xd97;_0x14885c<this['_materialR'+'eferences']['length'];_0x14885c++)this['_materialR'+'eferences'][_0x14885c]['id']=null;this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x15535f,_0x3430dc){this['addToLayer'+'s'](),_0x15535f['off']('add',this['onLayerAdd'+'ed'],this),_0x15535f['off']('remove',this['onLayerRem'+'oved'],this),_0x3430dc['on']('add',this['onLayerAdd'+'ed'],this),_0x3430dc['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x2b3059){this['layers']['indexOf'](_0x2b3059['id'])<0x208c+0xc86*0x3+-0x461e||_0x2b3059['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}['onLayerRem'+'oved'](_0x34bb42){this['layers']['indexOf'](_0x34bb42['id'])<0x79*0x52+0x19dc+0x6*-0xac5||_0x34bb42['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}['onEnable'](){var _0x3f22cf;const _0x51d4bf=this['system']['app'],_0x455732=_0x51d4bf['scene'],_0x5be661=_0x455732['layers'];this['_rootBone']&&this['_cloneSkin'+'Instances'](),this['_evtLayers'+'Changed']=_0x455732['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5be661&&(this['_evtLayerA'+'dded']=_0x5be661['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5be661['on']('remove',this['onLayerRem'+'oved'],this));const _0x376d8c=this['_type']==='asset';this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']?this['addToLayer'+'s']():_0x376d8c&&this['asset']&&this['_onRenderA'+'ssetAdded']();for(let _0x55577a=0x1e1+0x18d0+-0x1*0x1ab1;_0x55577a<this['_materialR'+'eferences']['length'];_0x55577a++)this['_materialR'+'eferences'][_0x55577a]['asset']&&this['system']['app']['assets']['load'](this['_materialR'+'eferences'][_0x55577a]['asset']);this['_batchGrou'+'pId']>=0x1841+-0x2509*0x1+-0xcc8*-0x1&&((_0x3f22cf=_0x51d4bf['batcher'])==null||_0x3f22cf['insert'](mt['RENDER'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x2da381,_0x5a3ddb,_0x5451a0,_0x2c6778;const _0x35e5e5=this['system']['app'],_0x444b2c=_0x35e5e5['scene']['layers'];(_0x2da381=this['_evtLayers'+'Changed'])==null||_0x2da381['off'](),this['_evtLayers'+'Changed']=null,this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x444b2c&&((_0x5a3ddb=this['_evtLayerA'+'dded'])==null||_0x5a3ddb['off'](),this['_evtLayerA'+'dded']=null,(_0x5451a0=this['_evtLayerR'+'emoved'])==null||_0x5451a0['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=-0x903+-0x182d+-0x213*-0x10&&((_0x2c6778=_0x35e5e5['batcher'])==null||_0x2c6778['remove'](mt['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['removeFrom'+'Layers']();}['hide'](){if(this['_meshInsta'+'nces']){for(let _0x3e912a=-0x239b+0x493*0x5+0x5*0x28c;_0x3e912a<this['_meshInsta'+'nces']['length'];_0x3e912a++)this['_meshInsta'+'nces'][_0x3e912a]['visible']=!(0x182*-0x18+-0x48d+-0x413*-0xa);}}['show'](){if(this['_meshInsta'+'nces']){for(let _0x490fad=-0x208b+0x2465*-0x1+0x44f0;_0x490fad<this['_meshInsta'+'nces']['length'];_0x490fad++)this['_meshInsta'+'nces'][_0x490fad]['visible']=!(0x1f*-0x25+0x177+0x304);}}['_onRenderA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onRenderA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onRenderA'+'ssetLoad'](){var _0x41f672;if(this['destroyMes'+'hInstances'](),this['_assetRefe'+'rence']['asset']){const _0x56b887=this['_assetRefe'+'rence']['asset']['resource'];(_0x41f672=this['_evtSetMes'+'hes'])==null||_0x41f672['off'](),this['_evtSetMes'+'hes']=_0x56b887['on']('set:meshes',this['_onSetMesh'+'es'],this),_0x56b887['meshes']&&this['_onSetMesh'+'es'](_0x56b887['meshes']);}}['_onSetMesh'+'es'](_0x51a84e){this['_cloneMesh'+'es'](_0x51a84e);}['_clearSkin'+'Instances'](){for(let _0x1c91e8=0x20*0x1+0x26ce+-0x26ee;_0x1c91e8<this['_meshInsta'+'nces']['length'];_0x1c91e8++){const _0x58acb1=this['_meshInsta'+'nces'][_0x1c91e8];$o['removeCach'+'edSkinInst'+'ance'](_0x58acb1['skinInstan'+'ce']),_0x58acb1['skinInstan'+'ce']=null;}}['_cloneSkin'+'Instances'](){if(this['_meshInsta'+'nces']['length']&&this['_rootBone']instanceof He)for(let _0x211a40=0x9f*0x6+0x221d+-0x25d7;_0x211a40<this['_meshInsta'+'nces']['length'];_0x211a40++){const _0x1ce650=this['_meshInsta'+'nces'][_0x211a40],_0x589070=_0x1ce650['mesh'];_0x589070['skin']&&!_0x1ce650['skinInstan'+'ce']&&(_0x1ce650['skinInstan'+'ce']=$o['createCach'+'edSkinInst'+'ance'](_0x589070['skin'],this['_rootBone'],this['entity']));}}['_cloneMesh'+'es'](_0x3e776f){if(_0x3e776f&&_0x3e776f['length']){const _0x3a8c31=[];for(let _0x398f49=-0x218d+0x41*0x3b+0x1292;_0x398f49<_0x3e776f['length'];_0x398f49++){const _0x489405=_0x3e776f[_0x398f49],_0x3390d7=this['_materialR'+'eferences'][_0x398f49]&&this['_materialR'+'eferences'][_0x398f49]['asset']&&this['_materialR'+'eferences'][_0x398f49]['asset']['resource'],_0x13af92=new We(_0x489405,_0x3390d7||this['system']['defaultMat'+'erial'],this['entity']);_0x3a8c31['push'](_0x13af92),_0x489405['morph']&&(_0x13af92['morphInsta'+'nce']=new oa(_0x489405['morph']));}this['meshInstan'+'ces']=_0x3a8c31,this['_cloneSkin'+'Instances']();}}['_onRenderA'+'ssetUnload'](){this['_type']==='asset'&&this['destroyMes'+'hInstances']();}['_onRenderA'+'ssetRemove'](){var _0x472fb1;(_0x472fb1=this['_evtSetMes'+'hes'])==null||_0x472fb1['off'](),this['_evtSetMes'+'hes']=null,this['_onRenderA'+'ssetUnload']();}['_onMateria'+'lAdded'](_0x124bfe,_0x4b9915,_0x55034b){_0x55034b['resource']?this['_onMateria'+'lLoad'](_0x124bfe,_0x4b9915,_0x55034b):this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](_0x55034b);}['_updateMai'+'nMaterial'](_0x576ac5,_0x5b854d){_0x576ac5===0x1769*0x1+0xa9a+-0x2203&&(this['material']=_0x5b854d);}['_onMateria'+'lLoad'](_0x4e4f1a,_0x2c8ab8,_0x2cd4b3){this['_meshInsta'+'nces'][_0x4e4f1a]&&(this['_meshInsta'+'nces'][_0x4e4f1a]['material']=_0x2cd4b3['resource']),this['_updateMai'+'nMaterial'](_0x4e4f1a,_0x2cd4b3['resource']);}['_onMateria'+'lRemove'](_0x4eb43b,_0x3bab1e,_0xbddb0d){this['_meshInsta'+'nces'][_0x4eb43b]&&(this['_meshInsta'+'nces'][_0x4eb43b]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x4eb43b,this['system']['defaultMat'+'erial']);}['_onMateria'+'lUnload'](_0x2732d0,_0xe9ceae,_0x323b7f){this['_meshInsta'+'nces'][_0x2732d0]&&(this['_meshInsta'+'nces'][_0x2732d0]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x2732d0,this['system']['defaultMat'+'erial']);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0xeff195,_0x5f1653){_0xeff195['rootBone']&&(this['rootBone']=_0x5f1653[_0xeff195['rootBone']['getGuid']()]);}}class K3{constructor(){this['enabled']=!(-0x89f*-0x1+-0x4a0+0x21*-0x1f);}}const iu=['enabled'],Cr=['material','meshInstan'+'ces','asset','materialAs'+'sets','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','renderStyl'+'e','type','layers','isStatic','batchGroup'+'Id','rootBone'];class Z3 extends lt{constructor(_0x1a51aa){super(_0x1a51aa),this['id']='render',this['ComponentT'+'ype']=pv,this['DataType']=K3,this['schema']=iu,this['defaultMat'+'erial']=cl(_0x1a51aa['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x1deb5c,_0x24e7bd,_0x22d77e){(_0x24e7bd['batchGroup'+'Id']===null||_0x24e7bd['batchGroup'+'Id']===void(-0x22e6+-0x3b3*0x5+-0x3565*-0x1))&&(_0x24e7bd['batchGroup'+'Id']=-(-0x5*-0x577+0x2511+0x137*-0x35)),_0x24e7bd['layers']&&_0x24e7bd['layers']['length']&&(_0x24e7bd['layers']=_0x24e7bd['layers']['slice'](-0x1318+-0x2a3+0x15bb));for(let _0x3982b8=0x2471*0x1+-0x25b9+-0x4*-0x52;_0x3982b8<Cr['length'];_0x3982b8++)_0x24e7bd['hasOwnProp'+'erty'](Cr[_0x3982b8])&&(_0x1deb5c[Cr[_0x3982b8]]=_0x24e7bd[Cr[_0x3982b8]]);_0x24e7bd['aabbCenter']&&_0x24e7bd['aabbHalfEx'+'tents']&&(_0x1deb5c['customAabb']=new Ie(new I(_0x24e7bd['aabbCenter']),new I(_0x24e7bd['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x1deb5c,_0x24e7bd,iu);}['cloneCompo'+'nent'](_0x5b5dee,_0x5b547e){const _0x27dabc={};for(let _0x139fb4=0x1*0x210d+0x1*-0x178d+0x80*-0x13;_0x139fb4<Cr['length'];_0x139fb4++)_0x27dabc[Cr[_0x139fb4]]=_0x5b5dee['render'][Cr[_0x139fb4]];_0x27dabc['enabled']=_0x5b5dee['render']['enabled'],delete _0x27dabc['meshInstan'+'ces'];const _0xdb8364=this['addCompone'+'nt'](_0x5b547e,_0x27dabc),_0xa1760=_0x5b5dee['render']['meshInstan'+'ces'],_0x2c1dda=_0xa1760['map'](_0x2d44e0=>_0x2d44e0['mesh']);_0xdb8364['_onSetMesh'+'es'](_0x2c1dda);for(let _0x580bcc=-0x2076+-0x5f2*-0x2+0x1*0x1492;_0x580bcc<_0xa1760['length'];_0x580bcc++)_0xdb8364['meshInstan'+'ces'][_0x580bcc]['material']=_0xa1760[_0x580bcc]['material'];return _0x5b5dee['render']['customAabb']&&(_0xdb8364['customAabb']=_0x5b5dee['render']['customAabb']['clone']()),_0xdb8364;}['onRemove'](_0x3889c3,_0x31e83a){_0x31e83a['onRemove']();}}we['_buildAcce'+'ssors'](pv['prototype'],iu);class jd{constructor(_0xcbd14b,_0x2461aa){h(this,'_construct'+'or'),h(this,'_pool',[]),h(this,'_count',0xe5*-0x9+-0x87b+0x8*0x211),(this['_construct'+'or']=_0xcbd14b,this['_resize'](_0x2461aa));}['_resize'](_0x6fac83){if(_0x6fac83>this['_pool']['length']){for(let _0x16be5b=this['_pool']['length'];_0x16be5b<_0x6fac83;_0x16be5b++)this['_pool'][_0x16be5b]=new this['_construct'+'or']();}}['allocate'](){return this['_count']>=this['_pool']['length']&&this['_resize'](this['_pool']['length']*(-0x1075+-0x207a*-0x1+-0x1003)),this['_pool'][this['_count']++];}['freeAll'](){this['_count']=-0x1b81+-0x4*-0x2f5+0x1*0xfad;}}let ss,Le,Is,ka;const Q3=new le(),J3=new le(),ih=new I();class Qs extends we{constructor(){super(...arguments),h(this,'_angularDa'+'mping',0xb3b*0x1+0x2*0x2+-0xb3f*0x1),h(this,'_angularFa'+'ctor',new I(-0x966+0x3*0x5cd+0x40*-0x20,-0x207e+0x1*0x1d3+0x1eac,0x317+-0x1*-0x15d+-0x11*0x43)),h(this,'_angularVe'+'locity',new I()),h(this,'_body',null),h(this,'_friction',-0x1524+0x1*0x1145+0x1*0x3df+0.5),h(this,'_group',ig),h(this,'_linearDam'+'ping',-0x1*0x148f+-0xd4+0x1563),h(this,'_linearFac'+'tor',new I(0x4b2*0x2+-0xf*-0x15d+-0x13*0x192,0xfce*-0x1+-0x3b*0x5b+-0xd6*-0x2c,0x1*-0x224f+-0x2*-0x344+0x1bc8)),h(this,'_linearVel'+'ocity',new I()),h(this,'_mask',Yf),h(this,'_mass',-0xf2c+0x5af+0x6*0x195),h(this,'_restituti'+'on',0x3*0x6ee+0x2*-0x818+-0x49a),h(this,'_rollingFr'+'iction',0x4ad+-0x767+0x2ba),h(this,'_simulatio'+'nEnabled',!(-0x2043+-0x141f+0x3463*0x1)),h(this,'_type',to);}static['onLibraryL'+'oaded'](){typeof Ammo<'u'&&(ss=new Ammo['btTransfor'+'m'](),Le=new Ammo['btVector3'](),Is=new Ammo['btVector3'](),ka=new Ammo['btQuaterni'+'on']());}static['onAppDestr'+'oy'](){Ammo['destroy'](ss),Ammo['destroy'](Le),Ammo['destroy'](Is),Ammo['destroy'](ka),ss=null,Le=null,Is=null,ka=null;}set['angularDam'+'ping'](_0x39d5c7){this['_angularDa'+'mping']!==_0x39d5c7&&(this['_angularDa'+'mping']=_0x39d5c7,this['_body']&&this['_body']['setDamping'](this['_linearDam'+'ping'],_0x39d5c7));}get['angularDam'+'ping'](){return this['_angularDa'+'mping'];}set['angularFac'+'tor'](_0x228fb0){this['_angularFa'+'ctor']['equals'](_0x228fb0)||(this['_angularFa'+'ctor']['copy'](_0x228fb0),this['_body']&&this['_type']===Ps&&(Le['setValue'](_0x228fb0['x'],_0x228fb0['y'],_0x228fb0['z']),this['_body']['setAngular'+'Factor'](Le)));}get['angularFac'+'tor'](){return this['_angularFa'+'ctor'];}set['angularVel'+'ocity'](_0x52d996){this['_body']&&this['_type']===Ps&&(this['_body']['activate'](),Le['setValue'](_0x52d996['x'],_0x52d996['y'],_0x52d996['z']),this['_body']['setAngular'+'Velocity'](Le),this['_angularVe'+'locity']['copy'](_0x52d996));}get['angularVel'+'ocity'](){if(this['_body']&&this['_type']===Ps){const _0x279685=this['_body']['getAngular'+'Velocity']();this['_angularVe'+'locity']['set'](_0x279685['x'](),_0x279685['y'](),_0x279685['z']());}return this['_angularVe'+'locity'];}set['body'](_0x189598){this['_body']!==_0x189598&&(this['_body']=_0x189598,_0x189598&&this['_simulatio'+'nEnabled']&&_0x189598['activate']());}get['body'](){return this['_body'];}set['friction'](_0x43cd7b){this['_friction']!==_0x43cd7b&&(this['_friction']=_0x43cd7b,this['_body']&&this['_body']['setFrictio'+'n'](_0x43cd7b));}get['friction'](){return this['_friction'];}set['group'](_0x3728c2){this['_group']!==_0x3728c2&&(this['_group']=_0x3728c2,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['group'](){return this['_group'];}set['linearDamp'+'ing'](_0x482fa0){this['_linearDam'+'ping']!==_0x482fa0&&(this['_linearDam'+'ping']=_0x482fa0,this['_body']&&this['_body']['setDamping'](_0x482fa0,this['_angularDa'+'mping']));}get['linearDamp'+'ing'](){return this['_linearDam'+'ping'];}set['linearFact'+'or'](_0x22c745){this['_linearFac'+'tor']['equals'](_0x22c745)||(this['_linearFac'+'tor']['copy'](_0x22c745),this['_body']&&this['_type']===Ps&&(Le['setValue'](_0x22c745['x'],_0x22c745['y'],_0x22c745['z']),this['_body']['setLinearF'+'actor'](Le)));}get['linearFact'+'or'](){return this['_linearFac'+'tor'];}set['linearVelo'+'city'](_0x1cb9d4){this['_body']&&this['_type']===Ps&&(this['_body']['activate'](),Le['setValue'](_0x1cb9d4['x'],_0x1cb9d4['y'],_0x1cb9d4['z']),this['_body']['setLinearV'+'elocity'](Le),this['_linearVel'+'ocity']['copy'](_0x1cb9d4));}get['linearVelo'+'city'](){if(this['_body']&&this['_type']===Ps){const _0x1fe53=this['_body']['getLinearV'+'elocity']();this['_linearVel'+'ocity']['set'](_0x1fe53['x'](),_0x1fe53['y'](),_0x1fe53['z']());}return this['_linearVel'+'ocity'];}set['mask'](_0x439dcd){this['_mask']!==_0x439dcd&&(this['_mask']=_0x439dcd,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['mask'](){return this['_mask'];}set['mass'](_0x2ded80){if(this['_mass']!==_0x2ded80&&(this['_mass']=_0x2ded80,this['_body']&&this['_type']===Ps)){const _0x33508a=this['enabled']&&this['entity']['enabled'];_0x33508a&&this['disableSim'+'ulation'](),this['_body']['getCollisi'+'onShape']()['calculateL'+'ocalInerti'+'a'](_0x2ded80,Le),this['_body']['setMassPro'+'ps'](_0x2ded80,Le),this['_body']['updateIner'+'tiaTensor'](),_0x33508a&&this['enableSimu'+'lation']();}}get['mass'](){return this['_mass'];}set['restitutio'+'n'](_0x51231b){this['_restituti'+'on']!==_0x51231b&&(this['_restituti'+'on']=_0x51231b,this['_body']&&this['_body']['setRestitu'+'tion'](_0x51231b));}get['restitutio'+'n'](){return this['_restituti'+'on'];}set['rollingFri'+'ction'](_0x577ce4){this['_rollingFr'+'iction']!==_0x577ce4&&(this['_rollingFr'+'iction']=_0x577ce4,this['_body']&&this['_body']['setRolling'+'Friction'](_0x577ce4));}get['rollingFri'+'ction'](){return this['_rollingFr'+'iction'];}set['type'](_0x238eeb){if(this['_type']!==_0x238eeb){switch(this['_type']=_0x238eeb,this['disableSim'+'ulation'](),_0x238eeb){case Ps:this['_group']=aL,this['_mask']=ag;break;case Ia:this['_group']=nL,this['_mask']=ag;break;case to:default:this['_group']=ig,this['_mask']=Yf;break;}this['createBody']();}}get['type'](){return this['_type'];}['createBody'](){const _0x9885be=this['entity'];let _0x48d4de;if(_0x9885be['collision']&&(_0x48d4de=_0x9885be['collision']['shape'],_0x9885be['trigger']&&(_0x9885be['trigger']['destroy'](),delete _0x9885be['trigger'])),_0x48d4de){this['_body']&&(this['system']['removeBody'](this['_body']),this['system']['destroyBod'+'y'](this['_body']),this['_body']=null);const _0x3a761a=this['_type']===Ps?this['_mass']:-0x11*-0x1b1+0xb7b+-0x283c;this['_getEntity'+'Transform'](ss);const _0x2d41a6=this['system']['createBody'](_0x3a761a,_0x48d4de,ss);if(_0x2d41a6['setRestitu'+'tion'](this['_restituti'+'on']),_0x2d41a6['setFrictio'+'n'](this['_friction']),_0x2d41a6['setRolling'+'Friction'](this['_rollingFr'+'iction']),_0x2d41a6['setDamping'](this['_linearDam'+'ping'],this['_angularDa'+'mping']),this['_type']===Ps){const _0x16f469=this['_linearFac'+'tor'];Le['setValue'](_0x16f469['x'],_0x16f469['y'],_0x16f469['z']),_0x2d41a6['setLinearF'+'actor'](Le);const _0x47562b=this['_angularFa'+'ctor'];Le['setValue'](_0x47562b['x'],_0x47562b['y'],_0x47562b['z']),_0x2d41a6['setAngular'+'Factor'](Le);}else this['_type']===Ia&&(_0x2d41a6['setCollisi'+'onFlags'](_0x2d41a6['getCollisi'+'onFlags']()|rL),_0x2d41a6['setActivat'+'ionState'](sg));_0x2d41a6['entity']=_0x9885be,this['body']=_0x2d41a6,this['enabled']&&_0x9885be['enabled']&&this['enableSimu'+'lation']();}}['isActive'](){return this['_body']?this['_body']['isActive']():!(0x1897+0x1*0x1e29+-0x36bf);}['activate'](){this['_body']&&this['_body']['activate']();}['enableSimu'+'lation'](){const _0x583e7c=this['entity'];if(_0x583e7c['collision']&&_0x583e7c['collision']['enabled']&&!this['_simulatio'+'nEnabled']){const _0x1dfd50=this['_body'];if(_0x1dfd50){switch(this['system']['addBody'](_0x1dfd50,this['_group'],this['_mask']),this['_type']){case Ps:this['system']['_dynamic']['push'](this),_0x1dfd50['forceActiv'+'ationState'](jf),this['syncEntity'+'ToBody']();break;case Ia:this['system']['_kinematic']['push'](this),_0x1dfd50['forceActiv'+'ationState'](sg);break;case to:_0x1dfd50['forceActiv'+'ationState'](jf),this['syncEntity'+'ToBody']();break;}_0x583e7c['collision']['type']==='compound'&&this['system']['_compounds']['push'](_0x583e7c['collision']),_0x1dfd50['activate'](),this['_simulatio'+'nEnabled']=!(0x3d*-0x7c+-0x35*0x49+0x2ca9);}}}['disableSim'+'ulation'](){const _0x25ea49=this['_body'];if(_0x25ea49&&this['_simulatio'+'nEnabled']){const _0x60af23=this['system'];let _0x4debfe=_0x60af23['_compounds']['indexOf'](this['entity']['collision']);_0x4debfe>-(-0x1*-0x19a3+-0x2f6*0x4+-0x161*0xa)&&_0x60af23['_compounds']['splice'](_0x4debfe,0x1fb2*-0x1+0x1ce2*-0x1+0x3c95*0x1),_0x4debfe=_0x60af23['_dynamic']['indexOf'](this),_0x4debfe>-(0xba+-0x2505+0x244c)&&_0x60af23['_dynamic']['splice'](_0x4debfe,0xc83*-0x1+0x1f6a+0x1*-0x12e6),_0x4debfe=_0x60af23['_kinematic']['indexOf'](this),_0x4debfe>-(-0xa99+0x1e77+-0x13dd)&&_0x60af23['_kinematic']['splice'](_0x4debfe,0xd28+0x6*0xe+-0xd7b),_0x60af23['removeBody'](_0x25ea49),_0x25ea49['forceActiv'+'ationState'](iv),this['_simulatio'+'nEnabled']=!(0x1f30+0x1fd9+-0x2*0x1f84);}}['applyForce'](_0x2ea573,_0x1de537,_0x23c732,_0x1d6fed,_0x382722,_0x127cb7){const _0x16bd05=this['_body'];_0x16bd05&&(_0x16bd05['activate'](),_0x2ea573 instanceof I?Le['setValue'](_0x2ea573['x'],_0x2ea573['y'],_0x2ea573['z']):Le['setValue'](_0x2ea573,_0x1de537,_0x23c732),_0x1de537 instanceof I?Is['setValue'](_0x1de537['x'],_0x1de537['y'],_0x1de537['z']):_0x1d6fed!==void(0x1*-0x1295+-0x2*-0x1166+-0x1037*0x1)?Is['setValue'](_0x1d6fed,_0x382722,_0x127cb7):Is['setValue'](0x30*0xc0+-0x1675*0x1+-0x1*0xd8b,0x132d*-0x2+-0xbf*-0x1d+-0x185*-0xb,-0x1b61*0x1+-0x8b*-0x2a+-0x1*-0x493),_0x16bd05['applyForce'](Le,Is));}['applyTorqu'+'e'](_0x5993c5,_0x570086,_0x44fa4e){const _0x48bfe2=this['_body'];_0x48bfe2&&(_0x48bfe2['activate'](),_0x5993c5 instanceof I?Le['setValue'](_0x5993c5['x'],_0x5993c5['y'],_0x5993c5['z']):Le['setValue'](_0x5993c5,_0x570086,_0x44fa4e),_0x48bfe2['applyTorqu'+'e'](Le));}['applyImpul'+'se'](_0x52168f,_0x445a1a,_0x412b18,_0x172e5c,_0x8f9438,_0x2a0a0a){const _0x24ac69=this['_body'];_0x24ac69&&(_0x24ac69['activate'](),_0x52168f instanceof I?Le['setValue'](_0x52168f['x'],_0x52168f['y'],_0x52168f['z']):Le['setValue'](_0x52168f,_0x445a1a,_0x412b18),_0x445a1a instanceof I?Is['setValue'](_0x445a1a['x'],_0x445a1a['y'],_0x445a1a['z']):_0x172e5c!==void(0x85e+-0x2395+0x1b37*0x1)?Is['setValue'](_0x172e5c,_0x8f9438,_0x2a0a0a):Is['setValue'](-0x1d82+0x12*0x9+0xa8*0x2c,-0x3*0xcc9+0x2*0xe5+0x2491,0x3b*0x79+0x1e11+-0x39f4),_0x24ac69['applyImpul'+'se'](Le,Is));}['applyTorqu'+'eImpulse'](_0x434e4d,_0x16a7c2,_0x3334dd){const _0x30abd4=this['_body'];_0x30abd4&&(_0x30abd4['activate'](),_0x434e4d instanceof I?Le['setValue'](_0x434e4d['x'],_0x434e4d['y'],_0x434e4d['z']):Le['setValue'](_0x434e4d,_0x16a7c2,_0x3334dd),_0x30abd4['applyTorqu'+'eImpulse'](Le));}['isStatic'](){return this['_type']===to;}['isStaticOr'+'Kinematic'](){return this['_type']===to||this['_type']===Ia;}['isKinemati'+'c'](){return this['_type']===Ia;}['_getEntity'+'Transform'](_0x5a1e6d){const _0x2f78fa=this['entity'],_0x3bd216=_0x2f78fa['collision'];if(_0x3bd216){const _0x2cb8d9=_0x3bd216['getShapePo'+'sition'](),_0x3c621d=_0x3bd216['getShapeRo'+'tation']();Le['setValue'](_0x2cb8d9['x'],_0x2cb8d9['y'],_0x2cb8d9['z']),ka['setValue'](_0x3c621d['x'],_0x3c621d['y'],_0x3c621d['z'],_0x3c621d['w']);}else{const _0x339e89=_0x2f78fa['getPositio'+'n'](),_0x236ee9=_0x2f78fa['getRotatio'+'n']();Le['setValue'](_0x339e89['x'],_0x339e89['y'],_0x339e89['z']),ka['setValue'](_0x236ee9['x'],_0x236ee9['y'],_0x236ee9['z'],_0x236ee9['w']);}_0x5a1e6d['setOrigin'](Le),_0x5a1e6d['setRotatio'+'n'](ka);}['syncEntity'+'ToBody'](){const _0x1ae2c7=this['_body'];if(_0x1ae2c7){if(this['_getEntity'+'Transform'](ss),_0x1ae2c7['setWorldTr'+'ansform'](ss),this['_type']===Ia){const _0x357325=_0x1ae2c7['getMotionS'+'tate']();_0x357325&&_0x357325['setWorldTr'+'ansform'](ss);}_0x1ae2c7['activate']();}}['_updateDyn'+'amic'](){const _0x501221=this['_body'];if(_0x501221['isActive']()){const _0x44671e=_0x501221['getMotionS'+'tate']();if(_0x44671e){const _0x2d354d=this['entity'];_0x44671e['getWorldTr'+'ansform'](ss);const _0xd4d2de=ss['getOrigin'](),_0x14959=ss['getRotatio'+'n'](),_0x497888=_0x2d354d['collision'];if(_0x497888&&_0x497888['_hasOffset']){const _0x227cc2=_0x497888['data']['linearOffs'+'et'],_0x19bb15=_0x497888['data']['angularOff'+'set'],_0x196b2e=J3['copy'](_0x19bb15)['invert'](),_0x5ae677=Q3['set'](_0x14959['x'](),_0x14959['y'](),_0x14959['z'](),_0x14959['w']())['mul'](_0x196b2e);_0x5ae677['transformV'+'ector'](_0x227cc2,ih),_0x2d354d['setPositio'+'n'](_0xd4d2de['x']()-ih['x'],_0xd4d2de['y']()-ih['y'],_0xd4d2de['z']()-ih['z']),_0x2d354d['setRotatio'+'n'](_0x5ae677);}else _0x2d354d['setPositio'+'n'](_0xd4d2de['x'](),_0xd4d2de['y'](),_0xd4d2de['z']()),_0x2d354d['setRotatio'+'n'](_0x14959['x'](),_0x14959['y'](),_0x14959['z'](),_0x14959['w']());}}}['_updateKin'+'ematic'](){const _0xd15ff3=this['_body']['getMotionS'+'tate']();_0xd15ff3&&(this['_getEntity'+'Transform'](ss),_0xd15ff3['setWorldTr'+'ansform'](ss));}['teleport'](_0x3894ca,_0x2b432e,_0x3bb36b,_0x506f29,_0x327e44,_0x2a7146){_0x3894ca instanceof I?this['entity']['setPositio'+'n'](_0x3894ca):this['entity']['setPositio'+'n'](_0x3894ca,_0x2b432e,_0x3bb36b),_0x2b432e instanceof le?this['entity']['setRotatio'+'n'](_0x2b432e):_0x2b432e instanceof I?this['entity']['setEulerAn'+'gles'](_0x2b432e):_0x506f29!==void(-0x1c7a+0x107*-0xd+0x29d5)&&this['entity']['setEulerAn'+'gles'](_0x506f29,_0x327e44,_0x2a7146),this['syncEntity'+'ToBody']();}['onEnable'](){this['_body']||this['createBody'](),this['enableSimu'+'lation']();}['onDisable'](){this['disableSim'+'ulation']();}}h(Qs,'EVENT_CONT'+'ACT','contact'),h(Qs,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(Qs,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(Qs,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(Qs,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve'),h(Qs,'order',-(-0xeac+0x1649+-0x79c));class eO{constructor(){this['enabled']=!(0x2368+-0x767+-0x1c01);}}let xi,Ti;class pg{constructor(_0x1e57f1,_0x1ee09b,_0x13faa9,_0x869cbe){h(this,'entity'),h(this,'point'),h(this,'normal'),h(this,'hitFractio'+'n'),(this['entity']=_0x1e57f1,this['point']=_0x1ee09b,this['normal']=_0x13faa9,this['hitFractio'+'n']=_0x869cbe);}}class tO{constructor(_0x1b5bf0,_0x5119a0,_0xaef006){h(this,'a'),h(this,'b'),h(this,'impulse'),h(this,'localPoint'+'A'),h(this,'localPoint'+'B'),h(this,'pointA'),h(this,'pointB'),h(this,'normal'),arguments['length']!==-0x2241+-0x567+0x27a8?(this['a']=_0x1b5bf0,this['b']=_0x5119a0,this['impulse']=_0xaef006['impulse'],this['localPoint'+'A']=_0xaef006['localPoint'],this['localPoint'+'B']=_0xaef006['localPoint'+'Other'],this['pointA']=_0xaef006['point'],this['pointB']=_0xaef006['pointOther'],this['normal']=_0xaef006['normal']):(this['a']=null,this['b']=null,this['impulse']=-0x875*-0x2+0x1bde+0xb32*-0x4,this['localPoint'+'A']=new I(),this['localPoint'+'B']=new I(),this['pointA']=new I(),this['pointB']=new I(),this['normal']=new I());}}class sO{constructor(_0x5b427b=new I(),_0x4bc6fd=new I(),_0xd3a219=new I(),_0x4ee351=new I(),_0x1530bc=new I(),_0xe6af6f=-0x98c+0x460+0x14b*0x4){h(this,'localPoint'),h(this,'localPoint'+'Other'),h(this,'point'),h(this,'pointOther'),h(this,'normal'),h(this,'impulse'),(this['localPoint']=_0x5b427b,this['localPoint'+'Other']=_0x4bc6fd,this['point']=_0xd3a219,this['pointOther']=_0x4ee351,this['normal']=_0x1530bc,this['impulse']=_0xe6af6f);}}class iO{constructor(_0x422b2d,_0x3805b8){h(this,'other'),h(this,'contacts'),(this['other']=_0x422b2d,this['contacts']=_0x3805b8);}}const _v=['enabled'];class gv extends lt{constructor(_0x3d2320){super(_0x3d2320),h(this,'maxSubStep'+'s',-0x4*0x4c+-0x8f0+-0x515*-0x2),h(this,'fixedTimeS'+'tep',(0x101*0x1+-0x3*-0x413+-0xd39)/(0x24*0x80+0x943+-0x1b07)),h(this,'gravity',new I(-0x1e30+0x20*0x61+0x1210,-(0x88a*0x1+-0x6ca+0x1*-0x1b7+0.8100000000000005),-0xbfb+0x1ffd+0x1a*-0xc5)),h(this,'_gravityFl'+'oat32',new Float32Array(-0x3d8+-0x1d77+0x2152)),h(this,'_dynamic',[]),h(this,'_kinematic',[]),h(this,'_triggers',[]),h(this,'_compounds',[]),(this['id']='rigidbody',this['_stats']=_0x3d2320['stats']['frame'],this['ComponentT'+'ype']=Qs,this['DataType']=eO,this['contactPoi'+'ntPool']=null,this['contactRes'+'ultPool']=null,this['singleCont'+'actResultP'+'ool']=null,this['schema']=_v,this['collisions']={},this['frameColli'+'sions']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this));}['onLibraryL'+'oaded'](){if(typeof Ammo<'u'){if(this['collisionC'+'onfigurati'+'on']=new Ammo['btDefaultC'+'ollisionCo'+'nfiguratio'+'n'](),this['dispatcher']=new Ammo['btCollisio'+'nDispatche'+'r'](this['collisionC'+'onfigurati'+'on']),this['overlappin'+'gPairCache']=new Ammo['btDbvtBroa'+'dphase'](),this['solver']=new Ammo['btSequenti'+'alImpulseC'+'onstraintS'+'olver'](),this['dynamicsWo'+'rld']=new Ammo['btDiscrete'+'DynamicsWo'+'rld'](this['dispatcher'],this['overlappin'+'gPairCache'],this['solver'],this['collisionC'+'onfigurati'+'on']),this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']){const _0x156567=Ammo['addFunctio'+'n'](this['_checkForC'+'ollisions']['bind'](this),'vif');this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack'](_0x156567);}else M['warn']('WARNING:\x20T'+'his\x20versio'+'n\x20of\x20ammo.'+'js\x20can\x20pot'+'entially\x20f'+'ail\x20to\x20rep'+'ort\x20contac'+'ts.\x20Please'+'\x20update\x20it'+'\x20to\x20the\x20la'+'test\x20versi'+'on.');xi=new Ammo['btVector3'](),Ti=new Ammo['btVector3'](),Qs['onLibraryL'+'oaded'](),this['contactPoi'+'ntPool']=new jd(sO,-0x878+-0x399*-0x1+0x4e0),this['contactRes'+'ultPool']=new jd(iO,-0x56e*0x5+-0x1*-0xefe+0xc29*0x1),this['singleCont'+'actResultP'+'ool']=new jd(tO,-0x1e81+0xc*-0x115+0x2b7e),this['app']['systems']['on']('update',this['onUpdate'],this);}else this['app']['systems']['off']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x22a6ce,_0x587ba4,_0x230018){const _0xbad713=['mass','linearDamp'+'ing','angularDam'+'ping','linearFact'+'or','angularFac'+'tor','friction','rollingFri'+'ction','restitutio'+'n','type','group','mask'];for(const _0x529387 of _0xbad713)if(_0x587ba4['hasOwnProp'+'erty'](_0x529387)){const _0x48e7b9=_0x587ba4[_0x529387];Array['isArray'](_0x48e7b9)?_0x22a6ce[_0x529387]=new I(_0x48e7b9[0x9e7+-0x12fd*-0x1+-0x1ce4],_0x48e7b9[0x65b*0x2+0x1216+-0x1ecb*0x1],_0x48e7b9[0x1*0x210e+-0x1c39+0x5*-0xf7]):_0x22a6ce[_0x529387]=_0x48e7b9;}super['initialize'+'ComponentD'+'ata'](_0x22a6ce,_0x587ba4,['enabled']);}['cloneCompo'+'nent'](_0xa1e077,_0x118c99){const _0x22a5b6=_0xa1e077['rigidbody'],_0x424431={'enabled':_0x22a5b6['enabled'],'mass':_0x22a5b6['mass'],'linearDamping':_0x22a5b6['linearDamp'+'ing'],'angularDamping':_0x22a5b6['angularDam'+'ping'],'linearFactor':[_0x22a5b6['linearFact'+'or']['x'],_0x22a5b6['linearFact'+'or']['y'],_0x22a5b6['linearFact'+'or']['z']],'angularFactor':[_0x22a5b6['angularFac'+'tor']['x'],_0x22a5b6['angularFac'+'tor']['y'],_0x22a5b6['angularFac'+'tor']['z']],'friction':_0x22a5b6['friction'],'rollingFriction':_0x22a5b6['rollingFri'+'ction'],'restitution':_0x22a5b6['restitutio'+'n'],'type':_0x22a5b6['type'],'group':_0x22a5b6['group'],'mask':_0x22a5b6['mask']};return this['addCompone'+'nt'](_0x118c99,_0x424431);}['onBeforeRe'+'move'](_0x3a8797,_0xe99736){_0xe99736['enabled']&&(_0xe99736['enabled']=!(-0xa*0x277+-0x1594+0x3*0xf69)),_0xe99736['body']&&(this['destroyBod'+'y'](_0xe99736['body']),_0xe99736['body']=null);}['addBody'](_0x1ceba3,_0x289edb,_0x2f628f){_0x289edb!==void(0x1ea6*0x1+0x9*0x35b+-0x3cd9)&&_0x2f628f!==void(-0xb71*-0x2+0x18b9*0x1+-0x2f9b)?this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x1ceba3,_0x289edb,_0x2f628f):this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x1ceba3);}['removeBody'](_0x38cbc6){this['dynamicsWo'+'rld']['removeRigi'+'dBody'](_0x38cbc6);}['createBody'](_0x538b03,_0x5b6133,_0x4f6ce7){const _0x51c740=new Ammo['btVector3'](-0x1449+0x157a+0x3d*-0x5,-0x115*-0x17+-0x94d+0x69*-0x26,-0xf7*0x15+-0xcb*-0xd+0x9f4);_0x538b03!==0x23fa+-0xbcb*0x2+-0x2*0x632&&_0x5b6133['calculateL'+'ocalInerti'+'a'](_0x538b03,_0x51c740);const _0x3f321c=new Ammo['btDefaultM'+'otionState'](_0x4f6ce7),_0x2f646e=new Ammo['btRigidBod'+'yConstruct'+'ionInfo'](_0x538b03,_0x3f321c,_0x5b6133,_0x51c740),_0x24e250=new Ammo['btRigidBod'+'y'](_0x2f646e);return Ammo['destroy'](_0x2f646e),Ammo['destroy'](_0x51c740),_0x24e250;}['destroyBod'+'y'](_0x488ffd){const _0x3b6d19=_0x488ffd['getMotionS'+'tate']();_0x3b6d19&&Ammo['destroy'](_0x3b6d19),Ammo['destroy'](_0x488ffd);}['raycastFir'+'st'](_0x217e06,_0x428b68,_0x181ed9={}){if(_0x181ed9['filterTags']||_0x181ed9['filterCall'+'back'])return _0x181ed9['sort']=!(0x7d5+0x3df+0x5da*-0x2),this['raycastAll'](_0x217e06,_0x428b68,_0x181ed9)[0x4*-0x76d+0xf7c+0xe38]||null;let _0x238b84=null;xi['setValue'](_0x217e06['x'],_0x217e06['y'],_0x217e06['z']),Ti['setValue'](_0x428b68['x'],_0x428b68['y'],_0x428b68['z']);const _0x422454=new Ammo['ClosestRay'+'ResultCall'+'back'](xi,Ti);if(typeof _0x181ed9['filterColl'+'isionGroup']=='number'&&_0x422454['set_m_coll'+'isionFilte'+'rGroup'](_0x181ed9['filterColl'+'isionGroup']),typeof _0x181ed9['filterColl'+'isionMask']=='number'&&_0x422454['set_m_coll'+'isionFilte'+'rMask'](_0x181ed9['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](xi,Ti,_0x422454),_0x422454['hasHit']()){const _0x43b451=_0x422454['get_m_coll'+'isionObjec'+'t'](),_0xa48a20=Ammo['castObject'](_0x43b451,Ammo['btRigidBod'+'y']);if(_0xa48a20){const _0x3b6fc6=_0x422454['get_m_hitP'+'ointWorld'](),_0x41d5f7=_0x422454['get_m_hitN'+'ormalWorld']();_0x238b84=new pg(_0xa48a20['entity'],new I(_0x3b6fc6['x'](),_0x3b6fc6['y'](),_0x3b6fc6['z']()),new I(_0x41d5f7['x'](),_0x41d5f7['y'](),_0x41d5f7['z']()),_0x422454['get_m_clos'+'estHitFrac'+'tion']());}}return Ammo['destroy'](_0x422454),_0x238b84;}['raycastAll'](_0x13b4a9,_0x43c8b7,_0x484d43={}){M['assert'](Ammo['AllHitsRay'+'ResultCall'+'back'],'pc.RigidBo'+'dyComponen'+'tSystem#ra'+'ycastAll:\x20'+'Your\x20versi'+'on\x20of\x20ammo'+'.js\x20does\x20n'+'ot\x20expose\x20'+'Ammo.AllHi'+'tsRayResul'+'tCallback.'+'\x20Update\x20it'+'\x20to\x20latest'+'.');const _0xc5e06e=[];xi['setValue'](_0x13b4a9['x'],_0x13b4a9['y'],_0x13b4a9['z']),Ti['setValue'](_0x43c8b7['x'],_0x43c8b7['y'],_0x43c8b7['z']);const _0x24385f=new Ammo['AllHitsRay'+'ResultCall'+'back'](xi,Ti);if(typeof _0x484d43['filterColl'+'isionGroup']=='number'&&_0x24385f['set_m_coll'+'isionFilte'+'rGroup'](_0x484d43['filterColl'+'isionGroup']),typeof _0x484d43['filterColl'+'isionMask']=='number'&&_0x24385f['set_m_coll'+'isionFilte'+'rMask'](_0x484d43['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](xi,Ti,_0x24385f),_0x24385f['hasHit']()){const _0x180cb7=_0x24385f['get_m_coll'+'isionObjec'+'ts'](),_0x1c4c65=_0x24385f['get_m_hitP'+'ointWorld'](),_0x112ac3=_0x24385f['get_m_hitN'+'ormalWorld'](),_0x919960=_0x24385f['get_m_hitF'+'ractions'](),_0x366d4f=_0x180cb7['size']();for(let _0x67b246=0x1*0x1edf+-0x189b+-0x2*0x322;_0x67b246<_0x366d4f;_0x67b246++){const _0x12f302=Ammo['castObject'](_0x180cb7['at'](_0x67b246),Ammo['btRigidBod'+'y']);if(_0x12f302&&_0x12f302['entity']){if(_0x484d43['filterTags']&&!_0x12f302['entity']['tags']['has'](..._0x484d43['filterTags'])||_0x484d43['filterCall'+'back']&&!_0x484d43['filterCall'+'back'](_0x12f302['entity']))continue;const _0x31482c=_0x1c4c65['at'](_0x67b246),_0x5d2bc4=_0x112ac3['at'](_0x67b246),_0x1fd2d5=new pg(_0x12f302['entity'],new I(_0x31482c['x'](),_0x31482c['y'](),_0x31482c['z']()),new I(_0x5d2bc4['x'](),_0x5d2bc4['y'](),_0x5d2bc4['z']()),_0x919960['at'](_0x67b246));_0xc5e06e['push'](_0x1fd2d5);}}_0x484d43['sort']&&_0xc5e06e['sort']((_0x3e19c4,_0x4e5614)=>_0x3e19c4['hitFractio'+'n']-_0x4e5614['hitFractio'+'n']);}return Ammo['destroy'](_0x24385f),_0xc5e06e;}['_storeColl'+'ision'](_0x5d7a00,_0x51743f){let _0x11353e=!(-0x2324+-0x2194+0xf1*0x49);const _0x4347b2=_0x5d7a00['getGuid']();return this['collisions'][_0x4347b2]=this['collisions'][_0x4347b2]||{'others':[],'entity':_0x5d7a00},this['collisions'][_0x4347b2]['others']['indexOf'](_0x51743f)<-0x50*-0x4f+-0x1e95+-0x1f7*-0x3&&(this['collisions'][_0x4347b2]['others']['push'](_0x51743f),_0x11353e=!(0x83+0x1aaf+0x76*-0x3b)),this['frameColli'+'sions'][_0x4347b2]=this['frameColli'+'sions'][_0x4347b2]||{'others':[],'entity':_0x5d7a00},this['frameColli'+'sions'][_0x4347b2]['others']['push'](_0x51743f),_0x11353e;}['_createCon'+'tactPointF'+'romAmmo'](_0x36a530){const _0x95a4cb=_0x36a530['get_m_loca'+'lPointA'](),_0x4072e5=_0x36a530['get_m_loca'+'lPointB'](),_0x36d6ca=_0x36a530['getPositio'+'nWorldOnA'](),_0x53f50e=_0x36a530['getPositio'+'nWorldOnB'](),_0x30a5f9=_0x36a530['get_m_norm'+'alWorldOnB'](),_0x4e9827=this['contactPoi'+'ntPool']['allocate']();return _0x4e9827['localPoint']['set'](_0x95a4cb['x'](),_0x95a4cb['y'](),_0x95a4cb['z']()),_0x4e9827['localPoint'+'Other']['set'](_0x4072e5['x'](),_0x4072e5['y'](),_0x4072e5['z']()),_0x4e9827['point']['set'](_0x36d6ca['x'](),_0x36d6ca['y'](),_0x36d6ca['z']()),_0x4e9827['pointOther']['set'](_0x53f50e['x'](),_0x53f50e['y'](),_0x53f50e['z']()),_0x4e9827['normal']['set'](_0x30a5f9['x'](),_0x30a5f9['y'](),_0x30a5f9['z']()),_0x4e9827['impulse']=_0x36a530['getApplied'+'Impulse'](),_0x4e9827;}['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x138263){const _0x30f0fc=_0x138263['get_m_loca'+'lPointA'](),_0x59f423=_0x138263['get_m_loca'+'lPointB'](),_0x493bbc=_0x138263['getPositio'+'nWorldOnA'](),_0x535f03=_0x138263['getPositio'+'nWorldOnB'](),_0x101104=_0x138263['get_m_norm'+'alWorldOnB'](),_0x5e0ebe=this['contactPoi'+'ntPool']['allocate']();return _0x5e0ebe['localPoint'+'Other']['set'](_0x30f0fc['x'](),_0x30f0fc['y'](),_0x30f0fc['z']()),_0x5e0ebe['localPoint']['set'](_0x59f423['x'](),_0x59f423['y'](),_0x59f423['z']()),_0x5e0ebe['pointOther']['set'](_0x493bbc['x'](),_0x493bbc['y'](),_0x493bbc['z']()),_0x5e0ebe['point']['set'](_0x535f03['x'](),_0x535f03['y'](),_0x535f03['z']()),_0x5e0ebe['normal']['set'](_0x101104['x'](),_0x101104['y'](),_0x101104['z']()),_0x5e0ebe['impulse']=_0x138263['getApplied'+'Impulse'](),_0x5e0ebe;}['_createSin'+'gleContact'+'Result'](_0x4eda05,_0x5f17e1,_0x564ee9){const _0xd581c5=this['singleCont'+'actResultP'+'ool']['allocate']();return _0xd581c5['a']=_0x4eda05,_0xd581c5['b']=_0x5f17e1,_0xd581c5['localPoint'+'A']=_0x564ee9['localPoint'],_0xd581c5['localPoint'+'B']=_0x564ee9['localPoint'+'Other'],_0xd581c5['pointA']=_0x564ee9['point'],_0xd581c5['pointB']=_0x564ee9['pointOther'],_0xd581c5['normal']=_0x564ee9['normal'],_0xd581c5['impulse']=_0x564ee9['impulse'],_0xd581c5;}['_createCon'+'tactResult'](_0x420267,_0x560903){const _0x2b17c4=this['contactRes'+'ultPool']['allocate']();return _0x2b17c4['other']=_0x420267,_0x2b17c4['contacts']=_0x560903,_0x2b17c4;}['_cleanOldC'+'ollisions'](){for(const _0x4566a8 in this['collisions'])if(this['collisions']['hasOwnProp'+'erty'](_0x4566a8)){const _0xa34c9f=this['frameColli'+'sions'][_0x4566a8],_0x468e06=this['collisions'][_0x4566a8],_0x24a9fc=_0x468e06['entity'],_0x147f55=_0x24a9fc['collision'],_0x502ce3=_0x24a9fc['rigidbody'],_0x168110=_0x468e06['others'];let _0x317c30=_0x168110['length'];for(;_0x317c30--;){const _0x12f2d0=_0x168110[_0x317c30];(!_0xa34c9f||_0xa34c9f['others']['indexOf'](_0x12f2d0)<-0x1a5*0x1+0x22eb+-0x2146*0x1)&&(_0x168110['splice'](_0x317c30,0x10d0+-0x1*0x737+-0x998),_0x24a9fc['trigger']?(_0x147f55&&_0x147f55['fire']('triggerlea'+'ve',_0x12f2d0),_0x12f2d0['rigidbody']&&_0x12f2d0['rigidbody']['fire']('triggerlea'+'ve',_0x24a9fc)):_0x12f2d0['trigger']||(_0x502ce3&&_0x502ce3['fire']('collisione'+'nd',_0x12f2d0),_0x147f55&&_0x147f55['fire']('collisione'+'nd',_0x12f2d0)));}_0x168110['length']===0x261c+0x12*-0x1e2+0xb4*-0x6&&delete this['collisions'][_0x4566a8];}}['_hasContac'+'tEvent'](_0xad2379){const _0xd9d752=_0xad2379['collision'];if(_0xd9d752&&(_0xd9d752['hasEvent']('collisions'+'tart')||_0xd9d752['hasEvent']('collisione'+'nd')||_0xd9d752['hasEvent']('contact')))return!(0x346+0xf59*-0x1+-0x119*-0xb);const _0xddfb3d=_0xad2379['rigidbody'];return _0xddfb3d&&(_0xddfb3d['hasEvent']('collisions'+'tart')||_0xddfb3d['hasEvent']('collisione'+'nd')||_0xddfb3d['hasEvent']('contact'));}['_checkForC'+'ollisions'](_0x1b9d4b,_0x230c97){const _0x45dc75=Ammo['wrapPointe'+'r'](_0x1b9d4b,Ammo['btDynamics'+'World'])['getDispatc'+'her'](),_0x476df7=_0x45dc75['getNumMani'+'folds']();this['frameColli'+'sions']={};for(let _0x4fa46c=0xf84+0x169a+0xe*-0x2b9;_0x4fa46c<_0x476df7;_0x4fa46c++){const _0x45bbcc=_0x45dc75['getManifol'+'dByIndexIn'+'ternal'](_0x4fa46c),_0x1b07c9=_0x45bbcc['getBody0'](),_0x26cdde=_0x45bbcc['getBody1'](),_0x1942bc=Ammo['castObject'](_0x1b07c9,Ammo['btRigidBod'+'y']),_0x33c709=Ammo['castObject'](_0x26cdde,Ammo['btRigidBod'+'y']),_0x220bb3=_0x1942bc['entity'],_0x2fde38=_0x33c709['entity'];if(!_0x220bb3||!_0x2fde38)continue;const _0x5eee25=_0x1942bc['getCollisi'+'onFlags'](),_0x6753ab=_0x33c709['getCollisi'+'onFlags'](),_0x201d54=_0x45bbcc['getNumCont'+'acts'](),_0x3b5777=[],_0x4fac6d=[];let _0x1a99e9;if(_0x201d54>0x32*0x5+-0x23a8+0x182*0x17){if(_0x5eee25&oo||_0x6753ab&oo){const _0x2b1065=_0x220bb3['collision']&&(_0x220bb3['collision']['hasEvent']('triggerent'+'er')||_0x220bb3['collision']['hasEvent']('triggerlea'+'ve')),_0x2fb8ac=_0x2fde38['collision']&&(_0x2fde38['collision']['hasEvent']('triggerent'+'er')||_0x2fde38['collision']['hasEvent']('triggerlea'+'ve')),_0x20fc44=_0x220bb3['rigidbody']&&(_0x220bb3['rigidbody']['hasEvent']('triggerent'+'er')||_0x220bb3['rigidbody']['hasEvent']('triggerlea'+'ve')),_0x4f560f=_0x2fde38['rigidbody']&&(_0x2fde38['rigidbody']['hasEvent']('triggerent'+'er')||_0x2fde38['rigidbody']['hasEvent']('triggerlea'+'ve'));_0x2b1065&&(_0x1a99e9=this['_storeColl'+'ision'](_0x220bb3,_0x2fde38),_0x1a99e9&&!(_0x6753ab&oo)&&_0x220bb3['collision']['fire']('triggerent'+'er',_0x2fde38)),_0x2fb8ac&&(_0x1a99e9=this['_storeColl'+'ision'](_0x2fde38,_0x220bb3),_0x1a99e9&&!(_0x5eee25&oo)&&_0x2fde38['collision']['fire']('triggerent'+'er',_0x220bb3)),_0x20fc44&&(_0x1a99e9||(_0x1a99e9=this['_storeColl'+'ision'](_0x2fde38,_0x220bb3)),_0x1a99e9&&_0x220bb3['rigidbody']['fire']('triggerent'+'er',_0x2fde38)),_0x4f560f&&(_0x1a99e9||(_0x1a99e9=this['_storeColl'+'ision'](_0x220bb3,_0x2fde38)),_0x1a99e9&&_0x2fde38['rigidbody']['fire']('triggerent'+'er',_0x220bb3));}else{const _0x1b36f0=this['_hasContac'+'tEvent'](_0x220bb3),_0x3ae1f0=this['_hasContac'+'tEvent'](_0x2fde38),_0xc30b08=this['hasEvent']('contact');if(_0xc30b08||_0x1b36f0||_0x3ae1f0){for(let _0x4f2d49=-0x3*-0xae2+0x5e4+-0x1*0x268a;_0x4f2d49<_0x201d54;_0x4f2d49++){const _0x392bcf=_0x45bbcc['getContact'+'Point'](_0x4f2d49),_0xb01de7=this['_createCon'+'tactPointF'+'romAmmo'](_0x392bcf);if(_0x1b36f0||_0x3ae1f0){_0x3b5777['push'](_0xb01de7);const _0x830f33=this['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x392bcf);_0x4fac6d['push'](_0x830f33);}if(_0xc30b08){const _0x41ce59=this['_createSin'+'gleContact'+'Result'](_0x220bb3,_0x2fde38,_0xb01de7);this['fire']('contact',_0x41ce59);}}if(_0x1b36f0){const _0x19215b=this['_createCon'+'tactResult'](_0x2fde38,_0x3b5777);_0x1a99e9=this['_storeColl'+'ision'](_0x220bb3,_0x2fde38),_0x220bb3['collision']&&(_0x220bb3['collision']['fire']('contact',_0x19215b),_0x1a99e9&&_0x220bb3['collision']['fire']('collisions'+'tart',_0x19215b)),_0x220bb3['rigidbody']&&(_0x220bb3['rigidbody']['fire']('contact',_0x19215b),_0x1a99e9&&_0x220bb3['rigidbody']['fire']('collisions'+'tart',_0x19215b));}if(_0x3ae1f0){const _0x3a77a6=this['_createCon'+'tactResult'](_0x220bb3,_0x4fac6d);_0x1a99e9=this['_storeColl'+'ision'](_0x2fde38,_0x220bb3),_0x2fde38['collision']&&(_0x2fde38['collision']['fire']('contact',_0x3a77a6),_0x1a99e9&&_0x2fde38['collision']['fire']('collisions'+'tart',_0x3a77a6)),_0x2fde38['rigidbody']&&(_0x2fde38['rigidbody']['fire']('contact',_0x3a77a6),_0x1a99e9&&_0x2fde38['rigidbody']['fire']('collisions'+'tart',_0x3a77a6));}}}}}this['_cleanOldC'+'ollisions'](),this['contactPoi'+'ntPool']['freeAll'](),this['contactRes'+'ultPool']['freeAll'](),this['singleCont'+'actResultP'+'ool']['freeAll']();}['onUpdate'](_0x29a2a4){let _0x2e0a44,_0x277897;this['_stats']['physicsSta'+'rt']=de(),this['_gravityFl'+'oat32'][0x1787*-0x1+-0x1a4c+0x31d3]=this['gravity']['x'],this['_gravityFl'+'oat32'][0x15ef+-0x54d+-0x10a1]=this['gravity']['y'],this['_gravityFl'+'oat32'][0x1fd0+-0x1de*0xf+0x9*-0x6c]=this['gravity']['z'];const _0x1e2124=this['dynamicsWo'+'rld']['getGravity']();(_0x1e2124['x']()!==this['_gravityFl'+'oat32'][-0xb1*0x29+-0x3*-0x776+0x5f7*0x1]||_0x1e2124['y']()!==this['_gravityFl'+'oat32'][0x1*0x24a1+-0x23f7+-0xa9]||_0x1e2124['z']()!==this['_gravityFl'+'oat32'][-0x7*-0x1e9+-0x2*0x10b1+0x1405])&&(_0x1e2124['setValue'](this['gravity']['x'],this['gravity']['y'],this['gravity']['z']),this['dynamicsWo'+'rld']['setGravity'](_0x1e2124));const _0x2950ce=this['_triggers'];for(_0x2e0a44=0x290+0x189a+-0x7a*0x39,_0x277897=_0x2950ce['length'];_0x2e0a44<_0x277897;_0x2e0a44++)_0x2950ce[_0x2e0a44]['updateTran'+'sform']();const _0x199743=this['_compounds'];for(_0x2e0a44=-0x775*0x1+-0x24a7+0x2c1c,_0x277897=_0x199743['length'];_0x2e0a44<_0x277897;_0x2e0a44++)_0x199743[_0x2e0a44]['_updateCom'+'pound']();const _0x46a2be=this['_kinematic'];for(_0x2e0a44=-0x1d3f+-0x1*-0x2637+-0x8*0x11f,_0x277897=_0x46a2be['length'];_0x2e0a44<_0x277897;_0x2e0a44++)_0x46a2be[_0x2e0a44]['_updateKin'+'ematic']();this['dynamicsWo'+'rld']['stepSimula'+'tion'](_0x29a2a4,this['maxSubStep'+'s'],this['fixedTimeS'+'tep']);const _0xa466c5=this['_dynamic'];for(_0x2e0a44=-0x183e+-0x1*0x18d7+0x9d1*0x5,_0x277897=_0xa466c5['length'];_0x2e0a44<_0x277897;_0x2e0a44++)_0xa466c5[_0x2e0a44]['_updateDyn'+'amic']();this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']||this['_checkForC'+'ollisions'](Ammo['getPointer'](this['dynamicsWo'+'rld']),_0x29a2a4),this['_stats']['physicsTim'+'e']=de()-this['_stats']['physicsSta'+'rt'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),typeof Ammo<'u'&&(Ammo['destroy'](this['dynamicsWo'+'rld']),Ammo['destroy'](this['solver']),Ammo['destroy'](this['overlappin'+'gPairCache']),Ammo['destroy'](this['dispatcher']),Ammo['destroy'](this['collisionC'+'onfigurati'+'on']),Ammo['destroy'](xi),Ammo['destroy'](Ti),this['dynamicsWo'+'rld']=null,this['solver']=null,this['overlappin'+'gPairCache']=null,this['dispatcher']=null,this['collisionC'+'onfigurati'+'on']=null,xi=null,Ti=null,Qs['onAppDestr'+'oy']());}}h(gv,'EVENT_CONT'+'ACT','contact'),we['_buildAcce'+'ssors'](Qs['prototype'],_v);const Ua='none',rO='blend',_g=new te();class Sv extends we{constructor(_0x33538b,_0x443bba){super(_0x33538b,_0x443bba),this['_resolutio'+'n']=new J(-0x2699+0x502*0x3+0xf*0x1bd,-0x2*-0xfa6+-0xc51+-0x11bb),this['_reference'+'Resolution']=new J(0x1e35+0x292*0xe+0xf*-0x43f,-0x1f*0x61+-0xcee+-0x19ed*-0x1),this['_scaleMode']=Ua,this['scale']=0x4f*-0x29+-0x1589+0x2231,this['_scaleBlen'+'d']=0xb*-0x31a+0xf89*-0x1+0x31a7+0.5,this['_priority']=-0xaa9+0x1508+-0xa5f,this['_screenSpa'+'ce']=!(0x123b*0x1+-0x1*-0x971+-0x1*0x1bab),this['cull']=this['_screenSpa'+'ce'],this['_screenMat'+'rix']=new te(),this['_elements']=new Set(),_0x33538b['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this);}['syncDrawOr'+'der'](){this['system']['queueDrawO'+'rderSync'](this['entity']['getGuid'](),this['_processDr'+'awOrderSyn'+'c'],this);}['_recurseDr'+'awOrderSyn'+'c'](_0x5b0a9f,_0x11ecf1){var _0x1a579c;if(!(_0x5b0a9f instanceof ot))return _0x11ecf1;if(_0x5b0a9f['element']){const _0x58ee88=_0x5b0a9f['element']['drawOrder'];_0x5b0a9f['element']['drawOrder']=_0x11ecf1++,_0x5b0a9f['element']['_batchGrou'+'pId']>=0x9f+-0xb9d*-0x3+-0x59*0x66&&_0x58ee88!==_0x5b0a9f['element']['drawOrder']&&((_0x1a579c=this['system']['app']['batcher'])==null||_0x1a579c['markGroupD'+'irty'](_0x5b0a9f['element']['_batchGrou'+'pId']));}_0x5b0a9f['particlesy'+'stem']&&(_0x5b0a9f['particlesy'+'stem']['drawOrder']=_0x11ecf1++);const _0x47ba0c=_0x5b0a9f['children'];for(let _0x21c37f=-0xd5*-0x15+-0xff4*0x1+-0x185;_0x21c37f<_0x47ba0c['length'];_0x21c37f++)_0x11ecf1=this['_recurseDr'+'awOrderSyn'+'c'](_0x47ba0c[_0x21c37f],_0x11ecf1);return _0x11ecf1;}['_processDr'+'awOrderSyn'+'c'](){this['_recurseDr'+'awOrderSyn'+'c'](this['entity'],0xd85*-0x1+0xd83*0x1+0x3),this['fire']('syncdrawor'+'der');}['_calcProje'+'ctionMatri'+'x'](){const _0x2daed8=this['_resolutio'+'n']['x']/this['scale'],_0x5c6207=this['_resolutio'+'n']['y']/this['scale'],_0x24296e=0xbb*0x17+-0x1aa7+0x9da,_0x463770=_0x2daed8,_0x5f4fe1=-_0x5c6207;this['_screenMat'+'rix']['setOrtho'](_0x24296e,_0x463770,_0x5f4fe1,0xbd+0x14f7+0x2*-0xada,-0x3*-0xbfa+-0x18fc+0xaf1*-0x1,-(-0x1d54+0x2441*-0x1+-0xe6*-0x49)),this['_screenSpa'+'ce']||(_g['setScale']((-0x53a*0x1+0x5aa+-0x70+0.5)*_0x2daed8,(0xdf*-0xe+-0x1fd*0x3+0x1229*0x1+0.5)*_0x5c6207,-0x2468+-0x2*-0x2e4+0x1*0x1ea1),this['_screenMat'+'rix']['mul2'](_g,this['_screenMat'+'rix']));}['_updateSca'+'le'](){this['scale']=this['_calcScale'](this['_resolutio'+'n'],this['referenceR'+'esolution']);}['_calcScale'](_0xe1db99,_0x28ec91){const _0x166bd1=Math['log2']((_0xe1db99['x']||-0x3*-0x935+0x1002+-0x2ba0)/_0x28ec91['x']),_0x116fc1=Math['log2']((_0xe1db99['y']||0x55*-0x73+-0x1fd6+0x4606)/_0x28ec91['y']);return Math['pow'](-0x1680+-0x3*-0x705+-0x35*-0x7,_0x166bd1*(-0x3e5+-0x29*-0x1+0x21*0x1d-this['_scaleBlen'+'d'])+_0x116fc1*this['_scaleBlen'+'d']);}['_onResize'](_0x36b79c,_0x45154f){this['_screenSpa'+'ce']&&(this['_resolutio'+'n']['set'](_0x36b79c,_0x45154f),this['resolution']=this['_resolutio'+'n']);}['_bindEleme'+'nt'](_0x46ed0a){this['_elements']['add'](_0x46ed0a);}['_unbindEle'+'ment'](_0xea7f1a){this['_elements']['delete'](_0xea7f1a);}['onRemove'](){this['system']['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['fire']('remove'),this['_elements']['forEach'](_0xf10762=>_0xf10762['_onScreenR'+'emove']()),this['_elements']['clear'](),this['off']();}set['resolution'](_0x1b27e2){this['_screenSpa'+'ce']?this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']):this['_resolutio'+'n']['set'](_0x1b27e2['x'],_0x1b27e2['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:resolu'+'tion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x5cfe76=>_0x5cfe76['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['resolution'](){return this['_resolutio'+'n'];}set['referenceR'+'esolution'](_0x50b7ed){this['_reference'+'Resolution']['set'](_0x50b7ed['x'],_0x50b7ed['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:refere'+'nceresolut'+'ion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x28b021=>_0x28b021['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['referenceR'+'esolution'](){return this['_scaleMode']===Ua?this['_resolutio'+'n']:this['_reference'+'Resolution'];}set['screenSpac'+'e'](_0x1370c3){this['_screenSpa'+'ce']=_0x1370c3,this['_screenSpa'+'ce']&&this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']),this['resolution']=this['_resolutio'+'n'],this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:screen'+'space',this['_screenSpa'+'ce']),this['_elements']['forEach'](_0x36f230=>_0x36f230['_onScreenS'+'paceChange']());}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['scaleMode'](_0x159be9){_0x159be9!==Ua&&_0x159be9!==rO&&(_0x159be9=Ua),!this['_screenSpa'+'ce']&&_0x159be9!==Ua&&(_0x159be9=Ua),this['_scaleMode']=_0x159be9,this['resolution']=this['_resolutio'+'n'],this['fire']('set:scalem'+'ode',this['_scaleMode']);}get['scaleMode'](){return this['_scaleMode'];}set['scaleBlend'](_0x4f77e6){this['_scaleBlen'+'d']=_0x4f77e6,this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:scaleb'+'lend',this['_scaleBlen'+'d']),this['_elements']['forEach'](_0x5abfa9=>_0x5abfa9['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['scaleBlend'](){return this['_scaleBlen'+'d'];}set['priority'](_0x2f1af2){_0x2f1af2>-0xbbd*-0x2+-0x1741+0xb*0x12&&(M['warn']('Clamping\x20s'+'creen\x20prio'+'rity\x20from\x20'+_0x2f1af2+'\x20to\x20255'),_0x2f1af2=0xf94+-0x15f*-0x13+-0x28a2),this['_priority']!==_0x2f1af2&&(this['_priority']=_0x2f1af2,this['syncDrawOr'+'der']());}get['priority'](){return this['_priority'];}}class aO{constructor(){this['enabled']=!(-0x1bc3+-0x48d+0x205*0x10);}}const ru=['enabled'];class nO extends lt{constructor(_0x2df471){super(_0x2df471),this['id']='screen',this['ComponentT'+'ype']=Sv,this['DataType']=aO,this['schema']=ru,this['windowReso'+'lution']=new J(),this['_drawOrder'+'SyncQueue']=new T0(),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['initialize'+'ComponentD'+'ata'](_0x17b620,_0x5a5c0c,_0x25e7bf){_0x5a5c0c['priority']!==void(0x109e+-0xc67+-0xd*0x53)&&(_0x17b620['priority']=_0x5a5c0c['priority']),_0x5a5c0c['screenSpac'+'e']!==void(0x1f17+-0x20*0xcc+-0x597)&&(_0x17b620['screenSpac'+'e']=_0x5a5c0c['screenSpac'+'e']),_0x17b620['cull']=_0x17b620['screenSpac'+'e'],_0x5a5c0c['scaleMode']!==void(-0xa9+0x10dd+-0x1034)&&(_0x17b620['scaleMode']=_0x5a5c0c['scaleMode']),_0x5a5c0c['scaleBlend']!==void(0x14d9+-0x1f*0x2f+-0xf28)&&(_0x17b620['scaleBlend']=_0x5a5c0c['scaleBlend']),_0x5a5c0c['resolution']!==void(-0x1*0x1aab+-0x8b6*0x1+0x2361)&&(_0x5a5c0c['resolution']instanceof J?_0x17b620['_resolutio'+'n']['copy'](_0x5a5c0c['resolution']):_0x17b620['_resolutio'+'n']['set'](_0x5a5c0c['resolution'][-0xc96+-0x1446+0x20dc],_0x5a5c0c['resolution'][-0x1b9d+0x1a21*-0x1+0x35bf*0x1]),_0x17b620['resolution']=_0x17b620['_resolutio'+'n']),_0x5a5c0c['referenceR'+'esolution']!==void(-0x2003+0x997+0x1c*0xcd)&&(_0x5a5c0c['referenceR'+'esolution']instanceof J?_0x17b620['_reference'+'Resolution']['copy'](_0x5a5c0c['referenceR'+'esolution']):_0x17b620['_reference'+'Resolution']['set'](_0x5a5c0c['referenceR'+'esolution'][0x977+-0x1*0x5d+-0x1*0x91a],_0x5a5c0c['referenceR'+'esolution'][-0x9fb+-0x1d29+0x2725]),_0x17b620['referenceR'+'esolution']=_0x17b620['_reference'+'Resolution']),_0x17b620['syncDrawOr'+'der'](),super['initialize'+'ComponentD'+'ata'](_0x17b620,_0x5a5c0c,ru);}['destroy'](){super['destroy'](),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this);}['_onUpdate'](_0x2290b9){const _0x55bb2b=this['store'];for(const _0x125a02 in _0x55bb2b)_0x55bb2b[_0x125a02]['entity']['screen']['update']&&_0x55bb2b[_0x125a02]['entity']['screen']['update'](_0x2290b9);}['_onResize'](_0x4524f7,_0x5ba146){this['windowReso'+'lution']['x']=_0x4524f7,this['windowReso'+'lution']['y']=_0x5ba146;}['cloneCompo'+'nent'](_0x50546e,_0x130d0b){const _0x2c753f=_0x50546e['screen'];return this['addCompone'+'nt'](_0x130d0b,{'enabled':_0x2c753f['enabled'],'screenSpace':_0x2c753f['screenSpac'+'e'],'scaleMode':_0x2c753f['scaleMode'],'resolution':_0x2c753f['resolution']['clone'](),'referenceResolution':_0x2c753f['referenceR'+'esolution']['clone']()});}['onRemoveCo'+'mponent'](_0x479f0e,_0x11b5f1){_0x11b5f1['onRemove']();}['processDra'+'wOrderSync'+'Queue'](){const _0x1fe2d7=this['_drawOrder'+'SyncQueue']['list']();for(let _0x4b33a4=0x17e4+-0x2184+0x9a0;_0x4b33a4<_0x1fe2d7['length'];_0x4b33a4++){const _0x21e622=_0x1fe2d7[_0x4b33a4];_0x21e622['callback']['call'](_0x21e622['scope']);}this['_drawOrder'+'SyncQueue']['clear']();}['queueDrawO'+'rderSync'](_0x1b0283,_0x345b42,_0x5d27f1){this['_drawOrder'+'SyncQueue']['list']()['length']||this['app']['once']('prerender',this['processDra'+'wOrderSync'+'Queue'],this),this['_drawOrder'+'SyncQueue']['has'](_0x1b0283)||this['_drawOrder'+'SyncQueue']['push'](_0x1b0283,{'callback':_0x345b42,'scope':_0x5d27f1});}}we['_buildAcce'+'ssors'](Sv['prototype'],ru);const Zi=new J(),gg=new I(),Pr=new cf(),Sg=new aS(),yg=new I(),so=new I(),oO=new le(),lO={'x':'y','y':'x'};class xo extends pe{constructor(_0x364946,_0x2b6c87){if(super(),!_0x364946||!(_0x364946 instanceof is))throw new Error('Element\x20wa'+'s\x20null\x20or\x20'+'not\x20an\x20Ele'+'mentCompon'+'ent');if(_0x2b6c87&&_0x2b6c87!=='x'&&_0x2b6c87!=='y')throw new Error('Unrecogniz'+'ed\x20axis:\x20'+_0x2b6c87);this['_element']=_0x364946,this['_app']=_0x364946['system']['app'],this['_axis']=_0x2b6c87||null,this['_enabled']=!(-0x1*0x2675+0xd*0xe7+-0xd5d*-0x2),this['_dragScale']=new I(),this['_dragStart'+'MousePosit'+'ion']=new I(),this['_dragStart'+'HandlePosi'+'tion']=new I(),this['_deltaMous'+'ePosition']=new I(),this['_deltaHand'+'lePosition']=new I(),this['_isDraggin'+'g']=!(0x1000+-0x18af+0x8b0*0x1),this['_toggleLif'+'ecycleList'+'eners']('on');}['_toggleLif'+'ecycleList'+'eners'](_0x5e5897){this['_element'][_0x5e5897]('mousedown',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x5e5897]('touchstart',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x5e5897]('selectstar'+'t',this['_onMouseDo'+'wnOrTouchS'+'tart'],this);}['_toggleDra'+'gListeners'](_0x1f3e97){const _0x549e2a=_0x1f3e97==='on';this['_hasDragLi'+'steners']&&_0x549e2a||(this['_app']['mouse']&&(this['_element'][_0x1f3e97]('mousemove',this['_onMove'],this),this['_element'][_0x1f3e97]('mouseup',this['_onMouseUp'+'OrTouchEnd'],this)),Me['touch']&&(this['_element'][_0x1f3e97]('touchmove',this['_onMove'],this),this['_element'][_0x1f3e97]('touchend',this['_onMouseUp'+'OrTouchEnd'],this),this['_element'][_0x1f3e97]('touchcance'+'l',this['_onMouseUp'+'OrTouchEnd'],this)),this['_element'][_0x1f3e97]('selectmove',this['_onMove'],this),this['_element'][_0x1f3e97]('selectend',this['_onMouseUp'+'OrTouchEnd'],this),this['_hasDragLi'+'steners']=_0x549e2a);}['_onMouseDo'+'wnOrTouchS'+'tart'](_0x471325){if(this['_element']&&!this['_isDraggin'+'g']&&this['enabled']){this['_dragCamer'+'a']=_0x471325['camera'],this['_calculate'+'DragScale']();const _0x4cbeb1=this['_screenToL'+'ocal'](_0x471325);_0x4cbeb1&&(this['_toggleDra'+'gListeners']('on'),this['_isDraggin'+'g']=!(-0x116e+-0x2053+0x31c1),this['_dragStart'+'MousePosit'+'ion']['copy'](_0x4cbeb1),this['_dragStart'+'HandlePosi'+'tion']['copy'](this['_element']['entity']['getLocalPo'+'sition']()),this['fire']('drag:start'));}}['_onMouseUp'+'OrTouchEnd'](){this['_isDraggin'+'g']&&(this['_isDraggin'+'g']=!(-0x1c02+0x21c9+-0x2e3*0x2),this['_toggleDra'+'gListeners']('off'),this['fire']('drag:end'));}['_screenToL'+'ocal'](_0xa0b361){return _0xa0b361['inputSourc'+'e']?Pr['set'](_0xa0b361['inputSourc'+'e']['getOrigin'](),_0xa0b361['inputSourc'+'e']['getDirecti'+'on']()):(this['_determine'+'InputPosit'+'ion'](_0xa0b361),this['_chooseRay'+'OriginAndD'+'irection']()),yg['copy'](this['_element']['entity']['forward'])['mulScalar'](-(-0x98*-0xa+-0x251e+0x1f2f)),Sg['setFromPoi'+'ntNormal'](this['_element']['entity']['getPositio'+'n'](),yg),Sg['intersects'+'Ray'](Pr,so)?(oO['copy'](this['_element']['entity']['getRotatio'+'n']())['invert']()['transformV'+'ector'](so,so),so['mul'](this['_dragScale']),so):null;}['_determine'+'InputPosit'+'ion'](_0x2caf42){const _0xa7f113=this['_app']['graphicsDe'+'vice']['maxPixelRa'+'tio'];typeof _0x2caf42['x']<'u'&&typeof _0x2caf42['y']<'u'?(Zi['x']=_0x2caf42['x']*_0xa7f113,Zi['y']=_0x2caf42['y']*_0xa7f113):_0x2caf42['changedTou'+'ches']?(Zi['x']=_0x2caf42['changedTou'+'ches'][-0x2582+0x1*-0x24f5+0x1*0x4a77]['x']*_0xa7f113,Zi['y']=_0x2caf42['changedTou'+'ches'][0x2561+0x59*0x5b+0x7*-0x9dc]['y']*_0xa7f113):console['warn']('Could\x20not\x20'+'determine\x20'+'position\x20f'+'rom\x20input\x20'+'event');}['_chooseRay'+'OriginAndD'+'irection'](){this['_element']['screen']&&this['_element']['screen']['screen']['screenSpac'+'e']?(Pr['origin']['set'](Zi['x'],-Zi['y'],0x9cf+0x24bf+-0x2e8e),Pr['direction']['copy'](I['FORWARD'])):(gg['copy'](this['_dragCamer'+'a']['screenToWo'+'rld'](Zi['x'],Zi['y'],0x670+0x220*0x5+-0x18d*0xb)),Pr['origin']['copy'](this['_dragCamer'+'a']['entity']['getPositio'+'n']()),Pr['direction']['copy'](gg)['sub'](Pr['origin'])['normalize']());}['_calculate'+'DragScale'](){let _0x5cbc7d=this['_element']['entity']['parent'];const _0xad648a=this['_element']['screen']&&this['_element']['screen']['screen'],_0x4330d1=_0xad648a&&_0xad648a['screenSpac'+'e'],_0x21364a=_0x4330d1?_0xad648a['scale']:0x20f5+-0x739+-0x19bb,_0x32eb17=this['_dragScale'];for(_0x32eb17['set'](_0x21364a,_0x21364a,_0x21364a);_0x5cbc7d&&(_0x32eb17['mul'](_0x5cbc7d['getLocalSc'+'ale']()),_0x5cbc7d=_0x5cbc7d['parent'],!(_0x4330d1&&_0x5cbc7d['screen'])););_0x32eb17['x']=(-0x248e+-0xb82+0x3011)/_0x32eb17['x'],_0x32eb17['y']=(0x6a4+-0x1a*0xfe+0x9*0x221)/_0x32eb17['y'],_0x32eb17['z']=0x2434*-0x1+-0x4*0x8bf+0x10c*0x44;}['_onMove'](_0x25aac1){const {_element:_0x562637,_deltaMousePosition:_0x1ac47f,_deltaHandlePosition:_0x188003,_axis:_0x50631f}=this;if(_0x562637&&this['_isDraggin'+'g']&&this['enabled']&&_0x562637['enabled']&&_0x562637['entity']['enabled']){const _0x1a8e45=this['_screenToL'+'ocal'](_0x25aac1);if(_0x1a8e45){if(_0x1ac47f['sub2'](_0x1a8e45,this['_dragStart'+'MousePosit'+'ion']),_0x188003['add2'](this['_dragStart'+'HandlePosi'+'tion'],_0x1ac47f),_0x50631f){const _0x245a66=_0x562637['entity']['getLocalPo'+'sition'](),_0x21b84c=lO[_0x50631f];_0x188003[_0x21b84c]=_0x245a66[_0x21b84c];}_0x562637['entity']['setLocalPo'+'sition'](_0x188003),this['fire']('drag:move',_0x188003);}}}['destroy'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleDra'+'gListeners']('off');}set['enabled'](_0x1c4a84){this['_enabled']=_0x1c4a84;}get['enabled'](){return this['_enabled'];}get['isDragging'](){return this['_isDraggin'+'g'];}}h(xo,'EVENT_DRAG'+'START','drag:start'),h(xo,'EVENT_DRAG'+'END','drag:end'),h(xo,'EVENT_DRAG'+'MOVE','drag:move');const hO=-0x22e6+-0xa8*-0x1d+0xfde,vg=-0x1*0x14ca+-0x2692*-0x1+-0x6f*0x29,cO=0x3*-0x4c7+0x3a4+0xab3,dO=-0x185+0x1ed6*0x1+-0x1*0x1d51,fO=0x9b*0x33+0x3d5+0x5*-0x6f1,io=new J();class yv extends we{constructor(_0xc5b9d,_0x41608b){super(_0xc5b9d,_0x41608b),h(this,'_viewportE'+'ntity',null),h(this,'_contentEn'+'tity',null),h(this,'_horizonta'+'lScrollbar'+'Entity',null),h(this,'_verticalS'+'crollbarEn'+'tity',null),h(this,'_evtElemen'+'tRemove',null),h(this,'_evtViewpo'+'rtElementR'+'emove',null),h(this,'_evtViewpo'+'rtResize',null),h(this,'_evtConten'+'tEntityEle'+'mentAdd',null),h(this,'_evtConten'+'tElementRe'+'move',null),h(this,'_evtConten'+'tResize',null),h(this,'_evtHorizo'+'ntalScroll'+'barAdd',null),h(this,'_evtHorizo'+'ntalScroll'+'barRemove',null),h(this,'_evtHorizo'+'ntalScroll'+'barValue',null),h(this,'_evtVertic'+'alScrollba'+'rAdd',null),h(this,'_evtVertic'+'alScrollba'+'rRemove',null),h(this,'_evtVertic'+'alScrollba'+'rValue',null),(this['_scrollbar'+'UpdateFlag'+'s']={},this['_scrollbar'+'Entities']={},this['_prevConte'+'ntSizes']={},this['_prevConte'+'ntSizes'][be]=null,this['_prevConte'+'ntSizes'][qe]=null,this['_scroll']=new J(),this['_velocity']=new I(),this['_dragStart'+'Position']=new I(),this['_disabledC'+'ontentInpu'+'t']=!(0xb42+-0x148d+0x94c),this['_disabledC'+'ontentInpu'+'tEntities']=[],this['_toggleLif'+'ecycleList'+'eners']('on'),this['_toggleEle'+'mentListen'+'ers']('on'));}get['data'](){const _0x5d5809=this['system']['store'][this['entity']['getGuid']()];return _0x5d5809?_0x5d5809['data']:null;}set['enabled'](_0x1cbf57){this['_setValue']('enabled',_0x1cbf57);}get['enabled'](){return this['data']['enabled'];}set['horizontal'](_0x3eb657){this['_setValue']('horizontal',_0x3eb657);}get['horizontal'](){return this['data']['horizontal'];}set['vertical'](_0x5e2987){this['_setValue']('vertical',_0x5e2987);}get['vertical'](){return this['data']['vertical'];}set['scrollMode'](_0x343662){this['_setValue']('scrollMode',_0x343662);}get['scrollMode'](){return this['data']['scrollMode'];}set['bounceAmou'+'nt'](_0xe4c4bf){this['_setValue']('bounceAmou'+'nt',_0xe4c4bf);}get['bounceAmou'+'nt'](){return this['data']['bounceAmou'+'nt'];}set['friction'](_0x16304b){this['_setValue']('friction',_0x16304b);}get['friction'](){return this['data']['friction'];}set['dragThresh'+'old'](_0x2d6825){this['_setValue']('dragThresh'+'old',_0x2d6825);}get['dragThresh'+'old'](){return this['data']['dragThresh'+'old'];}set['useMouseWh'+'eel'](_0x3478c8){this['_setValue']('useMouseWh'+'eel',_0x3478c8);}get['useMouseWh'+'eel'](){return this['data']['useMouseWh'+'eel'];}set['mouseWheel'+'Sensitivit'+'y'](_0x40961e){this['_setValue']('mouseWheel'+'Sensitivit'+'y',_0x40961e);}get['mouseWheel'+'Sensitivit'+'y'](){return this['data']['mouseWheel'+'Sensitivit'+'y'];}set['horizontal'+'ScrollbarV'+'isibility'](_0x4fb32c){this['_setValue']('horizontal'+'ScrollbarV'+'isibility',_0x4fb32c);}get['horizontal'+'ScrollbarV'+'isibility'](){return this['data']['horizontal'+'ScrollbarV'+'isibility'];}set['verticalSc'+'rollbarVis'+'ibility'](_0x5cad2b){this['_setValue']('verticalSc'+'rollbarVis'+'ibility',_0x5cad2b);}get['verticalSc'+'rollbarVis'+'ibility'](){return this['data']['verticalSc'+'rollbarVis'+'ibility'];}set['viewportEn'+'tity'](_0x4400de){if(this['_viewportE'+'ntity']===_0x4400de)return;const _0x347754=typeof _0x4400de=='string';this['_viewportE'+'ntity']&&_0x347754&&this['_viewportE'+'ntity']['getGuid']()===_0x4400de||(this['_viewportE'+'ntity']&&this['_viewportE'+'ntityUnsub'+'scribe'](),_0x4400de instanceof He?this['_viewportE'+'ntity']=_0x4400de:_0x347754?this['_viewportE'+'ntity']=this['system']['app']['getEntityF'+'romIndex'](_0x4400de)||null:this['_viewportE'+'ntity']=null,this['_viewportE'+'ntity']&&this['_viewportE'+'ntitySubsc'+'ribe'](),this['_viewportE'+'ntity']?this['data']['viewportEn'+'tity']=this['_viewportE'+'ntity']['getGuid']():_0x347754&&_0x4400de&&(this['data']['viewportEn'+'tity']=_0x4400de));}get['viewportEn'+'tity'](){return this['_viewportE'+'ntity'];}set['contentEnt'+'ity'](_0x149283){if(this['_contentEn'+'tity']===_0x149283)return;const _0x31c15d=typeof _0x149283=='string';this['_contentEn'+'tity']&&_0x31c15d&&this['_contentEn'+'tity']['getGuid']()===_0x149283||(this['_contentEn'+'tity']&&this['_contentEn'+'tityUnsubs'+'cribe'](),_0x149283 instanceof He?this['_contentEn'+'tity']=_0x149283:_0x31c15d?this['_contentEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x149283)||null:this['_contentEn'+'tity']=null,this['_contentEn'+'tity']&&this['_contentEn'+'titySubscr'+'ibe'](),this['_contentEn'+'tity']?this['data']['contentEnt'+'ity']=this['_contentEn'+'tity']['getGuid']():_0x31c15d&&_0x149283&&(this['data']['contentEnt'+'ity']=_0x149283));}get['contentEnt'+'ity'](){return this['_contentEn'+'tity'];}set['horizontal'+'ScrollbarE'+'ntity'](_0x1051e4){if(this['_horizonta'+'lScrollbar'+'Entity']===_0x1051e4)return;const _0x4b1ca1=typeof _0x1051e4=='string';this['_horizonta'+'lScrollbar'+'Entity']&&_0x4b1ca1&&this['_horizonta'+'lScrollbar'+'Entity']['getGuid']()===_0x1051e4||(this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](),_0x1051e4 instanceof He?this['_horizonta'+'lScrollbar'+'Entity']=_0x1051e4:_0x4b1ca1?this['_horizonta'+'lScrollbar'+'Entity']=this['system']['app']['getEntityF'+'romIndex'](_0x1051e4)||null:this['_horizonta'+'lScrollbar'+'Entity']=null,this['_scrollbar'+'Entities'][be]=this['_horizonta'+'lScrollbar'+'Entity'],this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](),this['_horizonta'+'lScrollbar'+'Entity']?this['data']['horizontal'+'ScrollbarE'+'ntity']=this['_horizonta'+'lScrollbar'+'Entity']['getGuid']():_0x4b1ca1&&_0x1051e4&&(this['data']['horizontal'+'ScrollbarE'+'ntity']=_0x1051e4));}get['horizontal'+'ScrollbarE'+'ntity'](){return this['_horizonta'+'lScrollbar'+'Entity'];}set['verticalSc'+'rollbarEnt'+'ity'](_0x515477){if(this['_verticalS'+'crollbarEn'+'tity']===_0x515477)return;const _0x424251=typeof _0x515477=='string';this['_verticalS'+'crollbarEn'+'tity']&&_0x424251&&this['_verticalS'+'crollbarEn'+'tity']['getGuid']()===_0x515477||(this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](),_0x515477 instanceof He?this['_verticalS'+'crollbarEn'+'tity']=_0x515477:_0x424251?this['_verticalS'+'crollbarEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x515477)||null:this['_verticalS'+'crollbarEn'+'tity']=null,this['_scrollbar'+'Entities'][qe]=this['_verticalS'+'crollbarEn'+'tity'],this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](),this['_verticalS'+'crollbarEn'+'tity']?this['data']['verticalSc'+'rollbarEnt'+'ity']=this['_verticalS'+'crollbarEn'+'tity']['getGuid']():_0x424251&&_0x515477&&(this['data']['verticalSc'+'rollbarEnt'+'ity']=_0x515477));}get['verticalSc'+'rollbarEnt'+'ity'](){return this['_verticalS'+'crollbarEn'+'tity'];}set['scroll'](_0x1dc14c){this['_onSetScro'+'ll'](_0x1dc14c['x'],_0x1dc14c['y']);}get['scroll'](){return this['_scroll'];}['_setValue'](_0x4f89c5,_0x274705){const _0x216a76=this['data'],_0x2c9d8b=_0x216a76[_0x4f89c5];_0x216a76[_0x4f89c5]=_0x274705,this['fire']('set',_0x4f89c5,_0x2c9d8b,_0x274705);}['_toggleLif'+'ecycleList'+'eners'](_0x2d43ed){this[_0x2d43ed]('set_horizo'+'ntal',this['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'],this),this[_0x2d43ed]('set_vertic'+'al',this['_onSetVert'+'icalScroll'+'ingEnabled'],this),this['entity'][_0x2d43ed]('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this);}['_toggleEle'+'mentListen'+'ers'](_0x49ddda){if(this['entity']['element']){if(_0x49ddda==='on'&&this['_hasElemen'+'tListeners'])return;this['entity']['element'][_0x49ddda]('resize',this['_syncAll'],this),this['entity']['element'][_0x49ddda]('mousewheel',this['_onMouseWh'+'eel'],this),this['_hasElemen'+'tListeners']=_0x49ddda==='on';}}['_onElement'+'ComponentA'+'dd'](_0x31afcb){this['_evtElemen'+'tRemove']=this['entity']['element']['once']('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['_toggleEle'+'mentListen'+'ers']('on');}['_onElement'+'ComponentR'+'emove'](_0x479a7d){var _0x50c773;(_0x50c773=this['_evtElemen'+'tRemove'])==null||_0x50c773['off'](),this['_evtElemen'+'tRemove']=null,this['_toggleEle'+'mentListen'+'ers']('off');}['_viewportE'+'ntitySubsc'+'ribe'](){this['_evtViewpo'+'rtEntityEl'+'ementAdd']=this['_viewportE'+'ntity']['on']('element:ad'+'d',this['_onViewpor'+'tElementGa'+'in'],this),this['_viewportE'+'ntity']['element']&&this['_onViewpor'+'tElementGa'+'in']();}['_viewportE'+'ntityUnsub'+'scribe'](){var _0x1e219f,_0x322b83;(_0x1e219f=this['_evtViewpo'+'rtEntityEl'+'ementAdd'])==null||_0x1e219f['off'](),this['_evtViewpo'+'rtEntityEl'+'ementAdd']=null,(_0x322b83=this['_viewportE'+'ntity'])!=null&&_0x322b83['element']&&this['_onViewpor'+'tElementLo'+'se']();}['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](){const _0x56b058=this['_viewportE'+'ntity']['element'];this['_evtViewpo'+'rtElementR'+'emove']=_0x56b058['once']('beforeremo'+'ve',this['_onViewpor'+'tElementLo'+'se'],this),this['_evtViewpo'+'rtResize']=_0x56b058['on']('resize',this['_syncAll'],this);}['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe'](){var _0x2ca296,_0x1055b3;(_0x2ca296=this['_evtViewpo'+'rtElementR'+'emove'])==null||_0x2ca296['off'](),this['_evtViewpo'+'rtElementR'+'emove']=null,(_0x1055b3=this['_evtViewpo'+'rtResize'])==null||_0x1055b3['off'](),this['_evtViewpo'+'rtResize']=null;}['_onViewpor'+'tElementGa'+'in'](){this['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](),this['_syncAll']();}['_onViewpor'+'tElementLo'+'se'](){this['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe']();}['_contentEn'+'titySubscr'+'ibe'](){this['_evtConten'+'tEntityEle'+'mentAdd']=this['_contentEn'+'tity']['on']('element:ad'+'d',this['_onContent'+'ElementGai'+'n'],this),this['_contentEn'+'tity']['element']&&this['_onContent'+'ElementGai'+'n']();}['_contentEn'+'tityUnsubs'+'cribe'](){var _0x50744a,_0x1106a2;(_0x50744a=this['_evtConten'+'tEntityEle'+'mentAdd'])==null||_0x50744a['off'](),this['_evtConten'+'tEntityEle'+'mentAdd']=null,(_0x1106a2=this['_contentEn'+'tity'])!=null&&_0x1106a2['element']&&this['_onContent'+'ElementLos'+'e']();}['_contentEn'+'tityElemen'+'tSubscribe'](){const _0x29974b=this['_contentEn'+'tity']['element'];this['_evtConten'+'tElementRe'+'move']=_0x29974b['once']('beforeremo'+'ve',this['_onContent'+'ElementLos'+'e'],this),this['_evtConten'+'tResize']=_0x29974b['on']('resize',this['_syncAll'],this);}['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](){var _0x31c406,_0x3b055b;(_0x31c406=this['_evtConten'+'tElementRe'+'move'])==null||_0x31c406['off'](),this['_evtConten'+'tElementRe'+'move']=null,(_0x3b055b=this['_evtConten'+'tResize'])==null||_0x3b055b['off'](),this['_evtConten'+'tResize']=null;}['_onContent'+'ElementGai'+'n'](){this['_contentEn'+'tityElemen'+'tSubscribe'](),this['_destroyDr'+'agHelper'](),this['_contentDr'+'agHelper']=new xo(this['_contentEn'+'tity']['element']),this['_contentDr'+'agHelper']['on']('drag:start',this['_onContent'+'DragStart'],this),this['_contentDr'+'agHelper']['on']('drag:end',this['_onContent'+'DragEnd'],this),this['_contentDr'+'agHelper']['on']('drag:move',this['_onContent'+'DragMove'],this),this['_prevConte'+'ntSizes'][be]=null,this['_prevConte'+'ntSizes'][qe]=null,this['_syncAll']();}['_onContent'+'ElementLos'+'e'](){this['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](),this['_destroyDr'+'agHelper']();}['_onContent'+'DragStart'](){this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&this['_dragStart'+'Position']['copy'](this['_contentEn'+'tity']['getLocalPo'+'sition']());}['_onContent'+'DragEnd'](){this['_prevConte'+'ntDragPosi'+'tion']=null,this['_enableCon'+'tentInput']();}['_onContent'+'DragMove'](_0x5b465c){if(this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&(this['_wasDragge'+'d']=!(-0x2*0xf9a+0xe01+0x1133),this['_setScroll'+'FromConten'+'tPosition'](_0x5b465c),this['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x5b465c),!this['_disabledC'+'ontentInpu'+'t'])){const _0x2ec3a0=_0x5b465c['x']-this['_dragStart'+'Position']['x'],_0x20172a=_0x5b465c['y']-this['_dragStart'+'Position']['y'];(Math['abs'](_0x2ec3a0)>this['dragThresh'+'old']||Math['abs'](_0x20172a)>this['dragThresh'+'old'])&&this['_disableCo'+'ntentInput']();}}['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](){this['_evtHorizo'+'ntalScroll'+'barAdd']=this['_horizonta'+'lScrollbar'+'Entity']['on']('scrollbar:'+'add',this['_onHorizon'+'talScrollb'+'arGain'],this),this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arGain']();}['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](){this['_evtVertic'+'alScrollba'+'rAdd']=this['_verticalS'+'crollbarEn'+'tity']['on']('scrollbar:'+'add',this['_onVertica'+'lScrollbar'+'Gain'],this),this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Gain']();}['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](){var _0x35be56;(_0x35be56=this['_evtHorizo'+'ntalScroll'+'barAdd'])==null||_0x35be56['off'](),this['_evtHorizo'+'ntalScroll'+'barAdd']=null,this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arLose']();}['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](){var _0xef81d4;(_0xef81d4=this['_evtVertic'+'alScrollba'+'rAdd'])==null||_0xef81d4['off'](),this['_evtVertic'+'alScrollba'+'rAdd']=null,this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Lose']();}['_onSetHori'+'zontalScro'+'llbarValue'](_0x42fb2f){!this['_scrollbar'+'UpdateFlag'+'s'][be]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](_0x42fb2f,null);}['_onSetVert'+'icalScroll'+'barValue'](_0x54272e){!this['_scrollbar'+'UpdateFlag'+'s'][qe]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](null,_0x54272e);}['_onHorizon'+'talScrollb'+'arGain'](){var _0x498839;const _0x4a54af=(_0x498839=this['_horizonta'+'lScrollbar'+'Entity'])==null?void(-0x1*-0x2348+0x3*0xa4+-0x129a*0x2):_0x498839['scrollbar'];this['_evtHorizo'+'ntalScroll'+'barRemove']=_0x4a54af['on']('beforeremo'+'ve',this['_onHorizon'+'talScrollb'+'arLose'],this),this['_evtHorizo'+'ntalScroll'+'barValue']=_0x4a54af['on']('set:value',this['_onSetHori'+'zontalScro'+'llbarValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](be),this['_syncScrol'+'lbarPositi'+'on'](be);}['_onVertica'+'lScrollbar'+'Gain'](){var _0x2e4a84;const _0x362bba=(_0x2e4a84=this['_verticalS'+'crollbarEn'+'tity'])==null?void(-0x1*0xe71+-0x2f9+0x116a):_0x2e4a84['scrollbar'];this['_evtVertic'+'alScrollba'+'rRemove']=_0x362bba['on']('beforeremo'+'ve',this['_onVertica'+'lScrollbar'+'Lose'],this),this['_evtVertic'+'alScrollba'+'rValue']=_0x362bba['on']('set:value',this['_onSetVert'+'icalScroll'+'barValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](qe),this['_syncScrol'+'lbarPositi'+'on'](qe);}['_onHorizon'+'talScrollb'+'arLose'](){var _0x5f0c83,_0x2ae372;(_0x5f0c83=this['_evtHorizo'+'ntalScroll'+'barRemove'])==null||_0x5f0c83['off'](),this['_evtHorizo'+'ntalScroll'+'barRemove']=null,(_0x2ae372=this['_evtHorizo'+'ntalScroll'+'barValue'])==null||_0x2ae372['off'](),this['_evtHorizo'+'ntalScroll'+'barValue']=null;}['_onVertica'+'lScrollbar'+'Lose'](){var _0x1d717d,_0x463214;(_0x1d717d=this['_evtVertic'+'alScrollba'+'rRemove'])==null||_0x1d717d['off'](),this['_evtVertic'+'alScrollba'+'rRemove']=null,(_0x463214=this['_evtVertic'+'alScrollba'+'rValue'])==null||_0x463214['off'](),this['_evtVertic'+'alScrollba'+'rValue']=null;}['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'](){this['_syncScrol'+'lbarEnable'+'dState'](be);}['_onSetVert'+'icalScroll'+'ingEnabled'](){this['_syncScrol'+'lbarEnable'+'dState'](qe);}['_onSetScro'+'ll'](_0x5d36c9,_0x49e0c2,_0x2a2857){_0x2a2857!==!(0x260+0x132+-0x53*0xb)&&this['_velocity']['set'](0x26f8+-0x4f2*-0x4+0x14*-0x2f0,-0x205*0xb+0x4dd+0x115a,-0x17eb*-0x1+0x1*-0x611+-0x8ed*0x2);const _0x3d6368=this['_updateAxi'+'s'](_0x5d36c9,'x',be),_0x347df4=this['_updateAxi'+'s'](_0x49e0c2,'y',qe);(_0x3d6368||_0x347df4)&&this['fire']('set:scroll',this['_scroll']);}['_updateAxi'+'s'](_0x2524bb,_0x2852b6,_0x3d1d75){const _0x2e986e=_0x2524bb!==null&&Math['abs'](_0x2524bb-this['_scroll'][_0x2852b6])>0x793+-0x1*0x36e+-0x425*0x1+0.00001;return(_0x2e986e||this['_isDraggin'+'g']()||_0x2524bb===-0xdc+0x494+0x2*-0x1dc)&&(this['_scroll'][_0x2852b6]=this['_determine'+'NewScrollV'+'alue'](_0x2524bb,_0x2852b6,_0x3d1d75),this['_syncConte'+'ntPosition'](_0x3d1d75),this['_syncScrol'+'lbarPositi'+'on'](_0x3d1d75)),_0x2e986e;}['_determine'+'NewScrollV'+'alue'](_0x307d5e,_0x5a6468,_0x58a51f){if(!this['_getScroll'+'ingEnabled'](_0x58a51f))return this['_scroll'][_0x5a6468];switch(this['scrollMode']){case hO:return Y['clamp'](_0x307d5e,0x13bf+0x67*0x49+0x188f*-0x2,this['_getMaxScr'+'ollValue'](_0x58a51f));case vg:return this['_setVeloci'+'tyFromOver'+'shoot'](_0x307d5e,_0x5a6468,_0x58a51f),_0x307d5e;case cO:return _0x307d5e;default:return console['warn']('Unhandled\x20'+'scroll\x20mod'+'e:'+this['scrollMode']),_0x307d5e;}}['_syncAll'](){this['_syncConte'+'ntPosition'](be),this['_syncConte'+'ntPosition'](qe),this['_syncScrol'+'lbarPositi'+'on'](be),this['_syncScrol'+'lbarPositi'+'on'](qe),this['_syncScrol'+'lbarEnable'+'dState'](be),this['_syncScrol'+'lbarEnable'+'dState'](qe);}['_syncConte'+'ntPosition'](_0x5dfd12){if(!this['_contentEn'+'tity'])return;const _0x343927=this['_getAxis'](_0x5dfd12),_0x4279d0=this['_getSign'](_0x5dfd12),_0x4fee65=this['_prevConte'+'ntSizes'][_0x5dfd12],_0x398749=this['_getConten'+'tSize'](_0x5dfd12);if(_0x4fee65!==null&&Math['abs'](_0x4fee65-_0x398749)>0x6b*-0x59+-0x1da0+-0x42d3*-0x1+0.0001){const _0x35ebcc=this['_getMaxOff'+'set'](_0x5dfd12,_0x4fee65),_0x41c54d=this['_getMaxOff'+'set'](_0x5dfd12,_0x398749);_0x41c54d===-0x15b3*-0x1+-0x17cd+-0x21a*-0x1?this['_scroll'][_0x343927]=0x1bf5+-0x1*-0x171+-0x1d65:this['_scroll'][_0x343927]=Y['clamp'](this['_scroll'][_0x343927]*_0x35ebcc/_0x41c54d,0x67*-0x43+-0x3be*-0x9+-0x6b9,-0x252b+-0x2596+0x4ac2);}const _0x271029=this['_scroll'][_0x343927]*this['_getMaxOff'+'set'](_0x5dfd12),_0x1faf7b=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x1faf7b[_0x343927]=_0x271029*_0x4279d0,this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x1faf7b),this['_prevConte'+'ntSizes'][_0x5dfd12]=_0x398749;}['_syncScrol'+'lbarPositi'+'on'](_0x1b335b){const _0x5b66f2=this['_scrollbar'+'Entities'][_0x1b335b];if(!(_0x5b66f2!=null&&_0x5b66f2['scrollbar']))return;const _0x5ce1a3=this['_getAxis'](_0x1b335b);this['_scrollbar'+'UpdateFlag'+'s'][_0x1b335b]=!(-0x5b*0x2f+-0x78d*-0x3+-0x5f2),_0x5b66f2['scrollbar']['value']=this['_scroll'][_0x5ce1a3],_0x5b66f2['scrollbar']['handleSize']=this['_getScroll'+'barHandleS'+'ize'](_0x5ce1a3,_0x1b335b),this['_scrollbar'+'UpdateFlag'+'s'][_0x1b335b]=!(0x25e7+0x62e+-0x2c14);}['_syncScrol'+'lbarEnable'+'dState'](_0x547869){const _0x44a6fa=this['_scrollbar'+'Entities'][_0x547869];if(!_0x44a6fa)return;const _0xd20fb6=this['_getScroll'+'ingEnabled'](_0x547869),_0x455c42=this['_getScroll'+'barVisibil'+'ity'](_0x547869);switch(_0x455c42){case dO:_0x44a6fa['enabled']=_0xd20fb6;return;case fO:_0x44a6fa['enabled']=_0xd20fb6&&this['_contentIs'+'LargerThan'+'Viewport'](_0x547869);return;default:console['warn']('Unhandled\x20'+'scrollbar\x20'+'visibility'+':'+_0x455c42),_0x44a6fa['enabled']=_0xd20fb6;}}['_contentIs'+'LargerThan'+'Viewport'](_0x84d644){return this['_getConten'+'tSize'](_0x84d644)>this['_getViewpo'+'rtSize'](_0x84d644);}['_contentPo'+'sitionToSc'+'rollValue'](_0x1959b2){const _0x30324a=this['_getMaxOff'+'set'](be),_0x21b6c6=this['_getMaxOff'+'set'](qe);return _0x30324a===-0x7*0x346+-0x56*0x10+0x96e*0x3?io['x']=-0xc05+-0x14d*0x6+0x13d3:io['x']=_0x1959b2['x']/_0x30324a,_0x21b6c6===0x1b1*0x9+-0xdc6+0x173*-0x1?io['y']=-0x19b6+0x2*-0x3f1+0x2198:io['y']=_0x1959b2['y']/-_0x21b6c6,io;}['_getMaxOff'+'set'](_0x520ca4,_0x337271){_0x337271=_0x337271===void(0x296+0x376*-0x4+0xb*0x106)?this['_getConten'+'tSize'](_0x520ca4):_0x337271;const _0x5df0b5=this['_getViewpo'+'rtSize'](_0x520ca4);return _0x337271<_0x5df0b5?-this['_getViewpo'+'rtSize'](_0x520ca4):_0x5df0b5-_0x337271;}['_getMaxScr'+'ollValue'](_0x48fc89){return this['_contentIs'+'LargerThan'+'Viewport'](_0x48fc89)?-0x6*-0x4+0x876+-0xc7*0xb:-0x13d*-0x19+0x9*0x240+-0x3335;}['_getScroll'+'barHandleS'+'ize'](_0x35485b,_0x8ec53d){const _0x58397c=this['_getViewpo'+'rtSize'](_0x8ec53d),_0x57ba4e=this['_getConten'+'tSize'](_0x8ec53d);if(Math['abs'](_0x57ba4e)<0x457*-0x7+-0x223a+0x409b+0.001)return 0x2344+-0x100+-0x2243;const _0x502651=Math['min'](_0x58397c/_0x57ba4e,0x10*0x15a+-0x93*0x13+-0x1c9*0x6),_0x5b44f7=this['_toOversho'+'ot'](this['_scroll'][_0x35485b],_0x8ec53d);return _0x5b44f7===0x1*-0x10f+-0x190f+0x1a1e?_0x502651:_0x502651/(-0x2*0x9c4+0x236*0x7+-0x40f*-0x1+Math['abs'](_0x5b44f7));}['_getViewpo'+'rtSize'](_0x17a475){return this['_getSize'](_0x17a475,this['_viewportE'+'ntity']);}['_getConten'+'tSize'](_0x5c3bf2){return this['_getSize'](_0x5c3bf2,this['_contentEn'+'tity']);}['_getSize'](_0x4f9c10,_0x3c1171){return _0x3c1171!=null&&_0x3c1171['element']?_0x3c1171['element'][this['_getCalcul'+'atedDimens'+'ion'](_0x4f9c10)]:-0x3*-0x517+0x1d3e+-0x2c83;}['_getScroll'+'ingEnabled'](_0x53f659){if(_0x53f659===be)return this['horizontal'];if(_0x53f659===qe)return this['vertical'];M['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x53f659);}['_getScroll'+'barVisibil'+'ity'](_0xa60ee5){if(_0xa60ee5===be)return this['horizontal'+'ScrollbarV'+'isibility'];if(_0xa60ee5===qe)return this['verticalSc'+'rollbarVis'+'ibility'];M['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0xa60ee5);}['_getSign'](_0x4ee0f7){return _0x4ee0f7===be?-0x2*-0xe48+0x2f*-0x9d+0x2*0x22:-(0x2*0x833+-0x89b*-0x3+-0x2a36);}['_getAxis'](_0x180ea7){return _0x180ea7===be?'x':'y';}['_getCalcul'+'atedDimens'+'ion'](_0x5cdc5d){return _0x5cdc5d===be?'calculated'+'Width':'calculated'+'Height';}['_destroyDr'+'agHelper'](){this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['destroy']();}['onUpdate'](){this['_contentEn'+'tity']&&(this['_updateVel'+'ocity'](),this['_syncScrol'+'lbarEnable'+'dState'](be),this['_syncScrol'+'lbarEnable'+'dState'](qe));}['_updateVel'+'ocity'](){if(!this['_isDraggin'+'g']()){if(this['scrollMode']===vg&&(this['_hasOversh'+'oot']('x',be)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['x'],'x',be),this['_hasOversh'+'oot']('y',qe)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['y'],'y',qe)),Math['abs'](this['_velocity']['x'])>0x1adf+-0x19da*0x1+0x105*-0x1+0.0001||Math['abs'](this['_velocity']['y'])>-0x2135+0x1*-0x9f9+0x2b2e+0.0001){const _0x24e912=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x24e912['x']+=this['_velocity']['x'],_0x24e912['y']+=this['_velocity']['y'],this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x24e912),this['_setScroll'+'FromConten'+'tPosition'](_0x24e912);}this['_velocity']['x']*=0x23ed+-0x1*-0x13f7+-0x37e3-this['friction'],this['_velocity']['y']*=0xa85+0x1*-0xcb3+0x1*0x22f-this['friction'];}}['_hasOversh'+'oot'](_0x59cf29,_0x5fa379){return Math['abs'](this['_toOversho'+'ot'](this['scroll'][_0x59cf29],_0x5fa379))>-0x1bdf+-0x11*-0x49+0xe*0x1a5+0.001;}['_toOversho'+'ot'](_0x4aafda,_0x3a8ee7){const _0x371f4b=this['_getMaxScr'+'ollValue'](_0x3a8ee7);return _0x4aafda<-0x67a+-0x1*0x6ef+0x1*0xd69?_0x4aafda:_0x4aafda>_0x371f4b?_0x4aafda-_0x371f4b:-0x85f+-0x9e7+0x2*0x923;}['_setVeloci'+'tyFromOver'+'shoot'](_0x39f8e3,_0x791c94,_0x370cb5){const _0x32bccb=this['_toOversho'+'ot'](_0x39f8e3,_0x370cb5)*this['_getMaxOff'+'set'](_0x370cb5)*this['_getSign'](_0x370cb5);Math['abs'](_0x32bccb)>-0x88*-0x11+-0x3ad*-0x9+-0x2a1d*0x1&&(this['_velocity'][_0x791c94]=-_0x32bccb/(this['bounceAmou'+'nt']*(0x15b1*-0x1+0xabb*-0x1+0x209e)+(0xe33+0x1181+-0x5*0x657)));}['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x9284d3){this['_prevConte'+'ntDragPosi'+'tion']?(this['_velocity']['sub2'](_0x9284d3,this['_prevConte'+'ntDragPosi'+'tion']),this['_prevConte'+'ntDragPosi'+'tion']['copy'](_0x9284d3)):(this['_velocity']['set'](0x1024+0x3*-0x1+0x1021*-0x1,-0x43*-0xa+0x142e+-0x16cc,0x598+0x12f4+0x623*-0x4),this['_prevConte'+'ntDragPosi'+'tion']=_0x9284d3['clone']());}['_setScroll'+'FromConten'+'tPosition'](_0x14a96b){let _0x14bfc8=this['_contentPo'+'sitionToSc'+'rollValue'](_0x14a96b);this['_isDraggin'+'g']()&&(_0x14bfc8=this['_applyScro'+'llValueTen'+'sion'](_0x14bfc8)),this['_onSetScro'+'ll'](_0x14bfc8['x'],_0x14bfc8['y'],!(0x265f+-0xbbf*0x3+-0x321));}['_applyScro'+'llValueTen'+'sion'](_0xcafe99){let _0x26f418=this['_getMaxScr'+'ollValue'](be),_0x4d5918=this['_toOversho'+'ot'](_0xcafe99['x'],be);return _0x4d5918>-0x69a+0x1048*-0x2+0x12*0x22d?_0xcafe99['x']=_0x26f418+(0x3*0x293+-0x172f+0x25*0x6b)*Math['log10'](-0x47*-0x7b+0x269e+-0x48ba+_0x4d5918):_0x4d5918<-0x1374+0x894+0xae0&&(_0xcafe99['x']=-(-0x3*-0x7f+0x384+-0x500)*Math['log10'](-0x166a+0x42b+0x1240-_0x4d5918)),_0x26f418=this['_getMaxScr'+'ollValue'](qe),_0x4d5918=this['_toOversho'+'ot'](_0xcafe99['y'],qe),_0x4d5918>0x1*0x1133+0x37*-0x7d+0x9a8?_0xcafe99['y']=_0x26f418+(0x2*0x1e+0x29f+-0x2da)*Math['log10'](-0xa0d+-0x1b*0xa6+0x7*0x3f0+_0x4d5918):_0x4d5918<0x2*-0x115c+-0x25b2+0x486a&&(_0xcafe99['y']=-(-0x2126+-0x17a7+-0x52a*-0xb)*Math['log10'](0x97f+-0x9b1*0x4+0x1*0x1d46-_0x4d5918)),_0xcafe99;}['_isDraggin'+'g'](){return this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['isDragging'];}['_setScroll'+'barCompone'+'ntsEnabled'](_0x241fcb){var _0x1a5c08,_0x3326b6;(_0x1a5c08=this['_horizonta'+'lScrollbar'+'Entity'])!=null&&_0x1a5c08['scrollbar']&&(this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']['enabled']=_0x241fcb),(_0x3326b6=this['_verticalS'+'crollbarEn'+'tity'])!=null&&_0x3326b6['scrollbar']&&(this['_verticalS'+'crollbarEn'+'tity']['scrollbar']['enabled']=_0x241fcb);}['_setConten'+'tDraggingE'+'nabled'](_0x28e633){this['_contentDr'+'agHelper']&&(this['_contentDr'+'agHelper']['enabled']=_0x28e633);}['_onMouseWh'+'eel'](_0xdfa2d9){var _0x2dc73e;if(!this['useMouseWh'+'eel']||!((_0x2dc73e=this['_contentEn'+'tity'])!=null&&_0x2dc73e['element']))return;const _0x4f9bfc=_0xdfa2d9['event'],_0x489530=_0x4f9bfc['deltaX']/this['_contentEn'+'tity']['element']['calculated'+'Width']*this['mouseWheel'+'Sensitivit'+'y']['x'],_0x4f14ce=_0x4f9bfc['deltaY']/this['_contentEn'+'tity']['element']['calculated'+'Height']*this['mouseWheel'+'Sensitivit'+'y']['y'],_0x264324=Y['clamp'](this['_scroll']['x']+_0x489530,0x1*0x2065+-0x1630+-0xa35,this['_getMaxScr'+'ollValue'](be)),_0x297db5=Y['clamp'](this['_scroll']['y']+_0x4f14ce,-0x4ca+0x1712*-0x1+0x1bdc,this['_getMaxScr'+'ollValue'](qe));this['scroll']=new J(_0x264324,_0x297db5);}['_enableCon'+'tentInput'](){for(;this['_disabledC'+'ontentInpu'+'tEntities']['length'];){const _0x1635ea=this['_disabledC'+'ontentInpu'+'tEntities']['pop']();_0x1635ea['element']&&(_0x1635ea['element']['useInput']=!(-0x1eb6+-0x21a1+0x4057));}this['_disabledC'+'ontentInpu'+'t']=!(-0x1*-0x31f+-0x18df+0x1*0x15c1);}['_disableCo'+'ntentInput'](){const _0x16ee74=_0x14d1d8=>{_0x14d1d8['element']&&_0x14d1d8['element']['useInput']&&(this['_disabledC'+'ontentInpu'+'tEntities']['push'](_0x14d1d8),_0x14d1d8['element']['useInput']=!(-0x720+0x1e2d+-0x170c));const _0x45f7bf=_0x14d1d8['children'];for(let _0x49cac4=0x1671+-0x6a0*0x1+0x1*-0xfd1,_0x344f2c=_0x45f7bf['length'];_0x49cac4<_0x344f2c;_0x49cac4++)_0x16ee74(_0x45f7bf[_0x49cac4]);};if(this['_contentEn'+'tity']){const _0x4e72d3=this['_contentEn'+'tity']['children'];for(let _0x542609=-0x1812+-0x267d+0x3e8f,_0x499695=_0x4e72d3['length'];_0x542609<_0x499695;_0x542609++)_0x16ee74(_0x4e72d3[_0x542609]);}this['_disabledC'+'ontentInpu'+'t']=!(-0x1240+-0x17*-0x157+-0xc91*0x1);}['onEnable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0x15d*-0xd+-0xbb7+0x301*-0x2)),this['_setConten'+'tDraggingE'+'nabled'](!(-0x1*-0x805+-0x202e+0x1*0x1829)),this['_syncAll']();}['onDisable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(0xfb6+0x1169*-0x1+0x1b4)),this['_setConten'+'tDraggingE'+'nabled'](!(-0x10*0xe3+0x961*0x3+-0xdf2*0x1));}['onRemove'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleEle'+'mentListen'+'ers']('off'),this['_destroyDr'+'agHelper']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x52b54f,_0x3716b0){_0x52b54f['viewportEn'+'tity']&&(this['viewportEn'+'tity']=_0x3716b0[_0x52b54f['viewportEn'+'tity']['getGuid']()]),_0x52b54f['contentEnt'+'ity']&&(this['contentEnt'+'ity']=_0x3716b0[_0x52b54f['contentEnt'+'ity']['getGuid']()]),_0x52b54f['horizontal'+'ScrollbarE'+'ntity']&&(this['horizontal'+'ScrollbarE'+'ntity']=_0x3716b0[_0x52b54f['horizontal'+'ScrollbarE'+'ntity']['getGuid']()]),_0x52b54f['verticalSc'+'rollbarEnt'+'ity']&&(this['verticalSc'+'rollbarEnt'+'ity']=_0x3716b0[_0x52b54f['verticalSc'+'rollbarEnt'+'ity']['getGuid']()]);}}h(yv,'EVENT_SETS'+'CROLL','set:scroll');const uO=-0x1*0x1f43+-0x217d+-0x2*-0x2065;class mO{constructor(){h(this,'enabled',!(-0x5e*0x67+-0x4*0x8d1+0x4916)),h(this,'horizontal'),h(this,'vertical'),h(this,'scrollMode'),h(this,'bounceAmou'+'nt'),h(this,'friction'),h(this,'dragThresh'+'old',uO),h(this,'useMouseWh'+'eel',!(-0x1861+0x113e+0x9*0xcb)),h(this,'mouseWheel'+'Sensitivit'+'y',new J(-0x1421+-0x12fa+0x271c,0x158e+0x1c55+-0x31e2)),h(this,'horizontal'+'ScrollbarV'+'isibility',0x21f2+0x1606+-0x9*0x638),h(this,'verticalSc'+'rollbarVis'+'ibility',-0xf62+0x1c86+0x4*-0x349),h(this,'viewportEn'+'tity',null),h(this,'contentEnt'+'ity',null),h(this,'horizontal'+'ScrollbarE'+'ntity',null),h(this,'verticalSc'+'rollbarEnt'+'ity',null);}}const xg=[{'name':'enabled','type':'boolean'},{'name':'horizontal','type':'boolean'},{'name':'vertical','type':'boolean'},{'name':'scrollMode','type':'number'},{'name':'bounceAmou'+'nt','type':'number'},{'name':'friction','type':'number'},{'name':'dragThresh'+'old','type':'number'},{'name':'useMouseWh'+'eel','type':'boolean'},{'name':'mouseWheel'+'Sensitivit'+'y','type':'vec2'},{'name':'horizontal'+'ScrollbarV'+'isibility','type':'number'},{'name':'verticalSc'+'rollbarVis'+'ibility','type':'number'}],pO=-0x1*-0x1127+-0x1d71+-0x107*-0xc;class _O extends lt{constructor(_0x4465ba){super(_0x4465ba),this['id']='scrollview',this['ComponentT'+'ype']=yv,this['DataType']=mO,this['schema']=xg,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x59f10f,_0x17a13f,_0x7501cb){_0x17a13f['dragThresh'+'old']===void(0x253d+-0x1e16*0x1+-0x727)&&(_0x17a13f['dragThresh'+'old']=pO),_0x17a13f['useMouseWh'+'eel']===void(-0xc9a+0x2*0xb74+-0xa4e)&&(_0x17a13f['useMouseWh'+'eel']=!(0x1e44+-0x1fe7*-0x1+-0x3e2b)),_0x17a13f['mouseWheel'+'Sensitivit'+'y']===void(0xb03+-0x3*0xb2+-0x8ed)&&(_0x17a13f['mouseWheel'+'Sensitivit'+'y']=new J(0x17a0+0x1c5d+-0x33fc,0xaec+0x22f3+-0x2dde)),super['initialize'+'ComponentD'+'ata'](_0x59f10f,_0x17a13f,xg),_0x59f10f['viewportEn'+'tity']=_0x17a13f['viewportEn'+'tity'],_0x59f10f['contentEnt'+'ity']=_0x17a13f['contentEnt'+'ity'],_0x59f10f['horizontal'+'ScrollbarE'+'ntity']=_0x17a13f['horizontal'+'ScrollbarE'+'ntity'],_0x59f10f['verticalSc'+'rollbarEnt'+'ity']=_0x17a13f['verticalSc'+'rollbarEnt'+'ity'];}['onUpdate'](_0x3c900f){const _0x5f2cf6=this['store'];for(const _0x1771db in _0x5f2cf6){const _0x3c2bae=_0x5f2cf6[_0x1771db]['entity'],_0x36874e=_0x3c2bae['scrollview'];_0x36874e['enabled']&&_0x3c2bae['enabled']&&_0x36874e['onUpdate']();}}['_onRemoveC'+'omponent'](_0x231be1,_0x3988aa){_0x3988aa['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class vv extends we{constructor(_0x50c913,_0x513195){super(_0x50c913,_0x513195),h(this,'_handleEnt'+'ity',null),h(this,'_evtHandle'+'EntityElem'+'entAdd',null),h(this,'_evtHandle'+'EntityChan'+'ges',[]),this['_toggleLif'+'ecycleList'+'eners']('on');}get['data'](){const _0x31e8ae=this['system']['store'][this['entity']['getGuid']()];return _0x31e8ae?_0x31e8ae['data']:null;}set['enabled'](_0xc2e50b){this['_setValue']('enabled',_0xc2e50b);}get['enabled'](){return this['data']['enabled'];}set['orientatio'+'n'](_0x3e45e){this['_setValue']('orientatio'+'n',_0x3e45e);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['value'](_0x52cee0){this['_setValue']('value',_0x52cee0);}get['value'](){return this['data']['value'];}set['handleSize'](_0x461bbc){this['_setValue']('handleSize',_0x461bbc);}get['handleSize'](){return this['data']['handleSize'];}set['handleEnti'+'ty'](_0x8e919){if(this['_handleEnt'+'ity']===_0x8e919)return;const _0x1662e0=typeof _0x8e919=='string';this['_handleEnt'+'ity']&&_0x1662e0&&this['_handleEnt'+'ity']['getGuid']()===_0x8e919||(this['_handleEnt'+'ity']&&this['_handleEnt'+'ityUnsubsc'+'ribe'](),_0x8e919 instanceof He?this['_handleEnt'+'ity']=_0x8e919:_0x1662e0?this['_handleEnt'+'ity']=this['system']['app']['getEntityF'+'romIndex'](_0x8e919)||null:this['_handleEnt'+'ity']=null,this['_handleEnt'+'ity']&&this['_handleEnt'+'itySubscri'+'be'](),this['_handleEnt'+'ity']?this['data']['handleEnti'+'ty']=this['_handleEnt'+'ity']['getGuid']():_0x1662e0&&_0x8e919&&(this['data']['handleEnti'+'ty']=_0x8e919));}get['handleEnti'+'ty'](){return this['_handleEnt'+'ity'];}['_setValue'](_0x1d92b0,_0x1ddda3){const _0x59f951=this['data'],_0x5e4d16=_0x59f951[_0x1d92b0];_0x59f951[_0x1d92b0]=_0x1ddda3,this['fire']('set',_0x1d92b0,_0x5e4d16,_0x1ddda3);}['_toggleLif'+'ecycleList'+'eners'](_0x103a8a){this[_0x103a8a]('set_value',this['_onSetValu'+'e'],this),this[_0x103a8a]('set_handle'+'Size',this['_onSetHand'+'leSize'],this),this[_0x103a8a]('set_orient'+'ation',this['_onSetOrie'+'ntation'],this);}['_handleEnt'+'itySubscri'+'be'](){this['_evtHandle'+'EntityElem'+'entAdd']=this['_handleEnt'+'ity']['on']('element:ad'+'d',this['_onHandleE'+'lementGain'],this),this['_handleEnt'+'ity']['element']&&this['_onHandleE'+'lementGain']();}['_handleEnt'+'ityUnsubsc'+'ribe'](){var _0x1479ee,_0x2b663e;(_0x1479ee=this['_evtHandle'+'EntityElem'+'entAdd'])==null||_0x1479ee['off'](),this['_evtHandle'+'EntityElem'+'entAdd']=null,(_0x2b663e=this['_handleEnt'+'ity'])!=null&&_0x2b663e['element']&&this['_onHandleE'+'lementLose']();}['_handleEnt'+'ityElement'+'Subscribe'](){const _0x5834f6=this['_handleEnt'+'ity']['element'],_0xdc3c14=this['_evtHandle'+'EntityChan'+'ges'];_0xdc3c14['push'](_0x5834f6['once']('beforeremo'+'ve',this['_onHandleE'+'lementLose'],this)),_0xdc3c14['push'](_0x5834f6['on']('set:anchor',this['_onSetHand'+'leAlignmen'+'t'],this)),_0xdc3c14['push'](_0x5834f6['on']('set:margin',this['_onSetHand'+'leAlignmen'+'t'],this)),_0xdc3c14['push'](_0x5834f6['on']('set:pivot',this['_onSetHand'+'leAlignmen'+'t'],this));}['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](){for(let _0x5a26bc=-0x2*0x9d3+0x1*-0xa99+0x1e3f;_0x5a26bc<this['_evtHandle'+'EntityChan'+'ges']['length'];_0x5a26bc++)this['_evtHandle'+'EntityChan'+'ges'][_0x5a26bc]['off']();this['_evtHandle'+'EntityChan'+'ges']['length']=0x1575+-0x8b*-0x3e+-0x371f;}['_onHandleE'+'lementGain'](){this['_handleEnt'+'ityElement'+'Subscribe'](),this['_destroyDr'+'agHelper'](),this['_handleDra'+'gHelper']=new xo(this['_handleEnt'+'ity']['element'],this['_getAxis']()),this['_handleDra'+'gHelper']['on']('drag:move',this['_onHandleD'+'rag'],this),this['_updateHan'+'dlePositio'+'nAndSize']();}['_onHandleE'+'lementLose'](){this['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](),this['_destroyDr'+'agHelper']();}['_onHandleD'+'rag'](_0x3e1741){this['_handleEnt'+'ity']&&this['enabled']&&this['entity']['enabled']&&(this['value']=this['_handlePos'+'itionToScr'+'ollValue'](_0x3e1741[this['_getAxis']()]));}['_onSetValu'+'e'](_0x2214bd,_0x198fce,_0x4eed6e){Math['abs'](_0x4eed6e-_0x198fce)>0x19ad+0x17ed+-0x319a+0.00001&&(this['data']['value']=Y['clamp'](_0x4eed6e,-0x542+-0x2*-0x85f+-0xb7c,-0x11c2+0x19bb+-0x7f8),this['_updateHan'+'dlePositio'+'nAndSize'](),this['fire']('set:value',this['data']['value']));}['_onSetHand'+'leSize'](_0x2982d7,_0x39530f,_0x5630f7){Math['abs'](_0x5630f7-_0x39530f)>0x1d86+-0x373*-0x5+-0x2ec5+0.00001&&(this['data']['handleSize']=Y['clamp'](_0x5630f7,-0x59*-0x51+0x16c9+-0x32f2*0x1,-0x1*0x21d9+0x2d7*0x1+0x1f03),this['_updateHan'+'dlePositio'+'nAndSize']());}['_onSetHand'+'leAlignmen'+'t'](){this['_updateHan'+'dlePositio'+'nAndSize']();}['_onSetOrie'+'ntation'](_0x41ee24,_0x1ec6d0,_0x100eed){var _0x44a5f9;_0x100eed!==_0x1ec6d0&&((_0x44a5f9=this['_handleEnt'+'ity'])!=null&&_0x44a5f9['element'])&&(this['_handleEnt'+'ity']['element'][this['_getOpposi'+'teDimensio'+'n']()]=-0x9df*0x3+-0x1*-0x129a+0xb03);}['_updateHan'+'dlePositio'+'nAndSize'](){const _0x459d99=this['_handleEnt'+'ity'],_0x58eda5=_0x459d99==null?void(-0x23e*0x11+-0x3*0x9+0x5f*0x67):_0x459d99['element'];if(_0x459d99){const _0x2fa7ff=_0x459d99['getLocalPo'+'sition']();_0x2fa7ff[this['_getAxis']()]=this['_getHandle'+'Position'](),_0x459d99['setLocalPo'+'sition'](_0x2fa7ff);}_0x58eda5&&(_0x58eda5[this['_getDimens'+'ion']()]=this['_getHandle'+'Length']());}['_handlePos'+'itionToScr'+'ollValue'](_0x913d6e){return _0x913d6e*this['_getSign']()/this['_getUsable'+'TrackLengt'+'h']();}['_scrollVal'+'ueToHandle'+'Position'](_0x1ea20b){return _0x1ea20b*this['_getSign']()*this['_getUsable'+'TrackLengt'+'h']();}['_getUsable'+'TrackLengt'+'h'](){return Math['max'](this['_getTrackL'+'ength']()-this['_getHandle'+'Length'](),0x10ed*-0x1+-0x1*0x6f1+0x1*0x17de+0.001);}['_getTrackL'+'ength'](){return this['entity']['element']?this['orientatio'+'n']===be?this['entity']['element']['calculated'+'Width']:this['entity']['element']['calculated'+'Height']:0xa67+-0x156+-0x911;}['_getHandle'+'Length'](){return this['_getTrackL'+'ength']()*this['handleSize'];}['_getHandle'+'Position'](){return this['_scrollVal'+'ueToHandle'+'Position'](this['value']);}['_getSign'](){return this['orientatio'+'n']===be?0x1a5e+-0x2*-0x37+-0x1acb:-(0x3*0x547+0x1*-0xd3+-0xf01);}['_getAxis'](){return this['orientatio'+'n']===be?'x':'y';}['_getDimens'+'ion'](){return this['orientatio'+'n']===be?'width':'height';}['_getOpposi'+'teDimensio'+'n'](){return this['orientatio'+'n']===be?'height':'width';}['_destroyDr'+'agHelper'](){this['_handleDra'+'gHelper']&&this['_handleDra'+'gHelper']['destroy']();}['_setHandle'+'DraggingEn'+'abled'](_0x1c433f){this['_handleDra'+'gHelper']&&(this['_handleDra'+'gHelper']['enabled']=_0x1c433f);}['onEnable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0xab2+-0xeb2+0xcb2*0x2));}['onDisable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0x601+-0x1*-0x246b+-0x207*0xf));}['onRemove'](){this['_destroyDr'+'agHelper'](),this['_toggleLif'+'ecycleList'+'eners']('off');}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x49c79f,_0x42a4ea){_0x49c79f['handleEnti'+'ty']&&(this['handleEnti'+'ty']=_0x42a4ea[_0x49c79f['handleEnti'+'ty']['getGuid']()]);}}h(vv,'EVENT_SETV'+'ALUE','set:value');class gO{constructor(){h(this,'enabled',!(-0x8b0+0x25a+0x32b*0x2)),h(this,'orientatio'+'n',be),h(this,'value',-0x1*-0x2af+-0x17*-0x12a+-0x1d75),h(this,'handleSize',-0x191c+-0x1cb5+-0x257*-0x17),h(this,'handleEnti'+'ty',null);}}const Tg=[{'name':'enabled','type':'boolean'},{'name':'orientatio'+'n','type':'number'},{'name':'value','type':'number'},{'name':'handleSize','type':'number'}];class SO extends lt{constructor(_0x261004){super(_0x261004),this['id']='scrollbar',this['ComponentT'+'ype']=vv,this['DataType']=gO,this['schema']=Tg,this['on']('add',this['_onAddComp'+'onent'],this),this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x218267,_0x2118a,_0x33507c){super['initialize'+'ComponentD'+'ata'](_0x218267,_0x2118a,Tg),_0x218267['handleEnti'+'ty']=_0x2118a['handleEnti'+'ty'];}['_onAddComp'+'onent'](_0x1adc4c){_0x1adc4c['fire']('scrollbar:'+'add');}['_onRemoveC'+'omponent'](_0x26e046,_0x261355){_0x261355['onRemove']();}}const yO={'volume':0x0,'pitch':0x0,'loop':!(0x1df*-0x14+-0x8b3*-0x1+0x1cba),'startTime':0x0,'duration':0x0,'position':new I(),'maxDistance':0x0,'refDistance':0x0,'rollOffFactor':0x0,'distanceModel':0x0,'onPlay':null,'onPause':null,'onResume':null,'onStop':null,'onEnd':null};class Oi extends pe{constructor(_0x46974b,_0xd4e19f='Untitled',_0x4a0332={}){super(),h(this,'name'),h(this,'instances',[]),(this['_component']=_0x46974b,this['_assets']=_0x46974b['system']['app']['assets'],this['_manager']=_0x46974b['system']['manager'],this['name']=_0xd4e19f,this['_volume']=_0x4a0332['volume']!==void(0x1*-0x187b+0x1*0x1d37+0x12f*-0x4)?Y['clamp'](Number(_0x4a0332['volume'])||-0xc9*0x25+0x24b*-0x1+0x1f58,-0x10c1+0x1e08+0x46d*-0x3,-0x1d94+-0xf4a+0x2cdf):0x9*0x25b+0x10dd*-0x1+-0x1*0x455,this['_pitch']=_0x4a0332['pitch']!==void(-0x7*0x515+-0x8bf*-0x2+-0x1215*-0x1)?Math['max'](-0x1*0xf05+0x61*-0x12+-0x1*-0x15d7+0.01,Number(_0x4a0332['pitch'])||-0x1a58+-0x2c5+0x1d1d):-0x1358*-0x1+0x823*-0x1+0x4*-0x2cd,this['_loop']=!!(_0x4a0332['loop']!==void(0x311*-0x5+-0x1692+0x1f*0x139)&&_0x4a0332['loop']),this['_duration']=_0x4a0332['duration']>0x29d*-0x6+0x1265*0x1+-0x2b7?_0x4a0332['duration']:null,this['_startTime']=Math['max'](-0x12fc+0xe6b*0x1+0x491,Number(_0x4a0332['startTime'])||0x39*0x70+0x1032+-0x2922),this['_overlap']=!!_0x4a0332['overlap'],this['_autoPlay']=!!_0x4a0332['autoPlay'],this['_firstNode']=null,this['_lastNode']=null,this['_asset']=_0x4a0332['asset'],this['_asset']instanceof me&&(this['_asset']=this['_asset']['id']),this['_onInstanc'+'ePlayHandl'+'er']=this['_onInstanc'+'ePlay']['bind'](this),this['_onInstanc'+'ePauseHand'+'ler']=this['_onInstanc'+'ePause']['bind'](this),this['_onInstanc'+'eResumeHan'+'dler']=this['_onInstanc'+'eResume']['bind'](this),this['_onInstanc'+'eStopHandl'+'er']=this['_onInstanc'+'eStop']['bind'](this),this['_onInstanc'+'eEndHandle'+'r']=this['_onInstanc'+'eEnd']['bind'](this));}['play'](_0x1e76e2){if(this['overlap']||this['stop'](),!this['isLoaded']&&!this['_hasAsset']()){M['warn']('Trying\x20to\x20'+'play\x20Sound'+'Slot\x20'+this['name']+('\x20but\x20it\x20is'+'\x20not\x20loade'+'d\x20and\x20does'+'n\x27t\x20have\x20a'+'n\x20asset.'));return;}let _0x404163=_0x1e76e2;if(_0x404163||(_0x404163=this['_createIns'+'tance'](),this['instances']['push'](_0x404163)),this['isLoaded'])_0x404163['play']();else{const _0x57dab1=function(_0x14573f){const _0x4b594c=_0x404163['_playWhenL'+'oaded'];_0x404163['sound']=_0x14573f,_0x4b594c&&_0x404163['play']();};this['off']('load',_0x57dab1),this['once']('load',_0x57dab1),this['load']();}return _0x404163;}['pause'](){let _0x54bb29=!(-0xe2*-0xd+-0x1c51*0x1+0x10d8);const _0x2fa07e=this['instances'];for(let _0x1d1750=0x73e+0xc*-0x29a+-0x2*-0xbfd,_0x48c1f5=_0x2fa07e['length'];_0x1d1750<_0x48c1f5;_0x1d1750++)_0x2fa07e[_0x1d1750]['pause']()&&(_0x54bb29=!(0x710+0xd20+-0x1430));return _0x54bb29;}['resume'](){let _0x4eda87=!(-0x73c*0x5+0x1318*-0x2+-0x4a5d*-0x1);const _0x3d33de=this['instances'];for(let _0x2bcea7=-0xb*0x2a2+-0xd*0x1f+-0x1e89*-0x1,_0x581bf6=_0x3d33de['length'];_0x2bcea7<_0x581bf6;_0x2bcea7++)_0x3d33de[_0x2bcea7]['resume']()&&(_0x4eda87=!(0x62d+-0xe71*0x2+0x16b5));return _0x4eda87;}['stop'](){let _0x1dc41c=!(-0xcb9+0x251d+-0x1863);const _0x54fcc5=this['instances'];let _0x2025bd=_0x54fcc5['length'];for(;_0x2025bd--;)_0x54fcc5[_0x2025bd]['stop'](),_0x1dc41c=!(0x230+-0x35*0xad+0x21a1);return _0x54fcc5['length']=-0x4*0x20e+-0x1071*-0x2+-0x18aa,_0x1dc41c;}['load'](){if(!this['_hasAsset']())return;const _0x1c7b04=this['_assets']['get'](this['_asset']);if(!_0x1c7b04){this['_assets']['off']('add:'+this['_asset'],this['_onAssetAd'+'d'],this),this['_assets']['once']('add:'+this['_asset'],this['_onAssetAd'+'d'],this);return;}if(_0x1c7b04['off']('remove',this['_onAssetRe'+'moved'],this),_0x1c7b04['on']('remove',this['_onAssetRe'+'moved'],this),!_0x1c7b04['resource']){_0x1c7b04['off']('load',this['_onAssetLo'+'ad'],this),_0x1c7b04['once']('load',this['_onAssetLo'+'ad'],this),this['_assets']['load'](_0x1c7b04);return;}this['fire']('load',_0x1c7b04['resource']);}['setExterna'+'lNodes'](_0x867943,_0x40b422){if(!_0x867943){console['error']('The\x20firstN'+'ode\x20must\x20h'+'ave\x20a\x20vali'+'d\x20AudioNod'+'e');return;}if(_0x40b422||(_0x40b422=_0x867943),this['_firstNode']=_0x867943,this['_lastNode']=_0x40b422,!this['_overlap']){const _0x178601=this['instances'];for(let _0x497d0c=-0xad+0x11f*0x1b+0x2*-0xecc,_0x2608cb=_0x178601['length'];_0x497d0c<_0x2608cb;_0x497d0c++)_0x178601[_0x497d0c]['setExterna'+'lNodes'](_0x867943,_0x40b422);}}['clearExter'+'nalNodes'](){if(this['_firstNode']=null,this['_lastNode']=null,!this['_overlap']){const _0x4a623f=this['instances'];for(let _0x3bea4a=0x156e*0x1+-0x24ad+0xf3f,_0x3fcd6d=_0x4a623f['length'];_0x3bea4a<_0x3fcd6d;_0x3bea4a++)_0x4a623f[_0x3bea4a]['clearExter'+'nalNodes']();}}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_hasAsset'](){return this['_asset']!=null;}['_createIns'+'tance'](){let _0x58ac53=null;const _0x506232=this['_component'];let _0x3f406a=null;if(this['_hasAsset']()){const _0x170eb1=this['_assets']['get'](this['_asset']);_0x170eb1&&(_0x3f406a=_0x170eb1['resource']);}const _0x20d914=yO;return _0x20d914['volume']=this['_volume']*_0x506232['volume'],_0x20d914['pitch']=this['_pitch']*_0x506232['pitch'],_0x20d914['loop']=this['_loop'],_0x20d914['startTime']=this['_startTime'],_0x20d914['duration']=this['_duration'],_0x20d914['onPlay']=this['_onInstanc'+'ePlayHandl'+'er'],_0x20d914['onPause']=this['_onInstanc'+'ePauseHand'+'ler'],_0x20d914['onResume']=this['_onInstanc'+'eResumeHan'+'dler'],_0x20d914['onStop']=this['_onInstanc'+'eStopHandl'+'er'],_0x20d914['onEnd']=this['_onInstanc'+'eEndHandle'+'r'],_0x506232['positional']?(_0x20d914['position']['copy'](_0x506232['entity']['getPositio'+'n']()),_0x20d914['maxDistanc'+'e']=_0x506232['maxDistanc'+'e'],_0x20d914['refDistanc'+'e']=_0x506232['refDistanc'+'e'],_0x20d914['rollOffFac'+'tor']=_0x506232['rollOffFac'+'tor'],_0x20d914['distanceMo'+'del']=_0x506232['distanceMo'+'del'],_0x58ac53=new Va(this['_manager'],_0x3f406a,_0x20d914)):_0x58ac53=new Ss(this['_manager'],_0x3f406a,_0x20d914),this['_firstNode']&&_0x58ac53['setExterna'+'lNodes'](this['_firstNode'],this['_lastNode']),_0x58ac53;}['_onInstanc'+'ePlay'](_0x7f8b7a){this['fire']('play',_0x7f8b7a),this['_component']['fire']('play',this,_0x7f8b7a);}['_onInstanc'+'ePause'](_0x5d9fa9){this['fire']('pause',_0x5d9fa9),this['_component']['fire']('pause',this,_0x5d9fa9);}['_onInstanc'+'eResume'](_0x3099a1){this['fire']('resume',_0x3099a1),this['_component']['fire']('resume',this,_0x3099a1);}['_onInstanc'+'eStop'](_0x3fe107){const _0x1bad71=this['instances']['indexOf'](_0x3fe107);_0x1bad71!==-(0x317*0x9+-0x9cb+-0x3*0x601)&&this['instances']['splice'](_0x1bad71,0x4*0x131+0x1181*-0x1+0xcbe),this['fire']('stop',_0x3fe107),this['_component']['fire']('stop',this,_0x3fe107);}['_onInstanc'+'eEnd'](_0x4ec0e3){const _0x51f67b=this['instances']['indexOf'](_0x4ec0e3);_0x51f67b!==-(-0xaaf+-0x1*0x557+-0x1007*-0x1)&&this['instances']['splice'](_0x51f67b,0x83*0x19+-0x56f*0x1+-0x75b),this['fire']('end',_0x4ec0e3),this['_component']['fire']('end',this,_0x4ec0e3);}['_onAssetAd'+'d'](_0x2b2106){this['load']();}['_onAssetLo'+'ad'](_0x2466d6){this['load']();}['_onAssetRe'+'moved'](_0x11b192){_0x11b192['off']('remove',this['_onAssetRe'+'moved'],this),this['_assets']['off']('add:'+_0x11b192['id'],this['_onAssetAd'+'d'],this),this['stop']();}['updatePosi'+'tion'](_0x214690){const _0x1d0b84=this['instances'];for(let _0x8a84a=-0x65b+-0x101*0x6+0xc61,_0xb7bd78=_0x1d0b84['length'];_0x8a84a<_0xb7bd78;_0x8a84a++)_0x1d0b84[_0x8a84a]['position']=_0x214690;}set['asset'](_0x246a46){const _0x5c33b0=this['_asset'];if(_0x5c33b0){this['_assets']['off']('add:'+_0x5c33b0,this['_onAssetAd'+'d'],this);const _0x5102ff=this['_assets']['get'](_0x5c33b0);_0x5102ff&&_0x5102ff['off']('remove',this['_onAssetRe'+'moved'],this);}this['_asset']=_0x246a46,this['_asset']instanceof me&&(this['_asset']=this['_asset']['id']),this['_hasAsset']()&&this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['load']();}get['asset'](){return this['_asset'];}set['autoPlay'](_0x4d9a6b){this['_autoPlay']=!!_0x4d9a6b;}get['autoPlay'](){return this['_autoPlay'];}set['duration'](_0x596dcc){if(this['_duration']=Math['max'](-0x1dd4+0xedc+0xef8,Number(_0x596dcc)||-0x1958*0x1+0x903+0x1055)||null,!this['_overlap']){const _0x367ba5=this['instances'];for(let _0xfcaba4=-0x4*-0x562+-0x4*-0xd0+-0xc64*0x2,_0x4b34fb=_0x367ba5['length'];_0xfcaba4<_0x4b34fb;_0xfcaba4++)_0x367ba5[_0xfcaba4]['duration']=this['_duration'];}}get['duration'](){let _0x1398b0=0x1*0x33e+0x19b3+-0x1cf1;if(this['_hasAsset']()){const _0x315453=this['_assets']['get'](this['_asset']);_0x1398b0=_0x315453!=null&&_0x315453['resource']?_0x315453['resource']['duration']:-0x1553+0x108d*-0x2+-0x366d*-0x1;}return this['_duration']!=null?this['_duration']%(_0x1398b0||0x111d+-0x2504+-0x4*-0x4fa):_0x1398b0;}get['isLoaded'](){if(this['_hasAsset']()){const _0x1b6a5a=this['_assets']['get'](this['_asset']);if(_0x1b6a5a)return!!_0x1b6a5a['resource'];}return!(0x1f77+-0x1cae*0x1+-0x8*0x59);}get['isPaused'](){const _0x2ea826=this['instances'],_0x3c6faf=_0x2ea826['length'];if(_0x3c6faf===-0xa7*0x26+-0x1b2f+-0xf*-0x377)return!(-0x1*0x87c+-0xa25+-0x5*-0x3ba);for(let _0x4a198d=-0x8f0+0xe65+-0x7f*0xb;_0x4a198d<_0x3c6faf;_0x4a198d++)if(!_0x2ea826[_0x4a198d]['isPaused'])return!(0x170c+0x30*0x5c+0x284b*-0x1);return!(-0x17*0xa6+-0x206+-0x2*-0x878);}get['isPlaying'](){const _0x57ca4f=this['instances'];for(let _0x4e4fd2=-0xe1d*-0x1+0x1d*0xe9+-0x2882,_0x120572=_0x57ca4f['length'];_0x4e4fd2<_0x120572;_0x4e4fd2++)if(_0x57ca4f[_0x4e4fd2]['isPlaying'])return!(-0x6a*-0x12+-0x3*0x982+0x1512);return!(-0x13a8*-0x1+-0xb7e+0x1*-0x829);}get['isStopped'](){const _0xbae9bc=this['instances'];for(let _0x195b4a=-0x2*-0xf51+-0x3ac+0x22*-0xcb,_0x1230ad=_0xbae9bc['length'];_0x195b4a<_0x1230ad;_0x195b4a++)if(!_0xbae9bc[_0x195b4a]['isStopped'])return!(0x5d5+0x1cea+-0x22be);return!(0x18cd+0x1*0xd0f+-0x25dc);}set['loop'](_0x27ab9f){this['_loop']=!!_0x27ab9f;const _0x222c1d=this['instances'];for(let _0x592c4b=0xfcc+0x1*-0x1b53+0xb87,_0x1d7963=_0x222c1d['length'];_0x592c4b<_0x1d7963;_0x592c4b++)_0x222c1d[_0x592c4b]['loop']=this['_loop'];}get['loop'](){return this['_loop'];}set['overlap'](_0x3a7fb9){this['_overlap']=!!_0x3a7fb9;}get['overlap'](){return this['_overlap'];}set['pitch'](_0x22882f){if(this['_pitch']=Math['max'](Number(_0x22882f)||-0x1ba1+-0x7cf+0x5e8*0x6,-0x19f1+-0x1*0x559+-0xf*-0x216+0.01),!this['_overlap']){const _0x3c84b2=this['instances'];for(let _0x110f45=-0x1469+0x7*-0x12e+0x1cab,_0x579cdf=_0x3c84b2['length'];_0x110f45<_0x579cdf;_0x110f45++)_0x3c84b2[_0x110f45]['pitch']=this['pitch']*this['_component']['pitch'];}}get['pitch'](){return this['_pitch'];}set['startTime'](_0x2da2cc){if(this['_startTime']=Math['max'](0xd*-0x91+0xb43+-0x3e6,Number(_0x2da2cc)||0x2611+-0x26ca+0xb9),!this['_overlap']){const _0x568416=this['instances'];for(let _0x4ab2fd=-0x3*0xd5+0x1*0x2447+-0x21c8,_0x426e8b=_0x568416['length'];_0x4ab2fd<_0x426e8b;_0x4ab2fd++)_0x568416[_0x4ab2fd]['startTime']=this['_startTime'];}}get['startTime'](){return this['_startTime'];}set['volume'](_0x50e3bf){if(this['_volume']=Y['clamp'](Number(_0x50e3bf)||0xea*-0x1+0x3*0x187+-0x3*0x139,0x1*0x2333+-0x175b+-0xbd8,0x1a*0x116+-0xc83+-0xfb8),!this['_overlap']){const _0x2da059=this['instances'];for(let _0x46c9af=0xebe+-0x293*-0x1+-0x155*0xd,_0x35b59d=_0x2da059['length'];_0x46c9af<_0x35b59d;_0x46c9af++)_0x2da059[_0x46c9af]['volume']=this['_volume']*this['_component']['volume'];}}get['volume'](){return this['_volume'];}}h(Oi,'EVENT_PLAY','play'),h(Oi,'EVENT_PAUS'+'E','pause'),h(Oi,'EVENT_RESU'+'ME','resume'),h(Oi,'EVENT_STOP','stop'),h(Oi,'EVENT_END','end'),h(Oi,'EVENT_LOAD','load');class Nr extends we{constructor(){super(...arguments),h(this,'_volume',-0x4c2*0x4+0x1*0x1e0a+0x3*-0x3ab),h(this,'_pitch',-0x2600+0x41b*0x5+0x117a),h(this,'_positiona'+'l',!(-0x22fb+0x3*-0xace+0x4365)),h(this,'_refDistan'+'ce',0x2402+0x1e65+-0x4266),h(this,'_maxDistan'+'ce',-0x3a*0xb3+0x337d+0x1c21),h(this,'_rollOffFa'+'ctor',-0x1*-0x8eb+0xd4*0x3+-0xb66),h(this,'_distanceM'+'odel',om),h(this,'_slots',{}),h(this,'_playingBe'+'foreDisabl'+'e',{});}['_updateSou'+'ndInstance'+'s'](_0x1b99c2,_0x53e5cf,_0xfeadc2){const _0x47fc7e=this['_slots'];for(const _0x1377ea in _0x47fc7e){const _0x348659=_0x47fc7e[_0x1377ea];if(!_0x348659['overlap']){const _0x178975=_0x348659['instances'];for(let _0x528700=0x195b+0x1*0x1f35+-0x3890,_0x5e51a0=_0x178975['length'];_0x528700<_0x5e51a0;_0x528700++)_0x178975[_0x528700][_0x1b99c2]=_0xfeadc2?_0x348659[_0x1b99c2]*_0x53e5cf:_0x53e5cf;}}}set['distanceMo'+'del'](_0x80d12d){this['_distanceM'+'odel']=_0x80d12d,this['_updateSou'+'ndInstance'+'s']('distanceMo'+'del',_0x80d12d,!(-0xa6*-0x13+0x7b5*-0x5+0x2*0xd1c));}get['distanceMo'+'del'](){return this['_distanceM'+'odel'];}set['maxDistanc'+'e'](_0x198653){this['_maxDistan'+'ce']=_0x198653,this['_updateSou'+'ndInstance'+'s']('maxDistanc'+'e',_0x198653,!(-0x13c2+0xf6+0x12cd*0x1));}get['maxDistanc'+'e'](){return this['_maxDistan'+'ce'];}set['refDistanc'+'e'](_0x8b5026){this['_refDistan'+'ce']=_0x8b5026,this['_updateSou'+'ndInstance'+'s']('refDistanc'+'e',_0x8b5026,!(-0x2347+-0x29*-0x57+0x1*0x1559));}get['refDistanc'+'e'](){return this['_refDistan'+'ce'];}set['rollOffFac'+'tor'](_0x137039){this['_rollOffFa'+'ctor']=_0x137039,this['_updateSou'+'ndInstance'+'s']('rollOffFac'+'tor',_0x137039,!(-0x13d*0x5+-0x4*-0x8b1+0x1*-0x1c92));}get['rollOffFac'+'tor'](){return this['_rollOffFa'+'ctor'];}set['pitch'](_0x57ffb6){this['_pitch']=_0x57ffb6,this['_updateSou'+'ndInstance'+'s']('pitch',_0x57ffb6,!(0x2613+0x100a+0x1*-0x361d));}get['pitch'](){return this['_pitch'];}set['volume'](_0x1cea63){this['_volume']=_0x1cea63,this['_updateSou'+'ndInstance'+'s']('volume',_0x1cea63,!(-0x186+0x105*0xb+0x9b1*-0x1));}get['volume'](){return this['_volume'];}set['positional'](_0x39c2cc){this['_positiona'+'l']=_0x39c2cc;const _0x1de6a3=this['_slots'];for(const _0x102d88 in _0x1de6a3){const _0x4adf5c=_0x1de6a3[_0x102d88];if(!_0x4adf5c['overlap']){const _0x4d8310=_0x4adf5c['instances'],_0x3861b8=_0x4d8310['length'];for(let _0x46fb12=_0x3861b8-(-0x1*0x2646+0x18f8+0xd4f);_0x46fb12>=-0x1c15+0x25*-0x76+0x2d23;_0x46fb12--){const _0x1d1aa6=_0x4d8310[_0x46fb12]['isPlaying']||_0x4d8310[_0x46fb12]['isSuspende'+'d'],_0x316807=_0x4d8310[_0x46fb12]['currentTim'+'e'];_0x1d1aa6&&_0x4d8310[_0x46fb12]['stop']();const _0x3a20be=_0x4adf5c['_createIns'+'tance']();_0x1d1aa6&&(_0x3a20be['play'](),_0x3a20be['currentTim'+'e']=_0x316807),_0x4d8310['push'](_0x3a20be);}}}}get['positional'](){return this['_positiona'+'l'];}set['slots'](_0x141cc9){const _0x5421f7=this['_slots'];if(_0x5421f7){for(const _0x205330 in _0x5421f7)_0x5421f7[_0x205330]['stop']();}const _0x22c5a8={};for(const _0x312de9 in _0x141cc9)_0x141cc9[_0x312de9]instanceof Oi?_0x22c5a8[_0x141cc9[_0x312de9]['name']]=_0x141cc9[_0x312de9]:_0x141cc9[_0x312de9]['name']&&(_0x22c5a8[_0x141cc9[_0x312de9]['name']]=new Oi(this,_0x141cc9[_0x312de9]['name'],_0x141cc9[_0x312de9]));this['_slots']=_0x22c5a8,this['enabled']&&this['entity']['enabled']&&this['onEnable']();}get['slots'](){return this['_slots'];}['onEnable'](){if(this['system']['_inTools'])return;const _0x314d62=this['_slots'],_0x59c80d=this['_playingBe'+'foreDisabl'+'e'];for(const _0x48ec6d in _0x314d62){const _0x2b21ab=_0x314d62[_0x48ec6d];_0x2b21ab['autoPlay']&&_0x2b21ab['isStopped']?_0x2b21ab['play']():_0x59c80d[_0x48ec6d]?_0x2b21ab['resume']():_0x2b21ab['isLoaded']||_0x2b21ab['load']();}}['onDisable'](){const _0x2193db=this['_slots'],_0xaaa44c={};for(const _0x33deb7 in _0x2193db)_0x2193db[_0x33deb7]['overlap']||_0x2193db[_0x33deb7]['isPlaying']&&(_0x2193db[_0x33deb7]['pause'](),_0xaaa44c[_0x33deb7]=!(-0x32e+-0x1af2+0x1e20));this['_playingBe'+'foreDisabl'+'e']=_0xaaa44c;}['onRemove'](){this['off']();}['addSlot'](_0xd39b57,_0x2388ba){const _0xefb65e=this['_slots'];if(_0xefb65e[_0xd39b57])return M['warn']('A\x20sound\x20sl'+'ot\x20with\x20na'+'me\x20'+_0xd39b57+('\x20already\x20e'+'xists\x20on\x20E'+'ntity\x20')+this['entity']['path']),null;const _0x4439b4=new Oi(this,_0xd39b57,_0x2388ba);return _0xefb65e[_0xd39b57]=_0x4439b4,_0x4439b4['autoPlay']&&this['enabled']&&this['entity']['enabled']&&_0x4439b4['play'](),_0x4439b4;}['removeSlot'](_0x557e61){const _0x50de28=this['_slots'];_0x50de28[_0x557e61]&&(_0x50de28[_0x557e61]['stop'](),delete _0x50de28[_0x557e61]);}['slot'](_0x6249dd){return this['_slots'][_0x6249dd];}['_getSlotPr'+'operty'](_0x56f11d,_0x16f2ce){if(!this['enabled']||!this['entity']['enabled'])return;const _0x492716=this['_slots'][_0x56f11d];if(!_0x492716){M['warn']('Trying\x20to\x20'+'get\x20'+_0x16f2ce+('\x20from\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20')+_0x56f11d+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}return _0x492716[_0x16f2ce];}['isPlaying'](_0x45e657){return this['_getSlotPr'+'operty'](_0x45e657,'isPlaying')||!(-0x1855*0x1+0xa*-0x259+0x14*0x264);}['isLoaded'](_0x5e0c1c){return this['_getSlotPr'+'operty'](_0x5e0c1c,'isLoaded')||!(0x28*0x4+0x977*0x1+-0xa16);}['isPaused'](_0x20e1c3){return this['_getSlotPr'+'operty'](_0x20e1c3,'isPaused')||!(0xd71+-0x1*-0x939+-0x16a9);}['isStopped'](_0x42211b){return this['_getSlotPr'+'operty'](_0x42211b,'isStopped')||!(-0x15b*-0x6+-0xf71*0x1+0xc*0x9c);}['play'](_0x3c808e){if(!this['enabled']||!this['entity']['enabled'])return null;const _0x45c7c1=this['_slots'][_0x3c808e];return _0x45c7c1?_0x45c7c1['play']():(M['warn']('Trying\x20to\x20'+'play\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x3c808e+('\x20which\x20doe'+'s\x20not\x20exis'+'t')),null);}['pause'](_0x413392){const _0x4e8626=this['_slots'];if(_0x413392){const _0x41dc04=_0x4e8626[_0x413392];if(!_0x41dc04){M['warn']('Trying\x20to\x20'+'pause\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20'+_0x413392+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x41dc04['pause']();}else{for(const _0x33798b in _0x4e8626)_0x4e8626[_0x33798b]['pause']();}}['resume'](_0x1e1b5b){const _0x45b260=this['_slots'];if(_0x1e1b5b){const _0x193adf=_0x45b260[_0x1e1b5b];if(!_0x193adf){M['warn']('Trying\x20to\x20'+'resume\x20sou'+'nd\x20slot\x20wi'+'th\x20name\x20'+_0x1e1b5b+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x193adf['isPaused']&&_0x193adf['resume']();}else{for(const _0x5ccd7c in _0x45b260)_0x45b260[_0x5ccd7c]['resume']();}}['stop'](_0x1e360a){const _0x4d4cb8=this['_slots'];if(_0x1e360a){const _0x215e07=_0x4d4cb8[_0x1e360a];if(!_0x215e07){M['warn']('Trying\x20to\x20'+'stop\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x1e360a+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x215e07['stop']();}else{for(const _0x289548 in _0x4d4cb8)_0x4d4cb8[_0x289548]['stop']();}}}h(Nr,'EVENT_PLAY','play'),h(Nr,'EVENT_PAUS'+'E','pause'),h(Nr,'EVENT_RESU'+'ME','resume'),h(Nr,'EVENT_STOP','stop'),h(Nr,'EVENT_END','end');class vO{constructor(){this['enabled']=!(0x17ee+-0x7d4+-0x101a);}}const xv=['enabled'];class xO extends lt{constructor(_0x259c8d){super(_0x259c8d),this['id']='sound',this['ComponentT'+'ype']=Nr,this['DataType']=vO,this['schema']=xv,this['manager']=_0x259c8d['soundManag'+'er'],M['assert'](this['manager'],'SoundCompo'+'nentSystem'+'\x20cannot\x20be'+'\x20created\x20w'+'ithout\x20sou'+'nd\x20manager'),this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['volume'](_0x44edab){this['manager']['volume']=_0x44edab;}get['volume'](){return this['manager']['volume'];}get['context'](){return al()?this['manager']['context']:(M['warn']('WARNING:\x20A'+'udio\x20conte'+'xt\x20is\x20not\x20'+'supported\x20'+'on\x20this\x20br'+'owser'),null);}['initialize'+'ComponentD'+'ata'](_0x104d6d,_0x51b35a,_0x47c373){_0x47c373=['volume','pitch','positional','refDistanc'+'e','maxDistanc'+'e','rollOffFac'+'tor','distanceMo'+'del','slots'];for(let _0x7389e1=-0x15a9+-0x21e+0x17c7;_0x7389e1<_0x47c373['length'];_0x7389e1++)_0x51b35a['hasOwnProp'+'erty'](_0x47c373[_0x7389e1])&&(_0x104d6d[_0x47c373[_0x7389e1]]=_0x51b35a[_0x47c373[_0x7389e1]]);super['initialize'+'ComponentD'+'ata'](_0x104d6d,_0x51b35a,['enabled']);}['cloneCompo'+'nent'](_0x3d4531,_0x39ac0a){const _0x4fc3ed=_0x3d4531['sound'],_0x3aa025=_0x4fc3ed['slots'],_0x4c184f={};for(const _0x276deb in _0x3aa025){const _0x59cbdf=_0x3aa025[_0x276deb];_0x4c184f[_0x276deb]={'name':_0x59cbdf['name'],'volume':_0x59cbdf['volume'],'pitch':_0x59cbdf['pitch'],'loop':_0x59cbdf['loop'],'duration':_0x59cbdf['duration'],'startTime':_0x59cbdf['startTime'],'overlap':_0x59cbdf['overlap'],'autoPlay':_0x59cbdf['autoPlay'],'asset':_0x59cbdf['asset']};}const _0x5b70c1={'distanceModel':_0x4fc3ed['distanceMo'+'del'],'enabled':_0x4fc3ed['enabled'],'maxDistance':_0x4fc3ed['maxDistanc'+'e'],'pitch':_0x4fc3ed['pitch'],'positional':_0x4fc3ed['positional'],'refDistance':_0x4fc3ed['refDistanc'+'e'],'rollOffFactor':_0x4fc3ed['rollOffFac'+'tor'],'slots':_0x4c184f,'volume':_0x4fc3ed['volume']};return this['addCompone'+'nt'](_0x39ac0a,_0x5b70c1);}['onUpdate'](_0x3c6969){const _0x411880=this['store'];for(const _0x1c8230 in _0x411880)if(_0x411880['hasOwnProp'+'erty'](_0x1c8230)){const _0x289846=_0x411880[_0x1c8230]['entity'];if(_0x289846['enabled']){const _0xf9f0b2=_0x289846['sound'];if(_0xf9f0b2['enabled']&&_0xf9f0b2['positional']){const _0x180355=_0x289846['getPositio'+'n'](),_0x42e50d=_0xf9f0b2['slots'];for(const _0x13106c in _0x42e50d)_0x42e50d[_0x13106c]['updatePosi'+'tion'](_0x180355);}}}}['onBeforeRe'+'move'](_0x27557d,_0x2c1d88){const _0x3a4130=_0x2c1d88['slots'];for(const _0x37e17f in _0x3a4130)_0x3a4130[_0x37e17f]['overlap']||_0x3a4130[_0x37e17f]['stop']();_0x2c1d88['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Nr['prototype'],xv);const wg='simple',Eg='animated';class Fi extends pe{constructor(_0x14df39,_0x2662aa){super(),h(this,'_evtSetMes'+'hes',null),(this['_component']=_0x14df39,this['_frame']=-0x2*0x8f5+0x25a+0x18*0xa6,this['_sprite']=null,this['_spriteAss'+'et']=null,this['spriteAsse'+'t']=_0x2662aa['spriteAsse'+'t'],this['name']=_0x2662aa['name'],this['fps']=_0x2662aa['fps']||0x2e*-0x3+0x23d*0x1+-0x1b3,this['loop']=_0x2662aa['loop']||!(0x2*-0x64d+0x16b2+-0xa17),this['_playing']=!(0x2021+0x20bb+-0x40db*0x1),this['_paused']=!(-0x5e*-0x25+0xd37+-0x31*0x8c),this['_time']=-0x1*-0x244+0x647+0x51*-0x1b);}get['duration'](){if(this['_sprite']){const _0x57448b=this['fps']||Number['MIN_VALUE'];return this['_sprite']['frameKeys']['length']/Math['abs'](_0x57448b);}return 0x54b+0x21*0x67+-0x1292;}set['frame'](_0x40a2e6){this['_setFrame'](_0x40a2e6);const _0x699d3=this['fps']||Number['MIN_VALUE'];this['_setTime'](this['_frame']/_0x699d3);}get['frame'](){return this['_frame'];}get['isPaused'](){return this['_paused'];}get['isPlaying'](){return this['_playing'];}set['sprite'](_0x5604ca){var _0x237c13;if(this['_sprite']&&((_0x237c13=this['_evtSetMes'+'hes'])==null||_0x237c13['off'](),this['_evtSetMes'+'hes']=null,this['_sprite']['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['off']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['off']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_sprite']=_0x5604ca,this['_sprite']&&(this['_evtSetMes'+'hes']=this['_sprite']['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['on']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['on']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_component']['currentCli'+'p']===this){let _0x2812b0;!_0x5604ca||!_0x5604ca['atlas']?(_0x2812b0=this['_component']['_meshInsta'+'nce'],_0x2812b0&&(_0x2812b0['deletePara'+'meter']('texture_em'+'issiveMap'),_0x2812b0['deletePara'+'meter']('texture_op'+'acityMap')),this['_component']['_hideModel']()):(_0x5604ca['atlas']['texture']&&(_0x2812b0=this['_component']['_meshInsta'+'nce'],_0x2812b0&&(_0x2812b0['setParamet'+'er']('texture_em'+'issiveMap',_0x5604ca['atlas']['texture']),_0x2812b0['setParamet'+'er']('texture_op'+'acityMap',_0x5604ca['atlas']['texture'])),this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['_component']['_showModel']()),this['time']&&this['fps']?this['time']=this['time']:this['frame']=this['frame']);}}get['sprite'](){return this['_sprite'];}set['spriteAsse'+'t'](_0x2d55fa){const _0xa5331=this['_component']['system']['app']['assets'];let _0x4ce2b6=_0x2d55fa;if(_0x2d55fa instanceof me&&(_0x4ce2b6=_0x2d55fa['id']),this['_spriteAss'+'et']!==_0x4ce2b6){if(this['_spriteAss'+'et']){const _0x3909bb=_0xa5331['get'](this['_spriteAss'+'et']);_0x3909bb&&this['_unbindSpr'+'iteAsset'](_0x3909bb);}if(this['_spriteAss'+'et']=_0x4ce2b6,this['_spriteAss'+'et']){const _0x3fd381=_0xa5331['get'](this['_spriteAss'+'et']);_0x3fd381?this['_bindSprit'+'eAsset'](_0x3fd381):(this['sprite']=null,_0xa5331['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['time'](_0x4c3e6f){this['_setTime'](_0x4c3e6f),this['_sprite']?this['frame']=Math['min'](this['_sprite']['frameKeys']['length']-(-0x14*-0x8d+-0xd*-0x50+-0xf13),Math['floor'](this['_time']*Math['abs'](this['fps']))):this['frame']=-0xb9+0x1178+-0x10bf;}get['time'](){return this['_time'];}['_onSpriteA'+'ssetAdded'](_0x3816e1){this['_component']['system']['app']['assets']['off']('add:'+_0x3816e1['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x3816e1['id']&&this['_bindSprit'+'eAsset'](_0x3816e1);}['_bindSprit'+'eAsset'](_0x13ed53){_0x13ed53['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x13ed53['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x13ed53['resource']?this['_onSpriteA'+'ssetLoad'](_0x13ed53):this['_component']['system']['app']['assets']['load'](_0x13ed53);}['_unbindSpr'+'iteAsset'](_0x23842c){_0x23842c&&(_0x23842c['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x23842c['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x23842c['resource']&&!_0x23842c['resource']['atlas']&&this['_component']['system']['app']['assets']['off']('load:'+_0x23842c['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this));}['_onSpriteA'+'ssetLoad'](_0x210c60){if(!_0x210c60['resource'])this['sprite']=null;else{if(_0x210c60['resource']['atlas'])this['sprite']=_0x210c60['resource'];else{const _0x166350=_0x210c60['data']['textureAtl'+'asAsset'],_0x4d4af4=this['_component']['system']['app']['assets'];_0x4d4af4['off']('load:'+_0x166350,this['_onTexture'+'AtlasLoad'],this),_0x4d4af4['once']('load:'+_0x166350,this['_onTexture'+'AtlasLoad'],this);}}}['_onTexture'+'AtlasLoad'](_0x358e9d){const _0x523505=this['_spriteAss'+'et'];_0x523505 instanceof me?this['_onSpriteA'+'ssetLoad'](_0x523505):this['_onSpriteA'+'ssetLoad'](this['_component']['system']['app']['assets']['get'](_0x523505));}['_onSpriteA'+'ssetRemove'](_0x54b667){this['sprite']=null;}['_onSpriteM'+'eshesChang'+'e'](){this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['frame']);}['_onSpriteP'+'puChanged'](){this['_component']['currentCli'+'p']===this&&this['sprite']['renderMode']!==ei&&this['_component']['_showFrame'](this['frame']);}['_update'](_0x444fe8){if(this['fps']===-0x2*-0x73+-0x6*-0x62b+0x25e8*-0x1||!this['_playing']||this['_paused']||!this['_sprite'])return;const _0x24807f=this['fps']<0x1*0x490+0x1f51+-0x23e1?-(0x5b2*-0x5+-0x1382*0x1+0x2ffd):-0x1*0x849+-0x8e*-0x3b+-0x11*0x170,_0x10b04f=this['_time']+_0x444fe8*this['_component']['speed']*_0x24807f,_0x1dc6df=this['duration'],_0x297037=_0x10b04f>_0x1dc6df||_0x10b04f<-0x1f71*0x1+0x9d*0x3+0x1d9a;this['_setTime'](_0x10b04f);let _0x29f857=this['frame'];this['_sprite']?_0x29f857=Math['floor'](this['_sprite']['frameKeys']['length']*this['_time']/_0x1dc6df):_0x29f857=0x81*-0x23+0x7b*-0x37+0x18*0x1d6,_0x29f857!==this['_frame']&&this['_setFrame'](_0x29f857),_0x297037&&(this['loop']?(this['fire']('loop'),this['_component']['fire']('loop',this)):(this['_playing']=!(-0x196*-0x8+0x34*0x1f+-0x1*0x12fb),this['_paused']=!(0x173f+-0x1c9a+0x55c),this['fire']('end'),this['_component']['fire']('end',this)));}['_setTime'](_0x32e044){this['_time']=_0x32e044;const _0x2c3a98=this['duration'];this['_time']<-0x8e*-0xb+-0x7*0x269+0xac5?this['loop']?this['_time']=this['_time']%_0x2c3a98+_0x2c3a98:this['_time']=-0x17*-0x102+-0x29*-0xdf+0x1*-0x3ae5:this['_time']>_0x2c3a98&&(this['loop']?this['_time']%=_0x2c3a98:this['_time']=_0x2c3a98);}['_setFrame'](_0x5c5064){this['_sprite']?this['_frame']=Y['clamp'](_0x5c5064,0x7*0x10a+-0xf47*-0x2+-0xc9c*0x3,this['_sprite']['frameKeys']['length']-(0xc0a*-0x1+0x18b7*0x1+-0xcac)):this['_frame']=_0x5c5064,this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['_frame']);}['_destroy'](){if(this['_spriteAss'+'et']){const _0x4b53bc=this['_component']['system']['app']['assets'];this['_unbindSpr'+'iteAsset'](_0x4b53bc['get'](this['_spriteAss'+'et']));}this['_sprite']&&(this['sprite']=null),this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null);}['play'](){this['_playing']||(this['_playing']=!(-0xc3c+-0xf1*0x25+0x1*0x2f11),this['_paused']=!(-0x1ab9*0x1+0x1*-0x161+0x1c1b),this['frame']=0x2b*-0x5+-0x307+0x5*0xc6,this['fire']('play'),this['_component']['fire']('play',this));}['pause'](){!this['_playing']||this['_paused']||(this['_paused']=!(-0x51b*-0x1+-0x171d+0x5*0x39a),this['fire']('pause'),this['_component']['fire']('pause',this));}['resume'](){this['_paused']&&(this['_paused']=!(-0x7d7*0x2+0x85*0x1f+0xc*-0x9),this['fire']('resume'),this['_component']['fire']('resume',this));}['stop'](){this['_playing']&&(this['_playing']=!(-0x18a8+0x1088+-0x821*-0x1),this['_paused']=!(-0x6e5*-0x1+0x15c+-0x840),this['_time']=0x2367+0xdd5+-0x89*0x5c,this['frame']=0x47*-0x58+0x24db+-0xc73,this['fire']('stop'),this['_component']['fire']('stop',this));}}h(Fi,'EVENT_PLAY','play'),h(Fi,'EVENT_PAUS'+'E','pause'),h(Fi,'EVENT_RESU'+'ME','resume'),h(Fi,'EVENT_STOP','stop'),h(Fi,'EVENT_END','end'),h(Fi,'EVENT_LOOP','loop');const Ag='texture_em'+'issiveMap',bg='texture_op'+'acityMap',Cg='material_e'+'missive',Pg='material_o'+'pacity',TO='innerOffse'+'t',wO='outerScale',EO='atlasRect';class Ji extends we{constructor(_0x2e22cb,_0xa66236){super(_0x2e22cb,_0xa66236),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_type']=wg,this['_material']=_0x2e22cb['defaultMat'+'erial'],this['_color']=new ie(0x1*0x180f+-0x11e4+-0x315*0x2,-0x23*0xa7+-0x1*0x66f+0x1d45,-0x2*0xfda+-0x5e7+0x259c,0x1f*0xa7+-0x455*-0x4+0x42c*-0x9),this['_colorUnif'+'orm']=new Float32Array(0x476+-0x95c+-0x1a3*-0x3),this['_speed']=0x2662+-0x24dd+0x4*-0x61,this['_flipX']=!(0x9*-0x3b2+0x135*-0xa+0x37*0xd3),this['_flipY']=!(0x8f5*-0x2+-0x1f97+-0x18c1*-0x2),this['_width']=0xa3b+0x1e80+-0x28ba,this['_height']=0x1ab7+-0x159b+-0x1*0x51b,this['_drawOrder']=-0x35*0xab+0x1b*-0x167+-0x412*-0x12,this['_layers']=[Wi],this['_outerScal'+'e']=new J(0x1a*-0xb+0xf1b+-0x2*0x6fe,0x343+0x29*-0x47+0x81d),this['_outerScal'+'eUniform']=new Float32Array(-0x19*0xa+0x4e5*-0x2+0xac6),this['_innerOffs'+'et']=new ae(),this['_innerOffs'+'etUniform']=new Float32Array(-0x19e9+-0x1*0x1ff3+-0xe78*-0x4),this['_atlasRect']=new ae(),this['_atlasRect'+'Uniform']=new Float32Array(-0x20e*0x3+-0x19a9*-0x1+-0x137b),this['_batchGrou'+'pId']=-(-0x81b+0x14*-0x16+0x275*0x4),this['_batchGrou'+'p']=null,this['_node']=new He(),this['_model']=new $i(),this['_model']['graph']=this['_node'],this['_meshInsta'+'nce']=null,_0xa66236['addChild'](this['_model']['graph']),this['_model']['_entity']=_0xa66236,this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_addedMode'+'l']=!(-0xa32+0x254e+-0x1b1b),this['_autoPlayC'+'lip']=null,this['_clips']={},this['_defaultCl'+'ip']=new Fi(this,{'name':this['entity']['name'],'fps':0x0,'loop':!(0x11ba*-0x1+0x1*0x260f+-0x1454),'spriteAsset':null}),this['_currentCl'+'ip']=this['_defaultCl'+'ip']);}set['type'](_0x7ae496){this['_type']!==_0x7ae496&&(this['_type']=_0x7ae496,this['_type']===wg?(this['stop'](),this['_currentCl'+'ip']=this['_defaultCl'+'ip'],this['enabled']&&this['entity']['enabled']&&(this['_currentCl'+'ip']['frame']=this['frame'],this['_currentCl'+'ip']['sprite']?this['_showModel']():this['_hideModel']())):this['_type']===Eg&&(this['stop'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_currentCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['enabled']&&this['entity']['enabled']?this['_showModel']():this['_hideModel']()));}get['type'](){return this['_type'];}set['frame'](_0x12e00b){this['_currentCl'+'ip']['frame']=_0x12e00b;}get['frame'](){return this['_currentCl'+'ip']['frame'];}set['spriteAsse'+'t'](_0x538ab4){this['_defaultCl'+'ip']['spriteAsse'+'t']=_0x538ab4;}get['spriteAsse'+'t'](){return this['_defaultCl'+'ip']['_spriteAss'+'et'];}set['sprite'](_0x57a94c){this['_currentCl'+'ip']['sprite']=_0x57a94c;}get['sprite'](){return this['_currentCl'+'ip']['sprite'];}set['material'](_0x3dd6c0){this['_material']=_0x3dd6c0,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=_0x3dd6c0);}get['material'](){return this['_material'];}set['color'](_0x21462a){this['_color']['r']=_0x21462a['r'],this['_color']['g']=_0x21462a['g'],this['_color']['b']=_0x21462a['b'],this['_meshInsta'+'nce']&&(this['_colorUnif'+'orm'][-0x22a+-0x1132+-0x7*-0x2c4]=this['_color']['r'],this['_colorUnif'+'orm'][0x2*-0xd1a+-0x180c+0x3241]=this['_color']['g'],this['_colorUnif'+'orm'][0x62a+-0x1*-0xc61+0x1*-0x1289]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](Cg,this['_colorUnif'+'orm']));}get['color'](){return this['_color'];}set['opacity'](_0x16c0ba){this['_color']['a']=_0x16c0ba,this['_meshInsta'+'nce']&&this['_meshInsta'+'nce']['setParamet'+'er'](Pg,_0x16c0ba);}get['opacity'](){return this['_color']['a'];}set['clips'](_0x164ce5){if(!_0x164ce5){for(const _0x7c420d in this['_clips'])this['removeClip'](_0x7c420d);return;}for(const _0x1735bf in this['_clips']){let _0x4546af=!(0x995+-0x1729+0xd95);for(const _0x3bd116 in _0x164ce5)if(_0x164ce5[_0x3bd116]['name']===_0x1735bf){_0x4546af=!(0x1*-0x6c3+0x139f*0x1+-0xcdc),this['_clips'][_0x1735bf]['fps']=_0x164ce5[_0x3bd116]['fps'],this['_clips'][_0x1735bf]['loop']=_0x164ce5[_0x3bd116]['loop'],_0x164ce5[_0x3bd116]['hasOwnProp'+'erty']('sprite')?this['_clips'][_0x1735bf]['sprite']=_0x164ce5[_0x3bd116]['sprite']:_0x164ce5[_0x3bd116]['hasOwnProp'+'erty']('spriteAsse'+'t')&&(this['_clips'][_0x1735bf]['spriteAsse'+'t']=_0x164ce5[_0x3bd116]['spriteAsse'+'t']);break;}_0x4546af||this['removeClip'](_0x1735bf);}for(const _0x2c12d5 in _0x164ce5)this['_clips'][_0x164ce5[_0x2c12d5]['name']]||this['addClip'](_0x164ce5[_0x2c12d5]);this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['sprite'])&&this['_hideModel']();}get['clips'](){return this['_clips'];}get['currentCli'+'p'](){return this['_currentCl'+'ip'];}set['speed'](_0x13e31a){this['_speed']=_0x13e31a;}get['speed'](){return this['_speed'];}set['flipX'](_0x3e6687){this['_flipX']!==_0x3e6687&&(this['_flipX']=_0x3e6687,this['_updateTra'+'nsform']());}get['flipX'](){return this['_flipX'];}set['flipY'](_0x67d57){this['_flipY']!==_0x67d57&&(this['_flipY']=_0x67d57,this['_updateTra'+'nsform']());}get['flipY'](){return this['_flipY'];}set['width'](_0x3a91a0){_0x3a91a0!==this['_width']&&(this['_width']=_0x3a91a0,this['_outerScal'+'e']['x']=this['_width'],this['sprite']&&(this['sprite']['renderMode']===At||this['sprite']['renderMode']===Et)&&this['_updateTra'+'nsform']());}get['width'](){return this['_width'];}set['height'](_0x2c8581){_0x2c8581!==this['_height']&&(this['_height']=_0x2c8581,this['_outerScal'+'e']['y']=this['height'],this['sprite']&&(this['sprite']['renderMode']===At||this['sprite']['renderMode']===Et)&&this['_updateTra'+'nsform']());}get['height'](){return this['_height'];}set['batchGroup'+'Id'](_0x46335a){var _0x1543d9,_0x2114a2;if(this['_batchGrou'+'pId']===_0x46335a)return;const _0x2f8027=this['_batchGrou'+'pId'];this['_batchGrou'+'pId']=_0x46335a,this['entity']['enabled']&&_0x2f8027>=0x109*-0xd+0xd1*0x6+0x88f*0x1&&((_0x1543d9=this['system']['app']['batcher'])==null||_0x1543d9['remove'](mt['SPRITE'],_0x2f8027,this['entity'])),this['entity']['enabled']&&_0x46335a>=0xcd3*-0x2+0x2*-0x21c+0x2*0xeef?(_0x2114a2=this['system']['app']['batcher'])==null||_0x2114a2['insert'](mt['SPRITE'],_0x46335a,this['entity']):_0x2f8027>=-0x1*-0x7b5+-0x104e+0x1*0x899&&this['_currentCl'+'ip']&&this['_currentCl'+'ip']['sprite']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['autoPlayCl'+'ip'](_0x2685d6){this['_autoPlayC'+'lip']=_0x2685d6 instanceof Fi?_0x2685d6['name']:_0x2685d6,this['_tryAutoPl'+'ay']();}get['autoPlayCl'+'ip'](){return this['_autoPlayC'+'lip'];}set['drawOrder'](_0x364f1c){this['_drawOrder']=_0x364f1c,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['drawOrder']=_0x364f1c);}get['drawOrder'](){return this['_drawOrder'];}set['layers'](_0x2e8887){this['_addedMode'+'l']&&this['_hideModel'](),this['_layers']=_0x2e8887,this['_meshInsta'+'nce']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['layers'](){return this['_layers'];}get['aabb'](){return this['_meshInsta'+'nce']?this['_meshInsta'+'nce']['aabb']:null;}['onEnable'](){var _0x4e9187;const _0xbc9b80=this['system']['app'],_0x20f039=_0xbc9b80['scene'],_0x229a79=_0x20f039['layers'];this['_evtLayers'+'Changed']=_0x20f039['on']('set:layers',this['_onLayersC'+'hanged'],this),_0x229a79&&(this['_evtLayerA'+'dded']=_0x229a79['on']('add',this['_onLayerAd'+'ded'],this),this['_evtLayerR'+'emoved']=_0x229a79['on']('remove',this['_onLayerRe'+'moved'],this)),this['_showModel'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_batchGrou'+'pId']>=-0xd*-0x277+-0x12e6+-0x2a1*0x5&&((_0x4e9187=_0xbc9b80['batcher'])==null||_0x4e9187['insert'](mt['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDisable'](){var _0x3561c5,_0x9cdae,_0x13533c,_0x3000dc;const _0x1f1eeb=this['system']['app'],_0x267071=_0x1f1eeb['scene']['layers'];(_0x3561c5=this['_evtLayers'+'Changed'])==null||_0x3561c5['off'](),this['_evtLayers'+'Changed']=null,_0x267071&&((_0x9cdae=this['_evtLayerA'+'dded'])==null||_0x9cdae['off'](),this['_evtLayerA'+'dded']=null,(_0x13533c=this['_evtLayerR'+'emoved'])==null||_0x13533c['off'](),this['_evtLayerR'+'emoved']=null),this['stop'](),this['_hideModel'](),this['_batchGrou'+'pId']>=-0x1134+0x537*-0x2+0x1ba2&&((_0x3000dc=_0x1f1eeb['batcher'])==null||_0x3000dc['remove'](mt['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDestroy'](){var _0x11f3b4;this['_currentCl'+'ip']=null,this['_defaultCl'+'ip']&&(this['_defaultCl'+'ip']['_destroy'](),this['_defaultCl'+'ip']=null);for(const _0x128b91 in this['_clips'])this['_clips'][_0x128b91]['_destroy']();this['_clips']=null,this['_hideModel'](),this['_model']=null,(_0x11f3b4=this['_node'])==null||_0x11f3b4['remove'](),this['_node']=null,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=null,this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']=null);}['_showModel'](){if(this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x344c4e=[this['_meshInsta'+'nce']];for(let _0x56a5f0=0x1a2d+0x2*0xc0f+-0x324b,_0x39866b=this['_layers']['length'];_0x56a5f0<_0x39866b;_0x56a5f0++){const _0x547e0f=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x56a5f0]);_0x547e0f&&_0x547e0f['addMeshIns'+'tances'](_0x344c4e);}this['_addedMode'+'l']=!(-0x236c*-0x1+-0x1533+-0xe39);}['_hideModel'](){if(!this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x1603f8=[this['_meshInsta'+'nce']];for(let _0x3be52a=0xfb*0x25+0x170b+-0x6*0x9e3,_0x5d0155=this['_layers']['length'];_0x3be52a<_0x5d0155;_0x3be52a++){const _0x2f7960=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x3be52a]);_0x2f7960&&_0x2f7960['removeMesh'+'Instances'](_0x1603f8);}this['_addedMode'+'l']=!(0x25c2+-0x10*0xd9+-0x1831);}['_showFrame'](_0x58f5fb){if(!this['sprite'])return;const _0x4d2cee=this['sprite']['meshes'][_0x58f5fb];if(!_0x4d2cee){this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']['visible']=!(-0xa03+0x717+-0x1*-0x2ed));return;}let _0x354270;if(this['sprite']['renderMode']===Et?_0x354270=this['system']['default9Sl'+'icedMateri'+'alSlicedMo'+'de']:this['sprite']['renderMode']===At?_0x354270=this['system']['default9Sl'+'icedMateri'+'alTiledMod'+'e']:_0x354270=this['system']['defaultMat'+'erial'],this['_meshInsta'+'nce']||(this['_meshInsta'+'nce']=new We(_0x4d2cee,this['_material'],this['_node']),this['_meshInsta'+'nce']['castShadow']=!(-0x3f*-0x5+-0xc*-0xda+0x5b9*-0x2),this['_meshInsta'+'nce']['receiveSha'+'dow']=!(0x4*0x2ad+-0x2478+0x19c5),this['_meshInsta'+'nce']['drawOrder']=this['_drawOrder'],this['_model']['meshInstan'+'ces']['push'](this['_meshInsta'+'nce']),this['_colorUnif'+'orm'][-0x2*0x776+0x2f3*0x1+0x265*0x5]=this['_color']['r'],this['_colorUnif'+'orm'][-0xfb+-0xa*0x278+0x1*0x19ac]=this['_color']['g'],this['_colorUnif'+'orm'][-0x1d4e+0x60d*-0x1+0x235d]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](Cg,this['_colorUnif'+'orm']),this['_meshInsta'+'nce']['setParamet'+'er'](Pg,this['_color']['a']),this['enabled']&&this['entity']['enabled']&&this['_showModel']()),this['_meshInsta'+'nce']['material']!==_0x354270&&(this['_meshInsta'+'nce']['material']=_0x354270),this['_meshInsta'+'nce']['mesh']!==_0x4d2cee&&(this['_meshInsta'+'nce']['mesh']=_0x4d2cee,this['_meshInsta'+'nce']['visible']=!(-0x1*-0x6f7+0x4*-0x5db+0xb*0x17f),this['_meshInsta'+'nce']['_aabbVer']=-(-0xab2+0x1317+-0x864)),this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_meshInsta'+'nce']['setParamet'+'er'](Ag,this['sprite']['atlas']['texture']),this['_meshInsta'+'nce']['setParamet'+'er'](bg,this['sprite']['atlas']['texture'])):(this['_meshInsta'+'nce']['deletePara'+'meter'](Ag),this['_meshInsta'+'nce']['deletePara'+'meter'](bg)),this['sprite']['atlas']&&(this['sprite']['renderMode']===Et||this['sprite']['renderMode']===At)){this['_meshInsta'+'nce']['_updateAab'+'bFunc']=this['_updateAab'+'bFunc'];const _0x28dd1=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][_0x58f5fb]];if(_0x28dd1){const _0x59923d=(0x8f2+-0x89*0x9+-0x1*0x41f)/_0x28dd1['rect']['z'],_0x15f7da=(0x3*0xc89+-0x8*-0x2e3+-0x143b*0x3)/_0x28dd1['rect']['w'];this['_innerOffs'+'et']['set'](_0x28dd1['border']['x']*_0x59923d,_0x28dd1['border']['y']*_0x15f7da,_0x28dd1['border']['z']*_0x59923d,_0x28dd1['border']['w']*_0x15f7da);const _0x3cba54=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x28dd1['rect']['x']/_0x3cba54['width'],_0x28dd1['rect']['y']/_0x3cba54['height'],_0x28dd1['rect']['z']/_0x3cba54['width'],_0x28dd1['rect']['w']/_0x3cba54['height']);}else this['_innerOffs'+'et']['set'](0xee2+0x22*0x6+0x7d7*-0x2,0x180b+0x2f+-0x183a,-0x2655+0x2eb*-0x1+0x2940,-0x49*-0x40+-0x358+-0x4f8*0x3);this['_innerOffs'+'etUniform'][0xf14+-0xf0d+-0x7]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][0xd*0x1a7+0xcd7*0x2+-0x2f28]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][0x2*-0x948+0x14*0x64+0xac2]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0x1*-0x5ad+0xb*-0x25+0x747]=this['_innerOffs'+'et']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](TO,this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0xe7b+0x1*-0x17c8+0x2643]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][-0x21af+-0x1*-0x12fb+0xeb5]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x1*0x241+0x1*-0x9b3+-0x5fb*-0x2]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0x37+-0x2437+0x1b7*0x15]=this['_atlasRect']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](EO,this['_atlasRect'+'Uniform']);}else this['_meshInsta'+'nce']['_updateAab'+'bFunc']=null;this['_updateTra'+'nsform']();}['_updateTra'+'nsform'](){let _0x1bc8dc=this['flipX']?-(-0x3*-0x817+-0x11cc+-0x678):-0x353+0xb34+-0x120*0x7,_0x121dd9=this['flipY']?-(-0x1d0e*0x1+-0x11af+0x1*0x2ebe):0x1159+-0x2349+-0x11f1*-0x1,_0x329906=-0x112*0x1+0x190d+-0x36d*0x7,_0x4abf9d=0x1e4b+0x148+-0x1f93;if(this['sprite']&&(this['sprite']['renderMode']===Et||this['sprite']['renderMode']===At)){let _0x5106ca=0x1b2*0xb+-0x19aa+0x705,_0x5d2c19=0x178a*-0x1+0x1*-0x731+-0x2*-0xf5e;if(this['sprite']['atlas']){const _0x444473=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][this['frame']]];_0x444473&&(_0x5106ca=_0x444473['rect']['z'],_0x5d2c19=_0x444473['rect']['w'],_0x329906=(-0x1423*0x1+-0x50d*0x6+-0x25*-0x15d+0.5-_0x444473['pivot']['x'])*this['_width'],_0x4abf9d=(-0x1726+-0x256a+0x3c90+0.5-_0x444473['pivot']['y'])*this['_height']);}const _0x439d1f=_0x5106ca/this['sprite']['pixelsPerU'+'nit'],_0x2e6c01=_0x5d2c19/this['sprite']['pixelsPerU'+'nit'];this['_outerScal'+'e']['set'](Math['max'](this['_width'],this['_innerOffs'+'et']['x']*_0x439d1f),Math['max'](this['_height'],this['_innerOffs'+'et']['y']*_0x2e6c01)),_0x1bc8dc*=_0x439d1f,_0x121dd9*=_0x2e6c01,this['_outerScal'+'e']['x']/=_0x439d1f,this['_outerScal'+'e']['y']/=_0x2e6c01,_0x1bc8dc*=Y['clamp'](this['_width']/(this['_innerOffs'+'et']['x']*_0x439d1f),-0x1333+-0xe*-0x241+-0xc5b+0.0001,0x4be+0x3cb*0x1+0x8*-0x111),_0x121dd9*=Y['clamp'](this['_height']/(this['_innerOffs'+'et']['y']*_0x2e6c01),-0x2469+-0x9*0x16+0x1f5*0x13+0.0001,0xb*-0x1c9+-0x212*-0x1+0x8c9*0x2),this['_meshInsta'+'nce']&&(this['_outerScal'+'eUniform'][-0xcb6+0x1d91+-0x10db*0x1]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][-0x9*-0x2f6+-0x1*0x1fc5+0x520]=this['_outerScal'+'e']['y'],this['_meshInsta'+'nce']['setParamet'+'er'](wO,this['_outerScal'+'eUniform']));}this['_node']['setLocalSc'+'ale'](_0x1bc8dc,_0x121dd9,0x2308+0x6*0x60a+-0x9*0x7eb),this['_node']['setLocalPo'+'sition'](_0x329906,_0x4abf9d,-0xa7d*-0x3+0xf07+-0x2e7e);}['_updateAab'+'b'](_0x4705e4){return _0x4705e4['center']['set'](0xe*0x11a+-0x52*-0x49+-0x26ce,-0x94f*-0x3+-0x1*0x1bd9+-0x14,0x4a5*0x3+0x3df*-0x9+0x3*0x6f8),_0x4705e4['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0x4*-0x67b+0x16dd+-0x17*0x21f+0.5),this['_outerScal'+'e']['y']*(-0x30f*0x1+-0xad9+0xde8*0x1+0.5),-0x1f1f*-0x1+0x214*0x4+0x2a1*-0xf+0.001),_0x4705e4['setFromTra'+'nsformedAa'+'bb'](_0x4705e4,this['_node']['getWorldTr'+'ansform']()),_0x4705e4;}['_tryAutoPl'+'ay'](){if(!this['_autoPlayC'+'lip']||this['type']!==Eg)return;const _0x5a702f=this['_clips'][this['_autoPlayC'+'lip']];_0x5a702f&&!_0x5a702f['isPlaying']&&(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['isPlaying'])&&this['enabled']&&this['entity']['enabled']&&this['play'](_0x5a702f['name']);}['_onLayersC'+'hanged'](_0x102ca7,_0x300b18){_0x102ca7['off']('add',this['onLayerAdd'+'ed'],this),_0x102ca7['off']('remove',this['onLayerRem'+'oved'],this),_0x300b18['on']('add',this['onLayerAdd'+'ed'],this),_0x300b18['on']('remove',this['onLayerRem'+'oved'],this),this['enabled']&&this['entity']['enabled']&&this['_showModel']();}['_onLayerAd'+'ded'](_0x40edf4){this['layers']['indexOf'](_0x40edf4['id'])<-0x47a+-0x101*0x25+-0x5*-0x853||this['_addedMode'+'l']&&this['enabled']&&this['entity']['enabled']&&this['_meshInsta'+'nce']&&_0x40edf4['addMeshIns'+'tances']([this['_meshInsta'+'nce']]);}['_onLayerRe'+'moved'](_0x4942f4){!this['_meshInsta'+'nce']||this['layers']['indexOf'](_0x4942f4['id'])<-0x491+-0x2df*0x5+0x12ec||_0x4942f4['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}['removeMode'+'lFromLayer'+'s'](){for(let _0x11dae8=0x4*-0x77+0x1*0xe15+0x95*-0x15;_0x11dae8<this['layers']['length'];_0x11dae8++){const _0x52ffea=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x11dae8]);_0x52ffea&&_0x52ffea['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}}['addClip'](_0x4ddd06){const _0x73c456=new Fi(this,{'name':_0x4ddd06['name'],'fps':_0x4ddd06['fps'],'loop':_0x4ddd06['loop'],'spriteAsset':_0x4ddd06['spriteAsse'+'t']});return this['_clips'][_0x4ddd06['name']]=_0x73c456,_0x73c456['name']&&_0x73c456['name']===this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),_0x73c456;}['removeClip'](_0x2b57fc){delete this['_clips'][_0x2b57fc];}['clip'](_0x27ecd3){return this['_clips'][_0x27ecd3];}['play'](_0x1a1ee0){const _0x41971b=this['_clips'][_0x1a1ee0],_0x2e58af=this['_currentCl'+'ip'];return _0x2e58af&&_0x2e58af!==_0x41971b&&(_0x2e58af['_playing']=!(0x6e1+-0x1951+0x1271)),this['_currentCl'+'ip']=_0x41971b,this['_currentCl'+'ip']?(this['_currentCl'+'ip']=_0x41971b,this['_currentCl'+'ip']['play']()):M['warn']('Trying\x20to\x20'+'play\x20sprit'+'e\x20animatio'+'n\x20'+_0x1a1ee0+('\x20which\x20doe'+'s\x20not\x20exis'+'t.')),_0x41971b;}['pause'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['_currentCl'+'ip']['pause']();}['resume'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPaused']&&this['_currentCl'+'ip']['resume']();}['stop'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['stop']();}}h(Ji,'EVENT_PLAY','play'),h(Ji,'EVENT_PAUS'+'E','pause'),h(Ji,'EVENT_RESU'+'ME','resume'),h(Ji,'EVENT_STOP','stop'),h(Ji,'EVENT_END','end'),h(Ji,'EVENT_LOOP','loop');class AO{constructor(){this['enabled']=!(-0x1227+0x100f+0x218);}}const Tv=['enabled'];class bO extends lt{constructor(_0x58f392){super(_0x58f392),this['id']='sprite',this['ComponentT'+'ype']=Ji,this['DataType']=AO,this['schema']=Tv,this['_defaultTe'+'xture']=null,this['_defaultMa'+'terial']=null,this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=null,this['_default9S'+'licedMater'+'ialTiledMo'+'de']=null,this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['defaultMat'+'erial'](_0x4877cb){this['_defaultMa'+'terial']=_0x4877cb;}get['defaultMat'+'erial'](){if(!this['_defaultMa'+'terial']){const _0xf53fb5=new _e(this['app']['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':hs,'name':'sprite'}),_0x262501=new Uint8Array(_0xf53fb5['lock']());_0x262501[-0x1*0x3fe+-0x87b+-0xc79*-0x1]=_0x262501[-0x23d7+-0x26be+0x4a96*0x1]=_0x262501[0x154a*-0x1+-0xfb2+0x24fe]=_0x262501[0x239e+-0x26c4+-0x1*-0x329]=0x1e01+-0x2*-0x1025+-0x4*0xf53,_0xf53fb5['unlock']();const _0x2cf0a4=new ws();_0x2cf0a4['diffuse']['set'](0x1c*-0xd1+-0x2250+0x392c,-0x3*-0x6f6+-0x189b+-0x1*-0x3b9,0x2*0xdeb+-0x7cd*-0x2+-0x2b70),_0x2cf0a4['emissive']['set'](0xa77*-0x2+0x1c09+-0x71a,-0x1683+0x9be+0x6d*0x1e,0x599+0x95*-0x43+0x2167),_0x2cf0a4['emissiveMa'+'p']=_0xf53fb5,_0x2cf0a4['opacityMap']=_0xf53fb5,_0x2cf0a4['opacityMap'+'Channel']='a',_0x2cf0a4['useLightin'+'g']=!(0x17aa*-0x1+-0x1e19+0x35c4),_0x2cf0a4['useTonemap']=!(-0x1955+0x3*0x2f+-0x8d*-0x2d),_0x2cf0a4['useFog']=!(0xfae+0xa*-0x21d+0x1*0x575),_0x2cf0a4['useSkybox']=!(0xbde+-0x201a+0x143d),_0x2cf0a4['blendType']=bn,_0x2cf0a4['depthWrite']=!(0x221b+0x1f24+-0x952*0x7),_0x2cf0a4['pixelSnap']=!(0x1*-0x112e+0x1*-0xb23+-0x122*-0x19),_0x2cf0a4['cull']=xt,_0x2cf0a4['update'](),this['_defaultTe'+'xture']=_0xf53fb5,this['_defaultMa'+'terial']=_0x2cf0a4;}return this['_defaultMa'+'terial'];}set['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](_0x370244){this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x370244;}get['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](){if(!this['_default9S'+'licedMater'+'ialSlicedM'+'ode']){const _0x2efd7c=this['defaultMat'+'erial']['clone']();_0x2efd7c['nineSliced'+'Mode']=Et,_0x2efd7c['update'](),this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x2efd7c;}return this['_default9S'+'licedMater'+'ialSlicedM'+'ode'];}set['default9Sl'+'icedMateri'+'alTiledMod'+'e'](_0x385753){this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x385753;}get['default9Sl'+'icedMateri'+'alTiledMod'+'e'](){if(!this['_default9S'+'licedMater'+'ialTiledMo'+'de']){const _0x3430e2=this['defaultMat'+'erial']['clone']();_0x3430e2['nineSliced'+'Mode']=At,_0x3430e2['update'](),this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x3430e2;}return this['_default9S'+'licedMater'+'ialTiledMo'+'de'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),this['_defaultTe'+'xture']&&(this['_defaultTe'+'xture']['destroy'](),this['_defaultTe'+'xture']=null);}['initialize'+'ComponentD'+'ata'](_0x27ef55,_0x59b36b,_0x3d8349){if(_0x59b36b['enabled']!==void(0x1*-0x2174+0x1ca*0x11+0x30a)&&(_0x27ef55['enabled']=_0x59b36b['enabled']),_0x27ef55['type']=_0x59b36b['type'],_0x59b36b['layers']&&Array['isArray'](_0x59b36b['layers'])&&(_0x27ef55['layers']=_0x59b36b['layers']['slice'](0x1*0x18bd+-0x15d*-0x1+-0x1a1a*0x1)),_0x59b36b['drawOrder']!==void(0x16a*-0x13+-0x215f+0x3c3d*0x1)&&(_0x27ef55['drawOrder']=_0x59b36b['drawOrder']),_0x59b36b['color']!==void(0xbdc+0xa72+-0x164e)&&(_0x59b36b['color']instanceof ie?_0x27ef55['color']['set'](_0x59b36b['color']['r'],_0x59b36b['color']['g'],_0x59b36b['color']['b'],_0x59b36b['opacity']??-0x1c5d+0x1492+0x7cc):_0x27ef55['color']['set'](_0x59b36b['color'][0xc9*-0x1+0x26b*0x1+-0x1a2],_0x59b36b['color'][-0x26db+0x1898+0xe44],_0x59b36b['color'][0x2353+-0x3*0xa7b+-0x3e0],_0x59b36b['opacity']??0x1*0x1ef7+0x1*-0x11f1+-0xd05),_0x27ef55['color']=_0x27ef55['color']),_0x59b36b['opacity']!==void(-0x15*-0x171+0x1e49+-0x17*0x2a2)&&(_0x27ef55['opacity']=_0x59b36b['opacity']),_0x59b36b['flipX']!==void(0xf2b*0x1+-0xefb+-0x30)&&(_0x27ef55['flipX']=_0x59b36b['flipX']),_0x59b36b['flipY']!==void(0x2317+0x3*0x509+0x101*-0x32)&&(_0x27ef55['flipY']=_0x59b36b['flipY']),_0x59b36b['width']!==void(0x601+-0x12c7*0x2+0x1f8d)&&(_0x27ef55['width']=_0x59b36b['width']),_0x59b36b['height']!==void(-0x21dc+-0x26ae+0x488a)&&(_0x27ef55['height']=_0x59b36b['height']),_0x59b36b['spriteAsse'+'t']!==void(-0xb*0x18b+0x8*0xc5+0xad1)&&(_0x27ef55['spriteAsse'+'t']=_0x59b36b['spriteAsse'+'t']),_0x59b36b['sprite']&&(_0x27ef55['sprite']=_0x59b36b['sprite']),_0x59b36b['frame']!==void(-0x652*0x1+-0x1d6*0x7+0x132c)&&(_0x27ef55['frame']=_0x59b36b['frame']),_0x59b36b['clips']){for(const _0x23e197 in _0x59b36b['clips'])_0x27ef55['addClip'](_0x59b36b['clips'][_0x23e197]);}_0x59b36b['speed']!==void(-0x2c0*0xc+-0x2*-0x8c+0x1fe8)&&(_0x27ef55['speed']=_0x59b36b['speed']),_0x59b36b['autoPlayCl'+'ip']&&(_0x27ef55['autoPlayCl'+'ip']=_0x59b36b['autoPlayCl'+'ip']),_0x27ef55['batchGroup'+'Id']=_0x59b36b['batchGroup'+'Id']===void(0x1843+-0x107a+-0x7c9)||_0x59b36b['batchGroup'+'Id']===null?-(-0x1e89+-0x1*-0xb33+0x1357):_0x59b36b['batchGroup'+'Id'],super['initialize'+'ComponentD'+'ata'](_0x27ef55,_0x59b36b,_0x3d8349);}['cloneCompo'+'nent'](_0xa63f01,_0x2e64ee){const _0x448d31=_0xa63f01['sprite'];return this['addCompone'+'nt'](_0x2e64ee,{'enabled':_0x448d31['enabled'],'type':_0x448d31['type'],'spriteAsset':_0x448d31['spriteAsse'+'t'],'sprite':_0x448d31['sprite'],'width':_0x448d31['width'],'height':_0x448d31['height'],'frame':_0x448d31['frame'],'color':_0x448d31['color']['clone'](),'opacity':_0x448d31['opacity'],'flipX':_0x448d31['flipX'],'flipY':_0x448d31['flipY'],'speed':_0x448d31['speed'],'clips':_0x448d31['clips'],'autoPlayClip':_0x448d31['autoPlayCl'+'ip'],'batchGroupId':_0x448d31['batchGroup'+'Id'],'drawOrder':_0x448d31['drawOrder'],'layers':_0x448d31['layers']['slice'](-0xe4c+0x214d+-0x1301)});}['onUpdate'](_0xd66164){const _0x46ea98=this['store'];for(const _0x294328 in _0x46ea98)if(_0x46ea98['hasOwnProp'+'erty'](_0x294328)){const _0x518267=_0x46ea98[_0x294328];if(_0x518267['data']['enabled']&&_0x518267['entity']['enabled']){const _0x2f1492=_0x518267['entity']['sprite'];_0x2f1492['_currentCl'+'ip']&&_0x2f1492['_currentCl'+'ip']['_update'](_0xd66164);}}}['onBeforeRe'+'move'](_0xca055e,_0x3406da){_0x3406da['onDestroy']();}}we['_buildAcce'+'ssors'](Ji['prototype'],Tv);class en extends we{constructor(_0x29ecd5,_0xfa820f){super(_0x29ecd5,_0xfa820f),this['_oldState']=!(0x2327+-0xe16+-0x1511),this['_size']=new I(),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['size'](_0x36b649){_0x36b649 instanceof I?this['_size']['copy'](_0x36b649):_0x36b649 instanceof Array&&_0x36b649['length']>=-0x3c*0x15+-0x1d3a+0x35*0xa5&&this['size']['set'](_0x36b649[0x120f+-0x16b*-0x11+-0x2a2a],_0x36b649[-0x227f+-0x85c+0x2adc],_0x36b649[-0x47*0x77+-0x24c7+0x45ca]);}get['size'](){return this['_size'];}['onEnable'](){this['_checkStat'+'e']();}['onDisable'](){this['_checkStat'+'e']();}['_onSetEnab'+'led'](_0x5719de,_0x30f7b7,_0x3c1859){this['_checkStat'+'e']();}['_checkStat'+'e'](){const _0xfda2d6=this['enabled']&&this['entity']['enabled'];_0xfda2d6!==this['_oldState']&&(this['_oldState']=_0xfda2d6,this['fire']('enable'),this['fire']('state',this['enabled']));}['_onBeforeR'+'emove'](){this['fire']('remove');}}h(en,'EVENT_ENAB'+'LE','enable'),h(en,'EVENT_DISA'+'BLE','disable'),h(en,'EVENT_STAT'+'E','state'),h(en,'EVENT_REMO'+'VE','remove');class CO{constructor(){this['enabled']=!(0x2642+-0xd34+-0x190e);}}const wv=['enabled'];class PO extends lt{constructor(_0x58d4ec){super(_0x58d4ec),this['id']='zone',this['ComponentT'+'ype']=en,this['DataType']=CO,this['schema']=wv,this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this);}['initialize'+'ComponentD'+'ata'](_0x384e43,_0x14d888,_0x52d185){_0x384e43['enabled']=_0x14d888['hasOwnProp'+'erty']('enabled')?!!_0x14d888['enabled']:!(-0x11f0+0xd2c*-0x1+0x1f1c),_0x14d888['size']&&(_0x14d888['size']instanceof I?_0x384e43['size']['copy'](_0x14d888['size']):_0x14d888['size']instanceof Array&&_0x14d888['size']['length']>=0x227+0x79c+0x270*-0x4&&_0x384e43['size']['set'](_0x14d888['size'][0x77f*-0x1+0x193b+-0x11bc],_0x14d888['size'][-0x2363+-0x1*0x1d56+0x40ba*0x1],_0x14d888['size'][-0x83+-0x74d+0x5b*0x16]));}['cloneCompo'+'nent'](_0x43104b,_0x3da51c){const _0x27c50e={'enabled':_0x43104b['zone']['enabled'],'size':_0x43104b['zone']['size']};return this['addCompone'+'nt'](_0x3da51c,_0x27c50e);}['_onBeforeR'+'emove'](_0x1c90b9,_0x3b16fd){_0x3b16fd['_onBeforeR'+'emove']();}}we['_buildAcce'+'ssors'](en['prototype'],wv);class MO{constructor(_0x268242,_0x1916d5){this['effect']=_0x268242,this['inputTarge'+'t']=_0x1916d5,this['outputTarg'+'et']=null,this['name']=_0x268242['constructo'+'r']['name'];}}class IO{constructor(_0x17427c,_0xf245af){this['app']=_0x17427c,this['camera']=_0xf245af,this['destinatio'+'nRenderTar'+'get']=null,this['effects']=[],this['enabled']=!(0x10*0xbc+-0x851+-0x36e),this['depthTarge'+'t']=null,_0xf245af['on']('set:rect',this['onCameraRe'+'ctChanged'],this);}['_allocateC'+'olorBuffer'](_0x56b68e,_0x277ef9){const _0x2e1b1a=this['camera']['rect'],_0x23b90d=this['destinatio'+'nRenderTar'+'get'],_0x120b72=this['app']['graphicsDe'+'vice'],_0x4ec7c6=Math['floor'](_0x2e1b1a['z']*((_0x23b90d==null?void(0x277+0x1105+-0x137c):_0x23b90d['width'])??_0x120b72['width'])),_0x506ec3=Math['floor'](_0x2e1b1a['w']*((_0x23b90d==null?void(0x1381+-0xc9e+-0x6e3):_0x23b90d['height'])??_0x120b72['height']));return new _e(_0x120b72,{'name':_0x277ef9,'format':_0x56b68e,'width':_0x4ec7c6,'height':_0x506ec3,'mipmaps':!(-0xe3e*0x1+-0x2*-0xdb7+-0xd2f),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});}['_createOff'+'screenTarg'+'et'](_0x317106,_0x5cd5ef){const _0x3aea29=this['app']['graphicsDe'+'vice'],_0x4b0d4d=(this['destinatio'+'nRenderTar'+'get']??_0x3aea29['backBuffer'])['isColorBuf'+'ferSrgb'](0x17*0x10d+0x14a6+-0x2cd1),_0x548f60=(_0x5cd5ef&&_0x3aea29['getRendera'+'bleHdrForm'+'at']([at,Bt],!(0x1401+-0x1565+-0xb2*-0x2)))??(_0x4b0d4d?hs:Oe),_0x49dbec=this['camera']['entity']['name']+('-posteffec'+'t-')+this['effects']['length'],_0x41bb32=this['_allocateC'+'olorBuffer'](_0x548f60,_0x49dbec);return new vt({'colorBuffer':_0x41bb32,'depth':_0x317106,'stencil':_0x317106&&this['app']['graphicsDe'+'vice']['supportsSt'+'encil'],'samples':_0x317106?_0x3aea29['samples']:0x16d2+0x120b+-0x28dc});}['_resizeOff'+'screenTarg'+'et'](_0x3829ed){const _0x5bd6f4=_0x3829ed['colorBuffe'+'r']['format'],_0x1ce1ac=_0x3829ed['colorBuffe'+'r']['name'];_0x3829ed['destroyFra'+'meBuffers'](),_0x3829ed['destroyTex'+'tureBuffer'+'s'](),_0x3829ed['_colorBuff'+'er']=this['_allocateC'+'olorBuffer'](_0x5bd6f4,_0x1ce1ac),_0x3829ed['_colorBuff'+'ers']=[_0x3829ed['_colorBuff'+'er']];}['_destroyOf'+'fscreenTar'+'get'](_0x27002e){_0x27002e['destroyTex'+'tureBuffer'+'s'](),_0x27002e['destroy']();}['addEffect'](_0x45008d){const _0x177459=this['effects'],_0x1afc05=_0x177459['length']===0x18d1+-0x1c4c+0x37b,_0x801805=this['_createOff'+'screenTarg'+'et'](_0x1afc05,_0x45008d['hdr']),_0x54756a=new MO(_0x45008d,_0x801805);_0x177459['push'](_0x54756a),this['_sourceTar'+'get']=_0x54756a['inputTarge'+'t'],_0x177459['length']>0x1769+0x33*-0x8d+0x1*0x4af&&(_0x177459[_0x177459['length']-(0x1439+-0x86*-0x10+-0x1c97)]['outputTarg'+'et']=_0x54756a['inputTarge'+'t']),this['_newPostEf'+'fect']=_0x45008d,_0x45008d['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap'](),this['enable'](),this['_newPostEf'+'fect']=void(-0x34*0x43+-0x309*-0x6+0x3e*-0x13);}['removeEffe'+'ct'](_0x15a0df){let _0x48a537=-(-0x2e*-0x26+-0x1f8b+0x18b8);for(let _0x29c918=-0x81c*0x1+0x137b*0x1+-0xb5f,_0x5958a6=this['effects']['length'];_0x29c918<_0x5958a6;_0x29c918++)if(this['effects'][_0x29c918]['effect']===_0x15a0df){_0x48a537=_0x29c918;break;}_0x48a537>=0x2e*-0xd9+-0x6a3*0x5+0x482d&&(_0x48a537>-0x1a5c+0x58*-0x44+-0x84a*-0x6?this['effects'][_0x48a537-(-0x13b+0xbf*-0xf+0xc6d)]['outputTarg'+'et']=_0x48a537+(-0x4cb+0xbab+0x6df*-0x1)<this['effects']['length']?this['effects'][_0x48a537+(-0x16f*0x7+0x263f+-0x1c35)]['inputTarge'+'t']:null:this['effects']['length']>0x21a1+0x26*-0xbf+0x9*-0x96&&(this['effects'][0x2081+0x293*-0xb+-0x15*0x33]['inputTarge'+'t']['_depth']||(this['_destroyOf'+'fscreenTar'+'get'](this['effects'][-0x8cb+-0x17*-0xc1+0x2d9*-0x3]['inputTarge'+'t']),this['effects'][-0x1ed4+0x120d+-0x4*-0x332]['inputTarge'+'t']=this['_createOff'+'screenTarg'+'et'](!(0x26a5*0x1+0x1d48+0x1*-0x43ed),this['effects'][-0x9*-0x3c3+0xc8b+-0xf77*0x3]['hdr']),this['_sourceTar'+'get']=this['effects'][-0x1d40*-0x1+-0xef2+-0xe4d]['inputTarge'+'t']),this['camera']['renderTarg'+'et']=this['effects'][0x14*-0x6b+0xf5*0xa+-0x3*0x67]['inputTarge'+'t']),this['_destroyOf'+'fscreenTar'+'get'](this['effects'][_0x48a537]['inputTarge'+'t']),this['effects']['splice'](_0x48a537,0x1b7f*0x1+0x9fd*0x1+-0x13*0x1f9)),this['enabled']&&_0x15a0df['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap'](),this['effects']['length']===-0xc7*0x27+-0x3*-0x9dc+0x3*0x3f&&this['disable']();}['_requestDe'+'pthMaps'](){for(let _0x2015cd=0x8*-0x13d+0x2150+0x1768*-0x1,_0x5a9b90=this['effects']['length'];_0x2015cd<_0x5a9b90;_0x2015cd++){const _0x51d02d=this['effects'][_0x2015cd]['effect'];this['_newPostEf'+'fect']!==_0x51d02d&&_0x51d02d['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap']();}}['_releaseDe'+'pthMaps'](){for(let _0xb8a50b=0x2625+-0x20a3+-0x582,_0xc220b8=this['effects']['length'];_0xb8a50b<_0xc220b8;_0xb8a50b++)this['effects'][_0xb8a50b]['effect']['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap']();}['_requestDe'+'pthMap'](){const _0xe1f344=this['app']['scene']['layers']['getLayerBy'+'Id'](os);_0xe1f344&&(_0xe1f344['incrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(-0xe16*0x2+-0x1fd6+0x3c02)));}['_releaseDe'+'pthMap'](){const _0x586c31=this['app']['scene']['layers']['getLayerBy'+'Id'](os);_0x586c31&&(_0x586c31['decrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x367+-0x19b9+0x1653)));}['destroy'](){for(let _0x434fc6=0x93e+-0x774+0x1*-0x1ca,_0x3d8138=this['effects']['length'];_0x434fc6<_0x3d8138;_0x434fc6++)this['effects'][_0x434fc6]['inputTarge'+'t']['destroy']();this['effects']['length']=-0x61a*-0x6+0x1812+-0x3cae,this['disable']();}['enable'](){!this['enabled']&&this['effects']['length']&&(this['enabled']=!(0x5d6*-0x1+-0xdc0+0x2*0x9cb),this['_requestDe'+'pthMaps'](),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['destinatio'+'nRenderTar'+'get']=this['camera']['renderTarg'+'et'],this['camera']['renderTarg'+'et']=this['effects'][0x17*0x137+0x17b8+-0x33a9]['inputTarge'+'t'],this['camera']['onPostproc'+'essing']=()=>{if(this['enabled']){let _0x3f6837=null;const _0x563c79=this['effects']['length'];if(_0x563c79)for(let _0x8f4057=-0x2*-0xd06+0x25fb+-0x1*0x4007;_0x8f4057<_0x563c79;_0x8f4057++){const _0x57773d=this['effects'][_0x8f4057];let _0x39d3ef=_0x57773d['outputTarg'+'et'];_0x8f4057===_0x563c79-(-0x5*-0x68b+0x222a+-0x42e0)&&(_0x3f6837=this['camera']['rect'],this['destinatio'+'nRenderTar'+'get']&&(_0x39d3ef=this['destinatio'+'nRenderTar'+'get'])),Q['pushGpuMar'+'ker'](this['app']['graphicsDe'+'vice'],_0x57773d['name']),_0x57773d['effect']['render'](_0x57773d['inputTarge'+'t'],_0x39d3ef,_0x3f6837),Q['popGpuMark'+'er'](this['app']['graphicsDe'+'vice']);}}});}['disable'](){this['enabled']&&(this['enabled']=!(-0x1ce2+0x26d2+0x1*-0x9ef),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['_releaseDe'+'pthMaps'](),this['_destroyOf'+'fscreenTar'+'get'](this['_sourceTar'+'get']),this['camera']['renderTarg'+'et']=this['destinatio'+'nRenderTar'+'get'],this['camera']['onPostproc'+'essing']=null);}['_onCanvasR'+'esized'](_0xd0c31d,_0x3406eb){const _0x6c6ba8=this['camera']['rect'],_0x2da3f9=this['destinatio'+'nRenderTar'+'get'];_0xd0c31d=(_0x2da3f9==null?void(-0x2093+-0x613+0x3*0xce2):_0x2da3f9['width'])??_0xd0c31d,_0x3406eb=(_0x2da3f9==null?void(-0x691+0x23a2+0x1*-0x1d11):_0x2da3f9['height'])??_0x3406eb,this['camera']['camera']['aspectRati'+'o']=_0xd0c31d*_0x6c6ba8['z']/(_0x3406eb*_0x6c6ba8['w']),this['resizeRend'+'erTargets']();}['resizeRend'+'erTargets'](){const _0x27f2f3=this['app']['graphicsDe'+'vice'],_0xb835df=this['destinatio'+'nRenderTar'+'get'],_0x318146=(_0xb835df==null?void(-0x1*0x38e+0x2075*-0x1+0x2403):_0xb835df['width'])??_0x27f2f3['width'],_0x5a1091=(_0xb835df==null?void(-0x173*-0x1+-0x1294*-0x2+0x269b*-0x1):_0xb835df['height'])??_0x27f2f3['height'],_0x847d32=this['camera']['rect'],_0x4a4ff6=Math['floor'](_0x847d32['z']*_0x318146),_0x392ec5=Math['floor'](_0x847d32['w']*_0x5a1091),_0x2b1900=this['effects'];for(let _0x2e584a=0x637*0x2+0x1ca+0xe*-0x104,_0x303e64=_0x2b1900['length'];_0x2e584a<_0x303e64;_0x2e584a++){const _0x4877b8=_0x2b1900[_0x2e584a];(_0x4877b8['inputTarge'+'t']['width']!==_0x4a4ff6||_0x4877b8['inputTarge'+'t']['height']!==_0x392ec5)&&this['_resizeOff'+'screenTarg'+'et'](_0x4877b8['inputTarge'+'t']);}}['onCameraRe'+'ctChanged'](_0x5e6d34,_0xc52533,_0x2fb0f0){this['enabled']&&this['resizeRend'+'erTargets']();}}class Ev extends we{constructor(_0x592272,_0x21b792){super(_0x592272,_0x21b792),h(this,'onPostproc'+'essing',null),h(this,'_renderSce'+'neDepthMap',-0x1f56+0x2369+-0x7*0x95),h(this,'_renderSce'+'neColorMap',-0x1616+0x26f*-0xd+0x35b9),h(this,'_sceneDept'+'hMapReques'+'ted',!(0x2438+-0xea0+0x1*-0x1597)),h(this,'_sceneColo'+'rMapReques'+'ted',!(0x2365+0x72a*-0x2+-0x544*0x4)),h(this,'_priority',0x67d*-0x5+0x2*0x4cd+0x16d7),h(this,'_disablePo'+'stEffectsL'+'ayer',nl),h(this,'_camera',new dl()),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_camera']['node']=_0x21b792,this['_postEffec'+'ts']=new IO(_0x592272['app'],this));}['setShaderP'+'ass'](_0x59f265){const _0x303928=hi['get'](this['system']['app']['graphicsDe'+'vice']),_0x582a5d=_0x59f265?_0x303928['allocate'](_0x59f265,{'isForward':!(0x7e5+0x10ef+0xe*-0x1c6)}):null;return this['_camera']['shaderPass'+'Info']=_0x582a5d,_0x582a5d['index'];}['getShaderP'+'ass'](){var _0xf50db0;return(_0xf50db0=this['_camera']['shaderPass'+'Info'])==null?void(0x76e*-0x1+-0x1103+-0x1871*-0x1):_0xf50db0['name'];}set['renderPass'+'es'](_0x4708f3){this['_camera']['renderPass'+'es']=_0x4708f3||[],this['dirtyLayer'+'Compositio'+'nCameras'](),this['system']['app']['scene']['updateShad'+'ers']=!(0x1e34+-0x1b3+-0x1c81);}get['renderPass'+'es'](){return this['_camera']['renderPass'+'es'];}get['shaderPara'+'ms'](){return this['_camera']['shaderPara'+'ms'];}set['gammaCorre'+'ction'](_0xb437cd){this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=_0xb437cd;}get['gammaCorre'+'ction'](){return this['camera']['shaderPara'+'ms']['gammaCorre'+'ction'];}set['toneMappin'+'g'](_0x4c9857){this['camera']['shaderPara'+'ms']['toneMappin'+'g']=_0x4c9857;}get['toneMappin'+'g'](){return this['camera']['shaderPara'+'ms']['toneMappin'+'g'];}set['fog'](_0x1bc0ff){this['_camera']['fogParams']=_0x1bc0ff;}get['fog'](){return this['_camera']['fogParams'];}set['aperture'](_0x1cb4af){this['_camera']['aperture']=_0x1cb4af;}get['aperture'](){return this['_camera']['aperture'];}set['aspectRati'+'o'](_0x48a721){this['_camera']['aspectRati'+'o']=_0x48a721;}get['aspectRati'+'o'](){return this['_camera']['aspectRati'+'o'];}set['aspectRati'+'oMode'](_0x4c37c9){this['_camera']['aspectRati'+'oMode']=_0x4c37c9;}get['aspectRati'+'oMode'](){return this['_camera']['aspectRati'+'oMode'];}set['calculateP'+'rojection'](_0x5df1ca){this['_camera']['calculateP'+'rojection']=_0x5df1ca;}get['calculateP'+'rojection'](){return this['_camera']['calculateP'+'rojection'];}set['calculateT'+'ransform'](_0x45900f){this['_camera']['calculateT'+'ransform']=_0x45900f;}get['calculateT'+'ransform'](){return this['_camera']['calculateT'+'ransform'];}get['camera'](){return this['_camera'];}set['clearColor'](_0x726e4f){this['_camera']['clearColor']=_0x726e4f;}get['clearColor'](){return this['_camera']['clearColor'];}set['clearColor'+'Buffer'](_0x25f494){this['_camera']['clearColor'+'Buffer']=_0x25f494,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearColor'+'Buffer'](){return this['_camera']['clearColor'+'Buffer'];}set['clearDepth'+'Buffer'](_0x1bd108){this['_camera']['clearDepth'+'Buffer']=_0x1bd108,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearDepth'+'Buffer'](){return this['_camera']['clearDepth'+'Buffer'];}set['clearStenc'+'ilBuffer'](_0x3c5a41){this['_camera']['clearStenc'+'ilBuffer']=_0x3c5a41,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearStenc'+'ilBuffer'](){return this['_camera']['clearStenc'+'ilBuffer'];}set['cullFaces'](_0x188d7f){this['_camera']['cullFaces']=_0x188d7f;}get['cullFaces'](){return this['_camera']['cullFaces'];}set['disablePos'+'tEffectsLa'+'yer'](_0x25fd9a){this['_disablePo'+'stEffectsL'+'ayer']=_0x25fd9a,this['dirtyLayer'+'Compositio'+'nCameras']();}get['disablePos'+'tEffectsLa'+'yer'](){return this['_disablePo'+'stEffectsL'+'ayer'];}set['farClip'](_0x2bc09c){this['_camera']['farClip']=_0x2bc09c;}get['farClip'](){return this['_camera']['farClip'];}set['flipFaces'](_0x203035){this['_camera']['flipFaces']=_0x203035;}get['flipFaces'](){return this['_camera']['flipFaces'];}set['fov'](_0x2f361a){this['_camera']['fov']=_0x2f361a;}get['fov'](){return this['_camera']['fov'];}get['frustum'](){return this['_camera']['frustum'];}set['frustumCul'+'ling'](_0x49b970){this['_camera']['frustumCul'+'ling']=_0x49b970;}get['frustumCul'+'ling'](){return this['_camera']['frustumCul'+'ling'];}set['horizontal'+'Fov'](_0xf8807b){this['_camera']['horizontal'+'Fov']=_0xf8807b;}get['horizontal'+'Fov'](){return this['_camera']['horizontal'+'Fov'];}set['layers'](_0x51a342){const _0x545e23=this['_camera']['layers'],_0x23d914=this['system']['app']['scene'];_0x545e23['forEach'](_0x2206d7=>{const _0x67c83=_0x23d914['layers']['getLayerBy'+'Id'](_0x2206d7);_0x67c83==null||_0x67c83['removeCame'+'ra'](this);}),this['_camera']['layers']=_0x51a342,this['enabled']&&this['entity']['enabled']&&_0x51a342['forEach'](_0x53b2b1=>{const _0x1fee89=_0x23d914['layers']['getLayerBy'+'Id'](_0x53b2b1);_0x1fee89==null||_0x1fee89['addCamera'](this);}),this['fire']('set:layers');}get['layers'](){return this['_camera']['layers'];}get['layersSet'](){return this['_camera']['layersSet'];}set['jitter'](_0x4aef29){this['_camera']['jitter']=_0x4aef29;}get['jitter'](){return this['_camera']['jitter'];}set['nearClip'](_0x340bfa){this['_camera']['nearClip']=_0x340bfa;}get['nearClip'](){return this['_camera']['nearClip'];}set['orthoHeigh'+'t'](_0x5052fc){this['_camera']['orthoHeigh'+'t']=_0x5052fc;}get['orthoHeigh'+'t'](){return this['_camera']['orthoHeigh'+'t'];}get['postEffect'+'s'](){return this['_postEffec'+'ts'];}get['postEffect'+'sEnabled'](){return this['_postEffec'+'ts']['enabled'];}set['priority'](_0x300979){this['_priority']=_0x300979,this['dirtyLayer'+'Compositio'+'nCameras']();}get['priority'](){return this['_priority'];}set['projection'](_0x44a983){this['_camera']['projection']=_0x44a983;}get['projection'](){return this['_camera']['projection'];}get['projection'+'Matrix'](){return this['_camera']['projection'+'Matrix'];}set['rect'](_0x49c4f4){this['_camera']['rect']=_0x49c4f4,this['fire']('set:rect',this['_camera']['rect']);}get['rect'](){return this['_camera']['rect'];}set['renderScen'+'eColorMap'](_0x356253){_0x356253&&!this['_sceneColo'+'rMapReques'+'ted']?(this['requestSce'+'neColorMap'](!(0x1*-0x281+-0x53*0x1f+0xc8e)),this['_sceneColo'+'rMapReques'+'ted']=!(0x623+-0x6ff+0xdc)):this['_sceneColo'+'rMapReques'+'ted']&&(this['requestSce'+'neColorMap'](!(0x249f+0x3*-0x36f+-0x1a51*0x1)),this['_sceneColo'+'rMapReques'+'ted']=!(-0x7dc+-0x1*-0x1ecb+-0x16ee));}get['renderScen'+'eColorMap'](){return this['_renderSce'+'neColorMap']>0x1ade+0x1ae*0x2+-0x1e3a*0x1;}set['renderScen'+'eDepthMap'](_0x40892f){_0x40892f&&!this['_sceneDept'+'hMapReques'+'ted']?(this['requestSce'+'neDepthMap'](!(0x2*-0x619+0x77f*-0x1+-0x47*-0x47)),this['_sceneDept'+'hMapReques'+'ted']=!(0x160a+-0x1*0x1b05+0x4fb)):this['_sceneDept'+'hMapReques'+'ted']&&(this['requestSce'+'neDepthMap'](!(-0x1317+-0xf63+-0x227b*-0x1)),this['_sceneDept'+'hMapReques'+'ted']=!(0x55a*0x1+-0xf04+0x9ab));}get['renderScen'+'eDepthMap'](){return this['_renderSce'+'neDepthMap']>0x8ae+-0xe67+-0x5b9*-0x1;}set['renderTarg'+'et'](_0x33f336){M['call'](()=>{this['_camera']['renderPass'+'es']['length']>0xf8e+0x51c+-0x14aa*0x1&&M['warn']('Setting\x20a\x20'+'render\x20tar'+'get\x20on\x20the'+'\x20camera\x20'+this['entity']['name']+('\x20after\x20the'+'\x20render\x20pa'+'sses\x20is\x20no'+'t\x20supporte'+'d,\x20set\x20it\x20'+'up\x20first.'));}),this['_camera']['renderTarg'+'et']=_0x33f336,this['dirtyLayer'+'Compositio'+'nCameras']();}get['renderTarg'+'et'](){return this['_camera']['renderTarg'+'et'];}set['scissorRec'+'t'](_0x163822){this['_camera']['scissorRec'+'t']=_0x163822;}get['scissorRec'+'t'](){return this['_camera']['scissorRec'+'t'];}set['sensitivit'+'y'](_0x517c9d){this['_camera']['sensitivit'+'y']=_0x517c9d;}get['sensitivit'+'y'](){return this['_camera']['sensitivit'+'y'];}set['shutter'](_0x2b66fd){this['_camera']['shutter']=_0x2b66fd;}get['shutter'](){return this['_camera']['shutter'];}get['viewMatrix'](){return this['_camera']['viewMatrix'];}['_enableDep'+'thLayer'](_0x540b25){if(this['layers']['find'](_0x13033e=>_0x13033e===os)){const _0x402fde=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](os);_0x540b25?_0x402fde==null||_0x402fde['incrementC'+'ounter']():_0x402fde==null||_0x402fde['decrementC'+'ounter']();}else{if(_0x540b25)return!(0x1*0x1e2c+0x1*-0x8bd+-0x2*0xab7);}return!(0x106*-0x11+-0x9e2+-0x18*-0x123);}['requestSce'+'neColorMap'](_0x404e58){this['_renderSce'+'neColorMap']+=_0x404e58?0x625*-0x3+-0x1*-0xa34+0x20f*0x4:-(0x653+0x2038+-0x268a),M['assert'](this['_renderSce'+'neColorMap']>=-0x3ea+0x1cc0+-0x18d6),this['_enableDep'+'thLayer'](_0x404e58)||M['warnOnce']('CameraComp'+'onent.requ'+'estSceneCo'+'lorMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassCol'+'orGrab'](this['system']['app']['graphicsDe'+'vice'],this['renderScen'+'eColorMap']),this['system']['app']['scene']['layers']['markDirty']();}['requestSce'+'neDepthMap'](_0x5eb43d){this['_renderSce'+'neDepthMap']+=_0x5eb43d?-0x922+-0x22b5*0x1+0x2bd8:-(-0x3*0x891+0x1399+0x61b),M['assert'](this['_renderSce'+'neDepthMap']>=0x1*0x685+-0xe27*-0x2+-0x1*0x22d3),this['_enableDep'+'thLayer'](_0x5eb43d)||M['warnOnce']('CameraComp'+'onent.requ'+'estSceneDe'+'pthMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassDep'+'thGrab'](this['system']['app']['graphicsDe'+'vice'],this['system']['app']['renderer'],this['renderScen'+'eDepthMap']),this['system']['app']['scene']['layers']['markDirty']();}['dirtyLayer'+'Compositio'+'nCameras'](){const _0x2e7428=this['system']['app']['scene']['layers'];_0x2e7428['_dirty']=!(-0xd6d+0xb81+-0x2*-0xf6);}['screenToWo'+'rld'](_0x2fa766,_0x87a16b,_0x17c4ca,_0x477a83){const _0x4c34f0=this['system']['app']['graphicsDe'+'vice'],{width:_0xd68892,height:_0x228c6f}=_0x4c34f0['clientRect'];return this['_camera']['screenToWo'+'rld'](_0x2fa766,_0x87a16b,_0x17c4ca,_0xd68892,_0x228c6f,_0x477a83);}['worldToScr'+'een'](_0x92f0b7,_0x9f3d24){const _0x25d93f=this['system']['app']['graphicsDe'+'vice'],{width:_0x41c535,height:_0x2bed0a}=_0x25d93f['clientRect'];return this['_camera']['worldToScr'+'een'](_0x92f0b7,_0x41c535,_0x2bed0a,_0x9f3d24);}['onAppPrere'+'nder'](){this['_camera']['_viewMatDi'+'rty']=!(0x2478+-0x210b+-0x36d),this['_camera']['_viewProjM'+'atDirty']=!(-0x16c7+-0x43*-0x95+-0x15a*0xc);}['addCameraT'+'oLayers'](){const _0x5a7675=this['layers'];for(let _0x7edd11=0xccb+0x240*-0x3+-0x60b;_0x7edd11<_0x5a7675['length'];_0x7edd11++){const _0x574bc1=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x5a7675[_0x7edd11]);_0x574bc1&&_0x574bc1['addCamera'](this);}}['removeCame'+'raFromLaye'+'rs'](){const _0x32f9e8=this['layers'];for(let _0x6839c0=-0x1e62+-0xc19*-0x2+0x630;_0x6839c0<_0x32f9e8['length'];_0x6839c0++){const _0x34ff9b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x32f9e8[_0x6839c0]);_0x34ff9b&&_0x34ff9b['removeCame'+'ra'](this);}}['onLayersCh'+'anged'](_0x2e266d,_0x2b93fd){this['addCameraT'+'oLayers'](),_0x2e266d['off']('add',this['onLayerAdd'+'ed'],this),_0x2e266d['off']('remove',this['onLayerRem'+'oved'],this),_0x2b93fd['on']('add',this['onLayerAdd'+'ed'],this),_0x2b93fd['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x5c25b){this['layers']['indexOf'](_0x5c25b['id'])<-0x26c+-0x3a4+0x8*0xc2||_0x5c25b['addCamera'](this);}['onLayerRem'+'oved'](_0x177a53){this['layers']['indexOf'](_0x177a53['id'])<-0x83*-0x11+0xee2+-0x1795||_0x177a53['removeCame'+'ra'](this);}['onEnable'](){var _0x5ebb02,_0x760733,_0x15aaba;const _0x2e124e=this['system']['app']['scene'],_0x136610=_0x2e124e['layers'];this['system']['addCamera'](this),(_0x5ebb02=this['_evtLayers'+'Changed'])==null||_0x5ebb02['off'](),this['_evtLayers'+'Changed']=_0x2e124e['on']('set:layers',this['onLayersCh'+'anged'],this),_0x136610&&((_0x760733=this['_evtLayerA'+'dded'])==null||_0x760733['off'](),this['_evtLayerA'+'dded']=_0x136610['on']('add',this['onLayerAdd'+'ed'],this),(_0x15aaba=this['_evtLayerR'+'emoved'])==null||_0x15aaba['off'](),this['_evtLayerR'+'emoved']=_0x136610['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addCameraT'+'oLayers'](),this['postEffect'+'s']['enable']();}['onDisable'](){var _0x113485,_0x1fcc89,_0x52252f;const _0x336452=this['system']['app']['scene']['layers'];this['postEffect'+'s']['disable'](),this['removeCame'+'raFromLaye'+'rs'](),(_0x113485=this['_evtLayers'+'Changed'])==null||_0x113485['off'](),this['_evtLayers'+'Changed']=null,_0x336452&&((_0x1fcc89=this['_evtLayerA'+'dded'])==null||_0x1fcc89['off'](),this['_evtLayerA'+'dded']=null,(_0x52252f=this['_evtLayerR'+'emoved'])==null||_0x52252f['off'](),this['_evtLayerR'+'emoved']=null),this['system']['removeCame'+'ra'](this);}['onRemove'](){this['onDisable'](),this['off'](),this['camera']['destroy']();}['calculateA'+'spectRatio'](_0x474975){const _0x49f89e=this['system']['app']['graphicsDe'+'vice'],_0x277eef=_0x474975?_0x474975['width']:_0x49f89e['width'],_0x5b7749=_0x474975?_0x474975['height']:_0x49f89e['height'];return _0x277eef*this['rect']['z']/(_0x5b7749*this['rect']['w']);}['frameUpdat'+'e'](_0xf2fa4d){this['aspectRati'+'oMode']===Im&&(this['aspectRati'+'o']=this['calculateA'+'spectRatio'](_0xf2fa4d));}['startXr'](_0x1041e7,_0x2d7d98,_0x496f00){this['system']['app']['xr']['start'](this,_0x1041e7,_0x2d7d98,_0x496f00);}['endXr'](_0x57fd52){if(!this['_camera']['xr']){_0x57fd52&&_0x57fd52(new Error('Camera\x20is\x20'+'not\x20in\x20XR'));return;}this['_camera']['xr']['end'](_0x57fd52);}['copy'](_0x3ab429){this['aperture']=_0x3ab429['aperture'],this['aspectRati'+'o']=_0x3ab429['aspectRati'+'o'],this['aspectRati'+'oMode']=_0x3ab429['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x3ab429['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x3ab429['calculateT'+'ransform'],this['clearColor']=_0x3ab429['clearColor'],this['clearColor'+'Buffer']=_0x3ab429['clearColor'+'Buffer'],this['clearDepth'+'Buffer']=_0x3ab429['clearDepth'+'Buffer'],this['clearStenc'+'ilBuffer']=_0x3ab429['clearStenc'+'ilBuffer'],this['cullFaces']=_0x3ab429['cullFaces'],this['disablePos'+'tEffectsLa'+'yer']=_0x3ab429['disablePos'+'tEffectsLa'+'yer'],this['farClip']=_0x3ab429['farClip'],this['flipFaces']=_0x3ab429['flipFaces'],this['fov']=_0x3ab429['fov'],this['frustumCul'+'ling']=_0x3ab429['frustumCul'+'ling'],this['horizontal'+'Fov']=_0x3ab429['horizontal'+'Fov'],this['layers']=_0x3ab429['layers'],this['nearClip']=_0x3ab429['nearClip'],this['orthoHeigh'+'t']=_0x3ab429['orthoHeigh'+'t'],this['priority']=_0x3ab429['priority'],this['projection']=_0x3ab429['projection'],this['rect']=_0x3ab429['rect'],this['renderTarg'+'et']=_0x3ab429['renderTarg'+'et'],this['scissorRec'+'t']=_0x3ab429['scissorRec'+'t'],this['sensitivit'+'y']=_0x3ab429['sensitivit'+'y'],this['shutter']=_0x3ab429['shutter'];}}class DO{constructor(){this['enabled']=!(-0x11*-0x1f7+-0x2*0x6ea+0x1393*-0x1);}}const Av=['enabled'];class LO extends lt{constructor(_0x27f6f0){super(_0x27f6f0),h(this,'cameras',[]),(this['id']='camera',this['ComponentT'+'ype']=Ev,this['DataType']=DO,this['schema']=Av,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['on']('prerender',this['onAppPrere'+'nder'],this));}['initialize'+'ComponentD'+'ata'](_0x5b30c7,_0x462161,_0x4c1820){_0x4c1820=['aspectRati'+'o','aspectRati'+'oMode','calculateP'+'rojection','calculateT'+'ransform','clearColor','clearColor'+'Buffer','clearDepth'+'Buffer','clearStenc'+'ilBuffer','renderScen'+'eColorMap','renderScen'+'eDepthMap','cullFaces','farClip','flipFaces','fog','fov','frustumCul'+'ling','horizontal'+'Fov','layers','renderTarg'+'et','nearClip','orthoHeigh'+'t','projection','priority','rect','scissorRec'+'t','aperture','shutter','sensitivit'+'y','gammaCorre'+'ction','toneMappin'+'g'];for(let _0x1802aa=0x2*0x499+0x6d*-0x43+-0x65*-0x31;_0x1802aa<_0x4c1820['length'];_0x1802aa++){const _0x182338=_0x4c1820[_0x1802aa];if(_0x462161['hasOwnProp'+'erty'](_0x182338)){const _0x2ec8e0=_0x462161[_0x182338];switch(_0x182338){case'rect':case'scissorRec'+'t':Array['isArray'](_0x2ec8e0)?_0x5b30c7[_0x182338]=new ae(_0x2ec8e0[-0xd54+0x2480+0x5cb*-0x4],_0x2ec8e0[0xdc8+0x1531+-0x22f8],_0x2ec8e0[0xd2b+0x234+-0x45*0x39],_0x2ec8e0[0x1*-0x1df7+-0x1*0x28d+0x2087]):_0x5b30c7[_0x182338]=_0x2ec8e0;break;case'clearColor':Array['isArray'](_0x2ec8e0)?_0x5b30c7[_0x182338]=new ie(_0x2ec8e0[0x6f*0x47+0x9*0x304+-0x39ed],_0x2ec8e0[0x1807+0x26a4+-0x1f55*0x2],_0x2ec8e0[0x61f+-0x1cca+0x1b*0xd7],_0x2ec8e0[0x2*-0x42b+-0x1525+0x5*0x5e6]):_0x5b30c7[_0x182338]=_0x2ec8e0;break;default:_0x5b30c7[_0x182338]=_0x2ec8e0;break;}}}super['initialize'+'ComponentD'+'ata'](_0x5b30c7,_0x462161,['enabled']);}['cloneCompo'+'nent'](_0x36ad95,_0x9c1e52){const _0x13a48a=_0x36ad95['camera'];return this['addCompone'+'nt'](_0x9c1e52,{'aspectRatio':_0x13a48a['aspectRati'+'o'],'aspectRatioMode':_0x13a48a['aspectRati'+'oMode'],'calculateProjection':_0x13a48a['calculateP'+'rojection'],'calculateTransform':_0x13a48a['calculateT'+'ransform'],'clearColor':_0x13a48a['clearColor'],'clearColorBuffer':_0x13a48a['clearColor'+'Buffer'],'clearDepthBuffer':_0x13a48a['clearDepth'+'Buffer'],'clearStencilBuffer':_0x13a48a['clearStenc'+'ilBuffer'],'renderSceneDepthMap':_0x13a48a['renderScen'+'eDepthMap'],'renderSceneColorMap':_0x13a48a['renderScen'+'eColorMap'],'cullFaces':_0x13a48a['cullFaces'],'enabled':_0x13a48a['enabled'],'farClip':_0x13a48a['farClip'],'flipFaces':_0x13a48a['flipFaces'],'fov':_0x13a48a['fov'],'frustumCulling':_0x13a48a['frustumCul'+'ling'],'horizontalFov':_0x13a48a['horizontal'+'Fov'],'layers':_0x13a48a['layers'],'renderTarget':_0x13a48a['renderTarg'+'et'],'nearClip':_0x13a48a['nearClip'],'orthoHeight':_0x13a48a['orthoHeigh'+'t'],'projection':_0x13a48a['projection'],'priority':_0x13a48a['priority'],'rect':_0x13a48a['rect'],'scissorRect':_0x13a48a['scissorRec'+'t'],'aperture':_0x13a48a['aperture'],'sensitivity':_0x13a48a['sensitivit'+'y'],'shutter':_0x13a48a['shutter'],'gammaCorrection':_0x13a48a['gammaCorre'+'ction'],'toneMapping':_0x13a48a['toneMappin'+'g']});}['onBeforeRe'+'move'](_0x5ed0e8,_0x53c572){this['removeCame'+'ra'](_0x53c572),_0x53c572['onRemove']();}['onAppPrere'+'nder'](){for(let _0x134f74=0x1afb*0x1+0x1922*0x1+-0x341d,_0x501771=this['cameras']['length'];_0x134f74<_0x501771;_0x134f74++)this['cameras'][_0x134f74]['onAppPrere'+'nder']();}['addCamera'](_0xcf6479){this['cameras']['push'](_0xcf6479),Go(this['cameras']);}['removeCame'+'ra'](_0x283c25){const _0x597272=this['cameras']['indexOf'](_0x283c25);_0x597272>=-0x1e*-0xf7+0x13*-0x119+-0x817&&(this['cameras']['splice'](_0x597272,0x1966+0x1*0x68c+-0x1ff1),Go(this['cameras']));}['destroy'](){this['app']['off']('prerender',this['onAppPrere'+'nder'],this),super['destroy']();}}we['_buildAcce'+'ssors'](Ev['prototype'],Av);class bv{constructor(){h(this,'enabled',!(0x2494+0x194f+0x3de3*-0x1)),h(this,'light'),h(this,'type','directiona'+'l'),h(this,'color',new ie(-0x5*0xb7+0x1d36+-0x182*0x11,0x45*-0x61+-0x1d46+0x376c,0xc04*0x1+-0x267b+0x1a78)),h(this,'intensity',0x2cf+0x23b2+0xb0*-0x38),h(this,'luminance',0x3*-0x361+0x2490+0x3*-0x8cf),h(this,'shape',Vs),h(this,'affectSpec'+'ularity',!(0x29*-0xe+-0x2e7*-0xc+-0x2096)),h(this,'castShadow'+'s',!(0x1*0x10af+-0x2*0xe13+0xb78)),h(this,'shadowDist'+'ance',0xf50+0x7*-0x50+-0x5*0x298),h(this,'shadowInte'+'nsity',-0xd2e+0x161b+-0x8ec),h(this,'shadowReso'+'lution',0xeef*0x1+0x1a5f*-0x1+-0x1ee*-0x8),h(this,'shadowBias',0xe5d*0x1+0x12b4*-0x2+0x170b+0.05),h(this,'numCascade'+'s',-0x4*0x1d3+-0x1*0x1e03+0x10*0x255),h(this,'cascadeBle'+'nd',0xc7*0x13+0x266a+-0x352f*0x1),h(this,'bakeNumSam'+'ples',0x1435+0x1*-0x3d9+0x35*-0x4f),h(this,'bakeArea',-0x232d+-0x124c*-0x2+-0x16b),h(this,'cascadeDis'+'tribution',0x19a2*-0x1+-0x24c8+0x3e6a+0.5),h(this,'normalOffs'+'etBias',-0x1f9*0x1+-0x235d+-0x1b*-0x162),h(this,'range',-0x59*0x4d+0x1*0x14fd+-0x2e9*-0x2),h(this,'innerConeA'+'ngle',0x552+0x2*-0x5cb+0x66c),h(this,'outerConeA'+'ngle',-0x5*-0x143+-0x1*0xa02+0x1f*0x20),h(this,'falloffMod'+'e',Sm),h(this,'shadowType',ks),h(this,'vsmBlurSiz'+'e',-0x275*0x9+-0x117b*0x1+0x27a3),h(this,'vsmBlurMod'+'e',vm),h(this,'vsmBias',(-0x3b*-0x37+-0xf23+0x276+0.01)*(-0x1*0xe37+-0x3*0x7a2+0xc5f*0x3+0.25)),h(this,'cookieAsse'+'t',null),h(this,'cookie',null),h(this,'cookieInte'+'nsity',-0x1*-0x3fd+0xdb5*0x1+0x1*-0x11b1),h(this,'cookieFall'+'off',!(-0x23d0+0xf*-0x4b+0x2835)),h(this,'cookieChan'+'nel','rgb'),h(this,'cookieAngl'+'e',-0x2038+0x4be+0x1b7a),h(this,'cookieScal'+'e',null),h(this,'cookieOffs'+'et',null),h(this,'shadowUpda'+'teMode',Pm),h(this,'mask',-0x1f*0x1d+0x26b+0x119),h(this,'affectDyna'+'mic',!(-0x2f5+-0x1a42+0x1d37)),h(this,'affectLigh'+'tmapped',!(-0x3ef*-0x7+0xa95+-0x261d)),h(this,'bake',!(-0x1*0x335+0x202b+0x161*-0x15)),h(this,'bakeDir',!(0x1c31+-0x49c+-0x1795)),h(this,'isStatic',!(-0x2*0x118c+0x2*-0x139+0x258b)),h(this,'layers',[Wi]),h(this,'penumbraSi'+'ze',-0x23b3+0x1655+0xd5f),h(this,'penumbraFa'+'lloff',-0x1*0x147a+-0x121*-0x21+-0x10c6),h(this,'shadowSamp'+'les',-0x45*-0x5d+0x46a+-0x1d6b),h(this,'shadowBloc'+'kerSamples',0x9b0*0x1+0x1937+0x1*-0x22d7);}}const To=Object['keys'](new bv());class RO extends we{constructor(){super(...arguments),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_cookieAss'+'et',null),h(this,'_cookieAss'+'etId',null),h(this,'_cookieAss'+'etAdd',!(-0x25*-0xc+-0xaa9+-0x2*-0x477)),h(this,'_cookieMat'+'rix',null);}get['data'](){const _0x14a83f=this['system']['store'][this['entity']['getGuid']()];return _0x14a83f?_0x14a83f['data']:null;}set['enabled'](_0x213669){this['_setValue']('enabled',_0x213669,function(_0x43be94,_0x53552c){this['onSetEnabl'+'ed'](null,_0x53552c,_0x43be94);});}get['enabled'](){return this['data']['enabled'];}set['light'](_0x4c9629){this['_setValue']('light',_0x4c9629);}get['light'](){return this['data']['light'];}set['type'](_0x59bec4){this['_setValue']('type',_0x59bec4,function(_0x264b4b,_0xda96a8){this['system']['changeType'](this,_0xda96a8,_0x264b4b),this['refreshPro'+'perties']();});}get['type'](){return this['data']['type'];}set['color'](_0x20139f){this['_setValue']('color',_0x20139f,function(_0x1b94cc,_0x36e23a){this['light']['setColor'](_0x1b94cc);},!(0x301*0x2+0x5c8*0x3+-0x175a));}get['color'](){return this['data']['color'];}set['intensity'](_0x22cd23){this['_setValue']('intensity',_0x22cd23,function(_0x3e19ca,_0x4a76c6){this['light']['intensity']=_0x3e19ca;});}get['intensity'](){return this['data']['intensity'];}set['luminance'](_0x14935e){this['_setValue']('luminance',_0x14935e,function(_0x1fa33b,_0x2c050a){this['light']['luminance']=_0x1fa33b;});}get['luminance'](){return this['data']['luminance'];}set['shape'](_0x2794d8){this['_setValue']('shape',_0x2794d8,function(_0x1826e8,_0x524af6){this['light']['shape']=_0x1826e8;});}get['shape'](){return this['data']['shape'];}set['affectSpec'+'ularity'](_0x17ba21){this['_setValue']('affectSpec'+'ularity',_0x17ba21,function(_0x49cd4f,_0x2d4509){this['light']['affectSpec'+'ularity']=_0x49cd4f;});}get['affectSpec'+'ularity'](){return this['data']['affectSpec'+'ularity'];}set['castShadow'+'s'](_0x51fd83){this['_setValue']('castShadow'+'s',_0x51fd83,function(_0x5dcc27,_0x3bd851){this['light']['castShadow'+'s']=_0x5dcc27;});}get['castShadow'+'s'](){return this['data']['castShadow'+'s'];}set['shadowDist'+'ance'](_0x377d2d){this['_setValue']('shadowDist'+'ance',_0x377d2d,function(_0xf6673b,_0x385d94){this['light']['shadowDist'+'ance']=_0xf6673b;});}get['shadowDist'+'ance'](){return this['data']['shadowDist'+'ance'];}set['shadowInte'+'nsity'](_0x1f339b){this['_setValue']('shadowInte'+'nsity',_0x1f339b,function(_0x4ad063,_0x56a032){this['light']['shadowInte'+'nsity']=_0x4ad063;});}get['shadowInte'+'nsity'](){return this['data']['shadowInte'+'nsity'];}set['shadowReso'+'lution'](_0x38a784){this['_setValue']('shadowReso'+'lution',_0x38a784,function(_0x1507d0,_0x1abdc6){this['light']['shadowReso'+'lution']=_0x1507d0;});}get['shadowReso'+'lution'](){return this['data']['shadowReso'+'lution'];}set['shadowBias'](_0x27a9e4){this['_setValue']('shadowBias',_0x27a9e4,function(_0x1f9a68,_0x286a1b){this['light']['shadowBias']=-(0x16a3+0x1ea7+0x26*-0x167+0.01)*Y['clamp'](_0x1f9a68,-0x3c0+-0x1e6*0xc+0x3*0x8d8,0x10c8+0x1869+0x8*-0x526);});}get['shadowBias'](){return this['data']['shadowBias'];}set['numCascade'+'s'](_0x12eb20){this['_setValue']('numCascade'+'s',_0x12eb20,function(_0x27d593,_0x2eaaf3){this['light']['numCascade'+'s']=Y['clamp'](Math['floor'](_0x27d593),0x2085+-0xcb0+0xc*-0x1a7,0x1350+-0x3*-0x1e5+-0x18fb);});}get['numCascade'+'s'](){return this['data']['numCascade'+'s'];}set['cascadeBle'+'nd'](_0x447062){this['_setValue']('cascadeBle'+'nd',_0x447062,function(_0x5bee15,_0x383342){this['light']['cascadeBle'+'nd']=Y['clamp'](_0x5bee15,-0x1*-0x1658+-0x3*0x773+0x1,-0xf56+-0x1*0x8a5+0x17fc);});}get['cascadeBle'+'nd'](){return this['data']['cascadeBle'+'nd'];}set['bakeNumSam'+'ples'](_0x170eb8){this['_setValue']('bakeNumSam'+'ples',_0x170eb8,function(_0x2663be,_0x5adb9a){this['light']['bakeNumSam'+'ples']=Y['clamp'](Math['floor'](_0x2663be),0x1*-0x1a95+0x1*-0x147b+-0x1*-0x2f11,-0x1*0x2d5+0x43*-0x49+-0x3*-0x7a5);});}get['bakeNumSam'+'ples'](){return this['data']['bakeNumSam'+'ples'];}set['bakeArea'](_0x5313db){this['_setValue']('bakeArea',_0x5313db,function(_0x2003aa,_0x436269){this['light']['bakeArea']=Y['clamp'](_0x2003aa,-0xc7*0x8+-0x2*-0xd7e+0x2*-0xa62,-0x1*0x1b05+-0x1*0x19c0+0x3579);});}get['bakeArea'](){return this['data']['bakeArea'];}set['cascadeDis'+'tribution'](_0x29c2c9){this['_setValue']('cascadeDis'+'tribution',_0x29c2c9,function(_0x93876b,_0x27154f){this['light']['cascadeDis'+'tribution']=Y['clamp'](_0x93876b,-0x5ec+-0x97a+0xf66,-0x3b*-0x15+-0xb23+0x64d*0x1);});}get['cascadeDis'+'tribution'](){return this['data']['cascadeDis'+'tribution'];}set['normalOffs'+'etBias'](_0x1add14){this['_setValue']('normalOffs'+'etBias',_0x1add14,function(_0x186ead,_0x4fe315){this['light']['normalOffs'+'etBias']=Y['clamp'](_0x186ead,0x1398+0x1e*-0x125+0x1*0xebe,-0x443*0x9+0x449*0x5+0x10ef);});}get['normalOffs'+'etBias'](){return this['data']['normalOffs'+'etBias'];}set['range'](_0x35c123){this['_setValue']('range',_0x35c123,function(_0x1adf5d,_0xc56bd8){this['light']['attenuatio'+'nEnd']=_0x1adf5d;});}get['range'](){return this['data']['range'];}set['innerConeA'+'ngle'](_0x188ca6){this['_setValue']('innerConeA'+'ngle',_0x188ca6,function(_0xe705aa,_0x308f5e){this['light']['innerConeA'+'ngle']=_0xe705aa;});}get['innerConeA'+'ngle'](){return this['data']['innerConeA'+'ngle'];}set['outerConeA'+'ngle'](_0x3273e1){this['_setValue']('outerConeA'+'ngle',_0x3273e1,function(_0x1d66a8,_0x4231cd){this['light']['outerConeA'+'ngle']=_0x1d66a8;});}get['outerConeA'+'ngle'](){return this['data']['outerConeA'+'ngle'];}set['falloffMod'+'e'](_0x4bc5a9){this['_setValue']('falloffMod'+'e',_0x4bc5a9,function(_0xb16222,_0x1eeb5f){this['light']['falloffMod'+'e']=_0xb16222;});}get['falloffMod'+'e'](){return this['data']['falloffMod'+'e'];}set['shadowType'](_0xbacaa6){this['_setValue']('shadowType',_0xbacaa6,function(_0x4b846a,_0x56e49e){this['light']['shadowType']=_0x4b846a;});}get['shadowType'](){return this['data']['shadowType'];}set['vsmBlurSiz'+'e'](_0x37257e){this['_setValue']('vsmBlurSiz'+'e',_0x37257e,function(_0x4d46fc,_0x1c2df7){this['light']['vsmBlurSiz'+'e']=_0x4d46fc;});}get['vsmBlurSiz'+'e'](){return this['data']['vsmBlurSiz'+'e'];}set['vsmBlurMod'+'e'](_0xb58958){this['_setValue']('vsmBlurMod'+'e',_0xb58958,function(_0x1ef464,_0x55369d){this['light']['vsmBlurMod'+'e']=_0x1ef464;});}get['vsmBlurMod'+'e'](){return this['data']['vsmBlurMod'+'e'];}set['vsmBias'](_0x2cfe7b){this['_setValue']('vsmBias',_0x2cfe7b,function(_0x59cf70,_0x28ec1b){this['light']['vsmBias']=Y['clamp'](_0x59cf70,-0x16e6+0x251a+-0xe34,0xe17+-0x29*0x51+-0x3*0x5f);});}get['vsmBias'](){return this['data']['vsmBias'];}set['cookieAsse'+'t'](_0x93f78c){this['_setValue']('cookieAsse'+'t',_0x93f78c,function(_0x38da15,_0x16e88f){if(!(this['_cookieAss'+'etId']&&(_0x38da15 instanceof me&&_0x38da15['id']===this['_cookieAss'+'etId']||_0x38da15===this['_cookieAss'+'etId']))){if(this['onCookieAs'+'setRemove'](),this['_cookieAss'+'etId']=null,_0x38da15 instanceof me)this['data']['cookieAsse'+'t']=_0x38da15['id'],this['_cookieAss'+'etId']=_0x38da15['id'],this['onCookieAs'+'setAdd'](_0x38da15);else{if(typeof _0x38da15=='number'){this['_cookieAss'+'etId']=_0x38da15;const _0x2b9bf3=this['system']['app']['assets']['get'](_0x38da15);_0x2b9bf3?this['onCookieAs'+'setAdd'](_0x2b9bf3):(this['_cookieAss'+'etAdd']=!(0x7f*0x2f+0x1982+-0x1*0x30d3),this['system']['app']['assets']['on']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this));}}}});}get['cookieAsse'+'t'](){return this['data']['cookieAsse'+'t'];}set['cookie'](_0x4c87df){this['_setValue']('cookie',_0x4c87df,function(_0x34b64b,_0x46183e){this['light']['cookie']=_0x34b64b;});}get['cookie'](){return this['data']['cookie'];}set['cookieInte'+'nsity'](_0x1cdbef){this['_setValue']('cookieInte'+'nsity',_0x1cdbef,function(_0x236195,_0x1fe5f6){this['light']['cookieInte'+'nsity']=Y['clamp'](_0x236195,-0x7ab+0x13b7+0x404*-0x3,-0x1631+-0x3*0x9fd+0x3429);});}get['cookieInte'+'nsity'](){return this['data']['cookieInte'+'nsity'];}set['cookieFall'+'off'](_0x1c79b7){this['_setValue']('cookieFall'+'off',_0x1c79b7,function(_0x167a47,_0x503aad){this['light']['cookieFall'+'off']=_0x167a47;});}get['cookieFall'+'off'](){return this['data']['cookieFall'+'off'];}set['cookieChan'+'nel'](_0x4f98d4){this['_setValue']('cookieChan'+'nel',_0x4f98d4,function(_0x34cd25,_0x450698){this['light']['cookieChan'+'nel']=_0x34cd25;});}get['cookieChan'+'nel'](){return this['data']['cookieChan'+'nel'];}set['cookieAngl'+'e'](_0x1500d9){this['_setValue']('cookieAngl'+'e',_0x1500d9,function(_0x5d139e,_0x25e967){if(_0x5d139e!==-0x1468+0x1b66+-0x6fe||this['cookieScal'+'e']!==null){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new ae());let _0x1284b0=-0x79+0x1538+-0x14be,_0xd50d0d=0x2*-0x90b+0x6a*-0x17+-0x1b9d*-0x1;this['cookieScal'+'e']&&(_0x1284b0=this['cookieScal'+'e']['x'],_0xd50d0d=this['cookieScal'+'e']['y']);const _0x5220e2=Math['cos'](_0x5d139e*Y['DEG_TO_RAD']),_0x2ce2be=Math['sin'](_0x5d139e*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x5220e2/_0x1284b0,-_0x2ce2be/_0x1284b0,_0x2ce2be/_0xd50d0d,_0x5220e2/_0xd50d0d),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;});}get['cookieAngl'+'e'](){return this['data']['cookieAngl'+'e'];}set['cookieScal'+'e'](_0x1b595e){this['_setValue']('cookieScal'+'e',_0x1b595e,function(_0x55ca3f,_0x26c514){if(_0x55ca3f!==null||this['cookieAngl'+'e']!==0x1*0x22d+-0xb5e+0x931){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new ae());const _0x3aabde=_0x55ca3f['x'],_0x1bdfee=_0x55ca3f['y'],_0x4e4020=Math['cos'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']),_0x8ac653=Math['sin'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x4e4020/_0x3aabde,-_0x8ac653/_0x3aabde,_0x8ac653/_0x1bdfee,_0x4e4020/_0x1bdfee),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;},!(-0x1192+-0x2609+0x379b));}get['cookieScal'+'e'](){return this['data']['cookieScal'+'e'];}set['cookieOffs'+'et'](_0x4c6083){this['_setValue']('cookieOffs'+'et',_0x4c6083,function(_0x4a5292,_0x3d96dc){this['light']['cookieOffs'+'et']=_0x4a5292;},!(0x2*0xf86+-0x2458*0x1+-0x1c4*-0x3));}get['cookieOffs'+'et'](){return this['data']['cookieOffs'+'et'];}set['shadowUpda'+'teMode'](_0xe1917d){this['_setValue']('shadowUpda'+'teMode',_0xe1917d,function(_0x1f54bd,_0x49e3bc){this['light']['shadowUpda'+'teMode']=_0x1f54bd;},!(-0x5*0x60d+0x5*0x68f+0xa*-0x41));}get['shadowUpda'+'teMode'](){return this['data']['shadowUpda'+'teMode'];}set['mask'](_0x4c50b9){this['_setValue']('mask',_0x4c50b9,function(_0x179f41,_0x125818){this['light']['mask']=_0x179f41;});}get['mask'](){return this['data']['mask'];}set['affectDyna'+'mic'](_0x510841){this['_setValue']('affectDyna'+'mic',_0x510841,function(_0x1e2135,_0x525a67){_0x1e2135?this['light']['mask']|=ds:this['light']['mask']&=~ds,this['light']['layersDirt'+'y']();});}get['affectDyna'+'mic'](){return this['data']['affectDyna'+'mic'];}set['affectLigh'+'tmapped'](_0x4fc297){this['_setValue']('affectLigh'+'tmapped',_0x4fc297,function(_0x1db48b,_0x17eaa6){_0x1db48b?(this['light']['mask']|=si,this['bake']&&(this['light']['mask']&=~ii)):(this['light']['mask']&=~si,this['bake']&&(this['light']['mask']|=ii));});}get['affectLigh'+'tmapped'](){return this['data']['affectLigh'+'tmapped'];}set['bake'](_0x452c84){this['_setValue']('bake',_0x452c84,function(_0x10afa0,_0x529f6e){_0x10afa0?(this['light']['mask']|=ii,this['affectLigh'+'tmapped']&&(this['light']['mask']&=~si)):(this['light']['mask']&=~ii,this['affectLigh'+'tmapped']&&(this['light']['mask']|=si)),this['light']['layersDirt'+'y']();});}get['bake'](){return this['data']['bake'];}set['bakeDir'](_0x507f33){this['_setValue']('bakeDir',_0x507f33,function(_0xd94204,_0x8669ac){this['light']['bakeDir']=_0xd94204;});}get['bakeDir'](){return this['data']['bakeDir'];}set['isStatic'](_0x3032dd){this['_setValue']('isStatic',_0x3032dd,function(_0x750e59,_0x24cb36){this['light']['isStatic']=_0x750e59;});}get['isStatic'](){return this['data']['isStatic'];}set['layers'](_0x40fb9c){this['_setValue']('layers',_0x40fb9c,function(_0x5212b9,_0x2eb5d5){for(let _0x157539=-0xa5*-0x25+-0xe1b*0x2+-0x45d*-0x1;_0x157539<_0x2eb5d5['length'];_0x157539++){const _0x16a059=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x2eb5d5[_0x157539]);_0x16a059&&(_0x16a059['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x16a059));}for(let _0x2b79b2=-0x1197+-0x581*0x1+0x1*0x1718;_0x2b79b2<_0x5212b9['length'];_0x2b79b2++){const _0x154fc9=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x5212b9[_0x2b79b2]);_0x154fc9&&this['enabled']&&this['entity']['enabled']&&(_0x154fc9['addLight'](this),this['light']['addLayer'](_0x154fc9));}});}get['layers'](){return this['data']['layers'];}set['shadowUpda'+'teOverride'+'s'](_0x4447f0){this['light']['shadowUpda'+'teOverride'+'s']=_0x4447f0;}get['shadowUpda'+'teOverride'+'s'](){return this['light']['shadowUpda'+'teOverride'+'s'];}set['shadowSamp'+'les'](_0x36ab61){this['light']['shadowSamp'+'les']=_0x36ab61;}get['shadowSamp'+'les'](){return this['light']['shadowSamp'+'les'];}set['shadowBloc'+'kerSamples'](_0x4ab789){this['light']['shadowBloc'+'kerSamples']=_0x4ab789;}get['shadowBloc'+'kerSamples'](){return this['light']['shadowBloc'+'kerSamples'];}set['penumbraSi'+'ze'](_0x3ee76d){this['light']['penumbraSi'+'ze']=_0x3ee76d;}get['penumbraSi'+'ze'](){return this['light']['penumbraSi'+'ze'];}set['penumbraFa'+'lloff'](_0x261099){this['light']['penumbraFa'+'lloff']=_0x261099;}get['penumbraFa'+'lloff'](){return this['light']['penumbraFa'+'lloff'];}['_setValue'](_0x41379f,_0x15147d,_0x5ef690,_0x579b20){const _0x4c7678=this['data'],_0x579d7e=_0x4c7678[_0x41379f];!_0x579b20&&_0x579d7e===_0x15147d||(_0x4c7678[_0x41379f]=_0x15147d,_0x5ef690&&_0x5ef690['call'](this,_0x15147d,_0x579d7e));}['addLightTo'+'Layers'](){for(let _0x2db8c7=-0x1*-0xf39+0x5*-0x683+0x1156;_0x2db8c7<this['layers']['length'];_0x2db8c7++){const _0x5730f8=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x2db8c7]);_0x5730f8&&(_0x5730f8['addLight'](this),this['light']['addLayer'](_0x5730f8));}}['removeLigh'+'tFromLayer'+'s'](){for(let _0x3dc1e0=0x9bd*0x3+-0x5*0x3d3+-0x44*0x26;_0x3dc1e0<this['layers']['length'];_0x3dc1e0++){const _0x17488b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x3dc1e0]);_0x17488b&&(_0x17488b['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x17488b));}}['onLayersCh'+'anged'](_0x13441a,_0x57157b){this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),_0x13441a['off']('add',this['onLayerAdd'+'ed'],this),_0x13441a['off']('remove',this['onLayerRem'+'oved'],this),_0x57157b['on']('add',this['onLayerAdd'+'ed'],this),_0x57157b['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x1491f6){this['layers']['indexOf'](_0x1491f6['id'])>=0x20aa+-0x244d*0x1+0x85*0x7&&this['enabled']&&this['entity']['enabled']&&(_0x1491f6['addLight'](this),this['light']['addLayer'](_0x1491f6));}['onLayerRem'+'oved'](_0x15b87a){this['layers']['indexOf'](_0x15b87a['id'])>=-0x262d+0x48b*0x8+0x7*0x43&&(_0x15b87a['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x15b87a));}['refreshPro'+'perties'](){for(let _0x1a6481=-0x1e70+0x49*-0x16+0x24b6;_0x1a6481<To['length'];_0x1a6481++){const _0x5acfe7=To[_0x1a6481];this[_0x5acfe7]=this[_0x5acfe7];}this['enabled']&&this['entity']['enabled']&&this['onEnable']();}['onCookieAs'+'setSet'](){let _0x1d7fcd=!(0x14e1+0x1*-0xc02+-0x1*0x8de);this['_cookieAss'+'et']['type']==='cubemap'&&!this['_cookieAss'+'et']['loadFaces']&&(this['_cookieAss'+'et']['loadFaces']=!(-0x13d+-0xb3*0x37+0x27b2),_0x1d7fcd=!(0x1dc7+0x1*0x15e6+-0x1*0x33ad)),(!this['_cookieAss'+'et']['resource']||_0x1d7fcd)&&this['system']['app']['assets']['load'](this['_cookieAss'+'et']),this['_cookieAss'+'et']['resource']&&this['onCookieAs'+'setLoad']();}['onCookieAs'+'setAdd'](_0xd5b3ad){this['_cookieAss'+'etId']===_0xd5b3ad['id']&&(this['_cookieAss'+'et']=_0xd5b3ad,this['light']['enabled']&&this['onCookieAs'+'setSet'](),this['_cookieAss'+'et']['on']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['on']('remove',this['onCookieAs'+'setRemove'],this));}['onCookieAs'+'setLoad'](){!this['_cookieAss'+'et']||!this['_cookieAss'+'et']['resource']||(this['cookie']=this['_cookieAss'+'et']['resource']);}['onCookieAs'+'setRemove'](){this['_cookieAss'+'etId']&&(this['_cookieAss'+'etAdd']&&(this['system']['app']['assets']['off']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this),this['_cookieAss'+'etAdd']=!(0x11fc+-0x36+-0x11c5)),this['_cookieAss'+'et']&&(this['_cookieAss'+'et']['off']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['off']('remove',this['onCookieAs'+'setRemove'],this),this['_cookieAss'+'et']=null),this['cookie']=null);}['onEnable'](){const _0x4dd2cd=this['system']['app']['scene'],_0x45646b=_0x4dd2cd['layers'];this['light']['enabled']=!(0x8e9+-0x2*0x629+-0x123*-0x3),this['_evtLayers'+'Changed']=_0x4dd2cd['on']('set:layers',this['onLayersCh'+'anged'],this),_0x45646b&&(this['_evtLayerA'+'dded']=_0x45646b['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x45646b['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),this['_cookieAss'+'et']&&!this['cookie']&&this['onCookieAs'+'setSet']();}['onDisable'](){var _0x1cea9,_0x2c6286,_0x5295af;const _0x3e4a6d=this['system']['app']['scene']['layers'];this['light']['enabled']=!(-0x13ac+-0x240d+0x37ba),(_0x1cea9=this['_evtLayers'+'Changed'])==null||_0x1cea9['off'](),this['_evtLayers'+'Changed']=null,_0x3e4a6d&&((_0x2c6286=this['_evtLayerA'+'dded'])==null||_0x2c6286['off'](),this['_evtLayerA'+'dded']=null,(_0x5295af=this['_evtLayerR'+'emoved'])==null||_0x5295af['off'](),this['_evtLayerR'+'emoved']=null),this['removeLigh'+'tFromLayer'+'s']();}['onRemove'](){this['onDisable'](),this['light']['destroy'](),this['cookieAsse'+'t']=null;}}class OO extends lt{constructor(_0x1f6ffa){super(_0x1f6ffa),this['id']='light',this['ComponentT'+'ype']=RO,this['DataType']=bv,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0xac1772,_0xca09e8){const _0x4aec31={..._0xca09e8};_0x4aec31['type']||(_0x4aec31['type']=_0xac1772['data']['type']),_0xac1772['data']['type']=_0x4aec31['type'],_0x4aec31['layers']&&Array['isArray'](_0x4aec31['layers'])&&(_0x4aec31['layers']=_0x4aec31['layers']['slice'](-0x20bf+0x21bb+-0x3f*0x4)),_0x4aec31['color']&&Array['isArray'](_0x4aec31['color'])&&(_0x4aec31['color']=new ie(_0x4aec31['color'][-0x19*-0x9e+-0x336+-0x17*0x88],_0x4aec31['color'][-0xb5*0x35+-0x1d6b*0x1+0x42e5],_0x4aec31['color'][0x36*-0x59+0x7*0x93+0xec3])),_0x4aec31['cookieOffs'+'et']&&_0x4aec31['cookieOffs'+'et']instanceof Array&&(_0x4aec31['cookieOffs'+'et']=new J(_0x4aec31['cookieOffs'+'et'][0x1*0x1052+-0x383*0x3+-0x5c9],_0x4aec31['cookieOffs'+'et'][-0x5*0x2+-0x1c98+-0x1*-0x1ca3])),_0x4aec31['cookieScal'+'e']&&_0x4aec31['cookieScal'+'e']instanceof Array&&(_0x4aec31['cookieScal'+'e']=new J(_0x4aec31['cookieScal'+'e'][-0x1297*0x2+-0x118d*-0x1+0x14f*0xf],_0x4aec31['cookieScal'+'e'][-0x1f1e+0x1*0x6b1+0x186e])),_0x4aec31['enable']&&(console['warn']('WARNING:\x20e'+'nable:\x20Pro'+'perty\x20is\x20d'+'eprecated.'+'\x20Set\x20enabl'+'ed\x20propert'+'y\x20instead.'),_0x4aec31['enabled']=_0x4aec31['enable']),_0x4aec31['shape']||(_0x4aec31['shape']=Vs);const _0x29b189=new Ho(this['app']['graphicsDe'+'vice'],this['app']['scene']['clusteredL'+'ightingEna'+'bled']);_0x29b189['type']=Lf[_0x4aec31['type']],_0x29b189['_node']=_0xac1772['entity'],_0xac1772['data']['light']=_0x29b189,super['initialize'+'ComponentD'+'ata'](_0xac1772,_0x4aec31,To);}['_onRemoveC'+'omponent'](_0x55b205,_0x37cafc){_0x37cafc['onRemove']();}['cloneCompo'+'nent'](_0x92cf75,_0x93480d){const _0x2de628=_0x92cf75['light'],_0xf205ed=[];let _0x565061;for(let _0x1326da=-0x1fa6+-0x149a+-0x2*-0x1a20;_0x1326da<To['length'];_0x1326da++)_0x565061=To[_0x1326da],_0x565061!=='light'&&(_0x2de628[_0x565061]&&_0x2de628[_0x565061]['clone']?_0xf205ed[_0x565061]=_0x2de628[_0x565061]['clone']():_0xf205ed[_0x565061]=_0x2de628[_0x565061]);return this['addCompone'+'nt'](_0x93480d,_0xf205ed);}['changeType'](_0x35b8a3,_0x2218b3,_0x38ac39){_0x2218b3!==_0x38ac39&&(_0x35b8a3['light']['type']=Lf[_0x38ac39]);}}const FO=['x','y','z','w'],NO=[void(-0xec5+-0xe3*-0x15+-0x3da),void(-0x265+0xd*-0x5e+0x72b),J,I,ae];function Rn(_0x29f1cd,_0x122c05,_0x1e11da,_0x5e2cf0){switch(_0x122c05['type']){case'boolean':return!!_0x1e11da;case'number':if(typeof _0x1e11da=='number')return _0x1e11da;if(typeof _0x1e11da=='string'){const _0x256786=parseInt(_0x1e11da,-0x21*0xb0+-0x1*-0x19b3+-0x1*0x2f9);return isNaN(_0x256786)?null:_0x256786;}else{if(typeof _0x1e11da=='boolean')return 0x1dba+0x21c2+-0x3f7c+_0x1e11da;}return null;case'json':{const _0x37849a={};if(Array['isArray'](_0x122c05['schema'])){(!_0x1e11da||typeof _0x1e11da!='object')&&(_0x1e11da={});for(let _0x51c76c=0x1d4c+-0xdfc+-0x2*0x7a8;_0x51c76c<_0x122c05['schema']['length'];_0x51c76c++){const _0xcb95ff=_0x122c05['schema'][_0x51c76c];if(_0xcb95ff['name']){if(_0xcb95ff['array']){_0x37849a[_0xcb95ff['name']]=[];const _0x1fdc36=Array['isArray'](_0x1e11da[_0xcb95ff['name']])?_0x1e11da[_0xcb95ff['name']]:[];for(let _0xc3ee9e=0x36*0x44+0x1*0x6+-0xe5e;_0xc3ee9e<_0x1fdc36['length'];_0xc3ee9e++)_0x37849a[_0xcb95ff['name']]['push'](Rn(_0x29f1cd,_0xcb95ff,_0x1fdc36[_0xc3ee9e]));}else{const _0x74e719=_0x1e11da['hasOwnProp'+'erty'](_0xcb95ff['name'])?_0x1e11da[_0xcb95ff['name']]:_0xcb95ff['default'];_0x37849a[_0xcb95ff['name']]=Rn(_0x29f1cd,_0xcb95ff,_0x74e719);}}}}return _0x37849a;}case'asset':return _0x1e11da instanceof me?_0x1e11da:typeof _0x1e11da=='number'?_0x29f1cd['assets']['get'](_0x1e11da)||null:typeof _0x1e11da=='string'&&_0x29f1cd['assets']['get'](parseInt(_0x1e11da,0xe6d+-0x14ad+0x64a*0x1))||null;case'entity':return _0x1e11da instanceof He?_0x1e11da:typeof _0x1e11da=='string'?_0x29f1cd['getEntityF'+'romIndex'](_0x1e11da):null;case'rgb':case'rgba':if(_0x1e11da instanceof ie)return _0x5e2cf0 instanceof ie?(_0x5e2cf0['copy'](_0x1e11da),_0x5e2cf0):_0x1e11da['clone']();if(_0x1e11da instanceof Array&&_0x1e11da['length']>=0x18d9*-0x1+-0x2*0x105a+0x3990&&_0x1e11da['length']<=0x16b8+0x137a+-0x2a2e){for(let _0x51508a=-0x13a7+-0x12bf+0x2666;_0x51508a<_0x1e11da['length'];_0x51508a++)if(typeof _0x1e11da[_0x51508a]!='number')return null;return _0x5e2cf0||(_0x5e2cf0=new ie()),_0x5e2cf0['r']=_0x1e11da[0x1*0x1ee3+0x331*0x3+-0x2876],_0x5e2cf0['g']=_0x1e11da[0x73+-0x4*-0x821+-0x107b*0x2],_0x5e2cf0['b']=_0x1e11da[-0x8cb*-0x1+-0x242c+-0x9*-0x30b],_0x5e2cf0['a']=_0x1e11da['length']===0x1b74+-0x27*-0x6d+0x4*-0xb03?-0x1*0x117b+-0xf51+0x20cd:_0x1e11da[-0x1*-0x19fb+-0x139d*0x1+0x1*-0x65b],_0x5e2cf0;}else{if(typeof _0x1e11da=='string'&&/#(?:[0-9a-f]{2}){3,4}/i['test'](_0x1e11da))return _0x5e2cf0||(_0x5e2cf0=new ie()),_0x5e2cf0['fromString'](_0x1e11da),_0x5e2cf0;}return null;case'vec2':case'vec3':case'vec4':{const _0x59b1ab=parseInt(_0x122c05['type']['slice'](-0xc9d+0x2070+-0x13d0),0x1*0x218d+-0x11f8+-0xf8b),_0x2a09aa=NO[_0x59b1ab];if(_0x1e11da instanceof _0x2a09aa)return _0x5e2cf0 instanceof _0x2a09aa?(_0x5e2cf0['copy'](_0x1e11da),_0x5e2cf0):_0x1e11da['clone']();if(_0x1e11da instanceof Array&&_0x1e11da['length']===_0x59b1ab){for(let _0x25c5f5=-0x1*0x22c3+-0x79*-0x11+-0x2*-0xd5d;_0x25c5f5<_0x1e11da['length'];_0x25c5f5++)if(typeof _0x1e11da[_0x25c5f5]!='number')return null;_0x5e2cf0||(_0x5e2cf0=new _0x2a09aa());for(let _0x177c26=0x28*-0x7f+-0x791+-0x3*-0x923;_0x177c26<_0x59b1ab;_0x177c26++)_0x5e2cf0[FO[_0x177c26]]=_0x1e11da[_0x177c26];return _0x5e2cf0;}return null;}case'curve':if(_0x1e11da){let _0x5b7473;if(_0x1e11da instanceof Bs||_0x1e11da instanceof Wr)_0x5b7473=_0x1e11da['clone']();else{const _0x28e363=_0x1e11da['keys'][0x1f71+0x86*0x3d+-0x3f5f*0x1]instanceof Array?Wr:Bs;_0x5b7473=new _0x28e363(_0x1e11da['keys']),_0x5b7473['type']=_0x1e11da['type'];}return _0x5b7473;}break;}return _0x1e11da;}function Cv(_0x2ae00b,_0x260d11,_0x1b6fbb,_0x2e5ab3){return _0x260d11['array']?_0x1b6fbb['map']((_0x54bd96,_0x44f193)=>Rn(_0x2ae00b,_0x260d11,_0x54bd96,_0x2e5ab3?_0x2e5ab3[_0x44f193]:null)):Rn(_0x2ae00b,_0x260d11,_0x1b6fbb,_0x2e5ab3);}function Pv(_0x39b424,_0x1691b0,_0x1de0bf,_0x26a902){if(_0x1de0bf)for(const _0x198c1c in _0x1691b0){const _0x113ce2=_0x1691b0[_0x198c1c],_0x401af6=_0x1de0bf[_0x198c1c];_0x401af6!==void(0x9e8*0x2+-0x16cf+-0x3b*-0xd)&&(_0x26a902[_0x198c1c]=Cv(_0x39b424,_0x113ce2,_0x401af6,_0x26a902[_0x198c1c]));}}const rn=class rn{constructor(_0x3dc227){this['scriptType']=_0x3dc227,this['index']={};}['add'](_0x108348,_0x3af0bc){if(this['index'][_0x108348]){M['warn']('attribute\x20'+'\x27'+_0x108348+('\x27\x20is\x20alrea'+'dy\x20defined'+'\x20for\x20scrip'+'t\x20type\x20\x27')+this['scriptType']['name']+'\x27');return;}else{if(rn['reservedNa'+'mes']['has'](_0x108348)){M['warn']('attribute\x20'+'\x27'+_0x108348+('\x27\x20is\x20a\x20res'+'erved\x20attr'+'ibute\x20name'));return;}}this['index'][_0x108348]=_0x3af0bc,Object['defineProp'+'erty'](this['scriptType']['prototype'],_0x108348,{'get':function(){return this['__attribut'+'es'][_0x108348];},'set':function(_0x366eb1){const _0x4f3499='attr',_0x139084='attr:'+_0x108348,_0x287751=this['__attribut'+'es'][_0x108348];let _0x342be9=_0x287751;if(_0x287751&&_0x3af0bc['type']!=='json'&&_0x3af0bc['type']!=='entity'&&_0x287751['clone']&&(this['hasEvent'](_0x4f3499)||this['hasEvent'](_0x139084))&&(_0x342be9=_0x287751['clone']()),_0x3af0bc['array']){if(this['__attribut'+'es'][_0x108348]=[],_0x366eb1){for(let _0x1f3c4b=-0x1a12+0x1226+-0x1*-0x7ec,_0x305bc2=_0x366eb1['length'];_0x1f3c4b<_0x305bc2;_0x1f3c4b++)this['__attribut'+'es'][_0x108348]['push'](Rn(this['app'],_0x3af0bc,_0x366eb1[_0x1f3c4b],_0x287751?_0x287751[_0x1f3c4b]:null));}}else this['__attribut'+'es'][_0x108348]=Rn(this['app'],_0x3af0bc,_0x366eb1,_0x287751);this['fire'](_0x4f3499,_0x108348,this['__attribut'+'es'][_0x108348],_0x342be9),this['fire'](_0x139084,this['__attribut'+'es'][_0x108348],_0x342be9);}});}['remove'](_0x2d9a0d){return this['index'][_0x2d9a0d]?(delete this['index'][_0x2d9a0d],delete this['scriptType']['prototype'][_0x2d9a0d],!(-0x1746+0x1a3c*-0x1+0x1*0x3182)):!(0xc11+0x2418+-0x3028*0x1);}['has'](_0x5423d8){return!!this['index'][_0x5423d8];}['get'](_0x567fd6){return this['index'][_0x567fd6]||null;}};h(rn,'assignAttr'+'ibutesToSc'+'ript',Pv),h(rn,'attributeT'+'oValue',Cv),h(rn,'reservedNa'+'mes',new Set(['app','entity','enabled','_enabled','_enabledOl'+'d','_destroyed','__attribut'+'es','__attribut'+'esRaw','__scriptTy'+'pe','__executio'+'nOrder','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']));let qo=rn;const au='initialize',nu='postInitia'+'lize',kO='update',UO='postUpdate',BO='swap';class qt extends pe{constructor(_0x851cee){super(),h(this,'app'),h(this,'entity'),h(this,'_enabled'),h(this,'_enabledOl'+'d'),h(this,'_initializ'+'ed'),h(this,'_postIniti'+'alized'),h(this,'__destroye'+'d'),h(this,'__scriptTy'+'pe'),h(this,'__executio'+'nOrder'),this['initScript'](_0x851cee);}set['enabled'](_0x397b57){this['_enabled']=!!_0x397b57,this['enabled']!==this['_enabledOl'+'d']&&(this['_enabledOl'+'d']=this['enabled'],this['fire'](this['enabled']?'enable':'disable'),this['fire']('state',this['enabled']),!this['_initializ'+'ed']&&this['enabled']&&(this['_initializ'+'ed']=!(0x22fc+0x2172+-0x446e),this['fire']('preInitial'+'ize'),this['initialize']&&this['entity']['script']['_scriptMet'+'hod'](this,au)),this['_initializ'+'ed']&&!this['_postIniti'+'alized']&&this['enabled']&&!this['entity']['script']['_beingEnab'+'led']&&(this['_postIniti'+'alized']=!(0x24b4+-0x1150+-0x1364),this['postInitia'+'lize']&&this['entity']['script']['_scriptMet'+'hod'](this,nu)));}get['enabled'](){return this['_enabled']&&!this['_destroyed']&&this['entity']['script']['enabled']&&this['entity']['enabled'];}['initScript'](_0x20b63f){const _0x34f54a=this['constructo'+'r'];M['assert'](_0x20b63f&&_0x20b63f['app']&&_0x20b63f['entity'],'script\x20['+_0x34f54a['__name']+(']\x20has\x20miss'+'ing\x20argume'+'nts\x20in\x20con'+'structor')),this['app']=_0x20b63f['app'],this['entity']=_0x20b63f['entity'],this['_enabled']=typeof _0x20b63f['enabled']=='boolean'?_0x20b63f['enabled']:!(-0x1645+0x1664+0x1*-0x1f),this['_enabledOl'+'d']=this['enabled'],this['__destroye'+'d']=!(-0x1*-0x9a1+-0x2*0x98e+-0x4*-0x25f),this['__scriptTy'+'pe']=_0x34f54a,this['__executio'+'nOrder']=-(0x157b+-0x1393+0x1e7*-0x1);}static get['scriptName'](){return this['__name'];}}h(qt,'EVENT_ENAB'+'LE','enable'),h(qt,'EVENT_DISA'+'BLE','disable'),h(qt,'EVENT_STAT'+'E','state'),h(qt,'EVENT_DEST'+'ROY','destroy'),h(qt,'EVENT_ATTR','attr'),h(qt,'EVENT_ERRO'+'R','error'),h(qt,'__name',null),h(qt,'__getScrip'+'tName',Mv);const zO=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s\/]*)\s*/;function Mv(_0x42374d){if(typeof _0x42374d!='function')return;if(_0x42374d['scriptName'])return _0x42374d['scriptName'];if('name'in Function['prototype'])return _0x42374d['name'];if(_0x42374d===Function||_0x42374d===Function['prototype']['constructo'+'r'])return'Function';const _0x2a899a=(''+_0x42374d)['match'](zO);return _0x2a899a?_0x2a899a[0x760+0xd35+0x6*-0x36e]:void(0xbb8+-0x192+-0xa26);}class wo extends qt{constructor(_0x4b67ae){super(_0x4b67ae),h(this,'__attribut'+'es'),h(this,'__attribut'+'esRaw'),this['initScript'+'Type'](_0x4b67ae);}static get['attributes'](){return this['hasOwnProp'+'erty']('__attribut'+'es')||(this['__attribut'+'es']=new qo(this)),this['__attribut'+'es'];}['initScript'](_0x23679d){qt['prototype']['initScript']['call'](this,_0x23679d),this['__attribut'+'es']={},this['__attribut'+'esRaw']=_0x23679d['attributes']||{};}['initScript'+'Type'](_0x5c42d7){this['initScript'](_0x5c42d7);}['__initiali'+'zeAttribut'+'es'](_0x1a2fd7){if(!(!_0x1a2fd7&&!this['__attribut'+'esRaw'])){for(const _0x1dace7 in this['__scriptTy'+'pe']['attributes']['index'])this['__attribut'+'esRaw']&&this['__attribut'+'esRaw']['hasOwnProp'+'erty'](_0x1dace7)?this[_0x1dace7]=this['__attribut'+'esRaw'][_0x1dace7]:this['__attribut'+'es']['hasOwnProp'+'erty'](_0x1dace7)||(this['__scriptTy'+'pe']['attributes']['index'][_0x1dace7]['hasOwnProp'+'erty']('default')?this[_0x1dace7]=this['__scriptTy'+'pe']['attributes']['index'][_0x1dace7]['default']:this[_0x1dace7]=null);this['__attribut'+'esRaw']=null;}}static['extend'](_0x31868c){for(const _0x349c99 in _0x31868c)_0x31868c['hasOwnProp'+'erty'](_0x349c99)&&(this['prototype'][_0x349c99]=_0x31868c[_0x349c99]);}}const VO=_0xfefa92=>_0xfefa92[0x124+-0x1f*0xd7+-0x18e5*-0x1]['toLowerCas'+'e']()+_0xfefa92['substring'](-0x19f1+0x809*0x1+0x11e9);class Ei extends we{constructor(_0x5a39cc,_0x4478f8){super(_0x5a39cc,_0x4478f8),h(this,'_attribute'+'DataMap',new Map()),(this['_scripts']=[],this['_updateLis'+'t']=new Ph({'sortBy':'__executio'+'nOrder'}),this['_postUpdat'+'eList']=new Ph({'sortBy':'__executio'+'nOrder'}),this['_scriptsIn'+'dex']={},this['_destroyed'+'Scripts']=[],this['_destroyed']=!(-0xe43+0x1*0x144f+-0xdd*0x7),this['_scriptsDa'+'ta']=null,this['_oldState']=!(-0x313*0x9+0x777+0x1434),this['_enabled']=!(0x841*0x1+0x1*-0x332+-0x50f),this['_beingEnab'+'led']=!(-0x2203+0x57e+0xe43*0x2),this['_isLooping'+'ThroughScr'+'ipts']=!(-0x18cf+-0x57*0x5d+0x386b),this['_execution'+'Order']=-(-0x13e8+-0x4d1+0x18ba),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this));}set['scripts'](_0x40dd84){this['_scriptsDa'+'ta']=_0x40dd84;for(const _0x1f1667 in _0x40dd84){if(!_0x40dd84['hasOwnProp'+'erty'](_0x1f1667))continue;const _0x45de1d=this['_scriptsIn'+'dex'][_0x1f1667];if(_0x45de1d){if(typeof _0x40dd84[_0x1f1667]['enabled']=='boolean'&&(_0x45de1d['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x45de1d);}),_0x45de1d['enabled']=!!_0x40dd84[_0x1f1667]['enabled']),typeof _0x40dd84[_0x1f1667]['attributes']=='object'){for(const _0x17fa38 in _0x40dd84[_0x1f1667]['attributes'])if(!qo['reservedNa'+'mes']['has'](_0x17fa38)){if(!_0x45de1d['__attribut'+'es']['hasOwnProp'+'erty'](_0x17fa38)){const _0x11fc31=this['system']['app']['scripts']['get'](_0x1f1667);_0x11fc31&&_0x11fc31['attributes']['add'](_0x17fa38,{});}_0x45de1d[_0x17fa38]=_0x40dd84[_0x1f1667]['attributes'][_0x17fa38];}}}else console['log'](this['order']);}}get['scripts'](){return this['_scripts'];}set['enabled'](_0x178fd2){const _0x4e146e=this['_enabled'];this['_enabled']=_0x178fd2,this['fire']('set','enabled',_0x4e146e,_0x178fd2);}get['enabled'](){return this['_enabled'];}['onEnable'](){this['_beingEnab'+'led']=!(-0xa*0x1d7+0x1e4c+0x2*-0x5f3),this['_checkStat'+'e'](),this['entity']['_beingEnab'+'led']||this['onPostStat'+'eChange'](),this['_beingEnab'+'led']=!(0x17*-0xc7+-0x1ea8+0x2*0x1845);}['onDisable'](){this['_checkStat'+'e']();}['onPostStat'+'eChange'](){const _0xe7ef5f=this['_beginLoop'+'ing']();for(let _0x162193=-0x11c5*-0x1+-0xa93+-0x732,_0x9e6a21=this['scripts']['length'];_0x162193<_0x9e6a21;_0x162193++){const _0x7b9cf2=this['scripts'][_0x162193];_0x7b9cf2['_initializ'+'ed']&&!_0x7b9cf2['_postIniti'+'alized']&&_0x7b9cf2['enabled']&&(_0x7b9cf2['_postIniti'+'alized']=!(-0x1*-0x3b3+-0x9d9+0x626*0x1),_0x7b9cf2['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x7b9cf2,nu));}this['_endLoopin'+'g'](_0xe7ef5f);}['_beginLoop'+'ing'](){const _0x20b7f8=this['_isLooping'+'ThroughScr'+'ipts'];return this['_isLooping'+'ThroughScr'+'ipts']=!(-0x5af*-0x1+-0x1516+0xf67*0x1),_0x20b7f8;}['_endLoopin'+'g'](_0x163117){this['_isLooping'+'ThroughScr'+'ipts']=_0x163117,this['_isLooping'+'ThroughScr'+'ipts']||this['_removeDes'+'troyedScri'+'pts']();}['_onSetEnab'+'led'](_0x45dfc1,_0x4ccd14,_0x350583){this['_beingEnab'+'led']=!(0x1b65+-0x31d*0xb+-0x36d*-0x2),this['_checkStat'+'e'](),this['_beingEnab'+'led']=!(0x235f+-0x1ab3*0x1+0x8ab*-0x1);}['_checkStat'+'e'](){const _0x467996=this['enabled']&&this['entity']['enabled'];if(_0x467996===this['_oldState'])return;this['_oldState']=_0x467996,this['fire'](_0x467996?'enable':'disable'),this['fire']('state',_0x467996),_0x467996?this['system']['_addCompon'+'entToEnabl'+'ed'](this):this['system']['_removeCom'+'ponentFrom'+'Enabled'](this);const _0x53edc3=this['_beginLoop'+'ing']();for(let _0x21f48d=-0x2509+-0x1e8*-0x7+0x4bd*0x5,_0x5ba91f=this['scripts']['length'];_0x21f48d<_0x5ba91f;_0x21f48d++){const _0x910b=this['scripts'][_0x21f48d];_0x910b['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x910b);}),_0x910b['enabled']=_0x910b['_enabled'];}this['_endLoopin'+'g'](_0x53edc3);}['_onBeforeR'+'emove'](){this['fire']('remove');const _0x4ae0b7=this['_beginLoop'+'ing']();for(let _0x4fde1a=-0x1fb1*-0x1+-0x1f48+0xf*-0x7;_0x4fde1a<this['scripts']['length'];_0x4fde1a++){const _0x1b7e7c=this['scripts'][_0x4fde1a];_0x1b7e7c&&this['destroy'](_0x1b7e7c['__scriptTy'+'pe']['__name']);}this['_endLoopin'+'g'](_0x4ae0b7);}['_removeDes'+'troyedScri'+'pts'](){const _0x59debb=this['_destroyed'+'Scripts']['length'];if(_0x59debb){for(let _0x55a512=0x8*-0x2f9+-0x2*0x5ba+0x70c*0x5;_0x55a512<_0x59debb;_0x55a512++){const _0x3fd932=this['_destroyed'+'Scripts'][_0x55a512];this['_removeScr'+'iptInstanc'+'e'](_0x3fd932);}this['_destroyed'+'Scripts']['length']=0x1*-0x173f+0x1*-0x1171+-0x15*-0x1f0,this['_resetExec'+'utionOrder'](0x2b*0xce+-0x2cc*-0x4+-0x2dca,this['_scripts']['length']);}}['_onInitial'+'izeAttribu'+'tes'](){for(let _0x532488=-0x1e9+0x4f3+-0x30a,_0x10286e=this['scripts']['length'];_0x532488<_0x10286e;_0x532488++){const _0x52e10e=this['scripts'][_0x532488];this['initialize'+'Attributes'](_0x52e10e);}}['initialize'+'Attributes'](_0x63a611){var _0x106dca;if(_0x63a611 instanceof wo)_0x63a611['__initiali'+'zeAttribut'+'es']();else{const _0xbf1074=_0x63a611['__scriptTy'+'pe']['__name'],_0x7284fd=this['_attribute'+'DataMap']['get'](_0xbf1074);if(!_0x7284fd)return;const _0x5b1961=(_0x106dca=this['system']['app']['scripts'])==null?void(-0x107e*0x2+0x1a54+0x6a8):_0x106dca['getSchema'](_0xbf1074);_0x5b1961||M['warnOnce']('No\x20schema\x20'+'exists\x20for'+'\x20the\x20scrip'+'t\x20\x27'+_0xbf1074+('\x27.\x20A\x20schem'+'a\x20must\x20exi'+'st\x20for\x20dat'+'a\x20to\x20be\x20in'+'stantiated'+'\x20on\x20the\x20sc'+'ript.')),Pv(this['system']['app'],_0x5b1961['attributes'],_0x7284fd,_0x63a611);}}['_scriptMet'+'hod'](_0xcfae7e,_0x31073b,_0x13efe2){try{_0xcfae7e[_0x31073b](_0x13efe2);}catch(_0x4a2e48){_0xcfae7e['enabled']=!(0x24de+-0x3*0xb33+-0x344),_0xcfae7e['hasEvent']('error')||(console['warn']('unhandled\x20'+'exception\x20'+'while\x20call'+'ing\x20\x22'+_0x31073b+'\x22\x20for\x20\x22'+_0xcfae7e['__scriptTy'+'pe']['__name']+'\x22\x20script:\x20',_0x4a2e48),console['error'](_0x4a2e48)),_0xcfae7e['fire']('error',_0x4a2e48,_0x31073b),this['fire']('error',_0xcfae7e,_0x4a2e48,_0x31073b);}}['_onInitial'+'ize'](){const _0x44c620=this['_scripts'],_0x54297f=this['_beginLoop'+'ing']();for(let _0x53a387=-0x1812+-0x203f+-0x1*-0x3851,_0x57f86b=_0x44c620['length'];_0x53a387<_0x57f86b;_0x53a387++){const _0x4b82b1=_0x44c620[_0x53a387];!_0x4b82b1['_initializ'+'ed']&&_0x4b82b1['enabled']&&(_0x4b82b1['_initializ'+'ed']=!(0xa*0xb3+0x366+-0xa64),_0x4b82b1['initialize']&&this['_scriptMet'+'hod'](_0x4b82b1,au));}this['_endLoopin'+'g'](_0x54297f);}['_onPostIni'+'tialize'](){this['onPostStat'+'eChange']();}['_onUpdate'](_0x2f6993){const _0x394525=this['_updateLis'+'t'];if(!_0x394525['length'])return;const _0x30d855=this['_beginLoop'+'ing']();for(_0x394525['loopIndex']=-0x2a8+0x116a+-0xec2;_0x394525['loopIndex']<_0x394525['length'];_0x394525['loopIndex']++){const _0x398374=_0x394525['items'][_0x394525['loopIndex']];_0x398374['enabled']&&this['_scriptMet'+'hod'](_0x398374,kO,_0x2f6993);}this['_endLoopin'+'g'](_0x30d855);}['_onPostUpd'+'ate'](_0x44b9b0){const _0xfeb926=this['_postUpdat'+'eList'];if(!_0xfeb926['length'])return;const _0x1608bd=this['_beginLoop'+'ing']();for(_0xfeb926['loopIndex']=0x752+-0x131c+0xbca;_0xfeb926['loopIndex']<_0xfeb926['length'];_0xfeb926['loopIndex']++){const _0x38b71d=_0xfeb926['items'][_0xfeb926['loopIndex']];_0x38b71d['enabled']&&this['_scriptMet'+'hod'](_0x38b71d,UO,_0x44b9b0);}this['_endLoopin'+'g'](_0x1608bd);}['_insertScr'+'iptInstanc'+'e'](_0x45e959,_0x325130,_0x244bfd){_0x325130===-(-0x78b*0x2+-0x170d+0x2624)?(this['_scripts']['push'](_0x45e959),_0x45e959['__executio'+'nOrder']=_0x244bfd,_0x45e959['update']&&this['_updateLis'+'t']['append'](_0x45e959),_0x45e959['postUpdate']&&this['_postUpdat'+'eList']['append'](_0x45e959)):(this['_scripts']['splice'](_0x325130,0x1bba+-0x17c9+-0x3f1,_0x45e959),_0x45e959['__executio'+'nOrder']=_0x325130,this['_resetExec'+'utionOrder'](_0x325130+(-0x16c1+-0x2361*0x1+-0x21*-0x1c3),_0x244bfd+(0x1*-0x1638+0x1e66+0x82d*-0x1)),_0x45e959['update']&&this['_updateLis'+'t']['insert'](_0x45e959),_0x45e959['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x45e959));}['_removeScr'+'iptInstanc'+'e'](_0x5d2d53){const _0x603c86=this['_scripts']['indexOf'](_0x5d2d53);return _0x603c86===-(0xbc2+-0x17b1+0xbf0)||(this['_scripts']['splice'](_0x603c86,-0x23bb+-0x1d86+0x2*0x20a1),_0x5d2d53['update']&&this['_updateLis'+'t']['remove'](_0x5d2d53),_0x5d2d53['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x5d2d53)),_0x603c86;}['_resetExec'+'utionOrder'](_0x219689,_0x58467a){for(let _0x307a51=_0x219689;_0x307a51<_0x58467a;_0x307a51++)this['_scripts'][_0x307a51]['__executio'+'nOrder']=_0x307a51;}['_resolveEn'+'tityScript'+'Attribute'](_0x466f52,_0x48b4f0,_0x5ea206,_0x52555d,_0xa5c7c1,_0x40706e){if(_0x466f52['array']){const _0xe5b76f=_0x5ea206['length'];if(!_0xe5b76f)return;const _0xbd19ad=_0x5ea206['slice']();for(let _0x5a2b84=-0x2643+0x20ac+0x1*0x597;_0x5a2b84<_0xe5b76f;_0x5a2b84++){const _0x1b92ba=_0xbd19ad[_0x5a2b84]instanceof ot?_0xbd19ad[_0x5a2b84]['getGuid']():_0xbd19ad[_0x5a2b84];_0x40706e[_0x1b92ba]&&(_0xbd19ad[_0x5a2b84]=_0x52555d?_0x40706e[_0x1b92ba]['getGuid']():_0x40706e[_0x1b92ba]);}_0xa5c7c1[_0x48b4f0]=_0xbd19ad;}else{if(_0x5ea206 instanceof ot)_0x5ea206=_0x5ea206['getGuid']();else{if(typeof _0x5ea206!='string')return;}_0x40706e[_0x5ea206]&&(_0xa5c7c1[_0x48b4f0]=_0x40706e[_0x5ea206]);}}['has'](_0x296acb){if(typeof _0x296acb=='string')return!!this['_scriptsIn'+'dex'][_0x296acb];if(!_0x296acb)return!(0x4c7*-0x1+-0x5f1+-0x225*-0x5);const _0x320f9c=_0x296acb,_0x2e9c21=_0x320f9c['__name'],_0x2ad9c9=this['_scriptsIn'+'dex'][_0x2e9c21];return(_0x2ad9c9&&_0x2ad9c9['instance'])instanceof _0x320f9c;}['get'](_0x1e6500){if(typeof _0x1e6500=='string'){const _0xa95874=this['_scriptsIn'+'dex'][_0x1e6500];return _0xa95874?_0xa95874['instance']:null;}if(!_0x1e6500)return null;const _0x166273=_0x1e6500,_0x4f12ff=_0x166273['__name'],_0x1e0986=this['_scriptsIn'+'dex'][_0x4f12ff],_0x463c58=_0x1e0986&&_0x1e0986['instance'];return _0x463c58 instanceof _0x166273?_0x463c58:null;}['create'](_0x52d705,_0x32d894={}){const _0x15c017=this;let _0x136428=_0x52d705,_0x76f588=_0x52d705;if(typeof _0x136428=='string')_0x136428=this['system']['app']['scripts']['get'](_0x136428);else{if(_0x136428){const _0x30ddb5=Mv(_0x136428),_0x43d2a7=VO(_0x30ddb5);!(_0x136428['prototype']instanceof wo)&&!_0x136428['scriptName']&&M['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x30ddb5+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x30ddb5+('.scriptNam'+'e\x20=\x20\x22')+_0x43d2a7+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.')),_0x136428['__name']??(_0x136428['__name']=_0x136428['scriptName']??_0x43d2a7),_0x76f588=_0x136428['__name'];}}if(_0x136428){if(!this['_scriptsIn'+'dex'][_0x76f588]||!this['_scriptsIn'+'dex'][_0x76f588]['instance']){const _0x27ca95=new _0x136428({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x32d894['hasOwnProp'+'erty']('enabled')?_0x32d894['enabled']:!(0x2451+0x18c0+-0x3d11),'attributes':_0x32d894['attributes']||{}});_0x32d894['properties']&&typeof _0x32d894['properties']=='object'&&Object['assign'](_0x27ca95,_0x32d894['properties']),_0x27ca95 instanceof wo||this['_attribute'+'DataMap']['set'](_0x76f588,_0x32d894['attributes']);const _0x1c771f=this['_scripts']['length'];let _0x278bb2=-(0x22f+0x7*-0x1c9+0x8b*0x13);return typeof _0x32d894['ind']=='number'&&_0x32d894['ind']!==-(-0x18dc+0x26a2+-0x4b*0x2f)&&_0x1c771f>_0x32d894['ind']&&(_0x278bb2=_0x32d894['ind']),this['_insertScr'+'iptInstanc'+'e'](_0x27ca95,_0x278bb2,_0x1c771f),this['_scriptsIn'+'dex'][_0x76f588]={'instance':_0x27ca95,'onSwap':function(){_0x15c017['swap'](_0x76f588);}},this[_0x76f588]=_0x27ca95,_0x32d894['preloading']||this['initialize'+'Attributes'](_0x27ca95),this['fire']('create',_0x76f588,_0x27ca95),this['fire']('create:'+_0x76f588,_0x27ca95),this['system']['app']['scripts']['on']('swap:'+_0x76f588,this['_scriptsIn'+'dex'][_0x76f588]['onSwap']),_0x32d894['preloading']||(_0x27ca95['enabled']&&!_0x27ca95['_initializ'+'ed']&&(_0x27ca95['_initializ'+'ed']=!(0x5*-0x41+-0xc55+0xd9a),_0x27ca95['initialize']&&this['_scriptMet'+'hod'](_0x27ca95,au)),_0x27ca95['enabled']&&!_0x27ca95['_postIniti'+'alized']&&(_0x27ca95['_postIniti'+'alized']=!(0x2222+-0x1*0x1741+0x1*-0xae1),_0x27ca95['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x27ca95,nu))),_0x27ca95;}M['warn']('script\x20\x27'+_0x76f588+('\x27\x20is\x20alrea'+'dy\x20added\x20t'+'o\x20entity\x20\x27')+this['entity']['name']+'\x27');}else this['_scriptsIn'+'dex'][_0x76f588]={'awaiting':!(0x2*0x861+0x1*0x1787+-0x2849),'ind':this['_scripts']['length']},M['warn']('script\x20\x27'+_0x76f588+('\x27\x20is\x20not\x20f'+'ound,\x20awai'+'ting\x20it\x20to'+'\x20be\x20added\x20'+'to\x20registr'+'y'));return null;}['destroy'](_0x58e516){let _0x442a84=_0x58e516,_0x55e3f9=_0x58e516;typeof _0x55e3f9=='string'?_0x55e3f9=this['system']['app']['scripts']['get'](_0x55e3f9):_0x55e3f9&&(_0x442a84=_0x55e3f9['__name']);const _0x258ca1=this['_scriptsIn'+'dex'][_0x442a84];if(delete this['_scriptsIn'+'dex'][_0x442a84],!_0x258ca1)return!(-0x44*0x22+0xc59+-0x350);this['_attribute'+'DataMap']['delete'](_0x442a84);const _0x5a2516=_0x258ca1['instance'];if(_0x5a2516&&!_0x5a2516['_destroyed']){if(_0x5a2516['enabled']=!(-0xa57*-0x2+0x64+-0x1511),_0x5a2516['_destroyed']=!(0x32*-0xc4+-0x159a+0x3be2),this['_isLooping'+'ThroughScr'+'ipts'])this['_destroyed'+'Scripts']['push'](_0x5a2516);else{const _0x598410=this['_removeScr'+'iptInstanc'+'e'](_0x5a2516);_0x598410>=0x1ebf*-0x1+-0x1f1c+-0x1*-0x3ddb&&this['_resetExec'+'utionOrder'](_0x598410,this['_scripts']['length']);}}return this['system']['app']['scripts']['off']('swap:'+_0x442a84,_0x258ca1['onSwap']),delete this[_0x442a84],this['fire']('destroy',_0x442a84,_0x5a2516||null),this['fire']('destroy:'+_0x442a84,_0x5a2516||null),_0x5a2516&&_0x5a2516['fire']('destroy'),!(-0x1*0x190f+0x172e+-0x1e1*-0x1);}['swap'](_0x13888f){let _0x489286=_0x13888f,_0x5817a7=_0x13888f;typeof _0x5817a7=='string'?_0x5817a7=this['system']['app']['scripts']['get'](_0x5817a7):_0x5817a7&&(_0x489286=_0x5817a7['__name']);const _0x593660=this['_scriptsIn'+'dex'][_0x489286];if(!_0x593660||!_0x593660['instance'])return!(-0x21e3+0x670+-0xdba*-0x2);const _0x3ce1d4=_0x593660['instance'],_0x3ff027=this['_scripts']['indexOf'](_0x3ce1d4),_0x51c0c7=new _0x5817a7({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x3ce1d4['enabled'],'attributes':_0x3ce1d4['__attribut'+'es']});return _0x51c0c7['swap']?(this['initialize'+'Attributes'](_0x51c0c7),this['_scripts'][_0x3ff027]=_0x51c0c7,this['_scriptsIn'+'dex'][_0x489286]['instance']=_0x51c0c7,this[_0x489286]=_0x51c0c7,_0x51c0c7['__executio'+'nOrder']=_0x3ff027,_0x3ce1d4['update']&&this['_updateLis'+'t']['remove'](_0x3ce1d4),_0x3ce1d4['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x3ce1d4),_0x51c0c7['update']&&this['_updateLis'+'t']['insert'](_0x51c0c7),_0x51c0c7['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x51c0c7),this['_scriptMet'+'hod'](_0x51c0c7,BO,_0x3ce1d4),this['fire']('swap',_0x489286,_0x51c0c7),this['fire']('swap:'+_0x489286,_0x51c0c7),!(0x14b2+0x18c9+-0x2d7b)):!(-0x1*0x84f+-0x208c+-0x14*-0x20b);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x15bc7b,_0x403f9a){var _0x6dc6cc,_0x1c3d27,_0x2633ea;const _0x4ae4b5=this['entity']['script'];for(const _0x384393 in _0x15bc7b['_scriptsIn'+'dex']){const _0x36edc5=this['system']['app']['scripts']['get'](_0x384393);if(!_0x36edc5)continue;const _0xfd9e8c=_0x15bc7b['_scriptsIn'+'dex'][_0x384393];if(!_0xfd9e8c||!_0xfd9e8c['instance'])continue;const _0x23cc5e=_0x4ae4b5[_0x384393]['__attribut'+'esRaw']??_0x4ae4b5['_attribute'+'DataMap']['get'](_0x384393),_0x1211a5=_0x4ae4b5[_0x384393]['__attribut'+'es'];if(!_0x23cc5e&&!_0x1211a5)continue;const _0x1afab6=!!_0x23cc5e,_0x231f78=_0xfd9e8c['instance']['__attribut'+'es']??_0x4ae4b5['_attribute'+'DataMap']['get'](_0x384393);for(const _0x13c67a in _0x231f78){if(!_0x231f78[_0x13c67a])continue;const _0x4cbe20=((_0x6dc6cc=_0x36edc5['attributes'])==null?void(0x1794+-0xd60+-0x28d*0x4):_0x6dc6cc['get'](_0x13c67a))??((_0x2633ea=(_0x1c3d27=this['system']['app']['scripts']['getSchema'](_0x384393))==null?void(-0x1a84+0x1a3*0x5+0x1255):_0x1c3d27['attributes'])==null?void(0x5ad*0x6+-0x1*0x1d7f+-0x48f):_0x2633ea[_0x13c67a]);if(_0x4cbe20){if(_0x4cbe20['type']==='entity')this['_resolveEn'+'tityScript'+'Attribute'](_0x4cbe20,_0x13c67a,_0x231f78[_0x13c67a],_0x1afab6,_0x23cc5e||_0x1211a5,_0x403f9a);else{if(_0x4cbe20['type']==='json'&&Array['isArray'](_0x4cbe20['schema'])){const _0x1df1ce=_0x231f78[_0x13c67a],_0xc7098e=_0x23cc5e?_0x23cc5e[_0x13c67a]:_0x1211a5[_0x13c67a];for(let _0xedcd68=-0xb2d+0x46*0x1f+0x2b3;_0xedcd68<_0x4cbe20['schema']['length'];_0xedcd68++){const _0x399f62=_0x4cbe20['schema'][_0xedcd68];if(_0x399f62['type']==='entity'){if(_0x4cbe20['array']){for(let _0x29a138=-0x3*-0x4e3+-0xe2b+-0x1*0x7e;_0x29a138<_0x1df1ce['length'];_0x29a138++)this['_resolveEn'+'tityScript'+'Attribute'](_0x399f62,_0x399f62['name'],_0x1df1ce[_0x29a138][_0x399f62['name']],_0x1afab6,_0xc7098e[_0x29a138],_0x403f9a);}else this['_resolveEn'+'tityScript'+'Attribute'](_0x399f62,_0x399f62['name'],_0x1df1ce[_0x399f62['name']],_0x1afab6,_0xc7098e,_0x403f9a);}}}}}}}}['move'](_0x11986f,_0x1faa7d){const _0x25d67f=this['_scripts']['length'];if(_0x1faa7d>=_0x25d67f||_0x1faa7d<-0x1*-0x12fd+-0x233b*-0x1+-0x56c*0xa)return!(0x12*-0x218+-0x1302+-0x38b3*-0x1);let _0x1c5988=_0x11986f,_0x3b6287=_0x11986f;typeof _0x3b6287!='string'?_0x3b6287=_0x11986f['__name']:_0x1c5988=null;const _0x35fed6=this['_scriptsIn'+'dex'][_0x3b6287];if(!_0x35fed6||!_0x35fed6['instance'])return!(-0x1767+0x14ac+-0xe*-0x32);const _0x17b4dc=_0x35fed6['instance'];if(_0x1c5988&&!(_0x17b4dc instanceof _0x1c5988))return!(-0x1271*0x1+0x1c21+0x1*-0x9af);const _0x50cffa=this['_scripts']['indexOf'](_0x17b4dc);return _0x50cffa===-(0x35*0x19+-0x3bb+-0x9*0x29)||_0x50cffa===_0x1faa7d?!(-0x16b8*0x1+-0x22*0xef+0x3677):(this['_scripts']['splice'](_0x1faa7d,0x78*-0x3d+0x1b47+0x151,this['_scripts']['splice'](_0x50cffa,0x2585+-0x25b*0xe+-0x48a)[-0xbb*-0x27+-0xb74*-0x2+-0x3365]),this['_resetExec'+'utionOrder'](0x22f4+0x1b38+0x1f16*-0x2,_0x25d67f),this['_updateLis'+'t']['sort'](),this['_postUpdat'+'eList']['sort'](),this['fire']('move',_0x3b6287,_0x17b4dc,_0x1faa7d,_0x50cffa),this['fire']('move:'+_0x3b6287,_0x17b4dc,_0x1faa7d,_0x50cffa),!(-0x1eb5+-0xf*-0xe1+0x1186));}}h(Ei,'EVENT_CREA'+'TE','create'),h(Ei,'EVENT_DEST'+'ROY','destroy'),h(Ei,'EVENT_ENAB'+'LE','enable'),h(Ei,'EVENT_DISA'+'BLE','disable'),h(Ei,'EVENT_REMO'+'VE','remove'),h(Ei,'EVENT_STAT'+'E','state'),h(Ei,'EVENT_MOVE','move'),h(Ei,'EVENT_ERRO'+'R','error');class GO{constructor(){this['enabled']=!(-0x3*-0x2b9+0x1460+0x1c8b*-0x1);}}const HO='_onInitial'+'izeAttribu'+'tes',WO='_onInitial'+'ize',$O='_onPostIni'+'tialize',XO='_onUpdate',qO='_onPostUpd'+'ate';let rh=0x282*-0x2+-0x1a07*-0x1+-0x3*0x701;class jO extends lt{constructor(_0x70a45c){super(_0x70a45c),this['id']='script',this['ComponentT'+'ype']=Ei,this['DataType']=GO,this['_component'+'s']=new Ph({'sortBy':'_execution'+'Order'}),this['_enabledCo'+'mponents']=new Ph({'sortBy':'_execution'+'Order'}),this['preloading']=!(-0x11cb*0x1+-0x1c8e*0x1+0xf73*0x3),this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this),this['app']['systems']['on']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['on']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x3b0e57,_0x3381c0){if(_0x3b0e57['_execution'+'Order']=rh++,this['_component'+'s']['append'](_0x3b0e57),rh>Number['MAX_SAFE_I'+'NTEGER']&&this['_resetExec'+'utionOrder'](),_0x3b0e57['enabled']=_0x3381c0['hasOwnProp'+'erty']('enabled')?!!_0x3381c0['enabled']:!(0x22fb+0x6fd*0x1+-0x29f8),_0x3b0e57['enabled']&&_0x3b0e57['entity']['enabled']&&this['_enabledCo'+'mponents']['append'](_0x3b0e57),_0x3381c0['hasOwnProp'+'erty']('order')&&_0x3381c0['hasOwnProp'+'erty']('scripts')){_0x3b0e57['_scriptsDa'+'ta']=_0x3381c0['scripts'];for(let _0x11b67e=-0x11*-0x189+0x102b*-0x2+-0x63d*-0x1;_0x11b67e<_0x3381c0['order']['length'];_0x11b67e++)_0x3b0e57['create'](_0x3381c0['order'][_0x11b67e],{'enabled':_0x3381c0['scripts'][_0x3381c0['order'][_0x11b67e]]['enabled'],'attributes':_0x3381c0['scripts'][_0x3381c0['order'][_0x11b67e]]['attributes'],'preloading':this['preloading']});}}['cloneCompo'+'nent'](_0x58be97,_0x2eb6c1){var _0x96b57d;const _0x5d91e8=[],_0x3a67b3={};for(let _0x1dadf0=-0x1b88+-0x18e*-0x8+0xf18;_0x1dadf0<_0x58be97['script']['_scripts']['length'];_0x1dadf0++){const _0x1a0edb=_0x58be97['script']['_scripts'][_0x1dadf0],_0x3cebaf=_0x1a0edb['__scriptTy'+'pe']['__name'];_0x5d91e8['push'](_0x3cebaf);const _0x15ad28=((_0x96b57d=_0x58be97['script']['_attribute'+'DataMap'])==null?void(0x1f7*-0x10+-0x34*0xb0+0x4330):_0x96b57d['get'](_0x3cebaf))||{};for(const _0x5a7552 in _0x1a0edb['__attribut'+'es'])_0x15ad28[_0x5a7552]=_0x1a0edb['__attribut'+'es'][_0x5a7552];_0x3a67b3[_0x3cebaf]={'enabled':_0x1a0edb['_enabled'],'attributes':_0x15ad28};}for(const _0x369471 in _0x58be97['script']['_scriptsIn'+'dex'])_0x369471['awaiting']&&_0x5d91e8['splice'](_0x369471['ind'],-0x4*-0x7d6+-0x268c*0x1+-0x1cd*-0x4,_0x369471);const _0x3a9242={'enabled':_0x58be97['script']['enabled'],'order':_0x5d91e8,'scripts':_0x3a67b3};return this['addCompone'+'nt'](_0x2eb6c1,_0x3a9242);}['_resetExec'+'utionOrder'](){rh=-0xad*0x2b+0x19*-0xc5+0x304c;for(let _0x4f1367=-0x234c+0x1*-0x207b+0x43c7,_0x52a4af=this['_component'+'s']['length'];_0x4f1367<_0x52a4af;_0x4f1367++)this['_component'+'s']['items'][_0x4f1367]['_execution'+'Order']=rh++;}['_callCompo'+'nentMethod'](_0x57420f,_0x2c8eea,_0x39d3ec){for(_0x57420f['loopIndex']=0x107*0x7+0x1b4c+-0x227d;_0x57420f['loopIndex']<_0x57420f['length'];_0x57420f['loopIndex']++)_0x57420f['items'][_0x57420f['loopIndex']][_0x2c8eea](_0x39d3ec);}['_onInitial'+'ize'](){this['preloading']=!(0x9*-0x71+-0x3*0x77d+-0x3c7*-0x7),this['_callCompo'+'nentMethod'](this['_component'+'s'],HO),this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],WO);}['_onPostIni'+'tialize'](){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],$O);}['_onUpdate'](_0x408f98){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],XO,_0x408f98);}['_onPostUpd'+'ate'](_0x4bab02){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],qO,_0x4bab02);}['_addCompon'+'entToEnabl'+'ed'](_0x370051){this['_enabledCo'+'mponents']['insert'](_0x370051);}['_removeCom'+'ponentFrom'+'Enabled'](_0x3b79de){this['_enabledCo'+'mponents']['remove'](_0x3b79de);}['_onBeforeR'+'emove'](_0x4dd72e,_0x442da8){this['_component'+'s']['items']['indexOf'](_0x442da8)>=0x2*0x69e+0x1*0x139e+-0x91*0x3a&&_0x442da8['_onBeforeR'+'emove'](),this['_removeCom'+'ponentFrom'+'Enabled'](_0x442da8),this['_component'+'s']['remove'](_0x442da8);}['destroy'](){super['destroy'](),this['app']['systems']['off']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['off']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}class Iv extends we{constructor(_0x38764a,_0x2a769e){super(_0x38764a,_0x2a769e),h(this,'_layers',[Wi]),h(this,'_instance',null),h(this,'_materialT'+'mp',null),h(this,'_highQuali'+'tySH',!(-0x2500+-0xbbd+-0x1*-0x30bd)),h(this,'_customAab'+'b',null),h(this,'_assetRefe'+'rence'),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_castShado'+'ws',!(0x1a*0x7+-0xf67+0xeb2)),(this['_assetRefe'+'rence']=new Xo('asset',this,_0x38764a['app']['assets'],{'add':this['_onGSplatA'+'ssetAdded'],'load':this['_onGSplatA'+'ssetLoad'],'remove':this['_onGSplatA'+'ssetRemove'],'unload':this['_onGSplatA'+'ssetUnload']},this),_0x2a769e['on']('remove',this['onRemoveCh'+'ild'],this),_0x2a769e['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x2a769e['on']('insert',this['onInsertCh'+'ild'],this),_0x2a769e['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['customAabb'](_0x578e2b){var _0x5066e3,_0xb12d2;this['_customAab'+'b']=_0x578e2b,(_0xb12d2=(_0x5066e3=this['_instance'])==null?void(0x116+0x26a4+-0x3f9*0xa):_0x5066e3['meshInstan'+'ce'])==null||_0xb12d2['setCustomA'+'abb'](this['_customAab'+'b']);}get['customAabb'](){return this['_customAab'+'b'];}set['instance'](_0x232ab0){if(this['destroyIns'+'tance'](),this['_instance']=_0x232ab0,this['_instance']){const _0x8be865=this['_instance']['meshInstan'+'ce'];_0x8be865['node']||(_0x8be865['node']=this['entity']),_0x8be865['castShadow']=this['_castShado'+'ws'],_0x8be865['setCustomA'+'abb'](this['_customAab'+'b']),this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['instance'](){return this['_instance'];}set['material'](_0x41e31c){this['_instance']?this['_instance']['material']=_0x41e31c:this['_materialT'+'mp']=_0x41e31c;}get['material'](){var _0x752266;return((_0x752266=this['_instance'])==null?void(-0x7a9+-0x2*0x781+-0x7*-0x33d):_0x752266['material'])??this['_materialT'+'mp']??null;}set['highQualit'+'ySH'](_0x9740ee){_0x9740ee!==this['_highQuali'+'tySH']&&(this['_highQuali'+'tySH']=_0x9740ee,this['_instance']&&this['_instance']['setHighQua'+'litySH'](_0x9740ee));}get['highQualit'+'ySH'](){return this['_highQuali'+'tySH'];}set['castShadow'+'s'](_0x34c2ae){var _0x441a67;if(this['_castShado'+'ws']!==_0x34c2ae){const _0x4a81f8=(_0x441a67=this['instance'])==null?void(0x1*-0x161d+0xdf*-0x29+0x39d4):_0x441a67['meshInstan'+'ce'];if(_0x4a81f8){const _0x109dc1=this['layers'],_0x3dd8e9=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x34c2ae)for(let _0x193027=0x17*0x49+0x20d*0x5+-0x10d0;_0x193027<_0x109dc1['length'];_0x193027++){const _0x503a8b=_0x3dd8e9['layers']['getLayerBy'+'Id'](this['layers'][_0x193027]);_0x503a8b&&_0x503a8b['removeShad'+'owCasters']([_0x4a81f8]);}if(_0x4a81f8['castShadow']=_0x34c2ae,!this['_castShado'+'ws']&&_0x34c2ae)for(let _0x4872c4=-0x31*-0x8d+-0x7*0x33d+-0x2*0x229;_0x4872c4<_0x109dc1['length'];_0x4872c4++){const _0x1d46db=_0x3dd8e9['layers']['getLayerBy'+'Id'](_0x109dc1[_0x4872c4]);_0x1d46db&&_0x1d46db['addShadowC'+'asters']([_0x4a81f8]);}}this['_castShado'+'ws']=_0x34c2ae;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['layers'](_0x564f6b){this['removeFrom'+'Layers'](),this['_layers']['length']=-0x57*0x7+-0x3*-0xc04+0x21ab*-0x1;for(let _0x4eca64=0x22fa+0x1381+-0x367b;_0x4eca64<_0x564f6b['length'];_0x4eca64++)this['_layers'][_0x4eca64]=_0x564f6b[_0x4eca64];!this['enabled']||!this['entity']['enabled']||this['addToLayer'+'s']();}get['layers'](){return this['_layers'];}set['asset'](_0x3e8441){const _0x1bffbc=_0x3e8441 instanceof me?_0x3e8441['id']:_0x3e8441;this['_assetRefe'+'rence']['id']!==_0x1bffbc&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onGSplatA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x1bffbc,this['_assetRefe'+'rence']['asset']&&this['_onGSplatA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['destroyIns'+'tance'](){var _0x239fd8;this['_instance']&&(this['removeFrom'+'Layers'](),(_0x239fd8=this['_instance'])==null||_0x239fd8['destroy'](),this['_instance']=null);}['addToLayer'+'s'](){var _0x4c8b02,_0x1d6112;const _0x5ef3ac=(_0x4c8b02=this['instance'])==null?void(0x385*-0x1+0x7*-0x24b+0x1392):_0x4c8b02['meshInstan'+'ce'];if(_0x5ef3ac){const _0x4d9c4a=this['system']['app']['scene']['layers'];for(let _0x44e6c0=0x606+0x2595+-0x2b9b;_0x44e6c0<this['_layers']['length'];_0x44e6c0++)(_0x1d6112=_0x4d9c4a['getLayerBy'+'Id'](this['_layers'][_0x44e6c0]))==null||_0x1d6112['addMeshIns'+'tances']([_0x5ef3ac]);}}['removeFrom'+'Layers'](){var _0x335451,_0x781e50;const _0x9d31c9=(_0x335451=this['instance'])==null?void(0x874+-0x10af+0x1*0x83b):_0x335451['meshInstan'+'ce'];if(_0x9d31c9){const _0x13d131=this['system']['app']['scene']['layers'];for(let _0x57e2e2=-0xe8d*-0x2+-0x924+0x13f6*-0x1;_0x57e2e2<this['_layers']['length'];_0x57e2e2++)(_0x781e50=_0x13d131['getLayerBy'+'Id'](this['_layers'][_0x57e2e2]))==null||_0x781e50['removeMesh'+'Instances']([_0x9d31c9]);}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_instance']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyIns'+'tance'](),this['asset']=null,this['_assetRefe'+'rence']['id']=null,this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x33fdbd,_0x193df4){this['addToLayer'+'s'](),_0x33fdbd['off']('add',this['onLayerAdd'+'ed'],this),_0x33fdbd['off']('remove',this['onLayerRem'+'oved'],this),_0x193df4['on']('add',this['onLayerAdd'+'ed'],this),_0x193df4['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x29dc62){this['layers']['indexOf'](_0x29dc62['id'])<0x82b*0x1+-0x1*0x11f5+0x9ca||this['_instance']&&_0x29dc62['addMeshIns'+'tances'](this['_instance']['meshInstan'+'ce']);}['onLayerRem'+'oved'](_0xedf9fa){this['layers']['indexOf'](_0xedf9fa['id'])<0xfcf+-0x240+-0xd8f||this['_instance']&&_0xedf9fa['removeMesh'+'Instances'](this['_instance']['meshInstan'+'ce']);}['onEnable'](){const _0x56079a=this['system']['app']['scene'],_0x54fc96=_0x56079a['layers'];this['_evtLayers'+'Changed']=_0x56079a['on']('set:layers',this['onLayersCh'+'anged'],this),_0x54fc96&&(this['_evtLayerA'+'dded']=_0x54fc96['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x54fc96['on']('remove',this['onLayerRem'+'oved'],this)),this['_instance']?this['addToLayer'+'s']():this['asset']&&this['_onGSplatA'+'ssetAdded']();}['onDisable'](){var _0x40ea13,_0x3148fe,_0x32a403;const _0x14e243=this['system']['app']['scene']['layers'];(_0x40ea13=this['_evtLayers'+'Changed'])==null||_0x40ea13['off'](),this['_evtLayers'+'Changed']=null,_0x14e243&&((_0x3148fe=this['_evtLayerA'+'dded'])==null||_0x3148fe['off'](),this['_evtLayerA'+'dded']=null,(_0x32a403=this['_evtLayerR'+'emoved'])==null||_0x32a403['off'](),this['_evtLayerR'+'emoved']=null),this['removeFrom'+'Layers']();}['hide'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0x13b+-0x1010+-0x12*-0xf6));}['show'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0xdb8+-0x631+0x13e9));}['_onGSplatA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onGSplatA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onGSplatA'+'ssetLoad'](){this['destroyIns'+'tance']();const _0x2e654c=this['_assetRefe'+'rence']['asset'];_0x2e654c&&(this['instance']=_0x2e654c['resource']['createInst'+'ance'](_0x2e654c['resource'],{'material':this['_materialT'+'mp'],'highQualitySH':this['_highQuali'+'tySH']}),this['_materialT'+'mp']=null,this['customAabb']=this['instance']['resource']['aabb']['clone']());}['_onGSplatA'+'ssetUnload'](){this['destroyIns'+'tance']();}['_onGSplatA'+'ssetRemove'](){this['_onGSplatA'+'ssetUnload']();}}class YO{constructor(){this['enabled']=!(0xdc4+-0x1c10+0xe4c);}}const ou=['enabled'],ro=['castShadow'+'s','material','highQualit'+'ySH','asset','layers'];class KO extends lt{constructor(_0xa50eed){super(_0xa50eed),this['id']='gsplat',this['ComponentT'+'ype']=Iv,this['DataType']=YO,this['schema']=ou,this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x780b8f,_0x2cf403,_0x1db177){_0x2cf403['layers']&&_0x2cf403['layers']['length']&&(_0x2cf403['layers']=_0x2cf403['layers']['slice'](0x120e+-0x75e+-0xab0));for(let _0x5f0aad=-0x883+-0x2*0x3cb+0x1*0x1019;_0x5f0aad<ro['length'];_0x5f0aad++)_0x2cf403['hasOwnProp'+'erty'](ro[_0x5f0aad])&&(_0x780b8f[ro[_0x5f0aad]]=_0x2cf403[ro[_0x5f0aad]]);_0x2cf403['aabbCenter']&&_0x2cf403['aabbHalfEx'+'tents']&&(_0x780b8f['customAabb']=new Ie(new I(_0x2cf403['aabbCenter']),new I(_0x2cf403['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x780b8f,_0x2cf403,ou);}['cloneCompo'+'nent'](_0x16e540,_0x1f1b78){const _0x58bd49=_0x16e540['gsplat'],_0x112bdb={};ro['forEach'](_0x311097=>{_0x311097==='material'?_0x112bdb[_0x311097]=_0x58bd49[_0x311097]['clone']():_0x112bdb[_0x311097]=_0x58bd49[_0x311097];}),_0x112bdb['enabled']=_0x58bd49['enabled'];const _0x5957a1=this['addCompone'+'nt'](_0x1f1b78,_0x112bdb);return _0x58bd49['customAabb']&&(_0x5957a1['customAabb']=_0x58bd49['customAabb']['clone']()),_0x5957a1;}['onRemove'](_0x370acb,_0x1962b5){_0x1962b5['onRemove']();}}we['_buildAcce'+'ssors'](Iv['prototype'],ou);class zm extends pe{constructor(){super(...arguments),h(this,'_meshes',null);}set['meshes'](_0x328d7f){this['decRefMesh'+'es'](),this['_meshes']=_0x328d7f,this['incRefMesh'+'es'](),this['fire']('set:meshes',_0x328d7f);}get['meshes'](){return this['_meshes'];}['destroy'](){this['meshes']=null;}['decRefMesh'+'es'](){var _0x4e6446;(_0x4e6446=this['_meshes'])==null||_0x4e6446['forEach']((_0x557caf,_0x55b7fb)=>{_0x557caf&&(_0x557caf['decRefCoun'+'t'](),_0x557caf['refCount']<0x19f*-0xe+0xd*0x1fd+-0x326&&(_0x557caf['destroy'](),this['_meshes'][_0x55b7fb]=null));});}['incRefMesh'+'es'](){var _0x5e7111;(_0x5e7111=this['_meshes'])==null||_0x5e7111['forEach'](_0x29702e=>{_0x29702e==null||_0x29702e['incRefCoun'+'t']();});}}h(zm,'EVENT_SETM'+'ESHES','set:meshes');function wh(_0x511a42){const _0x1ada8e=this;if(!_0x1ada8e['resource'])return;const _0x17eaad=_0x511a42['resource'],_0x25ed31=_0x17eaad['renders']&&_0x17eaad['renders'][_0x1ada8e['data']['renderInde'+'x']];_0x25ed31&&(_0x1ada8e['resource']['meshes']=_0x25ed31['resource']['meshes']);}function Mg(_0x1c7628){const _0x3d323b=this;_0x3d323b['registry']['off']('load:'+_0x1c7628['id'],wh,_0x3d323b),_0x3d323b['registry']['on']('load:'+_0x1c7628['id'],wh,_0x3d323b),_0x3d323b['registry']['off']('remove:'+_0x1c7628['id'],Ig,_0x3d323b),_0x3d323b['registry']['once']('remove:'+_0x1c7628['id'],Ig,_0x3d323b),_0x1c7628['resource']?wh['call'](_0x3d323b,_0x1c7628):_0x3d323b['registry']['load'](_0x1c7628);}function Ig(_0x53e7ec){const _0x2ebe0b=this;_0x2ebe0b['registry']['off']('load:'+_0x53e7ec['id'],wh,_0x2ebe0b),_0x2ebe0b['resource']&&_0x2ebe0b['resource']['destroy']();}class ZO extends Ze{constructor(_0x459193){super(_0x459193,'render'),this['_registry']=_0x459193['assets'];}['open'](_0x3f9de3,_0x96881){return new zm();}['patch'](_0x3af96c,_0x5851bb){if(!_0x3af96c['data']['containerA'+'sset'])return;const _0x60a81d=_0x5851bb['get'](_0x3af96c['data']['containerA'+'sset']);if(!_0x60a81d){_0x5851bb['once']('add:'+_0x3af96c['data']['containerA'+'sset'],Mg,_0x3af96c);return;}Mg['call'](_0x3af96c,_0x60a81d);}}class Dv{constructor(_0x2825fa,_0x571f1d,_0x483272,_0x1a24c){this['_paths']=_0x2825fa,this['_input']=_0x571f1d,this['_output']=_0x483272,this['_interpola'+'tion']=_0x1a24c;}get['paths'](){return this['_paths'];}get['input'](){return this['_input'];}get['output'](){return this['_output'];}get['interpolat'+'ion'](){return this['_interpola'+'tion'];}}class nc{constructor(_0x18eacc,_0x449fb3){this['_component'+'s']=_0x18eacc,this['_data']=_0x449fb3;}get['components'](){return this['_component'+'s'];}get['data'](){return this['_data'];}}function QO(_0x54091f,_0x59586d){let _0x5cefad;const _0x451575=(_0x502175,_0xd15e4e)=>{switch(_0xd15e4e){case _0x5cefad['DT_INT8']:return new Int8Array(_0x502175['buffer'],_0x502175['byteOffset'],_0x502175['byteLength']);case _0x5cefad['DT_INT16']:return new Int16Array(_0x502175['buffer'],_0x502175['byteOffset'],_0x502175['byteLength']/(0x281*-0x7+0x7*0x48b+-0x16*0xa6));case _0x5cefad['DT_INT32']:return new Int32Array(_0x502175['buffer'],_0x502175['byteOffset'],_0x502175['byteLength']/(0xb*0x2a1+-0x1*0x868+-0x147f));case _0x5cefad['DT_UINT8']:return new Uint8Array(_0x502175['buffer'],_0x502175['byteOffset'],_0x502175['byteLength']);case _0x5cefad['DT_UINT16']:return new Uint16Array(_0x502175['buffer'],_0x502175['byteOffset'],_0x502175['byteLength']/(0x1e9c+0x1e76+-0x7a2*0x8));case _0x5cefad['DT_UINT32']:return new Uint32Array(_0x502175['buffer'],_0x502175['byteOffset'],_0x502175['byteLength']/(-0x1*0x24d9+-0x1*0xffe+0x34db));case _0x5cefad['DT_FLOAT32']:return new Float32Array(_0x502175['buffer'],_0x502175['byteOffset'],_0x502175['byteLength']/(-0x7*-0x4de+-0x933+0x38d*-0x7));}return null;},_0x5722ed=_0x15fa56=>{switch(_0x15fa56){case _0x5cefad['DT_INT8']:return-0x1765+-0x102b*0x2+0x37bc;case _0x5cefad['DT_INT16']:return-0x222+-0x1c3f*-0x1+-0x29*0xa3;case _0x5cefad['DT_INT32']:return 0xdf3*-0x1+-0x90a+0x3*0x7ab;case _0x5cefad['DT_UINT8']:return-0x18b3+-0xde0+-0x9a5*-0x4;case _0x5cefad['DT_UINT16']:return 0x1*-0x371+0x1db6*-0x1+0x28d*0xd;case _0x5cefad['DT_UINT32']:return 0x5f*0x5e+0xa2*0x1d+-0x3538;case _0x5cefad['DT_FLOAT32']:return-0x5b*0x38+-0x38*0x77+0x2df4;}return-0x18d6+0xa1d+0x91*0x1a;},_0x3dd9e1=_0x59cedd=>_0x59cedd['num_compon'+'ents']()*_0x5722ed(_0x59cedd['data_type']()),_0x7c89c8={0x0:0x0,0x1:0x1,0x5:0x2,0x2:0x3,0x7:0x4,0x8:0x5,0x4:0x6,0x3:0x7},_0x30d991=(_0x23db64,_0x303d7a)=>{const _0xe7125f=(_0x3eda95,_0xc540ac,_0x1f5385)=>{_0x3eda95[-0x2289*0x1+0x2*0x295+0x67*0x49]=_0xc540ac[0x11bd+-0x152+0x1*-0x106b]-_0x1f5385[0x120*-0x19+0x1*-0xa39+-0x2659*-0x1],_0x3eda95[-0xcf6+-0x160+0xe57]=_0xc540ac[0x2367+0x27*-0x19+0x1*-0x1f97]-_0x1f5385[0xad7+-0x42*-0x25+-0x1460],_0x3eda95[0x2538+-0xa*-0x1f9+-0x38f0]=_0xc540ac[0xc22+-0x90b+-0x315]-_0x1f5385[0x38b*0x3+-0x184a+0xdab*0x1];},_0x230f3d=(_0x45dc78,_0x32ddb9,_0x58d654)=>{_0x45dc78[0x1*0xa91+0x21f6+-0x2c87]=_0x32ddb9[0x1*-0x22d7+0x187f+0xa59]*_0x58d654[0x1*0x1b62+0xe1+-0x1c41]-_0x58d654[-0x4b5+0x6*-0x29b+-0x8*-0x28b]*_0x32ddb9[-0x1*-0x1bfb+0xb*-0x2e7+0x16*0x2e],_0x45dc78[0x1*0x221+-0x12c+-0xf4]=_0x32ddb9[-0xe9+-0x1f57+0x2042]*_0x58d654[0xdc*0x6+0xcfb*-0x2+-0xa67*-0x2]-_0x58d654[-0x25*-0x71+-0x2230+-0x11dd*-0x1]*_0x32ddb9[0x22c2+0x174d+-0x3a0f],_0x45dc78[-0x97*0x35+0x3fb*-0x5+0x332c]=_0x32ddb9[0x1*-0xabf+0x2*-0xc25+-0x2309*-0x1]*_0x58d654[-0xb6b+-0x4*0xac+-0x4*-0x387]-_0x58d654[-0x1a16+0x365+0x16b1]*_0x32ddb9[0x47a+-0xf14+-0x1*-0xa9b];},_0x4e075e=(_0xf68a6,_0x106305)=>{const _0x5e31a0=_0xf68a6[_0x106305+(-0xb5*-0x37+0xb*0x7f+-0x21*0x158)],_0x4024ca=_0xf68a6[_0x106305+(0xfe*-0x11+-0x84d*0x4+-0x1*-0x3213)],_0x4aca99=_0xf68a6[_0x106305+(-0x9*0x137+-0x544*0x1+-0x3*-0x567)],_0x4f72f7=(-0xaff+-0xba0+-0x20*-0xb5)/Math['sqrt'](_0x5e31a0*_0x5e31a0+_0x4024ca*_0x4024ca+_0x4aca99*_0x4aca99);_0xf68a6[_0x106305+(0x1*0x24e4+0x3db+-0x39*0xb7)]*=_0x4f72f7,_0xf68a6[_0x106305+(0x16e*0x19+-0x4a*-0x65+-0x40ef)]*=_0x4f72f7,_0xf68a6[_0x106305+(-0xc16+0x1a7c+-0x4*0x399)]*=_0x4f72f7;},_0x2d208a=(_0x5c7db5,_0xccc37b,_0x5d901b)=>{for(let _0x1a1ed1=-0x2*-0x39e+0xaf9*-0x1+0x3bd;_0x1a1ed1<-0x235c+-0x16d8+0x3a37;++_0x1a1ed1)_0x5c7db5[_0x1a1ed1]=_0xccc37b[_0x5d901b+_0x1a1ed1];},_0x4379eb=_0x303d7a['length']/(0x2676*-0x1+-0x67*0x7+0x842*0x5),_0x100a17=_0x23db64['length']/(-0xc23+0x7*-0x43a+0x4*0xa6f),_0x249629=new Float32Array(_0x23db64['length']),_0x598ace=[0x1fa6+-0x1282+0x74*-0x1d,-0x682+0x2c*-0x5+0x2*0x3af,-0xe81*0x1+-0x1643+0x24c4],_0x12db36=[-0x1*0x611+0x47*-0x42+0x185f,-0x1d*0x6b+0x98b*-0x1+0x15aa,0xff1+0x184*0x4+-0x2b*0x83],_0x263d80=[0xec0+0x1564+-0x2424,-0x2*0x847+-0x3*-0xbee+0x1*-0x133c,-0xb*0xa9+0x11d+0x2*0x313],_0x431640=[-0x3d0+0x82c+-0x45c,-0x220f+-0xe8+0x22f7,-0x1*0x1423+-0x76*0x20+0xba1*0x3],_0x49456d=[0x149e+0x40*0x50+-0x289e,0x12d9+0x11f+-0x13f8,0x17d*-0x2+0x1*0x119f+-0xea5],_0xdba7af=[-0x18dd+0xc99*-0x1+0x7*0x55a,-0x7e5*0x2+-0x1*0x1227+0x21f1*0x1,-0x1*-0xbc9+0xb5a+0x1723*-0x1];for(let _0x2606c5=0x1494+0x21*-0x49+-0xb2b;_0x2606c5<_0x4379eb;++_0x2606c5){const _0x5dbcb4=_0x303d7a[_0x2606c5*(0x1609*0x1+0x126a*-0x1+-0x2c*0x15)+(-0x7*-0x7f+-0x13d7+0x105e*0x1)]*(0x179*-0x15+0xe46+0x10aa),_0xb6e200=_0x303d7a[_0x2606c5*(-0x31*-0xba+0x6a9+0xd*-0x340)+(-0x1a73+-0x16*0x107+0x111*0x2e)]*(-0xa12+0x26f5*-0x1+0x1885*0x2),_0x45c647=_0x303d7a[_0x2606c5*(0x264f+0x4*0x50b+-0x2*0x1d3c)+(0x1fda+-0x7b7+-0x1821)]*(-0x1c5b+-0x1d3c+0x399a);_0x2d208a(_0x598ace,_0x23db64,_0x5dbcb4),_0x2d208a(_0x12db36,_0x23db64,_0xb6e200),_0x2d208a(_0x263d80,_0x23db64,_0x45c647),_0xe7125f(_0x431640,_0x12db36,_0x598ace),_0xe7125f(_0x49456d,_0x263d80,_0x598ace),_0x230f3d(_0xdba7af,_0x431640,_0x49456d),_0x4e075e(_0xdba7af,0x23bf*-0x1+-0x7a+0x2439);for(let _0x48c412=0x87*-0x21+-0x2*-0x1297+0x53*-0x3d;_0x48c412<0x202f+0x13*-0xa3+-0x9*0x23b;++_0x48c412)_0x249629[_0x5dbcb4+_0x48c412]+=_0xdba7af[_0x48c412],_0x249629[_0xb6e200+_0x48c412]+=_0xdba7af[_0x48c412],_0x249629[_0x45c647+_0x48c412]+=_0xdba7af[_0x48c412];}for(let _0x384624=-0x25f9+-0x1*-0x2709+-0x44*0x4;_0x384624<_0x100a17;++_0x384624)_0x4e075e(_0x249629,_0x384624*(-0x10c5+-0x2231*-0x1+-0x1169));return new Uint8Array(_0x249629['buffer']);},_0x4535aa=_0x435872=>{const _0x5ccb60={},_0x5ef4a2=new _0x5cefad['DecoderBuf'+'fer']();_0x5ef4a2['Init'](_0x435872,_0x435872['length']);const _0x15d9a8=new _0x5cefad['Decoder']();if(_0x15d9a8['GetEncoded'+'GeometryTy'+'pe'](_0x5ef4a2)!==_0x5cefad['TRIANGULAR'+'_MESH'])return _0x5ccb60['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20mesh:\x20n'+'ot\x20a\x20mesh',_0x5ccb60;const _0x1cc0b3=new _0x5cefad['Mesh'](),_0x4adebc=_0x15d9a8['DecodeBuff'+'erToMesh'](_0x5ef4a2,_0x1cc0b3);if(!_0x4adebc||!_0x4adebc['ok']()||_0x5cefad['getPointer'](_0x1cc0b3)===-0x1*-0x7e1+0x4ee+-0xccf)return _0x5ccb60['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20asset',_0x5ccb60;const _0x3a1965=_0x1cc0b3['num_faces']()*(0x19ef*-0x1+-0x94*0xb+0x204e*0x1),_0x1c8567=_0x1cc0b3['num_points']()<=0x15394*-0x1+-0xa46*0x20+0x39c53*0x1,_0x240ddd=_0x3a1965*(_0x1c8567?0xa*0x1af+-0x1379*-0x1+-0x244d*0x1:0x1fb+0x748+-0x93f),_0x20a204=_0x5cefad['_malloc'](_0x240ddd);_0x1c8567?(_0x15d9a8['GetTriangl'+'esUInt16Ar'+'ray'](_0x1cc0b3,_0x240ddd,_0x20a204),_0x5ccb60['indices']=new Uint16Array(_0x5cefad['HEAPU16']['buffer'],_0x20a204,_0x3a1965)['slice']()['buffer']):(_0x15d9a8['GetTriangl'+'esUInt32Ar'+'ray'](_0x1cc0b3,_0x240ddd,_0x20a204),_0x5ccb60['indices']=new Uint32Array(_0x5cefad['HEAPU32']['buffer'],_0x20a204,_0x3a1965)['slice']()['buffer']),_0x5cefad['_free'](_0x20a204);const _0x4bb85a=[];for(let _0x32abda=0x16b5*-0x1+-0x176*-0x9+0x98f*0x1;_0x32abda<_0x1cc0b3['num_attrib'+'utes']();++_0x32abda)_0x4bb85a['push'](_0x15d9a8['GetAttribu'+'te'](_0x1cc0b3,_0x32abda));_0x4bb85a['sort']((_0x5c71ea,_0x234f23)=>(_0x7c89c8[_0x5c71ea['attribute_'+'type']()]??_0x7c89c8['length'])-(_0x7c89c8[_0x234f23['attribute_'+'type']()]??_0x7c89c8['length'])),_0x5ccb60['attributes']=_0x4bb85a['map'](_0x1292b9=>_0x1292b9['unique_id']());let _0x39a133=0xcc8+-0x6*0x115+-0x64a;const _0x33fa77=_0x4bb85a['map'](_0x3e6a40=>{const _0x52bd4f=_0x39a133;return _0x39a133+=Math['ceil'](_0x3dd9e1(_0x3e6a40)/(0x48b+0xc62+-0x6f*0x27))*(0x6*0x287+-0x41f+-0xb07*0x1),_0x52bd4f;}),_0x1d0aad=_0x4bb85a['some'](_0x577e31=>_0x577e31['attribute_'+'type']()===0xe2c+-0x1191+0x366),_0xe3726a=_0x33fa77[0x1*-0x15eb+-0x2709*0x1+-0xc31*-0x5];if(!_0x1d0aad){for(let _0x2382a3=-0x457*-0x1+-0x1*0x219b+0x7f*0x3b;_0x2382a3<_0x33fa77['length'];++_0x2382a3)_0x33fa77[_0x2382a3]+=-0xe5*-0x25+-0x2225+0xa*0x1c;_0x39a133+=0xbda+-0x265a*0x1+-0x4*-0x6a3;}_0x5ccb60['vertices']=new ArrayBuffer(_0x1cc0b3['num_points']()*_0x39a133);const _0x5c4efe=new Uint8Array(_0x5ccb60['vertices']);for(let _0x22b2bb=-0x26b2+0x83*-0x17+0x3277;_0x22b2bb<_0x1cc0b3['num_attrib'+'utes']();++_0x22b2bb){const _0x1a83ac=_0x4bb85a[_0x22b2bb],_0x36093b=_0x3dd9e1(_0x1a83ac),_0x94a955=_0x1cc0b3['num_points']()*_0x36093b,_0x13f896=_0x5cefad['_malloc'](_0x94a955);_0x15d9a8['GetAttribu'+'teDataArra'+'yForAllPoi'+'nts'](_0x1cc0b3,_0x1a83ac,_0x1a83ac['data_type'](),_0x94a955,_0x13f896);const _0x3f53a1=new Uint8Array(_0x5cefad['HEAPU8']['buffer'],_0x13f896,_0x94a955);for(let _0x4b627a=0x11f0+-0x188*0x8+-0x5b0;_0x4b627a<_0x1cc0b3['num_points']();++_0x4b627a)for(let _0x388d7f=0x103c+-0xa11+-0x62b;_0x388d7f<_0x36093b;++_0x388d7f)_0x5c4efe[_0x4b627a*_0x39a133+_0x33fa77[_0x22b2bb]+_0x388d7f]=_0x3f53a1[_0x4b627a*_0x36093b+_0x388d7f];if(!_0x1d0aad&&_0x1a83ac['attribute_'+'type']()===-0x139e+-0x12*0xd3+-0x2df*-0xc){const _0x4a9690=_0x30d991(_0x451575(_0x3f53a1,_0x1a83ac['data_type']()),_0x1c8567?new Uint16Array(_0x5ccb60['indices']):new Uint32Array(_0x5ccb60['indices']));for(let _0x2d3c44=0xe*0x73+-0xc64+-0x16*-0x47;_0x2d3c44<_0x1cc0b3['num_points']();++_0x2d3c44)for(let _0x5201a4=0x118d+-0x154d+0x3c0;_0x5201a4<-0x94*0x2c+-0x26b7+0xcd7*0x5;++_0x5201a4)_0x5c4efe[_0x2d3c44*_0x39a133+_0xe3726a+_0x5201a4]=_0x4a9690[_0x2d3c44*(-0x27*-0x35+0x1*-0x1051+-0x84a*-0x1)+_0x5201a4];}_0x5cefad['_free'](_0x13f896);}return _0x5cefad['destroy'](_0x1cc0b3),_0x5cefad['destroy'](_0x15d9a8),_0x5cefad['destroy'](_0x5ef4a2),_0x5ccb60;},_0x326d91=_0x4f7b1e=>{const _0x226f95=_0x4535aa(new Uint8Array(_0x4f7b1e['buffer']));self['postMessag'+'e']({'jobId':_0x4f7b1e['jobId'],'error':_0x226f95['error'],'indices':_0x226f95['indices'],'vertices':_0x226f95['vertices'],'attributes':_0x226f95['attributes']},[_0x226f95['indices'],_0x226f95['vertices']]['filter'](_0x3f134e=>_0x3f134e!=null));},_0x5b75de=[];self['onmessage']=_0x434df1=>{const _0x8050ea=_0x434df1['data'];switch(_0x8050ea['type']){case'init':self['DracoDecod'+'erModule']({'instantiateWasm':(_0x4d55ba,_0x20c35b)=>(WebAssembly['instantiat'+'e'](_0x8050ea['module'],_0x4d55ba)['then'](_0x2d2adc=>_0x20c35b(_0x2d2adc))['catch'](_0x27f5bf=>console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x27f5bf)),{})})['then'](_0x8d8523=>{_0x5cefad=_0x8d8523,_0x5b75de['forEach'](_0x11c558=>_0x326d91(_0x11c558));});break;case'decodeMesh':_0x5cefad?_0x326d91(_0x8050ea):_0x5b75de['push'](_0x8050ea);break;}};}const Dg=-0x5*-0x42d+-0x65*0x61+-0x9*-0x1ef;class JO{constructor(){this['workers']=[[],[],[]],this['jobId']=0x1*0xfea+0xde8+-0x2*0xee9,this['jobQueue']=[],this['jobCallbac'+'ks']=new Map(),this['run']=(_0x3f94e7,_0x86d5d2)=>{_0x3f94e7['postMessag'+'e']({'type':'decodeMesh','jobId':_0x86d5d2['jobId'],'buffer':_0x86d5d2['buffer']},[_0x86d5d2['buffer']]);};}['init'](_0x424587){for(_0x424587['forEach'](_0x4bebef=>{_0x4bebef['addEventLi'+'stener']('message',_0x167a53=>{const _0x1e945b=_0x167a53['data'],_0x38a993=this['jobCallbac'+'ks']['get'](_0x1e945b['jobId']);if(_0x38a993&&_0x38a993(_0x1e945b['error'],{'indices':_0x1e945b['indices'],'vertices':_0x1e945b['vertices'],'attributes':_0x1e945b['attributes']}),this['jobCallbac'+'ks']['delete'](_0x1e945b['jobId']),this['jobQueue']['length']>-0x251b*0x1+-0x5d6*0x4+0x3c73){const _0x41d044=this['jobQueue']['shift']();this['run'](_0x4bebef,_0x41d044);}else{const _0x22723b=this['workers'][0x4f*-0x1+-0x5e1*-0x2+-0xb71]['indexOf'](_0x4bebef);if(_0x22723b!==-(0x32*-0x16+0x1*0xf10+-0xac3))this['workers'][0x7*0x515+0xb29*0x2+-0x39e3]['splice'](_0x22723b,-0x1812+0x289+0x158a),this['workers'][-0x653*-0x5+-0x201*-0xe+-0x3bac]['push'](_0x4bebef);else{const _0x5895ee=this['workers'][0x2006+0x277*-0x1+-0x27*0xc2]['indexOf'](_0x4bebef);_0x5895ee!==-(0x1709*-0x1+-0x1*-0x22f3+0xbe9*-0x1)?(this['workers'][-0x496+-0x3*-0x287+-0x2fe]['splice'](_0x5895ee,0x2ea*0x8+-0x85*-0x2a+0x2d21*-0x1),this['workers'][-0x413+0x9*-0x1b7+0x1382]['push'](_0x4bebef)):M['error']('logical\x20er'+'ror');}}});}),this['workers'][-0x258c+-0x1+0x258d]=_0x424587;this['jobQueue']['length']&&(this['workers'][-0x2198+0x1f*-0xc+0x230c]['length']||this['workers'][-0x1*0x18c7+-0x752*-0x2+0xa24]['length']);){const _0x3abf15=this['jobQueue']['shift']();if(this['workers'][0x1449+0x1b25*-0x1+-0x1b7*-0x4]['length']>0x3d+0x4*0x68d+-0x1a71){const _0x185955=this['workers'][0x1fda+-0x2*0xbb1+0x8*-0x10f]['shift']();this['workers'][0x7f2+-0x9d5*0x1+0xb*0x2c]['push'](_0x185955),this['run'](_0x185955,_0x3abf15);}else{const _0x9b70c=this['workers'][-0x18fd*0x1+0x3c1*0x6+-0x9e*-0x4]['shift']();this['workers'][-0xe3*0x2c+-0x106c+0x3772]['push'](_0x9b70c),this['run'](_0x9b70c,_0x3abf15);}}}['enqueueJob'](_0x489fe1,_0xba72de){const _0x1eaf1e={'jobId':this['jobId']++,'buffer':_0x489fe1};if(this['jobCallbac'+'ks']['set'](_0x1eaf1e['jobId'],_0xba72de),this['workers'][-0x913*0x4+0x48a+0xa*0x32d]['length']>-0x19f*-0x11+0x4*-0x4+0x1*-0x1b7f){const _0x2a25f0=this['workers'][0xb70+0x1e44+-0xa6d*0x4]['shift']();this['workers'][-0x1d4e+-0x71*0x5+-0x2*-0xfc2]['push'](_0x2a25f0),this['run'](_0x2a25f0,_0x1eaf1e);}else{if(this['workers'][0x855+0x126*0x3+0x89*-0x16]['length']>-0x45*0x63+-0x14*0x180+0x12e5*0x3){const _0x247718=this['workers'][-0x62*0x2c+0x2678*-0x1+-0x1*-0x3751]['shift']();this['workers'][0x122b+0x1525+-0x2*0x13a7]['push'](_0x247718),this['run'](_0x247718,_0x1eaf1e);}else this['jobQueue']['push'](_0x1eaf1e);}}}const eF=_0x5b6e61=>new Promise((_0x5c2599,_0x11e185)=>{const _0x3185d3={'cache':!(0x1a76+-0x1d*-0x137+-0x3db1),'responseType':'text','retry':Dg>0x9f6+0x10a4+-0x1a9a,'maxRetries':Dg};nt['get'](_0x5b6e61,_0x3185d3,(_0x26670f,_0x345cb6)=>{_0x26670f?_0x11e185(_0x26670f):_0x5c2599(_0x345cb6);});}),tF=_0x379fa7=>{const _0x451f6c=()=>fetch(_0x379fa7)['then'](_0x393a92=>_0x393a92['arrayBuffe'+'r']())['then'](_0x3387de=>WebAssembly['compile'](_0x3387de)),_0x431981=()=>WebAssembly['compileStr'+'eaming'](fetch(_0x379fa7))['catch'](_0x18cc36=>(M['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x379fa7+'\x20('+_0x18cc36+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x451f6c()));return WebAssembly['compileStr'+'eaming']?_0x431981():_0x451f6c();},Lg=-0x161e+0x2*0xc05+-0x1eb;let Eh;const sF=_0x435a28=>{if(Eh)return!(0x1a6*-0x14+0x1d*-0x1d+-0x2441*-0x1);if(!_0x435a28){const _0x384af0=sS['getConfig']('DracoDecod'+'erModule');_0x384af0?_0x435a28={'jsUrl':_0x384af0['glueUrl'],'wasmUrl':_0x384af0['wasmUrl'],'numWorkers':_0x384af0['numWorkers']}:_0x435a28={'jsUrl':'draco.wasm'+'.js','wasmUrl':'draco.wasm'+'.wasm','numWorkers':Lg};}return!_0x435a28['jsUrl']||!_0x435a28['wasmUrl']?!(0xc9f+-0x19a5+-0x73*-0x1d):(Eh=new JO(),Promise['all']([eF(_0x435a28['jsUrl']),tF(_0x435a28['wasmUrl'])])['then'](([_0x189a01,_0x410cb6])=>{const _0x4521ca=['/*\x20draco\x20*'+'/',_0x189a01,'/*\x20worker\x20'+'*/','(\x0a'+QO['toString']()+'\x0a)()\x0a\x0a']['join']('\x0a'),_0x470e8e=new Blob([_0x4521ca],{'type':'applicatio'+'n/javascri'+'pt'}),_0x550186=URL['createObje'+'ctURL'](_0x470e8e),_0x48677e=Math['max'](-0x1059+0x6*-0xe5+0x15b8,Math['min'](0xc63*-0x3+-0x196a+0x3ea3,_0x435a28['numWorkers']||Lg)),_0xb1d55d=[];for(let _0x377369=0x15e4+0x1397+-0x297b;_0x377369<_0x48677e;++_0x377369){const _0x2c926b=new Worker(_0x550186);_0x2c926b['postMessag'+'e']({'type':'init','module':_0x410cb6}),_0xb1d55d['push'](_0x2c926b);}Eh['init'](_0xb1d55d);}),!(-0xe*0x2e+0x1feb*-0x1+0xd7*0x29));},iF=(_0x3219cd,_0x12c8e6)=>sF()?(Eh['enqueueJob'](_0x3219cd,_0x12c8e6),!(0x2e5*-0xd+-0x3cd+0x296e)):!(-0x2217+0x1bd*-0xd+0x38b1);class rF{constructor(){h(this,'gltf'),h(this,'nodes'),h(this,'scenes'),h(this,'animations'),h(this,'textures'),h(this,'materials'),h(this,'variants'),h(this,'meshVarian'+'ts'),h(this,'meshDefaul'+'tMaterials'),h(this,'renders'),h(this,'skins'),h(this,'lights'),h(this,'cameras'),h(this,'nodeInstan'+'cingMap');}['destroy'](){this['renders']&&this['renders']['forEach'](_0x4ef5ab=>{_0x4ef5ab['meshes']=null;});}}const Lv=_0x1a0e60=>/^data:[^\n\r,\u2028\u2029]*,.*$/i['test'](_0x1a0e60),aF=_0x45e23f=>_0x45e23f['substring'](_0x45e23f['indexOf'](':')+(-0x20d8+-0x35*-0x2f+-0xb8f*-0x2),_0x45e23f['indexOf'](';')),jo=_0x1d437d=>{switch(_0x1d437d){case'SCALAR':return 0x14e5+-0x2552+0x106e;case'VEC2':return 0xa*0x39e+0x2065*-0x1+-0x3c5;case'VEC3':return-0xc9*0x17+0xafa+-0x1c6*-0x4;case'VEC4':return-0x5dc+-0x1*-0x1e71+0x14b*-0x13;case'MAT2':return-0x8b*-0x41+0x1*-0x16a2+-0xca5;case'MAT3':return 0x1d09*-0x1+0x20ee+-0x3dc;case'MAT4':return 0x30*0xb2+0x8a*-0x47+0x4f6;default:return-0x1a3*-0x1+-0x1f61+-0x3*-0x9eb;}},td=_0x2e2f52=>{switch(_0x2e2f52){case-0xcd+0x1*0x1de1+-0x914:return Nc;case 0x175b+-0x674+0x31a:return Xr;case 0x1*-0x621+-0x85f*0x1+0x2282:return kc;case 0x1ce0*-0x1+0x1137+0x1fac:return rl;case-0x1742+0x5*0x311+0x137*0x17:return MS;case 0xa+-0x1097*0x1+-0x1*-0x2492:return Do;case 0x1c9c*-0x1+0x109d*-0x2+0x1*0x51dc:return Be;default:return 0xb1*0x22+-0x3f7+-0x138b;}},nF=_0x3dd98e=>{switch(_0x3dd98e){case 0x345+0x1232+-0x19*0xf:return-0x2*0x12a3+-0x3*-0x595+-0x9*-0x248;case-0x2229+0x2761+0xec9:return 0x4*-0x4b2+0x61*0x62+-0x1259;case 0x1*-0x20d8+0xa58+0x1541*0x2:return-0x2*-0x1003+-0x5*0x2cd+0x1*-0x1203;case 0x2*-0xad6+-0x2*0x8cb+0x3b45:return-0x2226+-0x244*-0xd+0x12d*0x4;case-0x1*-0xb1c+0x18ea+-0x801*0x2:return 0xc40+0x1*-0x538+-0x704;case-0x36d+0x2*0xa60+0x2b2:return 0x4*-0x64b+0x1*0xad0+0xe60;case 0x1aef+-0x202+-0x4e7:return 0x13a0+0x2e*0xce+0x3*-0x12e0;default:return 0x9*0xbf+-0x40*-0x2e+-0x1237;}},oF=_0x1a9601=>{switch(_0x1a9601){case-0x85e*0x3+0xd53+0x65b*0x5:return Int8Array;case 0x2aa*-0x6+-0x560+0x295d:return Uint8Array;case-0x1*0x3a1+0x105f+-0xf*-0x7c:return Int16Array;case 0x12f2+0x128a+0x3f*-0x47:return Uint16Array;case-0x1*-0x15ca+-0x885+0x9d*0xb:return Int32Array;case 0x1*-0x7b1+0x262f+-0xa79:return Uint32Array;case 0x2638+-0x9*-0x1f7+-0x23e1:return Float32Array;default:return null;}},oc={'POSITION':Pe,'NORMAL':cs,'TANGENT':ci,'COLOR_0':kt,'JOINTS_0':ns,'WEIGHTS_0':li,'TEXCOORD_0':Yt,'TEXCOORD_1':da,'TEXCOORD_2':Qo,'TEXCOORD_3':Jo,'TEXCOORD_4':el,'TEXCOORD_5':tl,'TEXCOORD_6':sl,'TEXCOORD_7':il},Rg={[Pe]:0x2182*-0x1+0x1e28+-0x27*-0x16,[cs]:-0x1a43+0x17f*0x1+0x18c5,[ci]:0x2009+0x5*-0x611+-0x1f*0xe,[kt]:0xf26+-0x5*-0x8f+0xaa*-0x1b,[ns]:-0x20c*0x3+0x1464+-0xe3c,[li]:-0xb*-0x115+0x35e*0x2+-0x94f*0x2,[Yt]:0x29*-0xc1+0x7d5*-0x3+0x2*0x1b37,[da]:-0x451+0x1*-0x17cf+0x1c27,[Qo]:-0x2*-0x6cb+-0x752*0x1+-0x63c,[Jo]:-0x2424+0x2*0xdf+-0x5*-0x6e3,[el]:-0x1*-0x1155+0x16b*0x17+-0x31e8,[tl]:0x1*0xb89+0x3ad*0x9+-0x2c93,[sl]:0xcc*0x8+0x91+-0x5*0x161,[il]:0xa5b+-0x148b*0x1+0x1*0xa3d},lF=_0x57b375=>{switch(_0x57b375){case Nc:return _0x183884=>Math['max'](_0x183884/(0x1f24*-0x1+0x430+0x1*0x1b73),-(-0x21aa+0x1*-0xb77+0x2d22));case Xr:return _0x1706aa=>_0x1706aa/(-0x4b2*-0x1+-0xb11+0x29*0x2e);case kc:return _0x251f40=>Math['max'](_0x251f40/(0x59c6+0x786c+-0xb*0x779),-(-0x2190+-0x793*0x1+-0x2*-0x1492));case rl:return _0x1f2c4c=>_0x1f2c4c/(0x93c5+-0x1640+0x827a);default:return _0x1fab5d=>_0x1fab5d;}},lu=(_0x15e9dd,_0x508b1a,_0x13a497)=>{const _0x1f5676=lF(_0x13a497),_0x3ddf04=_0x508b1a['length'];for(let _0x3b629a=-0xeb*-0x11+-0xfc4*-0x1+-0x1f5f;_0x3b629a<_0x3ddf04;++_0x3b629a)_0x15e9dd[_0x3b629a]=_0x1f5676(_0x508b1a[_0x3b629a]);return _0x15e9dd;},Qr=(_0x21bd8a,_0x3686d7,_0x1358fb=!(-0x1237*-0x2+-0x10a3+-0x22*0x95))=>{const _0x228442=jo(_0x21bd8a['type']),_0x4c4925=oF(_0x21bd8a['componentT'+'ype']);if(!_0x4c4925)return null;let _0x1aa623;if(_0x21bd8a['sparse']){const _0x5b5070=_0x21bd8a['sparse'],_0x1fb364={'count':_0x5b5070['count'],'type':'SCALAR'},_0x370b52=Qr(Object['assign'](_0x1fb364,_0x5b5070['indices']),_0x3686d7,!(-0x6*0x53f+-0x25de+0x4558)),_0x6d3a28={'count':_0x5b5070['count'],'type':_0x21bd8a['type'],'componentType':_0x21bd8a['componentT'+'ype']},_0xda6518=Qr(Object['assign'](_0x6d3a28,_0x5b5070['values']),_0x3686d7,!(0x1*-0x81f+0x18db+-0x10bc));if(_0x21bd8a['hasOwnProp'+'erty']('bufferView')){const _0x2b3890={'bufferView':_0x21bd8a['bufferView'],'byteOffset':_0x21bd8a['byteOffset'],'componentType':_0x21bd8a['componentT'+'ype'],'count':_0x21bd8a['count'],'type':_0x21bd8a['type']};_0x1aa623=Qr(_0x2b3890,_0x3686d7,!(0x1962+-0x3*0x593+-0x8a9))['slice']();}else _0x1aa623=new _0x4c4925(_0x21bd8a['count']*_0x228442);for(let _0x2292ac=-0x1a5f+-0x1f91*-0x1+-0x13*0x46;_0x2292ac<_0x5b5070['count'];++_0x2292ac){const _0x33fc19=_0x370b52[_0x2292ac];for(let _0x2697b2=-0x1e5+-0x232f+0x2514;_0x2697b2<_0x228442;++_0x2697b2)_0x1aa623[_0x33fc19*_0x228442+_0x2697b2]=_0xda6518[_0x2292ac*_0x228442+_0x2697b2];}}else{if(_0x21bd8a['hasOwnProp'+'erty']('bufferView')){const _0x49be0f=_0x3686d7[_0x21bd8a['bufferView']];if(_0x1358fb&&_0x49be0f['hasOwnProp'+'erty']('byteStride')){const _0x3d5958=_0x228442*_0x4c4925['BYTES_PER_'+'ELEMENT'],_0x109692=new ArrayBuffer(_0x21bd8a['count']*_0x3d5958),_0x24c5bc=new Uint8Array(_0x109692);let _0x96f7d3=-0xfca+-0x2301+0x32cb*0x1;for(let _0x1c2b3=0x1c8+0x1ee3*0x1+-0x20ab*0x1;_0x1c2b3<_0x21bd8a['count'];++_0x1c2b3){let _0x46e796=(_0x21bd8a['byteOffset']||-0x2d*-0x6+0x1*-0x17ea+-0x1*-0x16dc)+_0x1c2b3*_0x49be0f['byteStride'];for(let _0x442173=0x709*0x1+0xe9e+-0x1*0x15a7;_0x442173<_0x3d5958;++_0x442173)_0x24c5bc[_0x96f7d3++]=_0x49be0f[_0x46e796++];}_0x1aa623=new _0x4c4925(_0x109692);}else _0x1aa623=new _0x4c4925(_0x49be0f['buffer'],_0x49be0f['byteOffset']+(_0x21bd8a['byteOffset']||-0x761+-0x24d*-0x9+-0xd54*0x1),_0x21bd8a['count']*_0x228442);}else _0x1aa623=new _0x4c4925(_0x21bd8a['count']*_0x228442);}return _0x1aa623;},un=(_0x1bb383,_0x40352d)=>{const _0x28a25c=Qr(_0x1bb383,_0x40352d,!(0x25*-0x84+-0x1*-0x21a0+-0xe8c));if(_0x28a25c instanceof Float32Array||!_0x1bb383['normalized'])return _0x28a25c;const _0x483841=new Float32Array(_0x28a25c['length']);return lu(_0x483841,_0x28a25c,td(_0x1bb383['componentT'+'ype'])),_0x483841;},hu=_0x1ac3f0=>{let _0x2fb8e0=_0x1ac3f0['min'],_0x32665e=_0x1ac3f0['max'];if(!_0x2fb8e0||!_0x32665e)return null;if(_0x1ac3f0['normalized']){const _0x4b337a=td(_0x1ac3f0['componentT'+'ype']);_0x2fb8e0=lu([],_0x2fb8e0,_0x4b337a),_0x32665e=lu([],_0x32665e,_0x4b337a);}return new Ie(new I((_0x32665e[-0x737*0x3+-0x68f*-0x1+0xf16]+_0x2fb8e0[0x22d7+0x9*-0x193+-0x14ac])*(-0x2*-0xdbe+-0x8c5*0x3+-0x7*0x2b+0.5),(_0x32665e[-0x1f3b+0x1f48+-0xc*0x1]+_0x2fb8e0[-0x259c+-0x2a9+-0x1423*-0x2])*(0x1*0xf2c+-0x10f0+-0x71*-0x4+0.5),(_0x32665e[-0xf52+-0x2*-0x711+0x132]+_0x2fb8e0[-0x10fa+-0x1b37+0x1*0x2c33])*(0x2*-0x797+-0x1957+0x2885+0.5)),new I((_0x32665e[-0x69*0x53+0x1397+0xe74]-_0x2fb8e0[-0x2203+0x80a+-0x6d*-0x3d])*(0xfd3+0x223*0xb+-0x68e*0x6+0.5),(_0x32665e[-0x25e4*-0x1+-0xa45+0xca*-0x23]-_0x2fb8e0[0xb19+0x2*-0xee1+0x12aa])*(-0x4*0x18b+0x2a9*-0x2+-0xb7e*-0x1+0.5),(_0x32665e[-0xcc7+-0x21a5+0x351*0xe]-_0x2fb8e0[0x176f+0x1*-0x152b+-0x242])*(-0x1af8+0x203d+0x47*-0x13+0.5)));},Rv=_0x20191c=>{if(!_0x20191c['hasOwnProp'+'erty']('mode'))return zs;switch(_0x20191c['mode']){case 0x29*-0xa5+0x6e7+0x7*0x2ca:return Oc;case-0x2177+0x2100+0x78:return Fc;case 0x2006+-0x1*-0x1a21+0x479*-0xd:return wS;case-0x21f3+-0x116b+-0x7*-0x757:return ES;case 0xae+0x150f+-0x1*0x15b9:return zs;case-0x47b*0x5+-0x77*-0x17+-0x21*-0x5b:return cr;case-0xa7f+0x293*-0x1+0xd18:return $r;default:return zs;}},hF=_0x3d5dbe=>{const _0xddc120=new Uint16Array(_0x3d5dbe);for(let _0x5cb4b0=-0x12af+-0xd0*0x15+0x23bf;_0x5cb4b0<_0x3d5dbe;_0x5cb4b0++)_0xddc120[_0x5cb4b0]=_0x5cb4b0;return _0xddc120;},cF=(_0x1b10ab,_0x5afdb3)=>{const _0x4ae132=_0x1b10ab[Pe];if(!_0x4ae132||_0x4ae132['components']!==-0x1*-0xd46+0x249+-0x1*0xf8c)return;let _0x140a65;if(_0x4ae132['size']!==_0x4ae132['stride']){const _0x43b0ca=_0x4ae132['stride']/po[_0x4ae132['type']],_0x2ea964=new ln[_0x4ae132['type']](_0x4ae132['buffer'],_0x4ae132['offset'],_0x4ae132['count']*_0x43b0ca);_0x140a65=new ln[_0x4ae132['type']](_0x4ae132['count']*(-0x566*-0x7+-0x515*-0x1+-0x2adc));for(let _0x40207c=-0x31d+-0x65*0x52+-0x2377*-0x1;_0x40207c<_0x4ae132['count'];++_0x40207c)_0x140a65[_0x40207c*(-0xd34*0x2+0x5bb*0x6+-0x1*0x7f7)+(-0x727*0x4+0x264e+-0x22*0x49)]=_0x2ea964[_0x40207c*_0x43b0ca+(0x1db9+-0x3a9+-0x1a10)],_0x140a65[_0x40207c*(0x25fe+0x1*-0x14ad+-0x2*0x8a7)+(0xf4*-0x1f+-0x769+-0x24f6*-0x1)]=_0x2ea964[_0x40207c*_0x43b0ca+(-0x28d*-0x2+-0x207d*0x1+0x1b64)],_0x140a65[_0x40207c*(-0x107b+-0x1dd5+0x2e53)+(0x21df+0x1ffe+-0x17*0x2dd)]=_0x2ea964[_0x40207c*_0x43b0ca+(-0x2*-0x1147+0x1122*0x1+-0x762*0x7)];}else _0x140a65=new ln[_0x4ae132['type']](_0x4ae132['buffer'],_0x4ae132['offset'],_0x4ae132['count']*(0x1*-0x6e+0x2*-0x20a+0x485));const _0x3d9c61=_0x4ae132['count'];_0x5afdb3||(_0x5afdb3=hF(_0x3d9c61));const _0x4a8782=Uy(_0x140a65,_0x5afdb3),_0x16fea3=new Float32Array(_0x4a8782['length']);_0x16fea3['set'](_0x4a8782),_0x1b10ab[cs]={'buffer':_0x16fea3['buffer'],'size':0xc,'offset':0x0,'stride':0xc,'count':_0x3d9c61,'components':0x3,'type':Be};},dF=_0x2b8edf=>{const _0x1ab800=_0x1a96d4=>{const _0x4269ec=[];for(let _0x50ae4e=0x1839+-0x207f+-0x2c2*-0x3;_0x50ae4e<_0x1a96d4['_levels']['length'];++_0x50ae4e){let _0x288c7d=[];if(_0x1a96d4['cubemap']){for(let _0x3a0305=0xe*0x17f+-0xf3f+-0x5b3;_0x3a0305<0x191d+-0x167*0x1+0x10*-0x17b;++_0x3a0305)_0x288c7d['push'](_0x1a96d4['_levels'][_0x50ae4e][_0x3a0305]);}else _0x288c7d=_0x1a96d4['_levels'][_0x50ae4e];_0x4269ec['push'](_0x288c7d);}return _0x4269ec;},_0x157724=new _e(_0x2b8edf['device'],_0x2b8edf);return _0x157724['_levels']=_0x1ab800(_0x2b8edf),_0x157724;},fF=_0x327237=>{const _0x10ee10=new me(_0x327237['name']+'_clone',_0x327237['type'],_0x327237['file'],_0x327237['data'],_0x327237['options']);return _0x10ee10['loaded']=!(0x1*-0xcfb+-0xb*0x10d+0x188a*0x1),_0x10ee10['resource']=dF(_0x327237['resource']),_0x327237['registry']['add'](_0x10ee10),_0x10ee10;},uF=(_0x339c51,_0x15eb24)=>{const _0x6ed3b9=_0x15eb24[Pe];if(!_0x6ed3b9)return null;const _0x4bbdcb=_0x6ed3b9['count'],_0x431e3f=[];for(const _0x3044bc in _0x15eb24)if(_0x15eb24['hasOwnProp'+'erty'](_0x3044bc)){const _0x54fbd8={'semantic':_0x3044bc,'components':_0x15eb24[_0x3044bc]['components'],'type':_0x15eb24[_0x3044bc]['type'],'normalize':!!_0x15eb24[_0x3044bc]['normalize']};zt['isElementV'+'alid'](_0x339c51,_0x54fbd8)||_0x54fbd8['components']++,_0x431e3f['push'](_0x54fbd8);}_0x431e3f['sort']((_0x511b4b,_0x490264)=>Rg[_0x511b4b['semantic']]-Rg[_0x490264['semantic']]);let _0x3119af,_0x13de94,_0x19cf15,_0x5daa79,_0x3cac5b,_0x15a4a0;const _0x44fe91=new zt(_0x339c51,_0x431e3f);let _0x55d006=!(-0x14ed+-0xdaa+0x2297);for(_0x3119af=0x1*-0x1a03+0x11c0+0x843;_0x3119af<_0x44fe91['elements']['length'];++_0x3119af)if(_0x3cac5b=_0x44fe91['elements'][_0x3119af],_0x5daa79=_0x15eb24[_0x3cac5b['name']],_0x15a4a0=_0x5daa79['offset']-_0x6ed3b9['offset'],_0x5daa79['buffer']!==_0x6ed3b9['buffer']||_0x5daa79['stride']!==_0x3cac5b['stride']||_0x5daa79['size']!==_0x3cac5b['size']||_0x15a4a0!==_0x3cac5b['offset']){_0x55d006=!(0x456*0x5+-0x228a+0xcdd);break;}const _0xb29474=new xs(_0x339c51,_0x44fe91,_0x4bbdcb),_0x3cab87=_0xb29474['lock'](),_0x13870=new Uint32Array(_0x3cab87);let _0x5c3248;if(_0x55d006)_0x5c3248=new Uint32Array(_0x6ed3b9['buffer'],_0x6ed3b9['offset'],_0x4bbdcb*_0xb29474['format']['size']/(-0x3*0xa77+0x429+0x1b40)),_0x13870['set'](_0x5c3248);else{let _0x5df89a,_0x21813f;for(_0x3119af=-0x21*-0xb5+-0x32*0x6d+-0x20b;_0x3119af<_0xb29474['format']['elements']['length'];++_0x3119af){_0x3cac5b=_0xb29474['format']['elements'][_0x3119af],_0x5df89a=_0x3cac5b['stride']/(-0xa86*0x2+0x190a+-0x3fa),_0x5daa79=_0x15eb24[_0x3cac5b['name']],_0x21813f=_0x5daa79['stride']/(-0x1f3f+-0x43*0x6b+0x3b44),_0x5c3248=new Uint32Array(_0x5daa79['buffer'],_0x5daa79['offset'],(_0x5daa79['count']-(0x323*-0x3+-0x19*-0x144+0xa*-0x239))*_0x21813f+(_0x5daa79['size']+(-0x2605*-0x1+-0x2cd+-0x1*0x2335))/(0x1e56+-0x182e+-0x624*0x1));let _0x2cb13c=-0x2588+0x158c*-0x1+0x3b14,_0x10198a=_0x3cac5b['offset']/(-0x1b55+0x1b81+-0x28);const _0x48094e=Math['floor']((_0x5daa79['size']+(0xc7*0x28+-0xad2+-0x111*0x13))/(-0x1*-0x1010+0xe36+-0x1e42));for(_0x13de94=-0x1e59+0xf96+0xec3;_0x13de94<_0x4bbdcb;++_0x13de94){for(_0x19cf15=0x24*-0xe3+-0x2387+0x1f*0x22d;_0x19cf15<_0x48094e;++_0x19cf15)_0x13870[_0x10198a+_0x19cf15]=_0x5c3248[_0x2cb13c+_0x19cf15];_0x2cb13c+=_0x21813f,_0x10198a+=_0x5df89a;}}}return _0xb29474['unlock'](),_0xb29474;},mF=(_0x3a6bd4,_0x2f9790,_0x5baef9,_0x1cfc16,_0xca5e1e,_0x2e1cb1)=>{const _0x2b723d={},_0xe78819=[];for(const _0x2b06e5 in _0x2f9790)_0x2f9790['hasOwnProp'+'erty'](_0x2b06e5)&&oc['hasOwnProp'+'erty'](_0x2b06e5)&&(_0x2b723d[_0x2b06e5]=_0x2f9790[_0x2b06e5],_0xe78819['push'](_0x2b06e5+':'+_0x2f9790[_0x2b06e5]));_0xe78819['sort']();const _0x2592f4=_0xe78819['join']();let _0x10a57b=_0x2e1cb1[_0x2592f4];if(!_0x10a57b){const _0x2dc7f2={};for(const _0x4723d1 in _0x2b723d){const _0x157b4b=_0x1cfc16[_0x2f9790[_0x4723d1]],_0x577eae=Qr(_0x157b4b,_0xca5e1e),_0x386483=_0xca5e1e[_0x157b4b['bufferView']],_0x57d4a3=oc[_0x4723d1],_0xbfbf32=jo(_0x157b4b['type'])*nF(_0x157b4b['componentT'+'ype']),_0x2cd5e5=_0x386483&&_0x386483['hasOwnProp'+'erty']('byteStride')?_0x386483['byteStride']:_0xbfbf32;_0x2dc7f2[_0x57d4a3]={'buffer':_0x577eae['buffer'],'size':_0xbfbf32,'offset':_0x577eae['byteOffset'],'stride':_0x2cd5e5,'count':_0x157b4b['count'],'components':jo(_0x157b4b['type']),'type':td(_0x157b4b['componentT'+'ype']),'normalize':_0x157b4b['normalized']};}_0x2dc7f2['hasOwnProp'+'erty'](cs)||cF(_0x2dc7f2,_0x5baef9),_0x10a57b=uF(_0x3a6bd4,_0x2dc7f2),_0x2e1cb1[_0x2592f4]=_0x10a57b;}return _0x10a57b;},pF=(_0x3ed1fb,_0x980339,_0x57b365,_0x3a7312,_0x3fd635,_0x47fb46)=>{let _0x16e939,_0x5c2513,_0x5bc1e1;const _0x4e2bfe=_0x980339['joints'],_0x238fde=_0x4e2bfe['length'],_0x18359f=[];if(_0x980339['hasOwnProp'+'erty']('inverseBin'+'dMatrices')){const _0x41373d=_0x980339['inverseBin'+'dMatrices'],_0xc46d44=Qr(_0x57b365[_0x41373d],_0x3a7312,!(0x19c7+-0x27*0xf2+0xb17*0x1)),_0x3aac46=[];for(_0x16e939=0xc85+-0x884+-0x401;_0x16e939<_0x238fde;_0x16e939++){for(_0x5c2513=0x925+-0x1e6a+0xa5*0x21;_0x5c2513<-0x9dd*0x2+0x96e*0x1+0xa5c;_0x5c2513++)_0x3aac46[_0x5c2513]=_0xc46d44[_0x16e939*(0x128c+-0x7*-0x51b+0x15*-0x295)+_0x5c2513];_0x5bc1e1=new te(),_0x5bc1e1['set'](_0x3aac46),_0x18359f['push'](_0x5bc1e1);}}else{for(_0x16e939=0x2125+-0x1747+-0x9de;_0x16e939<_0x238fde;_0x16e939++)_0x5bc1e1=new te(),_0x18359f['push'](_0x5bc1e1);}const _0x188770=[];for(_0x16e939=0x1f*-0x129+-0x22c0+0x1a5*0x2b;_0x16e939<_0x238fde;_0x16e939++)_0x188770[_0x16e939]=_0x3fd635[_0x4e2bfe[_0x16e939]]['name'];const _0x292283=_0x188770['join']('#');let _0x907f44=_0x47fb46['get'](_0x292283);return _0x907f44||(_0x907f44=new zy(_0x3ed1fb,_0x18359f,_0x188770),_0x47fb46['set'](_0x292283,_0x907f44)),_0x907f44;},_F=(_0x1b47ee,_0x18263e,_0xdbd999,_0x396f4e,_0x2b863e,_0x4782b2,_0x4f8ca6)=>{var _0x4128d3;const _0x26d420=new Ge(_0x1b47ee);_0x26d420['aabb']=hu(_0xdbd999[_0x18263e['attributes']['POSITION']]);const _0x426c02=[];for(const [_0x39ede2,_0x29df21]of Object['entries'](_0x18263e['attributes'])){const _0x41c0af=_0xdbd999[_0x29df21],_0x28142f=oc[_0x39ede2],_0x42492a=td(_0x41c0af['componentT'+'ype']);_0x426c02['push']({'semantic':_0x28142f,'components':jo(_0x41c0af['type']),'type':_0x42492a,'normalize':_0x41c0af['normalized']??(_0x28142f===kt&&(_0x42492a===Xr||_0x42492a===rl))});}if(_0x4f8ca6['push'](new Promise((_0x3ea5a3,_0x2d7ffd)=>{const _0x1c5354=_0x18263e['extensions']['KHR_draco_'+'mesh_compr'+'ession'];iF(_0x396f4e[_0x1c5354['bufferView']]['slice']()['buffer'],(_0x1551d8,_0x478c27)=>{var _0x2dc30d;if(_0x1551d8)console['log'](_0x1551d8),_0x2d7ffd(_0x1551d8);else{const _0xb73a48={};for(const [_0x13acf7,_0x2ed661]of Object['entries'](_0x1c5354['attributes']))_0xb73a48[oc[_0x13acf7]]=_0x478c27['attributes']['indexOf'](_0x2ed661);_0x426c02['sort']((_0x874a59,_0x3667b6)=>_0xb73a48[_0x874a59['semantic']]-_0xb73a48[_0x3667b6['semantic']]),(_0x2dc30d=_0x18263e['attributes'])!=null&&_0x2dc30d['NORMAL']||_0x426c02['splice'](0xf25+0x2*-0xb90+0x7fc*0x1,0x1b5*0x8+-0x137d+0x1*0x5d5,{'semantic':'NORMAL','components':0x3,'type':Be});const _0x28a2dd=new zt(_0x1b47ee,_0x426c02),_0x1de0ee=_0x478c27['vertices']['byteLength']/_0x28a2dd['size'],_0x211cfa=_0x1de0ee<=-0x8f1*-0x2b+-0x35aa+-0x4ad2?zi:hr,_0x58a2d5=_0x478c27['indices']['byteLength']/(_0x1de0ee<=-0x2b4*0x6d+0x9a*-0x12d+0x2dbb5?-0x24f1+-0x1273*0x1+0x3766:-0x2*-0x1113+-0x167c+-0xba6);M['call'](()=>{_0x1de0ee!==_0xdbd999[_0x18263e['attributes']['POSITION']]['count']&&M['warn']('mesh\x20has\x20i'+'nvalid\x20ver'+'tex\x20count'),_0x58a2d5!==_0xdbd999[_0x18263e['indices']]['count']&&M['warn']('mesh\x20has\x20i'+'nvalid\x20ind'+'ex\x20count');});const _0x51193e=new xs(_0x1b47ee,_0x28a2dd,_0x1de0ee,{'data':_0x478c27['vertices']}),_0x5ad0e3=new dr(_0x1b47ee,_0x211cfa,_0x58a2d5,ls,_0x478c27['indices']);_0x26d420['vertexBuff'+'er']=_0x51193e,_0x26d420['indexBuffe'+'r'][0xe15+0xd*0x1a3+-0x235c]=_0x5ad0e3,_0x26d420['primitive'][-0x20e*0x3+-0x7*-0x21+0x543]['type']=Rv(_0x18263e),_0x26d420['primitive'][-0x1cb6*-0x1+-0x42*-0x83+-0x5d*0xac]['base']=0x49c*0x5+0x1b46*0x1+0x3252*-0x1,_0x26d420['primitive'][0x4*-0x829+0x154+0x1f50]['count']=_0x5ad0e3?_0x58a2d5:_0x1de0ee,_0x26d420['primitive'][-0x45a+-0xfcf*0x1+-0xd*-0x18d]['indexed']=!!_0x5ad0e3,_0x3ea5a3();}});})),(_0x4128d3=_0x18263e==null?void(0x7a8+-0x1e5e*0x1+-0x132*-0x13):_0x18263e['extensions'])!=null&&_0x4128d3['KHR_materi'+'als_varian'+'ts']){const _0x41d4c9=_0x18263e['extensions']['KHR_materi'+'als_varian'+'ts'],_0xcc5399={};_0x41d4c9['mappings']['forEach'](_0x4dabe8=>{_0x4dabe8['variants']['forEach'](_0x4fb16b=>{_0xcc5399[_0x4fb16b]=_0x4dabe8['material'];});}),_0x2b863e[_0x26d420['id']]=_0xcc5399;}return _0x4782b2[_0x26d420['id']]=_0x18263e['material'],_0x26d420;},gF=(_0x2109e6,_0x473a1b,_0x119025,_0x21b106,_0xb12b03,_0xb80ad3,_0xb960f4,_0x2f4121,_0x4c91da)=>{const _0x518ced=[];return _0x473a1b['primitives']['forEach'](_0x50d808=>{var _0x2a94dc;if((_0x2a94dc=_0x50d808['extensions'])!=null&&_0x2a94dc['KHR_draco_'+'mesh_compr'+'ession'])_0x518ced['push'](_F(_0x2109e6,_0x50d808,_0x119025,_0x21b106,_0xb80ad3,_0xb960f4,_0x4c91da));else{let _0x4d0e3b=_0x50d808['hasOwnProp'+'erty']('indices')?Qr(_0x119025[_0x50d808['indices']],_0x21b106,!(-0x1*-0x1bcf+-0xc92+-0xf3d)):null;const _0x5a619e=mF(_0x2109e6,_0x50d808['attributes'],_0x4d0e3b,_0x119025,_0x21b106,_0xb12b03),_0x2f1b9a=Rv(_0x50d808),_0x9a4230=new Ge(_0x2109e6);if(_0x9a4230['vertexBuff'+'er']=_0x5a619e,_0x9a4230['primitive'][-0x1*-0x109d+-0x775*0x1+-0x494*0x2]['type']=_0x2f1b9a,_0x9a4230['primitive'][0xb3b+-0x60*-0x5+-0xd1b]['base']=0x1cf4+0x9d*0x11+-0x2761,_0x9a4230['primitive'][0x12d+0x1853+-0x1980]['indexed']=_0x4d0e3b!==null,_0x4d0e3b!==null){let _0x58b786;_0x4d0e3b instanceof Uint8Array?_0x58b786=ff:_0x4d0e3b instanceof Uint16Array?_0x58b786=zi:_0x58b786=hr,_0x58b786===ff&&_0x2109e6['isWebGPU']&&(_0x58b786=zi,_0x4d0e3b=new Uint16Array(_0x4d0e3b));const _0x750be1=new dr(_0x2109e6,_0x58b786,_0x4d0e3b['length'],ls,_0x4d0e3b);_0x9a4230['indexBuffe'+'r'][0x10be+0xb*0x26e+-0x2b78]=_0x750be1,_0x9a4230['primitive'][0x4*0x6a2+-0x5d7+0x14b1*-0x1]['count']=_0x4d0e3b['length'];}else _0x9a4230['primitive'][0x6ef*0x1+0xe21+-0x1510]['count']=_0x5a619e['numVertice'+'s'];if(_0x50d808['hasOwnProp'+'erty']('extensions')&&_0x50d808['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts')){const _0x5e927e=_0x50d808['extensions']['KHR_materi'+'als_varian'+'ts'],_0x2acdb2={};_0x5e927e['mappings']['forEach'](_0x5784ab=>{_0x5784ab['variants']['forEach'](_0x25f514=>{_0x2acdb2[_0x25f514]=_0x5784ab['material'];});}),_0xb80ad3[_0x9a4230['id']]=_0x2acdb2;}_0xb960f4[_0x9a4230['id']]=_0x50d808['material'];let _0x4dc044=_0x119025[_0x50d808['attributes']['POSITION']];if(_0x9a4230['aabb']=hu(_0x4dc044),_0x50d808['hasOwnProp'+'erty']('targets')){const _0x3fdb52=[];_0x50d808['targets']['forEach']((_0x367b36,_0x38114d)=>{const _0x110e06={};_0x367b36['hasOwnProp'+'erty']('POSITION')&&(_0x4dc044=_0x119025[_0x367b36['POSITION']],_0x110e06['deltaPosit'+'ions']=un(_0x4dc044,_0x21b106),_0x110e06['aabb']=hu(_0x4dc044)),_0x367b36['hasOwnProp'+'erty']('NORMAL')&&(_0x4dc044=_0x119025[_0x367b36['NORMAL']],_0x110e06['deltaNorma'+'ls']=un(_0x4dc044,_0x21b106)),_0x473a1b['hasOwnProp'+'erty']('extras')&&_0x473a1b['extras']['hasOwnProp'+'erty']('targetName'+'s')?_0x110e06['name']=_0x473a1b['extras']['targetName'+'s'][_0x38114d]:_0x110e06['name']=_0x38114d['toString'](-0x256f+0x14dd+0x84e*0x2),_0x473a1b['hasOwnProp'+'erty']('weights')&&(_0x110e06['defaultWei'+'ght']=_0x473a1b['weights'][_0x38114d]),_0x110e06['preserveDa'+'ta']=_0x2f4121['morphPrese'+'rveData'],_0x3fdb52['push'](new ed(_0x110e06));}),_0x9a4230['morph']=new Ny(_0x3fdb52,_0x2109e6,{'preferHighPrecision':_0x2f4121['morphPrefe'+'rHighPreci'+'sion']});}_0x518ced['push'](_0x9a4230);}}),_0x518ced;},bt=(_0x1ec702,_0xeba28,_0xab0599)=>{var _0x21fc81;let _0x5c8689;const _0x132e28=_0x1ec702['texCoord'];if(_0x132e28){for(_0x5c8689=0xfa*-0x1d+-0x2*-0x5d1+0x10b0;_0x5c8689<_0xab0599['length'];++_0x5c8689)_0xeba28[_0xab0599[_0x5c8689]+'MapUv']=_0x132e28;}const _0x41a8a0=[0x1*-0x20af+0x245+0x1e6a*0x1,0x7*0x42d+0x2239+-0x3f74],_0x44037d=[-0x1b76+0x1*0x134f+0x828,-0x37c*0x6+-0x4f*0x49+0x2b70],_0x41768e=(_0x21fc81=_0x1ec702['extensions'])==null?void(0x1394+0x1da7*-0x1+0xa13):_0x21fc81['KHR_textur'+'e_transfor'+'m'];if(_0x41768e){const _0x1330bb=_0x41768e['offset']||_0x41a8a0,_0x189956=_0x41768e['scale']||_0x44037d,_0x191f16=_0x41768e['rotation']?-_0x41768e['rotation']*Y['RAD_TO_DEG']:-0x2*0xcc9+0x84*0x41+-0x2*0x3f9,_0x152b8d=new J(_0x189956[-0x112f+-0x1*-0x24dd+-0x13ae],_0x189956[-0x13ac+-0x175f+-0x122*-0x26]),_0x45b251=new J(_0x1330bb[-0x519+0xf82*-0x2+0x241d],0x3*-0x853+0x1a6e+-0x174-_0x189956[-0x14b6*-0x1+-0xd*-0x1bf+0x18*-0x1cf]-_0x1330bb[-0x5*-0x341+-0x1*0x16a6+0x26*0x2b]);for(_0x5c8689=0x1*0x1093+0x1f22+-0x2fb5;_0x5c8689<_0xab0599['length'];++_0x5c8689)_0xeba28[_0xab0599[_0x5c8689]+'MapTiling']=_0x152b8d,_0xeba28[_0xab0599[_0x5c8689]+'MapOffset']=_0x45b251,_0xeba28[_0xab0599[_0x5c8689]+('MapRotatio'+'n')]=_0x191f16;}},SF=(_0x2c38f7,_0x4e8d00,_0x1bc9f1)=>{let _0x18e674,_0x4e4967;if(_0x2c38f7['hasOwnProp'+'erty']('diffuseFac'+'tor')?(_0x18e674=_0x2c38f7['diffuseFac'+'tor'],_0x4e8d00['diffuse']['set'](Math['pow'](_0x18e674[0x13*-0x1f3+0x21*0xdb+-0x142*-0x7],(-0x11e9+-0x18*0x105+-0x46*-0x9b)/(0x4*0x327+0x8b4+-0x25e*0x9+0.20000000000000018)),Math['pow'](_0x18e674[-0x779*-0x3+-0xe5c+-0x80e],(-0x1786+-0x1a5*-0x17+-0xe4c)/(0x1*-0x54f+0x3e*0x9f+-0x2131+0.20000000000000018)),Math['pow'](_0x18e674[-0x70+-0x7*-0x3e7+-0x1adf],(0x25f6+-0x2b5+-0x2340)/(0x1*0x1bd+0x4ab*0x2+0xb11*-0x1+0.20000000000000018))),_0x4e8d00['opacity']=_0x18e674[-0x2*-0x705+-0x297+-0x5b8*0x2]):(_0x4e8d00['diffuse']['set'](-0xa9a*0x2+0x3b4+0x1181,-0x1*0x1726+-0x16a5+0x2dcc,0x68c*-0x2+0x2567+-0x184e),_0x4e8d00['opacity']=-0x1*-0x1945+-0x15d*0x13+-0xa3*-0x1),_0x2c38f7['hasOwnProp'+'erty']('diffuseTex'+'ture')){const _0x5be2aa=_0x2c38f7['diffuseTex'+'ture'];_0x4e4967=_0x1bc9f1[_0x5be2aa['index']],_0x4e8d00['diffuseMap']=_0x4e4967,_0x4e8d00['diffuseMap'+'Channel']='rgb',_0x4e8d00['opacityMap']=_0x4e4967,_0x4e8d00['opacityMap'+'Channel']='a',bt(_0x5be2aa,_0x4e8d00,['diffuse','opacity']);}if(_0x4e8d00['useMetalne'+'ss']=!(0x1b65*0x1+0x16b1+-0x3215*0x1),_0x2c38f7['hasOwnProp'+'erty']('specularFa'+'ctor')?(_0x18e674=_0x2c38f7['specularFa'+'ctor'],_0x4e8d00['specular']['set'](Math['pow'](_0x18e674[-0x1387*-0x2+0x289+-0x5f1*0x7],(0x1*0x2527+0x2168+-0x468e)/(0x7*0x247+0x200e+0x999*-0x5+0.20000000000000018)),Math['pow'](_0x18e674[-0x10f6+0x1*-0x230f+0x2*0x1a03],(0x7b6+-0x1*-0x16d+0xe*-0xa7)/(-0xa03*-0x2+-0x2*0x522+-0x40*0x27+0.20000000000000018)),Math['pow'](_0x18e674[0xf44+-0x11*0x53+-0x9bf*0x1],(-0x24ae+0x2*-0x128f+0x49cd)/(0xd0c+-0x125*-0x1a+-0x2acc+0.20000000000000018)))):_0x4e8d00['specular']['set'](-0x1*0x1209+0xe22+-0x3e8*-0x1,-0x2566+0x239f+0x1*0x1c8,0x1428+0x1e91+-0xcae*0x4),_0x2c38f7['hasOwnProp'+'erty']('glossiness'+'Factor')?_0x4e8d00['gloss']=_0x2c38f7['glossiness'+'Factor']:_0x4e8d00['gloss']=0xbd6*0x2+0x3*-0x6cb+-0x34a,_0x2c38f7['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x272f1a=_0x2c38f7['specularGl'+'ossinessTe'+'xture'];_0x4e8d00['specularMa'+'p']=_0x4e8d00['glossMap']=_0x1bc9f1[_0x272f1a['index']],_0x4e8d00['specularMa'+'pChannel']='rgb',_0x4e8d00['glossMapCh'+'annel']='a',bt(_0x272f1a,_0x4e8d00,['gloss','metalness']);}},yF=(_0x2b5716,_0x133e61,_0x43a69f)=>{if(_0x2b5716['hasOwnProp'+'erty']('clearcoatF'+'actor')?_0x133e61['clearCoat']=_0x2b5716['clearcoatF'+'actor']*(0x2f*0x1+0x2c+-0x5b+0.25):_0x133e61['clearCoat']=0x15b*-0x3+-0x1d7*0xc+-0x123*-0x17,_0x2b5716['hasOwnProp'+'erty']('clearcoatT'+'exture')){const _0x3b858a=_0x2b5716['clearcoatT'+'exture'];_0x133e61['clearCoatM'+'ap']=_0x43a69f[_0x3b858a['index']],_0x133e61['clearCoatM'+'apChannel']='r',bt(_0x3b858a,_0x133e61,['clearCoat']);}if(_0x2b5716['hasOwnProp'+'erty']('clearcoatR'+'oughnessFa'+'ctor')?_0x133e61['clearCoatG'+'loss']=_0x2b5716['clearcoatR'+'oughnessFa'+'ctor']:_0x133e61['clearCoatG'+'loss']=-0xf1*-0x5+-0x1*-0x105c+0x1*-0x1511,_0x2b5716['hasOwnProp'+'erty']('clearcoatR'+'oughnessTe'+'xture')){const _0xba3410=_0x2b5716['clearcoatR'+'oughnessTe'+'xture'];_0x133e61['clearCoatG'+'lossMap']=_0x43a69f[_0xba3410['index']],_0x133e61['clearCoatG'+'lossMapCha'+'nnel']='g',bt(_0xba3410,_0x133e61,['clearCoatG'+'loss']);}if(_0x2b5716['hasOwnProp'+'erty']('clearcoatN'+'ormalTextu'+'re')){const _0x5c31c2=_0x2b5716['clearcoatN'+'ormalTextu'+'re'];_0x133e61['clearCoatN'+'ormalMap']=_0x43a69f[_0x5c31c2['index']],bt(_0x5c31c2,_0x133e61,['clearCoatN'+'ormal']),_0x5c31c2['hasOwnProp'+'erty']('scale')?_0x133e61['clearCoatB'+'umpiness']=_0x5c31c2['scale']:_0x133e61['clearCoatB'+'umpiness']=0x248*-0x7+-0x1*0x22fb+0x197a*0x2;}_0x133e61['clearCoatG'+'lossInvert']=!(-0xfd*-0x4+-0x2534+-0x85*-0x40);},vF=(_0x5afad4,_0x3f888b,_0x14370d)=>{_0x3f888b['useLightin'+'g']=!(-0x2*0x851+-0x65*-0xa+0xcb1),_0x3f888b['emissive']['copy'](_0x3f888b['diffuse']),_0x3f888b['emissiveMa'+'p']=_0x3f888b['diffuseMap'],_0x3f888b['emissiveMa'+'pUv']=_0x3f888b['diffuseMap'+'Uv'],_0x3f888b['emissiveMa'+'pTiling']['copy'](_0x3f888b['diffuseMap'+'Tiling']),_0x3f888b['emissiveMa'+'pOffset']['copy'](_0x3f888b['diffuseMap'+'Offset']),_0x3f888b['emissiveMa'+'pRotation']=_0x3f888b['diffuseMap'+'Rotation'],_0x3f888b['emissiveMa'+'pChannel']=_0x3f888b['diffuseMap'+'Channel'],_0x3f888b['emissiveVe'+'rtexColor']=_0x3f888b['diffuseVer'+'texColor'],_0x3f888b['emissiveVe'+'rtexColorC'+'hannel']=_0x3f888b['diffuseVer'+'texColorCh'+'annel'],_0x3f888b['useLightin'+'g']=!(-0x1*-0xda9+-0x221f+0x1477),_0x3f888b['useSkybox']=!(0x1ff9+0xe*0xfb+-0x2db2),_0x3f888b['diffuse']['set'](-0x2*0x1c9+-0x35*-0xf+-0x2*-0x3c,0x1055+0x175b+0x27af*-0x1,0x65*0x1c+0xa*-0x147+0x1bb),_0x3f888b['diffuseMap']=null,_0x3f888b['diffuseVer'+'texColor']=!(0xd8+0x1*0x224d+-0x2324);},xF=(_0x5310eb,_0x3b4cde,_0x336c2b)=>{if(_0x3b4cde['useMetalne'+'ssSpecular'+'Color']=!(0x236e+0x1*0x2572+-0x48e0),_0x5310eb['hasOwnProp'+'erty']('specularCo'+'lorTexture')&&(_0x3b4cde['specularMa'+'p']=_0x336c2b[_0x5310eb['specularCo'+'lorTexture']['index']],_0x3b4cde['specularMa'+'pChannel']='rgb',bt(_0x5310eb['specularCo'+'lorTexture'],_0x3b4cde,['specular'])),_0x5310eb['hasOwnProp'+'erty']('specularCo'+'lorFactor')){const _0x422934=_0x5310eb['specularCo'+'lorFactor'];_0x3b4cde['specular']['set'](Math['pow'](_0x422934[-0x703+-0x5*-0x1af+0xa*-0x24],(0x9*0x147+-0x21f+0x1*-0x95f)/(0x29c*0x2+0x27f*0x5+-0x11b1+0.20000000000000018)),Math['pow'](_0x422934[0x1de4+-0xadd+-0x1306],(0x455*-0x4+-0x1d82+0x2ed7)/(-0x1*-0x17f5+-0x1af*-0x17+0x2*-0x1f56+0.20000000000000018)),Math['pow'](_0x422934[-0x1*0x2236+-0xebb+0x30f3],(-0x63*-0x16+-0x205+-0x67c)/(-0x839+0xda9+-0x56e+0.20000000000000018)));}else _0x3b4cde['specular']['set'](-0x1673+0xb*0x115+0xa8d,-0x160e+0x1013+-0x1*-0x5fc,0xf6*-0xb+0x1c51+-0x11be);_0x5310eb['hasOwnProp'+'erty']('specularFa'+'ctor')?_0x3b4cde['specularit'+'yFactor']=_0x5310eb['specularFa'+'ctor']:_0x3b4cde['specularit'+'yFactor']=-0x2*-0x132b+0x1*-0x18e5+-0xd7*0x10,_0x5310eb['hasOwnProp'+'erty']('specularTe'+'xture')&&(_0x3b4cde['specularit'+'yFactorMap'+'Channel']='a',_0x3b4cde['specularit'+'yFactorMap']=_0x336c2b[_0x5310eb['specularTe'+'xture']['index']],bt(_0x5310eb['specularTe'+'xture'],_0x3b4cde,['specularit'+'yFactor']));},TF=(_0xc97e67,_0x2e2108,_0x4447c8)=>{_0xc97e67['hasOwnProp'+'erty']('ior')&&(_0x2e2108['refraction'+'Index']=(-0x237c*0x1+0x10e6+0x1297)/_0xc97e67['ior']);},wF=(_0xc95cff,_0x38f1cc,_0x341b99)=>{_0xc95cff['hasOwnProp'+'erty']('dispersion')&&(_0x38f1cc['dispersion']=_0xc95cff['dispersion']);},EF=(_0x8d9aaf,_0x39cb92,_0x4d138f)=>{_0x39cb92['blendType']=Gs,_0x39cb92['useDynamic'+'Refraction']=!(0x1df9*-0x1+-0xb46+0x293f),_0x8d9aaf['hasOwnProp'+'erty']('transmissi'+'onFactor')&&(_0x39cb92['refraction']=_0x8d9aaf['transmissi'+'onFactor']),_0x8d9aaf['hasOwnProp'+'erty']('transmissi'+'onTexture')&&(_0x39cb92['refraction'+'MapChannel']='r',_0x39cb92['refraction'+'Map']=_0x4d138f[_0x8d9aaf['transmissi'+'onTexture']['index']],bt(_0x8d9aaf['transmissi'+'onTexture'],_0x39cb92,['refraction']));},AF=(_0x125a52,_0xe1786c,_0x4db300)=>{if(_0xe1786c['useSheen']=!(-0x5f*-0x59+-0x75*0x43+0x8*-0x4d),_0x125a52['hasOwnProp'+'erty']('sheenColor'+'Factor')){const _0x3b3720=_0x125a52['sheenColor'+'Factor'];_0xe1786c['sheen']['set'](Math['pow'](_0x3b3720[0x1040+-0x95a*0x4+0x1528],(-0x1af4+0x2*0xa5+0x19ab)/(0x147*0x3+-0x1*0xbc3+0x7f0+0.20000000000000018)),Math['pow'](_0x3b3720[-0x946*0x3+0x35*0xb1+-0x8d2],(0x26a3+0x2f8+0x14cd*-0x2)/(0x238d+0xc93+-0x100a*0x3+0.20000000000000018)),Math['pow'](_0x3b3720[-0x27*-0xd2+-0x2143+0x3*0x6d],(-0x17de+-0xd3*0x2d+-0x3cf6*-0x1)/(0xda*-0x1+-0xeba+0xa*0x18f+0.20000000000000018)));}else _0xe1786c['sheen']['set'](0x289+-0x15+0x13*-0x21,-0xb1b+-0x25cd+0x13*0x293,-0xd40+0x1*-0xe16+-0x1b57*-0x1);_0x125a52['hasOwnProp'+'erty']('sheenColor'+'Texture')&&(_0xe1786c['sheenMap']=_0x4db300[_0x125a52['sheenColor'+'Texture']['index']],bt(_0x125a52['sheenColor'+'Texture'],_0xe1786c,['sheen'])),_0xe1786c['sheenGloss']=_0x125a52['hasOwnProp'+'erty']('sheenRough'+'nessFactor')?_0x125a52['sheenRough'+'nessFactor']:0x2*0xe14+0x52*0x4a+-0xcf7*0x4,_0x125a52['hasOwnProp'+'erty']('sheenRough'+'nessTextur'+'e')&&(_0xe1786c['sheenGloss'+'Map']=_0x4db300[_0x125a52['sheenRough'+'nessTextur'+'e']['index']],_0xe1786c['sheenGloss'+'MapChannel']='a',bt(_0x125a52['sheenRough'+'nessTextur'+'e'],_0xe1786c,['sheenGloss'])),_0xe1786c['sheenGloss'+'Invert']=!(0x1ffe+0x2171+-0x416f);},bF=(_0x47065a,_0xe54b0c,_0x14f84d)=>{if(_0xe54b0c['blendType']=Gs,_0xe54b0c['useDynamic'+'Refraction']=!(0x31d+0x1*-0x1e25+-0x1*-0x1b08),_0x47065a['hasOwnProp'+'erty']('thicknessF'+'actor')&&(_0xe54b0c['thickness']=_0x47065a['thicknessF'+'actor']),_0x47065a['hasOwnProp'+'erty']('thicknessT'+'exture')&&(_0xe54b0c['thicknessM'+'ap']=_0x14f84d[_0x47065a['thicknessT'+'exture']['index']],_0xe54b0c['thicknessM'+'apChannel']='g',bt(_0x47065a['thicknessT'+'exture'],_0xe54b0c,['thickness'])),_0x47065a['hasOwnProp'+'erty']('attenuatio'+'nDistance')&&(_0xe54b0c['attenuatio'+'nDistance']=_0x47065a['attenuatio'+'nDistance']),_0x47065a['hasOwnProp'+'erty']('attenuatio'+'nColor')){const _0x215e83=_0x47065a['attenuatio'+'nColor'];_0xe54b0c['attenuatio'+'n']['set'](Math['pow'](_0x215e83[-0x1781+0x1884+-0x7*0x25],(0x1a70+0xacf+-0x253e)/(-0x1534+-0xc8*-0x11+-0x2*-0x3f7+0.20000000000000018)),Math['pow'](_0x215e83[0x2339+0x1738+-0x28*0x176],(-0x174d+0x2675+-0xf27)/(-0x6d0*0x2+-0x2*0x18e+0x10be+0.20000000000000018)),Math['pow'](_0x215e83[0x19c2+-0x1fba+0x5fa],(0x3*0x97b+0x978*-0x4+0x970)/(0x2e*0x80+0x2416+0x4c*-0xc7+0.20000000000000018)));}},CF=(_0x154780,_0x52b2c3,_0x30e544)=>{_0x154780['hasOwnProp'+'erty']('emissiveSt'+'rength')&&(_0x52b2c3['emissiveIn'+'tensity']=_0x154780['emissiveSt'+'rength']);},PF=(_0x4a4d51,_0xb158cb,_0x1c1320)=>{_0xb158cb['useIridesc'+'ence']=!(0x370*-0x6+0x1*-0x1583+-0x17*-0x1d5),_0x4a4d51['hasOwnProp'+'erty']('iridescenc'+'eFactor')&&(_0xb158cb['iridescenc'+'e']=_0x4a4d51['iridescenc'+'eFactor']),_0x4a4d51['hasOwnProp'+'erty']('iridescenc'+'eTexture')&&(_0xb158cb['iridescenc'+'eMapChanne'+'l']='r',_0xb158cb['iridescenc'+'eMap']=_0x1c1320[_0x4a4d51['iridescenc'+'eTexture']['index']],bt(_0x4a4d51['iridescenc'+'eTexture'],_0xb158cb,['iridescenc'+'e'])),_0x4a4d51['hasOwnProp'+'erty']('iridescenc'+'eIor')&&(_0xb158cb['iridescenc'+'eRefractio'+'nIndex']=_0x4a4d51['iridescenc'+'eIor']),_0x4a4d51['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Minimum')&&(_0xb158cb['iridescenc'+'eThickness'+'Min']=_0x4a4d51['iridescenc'+'eThickness'+'Minimum']),_0x4a4d51['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Maximum')&&(_0xb158cb['iridescenc'+'eThickness'+'Max']=_0x4a4d51['iridescenc'+'eThickness'+'Maximum']),_0x4a4d51['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Texture')&&(_0xb158cb['iridescenc'+'eThickness'+'MapChannel']='g',_0xb158cb['iridescenc'+'eThickness'+'Map']=_0x1c1320[_0x4a4d51['iridescenc'+'eThickness'+'Texture']['index']],bt(_0x4a4d51['iridescenc'+'eThickness'+'Texture'],_0xb158cb,['iridescenc'+'eThickness']));},MF=(_0x3f2faa,_0x2f9dca,_0x2c4d50)=>{if(_0x2f9dca['enableGGXS'+'pecular']=!(0x1*0x15f3+0x1*0x26e+-0x1861*0x1),_0x3f2faa['hasOwnProp'+'erty']('anisotropy'+'Strength')?_0x2f9dca['anisotropy'+'Intensity']=_0x3f2faa['anisotropy'+'Strength']:_0x2f9dca['anisotropy'+'Intensity']=-0x1612+-0x2*-0x329+-0x150*-0xc,_0x3f2faa['hasOwnProp'+'erty']('anisotropy'+'Texture')){const _0x2f97d1=_0x3f2faa['anisotropy'+'Texture'];_0x2f9dca['anisotropy'+'Map']=_0x2c4d50[_0x2f97d1['index']],bt(_0x2f97d1,_0x2f9dca,['anisotropy']);}_0x3f2faa['hasOwnProp'+'erty']('anisotropy'+'Rotation')?_0x2f9dca['anisotropy'+'Rotation']=_0x3f2faa['anisotropy'+'Rotation']*Y['RAD_TO_DEG']:_0x2f9dca['anisotropy'+'Rotation']=0x997+0x1528+-0x1ebf;},Ov=(_0x45c2ec,_0x10a71c)=>{const _0x7a2ced=new ws();_0x45c2ec['hasOwnProp'+'erty']('name')&&(_0x7a2ced['name']=_0x45c2ec['name']),_0x7a2ced['occludeSpe'+'cular']=Kc,_0x7a2ced['diffuseVer'+'texColor']=!(-0x1257+-0x1*0xaab+-0x2f*-0x9e),_0x7a2ced['specularTi'+'nt']=!(-0xcc5*-0x3+0x1e*-0xc4+-0xb*0x165),_0x7a2ced['specularVe'+'rtexColor']=!(-0xfd4+-0x10a+0x2*0x86f),_0x7a2ced['specular']['set'](-0x2fa+0xa2d+0x266*-0x3,-0xe38+0x1514+-0x6db,-0xcd*0x19+0x4*0x238+-0x1*-0xb26),_0x7a2ced['gloss']=0x78f+-0xfaa+-0x15a*-0x6,_0x7a2ced['glossInver'+'t']=!(0x5*-0x10d+-0x1*0xd55+0x3d*0x4e),_0x7a2ced['useMetalne'+'ss']=!(-0x4b*0x1+-0x1*0x1fa2+-0xb*-0x2e7);let _0x324ae1,_0x8a7e50;if(_0x45c2ec['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x23cfd=_0x45c2ec['pbrMetalli'+'cRoughness'];if(_0x23cfd['hasOwnProp'+'erty']('baseColorF'+'actor')&&(_0x324ae1=_0x23cfd['baseColorF'+'actor'],_0x7a2ced['diffuse']['set'](Math['pow'](_0x324ae1[0x2*0x41b+-0xbd4+0x39e],(0x195d+0x1195+-0x2af1)/(0xd3+-0x1418+0x1347+0.20000000000000018)),Math['pow'](_0x324ae1[-0x6c5*-0x2+0x3*-0xa9+0x3a*-0x33],(-0x4*0x579+-0x749+0x9*0x33e)/(0xaca*0x1+-0x840+0x6*-0x6c+0.20000000000000018)),Math['pow'](_0x324ae1[-0x60f+0x1*-0xd4b+-0xb1*-0x1c],(-0x2*0x7db+-0x9a+-0x1051*-0x1)/(-0x1460+-0x23fa+0x385c+0.20000000000000018))),_0x7a2ced['opacity']=_0x324ae1[-0x10cb+0x1840+-0x772]),_0x23cfd['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x2f992c=_0x23cfd['baseColorT'+'exture'];_0x8a7e50=_0x10a71c[_0x2f992c['index']],_0x7a2ced['diffuseMap']=_0x8a7e50,_0x7a2ced['diffuseMap'+'Channel']='rgb',_0x7a2ced['opacityMap']=_0x8a7e50,_0x7a2ced['opacityMap'+'Channel']='a',bt(_0x2f992c,_0x7a2ced,['diffuse','opacity']);}if(_0x23cfd['hasOwnProp'+'erty']('metallicFa'+'ctor')&&(_0x7a2ced['metalness']=_0x23cfd['metallicFa'+'ctor']),_0x23cfd['hasOwnProp'+'erty']('roughnessF'+'actor')&&(_0x7a2ced['gloss']=_0x23cfd['roughnessF'+'actor']),_0x23cfd['hasOwnProp'+'erty']('metallicRo'+'ughnessTex'+'ture')){const _0x9fb866=_0x23cfd['metallicRo'+'ughnessTex'+'ture'];_0x7a2ced['metalnessM'+'ap']=_0x7a2ced['glossMap']=_0x10a71c[_0x9fb866['index']],_0x7a2ced['metalnessM'+'apChannel']='b',_0x7a2ced['glossMapCh'+'annel']='g',bt(_0x9fb866,_0x7a2ced,['gloss','metalness']);}}if(_0x45c2ec['hasOwnProp'+'erty']('normalText'+'ure')){const _0x371549=_0x45c2ec['normalText'+'ure'];_0x7a2ced['normalMap']=_0x10a71c[_0x371549['index']],bt(_0x371549,_0x7a2ced,['normal']),_0x371549['hasOwnProp'+'erty']('scale')&&(_0x7a2ced['bumpiness']=_0x371549['scale']);}if(_0x45c2ec['hasOwnProp'+'erty']('occlusionT'+'exture')){const _0x37f5b5=_0x45c2ec['occlusionT'+'exture'];_0x7a2ced['aoMap']=_0x10a71c[_0x37f5b5['index']],_0x7a2ced['aoMapChann'+'el']='r',bt(_0x37f5b5,_0x7a2ced,['ao']);}if(_0x45c2ec['hasOwnProp'+'erty']('emissiveFa'+'ctor')&&(_0x324ae1=_0x45c2ec['emissiveFa'+'ctor'],_0x7a2ced['emissive']['set'](Math['pow'](_0x324ae1[-0x2317+0x43+0x22d4],(-0x9*0x1a5+0xae*-0x3+-0x7*-0x268)/(0xd*-0x60+0x58+0x1*0x48a+0.20000000000000018)),Math['pow'](_0x324ae1[-0x4*0x466+0x1479+-0x2e0],(-0x1309+0xb8d+-0x9*-0xd5)/(-0x935+0x133e+-0xa07+0.20000000000000018)),Math['pow'](_0x324ae1[-0x4fb+0x18a6*-0x1+0x1da3],(-0x1*-0x1515+0x16cc+-0x750*0x6)/(-0x9f7*0x2+0x2441+-0x1*0x1051+0.20000000000000018)))),_0x45c2ec['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x1c83b5=_0x45c2ec['emissiveTe'+'xture'];_0x7a2ced['emissiveMa'+'p']=_0x10a71c[_0x1c83b5['index']],bt(_0x1c83b5,_0x7a2ced,['emissive']);}if(_0x45c2ec['hasOwnProp'+'erty']('alphaMode'))switch(_0x45c2ec['alphaMode']){case'MASK':_0x7a2ced['blendType']=ys,_0x45c2ec['hasOwnProp'+'erty']('alphaCutof'+'f')?_0x7a2ced['alphaTest']=_0x45c2ec['alphaCutof'+'f']:_0x7a2ced['alphaTest']=-0x1ad2+-0x3*-0x3c6+0xf80+0.5;break;case'BLEND':_0x7a2ced['blendType']=Gs,_0x7a2ced['depthWrite']=!(0x2092+0xaa1*-0x3+0x3a*-0x3);break;default:case'OPAQUE':_0x7a2ced['blendType']=ys;break;}else _0x7a2ced['blendType']=ys;_0x45c2ec['hasOwnProp'+'erty']('doubleSide'+'d')?(_0x7a2ced['twoSidedLi'+'ghting']=_0x45c2ec['doubleSide'+'d'],_0x7a2ced['cull']=_0x45c2ec['doubleSide'+'d']?xt:Jr):(_0x7a2ced['twoSidedLi'+'ghting']=!(-0x25ac+-0x1e9b+0x4448),_0x7a2ced['cull']=Jr);const _0x3ea9b5={'KHR_materials_clearcoat':yF,'KHR_materials_emissive_strength':CF,'KHR_materials_ior':TF,'KHR_materials_dispersion':wF,'KHR_materials_iridescence':PF,'KHR_materials_pbrSpecularGlossiness':SF,'KHR_materials_sheen':AF,'KHR_materials_specular':xF,'KHR_materials_transmission':EF,'KHR_materials_unlit':vF,'KHR_materials_volume':bF,'KHR_materials_anisotropy':MF};if(_0x45c2ec['hasOwnProp'+'erty']('extensions'))for(const _0x463e4f in _0x45c2ec['extensions']){const _0xf78bb3=_0x3ea9b5[_0x463e4f];_0xf78bb3!==void(0x3f1+0x209a+-0x1*0x248b)&&_0xf78bb3(_0x45c2ec['extensions'][_0x463e4f],_0x7a2ced,_0x10a71c);}return _0x7a2ced['update'](),_0x7a2ced;},IF=(_0x522802,_0x40b488,_0x2a0748,_0x1f16f1,_0x24a123,_0x37790d,_0x50d933)=>{const _0x3a1422=_0x5f1b51=>new nc(jo(_0x5f1b51['type']),un(_0x5f1b51,_0x1f16f1)),_0x31a4b8={'STEP':qy,'LINEAR':Uf,'CUBICSPLINE':Bf},_0x2e809a={},_0x53f52a={},_0x32e78e={};let _0x253b11=-0x1*0x150b+0xd*0x45+0x118b,_0x12c84b;for(_0x12c84b=0x413+0x272*-0xc+-0x1945*-0x1;_0x12c84b<_0x522802['samplers']['length'];++_0x12c84b){const _0x30ff15=_0x522802['samplers'][_0x12c84b];_0x2e809a['hasOwnProp'+'erty'](_0x30ff15['input'])||(_0x2e809a[_0x30ff15['input']]=_0x3a1422(_0x2a0748[_0x30ff15['input']])),_0x53f52a['hasOwnProp'+'erty'](_0x30ff15['output'])||(_0x53f52a[_0x30ff15['output']]=_0x3a1422(_0x2a0748[_0x30ff15['output']]));const _0x360636=_0x30ff15['hasOwnProp'+'erty']('interpolat'+'ion')&&_0x31a4b8['hasOwnProp'+'erty'](_0x30ff15['interpolat'+'ion'])?_0x31a4b8[_0x30ff15['interpolat'+'ion']]:Uf,_0x431b25={'paths':[],'input':_0x30ff15['input'],'output':_0x30ff15['output'],'interpolation':_0x360636};_0x32e78e[_0x12c84b]=_0x431b25;}const _0x209b7b=[],_0xbdb7e2={'translation':'localPosit'+'ion','rotation':'localRotat'+'ion','scale':'localScale'},_0x1befd7=_0x227c78=>{const _0x3c3198=[];for(;_0x227c78;)_0x3c3198['unshift'](_0x227c78['name']),_0x227c78=_0x227c78['parent'];return _0x3c3198;},_0x137567=(_0x51a102,_0x4a9073,_0x45e359)=>{const _0x453b6e=_0x53f52a[_0x51a102['output']];if(!_0x453b6e){M['warn']('glb-parser'+':\x20No\x20outpu'+'t\x20data\x20is\x20'+'available\x20'+'for\x20the\x20mo'+'rph\x20target'+'\x20curve\x20('+_0x45e359+('/graph/wei'+'ghts).\x20Ski'+'pping.'));return;}let _0x4cb224;if(_0x37790d&&_0x37790d[_0x4a9073['mesh']]){const _0x21e2b7=_0x37790d[_0x4a9073['mesh']];_0x21e2b7['hasOwnProp'+'erty']('extras')&&_0x21e2b7['extras']['hasOwnProp'+'erty']('targetName'+'s')&&(_0x4cb224=_0x21e2b7['extras']['targetName'+'s']);}const _0x29d3f7=_0x453b6e['data'],_0x442cc2=_0x29d3f7['length']/_0x2e809a[_0x51a102['input']]['data']['length'],_0x54642e=_0x29d3f7['length']/_0x442cc2,_0x379d8a=_0x54642e*(-0x1839+-0x9a9*0x4+0x3ee1*0x1),_0x27fe6d=new ArrayBuffer(_0x379d8a*_0x442cc2);for(let _0x43c25d=0x1c*0xb7+-0xd29+-0x75*0xf;_0x43c25d<_0x442cc2;_0x43c25d++){const _0x296330=new Float32Array(_0x27fe6d,_0x379d8a*_0x43c25d,_0x54642e);for(let _0x50da77=0x21dc+0x177e+-0x395a;_0x50da77<_0x54642e;_0x50da77++)_0x296330[_0x50da77]=_0x29d3f7[_0x50da77*_0x442cc2+_0x43c25d];const _0x23bb18=new nc(0x161*0x10+0x17*-0x29+-0x1260,_0x296330),_0x3b2e3c=_0x4cb224!=null&&_0x4cb224[_0x43c25d]?'name.'+_0x4cb224[_0x43c25d]:_0x43c25d;_0x53f52a[-_0x253b11]=_0x23bb18;const _0x327d36={'paths':[{'entityPath':_0x45e359,'component':'graph','propertyPath':['weight.'+_0x3b2e3c]}],'input':_0x51a102['input'],'output':-_0x253b11,'interpolation':_0x51a102['interpolat'+'ion']};_0x253b11++,_0x32e78e['morphCurve'+'-'+_0x12c84b+'-'+_0x43c25d]=_0x327d36;}};for(_0x12c84b=0xd8*-0x23+0x26cf*0x1+-0x947;_0x12c84b<_0x522802['channels']['length'];++_0x12c84b){const _0x1780ea=_0x522802['channels'][_0x12c84b],_0x217d7e=_0x1780ea['target'],_0xd69e4=_0x32e78e[_0x1780ea['sampler']],_0x434c86=_0x24a123[_0x217d7e['node']],_0x2a088d=_0x50d933[_0x217d7e['node']],_0x502cb6=_0x1befd7(_0x434c86);_0x217d7e['path']['startsWith']('weights')?(_0x137567(_0xd69e4,_0x2a088d,_0x502cb6),_0x32e78e[_0x1780ea['sampler']]['morphCurve']=!(0x1*0x223d+-0x115*0x21+0x178)):_0xd69e4['paths']['push']({'entityPath':_0x502cb6,'component':'graph','propertyPath':[_0xbdb7e2[_0x217d7e['path']]]});}const _0x4b3469=[],_0x878bc7=[],_0x11072e=[];for(const _0x271ee0 in _0x2e809a)_0x4b3469['push'](_0x2e809a[_0x271ee0]),_0x2e809a[_0x271ee0]=_0x4b3469['length']-(-0x202f+-0x1*-0x175b+-0x1*-0x8d5);for(const _0x5308d0 in _0x53f52a)_0x878bc7['push'](_0x53f52a[_0x5308d0]),_0x53f52a[_0x5308d0]=_0x878bc7['length']-(-0x146*0x10+0x1d40+-0x8df);for(const _0x362f18 in _0x32e78e){const _0x24e293=_0x32e78e[_0x362f18];_0x24e293['morphCurve']||(_0x11072e['push'](new Dv(_0x24e293['paths'],_0x2e809a[_0x24e293['input']],_0x53f52a[_0x24e293['output']],_0x24e293['interpolat'+'ion'])),_0x24e293['paths']['length']>-0xbdb+0x144c+0x871*-0x1&&_0x24e293['paths'][-0x7cd*-0x3+-0x7*-0x3f9+-0x3336]['propertyPa'+'th'][0x176d+-0x11a0+0x1*-0x5cd]==='localRotat'+'ion'&&_0x24e293['interpolat'+'ion']!==Bf&&_0x209b7b['push'](_0x11072e[_0x11072e['length']-(0x2007+-0x4d4+0x76*-0x3b)]['output']));}_0x209b7b['sort']();let _0x4c6ec0=null,_0x44db3d;for(_0x12c84b=-0x20*0xaf+-0x343+0x507*0x5;_0x12c84b<_0x209b7b['length'];++_0x12c84b){const _0x412e06=_0x209b7b[_0x12c84b];if(_0x12c84b===-0x1*0x2bb+0x18*-0x22+0x5eb||_0x412e06!==_0x4c6ec0){if(_0x44db3d=_0x878bc7[_0x412e06],_0x44db3d['components']===-0x158d+-0x654+0x1be5){const _0x220544=_0x44db3d['data'],_0xf99e40=_0x220544['length']-(-0x2e8*-0x1+0x7cf*0x1+-0xab3);for(let _0x59f391=0x85*0x1+-0x2594+0xb3*0x35;_0x59f391<_0xf99e40;_0x59f391+=0x20d3*0x1+-0xb83+0xaa6*-0x2)_0x220544[_0x59f391+(-0x440+0x946+-0x506)]*_0x220544[_0x59f391+(-0x13b5+0xc81+-0x4d*-0x18)]+_0x220544[_0x59f391+(-0x1*0x2239+-0xe*0x2ad+0x47b0)]*_0x220544[_0x59f391+(0x1*0xc31+-0x145d+0x831)]+_0x220544[_0x59f391+(-0xf00+0x7f9*-0x3+-0x1*-0x26ed)]*_0x220544[_0x59f391+(0xd*-0x26b+-0x2*0xfcc+0x3f0d*0x1)]+_0x220544[_0x59f391+(-0x59*0x1+-0x1ca9*0x1+0x1d05)]*_0x220544[_0x59f391+(-0x36d*-0x6+0xa81*0x2+-0x2989)]<0x1faf+-0x1*-0x4ef+0x2*-0x124f&&(_0x220544[_0x59f391+(-0x4*-0x47f+0x2265+-0x345d)]*=-(0x1*0x1472+-0xdbf+0x1*-0x6b2),_0x220544[_0x59f391+(0x444*0x9+0x1e7f+-0x44de)]*=-(0x244d*0x1+-0x3*-0x333+-0x1f*0x17b),_0x220544[_0x59f391+(0x4*0x6c6+-0x76*-0x21+-0x2a48)]*=-(0x1a7e+0x1*-0x178e+-0x2ef),_0x220544[_0x59f391+(-0x1*0x19db+0x262d*-0x1+0x2c9*0x17)]*=-(-0x15a5*0x1+-0x1*0x721+-0x1*-0x1cc7));}_0x4c6ec0=_0x412e06;}}let _0x1a6fc1=0x3c+-0x1a34+0x19f8;for(_0x12c84b=0x198e+0x1*-0xf4d+-0xa41;_0x12c84b<_0x4b3469['length'];_0x12c84b++)_0x44db3d=_0x4b3469[_0x12c84b]['_data'],_0x1a6fc1=Math['max'](_0x1a6fc1,_0x44db3d['length']===0x5*-0x17b+-0x26f*0xe+0x2979?0x1*-0x69d+0x25a2*0x1+-0x1f05:_0x44db3d[_0x44db3d['length']-(-0x1fd5+-0x6a6+0x267c)]);return new Gi(_0x522802['hasOwnProp'+'erty']('name')?_0x522802['name']:'animation_'+_0x40b488,_0x1a6fc1,_0x4b3469,_0x878bc7,_0x11072e);},ah=new te(),Ba=new I(),DF=(_0x28a678,_0x129034,_0x5ac167)=>{const _0x1d35e1=new He();if(_0x28a678['hasOwnProp'+'erty']('name')&&_0x28a678['name']['length']>-0x5c9*-0x1+0x2ff+-0x8c8?_0x1d35e1['name']=_0x28a678['name']:_0x1d35e1['name']='node_'+_0x129034,_0x28a678['hasOwnProp'+'erty']('matrix')&&(ah['data']['set'](_0x28a678['matrix']),ah['getTransla'+'tion'](Ba),_0x1d35e1['setLocalPo'+'sition'](Ba),ah['getEulerAn'+'gles'](Ba),_0x1d35e1['setLocalEu'+'lerAngles'](Ba),ah['getScale'](Ba),_0x1d35e1['setLocalSc'+'ale'](Ba)),_0x28a678['hasOwnProp'+'erty']('rotation')){const _0x1d6335=_0x28a678['rotation'];_0x1d35e1['setLocalRo'+'tation'](_0x1d6335[0x41f*-0x8+0x2559+-0x461],_0x1d6335[-0x1817+0x176e*-0x1+0x4f*0x9a],_0x1d6335[-0x1f65+0x1fc2+-0x5b],_0x1d6335[0x23c+0x836*0x1+-0xa6f]);}if(_0x28a678['hasOwnProp'+'erty']('translatio'+'n')){const _0x4a44a7=_0x28a678['translatio'+'n'];_0x1d35e1['setLocalPo'+'sition'](_0x4a44a7[0xbcb+-0x2e7*-0xa+-0x28d1],_0x4a44a7[0x17*0xfe+0x49*0x5f+-0x31e8],_0x4a44a7[-0x2434+0x1af9+0x93d]);}if(_0x28a678['hasOwnProp'+'erty']('scale')){const _0x189d9f=_0x28a678['scale'];_0x1d35e1['setLocalSc'+'ale'](_0x189d9f[0x6*-0x53d+-0x1*0x29d+0xf*0x245],_0x189d9f[0x4*-0x899+-0x1de0+0x1*0x4045],_0x189d9f[-0x1*0x13b5+-0x6*-0x433+-0x57b]);}return _0x28a678['hasOwnProp'+'erty']('extensions')&&_0x28a678['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']&&_0x5ac167['set'](_0x28a678,{'ext':_0x28a678['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']}),_0x1d35e1;},LF=(_0x4bbf81,_0x29138e)=>{const _0x2bcec3=_0x4bbf81['type']==='orthograph'+'ic'?hn:Ks,_0x50ddba=_0x2bcec3===hn?_0x4bbf81['orthograph'+'ic']:_0x4bbf81['perspectiv'+'e'],_0x2e6e6a={'enabled':!(-0x2e7*-0x9+-0x1c2+0x185c*-0x1),'projection':_0x2bcec3,'nearClip':_0x50ddba['znear'],'aspectRatioMode':Im};_0x50ddba['zfar']&&(_0x2e6e6a['farClip']=_0x50ddba['zfar']),_0x2bcec3===hn?(_0x2e6e6a['orthoHeigh'+'t']=(-0x25bb+0x1c*-0xf8+0x40db+0.5)*_0x50ddba['ymag'],_0x50ddba['ymag']&&(_0x2e6e6a['aspectRati'+'oMode']=Mf,_0x2e6e6a['aspectRati'+'o']=_0x50ddba['xmag']/_0x50ddba['ymag'])):(_0x2e6e6a['fov']=_0x50ddba['yfov']*Y['RAD_TO_DEG'],_0x50ddba['aspectRati'+'o']&&(_0x2e6e6a['aspectRati'+'oMode']=Mf,_0x2e6e6a['aspectRati'+'o']=_0x50ddba['aspectRati'+'o']));const _0x3168b6=new ot(_0x4bbf81['name']);return _0x3168b6['addCompone'+'nt']('camera',_0x2e6e6a),_0x3168b6;},RF=(_0x350966,_0x3076fb)=>{const _0x4693a3={'enabled':!(0x2257+-0x2*-0xbf7+0xe91*-0x4),'type':_0x350966['type']==='point'?'omni':_0x350966['type'],'color':_0x350966['hasOwnProp'+'erty']('color')?new ie(_0x350966['color']):ie['WHITE'],'range':_0x350966['hasOwnProp'+'erty']('range')?_0x350966['range']:-0x47fd*-0x1+0x1*0x2181+-0x426f,'falloffMode':oy,'intensity':_0x350966['hasOwnProp'+'erty']('intensity')?Y['clamp'](_0x350966['intensity'],0xee3+0x5c+-0xf3f,-0x16*0x6d+-0x22*0x6b+0x1796):0x471+-0x1*0x1853+0x13e3};_0x350966['hasOwnProp'+'erty']('spot')&&(_0x4693a3['innerConeA'+'ngle']=_0x350966['spot']['hasOwnProp'+'erty']('innerConeA'+'ngle')?_0x350966['spot']['innerConeA'+'ngle']*Y['RAD_TO_DEG']:-0x870+0x10ef+-0x87f,_0x4693a3['outerConeA'+'ngle']=_0x350966['spot']['hasOwnProp'+'erty']('outerConeA'+'ngle')?_0x350966['spot']['outerConeA'+'ngle']*Y['RAD_TO_DEG']:Math['PI']/(0x1fe*0xb+0x58*-0x3d+-0xee)),_0x350966['hasOwnProp'+'erty']('intensity')&&(_0x4693a3['luminance']=_0x350966['intensity']*Ho['getLightUn'+'itConversi'+'on'](Lf[_0x4693a3['type']],_0x4693a3['outerConeA'+'ngle'],_0x4693a3['innerConeA'+'ngle']));const _0x80dd99=new ot(_0x3076fb['name']);return _0x80dd99['rotateLoca'+'l'](0xb*0xad+-0x18e*0x4+0xd*-0x11,0x17*-0x119+-0x1*0x1433+0x2d72,-0x454*-0x1+-0x17f2+0x6*0x345),_0x80dd99['addCompone'+'nt']('light',_0x4693a3),_0x80dd99;},OF=(_0x368df3,_0x3a2e95,_0xbaa42a,_0x22b6f3)=>{if(!_0x3a2e95['hasOwnProp'+'erty']('skins')||_0x3a2e95['skins']['length']===-0x6f5+-0x20f7+-0x92*-0x46)return[];const _0x3cabfe=new Map();return _0x3a2e95['skins']['map'](_0x5b3644=>pF(_0x368df3,_0x5b3644,_0x3a2e95['accessors'],_0x22b6f3,_0xbaa42a,_0x3cabfe));},FF=(_0x4da3dd,_0x1c14a8,_0x187233,_0x5f1a6e)=>{var _0x3ef79e,_0x5829f7,_0x396516;const _0x179550={},_0x165f30={},_0x21bbff={},_0x71e4e6=[];return{'meshes':!_0x5f1a6e['skipMeshes']&&((_0x3ef79e=_0x1c14a8==null?void(-0x1a4b+0x15+0xd1b*0x2):_0x1c14a8['meshes'])==null?void(0x21f0+-0x1b1a+-0x6d6):_0x3ef79e['length'])&&((_0x5829f7=_0x1c14a8==null?void(0x1*0xf53+-0x10*0xc5+-0x101*0x3):_0x1c14a8['accessors'])==null?void(-0x1*-0x2062+0x4*-0x9af+-0x10f*-0x6):_0x5829f7['length'])&&((_0x396516=_0x1c14a8==null?void(-0x944+0x6*-0x3+0x956):_0x1c14a8['bufferView'+'s'])==null?void(-0x1499+0xdbf+0x6da):_0x396516['length'])?_0x1c14a8['meshes']['map'](_0x44fe96=>gF(_0x4da3dd,_0x44fe96,_0x1c14a8['accessors'],_0x187233,_0x179550,_0x165f30,_0x21bbff,_0x5f1a6e,_0x71e4e6)):[],'meshVariants':_0x165f30,'meshDefaultMaterials':_0x21bbff,'promises':_0x71e4e6};},NF=(_0x184bed,_0x4431d7,_0x1104b4)=>{var _0x12e1ab,_0x27afab,_0x3995d1;if(!_0x184bed['hasOwnProp'+'erty']('materials')||_0x184bed['materials']['length']===-0xc2a*0x3+0x2065+-0x419*-0x1)return[];const _0x3b9500=(_0x12e1ab=_0x1104b4==null?void(-0x35c+0xe4d*-0x1+-0x1*-0x11a9):_0x1104b4['material'])==null?void(-0x417+-0x2d5*-0x3+-0x11a*0x4):_0x12e1ab['preprocess'],_0x29bf7c=((_0x27afab=_0x1104b4==null?void(-0x55a+0x304*-0x5+-0x5*-0x416):_0x1104b4['material'])==null?void(-0xcc5+0x2*0x1330+-0x199b):_0x27afab['process'])??Ov,_0x54714a=(_0x3995d1=_0x1104b4==null?void(-0x200a+-0x451+0x245b):_0x1104b4['material'])==null?void(0x1807+0x2+-0x1809):_0x3995d1['postproces'+'s'];return _0x184bed['materials']['map'](_0x368871=>{_0x3b9500&&_0x3b9500(_0x368871);const _0x1af269=_0x29bf7c(_0x368871,_0x4431d7);return _0x54714a&&_0x54714a(_0x368871,_0x1af269),_0x1af269;});},kF=_0x307a7a=>{if(!_0x307a7a['hasOwnProp'+'erty']('extensions')||!_0x307a7a['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts'))return null;const _0x2876f9=_0x307a7a['extensions']['KHR_materi'+'als_varian'+'ts']['variants'],_0x2ebf51={};for(let _0x2ac9cc=0x53*0x37+-0x238a+0x11b5*0x1;_0x2ac9cc<_0x2876f9['length'];_0x2ac9cc++)_0x2ebf51[_0x2876f9[_0x2ac9cc]['name']]=_0x2ac9cc;return _0x2ebf51;},UF=(_0x1b9deb,_0x31fb2b,_0x33ca32,_0x45d224)=>{var _0x4dccc,_0x40c334;if(!_0x1b9deb['hasOwnProp'+'erty']('animations')||_0x1b9deb['animations']['length']===0xa4a+-0x1806+0x24a*0x6)return[];const _0x3fb0d1=(_0x4dccc=_0x45d224==null?void(-0xfc7+0xd0a+-0x1*-0x2bd):_0x45d224['animation'])==null?void(0x2248+0x8d*-0x3b+-0x1c9*0x1):_0x4dccc['preprocess'],_0x3502da=(_0x40c334=_0x45d224==null?void(0x1d*-0x1c+-0x1d18+0x2044):_0x45d224['animation'])==null?void(-0x2*-0xe12+-0x36c*0xa+0x614):_0x40c334['postproces'+'s'];return _0x1b9deb['animations']['map']((_0x4ff4d6,_0x173f51)=>{_0x3fb0d1&&_0x3fb0d1(_0x4ff4d6);const _0x57553e=IF(_0x4ff4d6,_0x173f51,_0x1b9deb['accessors'],_0x33ca32,_0x31fb2b,_0x1b9deb['meshes'],_0x1b9deb['nodes']);return _0x3502da&&_0x3502da(_0x4ff4d6,_0x57553e),_0x57553e;});},BF=(_0x4e7b4f,_0x176295,_0x3ae858,_0x28d4e0)=>{const _0x50c544=_0x176295['accessors'];_0x3ae858['forEach']((_0x1af954,_0x44272c)=>{const _0x5d5921=_0x1af954['ext']['attributes'];let _0x5dec40;if(_0x5d5921['hasOwnProp'+'erty']('TRANSLATIO'+'N')){const _0x20db0d=_0x50c544[_0x5d5921['TRANSLATIO'+'N']];_0x5dec40=un(_0x20db0d,_0x28d4e0);}let _0x1ff441;if(_0x5d5921['hasOwnProp'+'erty']('ROTATION')){const _0x12a66d=_0x50c544[_0x5d5921['ROTATION']];_0x1ff441=un(_0x12a66d,_0x28d4e0);}let _0x5f5a41;if(_0x5d5921['hasOwnProp'+'erty']('SCALE')){const _0x1d6e75=_0x50c544[_0x5d5921['SCALE']];_0x5f5a41=un(_0x1d6e75,_0x28d4e0);}const _0x1a9971=(_0x5dec40?_0x5dec40['length']/(-0x2445*-0x1+-0x623*0x2+-0x17fc):-0x91e+0x1159+-0x83b)||(_0x1ff441?_0x1ff441['length']/(-0x934*0x4+0x1679+0xe5b):0x2188+0x1*0xf9d+-0x3125)||(_0x5f5a41?_0x5f5a41['length']/(0x496+0x1a34+-0x1ec7):0x1*0xccd+0xb*0x16+0xdbf*-0x1);if(_0x1a9971){const _0x2e73f9=new Float32Array(_0x1a9971*(0x258d+-0x8ec*-0x1+-0x2e69)),_0x1e4e76=new I(),_0x5659e1=new le(),_0x48580c=new I(-0xf9*-0x15+0x4*0x3e5+-0x2400,-0x3*-0x641+0x1781+0x1f*-0x15d,0x1cc2+0x23a2*-0x1+0x6e1),_0x58253c=new te();let _0x36f650=0x1*0xada+-0x3*0xcb0+0x1b36;for(let _0x1dc4b6=0x1151+-0x157f+0x42e;_0x1dc4b6<_0x1a9971;_0x1dc4b6++){const _0x2f2dea=_0x1dc4b6*(0x1884+0x4d6+-0x1d57);if(_0x5dec40&&_0x1e4e76['set'](_0x5dec40[_0x2f2dea],_0x5dec40[_0x2f2dea+(-0x101*0xb+-0x2701+0x320d)],_0x5dec40[_0x2f2dea+(-0x1d87*-0x1+0x237e+-0xbb*0x59)]),_0x1ff441){const _0x2c375e=_0x1dc4b6*(0x4*0x7e6+-0x1*0xbbf+-0x13d5*0x1);_0x5659e1['set'](_0x1ff441[_0x2c375e],_0x1ff441[_0x2c375e+(0x36*0x40+-0x6*-0x33d+-0x20ed)],_0x1ff441[_0x2c375e+(-0x4*0x785+0x59*0x41+-0x9*-0xd5)],_0x1ff441[_0x2c375e+(-0xa2*0x9+-0xfe7+0x159c*0x1)]);}_0x5f5a41&&_0x48580c['set'](_0x5f5a41[_0x2f2dea],_0x5f5a41[_0x2f2dea+(0x2*0xaaf+-0x185*0x16+-0xc11*-0x1)],_0x5f5a41[_0x2f2dea+(0xd6c+-0x1*0x1bfa+0xe90)]),_0x58253c['setTRS'](_0x1e4e76,_0x5659e1,_0x48580c);for(let _0x288e4d=-0xbb1+0x769*-0x5+0x30be*0x1;_0x288e4d<0x1c74+0x2*-0x1130+0x5fc;_0x288e4d++)_0x2e73f9[_0x36f650++]=_0x58253c['data'][_0x288e4d];}_0x1af954['matrices']=_0x2e73f9;}});},zF=(_0x52bc0f,_0x739d4d,_0x5311ce)=>{var _0x2ecea1,_0x591601,_0x49a65e;if(!_0x52bc0f['hasOwnProp'+'erty']('nodes')||_0x52bc0f['nodes']['length']===-0xbe4+-0xa6f+0x1653)return[];const _0x3f50b9=(_0x2ecea1=_0x739d4d==null?void(-0xf70+-0x5b8+0x1528):_0x739d4d['node'])==null?void(-0x183*0x1+0x143c+-0x12b9):_0x2ecea1['preprocess'],_0xcdf4e7=((_0x591601=_0x739d4d==null?void(0x971+-0xa9*0x14+0x3c3):_0x739d4d['node'])==null?void(-0x1a3b*-0x1+-0xa1*0x17+-0x4*0x2f1):_0x591601['process'])??DF,_0x143edb=(_0x49a65e=_0x739d4d==null?void(0x34+-0x1128+0x1f*0x8c):_0x739d4d['node'])==null?void(-0x18c*0x12+0xa6*-0x31+0x3b9e):_0x49a65e['postproces'+'s'],_0x348183=_0x52bc0f['nodes']['map']((_0x1f1ed1,_0x4943da)=>{_0x3f50b9&&_0x3f50b9(_0x1f1ed1);const _0x1f2b63=_0xcdf4e7(_0x1f1ed1,_0x4943da,_0x5311ce);return _0x143edb&&_0x143edb(_0x1f1ed1,_0x1f2b63),_0x1f2b63;});for(let _0x5c7965=0x1fb5*-0x1+0x1be2+0xb*0x59;_0x5c7965<_0x52bc0f['nodes']['length'];++_0x5c7965){const _0x60cd7b=_0x52bc0f['nodes'][_0x5c7965];if(_0x60cd7b['hasOwnProp'+'erty']('children')){const _0x2a57df=_0x348183[_0x5c7965],_0x50438b={};for(let _0x13ec26=-0x107d+-0x5*-0x308+-0x155*-0x1;_0x13ec26<_0x60cd7b['children']['length'];++_0x13ec26){const _0x547aa4=_0x348183[_0x60cd7b['children'][_0x13ec26]];_0x547aa4['parent']||(_0x50438b['hasOwnProp'+'erty'](_0x547aa4['name'])?_0x547aa4['name']+=_0x50438b[_0x547aa4['name']]++:_0x50438b[_0x547aa4['name']]=0xbbf+-0x1979+-0x13*-0xb9,_0x2a57df['addChild'](_0x547aa4));}}}return _0x348183;},VF=(_0x1e618b,_0x3835b2)=>{var _0x75586;const _0x3b5d01=[],_0x45b03d=_0x1e618b['scenes']['length'];if(_0x45b03d===-0x7*-0x7b+0x7*0xea+-0x4e1*0x2&&((_0x75586=_0x1e618b['scenes'][-0x215b*-0x1+0xa64+-0x2bbf]['nodes'])==null?void(0x1*0x1009+0x4cd*-0x1+0x2*-0x59e):_0x75586['length'])===0x20cc+-0x3*0x86f+-0x77e){const _0x2aaab4=_0x1e618b['scenes'][0x1e20+0x1c4b+-0x3a6b]['nodes'][-0x67*0x3a+0x2*0x2ef+0x1178];_0x3b5d01['push'](_0x3835b2[_0x2aaab4]);}else for(let _0xfb7b1b=-0x220*-0x11+-0x21f4+0x116*-0x2;_0xfb7b1b<_0x45b03d;_0xfb7b1b++){const _0x5e4a04=_0x1e618b['scenes'][_0xfb7b1b];if(_0x5e4a04['nodes']){const _0xf198da=new He(_0x5e4a04['name']);for(let _0x1204cb=0x107a+0x3*0x591+0x13*-0x1bf;_0x1204cb<_0x5e4a04['nodes']['length'];_0x1204cb++){const _0x3c26ac=_0x3835b2[_0x5e4a04['nodes'][_0x1204cb]];_0xf198da['addChild'](_0x3c26ac);}_0x3b5d01['push'](_0xf198da);}}return _0x3b5d01;},GF=(_0x4b706f,_0x38906c,_0x122cd2)=>{var _0x54d0b5,_0x5c77f7,_0x3cb9de;let _0x5d076e=null;if(_0x4b706f['hasOwnProp'+'erty']('nodes')&&_0x4b706f['hasOwnProp'+'erty']('cameras')&&_0x4b706f['cameras']['length']>0xa5+-0x131*-0x20+-0x26c5){const _0x45cfb3=(_0x54d0b5=_0x122cd2==null?void(0x14*-0x1bb+-0x1*0x808+0x4*0xaa9):_0x122cd2['camera'])==null?void(0x1273+0x444+-0x16b7):_0x54d0b5['preprocess'],_0x2c7cb4=((_0x5c77f7=_0x122cd2==null?void(0xe33+-0x9ed+-0x446):_0x122cd2['camera'])==null?void(-0x13fc+0x1ab6+0x52*-0x15):_0x5c77f7['process'])??LF,_0x299805=(_0x3cb9de=_0x122cd2==null?void(-0x1224*-0x1+-0x1b4b+0x927):_0x122cd2['camera'])==null?void(0x2581*-0x1+0x721+0x1e60):_0x3cb9de['postproces'+'s'];_0x4b706f['nodes']['forEach']((_0x8bf896,_0x26e9f)=>{if(_0x8bf896['hasOwnProp'+'erty']('camera')){const _0x2955b1=_0x4b706f['cameras'][_0x8bf896['camera']];if(_0x2955b1){_0x45cfb3&&_0x45cfb3(_0x2955b1);const _0x5cb443=_0x2c7cb4(_0x2955b1,_0x38906c[_0x26e9f]);_0x299805&&_0x299805(_0x2955b1,_0x5cb443),_0x5cb443&&(_0x5d076e||(_0x5d076e=new Map()),_0x5d076e['set'](_0x8bf896,_0x5cb443));}}});}return _0x5d076e;},HF=(_0x4ffc94,_0x43cbb7,_0x92776b)=>{var _0x3d60d9,_0x473c92,_0x579a86;let _0x2c5625=null;if(_0x4ffc94['hasOwnProp'+'erty']('nodes')&&_0x4ffc94['hasOwnProp'+'erty']('extensions')&&_0x4ffc94['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x4ffc94['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('lights')){const _0x22a48e=_0x4ffc94['extensions']['KHR_lights'+'_punctual']['lights'];if(_0x22a48e['length']){const _0x1ff2ea=(_0x3d60d9=_0x92776b==null?void(0x1*0x1fb+0x8f5+-0xaf0):_0x92776b['light'])==null?void(-0x7a8+0x1adf*-0x1+0x2287):_0x3d60d9['preprocess'],_0x1b55c2=((_0x473c92=_0x92776b==null?void(-0xe*0x4e+-0x1*0x1e9f+0x22e3):_0x92776b['light'])==null?void(0x16ba+0x32*0xd+-0x1944):_0x473c92['process'])??RF,_0x1aa821=(_0x579a86=_0x92776b==null?void(0x1b*-0xe7+-0xacb+0x2328):_0x92776b['light'])==null?void(0x1be4+0x81d*0x2+-0x160f*0x2):_0x579a86['postproces'+'s'];_0x4ffc94['nodes']['forEach']((_0x3399d8,_0x50ca62)=>{if(_0x3399d8['hasOwnProp'+'erty']('extensions')&&_0x3399d8['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x3399d8['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('light')){const _0x32a1dd=_0x3399d8['extensions']['KHR_lights'+'_punctual']['light'],_0x2fa7ed=_0x22a48e[_0x32a1dd];if(_0x2fa7ed){_0x1ff2ea&&_0x1ff2ea(_0x2fa7ed);const _0x1d3f06=_0x1b55c2(_0x2fa7ed,_0x43cbb7[_0x50ca62]);_0x1aa821&&_0x1aa821(_0x2fa7ed,_0x1d3f06),_0x1d3f06&&(_0x2c5625||(_0x2c5625=new Map()),_0x2c5625['set'](_0x3399d8,_0x1d3f06));}}});}}return _0x2c5625;},WF=(_0x4aed7f,_0x5bb32d,_0x1f7a38)=>{_0x4aed7f['nodes']['forEach'](_0x49d83f=>{_0x49d83f['hasOwnProp'+'erty']('mesh')&&_0x49d83f['hasOwnProp'+'erty']('skin')&&_0x5bb32d[_0x49d83f['mesh']]['meshes']['forEach'](_0x1c7522=>{_0x1c7522['skin']=_0x1f7a38[_0x49d83f['skin']];});});},$F=async(_0x5c774f,_0x45028e,_0x5cde29,_0x315bc8,_0x5e1360)=>{var _0x134971,_0x48c0e7;const _0x389322=(_0x134971=_0x5e1360==null?void(0x5*0x663+-0x1f05+-0xea):_0x5e1360['global'])==null?void(-0x19*-0x16+-0x26*-0xad+-0x1bd4):_0x134971['preprocess'],_0x4ec816=(_0x48c0e7=_0x5e1360==null?void(0x2c1+0x37e*-0xb+-0x11*-0x219):_0x5e1360['global'])==null?void(-0x25ed+-0x1*-0x805+-0x27e*-0xc):_0x48c0e7['postproces'+'s'];_0x389322&&_0x389322(_0x45028e),_0x45028e['asset']&&_0x45028e['asset']['generator']==='PlayCanvas'&&M['warn']('glTF\x20model'+'\x20may\x20have\x20'+'been\x20gener'+'ated\x20with\x20'+'flipped\x20UV'+'s.\x20Please\x20'+'reconvert.');const _0x201382=new Map(),_0x5eae67=zF(_0x45028e,_0x5e1360,_0x201382),_0x4950b3=VF(_0x45028e,_0x5eae67),_0xb9d9d2=HF(_0x45028e,_0x5eae67,_0x5e1360),_0x46bb80=GF(_0x45028e,_0x5eae67,_0x5e1360),_0x370dfe=kF(_0x45028e),_0x24251c=await Promise['all'](_0x5cde29),{meshes:_0x68f7fd,meshVariants:_0x9d28be,meshDefaultMaterials:_0x1e4161,promises:_0x23f6a9}=FF(_0x5c774f,_0x45028e,_0x24251c,_0x5e1360),_0x483501=UF(_0x45028e,_0x5eae67,_0x24251c,_0x5e1360);BF(_0x5c774f,_0x45028e,_0x201382,_0x24251c);const _0xabe3a9=await Promise['all'](_0x315bc8),_0x46cae3=_0xabe3a9['map'](_0x474539=>_0x474539['resource']),_0x41a98b=NF(_0x45028e,_0x46cae3,_0x5e1360),_0x2bdcbb=OF(_0x5c774f,_0x45028e,_0x5eae67,_0x24251c),_0x4843bd=[];for(let _0x54cfa8=0x94d+0x2363*0x1+-0x16*0x208;_0x54cfa8<_0x68f7fd['length'];_0x54cfa8++)_0x4843bd[_0x54cfa8]=new zm(),_0x4843bd[_0x54cfa8]['meshes']=_0x68f7fd[_0x54cfa8];WF(_0x45028e,_0x4843bd,_0x2bdcbb);const _0x13c5ee=new rF();return _0x13c5ee['gltf']=_0x45028e,_0x13c5ee['nodes']=_0x5eae67,_0x13c5ee['scenes']=_0x4950b3,_0x13c5ee['animations']=_0x483501,_0x13c5ee['textures']=_0xabe3a9,_0x13c5ee['materials']=_0x41a98b,_0x13c5ee['variants']=_0x370dfe,_0x13c5ee['meshVarian'+'ts']=_0x9d28be,_0x13c5ee['meshDefaul'+'tMaterials']=_0x1e4161,_0x13c5ee['renders']=_0x4843bd,_0x13c5ee['skins']=_0x2bdcbb,_0x13c5ee['lights']=_0xb9d9d2,_0x13c5ee['cameras']=_0x46bb80,_0x13c5ee['nodeInstan'+'cingMap']=_0x201382,_0x4ec816&&_0x4ec816(_0x45028e,_0x13c5ee),await Promise['all'](_0x23f6a9),_0x13c5ee;},XF=(_0x4068d3,_0x53f72d)=>{const _0x495f2e=(_0x137b94,_0x582bf4)=>{switch(_0x137b94){case 0x4a0c+-0x1*-0x15a1+-0x39ad:return Te;case 0xad9+0x13d5+0x753:return _t;case-0x2c49+0x7*-0x871+0x8e60:return xc;case 0x2*-0xf44+-0x2d96+0x1*0x731f:return wc;case-0x4755+0x14ae+0x1*0x59a9:return Tc;case 0x1a3d*-0x1+0x22a4+0x1*0x1e9c:return ea;default:return _0x582bf4;}},_0x4b65c1=(_0x23037e,_0x449e4b)=>{switch(_0x23037e){case-0x176d*-0x1+-0x18a*0x51+-0xe66c*-0x1:return ue;case-0x9a9a+0x5873+0x3*0x41dd:return Tu;case-0x3*0xf4d+0xc*-0x4ef+0x921c:return pt;default:return _0x449e4b;}};_0x4068d3&&(_0x53f72d=_0x53f72d??{},_0x4068d3['minFilter']=_0x495f2e(_0x53f72d['minFilter'],ea),_0x4068d3['magFilter']=_0x495f2e(_0x53f72d['magFilter'],_t),_0x4068d3['addressU']=_0x4b65c1(_0x53f72d['wrapS'],pt),_0x4068d3['addressV']=_0x4b65c1(_0x53f72d['wrapT'],pt));};let qF=0x1fec+0x60*-0x15+-0x180c;const Wa=_0x356c16=>{var _0x1acc73,_0x3aed18,_0x3d80b3,_0x3b865e;return((_0x3aed18=(_0x1acc73=_0x356c16['extensions'])==null?void(-0x20c8+0x1*-0x518+-0x12f*-0x20):_0x1acc73['KHR_textur'+'e_basisu'])==null?void(0x239e+0x7*0x391+0xd*-0x4a9):_0x3aed18['source'])??((_0x3b865e=(_0x3d80b3=_0x356c16['extensions'])==null?void(0x3b*0xb+-0x236*0xe+-0x5af*-0x5):_0x3d80b3['EXT_textur'+'e_webp'])==null?void(-0x1*0x1d03+0x1583*0x1+-0x3c*-0x20):_0x3b865e['source'])??_0x356c16['source'];},jF=(_0x55764f,_0x2343d8,_0xa5b60a,_0x2a464d,_0x1c3531)=>{var _0x4f261c,_0xa3431d,_0xf0cf04;if(!_0x55764f['images']||_0x55764f['images']['length']===-0x50*-0x1+-0x1b8d+0x1b3d)return[];const _0x3da4d0=(_0x4f261c=_0x1c3531==null?void(0xce1+0x1*0x12ee+0x1*-0x1fcf):_0x1c3531['image'])==null?void(0x14f1+-0x904+0x2b*-0x47):_0x4f261c['preprocess'],_0x422f47=(_0xa3431d=_0x1c3531==null?void(-0x1b16+-0x7*0x585+0x41b9):_0x1c3531['image'])==null?void(0x4a5*0x3+0xcc3*-0x2+0xb97):_0xa3431d['processAsy'+'nc'],_0x281f43=(_0xf0cf04=_0x1c3531==null?void(0xdbc+-0x53*-0x1+0x3d*-0x3b):_0x1c3531['image'])==null?void(0x1a3d+0x1370*0x1+-0x2dad):_0xf0cf04['postproces'+'s'],_0x1bcc4f={'image/png':'png','image/jpeg':'jpg','image/basis':'basis','image/ktx':'ktx','image/ktx2':'ktx2','image/vnd-ms.dds':'dds'},_0x30262a=_0x2ce2b3=>{const _0x48f0bc=new Set();return _0x2ce2b3['hasOwnProp'+'erty']('materials')&&_0x2ce2b3['materials']['forEach'](_0x3b4246=>{if(_0x3b4246['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x2026f4=_0x3b4246['pbrMetalli'+'cRoughness'];if(_0x2026f4['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x55d283=_0x2ce2b3['textures'][_0x2026f4['baseColorT'+'exture']['index']];_0x48f0bc['add'](Wa(_0x55d283));}}if(_0x3b4246['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x3456f4=_0x2ce2b3['textures'][_0x3b4246['emissiveTe'+'xture']['index']];_0x48f0bc['add'](Wa(_0x3456f4));}if(_0x3b4246['hasOwnProp'+'erty']('extensions')){const _0x212843=_0x3b4246['extensions']['KHR_materi'+'als_sheen'];if(_0x212843&&_0x212843['hasOwnProp'+'erty']('sheenColor'+'Texture')){const _0x13e5d4=_0x2ce2b3['textures'][_0x212843['sheenColor'+'Texture']['index']];_0x48f0bc['add'](Wa(_0x13e5d4));}const _0x4983dd=_0x3b4246['extensions']['KHR_materi'+'als_pbrSpe'+'cularGloss'+'iness'];if(_0x4983dd&&_0x4983dd['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x448811=_0x2ce2b3['textures'][_0x4983dd['specularGl'+'ossinessTe'+'xture']['index']];_0x48f0bc['add'](Wa(_0x448811));}const _0x5b3f59=_0x3b4246['extensions']['KHR_materi'+'als_specul'+'ar'];if(_0x5b3f59&&_0x5b3f59['hasOwnProp'+'erty']('specularCo'+'lorTexture')){const _0x43b138=_0x2ce2b3['textures'][_0x5b3f59['specularCo'+'lorTexture']['index']];_0x48f0bc['add'](Wa(_0x43b138));}}}),_0x48f0bc;},_0x454491=(_0x26b748,_0x74277f,_0x479f88,_0x20a65c,_0x320c98,_0x4d3d96)=>new Promise((_0x3ad68f,_0x52a45e)=>{const _0x386fe7=_0x36707a=>{const _0x8af0ac=(_0x26b748['name']||'gltf-textu'+'re')+'-'+qF++,_0x4115e9={'url':_0x74277f||_0x8af0ac};if(_0x36707a&&(_0x4115e9['contents']=_0x36707a['slice'](-0x19f*-0x3+0x1e05+-0x22e2)['buffer']),_0x20a65c){const _0x4317fa=_0x1bcc4f[_0x20a65c];_0x4317fa&&(_0x4115e9['filename']=_0x4115e9['url']+'.'+_0x4317fa);}const _0x3edf21={'srgb':_0x4d3d96},_0x530f45=new me(_0x8af0ac,'texture',_0x4115e9,_0x3edf21,_0x320c98);_0x530f45['on']('load',_0x59812f=>_0x3ad68f(_0x59812f)),_0x530f45['on']('error',_0x290b75=>_0x52a45e(_0x290b75)),_0x2a464d['add'](_0x530f45),_0x2a464d['load'](_0x530f45);};_0x479f88?_0x479f88['then'](_0x2af863=>_0x386fe7(_0x2af863)):_0x386fe7(null);}),_0xe841a1=_0x30262a(_0x55764f);return _0x55764f['images']['map']((_0x2c2927,_0x44543b)=>{_0x3da4d0&&_0x3da4d0(_0x2c2927);let _0x820727;return _0x422f47?_0x820727=new Promise((_0xb7f6c9,_0x33f19a)=>{_0x422f47(_0x2c2927,(_0x20375b,_0x33c97b)=>{_0x20375b?_0x33f19a(_0x20375b):_0xb7f6c9(_0x33c97b);});}):_0x820727=new Promise(_0x17d973=>{_0x17d973(null);}),_0x820727=_0x820727['then'](_0x1b3038=>{const _0x201b28=_0xe841a1['has'](_0x44543b);return _0x1b3038||(_0x2c2927['hasOwnProp'+'erty']('uri')?Lv(_0x2c2927['uri'])?_0x454491(_0x2c2927,_0x2c2927['uri'],null,aF(_0x2c2927['uri']),null,_0x201b28):_0x454491(_0x2c2927,Ln['test'](_0x2c2927['uri'])?_0x2c2927['uri']:xe['join'](_0xa5b60a,_0x2c2927['uri']),null,null,{'crossOrigin':'anonymous'},_0x201b28):_0x2c2927['hasOwnProp'+'erty']('bufferView')&&_0x2c2927['hasOwnProp'+'erty']('mimeType')?_0x454491(_0x2c2927,null,_0x2343d8[_0x2c2927['bufferView']],_0x2c2927['mimeType'],null,_0x201b28):Promise['reject'](new Error('Invalid\x20im'+'age\x20found\x20'+'in\x20gltf\x20(n'+'either\x20uri'+'\x20or\x20buffer'+'View\x20found'+').\x20index='+_0x44543b)));}),_0x281f43&&(_0x820727=_0x820727['then'](_0x3d1220=>(_0x281f43(_0x2c2927,_0x3d1220),_0x3d1220))),_0x820727;});},YF=(_0x1e5059,_0x345671,_0x5cf2a9)=>{var _0x5b5ff3,_0x303e19,_0x2604b6,_0x3bceae,_0x1b02b7;if(!((_0x5b5ff3=_0x1e5059==null?void(0x9c1+0x1*0x1e51+-0x2812):_0x1e5059['images'])!=null&&_0x5b5ff3['length'])||!((_0x303e19=_0x1e5059==null?void(-0x18b5+-0x343+-0xa*-0x2cc):_0x1e5059['textures'])!=null&&_0x303e19['length']))return[];const _0x43ccc9=(_0x2604b6=_0x5cf2a9==null?void(0x1*0x1b9d+0x5*0x4e4+-0x3411):_0x5cf2a9['texture'])==null?void(-0xa7*0x1a+-0x19f*-0x17+-0x1453):_0x2604b6['preprocess'],_0x22d26f=(_0x3bceae=_0x5cf2a9==null?void(0x2109+0x236d+-0x4476):_0x5cf2a9['texture'])==null?void(0x7*0x2d7+0x74*-0x22+0x479*-0x1):_0x3bceae['processAsy'+'nc'],_0x5a1f1d=(_0x1b02b7=_0x5cf2a9==null?void(-0x157b+-0x21f6*-0x1+-0xc7b):_0x5cf2a9['texture'])==null?void(0x1*0x1183+-0x5e7*0x5+0xc00):_0x1b02b7['postproces'+'s'],_0x38cdbc=new Set();return _0x1e5059['textures']['map'](_0x26cd00=>{_0x43ccc9&&_0x43ccc9(_0x26cd00);let _0x17dba7;return _0x22d26f?_0x17dba7=new Promise((_0x3e2b3a,_0x41ed13)=>{_0x22d26f(_0x26cd00,_0x1e5059['images'],(_0x72fdae,_0x2c4d5a)=>{_0x72fdae?_0x41ed13(_0x72fdae):_0x3e2b3a(_0x2c4d5a);});}):_0x17dba7=new Promise(_0x1bf244=>{_0x1bf244(null);}),_0x17dba7=_0x17dba7['then'](_0x21d6f8=>{_0x21d6f8=_0x21d6f8??Wa(_0x26cd00);const _0x3c88c1=_0x38cdbc['has'](_0x21d6f8);return _0x38cdbc['add'](_0x21d6f8),_0x345671[_0x21d6f8]['then'](_0x3b9979=>{const _0x5e135=_0x3c88c1?fF(_0x3b9979):_0x3b9979;return XF(_0x5e135['resource'],(_0x1e5059['samplers']??[])[_0x26cd00['sampler']]),_0x5e135;});}),_0x5a1f1d&&(_0x17dba7=_0x17dba7['then'](_0x39b029=>(_0x5a1f1d(_0x26cd00,_0x39b029),_0x39b029))),_0x17dba7;});},KF=(_0x2b1f42,_0x5b61f0,_0x1dda79,_0x1b8001)=>{var _0x56f885,_0x4bb866,_0x4e9c29;if(!_0x2b1f42['buffers']||_0x2b1f42['buffers']['length']===0x1885+-0x3d*0x38+-0xb2d)return[];const _0x2715b0=(_0x56f885=_0x1b8001==null?void(-0x83*0xf+0x148b+-0xcde):_0x1b8001['buffer'])==null?void(-0x26d6+0x1ca3*0x1+0x1*0xa33):_0x56f885['preprocess'],_0x386c43=(_0x4bb866=_0x1b8001==null?void(-0x1158+-0x1*0x20ba+0x3212):_0x1b8001['buffer'])==null?void(0x133a+-0x4d*-0x61+-0x3067):_0x4bb866['processAsy'+'nc'],_0x49ba74=(_0x4e9c29=_0x1b8001==null?void(-0xba*-0x2b+0x186c+0x26*-0x177):_0x1b8001['buffer'])==null?void(0x263c+0xb0+-0x4*0x9bb):_0x4e9c29['postproces'+'s'];return _0x2b1f42['buffers']['map']((_0x5b87fd,_0x1a541c)=>{_0x2715b0&&_0x2715b0(_0x5b87fd);let _0xc270b1;return _0x386c43?_0xc270b1=new Promise((_0x4df3d4,_0x4ba68b)=>{_0x386c43(_0x5b87fd,(_0x28422f,_0x1ac10f)=>{_0x28422f?_0x4ba68b(_0x28422f):_0x4df3d4(_0x1ac10f);});}):_0xc270b1=new Promise(_0xa43ed0=>{_0xa43ed0(null);}),_0xc270b1=_0xc270b1['then'](_0x409ba7=>{if(_0x409ba7)return _0x409ba7;if(_0x5b87fd['hasOwnProp'+'erty']('uri')){if(Lv(_0x5b87fd['uri'])){const _0x1591c5=atob(_0x5b87fd['uri']['split'](',')[-0x3b*0x67+0x2674+-0xeb6]),_0x839563=new Uint8Array(_0x1591c5['length']);for(let _0x1f5783=-0x1*0xc7a+-0x1*-0x45d+0x81d;_0x1f5783<_0x1591c5['length'];_0x1f5783++)_0x839563[_0x1f5783]=_0x1591c5['charCodeAt'](_0x1f5783);return _0x839563;}return new Promise((_0x1403b2,_0x506629)=>{nt['get'](Ln['test'](_0x5b87fd['uri'])?_0x5b87fd['uri']:xe['join'](_0x1dda79,_0x5b87fd['uri']),{'cache':!(0x2379+-0x175a+0xc1f*-0x1),'responseType':'arraybuffe'+'r','retry':!(0x1*0x184d+0x9*0x3e5+0x3b59*-0x1)},(_0x44f8e0,_0x3e2d97)=>{_0x44f8e0?_0x506629(_0x44f8e0):_0x1403b2(new Uint8Array(_0x3e2d97));});});}return _0x5b61f0;}),_0x49ba74&&(_0xc270b1=_0xc270b1['then'](_0x4d82b7=>(_0x49ba74(_0x2b1f42['buffers'][_0x1a541c],_0x4d82b7),_0x4d82b7))),_0xc270b1;});},ZF=(_0x4fc43c,_0x264865)=>{const _0x4dbfe3=JSON['parse']((_0x417db9=>{if(typeof TextDecoder<'u')return new TextDecoder()['decode'](_0x417db9);let _0x505906='';for(let _0x321aa3=-0x62a+0x277*-0x3+0xd8f;_0x321aa3<_0x417db9['length'];_0x321aa3++)_0x505906+=String['fromCharCo'+'de'](_0x417db9[_0x321aa3]);return decodeURIComponent(escape(_0x505906));})(_0x4fc43c));if(_0x4dbfe3['asset']&&_0x4dbfe3['asset']['version']&&parseFloat(_0x4dbfe3['asset']['version'])<0x15dc+-0x1e09+-0x82f*-0x1){_0x264865('Invalid\x20gl'+'tf\x20version'+'.\x20Expected'+'\x20version\x202'+'.0\x20or\x20abov'+'e\x20but\x20foun'+'d\x20version\x20'+'\x27'+_0x4dbfe3['asset']['version']+'\x27.');return;}_0x264865(null,_0x4dbfe3);},QF=(_0x574bba,_0x598f7c)=>{const _0x418305=_0x574bba instanceof ArrayBuffer?new DataView(_0x574bba):new DataView(_0x574bba['buffer'],_0x574bba['byteOffset'],_0x574bba['byteLength']),_0x2847d2=_0x418305['getUint32'](-0x1*-0x268+-0x1*0x18d7+0x166f,!(0x1f9b+0x11*0x1db+-0x112*0x3b)),_0x318766=_0x418305['getUint32'](0x1*0x23a1+-0x20f6*0x1+-0x2a7,!(-0x9d*-0x27+0x20ba+-0x1*0x38a5)),_0x1463ea=_0x418305['getUint32'](0x232e+-0x7*0x1cd+0x1d*-0xc7,!(-0xdcb+0x1ff7+-0x122c));if(_0x2847d2!==0xae*-0x1d0c39+0x4ed5b9dd+0xc8*0xe6291){_0x598f7c('Invalid\x20ma'+'gic\x20number'+'\x20found\x20in\x20'+'glb\x20header'+'.\x20Expected'+'\x200x46546C6'+'7,\x20found\x200'+'x'+_0x2847d2['toString'](-0x35*-0xb+-0x2099+0x1e62));return;}if(_0x318766!==0x271+0x1ae4+-0x1d53){_0x598f7c('Invalid\x20ve'+'rsion\x20numb'+'er\x20found\x20i'+'n\x20glb\x20head'+'er.\x20Expect'+'ed\x202,\x20foun'+'d\x20'+_0x318766);return;}if(_0x1463ea<=0xf1*-0xb+-0x5*-0xaf+0x3*0x250||_0x1463ea>_0x418305['byteLength']){_0x598f7c('Invalid\x20le'+'ngth\x20found'+'\x20in\x20glb\x20he'+'ader.\x20Foun'+'d\x20'+_0x1463ea);return;}const _0x19959e=[];let _0x931164=-0x3*0x42a+-0x242d*-0x1+-0x17a3;for(;_0x931164<_0x1463ea;){const _0x2df7f4=_0x418305['getUint32'](_0x931164,!(-0xbf2+-0x2dc*0x8+-0x2*-0x1169));_0x931164+_0x2df7f4+(0x1eb7+0x6b*-0x6+-0x1c2d)>_0x418305['byteLength']&&_0x598f7c('Invalid\x20ch'+'unk\x20length'+'\x20found\x20in\x20'+'glb.\x20Found'+'\x20'+_0x2df7f4);const _0x48f534=_0x418305['getUint32'](_0x931164+(-0x729+0x7*-0x475+0x2660),!(0x1c55*-0x1+0xcb5+-0x28*-0x64)),_0x20244b=new Uint8Array(_0x418305['buffer'],_0x418305['byteOffset']+_0x931164+(-0x1915+-0x725*0x1+-0x2*-0x1021),_0x2df7f4);_0x19959e['push']({'length':_0x2df7f4,'type':_0x48f534,'data':_0x20244b}),_0x931164+=_0x2df7f4+(0xe26+-0x23ca+0x15ac);}if(_0x19959e['length']!==-0x3*-0x4cd+0x9*0x2c+-0xff2&&_0x19959e['length']!==-0x26e+0x227c+-0x1*0x200c){_0x598f7c('Invalid\x20nu'+'mber\x20of\x20ch'+'unks\x20found'+'\x20in\x20glb\x20fi'+'le.');return;}if(_0x19959e[-0x1*0x14a1+-0x6a*0x5b+0x17*0x289]['type']!==-0x1*-0xe735683+-0x3104*0x1dc8d+-0x1*-0x9b1a6bfb){_0x598f7c('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x4'+'E4F534A,\x20f'+'ound\x200x'+_0x19959e[-0x1bdd+-0x501*0x1+0xe*0x259]['type']['toString'](0x7f7*-0x1+-0x1b86+0x1df*0x13));return;}if(_0x19959e['length']>0x2*-0x2fc+-0x21b9+-0x2*-0x13d9&&_0x19959e[0x1157*-0x2+-0x12a7+-0x1aab*-0x2]['type']!==-0x5*0x168022+-0x4be754+0x10ab140){_0x598f7c('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x0'+'04E4942,\x20f'+'ound\x200x'+_0x19959e[-0x276+-0x19eb+0x1c62]['type']['toString'](0x2287+0x4ec+-0x2763));return;}_0x598f7c(null,{'gltfChunk':_0x19959e[0x1f7+-0x22a8+0x20b1*0x1]['data'],'binaryChunk':_0x19959e['length']===-0x1*-0x189d+-0x1ba*-0x11+0x13*-0x2d7?_0x19959e[-0x1f20+0x43*0x41+-0x1a*-0x8b]['data']:null});},JF=(_0x27a897,_0x43d959,_0x156ac6)=>{const _0x1fb63a=()=>{const _0x2c4308=new Uint8Array(_0x43d959);return _0x2c4308[-0x17d6+-0xe81+0x2657]===-0x20e9+-0x20a5+0x5ff*0xb&&_0x2c4308[-0x1*-0x15da+0x25a+-0x1833*0x1]===0x107+-0x1049*0x1+0x12*0xdf&&_0x2c4308[0xb36+0x2*0x399+-0x1266]===-0x1*-0x5af+0xfe2*-0x1+-0x5*-0x21b&&_0x2c4308[0x1e56+-0x7ac*0x1+-0x16a7]===0x1733+0x1*-0x1c97+0x91*0xa;};_0x27a897&&_0x27a897['toLowerCas'+'e']()['endsWith']('.glb')||_0x1fb63a()?QF(_0x43d959,_0x156ac6):_0x156ac6(null,{'gltfChunk':_0x43d959,'binaryChunk':null});},eN=(_0x1084f6,_0x52e08a,_0x22c6dd)=>{var _0x36e824,_0x128ade,_0x1b7e07,_0x59e8b0;const _0x3d493f=[],_0x487693=(_0x36e824=_0x22c6dd==null?void(0x250c+-0x9af*-0x3+-0x1*0x4219):_0x22c6dd['bufferView'])==null?void(0x1dee*0x1+-0x765*-0x1+-0x2553):_0x36e824['preprocess'],_0xc46d18=(_0x128ade=_0x22c6dd==null?void(-0x1*-0x1c4f+-0xac5*0x3+-0x80*-0x8):_0x22c6dd['bufferView'])==null?void(-0x18a*0x12+-0x724+-0x8*-0x45b):_0x128ade['processAsy'+'nc'],_0x58bd5b=(_0x1b7e07=_0x22c6dd==null?void(-0xe25*0x1+0x12*0x207+-0x1659):_0x22c6dd['bufferView'])==null?void(-0x25a*-0xb+0x13*0x9+-0x1a89*0x1):_0x1b7e07['postproces'+'s'];if(!((_0x59e8b0=_0x1084f6['bufferView'+'s'])!=null&&_0x59e8b0['length']))return _0x3d493f;for(let _0x55458f=-0xc3c+0x1a5*-0x17+0x320f;_0x55458f<_0x1084f6['bufferView'+'s']['length'];++_0x55458f){const _0x4467d=_0x1084f6['bufferView'+'s'][_0x55458f];_0x487693&&_0x487693(_0x4467d);let _0x4119ba;_0xc46d18?_0x4119ba=new Promise((_0x23602e,_0x37e656)=>{_0xc46d18(_0x4467d,_0x52e08a,(_0x59eab9,_0x519145)=>{_0x59eab9?_0x37e656(_0x59eab9):_0x23602e(_0x519145);});}):_0x4119ba=new Promise(_0x1285ef=>{_0x1285ef(null);}),_0x4119ba=_0x4119ba['then'](_0x4d8e77=>_0x4d8e77||_0x52e08a[_0x4467d['buffer']]['then'](_0x56f44a=>new Uint8Array(_0x56f44a['buffer'],_0x56f44a['byteOffset']+(_0x4467d['byteOffset']||0x4fd+0x1*-0x13a2+0xea5),_0x4467d['byteLength']))),_0x4467d['hasOwnProp'+'erty']('byteStride')&&(_0x4119ba=_0x4119ba['then'](_0x2f791d=>(_0x2f791d['byteStride']=_0x4467d['byteStride'],_0x2f791d))),_0x58bd5b&&(_0x4119ba=_0x4119ba['then'](_0x5b5a04=>(_0x58bd5b(_0x4467d,_0x5b5a04),_0x5b5a04))),_0x3d493f['push'](_0x4119ba);}return _0x3d493f;};class lc{static['parse'](_0x3319cd,_0x5ed111,_0x406537,_0x562ac7,_0x168d7a,_0x2d6517,_0xb949ab){JF(_0x3319cd,_0x406537,(_0x1f8c12,_0x507a37)=>{if(_0x1f8c12){_0xb949ab(_0x1f8c12);return;}ZF(_0x507a37['gltfChunk'],(_0x5303d5,_0x4e7c5b)=>{if(_0x5303d5){_0xb949ab(_0x5303d5);return;}const _0x345611=KF(_0x4e7c5b,_0x507a37['binaryChun'+'k'],_0x5ed111,_0x2d6517),_0x196027=eN(_0x4e7c5b,_0x345611,_0x2d6517),_0x26cb1b=jF(_0x4e7c5b,_0x196027,_0x5ed111,_0x168d7a,_0x2d6517),_0x478cfc=YF(_0x4e7c5b,_0x26cb1b,_0x2d6517);$F(_0x562ac7,_0x4e7c5b,_0x196027,_0x478cfc,_0x2d6517)['then'](_0x81ee48=>_0xb949ab(null,_0x81ee48))['catch'](_0x1da1ac=>_0xb949ab(_0x1da1ac));});});}static['createDefa'+'ultMateria'+'l'](){return Ov({'name':'defaultGlb'+'Material'},[]);}}class tN extends Ze{constructor(_0x4e4dbd){super(_0x4e4dbd,'animation'),this['device']=_0x4e4dbd['graphicsDe'+'vice'],this['assets']=_0x4e4dbd['assets'];}['load'](_0x4ef660,_0x214f43,_0x48f239){typeof _0x4ef660=='string'&&(_0x4ef660={'load':_0x4ef660,'original':_0x4ef660});const _0x4b7822={'retry':this['maxRetries']>0x8b*-0xb+0x1560+-0x1*0xf67,'maxRetries':this['maxRetries']};(_0x4ef660['load']['startsWith']('blob:')||_0x4ef660['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x4ef660['original'])['toLowerCas'+'e']()==='.glb'?_0x4b7822['responseTy'+'pe']=Ts['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x4b7822['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x4ef660['load'],_0x4b7822,(_0x2acb83,_0x2af102)=>{_0x2acb83?_0x214f43('Error\x20load'+'ing\x20animat'+'ion\x20resour'+'ce:\x20'+_0x4ef660['original']+'\x20['+_0x2acb83+']'):xe['getExtensi'+'on'](_0x4ef660['original'])['toLowerCas'+'e']()==='.glb'?lc['parse']('filename.g'+'lb','',_0x2af102,this['device'],this['assets'],(_0x48f239==null?void(0x1*0x11+0x1*-0x7e1+0x7d0):_0x48f239['options'])??{},(_0x2fe2ee,_0x1f965d)=>{var _0x1cd2a1;if(_0x2fe2ee)_0x214f43(_0x2fe2ee);else{const _0x1c50af=_0x1f965d['animations'];if((_0x1cd2a1=_0x48f239==null?void(0x81e*0x3+-0x343+-0x1517*0x1):_0x48f239['data'])!=null&&_0x1cd2a1['events']){for(let _0x3648a8=-0x1ebb+0x1*-0xd17+0x2bd2;_0x3648a8<_0x1c50af['length'];_0x3648a8++)_0x1c50af[_0x3648a8]['events']=new Zy(Object['values'](_0x48f239['data']['events']));}_0x1f965d['destroy'](),_0x214f43(null,_0x1c50af);}}):_0x214f43(null,this['_parseAnim'+'ationV'+_0x2af102['animation']['version']](_0x2af102));});}['open'](_0x35ba40,_0x4b6bab,_0x3ab7){return _0x4b6bab;}['_parseAnim'+'ationV3'](_0x47c48d){const _0x4eeba9=_0x47c48d['animation'],_0x39f852=new P_();_0x39f852['name']=_0x4eeba9['name'],_0x39f852['duration']=_0x4eeba9['duration'];for(let _0x385d97=-0x847*-0x2+-0x739*0x5+0x138f;_0x385d97<_0x4eeba9['nodes']['length'];_0x385d97++){const _0x167f2c=new C_(),_0x806c32=_0x4eeba9['nodes'][_0x385d97];_0x167f2c['_name']=_0x806c32['name'];for(let _0x35d50f=-0xfa9+-0x1*-0x155b+-0x5b2;_0x35d50f<_0x806c32['keys']['length'];_0x35d50f++){const _0x224c0a=_0x806c32['keys'][_0x35d50f],_0x377ef4=_0x224c0a['time'],_0x29083e=_0x224c0a['pos'],_0x457aea=_0x224c0a['rot'],_0x3cfb8f=_0x224c0a['scale'],_0x2ba65b=new I(_0x29083e[-0x6c*-0x49+0x12e9*-0x2+0x1*0x706],_0x29083e[0xa84+-0x3b8*-0x2+-0x397*0x5],_0x29083e[0x127+-0x2239*0x1+0x2114]),_0x2f5c25=new le()['setFromEul'+'erAngles'](_0x457aea[-0x1*0x85b+0x4c+0x80f*0x1],_0x457aea[0xdb4+0x1484+-0x2237*0x1],_0x457aea[-0x101e+-0x3c+0xc*0x15d]),_0x42d604=new I(_0x3cfb8f[-0x5*0x3ac+0x216*-0x8+0x8c3*0x4],_0x3cfb8f[-0x1*-0xeea+0x2*-0xe2d+0xd71],_0x3cfb8f[-0x83*0x3+-0x1ca6+0x1e31]),_0x4b4d6b=new b_(_0x377ef4,_0x2ba65b,_0x2f5c25,_0x42d604);_0x167f2c['_keys']['push'](_0x4b4d6b);}_0x39f852['addNode'](_0x167f2c);}return _0x39f852;}['_parseAnim'+'ationV4'](_0x137d7e){const _0x491d87=_0x137d7e['animation'],_0x2f86b6=new P_();_0x2f86b6['name']=_0x491d87['name'],_0x2f86b6['duration']=_0x491d87['duration'];for(let _0xf33418=0x892+-0x23ee+0x1b5c;_0xf33418<_0x491d87['nodes']['length'];_0xf33418++){const _0x163ada=new C_(),_0x3e9f2e=_0x491d87['nodes'][_0xf33418];_0x163ada['_name']=_0x3e9f2e['name'];const _0x132066=_0x3e9f2e['defaults']['p'],_0x5015fd=_0x3e9f2e['defaults']['r'],_0x3e7341=_0x3e9f2e['defaults']['s'];for(let _0x946845=0x892*0x1+-0x35b*0x8+0x1*0x1246;_0x946845<_0x3e9f2e['keys']['length'];_0x946845++){const _0x29a36e=_0x3e9f2e['keys'][_0x946845],_0x2680a9=_0x29a36e['t'],_0x3fefb0=_0x132066||_0x29a36e['p'],_0x5275d3=_0x5015fd||_0x29a36e['r'],_0xb576c=_0x3e7341||_0x29a36e['s'],_0x347cf9=new I(_0x3fefb0[0x8c3*-0x3+-0x3dc+-0x1*-0x1e25],_0x3fefb0[0x18ad+0x1*0x5fb+-0x1ea7],_0x3fefb0[-0x4*-0x720+-0x1459+0x1*-0x825]),_0x29340c=new le()['setFromEul'+'erAngles'](_0x5275d3[-0xf79+-0x1eb0+-0x521*-0x9],_0x5275d3[-0x1fed+0xe*-0xcb+-0x264*-0x12],_0x5275d3[-0x86f+0x2561+0x1cf0*-0x1]),_0x2ffc57=new I(_0xb576c[-0x1d5a+0x2405+-0x6ab],_0xb576c[0x7*-0xff+-0xb*-0x277+0x1423*-0x1],_0xb576c[0xb0*-0x4+0x13*0x195+0x1b4d*-0x1]),_0x58ae38=new b_(_0x2680a9,_0x347cf9,_0x29340c,_0x2ffc57);_0x163ada['_keys']['push'](_0x58ae38);}_0x2f86b6['addNode'](_0x163ada);}return _0x2f86b6;}}class sN extends Ze{constructor(_0x272250){super(_0x272250,'animclip');}['load'](_0x1fb8f1,_0x4a7fbd){typeof _0x1fb8f1=='string'&&(_0x1fb8f1={'load':_0x1fb8f1,'original':_0x1fb8f1});const _0xee8239={'retry':this['maxRetries']>-0x2*0x10fa+-0x150a+-0x2*-0x1b7f,'maxRetries':this['maxRetries']};_0x1fb8f1['load']['startsWith']('blob:')&&(_0xee8239['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x1fb8f1['load'],_0xee8239,(_0x229038,_0x566fd0)=>{_0x229038?_0x4a7fbd('Error\x20load'+'ing\x20animat'+'ion\x20clip\x20r'+'esource:\x20'+_0x1fb8f1['original']+'\x20['+_0x229038+']'):_0x4a7fbd(null,_0x566fd0);});}['open'](_0x518613,_0x394e48){const _0x5db187=_0x394e48['name'],_0x1ca7ea=_0x394e48['duration'],_0x5aa576=_0x394e48['inputs']['map'](_0x9712ee=>new nc(-0xd6c+0x24df+-0x1772,_0x9712ee)),_0x23159e=_0x394e48['outputs']['map'](_0x1cc97e=>new nc(_0x1cc97e['components'],_0x1cc97e['data'])),_0x4632b3=_0x394e48['curves']['map'](_0x4c64fe=>new Dv([_0x4c64fe['path']],_0x4c64fe['inputIndex'],_0x4c64fe['outputInde'+'x'],_0x4c64fe['interpolat'+'ion']));return new Gi(_0x5db187,_0x1ca7ea,_0x5aa576,_0x23159e,_0x4632b3);}}class iN extends Ze{constructor(_0x316839){super(_0x316839,'animstateg'+'raph');}['load'](_0xf3f30f,_0x5cc639){typeof _0xf3f30f=='string'&&(_0xf3f30f={'load':_0xf3f30f,'original':_0xf3f30f});const _0x553298={'retry':this['maxRetries']>0xd*-0x11b+-0xcc5*-0x2+-0xb2b,'maxRetries':this['maxRetries']};_0xf3f30f['load']['startsWith']('blob:')&&(_0x553298['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0xf3f30f['load'],_0x553298,(_0x212487,_0x124b99)=>{_0x212487?_0x5cc639('Error\x20load'+'ing\x20animat'+'ion\x20state\x20'+'graph\x20reso'+'urce:\x20'+_0xf3f30f['original']+'\x20['+_0x212487+']'):_0x5cc639(null,_0x124b99);});}['open'](_0x37eb02,_0x56f4f0){return new vh(_0x56f4f0);}}const Yd=(function(){if(typeof window>'u')return!(0x8c5+0x12d7+0x25*-0xbf);const _0x31a062=window['navigator']['userAgent'],_0x66ebb2=_0x31a062['indexOf']('MSIE\x20');if(_0x66ebb2>0x2336+-0x17a0+-0xb96*0x1)return parseInt(_0x31a062['substring'](_0x66ebb2+(-0x19eb*0x1+0x24b6+0xc5*-0xe),_0x31a062['indexOf']('.',_0x66ebb2)),-0xae4+-0x1149+-0xe9*-0x1f);if(_0x31a062['indexOf']('Trident/')>0x15e1+0x18b*0xd+0xf4*-0x2c){const _0x2e8f4e=_0x31a062['indexOf']('rv:');return parseInt(_0x31a062['substring'](_0x2e8f4e+(0x1*-0x247f+-0x1368+0x37ea),_0x31a062['indexOf']('.',_0x2e8f4e)),-0xd02+-0x52*0x2b+0x1*0x1ad2);}return!(0x22a1+0xb3+-0x2353);}()),rN=['.ogg','.mp3','.wav','.mp4a','.m4a','.mp4','.aac','.opus'];class aN extends Ze{constructor(_0x24c404){super(_0x24c404,'audio'),this['manager']=_0x24c404['soundManag'+'er'],M['assert'](this['manager'],'AudioHandl'+'er\x20cannot\x20'+'be\x20created'+'\x20without\x20s'+'ound\x20manag'+'er');}['_isSupport'+'ed'](_0x5635f5){const _0x1b05e3=xe['getExtensi'+'on'](_0x5635f5);return rN['indexOf'](_0x1b05e3)>-(0x629*0x3+-0x850+0x1*-0xa2a)||_0x5635f5['startsWith']('blob:');}['load'](_0x12c0b6,_0x50b5d4){typeof _0x12c0b6=='string'&&(_0x12c0b6={'load':_0x12c0b6,'original':_0x12c0b6});const _0x514ccd=function(_0x12d8f6){_0x50b5d4(null,new BT(_0x12d8f6));},_0x1f0c12=function(_0x1c5fcc){let _0x3c5235='Error\x20load'+'ing\x20audio\x20'+'url:\x20'+_0x12c0b6['original'];_0x1c5fcc&&(_0x3c5235+=':\x20'+(_0x1c5fcc['message']||_0x1c5fcc)),console['warn'](_0x3c5235),_0x50b5d4(_0x3c5235);};if(this['_createSou'+'nd']){if(!this['_isSupport'+'ed'](_0x12c0b6['original'])){_0x1f0c12('Audio\x20form'+'at\x20for\x20'+_0x12c0b6['original']+('\x20not\x20suppo'+'rted'));return;}this['_createSou'+'nd'](_0x12c0b6['load'],_0x514ccd,_0x1f0c12);}else _0x1f0c12(null);}['_createSou'+'nd'](_0x2e5251,_0x505849,_0x33ec2a){if(al()){const _0x447f99=this['manager'];if(!_0x447f99['context']){_0x33ec2a('Audio\x20mana'+'ger\x20has\x20no'+'\x20audio\x20con'+'text');return;}const _0x4dcb73={'retry':this['maxRetries']>-0x378+-0x1*0x2082+-0x2*-0x11fd,'maxRetries':this['maxRetries']};(_0x2e5251['startsWith']('blob:')||_0x2e5251['startsWith']('data:'))&&(_0x4dcb73['responseTy'+'pe']=Ts['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']),nt['get'](_0x2e5251,_0x4dcb73,(_0x32110d,_0x2aca5d)=>{if(_0x32110d){_0x33ec2a(_0x32110d);return;}_0x447f99['context']['decodeAudi'+'oData'](_0x2aca5d,_0x505849,_0x33ec2a);});}else{let _0x10eadd=null;try{_0x10eadd=new Audio();}catch{_0x33ec2a('No\x20support'+'\x20for\x20Audio'+'\x20element');return;}Yd&&document['body']['appendChil'+'d'](_0x10eadd);const _0x291f29=function(){_0x10eadd['removeEven'+'tListener']('canplaythr'+'ough',_0x291f29),Yd&&document['body']['removeChil'+'d'](_0x10eadd),_0x505849(_0x10eadd);};_0x10eadd['onerror']=function(){_0x10eadd['onerror']=null,Yd&&document['body']['removeChil'+'d'](_0x10eadd),_0x33ec2a();},_0x10eadd['addEventLi'+'stener']('canplaythr'+'ough',_0x291f29),_0x10eadd['src']=_0x2e5251;}}}class nN extends Ze{constructor(_0x44b344){super(_0x44b344,'binary');}['load'](_0x388ea0,_0x3fb54a){typeof _0x388ea0=='string'&&(_0x388ea0={'load':_0x388ea0,'original':_0x388ea0}),nt['get'](_0x388ea0['load'],{'responseType':Ts['ResponseTy'+'pe']['ARRAY_BUFF'+'ER'],'retry':this['maxRetries']>-0x1e96+0x11a*-0x14+-0x1c1*-0x1e,'maxRetries':this['maxRetries']},(_0x5690a8,_0x3123cf)=>{_0x5690a8?_0x3fb54a('Error\x20load'+'ing\x20binary'+'\x20resource:'+'\x20'+_0x388ea0['original']+'\x20['+_0x5690a8+']'):_0x3fb54a(null,_0x3123cf);});}['openBinary'](_0x251426){return _0x251426['buffer'];}}class ar{constructor(_0x5c93fc,_0x1c51ff,_0x10b26e,_0x172fab){const _0x2374b0=function(_0x210303,_0x3c6329,_0x1643b7){const _0x5685e8=ar['createAsse'+'t'](_0x1c51ff['name'],_0x210303,_0x3c6329,_0x1643b7);return _0x10b26e['add'](_0x5685e8),_0x5685e8;},_0x5c21f0=[];for(let _0x5c75d0=-0x4a6*0x5+0x17*0x187+-0xbe3;_0x5c75d0<_0x5c93fc['renders']['length'];++_0x5c75d0)_0x5c21f0['push'](_0x2374b0('render',_0x5c93fc['renders'][_0x5c75d0],_0x5c75d0));const _0x2bd656=[];for(let _0x30c370=0x3c9+0x700+0xb*-0xfb;_0x30c370<_0x5c93fc['materials']['length'];++_0x30c370)_0x2bd656['push'](_0x2374b0('material',_0x5c93fc['materials'][_0x30c370],_0x30c370));const _0x472001=[];for(let _0x2e9b6f=0x1faa+0x19bc+0x9e*-0x5d;_0x2e9b6f<_0x5c93fc['animations']['length'];++_0x2e9b6f)_0x472001['push'](_0x2374b0('animation',_0x5c93fc['animations'][_0x2e9b6f],_0x2e9b6f));this['data']=_0x5c93fc,this['_model']=null,this['_assetName']=_0x1c51ff['name'],this['_assets']=_0x10b26e,this['_defaultMa'+'terial']=_0x172fab,this['renders']=_0x5c21f0,this['materials']=_0x2bd656,this['textures']=_0x5c93fc['textures'],this['animations']=_0x472001;}get['model'](){if(!this['_model']){const _0x35cca5=ar['createMode'+'l'](this['data'],this['_defaultMa'+'terial']),_0x2c57f3=ar['createAsse'+'t'](this['_assetName'],'model',_0x35cca5,0x23a7*0x1+-0x1*-0xa5b+-0x1701*0x2);this['_assets']['add'](_0x2c57f3),this['_model']=_0x2c57f3;}return this['_model'];}static['createAsse'+'t'](_0x47b758,_0x55dc8a,_0x57cb07,_0x42ec4f){const _0x1fe083=new me(_0x47b758+'/'+_0x55dc8a+'/'+_0x42ec4f,_0x55dc8a,{'url':''});return _0x1fe083['resource']=_0x57cb07,_0x1fe083['loaded']=!(0x11*0x1e1+-0xe3+0xf87*-0x2),_0x1fe083;}['instantiat'+'eModelEnti'+'ty'](_0x33484e){const _0x2db4dc=new ot(void(0x8*-0x33f+-0x4fe+0x1ef6),this['_assets']['_loader']['_app']);return _0x2db4dc['addCompone'+'nt']('model',Object['assign']({'type':'asset','asset':this['model']},_0x33484e)),_0x2db4dc;}['instantiat'+'eRenderEnt'+'ity'](_0x3774b3){const _0x11c2f9=this['_defaultMa'+'terial'],_0x1a9cd9=[],_0x3ed32f=function(_0x1ba5be,_0x2d1a8f,_0x1f2450,_0x52b23e,_0x15ea86,_0x135e31,_0x36b679,_0x15572c){const _0x2a9373=_0x15ea86[_0x1f2450['id']],_0x4e04c7=_0x2a9373===void(-0xc4f*-0x3+0xcef*0x2+-0xc8f*0x5)?_0x11c2f9:_0x52b23e[_0x2a9373],_0x5adac7=new We(_0x1f2450,_0x4e04c7);_0x1f2450['morph']&&(_0x5adac7['morphInsta'+'nce']=new oa(_0x1f2450['morph'])),_0x36b679['hasOwnProp'+'erty']('skin')&&_0x1a9cd9['push']({'meshInstance':_0x5adac7,'rootBone':_0x1ba5be,'entity':_0x2d1a8f});const _0x1c043c=_0x15572c['get'](_0x36b679);if(_0x1c043c){const _0x102b9d=_0x1c043c['matrices'],_0xd84b89=zt['getDefault'+'Instancing'+'Format'](_0x1f2450['device']),_0x263559=new xs(_0x1f2450['device'],_0xd84b89,_0x102b9d['length']/(-0x1022+-0x1574+0x25a6),{'data':_0x102b9d});_0x5adac7['setInstanc'+'ing'](_0x263559),_0x5adac7['instancing'+'Data']['_destroyVe'+'rtexBuffer']=!(0x2*-0xc52+0x1*-0x51e+0x1dc2);}return _0x5adac7;},_0x1097ec=(_0x243bf9,_0x538570,_0x3ee445)=>{const _0x56fa39=new ot(void(0x51d*0x1+-0x1cc0+-0x1*-0x17a3),this['_assets']['_loader']['_app']);_0x538570['_cloneInte'+'rnal'](_0x56fa39),_0x243bf9||(_0x243bf9=_0x56fa39);let _0x4c0359=null,_0x42037f=null;for(let _0x258115=0x2583+-0x5*-0x5f5+-0x434c;_0x258115<_0x3ee445['nodes']['length'];_0x258115++)if(_0x3ee445['nodes'][_0x258115]===_0x538570){const _0x22f81c=_0x3ee445['gltf']['nodes'][_0x258115];if(_0x22f81c['hasOwnProp'+'erty']('mesh')){const _0x42f11d=_0x3ee445['renders'][_0x22f81c['mesh']]['meshes'];_0x42037f=this['renders'][_0x22f81c['mesh']];for(let _0xa14c86=0x1304*-0x2+-0x3f4+0x29fc;_0xa14c86<_0x42f11d['length'];_0xa14c86++){const _0x4348a2=_0x42f11d[_0xa14c86];if(_0x4348a2){const _0x35bad6=_0x3ed32f(_0x243bf9,_0x56fa39,_0x4348a2,_0x3ee445['materials'],_0x3ee445['meshDefaul'+'tMaterials'],_0x3ee445['skins'],_0x22f81c,_0x3ee445['nodeInstan'+'cingMap']);_0x4c0359||(_0x4c0359=[]),_0x4c0359['push'](_0x35bad6);}}}if(_0x3ee445['lights']){const _0x2009a3=_0x3ee445['lights']['get'](_0x22f81c);_0x2009a3&&_0x56fa39['addChild'](_0x2009a3['clone']());}if(_0x3ee445['cameras']){const _0x42a20c=_0x3ee445['cameras']['get'](_0x22f81c);_0x42a20c&&_0x42a20c['camera']['system']['cloneCompo'+'nent'](_0x42a20c,_0x56fa39);}}_0x4c0359&&(_0x56fa39['addCompone'+'nt']('render',Object['assign']({'type':'asset','meshInstances':_0x4c0359},_0x3774b3)),_0x56fa39['render']['assignAsse'+'t'](_0x42037f));const _0x165615=_0x538570['children'];for(let _0x95a6b8=-0x15ae+0x61*-0x29+0x2537;_0x95a6b8<_0x165615['length'];_0x95a6b8++){const _0x6afd0c=_0x1097ec(_0x243bf9,_0x165615[_0x95a6b8],_0x3ee445);_0x56fa39['addChild'](_0x6afd0c);}return _0x56fa39;},_0x407057=[];for(const _0x2bfb34 of this['data']['scenes'])_0x407057['push'](_0x1097ec(null,_0x2bfb34,this['data']));return _0x1a9cd9['forEach'](_0x2a5333=>{_0x2a5333['meshInstan'+'ce']['skinInstan'+'ce']=$o['createCach'+'edSkinInst'+'ance'](_0x2a5333['meshInstan'+'ce']['mesh']['skin'],_0x2a5333['rootBone'],_0x2a5333['entity']),_0x2a5333['meshInstan'+'ce']['node']['render']['rootBone']=_0x2a5333['rootBone'];}),ar['createScen'+'eHierarchy'](_0x407057,ot);}['getMateria'+'lVariants'](){return this['data']['variants']?Object['keys'](this['data']['variants']):[];}['applyMater'+'ialVariant'](_0x1fed17,_0x2c497b){const _0x39facd=_0x2c497b?this['data']['variants'][_0x2c497b]:null;if(_0x39facd===void(-0xc31*-0x2+0x1a15+-0x1*0x3277)){M['warn']('No\x20variant'+'\x20named\x20'+_0x2c497b+('\x20exists\x20in'+'\x20resource'));return;}const _0x20f864=_0x1fed17['findCompon'+'ents']('render');for(let _0x41d14f=-0x26e5+-0x4*0x683+0x40f1*0x1;_0x41d14f<_0x20f864['length'];_0x41d14f++){const _0x122b2c=_0x20f864[_0x41d14f];this['_applyMate'+'rialVarian'+'t'](_0x39facd,_0x122b2c['meshInstan'+'ces']);}}['applyMater'+'ialVariant'+'Instances'](_0x4e2a55,_0xfe0212){const _0x5d923a=_0xfe0212?this['data']['variants'][_0xfe0212]:null;if(_0x5d923a===void(-0x4*-0x1+0x5ba+-0x5be)){M['warn']('No\x20variant'+'\x20named\x20'+_0xfe0212+('\x20exists\x20in'+'\x20resource'));return;}this['_applyMate'+'rialVarian'+'t'](_0x5d923a,_0x4e2a55);}['_applyMate'+'rialVarian'+'t'](_0x3a00cf,_0x4e3073){_0x4e3073['forEach'](_0x36a548=>{if(_0x3a00cf===null)_0x36a548['material']=this['_defaultMa'+'terial'];else{const _0x3198d8=this['data']['meshVarian'+'ts'][_0x36a548['mesh']['id']];_0x3198d8&&(_0x36a548['material']=this['data']['materials'][_0x3198d8[_0x3a00cf]]);}M['assert'](_0x36a548['material']);});}static['createScen'+'eHierarchy'](_0xccc6cc,_0x3b82bb){let _0x2072c7=null;if(_0xccc6cc['length']===0x251c+-0x2ef*0x1+-0x222c)_0x2072c7=_0xccc6cc[0x2*-0x449+-0x1*0x782+-0x24c*-0x7];else{_0x2072c7=new _0x3b82bb('SceneGroup');for(const _0x5ec0e0 of _0xccc6cc)_0x2072c7['addChild'](_0x5ec0e0);}return _0x2072c7;}static['createMode'+'l'](_0x4223b6,_0xd4652b){const _0x17532f=function(_0x498cf9,_0x467ab3,_0x1983f6,_0x51e38b,_0x92c432,_0x5d05e5,_0x36f95f){const _0x3ce4a9=_0x4223b6['meshDefaul'+'tMaterials'][_0x467ab3['id']],_0x5a9157=_0x3ce4a9===void(-0x5*-0xe+0x7*-0x4a5+0x203d)?_0xd4652b:_0x92c432[_0x3ce4a9],_0x324777=new We(_0x467ab3,_0x5a9157,_0x5d05e5);if(_0x467ab3['morph']){const _0x45358b=new oa(_0x467ab3['morph']);_0x324777['morphInsta'+'nce']=_0x45358b,_0x498cf9['morphInsta'+'nces']['push'](_0x45358b);}if(_0x36f95f['hasOwnProp'+'erty']('skin')){const _0x3ce560=_0x36f95f['skin'],_0x5c256d=_0x1983f6[_0x3ce560];_0x467ab3['skin']=_0x5c256d;const _0x4dfb5a=_0x51e38b[_0x3ce560];_0x324777['skinInstan'+'ce']=_0x4dfb5a,_0x498cf9['skinInstan'+'ces']['push'](_0x4dfb5a);}_0x498cf9['meshInstan'+'ces']['push'](_0x324777);},_0xcfbf76=new $i(),_0x184a35=[];for(const _0x326c41 of _0x4223b6['skins']){const _0x4db16e=new hl(_0x326c41);_0x4db16e['bones']=_0x326c41['bones'],_0x184a35['push'](_0x4db16e);}_0xcfbf76['graph']=ar['createScen'+'eHierarchy'](_0x4223b6['scenes'],He);for(let _0x3e0722=0xe3e+0x2056+-0x16*0x21e;_0x3e0722<_0x4223b6['nodes']['length'];_0x3e0722++){const _0x809605=_0x4223b6['nodes'][_0x3e0722];if(_0x809605['root']===_0xcfbf76['graph']){const _0x3a69d5=_0x4223b6['gltf']['nodes'][_0x3e0722];if(_0x3a69d5['hasOwnProp'+'erty']('mesh')){const _0x1400cf=_0x4223b6['renders'][_0x3a69d5['mesh']]['meshes'];for(let _0x2ac3a7=0xf29+0x2*-0xf2c+0x12b*0xd;_0x2ac3a7<_0x1400cf['length'];_0x2ac3a7++){const _0x5e58e2=_0x1400cf[_0x2ac3a7];_0x5e58e2&&_0x17532f(_0xcfbf76,_0x5e58e2,_0x4223b6['skins'],_0x184a35,_0x4223b6['materials'],_0x809605,_0x3a69d5);}}}}return _0xcfbf76;}['destroy'](){const _0x4c3e81=this['_assets'],_0x1ae431=function(_0x1f4eda){_0x4c3e81['remove'](_0x1f4eda),_0x1f4eda['unload']();},_0x53b119=function(_0x459881){_0x459881['forEach'](_0xb2208d=>{_0x1ae431(_0xb2208d);});};this['animations']&&(_0x53b119(this['animations']),this['animations']=null),this['textures']&&(_0x53b119(this['textures']),this['textures']=null),this['materials']&&(_0x53b119(this['materials']),this['materials']=null),this['renders']&&(_0x53b119(this['renders']),this['renders']=null),this['_model']&&(_0x1ae431(this['_model']),this['_model']=null),this['data']=null,this['assets']=null;}}class oN{constructor(_0x11be0e,_0x341858,_0x864b0){this['_device']=_0x11be0e,this['_assets']=_0x341858,this['_defaultMa'+'terial']=lc['createDefa'+'ultMateria'+'l'](),this['maxRetries']=_0x864b0;}['_getUrlWit'+'houtParams'](_0x226c38){return _0x226c38['indexOf']('?')>=-0x1*0x17a6+-0x19cc*0x1+-0x1*-0x3172?_0x226c38['split']('?')[-0x72c+0x173d*0x1+-0x1*0x1011]:_0x226c38;}['load'](_0x253125,_0x3e689f,_0x87790d){me['fetchArray'+'Buffer'](_0x253125['load'],(_0xec2898,_0x2d4d10)=>{_0xec2898?_0x3e689f(_0xec2898):lc['parse'](this['_getUrlWit'+'houtParams'](_0x253125['original']),xe['extractPat'+'h'](_0x253125['load']),_0x2d4d10,this['_device'],_0x87790d['registry'],_0x87790d['options'],(_0x3a8d9b,_0x5a46f9)=>{_0x3a8d9b?_0x3e689f(_0x3a8d9b):_0x3e689f(null,new ar(_0x5a46f9,_0x87790d,this['_assets'],this['_defaultMa'+'terial']));});},_0x87790d,this['maxRetries']);}['open'](_0x47a923,_0x21a506,_0x135e84){return _0x21a506;}['patch'](_0x2542f6,_0x15443e){}}class lN extends Ze{constructor(_0x674556){super(_0x674556,'container'),this['glbContain'+'erParser']=new oN(_0x674556['graphicsDe'+'vice'],_0x674556['assets'],0x1*-0xb9b+0x4*0x1de+-0x161*-0x3),this['parsers']={};}set['maxRetries'](_0x14bb8e){this['glbContain'+'erParser']['maxRetries']=_0x14bb8e;for(const _0x3c8ced in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x3c8ced)&&(this['parsers'][_0x3c8ced]['maxRetries']=_0x14bb8e);}get['maxRetries'](){return this['glbContain'+'erParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x3f4756){return _0x3f4756['indexOf']('?')>=0x575*0x2+0xd1*0x9+0x1*-0x1243?_0x3f4756['split']('?')[-0xca2+0x40f*-0x5+0x20ed*0x1]:_0x3f4756;}['_getParser'](_0x19b281){const _0x90637b=_0x19b281?xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x19b281))['toLowerCas'+'e']()['replace']('.',''):null;return this['parsers'][_0x90637b]||this['glbContain'+'erParser'];}['load'](_0x1494db,_0x4a4a3f,_0x38db0f){typeof _0x1494db=='string'&&(_0x1494db={'load':_0x1494db,'original':_0x1494db}),this['_getParser'](_0x1494db['original'])['load'](_0x1494db,_0x4a4a3f,_0x38db0f);}['open'](_0x52d42b,_0x123b77,_0x5af223){return this['_getParser'](_0x52d42b)['open'](_0x52d42b,_0x123b77,_0x5af223);}}class hN extends Ze{constructor(_0x1f9724){super(_0x1f9724,'css'),h(this,'decoder',null);}['load'](_0x3f6dc9,_0x5234bf){typeof _0x3f6dc9=='string'&&(_0x3f6dc9={'load':_0x3f6dc9,'original':_0x3f6dc9}),nt['get'](_0x3f6dc9['load'],{'retry':this['maxRetries']>0x59*-0xa+-0x21ed+-0x19*-0x17f,'maxRetries':this['maxRetries']},(_0x2e7be4,_0xae8206)=>{_0x2e7be4?_0x5234bf('Error\x20load'+'ing\x20css\x20re'+'source:\x20'+_0x3f6dc9['original']+'\x20['+_0x2e7be4+']'):_0x5234bf(null,_0xae8206);});}['openBinary'](_0x5843a9){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x5843a9);}}class cN extends Ze{constructor(_0x92a81b){super(_0x92a81b,'cubemap'),this['_device']=_0x92a81b['graphicsDe'+'vice'],this['_registry']=_0x92a81b['assets'],this['_loader']=_0x92a81b['loader'];}['load'](_0x3b0753,_0x225950,_0x4490a3){this['loadAssets'](_0x4490a3,_0x225950);}['open'](_0x41cf9b,_0x21a2f2,_0x2c692f){return _0x2c692f?_0x2c692f['resource']:null;}['patch'](_0x2e207b,_0x493003){this['loadAssets'](_0x2e207b,(_0x178a49,_0x47655d)=>{_0x178a49&&(_0x493003['fire']('error',_0x2e207b),_0x493003['fire']('error:'+_0x2e207b['id'],_0x178a49,_0x2e207b),_0x2e207b['fire']('error',_0x2e207b));});}['getAssetId'+'s'](_0x1322a4){const _0x558ded=[];if(_0x558ded[-0xf*-0xc5+0x22e1+0xb9b*-0x4]=_0x1322a4['file'],(_0x1322a4['loadFaces']||!_0x1322a4['file'])&&_0x1322a4['data']&&_0x1322a4['data']['textures']){for(let _0x2cbb8a=0x1e6+0x2084+-0x371*0xa;_0x2cbb8a<0x11a1+-0x1*-0x1acd+-0x2c68;++_0x2cbb8a)_0x558ded[_0x2cbb8a+(0xb96*-0x2+-0x20b+-0xc9c*-0x2)]=_0x1322a4['data']['textures'][_0x2cbb8a];}else _0x558ded[-0x137c+-0x1ec6*-0x1+-0xb49]=_0x558ded[-0x30*-0x2b+0xe6d+0x167b*-0x1]=_0x558ded[-0x2*0x3a4+0xbfd+-0x1*0x4b2]=_0x558ded[-0x18be+-0x2e*0x8b+0x31bc]=_0x558ded[-0x1791+-0x245b+0x3bf1]=_0x558ded[0x6e*0x34+-0x7c8*-0x2+-0xd*0x2ea]=null;return _0x558ded;}['compareAss'+'etIds'](_0x5cfa81,_0x99706){return _0x5cfa81&&_0x99706?parseInt(_0x5cfa81,-0x1263*0x1+0x2*0xb63+-0x459)===_0x5cfa81||typeof _0x5cfa81=='string'?_0x5cfa81===_0x99706:_0x5cfa81['url']===_0x99706['url']:_0x5cfa81!==null==(_0x99706!==null);}['update'](_0x1b33a6,_0x5c5f6a,_0x267f15){const _0x58a2ab=_0x1b33a6['data']||{},_0x4389ae=_0x1b33a6['_handlerSt'+'ate']['assets'],_0x2e273f=_0x1b33a6['_resources'];let _0x3954ea,_0x431201,_0x2b1801;const _0x18919f=[null,null,null,null,null,null,null],_0x5a46ca=function(){return _0x58a2ab['hasOwnProp'+'erty']('type')?_0x58a2ab['type']:_0x58a2ab['hasOwnProp'+'erty']('rgbm')?_0x58a2ab['rgbm']?ta:di:null;};if(!_0x1b33a6['loaded']||_0x267f15[0x351*-0x1+-0x1*0xbca+-0x1*-0xf1b]!==_0x4389ae[0x22a3+0x956*-0x3+-0x6a1]){if(_0x267f15[0x45*-0x86+0x1f13+0x50b*0x1]){if(_0x3954ea=_0x267f15[-0x1*-0x281+-0xb*0x23b+0x1608]['resource'],_0x3954ea['cubemap']){for(_0x2b1801=-0x469+0x1bb5*0x1+0x47*-0x54;_0x2b1801<0x15b*0x18+0x1792+-0x3814*0x1;++_0x2b1801)_0x18919f[_0x2b1801+(-0x19a4+0x13ca+-0x1*-0x5db)]=new _e(this['_device'],{'name':_0x1b33a6['name']+('_prelitCub'+'emap')+(_0x3954ea['width']>>_0x2b1801),'cubemap':!(0x1b*0x59+-0x191c+-0x325*-0x5),'type':_0x5a46ca()||_0x3954ea['type'],'width':_0x3954ea['width']>>_0x2b1801,'height':_0x3954ea['height']>>_0x2b1801,'format':_0x3954ea['format'],'levels':[_0x3954ea['_levels'][_0x2b1801]],'addressU':ue,'addressV':ue,'mipmaps':_0x2b1801===0x8dd*0x1+0x37*-0x17+0x2*-0x1f6});}else _0x18919f[-0xf6b*0x1+0x68d*-0x1+0x465*0x5]=_0x3954ea;}}else _0x18919f[0x134b+-0x2071+0xd27*0x1]=_0x2e273f[0x2b*0x9b+0x22d*-0x9+-0x1*0x673]||null,_0x18919f[0x1e8b+-0x1*0x13ff+-0xa8a]=_0x2e273f[0x1b5b+-0x18c1*-0x1+0x156*-0x27]||null,_0x18919f[-0x14fe+-0x4*-0x35f+-0x113*-0x7]=_0x2e273f[-0x1*-0xef3+-0x38c+-0xb64]||null,_0x18919f[-0x1c4*0xa+-0x2*0x468+0x4*0x69f]=_0x2e273f[-0x24a1+0x1662+0xe43]||null,_0x18919f[-0x3d*0x29+-0x1*0xdfd+-0x1*-0x17c7]=_0x2e273f[0x305*0x5+-0x2094+0x1180]||null,_0x18919f[-0x14b5+-0x454*0x5+-0x1*-0x2a5f]=_0x2e273f[0x174c+0x1*0x1d0b+0x1*-0x3451]||null;const _0x6536ec=_0x267f15['slice'](-0x697*-0x1+-0x11f2*-0x1+-0x1888);if(!_0x1b33a6['loaded']||!this['cmpArrays'](_0x6536ec,_0x4389ae['slice'](0x3b5*0x1+0x1cd2+-0x2086))){if(_0x6536ec['indexOf'](null)===-(-0x1*0x805+0x224f*0x1+-0x8c3*0x3)){const _0x49ac41=_0x6536ec['map'](_0x41ccce=>_0x41ccce['resource']),_0x1a1eb3=[];for(_0x431201=-0x1c1*0xa+-0x59*-0x1b+0x1*0x827;_0x431201<_0x49ac41[0x15c0+0x1f52+-0x3512]['_levels']['length'];++_0x431201)_0x1a1eb3['push'](_0x49ac41['map'](_0x2f6ec8=>_0x2f6ec8['_levels'][_0x431201]));const _0x3f1e6a=_0x49ac41[-0x21b*0xa+0x13*-0x6d+0x3*0x9b7]['format'],_0x2af56a=new _e(this['_device'],{'name':_0x1b33a6['name']+'_faces','cubemap':!(0x2091+-0x1*-0xa27+-0x8*0x557),'type':_0x5a46ca()||_0x49ac41[0x1*0x3fb+0x6e3+-0xade]['type'],'width':_0x49ac41[0xe2d*-0x1+0x72e+0x6ff]['width'],'height':_0x49ac41[0x78a*0x3+0x1df+-0x187d]['height'],'format':_0x3f1e6a===ur?Oe:_0x3f1e6a,'mipmaps':_0x58a2ab['mipmaps']??!(-0x23e8*0x1+0x2403+0x9*-0x3),'levels':_0x1a1eb3,'minFilter':_0x58a2ab['hasOwnProp'+'erty']('minFilter')?_0x58a2ab['minFilter']:_0x49ac41[0x24+-0x22ab+0x2287]['minFilter'],'magFilter':_0x58a2ab['hasOwnProp'+'erty']('magFilter')?_0x58a2ab['magFilter']:_0x49ac41[0x1c42+0xce6+-0x2928]['magFilter'],'anisotropy':_0x58a2ab['hasOwnProp'+'erty']('anisotropy')?_0x58a2ab['anisotropy']:-0x808+-0x94c+0x1155,'addressU':ue,'addressV':ue});_0x18919f[0x13ad+0x227*0x7+-0x22be]=_0x2af56a;}}else _0x18919f[0x1e9b+-0x8+0xa31*-0x3]=_0x2e273f[-0x2115+-0x6*-0x617+0x3*-0x127]||null;if(!this['cmpArrays'](_0x18919f,_0x2e273f)){for(_0x1b33a6['resources']=_0x18919f,_0x1b33a6['_handlerSt'+'ate']['assetIds']=_0x5c5f6a,_0x1b33a6['_handlerSt'+'ate']['assets']=_0x267f15,_0x2b1801=-0x2167+0xbf1+0x86*0x29;_0x2b1801<_0x2e273f['length'];++_0x2b1801)_0x2e273f[_0x2b1801]!==null&&_0x18919f['indexOf'](_0x2e273f[_0x2b1801])===-(-0x2033+-0x13e3+0xf*0x379)&&_0x2e273f[_0x2b1801]['destroy']();}for(_0x2b1801=-0xf47+0x1b54+-0xc0d;_0x2b1801<_0x4389ae['length'];++_0x2b1801)_0x4389ae[_0x2b1801]!==null&&_0x267f15['indexOf'](_0x4389ae[_0x2b1801])===-(-0x159d+-0x1d36+0x32d4*0x1)&&_0x4389ae[_0x2b1801]['unload']();}['cmpArrays'](_0x129285,_0x56da4d){if(_0x129285['length']!==_0x56da4d['length'])return!(-0x4*0x2ae+0x45f*-0x1+0x45*0x38);for(let _0x3d6ed9=-0x96f+0x5e5+0x12e*0x3;_0x3d6ed9<_0x129285['length'];++_0x3d6ed9)if(_0x129285[_0x3d6ed9]!==_0x56da4d[_0x3d6ed9])return!(0x1c8e+-0x1ab4+0x1d9*-0x1);return!(0x5*0x26e+0x3cd*0x5+-0x1f27);}['resolveId'](_0x3d60db){const _0x425138=parseInt(_0x3d60db,-0x57*-0xd+0x10*-0x8c+0x45f);return _0x425138===_0x3d60db||_0x425138['toString']()===_0x3d60db?_0x425138:_0x3d60db;}['loadAssets'](_0x21f911,_0x381b26){_0x21f911['hasOwnProp'+'erty']('_handlerSt'+'ate')||(_0x21f911['_handlerSt'+'ate']={'assetIds':[null,null,null,null,null,null,null],'assets':[null,null,null,null,null,null,null]});const _0x2529d8=this,_0x1939e4=_0x2529d8['getAssetId'+'s'](_0x21f911),_0x324c72=[null,null,null,null,null,null,null],_0x1dbccd=_0x21f911['_handlerSt'+'ate']['assetIds'],_0x299035=_0x21f911['_handlerSt'+'ate']['assets'],_0xd5555a=_0x2529d8['_registry'];let _0x154863=-0xc9b+0x1*-0x1ccc+0x1*0x296e;const _0xea106e=function(_0x84faaa,_0x2ce8d3){_0x324c72[_0x84faaa]=_0x2ce8d3,_0x154863--,_0x154863===-0x3*0xcd2+0x1*0x123a+0x143c&&(_0x2529d8['update'](_0x21f911,_0x1939e4,_0x324c72),_0x381b26(null,_0x21f911['resources']));},_0x449a42=function(_0x5e7ad4,_0xd76e10,_0x1eb45b){_0x381b26(_0xd76e10);},_0x57b750=function(_0x4e5eda,_0x4c94c0){_0x4c94c0['loaded']?_0xea106e(_0x4e5eda,_0x4c94c0):(_0xd5555a['once']('load:'+_0x4c94c0['id'],_0xea106e['bind'](_0x2529d8,_0x4e5eda)),_0xd5555a['once']('error:'+_0x4c94c0['id'],_0x449a42['bind'](_0x2529d8,_0x4e5eda)),_0x4c94c0['loading']||_0xd5555a['load'](_0x4c94c0));};let _0x384bf6;for(let _0x2a976c=-0x1f10+-0x18f3+0x44f*0xd;_0x2a976c<0xf01+0x9e5*0x1+-0x18df;++_0x2a976c){const _0x29f6b3=this['resolveId'](_0x1939e4[_0x2a976c]);if(!_0x29f6b3)_0xea106e(_0x2a976c,null);else{if(_0x2529d8['compareAss'+'etIds'](_0x29f6b3,_0x1dbccd[_0x2a976c]))_0x57b750(_0x2a976c,_0x299035[_0x2a976c]);else{if(parseInt(_0x29f6b3,-0x1166+-0x162*0xf+0x262e)===_0x29f6b3)_0x384bf6=_0xd5555a['get'](_0x29f6b3),_0x384bf6?_0x57b750(_0x2a976c,_0x384bf6):setTimeout(((_0x5ae5b5,_0xca9e40)=>{const _0x25f448=_0xd5555a['get'](_0xca9e40);_0x25f448?_0x57b750(_0x5ae5b5,_0x25f448):_0x449a42(_0x5ae5b5,'failed\x20to\x20'+'find\x20depen'+'dent\x20cubem'+'ap\x20asset='+_0xca9e40);})['bind'](null,_0x2a976c,_0x29f6b3));else{const _0x2874a4=typeof _0x29f6b3=='string'?{'url':_0x29f6b3,'filename':_0x29f6b3}:_0x29f6b3,_0x3e0df5=_0x2874a4['url']['search']('.dds')===-(0xaa4+-0x1f51*-0x1+-0x2cc*0xf)?{'type':'rgbp','addressu':'clamp','addressv':'clamp','mipmaps':!(-0x823*0x3+0x1b*0x115+-0x4cd)}:null;_0x384bf6=new me(_0x21f911['name']+'_part_'+_0x2a976c,'texture',_0x2874a4,_0x3e0df5),_0xd5555a['add'](_0x384bf6),_0x57b750(_0x2a976c,_0x384bf6);}}}}}}class dN extends Ze{constructor(_0x4b0751){super(_0x4b0751,'folder');}['load'](_0x12c220,_0x40e004){_0x40e004(null,null);}}class Og{constructor(_0x21601d,_0x573557){this['type']=_0x573557&&_0x573557['type']||rc,this['em']=0x878+-0x743+0x2*-0x9a,this['textures']=_0x21601d,this['intensity']=-0xa85*-0x2+-0xa18+-0xaf2,this['_data']=null,this['data']=_0x573557;}set['data'](_0xc941bf){if(this['_data']=_0xc941bf,!!_0xc941bf&&(this['_data']['intensity']!==void(-0x659+0xa11+-0x3b8)&&(this['intensity']=this['_data']['intensity']),this['_data']['info']||(this['_data']['info']={}),(!this['_data']['version']||this['_data']['version']<0xc3f+0x2*-0x39f+0x4ff*-0x1)&&(this['_data']['info']['maps']=[{'width':this['_data']['info']['width'],'height':this['_data']['info']['height']}],this['_data']['chars']))){for(const _0x50ae5a in this['_data']['chars'])this['_data']['chars'][_0x50ae5a]['map']=-0x22*0xc9+0x8*0x38c+-0x1ae;}}get['data'](){return this['_data'];}}function Kd(_0x254978){return _0x254978['version']<0x34*0x29+0x1b*-0x14b+-0x2e*-0x94&&(_0x254978['version']<0x108+-0xcc6+0x2f0*0x4&&(_0x254978['info']['maps']=_0x254978['info']['maps']||[{'width':_0x254978['info']['width'],'height':_0x254978['info']['height']}]),_0x254978['chars']=Object['keys'](_0x254978['chars']||{})['reduce']((_0x1e19c0,_0x312a7d)=>{const _0x2d3b7c=_0x254978['chars'][_0x312a7d],_0x5694de=_0x2d3b7c['letter']!==void(0x3d5*0xa+0x24d3*-0x1+-0x17f)?_0x2d3b7c['letter']:dh['fromCodePo'+'int'](_0x312a7d);return _0x254978['version']<-0x14d1*-0x1+0x19c3*0x1+-0x2e92&&(_0x2d3b7c['map']=_0x2d3b7c['map']||-0x1ef4+0x2a*-0xcd+-0x2*-0x204b),_0x1e19c0[_0x5694de]=_0x2d3b7c,_0x1e19c0;},{}),_0x254978['version']=-0x823*-0x3+0x1abb+-0x3321),_0x254978;}class fN extends Ze{constructor(_0x487deb){super(_0x487deb,'font'),this['_loader']=_0x487deb['loader'],this['maxRetries']=0x1*-0x1579+-0x1f12+-0x348b*-0x1;}['load'](_0x4784c7,_0x597c22,_0x380a6d){typeof _0x4784c7=='string'&&(_0x4784c7={'load':_0x4784c7,'original':_0x4784c7});const _0x3d5c52=this;xe['getExtensi'+'on'](_0x4784c7['original'])==='.json'?nt['get'](_0x4784c7['load'],{'retry':this['maxRetries']>0x7d3*0x4+-0x4f0*-0x4+0x2*-0x1986,'maxRetries':this['maxRetries']},(_0x356a02,_0x5ad5dc)=>{if(_0x356a02)_0x597c22('Error\x20load'+'ing\x20font\x20r'+'esource:\x20'+_0x4784c7['original']+'\x20['+_0x356a02+']');else{const _0x3afa8e=Kd(_0x5ad5dc);_0x3d5c52['_loadTextu'+'res'](_0x4784c7['load']['replace']('.json','.png'),_0x3afa8e,(_0x3ff361,_0x5b1ae7)=>{_0x3ff361?_0x597c22(_0x3ff361):_0x597c22(null,{'data':_0x3afa8e,'textures':_0x5b1ae7});});}}):(_0x380a6d&&_0x380a6d['data']&&(_0x380a6d['data']=Kd(_0x380a6d['data'])),this['_loadTextu'+'res'](_0x4784c7['load'],_0x380a6d&&_0x380a6d['data'],_0x597c22));}['_loadTextu'+'res'](_0x2374bd,_0x4121ba,_0x37a9b2){const _0x4e188e=_0x4121ba['info']['maps']['length'];let _0x17e3a4=0x1*-0x10a3+0xe+0x1095,_0x245490=null;const _0x1c0ddb=new Array(_0x4e188e),_0x1d59da=this['_loader'],_0x42985a=function(_0x51ecb9){const _0x40b018=function(_0x2a9f10,_0x4e920c){if(!_0x245490){if(_0x2a9f10){_0x245490=_0x2a9f10,_0x37a9b2(_0x2a9f10);return;}_0x4e920c['upload'](),_0x1c0ddb[_0x51ecb9]=_0x4e920c,_0x17e3a4++,_0x17e3a4===_0x4e188e&&_0x37a9b2(null,_0x1c0ddb);}};_0x51ecb9===-0xc66+-0x10e4+0x1d4a?_0x1d59da['load'](_0x2374bd,'texture',_0x40b018):_0x1d59da['load'](_0x2374bd['replace']('.png',_0x51ecb9+'.png'),'texture',_0x40b018);};for(let _0x222644=0x9*0xf9+-0x1d58+0x1497*0x1;_0x222644<_0x4e188e;_0x222644++)_0x42985a(_0x222644);}['open'](_0x489cea,_0x1f6797,_0x3b3fd6){let _0x464bbd;return _0x1f6797['textures']?_0x464bbd=new Og(_0x1f6797['textures'],_0x1f6797['data']):_0x464bbd=new Og(_0x1f6797,null),_0x464bbd;}['patch'](_0x426e03,_0x55ea2a){const _0x48f594=_0x426e03['resource'];!_0x48f594['data']&&_0x426e03['data']?_0x48f594['data']=_0x426e03['data']:!_0x426e03['data']&&_0x48f594['data']&&(_0x426e03['data']=_0x48f594['data']),_0x426e03['data']&&(_0x426e03['data']=Kd(_0x426e03['data']));}}async function uN(){const _0xa170a5=-0x1*-0x21be+-0x39*0x60+-0xc5e+0.28209479177387814;class _0x4b896b{constructor(_0x9f7fad,_0x4bf11b,_0x919af1){this['x']=_0x9f7fad,this['y']=_0x4bf11b,this['z']=_0x919af1;}}class _0xb41121{constructor(_0x2f55e8,_0x2f9eee,_0x1ba7d4,_0x1e9217){this['x']=_0x2f55e8,this['y']=_0x2f9eee,this['z']=_0x1ba7d4,this['w']=_0x1e9217;}}class _0x10a456{constructor(_0x3950bf,_0xc904e4,_0x58d291,_0x820c23){this['x']=_0x3950bf,this['y']=_0xc904e4,this['z']=_0x58d291,this['w']=_0x820c23;}['set'](_0x32f057,_0x5989b8,_0x2f3866,_0x1f7e54){this['x']=_0x32f057,this['y']=_0x5989b8,this['z']=_0x2f3866,this['w']=_0x1f7e54;}}class _0x4bb69a{constructor(_0x20e7bd,_0x4be3ae,_0x3e9cf9,_0x2bf983,_0x1823b1,_0x5c63da,_0x3f5243,_0x8d5dcf,_0x20e1ad,_0x23cb94,_0x52ec67,_0x5d08e0,_0x590f55,_0x1c9918){const _0x4e742d=(_0x1cb8f0,_0x132053)=>{const _0x580c5e=(0x3a9*0x9+-0x24c9+0x3d9<<_0x132053)-(0x4*0x1f7+0xc6b+0xf*-0x15a);return(_0x1cb8f0&_0x580c5e)/_0x580c5e;},_0x664cca=(_0x457b01,_0x364e4a)=>{_0x457b01['x']=_0x4e742d(_0x364e4a>>>0x18b7+0x18b*0x19+-0x3f35,0x65*-0x26+-0x35*-0xb7+-0xea*0x19),_0x457b01['y']=_0x4e742d(_0x364e4a>>>0x13a5+-0x1a*0x17c+0x11e*0x11,0x12b*0x1c+0x2e4*0x3+-0x25*0x11e),_0x457b01['z']=_0x4e742d(_0x364e4a,-0x64*0x1f+0x47*0x2b+0x3a);},_0x2bd3ed=(_0x16f77b,_0x1afc63)=>{_0x16f77b['x']=_0x4e742d(_0x1afc63>>>0xfd6*0x2+0xba4+-0x2b38*0x1,0x21eb*-0x1+-0x20f0+0x42e3),_0x16f77b['y']=_0x4e742d(_0x1afc63>>>0x1c99*-0x1+-0x1c9e+-0x155*-0x2b,0x2d*-0xf+0x2183+0x4*-0x7b6),_0x16f77b['z']=_0x4e742d(_0x1afc63>>>0x22ab*-0x1+-0x202a*-0x1+-0xb*-0x3b,0x1973+-0x1ca*-0x5+0x13*-0x1cf),_0x16f77b['w']=_0x4e742d(_0x1afc63,0x4f0*0x7+-0x3*0xb93+-0x1*-0x31);},_0x489bf5=(_0x19a8a6,_0x8a74e)=>{const _0x30467a=(0x1793+0x1bb9+-0x334b)/(Math['sqrt'](0x1af9+0x66a*0x3+-0x3*0xf67)*(0x23bb*-0x1+0xb2*0x29+0x739+0.5)),_0x137530=(_0x4e742d(_0x8a74e>>>-0x14c5+0x1721+0x49*-0x8,-0x1*0x26+0x25c5+-0x2595)-(-0x123c+-0x610+0x2*0xc26+0.5))*_0x30467a,_0x48d478=(_0x4e742d(_0x8a74e>>>-0x22d1+0x18b*0x15+0x9d*0x4,0x1*0x824+-0x1f3e+0x1724)-(-0x1bf8*-0x1+0x1bd+0x1fb*-0xf+0.5))*_0x30467a,_0x3f988a=(_0x4e742d(_0x8a74e,-0x1f1d+0x4*-0x3fd+0x2f1b)-(-0x5bf*0x4+-0x25d+0x873*0x3+0.5))*_0x30467a,_0x53fa0f=Math['sqrt'](-0x1f84+0xf4e+-0x251*-0x7-(_0x137530*_0x137530+_0x48d478*_0x48d478+_0x3f988a*_0x3f988a));switch(_0x8a74e>>>0x2*-0x72+0x555+-0x453){case 0x1de8+-0x1a5b+-0x38d:_0x19a8a6['set'](_0x137530,_0x48d478,_0x3f988a,_0x53fa0f);break;case 0x2611+-0x13ca+-0x1246:_0x19a8a6['set'](_0x53fa0f,_0x48d478,_0x3f988a,_0x137530);break;case 0x22f0+0x1*0x8c1+-0x2baf:_0x19a8a6['set'](_0x48d478,_0x53fa0f,_0x3f988a,_0x137530);break;case 0x26af+0x25ba+-0x4c66:_0x19a8a6['set'](_0x48d478,_0x3f988a,_0x53fa0f,_0x137530);break;}},_0x5b3490=(_0x4c7c64,_0x377f2e,_0x4c3fc6)=>_0x4c7c64*(0x173b+-0x634*0x6+-0xdfe*-0x1-_0x4c3fc6)+_0x377f2e*_0x4c3fc6,_0x15fadd=[-0x53*-0x5a+-0x1986+-0x3a5,-0xa19+0x16be*0x1+-0xc9d,-0x1835+0x6d*-0xd+0x1dcd][_0x3f5243-(-0x2*0x102a+0x1*-0xb42+0x2b97)],_0x3d297b=-0x1e3f+-0x1a30+0x3875;this['read']=_0x52027d=>{const _0x3fdda8=Math['floor'](_0x52027d/(-0x5da+0x1a6*0xe+0x86*-0x1f))*_0x4be3ae;if(_0x8d5dcf&&(_0x664cca(_0x8d5dcf,_0x3e9cf9[_0x52027d*_0x3d297b+(-0xb84*-0x1+0x283*0xf+-0x31*0x101)]),_0x8d5dcf['x']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x157b+0x24c1*0x1+-0x2e*0x55)],_0x20e7bd[_0x3fdda8+(0x16fb+0x76*0x43+0x7a*-0x71)],_0x8d5dcf['x']),_0x8d5dcf['y']=_0x5b3490(_0x20e7bd[_0x3fdda8+(0x1160+0x1*0x1d4b+-0x21*0x16a)],_0x20e7bd[_0x3fdda8+(-0x6*-0x239+-0xb31+-0x221)],_0x8d5dcf['y']),_0x8d5dcf['z']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0xac+-0x1047+0x10f5)],_0x20e7bd[_0x3fdda8+(0x19dd*-0x1+0x1*0x207b+-0x699)],_0x8d5dcf['z'])),_0x20e1ad&&_0x489bf5(_0x20e1ad,_0x3e9cf9[_0x52027d*_0x3d297b+(-0x2*-0x991+-0x1*0x2629+-0x7*-0x2b8)]),_0x23cb94&&(_0x664cca(_0x23cb94,_0x3e9cf9[_0x52027d*_0x3d297b+(0x14b*-0x1e+0x8a4*0x1+0x1e28)]),_0x23cb94['x']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x10c0*-0x2+-0x21ee*-0x1+0x1678*-0x3)],_0x20e7bd[_0x3fdda8+(0x185c+0x1fde*-0x1+0x78b)],_0x23cb94['x']),_0x23cb94['y']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x1*-0x10ee+0x56*0x22+-0x1*0x1c53)],_0x20e7bd[_0x3fdda8+(-0x2393+-0x10*0x33+0x7*0x58b)],_0x23cb94['y']),_0x23cb94['z']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x4a9+0x2604+0x2153*-0x1)],_0x20e7bd[_0x3fdda8+(0x614+-0x1*-0x9d2+-0x1*0xfdb)],_0x23cb94['z'])),_0x52ec67&&(_0x2bd3ed(_0x52ec67,_0x3e9cf9[_0x52027d*_0x3d297b+(-0x1d*-0x12d+-0xe7b+-0x139b)]),_0x4be3ae>0x29*0x2d+-0xa8*0x7+-0x291&&(_0x52ec67['x']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x122a+-0x25cc+0x43*0xd6)],_0x20e7bd[_0x3fdda8+(-0x8f9+0x2*0x430+0xc*0xe)],_0x52ec67['x']),_0x52ec67['y']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x2f*0x1e+-0x1*0xe3d+0x13cc)],_0x20e7bd[_0x3fdda8+(-0x5e*-0x27+-0x1384+0x542)],_0x52ec67['y']),_0x52ec67['z']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x97b+-0x1229*-0x1+0x6*-0x170)],_0x20e7bd[_0x3fdda8+(0x2196+0x2486*0x1+-0x460b)],_0x52ec67['z']))),_0x5d08e0&&(_0x664cca(_0x5d08e0,_0x3e9cf9[_0x52027d*_0x3d297b+(0x2611*0x1+0x4*0x277+-0x5*0x995)]),_0x5d08e0['x']=_0x5b3490(_0x20e7bd[_0x3fdda8+(0x19*0x3b+-0x2277+0x1cc6)],_0x20e7bd[_0x3fdda8+(0x7f1+-0xbae+0x3*0x146)],_0x5d08e0['x']),_0x5d08e0['y']=_0x5b3490(_0x20e7bd[_0x3fdda8+(0x2*-0x501+-0xaaa+0x2f*0x71)],_0x20e7bd[_0x3fdda8+(0xc81+0x925*-0x2+-0x5df*-0x1)],_0x5d08e0['y']),_0x5d08e0['z']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x982*-0x1+0xeb5+-0x1823)],_0x20e7bd[_0x3fdda8+(-0x1*0x20b9+-0xfa4+-0x183a*-0x2)],_0x5d08e0['z'])),_0x590f55&&(_0x664cca(_0x590f55,_0x3e9cf9[_0x52027d*_0x3d297b+(0x1c5f+0xb6*0x17+0xb2d*-0x4)]),_0x590f55['x']=_0x5b3490(_0x20e7bd[_0x3fdda8+(-0x1*-0xc31+-0x1e1f+0x2*0x903)],_0x20e7bd[_0x3fdda8+(0x3*0x421+0x2257*-0x1+-0x469*-0x5)],_0x590f55['x']),_0x590f55['y']=_0x5b3490(_0x20e7bd[_0x3fdda8+(0x1*0x401+0x1a11+-0x1df8)],_0x20e7bd[_0x3fdda8+(0x3*-0x799+0xb*-0x101+0x21f1)],_0x590f55['y'])),_0x1c9918&&_0x3f5243>-0xfcb+-0x15*-0x1a7+-0x12e8){const _0x503cda=[_0x2bf983,_0x1823b1,_0x5c63da];for(let _0x41c1e3=-0xc5*0x2d+-0x7f6+0x2a97;_0x41c1e3<0x16f+0x134b+-0x14b7;++_0x41c1e3)for(let _0x5365bb=0x5fb+0x5*-0x616+0x1873;_0x5365bb<-0x1c5e+0x1b37*-0x1+0x37a4;++_0x5365bb)_0x1c9918[_0x41c1e3*(-0xc99+-0x2ec+0xf94)+_0x5365bb]=_0x5365bb<_0x15fadd?_0x503cda[_0x41c1e3][_0x52027d*(-0x193f+-0x3f*0x23+0x2*0x10f6)+_0x5365bb]*((0x1f82+-0x2b9+-0x1cc1)/(-0x6aa*-0x2+-0x26f*-0x5+0x20*-0xc4))-(-0xea3+-0x1*0x207d+0x2f24):0x9*-0x4d+-0x1950+0x1c05;}};}}self['onmessage']=async _0xf58ce5=>{const {data:_0x287084}=_0xf58ce5;switch(_0x287084['type']){case'initWorker':break;case'decompress':_0x2f19ed(_0x287084['numSplats'],_0x287084['chunkData'],_0x287084['chunkSize'],_0x287084['vertexData'],_0x287084['shData0'],_0x287084['shData1'],_0x287084['shData2'],_0x287084['shBands']);break;}};const _0x2f19ed=(_0x5c0c4e,_0x49d085,_0x450f6f,_0x23feaa,_0x1900d3,_0x58e058,_0x437b8e,_0x30acba)=>{const _0x257865=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'];if(_0x30acba>-0x162b+0xf5f+-0x1d*-0x3c){const _0x1e77bc=[];for(let _0x43d976=0x1853+-0xf75+-0x8de;_0x43d976<0xef8+0x18d*0x7+-0x1*0x19a6;++_0x43d976)_0x1e77bc['push']('f_rest_'+_0x43d976);_0x257865['splice'](_0x257865['indexOf']('f_dc_0')+(-0x1*-0x9a3+-0x1e27+-0x6d7*-0x3),-0x1*0xfb8+-0x2*-0x254+0x6*0x1d8,..._0x1e77bc);}const _0x103e29={};_0x257865['forEach'](_0x27441b=>{_0x103e29[_0x27441b]=new Float32Array(_0x5c0c4e);});const _0x1c0a9b=new _0x4b896b(),_0x10a7c1=new _0x10a456(),_0x58340b=new _0x4b896b(),_0x28ddc1=new _0xb41121(),_0x510390=new _0x4b896b(),_0x29183c=new _0x4b896b(),_0x52b96f=_0x30acba>0x10fd*0x1+-0x2*0x2b3+0x17*-0x81?new Float32Array(0xb38+0x9f7+-0x1502):null,_0x12fe98=new _0x4bb69a(_0x49d085,_0x450f6f,_0x23feaa,_0x1900d3,_0x58e058,_0x437b8e,_0x30acba,_0x1c0a9b,_0x10a7c1,_0x58340b,_0x28ddc1,_0x510390,_0x29183c,_0x52b96f);for(let _0x4484fe=-0x1a14+0x2051+-0x63d*0x1;_0x4484fe<_0x5c0c4e;++_0x4484fe)if(_0x12fe98['read'](_0x4484fe),_0x103e29['x'][_0x4484fe]=_0x1c0a9b['x'],_0x103e29['y'][_0x4484fe]=_0x1c0a9b['y'],_0x103e29['z'][_0x4484fe]=_0x1c0a9b['z'],_0x103e29['rot_1'][_0x4484fe]=_0x10a7c1['x'],_0x103e29['rot_2'][_0x4484fe]=_0x10a7c1['y'],_0x103e29['rot_3'][_0x4484fe]=_0x10a7c1['z'],_0x103e29['rot_0'][_0x4484fe]=_0x10a7c1['w'],_0x103e29['scale_0'][_0x4484fe]=_0x58340b['x'],_0x103e29['scale_1'][_0x4484fe]=_0x58340b['y'],_0x103e29['scale_2'][_0x4484fe]=_0x58340b['z'],_0x103e29['motion_0'][_0x4484fe]=_0x510390['x'],_0x103e29['motion_1'][_0x4484fe]=_0x510390['y'],_0x103e29['motion_2'][_0x4484fe]=_0x510390['z'],_0x103e29['t_scale'][_0x4484fe]=_0x29183c['x'],_0x103e29['t'][_0x4484fe]=_0x29183c['y'],_0x103e29['f_dc_0'][_0x4484fe]=(_0x28ddc1['x']-(-0x1518+0x1269+0x3*0xe5+0.5))/_0xa170a5,_0x103e29['f_dc_1'][_0x4484fe]=(_0x28ddc1['y']-(0x2559+0x1bc0+-0x4119+0.5))/_0xa170a5,_0x103e29['f_dc_2'][_0x4484fe]=(_0x28ddc1['z']-(-0x1*0x24fb+0xc3*0x1c+0xfa7+0.5))/_0xa170a5,_0x103e29['opacity'][_0x4484fe]=_0x28ddc1['w']<=-0xa12+-0xd58+0x176a?-(0xe8f*0x1+-0x21b3*0x1+0x4d3*0x4):_0x28ddc1['w']>=0x36d*0xb+0x10c0+-0x366e?-0x2*0x669+-0x1b*-0x132+0xf7*-0x14:-Math['log']((0x7f4+0xf7a+-0x176d)/_0x28ddc1['w']-(-0xd3*-0xc+0x1d0c+-0x26ef)),_0x52b96f){for(let _0x4c4ffa=0x2*0x31e+0x127f+-0x18bb;_0x4c4ffa<0x22bc+0x143+-0x23d2;++_0x4c4ffa)_0x103e29['f_rest_'+_0x4c4ffa][_0x4484fe]=_0x52b96f[_0x4c4ffa];}let _0x53f8a3={'x':_0x103e29['x'],'y':_0x103e29['y'],'z':_0x103e29['z'],'rot_1':_0x103e29['rot_1'],'rot_2':_0x103e29['rot_2'],'rot_3':_0x103e29['rot_3'],'rot_0':_0x103e29['rot_0'],'scale_0':_0x103e29['scale_0'],'scale_1':_0x103e29['scale_1'],'scale_2':_0x103e29['scale_2'],'motion_0':_0x103e29['motion_0'],'motion_1':_0x103e29['motion_1'],'motion_2':_0x103e29['motion_2'],'t_scale':_0x103e29['t_scale'],'t':_0x103e29['t'],'f_dc_0':_0x103e29['f_dc_0'],'f_dc_1':_0x103e29['f_dc_1'],'f_dc_2':_0x103e29['f_dc_2'],'opacity':_0x103e29['opacity']};_0x52b96f&&(_0x53f8a3={..._0x53f8a3,'f_rest_0':_0x103e29['f_rest_0'],'f_rest_1':_0x103e29['f_rest_1'],'f_rest_2':_0x103e29['f_rest_2'],'f_rest_3':_0x103e29['f_rest_3'],'f_rest_4':_0x103e29['f_rest_4'],'f_rest_5':_0x103e29['f_rest_5'],'f_rest_6':_0x103e29['f_rest_6'],'f_rest_7':_0x103e29['f_rest_7'],'f_rest_8':_0x103e29['f_rest_8'],'f_rest_9':_0x103e29['f_rest_9'],'f_rest_10':_0x103e29['f_rest_10'],'f_rest_11':_0x103e29['f_rest_11'],'f_rest_12':_0x103e29['f_rest_12'],'f_rest_13':_0x103e29['f_rest_13'],'f_rest_14':_0x103e29['f_rest_14'],'f_rest_15':_0x103e29['f_rest_15'],'f_rest_16':_0x103e29['f_rest_16'],'f_rest_17':_0x103e29['f_rest_17'],'f_rest_18':_0x103e29['f_rest_18'],'f_rest_19':_0x103e29['f_rest_19'],'f_rest_20':_0x103e29['f_rest_20'],'f_rest_21':_0x103e29['f_rest_21'],'f_rest_22':_0x103e29['f_rest_22'],'f_rest_23':_0x103e29['f_rest_23'],'f_rest_24':_0x103e29['f_rest_24'],'f_rest_25':_0x103e29['f_rest_25'],'f_rest_26':_0x103e29['f_rest_26'],'f_rest_27':_0x103e29['f_rest_27'],'f_rest_28':_0x103e29['f_rest_28'],'f_rest_29':_0x103e29['f_rest_29'],'f_rest_30':_0x103e29['f_rest_30'],'f_rest_31':_0x103e29['f_rest_31'],'f_rest_32':_0x103e29['f_rest_32'],'f_rest_33':_0x103e29['f_rest_33'],'f_rest_34':_0x103e29['f_rest_34'],'f_rest_35':_0x103e29['f_rest_35'],'f_rest_36':_0x103e29['f_rest_36'],'f_rest_37':_0x103e29['f_rest_37'],'f_rest_38':_0x103e29['f_rest_38'],'f_rest_39':_0x103e29['f_rest_39'],'f_rest_40':_0x103e29['f_rest_40'],'f_rest_41':_0x103e29['f_rest_41'],'f_rest_42':_0x103e29['f_rest_42'],'f_rest_43':_0x103e29['f_rest_43'],'f_rest_44':_0x103e29['f_rest_44']});const _0x58e4ce=Object['values'](_0x53f8a3)['map'](_0x1a8039=>_0x1a8039['buffer']);self['postMessag'+'e']({'type':'decompress'+'ed','data':_0x53f8a3},_0x58e4ce);};}class mN extends pe{constructor(){super(),h(this,'worker'),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+uN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x303589=>{if(!this['worker'])return;const {data:_0x78781}=_0x303589;switch(_0x78781['type']){case'decompress'+'ed':console['log']('decompress'+'ed'),this['fire']('decompress'+'ed',_0x78781['data']);break;}};}['decompress'](_0x383206,_0xfe397f,_0xd0d72b,_0x283a09,_0x2c76fd,_0x486996,_0x3e28ee,_0x44c27f){const _0x58b4f5=[_0xfe397f['buffer'],_0x283a09['buffer']];_0x2c76fd&&_0x58b4f5['push'](_0x2c76fd['buffer']),_0x486996&&_0x58b4f5['push'](_0x486996['buffer']),_0x3e28ee&&_0x58b4f5['push'](_0x3e28ee['buffer']),this['worker']['postMessag'+'e']({'type':'decompress','numSplats':_0x383206,'chunkData':_0xfe397f,'chunkSize':_0xd0d72b,'vertexData':_0x283a09,'shData0':_0x2c76fd,'shData1':_0x486996,'shData2':_0x3e28ee,'shBands':_0x44c27f},_0x58b4f5);}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}class pN{constructor(_0x1ed79d,_0x1808c0,_0x436286,_0xc53cdb,_0x123dac,_0x57560a,_0x434d02,_0x5ad964){const _0x70237f=(_0x39aef8,_0xebc1b8)=>{const _0x5de913=(-0xdef+0x91*0x18+-0xb*-0x8<<_0xebc1b8)-(0x6af*0x3+0x46*0x3+0x1*-0x14de);return(_0x39aef8&_0x5de913)/_0x5de913;},_0xd48fa1=(_0x7472f9,_0x18478a)=>{_0x7472f9['x']=_0x70237f(_0x18478a>>>0x1d96+-0xbf9*-0x3+0x1*-0x416c,-0x11*-0x1cf+-0x1*0xed5+0x11*-0xef),_0x7472f9['y']=_0x70237f(_0x18478a>>>0x12e*0x14+0xcc4+0x2451*-0x1,-0x10e8*-0x2+0x15f2+-0x37b8),_0x7472f9['z']=_0x70237f(_0x18478a,0x1c4e+-0x8b3+0x272*-0x8);},_0x271702=(_0x2136df,_0x422f05)=>{_0x2136df['x']=_0x70237f(_0x422f05>>>0x10df+-0x42*-0x6e+0x907*-0x5,-0x2*-0xa2e+0x14*-0xa9+-0x720),_0x2136df['y']=_0x70237f(_0x422f05>>>-0x1*-0x2ea+0x2377+0x241*-0x11,-0x20ed+-0x2dd*0x1+0x23d2),_0x2136df['z']=_0x70237f(_0x422f05>>>-0x2*0x1349+-0xf5f+0x151*0x29,0x1*-0x22af+-0x1f*0x3b+0x29dc),_0x2136df['w']=_0x70237f(_0x422f05,-0x1d+-0x22*0x31+0x1*0x6a7);},_0x357a1c=(_0xf41cb7,_0x230d8f)=>{const _0x407f8d=(-0xe7d*-0x1+0x209+0x1085*-0x1)/(Math['sqrt'](-0x22b2*-0x1+0x263+-0x2513)*(0x1e47+0x679*0x5+-0x13*0x34c+0.5)),_0xef76f3=(_0x70237f(_0x230d8f>>>0x195f*-0x1+0x1955+0x1e,0x3*0x1c1+0x1*0x180f+-0x1*0x1d48)-(-0x91e*-0x1+-0x1*-0x7f3+-0x1111+0.5))*_0x407f8d,_0x147967=(_0x70237f(_0x230d8f>>>0x10*0xb5+0x2*0xcb0+0x24a6*-0x1,-0xbaf*-0x2+0x17*0xff+-0x26f*0x13)-(0x6*0x123+-0x13bf+0xced+0.5))*_0x407f8d,_0x3f70e7=(_0x70237f(_0x230d8f,-0x7c8+-0x165b+-0x203*-0xf)-(0x17*-0x11d+-0x15c2+-0x61*-0x7d+0.5))*_0x407f8d,_0x3ca090=Math['sqrt'](-0x3*0x32b+-0x1*0x1d5d+0x26df-(_0xef76f3*_0xef76f3+_0x147967*_0x147967+_0x3f70e7*_0x3f70e7));switch(_0x230d8f>>>0xe5*-0x7+0x400+-0x57*-0x7){case 0x8ef*0x4+0x7f1+-0x2bad:_0xf41cb7['set'](_0xef76f3,_0x147967,_0x3f70e7,_0x3ca090);break;case-0x5e3*0x5+0x793+0xc1*0x1d:_0xf41cb7['set'](_0x3ca090,_0x147967,_0x3f70e7,_0xef76f3);break;case 0x2*0x107+0x582+-0x78e:_0xf41cb7['set'](_0x147967,_0x3ca090,_0x3f70e7,_0xef76f3);break;case 0x1*-0xaa1+-0x2af+0xd53:_0xf41cb7['set'](_0x147967,_0x3f70e7,_0x3ca090,_0xef76f3);break;}},_0x704fd9=(_0x6825e7,_0x2d88cc,_0x1a52ed)=>_0x6825e7*(0x9*0x38e+0x653*-0x6+-0x5f5*-0x1-_0x1a52ed)+_0x2d88cc*_0x1a52ed,{chunkData:_0x3e9315,chunkSize:_0x3e5547,vertexData:_0x1c882e,shData0:_0x2cb4e7,shData1:_0x42ac30,shData2:_0xca88d9,shBands:_0x5c8fed}=_0x1ed79d,_0x27c0ca=[0x1*-0x111f+0x56*0x3e+0x2*-0x1d9,0x274*-0x3+-0x1*0xd59+0x14bd,0x1a62+0x1fe7+0x101*-0x3a][_0x5c8fed-(-0x13a0+0xf10+-0x1*-0x491)],_0x4009fb=0xf*-0x10+-0x1*0xdb9+0xeaf;this['read']=_0x309b47=>{const _0x5c4d57=Math['floor'](_0x309b47/(0x1560+-0x9ac+-0x112*0xa))*_0x3e5547;if(_0x1808c0&&(_0xd48fa1(_0x1808c0,_0x1c882e[_0x309b47*_0x4009fb+(0x1c49+0x1190+-0x2dd9)]),_0x1808c0['x']=_0x704fd9(_0x3e9315[_0x5c4d57+(0x37c+0x61*-0xd+0x171)],_0x3e9315[_0x5c4d57+(0x14aa+-0xd99*-0x1+-0x2240)],_0x1808c0['x']),_0x1808c0['y']=_0x704fd9(_0x3e9315[_0x5c4d57+(0x6cc+0x3f9+0xd4*-0xd)],_0x3e9315[_0x5c4d57+(-0x11b*-0x17+0x10f0+-0x2a59)],_0x1808c0['y']),_0x1808c0['z']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0x8e0+-0x79*-0x1+0x869)],_0x3e9315[_0x5c4d57+(-0x86*-0x31+0x12e0+-0x2c81)],_0x1808c0['z'])),_0x436286&&_0x357a1c(_0x436286,_0x1c882e[_0x309b47*_0x4009fb+(0x23e0+-0x53*0x37+0x905*-0x2)]),_0xc53cdb&&(_0xd48fa1(_0xc53cdb,_0x1c882e[_0x309b47*_0x4009fb+(0x4c*0x11+-0x3f*-0x71+-0x20d9)]),_0xc53cdb['x']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0x1*-0xfa3+-0x1114+0x177)],_0x3e9315[_0x5c4d57+(0x1*0xbcb+-0x1*0x10ad+0x1*0x4eb)],_0xc53cdb['x']),_0xc53cdb['y']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0x39b*0xa+0x8ef*0x3+0x3*0x318)],_0x3e9315[_0x5c4d57+(0x19e8+-0x1cde+-0x6*-0x80)],_0xc53cdb['y']),_0xc53cdb['z']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0x1*0xff5+0x1cb1+-0x3*0x43c)],_0x3e9315[_0x5c4d57+(-0xd4f+-0xf13+0x1c6d)],_0xc53cdb['z'])),_0x123dac&&(_0x271702(_0x123dac,_0x1c882e[_0x309b47*_0x4009fb+(0xa1*0xe+-0x1d*-0x11f+-0x294e*0x1)]),_0x3e5547>-0x421+0x10ae+-0xc81&&(_0x123dac['x']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0x29e+0x2e*0x95+-0x607*0x4)],_0x3e9315[_0x5c4d57+(-0x1*0x1884+-0xdf*0x28+0x3b6b)],_0x123dac['x']),_0x123dac['y']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0xd81+-0x149f+0x222d)],_0x3e9315[_0x5c4d57+(0x2*-0x337+-0x2349+0x1d1*0x17)],_0x123dac['y']),_0x123dac['z']=_0x704fd9(_0x3e9315[_0x5c4d57+(0x238*0x2+0x1f7e+-0x23e0)],_0x3e9315[_0x5c4d57+(0x209f*-0x1+0x16*-0xae+0x2fa4)],_0x123dac['z']))),_0x57560a&&(_0xd48fa1(_0x57560a,_0x1c882e[_0x309b47*_0x4009fb+(0x6c7+0x16ee*0x1+-0x1db1)]),_0x57560a['x']=_0x704fd9(_0x3e9315[_0x5c4d57+(0x11*0xa9+-0x15ee+-0xac7*-0x1)],_0x3e9315[_0x5c4d57+(0x5*0xb9+-0x23b+-0x14d)],_0x57560a['x']),_0x57560a['y']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0xe*-0x6d+0x17f3+-0x1dd6)],_0x3e9315[_0x5c4d57+(-0x36f+0xda1+0x1*-0xa1c)],_0x57560a['y']),_0x57560a['z']=_0x704fd9(_0x3e9315[_0x5c4d57+(0x1905+0xef*-0x9+-0x108a)],_0x3e9315[_0x5c4d57+(0x1316+-0x6b6+-0xc49)],_0x57560a['z'])),_0x434d02&&(_0xd48fa1(_0x434d02,_0x1c882e[_0x309b47*_0x4009fb+(0x16fc+-0x1403*-0x1+-0x1*0x2afa)]),_0x434d02['x']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0x1cad+-0x2706+0x43cb)],_0x3e9315[_0x5c4d57+(0x15e9+-0x1730*0x1+0x160)],_0x434d02['x']),_0x434d02['y']=_0x704fd9(_0x3e9315[_0x5c4d57+(-0xd1*0x9+0x7c4+-0x51)],_0x3e9315[_0x5c4d57+(0x20c3+0x1d*0x89+-0x302d)],_0x434d02['y'])),_0x5ad964&&_0x5c8fed>0x2*-0x176+-0x3d*-0x8e+-0x1*0x1eea){const _0x1ce715=[_0x2cb4e7,_0x42ac30,_0xca88d9];for(let _0x4a21dd=0x1ded+-0x79*-0x2c+-0x32b9;_0x4a21dd<-0x1a5f*0x1+-0x1c1*-0x1+0x18a1;++_0x4a21dd)for(let _0x4e8bc8=0x16f7+-0xf33*0x1+-0x2*0x3e2;_0x4e8bc8<0x2282+0x113d*0x1+-0x1*0x33b0;++_0x4e8bc8)_0x5ad964[_0x4a21dd*(0xc9b*0x1+0x2078+-0x2b*0x10c)+_0x4e8bc8]=_0x4e8bc8<_0x27c0ca?_0x1ce715[_0x4a21dd][_0x309b47*(0x1*0x2141+0x1*-0x1d5d+-0x3d4)+_0x4e8bc8]*((-0x1d3+-0x1943+0x1b1e)/(-0x1d62+0x2*0x1c6+0x1ad5))-(-0x2bc+-0x16*0x7a+0x1*0xd3c):0x5cf*-0x2+-0x254e+0x30ec;}};}}class _N{constructor(){h(this,'numSplats'),h(this,'comments'),h(this,'chunkData'),h(this,'vertexData'),h(this,'is4D'),h(this,'shData0'),h(this,'shData1'),h(this,'shData2'),h(this,'shBands');}['createIter'](_0xda4b41,_0x25ff47,_0x49f6ee,_0x2cfe61,_0x237b98,_0x2a4069,_0xb49591){return new pN(this,_0xda4b41,_0x25ff47,_0x49f6ee,_0x2cfe61,_0x237b98,_0x2a4069,_0xb49591);}['calcAabb'](_0x2e869c){const {chunkData:_0x4111f5,numChunks:_0x1f04f7,chunkSize:_0x396bc8}=this;let _0x3d96cd=Math['exp'](Math['max'](_0x4111f5[0x1e6a+-0xc97*-0x3+-0x319*0x16],_0x4111f5[0x130b+-0x837*-0x1+-0x1b38],_0x4111f5[-0x1*-0x9b6+0x125c+0x59b*-0x5])),_0x446101=_0x4111f5[0x3ad*-0x1+0xc21+-0x21d*0x4]-_0x3d96cd,_0x32300e=_0x4111f5[-0x2c4+0xb*-0x42+0x59b]-_0x3d96cd,_0x3ca623=_0x4111f5[0x5*-0x2+-0x2515+0x2521]-_0x3d96cd,_0x2fbd17=_0x4111f5[0xf75+-0x3*-0xb2d+-0x6ff*0x7]+_0x3d96cd,_0x535c39=_0x4111f5[0xd65+0x1a7e+-0xad*0x3b]+_0x3d96cd,_0x3a3e17=_0x4111f5[0xc*-0xd5+0x9a*-0x1a+0x19a5]+_0x3d96cd;for(let _0x29a9ed=0x6b*-0x1+-0x10*-0x1cf+0x92*-0x32;_0x29a9ed<_0x1f04f7;++_0x29a9ed){const _0x2680ea=_0x29a9ed*_0x396bc8;_0x3d96cd=Math['exp'](Math['max'](_0x4111f5[_0x2680ea+(-0x13d4+0x1c3*0xd+-0x30a)],_0x4111f5[_0x2680ea+(-0x1*-0x1dfd+0x26*-0x107+-0x917*-0x1)],_0x4111f5[_0x2680ea+(-0x1147+-0x2*-0x406+0x946)])),_0x446101=Math['min'](_0x446101,_0x4111f5[_0x2680ea+(-0xf95*-0x2+0x196*-0x1+-0x1d94)]-_0x3d96cd),_0x32300e=Math['min'](_0x32300e,_0x4111f5[_0x2680ea+(-0x33*-0x86+-0xb*-0x341+-0x3e7c)]-_0x3d96cd),_0x3ca623=Math['min'](_0x3ca623,_0x4111f5[_0x2680ea+(-0x1d84+-0x1ce0+0x1*0x3a66)]-_0x3d96cd),_0x2fbd17=Math['max'](_0x2fbd17,_0x4111f5[_0x2680ea+(-0x2352+-0x2*-0x8bf+-0x1*-0x11d7)]+_0x3d96cd),_0x535c39=Math['max'](_0x535c39,_0x4111f5[_0x2680ea+(-0x22db*0x1+-0x44*0x4+0x23ef)]+_0x3d96cd),_0x3a3e17=Math['max'](_0x3a3e17,_0x4111f5[_0x2680ea+(0x2*0x89b+-0x1c1*0x12+0xe61)]+_0x3d96cd);}return _0x2e869c['center']['set']((_0x446101+_0x2fbd17)*(0x3*-0x7ed+-0x1c7*-0xa+0x1d*0x35+0.5),(_0x32300e+_0x535c39)*(-0x1b95+0x6f8+0x3*0x6df+0.5),(_0x3ca623+_0x3a3e17)*(-0x232c+0x19b4+0x978+0.5)),_0x2e869c['halfExtent'+'s']['set']((_0x2fbd17-_0x446101)*(0x3*-0x851+-0xf47+0x283a+0.5),(_0x535c39-_0x32300e)*(0x85*-0x1d+0x1*-0x2311+0x3222+0.5),(_0x3a3e17-_0x3ca623)*(0x1*-0xa7f+0xd*0xe9+-0x2*0xab+0.5)),!(0x6b*0x7+-0xf84+-0xc97*-0x1);}['getCenters'](_0x1b3c2b){const {vertexData:_0x4ea9de,chunkData:_0x35c4d5,numChunks:_0x3a72c3,chunkSize:_0x5974e4}=this;let _0x5aa71d,_0x3f48b2,_0x39bf2d,_0x33e9ea,_0x7f00ff,_0x3e971a;for(let _0x2d6410=0x973+-0x3*0xb5a+0x189b;_0x2d6410<_0x3a72c3;++_0x2d6410){const _0x3c2a00=_0x2d6410*_0x5974e4;_0x5aa71d=_0x35c4d5[_0x3c2a00+(0x185a+0xfb*0x4+-0x1c46)],_0x3f48b2=_0x35c4d5[_0x3c2a00+(-0x583*0x6+0x1475*0x1+0xc9e)],_0x39bf2d=_0x35c4d5[_0x3c2a00+(0x1b6b+0x13cb+-0x13e*0x26)],_0x33e9ea=_0x35c4d5[_0x3c2a00+(-0x56e*0x6+-0xfb*0x1f+-0xfbf*-0x4)],_0x7f00ff=_0x35c4d5[_0x3c2a00+(-0x153e+-0xd*-0x1c8+-0x1e6)],_0x3e971a=_0x35c4d5[_0x3c2a00+(-0x43d+-0x1cbb+0x1*0x20fd)];const _0x340a15=Math['min'](this['numSplats'],(_0x2d6410+(-0x32e+-0x137*-0xb+0x1*-0xa2e))*(-0xbb7*0x3+-0x5f*-0x32+-0x4f*-0x39));for(let _0x156814=_0x2d6410*(-0x1be+0xd9*0x13+-0xd5d);_0x156814<_0x340a15;++_0x156814){const _0x2c3975=_0x4ea9de[_0x156814*(-0x25b4+-0x1*0x1042+0x15*0x292)],_0x2ce352=(_0x2c3975>>>0xfd2+0x5f8*-0x3+0x22b)/(0x9*0x397+-0x2301+0x187*0x7),_0x45a57b=(_0x2c3975>>>0x3*0x892+0x6*0x5ae+-0x3bbf&-0x918+-0x32b*-0x9+-0xf6c)/(-0x853+0x2*-0x123d+0x56c*0x9),_0x48b857=(_0x2c3975&-0x6d*0x43+0xa9a+0x1*0x19ec)/(-0x11fa+-0xa93+0x248c);_0x1b3c2b[_0x156814*(-0x1ac3+-0x1c80+-0xa*-0x587)+(-0x3f2+-0x9*-0x3b3+0x1d59*-0x1)]=(0x179b+0x2b*0x67+-0x28e7-_0x2ce352)*_0x5aa71d+_0x2ce352*_0x33e9ea,_0x1b3c2b[_0x156814*(-0x76e+0x22b7+-0x1b46)+(0x9*0x13f+0xaa6+-0x577*0x4)]=(-0x2564+-0xa*-0x1eb+0x1237-_0x45a57b)*_0x3f48b2+_0x45a57b*_0x7f00ff,_0x1b3c2b[_0x156814*(-0x110f+0x9*-0x272+0x2714)+(0x5*0x530+0x1a48+-0x1a1b*0x2)]=(0x405*-0x4+0x25aa+-0x1595-_0x48b857)*_0x39bf2d+_0x48b857*_0x3e971a;}}}['getChunks'](_0x433067){const {chunkData:_0x62323e,numChunks:_0xf86cd4,chunkSize:_0x14f41c}=this;let _0x119e43,_0x53f141,_0x11c4fb,_0x5aed6c,_0x45c5cc,_0x185681;for(let _0x3a3147=0xb7e*-0x3+-0x19*-0xa8+0x606*0x3;_0x3a3147<_0xf86cd4;++_0x3a3147){const _0x168ea2=_0x3a3147*_0x14f41c;_0x119e43=_0x62323e[_0x168ea2+(-0x101f+-0x2*-0x551+0x57d*0x1)],_0x53f141=_0x62323e[_0x168ea2+(-0x3*-0x105+-0x15b9+0x1*0x12ab)],_0x11c4fb=_0x62323e[_0x168ea2+(-0x1*-0xbdb+-0xb37+-0x2*0x51)],_0x5aed6c=_0x62323e[_0x168ea2+(-0x175c*-0x1+0x47e+0x1bd7*-0x1)],_0x45c5cc=_0x62323e[_0x168ea2+(0xf18+-0x11a5*0x2+0xa1b*0x2)],_0x185681=_0x62323e[_0x168ea2+(-0x2*-0xae1+0x80+-0x163d)],_0x433067[_0x3a3147*(0x197f+-0x2f*0x5d+-0x2*0x433)+(0x3*0xb7e+-0x140c+-0xe6e)]=_0x119e43,_0x433067[_0x3a3147*(0x2*0x3c5+-0xa07+0x283)+(0x1d61+0x5f5+-0x3*0xbc7)]=_0x53f141,_0x433067[_0x3a3147*(-0x2642+0x21d5*0x1+0x473)+(-0x13ad+-0x269*-0x1+0x1146)]=_0x11c4fb,_0x433067[_0x3a3147*(0x177f*0x1+-0x90a+-0x1*0xe6f)+(-0xe31+0x92+0x2ba*0x5)]=_0x5aed6c,_0x433067[_0x3a3147*(0x1e7e+-0x151+-0x1d27*0x1)+(-0x277*-0x7+-0x1d67+0x6*0x207)]=_0x45c5cc,_0x433067[_0x3a3147*(-0x1e*-0x7+0xde0+-0xeac)+(-0xea3*0x1+0x1*-0x95d+0x1805)]=_0x185681;}}['calcFocalP'+'oint'](_0x3ed84d){const {chunkData:_0x219824,numChunks:_0x1148b8,chunkSize:_0xc01149}=this;_0x3ed84d['x']=-0x25e4+-0x1660+0x3c44,_0x3ed84d['y']=-0x1233*-0x1+0x7*0x7d+-0x159e,_0x3ed84d['z']=-0x400+-0xa2*0xd+0xc3a;for(let _0xe2f3c5=0xd*0x239+-0x1c84+0x1*-0x61;_0xe2f3c5<_0x1148b8;++_0xe2f3c5){const _0x55e220=_0xe2f3c5*_0xc01149;_0x3ed84d['x']+=_0x219824[_0x55e220+(0x161*-0x19+0x4*-0x4ed+-0x43*-0xcf)]+_0x219824[_0x55e220+(-0xa3d+-0x1*0xcd1+0x1711)],_0x3ed84d['y']+=_0x219824[_0x55e220+(-0x1d*-0xd7+-0x1*0x20d7+-0x29*-0x35)]+_0x219824[_0x55e220+(-0x53f*0x5+0x1aca+-0x8b)],_0x3ed84d['z']+=_0x219824[_0x55e220+(0x17*0x10d+0x1*-0x8d3+-0x12e*0xd)]+_0x219824[_0x55e220+(0x15d*-0xd+-0xa3*0x1+0x1261)];}_0x3ed84d['mulScalar']((-0x9fe+0x1ef*-0xa+0x1d54*0x1+0.5)/_0x1148b8);}get['isCompress'+'ed'](){return!(-0x2340+0x1552+0x1*0xdee);}get['numChunks'](){return Math['ceil'](this['numSplats']/(-0xf7e*0x1+-0x9*-0x279+-0x5c3));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}async['decompress'](){const _0x143e20=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'],{shBands:_0x133db3}=this;if(_0x133db3>-0xdd9+-0x1102+-0xa49*-0x3){const _0x1d228d=[];for(let _0x268106=-0xbec*0x3+-0x51+-0x3*-0xc07;_0x268106<0x243f+0x1727*-0x1+-0xceb;++_0x268106)_0x1d228d['push']('f_rest_'+_0x268106);_0x143e20['splice'](_0x143e20['indexOf']('f_dc_0')+(-0x1596+0x115f*-0x2+0x39*0xfd),0x2469+-0x3e5*0x5+-0x21e*0x8,..._0x1d228d);}const _0x2489a4=new mN();return _0x2489a4['decompress'](this['numSplats'],this['chunkData'],this['chunkSize'],this['vertexData'],this['shData0'],this['shData1'],this['shData2'],this['shBands']),new Promise((_0x3072ef,_0x17350a)=>{_0x2489a4['on']('decompress'+'ed',_0x56b4f3=>{_0x2489a4['destroy'](),_0x3072ef(new Dn([{'name':'vertex','count':this['numSplats'],'properties':_0x143e20['map'](_0x25a506=>({'type':'float','name':_0x25a506,'storage':_0x56b4f3[_0x25a506],'byteSize':0x4}))}],this['comments']));});});}}async function gN(){const _0x11d339='super4d-ca'+'che-v1',_0x371dae={'maxAge':0x9a7ec800,'maxSize':0x280000000},_0x5c5b48=new Uint8Array([-0xd5*-0x9+-0x3*-0x33e+0x35b*-0x5,-0x18e9+0x360+0x1*0x15f5,0x49*0x1a+0xafb*-0x3+0x1a00,-0xdb7*-0x2+-0x17*-0xc1+-0x2cbb]),_0x55cfb1=new Uint8Array([0x1*-0x717+0x2576+0x5*-0x611,0x1d5*-0x15+-0xfb+0x27d9,0x9c+0xbf7*-0x2+-0xa0*-0x26,0x5e*0x24+0x4ab*-0x7+-0x13d9*-0x1,0x1*-0x26bc+0x1220+-0x29*-0x83,-0x1761+0x25*-0x29+0xedb*0x2,-0x7e3+-0x17d4+-0x807*-0x4,-0x1a66+0x1f19+-0x229*0x2,-0x1f5e+-0x1a02+0x39c4*0x1,-0x5ba*0x2+0x189a+0x28d*-0x5,0x39*0x83+-0x460+0x1859*-0x1,-0x1b27+-0x2*0x112e+-0x7*-0x8cb]),_0x48e687=0xd*-0xc9+-0x1cab+0x4dc*0x8+0.28209479177387814,_0x2ef3ab=new Map([['char',Int8Array],['uchar',Uint8Array],['short',Int16Array],['ushort',Uint16Array],['int',Int32Array],['uint',Uint32Array],['float',Float32Array],['double',Float64Array]]);class _0x5212b6{constructor(_0x4f9deb={}){this['options']={..._0x371dae,..._0x4f9deb},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0xa*-0x3b3+0x14b4+0x104a,this['initialize'+'d']=!(-0x91c+-0x216*0x8+0x19cd);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x11d339);const _0x4bd3e0=await this['cache']['keys'](),_0x3533b7=[];for(const _0x2122c3 of _0x4bd3e0){const _0x570764=_0x2122c3['url'],_0x11a62b=await this['cache']['match'](_0x570764);if(_0x11a62b){const _0x2b3756=(await _0x11a62b['blob']())['size'],_0x288cd1=_0x11a62b['headers']['get']('x-cache-ti'+'me');_0x288cd1&&_0x3533b7['push']({'url':_0x570764,'size':_0x2b3756,'cacheTime':parseInt(_0x288cd1)});}}_0x3533b7['sort']((_0x4773aa,_0x3a0350)=>_0x4773aa['cacheTime']-_0x3a0350['cacheTime']);for(const _0xe72284 of _0x3533b7)this['cacheSizes']['set'](_0xe72284['url'],_0xe72284['size']),this['currentSiz'+'e']+=_0xe72284['size'],this['lruList']['push'](_0xe72284['url']);}catch(_0x2e962b){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x2e962b);}this['initialize'+'d']=!(0xdcb+-0x20*0x1f+-0x9eb*0x1);}}async['get'](_0x1b9612){if(await this['init'](),!this['cache'])return null;try{const _0x2c27ed=await this['cache']['match'](_0x1b9612);if(!_0x2c27ed)return null;const _0x5d7f69=_0x2c27ed['headers']['get']('x-cache-ti'+'me');return _0x5d7f69&&Date['now']()-parseInt(_0x5d7f69)>this['options']['maxAge']?(await this['delete'](_0x1b9612),null):(this['updateLRU'](_0x1b9612),_0x2c27ed);}catch{return null;}}async['set'](_0x5777fc,_0x1e85d5){if(!(!this['cache']||_0x5777fc['startsWith']('blob:')))try{const _0x19b154=_0x1e85d5['clone'](),_0x359788=await _0x19b154['blob'](),_0x4e2f85=_0x359788['size'];this['currentSiz'+'e']+_0x4e2f85>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x4e2f85);const _0x560716=new Headers(_0x19b154['headers']);_0x560716['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x5aa541=new Response(_0x359788,{'status':_0x19b154['status'],'statusText':_0x19b154['statusText'],'headers':_0x560716});await this['cache']['put'](_0x5777fc,_0x5aa541),this['cacheSizes']['set'](_0x5777fc,_0x4e2f85),this['currentSiz'+'e']+=_0x4e2f85,this['updateLRU'](_0x5777fc);}catch(_0x26ad10){console['error']('Cache\x20set\x20'+'error:',_0x26ad10);}}['updateLRU'](_0x5082e1){const _0x314590=this['lruList']['indexOf'](_0x5082e1);_0x314590>-(-0x5b3*0x6+0xf3f+0x12f4)&&this['lruList']['splice'](_0x314590,-0x3ae*-0x8+-0x1a8*0x1+-0x1*0x1bc7),this['lruList']['push'](_0x5082e1);}async['cleanupSpa'+'ce'](_0x52f265){const _0x3ed9a9=this['options']['maxSize']*(0x148+0x50*-0x76+0x2398+0.9);if(!(this['currentSiz'+'e']<=_0x3ed9a9))for(;this['lruList']['length']>-0x15dc+0x1e2*0x4+-0x1c*-0x83&&this['currentSiz'+'e']>_0x3ed9a9;){const _0x157478=this['lruList']['shift']();_0x157478&&await this['delete'](_0x157478);}}async['delete'](_0x1b7132){if(this['cache'])try{await this['cache']['delete'](_0x1b7132);const _0x3b2239=this['cacheSizes']['get'](_0x1b7132)||-0x1*-0x1b03+0xa*-0x368+0x70d;this['currentSiz'+'e']-=_0x3b2239,this['cacheSizes']['delete'](_0x1b7132);const _0x5e9dca=this['lruList']['indexOf'](_0x1b7132);_0x5e9dca>-(-0x219*-0x12+-0x191e+0x5*-0x287)&&this['lruList']['splice'](_0x5e9dca,-0x17*0x7b+-0x177a+0x2288);}catch(_0x4d4a03){console['error']('Cache\x20dele'+'te\x20error:',_0x4d4a03);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x55cea2=>Promise['all'](_0x55cea2['map'](_0xb02e94=>{var _0x4ba6ca;return(_0x4ba6ca=this['cache'])==null?void(-0x1d39+0x6a7+-0xd6*-0x1b):_0x4ba6ca['delete'](_0xb02e94);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x2c8*-0x2+-0xef1+-0x7*-0x157;}catch(_0x5aeaa7){console['error']('Cache\x20clea'+'r\x20error:',_0x5aeaa7);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x1352+0x1*0x1f3f+-0x2b*0x47;}}class _0x7306cb{constructor(_0xa2dcd9=[],_0x4c4c60={}){this['cacheManag'+'er']=new _0x5212b6(_0x4c4c60['cache']),this['retryCount']=_0x4c4c60['retryCount']||-0x2f*-0x5b+0x44f+-0x1501,this['retryDelay']=_0x4c4c60['retryDelay']||-0x25ba+0x35e*-0x1+0x2b0c,this['maxConcurr'+'ency']=_0x4c4c60['maxConcurr'+'ency']||0x3*-0x5e9+-0x806+0x1*0x19c3,this['downloadQu'+'eue']=_0xa2dcd9,this['isProcessi'+'ngDownload'+'Queue']=!(-0x1*0xc05+0x2d7*0x6+-0x504),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0x1*0x128f+-0x2359*-0x1+-0x10ca);this['downloadQu'+'eue']['length']>-0x15b9+-0x1b*0xe3+0x2daa;)try{const _0x5366ca=this['downloadQu'+'eue']['splice'](-0x6*-0x3e0+-0x21c1+-0x1*-0xa81,this['maxConcurr'+'ency'])['map'](_0x5b6899=>{if(!this['pendingRes'+'ponses']['has'](_0x5b6899)){const _0x911924=this['download'](_0x5b6899);return this['pendingRes'+'ponses']['set'](_0x5b6899,_0x911924),_0x911924['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x5b6899);});}return Promise['resolve']();});await Promise['all'](_0x5366ca);}catch(_0x5af80a){console['error']('Download\x20e'+'rror:',_0x5af80a);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x199*-0x12+0x1*0x22e7+-0x54*0xc2);}}}async['fetch'](_0x35c92c,_0x482943={}){if(this['pendingRes'+'ponses']['has'](_0x35c92c))return this['pendingRes'+'ponses']['get'](_0x35c92c);const {forceRefresh:_0x3bc59a=!(0x2*0xeb9+-0x1*-0x1349+-0x30ba),..._0xab1488}=_0x482943;this['pendingRes'+'ponses']['set'](_0x35c92c,this['download'](_0x35c92c,_0xab1488));const _0x25d9fb=await this['pendingRes'+'ponses']['get'](_0x35c92c);return this['pendingRes'+'ponses']['delete'](_0x35c92c),_0x25d9fb;}async['download'](_0x24a43c,_0x49329e={}){var _0xea01b5;await((_0xea01b5=this['cacheManag'+'er'])==null?void(0x2676+-0x925+-0x18b*0x13):_0xea01b5['init']());const {forceRefresh:_0x231d95=!(0x37f+0xb*-0x1fc+0x1256),..._0x5d6f1d}=_0x49329e;_0x231d95&&await this['cacheManag'+'er']['delete'](_0x24a43c);const _0x4e3d06=await this['cacheManag'+'er']['get'](_0x24a43c);if(_0x4e3d06)return _0x4e3d06;let _0x16cf16;for(let _0x3b72bb=0x672+0x241*-0x7+0x1*0x955;_0x3b72bb<this['retryCount'];_0x3b72bb++)try{const _0x331eb1=await fetch(_0x24a43c,_0x5d6f1d);if(!_0x331eb1['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x331eb1['status']);return await this['cacheManag'+'er']['set'](_0x24a43c,_0x331eb1),_0x331eb1;}catch(_0x3e5080){console['error']('Download\x20e'+'rror:',_0x3e5080),_0x16cf16=_0x3e5080,_0x3b72bb<this['retryCount']-(-0x2635+-0x2448+0x4a7e)&&await new Promise(_0x43ff63=>setTimeout(_0x43ff63,this['retryDelay']*(_0x3b72bb+(0x1bac+-0x1fe1+0x436))));}throw _0x16cf16;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){this['cacheManag'+'er']['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(0x2324+0x1630+-0x3953*0x1),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0xbc71c8{constructor(){this['numSplats']=-0x3bf*0x9+0x2562+-0x3ab,this['comments']=[],this['chunkData']=new Float32Array(-0x1d1f+0x1*0x233+0x1aec),this['vertexData']=new Uint32Array(0x7e0+-0x80c+0x2c),this['is4D']=!(-0x95e+-0x181+0xadf),this['shBands']=0xaac+0x1d69+-0x2815,this['shData0']=new Uint8Array(0x1bf*0x1+0x1*-0x191b+0x5c*0x41),this['shData1']=new Uint8Array(-0xd4b+0x1*0x425+0x926),this['shData2']=new Uint8Array(-0x15c3+-0x264c+0x1405*0x3),this['elements']=[],this['isCompress'+'ed']=!(-0xdb7*-0x1+-0xf+-0xda8);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x213+-0x21af*-0x1+-0x1*0x22c2));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}}class _0xff73cb{constructor(_0x29b7e2,_0x1dd1e7=[]){this['elements']=_0x29b7e2,this['comments']=_0x1dd1e7,this['isCompress'+'ed']=!(-0x73*-0x13+0x93a*0x1+-0x1*0x11c2);}}class _0x5c3d2b{constructor(_0x565304,_0x5237bf){this['reader']=_0x565304,this['progressFu'+'nc']=_0x5237bf,this['head']=0x153+0x233+0x29*-0x16,this['tail']=0xfc7+-0x179d+0x7d6;}async['read'](){var _0x5bb5a5;const {value:_0x10fb5c,done:_0x111d1d}=await this['reader']['read']();if(_0x111d1d)throw new Error('Stream\x20fin'+'ished\x20befo'+'re\x20end\x20of\x20'+'header');this['push'](_0x10fb5c),(_0x5bb5a5=this['progressFu'+'nc'])==null||_0x5bb5a5['call'](this,_0x10fb5c['byteLength']);}['push'](_0x4b43dc){if(!this['data'])this['data']=_0x4b43dc,this['view']=new DataView(this['data']['buffer']),this['tail']=_0x4b43dc['length'];else{const _0xd2e122=this['tail']-this['head'],_0x52dcd8=_0xd2e122+_0x4b43dc['length'];if(this['data']['length']>=_0x52dcd8)this['head']>0x263+-0x4*-0x24a+0x5*-0x24f?(this['data']['copyWithin'](0x1*-0x17c4+-0x115d+0x2921,this['head'],this['tail']),this['data']['set'](_0x4b43dc,_0xd2e122),this['head']=0x17f1+0x1f37+-0x3728,this['tail']=_0x52dcd8):(this['data']['set'](_0x4b43dc,this['tail']),this['tail']+=_0x4b43dc['length']);else{const _0x541c9d=new Uint8Array(_0x52dcd8);this['head']>0x256a*-0x1+-0x2359*-0x1+0x211||this['tail']<this['data']['length']?_0x541c9d['set'](this['data']['subarray'](this['head'],this['tail']),-0x7*0x13+0x1d6e+0x1*-0x1ce9):_0x541c9d['set'](this['data'],0x26d0+-0xdf1+-0x18df*0x1),_0x541c9d['set'](_0x4b43dc,_0xd2e122),this['data']=_0x541c9d,this['view']=new DataView(this['data']['buffer']),this['head']=0x1156*-0x1+0x90a+0x2c4*0x3,this['tail']=_0x52dcd8;}}}['compact'](){this['head']>-0x807+-0x49f+-0x653*-0x2&&(this['data']['copyWithin'](-0x194e+-0xc61+-0x1*-0x25af,this['head'],this['tail']),this['tail']-=this['head'],this['head']=-0xe98+-0x1*0x177b+0x2613);}get['remaining'](){return this['tail']-this['head'];}['getInt8'](){const _0x5b161f=this['view']['getInt8'](this['head']);return this['head']++,_0x5b161f;}['getUint8'](){const _0x57e234=this['view']['getUint8'](this['head']);return this['head']++,_0x57e234;}['getInt16'](){const _0x3d3da0=this['view']['getInt16'](this['head'],!(0xd9*0x26+0x10cb+0xc1*-0x41));return this['head']+=0x22*0x49+-0x280*0x2+0xa*-0x78,_0x3d3da0;}['getUint16'](){const _0x1c19a1=this['view']['getUint16'](this['head'],!(-0x12d0+0x26bc+-0xc*0x1a9));return this['head']+=-0xd7c+-0x5e*0x9+-0x2*-0x866,_0x1c19a1;}['getInt32'](){const _0xe41b18=this['view']['getInt32'](this['head'],!(0x25a9+-0xbab+-0x19fe));return this['head']+=0xb*-0x1a+-0x1f*0x139+0x1*0x2709,_0xe41b18;}['getUint32'](){const _0x68ed93=this['view']['getUint32'](this['head'],!(-0x23be+-0x846+0x2c04));return this['head']+=0x21+0x33d*-0x1+0x32*0x10,_0x68ed93;}['getFloat32'](){const _0x3ff8b7=this['view']['getFloat32'](this['head'],!(0x1*-0x1ab+-0x2b*0xa7+0x13d*0x18));return this['head']+=-0x3*0x39+-0x2009*-0x1+-0x1f5a,_0x3ff8b7;}['getFloat64'](){const _0x5cdaea=this['view']['getFloat64'](this['head'],!(0x7a*-0x2e+-0xa8d*0x2+0x2b06));return this['head']+=0x1*0x1195+0x122a+-0x23b7,_0x5cdaea;}}class _0x154ad4{constructor(_0x34bb8e,_0xc2e6e3,_0x31760d){this['x']=_0x34bb8e,this['y']=_0xc2e6e3,this['z']=_0x31760d;}}class _0x16d01b{constructor(_0x21bc1e,_0x55ad3a,_0x5305c3,_0x574537){this['x']=_0x21bc1e,this['y']=_0x55ad3a,this['z']=_0x5305c3,this['w']=_0x574537;}}class _0x26c30b{constructor(_0x45ac8e,_0x20bbd8,_0x483be4,_0x26657e){this['x']=_0x45ac8e,this['y']=_0x20bbd8,this['z']=_0x483be4,this['w']=_0x26657e;}['set'](_0xa94c56,_0x3113df,_0x40c52f,_0x6e87fb){this['x']=_0xa94c56,this['y']=_0x3113df,this['z']=_0x40c52f,this['w']=_0x6e87fb;}}class _0x17a435{constructor(_0x14106b,_0x3af2b0,_0x16c146,_0x6370c9,_0x43a65e,_0x2171fe,_0x3f84c7,_0x907d4,_0x30b254,_0x5e3ca0,_0x5bf439,_0x15a2e8,_0x34c006,_0x35f911){const _0x5c2b16=(_0x13eab6,_0x1f8f0f)=>{const _0x5d025e=(0x4c3+-0x440*-0x4+-0x15c2<<_0x1f8f0f)-(0x3*0x58a+0x18d3+-0x2970);return(_0x13eab6&_0x5d025e)/_0x5d025e;},_0x591eac=(_0x1403f2,_0x464f91)=>{_0x1403f2['x']=_0x5c2b16(_0x464f91>>>0x1*-0x1682+0x235*0x9+0x2ba,-0x26e4+0x11f8+0x14f7),_0x1403f2['y']=_0x5c2b16(_0x464f91>>>0x1131+0x7f1*0x2+-0x1c*0x12e,-0x1f*0x12d+0x517*-0x6+0x4307),_0x1403f2['z']=_0x5c2b16(_0x464f91,-0x7f2+-0x1381*-0x1+-0xb84);},_0x1a15a4=(_0x53feb4,_0x500dc1)=>{_0x53feb4['x']=_0x5c2b16(_0x500dc1>>>0x56f+0xd*-0x2ab+0x139*0x18,-0xfb3+-0x1*0x6d+-0x2*-0x814),_0x53feb4['y']=_0x5c2b16(_0x500dc1>>>-0x177*0x9+0x14*-0x169+-0x1*-0x2973,-0x24fe+-0x2441+0x4947),_0x53feb4['z']=_0x5c2b16(_0x500dc1>>>0x7*-0x3f3+0x234a*-0x1+-0x3ef7*-0x1,0x9*-0x35c+-0x7*-0x27d+0xcd9),_0x53feb4['w']=_0x5c2b16(_0x500dc1,0xc87+-0x986+-0x2f9);},_0xac8371=(_0x52d470,_0x44b1f6)=>{const _0x4eeeb8=(-0x24ea+0x2*0x1357+0x1c3*-0x1)/(Math['sqrt'](0x136b*-0x1+-0x1*0x228a+0x5ff*0x9)*(-0x4*-0x221+-0x1e94+0x1610+0.5)),_0x2cf3df=(_0x5c2b16(_0x44b1f6>>>-0x3*0x866+-0x113e+0x2a84*0x1,0x209c+-0xf6+-0x1f9c*0x1)-(-0x2*0x689+-0x83*-0x2+0x303*0x4+0.5))*_0x4eeeb8,_0x4571cd=(_0x5c2b16(_0x44b1f6>>>0x921+-0x1*-0x1202+-0x1*0x1b19,0x192c*-0x1+-0x1d4c+-0x1*-0x3682)-(-0xc1e+0x1e96+-0x1278+0.5))*_0x4eeeb8,_0x515bf4=(_0x5c2b16(_0x44b1f6,0x1daf*-0x1+0x1815+-0x4*-0x169)-(-0x11b0+-0x635*0x3+0xa9*0x37+0.5))*_0x4eeeb8,_0x2d5f22=Math['sqrt'](0x1*-0x1987+-0x2*-0x3d0+-0x8f4*-0x2-(_0x2cf3df*_0x2cf3df+_0x4571cd*_0x4571cd+_0x515bf4*_0x515bf4));switch(_0x44b1f6>>>-0x109*0xe+0x55*-0x16+0x15ea){case-0x2*-0x7ae+0x7ac+-0xb84*0x2:_0x52d470['set'](_0x2cf3df,_0x4571cd,_0x515bf4,_0x2d5f22);break;case 0x1d*-0x8b+0x1ba*-0x4+-0x122*-0x14:_0x52d470['set'](_0x2d5f22,_0x4571cd,_0x515bf4,_0x2cf3df);break;case-0x3*0x9d3+0x1*-0x599+0x2314:_0x52d470['set'](_0x4571cd,_0x2d5f22,_0x515bf4,_0x2cf3df);break;case 0x7c2*-0x1+-0xf04+-0x133*-0x13:_0x52d470['set'](_0x4571cd,_0x515bf4,_0x2d5f22,_0x2cf3df);break;}},_0x4a908e=(_0x9f22a6,_0x299aa7,_0x33863a)=>_0x9f22a6*(-0x1*-0x133f+0x22b9+-0x35f7-_0x33863a)+_0x299aa7*_0x33863a,_0x11722b=[-0x3f8*-0x2+-0x3*-0x129+0x8*-0x16d,0x1e01+0x1ebb*0x1+-0x22b*0x1c,-0x1*0x1a2f+-0x24d5+0xf1*0x43][_0x3f84c7-(0x18ff+-0x1980+0x82)],_0x1a6b0b=-0x4*0x7cd+0x2*-0x6fb+0x1698*0x2;this['read']=_0x453a37=>{const _0x15029b=Math['floor'](_0x453a37/(-0x1cce*0x1+0x13*0x1bd+-0x113*0x3))*_0x3af2b0;if(_0x907d4&&(_0x591eac(_0x907d4,_0x16c146[_0x453a37*_0x1a6b0b+(0xecc*-0x1+-0x16d1+0x259d*0x1)]),_0x907d4['x']=_0x4a908e(_0x14106b[_0x15029b+(0x173a+0x2*-0x103f+0x1*0x944)],_0x14106b[_0x15029b+(0x4*-0x3b7+-0x1*-0x1283+0x3a4*-0x1)],_0x907d4['x']),_0x907d4['y']=_0x4a908e(_0x14106b[_0x15029b+(0x29a+-0xeaf+0x5b*0x22)],_0x14106b[_0x15029b+(0x11ac+-0xee7+-0x2c1)],_0x907d4['y']),_0x907d4['z']=_0x4a908e(_0x14106b[_0x15029b+(0x1*-0x31f+-0x2a4+0x5c5)],_0x14106b[_0x15029b+(0x47c+-0xa6*0x20+-0x1*-0x1049)],_0x907d4['z'])),_0x30b254&&_0xac8371(_0x30b254,_0x16c146[_0x453a37*_0x1a6b0b+(-0xdac+0x11e4*0x1+-0x53*0xd)]),_0x5e3ca0&&(_0x591eac(_0x5e3ca0,_0x16c146[_0x453a37*_0x1a6b0b+(-0x2261+-0x1*-0xdd2+-0x195*-0xd)]),_0x5e3ca0['x']=_0x4a908e(_0x14106b[_0x15029b+(0x112e+0x24d6+0x1aff*-0x2)],_0x14106b[_0x15029b+(0x1abb+-0x1b7*-0x8+-0x286a)],_0x5e3ca0['x']),_0x5e3ca0['y']=_0x4a908e(_0x14106b[_0x15029b+(-0x18b*-0x6+0x2*0x106f+-0x2a19*0x1)],_0x14106b[_0x15029b+(-0x23e3*-0x1+-0x4c*-0x4f+-0x3b4d)],_0x5e3ca0['y']),_0x5e3ca0['z']=_0x4a908e(_0x14106b[_0x15029b+(0x1c14*0x1+0x15b*0x1+0x1d67*-0x1)],_0x14106b[_0x15029b+(-0x949+-0x1*0xd96+-0x2*-0xb75)],_0x5e3ca0['z'])),_0x5bf439&&(_0x1a15a4(_0x5bf439,_0x16c146[_0x453a37*_0x1a6b0b+(-0x18fc+-0x1*0x1489+-0x16c4*-0x2)]),_0x3af2b0>0x52a+-0x957+0x2f*0x17&&(_0x5bf439['x']=_0x4a908e(_0x14106b[_0x15029b+(-0xd*-0x86+0x681+-0xd43)],_0x14106b[_0x15029b+(0x2*-0x823+0x1b7a+-0xb25*0x1)],_0x5bf439['x']),_0x5bf439['y']=_0x4a908e(_0x14106b[_0x15029b+(-0x9cf+0x752*0x3+-0xc1a*0x1)],_0x14106b[_0x15029b+(-0x2009+0x1c1f+0x2*0x1fd)],_0x5bf439['y']),_0x5bf439['z']=_0x4a908e(_0x14106b[_0x15029b+(-0x981+0x1e33+-0x14a4*0x1)],_0x14106b[_0x15029b+(0x57*0x27+-0x1cd4+0xfa4)],_0x5bf439['z']))),_0x15a2e8&&(_0x591eac(_0x15a2e8,_0x16c146[_0x453a37*_0x1a6b0b+(-0x1*0x1741+0x5c*-0x28+-0x25a5*-0x1)]),_0x15a2e8['x']=_0x4a908e(_0x14106b[_0x15029b+(-0x13ea+-0x1abb+0x2eb7)],_0x14106b[_0x15029b+(-0x133d+0x5c7+-0xd8b*-0x1)],_0x15a2e8['x']),_0x15a2e8['y']=_0x4a908e(_0x14106b[_0x15029b+(0x18dc+0x17*-0x18a+-0x13*-0x8f)],_0x14106b[_0x15029b+(0x1*0x13af+-0xd7f+-0x1*0x61a)],_0x15a2e8['y']),_0x15a2e8['z']=_0x4a908e(_0x14106b[_0x15029b+(0x34e+0x1eb7+0x21f1*-0x1)],_0x14106b[_0x15029b+(-0x1ac6*-0x1+-0x1*-0xf95+-0x2a44)],_0x15a2e8['z'])),_0x34c006&&(_0x591eac(_0x34c006,_0x16c146[_0x453a37*_0x1a6b0b+(0x919*-0x2+0xd28+0x50f)]),_0x34c006['x']=_0x4a908e(_0x14106b[_0x15029b+(-0x238*-0x6+0x1*0x2100+0x2*-0x171c)],_0x14106b[_0x15029b+(0x24f3+-0x290+-0x224a)],_0x34c006['x']),_0x34c006['y']=_0x4a908e(_0x14106b[_0x15029b+(0x1c9*-0x1+-0x209*-0x1+-0x26)],_0x14106b[_0x15029b+(0x1e3+0x9e0+0x2ea*-0x4)],_0x34c006['y'])),_0x35f911&&_0x3f84c7>-0x83b+-0x1f*-0x104+-0x1*0x1741){const _0x5d20c7=[_0x6370c9,_0x43a65e,_0x2171fe];for(let _0x1d6342=0x17b*-0x17+-0x2*0x12d6+0x47b9;_0x1d6342<-0x194b*0x1+0xad4+0xe7a;++_0x1d6342)for(let _0x27644d=-0x371*0x2+-0x2*-0x104e+-0xb2*0x25;_0x27644d<-0x1f6f+0x4df*0x6+0x244;++_0x27644d)_0x35f911[_0x1d6342*(0x3eb+-0x1dbe+0x19e2)+_0x27644d]=_0x27644d<_0x11722b?_0x5d20c7[_0x1d6342][_0x453a37*(0xe*0x179+-0x2633+0x11a5)+_0x27644d]*((-0x13*-0x29+0x29d*0x6+-0x12b1)/(-0x1*-0x269f+-0x17b3*-0x1+-0x1*0x3d53))-(-0x1847+0x1855+-0x2*0x5):-0x5c0+0x26b2+-0x20f2;}};}}self['onmessage']=async _0x3243b5=>{var _0x21ec26,_0x236ca4,_0x3373c5;const {data:_0x2aa821}=_0x3243b5;switch(_0x2aa821['type']){case'initWorker':globalThis['loadUrlLis'+'t']=_0x2aa821['loadUrlLis'+'t'],globalThis['fetchWorke'+'r']=new _0x7306cb(globalThis['loadUrlLis'+'t']);break;case'destroyWor'+'ker':(_0x21ec26=globalThis['fetchWorke'+'r'])==null||_0x21ec26['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['loadUrlLis'+'t']=[];break;case'loadPly':const {url:_0x3c2921,decompress:_0xfdfc57}=_0x2aa821;try{globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x7306cb(globalThis['loadUrlLis'+'t']));const _0x5e5e06=await globalThis['fetchWorke'+'r']['fetch'](_0x3c2921);if(!_0x5e5e06||!_0x5e5e06['body'])self['postMessag'+'e']({'type':'error','data':'Error\x20load'+'ing\x20resour'+'ce','url':_0x3c2921});else{const _0x1215c7=parseInt(_0x5e5e06['headers']['get']('content-le'+'ngth')??'0',-0x1c29+-0x1*0xbda+0x280d*0x1);self['postMessag'+'e']({'type':'totalLengt'+'h','totalLength':_0x1215c7,'bytes':0x0,'url':_0x3c2921});let _0x369fd5=await _0x45d542(_0x5e5e06['body']['getReader'](),_0x2869f4=>{self['postMessag'+'e']({'type':'progress','bytes':_0x2869f4,'totalLength':_0x1215c7,'url':_0x3c2921});});if(_0xfdfc57&&_0x369fd5['isCompress'+'ed']){const _0x34e37c=_0xe5894f(_0x369fd5),_0x2cdd2c=(_0x236ca4=_0x34e37c==null?void(0x164f+-0x1*-0x16a9+-0xb3e*0x4):_0x34e37c['elements'][-0x25*0xa9+0x173b+-0x6*-0x33])==null?void(0x4b9+-0x1531*-0x1+-0x19ea):_0x236ca4['properties']['map'](_0x29c2a5=>_0x29c2a5['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x34e37c,'url':_0x3c2921},_0x2cdd2c);}else{if(_0x369fd5['isCompress'+'ed']){const _0x1ebaf5=['chunkData','vertexData'];_0x369fd5['shData0']&&_0x1ebaf5['push']('shData0','shData1','shData2');const _0x107084=_0x1ebaf5['map'](_0x1a0c51=>{var _0x59bc8a;return(_0x59bc8a=_0x369fd5[_0x1a0c51])==null?void(0x1e*-0x93+0x823*-0x1+0x195d*0x1):_0x59bc8a['buffer'];});self['postMessag'+'e']({'type':'splatData','data':_0x369fd5,'url':_0x3c2921},_0x107084);}else{_0x369fd5=_0x260f1c(_0x369fd5);const _0x43a3e2=(_0x3373c5=_0x369fd5==null?void(-0x1a7a+0x11a5+-0x7*-0x143):_0x369fd5['elements'][-0x156f+0x63f+0xf30])==null?void(-0x1*0x1862+-0x3*-0xa7+0x166d):_0x3373c5['properties']['map'](_0x1e768a=>_0x1e768a['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x369fd5,'url':_0x3c2921},_0x43a3e2);}}}}catch(_0x218bb8){self['postMessag'+'e']({'type':'error','data':_0x218bb8['message'],'url':_0x3c2921});}break;}};const _0x260f1c=_0x494232=>{var _0x128c35;const _0x58d1f0=(_0x128c35=_0x494232==null?void(-0x260f+0x2359+0x2b6):_0x494232['elements'][-0x16c+0x23b5+-0x2249])==null?void(-0x27*0xf8+-0x17*0x79+0x1*0x30a7):_0x128c35['properties']['find'](_0x331957=>_0x331957['name']==='opacity');if(_0x58d1f0){for(let _0x5060ca=0x1bc4+0x238d+-0x3f51;_0x5060ca<_0x58d1f0['storage']['length'];_0x5060ca++)_0x58d1f0['storage'][_0x5060ca]=(0xd11+-0x405*-0x4+-0x1d24)/(0x1925+0x1*-0x1619+-0x30b+Math['exp'](-_0x58d1f0['storage'][_0x5060ca]));}return _0x494232;},_0x2117dc=_0x3dd6aa=>{const _0x2e2912=[],_0x4fb1fd=[];let _0x24a2ba;for(let _0x130b78=-0x3ee*0x8+-0xd98+-0x15*-0x225;_0x130b78<_0x3dd6aa['length'];++_0x130b78){const _0x325b54=_0x3dd6aa[_0x130b78]['split']('\x20');switch(_0x325b54[0x1dc5+0x1*-0x1625+-0xf4*0x8]){case'comment':_0x4fb1fd['push'](_0x325b54['slice'](-0x19c7*0x1+-0xe5*-0x13+0x8c9)['join']('\x20'));break;case'format':_0x24a2ba=_0x325b54[0x11d6+0x1*-0x15b5+0x4*0xf8];break;case'element':_0x2e2912['push']({'name':_0x325b54[0x14b9+-0x478+0x1040*-0x1],'count':parseInt(_0x325b54[-0x189f+-0x316*-0x4+-0x11*-0xb9],0x1c49+-0x1*0x25b2+0x1*0x973),'properties':[]});break;case'property':{if(!_0x2ef3ab['has'](_0x325b54[0x12b0+0x2483+-0x3732]))throw new Error('Unrecogniz'+'ed\x20propert'+'y\x20data\x20typ'+'e\x20\x27'+_0x325b54[0x2421*0x1+0x2191+-0x45b1]+('\x27\x20in\x20ply\x20h'+'eader'));_0x2e2912[_0x2e2912['length']-(0x47*-0x5+-0x266b+0x27cf)]['properties']['push']({'type':_0x325b54[-0x7*0x2b+0x1*0x38f+-0x261],'name':_0x325b54[-0x8*0x17f+0xcd5*-0x3+0x3*0x10d3],'storage':null,'byteSize':_0x2ef3ab['get'](_0x325b54[0x917+0x20c4+-0x29da])['BYTES_PER_'+'ELEMENT']});break;}default:throw new Error('Unrecogniz'+'ed\x20header\x20'+'value\x20\x27'+_0x325b54[0xaf*-0x25+0x4*0x20c+-0x111b*-0x1]+('\x27\x20in\x20ply\x20h'+'eader'));}}return{'elements':_0x2e2912,'format':_0x24a2ba,'comments':_0x4fb1fd};},_0x54d96e=_0x416546=>{const _0x487b19=['min_x','min_y','min_z','max_x','max_y','max_z','min_scale_'+'x','min_scale_'+'y','min_scale_'+'z','max_scale_'+'x','max_scale_'+'y','max_scale_'+'z','min_r','min_g','min_b','max_r','max_g','max_b','min_motion'+'_x','min_motion'+'_y','min_motion'+'_z','max_motion'+'_x','max_motion'+'_y','max_motion'+'_z','min_time_s'+'cale','max_time_s'+'cale','min_time','max_time'],_0x5cb357=['packed_pos'+'ition','packed_rot'+'ation','packed_sca'+'le','packed_col'+'or','packed_mot'+'ion','packed_tim'+'e'],_0x4260a7=new Array(-0x10*-0x25f+-0x1*0x12b5+0x65a*-0x3)['fill']('')['map']((_0x273c0e,_0x5d944f)=>'f_rest_'+_0x5d944f),_0x2ac267=()=>_0x416546[0x98*0xd+-0xc5b+0x4a3]['name']==='chunk'&&_0x416546[-0x229*-0x4+0x6a9+0x1*-0xf4d]['properties']['every']((_0x14d4c3,_0x367415)=>_0x14d4c3['name']===_0x487b19[_0x367415]&&_0x14d4c3['type']==='float')&&_0x416546[0xf0f+-0xa6*0x1+-0xe68]['name']==='vertex'&&_0x416546[0x55f*-0x1+0xe71+-0x911]['properties']['every']((_0x4a8b18,_0x175b57)=>_0x4a8b18['name']===_0x5cb357[_0x175b57]&&_0x4a8b18['type']==='uint'),_0x78960f=()=>_0x416546[0xd97+-0xbe7+-0x1ae]['name']==='sh'&&[-0x1*-0x11e3+-0x43*-0x73+-0x997*0x5,-0x1742+-0x3c0+0x2*0xd8d,-0x1*0x23d3+0x1*0x95+-0x1*-0x236b]['indexOf'](_0x416546[-0x20f0+0x25ba+-0x4c8]['properties']['length'])!==-(-0x229*0x8+0x2232+0x3*-0x5a3)&&_0x416546[0x3ba+0x12c2+-0x167a]['properties']['every']((_0x755cf3,_0x3e2e60)=>_0x755cf3['name']===_0x4260a7[_0x3e2e60]&&_0x755cf3['type']==='uchar');return _0x416546['length']===0x9ac+0xc71+0x161b*-0x1&&_0x2ac267()||_0x416546['length']===0x2*-0xa2e+-0x2017+-0x316*-0x11&&_0x2ac267()&&_0x78960f();},_0x320f01=_0x4f04be=>_0x4f04be['length']===-0x1*-0x18df+-0x1*-0x199d+-0x1*0x327b&&_0x4f04be[-0x1429+-0x1cad*0x1+0x30d6]['name']==='vertex'&&_0x4f04be[-0x9b*0x1f+-0x188d+0x1*0x2b52]['properties']['every'](_0x3804e0=>_0x3804e0['type']==='float'),_0x3799b5=async(_0x181a91,_0x40b6c4,_0x33333f)=>{const _0x4c5924=new _0xbc71c8();_0x4c5924['comments']=_0x33333f;const _0x2cdc02=_0x40b6c4[0xcca*-0x1+-0x4b*0x61+0x2935]['count'],_0x27db32=_0x40b6c4[-0xb8c+-0x1f03+0x2a8f]['properties']['length'],_0x34455e=_0x40b6c4[0x1d*0x1d+0x206e+-0x23b6]['count'],_0x5a3941=_0x40b6c4[0x3d3*-0x1+0x4ea*0x1+-0x116]['properties']['some'](_0x3edb14=>_0x3edb14['name']==='packed_tim'+'e'),_0xa85359=(_0x453920=>{const _0x3e97bb=Math['ceil'](Math['sqrt'](_0x453920)),_0x53d952=Math['ceil'](_0x453920/_0x3e97bb);return _0x3e97bb*_0x53d952;})(_0x34455e);_0x4c5924['numSplats']=_0x34455e,_0x4c5924['is4D']=_0x5a3941,_0x4c5924['chunkData']=new Float32Array(_0x2cdc02*_0x27db32),_0x4c5924['vertexData']=new Uint32Array(_0xa85359*(-0x8e0+-0x1a58+0x233e));const _0x27a78f=async(_0x81095b,_0x24e12b)=>{const _0x16908b=new Uint8Array(_0x81095b);let _0xab4178=-0x1*0x10e7+-0x1ea+0x12d1;for(;_0xab4178<_0x24e12b;){for(;_0x181a91['remaining']===-0xa3b+0x2b*-0x67+0x1b88;)await _0x181a91['read']();const _0x41d854=Math['min'](_0x24e12b-_0xab4178,_0x181a91['remaining']),_0x4236b5=_0x181a91['data'];for(let _0x150890=0x45f*0x4+-0x1be*-0x4+-0x61d*0x4;_0x150890<_0x41d854;++_0x150890)_0x16908b[_0xab4178++]=_0x4236b5[_0x181a91['head']++];}};if(await _0x27a78f(_0x4c5924['chunkData']['buffer'],_0x2cdc02*_0x27db32*(-0x21c0+0x209+0x1fbb)),await _0x27a78f(_0x4c5924['vertexData']['buffer'],_0x34455e*(0xe89+0x1a35+-0x28b8)*(-0x4df+-0x1*0xf2b+0x140e)),_0x40b6c4['length']===0x15b2+0x3*0x1f7+-0x1b94){const _0x51625d=_0xa85359*(0x1*0x1525+0x2479+0x35*-0x116),_0x2e2419=new Uint8Array(_0x51625d),_0x169a79=new Uint8Array(_0x51625d),_0x1d98f1=new Uint8Array(_0x51625d),_0x13c1d7=-0x10b1+0x22d*0xa+-0x111,_0xd50b4c=_0x40b6c4[0xe*0x2ab+0x6*-0x669+0xd*0x16]['properties']['length']/(0xa73+-0x5d2+-0xc5*0x6),_0x415f6e=new Uint8Array(_0x13c1d7*_0xd50b4c*(0x16d+-0x763+0x5f9));for(let _0x59ad0e=0x1251*0x2+0x1e50+0xd1*-0x52;_0x59ad0e<_0x4c5924['numSplats'];_0x59ad0e+=_0x13c1d7){const _0x87a19=Math['min'](_0x13c1d7,_0x4c5924['numSplats']-_0x59ad0e);await _0x27a78f(_0x415f6e['buffer'],_0x87a19*_0xd50b4c*(0x15f0+-0x4*0x2b3+0x1*-0xb21));for(let _0x1cd497=-0x817*0x2+0x120a+-0x1dc;_0x1cd497<_0x87a19;++_0x1cd497)for(let _0x32a7e3=-0x2003+0x2*-0x383+0x2709;_0x32a7e3<0xca9+-0x35*0x1+0x1*-0xc65;++_0x32a7e3){const _0xdbec70=(_0x59ad0e+_0x1cd497)*(0x1494+0x5c5+-0x1a49*0x1)+_0x32a7e3;_0x32a7e3<_0xd50b4c?(_0x2e2419[_0xdbec70]=_0x415f6e[(_0x1cd497*(-0x170a+0x113e*0x1+0x5cf)+(0x1*0x15a6+0x24c6+-0x3a6c))*_0xd50b4c+_0x32a7e3],_0x169a79[_0xdbec70]=_0x415f6e[(_0x1cd497*(-0x14e8+-0x2af+0x9f*0x26)+(0x1434+-0x65*0x20+-0x793))*_0xd50b4c+_0x32a7e3],_0x1d98f1[_0xdbec70]=_0x415f6e[(_0x1cd497*(-0x26aa+-0x955*-0x1+0x1*0x1d58)+(0x1d1e+0x5*0x21e+-0x1*0x27b2))*_0xd50b4c+_0x32a7e3]):(_0x2e2419[_0xdbec70]=0x244d*0x1+-0x57+0x1*-0x2377,_0x169a79[_0xdbec70]=-0x2102+0x136a+0xe17,_0x1d98f1[_0xdbec70]=-0x112d+-0x33*-0x51+0x189);}}_0x4c5924['shData0']=_0x2e2419,_0x4c5924['shData1']=_0x169a79,_0x4c5924['shData2']=_0x1d98f1,_0x4c5924['shBands']={0x3:0x1,0x8:0x2,0xf:0x3}[_0xd50b4c];}else _0x4c5924['shBands']=0x1d52+0x16f4+-0x3446;return _0x4c5924;},_0xccb3b=async(_0x3ce948,_0x10f83d,_0x2dbac0)=>{const _0x6fa22b=_0x10f83d[-0xdf*0x9+-0xd*0x250+0x25e7],_0x3fb3b8=_0x6fa22b['properties'],_0x436722=_0x3fb3b8['length'],_0x1238a9=_0x3fb3b8['map'](_0x2f62f3=>_0x2f62f3['storage']),_0x1ef847=_0x3fb3b8['reduce']((_0x361edb,_0x3e8201)=>_0x361edb+_0x3e8201['byteSize'],-0x7fa*0x3+-0x1f77+-0x3*-0x1277);let _0x4a619c=0x1311+-0x1f*-0x129+-0x3708,_0x5bc58d;const _0x1587a5=()=>{const _0x51e9d7=_0x3ce948['data']['buffer'];(_0x5bc58d==null?void(0x16e8+-0x39*0x2f+-0xc71):_0x5bc58d['buffer'])!==_0x51e9d7&&(_0x5bc58d=new Float32Array(_0x51e9d7,-0x16ed+0x7bb*-0x1+0x1ea8,_0x51e9d7['byteLength']/(0x2*0x1085+0x119f+-0xa21*0x5)));};for(_0x1587a5();_0x4a619c<_0x6fa22b['count'];){for(;_0x3ce948['remaining']<_0x1ef847;)await _0x3ce948['read'](),_0x1587a5();const _0x5bd569=Math['min'](_0x6fa22b['count']-_0x4a619c,Math['floor'](_0x3ce948['remaining']/_0x1ef847));for(let _0x156503=0x19c+0x36d*0x2+-0x876;_0x156503<_0x436722;++_0x156503){const _0x45fe7a=_0x1238a9[_0x156503];for(let _0x2ced17=0x3bb*-0x1+-0x294+0x64f;_0x2ced17<_0x5bd569;++_0x2ced17)_0x45fe7a[_0x2ced17+_0x4a619c]=_0x5bc58d[_0x2ced17*_0x436722+_0x156503];}_0x4a619c+=_0x5bd569,_0x3ce948['head']+=_0x5bd569*_0x1ef847;}return new _0xff73cb(_0x10f83d,_0x2dbac0);},_0x5bb6fb=async(_0x924672,_0x1e54a1,_0x2e25ab)=>{for(let _0x34a6fb=0x13f7+0x35f*0x2+-0x2b*0x9f;_0x34a6fb<_0x1e54a1['length'];++_0x34a6fb){const _0x45bb3b=_0x1e54a1[_0x34a6fb],_0x435094=_0x45bb3b['properties']['reduce']((_0x53777e,_0x578781)=>_0x53777e+_0x578781['byteSize'],0xc6b+0x1*-0x71f+0x3*-0x1c4),_0x33e009=_0x45bb3b['properties']['map'](_0x31fc44=>{if(_0x31fc44['storage'])switch(_0x31fc44['type']){case'char':return(_0x49946e,_0xa61e82)=>{_0x31fc44['storage'][_0xa61e82]=_0x49946e['getInt8']();};case'uchar':return(_0x4942d0,_0x1292b2)=>{_0x31fc44['storage'][_0x1292b2]=_0x4942d0['getUint8']();};case'short':return(_0x1dbf96,_0x14195f)=>{_0x31fc44['storage'][_0x14195f]=_0x1dbf96['getInt16']();};case'ushort':return(_0x1bd831,_0x11158a)=>{_0x31fc44['storage'][_0x11158a]=_0x1bd831['getUint16']();};case'int':return(_0x1c0fe9,_0x442e16)=>{_0x31fc44['storage'][_0x442e16]=_0x1c0fe9['getInt32']();};case'uint':return(_0x1166fa,_0x40c8d1)=>{_0x31fc44['storage'][_0x40c8d1]=_0x1166fa['getUint32']();};case'float':return(_0xdf539c,_0x530b3d)=>{_0x31fc44['storage'][_0x530b3d]=_0xdf539c['getFloat32']();};case'double':return(_0x5537fd,_0x1a0ab3)=>{_0x31fc44['storage'][_0x1a0ab3]=_0x5537fd['getFloat64']();};default:throw new Error('Unsupporte'+'d\x20property'+'\x20data\x20type'+'\x20\x27'+_0x31fc44['type']+('\x27\x20in\x20ply\x20h'+'eader'));}else return _0x3a63f4=>{_0x3a63f4['head']+=_0x31fc44['byteSize'];};});let _0x2a4c54=0x2093+0xdbd+0xb94*-0x4;for(;_0x2a4c54<_0x45bb3b['count'];){for(;_0x924672['remaining']<_0x435094;)await _0x924672['read']();const _0x23006b=Math['min'](_0x45bb3b['count']-_0x2a4c54,Math['floor'](_0x924672['remaining']/_0x435094));for(let _0x837c00=0x3ae*-0x3+0x28*-0x2c+0x11ea;_0x837c00<_0x23006b;++_0x837c00){for(let _0x45eca=0xcfb+0x1676+0x1*-0x2371;_0x45eca<_0x45bb3b['properties']['length'];++_0x45eca)_0x33e009[_0x45eca](_0x924672,_0x2a4c54);_0x2a4c54++;}}}return new _0xff73cb(_0x1e54a1,_0x2e25ab);},_0x45d542=async(_0x463f8f,_0x5e7e73=null)=>{const _0x428a37=(_0x30a75e,_0x360727)=>{const _0x10c68b=_0x30a75e['length']-_0x360727['length'];let _0x582a59,_0x1915d7;for(_0x582a59=-0x167d+-0x2369+0x39e6;_0x582a59<=_0x10c68b;++_0x582a59){for(_0x1915d7=0x4*-0x920+-0x1*-0x21c7+-0x29*-0x11;_0x1915d7<_0x360727['length']&&_0x30a75e[_0x582a59+_0x1915d7]===_0x360727[_0x1915d7];++_0x1915d7);if(_0x1915d7===_0x360727['length'])return _0x582a59;}return-(-0x9e8*0x3+-0x5ae+0x2367);},_0x21d8c0=(_0x156a57,_0x40c8e1)=>{if(_0x156a57['length']<_0x40c8e1['length'])return!(-0x141e+-0x1*-0x86f+0x16*0x88);for(let _0x4815a5=0x25*0x80+-0x56*-0x27+-0x2*0xfcd;_0x4815a5<_0x40c8e1['length'];++_0x4815a5)if(_0x156a57[_0x4815a5]!==_0x40c8e1[_0x4815a5])return!(0xe3+-0x13e3+0x5*0x3cd);return!(-0x6*-0x5+0x25*-0x1+0x7);},_0xe54688=new _0x5c3d2b(_0x463f8f,_0x5e7e73);let _0x5dbc89;for(;;){if(await _0xe54688['read'](),_0xe54688['tail']>=_0x5c5b48['length']&&!_0x21d8c0(_0xe54688['data'],_0x5c5b48))throw new Error('Invalid\x20pl'+'y\x20header');if(_0x5dbc89=_0x428a37(_0xe54688['data'],_0x55cfb1),_0x5dbc89!==-(0xa53*-0x1+0x3fc+-0xe*-0x74))break;}const _0x49893b=new TextDecoder('ascii')['decode'](_0xe54688['data']['subarray'](-0x1*0x178d+0x1926+-0x199*0x1,_0x5dbc89))['split']('\x0a'),{elements:_0x552eb1,format:_0x537ab7,comments:_0x45c0be}=_0x2117dc(_0x49893b);if(_0x537ab7!=='binary_lit'+'tle_endian')throw new Error('Unsupporte'+'d\x20ply\x20form'+'at');return _0xe54688['head']=_0x5dbc89+_0x55cfb1['length'],_0xe54688['compact'](),await((async()=>_0x54d96e(_0x552eb1)?await _0x3799b5(_0xe54688,_0x552eb1,_0x45c0be):(_0x552eb1['forEach'](_0xe5f92d=>{_0xe5f92d['properties']['forEach'](_0x325ce0=>{const _0x1c47ad=_0x2ef3ab['get'](_0x325ce0['type']);if(_0x1c47ad){const _0x3d4959=new _0x1c47ad(_0xe5f92d['count']);_0x325ce0['storage']=_0x3d4959;}});}),_0x320f01(_0x552eb1)?await _0xccb3b(_0xe54688,_0x552eb1,_0x45c0be):await _0x5bb6fb(_0xe54688,_0x552eb1,_0x45c0be)))());},_0xe5894f=_0x58a426=>{const {numSplats:_0x1d3026,chunkData:_0x57ed5a,chunkSize:_0x380756,vertexData:_0x370958,shData0:_0x4db6b8,shData1:_0x1d1642,shData2:_0x51e7e3,shBands:_0xfdffb1,comments:_0x1e0a14,is4D:_0x5a9690}=_0x58a426,_0x275a68=['x','y','z','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','f_dc_0','f_dc_1','f_dc_2','opacity'];if(_0x5a9690&&_0x275a68['push']('t','t_scale','motion_0','motion_1','motion_2'),_0xfdffb1>0x9*-0x1e2+0x1*0x17f5+0x1*-0x703){const _0x28d5c9=[];for(let _0x5e46a6=0xb*0x271+-0x1cb1+-0xeb*-0x2;_0x5e46a6<0x1c3e+0x379*0x4+-0x29f5;++_0x5e46a6)_0x28d5c9['push']('f_rest_'+_0x5e46a6);_0x275a68['splice'](_0x275a68['indexOf']('f_dc_0')+(0x1cb4+-0x1*0xb51+-0x1162),-0xc29+0x20c+0xa1d,..._0x28d5c9);}const _0x14547e={};_0x275a68['forEach'](_0x20ba8b=>{_0x14547e[_0x20ba8b]=new Float32Array(_0x1d3026);});const _0x32fe06=new _0x154ad4(),_0x535786=new _0x26c30b(),_0x452766=new _0x154ad4(),_0x83152f=new _0x16d01b(),_0x55e71f=new _0x154ad4(),_0x2117fe=new _0x154ad4(),_0x3b4119=_0xfdffb1>-0xcb+0x2*-0x932+0x1*0x132f?new Float32Array(-0x1cde*-0x1+0x1452+-0x3103):null,_0x31e457=new _0x17a435(_0x57ed5a,_0x380756,_0x370958,_0x4db6b8,_0x1d1642,_0x51e7e3,_0xfdffb1,_0x32fe06,_0x535786,_0x452766,_0x83152f,_0x55e71f,_0x2117fe,_0x3b4119);for(let _0x85897c=-0xbde*0x1+-0x89c*0x2+-0x49*-0x66;_0x85897c<_0x1d3026;++_0x85897c){_0x31e457['read'](_0x85897c),_0x14547e['x'][_0x85897c]=_0x32fe06['x'],_0x14547e['y'][_0x85897c]=_0x32fe06['y'],_0x14547e['z'][_0x85897c]=_0x32fe06['z'],_0x14547e['rot_1'][_0x85897c]=_0x535786['x'],_0x14547e['rot_2'][_0x85897c]=_0x535786['y'],_0x14547e['rot_3'][_0x85897c]=_0x535786['z'],_0x14547e['rot_0'][_0x85897c]=_0x535786['w'],_0x14547e['scale_0'][_0x85897c]=_0x452766['x'],_0x14547e['scale_1'][_0x85897c]=_0x452766['y'],_0x14547e['scale_2'][_0x85897c]=_0x452766['z'],_0x14547e['motion_0'][_0x85897c]=_0x55e71f['x'],_0x14547e['motion_1'][_0x85897c]=_0x55e71f['y'],_0x14547e['motion_2'][_0x85897c]=_0x55e71f['z'],_0x14547e['t_scale'][_0x85897c]=_0x2117fe['x'],_0x14547e['t'][_0x85897c]=_0x2117fe['y'],_0x14547e['f_dc_0'][_0x85897c]=(_0x83152f['x']-(-0x1*-0x946+0x17e2+-0x84a*0x4+0.5))/_0x48e687,_0x14547e['f_dc_1'][_0x85897c]=(_0x83152f['y']-(0x2*-0xf09+0x243d*-0x1+0xaf*0x61+0.5))/_0x48e687,_0x14547e['f_dc_2'][_0x85897c]=(_0x83152f['z']-(0x132*0x8+0x1621+-0x1fb1*0x1+0.5))/_0x48e687;const _0x5b8f18=_0x83152f['w']<=-0x1f26+-0x59a+0x24c0?-(-0x9e5*0x1+-0x1a*-0x13a+-0x15d7*0x1):_0x83152f['w']>=-0x17c9+0x1*-0x669+0x1e33?0x2*0x6fc+-0xb*0x197+0x1*0x3ad:-Math['log']((-0x1ea+-0x43f+-0x107*-0x6)/_0x83152f['w']-(0x4*-0x269+0x1711+-0xd6c));if(_0x14547e['opacity'][_0x85897c]=(-0x15b8+0x1*-0x11a5+0x275e)/(0x66c+0x16d7+0x2ed*-0xa+Math['exp'](-_0x5b8f18)),_0x3b4119){for(let _0x503bef=0x1*0x1f1b+-0x25f9*-0x1+-0x4514;_0x503bef<-0x2*0xa76+-0x6fa+0x1*0x1c13;++_0x503bef)_0x14547e['f_rest_'+_0x503bef][_0x85897c]=_0x3b4119[_0x503bef];}}const _0x1b3662=[{'count':_0x1d3026,'name':'vertex','properties':_0x275a68['map'](_0x1892df=>({'byteSize':0x4,'name':_0x1892df,'type':'float','storage':_0x14547e[_0x1892df]}))}];return new _0xff73cb(_0x1b3662,_0x1e0a14);};}class SN extends pe{constructor(_0x553ac8){super(),h(this,'worker'),h(this,'loadUrlLis'+'t'),(this['loadUrlLis'+'t']=_0x553ac8,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+gN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','loadUrlList':this['loadUrlLis'+'t']});}['loadPly'](_0x262731,_0x4ea58f,_0xe93eb2=(_0x20eedd,_0xbee7a1)=>{},_0x2ec683=(_0xf0299a,_0x2f95cf,_0x17c1ae)=>{},_0x398262=(_0x5b934d,_0x256afa)=>{}){var _0x1d24c4;return(_0x1d24c4=this['worker'])==null||_0x1d24c4['postMessag'+'e']({'type':'loadPly','url':_0x262731,'decompress':_0x4ea58f}),new Promise((_0x35190d,_0x5d6b71)=>{if(!this['worker']){_0x5d6b71(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x295971=>{if(!this['worker'])return;const {data:_0x46fbd8}=_0x295971;if(_0x262731===_0x46fbd8['url'])switch(_0x46fbd8['type']){case'totalLengt'+'h':_0xe93eb2==null||_0xe93eb2(_0x46fbd8['totalLengt'+'h'],_0x46fbd8['url']);break;case'progress':_0x2ec683==null||_0x2ec683(_0x46fbd8['bytes'],_0x46fbd8['totalLengt'+'h'],_0x46fbd8['url']);break;case'splatData':_0x35190d(_0x46fbd8['data']);break;case'error':_0x398262==null||_0x398262(_0x46fbd8['data'],_0x46fbd8['url']);break;}};});}['destroy'](){this['loadUrl']='',this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(-0x12b5+-0x2*0xa9+0x1407));}}class yN{constructor(_0x32f5b2,_0x1360cf){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'readWorker'),(console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','Register\x20P'+'lyParser.c'+'onstructor'),this['app']=_0x32f5b2,this['maxRetries']=_0x1360cf,this['urlList']=[],this['gsplatReso'+'urce']=null,this['readWorker']=null,this['totalRecei'+'ved']=0x1*0x6fd+0x11ea*-0x1+0xaed);}async['load'](_0x5a516f,_0x4346ff,_0x137185){var _0x1a5f7c,_0x4db3bf,_0x167acf;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','PlyParser.'+'load'),this['urlList']=[],_0x5a516f['load']['includes'](',')?this['urlList']=_0x5a516f['load']['split'](','):this['urlList']['push'](_0x5a516f['load']);const _0x303fda=_0x137185['data']['createTime']!==((_0x4db3bf=(_0x1a5f7c=this['onlyOneAss'+'et'])==null?void(0x177a+0x5e0+0x1a*-0x121):_0x1a5f7c['data'])==null?void(0x4*0x6d9+0x25c7+-0x412b):_0x4db3bf['createTime']);(!this['readWorker']||_0x303fda)&&((_0x167acf=this['readWorker'])==null||_0x167acf['destroy'](),this['readWorker']=new SN(this['urlList']));const _0x1dbc84=_0x137185['data']['loadIndex']>=0x1f*0x1d+-0x2*-0x949+-0x1615?_0x137185['data']['loadIndex']:-0x124c*-0x2+-0xff5+-0x14a3,_0x2e5015=_0x137185['data']['loadMode']==='all'?this['urlList']['length']-_0x1dbc84:_0x1dbc84+(-0x1*-0xd85+0xb5d*-0x1+-0x227*0x1),_0x3c7045=_0x137185['data']['timeOption'],_0x4558cb=_0x137185['data']['events'];for(let _0x2bde3b=_0x1dbc84;_0x2bde3b<_0x2e5015;_0x2bde3b++)await this['loadGsplat'+'Data'](this['urlList'],_0x4346ff,_0x137185,_0x2bde3b,_0x3c7045,_0x4558cb,_0x2e5015);_0x4558cb['fire']('loadAllAss'+'etsDone');}async['loadGsplat'+'Data'](_0x4f6c03,_0xd07c7c,_0x11b98b,_0xac1f23,_0x8ec120,_0x136340,_0x3ebfcf){var _0x4b6949,_0x167383,_0x2c5560;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','loadGsplat'+'Data',_0x4f6c03[_0xac1f23]['trim'](),_0xac1f23);const _0x5d8679=_0x8ec120[(-0x1*0xfad+-0x7*-0x247+0xb*-0x6)*_0xac1f23]+_0x8ec120[(-0x5bd*-0x2+0x3*0x7e1+0x331*-0xb)*_0xac1f23+(0xa*-0x3e3+0xd09+-0xceb*-0x2)],_0x3f7325=_0x4f6c03[_0xac1f23]['trim']();globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('loadTime','=========='+'=========='+'=========='+'=========='+'=========='+'====='),console['log']('loadTime','start\x20load'+'\x20ply\x20data',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(0x2567+0x1*0x1201+-0x23e0))['toFixed'](-0xbb9+0x1016+-0x45b));try{const _0x395267=await((_0x4b6949=this['readWorker'])==null?void(0x3e*0x32+-0x33d+-0x8df*0x1):_0x4b6949['loadPly'](_0x3f7325,_0x11b98b['data']['decompress'],()=>{this['totalRecei'+'ved']=0x17a2*-0x1+-0x383+0x1b25;},(_0x3a420e,_0x2b5b43)=>{this['totalRecei'+'ved']+=_0x3a420e,_0x11b98b&&_0x136340['fire']('progress',_0x2b5b43*_0xac1f23/_0x3ebfcf+this['totalRecei'+'ved']/_0x3ebfcf,_0x2b5b43);},(_0x1edb95,_0xe4463d)=>{debugger;console['warn']('ERROE\x20Load'+'\x20Ply',_0xe4463d,_0x1edb95);}));let _0x382f7a;console['log']('loadTime','load\x20ply\x20d'+'ata\x20done',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(0x5*0x449+0xa86+-0xc6b))['toFixed'](0x10fe+-0x7*0x2de+0x316)),_0x395267['isCompress'+'ed']?(_0x382f7a=new _N(),_0x382f7a['comments']=_0x395267['comments'],_0x382f7a['numSplats']=_0x395267['numSplats'],_0x382f7a['is4D']=_0x395267['is4D'],_0x382f7a['chunkData']=_0x395267['chunkData'],_0x382f7a['vertexData']=_0x395267['vertexData'],_0x382f7a['shData0']=_0x395267['shData0'],_0x382f7a['shData1']=_0x395267['shData1'],_0x382f7a['shData2']=_0x395267['shData2'],_0x382f7a['shBands']=_0x395267['shBands']):_0x382f7a=new Dn(_0x395267['elements'],_0x395267['comments']),_0x11b98b['fire']('load:data',_0x382f7a),_0x382f7a['isCompress'+'ed']||_0x11b98b['data']['reorder'];const _0x364b3b=_0x11b98b['data']['createTime']!==((_0x2c5560=(_0x167383=this['onlyOneAss'+'et'])==null?void(-0x1c10+-0xb*-0x12b+-0x5*-0x30b):_0x167383['data'])==null?void(0x1*-0x2449+-0xed9*0x1+0x4a6*0xb):_0x2c5560['createTime']);this['gsplatReso'+'urce']&&!_0x364b3b?this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x382f7a['isCompress'+'ed']?await _0x382f7a['decompress']():_0x382f7a,_0x8ec120,_0x5d8679,_0x11b98b,_0x136340):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),this['gsplatReso'+'urce']=new Fb(this['app']['graphicsDe'+'vice'],_0x382f7a['isCompress'+'ed']?await _0x382f7a['decompress']():_0x382f7a),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x8ec120,this['onlyOneAss'+'et']=_0x11b98b),_0xd07c7c(null,this['gsplatReso'+'urce']);}catch(_0xe3feab){_0xd07c7c(_0xe3feab,null);}}['open'](_0x4cd34f,_0x213fb2){return _0x213fb2;}}async function vN(){const _0x51750='super4d-ca'+'che-v1',_0x4a1f74={'maxAge':0x202fbf000,'maxSize':0x280000000},_0x377416=-0x101d+0x99a*-0x2+0x1*0x2351+0.28209479177387814;class _0x1dc0c7{constructor(_0x3dcf49={}){this['options']={..._0x4a1f74,..._0x3dcf49},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=-0xe*0x1cd+0xc*-0x2d7+0x3b4a,this['initialize'+'d']=!(-0x18c8+0x3*-0x542+-0xd85*-0x3);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x51750);const _0x8098e8=await this['cache']['keys'](),_0x1b9279=[];for(const _0x3ffbf6 of _0x8098e8){const _0x196a63=_0x3ffbf6['url'],_0xc2db20=await this['cache']['match'](_0x196a63);if(_0xc2db20){const _0x33a966=(await _0xc2db20['blob']())['size'],_0x5142ae=_0xc2db20['headers']['get']('x-cache-ti'+'me');_0x5142ae&&_0x1b9279['push']({'url':_0x196a63,'size':_0x33a966,'cacheTime':parseInt(_0x5142ae)});}}_0x1b9279['sort']((_0x5e08a2,_0x48857a)=>_0x5e08a2['cacheTime']-_0x48857a['cacheTime']);for(const _0x4ae221 of _0x1b9279)this['cacheSizes']['set'](_0x4ae221['url'],_0x4ae221['size']),this['currentSiz'+'e']+=_0x4ae221['size'],this['lruList']['push'](_0x4ae221['url']);}catch(_0x502aa3){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x502aa3);}this['initialize'+'d']=!(-0x2*-0x4c1+0x3*-0xc51+0x1b71);}}async['get'](_0x58a0b0){if(await this['init'](),!this['cache'])return null;try{const _0x3d055c=await this['cache']['match'](_0x58a0b0);if(!_0x3d055c)return null;const _0x257d79=_0x3d055c['headers']['get']('x-cache-ti'+'me');return _0x257d79&&Date['now']()-parseInt(_0x257d79)>this['options']['maxAge']?(await this['delete'](_0x58a0b0),null):(this['updateLRU'](_0x58a0b0),_0x3d055c);}catch{return null;}}async['set'](_0x3abdeb,_0x2bb281){if(!(!this['cache']||_0x3abdeb['startsWith']('blob:')))try{const _0x539237=_0x2bb281['clone'](),_0x144787=await _0x539237['blob'](),_0x2c0e57=_0x144787['size'];this['currentSiz'+'e']+_0x2c0e57>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x2c0e57);const _0x48b1fe=new Headers(_0x539237['headers']);_0x48b1fe['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x25ebc3=new Response(_0x144787,{'status':_0x539237['status'],'statusText':_0x539237['statusText'],'headers':_0x48b1fe});await this['cache']['put'](_0x3abdeb,_0x25ebc3),this['cacheSizes']['set'](_0x3abdeb,_0x2c0e57),this['currentSiz'+'e']+=_0x2c0e57,this['updateLRU'](_0x3abdeb);}catch(_0x5921d2){console['error']('Cache\x20set\x20'+'error:',_0x5921d2);}}['updateLRU'](_0x4b74a6){const _0x1a8e7b=this['lruList']['indexOf'](_0x4b74a6);_0x1a8e7b>-(-0x1d79+0x223f*-0x1+-0x3fb9*-0x1)&&this['lruList']['splice'](_0x1a8e7b,0xb8a+0x1028+-0x3*0x93b),this['lruList']['push'](_0x4b74a6);}async['cleanupSpa'+'ce'](_0x5099fb){const _0x49dd13=this['options']['maxSize']*(0x925+-0x7*0x4de+0x18ed+0.9);if(!(this['currentSiz'+'e']<=_0x49dd13))for(;this['lruList']['length']>0x16e8+-0x34a+0x36*-0x5d&&this['currentSiz'+'e']>_0x49dd13;){const _0x2b06c6=this['lruList']['shift']();_0x2b06c6&&await this['delete'](_0x2b06c6);}}async['delete'](_0x11c005){if(this['cache'])try{await this['cache']['delete'](_0x11c005);const _0x71ce7a=this['cacheSizes']['get'](_0x11c005)||-0xb0*0x1d+0xbe9*-0x1+-0x1*-0x1fd9;this['currentSiz'+'e']-=_0x71ce7a,this['cacheSizes']['delete'](_0x11c005);const _0xc1a61a=this['lruList']['indexOf'](_0x11c005);_0xc1a61a>-(0x8a+0x11*-0x13+-0x6*-0x1f)&&this['lruList']['splice'](_0xc1a61a,0x2a6*-0x9+-0x1a25+0x31fc);}catch(_0x28c208){console['error']('Cache\x20dele'+'te\x20error:',_0x28c208);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x52d404=>Promise['all'](_0x52d404['map'](_0x23ff5e=>{var _0x356dbb;return(_0x356dbb=this['cache'])==null?void(-0x22eb+0x242e+-0x143):_0x356dbb['delete'](_0x23ff5e);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x323*0x5+0x123b+-0xa3*0x4;}catch(_0x169525){console['error']('Cache\x20clea'+'r\x20error:',_0x169525);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x1c9b*0x1+-0x1*-0x2593+0x2b*-0x18a;}}class _0x37dc6a{constructor(_0x81ece4=[],_0x6f7122={}){this['cacheManag'+'er']=new _0x1dc0c7(_0x6f7122['cache']),this['retryCount']=_0x6f7122['retryCount']||-0xaab+0x2*0x4eb+0xd8,this['retryDelay']=_0x6f7122['retryDelay']||0xb67+0x1e*0x65+-0x1549,this['maxConcurr'+'ency']=_0x6f7122['maxConcurr'+'ency']||0x2128*0x1+0x1a*0x167+-0x8*0x8b3,this['downloadQu'+'eue']=_0x81ece4,this['isProcessi'+'ngDownload'+'Queue']=!(-0x257d+0x792+0x5*0x5fc),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0x1e73+0x26ff*0x1+-0x88c);this['downloadQu'+'eue']['length']>0x15*-0x1a3+-0x4*-0x7c6+-0x1*-0x347;)try{const _0x3a481c=this['downloadQu'+'eue']['splice'](0x64c+0x1*0x7f7+0x4c1*-0x3,this['maxConcurr'+'ency'])['map'](_0x363779=>{if(!this['pendingRes'+'ponses']['has'](_0x363779)){const _0x3e3a12=this['download'](_0x363779);return this['pendingRes'+'ponses']['set'](_0x363779,_0x3e3a12),_0x3e3a12['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x363779);});}return Promise['resolve']();});await Promise['all'](_0x3a481c);}catch(_0x2f26e3){console['error']('Download\x20e'+'rror:',_0x2f26e3);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x253c+0x2141+-0xcc*-0x5);}}}async['fetch'](_0x3a2221,_0x5e638f={}){if(this['pendingRes'+'ponses']['has'](_0x3a2221))return this['pendingRes'+'ponses']['get'](_0x3a2221);const {forceRefresh:_0x266531=!(-0x237d+-0x1*-0xe3f+0x153f),..._0x549d35}=_0x5e638f;this['pendingRes'+'ponses']['set'](_0x3a2221,this['download'](_0x3a2221,_0x549d35));const _0x43bcb1=await this['pendingRes'+'ponses']['get'](_0x3a2221);return this['pendingRes'+'ponses']['delete'](_0x3a2221),_0x43bcb1;}async['download'](_0x1d21ac,_0x5ac86d={}){var _0x28ae9f;await((_0x28ae9f=this['cacheManag'+'er'])==null?void(0x1d57+-0xdb0+-0xfa7):_0x28ae9f['init']());const {forceRefresh:_0xc53ae=!(0x1f4e+-0x972+-0x1*0x15db),..._0x27c565}=_0x5ac86d;_0xc53ae&&await this['cacheManag'+'er']['delete'](_0x1d21ac);const _0x234166=await this['cacheManag'+'er']['get'](_0x1d21ac);if(_0x234166)return _0x234166;let _0x1bb0b8;for(let _0x2fec79=0x5*-0x151+-0xa17+0x10ac;_0x2fec79<this['retryCount'];_0x2fec79++)try{const _0x2a0f69=await fetch(_0x1d21ac,_0x27c565);if(!_0x2a0f69['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x2a0f69['status']);return await this['cacheManag'+'er']['set'](_0x1d21ac,_0x2a0f69),_0x2a0f69;}catch(_0x359e42){console['error']('Download\x20e'+'rror:',_0x359e42),_0x1bb0b8=_0x359e42,_0x2fec79<this['retryCount']-(0xcd0+-0x1f09+-0x123a*-0x1)&&await new Promise(_0x2b47e6=>setTimeout(_0x2b47e6,this['retryDelay']*(_0x2fec79+(0x27*-0xaa+-0x8*-0x277+0x62f))));}throw _0x1bb0b8;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){var _0x22c8df;(_0x22c8df=this['cacheManag'+'er'])==null||_0x22c8df['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x18d3+-0x1*-0x234a+-0xa76*0x1),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x488a50{constructor(_0x1fc2b3,_0x479177=[]){this['elements']=_0x1fc2b3,this['comments']=_0x479177,this['isCompress'+'ed']=!(0x8*-0x45d+-0x21a6+0x448f*0x1);}}class _0x2ce623{constructor(_0x127b87){this['url']=_0x127b87;}async['readFragme'+'nt'](){globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x37dc6a(globalThis['downloadQu'+'eueUrlList']));const _0x47257b=await globalThis['fetchWorke'+'r']['fetch'](this['url']);if(!_0x47257b['ok'])throw new Error('Failed\x20to\x20'+'fetch\x20'+this['url']+':\x20'+_0x47257b['statusText']);const _0x73b0c4=await _0x47257b['arrayBuffe'+'r'](),_0x5ea25d=new Uint8Array(_0x73b0c4);let _0x10ae86=-0x89*0x29+-0x6f*0x53+-0x39ee*-0x1,{size:_0x40236a,type:_0x419921}=this['_readBoxHe'+'ader'](_0x5ea25d,_0x10ae86);if(_0x419921!=='moof')throw new Error('Not\x20a\x20moof');_0x10ae86+=-0x1de4+-0x47c+0x2268;const _0x239377=_0x10ae86+_0x40236a-(-0x4f*0x4f+0x2367+0x7*-0x192);let _0x2a33cf=null;for(;_0x10ae86<_0x239377;){const {size:_0x53a747,type:_0x11ed5b}=this['_readBoxHe'+'ader'](_0x5ea25d,_0x10ae86);_0x10ae86+=0x6f5*0x2+0xc0*-0x25+0xdde;const _0x13eac7=_0x5ea25d['slice'](_0x10ae86,_0x10ae86+_0x53a747-(0x2371*0x1+-0x2663*0x1+0x2fa));_0x10ae86+=_0x53a747-(0x1552+-0x1382+0x39*-0x8),_0x11ed5b==='emsg'&&(_0x2a33cf=this['_parseEmsg'](_0x13eac7));}if(!_0x2a33cf)throw new Error('Incomplete'+'\x20moof');const {size:_0x22b2e5,type:_0x4fa8c1}=this['_readBoxHe'+'ader'](_0x5ea25d,_0x10ae86);if(_0x4fa8c1!=='mdat')throw new Error('Expected\x20m'+'dat\x20box\x20af'+'ter\x20moof');_0x10ae86+=-0x23ed+0x2*-0x946+0x3681;const _0x579f76=_0x5ea25d['slice'](_0x10ae86,_0x10ae86+(_0x22b2e5-(-0x685*-0x4+0x6f*-0x56+0xb3e)));return{'metadata':_0x2a33cf,'segmentData':_0x579f76};}['_readBoxHe'+'ader'](_0x595773,_0x57f96c){if(_0x57f96c+(0x613*0x6+0x266f+-0x3*0x18f3)>_0x595773['length'])throw new Error('EOF');const _0x1245e3=_0x595773[_0x57f96c]<<-0x15*-0x1ca+-0x9*0xd3+-0x1e0f|_0x595773[_0x57f96c+(-0xf57+-0x2345+-0x7*-0x73b)]<<0x4*0x94+0x10c0+-0x1300|_0x595773[_0x57f96c+(-0xb*0x34c+0x15cb+-0x151*-0xb)]<<0x669+0x232f+-0x2990|_0x595773[_0x57f96c+(-0x14b2+-0x639+0x47d*0x6)],_0x458ec0=String['fromCharCo'+'de'](_0x595773[_0x57f96c+(0x1*0xcce+0x8*0x4b1+-0x3252)],_0x595773[_0x57f96c+(-0x11cd+0x13*-0xb9+-0xc5*-0x29)],_0x595773[_0x57f96c+(0x1615+0xa70+0xad5*-0x3)],_0x595773[_0x57f96c+(-0xcd0+0x4*0x410+-0x369)]);return{'size':_0x1245e3,'type':_0x458ec0};}['_parseEmsg'](_0x2d8b){let _0x18039b=0x2e6*-0x9+0xc78+-0x3*-0x48a;_0x18039b=_0x2d8b['indexOf'](-0x1200+0x719*0x1+-0xae7*-0x1,_0x18039b)+(0x120+0x43*0x31+-0xdf2),_0x18039b=_0x2d8b['indexOf'](0x3b*0x89+0xb67+-0x2afa,_0x18039b)+(-0xd58+0xf*-0x1b2+0x3*0xced),_0x18039b+=-0x7*0x1c1+0x1*0xc95+-0x3e;const _0x529107=_0x2d8b['slice'](_0x18039b);return globalThis['CBOR']['decode'](_0x529107);}}class _0x5be7cd{constructor(_0x23d963=-0x2204+0x1f23+-0x2e1*-0x1,_0x1ffa5f=-0x1a5d*0x1+-0x3d9+0x1e36,_0x22a352=-0x1*0x1b41+-0x16fd+-0x2*-0x191f,_0x49ba90=0x139f+0xeb*0xa+0x4c*-0x61){this['x']=_0x23d963,this['y']=_0x1ffa5f,this['z']=_0x22a352,this['w']=_0x49ba90;}['set'](_0x19e0d4,_0x40e344,_0x1a66ee,_0x36f132){return this['x']=_0x19e0d4,this['y']=_0x40e344,this['z']=_0x1a66ee,this['w']=_0x36f132,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x4796cf=this){let _0x57fbf4=_0x4796cf['length']();return _0x57fbf4===0x1*0xa8b+0x7*-0x4f6+0x182f?(this['x']=this['y']=this['z']=0x4d*-0x61+-0x377+0x20a4,this['w']=-0x233*0x7+-0x3*0x602+0x216c):(_0x57fbf4=(-0x1fd5+0x6*0x3a1+0x284*0x4)/_0x57fbf4,this['x']=_0x4796cf['x']*_0x57fbf4,this['y']=_0x4796cf['y']*_0x57fbf4,this['z']=_0x4796cf['z']*_0x57fbf4,this['w']=_0x4796cf['w']*_0x57fbf4),this;}['mulScalar'](_0xe1d5fc,_0xb9014a=this){return this['x']=_0xb9014a['x']*_0xe1d5fc,this['y']=_0xb9014a['y']*_0xe1d5fc,this['z']=_0xb9014a['z']*_0xe1d5fc,this['w']=_0xb9014a['w']*_0xe1d5fc,this;}}self['onmessage']=async _0x3dfffd=>{var _0x5ddf0e,_0x12e932;const {data:_0x5602a5}=_0x3dfffd;switch(_0x5602a5['type']){case'initWorker':importScripts(_0x5602a5['cborXUrl']);break;case'destroyWor'+'ker':_0x41827c();break;case'loadGsdMan'+'ifest':const {manifestUrl:_0xbb2dd5,loadRepresentation:_0x88b38c}=_0x5602a5,_0x24e70c=await _0x5b5edb(_0xbb2dd5,_0x88b38c);globalThis['manifestUr'+'l']=_0xbb2dd5,globalThis['manifest']=_0x24e70c,globalThis['resentatio'+'n']=_0x24e70c['representa'+'tion'],globalThis['downloadQu'+'eueUrlList']=_0x5737f0(),globalThis['fetchWorke'+'r']=new _0x37dc6a(globalThis['downloadQu'+'eueUrlList']),self['postMessag'+'e']({'type':'onloadMani'+'fest','data':_0x24e70c,'url':_0xbb2dd5,'representation':_0x88b38c});break;case'loadGsdSeg'+'ments':try{const _0x54fc25=_0x1598d4(globalThis['manifest'],globalThis['resentatio'+'n']),_0x2f1407=await _0x431575(globalThis['manifest'],_0x54fc25),_0x7026a2=(_0x5ddf0e=_0x2f1407==null?void(0x187a+-0x61*0x6+-0x1634):_0x2f1407['elements'][-0x1f+0x5f7*-0x3+-0x481*-0x4])==null?void(-0x60f+0x27b*-0xf+-0x4e*-0x8e):_0x5ddf0e['properties']['map'](_0x5cbecc=>_0x5cbecc['storage']['buffer']);self['postMessag'+'e']({'type':'loadGsdSeg'+'mentsDone','data':_0x2f1407,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x7026a2);}catch(_0x27af89){console['error']('Error\x20load'+'ing\x20GSD:',_0x27af89),self['postMessag'+'e']({'type':'error','data':_0x27af89['message'],'url':globalThis['manifestUr'+'l']});}break;case'loadTimeli'+'neIndexSeg'+'ments':const {timelineIndexs:_0x230209}=_0x5602a5;try{const _0x3bae32=_0x1598d4(globalThis['manifest'],globalThis['resentatio'+'n']),_0x178334=await _0x4c6cd8(globalThis['manifest'],_0x3bae32,_0x230209),_0x521cf9=(_0x12e932=_0x178334==null?void(0x1*0xfb2+0xa31+0x19e3*-0x1):_0x178334['elements'][0x203*0x7+0x90e+-0x1723*0x1])==null?void(0x97b+0xa75+-0x13f0):_0x12e932['properties']['map'](_0x43a222=>_0x43a222['storage']['buffer']);self['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'mentsDone','data':_0x178334,'timelineIndexs':_0x230209,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x521cf9);}catch(_0xb014f1){console['error']('Error\x20load'+'ing\x20GSD:',_0xb014f1),self['postMessag'+'e']({'type':'error','data':_0xb014f1['message'],'url':globalThis['manifestUr'+'l']});}break;}};const _0x41827c=()=>{var _0x48efe3;globalThis['manifestUr'+'l']=null,globalThis['manifest']=null,globalThis['resentatio'+'n']=null,(_0x48efe3=globalThis['fetchWorke'+'r'])==null||_0x48efe3['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['downloadQu'+'eueUrlList']=[],globalThis['loadedSegm'+'ents']=[],globalThis['currentLoa'+'dSg']=null;},_0x5737f0=()=>{const _0x2d0425=new Set(),_0x30b0e3=_0x1598d4(globalThis['manifest'],globalThis['resentatio'+'n']),_0x1308d6=globalThis['manifest']['baseUrl'],_0x4f4944=_0x30b0e3['segmentTem'+'plate'][0xe07+-0xffd+-0x1*-0x1f6];for(const _0x30e288 of _0x4f4944['segmentTim'+'eline'])for(const _0x4b4fe5 of _0x30e288['nl']){const _0x24b9b2=''+_0x1308d6+_0x4f4944['media']['replace']('$SegGroupI'+'ndex$',String(_0x30e288['sg']))['replace']('$NodeIndex'+'$',String(_0x4b4fe5));_0x2d0425['add'](_0x24b9b2);}return Array['from'](_0x2d0425);},_0x5b5edb=async(_0x5d31a2,_0x22b997)=>{const _0x38e163=await(await fetch(_0x5d31a2))['text'](),_0x5bfefc=JSON['parse'](_0x38e163);_0x5bfefc['baseUrl']=_0x5d31a2['replace'](/\/[^\/]*$/,'/');const {schemas:_0x2347d9,gsiUrl:_0x2dd492,repId:_0x57fd2f}=await _0xe49d12(_0x5bfefc,_0x22b997);return _0x5bfefc['schemas']=_0x2347d9,_0x5bfefc['gsiUrl']=_0x2dd492,_0x5bfefc['representa'+'tion']=_0x57fd2f,_0x5bfefc;},_0xe49d12=async(_0x18a1ae,_0x10a033)=>{let _0x49d28a=null,_0x1cdc4b=null;for(const _0x5b9701 of _0x18a1ae['adaptation'+'Sets'])if(_0x5b9701['contentTyp'+'e']==='4dgs'){_0x1cdc4b=_0x5b9701;for(const _0x3b7771 of _0x5b9701['representa'+'tions'])if(_0x3b7771['id']===_0x10a033){_0x49d28a=_0x3b7771;break;}break;}_0x49d28a||(_0x49d28a=_0x1cdc4b['representa'+'tions'][-0x11a6+-0x15e+0x1304],console['warn']('Representa'+'tion\x20\x27'+_0x10a033+('\x27\x20not\x20foun'+'d,\x20use\x20the'+'\x20first\x20rep'+'resentatio'+'n\x20instead')));const _0x3e6d2d=_0x49d28a['id'],_0x575522=_0x18a1ae['baseUrl']+_0x3e6d2d+('/init.gsi.'+'json'),_0x3a0992=await(await fetch(_0x575522))['text'](),_0x198fa0=JSON['parse'](_0x3a0992),_0x175d91={};return _0x175d91[_0x3e6d2d]=_0x198fa0,{'schemas':_0x175d91,'gsiUrl':_0x575522,'repId':_0x3e6d2d};},_0x1598d4=(_0x56c1dd,_0x187db6='high-quant'+'ized')=>{let _0x20e852=null;for(const _0x2e7bc9 of _0x56c1dd['adaptation'+'Sets'])if(_0x2e7bc9['contentTyp'+'e']==='4dgs'){for(const _0x123cec of _0x2e7bc9['representa'+'tions'])if(_0x123cec['id']===_0x187db6){_0x20e852=_0x123cec;break;}break;}if(!_0x20e852)throw new Error('Representa'+'tion\x20\x27'+_0x187db6+('\x27\x20not\x20foun'+'d'));return _0x20e852;},_0x431575=async(_0x3cc015,_0x32b119)=>{const _0x1cbf1f=_0x32b119['id'],_0x252a5e=_0x3cc015['schemas'][_0x1cbf1f]['attributes'],_0x43b129=_0x32b119['segmentTem'+'plate'][0xe*0x1a9+0x1*0x1e5f+-0x359d];globalThis['loadedSegm'+'ents']=[];const _0x318836=[],_0x4c3ff5=[];for(const _0x808370 of _0x43b129['segmentTim'+'eline'])for(const _0x1df7c7 of _0x808370['nl']){if(globalThis['loadedSegm'+'ents']['includes'](_0x808370['sg']+'_'+_0x1df7c7))continue;globalThis['loadedSegm'+'ents']['push'](_0x808370['sg']+'_'+_0x1df7c7);const _0x28328f=await _0x17b265(_0x3cc015,_0x32b119,_0x252a5e,_0x808370['sg'],_0x1df7c7);_0x4c3ff5['push'](_0x28328f['decoded']),_0x318836['push'](_0x28328f['metadata']);}return _0x569928(_0x4c3ff5,_0x252a5e,_0x3cc015['comments']);},_0x4c6cd8=async(_0x3725a6,_0x17d3c2,_0x2b30d4)=>{if(!_0x2b30d4||_0x2b30d4['length']===-0x21a*0x8+0x1*-0x2513+0x35e3)return{'decoded':[],'metadata':[]};const _0x573ce1=_0x17d3c2['id'],_0x559541=_0x3725a6['schemas'][_0x573ce1]['attributes'],_0x4b2ed4=_0x17d3c2['segmentTem'+'plate'][-0x8*-0x1b+-0xeab*0x1+0x1*0xdd3];globalThis['loadedSegm'+'ents']||(globalThis['loadedSegm'+'ents']=[]);const _0x33cb9b=_0x4b2ed4['segmentTim'+'eline'][_0x2b30d4[-0x4*0x2c+-0x2318+-0x2*-0x11e4]];globalThis['currentLoa'+'dSg']!==_0x33cb9b['sg']&&(globalThis['loadedSegm'+'ents']=globalThis['loadedSegm'+'ents']['filter'](_0x21c46c=>!_0x21c46c['startsWith'](globalThis['currentLoa'+'dSg'])),globalThis['currentLoa'+'dSg']=_0x33cb9b['sg']);let _0xda6b46;const _0x2d11fb=[];for(const _0xb4609f of _0x2b30d4){_0xda6b46=_0x4b2ed4['segmentTim'+'eline'][_0xb4609f];for(const _0x2be45e of _0xda6b46['nl'])globalThis['loadedSegm'+'ents']['includes'](_0xda6b46['sg']+'_'+_0x2be45e)||(globalThis['loadedSegm'+'ents']['push'](_0xda6b46['sg']+'_'+_0x2be45e),_0x2d11fb['push'](_0x2be45e));}const _0x18a152=await _0x17b265(_0x3725a6,_0x17d3c2,_0x559541,_0xda6b46['sg'],_0x2d11fb);_0x18a152['metadata'];const _0x4bf6e5=_0x18a152['decoded'];return _0x569928(_0x4bf6e5,_0x559541,_0x3725a6['comments']);},_0x17b265=async(_0x200a34,_0x410ab6,_0x93502,_0x55fad1,_0x42569e)=>{const _0x187d13=_0x200a34['baseUrl'],_0x54237f=_0x410ab6['segmentTem'+'plate'][0x7b1+-0x1567+0xdb6]['media'],_0x461b78=_0x42569e['map'](_0x50168b=>''+_0x187d13+_0x54237f['replace']('$SegGroupI'+'ndex$',String(_0x55fad1))['replace']('$NodeIndex'+'$',String(_0x50168b))),_0x5adf10=await Promise['all'](_0x461b78['map'](async _0x3cece9=>{const _0x2a5691=await _0x23718b(_0x3cece9),_0x4e6e4f=_0x2a5691['metadata'],_0x53d61a=_0x2a5691['segmentDat'+'a'],_0x497315=_0x4e6e4f['gaussianCo'+'unt'];console['log']('loadSegmen'+'t\x20'+_0x3cece9),console['log']('loadSegmen'+'t\x20timeStar'+'t:',_0x4e6e4f['timeStart'],'segment\x20ti'+'meEnd:',_0x4e6e4f['timeEnd'],'segment\x20ga'+'ussianCoun'+'t:',_0x497315);let _0x535734;if(_0x410ab6['id']['includes']('quantized')){const _0x4d8939=_0x4e6e4f['chunk_boun'+'ds'];_0x535734=_0x16461f(_0x53d61a,_0x497315,_0x93502,_0x55fad1,_0x4d8939);}else _0x535734=_0x51dba6(_0x53d61a,_0x497315,_0x93502,_0x55fad1);return{'decoded':_0x535734,'metadata':_0x4e6e4f};})),_0x4baee4=_0x5adf10['map'](_0x585abf=>_0x585abf['decoded']),_0x4e648a=_0x5adf10['map'](_0x530be8=>_0x530be8['metadata']);return{'decoded':_0x4baee4,'metadata':_0x4e648a};},_0x569928=(_0x1d9158,_0x4cc681,_0x3c5d8b)=>{if(_0x1d9158['length']===-0x2636+0x1e8+-0x60d*-0x6)return new _0x488a50([{'name':'vertex','count':0x0,'properties':[{'name':'position','type':'float','storage':new Float32Array(0x369+0x1*-0x5c4+0x25b),'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':new Uint16Array(-0x2603+0xdb7+-0xc26*-0x2),'byteSize':0x2},{'name':'t','type':'float','storage':new Float32Array(-0x11d7*0x1+0x124*-0x3+0x1*0x1543),'byteSize':0x4},{'name':'t_scale','type':'float','storage':new Float32Array(0x12a*0x1c+-0xee2+-0x11b6),'byteSize':0x4},{'name':'cutoff','type':'float','storage':new Float32Array(-0xa*-0x305+0xaf8+-0x292a),'byteSize':0x4},{'name':'motion','type':'float','storage':new Float32Array(0x16*0x143+0xa3f+-0x1a7*0x17),'byteSize':0x4},{'name':'rotation','type':'float','storage':new Float32Array(0x5*-0x6d6+-0x71*-0x46+0x348),'byteSize':0x4},{'name':'scale','type':'uint16','storage':new Uint16Array(0x410+-0x2*-0x10c1+-0x2592),'byteSize':0x2},{'name':'time_index','type':'float','storage':new Float32Array(0x6f0+0x46b*0x3+-0x1431),'byteSize':0x4}]}],_0x3c5d8b);const _0xb172e7=_0x476c38(_0x1d9158),[_0x384047,_0x2e0387,_0x59a17c]=_0x2ee018(_0xb172e7['lifecycle'],-0x60*0x49+-0x36e+0x1ed1,Float32Array),_0x18a0d0=_0xb172e7['time_index'],_0x2da8e7=_0x4cc681['find'](_0x787f39=>_0x787f39['name']==='feature_re'+'st'),_0x52db76=[];if(_0x2da8e7&&_0xb172e7['feature_re'+'st']){const _0x431224=_0x2da8e7['dataType']['split'](',')[0x18e4+-0x2633+0xd50]['trim']()['replace']('>',''),_0x10ff7b=_0x2ee018(_0xb172e7['feature_re'+'st'],-0x2649+-0x6a*-0x2a+0xa74*0x2,Float32Array);for(const _0x1db3d8 of _0x10ff7b){const _0x439e42=_0x2ee018(_0x1db3d8,_0x431224/(-0xc28+0xf16+-0x2eb),Float32Array);for(let _0x53dc4f=-0x1822+0x1981*0x1+-0x15f;_0x53dc4f<_0x439e42['length'];_0x53dc4f++)_0x52db76['push']({'name':'f_rest_'+_0x53dc4f,'type':'float','storage':_0x439e42[_0x53dc4f],'byteSize':0x4});}}return new _0x488a50([{'name':'vertex','count':_0xb172e7['position']['length']/(-0x25e9*0x1+0x12cc+0x2*0x990),'properties':[{'name':'position','type':'float','storage':_0xb172e7['position'],'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':_0xb172e7['color_opac'+'ity'],'byteSize':0x2},{'name':'t','type':'float','storage':_0x2e0387,'byteSize':0x4},{'name':'t_scale','type':'float','storage':_0x384047,'byteSize':0x4},{'name':'cutoff','type':'float','storage':_0x59a17c,'byteSize':0x4},{'name':'motion','type':'float','storage':_0xb172e7['motion'],'byteSize':0x4},{'name':'rotation','type':'float','storage':_0xb172e7['rotation'],'byteSize':0x4},{'name':'scale','type':'uint16','storage':_0xb172e7['scale'],'byteSize':0x2},{'name':'time_index','type':'float','storage':_0x18a0d0,'byteSize':0x4},..._0x52db76]}],_0x3c5d8b);},_0x2ee018=(_0x5770f2,_0x31d56d,_0x3fd4dc)=>{const _0x5a35ad=new Array(_0x31d56d),_0xad9bcd=Math['floor'](_0x5770f2['length']/_0x31d56d),_0x4010f5=_0x5770f2['length']%_0x31d56d;for(let _0x4586c8=0x6bf+-0x2622+-0x647*-0x5;_0x4586c8<_0x31d56d;_0x4586c8++){const _0xf5842b=_0x4586c8<_0x4010f5?_0xad9bcd+(-0xbf9*0x3+0x2441+-0x55):_0xad9bcd;_0x5a35ad[_0x4586c8]=new _0x3fd4dc(_0xf5842b);}for(let _0x3ffd6c=-0x18*0x27+-0x197b+0x1d23;_0x3ffd6c<_0x5770f2['length'];_0x3ffd6c++){const _0x80c8a8=_0x3ffd6c%_0x31d56d,_0x28dfbe=Math['floor'](_0x3ffd6c/_0x31d56d);_0x5a35ad[_0x80c8a8][_0x28dfbe]=_0x5770f2[_0x3ffd6c];}return _0x5a35ad;},_0x23718b=async _0xf4e6fd=>{const _0x4dc06b=new _0x2ce623(_0xf4e6fd),{metadata:_0x9fd246,segmentData:_0x2e6e2a}=await _0x4dc06b['readFragme'+'nt']();return{'metadata':_0x9fd246,'segmentData':_0x2e6e2a};},_0x5cd0e7=(_0x444811,_0x52fe5b)=>{let _0x33c317,_0x8f807e,_0x5cbc28=-(0xf31*-0x1+-0x1d1b*0x1+-0x2c4d*-0x1);if(_0x444811['encoding']){const _0x2105e0=_0x444811['encoding']['storageTyp'+'e'];if(_0x2105e0==='uint32')_0x8f807e=Uint32Array,_0x33c317=Uint32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x2105e0['startsWith']('array<ucha'+'r')){_0x8f807e=Uint8Array;const _0x1ef8f8=_0x2105e0['split'](',')[-0x19*0x133+0x5ae+0xb7*0x22]['trim']()['replace']('>','');_0x5cbc28=parseInt(_0x1ef8f8),_0x33c317=_0x5cbc28*Uint8Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20storage\x20'+'type:\x20'+_0x2105e0);}}else{if(_0x8f807e=Float32Array,_0x444811['dataType']==='vec3f')_0x33c317=(0x1ffd+-0x2*0x2ce+-0x1a5e)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x444811['dataType']==='vec4f')_0x33c317=(0x2588+-0x2a5+0x1*-0x22df)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x444811['dataType']==='vec2f')_0x33c317=(0x26bf+0x41a+-0xb*0x3e5)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x444811['dataType']['startsWith']('array<floa'+'t')){const _0x1eeca9=_0x444811['dataType']['split'](',')[0xfb1+-0x10f*0x4+0x1*-0xb74]['trim']()['replace']('>','');_0x5cbc28=parseInt(_0x1eeca9),_0x33c317=_0x5cbc28*Float32Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x444811['dataType']);}}}}return{'dataSize':_0x52fe5b*_0x33c317,'datatype':_0x8f807e,'arraySize':_0x5cbc28};},_0x56e185=(_0x482668,_0x43c802)=>{const _0x40d96b=(-0x6c4*-0x1+-0x3*0x4a2+0x3*0x261<<_0x43c802)-(-0x26ad+-0x3a*0x87+0x4544);return(_0x482668&_0x40d96b)/_0x40d96b;},_0x16b777=_0x51326=>{const _0x117608=new Float32Array(_0x51326['length']*(0x8*-0x449+-0x20dc+-0x1*-0x4327));for(let _0x192673=0x67*0x55+0x1691*0x1+-0xe31*0x4;_0x192673<_0x51326['length'];_0x192673++)_0x117608[_0x192673*(-0x3*0x219+-0x22ee+0x293c)]=_0x56e185(_0x51326[_0x192673]>>>-0x1*0xdd7+0x4ba+0xd6*0xb,0x2274+-0x1f*0x46+-0x19ef*0x1),_0x117608[_0x192673*(0xb92+0x1d*0xa+-0x1*0xcb1)+(-0x1794+-0xe*0x3c+0x1add)]=_0x56e185(_0x51326[_0x192673]>>>0x884+-0x1fb0+0x1737,0x865+0x20f4+-0x294f),_0x117608[_0x192673*(0x119e+-0xa5*-0x2b+-0x2d52*0x1)+(0x70a*-0x1+-0x3d*-0x16+0x1ce)]=_0x56e185(_0x51326[_0x192673],-0x6ec*0x4+0x8e5+0x12d6*0x1);return _0x117608;},_0x36fc55=_0x9ba9e3=>{const _0x157d6e=new Float32Array(_0x9ba9e3['length']*(0xa4f*0x1+-0x184*-0x7+-0x1*0x14e7));for(let _0x2e701e=0x732+-0x4*0xfb+0x1a3*-0x2;_0x2e701e<_0x9ba9e3['length'];_0x2e701e++)_0x157d6e[_0x2e701e*(0x29e+-0x13d*-0x2+-0x514)]=_0x56e185(_0x9ba9e3[_0x2e701e]>>>-0x697+0x1f5d*-0x1+0x260c,-0x10c+0x14*-0x138+0x1974),_0x157d6e[_0x2e701e*(0xf4*-0x6+0x2245+-0x1c89)+(-0x1b7*-0xa+-0x4ba+-0xc6b)]=_0x56e185(_0x9ba9e3[_0x2e701e]>>>-0x176e+0x445*-0x3+0x244d,0x189*-0x14+0xab7+-0x1405*-0x1),_0x157d6e[_0x2e701e*(-0x6d8+-0x255*0x1+0x931)+(-0x1*0x3af+-0x22e5*-0x1+-0x1f34)]=_0x56e185(_0x9ba9e3[_0x2e701e]>>>-0x20ba+0x1*0x2615+-0x553,0x6d*0x11+-0x143b+0x2*0x683),_0x157d6e[_0x2e701e*(-0x14bc*0x1+0x1*-0x57+0x1517)+(-0x1597+-0x224d+-0x515*-0xb)]=_0x56e185(_0x9ba9e3[_0x2e701e],0x9ef*0x2+0x1*0x1fbf+-0x5f*0x8b);return _0x157d6e;},_0x4c1921=_0x32e76c=>{const _0x2f3cd6=new Float32Array(_0x32e76c['length']*(-0x1386+0x2044+0x1*-0xcbb)),_0x3fd650=(0x26b7+0x1191+-0x3847)/(Math['sqrt'](0xc2*-0x25+0x4d6*0x1+0x1736)*(-0x7*0x47f+0x1*-0x2345+0x42be+0.5));for(let _0x2835ac=0x1*-0xea9+-0x7*-0x3b6+-0xb51;_0x2835ac<_0x32e76c['length'];_0x2835ac++){const _0xe764a0=(_0x56e185(_0x32e76c[_0x2835ac]>>>-0x22ee+-0x1aba+0xf6f*0x4,0x34c+-0x187d+0x153b)-(0x1116+-0x3*0x8bc+-0x1*-0x91e+0.5))*_0x3fd650,_0x4544c0=(_0x56e185(_0x32e76c[_0x2835ac]>>>-0x1*0x1cbd+-0x81b*-0x4+0x137*-0x3,-0xb36+-0x1dce+0x290e)-(0x1c*-0x100+0x1*0x64c+0x15b4+0.5))*_0x3fd650,_0x54ab24=(_0x56e185(_0x32e76c[_0x2835ac],-0x2*-0x10bb+-0x3*0x81e+0x12*-0x81)-(-0x1*-0xa84+0x2517+-0x7*0x6cd+0.5))*_0x3fd650,_0x3b3e01=Math['sqrt'](0xf2f*-0x1+-0x20c2+0x2ff2-(_0xe764a0*_0xe764a0+_0x4544c0*_0x4544c0+_0x54ab24*_0x54ab24));let _0x48aed3=0x1a3*-0x4+0x4c*-0x53+0x1f30,_0x1cee8c=0x1f34+0x115*0x1+-0x2049,_0x3667d8=0x10*-0x19d+0x1*-0x52f+0x5*0x633,_0x5385de=-0x1d30+0x174f+-0x2b*-0x23;switch(_0x32e76c[_0x2835ac]>>>0x1375+0x636+0xd3*-0x1f){case-0x9db+0xb7d+-0x1a2:_0x48aed3=_0x3b3e01,_0x1cee8c=_0xe764a0,_0x3667d8=_0x4544c0,_0x5385de=_0x54ab24;break;case-0x2ba*0xa+-0x3b9*0x5+0x2de2:_0x48aed3=_0x3b3e01,_0x1cee8c=_0x4544c0,_0x3667d8=_0x54ab24,_0x5385de=_0xe764a0;break;case 0x2e8+-0x2170+0x1e8a:_0x48aed3=_0x4544c0,_0x1cee8c=_0x3b3e01,_0x3667d8=_0x54ab24,_0x5385de=_0xe764a0;break;case 0x4*0x62c+-0x636+-0x1277:_0x48aed3=_0x4544c0,_0x1cee8c=_0x54ab24,_0x3667d8=_0x3b3e01,_0x5385de=_0xe764a0;break;}const _0x5612ca=_0x932867(_0x48aed3,_0x1cee8c,_0x3667d8,_0x5385de);_0x2f3cd6[_0x2835ac*(0x64f+0x1f45+-0x2591)]=_0x5612ca['x'],_0x2f3cd6[_0x2835ac*(-0x1*-0x199e+0x1*-0xfa3+-0x4*0x27e)+(-0x14c7+0x2*-0x10e8+-0x6d3*-0x8)]=_0x5612ca['y'],_0x2f3cd6[_0x2835ac*(-0x17fc+0xbb*0x21+0x2*-0xe)+(-0x5e*0x39+-0x17b*0xf+0x2b25)]=_0x5612ca['z'];}return _0x2f3cd6;},_0x36d498=(_0x5b3b61,_0x36474d,_0x3d81c3)=>{const _0x5945ea=_0x3d81c3-_0x36474d,_0x2ed687=new Float32Array(_0x5b3b61['length']);for(let _0x44ee0a=0x1f*-0x104+0x4e*0x52+-0x34*-0x20;_0x44ee0a<_0x5b3b61['length'];_0x44ee0a++)_0x2ed687[_0x44ee0a]=_0x5b3b61[_0x44ee0a]/(-0x115*-0x11+-0x3fa*-0x6+-0x2942)*_0x5945ea+_0x36474d;return _0x2ed687;},_0x452346=new Float32Array(-0x2*0x2b3+0xd44+-0x7dd),_0x1ffbc9=new Int32Array(_0x452346['buffer']),_0x1f06eb=_0x24c0ff=>{_0x452346[0x91*0x44+-0x146a+-0x1*0x121a]=_0x24c0ff;const _0x4a507f=_0x1ffbc9[-0xcec*0x3+-0x1105*0x1+-0x1*-0x37c9];let _0x2b9b9a=_0x4a507f>>-0x1a8+0x42*-0x8e+-0x2*-0x132a&-0x3*0x4d33+0x76f*0x9+-0x27b*-0x76,_0x59cbae=_0x4a507f>>-0x13e9+0x209a+-0xca5&-0x14a0+-0x4*-0x2d1+0x5c9*0x3;const _0x2f630d=_0x4a507f>>0x19*0x145+-0x45f*0x5+-0x17*0x6d&-0x6*0x3a+0x16b4+-0x1459;return _0x2f630d<-0x1305+-0x24bf*0x1+0x382b*0x1?_0x2b9b9a:_0x2f630d>0xa6e+-0xb*-0x2e7+-0x29cd?(_0x2b9b9a|=0xe64a+-0xb45+-0x5f05,_0x2b9b9a|=(_0x2f630d===-0x1d75+0x581*-0x1+0x23*0x107?-0x19b8+0x4d*0x45+0x4f7:0x3ed+0x1b44+-0x1f30)&&_0x4a507f&0x90868e+-0x363e7+0xd22a8*-0x1,_0x2b9b9a):_0x2f630d<-0x1*0x22f7+-0x70*0x3b+0x1*0x3d38?(_0x59cbae|=-0xdf7+-0x104e+0x2645,_0x2b9b9a|=(_0x59cbae>>-0x19df+0x26da+0xc89*-0x1-_0x2f630d)+(_0x59cbae>>-0x1*0x215b+-0x145*-0x5+0x1b73-_0x2f630d&-0x1e*-0xc9+-0x2*0xf13+0x699),_0x2b9b9a):(_0x2b9b9a|=_0x2f630d-(0x32*-0x59+-0x229b+0x346d)<<0x2525+0xc*0x295+-0x1*0x4417|_0x59cbae>>0x7e8+0x5*-0x4d5+0x1042,_0x2b9b9a+=_0x59cbae&0x138b+0x3*-0x641+0xc7*-0x1,_0x2b9b9a);},_0x8568a=_0x3a0e44=>{const _0x1a1f89=new Uint16Array(_0x3a0e44['length']);for(let _0x5859c1=0x1797+0x2e*-0x9d+-0xa9*-0x7;_0x5859c1<_0x3a0e44['length']/(-0x2067+-0x4c5+0x2530);++_0x5859c1)_0x1a1f89[_0x5859c1*(-0x1e9a+0x7c4+0x16da)]=_0x1f06eb(_0x3a0e44[_0x5859c1*(0xa01*0x2+-0x1812+0x414)]*_0x377416+(0x159*0x4+-0x18e*-0x18+-0x2ab4+0.5)),_0x1a1f89[_0x5859c1*(0x1*-0xdd1+0x20ef+-0x3*0x65e)+(-0x1*0x1732+-0xde*0x22+0x34af*0x1)]=_0x1f06eb(_0x3a0e44[_0x5859c1*(0x2638+0x88e+-0x2ec2)+(-0x820+0x93a*-0x2+0x1a95*0x1)]*_0x377416+(-0x1a0c+-0x16d3*0x1+0x30df+0.5)),_0x1a1f89[_0x5859c1*(-0x5f0*0x2+-0x1*-0x7a9+0x43b)+(-0x2d7*0xc+0x4*0x92c+-0x12*0x25)]=_0x1f06eb(_0x3a0e44[_0x5859c1*(0x1de7*0x1+-0x272+-0x1b71)+(0x2*0x56b+-0x1b22+0x104e)]*_0x377416+(0x1201+-0x1fae+0x3*0x48f+0.5)),_0x1a1f89[_0x5859c1*(0x26c6+-0x31b+-0x23a7*0x1)+(0x1*-0x432+0x1fc4+-0x1b8f)]=_0x1f06eb(_0x3a0e44[_0x5859c1*(0x2456+0x2*0xf9e+-0x2*0x21c7)+(0x1*0x1921+0x2b*-0xd+0x16ef*-0x1)]);return _0x1a1f89;},_0x3d521b=new _0x5be7cd(-0x1bf4+-0x1577+0x3*0x1079,0xe2+0x12fc+-0x9ef*0x2,0x6*-0x3fa+0x19b*0x12+-0x50a,-0x4bd*0x1+0x26*-0x49+-0x531*-0x3),_0x932867=(_0x1e3bb0,_0xab78bb,_0x44369b,_0x19edd2)=>(_0x3d521b['set'](_0xab78bb,_0x44369b,_0x19edd2,_0x1e3bb0),_0x3d521b['normalize'](),_0x3d521b['w']<-0x2b6*0xd+-0x3*-0xb9b+0x6d&&_0x3d521b['mulScalar'](-(-0x1c53+-0x238c+0x3fe*0x10)),_0x3d521b);function _0x16461f(_0x4acdff,_0x41803c,_0x2b34ca,_0xe48c55,_0x3ea209){const _0x5d42f3=_0x3ea209[Object['keys'](_0x3ea209)[-0x62a+-0x1179+0x1*0x17a3]]['length'],_0x22abeb=0x1*-0x2f7+-0x1*0xcca+0x10c1;let _0x1e2a99=[],_0x536521=_0x41803c;for(let _0x262401=0x1d2c+-0x1*0x1e95+0x13*0x13;_0x262401<_0x5d42f3;_0x262401++){const _0x19e293=Math['min'](_0x22abeb,_0x536521);_0x1e2a99['push'](_0x19e293),_0x536521-=_0x19e293;}let _0x1235bc=0x1*0x258b+-0xe58+-0x1733,_0x2b2fb8={};for(let _0x2395c4 of _0x2b34ca){const _0x4039cf=_0x2395c4['name'],{dataSize:_0x3dc9f7,datatype:_0x4d6134}=_0x5cd0e7(_0x2395c4,_0x41803c);let _0x25490a=_0x4acdff['buffer']['slice'](_0x1235bc,_0x1235bc+_0x3dc9f7),_0x64207=new _0x4d6134(_0x25490a);_0x2b2fb8[_0x4039cf]=_0x64207,_0x1235bc+=_0x3dc9f7;}let _0x322680=[],_0x661534=-0x2708+0x1e42+0x8c6;for(let _0x30c9be=0x1*0xa99+-0x7f*0x2e+0x15*0x95;_0x30c9be<_0x5d42f3;_0x30c9be++){const _0x1a25a3=_0xabede3(_0x2b2fb8,_0x3ea209,_0x30c9be,_0x1e2a99,_0x661534,_0x2b34ca),_0x582d1b=_0x1a25a3['chunkDecom'+'pressed'];_0x322680['push'](_0x582d1b),_0x661534=_0x1a25a3['chunkStart'+'Idx'];}let _0x383dee={};for(let _0x8904e of Object['keys'](_0x322680[-0xf2b+-0x5*0x345+-0x1*-0x1f84])){let _0x5db143=0x2223*0x1+-0x2*-0x137d+-0x11*0x44d;for(let _0x116ea7=0x20b1+0x3bc+-0x246d;_0x116ea7<_0x322680['length'];_0x116ea7++)_0x5db143+=_0x322680[_0x116ea7][_0x8904e]['length'];_0x8904e==='color_opac'+'ity'||_0x8904e==='scale'?_0x383dee[_0x8904e]=new Uint16Array(_0x5db143):_0x383dee[_0x8904e]=new Float32Array(_0x5db143);let _0x542c64=-0x1*0xa2a+-0x252*0xb+0x23b0;for(let _0x23f967=-0x1cf*-0x5+0x5*0x449+-0x1e78;_0x23f967<_0x322680['length'];_0x23f967++)_0x383dee[_0x8904e]['set'](_0x322680[_0x23f967][_0x8904e],_0x542c64),_0x542c64+=_0x322680[_0x23f967][_0x8904e]['length'];}return _0x2b34ca['some'](_0x5ab809=>_0x5ab809['name']==='feature_re'+'st')&&(_0x383dee['feature_re'+'st']=_0xb78a6(_0x2b2fb8,_0x2b34ca)),_0x383dee['time_index']=new Float32Array(_0x41803c),_0x383dee['time_index']['fill'](_0xe48c55-(0x1234*-0x1+0x262d+-0x47*0x48)),_0x383dee;}const _0xabede3=(_0x3200cd,_0x35add7,_0x51b734,_0x4fb131,_0x47def2,_0xc6f61a)=>{const _0x10171f=_0x4fb131[_0x51b734],_0x42fb9a=_0x47def2+_0x10171f,_0x453b56=(_0x26138f,_0x132be1,_0x8b6bf5)=>_0x26138f*(-0x125c+-0x46*-0x25+0x83f*0x1-_0x8b6bf5)+_0x132be1*_0x8b6bf5;let _0x44a663={};for(let _0x457fef of _0xc6f61a){const _0x251241=_0x457fef['name'],_0x5714aa=_0x457fef['encoding']['codec'],_0x4e79ba=_0x3200cd[_0x251241]['slice'](_0x47def2,_0x42fb9a);if(_0x5714aa==='pack_11_10'+'_11'){if(_0x251241==='scale'){const _0x174399=_0x35add7['min_scales'][_0x51b734],_0x292caa=_0x35add7['max_scales'][_0x51b734],_0x59480c=_0x16b777(_0x4e79ba),_0x118869=_0x59480c['length'],_0x7e7439=new Uint16Array(_0x118869);for(let _0xc6ba45=-0x18f0+0x1587+-0x123*-0x3;_0xc6ba45<_0x118869;_0xc6ba45++)_0x7e7439[_0xc6ba45]=_0x1f06eb(Math['exp'](_0x453b56(_0x174399[_0xc6ba45%(-0xa7*-0x8+-0xa2e*0x2+0xf27)],_0x292caa[_0xc6ba45%(-0x10a*0x4+0x13f9+-0xfce)],_0x59480c[_0xc6ba45])));_0x44a663[_0x251241]=_0x7e7439;}else{const _0x4b8238=_0x16b777(_0x4e79ba);let _0x7e59ac,_0x456f71;if(_0x251241==='position')_0x7e59ac=_0x35add7['min_means'][_0x51b734],_0x456f71=_0x35add7['max_means'][_0x51b734];else{if(_0x251241==='motion')_0x7e59ac=_0x35add7['min_motion'][_0x51b734],_0x456f71=_0x35add7['max_motion'][_0x51b734];else{if(_0x251241==='lifecycle'){const _0x234b7d=_0x35add7['min_t_scal'+'e'][_0x51b734],_0xf87251=_0x35add7['max_t_scal'+'e'][_0x51b734],_0x892aa0=_0x35add7['min_time'][_0x51b734],_0x12dac6=_0x35add7['max_time'][_0x51b734],_0x45662c=_0x35add7['min_cutoff'][_0x51b734],_0x35957d=_0x35add7['max_cutoff'][_0x51b734];_0x7e59ac=[_0x234b7d[-0x8*0x11c+0x237a+-0x1a9a],_0x892aa0[0x1bea+0x12c3*-0x1+-0x927],_0x45662c[-0x244f*0x1+0x62b+-0x789*-0x4]],_0x456f71=[_0xf87251[0x1*-0x1cbd+0x25a2+-0xb*0xcf],_0x12dac6[-0x1717+0x1102+-0x1*-0x615],_0x35957d[0x25d*0x1+0xd20+0x319*-0x5]];}else throw new Error('Unknown\x20at'+'tribute\x20fo'+'r\x20pack_11_'+'10_11:\x20'+_0x251241);}}for(let _0x4ede4b=0x277*0x7+-0x4*0x30a+-0x519;_0x4ede4b<_0x4b8238['length'];_0x4ede4b++)_0x4b8238[_0x4ede4b]=_0x453b56(_0x7e59ac[_0x4ede4b%(-0x1*-0x107c+0x1c00+-0xcf*0x37)],_0x456f71[_0x4ede4b%(-0x7*-0x27c+-0x257d+0x141c)],_0x4b8238[_0x4ede4b]);_0x44a663[_0x251241]=_0x4b8238;}}else{if(_0x5714aa==='pack_8888'){let _0x42febe=_0x36fc55(_0x4e79ba);const _0x291d7=_0x35add7['min_colors'][_0x51b734],_0x534867=_0x35add7['max_colors'][_0x51b734],_0x3ab947=new Uint16Array(_0x42febe['length']);for(let _0x5ca560=0x2b*0x73+0x2*-0x756+-0x4a5;_0x5ca560<_0x42febe['length'];_0x5ca560++){const _0x1537de=_0x5ca560*(0x14d7+-0x137*0x2+0x1*-0x1265);_0x3ab947[_0x1537de]=_0x1f06eb(_0x453b56(_0x291d7[0x2*-0x897+0x2a1*0x8+-0x3da],_0x534867[-0x1*-0x13f9+-0x207*-0xc+0x1*-0x2c4d],_0x42febe[_0x1537de])),_0x3ab947[_0x1537de+(-0x6bc*0x2+0x26a+0xb0f)]=_0x1f06eb(_0x453b56(_0x291d7[0x315*0x5+-0xa*-0xe+-0xff4],_0x534867[0xc*0x1c6+0x70a+-0x1c51],_0x42febe[_0x1537de+(0x374+-0x1be1+0x186e)])),_0x3ab947[_0x1537de+(0x5c7+0xc8e*0x2+-0x1ee1)]=_0x1f06eb(_0x453b56(_0x291d7[0xc7*-0x32+0x2*0x14c+-0x36*-0xac],_0x534867[0x248e+-0x2202+-0x1*0x28a],_0x42febe[_0x1537de+(0x9*0x3c+-0x1068+0xe4e*0x1)])),_0x3ab947[_0x1537de+(0x4a6+0x1f63+0x2*-0x1203)]=_0x1f06eb(_0x42febe[_0x1537de+(0x2550+0x1892*0x1+-0x3ddf)]);}_0x44a663[_0x251241]=_0x3ab947;}else{if(_0x5714aa==='pack_rotat'+'ion_32'){const _0x3825da=_0x4c1921(_0x4e79ba);_0x44a663[_0x251241]=_0x3825da;}else{if(_0x5714aa==='range_quan'+'t_u8'){if(_0x251241==='feature_re'+'st')continue;throw new Error('Unknown\x20co'+'dec:\x20'+_0x5714aa);}}}}}return{'chunkDecompressed':_0x44a663,'chunkStartIdx':_0x42fb9a};},_0xb78a6=(_0x3a0962,_0x1c88d0)=>{const _0xfc7c7c='feature_re'+'st',_0x711a85=_0x1c88d0['find'](_0xc3d0db=>_0xc3d0db['name']===_0xfc7c7c);let _0x54869b;const _0x2df39d=_0x711a85['encoding']['codec'],_0x3e9baf=_0x3a0962[_0xfc7c7c];if(_0x2df39d==='range_quan'+'t_u8'){const [_0x3747df,_0x32569f]=_0x711a85['encoding']['range'];_0x54869b=_0x36d498(_0x3e9baf,_0x3747df,_0x32569f);}else throw new Error('Unknown\x20co'+'dec:\x20'+_0x2df39d);return _0x54869b;},_0x51dba6=(_0x55156f,_0x36a22d,_0x34d4c0,_0x29dbb0)=>{let _0x12bc04=0x1876+-0x1d98+0x522*0x1;const _0x36007d={};for(const _0x427b3f of _0x34d4c0){const {dataSize:_0x70a4c8}=_0x5cd0e7(_0x427b3f,_0x36a22d);if(['vec3f','vec4f','vec2f']['includes'](_0x427b3f['dataType']))_0x36007d[_0x427b3f['name']]=new Float32Array(_0x55156f['buffer']['slice'](_0x12bc04,_0x12bc04+_0x70a4c8));else{if(_0x427b3f['dataType']['startsWith']('array<floa'+'t'))_0x36007d[_0x427b3f['name']]=new Float32Array(_0x55156f['buffer']['slice'](_0x12bc04,_0x12bc04+_0x70a4c8));else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x427b3f['dataType']);}_0x12bc04+=_0x70a4c8;}const _0x331cef=new Uint16Array(_0x36007d['scale']['length']);for(let _0x3c5f2b=0x44*0x2+0x1669+-0x16f1*0x1;_0x3c5f2b<_0x36007d['scale']['length'];_0x3c5f2b++)_0x331cef[_0x3c5f2b]=_0x1f06eb(Math['exp'](_0x36007d['scale'][_0x3c5f2b]));_0x36007d['scale']=_0x331cef;const _0x4af63b=_0x36007d['rotation']['length']/(0x1*-0x18c1+-0x1108+-0x105*-0x29),_0x38305b=new Float32Array(_0x4af63b*(-0x2e*-0x96+0x2600+-0x40f1));for(let _0x514874=-0x1433+0x2*0x6cd+0x699;_0x514874<_0x4af63b;_0x514874++){const _0x25176a=_0x932867(_0x36007d['rotation'][_0x514874*(-0x1022+-0x205+0x122b)],_0x36007d['rotation'][_0x514874*(0x1376+0x13d7*0x1+0x59*-0x71)+(0xc2*-0x1b+-0xdae+0x2225)],_0x36007d['rotation'][_0x514874*(0x147*0x6+0x1e9a+-0x2640)+(-0x13ed*0x1+0x107f*0x1+0x370)],_0x36007d['rotation'][_0x514874*(-0x1e18+0x26*-0x65+0x2d1a)+(-0x8d*0x7+0x1f3d*0x1+-0x21b*0xd)]);_0x38305b[_0x514874*(0x3*-0xd3+-0x494+0x710)]=_0x25176a['x'],_0x38305b[_0x514874*(-0x1*0x16ca+0x2*0x108f+-0xa51)+(0x682+0x166f+-0x4*0x73c)]=_0x25176a['y'],_0x38305b[_0x514874*(-0x2414+0x15ca+0x1*0xe4d)+(-0x12f*0x1+-0x1fd3+0x841*0x4)]=_0x25176a['z'];}return _0x36007d['rotation']=_0x38305b,_0x36007d['color_opac'+'ity']=_0x8568a(_0x36007d['color_opac'+'ity']),_0x36007d['time_index']=new Float32Array(_0x36a22d),_0x36007d['time_index']['fill'](_0x29dbb0-(0x1fe6+-0x178d+-0xb2*0xc)),_0x36007d;},_0x476c38=(_0x275020,_0x44301d)=>{const _0x50f12e={};if(_0x275020['length']===-0x22f7+0x6b2*-0x2+0x305c)return _0x275020[-0x55c+-0xe2*0x21+0x227e];for(const _0x5c4c75 of Object['keys'](_0x275020[0x1b51+0x327*-0x1+-0x182a]))if(_0x275020[-0x1d69+0x1ab0+-0x11*-0x29][_0x5c4c75]instanceof Float32Array||_0x275020[-0x1c2c+0x4*-0x33f+-0x6*-0x6dc][_0x5c4c75]instanceof Uint16Array){const _0x1930c6=_0x275020['reduce']((_0x9d897,_0x9a976)=>_0x9d897+_0x9a976[_0x5c4c75]['length'],0x3e*-0x93+-0xddd+0x3177);let _0x43bfef;_0x275020[-0x1*-0x1177+-0xc*-0x209+0x29e3*-0x1][_0x5c4c75]instanceof Uint16Array?_0x43bfef=new Uint16Array(_0x1930c6):_0x43bfef=new Float32Array(_0x1930c6);let _0x3c5201=-0x1cb8+0x130a+0x6*0x19d;for(const _0x4165e1 of _0x275020)_0x43bfef['set'](_0x4165e1[_0x5c4c75],_0x3c5201),_0x3c5201+=_0x4165e1[_0x5c4c75]['length'];_0x50f12e[_0x5c4c75]=_0x43bfef;}else Array['isArray'](_0x275020[-0x84*-0x18+-0x9a0+-0x1*0x2c0][_0x5c4c75])?_0x50f12e[_0x5c4c75]=_0x275020['flatMap'](_0x1d2387=>Array['from'](_0x1d2387[_0x5c4c75])):_0x50f12e[_0x5c4c75]=_0x275020['map'](_0x48f0e6=>_0x48f0e6[_0x5c4c75])['flat']();return _0x50f12e;};}class xN extends pe{constructor(_0x265ef3){super(),h(this,'manifestUr'+'l'),h(this,'worker'),(this['manifestUr'+'l']=_0x265ef3,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+vN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','cborXUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/cbor-x@1'+'.6.0.min.j'+'s'});}['loadGsdMan'+'ifest'](_0x55cf81){var _0x55005c;return(_0x55005c=this['worker'])==null||_0x55005c['postMessag'+'e']({'type':'loadGsdMan'+'ifest','manifestUrl':this['manifestUr'+'l'],'loadRepresentation':_0x55cf81}),new Promise((_0x55f1ac,_0x255f5a)=>{if(!this['worker']){_0x255f5a(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x482d36=>{if(!this['worker'])return;const {data:_0x1468fa}=_0x482d36;if(this['manifestUr'+'l']===_0x1468fa['url'])switch(_0x1468fa['type']){case'onloadMani'+'fest':_0x55f1ac({'manifest':_0x1468fa['data'],'url':_0x1468fa['url'],'representation':_0x1468fa['representa'+'tion']});break;case'error':_0x255f5a(_0x1468fa['data']);break;}};});}['loadGsdSeg'+'ments'](_0x17c4d9,_0x175150){var _0x2fd0ac;return(_0x2fd0ac=this['worker'])==null||_0x2fd0ac['postMessag'+'e']({'type':'loadGsdSeg'+'ments'}),new Promise((_0x391ff7,_0x227870)=>{if(!this['worker']){_0x227870(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x45eedf=>{if(!this['worker'])return;const {data:_0x405fd9}=_0x45eedf;if(this['manifestUr'+'l']===_0x405fd9['url'])switch(_0x405fd9['type']){case'progress':_0x17c4d9==null||_0x17c4d9(_0x405fd9['bytes'],_0x405fd9['totalLengt'+'h'],_0x405fd9['url']);break;case'loadGsdSeg'+'mentsDone':_0x391ff7(_0x405fd9['data']);break;case'error':_0x175150==null||_0x175150(_0x405fd9['data'],_0x405fd9['url']);break;}};});}['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x4faf8c,_0xb0a0a5,_0x24e6b0){var _0xd3ca9;return(_0xd3ca9=this['worker'])==null||_0xd3ca9['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'ments','timelineIndexs':_0x4faf8c}),new Promise((_0x25e141,_0x20eaa8)=>{if(!this['worker']){_0x20eaa8(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x2cad5c=>{if(!this['worker'])return;const {data:_0x46e4e5}=_0x2cad5c;if(this['manifestUr'+'l']===_0x46e4e5['url'])switch(_0x46e4e5['type']){case'progress':_0xb0a0a5==null||_0xb0a0a5(_0x46e4e5['bytes'],_0x46e4e5['totalLengt'+'h'],_0x46e4e5['url']);break;case'loadTimeli'+'neIndexSeg'+'mentsDone':_0x25e141(_0x46e4e5);break;case'error':_0x24e6b0==null||_0x24e6b0(_0x46e4e5['data'],_0x46e4e5['url']);break;}};});}['destroy'](){this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0xf82+-0x1aa7+0xb25));}}const gc=class gc{constructor(_0x4ba9f6,_0x2f28eb,_0x7c74fb){h(this,'lastLoadIn'+'dex',0x3d*0x7+0x2*-0xfc5+0x1ddf),h(this,'gsdAssetPa'+'rser'),(this['manifest']=_0x4ba9f6,this['representa'+'tion']=_0x2f28eb,this['gsdAssetPa'+'rser']=_0x7c74fb,this['segmentTim'+'elines']=this['getSegment'+'Timeline'](_0x4ba9f6,_0x2f28eb));}['getSegment'+'Timeline'](_0x161215,_0x2d8346){let _0x4058fc=null;for(const _0x41bad1 of _0x161215['adaptation'+'Sets'])if(_0x41bad1['contentTyp'+'e']==='4dgs'){for(const _0x4f1a7a of _0x41bad1['representa'+'tions'])if(_0x4f1a7a['id']===_0x2d8346){_0x4058fc=_0x4f1a7a;break;}break;}if(!_0x4058fc)throw new Error('Representa'+'tion\x20\x27'+_0x2d8346+('\x27\x20not\x20foun'+'d'));return _0x4058fc['segmentTem'+'plate'][0x5*-0x53a+-0x10a5+-0x2ac7*-0x1]['segmentTim'+'eline'];}['onTimeChan'+'ged'](_0x3f2285){const _0x5d82f3=this['findSegmen'+'tTimeline'](_0x3f2285);if(!_0x5d82f3)return;const _0x35cf62=_0x5d82f3['timelineIn'+'dex']<this['segmentTim'+'elines']['length']-(0x1487+-0x3c*0x2a+0x557*-0x2)?_0x5d82f3['timelineIn'+'dex']+(0x3*-0x8c4+-0x5*-0x336+0xa3f):-0xfaf+0x476+0xb39;this['lastLoadIn'+'dex']!==_0x35cf62&&(this['lastLoadIn'+'dex']=_0x35cf62,this['loadNextSe'+'gment'](_0x35cf62));}async['loadNextSe'+'gment'](_0x3d3ff7){const _0x55184e=[];for(let _0x48aaf6=0x261d*0x1+-0x1*0x1999+-0x642*0x2;_0x48aaf6<gc['CACHE_COUN'+'T'];_0x48aaf6++)_0x55184e['push']((_0x3d3ff7+_0x48aaf6)%this['segmentTim'+'elines']['length']);const _0x3276ee=_0x55184e[_0x55184e['length']-(0x2312+0xb6e+-0x2e7f)],_0xc5ac85=this['segmentTim'+'elines'][_0x3276ee]['t']+this['segmentTim'+'elines'][_0x3276ee]['d'];this['gsdAssetPa'+'rser']['appendload'+'DataTask'](_0x55184e,_0xc5ac85);}['findSegmen'+'tTimeline'](_0x577ec9){let _0x29ad4a=0x856+-0x1*0x595+0xeb*-0x3,_0x394aef=this['segmentTim'+'elines']['length']-(-0x1*0x1ad2+0x14ea+0x5e9*0x1);for(;_0x29ad4a<=_0x394aef;){const _0x3221d6=_0x29ad4a+_0x394aef>>-0x1*-0x990+0x2c*-0x4+-0x1*0x8df,{t:_0x1a1f0e,d:_0x2af962}=this['segmentTim'+'elines'][_0x3221d6];if(_0x577ec9<_0x1a1f0e)_0x394aef=_0x3221d6-(0x14c4+-0x1bb9*-0x1+-0x3a*0xd6);else{if(_0x577ec9>=_0x1a1f0e+_0x2af962)_0x29ad4a=_0x3221d6+(0x2a1*0x6+0x1b20+-0x2ae5);else return{'timeline':this['segmentTim'+'elines'][_0x3221d6],'timelineIndex':_0x3221d6};}}return null;}};h(gc,'CACHE_COUN'+'T',-0xdd*0x1a+0x1*0xc+-0x23*-0xa4);let cu=gc;class TN{constructor(_0x4f7816,_0x37acb4){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'manifest'),h(this,'schedule'),h(this,'readWorker'),h(this,'loadDataTa'+'skQueue',[]),h(this,'isProcessi'+'ngLoadTask'+'Queue',!(0x66e+-0x723*-0x4+0x4ff*-0x7)),(console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','Register\x20G'+'sdParser.c'+'onstructor'),this['app']=_0x4f7816,this['maxRetries']=_0x37acb4,this['urlList']=[],this['gsplatReso'+'urce']=null,this['totalRecei'+'ved']=-0x1*-0x4e2+0x2*-0xf59+0x19d0,this['manifest']={});}async['load'](_0x3cfdb4,_0x511625,_0x416a19){console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','GsdParser.'+'load',_0x3cfdb4['load']);const _0x5423b1=_0x416a19['data']['events'];this['events']=_0x5423b1,this['asset']=_0x416a19,this['callback']=_0x511625,this['timeOption']=_0x416a19['data']['timeOption'];let _0x11641b=_0x416a19['data']['representa'+'tion']||'high-raw';this['readWorker']=new xN(_0x3cfdb4['load']);const _0x204527=await this['readWorker']['loadGsdMan'+'ifest'](_0x11641b);this['manifest']=_0x204527['manifest'],_0x11641b=_0x204527['manifest']['representa'+'tion']||_0x11641b,this['schedule']=new cu(this['manifest'],_0x11641b,this),this['totalRecei'+'vedCount']=-0x145a+-0x493+0x18ed;const _0x3c885f=this['getSegment'+'Timeline'](this['manifest'],_0x11641b),_0x3df7bb=_0x3c885f[0x1*0x679+0x197b+-0x664*0x5]['t']+_0x3c885f[0x1cf5+-0x1*-0x959+-0x264e]['d'];this['appendload'+'DataTask']([-0xc52+0x22*-0x4+0xcda,-0x2173*-0x1+-0x2481+0x9*0x57],_0x3df7bb),_0x5423b1['on']('timeChange'+'d',_0x2671a9=>{var _0x307bb7;(_0x307bb7=this['schedule'])==null||_0x307bb7['onTimeChan'+'ged'](_0x2671a9);});}['getSegment'+'Timeline'](_0x5af7b3,_0x196fa4){let _0x20e8f3=null;for(const _0x13be07 of _0x5af7b3['adaptation'+'Sets'])if(_0x13be07['contentTyp'+'e']==='4dgs'){for(const _0x92870f of _0x13be07['representa'+'tions'])if(_0x92870f['id']===_0x196fa4){_0x20e8f3=_0x92870f;break;}break;}if(!_0x20e8f3)throw new Error('Representa'+'tion\x20\x27'+_0x196fa4+('\x27\x20not\x20foun'+'d'));return _0x20e8f3['segmentTem'+'plate'][0x1*0x17cf+0x2298+-0x3a67]['segmentTim'+'eline'];}['appendload'+'DataTask'](_0x66f5e,_0xb7b6a2){this['loadDataTa'+'skQueue']['push']({'segmentIndexs':_0x66f5e,'loadedTime':_0xb7b6a2}),this['isProcessi'+'ngLoadTask'+'Queue']||Promise['resolve']()['then'](()=>this['processLoa'+'dQueue']());}async['processLoa'+'dQueue'](){if(!this['isProcessi'+'ngLoadTask'+'Queue']){this['isProcessi'+'ngLoadTask'+'Queue']=!(0x3*0x829+0x200a*-0x1+0x78f);try{for(;this['loadDataTa'+'skQueue']['length']>0x1169+-0x395+-0xdd4;){const _0x56ca04=this['loadDataTa'+'skQueue']['shift']();await this['loadGsplat'+'Data'](_0x56ca04);}}finally{this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x23ea+-0x2427+0x267*0x1e);}}}async['loadGsplat'+'Data'](_0x4c65b7){var _0x54105a,_0x302458;const {segmentIndexs:_0x27f16a,loadedTime:_0x405097}=_0x4c65b7,_0x4f0dee=this['events'],_0x2595c1=this['asset'],_0x1afae8=this['callback'],_0x34d45a=this['timeOption'];globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('____loadTi'+'me','gsd\x20======'+'=========='+'=========='+'=========='+'=========='+'========='),console['log']('____loadTi'+'me','gsd\x20start\x20'+'loadGsplat'+'Data',_0x27f16a,(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](-0x5*0x4eb+-0x2138+-0x13*-0x30b));try{const _0x3a4d41=await this['readWorker']['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x27f16a,(_0x554ff7,_0x598d86)=>{this['totalRecei'+'ved']+=_0x554ff7,_0x2595c1&&_0x4f0dee['fire']('progress',this['totalRecei'+'ved'],_0x598d86);},(_0xa9b40a,_0x934547)=>{debugger;console['warn']('ERROE\x20Load'+'\x20GSD',_0x934547,_0xa9b40a);});console['log']('____loadTi'+'me','gsd\x20end\x20lo'+'adGsplatDa'+'ta',(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](0x12dd+-0x7c3+-0xb18),_0x3a4d41['data']['elements'][0xf*0x1eb+-0x12b0*0x2+0x89b*0x1]['count'],((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/_0x3a4d41['data']['elements'][0xaa9+0x3c7*-0x4+0x473]['count']*(0x6e9*-0x9+0x4c6*-0xb+-0x3*-0x3341))['toFixed'](-0x238a+0x11ed+0x119f*0x1));const _0x1d07cc=_0x3a4d41['data'];if(_0x1d07cc['elements'][0x3f2+-0x3*0x8db+0x1*0x169f]['count']===-0x5ba*0x2+0x1*-0x2109+0x65b*0x7)return;this['totalRecei'+'vedCount']+=_0x1d07cc['elements'][0x7be*0x5+-0x7*0x458+-0x84e]['count'];const _0x23e5b5=new mb(_0x1d07cc['elements'],_0x1d07cc['comments']);_0x2595c1['fire']('load:data',_0x23e5b5);const _0x5d4d49=_0x2595c1['data']['createTime']!==((_0x302458=(_0x54105a=this['onlyOneAss'+'et'])==null?void(0x2274+-0x224f+-0x25):_0x54105a['data'])==null?void(0x5f6+-0x1738+0x1142):_0x302458['createTime']);this['gsplatReso'+'urce']&&!_0x5d4d49?(console['log']('____\x20ENGIN'+'E\x20IVAN','appendGSpl'+'atDecodedR'+'esource'),this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x23e5b5,_0x34d45a,_0x405097,_0x2595c1)):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'DecodedRes'+'ource'),this['gsplatReso'+'urce']=new Ub(this['app']['graphicsDe'+'vice'],_0x23e5b5),this['gsplatReso'+'urce']['setSceneIn'+'fo'](this['manifest']['sceneInfo']),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x34d45a,this['onlyOneAss'+'et']=_0x2595c1,_0x1afae8&&_0x1afae8(null,this['gsplatReso'+'urce']),_0x4f0dee['fire']('loadAllAss'+'etsDone'));}catch(_0x235fa2){console['error']('loadGsplat'+'Data','error',_0x235fa2),_0x1afae8&&_0x1afae8(_0x235fa2,null);}}['open'](_0x3bfc35,_0x57ea12){return _0x57ea12;}}class wN extends Ze{constructor(_0x474dfc){console['log']('____\x20ENGIN'+'E\x20IVAN','Register\x20G'+'SplatHandl'+'er.constru'+'ctor\x20by\x20ap'+'plication\x20'+'addResourc'+'eHandles'),super(_0x474dfc,'gsplat'),this['parsers']={'ply':new yN(_0x474dfc,-0xef4+-0x8b*-0x47+-0x2*0xbcb),'json':new TN(_0x474dfc,-0xb38+-0x6de+-0x1*-0x1219)};}['_getUrlWit'+'houtParams'](_0x426f0d){return _0x426f0d['indexOf']('?')>=0x1*0xb29+0xe5a*-0x1+0x331?_0x426f0d['split']('?')[0x9d*0x1d+-0x13f3*0x1+0x22a]:_0x426f0d;}['_getParser'](_0x559c4f){const _0x2b05f7=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x559c4f))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x2b05f7]||this['parsers']['ply'];}['load'](_0x3b29fa,_0x269213,_0x396a96){console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.load'),typeof _0x3b29fa=='string'&&(_0x3b29fa={'load':_0x3b29fa,'original':_0x3b29fa}),this['_getParser'](_0x3b29fa['original'])['load'](_0x3b29fa,_0x269213,_0x396a96);}['open'](_0xf77813,_0x177493,_0x1e4596){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.open'),_0x177493;}}class du{static['setCompres'+'sedPRS'](_0x1f70ce,_0x216c21,_0x3ce951){const _0x5bbf8b=_0x3ce951['singleVecs'];let _0x216baf,_0x5e127e;const _0x11e21e=_0x216c21['___1'];_0x11e21e||(_0x216baf=_0x3ce951['tripleVecs'],_0x5e127e=_0x216c21['___2']);let _0x132710=_0x11e21e?_0x11e21e[-0xcd7+0x245e+0x1787*-0x1]:_0x216baf[_0x5e127e];_0x1f70ce['setLocalPo'+'sition'](_0x5bbf8b[_0x132710],_0x5bbf8b[_0x132710+(0x2353+-0x1*-0x812+-0x2b64)],_0x5bbf8b[_0x132710+(-0x71d+-0x27*-0x6d+-0x97c)]),_0x132710=_0x11e21e?_0x11e21e[0x1ec6+0x487+-0x234c]:_0x216baf[_0x5e127e+(-0x1763*-0x1+-0x66d+-0x10f5)],_0x1f70ce['setLocalEu'+'lerAngles'](_0x5bbf8b[_0x132710],_0x5bbf8b[_0x132710+(-0xaf*-0x21+-0x2523+0xe95)],_0x5bbf8b[_0x132710+(-0x1*-0x26e3+-0x2a7+-0x243a)]),_0x132710=_0x11e21e?_0x11e21e[0x23f3+0x1*0x1b23+0x5bc*-0xb]:_0x216baf[_0x5e127e+(0xdc2+-0xabb+0x305*-0x1)],_0x1f70ce['setLocalSc'+'ale'](_0x5bbf8b[_0x132710],_0x5bbf8b[_0x132710+(0x19*0xe4+-0xda1*-0x1+-0x23e4)],_0x5bbf8b[_0x132710+(0x1418*-0x1+0x308+0x1112)]);}static['oneCharToK'+'ey'](_0x3364dd,_0x408722){const _0x158a7c=_0x3364dd['charCodeAt'](0x1507+-0x5*-0x3bb+-0x2*0x13d7)-_0x408722['fieldFirst'+'Code'];return _0x408722['fieldArray'][_0x158a7c];}static['multCharTo'+'Key'](_0x4975f8,_0x5950d1){let _0x50cc93=0x206e+0x9*0x27d+-0x5*0xaf7;for(let _0x1f1655=0xe50+0x1201+0x1*-0x2051;_0x1f1655<_0x4975f8['length'];_0x1f1655++)_0x50cc93=_0x50cc93*_0x5950d1['fieldCodeB'+'ase']+_0x4975f8['charCodeAt'](_0x1f1655)-_0x5950d1['fieldFirst'+'Code'];return _0x5950d1['fieldArray'][_0x50cc93];}}class hc{constructor(_0x1d5776,_0x1fa4fd){this['_node']=_0x1d5776,this['_data']=_0x1fa4fd;}['run'](){const _0x13e62b=Object['prototype']['toString']['call'](this['_node']);return _0x13e62b==='[object\x20Ob'+'ject]'?this['_handleMap']():_0x13e62b==='[object\x20Ar'+'ray]'?this['_handleArr'+'ay']():this['_result']=this['_node'],this['_result'];}['_handleMap'](){this['_result']={},Object['keys'](this['_node'])['forEach'](this['_handleKey'],this);}['_handleKey'](_0x3a160f){let _0x35c8ee=_0x3a160f;const _0x523715=_0x3a160f['length'];_0x523715===-0x607*-0x2+0x2202+0x2e0f*-0x1?_0x35c8ee=du['oneCharToK'+'ey'](_0x3a160f,this['_data']):_0x523715===0x1a*0x2a+-0x1dad+-0x879*-0x3&&(_0x35c8ee=du['multCharTo'+'Key'](_0x3a160f,this['_data'])),this['_result'][_0x35c8ee]=new hc(this['_node'][_0x3a160f],this['_data'])['run']();}['_handleArr'+'ay'](){this['_result']=[],this['_node']['forEach'](this['_handleArE'+'lt'],this);}['_handleArE'+'lt'](_0xf9453c){const _0x4a0312=new hc(_0xf9453c,this['_data'])['run']();this['_result']['push'](_0x4a0312);}}class Vm{constructor(_0x3bf00f,_0x3f245e){this['_app']=_0x3bf00f,this['_isTemplat'+'e']=_0x3f245e;}['parse'](_0x1ff575){const _0x658058={};let _0xc1edf2=null;const _0x105130=_0x1ff575['compressed'+'Format'];_0x105130&&!_0x1ff575['entDecompr'+'essed']&&(_0x1ff575['entDecompr'+'essed']=!(-0x22b0+0x1ae+0x2102),_0x1ff575['entities']=new hc(_0x1ff575['entities'],_0x105130)['run']());for(const _0x212d1a in _0x1ff575['entities']){const _0x3f7c37=_0x1ff575['entities'][_0x212d1a],_0x3913ce=this['_createEnt'+'ity'](_0x3f7c37,_0x105130);_0x658058[_0x212d1a]=_0x3913ce,_0x3f7c37['parent']===null&&(_0xc1edf2=_0x3913ce);}for(const _0x5d4e39 in _0x1ff575['entities']){const _0x47994c=_0x658058[_0x5d4e39],_0x36ceed=_0x1ff575['entities'][_0x5d4e39]['children'],_0x21210b=_0x36ceed['length'];for(let _0x1f3ec7=-0x1*-0x25a3+0x6e5+-0x474*0xa;_0x1f3ec7<_0x21210b;_0x1f3ec7++){const _0x404fe7=_0x658058[_0x36ceed[_0x1f3ec7]];_0x404fe7&&_0x47994c['addChild'](_0x404fe7);}}return this['_openCompo'+'nentData'](_0xc1edf2,_0x1ff575['entities']),_0xc1edf2;}['_createEnt'+'ity'](_0x29d4fe,_0x3abdc7){const _0x29373a=new ot(_0x29d4fe['name'],this['_app']);if(_0x29373a['setGuid'](_0x29d4fe['resource_i'+'d']),this['_setPosRot'+'Scale'](_0x29373a,_0x29d4fe,_0x3abdc7),_0x29373a['_enabled']=_0x29d4fe['enabled']??!(0x3e5*0x7+0x260+0x1*-0x1da3),this['_isTemplat'+'e']?_0x29373a['_template']=!(0x1*0x238c+0x20*0x16+-0x102*0x26):_0x29373a['_enabledIn'+'Hierarchy']=_0x29373a['_enabled'],_0x29373a['template']=_0x29d4fe['template'],_0x29d4fe['tags']){for(let _0x43c7c5=-0x1f88+-0x75d+0x26e5*0x1;_0x43c7c5<_0x29d4fe['tags']['length'];_0x43c7c5++)_0x29373a['tags']['add'](_0x29d4fe['tags'][_0x43c7c5]);}return _0x29373a;}['_setPosRot'+'Scale'](_0x544521,_0x258ef1,_0x6d7dca){if(_0x6d7dca)du['setCompres'+'sedPRS'](_0x544521,_0x258ef1,_0x6d7dca);else{const _0x576fb2=_0x258ef1['position'],_0x3dbf48=_0x258ef1['rotation'],_0x219d7f=_0x258ef1['scale'];_0x544521['setLocalPo'+'sition'](_0x576fb2[0x1*0x18bd+0x133c+-0x2bf9*0x1],_0x576fb2[0x105+0x12bd+-0x13c1],_0x576fb2[-0x1*0x25ab+-0x13*0xd0+0x351d]),_0x544521['setLocalEu'+'lerAngles'](_0x3dbf48[-0xf07+-0x2356*-0x1+0x6c5*-0x3],_0x3dbf48[0x1*0x2d+0xb8*-0x22+-0x1844*-0x1],_0x3dbf48[-0x1*-0x234f+-0x5ed*0x5+-0x5ac]),_0x544521['setLocalSc'+'ale'](_0x219d7f[0x2133+-0x119*0x16+-0x90d],_0x219d7f[0x25e5+0x1c0b+-0x41ef],_0x219d7f[-0x1*-0x112+0xb57*0x1+-0xc67]);}}['_openCompo'+'nentData'](_0x3bc305,_0x166090){const _0x11f6e6=this['_app']['systems']['list'];let _0x2cc3b0=_0x11f6e6['length'];const _0x3a73fc=_0x166090[_0x3bc305['getGuid']()];for(let _0x275ba4=0xc3*-0xe+0x2476+-0x19cc;_0x275ba4<_0x2cc3b0;_0x275ba4++){const _0xd48efa=_0x11f6e6[_0x275ba4],_0xf47688=_0x3a73fc['components'][_0xd48efa['id']];_0xf47688&&_0xd48efa['addCompone'+'nt'](_0x3bc305,_0xf47688);}_0x2cc3b0=_0x3a73fc['children']['length'];const _0x9560b5=_0x3bc305['_children'];for(let _0x349e3a=0xeb5+0x2532+-0x2b*0x135;_0x349e3a<_0x2cc3b0;_0x349e3a++)_0x9560b5[_0x349e3a]?_0x9560b5[_0x349e3a]=this['_openCompo'+'nentData'](_0x9560b5[_0x349e3a],_0x166090):M['warn']('Scene\x20data'+'\x20is\x20invali'+'d\x20where\x20a\x20'+'child\x20unde'+'r\x20\x22'+_0x3bc305['name']+('\x22\x20Entity\x20d'+'oesn\x27t\x20exi'+'st.\x20Please'+'\x20check\x20the'+'\x20scene\x20dat'+'a.'));return _0x3bc305;}}class Fv{static['load'](_0x166e57,_0x52ff61,_0x2368f6){typeof _0x166e57=='string'&&(_0x166e57={'load':_0x166e57,'original':_0x166e57}),nt['get'](_0x166e57['load'],{'retry':_0x52ff61>-0xd6*-0x1b+-0xe5+-0x15ad,'maxRetries':_0x52ff61},(_0x3780aa,_0x98b615)=>{if(!_0x3780aa)_0x2368f6(_0x3780aa,_0x98b615);else{let _0x3e4e8d='Error\x20whil'+'e\x20loading\x20'+'scene\x20JSON'+'\x20'+_0x166e57['original'];_0x3780aa['message']?(_0x3e4e8d+=':\x20'+_0x3780aa['message'],_0x3780aa['stack']&&(_0x3e4e8d+='\x0a'+_0x3780aa['stack'])):_0x3e4e8d+=':\x20'+_0x3780aa,_0x2368f6(_0x3e4e8d);}});}}class EN extends Ze{constructor(_0x3bacfe){super(_0x3bacfe,'hierarchy');}['load'](_0x33493a,_0x5773bc){Fv['load'](_0x33493a,this['maxRetries'],_0x5773bc);}['open'](_0xc076a6,_0x3c821e){this['_app']['systems']['script']['preloading']=!(-0x1*-0x1d99+-0x15c1*-0x1+0x15*-0x272);const _0x1b35a1=new Vm(this['_app'],!(0x1f71*-0x1+0x26b8+0x3a3*-0x2))['parse'](_0x3c821e);return this['_app']['systems']['script']['preloading']=!(0x161*-0x19+0x1e29+0x451),_0x1b35a1;}}class AN extends Ze{constructor(_0x10f560){super(_0x10f560,'html'),h(this,'decoder',null);}['load'](_0xeadd38,_0x27cf55){typeof _0xeadd38=='string'&&(_0xeadd38={'load':_0xeadd38,'original':_0xeadd38}),nt['get'](_0xeadd38['load'],{'retry':this['maxRetries']>0x1*0x14e9+0x679*0x2+0x141*-0x1b,'maxRetries':this['maxRetries']},(_0x165118,_0x50e43)=>{_0x165118?_0x27cf55('Error\x20load'+'ing\x20html\x20r'+'esource:\x20'+_0xeadd38['original']+'\x20['+_0x165118+']'):_0x27cf55(null,_0x50e43);});}['openBinary'](_0x4ddbfa){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x4ddbfa);}}class bN extends Ze{constructor(_0x376cc5){super(_0x376cc5,'json'),h(this,'decoder',null);}['load'](_0x45ede2,_0x44f9ad){typeof _0x45ede2=='string'&&(_0x45ede2={'load':_0x45ede2,'original':_0x45ede2});const _0x3d0176={'retry':this['maxRetries']>0x1*-0x151+-0xb04+0xc55,'maxRetries':this['maxRetries']};_0x45ede2['load']['startsWith']('blob:')&&(_0x3d0176['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x45ede2['load'],_0x3d0176,(_0x2f081d,_0x4e4d4e)=>{_0x2f081d?_0x44f9ad('Error\x20load'+'ing\x20JSON\x20r'+'esource:\x20'+_0x45ede2['original']+'\x20['+_0x2f081d+']'):_0x44f9ad(null,_0x4e4d4e);});}['openBinary'](_0x14ab3a){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),JSON['parse'](this['decoder']['decode'](_0x14ab3a));}}class CN{constructor(){this['removeInva'+'lid']=!(0x1098+-0x1da8+-0xd10*-0x1),this['valid']=!(-0x29*0xb1+0x371+0x18e8),this['enumValida'+'tors']={'occludeSpecular':this['_createEnu'+'mValidator']([py,Kc,_y]),'cull':this['_createEnu'+'mValidator']([xt,Jr,mo,N0]),'blendType':this['_createEnu'+'mValidator']([lm,hm,Gs,ys,bn,cm,Yc,dm,fm,um,mm]),'depthFunc':this['_createEnu'+'mValidator']([k0,Dh,Lh,df,U0,B0,z0,Ni])};}['setInvalid'](_0x4eabd9,_0x1888ac){this['valid']=!(-0x3*-0x442+0x185f+-0x2524*0x1),M['warn']('Ignoring\x20i'+'nvalid\x20Sta'+'ndardMater'+'ial\x20proper'+'ty:\x20'+_0x4eabd9,_0x1888ac[_0x4eabd9]),this['removeInva'+'lid']&&delete _0x1888ac[_0x4eabd9];}['validate'](_0x568c49){const _0x414b9f=Mn,_0x2624fb=PE,_0x5054e1=_0x568c49['mappingFor'+'mat']==='path';for(const _0x5420e8 in _0x568c49){const _0x33ab08=_0x414b9f[_0x5420e8];if(!_0x33ab08){_0x2624fb[_0x5420e8]?delete _0x568c49[_0x5420e8]:(M['warnOnce']('Ignoring\x20u'+'nsupported'+'\x20input\x20pro'+'perty\x20to\x20s'+'tandard\x20ma'+'terial:\x20'+_0x5420e8),this['valid']=!(-0x7b7+0x2647+-0x1e8f));continue;}if(_0x33ab08['startsWith']('enum')){const _0x377428=_0x33ab08['split'](':')[0x1cdd+0x1dfc+-0x3ad8];this['enumValida'+'tors'][_0x377428]&&(this['enumValida'+'tors'][_0x377428](_0x568c49[_0x5420e8])||this['setInvalid'](_0x5420e8,_0x568c49));}else{if(_0x33ab08==='number')typeof _0x568c49[_0x5420e8]!='number'&&this['setInvalid'](_0x5420e8,_0x568c49);else{if(_0x33ab08==='boolean')typeof _0x568c49[_0x5420e8]!='boolean'&&this['setInvalid'](_0x5420e8,_0x568c49);else{if(_0x33ab08==='string')typeof _0x568c49[_0x5420e8]!='string'&&this['setInvalid'](_0x5420e8,_0x568c49);else{if(_0x33ab08==='vec2')_0x568c49[_0x5420e8]instanceof Array&&_0x568c49[_0x5420e8]['length']===-0x8+0x1*0xfd3+-0xfc9||this['setInvalid'](_0x5420e8,_0x568c49);else{if(_0x33ab08==='rgb')_0x568c49[_0x5420e8]instanceof Array&&_0x568c49[_0x5420e8]['length']===-0xbdd*-0x1+-0x119*-0xd+0x2e7*-0x9||this['setInvalid'](_0x5420e8,_0x568c49);else{if(_0x33ab08==='texture')_0x5054e1?typeof _0x568c49[_0x5420e8]=='string'||_0x568c49[_0x5420e8]===null||_0x568c49[_0x5420e8]instanceof _e||this['setInvalid'](_0x5420e8,_0x568c49):typeof _0x568c49[_0x5420e8]=='number'||_0x568c49[_0x5420e8]===null||_0x568c49[_0x5420e8]instanceof _e||this['setInvalid'](_0x5420e8,_0x568c49);else{if(_0x33ab08==='boundingbo'+'x')_0x568c49[_0x5420e8]['center']&&_0x568c49[_0x5420e8]['center']instanceof Array&&_0x568c49[_0x5420e8]['center']['length']===0x93*-0x3+-0x1c43+0x1dff||this['setInvalid'](_0x5420e8,_0x568c49),_0x568c49[_0x5420e8]['halfExtent'+'s']&&_0x568c49[_0x5420e8]['halfExtent'+'s']instanceof Array&&_0x568c49[_0x5420e8]['halfExtent'+'s']['length']===-0x11*-0x13e+-0x1b1f+0x604||this['setInvalid'](_0x5420e8,_0x568c49);else{if(_0x33ab08==='cubemap')typeof _0x568c49[_0x5420e8]=='number'||_0x568c49[_0x5420e8]===null||_0x568c49[_0x5420e8]===void(0x2*0x12c8+-0x920+0x1c*-0x104)||_0x568c49[_0x5420e8]instanceof _e&&_0x568c49[_0x5420e8]['cubemap']||this['setInvalid'](_0x5420e8,_0x568c49);else{if(_0x33ab08==='chunks'){const _0x3c7228=Object['keys'](_0x568c49[_0x5420e8]);for(let _0x5e2ce6=0xe*0x25c+-0x123*0x22+0x2*0x2cf;_0x5e2ce6<_0x3c7228['length'];_0x5e2ce6++)typeof _0x568c49[_0x5420e8][_0x3c7228[_0x5e2ce6]]!='string'&&this['setInvalid'](_0x3c7228[_0x5e2ce6],_0x568c49[_0x5420e8]);}else console['error']('Unknown\x20ma'+'terial\x20typ'+'e:\x20'+_0x33ab08);}}}}}}}}}}return _0x568c49['validated']=!(-0x2*0x414+-0x255+-0x3*-0x37f),this['valid'];}['_createEnu'+'mValidator'](_0xcce9f5){return function(_0xb79a54){return _0xcce9f5['indexOf'](_0xb79a54)>=-0xca7*0x1+-0x63f*-0x3+-0x616;};}}class PN{constructor(){this['_validator']=null;}['parse'](_0x706711){const _0x34cf4e=this['migrate'](_0x706711),_0x4948b0=this['_validate'](_0x34cf4e),_0x4ece17=new ws();return this['initialize'](_0x4ece17,_0x4948b0),_0x4ece17;}['initialize'](_0x2fa199,_0x1fb052){if(_0x1fb052['validated']||(_0x1fb052=this['_validate'](_0x1fb052)),_0x1fb052['chunks']&&_0x1fb052['chunks']&&Object['keys'](_0x1fb052['chunks'])['length']>-0x162+-0x12*0xe3+0x1158){const _0x5dc806=_0x2fa199['shaderChun'+'ks']['glsl'];Object['entries'](_0x1fb052['chunks'])['forEach'](([_0x56f256,_0x21487c])=>_0x5dc806['set'](_0x56f256,_0x21487c));}for(const _0x168d76 in _0x1fb052){const _0x4c2634=Mn[_0x168d76],_0x1a6560=_0x1fb052[_0x168d76];if(_0x4c2634==='vec2')_0x2fa199[_0x168d76]=new J(_0x1a6560[0x8f0+-0x2a2*0x4+0x198],_0x1a6560[0x343*0x2+-0x9e7+0x362]);else{if(_0x4c2634==='rgb')_0x2fa199[_0x168d76]=new ie(_0x1a6560[-0xfc2+0x2215+-0x1253],_0x1a6560[-0x8*-0x47f+-0x37b+-0x207c],_0x1a6560[-0x1ff1+-0x1*0x3bf+0x23b2]);else{if(_0x4c2634==='texture')_0x1a6560 instanceof _e?_0x2fa199[_0x168d76]=_0x1a6560:_0x2fa199[_0x168d76]instanceof _e&&typeof _0x1a6560=='number'&&_0x1a6560>0x248e+-0x5*-0x6f3+-0x474d||(_0x2fa199[_0x168d76]=null);else{if(_0x4c2634==='cubemap')_0x1a6560 instanceof _e?_0x2fa199[_0x168d76]=_0x1a6560:_0x2fa199[_0x168d76]instanceof _e&&typeof _0x1a6560=='number'&&_0x1a6560>0x6a3+0x2*-0x1271+0x1e3f||(_0x2fa199[_0x168d76]=null),_0x168d76==='cubeMap'&&!_0x1a6560&&(_0x2fa199['prefiltere'+'dCubemaps']=null);else{if(_0x4c2634==='boundingbo'+'x'){const _0x8b3a1f=new I(_0x1a6560['center'][0xb99*-0x1+0x1e6*-0x9+0x1caf],_0x1a6560['center'][0x1*0x12c5+0x357+0x1*-0x161b],_0x1a6560['center'][-0x1035+0x858*0x2+0xb*-0xb]),_0x414321=new I(_0x1a6560['halfExtent'+'s'][-0x1531+-0x1706+0xb*0x405],_0x1a6560['halfExtent'+'s'][0xd95+-0x17a+0xc1a*-0x1],_0x1a6560['halfExtent'+'s'][-0x1*0x21c8+-0x1*-0xae5+0x16e5]);_0x2fa199[_0x168d76]=new Ie(_0x8b3a1f,_0x414321);}else _0x2fa199[_0x168d76]=_0x1fb052[_0x168d76];}}}}}_0x2fa199['update']();}['migrate'](_0x46af04){_0x46af04['shader']&&delete _0x46af04['shader'],_0x46af04['mapping_fo'+'rmat']&&(_0x46af04['mappingFor'+'mat']=_0x46af04['mapping_fo'+'rmat'],delete _0x46af04['mapping_fo'+'rmat']);let _0x234607;const _0x5e7bc6=[['bumpMapFac'+'tor','bumpiness'],['aoUvSet','aoMapUv'],['aoMapVerte'+'xColor','aoVertexCo'+'lor'],['diffuseMap'+'VertexColo'+'r','diffuseVer'+'texColor'],['emissiveMa'+'pVertexCol'+'or','emissiveVe'+'rtexColor'],['specularMa'+'pVertexCol'+'or','specularVe'+'rtexColor'],['metalnessM'+'apVertexCo'+'lor','metalnessV'+'ertexColor'],['opacityMap'+'VertexColo'+'r','opacityVer'+'texColor'],['glossMapVe'+'rtexColor','glossVerte'+'xColor'],['lightMapVe'+'rtexColor','lightVerte'+'xColor'],['specularMa'+'pTint','specularTi'+'nt'],['metalnessM'+'apTint','metalnessT'+'int'],['clearCoatG'+'lossiness','clearCoatG'+'loss']];for(_0x234607=-0x2647+0xe2d+0x181a;_0x234607<_0x5e7bc6['length'];_0x234607++){const _0x4f1f91=_0x5e7bc6[_0x234607][0x7c7*0x4+0x86e+-0x278a],_0x246812=_0x5e7bc6[_0x234607][-0x42b+-0x1*0x15c5+0x19f1];_0x46af04[_0x4f1f91]!==void(0x76a*0x1+-0xf77*-0x2+-0x3*0xcc8)&&(_0x46af04[_0x246812]===void(0x1478*0x1+-0x1df7+0x97f)&&(_0x46af04[_0x246812]=_0x46af04[_0x4f1f91]),delete _0x46af04[_0x4f1f91]);}const _0xec76d7=['fresnelFac'+'tor','shadowSamp'+'leType'];for(_0x234607=-0x24cd+-0x2*-0x115b+0x217;_0x234607<_0xec76d7['length'];_0x234607++){const _0x4acd21=_0xec76d7[_0x234607];_0x46af04['hasOwnProp'+'erty'](_0x4acd21)&&delete _0x46af04[_0x4acd21];}return _0x46af04;}['_validate'](_0x3ac57c){return _0x3ac57c['validated']||(this['_validator']||(this['_validator']=new CN()),this['_validator']['validate'](_0x3ac57c)),_0x3ac57c;}}const MN={'aoMap':'white','aoDetailMap':'white','diffuseMap':'gray','diffuseDetailMap':'gray','specularMap':'gray','specularityFactorMap':'white','metalnessMap':'black','glossMap':'gray','sheenMap':'black','sheenGlossMap':'gray','clearCoatMap':'black','clearCoatGlossMap':'gray','clearCoatNormalMap':'normal','refractionMap':'white','emissiveMap':'gray','normalMap':'normal','normalDetailMap':'normal','heightMap':'gray','opacityMap':'gray','sphereMap':'gray','lightMap':'white','thicknessMap':'black','iridescenceMap':'black','iridescenceThicknessMap':'black','envAtlas':'black','anisotropyMap':'black'};class IN extends Ze{constructor(_0x1c07d2){super(_0x1c07d2,'material'),this['_assets']=_0x1c07d2['assets'],this['_device']=_0x1c07d2['graphicsDe'+'vice'],this['_parser']=new PN();}['load'](_0x1ba3b9,_0x1ef4f1){typeof _0x1ba3b9=='string'&&(_0x1ba3b9={'load':_0x1ba3b9,'original':_0x1ba3b9}),nt['get'](_0x1ba3b9['load'],{'retry':this['maxRetries']>0x2*-0x8ad+0x1f0f+-0xdb5*0x1,'maxRetries':this['maxRetries']},(_0x8783fe,_0x2125ef)=>{_0x8783fe?_0x1ef4f1&&_0x1ef4f1('Error\x20load'+'ing\x20materi'+'al:\x20'+_0x1ba3b9['original']+'\x20['+_0x8783fe+']'):_0x1ef4f1&&(_0x2125ef['_engine']=!(0x194d+-0x15e5+-0x1b4*0x2),_0x1ef4f1(null,_0x2125ef));});}['open'](_0x61815f,_0x5e3875){const _0x1da671=this['_parser']['parse'](_0x5e3875);return _0x5e3875['_engine']&&(_0x1da671['_data']=_0x5e3875,delete _0x5e3875['_engine']),_0x1da671;}['patch'](_0x48106d,_0x48c3d6){_0x48106d['resource']['_data']&&(_0x48106d['_data']=_0x48106d['resource']['_data'],delete _0x48106d['resource']['_data']),_0x48106d['data']['name']=_0x48106d['name'],_0x48106d['resource']['name']=_0x48106d['name'],this['_bindAndAs'+'signAssets'](_0x48106d,_0x48c3d6),_0x48106d['off']('unload',this['_onAssetUn'+'load'],this),_0x48106d['on']('unload',this['_onAssetUn'+'load'],this);}['_onAssetUn'+'load'](_0xd02810){delete _0xd02810['data']['parameters'],delete _0xd02810['data']['chunks'],delete _0xd02810['data']['name'];}['_assignTex'+'ture'](_0x5a775d,_0x4019dc,_0x6f982a){_0x4019dc['resource'][_0x5a775d]=_0x6f982a;}['_getPlaceh'+'olderTextu'+'re'](_0x184d3a){const _0x2a54a1=MN[_0x184d3a];return M['assert'](_0x2a54a1,'No\x20placeho'+'lder\x20textu'+'re\x20found\x20f'+'or\x20paramet'+'er:\x20'+_0x184d3a),Kr(this['_device'],_0x2a54a1);}['_assignPla'+'ceholderTe'+'xture'](_0x382c19,_0x11543d){_0x11543d['resource'][_0x382c19]=this['_getPlaceh'+'olderTextu'+'re'](_0x382c19);}['_onTexture'+'Load'](_0x12aa13,_0x424390,_0x27cebc){this['_assignTex'+'ture'](_0x12aa13,_0x424390,_0x27cebc['resource']),_0x424390['resource']['update']();}['_onTexture'+'Add'](_0x20586c,_0x319a65,_0x267dab){this['_assets']['load'](_0x267dab);}['_onTexture'+'RemoveOrUn'+'load'](_0x493b89,_0x1ca8c6,_0x2cff73){const _0x2ce0da=_0x1ca8c6['resource'];_0x2ce0da&&_0x1ca8c6['resource'][_0x493b89]===_0x2cff73['resource']&&(this['_assignPla'+'ceholderTe'+'xture'](_0x493b89,_0x1ca8c6),_0x2ce0da['update']());}['_assignCub'+'emap'](_0x5324c8,_0xef7966,_0x129e4b){if(_0xef7966['resource'][_0x5324c8]=_0x129e4b[-0x104a+-0x25f4+0x363e*0x1],_0x5324c8==='cubeMap'){const _0x29b618=_0x129e4b['slice'](-0x1a3+-0x72c+0x8d*0x10);_0x29b618['every'](_0x1c024e=>_0x1c024e)?_0xef7966['resource']['prefiltere'+'dCubemaps']=_0x29b618:_0x29b618[-0x3*-0x80d+0x8f2+-0x2119]&&(_0xef7966['resource']['envAtlas']=_0x29b618[-0x1*0x269e+0xa7*0x10+-0xe17*-0x2]);}}['_onCubemap'+'Load'](_0xa29ad8,_0x1158aa,_0x4cd397){this['_assignCub'+'emap'](_0xa29ad8,_0x1158aa,_0x4cd397['resources']),this['_parser']['initialize'](_0x1158aa['resource'],_0x1158aa['data']);}['_onCubemap'+'Add'](_0x3aa466,_0x211817,_0x3ba4d7){this['_assets']['load'](_0x3ba4d7);}['_onCubemap'+'RemoveOrUn'+'load'](_0x3845e8,_0x43c93d,_0x3aa462){const _0x422445=_0x43c93d['resource'];_0x43c93d['data']['prefiltere'+'dCubeMap12'+'8']===_0x3aa462['resources'][0x1153+-0x18db+0x789]&&(this['_assignCub'+'emap'](_0x3845e8,_0x43c93d,[null,null,null,null,null,null,null]),_0x422445['update']());}['_bindAndAs'+'signAssets'](_0x3c2e6f,_0x4f115c){const _0x3dae3b=this['_parser']['migrate'](_0x3c2e6f['data']),_0x1d6ade=_0x3c2e6f['resource'],_0x58efb3=_0x3dae3b['mappingFor'+'mat']==='path',_0x3df03b=Qc;let _0x4dd5c2,_0x11cc15,_0x1a0228;for(_0x4dd5c2=-0x1171+0xa4c*0x2+-0x3*0x10d;_0x4dd5c2<_0x3df03b['length'];_0x4dd5c2++){_0x11cc15=_0x3df03b[_0x4dd5c2],_0x1a0228=_0x1d6ade['_assetRefe'+'rences'][_0x11cc15];const _0x450253=_0x3dae3b[_0x11cc15],_0x2bc89b=_0x1d6ade[_0x11cc15],_0xb864e9=_0x2bc89b===this['_getPlaceh'+'olderTextu'+'re'](_0x11cc15),_0x5509da=_0x3dae3b['validated'];_0x450253&&(!_0x2bc89b||!_0x5509da||_0xb864e9)?(_0x1a0228||(_0x1a0228=new Xo(_0x11cc15,_0x3c2e6f,_0x4f115c,{'load':this['_onTexture'+'Load'],'add':this['_onTexture'+'Add'],'remove':this['_onTexture'+'RemoveOrUn'+'load'],'unload':this['_onTexture'+'RemoveOrUn'+'load']},this),_0x1d6ade['_assetRefe'+'rences'][_0x11cc15]=_0x1a0228),_0x58efb3?_0x1a0228['url']=_0x3c2e6f['getAbsolut'+'eUrl'](_0x450253):_0x1a0228['id']=_0x450253,_0x1a0228['asset']&&(_0x1a0228['asset']['resource']?this['_assignTex'+'ture'](_0x11cc15,_0x3c2e6f,_0x1a0228['asset']['resource']):this['_assignPla'+'ceholderTe'+'xture'](_0x11cc15,_0x3c2e6f),_0x4f115c['load'](_0x1a0228['asset']))):_0x1a0228&&(_0x58efb3?_0x1a0228['url']=null:_0x1a0228['id']=null);}const _0x2f91fb=Lm;for(_0x4dd5c2=-0x1236+-0x9f2+0x1c28;_0x4dd5c2<_0x2f91fb['length'];_0x4dd5c2++)_0x11cc15=_0x2f91fb[_0x4dd5c2],_0x1a0228=_0x1d6ade['_assetRefe'+'rences'][_0x11cc15],_0x3dae3b[_0x11cc15]&&!_0x3c2e6f['data']['prefiltere'+'dCubeMap12'+'8']&&(_0x1a0228||(_0x1a0228=new Xo(_0x11cc15,_0x3c2e6f,_0x4f115c,{'load':this['_onCubemap'+'Load'],'add':this['_onCubemap'+'Add'],'remove':this['_onCubemap'+'RemoveOrUn'+'load'],'unload':this['_onCubemap'+'RemoveOrUn'+'load']},this),_0x1d6ade['_assetRefe'+'rences'][_0x11cc15]=_0x1a0228),_0x58efb3?_0x1a0228['url']=_0x3dae3b[_0x11cc15]:_0x1a0228['id']=_0x3dae3b[_0x11cc15],_0x1a0228['asset']&&(_0x1a0228['asset']['loaded']&&this['_assignCub'+'emap'](_0x11cc15,_0x3c2e6f,_0x1a0228['asset']['resources']),_0x4f115c['load'](_0x1a0228['asset'])));this['_parser']['initialize'](_0x1d6ade,_0x3dae3b);}}class DN{constructor(_0x308e18){this['_device']=_0x308e18['device'],this['_defaultMa'+'terial']=_0x308e18['defaultMat'+'erial'],this['_assets']=_0x308e18['assets'];}['parse'](_0x5a4553,_0x124fc8,_0x45c943){lc['parse']('filename.g'+'lb','',_0x5a4553,this['_device'],this['_assets'],(_0x45c943==null?void(0x4*-0xcc+0x245*-0x6+0x2cd*0x6):_0x45c943['options'])??{},(_0x50895f,_0x45f767)=>{if(_0x50895f)_0x124fc8(_0x50895f);else{const _0x438278=ar['createMode'+'l'](_0x45f767,this['_defaultMa'+'terial']);_0x45f767['destroy'](),_0x124fc8(null,_0x438278);}});}}const LN={'points':Oc,'lines':Fc,'lineloop':wS,'linestrip':ES,'triangles':zs,'trianglestrip':cr,'trianglefan':$r},RN={'int8':Nc,'uint8':Xr,'int16':kc,'uint16':rl,'int32':MS,'uint32':Do,'float32':Be};class ON{constructor(_0x514840){this['_device']=_0x514840['device'],this['_defaultMa'+'terial']=_0x514840['defaultMat'+'erial'];}['parse'](_0x519390,_0xc0eab9){const _0x1dcd5d=_0x519390['model'];if(!_0x1dcd5d){_0xc0eab9(null,null);return;}if(_0x1dcd5d['version']<=-0x1b5c+-0x2703+0x4260){_0xc0eab9('JsonModelP'+'arser#pars'+'e:\x20Trying\x20'+'to\x20parse\x20u'+'nsupported'+'\x20model\x20for'+'mat.');return;}const _0x279602=this['_parseNode'+'s'](_0x519390),_0x5605f4=this['_parseSkin'+'s'](_0x519390,_0x279602),_0x177530=this['_parseVert'+'exBuffers'](_0x519390),_0x268f46=this['_parseInde'+'xBuffers'](_0x519390,_0x177530),_0x49f743=this['_parseMorp'+'hs'](_0x519390,_0x279602,_0x177530),_0x11d7f3=this['_parseMesh'+'es'](_0x519390,_0x5605f4['skins'],_0x49f743['morphs'],_0x177530,_0x268f46['buffer'],_0x268f46['data']),_0x7a7037=this['_parseMesh'+'Instances'](_0x519390,_0x279602,_0x11d7f3,_0x5605f4['skins'],_0x5605f4['instances'],_0x49f743['morphs'],_0x49f743['instances']),_0x20fd3b=new $i();_0x20fd3b['graph']=_0x279602[-0x3*-0xf1+0x1adc+0x1bf*-0x11],_0x20fd3b['meshInstan'+'ces']=_0x7a7037,_0x20fd3b['skinInstan'+'ces']=_0x5605f4['instances'],_0x20fd3b['morphInsta'+'nces']=_0x49f743['instances'],_0x20fd3b['getGraph']()['syncHierar'+'chy'](),_0xc0eab9(null,_0x20fd3b);}['_parseNode'+'s'](_0xe2ac10){const _0x23981f=_0xe2ac10['model'],_0x5ed5f7=[];let _0x42bbfd;for(_0x42bbfd=-0x43e*0x2+-0x1*-0x1cb5+-0x1439;_0x42bbfd<_0x23981f['nodes']['length'];_0x42bbfd++){const _0x26f20e=_0x23981f['nodes'][_0x42bbfd],_0x78eeb8=new He(_0x26f20e['name']);_0x78eeb8['setLocalPo'+'sition'](_0x26f20e['position'][0x1421*-0x1+-0x45a*-0x2+0x4b*0x27],_0x26f20e['position'][-0x20de+0xbc9+0x1516],_0x26f20e['position'][-0x1*-0x695+0x2279+-0x290c]),_0x78eeb8['setLocalEu'+'lerAngles'](_0x26f20e['rotation'][-0x1e79+-0x1*-0x1d47+0x132],_0x26f20e['rotation'][0x1062*-0x1+0x305*-0x7+0x1*0x2586],_0x26f20e['rotation'][0x10b6*0x2+-0x4b8+-0x1cb2]),_0x78eeb8['setLocalSc'+'ale'](_0x26f20e['scale'][-0x1719+-0x868+0x5*0x64d],_0x26f20e['scale'][-0x4*0x6c5+-0x16f4+0x3209*0x1],_0x26f20e['scale'][-0x1*0x2302+0x1a61+0x2e1*0x3]),_0x78eeb8['scaleCompe'+'nsation']=!!_0x26f20e['scaleCompe'+'nsation'],_0x5ed5f7['push'](_0x78eeb8);}for(_0x42bbfd=0x1ac3+-0x12d8+-0x7ea;_0x42bbfd<_0x23981f['parents']['length'];_0x42bbfd++)_0x5ed5f7[_0x23981f['parents'][_0x42bbfd]]['addChild'](_0x5ed5f7[_0x42bbfd]);return _0x5ed5f7;}['_parseSkin'+'s'](_0x585a51,_0x4b261a){const _0x511a3c=_0x585a51['model'],_0x2b2c58=[],_0xd27386=[];let _0x3c1c0f,_0xd41971;for(_0x3c1c0f=-0x243+-0x3*0x21d+0x89a;_0x3c1c0f<_0x511a3c['skins']['length'];_0x3c1c0f++){const _0x236889=_0x511a3c['skins'][_0x3c1c0f],_0x16af50=[];for(_0xd41971=-0x3*-0x192+0x6*-0x149+-0x8*-0x60;_0xd41971<_0x236889['inverseBin'+'dMatrices']['length'];_0xd41971++){const _0xb9da5a=_0x236889['inverseBin'+'dMatrices'][_0xd41971];_0x16af50[_0xd41971]=new te()['set'](_0xb9da5a);}const _0x87590a=new zy(this['_device'],_0x16af50,_0x236889['boneNames']);_0x2b2c58['push'](_0x87590a);const _0x53eaf6=new hl(_0x87590a),_0x276b31=[];for(_0xd41971=-0x2658+-0xcc9+-0x3321*-0x1;_0xd41971<_0x87590a['boneNames']['length'];_0xd41971++){const _0x336c58=_0x87590a['boneNames'][_0xd41971],_0x4153bd=_0x4b261a[0x1b8f+-0x1*0xfd2+-0xbbd]['findByName'](_0x336c58);_0x276b31['push'](_0x4153bd);}_0x53eaf6['bones']=_0x276b31,_0xd27386['push'](_0x53eaf6);}return{'skins':_0x2b2c58,'instances':_0xd27386};}['_getMorphV'+'ertexCount'](_0x738056,_0x4b2585,_0x4df50a){for(let _0x1cdee3=-0x15dd+-0x1fbb+-0x3598*-0x1;_0x1cdee3<_0x738056['meshes']['length'];_0x1cdee3++){const _0x23dc6e=_0x738056['meshes'][_0x1cdee3];if(_0x23dc6e['morph']===_0x4b2585)return _0x4df50a[_0x23dc6e['vertices']]['numVertice'+'s'];}}['_parseMorp'+'hs'](_0x4130fc,_0x29086d,_0x543867){const _0x5a0db2=_0x4130fc['model'],_0x55bc77=[],_0x43bdf7=[];let _0x18a3f1,_0x52228f,_0x13d6b5,_0x7536ea,_0x2e4c8f,_0x2cdf7c;if(_0x5a0db2['morphs']){const _0x16e4aa=function(_0x20dd82,_0x3968dd,_0x5d080c){const _0x34a093=new Float32Array(_0x5d080c*(-0x33f*-0x5+-0x18c7*-0x1+-0x28ff));for(let _0x724d41=0xd01+0x1*-0x84+-0x8b*0x17;_0x724d41<_0x3968dd['length'];_0x724d41++){const _0x5c5c04=_0x3968dd[_0x724d41]*(-0x1*0xb02+0xbf2+-0xed);_0x34a093[_0x5c5c04]=_0x20dd82[_0x724d41*(0x2*0x10ff+0x465*-0x4+-0xf7*0x11)],_0x34a093[_0x5c5c04+(0x26e4+-0x2a6*-0x6+0x25*-0x17b)]=_0x20dd82[_0x724d41*(-0x1426*0x1+-0x1*-0x789+0xca0)+(0xc29+-0x4*0x3c7+-0x2a*-0x12)],_0x34a093[_0x5c5c04+(0x271*-0x7+-0x3*0xbfb+0x350a)]=_0x20dd82[_0x724d41*(0x18*-0xa+0x48c+-0x1*0x399)+(0x1*-0x757+0x1*0x2287+0x2*-0xd97)];}return _0x34a093;};for(_0x18a3f1=0x1*-0x18c3+-0x1*0x1785+-0x78*-0x67;_0x18a3f1<_0x5a0db2['morphs']['length'];_0x18a3f1++){for(_0x7536ea=_0x5a0db2['morphs'][_0x18a3f1]['targets'],_0x2cdf7c=[],_0x13d6b5=this['_getMorphV'+'ertexCount'](_0x5a0db2,_0x18a3f1,_0x543867),_0x52228f=-0x1434+0x2*0x971+0x1a*0xd;_0x52228f<_0x7536ea['length'];_0x52228f++){const _0x38aed8=_0x7536ea[_0x52228f]['aabb'],_0x3aad70=_0x38aed8['min'],_0x5f258b=_0x38aed8['max'],_0x4486cb=new Ie(new I((_0x5f258b[-0x1411+0x6b+0x13a6]+_0x3aad70[0x32*-0x2+0x20+0x44])*(0x6*0x527+0x1d0b*-0x1+-0x1df+0.5),(_0x5f258b[0x3a*0x3+-0xefb+-0xe4e*-0x1]+_0x3aad70[-0xc82*0x2+0x1137+0x7ce])*(-0x2*0x9f6+0x96d+0x1*0xa7f+0.5),(_0x5f258b[0x3*0x43c+0xac9+-0x177b]+_0x3aad70[0x2433+-0x1496+-0xf9b])*(-0x5*-0x361+0x368*0x8+0x2c25*-0x1+0.5)),new I((_0x5f258b[0x2122+0xd94+-0x175b*0x2]-_0x3aad70[-0x9f9+0x4*0x29+0x955])*(0x437+0xa1f+-0xe56+0.5),(_0x5f258b[-0x1*0xd4e+-0x1*0x112b+-0xa6*-0x2f]-_0x3aad70[0x1241+0x6*-0x4f3+0xb72])*(-0x13d3+-0x177e+0x2b51+0.5),(_0x5f258b[-0x1131+-0x214c+0x1a1*0x1f]-_0x3aad70[0x25f1+-0x8b5*-0x4+-0x48c3])*(-0x1305*-0x1+-0x2036+0xd31+0.5))),_0x401117=_0x7536ea[_0x52228f]['indices'];let _0xa7b772=_0x7536ea[_0x52228f]['deltaPosit'+'ions'],_0x14ce2d=_0x7536ea[_0x52228f]['deltaNorma'+'ls'];_0x401117&&(_0xa7b772=_0x16e4aa(_0xa7b772,_0x401117,_0x13d6b5),_0x14ce2d=_0x16e4aa(_0x14ce2d,_0x401117,_0x13d6b5)),_0x2e4c8f=new ed({'deltaPositions':_0xa7b772,'deltaNormals':_0x14ce2d,'name':_0x7536ea[_0x52228f]['name'],'aabb':_0x4486cb}),_0x2cdf7c['push'](_0x2e4c8f);}const _0x388797=new Ny(_0x2cdf7c,this['_device']);_0x55bc77['push'](_0x388797);const _0x4b025b=new oa(_0x388797);_0x43bdf7['push'](_0x4b025b);}}return{'morphs':_0x55bc77,'instances':_0x43bdf7};}['_parseVert'+'exBuffers'](_0x2a5927){const _0x5c0932=_0x2a5927['model'],_0x2acb2f=[],_0xc6952e={'position':Pe,'normal':cs,'tangent':ci,'blendWeight':li,'blendIndices':ns,'color':kt,'texCoord0':Yt,'texCoord1':da,'texCoord2':Qo,'texCoord3':Jo,'texCoord4':el,'texCoord5':tl,'texCoord6':sl,'texCoord7':il};for(let _0x4ded1c=-0x16f5+0x19f7+0x6e*-0x7;_0x4ded1c<_0x5c0932['vertices']['length'];_0x4ded1c++){const _0xedcd9d=_0x5c0932['vertices'][_0x4ded1c],_0x596422=[];for(const _0x5e97ce in _0xedcd9d){const _0x4a9245=_0xedcd9d[_0x5e97ce];_0x596422['push']({'semantic':_0xc6952e[_0x5e97ce],'components':_0x4a9245['components'],'type':RN[_0x4a9245['type']],'normalize':_0xc6952e[_0x5e97ce]===kt});}const _0x43373d=new zt(this['_device'],_0x596422),_0x1594e1=_0xedcd9d['position']['data']['length']/_0xedcd9d['position']['components'],_0x2b7cf2=new xs(this['_device'],_0x43373d,_0x1594e1),_0x3203f8=new go(_0x2b7cf2);for(let _0x18b217=0x61*-0x4d+0x1df8+-0xcb;_0x18b217<_0x1594e1;_0x18b217++){for(const _0x253bb5 in _0xedcd9d){const _0xba90f4=_0xedcd9d[_0x253bb5];switch(_0xba90f4['components']){case-0x20c6+0xf86*0x1+-0x1141*-0x1:_0x3203f8['element'][_0xc6952e[_0x253bb5]]['set'](_0xba90f4['data'][_0x18b217]);break;case-0x11b1+0xf3d+0x276:_0x3203f8['element'][_0xc6952e[_0x253bb5]]['set'](_0xba90f4['data'][_0x18b217*(-0x769+0x2fa*0xa+-0x3*0x773)],-0x2423*-0x1+-0xb*0x70+0x13*-0x1a6-_0xba90f4['data'][_0x18b217*(-0x84b*0x2+0x246+0xd*0x11a)+(-0x2625+0x142e+-0xa*-0x1cc)]);break;case 0x138b+-0x8c+0x1*-0x12fc:_0x3203f8['element'][_0xc6952e[_0x253bb5]]['set'](_0xba90f4['data'][_0x18b217*(-0x23ba+0x3f3+0x139*0x1a)],_0xba90f4['data'][_0x18b217*(0x1550+-0x6f*-0x2a+-0x253*0x11)+(-0x1be3*-0x1+-0x1b2f+-0xb3*0x1)],_0xba90f4['data'][_0x18b217*(0xb*0x23a+-0x6ac+0x61*-0x2f)+(0xa8b*-0x3+-0x3*0x315+0x28e2)]);break;case 0x220+-0x2*-0xbb9+-0x2*0xcc7:_0x3203f8['element'][_0xc6952e[_0x253bb5]]['set'](_0xba90f4['data'][_0x18b217*(0x1638+0x9f5*-0x3+0x7ab)],_0xba90f4['data'][_0x18b217*(-0x13*0xd+-0x1*-0x156b+0x30*-0x6d)+(0x165f+-0x1*0xc77+-0x9e7)],_0xba90f4['data'][_0x18b217*(-0x1091+0x166d+-0x5d8)+(-0x1*0x1393+0x1*0x2542+-0x11ad)],_0xba90f4['data'][_0x18b217*(0x1c0c+0x6+-0x1c0e)+(0x2302+0xa8c+-0x2d8b*0x1)]);break;}}_0x3203f8['next']();}_0x3203f8['end'](),_0x2acb2f['push'](_0x2b7cf2);}return _0x2acb2f;}['_parseInde'+'xBuffers'](_0x12791f,_0x7cda7){const _0x345e8d=_0x12791f['model'];let _0x2f42bc=null,_0x135a5c=null,_0x1c351e,_0x119e1b=-0x8*0x1b7+0xe3a+0x5*-0x1a;for(_0x1c351e=-0x281*-0xf+0x7*-0x2f1+-0x8*0x21f;_0x1c351e<_0x345e8d['meshes']['length'];_0x1c351e++){const _0x670d6f=_0x345e8d['meshes'][_0x1c351e];_0x670d6f['indices']!==void(0x1ab7*-0x1+0x7c*-0x14+0x2467)&&(_0x119e1b+=_0x670d6f['indices']['length']);}let _0x40e545=0x3*0x18d+-0x158+0x4d*-0xb;for(_0x1c351e=-0x1a7a*-0x1+0x1348+-0x2dc2;_0x1c351e<_0x7cda7['length'];_0x1c351e++)_0x40e545=Math['max'](_0x40e545,_0x7cda7[_0x1c351e]['numVertice'+'s']);return _0x119e1b>-0x25ed+0xa47+0x1ba6&&(_0x40e545>-0x1dd66+-0x1081d+0x1f2c1*0x2?(_0x2f42bc=new dr(this['_device'],hr,_0x119e1b),_0x135a5c=new Uint32Array(_0x2f42bc['lock']())):(_0x2f42bc=new dr(this['_device'],zi,_0x119e1b),_0x135a5c=new Uint16Array(_0x2f42bc['lock']()))),{'buffer':_0x2f42bc,'data':_0x135a5c};}['_parseMesh'+'es'](_0x1fe226,_0x25c3ab,_0x5bf49f,_0x132257,_0x17a60c,_0x26cd94){const _0x5b8143=_0x1fe226['model'],_0x5167e0=[];let _0x231d03=-0x2699*0x1+0x76*-0xb+0x2bab;for(let _0x185d48=0x130c+0x1*0xd01+0x5*-0x669;_0x185d48<_0x5b8143['meshes']['length'];_0x185d48++){const _0x3f319d=_0x5b8143['meshes'][_0x185d48],_0x1082a4=_0x3f319d['aabb'],_0x90537f=_0x1082a4['min'],_0x36be83=_0x1082a4['max'],_0x5f06b9=new Ie(new I((_0x36be83[-0x2*0xd8e+-0x1f75+0x3a91]+_0x90537f[-0x1a7e+-0x1c82+-0x40*-0xdc])*(-0x1db6+-0xe*0x102+0x2bd2+0.5),(_0x36be83[-0x1*-0x52b+-0x23e1+0x1eb7]+_0x90537f[-0x1e*-0xf0+-0xa*-0x49+0x3*-0xa53])*(0x1a24+-0xaf8+-0xf2c+0.5),(_0x36be83[-0x5*0x641+-0x1e61+0x3da8]+_0x90537f[-0x167d+-0x1*-0x15ff+-0x8*-0x10])*(0x325+0x1fd*0x2+0x71f*-0x1+0.5)),new I((_0x36be83[-0x21e6+-0x2*-0x110b+0x6*-0x8]-_0x90537f[0xfa3+-0x1f53+0xfb0])*(0x1407+-0x1aff+0x6f8+0.5),(_0x36be83[-0x2*-0x1e4+0x3*0x6b+-0x508]-_0x90537f[0x1a69+-0xd68+-0xd00])*(0x1*0x119d+-0x9e9+-0x7b4+0.5),(_0x36be83[0xa6*0x4+0x2684+0x148d*-0x2]-_0x90537f[-0x407+0x136d*-0x1+-0x2*-0xbbb])*(0x392+0x17f2+-0x1b84+0.5))),_0x5b525f=_0x3f319d['indices']!==void(-0xc71*-0x1+0x1056+-0x35*0x8b),_0x196b9f=new Ge(this['_device']);_0x196b9f['vertexBuff'+'er']=_0x132257[_0x3f319d['vertices']],_0x196b9f['indexBuffe'+'r'][-0x4*0x1ff+0x773+0x89*0x1]=_0x5b525f?_0x17a60c:null,_0x196b9f['primitive'][-0x1791+-0x2*0xc81+0x3093]['type']=LN[_0x3f319d['type']],_0x196b9f['primitive'][0x79e+0x20d3+-0x2871]['base']=_0x5b525f?_0x3f319d['base']+_0x231d03:_0x3f319d['base'],_0x196b9f['primitive'][-0x1723+0xd3c+0x9e7]['count']=_0x3f319d['count'],_0x196b9f['primitive'][-0x1a4a+-0x9b6+-0x10*-0x240]['indexed']=_0x5b525f,_0x196b9f['skin']=_0x3f319d['skin']!==void(-0x6c*-0x9+-0x1*-0x9d7+0xda3*-0x1)?_0x25c3ab[_0x3f319d['skin']]:null,_0x196b9f['morph']=_0x3f319d['morph']!==void(0x6ef*0x4+0x1*0x1c4b+0x12ad*-0x3)?_0x5bf49f[_0x3f319d['morph']]:null,_0x196b9f['aabb']=_0x5f06b9,_0x5b525f&&(_0x26cd94['set'](_0x3f319d['indices'],_0x231d03),_0x231d03+=_0x3f319d['indices']['length']),_0x5167e0['push'](_0x196b9f);}return _0x17a60c!==null&&_0x17a60c['unlock'](),_0x5167e0;}['_parseMesh'+'Instances'](_0x5402f5,_0x3fb1e7,_0x5d1a55,_0xbcfc71,_0x56451b,_0x1f49a4,_0x4dc661){const _0x579f5b=_0x5402f5['model'],_0x36e7a4=[];let _0x46fbf5;for(_0x46fbf5=-0x217f+0x109+-0x6*-0x569;_0x46fbf5<_0x579f5b['meshInstan'+'ces']['length'];_0x46fbf5++){const _0x252192=_0x579f5b['meshInstan'+'ces'][_0x46fbf5],_0x5c0faa=_0x3fb1e7[_0x252192['node']],_0x27b0d0=_0x5d1a55[_0x252192['mesh']],_0xd27d5e=new We(_0x27b0d0,this['_defaultMa'+'terial'],_0x5c0faa);if(_0x27b0d0['skin']){const _0x4eee88=_0xbcfc71['indexOf'](_0x27b0d0['skin']);if(_0x4eee88===-(-0xbec+0x1f4*0x6+-0x1*-0x35))throw new Error('Mesh\x27s\x20ski'+'n\x20does\x20not'+'\x20appear\x20in'+'\x20skin\x20arra'+'y.');_0xd27d5e['skinInstan'+'ce']=_0x56451b[_0x4eee88];}if(_0x27b0d0['morph']){const _0x1321d5=_0x1f49a4['indexOf'](_0x27b0d0['morph']);if(_0x1321d5===-(0x1*-0x5f3+0x71*0x35+-0x1171))throw new Error('Mesh\x27s\x20mor'+'ph\x20does\x20no'+'t\x20appear\x20i'+'n\x20morph\x20ar'+'ray.');_0xd27d5e['morphInsta'+'nce']=_0x4dc661[_0x1321d5];}_0x36e7a4['push'](_0xd27d5e);}return _0x36e7a4;}}class FN extends Ze{constructor(_0x46a55a){super(_0x46a55a,'model'),this['_parsers']=[],this['device']=_0x46a55a['graphicsDe'+'vice'],this['assets']=_0x46a55a['assets'],this['defaultMat'+'erial']=cl(this['device']),this['addParser'](new ON(this),(_0x1ac83b,_0x2e56d5)=>xe['getExtensi'+'on'](_0x1ac83b)==='.json'),this['addParser'](new DN(this),(_0x1387bc,_0x4f3ff7)=>xe['getExtensi'+'on'](_0x1387bc)==='.glb');}['load'](_0x50a955,_0x265614,_0x4eda76){typeof _0x50a955=='string'&&(_0x50a955={'load':_0x50a955,'original':_0x50a955});const _0x271b4e={'retry':this['maxRetries']>0x17*0xca+0x20e5+0x330b*-0x1,'maxRetries':this['maxRetries']};(_0x50a955['load']['startsWith']('blob:')||_0x50a955['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x50a955['original'])['toLowerCas'+'e']()==='.glb'?_0x271b4e['responseTy'+'pe']=Ts['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x271b4e['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x50a955['load'],_0x271b4e,(_0x4a4ef0,_0x1f548c)=>{if(_0x265614){if(_0x4a4ef0)_0x265614('Error\x20load'+'ing\x20model:'+'\x20'+_0x50a955['original']+'\x20['+_0x4a4ef0+']');else{for(let _0x5a2b67=0x1224+-0x1b43+-0x91f*-0x1;_0x5a2b67<this['_parsers']['length'];_0x5a2b67++){const _0x5ddce5=this['_parsers'][_0x5a2b67];if(_0x5ddce5['decider'](_0x50a955['original'],_0x1f548c)){_0x5ddce5['parser']['parse'](_0x1f548c,(_0xdcbd00,_0xabe41d)=>{_0xdcbd00?_0x265614(_0xdcbd00):_0x265614(null,_0xabe41d);},_0x4eda76);return;}}_0x265614('No\x20parsers'+'\x20found');}}});}['open'](_0x17fc89,_0xed2d17){return _0xed2d17;}['patch'](_0x22657a,_0x17faf1){if(!_0x22657a['resource'])return;const _0x4f8f6c=_0x22657a['data'],_0x55bce9=this;_0x22657a['resource']['meshInstan'+'ces']['forEach']((_0x3f4b5b,_0x227acb)=>{if(_0x4f8f6c['mapping']){const _0x3aca57=function(_0x3b8b3e){_0x3b8b3e['resource']?_0x3f4b5b['material']=_0x3b8b3e['resource']:(_0x3b8b3e['once']('load',_0x3aca57),_0x17faf1['load'](_0x3b8b3e)),_0x3b8b3e['once']('remove',_0x4df348=>{_0x3f4b5b['material']===_0x4df348['resource']&&(_0x3f4b5b['material']=_0x55bce9['defaultMat'+'erial']);});};if(!_0x4f8f6c['mapping'][_0x227acb]){_0x3f4b5b['material']=_0x55bce9['defaultMat'+'erial'];return;}const _0x16ca3d=_0x4f8f6c['mapping'][_0x227acb]['material'],_0x4a620b=_0x4f8f6c['mapping'][_0x227acb]['path'];let _0x1be715;if(_0x16ca3d!==void(0x1794+0x13a*0x1b+-0x38b2))_0x16ca3d?(_0x1be715=_0x17faf1['get'](_0x16ca3d),_0x1be715?_0x3aca57(_0x1be715):_0x17faf1['once']('add:'+_0x16ca3d,_0x3aca57)):_0x3f4b5b['material']=_0x55bce9['defaultMat'+'erial'];else{if(_0x4a620b){const _0x3d5d63=_0x22657a['getAbsolut'+'eUrl'](_0x4f8f6c['mapping'][_0x227acb]['path']);_0x1be715=_0x17faf1['getByUrl'](_0x3d5d63),_0x1be715?_0x3aca57(_0x1be715):_0x17faf1['once']('add:url:'+_0x3d5d63,_0x3aca57);}}}});}['addParser'](_0x374005,_0x2ceedc){this['_parsers']['push']({'parser':_0x374005,'decider':_0x2ceedc});}}class NN extends Ze{constructor(_0x583be0){super(_0x583be0,'scene');}['load'](_0xfe95bc,_0x2177ee){Fv['load'](_0xfe95bc,this['maxRetries'],_0x2177ee);}['open'](_0x2a6054,_0x345475){this['_app']['systems']['script']['preloading']=!(-0x73d*-0x5+-0x3*-0x3ad+0x179c*-0x2);const _0x213ba7=new Vm(this['_app'],!(0xe5*-0x25+0x1bb9+-0x1cb*-0x3))['parse'](_0x345475),_0x16f282=this['_app']['scene'];return _0x16f282['root']=_0x213ba7,this['_app']['applyScene'+'Settings'](_0x345475['settings']),this['_app']['systems']['script']['preloading']=!(-0xda5+-0x166e+0x2414),_0x16f282;}}const Sc=class Sc{static['push'](_0x18fab2){Sc['_types']['push'](_0x18fab2);}};h(Sc,'_types',[]);let Hr=Sc;const kN=new Set(['system','entity','create','destroy','swap','move','data','scripts','_scripts','_scriptsIn'+'dex','_scriptsDa'+'ta','enabled','_oldState','onEnable','onDisable','onPostStat'+'eChange','_onSetEnab'+'led','_checkStat'+'e','_onBeforeR'+'emove','_onInitial'+'izeAttribu'+'tes','_onInitial'+'ize','_onPostIni'+'tialize','_onUpdate','_onPostUpd'+'ate','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']),UN={};qo['reservedNa'+'mes']['forEach']((_0x72d9dd,_0x530bda,_0xda4137)=>{UN[_0x72d9dd]=-0x2627+-0x1fb4+0x45dc;});function BN(_0x48bc63,_0x1f8e97,_0x250808){if(typeof _0x48bc63!='function')throw new Error('script\x20cla'+'ss:\x20\x27'+_0x48bc63+('\x27\x20must\x20be\x20'+'a\x20construc'+'tor\x20functi'+'on\x20(i.e.\x20c'+'lass).'));if(!(_0x48bc63['prototype']instanceof qt))throw new Error('script\x20cla'+'ss:\x20\x27'+wo['__getScrip'+'tName'](_0x48bc63)+('\x27\x20does\x20not'+'\x20extend\x20pc'+'.Script.'));if(_0x1f8e97=_0x1f8e97||_0x48bc63['__name']||wo['__getScrip'+'tName'](_0x48bc63),kN['has'](_0x1f8e97))throw new Error('script\x20nam'+'e:\x20\x27'+_0x1f8e97+('\x27\x20is\x20reser'+'ved,\x20pleas'+'e\x20change\x20s'+'cript\x20name'));_0x48bc63['__name']=_0x1f8e97,ec['getApplica'+'tion']()['scripts']['add'](_0x48bc63),Hr['push'](_0x48bc63);}const zN=_0x45dfc8=>_0x45dfc8[-0xc5+-0x16d*-0x1+-0xa8]['toLowerCas'+'e']()+_0x45dfc8['substring'](0x1a94+-0xcb*-0x26+-0x38b5);class VN extends Ze{constructor(_0x39adfd){super(_0x39adfd,'script'),this['_scripts']={},this['_cache']={};}['clearCache'](){for(const _0x304704 in this['_cache']){const _0x3a4415=this['_cache'][_0x304704],_0x491f97=_0x3a4415['parentNode'];_0x491f97&&_0x491f97['removeChil'+'d'](_0x3a4415);}this['_cache']={};}['load'](_0x416fdf,_0x1dfb5e){typeof _0x416fdf=='string'&&(_0x416fdf={'load':_0x416fdf,'original':_0x416fdf});const _0x3f079b=this;this['_app'];const _0x1f3d0b=(_0x416fdf['load'],(_0x81eede,_0x27e1b9,_0x220ab1)=>{if(_0x81eede)_0x1dfb5e(_0x81eede);else{const _0xdbd1ba={};for(let _0x405916=0x71*0x23+0x1f8e+-0x15*0x23d;_0x405916<Hr['_types']['length'];_0x405916++)_0xdbd1ba[Hr['_types'][_0x405916]['name']]=Hr['_types'][_0x405916];Hr['_types']['length']=0x1559+-0x8f2+0x1*-0xc67,_0x1dfb5e(null,_0xdbd1ba,_0x220ab1);const _0x28a151=_0x27e1b9['split']('&hash=')[-0x1f9d+0x1*0x212e+0x1*-0x191];delete _0x3f079b['_loader']['_cache'][fn['makeKey'](_0x28a151,'script')];}}),[_0x5ce8b9]=_0x416fdf['load']['split']('?');_0x5ce8b9['endsWith']('.mjs')?this['_loadModul'+'e'](_0x5ce8b9,_0x1f3d0b):this['_loadScrip'+'t'](_0x416fdf['load'],_0x1f3d0b);}['open'](_0x579dc8,_0x25fffb){return _0x25fffb;}['patch'](_0x10022a,_0x37a138){}['_loadScrip'+'t'](_0x469a28,_0x498adc){const _0x546a86=document['head'],_0x172721=document['createElem'+'ent']('script');this['_cache'][_0x469a28]=_0x172721,_0x172721['async']=!(0x11*0x192+0x115e+0x1*-0x2c0f),_0x172721['addEventLi'+'stener']('error',_0x40542e=>{_0x498adc('Script:\x20'+_0x40542e['target']['src']+('\x20failed\x20to'+'\x20load'));},!(-0x157c+0xdd9+0x7a4));let _0x381955=!(-0x17aa+0xb47*0x1+-0x319*-0x4);_0x172721['onload']=_0x172721['onreadysta'+'techange']=function(){!_0x381955&&(!this['readyState']||this['readyState']==='loaded'||this['readyState']==='complete')&&(_0x381955=!(0x67*-0x32+0x2e4+0x113a),_0x498adc(null,_0x469a28,_0x172721));},_0x172721['src']=_0x469a28,_0x546a86['appendChil'+'d'](_0x172721);}['_loadModul'+'e'](_0x359054,_0x1a05bb){const _0xee2c75=Me['browser']&&window['location']['origin']!=='null'?window['location']['origin']+window['location']['pathname']:import.meta['url'],_0x3d6144=new URL(_0x359054,_0xee2c75);import(_0x3d6144['toString']())['then'](_0x4543fc=>{var _0x35bbe7,_0x3bfa44;const _0xf555=_0x3d6144['pathname']['split']('/')['pop'](),_0x14e094=(_0x3bfa44=(_0x35bbe7=this['_app']['assets']['find'](_0xf555,'script'))==null?void(-0x10d*-0x1+0x1*-0x11f6+-0xd*-0x14d):_0x35bbe7['data'])==null?void(-0x4ae*0x5+-0xbf*-0x23+-0x2b7):_0x3bfa44['scripts'];for(const _0x3a3edf in _0x4543fc){const _0x126d87=_0x4543fc[_0x3a3edf];if(_0x126d87['prototype']instanceof qt){const _0x32b26f=zN(_0x126d87['name']);_0x126d87['scriptName']||M['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x126d87['name']+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x126d87['name']+('.scriptNam'+'e\x20=\x20\x22')+_0x32b26f+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.'));const _0x448e1e=_0x126d87['scriptName']??_0x32b26f;BN(_0x126d87,_0x448e1e),_0x14e094&&this['_app']['scripts']['addSchema'](_0x448e1e,_0x14e094[_0x448e1e]);}}_0x1a05bb(null,_0x359054,null);})['catch'](_0x5a79e7=>{_0x1a05bb(_0x5a79e7);});}}class GN extends Ze{constructor(_0x2153c9){super(_0x2153c9,'shader'),h(this,'decoder',null);}['load'](_0x35658d,_0x35aed6){typeof _0x35658d=='string'&&(_0x35658d={'load':_0x35658d,'original':_0x35658d}),nt['get'](_0x35658d['load'],{'retry':this['maxRetries']>0x5fa+-0x206*0x10+0xd33*0x2,'maxRetries':this['maxRetries']},(_0x243142,_0x5ed856)=>{_0x243142?_0x35aed6('Error\x20load'+'ing\x20shader'+'\x20resource:'+'\x20'+_0x35658d['original']+'\x20['+_0x243142+']'):_0x35aed6(null,_0x5ed856);});}['openBinary'](_0x102614){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x102614);}}function Zd(_0x1e2e18){const _0x4f4ede=this;_0x4f4ede['resource']&&(_0x4f4ede['resource']['atlas']=_0x1e2e18['resource']);}function Qd(_0x377f3b){this['registry']['load'](_0x377f3b);}class HN extends Ze{constructor(_0x142851){super(_0x142851,'sprite'),this['_assets']=_0x142851['assets'],this['_device']=_0x142851['graphicsDe'+'vice'];}['load'](_0x3bf657,_0x37becc){typeof _0x3bf657=='string'&&(_0x3bf657={'load':_0x3bf657,'original':_0x3bf657}),xe['getExtensi'+'on'](_0x3bf657['original'])==='.json'&&nt['get'](_0x3bf657['load'],{'retry':this['maxRetries']>0x1d9d+-0x2668+0x8cb,'maxRetries':this['maxRetries']},(_0x326d04,_0xf049e3)=>{_0x326d04?_0x37becc(_0x326d04):_0x37becc(null,_0xf049e3);});}['open'](_0x5995c7,_0x23cbd2){const _0x4ff281=new KA(this['_device']);return _0x5995c7&&(_0x4ff281['__data']=_0x23cbd2),_0x4ff281;}['patch'](_0x7e2a22,_0xffdb91){const _0x5da92b=_0x7e2a22['resource'];if(_0x5da92b['__data']&&(_0x7e2a22['data']['pixelsPerU'+'nit']=_0x5da92b['__data']['pixelsPerU'+'nit'],_0x7e2a22['data']['renderMode']=_0x5da92b['__data']['renderMode'],_0x7e2a22['data']['frameKeys']=_0x5da92b['__data']['frameKeys'],_0x5da92b['__data']['textureAtl'+'asAsset'])){const _0x3101ec=_0xffdb91['getByUrl'](_0x5da92b['__data']['textureAtl'+'asAsset']);_0x3101ec?_0x7e2a22['data']['textureAtl'+'asAsset']=_0x3101ec['id']:console['warn']('Could\x20not\x20'+'find\x20textu'+'reatlas\x20wi'+'th\x20url:\x20'+_0x5da92b['__data']['textureAtl'+'asAsset']);}_0x5da92b['startUpdat'+'e'](),_0x5da92b['renderMode']=_0x7e2a22['data']['renderMode'],_0x5da92b['pixelsPerU'+'nit']=_0x7e2a22['data']['pixelsPerU'+'nit'],_0x5da92b['frameKeys']=_0x7e2a22['data']['frameKeys'],this['_updateAtl'+'as'](_0x7e2a22),_0x5da92b['endUpdate'](),_0x7e2a22['off']('change',this['_onAssetCh'+'ange'],this),_0x7e2a22['on']('change',this['_onAssetCh'+'ange'],this);}['_updateAtl'+'as'](_0x3426a8){const _0x56c696=_0x3426a8['resource'];if(!_0x3426a8['data']['textureAtl'+'asAsset']){_0x56c696['atlas']=null;return;}this['_assets']['off']('load:'+_0x3426a8['data']['textureAtl'+'asAsset'],Zd,_0x3426a8),this['_assets']['on']('load:'+_0x3426a8['data']['textureAtl'+'asAsset'],Zd,_0x3426a8);const _0x1ab2de=this['_assets']['get'](_0x3426a8['data']['textureAtl'+'asAsset']);_0x1ab2de&&_0x1ab2de['resource']?_0x56c696['atlas']=_0x1ab2de['resource']:_0x1ab2de?this['_assets']['load'](_0x1ab2de):(this['_assets']['off']('add:'+_0x3426a8['data']['textureAtl'+'asAsset'],Qd,_0x3426a8),this['_assets']['on']('add:'+_0x3426a8['data']['textureAtl'+'asAsset'],Qd,_0x3426a8));}['_onAssetCh'+'ange'](_0x5b543c,_0x46e37e,_0x1c7973,_0x4fc631){_0x46e37e==='data'&&_0x1c7973&&_0x1c7973['textureAtl'+'asAsset']&&_0x4fc631&&_0x1c7973['textureAtl'+'asAsset']!==_0x4fc631['textureAtl'+'asAsset']&&(this['_assets']['off']('load:'+_0x4fc631['textureAtl'+'asAsset'],Zd,_0x5b543c),this['_assets']['off']('add:'+_0x4fc631['textureAtl'+'asAsset'],Qd,_0x5b543c));}}class Fg{constructor(_0x3cf5c2,_0x430845){h(this,'_app'),h(this,'_data'),h(this,'_templateR'+'oot',null),(this['_app']=_0x3cf5c2,this['_data']=_0x430845);}['instantiat'+'e'](){return this['_templateR'+'oot']||this['_parseTemp'+'late'](),this['_templateR'+'oot']['clone']();}['_parseTemp'+'late'](){const _0x869c8f=new Vm(this['_app'],!(0x1*-0x1fdb+-0x8e4*0x2+-0x61*-0x83));this['_templateR'+'oot']=_0x869c8f['parse'](this['_data']);}}class WN extends Ze{constructor(_0x27fb9d){super(_0x27fb9d,'template'),h(this,'decoder',null);}['load'](_0x227aa2,_0x27f0e9){typeof _0x227aa2=='string'&&(_0x227aa2={'load':_0x227aa2,'original':_0x227aa2});const _0x5dfa55={'retry':this['maxRetries']>-0x1dd1+-0x2a*-0x50+0x10b1,'maxRetries':this['maxRetries']};nt['get'](_0x227aa2['load'],_0x5dfa55,(_0x28d0f7,_0x2fb643)=>{_0x28d0f7?_0x27f0e9('Error\x20requ'+'esting\x20tem'+'plate:\x20'+_0x227aa2['original']):_0x27f0e9(_0x28d0f7,_0x2fb643);});}['open'](_0x2c94b8,_0x5cb67c){return new Fg(this['_app'],_0x5cb67c);}['openBinary'](_0x2ec8ef){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),new Fg(this['_app'],JSON['parse'](this['decoder']['decode'](_0x2ec8ef)));}}class $N extends Ze{constructor(_0x11068e){super(_0x11068e,'text'),h(this,'decoder',null);}['load'](_0x4016aa,_0x44db64){typeof _0x4016aa=='string'&&(_0x4016aa={'load':_0x4016aa,'original':_0x4016aa}),nt['get'](_0x4016aa['load'],{'retry':this['maxRetries']>-0x58e+-0x1a05*0x1+0x1f93,'maxRetries':this['maxRetries']},(_0x515afa,_0x2169ca)=>{_0x515afa?_0x44db64('Error\x20load'+'ing\x20text\x20r'+'esource:\x20'+_0x4016aa['original']+'\x20['+_0x515afa+']'):_0x44db64(null,_0x2169ca);});}['openBinary'](_0x2db928){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x2db928);}}const nh={'repeat':pt,'clamp':ue,'mirror':Tu},oh={'nearest':Te,'linear':_t,'nearest_mip_nearest':xc,'linear_mip_nearest':wc,'nearest_mip_linear':Tc,'linear_mip_linear':ea},XN=/^data\.frames\.(\d+)$/;class qN extends Ze{constructor(_0x1e6cb9){super(_0x1e6cb9,'textureatl'+'as'),this['_loader']=_0x1e6cb9['loader'];}['load'](_0x1f445d,_0x5ab847){typeof _0x1f445d=='string'&&(_0x1f445d={'load':_0x1f445d,'original':_0x1f445d});const _0x527a40=this,_0x30727c=this['_loader']['getHandler']('texture');xe['getExtensi'+'on'](_0x1f445d['original'])==='.json'?nt['get'](_0x1f445d['load'],{'retry':this['maxRetries']>-0x13*0x115+0x22f0+-0x199*0x9,'maxRetries':this['maxRetries']},(_0x14d350,_0x148e6f)=>{if(_0x14d350)_0x5ab847(_0x14d350);else{const _0x301f76=_0x1f445d['original']['replace']('.json','.png');_0x527a40['_loader']['load'](_0x301f76,'texture',(_0x3f01bf,_0x40a77c)=>{_0x3f01bf?_0x5ab847(_0x3f01bf):_0x5ab847(null,{'data':_0x148e6f,'texture':_0x40a77c});});}}):_0x30727c['load'](_0x1f445d,_0x5ab847);}['open'](_0x16da92,_0x4e13e2,_0x31c8ff){const _0x25c199=new ZA();if(_0x4e13e2['texture']&&_0x4e13e2['data'])_0x25c199['texture']=_0x4e13e2['texture'],_0x25c199['__data']=_0x4e13e2['data'];else{const _0x23a796=this['_loader']['getHandler']('texture')['open'](_0x16da92,_0x4e13e2,_0x31c8ff);if(!_0x23a796)return null;_0x25c199['texture']=_0x23a796;}return _0x25c199;}['patch'](_0x14c7a0,_0x3b6bdd){if(!_0x14c7a0['resource'])return;_0x14c7a0['resource']['__data']&&(_0x14c7a0['resource']['__data']['minfilter']!==void(-0x1076+-0x227d+-0x1*-0x32f3)&&(_0x14c7a0['data']['minfilter']=_0x14c7a0['resource']['__data']['minfilter']),_0x14c7a0['resource']['__data']['magfilter']!==void(-0x19df+-0x1*0xa2e+-0x1*-0x240d)&&(_0x14c7a0['data']['magfilter']=_0x14c7a0['resource']['__data']['magfilter']),_0x14c7a0['resource']['__data']['addressu']!==void(0xaca*-0x1+0x595*0x2+-0x60)&&(_0x14c7a0['data']['addressu']=_0x14c7a0['resource']['__data']['addressu']),_0x14c7a0['resource']['__data']['addressv']!==void(0x3*0x769+-0x2*0xb5+-0x14d1)&&(_0x14c7a0['data']['addressv']=_0x14c7a0['resource']['__data']['addressv']),_0x14c7a0['resource']['__data']['mipmaps']!==void(-0x23d1+-0x1*-0x1b1d+0x8b4)&&(_0x14c7a0['data']['mipmaps']=_0x14c7a0['resource']['__data']['mipmaps']),_0x14c7a0['resource']['__data']['anisotropy']!==void(-0xd57+0x304*0x6+0x4c1*-0x1)&&(_0x14c7a0['data']['anisotropy']=_0x14c7a0['resource']['__data']['anisotropy']),_0x14c7a0['resource']['__data']['rgbm']!==void(-0x231c+0x1*-0x1c8c+-0xa8*-0x61)&&(_0x14c7a0['data']['rgbm']=!!_0x14c7a0['resource']['__data']['rgbm']),_0x14c7a0['data']['frames']=_0x14c7a0['resource']['__data']['frames'],delete _0x14c7a0['resource']['__data']);const _0x519eb3=_0x14c7a0['resource']['texture'];if(_0x519eb3&&(_0x519eb3['name']=_0x14c7a0['name'],_0x14c7a0['data']['hasOwnProp'+'erty']('minfilter')&&_0x519eb3['minFilter']!==oh[_0x14c7a0['data']['minfilter']]&&(_0x519eb3['minFilter']=oh[_0x14c7a0['data']['minfilter']]),_0x14c7a0['data']['hasOwnProp'+'erty']('magfilter')&&_0x519eb3['magFilter']!==oh[_0x14c7a0['data']['magfilter']]&&(_0x519eb3['magFilter']=oh[_0x14c7a0['data']['magfilter']]),_0x14c7a0['data']['hasOwnProp'+'erty']('addressu')&&_0x519eb3['addressU']!==nh[_0x14c7a0['data']['addressu']]&&(_0x519eb3['addressU']=nh[_0x14c7a0['data']['addressu']]),_0x14c7a0['data']['hasOwnProp'+'erty']('addressv')&&_0x519eb3['addressV']!==nh[_0x14c7a0['data']['addressv']]&&(_0x519eb3['addressV']=nh[_0x14c7a0['data']['addressv']]),_0x14c7a0['data']['hasOwnProp'+'erty']('mipmaps')&&_0x519eb3['mipmaps']!==_0x14c7a0['data']['mipmaps']&&(_0x519eb3['mipmaps']=_0x14c7a0['data']['mipmaps']),_0x14c7a0['data']['hasOwnProp'+'erty']('anisotropy')&&_0x519eb3['anisotropy']!==_0x14c7a0['data']['anisotropy']&&(_0x519eb3['anisotropy']=_0x14c7a0['data']['anisotropy']),_0x14c7a0['data']['hasOwnProp'+'erty']('rgbm'))){const _0x447735=_0x14c7a0['data']['rgbm']?ta:di;_0x519eb3['type']!==_0x447735&&(_0x519eb3['type']=_0x447735);}_0x14c7a0['resource']['texture']=_0x519eb3;const _0x29bea0={};for(const _0x1751de in _0x14c7a0['data']['frames']){const _0x455111=_0x14c7a0['data']['frames'][_0x1751de];_0x29bea0[_0x1751de]={'rect':new ae(_0x455111['rect']),'pivot':new J(_0x455111['pivot']),'border':new ae(_0x455111['border'])};}_0x14c7a0['resource']['frames']=_0x29bea0,_0x14c7a0['off']('change',this['_onAssetCh'+'ange'],this),_0x14c7a0['on']('change',this['_onAssetCh'+'ange'],this);}['_onAssetCh'+'ange'](_0xe9ef82,_0x4f127c,_0x4d429a){let _0x44919e;if(_0x4f127c==='data'||_0x4f127c==='data.frame'+'s'){const _0x5c412b={};for(const _0x2ef4a8 in _0x4d429a['frames'])_0x44919e=_0x4d429a['frames'][_0x2ef4a8],_0x5c412b[_0x2ef4a8]={'rect':new ae(_0x44919e['rect']),'pivot':new J(_0x44919e['pivot']),'border':new ae(_0x44919e['border'])};_0xe9ef82['resource']['frames']=_0x5c412b;}else{const _0x322b99=_0x4f127c['match'](XN);if(_0x322b99){const _0x29eb30=_0x322b99[0x15c8+-0xc26*0x1+0x11*-0x91];_0x4d429a?(_0xe9ef82['resource']['frames'][_0x29eb30]?(_0x44919e=_0xe9ef82['resource']['frames'][_0x29eb30],_0x44919e['rect']['set'](_0x4d429a['rect'][-0x1*-0xf21+0x24f9+-0xf7*0x36],_0x4d429a['rect'][-0x1973+-0x1395+0x2d09],_0x4d429a['rect'][-0x1317*-0x2+-0xf2f+-0x16fd],_0x4d429a['rect'][0x72b*0x2+-0x1099*0x2+0x12df*0x1]),_0x44919e['pivot']['set'](_0x4d429a['pivot'][0x1265+-0x2134+-0x1*-0xecf],_0x4d429a['pivot'][-0x17*0xd5+0x69e+-0x1*-0xc86]),_0x44919e['border']['set'](_0x4d429a['border'][-0xbaf+-0x161b+0x6c2*0x5],_0x4d429a['border'][-0x155d*0x1+0x1*0x1ca+0x1394],_0x4d429a['border'][-0x4*-0x875+0x5b3+-0x2785],_0x4d429a['border'][-0x115*-0xc+0xe8+-0xde1])):_0xe9ef82['resource']['frames'][_0x29eb30]={'rect':new ae(_0x4d429a['rect']),'pivot':new J(_0x4d429a['pivot']),'border':new ae(_0x4d429a['border'])},_0xe9ef82['resource']['fire']('set:frame',_0x29eb30,_0xe9ef82['resource']['frames'][_0x29eb30])):_0xe9ef82['resource']['frames'][_0x29eb30]&&(delete _0xe9ef82['resource']['frames'][_0x29eb30],_0xe9ef82['resource']['fire']('remove:fra'+'me',_0x29eb30));}}}}function jN(){const _0x4b187f={'cTFETC1':0x0,'cTFETC2':0x1,'cTFBC1':0x2,'cTFBC3':0x3,'cTFPVRTC1_4_RGB':0x8,'cTFPVRTC1_4_RGBA':0x9,'cTFASTC_4x4':0xa,'cTFATC_RGB':0xb,'cTFATC_RGBA_INTERPOLATED_ALPHA':0xc,'cTFRGBA32':0xd,'cTFRGB565':0xe,'cTFRGBA4444':0x10},_0x5988f3={'astc':_0x4b187f['cTFASTC_4x'+'4'],'dxt':_0x4b187f['cTFBC1'],'etc1':_0x4b187f['cTFETC1'],'etc2':_0x4b187f['cTFETC1'],'pvr':_0x4b187f['cTFPVRTC1_'+'4_RGB'],'atc':_0x4b187f['cTFATC_RGB'],'none':_0x4b187f['cTFRGB565']},_0x366de8={'astc':_0x4b187f['cTFASTC_4x'+'4'],'dxt':_0x4b187f['cTFBC3'],'etc1':_0x4b187f['cTFRGBA444'+'4'],'etc2':_0x4b187f['cTFETC2'],'pvr':_0x4b187f['cTFPVRTC1_'+'4_RGBA'],'atc':_0x4b187f['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA'],'none':_0x4b187f['cTFRGBA444'+'4']},_0x438bfc={'ETC1':0x15,'ETC2_RGB':0x16,'ETC2_RGBA':0x17,'DXT1':0x8,'DXT5':0xa,'PVRTC_4BPP_RGB_1':0x1a,'PVRTC_4BPP_RGBA_1':0x1b,'ASTC_4x4':0x1c,'ATC_RGB':0x1d,'ATC_RGBA':0x1e,'R8_G8_B8_A8':0x7,'R5_G6_B5':0x3,'R4_G4_B4_A4':0x5},_0x32e9f1=(_0x3dc7d4,_0xad844e)=>{switch(_0x3dc7d4){case _0x4b187f['cTFETC1']:return _0xad844e['formats']['etc2']?_0x438bfc['ETC2_RGB']:_0x438bfc['ETC1'];case _0x4b187f['cTFETC2']:return _0x438bfc['ETC2_RGBA'];case _0x4b187f['cTFBC1']:return _0x438bfc['DXT1'];case _0x4b187f['cTFBC3']:return _0x438bfc['DXT5'];case _0x4b187f['cTFPVRTC1_'+'4_RGB']:return _0x438bfc['PVRTC_4BPP'+'_RGB_1'];case _0x4b187f['cTFPVRTC1_'+'4_RGBA']:return _0x438bfc['PVRTC_4BPP'+'_RGBA_1'];case _0x4b187f['cTFASTC_4x'+'4']:return _0x438bfc['ASTC_4x4'];case _0x4b187f['cTFATC_RGB']:return _0x438bfc['ATC_RGB'];case _0x4b187f['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return _0x438bfc['ATC_RGBA'];case _0x4b187f['cTFRGBA32']:return _0x438bfc['R8_G8_B8_A'+'8'];case _0x4b187f['cTFRGB565']:return _0x438bfc['R5_G6_B5'];case _0x4b187f['cTFRGBA444'+'4']:return _0x438bfc['R4_G4_B4_A'+'4'];}},_0x4e94cc=_0x3e9169=>{const _0x58e5d0=function(_0x3c3b62,_0x7c0cc){const _0xb42fe9=_0x3c3b62*(0x54e*-0x5+0xa9*0x8+0x153e+0.00784313725490196)-(0x1ca4+-0x1b89*0x1+0x3*-0x5e),_0x31cea1=_0x7c0cc*((0x907*0x1+0x9f8*0x2+-0x1cf5)/(-0x1178+0x39*-0x5d+-0x5c*-0x6d))-(-0x7b*0x1f+-0x2286+0x316c),_0x159734=Math['sqrt'](0x2450+0x386*-0xb+0x273-Math['min'](-0x71a+0x22d9*-0x1+0x29f4,_0xb42fe9*_0xb42fe9+_0x31cea1*_0x31cea1));return Math['max'](-0x47*0x74+0x947+0x16e5,Math['min'](-0x1*0x2589+0x13c5+0x12c3,Math['floor']((_0x159734+(-0x1ddb+0x171d+0x6bf))*(0x955+0x441+-0xd96+0.5)*(-0x21f9+0x691*0x2+-0xd7*-0x1a))));};for(let _0x3f1ec3=0x1f5+-0x194f+0x175a;_0x3f1ec3<_0x3e9169['length'];_0x3f1ec3+=0x2623+-0x7*-0x4db+-0x481c){const _0x1b3f90=_0x3e9169[_0x3f1ec3+(0x5b9+-0x1a9c+0x14e6)],_0x3193e8=_0x3e9169[_0x3f1ec3+(0x55*-0x49+0x1bed+0x3af*-0x1)];_0x3e9169[_0x3f1ec3+(-0x7*-0x17+0xd*0x13+0x22*-0xc)]=_0x1b3f90,_0x3e9169[_0x3f1ec3+(-0x1*-0xc31+-0x1a1+-0xc1*0xe)]=_0x58e5d0(_0x1b3f90,_0x3193e8),_0x3e9169[_0x3f1ec3+(0x1*0xf62+0xfee+0x3*-0xa6f)]=0x22ca+-0x1b19+-0x1*0x6b2;}return _0x3e9169;},_0x125d48=_0xbc2ccc=>{const _0x37c069=new Uint16Array(_0xbc2ccc['length']/(-0x1*-0x13f+0x1*0x11b+-0x1a*0x17));for(let _0x45cc3f=-0x50e*0x7+0x1912+0xa50;_0x45cc3f<_0xbc2ccc['length'];_0x45cc3f+=-0x1*-0x2654+-0x1557+-0x10f9){const _0x24810b=_0xbc2ccc[_0x45cc3f+(-0x7b5+0xcac+0x4f7*-0x1)],_0x6e3ac1=_0xbc2ccc[_0x45cc3f+(-0xfb6+0x1ff3+-0x103c)],_0x5b0cbd=_0xbc2ccc[_0x45cc3f+(0x19f3+0x26f4+-0x40e5)];_0x37c069[_0x45cc3f/(-0x94f*0x1+0x76*0x52+-0x1c79)]=(_0x24810b&0x2580+-0x7*0x191+-0x1991)<<0x18ae+0x43e*0x7+-0x3658|(_0x6e3ac1&-0x1fd8+0x1*-0x10d6+0x3d2*0xd)<<0x1eff+-0x9*-0xf5+0x1*-0x2799|_0x5b0cbd>>0x6*0x17+-0x17b6+-0x1*-0x172f;}return _0x37c069;},_0x260080=(_0x48f47d,_0x15393d)=>(_0x48f47d&_0x48f47d-(-0x412+-0x252+0x1*0x665))===-0x153f+-0x2404+0x3943&&(_0x15393d&_0x15393d-(-0x1a24+-0x6c2*0x1+0x20e7))===-0x253+0xb7*0x1d+-0x1268,_0x31e343=()=>typeof performance<'u'?performance['now']():0x212c+0x881*0x1+-0x2f*0xe3;let _0x46c5df,_0x36f845,_0x358262;const _0x1721ef=(_0xcd6553,_0xc8f61b,_0x5b63fb)=>{if(_0x5b63fb){if(_0xcd6553['formats']['astc'])return'astc';}else{if(_0xc8f61b){if(_0xcd6553['formats']['etc2'])return'etc2';}else{if(_0xcd6553['formats']['etc2'])return'etc2';if(_0xcd6553['formats']['etc1'])return'etc1';}}return(_0x40627f=>{for(let _0x1353b7=-0x5e1+0x1ac2+-0x14e1;_0x1353b7<_0x40627f['length'];++_0x1353b7){const _0x16feae=_0x40627f[_0x1353b7];if(_0xcd6553['formats'][_0x16feae])return _0x16feae;}return'none';})(_0xc8f61b?_0x358262:_0x36f845);},_0x3e4d42=(_0x5b8a96,_0x8d7295,_0x3f8d46)=>{switch(_0x3f8d46){case _0x4b187f['cTFETC1']:case _0x4b187f['cTFETC2']:return!(0xb*-0x125+0xab*0x28+-0xe21);case _0x4b187f['cTFBC1']:case _0x4b187f['cTFBC3']:return(_0x5b8a96&-0x1838+0xb04*-0x2+0x38f*0xd)===0x16b7+-0x37a+-0x133d&&(_0x8d7295&0xf2f*-0x1+0x1348+-0x416)===0x312*-0x1+-0x39e*0x1+0x6b0;case _0x4b187f['cTFPVRTC1_'+'4_RGB']:case _0x4b187f['cTFPVRTC1_'+'4_RGBA']:return _0x260080(_0x5b8a96,_0x8d7295);case _0x4b187f['cTFASTC_4x'+'4']:return!(-0x194a+0x1583+-0x3c7*-0x1);case _0x4b187f['cTFATC_RGB']:case _0x4b187f['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return!(0x7*0x197+-0x2201+-0x16e0*-0x1);}return!(-0x5*-0x71a+-0xa*-0x162+-0x3155);},_0x34eb72=(_0x166589,_0x3b1ebd,_0x2b96b9)=>{if(!_0x46c5df['KTX2File'])throw new Error('Basis\x20tran'+'scoder\x20mod'+'ule\x20does\x20n'+'ot\x20include'+'\x20support\x20f'+'or\x20KTX2.');const _0x308e6d=_0x31e343(),_0x5c0de7=new _0x46c5df['KTX2File'](new Uint8Array(_0x3b1ebd)),_0x378cc3=_0x5c0de7['getWidth'](),_0x2cb607=_0x5c0de7['getHeight'](),_0x24cdf3=_0x5c0de7['getLevels'](),_0x13ea93=!!_0x5c0de7['getHasAlph'+'a'](),_0x41ba3b=_0x5c0de7['isUASTC']&&_0x5c0de7['isUASTC']();if(!_0x378cc3||!_0x2cb607||!_0x24cdf3)throw _0x5c0de7['close'](),_0x5c0de7['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x166589+'\x20width='+_0x378cc3+'\x20height='+_0x2cb607+'\x20levels='+_0x24cdf3);const _0x448f05=_0x1721ef(_0x2b96b9['deviceDeta'+'ils'],_0x13ea93,_0x41ba3b),_0x2fd0e2=!!_0x2b96b9['isGGGR']&&_0x448f05==='pvr';let _0x258807;if(_0x2fd0e2?_0x258807=_0x4b187f['cTFRGBA32']:(_0x258807=_0x13ea93?_0x366de8[_0x448f05]:_0x5988f3[_0x448f05],_0x3e4d42(_0x378cc3,_0x2cb607,_0x258807)||(_0x258807=_0x13ea93?_0x4b187f['cTFRGBA32']:_0x4b187f['cTFRGB565'])),!_0x5c0de7['startTrans'+'coding']())throw _0x5c0de7['close'](),_0x5c0de7['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x166589);let _0x37dbe5;const _0x4a75d1=[];for(let _0x24be0b=-0x247e+0x2f7*0xa+-0x8*-0xdb;_0x24be0b<_0x24cdf3;++_0x24be0b){const _0x39f502=_0x5c0de7['getImageTr'+'anscodedSi'+'zeInBytes'](_0x24be0b,-0x7*-0x11+-0x55*-0x6f+-0x22*0x119,-0x2*0x9dc+0xbe*0x2+-0x1*-0x123c,_0x258807),_0x5c4d2e=new Uint8Array(_0x39f502);if(!_0x5c0de7['transcodeI'+'mage'](_0x5c4d2e,_0x24be0b,-0x2279+-0x1377+0x35f0,0x1*-0x156d+-0x1a23+0x2f90,_0x258807,-0x17c0+-0x1109+-0x28c9*-0x1,-(0x10d6+-0x1690+0x5bb),-(-0x4f6*0x7+-0x8*-0x243+0x10a3)))throw _0x5c0de7['close'](),_0x5c0de7['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x166589);const _0x597745=_0x258807===_0x4b187f['cTFRGB565']||_0x258807===_0x4b187f['cTFRGBA444'+'4'];_0x4a75d1['push'](_0x597745?new Uint16Array(_0x5c4d2e['buffer']):_0x5c4d2e);}if(_0x5c0de7['close'](),_0x5c0de7['delete'](),_0x2fd0e2){for(_0x258807=_0x4b187f['cTFRGB565'],_0x37dbe5=0x161f+0x2232+-0x3851;_0x37dbe5<_0x4a75d1['length'];++_0x37dbe5)_0x4a75d1[_0x37dbe5]=_0x125d48(_0x4e94cc(_0x4a75d1[_0x37dbe5]));}return{'format':_0x32e9f1(_0x258807,_0x2b96b9['deviceDeta'+'ils']),'width':_0x378cc3,'height':_0x2cb607,'levels':_0x4a75d1,'cubemap':!(-0x2f*0xd2+0x2aa+0x23e5),'transcodeTime':_0x31e343()-_0x308e6d,'url':_0x166589,'unswizzledGGGR':_0x2fd0e2};},_0x27dc34=(_0x14bad9,_0x491dbf,_0x4e2dcc)=>{const _0x5deb4a=_0x31e343(),_0x40c180=new _0x46c5df['BasisFile'](new Uint8Array(_0x491dbf)),_0x55f1f0=_0x40c180['getImageWi'+'dth'](-0x3*-0x1b3+-0xe*0x22d+-0x1*-0x195d,0x10*0x1e7+0x655+-0x24c5*0x1),_0x139284=_0x40c180['getImageHe'+'ight'](0x2132+-0x2560+0x42e,-0x8c*0x1b+0xfa7+-0xe3),_0x38222b=_0x40c180['getNumImag'+'es'](),_0x2c11fc=_0x40c180['getNumLeve'+'ls'](0x29*0x95+-0x1088+-0x755*0x1),_0xcfcb24=!!_0x40c180['getHasAlph'+'a'](),_0x3336fb=_0x40c180['isUASTC']&&_0x40c180['isUASTC']();if(!_0x55f1f0||!_0x139284||!_0x38222b||!_0x2c11fc)throw _0x40c180['close'](),_0x40c180['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x14bad9+'\x20width='+_0x55f1f0+'\x20height='+_0x139284+'\x20images='+_0x38222b+'\x20levels='+_0x2c11fc);const _0x63e904=_0x1721ef(_0x4e2dcc['deviceDeta'+'ils'],_0xcfcb24,_0x3336fb),_0x4fb25b=!!_0x4e2dcc['isGGGR']&&_0x63e904==='pvr';let _0x58f1f1;if(_0x4fb25b?_0x58f1f1=_0x4b187f['cTFRGBA32']:(_0x58f1f1=_0xcfcb24?_0x366de8[_0x63e904]:_0x5988f3[_0x63e904],_0x3e4d42(_0x55f1f0,_0x139284,_0x58f1f1)||(_0x58f1f1=_0xcfcb24?_0x4b187f['cTFRGBA32']:_0x4b187f['cTFRGB565'])),!_0x40c180['startTrans'+'coding']())throw _0x40c180['close'](),_0x40c180['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x14bad9);let _0x29ae11;const _0x2a08d6=[];for(let _0x43c959=-0x8c1+-0xb*-0x281+-0x12ca;_0x43c959<_0x2c11fc;++_0x43c959){const _0x570992=_0x40c180['getImageTr'+'anscodedSi'+'zeInBytes'](-0x527+0xe79+0x4a9*-0x2,_0x43c959,_0x58f1f1),_0x5e91b9=new Uint8Array(_0x570992);if(!_0x40c180['transcodeI'+'mage'](_0x5e91b9,-0x918+-0x1f6d+0x1*0x2885,_0x43c959,_0x58f1f1,0x1ae5+0x2dd*-0x3+-0x124e,-0x2178+0x101b+0x23*0x7f)){if(_0x43c959===_0x2c11fc-(-0x12a1*0x1+-0x1*0x39d+0x163f)&&_0x570992===_0x2a08d6[_0x43c959-(0x1*0xbc6+-0x1*-0x1a+-0xbdf)]['buffer']['byteLength'])_0x5e91b9['set'](new Uint8Array(_0x2a08d6[_0x43c959-(-0x2*-0xf6b+-0x39*0x17+-0x19b6)]['buffer'])),console['warn']('Failed\x20to\x20'+'transcode\x20'+'last\x20mipma'+'p\x20level,\x20u'+'sing\x20previ'+'ous\x20level\x20'+'instead\x20ur'+'l='+_0x14bad9);else throw _0x40c180['close'](),_0x40c180['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x14bad9);}const _0x15349a=_0x58f1f1===_0x4b187f['cTFRGB565']||_0x58f1f1===_0x4b187f['cTFRGBA444'+'4'];_0x2a08d6['push'](_0x15349a?new Uint16Array(_0x5e91b9['buffer']):_0x5e91b9);}if(_0x40c180['close'](),_0x40c180['delete'](),_0x4fb25b){for(_0x58f1f1=_0x4b187f['cTFRGB565'],_0x29ae11=-0x1*-0x2231+-0x2*0x316+-0x31d*0x9;_0x29ae11<_0x2a08d6['length'];++_0x29ae11)_0x2a08d6[_0x29ae11]=_0x125d48(_0x4e94cc(_0x2a08d6[_0x29ae11]));}return{'format':_0x32e9f1(_0x58f1f1,_0x4e2dcc['deviceDeta'+'ils']),'width':_0x55f1f0,'height':_0x139284,'levels':_0x2a08d6,'cubemap':!(0xff4*0x1+0x22ed*-0x1+0x12fa),'transcodeTime':_0x31e343()-_0x5deb4a,'url':_0x14bad9,'unswizzledGGGR':_0x4fb25b};},_0x239235=(_0x3004c5,_0x473ad5,_0x54f4d0)=>_0x54f4d0['isKTX2']?_0x34eb72(_0x3004c5,_0x473ad5,_0x54f4d0):_0x27dc34(_0x3004c5,_0x473ad5,_0x54f4d0),_0x2644ca=(_0x3435f0,_0x6d49d7,_0x27722a)=>{try{const _0x302b6b=_0x239235(_0x3435f0,_0x6d49d7,_0x27722a);_0x302b6b['levels']=_0x302b6b['levels']['map'](_0x40ddf8=>_0x40ddf8['buffer']),self['postMessag'+'e']({'url':_0x3435f0,'data':_0x302b6b},_0x302b6b['levels']);}catch(_0x1a8e38){self['postMessag'+'e']({'url':_0x3435f0,'err':_0x1a8e38},null);}},_0x584638=(_0x2309cc,_0x5322f8)=>{const _0x406876=(_0x5f3c12,_0x3670c5)=>(WebAssembly['instantiat'+'e'](_0x2309cc['module'],_0x5f3c12)['then'](_0x31d8de=>{_0x3670c5(_0x31d8de);})['catch'](_0x27bce0=>{console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x27bce0);}),{});self['BASIS'](_0x2309cc['module']?{'instantiateWasm':_0x406876}:null)['then'](_0x43810f=>{_0x43810f['initialize'+'Basis'](),_0x46c5df=_0x43810f,_0x36f845=_0x2309cc['rgbPriorit'+'y'],_0x358262=_0x2309cc['rgbaPriori'+'ty'],_0x5322f8(null);});},_0xb6cc4d=[];self['onmessage']=_0x2a36a0=>{const _0x4c2cc8=_0x2a36a0['data'];switch(_0x4c2cc8['type']){case'init':_0x584638(_0x4c2cc8['config'],()=>{for(let _0x395275=0x5*0x4ef+-0x13*-0x1d3+-0x3b54;_0x395275<_0xb6cc4d['length'];++_0x395275)_0x2644ca(_0xb6cc4d[_0x395275]['url'],_0xb6cc4d[_0x395275]['data'],_0xb6cc4d[_0x395275]['options']);_0xb6cc4d['length']=0x643*0x1+0x1366+0x19a9*-0x1;});break;case'transcode':_0x46c5df?_0x2644ca(_0x4c2cc8['url'],_0x4c2cc8['data'],_0x4c2cc8['options']):_0xb6cc4d['push'](_0x4c2cc8);break;}};}const YN=_0x49ae3a=>({'astc':!!_0x49ae3a['extCompres'+'sedTexture'+'ASTC'],'atc':!!_0x49ae3a['extCompres'+'sedTexture'+'ATC'],'dxt':!!_0x49ae3a['extCompres'+'sedTexture'+'S3TC'],'etc1':!!_0x49ae3a['extCompres'+'sedTexture'+'ETC1'],'etc2':!!_0x49ae3a['extCompres'+'sedTexture'+'ETC'],'pvr':!!_0x49ae3a['extCompres'+'sedTexture'+'PVRTC']}),KN=(_0x1f5234,_0x127998)=>{const _0x2658d0=_0x327e80=>{const _0x334260=['/*\x20basis\x20*'+'/',_0x327e80,'','('+jN['toString']()+')()\x0a\x0a']['join']('\x0a');return new Blob([_0x334260],{'type':'applicatio'+'n/javascri'+'pt'});},_0x5f48c8=()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x48fb5d=new WebAssembly['Module'](Uint8Array['of'](-0x4d4+-0x1591+-0x1*-0x1a65,0x5e5+0x1570+-0x1af4,-0x170f*-0x1+-0x1*-0xd13+-0x23af,-0x1*0x649+0x13*-0x49+-0x5*-0x26d,0x1c3a+0x1113+0x37c*-0xd,-0x101a+-0x16b8+0x26d2*0x1,-0x728+0x11ba*-0x1+-0x7*-0x38e,0xa36+-0x14ed*0x1+-0xd3*-0xd));if(_0x48fb5d instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x48fb5d)instanceof WebAssembly['Instance'];}}catch{}return!(0x581+0xfa8+-0x1*0x1528);},_0x36163c=(_0x53102d,_0x31c92a)=>{_0x127998(null,{'workerUrl':URL['createObje'+'ctURL'](_0x2658d0(_0x53102d)),'module':_0x31c92a,'rgbPriority':_0x1f5234['rgbPriorit'+'y'],'rgbaPriority':_0x1f5234['rgbaPriori'+'ty']});},_0x3c3d31={'cache':!(0x45*0x6f+0x69d*-0x1+-0xba7*0x2),'responseType':'text','retry':_0x1f5234['maxRetries']>0xb08*0x2+-0x22c9+0xcb9,'maxRetries':_0x1f5234['maxRetries']};if(_0x1f5234['glueUrl']&&_0x1f5234['wasmUrl']&&_0x5f48c8()){let _0x26831d=null,_0x76a82b=null;nt['get'](_0x1f5234['glueUrl'],_0x3c3d31,(_0x345619,_0x3364eb)=>{_0x345619?_0x127998(_0x345619):_0x76a82b?_0x36163c(_0x3364eb,_0x76a82b):_0x26831d=_0x3364eb;});const _0x3fbc2d=fetch(_0x1f5234['wasmUrl']),_0x3b449e=()=>{_0x3fbc2d['then'](_0x19fd95=>_0x19fd95['arrayBuffe'+'r']())['then'](_0x209043=>WebAssembly['compile'](_0x209043))['then'](_0x5e1f76=>{_0x26831d?_0x36163c(_0x26831d,_0x5e1f76):_0x76a82b=_0x5e1f76;})['catch'](_0xfe043=>{_0x127998(_0xfe043,null);});};WebAssembly['compileStr'+'eaming']?WebAssembly['compileStr'+'eaming'](_0x3fbc2d)['then'](_0x18f28f=>{_0x26831d?_0x36163c(_0x26831d,_0x18f28f):_0x76a82b=_0x18f28f;})['catch'](_0x9c54a9=>{M['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x1f5234['wasmUrl']+'\x20('+_0x9c54a9+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x3b449e();}):_0x3b449e();}else nt['get'](_0x1f5234['fallbackUr'+'l'],_0x3c3d31,(_0x4c04eb,_0x31b44d)=>{_0x4c04eb?_0x127998(_0x4c04eb,null):_0x36163c(_0x31b44d,null);});};class ZN{constructor(){this['callbacks']={},this['queue']=[],this['clients']=[];}['enqueueJob'](_0x13809c,_0x5782a6,_0x44740e,_0x722edf){if(this['callbacks']['hasOwnProp'+'erty'](_0x13809c))this['callbacks'][_0x13809c]['push'](_0x44740e);else{this['callbacks'][_0x13809c]=[_0x44740e];const _0x410e0d={'url':_0x13809c,'data':_0x5782a6,'options':_0x722edf};this['clients']['length']>0x1*0xd4+-0x2c8*-0x7+-0x6*0x362?this['clients']['shift']()['run'](_0x410e0d):this['queue']['push'](_0x410e0d);}}['enqueueCli'+'ent'](_0x44da9f){this['queue']['length']>0x22c4+0x1*-0x77f+-0x1b45?_0x44da9f['run'](this['queue']['shift']()):this['clients']['push'](_0x44da9f);}['handleResp'+'onse'](_0x588403,_0xc87260,_0x57afa0){const _0x30584a=this['callbacks'][_0x588403];if(_0xc87260){for(let _0x2e3afd=0x94c+-0x4e2+0x2*-0x235;_0x2e3afd<_0x30584a['length'];++_0x2e3afd)_0x30584a[_0x2e3afd](_0xc87260);}else{_0x57afa0['format']===Ec||_0x57afa0['format']===Ac?_0x57afa0['levels']=_0x57afa0['levels']['map'](_0xb76526=>new Uint16Array(_0xb76526)):_0x57afa0['levels']=_0x57afa0['levels']['map'](_0x1bd6f1=>new Uint8Array(_0x1bd6f1));for(let _0x5cf324=-0x1b0b+-0x152*0x17+0x3969;_0x5cf324<_0x30584a['length'];++_0x5cf324)_0x30584a[_0x5cf324](null,_0x57afa0);}delete this['callbacks'][_0x588403];}}class QN{constructor(_0x49fe7b,_0x4ee1c0,_0x198b70){this['queue']=_0x49fe7b,this['worker']=new Worker(_0x4ee1c0['workerUrl']),this['worker']['addEventLi'+'stener']('message',_0x1e8a21=>{const _0x42758d=_0x1e8a21['data'];this['queue']['handleResp'+'onse'](_0x42758d['url'],_0x42758d['err'],_0x42758d['data']),this['eager']||this['queue']['enqueueCli'+'ent'](this);}),this['worker']['postMessag'+'e']({'type':'init','config':_0x4ee1c0}),this['eager']=_0x198b70;}['run'](_0x26e859){const _0x49726c=[];_0x26e859['data']instanceof ArrayBuffer&&_0x49726c['push'](_0x26e859['data']),this['worker']['postMessag'+'e']({'type':'transcode','url':_0x26e859['url'],'format':_0x26e859['format'],'data':_0x26e859['data'],'options':_0x26e859['options']},_0x49726c),this['eager']&&this['queue']['enqueueCli'+'ent'](this);}}const JN=0x562+-0x1*0x1b55+0x15f4,ek=['etc2','etc1','astc','dxt','pvr','atc'],tk=['astc','dxt','etc2','pvr','atc'],sk=0x386+0x906+-0xc87,fu=new ZN();let Ng=null,uu=!(0x3*-0x161+0x1*-0x7c1+-0x5*-0x261);function ik(_0x19da6f){if(!uu){if(!_0x19da6f)_0x19da6f=Ng||{};else{if(_0x19da6f['lazyInit']){Ng=_0x19da6f;return;}}if(!_0x19da6f['glueUrl']||!_0x19da6f['wasmUrl']||!_0x19da6f['fallbackUr'+'l']){const _0x2621f8=sS['getConfig']('BASIS');_0x2621f8&&(_0x19da6f={'glueUrl':_0x2621f8['glueUrl'],'wasmUrl':_0x2621f8['wasmUrl'],'fallbackUrl':_0x2621f8['fallbackUr'+'l'],'numWorkers':_0x2621f8['numWorkers']});}if(_0x19da6f['glueUrl']||_0x19da6f['wasmUrl']||_0x19da6f['fallbackUr'+'l']){uu=!(0xa32+0x49d+-0x1*0xecf);const _0x4dc356=Math['max'](-0x1168+-0xbf*0x21+0x8*0x541,Math['min'](0x1652+0x19cf+-0x3011,_0x19da6f['numWorkers']||JN)),_0x79f187=_0x19da6f['numWorkers']===-0x1*-0x5c3+0xea9+-0x146b||(_0x19da6f['hasOwnProp'+'erty']('eagerWorke'+'rs')?_0x19da6f['eagerWorke'+'rs']:!(-0x7bb*-0x5+0x19c3+-0xce2*0x5));_0x19da6f['rgbPriorit'+'y']=_0x19da6f['rgbPriorit'+'y']||ek,_0x19da6f['rgbaPriori'+'ty']=_0x19da6f['rgbaPriori'+'ty']||tk,_0x19da6f['maxRetries']=_0x19da6f['hasOwnProp'+'erty']('maxRetries')?_0x19da6f['maxRetries']:sk,KN(_0x19da6f,(_0x10b704,_0x342400)=>{if(_0x10b704)console['error']('failed\x20to\x20'+'initialize'+'\x20basis\x20wor'+'ker:\x20'+_0x10b704);else{for(let _0x2a5bcc=0x1*-0x241d+-0x6f*0x38+0x3c65*0x1;_0x2a5bcc<_0x4dc356;++_0x2a5bcc)fu['enqueueCli'+'ent'](new QN(fu,_0x342400,_0x79f187));}});}}}let Jd=null;function Nv(_0x3b2ebc,_0x19acce,_0x3713dc,_0x47245,_0x9a3d2d){return ik(),Jd||(Jd={'formats':YN(_0x3b2ebc)}),fu['enqueueJob'](_0x19acce,_0x3713dc,_0x47245,{'deviceDetails':Jd,'isGGGR':!!(_0x9a3d2d!=null&&_0x9a3d2d['isGGGR']),'isKTX2':!!(_0x9a3d2d!=null&&_0x9a3d2d['isKTX2'])}),uu;}class kn{['load'](_0x22a114,_0x4b12ee,_0x33d565){throw new Error('not\x20implem'+'ented');}['open'](_0x1e8973,_0x8da3,_0x135577){throw new Error('not\x20implem'+'ented');}}class rk extends kn{constructor(_0x1b2ad5,_0x40cd25){super(),this['device']=_0x40cd25,this['maxRetries']=0x10bd+-0xf26+-0xb*0x25;}['load'](_0x487f7e,_0x490084,_0x503d0b){const _0x24b52c=this['device'],_0x2c2fb9=_0x31da8d=>{var _0x5c019a,_0x40da76,_0x268123;Nv(_0x24b52c,_0x487f7e['load'],_0x31da8d,_0x490084,{'isGGGR':(((_0x268123=(_0x40da76=(_0x5c019a=_0x503d0b==null?void(-0x14e3*-0x1+0x157+-0x239*0xa):_0x503d0b['file'])==null?void(-0x1525+0x6f6+0xe2f):_0x5c019a['variants'])==null?void(0x15a9*-0x1+-0x6a*0xb+0x1a37*0x1):_0x40da76['basis'])==null?void(0x1*-0x26a7+0x162c+0x107b):_0x268123['opt'])&-0x1c52+-0x1de4+0x3a3e)!==-0x1*0x2640+0xc16*-0x2+0x3e6c})||_0x490084('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x503d0b['name']+']('+_0x503d0b['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.'));};me['fetchArray'+'Buffer'](_0x487f7e['load'],(_0x3a5972,_0x262e4c)=>{_0x3a5972?_0x490084(_0x3a5972):_0x2c2fb9(_0x262e4c);},_0x503d0b,this['maxRetries']);}['open'](_0x2b187a,_0x33f17e,_0x1007e5,_0x51abb6={}){const _0x23dfb7=_0x51abb6['srgb']?Rc(_0x33f17e['format']):_0x33f17e['format'],_0x288f5c=new _e(_0x1007e5,{'name':_0x2b187a,'profilerHint':mr,'addressU':_0x33f17e['cubemap']?ue:pt,'addressV':_0x33f17e['cubemap']?ue:pt,'width':_0x33f17e['width'],'height':_0x33f17e['height'],'format':_0x23dfb7,'cubemap':_0x33f17e['cubemap'],'levels':_0x33f17e['levels'],..._0x51abb6});return _0x288f5c['upload'](),_0x288f5c;}}const kv=new Uint8Array([-0x6*0x23f+0x1f*0x1f+-0xca*-0xd,0x258b*-0x1+0x4dc+0x20ff*0x1,0x23a+0x4*-0x509+-0x1*-0x1238,-0x174c+-0x7b*0x37+-0x19*-0x200,-0x9e*-0x32+-0x1991+-0x53e,-0x2384+0x1ba0+-0x3a*-0x23,0x24d5+-0xdf0+-0x16cb,0x321*-0x3+-0xa13+0x9c0*0x2,-0x5*0x133+-0x3d4+0x9d3*0x1,-0x14d4+-0x1a95+-0xe5*-0x35,0x8*0x329+0x1*-0xddb+-0xb6d,0x5*0x784+0x10f3*-0x2+0x1*-0x3a1,-0x1*0x3c+-0xa17+0xa9c,0x3*-0x795+-0xd*-0xbd+0xd6e,0x1*0x17ff+-0x1cb4+-0x4f9*-0x1,-0x209e+0x11*0x9+0x2057,-0xf4a*-0x2+-0x1f79+0x1*0xe5,-0x47*0x2f+-0x1bfa+-0x2903*-0x1,-0x3*0x685+0x7*0xdc+-0x1*-0xd8b,0x67*0x21+-0x1860+0xb1a,-0x1f40+-0x179b+0x3*0x1249,-0x3*-0xb4e+-0x1*0x254b+-0x1*-0x361,-0x1bd3+-0x23ea+0x3fbd,-0xd7c+-0x1de3+0x2b60,-0x1b38+0xe47+0x1b*0x7b,-0x1*-0x13a4+-0x19da+0x18f*0x4,0xecb+-0xa2b+-0x20*0x25,0xa1e+-0x360+0x1*-0x6be,-0xf93+-0x1b45*0x1+-0x1c9*-0x18,0x1ff4+0x2fa+-0x7*0x4f9,-0x2*0xf17+-0x20dc+-0x3f1f*-0x1,-0x1e73+0x1186*0x1+0xdb1,0x1855*0x1+0x1fdb+0x62f*-0x9,0x703+-0xb95+0x492,0x23df*-0x1+-0x1135+-0x1a8a*-0x2,0x1e93+-0x3*0xcf8+0x4f*0x1b,0xd67+0x2154+-0x2eae,-0x68*-0x1d+-0x589*0x1+0xda*-0x7,-0x440*-0x2+0x4*0x8f9+0x584*-0x8,-0x76*-0x4c+-0x1876+-0xa51,0x1b21+-0x266+-0x1*0x1867,0x1fc9+0x2ad+-0x21fe,0xf46+-0x1901+-0x9*-0x12d,-0x1b80+-0x1b8c+0x376f,-0x43*-0x1d+-0x12a5+0x5*0x24a,-0xdc7+0xf95+0xb5*-0x2,-0x7*-0x19b+0x94d*0x3+-0x26c2,0x25*0x93+-0x2*-0x11c+-0x48d*0x5,-0x1247+-0x3*0x687+0x3*0xca1,-0x16bd*-0x1+-0x27*0xd+-0x14c2,0xa+-0x2ea+-0x10*-0x2e,-0x52*-0x2e+0x2549+-0x1*0x33ac,0x1*0x12b5+0x1bb0*-0x1+0x8fb,-0x1*0x139d+0xb1+0x1333,-0x2*0x745+0x1*-0xcd9+-0x1ba6*-0x1,0x9e*-0x3b+0x2215+0x2da,-0x272+0x234d*-0x1+0x2653,-0x11*-0x1e2+-0x1be0+-0x335*0x1,0x17a1+-0x2094+0x1*0x8f3,0x2322*-0x1+-0x199+0x24bb*0x1,0x149f*0x1+-0x18e0+0xb*0x63,0x104c+0x541+0x3*-0x72f,0x142b+0x1b1*-0x13+0xc41*0x1,-0xcf9+-0x188e*0x1+0x25cc,-0x92b+0x9*-0x10f+0x1300,0xdd*0x22+-0x253f+-0x1*-0x829,0x252f+0x1d*-0xe0+0x4d*-0x25,0xda+0x2651+-0x26e9,0x3f*-0x3a+-0x3*-0xc09+0x1*-0x1575,-0x1f6+0x1d9e+-0xd93*0x2]),Uv=(_0x3e42ea,_0x53fb09)=>{const _0x2031b9=new _e(_0x3e42ea,{'width':0x1,'height':0x1,'format':Oe,'mipmaps':!(-0xade+-0x13*-0x3+0xaa6),'levels':[_0x53fb09]}),_0x533d61=new vt({'colorBuffer':_0x2031b9,'depth':!(0x7ea*0x1+-0x25d9+0x1df0)});_0x3e42ea['setFramebu'+'ffer'](_0x533d61['impl']['_glFrameBu'+'ffer']),_0x3e42ea['initRender'+'Target'](_0x533d61);const _0x1f74df=new Uint8ClampedArray(0x3*-0x5ce+0x14a5+-0x337*0x1);return _0x3e42ea['gl']['readPixels'](0x19*-0xe4+0x69a+0xfaa,0x702+-0x2*0x11d9+0x198*0x12,0x15b*0xa+-0xcc5+-0xc8,0x2683+0x2092+-0x4714,_0x3e42ea['gl']['RGBA'],_0x3e42ea['gl']['UNSIGNED_B'+'YTE'],_0x1f74df),_0x533d61['destroy'](),_0x2031b9['destroy'](),_0x1f74df[-0x1d40+0x1*0x1091+0xcaf*0x1]===0x1753+-0x18cf+0x17d&&_0x1f74df[-0x3*-0x2c5+0x1*0xf+-0x1*0x85d]===0x1*-0x15dc+-0x1347+0x2925&&_0x1f74df[-0xf98+-0x34a*-0x6+-0x2*0x211]===-0x2*0xb21+-0x1df7*-0x1+-0x7b2&&_0x1f74df[-0x103*-0x21+-0x2402+0x2a2]===-0x1131+0xd08+0x468;},ak=_0x5d6325=>createImageBitmap(new Blob([kv],{'type':'image/png'}),{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x2f759a=>Uv(_0x5d6325,_0x2f759a))['catch'](_0x2637b7=>!(0x2*-0x7ac+0x89a*0x1+-0x1*-0x6bf)),nk=_0x41254e=>new Promise((_0xe75e73,_0x315e4b)=>{const _0x8a9701=new Image();_0x8a9701['src']=URL['createObje'+'ctURL'](new Blob([kv])),_0x8a9701['onload']=()=>{_0xe75e73(Uv(_0x41254e,_0x8a9701));};});class ok{static['run'](_0x4814ab){ak(_0x4814ab)['then'](_0x573a16=>{console['log']('imageBitma'+'pIsCorrect'+'='+_0x573a16);}),nk(_0x4814ab)['then'](_0x5416fd=>{console['log']('imgElement'+'IsCorrect='+_0x5416fd);});}}class lk extends kn{constructor(_0x23149c,_0x10969f){super(),this['crossOrigi'+'n']=_0x23149c['prefix']?'anonymous':null,this['maxRetries']=0x1*0x1b1a+-0x4d7*-0x2+-0x24c8,this['device']=_0x10969f,ni['get']('IMG_ALPHA_'+'TEST')&&ok['run'](this['device']);}['load'](_0x400faf,_0x5728cc,_0x4876d2){var _0x3c4837;const _0x15e621=!!((_0x3c4837=_0x4876d2==null?void(0xdd*-0x18+-0x1*-0x1d0b+-0x853):_0x4876d2['file'])!=null&&_0x3c4837['contents']);if(_0x15e621){if(this['device']['supportsIm'+'ageBitmap']){this['_loadImage'+'BitmapFrom'+'Blob'](new Blob([_0x4876d2['file']['contents']]),_0x5728cc);return;}_0x400faf={'load':URL['createObje'+'ctURL'](new Blob([_0x4876d2['file']['contents']])),'original':_0x400faf['original']};}const _0x34f83d=(_0x1366f5,_0x55eca5)=>{_0x15e621&&URL['revokeObje'+'ctURL'](_0x400faf['load']),_0x5728cc(_0x1366f5,_0x55eca5);};let _0x5ebca6;_0x4876d2&&_0x4876d2['options']&&_0x4876d2['options']['hasOwnProp'+'erty']('crossOrigi'+'n')?_0x5ebca6=_0x4876d2['options']['crossOrigi'+'n']:Ln['test'](_0x400faf['load'])&&(_0x5ebca6=this['crossOrigi'+'n']),this['device']['supportsIm'+'ageBitmap']?this['_loadImage'+'Bitmap'](_0x400faf['load'],_0x400faf['original'],_0x5ebca6,_0x34f83d,_0x4876d2):this['_loadImage'](_0x400faf['load'],_0x400faf['original'],_0x5ebca6,_0x34f83d);}['open'](_0x496d15,_0x1aa8e2,_0x289230,_0x1c18fa={}){const _0x4b6002=new _e(_0x289230,{'name':_0x496d15,'profilerHint':mr,'width':_0x1aa8e2['width'],'height':_0x1aa8e2['height'],'format':_0x1c18fa['srgb']?hs:Oe,..._0x1c18fa});return _0x4b6002['setSource'](_0x1aa8e2),_0x4b6002;}['_loadImage'](_0x3ae48d,_0xb3eabc,_0x18c2f0,_0x3eb4f5){const _0x2f4256=new Image();_0x18c2f0&&(_0x2f4256['crossOrigi'+'n']=_0x18c2f0);let _0x513293=0x159a*-0x1+-0xf9f+0xd*0x2dd;const _0x452eba=this['maxRetries'];let _0x15a23d;_0x2f4256['onload']=function(){_0x3eb4f5(null,_0x2f4256);},_0x2f4256['onerror']=function(){if(!_0x15a23d){if(_0x452eba>-0x279+0x14fe*-0x1+0x1777&&++_0x513293<=_0x452eba){const _0x573739=Math['pow'](0x3c1*0x7+0x21d9+-0x36*0x11d,_0x513293)*(-0x174f+-0x1*0x13cc+0x2b7f);console['log']('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0xb3eabc+('\x27\x20-\x20Retryi'+'ng\x20in\x20')+_0x573739+'ms...');const _0xcc88af=_0x3ae48d['indexOf']('?')>=0x1713+-0x97f+0x1*-0xd94?'&':'?';_0x15a23d=setTimeout(()=>{_0x2f4256['src']=_0x3ae48d+_0xcc88af+'retry='+Date['now'](),_0x15a23d=null;},_0x573739);}else _0x3eb4f5('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0xb3eabc+'\x27');}},_0x2f4256['src']=_0x3ae48d;}['_loadImage'+'Bitmap'](_0x208b4b,_0xb1ae7e,_0x5f106a,_0x3c4a1e,_0x427b9e){const _0x408397={'cache':!(-0xb69*-0x3+-0x32b*-0x3+-0x2bbc),'responseType':'blob','retry':this['maxRetries']>-0x1ac9+-0x15da*0x1+0x1*0x30a3,'maxRetries':this['maxRetries'],'progress':_0x427b9e};nt['get'](_0x208b4b,_0x408397,(_0x277ec5,_0x193371)=>{_0x277ec5?_0x3c4a1e(_0x277ec5):this['_loadImage'+'BitmapFrom'+'Blob'](_0x193371,_0x3c4a1e);});}['_loadImage'+'BitmapFrom'+'Blob'](_0x5867cd,_0x2183c0){createImageBitmap(_0x5867cd,{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0xec0bdf=>_0x2183c0(null,_0xec0bdf))['catch'](_0x2fc63a=>_0x2183c0(_0x2fc63a));}}const ef=[0xb33c*-0x3037+-0x9917729f+0xb91be*0x17c9,0x6ddf535f+0xed*0x1329e95+-0x1d81905*0x70,-0xee3bbe6+0xec870ef+0xa355504],hk={0x83f0:bc,0x83f2:bu,0x83f3:Yo,0x8d64:Pc,0x9274:Pu,0x9278:Mu,0x8c00:Mc,0x8c01:Ko,0x8c02:Ic,0x8c03:Zo,0x8051:ur,0x8058:Oe,0x8c41:Cu,0x8c43:hs,0x8c3a:pn,0x881b:ri,0x881a:at};function ck(_0x10e5eb,_0x208065,_0x4126d4,_0x4e4f94){return _0x10e5eb===pn?new Uint32Array(_0x208065,_0x4126d4,_0x4e4f94/(-0x35*-0x7f+0x602*0x6+-0xc77*0x5)):new Uint8Array(_0x208065,_0x4126d4,_0x4e4f94);}class dk extends kn{constructor(_0x47207e){super(),this['maxRetries']=0x160+-0x2*0xd17+0x18ce;}['load'](_0x366400,_0x233803,_0x377a60){me['fetchArray'+'Buffer'](_0x366400['load'],_0x233803,_0x377a60,this['maxRetries']);}['open'](_0x12ee8d,_0x5d8172,_0x19c77f,_0x4b33da={}){const _0x3c3e9c=this['parse'](_0x5d8172);if(!_0x3c3e9c)return null;const _0x2dceb5=_0x4b33da['srgb']?Rc(_0x3c3e9c['format']):_0x3c3e9c['format'],_0x27f4d9=new _e(_0x19c77f,{'name':_0x12ee8d,'profilerHint':mr,'addressU':_0x3c3e9c['cubemap']?ue:pt,'addressV':_0x3c3e9c['cubemap']?ue:pt,'width':_0x3c3e9c['width'],'height':_0x3c3e9c['height'],'format':_0x2dceb5,'cubemap':_0x3c3e9c['cubemap'],'levels':_0x3c3e9c['levels'],..._0x4b33da});return _0x27f4d9['upload'](),_0x27f4d9;}['parse'](_0x1b69fe){const _0x27663a=new Uint32Array(_0x1b69fe);if(ef[-0x14f8+-0x1b65+0x3*0x101f]!==_0x27663a[-0xac2*-0x1+-0x94*0x3e+0x1916]||ef[-0x11c5*-0x1+0x1313+-0x1*0x24d7]!==_0x27663a[0xd07+0x1d19+-0x2a1f]||ef[-0x1a7d+-0x2d*-0x8b+0x210]!==_0x27663a[0x1996+0xed9+-0x286d])return M['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX\x20f'+'ile.\x20Expec'+'ted\x200xAB4B'+'5458,\x200x20'+'3131BB,\x200x'+'0D0A1A0A'),null;const _0x48b64a={'endianness':_0x27663a[-0x24e0+-0x26d1+0x25da*0x2],'glType':_0x27663a[-0x809+-0x1a8d+0x114d*0x2],'glTypeSize':_0x27663a[0x5*0x4ef+-0x337*-0xc+-0x1f9d*0x2],'glFormat':_0x27663a[-0x5*-0xbe+0xa3f*0x3+0x4eb*-0x7],'glInternalFormat':_0x27663a[0x12*0xa7+-0x1d1b+0x1164],'glBaseInternalFormat':_0x27663a[0x1*-0x5b3+0x3e2+0x1d9],'pixelWidth':_0x27663a[0x22e2+0x6*-0x120+-0x1c19*0x1],'pixelHeight':_0x27663a[-0x51a*0x4+0x23f1+-0x1*0xf7f],'pixelDepth':_0x27663a[0x1*-0x1625+0x101*-0x1+-0x7bb*-0x3],'numberOfArrayElements':_0x27663a[-0x11aa+-0x1*-0x45+0x1171],'numberOfFaces':_0x27663a[-0xdce+-0xb8a+0x1965],'numberOfMipmapLevels':_0x27663a[0x97f+0xf89+-0x18fa],'bytesOfKeyValueData':_0x27663a[-0x1*0x24c9+-0x10a0*-0x2+0x5c*0xa]};if(_0x48b64a['pixelDepth']>0x2*0xca9+0x1*-0x1f70+0x61f)return M['warn']('More\x20than\x20'+'1\x20pixel\x20de'+'pth\x20not\x20su'+'pported!'),null;if(_0x48b64a['numberOfAr'+'rayElement'+'s']!==-0x1*-0x1825+-0x1*-0xbb+-0x18e0)return M['warn']('Array\x20text'+'ure\x20not\x20su'+'pported!'),null;const _0x6cbe8f=hk[_0x48b64a['glInternal'+'Format']];if(_0x6cbe8f===void(0x9a4+0x1*0x166+-0x12*0x9d))return M['warn']('Unknown\x20gl'+'InternalFo'+'rmat:\x20'+_0x48b64a['glInternal'+'Format']),null;let _0x58ef6b=-0x1953+0x1*-0x177+0x1ada*0x1+_0x48b64a['bytesOfKey'+'ValueData']/(-0x498*0x1+0x2119+-0x97f*0x3);const _0x5ea028=_0x48b64a['numberOfFa'+'ces']>-0x16*0x92+0x13c+0xb51,_0xb68b86=[];for(let _0x31c40c=0x2ad+0x25*0xc5+0xf93*-0x2;_0x31c40c<(_0x48b64a['numberOfMi'+'pmapLevels']||-0x74c+0x12a4+-0xb57);_0x31c40c++){const _0x4d7b3b=_0x27663a[_0x58ef6b++];_0x5ea028&&_0xb68b86['push']([]);const _0x4caaf0=_0x5ea028?_0xb68b86[_0x31c40c]:_0xb68b86;for(let _0x5f2bf0=0x21c8+-0x37a+-0x1e4e*0x1;_0x5f2bf0<(_0x5ea028?-0x1*0x243b+0x1f1+-0xf4*-0x24:-0x5*0x6ee+-0x282*0x3+0x2a2d);++_0x5f2bf0)_0x4caaf0['push'](ck(_0x6cbe8f,_0x1b69fe,_0x58ef6b*(0x3*-0x252+-0x1aab+-0x1*-0x21a5),_0x4d7b3b)),_0x58ef6b+=_0x4d7b3b+(0x25d5+-0x727*-0x5+0x15*-0x381)>>0x1*0xa96+-0xe*-0x1a1+-0x2162;}return{'format':_0x6cbe8f,'width':_0x48b64a['pixelWidth'],'height':_0x48b64a['pixelHeigh'+'t'],'levels':_0xb68b86,'cubemap':_0x5ea028};}}const fk={'KHR_DF_MODEL_UASTC':0xa6};class uk extends kn{constructor(_0x25d9c6,_0x237351){super(),this['maxRetries']=-0x1c1b*0x1+0x1227+-0x34*-0x31,this['device']=_0x237351;}['load'](_0x46e6af,_0x55f342,_0x56a8a2){me['fetchArray'+'Buffer'](_0x46e6af['load'],(_0x574154,_0x2a2a8b)=>{_0x574154?_0x55f342(_0x574154,_0x2a2a8b):this['parse'](_0x2a2a8b,_0x46e6af,_0x55f342,_0x56a8a2);},_0x56a8a2,this['maxRetries']);}['open'](_0x194255,_0x191670,_0x2d7ab3,_0x443333={}){const _0x281edd=_0x443333['srgb']?Rc(_0x191670['format']):_0x191670['format'],_0x291a29=new _e(_0x2d7ab3,{'name':_0x194255,'profilerHint':mr,'addressU':_0x191670['cubemap']?ue:pt,'addressV':_0x191670['cubemap']?ue:pt,'width':_0x191670['width'],'height':_0x191670['height'],'format':_0x281edd,'cubemap':_0x191670['cubemap'],'levels':_0x191670['levels'],..._0x443333});return _0x291a29['upload'](),_0x291a29;}['parse'](_0x2d9207,_0x5e2638,_0x50362c,_0x211fa1){var _0x2d9c59,_0x473212,_0x2b2bac;const _0xd602aa=new iS(_0x2d9207),_0x3e011e=[_0xd602aa['readU32be'](),_0xd602aa['readU32be'](),_0xd602aa['readU32be']()];if(_0x3e011e[-0x1*-0x18df+0xb03*0x1+0x6*-0x5fb]!==-0x5171*-0x7cc3+0x7abe4f9*0x26+-0x9fe96db1||_0x3e011e[-0x1*0x1b69+-0x25f*-0x5+0xf8f]!==0xe4444b9+-0x1d98f6*-0x184+-0x52*0x541273||_0x3e011e[-0x1*0x2404+0x32*-0x6d+0x3950]!==-0x12889026+-0xba0a3e8+0x2b334e18)return M['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX2\x20'+'file.\x20Expe'+'cted\x200xAB4'+'B5458,\x200x2'+'03131BB,\x200'+'x0D0A1A0A'),null;const _0x2f812e={'vkFormat':_0xd602aa['readU32'](),'typeSize':_0xd602aa['readU32'](),'pixelWidth':_0xd602aa['readU32'](),'pixelHeight':_0xd602aa['readU32'](),'pixelDepth':_0xd602aa['readU32'](),'layerCount':_0xd602aa['readU32'](),'faceCount':_0xd602aa['readU32'](),'levelCount':_0xd602aa['readU32'](),'supercompressionScheme':_0xd602aa['readU32']()},_0x598d9d={'dfdByteOffset':_0xd602aa['readU32'](),'dfdByteLength':_0xd602aa['readU32'](),'kvdByteOffset':_0xd602aa['readU32'](),'kvdByteLength':_0xd602aa['readU32'](),'sgdByteOffset':_0xd602aa['readU64'](),'sgdByteLength':_0xd602aa['readU64']()},_0x138ecf=[];for(let _0x57d0c7=-0x1*-0x1610+0x385+-0xb1*0x25;_0x57d0c7<Math['max'](0xc61+0xf30+-0x62*0x48,_0x2f812e['levelCount']);++_0x57d0c7)_0x138ecf['push']({'byteOffset':_0xd602aa['readU64'](),'byteLength':_0xd602aa['readU64'](),'uncompressedByteLength':_0xd602aa['readU64']()});if(_0xd602aa['readU32']()!==_0x598d9d['kvdByteOff'+'set']-_0x598d9d['dfdByteOff'+'set'])return M['warn']('Invalid\x20fi'+'le\x20data\x20en'+'countered.'),null;_0xd602aa['skip'](0x1336+-0x25cf+-0xfb*-0x13);const _0x7bdf0f=_0xd602aa['readU8']();_0xd602aa['skip'](_0x598d9d['dfdByteLen'+'gth']-(0x15c8*-0x1+0x1*0x25be+-0xfed)),_0xd602aa['skip'](_0x598d9d['kvdByteLen'+'gth']),_0x2f812e['supercompr'+'essionSche'+'me']===0xa67*-0x1+0x12c8*-0x2+0x5*0x998||_0x7bdf0f===fk['KHR_DF_MOD'+'EL_UASTC']?Nv(this['device'],_0x5e2638['load'],_0x2d9207,_0x50362c,{'isGGGR':(((_0x2b2bac=(_0x473212=(_0x2d9c59=_0x211fa1==null?void(-0x43a+-0x2410+0x1b*0x17e):_0x211fa1['file'])==null?void(-0x263b*0x1+0x341*0x8+0xc33):_0x2d9c59['variants'])==null?void(-0x25f*-0x1+-0xb44+0x8e5):_0x473212['basis'])==null?void(-0xdbc+-0x827+0x15e3):_0x2b2bac['opt'])&0x1e31+0x4f*0x46+-0x33c3)!==0x21b1+-0x1*0x20ed+-0xc4,'isKTX2':!(-0x22fc+0x152b+0xdd1)})||_0x50362c('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x211fa1['name']+']('+_0x211fa1['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.')):_0x50362c('unsupporte'+'d\x20KTX2\x20pix'+'el\x20format');}}class mk extends kn{constructor(_0x24b666){super(),this['maxRetries']=0x1*-0x262f+0x2*-0x345+-0x1*-0x2cb9;}['load'](_0x311785,_0x2c1dcd,_0x1201c9){me['fetchArray'+'Buffer'](_0x311785['load'],_0x2c1dcd,_0x1201c9,this['maxRetries']);}['open'](_0x2fc667,_0x2179c9,_0x2a5b03,_0x243fd5={}){const _0x3b39c9=new Uint32Array(_0x2179c9,-0x150e+0x1f6b*-0x1+0x3479,0x7*-0x421+-0x3*-0x4b7+-0xee2*-0x1),_0x2a4595=_0x3b39c9[-0x61*-0x47+-0x186*0x11+-0xfd],_0x499fe1=_0x3b39c9[-0x1490+-0x24fd+-0x998*-0x6],_0xd5d91e=Math['max'](_0x3b39c9[0xfb7+-0x963+-0x64d],-0x25cf+-0x195d+-0x1*-0x3f2d),_0x158c3e=_0x3b39c9[0x1*-0x10b8+-0xe27+-0x39*-0x8b]===-0x1720+-0x47+0x176b,_0x10fc08=_0x3b39c9[0x5*-0x3a9+0x84f*-0x3+0x2b4f],_0x4bb391=_0x3b39c9[-0x2399+-0x1682+-0x1*-0x3a31],_0x3f26a1=_0x3b39c9[-0xf*-0x3c+0x1*0x68e+0x1fe*-0x5]===0x1af93*-0x1+0x4c6d+0x26126,_0x5b5c68=-0xaaacaed*0x5+-0x14131*-0x43a9+-0x11c6728c*-0x1,_0x15b1dc=0x2e*-0x13da0aa+0x4c8a4082+0x1*0x21dcf64e,_0x6dbc11=0x4d1*-0x3+-0x317*0x7+0x2485,_0x417f7d=0x1*-0x268b+-0x154f+0x3c4e,_0x122dcb=-0x841cd*0x6d5+-0x71*0xb57b7f+0xb9c864e5,_0x47e8f2=0x42876f88+-0xef99d9b+-0x13*0x1fb78f,_0x36c549=0xad90d65+-0x5*0x8dff16b+0x52badc02,_0x5393da=0x1*0x37c232a7+0x566630d*-0x9+0x2a0a7d1e,_0x337003=0x6fc482f+0x3d81dda5+-0xd56*0x17246;let _0x1990ad=!(0x806*0x4+-0x99c+-0x1*0x167b),_0x4f5445=!(-0x4*-0x2ea+0x219e+-0x2d45),_0x45da17=!(0xbb*0x11+-0x2d3*0x9+0xd01),_0x20a82a=!(-0x1356+-0xdc+0x1433),_0x1ca224=null,_0x15c3df=0xe0f+-0xa1d*0x2+0x62c,_0x378019;if(_0x158c3e?_0x10fc08===_0x5b5c68?(_0x1ca224=bc,_0x1990ad=!(0x5cf+0x258f+-0x2b5e)):_0x10fc08===_0x15b1dc?(_0x1ca224=Yo,_0x1990ad=!(-0x2*-0x90c+0x1a88+-0x2ca0)):_0x10fc08===_0x6dbc11?(_0x1ca224=at,_0x15c3df=-0x238a+0x2*-0xd76+-0x7cf*-0x8):_0x10fc08===_0x417f7d?(_0x1ca224=Bt,_0x15c3df=0x1*0x1f63+0x3*0x3ad+0xe22*-0x3):_0x10fc08===_0x122dcb?(_0x1ca224=Pc,_0x1990ad=!(-0x2*-0x7ad+0x1*-0x10d+-0xe4d),_0x4f5445=!(0x1877+0x1827+-0x309e*0x1)):_0x10fc08===_0x47e8f2||_0x10fc08===_0x36c549?(_0x1ca224=_0x10fc08===_0x47e8f2?Ko:Zo,_0x1990ad=!(-0x7f7*-0x1+-0x19fb*0x1+0x1204),_0x45da17=!(-0x1*0x769+0x4*0x643+-0x11a3)):(_0x10fc08===_0x5393da||_0x10fc08===_0x337003)&&(_0x1ca224=_0x10fc08===_0x5393da?Mc:Ic,_0x1990ad=!(-0x57*0x6b+0x1*-0x1d41+0x419e),_0x20a82a=!(0x2*-0x11c5+0x125e+0x112c)):_0x4bb391===-0x10a*0x1+-0x1*0x1abf+0x1be9&&(_0x1ca224=Oe),!_0x1ca224)return M['error']('This\x20DDS\x20p'+'ixel\x20forma'+'t\x20is\x20curre'+'ntly\x20unsup'+'ported.\x20Em'+'pty\x20textur'+'e\x20will\x20be\x20'+'created\x20in'+'stead\x20of\x20'+_0x2fc667+'.'),_0x378019=new _e(_0x2a5b03,{'width':0x4,'height':0x4,'format':ur,'name':'dds-legacy'+'-empty'}),_0x378019;_0x378019=new _e(_0x2a5b03,{'name':_0x2fc667,'profilerHint':mr,'addressU':_0x3f26a1?ue:pt,'addressV':_0x3f26a1?ue:pt,'width':_0x2a4595,'height':_0x499fe1,'format':_0x1ca224,'cubemap':_0x3f26a1,'mipmaps':_0xd5d91e>0xc5a+-0x7f*0x17+-0xf0,..._0x243fd5});let _0x2da1c4=0xc51*-0x3+0x6*0x58a+0x437*0x1;const _0x3e1ae7=_0x3f26a1?-0x1b30+-0x1*-0x1f22+-0x3ec:0xef2+-0x1bbe+-0xccd*-0x1;let _0x4e29f1;const _0xc79060=0x856+0x1083+-0x18d5,_0x42b35c=0xb39*0x2+0x11d5+0xb*-0x3a9,_0x194217=_0x10fc08===_0x5b5c68?-0x224b+-0x22a5+0x44f8:0x162d+0x1e49+0x161*-0x26;let _0x1815ab,_0x806fb7,_0x2ce784;for(let _0x4b7274=-0x6a4+0x1*0xd4b+-0x6a7;_0x4b7274<_0x3e1ae7;_0x4b7274++){let _0x105503=_0x2a4595,_0xae3c75=_0x499fe1;for(let _0x361f3a=0xb53+0x1c2*-0x10+0x10cd;_0x361f3a<_0xd5d91e;_0x361f3a++){_0x1990ad?_0x4f5445?_0x4e29f1=Math['floor']((_0x105503+(-0x1f38+0x10f5+0xe46))/(0x407*-0x4+0x1e84+-0xc*0x133))*Math['floor']((_0xae3c75+(-0x9*0x2ef+-0x27*-0x49+0xf4b))/(0x221+0x2*0x11fc+-0x2615*0x1))*(-0x1*0x249c+-0x2bf+0x2763):_0x45da17?_0x4e29f1=Math['max'](_0x105503,0xc7a+0xc04+-0x186e)*Math['max'](_0xae3c75,-0x273*0x1+0xfe2+-0xd67*0x1)/(-0x2b5*0xb+0xd57*0x1+-0x9c*-0x1b):_0x20a82a?_0x4e29f1=Math['max'](_0x105503,0x26b4+0xd19*0x1+-0x1c9*0x1d)*Math['max'](_0xae3c75,-0xf5e+-0x5fb*-0x1+0x96b*0x1)/(0x1e00+-0x15f3+-0x80b):(_0x1815ab=Math['floor']((_0x105503+_0xc79060-(0x39d*0xa+0x19b*-0x3+-0x538*0x6))/_0xc79060),_0x806fb7=Math['floor']((_0xae3c75+_0x42b35c-(0xea9+0x7*0xfa+-0x157e))/_0x42b35c),_0x2ce784=_0x1815ab*_0x806fb7,_0x4e29f1=_0x2ce784*_0x194217):_0x4e29f1=_0x105503*_0xae3c75*(-0x1ba4+0x824+0x1384);const _0x3ba772=_0x1ca224===Bt?new Float32Array(_0x2179c9,_0x2da1c4,_0x4e29f1):_0x1ca224===at?new Uint16Array(_0x2179c9,_0x2da1c4,_0x4e29f1):new Uint8Array(_0x2179c9,_0x2da1c4,_0x4e29f1);_0x3f26a1?(_0x378019['_levels'][_0x361f3a]||(_0x378019['_levels'][_0x361f3a]=[]),_0x378019['_levels'][_0x361f3a][_0x4b7274]=_0x3ba772):_0x378019['_levels'][_0x361f3a]=_0x3ba772,_0x2da1c4+=_0x4e29f1*_0x15c3df,_0x105503=Math['max'](_0x105503*(0x3fc+0x100f+0x2dd*-0x7+0.5),-0x995*0x2+-0xc39+0x47c*0x7),_0xae3c75=Math['max'](_0xae3c75*(-0xdd2+-0x20f+0xfe1+0.5),0xb*-0x2b3+-0x2146*0x1+0x3ef8);}}return _0x378019['upload'](),_0x378019;}}class pk extends kn{constructor(_0x4c17fd){super(),this['maxRetries']=0x1a05+0x235b*-0x1+-0x4ab*-0x2;}['load'](_0x205a4a,_0x1300c2,_0xddeca0){me['fetchArray'+'Buffer'](_0x205a4a['load'],_0x1300c2,_0xddeca0,this['maxRetries']),_0xddeca0['data']&&!_0xddeca0['data']['type']&&(_0xddeca0['data']['type']=Nh);}['open'](_0x40dd25,_0x1ea752,_0x195994,_0x3f3b31={}){const _0xb86fcf=this['parse'](_0x1ea752);if(!_0xb86fcf)return null;const _0x2381d1=new _e(_0x195994,{'name':_0x40dd25,'profilerHint':mr,'addressU':pt,'addressV':ue,'minFilter':Te,'magFilter':Te,'width':_0xb86fcf['width'],'height':_0xb86fcf['height'],'levels':_0xb86fcf['levels'],'format':Oe,'type':Nh,'mipmaps':!(-0xb7*-0x1f+-0x1466+-0x1c2),..._0x3f3b31});return _0x2381d1['upload'](),_0x2381d1;}['parse'](_0x6bf110){const _0x59ac29=new iS(_0x6bf110);if(!_0x59ac29['readLine']()['startsWith']('#?RADIANCE'))return M['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20ma'+'gic'),null;const _0x3bc23f={};for(;;){const _0x2652df=_0x59ac29['readLine']();if(_0x2652df['length']===-0x17*-0x5a+-0x44*-0x7f+-0x29d2)break;{const _0x3f188c=_0x2652df['split']('=');_0x3f188c['length']===-0x20e9+0x1588+-0xb63*-0x1&&(_0x3bc23f[_0x3f188c[-0xb*-0x5+0x1*0x1bad+0x6f9*-0x4]]=_0x3f188c[-0x121*-0x1+0x2d0*0x2+0x18*-0x48]);}}if(!_0x3bc23f['hasOwnProp'+'erty']('FORMAT'))return M['error']('radiance\x20h'+'eader\x20miss'+'ing\x20FORMAT'+'\x20variable'),null;const _0x1d413c=_0x59ac29['readLine']()['split']('\x20');if(_0x1d413c['length']!==-0x6cd+-0x2*0x25f+0xb*0x10d)return M['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20re'+'solution'),null;const _0x4f6366=parseInt(_0x1d413c[0x679*-0x6+-0x250b+0x4be2],0x1e8*0xd+0x2*-0x1048+-0x1a*-0x4d),_0x4a70e7=parseInt(_0x1d413c[0xa50+0x165c+-0x20a9],0x509*0x7+0x1bd0*0x1+-0x3f05),_0x5d0cc9=this['_readPixel'+'s'](_0x59ac29,_0x4a70e7,_0x4f6366,_0x1d413c[-0x1eeb+-0x460+0x234b]==='-Y');return _0x5d0cc9?{'width':_0x4a70e7,'height':_0x4f6366,'levels':[_0x5d0cc9]}:null;}['_readPixel'+'s'](_0x32a867,_0x51efc2,_0x516d36,_0x203b94){if(_0x51efc2<-0x847+0x1a6e+-0x121f*0x1||_0x51efc2>0xf15d+0x5b7+-0x7715)return this['_readPixel'+'sFlat'](_0x32a867,_0x51efc2,_0x516d36);const _0x3b79be=[0x9c9+-0xb3*0x13+0x380,-0x623+0x87+0x59c,0xdd5+-0xcf0*-0x1+-0x1ac5,0xb1b*-0x1+0x6ad*-0x1+-0x472*-0x4];if(_0x32a867['readArray'](_0x3b79be),_0x3b79be[-0x1cc6+0x1e9*0xe+0x2*0x104]!==0x12fb+-0x4f5*-0x2+-0x1ce3||_0x3b79be[0xa22*-0x1+0xe95+-0x472]!==-0x1b*-0x9d+-0x1*-0x15f7+-0x2684||(_0x3b79be[-0x153*0x3+-0x96d*-0x1+0x11*-0x52]&0x1*-0xfd9+-0x9*-0xac+0xa4d*0x1)!==0x2501+0x22c8+-0x47c9)return _0x32a867['skip'](-(-0x85a*0x4+0xda6+0x13c6)),this['_readPixel'+'sFlat'](_0x32a867,_0x51efc2,_0x516d36);const _0x3d62ac=new ArrayBuffer(_0x51efc2*_0x516d36*(0x12c9+-0x5*-0xa2+-0x5*0x463)),_0x1393b7=new Uint8Array(_0x3d62ac);let _0x6bc606=_0x203b94?-0x121+0x20bd+-0x1f9c:_0x51efc2*(0x1680+0x2005+-0x1*0x3681)*(_0x516d36-(-0x2169+0xb6f+0x15fb)),_0x4f8bf8,_0x7db289,_0x2cf7a6,_0x437743,_0x207eab,_0x30ff3e;for(_0x7db289=0x96*-0x4+0x535+-0x2dd;_0x7db289<_0x516d36;++_0x7db289){if(_0x7db289&&_0x32a867['readArray'](_0x3b79be),(_0x3b79be[-0x11d8+0x2*-0xb23+0x2820]<<-0x94*0x10+-0x10*0x1d5+0x2698)+_0x3b79be[0x11bd+0x23d7+-0x3591]!==_0x51efc2)return M['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'width'),null;for(_0x437743=0x1cfa+0x133*0x1b+0x8b*-0x71;_0x437743<-0x105e+0x577+-0x22f*-0x5;++_0x437743)for(_0x4f8bf8=-0x75*0x1f+0x2582+0x4ab*-0x5;_0x4f8bf8<_0x51efc2;)if(_0x207eab=_0x32a867['readU8'](),_0x207eab>0x65*0x5b+0x1*-0x49d+-0x1eca){if(_0x207eab-=0x1*0x2403+-0x7f*-0x36+-0x3e4d,_0x4f8bf8+_0x207eab>_0x51efc2)return M['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x30ff3e=_0x32a867['readU8'](),_0x2cf7a6=-0x2214+-0x1c9*0x5+0x2b01;_0x2cf7a6<_0x207eab;++_0x2cf7a6)_0x1393b7[_0x6bc606+_0x437743+(-0xc42+0xd*0x1a2+-0x8f4)*_0x4f8bf8++]=_0x30ff3e;}else{if(_0x207eab===0x1470+0x5*-0x455+0x139||_0x4f8bf8+_0x207eab>_0x51efc2)return M['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x2cf7a6=0x1*-0x125d+-0x2186+0x33e3;_0x2cf7a6<_0x207eab;++_0x2cf7a6)_0x1393b7[_0x6bc606+_0x437743+(0x1ebb+-0xa34+-0x1*0x1483)*_0x4f8bf8++]=_0x32a867['readU8']();}_0x6bc606+=_0x51efc2*(-0x11b*0xb+-0x1e01+0x1517*0x2)*(_0x203b94?0x1a5+0xbf*-0x2+-0x26:-(-0x1b80+0x7*0x265+0xabe));}return _0x1393b7;}['_readPixel'+'sFlat'](_0x3db8c6,_0x580a21,_0x51d262){return _0x3db8c6['remainingB'+'ytes']===_0x580a21*_0x51d262*(-0xd50+0x2329+-0x51*0x45)?new Uint8Array(_0x3db8c6['arraybuffe'+'r'],_0x3db8c6['offset']):null;}}const kg={'repeat':pt,'clamp':ue,'mirror':Tu},Ug={'nearest':Te,'linear':_t,'nearest_mip_nearest':xc,'linear_mip_nearest':wc,'nearest_mip_linear':Tc,'linear_mip_linear':ea},_k={'default':di,'rgbm':ta,'rgbe':Nh,'rgbp':Io,'swizzleGGGR':Zu},gk=function(_0x645e2b){const _0x25dc45=Ui['calcMipLev'+'elsCount'](_0x645e2b['_width'],_0x645e2b['_height']),_0x283f45=function(_0x5bd999){return _0x5bd999 instanceof HTMLCanvasElement||_0x5bd999 instanceof HTMLImageElement||_0x5bd999 instanceof HTMLVideoElement;};if(!(_0x645e2b['_format']===Oe||_0x645e2b['_format']===Bt)||_0x645e2b['_volume']||_0x645e2b['_compresse'+'d']||_0x645e2b['_levels']['length']===0xd0f*0x1+-0x675+-0x1*0x699||_0x645e2b['_levels']['length']===_0x25dc45||_0x283f45(_0x645e2b['_cubemap']?_0x645e2b['_levels'][-0x9*0x129+0x259+0x1*0x818][0x238*-0x1+-0x1b36+0x1d6e]:_0x645e2b['_levels'][-0x2143+-0x18c1*-0x1+0x882]))return;const _0x287ff9=function(_0x3a9d1b,_0x2661b8,_0x738a75){const _0x5b7c02=Math['max'](0xd64+0x1a5c+-0x39d*0xb,_0x3a9d1b>>0x26fa+0x26b+-0x2964),_0x500351=Math['max'](-0x4f*0x3f+-0xb4c*-0x1+0x826,_0x2661b8>>0x16bb+-0x65d+0x47*-0x3b),_0x1992bb=new _0x738a75['constructo'+'r'](_0x5b7c02*_0x500351*(0x2501+0xeb6+0x5*-0xa57)),_0x379646=Math['floor'](_0x3a9d1b/_0x5b7c02),_0xc9dfb1=Math['floor'](_0x2661b8/_0x500351),_0x3a1793=_0x379646*_0xc9dfb1;for(let _0x1aa295=-0xc8c+-0xa0*-0x2d+-0xf94;_0x1aa295<_0x500351;++_0x1aa295)for(let _0x55ab9b=-0x8f*-0x2f+0x1*-0x32b+-0x1716;_0x55ab9b<_0x5b7c02;++_0x55ab9b)for(let _0x170fbb=0x3d8+0x12cb+-0x16a3;_0x170fbb<-0x5db+-0x99b+0xe*0x11b;++_0x170fbb){let _0x445a85=0x1e3f+-0x1bbc+-0x283;for(let _0x50ea1d=-0x39b+0x22*0xd0+-0x1805;_0x50ea1d<_0xc9dfb1;++_0x50ea1d)for(let _0x130a9a=-0x5b2+-0x24df*-0x1+-0x1f2d;_0x130a9a<_0x379646;++_0x130a9a)_0x445a85+=_0x738a75[(_0x55ab9b*_0x379646+_0x130a9a+(_0x1aa295*_0xc9dfb1+_0x50ea1d)*_0x3a9d1b)*(0x1c35+0x1f2a*-0x1+-0x1*-0x2f9)+_0x170fbb];_0x1992bb[(_0x55ab9b+_0x1aa295*_0x5b7c02)*(0x26a4+-0x355+-0x234b*0x1)+_0x170fbb]=_0x445a85/_0x3a1793;}return _0x1992bb;};for(let _0x52fa0c=_0x645e2b['_levels']['length'];_0x52fa0c<_0x25dc45;++_0x52fa0c){const _0x2ca248=Math['max'](0xd65+-0x349*-0x5+-0x1dd1,_0x645e2b['_width']>>_0x52fa0c-(-0x6d+-0x2287+-0x39*-0x9d)),_0x3cad18=Math['max'](-0x3ff+0x2088+-0x1c88,_0x645e2b['_height']>>_0x52fa0c-(-0x164c+-0xfb8+0x2605));if(_0x645e2b['_cubemap']){const _0x286055=[];for(let _0x43a23b=0x1d*0x107+0x21af*0x1+0x28a*-0x19;_0x43a23b<0x22+-0x1ebf*0x1+0xb*0x2c9;++_0x43a23b)_0x286055['push'](_0x287ff9(_0x2ca248,_0x3cad18,_0x645e2b['_levels'][_0x52fa0c-(0xa2*-0x2d+-0x919+-0x1a*-0x172)][_0x43a23b]));_0x645e2b['_levels']['push'](_0x286055);}else _0x645e2b['_levels']['push'](_0x287ff9(_0x2ca248,_0x3cad18,_0x645e2b['_levels'][_0x52fa0c-(0x25f1+0x2433+-0x4a23)]));}_0x645e2b['_levelsUpd'+'ated']=_0x645e2b['_cubemap']?[[!(-0x367*0x8+0x2451*0x1+-0x919*0x1),!(0x19*0x182+-0xa4*-0x17+-0x346e),!(0x1*0x809+-0xaf3+0x175*0x2),!(-0x9*0x3e8+0x159b+0xd8d),!(0x2*-0x40+-0x909*0x1+0x989),!(-0x2*0xa0e+-0x7cf*0x1+0x7*0x3fd)]]:[!(-0x471*-0x3+0x26e5+-0x3438)];};class Sk extends Ze{constructor(_0x3a38be){super(_0x3a38be,'texture');const _0x299364=_0x3a38be['assets'],_0x145760=_0x3a38be['graphicsDe'+'vice'];this['_device']=_0x145760,this['_assets']=_0x299364,this['imgParser']=new lk(_0x299364,_0x145760),this['parsers']={'dds':new mk(_0x299364),'ktx':new dk(_0x299364),'ktx2':new uk(_0x299364,_0x145760),'basis':new rk(_0x299364,_0x145760),'hdr':new pk(_0x299364)};}set['crossOrigi'+'n'](_0x4c5e12){this['imgParser']['crossOrigi'+'n']=_0x4c5e12;}get['crossOrigi'+'n'](){return this['imgParser']['crossOrigi'+'n'];}set['maxRetries'](_0x46893c){this['imgParser']['maxRetries']=_0x46893c;for(const _0x1c0e6b in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x1c0e6b)&&(this['parsers'][_0x1c0e6b]['maxRetries']=_0x46893c);}get['maxRetries'](){return this['imgParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x39fdec){return _0x39fdec['indexOf']('?')>=-0x2160+-0x1*-0xebc+-0x12a4*-0x1?_0x39fdec['split']('?')[-0x1a6b*-0x1+0x56*-0x20+-0xfab]:_0x39fdec;}['_getParser'](_0x3cb190){const _0x1c7f82=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x3cb190))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x1c7f82]||this['imgParser'];}['_getTextur'+'eOptions'](_0x1e1c71){var _0x4cb488;const _0x5207ff={'profilerHint':mr};if(_0x1e1c71){((_0x4cb488=_0x1e1c71['name'])==null?void(0x269a+-0x3a*-0x36+-0x32d6):_0x4cb488['length'])>-0x1*-0x2290+0x17d2*0x1+-0x3a62&&(_0x5207ff['name']=_0x1e1c71['name']);const _0x310de4=_0x1e1c71['data'];_0x310de4['hasOwnProp'+'erty']('minfilter')&&(_0x5207ff['minFilter']=Ug[_0x310de4['minfilter']]),_0x310de4['hasOwnProp'+'erty']('magfilter')&&(_0x5207ff['magFilter']=Ug[_0x310de4['magfilter']]),_0x310de4['hasOwnProp'+'erty']('addressu')&&(_0x5207ff['addressU']=kg[_0x310de4['addressu']]),_0x310de4['hasOwnProp'+'erty']('addressv')&&(_0x5207ff['addressV']=kg[_0x310de4['addressv']]),_0x310de4['hasOwnProp'+'erty']('mipmaps')&&(_0x5207ff['mipmaps']=_0x310de4['mipmaps']),_0x310de4['hasOwnProp'+'erty']('anisotropy')&&(_0x5207ff['anisotropy']=_0x310de4['anisotropy']),_0x310de4['hasOwnProp'+'erty']('flipY')&&(_0x5207ff['flipY']=!!_0x310de4['flipY']),_0x310de4['hasOwnProp'+'erty']('srgb')&&(_0x5207ff['srgb']=!!_0x310de4['srgb']),_0x5207ff['type']=di,_0x310de4['hasOwnProp'+'erty']('type')?_0x5207ff['type']=_k[_0x310de4['type']]:_0x310de4['hasOwnProp'+'erty']('rgbm')&&_0x310de4['rgbm']?_0x5207ff['type']=ta:_0x1e1c71['file']&&(_0x1e1c71['file']['opt']&0x1*0x128c+-0x1712+0x48e)!==0x3e*-0x4c+-0x1*-0x173a+-0x4d2&&(_0x5207ff['type']=Zu);}return _0x5207ff;}['load'](_0xaa10d6,_0x4efdc8,_0x3b1912){typeof _0xaa10d6=='string'&&(_0xaa10d6={'load':_0xaa10d6,'original':_0xaa10d6}),this['_getParser'](_0xaa10d6['original'])['load'](_0xaa10d6,_0x4efdc8,_0x3b1912);}['open'](_0x142b0c,_0x2a77ea,_0x41a8b9){if(!_0x142b0c)return;const _0xf97144=this['_getTextur'+'eOptions'](_0x41a8b9);let _0x17837c=this['_getParser'](_0x142b0c)['open'](_0x142b0c,_0x2a77ea,this['_device'],_0xf97144);return _0x17837c===null?_0x17837c=new _e(this['_device'],{'width':0x4,'height':0x4,'format':ur}):(gk(_0x17837c),_0x2a77ea['unswizzled'+'GGGR']&&(_0x41a8b9['file']['variants']['basis']['opt']&=-(0x1*0x1ab+-0x19fe*-0x1+-0x1ba0))),_0x17837c;}['patch'](_0x2fc066,_0x513714){const _0x4e9dad=_0x2fc066['resource'];if(!_0x4e9dad)return;const _0x4e169b=this['_getTextur'+'eOptions'](_0x2fc066);for(const _0x1cd804 of Object['keys'](_0x4e169b))_0x4e9dad[_0x1cd804]=_0x4e169b[_0x1cd804];}}const yk='inline',vk='immersive-'+'vr',Eo='immersive-'+'ar',Bg='viewer',xk='left',Tk='cpu-optimi'+'zed',Bv='gpu-optimi'+'zed',zv='luminance-'+'alpha',Vv='unsigned-s'+'hort',Gv='float32';class wk{constructor(_0x2ffc5b){h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRDOMOverl'+'ayState']),h(this,'_root',null),this['_manager']=_0x2ffc5b;}get['supported'](){return this['_supported'];}get['available'](){return this['_supported']&&this['_manager']['active']&&this['_manager']['_session']['domOverlay'+'State']!==null;}get['state'](){return!this['_supported']||!this['_manager']['active']||!this['_manager']['_session']['domOverlay'+'State']?null:this['_manager']['_session']['domOverlay'+'State']['type'];}set['root'](_0x286d25){!this['_supported']||this['_manager']['active']||(this['_root']=_0x286d25);}get['root'](){return this['_root'];}}const lh=[],zg=[];class mu extends pe{constructor(_0x540c67,_0x4d74fd,_0x43c033,_0x5e0a4e=null){super(),h(this,'manager'),h(this,'_xrHitTest'+'Source'),h(this,'_transient'),h(this,'_inputSour'+'ce'),(this['manager']=_0x540c67,this['_xrHitTest'+'Source']=_0x4d74fd,this['_transient']=_0x43c033,this['_inputSour'+'ce']=_0x5e0a4e);}['remove'](){if(!this['_xrHitTest'+'Source'])return;const _0x4c7583=this['manager']['hitTest']['sources'],_0x35f7f9=_0x4c7583['indexOf'](this);_0x35f7f9!==-(-0x2f5*0x1+-0x2a6*0x6+0x12da)&&_0x4c7583['splice'](_0x35f7f9,0x523*0x1+-0xa9c+-0x2*-0x2bd),this['onStop']();}['onStop'](){this['_xrHitTest'+'Source']['cancel'](),this['_xrHitTest'+'Source']=null,this['fire']('remove'),this['manager']['hitTest']['fire']('remove',this);}['update'](_0x2f011a){if(this['_transient']){const _0x28bd3a=_0x2f011a['getHitTest'+'ResultsFor'+'TransientI'+'nput'](this['_xrHitTest'+'Source']);for(let _0x2f4b93=0x61*0x2+-0x734+0x672;_0x2f4b93<_0x28bd3a['length'];_0x2f4b93++){const _0x5dcac9=_0x28bd3a[_0x2f4b93];if(!_0x5dcac9['results']['length'])continue;let _0x47cf54;_0x5dcac9['inputSourc'+'e']&&(_0x47cf54=this['manager']['input']['_getByInpu'+'tSource'](_0x5dcac9['inputSourc'+'e'])),this['updateHitR'+'esults'](_0x5dcac9['results'],_0x47cf54);}}else{const _0x3e8c38=_0x2f011a['getHitTest'+'Results'](this['_xrHitTest'+'Source']);if(!_0x3e8c38['length'])return;this['updateHitR'+'esults'](_0x3e8c38);}}['updateHitR'+'esults'](_0x2df5af,_0x574ba0){if(this['_inputSour'+'ce']&&this['_inputSour'+'ce']!==_0x574ba0)return;const _0x55c413=lh['pop']()??new I();_0x574ba0?_0x55c413['copy'](_0x574ba0['getOrigin']()):_0x55c413['copy'](this['manager']['camera']['getPositio'+'n']());let _0x688279=(0x1*0x16cf+0x11*0x13f+0x1*-0x2bfd)/(-0x1c93+-0x1b*-0x11a+-0x1*0x12b),_0x405370=null;const _0x31917b=lh['pop']()??new I(),_0x8241a9=zg['pop']()??new le();for(let _0x43d2d4=0x8b*0x5+-0x2321+0x206a;_0x43d2d4<_0x2df5af['length'];_0x43d2d4++){const _0x3f7a04=_0x2df5af[_0x43d2d4]['getPose'](this['manager']['_reference'+'Space']),_0x569bfd=_0x55c413['distance'](_0x3f7a04['transform']['position']);_0x569bfd>=_0x688279||(_0x688279=_0x569bfd,_0x405370=_0x2df5af[_0x43d2d4],_0x31917b['copy'](_0x3f7a04['transform']['position']),_0x8241a9['copy'](_0x3f7a04['transform']['orientatio'+'n']));}this['fire']('result',_0x31917b,_0x8241a9,_0x574ba0||this['_inputSour'+'ce'],_0x405370),this['manager']['hitTest']['fire']('result',this,_0x31917b,_0x8241a9,_0x574ba0||this['_inputSour'+'ce'],_0x405370),lh['push'](_0x55c413),lh['push'](_0x31917b),zg['push'](_0x8241a9);}}h(mu,'EVENT_REMO'+'VE','remove'),h(mu,'EVENT_RESU'+'LT','result');class Or extends pe{constructor(_0x41b2a3){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!(window['XRSession']&&window['XRSession']['prototype']['requestHit'+'TestSource'])),h(this,'_available',!(-0x412+0x5f6+-0x1e3)),h(this,'_checkingA'+'vailabilit'+'y',!(-0x7*0x493+0x490+0x1b76)),h(this,'sources',[]),(this['manager']=_0x41b2a3,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){if(this['manager']['session']['enabledFea'+'tures']){const _0xac26cb=this['manager']['session']['enabledFea'+'tures']['indexOf']('hit-test')!==-(-0x4*-0x709+-0x1925*-0x1+-0x1f*0x1b8);if(!_0xac26cb)return;this['_available']=_0xac26cb,this['fire']('available');}else this['_checkingA'+'vailabilit'+'y']||(this['_checkingA'+'vailabilit'+'y']=!(-0x17*0xdc+0x57a*-0x1+0x193e),this['manager']['session']['requestRef'+'erenceSpac'+'e'](Bg)['then'](_0x3c335a=>{this['manager']['session']['requestHit'+'TestSource']({'space':_0x3c335a})['then'](_0xe0a1c9=>{_0xe0a1c9['cancel'](),this['manager']['active']&&(this['_available']=!(0x5*-0x49d+-0x1*-0x1a35+0x2*-0x192),this['fire']('available'));})['catch'](()=>{});})['catch'](()=>{}));}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x1587+-0x865+-0xd21*0x1);for(let _0x3707e3=0xab2+-0x13d6+0x27*0x3c;_0x3707e3<this['sources']['length'];_0x3707e3++)this['sources'][_0x3707e3]['onStop']();this['sources']=[],this['fire']('unavailabl'+'e');}}['start'](_0x248efe={}){var _0x21bc4c,_0x1afa69;if(!this['_supported']){(_0x21bc4c=_0x248efe['callback'])==null||_0x21bc4c['call'](_0x248efe,new Error('XR\x20HitTest'+'\x20is\x20not\x20su'+'pported'),null);return;}if(!this['_available']){(_0x1afa69=_0x248efe['callback'])==null||_0x1afa69['call'](_0x248efe,new Error('XR\x20HitTest'+'\x20is\x20not\x20av'+'ailable'),null);return;}!_0x248efe['profile']&&!_0x248efe['spaceType']&&(_0x248efe['spaceType']=Bg);let _0x592fba;const _0x583aa0=_0x248efe['offsetRay'];if(_0x583aa0){const _0x852676=new DOMPoint(_0x583aa0['origin']['x'],_0x583aa0['origin']['y'],_0x583aa0['origin']['z'],0x1b24+0xaae+0x1cd*-0x15),_0x33cf81=new DOMPoint(_0x583aa0['direction']['x'],_0x583aa0['direction']['y'],_0x583aa0['direction']['z'],-0x1672*0x1+0x19*0xc1+0x133*0x3);_0x592fba=new XRRay(_0x852676,_0x33cf81);}const _0x2a9e30=_0x248efe['callback'];_0x248efe['spaceType']?this['manager']['session']['requestRef'+'erenceSpac'+'e'](_0x248efe['spaceType'])['then'](_0x3bc5e0=>{if(!this['manager']['session']){const _0x403baf=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(2)');_0x2a9e30&&_0x2a9e30(_0x403baf),this['fire']('error',_0x403baf);return;}this['manager']['session']['requestHit'+'TestSource']({'space':_0x3bc5e0,'entityTypes':_0x248efe['entityType'+'s']||void(-0x1*0x31+-0x1ab1+0x1ae2),'offsetRay':_0x592fba})['then'](_0x2aa33c=>{this['_onHitTest'+'Source'](_0x2aa33c,!(-0x543+-0x3*-0x6bb+0x1*-0xeed),_0x248efe['inputSourc'+'e'],_0x2a9e30);})['catch'](_0x3e3ba7=>{_0x2a9e30&&_0x2a9e30(_0x3e3ba7),this['fire']('error',_0x3e3ba7);});})['catch'](_0x587f7e=>{_0x2a9e30&&_0x2a9e30(_0x587f7e),this['fire']('error',_0x587f7e);}):this['manager']['session']['requestHit'+'TestSource'+'ForTransie'+'ntInput']({'profile':_0x248efe['profile'],'entityTypes':_0x248efe['entityType'+'s']||void(0x7*-0x471+-0x1*0x1f85+0x3e9c),'offsetRay':_0x592fba})['then'](_0x4defb6=>{this['_onHitTest'+'Source'](_0x4defb6,!(-0xcb5+-0x1*-0x231d+0x18*-0xef),_0x248efe['inputSourc'+'e'],_0x2a9e30);})['catch'](_0x54327e=>{_0x2a9e30&&_0x2a9e30(_0x54327e),this['fire']('error',_0x54327e);});}['_onHitTest'+'Source'](_0x5efc45,_0x269a23,_0x3840b5,_0x466250){if(!this['manager']['session']){_0x5efc45['cancel']();const _0xe717e8=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(3)');_0x466250&&_0x466250(_0xe717e8),this['fire']('error',_0xe717e8);return;}const _0x3cfac2=new mu(this['manager'],_0x5efc45,_0x269a23,_0x3840b5??null);this['sources']['push'](_0x3cfac2),_0x466250&&_0x466250(null,_0x3cfac2),this['fire']('add',_0x3cfac2);}['update'](_0x1fe16a){if(this['_available']){for(let _0x3e9f1c=-0x1*-0x1a57+0x215+-0x1c6c;_0x3e9f1c<this['sources']['length'];_0x3e9f1c++)this['sources'][_0x3e9f1c]['update'](_0x1fe16a);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}}h(Or,'EVENT_AVAI'+'LABLE','available'),h(Or,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Or,'EVENT_ADD','add'),h(Or,'EVENT_REMO'+'VE','remove'),h(Or,'EVENT_RESU'+'LT','result'),h(Or,'EVENT_ERRO'+'R','error');class pu extends pe{constructor(_0x10bf28,_0x5c230c){super(),h(this,'_image'),h(this,'_width'),h(this,'_bitmap',null),h(this,'_measuredW'+'idth',0x2043+-0xdb3+-0x1290),h(this,'_trackable',!(-0x2*-0x634+0x1068+-0x19*0x127)),h(this,'_tracking',!(0x3*0x5fb+-0x2672+0xd2*0x19)),h(this,'_emulated',!(0x33e+0x1*-0xb89+0x84c)),h(this,'_pose',null),h(this,'_position',new I()),h(this,'_rotation',new le()),(this['_image']=_0x10bf28,this['_width']=_0x5c230c);}get['image'](){return this['_image'];}set['width'](_0x19c9de){this['_width']=_0x19c9de;}get['width'](){return this['_width'];}get['trackable'](){return this['_trackable'];}get['tracking'](){return this['_tracking'];}get['emulated'](){return this['_emulated'];}['prepare'](){return this['_bitmap']?{'image':this['_bitmap'],'widthInMeters':this['_width']}:createImageBitmap(this['_image'])['then'](_0x36210d=>(this['_bitmap']=_0x36210d,{'image':this['_bitmap'],'widthInMeters':this['_width']}));}['destroy'](){this['_image']=null,this['_pose']=null,this['_bitmap']&&(this['_bitmap']['close'](),this['_bitmap']=null);}['getPositio'+'n'](){return this['_pose']&&this['_position']['copy'](this['_pose']['transform']['position']),this['_position'];}['getRotatio'+'n'](){return this['_pose']&&this['_rotation']['copy'](this['_pose']['transform']['orientatio'+'n']),this['_rotation'];}}h(pu,'EVENT_TRAC'+'KED','tracked'),h(pu,'EVENT_UNTR'+'ACKED','untracked');class Hv extends pe{constructor(_0x2916aa){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRImageTra'+'ckingResul'+'t']),h(this,'_available',!(-0x8c*0x32+0x1ac5+0x94)),h(this,'_images',[]),(this['_manager']=_0x2916aa,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['add'](_0x4b1840,_0x162d55){if(!this['_supported']||this['_manager']['active'])return null;const _0x4328f7=new pu(_0x4b1840,_0x162d55);return this['_images']['push'](_0x4328f7),_0x4328f7;}['remove'](_0x40a86d){if(this['_manager']['active'])return;const _0x387d19=this['_images']['indexOf'](_0x40a86d);_0x387d19!==-(-0x19*-0x11b+0x3de+0x1*-0x1f80)&&(_0x40a86d['destroy'](),this['_images']['splice'](_0x387d19,-0xa1*-0x39+0x1081+0x3459*-0x1));}['_onSession'+'Start'](){this['_manager']['session']['getTracked'+'ImageScore'+'s']()['then'](_0x3c341f=>{this['_available']=!(-0x2450+-0x15f7+-0x3a47*-0x1);for(let _0x5f15d9=-0x1e29*-0x1+-0x6cb*0x1+-0x175e;_0x5f15d9<_0x3c341f['length'];_0x5f15d9++)this['_images'][_0x5f15d9]['_trackable']=_0x3c341f[_0x5f15d9]==='trackable';})['catch'](_0xe9ec82=>{this['_available']=!(0x23de+0x14e1+0x10d*-0x36),this['fire']('error',_0xe9ec82);});}['_onSession'+'End'](){this['_available']=!(-0x1186+-0x118b+-0x2312*-0x1);for(let _0xf2a297=0x1*0x57d+0x1*0x3d4+-0x1*0x951;_0xf2a297<this['_images']['length'];_0xf2a297++){const _0xf6229f=this['_images'][_0xf2a297];_0xf6229f['_pose']=null,_0xf6229f['_measuredW'+'idth']=-0x6d2+-0x392+0xa*0x10a,_0xf6229f['_tracking']&&(_0xf6229f['_tracking']=!(0x1a6b*-0x1+0x2ea*0x9+0x32),_0xf6229f['fire']('untracked'));}}['prepareIma'+'ges'](_0x3333dd){this['_images']['length']?Promise['all'](this['_images']['map'](_0xd233e5=>_0xd233e5['prepare']()))['then'](_0x1ea832=>{_0x3333dd(null,_0x1ea832);})['catch'](_0x5cdeff=>{_0x3333dd(_0x5cdeff,null);}):_0x3333dd(null,null);}['update'](_0x47b19a){if(!this['_available'])return;const _0x33decf=_0x47b19a['getImageTr'+'ackingResu'+'lts'](),_0x562afb={};for(let _0xc54275=-0x10d+-0x1248+-0x7*-0x2c3;_0xc54275<_0x33decf['length'];_0xc54275++){_0x562afb[_0x33decf[_0xc54275]['index']]=_0x33decf[_0xc54275];const _0x48ad39=this['_images'][_0x33decf[_0xc54275]['index']];_0x48ad39['_emulated']=_0x33decf[_0xc54275]['trackingSt'+'ate']==='emulated',_0x48ad39['_measuredW'+'idth']=_0x33decf[_0xc54275]['measuredWi'+'dthInMeter'+'s'],_0x48ad39['_pose']=_0x47b19a['getPose'](_0x33decf[_0xc54275]['imageSpace'],this['_manager']['_reference'+'Space']);}for(let _0x45c7ce=-0x54*-0x30+0x8d*-0x45+-0x9*-0x279;_0x45c7ce<this['_images']['length'];_0x45c7ce++)this['_images'][_0x45c7ce]['_tracking']&&!_0x562afb[_0x45c7ce]?(this['_images'][_0x45c7ce]['_tracking']=!(0x695+-0x1*0x226c+0x318*0x9),this['_images'][_0x45c7ce]['fire']('untracked')):!this['_images'][_0x45c7ce]['_tracking']&&_0x562afb[_0x45c7ce]&&(this['_images'][_0x45c7ce]['_tracking']=!(0x17b1+0x2*0xd0+-0x1951),this['_images'][_0x45c7ce]['fire']('tracked'));}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['images'](){return this['_images'];}}h(Hv,'EVENT_ERRO'+'R','error');class Ek{constructor(_0xcbe52e,_0x13b63d){h(this,'_index'),h(this,'_hand'),h(this,'_joints',[]),h(this,'_tip',null),(this['_index']=_0xcbe52e,this['_hand']=_0x13b63d,this['_hand']['_fingers']['push'](this));}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['joints'](){return this['_joints'];}get['tip'](){return this['_tip'];}}const Vg=Me['browser']&&window['XRHand']?['thumb-tip','index-fing'+'er-tip','middle-fin'+'ger-tip','ring-finge'+'r-tip','pinky-fing'+'er-tip']:[],Wv={};for(let c=0x3*0x19e+-0x15bd+-0x83*-0x21;c<Vg['length'];c++)Wv[Vg[c]]=!(0x799+-0x4*-0x17e+-0xd91*0x1);class Gg{constructor(_0x51fe4d,_0x84a1dd,_0x56df85,_0x16eb4d=null){h(this,'_index'),h(this,'_id'),h(this,'_hand'),h(this,'_finger'),h(this,'_wrist'),h(this,'_tip'),h(this,'_radius',null),h(this,'_localTran'+'sform',new te()),h(this,'_worldTran'+'sform',new te()),h(this,'_localPosi'+'tion',new I()),h(this,'_localRota'+'tion',new le()),h(this,'_position',new I()),h(this,'_rotation',new le()),h(this,'_dirtyLoca'+'l',!(-0x1a59+0x19ec+0x6d)),(this['_index']=_0x51fe4d,this['_id']=_0x84a1dd,this['_hand']=_0x56df85,this['_finger']=_0x16eb4d,this['_wrist']=_0x84a1dd==='wrist',this['_tip']=this['_finger']&&!!Wv[_0x84a1dd]);}['update'](_0xc05ea6){this['_dirtyLoca'+'l']=!(-0x209e*-0x1+-0x4*0x15d+-0x1b2a),this['_radius']=_0xc05ea6['radius'],this['_localPosi'+'tion']['copy'](_0xc05ea6['transform']['position']),this['_localRota'+'tion']['copy'](_0xc05ea6['transform']['orientatio'+'n']);}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(-0x655*-0x1+-0x1*-0x193f+-0x1f93),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],I['ONE']));const _0x2f85f5=this['_hand']['_manager']['camera']['parent'];_0x2f85f5?this['_worldTran'+'sform']['mul2'](_0x2f85f5['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['getPositio'+'n'](){return this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position'];}['getRotatio'+'n'](){return this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation'];}get['id'](){return this['_id'];}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['finger'](){return this['_finger'];}get['wrist'](){return this['_wrist'];}get['tip'](){return this['_tip'];}get['radius'](){return this['_radius']||0x3b*-0x6b+-0x1*0x234a+0x3bf3+0.005;}}let Ah=[];const Mr=new I(),hh=new I(),Hg=new I();Me['browser']&&window['XRHand']&&(Ah=[['thumb-meta'+'carpal','thumb-phal'+'anx-proxim'+'al','thumb-phal'+'anx-distal','thumb-tip'],['index-fing'+'er-metacar'+'pal','index-fing'+'er-phalanx'+'-proximal','index-fing'+'er-phalanx'+'-intermedi'+'ate','index-fing'+'er-phalanx'+'-distal','index-fing'+'er-tip'],['middle-fin'+'ger-metaca'+'rpal','middle-fin'+'ger-phalan'+'x-proximal','middle-fin'+'ger-phalan'+'x-intermed'+'iate','middle-fin'+'ger-phalan'+'x-distal','middle-fin'+'ger-tip'],['ring-finge'+'r-metacarp'+'al','ring-finge'+'r-phalanx-'+'proximal','ring-finge'+'r-phalanx-'+'intermedia'+'te','ring-finge'+'r-phalanx-'+'distal','ring-finge'+'r-tip'],['pinky-fing'+'er-metacar'+'pal','pinky-fing'+'er-phalanx'+'-proximal','pinky-fing'+'er-phalanx'+'-intermedi'+'ate','pinky-fing'+'er-phalanx'+'-distal','pinky-fing'+'er-tip']]);class _u extends pe{constructor(_0x516ac0){super(),h(this,'_manager'),h(this,'_inputSour'+'ce'),h(this,'_tracking',!(0x5*0x3e7+-0x11*0x1eb+0x1*0xd19)),h(this,'_fingers',[]),h(this,'_joints',[]),h(this,'_jointsByI'+'d',{}),h(this,'_tips',[]),h(this,'_wrist',null);const _0x24d58f=_0x516ac0['_xrInputSo'+'urce']['hand'];if(this['_manager']=_0x516ac0['_manager'],this['_inputSour'+'ce']=_0x516ac0,_0x24d58f['get']('wrist')){const _0x181bc7=new Gg(-0x309*-0xa+0x1*-0x607+-0xd*0x1df,'wrist',this,null);this['_wrist']=_0x181bc7,this['_joints']['push'](_0x181bc7),this['_jointsByI'+'d']['wrist']=_0x181bc7;}for(let _0xca79d=0x172d+-0x2112*-0x1+-0x383f;_0xca79d<Ah['length'];_0xca79d++){const _0x156eb7=new Ek(_0xca79d,this);for(let _0x2f613e=-0x1d08+0x3b4*0x7+0xc7*0x4;_0x2f613e<Ah[_0xca79d]['length'];_0x2f613e++){const _0x2abd0b=Ah[_0xca79d][_0x2f613e];if(!_0x24d58f['get'](_0x2abd0b))continue;const _0x301dac=new Gg(_0x2f613e,_0x2abd0b,this,_0x156eb7);this['_joints']['push'](_0x301dac),this['_jointsByI'+'d'][_0x2abd0b]=_0x301dac,_0x301dac['tip']&&(this['_tips']['push'](_0x301dac),_0x156eb7['_tip']=_0x301dac),_0x156eb7['_joints']['push'](_0x301dac);}}}['update'](_0x140c64){const _0x134236=this['_inputSour'+'ce']['_xrInputSo'+'urce'];for(let _0x438c63=-0x1*0xb06+-0xc8f*-0x1+0x83*-0x3;_0x438c63<this['_joints']['length'];_0x438c63++){const _0x4d5767=this['_joints'][_0x438c63],_0x5744b8=_0x134236['hand']['get'](_0x4d5767['_id']);if(_0x5744b8){let _0xdfbe7b;if(_0x140c64['session']['visibility'+'State']!=='hidden'&&(_0xdfbe7b=_0x140c64['getJointPo'+'se'](_0x5744b8,this['_manager']['_reference'+'Space'])),_0xdfbe7b)_0x4d5767['update'](_0xdfbe7b),_0x4d5767['wrist']&&!this['_tracking']&&(this['_tracking']=!(-0x25c9+0x17ea+0xddf),this['fire']('tracking'));else{if(_0x4d5767['wrist']){this['_tracking']&&(this['_tracking']=!(0x1242+0x1*-0x25ab+-0x2*-0x9b5),this['fire']('trackinglo'+'st'));break;}}}}const _0x4fa372=this['_jointsByI'+'d']['thumb-meta'+'carpal'],_0x8e684c=this['_jointsByI'+'d']['thumb-tip'],_0x55e307=this['_jointsByI'+'d']['index-fing'+'er-phalanx'+'-proximal'],_0x1dbe50=this['_jointsByI'+'d']['index-fing'+'er-tip'],_0x5d25c7=this['_jointsByI'+'d']['ring-finge'+'r-phalanx-'+'proximal'],_0x298022=this['_jointsByI'+'d']['pinky-fing'+'er-phalanx'+'-proximal'];if(_0x4fa372&&_0x8e684c&&_0x55e307&&_0x1dbe50&&_0x5d25c7&&_0x298022){this['_inputSour'+'ce']['_dirtyRay']=!(0x4*0x650+0x1cd3+0x7f*-0x6d),this['_inputSour'+'ce']['_rayLocal']['origin']['lerp'](_0x8e684c['_localPosi'+'tion'],_0x1dbe50['_localPosi'+'tion'],0xdad+0xf3+-0x18*0x9c+0.5);let _0x54a175=_0x4fa372,_0x386918=_0x298022;if(this['_inputSour'+'ce']['handedness']===xk){const _0x5aef65=_0x54a175;_0x54a175=_0x386918,_0x386918=_0x5aef65;}Mr['sub2'](_0x54a175['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),hh['sub2'](_0x386918['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),Hg['cross'](Mr,hh)['normalize'](),Mr['lerp'](_0x55e307['_localPosi'+'tion'],_0x5d25c7['_localPosi'+'tion'],0x107d+0x186c+-0x28e9+0.5),Mr['sub'](this['_wrist']['_localPosi'+'tion'])['normalize'](),this['_inputSour'+'ce']['_rayLocal']['direction']['lerp'](Hg,Mr,-0x5*-0x48+-0xa2d+0x8c5+0.5)['normalize']();}this['_fingerIsC'+'losed'](0x131+-0x763*0x1+0x3*0x211)&&this['_fingerIsC'+'losed'](0x1*0x1ac6+-0x1c5d+0x1*0x199)&&this['_fingerIsC'+'losed'](0x25c7+0x561+-0x2f*0xeb)&&this['_fingerIsC'+'losed'](0x58*-0x18+0xda1*0x1+-0x55d)?this['_inputSour'+'ce']['_squeezing']||(this['_inputSour'+'ce']['_squeezing']=!(0x262+-0x113a+-0x1*-0xed8),this['_inputSour'+'ce']['fire']('squeezesta'+'rt'),this['_manager']['input']['fire']('squeezesta'+'rt',this['_inputSour'+'ce'])):this['_inputSour'+'ce']['_squeezing']&&(this['_inputSour'+'ce']['_squeezing']=!(0x4*0x7c+-0x1533+0x4*0x4d1),this['_inputSour'+'ce']['fire']('squeeze'),this['_manager']['input']['fire']('squeeze',this['_inputSour'+'ce']),this['_inputSour'+'ce']['fire']('squeezeend'),this['_manager']['input']['fire']('squeezeend',this['_inputSour'+'ce']));}['_fingerIsC'+'losed'](_0x3d300e){const _0x5d49b3=this['_fingers'][_0x3d300e];return Mr['sub2'](_0x5d49b3['joints'][0x1bd6+0x1*-0x1f7+0x19df*-0x1]['_localPosi'+'tion'],_0x5d49b3['joints'][0x14a5+-0x1328+-0x17c]['_localPosi'+'tion'])['normalize'](),hh['sub2'](_0x5d49b3['joints'][0x1*-0x23cf+-0x1db6*-0x1+-0x1*-0x61b]['_localPosi'+'tion'],_0x5d49b3['joints'][0x5b*-0x37+0x1*-0x9d+0x5*0x409]['_localPosi'+'tion'])['normalize'](),Mr['dot'](hh)<-(0x141f+0xb*0x28d+-0xe*0x371+0.8);}['getJointBy'+'Id'](_0x4cf87d){return this['_jointsByI'+'d'][_0x4cf87d]||null;}get['fingers'](){return this['_fingers'];}get['joints'](){return this['_joints'];}get['tips'](){return this['_tips'];}get['wrist'](){return this['_wrist'];}get['tracking'](){return this['_tracking'];}}h(_u,'EVENT_TRAC'+'KING','tracking'),h(_u,'EVENT_TRAC'+'KINGLOST','trackinglo'+'st');const Wg=new I(),$g=new le();let Ak=0x1*0x22bd+0xd83+-0x2*0x1820;class Ls extends pe{constructor(_0x4bbb30,_0x342a8c){super(),h(this,'_id'),h(this,'_manager'),h(this,'_xrInputSo'+'urce'),h(this,'_ray',new cf()),h(this,'_rayLocal',new cf()),h(this,'_grip',!(-0x4b2+-0x3*0x90d+0x1fda)),h(this,'_hand',null),h(this,'_velocitie'+'sAvailable',!(0x12e9+0x1*0x16e2+-0x29ca)),h(this,'_velocitie'+'sTimestamp',de()),h(this,'_localTran'+'sform',null),h(this,'_worldTran'+'sform',null),h(this,'_position',new I()),h(this,'_rotation',new le()),h(this,'_localPosi'+'tion',null),h(this,'_localPosi'+'tionLast',null),h(this,'_localRota'+'tion',null),h(this,'_linearVel'+'ocity',null),h(this,'_dirtyLoca'+'l',!(-0x172b+0x1343*-0x1+0x2a6e*0x1)),h(this,'_dirtyRay',!(0x14f*-0x19+-0xa3d*0x2+0x3532)),h(this,'_selecting',!(-0x88b+0x137*0x1b+0x7*-0x377)),h(this,'_squeezing',!(-0x3*-0xc25+0x1f10+-0x437e)),h(this,'_elementIn'+'put',!(0x250b+-0x1502*-0x1+-0x1*0x3a0d)),h(this,'_elementEn'+'tity',null),h(this,'_hitTestSo'+'urces',[]),(this['_id']=++Ak,this['_manager']=_0x4bbb30,this['_xrInputSo'+'urce']=_0x342a8c,_0x342a8c['hand']&&(this['_hand']=new _u(this)));}get['id'](){return this['_id'];}get['inputSourc'+'e'](){return this['_xrInputSo'+'urce'];}get['targetRayM'+'ode'](){return this['_xrInputSo'+'urce']['targetRayM'+'ode'];}get['handedness'](){return this['_xrInputSo'+'urce']['handedness'];}get['profiles'](){return this['_xrInputSo'+'urce']['profiles'];}get['grip'](){return this['_grip'];}get['hand'](){return this['_hand'];}get['gamepad'](){return this['_xrInputSo'+'urce']['gamepad']||null;}get['selecting'](){return this['_selecting'];}get['squeezing'](){return this['_squeezing'];}set['elementInp'+'ut'](_0x21e963){this['_elementIn'+'put']!==_0x21e963&&(this['_elementIn'+'put']=_0x21e963,this['_elementIn'+'put']||(this['_elementEn'+'tity']=null));}get['elementInp'+'ut'](){return this['_elementIn'+'put'];}get['elementEnt'+'ity'](){return this['_elementEn'+'tity'];}get['hitTestSou'+'rces'](){return this['_hitTestSo'+'urces'];}['update'](_0x1565ea){if(this['_hand'])this['_hand']['update'](_0x1565ea);else{const _0x34f675=this['_xrInputSo'+'urce']['gripSpace'];if(_0x34f675){const _0x403ca2=_0x1565ea['getPose'](_0x34f675,this['_manager']['_reference'+'Space']);if(_0x403ca2){this['_grip']||(this['_grip']=!(-0x697+0x1d*0xb5+-0x1a*0x89),this['_localTran'+'sform']=new te(),this['_worldTran'+'sform']=new te(),this['_localPosi'+'tionLast']=new I(),this['_localPosi'+'tion']=new I(),this['_localRota'+'tion']=new le(),this['_linearVel'+'ocity']=new I());const _0x40b021=de(),_0x1fdf89=(_0x40b021-this['_velocitie'+'sTimestamp'])/(0x7*-0x35e+-0xb9+0x1c33);this['_velocitie'+'sTimestamp']=_0x40b021,this['_dirtyLoca'+'l']=!(0x102d+0x2578+-0x1bb*0x1f),this['_localPosi'+'tionLast']['copy'](this['_localPosi'+'tion']),this['_localPosi'+'tion']['copy'](_0x403ca2['transform']['position']),this['_localRota'+'tion']['copy'](_0x403ca2['transform']['orientatio'+'n']),this['_velocitie'+'sAvailable']=!(0x154b+0x10b8+-0x2603),this['_manager']['input']['velocities'+'Supported']&&_0x403ca2['linearVelo'+'city']?this['_linearVel'+'ocity']['copy'](_0x403ca2['linearVelo'+'city']):_0x1fdf89>-0xc7+0x2175*-0x1+0x4e4*0x7&&(Wg['sub2'](this['_localPosi'+'tion'],this['_localPosi'+'tionLast'])['divScalar'](_0x1fdf89),this['_linearVel'+'ocity']['lerp'](this['_linearVel'+'ocity'],Wg,0x15ba*-0x1+-0x2*0xc6f+0x2e98+0.15));}else this['_velocitie'+'sAvailable']=!(-0x98d*0x2+-0x1*-0xb03+0xe*0x94);}const _0x1eae55=_0x1565ea['getPose'](this['_xrInputSo'+'urce']['targetRayS'+'pace'],this['_manager']['_reference'+'Space']);_0x1eae55&&(this['_dirtyRay']=!(-0x5da+0xe57+0x1*-0x87d),this['_rayLocal']['origin']['copy'](_0x1eae55['transform']['position']),this['_rayLocal']['direction']['set'](-0x330+-0x161+0x491,0xe95+0x754*0x4+0x2be5*-0x1,-(0x21f5+-0x205+-0x663*0x5)),$g['copy'](_0x1eae55['transform']['orientatio'+'n']),$g['transformV'+'ector'](this['_rayLocal']['direction'],this['_rayLocal']['direction']));}}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(-0x1*0x20fb+0x1*0xd4a+0x13b2*0x1),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],I['ONE']));const _0x5aed7b=this['_manager']['camera']['parent'];_0x5aed7b?this['_worldTran'+'sform']['mul2'](_0x5aed7b['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['_updateRay'+'Transforms'](){const _0x2446b4=this['_dirtyRay'];if(this['_dirtyRay']=!(0x1*0x55d+0x149d+-0x3d*0x6d),this['_manager']['camera']['parent']){const _0x399045=this['_manager']['camera']['parent']['getWorldTr'+'ansform']();_0x399045['getTransla'+'tion'](this['_position']),this['_rotation']['setFromMat'+'4'](_0x399045),this['_rotation']['transformV'+'ector'](this['_rayLocal']['origin'],this['_ray']['origin']),this['_ray']['origin']['add'](this['_position']),this['_rotation']['transformV'+'ector'](this['_rayLocal']['direction'],this['_ray']['direction']);}else _0x2446b4&&(this['_ray']['origin']['copy'](this['_rayLocal']['origin']),this['_ray']['direction']['copy'](this['_rayLocal']['direction']));}['getPositio'+'n'](){return this['_position']?(this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position']):null;}['getLocalPo'+'sition'](){return this['_localPosi'+'tion'];}['getRotatio'+'n'](){return this['_rotation']?(this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation']):null;}['getLocalRo'+'tation'](){return this['_localRota'+'tion'];}['getLinearV'+'elocity'](){return this['_velocitie'+'sAvailable']?this['_linearVel'+'ocity']:null;}['getOrigin'](){return this['_updateRay'+'Transforms'](),this['_ray']['origin'];}['getDirecti'+'on'](){return this['_updateRay'+'Transforms'](),this['_ray']['direction'];}['hitTestSta'+'rt'](_0x3028bb={}){_0x3028bb['inputSourc'+'e']=this,_0x3028bb['profile']=this['_xrInputSo'+'urce']['profiles'][-0x1d19+-0xb37+0x2850];const _0x12e936=_0x3028bb['callback'];_0x3028bb['callback']=(_0x288f7c,_0x3e9c2a)=>{_0x3e9c2a&&this['onHitTestS'+'ourceAdd'](_0x3e9c2a),_0x12e936&&_0x12e936(_0x288f7c,_0x3e9c2a);},this['_manager']['hitTest']['start'](_0x3028bb);}['onHitTestS'+'ourceAdd'](_0x3867e7){this['_hitTestSo'+'urces']['push'](_0x3867e7),this['fire']('hittest:ad'+'d',_0x3867e7),_0x3867e7['on']('result',(_0x5aa514,_0x17d446,_0x4edf72,_0x528921)=>{_0x4edf72===this&&this['fire']('hittest:re'+'sult',_0x3867e7,_0x5aa514,_0x17d446,_0x528921);}),_0x3867e7['once']('remove',()=>{this['onHitTestS'+'ourceRemov'+'e'](_0x3867e7),this['fire']('hittest:re'+'move',_0x3867e7);});}['onHitTestS'+'ourceRemov'+'e'](_0x3a486d){const _0x24928f=this['_hitTestSo'+'urces']['indexOf'](_0x3a486d);_0x24928f!==-(0x202f+0x2213+-0x4241)&&this['_hitTestSo'+'urces']['splice'](_0x24928f,-0xb*0x6e+0x23f1+-0x1f36);}}h(Ls,'EVENT_REMO'+'VE','remove'),h(Ls,'EVENT_SELE'+'CT','select'),h(Ls,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Ls,'EVENT_SELE'+'CTEND','selectend'),h(Ls,'EVENT_SQUE'+'EZE','squeeze'),h(Ls,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Ls,'EVENT_SQUE'+'EZEEND','squeezeend'),h(Ls,'EVENT_HITT'+'ESTADD','hittest:ad'+'d'),h(Ls,'EVENT_HITT'+'ESTREMOVE','hittest:re'+'move'),h(Ls,'EVENT_HITT'+'ESTRESULT','hittest:re'+'sult');class Ai extends pe{constructor(_0x4debf9){var _0x502ca5,_0x594d82;super(),h(this,'manager'),h(this,'_inputSour'+'ces',[]),h(this,'_onInputSo'+'urcesChang'+'eEvt'),h(this,'velocities'+'Supported',!(0x1*-0x1b4c+0x1399+0x7b4)),(this['manager']=_0x4debf9,this['velocities'+'Supported']=!!(Me['browser']&&((_0x594d82=(_0x502ca5=window['XRPose'])==null?void(-0x16e1+0x2297+-0xbb6):_0x502ca5['prototype'])!=null&&_0x594d82['hasOwnProp'+'erty']('linearVelo'+'city'))),this['_onInputSo'+'urcesChang'+'eEvt']=_0x547b26=>{this['_onInputSo'+'urcesChang'+'e'](_0x547b26);},this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){const _0x48d9d6=this['manager']['session'];_0x48d9d6['addEventLi'+'stener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']),_0x48d9d6['addEventLi'+'stener']('select',_0x316dc3=>{const _0x9e9208=this['_getByInpu'+'tSource'](_0x316dc3['inputSourc'+'e']);_0x9e9208['update'](_0x316dc3['frame']),_0x9e9208['fire']('select',_0x316dc3),this['fire']('select',_0x9e9208,_0x316dc3);}),_0x48d9d6['addEventLi'+'stener']('selectstar'+'t',_0x2d5ac9=>{const _0x106e14=this['_getByInpu'+'tSource'](_0x2d5ac9['inputSourc'+'e']);_0x106e14['_selecting']||(_0x106e14['update'](_0x2d5ac9['frame']),_0x106e14['_selecting']=!(0x1f90+-0x1bfa+-0x1cb*0x2),_0x106e14['fire']('selectstar'+'t',_0x2d5ac9),this['fire']('selectstar'+'t',_0x106e14,_0x2d5ac9));}),_0x48d9d6['addEventLi'+'stener']('selectend',_0xf7e4b1=>{const _0x187e87=this['_getByInpu'+'tSource'](_0xf7e4b1['inputSourc'+'e']);_0x187e87['update'](_0xf7e4b1['frame']),_0x187e87['_selecting']=!(0x1136+-0x1c53*0x1+0xb1e),_0x187e87['fire']('selectend',_0xf7e4b1),this['fire']('selectend',_0x187e87,_0xf7e4b1);}),_0x48d9d6['addEventLi'+'stener']('squeeze',_0x3dfb7a=>{const _0x5d0cd2=this['_getByInpu'+'tSource'](_0x3dfb7a['inputSourc'+'e']);_0x5d0cd2['update'](_0x3dfb7a['frame']),_0x5d0cd2['fire']('squeeze',_0x3dfb7a),this['fire']('squeeze',_0x5d0cd2,_0x3dfb7a);}),_0x48d9d6['addEventLi'+'stener']('squeezesta'+'rt',_0x546343=>{const _0x1e7fdd=this['_getByInpu'+'tSource'](_0x546343['inputSourc'+'e']);_0x1e7fdd['update'](_0x546343['frame']),_0x1e7fdd['_squeezing']=!(-0x1107+-0xd*-0x114+-0x303*-0x1),_0x1e7fdd['fire']('squeezesta'+'rt',_0x546343),this['fire']('squeezesta'+'rt',_0x1e7fdd,_0x546343);}),_0x48d9d6['addEventLi'+'stener']('squeezeend',_0x29a708=>{const _0x4f5c55=this['_getByInpu'+'tSource'](_0x29a708['inputSourc'+'e']);_0x4f5c55['update'](_0x29a708['frame']),_0x4f5c55['_squeezing']=!(-0x5*0x41e+0x1*-0xbf5+0x2*0x1046),_0x4f5c55['fire']('squeezeend',_0x29a708),this['fire']('squeezeend',_0x4f5c55,_0x29a708);});const _0x40c04c=_0x48d9d6['inputSourc'+'es'];for(let _0x441728=-0x4d1+-0x19ca+0x1e9b;_0x441728<_0x40c04c['length'];_0x441728++)this['_addInputS'+'ource'](_0x40c04c[_0x441728]);}['_onSession'+'End'](){let _0x5ff0de=this['_inputSour'+'ces']['length'];for(;_0x5ff0de--;){const _0x3efa0c=this['_inputSour'+'ces'][_0x5ff0de];this['_inputSour'+'ces']['splice'](_0x5ff0de,0x1*0x1dea+0x141c+-0x1*0x3205),_0x3efa0c['fire']('remove'),this['fire']('remove',_0x3efa0c);}this['fire']('removeall'),this['manager']['session']['removeEven'+'tListener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']);}['_onInputSo'+'urcesChang'+'e'](_0x212215){for(let _0x4ed0fb=-0x9be+0x1722+-0xd64;_0x4ed0fb<_0x212215['removed']['length'];_0x4ed0fb++)this['_removeInp'+'utSource'](_0x212215['removed'][_0x4ed0fb]);for(let _0x3b7223=-0xf91*-0x2+-0x1593*0x1+0x98f*-0x1;_0x3b7223<_0x212215['added']['length'];_0x3b7223++)this['_addInputS'+'ource'](_0x212215['added'][_0x3b7223]);}['_getByInpu'+'tSource'](_0xd2653e){for(let _0x1a52fb=0xf73+0x266a+-0x35dd;_0x1a52fb<this['_inputSour'+'ces']['length'];_0x1a52fb++)if(this['_inputSour'+'ces'][_0x1a52fb]['inputSourc'+'e']===_0xd2653e)return this['_inputSour'+'ces'][_0x1a52fb];return null;}['_removeApp'+'Entity'](_0x462f9c){const _0x39573a=this['manager']['app']['root']['findByName']('Armature_'+_0x462f9c);_0x39573a&&this['manager']['app']['root']['removeChil'+'d'](_0x39573a);}['_addInputS'+'ource'](_0x272cc0){if(this['_removeApp'+'Entity'](_0x272cc0['handedness']),this['_getByInpu'+'tSource'](_0x272cc0))return;const _0x989f53=new Ls(this['manager'],_0x272cc0);this['_inputSour'+'ces']['push'](_0x989f53),this['fire']('add',_0x989f53);}['_removeInp'+'utSource'](_0x9441cd){for(let _0x3d05ae=-0x21*-0x11b+0xa91+-0x2f0c;_0x3d05ae<this['_inputSour'+'ces']['length'];_0x3d05ae++){if(this['_inputSour'+'ces'][_0x3d05ae]['inputSourc'+'e']!==_0x9441cd)continue;const _0x136515=this['_inputSour'+'ces'][_0x3d05ae];this['_inputSour'+'ces']['splice'](_0x3d05ae,-0x1*-0x10ab+-0x22f+-0xe7b);let _0x9da6a0=_0x136515['hitTestSou'+'rces']['length'];for(;_0x9da6a0--;)_0x136515['hitTestSou'+'rces'][_0x9da6a0]['remove']();this['_removeApp'+'Entity'](_0x136515['handedness']),_0x136515['fire']('remove'),this['fire']('remove',_0x136515);return;}}['update'](_0x4ddb4b){for(let _0x4c51a4=-0x1e06+0x3a*0xa9+-0x844;_0x4c51a4<this['_inputSour'+'ces']['length'];_0x4c51a4++)this['_inputSour'+'ces'][_0x4c51a4]['update'](_0x4ddb4b);}get['inputSourc'+'es'](){return this['_inputSour'+'ces'];}}h(Ai,'EVENT_ADD','add'),h(Ai,'EVENT_REMO'+'VE','remove'),h(Ai,'EVENT_SELE'+'CT','select'),h(Ai,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Ai,'EVENT_SELE'+'CTEND','selectend'),h(Ai,'EVENT_SQUE'+'EZE','squeeze'),h(Ai,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Ai,'EVENT_SQUE'+'EZEEND','squeezeend');const za=new I(),Xg=new I(),tf=new te(),qg=new te();class gu extends pe{constructor(_0x434b14){super(),h(this,'_manager'),h(this,'_supported',!(-0x4*0x2a1+-0x1*0x182f+-0x115a*-0x2)),h(this,'_available',!(0x206e+0x1d6a+-0x3dd7)),h(this,'_lightProb'+'eRequested',!(-0x7*-0x293+0xe4*0x13+0xd*-0x2b0)),h(this,'_lightProb'+'e',null),h(this,'_intensity',0x223*-0x11+-0x1*0x223d+0x4690*0x1),h(this,'_rotation',new le()),h(this,'_color',new ie()),h(this,'_spherical'+'Harmonics',new Float32Array(-0x11c8+-0x131a+-0x22d*-0x11)),(this['_manager']=_0x434b14,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){this['_manager']['session']['requestLig'+'htProbe']&&(this['_supported']=!(0xcfb*-0x1+-0x4*-0x50e+-0x73d));}['_onSession'+'End'](){this['_supported']=!(0x77f+0x1d97*-0x1+0x1619),this['_available']=!(0x231f+-0x2*-0x10be+-0x449a),this['_lightProb'+'eRequested']=!(0x251c+-0x10ac+-0x146f),this['_lightProb'+'e']=null;}['start'](){let _0x3d5e58;if(this['_manager']['session']||(_0x3d5e58=new Error('XR\x20session'+'\x20is\x20not\x20ru'+'nning')),!_0x3d5e58&&this['_manager']['type']!==Eo&&(_0x3d5e58=new Error('XR\x20session'+'\x20type\x20is\x20n'+'ot\x20AR')),!_0x3d5e58&&!this['_supported']&&(_0x3d5e58=new Error('light-esti'+'mation\x20is\x20'+'not\x20suppor'+'ted')),(!_0x3d5e58&&this['_lightProb'+'e']||this['_lightProb'+'eRequested'])&&(_0x3d5e58=new Error('light\x20esti'+'mation\x20is\x20'+'already\x20re'+'quested')),_0x3d5e58){this['fire']('error',_0x3d5e58);return;}this['_lightProb'+'eRequested']=!(0x998+-0x1723+0xd8b),this['_manager']['session']['requestLig'+'htProbe']()['then'](_0x58757f=>{const _0x4f1be3=this['_lightProb'+'eRequested'];this['_lightProb'+'eRequested']=!(-0xfca+0x1f5*0x1+0x17*0x9a),this['_manager']['active']?_0x4f1be3&&(this['_lightProb'+'e']=_0x58757f):this['fire']('error',new Error('XR\x20session'+'\x20is\x20not\x20ac'+'tive'));})['catch'](_0x41c6af=>{this['_lightProb'+'eRequested']=!(-0x3ff+-0x2307+0x2707),this['fire']('error',_0x41c6af);});}['end'](){this['_lightProb'+'eRequested']=!(0xb*-0x347+0xf*-0x1eb+0x1*0x40d3),this['_lightProb'+'e']=null,this['_available']=!(-0x1508+0x1ca8*-0x1+0x31b1);}['update'](_0x357060){if(!this['_lightProb'+'e'])return;const _0x564289=_0x357060['getLightEs'+'timate'](this['_lightProb'+'e']);if(!_0x564289)return;this['_available']||(this['_available']=!(-0x1305+0x25d*0xd+-0xbb4),this['fire']('available'));const _0x205e61=_0x564289['primaryLig'+'htIntensit'+'y'];this['_intensity']=Math['max'](-0x10d2+-0x20b6+0x3189,Math['max'](_0x205e61['x'],Math['max'](_0x205e61['y'],_0x205e61['z']))),za['copy'](_0x205e61)['mulScalar']((-0x10f3*0x2+0x1*0x1037+0x236*0x8)/this['_intensity']),this['_color']['set'](za['x'],za['y'],za['z']),za['set'](0x1324+0xe3d+-0x2161,0x1160+0x10a4+-0x1*0x2204,0x191*-0x8+-0x1*-0x11b6+-0x1ba*0x3),Xg['copy'](_0x564289['primaryLig'+'htDirectio'+'n']),tf['setLookAt'](Xg,za,I['UP']),qg['setFromAxi'+'sAngle'](I['RIGHT'],0x27*-0x1b+-0x1*-0x26bd+-0x2246),tf['mul'](qg),this['_rotation']['setFromMat'+'4'](tf),this['_spherical'+'Harmonics']['set'](_0x564289['sphericalH'+'armonicsCo'+'efficients']);}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['intensity'](){return this['_available']?this['_intensity']:null;}get['color'](){return this['_available']?this['_color']:null;}get['rotation'](){return this['_available']?this['_rotation']:null;}get['sphericalH'+'armonics'](){return this['_available']?this['_spherical'+'Harmonics']:null;}}h(gu,'EVENT_AVAI'+'LABLE','available'),h(gu,'EVENT_ERRO'+'R','error');let bk=0xe1d+0x151*0x6+-0x1603;class Su extends pe{constructor(_0x4e758a,_0x5d226d){super(),h(this,'_id'),h(this,'_planeDete'+'ction'),h(this,'_xrPlane'),h(this,'_lastChang'+'edTime'),h(this,'_orientati'+'on'),h(this,'_position',new I()),h(this,'_rotation',new le()),(this['_id']=++bk,this['_planeDete'+'ction']=_0x4e758a,this['_xrPlane']=_0x5d226d,this['_lastChang'+'edTime']=_0x5d226d['lastChange'+'dTime'],this['_orientati'+'on']=_0x5d226d['orientatio'+'n']);}['destroy'](){this['_xrPlane']&&(this['_xrPlane']=null,this['fire']('remove'));}['update'](_0x3e9659){const _0x3026d6=this['_planeDete'+'ction']['_manager'],_0x332dd9=_0x3e9659['getPose'](this['_xrPlane']['planeSpace'],_0x3026d6['_reference'+'Space']);_0x332dd9&&(this['_position']['copy'](_0x332dd9['transform']['position']),this['_rotation']['copy'](_0x332dd9['transform']['orientatio'+'n'])),this['_lastChang'+'edTime']!==this['_xrPlane']['lastChange'+'dTime']&&(this['_lastChang'+'edTime']=this['_xrPlane']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}get['id'](){return this['_id'];}get['orientatio'+'n'](){return this['_orientati'+'on'];}get['points'](){return this['_xrPlane']['polygon'];}get['label'](){return this['_xrPlane']['semanticLa'+'bel']||'';}}h(Su,'EVENT_REMO'+'VE','remove'),h(Su,'EVENT_CHAN'+'GE','change');class ho extends pe{constructor(_0x4d3851){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRPlane']),h(this,'_available',!(0x1762+-0x2*-0xa75+0x1ed*-0x17)),h(this,'_planesInd'+'ex',new Map()),h(this,'_planes',[]),(this['_manager']=_0x4d3851,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){this['_manager']['session']['enabledFea'+'tures']&&this['_manager']['session']['enabledFea'+'tures']['indexOf']('plane-dete'+'ction')!==-(-0xc04+-0x12d2+0x1ed7)&&(this['_available']=!(0x1b7a*-0x1+-0x1*0x10a9+0x2c23*0x1),this['fire']('available'));}['_onSession'+'End'](){for(let _0x556484=0x661*-0x3+-0x10bf+0x23e2;_0x556484<this['_planes']['length'];_0x556484++)this['_planes'][_0x556484]['destroy'](),this['fire']('remove',this['_planes'][_0x556484]);this['_planesInd'+'ex']['clear'](),this['_planes']['length']=-0x84f+-0x2*-0xcfb+0x11a7*-0x1,this['_available']&&(this['_available']=!(0x390+-0x596+0x207*0x1),this['fire']('unavailabl'+'e'));}['update'](_0x2bb440){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x2bb440['detectedPl'+'anes']['size'])this['_available']=!(0x2258+-0x2165+-0xf3*0x1),this['fire']('available');else return;}const _0x560951=_0x2bb440['detectedPl'+'anes'];for(const [_0x45c633,_0x5d3116]of this['_planesInd'+'ex'])_0x560951['has'](_0x45c633)||(this['_planesInd'+'ex']['delete'](_0x45c633),this['_planes']['splice'](this['_planes']['indexOf'](_0x5d3116),0x1c2a*0x1+-0x139a+-0x88f),_0x5d3116['destroy'](),this['fire']('remove',_0x5d3116));for(const _0x1ada49 of _0x560951){let _0x4b0696=this['_planesInd'+'ex']['get'](_0x1ada49);_0x4b0696?_0x4b0696['update'](_0x2bb440):(_0x4b0696=new Su(this,_0x1ada49),this['_planesInd'+'ex']['set'](_0x1ada49,_0x4b0696),this['_planes']['push'](_0x4b0696),_0x4b0696['update'](_0x2bb440),this['fire']('add',_0x4b0696));}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['planes'](){return this['_planes'];}}h(ho,'EVENT_AVAI'+'LABLE','available'),h(ho,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(ho,'EVENT_ADD','add'),h(ho,'EVENT_REMO'+'VE','remove');class co extends pe{constructor(_0x11e662,_0x26aaab,_0x492753=null){super(),h(this,'_position',new I()),h(this,'_rotation',new le()),h(this,'_uuid',null),h(this,'_uuidReque'+'sts',null),(this['_anchors']=_0x11e662,this['_xrAnchor']=_0x26aaab,this['_uuid']=_0x492753);}['destroy'](){if(!this['_xrAnchor'])return;const _0x477925=this['_xrAnchor'];this['_xrAnchor']['delete'](),this['_xrAnchor']=null,this['fire']('destroy',_0x477925,this);}['update'](_0x3caf4d){if(!this['_xrAnchor'])return;const _0x42e09f=_0x3caf4d['getPose'](this['_xrAnchor']['anchorSpac'+'e'],this['_anchors']['manager']['_reference'+'Space']);if(_0x42e09f){if(this['_position']['equals'](_0x42e09f['transform']['position'])&&this['_rotation']['equals'](_0x42e09f['transform']['orientatio'+'n']))return;this['_position']['copy'](_0x42e09f['transform']['position']),this['_rotation']['copy'](_0x42e09f['transform']['orientatio'+'n']),this['fire']('change');}}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}['persist'](_0x9cd3d4){if(!this['_anchors']['persistenc'+'e']){_0x9cd3d4==null||_0x9cd3d4(new Error('Persistent'+'\x20Anchors\x20a'+'re\x20not\x20sup'+'ported'),null);return;}if(this['_uuid']){_0x9cd3d4==null||_0x9cd3d4(null,this['_uuid']);return;}if(this['_uuidReque'+'sts']){_0x9cd3d4&&this['_uuidReque'+'sts']['push'](_0x9cd3d4);return;}this['_uuidReque'+'sts']=[],this['_xrAnchor']['requestPer'+'sistentHan'+'dle']()['then'](_0x2635ee=>{this['_uuid']=_0x2635ee,this['_anchors']['_indexByUu'+'id']['set'](this['_uuid'],this),_0x9cd3d4==null||_0x9cd3d4(null,_0x2635ee);for(const _0x10741d of this['_uuidReque'+'sts'])_0x10741d(null,_0x2635ee);this['_uuidReque'+'sts']=null,this['fire']('persist',_0x2635ee);})['catch'](_0x61ba23=>{_0x9cd3d4==null||_0x9cd3d4(_0x61ba23,null);for(const _0x9f8338 of this['_uuidReque'+'sts'])_0x9f8338(_0x61ba23,null);this['_uuidReque'+'sts']=null;});}['forget'](_0xd22e91){if(!this['_uuid']){_0xd22e91==null||_0xd22e91(new Error('Anchor\x20is\x20'+'not\x20persis'+'tent'));return;}this['_anchors']['forget'](this['_uuid'],_0x19481a=>{this['_uuid']=null,_0xd22e91==null||_0xd22e91(_0x19481a),this['fire']('forget');});}get['uuid'](){return this['_uuid'];}get['persistent'](){return!!this['_uuid'];}}h(co,'EVENT_DEST'+'ROY','destroy'),h(co,'EVENT_CHAN'+'GE','change'),h(co,'EVENT_PERS'+'IST','persist'),h(co,'EVENT_FORG'+'ET','forget');var jg;class $a extends pe{constructor(_0x24d745){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!window['XRAnchor']),h(this,'_available',!(0x3d8*0x3+0x945+-0x14cc)),h(this,'_checkingA'+'vailabilit'+'y',!(-0x234a+0xa91*-0x3+-0xe*-0x4c9)),h(this,'_persisten'+'ce',Me['browser']&&!!((jg=window==null?void(0x8fd+-0x9*-0x1f3+-0x18*0x11b):window['XRSession'])!=null&&jg['prototype']['restorePer'+'sistentAnc'+'hor'])),h(this,'_creationQ'+'ueue',[]),h(this,'_index',new Map()),h(this,'_indexByUu'+'id',new Map()),h(this,'_list',[]),h(this,'_callbacks'+'Anchors',new Map()),(this['manager']=_0x24d745,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){var _0x15d067;const _0x1cbe4c=((_0x15d067=this['manager']['session']['enabledFea'+'tures'])==null?void(-0x16f*-0x15+0xde*-0x2+-0x1c5f):_0x15d067['indexOf']('anchors'))>=-0x1*-0x569+-0x15f*-0xb+0xa3f*-0x2;_0x1cbe4c&&(this['_available']=_0x1cbe4c,this['fire']('available'));}['_onSession'+'End'](){if(!this['_available'])return;this['_available']=!(-0x2*-0x973+-0x1542+0x25d);for(let _0x44b5dd=0xd25+-0x2057+0x1332*0x1;_0x44b5dd<this['_creationQ'+'ueue']['length'];_0x44b5dd++)this['_creationQ'+'ueue'][_0x44b5dd]['callback']&&this['_creationQ'+'ueue'][_0x44b5dd]['callback'](new Error('session\x20en'+'ded'),null);this['_creationQ'+'ueue']['length']=-0x22a6+0x2305+-0x5f,this['_index']['clear'](),this['_indexByUu'+'id']['clear']();let _0x21be0d=this['_list']['length'];for(;_0x21be0d--;)this['_list'][_0x21be0d]['destroy']();this['_list']['length']=-0x17b6+0x4*-0x276+0x218e,this['fire']('unavailabl'+'e');}['_createAnc'+'hor'](_0x25319b,_0x41debb=null){const _0xb6fc72=new co(this,_0x25319b,_0x41debb);return this['_index']['set'](_0x25319b,_0xb6fc72),_0x41debb&&this['_indexByUu'+'id']['set'](_0x41debb,_0xb6fc72),this['_list']['push'](_0xb6fc72),_0xb6fc72['once']('destroy',this['_onAnchorD'+'estroy'],this),_0xb6fc72;}['_onAnchorD'+'estroy'](_0x1487d8,_0x3bfa84){this['_index']['delete'](_0x1487d8),_0x3bfa84['uuid']&&this['_indexByUu'+'id']['delete'](_0x3bfa84['uuid']);const _0x10abfe=this['_list']['indexOf'](_0x3bfa84);_0x10abfe!==-(0x431*0x1+0xf1*-0xb+0x62b)&&this['_list']['splice'](_0x10abfe,-0x1362+0x2*0x94a+0x9*0x17),this['fire']('destroy',_0x3bfa84);}['create'](_0x2ceb10,_0x5316dd,_0x1ddb74){if(!this['_available']){_0x1ddb74==null||_0x1ddb74(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(window['XRHitTestR'+'esult']&&_0x2ceb10 instanceof XRHitTestResult){const _0x3de8c0=_0x2ceb10;if(_0x1ddb74=_0x5316dd,!this['_supported']){_0x1ddb74==null||_0x1ddb74(new Error('Anchors\x20AP'+'I\x20is\x20not\x20s'+'upported'),null);return;}if(!_0x3de8c0['createAnch'+'or']){_0x1ddb74==null||_0x1ddb74(new Error('Creating\x20A'+'nchor\x20from'+'\x20Hit\x20Test\x20'+'is\x20not\x20sup'+'ported'),null);return;}_0x3de8c0['createAnch'+'or']()['then'](_0x4401fb=>{const _0x253665=this['_createAnc'+'hor'](_0x4401fb);_0x1ddb74==null||_0x1ddb74(null,_0x253665),this['fire']('add',_0x253665);})['catch'](_0x5205b4=>{_0x1ddb74==null||_0x1ddb74(_0x5205b4,null),this['fire']('error',_0x5205b4);});}else this['_creationQ'+'ueue']['push']({'transform':new XRRigidTransform(_0x2ceb10,_0x5316dd),'callback':_0x1ddb74});}['restore'](_0x23f81e,_0x577df4){if(!this['_available']){_0x577df4==null||_0x577df4(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(!this['_persisten'+'ce']){_0x577df4==null||_0x577df4(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'),null);return;}if(!this['manager']['active']){_0x577df4==null||_0x577df4(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'),null);return;}this['manager']['session']['restorePer'+'sistentAnc'+'hor'](_0x23f81e)['then'](_0x559c88=>{const _0xc3168e=this['_createAnc'+'hor'](_0x559c88,_0x23f81e);_0x577df4==null||_0x577df4(null,_0xc3168e),this['fire']('add',_0xc3168e);})['catch'](_0x14c478=>{_0x577df4==null||_0x577df4(_0x14c478,null),this['fire']('error',_0x14c478);});}['forget'](_0x3237ef,_0x1f5d23){if(!this['_available']){_0x1f5d23==null||_0x1f5d23(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'));return;}if(!this['_persisten'+'ce']){_0x1f5d23==null||_0x1f5d23(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'));return;}if(!this['manager']['active']){_0x1f5d23==null||_0x1f5d23(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'));return;}this['manager']['session']['deletePers'+'istentAnch'+'or'](_0x3237ef)['then'](()=>{_0x1f5d23==null||_0x1f5d23(null);})['catch'](_0x42b891=>{_0x1f5d23==null||_0x1f5d23(_0x42b891),this['fire']('error',_0x42b891);});}['update'](_0x14c005){if(!this['_available']){!this['manager']['session']['enabledFea'+'tures']&&!this['_checkingA'+'vailabilit'+'y']&&(this['_checkingA'+'vailabilit'+'y']=!(-0x25bb+-0x549+-0x1582*-0x2),_0x14c005['createAnch'+'or'](new XRRigidTransform(),this['manager']['_reference'+'Space'])['then'](_0x33f398=>{_0x33f398['delete'](),this['manager']['active']&&(this['_available']=!(-0x4b1*-0x8+0xd1e+0x1953*-0x2),this['fire']('available'));})['catch'](()=>{}));return;}if(this['_creationQ'+'ueue']['length']){for(let _0x53afc6=0x24f5*-0x1+0x247e+0x77;_0x53afc6<this['_creationQ'+'ueue']['length'];_0x53afc6++){const _0x4d43b9=this['_creationQ'+'ueue'][_0x53afc6];_0x14c005['createAnch'+'or'](_0x4d43b9['transform'],this['manager']['_reference'+'Space'])['then'](_0x5c717d=>{_0x4d43b9['callback']&&this['_callbacks'+'Anchors']['set'](_0x5c717d,_0x4d43b9['callback']);})['catch'](_0x484225=>{_0x4d43b9['callback']&&_0x4d43b9['callback'](_0x484225,null),this['fire']('error',_0x484225);});}this['_creationQ'+'ueue']['length']=0x41d+0x1b3b*0x1+-0x1f58;}for(const [_0x4dbf13,_0x1b5961]of this['_index'])_0x14c005['trackedAnc'+'hors']['has'](_0x4dbf13)||(this['_index']['delete'](_0x4dbf13),_0x1b5961['destroy']());for(let _0x39e473=0x5*0x6be+0x20ae+-0x1*0x4264;_0x39e473<this['_list']['length'];_0x39e473++)this['_list'][_0x39e473]['update'](_0x14c005);for(const _0x327dea of _0x14c005['trackedAnc'+'hors']){if(this['_index']['has'](_0x327dea))continue;try{const _0x43991c=_0x327dea['anchorSpac'+'e'];}catch{continue;}const _0x13f49b=this['_createAnc'+'hor'](_0x327dea);_0x13f49b['update'](_0x14c005);const _0xaec795=this['_callbacks'+'Anchors']['get'](_0x327dea);_0xaec795&&(this['_callbacks'+'Anchors']['delete'](_0x327dea),_0xaec795(null,_0x13f49b)),this['fire']('add',_0x13f49b);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['persistenc'+'e'](){return this['_persisten'+'ce'];}get['uuids'](){return!this['_available']||!this['_persisten'+'ce']||!this['manager']['active']?null:this['manager']['session']['persistent'+'Anchors'];}get['list'](){return this['_list'];}}h($a,'EVENT_AVAI'+'LABLE','available'),h($a,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h($a,'EVENT_ERRO'+'R','error'),h($a,'EVENT_ADD','add'),h($a,'EVENT_DEST'+'ROY','destroy');class yu extends pe{constructor(_0x1a421b,_0x11464c){super(),h(this,'_meshDetec'+'tion'),h(this,'_xrMesh'),h(this,'_lastChang'+'ed',-0x2f6*-0x1+0x1b05+0x5*-0x5ff),h(this,'_position',new I()),h(this,'_rotation',new le()),(this['_meshDetec'+'tion']=_0x1a421b,this['_xrMesh']=_0x11464c,this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime']);}get['xrMesh'](){return this['_xrMesh'];}get['label'](){return this['_xrMesh']['semanticLa'+'bel']||'';}get['vertices'](){return this['_xrMesh']['vertices'];}get['indices'](){return this['_xrMesh']['indices'];}['destroy'](){this['_xrMesh']&&(this['_xrMesh']=null,this['fire']('remove'));}['update'](_0x5ad9b6){const _0x5f0fbe=this['_meshDetec'+'tion']['_manager'],_0x4a9828=_0x5ad9b6['getPose'](this['_xrMesh']['meshSpace'],_0x5f0fbe['_reference'+'Space']);_0x4a9828&&(this['_position']['copy'](_0x4a9828['transform']['position']),this['_rotation']['copy'](_0x4a9828['transform']['orientatio'+'n'])),this['_lastChang'+'ed']!==this['_xrMesh']['lastChange'+'dTime']&&(this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}}h(yu,'EVENT_REMO'+'VE','remove'),h(yu,'EVENT_CHAN'+'GE','change');class fo extends pe{constructor(_0x55211e){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRMesh']),h(this,'_available',!(0x31a*-0xa+0x1d*-0xc4+0x3539)),h(this,'_index',new Map()),h(this,'_list',[]),(this['_manager']=_0x55211e,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['update'](_0x4a8950){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x4a8950['detectedMe'+'shes']['size'])this['_available']=!(-0x26ae*-0x1+-0x1*-0x170f+-0x3dbd),this['fire']('available');else return;}for(const _0x3d488c of _0x4a8950['detectedMe'+'shes']){let _0x1afa83=this['_index']['get'](_0x3d488c);_0x1afa83?_0x1afa83['update'](_0x4a8950):(_0x1afa83=new yu(this,_0x3d488c),this['_index']['set'](_0x3d488c,_0x1afa83),this['_list']['push'](_0x1afa83),_0x1afa83['update'](_0x4a8950),this['fire']('add',_0x1afa83));}for(const _0x1c0c73 of this['_index']['values']())_0x4a8950['detectedMe'+'shes']['has'](_0x1c0c73['xrMesh'])||this['_removeMes'+'h'](_0x1c0c73);}['_removeMes'+'h'](_0x1e3dae){this['_index']['delete'](_0x1e3dae['xrMesh']),this['_list']['splice'](this['_list']['indexOf'](_0x1e3dae),0x30*0x97+0x1646+-0x233*0x17),_0x1e3dae['destroy'](),this['fire']('remove',_0x1e3dae);}['_onSession'+'Start'](){if(this['_manager']['session']['enabledFea'+'tures']){const _0x3e2fa9=this['_manager']['session']['enabledFea'+'tures']['indexOf']('mesh-detec'+'tion')!==-(-0x1170+-0x227c*0x1+-0x15*-0x279);if(!_0x3e2fa9)return;this['_available']=_0x3e2fa9,this['fire']('available');}}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x7*-0x580+-0x14*0xcf+0x1*0x36ad);for(const _0xa6617e of this['_index']['values']())this['_removeMes'+'h'](_0xa6617e);this['fire']('unavailabl'+'e');}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['meshes'](){return this['_list'];}}h(fo,'EVENT_AVAI'+'LABLE','available'),h(fo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(fo,'EVENT_ADD','add'),h(fo,'EVENT_REMO'+'VE','remove');class $v extends pe{constructor(_0x5e0ecf,_0x10c007,_0x11243a){super(),h(this,'_manager'),h(this,'_xrView'),h(this,'_positionD'+'ata',new Float32Array(-0x153*-0x1+0x3b*-0x16+0x1e1*0x2)),h(this,'_viewport',new ae()),h(this,'_projMat',new te()),h(this,'_projViewO'+'ffMat',new te()),h(this,'_viewMat',new te()),h(this,'_viewOffMa'+'t',new te()),h(this,'_viewMat3',new oi()),h(this,'_viewInvMa'+'t',new te()),h(this,'_viewInvOf'+'fMat',new te()),h(this,'_xrCamera',null),h(this,'_textureCo'+'lor',null),h(this,'_textureDe'+'pth',null),h(this,'_depthInfo',null),h(this,'_emptyDept'+'hBuffer',new Uint8Array(-0x14f3+-0x274*-0xb+-0x1*0x5e9)),h(this,'_depthMatr'+'ix',new te()),(this['_manager']=_0x5e0ecf,this['_xrView']=_0x10c007);const _0x1e4e73=this['_manager']['app']['graphicsDe'+'vice'];if(this['_manager']['views']['supportedC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera'],this['_manager']['views']['availableC'+'olor']&&this['_xrCamera']&&(this['_textureCo'+'lor']=new _e(_0x1e4e73,{'format':ur,'mipmaps':!(0x8*0x179+0x7*-0x10b+-0x47a),'addressU':ue,'addressV':ue,'minFilter':_t,'magFilter':_t,'width':this['_xrCamera']['width'],'height':this['_xrCamera']['height'],'name':'XrView-'+this['_xrView']['eye']+'-Color'}))),this['_manager']['views']['supportedD'+'epth']&&this['_manager']['views']['availableD'+'epth']){const _0x1702ff=this['_manager']['views']['depthGpuOp'+'timized']?Te:_t;this['_textureDe'+'pth']=new _e(_0x1e4e73,{'format':this['_manager']['views']['depthPixel'+'Format'],'arrayLength':_0x11243a===0x2438+0xdd0+-0x1*0x3207?0xb49*-0x2+-0x3*-0x445+-0x33*-0x31:_0x11243a,'mipmaps':!(0xbff+-0x22a8+0x16aa),'addressU':ue,'addressV':ue,'minFilter':_0x1702ff,'magFilter':_0x1702ff,'width':0x4,'height':0x4,'name':'XrView-'+this['_xrView']['eye']+'-Depth'});for(let _0x57a1c9=0xc9a*-0x3+0x6c6+0x1f08;_0x57a1c9<this['_textureDe'+'pth']['_levels']['length'];_0x57a1c9++)this['_textureDe'+'pth']['_levels'][_0x57a1c9]=this['_emptyDept'+'hBuffer'];this['_textureDe'+'pth']['upload']();}(this['_textureCo'+'lor']||this['_textureDe'+'pth'])&&_0x1e4e73['on']('devicelost',this['_onDeviceL'+'ost'],this);}get['textureCol'+'or'](){return this['_textureCo'+'lor'];}get['textureDep'+'th'](){return this['_textureDe'+'pth'];}get['depthUvMat'+'rix'](){return this['_depthMatr'+'ix'];}get['depthValue'+'ToMeters'](){var _0x5302eb;return((_0x5302eb=this['_depthInfo'])==null?void(-0x4*-0x18e+0x1d90+-0x23c8):_0x5302eb['rawValueTo'+'Meters'])||0x1a71+-0x1*0x1297+-0x7da;}get['eye'](){return this['_xrView']['eye'];}get['viewport'](){return this['_viewport'];}get['projMat'](){return this['_projMat'];}get['projViewOf'+'fMat'](){return this['_projViewO'+'ffMat'];}get['viewOffMat'](){return this['_viewOffMa'+'t'];}get['viewInvOff'+'Mat'](){return this['_viewInvOf'+'fMat'];}get['viewMat3'](){return this['_viewMat3'];}get['positionDa'+'ta'](){return this['_positionD'+'ata'];}['update'](_0x13df20,_0x1abbb7){this['_xrView']=_0x1abbb7,this['_manager']['views']['availableC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera']);const _0x4aa78b=_0x13df20['session']['renderStat'+'e']['baseLayer']['getViewpor'+'t'](this['_xrView']);this['_viewport']['x']=_0x4aa78b['x'],this['_viewport']['y']=_0x4aa78b['y'],this['_viewport']['z']=_0x4aa78b['width'],this['_viewport']['w']=_0x4aa78b['height'],this['_projMat']['set'](this['_xrView']['projection'+'Matrix']),this['_viewMat']['set'](this['_xrView']['transform']['inverse']['matrix']),this['_viewInvMa'+'t']['set'](this['_xrView']['transform']['matrix']),this['_updateTex'+'tureColor'](),this['_updateDep'+'th'](_0x13df20);}['_updateTex'+'tureColor'](){if(!this['_manager']['views']['availableC'+'olor']||!this['_xrCamera']||!this['_textureCo'+'lor'])return;const _0x56b5d8=this['_manager']['webglBindi'+'ng'];if(!_0x56b5d8)return;const _0x58bb48=_0x56b5d8['getCameraI'+'mage'](this['_xrCamera']);if(!_0x58bb48)return;const _0x10f26f=this['_manager']['app']['graphicsDe'+'vice'],_0x30b590=_0x10f26f['gl'];if(!this['_frameBuff'+'erSource'])this['_frameBuff'+'erSource']=_0x30b590['createFram'+'ebuffer'](),this['_frameBuff'+'er']=_0x30b590['createFram'+'ebuffer']();else{const _0x5ebdc4=_0x30b590['COLOR_ATTA'+'CHMENT0'],_0x4831ba=this['_xrCamera']['width'],_0x397c67=this['_xrCamera']['height'];_0x10f26f['setFramebu'+'ffer'](this['_frameBuff'+'erSource']),_0x30b590['framebuffe'+'rTexture2D'](_0x30b590['FRAMEBUFFE'+'R'],_0x5ebdc4,_0x30b590['TEXTURE_2D'],_0x58bb48,-0x19a*0x11+0x1916+0x1*0x224),_0x10f26f['setFramebu'+'ffer'](this['_frameBuff'+'er']),_0x30b590['framebuffe'+'rTexture2D'](_0x30b590['FRAMEBUFFE'+'R'],_0x5ebdc4,_0x30b590['TEXTURE_2D'],this['_textureCo'+'lor']['impl']['_glTexture'],-0x20d+-0x1a75*-0x1+-0x1868),_0x30b590['bindFrameb'+'uffer'](_0x30b590['READ_FRAME'+'BUFFER'],this['_frameBuff'+'erSource']),_0x30b590['bindFrameb'+'uffer'](_0x30b590['DRAW_FRAME'+'BUFFER'],this['_frameBuff'+'er']),_0x30b590['blitFrameb'+'uffer'](0x8ea+-0x114b+-0x1*-0x861,_0x397c67,_0x4831ba,0x1a51+-0xd8d+-0xcc4,-0x18ab+-0x2378+0x3c23,-0x47*0x7b+0x552+0x1ccb,_0x4831ba,_0x397c67,_0x30b590['COLOR_BUFF'+'ER_BIT'],_0x30b590['NEAREST']);}}['_updateDep'+'th'](_0x483534){var _0x5159a0,_0x5f5c99;if(!this['_manager']['views']['availableD'+'epth']||!this['_textureDe'+'pth'])return;const _0xa97d67=this['_manager']['views']['depthGpuOp'+'timized'],_0x27734d=_0xa97d67?this['_manager']['webglBindi'+'ng']:_0x483534;if(!_0x27734d){this['_depthInfo']=null;return;}const _0x44d25e=_0x27734d['getDepthIn'+'formation'](this['_xrView']);if(!_0x44d25e){this['_depthInfo']=null;return;}let _0x2c6459=!this['_depthInfo']!=!_0x44d25e;this['_depthInfo']=_0x44d25e;const _0x3678bc=((_0x5159a0=this['_depthInfo'])==null?void(-0x257*-0xd+0x255c+-0x43c7):_0x5159a0['width'])||-0x2572+-0x378+0x193*0x1a,_0x4b3a99=((_0x5f5c99=this['_depthInfo'])==null?void(0xaf3+-0x131f+-0x416*-0x2):_0x5f5c99['height'])||0x1a5d+-0x1*-0x248b+-0x3ee4;let _0x39fede=!(-0x1*-0x1c4f+-0x1*0x210d+-0x87*-0x9);if((this['_textureDe'+'pth']['width']!==_0x3678bc||this['_textureDe'+'pth']['height']!==_0x4b3a99)&&(this['_textureDe'+'pth']['_width']=_0x3678bc,this['_textureDe'+'pth']['_height']=_0x4b3a99,_0x2c6459=!(-0x101*0x25+-0x1a*0x6a+0x2fe9),_0x39fede=!(0xb6*-0x4+0x2221+0x1f49*-0x1)),_0x2c6459&&(this['_depthInfo']?this['_depthMatr'+'ix']['data']['set'](this['_depthInfo']['normDepthB'+'ufferFromN'+'ormView']['matrix']):this['_depthMatr'+'ix']['setIdentit'+'y']()),this['_depthInfo']){if(_0xa97d67){if(this['_depthInfo']['texture']){const _0x329143=this['_manager']['app']['graphicsDe'+'vice']['gl'];switch(this['_textureDe'+'pth']['impl']['_glTexture']=this['_depthInfo']['texture'],this['_depthInfo']['textureTyp'+'e']==='texture-ar'+'ray'?this['_textureDe'+'pth']['impl']['_glTarget']=_0x329143['TEXTURE_2D'+'_ARRAY']:this['_textureDe'+'pth']['impl']['_glTarget']=_0x329143['TEXTURE_2D'],this['_manager']['views']['depthPixel'+'Format']){case Hi:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x329143['R32F'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x329143['FLOAT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x329143['RED'];break;case ki:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x329143['DEPTH_COMP'+'ONENT16'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x329143['UNSIGNED_S'+'HORT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x329143['DEPTH_COMP'+'ONENT'];break;}this['_textureDe'+'pth']['impl']['_glCreated']=!(0xe3e+0xb*-0x146+-0x14*0x3);}}else this['_textureDe'+'pth']['_levels'][-0x1*0x1123+-0x21d*0x7+0x86*0x3d]=new Uint8Array(this['_depthInfo']['data']),this['_textureDe'+'pth']['upload']();}else this['_textureDe'+'pth']['_levels'][-0x1*0xbcb+0x6da+0x4f1]=this['_emptyDept'+'hBuffer'],this['_textureDe'+'pth']['upload']();_0x39fede&&this['fire']('depth:resi'+'ze',_0x3678bc,_0x4b3a99);}['updateTran'+'sforms'](_0x245596){_0x245596?(this['_viewInvOf'+'fMat']['mul2'](_0x245596,this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewInvOf'+'fMat'])['invert']()):(this['_viewInvOf'+'fMat']['copy'](this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewMat'])),this['_viewMat3']['setFromMat'+'4'](this['_viewOffMa'+'t']),this['_projViewO'+'ffMat']['mul2'](this['_projMat'],this['_viewOffMa'+'t']),this['_positionD'+'ata'][0x1f*-0x6d+-0x1ba9+0x28dc]=this['_viewInvOf'+'fMat']['data'][-0x1f4c+0x1373*-0x2+0x36*0x14d],this['_positionD'+'ata'][0x20ec+0x2667*-0x1+-0x15f*-0x4]=this['_viewInvOf'+'fMat']['data'][0x1b01+-0x1*-0x9f5+-0x24e9],this['_positionD'+'ata'][-0xd7d+-0xb86+0x23*0xb7]=this['_viewInvOf'+'fMat']['data'][0x1bf5+-0x1*0x232f+0x748];}['_onDeviceL'+'ost'](){this['_frameBuff'+'erSource']=null,this['_frameBuff'+'er']=null,this['_depthInfo']=null;}['getDepth'](_0x397da3,_0x584361){var _0x5057e8;return this['_manager']['views']['depthGpuOp'+'timized']?null:((_0x5057e8=this['_depthInfo'])==null?void(0xab+0x2a3*0xc+-0x204f):_0x5057e8['getDepthIn'+'Meters'](_0x397da3,_0x584361))??null;}['destroy'](){if(this['_depthInfo']=null,this['_textureCo'+'lor']&&(this['_textureCo'+'lor']['destroy'](),this['_textureCo'+'lor']=null),this['_textureDe'+'pth']&&(this['_textureDe'+'pth']['destroy'](),this['_textureDe'+'pth']=null),this['_frameBuff'+'erSource']){const _0x1a3eba=this['_manager']['app']['graphicsDe'+'vice']['gl'];_0x1a3eba['deleteFram'+'ebuffer'](this['_frameBuff'+'erSource']),this['_frameBuff'+'erSource']=null,_0x1a3eba['deleteFram'+'ebuffer'](this['_frameBuff'+'er']),this['_frameBuff'+'er']=null;}}}h($v,'EVENT_DEPT'+'HRESIZE','depth:resi'+'ze');class cc extends pe{constructor(_0x4a1e37){super(),h(this,'_manager'),h(this,'_index',new Map()),h(this,'_indexTmp',new Map()),h(this,'_list',[]),h(this,'_supported'+'Color',Me['browser']&&!!window['XRCamera']&&!!window['XRWebGLBin'+'ding']),h(this,'_supported'+'Depth',Me['browser']&&!!window['XRDepthInf'+'ormation']),h(this,'_available'+'Color',!(-0x1d7*-0x12+-0x738+-0x7*0x3b3)),h(this,'_available'+'Depth',!(-0x9*0x71+-0xc14+0x100e)),h(this,'_depthUsag'+'e',''),h(this,'_depthForm'+'at',''),h(this,'_depthForm'+'ats',{[zv]:Eu,[Vv]:ki,[Gv]:Hi}),(this['_manager']=_0x4a1e37,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}get['list'](){return this['_list'];}get['supportedC'+'olor'](){return this['_supported'+'Color'];}get['supportedD'+'epth'](){return this['_supported'+'Depth'];}get['availableC'+'olor'](){return this['_available'+'Color'];}get['availableD'+'epth'](){return this['_available'+'Depth'];}get['depthUsage'](){return this['_depthUsag'+'e'];}get['depthGpuOp'+'timized'](){return this['_depthUsag'+'e']===Bv;}get['depthForma'+'t'](){return this['_depthForm'+'at'];}get['depthPixel'+'Format'](){return this['_depthForm'+'ats'][this['_depthForm'+'at']]??null;}['update'](_0x3edfb0,_0x17c039){for(let _0x41eec6=0x18af*-0x1+-0x2145+0x2*0x1cfa;_0x41eec6<_0x17c039['length'];_0x41eec6++)this['_indexTmp']['set'](_0x17c039[_0x41eec6]['eye'],_0x17c039[_0x41eec6]);for(const [_0x503881,_0x234916]of this['_indexTmp']){let _0xbc04f8=this['_index']['get'](_0x503881);_0xbc04f8?_0xbc04f8['update'](_0x3edfb0,_0x234916):(_0xbc04f8=new $v(this['_manager'],_0x234916,_0x17c039['length']),this['_index']['set'](_0x503881,_0xbc04f8),this['_list']['push'](_0xbc04f8),_0xbc04f8['update'](_0x3edfb0,_0x234916),this['fire']('add',_0xbc04f8));}for(const [_0x3b0d6e,_0x4d3eb7]of this['_index']){if(this['_indexTmp']['has'](_0x3b0d6e))continue;_0x4d3eb7['destroy'](),this['_index']['delete'](_0x3b0d6e);const _0xbd98db=this['_list']['indexOf'](_0x4d3eb7);_0xbd98db!==-(-0xcb*-0x1+0x2d2*0xd+0x2f*-0xcc)&&this['_list']['splice'](_0xbd98db,-0x1*0xf67+-0x729+-0x1691*-0x1),this['fire']('remove',_0x4d3eb7);}this['_indexTmp']['clear']();}['get'](_0x3b7135){return this['_index']['get'](_0x3b7135)||null;}['_onSession'+'Start'](){if(this['_manager']['type']===Eo&&this['_manager']['session']['enabledFea'+'tures']&&(this['_available'+'Color']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('camera-acc'+'ess')!==-(0xec5*0x1+0x229b+0x21*-0x17f),this['_available'+'Depth']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('depth-sens'+'ing')!==-(-0x3*0x937+0xd53+0xe53),this['_available'+'Depth'])){const _0x5d5c84=this['_manager']['session'];this['_depthUsag'+'e']=_0x5d5c84['depthUsage'],this['_depthForm'+'at']=_0x5d5c84['depthDataF'+'ormat'];}}['_onSession'+'End'](){for(const _0x547935 of this['_index']['values']())_0x547935['destroy']();this['_index']['clear'](),this['_available'+'Color']=!(-0xb9*-0x6+-0x21*-0xc0+0x1*-0x1d15),this['_available'+'Depth']=!(-0x1835+0x2594+-0xd5e),this['_depthUsag'+'e']='',this['_depthForm'+'at']='',this['_list']['length']=-0x23e2+-0x1*0x2195+0x4577;}}h(cc,'EVENT_ADD','add'),h(cc,'EVENT_REMO'+'VE','remove');class Xa extends pe{constructor(_0xc32e8){super(),h(this,'app'),h(this,'_supported',Me['browser']&&!!navigator['xr']),h(this,'_available',{}),h(this,'_type',null),h(this,'_spaceType',null),h(this,'_session',null),h(this,'_baseLayer',null),h(this,'webglBindi'+'ng',null),h(this,'_reference'+'Space',null),h(this,'domOverlay'),h(this,'hitTest'),h(this,'imageTrack'+'ing'),h(this,'planeDetec'+'tion'),h(this,'meshDetect'+'ion'),h(this,'input'),h(this,'lightEstim'+'ation'),h(this,'views'),h(this,'anchors'),h(this,'_camera',null),h(this,'_localPosi'+'tion',new I()),h(this,'_localRota'+'tion',new le()),h(this,'_depthNear',-0x56f+0x9b1+-0x442+0.1),h(this,'_depthFar',-0x2*0xb4c+-0x71a+0x30e*0xb),h(this,'_supported'+'FrameRates',null),h(this,'_width',0x1*-0xbf7+0x2*-0xf9a+-0x1*-0x2b2b),h(this,'_height',-0x1766+-0x1ab+-0x5d*-0x45),h(this,'_framebuff'+'erScaleFac'+'tor',0x2397+0x6c7*-0x5+-0x1b3),(this['app']=_0xc32e8,this['_available'][yk]=!(0xfa*-0x8+-0x15da*0x1+-0x23*-0xd9),this['_available'][vk]=!(-0x21d3+0x3*-0x94f+0x3dc1),this['_available'][Eo]=!(-0x15dd+0xf2*0x15+0x204),this['views']=new cc(this),this['domOverlay']=new wk(this),this['hitTest']=new Or(this),this['imageTrack'+'ing']=new Hv(this),this['planeDetec'+'tion']=new ho(this),this['meshDetect'+'ion']=new fo(this),this['input']=new Ai(this),this['lightEstim'+'ation']=new gu(this),this['anchors']=new $a(this),this['views']=new cc(this),this['_supported']&&(navigator['xr']['addEventLi'+'stener']('devicechan'+'ge',()=>{this['_deviceAva'+'ilabilityC'+'heck']();}),this['_deviceAva'+'ilabilityC'+'heck'](),this['app']['graphicsDe'+'vice']['on']('devicelost',this['_onDeviceL'+'ost'],this),this['app']['graphicsDe'+'vice']['on']('devicerest'+'ored',this['_onDeviceR'+'estored'],this)),this['isPC']=Kv());}['destroy'](){}['start'](_0x449275,_0x885bfc,_0x207844,_0x4e177e){let _0x5537b0=_0x4e177e;if(typeof _0x4e177e=='object'&&(_0x5537b0=_0x4e177e['callback']),!this['_available'][_0x885bfc]){_0x5537b0&&_0x5537b0(new Error('XR\x20is\x20not\x20'+'available'));return;}if(this['_session']){_0x5537b0&&_0x5537b0(new Error('XR\x20session'+'\x20is\x20alread'+'y\x20started'));return;}this['_camera']=_0x449275,this['_camera']['camera']['xr']=this,this['_type']=_0x885bfc,this['_spaceType']=_0x207844,this['_framebuff'+'erScaleFac'+'tor']=(_0x4e177e==null?void(-0x2031+-0x3bf+-0x32*-0xb8):_0x4e177e['framebuffe'+'rScaleFact'+'or'])??-0x144d+0x1f*-0x56+0x1eb8,this['_setClipPl'+'anes'](_0x449275['nearClip'],_0x449275['farClip']);const _0x3cb4ea={'requiredFeatures':[_0x207844],'optionalFeatures':[]},_0x3ab498=this['app']['graphicsDe'+'vice'];_0x3ab498!=null&&_0x3ab498['isWebGPU']&&_0x3cb4ea['requiredFe'+'atures']['push']('webgpu');const _0x38fab4=_0x3ab498==null?void(-0xb*0x269+0x58f+0xc*0x1bf):_0x3ab498['isWebGL2'];if(_0x885bfc===Eo){if(_0x3cb4ea['optionalFe'+'atures']['push']('light-esti'+'mation'),_0x3cb4ea['optionalFe'+'atures']['push']('hit-test'),_0x4e177e&&(_0x4e177e['imageTrack'+'ing']&&this['imageTrack'+'ing']['supported']&&_0x3cb4ea['optionalFe'+'atures']['push']('image-trac'+'king'),_0x4e177e['planeDetec'+'tion']&&_0x3cb4ea['optionalFe'+'atures']['push']('plane-dete'+'ction'),_0x4e177e['meshDetect'+'ion']&&_0x3cb4ea['optionalFe'+'atures']['push']('mesh-detec'+'tion')),this['domOverlay']['supported']&&this['domOverlay']['root']&&(_0x3cb4ea['optionalFe'+'atures']['push']('dom-overla'+'y'),_0x3cb4ea['domOverlay']={'root':this['domOverlay']['root']}),_0x4e177e&&_0x4e177e['anchors']&&this['anchors']['supported']&&_0x3cb4ea['optionalFe'+'atures']['push']('anchors'),_0x4e177e&&_0x4e177e['depthSensi'+'ng']&&this['views']['supportedD'+'epth']){_0x3cb4ea['optionalFe'+'atures']['push']('depth-sens'+'ing');const _0x2ab48a=[],_0x2ac316=[];if(_0x2ab48a['push'](Bv,Tk),_0x2ac316['push'](Gv,zv,Vv),_0x4e177e['depthSensi'+'ng']['usagePrefe'+'rence']){const _0xbf6b93=_0x2ab48a['indexOf'](_0x4e177e['depthSensi'+'ng']['usagePrefe'+'rence']);_0xbf6b93!==-(-0x511+0x2*0xd42+-0x1572)&&_0x2ab48a['splice'](_0xbf6b93,-0x240b+-0x20b3+0x44bf),_0x2ab48a['unshift'](_0x4e177e['depthSensi'+'ng']['usagePrefe'+'rence']);}if(_0x4e177e['depthSensi'+'ng']['dataFormat'+'Preference']){const _0xc56dca=_0x2ac316['indexOf'](_0x4e177e['depthSensi'+'ng']['dataFormat'+'Preference']);_0xc56dca!==-(0x1899+0x25a4+-0x3e3c)&&_0x2ac316['splice'](_0xc56dca,0x23fa+0x1*0x190f+-0x3d08),_0x2ac316['unshift'](_0x4e177e['depthSensi'+'ng']['dataFormat'+'Preference']);}_0x3cb4ea['depthSensi'+'ng']={'usagePreference':_0x2ab48a,'dataFormatPreference':_0x2ac316};}_0x38fab4&&_0x4e177e&&_0x4e177e['cameraColo'+'r']&&this['views']['supportedC'+'olor']&&_0x3cb4ea['optionalFe'+'atures']['push']('camera-acc'+'ess');}_0x3cb4ea['optionalFe'+'atures']['push']('hand-track'+'ing'),_0x4e177e&&_0x4e177e['optionalFe'+'atures']&&(_0x3cb4ea['optionalFe'+'atures']=_0x3cb4ea['optionalFe'+'atures']['concat'](_0x4e177e['optionalFe'+'atures'])),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['images']['length']?this['imageTrack'+'ing']['prepareIma'+'ges']((_0x4a21f5,_0x421b92)=>{if(_0x4a21f5){_0x5537b0&&_0x5537b0(_0x4a21f5),this['fire']('error',_0x4a21f5);return;}_0x421b92!==null&&(_0x3cb4ea['trackedIma'+'ges']=_0x421b92),this['_onStartOp'+'tionsReady'](_0x885bfc,_0x207844,_0x3cb4ea,_0x5537b0);}):this['_onStartOp'+'tionsReady'](_0x885bfc,_0x207844,_0x3cb4ea,_0x5537b0);}['_onStartOp'+'tionsReady'](_0x53be82,_0x312190,_0x2b6106,_0x26e6dd){const _0xb2d651=this['isPC']?{'requiredFeatures':['local-floo'+'r']}:_0x2b6106;navigator['xr']['requestSes'+'sion'](_0x53be82,_0xb2d651)['then'](_0x54809c=>{this['_onSession'+'Start'](_0x54809c,_0x312190,_0x26e6dd);})['catch'](_0x47c278=>{this['_camera']['camera']['xr']=null,this['_camera']=null,this['_type']=null,this['_spaceType']=null,_0x26e6dd&&_0x26e6dd(_0x47c278),this['fire']('error',_0x47c278);});}['end'](_0x47eaf4){if(!this['_session']){_0x47eaf4&&_0x47eaf4(new Error('XR\x20Session'+'\x20is\x20not\x20in'+'itialized'));return;}this['webglBindi'+'ng']=null,_0x47eaf4&&this['once']('end',_0x47eaf4),this['_session']['end']();}['isAvailabl'+'e'](_0x51ca4c){return this['_available'][_0x51ca4c];}['_deviceAva'+'ilabilityC'+'heck'](){for(const _0x27df57 in this['_available'])this['_sessionSu'+'pportCheck'](_0x27df57);}['initiateRo'+'omCapture'](_0x3a76f6){if(!this['_session']){_0x3a76f6(new Error('Session\x20is'+'\x20not\x20activ'+'e'));return;}if(!this['_session']['initiateRo'+'omCapture']){_0x3a76f6(new Error('Session\x20do'+'es\x20not\x20sup'+'port\x20manua'+'l\x20room\x20cap'+'ture'));return;}this['_session']['initiateRo'+'omCapture']()['then'](()=>{_0x3a76f6&&_0x3a76f6(null);})['catch'](_0x1bd0db=>{_0x3a76f6&&_0x3a76f6(_0x1bd0db);});}['updateTarg'+'etFrameRat'+'e'](_0x3835c2,_0x1b50a0){var _0x517a5f;if(!((_0x517a5f=this['_session'])!=null&&_0x517a5f['updateTarg'+'etFrameRat'+'e'])){_0x1b50a0==null||_0x1b50a0(new Error('unable\x20to\x20'+'update\x20fra'+'meRate'));return;}this['_session']['updateTarg'+'etFrameRat'+'e'](_0x3835c2)['then'](()=>{_0x1b50a0==null||_0x1b50a0();})['catch'](_0x3738a3=>{_0x1b50a0==null||_0x1b50a0(_0x3738a3);});}['_sessionSu'+'pportCheck'](_0x487bc7){navigator['xr']['isSessionS'+'upported'](_0x487bc7)['then'](_0x197271=>{this['_available'][_0x487bc7]!==_0x197271&&(this['_available'][_0x487bc7]=_0x197271,this['fire']('available',_0x487bc7,_0x197271),this['fire']('available:'+_0x487bc7,_0x197271));})['catch'](_0x3fe1c3=>{this['fire']('error',_0x3fe1c3);});}['_onSession'+'Start'](_0x311cf7,_0x365535,_0x5953ee){let _0x3f9d38=!(-0xdae+0x100d+0x2*-0x12f);this['_session']=_0x311cf7;const _0x498bdf=()=>{this['fire']('visibility'+':change',_0x311cf7['visibility'+'State']);},_0x30e1e2=()=>{this['_setClipPl'+'anes'](this['_camera']['nearClip'],this['_camera']['farClip']);},_0xbaaf55=()=>{this['_camera']&&(this['_camera']['off']('set_nearCl'+'ip',_0x30e1e2),this['_camera']['off']('set_farCli'+'p',_0x30e1e2),this['_camera']['camera']['xr']=null,this['_camera']=null),_0x311cf7['removeEven'+'tListener']('end',_0xbaaf55),_0x311cf7['removeEven'+'tListener']('visibility'+'change',_0x498bdf),_0x3f9d38||this['fire']('end'),this['_session']=null,this['_reference'+'Space']=null,this['_width']=0x139e+-0x13dd+0x3f,this['_height']=-0x85d*0x3+-0x2259*0x1+0x3b70,this['_type']=null,this['_spaceType']=null,this['app']['systems']&&this['app']['tick']();};_0x311cf7['addEventLi'+'stener']('end',_0xbaaf55),_0x311cf7['addEventLi'+'stener']('visibility'+'change',_0x498bdf),this['_camera']['on']('set_nearCl'+'ip',_0x30e1e2),this['_camera']['on']('set_farCli'+'p',_0x30e1e2),M['assert'](window,'window\x20is\x20'+'needed\x20to\x20'+'scale\x20the\x20'+'XR\x20framebu'+'ffer.\x20Are\x20'+'you\x20runnin'+'g\x20XR\x20headl'+'ess?'),this['_createBas'+'eLayer'](),this['session']['supportedF'+'rameRates']?this['_supported'+'FrameRates']=Array['from'](this['session']['supportedF'+'rameRates']):this['_supported'+'FrameRates']=null,this['_session']['addEventLi'+'stener']('frameratec'+'hange',()=>{var _0x5db90f;this['fire']('frameratec'+'hange',(_0x5db90f=this['_session'])==null?void(-0x1a8d+0x1*0x2129+0x9*-0xbc):_0x5db90f['frameRate']);}),_0x311cf7['requestRef'+'erenceSpac'+'e'](_0x365535)['then'](_0x5bbb09=>{this['_reference'+'Space']=_0x5bbb09,this['app']['tick'](),_0x5953ee&&_0x5953ee(null),this['fire']('start');})['catch'](_0x264437=>{_0x3f9d38=!(0x1*0x10e2+-0x2*0x92b+-0x4*-0x5d),_0x311cf7['end'](),_0x5953ee&&_0x5953ee(_0x264437),this['fire']('error',_0x264437);});}['_setClipPl'+'anes'](_0x50e29c,_0xb003a7){this['_depthNear']===_0x50e29c&&this['_depthFar']===_0xb003a7||(this['_depthNear']=_0x50e29c,this['_depthFar']=_0xb003a7,this['_session']&&this['_session']['updateRend'+'erState']({'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_createBas'+'eLayer'](){const _0x52a612=this['app']['graphicsDe'+'vice'],_0x1b9fff=_0x52a612['maxPixelRa'+'tio']/window['devicePixe'+'lRatio']*this['_framebuff'+'erScaleFac'+'tor'];if(this['_baseLayer']=new XRWebGLLayer(this['_session'],_0x52a612['gl'],{'alpha':!(-0x1*-0x159b+-0x455*-0x2+-0x1e45),'depth':!(0x4*0x5d7+-0x157a+-0x1e2),'stencil':!(0xa*0xbd+0x638*-0x4+-0x8bf*-0x2),'framebufferScaleFactor':_0x1b9fff,'antialias':!(0x4c+0x1cd5+0xe90*-0x2)}),_0x52a612!=null&&_0x52a612['isWebGL2']&&window['XRWebGLBin'+'ding'])try{this['webglBindi'+'ng']=new XRWebGLBinding(this['_session'],_0x52a612['gl']);}catch(_0x50f7a8){this['fire']('error',_0x50f7a8);}this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']});}['_onDeviceL'+'ost'](){this['_session']&&(this['webglBindi'+'ng']&&(this['webglBindi'+'ng']=null),this['_baseLayer']=null,this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_onDeviceR'+'estored'](){this['_session']&&setTimeout(()=>{this['app']['graphicsDe'+'vice']['gl']['makeXRComp'+'atible']()['then'](()=>{this['_createBas'+'eLayer']();})['catch'](_0x46606b=>{this['fire']('error',_0x46606b);});},0xb4c+-0x16*-0xdf+-0x1e76);}['update'](_0x18e846){if(!this['_session'])return!(-0x64*-0x34+-0x259f+0x1150);const _0x4bcdbc=_0x18e846['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rWidth'],_0x1b3b7b=_0x18e846['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rHeight'];(this['_width']!==_0x4bcdbc||this['_height']!==_0x1b3b7b)&&(this['_width']=_0x4bcdbc,this['_height']=_0x1b3b7b,this['app']['graphicsDe'+'vice']['setResolut'+'ion'](_0x4bcdbc,_0x1b3b7b));const _0x1358f8=_0x18e846['getViewerP'+'ose'](this['_reference'+'Space']);if(!_0x1358f8)return!(-0x209*0xf+-0xb9f*0x2+0x35c6);const _0x60ad54=this['views']['list']['length'];this['views']['update'](_0x18e846,_0x1358f8['views']);const _0x13ab54=_0x1358f8['transform']['position'],_0x2790b8=_0x1358f8['transform']['orientatio'+'n'];if(this['_localPosi'+'tion']['set'](_0x13ab54['x'],_0x13ab54['y'],_0x13ab54['z']),this['_localRota'+'tion']['set'](_0x2790b8['x'],_0x2790b8['y'],_0x2790b8['z'],_0x2790b8['w']),_0x60ad54===0x19e4+0x925+-0x2309*0x1&&this['views']['list']['length']>-0x1a31+0x907*0x4+-0x9eb){const _0x474e5e=new te(),_0x512455=this['views']['list'][-0x1089+-0xc23*0x1+0x4*0x72b];_0x474e5e['copy'](_0x512455['projMat']);const _0xd06152=_0x474e5e['data'],_0x1c7340=(-0x1*0x23a7+-0x1a43+0x3dec)*Math['atan']((-0xbfc*0x2+-0x57a+0x1d73)/_0xd06152[0x1a05*0x1+-0x7d*-0x35+0x1*-0x33e1])*(0x18*-0x169+0x1fb1+0x2db)/Math['PI'],_0x47625b=_0xd06152[-0xed4+0x18c5+-0x9ec]/_0xd06152[-0x118d+-0x1d34+0x1*0x2ec1],_0x2e88f8=_0xd06152[0x1148+0x1b9d+-0x2cd7]/(_0xd06152[-0x97b*0x3+-0x1*0x54a+0xd*0x299]+(-0x1785+0x1*0xa0b+-0x1d*-0x77)),_0x2c5705=_0xd06152[-0x20bc*0x1+0x1871*0x1+0x859]/(_0xd06152[-0x1*-0x709+-0x1ca9+0x5e*0x3b]-(-0x1e0f+0x1*0x28d+0x1b83));this['_camera']['camera']['setXrPrope'+'rties']({'aspectRatio':_0x47625b,'farClip':_0x2e88f8,'fov':_0x1c7340,'horizontalFov':!(-0x1*0x28e+0x13*0x81+-0x704),'nearClip':_0x2c5705});}return this['_camera']['camera']['_node']['setLocalPo'+'sition'](this['_localPosi'+'tion']),this['_camera']['camera']['_node']['setLocalRo'+'tation'](this['_localRota'+'tion']),this['input']['update'](_0x18e846),this['_type']===Eo&&(this['hitTest']['supported']&&this['hitTest']['update'](_0x18e846),this['lightEstim'+'ation']['supported']&&this['lightEstim'+'ation']['update'](_0x18e846),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['update'](_0x18e846),this['anchors']['supported']&&this['anchors']['update'](_0x18e846),this['planeDetec'+'tion']['supported']&&this['planeDetec'+'tion']['update'](_0x18e846),this['meshDetect'+'ion']['supported']&&this['meshDetect'+'ion']['update'](_0x18e846)),this['fire']('update',_0x18e846),!(0x1275+0x723+-0x1998);}get['supported'](){return this['_supported'];}get['active'](){return!!this['_session'];}get['type'](){return this['_type'];}get['spaceType'](){return this['_spaceType'];}get['session'](){return this['_session'];}get['frameRate'](){var _0x177df1;return((_0x177df1=this['_session'])==null?void(0x9a3*-0x1+-0x1*-0xbae+-0x20b*0x1):_0x177df1['frameRate'])??null;}get['supportedF'+'rameRates'](){return this['_supported'+'FrameRates'];}get['framebuffe'+'rScaleFact'+'or'](){return this['_framebuff'+'erScaleFac'+'tor'];}set['fixedFovea'+'tion'](_0x553943){var _0x1b819b;(((_0x1b819b=this['_baseLayer'])==null?void(0x24df*0x1+0x1d1a+0x41f9*-0x1):_0x1b819b['fixedFovea'+'tion'])??null)!==null&&(this['app']['graphicsDe'+'vice']['samples']>-0x189d+-0x234b+-0x31*-0x139&&M['warn']('Fixed\x20Fove'+'ation\x20is\x20i'+'gnored.\x20Di'+'sable\x20anti'+'-aliasing\x20'+'for\x20it\x20to\x20'+'be\x20effecti'+'ve.'),this['_baseLayer']['fixedFovea'+'tion']=_0x553943);}get['fixedFovea'+'tion'](){var _0x460929;return((_0x460929=this['_baseLayer'])==null?void(-0x6*0x4f7+0xb4f+0x127b):_0x460929['fixedFovea'+'tion'])??null;}get['camera'](){return this['_camera']?this['_camera']['entity']:null;}get['visibility'+'State'](){return this['_session']?this['_session']['visibility'+'State']:null;}}h(Xa,'EVENT_AVAI'+'LABLE','available'),h(Xa,'EVENT_STAR'+'T','start'),h(Xa,'EVENT_END','end'),h(Xa,'EVENT_UPDA'+'TE','update'),h(Xa,'EVENT_ERRO'+'R','error');class Qk extends ec{constructor(_0x25a4b3,_0x579ae8={}){super(_0x25a4b3);const _0x4b668d=new fD();_0x4b668d['graphicsDe'+'vice']=_0x579ae8['graphicsDe'+'vice']??this['createDevi'+'ce'](_0x25a4b3,_0x579ae8),this['addCompone'+'ntSystems'](_0x4b668d),this['addResourc'+'eHandles'](_0x4b668d),_0x4b668d['elementInp'+'ut']=_0x579ae8['elementInp'+'ut'],_0x4b668d['keyboard']=_0x579ae8['keyboard'],_0x4b668d['mouse']=_0x579ae8['mouse'],_0x4b668d['touch']=_0x579ae8['touch'],_0x4b668d['gamepads']=_0x579ae8['gamepads'],_0x4b668d['scriptPref'+'ix']=_0x579ae8['scriptPref'+'ix'],_0x4b668d['assetPrefi'+'x']=_0x579ae8['assetPrefi'+'x'],_0x4b668d['scriptsOrd'+'er']=_0x579ae8['scriptsOrd'+'er'],_0x4b668d['soundManag'+'er']=new UT(),_0x4b668d['lightmappe'+'r']=AD,_0x4b668d['batchManag'+'er']=Vw,_0x4b668d['xr']=Xa,this['init'](_0x4b668d);}['createDevi'+'ce'](_0x5e689f,_0x2dd2a1){return _0x2dd2a1['graphicsDe'+'viceOption'+'s']||(_0x2dd2a1['graphicsDe'+'viceOption'+'s']={}),Me['browser']&&navigator['xr']&&(_0x2dd2a1['graphicsDe'+'viceOption'+'s']['xrCompatib'+'le']=!(0x1a0f+-0xf4*0x12+-0x8e7)),_0x2dd2a1['graphicsDe'+'viceOption'+'s']['alpha']=_0x2dd2a1['graphicsDe'+'viceOption'+'s']['alpha']||!(-0x1*-0x16e1+0x16*-0x1b3+-0x741*-0x2),new pT(_0x5e689f,_0x2dd2a1['graphicsDe'+'viceOption'+'s']);}['addCompone'+'ntSystems'](_0x4eb9c6){_0x4eb9c6['componentS'+'ystems']=[gv,gL,qL,WD,KD,oR,Z3,LO,OO,jO,xO,QD,j3,nO,HL,sL,_O,SO,bO,iR,YL,PO,KO];}['addResourc'+'eHandles'](_0x3e8006){_0x3e8006['resourceHa'+'ndlers']=[ZO,tN,sN,iN,FN,IN,Sk,$N,bN,aN,VN,NN,cN,AN,hN,GN,EN,dN,fN,nN,qN,HN,WN,lN,wN];}}class Jk extends pe{constructor(_0x20b227,_0x18633e){super(),h(this,'_assets',new Set()),h(this,'_loadingAs'+'sets',new Set()),h(this,'_waitingAs'+'sets',new Set()),h(this,'_loading',!(0x1a6+-0xb8a+0x9e5)),h(this,'_loaded',!(-0x472+-0x99*0x1f+0x16fa)),h(this,'_failed',[]),(this['_registry']=_0x18633e,_0x20b227['forEach'](_0x43767a=>{if(_0x43767a instanceof me)_0x43767a['registry']||(_0x43767a['registry']=_0x18633e),this['_assets']['add'](_0x43767a);else{const _0x53d069=_0x18633e['get'](_0x43767a);_0x53d069?this['_assets']['add'](_0x53d069):this['_waitForAs'+'set'](_0x43767a);}}));}['destroy'](){this['_registry']['off']('load',this['_onLoad']),this['_registry']['off']('error',this['_onError']),this['_waitingAs'+'sets']['forEach'](_0x42a523=>{this['_registry']['off']('add:'+_0x42a523,this['_onAddAsse'+'t']);}),this['off']('progress'),this['off']('load');}['_assetHasD'+'ependencie'+'s'](_0x5d44da){var _0x110b93;return _0x5d44da['type']==='model'&&((_0x110b93=_0x5d44da['file'])==null?void(0x9d9+0x3*0xa2f+-0x2866):_0x110b93['url'])&&_0x5d44da['file']['url']&&_0x5d44da['file']['url']['match'](/.json$/g);}['load'](_0x11a567,_0x499d16){if(this['_loading']){console['debug']('AssetListL'+'oader:\x20Loa'+'d\x20function'+'\x20called\x20mu'+'ltiple\x20tim'+'es.');return;}this['_loading']=!(0x549+-0x2*-0xa70+-0xb5*0x25),this['_callback']=_0x11a567,this['_scope']=_0x499d16,this['_registry']['on']('load',this['_onLoad'],this),this['_registry']['on']('error',this['_onError'],this);let _0x298340=!(-0xdd9+0x1755+-0x97b*0x1);this['_assets']['forEach'](_0x53004a=>{_0x53004a['loaded']||(_0x298340=!(0x33*0xc2+-0x2055+-0x15*0x4d),this['_assetHasD'+'ependencie'+'s'](_0x53004a)&&this['_registry']['loadFromUr'+'l'](_0x53004a['file']['url'],_0x53004a['type'],(_0x15a2e7,_0x2d689a)=>{if(_0x15a2e7){this['_onError'](_0x15a2e7,_0x53004a);return;}this['_onLoad'](_0x53004a);}),this['_loadingAs'+'sets']['add'](_0x53004a),this['_registry']['add'](_0x53004a));}),this['_loadingAs'+'sets']['forEach'](_0x523e2f=>{this['_assetHasD'+'ependencie'+'s'](_0x523e2f)||this['_registry']['load'](_0x523e2f);}),!_0x298340&&this['_waitingAs'+'sets']['size']===-0x21a5+-0x1b1f+-0x2*-0x1e62&&this['_loadingCo'+'mplete']();}['ready'](_0x1177b,_0x3e1351=this){this['_loaded']?_0x1177b['call'](_0x3e1351,Array['from'](this['_assets'])):this['once']('load',_0x596338=>{_0x1177b['call'](_0x3e1351,_0x596338);});}['_loadingCo'+'mplete'](){this['_loaded']||(this['_loaded']=!(-0x1*0x6f7+0x25*0xa9+0x8bb*-0x2),this['_registry']['off']('load',this['_onLoad'],this),this['_registry']['off']('error',this['_onError'],this),this['_failed']['length']?(this['_callback']&&this['_callback']['call'](this['_scope'],'Failed\x20to\x20'+'load\x20some\x20'+'assets',this['_failed']),this['fire']('error',this['_failed'])):(this['_callback']&&this['_callback']['call'](this['_scope']),this['fire']('load',Array['from'](this['_assets']))));}['_onLoad'](_0x474f9f){this['_loadingAs'+'sets']['has'](_0x474f9f)&&(this['fire']('progress',_0x474f9f),this['_loadingAs'+'sets']['delete'](_0x474f9f)),this['_loadingAs'+'sets']['size']===-0x53*0x71+0x30*0x69+0x10f3*0x1&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0x3*-0x629+0x106*0x16+-0x28ff);}['_onError'](_0x48b668,_0x49c9c3){this['_loadingAs'+'sets']['has'](_0x49c9c3)&&(this['_failed']['push'](_0x49c9c3),this['_loadingAs'+'sets']['delete'](_0x49c9c3)),this['_loadingAs'+'sets']['size']===0x104d+0x483*-0x6+0xac5&&setTimeout(()=>{this['_loadingCo'+'mplete']();},0x4*0x751+0x3ed*0x4+-0x2*0x167c);}['_onAddAsse'+'t'](_0x1d1b92){this['_waitingAs'+'sets']['delete'](_0x1d1b92),this['_assets']['add'](_0x1d1b92),_0x1d1b92['loaded']||(this['_loadingAs'+'sets']['add'](_0x1d1b92),this['_registry']['load'](_0x1d1b92));}['_waitForAs'+'set'](_0x4c036c){this['_waitingAs'+'sets']['add'](_0x4c036c),this['_registry']['once']('add:'+_0x4c036c,this['_onAddAsse'+'t'],this);}}const ch=[],Ck=[[],[],[]];class Pk extends fs{constructor(_0x213880,_0x3df16b){super(_0x213880),h(this,'viewBindGr'+'oups',[]),this['renderer']=_0x3df16b;}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x2f0079=>{_0x2f0079['defaultUni'+'formBuffer']['destroy'](),_0x2f0079['destroy']();}),this['viewBindGr'+'oups']['length']=-0x1ea*0xa+-0x639+0x195d;}['update'](_0x28a3bd,_0xbcff53,_0x205ed8,_0x2a7317){this['camera']=_0x28a3bd,this['scene']=_0xbcff53,this['layers']=_0x205ed8,this['mapping']=_0x2a7317;}['execute'](){const _0x287899=this['device'],{renderer:_0x30f051,camera:_0x15f8e1,scene:_0x19a49f,layers:_0x179f8a,mapping:_0x59190e,renderTarget:_0x4803f0}=this,_0x1a88e2=_0x19a49f['layers']['layerList'],_0x4c5c6a=_0x19a49f['layers']['subLayerEn'+'abled'],_0x3a9efd=_0x19a49f['layers']['subLayerLi'+'st'];for(let _0x1b1933=-0x12e0+0x2ab*-0x1+-0x158b*-0x1;_0x1b1933<_0x1a88e2['length'];_0x1b1933++){const _0x362d8f=_0x1a88e2[_0x1b1933];if(!(_0x179f8a&&_0x179f8a['indexOf'](_0x362d8f)<-0x577+-0xe5c*0x1+0x1d*0xaf)&&_0x362d8f['enabled']&&_0x4c5c6a[_0x1b1933]&&_0x362d8f['camerasSet']['has'](_0x15f8e1['camera'])){const _0x223ea5=_0x3a9efd[_0x1b1933];Q['pushGpuMar'+'ker'](_0x287899,_0x362d8f['name']+'('+(_0x223ea5?'TRANSP':'OPAQUE')+')'),_0x362d8f['_clearDept'+'hBuffer']&&_0x30f051['clear'](_0x15f8e1['camera'],!(0x8*0x19f+-0x33d*0x7+-0x3*-0x33c),!(-0xf19+0x657*-0x1+0x1570),!(0x2631*-0x1+-0x20b*-0x7+0x17e5));const _0x2b1744=_0x362d8f['meshInstan'+'ces'];for(let _0x53b637=0x1f7*0x11+0x1a37+0x1dcf*-0x2;_0x53b637<_0x2b1744['length'];_0x53b637++){const _0x24084a=_0x2b1744[_0x53b637];_0x24084a['pick']&&_0x24084a['transparen'+'t']===_0x223ea5&&(ch['push'](_0x24084a),_0x59190e['set'](_0x24084a['id'],_0x24084a));}ch['length']>0x1160+-0x23ee+0x128e&&(_0x19a49f['clusteredL'+'ightingEna'+'bled']&&_0x30f051['worldClust'+'ersAllocat'+'or']['empty']['activate'](),_0x30f051['setCameraU'+'niforms'](_0x15f8e1['camera'],_0x4803f0),_0x287899['supportsUn'+'iformBuffe'+'rs']&&_0x30f051['setupViewU'+'niformBuff'+'ers'](this['viewBindGr'+'oups'],_0x30f051['viewUnifor'+'mFormat'],_0x30f051['viewBindGr'+'oupFormat'],null),_0x30f051['renderForw'+'ard'](_0x15f8e1['camera'],_0x4803f0,ch,Ck,Fn,_0x2e7d59=>{_0x287899['setBlendSt'+'ate'](Ct['NOBLEND']);}),ch['length']=-0x1*0x94b+-0x1*-0x123e+-0x8f3),Q['popGpuMark'+'er'](_0x287899);}}}}const sf=new Set(),Mk=new ae();let eU=class{constructor(_0x4336b1,_0x499e74,_0x464cfa){h(this,'renderTarg'+'et',null),h(this,'mapping',new Map()),h(this,'deviceVali'+'d',!(-0x4*-0x48b+0x20ee+0x1*-0x331a)),(M['assert'](_0x4336b1),this['renderer']=_0x4336b1['renderer'],this['device']=_0x4336b1['graphicsDe'+'vice'],this['renderPass']=new Pk(this['device'],_0x4336b1['renderer']),this['width']=-0x3*0x662+-0xfae+0x22d4,this['height']=0x1*-0x10d5+-0x1b0f+0x2be4,this['resize'](_0x499e74,_0x464cfa),this['device']['on']('destroy',()=>{this['deviceVali'+'d']=!(0x1*0x113b+0x425*0x4+-0x21ce);}));}['getSelecti'+'on'](_0x2f12aa,_0x4ed749,_0x2f94e8=-0x4b9+0x2676+-0x1fc*0x11,_0x10ac2c=-0x10f*0x5+0xc*0x8e+-0x3*0x74){const _0x599500=this['device'];if(_0x599500['isWebGPU'])return M['errorOnce']('pc.Picker#'+'getSelecti'+'on\x20is\x20not\x20'+'supported\x20'+'on\x20WebGPU,'+'\x20use\x20pc.Pi'+'cker#getSe'+'lectionAsy'+'nc\x20instead'+'.'),[];M['assert'](typeof _0x2f12aa!='object','Picker.get'+'Selection:'+'param\x20\x27rec'+'t\x27\x20is\x20depr'+'ecated,\x20us'+'e\x20\x27x,\x20y,\x20w'+'idth,\x20heig'+'ht\x27\x20instea'+'d.'),_0x4ed749=this['renderTarg'+'et']['height']-(_0x4ed749+_0x10ac2c);const _0x394b9b=this['sanitizeRe'+'ct'](_0x2f12aa,_0x4ed749,_0x2f94e8,_0x10ac2c);_0x599500['setRenderT'+'arget'](this['renderTarg'+'et']),_0x599500['updateBegi'+'n']();const _0x353be2=new Uint8Array((0x1*-0x2661+-0x12aa+0x390f)*_0x394b9b['z']*_0x394b9b['w']);return _0x599500['readPixels'](_0x394b9b['x'],_0x394b9b['y'],_0x394b9b['z'],_0x394b9b['w'],_0x353be2),_0x599500['updateEnd'](),this['decodePixe'+'ls'](_0x353be2,this['mapping']);}['getSelecti'+'onAsync'](_0x172f8e,_0x5154b5,_0x180cc6=0xf00+0xcfd+0x6*-0x4aa,_0x449d0d=0x17*-0xd6+-0x31*0xd+-0x116*-0x14){var _0x24d5e5;(_0x24d5e5=this['device'])!=null&&_0x24d5e5['isWebGL2']&&(_0x5154b5=this['renderTarg'+'et']['height']-(_0x5154b5+_0x449d0d));const _0x5a1620=this['sanitizeRe'+'ct'](_0x172f8e,_0x5154b5,_0x180cc6,_0x449d0d);return this['renderTarg'+'et']['colorBuffe'+'r']['read'](_0x5a1620['x'],_0x5a1620['y'],_0x5a1620['z'],_0x5a1620['w'],{'renderTarget':this['renderTarg'+'et'],'immediate':!(0xe*0x9c+0x759*-0x5+0x57*0x53)})['then'](_0x2ed5f6=>this['decodePixe'+'ls'](_0x2ed5f6,this['mapping']));}['sanitizeRe'+'ct'](_0x2faa1e,_0x4915e8,_0x26bc2f,_0x304863){const _0x5ff9d0=this['renderTarg'+'et']['width'],_0x47b1ef=this['renderTarg'+'et']['height'];return _0x2faa1e=Y['clamp'](Math['floor'](_0x2faa1e),-0xc77*-0x2+0x7*0xb+-0x193b*0x1,_0x5ff9d0-(-0x242c*-0x1+0x1b26*0x1+-0x3f51)),_0x4915e8=Y['clamp'](Math['floor'](_0x4915e8),0x21df+0x2452+-0x4631,_0x47b1ef-(0x19*0xb2+-0x1*-0x15c1+-0x1*0x2722)),_0x26bc2f=Math['floor'](Math['max'](_0x26bc2f,-0x2165+-0x8cd+0x2a33)),_0x26bc2f=Math['min'](_0x26bc2f,_0x5ff9d0-_0x2faa1e),_0x304863=Math['floor'](Math['max'](_0x304863,-0xa4d*0x2+-0x1+0x4*0x527)),_0x304863=Math['min'](_0x304863,_0x47b1ef-_0x4915e8),Mk['set'](_0x2faa1e,_0x4915e8,_0x26bc2f,_0x304863);}['decodePixe'+'ls'](_0x4db387,_0x30a57f){const _0x4db1ae=[];if(this['deviceVali'+'d']){const _0x335195=_0x4db387['length'];for(let _0x3dfdf4=-0x221c+-0x4*-0x34f+-0xa70*-0x2;_0x3dfdf4<_0x335195;_0x3dfdf4+=-0x1679+-0x1502*0x1+-0x28f*-0x11){const _0x1414ec=_0x4db387[_0x3dfdf4+(0x4*-0x572+-0xe4b*0x1+-0x2413*-0x1)],_0x46a889=_0x4db387[_0x3dfdf4+(0x21e6+0xae2*0x3+-0x428b)],_0xe6c623=_0x4db387[_0x3dfdf4+(-0x1091+-0x1d93*-0x1+-0xd00)],_0x15af43=(_0x4db387[_0x3dfdf4+(-0x1a81+-0x21*-0x12a+0x5f3*-0x2)]<<-0x2*-0x10b2+0x1*0x1c7c+0x1ee4*-0x2|_0x1414ec<<-0x1*0x2507+-0x2*0x431+0x2d79|_0x46a889<<-0x2243*0x1+-0x9*0x263+-0x16*-0x289|_0xe6c623)>>>0x1*0x142f+-0x26ad+0x127e;_0x15af43!==-0x2b*-0x52f2095+-0x3e4e9b49*0x3+0x5*0x2c0044f7&&sf['add'](_0x30a57f['get'](_0x15af43));}sf['forEach'](_0x3bc8fd=>{_0x3bc8fd&&_0x4db1ae['push'](_0x3bc8fd);}),sf['clear']();}return _0x4db1ae;}['allocateRe'+'nderTarget'](){const _0x46eb0f=new _e(this['device'],{'format':Oe,'width':this['width'],'height':this['height'],'mipmaps':!(-0xb3a*0x3+-0xcc8*-0x3+-0x1*0x4a9),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':'pick'});this['renderTarg'+'et']=new vt({'colorBuffer':_0x46eb0f,'depth':!(-0x567+0x3bc*0x2+-0x1*0x211)});}['releaseRen'+'derTarget'](){this['renderTarg'+'et']&&(this['renderTarg'+'et']['destroyTex'+'tureBuffer'+'s'](),this['renderTarg'+'et']['destroy'](),this['renderTarg'+'et']=null);}['prepare'](_0x15311a,_0x5c30a0,_0x3eaf50){_0x3eaf50 instanceof Dr&&(_0x3eaf50=[_0x3eaf50]),(!this['renderTarg'+'et']||this['width']!==this['renderTarg'+'et']['width']||this['height']!==this['renderTarg'+'et']['height'])&&(this['releaseRen'+'derTarget'](),this['allocateRe'+'nderTarget']()),this['mapping']['clear']();const _0xf03728=this['renderPass'];_0xf03728['init'](this['renderTarg'+'et']),_0xf03728['colorOps']['clearValue']=ie['WHITE'],_0xf03728['colorOps']['clear']=!(0x23e8+-0x36*-0x49+0x42*-0xc7),_0xf03728['depthStenc'+'ilOps']['clearDepth']=!(0x206d+0xc4b+-0x597*0x8),_0xf03728['update'](_0x15311a,_0x5c30a0,_0x3eaf50,this['mapping']),_0xf03728['render']();}['resize'](_0x5d9a5a,_0x4ef0c2){this['width']=Math['floor'](_0x5d9a5a),this['height']=Math['floor'](_0x4ef0c2);}};class Ik{constructor(_0x5d984e){this['_frameInde'+'x']=0x3*0x58f+0x8*0xd4+-0x174d*0x1,this['_frameTimi'+'ngs']=[],this['_timings']=[],this['_prevTimin'+'gs']=[],this['unitsName']='ms',this['decimalPla'+'ces']=-0xc1f*0x2+-0xc30+0x246f,this['enabled']=!(-0x19e0+-0xa13*0x1+0x23f3),_0x5d984e['on']('frameupdat'+'e',this['begin']['bind'](this,'update')),_0x5d984e['on']('framerende'+'r',this['mark']['bind'](this,'render')),_0x5d984e['on']('frameend',this['mark']['bind'](this,'other'));}['begin'](_0x31c5b5){if(!this['enabled'])return;this['_frameInde'+'x']<this['_frameTimi'+'ngs']['length']&&this['_frameTimi'+'ngs']['splice'](this['_frameInde'+'x']);const _0x2f3999=this['_prevTimin'+'gs'];this['_prevTimin'+'gs']=this['_timings'],this['_timings']=this['_frameTimi'+'ngs'],this['_frameTimi'+'ngs']=_0x2f3999,this['_frameInde'+'x']=-0x26e*0x2+0x19ff+-0x1523,this['mark'](_0x31c5b5);}['mark'](_0x3427b3){if(!this['enabled'])return;const _0x5d41fd=de();if(this['_frameInde'+'x']>0x6bc+0x1*-0x4bd+0x49*-0x7){const _0x45db43=this['_frameTimi'+'ngs'][this['_frameInde'+'x']-(0x244a+0x2*0xaca+-0x39dd)];_0x45db43[0x1bf5+-0x495+-0x1f*0xc1]=_0x5d41fd-_0x45db43[-0x75d+0x1442+-0x12c*0xb];}else{if(this['_timings']['length']>0x1bb3+-0xb36*0x1+-0x107d){const _0x639cbc=this['_timings'][this['_timings']['length']-(-0x2211*0x1+0x5a6*0x1+0x6b*0x44)];_0x639cbc[0x17b8+0x24c1+0xc18*-0x5]=_0x5d41fd-_0x639cbc[-0x2392+0x1834+0xb5f];}}if(this['_frameInde'+'x']>=this['_frameTimi'+'ngs']['length'])this['_frameTimi'+'ngs']['push']([_0x3427b3,_0x5d41fd]);else{const _0x480f3f=this['_frameTimi'+'ngs'][this['_frameInde'+'x']];_0x480f3f[0x65*-0x31+-0xd23+0x2078]=_0x3427b3,_0x480f3f[0x2*0x5e0+-0x11b*-0x1f+-0x2e04]=_0x5d41fd;}this['_frameInde'+'x']++;}get['timings'](){return this['_timings']['slice'](-0x1e9e+-0x7*-0x20c+0x2*0x825,-(0x2*-0x5ec+-0x1f*0x49+0x14b0))['map'](_0x3d738f=>_0x3d738f[0x1617+0x1*0x1edb+-0x1*0x34f1]);}}class Dk{constructor(_0x4c23b6){this['device']=_0x4c23b6,_0x4c23b6['gpuProfile'+'r']['enabled']=!(-0x2629+-0x4*0x8c3+0x4935),this['enabled']=!(-0x195d+0xace*0x1+-0x1*-0xe8f),this['unitsName']='ms',this['decimalPla'+'ces']=0x15aa+0x491*-0x1+0x223*-0x8,this['_timings']=[];}get['timings'](){return this['_timings'][0x1580+0x12b6+-0x2836]=this['device']['gpuProfile'+'r']['_frameTime'],this['_timings'];}}class Lk{constructor(_0x85878f,_0x5e3827,_0xc841d3,_0x2daca3,_0xe236cf){this['app']=_0x85878f,this['values']=[],this['statNames']=_0x5e3827,this['statNames']['length']>0x4ef+-0x19*0x62+-0xee*-0x5&&(this['statNames']['length']=0x11c6+0x13ef+0x78a*-0x5),this['unitsName']=_0x2daca3,this['decimalPla'+'ces']=_0xc841d3,this['multiplier']=_0xe236cf||0x18d3+-0xf*-0x11c+-0x2976;const _0x5af6d9=(_0x4cc7b3,_0x5e44c5)=>_0x4cc7b3['split']('.')['reduce']((_0x25d2a0,_0x474ad4)=>_0x25d2a0?_0x25d2a0[_0x474ad4]:null,_0x5e44c5||this);_0x85878f['on']('frameupdat'+'e',_0x17d210=>{for(let _0x40fa8d=0x1*-0x13d+0x796+-0x659;_0x40fa8d<this['statNames']['length'];_0x40fa8d++)this['values'][_0x40fa8d]=_0x5af6d9(this['statNames'][_0x40fa8d],this['app']['stats'])*this['multiplier'];});}get['timings'](){return this['values'];}}class rf{constructor(_0x4d2862,_0x564e6e,_0x1c2b66,_0x1dbf39,_0x1baea6){this['app']=_0x564e6e,this['name']=_0x4d2862,this['device']=_0x564e6e['graphicsDe'+'vice'],this['timer']=_0x1baea6,this['watermark']=_0x1c2b66,this['enabled']=!(-0x2701+-0x82+0x2784),this['textRefres'+'hRate']=_0x1dbf39,this['avgTotal']=0xda5+-0x8a4+-0xb7*0x7,this['avgTimer']=0x3d*0x8c+0xe9b*-0x2+-0x2*0x213,this['avgCount']=0x13*0x63+-0x2*0xf9+0x1cd*-0x3,this['timingText']='',this['texture']=null,this['yOffset']=0x123c+-0x1165+-0xd7,this['cursor']=-0x2*0x481+0x17b1+-0xb3*0x15,this['sample']=new Uint8ClampedArray(0x3dd+-0x138+0x2a1*-0x1),this['sample']['set']([-0x5*0x1a1+-0xbe9+-0x11*-0x12e,-0x1b+-0x18*0x90+-0x183*-0x9,-0x1f*-0xa6+-0xa1e+-0x9fc,-0x1723+-0x249c+0x3cbe]),this['counter']=-0x505+0x15f6+-0x10f1,this['app']['on']('frameupdat'+'e',this['update'],this);}['destroy'](){this['app']['off']('frameupdat'+'e',this['update'],this);}['loseContex'+'t'](){this['timer']&&typeof this['timer']['loseContex'+'t']=='function'&&this['timer']['loseContex'+'t']();}['update'](_0x4eca9f){const _0x34562b=this['timer']['timings'],_0x5a631e=_0x34562b['reduce']((_0x17c3f0,_0x2ce7fa)=>_0x17c3f0+_0x2ce7fa,0x42e*0x8+0x599+-0x2709*0x1);if(this['avgTotal']+=_0x5a631e,this['avgTimer']+=_0x4eca9f,this['avgCount']++,this['avgTimer']>this['textRefres'+'hRate']&&(this['timingText']=(this['avgTotal']/this['avgCount'])['toFixed'](this['timer']['decimalPla'+'ces']),this['avgTimer']=-0x18d*-0x17+-0x1eb7+-0x13d*0x4,this['avgTotal']=0x1702+0x1*0x4f9+-0xd*0x227,this['avgCount']=0x3*0x94a+0x21c4*0x1+0x2ae*-0x17),this['enabled']){let _0x3c6cab=-0x79c*-0x5+0x160b+-0x1*0x3c17;const _0x59f5ca=(-0x2*-0xdfc+0x1d9*0x13+0x1a*-0x26d+0.5)*this['watermark'];for(let _0x38d97a=-0xebb+-0x229e+-0x3159*-0x1;_0x38d97a<_0x34562b['length'];++_0x38d97a)_0x3c6cab+=Math['floor'](_0x34562b[_0x38d97a]/_0x59f5ca*(0xe01+-0x1736*-0x1+0x26*-0xf4)),this['sample'][_0x38d97a]=_0x3c6cab;this['sample'][0x5*0x502+0x2*0xfc1+0x29*-0x161]=this['watermark']/_0x59f5ca*(0x1f46+0x498+-0x22df),this['texture']['lock']()['set'](this['sample'],(this['cursor']+this['yOffset']*this['texture']['width'])*(-0x163d+-0x1*0xfd7+0x2618)),this['texture']['unlock'](),this['cursor']++,this['cursor']===this['texture']['width']&&(this['cursor']=0x1*-0x2089+0x1b95*0x1+-0x2*-0x27a);}}['render'](_0x3b5cd3,_0x17aa1e,_0x33f7bc,_0x1ca4aa,_0x2851b8){_0x3b5cd3['quad'](_0x17aa1e+_0x1ca4aa,_0x33f7bc,-_0x1ca4aa,_0x2851b8,this['enabled']?this['cursor']:0x694+-0x30f+-0x385,this['enabled']?0x2472+-0x1d3a+-0x3*0x268+0.5+this['yOffset']:this['texture']['height']-(-0x1*-0xec2+0x1*-0xc07+-0x2ba),-_0x1ca4aa,0xcbc*0x3+-0x1388+-0x12ac,this['texture'],0x127d+-0xf38+-0x345);}}class Rk{constructor(_0x327d11,_0x2374f0){const _0x44db48=_0x42a91f=>{_0x42a91f['font']='10px\x20\x22Luci'+'da\x20Console'+'\x22,\x20Monaco,'+'\x20monospace',_0x42a91f['textAlign']='left',_0x42a91f['textBaseli'+'ne']='alphabetic';},_0xb0ffd3=_0x12a825=>_0x12a825==='.'||_0x12a825['length']===0xae1+-0xc1b+0x3f*0x5&&_0x12a825['charCodeAt'](0x1871+-0xcd6+-0xb9b)>=0x4ad+0x1c*-0x67+0x6c7&&_0x12a825['charCodeAt'](0x12ac*0x2+0x1694+-0x3bec)<=0x100+-0x1*-0x49+-0x110,_0x257305=document['createElem'+'ent']('canvas'),_0x558200=_0x257305['getContext']('2d',{'alpha':!(-0x4b*-0x74+-0xb20+-0x16dc)});_0x44db48(_0x558200);const _0x4e6e85=new Map(),_0x47281b=-0x5f*-0x39+0x726+0xa*-0x2d4,_0x88e790=0x1602+-0x421*0x2+-0x4*0x2f0;let _0x342e5f=_0x47281b,_0x1a1b7c=_0x47281b;_0x2374f0['forEach'](_0x3626bf=>{const _0x40eedd=_0x558200['measureTex'+'t'](_0x3626bf),_0x59150d=Math['ceil'](-_0x40eedd['actualBoun'+'dingBoxLef'+'t']),_0x2702e2=Math['ceil'](_0x40eedd['actualBoun'+'dingBoxRig'+'ht']),_0x2da0db=Math['ceil'](_0x40eedd['actualBoun'+'dingBoxAsc'+'ent']),_0x136e0e=Math['ceil'](_0x40eedd['actualBoun'+'dingBoxDes'+'cent']),_0x1866d9=_0x59150d+_0x2702e2,_0x322dc7=_0x2da0db+_0x136e0e;_0x342e5f+_0x1866d9+_0x47281b>=_0x88e790&&(_0x342e5f=_0x47281b,_0x1a1b7c+=-0xfb*0x6+-0x1*0x1eb2+-0x5*-0x754),_0x4e6e85['set'](_0x3626bf,{'l':_0x59150d,'r':_0x2702e2,'a':_0x2da0db,'d':_0x136e0e,'w':_0x1866d9,'h':_0x322dc7,'x':_0x342e5f,'y':_0x1a1b7c}),_0x342e5f+=_0x1866d9+_0x47281b;}),_0x257305['width']=0x65*-0x56+0x6*-0xf0+0x36*0xc5,_0x257305['height']=Y['nextPowerO'+'fTwo'](_0x1a1b7c+(-0x647*-0x1+-0x7*0xe+0x1*-0x5d5)+_0x47281b),_0x44db48(_0x558200),_0x558200['fillStyle']='rgb(0,\x200,\x20'+'0)',_0x558200['fillRect'](-0x11*0x235+0x1d6c+0x819,-0x1*0x31d+-0x3*0x4e9+0x11d8,_0x257305['width'],_0x257305['height']),_0x4e6e85['forEach']((_0x2de2e9,_0x2bdee3)=>{_0x558200['fillStyle']=_0xb0ffd3(_0x2bdee3)?'rgb(255,\x202'+'55,\x20255)':'rgb(170,\x201'+'70,\x20170)',_0x558200['fillText'](_0x2bdee3,_0x2de2e9['x']-_0x2de2e9['l'],_0x2de2e9['y']+_0x2de2e9['a']);}),this['placements']=_0x4e6e85;const _0x34dffd=_0x558200['getImageDa'+'ta'](-0x3*0x907+0x2212+-0x6fd*0x1,0x4bb+-0x1691+0x11d6,_0x257305['width'],_0x257305['height'])['data'];for(let _0x19301f=-0x232e+-0xf14+0x3242;_0x19301f<_0x34dffd['length'];_0x19301f+=0xb5*-0x20+0x3*0x45b+-0x993*-0x1)_0x34dffd[_0x19301f+(0x6*-0xe8+-0xaf+0x622)]=_0x34dffd[_0x19301f+(-0xea9+0x26ae+-0x1805)],_0x34dffd[_0x19301f+(-0x5ab*0x2+0x1*-0xfb0+0x481*0x6)]=0xe70+0xbd7+-0x1948,_0x34dffd[_0x19301f+(0x150+-0x11f9+0x10aa)]=0x830+0x2551+-0xd3*0x36,_0x34dffd[_0x19301f+(0x173+-0x25af+0x243e)]=0x1b93+-0x1*-0xb1b+-0x25af;this['texture']=new _e(_0x327d11,{'name':'mini-stats'+'-word-atla'+'s','width':_0x257305['width'],'height':_0x257305['height'],'mipmaps':!(-0x3b*0xa9+0x1213+0x14e1),'minFilter':Te,'magFilter':Te,'levels':[_0x34dffd]});}['destroy'](){this['texture']['destroy'](),this['texture']=null;}['render'](_0x170e73,_0x45c75c,_0x1b0688,_0x394d9c){const _0xc0dd87=this['placements']['get'](_0x45c75c);return _0xc0dd87?(_0x170e73['quad'](_0x1b0688+_0xc0dd87['l']-(-0x9fc+0x1fa*0x7+-0x3d9),_0x394d9c-_0xc0dd87['d']+(-0x236e+-0xba9*0x2+0x485*0xd),_0xc0dd87['w']+(-0x1043+-0x14c*-0x8+0x5e5),_0xc0dd87['h']+(0x1bfd*-0x1+0x95*0x25+0x676),_0xc0dd87['x']-(0x5a5*-0x2+-0x153*0xb+0x19dc),this['texture']['height']-_0xc0dd87['y']-_0xc0dd87['h']-(0x674+0x1384+0x17*-0x121),void(-0x1986+-0x210d+0x3a93),void(-0x7c0+0x1c95+0x14d5*-0x1),this['texture'],0x18d4*-0x1+0x777+0x115e),_0xc0dd87['w']):-0x1286+0x997*0x2+-0x7*0x18;}}const Ok='\x0a\x20\x20\x20\x20attri'+'bute\x20vec3\x20'+'vertex_pos'+'ition;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20un'+'normalized'+'\x20xy,\x20word\x20'+'flag\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_texCoord0'+';\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20unnormal'+'ized\x20textu'+'re\x20space\x20u'+'v,\x20normali'+'zed\x20uv\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec4\x20uv0;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20float\x20wo'+'rdFlag;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion.xy\x20*\x202'+'.0\x20-\x201.0,\x20'+'0.5,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20verte'+'x_texCoord'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20wordFlag\x20'+'=\x20vertex_p'+'osition.z;'+'\x0a\x20\x20\x20\x20}\x0a',Fk='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec3f;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'unnormaliz'+'ed\x20xy,\x20wor'+'d\x20flag\x0a\x20\x20\x20'+'\x20attribute'+'\x20vertex_te'+'xCoord0:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20unno'+'rmalized\x20t'+'exture\x20spa'+'ce\x20uv,\x20nor'+'malized\x20uv'+'\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'varying\x20wo'+'rdFlag:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x20fn\x20v'+'ertexMain('+'input\x20:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output\x20:\x20'+'VertexOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4(input'+'.vertex_po'+'sition.xy\x20'+'*\x202.0\x20-\x201.'+'0,\x200.5,\x201.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.u'+'v0\x20=\x20input'+'.vertex_te'+'xCoord0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.wordFl'+'ag\x20=\x20input'+'.vertex_po'+'sition.z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',Nk='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20uv'+'0;\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20wordFlag;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'lr;\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20grap'+'hTex;\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20wo'+'rdsTex;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in\x20(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20graph'+'Sample\x20=\x20t'+'exture2D(g'+'raphTex,\x20u'+'v0.xy);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20graph;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv0.w\x20<\x20g'+'raphSample'+'.r)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20grap'+'h\x20=\x20vec4(0'+'.7,\x200.2,\x200'+'.2,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20graph\x20=\x20'+'vec4(0.2,\x20'+'0.7,\x200.2,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20else\x20i'+'f\x20(uv0.w\x20<'+'\x20graphSamp'+'le.b)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gr'+'aph\x20=\x20vec4'+'(0.2,\x200.2,'+'\x200.7,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20gra'+'ph\x20=\x20vec4('+'0.0,\x200.0,\x20'+'0.0,\x201.0\x20-'+'\x200.25\x20*\x20si'+'n(uv0.w\x20*\x20'+'3.14159));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20words'+'\x20=\x20texture'+'2D(wordsTe'+'x,\x20vec2(uv'+'0.x,\x201.0\x20-'+'\x20uv0.y));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20mix(gr'+'aph,\x20words'+',\x20wordFlag'+')\x20*\x20clr;\x0a\x20'+'\x20\x20\x20}\x0a',kk='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c4f;\x0a\x20\x20\x20\x20v'+'arying\x20wor'+'dFlag:\x20f32'+';\x0a\x0a\x20\x20\x20\x20uni'+'form\x20clr:\x20'+'vec4f;\x0a\x0a\x20\x20'+'\x20\x20var\x20grap'+'hTex\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20graphTex'+'_sampler\x20:'+'\x20sampler;\x0a'+'\x0a\x20\x20\x20\x20var\x20w'+'ordsTex\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20words'+'Tex_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20u'+'v0:\x20vec4f\x20'+'=\x20input.uv'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20graph'+'Sample:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'graphTex,\x20'+'graphTex_s'+'ampler,\x20uv'+'0.xy);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'graph:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(uv0.'+'w\x20<\x20graphS'+'ample.r)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20graph\x20='+'\x20vec4f(0.7'+',\x200.2,\x200.2'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20graph\x20'+'=\x20vec4f(0.'+'2,\x200.7,\x200.'+'2,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(uv'+'0.w\x20<\x20grap'+'hSample.b)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20graph'+'\x20=\x20vec4f(0'+'.2,\x200.2,\x200'+'.7,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'raph\x20=\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x201.'+'0\x20-\x200.25\x20*'+'\x20sin(uv0.w'+'\x20*\x203.14159'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20wor'+'ds:\x20vec4f\x20'+'=\x20textureS'+'ample(word'+'sTex,\x20word'+'sTex_sampl'+'er,\x20vec2f('+'uv0.x,\x201.0'+'\x20-\x20uv0.y))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20mix(grap'+'h,\x20words,\x20'+'input.word'+('Flag)\x20*\x20un'+'iform.clr;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a');class Uk{constructor(_0x3c68d0,_0x43143a=0x59a*-0x3+0x23b4*-0x1+-0x1*-0x3682){const _0x3a638d=new zt(_0x3c68d0,[{'semantic':Pe,'components':0x3,'type':Be},{'semantic':Yt,'components':0x4,'type':Be}]),_0x308c44=new Uint16Array(_0x43143a*(-0xc*0x20a+0x1465+0x419));for(let _0x49f742=-0x16b0+0x19c3*0x1+-0x313;_0x49f742<_0x43143a;++_0x49f742)_0x308c44[_0x49f742*(0x26*-0xb5+-0x1d2c+-0x45*-0xd0)+(-0xd*-0x223+-0x35f+-0x1868)]=_0x49f742*(-0x18cb+0x3f5*0x3+0xcf0),_0x308c44[_0x49f742*(0x1*-0x1043+-0x3d*-0x35+0x3a8)+(0x196+0x207f+-0x2214)]=_0x49f742*(0x435*-0x1+-0x1579+-0x17*-0x11e)+(0x9*0x192+0xeb7+0x1a*-0x11c),_0x308c44[_0x49f742*(-0x247e+-0xfd3+0x3457)+(0x1*0x1396+0x8fa*-0x4+0x1054)]=_0x49f742*(0xad*0x39+-0x3*-0x169+-0x2abc)+(0x1221+0x3ba+-0x15d9),_0x308c44[_0x49f742*(-0x1ac2+0xc19+0xeaf)+(-0x224e+0x75d+0x1af4)]=_0x49f742*(-0xc05+0x37*-0x5+0xd1c),_0x308c44[_0x49f742*(0x1532+0x1*-0xb85+-0x9a7)+(-0x1829+-0x15a*0x2+0x1ae1)]=_0x49f742*(0xca*-0x1+0x16e5+-0x1617)+(-0xf*0x58+-0x4ea*0x5+0xad*0x2c),_0x308c44[_0x49f742*(-0xd7e+0x269*0x4+0x3e0)+(-0x1*-0x19a4+0x2130+-0x3acf)]=_0x49f742*(-0xe4e+-0x1b05*-0x1+-0xcb3*0x1)+(0x453+0x2112+0x6*-0x63b);this['device']=_0x3c68d0,this['buffer']=new xs(_0x3c68d0,_0x3a638d,_0x43143a*(0x1*-0x25e5+0x76b*-0x4+0x4395),{'usage':oS}),this['data']=new Float32Array(this['buffer']['numBytes']/(-0x1b7f+0x6*-0x28e+-0x1*-0x2ad7)),this['indexBuffe'+'r']=new dr(_0x3c68d0,zi,_0x43143a*(0xdbf+0x2eb+-0x10a4),ls,_0x308c44),this['prim']={'type':zs,'indexed':!(0x2d*0x84+-0xb26*0x2+-0xe8),'base':0x0,'baseVertex':0x0,'count':0x0},this['quads']=0xa63*0x2+-0x2221+0x107*0xd,this['mesh']=new Ge(_0x3c68d0),this['mesh']['vertexBuff'+'er']=this['buffer'],this['mesh']['indexBuffe'+'r'][0x1f63+0x2*0x11d9+-0x4315]=this['indexBuffe'+'r'],this['mesh']['primitive']=[this['prim']];const _0x308536=new In({'uniqueName':'MiniStats','vertexGLSL':Ok,'fragmentGLSL':Nk,'vertexWGSL':Fk,'fragmentWGSL':kk,'attributes':{'vertex_position':Pe,'vertex_texCoord0':Yt}});this['material']=_0x308536,_0x308536['cull']=xt,_0x308536['depthState']=Kt['NODEPTH'],_0x308536['blendState']=new Ct(!(-0xac7*-0x1+-0x7*-0x3f3+-0x1336*0x2),as,yc,vc,as,Dt,Dt),_0x308536['update'](),this['meshInstan'+'ce']=new We(this['mesh'],_0x308536,new He('MiniStatsM'+'esh')),this['uniforms']={'clr':new Float32Array(0xf87+-0x1929+0x9a6)},this['targetSize']={'width':_0x3c68d0['width'],'height':_0x3c68d0['height']};}['quad'](_0x5b3220,_0x5f5545,_0x3ddb66,_0x5aac3b,_0x582359,_0x33c8c7,_0x1717f7,_0xfbeba6,_0x474df0,_0x238b7e=0xf0d*0x1+-0x1d2+0x3*-0x469){const _0x5de6a6=this['targetSize']['width'],_0x1148ac=this['targetSize']['height'],_0x326da6=_0x5b3220/_0x5de6a6,_0x407c9d=_0x5f5545/_0x1148ac,_0x5eea3b=(_0x5b3220+_0x3ddb66)/_0x5de6a6,_0x111664=(_0x5f5545+_0x5aac3b)/_0x1148ac,_0x33d71e=_0x474df0['width'],_0x4dd834=_0x474df0['height'],_0x59c36d=_0x582359/_0x33d71e,_0x434de1=_0x33c8c7/_0x4dd834,_0x4b16d4=(_0x582359+(_0x1717f7??_0x3ddb66))/_0x33d71e,_0x5c892b=(_0x33c8c7+(_0xfbeba6??_0x5aac3b))/_0x4dd834;this['data']['set']([_0x326da6,_0x407c9d,_0x238b7e,_0x59c36d,_0x434de1,0x13*0x124+-0x1305+-0x2a7,-0x247e+0x1f8f+0x4ef,_0x5eea3b,_0x407c9d,_0x238b7e,_0x4b16d4,_0x434de1,-0xf11+-0x7*-0x95+-0x1*-0xaff,-0x951+-0x2368+-0x2cb9*-0x1,_0x5eea3b,_0x111664,_0x238b7e,_0x4b16d4,_0x5c892b,-0xaca+0x119*0xe+-0x493,0xb5*-0xe+0x2c5*0x1+-0x2*-0x391,_0x326da6,_0x111664,_0x238b7e,_0x59c36d,_0x5c892b,-0x6*-0x61c+-0xd3*0x24+-0x6fc,-0x299+0x1a3b*0x1+-0x17a1],(-0x1311+0xec2*-0x1+-0x1ff*-0x11)*this['quads']),this['quads']++,this['prim']['count']+=0x1257+0x1*0xaf9+0x2e*-0xa3;}['startFrame'](){this['quads']=0x1449*0x1+0xa8f*0x1+-0x3*0xa48,this['prim']['count']=0xc*-0x306+-0xbf*-0x5+0x208d*0x1,this['targetSize']['width']=this['device']['canvas']['scrollWidt'+'h'],this['targetSize']['height']=this['device']['canvas']['scrollHeig'+'ht'];}['render'](_0x1365a6,_0x19019f,_0x2eb35b,_0xd26479,_0x26e31c,_0xd05516){this['buffer']['setData'](this['data']['buffer']),this['uniforms']['clr']['set'](_0x26e31c,-0x10c6+-0xe43+0x1f09),this['material']['setParamet'+'er']('clr',this['uniforms']['clr']),this['material']['setParamet'+'er']('graphTex',_0x2eb35b),this['material']['setParamet'+'er']('wordsTex',_0xd26479),_0x1365a6['drawMeshIn'+'stance'](this['meshInstan'+'ce'],_0x19019f);}}class Xv{constructor(_0x4e91ba,_0x106f88){const _0x159177=_0x4e91ba['graphicsDe'+'vice'];this['deviceHeig'+'ht']=_0x159177['height']/_0x159177['maxPixelRa'+'tio'],_0x106f88={...Xv['getDefault'+'Options'](),..._0x106f88},this['options']=_0x106f88,this['initGraphs'](_0x4e91ba,_0x159177,_0x106f88);const _0x1ac517=new Set(['','ms','0','1','2','3','4','5','6','7','8','9','.']['concat'](this['graphs']['map'](_0x3ed7d3=>_0x3ed7d3['name']))['concat'](_0x106f88['stats']?_0x106f88['stats']['map'](_0x440db9=>_0x440db9['unitsName']):[])['filter'](_0xc0a91c=>!!_0xc0a91c));this['wordAtlas']=new Rk(_0x159177,_0x1ac517),this['sizes']=_0x106f88['sizes'],this['_activeSiz'+'eIndex']=_0x106f88['startSizeI'+'ndex'];const _0x46e563=document['createElem'+'ent']('div');_0x46e563['setAttribu'+'te']('id','mini-stats'),_0x106f88['position']==='top'?_0x46e563['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';':_0x46e563['style']['cssText']='position:f'+'ixed;botto'+'m:0;left:0'+';backgroun'+'d:transpar'+'ent;',_0x46e563['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';',document['body']['appendChil'+'d'](_0x46e563),_0x46e563['addEventLi'+'stener']('mouseenter',_0x3dd50e=>{this['opacity']=0x2f6*-0x4+-0x1151+0x1d2a;}),_0x46e563['addEventLi'+'stener']('mouseleave',_0x42d1a0=>{this['opacity']=-0x1319+-0x3d2*0x2+-0x25*-0xb9+0.7;}),_0x46e563['addEventLi'+'stener']('click',_0x2bb15d=>{_0x2bb15d['preventDef'+'ault'](),this['_enabled']&&(this['activeSize'+'Index']=(this['activeSize'+'Index']+(0x3*0x81d+0x113d*-0x1+-0x719))%this['sizes']['length'],this['resize'](this['sizes'][this['activeSize'+'Index']]['width'],this['sizes'][this['activeSize'+'Index']]['height'],this['sizes'][this['activeSize'+'Index']]['graphs']));}),_0x159177['on']('resizecanv'+'as',this['updateDiv'],this),_0x159177['on']('losecontex'+'t',this['loseContex'+'t'],this),_0x4e91ba['on']('postrender',this['postRender'],this),this['app']=_0x4e91ba,this['drawLayer']=_0x4e91ba['scene']['layers']['getLayerBy'+'Id'](nl),this['device']=_0x159177,this['render2d']=new Uk(_0x159177),this['div']=_0x46e563,this['width']=0x67+-0x1200+0x1199*0x1,this['height']=0xbe3+0x2d8*0x8+-0x22a3,this['gspacing']=0x7*-0xd6+0xfaa+-0x9ce,this['clr']=[0x1a12+-0x6*0x2b+-0x190f,0x63*0x33+-0x1*-0x25d5+0x3*-0x132f,0x6*-0x5e0+-0x1813*-0x1+0xb2e,-0x1f6d+0xa67+-0x1*-0x1506+0.5],this['_enabled']=!(0x17ff+0x41*-0x8b+0xb4c),this['activeSize'+'Index']=this['_activeSiz'+'eIndex'];}['destroy'](){this['device']['off']('resizecanv'+'as',this['updateDiv'],this),this['device']['off']('losecontex'+'t',this['loseContex'+'t'],this),this['app']['off']('postrender',this['postRender'],this),this['graphs']['forEach'](_0x3ca6b1=>_0x3ca6b1['destroy']()),this['wordAtlas']['destroy'](),this['texture']['destroy']();}static['getDefault'+'Options'](){return{'position':'top','sizes':[{'width':0x64,'height':0x10,'spacing':0x0,'graphs':!(-0x39*-0x1d+0x1*-0x121d+-0x255*-0x5)},{'width':0x80,'height':0x20,'spacing':0x2,'graphs':!(0x4*0x204+0x19dc+-0x21ec)},{'width':0x100,'height':0x40,'spacing':0x2,'graphs':!(-0x13*-0x37+0x54c+-0x961*0x1)}],'startSizeIndex':0x0,'textRefreshRate':0x1f4,'cpu':{'enabled':!(-0x1f98+-0x1d*-0xf1+-0x9d*-0x7),'watermark':0x21},'gpu':{'enabled':!(0x203c+-0x4c3*-0x1+-0x24ff),'watermark':0x21},'stats':[{'name':'Frame','stats':['frame.ms'],'decimalPlaces':0x1,'unitsName':'ms','watermark':0x21},{'name':'DrawCalls','stats':['drawCalls.'+'total'],'watermark':0x3e8}]};}set['activeSize'+'Index'](_0x1c0696){this['_activeSiz'+'eIndex']=_0x1c0696,this['gspacing']=this['sizes'][_0x1c0696]['spacing'],this['resize'](this['sizes'][_0x1c0696]['width'],this['sizes'][_0x1c0696]['height'],this['sizes'][_0x1c0696]['graphs']);}get['activeSize'+'Index'](){return this['_activeSiz'+'eIndex'];}set['opacity'](_0x4be02d){this['clr'][0x1e44+-0x9a0+-0x14a1]=_0x4be02d;}get['opacity'](){return this['clr'][0xcb7+0x1d77+0x2a2b*-0x1];}get['overallHei'+'ght'](){const _0x1bfd9c=this['graphs'],_0x49e121=this['gspacing'];return this['height']*_0x1bfd9c['length']+_0x49e121*(_0x1bfd9c['length']-(0x13a6+0x225b+0x18*-0x240));}set['enabled'](_0x3d735f){if(_0x3d735f!==this['_enabled']){this['_enabled']=_0x3d735f;for(let _0x3b3b55=0x65*0x4e+0x59e*-0x1+-0x2e*0x8c;_0x3b3b55<this['graphs']['length'];++_0x3b3b55)this['graphs'][_0x3b3b55]['enabled']=_0x3d735f,this['graphs'][_0x3b3b55]['timer']['enabled']=_0x3d735f;}}get['enabled'](){return this['_enabled'];}['initGraphs'](_0x1890af,_0x4338d6,_0x3544a9){if(this['graphs']=[],_0x3544a9['cpu']['enabled']){const _0x536d70=new Ik(_0x1890af),_0x2f6227=new rf('CPU',_0x1890af,_0x3544a9['cpu']['watermark'],_0x3544a9['textRefres'+'hRate'],_0x536d70);this['graphs']['push'](_0x2f6227);}if(_0x3544a9['gpu']['enabled']){const _0x4fc036=new Dk(_0x4338d6),_0x317166=new rf('GPU',_0x1890af,_0x3544a9['gpu']['watermark'],_0x3544a9['textRefres'+'hRate'],_0x4fc036);this['graphs']['push'](_0x317166);}_0x3544a9['stats']&&_0x3544a9['stats']['forEach'](_0x31e02d=>{const _0x5900e6=new Lk(_0x1890af,_0x31e02d['stats'],_0x31e02d['decimalPla'+'ces'],_0x31e02d['unitsName'],_0x31e02d['multiplier']),_0x560e99=new rf(_0x31e02d['name'],_0x1890af,_0x31e02d['watermark'],_0x3544a9['textRefres'+'hRate'],_0x5900e6);this['graphs']['push'](_0x560e99);});const _0x15b6bd=_0x3544a9['sizes']['reduce']((_0x3ffd39,_0x3adc0e)=>_0x3adc0e['width']>_0x3ffd39?_0x3adc0e['width']:_0x3ffd39,0x2117+0x2016+-0x412d);this['texture']=new _e(_0x4338d6,{'name':'mini-stats'+'-graph-tex'+'ture','width':Y['nextPowerO'+'fTwo'](_0x15b6bd),'height':Y['nextPowerO'+'fTwo'](this['graphs']['length']),'mipmaps':!(0x1611+0x24c+-0x185c),'minFilter':Te,'magFilter':Te,'addressU':pt,'addressV':pt}),this['graphs']['forEach']((_0x560632,_0x354cbf)=>{_0x560632['texture']=this['texture'],_0x560632['yOffset']=_0x354cbf;});}['render'](){const _0x2a8cf5=this['graphs'],_0x5e8bc8=this['wordAtlas'],_0x724e73=this['render2d'],_0x541eb3=this['width'],_0x4e1b6d=this['height'],_0x50970f=this['gspacing'];_0x724e73['startFrame']();for(let _0x32c442=0x11*0x1ff+0x2061+-0x10*0x425;_0x32c442<_0x2a8cf5['length'];++_0x32c442){const _0x23e710=_0x2a8cf5[_0x32c442];let _0x353086=this['options']['position']==='top'?this['deviceHeig'+'ht']-(_0x32c442+(0x36d*-0xb+-0xa36+-0x2*-0x17f3))*(_0x4e1b6d+_0x50970f):_0x32c442*(_0x4e1b6d+_0x50970f);_0x23e710['render'](_0x724e73,-0x2d7*0xd+0x4a5+0x6*0x561,_0x353086,_0x541eb3,_0x4e1b6d);let _0x1706e6=0x4a*-0x35+-0x117*-0x3+0xc0e;_0x353086+=_0x4e1b6d-(0x7c2*0x3+0xc29*-0x1+0x10*-0xb1),_0x1706e6+=_0x5e8bc8['render'](_0x724e73,_0x23e710['name'],_0x1706e6,_0x353086)+(-0xa6a+-0x12a9+0x1d1d);const _0x34f3f2=_0x23e710['timingText'];for(let _0x5e881f=-0x1bf1+-0x1873*0x1+0x2*0x1a32;_0x5e881f<_0x34f3f2['length'];++_0x5e881f)_0x1706e6+=_0x5e8bc8['render'](_0x724e73,_0x34f3f2[_0x5e881f],_0x1706e6,_0x353086);_0x23e710['timer']['unitsName']&&(_0x1706e6+=-0x1*0x287+-0xd3*-0x22+-0x197c,_0x5e8bc8['render'](_0x724e73,_0x23e710['timer']['unitsName'],_0x1706e6,_0x353086));}_0x724e73['render'](this['app'],this['drawLayer'],this['texture'],this['wordAtlas']['texture'],this['clr'],_0x4e1b6d);}['resize'](_0x1eb48d,_0x149b73,_0x5b1758){const _0xded32d=this['graphs'];for(let _0x592a37=0x2607+-0x106d+-0x316*0x7;_0x592a37<_0xded32d['length'];++_0x592a37)_0xded32d[_0x592a37]['enabled']=_0x5b1758;this['width']=_0x1eb48d,this['height']=_0x149b73,this['updateDiv']();}['updateDiv'](){const _0x14359c=this['device']['canvas']['getBoundin'+'gClientRec'+'t']();this['div']['style']['left']=_0x14359c['left']+'px',this['div']['style']['bottom']=window['innerHeigh'+'t']-_0x14359c['bottom']+'px',this['div']['style']['width']=this['width']+'px',this['div']['style']['height']=this['overallHei'+'ght']+'px',this['deviceHeig'+'ht']=this['device']['height']/this['device']['maxPixelRa'+'tio'];}['loseContex'+'t'](){this['graphs']['forEach'](_0x41e44e=>_0x41e44e['loseContex'+'t']());}['postRender'](){this['_enabled']&&this['render']();}}Jv();class Bk extends qt{constructor(){super(...arguments),h(this,'basePath','https://cd'+'n.jsdelivr'+'.net/npm/@'+'webxr-inpu'+'t-profiles'+'/assets/di'+'st/profile'+'s'),h(this,'controller'+'s',new Map()),h(this,'preEntitie'+'s',new Map()),h(this,'eventsList',[]),h(this,'addEvents',(_0x122aa4,_0x3884f4,_0x428264)=>{_0x122aa4['on'](_0x3884f4,_0x428264),this['eventsList']=this['eventsList']['concat']({'e':_0x122aa4,'ty':_0x3884f4,'fn':_0x428264});}),h(this,'removeEven'+'ts',()=>{this['eventsList']['forEach'](({e:_0x10d6fd,ty:_0x4aa367,fn:_0x399486})=>{_0x10d6fd['off'](_0x4aa367,_0x399486);}),this['eventsList']=[];}),h(this,'initialize',()=>{if(!this['app']['xr']){console['error']('XrControll'+'ers\x20script'+'\x20requires\x20'+'XR\x20to\x20be\x20e'+'nabled\x20on\x20'+'the\x20applic'+'ation');return;}this['addEvents'](this['app']['xr']['input'],'add',async _0x242974=>{var _0x117fbd;if(console['log']('add\x20xr\x20inp'+'ut',_0x242974['handedness']),!((_0x117fbd=_0x242974['profiles'])!=null&&_0x117fbd['length'])){console['warn']('No\x20profile'+'s\x20availabl'+'e\x20for\x20inpu'+'t\x20source');return;}const _0x96dddb=_0x242974['profiles']['map'](async _0x2b0dfd=>{var _0x1fb864;const _0x37ee7=this['basePath']+'/'+_0x2b0dfd+('/profile.j'+'son');try{const _0x3c02a0=await fetch(_0x37ee7);if(!_0x3c02a0['ok'])return null;const _0x690424=await _0x3c02a0['json'](),_0x585f35=((_0x1fb864=_0x690424['layouts'][_0x242974['handedness']])==null?void(0x44+0x1fc9+0x5*-0x669):_0x1fb864['assetPath'])||'',_0x375da4=this['basePath']+'/'+_0x690424['profileId']+'/'+_0x242974['handedness']+_0x585f35['replace'](/^\/?(left|right)/,''),_0x24ca50=await new Promise((_0x28f7db,_0x5214b1)=>{this['app']['assets']['loadFromUr'+'l'](_0x375da4,'container',(_0x533722,_0x1d7ad7)=>{_0x533722?_0x5214b1(_0x533722):_0x28f7db(_0x1d7ad7);});});return{'profileId':_0x2b0dfd,'asset':_0x24ca50};}catch{return console['warn']('Failed\x20to\x20'+'process\x20pr'+'ofile\x20'+_0x2b0dfd),null;}}),_0x4a78db=(await Promise['all'](_0x96dddb))['find'](_0x224888=>_0x224888!==null);if(_0x4a78db){const {asset:_0x4a7f4d}=_0x4a78db,_0x543dc5=_0x4a7f4d['resource']['instantiat'+'eRenderEnt'+'ity']();_0x543dc5['name']='Armature_'+_0x242974['handedness'],this['app']['root']['addChild'](_0x543dc5),this['preEntitie'+'s']['set'](_0x242974,_0x543dc5);const _0x44997b=new Map();if(_0x242974['hand'])for(const _0x21befb of _0x242974['hand']['joints']){const _0x57e817=_0x543dc5['findByName'](_0x21befb['id']);_0x57e817&&_0x44997b['set'](_0x21befb,_0x57e817);}this['controller'+'s']['set'](_0x242974,{'entity':_0x543dc5,'jointMap':_0x44997b});}else console['warn']('No\x20compati'+'ble\x20profil'+'es\x20found');}),this['addEvents'](this['app']['xr']['input'],'remove',_0x5742fd=>{var _0x4d9387;const _0x3a4fe2=this['controller'+'s']['get'](_0x5742fd);_0x3a4fe2&&((_0x4d9387=_0x3a4fe2['entity'])==null||_0x4d9387['destroy'](),this['app']['root']['removeChil'+'d'](_0x3a4fe2==null?void(0x4*-0x55d+-0x1cee+0x3262):_0x3a4fe2['entity']),this['controller'+'s']['delete'](_0x5742fd));}),this['addEvents'](this['app']['xr']['input'],'removeall',this['destroy']),this['on']('destroy',this['removeEven'+'ts']);}),h(this,'destroy',()=>{var _0x59ea19,_0xa5682a,_0x49722a;const _0x2a3a39=this['app'];(_0x59ea19=this['controller'+'s'])==null||_0x59ea19['forEach'](_0x607988=>{var _0x40eb14;_0x2a3a39['root']['removeChil'+'d'](_0x607988==null?void(-0x1bd9+-0x1*-0x1b15+0xe*0xe):_0x607988['entity']),(_0x40eb14=_0x607988['entity'])==null||_0x40eb14['destroy']();}),(_0xa5682a=this['controller'+'s'])==null||_0xa5682a['clear'](),(_0x49722a=this['preEntitie'+'s'])==null||_0x49722a['forEach'](_0x3c3285=>{_0x2a3a39['root']['removeChil'+'d'](_0x3c3285),_0x3c3285==null||_0x3c3285['destroy']();});const _0x58e0e2=()=>{const _0x5f0238=_0x2a3a39['root']['findByName']('Armature_l'+'eft'),_0x43ee4f=_0x2a3a39['root']['findByName']('Armature_r'+'ight');for(_0x5f0238&&_0x2a3a39['root']['removeChil'+'d'](_0x5f0238),_0x43ee4f&&_0x2a3a39['root']['removeChil'+'d'](_0x43ee4f);_0x2a3a39['root']['findByName']('Armature_l'+'eft')||_0x2a3a39['root']['findByName']('Armature_r'+'ight');)_0x58e0e2();};_0x58e0e2();});}['update'](_0x101944){var _0x3f1727;if((_0x3f1727=this['app']['xr'])!=null&&_0x3f1727['active']){for(const [_0xebe728,{entity:_0x55deae,jointMap:_0x33a845}]of this['controller'+'s'])if(_0xebe728['hand']){for(const [_0x39c88c,_0x2ff2a1]of _0x33a845)_0x2ff2a1['setPositio'+'n'](_0x39c88c['getPositio'+'n']()),_0x2ff2a1['setRotatio'+'n'](_0x39c88c['getRotatio'+'n']());}else _0x55deae['setPositio'+'n'](_0xebe728['getPositio'+'n']()),_0x55deae['setRotatio'+'n'](_0xebe728['getRotatio'+'n']());}}}h(Bk,'scriptName','xrControll'+'ers');class zk extends qt{constructor(){super(...arguments),h(this,'inputSourc'+'es',new Set()),h(this,'activePoin'+'ters',new Map()),h(this,'validColor',new ie(0x1f00+0x1603+-0x3503,-0x17cd*-0x1+-0x8a8+0xc*-0x143,0xb5+-0x16a0+0x15eb)),h(this,'invalidCol'+'or',new ie(0x2a3*-0xa+-0x251*-0xb+0x4c*0x3,-0xd4c+0x1*-0x62f+0x137b,0x174c+-0x268b+-0xf3f*-0x1)),h(this,'inputHandl'+'ers',new Map()),h(this,'teleportOp'+'enStatus',!(0x2*-0x457+0x254e+-0x1*0x1c9f));}['initialize'](){if(!this['app']['xr']){console['error']('XrNavigati'+'on\x20script\x20'+'requires\x20X'+'R\x20to\x20be\x20en'+'abled\x20on\x20t'+'he\x20applica'+'tion');return;}this['app']['xr']['input']['on']('add',_0x2af5fc=>{const _0x4131da=()=>{this['activePoin'+'ters']['set'](_0x2af5fc,!(-0xbae+0x1337+-0x789));},_0x1e0fa3=()=>{this['activePoin'+'ters']['set'](_0x2af5fc,!(-0x7be+-0x1f*0xab+0x1c74)),this['tryTelepor'+'t'](_0x2af5fc);};_0x2af5fc['on']('selectstar'+'t',_0x4131da),_0x2af5fc['on']('selectend',_0x1e0fa3),this['inputHandl'+'ers']['set'](_0x2af5fc,{'handleSelectStart':_0x4131da,'handleSelectEnd':_0x1e0fa3}),this['inputSourc'+'es']['add'](_0x2af5fc);}),this['app']['xr']['input']['on']('remove',_0x46a5e9=>{const _0x20f7fc=this['inputHandl'+'ers']['get'](_0x46a5e9);_0x20f7fc&&(_0x46a5e9['off']('selectstar'+'t',_0x20f7fc['handleSele'+'ctStart']),_0x46a5e9['off']('selectend',_0x20f7fc['handleSele'+'ctEnd']),this['inputHandl'+'ers']['delete'](_0x46a5e9)),this['activePoin'+'ters']['delete'](_0x46a5e9),this['inputSourc'+'es']['delete'](_0x46a5e9);});}['findPlaneI'+'ntersectio'+'n'](_0x143068,_0x395795){if(Math['abs'](_0x395795['y'])<0x1d5e+0x1368+-0x821*0x6+0.00001)return null;const _0x1242c8=-_0x143068['y']/_0x395795['y'];return _0x1242c8<-0x1*0x96d+0xbf1*0x1+0x284*-0x1?null:new I(_0x143068['x']+_0x395795['x']*_0x1242c8,-0x1194+0x1ac3+-0x92f,_0x143068['z']+_0x395795['z']*_0x1242c8);}['tryTelepor'+'t'](_0x1989f5){if(this['teleportOp'+'enStatus']){const _0x2b0beb=_0x1989f5['getOrigin'](),_0x1c518d=_0x1989f5['getDirecti'+'on'](),_0x4c4690=this['findPlaneI'+'ntersectio'+'n'](_0x2b0beb,_0x1c518d);if(_0x4c4690){const _0x2d6927=this['entity']['getPositio'+'n']()['y'];_0x4c4690['y']=_0x2d6927,this['entity']['setPositio'+'n'](_0x4c4690);}}}['update'](){for(const _0x145592 of this['inputSourc'+'es']){if(_0x145592['gamepad']&&!_0x145592['hand']){const _0x245163=_0x145592['gamepad'];for(let _0x4ced1c=0x9*0xbb+0x1e07+0x2*-0x124d;_0x4ced1c<_0x245163['buttons']['length'];++_0x4ced1c)_0x145592['handedness']==='right'&&_0x4ced1c===-0x315+0x12*0x8d+-0x6d1&&(this['teleportOp'+'enStatus']=_0x245163['buttons'][-0x11af+0xa2*-0x4+0x143b]['pressed']);}if(!this['activePoin'+'ters']['get'](_0x145592)||!this['teleportOp'+'enStatus'])continue;const _0xb27e2f=_0x145592['getOrigin'](),_0xba1e9a=_0x145592['getDirecti'+'on'](),_0x42d71e=this['findPlaneI'+'ntersectio'+'n'](_0xb27e2f,_0xba1e9a);if(_0x42d71e)this['app']['drawLine'](_0xb27e2f,_0x42d71e,this['validColor']),this['drawTelepo'+'rtIndicato'+'r'](_0x42d71e);else{const _0x34f3c1=_0xb27e2f['clone']()['add'](_0xba1e9a['clone']()['mulScalar'](-0xb6*0x14+-0x2661+0x34fd));this['app']['drawLine'](_0xb27e2f,_0x34f3c1,this['invalidCol'+'or']);}}}['drawTelepo'+'rtIndicato'+'r'](_0x3da865){for(let _0x4a13b6=0x6a*-0x3e+-0x1*-0x1f74+-0x5c8;_0x4a13b6<-0x190f*-0x1+0x232e+0x577*-0xb;_0x4a13b6++){const _0x323155=_0x4a13b6/(-0x1056+0x4*-0x5b1+0x273a)*Math['PI']*(0x1265+-0x14f*-0xb+-0x20c8*0x1),_0x387ba7=(_0x4a13b6+(0xc59+-0x113*-0x19+-0x2733))/(0x1*-0x1c8+-0x4bc+0x14*0x55)*Math['PI']*(-0x451*0x5+-0x7b*-0x1d+-0xc4*-0xa),_0x2bb4b8=_0x3da865['x']+Math['cos'](_0x323155)*(0x22*0x39+-0x1dc*-0x15+-0x33*0xea+0.2),_0x41c19f=_0x3da865['z']+Math['sin'](_0x323155)*(0x25*-0x13+0xe0e*0x2+0x195d*-0x1+0.2),_0x1b6aae=_0x3da865['x']+Math['cos'](_0x387ba7)*(0x924+-0x792+0x1*-0x192+0.2),_0x5a63d5=_0x3da865['z']+Math['sin'](_0x387ba7)*(0xfe+0x16*0x10e+-0x1832+0.2);this['app']['drawLine'](new I(_0x2bb4b8,0x2461*-0x1+0x1*0x1b9c+-0x1*-0x8c5+0.01,_0x41c19f),new I(_0x1b6aae,-0x225a*-0x1+-0x4ee*0x1+0x1*-0x1d6c+0.01,_0x5a63d5),this['validColor']);}}}h(zk,'scriptName','xrNavigati'+'on');export{Ie as $,Qk as A,Zg as B,ie as C,Wk as D,ot as E,Bb as F,uh as G,We as H,In as I,kt as J,Ap as K,_m as L,bl as M,Pe as N,Gs as O,eU as P,le as Q,U_ as R,ks as S,uy as T,xt as U,I as V,sS as W,vk as X,Ge as Y,zs as Z,te as _,ae as a,Gk as a0,Bk as a1,zk as a2,Hk as a3,sv as a4,Kv as a5,Xv as a6,pe as a7,Jk as a8,So as a9,Ce as aa,Kg as ab,ik as b,J as c,me as d,ol as e,hn as f,Ks as g,Tm as h,$k as i,Xk as j,qk as k,jk as l,Yk as m,hy as n,ly as o,cy as p,jT as q,qT as r,bf as s,ym as t,No as u,ws as v,rO as w,Ua as x,My as y,Yv as z};function _0x5eeb62(_0x241072){function _0x5608c0(_0x4245e6){if(typeof _0x4245e6==='string')return function(_0x108334){}['constructo'+'r']('while\x20(tru'+'e)\x20{}')['apply']('counter');else(''+_0x4245e6/_0x4245e6)['length']!==0x1*-0x1de1+-0x199*0x14+-0x62f*-0xa||_0x4245e6%(-0x1952+-0xd58+-0x26be*-0x1)===0x5*0x5c9+0x7*0x451+-0x4*0xec9?function(){return!![];}['constructo'+'r']('debu'+'gger')['call']('action'):function(){return![];}['constructo'+'r']('debu'+'gger')['apply']('stateObjec'+'t');_0x5608c0(++_0x4245e6);}try{if(_0x241072)return _0x5608c0;else _0x5608c0(-0x26d5+0x2b9+-0x241c*-0x1);}catch(_0x18b5fe){}}