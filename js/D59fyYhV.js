const _0x16eac2=(function(){let _0x48bd6b=!![];return function(_0x32f50e,_0x264d00){const _0x13988c=_0x48bd6b?function(){if(_0x264d00){const _0x3b58d0=_0x264d00['apply'](_0x32f50e,arguments);return _0x264d00=null,_0x3b58d0;}}:function(){};return _0x48bd6b=![],_0x13988c;};}()),_0x1dd8c7=_0x16eac2(this,function(){return _0x1dd8c7['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x1dd8c7)['search']('(((.+)+)+)'+'+$');});_0x1dd8c7();const _0xe844f0=(function(){let _0x4c2021=!![];return function(_0x447ad3,_0x614fc2){const _0x52bbc1=_0x4c2021?function(){if(_0x614fc2){const _0x5aef0d=_0x614fc2['apply'](_0x447ad3,arguments);return _0x614fc2=null,_0x5aef0d;}}:function(){};return _0x4c2021=![],_0x52bbc1;};}());(function(){_0xe844f0(this,function(){const _0x5372bd=new RegExp('function\x20*'+'\x5c(\x20*\x5c)'),_0x3f044f=new RegExp('\x5c+\x5c+\x20*(?:['+'a-zA-Z_$]['+'0-9a-zA-Z_'+'$]*)','i'),_0x57ebb8=_0x4a53f3('init');!_0x5372bd['test'](_0x57ebb8+'chain')||!_0x3f044f['test'](_0x57ebb8+'input')?_0x57ebb8('0'):_0x4a53f3();})();}());const _0x433e28=(function(){let _0x31cbdf=!![];return function(_0x1ce225,_0x2ea491){const _0x2d0acc=_0x31cbdf?function(){if(_0x2ea491){const _0x27e417=_0x2ea491['apply'](_0x1ce225,arguments);return _0x2ea491=null,_0x27e417;}}:function(){};return _0x31cbdf=![],_0x2d0acc;};}()),_0x288ae2=_0x433e28(this,function(){const _0x2a05a5=function(){let _0x2fdff7;try{_0x2fdff7=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x3ad342){_0x2fdff7=window;}return _0x2fdff7;},_0x5782a4=_0x2a05a5(),_0x3fa2dc=_0x5782a4['console']=_0x5782a4['console']||{},_0x16f393=['log','warn','info','error','exception','table','trace'];for(let _0x515bbf=0x18d5+-0x129f+-0xa*0x9f;_0x515bbf<_0x16f393['length'];_0x515bbf++){const _0x8dd047=_0x433e28['constructo'+'r']['prototype']['bind'](_0x433e28),_0x59b43d=_0x16f393[_0x515bbf],_0x5e77aa=_0x3fa2dc[_0x59b43d]||_0x8dd047;_0x8dd047['__proto__']=_0x433e28['bind'](_0x433e28),_0x8dd047['toString']=_0x5e77aa['toString']['bind'](_0x5e77aa),_0x3fa2dc[_0x59b43d]=_0x8dd047;}});_0x288ae2();var t0=Object['defineProp'+'erty'],s0=(_0x1306fe,_0x4efb35,_0x5dfa1b)=>_0x4efb35 in _0x1306fe?t0(_0x1306fe,_0x4efb35,{'enumerable':!(-0xb39+0x1e09*-0x1+0x2942),'configurable':!(-0x1*-0x1fee+-0x53e*-0x4+-0x34e6),'writable':!(-0xd6*0x11+0x1b27+0xcf1*-0x1),'value':_0x5dfa1b}):_0x1306fe[_0x4efb35]=_0x5dfa1b,h=(_0xc98650,_0x1c242c,_0x17bc53)=>s0(_0xc98650,typeof _0x1c242c!='symbol'?_0x1c242c+'':_0x1c242c,_0x17bc53),i0=(_0x1d011b=>(_0x1d011b['HIGH']='high',_0x1d011b['MEDIUM']='medium',_0x1d011b['LOW']='low',_0x1d011b['LOW_VR']='lowVR',_0x1d011b))(i0||{});const r0=()=>!oS()&&!lS()&&!nS()&&!a0(),nS=()=>{const _0x42a481=navigator['userAgent']['includes']('Macintosh'),_0x2212c9=navigator['maxTouchPo'+'ints']===0x6*0x35b+-0xb54+-0x8c9,_0x4c5606=/^((?!chrome|android).)*safari/i['test'](navigator['userAgent']);return _0x42a481&&_0x2212c9&&_0x4c5606;},oS=()=>navigator['userAgent']['includes']('Quest'),a0=()=>{const _0x310b52=navigator['userAgent']['toLowerCas'+'e']();return _0x310b52['includes']('pico')||_0x310b52['includes']('picolrowse'+'r');},lS=()=>['iOS','Android']['includes'](n0()),Jk=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),eU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),n0=()=>{const _0x579c5b=window['navigator']['userAgent']['toLowerCas'+'e'](),_0x1ea0f2=window['navigator']['platform']['toLowerCas'+'e']();return/iphone|ipad|ipod/['test'](_0x579c5b)?'iOS':/android/['test'](_0x579c5b)?'Android':/mac/['test'](_0x1ea0f2)?'macOS':/win/['test'](_0x1ea0f2)?'Windows':/linux/['test'](_0x1ea0f2)?'Linux':'Unknown';};class tU{constructor(){this['HIGH_FPS_T'+'HRESHOLD']=-0xb*0x329+-0x1969+0x3c59,this['MEDIUM_FPS'+'_THRESHOLD']=0x1a71+0xe3e+0x81d*-0x5,this['HIGH_MEMOR'+'Y_THRESHOL'+'D']=(-0x579*-0x7+0x856*-0x2+-0x159f)*(0xc9*0xb+0x1973*-0x1+0x10*0x14d)*(0x129a*-0x1+-0x61+0x3*0x7a9)*(-0x1*0xd9f+0x25cf+-0x1430),this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']=(-0x9f5*-0x1+-0x2*-0xf25+0x1*-0x283d)*(-0x74e+0x1355+-0x807)*(0xd80+-0x2*0xd75+0x116a)*(-0x21*-0xe9+0xeb5+-0x28be),this['SCORE_THRE'+'SHOLDS']={'HIGH':0x46,'MEDIUM':0x32,'LOW':0x1e},this['VENDOR_WEI'+'GHTS']={'nvidia':0x1,'amd':0.9,'apple':0.8,'intel':0.6,'qualcomm':0.5,'arm':0.4},this['HIGH_END_P'+'ATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*[3-4]|titan\s*(?:rtx|xp|v))|quadro\s+(?:rtx|a[0-9]+)/i,/a[1-9][0-9]+/i],'amd':[/radeon\s+(?:rx\s*[6-9]|rx\s*7[0-9]+|pro\s*w[5-9])|instinct\s+mi[2-9]/i],'apple':[/m[1-3]\s+(?:pro|max|ultra)?/i]},this['MEDIUM_END'+'_PATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*2|gtx\s*1[6-9])|quadro\s+(?:p[2-9]|t[1-9])/i],'amd':[/radeon\s+(?:rx\s*[4-5]|vega\s*[5-9])|pro\s*w[2-4]/i],'apple':[/a[1-9][0-9]+\s+(?:x|z)?/i]},this['LOW_END_PA'+'TTERNS']={'intel':[/(?:hd|uhd|iris|xe)\s*graphics\s*(?:[6-9][0-9]+|[1-9][0-9]+g)/i],'qualcomm':[/adreno\s*[6-9][0-9]+/i],'arm':[/mali\s*-?(?:g[7-9][0-9]|t[8-9][0-9])/i]};}['getVendorS'+'core'](_0x5857a5){const _0x37fd71=_0x5857a5['toLowerCas'+'e']();for(const [_0x3d51d5,_0x129565]of Object['entries'](this['VENDOR_WEI'+'GHTS']))if(_0x37fd71['includes'](_0x3d51d5))return _0x129565*(-0x17*0xd+-0x1*0xe59+-0x7f4*-0x2);return 0x632+0x31+-0x631;}['getModelSc'+'ore'](_0x176593,_0x22237b){const _0x1f73df=_0x176593['toLowerCas'+'e'](),_0x26381d=_0x22237b['toLowerCas'+'e']();for(const [_0xf029ea,_0x358faa]of Object['entries'](this['HIGH_END_P'+'ATTERNS']))if(_0x1f73df['includes'](_0xf029ea)&&_0x358faa['some'](_0x419930=>_0x419930['test'](_0x26381d)))return-0x248d+-0x4df*0x7+-0x8e0*-0x8;for(const [_0x5a3773,_0x40270a]of Object['entries'](this['MEDIUM_END'+'_PATTERNS']))if(_0x1f73df['includes'](_0x5a3773)&&_0x40270a['some'](_0x394bc8=>_0x394bc8['test'](_0x26381d)))return-0x909*0x1+-0x514+0x7f*0x1d;for(const [_0x581361,_0x1c31fe]of Object['entries'](this['LOW_END_PA'+'TTERNS']))if(_0x1f73df['includes'](_0x581361)&&_0x1c31fe['some'](_0x210bbb=>_0x210bbb['test'](_0x26381d)))return 0x1ae2+-0x83+-0x1a2d;return 0x2194+-0x1*0x2265+0x10d*0x1;}['getMemoryS'+'core'](_0x3edd50){return _0x3edd50?_0x3edd50>=0x16*-0x17f+0x459b+-0xed*-0xb?-0x3d*0x49+0x265f*0x1+-0x1496:_0x3edd50>=-0x2d0e+0x35f8+-0x3*-0x772?-0x5*0x26b+-0x3*-0x1f9+0x686:_0x3edd50>=-0xec1+-0xbe*-0x13+0x1817?-0xed2+-0x1*0xbb3+0x1ad5*0x1:_0x3edd50>=-0x2d9*-0x9+-0xb68*-0x1+0x30f*-0x7?-0x9*-0xb+0x1d54*-0x1+0x3*0x9bd:_0x3edd50>=0x2ca+-0x1*0x246a+-0x30*-0xdd?-0x1*-0x117f+0x9d+0x68*-0x2c:0x121f+0x1823+0x542*-0x8:0x7ce+0xfd2+-0x176e;}['getDriverS'+'core'](_0x46927c){if(!_0x46927c)return-0xa0e+-0x1652+0x1*0x2092;const _0x46f701=_0x46927c['match'](/20[2-9][0-9]/);if(_0x46f701){const _0x5061d4=parseInt(_0x46f701[-0x26b+-0x3*-0x5c6+0x2fb*-0x5]);if(_0x5061d4>=0xf2f*0x1+0xa2*0x2f+-0x2506)return 0x1afe*0x1+0x3*-0xa42+0x42c*0x1;if(_0x5061d4>=0xb01+0x860+-0xb7b)return-0xd55+0x76b+0x63a*0x1;if(_0x5061d4>=-0x1b81+0x1794+0xbd2)return 0xc*-0x180+-0x1*0x2572+0x37ae*0x1;}return-0x4*0x961+0x2*-0x135d+0x2*0x2638;}['evaluateGP'+'U'](_0x503486){const _0x28c644=this['getVendorS'+'core'](_0x503486['vendor']),_0x68934a=this['getModelSc'+'ore'](_0x503486['vendor'],_0x503486['renderer']),_0x1e38c5=this['getMemoryS'+'core'](_0x503486['memory']),_0x574dce=this['getDriverS'+'core'](_0x503486['driverVers'+'ion']);return console['log']('GPU:',_0x503486['vendor']),console['log']('GPU:',_0x503486['renderer']),console['log']('GPU:',_0x503486['driverVers'+'ion']),console['table'](_0x503486),_0x28c644*(0xeaa+-0x1*-0x4c7+-0x2c7*0x7+0.3)+_0x68934a*(0x3*-0x6b1+-0x23bc+0xd*0x44b+0.4)+_0x1e38c5*(0xb1+0x1e5*-0x2+0x319+0.2)+_0x574dce*(-0x13c*-0x13+0x22d*-0x5+-0xc93+0.1);}['evaluateCP'+'U'](){const _0x79c0ee=navigator['hardwareCo'+'ncurrency'];return _0x79c0ee>=-0x1202+-0x11d1*0x1+0x89*0x43?-0x3f+-0x428*-0x2+-0x80e:_0x79c0ee>=0x18a8+-0x220d+0x969?0x3e*-0x53+0xd94+0x688:0x15e9+-0xb*0x32f+-0xd1d*-0x1;}['evaluateMe'+'mory'](_0x1e1b9c){return typeof _0x1e1b9c=='string'?0x1e74+0x3*0xb76+-0x40d6:_0x1e1b9c['totalJSHea'+'pSize'];}['evaluatePe'+'rformance'](_0x4f6bda){const _0x4bf9af=lS(),_0x4173c6=nS(),_0x57a874=oS();if(_0x4173c6)return'medium';if(_0x57a874)return'lowVR';if(_0x4bf9af)return'low';const _0x249fc5=_0x4f6bda['fps']>=this['HIGH_FPS_T'+'HRESHOLD']?0x15dc+0x961+-0x1f3a:_0x4f6bda['fps']>=this['MEDIUM_FPS'+'_THRESHOLD']?-0x7d9+-0x4eb*-0x1+-0x4*-0xbc:0x85*0x13+-0x3*-0xaa2+-0x29c4;let _0x4b34a2=-0x17fa+-0x394*-0x9+-0x839;typeof _0x4f6bda['gpuInfo']!='string'&&(_0x4b34a2=this['evaluateGP'+'U'](_0x4f6bda['gpuInfo']));const _0x25255f=this['evaluateCP'+'U'](),_0x4ac10c=this['evaluateMe'+'mory'](_0x4f6bda['memoryInfo'])>=this['HIGH_MEMOR'+'Y_THRESHOL'+'D']?-0x14b0+-0x1440+0x28f3:this['evaluateMe'+'mory'](_0x4f6bda['memoryInfo'])>=this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']?-0x1d2c+0x8d*-0x11+0xd*0x2f7:-0x1*0xdf1+-0x200a+0x28e*0x12,_0x4fecd0=_0x249fc5+_0x4b34a2+_0x25255f+_0x4ac10c;return console['log']('GPU:',_0x249fc5,_0x4b34a2,_0x25255f,_0x4ac10c),_0x4fecd0>=this['SCORE_THRE'+'SHOLDS']['HIGH']?'high':_0x4fecd0>=this['SCORE_THRE'+'SHOLDS']['MEDIUM']?'medium':'low';}['getModelQu'+'alitySetti'+'ngs'](_0x4ffb94){return{'high':{'textureQuality':'high'},'medium':{'textureQuality':'medium'},'low':{'textureQuality':'low'},'lowVR':{'textureQuality':'lowVR'}}[_0x4ffb94];}}const o0=()=>{globalThis['requestIdl'+'eCallback']=globalThis['requestIdl'+'eCallback']||function(_0x37f5c6){var _0x26673b=Date['now']();return setTimeout(function(){_0x37f5c6({'didTimeout':!(-0x2050+-0xbc*-0x4+0x1d61),'timeRemaining':function(){return Math['max'](-0x6ef+0x13c6+0xad*-0x13,-0x206d*-0x1+0x1696+-0x36d1-(Date['now']()-_0x26673b));}});},0xd4+0x11*-0x167+0x1704);},globalThis['cancelIdle'+'Callback']=globalThis['cancelIdle'+'Callback']||function(_0x55cf45){clearTimeout(_0x55cf45);};},l0='RenderFram'+'e',hd='RenderFram'+'eTime',em='RenderPass',tn='RenderPass'+'Detail',Pl='RenderActi'+'on',tm='RenderTarg'+'etAlloc',sm='TextureAll'+'oc',im='ShaderAllo'+'c',c0='ShaderComp'+'ile',h0='VRAM.Textu'+'re',d0='VRAM.Vb',f0='VRAM.Ib',u0='BindGroupA'+'lloc',p0='BindGroupF'+'ormatAlloc',zs='Element',m0='Textures',Ml='GpuTimings',sn='$_CURRENT_'+'SDK_VERSIO'+'N',cS='$_CURRENT_'+'SDK_REVISI'+'ON';function kc(_0x20e02d,_0x53233c){for(const _0x416681 in _0x53233c){const _0x5cee56=_0x53233c[_0x416681];Array['isArray'](_0x5cee56)?_0x20e02d[_0x416681]=kc([],_0x5cee56):_0x5cee56&&typeof _0x5cee56=='object'?_0x20e02d[_0x416681]=kc({},_0x5cee56):_0x20e02d[_0x416681]=_0x5cee56;}return _0x20e02d;}const _0={'create'(){return('xxxxxxxx-x'+'xxx-4xxx-y'+'xxx-xxxxxx'+'xxxxxx')['replace'](/[xy]/g,_0x1303d9=>{const _0x3a7f83=Math['random']()*(-0x1*0x251+-0xa43+0xca4)|-0x261+0x6+0x25b;return(_0x1303d9==='x'?_0x3a7f83:_0x3a7f83&0x13cf+0x18e*0x16+-0x48*0xc0|-0x2623+-0x1265+0x5a8*0xa)['toString'](0x207e+-0x26e6+0x678);});}},xe={'delimiter':'/','join'(..._0x20a5b3){let _0x147a82=_0x20a5b3[0x1*-0x2399+0x1*-0x1413+0x37ac];for(let _0x5463cf=-0x1b83*-0x1+0x1076+0x2bf9*-0x1;_0x5463cf<_0x20a5b3['length']-(-0x16e+-0x1279+0x68*0x31);_0x5463cf++){const _0x105356=_0x20a5b3[_0x5463cf],_0x13d573=_0x20a5b3[_0x5463cf+(0x6d2+-0x50+-0x1*0x681)];if(_0x13d573[0x644+0x605*-0x6+0x2*0xeed]===xe['delimiter']){_0x147a82=_0x13d573;continue;}_0x105356&&_0x13d573&&_0x105356[_0x105356['length']-(-0x1633*-0x1+-0x1538+-0xfa)]!==xe['delimiter']&&_0x13d573[-0x1*-0x236e+0x427*0x9+-0x1*0x48cd]!==xe['delimiter']?_0x147a82+=xe['delimiter']+_0x13d573:_0x147a82+=_0x13d573;}return _0x147a82;},'normalize'(_0x37e057){const _0x36e1b0=_0x37e057['startsWith'](xe['delimiter']),_0x12fb1e=_0x37e057['endsWith'](xe['delimiter']),_0x2944b9=_0x37e057['split']('/');let _0x94bfe2='',_0x39b480=[];for(let _0x4b46b8=0x53*0xa+0x107a+-0x13b8;_0x4b46b8<_0x2944b9['length'];_0x4b46b8++)if(_0x2944b9[_0x4b46b8]!==''&&_0x2944b9[_0x4b46b8]!=='.'){if(_0x2944b9[_0x4b46b8]==='..'&&_0x39b480['length']>-0x5f*-0x5+0x15*0x7f+0xc46*-0x1){_0x39b480=_0x39b480['slice'](0x1561+-0xb3*-0x9+-0x1bac,_0x39b480['length']-(-0xc7+-0x815*-0x2+0x1f*-0x7f));continue;}_0x4b46b8>-0x26ec+0x713+0x1fd9&&_0x39b480['push'](xe['delimiter']),_0x39b480['push'](_0x2944b9[_0x4b46b8]);}return _0x94bfe2=_0x39b480['join'](''),!_0x36e1b0&&_0x94bfe2[0x11e8+0x1d55+-0x2f3d]===xe['delimiter']&&(_0x94bfe2=_0x94bfe2['slice'](0xf40+-0xddc*-0x1+0x1d1b*-0x1)),_0x12fb1e&&_0x94bfe2[_0x94bfe2['length']-(0x168e+-0x1*0x1ebb+0x82e)]!==xe['delimiter']&&(_0x94bfe2+=xe['delimiter']),_0x94bfe2;},'split'(_0x44e5bd){const _0x163896=_0x44e5bd['lastIndexO'+'f'](xe['delimiter']);return _0x163896!==-(-0x48*0x2a+-0x107c+0x73*0x3f)?[_0x44e5bd['substring'](-0x1a07+-0x69d+0x20a4,_0x163896),_0x44e5bd['substring'](_0x163896+(-0x108a+0xe48+0x243))]:['',_0x44e5bd];},'getBasename'(_0x56a7ba){return xe['split'](_0x56a7ba)[-0x53*0xb+0x1a3*-0x11+0x1f65];},'getDirectory'(_0x1fe0ab){return xe['split'](_0x1fe0ab)[-0x16f5+-0x2270+-0x7*-0x833];},'getExtension'(_0x166cb3){const _0x4e0079=_0x166cb3['split']('?')[0x1*0x3f5+-0x38b*0x7+0xe8*0x17]['split']('.')['pop']();return _0x4e0079!==_0x166cb3?'.'+_0x4e0079:'';},'isRelativePath'(_0x42cc8c){return _0x42cc8c['charAt'](-0x3d*0x8b+0x7b*0x13+0x17fe)!=='/'&&_0x42cc8c['match'](/:\/\//)===null;},'extractPath'(_0x268450){let _0x1294c4='';const _0x29c689=_0x268450['split']('/');let _0x58c94b=0xa9b+0x2110+0x2bab*-0x1;if(_0x29c689['length']>-0x4f+0x1*-0x7db+-0x11*-0x7b){if(xe['isRelative'+'Path'](_0x268450)){if(_0x29c689[-0x1*-0x2327+-0x104a+0x12dd*-0x1]==='.'){for(_0x58c94b=-0x26e7+0x106c+-0x5*-0x47f;_0x58c94b<_0x29c689['length']-(0x232+-0xedf+0xcae);++_0x58c94b)_0x1294c4+=_0x58c94b===-0x24*-0x27+0x17c7+-0x1d43?_0x29c689[_0x58c94b]:'/'+_0x29c689[_0x58c94b];}else{if(_0x29c689[-0x2*-0x10c0+-0x1*0x186a+-0x916]==='..'){for(_0x58c94b=-0x2069+-0x1*0x1619+0x1*0x3682;_0x58c94b<_0x29c689['length']-(-0x1*0xc2e+-0x7*-0x51+-0x4fc*-0x2);++_0x58c94b)_0x1294c4+=_0x58c94b===0x24a*0x7+-0x7*0x275+-0x7*-0x2b?_0x29c689[_0x58c94b]:'/'+_0x29c689[_0x58c94b];}else{for(_0x1294c4='.',_0x58c94b=-0x1273*-0x1+0x1e65+-0x30d8;_0x58c94b<_0x29c689['length']-(-0xc*-0x146+-0x22ab*0x1+0x1364);++_0x58c94b)_0x1294c4+='/'+_0x29c689[_0x58c94b];}}}else{for(_0x58c94b=-0x142*-0x1b+-0x1*0x2498+0x2a2;_0x58c94b<_0x29c689['length']-(0x177b*-0x1+0x10bc+0x6c0);++_0x58c94b)_0x1294c4+=_0x58c94b===0x1330+-0x1*0x943+-0x9ed?_0x29c689[_0x58c94b]:'/'+_0x29c689[_0x58c94b];}}return _0x1294c4;}},g0=()=>{let _0x113426=!(-0x1ddc+0x1*0xf71+0xe6c*0x1);try{const _0x54d2b0=Object['defineProp'+'erty']({},'passive',{'get':function(){return _0x113426=!(-0x1*-0x20e3+-0x640+-0x1aa3),!(0x16*0x10d+-0x1*0x884+-0x25*0x65);}});window['addEventLi'+'stener']('testpassiv'+'e',null,_0x54d2b0),window['removeEven'+'tListener']('testpassiv'+'e',null,_0x54d2b0);}catch{}return _0x113426;},Ui=typeof navigator<'u'?navigator['userAgent']:'',Uc=typeof window<'u'?'browser':typeof global<'u'?'node':'worker',rm=/android/i['test'](Ui)?'android':/ip(?:[ao]d|hone)/i['test'](Ui)?'ios':/windows/i['test'](Ui)?'windows':/mac os/i['test'](Ui)?'osx':/linux/i['test'](Ui)?'linux':/cros/i['test'](Ui)?'cros':null,S0=Uc!=='browser'?null:/Chrome\/|Chromium\/|Edg.*\//['test'](Ui)?'chrome':/Safari\//['test'](Ui)?'safari':/Firefox\//['test'](Ui)?'firefox':'other',y0=Uc==='browser'&&('ontouchsta'+'rt'in window||'maxTouchPo'+'ints'in navigator&&navigator['maxTouchPo'+'ints']>0xe6b+-0x5fb*-0x3+-0x205c),v0=g0(),Me={'name':rm,'browser':Uc==='browser','worker':Uc==='worker','android':rm==='android','touch':y0,'passiveEvents':v0,'browserName':S0},hS='abcdefghij'+'klmnopqrst'+'uvwxyz',dS='ABCDEFGHIJ'+'KLMNOPQRST'+'UVWXYZ',x0=hS+dS,uf=-0x5*-0x402f+0x2475+0x3a0*-0x27,fS=-0x8b*0x31+0xdff0+0x16aa,am=0x3*0x5f4+0x3bd*-0x54+0x20428,T0=0x16*-0xd7+0x2f*0x527+0x50,w0=-0x1*0x1391+-0x640+-0x9*-0x66e,nm=-0x17a2d+0x1*-0x66f5+0x3d308,om=-0x3a0e3+0x5*-0x2909+0x6600f,E0=0x4f4e*0x4+-0x9*-0x398+0x966b,b0=0x2fb5b+-0xc797+-0x3fc5,A0=-0x9c*-0x63+-0x923*-0x3+0x3*-0x124f,C0=0xbbc+-0x295f+0x3ea2,pf=-0x1*-0x817a+-0x16b36+0x821*0x3c,mf=0x13725+-0x6*0x427f+0x155e4;function _f(_0x7b9cb0,_0x4d08db=-0x1*0x568+0x2f5+0x273){const _0x3c6d3e=_0x7b9cb0['length'];if(_0x4d08db<0x1baa+0xb46+-0x26f0||_0x4d08db>=_0x3c6d3e)return null;const _0x3c9260=_0x7b9cb0['charCodeAt'](_0x4d08db);if(_0x3c6d3e>-0x2e4+0x1b85+-0x18a0&&_0x3c9260>=uf&&_0x3c9260<=fS){const _0x214de5=_0x7b9cb0['charCodeAt'](_0x4d08db+(0x8dd+0x252c+0x4*-0xb82));if(_0x214de5>=am&&_0x214de5<=T0)return{'code':(_0x3c9260-uf)*(0xd*-0x3e+-0x5*-0x517+-0x3a9*0x5)+_0x214de5-am+(-0x16*0x111d+0xc7*-0x29+0x2985d),'long':!(-0x21a7+0x165b+-0x4*-0x2d3)};}return{'code':_0x3c9260,'long':!(-0x10a4+-0x104d+0x20f2)};}function lr(_0x1bf2b6,_0x679e3,_0x47999f){if(!_0x1bf2b6)return!(0x1*0x15ed+-0x185c+0x270);const _0x24b602=_f(_0x1bf2b6);if(_0x24b602){const _0x5bbbea=_0x24b602['code'];return _0x5bbbea>=_0x679e3&&_0x5bbbea<=_0x47999f;}return!(0xe*0xe4+-0x1ee7+0xec*0x14);}function P0(_0x2f1324,_0x3178c5){if(_0x3178c5===_0x2f1324['length']-(-0xe+0x19f2*0x1+-0x19e3))return 0x1618+-0xd39+0x2*-0x46f;if(lr(_0x2f1324[_0x3178c5],uf,fS)){const _0x8a3c56=_0x2f1324['substring'](_0x3178c5,_0x3178c5+(0x1*0x78f+0x1b9e+-0x232b)),_0x4a80b1=_0x2f1324['substring'](_0x3178c5+(0x5*0x3d+0xc3a+0x1*-0xd69),_0x3178c5+(-0x24a4+-0x1c52+0x40fa));return lr(_0x4a80b1,E0,b0)||lr(_0x8a3c56,nm,om)&&lr(_0x4a80b1,nm,om)?-0x385+-0x112a*0x1+0x1*0x14b3:lr(_0x4a80b1,pf,mf)?0x7*-0x4c2+-0x1*-0x11bd+-0x2*-0x7ca:-0x21a3+0x7d*0x3b+0x1*0x4d6;}return lr(_0x2f1324[_0x3178c5+(0xeb*-0x20+0x4*-0x9ac+0xcd*0x55)],pf,mf)?0x23fe+0xb5a+-0x2f56:-0x2e7*0x4+-0xa7+0xc44;}const Tc={'ASCII_LOWERCASE':hS,'ASCII_UPPERCASE':dS,'ASCII_LETTERS':x0,'format'(_0x4e2dc7,..._0x44f9b9){for(let _0x28a734=-0x5*-0x3fb+-0xb6*-0x1f+-0x29f1;_0x28a734<_0x44f9b9['length'];_0x28a734++)_0x4e2dc7=_0x4e2dc7['replace']('{'+_0x28a734+'}',_0x44f9b9[_0x28a734]);return _0x4e2dc7;},'getCodePoint'(_0x200378,_0x1a7cc4){const _0x1f9f3c=_f(_0x200378,_0x1a7cc4);return _0x1f9f3c&&_0x1f9f3c['code'];},'getCodePoints'(_0x5aedae){if(typeof _0x5aedae!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x22abd2=0x3*-0x247+0x21a2+0x8ef*-0x3;const _0x9943b4=[];let _0x58af48;for(;_0x58af48=_f(_0x5aedae,_0x22abd2);)_0x9943b4['push'](_0x58af48['code']),_0x22abd2+=_0x58af48['long']?-0x2576+0x155d+0x101b:-0x26cd+0xbed+-0x3d7*-0x7;return _0x9943b4;},'getSymbols'(_0x5a5797){if(typeof _0x5a5797!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x12ac15=0x6d*-0x34+-0xaae+0x1069*0x2;const _0x37a650=_0x5a5797['length'],_0x39fd97=[];let _0x4ede08=0x609+0xbbc*-0x1+-0x5b3*-0x1,_0x579f2a;for(;_0x12ac15<_0x37a650;){if(_0x4ede08+=P0(_0x5a5797,_0x12ac15+_0x4ede08),_0x579f2a=_0x5a5797[_0x12ac15+_0x4ede08],lr(_0x579f2a,A0,C0)&&(_0x579f2a=_0x5a5797[_0x12ac15+_0x4ede08++]),lr(_0x579f2a,pf,mf)&&(_0x579f2a=_0x5a5797[_0x12ac15+_0x4ede08++]),_0x579f2a&&_0x579f2a['charCodeAt'](-0x1719+-0x8c2+0x1fdb)===w0){_0x579f2a=_0x5a5797[_0x12ac15+_0x4ede08++];continue;}const _0x1c31a8=_0x5a5797['substring'](_0x12ac15,_0x12ac15+_0x4ede08);_0x39fd97['push'](_0x1c31a8),_0x12ac15+=_0x4ede08,_0x4ede08=-0x9e+0x1a6b+-0x19cd;}return _0x39fd97;},'fromCodePoint'(..._0x25c5c3){return _0x25c5c3['map'](_0x17c55a=>_0x17c55a>0x2154*0xa+0x11*-0x1877+-0x1*-0x1529e?(_0x17c55a-=0x15*0xe78+0x14ad7+-0x17aaf,String['fromCharCo'+'de']((_0x17c55a>>0xe*-0x233+0x16af*-0x1+0x7*0x7a5)+(0xfc91+0x1*-0x12121+0xfc90),_0x17c55a%(-0x14a*-0x1+-0x7*0x91+0x6ad)+(-0x3f1e+0xba1*0x22+-0x7044))):String['fromCharCo'+'de'](_0x17c55a))['join']('');}},qr=class qr{static['set'](_0x17e5c3,_0x2e5bb8=!(0xe63+-0x1c55+0xdf2)){_0x2e5bb8?qr['_traceChan'+'nels']['add'](_0x17e5c3):qr['_traceChan'+'nels']['delete'](_0x17e5c3);}static['get'](_0x5af2ef){return qr['_traceChan'+'nels']['has'](_0x5af2ef);}};h(qr,'_traceChan'+'nels',new Set()),h(qr,'stack',!(-0x1c17+0x13*-0x167+-0x36bd*-0x1));let mi=qr;const Vt=class Vt{static['deprecated'](_0x1fee87){Vt['_loggedMes'+'sages']['has'](_0x1fee87)||(Vt['_loggedMes'+'sages']['add'](_0x1fee87),console['warn']('DEPRECATED'+':\x20'+_0x1fee87));}static['removed'](_0x2984b4){Vt['_loggedMes'+'sages']['has'](_0x2984b4)||(Vt['_loggedMes'+'sages']['add'](_0x2984b4),console['error']('REMOVED:\x20'+_0x2984b4));}static['assertDepr'+'ecated'](_0x6e9059,_0x1b4bfb){_0x6e9059||Vt['deprecated'](_0x1b4bfb);}static['assert'](_0x5b1862,..._0x10c0fa){_0x5b1862||console['error']('ASSERT\x20FAI'+'LED:\x20',..._0x10c0fa);}static['assertDest'+'royed'](_0x51043c){var _0x438655;if(_0x51043c!=null&&_0x51043c['__alreadyD'+'estroyed']){const _0x1e2d7a='['+((_0x438655=_0x51043c['constructo'+'r'])==null?void(-0x50f+0x3*0xa21+0x2*-0xcaa):_0x438655['name'])+(']\x20with\x20nam'+'e\x20[')+_0x51043c['name']+(']\x20has\x20alre'+'ady\x20been\x20d'+'estroyed,\x20'+'and\x20cannot'+'\x20be\x20used.');Vt['_loggedMes'+'sages']['has'](_0x1e2d7a)||(Vt['_loggedMes'+'sages']['add'](_0x1e2d7a),console['error']('ASSERT\x20FAI'+'LED:\x20',_0x1e2d7a,_0x51043c));}}static['call'](_0x30358d){_0x30358d();}static['log'](..._0x41f3a0){console['log'](..._0x41f3a0);}static['logOnce'](_0x3bc702,..._0x183ed3){Vt['_loggedMes'+'sages']['has'](_0x3bc702)||(Vt['_loggedMes'+'sages']['add'](_0x3bc702),console['log'](_0x3bc702,..._0x183ed3));}static['warn'](..._0x44719b){console['warn'](..._0x44719b);}static['warnOnce'](_0x3290c9,..._0x367e77){Vt['_loggedMes'+'sages']['has'](_0x3290c9)||(Vt['_loggedMes'+'sages']['add'](_0x3290c9),console['warn'](_0x3290c9,..._0x367e77));}static['error'](..._0x4f9b20){console['error'](..._0x4f9b20);}static['errorOnce'](_0x27208a,..._0x4d7351){Vt['_loggedMes'+'sages']['has'](_0x27208a)||(Vt['_loggedMes'+'sages']['add'](_0x27208a),console['error'](_0x27208a,..._0x4d7351));}static['trace'](_0x20bb37,..._0x49dcfd){mi['get'](_0x20bb37)&&(console['groupColla'+'psed'](_0x20bb37['padEnd'](-0x88+0x4*0x106+-0x37c,'\x20')+'|',..._0x49dcfd),console['groupEnd']());}};h(Vt,'_loggedMes'+'sages',new Set());let w=Vt;class ya{static['setName'](_0x6bff0c,_0x44d947){_0x6bff0c&&(_0x6bff0c['name']=_0x44d947);}static['setLabel'](_0x1ab985,_0x39c750){_0x1ab985&&(_0x1ab985['label']=_0x39c750);}static['setDestroy'+'ed'](_0x21a6f2){_0x21a6f2&&(_0x21a6f2['__alreadyD'+'estroyed']=!(-0x1*0x1b8f+-0x751+0x22e0));}}class M0{constructor(_0x4e2ede,_0x15d4eb,_0x371560,_0x4e899f,_0x2203ba=!(0xbf5+-0x1797*0x1+0xba3)){h(this,'handler'),h(this,'name'),h(this,'callback'),h(this,'scope'),h(this,'_once'),h(this,'_removed',!(0x1*-0x88c+0x1b49+-0x12bc)),(this['handler']=_0x4e2ede,this['name']=_0x15d4eb,this['callback']=_0x371560,this['scope']=_0x4e899f,this['_once']=_0x2203ba);}['off'](){this['_removed']||this['handler']['offByHandl'+'e'](this);}['on'](_0x581574,_0x4936a8,_0xdb85dc=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.on\x20is\x20d'+'eprecated,'+'\x20subscribe'+'\x20to\x20an\x20eve'+'nt\x20from\x20Ev'+'entHandler'+'\x20directly\x20'+'instead.'),this['handler']['_addCallba'+'ck'](_0x581574,_0x4936a8,_0xdb85dc,!(0x1420+0x2155*0x1+0xb*-0x4dc));}['once'](_0x489094,_0x456117,_0x2dec74=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.once\x20is'+'\x20deprecate'+'d,\x20subscri'+'be\x20to\x20an\x20e'+'vent\x20from\x20'+'EventHandl'+'er\x20directl'+'y\x20instead.'),this['handler']['_addCallba'+'ck'](_0x489094,_0x456117,_0x2dec74,!(-0x81b*0x3+-0xac2+0x2313));}set['removed'](_0x5b5b60){_0x5b5b60&&(this['_removed']=!(0x21e8+0xb*-0x3b+-0x3*0xa75));}get['removed'](){return this['_removed'];}['toJSON'](_0xcdc0b7){}}class me{constructor(){h(this,'_callbacks',new Map()),h(this,'_callbackA'+'ctive',new Map());}['initEventH'+'andler'](){this['_callbacks']=new Map(),this['_callbackA'+'ctive']=new Map();}['_addCallba'+'ck'](_0x5c1840,_0x663eaf,_0x543c3f,_0x5d2ed5){if((!_0x5c1840||typeof _0x5c1840!='string'||!_0x663eaf)&&console['warn']('EventHandl'+'er:\x20subscr'+'ibing\x20to\x20a'+'n\x20event\x20('+_0x5c1840+(')\x20with\x20mis'+'sing\x20argum'+'ents'),_0x663eaf),this['_callbacks']['has'](_0x5c1840)||this['_callbacks']['set'](_0x5c1840,[]),this['_callbackA'+'ctive']['has'](_0x5c1840)){const _0xc4d22d=this['_callbackA'+'ctive']['get'](_0x5c1840);_0xc4d22d&&_0xc4d22d===this['_callbacks']['get'](_0x5c1840)&&this['_callbackA'+'ctive']['set'](_0x5c1840,_0xc4d22d['slice']());}const _0x58028d=new M0(this,_0x5c1840,_0x663eaf,_0x543c3f,_0x5d2ed5);return this['_callbacks']['get'](_0x5c1840)['push'](_0x58028d),_0x58028d;}['on'](_0x2f1e97,_0x12b66b,_0x35a766=this){return this['_addCallba'+'ck'](_0x2f1e97,_0x12b66b,_0x35a766,!(-0x1307*0x2+-0xe9e+0x34ad));}['once'](_0x417b5b,_0x2f8a51,_0x42d795=this){return this['_addCallba'+'ck'](_0x417b5b,_0x2f8a51,_0x42d795,!(0x3a3+-0x246f+0x20cc));}['off'](_0x3ce800,_0x47f68a,_0x3b48d2){if(_0x3ce800)this['_callbackA'+'ctive']['has'](_0x3ce800)&&this['_callbackA'+'ctive']['get'](_0x3ce800)===this['_callbacks']['get'](_0x3ce800)&&this['_callbackA'+'ctive']['set'](_0x3ce800,this['_callbackA'+'ctive']['get'](_0x3ce800)['slice']());else{for(const [_0x42beb7,_0x441d61]of this['_callbackA'+'ctive'])this['_callbacks']['has'](_0x42beb7)&&this['_callbacks']['get'](_0x42beb7)===_0x441d61&&this['_callbackA'+'ctive']['set'](_0x42beb7,_0x441d61['slice']());}if(_0x3ce800){if(_0x47f68a){const _0x31a1c0=this['_callbacks']['get'](_0x3ce800);if(!_0x31a1c0)return this;for(let _0x407691=0x56*0x25+0x1f6f+-0x2bdd;_0x407691<_0x31a1c0['length'];_0x407691++)_0x31a1c0[_0x407691]['callback']===_0x47f68a&&(_0x3b48d2&&_0x31a1c0[_0x407691]['scope']!==_0x3b48d2||(_0x31a1c0[_0x407691]['removed']=!(0xb0d*-0x1+0x15c+-0x9b1*-0x1),_0x31a1c0['splice'](_0x407691,0x26d5+0x239d+-0x4a71),_0x407691--));_0x31a1c0['length']===-0x245f+0x1279*0x1+0x11e6&&this['_callbacks']['delete'](_0x3ce800);}else{const _0x592b07=this['_callbacks']['get'](_0x3ce800);if(_0x592b07){for(let _0x3627b6=0x21aa+0x1863+-0x3a0d;_0x3627b6<_0x592b07['length'];_0x3627b6++)_0x592b07[_0x3627b6]['removed']=!(0x1*0x1f6c+-0x13bf+-0xbad);this['_callbacks']['delete'](_0x3ce800);}}}else{for(const _0x27e21d of this['_callbacks']['values']())for(let _0x38de85=-0x16ca+-0x2*-0x1115+-0xb60;_0x38de85<_0x27e21d['length'];_0x38de85++)_0x27e21d[_0x38de85]['removed']=!(-0x1f28+0xc49+-0x12df*-0x1);this['_callbacks']['clear']();}return this;}['offByHandl'+'e'](_0x31be7c){const _0x7dd900=_0x31be7c['name'];_0x31be7c['removed']=!(0x2*-0x338+0x639+0x37),this['_callbackA'+'ctive']['has'](_0x7dd900)&&this['_callbackA'+'ctive']['get'](_0x7dd900)===this['_callbacks']['get'](_0x7dd900)&&this['_callbackA'+'ctive']['set'](_0x7dd900,this['_callbackA'+'ctive']['get'](_0x7dd900)['slice']());const _0x5da50c=this['_callbacks']['get'](_0x7dd900);if(!_0x5da50c)return this;const _0x5dbfab=_0x5da50c['indexOf'](_0x31be7c);return _0x5dbfab!==-(-0x1092+-0xb*-0xf3+0x2*0x311)&&(_0x5da50c['splice'](_0x5dbfab,-0xd82+-0x510+-0x13d*-0xf),_0x5da50c['length']===-0x205b+-0x13c7+0x3422&&this['_callbacks']['delete'](_0x7dd900)),this;}['fire'](_0x2436fa,_0x5d9b6e,_0x48ed6e,_0x9f0ed5,_0x5aff27,_0xd4b628,_0xc19f91,_0xcee6d,_0x1557da){if(!_0x2436fa)return this;const _0x1aeb2e=this['_callbacks']['get'](_0x2436fa);if(!_0x1aeb2e)return this;let _0x58dfe2;this['_callbackA'+'ctive']['has'](_0x2436fa)?this['_callbackA'+'ctive']['get'](_0x2436fa)!==_0x1aeb2e&&(_0x58dfe2=_0x1aeb2e['slice']()):this['_callbackA'+'ctive']['set'](_0x2436fa,_0x1aeb2e);for(let _0x5e3185=-0xf*0xbe+-0xc70+0x1792;(_0x58dfe2||this['_callbackA'+'ctive']['get'](_0x2436fa))&&_0x5e3185<(_0x58dfe2||this['_callbackA'+'ctive']['get'](_0x2436fa))['length'];_0x5e3185++){const _0x55da1e=(_0x58dfe2||this['_callbackA'+'ctive']['get'](_0x2436fa))[_0x5e3185];if(_0x55da1e['callback']&&(_0x55da1e['callback']['call'](_0x55da1e['scope'],_0x5d9b6e,_0x48ed6e,_0x9f0ed5,_0x5aff27,_0xd4b628,_0xc19f91,_0xcee6d,_0x1557da),_0x55da1e['_once'])){const _0x2736a5=this['_callbacks']['get'](_0x2436fa),_0x2b7991=_0x2736a5?_0x2736a5['indexOf'](_0x55da1e):-(0x1*0x10f3+0x227a+0x449*-0xc);if(_0x2b7991!==-(-0x1*0x178f+-0x265+-0x3*-0x8a7)){this['_callbackA'+'ctive']['get'](_0x2436fa)===_0x2736a5&&this['_callbackA'+'ctive']['set'](_0x2436fa,this['_callbackA'+'ctive']['get'](_0x2436fa)['slice']());const _0x4959da=this['_callbacks']['get'](_0x2436fa);if(!_0x4959da)continue;_0x4959da[_0x2b7991]['removed']=!(0xec8+-0x4a9*-0x7+-0x2f67),_0x4959da['splice'](_0x2b7991,-0x1cd*-0x11+0x2631+-0x44cd),_0x4959da['length']===0x1*0xa84+0xd3d*0x2+0x2*-0x127f&&this['_callbacks']['delete'](_0x2436fa);}}}return _0x58dfe2||this['_callbackA'+'ctive']['delete'](_0x2436fa),this;}['hasEvent'](_0x30b2c8){var _0xce8212;return!!((_0xce8212=this['_callbacks']['get'](_0x30b2c8))!=null&&_0xce8212['length']);}}class D0{constructor(){h(this,'_list',[]),h(this,'_index',{});}['push'](_0x5bbaae,_0x42e18d){if(this['_index'][_0x5bbaae])throw Error('Key\x20alread'+'y\x20in\x20index'+'\x20'+_0x5bbaae);const _0x54a34e=this['_list']['push'](_0x42e18d)-(0xd8e*0x1+0x4dc*0x2+-0x1745);this['_index'][_0x5bbaae]=_0x54a34e;}['has'](_0x217177){return this['_index'][_0x217177]!==void(0x2417*0x1+-0xa87+-0x1990);}['get'](_0x38ca6d){const _0x493764=this['_index'][_0x38ca6d];return _0x493764!==void(-0x20*-0x106+0x6f*-0x13+-0xfb*0x19)?this['_list'][_0x493764]:null;}['remove'](_0xb55c16){const _0x200483=this['_index'][_0xb55c16];if(_0x200483!==void(0x349+0x48c*0x1+-0x7d5)){this['_list']['splice'](_0x200483,-0x8e0+-0x1*0x1465+-0x1d46*-0x1),delete this['_index'][_0xb55c16];for(_0xb55c16 in this['_index']){const _0xc2f199=this['_index'][_0xb55c16];_0xc2f199>_0x200483&&(this['_index'][_0xb55c16]=_0xc2f199-(0x98d+-0xb2+-0x8da));}return!(0x76*0x51+-0xd*0x1c3+0xe6f*-0x1);}return!(0xa*-0x216+-0xe50+-0x1*-0x232d);}['list'](){return this['_list'];}['clear'](){this['_list']['length']=-0xd01+-0x2312+0x1*0x3013;for(const _0x410358 in this['_index'])delete this['_index'][_0x410358];}}const I0=_0x138c09=>{const _0x398617={};let _0x23b702=_0x398617;return()=>(_0x23b702===_0x398617&&(_0x23b702=_0x138c09()),_0x23b702);},ii=class ii{static['loadScript'](_0x5287c3,_0x5b63f4){const _0x3b55c0=document['createElem'+'ent']('script');_0x3b55c0['setAttribu'+'te']('src',_0x5287c3),_0x3b55c0['onload']=()=>{_0x5b63f4(null);},_0x3b55c0['onerror']=()=>{_0x5b63f4('Failed\x20to\x20'+'load\x20scrip'+'t=\x27'+_0x5287c3+'\x27');},document['body']['appendChil'+'d'](_0x3b55c0);}static['loadWasm'](_0x53a6d1,_0x3ab262,_0x59628f){const _0x24f809=ii['wasmSuppor'+'ted']()&&_0x3ab262['glueUrl']&&_0x3ab262['wasmUrl']?_0x3ab262['glueUrl']:_0x3ab262['fallbackUr'+'l'];_0x24f809?ii['loadScript'](_0x24f809,_0x82517c=>{if(_0x82517c)_0x59628f(_0x82517c,null);else{const _0x49a336=window[_0x53a6d1];window[_0x53a6d1]=void(0x15d9+0x1a64+-0x303d),_0x49a336({'locateFile':()=>_0x3ab262['wasmUrl'],'onAbort':()=>{_0x59628f('wasm\x20modul'+'e\x20aborted.');}})['then'](_0x7fe60e=>{_0x59628f(null,_0x7fe60e);});}}):_0x59628f('No\x20support'+'ed\x20wasm\x20mo'+'dules\x20foun'+'d.',null);}static['getModule'](_0x3a5ac1){return ii['modules']['hasOwnProp'+'erty'](_0x3a5ac1)||(ii['modules'][_0x3a5ac1]={'config':null,'initializing':!(-0x892*0x1+-0x787+0x101a),'instance':null,'callbacks':[]}),ii['modules'][_0x3a5ac1];}static['initialize'](_0x3b7850,_0x1e5ea2){if(_0x1e5ea2['initializi'+'ng'])return;const _0x729a8b=_0x1e5ea2['config'];(_0x729a8b['glueUrl']||_0x729a8b['wasmUrl']||_0x729a8b['fallbackUr'+'l'])&&(_0x1e5ea2['initializi'+'ng']=!(-0x1e75+0x20ae+-0x239),ii['loadWasm'](_0x3b7850,_0x729a8b,(_0x3af256,_0x2365fa)=>{_0x3af256?_0x729a8b['errorHandl'+'er']?_0x729a8b['errorHandl'+'er'](_0x3af256):console['error']('failed\x20to\x20'+'initialize'+'\x20module='+_0x3b7850+'\x20error='+_0x3af256):(_0x1e5ea2['instance']=_0x2365fa,_0x1e5ea2['callbacks']['forEach'](_0x56f87d=>{_0x56f87d(_0x2365fa);}));}));}};h(ii,'modules',{}),h(ii,'wasmSuppor'+'ted',I0(()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0xf609f8=new WebAssembly['Module'](Uint8Array['of'](-0x17ff*0x1+0x14e+0x16b1,0xe2e+-0x1cd0+-0x9*-0x1ab,0x1b*0x103+-0xec8+-0xc16,-0xe01+0x1e9f+-0x1031,0x25f1*0x1+-0x12e6+0x985*-0x2,-0x1*-0x21c2+0x8c3*-0x1+-0x18ff,0x130a+-0x1219+-0xf1*0x1,-0x37*-0x5d+0x11cf*-0x2+-0x1*-0xfa3));if(_0xf609f8 instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0xf609f8)instanceof WebAssembly['Instance'];}}catch{}return!(-0x297*-0xb+-0x188c+-0x12*0x38);}));let $r=ii;class uS{static['setConfig'](_0x15c72c,_0x24626a){const _0xf2cdc0=$r['getModule'](_0x15c72c);_0xf2cdc0['config']=_0x24626a,_0xf2cdc0['callbacks']['length']>0x6a*-0x16+-0xd*0x13d+0x1935&&$r['initialize'](_0x15c72c,_0xf2cdc0);}static['getConfig'](_0x51b9c2){var _0x3caefc,_0x42ee53;return(_0x42ee53=(_0x3caefc=$r['modules'])==null?void(-0xb41+-0x16a1+0x21e2*0x1):_0x3caefc[_0x51b9c2])==null?void(-0x17*-0x55+-0xbba+0x15d*0x3):_0x42ee53['config'];}static['getInstanc'+'e'](_0x5830fa,_0x182a07){const _0x455bd9=$r['getModule'](_0x5830fa);_0x455bd9['instance']?_0x182a07(_0x455bd9['instance']):(_0x455bd9['callbacks']['push'](_0x182a07),_0x455bd9['config']&&$r['initialize'](_0x5830fa,_0x455bd9));}}class pS{constructor(_0xdcef8e){h(this,'arraybuffe'+'r'),h(this,'dataView'),h(this,'offset',0xb81*0x3+0x4*-0x76b+-0x4d7),(this['arraybuffe'+'r']=_0xdcef8e,this['dataView']=new DataView(_0xdcef8e));}get['remainingB'+'ytes'](){return this['dataView']['byteLength']-this['offset'];}['reset'](_0x4cc304=-0x42*-0x4f+0xd96*0x1+0x6a*-0x52){this['offset']=_0x4cc304;}['skip'](_0x154de3){this['offset']+=_0x154de3;}['align'](_0x9f6a39){this['offset']=this['offset']+_0x9f6a39-(0x4fd*-0x6+0x31e+-0x5*-0x55d)&~(_0x9f6a39-(0x1e10+-0x9*0x43f+0x828));}['_inc'](_0x786234){return this['offset']+=_0x786234,this['offset']-_0x786234;}['readChar'](){return String['fromCharCo'+'de'](this['dataView']['getUint8'](this['offset']++));}['readChars'](_0x3ff604){let _0xb14e9a='';for(let _0x63cde=0x24*-0x9d+-0x35e*0x2+-0x4*-0x734;_0x63cde<_0x3ff604;++_0x63cde)_0xb14e9a+=this['readChar']();return _0xb14e9a;}['readU8'](){return this['dataView']['getUint8'](this['offset']++);}['readU16'](){return this['dataView']['getUint16'](this['_inc'](-0x1*0x2591+0x1a5e*0x1+0xb35*0x1),!(-0x1ea1*0x1+0x1181+0xa0*0x15));}['readU32'](){return this['dataView']['getUint32'](this['_inc'](-0xd67*0x2+-0x30c+0xeef*0x2),!(0x318+-0x34*0x49+0xbbc));}['readU64'](){return this['readU32']()+(0x5*0x4ba+0x12f*-0x17+0x399)**(0xa95+0x2359*0x1+-0x2dce)*this['readU32']();}['readU32be'](){return this['dataView']['getUint32'](this['_inc'](0x33*-0xa5+0x1*0x1b02+0x5e1),!(0x1*0x17a9+0x1*-0x139b+-0x40d));}['readArray'](_0x235b9c){for(let _0x3436ee=0x2*0x6eb+0x9*0x452+-0x34b8;_0x3436ee<_0x235b9c['length'];++_0x3436ee)_0x235b9c[_0x3436ee]=this['readU8']();}['readLine'](){const _0x597b63=this['dataView'];let _0x1ee01c='';for(;!(this['offset']>=_0x597b63['byteLength']);){const _0x59e263=String['fromCharCo'+'de'](this['readU8']());if(_0x59e263==='\x0a')break;_0x1ee01c+=_0x59e263;}return _0x1ee01c;}}class Bc{constructor(_0x316738){h(this,'items',[]),h(this,'length',-0x45a*-0x7+0xb*-0x2e6+0x16c),h(this,'loopIndex',-(-0xc0c*0x1+-0x2e6*-0x3+-0x1*-0x35b)),h(this,'_sortBy'),h(this,'_sortHandl'+'er'),(this['_sortBy']=_0x316738['sortBy'],this['_sortHandl'+'er']=this['_doSort']['bind'](this));}['_binarySea'+'rch'](_0x37df18){let _0x4a0222=0x4d*0x31+0x857*0x1+-0x1714,_0x41cb1b=this['items']['length']-(0x114c+-0x176e+0x1*0x623);const _0x46b1d4=_0x37df18[this['_sortBy']];let _0xd16902,_0x55ee59;for(;_0x4a0222<=_0x41cb1b;)_0xd16902=Math['floor']((_0x4a0222+_0x41cb1b)/(-0x135c+-0x85d*-0x4+-0x2*0x70b)),_0x55ee59=this['items'][_0xd16902][this['_sortBy']],_0x55ee59<=_0x46b1d4?_0x4a0222=_0xd16902+(-0x1dd3+0xf49+-0x3*-0x4d9):_0x55ee59>_0x46b1d4&&(_0x41cb1b=_0xd16902-(0x1*0x1357+0x1975+-0x1*0x2ccb));return _0x4a0222;}['_doSort'](_0xea8397,_0x448569){const _0x208955=this['_sortBy'];return _0xea8397[_0x208955]-_0x448569[_0x208955];}['insert'](_0x5bb664){const _0x212fc3=this['_binarySea'+'rch'](_0x5bb664);this['items']['splice'](_0x212fc3,0x1c9*0x5+-0x53*0x61+-0x3*-0x782,_0x5bb664),this['length']++,this['loopIndex']>=_0x212fc3&&this['loopIndex']++;}['append'](_0x5b96ae){this['items']['push'](_0x5b96ae),this['length']++;}['remove'](_0xfa41c8){const _0x416b44=this['items']['indexOf'](_0xfa41c8);_0x416b44<0x1adf*0x1+-0x3*0x1af+-0x15d2||(this['items']['splice'](_0x416b44,-0x23fb+-0x1f*0x73+0x3*0x10a3),this['length']--,this['loopIndex']>=_0x416b44&&this['loopIndex']--);}['sort'](){const _0x4279c5=this['loopIndex']>=0xed2+0x5c*0x53+-0x2*0x1653?this['items'][this['loopIndex']]:null;this['items']['sort'](this['_sortHandl'+'er']),_0x4279c5!==null&&(this['loopIndex']=this['items']['indexOf'](_0x4279c5));}}class To extends me{constructor(_0x428c78){super(),h(this,'_index',{}),h(this,'_list',[]),this['_parent']=_0x428c78;}['add'](..._0x33a08d){let _0x88f33a=!(0x1f7*0x1+-0x1b50+0x195a);const _0x34ed03=this['_processAr'+'guments'](_0x33a08d,!(-0x1114+0x245b+-0x3*0x66d));if(!_0x34ed03['length'])return _0x88f33a;for(let _0x8ba403=-0x2456+-0x203a+0x1124*0x4;_0x8ba403<_0x34ed03['length'];_0x8ba403++)this['_index'][_0x34ed03[_0x8ba403]]||(_0x88f33a=!(0x2*0xf0b+-0x267+0x13*-0x175),this['_index'][_0x34ed03[_0x8ba403]]=!(0xdf7+0x588+0x1*-0x137f),this['_list']['push'](_0x34ed03[_0x8ba403]),this['fire']('add',_0x34ed03[_0x8ba403],this['_parent']));return _0x88f33a&&this['fire']('change',this['_parent']),_0x88f33a;}['remove'](..._0x5106e0){let _0x460b28=!(-0x1718+-0x24e2+0x3bfb);if(!this['_list']['length'])return _0x460b28;const _0x59c444=this['_processAr'+'guments'](_0x5106e0,!(0x1c4e+-0x2636+0x9e8*0x1));if(!_0x59c444['length'])return _0x460b28;for(let _0x2e2990=0x2*-0x73+0x1d05+-0x17*0x139;_0x2e2990<_0x59c444['length'];_0x2e2990++)this['_index'][_0x59c444[_0x2e2990]]&&(_0x460b28=!(-0x49*-0x47+0x22*-0xed+-0x23f*-0x5),delete this['_index'][_0x59c444[_0x2e2990]],this['_list']['splice'](this['_list']['indexOf'](_0x59c444[_0x2e2990]),-0x24*-0x86+0x1416+-0x5*0x7c9),this['fire']('remove',_0x59c444[_0x2e2990],this['_parent']));return _0x460b28&&this['fire']('change',this['_parent']),_0x460b28;}['clear'](){if(!this['_list']['length'])return;const _0x4febd0=this['_list']['slice'](0x26b3*0x1+-0x1*-0x10ee+-0x37a1);this['_list']=[],this['_index']={};for(let _0x37b94a=-0x52e+0x1f*-0x4f+0xebf;_0x37b94a<_0x4febd0['length'];_0x37b94a++)this['fire']('remove',_0x4febd0[_0x37b94a],this['_parent']);this['fire']('change',this['_parent']);}['has'](..._0x5f21cf){return this['_list']['length']?this['_has'](this['_processAr'+'guments'](_0x5f21cf)):!(-0x2d*-0x4f+0x12a3+-0x2085);}['_has'](_0x1701dc){if(!this['_list']['length']||!_0x1701dc['length'])return!(0x183a+-0x34e+-0x14eb);for(let _0x517a30=0x2104+0x1d4+-0x8*0x45b;_0x517a30<_0x1701dc['length'];_0x517a30++)if(_0x1701dc[_0x517a30]['length']===-0x1*0x13e7+-0x9d6+0x1a7*0x12){if(this['_index'][_0x1701dc[_0x517a30][-0x19f8+0x1496+0x562]])return!(-0x2194+-0x306*-0x6+0x4c*0x34);}else{let _0x48c498=!(0x19d9+0x4c*0x5b+-0x119f*0x3);for(let _0x1d9485=0x1b31+-0x79b*-0x1+-0x22cc;_0x1d9485<_0x1701dc[_0x517a30]['length'];_0x1d9485++)if(!this['_index'][_0x1701dc[_0x517a30][_0x1d9485]]){_0x48c498=!(-0x17b9*0x1+-0x2*0xf9d+0x36f4);break;}if(_0x48c498)return!(-0x93b+-0xd01*-0x3+-0x1dc8);}return!(-0x247c+0x187*0xd+0x1*0x10a2);}['list'](){return this['_list']['slice'](-0x8b4+-0x2*-0x351+0x6a*0x5);}['_processAr'+'guments'](_0x49fbbc,_0x184e45){const _0x479475=[];let _0x3c90c4=[];if(!_0x49fbbc||!_0x49fbbc['length'])return _0x479475;for(let _0x583e04=0x10de+0x1*0x20d8+-0x31b6;_0x583e04<_0x49fbbc['length'];_0x583e04++)if(_0x49fbbc[_0x583e04]instanceof Array){_0x184e45||(_0x3c90c4=[]);for(let _0x26a809=-0x2108+-0x1143+0x19*0x203;_0x26a809<_0x49fbbc[_0x583e04]['length'];_0x26a809++)typeof _0x49fbbc[_0x583e04][_0x26a809]=='string'&&(_0x184e45?_0x479475['push'](_0x49fbbc[_0x583e04][_0x26a809]):_0x3c90c4['push'](_0x49fbbc[_0x583e04][_0x26a809]));!_0x184e45&&_0x3c90c4['length']&&_0x479475['push'](_0x3c90c4);}else typeof _0x49fbbc[_0x583e04]=='string'&&(_0x184e45?_0x479475['push'](_0x49fbbc[_0x583e04]):_0x479475['push']([_0x49fbbc[_0x583e04]]));return _0x479475;}get['size'](){return this['_list']['length'];}}h(To,'EVENT_ADD','add'),h(To,'EVENT_REMO'+'VE','remove'),h(To,'EVENT_CHAN'+'GE','change');const de=typeof window<'u'&&window['performanc'+'e']&&window['performanc'+'e']['now']?performance['now']['bind'](performance):Date['now'],L0=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class dd{constructor(_0x32a34f){h(this,'scheme'),h(this,'authority'),h(this,'path'),h(this,'query'),h(this,'fragment');const _0x5e11de=_0x32a34f['match'](L0);this['scheme']=_0x5e11de[0x895*-0x3+0x23b0+-0x9ef],this['authority']=_0x5e11de[0x1*-0x1921+0x2060+-0x73b],this['path']=_0x5e11de[0x40*-0x33+-0xf*0x25e+0x3047],this['query']=_0x5e11de[-0x4*-0x6bb+-0x33*-0xb2+-0x3e5b],this['fragment']=_0x5e11de[-0x1acf+-0x531+-0x8b*-0x3b];}['toString'](){let _0x2b173f='';return this['scheme']&&(_0x2b173f+=this['scheme']+':'),this['authority']&&(_0x2b173f+='//'+this['authority']),_0x2b173f+=this['path'],this['query']&&(_0x2b173f+='?'+this['query']),this['fragment']&&(_0x2b173f+='#'+this['fragment']),_0x2b173f;}['getQuery'](){const _0xff9c64={};if(this['query']){const _0x536c58=decodeURIComponent(this['query'])['split']('&');for(const _0x4c77c2 of _0x536c58){const _0x495caa=_0x4c77c2['split']('=');_0xff9c64[_0x495caa[-0x545*-0x4+-0x1d*-0x119+-0x34e9]]=_0x495caa[-0x1889+-0x2f*-0xd3+-0xe33];}}return _0xff9c64;}['setQuery'](_0x464f1f){let _0x821b2c='';for(const _0x24bec9 in _0x464f1f)_0x464f1f['hasOwnProp'+'erty'](_0x24bec9)&&(_0x821b2c!==''&&(_0x821b2c+='&'),_0x821b2c+=encodeURIComponent(_0x24bec9)+'='+encodeURIComponent(_0x464f1f[_0x24bec9]));this['query']=_0x821b2c;}}const R0=0x2109+-0x1489*0x1+-0xc80,Pu=0x152e+-0xfa1*0x1+-0x58c,lm=-0xf*-0x275+0xf6b+0x1*-0x3442,O0=-0x4f9+-0x106b+0x1b*0xcb,Y={'DEG_TO_RAD':Math['PI']/(-0x1072+0x333*-0x4+-0x2*-0xef9),'RAD_TO_DEG':(-0xf02+-0x11d0+-0x7*-0x4ca)/Math['PI'],'clamp'(_0x4e929c,_0x26e99e,_0x42c869){return _0x4e929c>=_0x42c869?_0x42c869:_0x4e929c<=_0x26e99e?_0x26e99e:_0x4e929c;},'intToBytes24'(_0x5e6e35){const _0x1bc89e=_0x5e6e35>>0x7*-0x6a+0x1482+-0x118c&0x5f*0x1+-0x4*-0x443+-0x106c,_0x593366=_0x5e6e35>>-0x11*0x137+0x2684+-0x11d5&0x47*0x52+0x78c+-0x1d4b,_0x42be53=_0x5e6e35&0x2*-0xbb7+0x43e*0x5+0x337;return[_0x1bc89e,_0x593366,_0x42be53];},'intToBytes32'(_0x55917b){const _0x36f610=_0x55917b>>0x1b5b+-0x105*0x25+0xa76&-0x1b*-0x10d+-0x250d+0x9ad,_0x56b917=_0x55917b>>-0xd*-0x269+-0x6d1+-0x1874&-0x25ea+0xcde+0x1*0x1a0b,_0xd2b9b7=_0x55917b>>-0x1f1a*0x1+-0x1b31*0x1+-0xbd*-0x4f&-0x9bb+0x7*0x3e6+-0x1*0x1090,_0x21fe94=_0x55917b&-0x1fc4+0x1*0x1efd+0x1c6;return[_0x36f610,_0x56b917,_0xd2b9b7,_0x21fe94];},'bytesToInt24'(_0x1babf4,_0x2012cd,_0x47f0fb){return _0x1babf4['length']&&(_0x47f0fb=_0x1babf4[-0x1cfa+-0x97*-0x2a+0x436],_0x2012cd=_0x1babf4[-0x10cb+-0xba4+-0x34*-0x8c],_0x1babf4=_0x1babf4[-0x676*0x1+-0x1a*-0xaf+0x2*-0x5a8]),_0x1babf4<<-0x15*0x101+-0xdd5*0x2+0x6f9*0x7|_0x2012cd<<-0x1*-0x19a3+0xad*-0x1f+-0x4a8|_0x47f0fb;},'bytesToInt32'(_0xd9f05,_0x4d3f1b,_0x214305,_0x53c074){return _0xd9f05['length']&&(_0x53c074=_0xd9f05[-0x4b9*0x7+-0x269d+0x47af],_0x214305=_0xd9f05[-0x14e*0x11+0xca1+-0x1*-0x98f],_0x4d3f1b=_0xd9f05[0x8eb+-0x1*0x1af2+-0x241*-0x8],_0xd9f05=_0xd9f05[-0x1d4a+-0xdab+0x2af5]),(_0xd9f05<<0x505+0x2146+0x7*-0x575|_0x4d3f1b<<-0x2423+0x17*0x3b+0x1ee6|_0x214305<<0x908+-0x9f6+0xf6|_0x53c074)>>>0xcc1*-0x1+0xe*0x2b+0xa67;},'lerp'(_0x49cc16,_0x33f5f5,_0x47e207){return _0x49cc16+(_0x33f5f5-_0x49cc16)*Y['clamp'](_0x47e207,0x1ee9*0x1+0xbfc+-0x2ae5,0x1*-0x181c+-0x1*0x1899+0x30b6);},'lerpAngle'(_0xe1dc2f,_0x461076,_0x20250a){return _0x461076-_0xe1dc2f>-0x19f0*-0x1+0x1335+-0x2c71&&(_0x461076-=0x1*-0x260b+0x201b+0x2*0x3ac),_0x461076-_0xe1dc2f<-(-0x1e7d+-0xbf*-0xb+0x16fc)&&(_0x461076+=0x1*-0xafd+0x20*0x4a+-0x73*-0x7),Y['lerp'](_0xe1dc2f,_0x461076,Y['clamp'](_0x20250a,-0x1*-0x1225+-0x940*0x2+-0x7*-0xd,0x4f5+0x24ea+-0x2*0x14ef));},'powerOfTwo'(_0xc4eaf9){return _0xc4eaf9!==0x1498+-0x2116+0xc7e&&!(_0xc4eaf9&_0xc4eaf9-(0x615*-0x1+0x112d*0x1+0xa7*-0x11));},'nextPowerOfTwo'(_0x3eb53a){return _0x3eb53a--,_0x3eb53a|=_0x3eb53a>>0x2113*0x1+-0x10d7+-0x103b,_0x3eb53a|=_0x3eb53a>>0x6dd*-0x1+-0x22e4+0x29c3,_0x3eb53a|=_0x3eb53a>>-0x14f9+0x1c9f+-0x7a2,_0x3eb53a|=_0x3eb53a>>-0x33e+-0x227a+0x25c0,_0x3eb53a|=_0x3eb53a>>0x37f*-0x5+0xf01*0x2+-0xc77,_0x3eb53a++,_0x3eb53a;},'nearestPowerOfTwo'(_0x570afb){return Math['pow'](-0x134f*-0x1+0xd*0x167+0x8*-0x4b1,Math['round'](Math['log2'](_0x570afb)));},'random'(_0x40e82c,_0x25b978){const _0x5b7c62=_0x25b978-_0x40e82c;return Math['random']()*_0x5b7c62+_0x40e82c;},'smoothstep'(_0x566509,_0x5df7d1,_0xa1c9a6){return _0xa1c9a6<=_0x566509?0x2*-0x355+-0x34*-0xa9+-0x1baa:_0xa1c9a6>=_0x5df7d1?-0xc6d*-0x1+-0x1fd3+0x1367*0x1:(_0xa1c9a6=(_0xa1c9a6-_0x566509)/(_0x5df7d1-_0x566509),_0xa1c9a6*_0xa1c9a6*(-0x1*-0x877+0x20ad+-0x2921-(-0x142f+0x475+0xfbc)*_0xa1c9a6));},'smootherstep'(_0xbc1355,_0x1097cb,_0x90481d){return _0x90481d<=_0xbc1355?0x31f*0x5+-0x1a*-0x45+-0x1*0x169d:_0x90481d>=_0x1097cb?-0x436+-0x1aa6+0x1edd:(_0x90481d=(_0x90481d-_0xbc1355)/(_0x1097cb-_0xbc1355),_0x90481d*_0x90481d*_0x90481d*(_0x90481d*(_0x90481d*(-0x1*-0x138+-0xbe0+0x1*0xaae)-(-0x18d8+0x5ad+0x133a))+(0x1723+0x40b+0x6*-0x486)));},'roundUp'(_0x47a045,_0x50afd7){return _0x50afd7===0x1505*0x1+0x37f+-0x1884?_0x47a045:Math['ceil'](_0x47a045/_0x50afd7)*_0x50afd7;},'between'(_0x3dab38,_0x355f72,_0x12f063,_0x4ee1c4){const _0x16cecc=Math['min'](_0x355f72,_0x12f063),_0x2f14a2=Math['max'](_0x355f72,_0x12f063);return _0x4ee1c4?_0x3dab38>=_0x16cecc&&_0x3dab38<=_0x2f14a2:_0x3dab38>_0x16cecc&&_0x3dab38<_0x2f14a2;}},Tt=class Tt{constructor(_0x445483=0x2a1+-0x2297+0x1ff6,_0x4780f5=0xb*-0x18e+0x3*-0x306+0x1a2c,_0xabe963=-0x1e8a+0x1b16+0x374,_0x4b39e6=-0x74f*0x1+0x23df+0x3*-0x985){h(this,'r'),h(this,'g'),h(this,'b'),h(this,'a');const _0x4f82be=_0x445483['length'];_0x4f82be===0xa6a+0x218+0x1c9*-0x7||_0x4f82be===0x1*-0x2567+0xac9*0x1+0x1e7*0xe?(this['r']=_0x445483[-0x165*0x9+0x12a1+-0x614],this['g']=_0x445483[-0x191*-0x5+-0xd15*-0x2+-0x26*0xe5],this['b']=_0x445483[-0x268+-0x1*-0x20dc+-0x6*0x513],this['a']=_0x445483[0x19b2+-0x2210+0x861]??0x16eb*-0x1+0x7*-0x56b+-0x1*-0x3cd9):(this['r']=_0x445483,this['g']=_0x4780f5,this['b']=_0xabe963,this['a']=_0x4b39e6);}['clone'](){const _0x1ae229=this['constructo'+'r'];return new _0x1ae229(this['r'],this['g'],this['b'],this['a']);}['copy'](_0xb7141d){return this['r']=_0xb7141d['r'],this['g']=_0xb7141d['g'],this['b']=_0xb7141d['b'],this['a']=_0xb7141d['a'],this;}['equals'](_0xe44568){return this['r']===_0xe44568['r']&&this['g']===_0xe44568['g']&&this['b']===_0xe44568['b']&&this['a']===_0xe44568['a'];}['set'](_0x3861fb,_0x5b199a,_0x58b310,_0xeee25f=0x16f4+-0xcc6+-0xa2d){return this['r']=_0x3861fb,this['g']=_0x5b199a,this['b']=_0x58b310,this['a']=_0xeee25f,this;}['lerp'](_0x21a4d8,_0x27e3b9,_0x2a5b80){return this['r']=_0x21a4d8['r']+_0x2a5b80*(_0x27e3b9['r']-_0x21a4d8['r']),this['g']=_0x21a4d8['g']+_0x2a5b80*(_0x27e3b9['g']-_0x21a4d8['g']),this['b']=_0x21a4d8['b']+_0x2a5b80*(_0x27e3b9['b']-_0x21a4d8['b']),this['a']=_0x21a4d8['a']+_0x2a5b80*(_0x27e3b9['a']-_0x21a4d8['a']),this;}['linear'](_0x2f629f=this){return this['r']=Math['pow'](_0x2f629f['r'],0x2165*0x1+-0x2096+0x29*-0x5+0.20000000000000018),this['g']=Math['pow'](_0x2f629f['g'],0xb13+-0x117+-0x9fa+0.20000000000000018),this['b']=Math['pow'](_0x2f629f['b'],0x198+-0x2300+0x216a+0.20000000000000018),this['a']=_0x2f629f['a'],this;}['gamma'](_0x5b5b20=this){return this['r']=Math['pow'](_0x5b5b20['r'],(0x555+0xe58+-0x13ac)/(-0x7f3+0x39f+-0x4a*-0xf+0.20000000000000018)),this['g']=Math['pow'](_0x5b5b20['g'],(0x130*0xb+0x18*-0xe3+-0x1a5*-0x5)/(0x2064+-0x24de+-0x7*-0xa4+0.20000000000000018)),this['b']=Math['pow'](_0x5b5b20['b'],(0x583*-0x4+0x587+0x1086)/(-0x13c2+-0x1e3+0x15a7+0.20000000000000018)),this['a']=_0x5b5b20['a'],this;}['mulScalar'](_0x130a49){return this['r']*=_0x130a49,this['g']*=_0x130a49,this['b']*=_0x130a49,this;}['fromString'](_0x50e3f4){const _0x310e6f=parseInt(_0x50e3f4['replace']('#','0x'),-0x121b+0x1cfd+-0xad2);let _0x34716e;return _0x50e3f4['length']>-0x46b*0x1+0x2285+-0x1e13?_0x34716e=Y['intToBytes'+'32'](_0x310e6f):(_0x34716e=Y['intToBytes'+'24'](_0x310e6f),_0x34716e[0x14d+-0x2*-0x539+-0xbbc]=-0x1739+0x11c*-0x1e+0x3980),this['set'](_0x34716e[-0x522+0x1*-0x1b0+0xc2*0x9]/(0x1a81+-0x6b6*-0x4+0x1*-0x345a),_0x34716e[-0x148+-0x1*0x207+-0x350*-0x1]/(-0x167*0xe+0x1*-0xb31+-0x2*-0xfe9),_0x34716e[-0x2174+-0x1e95+0x400b]/(0xb7b+0x10f3+-0x3*0x925),_0x34716e[-0x1bc9+-0x146*-0xd+-0xb3e*-0x1]/(-0xa46+0x1*-0xf5b+0x1aa0)),this;}['fromArray'](_0x482102,_0x2a75ae=-0x14a1*0x1+-0x1*-0x196d+-0x4cc){return this['r']=_0x482102[_0x2a75ae]??this['r'],this['g']=_0x482102[_0x2a75ae+(0xf31*-0x1+-0x2*0x206+0x133e)]??this['g'],this['b']=_0x482102[_0x2a75ae+(0xa03+-0x6e*-0x35+-0x1*0x20c7)]??this['b'],this['a']=_0x482102[_0x2a75ae+(0x1aa2+0x2428*0x1+0x5b5*-0xb)]??this['a'],this;}['toString'](_0x5468b8,_0x5e087a){const {r:_0x29b8f5,g:_0x200ad5,b:_0x1f7f20,a:_0x4ddd29}=this;if(_0x5e087a||_0x29b8f5>0x1*-0x1086+-0x1c6c+0x1*0x2cf3||_0x200ad5>0x2*0x8c1+0x207e+0x31ff*-0x1||_0x1f7f20>-0x2*0x32d+0x1dcf+-0x1*0x1774)return _0x29b8f5['toFixed'](0x1fe+0x757*0x1+-0x952)+',\x20'+_0x200ad5['toFixed'](-0x4*0x73c+0x1f0*-0x5+0x26a3)+',\x20'+_0x1f7f20['toFixed'](-0x1ef0+0x16d7+-0x4*-0x207)+',\x20'+_0x4ddd29['toFixed'](0xa6f+-0x57*-0x67+-0x2d6d);let _0x231c43='#'+((0xf3*-0x5+-0x1*-0x1fb2+0x2*-0xd79<<0x2*0x550+-0x79d*0x1+-0x2eb)+(Math['round'](_0x29b8f5*(0x7*0x9e+-0x1a*-0x106+0x1def*-0x1))<<-0xd4f+0x1f*0x75+-0xcc)+(Math['round'](_0x200ad5*(0x35*0x2f+0x2*-0x7a5+0x68e))<<-0xe31+-0x1*0xf66+0x1d9f)+Math['round'](_0x1f7f20*(-0x2261+-0x751*0x2+0x3202)))['toString'](-0x6b+0xca4+0x1*-0xc29)['slice'](0x2*-0xde2+-0x1ff7*-0x1+-0x1*0x432);if(_0x5468b8===!(-0x1bec+0x3*-0x533+0x1*0x2b85)){const _0x4c78c1=Math['round'](_0x4ddd29*(-0x1d39+0x1c01+0x237))['toString'](-0xf7+-0x110a+0x1211);this['a']<(0x1*-0x471+-0x69e*0x5+0x1*0x2597)/(0x11c3+-0x933+-0x791)?_0x231c43+='0'+_0x4c78c1:_0x231c43+=_0x4c78c1;}return _0x231c43;}['toArray'](_0x4473a1=[],_0x4cefd6=0x1980+-0x5ff*-0x1+0xb*-0x2dd,_0x278d52=!(-0xbc*0x1+-0x13bb+0xa9*0x1f)){return _0x4473a1[_0x4cefd6]=this['r'],_0x4473a1[_0x4cefd6+(0x1*-0x18c3+-0x26cf*0x1+0x3f93)]=this['g'],_0x4473a1[_0x4cefd6+(-0x6be*0x1+0x2685+-0x1fc5)]=this['b'],_0x278d52&&(_0x4473a1[_0x4cefd6+(0xaee+-0xe53*-0x2+-0x2791)]=this['a']),_0x4473a1;}};h(Tt,'BLACK',Object['freeze'](new Tt(0x1079+0x1afd*0x1+-0x2b76,0x1ec9+-0xa64+0x1465*-0x1,0x188d+-0x1088*0x1+-0x805,0x34*0xd+0x8*0x398+-0x1f63*0x1))),h(Tt,'BLUE',Object['freeze'](new Tt(0x579+-0xe09+-0x224*-0x4,-0x13cd+0x19*-0x5d+-0x2*-0xe71,-0x1*-0x1bc5+0x1891+-0x3455,0x3*0x2f0+0x126d*0x1+-0x1b3c))),h(Tt,'CYAN',Object['freeze'](new Tt(-0xa1b*-0x2+0x3*0xcad+0x3a3d*-0x1,0x2c+-0x14c+0x121,0x20b5+-0x40a+-0x1*0x1caa,-0x16d3+-0x9f2*-0x2+-0x1*-0x2f0))),h(Tt,'GRAY',Object['freeze'](new Tt(0x65e+0x91a+-0xf78+0.5,-0x2079+-0x1*0x1edb+0x151c*0x3+0.5,-0xe8f+0xaf+-0x4a0*-0x3+0.5,-0x3*0xcd6+-0x1e1*-0x4+-0x1*-0x1eff))),h(Tt,'GREEN',Object['freeze'](new Tt(0x255c+-0x1a49*0x1+-0xb13,0x3*-0x5b7+-0x213*-0x4+0x16*0x67,0xcd7+0x16d6+0x23ad*-0x1,0x1*-0x2557+-0xc7f*0x2+0x3e56))),h(Tt,'MAGENTA',Object['freeze'](new Tt(-0x49*0x6e+0x2fb+0x5c*0x4f,0x8f7+-0x74*-0xd+-0xedb,0xd36+-0x18ae+0x59*0x21,0x2446+0x70c+-0x2b51))),h(Tt,'RED',Object['freeze'](new Tt(-0x1576*-0x1+0x249c+-0x3a11,-0x2638+-0x1*0x2058+0x1*0x4690,0x66*0x1+0x1678+-0x16de,-0x1851+-0x2339+-0x3*-0x13d9))),h(Tt,'WHITE',Object['freeze'](new Tt(-0x245e+-0x9*0x2e9+0x3e90,-0x5af+0x3e9+0x1c7,0x2*0x421+0x2*-0xfb3+0xed*0x19,-0x164d+-0x152d+0x1*0x2b7b))),h(Tt,'YELLOW',Object['freeze'](new Tt(0x1e0e+0x21d1+-0x3fde,0x222b*-0x1+-0x13c0+0x1*0x35ec,-0xb*0xf1+-0x1f72+0x57*0x7b,-0xa76+-0x247*0xe+0x2a59)));let ie=Tt;class mS{constructor(_0x576267,_0xb9c8bf=0xd3d+-0x1ae*0xa+0x1*0x38f){h(this,'_curve'),h(this,'_left',-(0x1*-0x2608+-0x32b*-0x8+0xab*0x13)/(0x2315+0x2010+0x1*-0x4325)),h(this,'_right',(0x8b7*-0x1+-0x15eb+-0xfd*-0x1f)/(0x5*0x672+-0x177a+-0x230*0x4)),h(this,'_recip',0x3*0xaed+-0x252c+0x465),h(this,'_p0',0x8*0x36f+0x1be4+-0x375c*0x1),h(this,'_p1',0x2414+-0x25a9*-0x1+-0x1b7*0x2b),h(this,'_m0',-0x13e8+-0x143c+-0x16f*-0x1c),h(this,'_m1',0x1e5*-0x6+0x1f74+0x2*-0xa0b),(this['_curve']=_0x576267,this['_reset'](_0xb9c8bf));}['evaluate'](_0x230df2,_0x50efb7=!(-0x1e88+0x21c0+0x337*-0x1)){(_0x50efb7||_0x230df2<this['_left']||_0x230df2>=this['_right'])&&this['_reset'](_0x230df2);let _0x4f3478;const _0x56a49e=this['_curve']['type'];if(_0x56a49e===O0)_0x4f3478=this['_p0'];else{const _0x36131c=this['_recip']===0x2f9+-0x9*-0x2f6+-0x1d9f?-0x35b+-0x18e9+-0xc*-0x25b:(_0x230df2-this['_left'])*this['_recip'];_0x56a49e===R0?_0x4f3478=Y['lerp'](this['_p0'],this['_p1'],_0x36131c):_0x56a49e===Pu?_0x4f3478=Y['lerp'](this['_p0'],this['_p1'],_0x36131c*_0x36131c*(0x3*0xb1b+-0x18d9*-0x1+-0x1*0x3a27-(0x1715+-0x23b6+-0x1*-0xca3)*_0x36131c)):_0x4f3478=this['_evaluateH'+'ermite'](this['_p0'],this['_p1'],this['_m0'],this['_m1'],_0x36131c);}return _0x4f3478;}['_reset'](_0x363925){const _0x1f64a2=this['_curve']['keys'],_0x4542db=_0x1f64a2['length'];if(!_0x4542db)this['_left']=-(-0x1f12+0x106d+0xea6)/(0x850+-0xaff+0x2af),this['_right']=(-0x1e6a+-0x42e+0x11*0x209)/(0x1*0xd36+-0x13*-0x11b+-0x2237*0x1),this['_recip']=0x54+-0xaa5+0xa51,this['_p0']=this['_p1']=this['_m0']=this['_m1']=0x1a*0x3c+0x94b*-0x2+0xc7e;else{if(_0x363925<_0x1f64a2[-0x1206+-0x1fb8+0x31be][0x243d+-0xaed*0x1+-0x1950])this['_left']=-(-0x124*0x18+0x902+-0x125f*-0x1)/(0x4f*0x33+-0x17*-0xab+-0x2*0xf8d),this['_right']=_0x1f64a2[0x46a+-0xc11*0x3+0x1fc9][-0x7e6+0x1337+-0xb51],this['_recip']=-0x12a*0x17+0x1a8c+0x3a,this['_p0']=this['_p1']=_0x1f64a2[0xa8a+0x2156+-0x2be0][0xa80+0x532+-0xfb1],this['_m0']=this['_m1']=0x247b+0xc8*-0x2b+-0x2e3*0x1;else{if(_0x363925>=_0x1f64a2[_0x4542db-(0xa7f*-0x1+0x2577*0x1+-0x1af7)][0xa48*-0x1+0x17*-0x185+0x2d3b])this['_left']=_0x1f64a2[_0x4542db-(-0x2523+-0x3*0x1df+0x2ac1)][0x659+0x16*0x120+-0x1f19],this['_right']=(0x569+-0x4*-0x31a+-0x3*0x5f0)/(0x1f4e+0x11b6+-0x3104),this['_recip']=0xcc1+-0x11c3*0x1+0x502,this['_p0']=this['_p1']=_0x1f64a2[_0x4542db-(-0x1729+0x9*0x340+-0x616)][-0xfac+-0xde*-0x5+-0x1*-0xb57],this['_m0']=this['_m1']=0x130a*0x1+-0x282*-0x5+0x1*-0x1f94;else{let _0x49f5d0=-0x250b+-0x833*-0x1+0x1cd8;for(;_0x363925>=_0x1f64a2[_0x49f5d0+(0x18a7+0x92*-0x3b+0x90*0x10)][0x1*-0x12bd+-0x16a6+-0x32f*-0xd];)_0x49f5d0++;this['_left']=_0x1f64a2[_0x49f5d0][-0xfea+-0x13c3+0x23ad],this['_right']=_0x1f64a2[_0x49f5d0+(-0x187a+0x10bb*0x2+0x79*-0x13)][-0x1*-0xa46+0x1811+-0x2257];const _0x467cee=(0x1*-0x147f+0xf*0x23a+-0xce6)/(this['_right']-this['_left']);this['_recip']=isFinite(_0x467cee)?_0x467cee:0xa88+-0x1*0x7a7+-0x2e1*0x1,this['_p0']=_0x1f64a2[_0x49f5d0][-0x2511+-0x168e+0x6a*0x90],this['_p1']=_0x1f64a2[_0x49f5d0+(-0x1cf2+0x1*-0x376+0x2069)][0x2074+-0x13*-0x127+-0x3658],this['_curve']['type']===lm&&this['_calcTange'+'nts'](_0x1f64a2,_0x49f5d0);}}}}['_calcTange'+'nts'](_0x44a8bd,_0x3e3cf8){let _0x2f8d79;const _0x17eb59=_0x44a8bd[_0x3e3cf8],_0x505d0d=_0x44a8bd[_0x3e3cf8+(0x670+0x2266+-0x1*0x28d5)];let _0x273900;if(_0x3e3cf8===0x65d+-0x1*0x7e3+0x186?_0x2f8d79=[_0x44a8bd[-0x1a30+-0x1714+0x41b*0xc][-0x2*-0xfed+-0x5fe+-0x2*0xcee]+(_0x44a8bd[0x4*0x6c5+0x8*-0x116+-0xb*0x1ac][0x3af+-0x126f+0xec0]-_0x44a8bd[0x1bc3+0x1e*-0xa1+-0x8e4][-0x1ad7+-0x8bb+0x9d*0x3a]),_0x44a8bd[0x674+-0x55*-0x55+0x327*-0xb][0x9*-0x20f+-0x2258+0x34e*0x10]+(_0x44a8bd[0xa*-0xac+-0x2*-0xe6d+-0xb11*0x2][0x1f52+0x112*-0x1c+-0x159]-_0x44a8bd[-0xf*0xad+-0x167f+0x20a3][0x1f36+-0x1c2b+0x185*-0x2])]:_0x2f8d79=_0x44a8bd[_0x3e3cf8-(-0x769+0x500+-0xce*-0x3)],_0x3e3cf8===_0x44a8bd['length']-(0x1*-0xf3b+0xc0b*0x2+-0x3*0x2f3)?_0x273900=[_0x44a8bd[_0x3e3cf8+(-0x1*-0x1525+-0xdf8+-0x396*0x2)][0x1cf+-0x5*-0x725+-0x2588]+(_0x44a8bd[_0x3e3cf8+(-0x6b4+-0x2*-0x481+-0x1f*0x13)][0x2ac+0x72b*0x2+0x1102*-0x1]-_0x44a8bd[_0x3e3cf8][-0x6*-0x588+-0x3*-0x3ff+-0x3*0xf0f]),_0x44a8bd[_0x3e3cf8+(-0x1183+-0x2185+-0x1103*-0x3)][0xe*-0x21e+-0x120c+0x2fb1*0x1]+(_0x44a8bd[_0x3e3cf8+(-0xf44+-0x13+0x7ac*0x2)][-0x275+-0x2f*-0x7+-0x2b*-0x7]-_0x44a8bd[_0x3e3cf8][-0x710+-0xee0+-0x15f1*-0x1])]:_0x273900=_0x44a8bd[_0x3e3cf8+(0x1*0x5db+0xb*0x270+0x9*-0x3a1)],this['_curve']['type']===lm){const _0x2b0c7a=(0x186e+0x1b7f+0x1*-0x33eb)*(_0x505d0d[0xbf*0x16+-0x270b+0x16a1]-_0x17eb59[-0x1551+-0x3*0x6b9+0x213*0x14])/(_0x505d0d[-0x1bb1+-0x130f+0x2ec0]-_0x2f8d79[-0x2*0x1292+-0x1204+0x3728]),_0x5f1022=(0x144d+-0x17f9+0x1*0x3ae)*(_0x505d0d[0x840+0x1bc7+-0x2407]-_0x17eb59[-0x1558+-0x139a+0x28f2])/(_0x273900[-0x13d0+0x730+-0xca*-0x10]-_0x17eb59[0xe7*0x1+-0x8a4+-0x11b*-0x7]);this['_m0']=this['_curve']['tension']*(isFinite(_0x2b0c7a)?_0x2b0c7a:0x4f8*-0x5+0x2393+0x1*-0xabb)*(_0x505d0d[-0x11*0x10a+-0x220c+0x33b7]-_0x2f8d79[-0x1fd6+0x24a7*-0x1+-0x31d*-0x16]),this['_m1']=this['_curve']['tension']*(isFinite(_0x5f1022)?_0x5f1022:-0x1a2*0x3+0xe87*0x2+0x1828*-0x1)*(_0x273900[0x85f*0x4+0x21b3+-0x1*0x432e]-_0x17eb59[0x149d+-0x7*0x79+-0x1*0x114d]);}else{const _0x20a66b=(_0x505d0d[-0x17*0x5e+-0x170f+0x1*0x1f81]-_0x17eb59[-0x17f7+-0x45d+0x1c54])/(_0x17eb59[0x1*-0x241a+-0xff4*0x1+0x340e]-_0x2f8d79[0x8d+0x8*-0x31d+-0x5*-0x4df]),_0x4d3db1=(_0x505d0d[-0x2638+-0x1984+0x3fbc]-_0x17eb59[0x908+0x22c*-0x5+0x1d4])/(_0x273900[0x1*-0x24dd+-0x118f+0x366c]-_0x505d0d[-0x1*-0x13c7+-0xd55+-0x672]),_0x4def66=_0x17eb59[0x325+-0x4c5+0x1a1]+(_0x2f8d79[0x1609+0x88b+-0x1e93]-_0x17eb59[-0x503*0x4+0x37*0x3d+0x6f2*0x1])*(isFinite(_0x20a66b)?_0x20a66b:0x1f*0x7d+0x1d*-0x7+-0x99*0x18),_0x5a56bc=_0x505d0d[0x1619*0x1+-0x1*0xfb3+-0x665]+(_0x273900[-0x6ea+0x641*0x4+-0x1219*0x1]-_0x505d0d[-0x20d0+0x328*-0xc+0x46b1])*(isFinite(_0x4d3db1)?_0x4d3db1:-0x1374+0x1d*-0x69+0x1f59),_0x5d4260=this['_curve']['tension'];this['_m0']=_0x5d4260*(_0x505d0d[0x20f8+0x1afa+0xbfd*-0x5]-_0x4def66),this['_m1']=_0x5d4260*(_0x5a56bc-_0x17eb59[0x5*0x46f+-0x20f7+0xacd]);}}['_evaluateH'+'ermite'](_0x4d7e51,_0x493589,_0x14d4d2,_0x1468da,_0x4efa2f){const _0x34d685=_0x4efa2f*_0x4efa2f,_0xb95478=_0x4efa2f+_0x4efa2f,_0x23e967=0xa24+-0x2*0xf25+0x1*0x1427-_0x4efa2f,_0x561fd1=_0x23e967*_0x23e967;return _0x4d7e51*((-0xb7c+-0x17*-0x99+-0x121*0x2+_0xb95478)*_0x561fd1)+_0x14d4d2*(_0x4efa2f*_0x561fd1)+_0x493589*(_0x34d685*(-0x167e+0x49a+0x11e7-_0xb95478))+_0x1468da*(_0x34d685*(_0x4efa2f-(-0xfe*-0x8+-0x1d3a+0x154b)));}}class Xs{constructor(_0x1bc45e){h(this,'keys',[]),h(this,'type',Pu),h(this,'tension',-0xdbc+0x8d*0x41+-0x1611+0.5),h(this,'_eval',new mS(this));if(_0x1bc45e){for(let _0x593f00=-0xe9*-0x16+0x623+-0x1a29;_0x593f00<_0x1bc45e['length']-(-0x4aa+-0x11f7+0x16a2);_0x593f00+=-0x995*0x1+0xbb5+-0x2*0x10f)this['keys']['push']([_0x1bc45e[_0x593f00],_0x1bc45e[_0x593f00+(0x11f0+-0xd*0x119+-0x86*0x7)]]);}this['sort']();}get['length'](){return this['keys']['length'];}['add'](_0x4afa22,_0x2b602b){const _0x110abc=this['keys'],_0x6e2841=_0x110abc['length'];let _0x4ae6fd=-0x21d7+0x7fd*-0x3+0x39ce;for(;_0x4ae6fd<_0x6e2841&&!(_0x110abc[_0x4ae6fd][0x8*0x409+0x2647+-0x1b*0x29d]>_0x4afa22);_0x4ae6fd++);const _0x46674b=[_0x4afa22,_0x2b602b];return this['keys']['splice'](_0x4ae6fd,-0x92f+-0x92f+0x125e,_0x46674b),_0x46674b;}['get'](_0x1f56f5){return this['keys'][_0x1f56f5];}['sort'](){this['keys']['sort']((_0x313b9c,_0x440b77)=>_0x313b9c[0x560+-0x1f6*0x2+0x5d*-0x4]-_0x440b77[0x2003+0x1881+0x1*-0x3884]);}['value'](_0x409ae8){return this['_eval']['evaluate'](_0x409ae8,!(0xb1c+-0x2195*0x1+0xb*0x20b));}['closest'](_0x5be2e3){const _0xa42b25=this['keys'],_0x2c7eee=_0xa42b25['length'];let _0x211e22=-0x13aa+0xb7d+0x5*0x1a3,_0x189e50=null;for(let _0x3660a0=-0x1*-0x2559+-0x4ad+-0x20ac;_0x3660a0<_0x2c7eee;_0x3660a0++){const _0x2ea355=Math['abs'](_0x5be2e3-_0xa42b25[_0x3660a0][0x10ad+0x23a2+-0x344f*0x1]);if(_0x211e22>=_0x2ea355)_0x211e22=_0x2ea355,_0x189e50=_0xa42b25[_0x3660a0];else break;}return _0x189e50;}['clone'](){const _0x4c0263=new this['constructo'+'r']();return _0x4c0263['keys']=this['keys']['map'](_0x3561d9=>[..._0x3561d9]),_0x4c0263['type']=this['type'],_0x4c0263['tension']=this['tension'],_0x4c0263;}['quantize'](_0x54aa07){_0x54aa07=Math['max'](_0x54aa07,0x43*-0x44+-0x112*0x1+0x12e0);const _0x3992fa=new Float32Array(_0x54aa07),_0x5e3a23=(0x1d2f+0x9b7*-0x4+0x19d*0x6)/(_0x54aa07-(0x22f8+0x17d9+0x10*-0x3ad));_0x3992fa[0x63b+-0x1ada+0x149f*0x1]=this['_eval']['evaluate'](0x653*0x3+0x2b7*0xb+-0x30d6,!(0x1fba+-0x456+0x1*-0x1b64));for(let _0x5b4cb4=-0x2de+0x8ba*0x1+0x5db*-0x1;_0x5b4cb4<_0x54aa07;_0x5b4cb4++)_0x3992fa[_0x5b4cb4]=this['_eval']['evaluate'](_0x5e3a23*_0x5b4cb4);return _0x3992fa;}['quantizeCl'+'amped'](_0xb05a12,_0x218d05,_0x2be16d){const _0x2bde7f=this['quantize'](_0xb05a12);for(let _0x5b82ca=-0x184f*-0x1+-0x251*-0x7+-0x39*0xb6;_0x5b82ca<_0x2bde7f['length'];++_0x5b82ca)_0x2bde7f[_0x5b82ca]=Math['min'](_0x2be16d,Math['max'](_0x218d05,_0x2bde7f[_0x5b82ca]));return _0x2bde7f;}}class ta{constructor(..._0x3fd9eb){h(this,'curves',[]),h(this,'_type',Pu);if(_0x3fd9eb['length']>-0x2455+-0xd46+-0x5*-0x9ec){for(let _0x15f5d2=-0x1ea8+-0x2*-0x479+0x15b6;_0x15f5d2<_0x3fd9eb['length'];_0x15f5d2++)this['curves']['push'](new Xs(_0x3fd9eb[_0x15f5d2]));}else{if(_0x3fd9eb['length']===-0x2398+-0x4c2+0x285a)this['curves']['push'](new Xs());else{const _0x128f2e=_0x3fd9eb[0x3*-0x1fd+-0x1b70+0x2167];if(typeof _0x128f2e=='number'){for(let _0xa41e1c=-0x13*-0x17f+-0x1156+0xa7*-0x11;_0xa41e1c<_0x128f2e;_0xa41e1c++)this['curves']['push'](new Xs());}else{for(let _0x338381=-0x1c84+0xfbe+0xa*0x147;_0x338381<_0x128f2e['length'];_0x338381++)this['curves']['push'](new Xs(_0x128f2e[_0x338381]));}}}}get['length'](){return this['curves']['length'];}set['type'](_0xf64660){this['_type']=_0xf64660;for(let _0x17d767=-0x309+-0xc*0x17b+0x14cd;_0x17d767<this['curves']['length'];_0x17d767++)this['curves'][_0x17d767]['type']=_0xf64660;}get['type'](){return this['_type'];}['get'](_0x44b352){return this['curves'][_0x44b352];}['value'](_0x13f2aa,_0x1a3959=[]){const _0x4abd04=this['curves']['length'];_0x1a3959['length']=_0x4abd04;for(let _0x1e3b22=0x16*0x72+-0x325*0x2+0x2*-0x1c1;_0x1e3b22<_0x4abd04;_0x1e3b22++)_0x1a3959[_0x1e3b22]=this['curves'][_0x1e3b22]['value'](_0x13f2aa);return _0x1a3959;}['clone'](){const _0x1073bf=new this['constructo'+'r']();_0x1073bf['curves']=[];for(let _0x4a8a78=0x6fb+0xf1*0x1f+-0x607*0x6;_0x4a8a78<this['curves']['length'];_0x4a8a78++)_0x1073bf['curves']['push'](this['curves'][_0x4a8a78]['clone']());return _0x1073bf['_type']=this['_type'],_0x1073bf;}['quantize'](_0x59b14e){_0x59b14e=Math['max'](_0x59b14e,0x19a6+-0xa37+0x167*-0xb);const _0x2ccf26=this['curves']['length'],_0x1daf6e=new Float32Array(_0x59b14e*_0x2ccf26),_0x5b0ab4=(0x1*-0x23d1+-0x3*0x107+0x26e7)/(_0x59b14e-(-0x1*-0x268+-0x12cb*0x1+-0x2*-0x832));for(let _0x434d11=0xdc4+0xd*0x88+-0x6e4*0x3;_0x434d11<_0x2ccf26;_0x434d11++){const _0x41c1bc=new mS(this['curves'][_0x434d11]);for(let _0x482478=0xc7a+0x18*-0x191+0x191e;_0x482478<_0x59b14e;_0x482478++)_0x1daf6e[_0x482478*_0x2ccf26+_0x434d11]=_0x41c1bc['evaluate'](_0x5b0ab4*_0x482478);}return _0x1daf6e;}['quantizeCl'+'amped'](_0x5624fc,_0x330687,_0x2d636b){const _0x3d8978=this['quantize'](_0x5624fc);for(let _0x4ae497=-0x1c64+-0x13*0x20b+-0x9b*-0x6f;_0x4ae497<_0x3d8978['length'];++_0x4ae497)_0x3d8978[_0x4ae497]=Math['min'](_0x2d636b,Math['max'](_0x330687,_0x3d8978[_0x4ae497]));return _0x3d8978;}}const gf=new Float32Array(-0x20e7+0xba4*-0x1+0x2c8c),cm=new Int32Array(gf['buffer']);class Tn{static['float2Half'](_0x3744fe){gf[0x1ccb*-0x1+-0x21d*0xa+0x31ed]=_0x3744fe;const _0x5d335e=cm[-0x1dcd+0x1912+0x7*0xad];let _0x215cbd=_0x5d335e>>-0x23*0xa0+-0x1f25+-0x1*-0x3515&0xf3d6+0xb865+-0x12c3b,_0x3ea981=_0x5d335e>>0x1295+0x8*0x28+-0x13c9&-0x93c+0xd9f+0x39c;const _0x1b7c31=_0x5d335e>>0x4a*0x43+-0xd*0xd3+0x4*-0x224&-0x691+-0xbc4+0x1354;return _0x1b7c31<0x16ba+0x47*0x8b+-0x2*0x1e70?_0x215cbd:_0x1b7c31>-0x61f*0x1+0x1*-0xef5+0x15a2?(_0x215cbd|=-0x446*0x1f+-0x3dbb*-0x2+-0x4282*-0x2,_0x215cbd|=(_0x1b7c31===-0xda3+0x3*-0x9f5+-0x1*-0x2c81?0x606+0x3*0xfe+-0x480*0x2:-0x2b9+0x17c*0x10+0x9*-0x256)&&_0x5d335e&0x60a6f6+-0x653497*0x1+0x848da0,_0x215cbd):_0x1b7c31<-0x1a4f+0x1c45+-0x1*0x185?(_0x3ea981|=-0x199*0x10+-0x1*-0xdcc+-0x73*-0x2c,_0x215cbd|=(_0x3ea981>>0x9ca*-0x1+-0x3*-0x24b+0x35b-_0x1b7c31)+(_0x3ea981>>0xd9b+-0x64c+-0x2*0x36f-_0x1b7c31&0x2e7*0x7+0x722*0x5+-0x37fa),_0x215cbd):(_0x215cbd|=_0x1b7c31-(0x7*0x48b+0x1211+-0x316e)<<0xe0c+0x18da*-0x1+0x4*0x2b6|_0x3ea981>>-0x1b13*-0x1+0xfb*0x1d+-0x1*0x3781,_0x215cbd+=_0x3ea981&-0xc52+0x6f*-0x47+0x2b1c,_0x215cbd);}static['float2RGBA'+'8'](_0x481d10,_0x484035){gf[0x35c+0x3*0x909+0x2c5*-0xb]=_0x481d10;const _0x44805a=cm[-0x4a9*-0x1+0x10*-0x2+-0x489];_0x484035['r']=(_0x44805a>>-0x1e0f+0x986+0x14a1&0x4e3*0x1+0x1*-0x1399+0xfb5)/(-0x9d0+-0x123*-0xd+-0x3f8),_0x484035['g']=(_0x44805a>>-0x220f+-0x1a6e+0x142f*0x3&-0x17b7*-0x1+-0x4a0+-0x1218)/(-0x9d*-0x26+-0x1952+0x101*0x3),_0x484035['b']=(_0x44805a>>0x2221*0x1+-0x26b+-0x1fae&0x9df+0x2*-0xe12+0x1344)/(0x13dd+-0x9*0x115+-0x921*0x1),_0x484035['a']=(_0x44805a&0x6b6+0xe33+-0x13ea)/(0x24b3+-0x22eb+-0xc9);}}const wt=class wt{constructor(_0x513ae4=0x3*0x20b+-0x3e*-0x9e+-0x2c65,_0x20a7b4=0x13*0x128+-0x2*-0x63a+0x226c*-0x1,_0x5bc654=0x2484+0x1f*-0xa3+-0x10c7){h(this,'x'),h(this,'y'),h(this,'z'),_0x513ae4['length']===0x56f*0x2+0x1*-0x1c2a+0x114f?(this['x']=_0x513ae4[0xf5f*0x1+0x2637+-0x26*0x169],this['y']=_0x513ae4[-0x19d6+-0x38e*0x4+0x280f],this['z']=_0x513ae4[-0x3af*-0x3+-0x8d*0x11+0x2*-0xd7]):(this['x']=_0x513ae4,this['y']=_0x20a7b4,this['z']=_0x5bc654);}['add'](_0x74e967){return this['x']+=_0x74e967['x'],this['y']+=_0x74e967['y'],this['z']+=_0x74e967['z'],this;}['add2'](_0x2dec4d,_0x5ba599){return this['x']=_0x2dec4d['x']+_0x5ba599['x'],this['y']=_0x2dec4d['y']+_0x5ba599['y'],this['z']=_0x2dec4d['z']+_0x5ba599['z'],this;}['addScalar'](_0xb82c99){return this['x']+=_0xb82c99,this['y']+=_0xb82c99,this['z']+=_0xb82c99,this;}['addScaled'](_0x3012e1,_0x500b3){return this['x']+=_0x3012e1['x']*_0x500b3,this['y']+=_0x3012e1['y']*_0x500b3,this['z']+=_0x3012e1['z']*_0x500b3,this;}['clone'](){const _0x270fa8=this['constructo'+'r'];return new _0x270fa8(this['x'],this['y'],this['z']);}['copy'](_0xba113e){return this['x']=_0xba113e['x'],this['y']=_0xba113e['y'],this['z']=_0xba113e['z'],this;}['cross'](_0x3ca575,_0x4b820a){const _0x4f9f1d=_0x3ca575['x'],_0x710023=_0x3ca575['y'],_0x5e00c6=_0x3ca575['z'],_0x36b8f2=_0x4b820a['x'],_0x300179=_0x4b820a['y'],_0x2e094a=_0x4b820a['z'];return this['x']=_0x710023*_0x2e094a-_0x300179*_0x5e00c6,this['y']=_0x5e00c6*_0x36b8f2-_0x2e094a*_0x4f9f1d,this['z']=_0x4f9f1d*_0x300179-_0x36b8f2*_0x710023,this;}['distance'](_0x3f9240){const _0x2886b2=this['x']-_0x3f9240['x'],_0xe1fd81=this['y']-_0x3f9240['y'],_0x593e27=this['z']-_0x3f9240['z'];return Math['sqrt'](_0x2886b2*_0x2886b2+_0xe1fd81*_0xe1fd81+_0x593e27*_0x593e27);}['div'](_0x282838){return this['x']/=_0x282838['x'],this['y']/=_0x282838['y'],this['z']/=_0x282838['z'],this;}['div2'](_0x229b81,_0x227a6b){return this['x']=_0x229b81['x']/_0x227a6b['x'],this['y']=_0x229b81['y']/_0x227a6b['y'],this['z']=_0x229b81['z']/_0x227a6b['z'],this;}['divScalar'](_0x5f0b09){return this['x']/=_0x5f0b09,this['y']/=_0x5f0b09,this['z']/=_0x5f0b09,this;}['dot'](_0x4d8b52){return this['x']*_0x4d8b52['x']+this['y']*_0x4d8b52['y']+this['z']*_0x4d8b52['z'];}['equals'](_0xd229ac){return this['x']===_0xd229ac['x']&&this['y']===_0xd229ac['y']&&this['z']===_0xd229ac['z'];}['equalsAppr'+'ox'](_0x36d6ca,_0x486b9e=-0x20c3+0x1b36+0x58d+0.000001){return Math['abs'](this['x']-_0x36d6ca['x'])<_0x486b9e&&Math['abs'](this['y']-_0x36d6ca['y'])<_0x486b9e&&Math['abs'](this['z']-_0x36d6ca['z'])<_0x486b9e;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z'];}['lerp'](_0x3a809f,_0x4a638e,_0x1f2906){return this['x']=_0x3a809f['x']+_0x1f2906*(_0x4a638e['x']-_0x3a809f['x']),this['y']=_0x3a809f['y']+_0x1f2906*(_0x4a638e['y']-_0x3a809f['y']),this['z']=_0x3a809f['z']+_0x1f2906*(_0x4a638e['z']-_0x3a809f['z']),this;}['mul'](_0x3ab4a2){return this['x']*=_0x3ab4a2['x'],this['y']*=_0x3ab4a2['y'],this['z']*=_0x3ab4a2['z'],this;}['mul2'](_0x5049e6,_0x281a3d){return this['x']=_0x5049e6['x']*_0x281a3d['x'],this['y']=_0x5049e6['y']*_0x281a3d['y'],this['z']=_0x5049e6['z']*_0x281a3d['z'],this;}['mulScalar'](_0x9b188d){return this['x']*=_0x9b188d,this['y']*=_0x9b188d,this['z']*=_0x9b188d,this;}['normalize'](_0x3e92e6=this){const _0x2143a4=_0x3e92e6['x']*_0x3e92e6['x']+_0x3e92e6['y']*_0x3e92e6['y']+_0x3e92e6['z']*_0x3e92e6['z'];if(_0x2143a4>-0x1327+0x2*-0x6c7+-0x1*-0x20b5){const _0x46de74=(-0x6b5*0x3+-0x531*0x7+0x3877)/Math['sqrt'](_0x2143a4);this['x']=_0x3e92e6['x']*_0x46de74,this['y']=_0x3e92e6['y']*_0x46de74,this['z']=_0x3e92e6['z']*_0x46de74;}return this;}['floor'](_0x453ec4=this){return this['x']=Math['floor'](_0x453ec4['x']),this['y']=Math['floor'](_0x453ec4['y']),this['z']=Math['floor'](_0x453ec4['z']),this;}['ceil'](_0x4feb42=this){return this['x']=Math['ceil'](_0x4feb42['x']),this['y']=Math['ceil'](_0x4feb42['y']),this['z']=Math['ceil'](_0x4feb42['z']),this;}['round'](_0x32875e=this){return this['x']=Math['round'](_0x32875e['x']),this['y']=Math['round'](_0x32875e['y']),this['z']=Math['round'](_0x32875e['z']),this;}['min'](_0x3ea074){return _0x3ea074['x']<this['x']&&(this['x']=_0x3ea074['x']),_0x3ea074['y']<this['y']&&(this['y']=_0x3ea074['y']),_0x3ea074['z']<this['z']&&(this['z']=_0x3ea074['z']),this;}['max'](_0x4d5fcb){return _0x4d5fcb['x']>this['x']&&(this['x']=_0x4d5fcb['x']),_0x4d5fcb['y']>this['y']&&(this['y']=_0x4d5fcb['y']),_0x4d5fcb['z']>this['z']&&(this['z']=_0x4d5fcb['z']),this;}['project'](_0x2c79a4){const _0x32a454=this['x']*_0x2c79a4['x']+this['y']*_0x2c79a4['y']+this['z']*_0x2c79a4['z'],_0x3851e3=_0x2c79a4['x']*_0x2c79a4['x']+_0x2c79a4['y']*_0x2c79a4['y']+_0x2c79a4['z']*_0x2c79a4['z'],_0x188c84=_0x32a454/_0x3851e3;return this['x']=_0x2c79a4['x']*_0x188c84,this['y']=_0x2c79a4['y']*_0x188c84,this['z']=_0x2c79a4['z']*_0x188c84,this;}['set'](_0x1e01ff,_0x51c507,_0x46337c){return this['x']=_0x1e01ff,this['y']=_0x51c507,this['z']=_0x46337c,this;}['sub'](_0x1539b3){return this['x']-=_0x1539b3['x'],this['y']-=_0x1539b3['y'],this['z']-=_0x1539b3['z'],this;}['sub2'](_0x2fd2dd,_0x140f30){return this['x']=_0x2fd2dd['x']-_0x140f30['x'],this['y']=_0x2fd2dd['y']-_0x140f30['y'],this['z']=_0x2fd2dd['z']-_0x140f30['z'],this;}['subScalar'](_0x3a0e04){return this['x']-=_0x3a0e04,this['y']-=_0x3a0e04,this['z']-=_0x3a0e04,this;}['fromArray'](_0x111208,_0x44fb74=-0x1b19+0x2d*-0x7+0x1c54){return this['x']=_0x111208[_0x44fb74]??this['x'],this['y']=_0x111208[_0x44fb74+(0xc5e+0x19f4+-0x2651)]??this['y'],this['z']=_0x111208[_0x44fb74+(-0x2176*0x1+0x519+-0x1*-0x1c5f)]??this['z'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+']';}['toArray'](_0x244166=[],_0x1b40d0=0x11*0x1bb+0x144b+0x15*-0x25e){return _0x244166[_0x1b40d0]=this['x'],_0x244166[_0x1b40d0+(-0x835*0x2+0x5*0xef+0xbc0)]=this['y'],_0x244166[_0x1b40d0+(-0x85f*-0x1+0x12a5+-0xd81*0x2)]=this['z'],_0x244166;}};h(wt,'ZERO',Object['freeze'](new wt(0x3ff+0x1080+-0x147f,0x2051+0x7c7+0x8*-0x503,0x727+-0xcb*0xd+0x328))),h(wt,'HALF',Object['freeze'](new wt(0x585+0x1a6f*-0x1+0xa75*0x2+0.5,-0xd8b*-0x1+-0x581*-0x1+0x130c*-0x1+0.5,-0xcbc+-0x15ac+0x2268*0x1+0.5))),h(wt,'ONE',Object['freeze'](new wt(0xfb9+-0x1b3f+0x1*0xb87,-0x6*0x36b+-0x5*-0x407+-0x60*-0x1,0x20fb+0x1632+0x1ac*-0x21))),h(wt,'UP',Object['freeze'](new wt(0x11d+-0xd37+0xc1a,0x1*0x48f+-0x251e+0x2090,0x1d3*-0x1+-0x5d3*0x3+0x4*0x4d3))),h(wt,'DOWN',Object['freeze'](new wt(-0x1*0x9a9+-0x1367+0x3a2*0x8,-(0x20cf+0x14c4+-0x3592),-0x1*0x1b7+0x10f*0x4+0x285*-0x1))),h(wt,'RIGHT',Object['freeze'](new wt(-0x2a9*-0x3+0xf19*-0x2+0x3b4*0x6,0x18*-0xeb+-0xa3b+0xac1*0x3,-0x12*0xeb+-0x1d3*-0x3+-0x7b*-0x17))),h(wt,'LEFT',Object['freeze'](new wt(-(-0x6b0+-0x2154+0x2805*0x1),0x1f07+0x1*0x10fd+-0xc01*0x4,0x1f5a*-0x1+-0x2b3*0x6+0x2f8c))),h(wt,'FORWARD',Object['freeze'](new wt(0x754*-0x4+0x1af*0x3+0x1*0x1843,-0xf44*0x1+0x6*-0x2a1+0x2*0xf85,-(0x1*0x10c0+0x76a*0x2+-0x1f93)))),h(wt,'BACK',Object['freeze'](new wt(0x3dd+0xe91+-0x151*0xe,0x18*-0x92+0x3*0x69d+-0x627,0x244*0xd+0xd90+-0x5b*0x79)));let D=wt;const hn=class hn{constructor(){h(this,'data',new Float32Array(-0xd3f+-0x2c2*0x1+-0x805*-0x2)),this['data'][-0x172*-0x19+-0x36d+0x20b5*-0x1]=this['data'][0x167*0x14+0x194f+-0x3557]=this['data'][-0x23ad+-0x1*0x1e13+0x41c8]=0x21ec+0x263f+-0x482a;}['clone'](){const _0x632303=this['constructo'+'r'];return new _0x632303()['copy'](this);}['copy'](_0x571944){const _0x5c255d=_0x571944['data'],_0x4aa1c8=this['data'];return _0x4aa1c8[0x47*-0x1+-0xa46+0xa8d*0x1]=_0x5c255d[0x1*-0x2ea+-0xf6*-0x1+-0x1f4*-0x1],_0x4aa1c8[0xaea+0x3ee*0x6+-0x1b*0x147]=_0x5c255d[-0xef9+0x2*0x44+0xe72],_0x4aa1c8[-0x1e66+-0x1*0x257b+0x43e3]=_0x5c255d[0x1c3e+-0x1d14+0xd8],_0x4aa1c8[0x192f+0xfb6+-0x28e2]=_0x5c255d[-0x2f3*0xc+-0x16cf+0x3a36],_0x4aa1c8[0x232c+0x2621+-0x4949*0x1]=_0x5c255d[0x1ff8+0x83*-0x7+0x975*-0x3],_0x4aa1c8[0x1a99*0x1+0x501*-0x7+0x873]=_0x5c255d[0x1029+-0x1*-0x23b2+-0x52f*0xa],_0x4aa1c8[0x5e3+-0x1619+0x103c]=_0x5c255d[-0x981+-0x17b6+0x213d],_0x4aa1c8[-0x98e+-0x1ee3+-0x2878*-0x1]=_0x5c255d[-0xb9+0x9e2+-0xa7*0xe],_0x4aa1c8[0x1*0xf79+0x1628+-0x2599]=_0x5c255d[0x2e*-0xb2+0x115f+0x1*0xea5],this;}['set'](_0x4f2cc2){const _0x3e4b3f=this['data'];return _0x3e4b3f[0xb7*0x2f+0x1*-0x16a1+-0xaf8]=_0x4f2cc2[-0x5b8+0x68c*0x3+-0x18c*0x9],_0x3e4b3f[-0x1450+-0x67*0x5d+0x39bc]=_0x4f2cc2[0x24b5+0x2*-0x1350+0x1ec],_0x3e4b3f[-0x61f*0x5+-0x1*0xb56+0x29f3]=_0x4f2cc2[-0xffa+0xb31+0x3*0x199],_0x3e4b3f[-0xbb6+0x17c7+0x607*-0x2]=_0x4f2cc2[0xa86+0x15*-0x43+-0x504],_0x3e4b3f[-0x1*-0x1253+0x115c+0x23ab*-0x1]=_0x4f2cc2[-0xa*0x3a3+0x6a*-0x39+0x3bfc],_0x3e4b3f[0x22f*0x5+0xdac+-0x22*0xb9]=_0x4f2cc2[-0x21b6+0xb96+-0x1*-0x1625],_0x3e4b3f[0x11db+-0x16*-0x125+0x625*-0x7]=_0x4f2cc2[0x5*-0x21f+0x14*0xb2+-0x1*0x347],_0x3e4b3f[-0x1*-0x455+-0x2465*0x1+0x2017]=_0x4f2cc2[-0x4*-0x1dc+-0x7*0x3a1+0x11fe],_0x3e4b3f[0x1*-0x16e2+0xd8f+-0x95b*-0x1]=_0x4f2cc2[0x1*0x1ed7+0x64a+-0x2519],this;}['getX'](_0xb26f25=new D()){return _0xb26f25['set'](this['data'][0x13f3+-0x15*-0xfe+0x1*-0x28c9],this['data'][0x25b*0x6+-0x335*0xb+-0x1*-0x1526],this['data'][0x1720+-0x1*-0x1ac8+-0x31e6]);}['getY'](_0x3a326f=new D()){return _0x3a326f['set'](this['data'][0x2c+0x6*-0x3d1+0x16bd],this['data'][0x253d*0x1+-0x21c0+0x7*-0x7f],this['data'][0x10d4+0x1e0d+-0x2edc]);}['getZ'](_0x15eded=new D()){return _0x15eded['set'](this['data'][-0x5*0x6a3+-0x262+-0xbdd*-0x3],this['data'][-0x19db*-0x1+-0x175d+-0x1*0x277],this['data'][-0x10*-0x114+0xb*-0x21d+0x607]);}['equals'](_0x279b0d){const _0x4efd2a=this['data'],_0x135608=_0x279b0d['data'];return _0x4efd2a[-0x37d*0x7+0x191*-0x7+0x2362]===_0x135608[-0xf*0x1e9+0x297+0x1a10]&&_0x4efd2a[-0x2*0xaab+-0x1436+0x298d]===_0x135608[-0x224*0x11+0x2*0x22d+0x200b]&&_0x4efd2a[-0x37*-0xa+0x1a*-0x13c+0x1df4]===_0x135608[0x16b7+0x1f+-0x1*0x16d4]&&_0x4efd2a[0xd97+-0x12*-0xb5+-0x1a4e]===_0x135608[0x1*0x1343+0x329+-0x1669]&&_0x4efd2a[0x8*0xf7+0x26c3+-0x2e77]===_0x135608[0x3ba+-0x982+-0x5cc*-0x1]&&_0x4efd2a[-0x1aa1+-0x1edb+-0x1*-0x3981]===_0x135608[-0x55*-0x41+-0xe95+0x6fb*-0x1]&&_0x4efd2a[0x1de7+0x1*0xf43+0x6*-0x786]===_0x135608[-0x821*-0x2+0x1af3+-0x2b2f]&&_0x4efd2a[-0xc98+0x1983+-0x84*0x19]===_0x135608[0x125d+0x1*0x23f3+-0x42d*0xd]&&_0x4efd2a[0xf*0x154+-0x1bcf+-0x1*-0x7eb]===_0x135608[0x1be8+0x7*-0x583+-0x1*-0xab5];}['isIdentity'](){const _0x244153=this['data'];return _0x244153[0x11e7+0x5cd*0x3+-0x234e]===-0x242a+0x8ad*-0x3+0x2*0x1f19&&_0x244153[0x56d+0xa86*-0x1+0x51a]===0x2521+0x2475+-0x4996&&_0x244153[-0xa*0x296+-0x576+0x1f54]===-0x4b3+0x215b*-0x1+0x260e*0x1&&_0x244153[0x17e6+-0xe5*-0x23+0x12*-0x311]===-0x1d4b*0x1+-0x8a6+0x25f1&&_0x244153[-0x17e0+0x1*-0x1e0e+-0x1*-0x35f2]===0x67*-0x23+-0x1*0x1dc5+0x2bdb&&_0x244153[0x43*0x15+0x10cd+-0x1647]===-0x686*-0x1+-0x8d7+-0x1*-0x251&&_0x244153[0x25d8+-0xde1*0x1+-0x17f1]===0x1cf6+0x1716+0xd03*-0x4&&_0x244153[0x1a12+0x26*0x30+-0x212b]===-0x177c+-0x176f+0x2eeb&&_0x244153[-0x485*0x1+-0x26e3+0x2b70]===0x2b*0x8+-0x1*-0xff1+-0x1148;}['setIdentit'+'y'](){const _0x24c40f=this['data'];return _0x24c40f[-0x2ac*-0x4+0x1374+-0x6*0x506]=-0x7c3*0x1+0x1*-0x15fb+0x1dbf*0x1,_0x24c40f[0x1468+0x1cf*0x1+0xb1b*-0x2]=0xf2*-0xb+0x4d6+-0x8*-0xb2,_0x24c40f[0x1d91*-0x1+-0x1c0b+-0x5c3*-0xa]=-0x147*-0x14+-0x1640+0x34c*-0x1,_0x24c40f[-0x1*-0x1127+0x1923+-0x2a47]=-0x1*0x13eb+0x1*-0x2482+0x386d,_0x24c40f[0x6*-0x454+-0x5*0x5a8+-0x17*-0x25c]=-0x2*0xbd+-0x4*-0x434+-0xf55,_0x24c40f[-0x10f+0x7ac+-0x2*0x34c]=-0x1*-0xc34+-0x191c+0xce8,_0x24c40f[0x19*0x6d+0x19b9+-0x1*0x2458]=-0xb77+-0x199*-0x15+0x101*-0x16,_0x24c40f[-0x9*-0xb0+-0x567*0x6+0x1a41]=0x1*0xa43+0x1f53+-0x2996,_0x24c40f[-0x6fb+-0x20ac+0x27af]=0x331*-0x2+0x51*-0x37+0x3a*0x69,this;}['toString'](){return'['+this['data']['join'](',\x20')+']';}['transpose'](_0x164e35=this){const _0x234198=_0x164e35['data'],_0x23abeb=this['data'];if(_0x234198===_0x23abeb){let _0x13fd60;_0x13fd60=_0x234198[-0x584+-0x4*0x43f+0x1681],_0x23abeb[-0x805*0x3+0x4c*-0x70+0x3950*0x1]=_0x234198[0x271*-0xe+-0xf7a+-0x5*-0x9ef],_0x23abeb[-0x1151+0xa42+0x712]=_0x13fd60,_0x13fd60=_0x234198[0x2f*0x11+-0x2674+0x2357],_0x23abeb[0x1e44+0x1cd9+0x1*-0x3b1b]=_0x234198[-0x1b64+-0x9b*0x19+0x2a8d],_0x23abeb[0x7d*0x3e+0x1*0xb93+-0x29d3]=_0x13fd60,_0x13fd60=_0x234198[0x1638+-0x125*0x9+-0x1*0xbe6],_0x23abeb[0x1dea+0x1718+-0x34fd]=_0x234198[0x5df*0x6+-0x406+-0x15b*0x17],_0x23abeb[0xf46+0x21bc*-0x1+-0x127d*-0x1]=_0x13fd60;}else _0x23abeb[0x2687+0x1e88+0x1*-0x450f]=_0x234198[-0x63c+0x1*0x9af+0x1*-0x373],_0x23abeb[-0x1adc+0x281*-0x1+0x1d5e]=_0x234198[0x11a4+0x1*0x1337+0x9*-0x418],_0x23abeb[0xc83*-0x3+0xa1*-0x1a+0x7*0x7b3]=_0x234198[0x1*0x210b+0x2403+-0x8a1*0x8],_0x23abeb[0x5ee+0x5*-0x4e4+0x1289]=_0x234198[-0x9c9+0x1300*0x2+0x1*-0x1c36],_0x23abeb[0x329*0xb+0x2109+0x3*-0x1698]=_0x234198[-0x13*-0xf8+0x12ee+-0x2552],_0x23abeb[-0x19f*-0xd+-0x22b9+-0xdab*-0x1]=_0x234198[0x270a+-0x4*-0x7fa+-0x46eb],_0x23abeb[-0x24c1+-0x6f5+0x2bbc]=_0x234198[0x2dd*-0x1+0x7*-0x56+0x539],_0x23abeb[-0xeb2+-0x1802+0x26bb]=_0x234198[-0x15a0+-0x6a0*0x3+0x2985],_0x23abeb[0x22cd+0x15e6+0x59*-0xa3]=_0x234198[-0x61*0x1d+0x1fd*0x1+0x908];return this;}['setFromMat'+'4'](_0x5f39df){const _0x57fab4=_0x5f39df['data'],_0xfb17ad=this['data'];return _0xfb17ad[-0x2f*-0x2f+-0xc22*0x1+0x381*0x1]=_0x57fab4[-0x1e*-0x32+0x1ec+-0x3*0x298],_0xfb17ad[0x1*-0x2287+0x26*0x9b+0xb86*0x1]=_0x57fab4[0x1ac4+0x1a56+0x11b3*-0x3],_0xfb17ad[0x1e0c+0x1763+-0x356d]=_0x57fab4[-0x4f*0x59+0x154d+-0x4f*-0x14],_0xfb17ad[-0x1185+0x2225+0x1*-0x109d]=_0x57fab4[0x148a+-0x19fb+0x575],_0xfb17ad[-0x5f0+0x1ecf+-0x1*0x18db]=_0x57fab4[0x17e*-0xb+0x16*0xa6+0x22b],_0xfb17ad[0x2555*-0x1+-0x7ac*-0x1+0x1dae]=_0x57fab4[0x2b1+0x1*0x1201+0x54*-0x3f],_0xfb17ad[0x192b+0x2145+-0x3a6a]=_0x57fab4[0x7bd+0xd*-0x1fd+0x1224],_0xfb17ad[-0x292+-0xc59+0xef2*0x1]=_0x57fab4[0x1665+0xc28*0x2+-0x2eac],_0xfb17ad[0xef1+-0x212a+-0x1241*-0x1]=_0x57fab4[0x570*0x6+-0xb30+-0x1566],this;}['setFromQua'+'t'](_0x46c7ce){const _0x3bb8b4=_0x46c7ce['x'],_0x23529b=_0x46c7ce['y'],_0x37fd40=_0x46c7ce['z'],_0xaa8b34=_0x46c7ce['w'],_0x246986=_0x3bb8b4+_0x3bb8b4,_0x420941=_0x23529b+_0x23529b,_0x3f7125=_0x37fd40+_0x37fd40,_0x144626=_0x3bb8b4*_0x246986,_0x48d67f=_0x3bb8b4*_0x420941,_0x58759d=_0x3bb8b4*_0x3f7125,_0x56160d=_0x23529b*_0x420941,_0xcac539=_0x23529b*_0x3f7125,_0x2fcdcc=_0x37fd40*_0x3f7125,_0x274b65=_0xaa8b34*_0x246986,_0x107390=_0xaa8b34*_0x420941,_0xf918ff=_0xaa8b34*_0x3f7125,_0x134a0f=this['data'];return _0x134a0f[0xb*0x167+-0x2009+0x2*0x84e]=0x1*-0x1349+0x14f3+-0x1*0x1a9-(_0x56160d+_0x2fcdcc),_0x134a0f[0xb51*-0x1+0xc89+-0x1*0x137]=_0x48d67f+_0xf918ff,_0x134a0f[-0x7e*-0x34+-0x1f96+0x600]=_0x58759d-_0x107390,_0x134a0f[0x861+0x923+-0x1181*0x1]=_0x48d67f-_0xf918ff,_0x134a0f[-0x1*-0x1d1b+-0x2057+-0x340*-0x1]=-0x1daa+-0x98+0x3d*0x7f-(_0x144626+_0x2fcdcc),_0x134a0f[0x919*-0x4+-0x1c0c+0x4075*0x1]=_0xcac539+_0x274b65,_0x134a0f[-0x19f*0x8+0x4c0*-0x8+0x32fe]=_0x58759d+_0x107390,_0x134a0f[0x1*0x985+0x6ca*-0x3+0xae0]=_0xcac539-_0x274b65,_0x134a0f[-0x81d*0x1+-0x26b2+0x2ed7]=-0xfe3+-0x96b*-0x3+-0xc5d-(_0x144626+_0x56160d),this;}['invertMat4'](_0x2abd90){const _0x25497c=_0x2abd90['data'],_0x375873=_0x25497c[0x41b+0x16*-0x17f+0x1ccf],_0x44d17a=_0x25497c[0x2425+0x1*0x845+0x2c69*-0x1],_0x5e5a37=_0x25497c[0x3*0x18b+0x38*0xab+-0x2a07],_0x2164ad=_0x25497c[0xa13*-0x1+0x1883*0x1+-0xe6c],_0x512538=_0x25497c[-0x1408+-0xf4b+-0x5e4*-0x6],_0x43d526=_0x25497c[-0x6*0x5df+0x6e3+0x1c5d],_0x32d96e=_0x25497c[-0x1c1*-0x2+-0xc77+0x3*0x2ff],_0x53de6c=_0x25497c[0x127a+-0x1f*0xc2+-0x3*-0x1af],_0x542411=_0x25497c[-0x1*0x1022+0xde+0xf4e],_0x2f2a3d=_0x542411*_0x512538-_0x43d526*_0x53de6c,_0x2041b4=-_0x542411*_0x44d17a+_0x5e5a37*_0x53de6c,_0x5f2a1b=_0x43d526*_0x44d17a-_0x5e5a37*_0x512538,_0x5c2356=-_0x542411*_0x2164ad+_0x43d526*_0x32d96e,_0x585401=_0x542411*_0x375873-_0x5e5a37*_0x32d96e,_0x24efea=-_0x43d526*_0x375873+_0x5e5a37*_0x2164ad,_0x4b56e7=_0x53de6c*_0x2164ad-_0x512538*_0x32d96e,_0x933047=-_0x53de6c*_0x375873+_0x44d17a*_0x32d96e,_0x2874e0=_0x512538*_0x375873-_0x44d17a*_0x2164ad,_0xd27615=_0x375873*_0x2f2a3d+_0x44d17a*_0x5c2356+_0x5e5a37*_0x4b56e7;if(_0xd27615===-0x5*0x260+0x1*0x1823+0x2b*-0x49)this['setIdentit'+'y']();else{const _0x3f17b=(0x74*-0x3+-0x3*0x8c2+0x1ba3)/_0xd27615,_0x1de5da=this['data'];_0x1de5da[-0x2*0x8f9+0x1*-0x13ea+0x25dc]=_0x2f2a3d*_0x3f17b,_0x1de5da[0x13a5+0x74a+0x17f*-0x12]=_0x2041b4*_0x3f17b,_0x1de5da[0x1*0x1003+-0x2*0x8bf+0x17d]=_0x5f2a1b*_0x3f17b,_0x1de5da[-0x2*-0x1261+0x9f7*-0x1+-0x1*0x1ac8]=_0x5c2356*_0x3f17b,_0x1de5da[0x6e3*-0x1+0x4a*0x53+0xaf*-0x19]=_0x585401*_0x3f17b,_0x1de5da[-0x23e6+-0xee7+-0x515*-0xa]=_0x24efea*_0x3f17b,_0x1de5da[-0xd81+0x2165+-0x1*0x13de]=_0x4b56e7*_0x3f17b,_0x1de5da[0xfa*0x22+-0xda0*0x2+-0x1*0x5ed]=_0x933047*_0x3f17b,_0x1de5da[0x4*0x131+-0x2452+-0x2*-0xfcb]=_0x2874e0*_0x3f17b;}return this;}['transformV'+'ector'](_0x1e297d,_0x33e4eb=new D()){const _0x312f50=this['data'],{x:_0x483178,y:_0x2df902,z:_0x1c87b8}=_0x1e297d;return _0x33e4eb['x']=_0x483178*_0x312f50[-0x1*0xe2f+-0x264f+0x1*0x347e]+_0x2df902*_0x312f50[0xb0c+0xdd1*0x1+0xc6d*-0x2]+_0x1c87b8*_0x312f50[-0x1d51+-0xc33*0x2+0x35bd],_0x33e4eb['y']=_0x483178*_0x312f50[-0x12a3*-0x2+-0x1*0xd58+-0x17ed]+_0x2df902*_0x312f50[-0x2e*-0x9a+-0x2090+0x4e8]+_0x1c87b8*_0x312f50[0x47*-0x54+-0x100+0x1df*0xd],_0x33e4eb['z']=_0x483178*_0x312f50[-0x1989+-0x2656+0x3fe1]+_0x2df902*_0x312f50[-0x2fe*-0x1+0x125d*-0x2+0x21c1]+_0x1c87b8*_0x312f50[0x746+0x1*-0x461+-0x2dd],_0x33e4eb;}};h(hn,'IDENTITY',Object['freeze'](new hn())),h(hn,'ZERO',Object['freeze'](new hn()['set']([-0x15a7*0x1+0xd86+0x821,0x35*0x85+0x7*-0x77+-0x1848,0x713*-0x1+0x97a*0x3+-0x155b,0xb53*0x2+0xd3d*-0x2+0x3d4,0x7*-0x151+-0x1*0x1ab5+0x8fb*0x4,-0xa23+0x1acb*0x1+-0x52*0x34,-0x137e*0x1+-0x616+0x1994,0x2*-0x1de+-0x14f*0x8+0xe34,0x942+-0x1*-0xa81+-0x13c3*0x1])));let _i=hn;const Gt=class Gt{constructor(_0x513742=-0x1b6b+0x8c0+0x12ab,_0x1c57af=0x123b*-0x2+-0x2535+-0x1*-0x49ab){h(this,'x'),h(this,'y'),_0x513742['length']===0x519+-0x19ee+0x14d7?(this['x']=_0x513742[0x6*0xe1+0x1+-0x547],this['y']=_0x513742[-0x484+-0x143*-0x6+-0x30d]):(this['x']=_0x513742,this['y']=_0x1c57af);}['add'](_0x30181c){return this['x']+=_0x30181c['x'],this['y']+=_0x30181c['y'],this;}['add2'](_0xc193a4,_0x500fab){return this['x']=_0xc193a4['x']+_0x500fab['x'],this['y']=_0xc193a4['y']+_0x500fab['y'],this;}['addScalar'](_0x5cb3bc){return this['x']+=_0x5cb3bc,this['y']+=_0x5cb3bc,this;}['addScaled'](_0x302685,_0x15ca1c){return this['x']+=_0x302685['x']*_0x15ca1c,this['y']+=_0x302685['y']*_0x15ca1c,this;}['clone'](){const _0x5c379e=this['constructo'+'r'];return new _0x5c379e(this['x'],this['y']);}['copy'](_0x5ebeea){return this['x']=_0x5ebeea['x'],this['y']=_0x5ebeea['y'],this;}['cross'](_0x5f36cf){return this['x']*_0x5f36cf['y']-this['y']*_0x5f36cf['x'];}['distance'](_0x5c6a60){const _0x10562f=this['x']-_0x5c6a60['x'],_0x2e5d58=this['y']-_0x5c6a60['y'];return Math['sqrt'](_0x10562f*_0x10562f+_0x2e5d58*_0x2e5d58);}['div'](_0xd739ef){return this['x']/=_0xd739ef['x'],this['y']/=_0xd739ef['y'],this;}['div2'](_0x235555,_0x1ec8bf){return this['x']=_0x235555['x']/_0x1ec8bf['x'],this['y']=_0x235555['y']/_0x1ec8bf['y'],this;}['divScalar'](_0x5d5821){return this['x']/=_0x5d5821,this['y']/=_0x5d5821,this;}['dot'](_0x1a41da){return this['x']*_0x1a41da['x']+this['y']*_0x1a41da['y'];}['equals'](_0x572841){return this['x']===_0x572841['x']&&this['y']===_0x572841['y'];}['equalsAppr'+'ox'](_0xca324d,_0x290e63=0x1*0xec3+-0x2068+0x11a5+0.000001){return Math['abs'](this['x']-_0xca324d['x'])<_0x290e63&&Math['abs'](this['y']-_0xca324d['y'])<_0x290e63;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y'];}['lerp'](_0x3975f7,_0x221daa,_0x4b278f){return this['x']=_0x3975f7['x']+_0x4b278f*(_0x221daa['x']-_0x3975f7['x']),this['y']=_0x3975f7['y']+_0x4b278f*(_0x221daa['y']-_0x3975f7['y']),this;}['mul'](_0x10a3d7){return this['x']*=_0x10a3d7['x'],this['y']*=_0x10a3d7['y'],this;}['mul2'](_0x451955,_0x172ca3){return this['x']=_0x451955['x']*_0x172ca3['x'],this['y']=_0x451955['y']*_0x172ca3['y'],this;}['mulScalar'](_0x301c0d){return this['x']*=_0x301c0d,this['y']*=_0x301c0d,this;}['normalize'](_0x1e0eb3=this){const _0x356474=_0x1e0eb3['x']*_0x1e0eb3['x']+_0x1e0eb3['y']*_0x1e0eb3['y'];if(_0x356474>0x9c4*0x2+-0x50c+-0xe7c){const _0x4c08ec=(0x255d+-0x6a8+-0x1eb4)/Math['sqrt'](_0x356474);this['x']=_0x1e0eb3['x']*_0x4c08ec,this['y']=_0x1e0eb3['y']*_0x4c08ec;}return this;}['rotate'](_0x5273f7){const _0x4de9d0=Math['atan2'](this['x'],this['y'])+_0x5273f7*Y['DEG_TO_RAD'],_0x23e1e4=Math['sqrt'](this['x']*this['x']+this['y']*this['y']);return this['x']=Math['sin'](_0x4de9d0)*_0x23e1e4,this['y']=Math['cos'](_0x4de9d0)*_0x23e1e4,this;}['angle'](){return Math['atan2'](this['x'],this['y'])*Y['RAD_TO_DEG'];}['angleTo'](_0x4d5f27){return Math['atan2'](this['x']*_0x4d5f27['y']+this['y']*_0x4d5f27['x'],this['x']*_0x4d5f27['x']+this['y']*_0x4d5f27['y'])*Y['RAD_TO_DEG'];}['floor'](_0x57291b=this){return this['x']=Math['floor'](_0x57291b['x']),this['y']=Math['floor'](_0x57291b['y']),this;}['ceil'](_0x548ed6=this){return this['x']=Math['ceil'](_0x548ed6['x']),this['y']=Math['ceil'](_0x548ed6['y']),this;}['round'](_0x1cac73=this){return this['x']=Math['round'](_0x1cac73['x']),this['y']=Math['round'](_0x1cac73['y']),this;}['min'](_0x3486ec){return _0x3486ec['x']<this['x']&&(this['x']=_0x3486ec['x']),_0x3486ec['y']<this['y']&&(this['y']=_0x3486ec['y']),this;}['max'](_0x44af72){return _0x44af72['x']>this['x']&&(this['x']=_0x44af72['x']),_0x44af72['y']>this['y']&&(this['y']=_0x44af72['y']),this;}['set'](_0x42fec1,_0x8c425a){return this['x']=_0x42fec1,this['y']=_0x8c425a,this;}['sub'](_0x2ce3c9){return this['x']-=_0x2ce3c9['x'],this['y']-=_0x2ce3c9['y'],this;}['sub2'](_0x217142,_0xfc45df){return this['x']=_0x217142['x']-_0xfc45df['x'],this['y']=_0x217142['y']-_0xfc45df['y'],this;}['subScalar'](_0x255ed5){return this['x']-=_0x255ed5,this['y']-=_0x255ed5,this;}['fromArray'](_0x23e05c,_0x300c83=-0xedb*-0x2+0x1dc7+0x9d*-0x61){return this['x']=_0x23e05c[_0x300c83]??this['x'],this['y']=_0x23e05c[_0x300c83+(-0x5aa+0x1*-0x215b+0x2706)]??this['y'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+']';}['toArray'](_0x49a69e=[],_0x3baa6e=0x1*-0x1ee7+-0x5d0*0x3+0x7d*0x63){return _0x49a69e[_0x3baa6e]=this['x'],_0x49a69e[_0x3baa6e+(-0x18*-0x4e+-0x1e63+0x1714)]=this['y'],_0x49a69e;}static['angleRad'](_0x2edd3c,_0x23c073){return Math['atan2'](_0x2edd3c['x']*_0x23c073['y']-_0x2edd3c['y']*_0x23c073['x'],_0x2edd3c['x']*_0x23c073['x']+_0x2edd3c['y']*_0x23c073['y']);}};h(Gt,'ZERO',Object['freeze'](new Gt(0x928*0x1+-0x1d14+0x13ec,-0x1d92+0x21a5+0x7*-0x95))),h(Gt,'HALF',Object['freeze'](new Gt(-0x511+0x1681+-0x8b8*0x2+0.5,0x105b+-0x1a2a+0x9cf+0.5))),h(Gt,'ONE',Object['freeze'](new Gt(-0x251*-0x1+-0x2*-0x92f+-0x14ae,-0x16*-0x92+0x568*-0x2+-0x1bb))),h(Gt,'UP',Object['freeze'](new Gt(-0x6f*0x59+-0x7*0x499+0x46c6,-0x1d19+-0xa5a+0x1*0x2774))),h(Gt,'DOWN',Object['freeze'](new Gt(-0x253d+-0x2dc+-0x805*-0x5,-(0x1fed+0x1*0x13a2+-0x338e)))),h(Gt,'RIGHT',Object['freeze'](new Gt(0x1c7+-0x1384+0x11be,-0x69c+-0x92a+0x6*0x2a1))),h(Gt,'LEFT',Object['freeze'](new Gt(-(-0x23a0+-0x1*-0xb69+0x2*0xc1c),-0x7cd*-0x2+0xaa5*-0x1+-0x4f5)));let J=Gt;const hr=class hr{constructor(_0x2f16cb=-0x1703*0x1+-0x51*0x47+0x2d7a,_0x5be74a=0x301*-0x1+-0x4c*0x63+0x2065*0x1,_0x193173=0x1bbc+-0x4*-0xce+-0x7*0x46c,_0x2b66e8=0x2c6*0x8+-0x10f*-0x19+-0x30a7){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x2f16cb['length']===0x25c1+0x1*0x683+0xb10*-0x4?(this['x']=_0x2f16cb[0x12db+-0x1fd*0xb+0x304],this['y']=_0x2f16cb[-0xf*0x5+0x1e*-0xb2+0x1528],this['z']=_0x2f16cb[0x1*-0xb77+-0x7db+0x1354],this['w']=_0x2f16cb[-0x1afa+-0xcc8+0x27c5]):(this['x']=_0x2f16cb,this['y']=_0x5be74a,this['z']=_0x193173,this['w']=_0x2b66e8);}['add'](_0xc8bbe4){return this['x']+=_0xc8bbe4['x'],this['y']+=_0xc8bbe4['y'],this['z']+=_0xc8bbe4['z'],this['w']+=_0xc8bbe4['w'],this;}['add2'](_0xe7594d,_0x326763){return this['x']=_0xe7594d['x']+_0x326763['x'],this['y']=_0xe7594d['y']+_0x326763['y'],this['z']=_0xe7594d['z']+_0x326763['z'],this['w']=_0xe7594d['w']+_0x326763['w'],this;}['addScalar'](_0x2a63b8){return this['x']+=_0x2a63b8,this['y']+=_0x2a63b8,this['z']+=_0x2a63b8,this['w']+=_0x2a63b8,this;}['addScaled'](_0x2892f4,_0x396683){return this['x']+=_0x2892f4['x']*_0x396683,this['y']+=_0x2892f4['y']*_0x396683,this['z']+=_0x2892f4['z']*_0x396683,this['w']+=_0x2892f4['w']*_0x396683,this;}['clone'](){const _0x4ce454=this['constructo'+'r'];return new _0x4ce454(this['x'],this['y'],this['z'],this['w']);}['copy'](_0x414bf4){return this['x']=_0x414bf4['x'],this['y']=_0x414bf4['y'],this['z']=_0x414bf4['z'],this['w']=_0x414bf4['w'],this;}['div'](_0x56201e){return this['x']/=_0x56201e['x'],this['y']/=_0x56201e['y'],this['z']/=_0x56201e['z'],this['w']/=_0x56201e['w'],this;}['div2'](_0x36f139,_0x4f680e){return this['x']=_0x36f139['x']/_0x4f680e['x'],this['y']=_0x36f139['y']/_0x4f680e['y'],this['z']=_0x36f139['z']/_0x4f680e['z'],this['w']=_0x36f139['w']/_0x4f680e['w'],this;}['divScalar'](_0x17950a){return this['x']/=_0x17950a,this['y']/=_0x17950a,this['z']/=_0x17950a,this['w']/=_0x17950a,this;}['dot'](_0x42a22a){return this['x']*_0x42a22a['x']+this['y']*_0x42a22a['y']+this['z']*_0x42a22a['z']+this['w']*_0x42a22a['w'];}['equals'](_0x5f49e8){return this['x']===_0x5f49e8['x']&&this['y']===_0x5f49e8['y']&&this['z']===_0x5f49e8['z']&&this['w']===_0x5f49e8['w'];}['equalsAppr'+'ox'](_0x552b05,_0x2a1da0=-0x2*-0x551+-0x2*-0xce3+0x8*-0x48d+0.000001){return Math['abs'](this['x']-_0x552b05['x'])<_0x2a1da0&&Math['abs'](this['y']-_0x552b05['y'])<_0x2a1da0&&Math['abs'](this['z']-_0x552b05['z'])<_0x2a1da0&&Math['abs'](this['w']-_0x552b05['w'])<_0x2a1da0;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x4c76c8,_0x304eb8,_0x303582){return this['x']=_0x4c76c8['x']+_0x303582*(_0x304eb8['x']-_0x4c76c8['x']),this['y']=_0x4c76c8['y']+_0x303582*(_0x304eb8['y']-_0x4c76c8['y']),this['z']=_0x4c76c8['z']+_0x303582*(_0x304eb8['z']-_0x4c76c8['z']),this['w']=_0x4c76c8['w']+_0x303582*(_0x304eb8['w']-_0x4c76c8['w']),this;}['mul'](_0x4764a5){return this['x']*=_0x4764a5['x'],this['y']*=_0x4764a5['y'],this['z']*=_0x4764a5['z'],this['w']*=_0x4764a5['w'],this;}['mul2'](_0x3472a3,_0x2d3456){return this['x']=_0x3472a3['x']*_0x2d3456['x'],this['y']=_0x3472a3['y']*_0x2d3456['y'],this['z']=_0x3472a3['z']*_0x2d3456['z'],this['w']=_0x3472a3['w']*_0x2d3456['w'],this;}['mulScalar'](_0x3ee570){return this['x']*=_0x3ee570,this['y']*=_0x3ee570,this['z']*=_0x3ee570,this['w']*=_0x3ee570,this;}['normalize'](_0x313c94=this){const _0x346d63=_0x313c94['x']*_0x313c94['x']+_0x313c94['y']*_0x313c94['y']+_0x313c94['z']*_0x313c94['z']+_0x313c94['w']*_0x313c94['w'];if(_0x346d63>0x965+0x6*-0x293+0x60d){const _0x42a970=(0x29*-0xc6+-0x29*0x2f+0x273e)/Math['sqrt'](_0x346d63);this['x']=_0x313c94['x']*_0x42a970,this['y']=_0x313c94['y']*_0x42a970,this['z']=_0x313c94['z']*_0x42a970,this['w']=_0x313c94['w']*_0x42a970;}return this;}['floor'](_0x355b97=this){return this['x']=Math['floor'](_0x355b97['x']),this['y']=Math['floor'](_0x355b97['y']),this['z']=Math['floor'](_0x355b97['z']),this['w']=Math['floor'](_0x355b97['w']),this;}['ceil'](_0x59d733=this){return this['x']=Math['ceil'](_0x59d733['x']),this['y']=Math['ceil'](_0x59d733['y']),this['z']=Math['ceil'](_0x59d733['z']),this['w']=Math['ceil'](_0x59d733['w']),this;}['round'](_0x288d75=this){return this['x']=Math['round'](_0x288d75['x']),this['y']=Math['round'](_0x288d75['y']),this['z']=Math['round'](_0x288d75['z']),this['w']=Math['round'](_0x288d75['w']),this;}['min'](_0x5adbc9){return _0x5adbc9['x']<this['x']&&(this['x']=_0x5adbc9['x']),_0x5adbc9['y']<this['y']&&(this['y']=_0x5adbc9['y']),_0x5adbc9['z']<this['z']&&(this['z']=_0x5adbc9['z']),_0x5adbc9['w']<this['w']&&(this['w']=_0x5adbc9['w']),this;}['max'](_0x3e01f1){return _0x3e01f1['x']>this['x']&&(this['x']=_0x3e01f1['x']),_0x3e01f1['y']>this['y']&&(this['y']=_0x3e01f1['y']),_0x3e01f1['z']>this['z']&&(this['z']=_0x3e01f1['z']),_0x3e01f1['w']>this['w']&&(this['w']=_0x3e01f1['w']),this;}['set'](_0x15828e,_0x5bb219,_0x54eb52,_0x38d1fd){return this['x']=_0x15828e,this['y']=_0x5bb219,this['z']=_0x54eb52,this['w']=_0x38d1fd,this;}['sub'](_0x3c4e32){return this['x']-=_0x3c4e32['x'],this['y']-=_0x3c4e32['y'],this['z']-=_0x3c4e32['z'],this['w']-=_0x3c4e32['w'],this;}['sub2'](_0x5ead2d,_0x270705){return this['x']=_0x5ead2d['x']-_0x270705['x'],this['y']=_0x5ead2d['y']-_0x270705['y'],this['z']=_0x5ead2d['z']-_0x270705['z'],this['w']=_0x5ead2d['w']-_0x270705['w'],this;}['subScalar'](_0x4c0b2d){return this['x']-=_0x4c0b2d,this['y']-=_0x4c0b2d,this['z']-=_0x4c0b2d,this['w']-=_0x4c0b2d,this;}['fromArray'](_0x1ae286,_0x2741cb=0x251*0x2+-0x7*0x141+-0x1*-0x425){return this['x']=_0x1ae286[_0x2741cb]??this['x'],this['y']=_0x1ae286[_0x2741cb+(-0x2669*-0x1+-0xb5*-0x8+-0x2c10)]??this['y'],this['z']=_0x1ae286[_0x2741cb+(0x25*0x3b+-0x1c67+0xa*0x1fd)]??this['z'],this['w']=_0x1ae286[_0x2741cb+(0x16e1+0x2028+0x2*-0x1b83)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x479159=[],_0xbaff10=-0x4f*0x29+-0xd96*0x1+0x1a3d){return _0x479159[_0xbaff10]=this['x'],_0x479159[_0xbaff10+(0x204*-0xe+0x1*-0x1291+0x2eca)]=this['y'],_0x479159[_0xbaff10+(0x4*0xda+-0x1153+0xded)]=this['z'],_0x479159[_0xbaff10+(-0x2427+-0x4*-0x239+0x1b46*0x1)]=this['w'],_0x479159;}};h(hr,'ZERO',Object['freeze'](new hr(0x99b*0x1+0x11d7+0x493*-0x6,-0x6d*-0x59+0xb*-0x32d+-0x2f6,-0x229*-0x4+-0x1b1*0x7+0x333,0x52*-0xf+-0x3a1+0x86f))),h(hr,'HALF',Object['freeze'](new hr(-0x2687+-0x19e8+0xce3*0x5+0.5,-0x1d58+0x4c*-0x2+0x1*0x1df0+0.5,0x2059+-0x142b+-0xc2e+0.5,0x1102+0x1d*-0x5d+-0x1*0x679+0.5))),h(hr,'ONE',Object['freeze'](new hr(0xb*0x26e+0x1d23+-0x113*0x34,0x1*0x3b9+-0x266a+0x1*0x22b2,-0x1a9f+0x1*0x204d+-0x5ad,0xa4c*0x2+-0x7*-0xbf+-0x19d0)));let re=hr;const jn=new J(),Rs=new D(),Js=new D(),ei=new D(),Dl=new D(),jr=class jr{constructor(){h(this,'data',new Float32Array(0x7f*-0x17+0x1b67+-0x1*0xfee)),this['data'][0x25ed+-0x2*-0xb78+0x1*-0x3cdd]=this['data'][0x1973+-0x1a6a+0xfc]=this['data'][-0xe03+0x197*0x15+-0x1356]=this['data'][0x13fb+0x1455+-0x2841]=-0x43*0x31+0x1d7d+0x1*-0x10a9;}static['_getPerspe'+'ctiveHalfS'+'ize'](_0x3b320d,_0xfdf262,_0x4f7924,_0x3f9ec7,_0x1c2f7c){_0x1c2f7c?(_0x3b320d['x']=_0x3f9ec7*Math['tan'](_0xfdf262*Math['PI']/(0x5*-0xeb+-0x2094+0x2693)),_0x3b320d['y']=_0x3b320d['x']/_0x4f7924):(_0x3b320d['y']=_0x3f9ec7*Math['tan'](_0xfdf262*Math['PI']/(-0x18*-0x1b+-0x19*-0x13d+-0x2015)),_0x3b320d['x']=_0x3b320d['y']*_0x4f7924);}['add2'](_0x5a4647,_0x4bc734){const _0x3e3084=_0x5a4647['data'],_0x4e5fe8=_0x4bc734['data'],_0x4721b4=this['data'];return _0x4721b4[-0x17e9+-0x2012+0x37fb]=_0x3e3084[-0x26ac+-0x1168*-0x1+-0x551*-0x4]+_0x4e5fe8[-0x3*0x95f+-0x37*0x17+0x210e],_0x4721b4[0x3*-0x661+0x2577+-0x1253*0x1]=_0x3e3084[0x12a0+0x3eb+-0x2*0xb45]+_0x4e5fe8[0x1c6d*0x1+0x9ce+-0x2a*0xe9],_0x4721b4[-0x1a7c+0x26af+-0xc31*0x1]=_0x3e3084[0x2200+0x1b2a*0x1+0x3d28*-0x1]+_0x4e5fe8[0x1325+-0x2672+-0x134f*-0x1],_0x4721b4[-0x714+0x406*-0x2+-0x1f*-0x7d]=_0x3e3084[0x1*0x8aa+-0x1b00+0x1*0x1259]+_0x4e5fe8[0x1467+0x1c22+-0x3086],_0x4721b4[-0xb77*-0x1+0x2*0xaa9+-0x1*0x20c5]=_0x3e3084[0x183e+-0x20bf*0x1+-0x2d7*-0x3]+_0x4e5fe8[-0x7*-0x432+0x1*0x2b3+-0x200d],_0x4721b4[0x647*0x1+-0x1381*0x1+-0x1*-0xd3f]=_0x3e3084[0x1931+-0x180b+-0x121*0x1]+_0x4e5fe8[-0x7*0x21d+0x1*0x2155+0x1af*-0xb],_0x4721b4[-0xf36+-0x1c3*0x5+0x180b]=_0x3e3084[-0x3*0x475+-0xc89+0x19ee]+_0x4e5fe8[-0x11*-0x26+0x1778*-0x1+0x14f8],_0x4721b4[0x7d5*0x4+-0x734+-0x1819*0x1]=_0x3e3084[0x3cb+-0x250b+0x2147]+_0x4e5fe8[-0xe*0x1ca+0xe9a+-0x17f*-0x7],_0x4721b4[-0x22cd+-0x1*-0xbd8+0x6b*0x37]=_0x3e3084[0x428+0x16b8*-0x1+0x5*0x3b8]+_0x4e5fe8[-0x1b56+0x1*0x607+0x1557],_0x4721b4[-0x5*0x73f+0x16de+0xd66]=_0x3e3084[0x2*0x26b+-0x21ea+0x1d1d]+_0x4e5fe8[-0x2598+0xf2*-0xd+0x31eb],_0x4721b4[-0x3a*0x40+0x1e4*-0x2+0x1252]=_0x3e3084[-0x125b+-0x11f9*0x1+0x245e]+_0x4e5fe8[0x20ae*-0x1+-0x40f*-0x3+0x148b],_0x4721b4[0x73a+-0x1cf7*-0x1+0xe*-0x295]=_0x3e3084[-0x14ae+0x3b*-0x9d+0x38e8]+_0x4e5fe8[-0x173b+-0x64d+0x1d93],_0x4721b4[0x222c+0x10b*-0x1b+0x5f7*-0x1]=_0x3e3084[-0x168d+0xad4+0xbc5]+_0x4e5fe8[0x5f9+-0xaaa+0x1*0x4bd],_0x4721b4[0x47*0x11+-0x1f93*-0x1+-0x1*0x243d]=_0x3e3084[0x1537*0x1+0x2364+-0x388e]+_0x4e5fe8[0x11e8+0x2*0xa33+-0x2641],_0x4721b4[-0x1*-0x107b+0x25e2+-0x364f]=_0x3e3084[-0x1360+-0x2*-0x579+0x4*0x21f]+_0x4e5fe8[-0xca7+-0x811*-0x3+0x1*-0xb7e],_0x4721b4[0x14d1+0x1a86+-0x2f48]=_0x3e3084[0x9*0x18+0x13db+-0x1*0x14a4]+_0x4e5fe8[-0x199d+-0x8*-0x34f+-0x66*0x2],this;}['add'](_0x620b0f){return this['add2'](this,_0x620b0f);}['clone'](){const _0x220907=this['constructo'+'r'];return new _0x220907()['copy'](this);}['copy'](_0x55e745){const _0x4edcff=_0x55e745['data'],_0x3d98bf=this['data'];return _0x3d98bf[0xafc+0x15ea+-0x20e6]=_0x4edcff[0x16e+-0x1ff3*0x1+-0x1*-0x1e85],_0x3d98bf[0xf*0x290+0x227b+-0x48ea]=_0x4edcff[-0x79*-0x5+0x9+0x265*-0x1],_0x3d98bf[-0x24d4*-0x1+0x255+-0x2727]=_0x4edcff[0x21*-0x2+0x11e5+0x1*-0x11a1],_0x3d98bf[-0xfb*-0x11+0x116b+-0x2213]=_0x4edcff[0x1998+-0x5a2+-0x13f3],_0x3d98bf[-0x234a+0x2123+0x22b]=_0x4edcff[-0x1*-0x90c+0x8d6+-0x1*0x11de],_0x3d98bf[-0x47d+-0x1*-0x20bf+-0x1c3d]=_0x4edcff[0x5*-0x295+-0x1914+0x2602],_0x3d98bf[-0x1a13+-0x2df+-0x4d4*-0x6]=_0x4edcff[-0x2a8*0xb+-0xe+0x3*0x9c4],_0x3d98bf[-0x1d20+-0x1880+0x1*0x35a7]=_0x4edcff[-0x4fd*0x2+0x8af*-0x4+-0x2cbd*-0x1],_0x3d98bf[0x1*0xd51+0x3*0xc5f+-0x2*0x1933]=_0x4edcff[0x4b*0x22+0x14fe+-0x1eec],_0x3d98bf[0x1c17+0x1*0x20b1+-0x3cbf]=_0x4edcff[-0x3d1*-0x4+-0x1b63+0xc28],_0x3d98bf[0x8*-0x4d+0x3*0x72+0x11c]=_0x4edcff[-0x17fe*0x1+0x1021+-0x77*-0x11],_0x3d98bf[0xd*-0x83+0x10c+0x5a6]=_0x4edcff[0x5b8+-0x391*-0x5+0x33*-0x76],_0x3d98bf[-0x190+-0x2*0x981+0x149e]=_0x4edcff[0x626*-0x4+-0x1c69+0x350d],_0x3d98bf[0x1581+0x501+-0x1a75]=_0x4edcff[0xa9f*0x3+-0x1*-0x1bcb+-0x3b9b],_0x3d98bf[-0x1ebe+-0x1*-0x19bb+0x1*0x511]=_0x4edcff[-0x131f+-0x59*0x27+-0x346*-0xa],_0x3d98bf[0x1c53+-0xb5b+-0x10e9*0x1]=_0x4edcff[0x4a*0x4e+0x225f*0x1+0x4bd*-0xc],this;}['equals'](_0x231a5e){const _0x553ec9=this['data'],_0x38187a=_0x231a5e['data'];return _0x553ec9[0x1990+-0xdb+-0x23f*0xb]===_0x38187a[0x1f00+0x5ab*-0x6+0x302]&&_0x553ec9[0x107f+-0x91c+-0x762]===_0x38187a[-0x2329*-0x1+0x830+-0x2b58]&&_0x553ec9[-0xfcc+0x307*0x5+0xab]===_0x38187a[-0x2*0x295+-0x15d7+0x1b03]&&_0x553ec9[-0x19*-0x5e+0x2316+-0x2c41]===_0x38187a[-0x22fc+0x1*-0x11a6+0x34a5]&&_0x553ec9[-0xbf*-0x2e+0x1*-0x1846+-0x18*0x6b]===_0x38187a[0xef*-0x1d+-0x19*-0x13a+0xb7*-0x5]&&_0x553ec9[-0x4a*-0x3c+0x1*0x13ff+0x2552*-0x1]===_0x38187a[0xfad*0x1+-0xa3*-0x25+0x2737*-0x1]&&_0x553ec9[0x779*-0x2+0x17b*0x1a+-0x1786]===_0x38187a[0x1724*0x1+-0x1*-0x1e4f+0x123*-0x2f]&&_0x553ec9[-0xc1b*-0x3+0x97*-0x1+-0x23b3]===_0x38187a[0x5*0x6c9+-0xc23+-0x15c3]&&_0x553ec9[-0xe53*0x2+-0x26f3*-0x1+-0xa45]===_0x38187a[-0x59*0x4a+-0x1c0a+0x35cc]&&_0x553ec9[-0x184d+0x4*0x5e9+0xb2*0x1]===_0x38187a[-0x359+0x1*-0x179f+0xdf*0x1f]&&_0x553ec9[-0x9d8+-0x2501+-0xfa1*-0x3]===_0x38187a[-0x14c7+-0x1226+0x26f7]&&_0x553ec9[-0x2156+-0x1071+0x31d2]===_0x38187a[-0x1*-0x1529+-0x3a5*0x9+0x3*0x3e5]&&_0x553ec9[0x66c+0x5f*-0x57+0x19e9]===_0x38187a[0x28*-0x8+-0x59*0x4f+0x1cc3]&&_0x553ec9[-0x1a9f+-0x263f*0x1+0x40eb]===_0x38187a[-0x1*-0x18a+-0xb*-0x1f5+-0x6*0x3d6]&&_0x553ec9[-0x68e+0xc*0x27c+-0x1734]===_0x38187a[-0x442*-0x4+-0x252d+0x1433]&&_0x553ec9[0x9*-0x1d+-0x2*-0x2+0x110]===_0x38187a[0x15c1+-0x1c6e+0x35e*0x2];}['isIdentity'](){const _0x385273=this['data'];return _0x385273[-0x15e0+0x15d*0x1+0x1483]===-0x1d96+-0x10a4+0x315*0xf&&_0x385273[-0x7*-0x1cd+0x49*-0x57+0xc35]===0x1*-0x1+-0x24b8+0x24b9&&_0x385273[0x2*-0x5b5+-0xd82+0x18ee]===-0x1*0x1ddf+-0x1bd1+0x1*0x39b0&&_0x385273[-0x6ef+0x29*-0xa+0x88c]===0xf5a+-0x1*0x17c1+0x2cd*0x3&&_0x385273[0xd09+-0x178*-0x2+0xd7*-0x13]===-0x2153*-0x1+-0x1193*-0x2+0x16d3*-0x3&&_0x385273[-0x198f+-0x8c8+-0x5ba*-0x6]===-0x5*-0x5bc+0x915+0x40*-0x97&&_0x385273[-0x1*0x5d1+0x175e+-0x1*0x1187]===0x1af9+0x16*0xbc+-0x2b21&&_0x385273[-0x7cf*-0x1+0xb18+-0x12e0]===0x1989+0x376*0xb+0x13*-0x359&&_0x385273[0x19ed*0x1+-0x1687+0x1af*-0x2]===-0x2470+-0x1*0x99a+0x2e0a&&_0x385273[0x1a7d*0x1+0x2*0xdd3+-0x361a]===-0x7*0x2ed+-0x7d*-0x4b+0x4*-0x409&&_0x385273[0x7ed+0x120e+-0x1d*0xe5]===0xb5d*-0x1+0x6f*-0x9+0xf45&&_0x385273[0xffb*-0x1+-0x2193+0x3199]===-0x1fe7*0x1+-0xb20+0x2b07&&_0x385273[-0x727*-0x4+0x153e+-0x31ce]===0x20cc+-0x7b1*-0x2+-0x2*0x1817&&_0x385273[-0x94d+-0x912+0x20c*0x9]===-0x2*0x107c+0x2f1*0xa+0x38e&&_0x385273[0xdbb+-0x2684+0x18d7]===0xa*-0x113+0x95a+0xb2*0x2&&_0x385273[-0x1*0x661+0x32*-0xbb+-0xe52*-0x3]===0x746+0x1da*-0x7+0x5b1;}['mul2'](_0x1f282f,_0x25a9fc){const _0x64d7a7=_0x1f282f['data'],_0x4f6f92=_0x25a9fc['data'],_0x451e48=this['data'],_0x228b36=_0x64d7a7[0x161*-0x17+-0x5c9*-0x5+0x3*0xee],_0xeb561e=_0x64d7a7[0x1*0x18ae+0x10c4+-0x2971],_0x11740a=_0x64d7a7[-0x68*-0x24+0x1cce*0x1+-0x2b6c],_0x4e1345=_0x64d7a7[0x18d4+0x6*0x1c7+-0x237b],_0x2a2276=_0x64d7a7[0x3d*-0x7c+0x9ad*-0x1+-0x7*-0x59b],_0x2c669d=_0x64d7a7[-0xd7*0x15+-0x1e9e+0x3046],_0xb166a5=_0x64d7a7[0x1*0x26ad+-0x1885+-0xe22],_0x319186=_0x64d7a7[0x1509+0x24d4*-0x1+0xfd2],_0x50f04a=_0x64d7a7[0x2015+0x3df+-0x23ec],_0x12dafc=_0x64d7a7[-0x1*-0x36d+0x11de*0x1+-0x1542*0x1],_0x1b30f2=_0x64d7a7[0x1*0x10e3+0x9cd+-0x1aa6],_0x4066bf=_0x64d7a7[-0x260e*-0x1+-0xf45+-0x16be],_0xdae771=_0x64d7a7[-0xe99+-0x1404+-0x1d3*-0x13],_0x2eff93=_0x64d7a7[-0x137*0x1+-0x2294+0x23d8],_0x11e65c=_0x64d7a7[-0x26cc+0x1ca1+0xa39],_0x130472=_0x64d7a7[-0x3*0xae7+0x1c3d+-0x13*-0x3d];let _0x347c40,_0x3b3328,_0x4840ec,_0x1318d9;return _0x347c40=_0x4f6f92[0x13*0x137+-0x1463*-0x1+-0x2b78],_0x3b3328=_0x4f6f92[-0x2*-0x595+0x1203+-0x1d2c*0x1],_0x4840ec=_0x4f6f92[0x1745+0xd*-0x16a+0x4e1*-0x1],_0x1318d9=_0x4f6f92[0x1*-0x9a4+-0x623*-0x4+-0x4f7*0x3],_0x451e48[0xb99*-0x3+0x2107+-0x4*-0x71]=_0x228b36*_0x347c40+_0x2a2276*_0x3b3328+_0x50f04a*_0x4840ec+_0xdae771*_0x1318d9,_0x451e48[-0x1*0x851+-0x1495+-0x421*-0x7]=_0xeb561e*_0x347c40+_0x2c669d*_0x3b3328+_0x12dafc*_0x4840ec+_0x2eff93*_0x1318d9,_0x451e48[-0x24a2+-0x871+-0x1*-0x2d15]=_0x11740a*_0x347c40+_0xb166a5*_0x3b3328+_0x1b30f2*_0x4840ec+_0x11e65c*_0x1318d9,_0x451e48[0x1a07+-0x1b*-0x65+-0xc39*0x3]=_0x4e1345*_0x347c40+_0x319186*_0x3b3328+_0x4066bf*_0x4840ec+_0x130472*_0x1318d9,_0x347c40=_0x4f6f92[0x1*-0x26a+0x2469+-0x21fb],_0x3b3328=_0x4f6f92[-0x188b+0x5f0*-0x1+0x2*0xf40],_0x4840ec=_0x4f6f92[-0x9b6+0x6e7+0x2d5],_0x1318d9=_0x4f6f92[-0x2e*0x23+-0x26d2+0x2d23],_0x451e48[0x25bb*0x1+-0x16aa+-0xf0d]=_0x228b36*_0x347c40+_0x2a2276*_0x3b3328+_0x50f04a*_0x4840ec+_0xdae771*_0x1318d9,_0x451e48[-0x637*-0x1+-0x17e4+-0xa*-0x1c5]=_0xeb561e*_0x347c40+_0x2c669d*_0x3b3328+_0x12dafc*_0x4840ec+_0x2eff93*_0x1318d9,_0x451e48[0xa95+-0x1a1b+0xf8c]=_0x11740a*_0x347c40+_0xb166a5*_0x3b3328+_0x1b30f2*_0x4840ec+_0x11e65c*_0x1318d9,_0x451e48[0x1d2*0x1+-0x1920+0x1755]=_0x4e1345*_0x347c40+_0x319186*_0x3b3328+_0x4066bf*_0x4840ec+_0x130472*_0x1318d9,_0x347c40=_0x4f6f92[-0x5*0x6ce+0x2f5*0xd+-0x463],_0x3b3328=_0x4f6f92[0x4a9+0x6cc+0xac*-0x11],_0x4840ec=_0x4f6f92[-0x13f9+0x56d*-0x1+0x1970],_0x1318d9=_0x4f6f92[0x1a2a+0x2198+-0x3bb7],_0x451e48[-0x16c6+0xea7+0x827]=_0x228b36*_0x347c40+_0x2a2276*_0x3b3328+_0x50f04a*_0x4840ec+_0xdae771*_0x1318d9,_0x451e48[0x251*-0x9+-0xb73+-0x59*-0x5d]=_0xeb561e*_0x347c40+_0x2c669d*_0x3b3328+_0x12dafc*_0x4840ec+_0x2eff93*_0x1318d9,_0x451e48[-0x2d*0x7b+-0x3*0xc53+0x26*0x18b]=_0x11740a*_0x347c40+_0xb166a5*_0x3b3328+_0x1b30f2*_0x4840ec+_0x11e65c*_0x1318d9,_0x451e48[-0x1*0x1039+-0x25ed+0x3631]=_0x4e1345*_0x347c40+_0x319186*_0x3b3328+_0x4066bf*_0x4840ec+_0x130472*_0x1318d9,_0x347c40=_0x4f6f92[0x35f*-0x7+0x8bf*-0x2+-0x2923*-0x1],_0x3b3328=_0x4f6f92[-0x635+0x1bcb+-0x1589],_0x4840ec=_0x4f6f92[-0x1f*-0xeb+0x513+-0x217a],_0x1318d9=_0x4f6f92[0x1f3d+0x16c8+-0x35f6],_0x451e48[-0x1e6d+-0x8b6+0x272f]=_0x228b36*_0x347c40+_0x2a2276*_0x3b3328+_0x50f04a*_0x4840ec+_0xdae771*_0x1318d9,_0x451e48[-0x1*-0x7f2+0x2321+-0x2b06]=_0xeb561e*_0x347c40+_0x2c669d*_0x3b3328+_0x12dafc*_0x4840ec+_0x2eff93*_0x1318d9,_0x451e48[0xb*0x17c+0x1*0x35f+-0x13a5]=_0x11740a*_0x347c40+_0xb166a5*_0x3b3328+_0x1b30f2*_0x4840ec+_0x11e65c*_0x1318d9,_0x451e48[0x2015+0x1465+0x346b*-0x1]=_0x4e1345*_0x347c40+_0x319186*_0x3b3328+_0x4066bf*_0x4840ec+_0x130472*_0x1318d9,this;}['mulAffine2'](_0x13fc53,_0x1f6621){const _0xdd00b1=_0x13fc53['data'],_0x12d96d=_0x1f6621['data'],_0x4b0eb9=this['data'],_0xdcab59=_0xdd00b1[0x4*0x388+0x17e1+-0x2601],_0x88aee4=_0xdd00b1[-0x23fb+0xc77*-0x1+0x3073],_0x43c684=_0xdd00b1[-0x1d3e+0x29*-0x94+0x1*0x34f4],_0x2081b4=_0xdd00b1[-0x1fa5*-0x1+-0x200c+0x6b],_0x1de78b=_0xdd00b1[-0x1197+0x238e+0x8f9*-0x2],_0x5d86a9=_0xdd00b1[0xfc3+-0x6*0x1b3+-0x58b],_0x1ec642=_0xdd00b1[-0x1af7+0x2*0xc9a+-0x3*-0x99],_0x1ba910=_0xdd00b1[0x7a0+0x164e+-0x1de5],_0x949b4d=_0xdd00b1[-0x58+-0x132*0x19+-0x4*-0x791],_0x4969c1=_0xdd00b1[-0x10d3+-0x3*0x97a+-0x1*-0x2d4d],_0x1ad5ed=_0xdd00b1[0x65c+0x1d*-0xe2+0x134b],_0x209448=_0xdd00b1[-0x32+-0x226c+-0x27a*-0xe];let _0x3247b5,_0x1fff8d,_0x51a282;return _0x3247b5=_0x12d96d[-0x2316+0x1708+0xc0e*0x1],_0x1fff8d=_0x12d96d[-0x158f*0x1+0x1b00+-0x570],_0x51a282=_0x12d96d[-0x25f1+0x43*0x4a+-0x1*-0x1295],_0x4b0eb9[0x1840+0x16*0xdb+0x95*-0x4a]=_0xdcab59*_0x3247b5+_0x2081b4*_0x1fff8d+_0x1ec642*_0x51a282,_0x4b0eb9[0x1e0d*-0x1+0x152*-0x13+0x1b92*0x2]=_0x88aee4*_0x3247b5+_0x1de78b*_0x1fff8d+_0x1ba910*_0x51a282,_0x4b0eb9[0x254d+0x706+0x8dd*-0x5]=_0x43c684*_0x3247b5+_0x5d86a9*_0x1fff8d+_0x949b4d*_0x51a282,_0x4b0eb9[-0x1988+0x1*-0x16be+0x2f*0x107]=0x1eb*-0x13+0x1e66+-0x77*-0xd,_0x3247b5=_0x12d96d[0x13f*0x1+-0x109f+-0x2*-0x7b2],_0x1fff8d=_0x12d96d[0x1b72+0x1*-0x2a+-0x1b43],_0x51a282=_0x12d96d[-0x4*0x47f+0x1*-0x1b69+-0xb*-0x421],_0x4b0eb9[0x53*0x75+-0x160d+-0xfde]=_0xdcab59*_0x3247b5+_0x2081b4*_0x1fff8d+_0x1ec642*_0x51a282,_0x4b0eb9[-0x7*0x39f+-0x2*0x91a+0x8f*0x4e]=_0x88aee4*_0x3247b5+_0x1de78b*_0x1fff8d+_0x1ba910*_0x51a282,_0x4b0eb9[-0x15a8+-0x21c1+0x376f]=_0x43c684*_0x3247b5+_0x5d86a9*_0x1fff8d+_0x949b4d*_0x51a282,_0x4b0eb9[0x1376*-0x2+-0x1b0e+-0x4201*-0x1]=0x7*-0xbf+-0x1fb2+0x24eb,_0x3247b5=_0x12d96d[0xfb*-0x7+-0x2391+-0x2*-0x153b],_0x1fff8d=_0x12d96d[0xe72*-0x2+-0x7c7+0x24b4],_0x51a282=_0x12d96d[-0x201*-0xd+-0xfb*0x13+-0x762],_0x4b0eb9[-0x669+0x1*0xc9a+0x1*-0x629]=_0xdcab59*_0x3247b5+_0x2081b4*_0x1fff8d+_0x1ec642*_0x51a282,_0x4b0eb9[-0x241*-0xb+-0x208a+-0x1f2*-0x4]=_0x88aee4*_0x3247b5+_0x1de78b*_0x1fff8d+_0x1ba910*_0x51a282,_0x4b0eb9[-0xd*0x39+-0x141*0x3+0x1*0x6b2]=_0x43c684*_0x3247b5+_0x5d86a9*_0x1fff8d+_0x949b4d*_0x51a282,_0x4b0eb9[-0x2312+0x70+-0x10d*-0x21]=0x521+-0xb0b+-0x1*-0x5ea,_0x3247b5=_0x12d96d[0xcc2+-0xb31+-0x185],_0x1fff8d=_0x12d96d[0x1*-0x1a26+-0x1*-0x416+-0x11*-0x14d],_0x51a282=_0x12d96d[-0x160b+0xb*0x181+-0x2*-0x2c7],_0x4b0eb9[0x1*-0xe4d+-0x2562+0x33bb]=_0xdcab59*_0x3247b5+_0x2081b4*_0x1fff8d+_0x1ec642*_0x51a282+_0x4969c1,_0x4b0eb9[-0x1fc*0x5+0x2*0xdf+0x83b*0x1]=_0x88aee4*_0x3247b5+_0x1de78b*_0x1fff8d+_0x1ba910*_0x51a282+_0x1ad5ed,_0x4b0eb9[0x20e9+0x1f96+-0x1a7*0x27]=_0x43c684*_0x3247b5+_0x5d86a9*_0x1fff8d+_0x949b4d*_0x51a282+_0x209448,_0x4b0eb9[0x3*0x35f+-0x9d1+-0x3d]=0xaa*0x2b+0x1058+-0x2ce5,this;}['mul'](_0x4d0f47){return this['mul2'](this,_0x4d0f47);}['transformP'+'oint'](_0x5ca720,_0x3940e1=new D()){const _0x5b4375=this['data'],{x:_0x2869d0,y:_0x5dea7a,z:_0x166e85}=_0x5ca720;return _0x3940e1['x']=_0x2869d0*_0x5b4375[0x84a+0x2171+-0x29bb]+_0x5dea7a*_0x5b4375[-0x2491+-0xec4+0x3359]+_0x166e85*_0x5b4375[0x1865*-0x1+-0x1d4b*0x1+0x35b8]+_0x5b4375[0x8b3+-0xf42+0x13*0x59],_0x3940e1['y']=_0x2869d0*_0x5b4375[-0x993+0x1*0x17c9+0xe35*-0x1]+_0x5dea7a*_0x5b4375[-0x1*-0x95e+-0x440*-0x2+-0x11d9]+_0x166e85*_0x5b4375[-0x1*-0x233+-0xcd*-0x19+-0x162f]+_0x5b4375[0x1b7b+0x47*0x62+-0x1234*0x3],_0x3940e1['z']=_0x2869d0*_0x5b4375[0x1214+0x1642+-0x2854*0x1]+_0x5dea7a*_0x5b4375[-0x41e+-0x873+0xc97]+_0x166e85*_0x5b4375[0x945*-0x2+0x17b0+-0x6d*0xc]+_0x5b4375[-0xae9*-0x2+0x1f2a+-0x34ee],_0x3940e1;}['transformV'+'ector'](_0x47f751,_0x4fa4fc=new D()){const _0x12af1f=this['data'],{x:_0x28c429,y:_0x323ea4,z:_0x5a9aa7}=_0x47f751;return _0x4fa4fc['x']=_0x28c429*_0x12af1f[0x2*0xc11+0x265*-0xd+0x6ff]+_0x323ea4*_0x12af1f[-0x2276+0x1*0x11d1+-0x10a9*-0x1]+_0x5a9aa7*_0x12af1f[-0x2*0xd88+-0x46*-0x11+0x1672],_0x4fa4fc['y']=_0x28c429*_0x12af1f[-0xd*0x2c5+-0x170b+-0x1*-0x3b0d]+_0x323ea4*_0x12af1f[-0x9*-0xc1+-0x3de+0x173*-0x2]+_0x5a9aa7*_0x12af1f[0x23ea*-0x1+0x10e7*0x1+0x130c],_0x4fa4fc['z']=_0x28c429*_0x12af1f[0xd*-0x43+0x103d+-0x1*0xcd4]+_0x323ea4*_0x12af1f[-0x12ef+0x2047+-0xd52]+_0x5a9aa7*_0x12af1f[-0x18b+0x172*-0x5+0x8cf],_0x4fa4fc;}['transformV'+'ec4'](_0x23bf08,_0x2cde3f=new re()){const _0x38e1c1=this['data'],{x:_0x1fe753,y:_0x42688d,z:_0x2ac2e7,w:_0x21cc6f}=_0x23bf08;return _0x2cde3f['x']=_0x1fe753*_0x38e1c1[-0x1810+0xae8+0xd28]+_0x42688d*_0x38e1c1[-0x1cf4+-0x16cf+0x33c7]+_0x2ac2e7*_0x38e1c1[0x137*-0x1e+-0x11c4+0x363e]+_0x21cc6f*_0x38e1c1[-0x1091*0x1+0x1c*-0x9e+0x21e5],_0x2cde3f['y']=_0x1fe753*_0x38e1c1[0xefc+0x2260+0x5f*-0x85]+_0x42688d*_0x38e1c1[0x1fea+0x790+-0x3*0xd27]+_0x2ac2e7*_0x38e1c1[0x1a20+0xd04+-0x3*0xd09]+_0x21cc6f*_0x38e1c1[0x13a3+-0xd0a+-0x68c],_0x2cde3f['z']=_0x1fe753*_0x38e1c1[-0x240c+0xd9*0x1+0x2335*0x1]+_0x42688d*_0x38e1c1[-0x2517+0x2d4+-0x83*-0x43]+_0x2ac2e7*_0x38e1c1[0x48*0x12+-0x1549*-0x1+-0x1a4f]+_0x21cc6f*_0x38e1c1[-0x7*-0x39a+-0x2045+-0x3*-0x25f],_0x2cde3f['w']=_0x1fe753*_0x38e1c1[-0xc3+0x1*-0x265c+-0x1391*-0x2]+_0x42688d*_0x38e1c1[-0x1*0x1ab1+0x264d*0x1+-0xb95]+_0x2ac2e7*_0x38e1c1[-0x59*-0x3+-0xd5f+0xc5f]+_0x21cc6f*_0x38e1c1[0xd7b+-0x61f*0x1+0x7*-0x10b],_0x2cde3f;}['setLookAt'](_0x34e902,_0x7a6877,_0x424fbe){ei['sub2'](_0x34e902,_0x7a6877)['normalize'](),Js['copy'](_0x424fbe)['normalize'](),Rs['cross'](Js,ei)['normalize'](),Js['cross'](ei,Rs);const _0x3ffa57=this['data'];return _0x3ffa57[-0x88d+-0x1ff3+0x510*0x8]=Rs['x'],_0x3ffa57[-0x1034+-0x175f*-0x1+-0x2*0x395]=Rs['y'],_0x3ffa57[-0x15b5+0x1*0xa3f+0x2*0x5bc]=Rs['z'],_0x3ffa57[-0x46*0x79+0x5c5*0x1+0x1b54]=-0x1435+0x28*-0x37+0x1*0x1ccd,_0x3ffa57[-0x124c+-0x21*0x43+0x1af3]=Js['x'],_0x3ffa57[-0x1939+0x35b*0xa+-0x850]=Js['y'],_0x3ffa57[-0x4e3*0x5+-0xd*-0x263+0x692*-0x1]=Js['z'],_0x3ffa57[0x581+0x4*0x139+-0xa5e]=-0x18f2+-0x2003+0x38f5,_0x3ffa57[0x1b60+0x3e8+-0x1*0x1f40]=ei['x'],_0x3ffa57[0x1*-0xdd8+-0xc7d+0x1a5e]=ei['y'],_0x3ffa57[0x71*0x37+0x1bbb+-0x33f8]=ei['z'],_0x3ffa57[-0x1f+0xfbf+-0x1*0xf95]=-0x190+-0x8*0x287+0x15c8,_0x3ffa57[-0x8fa+-0xaa4*0x2+0x1e4e*0x1]=_0x34e902['x'],_0x3ffa57[0x1d7f+0x2000+-0x3d72]=_0x34e902['y'],_0x3ffa57[0x968+0x14d*0x17+0x45d*-0x9]=_0x34e902['z'],_0x3ffa57[0x2550+-0x11a+-0x2427]=-0x1d66+-0x165f+-0x1*-0x33c6,this;}['setFrustum'](_0x492953,_0x352731,_0x349c00,_0x358549,_0x408667,_0x355c12){const _0x281d11=(-0x1*0x19d1+-0xd1c+0x26ef)*_0x408667,_0x4ee3ff=_0x352731-_0x492953,_0x2e87b6=_0x358549-_0x349c00,_0x5a4fd0=_0x355c12-_0x408667,_0x1aa10a=this['data'];return _0x1aa10a[-0x1d4a+0x13ae+0xf6*0xa]=_0x281d11/_0x4ee3ff,_0x1aa10a[0x19d4+0xaf6+-0x3*0xc43]=-0x8*0x4f+-0xf7f*-0x2+-0x2*0xe43,_0x1aa10a[0xfc5*-0x1+-0x87e*0x3+0x3b*0xb3]=0x1*0x60d+0x5*-0x238+-0x50b*-0x1,_0x1aa10a[0xed3+0x1301+-0x21d1]=-0x2ab*-0x5+0x1*-0x20a4+0x134d,_0x1aa10a[-0x54+0x2b*-0x3a+0xa16]=0xf8c+0x6*0x277+-0x1e56,_0x1aa10a[0x1ae4+-0x25b6+0x22b*0x5]=_0x281d11/_0x2e87b6,_0x1aa10a[0x19ea+-0xb5c+-0x136*0xc]=0xca*-0x1+-0x97*-0x2+-0x64,_0x1aa10a[-0x3*0x1f9+0x99a*0x2+-0xd42]=0x98*0x39+0x92+0x5*-0x6e2,_0x1aa10a[-0x47*0x83+0xb23*-0x3+0x45c6]=(_0x352731+_0x492953)/_0x4ee3ff,_0x1aa10a[-0x15e+0x1fc1*-0x1+-0x1094*-0x2]=(_0x358549+_0x349c00)/_0x2e87b6,_0x1aa10a[-0x16e0+0x1*0x3f1+0x12f9]=(-_0x355c12-_0x408667)/_0x5a4fd0,_0x1aa10a[-0x1938+-0xba6+-0x24e9*-0x1]=-(-0x152f+-0x24*0x10+0x1770),_0x1aa10a[-0x1*0x86+0xebe+-0xe2c]=0x150b*0x1+0x7b4+-0x1cbf,_0x1aa10a[-0x1*-0x170f+-0x621+-0x10e1]=-0x34a*0x5+-0x1*-0x40f+0xc63,_0x1aa10a[0x45c*0x8+0x1e88+-0x415a]=-_0x281d11*_0x355c12/_0x5a4fd0,_0x1aa10a[-0x67*-0x4+0xb03*-0x2+-0x1*-0x1479]=0x10f3*0x1+0xe99+0x1*-0x1f8c,this;}['setPerspec'+'tive'](_0x34d4f0,_0x408dbb,_0x7ac6d4,_0x52c0bb,_0x1878f4){return jr['_getPerspe'+'ctiveHalfS'+'ize'](jn,_0x34d4f0,_0x408dbb,_0x7ac6d4,_0x1878f4),this['setFrustum'](-jn['x'],jn['x'],-jn['y'],jn['y'],_0x7ac6d4,_0x52c0bb);}['setOrtho'](_0x33a4bc,_0x154968,_0x24ceaf,_0x1acc09,_0x2eef3d,_0x17b7c4){const _0xa9713c=this['data'];return _0xa9713c[0x1*0x30a+-0x35*0x83+-0x807*-0x3]=(0x947+0x15b6+-0x1efb)/(_0x154968-_0x33a4bc),_0xa9713c[-0xcb*0x23+-0xaa7+-0x2669*-0x1]=0x29*-0x4c+-0x1*-0x2681+-0x1a55,_0xa9713c[0x453+-0x7e0+0x1*0x38f]=-0x8c2*-0x4+-0x14b*0x3+-0x19*0x13f,_0xa9713c[0xb58+-0x2e*-0x67+-0x1dd7]=0x13af+0x45*0x6c+-0x30cb*0x1,_0xa9713c[-0x943+-0x7d*-0x47+0x64*-0x41]=0x1*-0x1951+0xd95+0xbbc,_0xa9713c[0x4b*0x5+-0x7b9*0x1+0x647]=(0x20cc+0x22da*-0x1+-0xc*-0x2c)/(_0x1acc09-_0x24ceaf),_0xa9713c[0xb1f*-0x1+0x67*-0x20+0x1805]=0x21b*0x7+0x1b*-0x123+0x4*0x3fd,_0xa9713c[-0x66*0x39+0x1ec0+0x803*-0x1]=-0x19d*0x7+0x1ca7+-0x1*0x115c,_0xa9713c[-0x1dfb+-0x6cd*0x5+0x4004]=0x2017+-0x312*0x7+0x1*-0xa99,_0xa9713c[-0x89*-0x23+0xf*-0x152+0x11c]=-0x17*-0x133+0x92a+-0x24bf,_0xa9713c[-0x1*-0x2171+0x144b+-0x3a*0xed]=-(0x851+0x22a2+0x2af1*-0x1)/(_0x17b7c4-_0x2eef3d),_0xa9713c[0x10b7+-0x293+-0xe19]=0x57*0x2d+-0x241*0x1+0x1*-0xd0a,_0xa9713c[-0xa7+0x18da+-0x1827]=-(_0x154968+_0x33a4bc)/(_0x154968-_0x33a4bc),_0xa9713c[-0xa*0x335+0x32*0x1e+0x1a43]=-(_0x1acc09+_0x24ceaf)/(_0x1acc09-_0x24ceaf),_0xa9713c[0x1708+0x48+-0x1742]=-(_0x17b7c4+_0x2eef3d)/(_0x17b7c4-_0x2eef3d),_0xa9713c[0xc5*-0x3+-0x6f+0x2cd]=0x1*0x202d+0x1c12*-0x1+-0x41a,this;}['setFromAxi'+'sAngle'](_0x4cdf71,_0x39cd16){_0x39cd16*=Y['DEG_TO_RAD'];const {x:_0x75ed67,y:_0x41385a,z:_0x1157f8}=_0x4cdf71,_0x455a53=Math['cos'](_0x39cd16),_0x284925=Math['sin'](_0x39cd16),_0x451067=0x3a*0x29+0x563*0x1+-0xeac*0x1-_0x455a53,_0x3838d7=_0x451067*_0x75ed67,_0x3c0583=_0x451067*_0x41385a,_0x4a2625=this['data'];return _0x4a2625[0x1*-0x207d+0x2*-0xa7+-0x21cb*-0x1]=_0x3838d7*_0x75ed67+_0x455a53,_0x4a2625[0x732+0x1d45*0x1+-0x167*0x1a]=_0x3838d7*_0x41385a+_0x284925*_0x1157f8,_0x4a2625[0x15e8*0x1+-0x963+-0xc83]=_0x3838d7*_0x1157f8-_0x284925*_0x41385a,_0x4a2625[-0x1*0xb99+0x45*-0x9+0x1*0xe09]=0x6b7*-0x5+0x1ba7+0x5ec*0x1,_0x4a2625[0xdeb+-0x259+-0x1ed*0x6]=_0x3838d7*_0x41385a-_0x284925*_0x1157f8,_0x4a2625[0x159f+-0x4*-0x564+0x82*-0x55]=_0x3c0583*_0x41385a+_0x455a53,_0x4a2625[0x27*-0x8f+-0x9*-0x1de+-0x501*-0x1]=_0x3c0583*_0x1157f8+_0x284925*_0x75ed67,_0x4a2625[0x1*0x166f+0x2200+-0x3868]=-0xa35+0x122c+-0x7f7,_0x4a2625[-0x228b+-0x5db+0x6*0x6bd]=_0x3838d7*_0x1157f8+_0x284925*_0x41385a,_0x4a2625[0x12e+-0x1b57+0x1a32]=_0x3c0583*_0x1157f8-_0x75ed67*_0x284925,_0x4a2625[-0x1*0xbcb+-0x555+0x112a]=_0x451067*_0x1157f8*_0x1157f8+_0x455a53,_0x4a2625[0x2515+0x1367+0x1*-0x3871]=0x87e*-0x1+-0x29*0x9f+0x21f5,_0x4a2625[-0x187f+0x53*0x11+-0x18*-0xcb]=0x3*-0x337+0xd6*-0x6+0x9*0x1a1,_0x4a2625[-0x1ad7*0x1+0x1*-0xd18+0xd54*0x3]=0x371*-0x2+0x1853+-0x1171,_0x4a2625[-0xd09*0x1+-0x2fc+-0x1013*-0x1]=-0x1*0x21af+-0x3*0xcd+0x2416,_0x4a2625[0x4*0x2f2+-0x466+0x753*-0x1]=-0xb5*-0x3+-0xcef+0xad1,this;}['setTransla'+'te'](_0xdd227,_0x33da77,_0x3bb1a5){const _0x1ce56e=this['data'];return _0x1ce56e[-0x603+-0x5f8+0xbfb]=0x826+-0xc5*-0x2+-0x43*0x25,_0x1ce56e[0x8f9+-0x1e2f*-0x1+-0x2727]=-0xd7*-0x1c+0x263a+-0x3dbe,_0x1ce56e[-0x1b16+0x1*0x20c5+0x5ad*-0x1]=0x265+0x3*0x47d+-0xfdc,_0x1ce56e[-0x24c5+0x1*-0x2bd+0x2785]=-0x1a74+0x10c7+0x9ad,_0x1ce56e[0x1714+0x1540+-0x2c50]=0x443*0x1+-0x126a+0xe27,_0x1ce56e[-0x1148+-0x1cf4+-0x1*-0x2e41]=0x8*-0x5+-0x199b+0x184*0x11,_0x1ce56e[0x230c+0x2*0xfc5+0xb18*-0x6]=0x557+-0x5b6+-0x1*-0x5f,_0x1ce56e[0xc*-0x51+0x2528+-0x2155*0x1]=-0x2ff+-0xe5*0xd+0x10*0xea,_0x1ce56e[-0x4*0x1b3+0x8cd+0x1f9*-0x1]=-0x17ba+0x4*0x1b4+-0x2*-0x875,_0x1ce56e[-0x107b*0x2+-0x568+-0x153*-0x1d]=-0x2*-0x68c+0x1*-0x255+-0xac3,_0x1ce56e[-0x198f+0x65*0xd+0x28f*0x8]=-0x1*-0x1a5c+0x2f9+0xeaa*-0x2,_0x1ce56e[-0x346*-0xa+-0x5*-0x6aa+-0x1*0x4203]=-0xe8f*0x1+0x9*-0x365+-0x4*-0xb47,_0x1ce56e[0x5*0x4eb+0x127*0x1d+-0x39f6]=_0xdd227,_0x1ce56e[0xb6c+0x11d7+-0x2*0xe9b]=_0x33da77,_0x1ce56e[-0x2*-0xdc9+0x24f9+-0x407d*0x1]=_0x3bb1a5,_0x1ce56e[-0x1*-0x940+0x21eb*0x1+-0x2b1c]=-0x1239+-0xf4d*-0x2+0x20*-0x63,this;}['setScale'](_0x60b617,_0x1a288a,_0x3816d6){const _0x4ba1ad=this['data'];return _0x4ba1ad[-0x2*-0x907+0x1*0x2462+-0x3670]=_0x60b617,_0x4ba1ad[0x226e+-0xfb*-0x1f+-0x40d2]=0x1f19+-0x1d55*-0x1+-0x3c6e,_0x4ba1ad[0x1aab+-0x8f5+0x4*-0x46d]=0x1*0xf23+-0x21a1*0x1+-0x20e*-0x9,_0x4ba1ad[0x229d+0xbc*-0x4+0x547*-0x6]=0x35b*0x1+0x1947+-0x1ca2,_0x4ba1ad[-0x185*-0x6+-0x1*-0x8aa+0x11c4*-0x1]=0x1e93+-0x2585+0x6f2,_0x4ba1ad[-0x14d3+-0x167e*-0x1+-0x1a6]=_0x1a288a,_0x4ba1ad[0x4e1*-0x3+-0xfb6+-0x1*-0x1e5f]=-0x110*-0x8+0xf2b+-0x17ab,_0x4ba1ad[-0x10c+-0xd+0x4*0x48]=-0x7*-0x40f+0xf1c+0x2b85*-0x1,_0x4ba1ad[-0x1ba*-0x7+-0x765+-0x4a9]=-0x535+-0x1d06+0x223b,_0x4ba1ad[-0x232f+-0xf56+0x328e]=0x2187*0x1+0x5f7+-0x277e,_0x4ba1ad[-0x2394+0x1*0x3d1+0x1fcd]=_0x3816d6,_0x4ba1ad[0x7*0x276+0xd97+-0x1ec6]=0x109d+0x1b78+0x8d1*-0x5,_0x4ba1ad[0x3*-0x555+0x20e0+0x10d5*-0x1]=0x1c20+0x69b+-0x22bb,_0x4ba1ad[0xe7f+0x1*0x148e+-0x2300]=0x25*-0x1+0xdcd+-0xda8,_0x4ba1ad[0x1fba+-0x68c*-0x2+-0x2cc4]=-0x571+0x10f*0xb+-0x634,_0x4ba1ad[0x409*-0x7+-0xa4d+0x1*0x269b]=0x22f6+0x136+-0x242b,this;}['setViewpor'+'t'](_0x54a9c6,_0x31957e,_0x5eaf49,_0x1285be){const _0x4c852d=this['data'];return _0x4c852d[0x1da4+0x109e+-0x2e42]=_0x5eaf49*(-0x17de+0x1912*0x1+-0x134+0.5),_0x4c852d[0x1*-0xed5+-0x95*0x2e+0x299c]=0x1021+-0x1e8c+0xe6b,_0x4c852d[0x21fc+0x59*-0x5c+-0x1fe]=0x1f8d*0x1+-0x1349*-0x1+-0x1e2*0x1b,_0x4c852d[0x4*-0x49+-0x983*-0x1+-0x85c]=-0x20b*0xe+0x95+0x1c05,_0x4c852d[0xf3*0x22+0x6d2*-0x5+0x1d8]=-0xd81*0x1+0x14cd*-0x1+0x1*0x224e,_0x4c852d[-0x229*0xd+-0x10f7+-0x1*-0x2d11]=_0x1285be*(0x1eb8+-0x3e5*-0x5+-0x3231+0.5),_0x4c852d[-0x54*-0x35+0xb85+-0x55*0x57]=-0x2*-0xdc0+-0xc20+-0xf60,_0x4c852d[0x53a+0x1e26*-0x1+-0x851*-0x3]=0x5fb+-0xf54+0x959,_0x4c852d[-0x7*-0x115+0x1*-0x16cf+0xf44]=-0x198e+-0xffa+0x4*0xa62,_0x4c852d[0x1*0x2351+-0x1e86+-0x4c2]=0x114e+0x8b*0x11+-0x1a89,_0x4c852d[-0x63e*-0x4+0x1*0x12bf+-0x2bad]=0xea2*-0x2+0x210b+0x1*-0x3c7+0.5,_0x4c852d[0x98d+0x90e*0x1+-0x1290]=-0xc5b+0x1f0*-0xe+0x9*0x463,_0x4c852d[0x13dc+0x26b+-0x1*0x163b]=_0x54a9c6+_0x5eaf49*(-0x1*-0xce2+-0x1b31+0x1*0xe4f+0.5),_0x4c852d[-0x1cb1+-0xa2f+0x7c9*0x5]=_0x31957e+_0x1285be*(-0x8b5+-0x1*0x1c7f+0x2534+0.5),_0x4c852d[-0x21c+0xa7*0x13+0x1b*-0x61]=-0x1*-0x5cf+0xf*0x146+-0x18e9+0.5,_0x4c852d[0x1*-0x218b+-0x1*-0xeed+0x12ad]=-0x1c9e+-0x34*-0x7d+0x33b,this;}['setReflect'+'ion'](_0x14d07d,_0x123a3a){const _0xb32ac8=_0x14d07d['x'],_0x1eeb5a=_0x14d07d['y'],_0x5e3443=_0x14d07d['z'],_0x3592a0=this['data'];return _0x3592a0[0x151*0x3+0x1811+-0x1c04]=-0x3*0xb47+-0x24dd+0x46b3-(0x1*-0x2534+-0x267f+-0x1*-0x4bb5)*_0xb32ac8*_0xb32ac8,_0x3592a0[0x1a5*-0xb+-0xdbc*-0x2+-0x960]=-(0x3*0x2d7+-0x7*-0xd3+-0xe48)*_0xb32ac8*_0x1eeb5a,_0x3592a0[-0x145+0x35b*0x2+-0x56f]=-(-0x260d+0x1*-0x17b6+0x9*0x6dd)*_0xb32ac8*_0x5e3443,_0x3592a0[-0x23b9+0xd09+0x16b3]=0x1*-0x9ac+-0x60d*0x3+0x1bd3,_0x3592a0[-0x25fc+-0x23dc+0xa3*0x74]=-(-0x1e32+-0x2*0x50e+-0xf*-0x2b0)*_0xb32ac8*_0x1eeb5a,_0x3592a0[-0x5de+-0x14ce+0x1ab1]=-0x18b2+-0x1ca6+0x7*0x79f-(-0x1*-0x2109+0x15db+0x32*-0x119)*_0x1eeb5a*_0x1eeb5a,_0x3592a0[0x1a83*-0x1+0x24ca+-0xa41]=-(-0x1*0x2365+0x22b0+0x3*0x3d)*_0x1eeb5a*_0x5e3443,_0x3592a0[0x1db0+-0x162f+0xae*-0xb]=-0x1*0x10b4+-0x13cd+0x2481,_0x3592a0[0x1*0x10c9+0x12b9+0x26*-0xef]=-(-0xa30+0xac7+0x95*-0x1)*_0xb32ac8*_0x5e3443,_0x3592a0[0xeb+0x2197*-0x1+0x20b5]=-(0x78*0x17+-0x10*-0x16d+0x599*-0x6)*_0x1eeb5a*_0x5e3443,_0x3592a0[-0x3a*-0x1a+0x2643+-0x17*0x1eb]=-0x1*0x1a69+-0x1*0xf7b+0x29e5-(0x24c1+0x7*-0x3a1+0xb58*-0x1)*_0x5e3443*_0x5e3443,_0x3592a0[0x1*-0xf38+-0x1*0x1c77+0x2bba]=0x82e+-0xa6*0x1b+0x954,_0x3592a0[0x199b+-0xd*-0x295+0x160*-0x2b]=-(0x7*-0x4ff+0x2233+0xc8)*_0xb32ac8*_0x123a3a,_0x3592a0[0x26a1+0x405+-0x2a99]=-(-0x1834+0x304*-0x2+0x1e3e)*_0x1eeb5a*_0x123a3a,_0x3592a0[0x13*0x96+-0xd08+0x1f4]=-(0x5*0x7c1+-0xda3*0x2+-0xb7d)*_0x5e3443*_0x123a3a,_0x3592a0[-0x86f+0xb22+0x1a*-0x1a]=0x5*0x47b+-0x11*-0x6d+-0x1*0x1da3,this;}['invert'](_0xef2e19=this){const _0x555cae=_0xef2e19['data'],_0x395f7e=_0x555cae[-0x2347+-0x11c1*-0x1+0x1186],_0x13f7e4=_0x555cae[0x1a42*-0x1+-0xd5e+0x27a1],_0x4f3761=_0x555cae[-0xb8d+0x42c*0x4+-0x521],_0x2e21c1=_0x555cae[0x2b3*0xb+-0xa7b+-0x1333],_0x4a2e3c=_0x555cae[-0xddf+-0x878+0x3b*0x61],_0x4fcb62=_0x555cae[0x59*0x42+-0x1c21+0x534],_0x243e7a=_0x555cae[0x4*0x6b7+0xf73+-0x1*0x2a49],_0x435cfb=_0x555cae[-0x133a+0xd35+0xac*0x9],_0x380f7e=_0x555cae[-0x13*0xd1+-0x1d*-0x27+0xb20],_0xcdc62f=_0x555cae[-0xd*-0x1e5+-0x1fd*-0x1+-0x1a95],_0x2c7124=_0x555cae[0x26e5+-0xd*-0x2f1+0x268c*-0x2],_0x19e51c=_0x555cae[0xa*0x47+-0xd73+-0x1c*-0x62],_0x51ef9b=_0x555cae[0x448+0x315+-0x1*0x751],_0x338d57=_0x555cae[0x1f72+-0x85a+-0x170b],_0xaa69b1=_0x555cae[0x2*0x12cd+-0x13b4+-0x11d8],_0xace6e3=_0x555cae[-0x88a*0x3+-0x1d4b+0x1b7c*0x2],_0x36c5d5=_0x395f7e*_0x4fcb62-_0x13f7e4*_0x4a2e3c,_0x376255=_0x395f7e*_0x243e7a-_0x4f3761*_0x4a2e3c,_0x5b74f8=_0x395f7e*_0x435cfb-_0x2e21c1*_0x4a2e3c,_0x3d1eaf=_0x13f7e4*_0x243e7a-_0x4f3761*_0x4fcb62,_0x2f56b5=_0x13f7e4*_0x435cfb-_0x2e21c1*_0x4fcb62,_0x5a6696=_0x4f3761*_0x435cfb-_0x2e21c1*_0x243e7a,_0x2a4fa7=_0x380f7e*_0x338d57-_0xcdc62f*_0x51ef9b,_0x537d03=_0x380f7e*_0xaa69b1-_0x2c7124*_0x51ef9b,_0x19e716=_0x380f7e*_0xace6e3-_0x19e51c*_0x51ef9b,_0x4fc584=_0xcdc62f*_0xaa69b1-_0x2c7124*_0x338d57,_0x3a524e=_0xcdc62f*_0xace6e3-_0x19e51c*_0x338d57,_0x572466=_0x2c7124*_0xace6e3-_0x19e51c*_0xaa69b1,_0x1e6f9e=_0x36c5d5*_0x572466-_0x376255*_0x3a524e+_0x5b74f8*_0x4fc584+_0x3d1eaf*_0x19e716-_0x2f56b5*_0x537d03+_0x5a6696*_0x2a4fa7;if(_0x1e6f9e===-0xa8d*-0x1+-0xd1*0x14+0x5c7)this['setIdentit'+'y']();else{const _0x4f45ce=(0x1*0xc5d+-0x1e40+-0x1ca*-0xa)/_0x1e6f9e,_0x5ec39f=this['data'];_0x5ec39f[0x14f7+-0x348*0x4+0x1*-0x7d7]=(_0x4fcb62*_0x572466-_0x243e7a*_0x3a524e+_0x435cfb*_0x4fc584)*_0x4f45ce,_0x5ec39f[-0x12c5+-0x2*-0xa7d+-0x234]=(-_0x13f7e4*_0x572466+_0x4f3761*_0x3a524e-_0x2e21c1*_0x4fc584)*_0x4f45ce,_0x5ec39f[0x11b5+-0x2252+0x109f]=(_0x338d57*_0x5a6696-_0xaa69b1*_0x2f56b5+_0xace6e3*_0x3d1eaf)*_0x4f45ce,_0x5ec39f[-0x2446+-0x4e6+0x292f]=(-_0xcdc62f*_0x5a6696+_0x2c7124*_0x2f56b5-_0x19e51c*_0x3d1eaf)*_0x4f45ce,_0x5ec39f[0x1980+-0x9b9+0x327*-0x5]=(-_0x4a2e3c*_0x572466+_0x243e7a*_0x19e716-_0x435cfb*_0x537d03)*_0x4f45ce,_0x5ec39f[0x1*-0x481+-0x92*0x14+-0x2*-0x7f7]=(_0x395f7e*_0x572466-_0x4f3761*_0x19e716+_0x2e21c1*_0x537d03)*_0x4f45ce,_0x5ec39f[0x1d54+0x1768+-0x1*0x34b6]=(-_0x51ef9b*_0x5a6696+_0xaa69b1*_0x5b74f8-_0xace6e3*_0x376255)*_0x4f45ce,_0x5ec39f[-0x1d7b+-0x1f0b+0x142f*0x3]=(_0x380f7e*_0x5a6696-_0x2c7124*_0x5b74f8+_0x19e51c*_0x376255)*_0x4f45ce,_0x5ec39f[-0x214f+0x8*-0x371+0x1*0x3cdf]=(_0x4a2e3c*_0x3a524e-_0x4fcb62*_0x19e716+_0x435cfb*_0x2a4fa7)*_0x4f45ce,_0x5ec39f[-0x1f85*-0x1+0x9*0x12f+-0x2a23]=(-_0x395f7e*_0x3a524e+_0x13f7e4*_0x19e716-_0x2e21c1*_0x2a4fa7)*_0x4f45ce,_0x5ec39f[0x43b+0x24d1+-0x2902]=(_0x51ef9b*_0x2f56b5-_0x338d57*_0x5b74f8+_0xace6e3*_0x36c5d5)*_0x4f45ce,_0x5ec39f[0x131b+-0x20*-0xf1+-0x313*0x10]=(-_0x380f7e*_0x2f56b5+_0xcdc62f*_0x5b74f8-_0x19e51c*_0x36c5d5)*_0x4f45ce,_0x5ec39f[-0x5*0x281+0x11*0x3b+-0x1b*-0x52]=(-_0x4a2e3c*_0x4fc584+_0x4fcb62*_0x537d03-_0x243e7a*_0x2a4fa7)*_0x4f45ce,_0x5ec39f[-0x3fc*0x5+-0x1793+0x2*0x15c6]=(_0x395f7e*_0x4fc584-_0x13f7e4*_0x537d03+_0x4f3761*_0x2a4fa7)*_0x4f45ce,_0x5ec39f[-0x813+-0xfb5+0x17d6]=(-_0x51ef9b*_0x3d1eaf+_0x338d57*_0x376255-_0xaa69b1*_0x36c5d5)*_0x4f45ce,_0x5ec39f[0xd*0x43+-0x15ce+0x1276]=(_0x380f7e*_0x3d1eaf-_0xcdc62f*_0x376255+_0x2c7124*_0x36c5d5)*_0x4f45ce;}return this;}['set'](_0x5a402c){const _0x4611de=this['data'];return _0x4611de[-0x4*-0x820+-0x1a17+-0x669]=_0x5a402c[-0x22b*0xf+-0x1f08+0x3f8d],_0x4611de[-0x359*0x9+0x5d9*-0x6+0x4138]=_0x5a402c[-0xa*0x101+-0x19e*-0xf+-0x3*0x4bd],_0x4611de[-0x212c+0x1882+0x8ac]=_0x5a402c[0x1ec4+0x26c7*0x1+-0x1*0x4589],_0x4611de[0x25*-0x99+0x1*-0xc49+-0x17f*-0x17]=_0x5a402c[0x2319+0x875+0x1*-0x2b8b],_0x4611de[0x324*-0x9+0x1f*-0xec+-0x1c6e*-0x2]=_0x5a402c[0x4*-0x6cb+-0x3f4+0xf92*0x2],_0x4611de[0x1b67+0x7*0x385+-0x3405]=_0x5a402c[-0x215*-0x1+0x2*0x1196+-0x253c],_0x4611de[-0x485*-0x2+0x107*-0x23+0x1af1]=_0x5a402c[0x1a67+0x8*0x2f7+-0x11d*0x2d],_0x4611de[0x14c4+-0x4*0x1b1+-0xdf9]=_0x5a402c[-0x3*0x94f+0x1*-0x1fd6+-0x13ee*-0x3],_0x4611de[-0x1301+-0x30*0x6a+0x26e9]=_0x5a402c[-0x1*0x1e8a+-0x1231*-0x1+0xc61],_0x4611de[0x205c+-0xaad*0x1+-0x15a6]=_0x5a402c[0x1a87+0x1a22+-0x34a0],_0x4611de[0x1c87+-0xd+-0x1c70]=_0x5a402c[-0xe9c+0x1acf+0x11b*-0xb],_0x4611de[-0xff*0x7+0x4cd*0x6+-0x15ca]=_0x5a402c[-0x1*0x1861+0x6*-0x23e+0x25e0],_0x4611de[-0x24ba+-0x517*-0x1+-0x1faf*-0x1]=_0x5a402c[-0x1e92+-0xc7c+0x2b1a],_0x4611de[0xf*0x167+0x1292*-0x2+0x1028]=_0x5a402c[0x10be+0x1160+-0x2211],_0x4611de[-0xffa+-0xfef*0x2+-0x2fe6*-0x1]=_0x5a402c[0xf27*0x2+0x913+0x2753*-0x1],_0x4611de[0x1e4b+0xf*-0x89+-0x1635]=_0x5a402c[-0xe*0xb0+-0x9ce+0x137d],this;}['setIdentit'+'y'](){const _0x130584=this['data'];return _0x130584[-0x16*-0x5e+0x1709+-0x1f1d]=0xc05+-0xd13*-0x2+0x5*-0x7a2,_0x130584[-0x49*-0x12+-0x8b1+-0x390*-0x1]=0x8c+0x133b+-0x13c7,_0x130584[-0x23bb+-0x903+0x2cc0]=-0x346*0x9+0x12d+0x1c49,_0x130584[-0x23*0x45+-0x1ec7+-0x1*-0x2839]=0x21c8+-0xac1*0x1+-0x9*0x28f,_0x130584[0x171f*-0x1+0x141a*-0x1+-0x2b3d*-0x1]=0x1279+0x1*-0x1933+0x7*0xf6,_0x130584[-0x1e7e+0x16b9+0x3e5*0x2]=0x537+-0x359*-0x8+-0x1ffe,_0x130584[0x11*0xda+0x266e+-0x34e2]=-0xc1*0x1e+0x251e+-0xe80,_0x130584[0x19*0x11f+0x42*0x17+0x10f7*-0x2]=-0x23d1+-0x782*-0x3+0xd4b,_0x130584[0x1*0x21eb+0xf4d+-0x3130]=-0x1*0x281+0x14b*-0x5+0x8f8,_0x130584[0x188a+-0x117b+0x706*-0x1]=-0x3d*-0x87+0x11c8+-0x31f3,_0x130584[0xac2+-0x112e*-0x2+0x904*-0x5]=-0x756+-0x1a63+0x21ba,_0x130584[-0x1ad9+-0x377*0x9+0x3a13*0x1]=0xff*-0x6+0x23c1*-0x1+-0x3*-0xde9,_0x130584[-0x7*-0x45b+-0x1*-0x60d+-0x247e]=0x23c6+-0x361*0x1+0x1*-0x2065,_0x130584[0x1*-0x2e5+-0x937+0xc29]=0x1*0x1ebf+0x136a+-0x1*0x3229,_0x130584[0x1cc2+-0x3*-0x523+0x2c1d*-0x1]=-0x49e+0x1fe9+0x1b4b*-0x1,_0x130584[-0x3*0xcb3+0xd51+0x18d7]=-0x1464+-0x15a2+0x2a07,this;}['setTRS'](_0x5dbc43,_0xd44a1,_0x27794f){const _0x4f7f4c=_0xd44a1['x'],_0x359e93=_0xd44a1['y'],_0x3f3654=_0xd44a1['z'],_0x2289e2=_0xd44a1['w'],_0x28591d=_0x27794f['x'],_0x221f46=_0x27794f['y'],_0x3ccee1=_0x27794f['z'],_0x3c7e89=_0x4f7f4c+_0x4f7f4c,_0x266015=_0x359e93+_0x359e93,_0xae2423=_0x3f3654+_0x3f3654,_0x1c753a=_0x4f7f4c*_0x3c7e89,_0x4d6260=_0x4f7f4c*_0x266015,_0x5623ec=_0x4f7f4c*_0xae2423,_0x11ff29=_0x359e93*_0x266015,_0x2749b2=_0x359e93*_0xae2423,_0x54a9e1=_0x3f3654*_0xae2423,_0x272e39=_0x2289e2*_0x3c7e89,_0x3590b9=_0x2289e2*_0x266015,_0x5ae1a3=_0x2289e2*_0xae2423,_0x572ad3=this['data'];return _0x572ad3[0x1c93+-0x1*-0x29f+-0x1f32]=(0x22a2+-0x663+0x2d3*-0xa-(_0x11ff29+_0x54a9e1))*_0x28591d,_0x572ad3[-0x6b0+0x17*0x2b+0x2d4]=(_0x4d6260+_0x5ae1a3)*_0x28591d,_0x572ad3[0x2c*0x65+0x1bdc*0x1+-0x9*0x506]=(_0x5623ec-_0x3590b9)*_0x28591d,_0x572ad3[0x9*0x4d+0x521+-0x7d3*0x1]=-0x119e+-0x3*-0x624+-0xce,_0x572ad3[-0x2*-0xe2d+-0x4b1*0x5+0x1*-0x4e1]=(_0x4d6260-_0x5ae1a3)*_0x221f46,_0x572ad3[-0x1a07+0x1b55+-0x2f*0x7]=(0x1e9*-0x6+0x1d8+-0x3*-0x335-(_0x1c753a+_0x54a9e1))*_0x221f46,_0x572ad3[0x1*-0x1d80+0x2*-0x716+0x2bb2]=(_0x2749b2+_0x272e39)*_0x221f46,_0x572ad3[0x2*-0x1149+0x105*0x10+0x1249]=0x7*-0x24f+0x1*0xad0+0x1*0x559,_0x572ad3[-0x1e1*0x11+-0x2*0xa3d+0x3473]=(_0x5623ec+_0x3590b9)*_0x3ccee1,_0x572ad3[-0x335*0xb+0x216a+0x36*0x9]=(_0x2749b2-_0x272e39)*_0x3ccee1,_0x572ad3[-0x34e+0x81*0x31+-0x1559]=(-0x6*-0x1de+-0x21af+0x167c-(_0x1c753a+_0x11ff29))*_0x3ccee1,_0x572ad3[0x10*0x10+-0x1*0x1f66+0x1e71*0x1]=-0x14e5*0x1+-0x2*-0x84c+0x44d*0x1,_0x572ad3[-0x1270+0x1c15+-0x999]=_0x5dbc43['x'],_0x572ad3[0x11e9+-0x13eb+0x20f]=_0x5dbc43['y'],_0x572ad3[-0x2*-0x11de+-0xb30+-0x187e]=_0x5dbc43['z'],_0x572ad3[-0x59e*-0x3+0xcf4+0x5*-0x5f3]=-0x1d96*0x1+-0x1*0xa5d+0x4*0x9fd,this;}['transpose'](_0x2eca44=this){const _0x45b704=_0x2eca44['data'],_0x2afdc1=this['data'];if(_0x45b704===_0x2afdc1){let _0xd5e4f;_0xd5e4f=_0x45b704[-0xc24+0x1288+-0x663],_0x2afdc1[-0x530*0x4+-0x22e5+0x346*0x11]=_0x45b704[0x2f9*0x1+-0x205*-0x2+-0x6ff*0x1],_0x2afdc1[-0x1*-0x4fd+-0x25d3+0x20da]=_0xd5e4f,_0xd5e4f=_0x45b704[-0x1c48+0x2244+0x5*-0x132],_0x2afdc1[-0x22dd+-0x2623+-0xe*-0x537]=_0x45b704[0x1a23+-0x24e9+0xace],_0x2afdc1[0x6d*0x4f+0x148c*0x1+-0x3627]=_0xd5e4f,_0xd5e4f=_0x45b704[-0x23*0x7f+0x1*-0x5b3+-0x3*-0x7b1],_0x2afdc1[-0x2*0xf30+-0xdbe+0x2c21]=_0x45b704[0x1*-0xe93+0x6a9+-0x1*-0x7f6],_0x2afdc1[-0x1799+0x7ae*-0x1+0xb*0x2d9]=_0xd5e4f,_0xd5e4f=_0x45b704[0xb*-0x1f5+-0x7*0x588+0x3c45],_0x2afdc1[-0x7*0x269+-0x114a+0x3*0xb65]=_0x45b704[-0x1*0xf7c+-0xf*0x181+0x2614*0x1],_0x2afdc1[0x5fa+-0x185*-0xd+0xb*-0x256]=_0xd5e4f,_0xd5e4f=_0x45b704[-0x15da*0x1+-0x176e*0x1+-0x2d4f*-0x1],_0x2afdc1[-0x1*-0x493+0x507+-0x993]=_0x45b704[-0x763*-0x2+-0x57c+0x1d9*-0x5],_0x2afdc1[0x140+-0x26fd+-0x566*-0x7]=_0xd5e4f,_0xd5e4f=_0x45b704[0x1f26+-0x1bcd+-0x8d*0x6],_0x2afdc1[-0x1e0f+0x116f+0xcab*0x1]=_0x45b704[-0x2627+0xe55*0x2+0x98b],_0x2afdc1[-0x26a4+-0xd9e+0x1*0x3450]=_0xd5e4f;}else _0x2afdc1[0x81c+-0x116d+-0x109*-0x9]=_0x45b704[-0x22c6+0x1*0x1b64+0xa*0xbd],_0x2afdc1[0x24d4+-0xdac*0x2+-0x97b]=_0x45b704[0x14fb+-0x1*0x195b+0x464],_0x2afdc1[-0xc95+0x13*-0xb9+0x1a52]=_0x45b704[-0x1c55+-0x1*-0x137b+0x17b*0x6],_0x2afdc1[-0x9d9+0x1*0x66b+0x371]=_0x45b704[0x5e9+0x1ebd*-0x1+0x18e0],_0x2afdc1[0x1e4c+-0x1f9c*0x1+-0xa*-0x22]=_0x45b704[0x2*0x995+0x906+-0x1c2f],_0x2afdc1[-0x11d4+0xc28*0x3+-0x129f]=_0x45b704[-0xe5*0x1f+-0x781+0x13*0x1db],_0x2afdc1[-0x2ab+-0x79*-0x7+-0x4f*0x2]=_0x45b704[0x1076+-0x525+-0xb48],_0x2afdc1[0x2175+0x24e3+-0x4651*0x1]=_0x45b704[-0x1*-0xe6e+0xd68+-0x3*0x943],_0x2afdc1[-0x658+0x1278+0xc*-0x102]=_0x45b704[0x114*0x10+0x7*0x220+-0x201e],_0x2afdc1[-0x1*0x45d+-0x599+0x9ff]=_0x45b704[-0x7d8*0x4+-0xd8d+0x2cf3],_0x2afdc1[0x40f*-0x1+-0x2126+0x253f]=_0x45b704[-0x414+0x1*-0x18be+0x1cdc],_0x2afdc1[-0x9d9+-0x112e+-0x6e*-0x3f]=_0x45b704[0x18d4+-0xa6e+-0xd8*0x11],_0x2afdc1[-0xa5*-0x26+-0x11b8+0xe*-0x7b]=_0x45b704[-0x690+0x22d7+0x43*-0x6c],_0x2afdc1[0x2121+0x5*0x15a+0x1*-0x27d6]=_0x45b704[-0x17a+-0x172e+0x18af],_0x2afdc1[0x218d+-0x17*-0xa1+-0x2*0x17fb]=_0x45b704[0x213e+-0x67a*0x1+0x1*-0x1ab9],_0x2afdc1[0x4a*0x6f+-0x53*0x4d+-0x2*0x388]=_0x45b704[0x6*-0x15b+0x1d35*-0x1+0x2566];return this;}['getTransla'+'tion'](_0x1e538c=new D()){return _0x1e538c['set'](this['data'][0x1bc9+0xb*-0x75+0x66*-0x39],this['data'][-0xb28+-0x1*0x1c62+0x2797],this['data'][0x1bcd*-0x1+0x2*0x1135+-0x49*0x17]);}['getX'](_0x1eb599=new D()){return _0x1eb599['set'](this['data'][-0x1c5c*0x1+0x4e*-0x80+0x435c],this['data'][-0xb9d*-0x1+-0x3b*-0x59+-0x201f],this['data'][0x1b1b+0x5*-0x6c3+0x6b6]);}['getY'](_0x31ea45=new D()){return _0x31ea45['set'](this['data'][0xae3+0xe6a+-0x1949],this['data'][0x20*-0x124+-0x18a3+0x26*0x19c],this['data'][0x18e*0xc+-0x11c5*0x2+-0x10e8*-0x1]);}['getZ'](_0x3049a9=new D()){return _0x3049a9['set'](this['data'][0x1bc5*-0x1+0x11*-0x35+0xfa9*0x2],this['data'][-0x1a04+0x1f4b*0x1+-0x53e],this['data'][-0x1*-0x1ce4+0x35*0x3d+-0x297b*0x1]);}['getScale'](_0x51634e=new D()){return this['getX'](Rs),this['getY'](Js),this['getZ'](ei),_0x51634e['set'](Rs['length'](),Js['length'](),ei['length']()),_0x51634e;}get['scaleSign'](){return this['getX'](Rs),this['getY'](Js),this['getZ'](ei),Rs['cross'](Rs,Js),Rs['dot'](ei)<0x5c9*-0x3+0x13fa+0x1*-0x29f?-(0x62*-0x2+0x4d2*-0x1+-0x9f*-0x9):-0x22f+0x2695+-0x2465;}['setFromEul'+'erAngles'](_0x137ab9,_0x53b414,_0x3077f9){_0x137ab9*=Y['DEG_TO_RAD'],_0x53b414*=Y['DEG_TO_RAD'],_0x3077f9*=Y['DEG_TO_RAD'];const _0x430fa4=Math['sin'](-_0x137ab9),_0x3f0107=Math['cos'](-_0x137ab9),_0x3b0b17=Math['sin'](-_0x53b414),_0x5091a8=Math['cos'](-_0x53b414),_0x32ae54=Math['sin'](-_0x3077f9),_0x4c490e=Math['cos'](-_0x3077f9),_0x562df1=this['data'];return _0x562df1[-0x185d+0x42*0x61+-0xa5]=_0x5091a8*_0x4c490e,_0x562df1[-0x8*0xb+-0x1*0xbb7+0xc10]=-_0x5091a8*_0x32ae54,_0x562df1[-0x1*-0x4d+0x3b*0x29+-0x9be]=_0x3b0b17,_0x562df1[0xfd6*-0x1+-0xc*-0x223+-0x9cb]=-0xb36*-0x1+0x1*-0xf29+0x3f3,_0x562df1[0x7*0x54a+-0x1*-0x161+-0x2663]=_0x3f0107*_0x32ae54+_0x4c490e*_0x430fa4*_0x3b0b17,_0x562df1[0x5*-0x4e1+0x2*-0x3a1+0x1fac]=_0x3f0107*_0x4c490e-_0x430fa4*_0x3b0b17*_0x32ae54,_0x562df1[-0x13*-0x1c9+-0x4*0x419+-0x1181]=-_0x5091a8*_0x430fa4,_0x562df1[0x1450+0x2184+-0x35cd*0x1]=0x71*-0x41+-0x335*-0x6+0x973,_0x562df1[-0x78*-0x20+0xb41*0x2+-0x12*0x215]=_0x430fa4*_0x32ae54-_0x3f0107*_0x4c490e*_0x3b0b17,_0x562df1[-0x1a*-0xbf+0x2461+-0x37be]=_0x4c490e*_0x430fa4+_0x3f0107*_0x3b0b17*_0x32ae54,_0x562df1[-0x4dd*-0x7+-0x17c4+-0xa3d]=_0x3f0107*_0x5091a8,_0x562df1[-0x14*0xa0+-0x5cb+0x1256]=-0x11b2*0x1+0x2*-0x9c9+-0x12*-0x212,_0x562df1[0x699*-0x3+-0x187f+0x2c56]=-0x1a76+-0x215f+-0x11*-0x385,_0x562df1[0x2246*-0x1+0x13e7+0xe6c]=-0x1599*-0x1+-0xe66+-0x733,_0x562df1[-0x1687+-0x21*-0xae+-0x27*-0x1]=-0x1b12+-0xdc9*0x1+0x1*0x28db,_0x562df1[-0x1b46*-0x1+-0x54f+-0x15e8]=-0x5*-0x1eb+0x33f*-0x9+0x13a1,this;}['getEulerAn'+'gles'](_0x5b1f48=new D()){this['getScale'](Dl);const _0x17916c=Dl['x'],_0x2c23e3=Dl['y'],_0x174991=Dl['z'];if(_0x17916c===-0x245b+-0x13d8*0x1+0x3833||_0x2c23e3===-0x1*-0x2551+-0x1a28+-0x1*0xb29||_0x174991===0x11a7*-0x1+-0x1511+-0x2c4*-0xe)return _0x5b1f48['set'](-0x22*-0x1f+-0xdfd+0x13*0x85,0x130+-0x1891*-0x1+-0x15b*0x13,-0x26a4+-0x1f1a+-0x22df*-0x2);const _0x178631=this['data'],_0x324fa7=Math['asin'](-_0x178631[0x20f0+-0x473*0x3+-0x1395]/_0x17916c),_0x56cb8c=Math['PI']*(-0x5c*0x4f+-0x14b8+0x311c+0.5);let _0x364c3c,_0x2cf985;return _0x324fa7<_0x56cb8c?_0x324fa7>-_0x56cb8c?(_0x364c3c=Math['atan2'](_0x178631[-0x3fa*0x9+-0x2*0x7ef+0x33ae]/_0x2c23e3,_0x178631[-0x9ae+0x645+-0x1*-0x373]/_0x174991),_0x2cf985=Math['atan2'](_0x178631[-0xd7c+-0x1e4b*0x1+-0x1*-0x2bc8]/_0x17916c,_0x178631[0x6fb*-0x5+-0x1d*-0x11+0x20fa]/_0x17916c)):(_0x2cf985=-0x1e8+-0x2*0xe43+0x1e6e,_0x364c3c=-Math['atan2'](_0x178631[0x1c77+0x1*-0xa47+0x122c*-0x1]/_0x2c23e3,_0x178631[-0x7*0x7a+0x96+0x2c5*0x1]/_0x2c23e3)):(_0x2cf985=0xa*0x2c8+-0x1183*0x1+-0xa4d,_0x364c3c=Math['atan2'](_0x178631[-0x13d3+0x1864+-0x48d]/_0x2c23e3,_0x178631[0xb5+0xb*0x1d1+-0x8f*0x25]/_0x2c23e3)),_0x5b1f48['set'](_0x364c3c,_0x324fa7,_0x2cf985)['mulScalar'](Y['RAD_TO_DEG']);}['toString'](){return'['+this['data']['join'](',\x20')+']';}};h(jr,'IDENTITY',Object['freeze'](new jr())),h(jr,'ZERO',Object['freeze'](new jr()['set']([0x1a1*0x7+0xd18+0x187f*-0x1,0xd11+0x2f*0x61+-0x34*0x98,-0x663+0x28*-0x55+0x13ab,-0xc1a+0xd*0x8b+-0x1*-0x50b,-0x205d+0x2c3*-0x7+-0x1fd*-0x1a,0x1*-0x2018+-0x215a*0x1+-0x1*-0x4172,0x1*0x1edb+0x40d*0x6+-0x3729,-0x7*0xcb+0x5f6*0x3+0x7*-0x1c3,0x655*-0x3+-0x1*0x1a6f+0x2d6e,-0x2*0x10da+-0x1*-0xbe+0x20f6,-0x163*0x16+0x1*-0x4ef+0x2371,0x1606+0x151*-0x18+-0x46*-0x23,0x1*-0x12d8+0x1c2c+-0x954,-0x9a+-0x655+0x6ef*0x1,-0x3*-0x625+-0x5*-0x56f+0x2*-0x16cd,-0x1*0x822+-0x4*0x45+0x936])));let te=jr;const dn=class dn{constructor(_0x501a01=-0x8dd*-0x1+0x262c+0x1*-0x2f09,_0x5376e2=-0x3f2+-0x1873+0x977*0x3,_0x416db7=-0x1*0xb17+0x1*-0x235d+0x2e74,_0x385fa9=0x187a+-0x114e+-0x72b){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x501a01['length']===-0x1df1+0xad8*0x1+0x131d?(this['x']=_0x501a01[-0x1f9e*0x1+0xb57*-0x2+0x116*0x32],this['y']=_0x501a01[0x45*0x28+-0x1*0xc56+0x18f],this['z']=_0x501a01[0x1920+-0x647*0x2+-0xc90],this['w']=_0x501a01[-0x7*-0x4df+0xa73+0x2c89*-0x1]):(this['x']=_0x501a01,this['y']=_0x5376e2,this['z']=_0x416db7,this['w']=_0x385fa9);}['clone'](){const _0x3abab4=this['constructo'+'r'];return new _0x3abab4(this['x'],this['y'],this['z'],this['w']);}['conjugate'](_0x35c324=this){return this['x']=_0x35c324['x']*-(-0x19c3+0x1*-0x246b+0x3e2f),this['y']=_0x35c324['y']*-(0xd49+-0x1f61*0x1+0x29*0x71),this['z']=_0x35c324['z']*-(-0x2*-0xf16+-0x2*0x96b+-0x3c7*0x3),this['w']=_0x35c324['w'],this;}['copy'](_0x3460cd){return this['x']=_0x3460cd['x'],this['y']=_0x3460cd['y'],this['z']=_0x3460cd['z'],this['w']=_0x3460cd['w'],this;}['dot'](_0x4ff8ac){return this['x']*_0x4ff8ac['x']+this['y']*_0x4ff8ac['y']+this['z']*_0x4ff8ac['z']+this['w']*_0x4ff8ac['w'];}['equals'](_0x595650){return this['x']===_0x595650['x']&&this['y']===_0x595650['y']&&this['z']===_0x595650['z']&&this['w']===_0x595650['w'];}['equalsAppr'+'ox'](_0x51e98d,_0x1be6c9=0x26ff+0x75*0x2b+-0x3aa6+0.000001){return Math['abs'](this['x']-_0x51e98d['x'])<_0x1be6c9&&Math['abs'](this['y']-_0x51e98d['y'])<_0x1be6c9&&Math['abs'](this['z']-_0x51e98d['z'])<_0x1be6c9&&Math['abs'](this['w']-_0x51e98d['w'])<_0x1be6c9;}['getAxisAng'+'le'](_0x523d29){let _0x22aa90=Math['acos'](this['w'])*(0xa*-0x57+-0x23a4*-0x1+-0x4*0x80f);const _0x1799d1=Math['sin'](_0x22aa90/(-0x1349*-0x2+-0x1b3b+-0xb55));return _0x1799d1!==-0x1d89+-0x1117*-0x1+0xc72?(_0x523d29['x']=this['x']/_0x1799d1,_0x523d29['y']=this['y']/_0x1799d1,_0x523d29['z']=this['z']/_0x1799d1,(_0x523d29['x']<-0x1e3d+-0xa39+0x2876||_0x523d29['y']<0x40*-0x11+-0x29*0xa3+0x1e5b||_0x523d29['z']<-0x194d+-0x1d89*0x1+0x36d6)&&(_0x523d29['x']*=-(-0x612+0x228b+0x1*-0x1c78),_0x523d29['y']*=-(-0xf*-0xf3+0x121*-0x1+-0x29f*0x5),_0x523d29['z']*=-(-0x2622+-0x7cf+0x2*0x16f9),_0x22aa90*=-(0x105a+-0x92*-0x13+-0x1b2f))):(_0x523d29['x']=-0xd*0x163+-0x104b+-0x1d*-0x12f,_0x523d29['y']=0x7*0x42b+-0x1*0x1d0e+-0x1f,_0x523d29['z']=0x47*0x7d+-0x12d1+0x7ed*-0x2),_0x22aa90*Y['RAD_TO_DEG'];}['getEulerAn'+'gles'](_0x98f8b0=new D()){let _0x56c8ae,_0x511e8c,_0x23596e;const _0x39e533=this['x'],_0x24cbc3=this['y'],_0x2aa7a8=this['z'],_0xf064ed=this['w'],_0x8a19dc=(-0x6f*0x51+-0x1c04+0x3f25)*(_0xf064ed*_0x24cbc3-_0x39e533*_0x2aa7a8);return _0x8a19dc<=-(-0x19da+0xf89+0xa51+0.99999)?(_0x56c8ae=(-0x13a1+0x1*-0x327+0x2*0xb65)*Math['atan2'](_0x39e533,_0xf064ed),_0x511e8c=-Math['PI']/(0x1e*0x98+0x614+-0x17e2),_0x23596e=0x3*-0x48b+-0x4*-0x3ca+-0x11*0x17):_0x8a19dc>=0x1b91*-0x1+0x1d37+-0x1a6+0.99999?(_0x56c8ae=(-0x1fa5+0x67f+0x1928)*Math['atan2'](_0x39e533,_0xf064ed),_0x511e8c=Math['PI']/(-0xc6b+-0xf25+0x1b92),_0x23596e=0x160f+-0x12b8+-0x11d*0x3):(_0x56c8ae=Math['atan2']((-0x2631+-0x206b*0x1+0x469e)*(_0xf064ed*_0x39e533+_0x24cbc3*_0x2aa7a8),0xd3f*-0x2+0x1ef8*-0x1+0x3977*0x1-(-0x120e*0x1+0x4*-0x74e+0x88*0x59)*(_0x39e533*_0x39e533+_0x24cbc3*_0x24cbc3)),_0x511e8c=Math['asin'](_0x8a19dc),_0x23596e=Math['atan2']((0x1286*0x2+0xe6e+-0x3378)*(_0xf064ed*_0x2aa7a8+_0x39e533*_0x24cbc3),0x5f6+0x784+-0xd79-(-0xe2a+-0x211f+0x2f4b)*(_0x24cbc3*_0x24cbc3+_0x2aa7a8*_0x2aa7a8))),_0x98f8b0['set'](_0x56c8ae,_0x511e8c,_0x23596e)['mulScalar'](Y['RAD_TO_DEG']);}['invert'](_0x42e09b=this){return this['conjugate'](_0x42e09b)['normalize']();}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x405651,_0x1c1fe9,_0x2de447){const _0x4a6b6c=(-0x11f*0xb+0xd0a+-0xb4-_0x2de447)*(_0x405651['dot'](_0x1c1fe9)<-0x25*0xb2+-0x7f*0x11+0x21*0x109?-(0x639+-0x1*-0x12a7+-0x18df):0xb*-0x101+0x860+0x4*0xab);return this['x']=_0x405651['x']*_0x4a6b6c+_0x1c1fe9['x']*_0x2de447,this['y']=_0x405651['y']*_0x4a6b6c+_0x1c1fe9['y']*_0x2de447,this['z']=_0x405651['z']*_0x4a6b6c+_0x1c1fe9['z']*_0x2de447,this['w']=_0x405651['w']*_0x4a6b6c+_0x1c1fe9['w']*_0x2de447,this['normalize']();}['mul'](_0x29edc3){const _0x3b6f4c=this['x'],_0x197837=this['y'],_0x55f82b=this['z'],_0x4dff5f=this['w'],_0x17a04e=_0x29edc3['x'],_0x50fa72=_0x29edc3['y'],_0x2ddfc1=_0x29edc3['z'],_0x4c4796=_0x29edc3['w'];return this['x']=_0x4dff5f*_0x17a04e+_0x3b6f4c*_0x4c4796+_0x197837*_0x2ddfc1-_0x55f82b*_0x50fa72,this['y']=_0x4dff5f*_0x50fa72+_0x197837*_0x4c4796+_0x55f82b*_0x17a04e-_0x3b6f4c*_0x2ddfc1,this['z']=_0x4dff5f*_0x2ddfc1+_0x55f82b*_0x4c4796+_0x3b6f4c*_0x50fa72-_0x197837*_0x17a04e,this['w']=_0x4dff5f*_0x4c4796-_0x3b6f4c*_0x17a04e-_0x197837*_0x50fa72-_0x55f82b*_0x2ddfc1,this;}['mulScalar'](_0x3905d5,_0x4d9236=this){return this['x']=_0x4d9236['x']*_0x3905d5,this['y']=_0x4d9236['y']*_0x3905d5,this['z']=_0x4d9236['z']*_0x3905d5,this['w']=_0x4d9236['w']*_0x3905d5,this;}['mul2'](_0x3ad6ca,_0x2ae670){const _0x222472=_0x3ad6ca['x'],_0x338ba4=_0x3ad6ca['y'],_0x561b9a=_0x3ad6ca['z'],_0x1663e5=_0x3ad6ca['w'],_0x2a226e=_0x2ae670['x'],_0xce57ab=_0x2ae670['y'],_0x5a63f8=_0x2ae670['z'],_0x2dfe1a=_0x2ae670['w'];return this['x']=_0x1663e5*_0x2a226e+_0x222472*_0x2dfe1a+_0x338ba4*_0x5a63f8-_0x561b9a*_0xce57ab,this['y']=_0x1663e5*_0xce57ab+_0x338ba4*_0x2dfe1a+_0x561b9a*_0x2a226e-_0x222472*_0x5a63f8,this['z']=_0x1663e5*_0x5a63f8+_0x561b9a*_0x2dfe1a+_0x222472*_0xce57ab-_0x338ba4*_0x2a226e,this['w']=_0x1663e5*_0x2dfe1a-_0x222472*_0x2a226e-_0x338ba4*_0xce57ab-_0x561b9a*_0x5a63f8,this;}['normalize'](_0x2825ca=this){let _0x549ae3=_0x2825ca['length']();return _0x549ae3===0x8bd*0x1+0xd25+-0x15e2?(this['x']=this['y']=this['z']=0x89*0x13+0x231*0xd+-0x26a8,this['w']=0x34b+0x1854+-0x65*0x46):(_0x549ae3=(-0x1949+-0x20fd+0x3a47*0x1)/_0x549ae3,this['x']=_0x2825ca['x']*_0x549ae3,this['y']=_0x2825ca['y']*_0x549ae3,this['z']=_0x2825ca['z']*_0x549ae3,this['w']=_0x2825ca['w']*_0x549ae3),this;}['set'](_0x278e60,_0x4bfbd8,_0x1af11a,_0x199e49){return this['x']=_0x278e60,this['y']=_0x4bfbd8,this['z']=_0x1af11a,this['w']=_0x199e49,this;}['setFromAxi'+'sAngle'](_0x3c5d7f,_0x282a53){_0x282a53*=(0xd91+-0x1950+0xbbf+0.5)*Y['DEG_TO_RAD'];const _0x55f251=Math['sin'](_0x282a53),_0x4afff1=Math['cos'](_0x282a53);return this['x']=_0x55f251*_0x3c5d7f['x'],this['y']=_0x55f251*_0x3c5d7f['y'],this['z']=_0x55f251*_0x3c5d7f['z'],this['w']=_0x4afff1,this;}['setFromEul'+'erAngles'](_0x45472e,_0x1b286e,_0x3819d0){if(_0x45472e instanceof D){const _0x20a054=_0x45472e;_0x45472e=_0x20a054['x'],_0x1b286e=_0x20a054['y'],_0x3819d0=_0x20a054['z'];}const _0x2024b9=(-0x1c99+0x109d*0x2+-0x4a1+0.5)*Y['DEG_TO_RAD'];_0x45472e*=_0x2024b9,_0x1b286e*=_0x2024b9,_0x3819d0*=_0x2024b9;const _0x2b9496=Math['sin'](_0x45472e),_0x29d9c8=Math['cos'](_0x45472e),_0x180dd0=Math['sin'](_0x1b286e),_0x36902b=Math['cos'](_0x1b286e),_0x44f999=Math['sin'](_0x3819d0),_0xa1b63c=Math['cos'](_0x3819d0);return this['x']=_0x2b9496*_0x36902b*_0xa1b63c-_0x29d9c8*_0x180dd0*_0x44f999,this['y']=_0x29d9c8*_0x180dd0*_0xa1b63c+_0x2b9496*_0x36902b*_0x44f999,this['z']=_0x29d9c8*_0x36902b*_0x44f999-_0x2b9496*_0x180dd0*_0xa1b63c,this['w']=_0x29d9c8*_0x36902b*_0xa1b63c+_0x2b9496*_0x180dd0*_0x44f999,this;}['setFromMat'+'4'](_0x41478e){const _0x86f57b=_0x41478e['data'];let _0xb5a1d7=_0x86f57b[0x15de+0x1*-0x129e+0x1a*-0x20],_0x428111=_0x86f57b[-0x1a*-0x3b+-0x1*0x8e7+0x2ea],_0x406b4d=_0x86f57b[0x901+0x3e9+-0x38*0x3b],_0xbc60bd=_0x86f57b[0x529*-0x3+-0x1047+0x1fc6],_0x155e04=_0x86f57b[0x157d+0x1*-0x1bcb+0x653],_0x4b4d60=_0x86f57b[0x9*-0x42a+-0x617+-0x1*-0x2b97],_0x42f5f1=_0x86f57b[-0x3d3*0x3+0x1*0x581+-0x180*-0x4],_0x28cabb=_0x86f57b[0x4c*0x75+0x13af*0x1+-0x3662],_0x4766cc=_0x86f57b[0x155+-0x360*0x4+0x5*0x271],_0x4b7de7;return _0x4b7de7=_0xb5a1d7*_0xb5a1d7+_0x428111*_0x428111+_0x406b4d*_0x406b4d,_0x4b7de7===0x5d5*-0x6+0xed2*0x2+0x2ad*0x2?this['set'](-0x1d3*-0x15+0x5*-0x19c+-0x3d*0x7f,-0x1393*-0x1+-0x175b+0x4*0xf2,-0x3*-0x7ea+0x175a+-0x2c*0x112,-0x22f*0x3+0x124+0x7e*0xb):(_0x4b7de7=(-0x233c+0x535+0x1e08)/Math['sqrt'](_0x4b7de7),_0xb5a1d7*=_0x4b7de7,_0x428111*=_0x4b7de7,_0x406b4d*=_0x4b7de7,_0x4b7de7=_0xbc60bd*_0xbc60bd+_0x155e04*_0x155e04+_0x4b4d60*_0x4b4d60,_0x4b7de7===-0x2085+0xe*0xb+0x1feb?this['set'](-0x1801+0x256b+-0xd6a,-0x2370+0x313*0x9+0x7c5,0xdd*-0x19+-0xcd1*0x3+0x3c08,-0x955+-0x1a6d+-0x5*-0x727):(_0x4b7de7=(0x205e+0x149+-0x3b*0x92)/Math['sqrt'](_0x4b7de7),_0xbc60bd*=_0x4b7de7,_0x155e04*=_0x4b7de7,_0x4b4d60*=_0x4b7de7,_0x4b7de7=_0x42f5f1*_0x42f5f1+_0x28cabb*_0x28cabb+_0x4766cc*_0x4766cc,_0x4b7de7===0x2679*0x1+-0xe77+0x1*-0x1802?this['set'](0x1*0xc9a+0x1*-0x10ad+0x413,-0x1523+0x1df0+-0x8cd,-0x9*0x355+0x240f+-0x612,0x2273+-0x5d7*0x2+-0x16c4):(_0x4b7de7=(-0x5ef*0x3+0x5*0x7c7+-0x1515*0x1)/Math['sqrt'](_0x4b7de7),_0x42f5f1*=_0x4b7de7,_0x28cabb*=_0x4b7de7,_0x4766cc*=_0x4b7de7,_0x4766cc<-0x21ee+-0x21f9+0x43e7*0x1?_0xb5a1d7>_0x155e04?this['set'](0xf5a*0x1+0xce4+-0x1c3d+_0xb5a1d7-_0x155e04-_0x4766cc,_0x428111+_0xbc60bd,_0x42f5f1+_0x406b4d,_0x4b4d60-_0x28cabb):this['set'](_0x428111+_0xbc60bd,0x835+-0x47*-0x1f+-0x17*0xbb-_0xb5a1d7+_0x155e04-_0x4766cc,_0x4b4d60+_0x28cabb,_0x42f5f1-_0x406b4d):_0xb5a1d7<-_0x155e04?this['set'](_0x42f5f1+_0x406b4d,_0x4b4d60+_0x28cabb,0x1*-0x23c0+0x7d*0xa+0x1*0x1edf-_0xb5a1d7-_0x155e04+_0x4766cc,_0x428111-_0xbc60bd):this['set'](_0x4b4d60-_0x28cabb,_0x42f5f1-_0x406b4d,_0x428111-_0xbc60bd,0x1623+0x105*0x12+0xa1f*-0x4+_0xb5a1d7+_0x155e04+_0x4766cc),this['mulScalar']((0x1*-0xe3a+-0x7b5+0x15f0)/this['length']()))));}['setFromDir'+'ections'](_0x36a8d2,_0x177ebc){const _0x1d091d=-0xae7+-0x291*0x6+0x1a4e+_0x36a8d2['dot'](_0x177ebc);return _0x1d091d<Number['EPSILON']?Math['abs'](_0x36a8d2['x'])>Math['abs'](_0x36a8d2['y'])?(this['x']=-_0x36a8d2['z'],this['y']=-0x10*-0x12+-0x1*0x6a3+0x583,this['z']=_0x36a8d2['x'],this['w']=0x1c38+-0x1fed+0x1*0x3b5):(this['x']=-0x1*0x1a7d+-0x6eb+0x2168,this['y']=-_0x36a8d2['z'],this['z']=_0x36a8d2['y'],this['w']=0x18b*0x4+-0x165d+0x1031):(this['x']=_0x36a8d2['y']*_0x177ebc['z']-_0x36a8d2['z']*_0x177ebc['y'],this['y']=_0x36a8d2['z']*_0x177ebc['x']-_0x36a8d2['x']*_0x177ebc['z'],this['z']=_0x36a8d2['x']*_0x177ebc['y']-_0x36a8d2['y']*_0x177ebc['x'],this['w']=_0x1d091d),this['normalize']();}['slerp'](_0x547935,_0x125519,_0x3ff2f5){const _0x387a1e=_0x547935['x'],_0x25fa5c=_0x547935['y'],_0x5f1c88=_0x547935['z'],_0x2546e1=_0x547935['w'];let _0x1a89a3=_0x125519['x'],_0x1b5afc=_0x125519['y'],_0x5b254e=_0x125519['z'],_0x4ae408=_0x125519['w'],_0x1f41f7=_0x2546e1*_0x4ae408+_0x387a1e*_0x1a89a3+_0x25fa5c*_0x1b5afc+_0x5f1c88*_0x5b254e;if(_0x1f41f7<0x197f+-0x3ac*0x3+-0x151*0xb&&(_0x4ae408=-_0x4ae408,_0x1a89a3=-_0x1a89a3,_0x1b5afc=-_0x1b5afc,_0x5b254e=-_0x5b254e,_0x1f41f7=-_0x1f41f7),Math['abs'](_0x1f41f7)>=-0x2121+-0x92f+0x1d7*0x17)return this['w']=_0x2546e1,this['x']=_0x387a1e,this['y']=_0x25fa5c,this['z']=_0x5f1c88,this;const _0xb76eb7=Math['acos'](_0x1f41f7),_0x5235bd=Math['sqrt'](0x221c+-0x2013+0x5*-0x68-_0x1f41f7*_0x1f41f7);if(Math['abs'](_0x5235bd)<-0xea6+0x24*0x2a+0x2*0x45f+0.001)return this['w']=_0x2546e1*(0x23*0xe+0x1646+-0x1830+0.5)+_0x4ae408*(0x1358+0x19*-0x8b+0x1*-0x5c5+0.5),this['x']=_0x387a1e*(-0x1357+0x1*0xea4+0x4b3+0.5)+_0x1a89a3*(-0x2*0xb2a+0x253e+0x53*-0x2e+0.5),this['y']=_0x25fa5c*(0x11d1+-0x1*-0x1a99+-0x5*0x8e2+0.5)+_0x1b5afc*(0x1cae+-0x2d1*0x3+0x1*-0x143b+0.5),this['z']=_0x5f1c88*(-0x7c*0x2f+0x69*0x24+0x800+0.5)+_0x5b254e*(-0x20b*0xb+-0x3*0xa05+0x3488+0.5),this;const _0x13befd=Math['sin']((-0x452+0x8e4+-0x491-_0x3ff2f5)*_0xb76eb7)/_0x5235bd,_0x1777fe=Math['sin'](_0x3ff2f5*_0xb76eb7)/_0x5235bd;return this['w']=_0x2546e1*_0x13befd+_0x4ae408*_0x1777fe,this['x']=_0x387a1e*_0x13befd+_0x1a89a3*_0x1777fe,this['y']=_0x25fa5c*_0x13befd+_0x1b5afc*_0x1777fe,this['z']=_0x5f1c88*_0x13befd+_0x5b254e*_0x1777fe,this;}['transformV'+'ector'](_0x3bff01,_0x5ca530=new D()){const _0x1f6e52=_0x3bff01['x'],_0x4faab3=_0x3bff01['y'],_0x35a6b9=_0x3bff01['z'],_0x448021=this['x'],_0x5371e0=this['y'],_0x35e572=this['z'],_0x203766=this['w'],_0x328a27=_0x203766*_0x1f6e52+_0x5371e0*_0x35a6b9-_0x35e572*_0x4faab3,_0x3b90ec=_0x203766*_0x4faab3+_0x35e572*_0x1f6e52-_0x448021*_0x35a6b9,_0xe43376=_0x203766*_0x35a6b9+_0x448021*_0x4faab3-_0x5371e0*_0x1f6e52,_0x36e574=-_0x448021*_0x1f6e52-_0x5371e0*_0x4faab3-_0x35e572*_0x35a6b9;return _0x5ca530['x']=_0x328a27*_0x203766+_0x36e574*-_0x448021+_0x3b90ec*-_0x35e572-_0xe43376*-_0x5371e0,_0x5ca530['y']=_0x3b90ec*_0x203766+_0x36e574*-_0x5371e0+_0xe43376*-_0x448021-_0x328a27*-_0x35e572,_0x5ca530['z']=_0xe43376*_0x203766+_0x36e574*-_0x35e572+_0x328a27*-_0x5371e0-_0x3b90ec*-_0x448021,_0x5ca530;}['fromArray'](_0x5dd342,_0x5d782c=-0x1a1+0x45c+-0x2bb){return this['x']=_0x5dd342[_0x5d782c]??this['x'],this['y']=_0x5dd342[_0x5d782c+(0x1d43*0x1+0x54a*-0x7+0x1c*0x47)]??this['y'],this['z']=_0x5dd342[_0x5d782c+(-0x421*0x3+-0x1e71+0x1*0x2ad6)]??this['z'],this['w']=_0x5dd342[_0x5d782c+(-0xeac+0x1058*0x2+-0x1201)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x44e84a=[],_0x3c35e1=-0x1ce1+0x3f9+-0x63a*-0x4){return _0x44e84a[_0x3c35e1]=this['x'],_0x44e84a[_0x3c35e1+(0x2*-0xd06+0x8f0+-0x151*-0xd)]=this['y'],_0x44e84a[_0x3c35e1+(0x5*-0x1e7+-0x26cf*0x1+-0xc15*-0x4)]=this['z'],_0x44e84a[_0x3c35e1+(-0x13c*0x16+0x1a2e+0xfd)]=this['w'],_0x44e84a;}};h(dn,'IDENTITY',Object['freeze'](new dn(-0x1*-0x797+0x1eb4+-0x264b*0x1,-0x2*0x1201+-0x1c1*-0x1+0x2241,-0x15cf+-0x93+0x1662,-0xbbd*-0x1+-0xb43+-0x79))),h(dn,'ZERO',Object['freeze'](new dn(0x13*-0x152+-0x1ef9+0x380f,-0x2b3*-0x2+0x17*0x81+0x10fd*-0x1,-0x1f8e+-0x9*0x97+0x24dd,0x3*0xab9+-0x28f*0x3+0x415*-0x6)));let le=dn;const wa=new D(),Ea=new D(),hm=new D(),dm=new D(),F0=new D();class De{constructor(_0x4c8fe5,_0x3bd554){h(this,'center',new D()),h(this,'halfExtent'+'s',new D(-0x26a+0x51*0x3f+-0x1185+0.5,-0x7a*0x2f+0x7*-0x8e+0xe8*0x1d+0.5,-0x249f+0x1*-0x532+0x29d1+0.5)),h(this,'_min',new D()),h(this,'_max',new D()),(_0x4c8fe5&&this['center']['copy'](_0x4c8fe5),_0x3bd554&&this['halfExtent'+'s']['copy'](_0x3bd554));}['add'](_0xb9549e){const _0x564707=this['center'],_0x350052=_0x564707['x'],_0x430384=_0x564707['y'],_0x352d72=_0x564707['z'],_0x5a93b9=this['halfExtent'+'s'],_0x29df4e=_0x5a93b9['x'],_0x13f876=_0x5a93b9['y'],_0x5e6e36=_0x5a93b9['z'];let _0x353550=_0x350052-_0x29df4e,_0x2e2c5c=_0x350052+_0x29df4e,_0x124b7c=_0x430384-_0x13f876,_0x411f53=_0x430384+_0x13f876,_0x580c45=_0x352d72-_0x5e6e36,_0x4182c7=_0x352d72+_0x5e6e36;const _0x55e985=_0xb9549e['center'],_0x1e2b50=_0x55e985['x'],_0x13776e=_0x55e985['y'],_0x547626=_0x55e985['z'],_0x571b6=_0xb9549e['halfExtent'+'s'],_0x3fc11e=_0x571b6['x'],_0x42268d=_0x571b6['y'],_0x4b1232=_0x571b6['z'],_0x297ae4=_0x1e2b50-_0x3fc11e,_0x32788d=_0x1e2b50+_0x3fc11e,_0x57ed38=_0x13776e-_0x42268d,_0x28f035=_0x13776e+_0x42268d,_0x48d670=_0x547626-_0x4b1232,_0x1f4809=_0x547626+_0x4b1232;_0x297ae4<_0x353550&&(_0x353550=_0x297ae4),_0x32788d>_0x2e2c5c&&(_0x2e2c5c=_0x32788d),_0x57ed38<_0x124b7c&&(_0x124b7c=_0x57ed38),_0x28f035>_0x411f53&&(_0x411f53=_0x28f035),_0x48d670<_0x580c45&&(_0x580c45=_0x48d670),_0x1f4809>_0x4182c7&&(_0x4182c7=_0x1f4809),_0x564707['x']=(_0x353550+_0x2e2c5c)*(0x17c0+0x79*0x17+-0x229f+0.5),_0x564707['y']=(_0x124b7c+_0x411f53)*(0x1dc3+-0x112c+-0xc97+0.5),_0x564707['z']=(_0x580c45+_0x4182c7)*(-0xc04+0x1*-0x1fe7+-0x2beb*-0x1+0.5),_0x5a93b9['x']=(_0x2e2c5c-_0x353550)*(0x135b+0x1f48+-0x32a3+0.5),_0x5a93b9['y']=(_0x411f53-_0x124b7c)*(-0x7a7+-0x227f+0x86e*0x5+0.5),_0x5a93b9['z']=(_0x4182c7-_0x580c45)*(-0x5*-0x73d+0x689+-0x2aba+0.5);}['copy'](_0x24edd7){this['center']['copy'](_0x24edd7['center']),this['halfExtent'+'s']['copy'](_0x24edd7['halfExtent'+'s']);}['clone'](){return new De(this['center'],this['halfExtent'+'s']);}['intersects'](_0x4fa884){const _0x1ec9b0=this['getMax'](),_0x12748b=this['getMin'](),_0x550847=_0x4fa884['getMax'](),_0x4b62a5=_0x4fa884['getMin']();return _0x12748b['x']<=_0x550847['x']&&_0x1ec9b0['x']>=_0x4b62a5['x']&&_0x12748b['y']<=_0x550847['y']&&_0x1ec9b0['y']>=_0x4b62a5['y']&&_0x12748b['z']<=_0x550847['z']&&_0x1ec9b0['z']>=_0x4b62a5['z'];}['_intersect'+'sRay'](_0x56800c,_0x14fd05){const _0x4e97e6=wa['copy'](this['getMin']())['sub'](_0x56800c['origin']),_0x4dadf8=Ea['copy'](this['getMax']())['sub'](_0x56800c['origin']),_0xcd2dd5=_0x56800c['direction'];_0xcd2dd5['x']===-0x1c9d+-0xd*-0x13d+0xc84?(_0x4e97e6['x']=_0x4e97e6['x']<0x16*-0xc9+0x223*-0x7+0x1*0x203b?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x4dadf8['x']=_0x4dadf8['x']<0x1fce+0x12f3+0xb7*-0x47?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4e97e6['x']/=_0xcd2dd5['x'],_0x4dadf8['x']/=_0xcd2dd5['x']),_0xcd2dd5['y']===-0xb92+-0x1b3e+-0x678*-0x6?(_0x4e97e6['y']=_0x4e97e6['y']<-0x20*-0x83+-0x25ca+-0xab5*-0x2?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x4dadf8['y']=_0x4dadf8['y']<-0x326+0x3*0x5e5+-0xe89?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4e97e6['y']/=_0xcd2dd5['y'],_0x4dadf8['y']/=_0xcd2dd5['y']),_0xcd2dd5['z']===0x38f+-0x100b+0xc7c?(_0x4e97e6['z']=_0x4e97e6['z']<0x2571+-0x1ad1+0x220*-0x5?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x4dadf8['z']=_0x4dadf8['z']<0x2051+0x1*0x1610+0x1*-0x3661?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4e97e6['z']/=_0xcd2dd5['z'],_0x4dadf8['z']/=_0xcd2dd5['z']);const _0x3a4ccb=hm['set'](Math['min'](_0x4e97e6['x'],_0x4dadf8['x']),Math['min'](_0x4e97e6['y'],_0x4dadf8['y']),Math['min'](_0x4e97e6['z'],_0x4dadf8['z'])),_0x67bc31=dm['set'](Math['max'](_0x4e97e6['x'],_0x4dadf8['x']),Math['max'](_0x4e97e6['y'],_0x4dadf8['y']),Math['max'](_0x4e97e6['z'],_0x4dadf8['z'])),_0x2545a3=Math['min'](Math['min'](_0x67bc31['x'],_0x67bc31['y']),_0x67bc31['z']),_0x4f6678=Math['max'](Math['max'](_0x3a4ccb['x'],_0x3a4ccb['y']),_0x3a4ccb['z']),_0x303d6e=_0x2545a3>=_0x4f6678&&_0x4f6678>=0x22ab+0x1ebc+-0x4167;return _0x303d6e&&_0x14fd05['copy'](_0x56800c['direction'])['mulScalar'](_0x4f6678)['add'](_0x56800c['origin']),_0x303d6e;}['_fastInter'+'sectsRay'](_0x36e015){const _0x18a38e=wa,_0x2f4d2a=Ea,_0x104f82=hm,_0x5ba046=dm,_0x26eade=F0,_0x558bb8=_0x36e015['direction'];return _0x18a38e['sub2'](_0x36e015['origin'],this['center']),_0x5ba046['set'](Math['abs'](_0x18a38e['x']),Math['abs'](_0x18a38e['y']),Math['abs'](_0x18a38e['z'])),_0x104f82['mul2'](_0x18a38e,_0x558bb8),!(_0x5ba046['x']>this['halfExtent'+'s']['x']&&_0x104f82['x']>=0x3*0x95+0x2*-0x114b+0x4b1*0x7||_0x5ba046['y']>this['halfExtent'+'s']['y']&&_0x104f82['y']>=-0x1a70+-0x25d2+0x2f*0x15e||_0x5ba046['z']>this['halfExtent'+'s']['z']&&_0x104f82['z']>=0x2184+-0x21f1*-0x1+0x4375*-0x1||(_0x26eade['set'](Math['abs'](_0x558bb8['x']),Math['abs'](_0x558bb8['y']),Math['abs'](_0x558bb8['z'])),_0x2f4d2a['cross'](_0x558bb8,_0x18a38e),_0x2f4d2a['set'](Math['abs'](_0x2f4d2a['x']),Math['abs'](_0x2f4d2a['y']),Math['abs'](_0x2f4d2a['z'])),_0x2f4d2a['x']>this['halfExtent'+'s']['y']*_0x26eade['z']+this['halfExtent'+'s']['z']*_0x26eade['y'])||_0x2f4d2a['y']>this['halfExtent'+'s']['x']*_0x26eade['z']+this['halfExtent'+'s']['z']*_0x26eade['x']||_0x2f4d2a['z']>this['halfExtent'+'s']['x']*_0x26eade['y']+this['halfExtent'+'s']['y']*_0x26eade['x']);}['intersects'+'Ray'](_0x2d93e4,_0x300435){return _0x300435?this['_intersect'+'sRay'](_0x2d93e4,_0x300435):this['_fastInter'+'sectsRay'](_0x2d93e4);}['setMinMax'](_0x6e432a,_0x7cfca3){this['center']['add2'](_0x7cfca3,_0x6e432a)['mulScalar'](0x277*0x1+-0x10*-0x9b+-0xc27+0.5),this['halfExtent'+'s']['sub2'](_0x7cfca3,_0x6e432a)['mulScalar'](0x99*0x18+-0x59a+-0x8be+0.5);}['getMin'](){return this['_min']['copy'](this['center'])['sub'](this['halfExtent'+'s']);}['getMax'](){return this['_max']['copy'](this['center'])['add'](this['halfExtent'+'s']);}['containsPo'+'int'](_0x5e3a68){const _0x230673=this['getMin'](),_0x43227a=this['getMax']();return!(_0x5e3a68['x']<_0x230673['x']||_0x5e3a68['x']>_0x43227a['x']||_0x5e3a68['y']<_0x230673['y']||_0x5e3a68['y']>_0x43227a['y']||_0x5e3a68['z']<_0x230673['z']||_0x5e3a68['z']>_0x43227a['z']);}['setFromTra'+'nsformedAa'+'bb'](_0x197206,_0xa9e1f4,_0x4166a0=!(-0x1*-0x18e5+0x2489+0x275*-0x19)){const _0x5d6fe8=_0x197206['center'],_0x4911f4=_0x197206['halfExtent'+'s'],_0x44cd01=_0xa9e1f4['data'];let _0x5224e8=_0x44cd01[-0x1*-0x1c5d+0x34*-0xb9+0x937],_0x3c71a1=_0x44cd01[-0x14a1+-0x253f+0x39e4],_0x2d936c=_0x44cd01[0x2ce+0x1566+0x1c*-0xdd],_0x261467=_0x44cd01[-0xfc+-0x1*-0x14e+0x1b*-0x3],_0x10d2c3=_0x44cd01[0x1*0x23cf+0x1b*0xab+-0x35d3],_0x400cf5=_0x44cd01[0x4*0x1ee+0x140a+-0x1*0x1bb9],_0x25dacb=_0x44cd01[-0x1cf4+-0xba7+-0x1*-0x289d],_0x3d0a3e=_0x44cd01[-0xd*-0x233+0x1b9+-0x1e4a],_0x25e6c2=_0x44cd01[0x22dc+-0x11c*-0x17+-0x3c56];if(_0x4166a0){let _0x3fd763=_0x5224e8*_0x5224e8+_0x3c71a1*_0x3c71a1+_0x2d936c*_0x2d936c;if(_0x3fd763>0x75*0x18+0x1*0x23f9+-0x2ef1){const _0x19c1e5=(0xd8f+0x76*0x3d+0x15*-0x1fc)/Math['sqrt'](_0x3fd763);_0x5224e8*=_0x19c1e5,_0x3c71a1*=_0x19c1e5,_0x2d936c*=_0x19c1e5;}if(_0x3fd763=_0x261467*_0x261467+_0x10d2c3*_0x10d2c3+_0x400cf5*_0x400cf5,_0x3fd763>-0x11ed+0x1*0x2597+-0x13aa){const _0x3c0394=(-0x1775+0x4*-0x1ee+0x1f2e)/Math['sqrt'](_0x3fd763);_0x261467*=_0x3c0394,_0x10d2c3*=_0x3c0394,_0x400cf5*=_0x3c0394;}if(_0x3fd763=_0x25dacb*_0x25dacb+_0x3d0a3e*_0x3d0a3e+_0x25e6c2*_0x25e6c2,_0x3fd763>0x131*0x1c+0x17f3+0x11*-0x35f){const _0x38c76b=(0x214f+0x17bf+0x17*-0x27b)/Math['sqrt'](_0x3fd763);_0x25dacb*=_0x38c76b,_0x3d0a3e*=_0x38c76b,_0x25e6c2*=_0x38c76b;}}this['center']['set'](_0x44cd01[0x1*-0x16e0+0x224c+-0xb60*0x1]+_0x5224e8*_0x5d6fe8['x']+_0x3c71a1*_0x5d6fe8['y']+_0x2d936c*_0x5d6fe8['z'],_0x44cd01[-0x1*0x1463+0xe42+0x7*0xe2]+_0x261467*_0x5d6fe8['x']+_0x10d2c3*_0x5d6fe8['y']+_0x400cf5*_0x5d6fe8['z'],_0x44cd01[-0x17f8+-0x26*-0xb7+-0x324]+_0x25dacb*_0x5d6fe8['x']+_0x3d0a3e*_0x5d6fe8['y']+_0x25e6c2*_0x5d6fe8['z']),this['halfExtent'+'s']['set'](Math['abs'](_0x5224e8)*_0x4911f4['x']+Math['abs'](_0x3c71a1)*_0x4911f4['y']+Math['abs'](_0x2d936c)*_0x4911f4['z'],Math['abs'](_0x261467)*_0x4911f4['x']+Math['abs'](_0x10d2c3)*_0x4911f4['y']+Math['abs'](_0x400cf5)*_0x4911f4['z'],Math['abs'](_0x25dacb)*_0x4911f4['x']+Math['abs'](_0x3d0a3e)*_0x4911f4['y']+Math['abs'](_0x25e6c2)*_0x4911f4['z']);}static['computeMin'+'Max'](_0x3443b5,_0x109d58,_0x4ec7b2,_0x454e1f=_0x3443b5['length']/(-0x1*0x233f+-0x11d2+0x3514)){if(_0x454e1f>-0x1*-0x706+-0x2153+0x1a4d){let _0x268e59=_0x3443b5[-0x539*0x3+0x195a+0x43*-0x25],_0x520dd1=_0x3443b5[0x1*0x1+0x253d*-0x1+0x1*0x253d],_0x3fdb9a=_0x3443b5[0xbb*0x23+0xa74+0x2403*-0x1],_0x6fc55f=_0x268e59,_0x26ab05=_0x520dd1,_0x3e27f7=_0x3fdb9a;const _0x3b04e9=_0x454e1f*(-0x1*0x26ba+-0x1d59+0xd2*0x53);for(let _0x34f36a=-0x10bb*-0x2+0x1*0x985+-0x2c*0xfa;_0x34f36a<_0x3b04e9;_0x34f36a+=-0x4*0x82a+-0x7e0+0x6b*0x61){const _0x10db6b=_0x3443b5[_0x34f36a],_0x274881=_0x3443b5[_0x34f36a+(0x2*0x4cb+-0x21*0xd3+0x8cf*0x2)],_0x1911ad=_0x3443b5[_0x34f36a+(-0x239+0x1e86*-0x1+0xd*0x285)];_0x10db6b<_0x268e59&&(_0x268e59=_0x10db6b),_0x274881<_0x520dd1&&(_0x520dd1=_0x274881),_0x1911ad<_0x3fdb9a&&(_0x3fdb9a=_0x1911ad),_0x10db6b>_0x6fc55f&&(_0x6fc55f=_0x10db6b),_0x274881>_0x26ab05&&(_0x26ab05=_0x274881),_0x1911ad>_0x3e27f7&&(_0x3e27f7=_0x1911ad);}_0x109d58['set'](_0x268e59,_0x520dd1,_0x3fdb9a),_0x4ec7b2['set'](_0x6fc55f,_0x26ab05,_0x3e27f7);}}['compute'](_0x478510,_0x113da8){De['computeMin'+'Max'](_0x478510,wa,Ea,_0x113da8),this['setMinMax'](wa,Ea);}['intersects'+'BoundingSp'+'here'](_0x1904c0){return this['_distanceT'+'oBoundingS'+'phereSq'](_0x1904c0)<=_0x1904c0['radius']*_0x1904c0['radius'];}['_distanceT'+'oBoundingS'+'phereSq'](_0x24c3f4){const _0x75632f=this['getMin'](),_0x21cb64=this['getMax']();let _0x4ca417=0x41*-0x41+0x984+0x6fd;const _0x21213a=['x','y','z'];for(let _0x39fe4e=0x1*0x5e5+0x2060+-0x2645;_0x39fe4e<-0x15da+-0x1d9d+0x337a;++_0x39fe4e){let _0x52a415=0x3b*-0x71+-0x74b*-0x1+0x12c0;const _0x21ab0b=_0x24c3f4['center'][_0x21213a[_0x39fe4e]],_0x955135=_0x75632f[_0x21213a[_0x39fe4e]],_0x34be62=_0x21cb64[_0x21213a[_0x39fe4e]];let _0xdcf749=0x10b3+-0xb3c+-0x577;_0x21ab0b<_0x955135&&(_0xdcf749=_0x955135-_0x21ab0b,_0x52a415+=_0xdcf749*_0xdcf749),_0x21ab0b>_0x34be62&&(_0xdcf749=_0x21ab0b-_0x34be62,_0x52a415+=_0xdcf749*_0xdcf749),_0x4ca417+=_0x52a415;}return _0x4ca417;}['_expand'](_0x2e0ee5,_0x166cc0){wa['add2'](this['getMin'](),_0x2e0ee5),Ea['add2'](this['getMax'](),_0x166cc0),this['setMinMax'](wa,Ea);}}const Il=new D(),N0=new D();class Mu{constructor(_0x3af68e=new D(),_0x1a09de=0x6d6+-0x1*-0x14bb+-0x1b91+0.5){h(this,'center'),h(this,'radius'),(w['assert'](!Object['isFrozen'](_0x3af68e),'The\x20constr'+'uctor\x20of\x20\x27'+'BoundingSp'+'here\x27\x20does'+'\x20not\x20accep'+'t\x20a\x20consta'+'nt\x20(frozen'+')\x20object\x20a'+'s\x20a\x20\x27cente'+'r\x27\x20paramet'+'er'),this['center']=_0x3af68e,this['radius']=_0x1a09de);}['containsPo'+'int'](_0x264d43){const _0x11e483=Il['sub2'](_0x264d43,this['center'])['lengthSq'](),_0x4333f0=this['radius'];return _0x11e483<_0x4333f0*_0x4333f0;}['intersects'+'Ray'](_0x3ff762,_0x3a3c78){const _0x1f5b87=Il['copy'](_0x3ff762['origin'])['sub'](this['center']),_0x51bf02=_0x1f5b87['dot'](N0['copy'](_0x3ff762['direction'])['normalize']()),_0x3cc0c0=_0x1f5b87['dot'](_0x1f5b87)-this['radius']*this['radius'];if(_0x3cc0c0>-0x21a1*-0x1+0x58d+-0x272e&&_0x51bf02>-0xc04+0x1c95+-0x1091)return!(0x237e+-0x2509*-0x1+0x2443*-0x2);const _0x49500f=_0x51bf02*_0x51bf02-_0x3cc0c0;if(_0x49500f<0x1*0x71+-0x2644+0x25d3)return!(-0x8e6+0xa54+-0x16d);const _0x247335=Math['abs'](-_0x51bf02-Math['sqrt'](_0x49500f));return _0x3a3c78&&_0x3a3c78['copy'](_0x3ff762['direction'])['mulScalar'](_0x247335)['add'](_0x3ff762['origin']),!(-0x100a*0x1+-0x100*0x1d+-0xa*-0x481);}['intersects'+'BoundingSp'+'here'](_0xf404a7){Il['sub2'](_0xf404a7['center'],this['center']);const _0x274f69=_0xf404a7['radius']+this['radius'];return Il['lengthSq']()<=_0x274f69*_0x274f69;}}class _S{constructor(_0x59173c=D['UP'],_0x29175e=-0x9*0xab+-0xf63*-0x2+-0x18c3){h(this,'normal',new D()),h(this,'distance'),(this['normal']['copy'](_0x59173c),this['distance']=_0x29175e);}['clone'](){const _0xf38eab=this['constructo'+'r'];return new _0xf38eab()['copy'](this);}['copy'](_0x37a9da){return this['normal']['copy'](_0x37a9da['normal']),this['distance']=_0x37a9da['distance'],this;}['intersects'+'Line'](_0x4cfa59,_0x964a7a,_0x436f41){const _0x31592c=this['distance'],_0x3e40de=this['normal']['dot'](_0x4cfa59)+_0x31592c,_0x1bfa4f=this['normal']['dot'](_0x964a7a)+_0x31592c,_0x3ee9a1=_0x3e40de/(_0x3e40de-_0x1bfa4f),_0x184fa7=_0x3ee9a1>=-0xb70+0x26b*-0xb+-0x2609*-0x1&&_0x3ee9a1<=-0x4a1+0x13d8+-0xf36;return _0x184fa7&&_0x436f41&&_0x436f41['lerp'](_0x4cfa59,_0x964a7a,_0x3ee9a1),_0x184fa7;}['intersects'+'Ray'](_0x4ad63c,_0x2dbc3d){const _0x33c9a1=this['normal']['dot'](_0x4ad63c['direction']);if(_0x33c9a1===-0x10eb+0x1699+0x1*-0x5ae)return!(0x88c+0x3d3*-0x4+-0x6c1*-0x1);const _0x4e5fd1=-(this['normal']['dot'](_0x4ad63c['origin'])+this['distance'])/_0x33c9a1;return _0x4e5fd1>=0x417+-0xb*-0x3d+0x6b6*-0x1&&_0x2dbc3d&&_0x2dbc3d['copy'](_0x4ad63c['direction'])['mulScalar'](_0x4e5fd1)['add'](_0x4ad63c['origin']),_0x4e5fd1>=-0x1881+0x1cf+0x16b2;}['normalize'](){const _0x241d64=(0x1*-0x5b3+-0x1918+-0x6*-0x522)/this['normal']['length']();return this['normal']['mulScalar'](_0x241d64),this['distance']*=_0x241d64,this;}['set'](_0x595313,_0x25d921,_0x4aad7a,_0xd423a7){return this['normal']['set'](_0x595313,_0x25d921,_0x4aad7a),this['distance']=_0xd423a7,this;}['setFromPoi'+'ntNormal'](_0x7dc13b,_0x5d2ea2){return this['normal']['copy'](_0x5d2ea2),this['distance']=-this['normal']['dot'](_0x7dc13b),this;}}class k0{constructor(){h(this,'planes',[]);for(let _0x4570fa=0x1e*0x115+-0xb6c+-0x150a;_0x4570fa<-0xb53+0x3fd*0x3+-0x9e;_0x4570fa++)this['planes'][_0x4570fa]=new _S();}['clone'](){const _0x55c17c=this['constructo'+'r'];return new _0x55c17c()['copy'](this);}['copy'](_0x5d61c3){for(let _0x45582f=0x5*-0x39d+-0x1a41*0x1+0x2c52;_0x45582f<-0x8e8+-0xc*-0x67+0x41a;_0x45582f++)this['planes'][_0x45582f]['copy'](_0x5d61c3['planes'][_0x45582f]);return this;}['setFromMat'+'4'](_0x35c37d){const [_0x23349e,_0x2beb9c,_0x317cf9,_0x2f6864,_0x346d9c,_0xbdd1ba,_0x247366,_0xd7f22c,_0x470ca7,_0x297020,_0x341c1d,_0x47c41a,_0x1dd87b,_0x44729e,_0x2a1769,_0x3faf5f]=_0x35c37d['data'],_0x2bb46d=this['planes'];_0x2bb46d[0x5*0x655+-0x2b+-0x116*0x1d]['set'](_0x2f6864-_0x23349e,_0xd7f22c-_0x346d9c,_0x47c41a-_0x470ca7,_0x3faf5f-_0x1dd87b)['normalize'](),_0x2bb46d[-0x1*0x50d+0x30*-0x49+0x12be]['set'](_0x2f6864+_0x23349e,_0xd7f22c+_0x346d9c,_0x47c41a+_0x470ca7,_0x3faf5f+_0x1dd87b)['normalize'](),_0x2bb46d[-0x7*0x419+0xcd3*0x1+0x6*0x2a5]['set'](_0x2f6864+_0x2beb9c,_0xd7f22c+_0xbdd1ba,_0x47c41a+_0x297020,_0x3faf5f+_0x44729e)['normalize'](),_0x2bb46d[-0x198d*-0x1+-0x1*-0x2511+-0x3e9b]['set'](_0x2f6864-_0x2beb9c,_0xd7f22c-_0xbdd1ba,_0x47c41a-_0x297020,_0x3faf5f-_0x44729e)['normalize'](),_0x2bb46d[0x1ca5*-0x1+-0x1470+0x1*0x3119]['set'](_0x2f6864-_0x317cf9,_0xd7f22c-_0x247366,_0x47c41a-_0x341c1d,_0x3faf5f-_0x2a1769)['normalize'](),_0x2bb46d[-0x1ae0+0x22df*-0x1+0x4*0xf71]['set'](_0x2f6864+_0x317cf9,_0xd7f22c+_0x247366,_0x47c41a+_0x341c1d,_0x3faf5f+_0x2a1769)['normalize']();}['containsPo'+'int'](_0xbd6f43){for(let _0x29857d=0x6a8+-0x97a+0x13*0x26;_0x29857d<-0x538*0x2+0xb1d+-0xa7*0x1;_0x29857d++){const {normal:_0x3e78fb,distance:_0x54f05f}=this['planes'][_0x29857d];if(_0x3e78fb['dot'](_0xbd6f43)+_0x54f05f<=0xa19+0x685+0x3*-0x58a)return!(-0x1fcf+-0xd2c+0x2cfc);}return!(-0x8b0+0xb1e+-0x26e);}['containsSp'+'here'](_0x57dfa4){const {center:_0xc66b96,radius:_0x5531ad}=_0x57dfa4;let _0x53b588=-0x1*-0x1cd9+-0x1ba8+-0x131;for(let _0x3f6dd8=-0x9e6*0x2+-0x2414+0x18*0x254;_0x3f6dd8<0x1b6*-0x13+0x2478+-0x48*0xe;_0x3f6dd8++){const {normal:_0x3023a8,distance:_0x59bb13}=this['planes'][_0x3f6dd8],_0x36df07=_0x3023a8['dot'](_0xc66b96)+_0x59bb13;if(_0x36df07<=-_0x5531ad)return-0x98e*-0x2+0xb*0x25c+-0x2d10;_0x36df07>_0x5531ad&&_0x53b588++;}return _0x53b588===-0x334+0x1a4e+-0x1714?-0x1546+0x54*0x66+-0xc30:-0xd8b*-0x1+0xd76*0x2+-0x2*0x143b;}}class wn{constructor(_0x3f0558,_0x3269ea){h(this,'origin',new D()),h(this,'direction',D['FORWARD']['clone']()),(_0x3f0558&&this['origin']['copy'](_0x3f0558),_0x3269ea&&this['direction']['copy'](_0x3269ea));}['set'](_0x2eb68d,_0x3c9ac6){return this['origin']['copy'](_0x2eb68d),this['direction']['copy'](_0x3c9ac6),this;}['copy'](_0x58a62a){return this['set'](_0x58a62a['origin'],_0x58a62a['direction']);}['clone'](){return new this['constructo'+'r'](this['origin'],this['direction']);}}const yt=-0x2373+0x704*0x1+-0x1*-0x1c6f,ue=-0x8f*0x28+-0x1d9+0x1832*0x1,Du=0x19fd+0x2*0xd39+-0x346d,Iu=0x4e2*-0x1+0xa*-0xfe+0x5*0x2f6,Ft=-0x1a7a+-0x565*0x7+0x403e,U0=0x4*-0x5c0+-0x1cb2+0xc*0x44f,gS=0x6ad+-0x1*-0x2173+-0x22*0x12e,B0=0xa*0xa+-0x1*0x21e6+0x1*0x2187,Ah=-0x27*0xa3+-0x4cf+-0x1daa*-0x1,Ch=-0x1818+0xeaa*-0x1+0x26ca,fs=-0x29e*-0xa+-0x1*0x17ff+-0x22d,z0=0x20*0x17+-0x337*-0x4+0xfba*-0x1,V0=-0x571*0x7+0x72d+-0x3*-0xa4f,G0=-0x11db*-0x1+0x2*0x466+0x3*-0x8e1,ms=0x4*-0x9ba+0x1501+-0x11e7*-0x1,zc=0x2302*-0x1+0x13*-0x19+0x24de,SS=0x1f*0x3+0x524+0x43*-0x15,H0=-0x8*0x1a3+0x71+0xcaa,Fo=-0x17e9+-0x16a*0x7+0x21d0,No=0x11c7*0x1+0x1cd3+-0x2e98,Vc=-0x1*0xdd7+-0xcfe+0x1ad9,bt=-0x39*0x67+-0x58*-0x59+-0x25*0x35,ca=0x1b15+0x11*-0x1ac+0x158,wo=-0x2066+0x1*0x1091+0xfd7,W0=-0x1ed9+-0x39*0x6c+-0x38*-0xfb,Te=-0xc*0x256+0xe3e+-0xdca*-0x1,vt=0x1fc1+-0x16d2+-0x8ee,Ph=-0x1ed8+-0x1be9+0x865*0x7,Mh=-0x7a3*0x2+-0x907+0xc28*0x2,Dh=-0x1*-0x223+0x5d5*0x1+-0x7f4,ha=-0x16*-0x18b+-0xa48+0x17a5*-0x1,$0=-0x3fe+-0x3*-0x14b+-0x1*-0x1d,Gc=-0x1*0x208f+-0x1c54+0x4*0xf39,Hc=0x1c5*0xb+-0x181e*-0x1+-0x2b93,Sf=-0x1*0x1c8b+0x1*-0x14ed+-0x317b*-0x1,X0=0x3*0xadb+0x2238+-0x42c5*0x1,q0=-0x5*0xda+-0x1ad4+0x1f1b,j0=0x1*0xd87+0x1f6e*-0x1+0x11ed,Hi=0x5*-0x2c3+0xb*-0x2c9+0xcf*0x37,yf=-0x443+0x100c+-0xbc9,ji=0x114a+-0x1500+-0x3b7*-0x1,yr=-0x4fe+0xab6+-0x56*0x11,yS=0x19b6*-0x1+-0x5ab+0x1f61,vS=0x58f*0x4+-0x397*0x2+0x1*-0xf0d,Lu=0x20e4+0x1cf4+0x2*-0x1eeb,Ih=0x1bd2+-0x1a30+0x53*-0x5,Ru=0x1439+0x217*0x5+-0x1ea8,Lh=-0x232b+-0x1fca+-0x217d*-0x2,wr=0x6*0x480+0x7e9+-0x22e3,Ne=-0x3c+-0x9*0x3c2+0x2215,Rh=-0x1dec+-0x23d*0x1+-0xabb*-0x3,Ou=0x1606+-0x173a+0x13d,ol=0x1c6+-0x155*-0x8+-0xc64,ui=-0x10da+-0x81f+-0x1904*-0x1,nt=-0xd2a+-0x11d3+-0x46f*-0x7,Ye=0x2473+0x2245+-0xe5*0x4f,Xt=0xee*0x5+-0x1608+0x1170,Qi=0x5f*-0x1b+0x287*0xc+-0x1b0*0xc,Wi=-0x6fd*-0x4+-0x1faf*-0x1+-0x3b93,Oh=-0x2363+-0x2e7*-0x1+0x281*0xd,En=-0x55b*0x7+0x7e8+-0x1*-0x1da7,Fu=-0x18ba+0xa*-0xa0+0x1f0d,_s=-0x1d6c+0x9*-0x13b+-0x263*-0x11,Fh=0x1*0xdd+-0xac1*-0x1+-0xb89,Nu=-0x84e+-0x171b+0x1f7f,ku=0x33*-0x85+0x1fd*0x12+-0x934,ll=0xbec+0x1d49+-0x291d,cl=0x1375+0x1e3b+-0x3197,Nh=-0xe96+0x3*-0xb19+-0x47*-0xad,kh=0x125*-0x6+-0x68d*0x4+-0x13*-0x1bf,xS=-0xf14+0xf28+0x8*0x1,TS=0x579+-0x20fe+0x1ba2,wS=0x1*-0x160d+-0x1*0x11e7+-0x1409*-0x2,ES=-0xb5d*0x1+0x50a+0x113*0x6,Uu=0xfdd*0x1+0xf64+-0x1f21,bS=-0xdc6+0x1bd9+-0xdf2,Bu=0x606*0x2+0x100d+-0x1bf7,zu=0x1*0xe13+-0x3*0xb5+-0xbd1*0x1,Vu=0x8f1+0x1eb2+-0x277f*0x1,Yi=-0x1445+0x797+0xcd3,Gu=-0x24c2+-0x4f*-0x52+-0x87*-0x16,AS=-0x1*0x23b+-0x21a9+0x1*0x240b,Hu=0x1ece+-0x22af+-0x1*-0x409,Wu=0x2*-0x5f+0x2*-0x679+0xdd9,$u=0x1*0x1beb+-0xe6d*0x1+0x1*-0xd54,Xu=-0x1*-0x4c1+-0x2*-0xe3e+-0x2*0x1089,qu=0x182e+-0xe74*-0x1+0x6*-0x669,CS=0x97f*-0x1+0x23*0x4+-0x8*-0x124,ju=-0x2573+-0x5a0+0xe6b*0x3,Uh=0xb*-0x83+0x2cf*0x8+0x29*-0x68,Yu=-0x7*-0x4b7+0x2427+0x4*-0x113e,Ue=0x25cc+-0x260e*0x1+0x73,Bh=-0x226d+-0x98e*-0x3+0x5f5,Ku=0x5bf+0x1*0x25f+-0x7eb,Zu=-0x250a+-0xb89*0x2+0x3c50,Qu=-0x1a87*0x1+0x4*0x772+-0x4e*0xa,vf=0x1*-0x8fb+0x2486+0x1b55*-0x1,xf=0xfe*-0xd+0x10*0x6b+-0xeb*-0x7,Tf=0x1af0+0x1b+-0x147*0x15,wf=0x383+0x16bb+0x13d*-0x15,Ef=0x6*0x5d3+0x5f9+-0x28ad,bf=-0x1a*0xb5+-0x1bbc+0x2e5d,PS=0x832+0x1*0x11f+0x1*-0x911,MS=-0x2*0xbf3+0x1f85+-0x75e,DS=-0x55*-0x42+-0x214b+0xba3,IS=-0xa65*0x1+0x2f*0x16+0x1*0x69e,Af=0x4e+-0xae9+-0xadf*-0x1,un=0xbf*0xc+0x2182+-0x1*0x2a31,Nt=new Map([[yS,{'name':'A8','size':0x1,'ldr':!(0x510*0x7+-0x17e7+-0xb89)}],[Zu,{'name':'R8','size':0x1,'ldr':!(0x1a6+-0xc41*0x3+0x231d)}],[vS,{'name':'L8','size':0x1,'ldr':!(0x19d0+0x953*0x4+-0x3f1c)}],[Lu,{'name':'LA8','size':0x2,'ldr':!(-0x267e+-0x17fa+0x3e78)}],[Qu,{'name':'RG8','size':0x2,'ldr':!(0x1022*-0x1+0x2*-0x80c+0x4b*0x6e)}],[Ih,{'name':'RGB565','size':0x2,'ldr':!(0xd82+-0x2040+0x12be)}],[Ru,{'name':'RGBA5551','size':0x2,'ldr':!(-0x1*0x1b47+-0xbcb+0x2712)}],[Lh,{'name':'RGBA4','size':0x2,'ldr':!(0x1a0e+-0x9*-0x21f+-0x2d25)}],[wr,{'name':'RGB8','size':0x4,'ldr':!(0xa66+0x26e5+-0x314b)}],[Ne,{'name':'RGBA8','size':0x4,'ldr':!(0x859*0x1+0xf9*-0x1+-0x2*0x3b0),'srgbFormat':_s}],[Bh,{'name':'R16F','size':0x2}],[Ku,{'name':'RG16F','size':0x4}],[ui,{'name':'RGB16F','size':0x8}],[nt,{'name':'RGBA16F','size':0x8}],[Ye,{'name':'RGB32F','size':0x10}],[Xt,{'name':'RGBA32F','size':0x10}],[Qi,{'name':'R32F','size':0x4}],[Wi,{'name':'DEPTH','size':0x4}],[un,{'name':'DEPTH16','size':0x2}],[Oh,{'name':'DEPTHSTENC'+'IL','size':0x4}],[En,{'name':'111110F','size':0x4}],[Fu,{'name':'SRGB8','size':0x4,'ldr':!(0x1*-0x268+-0x175e+0xce3*0x2),'srgb':!(-0x11f4+0xe9a+0x35a)}],[_s,{'name':'SRGBA8','size':0x4,'ldr':!(-0x53d+0xf9*-0x8+0xd05),'srgb':!(0x155*0x2+-0xb*0x15+-0x1c3)}],[ES,{'name':'BGRA8','size':0x4,'ldr':!(-0x501*-0x3+0x1af*-0x12+0x1b3*0x9)}],[PS,{'name':'SBGRA8','size':0x4,'ldr':!(-0x4*0x482+0x1f9c+-0x4f*0x2c),'srgb':!(-0x269a+0x110c*-0x1+-0x2*-0x1bd3)}],[Rh,{'name':'DXT1','blockSize':0x8,'ldr':!(-0x1eff+0xde4+0x111b),'srgbFormat':vf}],[Ou,{'name':'DXT3','blockSize':0x10,'ldr':!(0x3b*0x18+-0x4ef*-0x1+-0xa77),'srgbFormat':xf}],[ol,{'name':'DXT5','blockSize':0x10,'ldr':!(0x15*0x25+0x1fdb+0x3a*-0x9a),'srgbFormat':Tf}],[Fh,{'name':'ETC1','blockSize':0x8,'ldr':!(-0x1153+-0x1fa+0x134d)}],[Nu,{'name':'ETC2_RGB','blockSize':0x8,'ldr':!(0x664*-0x4+-0x73e*-0x1+0x1252),'srgbFormat':wf}],[ku,{'name':'ETC2_RGBA','blockSize':0x10,'ldr':!(-0x9*-0x24e+-0x1096*-0x1+-0x4*0x955),'srgbFormat':Ef}],[ll,{'name':'PVRTC_2BPP'+'_RGB_1','ldr':!(-0x2365+0x963+-0x1a02*-0x1),'blockSize':0x8}],[cl,{'name':'PVRTC_2BPP'+'_RGBA_1','ldr':!(-0x3bc+0x1*0x20a1+-0x1ce5*0x1),'blockSize':0x8}],[Nh,{'name':'PVRTC_4BPP'+'_RGB_1','ldr':!(-0x7a1+0x17*-0x2c+0xb95),'blockSize':0x8}],[kh,{'name':'PVRTC_4BPP'+'_RGBA_1','ldr':!(-0xc3d*0x1+-0x1860+0x249d),'blockSize':0x8}],[xS,{'name':'ASTC_4x4','blockSize':0x10,'ldr':!(-0x1*-0x2045+-0x1e62+-0x45*0x7),'srgbFormat':bf}],[TS,{'name':'ATC_RGB','blockSize':0x8,'ldr':!(0x1bc6*-0x1+-0x2*0x12fb+0x41bc)}],[wS,{'name':'ATC_RGBA','blockSize':0x10,'ldr':!(0x1f39+0x1a8+-0x1*0x20e1)}],[MS,{'name':'BC6H_RGBF','blockSize':0x10}],[DS,{'name':'BC6H_RGBUF','blockSize':0x10}],[IS,{'name':'BC7_RGBA','blockSize':0x10,'ldr':!(0x5*-0x78a+0x15e8+0xfca),'srgbFormat':Af}],[vf,{'name':'DXT1_SRGB','blockSize':0x8,'ldr':!(0x128c*-0x2+-0x1*-0x36d+0x21ab),'srgb':!(-0x24e9+0x1c53*0x1+0x896)}],[xf,{'name':'DXT3_SRGBA','blockSize':0x10,'ldr':!(0x1*0x1502+-0x2*-0x3bf+-0x1c80),'srgb':!(-0x6b3+-0x5f0+0xca3)}],[Tf,{'name':'DXT5_SRGBA','blockSize':0x10,'ldr':!(-0x2*0x8db+0xdc4*-0x2+0x2*0x169f),'srgb':!(0x11d3+-0x9*-0x336+-0x1bb*0x1b)}],[wf,{'name':'ETC2_SRGB','blockSize':0x8,'ldr':!(0x209e+-0x4d*0x4f+-0x1*0x8db),'srgb':!(0x3f8+-0x1fa2+0x1baa)}],[Ef,{'name':'ETC2_SRGBA','blockSize':0x10,'ldr':!(-0x7*-0x269+-0x1276*0x1+-0x25*-0xb),'srgb':!(0x7df+0x1319*0x2+-0x2e11)}],[bf,{'name':'ASTC_4x4_S'+'RGB','blockSize':0x10,'ldr':!(0x25db*-0x1+0xb59*-0x1+-0x4*-0xc4d),'srgb':!(-0x264e*-0x1+-0x2*0x1193+-0x2*0x194)}],[Af,{'name':'BC7_SRGBA','blockSize':0x10,'ldr':!(0xac*0x1c+0x121d+0x1*-0x24ed),'srgb':!(0x1b19+0x7*0x4cd+-0x3cb4)}],[Uu,{'name':'R8I','size':0x1,'isInt':!(-0x6b*-0x38+0x17*0x91+-0x246f*0x1)}],[bS,{'name':'R8U','size':0x1,'isInt':!(-0x1*0x6a1+0xa7e+0x3dd*-0x1)}],[Bu,{'name':'R16I','size':0x2,'isInt':!(-0x242a+-0x1c3a+0x4064)}],[zu,{'name':'R16U','size':0x2,'isInt':!(-0x185*0x10+0x1166+0x6ea*0x1)}],[Vu,{'name':'R32I','size':0x4,'isInt':!(-0x2*0xaa4+-0x1ccb+0x3213)}],[Yi,{'name':'R32U','size':0x4,'isInt':!(0xdd7+-0xa36+-0x3a1)}],[Gu,{'name':'RG8I','size':0x2,'isInt':!(-0x1a89+-0x1*-0x16af+0x3da)}],[AS,{'name':'RG8U','size':0x2,'isInt':!(-0x12aa+-0x19b0+0x2c5a)}],[Hu,{'name':'RG16I','size':0x4,'isInt':!(-0xd9*0x6+-0xebe+0x13d4)}],[Wu,{'name':'RG16U','size':0x4,'isInt':!(-0x1512+-0x1*-0x1525+-0x1*0x13)}],[$u,{'name':'RG32I','size':0x8,'isInt':!(0xbc7*0x1+-0xb75+-0x52)}],[Xu,{'name':'RG32U','size':0x8,'isInt':!(0x47*-0x61+0x3*-0xace+0x5*0xbdd)}],[qu,{'name':'RGBA8I','size':0x4,'isInt':!(-0x369+-0x1*-0x1abb+-0x1752)}],[CS,{'name':'RGBA8U','size':0x4,'isInt':!(0x5ea*0x5+-0x23c5+-0x633*-0x1)}],[ju,{'name':'RGBA16I','size':0x8,'isInt':!(0x9a2+-0xbf1+-0xc5*-0x3)}],[Uh,{'name':'RGBA16U','size':0x8,'isInt':!(-0xa06+0x1898+-0xe92)}],[Yu,{'name':'RGBA32I','size':0x10,'isInt':!(-0x36b+-0x16*0x160+-0x27*-0xdd)}],[Ue,{'name':'RGBA32U','size':0x10,'isInt':!(0x2139+-0x15c6+-0x3d1*0x3)}]]),Y0=_0xa586db=>{var _0x4d3b75;return((_0x4d3b75=Nt['get'](_0xa586db))==null?void(-0x14d1+0x1b08+-0x637):_0x4d3b75['blockSize'])!==void(-0x1bf5+0x1dde+-0x1e9);},Wc=_0xf5cd69=>{var _0x4b7f49;return((_0x4b7f49=Nt['get'](_0xf5cd69))==null?void(-0x1d12*0x1+-0x96b+0x267d):_0x4b7f49['srgb'])===!(0x1b9b+-0x997+-0x481*0x4);},rn=_0x2035ff=>{var _0x332fa6;return((_0x332fa6=Nt['get'](_0x2035ff))==null?void(0xe63*0x1+-0x259*0x1+-0x86*0x17):_0x332fa6['isInt'])===!(-0x1*0x94d+-0x1f*0x116+0x287*0x11);},zh=_0xc4c29d=>{var _0x4b0ae3;return((_0x4b0ae3=Nt['get'](_0xc4c29d))==null?void(-0xd*-0x209+-0x158f+-0x273*0x2):_0x4b0ae3['srgbFormat'])||_0xc4c29d;},K0=_0x818c38=>{for(const [_0x5bc22a,_0x56d12d]of Nt)if(_0x56d12d['srgbFormat']===_0x818c38)return _0x5bc22a;return _0x818c38;},LS=_0xf4cdd=>{const _0x33dcb9=Nt['get'](_0xf4cdd);return!!(_0x33dcb9!=null&&_0x33dcb9['ldr']&&!(_0x33dcb9!=null&&_0x33dcb9['srgb']));},RS=_0x4bd826=>{switch(_0x4bd826){case Qi:case Ye:case Xt:return Float32Array;case Vu:case $u:case Yu:return Int32Array;case Yi:case Xu:case Ue:return Uint32Array;case Bu:case Hu:case ju:return Int16Array;case Qu:case zu:case Wu:case Uh:case Ih:case Ru:case Lh:case Bh:case Ku:case ui:case nt:return Uint16Array;case Uu:case Gu:case qu:return Int8Array;default:return Uint8Array;}},Vh=-0x1038+0x1*-0x1003+0x203b,Gh=-0xaaa+-0x5b5+-0x2*-0x830,OS=-0x3a*0x27+0x66+0x872,FS=-0x682*-0x2+0x167*0x5+-0x1404,qs=0x139d+0x25*-0x3d+0x228*-0x5,vr=-0x11f7+0x2*0x1af+0xe9e,sa=-0x11*-0xe1+-0x2489*-0x1+-0x3374,Pe='POSITION',gs='NORMAL',yi='TANGENT',gi='BLENDWEIGH'+'T',us='BLENDINDIC'+'ES',Wt='COLOR',fm='TEXCOORD',is='TEXCOORD0',va='TEXCOORD1',hl='TEXCOORD2',dl='TEXCOORD3',fl='TEXCOORD4',ul='TEXCOORD5',pl='TEXCOORD6',ml='TEXCOORD7',Cf='ATTR0',$c='ATTR1',Ju='ATTR2',ep='ATTR3',tp='ATTR4',Z0='ATTR5',Q0='ATTR6',J0='ATTR7',ko='ATTR8',Uo='ATTR9',ex='ATTR10',sp='ATTR11',ip='ATTR12',Xc='ATTR13',rp='ATTR14',bn='ATTR15',NS=0x1826+-0x1636+-0xb*0x2d,pn=0x1064*-0x2+0x74b*0x3+-0xae7*-0x1,tx=0x11*-0x196+-0x19c6+0x34be,sx=0x58c+-0x25d5+0x6*0x562,ix=-0x3c7*0x1+-0x2385*-0x1+-0x1fb9,Ll=0xe06+-0x1*-0x1df9+-0x7*0x649,kS=-0x350+-0xb4c*0x2+-0xb*-0x25b,fd=-0x57*0x17+-0x1ffd+0x27d0,Ms='default',Ki='rgbm',qc='rgbe',Bo='rgbp',zo='swizzleGGG'+'R',Pf=0x59b+-0x227+-0x373,Er=-0x1*-0x241+0x2178+0xdf*-0x29,US=-0x421+-0x7b*0x29+-0x167*-0x11,BS='2d',rx=0x1*0x12dd+0x15b6+-0x2893,ax='none',Mf='cube',um='equirect',nx='octahedral',Fe='glsl',it='wgsl',Hh=-0x1666+0x7b+0x1*0x15eb,ia=0x22*-0xb9+0x4e*0x5+0x119*0x15,Wh=-0x20b*0x6+-0x1639+0x227d,_l=-0xd34+0x145d+-0x726,zS=-0x2385+-0x10e2*0x1+-0x1b*-0x1f1,Vo=0x13e5+-0x1951*-0x1+-0x2d31,Ve=0x1*-0x1691+-0xa89+0x4*0x848,mn=0x21f2+-0x26b*0x3+-0x1ab1,da=-0x1391+0x5*-0x262+0x1f7c,$s=0x20df+-0x1a12+-0x6cb,fa=-0xba0+-0x535+0x10d8,ds=-0x1f6c+-0x2351+0x42c1*0x1,An=0x1fdd+0x2022+-0x35e*0x13,ra=0x895+0x2*-0x119f+-0x26d*-0xb,aa=0x1cff*-0x1+0x1031*-0x2+-0x83*-0x78,na=-0x182f*0x1+-0x1*0xce3+-0x6*-0x62f,Go=0x5df+0x1c*0x9b+-0x16ca,Ho=-0x24*0x7f+0x54d*-0x1+0x1733,Wo=0x1*0x6b9+-0xae0+0x1*0x432,jc=-0x26b0+0x1d27+0x995,Cn=0x79*-0x2e+-0x1e2b*0x1+0x6*0x8a9,li=0x1d6e+-0x2f1+-0x1*0x1a6f,ox=0x1*-0x901+-0x7ba+0x1*0x10ca,lx=0x1916+-0x43*0x31+-0xc33,$h=-0x35*0xd+-0x1*-0x301+-0x3f,cx=-0x33*-0x23+-0x1e7*-0xd+0x2*-0xfd1,hx=0x1*0x4cf+-0x2c5*0x9+0x1431,dx=-0x25d+0x3*-0x212+0x8a7,Xh=0x1139*-0x1+0x188b+0x6d*-0x11,qh=-0x158*0xa+0x2c*0x1+0x1*0xd5a,ap=0x4f9*0x2+0x103a+-0x1a15,VS=0x1d3+0xd*0x11b+-0x101a,fx=0x7*0x47+-0x3ff*0x3+0x1*0xa25,Pn=-0x197*-0x1+0x1*0xcd+-0x1*0x24a,Mn=-0x1328+0x22a9+-0xf66,Dn=0x1*-0x565+0xe87*-0x1+0x1408,In=-0x3*-0x279+0xb*-0x71+0x13*-0x21,Ln=0x1c3f+0x734*0x5+-0x4025,jh=-0x1*0x1db7+-0x258d+0x4363,Yh=0x1*-0x261d+0xa51*-0x2+-0x1*-0x3adf,Rn=0x75f+-0x1ff3+0x18b5,Kh=0x1d4+-0x1*0x223c+0x208a,Zh=-0x8*-0x1fb+0xe01*0x1+-0x1db6,On=0xa*-0x1a6+-0x54*0x60+0x3020,Qh=0x3*0x600+-0x1485+0x16*0x1f,Jh=0x24eb*0x1+-0x1*-0x1a7b+0x1*-0x3f40,Yc=0x25*0xca+0xa*-0xa4+-0x3d*0x5f,np=-0x25b*0xb+0x10f*0x24+0x1*-0xc0b,op=-0xb8*-0x2f+0x21f8+-0x4397,ux=0x926+-0x1db6+0x14ba,px=0x10ea+-0x1f3*-0x7+0xa*-0x30a,mx=0xcb+-0x5*-0x455+-0x1648,_x=-0x1420+0x102c*-0x2+0x34a5,gx=-0x132+0x1777+-0xf*0x179,Sx=-0xd3d*-0x1+-0x130e+0x600*0x1,yx=-0x39*-0x5a+0xb*-0x2dd+-0x1*-0xba5,vx=0xdbe+-0x1af8+0xd6b,GS=['bool','int','float','vec2','vec3','vec4','ivec2','ivec3','ivec4','bvec2','bvec3','bvec4','mat2','mat3','mat4','sampler2D','samplerCub'+'e','','sampler2DS'+'hadow','samplerCub'+'eShadow','sampler3D','','','','','sampler2DA'+'rray','uint','uvec2','uvec3','uvec4','','','','','','','','','','','','','isampler2D','usampler2D','isamplerCu'+'be','usamplerCu'+'be','isampler3D','usampler3D','isampler2D'+'Array','usampler2D'+'Array'],xx=[['bool'],['i32'],['f32'],['vec2f','vec2<f32>'],['vec3f','vec3<f32>'],['vec4f','vec4<f32>'],['vec2i','vec2<i32>'],['vec3i','vec3<i32>'],['vec4i','vec4<i32>'],['vec2<bool>'],['vec3<bool>'],['vec4<bool>'],['mat2x2f','mat2x2<f32'+'>'],['mat3x3f','mat3x3<f32'+'>'],['mat4x4f','mat4x4<f32'+'>'],['texture_2d'+'<f32>'],['texture_cu'+'be<f32>'],['array<f32>'],['texture_de'+'pth_2d'],['texture_de'+'pth_cube'],['texture_3d'+'<f32>'],['array<vec2'+'<f32>>'],['array<vec3'+'<f32>>'],['array<vec4'+'<f32>>'],['array<mat4'+'x4<f32>>'],['texture_2d'+'_array<f32'+'>'],['u32'],['vec2u','vec2<u32>'],['vec3u','vec3<u32>'],['vec4u','vec4<u32>'],['array<i32>'],['array<u32>'],['array<bool'+'>'],['array<vec2'+'i>','array<vec2'+'<i32>>'],['array<vec2'+'u>','array<vec2'+'<u32>>'],['array<vec2'+'b>','array<vec2'+'<bool>>'],['array<vec3'+'i>','array<vec3'+'<i32>>'],['array<vec3'+'u>','array<vec3'+'<u32>>'],['array<vec3'+'b>','array<vec3'+'<bool>>'],['array<vec4'+'i>','array<vec4'+'<i32>>'],['array<vec4'+'u>','array<vec4'+'<u32>>'],['array<vec4'+'b>','array<vec4'+'<bool>>'],['texture_2d'+'<i32>'],['texture_2d'+'<u32>'],['texture_cu'+'be<i32>'],['texture_cu'+'be<u32>'],['texture_3d'+'<i32>'],['texture_3d'+'<u32>'],['texture_2d'+'_array<i32'+'>'],['texture_2d'+'_array<u32'+'>']],Tx=new Map();xx['forEach']((_0x58dee0,_0x50b4bb)=>{_0x58dee0['forEach'](_0x49934f=>Tx['set'](_0x49934f,_0x50b4bb));});const wx='webgl2',lp=0xdaf+0x1e19*-0x1+0x106b,HS=0x1*0x111d+-0x32*-0x68+-0x256b,Ex=0x177b+-0x7e2*-0x2+-0x273b,bx='ldr',WS=0x11ed+0x1c97+-0x2e83,$S=-0x181c+0x1*-0xafa+0x4*0x8c6,XS=-0x715+-0x1465*0x1+0x1b7e,qS=-0x103b+-0x29*-0x2e+0x8e5,jS=0x6f2+-0x1d57+0x1675,YS=-0xd*0x1fa+0x1ac5+-0xf3,KS=0x120*-0x2+0x2154+-0x1ed4,ZS=0x1ded+0x8*-0x4d5+0x93b*0x1,Ax=-0x12d0+-0x1c94+0x3063,$o=-0x1*-0x20e4+-0xd7d+0x1367*-0x1,QS=-0xbc0+-0x873*0x2+0x1ca7,Df=-0x163d+-0x1*-0x239+0x1406*0x1,cp='default',_n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Uint16Array],Eo=[-0xcbd+-0xf41+0x1bff,0x2334+0x2450+-0x4783,0x1552+-0x51e+0x1032*-0x1,0x1a4b+-0x10cd*0x1+0x4*-0x25f,-0x2061*0x1+0x14a0+-0x17*-0x83,0x9*-0x3e3+-0x15c1+-0x40*-0xe3,-0x9b7+-0x102c+0x19e7,0x1551+0x1f66+-0x34b5],Cx=['INT8','UINT8','INT16','UINT16','INT32','UINT32','FLOAT32','FLOAT16'],Kc=[Uint8Array,Uint16Array,Uint32Array],Px=[-0x3*0x4f5+-0x1df5*0x1+0x2cd5*0x1,-0x1*0x24a3+0x1535+-0x4c*-0x34,0x1665+-0x11c4+-0x1*0x49d],JS=new Map([['float','f32'],['vec2','vec2f'],['vec3','vec3f'],['vec4','vec4f'],['int','i32'],['ivec2','vec2i'],['ivec3','vec3i'],['ivec4','vec4i'],['uint','u32'],['uvec2','vec2u'],['uvec3','vec3u'],['uvec4','vec4u']]),Le={};Le[Pe]=-0x9e5+0x170a+-0xd25*0x1,Le[gs]=-0x113e+-0x1*0x5ce+-0x34b*-0x7,Le[gi]=-0x73c+0x1e06+-0x16c8,Le[us]=-0x159*0xc+-0x1*0x1fa2+-0x1*-0x2fd1,Le[Wt]=0x1577+0x1e6c+-0x33df*0x1,Le[is]=-0x10ca+0x1ca6+-0xbd7,Le[va]=0x10*-0x96+0x346*-0xa+0x2a22,Le[hl]=0x2e6+0x2055+-0x2ef*0xc,Le[dl]=-0x813*-0x3+0x1599+-0x2dca*0x1,Le[fl]=0x6*-0xb9+0x7dd*-0x1+0xc3c,Le[ul]=0x2*-0x87c+0x144d*-0x1+-0x254f*-0x1,Le[pl]=-0x2656+0xa55+0x703*0x4,Le[ml]=-0x15a*0x3+-0x1432+0x26e*0xa,Le[yi]=0x1*-0x1795+-0x1653+0x1*0x2df5,Le[Cf]=-0x1a9b+0xf97*-0x1+0x2a32,Le[$c]=0x9e*0x1d+0x6db+-0x18c0,Le[Ju]=-0xe4e+0x4a*0x5d+-0xc92,Le[ep]=0x1*-0x143e+0x1d06*-0x1+0x1*0x3147,Le[tp]=-0xdfd+-0x1*0x8df+0x16e0,Le[Z0]=-0xe0*0xb+0x10e6+-0x741,Le[Q0]=-0x1d8+0x232c+-0x214e,Le[J0]=-0x1be8+-0x1357*-0x1+0x1*0x898,Le[ko]=-0x704+-0x1*0x25b1+0x2cbd,Le[Uo]=-0x1*0x35b+-0x1aae*-0x1+-0x174a,Le[ex]=-0x2a*-0xc6+0x230a+-0x437c,Le[sp]=0x1*0xde9+-0x72*0x2+-0x16*0x97,Le[ip]=0x8b0*0x3+-0x5*-0x78e+-0x3fca,Le[Xc]=0x2*0x4da+0x1284+-0x1c2b,Le[rp]=-0x1ea5*-0x1+0x18eb+-0x3782,Le[bn]=-0x17cc+0x16b8*0x1+0x123;const dr=class dr{static['clearGpuMa'+'rkers'](){dr['markers']['length']=-0x25*0xed+0x2*-0x1053+0x42e7;}static['pushGpuMar'+'ker'](_0x44681f,_0x45abaa){dr['markers']['push'](_0x45abaa),_0x44681f['pushMarker'](_0x45abaa);}static['popGpuMark'+'er'](_0x49878a){dr['markers']['length']&&dr['markers']['pop'](),_0x49878a['popMarker']();}static['toString'](){return dr['markers']['join']('\x20|\x20');}};h(dr,'markers',[]);let Q=dr,Mx=-0x6*0x4c5+0x1*0x559+0x1745;class ed{constructor(_0x534647,_0x27e5aa){h(this,'slot',-(0x7e2+-0x1924+0x1143)),h(this,'scopeId',null),(this['name']=_0x534647,this['visibility']=_0x27e5aa);}}class hp extends ed{}class Dx extends ed{constructor(_0x4eb432,_0x131882,_0x27507a=!(0x1*-0x5dd+-0x1876+0x1e54)){super(_0x4eb432,_0x131882),h(this,'format',''),(this['readOnly']=_0x27507a,w['assert'](_0x27507a||!(_0x131882&lp),'Storage\x20bu'+'ffer\x20can\x20o'+'nly\x20be\x20use'+'d\x20in\x20read-'+'only\x20mode\x20'+'in\x20SHADERS'+'TAGE_VERTE'+'X.'));}}class pm extends ed{constructor(_0xbda5ae,_0x765ff8,_0x3cc90d=BS,_0xc0309=rx,_0x52ec60=!(-0x52+0x1da+0x1c*-0xe),_0x22f136=null){super(_0xbda5ae,_0x765ff8),this['textureDim'+'ension']=_0x3cc90d,this['sampleType']=_0xc0309,this['hasSampler']=_0x52ec60,this['samplerNam'+'e']=_0x22f136??_0xbda5ae+'_sampler';}}class Ix extends ed{constructor(_0x2b46db,_0x11c26d=Ne,_0x5d1cd0=BS,_0x1dbe60=!(-0x239*-0xd+0x17bf+-0x34a4),_0x455407=!(-0x1*-0x1d21+-0x1b21+0x1ff*-0x1)){super(_0x2b46db,Ex),this['format']=_0x11c26d,this['textureDim'+'ension']=_0x5d1cd0,this['write']=_0x1dbe60,this['read']=_0x455407;}}class ey{constructor(_0x1d8247,_0x47730f){h(this,'uniformBuf'+'ferFormats',[]),h(this,'textureFor'+'mats',[]),h(this,'storageTex'+'tureFormat'+'s',[]),h(this,'storageBuf'+'ferFormats',[]),(this['id']=Mx++,ya['setName'](this,'BindGroupF'+'ormat_'+this['id']),w['assert'](_0x47730f));let _0x34d01e=0x2116+0xd3*0x2c+0x64e*-0xb;_0x47730f['forEach'](_0x3974d4=>{_0x3974d4['slot']=_0x34d01e++,_0x3974d4 instanceof pm&&_0x3974d4['hasSampler']&&_0x34d01e++,_0x3974d4 instanceof hp?this['uniformBuf'+'ferFormats']['push'](_0x3974d4):_0x3974d4 instanceof pm?this['textureFor'+'mats']['push'](_0x3974d4):_0x3974d4 instanceof Ix?this['storageTex'+'tureFormat'+'s']['push'](_0x3974d4):_0x3974d4 instanceof Dx?this['storageBuf'+'ferFormats']['push'](_0x3974d4):w['assert']('Invalid\x20bi'+'nd\x20format',_0x3974d4);}),this['device']=_0x1d8247;const _0x241238=_0x1d8247['scope'];this['bufferForm'+'atsMap']=new Map(),this['uniformBuf'+'ferFormats']['forEach']((_0x36fb1a,_0x6d13ef)=>this['bufferForm'+'atsMap']['set'](_0x36fb1a['name'],_0x6d13ef)),this['textureFor'+'matsMap']=new Map(),this['textureFor'+'mats']['forEach']((_0x4a1770,_0x41e94e)=>{this['textureFor'+'matsMap']['set'](_0x4a1770['name'],_0x41e94e),_0x4a1770['scopeId']=_0x241238['resolve'](_0x4a1770['name']);}),this['storageTex'+'tureFormat'+'sMap']=new Map(),this['storageTex'+'tureFormat'+'s']['forEach']((_0x2634d0,_0x11f962)=>{this['storageTex'+'tureFormat'+'sMap']['set'](_0x2634d0['name'],_0x11f962),_0x2634d0['scopeId']=_0x241238['resolve'](_0x2634d0['name']);}),this['storageBuf'+'ferFormats'+'Map']=new Map(),this['storageBuf'+'ferFormats']['forEach']((_0xf8e7d,_0x4f807f)=>{this['storageBuf'+'ferFormats'+'Map']['set'](_0xf8e7d['name'],_0x4f807f),_0xf8e7d['scopeId']=_0x241238['resolve'](_0xf8e7d['name']);}),this['impl']=_0x1d8247['createBind'+'GroupForma'+'tImpl'](this),w['trace'](p0,'Alloc:\x20Id\x20'+this['id']+(',\x20while\x20re'+'ndering\x20[')+Q['toString']()+']',this);}['destroy'](){this['impl']['destroy']();}['getTexture'](_0x417714){const _0x1d5b1b=this['textureFor'+'matsMap']['get'](_0x417714);return _0x1d5b1b!==void(-0x20b5+-0x3*-0x62a+0xe37)?this['textureFor'+'mats'][_0x1d5b1b]:null;}['getStorage'+'Texture'](_0x4f44f9){const _0x77252f=this['storageTex'+'tureFormat'+'sMap']['get'](_0x4f44f9);return _0x77252f!==void(0x443+0x4dd+-0x124*0x8)?this['storageTex'+'tureFormat'+'s'][_0x77252f]:null;}['loseContex'+'t'](){}}class Kt{constructor(){h(this,'_cache',new Map());}['get'](_0x14bc6e,_0xd03aca){return this['_cache']['has'](_0x14bc6e)||(this['_cache']['set'](_0x14bc6e,_0xd03aca()),_0x14bc6e['on']('destroy',()=>{this['remove'](_0x14bc6e);}),_0x14bc6e['on']('devicelost',()=>{var _0x413e82,_0x46e238;(_0x46e238=(_0x413e82=this['_cache']['get'](_0x14bc6e))==null?void(0xe*-0x1b1+-0x11e4*-0x1+0x5ca):_0x413e82['loseContex'+'t'])==null||_0x46e238['call'](_0x413e82,_0x14bc6e);})),this['_cache']['get'](_0x14bc6e);}['remove'](_0xdd18ad){var _0x1e533e,_0x252af9;(_0x252af9=(_0x1e533e=this['_cache']['get'](_0xdd18ad))==null?void(-0xb59+0x2195+-0x163c):_0x1e533e['destroy'])==null||_0x252af9['call'](_0x1e533e,_0xdd18ad),this['_cache']['delete'](_0xdd18ad);}}class $i{static['calcLevelD'+'imension'](_0x2d5c98,_0x20cc2f){return Math['max'](_0x2d5c98>>_0x20cc2f,-0x57*0x59+-0x38*0x76+0x3810);}static['calcMipLev'+'elsCount'](_0x1b9607,_0x510716,_0x25cd89=-0x1*0x173f+-0x73d+0x1e7d){return 0x2*0x512+-0x52*0x6e+-0x1919*-0x1+Math['floor'](Math['log2'](Math['max'](_0x1b9607,_0x510716,_0x25cd89)));}static['calcLevelG'+'puSize'](_0x2b697a,_0x3f0989,_0x1ae9ac,_0xb8440){var _0x337083;const _0x29cb7f=Nt['get'](_0xb8440);w['assert'](_0x29cb7f!==void(0x1cf9+0x16b4*0x1+-0x33ad*0x1),'Invalid\x20pi'+'xel\x20format'+'\x20'+_0xb8440);const _0x1a206c=((_0x337083=Nt['get'](_0xb8440))==null?void(-0x1*-0x1f93+0xc7a+-0x2c0d):_0x337083['size'])??0x13df+0x113b*-0x2+-0x1*-0xe97;if(_0x1a206c>-0x1*-0x2056+-0x975*0x3+-0x3f7)return _0x2b697a*_0x3f0989*_0x1ae9ac*_0x1a206c;const _0x26f172=_0x29cb7f['blockSize']??0x2f*-0x5b+-0x1a39+0x2aee;let _0x202d08=Math['floor']((_0x2b697a+(0x1e9c+-0x150a+0x98f*-0x1))/(-0x22f7+-0x6da+0x29d5));const _0x50ceae=Math['floor']((_0x3f0989+(-0x6a1+0x4*-0x872+0x286c))/(0x2*-0x54b+-0xd5*-0x17+-0x1*0x889)),_0xa1109e=Math['floor']((_0x1ae9ac+(-0x437*0x3+0x6*-0x65d+0x6*0x879))/(-0xf69+0x138+0xe35*0x1));return(_0xb8440===ll||_0xb8440===cl)&&(_0x202d08=Math['max'](Math['floor'](_0x202d08/(-0x3*-0xcf2+0x3b3*-0x1+0x187*-0x17)),0x3c7*-0x5+-0x4c4*0x6+0x3f5*0xc)),_0x202d08*_0x50ceae*_0xa1109e*_0x26f172;}static['calcGpuSiz'+'e'](_0x42c05c,_0x20f1e1,_0x452202,_0x52f2c5,_0x15ce7c,_0x3d23db){let _0x1b1d87=0x4*0x1+0x11b7+-0x33*0x59;for(;_0x1b1d87+=$i['calcLevelG'+'puSize'](_0x42c05c,_0x20f1e1,_0x452202,_0x52f2c5),!(!_0x15ce7c||_0x42c05c===0x159+-0x1f*0xe5+0x1a63&&_0x20f1e1===0x13e6+-0x1*0x737+-0xcae&&_0x452202===-0xbff+0x1*0x49c+0x3b2*0x2);)_0x42c05c=Math['max'](_0x42c05c>>-0x1330+0x8*0x15b+0x859,-0x1b2d*-0x1+-0x501+-0x162b),_0x20f1e1=Math['max'](_0x20f1e1>>-0x18bd+-0x24*0xa9+0x3082,0x2*-0xd5d+0x23b1+-0x8f6),_0x452202=Math['max'](_0x452202>>0x213f*-0x1+-0x940+0x2a80,-0xc1b*0x3+0x1b0+0x22a2);return _0x1b1d87*(_0x3d23db?-0x1cb5+-0x5f6+0x22b1*0x1:-0x1e75+0x332*0x3+0x14e0);}}let Lx=0x23b7*0x1+0x3ae+-0x5*0x7e1;class _e{constructor(_0x1b2157,_0x8d4709={}){h(this,'name'),h(this,'_gpuSize',-0x2328+0xb*0x285+0xf*0x7f),h(this,'id',Lx++),h(this,'_invalid',!(0x1a6a+0x1b5c+-0x35c5)),h(this,'_lockedLev'+'el',-(-0x89*0x2f+-0x1*-0x1f01+0x5d9*-0x1)),h(this,'_lockedMod'+'e',Ll),h(this,'renderVers'+'ionDirty',0x1*0x124a+0xbef+-0x1e39),h(this,'_storage',!(0x13a0+0x1ab3+0x1*-0x2e52)),h(this,'_numLevels',0x12c3+0x7a5+-0x208*0xd),h(this,'_numLevels'+'Requested');var _0x5d0b1d;this['device']=_0x1b2157,w['assert'](this['device'],'Texture\x20co'+'nstructor\x20'+'requires\x20a'+'\x20graphicsD'+'evice\x20to\x20b'+'e\x20valid'),w['assert'](!_0x8d4709['width']||Number['isInteger'](_0x8d4709['width']),'Texture\x20wi'+'dth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x8d4709),w['assert'](!_0x8d4709['height']||Number['isInteger'](_0x8d4709['height']),'Texture\x20he'+'ight\x20must\x20'+'be\x20an\x20inte'+'ger\x20number'+',\x20got',_0x8d4709),w['assert'](!_0x8d4709['depth']||Number['isInteger'](_0x8d4709['depth']),'Texture\x20de'+'pth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x8d4709),this['name']=_0x8d4709['name']??'',this['_width']=Math['floor'](_0x8d4709['width']??-0x2c1+-0x1fa*-0x7+-0xb11),this['_height']=Math['floor'](_0x8d4709['height']??0x6a9+0x4*0x473+-0x1871),this['_format']=_0x8d4709['format']??Ne,this['_compresse'+'d']=Y0(this['_format']),this['_integerFo'+'rmat']=rn(this['_format']),this['_integerFo'+'rmat']&&(_0x8d4709['minFilter']=Te,_0x8d4709['magFilter']=Te),this['_volume']=_0x8d4709['volume']??!(-0x2dd*0x9+-0x12b5*-0x1+0x711),this['_depth']=Math['floor'](_0x8d4709['depth']??-0x4*0x507+0x5*-0x755+0xa9*0x56),this['_arrayLeng'+'th']=Math['floor'](_0x8d4709['arrayLengt'+'h']??0x71*-0x1f+-0x11a6+0x1f55),this['_storage']=_0x8d4709['storage']??!(0x1*-0xbcb+-0x2cb*0x9+0x24ef),this['_cubemap']=_0x8d4709['cubemap']??!(-0xa61*-0x1+-0x1d32+0x12d2),this['_flipY']=_0x8d4709['flipY']??!(0x14b1+0x25a9+0x3*-0x1373),this['_premultip'+'lyAlpha']=_0x8d4709['premultipl'+'yAlpha']??!(-0x9c7*-0x3+-0x3ee+-0x1966),this['_mipmaps']=_0x8d4709['mipmaps']??!(0x1*0x324+-0x164e+-0x132a*-0x1),this['_numLevels'+'Requested']=_0x8d4709['numLevels'],_0x8d4709['numLevels']!==void(-0x1bf0+-0x1736+-0x3326*-0x1)&&(this['_numLevels']=_0x8d4709['numLevels']),this['_updateNum'+'Level'](),this['_minFilter']=_0x8d4709['minFilter']??ha,this['_magFilter']=_0x8d4709['magFilter']??vt,this['_anisotrop'+'y']=_0x8d4709['anisotropy']??-0x2512+-0x12be+-0x21*-0x1b1,this['_addressU']=_0x8d4709['addressU']??yt,this['_addressV']=_0x8d4709['addressV']??yt,this['_addressW']=_0x8d4709['addressW']??yt,this['_compareOn'+'Read']=_0x8d4709['compareOnR'+'ead']??!(-0x17e2+-0x1*-0xc9b+-0x169*-0x8),this['_compareFu'+'nc']=_0x8d4709['compareFun'+'c']??Gc,this['_type']=_0x8d4709['type']??Ms,w['assert'](!_0x8d4709['hasOwnProp'+'erty']('rgbm'),'Use\x20option'+'s.type.'),w['assert'](!_0x8d4709['hasOwnProp'+'erty']('swizzleGGG'+'R'),'Use\x20option'+'s.type.'),this['projection']=ax,this['_cubemap']?this['projection']=Mf:_0x8d4709['projection']&&_0x8d4709['projection']!==Mf&&(this['projection']=_0x8d4709['projection']),this['profilerHi'+'nt']=_0x8d4709['profilerHi'+'nt']??0x1188+0xaf9*-0x1+-0x68f*0x1,this['_levels']=_0x8d4709['levels'];const _0x5254dd=!!_0x8d4709['levels'];this['_levels']||this['_clearLeve'+'ls'](),this['recreateIm'+'pl'](_0x5254dd),_0x1b2157['textures']['push'](this),w['trace'](sm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+'\x20['+((_0x5d0b1d=Nt['get'](this['format']))==null?void(0x1*0x234e+-0xed7+-0x193*0xd):_0x5d0b1d['name'])+']'+(this['cubemap']?'[Cubemap]':'')+(this['volume']?'[Volume]':'')+(this['array']?'[Array]':'')+('[MipLevels'+':')+this['numLevels']+']',this);}['destroy'](){w['trace'](sm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x2f30d2=this['device'];if(_0x2f30d2){const _0x3db2f3=_0x2f30d2['textures']['indexOf'](this);_0x3db2f3!==-(0x118a+0x26cf*0x1+-0x12c8*0x3)&&_0x2f30d2['textures']['splice'](_0x3db2f3,-0x1*-0x6f3+0x1fc6+0x54*-0x76),_0x2f30d2['scope']['removeValu'+'e'](this),this['impl']['destroy'](_0x2f30d2),this['adjustVram'+'SizeTracki'+'ng'](_0x2f30d2['_vram'],-this['_gpuSize']),this['_levels']=null,this['device']=null;}}['recreateIm'+'pl'](_0x37a1cb=!(0x923*-0x3+0xd42*0x1+0xe27)){var _0x20daa4;const {device:_0x1038d5}=this;(_0x20daa4=this['impl'])==null||_0x20daa4['destroy'](_0x1038d5),this['impl']=null,this['impl']=_0x1038d5['createText'+'ureImpl'](this),this['dirtyAll'](),_0x37a1cb&&this['upload']();}['_clearLeve'+'ls'](){this['_levels']=this['_cubemap']?[[null,null,null,null,null,null]]:[null];}['resize'](_0x1378f1,_0x4201dc,_0x2bb4fd=-0x9*-0x1fc+-0x49*0x61+0x9ce){const _0x4ce17e=this['device'];this['adjustVram'+'SizeTracki'+'ng'](_0x4ce17e['_vram'],-this['_gpuSize']),this['impl']['destroy'](_0x4ce17e),this['_clearLeve'+'ls'](),this['_width']=Math['floor'](_0x1378f1),this['_height']=Math['floor'](_0x4201dc),this['_depth']=Math['floor'](_0x2bb4fd),this['_updateNum'+'Level'](),this['impl']=_0x4ce17e['createText'+'ureImpl'](this),this['dirtyAll']();}['loseContex'+'t'](){this['impl']['loseContex'+'t'](),this['dirtyAll']();}['adjustVram'+'SizeTracki'+'ng'](_0x1a44cb,_0x89772a){w['trace'](h0,this['id']+'\x20'+this['name']+'\x20size:\x20'+_0x89772a+('\x20vram.text'+'ure:\x20')+_0x1a44cb['tex']+'\x20=>\x20'+(_0x1a44cb['tex']+_0x89772a)),_0x1a44cb['tex']+=_0x89772a,this['profilerHi'+'nt']===Pf?_0x1a44cb['texShadow']+=_0x89772a:this['profilerHi'+'nt']===Er?_0x1a44cb['texAsset']+=_0x89772a:this['profilerHi'+'nt']===US&&(_0x1a44cb['texLightma'+'p']+=_0x89772a);}['propertyCh'+'anged'](_0x22134d){this['impl']['propertyCh'+'anged'](_0x22134d),this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion'];}['_updateNum'+'Level'](){const _0x20983c=this['mipmaps']?$i['calcMipLev'+'elsCount'](this['width'],this['height']):-0x4*-0xb1+-0x1*0x69d+-0x3da*-0x1,_0x4d95c2=this['_numLevels'+'Requested'];_0x4d95c2!==void(-0x183d+-0x25*0x71+0x6*0x6c3)&&_0x4d95c2>_0x20983c&&w['warn']('Texture#nu'+'mLevels:\x20r'+'equested\x20m'+'ip\x20level\x20c'+'ount\x20is\x20gr'+'eater\x20than'+'\x20the\x20maxim'+'um\x20possibl'+'e,\x20will\x20be'+'\x20clamped\x20t'+'o',_0x20983c,this),this['_numLevels']=Math['min'](_0x4d95c2??_0x20983c,_0x20983c),this['_mipmaps']=this['_numLevels']>0x1e23+-0x1e9+-0x1c39;}get['lockedMode'](){return this['_lockedMod'+'e'];}set['minFilter'](_0x1037a3){this['_minFilter']!==_0x1037a3&&(rn(this['_format'])?w['warn']('Texture#mi'+'nFilter:\x20m'+'inFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_minFilter']=_0x1037a3,this['propertyCh'+'anged'](WS)));}get['minFilter'](){return this['_minFilter'];}set['magFilter'](_0x446e39){this['_magFilter']!==_0x446e39&&(rn(this['_format'])?w['warn']('Texture#ma'+'gFilter:\x20m'+'agFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_magFilter']=_0x446e39,this['propertyCh'+'anged']($S)));}get['magFilter'](){return this['_magFilter'];}set['addressU'](_0x7ba2cb){this['_addressU']!==_0x7ba2cb&&(this['_addressU']=_0x7ba2cb,this['propertyCh'+'anged'](XS));}get['addressU'](){return this['_addressU'];}set['addressV'](_0x211ae2){this['_addressV']!==_0x211ae2&&(this['_addressV']=_0x211ae2,this['propertyCh'+'anged'](qS));}get['addressV'](){return this['_addressV'];}set['addressW'](_0x40bfab){if(!this['_volume']){w['warn']('pc.Texture'+'#addressW:'+'\x20Can\x27t\x20set'+'\x20W\x20address'+'ing\x20mode\x20f'+'or\x20a\x20non-3'+'D\x20texture.');return;}_0x40bfab!==this['_addressW']&&(this['_addressW']=_0x40bfab,this['propertyCh'+'anged'](jS));}get['addressW'](){return this['_addressW'];}set['compareOnR'+'ead'](_0x7c524e){this['_compareOn'+'Read']!==_0x7c524e&&(this['_compareOn'+'Read']=_0x7c524e,this['propertyCh'+'anged'](YS));}get['compareOnR'+'ead'](){return this['_compareOn'+'Read'];}set['compareFun'+'c'](_0x4d39f8){this['_compareFu'+'nc']!==_0x4d39f8&&(this['_compareFu'+'nc']=_0x4d39f8,this['propertyCh'+'anged'](KS));}get['compareFun'+'c'](){return this['_compareFu'+'nc'];}set['anisotropy'](_0x1079a2){this['_anisotrop'+'y']!==_0x1079a2&&(this['_anisotrop'+'y']=_0x1079a2,this['propertyCh'+'anged'](ZS));}get['anisotropy'](){return this['_anisotrop'+'y'];}set['mipmaps'](_0x15ef68){this['_mipmaps']!==_0x15ef68&&(this['device']['isWebGPU']?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20is\x20curr'+'ently\x20not\x20'+'allowed\x20to'+'\x20be\x20change'+'d\x20on\x20WebGP'+'U,\x20create\x20'+'the\x20textur'+'e\x20appropri'+'ately.',this):rn(this['_format'])?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20cannot\x20'+'be\x20changed'+'\x20on\x20an\x20int'+'eger\x20textu'+'re,\x20will\x20r'+'emain\x20fals'+'e',this):this['_mipmaps']=_0x15ef68,_0x15ef68&&(this['_needsMipm'+'apsUpload']=!(-0x1a03*-0x1+0x13e+-0x1b41)));}get['mipmaps'](){return this['_mipmaps'];}get['numLevels'](){return this['_numLevels'];}get['storage'](){return this['_storage'];}get['width'](){return this['_width'];}get['height'](){return this['_height'];}get['depth'](){return this['_depth'];}get['format'](){return this['_format'];}get['cubemap'](){return this['_cubemap'];}get['gpuSize'](){const _0x184ff8=this['pot']&&this['_mipmaps']&&!(this['_compresse'+'d']&&this['_levels']['length']===-0xf59+0x25ce+-0x59d*0x4);return $i['calcGpuSiz'+'e'](this['_width'],this['_height'],this['_depth'],this['_format'],_0x184ff8,this['_cubemap']);}get['array'](){return this['_arrayLeng'+'th']>-0x443*-0x1+0x2*-0x60d+0x7d7;}get['arrayLengt'+'h'](){return this['_arrayLeng'+'th'];}get['volume'](){return this['_volume'];}set['type'](_0x593011){this['_type']!==_0x593011&&(this['_type']=_0x593011,this['device']['_shadersDi'+'rty']=!(-0x67*0xd+-0x1192+0x1c1*0xd));}get['type'](){return this['_type'];}set['srgb'](_0x5e7665){var _0x508866,_0x14a729,_0x216893,_0x41096e;const _0x12e3d4=Wc(this['format']);if(_0x5e7665!==_0x12e3d4){if(_0x5e7665){const _0x3935da=zh(this['format']);this['_format']!==_0x3935da&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20sRGB\x20'+'equivalent'+':\x20')+((_0x508866=Nt['get'](this['format']))==null?void(0x26d8+0x6*-0x1c6+-0x1c34):_0x508866['name'])+'\x20->\x20'+((_0x14a729=Nt['get'](_0x3935da))==null?void(-0x4ca+-0x2495+0x295f):_0x14a729['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x3935da,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(0x235c+0x9*-0xf+-0x1*0x22d5));}else{const _0x57794a=K0(this['format']);this['_format']!==_0x57794a&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20linea'+'r\x20equivale'+'nt:\x20')+((_0x216893=Nt['get'](this['format']))==null?void(-0x1d*-0x143+-0xe9+-0x1*0x23ae):_0x216893['name'])+'\x20->\x20'+((_0x41096e=Nt['get'](_0x57794a))==null?void(-0x3eb*0x2+0x1c47+-0x1471):_0x41096e['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x57794a,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x2*0x7f+0x985*-0x2+0x1408));}}}get['srgb'](){return Wc(this['format']);}set['flipY'](_0x187cea){this['_flipY']!==_0x187cea&&(this['_flipY']=_0x187cea,this['_needsUplo'+'ad']=!(0x1dec+0x29*0x7f+-0x3243));}get['flipY'](){return this['_flipY'];}set['premultipl'+'yAlpha'](_0x2ec745){this['_premultip'+'lyAlpha']!==_0x2ec745&&(this['_premultip'+'lyAlpha']=_0x2ec745,this['_needsUplo'+'ad']=!(0x291+0x1f95+0x2f*-0xba));}get['premultipl'+'yAlpha'](){return this['_premultip'+'lyAlpha'];}get['pot'](){return Y['powerOfTwo'](this['_width'])&&Y['powerOfTwo'](this['_height']);}get['encoding'](){switch(this['type']){case Ki:return'rgbm';case qc:return'rgbe';case Bo:return'rgbp';}return LS(this['format'])?'srgb':'linear';}['dirtyAll'](){this['_levelsUpd'+'ated']=this['_cubemap']?[[!(0x117d+0x23b1+-0x352e),!(0x22b0+0x329*0x3+-0x2c2b),!(-0x180d+-0x17e6+0x2ff3),!(0x16e0+0xf48+-0x2628),!(0x1e71*-0x1+0x1*0x253d+-0x6cc),!(0x20c0+-0xb7f+-0x1541)]]:[!(-0xaf3+-0x4*0xef+0xeaf)],this['_needsUplo'+'ad']=!(0x1c6d+0xccb*-0x1+-0xfa2),this['_needsMipm'+'apsUpload']=this['_mipmaps'],this['_mipmapsUp'+'loaded']=!(0xac3+0x937*0x2+-0x1d30),this['propertyCh'+'anged'](Ax);}['lock'](_0x3bcaf1={}){_0x3bcaf1['level']??(_0x3bcaf1['level']=-0x11d2+-0x4*-0x443+0xc6),_0x3bcaf1['face']??(_0x3bcaf1['face']=-0x483*0x3+-0x231+0xfba*0x1),_0x3bcaf1['mode']??(_0x3bcaf1['mode']=fd),w['assert'](this['_lockedMod'+'e']===Ll,'The\x20textur'+'e\x20is\x20alrea'+'dy\x20locked.'+'\x20Call\x20`tex'+'ture.unloc'+'k()`\x20befor'+'e\x20attempti'+'ng\x20to\x20lock'+'\x20again.',this),w['assert'](_0x3bcaf1['mode']===kS||_0x3bcaf1['mode']===fd,'Cannot\x20loc'+'k\x20a\x20textur'+'e\x20with\x20TEX'+'TURELOCK_N'+'ONE.\x20To\x20un'+'lock\x20a\x20tex'+'ture,\x20call'+'\x20`texture.'+'unlock()`.',this),this['_lockedMod'+'e']=_0x3bcaf1['mode'],this['_lockedLev'+'el']=_0x3bcaf1['level'];const _0x3759a7=this['cubemap']?this['_levels'][_0x3bcaf1['face']]:this['_levels'];if((_0x3759a7==null?void(-0x2452+-0xf2*-0x4+0x208a):_0x3759a7[_0x3bcaf1['level']])===null){const _0x29febc=Math['max'](0x454+0x1daa+-0x21fd,this['_width']>>_0x3bcaf1['level']),_0x565b64=Math['max'](0xe*0x28d+0x18e6+-0x217*0x1d,this['_height']>>_0x3bcaf1['level']),_0x140e21=Math['max'](0xa*0x34f+-0x1*0xd8a+-0x138b*0x1,this['_depth']>>_0x3bcaf1['level']),_0x10a143=new ArrayBuffer($i['calcLevelG'+'puSize'](_0x29febc,_0x565b64,_0x140e21,this['_format']));_0x3759a7[_0x3bcaf1['level']]=new(RS(this['_format']))(_0x10a143);}return _0x3759a7==null?void(0x1e4f+0xf86*0x1+-0x2dd5):_0x3759a7[_0x3bcaf1['level']];}['setSource'](_0x3e5aa2,_0x4f9e24=0xa9f+-0x2082+0x15e3){let _0x1280a9=!(-0x2337+-0x189f+0x1*0x3bd7),_0x4b1cab,_0x5eecd5;if(this['_cubemap']){if(_0x3e5aa2[-0x2*-0x63b+0x55*0x4f+-0x26b1]){_0x4b1cab=_0x3e5aa2[0x2*-0x105d+-0x2fb+0x1*0x23b5]['width']||-0x27d+-0x952*0x1+0xbcf*0x1,_0x5eecd5=_0x3e5aa2[-0x10df+-0x177a+-0x3ab*-0xb]['height']||0x56*0x3+-0x100c+0xf0a;for(let _0x46d80=0x1930+-0x1666*-0x1+-0x2f96;_0x46d80<0x23d8+-0xaab+0x89*-0x2f;_0x46d80++){const _0x4904c7=_0x3e5aa2[_0x46d80];if(!_0x4904c7||_0x4904c7['width']!==_0x4b1cab||_0x4904c7['height']!==_0x5eecd5||!this['device']['_isBrowser'+'Interface'](_0x4904c7)){_0x1280a9=!(-0x24*0x3a+-0x2429+0x2c51);break;}}}else _0x1280a9=!(-0x1*0x487+0x20b6+-0x1c2f);if(!_0x1280a9){for(let _0x5833a2=0x28d*-0x9+-0x2*0x56b+0xd3*0x29;_0x5833a2<-0x3c7*0x7+0xf47+0xb30;_0x5833a2++)this['_levels'][_0x4f9e24][_0x5833a2]!==_0x3e5aa2[_0x5833a2]&&(this['_levelsUpd'+'ated'][_0x4f9e24][_0x5833a2]=!(-0x627*-0x6+0x22ea+0x23ea*-0x2));}}else this['device']['_isBrowser'+'Interface'](_0x3e5aa2)||(_0x1280a9=!(0xd53+0xc*-0x167+0x381)),_0x1280a9||(_0x3e5aa2!==this['_levels'][_0x4f9e24]&&(this['_levelsUpd'+'ated'][_0x4f9e24]=!(0x7ad+0x239f+-0x2b4c)),_0x3e5aa2 instanceof HTMLVideoElement?(_0x4b1cab=_0x3e5aa2['videoWidth'],_0x5eecd5=_0x3e5aa2['videoHeigh'+'t']):(_0x4b1cab=_0x3e5aa2['width'],_0x5eecd5=_0x3e5aa2['height']));if(_0x1280a9){if(this['_width']=0xef7+0x2a*-0x1d+-0xa31,this['_height']=0x21f1*0x1+-0x286*0x3+-0x1a5b,this['_cubemap']){for(let _0x14efcc=-0xa*0x33f+0x179f+0x1f*0x49;_0x14efcc<0x873+0x1*-0x152a+-0x43f*-0x3;_0x14efcc++)this['_levels'][_0x4f9e24][_0x14efcc]=null,this['_levelsUpd'+'ated'][_0x4f9e24][_0x14efcc]=!(0x18f0+-0x283*0x3+-0x1167);}else this['_levels'][_0x4f9e24]=null,this['_levelsUpd'+'ated'][_0x4f9e24]=!(-0x623*-0x1+-0x223e+-0x1c1b*-0x1);}else _0x4f9e24===0x3*0x31d+0x2402+0x37d*-0xd&&(this['_width']=_0x4b1cab,this['_height']=_0x5eecd5),this['_levels'][_0x4f9e24]=_0x3e5aa2;(this['_invalid']!==_0x1280a9||!_0x1280a9)&&(this['_invalid']=_0x1280a9,this['upload']());}['getSource'](_0x3518e0=0x8*0x187+-0xe67+-0x22f*-0x1){return this['_levels'][_0x3518e0];}['unlock'](){this['_lockedMod'+'e']===Ll&&w['warn']('pc.Texture'+'#unlock:\x20A'+'ttempting\x20'+'to\x20unlock\x20'+'a\x20texture\x20'+'that\x20is\x20no'+'t\x20locked.',this),this['_lockedMod'+'e']===fd&&this['upload'](),this['_lockedLev'+'el']=-(0x1*0x1db1+-0x5*-0x14f+-0x243b*0x1),this['_lockedMod'+'e']=Ll;}['upload'](){var _0x4a216f,_0x231118;this['_needsUplo'+'ad']=!(0x2f7*-0x2+-0x35*-0x3b+-0x649),this['_needsMipm'+'apsUpload']=this['_mipmaps'],(_0x231118=(_0x4a216f=this['impl'])['uploadImme'+'diate'])==null||_0x231118['call'](_0x4a216f,this['device'],this);}['read'](_0x2fcb17,_0x452f16,_0x3dae49,_0x3d030f,_0x4c45cc={}){var _0x419415,_0x261870;return(_0x261870=(_0x419415=this['impl'])['read'])==null?void(-0x2665*0x1+-0xfcb+0x3630):_0x261870['call'](_0x419415,_0x2fcb17,_0x452f16,_0x3dae49,_0x3d030f,_0x4c45cc);}['write'](_0x18a2c0,_0x353a97,_0x543db1,_0x3b8a57,_0x27a784){var _0x3f4c8c,_0x155deb;return(_0x155deb=(_0x3f4c8c=this['impl'])['write'])==null?void(-0x214a+0x712+0x4*0x68e):_0x155deb['call'](_0x3f4c8c,_0x18a2c0,_0x353a97,_0x543db1,_0x3b8a57,_0x27a784);}}const Rx={'white':[0xb5d*0x1+-0xdc5+0x367*0x1,0x23ff+0x1185+-0x3485,0x18f4+0x1dae+0x255*-0x17,0xd50+0x3*0x492+-0x1a07],'gray':[-0x3a9*-0x1+-0x2574+-0x1*-0x224b,-0x1fc3*-0x1+0xc9d+-0x2be0,-0x1f90+0x3e4+0x1c2c,-0x2317+0x48*-0x4c+0x3976],'black':[0x1755+-0x8*-0x3bf+-0x354d,0x1848+-0x13f0+0x2*-0x22c,0x20*-0x135+0x43*-0x13+0x2b99*0x1,-0xd*0x7d+-0xb9*0x7+-0x19*-0x7f],'normal':[-0xb0b*-0x3+0x1*0x17eb+-0x149*0x2c,-0x35b*-0xb+0x8d1+-0x2d3a,0x705*0x5+-0x2407+0x1ed,-0x2*-0x613+-0xf7e+0x457],'pink':[-0x127f*0x1+-0xcfd+0x5*0x67f,-0xd12+0x17d3+-0x177*0x7,0xccc+-0x16e6+0xb19,0x10*0x157+0x5*0x571+0x3*-0xfe2]};class Ox{constructor(){h(this,'map',new Map());}['destroy'](){this['map']['forEach'](_0x49eb04=>{_0x49eb04['destroy']();});}}const Fx=new Kt(),oa=(_0x1cfa99,_0x67b7d7)=>{const _0x1c0f18=Fx['get'](_0x1cfa99,()=>new Ox());if(!_0x1c0f18['map']['has'](_0x67b7d7)){const _0x55bf43=new _e(_0x1cfa99,{'name':'built-in-t'+'exture-'+_0x67b7d7,'width':0x1,'height':0x1,'format':Ne}),_0x1118d6=_0x55bf43['lock'](),_0x38815f=Rx[_0x67b7d7];w['assert'](_0x38815f,'Data\x20for\x20b'+'uilt-in\x20te'+'xture\x20\x27'+_0x67b7d7+('\x27\x20not\x20foun'+'d')),_0x1118d6['set'](_0x38815f),_0x55bf43['unlock'](),_0x1c0f18['map']['set'](_0x67b7d7,_0x55bf43);}return _0x1c0f18['map']['get'](_0x67b7d7);};let Nx=-0x15b3+0x26d+0x1346;class ty{constructor(){h(this,'bindGroup'),h(this,'offsets',[]);}}class dp{constructor(_0x43fdd4,_0x1eab73,_0x42ca9b){h(this,'renderVers'+'ionUpdated',-(-0x1aab+-0xe3*-0x5+0x163d)),h(this,'uniformBuf'+'fers'),h(this,'uniformBuf'+'ferOffsets',[]),(this['id']=Nx++,this['device']=_0x43fdd4,this['format']=_0x1eab73,this['dirty']=!(0x1c1*0x9+-0x418+-0xbb1),this['impl']=_0x43fdd4['createBind'+'GroupImpl'](this),this['textures']=[],this['storageTex'+'tures']=[],this['storageBuf'+'fers']=[],this['uniformBuf'+'fers']=[],this['defaultUni'+'formBuffer']=_0x42ca9b,_0x42ca9b&&this['setUniform'+'Buffer'](cp,_0x42ca9b),w['trace'](u0,'Alloc:\x20Id\x20'+this['id'],this,_0x1eab73));}['destroy'](){this['impl']['destroy'](),this['impl']=null,this['format']=null,this['defaultUni'+'formBuffer']=null;}['setUniform'+'Buffer'](_0xb0d7fe,_0x2cb130){const _0x2e65e7=this['format']['bufferForm'+'atsMap']['get'](_0xb0d7fe);w['assert'](_0x2e65e7!==void(-0x1729*0x1+-0x33a+0x1a63),'Setting\x20a\x20'+'uniform\x20['+_0xb0d7fe+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['uniformBuf'+'fers'][_0x2e65e7]!==_0x2cb130&&(this['uniformBuf'+'fers'][_0x2e65e7]=_0x2cb130,this['dirty']=!(0x26d5*0x1+0x106+-0x27db));}['setStorage'+'Buffer'](_0x1c80b2,_0x12595e){const _0x40cbbd=this['format']['storageBuf'+'ferFormats'+'Map']['get'](_0x1c80b2);w['assert'](_0x40cbbd!==void(0x1f20+-0x232f+-0x40f*-0x1),'Setting\x20a\x20'+'storage\x20bu'+'ffer\x20['+_0x1c80b2+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageBuf'+'fers'][_0x40cbbd]!==_0x12595e&&(this['storageBuf'+'fers'][_0x40cbbd]=_0x12595e,this['dirty']=!(0x1af0+0x1c66*0x1+0x9*-0x626));}['setTexture'](_0x1f554c,_0x27a535){const _0x2859d1=this['format']['textureFor'+'matsMap']['get'](_0x1f554c);w['assert'](_0x2859d1!==void(0x4*-0x3d1+0xb43+-0x401*-0x1),'Setting\x20a\x20'+'texture\x20['+_0x1f554c+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['textures'][_0x2859d1]!==_0x27a535?(this['textures'][_0x2859d1]=_0x27a535,this['dirty']=!(-0x964+0x3e5*-0x1+0xd49)):this['renderVers'+'ionUpdated']<_0x27a535['renderVers'+'ionDirty']&&(this['dirty']=!(-0x158+0xb8c+-0xa34*0x1));}['setStorage'+'Texture'](_0x4b8227,_0x52f5ef){const _0x1e1497=this['format']['storageTex'+'tureFormat'+'sMap']['get'](_0x4b8227);w['assert'](_0x1e1497!==void(-0xaed*0x2+-0x205+0x369*0x7),'Setting\x20a\x20'+'storage\x20te'+'xture\x20['+_0x4b8227+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageTex'+'tures'][_0x1e1497]!==_0x52f5ef?(this['storageTex'+'tures'][_0x1e1497]=_0x52f5ef,this['dirty']=!(0x1*-0x4d9+-0x1930*-0x1+-0x1457)):this['renderVers'+'ionUpdated']<_0x52f5ef['renderVers'+'ionDirty']&&(this['dirty']=!(-0x4e0+0xa3c+0x157*-0x4));}['updateUnif'+'ormBuffers'](){for(let _0xe188ad=0x1*-0x1d23+-0x7f3+0x128b*0x2;_0xe188ad<this['uniformBuf'+'fers']['length'];_0xe188ad++)this['uniformBuf'+'fers'][_0xe188ad]['update']();}['update'](){const {textureFormats:_0x481744,storageTextureFormats:_0x13f90b,storageBufferFormats:_0x43d6b5}=this['format'];for(let _0x5d7ac3=0x1f*-0x1f+-0x452+0x813;_0x5d7ac3<_0x481744['length'];_0x5d7ac3++){const _0x103029=_0x481744[_0x5d7ac3];let _0x252080=_0x103029['scopeId']['value'];_0x252080||(_0x103029['name']==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x252080=oa(this['device'],'white')),_0x103029['name']==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x252080=oa(this['device'],'pink')),_0x252080||(w['errorOnce']('Texture\x20'+_0x103029['name']+('\x20is\x20requir'+'ed\x20for\x20ren'+'dering\x20but'+'\x20was\x20not\x20s'+'et.\x20Render'+'ing\x20[')+Q['toString']()+']'),_0x252080=oa(this['device'],'pink'))),this['setTexture'](_0x103029['name'],_0x252080);}for(let _0x53bf77=0x1*-0x1c45+0x1b5*0x6+0x1207;_0x53bf77<_0x13f90b['length'];_0x53bf77++){const _0x47e0b8=_0x13f90b[_0x53bf77],_0x4952cb=_0x47e0b8['scopeId']['value'];w['assert'](_0x4952cb,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20texture\x20s'+'lot\x20['+_0x47e0b8['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Texture'](_0x47e0b8['name'],_0x4952cb);}for(let _0x3f816a=0x165e*0x1+-0x3*0x4ee+-0x794;_0x3f816a<_0x43d6b5['length'];_0x3f816a++){const _0x2965ea=_0x43d6b5[_0x3f816a],_0x4fb1a2=_0x2965ea['scopeId']['value'];w['assert'](_0x4fb1a2,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20buffer\x20sl'+'ot\x20['+_0x2965ea['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Buffer'](_0x2965ea['name'],_0x4fb1a2);}this['uniformBuf'+'ferOffsets']['length']=this['uniformBuf'+'fers']['length'];for(let _0x2cf5bc=0x116*0x9+-0x3bc+-0x60a;_0x2cf5bc<this['uniformBuf'+'fers']['length'];_0x2cf5bc++){const _0x5836cd=this['uniformBuf'+'fers'][_0x2cf5bc];this['uniformBuf'+'ferOffsets'][_0x2cf5bc]=_0x5836cd['offset'],this['renderVers'+'ionUpdated']<_0x5836cd['renderVers'+'ionDirty']&&(this['dirty']=!(-0xd2*0x2b+0x1*-0x138f+0x36d5));}this['dirty']&&(this['dirty']=!(-0x165f+-0xe60+0x24c0),this['renderVers'+'ionUpdated']=this['device']['renderVers'+'ion'],this['impl']['update'](this));}}const qe={'set'(_0x48ca89,_0x4ede8f,_0x588a9f,_0x2b83ea=0x1c85+0x1864+-0x34e8){return _0x48ca89&~(_0x2b83ea<<_0x588a9f)|_0x4ede8f<<_0x588a9f;},'get'(_0x1979bc,_0x54a38e,_0x2d917f=-0x1c26+0x2098+-0x471){return _0x1979bc>>_0x54a38e&_0x2d917f;},'all'(_0x39159d,_0x569cf3,_0x4a0cdf=0x2*-0x77d+0x25*-0x19+0x28*0x77){const _0x17f572=_0x4a0cdf<<_0x569cf3;return(_0x39159d&_0x17f572)===_0x17f572;},'any'(_0x19095c,_0x5c0d37,_0x5111b2=0x9f8+0x50f*-0x1+-0x4e8){return(_0x19095c&_0x5111b2<<_0x5c0d37)!==0x1ccf*-0x1+-0x1*0x1b1a+-0x1*-0x37e9;}},Rl=0x1*0x9e5+-0x71*0x2a+0x8ac,sr=-0x189f+-0x1274+0x2b22,mm=-0x5*-0x2b7+-0x6*0x42c+-0x7*-0x1a3,_m=-0x125b*0x1+-0xe6d+-0x49*-0x73,gm=0x38e+-0xc38+0x8b1,Sm=-0x1*0x2ab+0x126e+0x8*-0x1f7,ym=0x29*0x6d+0x23ff*0x1+-0x3566,vm=0x10*-0x21f+0x4bb+0x1d47,If=0x124*0xb+-0x1*-0x20be+-0x2d34,xm=0x1d*0x27+-0x1*-0x1862+0x20d*-0xe,Tm=0x19ba+0x182c+0xa*-0x4fb,wm=-0x21e2*0x1+-0x1005+0x10*0x320,Em=-0x15a7+-0xa3*-0x13+0x9a8,kx=0x190e+0xf26+-0x2825,Ux=If,ri=class ri{constructor(_0x4b9b5e=!(-0x1dd4+0x1c9f+0x136),_0x54f497=fs,_0x5bffc5=Ft,_0x14ab86=Iu,_0x581e9a,_0x5dc9cc,_0x219358,_0xc87926=!(0xc74+-0x1ee2+0x126e),_0x2dafd7=!(0xb*0x15d+0x805*-0x1+-0x2*0x37d),_0x25ffdc=!(-0x1*0x1c27+-0x1994+0x35bb*0x1),_0x34b237=!(0x2*-0xc5e+-0x2624+0x2*0x1f70)){h(this,'target0',-0x2267+0x1*-0xaf9+0x2d60),(this['setColorBl'+'end'](_0x54f497,_0x5bffc5,_0x14ab86),this['setAlphaBl'+'end'](_0x581e9a??_0x54f497,_0x5dc9cc??_0x5bffc5,_0x219358??_0x14ab86),this['setColorWr'+'ite'](_0xc87926,_0x2dafd7,_0x25ffdc,_0x34b237),this['blend']=_0x4b9b5e);}set['blend'](_0x54f4da){this['target0']=qe['set'](this['target0'],_0x54f4da?0x2604+-0x14a9+-0x115a:-0x61e*0x1+0x991*-0x1+0xfaf,Em);}get['blend'](){return qe['all'](this['target0'],Em);}['setColorBl'+'end'](_0x19dc83,_0x27b145,_0x11e5aa){this['target0']=qe['set'](this['target0'],_0x19dc83,mm,Rl),this['target0']=qe['set'](this['target0'],_0x27b145,_m,sr),this['target0']=qe['set'](this['target0'],_0x11e5aa,gm,sr);}['setAlphaBl'+'end'](_0xf2d359,_0x11f241,_0xac3fb2){this['target0']=qe['set'](this['target0'],_0xf2d359,Sm,Rl),this['target0']=qe['set'](this['target0'],_0x11f241,ym,sr),this['target0']=qe['set'](this['target0'],_0xac3fb2,vm,sr);}['setColorWr'+'ite'](_0xf792cb,_0x154dfa,_0x2effd1,_0x518f8d){this['redWrite']=_0xf792cb,this['greenWrite']=_0x154dfa,this['blueWrite']=_0x2effd1,this['alphaWrite']=_0x518f8d;}get['colorOp'](){return qe['get'](this['target0'],mm,Rl);}get['colorSrcFa'+'ctor'](){return qe['get'](this['target0'],_m,sr);}get['colorDstFa'+'ctor'](){return qe['get'](this['target0'],gm,sr);}get['alphaOp'](){return qe['get'](this['target0'],Sm,Rl);}get['alphaSrcFa'+'ctor'](){return qe['get'](this['target0'],ym,sr);}get['alphaDstFa'+'ctor'](){return qe['get'](this['target0'],vm,sr);}set['redWrite'](_0x3f94d9){this['target0']=qe['set'](this['target0'],_0x3f94d9?0xe89+0x1bd7+0x2a5f*-0x1:0x121*-0x19+-0x1*0xa85+0x26be,If);}get['redWrite'](){return qe['all'](this['target0'],If);}set['greenWrite'](_0x555d59){this['target0']=qe['set'](this['target0'],_0x555d59?0x2212+-0x19d3+-0x1*0x83e:-0xc05+-0x28*-0x73+-0x5f3*0x1,xm);}get['greenWrite'](){return qe['all'](this['target0'],xm);}set['blueWrite'](_0x5955c4){this['target0']=qe['set'](this['target0'],_0x5955c4?-0x2090+0x2324+-0x293*0x1:-0x45+0x1975+-0x1930,Tm);}get['blueWrite'](){return qe['all'](this['target0'],Tm);}set['alphaWrite'](_0x153203){this['target0']=qe['set'](this['target0'],_0x153203?-0x1a74+0x91*-0x1a+0x292f:0x7f*-0x43+0x2049+-0x1*-0xf4,wm);}get['alphaWrite'](){return qe['all'](this['target0'],wm);}get['allWrite'](){return qe['get'](this['target0'],Ux,kx);}['copy'](_0x2b0f64){return this['target0']=_0x2b0f64['target0'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}get['key'](){return this['target0'];}['equals'](_0x19b71){return this['target0']===_0x19b71['target0'];}};h(ri,'NOBLEND',Object['freeze'](new ri())),h(ri,'NOWRITE',Object['freeze'](new ri(void(-0x5*-0xe6+0xe*0x1ab+-0x1*0x1bd8),void(0xf62+-0x1600+0x69e),void(0x3*-0x655+0x657*0x5+0x4*-0x32d),void(-0x1831*0x1+-0x8*-0x104+0x1011),void(-0xd01*0x1+0x1f54*0x1+-0x1*0x1253),void(-0x1*-0xf29+-0x6*0x4c7+0xd81),void(-0x1*0x10bf+-0x61*-0x2b+0x74),!(0x60b*0x1+-0x1894+0x2a*0x71),!(0x33*-0x6d+0xe4c+0x76c),!(-0x1d9+0x1*0x18f9+-0x171f),!(-0x1b4*-0x16+0xc71+-0x18f4*0x2)))),h(ri,'ALPHABLEND',Object['freeze'](new ri(!(0xdc7*-0x2+0xdb5+-0xdd9*-0x1),fs,Ah,Ch))),h(ri,'ADDBLEND',Object['freeze'](new ri(!(-0x29*-0x8f+0x842+-0x1f29),fs,Ft,Ft)));let pt=ri;class fp{constructor(){h(this,'map',new Map()),h(this,'id',-0x8b*-0xb+-0x17d1+0x8*0x23b);}['get'](_0x51c858){let _0x8710f3=this['map']['get'](_0x51c858);return _0x8710f3===void(-0x22b6+-0x2b*-0x61+0x126b)&&(_0x8710f3=this['id']++,this['map']['set'](_0x51c858,_0x8710f3)),_0x8710f3;}}const Bx=new fp(),bm=0xd8d+-0x210+-0xb76,Am=0x3*-0x841+0x1d4d*-0x1+0x361*0x10,Cm=0x1b3f+0x3*-0x801+0x5*-0xa5,fr=class fr{constructor(_0x521fde=Sf,_0x17db10=!(-0x2fb*0x3+0x150f+0xb*-0x11a)){h(this,'data',0x13e7+-0xa27*-0x3+0x192e*-0x2),h(this,'_depthBias',0xe*0x15b+0x1903+-0x2bfd),h(this,'_depthBias'+'Slope',0x1cf*0xc+0x1303*0x2+0x6e*-0x8b),h(this,'key',0x17*0x55+-0x2*-0x7d3+-0x1749),(this['func']=_0x521fde,this['write']=_0x17db10);}set['test'](_0x1fd304){this['func']=_0x1fd304?Sf:Hi,this['updateKey']();}get['test'](){return this['func']!==Hi;}set['write'](_0x34c75f){this['data']=qe['set'](this['data'],_0x34c75f?0x1*0x15db+0x485*-0x7+0x9c9:0xb*-0x24a+-0x6f1+0x201f,Cm),this['updateKey']();}get['write'](){return qe['all'](this['data'],Cm);}set['func'](_0xf93370){this['data']=qe['set'](this['data'],_0xf93370,Am,bm),this['updateKey']();}get['func'](){return qe['get'](this['data'],Am,bm);}set['depthBias'](_0x55e2d6){this['_depthBias']=_0x55e2d6,this['updateKey']();}get['depthBias'](){return this['_depthBias'];}set['depthBiasS'+'lope'](_0x2fd516){this['_depthBias'+'Slope']=_0x2fd516,this['updateKey']();}get['depthBiasS'+'lope'](){return this['_depthBias'+'Slope'];}['copy'](_0x7ee015){return this['data']=_0x7ee015['data'],this['_depthBias']=_0x7ee015['_depthBias'],this['_depthBias'+'Slope']=_0x7ee015['_depthBias'+'Slope'],this['key']=_0x7ee015['key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['updateKey'](){const {data:_0x2db4b2,_depthBias:_0x40b1d2,_depthBiasSlope:_0x2f28e2}=this,_0x35cac8=_0x2db4b2+'-'+_0x40b1d2+'-'+_0x2f28e2;this['key']=Bx['get'](_0x35cac8);}['equals'](_0x3e31ea){return this['key']===_0x3e31ea['key'];}};h(fr,'DEFAULT',Object['freeze'](new fr())),h(fr,'NODEPTH',Object['freeze'](new fr(Hi,!(-0x14*-0x4a+0x24ab+-0x3*0xe26)))),h(fr,'WRITEDEPTH',Object['freeze'](new fr(Hi,!(0x6fb*0x1+0x311+0x1*-0xa0c))));let Yt=fr;class sy{constructor(){h(this,'globalId',-0xf*0x27+0x7*-0x47f+0x10e1*0x2),h(this,'revision',0x1eb8+-0xc3d*0x3+-0x5ff*-0x1);}['equals'](_0xe76c1e){return this['globalId']===_0xe76c1e['globalId']&&this['revision']===_0xe76c1e['revision'];}['copy'](_0x12500c){this['globalId']=_0x12500c['globalId'],this['revision']=_0x12500c['revision'];}['reset'](){this['globalId']=-0x2*0xca4+-0x23ae+0x3cf6,this['revision']=0x26fd+0x252c+-0x1*0x4c29;}}let Pm=-0x22d2+0x80+0x2252;class zx{constructor(){Pm++,this['version']=new sy(),this['version']['globalId']=Pm;}['increment'](){this['version']['revision']++;}}class Vx{constructor(_0x5b1a1a){this['name']=_0x5b1a1a,this['value']=null,this['versionObj'+'ect']=new zx();}['toJSON'](_0x33bd5f){}['setValue'](_0x39120a){this['value']=_0x39120a,this['versionObj'+'ect']['increment']();}['getValue'](){return this['value'];}}class Gx{constructor(_0x4cd9ac){this['name']=_0x4cd9ac,this['variables']=new Map();}['resolve'](_0x25f5c9){return this['variables']['has'](_0x25f5c9)||this['variables']['set'](_0x25f5c9,new Vx(_0x25f5c9)),this['variables']['get'](_0x25f5c9);}['removeValu'+'e'](_0xf4d1d){for(const _0x40312c in this['variables']){const _0x1a3f0a=this['variables'][_0x40312c];_0x1a3f0a['value']===_0xf4d1d&&(_0x1a3f0a['value']=null);}}}let Hx=0x764+-0x1*0x1f18+0x17b4;class Ds{constructor(_0x595bb0,_0x7f638,_0x25c44d,_0xed4286){h(this,'usage',ms),(w['assert'](arguments['length']<=-0x2d9+0x2*0xba2+-0x1467&&(!_0xed4286||typeof _0xed4286=='object'),'incorrect\x20'+'arguments'),this['usage']=(_0xed4286==null?void(-0x196c+-0x238a+-0x66*-0x99):_0xed4286['usage'])??ms,this['device']=_0x595bb0,this['format']=_0x7f638,this['numVertice'+'s']=_0x25c44d,this['id']=Hx++,this['impl']=_0x595bb0['createVert'+'exBufferIm'+'pl'](this,_0x7f638,_0xed4286),this['numBytes']=_0x7f638['verticesBy'+'teSize']?_0x7f638['verticesBy'+'teSize']:_0x7f638['size']*_0x25c44d,this['adjustVram'+'SizeTracki'+'ng'](_0x595bb0['_vram'],this['numBytes']));const _0x17832d=_0xed4286==null?void(-0x24b4+-0x1821+-0x3*-0x1447):_0xed4286['data'];_0x17832d?this['setData'](_0x17832d):this['storage']=new ArrayBuffer(this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x2c781a=this['device'],_0x3a02bf=_0x2c781a['buffers']['indexOf'](this);_0x3a02bf!==-(-0x2c0+-0x1f01*-0x1+-0x1c40)&&_0x2c781a['buffers']['splice'](_0x3a02bf,0x1608+-0xa0d+-0xbfa),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x2c781a),this['adjustVram'+'SizeTracki'+'ng'](_0x2c781a['_vram'],-this['storage']['byteLength'])),this['storage']=null;}['adjustVram'+'SizeTracki'+'ng'](_0x2560c0,_0x197fcd){w['trace'](d0,this['id']+'\x20size:\x20'+_0x197fcd+'\x20vram.vb:\x20'+_0x2560c0['vb']+'\x20=>\x20'+(_0x2560c0['vb']+_0x197fcd)),_0x2560c0['vb']+=_0x197fcd;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getUsage'](){return this['usage'];}['getNumVert'+'ices'](){return this['numVertice'+'s'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x183b6c){return _0x183b6c['byteLength']!==this['numBytes']?(w['error']('VertexBuff'+'er:\x20wrong\x20'+'initial\x20da'+'ta\x20size:\x20e'+'xpected\x20'+this['numBytes']+',\x20got\x20'+_0x183b6c['byteLength']),!(-0xd*0x22+-0xd*0x7c+0x89*0xf)):(this['storage']=_0x183b6c,this['unlock'](),!(-0x1f*-0x61+0x243*-0xd+0x11a8));}}function hi(_0x1b4e88){if(_0x1b4e88==null)return-0x18b9+0xe32+0xa87;let _0x3b3c92=-0xa56+0x9d*-0x1+0xaf3;for(let _0x22e5f2=0xc9b+0x114a+-0x1de5,_0x194efb=_0x1b4e88['length'];_0x22e5f2<_0x194efb;_0x22e5f2++)_0x3b3c92=(_0x3b3c92<<-0x1db5*0x1+-0x1*-0x2588+0x14d*-0x6)-_0x3b3c92+_0x1b4e88['charCodeAt'](_0x22e5f2),_0x3b3c92|=-0x97*-0x1d+0x8e*-0x5+-0xe55;return _0x3b3c92;}function iy(_0x654bee){let _0x164855=0x38e1*-0x2ddb4+-0xaf*0x10f7325+0x1ddb08f44;for(let _0x2811c0=-0x25b8+-0x5*-0x3b2+-0x335*-0x6;_0x2811c0<_0x654bee['length'];_0x2811c0++)_0x164855^=_0x654bee[_0x2811c0],_0x164855*=-0xb39a45*-0x1+0x1bdf227+-0x427*0x58ff;return _0x164855>>>-0x8df+-0xf68*0x1+0x1847;}const Wx=new fp(),$x=[0x1be*0xa+0x1663*-0x1+0x4f9,-0x888+0x207*0x3+0x277*0x1,-0xa85*0x2+-0x388*-0x4+0x6f2,0xb*-0x34d+0x1*-0x1337+0x1*0x3792,-0x8*0x425+0x61*-0x4c+-0x93*-0x6c],Xx=new Kt();class kt{constructor(_0x3a09ee,_0x7dd48b,_0x55a734){this['device']=_0x3a09ee,this['_elements']=[],this['hasUv0']=!(0x2693+-0x139*-0x12+-0x3c94),this['hasUv1']=!(0x5f8+-0x2255+0x1c5e),this['hasColor']=!(-0x2*-0x4f3+-0x2087*0x1+0xb51*0x2),this['hasTangent'+'s']=!(0x974+-0x75f*-0x5+0x2e4e*-0x1),this['verticesBy'+'teSize']=-0x7*-0x9+0x8*-0xdb+-0x1*-0x699,this['vertexCoun'+'t']=_0x55a734,this['interleave'+'d']=_0x55a734===void(0x1064*0x2+0x672*0x2+-0x2dac),this['instancing']=!(0x2227+-0x1427+0x1*-0xdff),this['size']=_0x7dd48b['reduce']((_0x531549,_0xc2042f)=>_0x531549+Math['ceil'](_0xc2042f['components']*Eo[_0xc2042f['type']]/(-0x4*0x7c4+-0x2ef*0x1+0x1*0x2203))*(-0x7*0x4ea+0x351*0x3+0x1877),-0x14d*-0x19+0x31c*-0x6+-0xddd);let _0x5e22b0=0x649*0x1+-0x3ed+0x25c*-0x1,_0x577796;for(let _0x5d661f=0x1e70+-0x1161+0xd0f*-0x1,_0x14b9bb=_0x7dd48b['length'];_0x5d661f<_0x14b9bb;_0x5d661f++){const _0x390f7f=_0x7dd48b[_0x5d661f];_0x577796=_0x390f7f['components']*Eo[_0x390f7f['type']],w['assert'](kt['isElementV'+'alid'](_0x3a09ee,_0x390f7f),'WebGPU\x20doe'+'s\x20not\x20supp'+'ort\x20the\x20fo'+'rmat\x20of\x20ve'+'rtex\x20eleme'+'nt\x20'+_0x390f7f['semantic']+'\x20:\x20'+Cx[_0x390f7f['type']]+'\x20x\x20'+_0x390f7f['components']),_0x55a734&&(_0x5e22b0=Y['roundUp'](_0x5e22b0,_0x577796),w['assert'](_0x577796%(0x4*-0x8eb+-0x106b+0x341b*0x1)===0x1372+-0x2*0xad+-0x1218,'Non-interl'+'eaved\x20vert'+'ex\x20format\x20'+'with\x20eleme'+'nt\x20size\x20no'+'t\x20multiple'+'\x20of\x204\x20can\x20'+'have\x20perfo'+'rmance\x20imp'+'act\x20on\x20som'+'e\x20platform'+'s.\x20Element'+'\x20size:\x20'+_0x577796));const _0x2edc2b=_0x390f7f['asInt']??!(0x146*-0x2+0x1539+-0x12ac),_0x533698=_0x2edc2b?!(0x167*-0x8+-0x9*-0x3fa+-0x13*0x14b):_0x390f7f['normalize']??!(0x31*-0xa4+0x1c5b*-0x1+0x778*0x8),_0x16f41f={'name':_0x390f7f['semantic'],'offset':_0x55a734?_0x5e22b0:_0x390f7f['hasOwnProp'+'erty']('offset')?_0x390f7f['offset']:_0x5e22b0,'stride':_0x55a734?_0x577796:_0x390f7f['hasOwnProp'+'erty']('stride')?_0x390f7f['stride']:this['size'],'dataType':_0x390f7f['type'],'numComponents':_0x390f7f['components'],'normalize':_0x533698,'size':_0x577796,'asInt':_0x2edc2b};this['_elements']['push'](_0x16f41f),_0x55a734?_0x5e22b0+=_0x577796*_0x55a734:_0x5e22b0+=Math['ceil'](_0x577796/(0x10de+-0x11b*0x4+-0x637*0x2))*(0x5de*-0x4+-0x1*-0x1ad4+0x8*-0x6b),_0x390f7f['semantic']===is?this['hasUv0']=!(0x1*0x14bf+-0x1b1c+0x65d):_0x390f7f['semantic']===va?this['hasUv1']=!(-0x391*0x2+0x406*0x2+0x2*-0x75):_0x390f7f['semantic']===Wt?this['hasColor']=!(-0x2097+-0x1*-0xf14+-0x1*-0x1183):_0x390f7f['semantic']===yi&&(this['hasTangent'+'s']=!(-0x4*0x3c1+0x393*-0x3+0x257*0xb));}_0x55a734&&(this['verticesBy'+'teSize']=_0x5e22b0),this['_evaluateH'+'ash']();}get['elements'](){return this['_elements'];}static['getDefault'+'Instancing'+'Format'](_0x15bd92){return Xx['get'](_0x15bd92,()=>new kt(_0x15bd92,[{'semantic':sp,'components':0x4,'type':Ve},{'semantic':ip,'components':0x4,'type':Ve},{'semantic':rp,'components':0x4,'type':Ve},{'semantic':bn,'components':0x4,'type':Ve}]));}static['isElementV'+'alid'](_0x2f0ad0,_0x4fac59){const _0x56e817=_0x4fac59['components']*Eo[_0x4fac59['type']];return!(_0x2f0ad0['isWebGPU']&&!$x['includes'](_0x56e817));}['update'](){w['assert'](!this['device']['isWebGPU'],'VertexForm'+'at#update\x20'+'is\x20not\x20sup'+'ported\x20on\x20'+'WebGPU\x20and'+'\x20VertexFor'+'mat\x20cannot'+'\x20be\x20modifi'+'ed.'),this['_evaluateH'+'ash']();}['_evaluateH'+'ash'](){const _0x1e6dc1=[],_0x1382e4=[],_0x4b00ab=this['_elements']['length'];for(let _0x12282e=-0x85*0x1f+-0x264+-0x127f*-0x1;_0x12282e<_0x4b00ab;_0x12282e++){const {name:_0x15aa57,dataType:_0x518c5b,numComponents:_0x538a9c,normalize:_0x26e3ae,offset:_0x39c59e,stride:_0x56432c,size:_0x25bb76,asInt:_0x3765fe}=this['_elements'][_0x12282e],_0xaef84=_0x15aa57+_0x518c5b+_0x538a9c+_0x26e3ae+_0x3765fe;_0x1e6dc1['push'](_0xaef84);const _0xdc2771=_0xaef84+_0x39c59e+_0x56432c+_0x25bb76;_0x1382e4['push'](_0xdc2771);}_0x1e6dc1['sort']();const _0x105207=_0x1e6dc1['join']();this['batchingHa'+'sh']=hi(_0x105207),this['shaderProc'+'essingHash'+'String']=_0x105207,this['renderingH'+'ashString']=_0x1382e4['join']('_'),this['renderingH'+'ash']=Wx['get'](this['renderingH'+'ashString']);}}const qx=new fp(),Sh=class Sh{constructor(_0x315e01={}){h(this,'_func'),h(this,'_ref'),h(this,'_fail'),h(this,'_zfail'),h(this,'_zpass'),h(this,'_readMask'),h(this,'_writeMask'),h(this,'_dirty',!(-0x23*0x4c+0x16c8+-0xc64)),h(this,'_key'),(this['_func']=_0x315e01['func']??Hi,this['_ref']=_0x315e01['ref']??0x793+0x41*-0x8b+0xddc*0x2,this['_readMask']=_0x315e01['readMask']??-0x3b7*0x1+0x1295+-0x35*0x43,this['_writeMask']=_0x315e01['writeMask']??0x1f9f+-0x240e*-0x1+-0xb1d*0x6,this['_fail']=_0x315e01['fail']??pn,this['_zfail']=_0x315e01['zfail']??pn,this['_zpass']=_0x315e01['zpass']??pn,this['_evalKey']());}set['func'](_0x2a0f7a){this['_func']=_0x2a0f7a,this['_dirty']=!(0x1563+-0xe4c+-0xf*0x79);}get['func'](){return this['_func'];}set['ref'](_0x3b1aed){this['_ref']=_0x3b1aed,this['_dirty']=!(-0x1c4b*0x1+0x4e+-0x1bfd*-0x1);}get['ref'](){return this['_ref'];}set['fail'](_0x273b27){this['_fail']=_0x273b27,this['_dirty']=!(-0x1aba+0x4*-0x9e+0x4a*0x65);}get['fail'](){return this['_fail'];}set['zfail'](_0xdfd1c3){this['_zfail']=_0xdfd1c3,this['_dirty']=!(-0x1d9a+0x2073+0x1b*-0x1b);}get['zfail'](){return this['_zfail'];}set['zpass'](_0x86a5a2){this['_zpass']=_0x86a5a2,this['_dirty']=!(-0xa3f+0x962*0x4+-0x1b49);}get['zpass'](){return this['_zpass'];}set['readMask'](_0x15e441){this['_readMask']=_0x15e441,this['_dirty']=!(-0xa0*0x13+-0x1a9d*0x1+0x267d);}get['readMask'](){return this['_readMask'];}set['writeMask'](_0x8be8f7){this['_writeMask']=_0x8be8f7,this['_dirty']=!(0xd*-0x1e4+0x1bbc+-0x328);}get['writeMask'](){return this['_writeMask'];}['_evalKey'](){const {_func:_0x3d75f4,_ref:_0x2fe95b,_fail:_0x54cebf,_zfail:_0x3fda79,_zpass:_0x59f982,_readMask:_0x4d3f80,_writeMask:_0x1beea8}=this,_0x530191=_0x3d75f4+','+_0x2fe95b+','+_0x54cebf+','+_0x3fda79+','+_0x59f982+','+_0x4d3f80+','+_0x1beea8;this['_key']=qx['get'](_0x530191),this['_dirty']=!(0x1*0x4f+-0x105c+-0x55a*-0x3);}get['key'](){return this['_dirty']&&this['_evalKey'](),this['_key'];}['copy'](_0x22035e){return this['_func']=_0x22035e['_func'],this['_ref']=_0x22035e['_ref'],this['_readMask']=_0x22035e['_readMask'],this['_writeMask']=_0x22035e['_writeMask'],this['_fail']=_0x22035e['_fail'],this['_zfail']=_0x22035e['_zfail'],this['_zpass']=_0x22035e['_zpass'],this['_dirty']=_0x22035e['_dirty'],this['_key']=_0x22035e['_key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}};h(Sh,'DEFAULT',Object['freeze'](new Sh()));let pi=Sh;const Ol=new Set(),yh=class yh extends me{constructor(_0x21d0ca,_0x1ba383){var _0x3ab32b,_0x2a167b,_0x14f7ea,_0x1b370b,_0x4ce117,_0x186b19;super(),h(this,'canvas'),h(this,'backBuffer',null),h(this,'backBuffer'+'Size',new J()),h(this,'backBuffer'+'Format'),h(this,'backBuffer'+'Antialias',!(-0x6*0x26+-0x1961+0x1a46)),h(this,'isWebGPU',!(-0x21ff+-0x10e4+0x32e4)),h(this,'isWebGL2',!(0xa9*-0x1f+0x12be+0x1ba)),h(this,'isHdr',!(0x10dd+0x1*-0x12d9+0x1fd)),h(this,'scope'),h(this,'maxIndirec'+'tDrawCount',0x2126+-0x1*0x1d1e+-0x8),h(this,'maxAnisotr'+'opy'),h(this,'maxCubeMap'+'Size'),h(this,'maxTexture'+'Size'),h(this,'maxVolumeS'+'ize'),h(this,'maxColorAt'+'tachments',-0x10d4+0x18*0x64+0x775),h(this,'precision'),h(this,'samples'),h(this,'maxSamples',0xea6*-0x1+0xf8a+-0xe3),h(this,'supportsSt'+'encil'),h(this,'supportsCo'+'mpute',!(-0xb80+-0x131d+0xf4f*0x2)),h(this,'supportsSt'+'orageTextu'+'reRead',!(0x5fb*-0x2+-0x921+0x1518)),h(this,'renderTarg'+'et',null),h(this,'shaders',[]),h(this,'textures',[]),h(this,'targets',new Set()),h(this,'renderVers'+'ion',-0x1*-0x39d+0xfbf*0x2+-0x231b),h(this,'renderPass'+'Index'),h(this,'insideRend'+'erPass',!(-0x3cd*0x7+0x19ed+0x7*0x19)),h(this,'supportsUn'+'iformBuffe'+'rs',!(-0x2700+-0x4ed+0x2bee)),h(this,'supportsCl'+'ipDistance'+'s',!(-0x22de+-0x592+0x2871)),h(this,'textureFlo'+'atRenderab'+'le'),h(this,'textureHal'+'fFloatRend'+'erable'),h(this,'textureRG1'+'1B10Render'+'able',!(0x2*-0x5d4+-0x9a2+0x154b)),h(this,'textureFlo'+'atFilterab'+'le',!(0x1c44+0x19f6+0x1213*-0x3)),h(this,'quadVertex'+'Buffer'),h(this,'blendState',new pt()),h(this,'depthState',new Yt()),h(this,'stencilEna'+'bled',!(0x1083*0x1+-0xcf5*0x3+0x479*0x5)),h(this,'stencilFro'+'nt',new pi()),h(this,'stencilBac'+'k',new pi()),h(this,'dynamicBuf'+'fers'),h(this,'gpuProfile'+'r'),h(this,'defaultCle'+'arOptions',{'color':[0x985+0xa*0xe+-0xa11,-0x1f87*-0x1+0x49*-0x1b+-0x17d4,0x3*-0x3d+0x21d1+-0x211a,-0x21e+0x1c58+-0x1a39],'depth':0x1,'stencil':0x0,'flags':Fo|No}),h(this,'clientRect',{'width':0x0,'height':0x0}),h(this,'_shadersDi'+'rty',!(-0x24c4+0xfe+-0x1*-0x23c7)),h(this,'capsDefine'+'s',new Map()),h(this,'mapsToClea'+'r',new Set()),(this['canvas']=_0x21d0ca,'setAttribu'+'te'in _0x21d0ca&&_0x21d0ca['setAttribu'+'te']('data-engin'+'e','PlayCanvas'+'\x20'+sn),this['initOption'+'s']={..._0x1ba383},(_0x3ab32b=this['initOption'+'s'])['alpha']??(_0x3ab32b['alpha']=!(0x53*-0x3e+-0x2037+0x3451)),(_0x2a167b=this['initOption'+'s'])['depth']??(_0x2a167b['depth']=!(-0x1*-0x1a3e+0x78c+-0x21ca)),(_0x14f7ea=this['initOption'+'s'])['stencil']??(_0x14f7ea['stencil']=!(-0x1b16+-0x77+0x1b8d)),(_0x1b370b=this['initOption'+'s'])['antialias']??(_0x1b370b['antialias']=!(-0x1468+-0xebb+0x2323)),(_0x4ce117=this['initOption'+'s'])['powerPrefe'+'rence']??(_0x4ce117['powerPrefe'+'rence']='high-perfo'+'rmance'),(_0x186b19=this['initOption'+'s'])['displayFor'+'mat']??(_0x186b19['displayFor'+'mat']=bx),this['_maxPixelR'+'atio']=Me['browser']?Math['min'](-0x2176+-0x8e1+-0x152c*-0x2,window['devicePixe'+'lRatio']):0x19b2+-0xc58+-0xd59,this['buffers']=[],this['_vram']={'texShadow':0x0,'texAsset':0x0,'texLightmap':0x0,'tex':0x0,'vb':0x0,'ib':0x0,'ub':0x0,'sb':0x0},this['_shaderSta'+'ts']={'vsCompiled':0x0,'fsCompiled':0x0,'linked':0x0,'materialShaders':0x0,'compileTime':0x0},this['initialize'+'ContextCac'+'hes'](),this['_drawCalls'+'PerFrame']=0x9f4+-0x165d+0xc69,this['_shaderSwi'+'tchesPerFr'+'ame']=0x14a1+0x61*-0x28+-0x3*0x1d3,this['_primsPerF'+'rame']=[]);for(let _0x4594dd=Vh;_0x4594dd<=sa;_0x4594dd++)this['_primsPerF'+'rame'][_0x4594dd]=-0x46*0x30+0x1256+0x2e*-0x1d;this['_renderTar'+'getCreatio'+'nTime']=0x257c+-0x1953+0xb*-0x11b,this['scope']=new Gx('Device'),this['textureBia'+'s']=this['scope']['resolve']('textureBia'+'s'),this['textureBia'+'s']['setValue'](0x8*0x124+-0xfe*-0x6+-0xf14);}['postInit'](){const _0x20c0d7=new kt(this,[{'semantic':Pe,'components':0x2,'type':Ve}]),_0x4aff78=new Float32Array([-(0x775+0x487+-0xbfb),-(0x22bc+-0x26+-0x2295),-0xbd8+-0x1d51+-0xb*-0x3be,-(0x73*0x15+0x20*0xc2+-0x21ae),-(0x1b7a*-0x1+0x1*-0x1dce+0x82f*0x7),0xb00+-0x3*0x705+0x8*0x142,-0x1aa7+0xa*0x36d+0xe*-0x8b,-0x1*-0x22bd+0x1de*0x1+-0x249a]);this['quadVertex'+'Buffer']=new Ds(this,_0x20c0d7,0x11a*-0x13+0x1589+-0x97*0x1,{'data':_0x4aff78});}['initCapsDe'+'fines'](){const {capsDefines:_0x34ef3e}=this;_0x34ef3e['clear'](),this['textureFlo'+'atFilterab'+'le']&&_0x34ef3e['set']('CAPS_TEXTU'+'RE_FLOAT_F'+'ILTERABLE',''),this['textureFlo'+'atRenderab'+'le']&&_0x34ef3e['set']('CAPS_TEXTU'+'RE_FLOAT_R'+'ENDERABLE','');}['destroy'](){var _0x482bae,_0x18d613,_0x53e368;this['fire']('destroy'),(_0x482bae=this['quadVertex'+'Buffer'])==null||_0x482bae['destroy'](),this['quadVertex'+'Buffer']=null,(_0x18d613=this['dynamicBuf'+'fers'])==null||_0x18d613['destroy'](),this['dynamicBuf'+'fers']=null,(_0x53e368=this['gpuProfile'+'r'])==null||_0x53e368['destroy'](),this['gpuProfile'+'r']=null;}['onDestroyS'+'hader'](_0x121f4a){this['fire']('destroy:sh'+'ader',_0x121f4a);const _0x374e70=this['shaders']['indexOf'](_0x121f4a);_0x374e70!==-(-0x449+-0x10f7*-0x1+-0xcad)&&this['shaders']['splice'](_0x374e70,-0x1948+0x2005+-0x2*0x35e);}['postDestro'+'y'](){this['scope']=null,this['canvas']=null;}['loseContex'+'t'](){var _0x90d160;this['contextLos'+'t']=!(0x29*0x51+-0x1e6f+0x1176),this['backBuffer'+'Size']['set'](-(-0x2205+-0x11fb*-0x2+-0x1f0),-(0x1*-0x2087+-0x4a*0x6a+0x3f2c*0x1));for(const _0x5acea7 of this['textures'])_0x5acea7['loseContex'+'t']();for(const _0x27e7d3 of this['buffers'])_0x27e7d3['loseContex'+'t']();for(const _0x5e2151 of this['targets'])_0x5e2151['loseContex'+'t']();(_0x90d160=this['gpuProfile'+'r'])==null||_0x90d160['loseContex'+'t']();}['restoreCon'+'text'](){var _0x4a0611,_0x14992d;this['contextLos'+'t']=!(0x16a4+0x339*0x9+-0x33a4),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes']();for(const _0x3001c5 of this['buffers'])_0x3001c5['unlock']();(_0x14992d=(_0x4a0611=this['gpuProfile'+'r'])==null?void(0x1*-0x679+-0x14f2+0x1b6b):_0x4a0611['restoreCon'+'text'])==null||_0x14992d['call'](_0x4a0611);}['toJSON'](_0x4bb83b){}['initialize'+'ContextCac'+'hes'](){this['vertexBuff'+'ers']=[],this['shader']=null,this['shaderVali'+'d']=void(0x33*-0xb3+0x1f2c+0x47d),this['shaderAsyn'+'cCompile']=!(-0x24b*-0x1+-0x25a5+0xbc9*0x3),this['renderTarg'+'et']=null;}['initialize'+'RenderStat'+'e'](){this['blendState']=new pt(),this['depthState']=new Yt(),this['cullMode']=ca,this['vx']=this['vy']=this['vw']=this['vh']=-0x1299+-0x425*0x1+0x16be,this['sx']=this['sy']=this['sw']=this['sh']=-0x2289+0x2d1*0x6+-0x12d*-0xf,this['blendColor']=new ie(-0x29f+0x8db+-0x63c,-0x19*-0x184+-0x1*-0xeb1+-0x3495,0x3*-0x7d3+-0xa8e+-0x119*-0x1f,0x1*0x18d+0xbe7*-0x3+0x2228);}['setStencil'+'State'](_0x242b49,_0x44e9a1){w['assert'](!(0xca7+-0x92b*0x1+-0x63*0x9));}['setBlendSt'+'ate'](_0x5a62c){w['assert'](!(-0x128b+0x2*-0xf7f+0x175*0x22));}['setBlendCo'+'lor'](_0x1f8cf3,_0x21b7d9,_0x3e9855,_0x32b45c){w['assert'](!(-0x8f3+0x1a05*-0x1+-0x4ff*-0x7));}['setDepthSt'+'ate'](_0xdd2df2){w['assert'](!(0x2569+-0x3af+-0x61*0x59));}['setCullMod'+'e'](_0x50e41a){w['assert'](!(0x220e+0x1*-0x1140+-0x10cd));}['setRenderT'+'arget'](_0x540aa7){this['renderTarg'+'et']=_0x540aa7;}['setVertexB'+'uffer'](_0x1461d3){_0x1461d3&&this['vertexBuff'+'ers']['push'](_0x1461d3);}['clearVerte'+'xBuffer'](){this['vertexBuff'+'ers']['length']=-0x11a4+0xd*0x55+0xd53;}['getIndirec'+'tDrawSlot'](){return-0xe80*-0x2+-0xab6+-0x124a;}get['indirectDr'+'awBuffer'](){return null;}['getRenderT'+'arget'](){return this['renderTarg'+'et'];}['initRender'+'Target'](_0x1343a4){if(_0x1343a4['initialize'+'d'])return;const _0x52da06=de();this['fire']('fbo:create',{'timestamp':_0x52da06,'target':this}),_0x1343a4['init'](),this['targets']['add'](_0x1343a4),this['_renderTar'+'getCreatio'+'nTime']+=de()-_0x52da06;}['draw'](_0x48dff4,_0x67091a,_0x1305a8,_0x21e190,_0x59b4bc=!(-0x10db+0xdc6+-0x1*-0x315),_0x4b75b8=!(0x1e*0x4a+-0x8cd+0xb*0x3)){w['assert'](!(-0xc8b+-0xbd8+0x1864));}['_isBrowser'+'Interface'](_0x482073){return this['_isImageBr'+'owserInter'+'face'](_0x482073)||this['_isImageCa'+'nvasInterf'+'ace'](_0x482073)||this['_isImageVi'+'deoInterfa'+'ce'](_0x482073);}['_isImageBr'+'owserInter'+'face'](_0xd18baf){return typeof ImageBitmap<'u'&&_0xd18baf instanceof ImageBitmap||typeof HTMLImageElement<'u'&&_0xd18baf instanceof HTMLImageElement;}['_isImageCa'+'nvasInterf'+'ace'](_0x8deb59){return typeof HTMLCanvasElement<'u'&&_0x8deb59 instanceof HTMLCanvasElement;}['_isImageVi'+'deoInterfa'+'ce'](_0x6cf76a){return typeof HTMLVideoElement<'u'&&_0x6cf76a instanceof HTMLVideoElement;}['resizeCanv'+'as'](_0x40918e,_0x30a89e){const _0x337659=Math['min'](this['_maxPixelR'+'atio'],Me['browser']?window['devicePixe'+'lRatio']:-0x1*-0x3b6+0x18f*0x17+-0x278e),_0x2a5e7f=Math['floor'](_0x40918e*_0x337659),_0x151f48=Math['floor'](_0x30a89e*_0x337659);(_0x2a5e7f!==this['canvas']['width']||_0x151f48!==this['canvas']['height'])&&this['setResolut'+'ion'](_0x2a5e7f,_0x151f48);}['setResolut'+'ion'](_0x2d13bd,_0x6a5301){this['canvas']['width']=_0x2d13bd,this['canvas']['height']=_0x6a5301,this['fire'](yh['EVENT_RESI'+'ZE'],_0x2d13bd,_0x6a5301);}['update'](){this['updateClie'+'ntRect']();}['updateClie'+'ntRect'](){if(Me['worker'])this['clientRect']['width']=this['canvas']['width'],this['clientRect']['height']=this['canvas']['height'];else{const _0x3f6193=this['canvas']['getBoundin'+'gClientRec'+'t']();this['clientRect']['width']=_0x3f6193['width'],this['clientRect']['height']=_0x3f6193['height'];}}get['width'](){return this['canvas']['width'];}get['height'](){return this['canvas']['height'];}set['fullscreen'](_0x2a282e){w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.');}get['fullscreen'](){return w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.'),!(-0x23dd+-0x1ca+0x12d4*0x2);}set['maxPixelRa'+'tio'](_0x55195c){this['_maxPixelR'+'atio']=_0x55195c;}get['maxPixelRa'+'tio'](){return this['_maxPixelR'+'atio'];}get['deviceType'](){return this['_deviceTyp'+'e'];}['startRende'+'rPass'](_0x3c832c){}['endRenderP'+'ass'](_0x5d8942){}['startCompu'+'tePass'](_0x4d8238){}['endCompute'+'Pass'](){}['frameStart'](){this['renderPass'+'Index']=0x8d4+0x158f+-0x1e63,this['renderVers'+'ion']++,w['call'](()=>{if(mi['get'](m0)){const _0x315126=this['textures']['slice']();_0x315126['sort']((_0x15a0c9,_0x5663c9)=>_0x5663c9['gpuSize']-_0x15a0c9['gpuSize']),w['log']('Textures:\x20'+_0x315126['length']);let _0x4dec81=-0x1a63+-0x1bde+0x3641;_0x315126['forEach']((_0x5445ee,_0x505d4e)=>{const _0x1f34e8=_0x5445ee['gpuSize'];_0x4dec81+=_0x1f34e8,w['log'](_0x505d4e+'.\x20'+_0x5445ee['name']+'\x20'+_0x5445ee['width']+'x'+_0x5445ee['height']+'\x20VRAM:\x20'+(_0x1f34e8/(0x1190+0x9fc+-0x178c)/(-0x5*0x503+-0x1f*0x8e+-0x2e41*-0x1))['toFixed'](0x3d2*0x7+-0x1*-0x31+-0x1aed)+'\x20MB');}),w['log']('Total:\x20'+(_0x4dec81/(-0x2f*-0x18+0x1*-0xdbd+0xd55)/(-0x1a30+0x6d3+-0x1*-0x175d))['toFixed'](-0x1*0x16e6+0xd09*-0x1+0x23f1)+'MB');}});}['frameEnd'](){this['mapsToClea'+'r']['forEach'](_0x17f9b0=>_0x17f9b0['clear']()),this['mapsToClea'+'r']['clear']();}['computeDis'+'patch'](_0x34ad0f,_0x289bdf='Unnamed'){}['getRendera'+'bleHdrForm'+'at'](_0x2de355=[En,nt,Xt],_0xd65780=!(0x1*0xe66+0xe74+-0x2*0xe6d),_0x5a3905=-0xb5*0x10+-0x1*-0x48a+0x6c7){for(let _0x5c6512=0x1174+0x21*0x5f+-0x1db3;_0x5c6512<_0x2de355['length'];_0x5c6512++){const _0x4d1ac2=_0x2de355[_0x5c6512];switch(_0x4d1ac2){case En:{if(this['textureRG1'+'1B10Render'+'able'])return _0x4d1ac2;break;}case nt:if(this['textureHal'+'fFloatRend'+'erable'])return _0x4d1ac2;break;case Xt:if(this['isWebGPU']&&_0x5a3905>-0x2*-0x1250+0x12f5+-0x3794)continue;if(this['textureFlo'+'atRenderab'+'le']&&(!_0xd65780||this['textureFlo'+'atFilterab'+'le']))return _0x4d1ac2;break;}}}['validateAt'+'tributes'](_0x493524,_0x510ffd,_0x193f52){w['call'](()=>{Ol['clear'](),_0x510ffd==null||_0x510ffd['elements']['forEach'](_0x140de3=>Ol['add'](Le[_0x140de3['name']])),_0x193f52==null||_0x193f52['elements']['forEach'](_0x1df7f4=>Ol['add'](Le[_0x1df7f4['name']]));for(const [_0x28ba43,_0xb304b9]of _0x493524['attributes'])Ol['has'](_0x28ba43)||w['errorOnce']('Vertex\x20att'+'ribute\x20['+_0xb304b9+(']\x20at\x20locat'+'ion\x20')+_0x28ba43+('\x20required\x20'+'by\x20the\x20sha'+'der\x20is\x20not'+'\x20present\x20i'+'n\x20the\x20curr'+'ently\x20assi'+'gned\x20verte'+'x\x20buffers,'+'\x20while\x20ren'+'dering\x20[')+Q['toString']()+']',{'shader':_0x493524,'vb0Format':_0x510ffd,'vb1Format':_0x193f52});});}};h(yh,'EVENT_RESI'+'ZE','resizecanv'+'as');let $e=yh,jx=0x26*0x1+-0x5*0x2+-0x1c;class gt{constructor(_0x1f44e7={}){h(this,'name'),h(this,'_device'),h(this,'_colorBuff'+'er'),h(this,'_colorBuff'+'ers'),h(this,'_depthBuff'+'er'),h(this,'_depth'),h(this,'_stencil'),h(this,'_samples'),h(this,'autoResolv'+'e'),h(this,'_face'),h(this,'_mipLevel'),h(this,'_mipmaps'),h(this,'flipY');var _0x5ae9ec,_0x516ffb,_0x2cbbd0,_0x55237d,_0x12793e,_0xac654;w['assert'](!(_0x1f44e7 instanceof $e),'pc.RenderT'+'arget\x20cons'+'tructor\x20no'+'\x20longer\x20ac'+'cepts\x20Grap'+'hicsDevice'+'\x20parameter'+'.'),this['id']=jx++;const _0x50bec6=((_0x5ae9ec=_0x1f44e7['colorBuffe'+'r'])==null?void(-0x13*0x26+0x21e9*0x1+-0x3*0xa5d):_0x5ae9ec['device'])??((_0x516ffb=_0x1f44e7['colorBuffe'+'rs'])==null?void(-0x9*-0x257+0x11c8+-0xa3*0x3d):_0x516ffb[0x557+0xa7e+-0x243*0x7]['device'])??((_0x2cbbd0=_0x1f44e7['depthBuffe'+'r'])==null?void(0x19*0x14f+0xbc8+0x3*-0xed5):_0x2cbbd0['device'])??_0x1f44e7['graphicsDe'+'vice'];w['assert'](_0x50bec6,'Failed\x20to\x20'+'obtain\x20the'+'\x20device,\x20c'+'olorBuffer'+'\x20nor\x20depth'+'Buffer\x20sto'+'re\x20it.'),this['_device']=_0x50bec6;const {maxSamples:_0x566f28}=this['_device'];if(this['_samples']=Math['min'](_0x1f44e7['samples']??0x220a+-0x1433*0x1+0x17*-0x9a,_0x566f28),_0x50bec6['isWebGPU']&&(this['_samples']=this['_samples']>-0x3*-0xa22+0x15fe+-0x3463?_0x566f28:0x1cc5+0x1cf6+0x9*-0x66a),this['_colorBuff'+'er']=_0x1f44e7['colorBuffe'+'r'],_0x1f44e7['colorBuffe'+'r']&&(this['_colorBuff'+'ers']=[_0x1f44e7['colorBuffe'+'r']]),this['_depthBuff'+'er']=_0x1f44e7['depthBuffe'+'r'],this['_face']=_0x1f44e7['face']??0x673+-0x254+0x41f*-0x1,this['_depthBuff'+'er']){const _0x532434=this['_depthBuff'+'er']['_format'];_0x532434===Wi||_0x532434===un?(this['_depth']=!(0xe2+0x1c3c+-0x1d1e),this['_stencil']=!(0x7b*-0x4b+-0x1e3f*0x1+-0xef*-0x47)):_0x532434===Oh?(this['_depth']=!(-0x12*-0x11f+0x1*-0x3ed+-0x1041),this['_stencil']=!(-0x11b*0x16+-0x3*0x427+0x24c7)):_0x532434===Qi&&this['_depthBuff'+'er']['device']['isWebGPU']&&this['_samples']>0x47*0x49+0xc91+-0x20cf?(this['_depth']=!(0x1ee4+-0xf56+-0xf8e),this['_stencil']=!(0x246b+0x26+-0x2490)):(w['warn']('Incorrect\x20'+'depthBuffe'+'r\x20format.\x20'+'Must\x20be\x20pc'+'.PIXELFORM'+'AT_DEPTH\x20o'+'r\x20pc.PIXEL'+'FORMAT_DEP'+'THSTENCIL'),this['_depth']=!(-0x1dfb+-0x59+0x1e55),this['_stencil']=!(0x1b4+-0x1758+0x1*0x15a5));}else this['_depth']=_0x1f44e7['depth']??!(-0x1bc1+0x1e8e+0xef*-0x3),this['_stencil']=_0x1f44e7['stencil']??!(0x233*-0x2+-0x25e5+0x2a4c);_0x1f44e7['colorBuffe'+'rs']&&(w['assert'](!this['_colorBuff'+'ers'],'When\x20const'+'ructing\x20Re'+'nderTarget'+'\x20and\x20optio'+'ns.colorBu'+'ffers\x20is\x20u'+'sed,\x20optio'+'ns.colorBu'+'ffer\x20must\x20'+'not\x20be\x20use'+'d.'),this['_colorBuff'+'ers']||(this['_colorBuff'+'ers']=[..._0x1f44e7['colorBuffe'+'rs']],this['_colorBuff'+'er']=_0x1f44e7['colorBuffe'+'rs'][0x9d8+-0x2*-0x691+0x11*-0x15a])),this['autoResolv'+'e']=_0x1f44e7['autoResolv'+'e']??!(-0xfa3+0x52b+0xa78),this['name']=_0x1f44e7['name'],this['name']||(this['name']=(_0x55237d=this['_colorBuff'+'er'])==null?void(-0x10c4+-0xfee+0x20b2):_0x55237d['name']),this['name']||(this['name']=(_0x12793e=this['_depthBuff'+'er'])==null?void(0x1a9b+0x1*-0x85f+-0x123c):_0x12793e['name']),this['name']||(this['name']='Untitled'),this['flipY']=_0x1f44e7['flipY']??!(0x55*0x1d+-0x12eb*-0x1+-0x1c8b),this['_mipLevel']=_0x1f44e7['mipLevel']??-0x1207+0x4*-0x623+0x3*0xe31,this['_mipLevel']>0x20a9*0x1+-0x5b7*0x5+-0x416&&this['_depth']&&(w['error']('Rendering\x20'+'to\x20a\x20mipLe'+'vel\x20is\x20not'+'\x20supported'+'\x20when\x20rend'+'er\x20target\x20'+'uses\x20a\x20dep'+'th\x20buffer.'+'\x20Ignoring\x20'+'mipLevel\x20'+this['_mipLevel']+('\x20for\x20rende'+'r\x20target\x20')+this['name'],{'renderTarget':this,'options':_0x1f44e7}),this['_mipLevel']=0x1*-0x1a21+-0xe*0x220+0x37e1),this['_mipmaps']=_0x1f44e7['mipLevel']===void(0x35*0x5f+0xb3*-0x2b+0xa66),this['validateMr'+'t'](),this['impl']=_0x50bec6['createRend'+'erTargetIm'+'pl'](this),w['trace'](tm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+('\x20[samples:'+'\x20')+this['samples']+']'+((_0xac654=this['_colorBuff'+'ers'])!=null&&_0xac654['length']?'[MRT:\x20'+this['_colorBuff'+'ers']['length']+']':'')+(this['colorBuffe'+'r']?'[Color]':'')+(this['depth']?'[Depth]':'')+(this['stencil']?'[Stencil]':'')+'[Face:'+this['face']+']');}['destroy'](){w['trace'](tm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x4536dd=this['_device'];_0x4536dd&&(_0x4536dd['targets']['delete'](this),_0x4536dd['renderTarg'+'et']===this&&_0x4536dd['setRenderT'+'arget'](null),this['destroyFra'+'meBuffers']());}['destroyFra'+'meBuffers'](){const _0x2da287=this['_device'];_0x2da287&&this['impl']['destroy'](_0x2da287);}['destroyTex'+'tureBuffer'+'s'](){var _0x2cf6bb,_0x5f0908;(_0x2cf6bb=this['_depthBuff'+'er'])==null||_0x2cf6bb['destroy'](),this['_depthBuff'+'er']=null,(_0x5f0908=this['_colorBuff'+'ers'])==null||_0x5f0908['forEach'](_0x89b53e=>{_0x89b53e['destroy']();}),this['_colorBuff'+'ers']=null,this['_colorBuff'+'er']=null;}['resize'](_0x3e3dc5,_0xded058){var _0x1d045d,_0x12d798;if(this['width']!==_0x3e3dc5||this['height']!==_0xded058){if(this['mipLevel']>-0x2*-0x73c+-0x1c4e+0x1fa*0x7){w['warn']('Only\x20a\x20ren'+'der\x20target'+'\x20rendering'+'\x20to\x20mipLev'+'el\x200\x20can\x20b'+'e\x20resized,'+'\x20ignoring.',this);return;}const _0x8ee3f5=this['_device'];this['destroyFra'+'meBuffers'](),_0x8ee3f5['renderTarg'+'et']===this&&_0x8ee3f5['setRenderT'+'arget'](null),(_0x1d045d=this['_depthBuff'+'er'])==null||_0x1d045d['resize'](_0x3e3dc5,_0xded058),(_0x12d798=this['_colorBuff'+'ers'])==null||_0x12d798['forEach'](_0x1b0127=>{_0x1b0127['resize'](_0x3e3dc5,_0xded058);}),this['validateMr'+'t'](),this['impl']=_0x8ee3f5['createRend'+'erTargetIm'+'pl'](this);}}['validateMr'+'t'](){w['call'](()=>{if(this['_colorBuff'+'ers']){const {width:_0x25d61f,height:_0x3dc4a2,cubemap:_0xca305,volume:_0x54fb80}=this['_colorBuff'+'ers'][0x1*-0x1bb3+0x1987+0x22c];for(let _0xc43e7e=-0xd37+-0x18ff+0x9*0x43f;_0xc43e7e<this['_colorBuff'+'ers']['length'];_0xc43e7e++){const _0x47b1b8=this['_colorBuff'+'ers'][_0xc43e7e];w['assert'](_0x47b1b8['width']===_0x25d61f,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20width',this),w['assert'](_0x47b1b8['height']===_0x3dc4a2,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20height',this),w['assert'](_0x47b1b8['cubemap']===_0xca305,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20cubemap\x20s'+'etting',this),w['assert'](_0x47b1b8['volume']===_0x54fb80,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20volume\x20se'+'tting',this);}}});}['init'](){this['impl']['init'](this['_device'],this);}get['initialize'+'d'](){return this['impl']['initialize'+'d'];}get['device'](){return this['_device'];}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['resolve'](_0x49721c=!(0x242+-0x1b78+0x1*0x1936),_0x460e61=!!this['_depthBuff'+'er']){this['_device']&&this['_samples']>-0x17*0x167+-0x1*-0x397+-0xb3*-0x29&&(Q['pushGpuMar'+'ker'](this['_device'],'RESOLVE-RT'+':'+this['name']+':'+(_0x49721c?'[color]':'')+':'+(_0x460e61?'[depth]':'')),this['impl']['resolve'](this['_device'],this,_0x49721c,_0x460e61),Q['popGpuMark'+'er'](this['_device']));}['copy'](_0x511e4c,_0x5a31c6,_0x3062b9){if(!this['_device']){if(_0x511e4c['_device'])this['_device']=_0x511e4c['_device'];else return w['error']('Render\x20tar'+'gets\x20are\x20n'+'ot\x20initial'+'ized'),!(0xcd7+-0x1547*-0x1+-0x221d);}Q['pushGpuMar'+'ker'](this['_device'],'COPY-RT:'+_0x511e4c['name']+'->'+this['name']);const _0x2885c1=this['_device']['copyRender'+'Target'](_0x511e4c,this,_0x5a31c6,_0x3062b9);return Q['popGpuMark'+'er'](this['_device']),_0x2885c1;}get['samples'](){return this['_samples'];}get['depth'](){return this['_depth'];}get['stencil'](){return this['_stencil'];}get['colorBuffe'+'r'](){return this['_colorBuff'+'er'];}['getColorBu'+'ffer'](_0x19c3c0){var _0x3a9e9b;return(_0x3a9e9b=this['_colorBuff'+'ers'])==null?void(-0x21c2+-0x2*-0x799+0x1290):_0x3a9e9b[_0x19c3c0];}get['depthBuffe'+'r'](){return this['_depthBuff'+'er'];}get['face'](){return this['_face'];}get['mipLevel'](){return this['_mipLevel'];}get['mipmaps'](){return this['_mipmaps'];}get['width'](){var _0x5b0b52,_0x33125d;let _0x1fb9db=((_0x5b0b52=this['_colorBuff'+'er'])==null?void(-0x23e8+-0x182*0x2+0x26ec):_0x5b0b52['width'])||((_0x33125d=this['_depthBuff'+'er'])==null?void(0xd6a*0x1+0x1ce+0x2*-0x79c):_0x33125d['width'])||this['_device']['width'];return this['_mipLevel']>0x1cb4*-0x1+0xc*-0x15+0x4c*0x64&&(_0x1fb9db=$i['calcLevelD'+'imension'](_0x1fb9db,this['_mipLevel'])),_0x1fb9db;}get['height'](){var _0x48398a,_0x2c0273;let _0x57a03e=((_0x48398a=this['_colorBuff'+'er'])==null?void(-0x180b+-0x1f9d+0x1a*0x224):_0x48398a['height'])||((_0x2c0273=this['_depthBuff'+'er'])==null?void(-0x4c4*-0x1+-0x236d*0x1+0x1ea9):_0x2c0273['height'])||this['_device']['height'];return this['_mipLevel']>0x1879+-0x514+-0x1365&&(_0x57a03e=$i['calcLevelD'+'imension'](_0x57a03e,this['_mipLevel'])),_0x57a03e;}['isColorBuf'+'ferSrgb'](_0x475b8a=0x8*-0xe3+0x262a+-0x1f12){if(this['device']['backBuffer']===this)return Wc(this['device']['backBuffer'+'Format']);const _0x5b917e=this['getColorBu'+'ffer'](_0x475b8a);return _0x5b917e?Wc(_0x5b917e['format']):!(-0x14ae+-0x1287+0xef*0x2a);}}const Yx={'equals'(_0xfdebd1,_0xd24786){if(_0xfdebd1['length']!==_0xd24786['length'])return!(0x1*-0xd84+-0xd6*-0x22+0x5*-0x2fb);for(let _0x8b5221=0x4c3+0x11e2*-0x2+-0x1*-0x1f01;_0x8b5221<_0xfdebd1['length'];_0x8b5221++)if(_0xfdebd1[_0x8b5221]!==_0xd24786[_0x8b5221])return!(-0x1023+0x3*-0x936+0x2bc6);return!(0x20cc+0x269d+-0x65*0xb5);}};class td{constructor(){h(this,'_refCount',0xb3*-0x34+-0x25d3*0x1+0x4a2f);}['incRefCoun'+'t'](){this['_refCount']++;}['decRefCoun'+'t'](){this['_refCount']--;}get['refCount'](){return this['_refCount'];}}class Kx extends td{constructor(_0x208ecc){super(),h(this,'object'),(this['object']=_0x208ecc,this['incRefCoun'+'t']());}}class Zx{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach'](_0x2641fb=>{var _0x5e8bf6;(_0x5e8bf6=_0x2641fb['object'])==null||_0x5e8bf6['destroy']();}),this['cache']['clear']();}['clear'](){this['cache']['clear']();}['get'](_0x8e31f3){const _0x123a18=this['cache']['get'](_0x8e31f3);return _0x123a18?(_0x123a18['incRefCoun'+'t'](),_0x123a18['object']):null;}['set'](_0x236e5a,_0x4db600){w['assert'](!this['cache']['has'](_0x236e5a),'RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'put\x20object'+'\x20with\x20key\x20'+'that\x20alrea'+'dy\x20exists\x20'+'in\x20the\x20cac'+'he',{'key':_0x236e5a,'object':_0x4db600}),this['cache']['set'](_0x236e5a,new Kx(_0x4db600));}['release'](_0x6e3803){var _0x3e8a5c;const _0x598e1b=this['cache']['get'](_0x6e3803);_0x598e1b?(_0x598e1b['decRefCoun'+'t'](),_0x598e1b['refCount']===0x7e0+0x7*-0x3e3+0x65*0x31&&(this['cache']['delete'](_0x6e3803),(_0x3e8a5c=_0x598e1b['object'])==null||_0x3e8a5c['destroy']())):w['warn']('RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'release\x20ob'+'ject\x20that\x20'+'is\x20not\x20in\x20'+'the\x20cache',{'key':_0x6e3803});}}class Qx extends Zx{['loseContex'+'t'](_0x3422e5){this['clear']();}}const Jx=new Kt(),ud=_0x574f80=>Jx['get'](_0x574f80,()=>new Qx()),At=[];At[$s]=0xda4+0x8d1+-0x1674,At[fa]=-0x22*-0x8+0x4a*-0x2b+0x20*0x5b,At[ds]=-0x1ca0+-0xd72+0x2a15,At[An]=0x14f+0x1*0x1a66+-0x93b*0x3,At[da]=-0x7*0x4e5+-0x1dd6+0x5*0xcd2,At[ra]=0x17b3+-0x4d5*-0x5+-0x2fda,At[aa]=-0x3d2+-0x28*0xf4+0x29f5,At[na]=0xb0*0x4+0xca6*-0x1+-0x1b*-0x5e,At[mn]=-0x289*0x4+0x1*0x43c+0x5e9,At[Go]=0x47*-0x5f+-0xd3b+0x2796,At[Ho]=0x1*-0x1a98+-0x1a79+0x3514,At[Wo]=0x6d2+0x1*0xab6+-0x4c*0x3b,At[jc]=0x744*0x2+-0xb7*-0x2+-0xfee,At[Cn]=-0x1c50+0x240d+0x1*-0x7b1,At[li]=0xdfa+0x421+-0x120b,At[Pn]=0x111c+-0x1*0x17f6+0x6db,At[Mn]=-0x2*0x4fa+0xd41+-0x34b,At[Dn]=0xaac+0x14c0+-0x1f69,At[In]=-0x692*0x2+-0x2a0+0xfc8;class dt{constructor(_0x59e954,_0x367194,_0x52860c=0x19c3+-0x3de*0x1+-0x5f*0x3b){h(this,'name'),h(this,'type'),h(this,'byteSize'),h(this,'offset'),h(this,'scopeId'),h(this,'count'),h(this,'numCompone'+'nts');if(this['shortName']=_0x59e954,this['name']=_0x52860c?_0x59e954+'[0]':_0x59e954,this['type']=_0x367194,this['numCompone'+'nts']=At[_0x367194],w['assert'](this['numCompone'+'nts'],'Unhandled\x20'+'uniform\x20fo'+'rmat\x20'+_0x367194+'\x20used\x20for\x20'+_0x59e954),this['updateType']=_0x367194,_0x52860c>-0x1a*-0x17e+0xc4*-0x23+0xc0*-0x10)switch(_0x367194){case $s:this['updateType']=$h;break;case da:this['updateType']=Ln;break;case Pn:this['updateType']=jh;break;case mn:this['updateType']=Yh;break;case fa:this['updateType']=Xh;break;case ra:this['updateType']=Rn;break;case Mn:this['updateType']=Kh;break;case Go:this['updateType']=Zh;break;case ds:this['updateType']=qh;break;case aa:this['updateType']=On;break;case Dn:this['updateType']=Qh;break;case Ho:this['updateType']=Jh;break;case An:this['updateType']=ap;break;case na:this['updateType']=Yc;break;case In:this['updateType']=np;break;case Wo:this['updateType']=op;break;case li:this['updateType']=VS;break;default:w['error']('Uniform\x20ar'+'ray\x20of\x20typ'+'e\x20'+GS[_0x367194]+('\x20is\x20not\x20su'+'pported\x20wh'+'en\x20process'+'ing\x20unifor'+'m\x20\x27')+_0x59e954+'\x27.'),w['call'](()=>{this['invalid']=!(0x359*0x3+0x917*-0x3+0x113a);});break;}this['count']=_0x52860c,w['assert'](!isNaN(_0x52860c),'Unsupporte'+'d\x20uniform:'+'\x20'+_0x59e954+'['+_0x52860c+']'),w['call'](()=>{isNaN(_0x52860c)&&(this['invalid']=!(0x3*-0x506+0x225f+-0x9*0x225));});let _0x48e3ba=this['numCompone'+'nts'];_0x52860c&&(_0x48e3ba=Y['roundUp'](_0x48e3ba,0x83a*-0x1+0x181a+-0xfdc)),this['byteSize']=_0x48e3ba*(-0xa5*0x5+-0x1b9f+0x1edc),_0x52860c&&(this['byteSize']*=_0x52860c),w['assert'](this['byteSize'],'Unknown\x20by'+'te\x20size\x20fo'+'r\x20uniform\x20'+'format\x20'+_0x367194+'\x20used\x20for\x20'+_0x59e954);}get['isArrayTyp'+'e'](){return this['count']>0x358+0x5a6+-0x47f*0x2;}['calculateO'+'ffset'](_0x9b9494){let _0xc17ef9=this['byteSize']<=-0xec+0x5*0x63+-0xfb?this['byteSize']:-0x198e+0x13*-0x1d+0x1bc5;this['count']&&(_0xc17ef9=-0x15*0xd6+-0xaf9*0x1+0x233*0xd),_0x9b9494=Y['roundUp'](_0x9b9494,_0xc17ef9),this['offset']=_0x9b9494/(-0x13e7+0xd1b+-0x10*-0x6d);}}class ry{constructor(_0x41d207,_0x207329){h(this,'byteSize',0x6d*0x44+-0x24d3*-0x1+-0x41c7*0x1),h(this,'map',new Map()),(this['scope']=_0x41d207['scope'],this['uniforms']=_0x207329);let _0x89603e=0x14b*-0xd+-0x6*-0x25f+0x295;for(let _0x1f901d=0x1d48*0x1+-0x76*0xe+-0x16d4;_0x1f901d<_0x207329['length'];_0x1f901d++){const _0x2feccd=_0x207329[_0x1f901d];_0x2feccd['calculateO'+'ffset'](_0x89603e),_0x89603e=_0x2feccd['offset']*(-0x774+0x1214+-0xc2*0xe)+_0x2feccd['byteSize'],_0x2feccd['scopeId']=this['scope']['resolve'](_0x2feccd['name']),this['map']['set'](_0x2feccd['name'],_0x2feccd);}this['byteSize']=Y['roundUp'](_0x89603e,0x13f5+0xf1*-0x29+-0x12*-0x10a);}['get'](_0x352071){return this['map']['get'](_0x352071);}}const Pr='Preprocess'+'or',Os=/[ \t]*#(ifn?def|if|endif|else|elif|define|undef|extension|include)/g,pd=/define[ \t]+([^\n]+)\r?(?:\n|$)/g,Mm=/extension[ \t]+([\w-]+)[ \t]*:[ \t]*(enable|require)/g,md=/undef[ \t]+([^\n]+)\r?(?:\n|$)/g,_d=/(ifdef|ifndef|if)[ \t]*([^\r\n]+)\r?\n/g,gd=/(endif|else|elif)(?:[ \t]+([^\r\n]*))?\r?\n?/g,Dm=/\{?[\w-]+\}?/,eT=/(!|\s)?defined\(([\w-]+)\)/,tT=/!?defined\s*\([^)]*\)/g,sT=/!?defined\s*$/,iT=/([a-z_]\w*)\s*(==|!=|<|<=|>|>=)\s*([\w"']+)/i,rT=/[+\-]/g,Sd=/include[ \t]+"([\w-]+)(?:\s*,\s*([\w-]+))?"/g,aT=/\{i\}/g,Im=/(pcFragColor[1-8])\b/g,Lt=class Lt{static['run'](_0x4d317b,_0x5043da=new Map(),_0x20df22={}){Lt['sourceName']=_0x20df22['sourceName'],_0x4d317b=this['stripComme'+'nts'](_0x4d317b),_0x4d317b=_0x4d317b['split'](/\r?\n/)['map'](_0x1af958=>_0x1af958['trimEnd']())['join']('\x0a');const _0x424d7a=new Map(),_0xefc1ce=new Map();if(_0x4d317b=this['_preproces'+'s'](_0x4d317b,_0x424d7a,_0xefc1ce,_0x5043da,_0x20df22['stripDefin'+'es']),_0x4d317b===null)return null;const _0x3a4f2e=new Map();return _0x424d7a['forEach']((_0x22d75f,_0x261b05)=>{Number['isInteger'](parseFloat(_0x22d75f))&&!_0x22d75f['includes']('.')&&_0x3a4f2e['set'](_0x261b05,_0x22d75f);}),_0x4d317b=this['stripComme'+'nts'](_0x4d317b),_0x4d317b=this['stripUnuse'+'dColorAtta'+'chments'](_0x4d317b,_0x20df22),_0x4d317b=this['RemoveEmpt'+'yLines'](_0x4d317b),_0x4d317b=this['processArr'+'aySize'](_0x4d317b,_0x3a4f2e),_0x4d317b=this['injectDefi'+'nes'](_0x4d317b,_0xefc1ce),_0x4d317b;}static['stripUnuse'+'dColorAtta'+'chments'](_0x3e61e8,_0x1e2425){if(_0x1e2425['stripUnuse'+'dColorAtta'+'chments']){const _0x5ea9d0=new Map(),_0x210d7d=_0x3e61e8['match'](Im);if(_0x210d7d==null||_0x210d7d['forEach'](_0x2b9cb9=>{const _0x9c22d4=parseInt(_0x2b9cb9['charAt'](_0x2b9cb9['length']-(-0x30*-0x17+-0x10a7+0xc58)),-0xffd*-0x2+-0x21*0x59+-0x1477);_0x5ea9d0['set'](_0x9c22d4,(_0x5ea9d0['get'](_0x9c22d4)??-0x84c+0xb*0x200+0x4*-0x36d)+(-0x1935+0x3*-0x64f+0x2c23));}),Array['from'](_0x5ea9d0['values']())['some'](_0x323b4a=>_0x323b4a===-0x7d0*0x1+0x17d3*-0x1+0x1fa4)){const _0x509eac=_0x3e61e8['split']('\x0a'),_0x2ef7c9=[];for(let _0xe472c9=0x1*-0x20a1+-0xab1+-0x8aa*-0x5;_0xe472c9<_0x509eac['length'];_0xe472c9++){const _0x5194e1=_0x509eac[_0xe472c9]['match'](Im);if(_0x5194e1){const _0x4ceb78=parseInt(_0x5194e1[0xe5*-0x1+0x29*0x43+-0x2*0x4eb]['charAt'](_0x5194e1[-0x1*-0x2441+-0xf4e+-0x14f3]['length']-(-0x71*-0x4b+-0xa8f+-0x168b*0x1)),-0x1a41+-0xc0c+0x41*0x97);if(_0x4ceb78>-0x1*-0x1e9d+0x1*-0x1d9f+0xfe*-0x1&&_0x5ea9d0['get'](_0x4ceb78)===-0x273+-0x2044+0x22b8)continue;}_0x2ef7c9['push'](_0x509eac[_0xe472c9]);}_0x3e61e8=_0x2ef7c9['join']('\x0a');}}return _0x3e61e8;}static['stripComme'+'nts'](_0x1d3fec){return _0x1d3fec['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1');}static['processArr'+'aySize'](_0x4b087f,_0x203ab6){return _0x4b087f!==null&&_0x203ab6['forEach']((_0x5cf569,_0x30ec21)=>{_0x4b087f=_0x4b087f['replace'](new RegExp('\x5c['+_0x30ec21+'\x5c]','g'),'['+_0x5cf569+']');}),_0x4b087f;}static['injectDefi'+'nes'](_0x1e3887,_0x581a15){if(_0x1e3887!==null&&_0x581a15['size']>0x217c+-0x25fe+-0x241*-0x2){const _0x253cb7=_0x1e3887['split']('\x0a');_0x581a15['forEach']((_0x459890,_0xf0e414)=>{const _0xe362e8=new RegExp(_0xf0e414,'g');for(let _0x41d373=0x1*-0x31d+0xcb*-0x15+0x13c4;_0x41d373<_0x253cb7['length'];_0x41d373++)_0x253cb7[_0x41d373]['includes']('#')||(_0x253cb7[_0x41d373]=_0x253cb7[_0x41d373]['replace'](_0xe362e8,_0x459890));}),_0x1e3887=_0x253cb7['join']('\x0a');}return _0x1e3887;}static['RemoveEmpt'+'yLines'](_0x5927b4){return _0x5927b4!==null&&(_0x5927b4=_0x5927b4['split'](/\r?\n/)['map'](_0x2ee9a0=>_0x2ee9a0['trim']()===''?'':_0x2ee9a0)['join']('\x0a'),_0x5927b4=_0x5927b4['replace'](/(\n\n){3,}/g,'\x0a\x0a')),_0x5927b4;}static['_preproces'+'s'](_0x4eb094,_0x522089=new Map(),_0x5e98ed,_0x35eaa9,_0x5ae0fa){var _0x532bfe;const _0x2446fc=_0x4eb094,_0x5f067e=[];let _0x24d149=!(-0x1*-0x1a82+0x70f*-0x1+-0x9b9*0x2),_0x364119;for(;(_0x364119=Os['exec'](_0x4eb094))!==null&&!_0x24d149;){const _0x3f9ff5=_0x364119[0xde*0x7+-0x3c2+0xc5*-0x3];switch(_0x3f9ff5){case'define':{pd['lastIndex']=_0x364119['index'];const _0x4ce865=pd['exec'](_0x4eb094);w['assert'](_0x4ce865,'Invalid\x20['+_0x3f9ff5+']:\x20'+_0x4eb094['substring'](_0x364119['index'],_0x364119['index']+(-0x1999*0x1+0x2*-0x11f4+-0x3de5*-0x1))+'...'),_0x24d149||(_0x24d149=_0x4ce865===null);const _0x153267=_0x4ce865[-0xf95*0x1+0xb*0x109+0x5*0xd7];Dm['lastIndex']=_0x4ce865['index'];const _0x2c340a=Dm['exec'](_0x153267)[-0x10c7+0x2*-0xdb7+0x2c35];let _0x71432a=_0x153267['substring'](_0x2c340a['length'])['trim']();_0x71432a===''&&(_0x71432a='true');const _0x205cd0=Lt['_keep'](_0x5f067e);let _0x49b113=_0x5ae0fa;if(_0x205cd0){const _0x198ace=_0x2c340a['startsWith']('{')&&_0x2c340a['endsWith']('}');_0x198ace&&(_0x49b113=!(0xd98+-0x1524*-0x1+-0x13*0x1d4)),_0x198ace?_0x5e98ed['set'](_0x2c340a,_0x71432a):_0x522089['set'](_0x2c340a,_0x71432a),_0x49b113&&(_0x4eb094=_0x4eb094['substring'](0x2109+0x3e*-0x19+-0x1afb,_0x4ce865['index']-(-0x1985+-0x156b+0x2ef1))+_0x4eb094['substring'](pd['lastIndex']),Os['lastIndex']=_0x4ce865['index']-(0x2683+-0x13cf+-0x12b3*0x1));}w['trace'](Pr,_0x3f9ff5+':\x20['+_0x2c340a+']\x20'+_0x71432a+'\x20'+(_0x205cd0?'':'IGNORED')),_0x49b113||(Os['lastIndex']=_0x4ce865['index']+_0x4ce865[0x1f1*-0xe+-0x240*0x5+0x1*0x266e]['length']);break;}case'undef':{md['lastIndex']=_0x364119['index'];const _0x222b69=md['exec'](_0x4eb094),_0xdbae3f=_0x222b69[-0x1899+-0x3a4+0x1c3e]['trim'](),_0x508e86=Lt['_keep'](_0x5f067e);_0x508e86&&(_0x522089['delete'](_0xdbae3f),_0x5ae0fa&&(_0x4eb094=_0x4eb094['substring'](-0x2*0xe4d+0xd0c*-0x2+-0x36b2*-0x1,_0x222b69['index']-(0x23e9+-0x1*-0xa35+-0x3*0xf5f))+_0x4eb094['substring'](md['lastIndex']),Os['lastIndex']=_0x222b69['index']-(0x17f7+-0x6a+-0x224*0xb))),w['trace'](Pr,_0x3f9ff5+':\x20['+_0xdbae3f+']\x20'+(_0x508e86?'':'IGNORED')),_0x5ae0fa||(Os['lastIndex']=_0x222b69['index']+_0x222b69[-0x24c1*0x1+0x1437*0x1+0x108a]['length']);break;}case'extension':{Mm['lastIndex']=_0x364119['index'];const _0x1ec8b7=Mm['exec'](_0x4eb094);if(w['assert'](_0x1ec8b7,'Invalid\x20['+_0x3f9ff5+']:\x20'+_0x4eb094['substring'](_0x364119['index'],_0x364119['index']+(-0x7a1+0x763*0x1+0x3*0x36))+'...'),_0x24d149||(_0x24d149=_0x1ec8b7===null),_0x1ec8b7){const _0x11dd3d=_0x1ec8b7[-0x1188+0x909*-0x1+0x1a92],_0x6475e2=Lt['_keep'](_0x5f067e);_0x6475e2&&_0x522089['set'](_0x11dd3d,'true'),w['trace'](Pr,_0x3f9ff5+':\x20['+_0x11dd3d+']\x20'+(_0x6475e2?'':'IGNORED'));}Os['lastIndex']=_0x1ec8b7['index']+_0x1ec8b7[-0x6a+0x1bef+-0x1b85]['length'];break;}case'ifdef':case'ifndef':case'if':{_d['lastIndex']=_0x364119['index'];const _0xd19387=_d['exec'](_0x4eb094),_0x52bab1=_0xd19387[0x157c+0x1f99+-0x3513],_0x251684=Lt['evaluate'](_0x52bab1,_0x522089);_0x24d149||(_0x24d149=_0x251684['error']);let _0x27e2c7=_0x251684['result'];_0x3f9ff5==='ifndef'&&(_0x27e2c7=!_0x27e2c7),_0x5f067e['push']({'anyKeep':_0x27e2c7,'keep':_0x27e2c7,'start':_0x364119['index'],'end':_d['lastIndex']}),w['trace'](Pr,_0x3f9ff5+':\x20['+_0x52bab1+']\x20=>\x20'+_0x27e2c7),Os['lastIndex']=_0xd19387['index']+_0xd19387[-0x21f9+0x1a9a+0x75f]['length'];break;}case'endif':case'else':case'elif':{gd['lastIndex']=_0x364119['index'];const _0x4d8884=gd['exec'](_0x4eb094),_0x103397=_0x5f067e['pop']();if(!_0x103397){console['error']('Shader\x20pre'+'processing'+'\x20encounter'+'ed\x20\x22#'+_0x4d8884[0x1dc+-0x2*-0x11cf+-0x1*0x2579]+('\x22\x20without\x20'+'a\x20precedin'+'g\x20#if\x20#ifd'+'ef\x20#ifndef'+'\x20while\x20pre'+'processing'+'\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x4eb094['substring'](_0x364119['index'],_0x364119['index']+(0x22af+-0x1847+-0x4*0x281))+'...',{'source':_0x2446fc}),_0x24d149=!(-0x21a2+-0xe43+0x2fe5);continue;}const _0x2fa24f=_0x103397['keep']?_0x4eb094['substring'](_0x103397['end'],_0x364119['index']):'';w['trace'](Pr,_0x3f9ff5+(':\x20[previou'+'s\x20block]\x20='+'>\x20')+(_0x2fa24f!=='')),_0x4eb094=_0x4eb094['substring'](-0x1cce+-0xa*-0x1b1+-0x2*-0x5f2,_0x103397['start'])+_0x2fa24f+_0x4eb094['substring'](gd['lastIndex']),Os['lastIndex']=_0x103397['start']+_0x2fa24f['length'];const _0x273683=_0x4d8884[0x6*-0x229+0x1*0x24a0+-0x3*0x7e3];if(_0x273683==='else'||_0x273683==='elif'){let _0x3189b1=!(-0x24eb+0xcc6+-0x1*-0x1826);if(!_0x103397['anyKeep']){if(_0x273683==='else')_0x3189b1=!_0x103397['keep'];else{const _0x4543ce=Lt['evaluate'](_0x4d8884[-0x24*0x22+-0x107*-0x5+-0x59],_0x522089);_0x3189b1=_0x4543ce['result'],_0x24d149||(_0x24d149=_0x4543ce['error']);}}_0x5f067e['push']({'anyKeep':_0x103397['anyKeep']||_0x3189b1,'keep':_0x3189b1,'start':Os['lastIndex'],'end':Os['lastIndex']}),w['trace'](Pr,_0x3f9ff5+':\x20['+_0x4d8884[0x98+-0x14*0x101+0x137e]+']\x20=>\x20'+_0x3189b1);}break;}case'include':{Sd['lastIndex']=_0x364119['index'];const _0x14635f=Sd['exec'](_0x4eb094);if(_0x24d149||(_0x24d149=_0x14635f===null),!_0x14635f){w['assert'](_0x14635f,'Invalid\x20['+_0x3f9ff5+(']\x20while\x20pr'+'eprocessin'+'g\x20')+Lt['sourceName']+':\x0a'+_0x4eb094['substring'](_0x364119['index'],_0x364119['index']+(-0x224d+-0x50*0x6+0x2491))+'...'),_0x24d149=!(-0x165e+0x1ec4+-0x866);continue;}const _0xf0e737=_0x14635f[-0x695*0x3+-0x1*-0x7cd+-0x1*-0xbf3]['trim'](),_0x27ce9d=(_0x532bfe=_0x14635f[0xdab+-0x19dd+0xc34])==null?void(0x2256+0x6*-0x27a+-0x137a):_0x532bfe['trim'](),_0x12a634=Lt['_keep'](_0x5f067e);if(_0x12a634){let _0x431e00=_0x35eaa9==null?void(0x1*0xc5b+0x2*0x35f+-0x1319*0x1):_0x35eaa9['get'](_0xf0e737);if(_0x431e00!==void(-0x1711+0x1*0x1b8f+-0x47e)){if(_0x431e00=this['stripComme'+'nts'](_0x431e00),_0x27ce9d){const _0x180033=_0x522089['get'](_0x27ce9d),_0xb6a4a5=parseFloat(_0x180033);if(Number['isInteger'](_0xb6a4a5)){let _0x4cba79='';for(let _0x12917a=-0xb15+-0x145b+-0x8*-0x3ee;_0x12917a<_0xb6a4a5;_0x12917a++)_0x4cba79+=_0x431e00['replace'](aT,String(_0x12917a));_0x431e00=_0x4cba79;}else console['error']('Include\x20Co'+'unt\x20identi'+'fier\x20\x22'+_0x27ce9d+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x4eb094['substring'](_0x364119['index'],_0x364119['index']+(-0x11*0x42+-0x3*-0x897+-0x14ff))+'...',{'originalSource':_0x2446fc,'source':_0x4eb094}),_0x24d149=!(0x26d2+-0x1647+0x23*-0x79);}_0x4eb094=_0x4eb094['substring'](0x1ded+0xac+-0x1*0x1e99,_0x14635f['index']-(-0x4*-0x67a+-0x836+-0x11b1))+_0x431e00+_0x4eb094['substring'](Sd['lastIndex']),Os['lastIndex']=_0x14635f['index']-(-0x36e*-0xa+-0x5f7*0x1+-0x25*0xc4);}else{console['error']('Include\x20\x22'+_0xf0e737+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName'],{'originalSource':_0x2446fc,'source':_0x4eb094}),_0x24d149=!(-0xe84+0xba9+0x2db*0x1);continue;}}w['trace'](Pr,_0x3f9ff5+':\x20['+_0xf0e737+']\x20'+(_0x12a634?'':'IGNORED'));break;}}}return _0x5f067e['length']>0x65*0x4f+-0x173f+-0x7ec&&(console['error']('Shader\x20pre'+'processing'+'\x20reached\x20t'+'he\x20end\x20of\x20'+'the\x20file\x20w'+'ithout\x20enc'+'ountering\x20'+'the\x20necess'+'ary\x20#endif'+'\x20to\x20close\x20'+'a\x20precedin'+'g\x20#if,\x20#if'+'def,\x20or\x20#i'+'fndef\x20bloc'+'k.\x20'+Lt['sourceName']),_0x24d149=!(0x1*0x925+-0x4e*0x4+-0x7ed)),_0x24d149?(console['error']('Failed\x20to\x20'+'preprocess'+'\x20shader:\x20',{'source':_0x2446fc}),null):_0x4eb094;}static['_keep'](_0x5867ca){for(let _0x1257a1=-0x7e4+0xebf*-0x1+0x16a3*0x1;_0x1257a1<_0x5867ca['length'];_0x1257a1++)if(!_0x5867ca[_0x1257a1]['keep'])return!(0x79*-0x33+-0x546*0x2+0x8aa*0x4);return!(-0x26e4+0x1fd+0x24e7);}static['evaluateAt'+'omicExpres'+'sion'](_0x4b00cf,_0x1ff1b5){let _0x473c49=!(-0x1b10+-0x5e*-0x4f+-0x1f1);_0x4b00cf=_0x4b00cf['trim']();let _0x47f92b=!(-0x1a*0x112+-0x72*-0xf+-0x169*-0xf);if(_0x4b00cf==='true')return{'result':!(0x1d1b+-0x83*0x38+0x17*-0x5),'error':_0x473c49};if(_0x4b00cf==='false')return{'result':!(-0x1658+0x3c2+0x1297),'error':_0x473c49};const _0x1000a1=eT['exec'](_0x4b00cf);if(_0x1000a1){_0x47f92b=_0x1000a1[-0x6*0x64a+0x25fd*-0x1+0x4bba]==='!',_0x4b00cf=_0x1000a1[-0xf07*0x1+-0x1661*0x1+0x256a]['trim']();const _0x380dcb=_0x1ff1b5['has'](_0x4b00cf);return{'result':_0x47f92b?!_0x380dcb:_0x380dcb,'error':_0x473c49};}const _0x5a4811=iT['exec'](_0x4b00cf);if(_0x5a4811){const _0x5c5d2b=_0x1ff1b5['get'](_0x5a4811[-0xb9*0x20+-0x170f*0x1+-0x2e3*-0x10]['trim']())??_0x5a4811[0x1ca2+0x1a38+-0x36d9]['trim'](),_0x59fb68=_0x1ff1b5['get'](_0x5a4811[-0xe8e+0xd81+0x88*0x2]['trim']())??_0x5a4811[-0x1d*-0x2b+0x9a7*0x3+0x313*-0xb]['trim'](),_0x2e7f3d=_0x5a4811[0xf37*-0x1+-0x28c+-0x11c5*-0x1]['trim']();let _0x575af6=!(-0x1b41*-0x1+-0x2ef+-0x1851);switch(_0x2e7f3d){case'==':_0x575af6=_0x5c5d2b===_0x59fb68;break;case'!=':_0x575af6=_0x5c5d2b!==_0x59fb68;break;case'<':_0x575af6=_0x5c5d2b<_0x59fb68;break;case'<=':_0x575af6=_0x5c5d2b<=_0x59fb68;break;case'>':_0x575af6=_0x5c5d2b>_0x59fb68;break;case'>=':_0x575af6=_0x5c5d2b>=_0x59fb68;break;default:_0x473c49=!(0x12cd*-0x2+-0x302+-0x2*-0x144e);}return{'result':_0x575af6,'error':_0x473c49};}return{'result':_0x1ff1b5['has'](_0x4b00cf),'error':_0x473c49};}static['processPar'+'entheses'](_0x4c153e,_0x5e9395){let _0x495d8b=!(-0x765+-0x4c*-0x7d+-0x1*0x1db6),_0x4d2ee8=_0x4c153e['trim']();for(;_0x4d2ee8['startsWith']('(')&&_0x4d2ee8['endsWith'](')');){let _0x321b70=0x611*-0x3+-0x1*0xa31+0x1c64,_0x13d01d=!(0x2*-0x617+-0x2210+0x6*0x7b5);for(let _0x147458=-0xaa4+0xf07+-0x463*0x1;_0x147458<_0x4d2ee8['length']-(0x23*0x1b+-0x641*-0x2+-0x1032);_0x147458++)if(_0x4d2ee8[_0x147458]==='(')_0x321b70++;else{if(_0x4d2ee8[_0x147458]===')'&&(_0x321b70--,_0x321b70===-0x6b9+0x8e4*0x2+-0xb0f)){_0x13d01d=!(-0x1*-0xa13+0x1dfb+0x280d*-0x1);break;}}if(_0x13d01d)_0x4d2ee8=_0x4d2ee8['slice'](0x1428+0x1d68+-0x318f,-(0x1e83+0xb63+-0x29e5))['trim']();else break;}for(;;){let _0x48f51d=!(-0x1c*-0x2f+-0x2fe+-0x225),_0x4f096f=-0x1*-0x25ac+0x1100+0x4*-0xdab,_0x16ceea=-0x72d*0x2+-0x1766+0x25c0,_0x2cad4d=-(-0x1a87+-0x4e+0x1*0x1ad6),_0x2bf97c=-(0x1554+-0x2*0x886+-0x447),_0x3bc4fd=0x2303*0x1+-0x3dd+-0x1f26;for(let _0x19cc81=0x15da+0x146+-0x1720;_0x19cc81<_0x4d2ee8['length'];_0x19cc81++)if(_0x4d2ee8[_0x19cc81]==='('){const _0x4afd07=_0x4d2ee8['substring'](-0x2177+0x22aa+-0x133,_0x19cc81);sT['test'](_0x4afd07)?_0x3bc4fd++:_0x3bc4fd===-0x187f+-0x314+0x1b93&&(_0x4f096f++,_0x4f096f>_0x16ceea&&(_0x16ceea=_0x4f096f,_0x2cad4d=_0x19cc81),_0x48f51d=!(0x1*0xa5b+-0x1*0x1887+0x1*0xe2c));}else _0x4d2ee8[_0x19cc81]===')'&&(_0x3bc4fd>0x1327*0x1+0x18df*0x1+-0x2c06?_0x3bc4fd--:_0x4f096f>0xb1*-0x1c+0x25b+0x5ab*0x3&&(_0x4f096f===_0x16ceea&&_0x2cad4d!==-(0x8*-0x486+-0x329*0x8+-0x3d79*-0x1)&&(_0x2bf97c=_0x19cc81),_0x4f096f--));if(!_0x48f51d||_0x2cad4d===-(0x2c*-0xd+0xef*0x13+-0x7c*0x20)||_0x2bf97c===-(-0xbaf+-0x1*-0x1849+-0xc99))break;const _0x15ff24=_0x4d2ee8['substring'](_0x2cad4d+(-0x3*-0x4+-0x212d+0x2122),_0x2bf97c),{result:_0x12d2a8,error:_0x2ea896}=Lt['evaluate'](_0x15ff24,_0x5e9395);_0x495d8b=_0x495d8b||_0x2ea896,_0x4d2ee8=_0x4d2ee8['substring'](-0x4*0x423+0x2bb*0x2+-0x56*-0x21,_0x2cad4d)+(_0x12d2a8?'true':'false')+_0x4d2ee8['substring'](_0x2bf97c+(0x67*-0x8+-0xd34+0x106d));}return{'expression':_0x4d2ee8,'error':_0x495d8b};}static['evaluate'](_0x412fea,_0x5e9323){const _0x28ce9c=rT['exec'](_0x412fea)===null;w['assert'](_0x28ce9c,'Resolving\x20'+'expression'+'\x20like\x20this'+'\x20is\x20not\x20su'+'pported:\x20'+_0x412fea);let _0x22ed0c=_0x412fea,_0x25356b=!(-0xaec+0x435*-0x9+-0x30ca*-0x1);if(_0x412fea['replace'](tT,'')['indexOf']('(')!==-(0x5*0x3f1+-0x1573+0x1bf)){const _0x10bc47=Lt['processPar'+'entheses'](_0x412fea,_0x5e9323);_0x22ed0c=_0x10bc47['expression'],_0x25356b=_0x10bc47['error'];}if(_0x25356b)return w['log']('Parenthesi'+'s\x20parsing\x20'+'error\x20in\x20e'+'xpression:'+'\x20\x22'+_0x412fea+'\x22'),{'result':!(-0x2*0x324+0x1abf*0x1+-0x1476),'error':!(-0x3*0xbff+0x2288+0x175)};const _0x279325=_0x22ed0c['split']('||');for(const _0x34168b of _0x279325){const _0x44ab7a=_0x34168b['split']('&&');let _0x57837b=!(0x7f*-0x3d+0x1*-0x1423+-0x3266*-0x1);for(const _0x326e47 of _0x44ab7a){const {result:_0x5a9417,error:_0x1ea18c}=Lt['evaluateAt'+'omicExpres'+'sion'](_0x326e47['trim'](),_0x5e9323);if(!_0x5a9417||_0x1ea18c){_0x57837b=!(0xd19+0x2382+-0x309a);break;}}if(_0x57837b)return{'result':!(0xa26+-0x8b*-0x11+-0x1361),'error':!_0x28ce9c};}return{'result':!(0x13*-0xe+0x1*0x234b+-0x2240),'error':!_0x28ce9c};}};h(Lt,'sourceName');let bo=Lt;const ay='\x0a\x0a#ifndef\x20'+'outType_0\x0a'+'#define\x20ou'+'tType_0\x20ve'+'c4\x0a#endif\x0a'+'\x0alayout(lo'+'cation\x20=\x200'+')\x20out\x20high'+'p\x20outType_'+'0\x20pcFragCo'+'lor0;\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_1\x0a'+'layout(loc'+'ation\x20=\x201)'+'\x20out\x20highp'+'\x20outType_1'+'\x20pcFragCol'+'or1;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_2\x0alayo'+'ut(locatio'+'n\x20=\x202)\x20out'+'\x20highp\x20out'+'Type_2\x20pcF'+'ragColor2;'+'\x0a#endif\x0a\x0a#'+'if\x20COLOR_A'+'TTACHMENT_'+'3\x0alayout(l'+'ocation\x20=\x20'+'3)\x20out\x20hig'+'hp\x20outType'+'_3\x20pcFragC'+'olor3;\x0a#en'+'dif\x0a\x0a#if\x20C'+'OLOR_ATTAC'+'HMENT_4\x0ala'+'yout(locat'+'ion\x20=\x204)\x20o'+'ut\x20highp\x20o'+'utType_4\x20p'+'cFragColor'+'4;\x0a#endif\x0a'+'\x0a#if\x20COLOR'+'_ATTACHMEN'+'T_5\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0a#'+'endif\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_6\x0a'+'layout(loc'+'ation\x20=\x206)'+'\x20out\x20highp'+'\x20outType_6'+'\x20pcFragCol'+'or6;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_7\x0alayo'+'ut(locatio'+'n\x20=\x207)\x20out'+'\x20highp\x20out'+'Type_7\x20pcF'+'ragColor7;'+'\x0a#endif\x0a\x0a#'+'define\x20gl_'+'FragColor\x20'+'pcFragColo'+'r0\x0a\x0a#defin'+'e\x20varying\x20'+'in\x0a\x0a#defin'+'e\x20texture2'+'D\x20texture\x0a'+'#define\x20te'+'xture2DBia'+'s\x20texture\x0a'+'#define\x20te'+'xtureCube\x20'+'texture\x0a#d'+'efine\x20text'+'ure2DProj\x20'+'texturePro'+'j\x0a#define\x20'+'texture2DL'+'od\x20texture'+'Lod\x0a#defin'+'e\x20texture2'+'DProjLod\x20t'+'extureProj'+'Lod\x0a#defin'+'e\x20textureC'+'ubeLod\x20tex'+'tureLod\x0a#d'+'efine\x20text'+('ure2DGrad\x20'+'textureGra'+'d\x0a#define\x20'+'texture2DP'+'rojGrad\x20te'+'xtureProjG'+'rad\x0a#defin'+'e\x20textureC'+'ubeGrad\x20te'+'xtureGrad\x0a'+'#define\x20ut'+'exture2D\x20t'+'exture\x0a#de'+'fine\x20itext'+'ure2D\x20text'+'ure\x0a\x0a//\x20de'+'precated\x20d'+'efines\x0a#de'+'fine\x20textu'+'re2DLodEXT'+'\x20texture2D'+'LodEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DLod_ins'+'tead\x0a#defi'+'ne\x20texture'+'2DProjLodE'+'XT\x20texture'+'2DProjLodE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DP'+'rojLod\x0a#de'+'fine\x20textu'+'reCubeLodE'+'XT\x20texture'+'CubeLodEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeL'+'od_instead'+'\x0a#define\x20t'+'exture2DGr'+'adEXT\x20text'+'ure2DGradE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DG'+'rad_instea'+'d\x0a#define\x20'+'texture2DP'+'rojGradEXT'+'\x20texture2D'+'ProjGradEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DPr'+'ojGrad_ins'+'tead\x0a#defi'+'ne\x20texture'+'CubeGradEX'+'T\x20textureC'+'ubeGradEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeG'+'rad_instea'+'d\x0a\x0a//\x20samp'+'le\x20shadows'+'\x20using\x20tex'+'tureGrad\x20t'+'o\x20remove\x20d'+'erivatives'+'\x20in\x20the\x20dy'+'namic\x20loop'+'s\x20(which\x20a'+'re\x20used\x20by'+'\x0a//\x20cluste'+'red\x20lighti'+'ng)\x20-\x20as\x20D'+'irectX\x20sha'+'der\x20compil'+'er\x20tries\x20t'+'o\x20unroll\x20t'+'he\x20loops\x20a'+'nd\x20takes\x20l'+'ong\x20time\x0a/'+'/\x20to\x20compi'+'le\x20the\x20sha'+'der.\x20Using'+'\x20textureLo'+'d\x20would\x20be'+'\x20even\x20bett')+('er,\x20but\x20We'+'bGl\x20does\x20n'+'ot\x20transla'+'te\x20it\x20to\x0a/'+'/\x20lod\x20inst'+'ruction\x20fo'+'r\x20DirectX\x20'+'correctly\x20'+'and\x20uses\x20S'+'ampleCmp\x20i'+'nstead\x20of\x20'+'SampleCmpL'+'evelZero\x20o'+'r\x20similar.'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureG'+'rad(res,\x20u'+'v,\x20vec2(1,'+'\x201),\x20vec2('+'1,\x201))\x0a\x0a//'+'\x20pass\x20/\x20ac'+'cept\x20shado'+'w\x20map\x20or\x20t'+'exture\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20on\x20webgl'+'\x20this\x20is\x20s'+'imply\x20pass'+'ed\x20as\x20is\x0a/'+'/\x20but\x20this'+'\x20is\x20needed'+'\x20for\x20WebGP'+'U\x0a#define\x20'+'SHADOWMAP_'+'PASS(name)'+'\x20name\x0a#def'+'ine\x20SHADOW'+'MAP_ACCEPT'+'(name)\x20sam'+'pler2DShad'+'ow\x20name\x0a#d'+'efine\x20TEXT'+'URE_PASS(n'+'ame)\x20name\x0a'+'#define\x20TE'+'XTURE_ACCE'+'PT(name)\x20s'+'ampler2D\x20n'+'ame\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP(name)\x20h'+'ighp\x20sampl'+'er2D\x20name\x0a'+'\x0a#define\x20G'+'L2\x0a'),ny='\x0a#define\x20a'+'ttribute\x20i'+'n\x0a#define\x20'+'varying\x20ou'+'t\x0a#define\x20'+'texture2D\x20'+'texture\x0a#d'+'efine\x20utex'+'ture2D\x20tex'+'ture\x0a#defi'+'ne\x20itextur'+'e2D\x20textur'+'e\x0a#define\x20'+'GL2\x0a#defin'+'e\x20VERTEXSH'+'ADER\x0a\x0a#def'+'ine\x20TEXTUR'+'E_PASS(nam'+'e)\x20name\x0a#d'+'efine\x20TEXT'+'URE_ACCEPT'+'(name)\x20sam'+'pler2D\x20nam'+'e\x0a#define\x20'+'TEXTURE_AC'+'CEPT_HIGHP'+'(name)\x20hig'+'hp\x20sampler'+'2D\x20name\x0a',oy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#ifnde'+'f\x20outType_'+'0\x0a#define\x20'+'outType_0\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_1\x0a'+'#define\x20ou'+'tType_1\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_2\x0a#d'+'efine\x20outT'+'ype_2\x20vec4'+'\x0a#endif\x0a#i'+'fndef\x20outT'+'ype_3\x0a#def'+'ine\x20outTyp'+'e_3\x20vec4\x0a#'+'endif\x0a#ifn'+'def\x20outTyp'+'e_4\x0a#defin'+'e\x20outType_'+'4\x20vec4\x0a#en'+'dif\x0a#ifnde'+'f\x20outType_'+'5\x0a#define\x20'+'outType_5\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_6\x0a'+'#define\x20ou'+'tType_6\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_7\x0a#d'+'efine\x20outT'+'ype_7\x20vec4'+'\x0a#endif\x0a\x0al'+'ayout(loca'+'tion\x20=\x200)\x20'+'out\x20highp\x20'+'outType_0\x20'+'pcFragColo'+'r0;\x0alayout'+'(location\x20'+'=\x201)\x20out\x20h'+'ighp\x20outTy'+'pe_1\x20pcFra'+'gColor1;\x0al'+'ayout(loca'+'tion\x20=\x202)\x20'+'out\x20highp\x20'+'outType_2\x20'+'pcFragColo'+'r2;\x0alayout'+'(location\x20'+'=\x203)\x20out\x20h'+'ighp\x20outTy'+'pe_3\x20pcFra'+'gColor3;\x0al'+'ayout(loca'+'tion\x20=\x204)\x20'+'out\x20highp\x20'+'outType_4\x20'+'pcFragColo'+'r4;\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0al'+'ayout(loca'+'tion\x20=\x206)\x20'+'out\x20highp\x20'+'outType_6\x20'+'pcFragColo'+'r6;\x0alayout'+'(location\x20'+'=\x207)\x20out\x20h'+'ighp\x20outTy'+'pe_7\x20pcFra'+'gColor7;\x0a\x0a'+'#define\x20gl'+'_FragColor'+'\x20pcFragCol'+'or0\x0a\x0a#defi'+'ne\x20texture'+'2D(res,\x20uv'+')\x20texture('+'sampler2D('+('res,\x20res\x20#'+'#\x20_sampler'+'),\x20uv)\x0a#de'+'fine\x20textu'+'re2DBias(r'+'es,\x20uv,\x20bi'+'as)\x20textur'+'e(sampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv,\x20b'+'ias)\x0a#defi'+'ne\x20texture'+'2DLod(res,'+'\x20uv,\x20lod)\x20'+'textureLod'+'(sampler2D'+'(res,\x20res\x20'+'##\x20_sample'+'r),\x20uv,\x20lo'+'d)\x0a#define'+'\x20textureCu'+'be(res,\x20uv'+')\x20texture('+'samplerCub'+'e(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a#'+'define\x20tex'+'tureCubeLo'+'d(res,\x20uv,'+'\x20lod)\x20text'+'ureLod(sam'+'plerCube(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x20lod)'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureL'+'od(sampler'+'2DShadow(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x200.0)'+'\x0a#define\x20i'+'texture2D('+'res,\x20uv)\x20t'+'exture(isa'+'mpler2D(re'+'s,\x20res\x20##\x20'+'_sampler),'+'\x20uv)\x0a#defi'+'ne\x20utextur'+'e2D(res,\x20u'+'v)\x20texture'+'(usampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a\x0a'+'//\x20depreca'+'ted\x20define'+'s\x0a#define\x20'+'texture2DL'+'odEXT\x20text'+'ure2DLodEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DLo'+'d_instead\x0a'+'#define\x20te'+'xture2DPro'+'jLodEXT\x20te'+'xture2DPro'+'jLodEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DProjLo'+'d\x0a#define\x20'+'textureCub'+'eLodEXT\x20te'+'xtureCubeL'+'odEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeLod_in'+'stead\x0a#def'+'ine\x20textur'+'e2DGradEXT'+'\x20texture2D'+'GradEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DGrad_i'+'nstead\x0a#de')+('fine\x20textu'+'re2DProjGr'+'adEXT\x20text'+'ure2DProjG'+'radEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DProjGra'+'d_instead\x0a'+'#define\x20te'+'xtureCubeG'+'radEXT\x20tex'+'tureCubeGr'+'adEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeGrad_i'+'nstead\x0a\x0a//'+'\x20TODO:\x20imp'+'lement\x20oth'+'er\x20texture'+'\x20sampling\x20'+'macros\x0a//\x20'+'#define\x20te'+'xture2DPro'+'j\x20textureP'+'roj\x0a//\x20#de'+'fine\x20textu'+'re2DProjLo'+'d\x20textureP'+'rojLod\x0a//\x20'+'#define\x20te'+'xture2DGra'+'d\x20textureG'+'rad\x0a//\x20#de'+'fine\x20textu'+'re2DProjGr'+'ad\x20texture'+'ProjGrad\x0a/'+'/\x20#define\x20'+'textureCub'+'eGrad\x20text'+'ureGrad\x0a\x0a/'+'/\x20pass\x20/\x20a'+'ccept\x20shad'+'ow\x20map\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20passes\x20b'+'oth\x20the\x20te'+'xture\x20as\x20w'+'ell\x20as\x20sam'+'pler\x0a//\x20as'+'\x20the\x20combi'+'ned\x20sample'+'r\x20can\x20be\x20o'+'nly\x20create'+'d\x20at\x20a\x20poi'+'nt\x20of\x20use\x0a'+'#define\x20SH'+'ADOWMAP_PA'+'SS(name)\x20n'+'ame,\x20name\x20'+'##\x20_sample'+'r\x0a#define\x20'+'SHADOWMAP_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'PASS(name)'+'\x20name,\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP\x20TEXTURE'+'_ACCEPT\x0a\x0a#'+'define\x20GL2'+'\x0a#define\x20W'+'EBGPU\x0a'),ly='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#defin'+'e\x20texture2'+'D(res,\x20uv)'+'\x20texture(s'+'ampler2D(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv)\x0a#def'+'ine\x20itextu'+'re2D(res,\x20'+'uv)\x20textur'+'e(isampler'+'2D(res,\x20re'+'s\x20##\x20_samp'+'ler),\x20uv)\x0a'+'#define\x20ut'+'exture2D(r'+'es,\x20uv)\x20te'+'xture(usam'+'pler2D(res'+',\x20res\x20##\x20_'+'sampler),\x20'+'uv)\x0a\x0a#defi'+'ne\x20TEXTURE'+'_PASS(name'+')\x20name,\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT(na'+'me)\x20textur'+'e2D\x20name,\x20'+'sampler\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT_HI'+'GHP\x20TEXTUR'+'E_ACCEPT\x0a\x0a'+'#define\x20GL'+'2\x0a#define\x20'+'WEBGPU\x0a#de'+'fine\x20VERTE'+'XSHADER\x0a#d'+'efine\x20gl_V'+'ertexID\x20gl'+'_VertexInd'+'ex\x0a#define'+'\x20gl_Instan'+'ceID\x20gl_In'+'stanceInde'+'x\x0a',cy='\x0a',hy='\x0a#define\x20V'+'ERTEXSHADE'+'R\x0a',Lm='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20to'+'\x20sample\x20sc'+'ene\x20grab\x20t'+'extures\x0ave'+'c2\x20getGrab'+'ScreenPos('+'vec4\x20clipP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x200.5;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'WEBGPU\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv.y\x20'+'=\x201.0\x20-\x20uv'+'.y;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a\x0a//\x20con'+'vert\x20uv\x20co'+'ordinates\x20'+'to\x20sample\x20'+'image\x20effe'+'ct\x20texture'+'\x20(render\x20t'+'arget\x20text'+'ure\x20render'+'ed\x20without'+'\x0a//\x20forwar'+'d\x20renderer'+'\x20which\x20doe'+'s\x20the\x20flip'+'\x20in\x20the\x20pr'+'ojection\x20m'+'atrix)\x0avec'+'2\x20getImage'+'EffectUV(v'+'ec2\x20uv)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv.y'+'\x20=\x201.0\x20-\x20u'+'v.y;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20uv'+';\x0a}\x0a',Rm='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20fo'+'r\x20sampling'+'\x20scene\x20gra'+'b\x20textures'+'\x0afn\x20getGra'+'bScreenPos'+'(clipPos:\x20'+'vec4<f32>)'+'\x20->\x20vec2<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'var\x20uv:\x20ve'+'c2<f32>\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x20vec2<f3'+'2>(0.5);\x0a\x20'+'\x20\x20\x20uv.y\x20=\x20'+'1.0\x20-\x20uv.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'//\x20convert'+'\x20uv\x20coordi'+'nates\x20to\x20s'+'ample\x20imag'+'e\x20effect\x20t'+'exture\x20(re'+'nder\x20targe'+'t\x20texture\x20'+'rendered\x20w'+'ithout\x0a//\x20'+'forward\x20re'+'nderer\x20whi'+'ch\x20does\x20th'+'e\x20flip\x20in\x20'+'the\x20projec'+'tion\x20matri'+'x)\x0afn\x20getI'+'mageEffect'+'UV(uv:\x20vec'+'2<f32>)\x20->'+'\x20vec2<f32>'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20modifiedU'+'V:\x20vec2<f3'+'2>\x20=\x20uv;\x0a\x20'+'\x20\x20\x20modifie'+'dUV.y\x20=\x201.'+'0\x20-\x20modifi'+'edUV.y;\x0a\x20\x20'+'\x20\x20return\x20m'+'odifiedUV;'+'\x0a}\x0a\x0a//\x20typ'+'es\x20wrapped'+'\x20in\x20size\x20a'+'ligned\x20str'+'uctures\x20to'+'\x20ensure\x20co'+'rrect\x20alig'+'nment\x20in\x20u'+'niform\x20buf'+'fer\x20arrays'+'\x0astruct\x20Wr'+'appedF32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'f32\x20}\x0astru'+'ct\x20Wrapped'+'I32\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20i32\x20}'+'\x0astruct\x20Wr'+'appedU32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'u32\x20}\x0astru'+'ct\x20Wrapped'+'Vec2F\x20{\x20@s'+'ize(16)\x20el'+'ement:\x20vec'+'2f\x20}\x0astruc'+'t\x20WrappedV'+'ec2I\x20{\x20@si'+'ze(16)\x20ele'+'ment:\x20vec2'+'i\x20}\x0astruct'+'\x20WrappedVe'+'c2U\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20vec2u'+'\x20}\x0a',nT={'vertex_position':Pe,'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':va,'vertex_texCoord2':hl,'vertex_texCoord3':dl,'vertex_texCoord4':fl,'vertex_texCoord5':ul,'vertex_texCoord6':pl,'vertex_texCoord7':ml,'vertex_color':Wt,'vertex_boneIndices':us,'vertex_boneWeights':gi};class Jt{static['createDefi'+'nition'](_0x13a69f,_0x29d9da){w['assert'](_0x29d9da),w['assert'](!_0x29d9da['vertexDefi'+'nes']||_0x29d9da['vertexDefi'+'nes']instanceof Map),w['assert'](!_0x29d9da['vertexIncl'+'udes']||_0x29d9da['vertexIncl'+'udes']instanceof Map),w['assert'](!_0x29d9da['fragmentDe'+'fines']||_0x29d9da['fragmentDe'+'fines']instanceof Map),w['assert'](!_0x29d9da['fragmentIn'+'cludes']||_0x29d9da['fragmentIn'+'cludes']instanceof Map);const _0x2b4eb0=_0x10676c=>{let _0x3865da=_0x10676c['fragmentOu'+'tputTypes']??'vec4';return Array['isArray'](_0x3865da)||(_0x3865da=[_0x3865da]),_0x3865da;},_0x2919ae=(_0x300d87,_0x912da5,_0xf97efd,_0x1eb672)=>{const _0x34f0b5=_0x13a69f['isWebGPU']?_0x300d87:_0x912da5;let _0x4e98d1='';if(!_0xf97efd){const _0x4e9bc7=_0x2b4eb0(_0x1eb672);for(let _0x4428d0=-0xcb3+-0x108a+0x5d9*0x5;_0x4428d0<_0x13a69f['maxColorAt'+'tachments'];_0x4428d0++){_0x4e98d1+='#define\x20CO'+'LOR_ATTACH'+'MENT_'+_0x4428d0+'\x0a';const _0x3767d3=_0x4e9bc7[_0x4428d0]??'vec4';_0x4e98d1+='#define\x20ou'+'tType_'+_0x4428d0+'\x20'+_0x3767d3+'\x0a';}}return _0x4e98d1+_0x34f0b5;},_0x3661d6=(_0x1817ac,_0x37366d)=>{let _0x3e081e='';if(!_0x1817ac){const _0x3e09c1=_0x2b4eb0(_0x37366d);for(let _0x2ba509=0x2676+0x1*-0x17b+-0x24fb*0x1;_0x2ba509<_0x13a69f['maxColorAt'+'tachments'];_0x2ba509++){const _0x387fb0=_0x3e09c1[_0x2ba509]??'vec4',_0x37c0dd=JS['get'](_0x387fb0);w['assert'](_0x37c0dd,'Unknown\x20ou'+'tput\x20type\x20'+'translatio'+'n:\x20'+_0x387fb0+'\x20->\x20'+_0x37c0dd),_0x3e081e+='alias\x20pcOu'+'tType'+_0x2ba509+'\x20=\x20'+_0x37c0dd+';\x0a';}}return _0x3e081e;},_0x2de4a6=_0x29d9da['name']??'Untitled';let _0x17d1a5,_0x37971b;const _0x3d2a08=Jt['getDefines'+'Code'](_0x13a69f,_0x29d9da['vertexDefi'+'nes']),_0x304d03=Jt['getDefines'+'Code'](_0x13a69f,_0x29d9da['fragmentDe'+'fines']);return _0x29d9da['shaderLang'+'uage']===it?(_0x17d1a5='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x3661d6(!(-0x1cef+-0x15d5+0xab*0x4c),_0x29d9da)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+hy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Rm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x3d2a08+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x29d9da['vertexCode']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20'),_0x37971b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x3661d6(!(-0x1928+0x13*-0xfb+0x127*0x26),_0x29d9da)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+cy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Rm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x304d03+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x29d9da['fragmentCo'+'de']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20')):(w['assert'](_0x29d9da['vertexCode']),_0x17d1a5=Jt['versionCod'+'e'](_0x13a69f)+_0x2919ae(ly,ny,!(0x83+-0x3b3+-0x88*-0x6),_0x29d9da)+_0x3d2a08+Jt['precisionC'+'ode'](_0x13a69f)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Lm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x2de4a6)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x29d9da['vertexCode'],w['assert'](_0x29d9da['fragmentCo'+'de']),_0x37971b=(_0x29d9da['fragmentPr'+'eamble']||'')+Jt['versionCod'+'e'](_0x13a69f)+_0x2919ae(oy,ay,!(0x1*-0x805+-0x1e29+0x17*0x1a9),_0x29d9da)+_0x304d03+Jt['precisionC'+'ode'](_0x13a69f)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Lm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x2de4a6)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x29d9da['fragmentCo'+'de']),{'name':_0x2de4a6,'shaderLanguage':_0x29d9da['shaderLang'+'uage']??Fe,'attributes':_0x29d9da['attributes'],'vshader':_0x17d1a5,'vincludes':_0x29d9da['vertexIncl'+'udes'],'fincludes':_0x29d9da['fragmentIn'+'cludes'],'fshader':_0x37971b,'useTransformFeedback':_0x29d9da['useTransfo'+'rmFeedback'],'meshUniformBufferFormat':_0x29d9da['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x29d9da['meshBindGr'+'oupFormat']};}static['getDefines'+'Code'](_0x2d86ce,_0x3db9c5){let _0x2c16b9='';return _0x2d86ce['capsDefine'+'s']['forEach']((_0x3e8676,_0x384e0a)=>{_0x2c16b9+='#define\x20'+_0x384e0a+'\x20'+_0x3e8676+'\x0a';}),_0x2c16b9+='\x0a',_0x3db9c5==null||_0x3db9c5['forEach']((_0xdf0586,_0x4be7f4)=>{_0x2c16b9+='#define\x20'+_0x4be7f4+'\x20'+_0xdf0586+'\x0a';}),_0x2c16b9+='\x0a',_0x2c16b9;}static['getShaderN'+'ameCode'](_0x37fe09){return'#define\x20SH'+'ADER_NAME\x20'+_0x37fe09+'\x0a';}static['versionCod'+'e'](_0x4b2a84){return _0x4b2a84['isWebGPU']?'#version\x204'+'50\x0a':'#version\x203'+'00\x20es\x0a';}static['precisionC'+'ode'](_0x450b40,_0xf74cb5){_0xf74cb5&&_0xf74cb5!=='highp'&&_0xf74cb5!=='mediump'&&_0xf74cb5!=='lowp'&&(_0xf74cb5=null),_0xf74cb5&&(_0xf74cb5==='highp'&&_0x450b40['maxPrecisi'+'on']!=='highp'&&(_0xf74cb5='mediump'),_0xf74cb5==='mediump'&&_0x450b40['maxPrecisi'+'on']==='lowp'&&(_0xf74cb5='lowp'));const _0x2b2fd1=_0xf74cb5||_0x450b40['precision'];return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20precisi'+'on\x20'+_0x2b2fd1+('\x20float;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x2b2fd1+('\x20int;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20pr'+'ecision\x20')+_0x2b2fd1+('\x20usampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x2b2fd1+('\x20isampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x2b2fd1+('\x20sampler2D'+'Shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x2b2fd1+('\x20samplerCu'+'beShadow;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20precisio'+'n\x20')+_0x2b2fd1+('\x20sampler2D'+'Array;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}static['collectAtt'+'ributes'](_0x3fafb5){const _0x22d6d1={};let _0x131e53=0xb8f*0x3+-0x8d*0xe+-0x1af7,_0x2b3050=_0x3fafb5['indexOf']('attribute');for(;_0x2b3050>=-0x24e+-0x2*-0xe9e+-0x1aee&&!(_0x2b3050>-0x26b5+0x1*-0x187c+-0x7*-0x907&&_0x3fafb5[_0x2b3050-(0x23e1+0xe*-0x11e+-0x143c)]==='/');){let _0x517601=!(0x81e*0x4+-0x8*-0x2dd+-0x375f);if(_0x2b3050>0x86a+-0xcb0+0x446){let _0x1dd64a=_0x3fafb5['lastIndexO'+'f']('\x0a',_0x2b3050);_0x1dd64a=_0x1dd64a!==-(-0x4c6*-0x2+-0x1712+0xd87)?_0x1dd64a+(0x10fc+0xdc9+0x1ec4*-0x1):0x1*0x1a05+-0xada+0x1*-0xf2b,_0x3fafb5['substring'](_0x1dd64a,_0x2b3050)['includes']('#')&&(_0x517601=!(-0x26a4+0x11*-0x184+-0x48*-0xe5));}if(!_0x517601){const _0x217c4b=_0x3fafb5['indexOf'](';',_0x2b3050),_0x1398b0=_0x3fafb5['lastIndexO'+'f']('\x20',_0x217c4b),_0x50f50a=_0x3fafb5['substring'](_0x1398b0+(-0x51e+-0x297+-0x292*-0x3),_0x217c4b);if(_0x22d6d1[_0x50f50a])w['warn']('Attribute\x20'+'['+_0x50f50a+(']\x20already\x20'+'exists\x20whe'+'n\x20extracti'+'ng\x20the\x20att'+'ributes\x20fr'+'om\x20the\x20ver'+'tex\x20shader'+',\x20ignoring'+'.'),{'vsCode':_0x3fafb5});else{const _0x17cc30=nT[_0x50f50a];_0x17cc30!==void(0x28a*0x1+-0x1de*0x1+-0x4*0x2b)?_0x22d6d1[_0x50f50a]=_0x17cc30:(_0x22d6d1[_0x50f50a]='ATTR'+_0x131e53,_0x131e53++);}}_0x2b3050=_0x3fafb5['indexOf']('attribute',_0x2b3050+(0x6*-0x345+-0x1*-0x8f8+0x9*0x12f));}return _0x22d6d1;}}let oT=-0x200+0x2b3*0xb+-0x1a1*0x11;class dy{constructor(_0x51c152,_0x57898e){h(this,'meshUnifor'+'mBufferFor'+'mat'),h(this,'meshBindGr'+'oupFormat'),h(this,'attributes',new Map());if(this['id']=oT++,this['device']=_0x51c152,this['definition']=_0x57898e,this['name']=_0x57898e['name']||'Untitled',this['init'](),_0x57898e['cshader'])w['assert'](_0x51c152['supportsCo'+'mpute'],'Compute\x20sh'+'aders\x20are\x20'+'not\x20suppor'+'ted\x20on\x20thi'+'s\x20device.'),w['assert'](!_0x57898e['vshader']&&!_0x57898e['fshader'],'Vertex\x20and'+'\x20fragment\x20'+'shaders\x20ar'+'e\x20not\x20supp'+'orted\x20when'+'\x20creating\x20'+'a\x20compute\x20'+'shader.'),_0x57898e['cshader']=bo['run'](_0x57898e['cshader'],_0x57898e['cincludes'],{'sourceName':'compute\x20sh'+'ader\x20for\x20'+this['label'],'stripDefines':!(0x97*-0x13+0x13*0x8b+-0x72*-0x2)});else{w['assert'](_0x57898e['vshader'],'No\x20vertex\x20'+'shader\x20has'+'\x20been\x20spec'+'ified\x20when'+'\x20creating\x20'+'a\x20shader.'),w['assert'](_0x57898e['fshader'],'No\x20fragmen'+'t\x20shader\x20h'+'as\x20been\x20sp'+'ecified\x20wh'+'en\x20creatin'+'g\x20a\x20shader'+'.'),w['call'](()=>{this['vUnmodifie'+'d']=_0x57898e['vshader'],this['fUnmodifie'+'d']=_0x57898e['fshader'];});const _0x56f403=_0x57898e['shaderLang'+'uage']===it;_0x57898e['vshader']=bo['run'](_0x57898e['vshader'],_0x57898e['vincludes'],{'sourceName':'vertex\x20sha'+'der\x20for\x20'+this['label'],'stripDefines':_0x56f403}),_0x57898e['shaderLang'+'uage']===Fe&&(_0x57898e['attributes']??(_0x57898e['attributes']=Jt['collectAtt'+'ributes'](_0x57898e['vshader'])));const _0x1a0c06=_0x51c152['isWebGL2']&&(Me['name']==='osx'||Me['name']==='ios');if(_0x57898e['fshader']=bo['run'](_0x57898e['fshader'],_0x57898e['fincludes'],{'stripUnusedColorAttachments':_0x1a0c06,'stripDefines':_0x56f403,'sourceName':'fragment\x20s'+'hader\x20for\x20'+this['label']}),!_0x57898e['vshader']||!_0x57898e['fshader']){w['error']('Shader:\x20Fa'+'iled\x20to\x20cr'+'eate\x20shade'+'r\x20'+this['label']+('.\x20Vertex\x20o'+'r\x20fragment'+'\x20shader\x20so'+'urce\x20is\x20em'+'pty.'),this),this['failed']=!(-0x1*0x235f+0x1858+0xb07);return;}}this['impl']=_0x51c152['createShad'+'erImpl'](this),w['trace'](im,'Alloc:\x20'+this['label']+',\x20stack:\x20'+Q['toString'](),{'instance':this});}['init'](){this['ready']=!(0x19*0x15d+-0x1*-0x2681+0x4895*-0x1),this['failed']=!(0x2250+0xfe8*-0x2+0x9*-0x47);}get['label'](){return'Shader\x20Id\x20'+this['id']+'\x20('+(this['definition']['shaderLang'+'uage']===it?'WGSL':'GLSL')+')\x20'+this['name'];}['destroy'](){w['trace'](im,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']),this['device']['onDestroyS'+'hader'](this),this['impl']['destroy'](this);}['loseContex'+'t'](){this['init'](),this['impl']['loseContex'+'t']();}['restoreCon'+'text'](){this['impl']['restoreCon'+'text'](this['device'],this);}}class lT{constructor(){h(this,'storage'),h(this,'gpuBuffer'),h(this,'offset');}}const Be=[];Be[$s]=function(_0x38e0ca,_0xc57881,_0x3e31c9){const _0x2126d2=_0x38e0ca['storageFlo'+'at32'];_0x2126d2[_0x3e31c9]=_0xc57881;},Be[fa]=(_0x2be7c8,_0x397b04,_0x4c6d65)=>{const _0x2e7c72=_0x2be7c8['storageFlo'+'at32'];_0x2e7c72[_0x4c6d65]=_0x397b04[-0x1c75+-0x1019+0x2c8e],_0x2e7c72[_0x4c6d65+(-0x1e01+0x1e55+-0x1*0x53)]=_0x397b04[0xe82+0x10*-0xc+-0xdc1];},Be[ds]=(_0x37bc1c,_0x3230d5,_0x54d964)=>{const _0x16d9e6=_0x37bc1c['storageFlo'+'at32'];_0x16d9e6[_0x54d964]=_0x3230d5[-0x3*-0x5b5+-0x1bd*-0x1+-0x11c*0x11],_0x16d9e6[_0x54d964+(0x1af4+-0x3*0x782+0xb*-0x67)]=_0x3230d5[0x1cba+0x14ba+0x1*-0x3173],_0x16d9e6[_0x54d964+(-0x1ae7*0x1+-0x1*0xe0c+0x5*0x831)]=_0x3230d5[0x3f8+0xf*0x71+0x387*-0x3];},Be[An]=(_0xa0528c,_0x368070,_0x216fcf)=>{const _0x263b7a=_0xa0528c['storageFlo'+'at32'];_0x263b7a[_0x216fcf]=_0x368070[0x1963*0x1+0x1f41+0x74*-0x7d],_0x263b7a[_0x216fcf+(-0x2*0x119f+-0xa85*-0x1+0xa*0x279)]=_0x368070[-0x11e6+0x9e+0x1149],_0x263b7a[_0x216fcf+(0x26c5+0x11fa+-0x38bd)]=_0x368070[0x9cd*0x1+-0xac7+-0x24*-0x7],_0x263b7a[_0x216fcf+(-0x998+0xe07+-0x46c)]=_0x368070[-0xadf*0x2+-0xe1c+0x23dd*0x1];},Be[da]=function(_0x5813ff,_0x586e35,_0x902bd){const _0x984a53=_0x5813ff['storageInt'+'32'];_0x984a53[_0x902bd]=_0x586e35;},Be[ra]=function(_0xbdf24,_0x5e65f1,_0x20574d){const _0x40bd6f=_0xbdf24['storageInt'+'32'];_0x40bd6f[_0x20574d]=_0x5e65f1[-0x2*-0x9ff+-0x1b7*0xd+0x24d],_0x40bd6f[_0x20574d+(-0x1033+0xf17+-0x11d*-0x1)]=_0x5e65f1[0x1*0x22d2+0xb*-0x35f+0x14*0x1d];},Be[aa]=function(_0x4605dc,_0x4b937f,_0x3dde3c){const _0x12f2c2=_0x4605dc['storageInt'+'32'];_0x12f2c2[_0x3dde3c]=_0x4b937f[-0x95*0x11+-0x10f*0x1b+0x267a*0x1],_0x12f2c2[_0x3dde3c+(0x190*0xd+0x2*0xcdc+-0x2e07*0x1)]=_0x4b937f[-0x5b9+0x2d6+-0x4*-0xb9],_0x12f2c2[_0x3dde3c+(-0x1fbb*0x1+-0x1*-0x17ea+0x7d3)]=_0x4b937f[-0x1493+0x258d*-0x1+-0xe*-0x427];},Be[na]=function(_0x3913ae,_0x2eac04,_0x37916a){const _0x3ffa34=_0x3913ae['storageInt'+'32'];_0x3ffa34[_0x37916a]=_0x2eac04[-0xf19+0x1fc+-0xd1d*-0x1],_0x3ffa34[_0x37916a+(0x2003*0x1+-0x1*-0xf40+0x1*-0x2f42)]=_0x2eac04[0x1295+-0x5e7*0x3+-0xdf],_0x3ffa34[_0x37916a+(-0x4f9*-0x1+0x14*-0x1cd+0x1f0d)]=_0x2eac04[-0x26cd+0x255d*0x1+-0xb9*-0x2],_0x3ffa34[_0x37916a+(-0x1*0xbf7+0xb17+-0xe3*-0x1)]=_0x2eac04[-0x1cea+0x45a*0x3+0xfdf];},Be[jc]=(_0x23f865,_0x513013,_0x5721d1)=>{const _0x4cc764=_0x23f865['storageFlo'+'at32'];_0x4cc764[_0x5721d1]=_0x513013[0x10b6+0x5*0x196+-0xc52*0x2],_0x4cc764[_0x5721d1+(-0xd4+0x8cb*-0x1+0x9a*0x10)]=_0x513013[-0xb65+0xc7*0x20+-0xd7a],_0x4cc764[_0x5721d1+(0x1352*-0x1+-0x1*-0x1a53+-0x6fd)]=_0x513013[-0xd*-0x2f5+0x725*-0x5+0x2*-0x15b],_0x4cc764[_0x5721d1+(0x22d5*-0x1+-0xa59+-0x3*-0xf11)]=_0x513013[0x142a*0x1+0x18fc+-0x2d23],_0x4cc764[_0x5721d1+(-0x1f6c*-0x1+0x18b*-0x1+-0x1dd9)]=_0x513013[0x19e1+0x557*-0x1+-0x1486],_0x4cc764[_0x5721d1+(0x48*0x7c+-0x2d9+-0x1*0x1ffe)]=_0x513013[-0x143*0x1+-0x2425+0x256d];},Be[Cn]=(_0x32dddf,_0x2266fe,_0x3d8a7d)=>{const _0x20604a=_0x32dddf['storageFlo'+'at32'];_0x20604a[_0x3d8a7d]=_0x2266fe[0xc9f+0x269b+-0x333a],_0x20604a[_0x3d8a7d+(-0x3*-0xbca+-0x1118+-0x1245)]=_0x2266fe[-0x551+-0x1f73+-0x1*-0x24c5],_0x20604a[_0x3d8a7d+(0x20bc+0x701+0x7*-0x5ad)]=_0x2266fe[-0x21d4+0x1048+0x118e],_0x20604a[_0x3d8a7d+(-0x91c+0x3*0xa67+-0x1*0x1615)]=_0x2266fe[-0x9d*-0x2f+0x29*0xa7+-0x378f],_0x20604a[_0x3d8a7d+(0x4a1+-0xb95+0x6f9)]=_0x2266fe[-0x23fb*0x1+0x1*-0x5e7+0x1*0x29e6],_0x20604a[_0x3d8a7d+(-0x1*-0xedf+-0x1607+-0x2*-0x397)]=_0x2266fe[-0x21d4+0x479+0x8*0x3ac],_0x20604a[_0x3d8a7d+(-0x167e+0x954*-0x2+0x292e)]=_0x2266fe[0x5*-0x409+0x7*0x13+-0x1ca*-0xb],_0x20604a[_0x3d8a7d+(-0x9c8+-0x25e+-0xc2f*-0x1)]=_0x2266fe[-0xa41+0x98e+0xba],_0x20604a[_0x3d8a7d+(0x1ed9+0x213*-0x1+-0x1cbc)]=_0x2266fe[0x1*-0x6ef+0x1501+-0xe0a];},Be[$h]=function(_0x478d24,_0x513ca8,_0x2dc02c,_0x5e75c3){const _0x49dbb1=_0x478d24['storageFlo'+'at32'];for(let _0x460114=-0x1*0x2593+-0x2275*0x1+-0x8*-0x901;_0x460114<_0x5e75c3;_0x460114++)_0x49dbb1[_0x2dc02c+_0x460114*(-0x1*0x188c+0x2456+-0xbc6)]=_0x513ca8[_0x460114];},Be[Xh]=(_0x57d6c2,_0x13ec8a,_0x4c65a0,_0x201f58)=>{const _0x286fae=_0x57d6c2['storageFlo'+'at32'];for(let _0x484a4c=0x4*0x3b5+0x3*-0xaae+0x1136;_0x484a4c<_0x201f58;_0x484a4c++)_0x286fae[_0x4c65a0+_0x484a4c*(0xe5d+0x3*0x73e+-0x2413)]=_0x13ec8a[_0x484a4c*(0x1*0x184d+0x221*0x2+-0x1c8d)],_0x286fae[_0x4c65a0+_0x484a4c*(-0x729+0x1983+-0x1256)+(0x5a4+0x1c3c+0x12b*-0x1d)]=_0x13ec8a[_0x484a4c*(0x7c3+0x211+-0x9d2)+(0x92c*-0x1+-0x11*0x117+0x18a*0x12)];},Be[qh]=(_0x5890c3,_0x43ae11,_0x7026cc,_0x22f5b9)=>{const _0x2e5dcf=_0x5890c3['storageFlo'+'at32'];for(let _0x30c9b7=-0x1*0x98f+0x3*-0xc1d+0x5*0x92e;_0x30c9b7<_0x22f5b9;_0x30c9b7++)_0x2e5dcf[_0x7026cc+_0x30c9b7*(0x1b00+-0x258b+-0x11*-0x9f)]=_0x43ae11[_0x30c9b7*(0xeac+-0x1c42*-0x1+-0x2aeb)],_0x2e5dcf[_0x7026cc+_0x30c9b7*(-0x14*-0x17d+0x1*-0x2de+-0x1*0x1ae2)+(-0x1cf3+-0x5*0x107+0x2217)]=_0x43ae11[_0x30c9b7*(0x2710+0xa4d+0x315a*-0x1)+(0x19a1+-0x344*-0x1+0x739*-0x4)],_0x2e5dcf[_0x7026cc+_0x30c9b7*(-0xf26+0x22a5+-0x137b)+(-0x20b2+-0xc*0x24d+0x50*0xc1)]=_0x43ae11[_0x30c9b7*(0x169b+-0x35f+-0x85*0x25)+(-0x3*-0x9bb+0x620+-0x234f)];},Be[Pn]=(_0x5910a8,_0x33a064,_0x31beb8,_0x140a3e)=>{const _0x20f964=_0x5910a8['storageUin'+'t32'];_0x20f964[_0x31beb8]=_0x33a064;},Be[Mn]=(_0xfd9f20,_0x41fb3b,_0x21e14f,_0x707dd4)=>{const _0x279b6b=_0xfd9f20['storageUin'+'t32'];_0x279b6b[_0x21e14f]=_0x41fb3b[0x82*-0x17+-0x1*-0xf84+0x3d6*-0x1],_0x279b6b[_0x21e14f+(-0x4*-0x4fd+0x24*0x80+0x91*-0x43)]=_0x41fb3b[0x224*-0x5+0x1f+0xa96];},Be[Dn]=(_0xdc3769,_0x42cb7e,_0x264491,_0x50e438)=>{const _0x420876=_0xdc3769['storageUin'+'t32'];_0x420876[_0x264491]=_0x42cb7e[-0x2636*0x1+0x198e+-0x24*-0x5a],_0x420876[_0x264491+(0x7*0x3ed+-0x1f18+0x2*0x1cf)]=_0x42cb7e[-0x198e+-0x4*-0xc2+0x4f*0x49],_0x420876[_0x264491+(-0x1*-0x24fd+0x1c81*-0x1+-0x87a)]=_0x42cb7e[-0x1*0x1e07+-0x6*0x57d+0x3ef7];},Be[In]=(_0x1c18b0,_0x31fa14,_0x1cc9d2,_0x32fdf8)=>{const _0x29907f=_0x1c18b0['storageUin'+'t32'];_0x29907f[_0x1cc9d2]=_0x31fa14[0x53*-0x34+-0x1139+0x5*0x6d1],_0x29907f[_0x1cc9d2+(-0x8f0+0x18*0x11f+0x1ff*-0x9)]=_0x31fa14[-0x35f*0x7+-0xfb5+-0x274f*-0x1],_0x29907f[_0x1cc9d2+(-0x1bd*0x1+-0x716*0x5+0x252d)]=_0x31fa14[-0x636+-0x26b*0xb+0x20d1*0x1],_0x29907f[_0x1cc9d2+(0x17e4+-0xa40+-0xda1)]=_0x31fa14[-0x1*-0x2095+0x267*-0x1+-0x1e2b];},Be[Ln]=function(_0xf53ef8,_0x51064f,_0x40aa40,_0x105423){const _0x34ce03=_0xf53ef8['storageInt'+'32'];for(let _0x537336=0x11*0x49+0x2049+-0x2a7*0xe;_0x537336<_0x105423;_0x537336++)_0x34ce03[_0x40aa40+_0x537336*(-0xe5*-0x1c+-0x253d+-0x19*-0x7d)]=_0x51064f[_0x537336];},Be[Yh]=Be[Ln],Be[jh]=function(_0x3d9a9c,_0x3c7322,_0x32e00a,_0xe8f279){const _0x3ebca2=_0x3d9a9c['storageUin'+'t32'];for(let _0x12c2c3=-0x31d*-0x7+0x1b*0x166+0x1*-0x3b8d;_0x12c2c3<_0xe8f279;_0x12c2c3++)_0x3ebca2[_0x32e00a+_0x12c2c3*(-0x1*-0x1dcb+-0x1c85+-0x142)]=_0x3c7322[_0x12c2c3];},Be[Rn]=(_0x25f382,_0x177cfc,_0x189417,_0x353f83)=>{const _0x1c9df6=_0x25f382['storageInt'+'32'];for(let _0x19917f=0x9d*-0x3+0x845+-0x66e;_0x19917f<_0x353f83;_0x19917f++)_0x1c9df6[_0x189417+_0x19917f*(0x1be1+0x1*0xe51+-0x2a2e*0x1)]=_0x177cfc[_0x19917f*(-0xb*-0x2ff+-0x77f+-0x1974)],_0x1c9df6[_0x189417+_0x19917f*(-0x28*-0x71+-0x21b7+-0x337*-0x5)+(-0x1e29+-0x1*-0x1261+-0x1*-0xbc9)]=_0x177cfc[_0x19917f*(0x30+0x38*-0x2d+-0x2*-0x4d5)+(0x6bc*0x1+-0x126a+0x3*0x3e5)];},Be[Zh]=Be[Rn],Be[Kh]=(_0x2b21c5,_0x54f113,_0xf6784c,_0x7b3ddd)=>{const _0x7c1942=_0x2b21c5['storageUin'+'t32'];for(let _0x32e81c=0x178*-0xf+0x673*0x6+-0xed*0x12;_0x32e81c<_0x7b3ddd;_0x32e81c++)_0x7c1942[_0xf6784c+_0x32e81c*(0x6*-0x5b5+0x2152+0xf0)]=_0x54f113[_0x32e81c*(-0x2588*-0x1+-0x1146+-0x1440)],_0x7c1942[_0xf6784c+_0x32e81c*(0x1334+-0x8f9*0x2+-0x13e)+(0x3f3*0x5+-0x6a+0x9aa*-0x2)]=_0x54f113[_0x32e81c*(-0x1b*0x95+0x313*-0xb+0x175*0x22)+(-0x40d+-0x1142+0x1550)];},Be[On]=(_0x506478,_0x245c9a,_0x2c0dc4,_0x51e210)=>{const _0x1bb2e1=_0x506478['storageInt'+'32'];for(let _0x59f54f=0x1*-0x1713+-0x1164+0x2877;_0x59f54f<_0x51e210;_0x59f54f++)_0x1bb2e1[_0x2c0dc4+_0x59f54f*(-0x106d+-0x1*0x170f+0x2780)]=_0x245c9a[_0x59f54f*(0x1b*-0xc4+0x220f+-0xd60)],_0x1bb2e1[_0x2c0dc4+_0x59f54f*(0x1ce0+0x7a*0x23+0x43*-0xae)+(0x1*0x2366+-0xee*-0x5+0x3*-0xd59)]=_0x245c9a[_0x59f54f*(-0x946+0x1de6+-0x1*0x149d)+(-0x841+0x16e*-0x9+0x152*0x10)],_0x1bb2e1[_0x2c0dc4+_0x59f54f*(0x1d19+-0x671+0x1*-0x16a4)+(-0x17ce+-0x33*0x59+-0x84f*-0x5)]=_0x245c9a[_0x59f54f*(0x2330+-0x1*-0x13e3+-0x6e2*0x8)+(0x1a00+0x4f*0x6e+-0x3bf0)];},Be[Jh]=Be[On],Be[Qh]=(_0x48ce95,_0x376921,_0x39943d,_0xe961b3)=>{const _0x5f4e13=_0x48ce95['storageUin'+'t32'];for(let _0x4411c4=-0xd37+0x1*-0x133b+0x1039*0x2;_0x4411c4<_0xe961b3;_0x4411c4++)_0x5f4e13[_0x39943d+_0x4411c4*(0x1*-0x2099+-0x3*0x942+0x3c63)]=_0x376921[_0x4411c4*(0x1b5b+0x1*-0x21f1+0x1*0x699)],_0x5f4e13[_0x39943d+_0x4411c4*(0x1940+0x34*0xa9+-0x3b90*0x1)+(0x1527+-0xda7+0x65*-0x13)]=_0x376921[_0x4411c4*(0xf8*-0x1d+0x371+-0xe*-0x1c3)+(0x1355+-0x22bc+0xf68)],_0x5f4e13[_0x39943d+_0x4411c4*(-0x25*0xad+-0x1302+0xdd*0x33)+(0x1466+0x1b58+0xd*-0x3ac)]=_0x376921[_0x4411c4*(-0x245b+-0x2249+0x46a7)+(-0x179e+-0x506+0x1ca6)];};class up{constructor(_0x2e95ff,_0x2d50e8,_0x767496=!(-0x9b*-0x1d+-0x292*-0xb+0xf47*-0x3)){h(this,'device'),h(this,'persistent'),h(this,'allocation'),h(this,'storageFlo'+'at32'),h(this,'storageInt'+'32'),h(this,'storageUin'+'t32'),h(this,'renderVers'+'ionDirty',0x2470*0x1+0x2e*-0x6d+0x2cf*-0x6);if(this['device']=_0x2e95ff,this['format']=_0x2d50e8,this['persistent']=_0x767496,w['assert'](_0x2d50e8),_0x767496){this['impl']=_0x2e95ff['createUnif'+'ormBufferI'+'mpl'](this);const _0x4fcb70=new ArrayBuffer(_0x2d50e8['byteSize']);this['assignStor'+'age'](new Int32Array(_0x4fcb70)),_0x2e95ff['_vram']['ub']+=this['format']['byteSize'];}else this['allocation']=new lT();}['destroy'](){if(this['persistent']){const _0x3190b8=this['device'];this['impl']['destroy'](_0x3190b8),_0x3190b8['_vram']['ub']-=this['format']['byteSize'];}}get['offset'](){return this['persistent']?-0x2099+-0x115f+0x31f8:this['allocation']['offset'];}['assignStor'+'age'](_0x4c1c64){this['storageInt'+'32']=_0x4c1c64,this['storageUin'+'t32']=new Uint32Array(_0x4c1c64['buffer'],_0x4c1c64['byteOffset'],_0x4c1c64['byteLength']/(0x772+-0xe*-0x26b+-0x4*0xa52)),this['storageFlo'+'at32']=new Float32Array(_0x4c1c64['buffer'],_0x4c1c64['byteOffset'],_0x4c1c64['byteLength']/(-0x6b1*-0x5+0x553+0x1362*-0x2));}['loseContex'+'t'](){var _0x21e32b;(_0x21e32b=this['impl'])==null||_0x21e32b['loseContex'+'t']();}['setUniform'](_0xc446d0,_0x459d8b){w['assert'](_0xc446d0);const _0x5830e1=_0xc446d0['offset'];if(_0x459d8b!=null){const _0x2be79d=Be[_0xc446d0['updateType']];_0x2be79d?_0x2be79d(this,_0x459d8b,_0x5830e1,_0xc446d0['count']):this['storageFlo'+'at32']['set'](_0x459d8b,_0x5830e1);}else w['warnOnce']('Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20to\x20unif'+'orm\x20['+_0xc446d0['name']+('],\x20expecte'+'d\x20type\x20')+GS[_0xc446d0['type']]+('\x20while\x20ren'+'dering\x20')+Q['toString']());}['set'](_0x3da063,_0x578da1){const _0x2c1c5c=this['format']['map']['get'](_0x3da063);w['assert'](_0x2c1c5c,'Uniform\x20na'+'me\x20['+_0x3da063+(']\x20is\x20not\x20p'+'art\x20of\x20the'+'\x20Uniform\x20b'+'uffer.')),_0x2c1c5c&&this['setUniform'](_0x2c1c5c,_0x578da1);}['startUpdat'+'e'](_0x14a65f){if(!this['persistent']){const _0x1c57e6=this['allocation'],_0x11fdf2=_0x1c57e6['gpuBuffer'];this['device']['dynamicBuf'+'fers']['alloc'](_0x1c57e6,this['format']['byteSize']),this['assignStor'+'age'](_0x1c57e6['storage']),_0x14a65f&&(_0x14a65f['bindGroup']=_0x1c57e6['gpuBuffer']['getBindGro'+'up'](this),_0x14a65f['offsets'][0x52*-0x31+0x1b07+-0xb55]=_0x1c57e6['offset']),_0x11fdf2!==_0x1c57e6['gpuBuffer']&&(this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion']);}}['endUpdate'](){this['persistent']?this['impl']['unlock'](this):(this['storageFlo'+'at32']=null,this['storageInt'+'32']=null);}['update'](_0x4d7c2a){this['startUpdat'+'e'](_0x4d7c2a);const _0x1e6e58=this['format']['uniforms'];for(let _0x4213d8=0x16f4+0x1*-0x24b+-0x14a9;_0x4213d8<_0x1e6e58['length'];_0x4213d8++){const _0x22882a=_0x1e6e58[_0x4213d8]['scopeId']['value'];this['setUniform'](_0x1e6e58[_0x4213d8],_0x22882a);}this['endUpdate']();}}class cT{constructor(){h(this,'frameAlloc'+'ations',[]),h(this,'pastFrameA'+'llocations',new Map()),h(this,'_enabled',!(-0xaae+-0x1a19+0x24c8)),h(this,'_enableReq'+'uest',!(0x1a4e+0x1*0x1819+0x2*-0x1933)),h(this,'_frameTime',0x521+0x87f+-0xda0);}['loseContex'+'t'](){this['pastFrameA'+'llocations']['clear']();}set['enabled'](_0x5c59d9){this['_enableReq'+'uest']=_0x5c59d9;}get['enabled'](){return this['_enableReq'+'uest'];}['processEna'+'bleRequest'](){this['_enableReq'+'uest']!==this['_enabled']&&(this['_enabled']=this['_enableReq'+'uest'],this['_enabled']||(this['_frameTime']=-0x1597*-0x1+0x459+-0x19f*0x10));}['request'](_0x353c75){this['pastFrameA'+'llocations']['set'](_0x353c75,this['frameAlloc'+'ations']),this['frameAlloc'+'ations']=[];}['report'](_0x34eae9,_0x53ac26){if(_0x53ac26){const _0x2b148e=this['pastFrameA'+'llocations']['get'](_0x34eae9);if(w['assert'](_0x2b148e['length']===_0x53ac26['length']),_0x53ac26['length']>0x1*0x20c5+-0x20da+0x7*0x3&&(this['_frameTime']=_0x53ac26['reduce']((_0x37dbb3,_0x40327f)=>_0x37dbb3+_0x40327f,-0x12*0x28+-0x24*0x3b+0x1*0xb1c)),mi['get'](Ml)){w['trace'](Ml,'--\x20GPU\x20tim'+'ings\x20for\x20f'+'rame\x20'+_0x34eae9+'\x20--');let _0x2543c2=-0x18fa+0xd0*0xe+0xd9a;for(let _0x29fbd4=-0x15*0x89+0x24dd+0x1*-0x19a0;_0x29fbd4<_0x2b148e['length'];++_0x29fbd4){const _0x5114b0=_0x2b148e[_0x29fbd4];_0x2543c2+=_0x53ac26[_0x29fbd4],w['trace'](Ml,_0x53ac26[_0x29fbd4]['toFixed'](-0xf53*-0x1+0xa1e+-0x196f)+'\x20ms\x20'+_0x5114b0);}w['trace'](Ml,_0x2543c2['toFixed'](-0x1323+-0x2045+0x2*0x19b5)+'\x20ms\x20TOTAL');}}this['pastFrameA'+'llocations']['delete'](_0x34eae9);}['getSlot'](_0x1b67b3){const _0x21e3de=this['frameAlloc'+'ations']['length'];return this['frameAlloc'+'ations']['push'](_0x1b67b3),_0x21e3de;}get['slotCount'](){return this['frameAlloc'+'ations']['length'];}}class fy{constructor(){h(this,'bufferId',null);}['destroy'](_0x10e423){this['bufferId']&&(_0x10e423['gl']['deleteBuff'+'er'](this['bufferId']),this['bufferId']=null);}get['initialize'+'d'](){return!!this['bufferId'];}['loseContex'+'t'](){this['bufferId']=null;}['unlock'](_0x4c6d23,_0x140ed5,_0x71e7a1,_0x27ce3c){const _0x480566=_0x4c6d23['gl'];if(this['bufferId'])_0x480566['bindBuffer'](_0x71e7a1,this['bufferId']),_0x480566['bufferSubD'+'ata'](_0x71e7a1,-0x174a+0x1735+-0x7*-0x3,_0x27ce3c);else{let _0x151534;switch(_0x140ed5){case ms:_0x151534=_0x480566['STATIC_DRA'+'W'];break;case zc:_0x151534=_0x480566['DYNAMIC_DR'+'AW'];break;case SS:_0x151534=_0x480566['STREAM_DRA'+'W'];break;case H0:_0x151534=_0x480566['DYNAMIC_CO'+'PY'];break;}this['bufferId']=_0x480566['createBuff'+'er'](),_0x480566['bindBuffer'](_0x71e7a1,this['bufferId']),_0x480566['bufferData'](_0x71e7a1,_0x27ce3c,_0x151534);}}}class hT extends fy{constructor(){super(...arguments),h(this,'vao',null);}['destroy'](_0x373ad1){super['destroy'](_0x373ad1),_0x373ad1['unbindVert'+'exArray']();}['loseContex'+'t'](){super['loseContex'+'t'](),this['vao']=null;}['unlock'](_0x22fabb){const _0x18e5a3=_0x22fabb['device'];super['unlock'](_0x18e5a3,_0x22fabb['usage'],_0x18e5a3['gl']['ARRAY_BUFF'+'ER'],_0x22fabb['storage']);}}class dT extends fy{constructor(_0x25a23c){super();const _0x3e1d86=_0x25a23c['device']['gl'],_0x554bfd=_0x25a23c['format'];_0x554bfd===yf?this['glFormat']=_0x3e1d86['UNSIGNED_B'+'YTE']:_0x554bfd===ji?this['glFormat']=_0x3e1d86['UNSIGNED_S'+'HORT']:_0x554bfd===yr&&(this['glFormat']=_0x3e1d86['UNSIGNED_I'+'NT']);}['unlock'](_0x215eaa){const _0x31e05f=_0x215eaa['device'];super['unlock'](_0x31e05f,_0x215eaa['usage'],_0x31e05f['gl']['ELEMENT_AR'+'RAY_BUFFER'],_0x215eaa['storage']);}}class fT{constructor(_0x438ce4,_0x49ee0c,_0x210e15,_0xfb62d1){if(this['locationId']=_0xfb62d1,this['scopeId']=_0x438ce4['scope']['resolve'](_0x49ee0c),this['version']=new sy(),_0x49ee0c['substring'](_0x49ee0c['length']-(0x2141*0x1+0x3*-0x5e5+-0x1*0xf8f))==='[0]')switch(_0x210e15){case $s:_0x210e15=$h;break;case da:_0x210e15=Ln;break;case Pn:_0x210e15=jh;break;case mn:_0x210e15=Yh;break;case fa:_0x210e15=Xh;break;case ra:_0x210e15=Rn;break;case Mn:_0x210e15=Kh;break;case Go:_0x210e15=Zh;break;case ds:_0x210e15=qh;break;case aa:_0x210e15=On;break;case Dn:_0x210e15=Qh;break;case Ho:_0x210e15=Jh;break;case An:_0x210e15=ap;break;case na:_0x210e15=Yc;break;case In:_0x210e15=np;break;case Wo:_0x210e15=op;break;}this['dataType']=_0x210e15,this['value']=[null,null,null,null],this['array']=[];}}let Om=-0x6d*-0x26+-0x5f*-0x4f+0x1*-0x2d7f;const uT=new Set(['gl_VertexI'+'D','gl_Instanc'+'eID','gl_DrawID','gl_BaseVer'+'tex','gl_BaseIns'+'tance']);class pT{constructor(){h(this,'map',new Map());}['destroy'](_0x5ed62c){this['map']['forEach'](_0x2f905f=>{_0x5ed62c['gl']['deleteShad'+'er'](_0x2f905f);});}['loseContex'+'t'](_0x249367){this['map']['clear']();}}const mT=new Kt(),_T=new Kt();class gT{constructor(_0x29bb76){h(this,'compileDur'+'ation',0x6*-0x1c7+-0xcfa+0x17a4),(this['init'](),this['compile'](_0x29bb76['device'],_0x29bb76),this['link'](_0x29bb76['device'],_0x29bb76),_0x29bb76['device']['shaders']['push'](_0x29bb76));}['destroy'](_0xbfdb0e){this['glProgram']&&(_0xbfdb0e['device']['gl']['deleteProg'+'ram'](this['glProgram']),this['glProgram']=null);}['init'](){this['uniforms']=[],this['samplers']=[],this['attributes']=[],this['glProgram']=null,this['glVertexSh'+'ader']=null,this['glFragment'+'Shader']=null;}['loseContex'+'t'](){this['init']();}['restoreCon'+'text'](_0x48b57a,_0x52f9aa){this['compile'](_0x48b57a,_0x52f9aa),this['link'](_0x48b57a,_0x52f9aa);}['compile'](_0x45699a,_0x577a67){const _0x6c8195=_0x577a67['definition'];this['glVertexSh'+'ader']=this['_compileSh'+'aderSource'](_0x45699a,_0x6c8195['vshader'],!(0xb7*0x6+0x8e2*0x4+-0x27d2)),this['glFragment'+'Shader']=this['_compileSh'+'aderSource'](_0x45699a,_0x6c8195['fshader'],!(0x3f8+-0xe82*0x2+0x190d));}['link'](_0x26adbe,_0x204004){if(this['glProgram'])return;const _0xc61a11=_0x26adbe['gl'];if(_0xc61a11['isContextL'+'ost']())return;let _0x42ab5c=-0x23c1+0x2381+0x40;w['call'](()=>{this['compileDur'+'ation']=-0x6fc*0x2+0xb*0x5f+0x9e3,_0x42ab5c=de();});const _0xbe142a=_0xc61a11['createProg'+'ram']();this['glProgram']=_0xbe142a,_0xc61a11['attachShad'+'er'](_0xbe142a,this['glVertexSh'+'ader']),_0xc61a11['attachShad'+'er'](_0xbe142a,this['glFragment'+'Shader']);const _0x31f1a0=_0x204004['definition'],_0x44abeb=_0x31f1a0['attributes'];if(_0x31f1a0['useTransfo'+'rmFeedback']){const _0x2c62a0=[];for(const _0x3362ab in _0x44abeb)_0x44abeb['hasOwnProp'+'erty'](_0x3362ab)&&_0x2c62a0['push']('out_'+_0x3362ab);_0xc61a11['transformF'+'eedbackVar'+'yings'](_0xbe142a,_0x2c62a0,_0xc61a11['INTERLEAVE'+'D_ATTRIBS']);}const _0xd4c419={};for(const _0x39070b in _0x44abeb)if(_0x44abeb['hasOwnProp'+'erty'](_0x39070b)){const _0x4867d6=_0x44abeb[_0x39070b],_0x552d82=Le[_0x4867d6];w['assert'](!_0xd4c419['hasOwnProp'+'erty'](_0x552d82),'WARNING:\x20T'+'wo\x20attribu'+'tes\x20are\x20ma'+'pped\x20to\x20th'+'e\x20same\x20loc'+'ation\x20in\x20a'+'\x20shader:\x20'+_0xd4c419[_0x552d82]+'\x20and\x20'+_0x39070b),_0xd4c419[_0x552d82]=_0x39070b,_0xc61a11['bindAttrib'+'Location'](_0xbe142a,_0x552d82,_0x39070b);}_0xc61a11['linkProgra'+'m'](_0xbe142a),w['call'](()=>{this['compileDur'+'ation']=de()-_0x42ab5c;}),_0x26adbe['_shaderSta'+'ts']['linked']++,_0x31f1a0['tag']===NS&&_0x26adbe['_shaderSta'+'ts']['materialSh'+'aders']++;}['_compileSh'+'aderSource'](_0x18a7f1,_0x4ba443,_0x361092){const _0x5517cc=_0x18a7f1['gl'];if(_0x5517cc['isContextL'+'ost']())return null;const _0x60afa6=(_0x361092?mT:_T)['get'](_0x18a7f1,()=>new pT());let _0x1ed3e9=_0x60afa6['map']['get'](_0x4ba443);if(!_0x1ed3e9){const _0x1cba5c=de();_0x18a7f1['fire']('shader:com'+'pile:start',{'timestamp':_0x1cba5c,'target':_0x18a7f1}),_0x1ed3e9=_0x5517cc['createShad'+'er'](_0x361092?_0x5517cc['VERTEX_SHA'+'DER']:_0x5517cc['FRAGMENT_S'+'HADER']),_0x5517cc['shaderSour'+'ce'](_0x1ed3e9,_0x4ba443),_0x5517cc['compileSha'+'der'](_0x1ed3e9),_0x60afa6['map']['set'](_0x4ba443,_0x1ed3e9);const _0x41103c=de();_0x18a7f1['fire']('shader:com'+'pile:end',{'timestamp':_0x41103c,'target':_0x18a7f1}),_0x18a7f1['_shaderSta'+'ts']['compileTim'+'e']+=_0x41103c-_0x1cba5c,_0x361092?_0x18a7f1['_shaderSta'+'ts']['vsCompiled']++:_0x18a7f1['_shaderSta'+'ts']['fsCompiled']++;}return _0x1ed3e9;}['finalize'](_0x2c5377,_0x1a8e81){var _0x175502,_0x5b6758;const _0x330bb3=_0x2c5377['gl'];if(_0x330bb3['isContextL'+'ost']())return!(-0x1*0x13ac+0x1cc6+-0xe9*0xa);const _0x107bc7=this['glProgram'],_0x148d16=_0x1a8e81['definition'],_0x229749=de();_0x2c5377['fire']('shader:lin'+'k:start',{'timestamp':_0x229749,'target':_0x2c5377});let _0x31e7eb=0x2583+-0x73+-0x1288*0x2;if(w['call'](()=>{_0x31e7eb=de();}),!_0x330bb3['getProgram'+'Parameter'](_0x107bc7,_0x330bb3['LINK_STATU'+'S'])){if(!this['_isCompile'+'d'](_0x2c5377,_0x1a8e81,this['glVertexSh'+'ader'],_0x148d16['vshader'],'vertex')||!this['_isCompile'+'d'](_0x2c5377,_0x1a8e81,this['glFragment'+'Shader'],_0x148d16['fshader'],'fragment'))return!(0x1e1c+-0x903+-0x1518);const _0x37b7f5='Failed\x20to\x20'+'link\x20shade'+'r\x20program.'+'\x20Error:\x20'+_0x330bb3['getProgram'+'InfoLog'](_0x107bc7);return _0x148d16['translated'+'Frag']=(_0x175502=_0x330bb3['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0xef*0x11+-0x1094+0x2073):_0x175502['getTransla'+'tedShaderS'+'ource'](this['glFragment'+'Shader']),_0x148d16['translated'+'Vert']=(_0x5b6758=_0x330bb3['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0x76f+0x62f*0x5+-0x24*0xa7):_0x5b6758['getTransla'+'tedShaderS'+'ource'](this['glVertexSh'+'ader']),console['error'](_0x37b7f5,_0x148d16),console['error'](_0x37b7f5),!(-0x7*0x3d7+0x1add+0x5);}const _0xc4984a=_0x330bb3['getProgram'+'Parameter'](_0x107bc7,_0x330bb3['ACTIVE_ATT'+'RIBUTES']);_0x1a8e81['attributes']['clear']();for(let _0x234384=0x1*-0x1bf5+-0x2*0x116e+0x1*0x3ed1;_0x234384<_0xc4984a;_0x234384++){const _0xb20c57=_0x330bb3['getActiveA'+'ttrib'](_0x107bc7,_0x234384),_0x13e553=_0x330bb3['getAttribL'+'ocation'](_0x107bc7,_0xb20c57['name']);uT['has'](_0xb20c57['name'])||(_0x148d16['attributes'][_0xb20c57['name']]===void(0x2*-0x11de+-0x1*-0xa3c+-0x30*-0x88)?(console['error']('Vertex\x20sha'+'der\x20attrib'+'ute\x20\x22'+_0xb20c57['name']+('\x22\x20is\x20not\x20m'+'apped\x20to\x20a'+'\x20semantic\x20'+'in\x20shader\x20'+'definition'+',\x20shader\x20[')+_0x1a8e81['label']+']',_0x1a8e81),_0x1a8e81['failed']=!(0x627+-0xb*-0x2f+-0x4*0x20b)):_0x1a8e81['attributes']['set'](_0x13e553,_0xb20c57['name']));}const _0x292206=_0x2c5377['_samplerTy'+'pes'],_0x50539e=_0x330bb3['getProgram'+'Parameter'](_0x107bc7,_0x330bb3['ACTIVE_UNI'+'FORMS']);for(let _0x33426d=0x1504+-0x1c2a+0x726;_0x33426d<_0x50539e;_0x33426d++){const _0x27d4af=_0x330bb3['getActiveU'+'niform'](_0x107bc7,_0x33426d),_0x146433=_0x330bb3['getUniform'+'Location'](_0x107bc7,_0x27d4af['name']),_0x2d3ce7=new fT(_0x2c5377,_0x27d4af['name'],_0x2c5377['pcUniformT'+'ype'][_0x27d4af['type']],_0x146433);_0x292206['has'](_0x27d4af['type'])?this['samplers']['push'](_0x2d3ce7):this['uniforms']['push'](_0x2d3ce7);}_0x1a8e81['ready']=!(-0x1a43+0x15*-0x1cd+-0x3*-0x155c);const _0x890034=de();return _0x2c5377['fire']('shader:lin'+'k:end',{'timestamp':_0x890034,'target':_0x2c5377}),_0x2c5377['_shaderSta'+'ts']['compileTim'+'e']+=_0x890034-_0x229749,w['call'](()=>{const _0x2caaf6=de()-_0x31e7eb;this['compileDur'+'ation']+=_0x2caaf6,Om+=this['compileDur'+'ation'],w['trace'](c0,'[id:\x20'+_0x1a8e81['id']+']\x20'+_0x1a8e81['name']+':\x20'+this['compileDur'+'ation']['toFixed'](-0x71*-0x19+-0x121*0x6+-0x2*0x221)+('ms,\x20TOTAL:'+'\x20')+Om['toFixed'](-0x10af*0x1+0x24fe+0x2e*-0x71)+'ms');}),!(0x2583+0x6d*-0x26+-0x1*0x1555);}['_isCompile'+'d'](_0x4a9fb1,_0x11da81,_0x1b9c1c,_0x2315d7,_0x52bce6){const _0x40869d=_0x4a9fb1['gl'];if(!_0x40869d['getShaderP'+'arameter'](_0x1b9c1c,_0x40869d['COMPILE_ST'+'ATUS'])){const _0x1419eb=_0x40869d['getShaderI'+'nfoLog'](_0x1b9c1c),[_0x552775,_0x2ad1fe]=this['_processEr'+'ror'](_0x2315d7,_0x1419eb),_0x20c01d='Failed\x20to\x20'+'compile\x20'+_0x52bce6+'\x20shader:\x0a\x0a'+_0x1419eb+'\x0a'+_0x552775+('\x20while\x20ren'+'dering\x20')+Q['toString']();return _0x2ad1fe['shader']=_0x11da81,console['error'](_0x20c01d,_0x2ad1fe),console['error'](_0x20c01d),!(0x1dce+-0x4*0x584+-0x1*0x7bd);}return!(0x13b*0x7+0x15f1+-0x1e8e);}['isLinked'](_0x192330){const {extParallelShaderCompile:_0x3cf2b3}=_0x192330;return _0x3cf2b3?_0x192330['gl']['getProgram'+'Parameter'](this['glProgram'],_0x3cf2b3['COMPLETION'+'_STATUS_KH'+'R']):!(-0x138d+-0x8ff+-0x1*-0x1c8c);}['_processEr'+'ror'](_0x5c979e,_0x2af705){const _0x5567fd={};let _0x41d78c='';if(_0x5c979e){const _0x5aedc7=_0x5c979e['split']('\x0a');let _0x5ab29b=0x13a5*-0x1+0x10dc+0x2c9,_0x652bce=_0x5aedc7['length'];if(_0x2af705&&_0x2af705['startsWith']('ERROR:')){const _0x54320c=_0x2af705['match'](/^ERROR:\s(\d+):(\d+):\s*(.+)/);_0x54320c&&(_0x5567fd['message']=_0x54320c[0x22e3+-0x12f*0x17+-0x7a7],_0x5567fd['line']=parseInt(_0x54320c[0x14e*-0x8+-0x5f*-0xb+0x65d],-0x199d+-0x1d13+0x1e*0x1d3),_0x5ab29b=Math['max'](0x3d*-0x21+-0xb2*-0x25+-0x11dd,_0x5567fd['line']-(0x2*0x1061+-0xc6+-0x1ff6)),_0x652bce=Math['min'](_0x5aedc7['length'],_0x5567fd['line']+(-0x7*0xe1+0x21b6+-0x92e*0x3)));}for(let _0x5e4423=_0x5ab29b;_0x5e4423<_0x652bce;_0x5e4423++){const _0x28c706=_0x5e4423+(0x10*0x190+0x124b+-0x2b4a)===_0x5567fd['line']?'>\x20':'\x20\x20';_0x41d78c+=''+_0x28c706+(_0x5e4423+(-0x4b*-0x47+-0x1*-0x1c77+-0x3143*0x1))+':\x09'+_0x5aedc7[_0x5e4423]+'\x0a';}_0x5567fd['source']=_0x5c979e;}return[_0x41d78c,_0x5567fd];}}function Fm(_0x285833,_0x5b82c1){const _0x3deae9=_0x285833['width'],_0x4c7490=_0x285833['height'];if(_0x3deae9>_0x5b82c1||_0x4c7490>_0x5b82c1){const _0x5b9b07=_0x5b82c1/Math['max'](_0x3deae9,_0x4c7490),_0xb5aed7=Math['floor'](_0x3deae9*_0x5b9b07),_0x16e26f=Math['floor'](_0x4c7490*_0x5b9b07);w['warn']('Image\x20dime'+'nsions\x20lar'+'ger\x20than\x20m'+'ax\x20support'+'ed\x20texture'+'\x20size\x20of\x20'+_0x5b82c1+('.\x20Resizing'+'\x20from\x20')+_0x3deae9+',\x20'+_0x4c7490+'\x20to\x20'+_0xb5aed7+',\x20'+_0x16e26f+'.');const _0x1ce68d=document['createElem'+'ent']('canvas');return _0x1ce68d['width']=_0xb5aed7,_0x1ce68d['height']=_0x16e26f,_0x1ce68d['getContext']('2d')['drawImage'](_0x285833,0x1706*0x1+-0x25*-0x86+-0x2a64,-0x5*-0x419+-0x1*0x2543+-0x863*-0x2,_0x3deae9,_0x4c7490,0x5*0x2bb+0x3*-0x5f1+0x164*0x3,0xa7*0x2b+0x18a1+-0x34ae,_0xb5aed7,_0x16e26f),_0x1ce68d;}return _0x285833;}class ST{constructor(_0x5aacca){h(this,'_glTexture',null),h(this,'_glTarget'),h(this,'_glFormat'),h(this,'_glInterna'+'lFormat'),h(this,'_glPixelTy'+'pe'),h(this,'_glCreated'),h(this,'dirtyParam'+'eterFlags',-0x28*0xf+0x14e+-0x13*-0xe),this['texture']=_0x5aacca;}['destroy'](_0x24700b){if(this['_glTexture']){for(let _0x30b7fa=0x2386*0x1+-0x92*-0x28+0x1*-0x3a56;_0x30b7fa<_0x24700b['textureUni'+'ts']['length'];_0x30b7fa++){const _0x403ff9=_0x24700b['textureUni'+'ts'][_0x30b7fa];for(let _0x51eb64=0xaa8+-0x2+-0xaa6*0x1;_0x51eb64<_0x403ff9['length'];_0x51eb64++)_0x403ff9[_0x51eb64]===this['_glTexture']&&(_0x403ff9[_0x51eb64]=null);}_0x24700b['gl']['deleteText'+'ure'](this['_glTexture']),this['_glTexture']=null;}}['loseContex'+'t'](){this['_glTexture']=null;}['propertyCh'+'anged'](_0x3c1c37){this['dirtyParam'+'eterFlags']|=_0x3c1c37;}['initialize'](_0x31d93c,_0xaae61a){const _0x3818aa=_0x31d93c['gl'];switch(this['_glTexture']=_0x3818aa['createText'+'ure'](),this['_glTarget']=_0xaae61a['_cubemap']?_0x3818aa['TEXTURE_CU'+'BE_MAP']:_0xaae61a['_volume']?_0x3818aa['TEXTURE_3D']:_0xaae61a['array']?_0x3818aa['TEXTURE_2D'+'_ARRAY']:_0x3818aa['TEXTURE_2D'],_0xaae61a['_format']){case yS:this['_glFormat']=_0x3818aa['ALPHA'],this['_glInterna'+'lFormat']=_0x3818aa['ALPHA'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case vS:this['_glFormat']=_0x3818aa['LUMINANCE'],this['_glInterna'+'lFormat']=_0x3818aa['LUMINANCE'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case Lu:this['_glFormat']=_0x3818aa['LUMINANCE_'+'ALPHA'],this['_glInterna'+'lFormat']=_0x3818aa['LUMINANCE_'+'ALPHA'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case Zu:this['_glFormat']=_0x3818aa['RED'],this['_glInterna'+'lFormat']=_0x3818aa['R8'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case Qu:this['_glFormat']=_0x3818aa['RG'],this['_glInterna'+'lFormat']=_0x3818aa['RG8'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case Ih:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x3818aa['RGB565'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_S'+'HORT_5_6_5'];break;case Ru:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x3818aa['RGB5_A1'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_S'+'HORT_5_5_5'+'_1'];break;case Lh:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA4'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_S'+'HORT_4_4_4'+'_4'];break;case wr:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x3818aa['RGB8'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case Ne:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA8'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case ES:case PS:w['error']('BGRA8\x20and\x20'+'SBGRA8\x20tex'+'ture\x20forma'+'ts\x20are\x20not'+'\x20supported'+'\x20by\x20WebGL.');break;case Rh:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGB_S3TC_'+'DXT1_EXT'];break;case Ou:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT3_EXT'];break;case ol:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT5_EXT'];break;case Fh:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ETC1']['COMPRESSED'+'_RGB_ETC1_'+'WEBGL'];break;case ll:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_2BPPV1_IM'+'G'];break;case cl:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_2BPPV1_I'+'MG'];break;case Nh:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_4BPPV1_IM'+'G'];break;case kh:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_4BPPV1_I'+'MG'];break;case Nu:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGB8_ETC2'];break;case ku:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGBA8_ETC'+'2_EAC'];break;case xS:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_RGBA_ASTC'+'_4x4_KHR'];break;case TS:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGB_ATC_W'+'EBGL'];break;case wS:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGBA_ATC_'+'INTERPOLAT'+'ED_ALPHA_W'+'EBGL'];break;case MS:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x31d93c['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'SIGNED_FLO'+'AT_EXT'];break;case DS:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x31d93c['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'UNSIGNED_F'+'LOAT_EXT'];break;case IS:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGBA_BPTC'+'_UNORM_EXT'];break;case vf:this['_glFormat']=_0x3818aa['SRGB'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_S3TC'+'_DXT1_EXT'];break;case xf:this['_glFormat']=_0x3818aa['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'3_EXT'];break;case Tf:this['_glFormat']=_0x3818aa['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'5_EXT'];break;case wf:this['_glFormat']=_0x3818aa['SRGB'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ETC'+'2'];break;case Ef:this['_glFormat']=_0x3818aa['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ETC2_E'+'AC'];break;case bf:this['_glFormat']=_0x3818aa['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x31d93c['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ASTC_4'+'x4_KHR'];break;case Af:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x31d93c['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_SRGB_ALPH'+'A_BPTC_UNO'+'RM_EXT'];break;case Bh:this['_glFormat']=_0x3818aa['RED'],this['_glInterna'+'lFormat']=_0x3818aa['R16F'],this['_glPixelTy'+'pe']=_0x3818aa['HALF_FLOAT'];break;case Ku:this['_glFormat']=_0x3818aa['RG'],this['_glInterna'+'lFormat']=_0x3818aa['RG16F'],this['_glPixelTy'+'pe']=_0x3818aa['HALF_FLOAT'];break;case ui:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x3818aa['RGB16F'],this['_glPixelTy'+'pe']=_0x3818aa['HALF_FLOAT'];break;case nt:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA16F'],this['_glPixelTy'+'pe']=_0x3818aa['HALF_FLOAT'];break;case Ye:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x3818aa['RGB32F'],this['_glPixelTy'+'pe']=_0x3818aa['FLOAT'];break;case Xt:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA32F'],this['_glPixelTy'+'pe']=_0x3818aa['FLOAT'];break;case Qi:this['_glFormat']=_0x3818aa['RED'],this['_glInterna'+'lFormat']=_0x3818aa['R32F'],this['_glPixelTy'+'pe']=_0x3818aa['FLOAT'];break;case Wi:this['_glFormat']=_0x3818aa['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x3818aa['DEPTH_COMP'+'ONENT32F'],this['_glPixelTy'+'pe']=_0x3818aa['FLOAT'];break;case un:this['_glFormat']=_0x3818aa['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x3818aa['DEPTH_COMP'+'ONENT16'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_S'+'HORT'];break;case Oh:this['_glFormat']=_0x3818aa['DEPTH_STEN'+'CIL'],this['_glInterna'+'lFormat']=_0x3818aa['DEPTH24_ST'+'ENCIL8'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_I'+'NT_24_8'];break;case En:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x3818aa['R11F_G11F_'+'B10F'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_I'+'NT_10F_11F'+'_11F_REV'];break;case Fu:this['_glFormat']=_0x3818aa['RGB'],this['_glInterna'+'lFormat']=_0x3818aa['SRGB8'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case _s:this['_glFormat']=_0x3818aa['RGBA'],this['_glInterna'+'lFormat']=_0x3818aa['SRGB8_ALPH'+'A8'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case Uu:this['_glFormat']=_0x3818aa['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x3818aa['R8I'],this['_glPixelTy'+'pe']=_0x3818aa['BYTE'];break;case bS:this['_glFormat']=_0x3818aa['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x3818aa['R8UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case Bu:this['_glFormat']=_0x3818aa['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x3818aa['R16I'],this['_glPixelTy'+'pe']=_0x3818aa['SHORT'];break;case zu:this['_glFormat']=_0x3818aa['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x3818aa['R16UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_S'+'HORT'];break;case Vu:this['_glFormat']=_0x3818aa['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x3818aa['R32I'],this['_glPixelTy'+'pe']=_0x3818aa['INT'];break;case Yi:this['_glFormat']=_0x3818aa['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x3818aa['R32UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_I'+'NT'];break;case Gu:this['_glFormat']=_0x3818aa['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x3818aa['RG8I'],this['_glPixelTy'+'pe']=_0x3818aa['BYTE'];break;case AS:this['_glFormat']=_0x3818aa['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x3818aa['RG8UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case Hu:this['_glFormat']=_0x3818aa['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x3818aa['RG16I'],this['_glPixelTy'+'pe']=_0x3818aa['SHORT'];break;case Wu:this['_glFormat']=_0x3818aa['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x3818aa['RG16UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_S'+'HORT'];break;case $u:this['_glFormat']=_0x3818aa['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x3818aa['RG32I'],this['_glPixelTy'+'pe']=_0x3818aa['INT'];break;case Xu:this['_glFormat']=_0x3818aa['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x3818aa['RG32UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_I'+'NT'];break;case qu:this['_glFormat']=_0x3818aa['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA8I'],this['_glPixelTy'+'pe']=_0x3818aa['BYTE'];break;case CS:this['_glFormat']=_0x3818aa['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA8UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_B'+'YTE'];break;case ju:this['_glFormat']=_0x3818aa['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA16I'],this['_glPixelTy'+'pe']=_0x3818aa['SHORT'];break;case Uh:this['_glFormat']=_0x3818aa['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA16UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_S'+'HORT'];break;case Yu:this['_glFormat']=_0x3818aa['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA32I'],this['_glPixelTy'+'pe']=_0x3818aa['INT'];break;case Ue:this['_glFormat']=_0x3818aa['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x3818aa['RGBA32UI'],this['_glPixelTy'+'pe']=_0x3818aa['UNSIGNED_I'+'NT'];break;}this['_glCreated']=!(0x918+0xf*-0xd4+0x355);}['upload'](_0x9010f6,_0x4daf87){w['assert'](_0x4daf87['device'],'Attempting'+'\x20to\x20use\x20a\x20'+'texture\x20th'+'at\x20has\x20bee'+'n\x20destroye'+'d.',_0x4daf87);const _0x30c7e6=_0x9010f6['gl'];if(!_0x4daf87['_needsUplo'+'ad']&&(_0x4daf87['_needsMipm'+'apsUpload']&&_0x4daf87['_mipmapsUp'+'loaded']||!_0x4daf87['pot']))return;let _0x2b45b6=0x114f+0x6*0xc7+-0x177*0xf,_0x2c7283,_0x24194a;const _0x540483=_0x4daf87['numLevels'];for(_0x4daf87['array']&&_0x30c7e6['texStorage'+'3D'](_0x30c7e6['TEXTURE_2D'+'_ARRAY'],_0x540483,this['_glInterna'+'lFormat'],_0x4daf87['_width'],_0x4daf87['_height'],_0x4daf87['_arrayLeng'+'th']);_0x4daf87['_levels'][_0x2b45b6]||_0x2b45b6===0x4f*-0x29+0x1468+-0x7c1;){if(!_0x4daf87['_needsUplo'+'ad']&&_0x2b45b6===0x110+0x1f84+-0x4*0x825){_0x2b45b6++;continue;}else{if(_0x2b45b6&&(!_0x4daf87['_needsMipm'+'apsUpload']||!_0x4daf87['_mipmaps']))break;}if(_0x2c7283=_0x4daf87['_levels'][_0x2b45b6],_0x24194a=(0xe2f*0x1+-0x1ccc+0xe9e)/Math['pow'](0xbe8+-0x1553+0x96d,_0x2b45b6),_0x2b45b6===0x325+-0x70b+0x3e7&&!_0x4daf87['_compresse'+'d']&&!_0x4daf87['_integerFo'+'rmat']&&_0x4daf87['_levels']['length']<_0x540483&&(_0x30c7e6['generateMi'+'pmap'](this['_glTarget']),_0x4daf87['_mipmapsUp'+'loaded']=!(0x540+0x2f5*-0x2+0xaa)),_0x4daf87['_cubemap']){let _0x8258e3;if(_0x9010f6['_isBrowser'+'Interface'](_0x2c7283[0x24fa+-0x795*0x3+-0xe3b*0x1]))for(_0x8258e3=0xd18+0x5*-0x3a1+-0x50d*-0x1;_0x8258e3<-0x12f4+0x5*-0x4e2+0xad9*0x4;_0x8258e3++){if(!_0x4daf87['_levelsUpd'+'ated'][-0x1170+0x24a8+-0x1338][_0x8258e3])continue;let _0x50d463=_0x2c7283[_0x8258e3];_0x9010f6['_isImageBr'+'owserInter'+'face'](_0x50d463)&&(_0x50d463['width']>_0x9010f6['maxCubeMap'+'Size']||_0x50d463['height']>_0x9010f6['maxCubeMap'+'Size'])&&(_0x50d463=Fm(_0x50d463,_0x9010f6['maxCubeMap'+'Size']),_0x2b45b6===-0x35*0xa+0x481*0x1+-0x26f&&(_0x4daf87['_width']=_0x50d463['width'],_0x4daf87['_height']=_0x50d463['height'])),_0x9010f6['setUnpackF'+'lipY'](!(0x1c1d+-0x19d9+-0xc1*0x3)),_0x9010f6['setUnpackP'+'remultiply'+'Alpha'](_0x4daf87['_premultip'+'lyAlpha']),this['_glCreated']?_0x30c7e6['texSubImag'+'e2D'](_0x30c7e6['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x8258e3,_0x2b45b6,0x9*-0x289+0x9d*-0x7+0x14*0x15b,-0x29*-0xce+-0xad*0x1f+-0xc0b,this['_glFormat'],this['_glPixelTy'+'pe'],_0x50d463):_0x30c7e6['texImage2D'](_0x30c7e6['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x8258e3,_0x2b45b6,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x50d463);}else for(_0x24194a=(0x1b99+-0x1fa1*0x1+-0x1*-0x409)/Math['pow'](0xa27+-0x129c+-0x877*-0x1,_0x2b45b6),_0x8258e3=-0x208c+0x10e6+0x2*0x7d3;_0x8258e3<-0x5b3*-0x2+-0x65b*-0x3+-0x1e71;_0x8258e3++){if(!_0x4daf87['_levelsUpd'+'ated'][-0x3*0x7f2+-0x1*-0x1827+-0x51][_0x8258e3])continue;const _0xc1c36d=_0x2c7283[_0x8258e3];_0x4daf87['_compresse'+'d']?this['_glCreated']&&_0xc1c36d?_0x30c7e6['compressed'+'TexSubImag'+'e2D'](_0x30c7e6['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x8258e3,_0x2b45b6,-0x19e8+0x2573+-0xb8b,-0x7c5+0x1421+-0x1c*0x71,Math['max'](_0x4daf87['_width']*_0x24194a,-0x3*-0x4d8+0x21f6+-0x307d*0x1),Math['max'](_0x4daf87['_height']*_0x24194a,0x1638+-0x5c6*0x1+-0x3*0x57b),this['_glInterna'+'lFormat'],_0xc1c36d):_0x30c7e6['compressed'+'TexImage2D'](_0x30c7e6['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x8258e3,_0x2b45b6,this['_glInterna'+'lFormat'],Math['max'](_0x4daf87['_width']*_0x24194a,-0x939+0x4d1+-0x1*-0x469),Math['max'](_0x4daf87['_height']*_0x24194a,-0xc75+-0x5*-0x2d5+-0x1b3),-0xc34+0x22e1+-0x16ad,_0xc1c36d):(_0x9010f6['setUnpackF'+'lipY'](!(-0x1cd9+-0x6a*-0x4f+-0x3dc)),_0x9010f6['setUnpackP'+'remultiply'+'Alpha'](_0x4daf87['_premultip'+'lyAlpha']),this['_glCreated']&&_0xc1c36d?_0x30c7e6['texSubImag'+'e2D'](_0x30c7e6['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x8258e3,_0x2b45b6,-0xb*-0x71+-0x1*-0x1cef+0x2*-0x10e5,-0x1*-0xa4c+0x533*0x3+0x1*-0x19e5,Math['max'](_0x4daf87['_width']*_0x24194a,-0x1*-0x66d+-0xadc+0x47*0x10),Math['max'](_0x4daf87['_height']*_0x24194a,0x1775+-0x8c1+-0x35*0x47),this['_glFormat'],this['_glPixelTy'+'pe'],_0xc1c36d):_0x30c7e6['texImage2D'](_0x30c7e6['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x8258e3,_0x2b45b6,this['_glInterna'+'lFormat'],Math['max'](_0x4daf87['_width']*_0x24194a,-0x26db+-0x1949*-0x1+0x19*0x8b),Math['max'](_0x4daf87['_height']*_0x24194a,0x1f*-0x83+0x418+-0xb*-0x112),0x1ddd+-0xc5e+-0x117f,this['_glFormat'],this['_glPixelTy'+'pe'],_0xc1c36d));}}else{if(_0x4daf87['_volume'])_0x4daf87['_compresse'+'d']?_0x30c7e6['compressed'+'TexImage3D'](_0x30c7e6['TEXTURE_3D'],_0x2b45b6,this['_glInterna'+'lFormat'],Math['max'](_0x4daf87['_width']*_0x24194a,-0x2f6+-0x8a5+0x1*0xb9c),Math['max'](_0x4daf87['_height']*_0x24194a,0x89*-0x1d+0x660+0x926*0x1),Math['max'](_0x4daf87['_depth']*_0x24194a,0x4f*0x7d+0x2*-0x869+0x3*-0x740),-0x1746*-0x1+0x11*-0xa3+-0xc73,_0x2c7283):(_0x9010f6['setUnpackF'+'lipY'](!(-0x625*0x6+0x1598+0xf47)),_0x9010f6['setUnpackP'+'remultiply'+'Alpha'](_0x4daf87['_premultip'+'lyAlpha']),_0x30c7e6['texImage3D'](_0x30c7e6['TEXTURE_3D'],_0x2b45b6,this['_glInterna'+'lFormat'],Math['max'](_0x4daf87['_width']*_0x24194a,-0x10*-0x22d+0x675*0x6+-0x13*0x3df),Math['max'](_0x4daf87['_height']*_0x24194a,-0xa47*-0x1+0x1187+-0x1bcd),Math['max'](_0x4daf87['_depth']*_0x24194a,0x22f*-0x4+0xca7*0x3+-0x44*0x6e),0x11be+0x1*-0x1249+0x8b,this['_glFormat'],this['_glPixelTy'+'pe'],_0x2c7283));else{if(_0x4daf87['array']&&typeof _0x2c7283=='object'){if(_0x4daf87['_arrayLeng'+'th']===_0x2c7283['length']){if(_0x4daf87['_compresse'+'d']){for(let _0x97a71a=0x16eb+-0x2438+0x46f*0x3;_0x97a71a<_0x4daf87['_arrayLeng'+'th'];_0x97a71a++)_0x30c7e6['compressed'+'TexSubImag'+'e3D'](_0x30c7e6['TEXTURE_2D'+'_ARRAY'],_0x2b45b6,0x3*-0x955+0x1*-0x1216+0x2e15,0x230b+0x2694+0x1*-0x499f,_0x97a71a,Math['max'](Math['floor'](_0x4daf87['_width']*_0x24194a),-0x1*0x13b1+0x11bc+-0x1*-0x1f6),Math['max'](Math['floor'](_0x4daf87['_height']*_0x24194a),0xd19+0x19ba+0x26d2*-0x1),-0xed2*-0x1+-0x1efc+0x102b,this['_glInterna'+'lFormat'],_0x2c7283[_0x97a71a]);}else{for(let _0x40752c=-0x19*0x18+0x133*-0xc+-0xc*-0x165;_0x40752c<_0x4daf87['_arrayLeng'+'th'];_0x40752c++)_0x30c7e6['texSubImag'+'e3D'](_0x30c7e6['TEXTURE_2D'+'_ARRAY'],_0x2b45b6,0x767*0x3+-0x74*-0x30+0x5d*-0x79,-0x219b+-0x1ed*0x6+0x2d29,_0x40752c,Math['max'](Math['floor'](_0x4daf87['_width']*_0x24194a),0x1*0x1d69+0x1*-0xa6f+-0x3*0x653),Math['max'](Math['floor'](_0x4daf87['_height']*_0x24194a),-0xa09+-0x2690+0x309a),0x5a2+0x19*-0x81+-0x1*-0x6f8,this['_glFormat'],this['_glPixelTy'+'pe'],_0x2c7283[_0x40752c]);}}}else{if(_0x9010f6['_isBrowser'+'Interface'](_0x2c7283)){_0x9010f6['_isImageBr'+'owserInter'+'face'](_0x2c7283)&&(_0x2c7283['width']>_0x9010f6['maxTexture'+'Size']||_0x2c7283['height']>_0x9010f6['maxTexture'+'Size'])&&(_0x2c7283=Fm(_0x2c7283,_0x9010f6['maxTexture'+'Size']),_0x2b45b6===-0xe87*0x1+0xa46*-0x2+0x2313&&(_0x4daf87['_width']=_0x2c7283['width'],_0x4daf87['_height']=_0x2c7283['height']));const _0x23bd33=_0x2c7283['width']||_0x2c7283['videoWidth'],_0x16b240=_0x2c7283['height']||_0x2c7283['videoHeigh'+'t'];_0x9010f6['setUnpackF'+'lipY'](_0x4daf87['_flipY']),_0x9010f6['setUnpackP'+'remultiply'+'Alpha'](_0x4daf87['_premultip'+'lyAlpha']),this['_glCreated']&&_0x4daf87['_width']===_0x23bd33&&_0x4daf87['_height']===_0x16b240&&!_0x9010f6['_isImageVi'+'deoInterfa'+'ce'](_0x2c7283)?_0x30c7e6['texSubImag'+'e2D'](_0x30c7e6['TEXTURE_2D'],_0x2b45b6,0x11e5+-0xf7*-0x19+-0x2*0x1502,0xed7+0x20c9+-0x2fa0,this['_glFormat'],this['_glPixelTy'+'pe'],_0x2c7283):(_0x30c7e6['texImage2D'](_0x30c7e6['TEXTURE_2D'],_0x2b45b6,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x2c7283),_0x2b45b6===0x55f*0x4+0x1f14+-0xe8*0x3a&&(_0x4daf87['_width']=_0x23bd33,_0x4daf87['_height']=_0x16b240));}else _0x24194a=(-0xa2b+0x184f+-0xb*0x149)/Math['pow'](-0xcf8*-0x1+-0x6d7+-0x61f,_0x2b45b6),_0x4daf87['_compresse'+'d']?this['_glCreated']&&_0x2c7283?_0x30c7e6['compressed'+'TexSubImag'+'e2D'](_0x30c7e6['TEXTURE_2D'],_0x2b45b6,-0x103*0xa+0x21bf+-0x17*0x107,-0x100d+0x2642*-0x1+0x364f,Math['max'](Math['floor'](_0x4daf87['_width']*_0x24194a),0x1b61*0x1+-0x1*0x1ee3+0x383),Math['max'](Math['floor'](_0x4daf87['_height']*_0x24194a),-0x1c99*0x1+-0x53*0x69+0x3ea5*0x1),this['_glInterna'+'lFormat'],_0x2c7283):_0x30c7e6['compressed'+'TexImage2D'](_0x30c7e6['TEXTURE_2D'],_0x2b45b6,this['_glInterna'+'lFormat'],Math['max'](Math['floor'](_0x4daf87['_width']*_0x24194a),-0x1*0x931+0x15fa+-0xcc8),Math['max'](Math['floor'](_0x4daf87['_height']*_0x24194a),0x1*0x221+0x2*0x1bf+-0x2cf*0x2),-0x1*-0xb26+0x2c+0x7e*-0x17,_0x2c7283):(_0x9010f6['setUnpackF'+'lipY'](!(0x1*-0x9b1+0xa*-0x2be+0x2*0x128f)),_0x9010f6['setUnpackP'+'remultiply'+'Alpha'](_0x4daf87['_premultip'+'lyAlpha']),this['_glCreated']&&_0x2c7283?_0x30c7e6['texSubImag'+'e2D'](_0x30c7e6['TEXTURE_2D'],_0x2b45b6,0xc2*0xb+-0x1336*0x2+-0x2*-0xf0b,0x925*-0x3+-0xede+0x60b*0x7,Math['max'](_0x4daf87['_width']*_0x24194a,-0x205b+0x3*0xb7d+0x21b*-0x1),Math['max'](_0x4daf87['_height']*_0x24194a,0x1cdb+0x1*-0x9f5+-0x12e5),this['_glFormat'],this['_glPixelTy'+'pe'],_0x2c7283):_0x30c7e6['texImage2D'](_0x30c7e6['TEXTURE_2D'],_0x2b45b6,this['_glInterna'+'lFormat'],Math['max'](_0x4daf87['_width']*_0x24194a,0x1b6c+-0x136b+-0x800),Math['max'](_0x4daf87['_height']*_0x24194a,0x17d4+0xa0+0x1873*-0x1),0xbd8+-0x1411+0x839,this['_glFormat'],this['_glPixelTy'+'pe'],_0x2c7283));_0x2b45b6===0x10ed+0x8f*0x1c+-0x2091?_0x4daf87['_mipmapsUp'+'loaded']=!(0x9f*-0x12+0x895+0x29a):_0x4daf87['_mipmapsUp'+'loaded']=!(-0x1*0xc47+-0xb3*-0x2e+-0x13e3*0x1);}}}_0x2b45b6++;}if(_0x4daf87['_needsUplo'+'ad']){if(_0x4daf87['_cubemap']){for(let _0x3c35fd=0x16f*0x17+-0xd*-0x2cf+-0x457c;_0x3c35fd<-0x6cd+0x421*0x7+0x6*-0x3ae;_0x3c35fd++)_0x4daf87['_levelsUpd'+'ated'][-0xf1*0x17+-0x245e+0x3a05][_0x3c35fd]=!(-0x14dc+-0x19e5+0x15*0x23a);}else _0x4daf87['_levelsUpd'+'ated'][-0x5d0+-0x25a9+0x1f*0x167]=!(-0x323*0xb+0x1d27+0x55b);}!_0x4daf87['_compresse'+'d']&&!_0x4daf87['_integerFo'+'rmat']&&_0x4daf87['_mipmaps']&&_0x4daf87['_needsMipm'+'apsUpload']&&_0x4daf87['_levels']['length']===0xc9*0x2+0x5da+-0x76b&&(_0x30c7e6['generateMi'+'pmap'](this['_glTarget']),_0x4daf87['_mipmapsUp'+'loaded']=!(-0x84e*0x1+-0x197e+-0x2d1*-0xc)),_0x4daf87['_gpuSize']&&_0x4daf87['adjustVram'+'SizeTracki'+'ng'](_0x9010f6['_vram'],-_0x4daf87['_gpuSize']),_0x4daf87['_gpuSize']=_0x4daf87['gpuSize'],_0x4daf87['adjustVram'+'SizeTracki'+'ng'](_0x9010f6['_vram'],_0x4daf87['_gpuSize']),this['_glCreated']=!(0x22b+0x18ef+-0x1b1a);}['read'](_0x1032af,_0x412e0c,_0x7ee3c4,_0x40f481,_0x12fc42){const _0x5a1db9=this['texture'];return _0x5a1db9['device']['readTextur'+'eAsync'](_0x5a1db9,_0x1032af,_0x412e0c,_0x7ee3c4,_0x40f481,_0x12fc42);}['write'](_0x2afafe,_0x4a3e2a,_0x2563ef,_0x48e1af,_0x440476){const {texture:_0x3003a0}=this,{device:_0x101d67}=_0x3003a0;return _0x101d67['setTexture'](_0x3003a0,0xf10*-0x2+0x18ea+0x29b*0x2),_0x101d67['writeTextu'+'reAsync'](_0x3003a0,_0x2afafe,_0x4a3e2a,_0x2563ef,_0x48e1af,_0x440476);}}(function(){let _0x1b84ef;try{const _0x115311=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0x1b84ef=_0x115311();}catch(_0x42c222){_0x1b84ef=window;}_0x1b84ef['setInterva'+'l'](_0x4a53f3,-0x9ac+-0x1586+0xd*0x39a);}());class yT{constructor(_0x4f54d2,_0x136335){h(this,'msaaFB'),h(this,'resolveFB'),(this['msaaFB']=_0x4f54d2,this['resolveFB']=_0x136335);}['destroy'](_0x1dbf3a){this['msaaFB']&&(_0x1dbf3a['deleteRend'+'erbuffer'](this['msaaFB']),this['msaaFB']=null),this['resolveFB']&&(_0x1dbf3a['deleteRend'+'erbuffer'](this['resolveFB']),this['resolveFB']=null);}}class vT{constructor(){h(this,'_glFrameBu'+'ffer',null),h(this,'_glDepthBu'+'ffer',null),h(this,'_glResolve'+'FrameBuffe'+'r',null),h(this,'colorMrtFr'+'amebuffers',null),h(this,'_glMsaaCol'+'orBuffers',[]),h(this,'_glMsaaDep'+'thBuffer',null),h(this,'msaaDepthB'+'ufferKey'),h(this,'suppliedCo'+'lorFramebu'+'ffer'),h(this,'_isInitial'+'ized',!(0x1932+-0xc6*0x1+-0x186b*0x1));}['destroy'](_0x490dbc){var _0x272c34;const _0x8fd9b8=_0x490dbc['gl'];this['_isInitial'+'ized']=!(-0x1329+-0x1*-0x26b7+0x23*-0x8f),this['_glFrameBu'+'ffer']&&(this['_glFrameBu'+'ffer']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x8fd9b8['deleteFram'+'ebuffer'](this['_glFrameBu'+'ffer']),this['_glFrameBu'+'ffer']=null),this['_glDepthBu'+'ffer']&&(_0x8fd9b8['deleteRend'+'erbuffer'](this['_glDepthBu'+'ffer']),this['_glDepthBu'+'ffer']=null),this['_glResolve'+'FrameBuffe'+'r']&&(this['_glResolve'+'FrameBuffe'+'r']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x8fd9b8['deleteFram'+'ebuffer'](this['_glResolve'+'FrameBuffe'+'r']),this['_glResolve'+'FrameBuffe'+'r']=null),this['_glMsaaCol'+'orBuffers']['forEach'](_0x1952b1=>{_0x8fd9b8['deleteRend'+'erbuffer'](_0x1952b1);}),this['_glMsaaCol'+'orBuffers']['length']=0x227e+-0x772*0x1+-0x1b0c,(_0x272c34=this['colorMrtFr'+'amebuffers'])==null||_0x272c34['forEach'](_0x7aa488=>{_0x7aa488['destroy'](_0x8fd9b8);}),this['colorMrtFr'+'amebuffers']=null,this['_glMsaaDep'+'thBuffer']&&(this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']&&ud(_0x490dbc)['release'](this['msaaDepthB'+'ufferKey'])),this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x119c+-0xd5d+0x1ef9);}get['initialize'+'d'](){return this['_isInitial'+'ized'];}['init'](_0x28a7c5,_0xdc4766){var _0x405e3a,_0x2b68ff;const _0x2452de=_0x28a7c5['gl'];w['assert'](!this['_isInitial'+'ized'],'Render\x20tar'+'get\x20alread'+'y\x20initiali'+'zed.'),this['_isInitial'+'ized']=!(0x207*-0x13+0x45b+0x222a*0x1);const _0x57ac02=[];if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x2a1*0x8+0x2075+-0xb6d))this['_glFrameBu'+'ffer']=this['suppliedCo'+'lorFramebu'+'ffer'];else{w['call'](()=>{(_0xdc4766['width']<=-0x4*0x26b+-0x209+0x1b*0x6f||_0xdc4766['height']<=-0x19d5+0x172d+0x4*0xaa)&&w['warnOnce']('Invalid\x20re'+'nder\x20targe'+'t\x20size:\x20'+_0xdc4766['width']+'\x20x\x20'+_0xdc4766['height'],_0xdc4766);}),this['_glFrameBu'+'ffer']=_0x2452de['createFram'+'ebuffer'](),_0x28a7c5['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x3e930b=((_0x405e3a=_0xdc4766['_colorBuff'+'ers'])==null?void(0x6*0x9+0x5d9+-0x60f):_0x405e3a['length'])??0xd*-0x1ef+-0x1748*-0x1+0x13*0x19,_0x3eac35=_0x2452de['COLOR_ATTA'+'CHMENT0'];for(let _0x1149db=0x1bad+-0x264e*-0x1+-0x41fb;_0x1149db<_0x3e930b;++_0x1149db){const _0x21d90d=_0xdc4766['getColorBu'+'ffer'](_0x1149db);_0x21d90d&&(_0x21d90d['impl']['_glTexture']||(_0x21d90d['_width']=Math['min'](_0x21d90d['width'],_0x28a7c5['maxRenderB'+'ufferSize']),_0x21d90d['_height']=Math['min'](_0x21d90d['height'],_0x28a7c5['maxRenderB'+'ufferSize']),_0x28a7c5['setTexture'](_0x21d90d,-0xb*0x34a+0x1806+0x2*0x614)),_0x2452de['framebuffe'+'rTexture2D'](_0x2452de['FRAMEBUFFE'+'R'],_0x3eac35+_0x1149db,_0x21d90d['_cubemap']?_0x2452de['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0xdc4766['_face']:_0x2452de['TEXTURE_2D'],_0x21d90d['impl']['_glTexture'],_0xdc4766['mipLevel']),_0x57ac02['push'](_0x3eac35+_0x1149db));}_0x2452de['drawBuffer'+'s'](_0x57ac02);const _0x550f4c=_0xdc4766['_depthBuff'+'er'];if(_0x550f4c||_0xdc4766['_depth']){const _0x7dca09=_0xdc4766['_stencil']?_0x2452de['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x2452de['DEPTH_ATTA'+'CHMENT'];if(_0x550f4c)_0x550f4c['impl']['_glTexture']||(_0x550f4c['_width']=Math['min'](_0x550f4c['width'],_0x28a7c5['maxRenderB'+'ufferSize']),_0x550f4c['_height']=Math['min'](_0x550f4c['height'],_0x28a7c5['maxRenderB'+'ufferSize']),_0x28a7c5['setTexture'](_0x550f4c,0x1*-0x14c2+-0x76c+0xe17*0x2)),_0x2452de['framebuffe'+'rTexture2D'](_0x2452de['FRAMEBUFFE'+'R'],_0x7dca09,_0x550f4c['_cubemap']?_0x2452de['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0xdc4766['_face']:_0x2452de['TEXTURE_2D'],_0xdc4766['_depthBuff'+'er']['impl']['_glTexture'],_0xdc4766['mipLevel']);else{if(!(_0xdc4766['_samples']>0xeaf+0x39*-0x49+0x193)){this['_glDepthBu'+'ffer']||(this['_glDepthBu'+'ffer']=_0x2452de['createRend'+'erbuffer']());const _0x2da3ea=_0xdc4766['_stencil']?_0x2452de['DEPTH24_ST'+'ENCIL8']:_0x2452de['DEPTH_COMP'+'ONENT32F'];_0x2452de['bindRender'+'buffer'](_0x2452de['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x2452de['renderbuff'+'erStorage'](_0x2452de['RENDERBUFF'+'ER'],_0x2da3ea,_0xdc4766['width'],_0xdc4766['height']),_0x2452de['framebuffe'+'rRenderbuf'+'fer'](_0x2452de['FRAMEBUFFE'+'R'],_0x7dca09,_0x2452de['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x2452de['bindRender'+'buffer'](_0x2452de['RENDERBUFF'+'ER'],null);}}}w['call'](()=>this['_checkFbo'](_0x28a7c5,_0xdc4766));}if(_0xdc4766['_samples']>-0x1d39+0x2539+0x17*-0x59){this['_glResolve'+'FrameBuffe'+'r']=this['_glFrameBu'+'ffer'],this['_glFrameBu'+'ffer']=_0x2452de['createFram'+'ebuffer'](),_0x28a7c5['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x582c4f=((_0x2b68ff=_0xdc4766['_colorBuff'+'ers'])==null?void(-0x155f+0x10b8+0x4a7):_0x2b68ff['length'])??0xf*0x4e+0x1*-0x15b6+-0x1124*-0x1;if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0xb*0x25f+-0x199*-0x2+0x117*0x15)){const _0x474786=_0x2452de['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x474786);const _0x247506=_0x28a7c5['backBuffer'+'Format']===Ne?_0x2452de['RGBA8']:_0x2452de['RGB8'];_0x2452de['bindRender'+'buffer'](_0x2452de['RENDERBUFF'+'ER'],_0x474786),_0x2452de['renderbuff'+'erStorageM'+'ultisample'](_0x2452de['RENDERBUFF'+'ER'],_0xdc4766['_samples'],_0x247506,_0xdc4766['width'],_0xdc4766['height']),_0x2452de['framebuffe'+'rRenderbuf'+'fer'](_0x2452de['FRAMEBUFFE'+'R'],_0x2452de['COLOR_ATTA'+'CHMENT0'],_0x2452de['RENDERBUFF'+'ER'],_0x474786);}else for(let _0x164509=-0x2*-0x6d5+0x1*0x225e+-0x3008;_0x164509<_0x582c4f;++_0x164509){const _0x39a7aa=_0xdc4766['getColorBu'+'ffer'](_0x164509);if(_0x39a7aa){const _0x39e251=_0x2452de['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x39e251),_0x2452de['bindRender'+'buffer'](_0x2452de['RENDERBUFF'+'ER'],_0x39e251),_0x2452de['renderbuff'+'erStorageM'+'ultisample'](_0x2452de['RENDERBUFF'+'ER'],_0xdc4766['_samples'],_0x39a7aa['impl']['_glInterna'+'lFormat'],_0xdc4766['width'],_0xdc4766['height']),_0x2452de['framebuffe'+'rRenderbuf'+'fer'](_0x2452de['FRAMEBUFFE'+'R'],_0x2452de['COLOR_ATTA'+'CHMENT0']+_0x164509,_0x2452de['RENDERBUFF'+'ER'],_0x39e251);}}if(_0xdc4766['_depth']){w['assert'](!this['_glMsaaDep'+'thBuffer']);const _0x9fd83a=_0xdc4766['_stencil']?_0x2452de['DEPTH24_ST'+'ENCIL8']:_0x2452de['DEPTH_COMP'+'ONENT32F'],_0x300f5a=_0xdc4766['_stencil']?_0x2452de['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x2452de['DEPTH_ATTA'+'CHMENT'];let _0x1e6b6b;const _0x513f47=_0xdc4766['_depthBuff'+'er'];_0x513f47&&(_0x1e6b6b=_0x513f47['id']+':'+_0xdc4766['width']+':'+_0xdc4766['height']+':'+_0xdc4766['_samples']+':'+_0x9fd83a+':'+_0x300f5a,this['_glMsaaDep'+'thBuffer']=ud(_0x28a7c5)['get'](_0x1e6b6b)),this['_glMsaaDep'+'thBuffer']||(this['_glMsaaDep'+'thBuffer']=_0x2452de['createRend'+'erbuffer'](),_0x2452de['bindRender'+'buffer'](_0x2452de['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']),_0x2452de['renderbuff'+'erStorageM'+'ultisample'](_0x2452de['RENDERBUFF'+'ER'],_0xdc4766['_samples'],_0x9fd83a,_0xdc4766['width'],_0xdc4766['height']),this['_glMsaaDep'+'thBuffer']['destroy']=function(){_0x2452de['deleteRend'+'erbuffer'](this);},_0x513f47&&ud(_0x28a7c5)['set'](_0x1e6b6b,this['_glMsaaDep'+'thBuffer'])),this['msaaDepthB'+'ufferKey']=_0x1e6b6b,_0x2452de['framebuffe'+'rRenderbuf'+'fer'](_0x2452de['FRAMEBUFFE'+'R'],_0x300f5a,_0x2452de['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']);}w['call'](()=>this['_checkFbo'](_0x28a7c5,_0xdc4766,'MSAA')),_0x582c4f>0x7dc+-0x2*-0x10c1+-0x1*0x295d&&(this['_createMsa'+'aMrtFrameb'+'uffers'](_0x28a7c5,_0xdc4766,_0x582c4f),_0x28a7c5['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']),_0x2452de['drawBuffer'+'s'](_0x57ac02));}}['_createMsa'+'aMrtFrameb'+'uffers'](_0x2e3017,_0x7ca4e5,_0x54880d){const _0x6a461e=_0x2e3017['gl'];this['colorMrtFr'+'amebuffers']=[];for(let _0x41378e=-0x9*0xf1+-0x11d4+0x1a4d;_0x41378e<_0x54880d;++_0x41378e){const _0x22b056=_0x7ca4e5['getColorBu'+'ffer'](_0x41378e),_0x5dccc3=_0x6a461e['createFram'+'ebuffer']();_0x2e3017['setFramebu'+'ffer'](_0x5dccc3);const _0x3dd091=this['_glMsaaCol'+'orBuffers'][_0x41378e];_0x6a461e['bindRender'+'buffer'](_0x6a461e['RENDERBUFF'+'ER'],_0x3dd091),_0x6a461e['renderbuff'+'erStorageM'+'ultisample'](_0x6a461e['RENDERBUFF'+'ER'],_0x7ca4e5['_samples'],_0x22b056['impl']['_glInterna'+'lFormat'],_0x7ca4e5['width'],_0x7ca4e5['height']),_0x6a461e['framebuffe'+'rRenderbuf'+'fer'](_0x6a461e['FRAMEBUFFE'+'R'],_0x6a461e['COLOR_ATTA'+'CHMENT0'],_0x6a461e['RENDERBUFF'+'ER'],_0x3dd091),_0x6a461e['drawBuffer'+'s']([_0x6a461e['COLOR_ATTA'+'CHMENT0']]),w['call'](()=>this['_checkFbo'](_0x2e3017,_0x7ca4e5,'MSAA-MRT-s'+'rc'+_0x41378e));const _0x23b6f9=_0x6a461e['createFram'+'ebuffer']();_0x2e3017['setFramebu'+'ffer'](_0x23b6f9),_0x6a461e['framebuffe'+'rTexture2D'](_0x6a461e['FRAMEBUFFE'+'R'],_0x6a461e['COLOR_ATTA'+'CHMENT0'],_0x22b056['_cubemap']?_0x6a461e['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x7ca4e5['_face']:_0x6a461e['TEXTURE_2D'],_0x22b056['impl']['_glTexture'],0x1*0x336+-0x1*-0xfc9+-0x12ff),this['colorMrtFr'+'amebuffers'][_0x41378e]=new yT(_0x5dccc3,_0x23b6f9),w['call'](()=>this['_checkFbo'](_0x2e3017,_0x7ca4e5,'MSAA-MRT-d'+'st'+_0x41378e));}}['_checkFbo'](_0x3de968,_0x2a6a23,_0xe461a2=''){const _0x13480e=_0x3de968['gl'],_0x435c3d=_0x13480e['checkFrame'+'bufferStat'+'us'](_0x13480e['FRAMEBUFFE'+'R']);let _0x3dc4ff;switch(_0x435c3d){case _0x13480e['FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT']:_0x3dc4ff='FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT';break;case _0x13480e['FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T']:_0x3dc4ff='FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T';break;case _0x13480e['FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS']:_0x3dc4ff='FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS';break;case _0x13480e['FRAMEBUFFE'+'R_UNSUPPOR'+'TED']:_0x3dc4ff='FRAMEBUFFE'+'R_UNSUPPOR'+'TED';break;}w['assert'](!_0x3dc4ff,'Framebuffe'+'r\x20creation'+'\x20failed\x20wi'+'th\x20error\x20c'+'ode\x20'+_0x3dc4ff+(',\x20render\x20t'+'arget:\x20')+_0x2a6a23['name']+'\x20'+_0xe461a2,_0x2a6a23);}['loseContex'+'t'](){this['_glFrameBu'+'ffer']=null,this['_glDepthBu'+'ffer']=null,this['_glResolve'+'FrameBuffe'+'r']=null,this['_glMsaaCol'+'orBuffers']['length']=0x66f+-0x1*0x1ec5+0xa*0x26f,this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']=void(0x11fb*0x1+0x1*0xb3+-0x12ae),this['colorMrtFr'+'amebuffers']=null,this['suppliedCo'+'lorFramebu'+'ffer']=void(0x2*0x161+-0x18a*-0xe+-0x184e),this['_isInitial'+'ized']=!(0x1b21+0x839*0x4+0x5c*-0xa7);}['internalRe'+'solve'](_0x1b4bb1,_0x2475a6,_0x20383e,_0x2e40d3,_0x450aca){w['assert'](_0x2475a6!==_0x20383e,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x1b4bb1['setScissor'](-0x4c7*-0x2+0x1*-0x365+-0x629*0x1,0x1a*0xec+-0xa1*-0x2b+-0x3303,_0x2e40d3['width'],_0x2e40d3['height']);const _0x427127=_0x1b4bb1['gl'];_0x427127['bindFrameb'+'uffer'](_0x427127['READ_FRAME'+'BUFFER'],_0x2475a6),_0x427127['bindFrameb'+'uffer'](_0x427127['DRAW_FRAME'+'BUFFER'],_0x20383e),_0x427127['blitFrameb'+'uffer'](0x21f*-0x11+0x139*0x16+-0x23*-0x43,-0x58+-0x72*0x19+0xe2*0xd,_0x2e40d3['width'],_0x2e40d3['height'],0x2549+-0xb*0x83+0x1fa8*-0x1,0x1b57+0x1*0x1193+-0x1*0x2cea,_0x2e40d3['width'],_0x2e40d3['height'],_0x450aca,_0x427127['NEAREST']);}['resolve'](_0x4d989e,_0x5f3c9c,_0x2c5ef1,_0x3e14df){const _0x1e96d9=_0x4d989e['gl'];if(this['colorMrtFr'+'amebuffers']){if(_0x2c5ef1)for(let _0x30577d=0x29c+0x261e+-0x28ba;_0x30577d<this['colorMrtFr'+'amebuffers']['length'];_0x30577d++){const _0x267efd=this['colorMrtFr'+'amebuffers'][_0x30577d];Q['pushGpuMar'+'ker'](_0x4d989e,'RESOLVE-MR'+'T'+_0x30577d),this['internalRe'+'solve'](_0x4d989e,_0x267efd['msaaFB'],_0x267efd['resolveFB'],_0x5f3c9c,_0x1e96d9['COLOR_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x4d989e);}_0x3e14df&&(Q['pushGpuMar'+'ker'](_0x4d989e,'RESOLVE-MR'+'T-DEPTH'),this['internalRe'+'solve'](_0x4d989e,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x5f3c9c,_0x1e96d9['DEPTH_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x4d989e));}else Q['pushGpuMar'+'ker'](_0x4d989e,'RESOLVE'),this['internalRe'+'solve'](_0x4d989e,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x5f3c9c,(_0x2c5ef1?_0x1e96d9['COLOR_BUFF'+'ER_BIT']:0x4c*-0x22+0x10*-0x8a+0x12b8)|(_0x3e14df?_0x1e96d9['DEPTH_BUFF'+'ER_BIT']:0x122f+-0x8*0x8a+0x35*-0x43)),Q['popGpuMark'+'er'](_0x4d989e);_0x1e96d9['bindFrameb'+'uffer'](_0x1e96d9['FRAMEBUFFE'+'R'],this['_glFrameBu'+'ffer']);}}class xT{constructor(){h(this,'renderVers'+'ion'),h(this,'queries',[]);}['destroy'](_0x35963b){this['queries']['forEach'](_0x3c379d=>_0x35963b['deleteQuer'+'y'](_0x3c379d)),this['queries']=null;}}class TT extends cT{constructor(_0x51097e){super(),h(this,'device'),h(this,'freeQuerie'+'s',[]),h(this,'frameQueri'+'es',[]),h(this,'previousFr'+'ameQueries',[]),h(this,'timings',[]),(this['device']=_0x51097e,this['ext']=_0x51097e['extDisjoin'+'tTimerQuer'+'y']);}['destroy'](){this['freeQuerie'+'s']['forEach'](_0x432fde=>this['device']['gl']['deleteQuer'+'y'](_0x432fde)),this['frameQueri'+'es']['forEach'](_0x3951bf=>this['device']['gl']['deleteQuer'+'y'](_0x3951bf)),this['previousFr'+'ameQueries']['forEach'](_0x35a0d8=>_0x35a0d8['destroy'](this['device']['gl'])),this['freeQuerie'+'s']=null,this['frameQueri'+'es']=null,this['previousFr'+'ameQueries']=null;}['loseContex'+'t'](){super['loseContex'+'t'](),this['freeQuerie'+'s']=[],this['frameQueri'+'es']=[],this['previousFr'+'ameQueries']=[];}['restoreCon'+'text'](){this['ext']=this['device']['extDisjoin'+'tTimerQuer'+'y'];}['getQuery'](){return this['freeQuerie'+'s']['pop']()??this['device']['gl']['createQuer'+'y']();}['start'](_0x1d00fc){if(this['ext']){const _0x54c692=this['getSlot'](_0x1d00fc),_0x1d15a8=this['getQuery']();return this['frameQueri'+'es'][_0x54c692]=_0x1d15a8,this['device']['gl']['beginQuery'](this['ext']['TIME_ELAPS'+'ED_EXT'],_0x1d15a8),_0x54c692;}}['end'](_0x2f9b92){_0x2f9b92!==void(-0x249a*0x1+0x546+-0x2*-0xfaa)&&this['device']['gl']['endQuery'](this['ext']['TIME_ELAPS'+'ED_EXT']);}['frameStart'](){this['processEna'+'bleRequest'](),this['_enabled']&&(this['frameGPUMa'+'rkerSlot']=this['start']('GpuFrame'));}['frameEnd'](){this['_enabled']&&this['end'](this['frameGPUMa'+'rkerSlot']);}['request'](){if(this['_enabled']){const _0x125898=this['ext'],_0x50d3e3=this['device']['gl'],_0x530e82=this['device']['renderVers'+'ion'],_0x368c10=this['frameQueri'+'es'];if(_0x368c10['length']>-0x92f+-0x556*-0x5+-0x117f){this['frameQueri'+'es']=[];const _0xc93a85=new xT();_0xc93a85['queries']=_0x368c10,_0xc93a85['renderVers'+'ion']=_0x530e82,this['previousFr'+'ameQueries']['push'](_0xc93a85);}if(this['previousFr'+'ameQueries']['length']>0x1*0x21d3+-0x159d+0x2*-0x61b){const _0x4a7897=this['previousFr'+'ameQueries'][0xb1*-0xf+-0x4ed*-0x1+-0x1*-0x572],_0x2c4fd0=_0x4a7897['queries'],_0xa40deb=_0x2c4fd0[_0x2c4fd0['length']-(0xb01+-0x1eb9+0x231*0x9)],_0x2e9a0e=_0x50d3e3['getQueryPa'+'rameter'](_0xa40deb,_0x50d3e3['QUERY_RESU'+'LT_AVAILAB'+'LE']),_0x4b0a13=_0x50d3e3['getParamet'+'er'](_0x125898['GPU_DISJOI'+'NT_EXT']);if(_0x2e9a0e&&!_0x4b0a13){this['previousFr'+'ameQueries']['shift']();const _0x5aa143=this['timings'];_0x5aa143['length']=-0x9*0xdd+0x2a9+-0x51c*-0x1;for(let _0x58dbb9=0x1f4d+-0xcee+-0x1*0x125f;_0x58dbb9<_0x2c4fd0['length'];_0x58dbb9++){const _0x27a4dd=_0x2c4fd0[_0x58dbb9],_0x213a98=_0x50d3e3['getQueryPa'+'rameter'](_0x27a4dd,_0x50d3e3['QUERY_RESU'+'LT']);_0x5aa143[_0x58dbb9]=_0x213a98*(-0x306*-0x3+0x1d01+-0x2613+0.000001),this['freeQuerie'+'s']['push'](_0x27a4dd);}this['report'](_0x4a7897['renderVers'+'ion'],_0x5aa143);}_0x4b0a13&&(this['previousFr'+'ameQueries']['forEach'](_0x5236ea=>{this['report'](_0x5236ea['renderVers'+'ion'],null),_0x5236ea['destroy'](_0x50d3e3);}),this['previousFr'+'ameQueries']['length']=-0x55b*0x3+-0x1*-0x1037+-0x2*0x13);}super['request'](_0x530e82);}}}const ba=[];class wT extends $e{constructor(_0x58b6ec,_0x55c3f7={}){super(_0x58b6ec,_0x55c3f7),h(this,'gl'),h(this,'_defaultFr'+'amebuffer',null),h(this,'_defaultFr'+'amebufferC'+'hanged',!(0x1*0xacf+-0x3bf*0x3+0x6f)),(_0x55c3f7=this['initOption'+'s'],this['updateClie'+'ntRect'](),this['initTextur'+'eUnits'](),this['contextLos'+'t']=!(-0x143c+-0x1*0xdb1+0x21ee),this['_contextLo'+'stHandler']=_0x5346ed=>{_0x5346ed['preventDef'+'ault'](),this['loseContex'+'t'](),w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20lost.'),this['fire']('devicelost');},this['_contextRe'+'storedHand'+'ler']=()=>{w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20restore'+'d.'),this['restoreCon'+'text'](),this['fire']('devicerest'+'ored');});const _0x25d073=typeof navigator<'u'&&navigator['userAgent'];if(this['forceDisab'+'leMultisam'+'pling']=_0x25d073&&_0x25d073['includes']('AppleWebKi'+'t')&&(_0x25d073['includes']('15.4')||_0x25d073['includes']('15_4')),this['forceDisab'+'leMultisam'+'pling']&&(_0x55c3f7['antialias']=!(0x3*-0xcf+-0x47*-0x53+0x1*-0x1497),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'AppleWebKi'+'t\x2015.4')),Me['browserNam'+'e']==='firefox'){const _0x555346=(typeof navigator<'u'?navigator['userAgent']:'')['match'](/Firefox\/(\d+(\.\d+)*)/),_0x2eabaa=_0x555346?_0x555346[0x22*-0x4+0x1f3*-0x13+0x2592]:null;if(_0x2eabaa){const _0x4d7cf0=parseFloat(_0x2eabaa);(Me['name']==='windows'&&(_0x4d7cf0>=0x551+0xd5a+-0x3*0x611||_0x4d7cf0===-0x1675*-0x1+-0xee4+-0x71e)||Me['name']==='android'&&_0x4d7cf0>=0x8d*-0x22+0x22a7+-0x107*0xf)&&(_0x55c3f7['antialias']=!(0x722*0x1+-0x3ba+-0x367),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'Firefox\x20'+Me['name']+('\x20platform\x20'+'version\x20')+_0x2eabaa));}}this['backBuffer'+'Antialias']=_0x55c3f7['antialias']??!(0x7*-0x244+-0x14d*0x7+0x18f8),_0x55c3f7['antialias']=!(0x3*0xa51+0xd*-0x270+0x2*0x5f);const _0x510ae4=_0x55c3f7['gl']??_0x58b6ec['getContext']('webgl2',_0x55c3f7);if(!_0x510ae4)throw new Error('WebGL\x20not\x20'+'supported');this['gl']=_0x510ae4,this['isWebGL2']=!(-0x31*-0xc5+0x1d51+-0x4306),this['_deviceTyp'+'e']=wx,this['updateBack'+'bufferForm'+'at'](null);const _0x36cc8d=Me['browserNam'+'e']==='chrome',_0x55f289=Me['browserNam'+'e']==='safari',_0x169678=Me['browser']&&navigator['appVersion']['indexOf']('Mac')!==-(0x2*0x11c5+0x3e*0x31+-0x329*0xf);this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']=_0x55f289,this['_tempMacCh'+'romeBlitFr'+'amebufferW'+'orkaround']=_0x169678&&_0x36cc8d&&!_0x55c3f7['alpha'],_0x58b6ec['addEventLi'+'stener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(0x9d9+0xf6d+0x1*-0x1945)),_0x58b6ec['addEventLi'+'stener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x392*0x1+-0x235d+0x1*0x1fcc)),this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes'](),this['createBack'+'buffer'](null),this['supportsIm'+'ageBitmap']=!_0x55f289&&typeof ImageBitmap<'u',this['_samplerTy'+'pes']=new Set([_0x510ae4['SAMPLER_2D'],_0x510ae4['SAMPLER_CU'+'BE'],_0x510ae4['UNSIGNED_I'+'NT_SAMPLER'+'_2D'],_0x510ae4['INT_SAMPLE'+'R_2D'],_0x510ae4['SAMPLER_2D'+'_SHADOW'],_0x510ae4['SAMPLER_CU'+'BE_SHADOW'],_0x510ae4['SAMPLER_3D'],_0x510ae4['INT_SAMPLE'+'R_3D'],_0x510ae4['UNSIGNED_I'+'NT_SAMPLER'+'_3D'],_0x510ae4['SAMPLER_2D'+'_ARRAY'],_0x510ae4['INT_SAMPLE'+'R_2D_ARRAY'],_0x510ae4['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]),this['glAddress']=[_0x510ae4['REPEAT'],_0x510ae4['CLAMP_TO_E'+'DGE'],_0x510ae4['MIRRORED_R'+'EPEAT']],this['glBlendEqu'+'ation']=[_0x510ae4['FUNC_ADD'],_0x510ae4['FUNC_SUBTR'+'ACT'],_0x510ae4['FUNC_REVER'+'SE_SUBTRAC'+'T'],_0x510ae4['MIN'],_0x510ae4['MAX']],this['glBlendFun'+'ctionColor']=[_0x510ae4['ZERO'],_0x510ae4['ONE'],_0x510ae4['SRC_COLOR'],_0x510ae4['ONE_MINUS_'+'SRC_COLOR'],_0x510ae4['DST_COLOR'],_0x510ae4['ONE_MINUS_'+'DST_COLOR'],_0x510ae4['SRC_ALPHA'],_0x510ae4['SRC_ALPHA_'+'SATURATE'],_0x510ae4['ONE_MINUS_'+'SRC_ALPHA'],_0x510ae4['DST_ALPHA'],_0x510ae4['ONE_MINUS_'+'DST_ALPHA'],_0x510ae4['CONSTANT_C'+'OLOR'],_0x510ae4['ONE_MINUS_'+'CONSTANT_C'+'OLOR']],this['glBlendFun'+'ctionAlpha']=[_0x510ae4['ZERO'],_0x510ae4['ONE'],_0x510ae4['SRC_COLOR'],_0x510ae4['ONE_MINUS_'+'SRC_COLOR'],_0x510ae4['DST_COLOR'],_0x510ae4['ONE_MINUS_'+'DST_COLOR'],_0x510ae4['SRC_ALPHA'],_0x510ae4['SRC_ALPHA_'+'SATURATE'],_0x510ae4['ONE_MINUS_'+'SRC_ALPHA'],_0x510ae4['DST_ALPHA'],_0x510ae4['ONE_MINUS_'+'DST_ALPHA'],_0x510ae4['CONSTANT_A'+'LPHA'],_0x510ae4['ONE_MINUS_'+'CONSTANT_A'+'LPHA']],this['glComparis'+'on']=[_0x510ae4['NEVER'],_0x510ae4['LESS'],_0x510ae4['EQUAL'],_0x510ae4['LEQUAL'],_0x510ae4['GREATER'],_0x510ae4['NOTEQUAL'],_0x510ae4['GEQUAL'],_0x510ae4['ALWAYS']],this['glStencilO'+'p']=[_0x510ae4['KEEP'],_0x510ae4['ZERO'],_0x510ae4['REPLACE'],_0x510ae4['INCR'],_0x510ae4['INCR_WRAP'],_0x510ae4['DECR'],_0x510ae4['DECR_WRAP'],_0x510ae4['INVERT']],this['glClearFla'+'g']=[0x10*-0x249+-0x1373+-0xd*-0x44f,_0x510ae4['COLOR_BUFF'+'ER_BIT'],_0x510ae4['DEPTH_BUFF'+'ER_BIT'],_0x510ae4['COLOR_BUFF'+'ER_BIT']|_0x510ae4['DEPTH_BUFF'+'ER_BIT'],_0x510ae4['STENCIL_BU'+'FFER_BIT'],_0x510ae4['STENCIL_BU'+'FFER_BIT']|_0x510ae4['COLOR_BUFF'+'ER_BIT'],_0x510ae4['STENCIL_BU'+'FFER_BIT']|_0x510ae4['DEPTH_BUFF'+'ER_BIT'],_0x510ae4['STENCIL_BU'+'FFER_BIT']|_0x510ae4['COLOR_BUFF'+'ER_BIT']|_0x510ae4['DEPTH_BUFF'+'ER_BIT']],this['glCull']=[-0xa4+-0x6f*-0x31+-0x149b,_0x510ae4['BACK'],_0x510ae4['FRONT'],_0x510ae4['FRONT_AND_'+'BACK']],this['glFilter']=[_0x510ae4['NEAREST'],_0x510ae4['LINEAR'],_0x510ae4['NEAREST_MI'+'PMAP_NEARE'+'ST'],_0x510ae4['NEAREST_MI'+'PMAP_LINEA'+'R'],_0x510ae4['LINEAR_MIP'+'MAP_NEARES'+'T'],_0x510ae4['LINEAR_MIP'+'MAP_LINEAR']],this['glPrimitiv'+'e']=[_0x510ae4['POINTS'],_0x510ae4['LINES'],_0x510ae4['LINE_LOOP'],_0x510ae4['LINE_STRIP'],_0x510ae4['TRIANGLES'],_0x510ae4['TRIANGLE_S'+'TRIP'],_0x510ae4['TRIANGLE_F'+'AN']],this['glType']=[_0x510ae4['BYTE'],_0x510ae4['UNSIGNED_B'+'YTE'],_0x510ae4['SHORT'],_0x510ae4['UNSIGNED_S'+'HORT'],_0x510ae4['INT'],_0x510ae4['UNSIGNED_I'+'NT'],_0x510ae4['FLOAT'],_0x510ae4['HALF_FLOAT']],this['pcUniformT'+'ype']={},this['pcUniformT'+'ype'][_0x510ae4['BOOL']]=mn,this['pcUniformT'+'ype'][_0x510ae4['INT']]=da,this['pcUniformT'+'ype'][_0x510ae4['FLOAT']]=$s,this['pcUniformT'+'ype'][_0x510ae4['FLOAT_VEC2']]=fa,this['pcUniformT'+'ype'][_0x510ae4['FLOAT_VEC3']]=ds,this['pcUniformT'+'ype'][_0x510ae4['FLOAT_VEC4']]=An,this['pcUniformT'+'ype'][_0x510ae4['INT_VEC2']]=ra,this['pcUniformT'+'ype'][_0x510ae4['INT_VEC3']]=aa,this['pcUniformT'+'ype'][_0x510ae4['INT_VEC4']]=na,this['pcUniformT'+'ype'][_0x510ae4['BOOL_VEC2']]=Go,this['pcUniformT'+'ype'][_0x510ae4['BOOL_VEC3']]=Ho,this['pcUniformT'+'ype'][_0x510ae4['BOOL_VEC4']]=Wo,this['pcUniformT'+'ype'][_0x510ae4['FLOAT_MAT2']]=jc,this['pcUniformT'+'ype'][_0x510ae4['FLOAT_MAT3']]=Cn,this['pcUniformT'+'ype'][_0x510ae4['FLOAT_MAT4']]=li,this['pcUniformT'+'ype'][_0x510ae4['SAMPLER_2D']]=ox,this['pcUniformT'+'ype'][_0x510ae4['SAMPLER_CU'+'BE']]=lx,this['pcUniformT'+'ype'][_0x510ae4['UNSIGNED_I'+'NT']]=Pn,this['pcUniformT'+'ype'][_0x510ae4['UNSIGNED_I'+'NT_VEC2']]=Mn,this['pcUniformT'+'ype'][_0x510ae4['UNSIGNED_I'+'NT_VEC3']]=Dn,this['pcUniformT'+'ype'][_0x510ae4['UNSIGNED_I'+'NT_VEC4']]=In,this['pcUniformT'+'ype'][_0x510ae4['SAMPLER_2D'+'_SHADOW']]=cx,this['pcUniformT'+'ype'][_0x510ae4['SAMPLER_CU'+'BE_SHADOW']]=hx,this['pcUniformT'+'ype'][_0x510ae4['SAMPLER_2D'+'_ARRAY']]=fx,this['pcUniformT'+'ype'][_0x510ae4['SAMPLER_3D']]=dx,this['pcUniformT'+'ype'][_0x510ae4['INT_SAMPLE'+'R_2D']]=ux,this['pcUniformT'+'ype'][_0x510ae4['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=px,this['pcUniformT'+'ype'][_0x510ae4['INT_SAMPLE'+'R_CUBE']]=mx,this['pcUniformT'+'ype'][_0x510ae4['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=_x,this['pcUniformT'+'ype'][_0x510ae4['INT_SAMPLE'+'R_3D']]=gx,this['pcUniformT'+'ype'][_0x510ae4['UNSIGNED_I'+'NT_SAMPLER'+'_3D']]=Sx,this['pcUniformT'+'ype'][_0x510ae4['INT_SAMPLE'+'R_2D_ARRAY']]=yx,this['pcUniformT'+'ype'][_0x510ae4['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]=vx,this['targetToSl'+'ot']={},this['targetToSl'+'ot'][_0x510ae4['TEXTURE_2D']]=-0x2e4+-0x13af+0x1693,this['targetToSl'+'ot'][_0x510ae4['TEXTURE_CU'+'BE_MAP']]=-0x1*-0x727+-0x1*-0xb3f+-0x1265,this['targetToSl'+'ot'][_0x510ae4['TEXTURE_3D']]=-0x13eb+-0x29*0x35+-0x2*-0xe35;let _0x36717c,_0xbaf0f5,_0x3ad9eb,_0x566645,_0x508570;this['commitFunc'+'tion']=[],this['commitFunc'+'tion'][mn]=function(_0x17615c,_0x4ab1b5){_0x17615c['value']!==_0x4ab1b5&&(_0x510ae4['uniform1i'](_0x17615c['locationId'],_0x4ab1b5),_0x17615c['value']=_0x4ab1b5);},this['commitFunc'+'tion'][da]=this['commitFunc'+'tion'][mn],this['commitFunc'+'tion'][$s]=function(_0x188da0,_0x5f223b){_0x188da0['value']!==_0x5f223b&&(_0x510ae4['uniform1f'](_0x188da0['locationId'],_0x5f223b),_0x188da0['value']=_0x5f223b);},this['commitFunc'+'tion'][fa]=function(_0x444f52,_0x5ddce0){_0x508570=_0x444f52['value'],_0x36717c=_0x5ddce0[-0x4*-0x106+-0x23a5+-0x1*-0x1f8d],_0xbaf0f5=_0x5ddce0[-0x11b*0xb+0xde6+-0xde*0x2],(_0x508570[0x133*-0x17+-0x19cb+0x3560]!==_0x36717c||_0x508570[0x3d*-0x93+-0x2b3*0xb+-0x9*-0x731]!==_0xbaf0f5)&&(_0x510ae4['uniform2fv'](_0x444f52['locationId'],_0x5ddce0),_0x508570[-0x2*0x3c7+0xc4d*-0x2+0x2028]=_0x36717c,_0x508570[0x1f*-0x30+0x58f+-0x6*-0xb]=_0xbaf0f5);},this['commitFunc'+'tion'][ds]=function(_0x2b955a,_0x59db8d){_0x508570=_0x2b955a['value'],_0x36717c=_0x59db8d[0x898+-0x7a5+-0xf3*0x1],_0xbaf0f5=_0x59db8d[0x79*0x45+-0x1de3+-0x2b9],_0x3ad9eb=_0x59db8d[0x20c5*-0x1+0x1f16+0x1*0x1b1],(_0x508570[0x23df*0x1+0x43*0xb+-0x26c0]!==_0x36717c||_0x508570[-0x189e+0x2ef*0x2+0x12c1]!==_0xbaf0f5||_0x508570[-0x24fb*-0x1+-0x1f1d*-0x1+-0x4416]!==_0x3ad9eb)&&(_0x510ae4['uniform3fv'](_0x2b955a['locationId'],_0x59db8d),_0x508570[0x24e+0x6ea+-0x24e*0x4]=_0x36717c,_0x508570[-0x131d+-0x33*0x2f+0x1c7b]=_0xbaf0f5,_0x508570[-0x11e2*0x1+-0x4f9+-0x79f*-0x3]=_0x3ad9eb);},this['commitFunc'+'tion'][An]=function(_0x3e0c62,_0x885d7c){_0x508570=_0x3e0c62['value'],_0x36717c=_0x885d7c[0x4d5+0xcc3*0x3+-0x1*0x2b1e],_0xbaf0f5=_0x885d7c[-0x1*-0x193b+-0xedb*0x2+0x4*0x11f],_0x3ad9eb=_0x885d7c[0x267d+0x1*-0x13ad+-0x12ce],_0x566645=_0x885d7c[-0x9*0x313+0x1*0x1fb7+-0x1*0x409],(_0x508570[-0x94b+0x555+0x3f6]!==_0x36717c||_0x508570[0x173c*-0x1+-0x7c7+-0xf82*-0x2]!==_0xbaf0f5||_0x508570[-0x180+0x1*0x16f4+0x5a*-0x3d]!==_0x3ad9eb||_0x508570[-0x866+-0x1645*-0x1+0x1*-0xddc]!==_0x566645)&&(_0x510ae4['uniform4fv'](_0x3e0c62['locationId'],_0x885d7c),_0x508570[-0xbb1+0x1*0x2573+0x1d7*-0xe]=_0x36717c,_0x508570[-0x1902+0x662+-0x12a1*-0x1]=_0xbaf0f5,_0x508570[-0x452*-0x1+-0x108+0x2a*-0x14]=_0x3ad9eb,_0x508570[0x143+0x9e*0x1c+-0x1288]=_0x566645);},this['commitFunc'+'tion'][ra]=function(_0x8619f,_0x3dca33){_0x508570=_0x8619f['value'],_0x36717c=_0x3dca33[0x7f8+-0x1e78+-0xa*-0x240],_0xbaf0f5=_0x3dca33[-0x18e+0x6b*-0x1e+0xe19],(_0x508570[0x3*0x7cd+-0xffd+-0x1a*0x49]!==_0x36717c||_0x508570[-0x2449+-0x662*0x5+0x5a*0xc2]!==_0xbaf0f5)&&(_0x510ae4['uniform2iv'](_0x8619f['locationId'],_0x3dca33),_0x508570[0xa18+0x2fd*-0xa+0x12a*0x11]=_0x36717c,_0x508570[-0x99e+-0xa2d+0x13cc]=_0xbaf0f5);},this['commitFunc'+'tion'][Go]=this['commitFunc'+'tion'][ra],this['commitFunc'+'tion'][aa]=function(_0x401fc7,_0xc9ac1a){_0x508570=_0x401fc7['value'],_0x36717c=_0xc9ac1a[0x1477+-0x3e5+0x12f*-0xe],_0xbaf0f5=_0xc9ac1a[0x18b8+0x1cff+-0xabe*0x5],_0x3ad9eb=_0xc9ac1a[0x1d8c+-0x1030+-0x2*0x6ad],(_0x508570[0x6a3*-0x1+0x1*0x145a+-0xdb7]!==_0x36717c||_0x508570[-0x1*0xf7e+-0x1*-0xfa3+-0x3*0xc]!==_0xbaf0f5||_0x508570[-0x1d*-0x71+0x6f*0x5a+-0x33d1]!==_0x3ad9eb)&&(_0x510ae4['uniform3iv'](_0x401fc7['locationId'],_0xc9ac1a),_0x508570[-0x1cdb+-0x3*-0x10c+0xe3*0x1d]=_0x36717c,_0x508570[-0x17a7+0x1*0xf51+0x857*0x1]=_0xbaf0f5,_0x508570[0x177d+0x1b*0x6+-0x181d]=_0x3ad9eb);},this['commitFunc'+'tion'][Ho]=this['commitFunc'+'tion'][aa],this['commitFunc'+'tion'][na]=function(_0x237be4,_0x209d9f){_0x508570=_0x237be4['value'],_0x36717c=_0x209d9f[0xad6*0x2+0xb6b+-0x2117],_0xbaf0f5=_0x209d9f[0x1a53+0x5*-0x2f+0x1967*-0x1],_0x3ad9eb=_0x209d9f[-0xec*0x29+0x4a1+0x212d],_0x566645=_0x209d9f[0x1*0x1fee+0x22cf+-0x42ba],(_0x508570[0x36*-0x79+0xb72+0xe14]!==_0x36717c||_0x508570[0x210f+-0xfd*-0x22+-0x42a8]!==_0xbaf0f5||_0x508570[-0x1330+0xbe0+0x752]!==_0x3ad9eb||_0x508570[0x449*-0x7+-0x1*0x89b+0x269d]!==_0x566645)&&(_0x510ae4['uniform4iv'](_0x237be4['locationId'],_0x209d9f),_0x508570[0x43*-0x34+-0xafd+-0x833*-0x3]=_0x36717c,_0x508570[0xa57+-0x1783+-0x1*-0xd2d]=_0xbaf0f5,_0x508570[0xcff+-0x23c9+0x16cc]=_0x3ad9eb,_0x508570[-0x92c*-0x4+0x3*0x8a2+-0x3e93]=_0x566645);},this['commitFunc'+'tion'][Wo]=this['commitFunc'+'tion'][na],this['commitFunc'+'tion'][jc]=function(_0x274784,_0x3842e0){_0x510ae4['uniformMat'+'rix2fv'](_0x274784['locationId'],!(-0x7de+0x2382+-0x1ba3),_0x3842e0);},this['commitFunc'+'tion'][Cn]=function(_0x4611c0,_0x12e981){_0x510ae4['uniformMat'+'rix3fv'](_0x4611c0['locationId'],!(0x290*0xd+-0x1490+0xfb*-0xd),_0x12e981);},this['commitFunc'+'tion'][li]=function(_0x233b79,_0x58c60e){_0x510ae4['uniformMat'+'rix4fv'](_0x233b79['locationId'],!(0x7ca*-0x2+-0x1512+0x24a7),_0x58c60e);},this['commitFunc'+'tion'][$h]=function(_0x476625,_0x229e7b){_0x510ae4['uniform1fv'](_0x476625['locationId'],_0x229e7b);},this['commitFunc'+'tion'][Xh]=function(_0x3f1f4f,_0x24c684){_0x510ae4['uniform2fv'](_0x3f1f4f['locationId'],_0x24c684);},this['commitFunc'+'tion'][qh]=function(_0x1af96f,_0x102bd1){_0x510ae4['uniform3fv'](_0x1af96f['locationId'],_0x102bd1);},this['commitFunc'+'tion'][ap]=function(_0x1309f4,_0x16dc7b){_0x510ae4['uniform4fv'](_0x1309f4['locationId'],_0x16dc7b);},this['commitFunc'+'tion'][Pn]=function(_0x3335ff,_0x520240){_0x3335ff['value']!==_0x520240&&(_0x510ae4['uniform1ui'](_0x3335ff['locationId'],_0x520240),_0x3335ff['value']=_0x520240);},this['commitFunc'+'tion'][Mn]=function(_0x22ba4a,_0x42c400){_0x508570=_0x22ba4a['value'],_0x36717c=_0x42c400[0x1567*-0x1+0x133d+0x1*0x22a],_0xbaf0f5=_0x42c400[-0xdf3+-0x32*-0x7f+-0xada],(_0x508570[0x3*0x2e1+0xc*-0x14e+0x705]!==_0x36717c||_0x508570[-0x1908+-0x1*0x5d6+0x1edf*0x1]!==_0xbaf0f5)&&(_0x510ae4['uniform2ui'+'v'](_0x22ba4a['locationId'],_0x42c400),_0x508570[-0xd4*0x2f+-0xfe*0x1b+-0x1*-0x41b6]=_0x36717c,_0x508570[0x3d*0x7c+0x2*0xe5d+-0x3a45]=_0xbaf0f5);},this['commitFunc'+'tion'][Dn]=function(_0x511a74,_0x5083d7){_0x508570=_0x511a74['value'],_0x36717c=_0x5083d7[0x740+-0x253*-0x1+-0x993],_0xbaf0f5=_0x5083d7[0x1*0xcaa+0x2b*0x83+-0x3*0xb8e],_0x3ad9eb=_0x5083d7[0x4fa+0x1*-0xabb+0x1*0x5c3],(_0x508570[0xc5d+0x2613+-0x3270]!==_0x36717c||_0x508570[0x5*-0x41b+-0x1e09+0x3291]!==_0xbaf0f5||_0x508570[-0x164a+-0x1221+-0x83*-0x4f]!==_0x3ad9eb)&&(_0x510ae4['uniform3ui'+'v'](_0x511a74['locationId'],_0x5083d7),_0x508570[-0x15b3+-0x122f*0x2+0x3a11]=_0x36717c,_0x508570[0x2f9*-0xd+-0x14c1+0x3b67]=_0xbaf0f5,_0x508570[-0x1de*-0x1+0x50+-0x22c]=_0x3ad9eb);},this['commitFunc'+'tion'][In]=function(_0x1a0396,_0x37c2bd){_0x508570=_0x1a0396['value'],_0x36717c=_0x37c2bd[-0x4*0x1e1+0x1d78+-0x15f4],_0xbaf0f5=_0x37c2bd[0x18a4*0x1+-0x19bc+0x119],_0x3ad9eb=_0x37c2bd[-0x62*0x11+0x80*-0x41+0x2704],_0x566645=_0x37c2bd[0x1019+-0x3*0xb93+0x12a3],(_0x508570[-0x26c1+-0x2dd*-0xa+0xa1f]!==_0x36717c||_0x508570[0x539+0x978*-0x4+-0x28*-0xd1]!==_0xbaf0f5||_0x508570[0x18d*0x16+0x26*-0x56+-0x1558]!==_0x3ad9eb||_0x508570[-0x24*-0x3+0x2657+0x1360*-0x2]!==_0x566645)&&(_0x510ae4['uniform4ui'+'v'](_0x1a0396['locationId'],_0x37c2bd),_0x508570[0x1*-0xa22+0x316+-0xa4*-0xb]=_0x36717c,_0x508570[-0x59*-0x35+-0x10b2+-0x2*0xdd]=_0xbaf0f5,_0x508570[0x1cb0+-0xfe+-0x1bb0]=_0x3ad9eb,_0x508570[-0x99a+0x1*-0x1756+0x20f3*0x1]=_0x566645);},this['commitFunc'+'tion'][Ln]=function(_0xdf5b1a,_0x3e6264){_0x510ae4['uniform1iv'](_0xdf5b1a['locationId'],_0x3e6264);},this['commitFunc'+'tion'][jh]=function(_0x334a49,_0x996fec){_0x510ae4['uniform1ui'+'v'](_0x334a49['locationId'],_0x996fec);},this['commitFunc'+'tion'][Yh]=this['commitFunc'+'tion'][Ln],this['commitFunc'+'tion'][Rn]=function(_0x27860f,_0x3a9b4a){_0x510ae4['uniform2iv'](_0x27860f['locationId'],_0x3a9b4a);},this['commitFunc'+'tion'][Kh]=function(_0x239386,_0x3f8f6){_0x510ae4['uniform2ui'+'v'](_0x239386['locationId'],_0x3f8f6);},this['commitFunc'+'tion'][Zh]=this['commitFunc'+'tion'][Rn],this['commitFunc'+'tion'][On]=function(_0xee6c38,_0x2c8104){_0x510ae4['uniform3iv'](_0xee6c38['locationId'],_0x2c8104);},this['commitFunc'+'tion'][Qh]=function(_0x1cd210,_0x5d6833){_0x510ae4['uniform3ui'+'v'](_0x1cd210['locationId'],_0x5d6833);},this['commitFunc'+'tion'][Jh]=this['commitFunc'+'tion'][On],this['commitFunc'+'tion'][Yc]=function(_0x333110,_0x29eafe){_0x510ae4['uniform4iv'](_0x333110['locationId'],_0x29eafe);},this['commitFunc'+'tion'][np]=function(_0x260fda,_0x4ce216){_0x510ae4['uniform4ui'+'v'](_0x260fda['locationId'],_0x4ce216);},this['commitFunc'+'tion'][op]=this['commitFunc'+'tion'][Yc],this['commitFunc'+'tion'][VS]=function(_0xd2731a,_0x1cce2e){_0x510ae4['uniformMat'+'rix4fv'](_0xd2731a['locationId'],!(0x155f+-0x15fa+0x9c),_0x1cce2e);},this['constantTe'+'xSource']=this['scope']['resolve']('source'),this['postInit']();}['postInit'](){super['postInit'](),this['gpuProfile'+'r']=new TT(this);}['destroy'](){super['destroy']();const _0x2b46a2=this['gl'];this['feedback']&&_0x2b46a2['deleteTran'+'sformFeedb'+'ack'](this['feedback']),this['clearVerte'+'xArrayObje'+'ctCache'](),this['canvas']['removeEven'+'tListener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(0x3*0x65f+0xae9+-0x1e05)),this['canvas']['removeEven'+'tListener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(-0x2*-0xc0a+0x469+-0x1c7c)),this['_contextLo'+'stHandler']=null,this['_contextRe'+'storedHand'+'ler']=null,this['gl']=null,super['postDestro'+'y']();}['createBack'+'buffer'](_0x20f7ff){this['supportsSt'+'encil']=this['initOption'+'s']['stencil'],this['backBuffer']=new gt({'name':'WebglFrame'+'buffer','graphicsDevice':this,'depth':this['initOption'+'s']['depth'],'stencil':this['supportsSt'+'encil'],'samples':this['samples']}),this['backBuffer']['impl']['suppliedCo'+'lorFramebu'+'ffer']=_0x20f7ff;}['updateBack'+'bufferForm'+'at'](_0x4f45bb){const _0x29e432=this['gl'];_0x29e432['bindFrameb'+'uffer'](_0x29e432['FRAMEBUFFE'+'R'],_0x4f45bb);const _0x2e064a=this['gl']['getParamet'+'er'](this['gl']['ALPHA_BITS']);this['backBuffer'+'Format']=_0x2e064a?Ne:wr;}['updateBack'+'buffer'](){const _0x305b8e=this['canvas']['width']!==this['backBuffer'+'Size']['x']||this['canvas']['height']!==this['backBuffer'+'Size']['y'];(this['_defaultFr'+'amebufferC'+'hanged']||_0x305b8e)&&(this['_defaultFr'+'amebufferC'+'hanged']&&this['updateBack'+'bufferForm'+'at'](this['_defaultFr'+'amebuffer']),this['_defaultFr'+'amebufferC'+'hanged']=!(-0x26ee*-0x1+-0x6d7+-0x2016),this['backBuffer'+'Size']['set'](this['canvas']['width'],this['canvas']['height']),this['backBuffer']['destroy'](),this['createBack'+'buffer'](this['_defaultFr'+'amebuffer']));}['createVert'+'exBufferIm'+'pl'](_0xfdb000,_0x46c541){return new hT();}['createInde'+'xBufferImp'+'l'](_0x5748f8){return new dT(_0x5748f8);}['createShad'+'erImpl'](_0x35e1e3){return new gT(_0x35e1e3);}['createText'+'ureImpl'](_0x5f216c){return new ST(_0x5f216c);}['createRend'+'erTargetIm'+'pl'](_0x5d0bf1){return new vT();}['pushMarker'](_0x4716e2){if(Me['browser']&&window['spector']){const _0x3a3d6a=Q['toString']();window['spector']['setMarker'](_0x3a3d6a+'\x20#');}}['popMarker'](){if(Me['browser']&&window['spector']){const _0x3bc130=Q['toString']();_0x3bc130['length']?window['spector']['setMarker'](_0x3bc130+'\x20#'):window['spector']['clearMarke'+'r']();}}['getPrecisi'+'on'](){const _0x2e7ded=this['gl'];let _0x4b468a='highp';if(_0x2e7ded['getShaderP'+'recisionFo'+'rmat']){const _0x537a52=_0x2e7ded['getShaderP'+'recisionFo'+'rmat'](_0x2e7ded['VERTEX_SHA'+'DER'],_0x2e7ded['HIGH_FLOAT']),_0x5248c2=_0x2e7ded['getShaderP'+'recisionFo'+'rmat'](_0x2e7ded['VERTEX_SHA'+'DER'],_0x2e7ded['MEDIUM_FLO'+'AT']),_0x276d26=_0x2e7ded['getShaderP'+'recisionFo'+'rmat'](_0x2e7ded['FRAGMENT_S'+'HADER'],_0x2e7ded['HIGH_FLOAT']),_0x3ee383=_0x2e7ded['getShaderP'+'recisionFo'+'rmat'](_0x2e7ded['FRAGMENT_S'+'HADER'],_0x2e7ded['MEDIUM_FLO'+'AT']);if(_0x537a52&&_0x5248c2&&_0x276d26&&_0x3ee383){const _0x55c06a=_0x537a52['precision']>-0x740*-0x4+-0x3ec+-0x1914&&_0x276d26['precision']>0x1a92+-0x1a82+-0x1*0x10,_0x2bd4dc=_0x5248c2['precision']>0xaf7+0x1554+-0x204b&&_0x3ee383['precision']>0x1420+0x2165+-0x3585;_0x55c06a||(_0x2bd4dc?(_0x4b468a='mediump',w['warn']('WARNING:\x20h'+'ighp\x20not\x20s'+'upported,\x20'+'using\x20medi'+'ump')):(_0x4b468a='lowp',w['warn']('WARNING:\x20h'+'ighp\x20and\x20m'+'ediump\x20not'+'\x20supported'+',\x20using\x20lo'+'wp')));}}return _0x4b468a;}['getExtensi'+'on'](){for(let _0x3c8a1d=0x996+-0x26*-0x60+0x7f2*-0x3;_0x3c8a1d<arguments['length'];_0x3c8a1d++)if(this['supportedE'+'xtensions']['indexOf'](arguments[_0x3c8a1d])!==-(0x10d2+0x1936*0x1+0xcb*-0x35))return this['gl']['getExtensi'+'on'](arguments[_0x3c8a1d]);return null;}get['extDisjoin'+'tTimerQuer'+'y'](){return this['_extDisjoi'+'ntTimerQue'+'ry']||(this['_extDisjoi'+'ntTimerQue'+'ry']=this['getExtensi'+'on']('EXT_disjoi'+'nt_timer_q'+'uery_webgl'+'2','EXT_disjoi'+'nt_timer_q'+'uery')),this['_extDisjoi'+'ntTimerQue'+'ry'];}['initialize'+'Extensions'](){const _0x3272cd=this['gl'];this['supportedE'+'xtensions']=_0x3272cd['getSupport'+'edExtensio'+'ns']()??[],this['_extDisjoi'+'ntTimerQue'+'ry']=null,this['textureRG1'+'1B10Render'+'able']=!(-0x30c+0x2471+0x1*-0x2165),this['extColorBu'+'fferFloat']=this['getExtensi'+'on']('EXT_color_'+'buffer_flo'+'at'),this['textureFlo'+'atRenderab'+'le']=!!this['extColorBu'+'fferFloat'],this['extColorBu'+'fferHalfFl'+'oat']=this['getExtensi'+'on']('EXT_color_'+'buffer_hal'+'f_float'),this['textureHal'+'fFloatRend'+'erable']=!!this['extColorBu'+'fferHalfFl'+'oat']||!!this['extColorBu'+'fferFloat'],this['extDebugRe'+'ndererInfo']=this['getExtensi'+'on']('WEBGL_debu'+'g_renderer'+'_info'),this['extTexture'+'FloatLinea'+'r']=this['getExtensi'+'on']('OES_textur'+'e_float_li'+'near'),this['textureFlo'+'atFilterab'+'le']=!!this['extTexture'+'FloatLinea'+'r'],this['extFloatBl'+'end']=this['getExtensi'+'on']('EXT_float_'+'blend'),this['extTexture'+'FilterAnis'+'otropic']=this['getExtensi'+'on']('EXT_textur'+'e_filter_a'+'nisotropic','WEBKIT_EXT'+'_texture_f'+'ilter_anis'+'otropic'),this['extParalle'+'lShaderCom'+'pile']=this['getExtensi'+'on']('KHR_parall'+'el_shader_'+'compile'),this['extCompres'+'sedTexture'+'ETC1']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc1'),this['extCompres'+'sedTexture'+'ETC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc'),this['extCompres'+'sedTexture'+'PVRTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_pvrtc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_pvrtc'),this['extCompres'+'sedTexture'+'S3TC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_s3tc'),this['extCompres'+'sedTexture'+'S3TC_SRGB']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc_'+'srgb'),this['extCompres'+'sedTexture'+'ATC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_atc'),this['extCompres'+'sedTexture'+'ASTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_astc'),this['extTexture'+'Compressio'+'nBPTC']=this['getExtensi'+'on']('EXT_textur'+'e_compress'+'ion_bptc');}['initialize'+'Capabiliti'+'es'](){const _0xb3c210=this['gl'];let _0x6c7ef6;const _0x2bb98a=typeof navigator<'u'?navigator['userAgent']:'';this['maxPrecisi'+'on']=this['precision']=this['getPrecisi'+'on']();const _0x12819c=_0xb3c210['getContext'+'Attributes']();this['supportsMs'+'aa']=(_0x12819c==null?void(-0x14*0x17a+-0x1*0x38f+0x2117):_0x12819c['antialias'])??!(-0x1*0x1daa+0x809*-0x1+-0x96d*-0x4),this['supportsSt'+'encil']=(_0x12819c==null?void(-0x1713+0x9a4+0xd6f):_0x12819c['stencil'])??!(-0x1*-0x92b+0xb5*-0x32+-0x346*-0x8),this['maxTexture'+'Size']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_TEXTUR'+'E_SIZE']),this['maxCubeMap'+'Size']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_CUBE_M'+'AP_TEXTURE'+'_SIZE']),this['maxRenderB'+'ufferSize']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_RENDER'+'BUFFER_SIZ'+'E']),this['maxTexture'+'s']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_TEXTUR'+'E_IMAGE_UN'+'ITS']),this['maxCombine'+'dTextures']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_COMBIN'+'ED_TEXTURE'+'_IMAGE_UNI'+'TS']),this['maxVertexT'+'extures']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_VERTEX'+'_TEXTURE_I'+'MAGE_UNITS']),this['vertexUnif'+'ormsCount']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_VERTEX'+'_UNIFORM_V'+'ECTORS']),this['fragmentUn'+'iformsCoun'+'t']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_FRAGME'+'NT_UNIFORM'+'_VECTORS']),this['maxColorAt'+'tachments']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_COLOR_'+'ATTACHMENT'+'S']),this['maxVolumeS'+'ize']=_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_3D_TEX'+'TURE_SIZE']),_0x6c7ef6=this['extDebugRe'+'ndererInfo'],this['unmaskedRe'+'nderer']=_0x6c7ef6?_0xb3c210['getParamet'+'er'](_0x6c7ef6['UNMASKED_R'+'ENDERER_WE'+'BGL']):'',this['unmaskedVe'+'ndor']=_0x6c7ef6?_0xb3c210['getParamet'+'er'](_0x6c7ef6['UNMASKED_V'+'ENDOR_WEBG'+'L']):'';const _0x11a3a7=/\bMali-G52+/,_0x5ce8f7=/SM-[a-zA-Z0-9]+/;this['supportsGp'+'uParticles']=!(this['unmaskedVe'+'ndor']==='ARM'&&_0x2bb98a['match'](_0x5ce8f7))&&!this['unmaskedRe'+'nderer']['match'](_0x11a3a7),_0x6c7ef6=this['extTexture'+'FilterAnis'+'otropic'],this['maxAnisotr'+'opy']=_0x6c7ef6?_0xb3c210['getParamet'+'er'](_0x6c7ef6['MAX_TEXTUR'+'E_MAX_ANIS'+'OTROPY_EXT']):-0x4*-0x57a+-0x1c85+-0x69e*-0x1;const _0x515867=!this['forceDisab'+'leMultisam'+'pling'];this['maxSamples']=_0x515867?_0xb3c210['getParamet'+'er'](_0xb3c210['MAX_SAMPLE'+'S']):0x81*-0x17+-0xd3b*0x2+0x260e,this['maxSamples']=Math['min'](this['maxSamples'],-0x2101+0x11d*0x9+0x1700),this['samples']=_0x515867&&this['backBuffer'+'Antialias']?this['maxSamples']:-0x258c+0x1423+0x116a,this['supportsAr'+'eaLights']=!Me['android'],this['maxTexture'+'s']<=0x1bfc+0xc9c+-0x2c*0xec&&(this['supportsAr'+'eaLights']=!(-0x1*-0x5b4+-0x1cd+0x1f3*-0x2)),this['initCapsDe'+'fines']();}['initialize'+'RenderStat'+'e'](){super['initialize'+'RenderStat'+'e']();const _0x4c8650=this['gl'];_0x4c8650['disable'](_0x4c8650['BLEND']),_0x4c8650['blendFunc'](_0x4c8650['ONE'],_0x4c8650['ZERO']),_0x4c8650['blendEquat'+'ion'](_0x4c8650['FUNC_ADD']),_0x4c8650['colorMask'](!(0x3*0x14e+-0x2047*0x1+0x35*0x89),!(-0xe58+-0x3*0x27f+0x15d5),!(0x1bac+-0xf2f+0x1*-0xc7d),!(0x6*0x3e7+-0xba5+-0xbc5)),_0x4c8650['blendColor'](-0x2a+0x116a+-0x1140,0x2*0x475+-0xfe1*0x2+0x88*0x2b,0x22c*0x8+-0x1587+0x427,-0x18d*-0xa+0x879+0x7*-0x36d),_0x4c8650['enable'](_0x4c8650['CULL_FACE']),this['cullFace']=_0x4c8650['BACK'],_0x4c8650['cullFace'](_0x4c8650['BACK']),_0x4c8650['enable'](_0x4c8650['DEPTH_TEST']),_0x4c8650['depthFunc'](_0x4c8650['LEQUAL']),_0x4c8650['depthMask'](!(0x892+0x4*-0x976+0x1d46)),this['stencil']=!(0x2131+-0x287*-0xb+-0x3cfd*0x1),_0x4c8650['disable'](_0x4c8650['STENCIL_TE'+'ST']),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=Hi,this['stencilRef'+'Front']=this['stencilRef'+'Back']=0x1906*0x1+-0xca7+0x1*-0xc5f,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=0x1c3*-0x15+0x382*0xa+0x2ea,_0x4c8650['stencilFun'+'c'](_0x4c8650['ALWAYS'],-0x26ba*-0x1+0xa*0x2f0+-0x441a*0x1,-0x2479+-0xfcd+-0x419*-0xd),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=pn,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=pn,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=pn,this['stencilWri'+'teMaskFron'+'t']=-0x1*-0x125d+-0x3*-0x105+-0x146d,this['stencilWri'+'teMaskBack']=0x2*-0xda6+-0x1*0x1468+0x30b3,_0x4c8650['stencilOp'](_0x4c8650['KEEP'],_0x4c8650['KEEP'],_0x4c8650['KEEP']),_0x4c8650['stencilMas'+'k'](-0xead+-0x1477+0x2423),this['alphaToCov'+'erage']=!(-0x9dd+-0xa14+-0x6f*-0x2e),this['raster']=!(0x201a+-0x1475+-0xba5),_0x4c8650['disable'](_0x4c8650['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']),_0x4c8650['disable'](_0x4c8650['RASTERIZER'+'_DISCARD']),this['depthBiasE'+'nabled']=!(0x86*-0x42+0x4d7*0x1+-0x1db6*-0x1),_0x4c8650['disable'](_0x4c8650['POLYGON_OF'+'FSET_FILL']),this['clearDepth']=-0x21cb+0xfd3*0x1+0x11f9,_0x4c8650['clearDepth'](0x814+-0x426*-0x5+-0x3*0x99b),this['clearColor']=new ie(-0x1cd0+-0x6a4+0x2374,0x1ca7+0x5fe*0x3+0x207*-0x17,0x18ed+0x2f2*0x2+0x1*-0x1ed1,0x84d+0xea6+0xeb*-0x19),_0x4c8650['clearColor'](-0x650+-0x1f3*-0x11+-0x1ad3,0x23f6+-0x99e+-0x1a58,-0xb*-0x326+-0x4b5*-0x7+-0x4395,0x2123+0x2339+-0x445c),this['clearStenc'+'il']=0x2db*0x1+0xe*-0x1c2+0x15c1*0x1,_0x4c8650['clearStenc'+'il'](0x1d*-0x11f+-0xa35+0x2ab8),_0x4c8650['hint'](_0x4c8650['FRAGMENT_S'+'HADER_DERI'+'VATIVE_HIN'+'T'],_0x4c8650['NICEST']),_0x4c8650['enable'](_0x4c8650['SCISSOR_TE'+'ST']),_0x4c8650['pixelStore'+'i'](_0x4c8650['UNPACK_COL'+'ORSPACE_CO'+'NVERSION_W'+'EBGL'],_0x4c8650['NONE']),this['unpackFlip'+'Y']=!(0xb5+0x204a+-0x20fe),_0x4c8650['pixelStore'+'i'](_0x4c8650['UNPACK_FLI'+'P_Y_WEBGL'],!(-0xcd1*-0x3+0x1f9a+-0x460c)),this['unpackPrem'+'ultiplyAlp'+'ha']=!(-0x126*-0x7+-0xf1*0x15+-0x1*-0xbbc),_0x4c8650['pixelStore'+'i'](_0x4c8650['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],!(0x2469+0x3c*-0x24+-0x1bf8)),_0x4c8650['pixelStore'+'i'](_0x4c8650['UNPACK_ALI'+'GNMENT'],0x2*-0xe5d+-0x9b9*0x2+0x302d);}['initTextur'+'eUnits'](_0x14b9fa=0x3*-0x2c2+0x10*-0x67+-0x763*-0x2){this['textureUni'+'ts']=[];for(let _0x3a630d=0x1aeb+-0x1af*0x6+0x11f*-0xf;_0x3a630d<_0x14b9fa;_0x3a630d++)this['textureUni'+'ts']['push']([null,null,null]);}['initialize'+'ContextCac'+'hes'](){super['initialize'+'ContextCac'+'hes'](),this['_vaoMap']=new Map(),this['boundVao']=null,this['activeFram'+'ebuffer']=null,this['feedback']=null,this['transformF'+'eedbackBuf'+'fer']=null,this['textureUni'+'t']=0x1d0a+-0x10*-0x89+0x1*-0x259a,this['initTextur'+'eUnits'](this['maxCombine'+'dTextures']);}['loseContex'+'t'](){super['loseContex'+'t']();for(const _0x1971ff of this['shaders'])_0x1971ff['loseContex'+'t']();}['restoreCon'+'text'](){this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),super['restoreCon'+'text']();for(const _0x582713 of this['shaders'])_0x582713['restoreCon'+'text']();}['setViewpor'+'t'](_0x690200,_0xffd9e8,_0x3ea8b3,_0x513da5){(this['vx']!==_0x690200||this['vy']!==_0xffd9e8||this['vw']!==_0x3ea8b3||this['vh']!==_0x513da5)&&(this['gl']['viewport'](_0x690200,_0xffd9e8,_0x3ea8b3,_0x513da5),this['vx']=_0x690200,this['vy']=_0xffd9e8,this['vw']=_0x3ea8b3,this['vh']=_0x513da5);}['setScissor'](_0x103e4e,_0x2f4601,_0x367b6c,_0x122f85){(this['sx']!==_0x103e4e||this['sy']!==_0x2f4601||this['sw']!==_0x367b6c||this['sh']!==_0x122f85)&&(this['gl']['scissor'](_0x103e4e,_0x2f4601,_0x367b6c,_0x122f85),this['sx']=_0x103e4e,this['sy']=_0x2f4601,this['sw']=_0x367b6c,this['sh']=_0x122f85);}['setFramebu'+'ffer'](_0x3809d2){if(this['activeFram'+'ebuffer']!==_0x3809d2){const _0x31c098=this['gl'];_0x31c098['bindFrameb'+'uffer'](_0x31c098['FRAMEBUFFE'+'R'],_0x3809d2),this['activeFram'+'ebuffer']=_0x3809d2;}}['copyRender'+'Target'](_0x1197cd,_0x53baac,_0x45b854,_0x5eec45){var _0x4dd498,_0x3e6e5e;const _0x18ae79=this['gl'];if(_0x1197cd===this['backBuffer']&&(_0x1197cd=null),_0x45b854){if(_0x53baac){if(_0x1197cd){if(!_0x1197cd['_colorBuff'+'er']||!_0x53baac['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20color\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0x252e+0x1b83+0x4d6*0x2);if(_0x1197cd['_colorBuff'+'er']['_format']!==_0x53baac['_colorBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20c'+'olor\x20forma'+'ts'),!(0x35e+-0x1a8c+-0x5*-0x4a3);}}else{if(!_0x1197cd['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20empty\x20col'+'or\x20buffer\x20'+'to\x20backbuf'+'fer'),!(0x1c26+0xd*0x2d1+-0x2061*0x2);}}if(_0x5eec45&&_0x1197cd&&!_0x1197cd['_depth']){if(!_0x1197cd['_depthBuff'+'er']||!_0x53baac['_depthBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20depth\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(0x127b+0x1a42+0x199*-0x1c);if(_0x1197cd['_depthBuff'+'er']['_format']!==_0x53baac['_depthBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20d'+'epth\x20forma'+'ts'),!(-0x10f9+0x247f*-0x1+0x3579);}Q['pushGpuMar'+'ker'](this,'COPY-RT');const _0x42f2ec=this['renderTarg'+'et'];this['renderTarg'+'et']=_0x53baac,this['updateBegi'+'n']();const _0x13b6b1=_0x1197cd?_0x1197cd['impl']['_glFrameBu'+'ffer']:(_0x4dd498=this['backBuffer'])==null?void(-0x2*0x59+0x152*0x15+-0x1b08):_0x4dd498['impl']['_glFrameBu'+'ffer'],_0x1b9300=_0x53baac?_0x53baac['impl']['_glFrameBu'+'ffer']:(_0x3e6e5e=this['backBuffer'])==null?void(0x2004+-0x2003+-0x1):_0x3e6e5e['impl']['_glFrameBu'+'ffer'];w['assert'](_0x13b6b1!==_0x1b9300,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x18ae79['bindFrameb'+'uffer'](_0x18ae79['READ_FRAME'+'BUFFER'],_0x13b6b1),_0x18ae79['bindFrameb'+'uffer'](_0x18ae79['DRAW_FRAME'+'BUFFER'],_0x1b9300);const _0x56d226=_0x1197cd?_0x1197cd['width']:_0x53baac?_0x53baac['width']:this['width'],_0x1d3f8a=_0x1197cd?_0x1197cd['height']:_0x53baac?_0x53baac['height']:this['height'];return _0x18ae79['blitFrameb'+'uffer'](-0x1ea8+0x28*0x92+0x7d8,-0xf35+0xa3*-0xa+0x315*0x7,_0x56d226,_0x1d3f8a,0x2278*-0x1+-0x1037*0x1+0x1*0x32af,0xc67+-0xc41*-0x2+-0xb*0x35b,_0x56d226,_0x1d3f8a,(_0x45b854?_0x18ae79['COLOR_BUFF'+'ER_BIT']:-0x2d7*-0x1+0x1db*-0x3+-0x1*-0x2ba)|(_0x5eec45?_0x18ae79['DEPTH_BUFF'+'ER_BIT']:-0x45c+-0x1818*-0x1+-0x13bc),_0x18ae79['NEAREST']),this['renderTarg'+'et']=_0x42f2ec,_0x18ae79['bindFrameb'+'uffer'](_0x18ae79['FRAMEBUFFE'+'R'],_0x42f2ec?_0x42f2ec['impl']['_glFrameBu'+'ffer']:null),Q['popGpuMark'+'er'](this),!(0x134a+-0x1*0x25c7+-0x1*-0x127d);}['frameStart'](){super['frameStart'](),this['updateBack'+'buffer'](),this['gpuProfile'+'r']['frameStart']();}['frameEnd'](){super['frameEnd'](),this['gpuProfile'+'r']['frameEnd'](),this['gpuProfile'+'r']['request']();}['startRende'+'rPass'](_0x534046){const _0x2acea0=_0x534046['renderTarg'+'et']??this['backBuffer'];this['renderTarg'+'et']=_0x2acea0,w['assert'](_0x2acea0),Q['pushGpuMar'+'ker'](this,'Pass:'+_0x534046['name']+'\x20RT:'+_0x2acea0['name']),Q['pushGpuMar'+'ker'](this,'START-PASS'),this['updateBegi'+'n']();const {width:_0x1deaeb,height:_0xfae685}=_0x2acea0;this['setViewpor'+'t'](-0x1d*-0x47+-0x109a+0x88f,-0x1a1*-0x8+0x434+-0x89e*0x2,_0x1deaeb,_0xfae685),this['setScissor'](0x3*-0x68f+-0xc92*0x1+0x673*0x5,-0x5e3*-0x1+-0x2215+0x2*0xe19,_0x1deaeb,_0xfae685);const _0x1fd1c9=_0x534046['colorOps'],_0x274e9c=_0x534046['depthStenc'+'ilOps'];if(_0x1fd1c9!=null&&_0x1fd1c9['clear']||_0x274e9c['clearDepth']||_0x274e9c['clearStenc'+'il']){let _0x502c8f=-0xd46*0x1+-0x4e*0xf+0x11d8;const _0x2e1541={};_0x1fd1c9!=null&&_0x1fd1c9['clear']&&(_0x502c8f|=Fo,_0x2e1541['color']=[_0x1fd1c9['clearValue']['r'],_0x1fd1c9['clearValue']['g'],_0x1fd1c9['clearValue']['b'],_0x1fd1c9['clearValue']['a']]),_0x274e9c['clearDepth']&&(_0x502c8f|=No,_0x2e1541['depth']=_0x274e9c['clearDepth'+'Value']),_0x274e9c['clearStenc'+'il']&&(_0x502c8f|=Vc,_0x2e1541['stencil']=_0x274e9c['clearStenc'+'ilValue']),_0x2e1541['flags']=_0x502c8f,this['clear'](_0x2e1541);}w['call'](()=>{this['insideRend'+'erPass']&&w['errorOnce']('RenderPass'+'\x20cannot\x20be'+'\x20started\x20w'+'hile\x20insid'+'e\x20another\x20'+'render\x20pas'+'s.');}),this['insideRend'+'erPass']=!(-0x1245+-0x1e*-0x3a+-0x3*-0x3d3),Q['popGpuMark'+'er'](this);}['endRenderP'+'ass'](_0x2d03e8){var _0x5b591d;Q['pushGpuMar'+'ker'](this,'END-PASS'),this['unbindVert'+'exArray']();const _0xdc7e4d=this['renderTarg'+'et'],_0xa8bdb=_0x2d03e8['colorArray'+'Ops']['length'];if(_0xdc7e4d){ba['length']=-0x170*0x1+-0x3d7+0x547;const _0x2700dd=this['gl'];for(let _0x1a37b3=0xb09+0x163*-0x2+-0x843;_0x1a37b3<_0xa8bdb;_0x1a37b3++){const _0x9cf9e4=_0x2d03e8['colorArray'+'Ops'][_0x1a37b3];_0x9cf9e4['store']||_0x9cf9e4['resolve']||ba['push'](_0x2700dd['COLOR_ATTA'+'CHMENT0']+_0x1a37b3);}_0xdc7e4d!==this['backBuffer']&&(_0x2d03e8['depthStenc'+'ilOps']['storeDepth']||ba['push'](_0x2700dd['DEPTH_ATTA'+'CHMENT']),_0x2d03e8['depthStenc'+'ilOps']['storeStenc'+'il']||ba['push'](_0x2700dd['STENCIL_AT'+'TACHMENT'])),ba['length']>0xa24+0x23a9*-0x1+0x1985&&_0x2d03e8['fullSizeCl'+'earRect']&&_0x2700dd['invalidate'+'Framebuffe'+'r'](_0x2700dd['DRAW_FRAME'+'BUFFER'],ba),_0xa8bdb&&((_0x5b591d=_0x2d03e8['colorOps'])!=null&&_0x5b591d['resolve'])&&_0x2d03e8['samples']>-0x4*0x6bf+0xd0c+0xdf1&&_0xdc7e4d['autoResolv'+'e']&&_0xdc7e4d['resolve'](!(0x17d*-0x7+-0x168+0xbd3),!(0xb93*0x1+0x1*-0x1cdb+0x1*0x1149)),_0xdc7e4d['depthBuffe'+'r']&&_0x2d03e8['depthStenc'+'ilOps']['resolveDep'+'th']&&_0x2d03e8['samples']>-0x72d+0x1*0x155f+-0x15*0xad&&_0xdc7e4d['autoResolv'+'e']&&_0xdc7e4d['resolve'](!(0x2e*0x8b+0x125*0xd+-0x2*0x13ed),!(0x133+0x1abd+-0x1bf0));for(let _0x56af0d=-0x1161+-0xc33+0x1d94;_0x56af0d<_0xa8bdb;_0x56af0d++)if(_0x2d03e8['colorArray'+'Ops'][_0x56af0d]['genMipmaps']){const _0x5c1332=_0xdc7e4d['_colorBuff'+'ers'][_0x56af0d];_0x5c1332&&_0x5c1332['impl']['_glTexture']&&_0x5c1332['mipmaps']&&(Q['pushGpuMar'+'ker'](this,'MIPS'+_0x56af0d),this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0xa1*0x37+0x63*-0x8+-0xc9*-0x30)),this['bindTextur'+'e'](_0x5c1332),this['gl']['generateMi'+'pmap'](_0x5c1332['impl']['_glTarget']),Q['popGpuMark'+'er'](this));}}this['insideRend'+'erPass']=!(-0x261b+-0x25*-0x1a+0x225a),Q['popGpuMark'+'er'](this),Q['popGpuMark'+'er'](this);}set['defaultFra'+'mebuffer'](_0xd7efb8){this['_defaultFr'+'amebuffer']!==_0xd7efb8&&(this['_defaultFr'+'amebuffer']=_0xd7efb8,this['_defaultFr'+'amebufferC'+'hanged']=!(0x1*0x409+-0x1*-0x2141+0x56*-0x6f));}get['defaultFra'+'mebuffer'](){return this['_defaultFr'+'amebuffer'];}['updateBegi'+'n'](){if(Q['pushGpuMar'+'ker'](this,'UPDATE-BEG'+'IN'),this['boundVao']=null,this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']){for(let _0x5227f1=0x7ad+0x1b82+-0x1*0x232f;_0x5227f1<this['textureUni'+'ts']['length'];++_0x5227f1)for(let _0xa03233=-0x180c+-0xb*-0x71+0x1331;_0xa03233<0x1*-0x982+0x241*0x2+0x503;++_0xa03233)this['textureUni'+'ts'][_0x5227f1][_0xa03233]=null;}const _0x46dc6f=this['renderTarg'+'et']??this['backBuffer'];w['assert'](_0x46dc6f);const _0x80dfa0=_0x46dc6f['impl'];_0x80dfa0['initialize'+'d']||this['initRender'+'Target'](_0x46dc6f),this['setFramebu'+'ffer'](_0x80dfa0['_glFrameBu'+'ffer']),Q['popGpuMark'+'er'](this);}['updateEnd'](){Q['pushGpuMar'+'ker'](this,'UPDATE-END'),this['unbindVert'+'exArray']();const _0x272c82=this['renderTarg'+'et'];if(_0x272c82&&_0x272c82!==this['backBuffer']){_0x272c82['_samples']>-0x1*-0x26ce+0x1357+-0x3a24&&_0x272c82['autoResolv'+'e']&&_0x272c82['resolve']();const _0x4992df=_0x272c82['_colorBuff'+'er'];_0x4992df&&_0x4992df['impl']['_glTexture']&&_0x4992df['mipmaps']&&(this['activeText'+'ure'](this['maxCombine'+'dTextures']-(0x101*0x1+-0x2de*0xd+-0x2*-0x1223)),this['bindTextur'+'e'](_0x4992df),this['gl']['generateMi'+'pmap'](_0x4992df['impl']['_glTarget']));}Q['popGpuMark'+'er'](this);}['setUnpackF'+'lipY'](_0x449e86){if(this['unpackFlip'+'Y']!==_0x449e86){this['unpackFlip'+'Y']=_0x449e86;const _0x4d7421=this['gl'];_0x4d7421['pixelStore'+'i'](_0x4d7421['UNPACK_FLI'+'P_Y_WEBGL'],_0x449e86);}}['setUnpackP'+'remultiply'+'Alpha'](_0x5c05be){if(this['unpackPrem'+'ultiplyAlp'+'ha']!==_0x5c05be){this['unpackPrem'+'ultiplyAlp'+'ha']=_0x5c05be;const _0x1fa8cd=this['gl'];_0x1fa8cd['pixelStore'+'i'](_0x1fa8cd['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],_0x5c05be);}}['activeText'+'ure'](_0x15c4d0){this['textureUni'+'t']!==_0x15c4d0&&(this['gl']['activeText'+'ure'](this['gl']['TEXTURE0']+_0x15c4d0),this['textureUni'+'t']=_0x15c4d0);}['bindTextur'+'e'](_0x11cb0a){const _0x327ac8=_0x11cb0a['impl'],_0x1395c2=_0x327ac8['_glTarget'],_0x1dcda5=_0x327ac8['_glTexture'],_0xcb50fe=this['textureUni'+'t'],_0x17c1a2=this['targetToSl'+'ot'][_0x1395c2];this['textureUni'+'ts'][_0xcb50fe][_0x17c1a2]!==_0x1dcda5&&(this['gl']['bindTextur'+'e'](_0x1395c2,_0x1dcda5),this['textureUni'+'ts'][_0xcb50fe][_0x17c1a2]=_0x1dcda5);}['bindTextur'+'eOnUnit'](_0x447424,_0x4fdb91){const _0x39ef62=_0x447424['impl'],_0x451bb3=_0x39ef62['_glTarget'],_0x318e81=_0x39ef62['_glTexture'],_0x18c5b3=this['targetToSl'+'ot'][_0x451bb3];this['textureUni'+'ts'][_0x4fdb91][_0x18c5b3]!==_0x318e81&&(this['activeText'+'ure'](_0x4fdb91),this['gl']['bindTextur'+'e'](_0x451bb3,_0x318e81),this['textureUni'+'ts'][_0x4fdb91][_0x18c5b3]=_0x318e81);}['setTexture'+'Parameters'](_0x3ab0e6){const _0x47a037=this['gl'],_0x4911ae=_0x3ab0e6['impl']['dirtyParam'+'eterFlags'],_0x562982=_0x3ab0e6['impl']['_glTarget'];if(_0x4911ae&WS){let _0x31a88f=_0x3ab0e6['_minFilter'];(!_0x3ab0e6['_mipmaps']||_0x3ab0e6['_compresse'+'d']&&_0x3ab0e6['_levels']['length']===0x26ba+0x1b88+-0x4241)&&(_0x31a88f===Ph||_0x31a88f===Mh?_0x31a88f=Te:(_0x31a88f===Dh||_0x31a88f===ha)&&(_0x31a88f=vt)),_0x47a037['texParamet'+'eri'](_0x562982,_0x47a037['TEXTURE_MI'+'N_FILTER'],this['glFilter'][_0x31a88f]);}if(_0x4911ae&$S&&_0x47a037['texParamet'+'eri'](_0x562982,_0x47a037['TEXTURE_MA'+'G_FILTER'],this['glFilter'][_0x3ab0e6['_magFilter']]),_0x4911ae&XS&&_0x47a037['texParamet'+'eri'](_0x562982,_0x47a037['TEXTURE_WR'+'AP_S'],this['glAddress'][_0x3ab0e6['_addressU']]),_0x4911ae&qS&&_0x47a037['texParamet'+'eri'](_0x562982,_0x47a037['TEXTURE_WR'+'AP_T'],this['glAddress'][_0x3ab0e6['_addressV']]),_0x4911ae&jS&&_0x47a037['texParamet'+'eri'](_0x562982,_0x47a037['TEXTURE_WR'+'AP_R'],this['glAddress'][_0x3ab0e6['_addressW']]),_0x4911ae&YS&&_0x47a037['texParamet'+'eri'](_0x562982,_0x47a037['TEXTURE_CO'+'MPARE_MODE'],_0x3ab0e6['_compareOn'+'Read']?_0x47a037['COMPARE_RE'+'F_TO_TEXTU'+'RE']:_0x47a037['NONE']),_0x4911ae&KS&&_0x47a037['texParamet'+'eri'](_0x562982,_0x47a037['TEXTURE_CO'+'MPARE_FUNC'],this['glComparis'+'on'][_0x3ab0e6['_compareFu'+'nc']]),_0x4911ae&ZS){const _0x10ae92=this['extTexture'+'FilterAnis'+'otropic'];_0x10ae92&&_0x47a037['texParamet'+'erf'](_0x562982,_0x10ae92['TEXTURE_MA'+'X_ANISOTRO'+'PY_EXT'],Y['clamp'](Math['round'](_0x3ab0e6['_anisotrop'+'y']),0x2553+-0x1*-0x1f04+-0x4456,this['maxAnisotr'+'opy']));}}['setTexture'](_0x1f97c9,_0x20e1d9){const _0x45441a=_0x1f97c9['impl'];_0x45441a['_glTexture']||_0x45441a['initialize'](this,_0x1f97c9),_0x45441a['dirtyParam'+'eterFlags']>-0x1*0x83f+-0xe6e+0x285*0x9||_0x1f97c9['_needsUplo'+'ad']||_0x1f97c9['_needsMipm'+'apsUpload']?(this['activeText'+'ure'](_0x20e1d9),this['bindTextur'+'e'](_0x1f97c9),_0x45441a['dirtyParam'+'eterFlags']&&(this['setTexture'+'Parameters'](_0x1f97c9),_0x45441a['dirtyParam'+'eterFlags']=-0x62*0x42+0x10b*-0x1d+0x3783),(_0x1f97c9['_needsUplo'+'ad']||_0x1f97c9['_needsMipm'+'apsUpload'])&&(_0x45441a['upload'](this,_0x1f97c9),_0x1f97c9['_needsUplo'+'ad']=!(0x2516+0x1*0x111d+-0x3632),_0x1f97c9['_needsMipm'+'apsUpload']=!(0x18f6+-0xd2c+-0xbc9))):this['bindTextur'+'eOnUnit'](_0x1f97c9,_0x20e1d9);}['createVert'+'exArray'](_0x3850b2){let _0x14ec28,_0x4ac465;const _0x4def22=_0x3850b2['length']>-0xaab+0x1b56+-0x2c7*0x6;if(_0x4def22){_0x14ec28='';for(let _0x54ec22=-0xd28+-0x68*-0x1c+0x1c8;_0x54ec22<_0x3850b2['length'];_0x54ec22++){const _0x1a6b11=_0x3850b2[_0x54ec22];_0x14ec28+=_0x1a6b11['id']+_0x1a6b11['format']['renderingH'+'ash'];}_0x4ac465=this['_vaoMap']['get'](_0x14ec28);}if(!_0x4ac465){const _0x2b0edb=this['gl'];_0x4ac465=_0x2b0edb['createVert'+'exArray'](),_0x2b0edb['bindVertex'+'Array'](_0x4ac465),_0x2b0edb['bindBuffer'](_0x2b0edb['ELEMENT_AR'+'RAY_BUFFER'],null);let _0x3b5525=!(-0x6*-0x506+0x39e+-0x1*0x21c1);for(let _0x403cc4=-0x4de*-0x1+0x15*-0xd+0x1*-0x3cd;_0x403cc4<_0x3850b2['length'];_0x403cc4++){const _0x4a82e1=_0x3850b2[_0x403cc4];_0x2b0edb['bindBuffer'](_0x2b0edb['ARRAY_BUFF'+'ER'],_0x4a82e1['impl']['bufferId']);const _0x34bc3f=_0x4a82e1['format']['elements'];for(let _0x4f31a5=0x11b*0x1d+0x20dd+-0x40ec;_0x4f31a5<_0x34bc3f['length'];_0x4f31a5++){const _0x2ac3f9=_0x34bc3f[_0x4f31a5],_0x581644=Le[_0x2ac3f9['name']];_0x581644===0xd*-0x25+-0x1806+-0x19e7*-0x1&&(_0x3b5525=!(-0x2113*-0x1+0x46+-0x2159*0x1)),_0x2ac3f9['asInt']?_0x2b0edb['vertexAttr'+'ibIPointer'](_0x581644,_0x2ac3f9['numCompone'+'nts'],this['glType'][_0x2ac3f9['dataType']],_0x2ac3f9['stride'],_0x2ac3f9['offset']):_0x2b0edb['vertexAttr'+'ibPointer'](_0x581644,_0x2ac3f9['numCompone'+'nts'],this['glType'][_0x2ac3f9['dataType']],_0x2ac3f9['normalize'],_0x2ac3f9['stride'],_0x2ac3f9['offset']),_0x2b0edb['enableVert'+'exAttribAr'+'ray'](_0x581644),_0x4a82e1['format']['instancing']&&_0x2b0edb['vertexAttr'+'ibDivisor'](_0x581644,-0x1ac+-0x6b1+0x85e);}}_0x2b0edb['bindVertex'+'Array'](null),_0x2b0edb['bindBuffer'](_0x2b0edb['ARRAY_BUFF'+'ER'],null),_0x4def22&&this['_vaoMap']['set'](_0x14ec28,_0x4ac465),_0x3b5525||w['warn']('No\x20vertex\x20'+'attribute\x20'+'is\x20mapped\x20'+'to\x20locatio'+'n\x200,\x20which'+'\x20might\x20cau'+'se\x20compati'+'bility\x20iss'+'ues\x20on\x20Saf'+'ari\x20on\x20Mac'+'OS\x20-\x20pleas'+'e\x20use\x20attr'+'ibute\x20SEMA'+'NTIC_POSIT'+'ION\x20or\x20SEM'+'ANTIC_ATTR'+'15');}return _0x4ac465;}['unbindVert'+'exArray'](){this['boundVao']&&(this['boundVao']=null,this['gl']['bindVertex'+'Array'](null));}['setBuffers'](_0x840219){const _0x13b1a9=this['gl'];let _0x17e08e;if(this['vertexBuff'+'ers']['length']===-0xcf2+0x216e+-0x1*0x147b){const _0x26339e=this['vertexBuff'+'ers'][-0xdbb+0x3*-0x9ae+0x2ac5];w['assert'](_0x26339e['device']===this,'The\x20Vertex'+'Buffer\x20was'+'\x20not\x20creat'+'ed\x20using\x20c'+'urrent\x20Gra'+'phicsDevic'+'e'),_0x26339e['impl']['vao']||(_0x26339e['impl']['vao']=this['createVert'+'exArray'](this['vertexBuff'+'ers'])),_0x17e08e=_0x26339e['impl']['vao'];}else _0x17e08e=this['createVert'+'exArray'](this['vertexBuff'+'ers']);this['boundVao']!==_0x17e08e&&(this['boundVao']=_0x17e08e,_0x13b1a9['bindVertex'+'Array'](_0x17e08e));const _0x2d2f3c=_0x840219?_0x840219['impl']['bufferId']:null;_0x13b1a9['bindBuffer'](_0x13b1a9['ELEMENT_AR'+'RAY_BUFFER'],_0x2d2f3c);}['draw'](_0x1163d9,_0x138b0e,_0x92c5ad,_0x515d2f,_0x2cbdbd=!(0xbe*-0x13+0x1a9*-0x4+-0x162*-0xf),_0x48c656=!(0x706+0x841*-0x2+0x97c)){const _0x58a877=this['shader'];if(_0x58a877&&(this['activateSh'+'ader'](),this['shaderVali'+'d'])){const _0x2aeb06=this['gl'];_0x2cbdbd&&(w['call'](()=>{var _0x55e83f,_0x52de37;return this['validateAt'+'tributes'](this['shader'],(_0x55e83f=this['vertexBuff'+'ers'][-0xc6d*0x1+-0xe2*0x1a+0xbcb*0x3])==null?void(-0x1*-0x1997+-0x10*-0x116+-0x2af7):_0x55e83f['format'],(_0x52de37=this['vertexBuff'+'ers'][0x74*-0x56+-0xb2c+-0x48f*-0xb])==null?void(-0xbc1+-0x1ece+0x883*0x5):_0x52de37['format']);}),this['setBuffers'](_0x138b0e));let _0x347d2d=-0x87b*-0x1+-0xc70+0x1*0x3f5;const _0x3863e3=_0x58a877['impl']['samplers'];for(let _0x1831d0=-0x1d52+-0x93*-0x2b+0x4a1,_0x3a3477=_0x3863e3['length'];_0x1831d0<_0x3a3477;_0x1831d0++){const _0x133eb1=_0x3863e3[_0x1831d0];let _0x6d70c8=_0x133eb1['scopeId']['value'];if(!_0x6d70c8){const _0x591ae1=_0x133eb1['scopeId']['name'];w['assert'](_0x591ae1!=='texture_gr'+'abPass','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27texture'+'_grabPass\x27'+'\x20is\x20not\x20lo'+'nger\x20suppo'+'rted,\x20use\x20'+'\x27uSceneCol'+'orMap\x27\x20ins'+'tead'),w['assert'](_0x591ae1!=='uDepthMap','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27uDepthM'+'ap\x27\x20is\x20not'+'\x20longer\x20su'+'pported,\x20u'+'se\x20\x27uScene'+'DepthMap\x27\x20'+'instead'),_0x591ae1==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x6d70c8=oa(this,'white')),_0x591ae1==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x6d70c8=oa(this,'pink')),_0x6d70c8||(w['errorOnce']('Shader\x20'+_0x58a877['name']+'\x20requires\x20'+_0x591ae1+('\x20texture\x20w'+'hich\x20was\x20n'+'ot\x20set.\x20Re'+'ndering\x20[')+Q['toString']()+']',_0x58a877),_0x6d70c8=oa(this,'pink'));}if(_0x6d70c8 instanceof _e){const _0xb16691=_0x6d70c8;this['setTexture'](_0xb16691,_0x347d2d),this['renderTarg'+'et']&&this['renderTarg'+'et']['_samples']<0x5dd+0x1*-0x756+0x17b&&(this['renderTarg'+'et']['colorBuffe'+'r']&&this['renderTarg'+'et']['colorBuffe'+'r']===_0xb16691?w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20color\x20b'+'uffer\x20as\x20a'+'\x20texture',{'renderTarget':this['renderTarg'+'et'],'texture':_0xb16691}):this['renderTarg'+'et']['depthBuffe'+'r']&&this['renderTarg'+'et']['depthBuffe'+'r']===_0xb16691&&w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20depth\x20b'+'uffer\x20as\x20a'+'\x20texture',{'texture':_0xb16691})),_0x133eb1['slot']!==_0x347d2d&&(_0x2aeb06['uniform1i'](_0x133eb1['locationId'],_0x347d2d),_0x133eb1['slot']=_0x347d2d),_0x347d2d++;}else{_0x133eb1['array']['length']=-0x4*-0x472+0x4c7+-0x168f;const _0x5aee87=_0x6d70c8['length'];for(let _0xa25a71=0x16a9+0x155e+-0x2c07;_0xa25a71<_0x5aee87;_0xa25a71++){const _0x1342ab=_0x6d70c8[_0xa25a71];this['setTexture'](_0x1342ab,_0x347d2d),_0x133eb1['array'][_0xa25a71]=_0x347d2d,_0x347d2d++;}_0x2aeb06['uniform1iv'](_0x133eb1['locationId'],_0x133eb1['array']);}}const _0x559e75=_0x58a877['impl']['uniforms'];for(let _0x22a5e9=0x218*0x3+-0x2094+-0xc*-0x231,_0x433ea1=_0x559e75['length'];_0x22a5e9<_0x433ea1;_0x22a5e9++){const _0x4853a9=_0x559e75[_0x22a5e9],_0x164258=_0x4853a9['scopeId'],_0x2f4db9=_0x4853a9['version'],_0x4e70b3=_0x164258['versionObj'+'ect']['version'];if(_0x2f4db9['globalId']!==_0x4e70b3['globalId']||_0x2f4db9['revision']!==_0x4e70b3['revision']){_0x2f4db9['globalId']=_0x4e70b3['globalId'],_0x2f4db9['revision']=_0x4e70b3['revision'];const _0x36c39e=_0x164258['value'];_0x36c39e!=null?this['commitFunc'+'tion'][_0x4853a9['dataType']](_0x4853a9,_0x36c39e):w['warnOnce']('Shader\x20['+_0x58a877['label']+(']\x20requires'+'\x20uniform\x20[')+_0x4853a9['scopeId']['name']+(']\x20which\x20ha'+'s\x20not\x20been'+'\x20set,\x20whil'+'e\x20renderin'+'g\x20[')+Q['toString']()+']');}}this['transformF'+'eedbackBuf'+'fer']&&(_0x2aeb06['bindBuffer'+'Base'](_0x2aeb06['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],0x117*-0xf+0xc8*0x15+-0x1*0xf,this['transformF'+'eedbackBuf'+'fer']['impl']['bufferId']),_0x2aeb06['beginTrans'+'formFeedba'+'ck'](_0x2aeb06['POINTS']));const _0x5c1d54=this['glPrimitiv'+'e'][_0x1163d9['type']],_0x51e004=_0x1163d9['count'];if(_0x1163d9['indexed']){w['assert'](_0x138b0e['device']===this,'The\x20IndexB'+'uffer\x20was\x20'+'not\x20create'+'d\x20using\x20cu'+'rrent\x20Grap'+'hicsDevice');const _0x19decc=_0x138b0e['impl']['glFormat'],_0x575e5a=_0x1163d9['base']*_0x138b0e['bytesPerIn'+'dex'];_0x92c5ad>0xa0d+-0x26ea+0x1cdd?_0x2aeb06['drawElemen'+'tsInstance'+'d'](_0x5c1d54,_0x51e004,_0x19decc,_0x575e5a,_0x92c5ad):_0x2aeb06['drawElemen'+'ts'](_0x5c1d54,_0x51e004,_0x19decc,_0x575e5a);}else{const _0x26999a=_0x1163d9['base'];_0x92c5ad>0xfa0+0xb3b+-0x55f*0x5?_0x2aeb06['drawArrays'+'Instanced'](_0x5c1d54,_0x26999a,_0x51e004,_0x92c5ad):_0x2aeb06['drawArrays'](_0x5c1d54,_0x26999a,_0x51e004);}this['transformF'+'eedbackBuf'+'fer']&&(_0x2aeb06['endTransfo'+'rmFeedback'](),_0x2aeb06['bindBuffer'+'Base'](_0x2aeb06['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x170e+-0x551*0x7+0x8b*0x6f,null)),this['_drawCalls'+'PerFrame']++,this['_primsPerF'+'rame'][_0x1163d9['type']]+=_0x1163d9['count']*(_0x92c5ad>0x1*0xfbb+0x3*0xc+-0x2*0x7ef?_0x92c5ad:-0x1264+0x11*-0x7f+0x2*0xd6a);}_0x48c656&&this['clearVerte'+'xBuffer']();}['clear'](_0x14e41d){const _0x36cb61=this['defaultCle'+'arOptions'];_0x14e41d=_0x14e41d||_0x36cb61;const _0x53ca77=_0x14e41d['flags']??_0x36cb61['flags'];if(_0x53ca77!==-0x17ab+-0x86*0x3b+0x368d){const _0x46b295=this['gl'];if(_0x53ca77&Fo){const _0x4240de=_0x14e41d['color']??_0x36cb61['color'],_0x4f84c4=_0x4240de[0x3b*-0x14+0x1a47+-0x3*0x739],_0x3b6967=_0x4240de[0xe25+0x37*0x4f+-0x1f1d],_0x27edef=_0x4240de[-0x1fa+-0xa*0x148+-0x3b3*-0x4],_0x4a013c=_0x4240de[0x1*0x1160+-0x1*-0x1bcc+-0x2d29],_0x1825df=this['clearColor'];(_0x4f84c4!==_0x1825df['r']||_0x3b6967!==_0x1825df['g']||_0x27edef!==_0x1825df['b']||_0x4a013c!==_0x1825df['a'])&&(this['gl']['clearColor'](_0x4f84c4,_0x3b6967,_0x27edef,_0x4a013c),this['clearColor']['set'](_0x4f84c4,_0x3b6967,_0x27edef,_0x4a013c)),this['setBlendSt'+'ate'](pt['NOBLEND']);}if(_0x53ca77&No){const _0x4c2187=_0x14e41d['depth']??_0x36cb61['depth'];_0x4c2187!==this['clearDepth']&&(this['gl']['clearDepth'](_0x4c2187),this['clearDepth']=_0x4c2187),this['setDepthSt'+'ate'](Yt['WRITEDEPTH']);}if(_0x53ca77&Vc){const _0x2f8fef=_0x14e41d['stencil']??_0x36cb61['stencil'];_0x2f8fef!==this['clearStenc'+'il']&&(this['gl']['clearStenc'+'il'](_0x2f8fef),this['clearStenc'+'il']=_0x2f8fef),_0x46b295['stencilMas'+'k'](-0x4ae+-0x189*0x4+0xbd1),this['stencilWri'+'teMaskFron'+'t']=-0x1ecf+-0x21c+0x21ea*0x1,this['stencilWri'+'teMaskBack']=-0xc76+-0x1*0xeae+0x1c23;}_0x46b295['clear'](this['glClearFla'+'g'][_0x53ca77]);}}['submit'](){this['gl']['flush']();}['readPixels'](_0x518d69,_0x1e4ea3,_0x39169f,_0x478714,_0x5b1014){const _0x1cf9eb=this['gl'];_0x1cf9eb['readPixels'](_0x518d69,_0x1e4ea3,_0x39169f,_0x478714,_0x1cf9eb['RGBA'],_0x1cf9eb['UNSIGNED_B'+'YTE'],_0x5b1014);}['clientWait'+'Async'](_0x18704b,_0x4ddc82){const _0x2a905f=this['gl'],_0x221ddd=_0x2a905f['fenceSync'](_0x2a905f['SYNC_GPU_C'+'OMMANDS_CO'+'MPLETE'],0x1ea4+0xa2c*0x1+0x4*-0xa34);return this['submit'](),new Promise((_0x4b8c46,_0x1f4f1d)=>{function _0x2a63a6(){const _0x215ac8=_0x2a905f['clientWait'+'Sync'](_0x221ddd,_0x18704b,0x2cd*-0xb+0x7ae+-0x1721*-0x1);_0x215ac8===_0x2a905f['TIMEOUT_EX'+'PIRED']?setTimeout(_0x2a63a6,_0x4ddc82):(_0x2a905f['deleteSync'](_0x221ddd),_0x215ac8===_0x2a905f['WAIT_FAILE'+'D']?_0x1f4f1d(new Error('webgl\x20clie'+'ntWaitSync'+'\x20sync\x20fail'+'ed')):_0x4b8c46());}_0x2a63a6();});}async['readPixels'+'Async'](_0x112dd4,_0x1f5200,_0x360573,_0x30cb5d,_0x1ace02){var _0x287d61;const _0x54f878=this['gl'],_0x370507=(_0x287d61=this['renderTarg'+'et']['colorBuffe'+'r'])==null?void(-0x79*0x6+0x1bd0+0x2*-0xc7d):_0x287d61['impl'],_0x3f5eac=(_0x370507==null?void(-0x1*-0x815+0x1ba6+-0x23bb):_0x370507['_glFormat'])??_0x54f878['RGBA'],_0x2103f7=(_0x370507==null?void(-0xa97*0x1+0x2*0x47f+-0x199*-0x1):_0x370507['_glPixelTy'+'pe'])??_0x54f878['UNSIGNED_B'+'YTE'],_0x428e46=_0x54f878['createBuff'+'er']();return _0x54f878['bindBuffer'](_0x54f878['PIXEL_PACK'+'_BUFFER'],_0x428e46),_0x54f878['bufferData'](_0x54f878['PIXEL_PACK'+'_BUFFER'],_0x1ace02['byteLength'],_0x54f878['STREAM_REA'+'D']),_0x54f878['readPixels'](_0x112dd4,_0x1f5200,_0x360573,_0x30cb5d,_0x3f5eac,_0x2103f7,0x1*0x1601+-0x137*-0x1f+0x1dd5*-0x2),_0x54f878['bindBuffer'](_0x54f878['PIXEL_PACK'+'_BUFFER'],null),await this['clientWait'+'Async'](-0x1940+0x1006+0x49d*0x2,-0x1840+0x5*-0x65+-0x8c3*-0x3),_0x54f878['bindBuffer'](_0x54f878['PIXEL_PACK'+'_BUFFER'],_0x428e46),_0x54f878['getBufferS'+'ubData'](_0x54f878['PIXEL_PACK'+'_BUFFER'],-0xd57*-0x1+-0x17*0xc1+0x1*0x400,_0x1ace02),_0x54f878['bindBuffer'](_0x54f878['PIXEL_PACK'+'_BUFFER'],null),_0x54f878['deleteBuff'+'er'](_0x428e46),_0x1ace02;}['readTextur'+'eAsync'](_0x4428d2,_0x455f9a,_0x42c50b,_0x37633d,_0x13426d,_0x141e9e){const _0x3eba8b=_0x141e9e['face']??0x2591*0x1+-0x14d5+-0x10bc,_0x42af9e=_0x141e9e['renderTarg'+'et']??new gt({'colorBuffer':_0x4428d2,'depth':!(-0xb*-0x1bf+0x3*0x781+0xb5*-0x3b),'face':_0x3eba8b});w['assert'](_0x42af9e['colorBuffe'+'r']===_0x4428d2);const _0x42b5d9=new ArrayBuffer($i['calcLevelG'+'puSize'](_0x37633d,_0x13426d,0x450+0x1634+-0x1a83,_0x4428d2['_format'])),_0x4bc044=_0x141e9e['data']??new(RS(_0x4428d2['_format']))(_0x42b5d9);return this['setRenderT'+'arget'](_0x42af9e),this['initRender'+'Target'](_0x42af9e),new Promise((_0x5aca98,_0x31636a)=>{this['readPixels'+'Async'](_0x455f9a,_0x42c50b,_0x37633d,_0x13426d,_0x4bc044)['then'](_0x59bcc6=>{_0x141e9e['renderTarg'+'et']||_0x42af9e['destroy'](),_0x5aca98(_0x59bcc6);})['catch'](_0x31636a);});}async['writeTextu'+'reAsync'](_0x3f3d9a,_0x415666,_0x2240b5,_0x142765,_0x508a6e,_0x34f223){const _0xdf5ac2=this['gl'],_0x59e5d6=_0x3f3d9a['impl'],_0x11c118=(_0x59e5d6==null?void(-0x1c1*0x5+-0x3*0x293+0x2*0x83f):_0x59e5d6['_glFormat'])??_0xdf5ac2['RGBA'],_0x34302a=(_0x59e5d6==null?void(0x1f3c*-0x1+0x992+0x15aa):_0x59e5d6['_glPixelTy'+'pe'])??_0xdf5ac2['UNSIGNED_B'+'YTE'],_0x324ff8=_0xdf5ac2['createBuff'+'er']();_0xdf5ac2['bindBuffer'](_0xdf5ac2['PIXEL_UNPA'+'CK_BUFFER'],_0x324ff8),_0xdf5ac2['bufferData'](_0xdf5ac2['PIXEL_UNPA'+'CK_BUFFER'],_0x34f223,_0xdf5ac2['STREAM_DRA'+'W']),_0xdf5ac2['bindTextur'+'e'](_0xdf5ac2['TEXTURE_2D'],_0x59e5d6['_glTexture']),_0xdf5ac2['texSubImag'+'e2D'](_0xdf5ac2['TEXTURE_2D'],-0x16b0+-0x27*-0x17+0x132f,_0x415666,_0x2240b5,_0x142765,_0x508a6e,_0x11c118,_0x34302a,0xe3*0x8+-0x2642+0x1f2a),_0xdf5ac2['bindBuffer'](_0xdf5ac2['PIXEL_UNPA'+'CK_BUFFER'],null),_0x3f3d9a['_needsUplo'+'ad']=!(-0x18c9+0x1ec8+0x2ff*-0x2),_0x3f3d9a['_mipmapsUp'+'loaded']=!(0x25*0xd8+-0x2596*-0x1+-0x44cd),await this['clientWait'+'Async'](0x1*-0xa61+-0x1*0xd47+-0x5ea*-0x4,0x1517*-0x1+-0x1690+0x2bb7);}['setAlphaTo'+'Coverage'](_0x358ff7){this['alphaToCov'+'erage']!==_0x358ff7&&(this['alphaToCov'+'erage']=_0x358ff7,_0x358ff7?this['gl']['enable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']):this['gl']['disable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']));}['setTransfo'+'rmFeedback'+'Buffer'](_0x2474db){if(this['transformF'+'eedbackBuf'+'fer']!==_0x2474db){this['transformF'+'eedbackBuf'+'fer']=_0x2474db;const _0x2ad9dd=this['gl'];_0x2474db?(this['feedback']||(this['feedback']=_0x2ad9dd['createTran'+'sformFeedb'+'ack']()),_0x2ad9dd['bindTransf'+'ormFeedbac'+'k'](_0x2ad9dd['TRANSFORM_'+'FEEDBACK'],this['feedback'])):_0x2ad9dd['bindTransf'+'ormFeedbac'+'k'](_0x2ad9dd['TRANSFORM_'+'FEEDBACK'],null);}}['setRaster'](_0xe582fa){this['raster']!==_0xe582fa&&(this['raster']=_0xe582fa,_0xe582fa?this['gl']['disable'](this['gl']['RASTERIZER'+'_DISCARD']):this['gl']['enable'](this['gl']['RASTERIZER'+'_DISCARD']));}['setStencil'+'Test'](_0x24e1a9){if(this['stencil']!==_0x24e1a9){const _0x2085a9=this['gl'];_0x24e1a9?_0x2085a9['enable'](_0x2085a9['STENCIL_TE'+'ST']):_0x2085a9['disable'](_0x2085a9['STENCIL_TE'+'ST']),this['stencil']=_0x24e1a9;}}['setStencil'+'Func'](_0x19ed57,_0x28bac4,_0x317b71){(this['stencilFun'+'cFront']!==_0x19ed57||this['stencilRef'+'Front']!==_0x28bac4||this['stencilMas'+'kFront']!==_0x317b71||this['stencilFun'+'cBack']!==_0x19ed57||this['stencilRef'+'Back']!==_0x28bac4||this['stencilMas'+'kBack']!==_0x317b71)&&(this['gl']['stencilFun'+'c'](this['glComparis'+'on'][_0x19ed57],_0x28bac4,_0x317b71),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=_0x19ed57,this['stencilRef'+'Front']=this['stencilRef'+'Back']=_0x28bac4,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=_0x317b71);}['setStencil'+'FuncFront'](_0x1e408e,_0x2ca3f0,_0x2d36e5){if(this['stencilFun'+'cFront']!==_0x1e408e||this['stencilRef'+'Front']!==_0x2ca3f0||this['stencilMas'+'kFront']!==_0x2d36e5){const _0x731431=this['gl'];_0x731431['stencilFun'+'cSeparate'](_0x731431['FRONT'],this['glComparis'+'on'][_0x1e408e],_0x2ca3f0,_0x2d36e5),this['stencilFun'+'cFront']=_0x1e408e,this['stencilRef'+'Front']=_0x2ca3f0,this['stencilMas'+'kFront']=_0x2d36e5;}}['setStencil'+'FuncBack'](_0x4dbd7b,_0x163eaf,_0x535a35){if(this['stencilFun'+'cBack']!==_0x4dbd7b||this['stencilRef'+'Back']!==_0x163eaf||this['stencilMas'+'kBack']!==_0x535a35){const _0x4e6258=this['gl'];_0x4e6258['stencilFun'+'cSeparate'](_0x4e6258['BACK'],this['glComparis'+'on'][_0x4dbd7b],_0x163eaf,_0x535a35),this['stencilFun'+'cBack']=_0x4dbd7b,this['stencilRef'+'Back']=_0x163eaf,this['stencilMas'+'kBack']=_0x535a35;}}['setStencil'+'Operation'](_0x48012d,_0x327fe5,_0x2c2aa1,_0x46cad0){(this['stencilFai'+'lFront']!==_0x48012d||this['stencilZfa'+'ilFront']!==_0x327fe5||this['stencilZpa'+'ssFront']!==_0x2c2aa1||this['stencilFai'+'lBack']!==_0x48012d||this['stencilZfa'+'ilBack']!==_0x327fe5||this['stencilZpa'+'ssBack']!==_0x2c2aa1)&&(this['gl']['stencilOp'](this['glStencilO'+'p'][_0x48012d],this['glStencilO'+'p'][_0x327fe5],this['glStencilO'+'p'][_0x2c2aa1]),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=_0x48012d,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=_0x327fe5,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=_0x2c2aa1),(this['stencilWri'+'teMaskFron'+'t']!==_0x46cad0||this['stencilWri'+'teMaskBack']!==_0x46cad0)&&(this['gl']['stencilMas'+'k'](_0x46cad0),this['stencilWri'+'teMaskFron'+'t']=_0x46cad0,this['stencilWri'+'teMaskBack']=_0x46cad0);}['setStencil'+'OperationF'+'ront'](_0x4af061,_0x5d259c,_0x365819,_0x10a0b0){(this['stencilFai'+'lFront']!==_0x4af061||this['stencilZfa'+'ilFront']!==_0x5d259c||this['stencilZpa'+'ssFront']!==_0x365819)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['FRONT'],this['glStencilO'+'p'][_0x4af061],this['glStencilO'+'p'][_0x5d259c],this['glStencilO'+'p'][_0x365819]),this['stencilFai'+'lFront']=_0x4af061,this['stencilZfa'+'ilFront']=_0x5d259c,this['stencilZpa'+'ssFront']=_0x365819),this['stencilWri'+'teMaskFron'+'t']!==_0x10a0b0&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['FRONT'],_0x10a0b0),this['stencilWri'+'teMaskFron'+'t']=_0x10a0b0);}['setStencil'+'OperationB'+'ack'](_0x30e6a0,_0x1f5751,_0x48146c,_0x3bb5c2){(this['stencilFai'+'lBack']!==_0x30e6a0||this['stencilZfa'+'ilBack']!==_0x1f5751||this['stencilZpa'+'ssBack']!==_0x48146c)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['BACK'],this['glStencilO'+'p'][_0x30e6a0],this['glStencilO'+'p'][_0x1f5751],this['glStencilO'+'p'][_0x48146c]),this['stencilFai'+'lBack']=_0x30e6a0,this['stencilZfa'+'ilBack']=_0x1f5751,this['stencilZpa'+'ssBack']=_0x48146c),this['stencilWri'+'teMaskBack']!==_0x3bb5c2&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['BACK'],_0x3bb5c2),this['stencilWri'+'teMaskBack']=_0x3bb5c2);}['setBlendSt'+'ate'](_0x4ce8f3){const _0x40b9f9=this['blendState'];if(!_0x40b9f9['equals'](_0x4ce8f3)){const _0x5c7993=this['gl'],{blend:_0x222913,colorOp:_0x3cca51,alphaOp:_0x11fb4d,colorSrcFactor:_0x44f50b,colorDstFactor:_0x2e4087,alphaSrcFactor:_0xbb9343,alphaDstFactor:_0x1d94c6}=_0x4ce8f3;if(_0x40b9f9['blend']!==_0x222913&&(_0x222913?_0x5c7993['enable'](_0x5c7993['BLEND']):_0x5c7993['disable'](_0x5c7993['BLEND'])),_0x40b9f9['colorOp']!==_0x3cca51||_0x40b9f9['alphaOp']!==_0x11fb4d){const _0x2cb975=this['glBlendEqu'+'ation'];_0x5c7993['blendEquat'+'ionSeparat'+'e'](_0x2cb975[_0x3cca51],_0x2cb975[_0x11fb4d]);}(_0x40b9f9['colorSrcFa'+'ctor']!==_0x44f50b||_0x40b9f9['colorDstFa'+'ctor']!==_0x2e4087||_0x40b9f9['alphaSrcFa'+'ctor']!==_0xbb9343||_0x40b9f9['alphaDstFa'+'ctor']!==_0x1d94c6)&&_0x5c7993['blendFuncS'+'eparate'](this['glBlendFun'+'ctionColor'][_0x44f50b],this['glBlendFun'+'ctionColor'][_0x2e4087],this['glBlendFun'+'ctionAlpha'][_0xbb9343],this['glBlendFun'+'ctionAlpha'][_0x1d94c6]),_0x40b9f9['allWrite']!==_0x4ce8f3['allWrite']&&this['gl']['colorMask'](_0x4ce8f3['redWrite'],_0x4ce8f3['greenWrite'],_0x4ce8f3['blueWrite'],_0x4ce8f3['alphaWrite']),_0x40b9f9['copy'](_0x4ce8f3);}}['setBlendCo'+'lor'](_0x440c35,_0x14335c,_0x47aa39,_0x20628e){const _0xe4e36=this['blendColor'];(_0x440c35!==_0xe4e36['r']||_0x14335c!==_0xe4e36['g']||_0x47aa39!==_0xe4e36['b']||_0x20628e!==_0xe4e36['a'])&&(this['gl']['blendColor'](_0x440c35,_0x14335c,_0x47aa39,_0x20628e),_0xe4e36['set'](_0x440c35,_0x14335c,_0x47aa39,_0x20628e));}['setStencil'+'State'](_0x262b67,_0x1f0b73){_0x262b67||_0x1f0b73?(this['setStencil'+'Test'](!(0x36c+-0xf6a+0x2*0x5ff)),_0x262b67===_0x1f0b73?(this['setStencil'+'Func'](_0x262b67['func'],_0x262b67['ref'],_0x262b67['readMask']),this['setStencil'+'Operation'](_0x262b67['fail'],_0x262b67['zfail'],_0x262b67['zpass'],_0x262b67['writeMask'])):(_0x262b67??(_0x262b67=pi['DEFAULT']),this['setStencil'+'FuncFront'](_0x262b67['func'],_0x262b67['ref'],_0x262b67['readMask']),this['setStencil'+'OperationF'+'ront'](_0x262b67['fail'],_0x262b67['zfail'],_0x262b67['zpass'],_0x262b67['writeMask']),_0x1f0b73??(_0x1f0b73=pi['DEFAULT']),this['setStencil'+'FuncBack'](_0x1f0b73['func'],_0x1f0b73['ref'],_0x1f0b73['readMask']),this['setStencil'+'OperationB'+'ack'](_0x1f0b73['fail'],_0x1f0b73['zfail'],_0x1f0b73['zpass'],_0x1f0b73['writeMask']))):this['setStencil'+'Test'](!(0x268a+0x2*-0x1106+-0x47d));}['setDepthSt'+'ate'](_0x3649ae){const _0x344482=this['depthState'];if(!_0x344482['equals'](_0x3649ae)){const _0x467317=this['gl'],_0x566474=_0x3649ae['write'];_0x344482['write']!==_0x566474&&_0x467317['depthMask'](_0x566474);let {func:_0x22b1bc,test:_0x27f84b}=_0x3649ae;!_0x27f84b&&_0x566474&&(_0x27f84b=!(-0x1ccb+0xd*0x9+0x1c56),_0x22b1bc=Hi),_0x344482['func']!==_0x22b1bc&&_0x467317['depthFunc'](this['glComparis'+'on'][_0x22b1bc]),_0x344482['test']!==_0x27f84b&&(_0x27f84b?_0x467317['enable'](_0x467317['DEPTH_TEST']):_0x467317['disable'](_0x467317['DEPTH_TEST']));const {depthBias:_0x3b9476,depthBiasSlope:_0x3a1b1b}=_0x3649ae;_0x3b9476||_0x3a1b1b?(this['depthBiasE'+'nabled']||(this['depthBiasE'+'nabled']=!(0x11ba*0x2+-0x2418+0xa4),this['gl']['enable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x467317['polygonOff'+'set'](_0x3a1b1b,_0x3b9476)):this['depthBiasE'+'nabled']&&(this['depthBiasE'+'nabled']=!(-0x30*-0x67+0x2149+-0x3498),this['gl']['disable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x344482['copy'](_0x3649ae);}}['setCullMod'+'e'](_0x412b29){if(this['cullMode']!==_0x412b29){if(_0x412b29===bt)this['gl']['disable'](this['gl']['CULL_FACE']);else{this['cullMode']===bt&&this['gl']['enable'](this['gl']['CULL_FACE']);const _0x210f08=this['glCull'][_0x412b29];this['cullFace']!==_0x210f08&&(this['gl']['cullFace'](_0x210f08),this['cullFace']=_0x210f08);}this['cullMode']=_0x412b29;}}['setShader'](_0x42d333,_0x34c174=!(0xcbb+-0x122*-0x3+-0x1020)){_0x42d333!==this['shader']&&(this['shader']=_0x42d333,this['shaderAsyn'+'cCompile']=_0x34c174,this['shaderVali'+'d']=void(0x1*-0x175c+-0x1*-0x2217+-0xabb),this['_shaderSwi'+'tchesPerFr'+'ame']++);}['activateSh'+'ader'](){const {shader:_0x122a33}=this,{impl:_0x274349}=_0x122a33;this['shaderVali'+'d']===void(-0x251f+0x4a8+-0x1*-0x2077)&&(_0x122a33['failed']?this['shaderVali'+'d']=!(0x1125+-0x2280+0x65*0x2c):_0x122a33['ready']||(this['shaderAsyn'+'cCompile']?_0x274349['isLinked'](this)?_0x274349['finalize'](this,_0x122a33)||(_0x122a33['failed']=!(0x6*-0x3fd+0x1a01+-0x213*0x1),this['shaderVali'+'d']=!(0x8f4+0x1d1a+-0x260d*0x1)):this['shaderVali'+'d']=!(-0x3f*-0x67+0x22ab+-0x3c03):_0x274349['finalize'](this,_0x122a33)||(_0x122a33['failed']=!(0xf6+-0x1f85*-0x1+-0x207b),this['shaderVali'+'d']=!(0xf17*-0x1+0x48*-0x83+-0x3*-0x1150)))),this['shaderVali'+'d']===void(0x17cd+-0xb*-0x330+0x3add*-0x1)&&(this['gl']['useProgram'](_0x274349['glProgram']),this['shaderVali'+'d']=!(0x131+-0x15e1*-0x1+0xb89*-0x2));}['clearVerte'+'xArrayObje'+'ctCache'](){const _0x1e5428=this['gl'];this['_vaoMap']['forEach']((_0x52f9d6,_0x3cd120,_0x7855f0)=>{_0x1e5428['deleteVert'+'exArray'](_0x52f9d6);}),this['_vaoMap']['clear']();}set['fullscreen'](_0x50ed71){_0x50ed71?this['gl']['canvas']['requestFul'+'lscreen']():document['exitFullsc'+'reen']();}get['fullscreen'](){return!!document['fullscreen'+'Element'];}['debugLoseC'+'ontext'](_0x14a993=-0x223c+-0x2*-0x1a6+0x1f54){const _0x4800ee=this['gl']['getExtensi'+'on']('WEBGL_lose'+'_context');_0x4800ee['loseContex'+'t'](),setTimeout(()=>_0x4800ee['restoreCon'+'text'](),_0x14a993);}}let ET=-0x10aa+0x1*-0x1972+0x2a1c;class xr{constructor(_0x5d405b,_0x519071,_0x139f3d,_0x47f379=ms,_0x43eb5f,_0x1d40f0){this['device']=_0x5d405b,this['format']=_0x519071,this['numIndices']=_0x139f3d,this['usage']=_0x47f379,this['id']=ET++,this['impl']=_0x5d405b['createInde'+'xBufferImp'+'l'](this,_0x1d40f0);const _0x1947f4=Px[_0x519071];this['bytesPerIn'+'dex']=_0x1947f4,this['numBytes']=this['numIndices']*_0x1947f4,_0x43eb5f?this['setData'](_0x43eb5f):this['storage']=new ArrayBuffer(this['numBytes']),this['adjustVram'+'SizeTracki'+'ng'](_0x5d405b['_vram'],this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x5ed62a=this['device'],_0xd68b6f=_0x5ed62a['buffers']['indexOf'](this);_0xd68b6f!==-(0x21c7*-0x1+0x23aa+-0x2*0xf1)&&_0x5ed62a['buffers']['splice'](_0xd68b6f,0x1*0x2063+-0xea4+-0x1*0x11be),this['device']['indexBuffe'+'r']===this&&(this['device']['indexBuffe'+'r']=null),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x5ed62a),this['adjustVram'+'SizeTracki'+'ng'](_0x5ed62a['_vram'],-this['storage']['byteLength']));}['adjustVram'+'SizeTracki'+'ng'](_0x4b6e90,_0x1fdae4){w['trace'](f0,this['id']+'\x20size:\x20'+_0x1fdae4+'\x20vram.ib:\x20'+_0x4b6e90['ib']+'\x20=>\x20'+(_0x4b6e90['ib']+_0x1fdae4)),_0x4b6e90['ib']+=_0x1fdae4;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getNumIndi'+'ces'](){return this['numIndices'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x2e6f2f){return _0x2e6f2f['byteLength']!==this['numBytes']?(w['error']('IndexBuffe'+'r:\x20wrong\x20i'+'nitial\x20dat'+'a\x20size:\x20ex'+'pected\x20'+this['numBytes']+',\x20got\x20'+_0x2e6f2f['byteLength']),!(-0x6*0x14a+-0x13d1+0x1b8e)):(this['storage']=_0x2e6f2f,this['unlock'](),!(0x1ba2+-0x96d+0x1*-0x1235));}['_lockTyped'+'Array'](){const _0x58f08d=this['lock']();return this['format']===yr?new Uint32Array(_0x58f08d):this['format']===ji?new Uint16Array(_0x58f08d):new Uint8Array(_0x58f08d);}['writeData'](_0x243bcd,_0xb84ef8){const _0x5c7137=this['_lockTyped'+'Array']();if(_0x243bcd['length']>_0xb84ef8){if(ArrayBuffer['isView'](_0x243bcd))_0x243bcd=_0x243bcd['subarray'](0x14*0x1ca+0x3b2+-0x277a,_0xb84ef8),_0x5c7137['set'](_0x243bcd);else{for(let _0x551464=0x3*-0x90d+0x8*-0x3fe+-0x7*-0x871;_0x551464<_0xb84ef8;_0x551464++)_0x5c7137[_0x551464]=_0x243bcd[_0x551464];}}else _0x5c7137['set'](_0x243bcd);this['unlock']();}['readData'](_0x7edf34){const _0x1a77f0=this['_lockTyped'+'Array'](),_0x487826=this['numIndices'];if(ArrayBuffer['isView'](_0x7edf34))_0x7edf34['set'](_0x1a77f0);else{_0x7edf34['length']=0x131f+-0x1*-0x563+-0x1882;for(let _0x53eb94=-0x114f+-0xe03+-0x26*-0xd3;_0x53eb94<_0x487826;_0x53eb94++)_0x7edf34[_0x53eb94]=_0x1a77f0[_0x53eb94];}return _0x487826;}}class bT{constructor(){h(this,'clearValue',new ie(0x1e48+-0x258c+-0x3*-0x26c,-0x1*-0x1d2d+0x2663+-0x4*0x10e4,0x1d7f+-0x2265*-0x1+-0x3fe4,0x299+0x7*-0x427+0x1a79)),h(this,'clearValue'+'Linear',new ie(0x238e+0x43*0x6f+-0x409b,0x1c9d*-0x1+-0x1db2+0x3a4f,0x12a2+0x3*0x7da+-0x2a30,0x17c*-0x2+-0xa0a+0xd03*0x1)),h(this,'clear',!(0x1*0x1e7e+-0x1*0x89e+0x1fd*-0xb)),h(this,'store',!(0x6b6+-0x254f+0x1e9a)),h(this,'resolve',!(-0xb47*0x2+-0xd58+0x23e6)),h(this,'genMipmaps',!(-0x1*0x39b+-0x1489*-0x1+-0x10ed*0x1));}}class AT{constructor(){h(this,'clearDepth'+'Value',0x4*0xb7+0xbf5+-0xed0),h(this,'clearStenc'+'ilValue',-0x97d*-0x2+-0x261+-0x1099),h(this,'clearDepth',!(0x73*-0xb+0x20ae+-0x1bbc)),h(this,'clearStenc'+'il',!(-0x1*-0x20c6+-0x44*-0x79+-0x40e9)),h(this,'storeDepth',!(-0xc68+-0x1ca6+0x290f)),h(this,'resolveDep'+'th',!(0xca1+-0x22ed*0x1+0x164d)),h(this,'storeStenc'+'il',!(-0x135*-0xb+0x1992+-0x9b6*0x4));}}class ys{constructor(_0x2b6094){h(this,'_name'),h(this,'device'),h(this,'_enabled',!(-0x22*0x20+0x17c9+0x1389*-0x1)),h(this,'_skipStart',!(-0x5*0x22a+-0x208c+0x2b5f*0x1)),h(this,'_skipEnd',!(0x424+-0x165c+-0x3*-0x613)),h(this,'executeEna'+'bled',!(-0x7e2+-0x3*-0xb3f+0x1*-0x19db)),h(this,'renderTarg'+'et'),h(this,'_options'),h(this,'samples',-0xe91+-0x1ac6+0x2957),h(this,'colorArray'+'Ops',[]),h(this,'depthStenc'+'ilOps'),h(this,'requiresCu'+'bemaps',!(0x6*0x13+0xa12+0x542*-0x2)),h(this,'fullSizeCl'+'earRect',!(-0x542+-0x1de9+0x232b)),h(this,'beforePass'+'es',[]),h(this,'afterPasse'+'s',[]),(w['assert'](_0x2b6094),this['device']=_0x2b6094);}get['colorOps'](){return this['colorArray'+'Ops'][0x10c1+0x1305+-0x23c6];}set['name'](_0x5f0b21){this['_name']=_0x5f0b21;}get['name'](){return this['_name']||(this['_name']=this['constructo'+'r']['name']),this['_name'];}set['scaleX'](_0x977f56){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleX']=_0x977f56;}get['scaleX'](){return this['_options']['scaleX'];}set['scaleY'](_0x18bc9d){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleY']=_0x18bc9d;}get['scaleY'](){return this['_options']['scaleY'];}set['options'](_0x8f4109){this['_options']=_0x8f4109,_0x8f4109&&(this['scaleX']=this['scaleX']??0x1b7*-0xb+-0x347*0x3+0x4f*0x5d,this['scaleY']=this['scaleY']??-0x4d*-0xb+0x43*0x6b+-0x1f4f);}get['options'](){return this['_options'];}['init'](_0x3b9567=null,_0x307e3a){this['options']=_0x307e3a,this['renderTarg'+'et']=_0x3b9567,this['samples']=Math['max'](this['renderTarg'+'et']?this['renderTarg'+'et']['samples']:this['device']['samples'],0xfd4*0x1+0x5*0x74b+-0x344a),this['allocateAt'+'tachments'](),this['postInit']();}['allocateAt'+'tachments'](){var _0x531cca,_0xbd455c,_0xe0ebb3,_0x5f3e37;const _0x534a67=this['renderTarg'+'et'];this['depthStenc'+'ilOps']=new AT(),_0x534a67!=null&&_0x534a67['depthBuffe'+'r']&&(this['depthStenc'+'ilOps']['storeDepth']=!(0xe27*-0x1+0x2d*-0x12+0x1151));const _0x39ca8b=_0x534a67?((_0x531cca=_0x534a67['_colorBuff'+'ers'])==null?void(0x91f+0x1ce7+0x3e*-0x9d):_0x531cca['length'])??-0x16b2+-0x15e5+0x1*0x2c97:0x228e*0x1+-0x1a17+-0x876;this['colorArray'+'Ops']['length']=-0x7b*0x3a+0x6ad*0x2+0x3a1*0x4;for(let _0x400596=0x1190+-0x1691+-0x3d*-0x15;_0x400596<_0x39ca8b;_0x400596++){const _0x278ea3=new bT();this['colorArray'+'Ops'][_0x400596]=_0x278ea3,this['samples']===-0x59f+0x13f*0x1+0x461&&(_0x278ea3['store']=!(-0x633+-0x10*-0xcb+-0x67d),_0x278ea3['resolve']=!(0x9cd+-0x1fef+-0x1*-0x1623));const _0x13d7f8=(_0xe0ebb3=(_0xbd455c=this['renderTarg'+'et'])==null?void(-0x2*0x124d+-0x1*0x1cc1+0x415b):_0xbd455c['_colorBuff'+'ers'])==null?void(-0x142d*0x1+-0xaa*0x2d+0x320f):_0xe0ebb3[_0x400596];if((_0x5f3e37=this['renderTarg'+'et'])!=null&&_0x5f3e37['mipmaps']&&(_0x13d7f8!=null&&_0x13d7f8['mipmaps'])){const _0x421062=rn(_0x13d7f8['_format']);_0x278ea3['genMipmaps']=!_0x421062;}}}['destroy'](){}['postInit'](){}['frameUpdat'+'e'](){if(this['_options']&&this['renderTarg'+'et']){const _0x25b815=this['_options']['resizeSour'+'ce']??this['device']['backBuffer'],_0x37f641=Math['floor'](_0x25b815['width']*this['scaleX']),_0xb4fa56=Math['floor'](_0x25b815['height']*this['scaleY']);this['renderTarg'+'et']['resize'](_0x37f641,_0xb4fa56);}}['before'](){}['execute'](){}['after'](){}['onEnable'](){}['onDisable'](){}set['enabled'](_0x4e9f43){this['_enabled']!==_0x4e9f43&&(this['_enabled']=_0x4e9f43,_0x4e9f43?this['onEnable']():this['onDisable']());}get['enabled'](){return this['_enabled'];}['setClearCo'+'lor'](_0xe5ef00){const _0x35230d=this['colorArray'+'Ops']['length'];for(let _0x1ae414=-0xfd*-0x25+-0xf6+-0x239b;_0x1ae414<_0x35230d;_0x1ae414++){const _0x1e7d5d=this['colorArray'+'Ops'][_0x1ae414];_0xe5ef00&&(_0x1e7d5d['clearValue']['copy'](_0xe5ef00),_0x1e7d5d['clearValue'+'Linear']['linear'](_0xe5ef00)),_0x1e7d5d['clear']=!!_0xe5ef00;}}['setClearDe'+'pth'](_0x2b3ec7){_0x2b3ec7&&(this['depthStenc'+'ilOps']['clearDepth'+'Value']=_0x2b3ec7),this['depthStenc'+'ilOps']['clearDepth']=_0x2b3ec7!==void(0x1*0x1247+0x2436+-0x367d);}['setClearSt'+'encil'](_0x54593f){_0x54593f&&(this['depthStenc'+'ilOps']['clearStenc'+'ilValue']=_0x54593f),this['depthStenc'+'ilOps']['clearStenc'+'il']=_0x54593f!==void(-0x6ed+0x99b+-0x2ae);}['render'](){if(this['enabled']){const _0x2e40f4=this['device'],_0x1b4c81=this['renderTarg'+'et']!==void(-0x2*-0xe82+-0x1*-0x2059+0x2ab*-0x17);w['call'](()=>{this['log'](_0x2e40f4,_0x2e40f4['renderPass'+'Index']);}),this['before'](),this['executeEna'+'bled']&&(_0x1b4c81&&!this['_skipStart']&&_0x2e40f4['startRende'+'rPass'](this),this['execute'](),_0x1b4c81&&!this['_skipEnd']&&_0x2e40f4['endRenderP'+'ass'](this)),this['after'](),_0x2e40f4['renderPass'+'Index']++;}}['log'](_0x3da0b4,_0x4b8ee5=-0xb24+-0xbd0+-0x1a*-0xe2){var _0x175706,_0x7166a5,_0x2d0daf;if(mi['get'](em)||mi['get'](tn)){const _0x28fad8=this['renderTarg'+'et']??(this['renderTarg'+'et']===null?_0x3da0b4['backBuffer']:null),_0x26cdcc=!!(_0x28fad8!=null&&_0x28fad8['impl']['assignedCo'+'lorTexture'])||(_0x28fad8==null?void(0x1093+-0x2380+0x12ed):_0x28fad8['impl']['suppliedCo'+'lorFramebu'+'ffer'])!==void(0x2*-0x332+-0x1fa*-0xd+-0x1*0x134e),_0x252f9f=((_0x175706=_0x28fad8==null?void(0xb64+-0x196+-0x1*0x9ce):_0x28fad8['_colorBuff'+'ers'])==null?void(-0x133*-0x1+-0xd12+-0x1*-0xbdf):_0x175706['length'])??(_0x26cdcc?-0x1*-0x4d6+0x27*0x67+-0x1486:-0x9*-0x2d5+0x20a9+-0x1362*0x3),_0x140416=_0x28fad8==null?void(0xcf1*-0x3+0x196d+0x157*0xa):_0x28fad8['depth'],_0x20154d=_0x28fad8==null?void(-0xec6+-0x38+0xefe):_0x28fad8['stencil'],_0x1e3706=_0x28fad8==null?void(-0x55+-0x1b9f+0x1bf4):_0x28fad8['mipLevel'],_0x22c421=_0x28fad8?'\x20RT:\x20'+(_0x28fad8?_0x28fad8['name']:'NULL')+'\x20'+(_0x252f9f>0x1c2c+-0x246b+0x83f?'[Color'+(_0x252f9f>-0x51f+0x1b*-0xd+-0x67f*-0x1?'\x20x\x20'+_0x252f9f:'')+']':'')+(_0x140416?'[Depth]':'')+(_0x20154d?'[Stencil]':'')+'\x20'+_0x28fad8['width']+'\x20x\x20'+_0x28fad8['height']+(this['samples']>-0x2684+-0xd7b+-0x30f*-0x11?'\x20samples:\x20'+this['samples']:'')+(_0x1e3706>0x261b+-0xb6c+-0x45*0x63?'\x20mipLevel:'+'\x20'+_0x1e3706:''):'',_0x4985c3=this['_skipStart']?'++':_0x4b8ee5['toString']()['padEnd'](0x21c5+-0xda6+-0x13*0x10f,'\x20');w['trace'](em,_0x4985c3+':\x20'+this['name']['padEnd'](-0x592+-0x1825*0x1+-0x1dcb*-0x1,'\x20')+(this['executeEna'+'bled']?'':'\x20DISABLED\x20')+_0x22c421['padEnd'](-0x5cf*-0x1+-0x1295+0xce4));for(let _0x9dfb31=-0x1*0x1d12+-0x513+0x2225;_0x9dfb31<_0x252f9f;_0x9dfb31++){const _0xfe6a6c=this['colorArray'+'Ops'][_0x9dfb31],_0x4cf696=(_0x7166a5=Nt['get'](_0x26cdcc?_0x3da0b4['backBuffer'+'Format']:_0x28fad8['getColorBu'+'ffer'](_0x9dfb31)['format']))==null?void(-0x38e+-0x1*-0x903+-0x575):_0x7166a5['name'];w['trace'](tn,'\x20\x20\x20\x20color['+_0x9dfb31+']:\x20'+(_0xfe6a6c['clear']?'clear':'load')+'->'+(_0xfe6a6c['store']?'store':'discard')+'\x20'+(_0xfe6a6c['resolve']?'resolve\x20':'')+(_0xfe6a6c['genMipmaps']?'mipmaps\x20':'')+'\x20[format:\x20'+_0x4cf696+']\x20'+(_0xfe6a6c['clear']?'[clear:\x20'+_0xfe6a6c['clearValue']['toString'](!(-0x1*0x1fab+-0x1646+-0x35f1*-0x1),!(-0x24e2+-0x374+0x2856))+']':''));}if(this['depthStenc'+'ilOps']){const _0x1009e6=''+(_0x28fad8['depthBuffe'+'r']?'\x20[format:\x20'+((_0x2d0daf=Nt['get'](_0x28fad8['depthBuffe'+'r']['format']))==null?void(-0xc7*-0x1e+0x102f*-0x1+-0x723):_0x2d0daf['name'])+']':'');_0x140416&&w['trace'](tn,'\x20\x20\x20\x20depthO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearDepth']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeDepth']?'store':'discard')+(this['depthStenc'+'ilOps']['resolveDep'+'th']?'\x20resolve':'')+_0x1009e6+(this['depthStenc'+'ilOps']['clearDepth']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearDepth'+'Value']+']':'')),_0x20154d&&w['trace'](tn,'\x20\x20\x20\x20stencO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeStenc'+'il']?'store':'discard')+_0x1009e6+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearStenc'+'ilValue']+']':''));}}}}function CT(_0x5193ee){this['array'][this['index']]=_0x5193ee;}function PT(_0x18b0bf,_0x40a947){this['array'][this['index']]=_0x18b0bf,this['array'][this['index']+(-0x39e*0x6+0x2335+-0xd80)]=_0x40a947;}function MT(_0x20f2d4,_0x24db65,_0x319f12){this['array'][this['index']]=_0x20f2d4,this['array'][this['index']+(-0x1705+0x109d*-0x1+-0x8b*-0x49)]=_0x24db65,this['array'][this['index']+(0xfe+0x2d*0xcd+-0x9*0x41d)]=_0x319f12;}function DT(_0x214d29,_0x291b05,_0x1f1c1,_0x462031){this['array'][this['index']]=_0x214d29,this['array'][this['index']+(0x26ba+0x2527*0x1+-0x10*0x4be)]=_0x291b05,this['array'][this['index']+(0x406+0x8b*-0x29+0x123f)]=_0x1f1c1,this['array'][this['index']+(0x1ff+-0xe*0x17f+0x12f6)]=_0x462031;}function IT(_0x1b9914,_0xb6677,_0x5951d2){this['array'][_0x1b9914]=_0xb6677[_0x5951d2];}function LT(_0x496817,_0x1cb3be,_0x11e02f){this['array'][_0x496817]=_0x1cb3be[_0x11e02f],this['array'][_0x496817+(0xee*-0x16+0x3cc+0x10a9*0x1)]=_0x1cb3be[_0x11e02f+(0x1eeb+-0x1*-0x1c0f+-0x3af9)];}function RT(_0x411ea,_0x4fac20,_0x1fd2c3){this['array'][_0x411ea]=_0x4fac20[_0x1fd2c3],this['array'][_0x411ea+(-0x1*0x1beb+-0x5*-0x1c9+0x12ff)]=_0x4fac20[_0x1fd2c3+(-0x6e5+-0x751*-0x1+-0x1*0x6b)],this['array'][_0x411ea+(0xa17+0xaa6*0x3+-0xcb*0x35)]=_0x4fac20[_0x1fd2c3+(0x17*-0xfe+-0x16*-0x15b+-0x37f*0x2)];}function OT(_0x12e756,_0x4a003f,_0x547826){this['array'][_0x12e756]=_0x4a003f[_0x547826],this['array'][_0x12e756+(-0xa34+0x226d+-0x1838)]=_0x4a003f[_0x547826+(-0x697+0xe3e+-0x2*0x3d3)],this['array'][_0x12e756+(-0x1090+0x67a+0x13*0x88)]=_0x4a003f[_0x547826+(0x1d7f+-0x2*0xfaf+-0x1e1*-0x1)],this['array'][_0x12e756+(0x4*0x1e7+0x2*-0x821+-0x2e3*-0x3)]=_0x4a003f[_0x547826+(0x5ad*-0x1+-0x18b2*0x1+0x2*0xf31)];}function FT(_0x4f568e,_0xca511a,_0x182a69){_0xca511a[_0x182a69]=this['array'][_0x4f568e];}function NT(_0x302558,_0x42736c,_0x277851){_0x42736c[_0x277851]=this['array'][_0x302558],_0x42736c[_0x277851+(-0x1615+-0x1ce3*0x1+0x32f9)]=this['array'][_0x302558+(0x7b9*-0x1+-0x1de4+0x259e)];}function kT(_0x1b3025,_0xb75ee6,_0x22a175){_0xb75ee6[_0x22a175]=this['array'][_0x1b3025],_0xb75ee6[_0x22a175+(0x15ad*-0x1+0x115a*-0x2+0x3862)]=this['array'][_0x1b3025+(-0x8*-0x3d8+-0xb06+-0x21*0x99)],_0xb75ee6[_0x22a175+(-0x15c*0xc+0x14d+0xf05*0x1)]=this['array'][_0x1b3025+(-0x1a0f*0x1+-0x130*0x15+0x3301)];}function UT(_0x3923bd,_0x3c9571,_0x1b0807){_0x3c9571[_0x1b0807]=this['array'][_0x3923bd],_0x3c9571[_0x1b0807+(0x3*-0x911+0x397*0x7+-0x3*-0xb1)]=this['array'][_0x3923bd+(-0x70b+-0x1fc3+0x7c3*0x5)],_0x3c9571[_0x1b0807+(-0x214d+-0x9a9*0x1+0x1f4*0x16)]=this['array'][_0x3923bd+(0x1705+-0x1b82*-0x1+-0x3285)],_0x3c9571[_0x1b0807+(0x77f*-0x5+-0x1*-0x1c03+0x329*0x3)]=this['array'][_0x3923bd+(-0x10*-0x1f7+-0xf85+-0xfe8)];}class BT{constructor(_0x211420,_0x27eae6,_0x200afd){switch(this['index']=-0x212e+0x1378+0xa*0x15f,this['numCompone'+'nts']=_0x27eae6['numCompone'+'nts'],_0x200afd['interleave'+'d']?this['array']=new _n[_0x27eae6['dataType']](_0x211420,_0x27eae6['offset']):this['array']=new _n[_0x27eae6['dataType']](_0x211420,_0x27eae6['offset'],_0x200afd['vertexCoun'+'t']*_0x27eae6['numCompone'+'nts']),this['stride']=_0x27eae6['stride']/this['array']['constructo'+'r']['BYTES_PER_'+'ELEMENT'],_0x27eae6['numCompone'+'nts']){case 0x16ca+-0x19aa+0x2e1:this['set']=CT,this['getToArray']=FT,this['setFromArr'+'ay']=IT;break;case-0x1281+0x252d+-0x12aa:this['set']=PT,this['getToArray']=NT,this['setFromArr'+'ay']=LT;break;case-0x117e+-0x3*-0xb86+-0x11*0x101:this['set']=MT,this['getToArray']=kT,this['setFromArr'+'ay']=RT;break;case-0x1*-0x1b3b+0x1c1d+-0x3754:this['set']=DT,this['getToArray']=UT,this['setFromArr'+'ay']=OT;break;}}['get'](_0x5818bf){return this['array'][this['index']+_0x5818bf];}['set'](_0x5b2996,_0x5687c2,_0x51f267,_0x1c9a98){}['getToArray'](_0x45a99c,_0x3ae4af,_0x391a45){}['setFromArr'+'ay'](_0xff0f73,_0x53db0c,_0x113b08){}}class Ao{constructor(_0x4fd0f6){this['vertexBuff'+'er']=_0x4fd0f6,this['vertexForm'+'atSize']=_0x4fd0f6['getFormat']()['size'],this['buffer']=this['vertexBuff'+'er']['lock'](),this['accessors']=[],this['element']={};const _0x390a86=this['vertexBuff'+'er']['getFormat']();for(let _0x280e5e=-0x52f*-0x3+-0x1*-0x1b3b+-0x2ac8;_0x280e5e<_0x390a86['elements']['length'];_0x280e5e++){const _0x2f1ba6=_0x390a86['elements'][_0x280e5e];this['accessors'][_0x280e5e]=new BT(this['buffer'],_0x2f1ba6,_0x390a86),this['element'][_0x2f1ba6['name']]=this['accessors'][_0x280e5e];}}['next'](_0x17d179=-0x377*0x1+-0x9fe+0xd76){let _0x1743ba=-0xae2+0xb0a+-0x28;const _0x1ffaba=this['accessors'],_0x1bfa33=this['accessors']['length'];for(;_0x1743ba<_0x1bfa33;){const _0x325706=_0x1ffaba[_0x1743ba++];_0x325706['index']+=_0x17d179*_0x325706['stride'];}}['end'](){this['vertexBuff'+'er']['unlock']();}['writeData'](_0x4ab9f8,_0x302a9c,_0x2803ae){const _0x278427=this['element'][_0x4ab9f8];if(_0x278427){_0x2803ae>this['vertexBuff'+'er']['numVertice'+'s']&&(w['error']('NumVertice'+'s\x20provided'+'\x20to\x20setDat'+'a:\x20'+_0x2803ae+('\x20is\x20larger'+'\x20than\x20spac'+'e\x20in\x20Verte'+'xBuffer:\x20')+this['vertexBuff'+'er']['numVertice'+'s']),_0x2803ae=this['vertexBuff'+'er']['numVertice'+'s']);const _0x3f93eb=_0x278427['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){let _0x1d2718=0x783*0x4+-0x3b*0x4f+-0xbd7;for(let _0x7b7aa=-0x14ab*-0x1+-0x91*-0x24+-0x290f;_0x7b7aa<_0x2803ae;_0x7b7aa++)_0x278427['setFromArr'+'ay'](_0x1d2718,_0x302a9c,_0x7b7aa*_0x3f93eb),_0x1d2718+=_0x278427['stride'];}else{if(_0x302a9c['length']>_0x2803ae*_0x3f93eb){const _0x4171e3=_0x2803ae*_0x3f93eb;if(ArrayBuffer['isView'](_0x302a9c))_0x302a9c=_0x302a9c['subarray'](-0x1d07+-0x13e5*-0x1+-0x491*-0x2,_0x4171e3),_0x278427['array']['set'](_0x302a9c);else{for(let _0x26835e=-0x1c27+0x199*-0x1+0x1dc0;_0x26835e<_0x4171e3;_0x26835e++)_0x278427['array'][_0x26835e]=_0x302a9c[_0x26835e];}}else _0x278427['array']['set'](_0x302a9c);}}}['readData'](_0x3220b7,_0x3ab168){const _0x286f03=this['element'][_0x3220b7];let _0x564b4d=-0xb1*-0x17+0x16*0x15+-0x11b5;if(_0x286f03){_0x564b4d=this['vertexBuff'+'er']['numVertice'+'s'];let _0x406a54;const _0x557b8e=_0x286f03['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){Array['isArray'](_0x3ab168)&&(_0x3ab168['length']=0x1a8d+-0x1*-0x13fc+-0x2e89),_0x286f03['index']=-0x415+0x1f50+-0x1b3b*0x1;let _0x23462a=0xec4+-0x69*-0x4f+-0x2f2b;for(_0x406a54=0x1754+-0xb5c+-0xbf8;_0x406a54<_0x564b4d;_0x406a54++)_0x286f03['getToArray'](_0x23462a,_0x3ab168,_0x406a54*_0x557b8e),_0x23462a+=_0x286f03['stride'];}else{if(ArrayBuffer['isView'](_0x3ab168))_0x3ab168['set'](_0x286f03['array']);else{_0x3ab168['length']=0x19fa+0xfb+-0x1af5;const _0xa0a9ab=_0x564b4d*_0x557b8e;for(_0x406a54=0x9*-0x1c6+-0x2693+0x3689;_0x406a54<_0xa0a9ab;_0x406a54++)_0x3ab168[_0x406a54]=_0x286f03['array'][_0x406a54];}}}return _0x564b4d;}}const zT=-(-0x2e7*0x5+-0x1dd7+0x2c5b);class VT{constructor(_0x154167,_0x51728b){h(this,'key',null),h(this,'element',null),h(this,'event',null),_0x51728b&&(this['key']=_0x51728b['keyCode'],this['element']=_0x51728b['target'],this['event']=_0x51728b);}}const Fl=new VT();function yd(_0x5d4f93){return Fl['key']=_0x5d4f93['keyCode'],Fl['element']=_0x5d4f93['target'],Fl['event']=_0x5d4f93,Fl;}function Nl(_0x5abf6d){return typeof _0x5abf6d=='string'?_0x5abf6d['toUpperCas'+'e']()['charCodeAt'](0x6b8+0x240b+0x3*-0xe41):_0x5abf6d;}const GT={0x9:'Tab',0xd:'Enter',0x10:'Shift',0x11:'Control',0x12:'Alt',0x1b:'Escape',0x25:'Left',0x26:'Up',0x27:'Right',0x28:'Down',0x2e:'Delete',0x5b:'Win'};class Nm extends me{constructor(_0x5e02ca,_0x4bbd59={}){super(),h(this,'_element',null),h(this,'_keymap',{}),h(this,'_lastmap',{}),(this['_keyDownHa'+'ndler']=this['_handleKey'+'Down']['bind'](this),this['_keyUpHand'+'ler']=this['_handleKey'+'Up']['bind'](this),this['_keyPressH'+'andler']=this['_handleKey'+'Press']['bind'](this),this['_visibilit'+'yChangeHan'+'dler']=this['_handleVis'+'ibilityCha'+'nge']['bind'](this),this['_windowBlu'+'rHandler']=this['_handleWin'+'dowBlur']['bind'](this),_0x5e02ca&&this['attach'](_0x5e02ca),this['preventDef'+'ault']=_0x4bbd59['preventDef'+'ault']||!(-0x19f4+0x1307*0x1+0x6ee),this['stopPropag'+'ation']=_0x4bbd59['stopPropag'+'ation']||!(-0x184d*-0x1+-0x13a8*-0x1+-0x3a*0xc2));}['attach'](_0x1f1d86){this['_element']&&this['detach'](),this['_element']=_0x1f1d86,this['_element']['addEventLi'+'stener']('keydown',this['_keyDownHa'+'ndler'],!(0x5ec*0x3+-0x227c+-0x10b9*-0x1)),this['_element']['addEventLi'+'stener']('keypress',this['_keyPressH'+'andler'],!(-0x947+-0xf3a+0x1882)),this['_element']['addEventLi'+'stener']('keyup',this['_keyUpHand'+'ler'],!(0x1a*-0x1b+-0x512+0x7d1)),document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x213+0xcb*0x12+-0x7*0x1be)),window['addEventLi'+'stener']('blur',this['_windowBlu'+'rHandler'],!(0x1*-0x982+-0x2c*0xd3+-0x1*-0x2dc7));}['detach'](){if(!this['_element']){w['warn']('Unable\x20to\x20'+'detach\x20key'+'board.\x20It\x20'+'is\x20not\x20att'+'ached\x20to\x20a'+'n\x20element.');return;}this['_element']['removeEven'+'tListener']('keydown',this['_keyDownHa'+'ndler']),this['_element']['removeEven'+'tListener']('keypress',this['_keyPressH'+'andler']),this['_element']['removeEven'+'tListener']('keyup',this['_keyUpHand'+'ler']),this['_element']=null,document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x11*-0x109+0x4cc+0xcce)),window['removeEven'+'tListener']('blur',this['_windowBlu'+'rHandler'],!(0x1c40+0x507+-0x2146));}['toKeyIdent'+'ifier'](_0x5a130e){_0x5a130e=Nl(_0x5a130e);const _0x36d6ad=GT[_0x5a130e['toString']()];if(_0x36d6ad)return _0x36d6ad;let _0x5ea278=_0x5a130e['toString'](-0xa4b+0x121*-0x9+0x1484)['toUpperCas'+'e']();const _0x593072=_0x5ea278['length'];for(let _0x83e7d5=-0x1a43+0x2470+-0x209*0x5;_0x83e7d5<0xfeb+0xb86+0x7*-0x3eb-_0x593072;_0x83e7d5++)_0x5ea278='0'+_0x5ea278;return'U+'+_0x5ea278;}['_handleKey'+'Down'](_0x238354){const _0x33b55a=_0x238354['keyCode']||_0x238354['charCode'];if(_0x33b55a===void(-0x268b+-0xe2*-0xd+-0x29*-0xa9))return;const _0x26c1e7=this['toKeyIdent'+'ifier'](_0x33b55a);this['_keymap'][_0x26c1e7]=!(-0x15*0x35+0x696+-0x23d),this['fire']('keydown',yd(_0x238354)),this['preventDef'+'ault']&&_0x238354['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x238354['stopPropag'+'ation']();}['_handleKey'+'Up'](_0x985c84){const _0x212f33=_0x985c84['keyCode']||_0x985c84['charCode'];if(_0x212f33===void(0x2*-0xe19+-0x14*0x1bf+0x3f1e))return;const _0x2c1f0b=this['toKeyIdent'+'ifier'](_0x212f33);delete this['_keymap'][_0x2c1f0b],this['fire']('keyup',yd(_0x985c84)),this['preventDef'+'ault']&&_0x985c84['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x985c84['stopPropag'+'ation']();}['_handleKey'+'Press'](_0x26f5fe){this['fire']('keypress',yd(_0x26f5fe)),this['preventDef'+'ault']&&_0x26f5fe['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x26f5fe['stopPropag'+'ation']();}['_handleVis'+'ibilityCha'+'nge'](){document['visibility'+'State']==='hidden'&&this['_handleWin'+'dowBlur']();}['_handleWin'+'dowBlur'](){this['_keymap']={},this['_lastmap']={};}['update'](){for(const _0x37bbfb in this['_lastmap'])delete this['_lastmap'][_0x37bbfb];for(const _0xa3c24d in this['_keymap'])this['_keymap']['hasOwnProp'+'erty'](_0xa3c24d)&&(this['_lastmap'][_0xa3c24d]=this['_keymap'][_0xa3c24d]);}['isPressed'](_0x25763f){const _0x1090db=Nl(_0x25763f),_0x4fda30=this['toKeyIdent'+'ifier'](_0x1090db);return!!this['_keymap'][_0x4fda30];}['wasPressed'](_0x35b2d9){const _0x2f4505=Nl(_0x35b2d9),_0x106c9a=this['toKeyIdent'+'ifier'](_0x2f4505);return!!this['_keymap'][_0x106c9a]&&!this['_lastmap'][_0x106c9a];}['wasRelease'+'d'](_0x10f1e1){const _0x1a01d0=Nl(_0x10f1e1),_0x508f92=this['toKeyIdent'+'ifier'](_0x1a01d0);return!this['_keymap'][_0x508f92]&&!!this['_lastmap'][_0x508f92];}}h(Nm,'EVENT_KEYD'+'OWN','keydown'),h(Nm,'EVENT_KEYU'+'P','keyup');function Lf(){return!!(document['pointerLoc'+'kElement']||document['mozPointer'+'LockElemen'+'t']||document['webkitPoin'+'terLockEle'+'ment']);}class Zr{constructor(_0x35b28f,_0x2822ff){h(this,'x',-0x1*0x266b+-0x1a21+-0x12*-0x396),h(this,'y',-0x1099*0x1+0xc96+0x403),h(this,'dx',0x3*0x38d+0x1*0x637+-0x10de),h(this,'dy',0x1*-0x1cea+0xbd3+0x23*0x7d),h(this,'button',zT),h(this,'wheelDelta',0x17*-0xb+0x253f+-0x7*0x52e),h(this,'element'),h(this,'ctrlKey',!(-0xc7*0x16+0x7*-0x1cd+-0x2*-0xedb)),h(this,'altKey',!(-0x16bb+0x1abb+-0x3ff)),h(this,'shiftKey',!(-0x1129+0x23c1+-0x1297)),h(this,'metaKey',!(-0x5*-0x177+0x3*-0x19f+-0x275)),h(this,'event');let _0x25614e={'x':0x0,'y':0x0};if(_0x2822ff){if(_0x2822ff instanceof Zr)throw Error('Expected\x20M'+'ouseEvent');_0x25614e=_0x35b28f['_getTarget'+'Coords'](_0x2822ff);}else _0x2822ff={};if(_0x25614e)this['x']=_0x25614e['x'],this['y']=_0x25614e['y'];else{if(Lf())this['x']=-0x24d8+-0x17*0xef+-0x1*-0x3a51,this['y']=-0x3c+-0x2611+0x264d;else return;}_0x2822ff['type']==='wheel'&&(_0x2822ff['deltaY']>-0x2d3*-0x1+-0x3*-0x661+-0x15f6?this['wheelDelta']=-0x1c2c+-0x39d+0x1*0x1fca:_0x2822ff['deltaY']<-0x1*-0x214c+0xfe9+-0x3135&&(this['wheelDelta']=-(-0xd*-0x1d3+-0x22a5+-0x3a5*-0x3))),Lf()?(this['dx']=_0x2822ff['movementX']||_0x2822ff['webkitMove'+'mentX']||_0x2822ff['mozMovemen'+'tX']||-0x1dbb+-0x1*-0xfce+-0xded*-0x1,this['dy']=_0x2822ff['movementY']||_0x2822ff['webkitMove'+'mentY']||_0x2822ff['mozMovemen'+'tY']||-0x4*0x6d+-0x76f+0x923):(this['dx']=this['x']-_0x35b28f['_lastX'],this['dy']=this['y']-_0x35b28f['_lastY']),(_0x2822ff['type']==='mousedown'||_0x2822ff['type']==='mouseup')&&(this['button']=_0x2822ff['button']),this['buttons']=_0x35b28f['_buttons']['slice'](-0xbc8*-0x2+0x1a9e*0x1+-0x1*0x322e),this['element']=_0x2822ff['target'],this['ctrlKey']=_0x2822ff['ctrlKey']??!(-0x629+-0x1b4*-0x2+0x2c2),this['altKey']=_0x2822ff['altKey']??!(0x18d*-0x11+-0x6e1*0x4+0x273*0x16),this['shiftKey']=_0x2822ff['shiftKey']??!(0x11ef+-0x1*0x1598+0x86*0x7),this['metaKey']=_0x2822ff['metaKey']??!(-0x2477+-0xd1*-0x21+0x987),this['event']=_0x2822ff;}}class kl extends me{constructor(_0xe53b66){super(),h(this,'_lastX',-0xbe0+0x1fb3+-0x13d3),h(this,'_lastY',0x2340*0x1+-0x2542+0x202),h(this,'_buttons',[!(0x1e84+-0xc63+-0x4*0x488),!(-0x790+0xf*-0xc7+0x2e*0x6b),!(-0xdf1*0x2+0x1e35+-0x16*0x1b)]),h(this,'_lastbutto'+'ns',[!(0x83+0x48b*0x3+-0xe23),!(-0x2f*-0x3d+0x238+0xd6a*-0x1),!(0x3*0x613+0x2f*0x59+0x1*-0x228f)]),h(this,'_target',null),h(this,'_attached',!(0x397*0x7+0x1*-0x1f47+-0x23*-0x2d)),(this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_contextMe'+'nuHandler']=_0x13b530=>{_0x13b530['preventDef'+'ault']();},this['attach'](_0xe53b66));}static['isPointerL'+'ocked'](){return Lf();}['attach'](_0x4989f5){if(this['_target']=_0x4989f5,this['_attached'])return;this['_attached']=!(-0x2*0xe05+0x7*-0x304+0x36*0xe9);const _0x46de69={'passive':!(-0x167+-0x9*0x4e+-0x162*-0x3)},_0x354977=Me['passiveEve'+'nts']?_0x46de69:!(0x225*-0x9+0x56f+0xddf);window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x354977),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x354977),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x354977),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x354977);}['detach'](){if(!this['_attached'])return;this['_attached']=!(-0x237*-0x5+0x1da3+0x1*-0x28b5),this['_target']=null;const _0x5c3f61={'passive':!(0x441*-0x1+0x235f+-0x1f1d)},_0x24f75c=Me['passiveEve'+'nts']?_0x5c3f61:!(0x1a71+-0xea4*-0x1+-0x2914);window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x24f75c),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x24f75c),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x24f75c),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x24f75c);}['disableCon'+'textMenu'](){this['_target']&&this['_target']['addEventLi'+'stener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enableCont'+'extMenu'](){this['_target']&&this['_target']['removeEven'+'tListener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enablePoin'+'terLock'](_0x421ee9,_0x4f3adb){if(!document['body']['requestPoi'+'nterLock']){_0x4f3adb&&_0x4f3adb();return;}const _0x3aefbf=()=>{_0x421ee9(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x3aefbf);},_0x16c8b3=()=>{_0x4f3adb(),document['removeEven'+'tListener']('pointerloc'+'kerror',_0x16c8b3);};_0x421ee9&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x3aefbf,!(-0x1a38*-0x1+-0x5*0x36f+-0x90c)),_0x4f3adb&&document['addEventLi'+'stener']('pointerloc'+'kerror',_0x16c8b3,!(0x5d2+-0xc*-0x1ec+-0x1ce1)),document['body']['requestPoi'+'nterLock']();}['disablePoi'+'nterLock'](_0x203084){if(!document['exitPointe'+'rLock'])return;const _0x84218f=()=>{_0x203084(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x84218f);};_0x203084&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x84218f,!(-0x245d*0x1+-0x201+-0x13*-0x205)),document['exitPointe'+'rLock']();}['update'](){this['_lastbutto'+'ns'][-0x1c7*0x2+-0x1*-0x1d91+-0x1*0x1a03]=this['_buttons'][0xacb*0x3+0x9c6+0x147*-0x21],this['_lastbutto'+'ns'][0x1f5*0x10+0x19d1+0x1c90*-0x2]=this['_buttons'][-0x1e20*0x1+-0x21+0x1e42],this['_lastbutto'+'ns'][-0x121d+0x102*-0xd+0x1f39]=this['_buttons'][-0x2a1*0x5+-0x5*0x499+0x2*0x1212];}['isPressed'](_0x39bb99){return this['_buttons'][_0x39bb99];}['wasPressed'](_0x3b9c94){return this['_buttons'][_0x3b9c94]&&!this['_lastbutto'+'ns'][_0x3b9c94];}['wasRelease'+'d'](_0x164143){return!this['_buttons'][_0x164143]&&this['_lastbutto'+'ns'][_0x164143];}['_handleUp'](_0x1fd658){this['_buttons'][_0x1fd658['button']]=!(-0x2374+0x339*0x2+0x1d03);const _0x16da2c=new Zr(this,_0x1fd658);_0x16da2c['event']&&this['fire']('mouseup',_0x16da2c);}['_handleDow'+'n'](_0x733b7b){this['_buttons'][_0x733b7b['button']]=!(0x15b5*-0x1+-0x3f*-0x5c+-0xef*0x1);const _0x238bcd=new Zr(this,_0x733b7b);_0x238bcd['event']&&this['fire']('mousedown',_0x238bcd);}['_handleMov'+'e'](_0x2f82d4){const _0x4c7ddb=new Zr(this,_0x2f82d4);_0x4c7ddb['event']&&(this['fire']('mousemove',_0x4c7ddb),this['_lastX']=_0x4c7ddb['x'],this['_lastY']=_0x4c7ddb['y']);}['_handleWhe'+'el'](_0x3eeeeb){const _0x1ddf9b=new Zr(this,_0x3eeeeb);_0x1ddf9b['event']&&this['fire']('mousewheel',_0x1ddf9b);}['_getTarget'+'Coords'](_0x581a29){const _0x2a59a7=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x556a16=Math['floor'](_0x2a59a7['left']),_0x5d5f6e=Math['floor'](_0x2a59a7['top']);return _0x581a29['clientX']<_0x556a16||_0x581a29['clientX']>=_0x556a16+this['_target']['clientWidt'+'h']||_0x581a29['clientY']<_0x5d5f6e||_0x581a29['clientY']>=_0x5d5f6e+this['_target']['clientHeig'+'ht']?null:{'x':_0x581a29['clientX']-_0x556a16,'y':_0x581a29['clientY']-_0x5d5f6e};}}h(kl,'EVENT_MOUS'+'EMOVE','mousemove'),h(kl,'EVENT_MOUS'+'EDOWN','mousedown'),h(kl,'EVENT_MOUS'+'EUP','mouseup'),h(kl,'EVENT_MOUS'+'EWHEEL','mousewheel');const Oe=class Oe{['get'](_0x9a7463,_0x68ab1b,_0x2bfbd1){typeof _0x68ab1b=='function'&&(_0x2bfbd1=_0x68ab1b,_0x68ab1b={});const _0x358a2e=this['request']('GET',_0x9a7463,_0x68ab1b,_0x2bfbd1),{progress:_0x1f7f19}=_0x68ab1b;if(_0x1f7f19){const _0x1a5e26=_0x1ec596=>{_0x1ec596['lengthComp'+'utable']&&_0x1f7f19['fire']('progress',_0x1ec596['loaded'],_0x1ec596['total']);},_0x40026f=_0x24a5a2=>{_0x1a5e26(_0x24a5a2),_0x358a2e['removeEven'+'tListener']('loadstart',_0x1a5e26),_0x358a2e['removeEven'+'tListener']('progress',_0x1a5e26),_0x358a2e['removeEven'+'tListener']('loadend',_0x40026f);};_0x358a2e['addEventLi'+'stener']('loadstart',_0x1a5e26),_0x358a2e['addEventLi'+'stener']('progress',_0x1a5e26),_0x358a2e['addEventLi'+'stener']('loadend',_0x40026f);}return _0x358a2e;}['post'](_0x4ceca4,_0x53ef24,_0x29445c,_0x33b731){return typeof _0x29445c=='function'&&(_0x33b731=_0x29445c,_0x29445c={}),_0x29445c['postdata']=_0x53ef24,this['request']('POST',_0x4ceca4,_0x29445c,_0x33b731);}['put'](_0x22ade4,_0x3e65d2,_0x5c7e31,_0x41b64c){return typeof _0x5c7e31=='function'&&(_0x41b64c=_0x5c7e31,_0x5c7e31={}),_0x5c7e31['postdata']=_0x3e65d2,this['request']('PUT',_0x22ade4,_0x5c7e31,_0x41b64c);}['del'](_0x425769,_0x2f5b6e,_0x267d67){return typeof _0x2f5b6e=='function'&&(_0x267d67=_0x2f5b6e,_0x2f5b6e={}),this['request']('DELETE',_0x425769,_0x2f5b6e,_0x267d67);}['request'](_0x1bed5c,_0x9bb387,_0x2bc88e,_0x4597b9){let _0x32f1c9,_0x1e4b5f,_0x228b4c,_0x54e6fc=!(0x253a+0x6*-0x11+-0x24d3);if(typeof _0x2bc88e=='function'&&(_0x4597b9=_0x2bc88e,_0x2bc88e={}),_0x2bc88e['retry']&&(_0x2bc88e=Object['assign']({'retries':0x0,'maxRetries':0x5},_0x2bc88e)),_0x2bc88e['callback']=_0x4597b9,_0x2bc88e['async']==null&&(_0x2bc88e['async']=!(0x1d0d+0x2ec+0x665*-0x5)),_0x2bc88e['headers']==null&&(_0x2bc88e['headers']={}),_0x2bc88e['postdata']!=null){if(_0x2bc88e['postdata']instanceof Document)_0x228b4c=_0x2bc88e['postdata'];else{if(_0x2bc88e['postdata']instanceof FormData)_0x228b4c=_0x2bc88e['postdata'];else{if(_0x2bc88e['postdata']instanceof Object){let _0x34e3e8=_0x2bc88e['headers']['Content-Ty'+'pe'];switch(_0x34e3e8===void(0x2*-0x12b5+-0x1*-0x12d1+-0x1*-0x1299)&&(_0x2bc88e['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED'],_0x34e3e8=_0x2bc88e['headers']['Content-Ty'+'pe']),_0x34e3e8){case Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED']:{_0x228b4c='';let _0x449ed8=!(-0x15ec+-0xc9*0x1b+-0x2b1f*-0x1);for(const _0x5b2f5e in _0x2bc88e['postdata'])if(_0x2bc88e['postdata']['hasOwnProp'+'erty'](_0x5b2f5e)){_0x449ed8?_0x449ed8=!(-0x531+0x127*-0xf+0x1*0x167b):_0x228b4c+='&';const _0x49864b=encodeURIComponent(_0x5b2f5e),_0x45763c=encodeURIComponent(_0x2bc88e['postdata'][_0x5b2f5e]);_0x228b4c+=_0x49864b+'='+_0x45763c;}break;}default:case Oe['ContentTyp'+'e']['JSON']:_0x34e3e8==null&&(_0x2bc88e['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['JSON']),_0x228b4c=JSON['stringify'](_0x2bc88e['postdata']);break;}}else _0x228b4c=_0x2bc88e['postdata'];}}}if(_0x2bc88e['cache']===!(0x6*0x255+-0xc2*0x12+-0x59)){const _0x403d02=de();_0x32f1c9=new dd(_0x9bb387),_0x32f1c9['query']?_0x32f1c9['query']=_0x32f1c9['query']+'&ts='+_0x403d02:_0x32f1c9['query']='ts='+_0x403d02,_0x9bb387=_0x32f1c9['toString']();}_0x2bc88e['query']&&(_0x32f1c9=new dd(_0x9bb387),_0x1e4b5f=kc(_0x32f1c9['getQuery'](),_0x2bc88e['query']),_0x32f1c9['setQuery'](_0x1e4b5f),_0x9bb387=_0x32f1c9['toString']());const _0x164b0b=new XMLHttpRequest();_0x164b0b['open'](_0x1bed5c,_0x9bb387,_0x2bc88e['async']),_0x164b0b['withCreden'+'tials']=_0x2bc88e['withCreden'+'tials']!==void(-0x12ec*0x1+-0x160d*-0x1+0x59*-0x9)?_0x2bc88e['withCreden'+'tials']:!(-0x1*0xb83+0xcb1+-0x12d),_0x164b0b['responseTy'+'pe']=_0x2bc88e['responseTy'+'pe']||this['_guessResp'+'onseType'](_0x9bb387);for(const _0x5ca30a in _0x2bc88e['headers'])_0x2bc88e['headers']['hasOwnProp'+'erty'](_0x5ca30a)&&_0x164b0b['setRequest'+'Header'](_0x5ca30a,_0x2bc88e['headers'][_0x5ca30a]);_0x164b0b['onreadysta'+'techange']=()=>{this['_onReadySt'+'ateChange'](_0x1bed5c,_0x9bb387,_0x2bc88e,_0x164b0b);},_0x164b0b['onerror']=()=>{this['_onError'](_0x1bed5c,_0x9bb387,_0x2bc88e,_0x164b0b),_0x54e6fc=!(0x1c65+0x103f+0x1*-0x2ca4);};try{_0x164b0b['send'](_0x228b4c);}catch(_0x1eaf21){_0x54e6fc||_0x2bc88e['error'](_0x164b0b['status'],_0x164b0b,_0x1eaf21);}return _0x164b0b;}['_guessResp'+'onseType'](_0x4dffb9){const _0x5b3f25=new dd(_0x4dffb9),_0x4cdb15=xe['getExtensi'+'on'](_0x5b3f25['path'])['toLowerCas'+'e']();return Oe['binaryExte'+'nsions']['indexOf'](_0x4cdb15)>=-0x2e8*-0x2+0x107a+0x6*-0x3b7?Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x4cdb15==='.json'?Oe['ResponseTy'+'pe']['JSON']:_0x4cdb15==='.xml'?Oe['ResponseTy'+'pe']['DOCUMENT']:Oe['ResponseTy'+'pe']['TEXT'];}['_isBinaryC'+'ontentType'](_0x3b91ff){return[Oe['ContentTyp'+'e']['BASIS'],Oe['ContentTyp'+'e']['BIN'],Oe['ContentTyp'+'e']['DDS'],Oe['ContentTyp'+'e']['GLB'],Oe['ContentTyp'+'e']['MP3'],Oe['ContentTyp'+'e']['MP4'],Oe['ContentTyp'+'e']['OGG'],Oe['ContentTyp'+'e']['OPUS'],Oe['ContentTyp'+'e']['WAV']]['indexOf'](_0x3b91ff)>=0x250e+0x472*0x2+-0x2df2;}['_isBinaryR'+'esponseTyp'+'e'](_0x4c47e9){return _0x4c47e9===Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']||_0x4c47e9===Oe['ResponseTy'+'pe']['BLOB']||_0x4c47e9===Oe['ResponseTy'+'pe']['JSON'];}['_onReadySt'+'ateChange'](_0x4cbff1,_0x39c689,_0x30b9b9,_0x5bba5b){if(_0x5bba5b['readyState']===-0x1*0xce1+-0x5*-0x773+-0x40f*0x6)switch(_0x5bba5b['status']){case 0x77*-0x22+0x4f*0x1+-0x1*-0xf7f:{_0x5bba5b['responseUR'+'L']&&_0x5bba5b['responseUR'+'L']['startsWith']('file:///')?this['_onSuccess'](_0x4cbff1,_0x39c689,_0x30b9b9,_0x5bba5b):this['_onError'](_0x4cbff1,_0x39c689,_0x30b9b9,_0x5bba5b);break;}case 0x17c8+0x1ef+-0x18ef:case 0xc9a+0x9d*-0x1d+0x5f8*0x1:case 0x2*0x1107+-0xf00+-0x2*0x920:case 0x1b94+0x1a90+-0x2*0x1a7a:{this['_onSuccess'](_0x4cbff1,_0x39c689,_0x30b9b9,_0x5bba5b);break;}default:{this['_onError'](_0x4cbff1,_0x39c689,_0x30b9b9,_0x5bba5b);break;}}}['_onSuccess'](_0xe75c34,_0x162432,_0x1405bf,_0x13fb21){let _0x57cdab,_0x40fac1;const _0x528b36=_0x13fb21['getRespons'+'eHeader']('Content-Ty'+'pe');_0x528b36&&(_0x40fac1=_0x528b36['split'](';')[-0x1*0x23a3+-0x1283+0x3626]['trim']());try{this['_isBinaryC'+'ontentType'](_0x40fac1)||this['_isBinaryR'+'esponseTyp'+'e'](_0x13fb21['responseTy'+'pe'])?_0x57cdab=_0x13fb21['response']:_0x40fac1===Oe['ContentTyp'+'e']['JSON']||_0x162432['split']('?')[-0x2bb+0x7ab+0x10*-0x4f]['endsWith']('.json')?_0x57cdab=JSON['parse'](_0x13fb21['responseTe'+'xt']):_0x13fb21['responseTy'+'pe']===Oe['ResponseTy'+'pe']['DOCUMENT']||_0x40fac1===Oe['ContentTyp'+'e']['XML']?_0x57cdab=_0x13fb21['responseXM'+'L']:_0x57cdab=_0x13fb21['responseTe'+'xt'],_0x1405bf['callback'](null,_0x57cdab);}catch(_0x1e37dc){_0x1405bf['callback'](_0x1e37dc);}}['_onError'](_0x47b940,_0x32223c,_0x1dae84,_0x37d8ea){if(!_0x1dae84['retrying']){if(_0x1dae84['retry']&&_0x1dae84['retries']<_0x1dae84['maxRetries']){_0x1dae84['retries']++,_0x1dae84['retrying']=!(-0x972*0x2+-0x1384+0x2668);const _0x2ac711=Y['clamp'](Math['pow'](0x1*0x1e0d+0x45*0x7+0x1*-0x1fee,_0x1dae84['retries'])*Oe['retryDelay'],0x14f6*-0x1+0x63e+-0x1d7*-0x8,_0x1dae84['maxRetryDe'+'lay']||-0x1268+0x660+-0x4*-0x7e4);console['log'](_0x47b940+':\x20'+_0x32223c+'\x20-\x20Error\x20'+_0x37d8ea['status']+('.\x20Retrying'+'\x20in\x20')+_0x2ac711+'\x20ms'),setTimeout(()=>{_0x1dae84['retrying']=!(0x23d3*-0x1+-0x1d55+0x1*0x4129),this['request'](_0x47b940,_0x32223c,_0x1dae84,_0x1dae84['callback']);},_0x2ac711);}else _0x1dae84['callback'](_0x37d8ea['status']===-0xd57+0x26ca+0x1973*-0x1?'Network\x20er'+'ror':_0x37d8ea['status'],null);}}};h(Oe,'ContentTyp'+'e',{'AAC':'audio/aac','BASIS':'image/basi'+'s','BIN':'applicatio'+'n/octet-st'+'ream','DDS':'image/dds','FORM_URLENCODED':'applicatio'+'n/x-www-fo'+'rm-urlenco'+'ded','GIF':'image/gif','GLB':'model/gltf'+'-binary','JPEG':'image/jpeg','JSON':'applicatio'+'n/json','MP3':'audio/mpeg','MP4':'audio/mp4','OGG':'audio/ogg','OPUS':'audio/ogg;'+'\x20codecs=\x22o'+'pus\x22','PNG':'image/png','TEXT':'text/plain','WAV':'audio/x-wa'+'v','XML':'applicatio'+'n/xml'}),h(Oe,'ResponseTy'+'pe',{'TEXT':'text','ARRAY_BUFFER':'arraybuffe'+'r','BLOB':'blob','DOCUMENT':'document','JSON':'json'}),h(Oe,'binaryExte'+'nsions',['.model','.wav','.ogg','.mp3','.mp4','.m4a','.aac','.dds','.basis','.glb','.opus']),h(Oe,'retryDelay',-0x270+-0x7*0x3cb+0x1d61);let Is=Oe;const ot=new Is(),pp='linear',HT='inverse',WT='exponentia'+'l';class $T{constructor(_0x1f3aa6){h(this,'_manager'),h(this,'position',new D()),h(this,'orientatio'+'n',new te()),this['_manager']=_0x1f3aa6;}['getPositio'+'n'](){return this['position'];}['setPositio'+'n'](_0x5b27bb){this['position']['copy'](_0x5b27bb);const _0xb9acd2=this['listener'];_0xb9acd2&&('positionX'in _0xb9acd2?(_0xb9acd2['positionX']['value']=_0x5b27bb['x'],_0xb9acd2['positionY']['value']=_0x5b27bb['y'],_0xb9acd2['positionZ']['value']=_0x5b27bb['z']):_0xb9acd2['setPositio'+'n']&&_0xb9acd2['setPositio'+'n'](_0x5b27bb['x'],_0x5b27bb['y'],_0x5b27bb['z']));}['setOrienta'+'tion'](_0x38f763){this['orientatio'+'n']['copy'](_0x38f763);const _0x20537d=this['listener'];if(_0x20537d){const _0x3f89ea=_0x38f763['data'];'forwardX'in _0x20537d?(_0x20537d['forwardX']['value']=-_0x3f89ea[0xbbc+-0x459+-0x10d*0x7],_0x20537d['forwardY']['value']=-_0x3f89ea[0x391+-0x1c34+0x18ac],_0x20537d['forwardZ']['value']=-_0x3f89ea[0x152c+-0x20eb+-0xbc9*-0x1],_0x20537d['upX']['value']=_0x3f89ea[-0x1acd+0xd9*-0xd+0x25d6],_0x20537d['upY']['value']=_0x3f89ea[0x1*0x8f7+0x25df+-0x2ed1],_0x20537d['upZ']['value']=_0x3f89ea[-0x1b02+0x1*0xbcf+0x1b1*0x9]):_0x20537d['setOrienta'+'tion']&&_0x20537d['setOrienta'+'tion'](-_0x3f89ea[0x1*0x99d+0x122d+0x286*-0xb],-_0x3f89ea[0x4*-0x6c1+-0xb7a+-0x1*-0x2687],-_0x3f89ea[-0x1*-0x251a+0x1206*-0x1+-0x130a],_0x3f89ea[0x1*0xd46+0x1*-0x1777+0xa35],_0x3f89ea[-0x29*-0xae+-0x12f6*-0x2+-0x1*0x41c5],_0x3f89ea[-0x130f+-0x22c*-0x4+0xa65]);}}['getOrienta'+'tion'](){return this['orientatio'+'n'];}get['listener'](){const _0xc70f52=this['_manager']['context'];return _0xc70f52?_0xc70f52['listener']:null;}}const Ul='running',km=['click','touchstart','mousedown'];class XT extends me{constructor(){super(),this['_context']=null,this['AudioConte'+'xt']=typeof AudioContext<'u'&&AudioContext||typeof webkitAudioContext<'u'&&webkitAudioContext,this['AudioConte'+'xt']||w['warn']('No\x20support'+'\x20for\x203D\x20au'+'dio\x20found'),this['_unlockHan'+'dlerFunc']=this['_unlockHan'+'dler']['bind'](this),this['_userSuspe'+'nded']=!(-0x1fb*-0xd+-0x2*0x103+0x228*-0xb),this['listener']=new $T(this),this['_volume']=0x111d+0xb7c+-0x262*0xc;}set['volume'](_0x295fc9){_0x295fc9=Y['clamp'](_0x295fc9,0x1*-0x1af+-0x27f*0x2+0x6ad,-0x1351+0x1*0xd37+-0x1*-0x61b),this['_volume']=_0x295fc9,this['fire']('volumechan'+'ge',_0x295fc9);}get['volume'](){return this['_volume'];}get['suspended'](){return this['_userSuspe'+'nded'];}get['context'](){return!this['_context']&&this['AudioConte'+'xt']&&(this['_context']=new this['AudioConte'+'xt'](),this['_context']['state']!==Ul&&this['_registerU'+'nlockListe'+'ners']()),this['_context'];}['suspend'](){this['_userSuspe'+'nded']||(this['_userSuspe'+'nded']=!(-0x23a4+0x210f+-0x295*-0x1),this['_context']&&this['_context']['state']===Ul&&this['_suspend']());}['resume'](){this['_userSuspe'+'nded']&&(this['_userSuspe'+'nded']=!(-0x3b*-0x3b+0x1*0x1cdc+-0x2a74),this['_context']&&this['_context']['state']!==Ul&&this['_resume']());}['destroy'](){var _0x5cbcf5;this['fire']('destroy'),this['_context']&&(this['_removeUnl'+'ockListene'+'rs'](),(_0x5cbcf5=this['_context'])==null||_0x5cbcf5['close'](),this['_context']=null);}['_resume'](){this['_context']['resume']()['then'](()=>{const _0x20cae5=this['_context']['createBuff'+'erSource']();_0x20cae5['buffer']=this['_context']['createBuff'+'er'](-0xc17*0x3+0x2d*-0x4b+0x3175,-0x258f+0x1b9d+-0x1*-0x9f3,this['_context']['sampleRate']),_0x20cae5['connect'](this['_context']['destinatio'+'n']),_0x20cae5['start'](0x4d2+0x872+0x6a2*-0x2),_0x20cae5['onended']=_0x4cd57d=>{_0x20cae5['disconnect'](0x1440+-0x7f8+-0x624*0x2),this['fire']('resume');};},_0x47d3e1=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20it\x20'+'was\x20reject'+'ed\x20'+_0x47d3e1);})['catch'](_0x4913d6=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20thr'+'ew\x20an\x20exce'+'ption\x20'+_0x4913d6);});}['_suspend'](){this['_context']['suspend']()['then'](()=>{this['fire']('suspend');},_0x451373=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20i'+'t\x20was\x20reje'+'cted\x20'+_0x451373);})['catch'](_0x5bc96d=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20t'+'hrew\x20an\x20ex'+'ception\x20'+_0x5bc96d);});}['_unlockHan'+'dler'](){this['_removeUnl'+'ockListene'+'rs'](),!this['_userSuspe'+'nded']&&this['_context']['state']!==Ul&&this['_resume']();}['_registerU'+'nlockListe'+'ners'](){km['forEach'](_0x270eed=>{window['addEventLi'+'stener'](_0x270eed,this['_unlockHan'+'dlerFunc'],!(0x211e+0x12ae+-0x33cb));});}['_removeUnl'+'ockListene'+'rs'](){km['forEach'](_0x191b0c=>{window['removeEven'+'tListener'](_0x191b0c,this['_unlockHan'+'dlerFunc'],!(-0x623*-0x6+-0x1*-0x7fa+-0x2ccb));});}}class qT{constructor(_0x4d7067){h(this,'audio'),h(this,'buffer'),_0x4d7067 instanceof Audio?this['audio']=_0x4d7067:this['buffer']=_0x4d7067;}get['duration'](){let _0x38e414=0x86c+0x1*-0xf2e+0x2*0x361;return this['buffer']?_0x38e414=this['buffer']['duration']:this['audio']&&(_0x38e414=this['audio']['duration']),_0x38e414||-0x151*-0x14+-0x8+-0x44*0x63;}}function gl(){return typeof AudioContext<'u'||typeof webkitAudioContext<'u';}const Zt=0x65c+-0xecc*0x1+0x870,an=0xd*-0x1a+0x398+-0x245,Gs=-0x28b+0x176*-0x1+0x403;function es(_0x51079f,_0x581a1b){return _0x51079f%_0x581a1b||0x7b7*-0x4+0x11f1+-0x1*-0xceb;}class As extends me{constructor(_0xe7a204,_0x13d4b7,_0x4ed67b){super(),h(this,'source',null),(this['_manager']=_0xe7a204,this['_volume']=_0x4ed67b['volume']!==void(-0x779*-0x2+0x1789+0x1*-0x267b)?Y['clamp'](Number(_0x4ed67b['volume'])||0x23d1+-0x12c6+0x110b*-0x1,-0x657*0x1+0x15d7+-0xf80,0xa3f+0x922+0x1f0*-0xa):0x18ba+0x14a5+0x2d5e*-0x1,this['_pitch']=_0x4ed67b['pitch']!==void(-0x216f+0x1492+0x25*0x59)?Math['max'](0x11c8+0x169*0x1+-0x1331*0x1+0.01,Number(_0x4ed67b['pitch'])||0x8*-0x1c3+-0x16c5+0x24dd):0x13bb+-0x33*-0x9d+-0x4a3*0xb,this['_loop']=!!(_0x4ed67b['loop']!==void(0x5fb+-0x1*0xd9a+0x79f)&&_0x4ed67b['loop']),this['_sound']=_0x13d4b7,this['_state']=Gs,this['_suspended']=!(-0x14f2+0x54a*0x1+0x13*0xd3),this['_suspendEn'+'dEvent']=-0x7c9*-0x1+-0x19b*-0x18+-0xa7*0x47,this['_suspendIn'+'stanceEven'+'ts']=!(-0x1c6*0x1+0x34b+-0x184),this['_playWhenL'+'oaded']=!(0x8*-0x101+0x65b*0x1+0x1ad),this['_startTime']=Math['max'](-0x1*-0x1525+-0x17*-0x20+-0x1805,Number(_0x4ed67b['startTime'])||0x88b+-0x1e95*0x1+0x193*0xe),this['_duration']=Math['max'](-0x16c8+-0x1ad5+0x319d,Number(_0x4ed67b['duration'])||-0x195f+-0x213b+0x3a9a),this['_startOffs'+'et']=null,this['_onPlayCal'+'lback']=_0x4ed67b['onPlay'],this['_onPauseCa'+'llback']=_0x4ed67b['onPause'],this['_onResumeC'+'allback']=_0x4ed67b['onResume'],this['_onStopCal'+'lback']=_0x4ed67b['onStop'],this['_onEndCall'+'back']=_0x4ed67b['onEnd'],gl()?(this['_startedAt']=-0x37*0x11+-0x20ed+-0x925*-0x4,this['_currentTi'+'me']=0x1cca+-0x4*0x5+0xe*-0x20d,this['_currentOf'+'fset']=-0x2eb+-0xf2*-0x2+0x107,this['_inputNode']=null,this['_connector'+'Node']=null,this['_firstNode']=null,this['_lastNode']=null,this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x3*0x283+-0xbb0+0x2*0x214),this['_initializ'+'eNodes'](),this['_endedHand'+'ler']=this['_onEnded']['bind'](this)):(this['_isReady']=!(0x5c*0x3d+-0xb4a*-0x2+-0x2c7f),this['_loadedMet'+'adataHandl'+'er']=this['_onLoadedM'+'etadata']['bind'](this),this['_timeUpdat'+'eHandler']=this['_onTimeUpd'+'ate']['bind'](this),this['_endedHand'+'ler']=this['_onEnded']['bind'](this),this['_createSou'+'rce']()));}set['currentTim'+'e'](_0x402d4e){if(!(_0x402d4e<-0x1*0xd9f+0x7*0x14f+0x476)){if(this['_state']===Zt){const _0x34ad8d=this['_suspendIn'+'stanceEven'+'ts'];this['_suspendIn'+'stanceEven'+'ts']=!(-0x188f+-0xca9*0x2+0x31e1),this['stop'](),this['_startOffs'+'et']=_0x402d4e,this['play'](),this['_suspendIn'+'stanceEven'+'ts']=_0x34ad8d;}else this['_startOffs'+'et']=_0x402d4e,this['_currentTi'+'me']=_0x402d4e;}}get['currentTim'+'e'](){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===an?this['_currentTi'+'me']:this['_state']===Gs||!this['source']?0x1198+0x1*0x8b3+-0x1a4b*0x1:(this['_updateCur'+'rentTime'](),this['_currentTi'+'me']);}set['duration'](_0x286cae){this['_duration']=Math['max'](-0x6*0x641+0x3*0x9bc+0x852,Number(_0x286cae)||0x2565+0x64d+-0x2bb2);const _0x1af3c7=this['_state']===Zt;this['stop'](),_0x1af3c7&&this['play']();}get['duration'](){return this['_sound']?this['_duration']?es(this['_duration'],this['_sound']['duration']):this['_sound']['duration']:0x1*-0x26ae+-0x25cc+0x4c7a;}get['isPaused'](){return this['_state']===an;}get['isPlaying'](){return this['_state']===Zt;}get['isStopped'](){return this['_state']===Gs;}get['isSuspende'+'d'](){return this['_suspended'];}set['loop'](_0x137418){this['_loop']=!!_0x137418,this['source']&&(this['source']['loop']=this['_loop']);}get['loop'](){return this['_loop'];}set['pitch'](_0x2f66d0){this['_currentOf'+'fset']=this['currentTim'+'e'],this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_pitch']=Math['max'](Number(_0x2f66d0)||0x129b*0x1+-0xca*-0x1c+0x28b3*-0x1,-0x1777+0x18*0x18a+-0xd79+0.01),this['source']&&(this['source']['playbackRa'+'te']['value']=this['_pitch']);}get['pitch'](){return this['_pitch'];}set['sound'](_0x29ffba){this['_sound']=_0x29ffba,this['_state']!==Gs?this['stop']():this['_createSou'+'rce']();}get['sound'](){return this['_sound'];}set['startTime'](_0x1fe404){this['_startTime']=Math['max'](-0x1ff1+-0x2*-0xfd1+-0x1*-0x4f,Number(_0x1fe404)||-0x1*0x3e+-0x2613+0x2651);const _0x539d6a=this['_state']===Zt;this['stop'](),_0x539d6a&&this['play']();}get['startTime'](){return this['_startTime'];}set['volume'](_0x5e7fbf){_0x5e7fbf=Y['clamp'](_0x5e7fbf,-0x12e7+0x25a9+-0x2*0x961,0x2*0xd28+-0x1*-0x5fb+-0x204a),this['_volume']=_0x5e7fbf,this['gain']&&(this['gain']['gain']['value']=_0x5e7fbf*this['_manager']['volume']);}get['volume'](){return this['_volume'];}['_onPlay'](){this['fire']('play'),this['_onPlayCal'+'lback']&&this['_onPlayCal'+'lback'](this);}['_onPause'](){this['fire']('pause'),this['_onPauseCa'+'llback']&&this['_onPauseCa'+'llback'](this);}['_onResume'](){this['fire']('resume'),this['_onResumeC'+'allback']&&this['_onResumeC'+'allback'](this);}['_onStop'](){this['fire']('stop'),this['_onStopCal'+'lback']&&this['_onStopCal'+'lback'](this);}['_onEnded'](){if(this['_suspendEn'+'dEvent']>0x1*-0x1161+-0x1*0x21d7+0x3338){this['_suspendEn'+'dEvent']--;return;}this['fire']('end'),this['_onEndCall'+'back']&&this['_onEndCall'+'back'](this),this['stop']();}['_onManager'+'VolumeChan'+'ge'](){this['volume']=this['_volume'];}['_onManager'+'Suspend'](){this['_state']===Zt&&!this['_suspended']&&(this['_suspended']=!(-0x17*0x25+-0x220+0x573),this['pause']());}['_onManager'+'Resume'](){this['_suspended']&&(this['_suspended']=!(-0x22*0xaf+-0x1df3+0x3532),this['resume']());}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['_inputNode']=this['gain'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}['play'](){return this['_state']!==Gs&&this['stop'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0xc*0x8b+-0x2*-0x9eb+-0x1*0xd51),this['_waitingCo'+'ntextSuspe'+'nsion']?!(0x264a+0x25fd+0xd*-0x5de):this['_manager']['suspended']?(this['_manager']['once']('resume',this['_playAudio'+'Immediate'],this),this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x1046*-0x2+-0x2441+-0x1*-0x3b5),!(-0xb2*0x11+0x9a3+0x230)):(this['_playAudio'+'Immediate'](),!(0x14cf+0x1614+-0x2ae3*0x1));}['_playAudio'+'Immediate'](){if(this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x1e7+0x10*-0xa9+0xc78),this['_state']!==Zt)return;this['source']||this['_createSou'+'rce']();let _0x29b295=es(this['_startOffs'+'et'],this['duration']);_0x29b295=es(this['_startTime']+_0x29b295,this['_sound']['duration']),this['_startOffs'+'et']=null,this['_duration']?this['source']['start'](-0xb7e+0x14e+-0x8*-0x146,_0x29b295,this['_duration']):this['source']['start'](-0x6f8+0x1*0x10e1+0x2b*-0x3b,_0x29b295),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentTi'+'me']=-0xbe1+-0x728+0x1309,this['_currentOf'+'fset']=_0x29b295,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay']();}['pause'](){return this['_playWhenL'+'oaded']=!(0x138f+0x12ff+-0x268d),this['_state']!==Zt?!(0x716*0x2+-0x18d8+0xaad*0x1):(this['_state']=an,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_updateCur'+'rentTime'](),this['_suspendEn'+'dEvent']++,this['source']['stop'](-0x903+-0x1*0xe70+0x1773),this['source']=null,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause']()),!(-0x2136+0x18fe+0x838));}['resume'](){if(this['_state']!==an)return!(-0x3d*0x1b+0x1edd+-0xa9*0x25);let _0x4c4920=this['currentTim'+'e'];return this['_state']=Zt,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['source']||this['_createSou'+'rce'](),this['_startOffs'+'et']!==null&&(_0x4c4920=es(this['_startOffs'+'et'],this['duration']),_0x4c4920=es(this['_startTime']+_0x4c4920,this['_sound']['duration']),this['_startOffs'+'et']=null),this['_duration']?this['source']['start'](-0x43+0xba3*0x2+0x1703*-0x1,_0x4c4920,this['_duration']):this['source']['start'](-0x30+0x22b2+-0x2*0x1141,_0x4c4920),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentOf'+'fset']=_0x4c4920,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_playWhenL'+'oaded']=!(-0x276+-0x3*-0xa1f+-0x1be6),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(0x6be*-0x3+-0x1b93+-0x1*-0x2fcd);}['stop'](){if(this['_playWhenL'+'oaded']=!(0x3*-0xc9d+0xb11*-0x1+-0x1*-0x30e9),this['_state']===Gs)return!(0x2584+0x1*-0x49+-0x1*0x253a);const _0xf504e2=this['_state']===Zt;return this['_state']=Gs,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_startedAt']=-0x2*0x34a+0x1616+-0xf82,this['_currentTi'+'me']=-0x26e8+0x1a77+0x5*0x27d,this['_currentOf'+'fset']=0x5bb+-0x1c0f*-0x1+-0x21ca,this['_startOffs'+'et']=null,this['_suspendEn'+'dEvent']++,_0xf504e2&&this['source']&&this['source']['stop'](0x617*0x3+0x1*0xbed+-0x1e32*0x1),this['source']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop']()),!(0x6b*-0x4b+-0x1278+-0x75*-0x6d);}['setExterna'+'lNodes'](_0x4e51fa,_0x4a74c4){if(!_0x4e51fa){console['error']('The\x20firstN'+'ode\x20must\x20b'+'e\x20a\x20valid\x20'+'Audio\x20Node');return;}_0x4a74c4||(_0x4a74c4=_0x4e51fa);const _0x2d6caa=this['_manager']['context']['destinatio'+'n'];this['_firstNode']!==_0x4e51fa&&(this['_firstNode']?this['_connector'+'Node']['disconnect'](this['_firstNode']):this['_connector'+'Node']['disconnect'](_0x2d6caa),this['_firstNode']=_0x4e51fa,this['_connector'+'Node']['connect'](_0x4e51fa)),this['_lastNode']!==_0x4a74c4&&(this['_lastNode']&&this['_lastNode']['disconnect'](_0x2d6caa),this['_lastNode']=_0x4a74c4,this['_lastNode']['connect'](_0x2d6caa));}['clearExter'+'nalNodes'](){const _0x2e42cb=this['_manager']['context']['destinatio'+'n'];this['_firstNode']&&(this['_connector'+'Node']['disconnect'](this['_firstNode']),this['_firstNode']=null),this['_lastNode']&&(this['_lastNode']['disconnect'](_0x2e42cb),this['_lastNode']=null),this['_connector'+'Node']['connect'](_0x2e42cb);}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_createSou'+'rce'](){if(!this['_sound'])return null;const _0x4b67c9=this['_manager']['context'];return this['_sound']['buffer']&&(this['source']=_0x4b67c9['createBuff'+'erSource'](),this['source']['buffer']=this['_sound']['buffer'],this['source']['connect'](this['_inputNode']),this['source']['onended']=this['_endedHand'+'ler'],this['source']['loopStart']=es(this['_startTime'],this['source']['buffer']['duration']),this['_duration']&&(this['source']['loopEnd']=Math['max'](this['source']['loopStart'],es(this['_startTime']+this['_duration'],this['source']['buffer']['duration'])))),this['source'];}['_updateCur'+'rentTime'](){this['_currentTi'+'me']=es((this['_manager']['context']['currentTim'+'e']-this['_startedAt'])*this['_pitch']+this['_currentOf'+'fset'],this['duration']);}['_onManager'+'Destroy'](){this['source']&&this['_state']===Zt&&(this['source']['stop'](-0xb31*0x1+0x1c14+-0x10e3),this['source']=null);}}h(As,'EVENT_PLAY','play'),h(As,'EVENT_PAUS'+'E','pause'),h(As,'EVENT_RESU'+'ME','resume'),h(As,'EVENT_STOP','stop'),h(As,'EVENT_END','end'),gl()||(Object['assign'](As['prototype'],{'play':function(){return this['_state']!==Gs&&this['stop'](),!this['source']&&!this['_createSou'+'rce']()?!(-0x7d*-0x3a+-0x748+-0x435*0x5):(this['volume']=this['_volume'],this['pitch']=this['_pitch'],this['loop']=this['_loop'],this['source']['play'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(0x59*0x3a+-0xd*0x39+-0x451*0x4),this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_manager']['suspended']&&this['_onManager'+'Suspend'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay'](),!(-0x2219+-0x26d0+-0x1*-0x48e9));},'pause':function(){return!this['source']||this['_state']!==Zt?!(-0x3*0xa5+-0x495*0x2+0xb1a):(this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(-0x35*0x31+-0xfea+-0x1a1*-0x10),this['_state']=an,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause'](),!(-0x21e0+0x2121+0xbf));},'resume':function(){return!this['source']||this['_state']!==an?!(0x94*0x26+-0xbb*0x1+-0xc*0x1c5):(this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0x2060+-0x995*0x3+0x3d20),this['source']['paused']&&(this['source']['play'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(0x1*-0x1aee+0x1daf+-0x2c1));},'stop':function(){return!this['source']||this['_state']===Gs?!(-0x1934*-0x1+0x1acf+-0x3402):(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(0x1*-0x4fc+0x8*-0xd8+0xbbd),this['_state']=Gs,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop'](),!(0x49*-0x16+0x1*-0x1989+-0x1fcf*-0x1));},'setExternalNodes':function(){},'clearExternalNodes':function(){},'getExternalNodes':function(){return[null,null];},'_onLoadedMetadata':function(){this['source']['removeEven'+'tListener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['_isReady']=!(0x8a*0x32+0x14c8+-0x2fbc);let _0x5429f8=es(this['_startOffs'+'et'],this['duration']);_0x5429f8=es(this['_startTime']+_0x5429f8,this['_sound']['duration']),this['_startOffs'+'et']=null,this['source']['currentTim'+'e']=_0x5429f8;},'_createSource':function(){return this['_sound']&&this['_sound']['audio']&&(this['_isReady']=!(-0x1*-0x16c+0x1b8*0x5+0xb*-0xe9),this['source']=this['_sound']['audio']['cloneNode'](!(0x2692+-0x262d+-0x65*0x1)),this['source']['addEventLi'+'stener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['source']['addEventLi'+'stener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['onended']=this['_endedHand'+'ler']),this['source'];},'_onTimeUpdate':function(){this['_duration']&&this['source']['currentTim'+'e']>es(this['_startTime']+this['_duration'],this['source']['duration'])&&(this['loop']?this['source']['currentTim'+'e']=es(this['_startTime'],this['source']['duration']):(this['source']['removeEven'+'tListener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['pause'](),this['_onEnded']()));},'_onManagerDestroy':function(){this['source']&&this['source']['pause']();}}),Object['defineProp'+'erty'](As['prototype'],'volume',{'get':function(){return this['_volume'];},'set':function(_0x4d2762){_0x4d2762=Y['clamp'](_0x4d2762,0x728+0x2259+0x19*-0x1a9,-0x1c39+0x1*0x26d5+-0xa9b),this['_volume']=_0x4d2762,this['source']&&(this['source']['volume']=_0x4d2762*this['_manager']['volume']);}}),Object['defineProp'+'erty'](As['prototype'],'pitch',{'get':function(){return this['_pitch'];},'set':function(_0x214db4){this['_pitch']=Math['max'](Number(_0x214db4)||0x7a*-0xb+0x18cb+-0xd*0x181,-0x97b*-0x4+-0x164f+-0xf9d+0.01),this['source']&&(this['source']['playbackRa'+'te']=this['_pitch']);}}),Object['defineProp'+'erty'](As['prototype'],'sound',{'get':function(){return this['_sound'];},'set':function(_0x34dbc1){this['stop'](),this['_sound']=_0x34dbc1;}}),Object['defineProp'+'erty'](As['prototype'],'currentTim'+'e',{'get':function(){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Gs||!this['source']?0x2f3*0x7+0x9*-0x2a1+0xc1*0x4:this['source']['currentTim'+'e']-this['_startTime'];},'set':function(_0x2e36eb){_0x2e36eb<0x15fb+0x64*-0x5d+0xe59||(this['_startOffs'+'et']=_0x2e36eb,this['source']&&this['_isReady']&&(this['source']['currentTim'+'e']=es(this['_startTime']+es(_0x2e36eb,this['duration']),this['_sound']['duration']),this['_startOffs'+'et']=null));}}));const jT=-0x7e0+-0x3258+0x6148;class Ya extends As{constructor(_0x1b55ce,_0x336d9f,_0x1c3a7e={}){super(_0x1b55ce,_0x336d9f,_0x1c3a7e),h(this,'_position',new D()),h(this,'_velocity',new D()),(_0x1c3a7e['position']&&(this['position']=_0x1c3a7e['position']),this['maxDistanc'+'e']=_0x1c3a7e['maxDistanc'+'e']!==void(-0x6b5*0x2+-0x1bc4+0x292e*0x1)?Number(_0x1c3a7e['maxDistanc'+'e']):jT,this['refDistanc'+'e']=_0x1c3a7e['refDistanc'+'e']!==void(0xeb2+-0xd*0x26d+-0x10d7*-0x1)?Number(_0x1c3a7e['refDistanc'+'e']):0x4e*-0x61+0x244e*0x1+-0x6bf,this['rollOffFac'+'tor']=_0x1c3a7e['rollOffFac'+'tor']!==void(0x35*0xb3+0x568+-0x2a77)?Number(_0x1c3a7e['rollOffFac'+'tor']):0x1b37+0x103*-0x8+0x131e*-0x1,this['distanceMo'+'del']=_0x1c3a7e['distanceMo'+'del']!==void(-0x884+0x14b9+-0xc35)?_0x1c3a7e['distanceMo'+'del']:pp);}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['panner']=this['_manager']['context']['createPann'+'er'](),this['panner']['connect'](this['gain']),this['_inputNode']=this['panner'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}set['position'](_0x53e6bc){this['_position']['copy'](_0x53e6bc);const _0x14a282=this['panner'];'positionX'in _0x14a282?(_0x14a282['positionX']['value']=_0x53e6bc['x'],_0x14a282['positionY']['value']=_0x53e6bc['y'],_0x14a282['positionZ']['value']=_0x53e6bc['z']):_0x14a282['setPositio'+'n']&&_0x14a282['setPositio'+'n'](_0x53e6bc['x'],_0x53e6bc['y'],_0x53e6bc['z']);}get['position'](){return this['_position'];}set['velocity'](_0x1a1d64){w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity']['copy'](_0x1a1d64);}get['velocity'](){return w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity'];}set['maxDistanc'+'e'](_0x117f3e){this['panner']['maxDistanc'+'e']=_0x117f3e;}get['maxDistanc'+'e'](){return this['panner']['maxDistanc'+'e'];}set['refDistanc'+'e'](_0x2cadd8){this['panner']['refDistanc'+'e']=_0x2cadd8;}get['refDistanc'+'e'](){return this['panner']['refDistanc'+'e'];}set['rollOffFac'+'tor'](_0x195c9b){this['panner']['rolloffFac'+'tor']=_0x195c9b;}get['rollOffFac'+'tor'](){return this['panner']['rolloffFac'+'tor'];}set['distanceMo'+'del'](_0x153e8c){this['panner']['distanceMo'+'del']=_0x153e8c;}get['distanceMo'+'del'](){return this['panner']['distanceMo'+'del'];}}if(!gl()){let l=new D();const t=function(_0x4ea3f6,_0x53d42e,_0x2c3100,_0x151756,_0x4b772d,_0x372e6e){l=l['sub2'](_0x4ea3f6,_0x53d42e);const _0x318973=l['length']();if(_0x318973<_0x2c3100)return 0x18fb+-0x56*-0xe+0x1*-0x1dae;if(_0x318973>_0x151756)return 0x1fbb*0x1+-0xd98+-0x1223;let _0x429251=-0x1508*-0x1+-0x1cf7*0x1+0x7ef;return _0x372e6e===pp?_0x429251=-0xf73+0x7*0xe9+0x915-_0x4b772d*(_0x318973-_0x2c3100)/(_0x151756-_0x2c3100):_0x372e6e===HT?_0x429251=_0x2c3100/(_0x2c3100+_0x4b772d*(_0x318973-_0x2c3100)):_0x372e6e===WT&&(_0x429251=Math['pow'](_0x318973/_0x2c3100,-_0x4b772d)),Y['clamp'](_0x429251,0x126f+0x1e06+-0x3075,-0x2571+-0xb63+0x56d*0x9);};Object['defineProp'+'erty'](Ya['prototype'],'position',{'get':function(){return this['_position'];},'set':function(_0x26045d){if(this['_position']['copy'](_0x26045d),this['source']){const _0x476815=this['_manager']['listener']['getPositio'+'n'](),_0x36e870=t(_0x476815,this['_position'],this['refDistanc'+'e'],this['maxDistanc'+'e'],this['rollOffFac'+'tor'],this['distanceMo'+'del']),_0x1dc793=this['volume'];this['source']['volume']=_0x1dc793*_0x36e870*this['_manager']['volume'];}}}),Object['defineProp'+'erty'](Ya['prototype'],'maxDistanc'+'e',{'get':function(){return this['_maxDistan'+'ce'];},'set':function(_0x1932c1){this['_maxDistan'+'ce']=_0x1932c1;}}),Object['defineProp'+'erty'](Ya['prototype'],'refDistanc'+'e',{'get':function(){return this['_refDistan'+'ce'];},'set':function(_0x2d8808){this['_refDistan'+'ce']=_0x2d8808;}}),Object['defineProp'+'erty'](Ya['prototype'],'rollOffFac'+'tor',{'get':function(){return this['_rollOffFa'+'ctor'];},'set':function(_0x111af4){this['_rollOffFa'+'ctor']=_0x111af4;}}),Object['defineProp'+'erty'](Ya['prototype'],'distanceMo'+'del',{'get':function(){return this['_distanceM'+'odel'];},'set':function(_0x5c8e48){this['_distanceM'+'odel']=_0x5c8e48;}});}const mp=0xd7f+0x1*-0x26b1+0x1932,_p=0x1315+0x16a*-0xe+-0xb8*-0x1,Zs=-0x8ae+-0x204d+-0x28fd*-0x1,Cs=0x1*0x50f+0x1*-0x57+-0xf1*0x5,Fn=0x1bf5+-0xade*0x1+-0x1113,gp=0x4d*0x47+-0xd03+0x1*-0x853,sd=-0x725+0x1ec4+0x1799*-0x1,Sp=-0x2*-0x90c+0x189b+-0x2aac,yp=-0x107d+0x4*-0x94a+-0x5b*-0x97,vp=0x2*0xbf7+-0x1bf1*-0x1+0x33d6*-0x1,xp=0x1491+0x8*0x82+-0x1897,uy={[mp]:'SUBTRACTIV'+'E',[_p]:'ADDITIVE',[Zs]:'NORMAL',[Cs]:'NONE',[Fn]:'PREMULTIPL'+'IED',[gp]:'MULTIPLICA'+'TIVE',[sd]:'ADDITIVEAL'+'PHA',[Sp]:'MULTIPLICA'+'TIVE2X',[yp]:'SCREEN',[vp]:'MIN',[xp]:'MAX'},Hn='none',YT='linear',KT=-0x3b*0x73+-0x462*0x5+-0x306b*-0x1,Tp=-0x1ed5*-0x1+0x7ff+-0x1369*0x2,ZT={[KT]:'NONE',[Tp]:'SCHLICK'},QT=-0x1*0x144d+-0x1aa8*-0x1+-0x65b,py=-0x3aa+-0x3a6+0x75f,Ji=-0x20*0x10a+-0x2657+0x4797*0x1,ps=-0x238*0x8+-0x38b*-0x1+0xe36,wp=0x17*-0x27+-0x1*0x56b+-0x8ee*-0x1,Ep=-0x742+-0x2*-0xe0a+-0x7*0x2f9,Sl=0x63d*0x5+0x4a8*-0x7+0x16b,ve=-0x146d+-0x41*0x3d+0x23ea,Ke=0x1d2b+0x1*0x1e8b+-0x13e7*0x3,Ze=0x1e0c+-0x8d9+-0x1531,Um={[ve]:'DIRECTIONA'+'L',[Ke]:'OMNI',[Ze]:'SPOT'},wc=-0x106c+-0x6e2*-0x5+0x2ef*-0x6,js=0x1*0x632+-0x8*-0x8+-0x672,my=0x10bb+0x741+0x17fb*-0x1,_y=-0x1ecf+0x18af+0x622,gy=0xd82+0x2296+0x21*-0x175,JT={[js]:'PUNCTUAL',[my]:'RECT',[_y]:'DISK',[gy]:'SPHERE'},bp=0x1*-0x1bea+0x1a1b*0x1+-0x1*-0x1cf,Sy=0x23f2+0x1858+-0x3c49,ew={[bp]:'LINEAR',[Sy]:'INVERSESQU'+'ARED'},Ws=-0x2472+-0x2267+-0x1*-0x46d9,Rf=-0x5*-0x791+-0x4*0xbb+0x1*-0x22e7,Ap=0xa9b+0x12b+-0xbc3,tw=0xf11+0x2*0x62b+-0x1b63,yy=-0x1*0x2617+0x12e+0x24ee,Xo=-0x3*0xb15+0x1*0x1d9e+0x3a7,vy=-0x16b1+0x6de+0xfda,xy=0x19fb+-0x2641+0xc4e,sw=-0x13e8+0x478*0x4+0x211,Xi=new Map([[yy,{'name':'PCF1_32F','kind':'PCF1','format':Wi,'pcf':!(-0x3*0x73e+-0x19e4+0x2f9e)}],[Ws,{'name':'PCF3_32F','kind':'PCF3','format':Wi,'pcf':!(-0xc22+0x3*0x75a+-0x9ec)}],[tw,{'name':'PCF5_32F','kind':'PCF5','format':Wi,'pcf':!(0xab7+0x212b+-0x1*0x2be2)}],[vy,{'name':'PCF1_16F','kind':'PCF1','format':un,'pcf':!(0x331*0x3+0x527*-0x1+-0x46c)}],[xy,{'name':'PCF3_16F','kind':'PCF3','format':un,'pcf':!(-0x940*-0x4+-0x5d*-0x25+-0x3271)}],[sw,{'name':'PCF5_16F','kind':'PCF5','format':un,'pcf':!(-0x1cb4+0x1aa5*0x1+-0x20f*-0x1)}],[Rf,{'name':'VSM_16F','kind':'VSM','format':nt,'vsm':!(0x240e+0x115*0x1c+0x72*-0x95)}],[Ap,{'name':'VSM_32F','kind':'VSM','format':Xt,'vsm':!(-0x2325+0xa*-0xfb+-0x25*-0x137)}],[Xo,{'name':'PCSS_32F','kind':'PCSS','format':Qi,'pcss':!(-0xeb4+-0x8*-0x404+-0x116c)}]]),iw=0xa89+-0x1820+0xe96,Cp=0x161*-0x1c+-0xd1c*0x1+0x33b9,Of=0x2*-0xf97+-0xc0a+0x2b38,Ty=0x2b*0x3+0x383+-0x404,ai=0x94+-0x6*0x676+0x1318*0x2,rw=0x348+0x174+0x7*-0xad,Zc=0x1c72+0x26*-0x6f+-0x2fe*0x4,aw=0x190f+-0x29*-0x85+0x2e5b*-0x1,ni=0x5*-0x4b5+-0x1462+0x1*0x2beb,gn=0x13cb*-0x1+0x27d+0x114f,nn=0xe3f*0x2+0xa8c+-0x270a,Vr=-0x3*0x37+-0x201+0x1*0x2a7,Bl=-0x19d0+-0x1e85+-0x3857*-0x1,Pp=-0x2c5*0x1+-0x11c9+0x2*0xa47,wy=-0x7f*0x44+0x221e+-0x61*0x1,nw={[Pp]:'NONE',[wy]:'BOX'},Bm='mul',yl=-0x1*0x167+0x5c*-0x19+0xa63,Ec=0x449*-0x5+0x26a0+-0x1132,ow={[yl]:'NONE',[Ec]:'SRGB'},Mp=0x3af+0x5e*0x4f+-0x1*0x20b1,sU=-0x719*0x1+-0x218c+0x2b*0xf2,iU=0xa09*-0x3+0x26d1+-0x8b4,rU=-0xc8d+-0x65*-0x29+-0x19*0x25,aU=-0x910+0x34c*-0x1+0xc60,nU=-0x12dd+-0x94*-0x18+0x281*0x2,Ey=0x19f8+-0x7fb*-0x1+-0x21ed,by=['LINEAR','FILMIC','HEJL','ACES','ACES2','NEUTRAL','NONE'],Ay=0x1560+-0x5e*-0x52+-0x337c,id=-0xee6+-0x22f5+0x31dc,Cy=0x1*-0x863+0x17*0x5c+0x21,lw={[Ay]:'NONE',[id]:'AO',[Cy]:'GLOSSDEPEN'+'DENT'},_r='none',Qc='envAtlas',Jc='envAtlasHQ',eh='cubeMap',Py='sphereMap',cw={[_r]:'NONE',[Qc]:'ENVATLAS',[Jc]:'ENVATLASHQ',[eh]:'CUBEMAP',[Py]:'SPHEREMAP'},Dp='ambientSH',Ip='envAtlas',Lp='constant',hw={[Dp]:'AMBIENTSH',[Ip]:'ENVALATLAS',[Lp]:'CONSTANT'},th=-0x1d*0xf3+-0x2*0x414+0x23b0,qo=0x1405+-0x1*-0xb29+-0x2*0xf96,Rp=0x18cb+0x4*0x61a+0x1*-0x312f,My=0x120f+-0x505*-0x2+-0x1c11,Dy=-0xd4d+0x9fb*0x1+-0x1*-0x362,jo=-0x217f+0x661*0x1+0x1b3e,Ff=-0x1*-0x1c2b+0xcb9*-0x2+-0x279,Iy=0xdbe+0x38a*-0x9+0x129c,sh=-0x53*-0x6b+0xb23+0x1*-0x2cd4,Op=0x1346+0x17a8+0x28ee*-0x1,Yo=0x17b6+0xa*-0x212+-0x7f*-0x2,Ko=-0x1a8d+-0x1fe8+-0x1*-0x4275,Ly=-0x18e6+0x1a*0xa8+0x17d6,Zo=0x355a+-0x1e74+0x48d*0x2,bc=0x5cbb+-0x43f5+-0x139d*-0x2,Ps=0xd47+0x1882+-0x25c9,gr=0x1*-0x1e01+0x1efe+-0xfc,Fp=-0x149d+0x24f0+-0x1051,Ss=0xf8*-0x23+0x1f70+0x279,di=0xc7c+-0x2b*0x5e+-0x8*-0x6a,fi=0x11d6+-0x11c7+-0xb,xa=0x15fe+0x1*-0x249b+0x3*0x4df,vl=0x64c+0x25b9+-0x9*0x4e4,Np=-0x457+-0x21ea+0x5*0x7a7,Wn=0x13*0x123+-0x28c*0xa+0x1*0x3e2,ci=0x2614+0x1f56+0xa*-0x6f1,Pt=0x16*0x145+-0xbf5+-0x1*0xff8,Mt=0x47*0x1e+0x1*-0x94a+0xfa,dw={[ci]:'SIMPLE',[Pt]:'SLICED',[Mt]:'TILED'},Ac=0x1ce9+0x1a9c+0x22*-0x1a2,zl=0x2665*0x1+-0x1925*0x1+-0xd40,Cc=-0x24d*0x3+-0xe3*-0x26+0x1*-0x1acb,fw=0x17d7*-0x1+0x10b*0xf+0x833*0x1,uw=0xbbd*0x1+0x988+-0x1543,zm=0x1f96+0x12fe+0xf*-0x35f,pw=-0x11f9*-0x1+0x141d+-0x1309*0x2,mw=0x84c+-0x1bf7+0x13b0,kp=-0x246f+-0x120a+0x3679,Nf=0x1c*-0xe+0x196a+-0x17e1*0x1,Ae=0x9e*0x3e+-0xd*0x277+-0x639,je=-0x1134+0x22a*-0x5+0x1c07,Co='infinite',_w='box',gw='dome',ua='none',Sw='bayer8',yw='bluenoise',vw='ignnoise',xw={[ua]:'NONE',[Sw]:'BAYER8',[yw]:'BLUENOISE',[vw]:'IGNNOISE'},Tw='prerender',ww='postrender',Ew='prerender:'+'layer',bw='postrender'+':layer',Ry='precull',Oy='postcull',Aw='cull:end';class rd{constructor(_0x10b7c5,_0x14238f,_0x9dce20){h(this,'uniformFor'+'mats',[]),h(this,'bindGroupF'+'ormats',[]),h(this,'vertexForm'+'at'),(this['uniformFor'+'mats'][$o]=_0x10b7c5,this['bindGroupF'+'ormats'][$o]=_0x14238f,this['vertexForm'+'at']=_0x9dce20);}['hasUniform'](_0x115b8b){for(let _0x58049c=0x41*0x2c+-0x4*0x602+0x1*0xcdc;_0x58049c<this['uniformFor'+'mats']['length'];_0x58049c++){const _0x500d0d=this['uniformFor'+'mats'][_0x58049c];if(_0x500d0d!=null&&_0x500d0d['get'](_0x115b8b))return!(0x490*-0x1+0xbbe*-0x1+-0x827*-0x2);}return!(0x24b1+-0x1*0x358+-0x8*0x42b);}['hasTexture'](_0x1d42f6){for(let _0x153cfd=-0x19b0+0x2582+-0xbd2;_0x153cfd<this['bindGroupF'+'ormats']['length'];_0x153cfd++){const _0x428c66=this['bindGroupF'+'ormats'][_0x153cfd];if(_0x428c66!=null&&_0x428c66['getTexture'](_0x1d42f6))return!(-0x103c*-0x1+-0x4d*-0x2+-0x10d6);}return!(0x1*-0x18cf+-0x6b2*0x5+0x3a4a);}['getVertexE'+'lement'](_0x48b7c7){var _0x54d73d;return(_0x54d73d=this['vertexForm'+'at'])==null?void(0x180d+0x1*-0x185+-0x67*0x38):_0x54d73d['elements']['find'](_0x3e938c=>_0x3e938c['name']===_0x48b7c7);}['generateKe'+'y'](_0x485b3a){var _0x16ec39;let _0x156b15=JSON['stringify'](this['uniformFor'+'mats'])+JSON['stringify'](this['bindGroupF'+'ormats']);return _0x485b3a['isWebGPU']&&(_0x156b15+=(_0x16ec39=this['vertexForm'+'at'])==null?void(-0x9b3+-0x84b*-0x1+-0x1*-0x168):_0x16ec39['shaderProc'+'essingHash'+'String']),_0x156b15;}}const Fy=new Kt();function Nn(_0x1f5d72){const _0x7170fc=Fy['get'](_0x1f5d72);return w['assert'](_0x7170fc),_0x7170fc;}function Cw(_0x58ba50,_0x15c020){w['assert'](_0x15c020),Fy['get'](_0x58ba50,()=>_0x15c020);}class pa{static['definesHas'+'h'](_0x44b7c1){const _0xdad05d=Array['from'](_0x44b7c1)['sort']((_0x452aa8,_0x477144)=>_0x452aa8[0x1cbb+0x81d*0x1+0x8*-0x49b]>_0x477144[-0x258f+-0x1*-0x1aad+-0x7*-0x18e]?0xda*0x1d+0x25e9+-0x3*0x14de:-(0xf5e+0x21bb*-0x1+0x125e));return hi(JSON['stringify'](_0xdad05d));}}const Pw=new Kt();class Mw{constructor(_0x2ab0c5,_0x40378,_0x4191ad={}){h(this,'index'),h(this,'name'),h(this,'defines',new Map()),(w['assert'](/^[a-z]\w*$/i['test'](_0x2ab0c5),'ShaderPass'+'\x20name\x20can\x20'+'only\x20conta'+'in\x20letters'+',\x20numbers\x20'+'and\x20unders'+'cores\x20and\x20'+'start\x20with'+'\x20a\x20letter:'+'\x20'+_0x2ab0c5),this['name']=_0x2ab0c5,this['index']=_0x40378,Object['assign'](this,_0x4191ad),this['buildShade'+'rDefines']());}['buildShade'+'rDefines'](){let _0x5271b3;this['isShadow']?_0x5271b3='SHADOW':this['isForward']?_0x5271b3='FORWARD':this['index']===Wn&&(_0x5271b3='PICK'),this['defines']['set'](_0x5271b3+'_PASS',''),this['defines']['set'](this['name']['toUpperCas'+'e']()+'_PASS','');}}class Si{constructor(){h(this,'passesName'+'d',new Map()),h(this,'passesInde'+'xed',[]),h(this,'nextIndex',-0x2011*0x1+-0x210c+-0x1*-0x411d);const _0x33cef6=(_0x1a6db7,_0x53095a,_0x279d55)=>{const _0x17368d=this['allocate'](_0x1a6db7,_0x279d55);w['assert'](_0x17368d['index']===_0x53095a);};_0x33cef6('forward',xa,{'isForward':!(-0x1c8a+-0x741+0x23cb)}),_0x33cef6('prepass',vl),_0x33cef6('shadow',Np),_0x33cef6('pick',Wn);}static['get'](_0x25ff75){return w['assert'](_0x25ff75),Pw['get'](_0x25ff75,()=>new Si());}['allocate'](_0x1d2588,_0x18d0a9){let _0xf15fc1=this['passesName'+'d']['get'](_0x1d2588);return _0xf15fc1===void(-0x194a*0x1+0x1579+0x3d1)&&(_0xf15fc1=new Mw(_0x1d2588,this['nextIndex'],_0x18d0a9),this['passesName'+'d']['set'](_0xf15fc1['name'],_0xf15fc1),this['passesInde'+'xed'][_0xf15fc1['index']]=_0xf15fc1,this['nextIndex']++),_0xf15fc1;}['getByIndex'](_0x3b81c9){const _0x1f9772=this['passesInde'+'xed'][_0x3b81c9];return w['assert'](_0x1f9772),_0x1f9772;}['getByName'](_0x235686){return this['passesName'+'d']['get'](_0x235686);}}class Vm extends Map{constructor(){super(...arguments),h(this,'_keyDirty',!(-0x1250+-0x203b+0x1946*0x2)),h(this,'_key','');}['set'](_0x5abdcd,_0x2fafb7){return(!this['has'](_0x5abdcd)||this['get'](_0x5abdcd)!==_0x2fafb7)&&this['markDirty'](),super['set'](_0x5abdcd,_0x2fafb7);}['add'](_0x152f47){for(const [_0x55edf6,_0x45e8f7]of Object['entries'](_0x152f47))this['set'](_0x55edf6,_0x45e8f7);return this;}['delete'](_0x4808fa){const _0x49808e=this['has'](_0x4808fa),_0x1eec7f=super['delete'](_0x4808fa);return _0x49808e&&_0x1eec7f&&this['markDirty'](),_0x1eec7f;}['clear'](){this['size']>-0x175d+0xed*-0x1f+-0x77*-0x70&&this['markDirty'](),super['clear']();}['markDirty'](){this['_dirty']=!(-0x7*-0xed+0xe41+-0x52f*0x4),this['_keyDirty']=!(-0x1176+0x31d*-0x3+0x1acd);}['isDirty'](){return this['_dirty'];}['resetDirty'](){this['_dirty']=!(-0x7*0x1+-0x1*-0xfd1+-0xfc9);}get['key'](){return this['_keyDirty']&&(this['_keyDirty']=!(-0x2621+0x5*-0x7c6+0x4d00),this['_key']=Array['from'](this['entries']())['sort'](([_0x18193d],[_0x50dc40])=>_0x18193d<_0x50dc40?-(0x12*0x199+-0x1589+-0x738):_0x18193d>_0x50dc40?-0x1ab4+0x1849+-0x1f*-0x14:-0x1990+0x960+0x1030*0x1)['map'](([_0x1740ba,_0xb9678b])=>_0x1740ba+'='+hi(_0xb9678b))['join'](',')),this['_key'];}['copy'](_0x31a985){this['clear']();for(const [_0x2fdfda,_0x4e5844]of _0x31a985)this['set'](_0x2fdfda,_0x4e5844);return this;}}const Dw=new Kt();class Ce{constructor(){h(this,'glsl',new Vm()),h(this,'wgsl',new Vm()),h(this,'version','');}static['get'](_0x3568dd,_0x11eade=Fe){const _0x561d09=Dw['get'](_0x3568dd,()=>new Ce());return _0x11eade===Fe?_0x561d09['glsl']:_0x561d09['wgsl'];}get['useWGSL'](){return this['glsl']['size']===0x1bc4+-0x98f*0x3+0x1*0xe9||this['wgsl']['size']>0x1*-0xd01+0x3ac+0x1*0x955;}get['key'](){return'GLSL:'+this['glsl']['key']+'|WGSL:'+this['wgsl']['key']+'|API:'+this['version'];}['isDirty'](){return this['glsl']['isDirty']()||this['wgsl']['isDirty']();}['resetDirty'](){this['glsl']['resetDirty'](),this['wgsl']['resetDirty']();}['copy'](_0x571ec7){return this['version']=_0x571ec7['version'],this['glsl']['copy'](_0x571ec7['glsl']),this['wgsl']['copy'](_0x571ec7['wgsl']),this;}}class ih{static['merge'](..._0x57a0d8){const _0x760b6c=new Map(_0x57a0d8[0x1*-0x2699+0x20c4+0x5d5*0x1]??[]);for(let _0x280d52=0xb1+0x68+-0x46*0x4;_0x280d52<_0x57a0d8['length'];_0x280d52++){const _0x1beb22=_0x57a0d8[_0x280d52];if(_0x1beb22){for(const [_0x39cdd2,_0x53039e]of _0x1beb22)_0x760b6c['set'](_0x39cdd2,_0x53039e);}}return _0x760b6c;}}class Iw extends pa{constructor(_0x1d3748,_0x47e1bf){super(),this['key']=_0x1d3748,this['shaderDefi'+'nition']=_0x47e1bf;}['generateKe'+'y'](_0x361fd6){return this['key'];}['createShad'+'erDefiniti'+'on'](_0x26393f,_0x5686ea){return this['shaderDefi'+'nition'];}}class $t{static['createShad'+'er'](_0xda2b75,_0x552b0f){const _0x31134c=Nn(_0xda2b75);let _0xcbd5fa=_0x31134c['getCachedS'+'hader'](_0x552b0f['uniqueName']);if(!_0xcbd5fa){const _0x109b24=_0xda2b75['isWebGPU']&&(!!_0x552b0f['vertexWGSL']||!!_0x552b0f['vertexChun'+'k'])&&(!!_0x552b0f['fragmentWG'+'SL']||!!_0x552b0f['fragmentCh'+'unk']),_0x2d79f6=Ce['get'](_0xda2b75,_0x109b24?it:Fe),_0x5387a6=_0x552b0f['vertexChun'+'k']?_0x2d79f6['get'](_0x552b0f['vertexChun'+'k']):_0x109b24?_0x552b0f['vertexWGSL']:_0x552b0f['vertexGLSL'],_0x37dd99=_0x552b0f['fragmentCh'+'unk']?_0x2d79f6['get'](_0x552b0f['fragmentCh'+'unk']):_0x109b24?_0x552b0f['fragmentWG'+'SL']:_0x552b0f['fragmentGL'+'SL'];w['assert'](_0x5387a6,'ShaderUtil'+'s.createSh'+'ader:\x20vert'+'ex\x20shader\x20'+'code\x20not\x20p'+'rovided',_0x552b0f),w['assert'](_0x37dd99,'ShaderUtil'+'s.createSh'+'ader:\x20frag'+'ment\x20shade'+'r\x20code\x20not'+'\x20provided',_0x552b0f);const _0x4894da=ih['merge'](_0x2d79f6,_0x552b0f['fragmentIn'+'cludes']),_0x16f569=ih['merge'](_0x2d79f6,_0x552b0f['vertexIncl'+'udes']);_0xcbd5fa=new dy(_0xda2b75,Jt['createDefi'+'nition'](_0xda2b75,{'name':_0x552b0f['uniqueName'],'shaderLanguage':_0x109b24?it:Fe,'attributes':_0x552b0f['attributes'],'vertexCode':_0x5387a6,'fragmentCode':_0x37dd99,'useTransformFeedback':_0x552b0f['useTransfo'+'rmFeedback'],'vertexIncludes':_0x16f569,'vertexDefines':_0x552b0f['vertexDefi'+'nes'],'fragmentIncludes':_0x4894da,'fragmentDefines':_0x552b0f['fragmentDe'+'fines'],'fragmentOutputTypes':_0x552b0f['fragmentOu'+'tputTypes']})),_0x31134c['setCachedS'+'hader'](_0x552b0f['uniqueName'],_0xcbd5fa);}return _0xcbd5fa;}static['getCoreDef'+'ines'](_0xf65615,_0x2161f7){const _0x167524=new Map(_0xf65615['defines']);return _0x2161f7['cameraShad'+'erParams']['defines']['forEach']((_0xab3688,_0x1271f6)=>_0x167524['set'](_0x1271f6,_0xab3688)),Si['get'](_0x2161f7['device'])['getByIndex'](_0x2161f7['pass'])['defines']['forEach']((_0x40d0a4,_0x320261)=>_0x167524['set'](_0x320261,_0x40d0a4)),_0x167524;}static['processSha'+'der'](_0x4817cb,_0x4ab7d0){w['assert'](_0x4817cb);const _0x26b5c9=_0x4817cb['definition'],_0x83ab1e=(_0x26b5c9['name']??'shader')+'-id-'+_0x4817cb['id'],_0x499e1b=new Iw(_0x83ab1e,_0x26b5c9),_0x2100ef='shader',_0x522b1e=Nn(_0x4817cb['device']);w['assert'](!_0x522b1e['isRegister'+'ed'](_0x2100ef)),_0x522b1e['register'](_0x2100ef,_0x499e1b);const _0x1bdf12=_0x522b1e['getProgram'](_0x2100ef,{},_0x4ab7d0);return _0x522b1e['unregister'](_0x2100ef),_0x1bdf12;}static['addScreenD'+'epthChunkD'+'efines'](_0x1e9764,_0x3dca89,_0xde7281){_0x3dca89['sceneDepth'+'MapLinear']&&_0xde7281['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',''),_0x1e9764['textureFlo'+'atRenderab'+'le']&&_0xde7281['set']('SCENE_DEPT'+'HMAP_FLOAT','');}}const Lw={'type':vr,'base':0x0,'baseVertex':0x0,'count':0x4,'indexed':!(0xaa9*0x2+0x260+-0x17b1)},Yn=new re(),Kn=new re(),vd=new ty();class rh{constructor(_0x51eaf4){h(this,'uniformBuf'+'fer'),h(this,'bindGroup');const _0xee4117=_0x51eaf4['device'];if(this['shader']=_0x51eaf4,w['assert'](_0x51eaf4),_0xee4117['supportsUn'+'iformBuffe'+'rs']){const _0x3f1259=new rd();this['shader']=$t['processSha'+'der'](_0x51eaf4,_0x3f1259);const _0x4b9f1b=this['shader']['meshUnifor'+'mBufferFor'+'mat'];_0x4b9f1b&&(this['uniformBuf'+'fer']=new up(_0xee4117,_0x4b9f1b,!(-0x200c+-0x4a3+-0x10*-0x24b)));const _0x489aa9=this['shader']['meshBindGr'+'oupFormat'];w['assert'](_0x489aa9),this['bindGroup']=new dp(_0xee4117,_0x489aa9),ya['setName'](this['bindGroup'],'QuadRender'+'-MeshBindG'+'roup_'+this['bindGroup']['id']);}}['destroy'](){var _0x336e75,_0x235d22;(_0x336e75=this['uniformBuf'+'fer'])==null||_0x336e75['destroy'](),this['uniformBuf'+'fer']=null,(_0x235d22=this['bindGroup'])==null||_0x235d22['destroy'](),this['bindGroup']=null;}['render'](_0x46b7f5,_0x453b30){const _0x19a07c=this['shader']['device'];Q['pushGpuMar'+'ker'](_0x19a07c,'QuadRender'),_0x46b7f5&&(Yn['set'](_0x19a07c['vx'],_0x19a07c['vy'],_0x19a07c['vw'],_0x19a07c['vh']),Kn['set'](_0x19a07c['sx'],_0x19a07c['sy'],_0x19a07c['sw'],_0x19a07c['sh']),_0x453b30=_0x453b30??_0x46b7f5,_0x19a07c['setViewpor'+'t'](_0x46b7f5['x'],_0x46b7f5['y'],_0x46b7f5['z'],_0x46b7f5['w']),_0x19a07c['setScissor'](_0x453b30['x'],_0x453b30['y'],_0x453b30['z'],_0x453b30['w'])),_0x19a07c['setVertexB'+'uffer'](_0x19a07c['quadVertex'+'Buffer'],-0xbd3+0x2644*-0x1+0x3217);const _0x43e019=this['shader'];if(_0x19a07c['setShader'](_0x43e019),_0x19a07c['supportsUn'+'iformBuffe'+'rs']){_0x19a07c['setBindGro'+'up']($o,_0x19a07c['emptyBindG'+'roup']);const _0x54a660=this['bindGroup'];_0x54a660['update'](),_0x19a07c['setBindGro'+'up'](QS,_0x54a660);const _0x122ec3=this['uniformBuf'+'fer'];_0x122ec3?(_0x122ec3['update'](vd),_0x19a07c['setBindGro'+'up'](Df,vd['bindGroup'],vd['offsets'])):_0x19a07c['setBindGro'+'up'](Df,_0x19a07c['emptyBindG'+'roup']);}_0x19a07c['draw'](Lw),_0x46b7f5&&(_0x19a07c['setViewpor'+'t'](Yn['x'],Yn['y'],Yn['z'],Yn['w']),_0x19a07c['setScissor'](Kn['x'],Kn['y'],Kn['z'],Kn['w'])),Q['popGpuMark'+'er'](_0x19a07c);}}class Rw extends ys{constructor(_0x213604,_0x2ad37c,_0x5b0aad,_0x138d2c){super(_0x213604),this['quad']=_0x2ad37c,this['rect']=_0x5b0aad,this['scissorRec'+'t']=_0x138d2c;}['execute'](){const {device:_0x4da045}=this;Q['pushGpuMar'+'ker'](_0x4da045,this['name']+':'+this['quad']['shader']['name']),_0x4da045['setCullMod'+'e'](bt),_0x4da045['setDepthSt'+'ate'](Yt['NODEPTH']),_0x4da045['setStencil'+'State'](null,null),this['quad']['render'](this['rect'],this['scissorRec'+'t']),Q['popGpuMark'+'er'](_0x4da045);}}const Ow=new re();function Tr(_0x2a54d1,_0x35eba9,_0x29976f,_0x186c43,_0x2a453d){w['assert'](_0x35eba9!==void(0x166a+-0x4a*-0x2+-0x16fe));const _0x46dd24=arguments[-0x1319+-0xb5d*-0x3+-0xef9*0x1];w['call'](()=>{_0x46dd24!==void(-0x1*-0x607+-0x1085+-0x1*-0xa7e)&&w['warnOnce']('pc.drawQua'+'dWithShade'+'r\x20no\x20longe'+'r\x20accepts\x20'+'useBlend\x20p'+'arameter,\x20'+'and\x20blendi'+'ng\x20state\x20n'+'eeds\x20to\x20be'+'\x20set\x20up\x20us'+'ing\x20Graphi'+'csDevice.s'+'etBlendSta'+'te.');});const _0x50e44b=new rh(_0x29976f);_0x186c43||(_0x186c43=Ow,_0x186c43['x']=-0x650+0x2b3*0xa+-0x14ae,_0x186c43['y']=0x1*-0x11fb+0x199*-0x14+-0x10a5*-0x3,_0x186c43['z']=_0x35eba9?_0x35eba9['width']:_0x2a54d1['width'],_0x186c43['w']=_0x35eba9?_0x35eba9['height']:_0x2a54d1['height']);const _0x5c3d05=new Rw(_0x2a54d1,_0x50e44b,_0x186c43,_0x2a453d);_0x5c3d05['init'](_0x35eba9),_0x5c3d05['colorOps']['clear']=!(-0x30c*-0x8+-0x237f+0xb20),_0x5c3d05['depthStenc'+'ilOps']['clearDepth']=!(0x19*0xf5+0x645*0x4+0xe*-0x380),_0x2a54d1['isWebGPU']&&_0x35eba9===null&&_0x2a54d1['samples']>-0x301*0x2+0x8*-0x2ef+-0x1*-0x1d7b&&(_0x5c3d05['colorOps']['store']=!(-0xc1f+0x1a53+-0x4bc*0x3)),_0x5c3d05['render'](),_0x50e44b['destroy']();}class Gm{constructor(_0x2fbab2,_0x226ff9,_0x2c7472){h(this,'_aabb',new De()),h(this,'origMeshIn'+'stances'),h(this,'meshInstan'+'ce',null),h(this,'dynamic'),h(this,'batchGroup'+'Id'),(this['origMeshIn'+'stances']=_0x2fbab2,this['dynamic']=_0x226ff9,this['batchGroup'+'Id']=_0x2c7472);}['destroy'](_0x4d7f28,_0x270cce){this['meshInstan'+'ce']&&(this['removeFrom'+'Layers'](_0x4d7f28,_0x270cce),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}['addToLayer'+'s'](_0x154bf0,_0x206527){for(let _0x5043b4=-0x1d27*0x1+-0x3f4*0x2+0x35*0xb3;_0x5043b4<_0x206527['length'];_0x5043b4++){const _0x3f382f=_0x154bf0['layers']['getLayerBy'+'Id'](_0x206527[_0x5043b4]);_0x3f382f&&_0x3f382f['addMeshIns'+'tances']([this['meshInstan'+'ce']]);}}['removeFrom'+'Layers'](_0x47defc,_0x1a74cf){for(let _0xf79759=0x17d9+-0xc08+-0xbd1*0x1;_0xf79759<_0x1a74cf['length'];_0xf79759++){const _0xbe9272=_0x47defc['layers']['getLayerBy'+'Id'](_0x1a74cf[_0xf79759]);_0xbe9272&&_0xbe9272['removeMesh'+'Instances']([this['meshInstan'+'ce']]);}}['updateBoun'+'dingBox'](){this['_aabb']['copy'](this['origMeshIn'+'stances'][0xf09+-0x490*0x4+0x337]['aabb']);for(let _0x1d5eb9=-0x25ca+0xe2*0x6+0x207f*0x1;_0x1d5eb9<this['origMeshIn'+'stances']['length'];_0x1d5eb9++)this['_aabb']['add'](this['origMeshIn'+'stances'][_0x1d5eb9]['aabb']);this['meshInstan'+'ce']['aabb']=this['_aabb'],this['meshInstan'+'ce']['_aabbVer']=-0x1*0xcbd+-0x2a3+0xf60;}get['model'](){w['removed']('pc.Batch#m'+'odel\x20was\x20r'+'emoved.\x20Us'+'e\x20pc.Batch'+'#meshInsta'+'nce\x20to\x20acc'+'ess\x20batche'+'d\x20mesh\x20ins'+'tead.');}}class St{constructor(_0x2fd478,_0x389977,_0x53d471,_0x32d25e,_0x241dbb=[Ji]){h(this,'_ui',!(0x2587*-0x1+0xc7b+0x190d)),h(this,'_sprite',!(-0x2*0x13c+0x9b*0x3+0xa8)),h(this,'_obj',{'model':[],'element':[],'sprite':[],'render':[]}),h(this,'id'),h(this,'name'),h(this,'dynamic'),h(this,'maxAabbSiz'+'e'),h(this,'layers'),(this['id']=_0x2fd478,this['name']=_0x389977,this['dynamic']=_0x53d471,this['maxAabbSiz'+'e']=_0x32d25e,this['layers']=_0x241dbb);}}h(St,'MODEL','model'),h(St,'ELEMENT','element'),h(St,'SPRITE','sprite'),h(St,'RENDER','render');const Hm=new te();class xl{constructor(_0xc33cc6){h(this,'bones'),(this['_dirty']=!(0x4*0x65e+-0x26cb+0xd53*0x1),this['_rootBone']=null,this['_skinUpdat'+'eIndex']=-(-0x692+-0x2e6+0x979),this['_updateBef'+'oreCull']=!(-0x3d7+-0x26da*0x1+-0x1*-0x2ab1),_0xc33cc6&&this['initSkin'](_0xc33cc6));}set['rootBone'](_0x51a76a){this['_rootBone']=_0x51a76a;}get['rootBone'](){return this['_rootBone'];}['init'](_0x57904a,_0x2ba690){const _0x397718=_0x2ba690*(0xaa9*0x2+0x1*-0x1d+-0x2*0xa99);let _0x6a3e39=Math['ceil'](Math['sqrt'](_0x397718));_0x6a3e39=Y['roundUp'](_0x6a3e39,-0xb8*0x11+-0xb3*0x25+0x261a);const _0x4523dc=Math['ceil'](_0x397718/_0x6a3e39);this['boneTextur'+'e']=new _e(_0x57904a,{'width':_0x6a3e39,'height':_0x4523dc,'format':Xt,'mipmaps':!(-0xce9*-0x2+-0xc6e+-0xd63),'minFilter':Te,'magFilter':Te,'name':'skin'}),this['matrixPale'+'tte']=this['boneTextur'+'e']['lock']({'mode':kS}),this['boneTextur'+'e']['unlock']();}['destroy'](){this['boneTextur'+'e']&&(this['boneTextur'+'e']['destroy'](),this['boneTextur'+'e']=null);}['resolve'](_0x59fdef,_0x2d1986){this['rootBone']=_0x59fdef;const _0x27a484=this['skin'],_0xd23292=[];for(let _0x20f628=-0xe42+0x133*-0x16+0x28a4;_0x20f628<_0x27a484['boneNames']['length'];_0x20f628++){const _0x3ad2ac=_0x27a484['boneNames'][_0x20f628];let _0x14e1d8=_0x59fdef['findByName'](_0x3ad2ac);_0x14e1d8||(w['error']('Failed\x20to\x20'+'find\x20bone\x20'+'['+_0x3ad2ac+(']\x20in\x20the\x20e'+'ntity\x20hier'+'archy,\x20Ren'+'derCompone'+'nt\x20on\x20')+_0x2d1986['name']+(',\x20rootBone'+':\x20')+_0x59fdef['name']),_0x14e1d8=_0x2d1986),_0xd23292['push'](_0x14e1d8);}this['bones']=_0xd23292;}['initSkin'](_0x59c5c6){this['skin']=_0x59c5c6,this['bones']=[];const _0x4984f2=_0x59c5c6['inverseBin'+'dPose']['length'];this['init'](_0x59c5c6['device'],_0x4984f2),this['matrices']=[];for(let _0x599a36=0x1a63+-0x1beb*0x1+0x38*0x7;_0x599a36<_0x4984f2;_0x599a36++)this['matrices'][_0x599a36]=new te();}['uploadBone'+'s'](_0x4a6a99){this['boneTextur'+'e']['upload']();}['_updateMat'+'rices'](_0x2c8437,_0x49d822){if(this['_skinUpdat'+'eIndex']!==_0x49d822){this['_skinUpdat'+'eIndex']=_0x49d822,Hm['copy'](_0x2c8437['getWorldTr'+'ansform']())['invert']();for(let _0x2b4fe8=this['bones']['length']-(-0x1*0x2503+-0x18b*0x19+0x25*0x20b);_0x2b4fe8>=0x5a6+0x1*-0x87d+0x2d7;_0x2b4fe8--)this['matrices'][_0x2b4fe8]['mulAffine2'](Hm,this['bones'][_0x2b4fe8]['getWorldTr'+'ansform']()),this['matrices'][_0x2b4fe8]['mulAffine2'](this['matrices'][_0x2b4fe8],this['skin']['inverseBin'+'dPose'][_0x2b4fe8]);}}['updateMatr'+'ices'](_0x2d2a42,_0x358c11){this['_updateBef'+'oreCull']&&this['_updateMat'+'rices'](_0x2d2a42,_0x358c11);}['updateMatr'+'ixPalette'](_0xeeb909,_0x41c7ca){this['_updateMat'+'rices'](_0xeeb909,_0x41c7ca);const _0x24d917=this['matrixPale'+'tte'],_0xd00963=this['bones']['length'];for(let _0x47eea5=0x3*-0x47a+-0x4*0x3bb+0x1*0x1c5a;_0x47eea5<_0xd00963;_0x47eea5++){const _0x3c48ab=this['matrices'][_0x47eea5]['data'],_0x5a2d01=_0x47eea5*(-0xe1a+0x914+0x512);_0x24d917[_0x5a2d01]=_0x3c48ab[0x1d*0x5e+-0x2694+0x1bee],_0x24d917[_0x5a2d01+(-0x1c*-0x147+-0x1b91+-0x832)]=_0x3c48ab[-0xec3*0x1+0x1*0x1a3e+0x5*-0x24b],_0x24d917[_0x5a2d01+(-0x10b0+-0x173d*0x1+-0x27ef*-0x1)]=_0x3c48ab[0xb*-0x23+-0x2*-0x944+-0x1*0x10ff],_0x24d917[_0x5a2d01+(0x2*0x1df+0x13a5*0x1+0x22*-0xb0)]=_0x3c48ab[0xb14+0x24ca+-0x2fd2],_0x24d917[_0x5a2d01+(0x1745*0x1+0xcd1+-0x6*0x603)]=_0x3c48ab[-0xa6*0x2+0x6a6+-0x559],_0x24d917[_0x5a2d01+(-0x2b5+-0x15df+0x1899)]=_0x3c48ab[0x2*0xd55+0x260+-0x1d05],_0x24d917[_0x5a2d01+(-0xd*0x103+-0x740*0x3+0x22ed)]=_0x3c48ab[-0x5ab*-0x1+-0xd39+0x797],_0x24d917[_0x5a2d01+(-0x18e*-0x11+0xd41+0x36*-0xbc)]=_0x3c48ab[0xe87+0x13cb+0x1f*-0x11b],_0x24d917[_0x5a2d01+(-0x1011+-0x12ef+0x2308)]=_0x3c48ab[0x120+-0x2118+-0x1*-0x1ffa],_0x24d917[_0x5a2d01+(-0x16af+0x3*-0x149+-0x1*-0x1a93)]=_0x3c48ab[0xaa2+0x253+-0xcef],_0x24d917[_0x5a2d01+(-0x23ec*0x1+0xb84+0x1872)]=_0x3c48ab[0x9a8*0x3+-0x7*0x133+-0x1489],_0x24d917[_0x5a2d01+(-0x3e6*-0x1+-0xca*-0x25+-0x210d)]=_0x3c48ab[-0x2005+-0x241*0xd+0x3d60];}this['uploadBone'+'s'](this['skin']['device']);}}class Wm extends xl{constructor(_0x4b838e,_0xeb254,_0x3fd219){super();const _0x2c67c1=_0xeb254['length'];this['init'](_0x4b838e,_0x2c67c1),this['device']=_0x4b838e,this['rootNode']=_0x3fd219,this['bones']=_0xeb254;}['updateMatr'+'ices'](_0x3b2f47,_0x14aaef){}['updateMatr'+'ixPalette'](_0x542334,_0x293728){const _0x5039a1=this['matrixPale'+'tte'],_0xe29419=this['bones']['length'];for(let _0x367e05=-0x2*-0xd6c+0x1*-0x799+0x1*-0x133f;_0x367e05<_0xe29419;_0x367e05++){const _0x1c7fca=this['bones'][_0x367e05]['getWorldTr'+'ansform']()['data'],_0x21d43b=_0x367e05*(-0xea3*0x1+0x1bf2+-0xd43);_0x5039a1[_0x21d43b]=_0x1c7fca[0xcb8+-0xc80+-0x38],_0x5039a1[_0x21d43b+(0x8d9+-0x797*-0x3+0x1*-0x1f9d)]=_0x1c7fca[0x251*0x7+-0x659+-0x9da],_0x5039a1[_0x21d43b+(-0x2603+0x5a8+-0x679*-0x5)]=_0x1c7fca[-0x1be1+0x6*0x53+0x19f7],_0x5039a1[_0x21d43b+(0x1009+0x3*-0x593+0xb3)]=_0x1c7fca[-0x765+0xbfe+-0x1*0x48d],_0x5039a1[_0x21d43b+(-0x1b1e+-0x9e4+0x2506)]=_0x1c7fca[-0x201a+0x1fea+-0x1*-0x31],_0x5039a1[_0x21d43b+(-0x1d0a+-0x2622+0x4331*0x1)]=_0x1c7fca[-0x21b1+-0x239b+0x4551],_0x5039a1[_0x21d43b+(0x209a+0x2*0x10e1+-0x4256)]=_0x1c7fca[0x1dcd*-0x1+0x22c6+-0x4f0],_0x5039a1[_0x21d43b+(-0x1c89+-0x1eb2+-0x2*-0x1da1)]=_0x1c7fca[0xe0f+0x97f*0x4+-0x33fe],_0x5039a1[_0x21d43b+(-0x2412+0x50e+0x1f0c)]=_0x1c7fca[0x1*-0x11e2+-0x1dee+-0x2fd2*-0x1],_0x5039a1[_0x21d43b+(-0x1*0x25f5+-0x174*0xb+-0x3*-0x11fe)]=_0x1c7fca[-0x2272+0xd+0x226b],_0x5039a1[_0x21d43b+(0x1932+-0x2*0xd17+0x106)]=_0x1c7fca[0x47*0x43+-0x44f*0x2+-0x9ed],_0x5039a1[_0x21d43b+(0xbe4*0x2+-0x1f9f*0x1+0x7e2)]=_0x1c7fca[-0x1*0xdcc+-0x2575+0x334f];}this['uploadBone'+'s'](this['device']);}}let Fw=-0x1*0x112+-0xea2*0x1+0xfb4;class oi{constructor(){this['initDefaul'+'ts']();}['initDefaul'+'ts'](){this['recreate']=!(0x2*0x1e5+-0x1*-0xd76+-0x113f),this['verticesUs'+'age']=ms,this['indicesUsa'+'ge']=ms,this['maxVertice'+'s']=0xb16+-0x9*0x2ce+-0x1*-0xe28,this['maxIndices']=0x1b9e+-0x7e*-0x24+-0x16ab*0x2,this['vertexCoun'+'t']=0x1276+0x95*0x3c+-0x3562,this['indexCount']=-0x2*0x1241+0x9f*-0x1a+-0xa88*-0x5,this['vertexStre'+'amsUpdated']=!(-0xedb+-0x10d9+0x1fb5),this['indexStrea'+'mUpdated']=!(0x36e*-0x3+0x1ce*0x5+0x145),this['vertexStre'+'amDictiona'+'ry']={},this['indices']=null;}['_changeVer'+'texCount'](_0x1cc44c,_0x4c8bd5){this['vertexCoun'+'t']?w['assert'](this['vertexCoun'+'t']===_0x1cc44c,'Vertex\x20str'+'eam\x20'+_0x4c8bd5+'\x20has\x20'+_0x1cc44c+('\x20vertices,'+'\x20which\x20doe'+'s\x20not\x20matc'+'h\x20already\x20'+'set\x20stream'+'s\x20with\x20')+this['vertexCoun'+'t']+'\x20vertices.'):this['vertexCoun'+'t']=_0x1cc44c;}}h(oi,'DEFAULT_CO'+'MPONENTS_P'+'OSITION',0x1*0x15d1+0x1f*-0x49+-0xcf7),h(oi,'DEFAULT_CO'+'MPONENTS_N'+'ORMAL',0x1*-0x4aa+-0x1057+0x434*0x5),h(oi,'DEFAULT_CO'+'MPONENTS_U'+'V',-0x1f*-0xe9+-0x433*0x8+0xc5*0x7),h(oi,'DEFAULT_CO'+'MPONENTS_C'+'OLORS',-0x100a+-0x7f8+0x267*0xa);class Nw{constructor(_0x455fe3,_0x47c583,_0xbd5aaa,_0x25f630,_0x189e47){this['data']=_0x455fe3,this['componentC'+'ount']=_0x47c583,this['dataType']=_0xbd5aaa,this['dataTypeNo'+'rmalize']=_0x25f630,this['asInt']=_0x189e47;}}class Ge extends td{constructor(_0x2a27b7,_0x1e217e){super(),h(this,'indexBuffe'+'r',[null]),h(this,'vertexBuff'+'er',null),h(this,'primitive',[{'type':0x0,'base':0x0,'baseVertex':0x0,'count':0x0}]),h(this,'skin',null),h(this,'boneAabb',null),h(this,'_aabbVer',-0x21a9+-0x1e7+0x8*0x472),h(this,'_aabb',new De()),h(this,'_geometryD'+'ata',null),h(this,'_morph',null),h(this,'_storageIn'+'dex',!(-0x2*-0x3ae+-0x1f8+-0xc5*0x7)),h(this,'_storageVe'+'rtex',!(0x1*-0x784+-0x3*0x629+0x1a00)),(this['id']=Fw++,w['assert'](_0x2a27b7,'Mesh\x20const'+'ructor\x20tak'+'es\x20a\x20Graph'+'icsDevice\x20'+'as\x20a\x20param'+'eter,\x20and\x20'+'it\x20was\x20not'+'\x20provided.'),this['device']=_0x2a27b7,this['_storageIn'+'dex']=(_0x1e217e==null?void(-0x19b*-0x11+0x1*0x25aa+-0x40f5):_0x1e217e['storageInd'+'ex'])||!(0x57f+-0x2471+0x1ef3),this['_storageVe'+'rtex']=(_0x1e217e==null?void(-0x4b0+0x23ce+0xe*-0x239):_0x1e217e['storageVer'+'tex'])||!(-0x4*0x57a+0x6*-0x76+0x18ad*0x1));}static['fromGeomet'+'ry'](_0x2e76f5,_0x7aaa4c,_0x391002={}){const _0x1e978c=new Ge(_0x2e76f5,_0x391002),{positions:_0x57c096,normals:_0x354427,tangents:_0x58e164,colors:_0x50c6cb,uvs:_0x266bbe,uvs1:_0x29a9b3,blendIndices:_0x2a8a2f,blendWeights:_0x17d8c9,indices:_0x35a61f}=_0x7aaa4c;return _0x57c096&&_0x1e978c['setPositio'+'ns'](_0x57c096),_0x354427&&_0x1e978c['setNormals'](_0x354427),_0x58e164&&_0x1e978c['setVertexS'+'tream'](yi,_0x58e164,-0x794+-0x1cbd+0x2455),_0x50c6cb&&_0x1e978c['setColors3'+'2'](_0x50c6cb),_0x266bbe&&_0x1e978c['setUvs'](0xf5e*0x1+0x1*-0x9c8+-0x596,_0x266bbe),_0x29a9b3&&_0x1e978c['setUvs'](0x1*0x2363+-0x1882+-0xae0,_0x29a9b3),_0x2a8a2f&&_0x1e978c['setVertexS'+'tream'](us,_0x2a8a2f,0x9e2+0xc4b*-0x1+0x26d,_0x2a8a2f['length']/(-0x1*0x1732+-0x71*-0x1b+-0x31*-0x3b),ia),_0x17d8c9&&_0x1e978c['setVertexS'+'tream'](gi,_0x17d8c9,-0x1*0x899+0x19*0x39+0x30c),_0x35a61f&&_0x1e978c['setIndices'](_0x35a61f),_0x1e978c['update'](),_0x1e978c;}set['morph'](_0x15e428){_0x15e428!==this['_morph']&&(this['_morph']&&this['_morph']['decRefCoun'+'t'](),this['_morph']=_0x15e428,_0x15e428&&_0x15e428['incRefCoun'+'t']());}get['morph'](){return this['_morph'];}set['aabb'](_0xc833ed){this['_aabb']=_0xc833ed,this['_aabbVer']++;}get['aabb'](){return this['_aabb'];}['destroy'](){const _0x18bdaf=this['morph'];_0x18bdaf&&(this['morph']=null,_0x18bdaf['refCount']<-0xe21*0x1+0x8*-0x2ea+0x2572&&_0x18bdaf['destroy']()),this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);for(let _0xe22f69=-0xe16+-0x1c0f+0x2a25;_0xe22f69<this['indexBuffe'+'r']['length'];_0xe22f69++)this['_destroyIn'+'dexBuffer'](_0xe22f69);this['indexBuffe'+'r']['length']=0x33*-0x7f+-0x115d+0x2b*0xfe,this['_geometryD'+'ata']=null;}['_destroyIn'+'dexBuffer'](_0x3aed7e){this['indexBuffe'+'r'][_0x3aed7e]&&(this['indexBuffe'+'r'][_0x3aed7e]['destroy'](),this['indexBuffe'+'r'][_0x3aed7e]=null);}['_initBoneA'+'abbs'](_0x176523){this['boneAabb']=[],this['boneUsed']=[];let _0x61f0b5,_0x1eecd4,_0x4181c3,_0x1a4799,_0x5067b5;const _0x359388=[],_0x59e828=[],_0x4dac7c=this['boneUsed'],_0x2484c0=this['skin']['boneNames']['length'];let _0x143c4f,_0x5810bd,_0x52090c;for(let _0x175506=-0x17f*0x9+-0x730+0x14a7;_0x175506<_0x2484c0;_0x175506++)_0x359388[_0x175506]=new D(Number['MAX_VALUE'],Number['MAX_VALUE'],Number['MAX_VALUE']),_0x59e828[_0x175506]=new D(-Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);const _0x2af5f0=new Ao(this['vertexBuff'+'er']),_0xf49fff=_0x2af5f0['element'][Pe],_0x12dc0d=_0x2af5f0['element'][gi],_0xb072d5=_0x2af5f0['element'][us],_0x1b9066=this['vertexBuff'+'er']['numVertice'+'s'];for(let _0x36e32f=-0x871*0x1+-0x59f*0x4+0x1eed;_0x36e32f<_0x1b9066;_0x36e32f++){for(let _0x43a249=-0x361*0x2+-0x1106*-0x1+-0xa44;_0x43a249<0xd*-0x202+0x2447+-0xa29;_0x43a249++)if(_0x12dc0d['array'][_0x12dc0d['index']+_0x43a249]>0x83b+0x5ab*-0x4+0xe71){const _0x4fa131=_0xb072d5['array'][_0xb072d5['index']+_0x43a249];if(_0x4dac7c[_0x4fa131]=!(-0x626*-0x4+0x1*0x1cc4+0x556*-0xa),_0x61f0b5=_0xf49fff['array'][_0xf49fff['index']],_0x1eecd4=_0xf49fff['array'][_0xf49fff['index']+(-0x2*0x9b5+0x1*-0xb6b+-0x1*-0x1ed6)],_0x4181c3=_0xf49fff['array'][_0xf49fff['index']+(-0x2*-0x6d3+-0x2179+0x13d5)],_0x1a4799=_0x59e828[_0x4fa131],_0x5067b5=_0x359388[_0x4fa131],_0x5067b5['x']>_0x61f0b5&&(_0x5067b5['x']=_0x61f0b5),_0x5067b5['y']>_0x1eecd4&&(_0x5067b5['y']=_0x1eecd4),_0x5067b5['z']>_0x4181c3&&(_0x5067b5['z']=_0x4181c3),_0x1a4799['x']<_0x61f0b5&&(_0x1a4799['x']=_0x61f0b5),_0x1a4799['y']<_0x1eecd4&&(_0x1a4799['y']=_0x1eecd4),_0x1a4799['z']<_0x4181c3&&(_0x1a4799['z']=_0x4181c3),_0x176523){let _0x29ef48=_0x143c4f=_0x61f0b5,_0x20fdba=_0x5810bd=_0x1eecd4,_0x5a3cec=_0x52090c=_0x4181c3;for(let _0x356d44=0x15b7+-0x15b5+0x1*-0x2;_0x356d44<_0x176523['length'];_0x356d44++){const _0x3ac0a9=_0x176523[_0x356d44],_0x357910=_0x3ac0a9['deltaPosit'+'ions'][_0x36e32f*(-0x2476*-0x1+-0x9*0x321+-0x84a)],_0x4a8e86=_0x3ac0a9['deltaPosit'+'ions'][_0x36e32f*(-0xdc8+0x100a*-0x1+0x443*0x7)+(-0x51e*0x7+0x260e+-0x23b)],_0x160993=_0x3ac0a9['deltaPosit'+'ions'][_0x36e32f*(-0x869+0x1e5e+-0x15f2)+(-0x779+-0x1ac8*-0x1+-0x134d)];_0x357910<-0x43*-0x41+-0x8f*-0x11+-0x1a82?_0x29ef48+=_0x357910:_0x143c4f+=_0x357910,_0x4a8e86<0x10fd*-0x1+0x15d*0x8+-0x615*-0x1?_0x20fdba+=_0x4a8e86:_0x5810bd+=_0x4a8e86,_0x160993<0xe6*0x27+0x93d*0x1+-0x2c47?_0x5a3cec+=_0x160993:_0x52090c+=_0x160993;}_0x5067b5['x']>_0x29ef48&&(_0x5067b5['x']=_0x29ef48),_0x5067b5['y']>_0x20fdba&&(_0x5067b5['y']=_0x20fdba),_0x5067b5['z']>_0x5a3cec&&(_0x5067b5['z']=_0x5a3cec),_0x1a4799['x']<_0x143c4f&&(_0x1a4799['x']=_0x143c4f),_0x1a4799['y']<_0x5810bd&&(_0x1a4799['y']=_0x5810bd),_0x1a4799['z']<_0x52090c&&(_0x1a4799['z']=_0x52090c);}}_0x2af5f0['next']();}const _0x2132e7=this['vertexBuff'+'er']['getFormat']()['elements']['find'](_0x297bdc=>_0x297bdc['name']===Pe);if(_0x2132e7&&_0x2132e7['normalize']){const _0x4d88b0=((()=>{switch(_0x2132e7['dataType']){case Hh:return _0x4e71d1=>Math['max'](_0x4e71d1/(-0x1*0xec3+0x7*0x303+-0x5d3),-(0x6e1+0x2203+0x28e3*-0x1));case ia:return _0x184e47=>_0x184e47/(0x1*0x72e+-0x3ff+-0x230);case Wh:return _0x5b847e=>Math['max'](_0x5b847e/(0x755e+0x1*0x5578+-0x4ad7*0x1),-(-0xe5a+0x2014+-0x15d*0xd));case _l:return _0x1b9d49=>_0x1b9d49/(-0x15bd5+0xcdcb+-0x24d*-0xad);default:return _0x4b91c6=>_0x4b91c6;}})());for(let _0x47c335=-0xe2*-0x23+-0x23e4+0x4fe;_0x47c335<_0x2484c0;_0x47c335++)if(_0x4dac7c[_0x47c335]){const _0x34f7aa=_0x359388[_0x47c335],_0x61f2a9=_0x59e828[_0x47c335];_0x34f7aa['set'](_0x4d88b0(_0x34f7aa['x']),_0x4d88b0(_0x34f7aa['y']),_0x4d88b0(_0x34f7aa['z'])),_0x61f2a9['set'](_0x4d88b0(_0x61f2a9['x']),_0x4d88b0(_0x61f2a9['y']),_0x4d88b0(_0x61f2a9['z']));}}for(let _0x5e2d35=0x24b4+0x20e*-0xb+-0x13*0xbe;_0x5e2d35<_0x2484c0;_0x5e2d35++){const _0x16a306=new De();_0x16a306['setMinMax'](_0x359388[_0x5e2d35],_0x59e828[_0x5e2d35]),this['boneAabb']['push'](_0x16a306);}}['_initGeome'+'tryData'](){this['_geometryD'+'ata']||(this['_geometryD'+'ata']=new oi(),this['vertexBuff'+'er']&&(this['_geometryD'+'ata']['vertexCoun'+'t']=this['vertexBuff'+'er']['numVertice'+'s'],this['_geometryD'+'ata']['maxVertice'+'s']=this['vertexBuff'+'er']['numVertice'+'s']),this['indexBuffe'+'r']['length']>-0xe17+0x1055*-0x1+0x1e6c&&this['indexBuffe'+'r'][0x29f+0xcb6+0x9d*-0x19]&&(this['_geometryD'+'ata']['indexCount']=this['indexBuffe'+'r'][0x1a4f+-0x2b8+-0x1797]['numIndices'],this['_geometryD'+'ata']['maxIndices']=this['indexBuffe'+'r'][0x8*0x1bc+0x557*0x1+-0x1*0x1337]['numIndices']));}['clear'](_0x39c0c7,_0x410840,_0x212c45=0xe*-0x1ef+-0x1d15+0x3827,_0x38d93d=0x74*0x11+0x2093+-0x2847){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['initDefaul'+'ts'](),this['_geometryD'+'ata']['recreate']=!(0x5e5+-0x595*-0x1+-0xb7a),this['_geometryD'+'ata']['maxVertice'+'s']=_0x212c45,this['_geometryD'+'ata']['maxIndices']=_0x38d93d,this['_geometryD'+'ata']['verticesUs'+'age']=_0x39c0c7?ms:zc,this['_geometryD'+'ata']['indicesUsa'+'ge']=_0x410840?ms:zc;}['setVertexS'+'tream'](_0x18872d,_0x2bfa6c,_0x19b0d8,_0x1900bd,_0x4c03f7=Ve,_0x13367a=!(0x2535+-0x25c0+-0x14*-0x7),_0xf35728=!(-0x1deb+0xdd+-0x1d0f*-0x1)){this['_initGeome'+'tryData']();const _0x1eaa17=_0x1900bd||_0x2bfa6c['length']/_0x19b0d8;this['_geometryD'+'ata']['_changeVer'+'texCount'](_0x1eaa17,_0x18872d),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x24a1*-0x1+-0x1cbb+-0x7e6),this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x18872d]=new Nw(_0x2bfa6c,_0x19b0d8,_0x4c03f7,_0x13367a,_0xf35728);}['getVertexS'+'tream'](_0x4d2c77,_0x2afeb0){let _0x192f95=-0x25f7*-0x1+0x139*0x1+-0x2730,_0x2891a0=!(0x1*0x2057+-0x1*-0x15cd+-0x3623);if(this['_geometryD'+'ata']){const _0xdb4a50=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x4d2c77];_0xdb4a50&&(_0x2891a0=!(0x28*-0x1f+0x2*-0x15b+0x78e),_0x192f95=this['_geometryD'+'ata']['vertexCoun'+'t'],ArrayBuffer['isView'](_0x2afeb0)?_0x2afeb0['set'](_0xdb4a50['data']):(_0x2afeb0['length']=0x1f3b+-0xe49+-0x10f2,_0x2afeb0['push'](_0xdb4a50['data'])));}return _0x2891a0||this['vertexBuff'+'er']&&(_0x192f95=new Ao(this['vertexBuff'+'er'])['readData'](_0x4d2c77,_0x2afeb0)),_0x192f95;}['setPositio'+'ns'](_0x356578,_0x366ecb=oi['DEFAULT_CO'+'MPONENTS_P'+'OSITION'],_0x379796){this['setVertexS'+'tream'](Pe,_0x356578,_0x366ecb,_0x379796,Ve,!(-0x25e7+0x1*0x527+0x20c1));}['setNormals'](_0x351036,_0x4bb315=oi['DEFAULT_CO'+'MPONENTS_N'+'ORMAL'],_0x45590d){this['setVertexS'+'tream'](gs,_0x351036,_0x4bb315,_0x45590d,Ve,!(-0xa*0x2fc+-0x3*0xa0b+0x3bfa));}['setUvs'](_0x147b7f,_0x422a33,_0x29456b=oi['DEFAULT_CO'+'MPONENTS_U'+'V'],_0xc82a37){this['setVertexS'+'tream'](fm+_0x147b7f,_0x422a33,_0x29456b,_0xc82a37,Ve,!(-0x1*0x1f03+0x11b*-0xb+0x2b2d));}['setColors'](_0x3f28cc,_0x324503=oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x101807){this['setVertexS'+'tream'](Wt,_0x3f28cc,_0x324503,_0x101807,Ve,!(0x1*0x134f+0x2156+-0xd29*0x4));}['setColors3'+'2'](_0x231017,_0x2dfe27){this['setVertexS'+'tream'](Wt,_0x231017,oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x2dfe27,ia,!(0xe1f+0x191d+0x139e*-0x2));}['setIndices'](_0x37061f,_0x1f5f41){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x77*0xb+-0x16bf*0x1+0x11a2),this['_geometryD'+'ata']['indices']=_0x37061f,this['_geometryD'+'ata']['indexCount']=_0x1f5f41||_0x37061f['length'];}['getPositio'+'ns'](_0x3e1bbe){return this['getVertexS'+'tream'](Pe,_0x3e1bbe);}['getNormals'](_0x481cb6){return this['getVertexS'+'tream'](gs,_0x481cb6);}['getUvs'](_0x35137e,_0xbf1f78){return this['getVertexS'+'tream'](fm+_0x35137e,_0xbf1f78);}['getColors'](_0x5ede30){return this['getVertexS'+'tream'](Wt,_0x5ede30);}['getIndices'](_0x3afc4a){let _0x156180=-0x1f15+-0x1903+0x3818;if(this['_geometryD'+'ata']&&this['_geometryD'+'ata']['indices']){const _0x1260eb=this['_geometryD'+'ata']['indices'];if(_0x156180=this['_geometryD'+'ata']['indexCount'],ArrayBuffer['isView'](_0x3afc4a))_0x3afc4a['set'](_0x1260eb);else{_0x3afc4a['length']=-0x6c9+0xf99*0x1+-0x8d0;for(let _0x3f40a5=-0x185c*-0x1+0xa84+-0x45c*0x8,_0x4481e0=_0x1260eb['length'];_0x3f40a5<_0x4481e0;_0x3f40a5++)_0x3afc4a['push'](_0x1260eb[_0x3f40a5]);}}else this['indexBuffe'+'r']['length']>-0x2672+0x50e*-0x5+0x3fb8&&this['indexBuffe'+'r'][-0x1*0xcf7+0x25e4+-0x18ed]&&(_0x156180=this['indexBuffe'+'r'][0x233b+0x806*-0x3+-0x1*0xb29]['readData'](_0x3afc4a));return _0x156180;}['update'](_0x1c1259=qs,_0x21f042=!(-0xe67+0x1*0x2551+0x1a3*-0xe)){if(this['_geometryD'+'ata']){if(_0x21f042){const _0x4ba5f7=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][Pe];_0x4ba5f7&&_0x4ba5f7['componentC'+'ount']===-0x1267*-0x1+-0xa*-0x337+-0x328a&&(this['_aabb']['compute'](_0x4ba5f7['data'],this['_geometryD'+'ata']['vertexCoun'+'t']),this['_aabbVer']++);}let _0x54cca1=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['vertexCoun'+'t']>this['_geometryD'+'ata']['maxVertice'+'s']&&(_0x54cca1=!(-0x1962+-0x19a4*-0x1+-0x16*0x3),this['_geometryD'+'ata']['maxVertice'+'s']=this['_geometryD'+'ata']['vertexCoun'+'t']),_0x54cca1&&this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);let _0x3ccc96=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['indexCount']>this['_geometryD'+'ata']['maxIndices']&&(_0x3ccc96=!(0xdf*-0x14+-0x6ee+-0x185a*-0x1),this['_geometryD'+'ata']['maxIndices']=this['_geometryD'+'ata']['indexCount']),_0x3ccc96&&this['indexBuffe'+'r']['length']>-0x13b8+-0x5ab+0x1963&&this['indexBuffe'+'r'][0x17c2+-0xcd1*-0x1+-0x2493]&&(this['indexBuffe'+'r'][0x61*-0x43+-0x1d7+0x55*0x52]['destroy'](),this['indexBuffe'+'r'][0x699+-0x115d+-0x6a*-0x1a]=null),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&this['_updateVer'+'texBuffer'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&this['_updateInd'+'exBuffer'](),this['primitive'][0x23f+-0x13eb*0x1+0x2*0x8d6]['type']=_0x1c1259,this['indexBuffe'+'r']['length']>0x5*-0x4c+-0x672+0x7ee&&this['indexBuffe'+'r'][-0x586+0xe85+-0x7*0x149]?this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&(this['primitive'][-0x1e7*-0x5+0x1dd1+-0x2754]['count']=this['_geometryD'+'ata']['indexCount'],this['primitive'][0xaf0+0x269c+-0x12e*0x2a]['indexed']=!(-0x10ab*0x1+0x755+0x1de*0x5)):this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&(this['primitive'][0x1857+-0xebd+-0x99a]['count']=this['_geometryD'+'ata']['vertexCoun'+'t'],this['primitive'][0xb*-0x125+-0x9e8+-0x167f*-0x1]['indexed']=!(-0x1*-0xd3+0x1f6a+-0x203c)),this['_geometryD'+'ata']['vertexCoun'+'t']=-0x1932+0xfda+-0x2*-0x4ac,this['_geometryD'+'ata']['indexCount']=-0x19c0*-0x1+0xa99+-0x2459,this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(0x25c2+-0x7ba*-0x5+-0x4c63),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(-0x73+0x18c*0x15+-0x2008),this['_geometryD'+'ata']['recreate']=!(-0x2327+0x2333+-0xb*0x1),this['updateRend'+'erStates']();}}['_buildVert'+'exFormat'](_0x3f1f8e){const _0x5d570b=[];for(const _0x1e2b6c in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x2358b1=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x1e2b6c];_0x5d570b['push']({'semantic':_0x1e2b6c,'components':_0x2358b1['componentC'+'ount'],'type':_0x2358b1['dataType'],'normalize':_0x2358b1['dataTypeNo'+'rmalize'],'asInt':_0x2358b1['asInt']});}return new kt(this['device'],_0x5d570b,_0x3f1f8e);}['_updateVer'+'texBuffer'](){if(!this['vertexBuff'+'er']){const _0xab2d39=this['_geometryD'+'ata']['maxVertice'+'s'],_0x571ed6=this['_buildVert'+'exFormat'](_0xab2d39);this['vertexBuff'+'er']=new Ds(this['device'],_0x571ed6,_0xab2d39,{'usage':this['_geometryD'+'ata']['verticesUs'+'age'],'storage':this['_storageVe'+'rtex']});}const _0x482684=new Ao(this['vertexBuff'+'er']),_0x30805b=this['_geometryD'+'ata']['vertexCoun'+'t'];for(const _0x2cd5cc in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x4fa3ff=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x2cd5cc];_0x482684['writeData'](_0x2cd5cc,_0x4fa3ff['data'],_0x30805b),delete this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x2cd5cc];}_0x482684['end']();}['_updateInd'+'exBuffer'](){if(this['indexBuffe'+'r']['length']<=0xfbc+-0x15*-0xab+0x191*-0x13||!this['indexBuffe'+'r'][0x1cb7+0x1320+-0x2fd7]){const _0x264091=this['_geometryD'+'ata']['maxVertice'+'s'],_0x4e9c31=_0x264091>0x24b*0x8a+0x12d5f+-0x167*0x102||_0x264091===0x14d3+0x2284+-0x3757*0x1?yr:ji,_0x28624f=this['_storageIn'+'dex']?{'storage':!(0x20*0x119+-0xa20+-0x1900)}:void(-0xad+-0xe18+0xec5);this['indexBuffe'+'r'][0x26*-0x7f+0x2064+-0xd8a*0x1]=new xr(this['device'],_0x4e9c31,this['_geometryD'+'ata']['maxIndices'],this['_geometryD'+'ata']['indicesUsa'+'ge'],void(0x1e12+-0x1d*0x3d+0xb*-0x21b),_0x28624f);}const _0x1a30bb=this['_geometryD'+'ata']['indices'];_0x1a30bb&&(this['indexBuffe'+'r'][0xc02*-0x3+0x2c*0x31+-0x1b9a*-0x1]['writeData'](_0x1a30bb,this['_geometryD'+'ata']['indexCount']),this['_geometryD'+'ata']['indices']=null);}['prepareRen'+'derState'](_0x4a363c){_0x4a363c===Vr?this['generateWi'+'reframe']():_0x4a363c===Bl&&(this['primitive'][Bl]={'type':Vh,'base':0x0,'baseVertex':0x0,'count':this['vertexBuff'+'er']?this['vertexBuff'+'er']['numVertice'+'s']:0x1af8+0x5a1*-0x1+-0x1557,'indexed':!(0x223+0x55*0x2+0xb3*-0x4)});}['updateRend'+'erStates'](){this['primitive'][Bl]&&this['prepareRen'+'derState'](Bl),this['primitive'][Vr]&&this['prepareRen'+'derState'](Vr);}['generateWi'+'reframe'](){this['_destroyIn'+'dexBuffer'](Vr);const _0x29eb46=this['vertexBuff'+'er']['numVertice'+'s'],_0x131cc7=[];let _0x5a9ce3;if(this['indexBuffe'+'r']['length']>-0x1d84+-0x1a*0x89+0x22*0x147&&this['indexBuffe'+'r'][-0x890*-0x1+-0x1431+0xba1]){const _0xf3aa27=[[0x17*0x155+0x4*0x292+-0x19*0x1a3,0xdcd+0xccf+-0x1a9b],[0x1169*-0x2+-0x25a1+-0x4874*-0x1,0x229d+0xc07*0x3+0xe8*-0x4e],[-0x18af+0x13d6+0x1*0x4db,0x1a1b*0x1+-0x2a4*-0xd+-0x3c6f]],_0x45dbd9=this['primitive'][nn]['base'],_0x3bb594=this['primitive'][nn]['count'],_0x18de38=this['primitive'][nn]['baseVertex']||-0x1f45+0x10ec+0xe59,_0x8aef2c=this['indexBuffe'+'r'][nn],_0x3a211e=new Kc[_0x8aef2c['format']](_0x8aef2c['storage']),_0x375f55=new Set();for(let _0x549a51=_0x45dbd9;_0x549a51<_0x45dbd9+_0x3bb594;_0x549a51+=-0x1fa+0x1e0c*-0x1+0x3b*0x8b)for(let _0x371012=-0x2691*-0x1+-0x1*0x547+-0x214a;_0x371012<0x8a2*0x4+0xc7+-0x5e2*0x6;_0x371012++){const _0x2e382b=_0x3a211e[_0x549a51+_0xf3aa27[_0x371012][0x1*-0x1ece+0x12da+0xbf4]]+_0x18de38,_0x3bac2f=_0x3a211e[_0x549a51+_0xf3aa27[_0x371012][0x1ec6+-0x1*0x79f+-0x1726]]+_0x18de38,_0x25a2c7=_0x2e382b>_0x3bac2f?_0x3bac2f*_0x29eb46+_0x2e382b:_0x2e382b*_0x29eb46+_0x3bac2f;_0x375f55['has'](_0x25a2c7)||(_0x375f55['add'](_0x25a2c7),_0x131cc7['push'](_0x2e382b,_0x3bac2f));}_0x5a9ce3=_0x8aef2c['format'];}else{for(let _0x194c0a=-0x69d+-0x2*-0x2f5+0xb3;_0x194c0a<_0x29eb46;_0x194c0a+=0xbd1+0xc8e+-0x2*0xc2e)_0x131cc7['push'](_0x194c0a,_0x194c0a+(-0xdb2+0x4e*-0x2b+-0x8ef*-0x3),_0x194c0a+(-0x60+0x1be0+-0x1b7f),_0x194c0a+(-0x1426+0x515+0x11*0xe3),_0x194c0a+(-0x1e4+-0x1d*-0x1f+0x7*-0x3b),_0x194c0a);_0x5a9ce3=_0x131cc7['length']>0x2*-0xe824+-0x91*0xa1+0x32b78?yr:ji;}const _0x4df656=new xr(this['vertexBuff'+'er']['device'],_0x5a9ce3,_0x131cc7['length']);new Kc[_0x4df656['format']](_0x4df656['storage'])['set'](_0x131cc7),_0x4df656['unlock'](),this['primitive'][Vr]={'type':Gh,'base':0x0,'baseVertex':0x0,'count':_0x131cc7['length'],'indexed':!(0x1b5f+0x5*-0xb7+-0x17cc)},this['indexBuffe'+'r'][Vr]=_0x4df656;}}const $m=new te(),xd=new D(),Xm=new le(),Td=new le(),qm=new D(),jm=new D(),kw=new te(),Uw=new le(),rs=new D(),Zn=new te(),as=new le(),Aa=new le(),Ym=new te(),wd=new D(),Vl=new D();function Km(_0x538a9a,_0x44e5da){return _0x538a9a instanceof Function?_0x538a9a:_0x107b63=>{let _0x10178b=_0x107b63[_0x538a9a];return _0x10178b instanceof Function&&(_0x10178b=_0x10178b()),_0x10178b===_0x44e5da;};}function Ny(_0x59fddd,_0x28d8ff){if(_0x28d8ff(_0x59fddd))return _0x59fddd;const _0x3327ad=_0x59fddd['_children'],_0x2c45de=_0x3327ad['length'];for(let _0x5c23f6=0x7ce+0x389+-0xb57;_0x5c23f6<_0x2c45de;++_0x5c23f6){const _0x1a8dc7=Ny(_0x3327ad[_0x5c23f6],_0x28d8ff);if(_0x1a8dc7)return _0x1a8dc7;}return null;}class Ie extends me{constructor(_0x1e2633='Untitled'){super(),h(this,'name'),h(this,'tags',new To(this)),h(this,'localPosit'+'ion',new D()),h(this,'localRotat'+'ion',new le()),h(this,'localScale',new D(-0x1*-0x17d5+0x1*-0x1538+-0x29c,-0x1979+0x13b7+0x5*0x127,0x557+-0x1*-0x259+-0x7af)),h(this,'localEuler'+'Angles',new D()),h(this,'position',new D()),h(this,'rotation',new le()),h(this,'eulerAngle'+'s',new D()),h(this,'_scale',null),h(this,'localTrans'+'form',new te()),h(this,'_dirtyLoca'+'l',!(-0x19c8+0x2*-0xbce+0x3165*0x1)),h(this,'_aabbVer',0x809+0x6d7*-0x1+-0x2*0x99),h(this,'_frozen',!(-0xdaa+-0x1161+-0x7c3*-0x4)),h(this,'worldTrans'+'form',new te()),h(this,'_dirtyWorl'+'d',!(0x1*0xaed+-0x520*-0x1+0x13c*-0xd)),h(this,'_worldScal'+'eSign',0x2*0x1232+0x28c*0x1+-0x26f0),h(this,'_normalMat'+'rix',new _i()),h(this,'_dirtyNorm'+'al',!(-0x46b+-0x1a1a+0xd*0x259)),h(this,'_right',null),h(this,'_up',null),h(this,'_forward',null),h(this,'_parent',null),h(this,'_children',[]),h(this,'_graphDept'+'h',-0x1e60+-0x15b2+0x3412),h(this,'_enabled',!(0x59e*0x1+-0x1*0xb95+-0x1*-0x5f7)),h(this,'_enabledIn'+'Hierarchy',!(0x5*0x456+-0x33d+-0x1270)),h(this,'scaleCompe'+'nsation',!(0x264b*-0x1+-0x82d*-0x4+0x598)),this['name']=_0x1e2633;}get['right'](){return this['_right']||(this['_right']=new D()),this['getWorldTr'+'ansform']()['getX'](this['_right'])['normalize']();}get['up'](){return this['_up']||(this['_up']=new D()),this['getWorldTr'+'ansform']()['getY'](this['_up'])['normalize']();}get['forward'](){return this['_forward']||(this['_forward']=new D()),this['getWorldTr'+'ansform']()['getZ'](this['_forward'])['normalize']()['mulScalar'](-(-0x1*-0x1a8e+0x58*-0x50+0xf3));}get['normalMatr'+'ix'](){const _0x2f649f=this['_normalMat'+'rix'];return this['_dirtyNorm'+'al']&&(_0x2f649f['invertMat4'](this['getWorldTr'+'ansform']())['transpose'](),this['_dirtyNorm'+'al']=!(0x2623+0x50*0x69+-0x46f2)),_0x2f649f;}set['enabled'](_0x3b4a75){var _0x4a0a1a;this['_enabled']!==_0x3b4a75&&(this['_enabled']=_0x3b4a75,(_0x3b4a75&&((_0x4a0a1a=this['_parent'])!=null&&_0x4a0a1a['enabled'])||!_0x3b4a75)&&this['_notifyHie'+'rarchyStat'+'eChanged'](this,_0x3b4a75));}get['enabled'](){return this['_enabled']&&this['_enabledIn'+'Hierarchy'];}get['parent'](){return this['_parent'];}get['path'](){let _0x354f35=this['_parent'];if(!_0x354f35)return'';let _0x99ae8c=this['name'];for(;_0x354f35&&_0x354f35['_parent'];)_0x99ae8c=_0x354f35['name']+'/'+_0x99ae8c,_0x354f35=_0x354f35['_parent'];return _0x99ae8c;}get['root'](){let _0x50d3e7=this;for(;_0x50d3e7['_parent'];)_0x50d3e7=_0x50d3e7['_parent'];return _0x50d3e7;}get['children'](){return this['_children'];}get['graphDepth'](){return this['_graphDept'+'h'];}['_notifyHie'+'rarchyStat'+'eChanged'](_0x264ed3,_0x48d6c7){_0x264ed3['_onHierarc'+'hyStateCha'+'nged'](_0x48d6c7);const _0x5b0edc=_0x264ed3['_children'];for(let _0x11c68a=0xc83+0x1f1+-0xe74,_0x1573ff=_0x5b0edc['length'];_0x11c68a<_0x1573ff;_0x11c68a++)_0x5b0edc[_0x11c68a]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x5b0edc[_0x11c68a],_0x48d6c7);}['_onHierarc'+'hyStateCha'+'nged'](_0x469f1b){this['_enabledIn'+'Hierarchy']=_0x469f1b,_0x469f1b&&!this['_frozen']&&this['_unfreezeP'+'arentToRoo'+'t']();}['_cloneInte'+'rnal'](_0x58274c){_0x58274c['name']=this['name'];const _0x3b4920=this['tags']['_list'];_0x58274c['tags']['clear']();for(let _0x23ba3f=-0x142c+0x2653*0x1+-0x1227;_0x23ba3f<_0x3b4920['length'];_0x23ba3f++)_0x58274c['tags']['add'](_0x3b4920[_0x23ba3f]);_0x58274c['localPosit'+'ion']['copy'](this['localPosit'+'ion']),_0x58274c['localRotat'+'ion']['copy'](this['localRotat'+'ion']),_0x58274c['localScale']['copy'](this['localScale']),_0x58274c['localEuler'+'Angles']['copy'](this['localEuler'+'Angles']),_0x58274c['position']['copy'](this['position']),_0x58274c['rotation']['copy'](this['rotation']),_0x58274c['eulerAngle'+'s']['copy'](this['eulerAngle'+'s']),_0x58274c['localTrans'+'form']['copy'](this['localTrans'+'form']),_0x58274c['_dirtyLoca'+'l']=this['_dirtyLoca'+'l'],_0x58274c['worldTrans'+'form']['copy'](this['worldTrans'+'form']),_0x58274c['_dirtyWorl'+'d']=this['_dirtyWorl'+'d'],_0x58274c['_dirtyNorm'+'al']=this['_dirtyNorm'+'al'],_0x58274c['_aabbVer']=this['_aabbVer']+(0x40a*-0x4+-0x1af*0x2+0x1387),_0x58274c['_enabled']=this['_enabled'],_0x58274c['scaleCompe'+'nsation']=this['scaleCompe'+'nsation'],_0x58274c['_enabledIn'+'Hierarchy']=!(-0xcb9+0x1c7f+-0xfc5);}['clone'](){const _0x429329=new this['constructo'+'r']();return this['_cloneInte'+'rnal'](_0x429329),_0x429329;}['copy'](_0x1dd681){return _0x1dd681['_cloneInte'+'rnal'](this),this;}['destroy'](){this['remove']();const _0x2517a0=this['_children'];for(;_0x2517a0['length'];){const _0x1760b9=_0x2517a0['pop']();_0x1760b9['_parent']=null,_0x1760b9['destroy']();}this['fire']('destroy',this),this['off']();}['find'](_0x33db1f,_0x3b940a){const _0xded319=[],_0x49c296=Km(_0x33db1f,_0x3b940a);return this['forEach'](_0x4d51cd=>{_0x49c296(_0x4d51cd)&&_0xded319['push'](_0x4d51cd);}),_0xded319;}['findOne'](_0x43096a,_0x56d4c6){const _0xcf885a=Km(_0x43096a,_0x56d4c6);return Ny(this,_0xcf885a);}['findByTag'](..._0xd24fec){const _0x919eee=[],_0x340fe8=(_0x115531,_0x3094fd)=>{_0x3094fd&&_0x115531['tags']['has'](..._0xd24fec)&&_0x919eee['push'](_0x115531);for(let _0x1f03dd=-0x2621+-0x23*0x3e+-0xf89*-0x3;_0x1f03dd<_0x115531['_children']['length'];_0x1f03dd++)_0x340fe8(_0x115531['_children'][_0x1f03dd],!(0x1221+0x26e2+-0x3903));};return _0x340fe8(this,!(-0x347+-0x160d+0x1955)),_0x919eee;}['findByName'](_0x332f67){return this['findOne']('name',_0x332f67);}['findByPath'](_0x17b36b){const _0x145108=Array['isArray'](_0x17b36b)?_0x17b36b:_0x17b36b['split']('/');let _0x256eea=this;for(let _0x130d65=0x3fb*0x1+-0x1dfa+0x5*0x533,_0x1ddcca=_0x145108['length'];_0x130d65<_0x1ddcca;++_0x130d65)if(_0x256eea=_0x256eea['children']['find'](_0x52cbcb=>_0x52cbcb['name']===_0x145108[_0x130d65]),!_0x256eea)return null;return _0x256eea;}['forEach'](_0x39b50f,_0x2b4cdd){_0x39b50f['call'](_0x2b4cdd,this);const _0x72d159=this['_children'],_0xe778f3=_0x72d159['length'];for(let _0x302f53=0x16*0x2f+-0x1d0d+0x1903;_0x302f53<_0xe778f3;++_0x302f53)_0x72d159[_0x302f53]['forEach'](_0x39b50f,_0x2b4cdd);}['isDescenda'+'ntOf'](_0x18e809){let _0x2ec219=this['_parent'];for(;_0x2ec219;){if(_0x2ec219===_0x18e809)return!(-0x1fe*0x1+0x1b30+-0x1932);_0x2ec219=_0x2ec219['_parent'];}return!(0x3c*-0x4c+0x2573+0x7*-0x2ce);}['isAncestor'+'Of'](_0x25f76a){return _0x25f76a['isDescenda'+'ntOf'](this);}['getEulerAn'+'gles'](){return this['getWorldTr'+'ansform']()['getEulerAn'+'gles'](this['eulerAngle'+'s']),this['eulerAngle'+'s'];}['getLocalEu'+'lerAngles'](){return this['localRotat'+'ion']['getEulerAn'+'gles'](this['localEuler'+'Angles']),this['localEuler'+'Angles'];}['getLocalPo'+'sition'](){return this['localPosit'+'ion'];}['getLocalRo'+'tation'](){return this['localRotat'+'ion'];}['getLocalSc'+'ale'](){return this['localScale'];}['getLocalTr'+'ansform'](){return this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(0x1d67+-0x6*-0x36d+-0x31f4)),this['localTrans'+'form'];}['getPositio'+'n'](){return this['getWorldTr'+'ansform']()['getTransla'+'tion'](this['position']),this['position'];}['getRotatio'+'n'](){return this['rotation']['setFromMat'+'4'](this['getWorldTr'+'ansform']()),this['rotation'];}['getScale'](){return this['_scale']||(this['_scale']=new D()),this['getWorldTr'+'ansform']()['getScale'](this['_scale']);}['getWorldTr'+'ansform'](){return!this['_dirtyLoca'+'l']&&!this['_dirtyWorl'+'d']?this['worldTrans'+'form']:(this['_parent']&&this['_parent']['getWorldTr'+'ansform'](),this['_sync'](),this['worldTrans'+'form']);}get['worldScale'+'Sign'](){return this['_worldScal'+'eSign']===-0x1b45+-0x9*0x3b5+0x3ca2&&(this['_worldScal'+'eSign']=this['getWorldTr'+'ansform']()['scaleSign']),this['_worldScal'+'eSign'];}['remove'](){var _0x2bafae;(_0x2bafae=this['_parent'])==null||_0x2bafae['removeChil'+'d'](this);}['reparent'](_0x2294d4,_0x504b0c){this['remove'](),_0x2294d4&&(_0x504b0c>=-0x3e5+-0x2672+-0x2a57*-0x1?_0x2294d4['insertChil'+'d'](this,_0x504b0c):_0x2294d4['addChild'](this));}['setLocalEu'+'lerAngles'](_0x4636dc,_0xc9a26d,_0x4cdbe0){this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x4636dc,_0xc9a26d,_0x4cdbe0),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalPo'+'sition'](_0x341de9,_0x3e07e1,_0xcfcf4){_0x341de9 instanceof D?this['localPosit'+'ion']['copy'](_0x341de9):this['localPosit'+'ion']['set'](_0x341de9,_0x3e07e1,_0xcfcf4),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalRo'+'tation'](_0x3bb264,_0x387c8f,_0x39a369,_0x4f0f66){_0x3bb264 instanceof le?this['localRotat'+'ion']['copy'](_0x3bb264):this['localRotat'+'ion']['set'](_0x3bb264,_0x387c8f,_0x39a369,_0x4f0f66),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalSc'+'ale'](_0x402118,_0x5b0e15,_0x13f9fe){_0x402118 instanceof D?this['localScale']['copy'](_0x402118):this['localScale']['set'](_0x402118,_0x5b0e15,_0x13f9fe),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_dirtifyLo'+'cal'](){this['_dirtyLoca'+'l']||(this['_dirtyLoca'+'l']=!(0x1a8b+-0x3b*-0x16+-0x1f9d),this['_dirtyWorl'+'d']||this['_dirtifyWo'+'rld']());}['_unfreezeP'+'arentToRoo'+'t'](){let _0x158ccc=this['_parent'];for(;_0x158ccc;)_0x158ccc['_frozen']=!(0x3*0x47f+-0xc6d*0x1+0x10f*-0x1),_0x158ccc=_0x158ccc['_parent'];}['_dirtifyWo'+'rld'](){this['_dirtyWorl'+'d']||this['_unfreezeP'+'arentToRoo'+'t'](),this['_dirtifyWo'+'rldInterna'+'l']();}['_dirtifyWo'+'rldInterna'+'l'](){if(!this['_dirtyWorl'+'d']){this['_frozen']=!(-0x227f*0x1+-0x262b+-0x27*-0x1dd),this['_dirtyWorl'+'d']=!(0x29*0x44+-0x22aa+0x17c6);for(let _0x14a320=-0x7b5*0x5+0x16e2+0xfa7;_0x14a320<this['_children']['length'];_0x14a320++)this['_children'][_0x14a320]['_dirtyWorl'+'d']||this['_children'][_0x14a320]['_dirtifyWo'+'rldInterna'+'l']();}this['_dirtyNorm'+'al']=!(-0x2f1+-0x980+0x7*0x1c7),this['_worldScal'+'eSign']=0x54*0x4c+0x1694+-0x2f84,this['_aabbVer']++;}['setPositio'+'n'](_0x1a1cf5,_0x12b182,_0xec86df){_0x1a1cf5 instanceof D?rs['copy'](_0x1a1cf5):rs['set'](_0x1a1cf5,_0x12b182,_0xec86df),this['_parent']===null?this['localPosit'+'ion']['copy'](rs):(Zn['copy'](this['_parent']['getWorldTr'+'ansform']())['invert'](),Zn['transformP'+'oint'](rs,this['localPosit'+'ion'])),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setRotatio'+'n'](_0x87e088,_0x304aff,_0x18ac9d,_0x367e48){if(_0x87e088 instanceof le?as['copy'](_0x87e088):as['set'](_0x87e088,_0x304aff,_0x18ac9d,_0x367e48),this['_parent']===null)this['localRotat'+'ion']['copy'](as);else{const _0x28947a=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x28947a)['invert'](),this['localRotat'+'ion']['copy'](Aa)['mul'](as);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setPositio'+'nAndRotati'+'on'](_0x166e34,_0x5aee2d){if(this['_parent']===null)this['localPosit'+'ion']['copy'](_0x166e34),this['localRotat'+'ion']['copy'](_0x5aee2d);else{const _0xaaeefb=this['_parent']['getWorldTr'+'ansform']();Zn['copy'](_0xaaeefb)['invert'](),Zn['transformP'+'oint'](_0x166e34,this['localPosit'+'ion']),this['localRotat'+'ion']['setFromMat'+'4'](Zn)['mul'](_0x5aee2d);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setEulerAn'+'gles'](_0x38efd8,_0x265d97,_0x98aa7f){if(this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x38efd8,_0x265d97,_0x98aa7f),this['_parent']!==null){const _0x42cf3e=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x42cf3e)['invert'](),this['localRotat'+'ion']['mul2'](Aa,this['localRotat'+'ion']);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['addChild'](_0x181fec){this['_prepareIn'+'sertChild'](_0x181fec),this['_children']['push'](_0x181fec),this['_onInsertC'+'hild'](_0x181fec);}['addChildAn'+'dSaveTrans'+'form'](_0x4713fc){const _0x3243e7=_0x4713fc['getPositio'+'n'](),_0x1e7311=_0x4713fc['getRotatio'+'n']();this['_prepareIn'+'sertChild'](_0x4713fc),_0x4713fc['setPositio'+'n'](kw['copy'](this['worldTrans'+'form'])['invert']()['transformP'+'oint'](_0x3243e7)),_0x4713fc['setRotatio'+'n'](Uw['copy'](this['getRotatio'+'n']())['invert']()['mul'](_0x1e7311)),this['_children']['push'](_0x4713fc),this['_onInsertC'+'hild'](_0x4713fc);}['insertChil'+'d'](_0x52011f,_0x4955fc){this['_prepareIn'+'sertChild'](_0x52011f),this['_children']['splice'](_0x4955fc,-0x17dd+-0x4*0xe8+0x1b7d,_0x52011f),this['_onInsertC'+'hild'](_0x52011f);}['_prepareIn'+'sertChild'](_0x2c1b81){_0x2c1b81['remove'](),w['assert'](_0x2c1b81!==this,'GraphNode\x20'+(_0x2c1b81==null?void(-0x100e+-0x1*0x565+0x1573):_0x2c1b81['name'])+('\x20cannot\x20be'+'\x20a\x20child\x20o'+'f\x20itself')),w['assert'](!this['isDescenda'+'ntOf'](_0x2c1b81),'GraphNode\x20'+(_0x2c1b81==null?void(0x11*-0xa7+0x473+0x6a4):_0x2c1b81['name'])+('\x20cannot\x20ad'+'d\x20an\x20ances'+'tor\x20as\x20a\x20c'+'hild'));}['_fireOnHie'+'rarchy'](_0x5188a2,_0x596363,_0x288178){this['fire'](_0x5188a2,_0x288178);for(let _0x39fa23=0x20d2+0x92f+-0x2a01;_0x39fa23<this['_children']['length'];_0x39fa23++)this['_children'][_0x39fa23]['_fireOnHie'+'rarchy'](_0x596363,_0x596363,_0x288178);}['_onInsertC'+'hild'](_0xa7ca94){_0xa7ca94['_parent']=this;const _0x18785b=_0xa7ca94['_enabled']&&this['enabled'];_0xa7ca94['_enabledIn'+'Hierarchy']!==_0x18785b&&(_0xa7ca94['_enabledIn'+'Hierarchy']=_0x18785b,_0xa7ca94['_notifyHie'+'rarchyStat'+'eChanged'](_0xa7ca94,_0x18785b)),_0xa7ca94['_updateGra'+'phDepth'](),_0xa7ca94['_dirtifyWo'+'rld'](),this['_frozen']&&_0xa7ca94['_unfreezeP'+'arentToRoo'+'t'](),_0xa7ca94['_fireOnHie'+'rarchy']('insert','inserthier'+'archy',this),this['fire']&&this['fire']('childinser'+'t',_0xa7ca94);}['_updateGra'+'phDepth'](){this['_graphDept'+'h']=this['_parent']?this['_parent']['_graphDept'+'h']+(-0x1635+0x3*-0xb01+0x3739):-0x161b+-0x11c*0xd+0x2487;for(let _0x4edb10=0x10d7+-0x1d73+-0x1*-0xc9c,_0x3a6d58=this['_children']['length'];_0x4edb10<_0x3a6d58;_0x4edb10++)this['_children'][_0x4edb10]['_updateGra'+'phDepth']();}['removeChil'+'d'](_0x506d0d){const _0x52e4c0=this['_children']['indexOf'](_0x506d0d);_0x52e4c0!==-(-0xaf+0x1bd*-0xe+-0x1*-0x1906)&&(this['_children']['splice'](_0x52e4c0,-0xb2*-0x7+0xda7+-0x1284),_0x506d0d['_parent']=null,_0x506d0d['_fireOnHie'+'rarchy']('remove','removehier'+'archy',this),this['fire']('childremov'+'e',_0x506d0d));}['_sync'](){if(this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x12b*-0x1f+0x6fa+-0x2b2e)),this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['scaleCompe'+'nsation']){let _0x5c4c96;const _0x1c67e8=this['_parent'];let _0x4e260c=this['localScale'],_0x123d22=_0x1c67e8;if(_0x123d22){for(;_0x123d22&&_0x123d22['scaleCompe'+'nsation'];)_0x123d22=_0x123d22['_parent'];_0x123d22&&(_0x123d22=_0x123d22['_parent'],_0x123d22&&(_0x5c4c96=_0x123d22['worldTrans'+'form']['getScale'](),qm['mul2'](_0x5c4c96,this['localScale']),_0x4e260c=qm));}Td['setFromMat'+'4'](_0x1c67e8['worldTrans'+'form']),Xm['mul2'](Td,this['localRotat'+'ion']);let _0x2fb007=_0x1c67e8['worldTrans'+'form'];_0x1c67e8['scaleCompe'+'nsation']&&(jm['mul2'](_0x5c4c96,_0x1c67e8['getLocalSc'+'ale']()),$m['setTRS'](_0x1c67e8['worldTrans'+'form']['getTransla'+'tion'](xd),Td,jm),_0x2fb007=$m),_0x2fb007['transformP'+'oint'](this['localPosit'+'ion'],xd),this['worldTrans'+'form']['setTRS'](xd,Xm,_0x4e260c);}else this['worldTrans'+'form']['mulAffine2'](this['_parent']['worldTrans'+'form'],this['localTrans'+'form']);}this['_dirtyWorl'+'d']=!(-0x1*-0x10b5+-0x23e2+0x132e);}}['syncHierar'+'chy'](){if(!this['_enabled']||this['_frozen'])return;this['_frozen']=!(-0x1946+-0x178e+0x14*0x271),(this['_dirtyLoca'+'l']||this['_dirtyWorl'+'d'])&&this['_sync']();const _0x2f4247=this['_children'];for(let _0xac3e6=0x7c9+0x210b+-0x2*0x146a,_0x297f79=_0x2f4247['length'];_0xac3e6<_0x297f79;_0xac3e6++)_0x2f4247[_0xac3e6]['syncHierar'+'chy']();}['lookAt'](_0x3ca039,_0xbf6427,_0x5a0dee,_0x2c1029=-0x8cc+-0x137b*-0x2+-0x1e2a,_0x17c405=0xc22+-0x17f3+0xbd2,_0x5a3b00=0x2a1+-0x1354+0x10b3){if(_0x3ca039 instanceof D)wd['copy'](_0x3ca039),_0xbf6427 instanceof D?Vl['copy'](_0xbf6427):Vl['copy'](D['UP']);else{if(_0x5a0dee===void(-0x1c9d+0x68a*-0x5+0x16d*0x2b))return;wd['set'](_0x3ca039,_0xbf6427,_0x5a0dee),Vl['set'](_0x2c1029,_0x17c405,_0x5a3b00);}Ym['setLookAt'](this['getPositio'+'n'](),wd,Vl),as['setFromMat'+'4'](Ym),this['setRotatio'+'n'](as);}['translate'](_0x197711,_0x148fc6,_0x369f40){_0x197711 instanceof D?rs['copy'](_0x197711):rs['set'](_0x197711,_0x148fc6,_0x369f40),rs['add'](this['getPositio'+'n']()),this['setPositio'+'n'](rs);}['translateL'+'ocal'](_0x2060e4,_0x3aa7b4,_0x3f2e83){_0x2060e4 instanceof D?rs['copy'](_0x2060e4):rs['set'](_0x2060e4,_0x3aa7b4,_0x3f2e83),this['localRotat'+'ion']['transformV'+'ector'](rs,rs),this['localPosit'+'ion']['add'](rs),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotate'](_0x376511,_0x51f230,_0x56e5ec){if(as['setFromEul'+'erAngles'](_0x376511,_0x51f230,_0x56e5ec),this['_parent']===null)this['localRotat'+'ion']['mul2'](as,this['localRotat'+'ion']);else{const _0x133443=this['getRotatio'+'n'](),_0x3593c0=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x3593c0)['invert'](),as['mul2'](Aa,as),this['localRotat'+'ion']['mul2'](as,_0x133443);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotateLoca'+'l'](_0x39677d,_0x3d1f82,_0x3e7470){as['setFromEul'+'erAngles'](_0x39677d,_0x3d1f82,_0x3e7470),this['localRotat'+'ion']['mul'](as),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}}const ky=new Kt();function $n(_0x3f1e3b){const _0x9df369=ky['get'](_0x3f1e3b);return w['assert'](_0x9df369),_0x9df369;}function Bw(_0x2b14b2,_0x544c9d){w['assert'](_0x544c9d),ky['get'](_0x2b14b2,()=>_0x544c9d);}class zw{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach']((_0x355499,_0x444102)=>{_0x444102['destroy']();}),this['cache']['clear']();}['incRef'](_0xe4d4c6){const _0x274a63=(this['cache']['get'](_0xe4d4c6)||0x16d6*-0x1+-0x77*0x2f+0x2caf*0x1)+(0xdd*-0xd+-0x15c5+0x1*0x20ff);this['cache']['set'](_0xe4d4c6,_0x274a63);}['decRef'](_0x2a128d){if(_0x2a128d){let _0x585b2e=this['cache']['get'](_0x2a128d);_0x585b2e&&(_0x585b2e--,_0x585b2e===0x1262+-0x1*-0x27d+0x6f5*-0x3?(this['cache']['delete'](_0x2a128d),_0x2a128d['destroy']()):this['cache']['set'](_0x2a128d,_0x585b2e));}}}class Bi{static['incRef'](_0x331a20){this['cache']['incRef'](_0x331a20);}static['decRef'](_0x211d42){this['cache']['decRef'](_0x211d42);}static['destroy'](){this['cache']['destroy']();}}h(Bi,'cache',new zw());let Vw=-0x1922+0x8ff+0x1023;const Gw=new De(),Gl=new De(),Ed=new Mu(),bd=new Set(),Mr=new Uint32Array(-0x19c9+-0xe3f*-0x2+-0x2b1);class Hw{constructor(_0x47f75f){h(this,'vertexBuff'+'er',null),h(this,'_destroyVe'+'rtexBuffer',!(0x14e9+-0x162b+-0x143*-0x1)),this['count']=_0x47f75f;}['destroy'](){var _0x32b54e;this['_destroyVe'+'rtexBuffer']&&((_0x32b54e=this['vertexBuff'+'er'])==null||_0x32b54e['destroy']()),this['vertexBuff'+'er']=null;}}class Ww{constructor(){h(this,'map',new Map()),h(this,'meshMetaDa'+'ta',new Int32Array(0x218f+-0x7d8+-0x19b3));}['get'](_0x1828cf){return this['map']['get'](_0x1828cf)??this['map']['get'](null);}}class $w{constructor(){h(this,'shader'),h(this,'bindGroup',null),h(this,'uniformBuf'+'fer',null),h(this,'hashes');}['getBindGro'+'up'](_0x5a2671){if(!this['bindGroup']){const _0x37ffd6=this['shader'];w['assert'](_0x37ffd6);const _0x311a0d=_0x37ffd6['meshBindGr'+'oupFormat'];w['assert'](_0x311a0d),this['bindGroup']=new dp(_0x5a2671,_0x311a0d),ya['setName'](this['bindGroup'],'MeshBindGr'+'oup_'+this['bindGroup']['id']);}return this['bindGroup'];}['getUniform'+'Buffer'](_0x11df50){if(!this['uniformBuf'+'fer']){const _0x4268d3=this['shader'];w['assert'](_0x4268d3);const _0x22da13=_0x4268d3['meshUnifor'+'mBufferFor'+'mat'];w['assert'](_0x22da13),this['uniformBuf'+'fer']=new up(_0x11df50,_0x22da13,!(-0x79*-0x17+0x947+-0x1425));}return this['uniformBuf'+'fer'];}['destroy'](){var _0x2b3c94,_0x594196;(_0x2b3c94=this['bindGroup'])==null||_0x2b3c94['destroy'](),this['bindGroup']=null,(_0x594196=this['uniformBuf'+'fer'])==null||_0x594196['destroy'](),this['uniformBuf'+'fer']=null;}}const Yr=class Yr{constructor(_0xd6aeec,_0x1bac3b,_0x2fadc7=null){h(this,'castShadow',!(0x776+-0x3*-0x53d+-0x172c)),h(this,'shadowCasc'+'adeMask',iw),h(this,'cull',!(0x13bd+0x87*-0x23+-0x2*0xa4)),h(this,'drawOrder',-0x250f+-0x37c*0xb+0x4b63),h(this,'_drawBucke'+'t',0x1388+-0x26*-0xa1+-0x2aef*0x1),h(this,'node'),h(this,'visible',!(-0x1cd*0x1+-0x1ead+-0x103d*-0x2)),h(this,'visibleThi'+'sFrame',!(0xcd0*-0x2+-0x1039*0x1+0x29da)),h(this,'flipFacesF'+'actor',0xaf3*0x1+-0x232f+0x183d),h(this,'gsplatInst'+'ance',null),h(this,'id',Vw++),h(this,'isVisibleF'+'unc',null),h(this,'instancing'+'Data',null),h(this,'indirectDa'+'ta',null),h(this,'parameters',{}),h(this,'pick',!(-0x1*0x1d53+-0x58d+-0x4*-0x8b8)),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'transparen'+'t',!(0x14b*0x1d+-0x1*0x1b47+0x20b*-0x5)),h(this,'_aabb',new De()),h(this,'_aabbVer',-(0x1273+0x64d+0x5*-0x4f3)),h(this,'_aabbMeshV'+'er',-(-0x3*-0x40a+0xa08*-0x2+0x7f3)),h(this,'_customAab'+'b',null),h(this,'_updateAab'+'b',!(-0x229*-0xc+0xc29+-0x2615)),h(this,'_updateAab'+'bFunc',null),h(this,'_sortKeySh'+'adow',0x5c7+-0x1*-0xc9d+-0x1264),h(this,'_sortKeyFo'+'rward',-0x1650+0x96b+-0xce5*-0x1),h(this,'_sortKeyDy'+'namic',-0x9*0xb7+-0x4*-0x359+-0x6f5),h(this,'_layer',py),h(this,'_material',null),h(this,'_skinInsta'+'nce',null),h(this,'_morphInst'+'ance',null),h(this,'_receiveSh'+'adow',!(0x2456*0x1+-0x2122+-0x334)),h(this,'_renderSty'+'le',nn),h(this,'_screenSpa'+'ce',!(0x1*0x16d3+0x2*-0x9d9+-0x320)),h(this,'_shaderCac'+'he',new Map()),h(this,'_shaderDef'+'s',Ss<<0x1cf*0xb+0x132+-0x1507),h(this,'_calculate'+'SortDistan'+'ce',null);if(w['assert'](!(_0xd6aeec instanceof Ie),'Incorrect\x20'+'parameters'+'\x20for\x20MeshI'+'nstance\x27s\x20'+'constructo'+'r.\x20Use\x20new'+'\x20MeshInsta'+'nce(mesh,\x20'+'material,\x20'+'node)'),this['node']=_0x2fadc7,this['_mesh']=_0xd6aeec,_0xd6aeec['incRefCoun'+'t'](),this['material']=_0x1bac3b,_0xd6aeec['vertexBuff'+'er']){const _0x576dd9=_0xd6aeec['vertexBuff'+'er']['format'];this['_shaderDef'+'s']|=_0x576dd9['hasUv0']?Rp:-0x2*0xacf+0x1*0x2b4+-0x12*-0x10d,this['_shaderDef'+'s']|=_0x576dd9['hasUv1']?My:0x1c*-0x14b+-0x1f*-0x59+-0x1*-0x196d,this['_shaderDef'+'s']|=_0x576dd9['hasColor']?Dy:0x1*0x1261+0x1*0x1189+-0x23ea,this['_shaderDef'+'s']|=_0x576dd9['hasTangent'+'s']?Op:0x39*-0x79+0x2e*0x15+0x172b;}this['updateKey']();}set['drawBucket'](_0x591681){this['_drawBucke'+'t']=Math['floor'](_0x591681)&0x8f0+-0x1*-0x135+0x1*-0x926,this['updateKey']();}get['drawBucket'](){return this['_drawBucke'+'t'];}set['renderStyl'+'e'](_0x2fcae3){this['_renderSty'+'le']=_0x2fcae3,this['mesh']['prepareRen'+'derState'](_0x2fcae3);}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['mesh'](_0x213f16){_0x213f16!==this['_mesh']&&(this['_mesh']&&this['_mesh']['decRefCoun'+'t'](),this['_mesh']=_0x213f16,_0x213f16&&_0x213f16['incRefCoun'+'t']());}get['mesh'](){return this['_mesh'];}set['aabb'](_0x41192f){this['_aabb']=_0x41192f;}get['aabb'](){if(!this['_updateAab'+'b'])return this['_aabb'];if(this['_updateAab'+'bFunc'])return this['_updateAab'+'bFunc'](this['_aabb']);let _0x27ff6f=this['_customAab'+'b'],_0xb7b7e0=!!_0x27ff6f;if(!_0x27ff6f){if(_0x27ff6f=Gw,this['skinInstan'+'ce']){if(!this['mesh']['boneAabb']){const _0x43226b=this['_morphInst'+'ance']?this['_morphInst'+'ance']['morph']['_targets']:null;this['mesh']['_initBoneA'+'abbs'](_0x43226b);}const _0x3bd76d=this['mesh']['boneUsed'];let _0xc5f6c6=!(-0x7*0x47f+0xbc*0xb+0x71*0x35);for(let _0x38ce85=0x1ce3+0xb2+-0x1d95;_0x38ce85<this['mesh']['boneAabb']['length'];_0x38ce85++)_0x3bd76d[_0x38ce85]&&(Gl['setFromTra'+'nsformedAa'+'bb'](this['mesh']['boneAabb'][_0x38ce85],this['skinInstan'+'ce']['matrices'][_0x38ce85]),_0xc5f6c6?(_0xc5f6c6=!(0x175e+0x779+0x1*-0x1ed6),_0x27ff6f['center']['copy'](Gl['center']),_0x27ff6f['halfExtent'+'s']['copy'](Gl['halfExtent'+'s'])):_0x27ff6f['add'](Gl));_0xb7b7e0=!(-0x268f+-0x26e5*0x1+0x4d74);}else{if(this['node']['_aabbVer']!==this['_aabbVer']||this['mesh']['_aabbVer']!==this['_aabbMeshV'+'er']){if(this['mesh']?(_0x27ff6f['center']['copy'](this['mesh']['aabb']['center']),_0x27ff6f['halfExtent'+'s']['copy'](this['mesh']['aabb']['halfExtent'+'s'])):(_0x27ff6f['center']['set'](-0x1d73+0xed5*0x1+0x1*0xe9e,-0x349*-0x3+0xa*-0x271+-0x1*-0xe8f,0x1*0xeb1+0x9fa+-0x1*0x18ab),_0x27ff6f['halfExtent'+'s']['set'](0x6*-0x1b5+-0x16c0+-0x67*-0x52,0x3*-0x783+-0x2616+0x3c9f,0x199d+0x1522+0x3*-0xf95)),this['mesh']&&this['mesh']['morph']){const _0x546867=this['mesh']['morph']['aabb'];_0x27ff6f['_expand'](_0x546867['getMin'](),_0x546867['getMax']());}_0xb7b7e0=!(-0xd12*-0x2+0x234c+-0x3d70),this['_aabbVer']=this['node']['_aabbVer'],this['_aabbMeshV'+'er']=this['mesh']['_aabbVer'];}}}return _0xb7b7e0&&this['_aabb']['setFromTra'+'nsformedAa'+'bb'](_0x27ff6f,this['node']['getWorldTr'+'ansform']()),this['_aabb'];}['clearShade'+'rs'](){this['_shaderCac'+'he']['forEach'](_0x5436be=>{_0x5436be['destroy']();}),this['_shaderCac'+'he']['clear']();}['getShaderI'+'nstance'](_0x486dc,_0x23c9c4,_0x2f7a06,_0x44ab84,_0x3cbbfe,_0x212b1e,_0x2bee15){var _0x3d78b8;const _0x542d9c=this['_shaderDef'+'s'];Mr[-0x1e67+0x178b*-0x1+-0x1*-0x35f2]=_0x486dc,Mr[0x1*-0x16cf+0x2*-0x185+0x3*0x89e]=_0x23c9c4,Mr[0x26ad+0x2a5+0x1*-0x2950]=_0x542d9c,Mr[0x1147+0x878+0x1b*-0xf4]=_0x44ab84['hash'];const _0x5c5399=iy(Mr);let _0x45c59c=this['_shaderCac'+'he']['get'](_0x5c5399);if(!_0x45c59c){const _0x4d0eec=this['_material'];if(_0x45c59c=new $w(),_0x45c59c['shader']=_0x4d0eec['variants']['get'](_0x5c5399),_0x45c59c['hashes']=new Uint32Array(Mr),!_0x45c59c['shader']){Q['pushGpuMar'+'ker'](this['mesh']['device'],'Node:\x20'+this['node']['name']);const _0x3eafe8=_0x4d0eec['getShaderV'+'ariant']({'device':this['mesh']['device'],'scene':_0x2f7a06,'objDefs':_0x542d9c,'cameraShaderParams':_0x44ab84,'pass':_0x486dc,'sortedLights':_0x2bee15,'viewUniformFormat':_0x3cbbfe,'viewBindGroupFormat':_0x212b1e,'vertexFormat':(_0x3d78b8=this['mesh']['vertexBuff'+'er'])==null?void(0x1*0x2591+-0x227*-0x11+-0x2514*0x2):_0x3d78b8['format']});Q['popGpuMark'+'er'](this['mesh']['device']),_0x4d0eec['variants']['set'](_0x5c5399,_0x3eafe8),_0x45c59c['shader']=_0x3eafe8;}this['_shaderCac'+'he']['set'](_0x5c5399,_0x45c59c);}return w['call'](()=>{Yx['equals'](_0x45c59c['hashes'],Mr)||w['errorOnce']('Hash\x20colli'+'sion\x20in\x20th'+'e\x20shader\x20c'+'ache\x20for\x20m'+'esh\x20instan'+'ce.\x20This\x20i'+'s\x20very\x20unl'+'ikely\x20but\x20'+'still\x20poss'+'ible.\x20Plea'+'se\x20report\x20'+'this\x20issue'+'.');}),_0x45c59c;}set['material'](_0xefc377){this['clearShade'+'rs']();const _0x5a0865=this['_material'];_0x5a0865&&_0x5a0865['removeMesh'+'InstanceRe'+'f'](this),this['_material']=_0xefc377,_0xefc377&&(_0xefc377['addMeshIns'+'tanceRef'](this),this['transparen'+'t']=_0xefc377['transparen'+'t'],this['updateKey']());}get['material'](){return this['_material'];}['_updateSha'+'derDefs'](_0x4276e0){_0x4276e0!==this['_shaderDef'+'s']&&(this['_shaderDef'+'s']=_0x4276e0,this['clearShade'+'rs']());}set['calculateS'+'ortDistanc'+'e'](_0x5db166){this['_calculate'+'SortDistan'+'ce']=_0x5db166;}get['calculateS'+'ortDistanc'+'e'](){return this['_calculate'+'SortDistan'+'ce'];}set['receiveSha'+'dow'](_0x3dca24){this['_receiveSh'+'adow']!==_0x3dca24&&(this['_receiveSh'+'adow']=_0x3dca24,this['_updateSha'+'derDefs'](_0x3dca24?this['_shaderDef'+'s']&~th:this['_shaderDef'+'s']|th));}get['receiveSha'+'dow'](){return this['_receiveSh'+'adow'];}set['batching'](_0x3d45e4){this['_updateSha'+'derDefs'](_0x3d45e4?this['_shaderDef'+'s']|bc:this['_shaderDef'+'s']&~bc);}get['batching'](){return(this['_shaderDef'+'s']&bc)!==0x27*0x2f+-0x1*0xb5d+-0x21a*-0x2;}set['skinInstan'+'ce'](_0x5d743d){this['_skinInsta'+'nce']=_0x5d743d,this['_updateSha'+'derDefs'](_0x5d743d?this['_shaderDef'+'s']|qo:this['_shaderDef'+'s']&~qo),this['_setupSkin'+'Update']();}get['skinInstan'+'ce'](){return this['_skinInsta'+'nce'];}set['morphInsta'+'nce'](_0x1c15a1){var _0x3a708f;(_0x3a708f=this['_morphInst'+'ance'])==null||_0x3a708f['destroy'](),this['_morphInst'+'ance']=_0x1c15a1;let _0x5867eb=this['_shaderDef'+'s'];_0x5867eb=_0x1c15a1&&_0x1c15a1['morph']['morphPosit'+'ions']?_0x5867eb|Yo:_0x5867eb&~Yo,_0x5867eb=_0x1c15a1&&_0x1c15a1['morph']['morphNorma'+'ls']?_0x5867eb|Ko:_0x5867eb&~Ko,_0x5867eb=_0x1c15a1&&_0x1c15a1['morph']['intRenderF'+'ormat']?_0x5867eb|Zo:_0x5867eb&~Zo,this['_updateSha'+'derDefs'](_0x5867eb);}get['morphInsta'+'nce'](){return this['_morphInst'+'ance'];}set['screenSpac'+'e'](_0x25119c){this['_screenSpa'+'ce']!==_0x25119c&&(this['_screenSpa'+'ce']=_0x25119c,this['_updateSha'+'derDefs'](_0x25119c?this['_shaderDef'+'s']|sh:this['_shaderDef'+'s']&~sh));}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['key'](_0x53fda6){this['_sortKeyFo'+'rward']=_0x53fda6;}get['key'](){return this['_sortKeyFo'+'rward'];}set['mask'](_0x4e2cc1){const _0x5e3720=this['_shaderDef'+'s']&0x2b1f*0xa+0x2cbf*0x3+-0x2*0x9aba;this['_updateSha'+'derDefs'](_0x5e3720|_0x4e2cc1<<-0x1c06+0x89*0xe+-0x1498*-0x1);}get['mask'](){return this['_shaderDef'+'s']>>-0x177c+-0xc15+0x23a1;}set['instancing'+'Count'](_0x455fe4){this['instancing'+'Data']&&(this['instancing'+'Data']['count']=_0x455fe4);}get['instancing'+'Count'](){return this['instancing'+'Data']?this['instancing'+'Data']['count']:0x231*0xe+-0x183b+-0x673;}['destroy'](){var _0x18272f,_0x309fa8,_0x404a4d;const _0x2518f6=this['mesh'];_0x2518f6&&(this['mesh']=null,_0x2518f6['refCount']<0x1d7d*-0x1+-0x1*-0x1de4+-0x66&&_0x2518f6['destroy']()),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][0x1*0x1d82+-0x1a4f+-0x333],null),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][0x1356+-0x25fb+-0x12a6*-0x1],null),(_0x18272f=this['_skinInsta'+'nce'])==null||_0x18272f['destroy'](),this['_skinInsta'+'nce']=null,(_0x309fa8=this['morphInsta'+'nce'])==null||_0x309fa8['destroy'](),this['morphInsta'+'nce']=null,this['clearShade'+'rs'](),this['material']=null,(_0x404a4d=this['instancing'+'Data'])==null||_0x404a4d['destroy']();}static['_prepareRe'+'nderStyleF'+'orArray'](_0x2e8ffb,_0x40bfac){if(_0x2e8ffb){for(let _0x5f3e9c=-0x7a3+-0x11ab*0x1+0x2*0xca7;_0x5f3e9c<_0x2e8ffb['length'];_0x5f3e9c++){_0x2e8ffb[_0x5f3e9c]['_renderSty'+'le']=_0x40bfac;const _0x466d91=_0x2e8ffb[_0x5f3e9c]['mesh'];bd['has'](_0x466d91)||(bd['add'](_0x466d91),_0x466d91['prepareRen'+'derState'](_0x40bfac));}bd['clear']();}}['_isVisible'](_0x5e0b43){return this['visible']?this['isVisibleF'+'unc']?this['isVisibleF'+'unc'](_0x5e0b43):(Ed['center']=this['aabb']['center'],Ed['radius']=this['_aabb']['halfExtent'+'s']['length'](),_0x5e0b43['frustum']['containsSp'+'here'](Ed)>0x1129+-0x1a11*0x1+-0x98*-0xf):!(0x1*0xb1f+0x5*0x5a5+-0x2757);}['updateKey'](){const {material:_0x1551b4}=this;this['_sortKeyFo'+'rward']=this['_drawBucke'+'t']<<-0x1f5b+-0xf1*-0xd+0x1335|(_0x1551b4['alphaToCov'+'erage']||_0x1551b4['alphaTest']?-0x607*0xa4+-0x6a1369+-0x16af*-0x7ab:-0xd9a+0x605*0x3+-0x475)|_0x1551b4['id']&0x464fa2+-0x7b3a22+0x5e6b*0x13d;}['setInstanc'+'ing'](_0x451ce5,_0x8d3814=!(0x46+0x1*-0x95+-0x4*-0x14)){_0x451ce5?(this['instancing'+'Data']=new Hw(_0x451ce5['numVertice'+'s']),this['instancing'+'Data']['vertexBuff'+'er']=_0x451ce5,_0x451ce5['format']['instancing']=!(-0x34*0x13+0x1d84+-0x8*0x335),this['cull']=_0x8d3814):(this['instancing'+'Data']=null,this['cull']=!(-0xf3f*0x1+0x16d2+-0x793)),this['_updateSha'+'derDefs'](_0x451ce5?this['_shaderDef'+'s']|jo:this['_shaderDef'+'s']&~jo);}['setIndirec'+'t'](_0x19e099,_0x458a07){this['_allocIndi'+'rectData'](),this['indirectDa'+'ta']['map']['set']((_0x19e099==null?void(-0xe04+0x12e3+-0x4df):_0x19e099['camera'])??null,_0x458a07),this['mesh']['device']['mapsToClea'+'r']['add'](this['indirectDa'+'ta']['map']);}['getIndirec'+'tMetaData'](){var _0x3d7710;this['_allocIndi'+'rectData']();const _0x2c0140=(_0x3d7710=this['mesh'])==null?void(-0xf08+0x1*-0x1fba+0x2ec2):_0x3d7710['primitive'][this['renderStyl'+'e']],_0x595ed0=this['indirectDa'+'ta']['meshMetaDa'+'ta'];return _0x595ed0[-0x7*0x2d7+0x1d81*-0x1+0x3*0x1076]=_0x2c0140['count'],_0x595ed0[-0x1d80+0x1ccf+0xb2]=_0x2c0140['base'],_0x595ed0[-0x132a+0x2458+-0x112c]=_0x2c0140['baseVertex'],_0x595ed0;}['_allocIndi'+'rectData'](){this['indirectDa'+'ta']||(this['indirectDa'+'ta']=new Ww());}['ensureMate'+'rial'](_0x360008){this['material']||(w['warn']('Mesh\x20attac'+'hed\x20to\x20ent'+'ity\x20\x27'+this['node']['name']+('\x27\x20does\x20not'+'\x20have\x20a\x20ma'+'terial,\x20us'+'ing\x20a\x20defa'+'ult\x20one.')),this['material']=$n(_0x360008));}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['getParamet'+'er'](_0x467381){return this['parameters'][_0x467381];}['setParamet'+'er'](_0x4d52d9,_0x23ecdb,_0x4a7c2e=-0xf97*-0x1e7765+0x10fdd0a7b+0x9d3ff*-0x31f1){const _0x2a52a5=this['parameters'][_0x4d52d9];_0x2a52a5?(_0x2a52a5['data']=_0x23ecdb,_0x2a52a5['passFlags']=_0x4a7c2e):this['parameters'][_0x4d52d9]={'scopeId':null,'data':_0x23ecdb,'passFlags':_0x4a7c2e};}['setRealtim'+'eLightmap'](_0x1e88ed,_0x13a35c){const _0x34ab20=this['getParamet'+'er'](_0x1e88ed);_0x34ab20!==_0x13a35c&&(_0x34ab20&&Bi['decRef'](_0x34ab20['data']),_0x13a35c?(Bi['incRef'](_0x13a35c),this['setParamet'+'er'](_0x1e88ed,_0x13a35c)):this['deletePara'+'meter'](_0x1e88ed));}['deletePara'+'meter'](_0x447832){this['parameters'][_0x447832]&&delete this['parameters'][_0x447832];}['setParamet'+'ers'](_0x5ce040,_0x4bde18){const _0x5da4c1=this['parameters'];for(const _0x33a003 in _0x5da4c1){const _0x4bcdba=_0x5da4c1[_0x33a003];_0x4bcdba['passFlags']&_0x4bde18&&(_0x4bcdba['scopeId']||(_0x4bcdba['scopeId']=_0x5ce040['scope']['resolve'](_0x33a003)),_0x4bcdba['scopeId']['setValue'](_0x4bcdba['data']));}}['setLightma'+'pped'](_0x2573fa){_0x2573fa?this['mask']=(this['mask']|di)&-(-0xb28+-0x1ff2+0x2b20):(this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][-0x2170+0x1980+0x7f0],null),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][-0x17*-0x91+-0x61*-0x43+-0x2669],null),this['_shaderDef'+'s']&=-(0x2642+0x767+-0x1ce8),this['mask']=(this['mask']|Ss)&-(-0x1fa4+0x2199+-0x1ee));}['setCustomA'+'abb'](_0x2d23eb){_0x2d23eb?this['_customAab'+'b']?this['_customAab'+'b']['copy'](_0x2d23eb):this['_customAab'+'b']=_0x2d23eb['clone']():(this['_customAab'+'b']=null,this['_aabbVer']=-(-0x1*0x1f83+-0x1dbf*-0x1+-0x1*-0x1c5)),this['_setupSkin'+'Update']();}['_setupSkin'+'Update'](){this['_skinInsta'+'nce']&&(this['_skinInsta'+'nce']['_updateBef'+'oreCull']=!this['_customAab'+'b']);}};h(Yr,'lightmapPa'+'ramNames',['texture_li'+'ghtMap','texture_di'+'rLightMap']);let He=Yr;const Xw=[0xc95*-0x1+0x92f+-0x91*-0x6,0xb*-0x343+-0x1*-0x1197+-0x1*-0x124b,0x76e+0xa3*-0x2b+0x1*0x13f6,0x8*-0x1af+0xd*-0x2b9+0x30df,0xabd*0x1+-0x169a+0xbe0,-0x1*0x2573+-0x1*0x204b+0x45bf],qw=[0x36*-0x24+0x1*-0x224b+0x1*0x29e3,-0x2e*0x1+0xebb*0x2+-0x1d47,-0x1*0x1a+0x3*0xc82+-0x2569,-0x18d6+0xa58+-0xe7e*-0x1,0xbb6+0x2*0x3f1+-0x1395,0x3d*0xb+-0x4*-0x164+-0x82d],Zm=new _i();function Qm(_0x2aa1b7,_0x4ce2a7){if(_0x2aa1b7&&!_0x4ce2a7||!_0x2aa1b7&&_0x4ce2a7)return!(-0x986+-0x1dc*0x1+0xb63);if(_0x2aa1b7=_0x2aa1b7['data'],_0x4ce2a7=_0x4ce2a7['data'],_0x2aa1b7===_0x4ce2a7)return!(0x8*0x355+0x1*0x20b1+0x3b59*-0x1);if(_0x2aa1b7 instanceof Float32Array&&_0x4ce2a7 instanceof Float32Array){if(_0x2aa1b7['length']!==_0x4ce2a7['length'])return!(0x236*0x10+0xc0b+-0x2f6a);for(let _0x1c4c1b=-0x2039*0x1+-0x45*-0x76+0x6b;_0x1c4c1b<_0x2aa1b7['length'];_0x1c4c1b++)if(_0x2aa1b7[_0x1c4c1b]!==_0x4ce2a7[_0x1c4c1b])return!(-0x1*0xea5+0x1219+0x373*-0x1);return!(-0x20e1+0xfe*0x19+-0x2b1*-0x3);}return!(0xa0a+-0x2*-0xf6a+-0x1*0x28dd);}function jw(_0x2f36c2,_0x5787cc){for(const _0x2ca44f in _0x2f36c2)if(_0x2f36c2['hasOwnProp'+'erty'](_0x2ca44f)&&!Qm(_0x2f36c2[_0x2ca44f],_0x5787cc[_0x2ca44f]))return!(-0x166b+-0x1713+0x2d7f);for(const _0x4d1cb7 in _0x5787cc)if(_0x5787cc['hasOwnProp'+'erty'](_0x4d1cb7)&&!Qm(_0x5787cc[_0x4d1cb7],_0x2f36c2[_0x4d1cb7]))return!(0xdb7*-0x1+-0x6c7+0x147f);return!(-0x10+-0x28a*0xe+0x11ce*0x2);}function Ad(_0x280b25){return _0x280b25['node']['worldTrans'+'form']['scaleSign'];}class Yw{constructor(_0x383359,_0x58965a,_0x55b9aa){this['device']=_0x383359,this['rootNode']=_0x58965a,this['scene']=_0x55b9aa,this['_init']=!(-0x734+-0x5f*0x1+0x794),this['_batchGrou'+'ps']={},this['_batchGrou'+'pCounter']=0x19c5*0x1+-0x2135*-0x1+0x2*-0x1d7d,this['_batchList']=[],this['_dirtyGrou'+'ps']=[],this['_stats']={'createTime':0x0,'updateLastFrameTime':0x0};}['destroy'](){this['device']=null,this['rootNode']=null,this['scene']=null,this['_batchGrou'+'ps']={},this['_batchList']=[],this['_dirtyGrou'+'ps']=[];}['addGroup'](_0x3bf148,_0x427a8a,_0x34ef1a,_0xd7e250,_0x5b88fb){if(_0xd7e250===void(0x3*0x3b+-0x7a8*-0x4+0x1f51*-0x1)&&(_0xd7e250=this['_batchGrou'+'pCounter'],this['_batchGrou'+'pCounter']++),this['_batchGrou'+'ps'][_0xd7e250]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0xd7e250+('\x20already\x20e'+'xists.'));return;}const _0x3f6263=new St(_0xd7e250,_0x3bf148,_0x427a8a,_0x34ef1a,_0x5b88fb);return this['_batchGrou'+'ps'][_0xd7e250]=_0x3f6263,_0x3f6263;}['removeGrou'+'p'](_0x171548){if(!this['_batchGrou'+'ps'][_0x171548]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x171548+('\x20doesn\x27t\x20e'+'xist.'));return;}const _0x2c8453=[];for(let _0x1ff654=0x1c8c+0x11ad+-0x2e39;_0x1ff654<this['_batchList']['length'];_0x1ff654++)this['_batchList'][_0x1ff654]['batchGroup'+'Id']===_0x171548?this['destroyBat'+'ch'](this['_batchList'][_0x1ff654]):_0x2c8453['push'](this['_batchList'][_0x1ff654]);this['_batchList']=_0x2c8453,this['_removeMod'+'elsFromBat'+'chGroup'](this['rootNode'],_0x171548),delete this['_batchGrou'+'ps'][_0x171548];}['markGroupD'+'irty'](_0x9b8062){this['_dirtyGrou'+'ps']['indexOf'](_0x9b8062)<0x1180*0x2+0x975+-0x2c75&&this['_dirtyGrou'+'ps']['push'](_0x9b8062);}['getGroupBy'+'Name'](_0x5ae7e7){const _0x15714e=this['_batchGrou'+'ps'];for(const _0x42d1cf in _0x15714e)if(_0x15714e['hasOwnProp'+'erty'](_0x42d1cf)&&_0x15714e[_0x42d1cf]['name']===_0x5ae7e7)return _0x15714e[_0x42d1cf];return null;}['getBatches'](_0x4bbc1a){const _0x2de77e=[],_0x16f6a2=this['_batchList']['length'];for(let _0x1a9a2e=0xce5+-0x6b7+-0x71*0xe;_0x1a9a2e<_0x16f6a2;_0x1a9a2e++){const _0x433586=this['_batchList'][_0x1a9a2e];_0x433586['batchGroup'+'Id']===_0x4bbc1a&&_0x2de77e['push'](_0x433586);}return _0x2de77e;}['_removeMod'+'elsFromBat'+'chGroup'](_0x9de704,_0x1fb886){if(_0x9de704['enabled']){_0x9de704['model']&&_0x9de704['model']['batchGroup'+'Id']===_0x1fb886&&(_0x9de704['model']['batchGroup'+'Id']=-(-0x70e+-0xb3d*0x2+-0x1*-0x1d89)),_0x9de704['render']&&_0x9de704['render']['batchGroup'+'Id']===_0x1fb886&&(_0x9de704['render']['batchGroup'+'Id']=-(0x2193+-0x1f+0x1*-0x2173)),_0x9de704['element']&&_0x9de704['element']['batchGroup'+'Id']===_0x1fb886&&(_0x9de704['element']['batchGroup'+'Id']=-(0x17f5+-0x1*0x1c3b+0x447)),_0x9de704['sprite']&&_0x9de704['sprite']['batchGroup'+'Id']===_0x1fb886&&(_0x9de704['sprite']['batchGroup'+'Id']=-(-0xe9*0x1d+-0x1157+0x2bbd*0x1));for(let _0x163cf5=-0x1a7f+-0x12df+0x2d5e;_0x163cf5<_0x9de704['_children']['length'];_0x163cf5++)this['_removeMod'+'elsFromBat'+'chGroup'](_0x9de704['_children'][_0x163cf5],_0x1fb886);}}['insert'](_0x2fd329,_0x49cbda,_0x24230c){const _0x1d2879=this['_batchGrou'+'ps'][_0x49cbda];w['assert'](_0x1d2879,'Invalid\x20ba'+'tch\x20'+_0x49cbda+'\x20insertion'),_0x1d2879&&_0x1d2879['_obj'][_0x2fd329]['indexOf'](_0x24230c)<-0x6f6+0x7f9+0x103*-0x1&&(_0x1d2879['_obj'][_0x2fd329]['push'](_0x24230c),this['markGroupD'+'irty'](_0x49cbda));}['remove'](_0x587e13,_0x3d0f23,_0xaece4d){const _0x4365c1=this['_batchGrou'+'ps'][_0x3d0f23];if(w['assert'](_0x4365c1,'Invalid\x20ba'+'tch\x20'+_0x3d0f23+'\x20insertion'),_0x4365c1){const _0x246fce=_0x4365c1['_obj'][_0x587e13]['indexOf'](_0xaece4d);_0x246fce>=0x6*-0x113+-0x4*0x908+0x2a92&&(_0x4365c1['_obj'][_0x587e13]['splice'](_0x246fce,-0x1*0x1183+0xca5+0x4df),this['markGroupD'+'irty'](_0x3d0f23));}}['_extractRe'+'nder'](_0x42b626,_0x19cbf7,_0x2ae204,_0x1b1a42){return _0x42b626['render']&&(_0x19cbf7=_0x1b1a42[_0x42b626['render']['batchGroup'+'Id']]=_0x19cbf7['concat'](_0x42b626['render']['meshInstan'+'ces']),_0x42b626['render']['removeFrom'+'Layers']()),_0x19cbf7;}['_extractMo'+'del'](_0x528370,_0x3f4ebc,_0x19cb3c,_0x27a648){return _0x528370['model']&&_0x528370['model']['model']&&(_0x3f4ebc=_0x27a648[_0x528370['model']['batchGroup'+'Id']]=_0x3f4ebc['concat'](_0x528370['model']['meshInstan'+'ces']),_0x528370['model']['removeMode'+'lFromLayer'+'s'](),_0x528370['model']['_batchGrou'+'p']=_0x19cb3c),_0x3f4ebc;}['_extractEl'+'ement'](_0x50ffd7,_0x1bde95,_0xe57374){if(!_0x50ffd7['element'])return;let _0x249da3=!(0x1*-0x22e7+-0x1dcf*0x1+0x40b7);_0x50ffd7['element']['_text']&&_0x50ffd7['element']['_text']['_model']['meshInstan'+'ces']['length']>0x1981+-0xae6+-0xe9b?(_0x1bde95['push'](_0x50ffd7['element']['_text']['_model']['meshInstan'+'ces'][0x1*0x26b4+0x1297+-0x1*0x394b]),_0x50ffd7['element']['removeMode'+'lFromLayer'+'s'](_0x50ffd7['element']['_text']['_model']),_0x249da3=!(0x2ca*0xa+0x1204+-0x2de8)):_0x50ffd7['element']['_image']&&(_0x1bde95['push'](_0x50ffd7['element']['_image']['_renderabl'+'e']['meshInstan'+'ce']),_0x50ffd7['element']['removeMode'+'lFromLayer'+'s'](_0x50ffd7['element']['_image']['_renderabl'+'e']['model']),_0x50ffd7['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']&&(_0x1bde95['push'](_0x50ffd7['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']),(!_0x50ffd7['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']||!_0x50ffd7['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k'])&&(_0x50ffd7['element']['_dirtifyMa'+'sk'](),_0x50ffd7['element']['_onPrerend'+'er']())),_0x249da3=!(0x400+-0x2ce*0xd+0x2076)),_0x249da3&&(_0xe57374['_ui']=!(0x37*0x6d+0xfaa+0x29b*-0xf),_0x50ffd7['element']['_batchGrou'+'p']=_0xe57374);}['_collectAn'+'dRemoveMes'+'hInstances'](_0x1480be,_0x81622c){for(let _0x11580d=0x15*0x88+0xd*-0xbe+0x182*-0x1;_0x11580d<_0x81622c['length'];_0x11580d++){const _0x46c711=_0x81622c[_0x11580d],_0x32677d=this['_batchGrou'+'ps'][_0x46c711];if(!_0x32677d)continue;let _0x24f3c6=_0x1480be[_0x46c711];_0x24f3c6||(_0x24f3c6=_0x1480be[_0x46c711]=[]);for(let _0x4e677a=-0xc53+0x3*0x1da+0x6c5;_0x4e677a<_0x32677d['_obj']['model']['length'];_0x4e677a++)_0x24f3c6=this['_extractMo'+'del'](_0x32677d['_obj']['model'][_0x4e677a],_0x24f3c6,_0x32677d,_0x1480be);for(let _0x4dfa36=-0x1*0xd43+0x2453+-0x10*0x171;_0x4dfa36<_0x32677d['_obj']['render']['length'];_0x4dfa36++)_0x24f3c6=this['_extractRe'+'nder'](_0x32677d['_obj']['render'][_0x4dfa36],_0x24f3c6,_0x32677d,_0x1480be);for(let _0x4f8b43=0xcc0+-0x1c*0x1b+0x6*-0x1a2;_0x4f8b43<_0x32677d['_obj']['element']['length'];_0x4f8b43++)this['_extractEl'+'ement'](_0x32677d['_obj']['element'][_0x4f8b43],_0x24f3c6,_0x32677d);for(let _0x2aedb3=-0x21e9+-0xb5f+-0x7*-0x678;_0x2aedb3<_0x32677d['_obj']['sprite']['length'];_0x2aedb3++){const _0x5e8d88=_0x32677d['_obj']['sprite'][_0x2aedb3];_0x5e8d88['sprite']&&_0x5e8d88['sprite']['_meshInsta'+'nce']&&(_0x32677d['dynamic']||_0x5e8d88['sprite']['sprite']['_renderMod'+'e']===ci)&&(_0x24f3c6['push'](_0x5e8d88['sprite']['_meshInsta'+'nce']),_0x5e8d88['sprite']['removeMode'+'lFromLayer'+'s'](),_0x32677d['_sprite']=!(0x5eb*0x6+0x132a+-0x4*0xdab),_0x5e8d88['sprite']['_batchGrou'+'p']=_0x32677d);}}}['generate'](_0x5399f6){const _0xe0b87f={};_0x5399f6||(_0x5399f6=Object['keys'](this['_batchGrou'+'ps']));const _0x42aab4=[];for(let _0x15059a=-0x164c+0x9ba+-0x2*-0x649;_0x15059a<this['_batchList']['length'];_0x15059a++){if(_0x5399f6['indexOf'](this['_batchList'][_0x15059a]['batchGroup'+'Id'])<-0x1*-0x1459+0x80b+0x9e*-0x2e){_0x42aab4['push'](this['_batchList'][_0x15059a]);continue;}this['destroyBat'+'ch'](this['_batchList'][_0x15059a]);}if(this['_batchList']=_0x42aab4,this['_collectAn'+'dRemoveMes'+'hInstances'](_0xe0b87f,_0x5399f6),_0x5399f6===this['_dirtyGrou'+'ps'])this['_dirtyGrou'+'ps']['length']=-0x1263+0x1cba*-0x1+0x2f1d;else{const _0x8eaac9=[];for(let _0x1a3800=0x1f21+0x1df0+-0x3d11;_0x1a3800<this['_dirtyGrou'+'ps']['length'];_0x1a3800++)_0x5399f6['indexOf'](this['_dirtyGrou'+'ps'][_0x1a3800])<0x1*-0x12e7+-0x1c53+0x2f3a&&_0x8eaac9['push'](this['_dirtyGrou'+'ps'][_0x1a3800]);this['_dirtyGrou'+'ps']=_0x8eaac9;}let _0x41606f,_0x48a870,_0x100c1e,_0x1aab58;for(const _0x126e4f in _0xe0b87f)if(_0xe0b87f['hasOwnProp'+'erty'](_0x126e4f)){if(_0x41606f=_0xe0b87f[_0x126e4f],_0x100c1e=this['_batchGrou'+'ps'][_0x126e4f],!_0x100c1e){w['error']('batch\x20grou'+'p\x20'+_0x126e4f+'\x20not\x20found');continue;}_0x48a870=this['prepare'](_0x41606f,_0x100c1e['dynamic'],_0x100c1e['maxAabbSiz'+'e'],_0x100c1e['_ui']||_0x100c1e['_sprite']);for(let _0x52df71=-0x43*-0x21+-0xa*-0x88+0xdf3*-0x1;_0x52df71<_0x48a870['length'];_0x52df71++)_0x1aab58=this['create'](_0x48a870[_0x52df71],_0x100c1e['dynamic'],parseInt(_0x126e4f,0xff6+-0x1*-0x6e2+0x2*-0xb67)),_0x1aab58&&_0x1aab58['addToLayer'+'s'](this['scene'],_0x100c1e['layers']);}}['prepare'](_0x59d7fb,_0x5a1013,_0x4f56c3=Number['POSITIVE_I'+'NFINITY'],_0x1fde9e){if(_0x59d7fb['length']===-0xac0+-0x1de+-0x55*-0x26)return[];const _0x1dbcdf=_0x4f56c3*(0x1b2d+0x455+-0x6d*0x4a+0.5),_0x1c30d=0x41*-0x35+0x8fe+-0x877*-0x1,_0x5bdf41=0x177580a4b+0x4*0x112626cc+0xbbf0a57c*-0x1,_0x5aa49d=new De(),_0x547af3=new De();let _0x4dff49=null,_0x290af4;const _0xd2dcc=[];let _0x59e4bf=0x85d*-0x1+-0x19ca+0x2227;_0x1fde9e&&_0x59d7fb['sort']((_0x2a0a35,_0x5cf102)=>_0x2a0a35['drawOrder']-_0x5cf102['drawOrder']);let _0x7ae8c6=_0x59d7fb,_0x3235a2;const _0x43bb00=_0x1fde9e?function(_0x1180e8){_0x4dff49?_0x4dff49['add'](_0x1180e8['aabb']):_0x4dff49=_0x1180e8['aabb']['clone'](),_0x3235a2['push'](_0x1180e8);}:function(_0x27d6f4){_0x3235a2['push'](_0x27d6f4);};for(;_0x7ae8c6['length']>-0x2*-0x684+-0x5ec+-0x71c;){_0xd2dcc[_0x59e4bf]=[_0x7ae8c6[0x1005+0x1*-0x341+-0xac*0x13]],_0x3235a2=[];const _0x4f3d84=_0x7ae8c6[-0x4df+0x1165+-0xc86]['material'],_0x4148b9=_0x7ae8c6[-0x3*-0xf2+-0x1db*-0x11+-0x2261]['layer'],_0x50dc60=_0x7ae8c6[-0x6b*0x10+0x214f+-0x1a9f]['_shaderDef'+'s'],_0x52f83d=_0x7ae8c6[0x6*0x38c+0xcea+-0x2232]['parameters'],_0xeea59e=_0x7ae8c6[0x107*-0xa+-0x851*0x2+0x1ae8]['stencilFro'+'nt'];let _0x30efc5=_0x7ae8c6[-0xb2b*-0x1+-0x5*-0x7ab+0x3182*-0x1]['mesh']['vertexBuff'+'er']['getNumVert'+'ices']();const _0x1a4b2e=_0x7ae8c6[-0x105c+0x3e5*-0x3+-0x1*-0x1c0b]['drawOrder'];_0x5aa49d['copy'](_0x7ae8c6[0x1*0x2400+0x531*-0x7+0x1*0x57]['aabb']);const _0x50c4f3=Ad(_0x7ae8c6[-0x1b*0xa6+-0x14a8+-0x2*-0x1315]),_0xb18d05=_0x7ae8c6[0xa21*0x1+-0x30e+-0x713]['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh'],_0x162c31=_0x7ae8c6[0xe4*-0x1f+-0x1*0xe2+0xe*0x209]['mesh']['primitive'][-0xbd1+-0x24f5*0x1+0x30c6]['indexed'];_0x4dff49=null;for(let _0x147a92=-0x3*0x4b4+0xbd9+0x244;_0x147a92<_0x7ae8c6['length'];_0x147a92++){const _0x140a6d=_0x7ae8c6[_0x147a92];if(_0x5a1013&&_0xd2dcc[_0x59e4bf]['length']>=_0x1c30d){_0x3235a2=_0x3235a2['concat'](_0x7ae8c6['slice'](_0x147a92));break;}if(_0x4f3d84!==_0x140a6d['material']||_0x4148b9!==_0x140a6d['layer']||_0xb18d05!==_0x140a6d['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh']||_0x162c31!==_0x140a6d['mesh']['primitive'][0x15f3+-0x1120+-0x4d3]['indexed']||_0x50dc60!==_0x140a6d['_shaderDef'+'s']||_0x30efc5+_0x140a6d['mesh']['vertexBuff'+'er']['getNumVert'+'ices']()>_0x5bdf41){_0x43bb00(_0x140a6d);continue;}if(_0x547af3['copy'](_0x5aa49d),_0x547af3['add'](_0x140a6d['aabb']),_0x547af3['halfExtent'+'s']['x']>_0x1dbcdf||_0x547af3['halfExtent'+'s']['y']>_0x1dbcdf||_0x547af3['halfExtent'+'s']['z']>_0x1dbcdf){_0x43bb00(_0x140a6d);continue;}if(_0xeea59e&&(!(_0x290af4=_0x140a6d['stencilFro'+'nt'])||_0xeea59e['func']!==_0x290af4['func']||_0xeea59e['zpass']!==_0x290af4['zpass'])){_0x43bb00(_0x140a6d);continue;}if(_0x50c4f3!==Ad(_0x140a6d)){_0x43bb00(_0x140a6d);continue;}if(!jw(_0x52f83d,_0x140a6d['parameters'])){_0x43bb00(_0x140a6d);continue;}if(_0x1fde9e&&_0x4dff49&&_0x4dff49['intersects'](_0x140a6d['aabb'])&&_0x140a6d['drawOrder']!==_0x1a4b2e){_0x43bb00(_0x140a6d);continue;}_0x5aa49d['add'](_0x140a6d['aabb']),_0x30efc5+=_0x140a6d['mesh']['vertexBuff'+'er']['getNumVert'+'ices'](),_0xd2dcc[_0x59e4bf]['push'](_0x140a6d);}_0x59e4bf++,_0x7ae8c6=_0x3235a2;}return _0xd2dcc;}['collectBat'+'chedMeshDa'+'ta'](_0x4eb71d,_0x21ae7e){let _0x1ddfa5=null,_0x3f25d3=0x488+0x1da5*0x1+0x222d*-0x1,_0x3aea12=0x129b+0xa*0x20b+-0x2709,_0x236965=null;for(let _0x141f0d=0x35f+0xa48+-0xda7;_0x141f0d<_0x4eb71d['length'];_0x141f0d++)if(_0x4eb71d[_0x141f0d]['visible']){const _0x309d05=_0x4eb71d[_0x141f0d]['mesh'],_0x322afc=_0x309d05['vertexBuff'+'er']['numVertice'+'s'];if(_0x3f25d3+=_0x322afc,_0x309d05['primitive'][-0x1da5+-0xe28+-0x2bcd*-0x1]['indexed'])_0x3aea12+=_0x309d05['primitive'][-0x2690+0x59*0x26+0x195a]['count'];else{const _0x3226df=_0x309d05['primitive'][0x1*-0x80f+0x3*-0x2e1+0x10b2]['type'];(_0x3226df===sa||_0x3226df===vr)&&_0x309d05['primitive'][0x8f*0x38+0xf09+-0x2e51]['count']===0xb*-0xbf+-0x1bb*-0x7+0x2*-0x1f2&&(_0x3aea12+=-0x1491+0x1*0x2523+-0x108c);}if(!_0x1ddfa5){_0x236965=_0x4eb71d[_0x141f0d]['material'],_0x1ddfa5={};const _0x889a1c=_0x309d05['vertexBuff'+'er']['format']['elements'];for(let _0x9ff4b1=0x26b*0x1+-0x201c+0x1db1;_0x9ff4b1<_0x889a1c['length'];_0x9ff4b1++){const _0x4ab375=_0x889a1c[_0x9ff4b1]['name'];_0x1ddfa5[_0x4ab375]={'numComponents':_0x889a1c[_0x9ff4b1]['numCompone'+'nts'],'dataType':_0x889a1c[_0x9ff4b1]['dataType'],'normalize':_0x889a1c[_0x9ff4b1]['normalize'],'count':0x0};}_0x21ae7e&&(_0x1ddfa5[us]={'numComponents':0x1,'dataType':Ve,'normalize':!(0x266e+0xb95*-0x1+0x1ad8*-0x1),'count':0x0});}}return{'streams':_0x1ddfa5,'batchNumVerts':_0x3f25d3,'batchNumIndices':_0x3aea12,'material':_0x236965};}['create'](_0x2047a4,_0x3d9cb8,_0x1ffd6e){const _0x5d7072=de();this['_init']||(this['vertexForm'+'ats']={},this['_init']=!(0x192+-0x59e*0x1+0x40c));let _0x46fc69=null,_0x2edeca,_0x491d11,_0x24b398,_0x131ef5=null;const _0x323c3b=this['collectBat'+'chedMeshDa'+'ta'](_0x2047a4,_0x3d9cb8);if(_0x323c3b['streams']){const _0x18affd=_0x323c3b['streams'];let _0x51f7b8=_0x323c3b['material'];const _0xbe64c1=_0x323c3b['batchNumVe'+'rts'],_0x2e9ee8=_0x323c3b['batchNumIn'+'dices'];_0x131ef5=new Gm(_0x2047a4,_0x3d9cb8,_0x1ffd6e),this['_batchList']['push'](_0x131ef5);let _0x303468,_0x5cf4bb,_0x4f36fe,_0x3c0908,_0x45cdbf=-0x64*0x55+-0x1*0x2109+-0x223*-0x1f,_0x11ed26=0x12a3+0x56*0x14+-0x195b,_0x3ca635;const _0x2da356=_0xbe64c1<=-0x1c086*0x1+0x1*-0x11f51+0x3dfd6?Uint16Array:Uint32Array,_0x42cd55=new _0x2da356(_0x2e9ee8);for(_0x2edeca in _0x18affd)_0x46fc69=_0x18affd[_0x2edeca],_0x46fc69['typeArrayT'+'ype']=_n[_0x46fc69['dataType']],_0x46fc69['elementByt'+'eSize']=Eo[_0x46fc69['dataType']],_0x46fc69['buffer']=new _0x46fc69['typeArrayT'+'ype'](_0xbe64c1*_0x46fc69['numCompone'+'nts']);for(let _0x426223=-0x688+-0x8c7+0xf4f;_0x426223<_0x2047a4['length'];_0x426223++)if(_0x2047a4[_0x426223]['visible']){_0x491d11=_0x2047a4[_0x426223]['mesh'],_0x24b398=_0x491d11['vertexBuff'+'er']['numVertice'+'s'],_0x3d9cb8||(_0x3ca635=_0x2047a4[_0x426223]['node']['getWorldTr'+'ansform']());for(_0x2edeca in _0x18affd)if(_0x2edeca!==us){_0x46fc69=_0x18affd[_0x2edeca];const _0x182aec=new _0x46fc69['typeArrayT'+'ype'](_0x46fc69['buffer']['buffer'],_0x46fc69['elementByt'+'eSize']*_0x46fc69['count']),_0x4c21fe=_0x491d11['getVertexS'+'tream'](_0x2edeca,_0x182aec)*_0x46fc69['numCompone'+'nts'];if(_0x46fc69['count']+=_0x4c21fe,!_0x3d9cb8&&_0x46fc69['numCompone'+'nts']>=-0xabc+-0xcf4+0x17b3){if(_0x2edeca===Pe){const _0x481d0e=_0x3ca635['data'],_0x3f7888=_0x481d0e[0xb*-0xd7+0x2*-0xab4+0x20b*0xf],_0x2f7f15=_0x481d0e[-0x47b+0x1*-0x2413+0x1*0x288f],_0x2cbd60=_0x481d0e[-0x1325+-0x104c*0x1+-0xbd1*-0x3],_0x3c594f=_0x481d0e[0x1*0x313+0x138*-0x2+-0x3*0x35],_0x450599=_0x481d0e[-0x6da+-0x1813+0x1ef2],_0x46102f=_0x481d0e[0x10af*0x1+0x3*0x6fd+-0x25a*0x10],_0x4f43f1=_0x481d0e[0x11ab*0x1+0x1cc6+-0x2e69],_0x59844b=_0x481d0e[-0x25e*0x4+0x1*0x1f04+-0x1583*0x1],_0x17fb71=_0x481d0e[-0x22b1*-0x1+0x1a3d*0x1+-0x3ce4],_0x273718=_0x481d0e[0x1d40+0x1168+0x274*-0x13],_0x56b475=_0x481d0e[0x2*0x90f+-0x8b1+-0x960],_0x316b8a=_0x481d0e[0x1eb*-0x9+-0x8b4+0x1a05];let _0x1cddb6,_0x5c4dc8,_0x1a232b;for(let _0x29f94d=0xab0*0x2+-0x1*-0x9bb+-0x1f1b;_0x29f94d<_0x4c21fe;_0x29f94d+=_0x46fc69['numCompone'+'nts'])_0x1cddb6=_0x182aec[_0x29f94d],_0x5c4dc8=_0x182aec[_0x29f94d+(-0xeb0+-0x3*0x2bf+0x16ee)],_0x1a232b=_0x182aec[_0x29f94d+(-0x499+0x4ad*0x6+-0xcf*0x1d)],_0x182aec[_0x29f94d]=_0x1cddb6*_0x3f7888+_0x5c4dc8*_0x3c594f+_0x1a232b*_0x4f43f1+_0x273718,_0x182aec[_0x29f94d+(-0x824+0x3d9+-0x64*-0xb)]=_0x1cddb6*_0x2f7f15+_0x5c4dc8*_0x450599+_0x1a232b*_0x59844b+_0x56b475,_0x182aec[_0x29f94d+(0x4c*0x34+-0x491*0x8+0x151a)]=_0x1cddb6*_0x2cbd60+_0x5c4dc8*_0x46102f+_0x1a232b*_0x17fb71+_0x316b8a;}else{if(_0x2edeca===gs||_0x2edeca===yi){Zm['invertMat4'](_0x3ca635)['transpose']();const [_0x5a6ee4,_0x594a2c,_0x11a696,_0x1e0fbb,_0x5cd1e5,_0x326f37,_0x588f94,_0x572b69,_0x4b8b5b]=Zm['data'];let _0xc54400,_0x18be76,_0xd73fcb;for(let _0x2bbe65=0x1*0x18e9+-0x22d6+0x9ed;_0x2bbe65<_0x4c21fe;_0x2bbe65+=_0x46fc69['numCompone'+'nts'])_0xc54400=_0x182aec[_0x2bbe65],_0x18be76=_0x182aec[_0x2bbe65+(-0xa49*0x3+0x1e19+0xc3)],_0xd73fcb=_0x182aec[_0x2bbe65+(-0x2*-0x23b+-0x2*0xa91+-0x1ab*-0xa)],_0x182aec[_0x2bbe65]=_0xc54400*_0x5a6ee4+_0x18be76*_0x1e0fbb+_0xd73fcb*_0x588f94,_0x182aec[_0x2bbe65+(0x2451+0x1441+0x3891*-0x1)]=_0xc54400*_0x594a2c+_0x18be76*_0x5cd1e5+_0xd73fcb*_0x572b69,_0x182aec[_0x2bbe65+(-0x265*0x5+0x13b7+-0x7bc)]=_0xc54400*_0x11a696+_0x18be76*_0x326f37+_0xd73fcb*_0x4b8b5b;}}}}if(_0x3d9cb8){_0x46fc69=_0x18affd[us];for(let _0x286da5=-0x3b*-0x2a+0x1bc5+0x1*-0x2573;_0x286da5<_0x24b398;_0x286da5++)_0x46fc69['buffer'][_0x46fc69['count']++]=_0x426223;}if(_0x491d11['primitive'][-0x1*0x2279+0xdba+0x14bf]['indexed']){_0x303468=_0x491d11['primitive'][0x83*-0x16+-0xfd1*0x1+0x1*0x1b13]['base'],_0x5cf4bb=_0x491d11['primitive'][-0x4*-0x1d+0x29c*-0x7+0x390*0x5]['baseVertex']||0xc73+-0x1*0x18e+0xae5*-0x1,_0x4f36fe=_0x491d11['primitive'][-0x59*0x4d+-0x208a+-0x2d3*-0x15]['count'];const _0x211788=_0x491d11['indexBuffe'+'r'][0x2643+0x1*-0x865+-0x1dde]['getFormat']();_0x3c0908=new Kc[_0x211788](_0x491d11['indexBuffe'+'r'][-0x55b*0x1+0x1d1e+0x4f*-0x4d]['storage']);}else{_0x5cf4bb=-0x2*-0x112a+0x203e+-0x2*0x2149;const _0x4b6a63=_0x491d11['primitive'][0x89e*0x1+0x1*0x9be+-0x125c]['type'];if(_0x4b6a63===sa||_0x4b6a63===vr){if(_0x491d11['primitive'][0xe13+0xa4*-0xb+-0x707]['count']===-0x61*0x32+0x342+-0x86*-0x1e)_0x303468=-0x87+-0xebb*-0x2+-0x1cef,_0x4f36fe=0x1*0x1dea+-0x110d+-0xcd7,_0x3c0908=_0x4b6a63===sa?Xw:qw;else{_0x4f36fe=-0x1433+0x105e*0x2+-0xc89;continue;}}}for(let _0x2ca1b2=0x21f7+-0x8a4+-0x1953;_0x2ca1b2<_0x4f36fe;_0x2ca1b2++)_0x42cd55[_0x2ca1b2+_0x11ed26]=_0x3c0908[_0x303468+_0x2ca1b2]+_0x5cf4bb+_0x45cdbf;_0x11ed26+=_0x4f36fe,_0x45cdbf+=_0x24b398;}_0x491d11=new Ge(this['device']);for(_0x2edeca in _0x18affd)_0x46fc69=_0x18affd[_0x2edeca],_0x491d11['setVertexS'+'tream'](_0x2edeca,_0x46fc69['buffer'],_0x46fc69['numCompone'+'nts'],void(0x154*-0x14+0xd8b+-0x1*-0xd05),_0x46fc69['dataType'],_0x46fc69['normalize']);_0x42cd55['length']>-0xa3*0x14+0x1228+0x2b6*-0x2&&_0x491d11['setIndices'](_0x42cd55),_0x491d11['update'](qs,!(-0x2*0x7a3+-0x2037+0x1*0x2f7e)),_0x3d9cb8&&(_0x51f7b8=_0x51f7b8['clone'](),_0x51f7b8['update']());const _0x8f30e0=new He(_0x491d11,_0x51f7b8,this['rootNode']);_0x8f30e0['castShadow']=_0x131ef5['origMeshIn'+'stances'][0x1ca*-0x7+-0x1*-0x1589+-0x903]['castShadow'],_0x8f30e0['parameters']=_0x131ef5['origMeshIn'+'stances'][0xd85+-0x230d+0x1588]['parameters'],_0x8f30e0['layer']=_0x131ef5['origMeshIn'+'stances'][-0x1dcf+0x20c+-0x67*-0x45]['layer'],_0x8f30e0['_shaderDef'+'s']=_0x131ef5['origMeshIn'+'stances'][0x1*0x313+0x1*-0x2255+0x1f42]['_shaderDef'+'s'],_0x8f30e0['batching']=!(-0x1340+-0x2*0xd40+0x2dc0),_0x8f30e0['cull']=_0x131ef5['origMeshIn'+'stances'][0x8e5+0x79*0x37+-0x22e4]['cull'];const _0x37732d=this['_batchGrou'+'ps'][_0x1ffd6e];if(_0x37732d&&_0x37732d['_ui']&&(_0x8f30e0['cull']=!(0x1168+0x15*-0xee+0x21f)),_0x3d9cb8){const _0x584391=[];for(let _0x15dc64=0xb*0xf1+-0x2308+-0x18ad*-0x1;_0x15dc64<_0x131ef5['origMeshIn'+'stances']['length'];_0x15dc64++)_0x584391['push'](_0x131ef5['origMeshIn'+'stances'][_0x15dc64]['node']);_0x8f30e0['skinInstan'+'ce']=new Wm(this['device'],_0x584391,this['rootNode']);}_0x8f30e0['_updateAab'+'b']=!(-0x85f*0x3+0x387*-0x5+0x2ac1),_0x8f30e0['drawOrder']=_0x131ef5['origMeshIn'+'stances'][0x2503+0x76d*0x1+-0x2c70]['drawOrder'],_0x8f30e0['stencilFro'+'nt']=_0x131ef5['origMeshIn'+'stances'][-0x55f+0x1*0x19d7+-0x1478]['stencilFro'+'nt'],_0x8f30e0['stencilBac'+'k']=_0x131ef5['origMeshIn'+'stances'][-0x22f+0x2*-0x9ce+0x1*0x15cb]['stencilBac'+'k'],_0x8f30e0['flipFacesF'+'actor']=Ad(_0x131ef5['origMeshIn'+'stances'][0x2617+0xbed*0x1+-0x3204]),_0x8f30e0['castShadow']=_0x131ef5['origMeshIn'+'stances'][0x13e4+0x2028+-0x340c]['castShadow'],_0x131ef5['meshInstan'+'ce']=_0x8f30e0,_0x131ef5['updateBoun'+'dingBox']();}return this['_stats']['createTime']+=de()-_0x5d7072,_0x131ef5;}['updateAll'](){this['_dirtyGrou'+'ps']['length']>0x1566+-0x4fc+-0x106a&&this['generate'](this['_dirtyGrou'+'ps']);const _0x27fba5=de();for(let _0x57c976=0x1e19+0x1034+-0x2e4d;_0x57c976<this['_batchList']['length'];_0x57c976++)this['_batchList'][_0x57c976]['dynamic']&&this['_batchList'][_0x57c976]['updateBoun'+'dingBox']();this['_stats']['updateLast'+'FrameTime']=de()-_0x27fba5;}['clone'](_0x7b1db0,_0x3f8662){const _0x379ad2=new Gm(_0x3f8662,_0x7b1db0['dynamic'],_0x7b1db0['batchGroup'+'Id']);this['_batchList']['push'](_0x379ad2);const _0x3b0062=[];for(let _0x4d615b=-0x13a3+-0x205*-0x11+-0xeb2;_0x4d615b<_0x3f8662['length'];_0x4d615b++)_0x3b0062['push'](_0x3f8662[_0x4d615b]['node']);return _0x379ad2['meshInstan'+'ce']=new He(_0x7b1db0['meshInstan'+'ce']['mesh'],_0x7b1db0['meshInstan'+'ce']['material'],_0x7b1db0['meshInstan'+'ce']['node']),_0x379ad2['meshInstan'+'ce']['_updateAab'+'b']=!(-0x5fb+-0x2254+-0x14*-0x204),_0x379ad2['meshInstan'+'ce']['parameters']=_0x3f8662[0x1*0x46b+-0x178d*0x1+-0x991*-0x2]['parameters'],_0x379ad2['meshInstan'+'ce']['cull']=_0x3f8662[0x16d9*-0x1+0x679*-0x5+0x3736]['cull'],_0x379ad2['meshInstan'+'ce']['layer']=_0x3f8662[-0x47*-0x11+0x18a3+0x242*-0xd]['layer'],_0x7b1db0['dynamic']&&(_0x379ad2['meshInstan'+'ce']['skinInstan'+'ce']=new Wm(this['device'],_0x3b0062,this['rootNode'])),_0x379ad2['meshInstan'+'ce']['castShadow']=_0x7b1db0['meshInstan'+'ce']['castShadow'],_0x379ad2;}['destroyBat'+'ch'](_0x19549d){_0x19549d['destroy'](this['scene'],this['_batchGrou'+'ps'][_0x19549d['batchGroup'+'Id']]['layers']);}}const Jm='uSceneColo'+'rMap';class Kw extends ys{constructor(){super(...arguments),h(this,'colorRende'+'rTarget',null),h(this,'source',null);}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']);}['shouldReal'+'locate'](_0x3f0032,_0x4fb5b8,_0x34a5cc){if((_0x3f0032==null?void(0x5*0x1c1+-0x1f*-0x40+0x1085*-0x1):_0x3f0032['colorBuffe'+'r']['format'])!==_0x34a5cc)return!(-0xdb2+0x159*-0x16+-0x92*-0x4c);const _0x354990=(_0x4fb5b8==null?void(-0x1767+-0x1100+0x2867):_0x4fb5b8['width'])||this['device']['width'],_0x55b6f8=(_0x4fb5b8==null?void(0x9*-0x335+0x20d6+-0x3f9):_0x4fb5b8['height'])||this['device']['height'];return!_0x3f0032||_0x354990!==_0x3f0032['width']||_0x55b6f8!==_0x3f0032['height'];}['allocateRe'+'nderTarget'](_0x316bb8,_0x1aa682,_0x57a473,_0x1f0ee9){const _0x5321ff=new _e(_0x57a473,{'name':Jm,'format':_0x1f0ee9,'width':_0x1aa682?_0x1aa682['colorBuffe'+'r']['width']:_0x57a473['width'],'height':_0x1aa682?_0x1aa682['colorBuffe'+'r']['height']:_0x57a473['height'],'mipmaps':!(-0x1*0x1a56+0x23f5+-0x99f),'minFilter':ha,'magFilter':vt,'addressU':ue,'addressV':ue});return _0x316bb8?(_0x316bb8['destroyFra'+'meBuffers'](),_0x316bb8['_colorBuff'+'er']=_0x5321ff,_0x316bb8['_colorBuff'+'ers']=[_0x5321ff]):_0x316bb8=new gt({'name':'ColorGrabR'+'T','colorBuffer':_0x5321ff,'depth':!(0x61*0x15+-0x18f8+0x1104),'stencil':!(0x95f*0x1+0xe94+-0x17f2),'autoResolve':!(0x2*-0x8ad+-0x1cd3+0x2e*0x101)}),_0x316bb8;}['releaseRen'+'derTarget'](_0x1caaf9){_0x1caaf9&&(_0x1caaf9['destroyTex'+'tureBuffer'+'s'](),_0x1caaf9['destroy']());}['frameUpdat'+'e'](){const _0x2fba13=this['device'],_0x25edd4=this['source'],_0x4ce4b4=(_0x25edd4==null?void(-0x299*0xf+0x1*0x1a2f+0x4*0x332):_0x25edd4['colorBuffe'+'r']['format'])??this['device']['backBuffer'+'Format'];this['shouldReal'+'locate'](this['colorRende'+'rTarget'],_0x25edd4==null?void(-0x4*-0x602+0xb83+-0x238b):_0x25edd4['colorBuffe'+'r'],_0x4ce4b4)&&(this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']),this['colorRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['colorRende'+'rTarget'],_0x25edd4,_0x2fba13,_0x4ce4b4));const _0x39c5b8=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x2fba13['scope']['resolve'](Jm)['setValue'](_0x39c5b8);}['execute'](){const _0x1fcd5f=this['device'];Q['pushGpuMar'+'ker'](_0x1fcd5f,'GRAB-COLOR');const _0x55ea4f=this['source'],_0x47587f=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x1fcd5f['isWebGPU']?(_0x1fcd5f['copyRender'+'Target'](_0x55ea4f,this['colorRende'+'rTarget'],!(0xe6*-0x24+0x26e7+-0x1*0x68f),!(0x199+0x24bc+-0x2654)),_0x1fcd5f['mipmapRend'+'erer']['generate'](this['colorRende'+'rTarget']['colorBuffe'+'r']['impl'])):(_0x1fcd5f['copyRender'+'Target'](_0x55ea4f,this['colorRende'+'rTarget'],!(0x13c1+-0x19b1+0x5f0),!(0x172b+0x533*0x4+-0x296*0x11)),_0x1fcd5f['activeText'+'ure'](_0x1fcd5f['maxCombine'+'dTextures']-(0xd3f*0x1+-0x1*0xea3+0x165)),_0x1fcd5f['bindTextur'+'e'](_0x47587f),_0x1fcd5f['gl']['generateMi'+'pmap'](_0x47587f['impl']['_glTarget'])),Q['popGpuMark'+'er'](_0x1fcd5f);}}const e_='uSceneDept'+'hMap';class Zw extends ys{constructor(_0x47b257,_0x414747){super(_0x47b257),h(this,'depthRende'+'rTarget',null),h(this,'camera',null),this['camera']=_0x414747;}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']);}['shouldReal'+'locate'](_0x34a129,_0x3b3677){const _0x1940bf=(_0x3b3677==null?void(-0x133a*-0x1+0x1769+-0x2aa3):_0x3b3677['width'])||this['device']['width'],_0x1829ed=(_0x3b3677==null?void(-0x2336+-0x1*0xd8d+0x30c3):_0x3b3677['height'])||this['device']['height'];return!_0x34a129||_0x1940bf!==_0x34a129['width']||_0x1829ed!==_0x34a129['height'];}['allocateRe'+'nderTarget'](_0x1b5e84,_0xeb31ce,_0x4acb5a,_0x160852,_0x579861){const _0x28ddd6=new _e(_0x4acb5a,{'name':e_,'format':_0x160852,'width':_0xeb31ce?_0xeb31ce['colorBuffe'+'r']['width']:_0x4acb5a['width'],'height':_0xeb31ce?_0xeb31ce['colorBuffe'+'r']['height']:_0x4acb5a['height'],'mipmaps':!(-0x1*0x10a3+0x1e3*0x2+0xcde),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});return _0x1b5e84?(_0x1b5e84['destroyFra'+'meBuffers'](),_0x579861?_0x1b5e84['_depthBuff'+'er']=_0x28ddd6:(_0x1b5e84['_colorBuff'+'er']=_0x28ddd6,_0x1b5e84['_colorBuff'+'ers']=[_0x28ddd6])):_0x1b5e84=new gt({'name':'DepthGrabR'+'T','colorBuffer':_0x579861?null:_0x28ddd6,'depthBuffer':_0x579861?_0x28ddd6:null,'depth':!_0x579861,'stencil':_0x4acb5a['supportsSt'+'encil'],'autoResolve':!(0x206e+0xaeb+-0x124*0x26)}),_0x1b5e84;}['releaseRen'+'derTarget'](_0x423edf){_0x423edf&&(_0x423edf['destroyTex'+'tureBuffer'+'s'](),_0x423edf['destroy']());}['before'](){var _0x57db36,_0xe1d561;const _0x443b71=this['camera'],_0x36c97b=this['device'],_0x1622e3=(_0x443b71==null?void(0x1343+0x584+-0x18c7):_0x443b71['renderTarg'+'et'])??_0x36c97b['backBuffer'];let _0x4af5e1=!(-0xba1+-0x11b2+0x1*0x1d53),_0x476db0=_0x1622e3['stencil']?Oh:Wi;_0x36c97b['isWebGPU']&&_0x1622e3['samples']>-0x305*0x9+0xdf+0x3*0x8c5&&(_0x476db0=Qi,_0x4af5e1=!(-0x1*-0x4ba+0x2d7+-0x2c*0x2c));const _0x471c27=((_0x57db36=_0x443b71['renderTarg'+'et'])==null?void(0x1df5*0x1+0x1db*0x13+0x1*-0x4136):_0x57db36['depthBuffe'+'r'])??((_0xe1d561=_0x443b71['renderTarg'+'et'])==null?void(0x25ca*0x1+-0x1af4+-0xad6):_0xe1d561['colorBuffe'+'r']);this['shouldReal'+'locate'](this['depthRende'+'rTarget'],_0x471c27)&&(this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']),this['depthRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['depthRende'+'rTarget'],_0x443b71['renderTarg'+'et'],_0x36c97b,_0x476db0,_0x4af5e1));const _0x328014=_0x4af5e1?this['depthRende'+'rTarget']['depthBuffe'+'r']:this['depthRende'+'rTarget']['colorBuffe'+'r'];_0x36c97b['scope']['resolve'](e_)['setValue'](_0x328014);}['execute'](){const _0x55d6e1=this['device'];if(Q['pushGpuMar'+'ker'](_0x55d6e1,'GRAB-DEPTH'),_0x55d6e1['isWebGL2']&&_0x55d6e1['renderTarg'+'et']['samples']>-0x29*-0x35+-0x1*-0x31f+-0xb9b){const _0x3d4988=_0x55d6e1['renderTarg'+'et']['impl']['_glFrameBu'+'ffer'],_0x53ff34=this['depthRende'+'rTarget'];_0x55d6e1['renderTarg'+'et']=_0x53ff34,_0x55d6e1['updateBegi'+'n'](),this['depthRende'+'rTarget']['impl']['internalRe'+'solve'](_0x55d6e1,_0x3d4988,_0x53ff34['impl']['_glFrameBu'+'ffer'],this['depthRende'+'rTarget'],_0x55d6e1['gl']['DEPTH_BUFF'+'ER_BIT']);}else _0x55d6e1['copyRender'+'Target'](_0x55d6e1['renderTarg'+'et'],this['depthRende'+'rTarget'],!(-0x5*0x296+-0x8b*0x3e+0x2e99),!(-0x1f2a+-0x1075*-0x2+-0x1c0));Q['popGpuMark'+'er'](_0x55d6e1);}}class Uy{constructor(){h(this,'_gammaCorr'+'ection',Ec),h(this,'_toneMappi'+'ng',Mp),h(this,'_srgbRende'+'rTarget',!(-0x1*-0xa67+-0xb2b+0x1*0xc5)),h(this,'_ssaoEnabl'+'ed',!(0x68f*-0x1+-0x16*0x25+0x9be)),h(this,'_fog',Hn),h(this,'_sceneDept'+'hMapLinear',!(0xfd8+0x1229*0x1+-0x1100*0x2)),h(this,'_hash'),h(this,'_defines',new Map()),h(this,'_definesDi'+'rty',!(0x1*0x1335+0x133d+-0x2672));}get['hash'](){if(this['_hash']===void(-0x15f3+0x295*0x1+0x135e*0x1)){const _0x196227=this['gammaCorre'+'ction']+'_'+this['toneMappin'+'g']+'_'+this['srgbRender'+'Target']+'_'+this['fog']+'_'+this['ssaoEnable'+'d']+'_'+this['sceneDepth'+'MapLinear'];this['_hash']=hi(_0x196227);}return this['_hash'];}get['defines'](){const _0x5c77e7=this['_defines'];return this['_definesDi'+'rty']&&(this['_definesDi'+'rty']=!(0x21b8+0xbc6+-0x2d7d),_0x5c77e7['clear'](),this['_sceneDept'+'hMapLinear']&&_0x5c77e7['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',!(-0x39d*0x7+-0x1*0xb4b+0x53a*0x7)),_0x5c77e7['set']('FOG',this['_fog']['toUpperCas'+'e']()),_0x5c77e7['set']('TONEMAP',by[this['_toneMappi'+'ng']]),_0x5c77e7['set']('GAMMA',ow[this['shaderOutp'+'utGamma']])),_0x5c77e7;}['markDirty'](){this['_hash']=void(-0x6*-0x104+0xd67+0xd9*-0x17),this['_definesDi'+'rty']=!(0xdc1*0x2+-0x1a89+-0xf9);}set['fog'](_0xe7eeec){this['_fog']!==_0xe7eeec&&(this['_fog']=_0xe7eeec,this['markDirty']());}get['fog'](){return this['_fog'];}set['ssaoEnable'+'d'](_0x423646){this['_ssaoEnabl'+'ed']!==_0x423646&&(this['_ssaoEnabl'+'ed']=_0x423646,this['markDirty']());}get['ssaoEnable'+'d'](){return this['_ssaoEnabl'+'ed'];}set['gammaCorre'+'ction'](_0x153948){this['_gammaCorr'+'ectionAssi'+'gned']=!(-0x15*0xec+0x71*0x13+0xaf9),this['_gammaCorr'+'ection']!==_0x153948&&(this['_gammaCorr'+'ection']=_0x153948,this['markDirty']());}get['gammaCorre'+'ction'](){return this['_gammaCorr'+'ection'];}set['toneMappin'+'g'](_0x573fea){this['_toneMappi'+'ng']!==_0x573fea&&(this['_toneMappi'+'ng']=_0x573fea,this['markDirty']());}get['toneMappin'+'g'](){return this['_toneMappi'+'ng'];}set['srgbRender'+'Target'](_0xc93928){this['_srgbRende'+'rTarget']!==_0xc93928&&(this['_srgbRende'+'rTarget']=_0xc93928,this['markDirty']());}get['srgbRender'+'Target'](){return this['_srgbRende'+'rTarget'];}set['sceneDepth'+'MapLinear'](_0x87010a){this['_sceneDept'+'hMapLinear']!==_0x87010a&&(this['_sceneDept'+'hMapLinear']=_0x87010a,this['markDirty']());}get['sceneDepth'+'MapLinear'](){return this['_sceneDept'+'hMapLinear'];}get['shaderOutp'+'utGamma'](){return this['_gammaCorr'+'ection']===Ec&&!this['_srgbRende'+'rTarget']?Ec:yl;}}const Ca=new D(),Qn=new D(),t_=new D(),s_=new te(),Qw=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()];class Tl{constructor(){h(this,'shaderPass'+'Info',null),h(this,'renderPass'+'ColorGrab',null),h(this,'renderPass'+'DepthGrab',null),h(this,'fogParams',null),h(this,'shaderPara'+'ms',new Uy()),h(this,'renderPass'+'es',[]),h(this,'jitter',0x1a46+0x18*-0x135+0x2b2),(this['_aspectRat'+'io']=(-0x1*-0x19f9+0x25e5+-0x3fce)/(-0x4f4*-0x7+0x8bc+-0x3*0xe75),this['_aspectRat'+'ioMode']=kp,this['_calculate'+'Projection']=null,this['_calculate'+'Transform']=null,this['_clearColo'+'r']=new ie(-0x2*0x1a2+0x3*0xa57+-0x1bc1+0.75,0xa52*-0x3+0x1e40+0xb6+0.75,-0x4*-0x877+-0xada+-0x1702+0.75,0x15e5+0x607*0x2+-0x21f2),this['_clearColo'+'rBuffer']=!(0xb0*-0x1+0x2*-0x2e8+0xd*0x80),this['_clearDept'+'h']=-0xd47+-0x166*0x10+0x11d4*0x2,this['_clearDept'+'hBuffer']=!(-0x35f+-0x154f+0x18ae),this['_clearSten'+'cil']=0x868*0x1+0x7*-0x2a7+0x3*0x363,this['_clearSten'+'cilBuffer']=!(-0x6d1+0x5*-0x117+-0x4*-0x311),this['_cullFaces']=!(-0xb4c*-0x2+-0x1831*0x1+0x199),this['_farClip']=-0x854*-0x1+-0x1*-0x1084+-0x14f0,this['_flipFaces']=!(0x4*-0x247+-0xa6d*0x1+0x138a),this['_fov']=-0x1e8c+-0x211e+0x3b*0x115,this['_frustumCu'+'lling']=!(-0x1aaf+0xd01*0x3+-0xc54),this['_horizonta'+'lFov']=!(0x5e2+0x16b1+-0x35*0x8a),this['_layers']=[Ji,ps,wp,Sl,Ep],this['_layersSet']=new Set(this['_layers']),this['_nearClip']=0x1760+0x5d1*0x2+0x1*-0x2302+0.1,this['_node']=null,this['_orthoHeig'+'ht']=-0x87e+0x476+-0x2*-0x209,this['_projectio'+'n']=ni,this['_rect']=new re(0x10e5+-0x13d*-0xd+-0x20fe,-0x18c7+-0x1*0x2632+-0x8ff*-0x7,-0x1c94+0x4d*-0x51+0x34f2,0x1*0x3a+0x926+-0x95f),this['_renderTar'+'get']=null,this['_scissorRe'+'ct']=new re(0x4c*0x18+0xef7+-0xf*0x179,-0x1372+0x1*-0x105f+0x23d1*0x1,0x19e2+-0x1*-0x277+-0x4*0x716,-0x2*0xa82+0x1111*0x2+-0xd1d),this['_scissorRe'+'ctClear']=!(0x1*-0xd9a+-0x361*0xb+0x32c6),this['_aperture']=0x1b8a+0x520*-0x2+-0x9*0x1ea,this['_shutter']=(-0x157f+-0xf92+0x1a*0x16d)/(-0x1099+-0x10d*0x17+0x2cac),this['_sensitivi'+'ty']=-0x1243*0x2+-0xa76+0x1*0x32e4,this['_projMat']=new te(),this['_projMatDi'+'rty']=!(0x246a*0x1+-0xd03+-0x1767),this['_projMatSk'+'ybox']=new te(),this['_viewMat']=new te(),this['_viewMatDi'+'rty']=!(-0x30*-0x18+-0x1f6f+-0x563*-0x5),this['_viewProjM'+'at']=new te(),this['_viewProjM'+'atDirty']=!(0x1556+0x1037+-0x258d*0x1),this['_shaderMat'+'ricesVersi'+'on']=0x2372+-0x1889+-0xae9,this['_viewProjI'+'nverse']=new te(),this['_viewProjC'+'urrent']=null,this['_viewProjP'+'revious']=new te(),this['_jitters']=[0x288+-0x24fd+0x2275,0x23a3*0x1+0x58f*-0x1+-0x1e14,0x713*0x3+-0x1*0x3c7+-0x1172*0x1,0x2*-0x458+-0x1215*0x1+0x1ac5],this['frustum']=new k0(),this['_xr']=null,this['_xrPropert'+'ies']={'horizontalFov':this['_horizonta'+'lFov'],'fov':this['_fov'],'aspectRatio':this['_aspectRat'+'io'],'farClip':this['_farClip'],'nearClip':this['_nearClip']});}['destroy'](){var _0xd19335,_0x5a0bd8;(_0xd19335=this['renderPass'+'ColorGrab'])==null||_0xd19335['destroy'](),this['renderPass'+'ColorGrab']=null,(_0x5a0bd8=this['renderPass'+'DepthGrab'])==null||_0x5a0bd8['destroy'](),this['renderPass'+'DepthGrab']=null,this['renderPass'+'es']['length']=-0x1b7f+-0xd87+0x2906;}['_storeShad'+'erMatrices'](_0x5a322c,_0x290f79,_0x5c769e,_0x295459){this['_shaderMat'+'ricesVersi'+'on']!==_0x295459&&(this['_shaderMat'+'ricesVersi'+'on']=_0x295459,this['_viewProjP'+'revious']['copy'](this['_viewProjC'+'urrent']??_0x5a322c),this['_viewProjC'+'urrent']??(this['_viewProjC'+'urrent']=new te()),this['_viewProjC'+'urrent']['copy'](_0x5a322c),this['_viewProjI'+'nverse']['invert'](_0x5a322c),this['_jitters'][-0x12a7+0x4bd*0x1+0xdec]=this['_jitters'][0x153*-0x14+0x1a74+0x8],this['_jitters'][0x7*-0x43a+-0x20*-0x11f+-0x647]=this['_jitters'][-0x25f+0xa6f*-0x2+0x173e],this['_jitters'][0x8cd*0x3+0xddb+-0x2842*0x1]=_0x290f79,this['_jitters'][0x1*0xc7c+0xe2f*-0x1+0x1b4]=_0x5c769e);}get['fullSizeCl'+'earRect'](){const _0x2b9891=this['_scissorRe'+'ctClear']?this['scissorRec'+'t']:this['_rect'];return _0x2b9891['x']===0xa2f*-0x3+-0x1*0x1829+0x36b6&&_0x2b9891['y']===-0xeee+-0x2*0x703+-0x11*-0x1b4&&_0x2b9891['z']===-0x979+0x9*0x13d+-0x1ab&&_0x2b9891['w']===0x130d+-0x17b9*0x1+0x4ad;}set['aspectRati'+'o'](_0x294228){this['_aspectRat'+'io']!==_0x294228&&(this['_aspectRat'+'io']=_0x294228,this['_projMatDi'+'rty']=!(0x3*-0xa5b+-0x1b53*-0x1+0x3be));}get['aspectRati'+'o'](){var _0x2acfc8;return(_0x2acfc8=this['xr'])!=null&&_0x2acfc8['active']?this['_xrPropert'+'ies']['aspectRati'+'o']:this['_aspectRat'+'io'];}set['aspectRati'+'oMode'](_0x491049){this['_aspectRat'+'ioMode']!==_0x491049&&(this['_aspectRat'+'ioMode']=_0x491049,this['_projMatDi'+'rty']=!(0x805+-0x58*-0x61+-0x295d*0x1));}get['aspectRati'+'oMode'](){return this['_aspectRat'+'ioMode'];}set['calculateP'+'rojection'](_0x55651c){this['_calculate'+'Projection']=_0x55651c,this['_projMatDi'+'rty']=!(0x1e2d+0x142e+-0x10c9*0x3);}get['calculateP'+'rojection'](){return this['_calculate'+'Projection'];}set['calculateT'+'ransform'](_0x312050){this['_calculate'+'Transform']=_0x312050;}get['calculateT'+'ransform'](){return this['_calculate'+'Transform'];}set['clearColor'](_0x538618){this['_clearColo'+'r']['copy'](_0x538618);}get['clearColor'](){return this['_clearColo'+'r'];}set['clearColor'+'Buffer'](_0x400a9e){this['_clearColo'+'rBuffer']=_0x400a9e;}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'](_0x260ef7){this['_clearDept'+'h']=_0x260ef7;}get['clearDepth'](){return this['_clearDept'+'h'];}set['clearDepth'+'Buffer'](_0x54f188){this['_clearDept'+'hBuffer']=_0x54f188;}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'il'](_0xebc268){this['_clearSten'+'cil']=_0xebc268;}get['clearStenc'+'il'](){return this['_clearSten'+'cil'];}set['clearStenc'+'ilBuffer'](_0x20949a){this['_clearSten'+'cilBuffer']=_0x20949a;}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}set['cullFaces'](_0x34f78e){this['_cullFaces']=_0x34f78e;}get['cullFaces'](){return this['_cullFaces'];}set['farClip'](_0x101f5a){this['_farClip']!==_0x101f5a&&(this['_farClip']=_0x101f5a,this['_projMatDi'+'rty']=!(0x8a*0x5+0x1ece+-0x2180));}get['farClip'](){var _0xe488d7;return(_0xe488d7=this['xr'])!=null&&_0xe488d7['active']?this['_xrPropert'+'ies']['farClip']:this['_farClip'];}set['flipFaces'](_0x11b767){this['_flipFaces']=_0x11b767;}get['flipFaces'](){return this['_flipFaces'];}set['fov'](_0x1370e1){this['_fov']!==_0x1370e1&&(this['_fov']=_0x1370e1,this['_projMatDi'+'rty']=!(-0x7f3+-0x172+0x965));}get['fov'](){var _0x4659d8;return(_0x4659d8=this['xr'])!=null&&_0x4659d8['active']?this['_xrPropert'+'ies']['fov']:this['_fov'];}set['frustumCul'+'ling'](_0x4f112c){this['_frustumCu'+'lling']=_0x4f112c;}get['frustumCul'+'ling'](){return this['_frustumCu'+'lling'];}set['horizontal'+'Fov'](_0x2f0280){this['_horizonta'+'lFov']!==_0x2f0280&&(this['_horizonta'+'lFov']=_0x2f0280,this['_projMatDi'+'rty']=!(-0x101d+-0x1*-0x1a55+-0x51c*0x2));}get['horizontal'+'Fov'](){var _0x479093;return(_0x479093=this['xr'])!=null&&_0x479093['active']?this['_xrPropert'+'ies']['horizontal'+'Fov']:this['_horizonta'+'lFov'];}set['layers'](_0x1a0dd4){this['_layers']=_0x1a0dd4['slice'](-0x1770+-0x1*0xe75+-0x1*-0x25e5),this['_layersSet']=new Set(this['_layers']);}get['layers'](){return this['_layers'];}get['layersSet'](){return this['_layersSet'];}set['nearClip'](_0x576d8f){this['_nearClip']!==_0x576d8f&&(this['_nearClip']=_0x576d8f,this['_projMatDi'+'rty']=!(0xce8+0x1+-0xce9));}get['nearClip'](){var _0x2a1c84;return(_0x2a1c84=this['xr'])!=null&&_0x2a1c84['active']?this['_xrPropert'+'ies']['nearClip']:this['_nearClip'];}set['node'](_0x5d2e29){this['_node']=_0x5d2e29;}get['node'](){return this['_node'];}set['orthoHeigh'+'t'](_0x41a13a){this['_orthoHeig'+'ht']!==_0x41a13a&&(this['_orthoHeig'+'ht']=_0x41a13a,this['_projMatDi'+'rty']=!(0x9b6+0xf+-0x1*0x9c5));}get['orthoHeigh'+'t'](){return this['_orthoHeig'+'ht'];}set['projection'](_0x2f9ace){this['_projectio'+'n']!==_0x2f9ace&&(this['_projectio'+'n']=_0x2f9ace,this['_projMatDi'+'rty']=!(-0x7ec+-0xc30+-0xc6*-0x1a));}get['projection'](){return this['_projectio'+'n'];}get['projection'+'Matrix'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMat'];}set['rect'](_0x2a4494){this['_rect']['copy'](_0x2a4494);}get['rect'](){return this['_rect'];}set['renderTarg'+'et'](_0xd28b5f){this['_renderTar'+'get']=_0xd28b5f;}get['renderTarg'+'et'](){return this['_renderTar'+'get'];}set['scissorRec'+'t'](_0x1e4b9b){this['_scissorRe'+'ct']['copy'](_0x1e4b9b);}get['scissorRec'+'t'](){return this['_scissorRe'+'ct'];}get['viewMatrix'](){if(this['_viewMatDi'+'rty']){const _0x37abde=this['_node']['getWorldTr'+'ansform']();this['_viewMat']['copy'](_0x37abde)['invert'](),this['_viewMatDi'+'rty']=!(0x5d*0x32+0x36*-0x3+-0x1187);}return this['_viewMat'];}set['aperture'](_0x5df2cf){this['_aperture']=_0x5df2cf;}get['aperture'](){return this['_aperture'];}set['sensitivit'+'y'](_0x148ff6){this['_sensitivi'+'ty']=_0x148ff6;}get['sensitivit'+'y'](){return this['_sensitivi'+'ty'];}set['shutter'](_0x5b0b73){this['_shutter']=_0x5b0b73;}get['shutter'](){return this['_shutter'];}set['xr'](_0xafaa7f){this['_xr']!==_0xafaa7f&&(this['_xr']=_0xafaa7f,this['_projMatDi'+'rty']=!(0x1af*-0x8+-0xa4*0x37+0x30b4));}get['xr'](){return this['_xr'];}['clone'](){return new Tl()['copy'](this);}['copy'](_0x84364){return this['_aspectRat'+'io']=_0x84364['_aspectRat'+'io'],this['_farClip']=_0x84364['_farClip'],this['_fov']=_0x84364['_fov'],this['_horizonta'+'lFov']=_0x84364['_horizonta'+'lFov'],this['_nearClip']=_0x84364['_nearClip'],this['_xrPropert'+'ies']['aspectRati'+'o']=_0x84364['_xrPropert'+'ies']['aspectRati'+'o'],this['_xrPropert'+'ies']['farClip']=_0x84364['_xrPropert'+'ies']['farClip'],this['_xrPropert'+'ies']['fov']=_0x84364['_xrPropert'+'ies']['fov'],this['_xrPropert'+'ies']['horizontal'+'Fov']=_0x84364['_xrPropert'+'ies']['horizontal'+'Fov'],this['_xrPropert'+'ies']['nearClip']=_0x84364['_xrPropert'+'ies']['nearClip'],this['aspectRati'+'oMode']=_0x84364['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x84364['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x84364['calculateT'+'ransform'],this['clearColor']=_0x84364['clearColor'],this['clearColor'+'Buffer']=_0x84364['clearColor'+'Buffer'],this['clearDepth']=_0x84364['clearDepth'],this['clearDepth'+'Buffer']=_0x84364['clearDepth'+'Buffer'],this['clearStenc'+'il']=_0x84364['clearStenc'+'il'],this['clearStenc'+'ilBuffer']=_0x84364['clearStenc'+'ilBuffer'],this['cullFaces']=_0x84364['cullFaces'],this['flipFaces']=_0x84364['flipFaces'],this['frustumCul'+'ling']=_0x84364['frustumCul'+'ling'],this['layers']=_0x84364['layers'],this['orthoHeigh'+'t']=_0x84364['orthoHeigh'+'t'],this['projection']=_0x84364['projection'],this['rect']=_0x84364['rect'],this['renderTarg'+'et']=_0x84364['renderTarg'+'et'],this['scissorRec'+'t']=_0x84364['scissorRec'+'t'],this['aperture']=_0x84364['aperture'],this['shutter']=_0x84364['shutter'],this['sensitivit'+'y']=_0x84364['sensitivit'+'y'],this['shaderPass'+'Info']=_0x84364['shaderPass'+'Info'],this['jitter']=_0x84364['jitter'],this['_projMatDi'+'rty']=!(-0x3c*-0x58+0xbe3+-0x2083),this;}['_enableRen'+'derPassCol'+'orGrab'](_0x589dad,_0x4932d6){var _0x2d6d94;_0x4932d6?this['renderPass'+'ColorGrab']||(this['renderPass'+'ColorGrab']=new Kw(_0x589dad)):((_0x2d6d94=this['renderPass'+'ColorGrab'])==null||_0x2d6d94['destroy'](),this['renderPass'+'ColorGrab']=null);}['_enableRen'+'derPassDep'+'thGrab'](_0x14e95a,_0x1818cd,_0x45f85a){var _0x378c41;_0x45f85a?this['renderPass'+'DepthGrab']||(this['renderPass'+'DepthGrab']=new Zw(_0x14e95a,this)):((_0x378c41=this['renderPass'+'DepthGrab'])==null||_0x378c41['destroy'](),this['renderPass'+'DepthGrab']=null);}['_updateVie'+'wProjMat'](){(this['_projMatDi'+'rty']||this['_viewMatDi'+'rty']||this['_viewProjM'+'atDirty'])&&(this['_viewProjM'+'at']['mul2'](this['projection'+'Matrix'],this['viewMatrix']),this['_viewProjM'+'atDirty']=!(0x9c*-0xb+0x1853+-0x386*0x5));}['worldToScr'+'een'](_0x38eceb,_0x3fba82,_0x2e75a6,_0x5e6ebc=new D()){this['_updateVie'+'wProjMat'](),this['_viewProjM'+'at']['transformP'+'oint'](_0x38eceb,_0x5e6ebc);const _0x235ec6=this['_viewProjM'+'at']['data'],_0x31bfd4=_0x38eceb['x']*_0x235ec6[-0x2332+0x950+0x19e5]+_0x38eceb['y']*_0x235ec6[-0x1*0x1c9f+0xb86+0x1120]+_0x38eceb['z']*_0x235ec6[0x1*0x1685+0x716*0x5+-0x1cf4*0x2]+(0x1*0x1be+-0x1930+0x1773)*_0x235ec6[-0x2150+-0xf1a+-0x3079*-0x1];_0x5e6ebc['x']=(_0x5e6ebc['x']/_0x31bfd4+(-0x4*-0x8e+-0x1ba1+-0x2*-0xcb5))*(0x321*-0xb+0x2*-0x2d4+0x1*0x2813+0.5),_0x5e6ebc['y']=(0x1a70+-0xf4d+-0x3*0x3b6-_0x5e6ebc['y']/_0x31bfd4)*(-0x3dd*0x1+-0x161b+-0xc*-0x22a+0.5);const {x:_0x2a7179,y:_0x330547,z:_0x4ee09c,w:_0xb9e981}=this['_rect'];return _0x5e6ebc['x']=_0x5e6ebc['x']*_0x4ee09c*_0x3fba82+_0x2a7179*_0x3fba82,_0x5e6ebc['y']=_0x5e6ebc['y']*_0xb9e981*_0x2e75a6+(-0x287+0x226b+0xaa1*-0x3-_0x330547-_0xb9e981)*_0x2e75a6,_0x5e6ebc;}['screenToWo'+'rld'](_0x3310d2,_0x393f95,_0x590102,_0x4dc99b,_0x4fb3d0,_0x397b27=new D()){const {x:_0x3d962c,y:_0x2c79a2,z:_0x334c3d,w:_0x32d579}=this['_rect'],_0x1fd86d=this['farClip']-this['nearClip'];if(Ca['set']((_0x3310d2-_0x3d962c*_0x4dc99b)/(_0x334c3d*_0x4dc99b),0xa*-0x114+0x1*-0x29c+0xd65-(_0x393f95-(-0x1039+0x6*0x5ab+-0x4*0x472-_0x2c79a2-_0x32d579)*_0x4fb3d0)/(_0x32d579*_0x4fb3d0),_0x590102/_0x1fd86d),Ca['mulScalar'](0x1a5*-0x14+0x14da+-0x606*-0x2),Ca['sub'](D['ONE']),this['_projectio'+'n']===ni){te['_getPerspe'+'ctiveHalfS'+'ize'](Qn,this['fov'],this['aspectRati'+'o'],this['nearClip'],this['horizontal'+'Fov']),Qn['x']*=Ca['x'],Qn['y']*=Ca['y'];const _0x40d000=this['_node']['getWorldTr'+'ansform']();Qn['z']=-this['nearClip'],_0x40d000['transformP'+'oint'](Qn,t_);const _0x84ae45=this['_node']['getPositio'+'n']();_0x397b27['sub2'](t_,_0x84ae45),_0x397b27['normalize'](),_0x397b27['mulScalar'](_0x590102),_0x397b27['add'](_0x84ae45);}else this['_updateVie'+'wProjMat'](),s_['copy'](this['_viewProjM'+'at'])['invert'](),s_['transformP'+'oint'](Ca,_0x397b27);return _0x397b27;}['_evaluateP'+'rojectionM'+'atrix'](){if(this['_projMatDi'+'rty']){if(this['_projectio'+'n']===ni)this['_projMat']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip'],this['horizontal'+'Fov']),this['_projMatSk'+'ybox']['copy'](this['_projMat']);else{const _0x1667c8=this['_orthoHeig'+'ht'],_0x49ad4f=_0x1667c8*this['aspectRati'+'o'];this['_projMat']['setOrtho'](-_0x49ad4f,_0x49ad4f,-_0x1667c8,_0x1667c8,this['nearClip'],this['farClip']),this['_projMatSk'+'ybox']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip']);}this['_projMatDi'+'rty']=!(0x3*-0x73+-0x3*-0x8bd+-0x13*0x14f);}}['getProject'+'ionMatrixS'+'kybox'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMatSk'+'ybox'];}['getExposur'+'e'](){const _0xfc994f=Math['log2'](this['_aperture']*this['_aperture']/this['_shutter']*(-0x1060+-0x2551+-0x39b*-0xf)/this['_sensitivi'+'ty']);return(-0x2304+-0x1273+0x3578)/(Math['pow'](0x239c+-0x24cd+0x133*0x1,_0xfc994f)*(-0x1*0x65f+-0x23e+-0x89e*-0x1+0.19999999999999996));}['getScreenS'+'ize'](_0x5ab430){if(this['_projectio'+'n']===ni){const _0xa05f0e=this['_node']['getPositio'+'n']()['distance'](_0x5ab430['center']);if(_0xa05f0e<_0x5ab430['radius'])return-0x1981*0x1+-0x1669+0x2feb*0x1;const _0x15c756=Math['asin'](_0x5ab430['radius']/_0xa05f0e),_0x5b6720=Math['tan'](_0x15c756),_0x8fae0a=Math['tan'](this['fov']/(0xba1+0x1*-0x9e9+-0x1b6)*Y['DEG_TO_RAD']);return Math['min'](_0x5b6720/_0x8fae0a,0x2*0x84b+-0xac1*0x3+0xfae);}return Y['clamp'](_0x5ab430['radius']/this['_orthoHeig'+'ht'],0x1cba+0x451*-0x3+-0xfc7,-0x791*0x1+-0x1025+0x17b7);}['getFrustum'+'Corners'](_0x354aa5=this['nearClip'],_0x272c62=this['farClip']){const _0x170269=this['fov']*Math['PI']/(0x79f*-0x5+-0x5*0xbf+-0x79*-0x5a);let _0x4b70cb,_0x409c93;this['projection']===ni?this['horizontal'+'Fov']?(_0x4b70cb=_0x354aa5*Math['tan'](_0x170269/(-0x1739+0x1c*-0xd2+-0x2e33*-0x1)),_0x409c93=_0x4b70cb/this['aspectRati'+'o']):(_0x409c93=_0x354aa5*Math['tan'](_0x170269/(-0x1fd7+0x215b+0x182*-0x1)),_0x4b70cb=_0x409c93*this['aspectRati'+'o']):(_0x409c93=this['_orthoHeig'+'ht'],_0x4b70cb=_0x409c93*this['aspectRati'+'o']);const _0x46cbe4=Qw;return _0x46cbe4[0x1a6b*-0x1+0x1*-0x4b1+-0x1f1c*-0x1]['x']=_0x4b70cb,_0x46cbe4[-0x1ba4+-0x1e80+0x2*0x1d12]['y']=-_0x409c93,_0x46cbe4[-0x199c+0xe*0x2b6+0x2*-0x62c]['z']=-_0x354aa5,_0x46cbe4[-0x194+-0x10a3*0x2+0x22db]['x']=_0x4b70cb,_0x46cbe4[0x26e3*-0x1+-0x1*-0xd8a+-0xcad*-0x2]['y']=_0x409c93,_0x46cbe4[-0xb1b*-0x3+0xa2a+-0x2b7a*0x1]['z']=-_0x354aa5,_0x46cbe4[0xcc1+0x7*-0x41e+0x1013]['x']=-_0x4b70cb,_0x46cbe4[0x8d2+-0x1*-0x607+-0xed7]['y']=_0x409c93,_0x46cbe4[-0x442*-0x6+-0x1*-0x1a2f+-0x33b9*0x1]['z']=-_0x354aa5,_0x46cbe4[-0xc52+0xb7a+0xdb]['x']=-_0x4b70cb,_0x46cbe4[-0x1e82+0x6d3+0x151*0x12]['y']=-_0x409c93,_0x46cbe4[-0x12b2+-0x11*0x1b3+0x2f98]['z']=-_0x354aa5,this['_projectio'+'n']===ni&&(this['horizontal'+'Fov']?(_0x4b70cb=_0x272c62*Math['tan'](_0x170269/(-0x2498+0x1212+-0x2*-0x944)),_0x409c93=_0x4b70cb/this['aspectRati'+'o']):(_0x409c93=_0x272c62*Math['tan'](_0x170269/(-0xb*-0x91+0x1e82+-0x24bb)),_0x4b70cb=_0x409c93*this['aspectRati'+'o'])),_0x46cbe4[-0x237a+0x131c+-0x6*-0x2bb]['x']=_0x4b70cb,_0x46cbe4[-0x1bb7+0x618+0x15a3]['y']=-_0x409c93,_0x46cbe4[-0x199f+0x277*0x1+0x2*0xb96]['z']=-_0x272c62,_0x46cbe4[0x1046*0x1+-0xef2*0x2+0xda3]['x']=_0x4b70cb,_0x46cbe4[0x202f+0xe00*0x2+-0x3c2a]['y']=_0x409c93,_0x46cbe4[0x250f+0x3f8*0x3+-0xa*0x4e5]['z']=-_0x272c62,_0x46cbe4[0xb01*0x3+0xb44+0x2c41*-0x1]['x']=-_0x4b70cb,_0x46cbe4[-0x373*0x1+-0x133*0x2+-0x5df*-0x1]['y']=_0x409c93,_0x46cbe4[0x40e*-0x4+-0xb*0x29b+0x2ce7]['z']=-_0x272c62,_0x46cbe4[-0x133*0x1f+0xa*0x309+0x6da]['x']=-_0x4b70cb,_0x46cbe4[-0x64c+0x2*0x64c+-0x645]['y']=-_0x409c93,_0x46cbe4[-0xd94+0x4d2*-0x2+0x1*0x173f]['z']=-_0x272c62,_0x46cbe4;}['setXrPrope'+'rties'](_0x5f0f84){Object['assign'](this['_xrPropert'+'ies'],_0x5f0f84),this['_projMatDi'+'rty']=!(-0x5d6*0x2+0x8d+0xb1f);}}const i_=new te(),r_=new te(),a_=new te(),ur=class ur{static['create'](_0x161e04,_0x3c3927,_0x37f049){const _0x32d0aa=new Tl();switch(_0x32d0aa['node']=new Ie(_0x161e04),_0x32d0aa['aspectRati'+'o']=-0x2a7*-0x6+-0x232b+0x1342,_0x32d0aa['aspectRati'+'oMode']=Nf,_0x32d0aa['_scissorRe'+'ctClear']=!(0x2357+-0x251*-0x3+0x2a4a*-0x1),_0x3c3927){case Ke:_0x32d0aa['node']['setRotatio'+'n'](ur['pointLight'+'Rotations'][_0x37f049]),_0x32d0aa['fov']=0x5*-0x3d4+0x2300+0xf82*-0x1,_0x32d0aa['projection']=ni;break;case Ze:_0x32d0aa['projection']=ni;break;case ve:_0x32d0aa['projection']=gn;break;}return _0x32d0aa;}static['evalSpotCo'+'okieMatrix'](_0xb93f44){let _0x41c9d1=ur['_spotCooki'+'eCamera'];_0x41c9d1||(_0x41c9d1=ur['create']('SpotCookie'+'Camera',Ze),ur['_spotCooki'+'eCamera']=_0x41c9d1),_0x41c9d1['fov']=_0xb93f44['_outerCone'+'Angle']*(-0xe5*-0x1e+0xc40+0x29*-0xf4);const _0x1433d0=_0x41c9d1['_node'];_0x1433d0['setPositio'+'n'](_0xb93f44['_node']['getPositio'+'n']()),_0x1433d0['setRotatio'+'n'](_0xb93f44['_node']['getRotatio'+'n']()),_0x1433d0['rotateLoca'+'l'](-(0x1eda+-0xc75+-0x120b),-0x857*0x1+0x2240+-0x2e1*0x9,-0x351*0x6+-0x1b19+0x2eff),i_['setTRS'](_0x1433d0['getPositio'+'n'](),_0x1433d0['getRotatio'+'n'](),D['ONE'])['invert'](),r_['mul2'](_0x41c9d1['projection'+'Matrix'],i_);const _0x2ecbea=_0xb93f44['cookieMatr'+'ix'],_0x238938=_0xb93f44['atlasViewp'+'ort'];return a_['setViewpor'+'t'](_0x238938['x'],_0x238938['y'],_0x238938['z'],_0x238938['w']),_0x2ecbea['mul2'](a_,r_),_0x2ecbea;}};h(ur,'pointLight'+'Rotations',[new le()['setFromEul'+'erAngles'](0x35*-0x41+-0x2581+-0x1*-0x32f6,-0x1de7+-0x19c0+-0x1b*-0x213,-0xa34*0x2+-0x1*0xf73+-0xbf*-0x31),new le()['setFromEul'+'erAngles'](0x20e9+-0x267f*0x1+0x596,-(0x7*-0x3fb+0x3*-0x98b+0x1*0x38d8),0x864+-0x1f6e+0x17be),new le()['setFromEul'+'erAngles'](-0x53*-0x3a+-0x5ef+0xc85*-0x1,-0x12*0x43+-0xf*0xfb+-0x679*-0x3,0x28*0xc2+0x2*-0xffd+-0x3*-0x8e),new le()['setFromEul'+'erAngles'](-(0x1854+-0xd0e+-0xaec),0x4*-0x899+0x14c5+0xd9f,0x4df*0x5+-0x359*0x3+0xe5*-0x10),new le()['setFromEul'+'erAngles'](0x12e8+0x5a*0x5e+-0x33f4,0x1bd5+-0x19ac+-0x175,0x4fb*-0x7+-0x1d81+0x2*0x2089),new le()['setFromEul'+'erAngles'](-0x18a6*0x1+0x1dcf+-0x529,-0x14bd+0x501*0x5+-0x448,-0x146b+0x1*-0x15eb+-0x7*-0x626)]),h(ur,'_spotCooki'+'eCamera',null);let kn=ur;const vs=new D(),Dr=new Float32Array(-0x1505+0xfa6+0x565),Jw=new D(-(0x10d*0x1+-0xa59*-0x1+0x2*-0x5b3+0.5),0x4*0x6a3+0x359*0xb+-0x3f5f,0x3a6*0x1+0xfd6+0x4df*-0x4),eE=new D(-0x2374+0x18e1+0xa93,-0xe13+0x1*0xc95+-0xbf*-0x2,-0x1b35+-0x8d+0x1bc2+0.5),at={'POSITION_RANGE':0x0,'DIRECTION_FLAGS':0x1,'COLOR_ANGLES_BIAS':0x2,'PROJ_MAT_0':0x3,'ATLAS_VIEWPORT':0x3,'PROJ_MAT_1':0x4,'PROJ_MAT_2':0x5,'PROJ_MAT_3':0x6,'AREA_DATA_WIDTH':0x7,'AREA_DATA_HEIGHT':0x8,'COUNT':0x9},tE={'LIGHTSHAPE_PUNCTUAL':js+'u','LIGHTSHAPE_RECT':my+'u','LIGHTSHAPE_DISK':_y+'u','LIGHTSHAPE_SPHERE':gy+'u','LIGHT_COLOR_DIVIDER':wc+'.0'},n_=(_0x32845e,_0x224b8a)=>Object['keys'](_0x32845e)['map'](_0x1ed07c=>'#define\x20{'+_0x224b8a+_0x1ed07c+'}\x20'+_0x32845e[_0x1ed07c])['join']('\x0a'),o_='\x0a\x0a\x20\x20\x20\x20'+n_(at,'CLUSTER_TE'+'XTURE_')+'\x0a\x20\x20\x20\x20'+n_(tE,'')+'\x0a';class sE{constructor(_0x516d4e){h(this,'areaLights'+'Enabled',!(0x797+0x2241+-0x29d7)),(this['device']=_0x516d4e,Ce['get'](_0x516d4e,Fe)['set']('lightBuffe'+'rDefinesPS',o_),Ce['get'](_0x516d4e,it)['set']('lightBuffe'+'rDefinesPS',o_),this['cookiesEna'+'bled']=!(-0x8fa*-0x2+-0x2*0x1273+0x12f3),this['shadowsEna'+'bled']=!(-0x2*-0x1153+-0x1ab6*-0x1+-0x3d5b),this['areaLights'+'Enabled']=!(0x263a+-0x1149+-0x218*0xa),this['maxLights']=-0x6c1+0x2*-0xf58+-0x6*-0x668);const _0x5fa386=at['COUNT'];this['lightsFloa'+'t']=new Float32Array((0x1*-0x24cb+0xfc6*-0x2+0x445b)*_0x5fa386*this['maxLights']),this['lightsUint']=new Uint32Array(this['lightsFloa'+'t']['buffer']),this['lightsText'+'ure']=this['createText'+'ure'](this['device'],_0x5fa386,this['maxLights'],Xt,'LightsText'+'ure'),this['_lightsTex'+'tureId']=this['device']['scope']['resolve']('lightsText'+'ure'),this['invMaxColo'+'rValue']=-0x18a*-0x15+0x2e3*0x4+-0x2bde,this['invMaxAtte'+'nuation']=0x1285*0x2+0x1b22+0x25*-0x1bc,this['boundsMin']=new D(),this['boundsDelt'+'a']=new D();}['destroy'](){var _0x284872;(_0x284872=this['lightsText'+'ure'])==null||_0x284872['destroy'](),this['lightsText'+'ure']=null;}['createText'+'ure'](_0x28d19b,_0x1b4254,_0xf7dc72,_0x2fd65f,_0x1410ea){return new _e(_0x28d19b,{'name':_0x1410ea,'width':_0x1b4254,'height':_0xf7dc72,'mipmaps':!(-0x17a3*0x1+-0xad0+0x2274),'format':_0x2fd65f,'addressU':ue,'addressV':ue,'type':Ms,'magFilter':Te,'minFilter':Te,'anisotropy':0x1});}['setBounds'](_0x43d0ff,_0x3ab6c4){this['boundsMin']['copy'](_0x43d0ff),this['boundsDelt'+'a']['copy'](_0x3ab6c4);}['uploadText'+'ures'](){this['lightsText'+'ure']['lock']()['set'](this['lightsFloa'+'t']),this['lightsText'+'ure']['unlock']();}['updateUnif'+'orms'](){this['_lightsTex'+'tureId']['setValue'](this['lightsText'+'ure']);}['getSpotDir'+'ection'](_0x1e4749,_0x2a751d){_0x2a751d['_node']['getWorldTr'+'ansform']()['getY'](_0x1e4749)['mulScalar'](-(0x12f6+0x120d+-0x2502)),_0x1e4749['normalize']();}['getLightAr'+'eaSizes'](_0xe981f1){const _0x58799b=_0xe981f1['_node']['getWorldTr'+'ansform']();return _0x58799b['transformV'+'ector'](Jw,vs),Dr[-0xf48+-0x101*-0xc+0x33c]=vs['x'],Dr[0x22fe+0x209*0x2+0xd05*-0x3]=vs['y'],Dr[0x23aa+-0x17e1*0x1+0x2d*-0x43]=vs['z'],_0x58799b['transformV'+'ector'](eE,vs),Dr[-0x79*0x4d+-0x1c*0x10a+0x4180]=vs['x'],Dr[-0x1f1d+-0x156+0x2077]=vs['y'],Dr[-0xb5*-0x35+-0xc66+0x190e*-0x1]=vs['z'],Dr;}['addLightDa'+'ta'](_0x1118de,_0x3a541b){const _0x5b6a0a=_0x1118de['_type']===Ze,_0x2436ad=_0x1118de['atlasViewp'+'ortAllocat'+'ed'],_0x4f2de8=this['cookiesEna'+'bled']&&!!_0x1118de['_cookie']&&_0x2436ad,_0x5e8b21=this['areaLights'+'Enabled']&&_0x1118de['shape']!==js,_0x7402c3=this['shadowsEna'+'bled']&&_0x1118de['castShadow'+'s']&&_0x2436ad,_0x4f728d=_0x1118de['_node']['getPositio'+'n']();let _0x5c75a1=null,_0x3880dc=null;_0x5b6a0a?_0x7402c3?_0x5c75a1=_0x1118de['getRenderD'+'ata'](null,-0x17c0+0x1d3*0xe+0x2*-0xe5)['shadowMatr'+'ix']:_0x4f2de8&&(_0x5c75a1=kn['evalSpotCo'+'okieMatrix'](_0x1118de)):(_0x7402c3||_0x4f2de8)&&(_0x3880dc=_0x1118de['atlasViewp'+'ort']);const _0x5c274b=this['lightsFloa'+'t'],_0x3c6976=this['lightsUint'],_0x37c4ad=_0x3a541b*this['lightsText'+'ure']['width']*(0x23ef*0x1+0x5*-0x21a+-0x1969);_0x5c274b[_0x37c4ad+(-0x6ee+0x781*0x5+-0x1e93)*at['POSITION_R'+'ANGE']+(-0xc4d+0x1073+-0x162*0x3)]=_0x4f728d['x'],_0x5c274b[_0x37c4ad+(-0x7c*0x26+-0x1a08+0xb1d*0x4)*at['POSITION_R'+'ANGE']+(0x18ee*0x1+-0x10f*-0x11+-0x4*0xabb)]=_0x4f728d['y'],_0x5c274b[_0x37c4ad+(0x34c+-0x3*-0xc9f+-0x2925)*at['POSITION_R'+'ANGE']+(0x578+-0x1*0x20f3+0x1b7d)]=_0x4f728d['z'],_0x5c274b[_0x37c4ad+(0x10be*0x2+0x1*0x21b6+-0x432e)*at['POSITION_R'+'ANGE']+(0x2256+0x56*-0x58+-0x4c3)]=_0x1118de['attenuatio'+'nEnd'];const _0x3b664a=_0x1118de['clusteredD'+'ata'];if(_0x3c6976[_0x37c4ad+(-0x1*0x66b+0x1cd8+-0x1669*0x1)*at['COLOR_ANGL'+'ES_BIAS']+(-0xb7f+0x4c5+-0xf6*-0x7)]=_0x3b664a[-0x1*-0xc04+0x171b+0x14d*-0x1b],_0x3c6976[_0x37c4ad+(-0xc*-0x4b+-0x2c4*0x1+-0xbc)*at['COLOR_ANGL'+'ES_BIAS']+(-0x16c7+-0xfa9+-0x1*-0x2671)]=_0x3b664a[-0xa5e+0x5*-0x733+0x2e5e],_0x3c6976[_0x37c4ad+(0x1a6d+-0xbca+-0xe9f)*at['COLOR_ANGL'+'ES_BIAS']+(0x2*0x695+-0xc3f+-0xe9)]=_0x3b664a[-0x3b8+-0x1*0x215f+0x2519],_0x1118de['castShadow'+'s']){const _0x41d15c=_0x1118de['getRenderD'+'ata'](null,-0x30*-0xbf+-0x59e*-0x5+0x3fe6*-0x1),_0x4f4cc1=_0x1118de['_getUnifor'+'mBiasValue'+'s'](_0x41d15c),_0x461c72=Tn['float2Half'](_0x4f4cc1['bias']),_0x5d1be4=Tn['float2Half'](_0x4f4cc1['normalBias']);_0x3c6976[_0x37c4ad+(-0xc59+0x1f04+-0x12a7)*at['COLOR_ANGL'+'ES_BIAS']+(-0x14fa+-0xba8+0x20a5)]=_0x461c72|_0x5d1be4<<0x7*-0x9+-0x13b1*0x1+0x1400;}if(_0x5b6a0a&&(this['getSpotDir'+'ection'](vs,_0x1118de),_0x5c274b[_0x37c4ad+(0x22db+-0x1ea1*0x1+-0x436)*at['DIRECTION_'+'FLAGS']+(0x7*-0x51f+-0x1b*0xd2+0x39ff)]=vs['x'],_0x5c274b[_0x37c4ad+(0x25b*0x6+0x1ee*0x10+-0x2cfe)*at['DIRECTION_'+'FLAGS']+(0x62c+0x1602+0x1*-0x1c2d)]=vs['y'],_0x5c274b[_0x37c4ad+(0x27b*0x1+0x1*-0x3c6+-0x1*-0x14f)*at['DIRECTION_'+'FLAGS']+(-0x1742+-0x1*-0x1589+0x1bb)]=vs['z']),_0x3c6976[_0x37c4ad+(0x2*0x5d5+0x18f9*-0x1+0xd53)*at['DIRECTION_'+'FLAGS']+(-0x2517+0x1a86+0xa94)]=_0x1118de['getCluster'+'edFlags'](_0x7402c3,_0x4f2de8),_0x5c75a1){const _0x536aec=_0x5c75a1['data'];for(let _0x5d59ce=0x1070+-0x2116+0x10a6;_0x5d59ce<-0x1f2+-0x3*-0x354+-0x7fa;_0x5d59ce++)_0x5c274b[_0x37c4ad+(0x1*-0xedd+0x4a+0xe97)*at['PROJ_MAT_0']+_0x5d59ce]=_0x536aec[_0x5d59ce];}if(_0x3880dc&&(_0x5c274b[_0x37c4ad+(-0x9f*0x27+-0x1245+0x2a82)*at['ATLAS_VIEW'+'PORT']+(-0x93e+0xabf+-0x181)]=_0x3880dc['x'],_0x5c274b[_0x37c4ad+(-0x654+-0xc35+0x128d)*at['ATLAS_VIEW'+'PORT']+(0x164b+0x254e+-0x3b98)]=_0x3880dc['y'],_0x5c274b[_0x37c4ad+(0x1763+0x1*0x173b+-0x2e9a)*at['ATLAS_VIEW'+'PORT']+(-0x239f*0x1+-0x821*-0x3+0x59f*0x2)]=_0x3880dc['z']/(-0x1604+0x10*-0x221+0x3817)),_0x5e8b21){const _0x17fca2=this['getLightAr'+'eaSizes'](_0x1118de);_0x5c274b[_0x37c4ad+(0x1191+0xe0b+0x544*-0x6)*at['AREA_DATA_'+'WIDTH']+(-0x16ee+-0x9a2+0x2090)]=_0x17fca2[-0x1bb9+0x5e5*0x5+-0x1c0],_0x5c274b[_0x37c4ad+(0x20*-0x35+-0x1*0xdd3+0x1477)*at['AREA_DATA_'+'WIDTH']+(-0x2694+-0xd9d+-0x11*-0x312)]=_0x17fca2[-0x1ba9+-0xd*0x125+0x2a8b],_0x5c274b[_0x37c4ad+(0x2475+-0x4eb*-0x7+-0x46de*0x1)*at['AREA_DATA_'+'WIDTH']+(0x1c28+0x22*0xa1+-0x14*0x27a)]=_0x17fca2[0x2248+-0xaf*0x7+-0x1d7d],_0x5c274b[_0x37c4ad+(-0x820*0x4+0xf53*-0x1+0x2fd7*0x1)*at['AREA_DATA_'+'HEIGHT']+(-0xad*-0x32+0x19*0x183+-0x4795)]=_0x17fca2[-0xc5+0x1adf+-0x1a17],_0x5c274b[_0x37c4ad+(-0x89d+0x1*-0xfb5+0x1856)*at['AREA_DATA_'+'HEIGHT']+(-0x1075*-0x2+0x2017*-0x1+-0xd2)]=_0x17fca2[0xeb7*0x2+0x1*-0x1fe1+0x277],_0x5c274b[_0x37c4ad+(0x5d3+-0x15de+0x1*0x100f)*at['AREA_DATA_'+'HEIGHT']+(0x1f83*0x1+0x3*0x878+-0x38e9*0x1)]=_0x17fca2[-0x477+-0xfe3+0x145f];}}}const Hl=new D(),Wl=new D(),$l=new D(),Cd=new De(),l_=0x20eb*-0x1+0x111e+0x7*0x48b;class c_{constructor(){this['light']=null,this['min']=new D(),this['max']=new D();}}class kf{constructor(_0x332e3a){h(this,'clusterTex'+'ture'),(this['device']=_0x332e3a,this['name']='Untitled',this['reportCoun'+'t']=0x1d86+-0x1*0xc5+0x1*-0x1cc1,this['boundsMin']=new D(),this['boundsMax']=new D(),this['boundsDelt'+'a']=new D(),this['_cells']=new D(-0x189c+0xeaf+-0x9ee*-0x1,-0x191e+-0x541+0x1e60,0x7*0x463+0xd28+-0x2bdc),this['_cellsLimi'+'t']=new D(),this['cells']=this['_cells'],this['maxCellLig'+'htCount']=-0x82f+0x1cf9*0x1+-0x14c6,this['_usedLight'+'s']=[],this['_usedLight'+'s']['push'](new c_()),this['lightsBuff'+'er']=new sE(_0x332e3a),this['registerUn'+'iforms'](_0x332e3a));}set['maxCellLig'+'htCount'](_0x31d594){_0x31d594!==this['_maxCellLi'+'ghtCount']&&(this['_maxCellLi'+'ghtCount']=_0x31d594,this['_cellsDirt'+'y']=!(-0x22c6+-0x576*-0x4+0xcee));}get['maxCellLig'+'htCount'](){return this['_maxCellLi'+'ghtCount'];}set['cells'](_0x5a7f2a){Hl['copy'](_0x5a7f2a)['floor'](),this['_cells']['equals'](Hl)||(this['_cells']['copy'](Hl),this['_cellsLimi'+'t']['copy'](Hl)['sub'](D['ONE']),this['_cellsDirt'+'y']=!(-0x31*0x97+0x30+0x1cb7));}get['cells'](){return this['_cells'];}['destroy'](){this['lightsBuff'+'er']['destroy'](),this['releaseClu'+'sterTextur'+'e']();}['releaseClu'+'sterTextur'+'e'](){this['clusterTex'+'ture']&&(this['clusterTex'+'ture']['destroy'](),this['clusterTex'+'ture']=null);}['registerUn'+'iforms'](_0x16100f){this['_clusterSk'+'ipId']=_0x16100f['scope']['resolve']('clusterSki'+'p'),this['_clusterMa'+'xCellsId']=_0x16100f['scope']['resolve']('clusterMax'+'Cells'),this['_clusterWo'+'rldTexture'+'Id']=_0x16100f['scope']['resolve']('clusterWor'+'ldTexture'),this['_clusterTe'+'xtureSizeI'+'d']=_0x16100f['scope']['resolve']('clusterTex'+'tureSize'),this['_clusterTe'+'xtureSizeD'+'ata']=new Float32Array(0x1*0x1697+0x1de3+-0x21*0x197),this['_clusterBo'+'undsMinId']=_0x16100f['scope']['resolve']('clusterBou'+'ndsMin'),this['_clusterBo'+'undsMinDat'+'a']=new Float32Array(0x1d3*-0xe+-0x2093+0x3a20),this['_clusterBo'+'undsDeltaI'+'d']=_0x16100f['scope']['resolve']('clusterBou'+'ndsDelta'),this['_clusterBo'+'undsDeltaD'+'ata']=new Float32Array(0x11c1+0x6f3*0x5+-0x347d),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']=_0x16100f['scope']['resolve']('clusterCel'+'lsCountByB'+'oundsSize'),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']=new Float32Array(0x53f+0x18b5+-0x1df1),this['_clusterCe'+'llsDotId']=_0x16100f['scope']['resolve']('clusterCel'+'lsDot'),this['_clusterCe'+'llsDotData']=new Float32Array(-0xe7f+-0x89b*0x2+0x1fb8*0x1),this['_clusterCe'+'llsMaxId']=_0x16100f['scope']['resolve']('clusterCel'+'lsMax'),this['_clusterCe'+'llsMaxData']=new Float32Array(-0x5*0x47f+0x10cc+0xa2*0x9);}['updatePara'+'ms'](_0x2429ec){_0x2429ec&&(this['cells']=_0x2429ec['cells'],this['maxCellLig'+'htCount']=_0x2429ec['maxLightsP'+'erCell'],this['lightsBuff'+'er']['cookiesEna'+'bled']=_0x2429ec['cookiesEna'+'bled'],this['lightsBuff'+'er']['shadowsEna'+'bled']=_0x2429ec['shadowsEna'+'bled'],this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x2429ec['areaLights'+'Enabled']);}['updateCell'+'s'](){if(this['_cellsDirt'+'y']){this['_cellsDirt'+'y']=!(-0x194c*-0x1+0x8a*-0x35+0x347);const _0x10b8f4=this['_cells']['x'],_0x7804d8=this['_cells']['y'],_0x331184=this['_cells']['z'],_0x7513a6=_0x10b8f4*_0x7804d8*_0x331184,_0x37a50f=this['maxCellLig'+'htCount']*_0x7513a6;let _0xc4da71=Math['ceil'](Math['sqrt'](_0x37a50f));_0xc4da71=Y['roundUp'](_0xc4da71,this['maxCellLig'+'htCount']);const _0x74941f=Math['ceil'](_0x37a50f/_0xc4da71);w['assert'](_0xc4da71<=l_&&_0x74941f<=l_,'Clustered\x20'+'lights\x20par'+'ameters\x20ca'+'use\x20the\x20te'+'xture\x20size'+'\x20to\x20be\x20ove'+'r\x20the\x20limi'+'t,\x20please\x20'+'adjust\x20the'+'m.'),this['_clusterCe'+'llsMaxData'][0x125*0xd+0x2f*-0x3f+-0x350]=_0x10b8f4,this['_clusterCe'+'llsMaxData'][0x629+-0x12fd*0x1+0xcd5]=_0x7804d8,this['_clusterCe'+'llsMaxData'][-0xa14+0xdee*-0x2+0x25f2]=_0x331184,this['_clusterCe'+'llsDotData'][0x1*-0x16f+-0x39*-0x2f+-0x908]=this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][-0x1*0x14d5+0x1cdd+-0x807*0x1]=_0x10b8f4*_0x331184*this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][-0x132b+-0x41*-0x67+0x26*-0x2f]=_0x10b8f4*this['maxCellLig'+'htCount'],this['clusters']=new Uint8ClampedArray(_0x37a50f),this['counts']=new Int32Array(_0x7513a6),this['_clusterTe'+'xtureSizeD'+'ata'][0x9*0xf2+0x2065*0x1+-0x11b*0x25]=_0xc4da71,this['_clusterTe'+'xtureSizeD'+'ata'][0x5*0x4a9+-0x17b0+0x64]=(-0x5*-0x673+0x1*-0x1987+-0x6b7)/_0xc4da71,this['_clusterTe'+'xtureSizeD'+'ata'][-0x1534+0x12e*-0x1b+0x3510]=(-0x3b*0x1b+-0x155c+-0x6b*-0x42)/_0x74941f,this['releaseClu'+'sterTextur'+'e'](),this['clusterTex'+'ture']=this['lightsBuff'+'er']['createText'+'ure'](this['device'],_0xc4da71,_0x74941f,Zu,'ClusterTex'+'ture');}}['uploadText'+'ures'](){this['clusterTex'+'ture']['lock']()['set'](this['clusters']),this['clusterTex'+'ture']['unlock'](),this['lightsBuff'+'er']['uploadText'+'ures']();}['updateUnif'+'orms'](){this['_clusterSk'+'ipId']['setValue'](this['_usedLight'+'s']['length']>0x223f+0x1*-0x189d+-0x9a1*0x1?-0x2*0x1143+0x3b+0x224b:-0x9*-0x301+-0x2*0x7e3+-0xb42),this['lightsBuff'+'er']['updateUnif'+'orms'](),this['_clusterWo'+'rldTexture'+'Id']['setValue'](this['clusterTex'+'ture']),this['_clusterMa'+'xCellsId']['setValue'](this['maxCellLig'+'htCount']);const _0x22d2db=this['boundsDelt'+'a'];this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x682*0x1+0x5*0x72d+-0x1d5f]=this['_cells']['x']/_0x22d2db['x'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x386*-0x3+0x1c38+-0x26c9]=this['_cells']['y']/_0x22d2db['y'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x1093+0x1070+-0x2101]=this['_cells']['z']/_0x22d2db['z'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']['setValue'](this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']),this['_clusterBo'+'undsMinDat'+'a'][0x1a88+-0xc9*0xd+-0x1053*0x1]=this['boundsMin']['x'],this['_clusterBo'+'undsMinDat'+'a'][-0x84b*-0x3+-0x158+-0x1788]=this['boundsMin']['y'],this['_clusterBo'+'undsMinDat'+'a'][-0x469*0x1+-0x2261+0x26cc]=this['boundsMin']['z'],this['_clusterBo'+'undsDeltaD'+'ata'][0x2339+0x6b5+-0x29ee]=_0x22d2db['x'],this['_clusterBo'+'undsDeltaD'+'ata'][0x1*-0xf47+0xb25*0x1+-0x1*-0x423]=_0x22d2db['y'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x1431+0x567+0xecc]=_0x22d2db['z'],this['_clusterTe'+'xtureSizeI'+'d']['setValue'](this['_clusterTe'+'xtureSizeD'+'ata']),this['_clusterBo'+'undsMinId']['setValue'](this['_clusterBo'+'undsMinDat'+'a']),this['_clusterBo'+'undsDeltaI'+'d']['setValue'](this['_clusterBo'+'undsDeltaD'+'ata']),this['_clusterCe'+'llsDotId']['setValue'](this['_clusterCe'+'llsDotData']),this['_clusterCe'+'llsMaxId']['setValue'](this['_clusterCe'+'llsMaxData']);}['evalLightC'+'ellMinMax'](_0x2aa173,_0x94f054,_0x817f1f){_0x94f054['copy'](_0x2aa173['min']),_0x94f054['sub'](this['boundsMin']),_0x94f054['div'](this['boundsDelt'+'a']),_0x94f054['mul2'](_0x94f054,this['cells']),_0x94f054['floor'](),_0x817f1f['copy'](_0x2aa173['max']),_0x817f1f['sub'](this['boundsMin']),_0x817f1f['div'](this['boundsDelt'+'a']),_0x817f1f['mul2'](_0x817f1f,this['cells']),_0x817f1f['ceil'](),_0x94f054['max'](D['ZERO']),_0x817f1f['min'](this['_cellsLimi'+'t']);}['collectLig'+'hts'](_0x3b3721){const _0x46eccc=this['lightsBuff'+'er']['maxLights'],_0x488922=this['_usedLight'+'s'];let _0x1b7d95=-0x1b7b+-0x1*-0x2072+0x5*-0xfe;_0x3b3721['forEach'](_0x5b0186=>{const _0x304c52=!!(_0x5b0186['mask']&(Ss|di)),_0x20e306=_0x5b0186['type']===Ze&&_0x5b0186['_outerCone'+'Angle']===-0x15*0x83+-0x26*0xc8+0x286f;if(_0x5b0186['enabled']&&_0x5b0186['type']!==ve&&_0x5b0186['visibleThi'+'sFrame']&&_0x5b0186['intensity']>0x11c7*-0x1+-0x1*-0x116c+0x7*0xd&&_0x304c52&&!_0x20e306){if(_0x1b7d95<_0x46eccc){let _0x1e4f1a;_0x1b7d95<_0x488922['length']?_0x1e4f1a=_0x488922[_0x1b7d95]:(_0x1e4f1a=new c_(),_0x488922['push'](_0x1e4f1a)),_0x1e4f1a['light']=_0x5b0186,_0x5b0186['getBoundin'+'gBox'](Cd),_0x1e4f1a['min']['copy'](Cd['getMin']()),_0x1e4f1a['max']['copy'](Cd['getMax']()),_0x1b7d95++;}else w['warnOnce']('Clustered\x20'+'lighting:\x20'+'more\x20than\x20'+(_0x46eccc-(-0x248f*-0x1+0x683+0xf*-0x2df))+('\x20lights\x20in'+'\x20the\x20frame'+',\x20ignoring'+'\x20some.'));}}),_0x488922['length']=_0x1b7d95;}['evaluateBo'+'unds'](){const _0x2d592a=this['_usedLight'+'s'],_0x556805=this['boundsMin'],_0x28edbb=this['boundsMax'];if(_0x2d592a['length']>0x577+0x2e1+-0x3d*0x23){_0x556805['copy'](_0x2d592a[-0x131*0x3+0x1*0x282+0x89*0x2]['min']),_0x28edbb['copy'](_0x2d592a[-0x364+-0x1063+-0xc*-0x1a6]['max']);for(let _0x35cb98=-0x23d3*-0x1+0x2134+-0x4505;_0x35cb98<_0x2d592a['length'];_0x35cb98++)_0x556805['min'](_0x2d592a[_0x35cb98]['min']),_0x28edbb['max'](_0x2d592a[_0x35cb98]['max']);}else _0x556805['set'](0x1*0x26b3+0x1*-0x13f7+0x95e*-0x2,-0x34*0x34+0x13*-0x201+0x30a3,-0x1*-0x1648+-0xd6b+-0x8dd*0x1),_0x28edbb['set'](-0x22c0+-0x142d+0x36ee,0x71f*0x2+0x136b+-0x1*0x21a8,-0x852*0x2+-0x1be1+0x2c86);this['boundsDelt'+'a']['sub2'](_0x28edbb,_0x556805),this['lightsBuff'+'er']['setBounds'](_0x556805,this['boundsDelt'+'a']);}['updateClus'+'ters'](_0x427618){this['counts']['fill'](-0x1*0x10e6+-0x9d8+0x8ea*0x3),this['clusters']['fill'](-0x977+-0xf42*-0x1+-0x5cb),this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x427618?_0x427618['areaLights'+'Enabled']:!(0x20*-0x11a+0xa*0x341+0x2b7);const _0x1e66d8=this['_cells']['x'],_0x114b0c=this['_cells']['z'],_0x17bba2=this['counts'],_0x41b010=this['_maxCellLi'+'ghtCount'],_0x55e3f9=this['clusters'],_0x23073b=this['maxCellLig'+'htCount'];let _0x32c940=!(0x95*0x25+0x80*0x9+-0x44*0x62);const _0x3174d0=this['_usedLight'+'s'];for(let _0x5bd72=-0x5*-0x3ed+0xe53*0x1+-0x3*0xb51;_0x5bd72<_0x3174d0['length'];_0x5bd72++){const _0x63fefc=_0x3174d0[_0x5bd72],_0x3fed78=_0x63fefc['light'];this['lightsBuff'+'er']['addLightDa'+'ta'](_0x3fed78,_0x5bd72),this['evalLightC'+'ellMinMax'](_0x63fefc,Wl,$l);const _0x447a7d=Wl['x'],_0x54135e=$l['x'],_0xcd0f91=Wl['y'],_0x3b8b66=$l['y'],_0x5dd3ea=Wl['z'],_0x56b5f7=$l['z'];for(let _0x3b7a29=_0x447a7d;_0x3b7a29<=_0x54135e;_0x3b7a29++)for(let _0x36e60f=_0x5dd3ea;_0x36e60f<=_0x56b5f7;_0x36e60f++)for(let _0xbed6c2=_0xcd0f91;_0xbed6c2<=_0x3b8b66;_0xbed6c2++){const _0x581af1=_0x3b7a29+_0x1e66d8*(_0x36e60f+_0xbed6c2*_0x114b0c),_0x3d5744=_0x17bba2[_0x581af1];_0x3d5744<_0x41b010?(_0x55e3f9[_0x23073b*_0x581af1+_0x3d5744]=_0x5bd72,_0x17bba2[_0x581af1]=_0x3d5744+(-0x25a9+0x1*0x2443+0x167)):_0x32c940=!(0x5e0+0x2115+0x1*-0x26f5);}}_0x32c940&&this['reportCoun'+'t']<-0x7c4+-0xfab+-0x26*-0x9e&&(console['warn']('Too\x20many\x20l'+'ights\x20in\x20l'+'ight\x20clust'+'er\x20'+this['name']+(',\x20please\x20a'+'djust\x20para'+'meters.')+(this['reportCoun'+'t']===0xb*0x259+0xc95+-0x2664?'\x20Giving\x20up'+'\x20on\x20report'+'ing\x20it.':'')),this['reportCoun'+'t']++);}['update'](_0x5c4d25,_0x531754=null){this['updatePara'+'ms'](_0x531754),this['updateCell'+'s'](),this['collectLig'+'hts'](_0x5c4d25),this['evaluateBo'+'unds'](),this['updateClus'+'ters'](_0x531754),this['uploadText'+'ures']();}['activate'](){this['updateUnif'+'orms']();}}const h_=0x239*0xb+0xbd7*-0x3+0xb14*0x1+0.39996322972865306,wl={'circlePoint'(_0x484332){const _0x36df0c=Math['sqrt'](Math['random']()),_0x18870e=Math['random']()*(-0xb*0x17+0xd54+0x1c3*-0x7)*Math['PI'];_0x484332['x']=_0x36df0c*Math['cos'](_0x18870e),_0x484332['y']=_0x36df0c*Math['sin'](_0x18870e);},'circlePointDeterministic'(_0x257a61,_0x4d74ec,_0x5d9c21){const _0x29faeb=_0x4d74ec*h_,_0x22c591=Math['sqrt'](_0x4d74ec)/Math['sqrt'](_0x5d9c21);_0x257a61['x']=_0x22c591*Math['cos'](_0x29faeb),_0x257a61['y']=_0x22c591*Math['sin'](_0x29faeb);},'spherePointDeterministic'(_0x359cb7,_0x771a39,_0x4156b5,_0x27424b=0x3a3+-0x1f9+-0x1aa,_0x3ba9c7=0x1b7c+0x2377+0x1f79*-0x2){_0x27424b=0x114c+0xd9c+0x36f*-0x9-(-0x18a6+-0x2085+-0x11*-0x35d)*_0x27424b,_0x3ba9c7=0xe55+-0xd*0x143+-0x3*-0xb1-(0x10eb+0x2667+-0x14*0x2c4)*_0x3ba9c7;const _0x4cc8fe=Y['lerp'](_0x27424b,_0x3ba9c7,_0x771a39/_0x4156b5),_0x3d1bb6=Math['sqrt'](-0x169d+0x2*-0x74+0xbc3*0x2-_0x4cc8fe*_0x4cc8fe),_0x4860f0=h_*_0x771a39;_0x359cb7['x']=Math['cos'](_0x4860f0)*_0x3d1bb6,_0x359cb7['y']=_0x4cc8fe,_0x359cb7['z']=Math['sin'](_0x4860f0)*_0x3d1bb6;},'radicalInverse'(_0x1d9345){let _0x4e2a17=(_0x1d9345<<-0x3d1*-0x6+-0x143b*-0x1+-0x2b11|_0x1d9345>>>0x171+0x2094+-0x21f5)>>>-0x1d5d*0x1+-0xe6c+0x1*0x2bc9;return _0x4e2a17=((_0x4e2a17&0x1*-0x7c453805+-0x12d88e7*0x5f+0x141805b13)<<0x1101+0x1*-0x2ff+0x1*-0xe01|(_0x4e2a17&-0xee62dfbf+-0x1*0x251c4a40+0x4e6479*0x5b1)>>>0x1012+-0x13*0x18d+0xd66)>>>0x1d77+-0x1*0xc73+-0x1104,_0x4e2a17=((_0x4e2a17&0x24098bb8+0x4*-0x8a5dcdb+0x31c11ae7)<<-0x1b48+0x1b*-0x107+0x3707|(_0x4e2a17&-0x11f973d86+-0x4244*-0x704c+0x1cf529e22)>>>0x1*-0x8a2+-0xc0a+-0x2*-0xa57)>>>-0x9d5+0x1b9a*-0x1+0x256f,_0x4e2a17=((_0x4e2a17&-0x48b51*0x20+0xfd38dad+-0x33147e)<<-0xa*-0x8e+0xc*0x337+0x2c1c*-0x1|(_0x4e2a17&0xf4783*-0x9a3+-0x13fcff207+0x2c3ff066*0x10)>>>0x1*0x2495+-0x1f0*0xd+-0xb61)>>>0x5ae+-0x9fc+0x44e,_0x4e2a17=((_0x4e2a17&0x1cd40c+-0x1333d*-0x77+0x535b98)<<-0xcab+0x1*-0x25b7+-0x1*-0x326a|(_0x4e2a17&0x5753f67d+0x4*0x534687c2+0x2f83*-0x37b57)>>>0x77*-0x31+-0x17ce*-0x1+0x55*-0x3)>>>-0x985*0x2+-0x242b+0x3735,_0x4e2a17*(0x7d*0x49+0x4*-0x28e+-0x196d+2.3283064365386963e-10);}},iE={'linear':'decodeLine'+'ar','srgb':'decodeGamm'+'a','rgbm':'decodeRGBM','rgbe':'decodeRGBE','rgbp':'decodeRGBP','xy':'unpackNorm'+'alXY','xyz':'unpackNorm'+'alXYZ'},rE={'linear':'encodeLine'+'ar','srgb':'encodeGamm'+'a','rgbm':'encodeRGBM','rgbe':'encodeRGBE','rgbp':'encodeRGBP'};class Sr{static['decodeFunc'](_0x545a05){return iE[_0x545a05]??'decodeGamm'+'a';}static['encodeFunc'](_0x2ed121){return rE[_0x2ed121]??'encodeGamm'+'a';}}const d_=_0x4c7961=>{switch(_0x4c7961){case Mf:return'Cubemap';case nx:return'Octahedral';default:return'Equirect';}},Xl=(_0x3bcac9,_0x55d72d,_0x5eb535)=>{if(_0x3bcac9<=-0x1a1e*-0x1+0x112b+-0x2b49)_0x55d72d[_0x5eb535+(-0x669+-0x176f+0x1dd8)]=-0x187*-0xc+0x113b+-0x238f*0x1,_0x55d72d[_0x5eb535+(-0x25c4+0x1122+0x14a3)]=0x1d5f+-0x56b+-0x17f4,_0x55d72d[_0x5eb535+(0x79a+-0x6*-0x66+-0x9fc*0x1)]=-0x22e6+0x46a*0x8+-0x6a,_0x55d72d[_0x5eb535+(-0xe4f+-0x648+0x149a)]=0x1*-0x635+0xbd*0x31+0x4*-0x77e;else{if(_0x3bcac9>=0x2*0x7eb+0x1952+-0x2927)_0x55d72d[_0x5eb535+(-0x1b17+0x2565*-0x1+0x407c)]=-0x7*-0x1ec+0xeaa+0x83*-0x35,_0x55d72d[_0x5eb535+(0x1032+0x2*-0x11e5+0x1399*0x1)]=0x219+-0x1*-0x8e6+-0x5*0x233,_0x55d72d[_0x5eb535+(0x1c1e+0x1*-0x1726+-0x4f6)]=0x2382+-0x16bf*0x1+-0xcc3,_0x55d72d[_0x5eb535+(0x19b2+0x2040+-0x39ef*0x1)]=-0x2027+-0x2*0x10b4+-0x418f*-0x1;else{let _0x13790a=(-0x2071+-0x44*0x86+0x1*0x440a)*_0x3bcac9%(-0x2*-0x12b+-0x1ae6+0x1*0x1891),_0xecf6d5=(-0x1e99+-0x5bb+0x27d*0xf)*_0x3bcac9%(-0x2003+-0x15db*0x1+0x35df*0x1),_0x149edc=(-0xc1da+0xb7c9+0x10812)*_0x3bcac9%(0x168f+-0xe8*0x25+0xafa);const _0x56cd63=(0xdbab3d*-0x2+-0x1*-0x9b2983+0x2192ff6)*_0x3bcac9%(-0x491*-0x7+0x11e1+-0x31d7);_0x13790a-=_0xecf6d5/(-0x623*0x1+-0x22d*0xb+0x1f11),_0xecf6d5-=_0x149edc/(0x1*-0x11fb+0x89*-0x1b+0xc7*0x2b),_0x149edc-=_0x56cd63/(-0x1*0x470+-0x14b*0xf+0x18d4),_0x55d72d[_0x5eb535+(-0x435+0xe13+-0x9de)]=Math['min'](-0x1ba4+-0xe3e*-0x2+-0x3*-0xd,Math['floor'](_0x13790a*(-0x43*-0x7c+0x2e*-0x20+-0x19b4))),_0x55d72d[_0x5eb535+(-0x115*-0x20+-0xb02+-0x179d)]=Math['min'](-0x1*-0x179b+0x11*0x14b+-0x2c97*0x1,Math['floor'](_0xecf6d5*(-0x9*-0x272+-0xcb*0xb+-0xc49))),_0x55d72d[_0x5eb535+(-0xf2*-0x19+0x1769+-0x1*0x2f09)]=Math['min'](0x901*0x3+0xbe1+-0x6d*0x59,Math['floor'](_0x149edc*(0x21db+-0x8*0x42d+0x8d))),_0x55d72d[_0x5eb535+(-0x6c+0x2213+0x2*-0x10d2)]=Math['min'](-0x1*-0x23c2+-0x1b76+0x3*-0x26f,Math['floor'](_0x56cd63*(0x262a+-0x35*0x28+-0x2*0xe71)));}}},aE=_0x598af6=>{const _0x7bf41a=_0x598af6['length'],_0x5124b8=Math['min'](_0x7bf41a,-0x3*-0x205+-0xfbf+0xbb0),_0x3b58c8=Math['ceil'](_0x7bf41a/_0x5124b8),_0x150e9f=new Uint8Array(_0x5124b8*_0x3b58c8*(0x1d78+-0x17f+-0x1bf5*0x1));let _0x580e84=-0x159e+-0x5*-0x18e+0xdd8;for(let _0x281ae5=0x15e0+-0x2e*-0x1a+0x6a3*-0x4;_0x281ae5<_0x7bf41a;_0x281ae5+=-0x1*-0x1aa7+0x619+0x68c*-0x5)Xl(_0x598af6[_0x281ae5+(0x1b4c+0xb*0x185+0x1*-0x2c03)]*(-0x29*-0x47+-0x261c+-0x5*-0x559+0.5)+(0x31*-0x75+-0xbac+-0x11*-0x201+0.5),_0x150e9f,_0x580e84+(-0x6*-0x525+0x179b*-0x1+-0xd*0x8f)),Xl(_0x598af6[_0x281ae5+(-0xe8d+-0x1321+-0x21af*-0x1)]*(0xa6e+0x1fcf*-0x1+0x1561+0.5)+(-0x2e*0x4+-0x1dd2+-0x6*-0x517+0.5),_0x150e9f,_0x580e84+(0x125*0x5+0x13b4+-0x1969)),Xl(_0x598af6[_0x281ae5+(-0x3*-0x65+-0x13c3+0x319*0x6)]*(0x5e4+0x31*0x75+-0x1c49+0.5)+(0x4*-0x6c+0xf70+-0xdc0+0.5),_0x150e9f,_0x580e84+(0x1*-0x935+0x1782+-0xe45)),Xl(_0x598af6[_0x281ae5+(0x3*-0x15+-0x1*0xdf9+0xe3b)]/(-0x4b3+-0x7*0x373+-0x8*-0x39c),_0x150e9f,_0x580e84+(0x2248+0x64e*0x2+-0x2ed8)),_0x580e84+=-0x1*0x2e1+-0x35e*0x9+-0xb15*-0x3;return{'width':_0x5124b8,'height':_0x3b58c8,'data':_0x150e9f};},nE=(_0x33c5f6,_0x1d90c4,_0x53c6e1,_0x335391)=>{const _0x33d00a=_0x53c6e1*(0x4c9*0x5+0x16b+0x1956*-0x1)*Math['PI'],_0x572c0c=Math['pow'](-0x1ede+-0x1*-0x23ef+-0x510-_0x1d90c4,(-0x6b*-0x20+-0x1551+-0x7f2*-0x1)/(_0x335391+(-0x2cb+-0xafd*0x3+0x23c3))),_0x374276=Math['sqrt'](0x6c5*-0x1+-0x573*0x2+-0x3a*-0x4e-_0x572c0c*_0x572c0c);_0x33c5f6['set'](Math['cos'](_0x33d00a)*_0x374276,Math['sin'](_0x33d00a)*_0x374276,_0x572c0c)['normalize']();},oE=(_0x2bf4ea,_0x46e63a,_0x112703)=>{const _0x3d7269=_0x112703*(0x1cf9+0x7*0xe9+-0x11ab*0x2)*Math['PI'],_0x5c3dfc=Math['sqrt'](0x967*-0x3+0x1fcc+-0x396-_0x46e63a),_0x25fdad=Math['sqrt'](_0x46e63a);_0x2bf4ea['set'](Math['cos'](_0x3d7269)*_0x25fdad,Math['sin'](_0x3d7269)*_0x25fdad,_0x5c3dfc)['normalize']();},lE=(_0x398430,_0xfc8934,_0x52aa29,_0x5c97bc)=>{const _0x5e856d=_0x52aa29*(-0x1186*-0x1+-0x2396+0x1212)*Math['PI'],_0x480eca=Math['sqrt']((0x251b+-0x7*0x32b+-0xeed-_0xfc8934)/(0x1d64+-0x194c+-0x417+(_0x5c97bc*_0x5c97bc-(0x83+-0x179f+0x171d*0x1))*_0xfc8934)),_0x101470=Math['sqrt'](0xb6a*0x3+0x2275*0x1+-0x44b2-_0x480eca*_0x480eca);_0x398430['set'](Math['cos'](_0x5e856d)*_0x101470,Math['sin'](_0x5e856d)*_0x101470,_0x480eca)['normalize']();},cE=(_0x2d358c,_0x2e508b)=>{const _0x22720b=_0x2d358c*_0x2e508b,_0x55def9=_0x2e508b/(-0x1*-0xcb6+0x1*0x1e31+0x286*-0x11-_0x2d358c*_0x2d358c+_0x22720b*_0x22720b);return _0x55def9*_0x55def9*((0x1*0xd8d+0xf16+0xe51*-0x2)/Math['PI']);},hE=(_0x4600f9,_0x267083)=>{const _0x459f14=new D(),_0x2b9f98=[];for(let _0x1dcb9d=0x3bc*-0x1+0x11e7*0x1+0xe2b*-0x1;_0x1dcb9d<_0x4600f9;++_0x1dcb9d)nE(_0x459f14,_0x1dcb9d/_0x4600f9,wl['radicalInv'+'erse'](_0x1dcb9d),_0x267083),_0x2b9f98['push'](_0x459f14['x'],_0x459f14['y'],_0x459f14['z'],0xf0e+0x243c+-0xa*0x521);return _0x2b9f98;},dE=(_0x4e38fc,_0x4658d6)=>{const _0x4214ed=_0x4658d6/_0x4e38fc,_0x11efb1=new D(),_0x91216c=[];for(let _0x3b5b1d=-0x15c3+-0x1*-0x9fa+-0x1af*-0x7;_0x3b5b1d<_0x4e38fc;++_0x3b5b1d){oE(_0x11efb1,_0x3b5b1d/_0x4e38fc,wl['radicalInv'+'erse'](_0x3b5b1d));const _0x3478cd=_0x11efb1['z']/Math['PI'],_0xb13791=(0xfdc+0x1aad+-0x2a89+0.5)*Math['log2'](_0x4214ed/_0x3478cd);_0x91216c['push'](_0x11efb1['x'],_0x11efb1['y'],_0x11efb1['z'],_0xb13791);}return _0x91216c;},fE={0x10:{0x2:0x1a,0x8:0x14,0x20:0x11,0x80:0x10,0x200:0x10},0x20:{0x2:0x35,0x8:0x28,0x20:0x22,0x80:0x20,0x200:0x20},0x80:{0x2:0xd6,0x8:0xa3,0x20:0x8b,0x80:0x82,0x200:0x80},0x400:{0x2:0x6ba,0x8:0x51e,0x20:0x45a,0x80:0x411,0x200:0x401}},uE=(_0x3a993a,_0x95345f)=>{const _0x48868f=fE[_0x3a993a];return _0x48868f&&_0x48868f[_0x95345f]||_0x3a993a;},pE=(_0x35c3cd,_0x33e929,_0x194f2b)=>{const _0x3fdc6e=_0x194f2b/_0x35c3cd,_0x10e1b4=-0xe3f*0x1+-0x1986+-0xd42*-0x3-Math['log2'](_0x33e929)/(-0x15da+-0x25d*0x1+-0x816*-0x3),_0x1bff0f=_0x10e1b4*_0x10e1b4,_0x45c3a6=new D(),_0x5af5c3=new D(),_0x477e01=new D(-0x1*0xc2f+0x157+0xad8,0x89f*-0x2+0x543*0x3+0x175,0xab*0x17+-0x1ad5+0x59*0x21),_0x466994=[],_0x5ae115=uE(_0x35c3cd,_0x33e929);for(let _0xb33b75=-0x131*0x3+-0x413*-0x8+0x1b5*-0x11;_0xb33b75<_0x5ae115;++_0xb33b75){lE(_0x45c3a6,_0xb33b75/_0x5ae115,wl['radicalInv'+'erse'](_0xb33b75),_0x1bff0f);const _0x220f2e=_0x45c3a6['z'];if(_0x5af5c3['set'](_0x45c3a6['x'],_0x45c3a6['y'],_0x45c3a6['z'])['mulScalar']((-0x2446+-0x13*-0x1f5+-0xe7)*_0x220f2e)['sub'](_0x477e01),_0x5af5c3['z']>-0x1*0x14e9+-0x226a+-0x1271*-0x3){const _0x48a37d=cE(Math['min'](0x1fc9+0x10d3+0x21d*-0x17,_0x220f2e),_0x1bff0f)/(-0xcf8+-0x1b01+0x27fd)+(-0xd*-0x10f+-0x2516+0x1753+0.001),_0xfe451d=(0x1213+0x1*-0x9f+0x45d*-0x4+0.5)*Math['log2'](_0x3fdc6e/_0x48a37d);_0x466994['push'](_0x5af5c3['x'],_0x5af5c3['y'],_0x5af5c3['z'],_0xfe451d);}}for(;_0x466994['length']<_0x35c3cd*(-0x1*0x6ce+0x2*0x8e4+-0x17*0x7a);)_0x466994['push'](0x1*0xf53+-0x198*0x6+-0x5c3,0x2112+0xe8b+-0x1*0x2f9d,-0xb*-0x17f+-0x1f95+-0x2*-0x790,0x1e81+-0xe3d*-0x2+-0x3afb);return _0x466994;},mE=(_0x3907b6,_0x56dcf6,_0x9926b0)=>{const _0x1897c8=aE(_0x9926b0);return new _e(_0x3907b6,{'name':_0x56dcf6,'width':_0x1897c8['width'],'height':_0x1897c8['height'],'mipmaps':!(0xf6f+0x1eb7+-0x2e25),'minFilter':Te,'magFilter':Te,'levels':[_0x1897c8['data']]});};class By{constructor(_0x4a1222=!(0x1*-0x25bd+-0x2*-0x12b6+-0x9*-0x9)){h(this,'map',new Map()),this['destroyCon'+'tent']=_0x4a1222;}['destroy'](){this['destroyCon'+'tent']&&this['map']['forEach']((_0x1abcd7,_0x243d03)=>{_0x1abcd7['destroy']();});}['get'](_0x13d3b1,_0xa0b486){if(!this['map']['has'](_0x13d3b1)){const _0x279e0b=_0xa0b486();return this['map']['set'](_0x13d3b1,_0x279e0b),_0x279e0b;}return this['map']['get'](_0x13d3b1);}}const _E=new By(!(0x10*0x223+-0xf1a+0x5*-0x3d1)),gE=new Kt(),Up=(_0x2aae85,_0x5d9696,_0x2dc3ac)=>gE['get'](_0x2aae85,()=>new By())['get'](_0x5d9696,()=>mE(_0x2aae85,_0x5d9696,_E['get'](_0x5d9696,_0x2dc3ac))),SE=(_0x35087d,_0x37c06b,_0x20874b)=>{const _0x1a034b='lambert-sa'+'mples-'+_0x37c06b+'-'+_0x20874b;return Up(_0x35087d,_0x1a034b,()=>dE(_0x37c06b,_0x20874b));},yE=(_0x3d1ff2,_0x46dae7,_0x38280d)=>{const _0x204bc5='phong-samp'+'les-'+_0x46dae7+'-'+_0x38280d;return Up(_0x3d1ff2,_0x204bc5,()=>hE(_0x46dae7,_0x38280d));},vE=(_0x5b67b4,_0x56964b,_0x3a121a,_0x270d3f)=>{const _0x27127b='ggx-sample'+'s-'+_0x56964b+'-'+_0x3a121a+'-'+_0x270d3f;return Up(_0x5b67b4,_0x27127b,()=>pE(_0x56964b,_0x3a121a,_0x270d3f));};function vi(_0x4bc075,_0x1eb2b1,_0x11c286={}){var _0x1e4840,_0x4e822a;w['assert'](_0x4bc075 instanceof _e&&_0x1eb2b1 instanceof _e,'source\x20and'+'\x20target\x20mu'+'st\x20be\x20text'+'ures');const _0x2ab80a=_0x11c286['seamPixels']??-0x9*-0x30b+0x35*-0x99+0x16e*0x3,_0x5a326f=(((_0x1e4840=_0x11c286['rect'])==null?void(0x1*-0x16af+-0xaf1+0x21a0):_0x1e4840['z'])??_0x1eb2b1['width'])-_0x2ab80a*(0x1*0x73+-0x1d9e*-0x1+-0x1e0f),_0x5d7f6f=(((_0x4e822a=_0x11c286['rect'])==null?void(-0xc23+-0x216e+0x1*0x2d91):_0x4e822a['w'])??_0x1eb2b1['height'])-_0x2ab80a*(-0x272*0x5+-0x5c5*-0x5+-0x109d);if(_0x5a326f<0x2*0x5ee+0x122c+-0x1e07||_0x5d7f6f<0x11c1+0x1f9a+0x2*-0x18ad)return!(-0x1f15+-0x97*-0x11+-0x9*-0x257);const _0x25ec1a={'none':'reproject','lambert':'prefilterS'+'amplesUnwe'+'ighted','phong':'prefilterS'+'amplesUnwe'+'ighted','ggx':'prefilterS'+'amples'},_0xcec9e6=_0x11c286['hasOwnProp'+'erty']('specularPo'+'wer')?_0x11c286['specularPo'+'wer']:-0xd40+-0x813+0xf*0x16c,_0x3340c6=_0x11c286['hasOwnProp'+'erty']('face')?_0x11c286['face']:null,_0x2b4f7a=_0x11c286['hasOwnProp'+'erty']('distributi'+'on')?_0x11c286['distributi'+'on']:_0xcec9e6===0x199f+0x1*-0x581+-0x141d?'none':'phong',_0x50ce8b=_0x25ec1a[_0x2b4f7a]||'reproject',_0x201cff=_0x50ce8b['startsWith']('prefilterS'+'amples'),_0x3353c4=Sr['decodeFunc'](_0x4bc075['encoding']),_0xe2f841=Sr['encodeFunc'](_0x1eb2b1['encoding']),_0x19d147='sample'+d_(_0x4bc075['projection']),_0x246fcd='getDirecti'+'on'+d_(_0x1eb2b1['projection']),_0x13bfd3=_0x11c286['hasOwnProp'+'erty']('numSamples')?_0x11c286['numSamples']:-0xf60+0x546+0xa*0x169,_0x232614='ReprojectS'+'hader:'+_0x50ce8b+'_'+_0x3353c4+'_'+_0xe2f841+'_'+_0x19d147+'_'+_0x246fcd+'_'+_0x13bfd3,_0x4e0e40=_0x4bc075['device'];let _0x584288=Nn(_0x4e0e40)['getCachedS'+'hader'](_0x232614);if(!_0x584288){const _0x227f40=new Map();_0x201cff&&_0x227f40['set']('USE_SAMPLE'+'S_TEX',''),_0x4bc075['cubemap']&&_0x227f40['set']('CUBEMAP_SO'+'URCE',''),_0x227f40['set']('{PROCESS_F'+'UNC}',_0x50ce8b),_0x227f40['set']('{DECODE_FU'+'NC}',_0x3353c4),_0x227f40['set']('{ENCODE_FU'+'NC}',_0xe2f841),_0x227f40['set']('{SOURCE_FU'+'NC}',_0x19d147),_0x227f40['set']('{TARGET_FU'+'NC}',_0x246fcd),_0x227f40['set']('{NUM_SAMPL'+'ES}',_0x13bfd3),_0x227f40['set']('{NUM_SAMPL'+'ES_SQRT}',Math['round'](Math['sqrt'](_0x13bfd3))['toFixed'](0x509+0x77*0x37+-0x1e99));const _0x421f33=_0x4e0e40['isWebGPU'],_0x46109a=Ce['get'](_0x4e0e40,_0x421f33?it:Fe),_0x5ceac5=new Map();_0x5ceac5['set']('decodePS',_0x46109a['get']('decodePS')),_0x5ceac5['set']('encodePS',_0x46109a['get']('encodePS')),_0x584288=$t['createShad'+'er'](_0x4e0e40,{'uniqueName':_0x232614,'attributes':{'vertex_position':Pe},'vertexChunk':'reprojectV'+'S','fragmentChunk':'reprojectP'+'S','fragmentIncludes':_0x5ceac5,'fragmentDefines':_0x227f40});}Q['pushGpuMar'+'ker'](_0x4e0e40,'ReprojectT'+'exture'),_0x4e0e40['setBlendSt'+'ate'](pt['NOBLEND']);const _0x1ae304=_0x4e0e40['scope']['resolve'](_0x4bc075['cubemap']?'sourceCube':'sourceTex');w['assert'](_0x1ae304),_0x1ae304['setValue'](_0x4bc075);const _0x4851fb=_0x4e0e40['scope']['resolve']('params'),_0x54862b=_0x4e0e40['scope']['resolve']('uvMod');_0x2ab80a>-0x112d*-0x1+0x23cb+0x1*-0x34f8?_0x54862b['setValue']([(_0x5a326f+_0x2ab80a*(0x756+0x75a+0x1*-0xeae))/_0x5a326f,(_0x5d7f6f+_0x2ab80a*(0x24d2+-0xc10+0xc60*-0x2))/_0x5d7f6f,-_0x2ab80a/_0x5a326f,-_0x2ab80a/_0x5d7f6f]):_0x54862b['setValue']([-0x4*0x29f+-0x94*-0x1d+-0x647,-0x1*-0x2117+0x1c24+-0x3d3a,-0x2f*0x4c+0x2*0x747+0x7*-0x16,0x246a+0x2*-0x5cf+-0x18cc]);const _0x5e8cee=[-0x17*0x89+-0xefd*-0x1+-0x31*0xe,_0x1eb2b1['width']*_0x1eb2b1['height']*(_0x1eb2b1['cubemap']?-0x278*-0x6+-0x1f75+-0x11*-0xfb:0x175b+-0x2576*-0x1+-0x3cd0),_0x4bc075['width']*_0x4bc075['height']*(_0x4bc075['cubemap']?-0x158c+-0x2104+-0x336*-0x11:0x1e53+-0xaa9+-0x13a9)];if(_0x201cff){const _0x87b39c=_0x4bc075['width']*_0x4bc075['height']*(_0x4bc075['cubemap']?-0x10*0x65+0x1fad+-0x1957:0xec2*0x2+0x20cc+-0x3e4f),_0x22fe63=_0x2b4f7a==='ggx'?vE(_0x4e0e40,_0x13bfd3,_0xcec9e6,_0x87b39c):_0x2b4f7a==='lambert'?SE(_0x4e0e40,_0x13bfd3,_0x87b39c):yE(_0x4e0e40,_0x13bfd3,_0xcec9e6);_0x4e0e40['scope']['resolve']('samplesTex')['setValue'](_0x22fe63),_0x4e0e40['scope']['resolve']('samplesTex'+'InverseSiz'+'e')['setValue']([(-0x1*0x125+-0xbdf+0x457*0x3)/_0x22fe63['width'],(-0x3*0xcc8+-0x263d+-0x4c96*-0x1)/_0x22fe63['height']]);}for(let _0x5d523c=-0x1c1f+0xcd4*-0x2+0x35c7;_0x5d523c<(_0x1eb2b1['cubemap']?-0xb*0x2b9+-0x1*-0x1f85+0xc*-0x21:-0x6*0xb9+-0x85*-0x13+-0x8*0xb1);_0x5d523c++)if(_0x3340c6===null||_0x5d523c===_0x3340c6){const _0x2e2df8=new gt({'colorBuffer':_0x1eb2b1,'face':_0x5d523c,'depth':!(-0x1fd+0x5c7+-0x3c9),'flipY':_0x4e0e40['isWebGPU']});_0x5e8cee[0x17b1+-0x9*0x3e7+0xb6e]=_0x5d523c,_0x4851fb['setValue'](_0x5e8cee),Tr(_0x4e0e40,_0x2e2df8,_0x584288,_0x11c286==null?void(-0x1694+-0xed4+-0x2a*-0xe4):_0x11c286['rect']),_0x2e2df8['destroy']();}return Q['popGpuMark'+'er'](_0x4e0e40),!(-0x863+-0x13f5+0x1c58);}const Pd=(_0x10927a,_0x48b2f9=0x989+0x185*0x8+-0x1*0x15b1)=>-0x1*-0x1e0b+0x3*0x931+-0x399d+Math['floor'](Math['log2'](Math['max'](_0x10927a,_0x48b2f9))),xE=_0x113cd7=>_0x113cd7['textureHal'+'fFloatRend'+'erable'],TE=_0x59f039=>_0x59f039['textureFlo'+'atRenderab'+'le'],wE=_0x38abd8=>xE(_0x38abd8)?nt:TE(_0x38abd8)?Xt:Ne,EE=_0x328a68=>Ne,bE=(_0x573163,_0x2aa2f7,_0x50ebb7,_0x3df98c)=>new _e(_0x573163,{'name':'lighting-'+_0x2aa2f7,'cubemap':!(0x1*-0x509+-0x1290*0x2+0x2a29),'width':_0x2aa2f7,'height':_0x2aa2f7,'format':_0x50ebb7,'type':Bo,'addressU':ue,'addressV':ue,'mipmaps':!(0x8*0xe6+0x624+-0x471*0x3)});class zy{static['generateSk'+'yboxCubema'+'p'](_0x1f9815,_0x55f862){const _0x3fc5bb=_0x1f9815['device'];Q['pushGpuMar'+'ker'](_0x3fc5bb,'genSkyboxC'+'ubemap');const _0x25b371=bE(_0x3fc5bb,_0x55f862||(_0x1f9815['cubemap']?_0x1f9815['width']:_0x1f9815['width']/(0xf01+0x235b+-0x3258)),Ne);return vi(_0x1f9815,_0x25b371,{'numSamples':0x400}),Q['popGpuMark'+'er'](_0x3fc5bb),_0x25b371;}static['generateLi'+'ghtingSour'+'ce'](_0x476b3f,_0x356d35){const _0x5c9224=_0x476b3f['device'];Q['pushGpuMar'+'ker'](_0x5c9224,'genLightin'+'gSource');const _0x4f20bf=wE(_0x5c9224),_0x5255f4=(_0x356d35==null?void(-0x5*-0x5a7+-0x1816+-0x42d):_0x356d35['target'])||new _e(_0x5c9224,{'name':'lighting-s'+'ource','cubemap':!(0xda2+-0x131f+0x57d),'width':(_0x356d35==null?void(0x12e*-0x5+0x11e6*0x2+-0x1de6):_0x356d35['size'])||0x2329*-0x1+-0x20fa+0x44a3,'height':(_0x356d35==null?void(0x4e2*0x5+-0x28c*0xb+0x39a):_0x356d35['size'])||-0xef0+0x1ea6*0x1+-0xf36,'format':_0x4f20bf,'type':_0x4f20bf===Ne?Bo:Ms,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1bb3+0x131e+0x895*0x1)});return vi(_0x476b3f,_0x5255f4,{'numSamples':_0x476b3f['mipmaps']?-0x2b*-0x52+0x1fd+-0x1*0xfc2:-0x13*-0xdb+0x7cb*-0x5+0x1ab6}),Q['popGpuMark'+'er'](_0x5c9224),_0x5255f4;}static['generateAt'+'las'](_0x10a4be,_0x4b4b4e){const _0x1f4889=_0x10a4be['device'],_0x19fca2=EE();Q['pushGpuMar'+'ker'](_0x1f4889,'genAtlas');const _0x22b74e=(_0x4b4b4e==null?void(-0x1e3c+-0x4*0x4d2+-0xc61*-0x4):_0x4b4b4e['target'])||new _e(_0x1f4889,{'name':'envAtlas','width':(_0x4b4b4e==null?void(-0x11f*-0x3+0x1*0x5d5+-0x932):_0x4b4b4e['size'])||0x223e+-0x1*0x20e3+0x37*0x3,'height':(_0x4b4b4e==null?void(-0x2500+-0x6d1*-0x1+0x1e2f):_0x4b4b4e['size'])||0x24aa+0x1141*-0x1+0x1169*-0x1,'format':_0x19fca2,'type':Bo,'projection':um,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1*0x1f44+-0x1860+0x37*0x103)});Q['pushGpuMar'+'ker'](_0x1f4889,'mipmaps');const _0x1d8667=_0x22b74e['width']/(-0x73f+0x1160+-0x821),_0x3995a5=new re(-0x23*0x25+-0x2657+0x2b66,-0x114*0x1e+-0xf*-0x263+-0x375,(-0x3*-0x25f+-0x571*0x5+-0x1*-0x1618)*_0x1d8667,(0xddf+-0xc5d+-0x82)*_0x1d8667),_0x28a18a=Pd(-0x2513*0x1+0x20*0xb8+0xf13)-Pd(0x1fd3+-0x247*-0x1+0x1*-0x2216);for(let _0x2a71bb=-0x1b3*0xa+0x66*0x1f+-0xb*-0x6c;_0x2a71bb<_0x28a18a;++_0x2a71bb)vi(_0x10a4be,_0x22b74e,{'numSamples':0x1,'rect':_0x3995a5,'seamPixels':_0x1d8667}),_0x3995a5['x']+=_0x3995a5['w'],_0x3995a5['y']+=_0x3995a5['w'],_0x3995a5['z']=Math['max'](0x156a*-0x1+0x1d65+-0x2*0x3fd,Math['floor'](_0x3995a5['z']*(-0xa3*-0x35+0x1a3*-0xd+-0xe*0xe4+0.5))),_0x3995a5['w']=Math['max'](-0x699*0x1+-0x3*0x96f+-0x1*-0x22e7,Math['floor'](_0x3995a5['w']*(-0xa11+0x2372+-0x1961+0.5)));Q['popGpuMark'+'er'](_0x1f4889),Q['pushGpuMar'+'ker'](_0x1f4889,'reflection'+'s'),_0x3995a5['set'](0x1888+-0x195c+0xd4,(-0x1140+-0x5ae*-0x1+0x649*0x2)*_0x1d8667,(-0x18d*-0xe+-0x3d*-0x29+-0x33*0x99)*_0x1d8667,(0x1e71+0x78a*0x5+-0x43a3)*_0x1d8667);for(let _0xf1c18e=0x110d+-0x1570+0x464;_0xf1c18e<-0x7*-0x1c4+0x2*0x1114+-0x2e7d;++_0xf1c18e)vi(_0x10a4be,_0x22b74e,{'numSamples':(_0x4b4b4e==null?void(-0xd11+0x228e+0x157d*-0x1):_0x4b4b4e['numReflect'+'ionSamples'])||0x37*-0x77+0x1*0x1c1a+0x177*0x1,'distribution':(_0x4b4b4e==null?void(0x1d9c+0x3*-0x97b+-0x12b):_0x4b4b4e['distributi'+'on'])||'ggx','specularPower':Math['max'](0x25b9*0x1+-0x1*-0x1464+-0x1*0x3a1c,0xf0d+-0x819+0x10c>>_0xf1c18e*(-0xf1e+0x10eb+-0x1cb)),'rect':_0x3995a5,'seamPixels':_0x1d8667}),_0x3995a5['y']+=_0x3995a5['w'],_0x3995a5['z']=Math['max'](0x2699+-0x200c+-0x68c,Math['floor'](_0x3995a5['z']*(0x1166+0xe3e*-0x1+-0x328+0.5))),_0x3995a5['w']=Math['max'](0x1e9e+-0x652+-0x184b,Math['floor'](_0x3995a5['w']*(0x2542+-0xd28+-0x2*0xc0d+0.5)));return Q['popGpuMark'+'er'](_0x1f4889),Q['pushGpuMar'+'ker'](_0x1f4889,'ambient'),_0x3995a5['set']((0x12a6+0x562+-0x1788)*_0x1d8667,(0xf86+0x1*-0x1127+0x321*0x1)*_0x1d8667,(-0x11*0xdc+-0x18dd+0x27b9)*_0x1d8667,(0x4eb*-0x1+-0x2*-0xe9b+-0x182b)*_0x1d8667),vi(_0x10a4be,_0x22b74e,{'numSamples':(_0x4b4b4e==null?void(-0x21a9+-0xa*-0x2f5+0x417):_0x4b4b4e['numAmbient'+'Samples'])||0x3b2+0x82e+-0x8*0x7c,'distribution':'lambert','rect':_0x3995a5,'seamPixels':_0x1d8667}),Q['popGpuMark'+'er'](_0x1f4889),Q['popGpuMark'+'er'](_0x1f4889),_0x22b74e;}static['generatePr'+'efilteredA'+'tlas'](_0x33746c,_0xe06545){const _0x4cddec=_0x33746c[0x1f54+-0xaf*0x2b+-0x1ef*0x1]['device'],_0x37bb60=_0x33746c[0x3*0x9f7+-0x9de+-0x1407]['format'],_0x1c2dcb=_0x33746c[-0x1633+-0x1750*0x1+0xbf*0x3d]['type'];Q['pushGpuMar'+'ker'](_0x4cddec,'genPrefilt'+'eredAtlas');const _0x5831bc=(_0xe06545==null?void(0x26fa+0xa6*-0x31+-0x734):_0xe06545['target'])||new _e(_0x4cddec,{'name':'envPrefilt'+'eredAtlas','width':(_0xe06545==null?void(0x2060+-0x906+-0x175a):_0xe06545['size'])||-0x20d1+-0xbca*-0x2+-0x3bf*-0x3,'height':(_0xe06545==null?void(-0xfe6+-0x1d35*-0x1+-0xd4f):_0xe06545['size'])||0x33e*-0xb+0x1b7c+0xa2e,'format':_0x37bb60,'type':_0x1c2dcb,'projection':um,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1*-0x46a+0xfb6+-0x141f)});Q['pushGpuMar'+'ker'](_0x4cddec,'mipmaps');const _0x587428=_0x5831bc['width']/(0x266+-0x56b+-0x1*-0x505),_0x2daa60=new re(0x115f+-0xd*-0xe5+0xe8*-0x20,-0x2559*0x1+0x1*0x943+0x1c16,(-0x1fd*-0x11+-0x1272*-0x1+-0x323f*0x1)*_0x587428,(-0x1+-0x949*0x3+-0x737*-0x4)*_0x587428),_0x2f7663=Pd(-0x1fb9+0x10fe+-0x1*-0x10bb);for(let _0x49e617=-0x3a*-0x32+-0x22b8+-0xbb2*-0x2;_0x49e617<_0x2f7663;++_0x49e617)vi(_0x33746c[0x672+-0x1861+0x11ef],_0x5831bc,{'numSamples':0x1,'rect':_0x2daa60,'seamPixels':_0x587428}),_0x2daa60['x']+=_0x2daa60['w'],_0x2daa60['y']+=_0x2daa60['w'],_0x2daa60['z']=Math['max'](-0xb5e+0x1cf8+-0x1199,Math['floor'](_0x2daa60['z']*(0xc6+0x1e64+-0x1f2a+0.5))),_0x2daa60['w']=Math['max'](0x2*-0x9c2+0xfbf*-0x1+-0x4*-0x8d1,Math['floor'](_0x2daa60['w']*(0x197c+-0x1ca+-0x151*0x12+0.5)));Q['popGpuMark'+'er'](_0x4cddec),Q['pushGpuMar'+'ker'](_0x4cddec,'reflection'+'s'),_0x2daa60['set'](0x1ace+-0x371*0x5+-0x999*0x1,(0x50a+-0x1e6a+0x1a60)*_0x587428,(-0xff3+0x23cd+0xfe*-0x13)*_0x587428,(-0x7*-0x8d+0x1313+-0x166e)*_0x587428);for(let _0x3f5dfd=0xb*0xca+0x1e94+-0x2741;_0x3f5dfd<_0x33746c['length'];++_0x3f5dfd)vi(_0x33746c[_0x3f5dfd],_0x5831bc,{'numSamples':0x1,'rect':_0x2daa60,'seamPixels':_0x587428}),_0x2daa60['y']+=_0x2daa60['w'],_0x2daa60['z']=Math['max'](0x2509+0x16b8+-0x3bc0,Math['floor'](_0x2daa60['z']*(-0x4f3+0x1*-0xb2d+0x1020+0.5))),_0x2daa60['w']=Math['max'](-0x2613+0x789*0x3+0xe9*0x11,Math['floor'](_0x2daa60['w']*(-0x38f*-0x9+-0x1096+-0xf71+0.5)));return Q['popGpuMark'+'er'](_0x4cddec),Q['pushGpuMar'+'ker'](_0x4cddec,'ambient'),_0x2daa60['set']((-0x3*-0x167+-0x1ce3+0xb*0x24a)*_0x587428,(0x1*0x186e+-0x2141*0x1+-0x1*-0xa53)*_0x587428,(-0x2*-0x1bd+-0x10a2+0xd68)*_0x587428,(-0x1894+-0x1753+0x5*0x99b)*_0x587428),_0xe06545!=null&&_0xe06545['legacyAmbi'+'ent']?vi(_0x33746c[-0x3e8+0x13c9*0x1+-0xfdc],_0x5831bc,{'numSamples':0x1,'rect':_0x2daa60,'seamPixels':_0x587428}):vi(_0x33746c[0x20d3*-0x1+-0x6fa*-0x1+0x19d9],_0x5831bc,{'numSamples':(_0xe06545==null?void(-0xa7a*0x2+0xbcf*0x3+-0xe79):_0xe06545['numSamples'])||-0x23e4+0x2*0xcce+-0x24*-0x82,'distribution':'lambert','rect':_0x2daa60,'seamPixels':_0x587428}),Q['popGpuMark'+'er'](_0x4cddec),Q['popGpuMark'+'er'](_0x4cddec),_0x5831bc;}}const AE={'aoPS':'1.57','clearCoatPS':'1.57','clearCoatGlossPS':'1.60','clearCoatNormalPS':'1.57','diffusePS':'1.57','emissivePS':'1.57','glossPS':'1.60','metalnessPS':'1.57','normalMapPS':'1.57','opacityPS':'1.57','parallaxPS':'1.57','sheenPS':'1.57','sheenGlossPS':'1.60','specularPS':'1.57','specularityFactorPS':'1.57','thicknessPS':'1.57','transmissionPS':'1.57','normalVertexPS':'1.55','aoDiffuseOccPS':'1.62','aoSpecOccPS':'2.6','clusteredLightPS':'1.62','clusteredLightShadowPS':'1.62','combinePS':'1.62','falloffInvSquaredPS':'1.62','falloffLinearPS':'1.62','lightDiffuseLambertPS':'1.62','lightSheenPS':'1.62','lightSpecularAnisoGGXPS':'1.62','lightSpecularBlinnPS':'1.62','ltcPS':'1.62','reflDirPS':'1.62','reflDirAnisoPS':'1.62','reflectionCCPS':'1.62','reflectionCubePS':'2.6','reflectionEnvPS':'2.6','reflectionEnvHQPS':'2.6','reflectionSpherePS':'2.6','reflectionSheenPS':'1.62','shadowCommonPS':'1.62','shadowCoordPS':'1.62','shadowCoordPerspZBufferPS':'1.62','shadowEVSMPS':'1.62','spotPS':'1.62','TBNPS':'1.62','endPS':'1.65','metalnessModulatePS':'1.65','outputAlphaPS':'1.65','outputAlphaPremulPS':'1.65','fresnelSchlickPS':'1.65','iridescenceDiffractionPS':'1.65','lightmapAddPS':'1.65','refractionCubePS':'1.70','refractionDynamicPS':'1.70'},f_={'ambientPrefilteredCubePS':'1.51','ambientPrefilteredCubeLodPS':'1.51','dpAtlasQuadPS':'1.51','genParaboloidPS':'1.51','prefilterCubemapPS':'1.51','reflectionDpAtlasPS':'1.51','reflectionPrefilteredCubePS':'1.51','reflectionPrefilteredCubeLodPS':'1.51','refractionPS':'1.56','combineClearCoatPS':'1.56','combineDiffusePS':'1.56','combineDiffuseSpecularPS':'1.56','combineDiffuseSpecularNoReflPS':'1.56','combineDiffuseSpecularNoReflSeparateAmbientPS':'1.56','combineDiffuseSpecularOldPS':'1.56','lightmapSingleVertPS':'1.55','normalMapFastPS':'1.55','specularAaNonePS':'1.55','specularAaToksvigPS':'1.55','specularAaToksvigFastPS':'1.55','skyboxEnvPS':'2.1','skyboxHDRPS':'2.1','shadowVSM8PS':'2.3','fogExpPS':'2.5','fogExp2PS':'2.5','fogLinearPS':'2.5','fogNonePS':'2.5','gamma1_0PS':'2.5','gamma2_2PS':'2.5','storeEVSMPS':'2.6','shadowEVSMnPS':'2.6','shadowVSM_commonPS':'2.6','shadowStandardPS':'2.6','shadowStandardGL2PS':'2.6','startVS':'2.6','endVS':'2.6','baseVS':'2.6','baseNineSlicedVS':'2.6','viewNormalVS':'2.6','lightmapDirAddPS':'2.6','TBNObjectSpacePS':'2.6','TBNderivativePS':'2.6','startPS':'2.6','outputAlphaOpaque':'2.6','outputAlphaPremul':'2.6','cubeMapProjectBoxPS':'2.6','cubeMapProjectNonePS':'2.6','envMultiplyPS':'2.6','envConstPS':'2.6','aoSpecOccConstPS':'2.6','aoSpecOccConstSimplePS':'2.6','aoSpecOccSimplePS':'2.6','ambientConstantPS':'2.6','ambientEnvPS':'2.6','ambientSHPS':'2.6','shadowSampleCoordPS':'2.6','diffuseDetailMapPS':'2.7','normalDetailMapPS':'2.7','normalXYPS':'2.7','normalXYZPS':'2.7','aoDetailMapPS':'2.7','lightmapDirPS':'2.7','lightmapSinglePS':'2.7','tangentBinormalVS':'2.7'},CE=(_0x3b71bf,_0x3e1a82)=>{const _0x5b6640=_0x3b71bf['split']('.')['map'](_0x249186=>parseInt(_0x249186,-0xef*-0x6+-0x10de+0xb4e)),_0xcb1cff=_0x3e1a82['split']('.')['map'](_0x57cc10=>parseInt(_0x57cc10,-0xdc9+-0x124d+0x2020));return _0x5b6640[0x842+0x1f06+-0x6*0x68c]<_0xcb1cff[0x58b+0x1e82+-0x240d]||_0x5b6640[0x18cf*-0x1+-0x848+-0x2117*-0x1]===_0xcb1cff[0xd6d*-0x2+0x9d8+0x1102]&&_0x5b6640[-0x484+-0x1711+0x1b96]<_0xcb1cff[0x1*-0x15aa+-0xd*0x196+0x2a49];},PE=(_0x3acf5a,_0x4819aa)=>{for(const _0x4581fb of _0x3acf5a['keys']())if(f_['hasOwnProp'+'erty'](_0x4581fb)){const _0x1bf8c6=f_[_0x4581fb];w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x4581fb+('\x27\x20was\x20remo'+'ved\x20in\x20API'+'\x20')+_0x1bf8c6+('\x20and\x20is\x20no'+'\x20longer\x20su'+'pported.'));}else{const _0x5ac8a3=AE[_0x4581fb];_0x5ac8a3&&(!_0x4819aa||CE(_0x4819aa,_0x5ac8a3))&&w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x4581fb+('\x27\x20is\x20API\x20v'+'ersion\x20')+_0x5ac8a3+(',\x20but\x20the\x20'+'supplied\x20c'+'hunk\x20is\x20ve'+'rsion\x20')+(_0x4819aa||'undefined')+('.\x20Please\x20u'+'pdate\x20to\x20t'+'he\x20latest\x20'+'API:\x20https'+'://develop'+'er.playcan'+'vas.com/us'+'er-manual/'+'graphics/s'+'hader-chun'+'k-migratio'+'ns/'));}},Md={'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':va,'vertex_color':Wt,'vertex_boneWeights':gi,'vertex_boneIndices':us};class ME{constructor(_0x79e2bb,_0x398ee8,_0x176cfa=!(-0x1*0x7b5+0x116*-0x13+0x1c57)){h(this,'varyingsCo'+'de',''),h(this,'device'),h(this,'options'),h(this,'shaderLang'+'uage'),h(this,'vDefines',new Map()),h(this,'fDefines',new Map()),h(this,'includes',new Map()),h(this,'chunks',null),(this['device']=_0x79e2bb,this['options']=_0x398ee8);const _0x44261c=_0x398ee8['shaderChun'+'ks'];if(this['shaderLang'+'uage']=_0x79e2bb['isWebGPU']&&_0x176cfa&&(_0x44261c!=null&&_0x44261c['useWGSL'])?it:Fe,this['attributes']={'vertex_position':Pe},_0x398ee8['userAttrib'+'utes']){for(const [_0xfe947e,_0x13e03f]of Object['entries'](_0x398ee8['userAttrib'+'utes']))this['attributes'][_0x13e03f]=_0xfe947e;}const _0x435e57=Ce['get'](_0x79e2bb,this['shaderLang'+'uage']);if(this['chunks']=new Map(_0x435e57),_0x44261c){const _0x39304b=this['shaderLang'+'uage']===Fe?_0x44261c['glsl']:_0x44261c['wgsl'];w['call'](()=>{PE(_0x39304b,_0x44261c['version']);}),_0x39304b['forEach']((_0x3f1e81,_0x52a85d)=>{for(const _0x562ad8 in Md)Md['hasOwnProp'+'erty'](_0x562ad8)&&_0x3f1e81['indexOf'](_0x562ad8)>=-0x81*-0x4a+-0x1*0xd34+-0x1816&&(this['attributes'][_0x562ad8]=Md[_0x562ad8]);this['chunks']['set'](_0x52a85d,_0x3f1e81);});}this['shaderPass'+'Info']=Si['get'](this['device'])['getByIndex'](_0x398ee8['pass']),this['shadowPass']=this['shaderPass'+'Info']['isShadow'],this['lighting']=_0x398ee8['lights']['length']>-0x70b+0x24ad+0x1*-0x1da2||_0x398ee8['dirLightMa'+'pEnabled']||_0x398ee8['clusteredL'+'ightingEna'+'bled'],this['reflection'+'s']=_0x398ee8['reflection'+'Source']!==_r,this['needsNorma'+'l']=this['lighting']||this['reflection'+'s']||_0x398ee8['useSpecula'+'r']||_0x398ee8['ambientSH']||_0x398ee8['useHeights']||_0x398ee8['enableGGXS'+'pecular']||_0x398ee8['clusteredL'+'ightingEna'+'bled']&&!this['shadowPass']||_0x398ee8['useClearCo'+'atNormals'],this['needsNorma'+'l']=this['needsNorma'+'l']&&!this['shadowPass'],this['needsScene'+'Color']=_0x398ee8['useDynamic'+'Refraction'],this['needsScree'+'nSize']=_0x398ee8['useDynamic'+'Refraction'],this['needsTrans'+'forms']=_0x398ee8['useDynamic'+'Refraction'],this['vshader']=null,this['fshader']=null;}['fDefineSet'](_0x217778,_0x1e9952,_0x254864=''){_0x217778&&this['fDefines']['set'](_0x1e9952,_0x254864);}['generateVe'+'rtexShader'](_0x3ea8ea,_0x14eab0,_0x458071){const {options:_0x455fc8,vDefines:_0x35fff9,attributes:_0x21fe6f}=this,_0x5b0b76=new Map();if(_0x5b0b76['set']('vPositionW','vec3'),(_0x455fc8['nineSliced'+'Mode']===Pt||_0x455fc8['nineSliced'+'Mode']===Mt)&&_0x35fff9['set']('NINESLICED',!(-0x1f3d+0x18d+0x1db0)),this['options']['linearDept'+'h']&&(_0x35fff9['set']('LINEAR_DEP'+'TH',!(0x2034+-0x22ef*-0x1+0x3*-0x1661)),_0x5b0b76['set']('vLinearDep'+'th','float')),this['needsNorma'+'l']&&_0x35fff9['set']('NORMALS',!(-0x1e1d+0x1*-0x23ff+0x1087*0x4)),this['options']['useInstanc'+'ing']){const _0x4521f1=Ce['get'](this['device'],this['shaderLang'+'uage']);this['chunks']['get']('transformI'+'nstancingV'+'S')===_0x4521f1['get']('transformI'+'nstancingV'+'S')&&(_0x21fe6f['instance_l'+'ine1']=sp,_0x21fe6f['instance_l'+'ine2']=ip,_0x21fe6f['instance_l'+'ine3']=rp,_0x21fe6f['instance_l'+'ine4']=bn);}this['needsNorma'+'l']&&(_0x21fe6f['vertex_nor'+'mal']=gs,_0x5b0b76['set']('vNormalW','vec3'),_0x455fc8['hasTangent'+'s']&&(_0x455fc8['useHeights']||_0x455fc8['useNormals']||_0x455fc8['useClearCo'+'atNormals']||_0x455fc8['enableGGXS'+'pecular'])?(_0x35fff9['set']('TANGENTS',!(0x1f9*0xb+0x1594+-0x2b47)),_0x21fe6f['vertex_tan'+'gent']=yi,_0x5b0b76['set']('vTangentW','vec3'),_0x5b0b76['set']('vBinormalW','vec3')):_0x455fc8['enableGGXS'+'pecular']&&(_0x35fff9['set']('GGX_SPECUL'+'AR',!(0x5*0x4+-0xd86+0xd72*0x1)),_0x5b0b76['set']('vObjectSpa'+'ceUpW','vec3')));const _0x30fd3a=-0xb55*-0x2+-0x31a*0xc+-0xe9*-0x10;for(let _0xb14546=-0x1*0x325+-0x1633+0x656*0x4;_0xb14546<_0x30fd3a;_0xb14546++)_0x3ea8ea[_0xb14546]&&(_0x35fff9['set']('UV'+_0xb14546,!(-0x1452+0x11b+0x1337*0x1)),_0x21fe6f['vertex_tex'+'Coord'+_0xb14546]='TEXCOORD'+_0xb14546),_0x14eab0[_0xb14546]&&(_0x35fff9['set']('UV'+_0xb14546+('_UNMODIFIE'+'D'),!(0x13a*0x6+-0x1*0x2291+-0x1b35*-0x1)),_0x5b0b76['set']('vUv'+_0xb14546,'vec2'));let _0x9b0614=0x1*0x716+0x9b*0x28+-0x1f4e;const _0x25da5a=new Set();_0x458071['forEach'](_0x3925ae=>{const {id:_0x36c375,uv:_0x331e60,name:_0x37531e}=_0x3925ae,_0x3e4577=_0x36c375+_0x331e60*(-0x1a18*-0x1+-0xf8*-0x1a+0x1*-0x32e4);if(!_0x25da5a['has'](_0x3e4577)){_0x25da5a['add'](_0x3e4577),_0x5b0b76['set']('vUV'+_0x331e60+'_'+_0x36c375,'vec2');const _0x228e7b='texture_'+_0x37531e+('MapTransfo'+'rm');_0x35fff9['set']('{TRANSFORM'+'_NAME_'+_0x9b0614+'}',_0x228e7b),_0x35fff9['set']('{TRANSFORM'+'_UV_'+_0x9b0614+'}',_0x331e60),_0x35fff9['set']('{TRANSFORM'+'_ID_'+_0x9b0614+'}',_0x36c375),_0x9b0614++;}}),_0x35fff9['set']('UV_TRANSFO'+'RMS_COUNT',_0x9b0614),_0x455fc8['vertexColo'+'rs']&&(_0x21fe6f['vertex_col'+'or']=Wt,_0x35fff9['set']('VERTEX_COL'+'OR',!(-0x4*0x8f6+0x6d*0x37+0xc6d)),_0x5b0b76['set']('vVertexCol'+'or','vec4')),_0x455fc8['useMsdf']&&_0x455fc8['msdfTextAt'+'tribute']&&(_0x21fe6f['vertex_out'+'lineParame'+'ters']=ko,_0x21fe6f['vertex_sha'+'dowParamet'+'ers']=Uo,_0x35fff9['set']('MSDF',!(-0x1d+0x89*0x25+0x38*-0x5a))),(_0x455fc8['useMorphPo'+'sition']||_0x455fc8['useMorphNo'+'rmal'])&&(_0x35fff9['set']('MORPHING',!(-0x31f*0x6+-0xaea+0x1da4)),_0x455fc8['useMorphTe'+'xtureBased'+'Int']&&_0x35fff9['set']('MORPHING_I'+'NT',!(0x1bb3+-0xd9+-0x1ada)),_0x455fc8['useMorphPo'+'sition']&&_0x35fff9['set']('MORPHING_P'+'OSITION',!(-0x4*0x3ea+-0x1*0xc00+0x1ba8)),_0x455fc8['useMorphNo'+'rmal']&&_0x35fff9['set']('MORPHING_N'+'ORMAL',!(0x98+0x10*0xad+-0xb68)),_0x21fe6f['morph_vert'+'ex_id']=bn),_0x455fc8['skin']&&(_0x21fe6f['vertex_bon'+'eIndices']=us,_0x455fc8['batch']?_0x35fff9['set']('BATCH',!(-0x16c5+-0xf9e+0x2663)):(_0x21fe6f['vertex_bon'+'eWeights']=gi,_0x35fff9['set']('SKIN',!(0xf*0x94+0x793+-0x103f*0x1)))),_0x455fc8['useInstanc'+'ing']&&_0x35fff9['set']('INSTANCING',!(0x3f*0x3b+0x1c41*0x1+-0x6*0x721)),_0x455fc8['screenSpac'+'e']&&_0x35fff9['set']('SCREENSPAC'+'E',!(-0x48a+0xb8b+-0x701)),_0x455fc8['pixelSnap']&&_0x35fff9['set']('PIXELSNAP',!(0x50a+-0xfde+0xad4)),_0x5b0b76['forEach']((_0x1cd39c,_0x51424a)=>{this['varyingsCo'+'de']+='#define\x20VA'+'RYING_'+_0x51424a['toUpperCas'+'e']()+'\x0a',this['varyingsCo'+'de']+=this['shaderLang'+'uage']===it?'varying\x20'+_0x51424a+':\x20'+JS['get'](_0x1cd39c)+';\x0a':'varying\x20'+_0x1cd39c+'\x20'+_0x51424a+';\x0a';}),this['includes']['set']('varyingsVS',this['varyingsCo'+'de']),this['includes']['set']('varyingsPS',this['varyingsCo'+'de']),this['vshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}['_setupLigh'+'tingDefine'+'s'](_0x499082,_0x3652b7){const _0x50c02d=this['fDefines'],_0x4b54e7=this['options'];if(this['fDefines']['set']('LIGHT_COUN'+'T',_0x4b54e7['lights']['length']),_0x499082&&_0x50c02d['set']('AREA_LIGHT'+'S',!(0x1*0x1d73+0x2024+-0x3d97*0x1)),_0x3652b7&&this['lighting']&&(_0x50c02d['set']('LIT_CLUSTE'+'RED_LIGHTS',!(0x13*0x1a0+0xe39+-0x2d19)),_0x4b54e7['clusteredL'+'ightingCoo'+'kiesEnable'+'d']&&_0x50c02d['set']('CLUSTER_CO'+'OKIES',!(0xc25+0x123+0x14*-0xaa)),_0x4b54e7['clusteredL'+'ightingAre'+'aLightsEna'+'bled']&&_0x50c02d['set']('CLUSTER_AR'+'EALIGHTS',!(0x1e19+-0x7*0x269+0x1*-0xd3a)),_0x4b54e7['lightMaskD'+'ynamic']&&_0x50c02d['set']('CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS',!(-0xa14+-0xb1b*0x1+0x1ed*0xb)),_0x4b54e7['clusteredL'+'ightingSha'+'dowsEnable'+'d']&&!_0x4b54e7['noShadow'])){const _0xe038f6=Xi['get'](_0x4b54e7['clusteredL'+'ightingSha'+'dowType']);_0x50c02d['set']('CLUSTER_SH'+'ADOWS',!(0x278+-0x2569*-0x1+-0x27e1)),_0x50c02d['set']('SHADOW_KIN'+'D_'+_0xe038f6['kind'],!(0x2*0xcde+0x22f7+-0x3cb3)),_0x50c02d['set']('CLUSTER_SH'+'ADOW_TYPE_'+_0xe038f6['kind'],!(0x11b*-0x22+0x7e*-0x3+-0x1388*-0x2));}for(let _0x1b8cc2=-0xeb*0x5+-0x164c+-0x1*-0x1ae3;_0x1b8cc2<_0x4b54e7['lights']['length'];_0x1b8cc2++){const _0x2b6a84=_0x4b54e7['lights'][_0x1b8cc2],_0x34cec8=_0x2b6a84['_type'];if(_0x3652b7&&_0x34cec8!==ve)continue;const _0x4d239e=_0x499082&&_0x2b6a84['_shape']?_0x2b6a84['_shape']:js,_0x200536=_0x2b6a84['_shadowTyp'+'e'],_0x3e4efe=_0x2b6a84['castShadow'+'s']&&!_0x4b54e7['noShadow'],_0x1f5d9b=Xi['get'](_0x200536);w['assert'](_0x1f5d9b),_0x50c02d['set']('LIGHT'+_0x1b8cc2,!(0x6b*-0x8+0x19d0+-0x1678)),_0x50c02d['set']('LIGHT'+_0x1b8cc2+'TYPE',''+Um[_0x34cec8]),_0x50c02d['set']('LIGHT'+_0x1b8cc2+'SHADOWTYPE',''+_0x1f5d9b['name']),_0x50c02d['set']('LIGHT'+_0x1b8cc2+'SHAPE',''+JT[_0x4d239e]),_0x50c02d['set']('LIGHT'+_0x1b8cc2+'FALLOFF',''+ew[_0x2b6a84['_falloffMo'+'de']]),_0x2b6a84['affectSpec'+'ularity']&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+('AFFECT_SPE'+'CULARITY'),!(-0x1*0x182+-0x939*-0x3+-0x1a29*0x1)),_0x2b6a84['_cookie']&&(_0x34cec8===Ze&&!_0x2b6a84['_cookie']['_cubemap']||_0x34cec8===Ke&&_0x2b6a84['_cookie']['_cubemap'])&&(_0x50c02d['set']('LIGHT'+_0x1b8cc2+'COOKIE',!(-0x1*-0x10e1+0x67*0x2+-0x1f7*0x9)),_0x50c02d['set']('{LIGHT'+_0x1b8cc2+('COOKIE_CHA'+'NNEL}'),_0x2b6a84['_cookieCha'+'nnel']),_0x34cec8===Ze&&(_0x2b6a84['_cookieTra'+'nsform']&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+('COOKIE_TRA'+'NSFORM'),!(0x7*0x192+-0x1*0x104e+0x2*0x2a8)),_0x2b6a84['_cookieFal'+'loff']&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+('COOKIE_FAL'+'LOFF'),!(-0x138f+0x1*-0x1565+0x147a*0x2)))),_0x3e4efe&&(_0x50c02d['set']('LIGHT'+_0x1b8cc2+'CASTSHADOW',!(-0x1d6c+0x2708*-0x1+0x4474)),_0x1f5d9b['pcf']&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+'SHADOW_PCF',!(-0x5*-0x691+-0x40d+-0x1cc8)),_0x2b6a84['_normalOff'+'setBias']&&!_0x2b6a84['_isVsm']&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+('_SHADOW_SA'+'MPLE_NORMA'+'L_OFFSET'),!(0x8a*0xc+0xdd2+0x6a*-0x31)),_0x34cec8===ve&&(_0x50c02d['set']('LIGHT'+_0x1b8cc2+('_SHADOW_SA'+'MPLE_ORTHO'),!(0x22c7+0x1eb9+0x20c*-0x20)),_0x2b6a84['cascadeBle'+'nd']>-0xdc9+-0xc15*-0x2+0x1*-0xa61&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+('_SHADOW_CA'+'SCADE_BLEN'+'D'),!(-0x3b7*-0x2+-0x1*0x11b9+0xa4b)),_0x2b6a84['numCascade'+'s']>-0x103e+-0x1*0x16a9+0x26e8&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+('_SHADOW_CA'+'SCADES'),!(0x1613+-0x1ee3+0x8d0))),(_0x1f5d9b['pcf']||_0x1f5d9b['pcss']||this['device']['isWebGPU'])&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+('_SHADOW_SA'+'MPLE_SOURC'+'E_ZBUFFER'),!(0x196c+-0x18*-0x12f+0x2b1*-0x14)),_0x34cec8===Ke&&_0x50c02d['set']('LIGHT'+_0x1b8cc2+('_SHADOW_SA'+'MPLE_POINT'),!(0x11b3*0x1+-0xc51*0x3+0x1340))),_0x3e4efe&&(_0x50c02d['set']('SHADOW_KIN'+'D_'+_0x1f5d9b['kind'],!(0x1*0x26f+-0x26fe+0x248f)),_0x34cec8===ve&&_0x50c02d['set']('SHADOW_DIR'+'ECTIONAL',!(0x79*-0x34+0xb2*0xd+0xf8a)));}}['prepareFor'+'wardPass'](_0x2f0831){const {options:_0x278024}=this,_0x4f967a=_0x278024['clusteredL'+'ightingEna'+'bled']&&_0x278024['clusteredL'+'ightingAre'+'aLightsEna'+'bled']||_0x278024['lights']['some'](_0x590f74=>_0x590f74['_shape']&&_0x590f74['_shape']!==js),_0x182502=!_0x278024['lightMapEn'+'abled']||_0x278024['lightMapWi'+'thoutAmbie'+'nt'],_0x24e1c8=this['needsNorma'+'l']&&(_0x278024['useNormals']||_0x278024['useClearCo'+'atNormals']||_0x278024['enableGGXS'+'pecular']&&!_0x278024['useHeights']);_0x278024['useSpecula'+'r']&&(this['fDefineSet'](!(0x2336+0x2*0x1b5+-0x20*0x135),'LIT_SPECUL'+'AR'),this['fDefineSet'](this['reflection'+'s'],'LIT_REFLEC'+'TIONS'),this['fDefineSet'](_0x278024['useClearCo'+'at'],'LIT_CLEARC'+'OAT'),this['fDefineSet'](_0x278024['fresnelMod'+'el']>0x1*0x1aaf+-0x7c2+-0x12ed,'LIT_SPECUL'+'AR_FRESNEL'),this['fDefineSet'](_0x278024['useSheen'],'LIT_SHEEN'),this['fDefineSet'](_0x278024['useIridesc'+'ence'],'LIT_IRIDES'+'CENCE')),this['fDefineSet'](this['lighting']&&_0x278024['useSpecula'+'r']||this['reflection'+'s'],'LIT_SPECUL'+'AR_OR_REFL'+'ECTION'),this['fDefineSet'](this['needsScene'+'Color'],'LIT_SCENE_'+'COLOR'),this['fDefineSet'](this['needsScree'+'nSize'],'LIT_SCREEN'+'_SIZE'),this['fDefineSet'](this['needsTrans'+'forms'],'LIT_TRANSF'+'ORMS'),this['fDefineSet'](this['needsNorma'+'l'],'LIT_NEEDS_'+'NORMAL'),this['fDefineSet'](this['lighting'],'LIT_LIGHTI'+'NG'),this['fDefineSet'](_0x278024['useMetalne'+'ss'],'LIT_METALN'+'ESS'),this['fDefineSet'](_0x278024['enableGGXS'+'pecular'],'LIT_GGX_SP'+'ECULAR'),this['fDefineSet'](_0x278024['useSpecula'+'rityFactor'],'LIT_SPECUL'+'ARITY_FACT'+'OR'),this['fDefineSet'](_0x278024['useCubeMap'+'Rotation'],'CUBEMAP_RO'+'TATION'),this['fDefineSet'](_0x278024['occludeSpe'+'cularFloat'],'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT'),this['fDefineSet'](_0x278024['separateAm'+'bient'],'LIT_SEPARA'+'TE_AMBIENT'),this['fDefineSet'](_0x278024['twoSidedLi'+'ghting'],'LIT_TWO_SI'+'DED_LIGHTI'+'NG'),this['fDefineSet'](_0x278024['lightMapEn'+'abled'],'LIT_LIGHTM'+'AP'),this['fDefineSet'](_0x278024['dirLightMa'+'pEnabled'],'LIT_DIR_LI'+'GHTMAP'),this['fDefineSet'](_0x278024['skyboxInte'+'nsity']>0x7b9+0x1172*0x1+-0x192b,'LIT_SKYBOX'+'_INTENSITY'),this['fDefineSet'](_0x278024['clusteredL'+'ightingSha'+'dowsEnable'+'d'],'LIT_CLUSTE'+'RED_SHADOW'+'S'),this['fDefineSet'](_0x278024['clusteredL'+'ightingAre'+'aLightsEna'+'bled'],'LIT_CLUSTE'+'RED_AREA_L'+'IGHTS'),this['fDefineSet'](_0x24e1c8,'LIT_TBN'),this['fDefineSet'](_0x182502,'LIT_ADD_AM'+'BIENT'),this['fDefineSet'](_0x278024['hasTangent'+'s'],'LIT_TANGEN'+'TS'),this['fDefineSet'](_0x278024['useNormals'],'LIT_USE_NO'+'RMALS'),this['fDefineSet'](_0x278024['useClearCo'+'atNormals'],'LIT_USE_CL'+'EARCOAT_NO'+'RMALS'),this['fDefineSet'](_0x278024['useRefract'+'ion'],'LIT_REFRAC'+'TION'),this['fDefineSet'](_0x278024['useDynamic'+'Refraction'],'LIT_DYNAMI'+'C_REFRACTI'+'ON'),this['fDefineSet'](_0x278024['dispersion'],'LIT_DISPER'+'SION'),this['fDefineSet'](_0x278024['useHeights'],'LIT_HEIGHT'+'S'),this['fDefineSet'](_0x278024['opacityFad'+'esSpecular'],'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR'),this['fDefineSet'](_0x278024['alphaToCov'+'erage'],'LIT_ALPHA_'+'TO_COVERAG'+'E'),this['fDefineSet'](_0x278024['alphaTest'],'LIT_ALPHA_'+'TEST'),this['fDefineSet'](_0x278024['useMsdf'],'LIT_MSDF'),this['fDefineSet'](_0x278024['ssao'],'LIT_SSAO'),this['fDefineSet'](_0x278024['useAo'],'LIT_AO'),this['fDefineSet'](_0x278024['occludeDir'+'ect'],'LIT_OCCLUD'+'E_DIRECT'),this['fDefineSet'](_0x278024['msdfTextAt'+'tribute'],'LIT_MSDF_T'+'EXT_ATTRIB'+'UTE'),this['fDefineSet'](_0x278024['diffuseMap'+'Enabled'],'LIT_DIFFUS'+'E_MAP'),this['fDefineSet'](_0x278024['shadowCatc'+'her'],'LIT_SHADOW'+'_CATCHER'),this['fDefineSet'](!(0x1f74+-0x24df*0x1+0x56b),'LIT_FRESNE'+'L_MODEL',ZT[_0x278024['fresnelMod'+'el']]),this['fDefineSet'](!(-0x70a*-0x1+0x4*-0x2c3+0x402),'LIT_NONE_S'+'LICE_MODE',dw[_0x278024['nineSliced'+'Mode']]),this['fDefineSet'](!(0x6c9*0x3+0x657*0x1+0x33*-0x86),'LIT_BLEND_'+'TYPE',uy[_0x278024['blendType']]),this['fDefineSet'](!(-0x21e9+-0x14dd+-0x39*-0xf6),'LIT_CUBEMA'+'P_PROJECTI'+'ON',nw[_0x278024['cubeMapPro'+'jection']]),this['fDefineSet'](!(0x25f+0xb*0x30e+0x1*-0x23f9),'LIT_OCCLUD'+'E_SPECULAR',lw[_0x278024['occludeSpe'+'cular']]),this['fDefineSet'](!(-0x2d5*0xb+0x1ea7+0x80),'LIT_REFLEC'+'TION_SOURC'+'E',cw[_0x278024['reflection'+'Source']]),this['fDefineSet'](!(-0x1859+0xe3b*-0x1+0x2694),'LIT_AMBIEN'+'T_SOURCE',hw[_0x278024['ambientSou'+'rce']]),this['fDefineSet'](!(-0x974+0x8*-0x4a9+0x2ebc),'{lightingU'+'v}',_0x2f0831??''),this['fDefineSet'](!(0xbe2+-0x1*0x14ca+-0x23a*-0x4),'{reflectio'+'nDecode}',Sr['decodeFunc'](_0x278024['reflection'+'Encoding'])),this['fDefineSet'](!(0x1ff+-0x1*0x100f+0xe10),'{reflectio'+'nCubemapDe'+'code}',Sr['decodeFunc'](_0x278024['reflection'+'CubemapEnc'+'oding'])),this['fDefineSet'](!(0x1c4b+0x1eeb+-0x3b36),'{ambientDe'+'code}',Sr['decodeFunc'](_0x278024['ambientEnc'+'oding'])),this['_setupLigh'+'tingDefine'+'s'](_0x4f967a,_0x278024['clusteredL'+'ightingEna'+'bled']);}['prepareSha'+'dowPass'](){const {options:_0x17ea54}=this,_0x5e3127=this['shaderPass'+'Info']['lightType'],_0x457868=this['shaderPass'+'Info']['shadowType'],_0x5eadb8=Xi['get'](_0x457868);w['assert'](_0x5eadb8);const _0x3d1c22=_0x5e3127===ve||!_0x5eadb8['vsm']&&_0x5e3127===Ze;this['fDefineSet'](_0x3d1c22,'PERSPECTIV'+'E_DEPTH'),this['fDefineSet'](!(-0x83d*-0x4+-0x58d+0x17*-0x131),'LIGHT_TYPE',''+Um[_0x5e3127]),this['fDefineSet'](!(-0x1050+-0x1e49+0x2e99),'SHADOW_TYP'+'E',''+_0x5eadb8['name']),this['fDefineSet'](_0x17ea54['alphaTest'],'LIT_ALPHA_'+'TEST');}['generateFr'+'agmentShad'+'er'](_0x59a7e0,_0x5181ae,_0x4a3593){const _0xa57984=this['options'];this['includes']['set']('frontendDe'+'clPS',_0x59a7e0??''),this['includes']['set']('frontendCo'+'dePS',_0x5181ae??''),_0xa57984['pass']===Wn||_0xa57984['pass']===vl||(this['shadowPass']?this['prepareSha'+'dowPass']():this['prepareFor'+'wardPass'](_0x4a3593)),this['fshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}}class Vy{constructor(){h(this,'hasTangent'+'s',!(-0x733+0x86d*0x3+0x7*-0x295)),h(this,'shaderChun'+'ks',null),h(this,'pass',0xa86+0x2589+-0x300f),h(this,'alphaTest',!(-0x13*0x3f+-0x3*0x101+0xb*0xb3)),h(this,'blendType',Cs),h(this,'separateAm'+'bient',!(-0x239*-0x11+0x93*-0x2e+-0xb5e)),h(this,'screenSpac'+'e',!(-0x1eb3*-0x1+0x8*0x3ca+-0x3d02)),h(this,'skin',!(-0x134f*-0x1+0x4fe+0xa*-0x26e)),h(this,'batch',!(-0xf03+0x16dd*0x1+-0x7d9)),h(this,'useInstanc'+'ing',!(-0x60*-0x49+-0x24ce+-0x325*-0x3)),h(this,'useMorphPo'+'sition',!(-0x1*0x1235+-0x2*-0x829+-0xf2*-0x2)),h(this,'useMorphNo'+'rmal',!(0x1d58+-0x5*-0x313+0x1*-0x2cb6)),h(this,'useMorphTe'+'xtureBased'+'Int',!(-0x1*0x7d5+0x14f8*0x1+-0x29*0x52)),h(this,'nineSliced'+'Mode',-0x5*0x3e6+0x19f6+-0x678),h(this,'clusteredL'+'ightingEna'+'bled',!(0x4b1*0x1+-0x1f8a+0x8f3*0x3)),h(this,'clusteredL'+'ightingCoo'+'kiesEnable'+'d',!(-0x1462+-0x2f*-0x2+0x1405)),h(this,'clusteredL'+'ightingSha'+'dowsEnable'+'d',!(-0x191d*-0x1+0x73e+-0x205a*0x1)),h(this,'clusteredL'+'ightingSha'+'dowType',0x81*-0x2d+0x11b9+0x4f4),h(this,'clusteredL'+'ightingAre'+'aLightsEna'+'bled',!(0x11*0x16a+-0x11*-0x101+-0x148d*0x2)),h(this,'vertexColo'+'rs',!(-0x8d*-0x16+-0xe5*-0x25+-0x2d36)),h(this,'lightMapEn'+'abled',!(0xb34+-0x1*-0x2c9+-0xdfc)),h(this,'dirLightMa'+'pEnabled',!(0x5*-0x3c+-0x1c5+0x2f2)),h(this,'useHeights',!(0x1*-0x1e19+0x2185+-0x36b)),h(this,'useNormals',!(0xbe*-0x7+-0x9e*0x29+-0x39*-0x89)),h(this,'useClearCo'+'atNormals',!(0x1d20+0x4*0x77f+0x1*-0x3b1b)),h(this,'useAo',!(0x6*0x3e1+0x5*0x256+-0x22f3)),h(this,'diffuseMap'+'Enabled',!(-0x95*0x2e+-0x1f9e+-0x3a65*-0x1)),h(this,'pixelSnap',!(-0x257f+-0xb29*-0x1+0x1a57*0x1)),h(this,'ambientSH',!(-0x95c+-0x7c6+-0x29*-0x6b)),h(this,'ssao',!(-0x2c*-0x4f+-0x7*0x495+0x1280)),h(this,'twoSidedLi'+'ghting',!(0x1df2+-0x162b+0x1*-0x7c6)),h(this,'occludeDir'+'ect',!(0xe97+0x1736+-0x973*0x4)),h(this,'occludeSpe'+'cular',0x237f+-0x1d21+-0x65e),h(this,'occludeSpe'+'cularFloat',!(-0x2*0x1115+-0x1f4c+0x4177)),h(this,'useMsdf',!(-0x2628*-0x1+-0x13*0xa3+0x3a*-0x73)),h(this,'msdfTextAt'+'tribute',!(-0x154+0x4f*-0x4c+0xf*0x1a7)),h(this,'alphaToCov'+'erage',!(0x34*0x92+-0x2028+0x1*0x281)),h(this,'opacityFad'+'esSpecular',!(-0x2f*-0x12+0x1dce+0x4b*-0x71)),h(this,'opacityDit'+'her',ua),h(this,'opacitySha'+'dowDither',ua),h(this,'cubeMapPro'+'jection',-0x2004+0x506*0x1+0x1afe),h(this,'useSpecula'+'r',!(0x1bc1+-0x1de+-0x19e2)),h(this,'useSpecula'+'rityFactor',!(0x362*0x3+0x6c4+-0x25*0x75)),h(this,'enableGGXS'+'pecular',!(-0x1*-0xb59+-0x19f4+-0x2*-0x74e)),h(this,'fresnelMod'+'el',0x7*0x537+0x5*-0x3f9+-0x1e*0x8e),h(this,'useRefract'+'ion',!(-0x2b6+-0x203d+-0x117a*-0x2)),h(this,'useClearCo'+'at',!(-0x18a3+-0x24a1*-0x1+-0xbfd)),h(this,'useSheen',!(0x11e3+0x1dd0+-0x2fb2)),h(this,'useIridesc'+'ence',!(0x1ed9+-0xbe6*-0x2+-0x36a4)),h(this,'useMetalne'+'ss',!(0x1632*0x1+0x1b8e*-0x1+0x55d)),h(this,'useDynamic'+'Refraction',!(0x434+0x5db+0x3*-0x35a)),h(this,'dispersion',!(0x1*0x2397+0x1c14+-0x2*0x1fd5)),h(this,'fog',Hn),h(this,'gamma',yl),h(this,'toneMap',-(0x12eb+-0x2*0xda3+0x5*0x1ac)),h(this,'reflection'+'Source',_r),h(this,'reflection'+'Encoding',null),h(this,'reflection'+'CubemapEnc'+'oding',null),h(this,'ambientSou'+'rce','constant'),h(this,'ambientEnc'+'oding',null),h(this,'skyboxInte'+'nsity',0x14*-0xfe+-0x2005+-0x6*-0x8a5),h(this,'useCubeMap'+'Rotation',!(-0x2df+0x2c*-0x2f+-0x2*-0x57a)),h(this,'lightMapWi'+'thoutAmbie'+'nt',!(-0x1f0f*0x1+0x44f+0x1ac1)),h(this,'lights',[]),h(this,'noShadow',!(-0x40*0xc+0x199a+0x41*-0x59)),h(this,'lightMaskD'+'ynamic',-0x1348+0x231a+0x546*-0x3),h(this,'userAttrib'+'utes',{}),h(this,'linearDept'+'h',!(-0x9d5+-0x170+0xb46)),h(this,'shadowCatc'+'her',!(0x137*0x13+-0x7*0x8d+-0x1339));}}class Qo{constructor(){h(this,'defines',new Map()),h(this,'forceUv1',!(0x1156+-0x198b+0x836)),h(this,'specularTi'+'nt',!(-0x19bf+-0x1d52+0x3712)),h(this,'metalnessT'+'int',!(-0xa8+-0x79f+0x848)),h(this,'glossTint',!(0x332*0x4+-0x279*-0x1+-0xf40)),h(this,'emissiveEn'+'coding','linear'),h(this,'lightMapEn'+'coding','linear'),h(this,'packedNorm'+'al',!(-0xa*0x361+0x255c+-0x391)),h(this,'normalDeta'+'ilPackedNo'+'rmal',!(0x83*-0x3c+0x2*-0xb15+0x34df)),h(this,'clearCoatP'+'ackedNorma'+'l',!(-0x1917+-0x29+0x1941)),h(this,'glossInver'+'t',!(0x1*0xfa9+0xb50+-0x1af8)),h(this,'sheenGloss'+'Invert',!(0x6d1+0x1*-0x1aeb+0x141b*0x1)),h(this,'clearCoatG'+'lossInvert',!(0x31d*-0xc+0x1f2*-0x2+-0x2941*-0x1)),h(this,'useAO',!(-0x1d+-0x62b+0x649*0x1)),h(this,'litOptions',new Vy());}get['pass'](){return this['litOptions']['pass'];}}const Gy={'generateKey'(_0x57610e){return'lit'+Object['keys'](_0x57610e)['sort']()['map'](_0x2aaa22=>{var _0x3993c0;return _0x2aaa22==='shaderChun'+'ks'?((_0x3993c0=_0x57610e['shaderChun'+'ks'])==null?void(0x10c3+-0x22c9+0x1206):_0x3993c0['key'])??'':_0x2aaa22==='lights'?Gy['generateLi'+'ghtsKey'](_0x57610e):_0x2aaa22+_0x57610e[_0x2aaa22];})['join']('\x0a');},'generateLightsKey'(_0xeb8280){return'lights:'+_0xeb8280['lights']['map'](_0x870f99=>!_0xeb8280['clusteredL'+'ightingEna'+'bled']||_0x870f99['_type']===ve?_0x870f99['key']+',':'')['join']('');}},Sn=[],Dd=_0x445165=>Object['keys'](_0x445165)['filter'](_0x4143da=>_0x4143da!=='litOptions')['sort']();class DE extends pa{constructor(){super(...arguments),h(this,'optionsCon'+'text',new Qo()),h(this,'optionsCon'+'textMin',new Qo());}['generateKe'+'y'](_0x4af6f8){let _0xbce1e;return _0x4af6f8===this['optionsCon'+'textMin']?(this['propsMin']||(this['propsMin']=Dd(_0x4af6f8)),_0xbce1e=this['propsMin']):_0x4af6f8===this['optionsCon'+'text']?(this['props']||(this['props']=Dd(_0x4af6f8)),_0xbce1e=this['props']):_0xbce1e=Dd(_0x4af6f8),'standard:\x0a'+pa['definesHas'+'h'](_0x4af6f8['defines'])+'\x0a'+_0xbce1e['map'](_0x32c9ed=>_0x32c9ed+_0x4af6f8[_0x32c9ed])['join']('\x0a')+Gy['generateKe'+'y'](_0x4af6f8['litOptions']);}['_getUvSour'+'ceExpressi'+'on'](_0x45372c,_0x8ae48a,_0xdabc19){const _0x41d947=_0xdabc19[_0x45372c],_0x3e26c5=_0xdabc19[_0x8ae48a],_0x49b55a=_0xdabc19['litOptions']['pass']===xa;let _0x36c314;return _0x49b55a&&_0xdabc19['litOptions']['nineSliced'+'Mode']===Pt||_0x49b55a&&_0xdabc19['litOptions']['nineSliced'+'Mode']===Mt?_0x36c314='nineSliced'+'Uv':(_0x41d947===0x9f*0x33+0x1c91+0x2bd*-0x16?_0x36c314='vUv'+_0x3e26c5:_0x36c314='vUV'+_0x3e26c5+'_'+_0x41d947,_0xdabc19['heightMap']&&_0x45372c!=='heightMapT'+'ransform'&&(_0x36c314+='\x20+\x20dUvOffs'+'et')),_0x36c314;}['_validateM'+'apChunk'](_0x26adb8,_0x317ef1,_0x48c4f2){w['call'](()=>{const _0x272017=_0x48c4f2['get'](_0x317ef1)['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1'),_0x9afc5e=[],_0x300df5=(_0x14880c,_0x54d286)=>{_0x272017['includes'](_0x14880c)&&_0x9afc5e['push']('\x20\x20'+_0x14880c+'\x20->\x20'+_0x54d286);};[['$UV','{STD_'+_0x26adb8+('_TEXTURE_U'+'V}')],['$CH','{STD_'+_0x26adb8+('_TEXTURE_C'+'HANNEL}')],['$SAMPLER','{STD_'+_0x26adb8+('_TEXTURE_N'+'AME}')],['$DECODE','{STD_'+_0x26adb8+('_TEXTURE_D'+'ECODE}')],['$VC','{STD_'+_0x26adb8+('_VERTEX_CH'+'ANNEL}')],['$DETAILMOD'+'E','{STD_'+_0x26adb8+('_DETAILMOD'+'E}')],['unpackNorm'+'al(','{STD_'+_0x26adb8+('_TEXTURE_D'+'ECODE}(')]]['forEach'](([_0x372345,_0x1c88c9])=>_0x300df5(_0x372345,_0x1c88c9)),[['MAPFLOAT','STD_'+_0x26adb8+'_CONSTANT'],['MAPCOLOR','STD_'+_0x26adb8+'_CONSTANT'],['MAPVERTEX','STD_'+_0x26adb8+'_VERTEX'],['MAPTEXTURE','STD_'+_0x26adb8+'_TEXTURE'],['MAPINVERT','STD_'+_0x26adb8+'_INVERT']]['forEach'](([_0xa7fe9f,_0x58551c])=>_0x300df5(_0xa7fe9f,_0x58551c)),_0x272017['includes']('$texture2D'+'SAMPLE')&&_0x300df5('$texture2D'+'SAMPLE','(Macro\x20no\x20'+'longer\x20sup'+'ported\x20-\x20r'+'emove/refa'+'ctor)'),_0x9afc5e['length']>0x11e0+0xe46+-0x2026&&w['errorOnce']('Shader\x20chu'+'nk\x20'+_0x317ef1+('\x20is\x20in\x20no\x20'+'longer\x20com'+'patible\x20fo'+'rmat.\x20Plea'+'se\x20make\x20th'+'ese\x20replac'+'ements\x20to\x20'+'bring\x20it\x20t'+'o\x20the\x20curr'+'ent\x20versio'+'n:\x0a')+_0x9afc5e['join']('\x0a'),{'code':_0x272017});});}['_addMapDef'+'ines'](_0x35f6e1,_0x3e85c5,_0xa1cb4,_0xd21aab,_0x13a332,_0x5e0c64,_0x67ab44=null){const _0x4fbcd9=_0x3e85c5+'Map',_0x35f3a2=_0x3e85c5['toUpperCas'+'e'](),_0x350e43=_0x4fbcd9+'Uv',_0x2a9d71=_0x4fbcd9+'Identifier',_0x165aca=_0x4fbcd9+'Transform',_0xd025c=_0x4fbcd9+'Channel',_0x34127e=_0x3e85c5+('VertexColo'+'rChannel'),_0x54fbab=_0x3e85c5+'Tint',_0x48f0b3=_0x3e85c5+('VertexColo'+'r'),_0xb8d1ba=_0x3e85c5+'Mode',_0x34ea38=_0x3e85c5+'Invert',_0x4b52fd=_0xd21aab[_0x54fbab],_0x255265=_0xd21aab[_0x48f0b3],_0x2405c6=_0xd21aab[_0x4fbcd9],_0x35d246=_0xd21aab[_0x2a9d71],_0xa88c30=_0xd21aab[_0xb8d1ba],_0x267dfb=_0x13a332['get'](_0xa1cb4);if(w['assert'](_0x267dfb,'Shader\x20chu'+'nk\x20'+_0xa1cb4+('\x20not\x20found'+'.')),w['call'](()=>{_0x267dfb&&this['_validateM'+'apChunk'](_0x35f3a2,_0xa1cb4,_0x13a332);}),_0x2405c6){_0x35f6e1['set']('STD_'+_0x35f3a2+'_TEXTURE','');const _0x10c518=this['_getUvSour'+'ceExpressi'+'on'](_0x165aca,_0x350e43,_0xd21aab);_0x35f6e1['set']('{STD_'+_0x35f3a2+('_TEXTURE_U'+'V}'),_0x10c518),_0x35f6e1['set']('{STD_'+_0x35f3a2+('_TEXTURE_C'+'HANNEL}'),_0xd21aab[_0xd025c]);const _0x10ca0f='{STD_'+_0x35f3a2+('_TEXTURE_N'+'AME}');if(_0x267dfb['includes'](_0x10ca0f)){let _0x274238='texture_'+_0x4fbcd9;const _0x394c49=_0x5e0c64[_0x35d246];_0x394c49?_0x274238=_0x394c49:(_0x5e0c64[_0x35d246]=_0x274238,_0x35f6e1['set']('STD_'+_0x35f3a2+('_TEXTURE_A'+'LLOCATE'),'')),_0x35f6e1['set'](_0x10ca0f,_0x274238);}if(_0x67ab44){const _0x301ca9=_0xd21aab[_0xd025c]==='aaa'?'passThroug'+'h':Sr['decodeFunc'](_0x67ab44);_0x35f6e1['set']('{STD_'+_0x35f3a2+('_TEXTURE_D'+'ECODE}'),_0x301ca9);}}_0x255265&&(_0x35f6e1['set']('STD_'+_0x35f3a2+'_VERTEX',''),_0x35f6e1['set']('{STD_'+_0x35f3a2+('_VERTEX_CH'+'ANNEL}'),_0xd21aab[_0x34127e])),_0xa88c30&&_0x35f6e1['set']('{STD_'+_0x35f3a2+('_DETAILMOD'+'E}'),_0xa88c30),_0x4b52fd&&_0x35f6e1['set']('STD_'+_0x35f3a2+'_CONSTANT',''),_0xd21aab[_0x34ea38]&&_0x35f6e1['set']('STD_'+_0x35f3a2+'_INVERT','');}['_correctCh'+'annel'](_0x558246,_0xb47df7,_0x134b5b){if(_0x134b5b[_0x558246]>0x219c+0xca*0x29+-0x2*0x20fb){if(_0x134b5b[_0x558246]<_0xb47df7['length'])return _0xb47df7['substring'](0x263b*-0x1+0x1*0x2485+0x2*0xdb,_0x134b5b[_0x558246]);if(_0x134b5b[_0x558246]>_0xb47df7['length']){let _0x4e5914=_0xb47df7;const _0x263d96=_0x4e5914['charAt'](_0x4e5914['length']-(0x125f*0x1+0x1c0+-0x141e)),_0x19c56a=_0x134b5b[_0x558246]-_0x4e5914['length'];for(let _0x3001c6=0x55b*0x1+0x1f*0x137+-0x2b04;_0x3001c6<_0x19c56a;_0x3001c6++)_0x4e5914+=_0x263d96;return _0x4e5914;}return _0xb47df7;}}['createVert'+'exShader'](_0x58621a,_0x2a180c){const _0xd09881=[],_0x277672=[],_0x2cd492=[];for(const _0x387ae1 in Sn){const _0x566206=_0x387ae1+'Map';if(_0x2a180c[_0x387ae1+('VertexColo'+'r')]){const _0x504244=_0x387ae1+('VertexColo'+'rChannel');_0x2a180c[_0x504244]=this['_correctCh'+'annel'](_0x387ae1,_0x2a180c[_0x504244],Sn);}if(_0x2a180c[_0x566206]){const _0x26d687=_0x566206+'Channel',_0x41ca4e=_0x566206+'Transform',_0x3111a7=_0x566206+'Uv';_0x2a180c[_0x3111a7]=Math['min'](_0x2a180c[_0x3111a7],-0x160b+-0x66*0xa+0x1a08),_0x2a180c[_0x26d687]=this['_correctCh'+'annel'](_0x387ae1,_0x2a180c[_0x26d687],Sn);const _0x5474e5=_0x2a180c[_0x3111a7];_0xd09881[_0x5474e5]=!(0x595+0x25c*-0x8+0xd4b),_0x277672[_0x5474e5]=_0x277672[_0x5474e5]||_0x2a180c[_0x566206]&&!_0x2a180c[_0x41ca4e],_0x2a180c[_0x41ca4e]&&_0x2cd492['push']({'name':_0x387ae1,'id':_0x2a180c[_0x41ca4e],'uv':_0x2a180c[_0x3111a7]});}}_0x2a180c['forceUv1']&&(_0xd09881[0xb5*-0x7+0x1938+-0x4*0x511]=!(-0x15d1+-0x19a5+0x2f76),_0x277672[-0x18ff+-0xb13+0x2413]=_0x277672[0x13c3+0x853+-0xd*0x229]!==void(-0xea2+0x1ea6*0x1+-0x1004)?_0x277672[-0x5*-0x269+-0xa6b+-0x1a1*0x1]:!(0x1f24+0x15e9+0x9*-0x5e5)),_0x58621a['generateVe'+'rtexShader'](_0xd09881,_0x277672,_0x2cd492);}['prepareFra'+'gmentDefin'+'es'](_0x3bc8a4,_0x2118a1,_0x181d1c){const _0x28c3f6=(_0x136e10,_0x3b2afc,_0xd0a182='')=>{_0x136e10&&_0x2118a1['set'](_0x3b2afc,_0xd0a182);};_0x28c3f6(_0x3bc8a4['lightMap'],'STD_LIGHTM'+'AP',''),_0x28c3f6(_0x3bc8a4['lightVerte'+'xColor'],'STD_LIGHT_'+'VERTEX_COL'+'OR',''),_0x28c3f6(_0x3bc8a4['dirLightMa'+'p']&&_0x3bc8a4['litOptions']['useSpecula'+'r'],'STD_LIGHTM'+'AP_DIR',''),_0x28c3f6(_0x3bc8a4['heightMap'],'STD_HEIGHT'+'_MAP',''),_0x28c3f6(_0x3bc8a4['useSpecula'+'rColor'],'STD_SPECUL'+'AR_COLOR',''),_0x28c3f6(_0x3bc8a4['aoMap']||_0x3bc8a4['aoVertexCo'+'lor']||_0x3bc8a4['useAO'],'STD_AO',''),_0x28c3f6(!(0x18d4+0x1e01*0x1+0x1247*-0x3),'STD_OPACIT'+'Y_DITHER',xw[_0x181d1c['isForward']?_0x3bc8a4['litOptions']['opacityDit'+'her']:_0x3bc8a4['litOptions']['opacitySha'+'dowDither']]);}['createShad'+'erDefiniti'+'on'](_0xe55530,_0x1eb251){const _0x12ab75=Si['get'](_0xe55530)['getByIndex'](_0x1eb251['litOptions']['pass']),_0x456b4c=_0x12ab75['isForward'],_0x1f26cf=new ME(_0xe55530,_0x1eb251['litOptions']);this['createVert'+'exShader'](_0x1f26cf,_0x1eb251);const _0x4968e7={};_0x1eb251['litOptions']['fresnelMod'+'el']=_0x1eb251['litOptions']['fresnelMod'+'el']===-0x1d+0xdba+-0xd9d?Tp:_0x1eb251['litOptions']['fresnelMod'+'el'];const _0x449416=_0x1f26cf['fDefines'];this['prepareFra'+'gmentDefin'+'es'](_0x1eb251,_0x449416,_0x12ab75);let _0x2f3aab='';if(_0x456b4c){if(_0x1eb251['heightMap']&&this['_addMapDef'+'ines'](_0x449416,'height','parallaxPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),(_0x1eb251['litOptions']['blendType']!==Cs||_0x1eb251['litOptions']['alphaTest']||_0x1eb251['litOptions']['alphaToCov'+'erage']||_0x1eb251['litOptions']['opacityDit'+'her']!==ua)&&this['_addMapDef'+'ines'](_0x449416,'opacity','opacityPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),_0x1f26cf['needsNorma'+'l']){if((_0x1eb251['normalMap']||_0x1eb251['clearCoatN'+'ormalMap'])&&!_0x1eb251['litOptions']['hasTangent'+'s']){const _0x26a0a3=_0x1eb251['normalMap']?'normalMap':'clearCoatN'+'ormalMap';_0x2f3aab=this['_getUvSour'+'ceExpressi'+'on'](_0x26a0a3+'Transform',_0x26a0a3+'Uv',_0x1eb251);}this['_addMapDef'+'ines'](_0x449416,'normalDeta'+'il','normalMapP'+'S',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['normalDeta'+'ilPackedNo'+'rmal']?'xy':'xyz'),this['_addMapDef'+'ines'](_0x449416,'normal','normalMapP'+'S',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['packedNorm'+'al']?'xy':'xyz');}_0x1eb251['diffuseDet'+'ail']&&this['_addMapDef'+'ines'](_0x449416,'diffuseDet'+'ail','diffusePS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['diffuseDet'+'ailEncodin'+'g']),this['_addMapDef'+'ines'](_0x449416,'diffuse','diffusePS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['diffuseEnc'+'oding']),_0x1eb251['litOptions']['useRefract'+'ion']&&(this['_addMapDef'+'ines'](_0x449416,'refraction','transmissi'+'onPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),this['_addMapDef'+'ines'](_0x449416,'thickness','thicknessP'+'S',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7)),_0x1eb251['litOptions']['useIridesc'+'ence']&&(this['_addMapDef'+'ines'](_0x449416,'iridescenc'+'e','iridescenc'+'ePS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),this['_addMapDef'+'ines'](_0x449416,'iridescenc'+'eThickness','iridescenc'+'eThickness'+'PS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7)),(_0x1f26cf['lighting']&&_0x1eb251['litOptions']['useSpecula'+'r']||_0x1f26cf['reflection'+'s'])&&(_0x1eb251['litOptions']['useSheen']&&(this['_addMapDef'+'ines'](_0x449416,'sheen','sheenPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['sheenEncod'+'ing']),this['_addMapDef'+'ines'](_0x449416,'sheenGloss','sheenGloss'+'PS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7)),_0x1eb251['litOptions']['useMetalne'+'ss']&&(this['_addMapDef'+'ines'](_0x449416,'metalness','metalnessP'+'S',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),this['_addMapDef'+'ines'](_0x449416,'ior','iorPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7)),_0x1eb251['litOptions']['useSpecula'+'rityFactor']&&this['_addMapDef'+'ines'](_0x449416,'specularit'+'yFactor','specularit'+'yFactorPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),_0x1eb251['useSpecula'+'rColor']&&this['_addMapDef'+'ines'](_0x449416,'specular','specularPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['specularEn'+'coding']),this['_addMapDef'+'ines'](_0x449416,'gloss','glossPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7)),_0x1eb251['aoDetail']&&this['_addMapDef'+'ines'](_0x449416,'aoDetail','aoPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),(_0x1eb251['aoMap']||_0x1eb251['aoVertexCo'+'lor']||_0x1eb251['useAO'])&&this['_addMapDef'+'ines'](_0x449416,'ao','aoPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),this['_addMapDef'+'ines'](_0x449416,'emissive','emissivePS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['emissiveEn'+'coding']),_0x1eb251['litOptions']['useClearCo'+'at']&&(this['_addMapDef'+'ines'](_0x449416,'clearCoat','clearCoatP'+'S',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),this['_addMapDef'+'ines'](_0x449416,'clearCoatG'+'loss','clearCoatG'+'lossPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),this['_addMapDef'+'ines'](_0x449416,'clearCoatN'+'ormal','clearCoatN'+'ormalPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['clearCoatP'+'ackedNorma'+'l']?'xy':'xyz')),_0x1eb251['litOptions']['enableGGXS'+'pecular']&&this['_addMapDef'+'ines'](_0x449416,'anisotropy','anisotropy'+'PS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7),(_0x1eb251['lightMap']||_0x1eb251['lightVerte'+'xColor'])&&this['_addMapDef'+'ines'](_0x449416,'light','lightmapPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7,_0x1eb251['lightMapEn'+'coding']);}else{const _0x57d3c0=_0x1eb251['litOptions']['opacitySha'+'dowDither'];(_0x1eb251['litOptions']['alphaTest']||_0x57d3c0)&&this['_addMapDef'+'ines'](_0x449416,'opacity','opacityPS',_0x1eb251,_0x1f26cf['chunks'],_0x4968e7);}_0x1f26cf['generateFr'+'agmentShad'+'er'](_0x1f26cf['chunks']['get']('stdDeclara'+'tionPS'),_0x1f26cf['chunks']['get']('stdFrontEn'+'dPS'),_0x2f3aab);const _0x1b909c=ih['merge'](_0x1f26cf['chunks'],_0x1f26cf['includes']),_0x2a6b42=_0x1f26cf['vDefines'];_0x1eb251['defines']['forEach']((_0x749312,_0x2701ca)=>_0x2a6b42['set'](_0x2701ca,_0x749312)),_0x1eb251['defines']['forEach']((_0x177295,_0x55e202)=>_0x449416['set'](_0x55e202,_0x177295));const _0xdd6389=Jt['createDefi'+'nition'](_0xe55530,{'name':'StandardSh'+'ader','attributes':_0x1f26cf['attributes'],'shaderLanguage':_0x1f26cf['shaderLang'+'uage'],'vertexCode':_0x1f26cf['vshader'],'fragmentCode':_0x1f26cf['fshader'],'vertexIncludes':_0x1b909c,'fragmentIncludes':_0x1b909c,'fragmentDefines':_0x449416,'vertexDefines':_0x2a6b42});return _0x1f26cf['shaderPass'+'Info']['isForward']&&(_0xdd6389['tag']=NS),_0xdd6389;}}const Id=new DE(),ss=[];ss[mp]={'src':Ft,'dst':Ft,'op':z0},ss[Cs]={'src':Ft,'dst':Iu,'op':fs},ss[Zs]={'src':Ah,'dst':Ch,'op':fs,'alphaSrc':Ft},ss[Fn]={'src':Ft,'dst':Ch,'op':fs},ss[_p]={'src':Ft,'dst':Ft,'op':fs},ss[sd]={'src':Ah,'dst':Ft,'op':fs},ss[Sp]={'src':gS,'dst':U0,'op':fs},ss[yp]={'src':B0,'dst':Ft,'op':fs},ss[gp]={'src':gS,'dst':Iu,'op':fs},ss[vp]={'src':Ft,'dst':Ft,'op':V0},ss[xp]={'src':Ft,'dst':Ft,'op':G0};let IE=-0xc4*-0xa+0x1e*0xfb+-0x2512;class er{constructor(){h(this,'meshInstan'+'ces',[]),h(this,'name','Untitled'),h(this,'userId',''),h(this,'id',IE++),h(this,'variants',new Map()),h(this,'defines',new Map()),h(this,'_definesDi'+'rty',!(0x1848+-0x7d6+-0x1071)),h(this,'parameters',{}),h(this,'alphaTest',0x1a7*-0x12+-0xba7*0x1+0x2965),h(this,'alphaToCov'+'erage',!(-0x1a*0x55+-0x1*-0x1a96+-0x11f3)),h(this,'_blendStat'+'e',new pt()),h(this,'_depthStat'+'e',new Yt()),h(this,'cull',ca),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'_shaderChu'+'nks',null),h(this,'_oldChunks',{}),h(this,'_dirtyShad'+'er',!(0x2*0x1116+-0x1*-0x517+0x17*-0x1b5)),h(this,'_shaderVer'+'sion',0xebf+0x452+0x65b*-0x3),h(this,'_scene',null),h(this,'dirty',!(-0xc19+0x2f*-0x6d+0x201c)),new.target===er&&w['error']('Material\x20c'+'lass\x20canno'+'t\x20be\x20insta'+'ntiated,\x20u'+'se\x20ShaderM'+'aterial\x20in'+'stead');}get['hasShaderC'+'hunks'](){return this['_shaderChu'+'nks']!=null;}get['shaderChun'+'ks'](){return this['_shaderChu'+'nks']||(this['_shaderChu'+'nks']=new Ce()),this['_shaderChu'+'nks'];}['getShaderC'+'hunks'](_0x48e016=Fe){const _0x599427=this['shaderChun'+'ks'];return _0x48e016===Fe?_0x599427['glsl']:_0x599427['wgsl'];}set['shaderChun'+'ksVersion'](_0x4ad578){this['shaderChun'+'ks']['version']=_0x4ad578;}get['shaderChun'+'ksVersion'](){return this['shaderChun'+'ks']['version'];}set['chunks'](_0x2da168){w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),this['_oldChunks']=_0x2da168;}get['chunks'](){return w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),Object['assign'](this['_oldChunks'],Object['fromEntrie'+'s'](this['shaderChun'+'ks']['glsl'])),this['_oldChunks'];}set['depthBias'](_0x2dca0e){this['_depthStat'+'e']['depthBias']=_0x2dca0e;}get['depthBias'](){return this['_depthStat'+'e']['depthBias'];}set['slopeDepth'+'Bias'](_0x5b8278){this['_depthStat'+'e']['depthBiasS'+'lope']=_0x5b8278;}get['slopeDepth'+'Bias'](){return this['_depthStat'+'e']['depthBiasS'+'lope'];}set['redWrite'](_0x475823){this['_blendStat'+'e']['redWrite']=_0x475823;}get['redWrite'](){return this['_blendStat'+'e']['redWrite'];}set['greenWrite'](_0x10dbfd){this['_blendStat'+'e']['greenWrite']=_0x10dbfd;}get['greenWrite'](){return this['_blendStat'+'e']['greenWrite'];}set['blueWrite'](_0x48c44a){this['_blendStat'+'e']['blueWrite']=_0x48c44a;}get['blueWrite'](){return this['_blendStat'+'e']['blueWrite'];}set['alphaWrite'](_0xc9cb94){this['_blendStat'+'e']['alphaWrite']=_0xc9cb94;}get['alphaWrite'](){return this['_blendStat'+'e']['alphaWrite'];}get['transparen'+'t'](){return this['_blendStat'+'e']['blend'];}['_updateTra'+'nsparency'](){const _0x4bfa1e=this['transparen'+'t'],_0x44e24b=this['meshInstan'+'ces'];for(let _0x36f8f8=0x2f9*0x9+-0xd*-0x239+-0x1bd3*0x2;_0x36f8f8<_0x44e24b['length'];_0x36f8f8++)_0x44e24b[_0x36f8f8]['transparen'+'t']=_0x4bfa1e;}set['blendState'](_0x556fa1){this['_blendStat'+'e']['copy'](_0x556fa1),this['_updateTra'+'nsparency']();}get['blendState'](){return this['_blendStat'+'e'];}set['blendType'](_0x21d929){const _0x4794f7=ss[_0x21d929];w['assert'](_0x4794f7,'Unknown\x20bl'+'end\x20mode\x20'+_0x21d929),this['_blendStat'+'e']['setColorBl'+'end'](_0x4794f7['op'],_0x4794f7['src'],_0x4794f7['dst']),this['_blendStat'+'e']['setAlphaBl'+'end'](_0x4794f7['alphaOp']??_0x4794f7['op'],_0x4794f7['alphaSrc']??_0x4794f7['src'],_0x4794f7['alphaDst']??_0x4794f7['dst']);const _0x5b5289=_0x21d929!==Cs;this['_blendStat'+'e']['blend']!==_0x5b5289&&(this['_blendStat'+'e']['blend']=_0x5b5289,this['_updateTra'+'nsparency']()),this['_updateMes'+'hInstanceK'+'eys']();}get['blendType'](){if(!this['transparen'+'t'])return Cs;const {colorOp:_0x1628f9,colorSrcFactor:_0x1db0ea,colorDstFactor:_0x5613f2,alphaOp:_0x4b0fad,alphaSrcFactor:_0x3d3209,alphaDstFactor:_0x3d355e}=this['_blendStat'+'e'];for(let _0x1b31bf=-0x19e*0x9+0x1de9+-0xf5b;_0x1b31bf<ss['length'];_0x1b31bf++){const _0x524497=ss[_0x1b31bf];if(_0x524497['src']===_0x1db0ea&&_0x524497['dst']===_0x5613f2&&_0x524497['op']===_0x1628f9&&_0x524497['src']===_0x3d3209&&_0x524497['dst']===_0x3d355e&&_0x524497['op']===_0x4b0fad)return _0x1b31bf;}return Zs;}set['depthState'](_0x539acc){this['_depthStat'+'e']['copy'](_0x539acc);}get['depthState'](){return this['_depthStat'+'e'];}set['depthTest'](_0x2691b9){this['_depthStat'+'e']['test']=_0x2691b9;}get['depthTest'](){return this['_depthStat'+'e']['test'];}set['depthFunc'](_0x26ae6b){this['_depthStat'+'e']['func']=_0x26ae6b;}get['depthFunc'](){return this['_depthStat'+'e']['func'];}set['depthWrite'](_0x2902b6){this['_depthStat'+'e']['write']=_0x2902b6;}get['depthWrite'](){return this['_depthStat'+'e']['write'];}['copy'](_0x300b2c){var _0x428fed,_0x438f0a;this['name']=_0x300b2c['name'],this['alphaTest']=_0x300b2c['alphaTest'],this['alphaToCov'+'erage']=_0x300b2c['alphaToCov'+'erage'],this['_blendStat'+'e']['copy'](_0x300b2c['_blendStat'+'e']),this['_depthStat'+'e']['copy'](_0x300b2c['_depthStat'+'e']),this['cull']=_0x300b2c['cull'],this['stencilFro'+'nt']=(_0x428fed=_0x300b2c['stencilFro'+'nt'])==null?void(0x638*-0x1+0x2ad*-0x1+-0x9*-0xfd):_0x428fed['clone'](),_0x300b2c['stencilBac'+'k']&&(this['stencilBac'+'k']=_0x300b2c['stencilFro'+'nt']===_0x300b2c['stencilBac'+'k']?this['stencilFro'+'nt']:_0x300b2c['stencilBac'+'k']['clone']()),this['clearParam'+'eters']();for(const _0x4dfe2b in _0x300b2c['parameters'])_0x300b2c['parameters']['hasOwnProp'+'erty'](_0x4dfe2b)&&this['_setParame'+'terSimple'](_0x4dfe2b,_0x300b2c['parameters'][_0x4dfe2b]['data']);return this['defines']['clear'](),_0x300b2c['defines']['forEach']((_0x154712,_0x3526da)=>this['defines']['set'](_0x3526da,_0x154712)),this['_shaderChu'+'nks']=_0x300b2c['hasShaderC'+'hunks']?new Ce():null,(_0x438f0a=this['_shaderChu'+'nks'])==null||_0x438f0a['copy'](_0x300b2c['_shaderChu'+'nks']),this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['_updateMes'+'hInstanceK'+'eys'](){const _0x330bed=this['meshInstan'+'ces'];for(let _0x3ffdd9=-0x860*0x1+0x1704+-0xea4;_0x3ffdd9<_0x330bed['length'];_0x3ffdd9++)_0x330bed[_0x3ffdd9]['updateKey']();}['updateUnif'+'orms'](_0x4afd22,_0x32c02b){this['_dirtyShad'+'er']&&this['clearVaria'+'nts']();}['getShaderV'+'ariant'](_0x14b97b){w['assert'](!(0xe86+0xc46+-0x1acb),'Not\x20implem'+'ented');}['update'](){var _0x360d5a,_0x4b2f55;if(Object['keys'](this['_oldChunks'])['length']>0x2027*-0x1+-0x6a0+0x26c7){for(const [_0x5626db,_0x266d2e]of Object['entries'](this['_oldChunks']))this['shaderChun'+'ks']['glsl']['set'](_0x5626db,_0x266d2e),delete this['_oldChunks'][_0x5626db];}(this['_definesDi'+'rty']||(_0x360d5a=this['_shaderChu'+'nks'])!=null&&_0x360d5a['isDirty']())&&(this['_definesDi'+'rty']=!(-0x1d01+0x21+0x1ce1),(_0x4b2f55=this['_shaderChu'+'nks'])==null||_0x4b2f55['resetDirty'](),this['clearVaria'+'nts']()),this['dirty']=!(0x1d05*-0x1+0x1234+-0xd*-0xd5);}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['clearVaria'+'nts'](){this['variants']['clear']();const _0x2e1290=this['meshInstan'+'ces'],_0x298649=_0x2e1290['length'];for(let _0x2d69d0=0x1268+0x1*-0x1299+-0x7*-0x7;_0x2d69d0<_0x298649;_0x2d69d0++)_0x2e1290[_0x2d69d0]['clearShade'+'rs']();}['getParamet'+'er'](_0x3d6b51){return this['parameters'][_0x3d6b51];}['_setParame'+'terSimple'](_0x401485,_0x26a82b){w['call'](()=>{_0x26a82b===void(-0x168*0x1b+-0x70a+-0x2*-0x1681)&&w['warnOnce']('Material#s'+'etParamete'+'r:\x20Attempt'+'ing\x20to\x20set'+'\x20undefined'+'\x20data\x20for\x20'+'parameter\x20'+'\x22'+_0x401485+('\x22,\x20this\x20is'+'\x20likely\x20no'+'t\x20expected'+'.'),this);});const _0x120af2=this['parameters'][_0x401485];_0x120af2?_0x120af2['data']=_0x26a82b:this['parameters'][_0x401485]={'scopeId':null,'data':_0x26a82b};}['setParamet'+'er'](_0x16fb1d,_0x56784d){if(_0x56784d===void(0xdf0+0x28b+-0x107b)&&typeof _0x16fb1d=='object'){const _0x5bc0bb=_0x16fb1d;if(_0x5bc0bb['length']){for(let _0x6988df=0x1*-0x1c13+0x1111*-0x2+0x1c7*0x23;_0x6988df<_0x5bc0bb['length'];_0x6988df++)this['setParamet'+'er'](_0x5bc0bb[_0x6988df]);return;}_0x16fb1d=_0x5bc0bb['name'],_0x56784d=_0x5bc0bb['value'];}this['_setParame'+'terSimple'](_0x16fb1d,_0x56784d);}['deletePara'+'meter'](_0x39dd97){this['parameters'][_0x39dd97]&&delete this['parameters'][_0x39dd97];}['setParamet'+'ers'](_0x629dc7,_0x2df7fc){const _0x4ff083=this['parameters'];_0x2df7fc===void(0x214c+-0x2*-0x941+-0x33ce)&&(_0x2df7fc=_0x4ff083);for(const _0x417246 in _0x2df7fc){const _0x2c2188=_0x4ff083[_0x417246];_0x2c2188&&(_0x2c2188['scopeId']||(_0x2c2188['scopeId']=_0x629dc7['scope']['resolve'](_0x417246)),_0x2c2188['scopeId']['setValue'](_0x2c2188['data']));}}['setDefine'](_0x511041,_0x55239e){let _0x28ee53=!(-0xd40+-0x1*0x2605+0x3346);const {defines:_0x4508aa}=this;_0x55239e!==void(-0x3f5*-0x9+-0x10b*0xb+0x2*-0xc12)&&_0x55239e!==!(-0xcdf+0x1*0x8c3+0x41d)?(_0x28ee53=!_0x4508aa['has'](_0x511041)||_0x4508aa['get'](_0x511041)!==_0x55239e,_0x4508aa['set'](_0x511041,_0x55239e)):(_0x28ee53=_0x4508aa['has'](_0x511041),_0x4508aa['delete'](_0x511041)),this['_definesDi'+'rty']||(this['_definesDi'+'rty']=_0x28ee53);}['getDefine'](_0x4244af){return this['defines']['has'](_0x4244af);}['destroy'](){this['variants']['clear']();for(let _0x548b5a=-0x63e+-0x13*0x5c+0xd12;_0x548b5a<this['meshInstan'+'ces']['length'];_0x548b5a++){const _0x4a3e6b=this['meshInstan'+'ces'][_0x548b5a];if(_0x4a3e6b['clearShade'+'rs'](),_0x4a3e6b['_material']=null,_0x4a3e6b['mesh']){const _0x36a564=$n(_0x4a3e6b['mesh']['device']);this!==_0x36a564&&(_0x4a3e6b['material']=_0x36a564);}else w['warn']('pc.Materia'+'l:\x20MeshIns'+'tance.mesh'+'\x20is\x20null,\x20'+'default\x20ma'+'terial\x20can'+'not\x20be\x20ass'+'igned\x20to\x20t'+'he\x20MeshIns'+'tance');}this['meshInstan'+'ces']['length']=0x19c3+-0x23a2+0x9df;}['addMeshIns'+'tanceRef'](_0x71733f){this['meshInstan'+'ces']['push'](_0x71733f);}['removeMesh'+'InstanceRe'+'f'](_0x4be20e){const _0x4e0542=this['meshInstan'+'ces'],_0x55c9fd=_0x4e0542['indexOf'](_0x4be20e);_0x55c9fd!==-(-0xe3d+0x254+0xbea)&&_0x4e0542['splice'](_0x55c9fd,-0x963+0x1337*-0x1+0x1c9b);}}class Hs{static['update'](_0x740904,_0x3291ac,_0x32bc5b,_0x4041ec,_0x6effb,_0x374a8a,_0x3129cc){Hs['updateShar'+'edOptions'](_0x740904,_0x3291ac,_0x32bc5b,_0x6effb,_0x374a8a),Hs['updateMate'+'rialOption'+'s'](_0x740904,_0x3291ac),Hs['updateEnvO'+'ptions'](_0x740904,_0x3291ac,_0x32bc5b,_0x4041ec),Hs['updateLigh'+'tingOption'+'s'](_0x740904,_0x3291ac,_0x32bc5b,_0x6effb,_0x3129cc);}static['updateShar'+'edOptions'](_0x437ac7,_0x38109a,_0x2e092d,_0x1f3d41,_0x57f4ac){_0x437ac7['shaderChun'+'ks']=_0x38109a['shaderChun'+'ks'],_0x437ac7['pass']=_0x57f4ac,_0x437ac7['alphaTest']=_0x38109a['alphaTest']>0x7b8+0x1e76+-0x262e,_0x437ac7['blendType']=_0x38109a['blendType'],_0x437ac7['screenSpac'+'e']=_0x1f3d41&&(_0x1f3d41&sh)!==0x1aa5*-0x1+-0x15d9+0x307e,_0x437ac7['skin']=_0x1f3d41&&(_0x1f3d41&qo)!==-0x13*0x1cb+0x1*0x1b4a+0x6c7,_0x437ac7['useInstanc'+'ing']=_0x1f3d41&&(_0x1f3d41&jo)!==-0xba0+-0x2377+0x2f17*0x1,_0x437ac7['useMorphPo'+'sition']=_0x1f3d41&&(_0x1f3d41&Yo)!==0x58e+-0x1703+0x1175,_0x437ac7['useMorphNo'+'rmal']=_0x1f3d41&&(_0x1f3d41&Ko)!==0x18a8+0x4*-0x838+0x838,_0x437ac7['useMorphTe'+'xtureBased'+'Int']=_0x1f3d41&&(_0x1f3d41&Zo)!==0x18e*-0x5+-0x112f+-0x1*-0x18f5,_0x437ac7['hasTangent'+'s']=_0x1f3d41&&(_0x1f3d41&Op)!==0x2271+0x4*-0x7ad+-0x21*0x1d,_0x437ac7['nineSliced'+'Mode']=_0x38109a['nineSliced'+'Mode']||ci,_0x38109a['useLightin'+'g']&&_0x2e092d['clusteredL'+'ightingEna'+'bled']?(_0x437ac7['clusteredL'+'ightingEna'+'bled']=!(0xc51+0x2002+0x2c53*-0x1),_0x437ac7['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x2e092d['lighting']['cookiesEna'+'bled'],_0x437ac7['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x2e092d['lighting']['shadowsEna'+'bled'],_0x437ac7['clusteredL'+'ightingSha'+'dowType']=_0x2e092d['lighting']['shadowType'],_0x437ac7['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x2e092d['lighting']['areaLights'+'Enabled']):(_0x437ac7['clusteredL'+'ightingEna'+'bled']=!(-0x269a+-0x137*0x6+-0x17b*-0x1f),_0x437ac7['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(0xebc+0x2261+-0x4*0xc47),_0x437ac7['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(-0x164f*0x1+0x1*-0x55+0x16a5),_0x437ac7['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(-0x1*0x1b57+-0xec8+-0x544*-0x8));}static['updateMate'+'rialOption'+'s'](_0x4037d2,_0x54844b){_0x4037d2['separateAm'+'bient']=!(-0x9*-0xb5+0xf1a+0x86*-0x29),_0x4037d2['pixelSnap']=_0x54844b['pixelSnap'],_0x4037d2['ambientSH']=_0x54844b['ambientSH'],_0x4037d2['twoSidedLi'+'ghting']=_0x54844b['twoSidedLi'+'ghting'],_0x4037d2['occludeDir'+'ect']=_0x54844b['occludeDir'+'ect'],_0x4037d2['occludeSpe'+'cular']=_0x54844b['occludeSpe'+'cular'],_0x4037d2['occludeSpe'+'cularFloat']=_0x54844b['occludeSpe'+'cularInten'+'sity']!==-0x1*-0x1b5b+0x1*0x863+-0x23bd,_0x4037d2['useMsdf']=!(-0x5*-0xa9+-0xcf7+0x5*0x1ef),_0x4037d2['msdfTextAt'+'tribute']=!(0xecf+-0x1*0x232b+-0x191*-0xd),_0x4037d2['alphaToCov'+'erage']=_0x54844b['alphaToCov'+'erage'],_0x4037d2['opacityFad'+'esSpecular']=_0x54844b['opacityFad'+'esSpecular'],_0x4037d2['opacityDit'+'her']=_0x54844b['opacityDit'+'her'],_0x4037d2['cubeMapPro'+'jection']=Pp,_0x4037d2['useSpecula'+'r']=_0x54844b['hasSpecula'+'r'],_0x4037d2['useSpecula'+'rityFactor']=_0x54844b['hasSpecula'+'rityFactor'],_0x4037d2['enableGGXS'+'pecular']=_0x54844b['ggxSpecula'+'r'],_0x4037d2['fresnelMod'+'el']=_0x54844b['fresnelMod'+'el'],_0x4037d2['useRefract'+'ion']=_0x54844b['hasRefract'+'ion'],_0x4037d2['useClearCo'+'at']=_0x54844b['hasClearCo'+'at'],_0x4037d2['useSheen']=_0x54844b['hasSheen'],_0x4037d2['useIridesc'+'ence']=_0x54844b['hasIrrides'+'cence'],_0x4037d2['useMetalne'+'ss']=_0x54844b['hasMetalne'+'ss'],_0x4037d2['useDynamic'+'Refraction']=_0x54844b['dynamicRef'+'raction'],_0x4037d2['dispersion']=_0x54844b['dispersion']>0xdce+0x1ce9+-0x1*0x2ab7,_0x4037d2['vertexColo'+'rs']=!(-0x1d2c+-0xc68+-0x2995*-0x1),_0x4037d2['lightMapEn'+'abled']=_0x54844b['hasLightin'+'g'],_0x4037d2['dirLightMa'+'pEnabled']=_0x54844b['dirLightMa'+'p'],_0x4037d2['useHeights']=_0x54844b['hasHeights'],_0x4037d2['useNormals']=_0x54844b['hasNormals'],_0x4037d2['useClearCo'+'atNormals']=_0x54844b['hasClearCo'+'atNormals'],_0x4037d2['useAo']=_0x54844b['hasAo'],_0x4037d2['diffuseMap'+'Enabled']=_0x54844b['hasDiffuse'+'Map'];}static['updateEnvO'+'ptions'](_0x2d828d,_0x292733,_0x9d096e,_0x87bbba){_0x2d828d['fog']=_0x292733['useFog']?_0x87bbba['fog']:Hn,_0x2d828d['gamma']=_0x87bbba['shaderOutp'+'utGamma'],_0x2d828d['toneMap']=_0x292733['useTonemap']?_0x87bbba['toneMappin'+'g']:Ey,_0x292733['useSkybox']&&_0x9d096e['envAtlas']&&_0x9d096e['skybox']?(_0x2d828d['reflection'+'Source']=Jc,_0x2d828d['reflection'+'Encoding']=_0x9d096e['envAtlas']['encoding'],_0x2d828d['reflection'+'CubemapEnc'+'oding']=_0x9d096e['skybox']['encoding']):_0x292733['useSkybox']&&_0x9d096e['envAtlas']?(_0x2d828d['reflection'+'Source']=Qc,_0x2d828d['reflection'+'Encoding']=_0x9d096e['envAtlas']['encoding']):_0x292733['useSkybox']&&_0x9d096e['skybox']?(_0x2d828d['reflection'+'Source']=eh,_0x2d828d['reflection'+'Encoding']=_0x9d096e['skybox']['encoding']):(_0x2d828d['reflection'+'Source']=_r,_0x2d828d['reflection'+'Encoding']=null),_0x292733['ambientSH']?(_0x2d828d['ambientSou'+'rce']=Dp,_0x2d828d['ambientEnc'+'oding']=null):_0x2d828d['reflection'+'Source']!==_r&&_0x9d096e['envAtlas']?(_0x2d828d['ambientSou'+'rce']=Ip,_0x2d828d['ambientEnc'+'oding']=_0x9d096e['envAtlas']['encoding']):(_0x2d828d['ambientSou'+'rce']=Lp,_0x2d828d['ambientEnc'+'oding']=null);const _0x5ec956=_0x2d828d['reflection'+'Source']!==_r;_0x2d828d['skyboxInte'+'nsity']=_0x5ec956,_0x2d828d['useCubeMap'+'Rotation']=_0x5ec956&&_0x9d096e['_skyboxRot'+'ationShade'+'rInclude'];}static['updateLigh'+'tingOption'+'s'](_0x27269f,_0x3a44c9,_0x530b3f,_0x3a3aa6,_0x1a987b){if(_0x27269f['lightMapWi'+'thoutAmbie'+'nt']=!(-0x2*-0x74+-0x88a+0x11*0x73),_0x3a44c9['useLightin'+'g']){const _0xea2124=[],_0x3ad0f7=_0x3a3aa6?_0x3a3aa6>>0x1*0xe2f+-0x1b83+-0x6b2*-0x2:Ss;_0x27269f['lightMaskD'+'ynamic']=!!(_0x3ad0f7&Ss),_0x27269f['lightMapWi'+'thoutAmbie'+'nt']=!(-0x1*-0x13a6+-0x927+-0xa7e),_0x1a987b&&(Hs['collectLig'+'hts'](ve,_0x1a987b[ve],_0xea2124,_0x3ad0f7),_0x530b3f['clusteredL'+'ightingEna'+'bled']||(Hs['collectLig'+'hts'](Ke,_0x1a987b[Ke],_0xea2124,_0x3ad0f7),Hs['collectLig'+'hts'](Ze,_0x1a987b[Ze],_0xea2124,_0x3ad0f7))),_0x27269f['lights']=_0xea2124;}else _0x27269f['lights']=[];(_0x27269f['lights']['length']===-0x54a*-0x2+-0x7*0x5e+-0x401*0x2&&!_0x530b3f['clusteredL'+'ightingEna'+'bled']||(_0x3a3aa6&th)!==0xf0d+0x333+-0x2*0x920)&&(_0x27269f['noShadow']=!(-0x22*-0x10+-0x544+0x324));}static['collectLig'+'hts'](_0x5df702,_0x1a620c,_0x3f5a70,_0x475030){for(let _0x1f9fbe=-0x2069*0x1+-0x20c8+-0x1*-0x4131;_0x1f9fbe<_0x1a620c['length'];_0x1f9fbe++){const _0x5f46b1=_0x1a620c[_0x1f9fbe];_0x5f46b1['enabled']&&_0x5f46b1['mask']&_0x475030&&_0x3f5a70['push'](_0x5f46b1);}}}const u_=(_0x2341a6,_0x54cd6b)=>{if(_0x2341a6['length']!==_0x54cd6b['length'])return!(0x16ff+0x1059+-0x2757);for(let _0x4ffdd6=0xca8+0x5*-0xba+0x42*-0x23;_0x4ffdd6<_0x2341a6['length'];++_0x4ffdd6)if(_0x2341a6[_0x4ffdd6]!==_0x54cd6b[_0x4ffdd6])return!(-0x5*-0x3ac+-0xd*0xb8+-0x1*0x903);return!(0x26be+0x1*-0x119b+0x1523*-0x1);},LE=_0x5e8a58=>_0x5e8a58['r']!==-0x62f*-0x1+-0x124e*-0x2+-0x2aca*0x1||_0x5e8a58['g']!==0xb*0x251+-0x75*0x36+-0xcc||_0x5e8a58['b']!==0x1d4a+-0x2240+0x1*0x4f7,RE=_0x265efb=>_0x265efb['r']!==-0xcbf+-0x1c01+0x28c0||_0x265efb['g']!==-0x90b+0x1522+-0xc17||_0x265efb['b']!==-0x405*0x4+-0x19f4+0x2a08;class OE{constructor(){this['_mapXForms']=null;}['updateMinR'+'ef'](_0x62cc88,_0x141a63,_0x297707,_0x3036c9,_0x126f29,_0xce4c80){this['_updateSha'+'redOptions'](_0x62cc88,_0x141a63,_0x297707,_0x3036c9,_0x126f29),this['_updateMin'+'Options'](_0x62cc88,_0x297707,_0x126f29),this['_updateUVO'+'ptions'](_0x62cc88,_0x297707,_0x3036c9,!(0x83*0x11+-0x3f8+-0x4bb));}['updateRef'](_0x1dc4ff,_0x3ef9ce,_0x1ac3b5,_0x23ff66,_0x557e9b,_0x5a8e68,_0x21ae1a){this['_updateSha'+'redOptions'](_0x1dc4ff,_0x3ef9ce,_0x23ff66,_0x557e9b,_0x5a8e68),this['_updateEnv'+'Options'](_0x1dc4ff,_0x23ff66,_0x3ef9ce,_0x1ac3b5),this['_updateMat'+'erialOptio'+'ns'](_0x1dc4ff,_0x23ff66,_0x3ef9ce),_0x1dc4ff['litOptions']['hasTangent'+'s']=_0x557e9b&&(_0x557e9b&Op)!==0x1eef*0x1+0x2b6*0x5+-0x2c7d,this['_updateLig'+'htOptions'](_0x1dc4ff,_0x3ef9ce,_0x23ff66,_0x557e9b,_0x21ae1a),this['_updateUVO'+'ptions'](_0x1dc4ff,_0x23ff66,_0x557e9b,!(-0x1*0x195d+0x175*0xa+0x566*0x2),_0x1ac3b5);}['_updateSha'+'redOptions'](_0x200223,_0x56abae,_0x3125db,_0x5f91e0,_0x372bb7){_0x200223['forceUv1']=_0x3125db['forceUv1'],_0x3125db['userAttrib'+'utes']&&(_0x200223['litOptions']['userAttrib'+'utes']=Object['fromEntrie'+'s'](_0x3125db['userAttrib'+'utes']['entries']())),_0x200223['litOptions']['shaderChun'+'ks']=_0x3125db['shaderChun'+'ks'],_0x200223['litOptions']['pass']=_0x372bb7,_0x200223['litOptions']['alphaTest']=_0x3125db['alphaTest']>-0x138*-0x7+-0x5ee+0x9*-0x4a,_0x200223['litOptions']['blendType']=_0x3125db['blendType'],_0x200223['litOptions']['screenSpac'+'e']=_0x5f91e0&&(_0x5f91e0&sh)!==-0x1*-0x1529+-0x301*-0x2+-0x1b2b,_0x200223['litOptions']['skin']=_0x5f91e0&&(_0x5f91e0&qo)!==-0x25+0x1f5f+-0x1*0x1f3a,_0x200223['litOptions']['batch']=_0x5f91e0&&(_0x5f91e0&bc)!==0x1*0xcaf+0x35*0xd+0x7b0*-0x2,_0x200223['litOptions']['useInstanc'+'ing']=_0x5f91e0&&(_0x5f91e0&jo)!==-0x3af*-0x2+0x254c+-0x2caa,_0x200223['litOptions']['useMorphPo'+'sition']=_0x5f91e0&&(_0x5f91e0&Yo)!==-0x94a+0xb59+-0x20f,_0x200223['litOptions']['useMorphNo'+'rmal']=_0x5f91e0&&(_0x5f91e0&Ko)!==0x1c99+0x666+0x1f*-0x121,_0x200223['litOptions']['useMorphTe'+'xtureBased'+'Int']=_0x5f91e0&&(_0x5f91e0&Zo)!==0x229a*0x1+0x932+0x1*-0x2bcc,_0x200223['litOptions']['nineSliced'+'Mode']=_0x3125db['nineSliced'+'Mode']||-0x2255+-0x20c8*-0x1+0x18d,_0x56abae['clusteredL'+'ightingEna'+'bled']&&_0x3125db['useLightin'+'g']?(_0x200223['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0xf*-0x252+-0x1017+-0x12b7*0x1),_0x200223['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x56abae['lighting']['cookiesEna'+'bled'],_0x200223['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x56abae['lighting']['shadowsEna'+'bled'],_0x200223['litOptions']['clusteredL'+'ightingSha'+'dowType']=_0x56abae['lighting']['shadowType'],_0x200223['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x56abae['lighting']['areaLights'+'Enabled']):(_0x200223['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0x2*0x1f4+0x1*0xfcd+-0x1*0xbe4),_0x200223['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0x249a+-0x244f+0x48ea),_0x200223['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(-0xd78+-0x124a+0x1fc3),_0x200223['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(0x31+-0x220+0x1f0));}['_updateUVO'+'ptions'](_0x4b1a9d,_0x505476,_0x3b5548,_0x211787,_0x163ac7){let _0x1e21b8=!(0x25b+-0xe*-0x1f+0x2*-0x206),_0x296111=!(0x545*0x5+-0xdce+0x217*-0x6),_0x276396=!(-0xcc6+0x194*-0xe+0x22df);_0x3b5548&&(_0x1e21b8=(_0x3b5548&Rp)!==-0x3*0x4d6+-0x1e42+-0x3bb*-0xc,_0x296111=(_0x3b5548&My)!==-0xa*-0x137+-0x2*0xe1f+0x1018,_0x276396=(_0x3b5548&Dy)!==0x1c*-0x2+0x20f*0x1+-0x9d*0x3),_0x4b1a9d['litOptions']['vertexColo'+'rs']=!(-0x1*-0x71e+-0x1e*0x110+-0x18c3*-0x1),this['_mapXForms']=[];const _0x3c9082={};for(const _0x4b317d in Sn)this['_updateTex'+'Options'](_0x4b1a9d,_0x505476,_0x4b317d,_0x1e21b8,_0x296111,_0x276396,_0x211787,_0x3c9082);this['_mapXForms']=null,_0x4b1a9d['litOptions']['ssao']=_0x163ac7==null?void(-0x1628+0x121*-0xd+0x24d5):_0x163ac7['ssaoEnable'+'d'],_0x4b1a9d['useAO']=_0x4b1a9d['litOptions']['ssao'],_0x4b1a9d['litOptions']['lightMapEn'+'abled']=_0x4b1a9d['lightMap'],_0x4b1a9d['litOptions']['dirLightMa'+'pEnabled']=_0x4b1a9d['dirLightMa'+'p'],_0x4b1a9d['litOptions']['useHeights']=_0x4b1a9d['heightMap'],_0x4b1a9d['litOptions']['useNormals']=_0x4b1a9d['normalMap'],_0x4b1a9d['litOptions']['useClearCo'+'atNormals']=_0x4b1a9d['clearCoatN'+'ormalMap'],_0x4b1a9d['litOptions']['useAo']=_0x4b1a9d['aoMap']||_0x4b1a9d['aoVertexCo'+'lor']||_0x4b1a9d['litOptions']['ssao'],_0x4b1a9d['litOptions']['diffuseMap'+'Enabled']=_0x4b1a9d['diffuseMap'];}['_updateTex'+'Options'](_0x291988,_0x290229,_0x1170ba,_0x3ff9b8,_0x535af5,_0x4f2b66,_0x93159e,_0x2bd9b7){const _0x2d3270=_0x1170ba==='opacity';if(!_0x93159e||_0x2d3270){const _0x2c09cf=_0x1170ba+'Map',_0x1a4d12=_0x1170ba+('VertexColo'+'r'),_0x742372=_0x1170ba+('VertexColo'+'rChannel'),_0x1af30e=_0x2c09cf+'Channel',_0x12ae2b=_0x2c09cf+'Transform',_0x276931=_0x2c09cf+'Uv',_0x21948a=_0x2c09cf+'Identifier';if(_0x1170ba!=='light'&&(_0x291988[_0x2c09cf]=!(-0x13*-0x38+-0xf99+0xa*0x125),_0x291988[_0x21948a]=void(-0xf1*0x1+0x13b2+-0x12c1),_0x291988[_0x1af30e]='',_0x291988[_0x12ae2b]=-0x27b*0x4+0x15d+0x88f,_0x291988[_0x276931]=-0x26*-0x91+-0xd*-0xb2+0x6*-0x518),_0x291988[_0x1a4d12]=!(-0x1f46+-0x437*-0x7+0x1*0x1c6),_0x291988[_0x742372]='',_0x2d3270&&_0x290229['blendType']===Cs&&_0x290229['alphaTest']===-0x365*-0x1+-0x303+-0x62&&!_0x290229['alphaToCov'+'erage']&&_0x290229['opacityDit'+'her']===ua)return;if(_0x1170ba!=='height'&&_0x290229[_0x1a4d12]&&_0x4f2b66&&(_0x291988[_0x1a4d12]=_0x290229[_0x1a4d12],_0x291988[_0x742372]=_0x290229[_0x742372],_0x291988['litOptions']['vertexColo'+'rs']=!(0x2b*-0xda+0x26ac+0x20e*-0x1)),_0x290229[_0x2c09cf]){let _0x384fbf=!(0x1fbd+-0x1*-0x1fa5+0x356*-0x13);if(_0x290229[_0x276931]===0x28e+0x1190+-0x141e&&!_0x3ff9b8&&(_0x384fbf=!(0x1232*0x1+-0x2119+-0x6*-0x27c)),_0x290229[_0x276931]===-0xa6f+0x16b5+-0xc45&&!_0x535af5&&(_0x384fbf=!(-0xea2+-0x26bf+-0x1*-0x3562)),_0x384fbf){const _0x5a6047=_0x290229[_0x2c09cf]['id'];let _0x38217c=_0x2bd9b7[_0x5a6047];_0x38217c===void(-0x250f+-0x2*0x23b+0x2985)&&(_0x2bd9b7[_0x5a6047]=_0x1170ba,_0x38217c=_0x1170ba),_0x291988[_0x2c09cf]=!!_0x290229[_0x2c09cf],_0x291988[_0x21948a]=_0x38217c,_0x291988[_0x12ae2b]=this['_getMapTra'+'nsformID'](_0x290229['getUniform'](_0x12ae2b),_0x290229[_0x276931]),_0x291988[_0x1af30e]=_0x290229[_0x1af30e],_0x291988[_0x276931]=_0x290229[_0x276931];}}}}['_updateMin'+'Options'](_0x40c8b5,_0x1348ba,_0x1c85fa){const _0xfb1f47=_0x1c85fa===vl;_0x40c8b5['litOptions']['opacitySha'+'dowDither']=_0xfb1f47?_0x1348ba['opacityDit'+'her']:_0x1348ba['opacitySha'+'dowDither'],_0x40c8b5['litOptions']['linearDept'+'h']=_0xfb1f47,_0x40c8b5['litOptions']['lights']=[];}['_updateMat'+'erialOptio'+'ns'](_0x4ae3f5,_0xd5ae2f,_0x36a349){var _0x4415a6,_0x2c6129,_0x52c01f,_0x217985,_0x149462,_0xba4087;const _0x3cfb31=!!(_0xd5ae2f['useMetalne'+'ss']||_0xd5ae2f['specularMa'+'p']||_0xd5ae2f['sphereMap']||_0xd5ae2f['cubeMap']||RE(_0xd5ae2f['specular'])||_0xd5ae2f['specularit'+'yFactor']>0x14c*0x1c+-0x16b7+-0xd99*0x1&&_0xd5ae2f['useMetalne'+'ss']||_0xd5ae2f['enableGGXS'+'pecular']||_0xd5ae2f['clearCoat']>-0x1f59*0x1+-0xc7c+0x1*0x2bd5),_0x4a87ef=!_0xd5ae2f['useMetalne'+'ss']||_0xd5ae2f['useMetalne'+'ssSpecular'+'Color'],_0x57bf42=_0x3cfb31&&(_0xd5ae2f['specularTi'+'nt']||!_0xd5ae2f['specularMa'+'p']&&!_0xd5ae2f['specularVe'+'rtexColor'])&&LE(_0xd5ae2f['specular']),_0x20b5f4=_0x3cfb31&&_0xd5ae2f['useMetalne'+'ssSpecular'+'Color']&&(_0xd5ae2f['specularit'+'yFactorTin'+'t']||_0xd5ae2f['specularit'+'yFactor']<-0x1559+-0x244b+0x39a5&&!_0xd5ae2f['specularit'+'yFactorMap']),_0x161b92=_0x2116a3=>_0x2116a3?_0x2116a3['format']===ol||_0x2116a3['type']===zo:!(-0x198*-0xd+-0x2*-0x2fe+-0x1ab3),_0x14fd20=(_0x2b96bf,_0x4848aa)=>Math['abs'](_0x2b96bf-_0x4848aa)<0xf6e+-0x206a+0x10fc+0.0001;_0x4ae3f5['specularTi'+'nt']=_0x57bf42,_0x4ae3f5['specularit'+'yFactorTin'+'t']=_0x20b5f4,_0x4ae3f5['metalnessT'+'int']=_0xd5ae2f['useMetalne'+'ss']&&_0xd5ae2f['metalness']<0xe68+-0x2499+0x1632,_0x4ae3f5['glossTint']=!(-0x1295+0x512*-0x3+-0xd3*-0x29),_0x4ae3f5['diffuseEnc'+'oding']=(_0x4415a6=_0xd5ae2f['diffuseMap'])==null?void(-0xb*-0x10f+0x8*-0x3f7+0x1413):_0x4415a6['encoding'],_0x4ae3f5['diffuseDet'+'ailEncodin'+'g']=(_0x2c6129=_0xd5ae2f['diffuseDet'+'ailMap'])==null?void(-0x2074+-0xd63+0x2dd7):_0x2c6129['encoding'],_0x4ae3f5['emissiveEn'+'coding']=(_0x52c01f=_0xd5ae2f['emissiveMa'+'p'])==null?void(-0x29d+0x1db2+0x1b15*-0x1):_0x52c01f['encoding'],_0x4ae3f5['lightMapEn'+'coding']=(_0x217985=_0xd5ae2f['lightMap'])==null?void(0x2263*-0x1+0x11c2+-0x183*-0xb):_0x217985['encoding'],_0x4ae3f5['packedNorm'+'al']=_0x161b92(_0xd5ae2f['normalMap']),_0x4ae3f5['refraction'+'Tint']=_0x14fd20(_0xd5ae2f['refraction'],-0x26ce*-0x1+0x16fe+0x3dcb*-0x1),_0x4ae3f5['refraction'+'IndexTint']=_0x14fd20(_0xd5ae2f['refraction'+'Index'],(-0x133*0x14+0xa29*-0x3+-0x298*-0x15)/(-0x1181+-0x3df*0x4+0x20fe+0.5)),_0x4ae3f5['thicknessT'+'int']=_0xd5ae2f['useDynamic'+'Refraction']&&_0xd5ae2f['thickness']!==0x325+-0x1*0x113b+0x1*0xe17,_0x4ae3f5['specularEn'+'coding']=(_0x149462=_0xd5ae2f['specularMa'+'p'])==null?void(-0x111b*-0x1+-0x1*0x3ee+-0xd2d):_0x149462['encoding'],_0x4ae3f5['sheenEncod'+'ing']=(_0xba4087=_0xd5ae2f['sheenMap'])==null?void(-0x1*0x11ab+-0x136d*-0x1+0x96*-0x3):_0xba4087['encoding'],_0x4ae3f5['aoMapUv']=_0xd5ae2f['aoUvSet'],_0x4ae3f5['aoDetail']=!!_0xd5ae2f['aoDetailMa'+'p'],_0x4ae3f5['diffuseDet'+'ail']=!!_0xd5ae2f['diffuseDet'+'ailMap'],_0x4ae3f5['normalDeta'+'il']=!!_0xd5ae2f['normalMap'],_0x4ae3f5['normalDeta'+'ilPackedNo'+'rmal']=_0x161b92(_0xd5ae2f['normalDeta'+'ilMap']),_0x4ae3f5['diffuseDet'+'ailMode']=_0xd5ae2f['diffuseDet'+'ailMode'],_0x4ae3f5['aoDetailMo'+'de']=_0xd5ae2f['aoDetailMo'+'de'],_0x4ae3f5['clearCoatG'+'loss']=!!_0xd5ae2f['clearCoatG'+'loss'],_0x4ae3f5['clearCoatP'+'ackedNorma'+'l']=_0x161b92(_0xd5ae2f['clearCoatN'+'ormalMap']),_0x4ae3f5['iorTint']=_0x14fd20(_0xd5ae2f['refraction'+'Index'],(0xb83+-0x2146+-0x4*-0x571)/(-0x1e1b+-0x1064+0x7c0*0x6+0.5)),_0x36a349['forcePassT'+'hroughSpec'+'ular']&&(_0x4ae3f5['specularEn'+'coding']='linear',_0x4ae3f5['sheenEncod'+'ing']='linear'),_0x4ae3f5['iridescenc'+'eTint']=_0xd5ae2f['iridescenc'+'e']!==-0x9c2+0x1df5*-0x1+-0x13dc*-0x2,_0x4ae3f5['glossInver'+'t']=_0xd5ae2f['glossInver'+'t'],_0x4ae3f5['sheenGloss'+'Invert']=_0xd5ae2f['sheenGloss'+'Invert'],_0x4ae3f5['clearCoatG'+'lossInvert']=_0xd5ae2f['clearCoatG'+'lossInvert'],_0x4ae3f5['useSpecula'+'rColor']=_0x4a87ef,_0x4ae3f5['litOptions']['separateAm'+'bient']=!(-0x235b+0x10*0x3d+0x2*0xfc6),_0x4ae3f5['litOptions']['pixelSnap']=_0xd5ae2f['pixelSnap'],_0x4ae3f5['litOptions']['ambientSH']=!!_0xd5ae2f['ambientSH'],_0x4ae3f5['litOptions']['twoSidedLi'+'ghting']=_0xd5ae2f['twoSidedLi'+'ghting'],_0x4ae3f5['litOptions']['occludeSpe'+'cular']=_0xd5ae2f['occludeSpe'+'cular'],_0x4ae3f5['litOptions']['occludeSpe'+'cularFloat']=_0xd5ae2f['occludeSpe'+'cularInten'+'sity']!==0x3f*0x56+0x1cbc*-0x1+0x793,_0x4ae3f5['litOptions']['useMsdf']=!!_0xd5ae2f['msdfMap'],_0x4ae3f5['litOptions']['msdfTextAt'+'tribute']=!!_0xd5ae2f['msdfTextAt'+'tribute'],_0x4ae3f5['litOptions']['alphaToCov'+'erage']=_0xd5ae2f['alphaToCov'+'erage'],_0x4ae3f5['litOptions']['opacityFad'+'esSpecular']=_0xd5ae2f['opacityFad'+'esSpecular'],_0x4ae3f5['litOptions']['opacityDit'+'her']=_0xd5ae2f['opacityDit'+'her'],_0x4ae3f5['litOptions']['cubeMapPro'+'jection']=_0xd5ae2f['cubeMapPro'+'jection'],_0x4ae3f5['litOptions']['occludeDir'+'ect']=_0xd5ae2f['occludeDir'+'ect'],_0x4ae3f5['litOptions']['useSpecula'+'r']=_0x3cfb31,_0x4ae3f5['litOptions']['useSpecula'+'rityFactor']=(_0x20b5f4||!!_0xd5ae2f['specularit'+'yFactorMap'])&&_0xd5ae2f['useMetalne'+'ssSpecular'+'Color'],_0x4ae3f5['litOptions']['enableGGXS'+'pecular']=_0xd5ae2f['enableGGXS'+'pecular'],_0x4ae3f5['litOptions']['fresnelMod'+'el']=_0xd5ae2f['fresnelMod'+'el'],_0x4ae3f5['litOptions']['useRefract'+'ion']=(_0xd5ae2f['refraction']||!!_0xd5ae2f['refraction'+'Map'])&&(_0xd5ae2f['useDynamic'+'Refraction']||_0x4ae3f5['litOptions']['reflection'+'Source']!==_r),_0x4ae3f5['litOptions']['useClearCo'+'at']=!!_0xd5ae2f['clearCoat'],_0x4ae3f5['litOptions']['useSheen']=_0xd5ae2f['useSheen'],_0x4ae3f5['litOptions']['useIridesc'+'ence']=_0xd5ae2f['useIridesc'+'ence']&&_0xd5ae2f['iridescenc'+'e']!==0x1*-0xca+-0x12b*-0x1d+0x3ad*-0x9,_0x4ae3f5['litOptions']['useMetalne'+'ss']=_0xd5ae2f['useMetalne'+'ss'],_0x4ae3f5['litOptions']['useDynamic'+'Refraction']=_0xd5ae2f['useDynamic'+'Refraction'],_0x4ae3f5['litOptions']['dispersion']=_0xd5ae2f['dispersion']>0x12*-0x147+0x28*-0x6d+-0x2f*-0xda,_0x4ae3f5['litOptions']['shadowCatc'+'her']=_0xd5ae2f['shadowCatc'+'her'];}['_updateEnv'+'Options'](_0x323481,_0x10c331,_0x3b7ee8,_0x2ee15a){_0x323481['litOptions']['fog']=_0x10c331['useFog']?_0x2ee15a['fog']:Hn,_0x323481['litOptions']['gamma']=_0x2ee15a['shaderOutp'+'utGamma'],_0x323481['litOptions']['toneMap']=_0x10c331['useTonemap']?_0x2ee15a['toneMappin'+'g']:Ey;let _0x10eebc=!(-0x1dfe+0x2362+-0x563);if(_0x10c331['envAtlas']&&_0x10c331['cubeMap']?(_0x323481['litOptions']['reflection'+'Source']=Jc,_0x323481['litOptions']['reflection'+'Encoding']=_0x10c331['envAtlas']['encoding'],_0x323481['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x10c331['cubeMap']['encoding']):_0x10c331['envAtlas']?(_0x323481['litOptions']['reflection'+'Source']=Qc,_0x323481['litOptions']['reflection'+'Encoding']=_0x10c331['envAtlas']['encoding']):_0x10c331['cubeMap']?(_0x323481['litOptions']['reflection'+'Source']=eh,_0x323481['litOptions']['reflection'+'Encoding']=_0x10c331['cubeMap']['encoding']):_0x10c331['sphereMap']?(_0x323481['litOptions']['reflection'+'Source']=Py,_0x323481['litOptions']['reflection'+'Encoding']=_0x10c331['sphereMap']['encoding']):_0x10c331['useSkybox']&&_0x3b7ee8['envAtlas']&&_0x3b7ee8['skybox']?(_0x323481['litOptions']['reflection'+'Source']=Jc,_0x323481['litOptions']['reflection'+'Encoding']=_0x3b7ee8['envAtlas']['encoding'],_0x323481['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x3b7ee8['skybox']['encoding'],_0x10eebc=!(0x1006+-0x1a0d+0xa07)):_0x10c331['useSkybox']&&_0x3b7ee8['envAtlas']?(_0x323481['litOptions']['reflection'+'Source']=Qc,_0x323481['litOptions']['reflection'+'Encoding']=_0x3b7ee8['envAtlas']['encoding'],_0x10eebc=!(0x94*0x8+0x2*-0x5eb+0x736)):_0x10c331['useSkybox']&&_0x3b7ee8['skybox']?(_0x323481['litOptions']['reflection'+'Source']=eh,_0x323481['litOptions']['reflection'+'Encoding']=_0x3b7ee8['skybox']['encoding'],_0x10eebc=!(-0x555+-0x6be+0xc13)):(_0x323481['litOptions']['reflection'+'Source']=_r,_0x323481['litOptions']['reflection'+'Encoding']=null),_0x10c331['ambientSH'])_0x323481['litOptions']['ambientSou'+'rce']=Dp,_0x323481['litOptions']['ambientEnc'+'oding']=null;else{const _0x2253e7=_0x10c331['envAtlas']||(_0x10c331['useSkybox']&&_0x3b7ee8['envAtlas']?_0x3b7ee8['envAtlas']:null);_0x2253e7&&!_0x10c331['sphereMap']?(_0x323481['litOptions']['ambientSou'+'rce']=Ip,_0x323481['litOptions']['ambientEnc'+'oding']=_0x2253e7['encoding']):(_0x323481['litOptions']['ambientSou'+'rce']=Lp,_0x323481['litOptions']['ambientEnc'+'oding']=null);}_0x323481['litOptions']['skyboxInte'+'nsity']=_0x10eebc,_0x323481['litOptions']['useCubeMap'+'Rotation']=_0x10eebc&&_0x3b7ee8['_skyboxRot'+'ationShade'+'rInclude'];}['_updateLig'+'htOptions'](_0x2b6114,_0x564284,_0x1d07e5,_0x2075c5,_0x235b06){if(_0x2b6114['lightMap']=!(-0x1575*0x1+-0x2373+0x38e9),_0x2b6114['lightMapCh'+'annel']='',_0x2b6114['lightMapUv']=-0x29*-0x19+0x10*-0x13d+-0xd5*-0x13,_0x2b6114['lightMapTr'+'ansform']=0x5f8+-0x1*0x127d+0x281*0x5,_0x2b6114['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0xe1f+-0x1*0x8eb+0xb*-0x79),_0x2b6114['dirLightMa'+'p']=!(0x1518+0x179*0x7+0xfb3*-0x2),_0x2075c5&&(_0x2b6114['litOptions']['noShadow']=(_0x2075c5&th)!==-0x1cb5*0x1+-0x1116+0x2dcb,(_0x2075c5&Ff)!==-0x2228+0x13*0x11a+0xd3a&&(_0x2b6114['lightMapEn'+'coding']=_0x564284['lightmapPi'+'xelFormat']===Ne?'rgbm':'linear',_0x2b6114['lightMap']=!(0x1a68+-0x2c5*0x6+-0x2*0x4e5),_0x2b6114['lightMapCh'+'annel']='rgb',_0x2b6114['lightMapUv']=-0x18a*0x7+0x3*-0x8d1+-0xa*-0x3b9,_0x2b6114['lightMapTr'+'ansform']=-0x9*-0x107+0xacf+-0x140e,_0x2b6114['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!_0x1d07e5['lightMap'],(_0x2075c5&Iy)!==-0x1*-0x11ef+-0x1a1c+-0xd*-0xa1&&(_0x2b6114['dirLightMa'+'p']=!(0x2cb*-0x5+-0x6c9+0x14c0)),(_0x2075c5&Ly)!==0x7a0+0xa9e+0x5*-0x3a6&&(_0x2b6114['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x5de*-0x6+0x98c+-0x19a9*-0x1)))),_0x1d07e5['useLightin'+'g']){const _0x58859a=[],_0x6e6f7c=_0x2075c5?_0x2075c5>>-0x10da*-0x1+-0xfbb+-0x10f:Ss;_0x2b6114['litOptions']['lightMaskD'+'ynamic']=!!(_0x6e6f7c&Ss),_0x235b06&&(Hs['collectLig'+'hts'](ve,_0x235b06[ve],_0x58859a,_0x6e6f7c),_0x564284['clusteredL'+'ightingEna'+'bled']||(Hs['collectLig'+'hts'](Ke,_0x235b06[Ke],_0x58859a,_0x6e6f7c),Hs['collectLig'+'hts'](Ze,_0x235b06[Ze],_0x58859a,_0x6e6f7c))),_0x2b6114['litOptions']['lights']=_0x58859a;}else _0x2b6114['litOptions']['lights']=[];_0x2b6114['litOptions']['lights']['length']===-0xd*0x1c9+-0xbf9*-0x2+0x3f*-0x3&&!_0x564284['clusteredL'+'ightingEna'+'bled']&&(_0x2b6114['litOptions']['noShadow']=!(-0x199*-0x13+0x1733*-0x1+-0x728*0x1));}['_getMapTra'+'nsformID'](_0x270744,_0x3314a7){if(!_0x270744)return-0x23e9+-0x14*-0xac+-0x1679*-0x1;let _0x5559e7=this['_mapXForms'][_0x3314a7];_0x5559e7||(_0x5559e7=[],this['_mapXForms'][_0x3314a7]=_0x5559e7);for(let _0x3e7436=-0xba6+-0x907+0x14ad*0x1;_0x3e7436<_0x5559e7['length'];_0x3e7436++)if(u_(_0x5559e7[_0x3e7436][-0x1026+0x1b*0x155+0x13*-0x10b]['value'],_0x270744[0x69d*-0x1+-0x1fc0+-0xa1*-0x3d]['value'])&&u_(_0x5559e7[_0x3e7436][0x40f+-0x102*-0x7+-0x24*0x4f]['value'],_0x270744[0x4*0x303+-0x2*-0x1195+-0x2f35]['value']))return _0x3e7436+(0x10*0x211+0x2e7*0x3+-0x29c4);return _0x5559e7['push'](_0x270744);}}function rt(_0x4ae2c4,_0x31519a=!(0x1cd*0x5+-0x18b9+0xfb8),_0x16e2bc=!(-0x2*0x4d0+0x1*-0x2192+0x72*0x61)){const _0x4557bb={};return _0x4557bb[_0x4ae2c4+'Map']='texture',_0x4557bb[_0x4ae2c4+'MapTiling']='vec2',_0x4557bb[_0x4ae2c4+'MapOffset']='vec2',_0x4557bb[_0x4ae2c4+('MapRotatio'+'n')]='number',_0x4557bb[_0x4ae2c4+'MapUv']='number',_0x31519a&&(_0x4557bb[_0x4ae2c4+'MapChannel']='string',_0x16e2bc&&(_0x4557bb[_0x4ae2c4+('VertexColo'+'r')]='boolean',_0x4557bb[_0x4ae2c4+('VertexColo'+'rChannel')]='string')),_0x4557bb;}const Un={'name':'string','chunks':'chunks','mappingFormat':'string','_engine':'boolean','ambient':'rgb',...rt('ao'),...rt('aoDetail',!(-0x8df+-0x10d*0xa+0x1361),!(-0xfd9*-0x1+-0x16d+-0xe6b)),'aoDetailMode':'string','aoIntensity':'number','diffuse':'rgb',...rt('diffuse'),...rt('diffuseDet'+'ail',!(0x2216+0x3*-0x728+-0xc9e),!(-0x148*0x3+-0x1d*-0xf4+-0x17cb)),'diffuseDetailMode':'string','specular':'rgb','specularTint':'boolean',...rt('specular'),'occludeSpecular':'enum:occlu'+'deSpecular','specularityFactor':'number','specularityFactorTint':'boolean',...rt('specularit'+'yFactor'),'useMetalness':'boolean','metalness':'number','enableGGXSpecular':'boolean','metalnessTint':'boolean',...rt('metalness'),'useMetalnessSpecularColor':'boolean','anisotropyIntensity':'number','anisotropyRotation':'number',...rt('anisotropy'),'shininess':'number','gloss':'number','glossInvert':'boolean',...rt('gloss'),'clearCoat':'number',...rt('clearCoat'),'clearCoatGloss':'number','clearCoatGlossInvert':'boolean',...rt('clearCoatG'+'loss'),'clearCoatBumpiness':'number',...rt('clearCoatN'+'ormal',!(0x1be4+-0xd*-0x115+-0x864*0x5)),'useSheen':'boolean','sheen':'rgb',...rt('sheen'),'sheenGloss':'number','sheenGlossInvert':'boolean',...rt('sheenGloss'),'fresnelModel':'number','emissive':'rgb',...rt('emissive'),'emissiveIntensity':'number',...rt('normal',!(-0x1a07+0x1eac+-0x1*0x4a4)),'bumpiness':'number',...rt('normalDeta'+'il',!(-0x9*-0x33d+0x752*0x4+-0x3a6c)),'normalDetailMapBumpiness':'number',...rt('height',!(-0x10a5+-0xc4f+-0x6d*-0x44),!(0x1*0x1417+-0xef8*0x2+0x9da)),'heightMapFactor':'number','alphaToCoverage':'boolean','alphaTest':'number','alphaFade':'number','opacity':'number',...rt('opacity'),'opacityFadesSpecular':'boolean','opacityDither':'string','opacityShadowDither':'string','reflectivity':'number','refraction':'number','refractionTint':'boolean',...rt('refraction'),'refractionIndex':'number','dispersion':'number','thickness':'number','thicknessTint':'boolean',...rt('thickness'),'attenuation':'rgb','attenuationDistance':'number','useDynamicRefraction':'boolean','sphereMap':'texture','cubeMap':'cubemap','cubeMapProjection':'number','cubeMapProjectionBox':'boundingbo'+'x','useIridescence':'boolean','iridescence':'number','iridescenceTint':'boolean',...rt('iridescenc'+'e'),'iridescenceThicknessTint':'boolean','iridescenceThicknessMin':'number','iridescenceThicknessMax':'number','iridescenceRefractionIndex':'number',...rt('iridescenc'+'eThickness'),...rt('light'),'depthTest':'boolean','depthFunc':'enum:depth'+'Func','depthWrite':'boolean','depthBias':'number','slopeDepthBias':'number','cull':'enum:cull','blendType':'enum:blend'+'Type','useFog':'boolean','useLighting':'boolean','useSkybox':'boolean','useTonemap':'boolean','envAtlas':'texture','twoSidedLighting':'boolean','shadowCatcher':'boolean'},ad=[];for(const l in Un)Un[l]==='texture'&&ad['push'](l);const Bp=[];for(const l in Un)Un[l]==='cubemap'&&Bp['push'](l);const FE={'aoMapVertexColor':'boolean','diffuseMapTint':'boolean','diffuseMapVertexColor':'boolean','emissiveMapTint':'boolean','emissiveMapVertexColor':'boolean','glossMapVertexColor':'boolean','metalnessMapVertexColor':'boolean','opacityMapVertexColor':'boolean','specularAntialias':'boolean','specularMapTint':'boolean','specularMapVertexColor':'boolean','ambientTint':'boolean','emissiveTint':'boolean','diffuseTint':'boolean','sheenTint':'boolean','conserveEnergy':'boolean','useGamma':'boolean','useGammaTonemap':'boolean','sheenGlossTint':'boolean','anisotropy':'boolean'},Pc={},Hy={};let Jn=new Set();const ql=new ie();class Ut extends er{constructor(){super(),h(this,'userAttrib'+'utes',new Map()),h(this,'onUpdateSh'+'ader'),(this['_assetRefe'+'rences']={},this['_activePar'+'ams']=new Set(),this['_activeLig'+'htingParam'+'s']=new Set(),this['shaderOptB'+'uilder']=new OE(),this['reset']());}['reset'](){Object['keys'](Pc)['forEach'](_0x250cef=>{this['_'+_0x250cef]=Pc[_0x250cef]['value']();}),this['_uniformCa'+'che']={};}['copy'](_0x198691){return super['copy'](_0x198691),Object['keys'](Pc)['forEach'](_0xb2afc6=>{this[_0xb2afc6]=_0x198691[_0xb2afc6];}),this['userAttrib'+'utes']=new Map(_0x198691['userAttrib'+'utes']),this;}['setAttribu'+'te'](_0x354db8,_0x407cd4){this['userAttrib'+'utes']['set'](_0x407cd4,_0x354db8);}['_setParame'+'ter'](_0x4c7cea,_0x45c936){Jn['add'](_0x4c7cea),this['setParamet'+'er'](_0x4c7cea,_0x45c936);}['_setParame'+'ters'](_0x409755){_0x409755['forEach'](_0x121a6d=>{this['_setParame'+'ter'](_0x121a6d['name'],_0x121a6d['value']);});}['_processPa'+'rameters'](_0x54a763){const _0x538476=this[_0x54a763];_0x538476['forEach'](_0x3c168e=>{Jn['has'](_0x3c168e)||delete this['parameters'][_0x3c168e];}),this[_0x54a763]=Jn,Jn=_0x538476,Jn['clear']();}['_updateMap'](_0x4eaa69){const _0x15fc56=_0x4eaa69+'Map',_0x1aa03b=this[_0x15fc56];if(_0x1aa03b){this['_setParame'+'ter']('texture_'+_0x15fc56,_0x1aa03b);const _0x1924d8=_0x15fc56+'Transform',_0x4ae926=this['getUniform'](_0x1924d8);_0x4ae926&&this['_setParame'+'ters'](_0x4ae926);}}['_allocUnif'+'orm'](_0x4811d9,_0x1287e1){let _0x123382=this['_uniformCa'+'che'][_0x4811d9];return _0x123382||(_0x123382=_0x1287e1(),this['_uniformCa'+'che'][_0x4811d9]=_0x123382),_0x123382;}['getUniform'](_0x46ce1b,_0x3bb4fa,_0x3e4354){return Hy[_0x46ce1b](this,_0x3bb4fa,_0x3e4354);}['updateUnif'+'orms'](_0x4826f5,_0x480dbf){const _0x1eb832=_0x5c158c=>this['getUniform'](_0x5c158c,_0x4826f5,_0x480dbf);this['_setParame'+'ter']('material_a'+'mbient',_0x1eb832('ambient')),this['_setParame'+'ter']('material_d'+'iffuse',_0x1eb832('diffuse')),this['_setParame'+'ter']('material_a'+'oIntensity',this['aoIntensit'+'y']),this['useMetalne'+'ss']?((!this['metalnessM'+'ap']||this['metalness']<0xe6e*-0x2+0x159f+0x1*0x73e)&&this['_setParame'+'ter']('material_m'+'etalness',this['metalness']),(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x1eb832('specular')),(!this['specularit'+'yFactorMap']||this['specularit'+'yFactorTin'+'t'])&&this['_setParame'+'ter']('material_s'+'pecularity'+'Factor',this['specularit'+'yFactor']),this['_setParame'+'ter']('material_s'+'heen',_0x1eb832('sheen')),this['_setParame'+'ter']('material_s'+'heenGloss',this['sheenGloss']),this['_setParame'+'ter']('material_r'+'efractionI'+'ndex',this['refraction'+'Index'])):(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x1eb832('specular')),this['enableGGXS'+'pecular']&&(this['_setParame'+'ter']('material_a'+'nisotropyI'+'ntensity',this['anisotropy'+'Intensity']),this['_setParame'+'ter']('material_a'+'nisotropyR'+'otation',[Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']),Math['sin'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD'])])),this['clearCoat']>0x39*0x97+-0x658+-0x1b47&&(this['_setParame'+'ter']('material_c'+'learCoat',this['clearCoat']),this['_setParame'+'ter']('material_c'+'learCoatGl'+'oss',this['clearCoatG'+'loss']),this['_setParame'+'ter']('material_c'+'learCoatBu'+'mpiness',this['clearCoatB'+'umpiness'])),this['_setParame'+'ter']('material_g'+'loss',this['gloss']),w['call'](()=>{this['emissiveMa'+'p']&&this['emissive']['r']===0x101c+-0x477+-0xba5&&this['emissive']['g']===0x2287*-0x1+0x12df+0x8*0x1f5&&this['emissive']['b']===-0x11*0x3e+0xd7c*-0x1+0x119a&&w['warnOnce']('Emissive\x20m'+'ap\x20is\x20set\x20'+'but\x20emissi'+'ve\x20color\x20i'+'s\x20black,\x20m'+'aking\x20the\x20'+'map\x20invisi'+'ble.\x20Set\x20e'+'missive\x20co'+'lor\x20to\x20whi'+'te\x20to\x20make'+'\x20the\x20map\x20v'+'isible.\x20Re'+'ndering\x20['+Q['toString']()+']',this);}),this['_setParame'+'ter']('material_e'+'missive',_0x1eb832('emissive')),this['_setParame'+'ter']('material_e'+'missiveInt'+'ensity',this['emissiveIn'+'tensity']),this['refraction']>0x1a6*0xd+-0x2*-0x32f+0x4*-0x6f3&&this['_setParame'+'ter']('material_r'+'efraction',this['refraction']),this['dispersion']>-0xdcd*0x1+0x904*-0x4+-0xf*-0x353&&this['_setParame'+'ter']('material_d'+'ispersion',this['dispersion']),this['useDynamic'+'Refraction']&&(this['_setParame'+'ter']('material_t'+'hickness',this['thickness']),this['_setParame'+'ter']('material_a'+'ttenuation',_0x1eb832('attenuatio'+'n')),this['_setParame'+'ter']('material_i'+'nvAttenuat'+'ionDistanc'+'e',this['attenuatio'+'nDistance']===0x14f*0x19+-0x37b*0x6+0xe9*-0xd?-0x23bf+0x18ac+-0x3b1*-0x3:(-0x1*0x210a+0x1*0x12c1+0xe4a)/this['attenuatio'+'nDistance'])),this['useIridesc'+'ence']&&(this['_setParame'+'ter']('material_i'+'ridescence',this['iridescenc'+'e']),this['_setParame'+'ter']('material_i'+'ridescence'+'Refraction'+'Index',this['iridescenc'+'eRefractio'+'nIndex']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'in',this['iridescenc'+'eThickness'+'Min']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'ax',this['iridescenc'+'eThickness'+'Max'])),this['_setParame'+'ter']('material_o'+'pacity',this['opacity']),this['opacityFad'+'esSpecular']===!(-0x3e6*0x3+0x17e1+-0x2*0x617)&&this['_setParame'+'ter']('material_a'+'lphaFade',this['alphaFade']),this['occludeSpe'+'cular']&&this['_setParame'+'ter']('material_o'+'ccludeSpec'+'ularIntens'+'ity',this['occludeSpe'+'cularInten'+'sity']),this['cubeMapPro'+'jection']===wy&&this['_setParame'+'ter'](_0x1eb832('cubeMapPro'+'jectionBox'));for(const _0x2ffcbf in Sn)this['_updateMap'](_0x2ffcbf);this['ambientSH']&&this['_setParame'+'ter']('ambientSH['+'0]',this['ambientSH']),this['normalMap']&&this['_setParame'+'ter']('material_b'+'umpiness',this['bumpiness']),this['normalMap']&&this['normalDeta'+'ilMap']&&this['_setParame'+'ter']('material_n'+'ormalDetai'+'lMapBumpin'+'ess',this['normalDeta'+'ilMapBumpi'+'ness']),this['heightMap']&&this['_setParame'+'ter']('material_h'+'eightMapFa'+'ctor',_0x1eb832('heightMapF'+'actor')),this['envAtlas']&&this['cubeMap']?(this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap'])):this['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']):this['cubeMap']?this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap']):this['sphereMap']&&this['_setParame'+'ter']('texture_sp'+'hereMap',this['sphereMap']),this['_setParame'+'ter']('material_r'+'eflectivit'+'y',this['reflectivi'+'ty']),this['_processPa'+'rameters']('_activePar'+'ams'),super['updateUnif'+'orms'](_0x4826f5,_0x480dbf);}['updateEnvU'+'niforms'](_0x299c81,_0xed8503){!(this['envAtlas']||this['cubeMap']||this['sphereMap'])&&this['useSkybox']&&(_0xed8503['envAtlas']&&_0xed8503['skybox']?(this['_setParame'+'ter']('texture_en'+'vAtlas',_0xed8503['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',_0xed8503['skybox'])):_0xed8503['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',_0xed8503['envAtlas']):_0xed8503['skybox']&&this['_setParame'+'ter']('texture_cu'+'beMap',_0xed8503['skybox'])),this['_processPa'+'rameters']('_activeLig'+'htingParam'+'s');}['getShaderV'+'ariant'](_0x234fce){const {device:_0x22164a,scene:_0x5977b7,pass:_0x24e6ad,objDefs:_0x46f5bb,sortedLights:_0x339c34,cameraShaderParams:_0x151885}=_0x234fce;this['updateEnvU'+'niforms'](_0x22164a,_0x5977b7);const _0x154ee7=Si['get'](_0x22164a)['getByIndex'](_0x24e6ad),_0x41f944=_0x24e6ad===Wn||_0x24e6ad===vl||_0x154ee7['isShadow'];let _0x477655=_0x41f944?Id['optionsCon'+'textMin']:Id['optionsCon'+'text'];_0x477655['defines']=$t['getCoreDef'+'ines'](this,_0x234fce),_0x41f944?this['shaderOptB'+'uilder']['updateMinR'+'ef'](_0x477655,_0x5977b7,this,_0x46f5bb,_0x24e6ad,_0x339c34):this['shaderOptB'+'uilder']['updateRef'](_0x477655,_0x5977b7,_0x151885,this,_0x46f5bb,_0x24e6ad,_0x339c34),this['useFog']||_0x477655['defines']['set']('FOG','NONE'),_0x477655['defines']['set']('TONEMAP',by[_0x477655['litOptions']['toneMap']]),this['onUpdateSh'+'ader']&&(_0x477655=this['onUpdateSh'+'ader'](_0x477655));const _0x45b58a=new rd(_0x234fce['viewUnifor'+'mFormat'],_0x234fce['viewBindGr'+'oupFormat'],_0x234fce['vertexForm'+'at']),_0x529361=Nn(_0x22164a);_0x529361['register']('standard',Id);const _0x15e8d7=_0x529361['getProgram']('standard',_0x477655,_0x45b58a,this['userId']);return this['_dirtyShad'+'er']=!(0xbf*0x1+-0x1f5b+0x1e9d),_0x15e8d7;}['destroy'](){for(const _0x15059c in this['_assetRefe'+'rences'])this['_assetRefe'+'rences'][_0x15059c]['_unbind']();this['_assetRefe'+'rences']=null,super['destroy']();}}h(Ut,'TEXTURE_PA'+'RAMETERS',ad),h(Ut,'CUBEMAP_PA'+'RAMETERS',Bp);const nd=(_0x5860bc,_0x46b246)=>{Hy[_0x5860bc]=_0x46b246;},zp=(_0x2054ea,_0x5d0956,_0x784417,_0x4ef2ae)=>{Object['defineProp'+'erty'](Ut['prototype'],_0x2054ea,{'get':_0x4ef2ae||function(){return this['_'+_0x2054ea];},'set':_0x784417}),Pc[_0x2054ea]={'value':_0x5d0956};},NE=_0x1c9401=>{const _0x155aac='_'+_0x1c9401['name'],_0x443b58=_0x1c9401['dirtyShade'+'rFunc']||(()=>!(-0x89*0x16+0x13f*0x8+-0x4d*-0x6)),_0x2bac74=function(_0xfff81e){const _0xa586c2=this[_0x155aac];_0xa586c2!==_0xfff81e&&(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x443b58(_0xa586c2,_0xfff81e),this[_0x155aac]=_0xfff81e);};zp(_0x1c9401['name'],()=>_0x1c9401['defaultVal'+'ue'],_0x2bac74,_0x1c9401['getterFunc']);},kE=_0x2aefb4=>{const _0x70d437='_'+_0x2aefb4['name'],_0x5c7b16=_0x2aefb4['dirtyShade'+'rFunc']||(()=>!(0x2f*0x98+-0x294+-0x1954)),_0x1caceb=function(_0x11e536){const _0x38e262=this[_0x70d437];_0x38e262['equals'](_0x11e536)||(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x5c7b16(_0x38e262,_0x11e536),this[_0x70d437]=_0x38e262['copy'](_0x11e536));};zp(_0x2aefb4['name'],()=>_0x2aefb4['defaultVal'+'ue']['clone'](),_0x1caceb,_0x2aefb4['getterFunc']);},Es=_0x3e2899=>_0x3e2899['defaultVal'+'ue']&&_0x3e2899['defaultVal'+'ue']['clone']?kE(_0x3e2899):NE(_0x3e2899);function et(_0x5f4858,_0x13e2a4='rgb',_0x57eb94=!(0x88d+-0xa*0x3b6+0x1c8f),_0x497496=0x48*0xf+-0x1*-0x26a+0x6a2*-0x1){Sn[_0x5f4858]=_0x13e2a4['length']||-(0x82*0xa+-0x27*0x71+0x206*0x6),Es({'name':_0x5f4858+'Map','defaultValue':null,'dirtyShaderFunc':(_0x354b38,_0x1991fb)=>!!_0x354b38!=!!_0x1991fb||_0x354b38&&(_0x354b38['type']!==_0x1991fb['type']||_0x354b38['format']!==_0x1991fb['format'])}),Es({'name':_0x5f4858+'MapTiling','defaultValue':new J(-0x1*-0x130d+0x1*-0x1e1d+0xb11*0x1,0x1*-0x2e6+0x4*-0x981+0x28eb*0x1)}),Es({'name':_0x5f4858+'MapOffset','defaultValue':new J(-0x1*0xae2+-0x1*-0x1fcb+-0x14e9*0x1,0x1521+-0x5*-0x1eb+-0x1eb8)}),Es({'name':_0x5f4858+('MapRotatio'+'n'),'defaultValue':0x0}),Es({'name':_0x5f4858+'MapUv','defaultValue':_0x497496}),_0x13e2a4&&(Es({'name':_0x5f4858+'MapChannel','defaultValue':_0x13e2a4}),_0x57eb94&&(Es({'name':_0x5f4858+('VertexColo'+'r'),'defaultValue':!(-0x25ba+0x12ef+0x12cc)}),Es({'name':_0x5f4858+('VertexColo'+'rChannel'),'defaultValue':_0x13e2a4})));const _0x5ad0a7=_0x5f4858+'MapTiling',_0xb35cfd=_0x5f4858+'MapOffset',_0x8797ce=_0x5f4858+('MapRotatio'+'n'),_0x454396=_0x5f4858+('MapTransfo'+'rm');nd(_0x454396,(_0x3ce7a0,_0xb7db80,_0x34f620)=>{const _0x4a4220=_0x3ce7a0[_0x5ad0a7],_0x198882=_0x3ce7a0[_0xb35cfd],_0xa509c9=_0x3ce7a0[_0x8797ce];if(_0x4a4220['x']===0x13bd+0x3*0x2e4+-0x1c68&&_0x4a4220['y']===0x1*-0x301+0x1f3*-0x13+0xc9*0x33&&_0x198882['x']===-0x1807+-0x2597+0x3d9e&&_0x198882['y']===0x13ff*0x1+-0x1*0x18eb+0x4ec&&_0xa509c9===0x14ec+-0xf78+0x1*-0x574)return null;const _0x3921ec=_0x3ce7a0['_allocUnif'+'orm'](_0x454396,()=>[{'name':'texture_'+_0x454396+'0','value':new Float32Array(-0x2150+-0xc46+0x2d99)},{'name':'texture_'+_0x454396+'1','value':new Float32Array(0xd*0x274+0x1*-0x2302+0x321)}]),_0xe835e6=Math['cos'](_0xa509c9*Y['DEG_TO_RAD']),_0x49314b=Math['sin'](_0xa509c9*Y['DEG_TO_RAD']),_0x57e024=_0x3921ec[0x7*-0x42d+0xb54+0x11e7]['value'];_0x57e024[-0x99f+-0xb4a+0x65*0x35]=_0xe835e6*_0x4a4220['x'],_0x57e024[0x1*-0x21cb+0x57d+0x1c4f]=-_0x49314b*_0x4a4220['y'],_0x57e024[0x1b1+-0x1*-0x873+-0x1*0xa22]=_0x198882['x'];const _0x509cfd=_0x3921ec[0x13ce+-0x14d8+-0x3*-0x59]['value'];return _0x509cfd[0x1*0x1707+-0x144d+-0x1*0x2ba]=_0x49314b*_0x4a4220['x'],_0x509cfd[-0xf55+-0xc62+0x4*0x6ee]=_0xe835e6*_0x4a4220['y'],_0x509cfd[0x4db+0x17a5*-0x1+0x12cc]=-0x19a0+0x423+0x157e-_0x4a4220['y']-_0x198882['y'],_0x3921ec;});}function Pa(_0x15453b,_0x5d2390){Es({'name':_0x15453b,'defaultValue':_0x5d2390,'getterFunc':function(){return this['_dirtyShad'+'er']=!(0x1fa4+-0x13*-0x18b+-0x3cf5),this['_'+_0x15453b];}}),nd(_0x15453b,(_0x3b5c5c,_0x2f538c,_0x4e971a)=>{const _0x1e7168=_0x3b5c5c['_allocUnif'+'orm'](_0x15453b,()=>new Float32Array(-0x2195*0x1+-0x841+0x29d9)),_0x341c46=_0x3b5c5c[_0x15453b];return ql['linear'](_0x341c46),_0x1e7168[-0x1*-0x1b46+-0x7*-0x59+0xc3*-0x27]=ql['r'],_0x1e7168[0xc56+-0x1*0x26dd+0xd44*0x2]=ql['g'],_0x1e7168[0x177c+0x1540+-0x479*0xa]=ql['b'],_0x1e7168;});}function ze(_0x3cd69d,_0x2b4dcd,_0x4ac461){Es({'name':_0x3cd69d,'defaultValue':_0x2b4dcd,'dirtyShaderFunc':(_0x5222e4,_0x308060)=>(_0x5222e4===0x131c*0x1+-0x2686+0x136a||_0x5222e4===0x1*0x19f3+-0x9cf+-0x1023)!=(_0x308060===-0x18bb+0x12d2+0x59*0x11||_0x308060===0x205a+-0x85c+-0x17fd)}),nd(_0x3cd69d,_0x4ac461);}function eo(_0x576d75,_0x230af6){Es({'name':_0x576d75,'defaultValue':null,'dirtyShaderFunc':(_0x45a4b6,_0x3616cd)=>!!_0x45a4b6==!!_0x3616cd}),nd(_0x576d75,_0x230af6);}function ke(_0x2e0469,_0x3381fe){Es({'name':_0x2e0469,'defaultValue':_0x3381fe});}function UE(){Pa('ambient',new ie(0x22ec+-0x1*-0x2611+-0x48fc,-0x404*0x7+0x17bc+0x1*0x461,-0x1e72+-0x2217+0x408a)),Pa('diffuse',new ie(-0x1981+-0x16f+0x1af1,-0x9fd+0x108f+-0x691,-0x199f+0x9*-0xab+0x1fa3)),Pa('specular',new ie(-0xc95+-0x272+0xf07,0x7e5*-0x1+0x1158+-0x973,0x24aa+0xdf9*-0x2+-0x8b8)),Pa('emissive',new ie(-0x1dbe+-0x23b7+0x1*0x4175,-0xa8*-0x31+0x206*0x7+-0x2e52,-0x11*-0x115+0xb29+-0x6*0x4ed)),Pa('sheen',new ie(0x2097*0x1+0x1fb3+0x1*-0x4049,-0x80*0x2f+0x2318+-0xb97,0x827+-0x1d69*0x1+-0x1543*-0x1)),Pa('attenuatio'+'n',new ie(-0xce5+0x204f+-0x1*0x1369,0x3*-0x99b+-0x5d*-0xb+0x1f*0xcd,0x25a5+0x624+-0x2bc8)),ze('emissiveIn'+'tensity',-0x9*-0x25b+-0xc*0x1ab+-0x12e),ze('specularit'+'yFactor',0x16a0+-0x12ef+-0x3b0),ze('sheenGloss',0x1a6*-0x17+0x1047*0x2+0x55c*0x1),ze('gloss',0x174c+0x1461+-0x3*0xe8f+0.25),ze('aoIntensit'+'y',-0x1828+0x10f8+0x731),ze('heightMapF'+'actor',-0x109*-0xf+-0x934*0x3+0x2*0x60b,(_0x150271,_0x47d8e4,_0x49478f)=>_0x150271['heightMapF'+'actor']*(-0x281*-0x1+-0x1fef+-0x1*-0x1d6e+0.025)),ze('opacity',-0x19*0x144+0x3*-0x211+0x25d8),ze('alphaFade',0x1260+-0x2327*0x1+0x10c8),ze('alphaTest',0xf43+0x46*-0x70+0xf5d),ze('bumpiness',0x1f50+0x1bc7+-0x3b16),ze('normalDeta'+'ilMapBumpi'+'ness',-0xfed+-0x2699+-0x2f*-0x129),ze('reflectivi'+'ty',0x11e2+0x3*-0xb+-0x47*0x40),ze('occludeSpe'+'cularInten'+'sity',-0xe5d*-0x1+0x21e1+-0x35*0xe9),ze('refraction',0x1*-0x18f9+-0x23a1+0x3c9a),ze('refraction'+'Index',(0x11a4+0x609+-0x17ac)/(-0xc*0x2bf+-0x21fe+0x42f3+0.5)),ze('dispersion',-0x3c7*0x1+-0x7*-0x1e1+0xf*-0xa0),ze('thickness',0xb*0x1ca+0x724+-0xd69*0x2),ze('attenuatio'+'nDistance',0x22ff*0x1+-0x1b4d+-0x7b2),ze('metalness',-0xb5*0xd+0x1adf+-0x11ad),ze('anisotropy'+'Intensity',-0x36c+0x2*0x2d4+-0x23c*0x1),ze('anisotropy'+'Rotation',-0xe9*0x5+0x1*0x1016+-0xb89),ze('clearCoat',-0x146a+0x1139*-0x1+0x5*0x787),ze('clearCoatG'+'loss',-0xb42+0xbb6+-0x1*0x73),ze('clearCoatB'+'umpiness',-0x2*0x83+0x2230+-0x2129),ze('aoUvSet',-0x1f50+-0x4b3+-0xc01*-0x3,null),ze('iridescenc'+'e',-0x53f+0x201c+-0x1add),ze('iridescenc'+'eRefractio'+'nIndex',(-0x6a*0x5+-0x8f7*0x4+0x25ef)/(-0x20b0+-0x3*0x429+0x2d2c+0.5)),ze('iridescenc'+'eThickness'+'Min',0x9c*-0x8+-0x15*-0x161+-0x1815),ze('iridescenc'+'eThickness'+'Max',-0x636+-0x1eaa+0x24e0*0x1),eo('ambientSH'),eo('cubeMapPro'+'jectionBox',(_0x6fb0d1,_0x24aa24,_0x28056e)=>{const _0x4e1580=_0x6fb0d1['_allocUnif'+'orm']('cubeMapPro'+'jectionBox',()=>[{'name':'envBoxMin','value':new Float32Array(0x1781+0xf30+0x1*-0x26ae)},{'name':'envBoxMax','value':new Float32Array(-0x44e*-0x5+-0xdcf+-0x7b4)}]),_0x2cdb52=_0x6fb0d1['cubeMapPro'+'jectionBox']['getMin'](),_0x3243f2=_0x4e1580[0xbb7*0x3+-0x3*0x16f+-0x1c*0x11a]['value'];_0x3243f2[0xd*0xb9+0x459*0x2+-0x1*0x1217]=_0x2cdb52['x'],_0x3243f2[0x16fc+-0x4a+-0x16b1]=_0x2cdb52['y'],_0x3243f2[0xe8d*0x1+0x1*-0x1fed+-0x5*-0x37a]=_0x2cdb52['z'];const _0x3f1002=_0x6fb0d1['cubeMapPro'+'jectionBox']['getMax'](),_0x132676=_0x4e1580[0xf3+-0x5e3+0x4f1]['value'];return _0x132676[-0x50*0x5e+0x1*0x17ab+-0x1e7*-0x3]=_0x3f1002['x'],_0x132676[0x1ef4+-0x16d1+-0x822]=_0x3f1002['y'],_0x132676[0x194+-0xee*0x2a+0x9*0x42a]=_0x3f1002['z'],_0x4e1580;}),ke('specularTi'+'nt',!(-0x382+0x25d9+-0x6de*0x5)),ke('specularit'+'yFactorTin'+'t',!(-0x126*0x2+-0x23d0+0xb*0x377)),ke('useMetalne'+'ss',!(0x18db+0xd*-0x3+-0x18b3)),ke('useMetalne'+'ssSpecular'+'Color',!(0x1*-0x53+0x1e09+-0x1db5)),ke('useSheen',!(-0x1daf+-0x5*-0x4f1+-0xff*-0x5)),ke('enableGGXS'+'pecular',!(-0x659*0x5+0x18*0x71+0x2*0xa93)),ke('occludeDir'+'ect',!(-0x1*-0x13ca+-0x3*-0xbc6+0x371b*-0x1)),ke('opacityFad'+'esSpecular',!(-0x12da*-0x1+-0x1*-0x1418+0x1379*-0x2)),ke('occludeSpe'+'cular',id),ke('fresnelMod'+'el',Tp),ke('useDynamic'+'Refraction',!(0x6*0x4b8+0x21*-0x46+0x1349*-0x1)),ke('cubeMapPro'+'jection',Pp),ke('useFog',!(0x1*-0x25a5+-0xd6*0x25+0x4493)),ke('useLightin'+'g',!(0x1*-0x1521+-0x1256+0x2777*0x1)),ke('useTonemap',!(-0x69*0x4c+-0xe5f*-0x1+0x10cd)),ke('useSkybox',!(0x236+-0x1dc1*0x1+-0x281*-0xb)),ke('forceUv1',!(0x20d0+0x28a*-0xb+-0x4e1)),ke('pixelSnap',!(0x313*-0x8+0x1405+-0x125*-0x4)),ke('twoSidedLi'+'ghting',!(-0x17e*-0x7+-0x137b+0x90a)),ke('nineSliced'+'Mode',void(0x2a0+0x1*-0x1c9f+0x19ff)),ke('msdfTextAt'+'tribute',!(0x1a6d+-0x2140*-0x1+0x4c*-0xc9)),ke('useIridesc'+'ence',!(-0xd*0x1fc+-0x2677+0x2022*0x2)),ke('glossInver'+'t',!(0x257d+-0x23a3*0x1+-0x1d9)),ke('sheenGloss'+'Invert',!(0x422+0x1535+-0x2e*0x8d)),ke('clearCoatG'+'lossInvert',!(-0x959*-0x3+0xd*0xe9+-0x27df)),ke('opacityDit'+'her',ua),ke('opacitySha'+'dowDither',ua),ke('shadowCatc'+'her',!(-0xace*0x2+-0x6*-0x440+-0x3e3)),et('diffuse'),et('specular'),et('emissive'),et('thickness','g'),et('specularit'+'yFactor','g'),et('normal',''),et('metalness','g'),et('gloss','g'),et('opacity','a'),et('refraction','g'),et('height','g',!(-0x49*0x71+-0x22b3+-0x1*-0x42ed)),et('ao','g'),et('light','rgb',!(-0x210b+0xb80+0x158b),0x6d*-0xb+0xa*0x12f+-0x726),et('msdf',''),et('diffuseDet'+'ail','rgb',!(-0x1f69+-0x6*-0x503+0x158)),et('normalDeta'+'il',''),et('aoDetail','g',!(-0x193*0x13+-0x1ff*-0xe+0x1f8)),et('clearCoat','g'),et('clearCoatG'+'loss','g'),et('clearCoatN'+'ormal',''),et('sheen','rgb'),et('sheenGloss','g'),et('iridescenc'+'e','g'),et('iridescenc'+'eThickness','g'),et('anisotropy',''),ke('diffuseDet'+'ailMode',Bm),ke('aoDetailMo'+'de',Bm),eo('cubeMap'),eo('sphereMap'),eo('envAtlas');const _0x42b8ed=function(){return this['_prefilter'+'edCubemaps'];},_0x51b3ee=function(_0x14e658){const _0x916578=this['_prefilter'+'edCubemaps'];_0x14e658=_0x14e658||[];let _0x5d77ec=!(-0x105a+-0x21c1*-0x1+-0x1166),_0xd82cd5=!(-0xa4a+0x2*0xb11+-0x4*0x2f6);for(let _0xca6089=-0x1665*0x1+0xf30+0x735;_0xca6089<0x6de*-0x3+-0x1204*0x2+0xe2a*0x4;++_0xca6089){const _0x4941f8=_0x14e658[_0xca6089]||null;_0x916578[_0xca6089]!==_0x4941f8&&(_0x916578[_0xca6089]=_0x4941f8,_0x5d77ec=!(-0xd*-0x2e0+0x52a*-0x1+0x49a*-0x7)),_0xd82cd5=_0xd82cd5&&!!_0x916578[_0xca6089];}_0x5d77ec&&(_0xd82cd5?this['envAtlas']=zy['generatePr'+'efilteredA'+'tlas'](_0x916578,{'target':this['envAtlas']}):this['envAtlas']&&(this['envAtlas']['destroy'](),this['envAtlas']=null),this['_dirtyShad'+'er']=!(-0x1*-0x2096+0x24c2+-0x4558));},_0x368c91=[null,null,null,null,null,null];zp('prefiltere'+'dCubemaps',()=>_0x368c91['slice'](),_0x51b3ee,_0x42b8ed);}UE();const Rt=class Rt{static['render'](_0xcf2418,_0x51fee1){const _0x5f50d9=_0x51fee1['device'],_0x926ab5=_0xcf2418['cells'],_0x16e803=_0xcf2418['lightsBuff'+'er'],_0x50cc7f=_0x16e803['boundsMin'],_0x1a1454=_0x16e803['boundsDelt'+'a'],_0x243f20=_0x50cc7f['clone']()['add'](_0x1a1454),_0x59627e=_0x16e803['boundsDelt'+'a']['clone']()['div'](_0x926ab5),_0xf0a9cc=Rt['gridPositi'+'ons'],_0x5a6bca=Rt['gridColors'],_0x26cd88=new ie(0x1955*-0x1+-0x56*0x2b+-0x1*-0x27c7+0.3,-0x214b+0x99f*-0x1+0x2aea+0.3,0x85*-0x25+0x2*0x5cb+0x187*0x5+0.3),_0x38427b=(_0x8826ae,_0x2c984d,_0x13c399,_0x10c8ae,_0x28fe65,_0x5ce528,_0x2e9d18,_0x13d918,_0x3b77ca)=>{for(let _0x516a69=0x9e6+-0x279+-0x76d;_0x516a69<=_0x8826ae;_0x516a69++)for(let _0x2d33ce=0x1*-0x1210+-0x1*-0x18a4+0x694*-0x1;_0x2d33ce<=_0x2c984d;_0x2d33ce++){const _0x3664f1=_0x13c399+_0x516a69*_0x10c8ae,_0x3d5a4a=_0x28fe65+_0x2d33ce*_0x5ce528;_0x3b77ca===-0xba+0x449*-0x3+0x1*0xd95?_0xf0a9cc['push'](_0x3664f1,_0x2e9d18,_0x3d5a4a,_0x3664f1,_0x13d918,_0x3d5a4a):_0x3b77ca===-0x7*-0x53f+-0x25f1+0x139?_0xf0a9cc['push'](_0x3664f1,_0x3d5a4a,_0x2e9d18,_0x3664f1,_0x3d5a4a,_0x13d918):_0x3b77ca===-0x891*-0x2+0x1*0x1b39+0x1*-0x2c59&&_0xf0a9cc['push'](_0x2e9d18,_0x3664f1,_0x3d5a4a,_0x13d918,_0x3664f1,_0x3d5a4a);}};if(_0x38427b(_0x926ab5['x'],_0x926ab5['z'],_0x50cc7f['x'],_0x59627e['x'],_0x50cc7f['z'],_0x59627e['z'],_0x50cc7f['y'],_0x243f20['y'],0x3*0x3b3+0x5*-0x73f+0x1922),_0x38427b(_0x926ab5['x'],_0x926ab5['y'],_0x50cc7f['x'],_0x59627e['x'],_0x50cc7f['y'],_0x59627e['y'],_0x50cc7f['z'],_0x243f20['z'],0x4c2+0x1*-0x1423+-0x7b1*-0x2),_0x38427b(_0x926ab5['y'],_0x926ab5['z'],_0x50cc7f['y'],_0x59627e['y'],_0x50cc7f['z'],_0x59627e['z'],_0x50cc7f['x'],_0x243f20['x'],0x17*0x17+0x32*0x4+-0x2d7*0x1),_0xf0a9cc['length']){const _0x12cf31=_0xf0a9cc['length']/(-0x6b*0x21+-0x200d+-0xf49*-0x3);if(_0x12cf31!==_0x5a6bca['length']/(-0x988+-0x21cf+0x2b5b)){_0x5a6bca['length']=0x17f8+-0x246a*-0x1+-0x83*0x76;for(let _0x35efe7=-0xb1f*-0x1+-0x117f*0x1+0x1*0x660;_0x35efe7<_0x12cf31;_0x35efe7++)_0x5a6bca['push'](_0x26cd88['r'],_0x26cd88['g'],_0x26cd88['b'],_0x26cd88['a']);}_0x51fee1['drawLineAr'+'rays'](_0xf0a9cc,_0x5a6bca),_0xf0a9cc['length']=0x155f*-0x1+-0x10c7+0x2626;}let _0x5a4c8a=Rt['mesh'];_0x5a4c8a||(_0x5a4c8a=new Ge(_0x5f50d9),_0x5a4c8a['clear'](!(0x947+-0x1*0x1409+0xac2),!(0x1abe+-0x2521+0xa63*0x1)),Rt['mesh']=_0x5a4c8a);const _0x892c24=[],_0x27eb6f=[],_0x5d6639=[],_0x30030c=_0xcf2418['_cells']['x'],_0x1cb98c=_0xcf2418['_cells']['z'],_0x589f6c=_0xcf2418['counts'],_0xac746a=_0xcf2418['_maxCellLi'+'ghtCount'],_0xbfc1d3=new D(),_0x132cba=new D(),_0x4fbde0=new D(),_0x17dc3e=_0x1a1454['clone']()['div'](_0x926ab5);let _0x5adb24=0x154c+0x19ac+0x6*-0x7d4;for(let _0x591775=0x164b+-0x1ff5+-0x2*-0x4d5;_0x591775<_0x926ab5['x'];_0x591775++)for(let _0x1c12a5=0x5*-0x2f9+-0x21f5+-0x823*-0x6;_0x1c12a5<_0x926ab5['z'];_0x1c12a5++)for(let _0x244389=-0x2005+-0x1b*-0x98+0xffd;_0x244389<_0x926ab5['y'];_0x244389++){const _0x3d05c8=_0x591775+_0x30030c*(_0x1c12a5+_0x244389*_0x1cb98c),_0x2e28ea=_0x589f6c[_0x3d05c8];if(_0x2e28ea>0x1db9+0x12b1+-0x306a){_0xbfc1d3['x']=_0x50cc7f['x']+_0x17dc3e['x']*_0x591775,_0xbfc1d3['y']=_0x50cc7f['y']+_0x17dc3e['y']*_0x244389,_0xbfc1d3['z']=_0x50cc7f['z']+_0x17dc3e['z']*_0x1c12a5,_0x132cba['add2'](_0xbfc1d3,_0x17dc3e),_0x892c24['push'](_0xbfc1d3['x'],_0xbfc1d3['y'],_0x132cba['z']),_0x892c24['push'](_0x132cba['x'],_0xbfc1d3['y'],_0x132cba['z']),_0x892c24['push'](_0x132cba['x'],_0x132cba['y'],_0x132cba['z']),_0x892c24['push'](_0xbfc1d3['x'],_0x132cba['y'],_0x132cba['z']),_0x892c24['push'](_0x132cba['x'],_0xbfc1d3['y'],_0xbfc1d3['z']),_0x892c24['push'](_0xbfc1d3['x'],_0xbfc1d3['y'],_0xbfc1d3['z']),_0x892c24['push'](_0xbfc1d3['x'],_0x132cba['y'],_0xbfc1d3['z']),_0x892c24['push'](_0x132cba['x'],_0x132cba['y'],_0xbfc1d3['z']),_0x4fbde0['lerp'](Rt['colorLow'],Rt['colorHigh'],_0x2e28ea/_0xac746a)['round']();for(let _0xae7400=0xfda+-0x2247*-0x1+-0x3221;_0xae7400<0x23d9+-0x166+-0x226b;_0xae7400++)_0x27eb6f['push'](_0x4fbde0['x'],_0x4fbde0['y'],_0x4fbde0['z'],0x2*0x580+-0xc87+-0xe*-0x1c);_0x5d6639['push'](_0x5adb24*(0x1*-0x1d9+0xaf*-0x7+0x6aa)+(0x1*0x1d89+0x3*0xa16+-0x3bcb),_0x5adb24*(0x21b8+0x13d*-0xb+0x1411*-0x1)+(0xa67*-0x1+0x81a+0x24e*0x1),_0x5adb24*(-0x178+0x183e+-0x47*0x52)+(-0xe4e+0x8*0x170+0x2d1)),_0x5d6639['push'](_0x5adb24*(0x2*-0xecb+0x6e9+0x16b5)+(0x1492+0x528+-0x19b7),_0x5adb24*(-0x1ee1+-0x2e*-0x57+-0xf47*-0x1)+(-0x1aa8+-0x4*0x3c6+0x29c1),_0x5adb24*(-0x1695+0x491+0x120c)+(0x4f2+0x1822+-0x1d12)),_0x5d6639['push'](_0x5adb24*(-0x139*-0x11+-0xcf3+-0x12*0x6f)+(-0x1747+0x683+0x10c8),_0x5adb24*(-0x23a3+0x1f7e+0x42d)+(-0x3*-0x88b+-0x79*0x9+-0x47*0x4d),_0x5adb24*(0x1d*0x13a+0x1d*0x46+-0x2b78)+(-0xf42+-0x4*-0x23+0xebd)),_0x5d6639['push'](_0x5adb24*(0x2424*0x1+0x1ef3*0x1+-0x430f)+(0x2190+0x1910*-0x1+-0x879),_0x5adb24*(0x252+0x5a*-0x8+0x86)+(-0x1fbe+-0x2117+0x206d*0x2),_0x5adb24*(-0x21ec+-0x16f0*0x1+-0xb*-0x52c)+(0x17d1+0x22e6+0x19*-0x259)),_0x5d6639['push'](_0x5adb24*(0x16e5+0x14ab+-0x2b88)+(0x151*-0x1b+0xdde+0x1*0x15b0),_0x5adb24*(-0x25fa+0x1e06+0x7fc)+(-0x24e2*0x1+0x11a5+-0x133f*-0x1),_0x5adb24*(0x2543*0x1+-0x161*0x1+-0x23da)+(0x232f*-0x1+-0x25c4+0x48f9)),_0x5d6639['push'](_0x5adb24*(-0x1*0x1a9b+0xa0c*-0x3+-0x33*-0x11d)+(-0x20e6+0x7cf*0x2+0x114a),_0x5adb24*(-0x4b6+-0x90d+-0x3*-0x499)+(0x26ff*0x1+0x7d5+-0x2ecd),_0x5adb24*(0xc59*0x1+-0x1a20*-0x1+-0x2671)+(-0x12f1+-0x2f2+0x15e9)),_0x5d6639['push'](_0x5adb24*(-0x2*0xd5b+0x1*-0x1204+-0x2*-0x1661)+(0x1*-0x815+0xa11+-0xd*0x27),_0x5adb24*(-0x1842+-0xf98+0x27e2)+(-0x1*-0x2ff+-0x6f1+0x3f2),_0x5adb24*(0x21*-0x4+-0x1c49+0x1cd5*0x1)+(-0x2c8*-0x5+-0x17*0x91+-0xdd)),_0x5d6639['push'](_0x5adb24*(0xa2+0x26d6*-0x1+0x1*0x263c)+(-0xda*0x7+-0x1f71+0x2567),_0x5adb24*(-0x1dfb+0x1*-0x26c3+0x2*0x2263)+(-0x1bd2+0x12b*0x5+-0x1*-0x1600),_0x5adb24*(0xa91+0x600+-0x1089)+(-0x91*-0x4+-0x8*0x3f5+0x1d68)),_0x5d6639['push'](_0x5adb24*(0x3e*-0x2d+-0x1*-0x1e9d+-0x13af)+(0x57d+0x173*-0x6+-0x336*-0x1),_0x5adb24*(0x7a7*-0x3+-0x141*0x8+0x2105)+(-0x2170+-0x20e*0x8+0x1*0x31e4),_0x5adb24*(-0x53f*0x7+0x2fc*0x1+0x21c5)+(0xe8e+-0x59*0x3b+0x5f7)),_0x5d6639['push'](_0x5adb24*(-0x1*0xa22+-0x487*0x1+0xeb1)+(0x6d*-0x14+-0x2*0x12d2+0x2e2c),_0x5adb24*(0xf46+-0x33e*0x1+-0x100*0xc)+(-0x1df8+0x44*-0x29+-0x48b*-0x9),_0x5adb24*(-0x258b+0x1538+0x105b)+(-0x1544+0x179a+-0x95*0x4)),_0x5d6639['push'](_0x5adb24*(-0x13ea+0x24d8+-0x10e6)+(-0x21e9+-0x22a4+0x4492),_0x5adb24*(0x140a+-0x20ce*-0x1+-0x34d0)+(0x1a5e+-0x2073+0x615),_0x5adb24*(-0x11e6+-0xab7*-0x1+0x737)+(-0x1fc1+0x1994+0x633)),_0x5d6639['push'](_0x5adb24*(-0x270f+-0x2a2*0x7+-0x307*-0x13)+(-0x1ff4+0x199*-0x4+-0x132c*-0x2),_0x5adb24*(0x8cc+0x1d09*-0x1+0x1*0x1445)+(-0x10a2+-0xc*-0x9b+0x961),_0x5adb24*(0x24d1+0x221*0xb+-0x1*0x3c34)+(-0x2*0xa4b+-0x1ed7+0x3373)),_0x5adb24++;}}if(_0x5adb24){if(_0x5a4c8a['setPositio'+'ns'](_0x892c24),_0x5a4c8a['setNormals'](new Float32Array(_0x892c24['length'])),_0x5a4c8a['setColors3'+'2'](_0x27eb6f),_0x5a4c8a['setIndices'](_0x5d6639),_0x5a4c8a['update'](qs,!(0x1*-0x236e+0x18a4+0xacb)),!Rt['meshInstan'+'ce']){const _0x2e092b=new Ut();_0x2e092b['useLightin'+'g']=!(-0xe21*0x1+-0x8fe*0x1+-0xb9*-0x20),_0x2e092b['emissive']=new ie(0x11*0x194+-0x37d+0x1d*-0xce,0x7cf*-0x4+-0x1de3+-0x146*-0x30,-0x1d79+-0x4*-0x961+0x3*-0x2ae),_0x2e092b['emissiveVe'+'rtexColor']=!(0x136d+-0x1f5b+0xbee),_0x2e092b['blendType']=sd,_0x2e092b['depthWrite']=!(-0x3a9*0x7+0x10cf+0x8d1),_0x2e092b['update']();const _0x3b3954=new Ie('WorldClust'+'ersDebug');_0x3b3954['worldTrans'+'form']=te['IDENTITY'],_0x3b3954['_dirtyWorl'+'d']=_0x3b3954['_dirtyNorm'+'al']=!(0x251*-0xd+-0x1b6*-0x4+-0x9*-0x296),Rt['meshInstan'+'ce']=new He(_0x5a4c8a,_0x2e092b,_0x3b3954),Rt['meshInstan'+'ce']['cull']=!(0x65d+0x1271+-0x18cd);}const _0x5d8cb9=Rt['meshInstan'+'ce'];_0x51fee1['immediate']['drawMesh'](_0x5d8cb9['material'],_0x5d8cb9['node']['worldTrans'+'form'],null,_0x5d8cb9,_0x51fee1['defaultDra'+'wLayer']);}}};h(Rt,'gridPositi'+'ons',[]),h(Rt,'gridColors',[]),h(Rt,'mesh',null),h(Rt,'meshInstan'+'ce',null),h(Rt,'colorLow',new D(-0x1cf7*0x1+0x934*-0x4+0x41c8,-0x1*0x2443+-0x19de+-0x1f11*-0x2,-0x263*-0xd+-0x53a*-0x3+-0x6ac*0x7)),h(Rt,'colorHigh',new D(0x32*-0x45+-0x7*0x40d+-0x3*-0xdff,-0xbb9+0x1ddc+-0x1223,0x11e6+-0x1a26+0x60*0x16));let Uf=Rt;const BE='muPIHORMLN'+'DCz4DxVR/Z'+'vYfAUVEFR4'+'7KRIC4nwAA'+'AAAP7WxlhD'+'6Ci+2HCe7B'+'F8jRAPZwdH'+'2UPpI5PdLC'+'JdkvG4UTaN'+'DJ/0crAzne'+'71GCrb4kbd'+'MjjCEGzdX6'+'fNxDMLJq5x'+'keoIVTdfiZ'+'kodEeArmZm'+'p/FQzFjD4x'+'8iOW7Dg64n'+'+3mWqyEwLx'+'XT8zoJXfbw'+'8QJKDCaarU'+'YyTlMzNFHb'+'gUe9IQV7g4'+'YOgtSKpIFZ'+'J0qERm7u4P'+'pmiF89ktHW'+'CywaGmD6h+'+'hfh2/Zd8KY'+'lKqqo4Cem4'+'T42bT/Z9Fp'+'CQF1hhSjfB'+'zZ5XFn/y3j'+'egWC6u86Ku'+'ELRundQS/1'+'Rp+XuKKGIg'+'Rv3CvP5y74'+'9yqLlFO495'+'JOT3+f2CXg'+'d71npU0/Kj'+'jpkZucbJ5m'+'78IVyuSrSo'+'zc9jgBUhDr'+'z0hFsyb7LF'+'UH9//wJbBg'+'LdNWJZObfK'+'xrNt8TliLA'+'9w9sXFv6g2'+'6iXpf6r/Bq'+'cAusj/QzGB'+'ZuoUGeEtw8'+'BCXCZ3jUiw'+'4hvM18ZVql'+'UD3C40LAFX'+'W6FRjuAZGR'+'Nstb0/qVk4'+'skwyT+MHrv'+'RorI4rKHVM'+'WZmKyAkzL/'+'78u/9pMQuX'+'14pZN50b2P'+'Hn6fRxeaCQ'+'LsfT4dpvIk'+'WWFuFVENZI'+'h+8xgR6lU+'+'85W0PPdAu1'+'j99kcCG40J'+'BQa4JMyRzq'+'6qriOBLtqF'+'87vpCJan0W'+'EduVr/mOYk'+'S00urVA0mA'+'6M3031+GmG'+'mW48PaJDYO'+'EIb3bIXWPa'+'LoAOEinX1T'+'N3+/vwhG6n'+'qJu0TdHped'+'S7QsGZIoxH'+'3nQYYjQP1j'+'mbahlbNngw'+'5ogsGk1y50'+'XZyUmQBY+/'+'JBJ3Unu4dA'+'pm+WmPwHPU'+'9gLb+4mHh4'+'BiY6M86pq+'+'WeTyWdI3s0'+'CXPEtHGXZ8'+'zMZgUoyRom'+'Bi1VdazzuN'+'+WOmQ9Pa0Z'+'0tlNopUi8A'+'J4x2Xn4mmO'+'KEbXLxlbVs'+'Wu8XhuDGYF'+'OGCRVdSqDP'+'XrHU5SDdUl'+'ti3k5///SB'+'wzTMwK3L4a'+'1H7w4lnpEa'+'s6////AfX8'+('asyIBfeFXV'+'J3tgvxQ/bl'+'ZuUKyIODIf'+'r/UzdWNu7p'+'ciLBpdZRZ4'+'pIfZ1R6szq'+'+XNxkGG///'+'8EZFpu7VHA'+'hFWqHEOrB9'+'unw+YQa5o8'+'/9IR/V5/zq'+'+986rJSyfg'+'JKt2u9hxU1'+'wzyQWPjJGv'+'zG9+eWWxGF'+'OHVKqI4jBQ'+'ALwZZswesn'+'vZ2UmmkEXd'+'iRpz8B+oWE'+'7PY70ZTMnd'+'isYSXg2Tqo'+'I+3y9BxbnY'+'2Y4EfbdcRh'+'AvG59NqDEN'+'NYbxKvK5HJ'+'fPG5M+Wi2A'+'cpLVJrD6ca'+'iEOzgSoVNS'+'gQK8fm2M3z'+'GcF4xtClv/'+'8Hs9oD7C3j'+'itTATYNQxm'+'KqKf1LhIxz'+'f1bmfiNn7U'+'KFmcJu4sLq'+'VLwxGSue3t'+'aBEyknkw5h'+'XTsUCvqmmL'+'/f8n/w0giR'+'7Hu/9EHvpk'+'z3yuu64Tio'+'MkzdTJ30i0'+'+hFnQqW1+v'+'9mMwq+z9qG'+'X0UFu9Momv'+'VG2xod6vc1'+'2AAAAACq7s'+'Ga5qptFR0j'+'F3nQt/D+7P'+'ibKYahaxP3'+'hEixPbGi9n'+'wNf2LAa7Lk'+'EZRKxzXeCD'+'64Xpii5n+8'+'Kpg8eHIv7A'+'WXZltgMoGl'+'tmoJ0XGdOC'+'L8WkzphvR9'+'N2o3ARSZ42'+'l5e5Pe4B58'+'MCRlP3EKv+'+'mcloknH+ft'+'o5BWsmEutW'+'6KvjOVsznF'+'CktkSczVk4'+'aGvj9VXlRc'+'LeDoKG8RkB'+'gdcNG2bf8H'+'UL4MT2DM+a'+'r7NImJhKpx'+'akX4Vk0CnP'+'+/XNhl5UsP'+'0lXgeZXPoD'+'BMSW5An+DX'+'lTCO5FQGwS'+'PYwHLKYVIi'+'mEdAoVe49r'+'QLaaNcye5L'+'xU2/c5TijT'+'gJtD5eQQIe'+'1snxauj5jZ'+'sxJBUJdoP/'+'zqpjqv8qBr'+'uoPsVsP8N4'+'4PCUW5Dd0D'+'zqjSS/Dl5m'+'I9cn1w2ndN'+'/0KAEm1QAA'+'AACwu6KM/0'+'83IBbH5bPa'+'/9oHUwcU8I'+'9v3j6/v18Q'+'Yammrf+P6V'+'L///8BrpuM'+'3fOLCxaLNO'+'FNF1zPbPYT'+'P65ni6njft'+'4eVcyrVXRQ'+'Frs52tr35S'+'tiSp55edVD')+('CBC0H5rIfa'+'c6nzUwxQSt'+'7y15QoKb+5'+'zebEQUmVbr'+'PjXuUa19Ey'+'7sqXMiSUKH'+'aw72PJKDdr'+'utJoQr3u6l'+'EYJ8K0MakW'+'Kj9zjTFi4X'+'94TsKYco0G'+'rLeB60M6D8'+'M/80rhXUW8'+'iMequg8y5F'+'838WI0+gp3'+'GBN5Kj/xIO'+'xTWQuUaPV/'+'LwvARr1VH9'+'3BFgGZR1MF'+'W0Ua30GbYm'+'dnAgo9VWy8'+'SQtpDUgGE2'+'r2zq2eTEMC'+'L7sMKmE1hc'+'hVhuF/TCq9'+'iXKEm86kzO'+'f3Rp9ZnCxb'+'pDUj+FKNxV'+'yXe6pVZkRX'+'v/m95SnB/E'+'B8aME29N85'+'MtAcDoXWlo'+'r8De2Q5Dg1'+'tar+8wgiZu'+'fbMam81j//'+'ASUohoR/zS'+'h2KG4bvT6m'+'kIPz6C5/98'+'DC3LaWlaEZ'+'1zA5JORZRu'+'6J/a0GY285'+'sEYzw71YqO'+'T1ihAG0z5S'+'Dt1xNiDQWZ'+'dFpndArp6x'+'WhqSDkRb4k'+'SJEHb9liPv'+'w7uLV/6i5M'+'Vf//A9Qjr8'+'xkAEUh+KDI'+'+zdtJ68d6M'+'BOktg1iyp/'+'SCq8O9f5pb'+'amn1VVVQPR'+'TWqNBvhQKa'+'07s6P0lc9L'+'uu/3gw4Hey'+'OUfz8MxMwV'+'4UQhua+t9c'+'r4bz/nIB2w'+'nDSK1K7I94'+'M+s6C84hta'+'X/CNlMQUSs'+'2KJO+yaebf'+'TbkNX5yWcq'+'EJevo0vbKU'+'iETuFXiL01'+'9A3E+lmsyZ'+'MwXrXLLiQA'+'Z5t9+jI3Jo'+'bhJTMiDH5Z'+'OQ+8Jau555'+'5NMjHSscP9'+'qCVaa40doh'+'+1a3Ukf6jq'+'BmLddgh79/'+'fwTfCyqiul'+'dNkUoy+nUp'+'+4nerwg0Oj'+'tGv2x485PJ'+'OJvUEokNhY'+'IdWjpx7BWk'+'0VZGWOp3jS'+'FTJ2bnu6KC'+'duZtG/UcBC'+'9RZ3W/jMSf'+'SMw4Etr/Do'+'D/XYP2V5Ov'+'w+YoM3F5g2'+'dGLdvuG6Zk'+'VGLE6Dk5Zr'+'+sdSyGliJP'+'1y2OFf/KFO'+'0RWO+3gsGh'+'esTnfZVpTd'+'8/HwgO216g'+'waqo+vY3Tl'+'jfJWowY+i0'+'p0Os4SLn/1'+'wLqDHMlszg')+('gmT/D8MRFz'+'s+pLv6LNJS'+'sNZ/r41mWi'+'/rF6ZcKp/y'+'zJdK0VU44h'+'skq3RGpgO6'+'mIpJDsf/mZ'+'kFrz0yYOML'+'buaj/wp1v7'+'JMFM5eqvBh'+'mTd7U8frQA'+'tHtys4zgpj'+'ZmzUhOVTfN'+'NLifElGXAD'+'lqHGKrkBT/'+'nYwX8ZRm3R'+'jvyPvjKyEq'+'EGKUpVnvOG'+'x+NKPHiWM/'+'/ZDpDVGvvr'+'jmk8RPF/wi'+'YZD3+Us8YC'+'XjrVOfjdd1'+'UPAfjLp8jg'+'Sn4me7DPTp'+'z1Ggy9XL80'+'guFO7ECT10'+'AvILKfD18Q'+'x+KY/f8aRq'+'u0oOO8hfKR'+'FZa9PUJwCs'+'p6VdZz6LFk'+'m2b9Pl2LIi'+'fCwzRy7Tpd'+'G2uAtOxP2O'+'emY26bJMa9'+'ZGSLIRlMsg'+'pDpnDJwd0o'+'a5pQ13x1hr'+'Hf52HpulUW'+'onGWsfXZbS'+'QYKu9bnEN7'+'6ciQih0opN'+'3deDVrbrxo'+'rfVlnCmL1R'+'9zq3ePGWIv'+'21c7pW8kEi'+'FTM5JX8dAw'+'867s/60cf7'+'9/BH+MDFCZ'+'BHlz1L+qGO'+'Jf/1txhhmr'+'f3//As+RIJ'+'wevDb+fgNX'+'VeHw67QptZ'+'egayhrEwr5'+'Gy+EPo1RLa'+'MtPbqOZYoV'+'zXzwzjMFWZ'+'xyUG9YUIf6'+'////AQWy84'+'iAygLk9COt'+'Xt92+0mT/x'+'g0zMzMBeLk'+'b8y9SL2TDX'+'gSX422hDgp'+'GNLJyuPioA'+'+YJ91G8znr'+'pNqHkwYysc'+'aJDEc9Vc+j'+'4cXle3hvcd'+'2JqDQH2lBZ'+'xDn6mUTs0b'+'75raMvbs72'+'7codX01Anj'+'8f3wir9P2x'+'QaQ22v/TxC'+'MglKDFoTja'+'P01XTLgxnT'+'vPv02JgEUr'+'W6UDgOnobF'+'pLdvKdlypg'+'IzPcq14fgX'+'U5tvVW0FEs'+'7VRlsG1IyA'+'69fN4n+awH'+'hT34cE+xUv'+'dj86C8LgAs'+'FheTjI9Ht9'+'EyYAAAAAAV'+'BVKRx2wLgU'+'TI0/2QfyJo'+'2riRw3JDqz'+'EShmx/Lifo'+'6mRkQVbS7X'+'53t+EvKxcX'+'ogtdts31e9'+'MRHdcHgsA8'+'rt4/mt2unl'+'zQ/wsU8Gu7')+('+W6Oj7eD8E'+'QdDp5XlCsV'+'aS/AV/t5Zp'+'POHR3rGpyA'+'Je9IPV+xMr'+'BL1Oz/8MQh'+'Fs31h0N1cV'+'nq371uqIJY'+'HyafKH1jte'+'AK3VpMXBcu'+'C+yt0ZeKyR'+'UY4QhdrJJ4'+'tJ1wg3Hu6k'+'DsbovxupTM'+'kGdRrm8oZS'+'oYPbJ+PwH/'+'xotgTdkA12'+'05vUEfnqkI'+'04T/fnnd1f'+'iZW5AwNcgg'+'d7fi4j5zas'+'mcntZexIxq'+'FZQMzMJpfn'+'dmI5jn17cg'+'n5EV5t9XN0'+'C///8Q9wlJ'+'pMGXdoiaMT'+'G2sVyHQsn8'+'mWRISCLNG7'+'77S0OuDRP2'+'GlLcJ2UeOg'+'7Fo8hTNPeJ'+'//iTJhyqxh'+'KRUntdXOih'+'q2wfKfH///'+'8B0GGrwT+f'+'SOQRdctKxj'+'jGCSS11d6B'+'lQ9BDfE0J6'+'Z25FaNTKGp'+'FKNCMr2G/0'+'41KpWwBLVe'+'1k08vncseQ'+'bKZdXi8x1t'+'9XA45U/Wd4'+'3D9wAh3Tal'+'0aiLVzGPus'+'OZ1F+W3TWo'+'qlX/A95+dN'+'ef11TsuGfu'+'l+ctGssldk'+'3fqpfqh+43'+'XTxL42+leS'+'HoF/dWHYGX'+'6maqUEuLX7'+'UB+r/6Llr4'+'LKocbVIeu+'+'hB9QTPfz9f'+'CP8RyWmX4S'+'mbhMFsNtCi'+'jV7lVcwejL'+'Klvl0GfCnd'+'nWV7/39VBr'+'tTRuUx92ok'+'e3GBgKkC5f'+'dGK0YvNK+x'+'enKaDmsHDj'+'NFUM3NMz3Z'+'iXXFuLgojo'+'sPVCDEl2W5'+'BjX3Ms+j0G'+'SqACHmh0+R'+'PWyuNm/Qe8'+'vFf9AW7N1u'+'RaxWirrUyt'+'qEJnJ4/Flm'+'8hSoiZ2NQB'+'sS6w/yQlC4'+'gCaFo8q4ny'+'Y6AFdo4hiw'+'hBXzbNKKvZ'+'vktCjSCukR'+'R/BbYVbNwZ'+'i2Yh3hGodE'+'acLW8qijiW'+'JODf0P2bhf'+'aiPspPT4lY'+'JBgi/KfcFw'+'CfvyUIgkJO'+'v///8CG/JE'+'epRBLaMFE+'+'2TgrqsJXOV'+'OWHt6g/bFw'+'VLLMVBsMR5'+'0dis/39/Al'+'BX+/rMTJkU'+'QrnlxpR2iu'+'0Tp8tATkRY'+'GmDIrcAiRP'+'8PjoWIlb7/')+('0ecTdSCE9Y'+'58+a+n/Fov'+'JQTVF4F2jA'+'xMZhTgrM/K'+'VS5BQu6bVb'+'kWY5HXnxRs'+'hks3urDdW4'+'RkWp4M4TeL'+'mFK5KF/uHk'+'kiO5Kv96Ri'+'oH984v/CSD'+'BnG+BwlnU9'+'B+o7Y+0X0N'+'ob+0pLsStx'+'jvPXMy2eCp'+'zhOWV4XbOb'+'BHN4UE2sLQ'+'/DIqXhOzxV'+'f38GlTi6aG'+'7EnePO7TRJ'+'m9yOfUUcqq'+'1I2iQHrVDq'+'n3TUNRi/lM'+'w8KbMW/3/n'+'qCz/Ef8PoW'+'5Qxcz2yHR/'+'f78EPB2Stb'+'d+ZFmfNTUY'+'ILzsb9YNhp'+'aHcaymYrBi'+'NHmFE3Y4cc'+'YJ25Prqm7z'+'HobGHED8/9'+'3ZNlWro9vc'+'KivGZs31Ui'+'K1k5zjUhex'+'UgbqJb+fUT'+'jxce/7Zly8'+'a5KMC1fX5n'+'fjPgibdvzb'+'XV1jRT2asX'+'vmSAusaLdq'+'1TSIJ8fXIN'+'k5AtT34EWP'+'AsfP9IFQqM'+'5K11O6saoH'+'JA==');let zi=null;const Wy=()=>{if(!zi){const _0x2273c0=atob(BE);zi=Uint8Array['from'](_0x2273c0,_0x23d529=>_0x23d529['charCodeAt'](0x20*0x13+-0x1804+0x15a4));}},zE=()=>(Wy(),zi);class VE{constructor(_0x4364fd=0x2665+0x933+-0x2f98){h(this,'seed',-0x24e6+-0xf8e+0x3474),(this['seed']=_0x4364fd*(-0x24b+0x1*-0xceb+0xf3a),Wy());}['_next'](){this['seed']=(this['seed']+(0x1758+0x1*0x1124+-0x2878))%zi['length'];}['value'](){return this['_next'](),zi[this['seed']]/(0x2101+-0x25da+0x5d8);}['vec4'](_0x2815c5=new re()){return this['_next'](),_0x2815c5['set'](zi[this['seed']],zi[this['seed']+(0x1*-0x1b65+-0x11a*0x1f+-0x4e*-0xca)],zi[this['seed']+(-0xf0*-0x19+-0x9*0x41f+-0x1*-0xda9)],zi[this['seed']+(-0x1*0x536+-0x5b1+-0x1*-0xaea)])['mulScalar']((0x19ea+-0x1*0x228a+0x8a1)/(-0xbb9+-0x6f8*-0x4+-0xf28*0x1));}}const GE=[new D(-(-0x2211+0x9ed+-0x1825*-0x1),-0xb1a+0x6*0x502+-0x12f2,-0x83*0x25+0xf58+0x397),new D(0x1c8a+0x405+-0x56d*0x6,-0x7*-0x55b+0xa96+-0x3013,0x3*-0x952+0x2*0x313+-0x10*-0x15d),new D(-0x1c59+0x1*0x1e1a+-0x1c1,-(0x12a6+0x30e+-0x15b3),-0xa15*0x1+-0x16a1+-0x2*-0x105b),new D(-0x1085*-0x1+-0x20cb+-0x823*-0x2,-0x22a6+0x11fe+0x10a9*0x1,0x2319+-0x1833+-0xae6),new D(-0xaff+0x190b+-0xe0c,0x3f5+-0xe14+0x1*0xa1f,-(-0xcea+-0x1c8a+0x2975)),new D(-0x3ce*0x7+0x26f*0xe+-0x7*0x110,-0xb0*-0x19+-0x52a*0x6+0xdcc,0x256b+-0x16dd+-0xe8d)];class HE{constructor(){h(this,'colors',new Float32Array(-0x1*0x16e1+-0x545*0x1+0x1c38));}['update'](_0xa56b76,_0xa34483){const _0x188946=this['colors'],{r:_0x288080,g:_0x420c48,b:_0x5df7c5}=_0xa56b76;for(let _0x3049d4=-0x14a2+0x2518+-0x1076;_0x3049d4<0x1de1+-0xf57+-0x4*0x3a1;_0x3049d4++)_0x188946[_0x3049d4*(0x1af+0x1013*0x1+0x11bf*-0x1)]=_0x288080,_0x188946[_0x3049d4*(-0x1b*-0x6+-0x170f*-0x1+-0x1b1*0xe)+(0x1685+0x2fe+-0x1982*0x1)]=_0x420c48,_0x188946[_0x3049d4*(-0x3*-0x8b5+-0x1a42+0x13*0x2)+(0x3*-0x3ea+0x15*-0x75+0x1559)]=_0x5df7c5;for(let _0x113863=-0x8b9+0x1*-0x1c5a+0x2513;_0x113863<_0xa34483['length'];_0x113863++){const _0x8aa1b5=_0xa34483[_0x113863];if(_0x8aa1b5['_type']===ve)for(let _0x6dcd5=-0x33d*0x6+0x180e+0x4a0*-0x1;_0x6dcd5<-0x24+-0x77+0xa1;_0x6dcd5++){const _0x30d5e2=Math['max'](GE[_0x6dcd5]['dot'](_0x8aa1b5['_direction']),0xeef+0x252e+0x115f*-0x3)*_0x8aa1b5['_intensity'],_0x254a97=_0x8aa1b5['_color'];_0x188946[_0x6dcd5*(0x11*-0x1f+0x9e5*0x1+-0x1*0x7d3)]+=_0x254a97['r']*_0x30d5e2,_0x188946[_0x6dcd5*(0x404+0x2*0x5ba+-0xf75)+(0x11*0x9d+0x23a5+-0x2e11*0x1)]+=_0x254a97['g']*_0x30d5e2,_0x188946[_0x6dcd5*(-0x76a+-0x15e7+0x1d54)+(0x20a8+0x8b2+-0x2958)]+=_0x254a97['b']*_0x30d5e2;}}}}const WE=(_0x19f6c6,_0x3aabb2,_0x762846,_0x294f1b)=>{const _0x4d5d7e=new _e(_0x19f6c6,{'name':''+_0x3aabb2+_0x762846,'width':_0x762846,'height':_0x762846,'format':Ne,'addressU':yt,'addressV':yt,'type':Ms,'magFilter':Te,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x5c3*0x4+0x71d+-0x3fc*-0x4)});return _0x4d5d7e['lock']()['set'](_0x294f1b),_0x4d5d7e['unlock'](),_0x4d5d7e;},$E=new Kt(),XE=_0x241edd=>$E['get'](_0x241edd,()=>{const _0x3f23cd=zE(),_0x2c25d2=Math['sqrt'](_0x3f23cd['length']/(0x23f8+0x1b9b+0x1*-0x3f8f));return WE(_0x241edd,'BlueNoise',_0x2c25d2,_0x3f23cd);});class ma{constructor(_0x21c766,_0x4c9c1c){this['texture']=_0x21c766,this['cached']=!(-0x1af7+-0x1127+-0x3*-0xeb5),this['renderTarg'+'ets']=_0x4c9c1c;}['destroy'](){this['texture']&&(this['texture']['destroy'](),this['texture']=null);const _0x169a90=this['renderTarg'+'ets'];for(let _0x3a350f=0x108e+-0x2060+0xfd2;_0x3a350f<_0x169a90['length'];_0x3a350f++)_0x169a90[_0x3a350f]['destroy']();this['renderTarg'+'ets']['length']=0x6*0xf3+-0x994*-0x2+-0x18da;}static['create'](_0xe21dc3,_0x1e1263){let _0x138bc5=null;return _0x1e1263['_type']===Ke?_0x138bc5=this['createCube'+'map'](_0xe21dc3,_0x1e1263['_shadowRes'+'olution'],_0x1e1263['_shadowTyp'+'e']):_0x138bc5=this['create2dMa'+'p'](_0xe21dc3,_0x1e1263['_shadowRes'+'olution'],_0x1e1263['_shadowTyp'+'e']),_0x138bc5;}static['createAtla'+'s'](_0x321c7f,_0x2fa3e9,_0x33ed99){const _0x1e759e=this['create2dMa'+'p'](_0x321c7f,_0x2fa3e9,_0x33ed99),_0x281737=_0x1e759e['renderTarg'+'ets'],_0x6033b8=_0x281737[-0xf20+0x2*0x2ec+0x948];for(let _0x17b745=-0x258a+-0x10d1+0x365b;_0x17b745<0x1720+0x3*0x167+-0x1b50;_0x17b745++)_0x281737['push'](_0x6033b8);return _0x1e759e;}static['create2dMa'+'p'](_0x131b7e,_0x2ed22c,_0xb5be30){var _0x3b5b41;const _0x32be2b=Xi['get'](_0xb5be30);w['assert'](_0x32be2b);let _0x2e7d11=_0x32be2b['format'];_0x2e7d11===Qi&&!_0x131b7e['textureFlo'+'atRenderab'+'le']&&_0x131b7e['textureHal'+'fFloatRend'+'erable']&&(_0x2e7d11=Bh);const _0x205074=(_0x3b5b41=Nt['get'](_0x2e7d11))==null?void(-0x1e33+-0x2109+0x3f3c):_0x3b5b41['name'];let _0x2f3aff=vt;_0xb5be30===Ap&&(_0x2f3aff=_0x131b7e['extTexture'+'FloatLinea'+'r']?vt:Te),_0xb5be30===Xo&&(_0x2f3aff=Te);const _0x548d7c=new _e(_0x131b7e,{'profilerHint':Pf,'format':_0x2e7d11,'width':_0x2ed22c,'height':_0x2ed22c,'mipmaps':!(-0x1a87*-0x1+0x22f0+-0x2*0x1ebb),'minFilter':_0x2f3aff,'magFilter':_0x2f3aff,'addressU':ue,'addressV':ue,'name':'ShadowMap2'+'D_'+_0x205074});let _0x536169=null;return _0x32be2b!=null&&_0x32be2b['pcf']?(_0x548d7c['compareOnR'+'ead']=!(-0x2270+0x3c2+0x1eae),_0x548d7c['compareFun'+'c']=Gc,_0x536169=new gt({'depthBuffer':_0x548d7c})):_0x536169=new gt({'colorBuffer':_0x548d7c,'depth':!(0x22c7+-0x43a*0x4+-0x11df)}),_0x131b7e['isWebGPU']&&(_0x536169['flipY']=!(0x11*-0x98+0x15ce+-0xbb6)),new ma(_0x548d7c,[_0x536169]);}static['createCube'+'map'](_0x39bd27,_0x5432aa,_0x3e1e20){var _0x35e711;const _0x3471db=Xi['get'](_0x3e1e20);w['assert'](_0x3471db);const _0x2a773b=(_0x35e711=Nt['get'](_0x3471db['format']))==null?void(0x1008+0x117b+-0x17*0x175):_0x35e711['name'],_0x242f51=_0x3e1e20===Xo,_0x42307b=_0x242f51?Te:vt,_0x483892=new _e(_0x39bd27,{'profilerHint':Pf,'format':_0x3471db==null?void(0xb22+0x119b*0x1+0x7*-0x41b):_0x3471db['format'],'width':_0x5432aa,'height':_0x5432aa,'cubemap':!(-0x1f9f+0xa31+0x156e),'mipmaps':!(0x217b+-0xe*-0xf4+-0x2ed2),'minFilter':_0x42307b,'magFilter':_0x42307b,'addressU':ue,'addressV':ue,'name':'ShadowMapC'+'ube_'+_0x2a773b});_0x242f51||(_0x483892['compareOnR'+'ead']=!(-0x23+0x1bd5+-0x2c5*0xa),_0x483892['compareFun'+'c']=Gc);const _0x507218=[];for(let _0xd20aa=0x24d6+0x9*0x443+-0x4b31*0x1;_0xd20aa<0xa8*-0x14+-0x1be5+-0x229*-0x13;_0xd20aa++)_0x242f51?_0x507218['push'](new gt({'colorBuffer':_0x483892,'face':_0xd20aa,'depth':!(0x1b27+0x3d0+-0x1ef7)})):_0x507218['push'](new gt({'depthBuffer':_0x483892,'face':_0xd20aa}));return new ma(_0x483892,_0x507218);}}const qE=[],jE=[],xi=new re(),Ld=new re();class Rd{constructor(_0x3ba2d7){this['size']=Math['floor'](_0x3ba2d7['w']*(-0x4*0x511+-0x1c60+-0xd29*-0x4)),this['used']=!(0x13ef*0x1+-0x912+-0xadc),this['lightId']=-(-0x1700+-0x1*-0xf31+-0x4*-0x1f4),this['rect']=_0x3ba2d7;}}class YE{constructor(_0x285ba0){this['device']=_0x285ba0,this['version']=-0xe64+0x167a+-0x815,this['shadowAtla'+'sResolutio'+'n']=-0x2b*0x60+0x675*0x3+0x4c1,this['shadowAtla'+'s']=null,this['shadowEdge'+'Pixels']=-0x1*-0x1379+0xaed+-0x1e63,this['cookieAtla'+'sResolutio'+'n']=0x76*0x35+-0xd28+-0x1*0xb42,this['cookieAtla'+'s']=new _e(this['device'],{'name':'CookieAtla'+'s','width':this['cookieAtla'+'sResolutio'+'n'],'height':this['cookieAtla'+'sResolutio'+'n'],'format':_s,'cubemap':!(-0x8*-0x46a+0x1c87+-0x3fd6),'mipmaps':!(0x1365+-0x1*-0x6d2+-0x1a36),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue}),this['cookieRend'+'erTarget']=new gt({'colorBuffer':this['cookieAtla'+'s'],'depth':!(0x1934+-0xf20+-0xa13*0x1),'flipY':!(-0x14b*-0xc+0x1f58+-0x4*0xbb7)}),this['slots']=[],this['atlasSplit']=[],this['cubeSlotsO'+'ffsets']=[new J(-0x152b+-0x10*-0x65+-0x1*-0xedb,0x1*0x13ee+0x1*0x1e9c+-0x1945*0x2),new J(0x7db*-0x3+0xa3d*-0x2+0xb*0x401,0x11*0x217+0x7*-0x1e+0x22b4*-0x1),new J(-0x168b+-0x1*-0x13e5+0x2a7,0x2d*0x3f+0x45a+0xb*-0x167),new J(-0x1f70+-0x422*0x2+0x6b*0x5f,0xc3b*-0x2+-0x7*-0x405+-0x3ac),new J(-0x1aca+-0xe75+0x2941*0x1,-0x423*0x9+-0x4f7*-0x2+0x1b4d),new J(0x7*0x169+-0x1*0x1e70+0xe5*0x17,-0x36e+-0x2f*0xc7+-0x4ff*-0x8)],this['scissorVec']=new re(),this['allocateSh'+'adowAtlas'](-0x9af+-0x13b2*-0x1+-0xa02),this['allocateCo'+'okieAtlas'](-0x15d5+-0x1dbd+0x3393),this['allocateUn'+'iforms']();}['destroy'](){this['destroySha'+'dowAtlas'](),this['destroyCoo'+'kieAtlas']();}['destroySha'+'dowAtlas'](){var _0xd94649;(_0xd94649=this['shadowAtla'+'s'])==null||_0xd94649['destroy'](),this['shadowAtla'+'s']=null;}['destroyCoo'+'kieAtlas'](){var _0x213efe,_0x447ebc;(_0x213efe=this['cookieAtla'+'s'])==null||_0x213efe['destroy'](),this['cookieAtla'+'s']=null,(_0x447ebc=this['cookieRend'+'erTarget'])==null||_0x447ebc['destroy'](),this['cookieRend'+'erTarget']=null;}['allocateSh'+'adowAtlas'](_0x320edb,_0x53ca7f=Ws){var _0x377a27;const _0x22c5c9=(_0x377a27=this['shadowAtla'+'s'])==null?void(-0x15b*-0x17+-0x243a+0x1*0x50d):_0x377a27['texture']['format'],_0x2e775a=Xi['get'](_0x53ca7f)['format'];if(!this['shadowAtla'+'s']||this['shadowAtla'+'s']['texture']['width']!==_0x320edb||_0x22c5c9!==_0x2e775a){this['version']++,this['destroySha'+'dowAtlas'](),this['shadowAtla'+'s']=ma['createAtla'+'s'](this['device'],_0x320edb,_0x53ca7f),this['shadowAtla'+'s']['cached']=!(0xc40+0x469*-0x7+0x129f);const _0x271c82=(-0x6*0x5a7+-0x21e*-0x10+0x1*0xe)/this['shadowAtla'+'sResolutio'+'n'];this['scissorVec']['set'](_0x271c82,_0x271c82,-(0x19*0x2a+-0x1*-0x19a1+-0x1db9*0x1)*_0x271c82,-(-0xb*-0xbf+0x824+-0x1057)*_0x271c82);}}['allocateCo'+'okieAtlas'](_0x397b8d){this['cookieAtla'+'s']['width']!==_0x397b8d&&(this['cookieRend'+'erTarget']['resize'](_0x397b8d,_0x397b8d),this['version']++);}['allocateUn'+'iforms'](){this['_shadowAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('shadowAtla'+'sTexture'),this['_shadowAtl'+'asParamsId']=this['device']['scope']['resolve']('shadowAtla'+'sParams'),this['_shadowAtl'+'asParams']=new Float32Array(0x2429*0x1+0x16*0x81+-0x8b*0x57),this['_cookieAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('cookieAtla'+'sTexture');}['updateUnif'+'orms'](){const _0x1a0846=this['shadowAtla'+'s']['renderTarg'+'ets'][0x5b3*-0x1+0x7*-0x511+0x16*0x1df]['depthBuffe'+'r'];this['_shadowAtl'+'asTextureI'+'d']['setValue'](_0x1a0846),this['_shadowAtl'+'asParams'][0x268a+-0x10d*0x2+0x10*-0x247]=this['shadowAtla'+'sResolutio'+'n'],this['_shadowAtl'+'asParams'][0x2d8*0x3+0x1*-0x1963+0x1a*0xa6]=this['shadowEdge'+'Pixels'],this['_shadowAtl'+'asParamsId']['setValue'](this['_shadowAtl'+'asParams']),this['_cookieAtl'+'asTextureI'+'d']['setValue'](this['cookieAtla'+'s']);}['subdivide'](_0x7b6d9d,_0x375461){let _0x23c8b2=_0x375461['atlasSplit'];if(!_0x23c8b2){const _0x2a2ddc=Math['ceil'](Math['sqrt'](_0x7b6d9d));_0x23c8b2=jE,_0x23c8b2[-0x4c*-0x7f+-0x1c3*-0x15+-0x4ab3]=_0x2a2ddc,_0x23c8b2['length']=0xc*0x2b+-0x11*0x1c+-0x1*0x27;}if(!((_0xed6b7f,_0x2d11c5)=>_0xed6b7f['length']===_0x2d11c5['length']&&_0xed6b7f['every']((_0x3f01b8,_0x146710)=>_0x3f01b8===_0x2d11c5[_0x146710]))(_0x23c8b2,this['atlasSplit'])){this['version']++,this['slots']['length']=0x1*-0x620+-0x171f+0x1d3f,this['atlasSplit']['length']=0x21*0xcf+0x1*-0xbbc+-0xef3*0x1,this['atlasSplit']['push'](..._0x23c8b2);const _0x3d37b5=this['atlasSplit'][0x6e5+-0x1*0x2555+-0x1e7*-0x10];if(_0x3d37b5>0x2090+0x25c7+-0x4656*0x1){const _0x4a342e=(-0x95*-0x6+-0x1dd9+0x1a5c)/_0x3d37b5;for(let _0xa92d68=-0x2*-0x12e+0x107b+-0x35*0x5b;_0xa92d68<_0x3d37b5;_0xa92d68++)for(let _0x253841=0x24b2+-0x1fe1*-0x1+-0xdb7*0x5;_0x253841<_0x3d37b5;_0x253841++){const _0x20e0e9=new re(_0xa92d68*_0x4a342e,_0x253841*_0x4a342e,_0x4a342e,_0x4a342e),_0x401390=this['atlasSplit'][0x3e9+0x607+-0x9ef+_0xa92d68*_0x3d37b5+_0x253841];if(_0x401390>0x805+0x2619+0x3*-0xf5f){for(let _0x5a1f7e=-0x1ec2+-0x1*0x1aeb+0x39ad;_0x5a1f7e<_0x401390;_0x5a1f7e++)for(let _0x3865cd=-0x1ebc+-0x1bd4+0x3a90;_0x3865cd<_0x401390;_0x3865cd++){const _0x1ddb22=_0x4a342e/_0x401390,_0x5f7dc6=new re(_0x20e0e9['x']+_0x5a1f7e*_0x1ddb22,_0x20e0e9['y']+_0x3865cd*_0x1ddb22,_0x1ddb22,_0x1ddb22);this['slots']['push'](new Rd(_0x5f7dc6));}}else this['slots']['push'](new Rd(_0x20e0e9));}}else this['slots']['push'](new Rd(new re(0x1001+-0xe2a+-0x1d7,-0x16b1+0x11e7+0x2*0x265,-0x185b+0x11*-0xb3+0x243f,-0x97*-0x22+0x1a5+0x1*-0x15b2)));this['slots']['sort']((_0xbddefe,_0x1196e0)=>_0x1196e0['size']-_0xbddefe['size']);}}['collectLig'+'hts'](_0x13f346,_0x5742a9){const _0x51dec1=_0x5742a9['cookiesEna'+'bled'],_0x291ecd=_0x5742a9['shadowsEna'+'bled'];let _0x2c6ab2=!(-0x11d5+-0x5c6*-0x1+0xc10),_0x232f7c=!(0x4b4+-0xc0+0x3f3*-0x1);const _0x26d1b1=qE;return _0x26d1b1['length']=-0x1948+0x1520+-0x8*-0x85,(_0x51dec1||_0x291ecd)&&(_0x38a813=>{for(let _0x145dc6=-0x1f99*-0x1+-0x121f*-0x1+-0x31b8;_0x145dc6<_0x38a813['length'];_0x145dc6++){const _0x171189=_0x38a813[_0x145dc6];if(_0x171189['visibleThi'+'sFrame']){const _0x6b3add=_0x291ecd&&_0x171189['castShadow'+'s'],_0x5cf8fb=_0x51dec1&&!!_0x171189['cookie'];_0x2c6ab2||(_0x2c6ab2=_0x6b3add),_0x232f7c||(_0x232f7c=_0x5cf8fb),(_0x6b3add||_0x5cf8fb)&&_0x26d1b1['push'](_0x171189);}}})(_0x13f346),_0x26d1b1['sort']((_0x502b2f,_0x2b7c98)=>_0x2b7c98['maxScreenS'+'ize']-_0x502b2f['maxScreenS'+'ize']),_0x2c6ab2&&this['allocateSh'+'adowAtlas'](this['shadowAtla'+'sResolutio'+'n'],_0x5742a9['shadowType']),_0x232f7c&&this['allocateCo'+'okieAtlas'](this['cookieAtla'+'sResolutio'+'n']),(_0x2c6ab2||_0x232f7c)&&this['subdivide'](_0x26d1b1['length'],_0x5742a9),_0x26d1b1;}['setupSlot'](_0x292b1e,_0x47d773){_0x292b1e['atlasViewp'+'ort']['copy'](_0x47d773);const _0x18bd4f=_0x292b1e['numShadowF'+'aces'];for(let _0x343727=0x1*-0xed+-0xcb8+0xda5;_0x343727<_0x18bd4f;_0x343727++)if(_0x292b1e['castShadow'+'s']||_0x292b1e['_cookie']){if(xi['copy'](_0x47d773),Ld['copy'](_0x47d773),_0x292b1e['_type']===Ze&&xi['add'](this['scissorVec']),_0x292b1e['_type']===Ke){const _0x7afc5d=xi['z']/(0x4*-0x72f+0x3f1*-0x9+0x4038),_0x400a06=this['cubeSlotsO'+'ffsets'][_0x343727];xi['x']+=_0x7afc5d*_0x400a06['x'],xi['y']+=_0x7afc5d*_0x400a06['y'],xi['z']=_0x7afc5d,xi['w']=_0x7afc5d,Ld['copy'](xi);}if(_0x292b1e['castShadow'+'s']){const _0x1a1a3c=_0x292b1e['getRenderD'+'ata'](null,_0x343727);_0x1a1a3c['shadowView'+'port']['copy'](xi),_0x1a1a3c['shadowScis'+'sor']['copy'](Ld);}}}['assignSlot'](_0x1f4f8c,_0x1c2fb0,_0x350e58){_0x1f4f8c['atlasViewp'+'ortAllocat'+'ed']=!(0x12*0xab+-0xd5a+0x154);const _0x11b009=this['slots'][_0x1c2fb0];_0x11b009['lightId']=_0x1f4f8c['id'],_0x11b009['used']=!(0xab4+-0x459+-0x65b),_0x350e58&&(_0x1f4f8c['atlasSlotU'+'pdated']=!(0x154+-0x11c9+0x17f*0xb),_0x1f4f8c['atlasVersi'+'on']=this['version'],_0x1f4f8c['atlasSlotI'+'ndex']=_0x1c2fb0);}['update'](_0x30e537,_0xc67623){this['shadowAtla'+'sResolutio'+'n']=_0xc67623['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0xc67623['cookieAtla'+'sResolutio'+'n'];const _0x29c078=this['collectLig'+'hts'](_0x30e537,_0xc67623);if(_0x29c078['length']>-0x46*-0x65+0x2487+-0x4025){const _0x440f93=this['slots'];for(let _0x568f06=-0x87*0x34+0x1b*0xe4+0x360;_0x568f06<_0x440f93['length'];_0x568f06++)_0x440f93[_0x568f06]['used']=!(-0x1*-0x2681+-0x1*-0x1cbe+-0x26*0x1c5);const _0xcb3729=Math['min'](_0x29c078['length'],_0x440f93['length']);for(let _0x5a1a0e=0x253+-0x1654*0x1+0x1401;_0x5a1a0e<_0xcb3729;_0x5a1a0e++){const _0x2ee9aa=_0x29c078[_0x5a1a0e];_0x2ee9aa['castShadow'+'s']&&(_0x2ee9aa['_shadowMap']=this['shadowAtla'+'s']);const _0x47fd1f=_0x440f93[_0x2ee9aa['atlasSlotI'+'ndex']];if(_0x2ee9aa['atlasVersi'+'on']===this['version']&&_0x2ee9aa['id']===(_0x47fd1f==null?void(0xbd4*-0x1+-0x2f1+0xec5):_0x47fd1f['lightId'])){const _0x2520e1=_0x440f93[_0x2ee9aa['atlasSlotI'+'ndex']];_0x2520e1['size']===_0x440f93[_0x5a1a0e]['size']&&!_0x2520e1['used']&&this['assignSlot'](_0x2ee9aa,_0x2ee9aa['atlasSlotI'+'ndex'],!(0x2*0x418+0x190d+0x2c5*-0xc));}}let _0x412467=-0xe*0xa+0x1ee5+-0x1e59;for(let _0x93ccd0=-0x1288+0x239*0x10+-0x14*0xda;_0x93ccd0<_0xcb3729;_0x93ccd0++){for(;_0x412467<_0x440f93['length']&&_0x440f93[_0x412467]['used'];)_0x412467++;const _0x48cf72=_0x29c078[_0x93ccd0];_0x48cf72['atlasViewp'+'ortAllocat'+'ed']||this['assignSlot'](_0x48cf72,_0x412467,!(-0x5a*-0x9+-0x23fd+0x3*0xaf1));const _0x5545c7=_0x440f93[_0x48cf72['atlasSlotI'+'ndex']];this['setupSlot'](_0x48cf72,_0x5545c7['rect']);}}this['updateUnif'+'orms']();}}class KE{constructor(){this['cache']=new Map();}['destroy'](){this['clear'](),this['cache']=null;}['clear'](){this['cache']['forEach'](_0x66e1f0=>{_0x66e1f0['forEach'](_0x378542=>{_0x378542['destroy']();});}),this['cache']['clear']();}['getKey'](_0x17674d){const _0x3ade24=_0x17674d['_type']===Ke,_0x14c69=_0x17674d['_shadowTyp'+'e'],_0x2300b4=_0x17674d['_shadowRes'+'olution'];return _0x3ade24+'-'+_0x14c69+'-'+_0x2300b4;}['get'](_0x38c8b9,_0x4b6f91){const _0x3db754=this['getKey'](_0x4b6f91),_0x1cb59d=this['cache']['get'](_0x3db754);if(_0x1cb59d&&_0x1cb59d['length'])return _0x1cb59d['pop']();const _0x5f7bca=ma['create'](_0x38c8b9,_0x4b6f91);return _0x5f7bca['cached']=!(-0xb*-0xec+-0x1718+-0x1*-0xcf4),_0x5f7bca;}['add'](_0x23d9ff,_0x224a91){const _0x268d91=this['getKey'](_0x23d9ff),_0x4d23c3=this['cache']['get'](_0x268d91);_0x4d23c3?_0x4d23c3['push'](_0x224a91):this['cache']['set'](_0x268d91,[_0x224a91]);}}class ZE extends ys{constructor(_0x1f09a6,_0x213f0d,_0x1c582d,_0x58e07d,_0x3cb667){super(_0x1f09a6),ya['setName'](this,this['name']+'-'+_0x1c582d['_node']['name']),this['requiresCu'+'bemaps']=!(0x1a55+-0x19a5+-0x5*0x23),this['shadowRend'+'erer']=_0x213f0d,this['light']=_0x1c582d,this['face']=_0x58e07d,this['applyVsm']=_0x3cb667,this['shadowCame'+'ra']=_0x213f0d['prepareFac'+'e'](_0x1c582d,null,_0x58e07d),_0x213f0d['setupRende'+'rPass'](this,this['shadowCame'+'ra'],!(0x14*0x67+0x13a4+-0x1bb0));}['execute'](){this['shadowRend'+'erer']['renderFace'](this['light'],null,this['face'],!(-0x5*0x22d+0x1*-0xc3b+0x171d*0x1));}['after'](){this['applyVsm']&&this['shadowRend'+'erer']['renderVsm'](this['light'],this['shadowCame'+'ra']);}}class QE{constructor(_0x7c9d5b,_0x3401b5){h(this,'shadowLigh'+'ts',[]),h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x7c9d5b,this['shadowRend'+'erer']=_0x3401b5,this['device']=_0x7c9d5b['device']);}['cull'](_0x4a9b71,_0x3f8453,_0x437a84=null){const _0x3543e5=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled'];_0x4a9b71['visibleThi'+'sFrame']=!(0x1*-0x13d9+-0x2*-0x509+0x9c7),_0x3543e5||_0x4a9b71['_shadowMap']||(_0x4a9b71['_shadowMap']=ma['create'](this['device'],_0x4a9b71));const _0x19030e=_0x4a9b71['_type'],_0x46e9b4=_0x19030e===Ze?-0x3*0xa21+-0x2599+0x43fd:-0x1c70+-0x1398+-0x1*-0x300e;for(let _0x2318ae=-0x181*0x1+-0x1217*-0x2+-0x22ad;_0x2318ae<_0x46e9b4;_0x2318ae++){const _0x43aee3=_0x4a9b71['getRenderD'+'ata'](null,_0x2318ae),_0x3f4ff8=_0x43aee3['shadowCame'+'ra'];_0x3f4ff8['nearClip']=_0x4a9b71['attenuatio'+'nEnd']/(0x2066+-0x2*-0x43a+-0x1*0x24f2),_0x3f4ff8['farClip']=_0x4a9b71['attenuatio'+'nEnd'];const _0x337cd8=_0x3f4ff8['_node'],_0x25a7a2=_0x4a9b71['_node'];if(_0x337cd8['setPositio'+'n'](_0x25a7a2['getPositio'+'n']()),_0x19030e===Ze)_0x3f4ff8['fov']=_0x4a9b71['_outerCone'+'Angle']*(0x9f*-0x22+0xa13*0x2+0x7d*0x2),_0x337cd8['setRotatio'+'n'](_0x25a7a2['getRotatio'+'n']()),_0x337cd8['rotateLoca'+'l'](-(0x1647+-0x15e7+0x6*-0x1),0x13f4*0x1+0x330+-0x4*0x5c9,-0xe6b*0x2+-0x26*-0xbd+0xc8);else{if(_0x19030e===Ke){if(_0x3543e5){const _0x22ae66=(0x5*-0xef+-0x197b+-0x4*-0x78a)/(this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowAtla'+'sResolutio'+'n']*_0x4a9b71['atlasViewp'+'ort']['z']/(0x23b1+-0x1ffe+0x10*-0x3b))*this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowEdge'+'Pixels'];_0x3f4ff8['fov']=Math['atan'](0xd71+-0xad*0x1+-0xcc3+_0x22ae66)*Y['RAD_TO_DEG']*(-0x47*0x22+0x198b+0x24d*-0x7);}else _0x3f4ff8['fov']=-0xadd*-0x1+0xbf5*0x1+-0x1678;}}this['renderer']['updateCame'+'raFrustum'](_0x3f4ff8),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x3f8453,_0x4a9b71,_0x43aee3['visibleCas'+'ters'],_0x3f4ff8,_0x437a84);}}['prepareLig'+'hts'](_0x49bcb3,_0x78e164){let _0x22093b;for(let _0x474321=-0x182f+0x1cf6+-0x4c7;_0x474321<_0x78e164['length'];_0x474321++){const _0x18c5f0=_0x78e164[_0x474321];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x18c5f0)&&_0x18c5f0['atlasViewp'+'ortAllocat'+'ed']){_0x49bcb3['push'](_0x18c5f0);for(let _0x4c7824=-0x6ad*-0x2+0x3*-0x14d+-0x973;_0x4c7824<_0x18c5f0['numShadowF'+'aces'];_0x4c7824++)_0x22093b=this['shadowRend'+'erer']['prepareFac'+'e'](_0x18c5f0,null,_0x4c7824);}}return _0x22093b;}['buildNonCl'+'usteredRen'+'derPasses'](_0x4fe4a2,_0x1d9e1e){for(let _0x2ff238=0x74*-0x4+-0x7*0x4b1+-0x3*-0xb8d;_0x2ff238<_0x1d9e1e['length'];_0x2ff238++){const _0x4bd348=_0x1d9e1e[_0x2ff238];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x4bd348)){const _0x36614d=_0x4bd348['_type']===Ze,_0x21c001=_0x4bd348['numShadowF'+'aces'];for(let _0x4b69f3=-0x1*0x912+0x135d+-0xa4b;_0x4b69f3<_0x21c001;_0x4b69f3++){const _0x63d68c=new ZE(this['device'],this['shadowRend'+'erer'],_0x4bd348,_0x4b69f3,_0x36614d);_0x4fe4a2['addRenderP'+'ass'](_0x63d68c);}}}}}class JE extends ys{constructor(_0x903017,_0x13ba5a,_0x5b913d,_0x213061,_0x40b752){super(_0x903017),ya['setName'](this,this['name']+'-'+_0x5b913d['_node']['name']),this['shadowRend'+'erer']=_0x13ba5a,this['light']=_0x5b913d,this['camera']=_0x213061,this['allCascade'+'sRendering']=_0x40b752;}['execute'](){const {light:_0xa86cb6,camera:_0x2f5ba0,shadowRenderer:_0x3bd8ad,allCascadesRendering:_0x20b7a0}=this,_0x3805f9=_0xa86cb6['numShadowF'+'aces'],_0x37b02c=_0xa86cb6['shadowUpda'+'teOverride'+'s'];for(let _0x22c4d3=0x1dc5*0x1+0xdd1+-0x2b96;_0x22c4d3<_0x3805f9;_0x22c4d3++)(_0x37b02c==null?void(-0xd*0x203+-0x1c9c+0x36c3):_0x37b02c[_0x22c4d3])!==Ps&&_0x3bd8ad['renderFace'](_0xa86cb6,_0x2f5ba0,_0x22c4d3,!_0x20b7a0),(_0x37b02c==null?void(0x125c*0x2+-0x146f+-0x1049):_0x37b02c[_0x22c4d3])===gr&&(_0x37b02c[_0x22c4d3]=Ps);}['after'](){this['shadowRend'+'erer']['renderVsm'](this['light'],this['camera']);}}const jl=new De(),Ti=new D(),p_=new te(),Xe=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()],Od={'min':0x0,'max':0x0};function eb(_0x31c51c,_0x415477,_0x20784b){Xe[0x2de+0x1*0x1763+-0x1a41]['x']=Xe[0x21*-0x33+0xbe1+-0x54d]['x']=Xe[-0x1*0x13b3+-0x1b29*-0x1+0x2*-0x3ba]['x']=Xe[0x1a0+-0x16b3+0x1516]['x']=_0x415477['x'],Xe[0x14b*0x5+-0xf95*-0x1+-0xab*0x21]['y']=Xe[-0x17fb+0x16d1+0x7*0x2b]['y']=Xe[-0x13*-0x6d+0x16*0x197+-0x2b0a]['y']=Xe[0x2*0x1f3+0xd9*-0x10+0x9af]['y']=_0x415477['y'],Xe[-0x2194+0x2*-0x946+0x3422]['z']=Xe[0x21fa*-0x1+-0x67d*0x5+-0x1*-0x426e]['z']=Xe[0x1433*0x1+0x8aa+-0x6b*0x45]['z']=Xe[-0x191*0x1+0x245a+-0x22c2]['z']=_0x415477['z'],Xe[-0x1*0x2173+-0x2639+0x8f6*0x8]['x']=Xe[-0x1a17*-0x1+0xa1d*-0x1+0xff5*-0x1]['x']=Xe[0x58+-0x11*0x245+0x2643]['x']=Xe[0x513+0x1a63+0x1*-0x1f6f]['x']=_0x20784b['x'],Xe[0x91*0x22+-0x17d0+0x48e]['y']=Xe[0x2512+0x9*0x23b+-0x3923]['y']=Xe[-0x1*-0x11f3+0x1d10+-0x2eff]['y']=Xe[-0x159*0x5+0x4*-0x13+-0x1*-0x70f]['y']=_0x20784b['y'],Xe[0x443*0x5+-0xd31+-0x1*0x81e]['z']=Xe[0x1225*-0x1+-0x1*-0x16a9+0x5*-0xe7]['z']=Xe[0x85+-0x1586*0x1+-0x1505*-0x1]['z']=Xe[-0x25bb+-0x14d4+0x3a94]['z']=_0x20784b['z'];let _0x30c875=-0x4864356df+-0x3818c8db5+0xa5bdbc893,_0x30ab17=-(-0x258232e57*0x1+-0x2*-0x119eb7415+-0x15ce131c*-0x1d);for(let _0x320262=-0x509*0x7+0x9*0x337+0x650;_0x320262<0x4*-0x896+0x1261*0x2+-0xa*0x3d;++_0x320262){_0x31c51c['transformP'+'oint'](Xe[_0x320262],Xe[_0x320262]);const _0x44143c=Xe[_0x320262]['z'];_0x44143c<_0x30c875&&(_0x30c875=_0x44143c),_0x44143c>_0x30ab17&&(_0x30ab17=_0x44143c);}return Od['min']=_0x30c875,Od['max']=_0x30ab17,Od;}class tb{constructor(_0x430040,_0x5483f6){h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x430040,this['shadowRend'+'erer']=_0x5483f6,this['device']=_0x430040['device']);}['cull'](_0x58c73f,_0x126a19,_0xce4161,_0x1a31c9=null){_0x58c73f['visibleThi'+'sFrame']=!(0xf92+-0x98f*0x3+0xd1b),_0x58c73f['_shadowMap']||(_0x58c73f['_shadowMap']=ma['create'](this['device'],_0x58c73f));const _0xa93b9d=_0xce4161['_nearClip'];this['generateSp'+'litDistanc'+'es'](_0x58c73f,_0xa93b9d,Math['min'](_0xce4161['_farClip'],_0x58c73f['shadowDist'+'ance']));const _0x4b8b41=_0x58c73f['shadowUpda'+'teOverride'+'s'];for(let _0x521e08=0x3f*-0x8d+-0xe88+-0x313b*-0x1;_0x521e08<_0x58c73f['numCascade'+'s']&&(_0x4b8b41==null?void(0x2571+-0x886+-0x1ceb):_0x4b8b41[_0x521e08])!==Ps;_0x521e08++){const _0x4c7a15=_0x58c73f['getRenderD'+'ata'](_0xce4161,_0x521e08),_0x34079f=_0x4c7a15['shadowCame'+'ra'];_0x34079f['renderTarg'+'et']=_0x58c73f['_shadowMap']['renderTarg'+'ets'][-0xa34+0x1*-0x248d+-0x1*-0x2ec1],_0x4c7a15['shadowView'+'port']['copy'](_0x58c73f['cascades'][_0x521e08]),_0x4c7a15['shadowScis'+'sor']['copy'](_0x58c73f['cascades'][_0x521e08]);const _0x170ffc=_0x34079f['_node'],_0x52547a=_0x58c73f['_node'];_0x170ffc['setPositio'+'n'](_0x52547a['getPositio'+'n']()),_0x170ffc['setRotatio'+'n'](_0x52547a['getRotatio'+'n']()),_0x170ffc['rotateLoca'+'l'](-(-0x129e*0x2+0x22+0x2574),-0x1*-0x7ed+-0x2479*0x1+0x1c8c,-0x1b61+0x1406+0x75b);const _0x301f0b=_0x521e08===-0x57*0x35+0x1e*-0xd4+0x2adb?_0xa93b9d:_0x58c73f['_shadowCas'+'cadeDistan'+'ces'][_0x521e08-(-0x2214+-0x201*-0xd+0x808)],_0x45b889=_0x58c73f['_shadowCas'+'cadeDistan'+'ces'][_0x521e08],_0x4b45b9=_0xce4161['getFrustum'+'Corners'](_0x301f0b,_0x45b889);Ti['set'](-0xd1c*0x2+-0x1334+0x2d6c,0x3d6+0xf91+-0x1367,-0x376+-0xc32*-0x1+-0x22f*0x4);const _0x329dcf=_0xce4161['node']['getWorldTr'+'ansform']();for(let _0x499207=0x1*-0x5e9+-0x3*-0x36d+-0x2*0x22f;_0x499207<-0x15fd+0x525*-0x2+0x204f;_0x499207++)_0x329dcf['transformP'+'oint'](_0x4b45b9[_0x499207],_0x4b45b9[_0x499207]),Ti['add'](_0x4b45b9[_0x499207]);Ti['mulScalar']((0xe0e+-0x1d4+-0x1bf*0x7)/(-0x1bb3*0x1+0x3a+0x1b81));let _0x3d3139=0x232+0xefa+-0x112c;for(let _0xc32d51=-0x1afb*0x1+0x1c4*-0x11+0x38ff;_0xc32d51<-0x2*-0x1241+-0x50a+-0x1f70;_0xc32d51++){const _0x2692ed=_0x4b45b9[_0xc32d51]['sub'](Ti)['length']();_0x2692ed>_0x3d3139&&(_0x3d3139=_0x2692ed);}const _0x51c68e=_0x170ffc['right'],_0x5901bd=_0x170ffc['up'],_0x5e2662=_0x170ffc['forward'],_0x420ffb=(0x4af*-0x1+-0x1*0x120b+0x16ba+0.25)*_0x58c73f['_shadowRes'+'olution']/_0x3d3139,_0x50b2f8=Math['ceil'](Ti['dot'](_0x5901bd)*_0x420ffb)/_0x420ffb,_0x335f6f=Math['ceil'](Ti['dot'](_0x51c68e)*_0x420ffb)/_0x420ffb,_0x256b38=_0x5901bd['mulScalar'](_0x50b2f8),_0x38126f=_0x51c68e['mulScalar'](_0x335f6f),_0x25dc3d=Ti['dot'](_0x5e2662),_0x1d9d88=_0x5e2662['mulScalar'](_0x25dc3d);Ti['add2'](_0x256b38,_0x38126f)['add'](_0x1d9d88),_0x170ffc['setPositio'+'n'](Ti),_0x170ffc['translateL'+'ocal'](0x9*0x206+-0x2*-0x9ab+-0x9*0x42c,-0x34*-0xe+-0x263b+-0x2363*-0x1,-0x1c839b+0x13e06c+0x17e56f),_0x34079f['nearClip']=0x23f7+0x6a5*-0x3+-0x1008+0.01,_0x34079f['farClip']=-0x354854+0x1690f+-0x1*-0x5263c5,_0x34079f['orthoHeigh'+'t']=_0x3d3139,this['renderer']['updateCame'+'raFrustum'](_0x34079f),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x126a19,_0x58c73f,_0x4c7a15['visibleCas'+'ters'],_0x34079f,_0x1a31c9);const _0x4f621f=-0x22ab+-0x7*-0x114+0x1b20<<_0x521e08,_0x515ab0=_0x4c7a15['visibleCas'+'ters'],_0x5f5343=_0x515ab0['length'];let _0x11d48e=0x11c7+0x725+-0x18ec;for(let _0x420b07=-0x9*-0x7a+0x22b1+0x24b*-0x11;_0x420b07<_0x5f5343;_0x420b07++){const _0x26199f=_0x515ab0[_0x420b07];_0x26199f['shadowCasc'+'adeMask']&_0x4f621f&&(_0x515ab0[_0x11d48e++]=_0x26199f,_0x11d48e===-0x3*0x31c+0x20c5+0x14*-0x12c?jl['copy'](_0x26199f['aabb']):jl['add'](_0x26199f['aabb']));}_0x5f5343!==_0x11d48e&&(_0x515ab0['length']=_0x11d48e),p_['copy'](_0x170ffc['getWorldTr'+'ansform']())['invert']();const _0x4f7eeb=eb(p_,jl['getMin'](),jl['getMax']());_0x170ffc['translateL'+'ocal'](-0x2b*0x43+-0x2ab*0xd+0x2df0,-0x5*-0x799+-0x347+-0x22b6,_0x4f7eeb['max']+(0x26f6+0x18ff+-0x3ff5+0.1)),_0x34079f['farClip']=_0x4f7eeb['max']-_0x4f7eeb['min']+(-0x14c7+0x22f6+-0xe2f+0.2),_0x4c7a15['projection'+'Compensati'+'on']=_0x3d3139;}}['generateSp'+'litDistanc'+'es'](_0x4abfc5,_0x215c37,_0x28cbdc){_0x4abfc5['_shadowCas'+'cadeDistan'+'ces']['fill'](_0x28cbdc);for(let _0x16f189=-0x1*0x165b+0x163b+0x21;_0x16f189<_0x4abfc5['numCascade'+'s'];_0x16f189++){const _0x3654f5=_0x16f189/_0x4abfc5['numCascade'+'s'],_0x4db9ae=_0x215c37+(_0x28cbdc-_0x215c37)*_0x3654f5,_0x65342d=_0x215c37*(_0x28cbdc/_0x215c37)**_0x3654f5,_0x884bbd=Y['lerp'](_0x4db9ae,_0x65342d,_0x4abfc5['cascadeDis'+'tribution']);_0x4abfc5['_shadowCas'+'cadeDistan'+'ces'][_0x16f189-(-0x11*0xe3+0x7a+0x1*0xe9a)]=_0x884bbd;}}['getLightRe'+'nderPass'](_0x43f67,_0x3f8926){w['assert'](_0x43f67&&_0x43f67['_type']===ve);let _0x512e9e=null;if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x43f67)){const _0x541aa4=_0x43f67['numShadowF'+'aces'],_0x398f4c=_0x43f67['shadowUpda'+'teOverride'+'s'];let _0x49cddc=!(0x139f+0xddd+-0x2*0x10be),_0x1dfa08;for(let _0x4542e8=0x2183+0x1e66+0x1*-0x3fe9;_0x4542e8<_0x541aa4;_0x4542e8++)(_0x398f4c==null?void(0x250*-0xd+-0xa6+0x1eb6):_0x398f4c[_0x4542e8])===Ps&&(_0x49cddc=!(-0x463+-0x1f7f+0x23e3)),_0x1dfa08=this['shadowRend'+'erer']['prepareFac'+'e'](_0x43f67,_0x3f8926,_0x4542e8);_0x512e9e=new JE(this['device'],this['shadowRend'+'erer'],_0x43f67,_0x3f8926,_0x49cddc),this['shadowRend'+'erer']['setupRende'+'rPass'](_0x512e9e,_0x1dfa08,_0x49cddc);}return _0x512e9e;}}const Fd=new Set(),m_=new te(),__=new te(),Ir=new Float32Array(0x1*0x1cb+-0x1787+0x15be),to=new re(0x8*0x71+0x10d*-0x9+-0x21*-0x2e,0x15e4+0x1198+-0x277b,0x1e91*0x1+0x3*0x199+0x92*-0x3e,-0x72f+0x1*0x75f+-0x6*0x8),g_=new te();function sb(_0x3cd908,_0x29dd1d){return Math['exp'](-(_0x3cd908*_0x3cd908)/((0x7f6+0x10cf+0x1*-0x18c3)*_0x29dd1d*_0x29dd1d));}function ib(_0x588e33){const _0x3e0a0a=(_0x588e33-(-0xe2c*0x1+-0x4b9*-0x2+0xad*0x7))/(-0xfd4+-0x39*-0x95+-0x1153),_0x1ca817=(_0x588e33-(0x1a87+0x2401+0x3e87*-0x1))*(0x1d04+-0x15b+0x49*-0x61+0.5),_0x1f3c8e=new Array(_0x588e33);let _0x4b0110=0x1*-0xb99+-0x2*-0xdf5+0x1*-0x1051;for(let _0x1f532a=-0x5*0xf2+-0x2182+0x131e*0x2;_0x1f532a<_0x588e33;++_0x1f532a)_0x1f3c8e[_0x1f532a]=sb(_0x1f532a-_0x1ca817,_0x3e0a0a),_0x4b0110+=_0x1f3c8e[_0x1f532a];for(let _0x1f818a=0x687+0x1*-0x1d09+0x2*0xb41;_0x1f818a<_0x588e33;++_0x1f818a)_0x1f3c8e[_0x1f818a]/=_0x4b0110;return _0x1f3c8e;}class $y{constructor(_0x23ba0f,_0x2adfbe){h(this,'shadowPass'+'Cache',[]),(this['device']=_0x23ba0f['device'],this['renderer']=_0x23ba0f,this['lightTextu'+'reAtlas']=_0x2adfbe);const _0x3a504c=this['device']['scope'];this['sourceId']=_0x3a504c['resolve']('source'),this['pixelOffse'+'tId']=_0x3a504c['resolve']('pixelOffse'+'t'),this['weightId']=_0x3a504c['resolve']('weight[0]'),this['blurVsmSha'+'der']=[{},{}],this['blurVsmWei'+'ghts']={},this['shadowMapL'+'ightRadius'+'Id']=_0x3a504c['resolve']('light_radi'+'us'),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['blendState'+'Write']=new pt(),this['blendState'+'NoWrite']=new pt(),this['blendState'+'NoWrite']['setColorWr'+'ite'](!(-0x1*0x20e+-0x1*-0x567+-0xd6*0x4),!(0x12b*0xc+-0x14ed+0x6ea*0x1),!(-0x2152+-0x78*-0xa+0x1ca3),!(0x1296+0x2e8+-0x157d));}static['createShad'+'owCamera'](_0xd4a60,_0xf663cd,_0x200562){const _0x439d65=kn['create']('ShadowCame'+'ra',_0xf663cd,_0x200562),_0x57340c=Xi['get'](_0xd4a60);w['assert'](_0x57340c);const _0xafc50=(_0x57340c==null?void(-0x1c9*-0x7+-0x1*-0x260f+-0x328e):_0x57340c['vsm'])??!(0x9fc+-0x1aaf+0x1*0x10b4),_0x104434=(_0x57340c==null?void(-0x10c3+-0x17*-0x89+0xc*0x5f):_0x57340c['pcf'])??!(0x1*0x13bf+0x107b*0x1+0x34b*-0xb);return _0xafc50?_0x439d65['clearColor']=new ie(-0x7*-0x475+0x2393+-0x32e*0x15,0x88d*0x4+0x1*-0x263f+0x40b,-0x415+-0x744+0xb59,0x1e*-0x17+0x1c7e+-0x19cc):_0x439d65['clearColor']=new ie(-0x1cc6*-0x1+0xc7*-0x1+-0x1bfe,-0x1fe4+-0x1cbf+0x3ca4,0x4*0x423+0x1ff6+0x3*-0x102b,-0x92f*-0x3+0x7da*-0x1+-0x13b2),_0x439d65['clearDepth'+'Buffer']=!(-0x1*0x72f+-0x1246+0x1*0x1975),_0x439d65['clearStenc'+'ilBuffer']=!(-0x1*-0x392+-0xa43+0x6b2),_0x439d65['clearColor'+'Buffer']=!_0x104434,_0x439d65;}['_cullShado'+'wCastersIn'+'ternal'](_0x7b9c7b,_0x5780bb,_0x264c21){const _0x1c18bd=_0x7b9c7b['length'];for(let _0x4edb48=0x3*-0x2c6+0x2*-0x879+0x1944;_0x4edb48<_0x1c18bd;_0x4edb48++){const _0x19367d=_0x7b9c7b[_0x4edb48];_0x19367d['castShadow']&&(!_0x19367d['cull']||_0x19367d['_isVisible'](_0x264c21))&&(_0x19367d['visibleThi'+'sFrame']=!(0x4f*-0x6d+-0x1*-0x13d6+0xdcd),_0x5780bb['push'](_0x19367d));}}['cullShadow'+'Casters'](_0x3a41a4,_0x26077c,_0x35639a,_0x426ebf,_0x1bcefc){var _0x4ef5ef,_0x54db88;if((_0x4ef5ef=this['renderer']['scene'])==null||_0x4ef5ef['fire'](Ry,_0x426ebf),_0x35639a['length']=-0x143+0x1754*-0x1+0x1*0x1897,_0x1bcefc)this['_cullShado'+'wCastersIn'+'ternal'](_0x1bcefc,_0x35639a,_0x426ebf);else{const _0x55d667=_0x3a41a4['layerList'],_0x2ddf5e=_0x55d667['length'];for(let _0x27a0f0=0x7*0x3ab+0x10eb+-0x2a98;_0x27a0f0<_0x2ddf5e;_0x27a0f0++){const _0x1fc6d5=_0x55d667[_0x27a0f0];_0x1fc6d5['_lightsSet']['has'](_0x26077c)&&(Fd['has'](_0x1fc6d5)||(Fd['add'](_0x1fc6d5),this['_cullShado'+'wCastersIn'+'ternal'](_0x1fc6d5['shadowCast'+'ers'],_0x35639a,_0x426ebf)));}Fd['clear']();}_0x35639a['sort'](this['sortCompar'+'eShader']),(_0x54db88=this['renderer']['scene'])==null||_0x54db88['fire'](Oy,_0x426ebf);}['sortCompar'+'eShader'](_0x5d88d,_0x1248a9){const _0xfc0c7=_0x5d88d['_sortKeySh'+'adow'],_0x10848a=_0x1248a9['_sortKeySh'+'adow'];return _0xfc0c7===_0x10848a?_0x1248a9['mesh']['id']-_0x5d88d['mesh']['id']:_0x10848a-_0xfc0c7;}['setupRende'+'rState'](_0x176290,_0x123189){const _0x56bdc4=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']?_0x123189['_isPcf']:_0x123189['_isPcf']&&_0x123189['_type']!==Ke;_0x176290['setBlendSt'+'ate'](_0x56bdc4?this['blendState'+'NoWrite']:this['blendState'+'Write']),_0x176290['setDepthSt'+'ate'](_0x123189['shadowDept'+'hState']),_0x176290['setStencil'+'State'](null,null);}['dispatchUn'+'iforms'](_0x11093e,_0x3c0bc,_0x4e023a,_0x2c533d){const _0x5aa106=_0x3c0bc['_node'];_0x11093e['_type']!==ve&&(this['renderer']['dispatchVi'+'ewPos'](_0x5aa106['getPositio'+'n']()),this['shadowMapL'+'ightRadius'+'Id']['setValue'](_0x11093e['attenuatio'+'nEnd'])),m_['setTRS'](_0x5aa106['getPositio'+'n'](),_0x5aa106['getRotatio'+'n'](),D['ONE'])['invert'](),__['mul2'](_0x3c0bc['projection'+'Matrix'],m_);const _0x2f83cf=_0x4e023a['shadowView'+'port'];_0x3c0bc['rect']=_0x2f83cf,_0x3c0bc['scissorRec'+'t']=_0x4e023a['shadowScis'+'sor'],g_['setViewpor'+'t'](_0x2f83cf['x'],_0x2f83cf['y'],_0x2f83cf['z'],_0x2f83cf['w']),_0x4e023a['shadowMatr'+'ix']['mul2'](g_,__),_0x11093e['_type']===ve&&_0x11093e['_shadowMat'+'rixPalette']['set'](_0x4e023a['shadowMatr'+'ix']['data'],_0x2c533d*(-0x9d*-0xb+0x136*-0x16+-0x3*-0x6a7));}['getShadowP'+'ass'](_0x4d0282){var _0x48a799;const _0xd73776=_0x4d0282['_type'],_0x1051b6=_0x4d0282['_shadowTyp'+'e'];let _0x3fd922=(_0x48a799=this['shadowPass'+'Cache'][_0xd73776])==null?void(-0xd9b+-0x1*-0x8ed+0x4ae):_0x48a799[_0x1051b6];if(!_0x3fd922){const _0x4db114='ShadowPass'+'_'+_0xd73776+'_'+_0x1051b6;_0x3fd922=Si['get'](this['device'])['allocate'](_0x4db114,{'isShadow':!(0x29e+0x4*-0x863+0xf77*0x2),'lightType':_0xd73776,'shadowType':_0x1051b6}),this['shadowPass'+'Cache'][_0xd73776]||(this['shadowPass'+'Cache'][_0xd73776]=[]),this['shadowPass'+'Cache'][_0xd73776][_0x1051b6]=_0x3fd922;}return _0x3fd922['index'];}['submitCast'+'ers'](_0x45cafe,_0xbb0c41,_0x119595){var _0x2c0fac;const _0x2a5108=this['device'],_0x2357f7=this['renderer'],_0x52c011=_0x2357f7['scene'],_0x282676=-0xa57+0x5de+0x47a<<Np,_0x4117fc=this['getShadowP'+'ass'](_0xbb0c41),_0x3c03f9=_0x119595['shaderPara'+'ms'],_0x47c888=_0x119595['renderTarg'+'et']['flipY']?-(-0x4f2*-0x1+0xb4f*-0x1+-0xa*-0xa3):0x76e*0x1+0xcb7+-0x1424*0x1,_0x21bafe=_0x45cafe['length'];for(let _0x2d1f88=0x20e*-0x11+0xeab*0x1+0x7*0x2e5;_0x2d1f88<_0x21bafe;_0x2d1f88++){const _0x21d729=_0x45cafe[_0x2d1f88],_0x4a12e9=_0x21d729['mesh'],_0x441a5d=_0x21d729['instancing'+'Data'];if(_0x441a5d&&_0x441a5d['count']<=0x8*0x25c+-0x31*0x3b+-0x795)continue;_0x21d729['ensureMate'+'rial'](_0x2a5108);const _0x371916=_0x21d729['material'];Q['pushGpuMar'+'ker'](_0x2a5108,'Node:\x20'+_0x21d729['node']['name']+(',\x20Material'+':\x20')+_0x371916['name']),_0x2357f7['setBaseCon'+'stants'](_0x2a5108,_0x371916),_0x2357f7['setSkinnin'+'g'](_0x2a5108,_0x21d729),_0x371916['dirty']&&(_0x371916['updateUnif'+'orms'](_0x2a5108,_0x52c011),_0x371916['dirty']=!(-0x1b99+-0x1e01+0x399b)),_0x2357f7['setupCullM'+'ode'](!(-0x3*0x91b+0xbe3*0x2+0x38b),_0x47c888,_0x21d729),_0x371916['setParamet'+'ers'](_0x2a5108),_0x21d729['setParamet'+'ers'](_0x2a5108,_0x282676);const _0x336903=_0x21d729['getShaderI'+'nstance'](_0x4117fc,-0x1f7d+-0x1*-0x3d1+0x1bac,_0x52c011,_0x3c03f9,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat']),_0x1fd4d3=_0x336903['shader'];if(w['assert'](_0x1fd4d3,'no\x20shader\x20'+'for\x20pass\x20'+_0x4117fc,_0x371916),_0x1fd4d3['failed'])continue;_0x21d729['_sortKeySh'+'adow']=_0x1fd4d3['id'],_0x2a5108['setShader'](_0x1fd4d3),_0x2357f7['setVertexB'+'uffers'](_0x2a5108,_0x4a12e9),_0x2357f7['setMorphin'+'g'](_0x2a5108,_0x21d729['morphInsta'+'nce']),_0x441a5d&&_0x2a5108['setVertexB'+'uffer'](_0x441a5d['vertexBuff'+'er']),_0x2357f7['setMeshIns'+'tanceMatri'+'ces'](_0x21d729),_0x2357f7['setupMeshU'+'niformBuff'+'ers'](_0x336903);const _0x5d7808=_0x21d729['renderStyl'+'e'],_0x9a459b=(_0x2c0fac=_0x21d729['indirectDa'+'ta'])==null?void(0xcba+0x1df1+-0x2aab):_0x2c0fac['get'](_0x119595);_0x2a5108['draw'](_0x4a12e9['primitive'][_0x5d7808],_0x4a12e9['indexBuffe'+'r'][_0x5d7808],_0x441a5d==null?void(-0x11*-0x87+0x8*0x19+0x1f3*-0x5):_0x441a5d['count'],_0x9a459b),_0x2357f7['_shadowDra'+'wCalls']++,_0x441a5d&&_0x2357f7['_instanced'+'DrawCalls']++,Q['popGpuMark'+'er'](_0x2a5108);}}['needsShado'+'wRendering'](_0x22b4ab){const _0x345cfd=_0x22b4ab['enabled']&&_0x22b4ab['castShadow'+'s']&&_0x22b4ab['shadowUpda'+'teMode']!==Ps&&_0x22b4ab['visibleThi'+'sFrame'];return _0x22b4ab['shadowUpda'+'teMode']===gr&&(_0x22b4ab['shadowUpda'+'teMode']=Ps),_0x345cfd&&(this['renderer']['_shadowMap'+'Updates']+=_0x22b4ab['numShadowF'+'aces']),_0x345cfd;}['getLightRe'+'nderData'](_0x13f9f2,_0x2ab268,_0x43e59b){return _0x13f9f2['getRenderD'+'ata'](_0x13f9f2['_type']===ve?_0x2ab268:null,_0x43e59b);}['setupRende'+'rPass'](_0x41e67d,_0x2eb387,_0x31fe3a){const _0x136f5e=_0x2eb387['renderTarg'+'et'];_0x41e67d['init'](_0x136f5e),_0x41e67d['depthStenc'+'ilOps']['clearDepth'+'Value']=0x1124+-0x1622+0x4ff,_0x41e67d['depthStenc'+'ilOps']['clearDepth']=_0x31fe3a,_0x136f5e['depthBuffe'+'r']?_0x41e67d['depthStenc'+'ilOps']['storeDepth']=!(0x1021*-0x1+-0x2*-0xf31+-0xe41):(_0x41e67d['colorOps']['clearValue']['copy'](_0x2eb387['clearColor']),_0x41e67d['colorOps']['clear']=_0x31fe3a,_0x41e67d['depthStenc'+'ilOps']['storeDepth']=!(-0x1*0xe9+-0x109d*-0x1+0xfb3*-0x1)),_0x41e67d['requiresCu'+'bemaps']=!(0x153e*0x1+0x11*-0x5b+-0x1*0xf32);}['prepareFac'+'e'](_0x38b9e0,_0x552c44,_0x549af4){const _0x8c1124=_0x38b9e0['_type'],_0x261d6f=this['getLightRe'+'nderData'](_0x38b9e0,_0x552c44,_0x549af4)['shadowCame'+'ra'],_0x450831=_0x8c1124===ve?0x1b7c+0x1455+-0x2fd1*0x1:_0x549af4;return _0x261d6f['renderTarg'+'et']=_0x38b9e0['_shadowMap']['renderTarg'+'ets'][_0x450831],_0x261d6f;}['renderFace'](_0x54cd52,_0x255136,_0x5b8dce,_0x17fe79,_0x195e05=!(-0x6*-0x389+0x2f4+0x2*-0xc15)){const _0x20cf3c=this['device'],_0x459972=de();Q['pushGpuMar'+'ker'](_0x20cf3c,'SHADOW\x20'+_0x54cd52['_node']['name']+'\x20FACE\x20'+_0x5b8dce);const _0x3ae541=this['getLightRe'+'nderData'](_0x54cd52,_0x255136,_0x5b8dce),_0xc7de08=_0x3ae541['shadowCame'+'ra'];this['dispatchUn'+'iforms'](_0x54cd52,_0xc7de08,_0x3ae541,_0x5b8dce);const _0x1196bf=_0xc7de08['renderTarg'+'et'],_0x5c34f8=this['renderer'];_0x5c34f8['setCameraU'+'niforms'](_0xc7de08,_0x1196bf),_0x20cf3c['supportsUn'+'iformBuffe'+'rs']&&_0x5c34f8['setupViewU'+'niformBuff'+'ers'](_0x3ae541['viewBindGr'+'oups'],this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],null),_0x195e05?(_0x5c34f8['setupViewp'+'ort'](_0xc7de08,_0x1196bf),_0x17fe79&&_0x5c34f8['clear'](_0xc7de08)):_0x5c34f8['clearView'](_0xc7de08,_0x1196bf,!(0x1aec+0x11*0x9+0x5*-0x581),!(0x36e*0x3+0x152f+-0x1f78)),this['setupRende'+'rState'](_0x20cf3c,_0x54cd52),this['submitCast'+'ers'](_0x3ae541['visibleCas'+'ters'],_0x54cd52,_0xc7de08),Q['popGpuMark'+'er'](_0x20cf3c),_0x5c34f8['_shadowMap'+'Time']+=de()-_0x459972;}['render'](_0x5bca4a,_0x39c58c,_0x312b66=!(-0x1*-0x1575+-0x579*-0x3+0x10*-0x25e)){if(this['needsShado'+'wRendering'](_0x5bca4a)){const _0x50bec9=_0x5bca4a['numShadowF'+'aces'];for(let _0x479edd=-0x247+-0x371*-0x1+-0x12a;_0x479edd<_0x50bec9;_0x479edd++)this['prepareFac'+'e'](_0x5bca4a,_0x39c58c,_0x479edd),this['renderFace'](_0x5bca4a,_0x39c58c,_0x479edd,!(0x887*-0x2+0x1*-0x2ff+0x140d),_0x312b66);this['renderVsm'](_0x5bca4a,_0x39c58c);}}['renderVsm'](_0x153947,_0x314848){_0x153947['_isVsm']&&_0x153947['_vsmBlurSi'+'ze']>-0x1a89*-0x1+0xf22+-0x29aa&&(!this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']||_0x153947['_type']===ve)&&this['applyVsmBl'+'ur'](_0x153947,_0x314848);}['getVsmBlur'+'Shader'](_0x3d00b0,_0x317113){const _0x4a0995=this['blurVsmSha'+'der'];let _0x36a674=_0x4a0995[_0x3d00b0][_0x317113];if(!_0x36a674){this['blurVsmWei'+'ghts'][_0x317113]=ib(_0x317113);const _0x2013c9=new Map();_0x2013c9['set']('{SAMPLES}',_0x317113),_0x3d00b0===-0x36f*0x4+-0x225b*0x1+0x3018&&_0x2013c9['set']('GAUSS',''),_0x36a674=$t['createShad'+'er'](this['device'],{'uniqueName':'blurVsm'+_0x3d00b0+_0x317113,'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'blurVSMPS','fragmentDefines':_0x2013c9}),_0x4a0995[_0x3d00b0][_0x317113]=_0x36a674;}return _0x36a674;}['applyVsmBl'+'ur'](_0x599138,_0x312d72){const _0x41e7f6=this['device'];Q['pushGpuMar'+'ker'](_0x41e7f6,'VSM\x20'+_0x599138['_node']['name']),_0x41e7f6['setBlendSt'+'ate'](pt['NOBLEND']);const _0x23694f=_0x599138['getRenderD'+'ata'](_0x599138['_type']===ve?_0x312d72:null,-0x1fc+0x17a1+-0x15a5*0x1)['shadowCame'+'ra']['renderTarg'+'et'],_0x5cd96d=this['renderer']['shadowMapC'+'ache']['get'](_0x41e7f6,_0x599138),_0x6b10f8=_0x5cd96d['renderTarg'+'ets'][0x806*-0x4+0x8d8*0x4+0x46*-0xc],_0x539b19=_0x599138['vsmBlurMod'+'e'],_0x37bc82=_0x599138['_vsmBlurSi'+'ze'],_0x11e917=this['getVsmBlur'+'Shader'](_0x539b19,_0x37bc82);to['z']=_0x599138['_shadowRes'+'olution']-(-0x1fc9+0x204f*0x1+-0x84),to['w']=to['z'],this['sourceId']['setValue'](_0x23694f['colorBuffe'+'r']),Ir[0x26c3+0x1d85+-0x5*0xda8]=(0x3*-0x332+0x1352+0x35*-0x2f)/_0x599138['_shadowRes'+'olution'],Ir[-0x1*0x22f9+-0x46b+0x2765*0x1]=0x125d+-0x4b4+-0xda9,this['pixelOffse'+'tId']['setValue'](Ir),_0x539b19===Cp&&this['weightId']['setValue'](this['blurVsmWei'+'ghts'][_0x37bc82]),Tr(_0x41e7f6,_0x6b10f8,_0x11e917,null,to),this['sourceId']['setValue'](_0x6b10f8['colorBuffe'+'r']),Ir[0x9c7*-0x1+0x1d2a+-0x1362]=Ir[0x358+-0xa68*-0x1+-0xdc0],Ir[0x3e2+-0x1d*0x4e+0x4f4]=0x529*0x1+0xb2+-0x5db,this['pixelOffse'+'tId']['setValue'](Ir),Tr(_0x41e7f6,_0x23694f,_0x11e917,null,to),this['renderer']['shadowMapC'+'ache']['add'](_0x599138,_0x5cd96d),Q['popGpuMark'+'er'](_0x41e7f6);}['initViewBi'+'ndGroupFor'+'mat'](){this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']&&(this['viewUnifor'+'mFormat']=new ry(this['device'],[new dt('matrix_vie'+'wProjectio'+'n',li)]),this['viewBindGr'+'oupFormat']=new ey(this['device'],[new hp(cp,lp|HS)]));}['frameUpdat'+'e'](){this['initViewBi'+'ndGroupFor'+'mat']();}}const Yl=[];class rb{constructor(_0x42e6a2){h(this,'_empty',null),h(this,'_allocated',[]),h(this,'_clusters',new Map()),this['device']=_0x42e6a2;}['destroy'](){this['_empty']&&(this['_empty']['destroy'](),this['_empty']=null),this['_allocated']['forEach'](_0x163e27=>{_0x163e27['destroy']();}),this['_allocated']['length']=-0x1f7c+0x3*0x37+0x1*0x1ed7;}get['count'](){return this['_allocated']['length'];}get['empty'](){if(!this['_empty']){const _0x310ad0=new kf(this['device']);_0x310ad0['name']='ClusterEmp'+'ty',_0x310ad0['update']([]),this['_empty']=_0x310ad0;}return this['_empty'];}['assign'](_0x6f2b1c){const _0x536c86=this['empty'];Yl['push'](...this['_allocated']),this['_allocated']['length']=0x138f*0x1+0x190e+-0x2c9d,this['_clusters']['clear']();const _0x1dfef1=_0x6f2b1c['length'];for(let _0x1c44e5=0x35*0xb1+0x1*0x1007+-0x34ac;_0x1c44e5<_0x1dfef1;_0x1c44e5++){const _0x1ed410=_0x6f2b1c[_0x1c44e5]['renderActi'+'ons'];if(_0x1ed410){const _0x4eb195=_0x1ed410['length'];for(let _0x50b191=-0x1*0x1553+-0x11f5*0x1+-0x13a4*-0x2;_0x50b191<_0x4eb195;_0x50b191++){const _0x3b13d0=_0x1ed410[_0x50b191];_0x3b13d0['lightClust'+'ers']=null;const _0x4c69a2=_0x3b13d0['layer'];if(_0x4c69a2['hasCluster'+'edLights']&&_0x4c69a2['meshInstan'+'ces']['length']){const _0x4143c1=_0x4c69a2['getLightId'+'Hash'](),_0xda7d45=this['_clusters']['get'](_0x4143c1);let _0x2911ec=_0xda7d45==null?void(-0x3*0x283+-0xa*0x315+0x265b):_0xda7d45['lightClust'+'ers'];_0x2911ec||(_0x2911ec=Yl['pop']()??new kf(this['device']),ya['setName'](_0x2911ec,'Cluster-'+this['_allocated']['length']),this['_allocated']['push'](_0x2911ec),this['_clusters']['set'](_0x4143c1,_0x3b13d0)),_0x3b13d0['lightClust'+'ers']=_0x2911ec;}_0x3b13d0['lightClust'+'ers']||(_0x3b13d0['lightClust'+'ers']=_0x536c86);}}}Yl['forEach'](_0x406c2d=>_0x406c2d['destroy']()),Yl['length']=0x1e5*0x10+-0x48*-0x59+-0x3758;}['update'](_0xf0c5f3,_0x2029ba){this['assign'](_0xf0c5f3),this['_clusters']['forEach'](_0x3105fc=>{const _0x4c78e5=_0x3105fc['layer'];_0x3105fc['lightClust'+'ers']['update'](_0x4c78e5['clusteredL'+'ightsSet'],_0x2029ba);});}}const ir=new re(),Nd=[];class Vp extends ys{constructor(_0x378e64,_0x46c081){super(_0x378e64),h(this,'_quadRende'+'rer2D',null),h(this,'_quadRende'+'rerCube',null),h(this,'_filteredL'+'ights',[]),h(this,'_forceCopy',!(-0x1*0x147a+-0x1*-0x1ea1+-0xa26*0x1)),h(this,'_evtDevice'+'Restored',null),(this['_cubeSlots'+'Offsets']=_0x46c081,this['requiresCu'+'bemaps']=!(-0x1*-0x70a+-0xab5+0x3ac),this['blitTextur'+'eId']=_0x378e64['scope']['resolve']('blitTextur'+'e'),this['invViewPro'+'jId']=_0x378e64['scope']['resolve']('invViewPro'+'j'),this['_evtDevice'+'Restored']=_0x378e64['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this));}['destroy'](){var _0x54aa4b,_0x44c2ab,_0x40a2bb;(_0x54aa4b=this['_quadRende'+'rer2D'])==null||_0x54aa4b['destroy'](),this['_quadRende'+'rer2D']=null,(_0x44c2ab=this['_quadRende'+'rerCube'])==null||_0x44c2ab['destroy'](),this['_quadRende'+'rerCube']=null,(_0x40a2bb=this['_evtDevice'+'Restored'])==null||_0x40a2bb['off'](),this['_evtDevice'+'Restored']=null;}static['create'](_0x1bd5b6,_0x5cb562){w['assert'](_0x1bd5b6);const _0x1b5e13=new Vp(_0x1bd5b6['device'],_0x5cb562);return _0x1b5e13['init'](_0x1bd5b6),_0x1b5e13['colorOps']['clear']=!(0x259f+-0x26f5*0x1+-0x31*-0x7),_0x1b5e13['depthStenc'+'ilOps']['clearDepth']=!(-0x26c9+0x1745+0x1d*0x89),_0x1b5e13;}['onDeviceRe'+'stored'](){this['_forceCopy']=!(-0x1a0a+-0x61+-0x1*-0x1a6b);}['update'](_0x3b0bca){const _0x253786=this['_filteredL'+'ights'];this['filter'](_0x3b0bca,_0x253786),this['executeEna'+'bled']=_0x253786['length']>0x21a6+0x126c+0x136*-0x2b;}['filter'](_0x21f6ab,_0x46b962){for(let _0x3ce068=0x7f2+-0x1aec+-0x1*-0x12fa;_0x3ce068<_0x21f6ab['length'];_0x3ce068++){const _0x18f41c=_0x21f6ab[_0x3ce068];_0x18f41c['_type']!==ve&&_0x18f41c['atlasViewp'+'ortAllocat'+'ed']&&(!_0x18f41c['atlasSlotU'+'pdated']&&!this['_forceCopy']||_0x18f41c['enabled']&&_0x18f41c['cookie']&&_0x18f41c['visibleThi'+'sFrame']&&_0x46b962['push'](_0x18f41c));}this['_forceCopy']=!(0xd*-0x263+0xce9+-0x1*-0x121f);}['initInvVie'+'wProjMatri'+'ces'](){if(!Nd['length'])for(let _0xf5e26b=-0x1b75+-0x1fcb+0x3b40;_0xf5e26b<-0x7d8+0x1d*0x2b+0x2ff;_0xf5e26b++){const _0x454831=kn['create'](null,Ke,_0xf5e26b),_0x28c59d=_0x454831['projection'+'Matrix'],_0x5efc92=_0x454831['node']['getLocalTr'+'ansform']()['clone']()['invert']();Nd[_0xf5e26b]=new te()['mul2'](_0x28c59d,_0x5efc92)['invert']();}}get['quadRender'+'er2D'](){if(!this['_quadRende'+'rer2D']){const _0x6f6389=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'erer2d','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'2DPS'});this['_quadRende'+'rer2D']=new rh(_0x6f6389);}return this['_quadRende'+'rer2D'];}get['quadRender'+'erCube'](){if(!this['_quadRende'+'rerCube']){const _0x2f1616=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'ererCube','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'CubePS'});this['_quadRende'+'rerCube']=new rh(_0x2f1616);}return this['_quadRende'+'rerCube'];}['execute'](){const _0x1e18e6=this['device'];_0x1e18e6['setBlendSt'+'ate'](pt['NOBLEND']),_0x1e18e6['setCullMod'+'e'](bt),_0x1e18e6['setDepthSt'+'ate'](Yt['NODEPTH']),_0x1e18e6['setStencil'+'State']();const _0x56ed77=this['renderTarg'+'et']['colorBuffe'+'r']['width'],_0x2868f1=this['_cubeSlots'+'Offsets'],_0x24a6b9=this['_filteredL'+'ights'];for(let _0x6833f=0x22f1+-0x738+-0x1bb9;_0x6833f<_0x24a6b9['length'];_0x6833f++){const _0x10ab33=_0x24a6b9[_0x6833f];Q['pushGpuMar'+'ker'](this['device'],'COOKIE\x20'+_0x10ab33['_node']['name']);const _0x39f409=_0x10ab33['numShadowF'+'aces'],_0x44aaaa=_0x39f409>-0x1598+0x1282+-0x71*-0x7?this['quadRender'+'erCube']:this['quadRender'+'er2D'];_0x39f409>0xacf+-0x1a6c+0x1*0xf9e&&this['initInvVie'+'wProjMatri'+'ces'](),this['blitTextur'+'eId']['setValue'](_0x10ab33['cookie']);for(let _0x60b970=-0x1*0x18f4+0x17ba+-0x13a*-0x1;_0x60b970<_0x39f409;_0x60b970++){if(ir['copy'](_0x10ab33['atlasViewp'+'ort']),_0x39f409>0x2*-0x617+-0x172e+0x337*0xb){const _0x54335f=ir['z']/(-0x7c3*-0x5+0xcf1+0xf*-0x373),_0x11798f=_0x2868f1[_0x60b970];ir['x']+=_0x54335f*_0x11798f['x'],ir['y']+=_0x54335f*_0x11798f['y'],ir['z']=_0x54335f,ir['w']=_0x54335f,this['invViewPro'+'jId']['setValue'](Nd[_0x60b970]['data']);}ir['mulScalar'](_0x56ed77),_0x44aaaa['render'](ir);}Q['popGpuMark'+'er'](_0x1e18e6);}_0x24a6b9['length']=0x1b14+0x1c8a+-0x379e;}}class ab extends ys{constructor(_0x4b7fb9,_0x24c72e,_0x3adb2c){super(_0x4b7fb9),this['requiresCu'+'bemaps']=!(-0x1a*-0xe8+-0xaeb+-0xca4),this['shadowRend'+'erer']=_0x24c72e,this['shadowRend'+'ererLocal']=_0x3adb2c;}['update'](_0x8d7c0e){const _0x1e2c15=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x2b7ba2=this['shadowRend'+'ererLocal']['prepareLig'+'hts'](_0x1e2c15,_0x8d7c0e),_0x51870a=_0x1e2c15['length'];this['enabled']=_0x51870a>-0x21c+0x10f4+-0xed8,_0x51870a&&this['shadowRend'+'erer']['setupRende'+'rPass'](this,_0x2b7ba2,!(0x537+-0x566*0x4+0x9*0x1d2));}['execute'](){const _0x57b8cd=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x4b473e=_0x57b8cd['length'];for(let _0x48cf91=-0x10d9*-0x2+0x16e2+-0x3894;_0x48cf91<_0x4b473e;_0x48cf91++){const _0x552bda=_0x57b8cd[_0x48cf91];for(let _0x14f398=-0x567+-0x15b9+-0x1*-0x1b20;_0x14f398<_0x552bda['numShadowF'+'aces'];_0x14f398++)this['shadowRend'+'erer']['renderFace'](_0x552bda,null,_0x14f398,!(0x53*-0x4+0x111a+-0x2*0x7e7));}_0x57b8cd['length']=-0x2551+0x1*0x1ed4+0x97*0xb;}}class nb extends ys{constructor(_0x358f72,_0x29b9bd,_0x4cc494,_0x21a20c,_0x375484){super(_0x358f72),this['renderer']=_0x29b9bd,this['frameGraph']=null,this['cookiesRen'+'derPass']=Vp['create'](_0x375484['cookieRend'+'erTarget'],_0x375484['cubeSlotsO'+'ffsets']),this['beforePass'+'es']['push'](this['cookiesRen'+'derPass']),this['shadowRend'+'erPass']=new ab(_0x358f72,_0x4cc494,_0x21a20c),this['beforePass'+'es']['push'](this['shadowRend'+'erPass']);}['update'](_0x48f82d,_0x7d21c8,_0x2cce5c,_0x39342d,_0xf162f){this['frameGraph']=_0x48f82d,this['cookiesRen'+'derPass']['enabled']=_0x2cce5c,_0x2cce5c&&this['cookiesRen'+'derPass']['update'](_0x39342d),this['shadowRend'+'erPass']['enabled']=_0x7d21c8,_0x7d21c8&&this['shadowRend'+'erPass']['update'](_0xf162f);}['destroy'](){this['cookiesRen'+'derPass']['destroy'](),this['cookiesRen'+'derPass']=null;}['execute'](){const _0x264dcf=de(),{renderer:_0x5dfc59}=this,{scene:_0x3b4fa3}=_0x5dfc59;_0x5dfc59['worldClust'+'ersAllocat'+'or']['update'](this['frameGraph']['renderPass'+'es'],_0x3b4fa3['lighting']),_0x5dfc59['_lightClus'+'tersTime']+=de()-_0x264dcf,_0x5dfc59['_lightClus'+'ters']=_0x5dfc59['worldClust'+'ersAllocat'+'or']['count'];}}let kd=-0x5c9*-0x5+-0x26ce*0x1+0x9e1;const rr=new te(),ar=new te(),Ma=new te(),S_=new _i(),Ud=new Mu(),y_=new te()['setScale'](0xa57*-0x3+-0x23b2+0x8*0x857,-(-0x2f2+0x157c+-0x1289),0x9c0+-0x24bc+0x1afd),Bd=new Set(),zd=new Set(),Vd=new ty(),v_=new te()['set']([-0x4*-0x2cf+-0xf3c+0x401,0x267a+-0x2100+0x57a*-0x1,0x10c1+0x8b9+0x197a*-0x1,-0x121*0xe+0x14b9*0x1+-0x4eb,0x18b3+-0x132b+-0xec*0x6,0x99c+0xb0*0x2f+-0x29eb,0x1550+0x2*-0x8a7+0x156*-0x3,0x96f+-0x246d+-0x2*-0xd7f,0xab5*0x2+0x1*-0x1331+-0x1*0x239,-0xa9a+0x4*0x5a8+-0xc06,0x5d8+0x604*-0x3+-0x16*-0x8e+0.5,-0x8*-0x4aa+-0x91d*0x2+-0x1316,-0x3*-0x624+-0x221d*-0x1+0x3489*-0x1,-0x247*0xa+0xda6+0x920,-0xa3*-0x19+-0x1391+0x2*0x1d3+0.5,-0x8b*0x2d+0x1588+0x2e8]),x_=[new J(-0xf39+0x1d7f+0xe*-0x105+0.5,-0x2078+0x218c+0x6*-0x2e+0.333333),new J(0x14e9+0x16e1*-0x1+-0x7e*-0x4+0.25,-0x34*-0x73+0x151a+-0xe*0x32d+0.666667),new J(-0x2*0x3dc+0x2273+-0x1abb+0.75,-0x1*-0x125+0x2614+-0x2739+0.111111),new J(0x6d0+0xe6d+-0x153d*0x1+0.125,0x174d+-0x6*0x63+-0x14fb+0.444444),new J(-0x222d+-0xda6*-0x1+0x1487+0.625,0x1492+0xe84+-0x2316*0x1+0.777778),new J(0x20*0xbb+0x8*-0x2e+0x68*-0x36+0.375,-0x1c2a+-0x1413+0xe9*0x35+0.222222),new J(0xeab*0x1+-0xbe1*0x2+0x917*0x1+0.875,0x70+0x54e+-0x5be*0x1+0.555556),new J(-0x2*0x2de+-0x369*0x7+-0x2b1*-0xb+0.0625,0x21c9+0x26fd+-0x48c6+0.888889),new J(-0xc7c+-0x1fe3+-0x1*-0x2c5f+0.5625,-0x196f+-0x16b5*0x1+0x3024+0.037037),new J(-0x1*0x1aa5+0x4*-0x8bf+0x3da1+0.3125,-0x2*-0xedb+-0x1c42+0x3e*-0x6+0.37037),new J(-0x22a*-0x1+-0x1ea+-0x8*0x8+0.8125,0x42*-0x27+0x4*-0x9b1+0x30d2+0.703704),new J(-0xf9a*0x1+-0x571+0x150b+0.1875,0x1*0x6b+-0xe19+-0xdae*-0x1+0.148148),new J(0xe64+0x19b3+-0x137*0x21+0.6875,-0x131c+0xa2a*-0x3+0x319a+0.481481),new J(-0x8*0x393+0x1602*-0x1+0x3*0x10de+0.4375,0x11cc+-0x8*-0x272+-0x255c+0.814815),new J(-0x7*-0xc7+0x18da+-0x1e4b+0.9375,0x443*-0x3+-0x9f+-0x42*-0x34+0.259259),new J(-0x1ae4+0x217d*-0x1+0x3c61+0.03125,0x19*-0xd0+-0x1965+0x2db5+0.592593)],ob=new te(),lb=new te(),cb=new te(),hb=new te(),db=new te(),fb=new te(),Da=new Set(),Gd=[],Hd=[];class ub{constructor(_0x43aae9){h(this,'clustersDe'+'bugRendere'+'d',!(0x17d0+0x1879*-0x1+-0x22*-0x5)),h(this,'processing'+'MeshInstan'+'ces',new Set()),h(this,'worldClust'+'ersAllocat'+'or'),h(this,'lights',[]),h(this,'localLight'+'s',[]),h(this,'cameraDirS'+'hadowLight'+'s',new Map()),h(this,'dirLightSh'+'adows',new Map()),h(this,'blueNoise',new VE(0x1*0x2445+0x107c+-0x1a23*0x2)),(this['device']=_0x43aae9,this['scene']=null,this['worldClust'+'ersAllocat'+'or']=new rb(_0x43aae9),this['lightTextu'+'reAtlas']=new YE(_0x43aae9),this['shadowMapC'+'ache']=new KE(),this['shadowRend'+'erer']=new $y(this,this['lightTextu'+'reAtlas']),this['_shadowRen'+'dererLocal']=new QE(this,this['shadowRend'+'erer']),this['_shadowRen'+'dererDirec'+'tional']=new tb(this,this['shadowRend'+'erer']),this['_renderPas'+'sUpdateClu'+'stered']=new nb(this['device'],this,this['shadowRend'+'erer'],this['_shadowRen'+'dererLocal'],this['lightTextu'+'reAtlas']),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['_skinTime']=-0x1*-0xc6b+0x9fe+-0x1*0x1669,this['_morphTime']=-0x1345*-0x2+-0x13b8*-0x1+0x1*-0x3a42,this['_cullTime']=-0x48f*0x5+-0x1b57*0x1+-0x1f*-0x19e,this['_shadowMap'+'Time']=0x1541*-0x1+0x3*-0xc86+0x559*0xb,this['_lightClus'+'tersTime']=0xb8f+0x1*-0x11e5+0x656,this['_layerComp'+'ositionUpd'+'ateTime']=0x11a0+-0x1a0b+-0x1af*-0x5,this['_shadowDra'+'wCalls']=0xd98+0x55a+-0x12f2,this['_skinDrawC'+'alls']=0xae5+0x23de+0x1*-0x2ec3,this['_instanced'+'DrawCalls']=0x2c3*-0xd+-0xf*-0x45+0x1fdc,this['_shadowMap'+'Updates']=-0x1410+0x1a97+-0x3*0x22d,this['_numDrawCa'+'llsCulled']=-0x18e*-0x3+0x1247+-0x16f1,this['_camerasRe'+'ndered']=0x102+0x196f+0x1a71*-0x1,this['_lightClus'+'ters']=0xc*0x97+-0x3*0xb4e+0x5*0x55e);const _0x1e6589=_0x43aae9['scope'];this['boneTextur'+'eId']=_0x1e6589['resolve']('texture_po'+'seMap'),this['modelMatri'+'xId']=_0x1e6589['resolve']('matrix_mod'+'el'),this['normalMatr'+'ixId']=_0x1e6589['resolve']('matrix_nor'+'mal'),this['viewInvId']=_0x1e6589['resolve']('matrix_vie'+'wInverse'),this['viewPos']=new Float32Array(-0x547*0x6+0x67a+-0x1933*-0x1),this['viewPosId']=_0x1e6589['resolve']('view_posit'+'ion'),this['projId']=_0x1e6589['resolve']('matrix_pro'+'jection'),this['projSkybox'+'Id']=_0x1e6589['resolve']('matrix_pro'+'jectionSky'+'box'),this['viewId']=_0x1e6589['resolve']('matrix_vie'+'w'),this['viewId3']=_0x1e6589['resolve']('matrix_vie'+'w3'),this['viewProjId']=_0x1e6589['resolve']('matrix_vie'+'wProjectio'+'n'),this['flipYId']=_0x1e6589['resolve']('projection'+'FlipY'),this['tbnBasis']=_0x1e6589['resolve']('tbnBasis'),this['nearClipId']=_0x1e6589['resolve']('camera_nea'+'r'),this['farClipId']=_0x1e6589['resolve']('camera_far'),this['cameraPara'+'ms']=new Float32Array(0x9*-0x107+0x200*0x1+0xb*0xa9),this['cameraPara'+'msId']=_0x1e6589['resolve']('camera_par'+'ams'),this['viewIndexI'+'d']=_0x1e6589['resolve']('view_index'),this['viewIndexI'+'d']['setValue'](0x18a*-0xd+0x2*-0x4fb+0x1df8),this['blueNoiseJ'+'itterVersi'+'on']=-0x1423+0x1335+0xee*0x1,this['blueNoiseJ'+'itterVec']=new re(),this['blueNoiseJ'+'itterData']=new Float32Array(-0x14ff+0x11d8+0x32b),this['blueNoiseJ'+'itterId']=_0x1e6589['resolve']('blueNoiseJ'+'itter'),this['blueNoiseT'+'extureId']=_0x1e6589['resolve']('blueNoiseT'+'ex32'),this['alphaTestI'+'d']=_0x1e6589['resolve']('alpha_ref'),this['opacityMap'+'Id']=_0x1e6589['resolve']('texture_op'+'acityMap'),this['exposureId']=_0x1e6589['resolve']('exposure'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']=_0x1e6589['resolve']('twoSidedLi'+'ghtingNegS'+'caleFactor'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](-0xbcc+0x1b4d*0x1+0x3*-0x52b),this['morphPosit'+'ionTex']=_0x1e6589['resolve']('morphPosit'+'ionTex'),this['morphNorma'+'lTex']=_0x1e6589['resolve']('morphNorma'+'lTex'),this['morphTexPa'+'rams']=_0x1e6589['resolve']('morph_tex_'+'params'),this['lightCube']=new HE(),this['constantLi'+'ghtCube']=_0x1e6589['resolve']('lightCube['+'0]');}['destroy'](){this['shadowRend'+'erer']=null,this['_shadowRen'+'dererLocal']=null,this['_shadowRen'+'dererDirec'+'tional']=null,this['shadowMapC'+'ache']['destroy'](),this['shadowMapC'+'ache']=null,this['_renderPas'+'sUpdateClu'+'stered']['destroy'](),this['_renderPas'+'sUpdateClu'+'stered']=null,this['lightTextu'+'reAtlas']['destroy'](),this['lightTextu'+'reAtlas']=null;}['setupViewp'+'ort'](_0x332e5c,_0x1b323d){const _0x4407b0=this['device'],_0x16937a=_0x1b323d?_0x1b323d['width']:_0x4407b0['width'],_0xd9203e=_0x1b323d?_0x1b323d['height']:_0x4407b0['height'],_0x12ed69=_0x332e5c['rect'];let _0x33bf4f=Math['floor'](_0x12ed69['x']*_0x16937a),_0x4c352d=Math['floor'](_0x12ed69['y']*_0xd9203e),_0x534f72=Math['floor'](_0x12ed69['z']*_0x16937a),_0x39f408=Math['floor'](_0x12ed69['w']*_0xd9203e);if(_0x4407b0['setViewpor'+'t'](_0x33bf4f,_0x4c352d,_0x534f72,_0x39f408),_0x332e5c['_scissorRe'+'ctClear']){const _0x2dc3c0=_0x332e5c['scissorRec'+'t'];_0x33bf4f=Math['floor'](_0x2dc3c0['x']*_0x16937a),_0x4c352d=Math['floor'](_0x2dc3c0['y']*_0xd9203e),_0x534f72=Math['floor'](_0x2dc3c0['z']*_0x16937a),_0x39f408=Math['floor'](_0x2dc3c0['w']*_0xd9203e);}_0x4407b0['setScissor'](_0x33bf4f,_0x4c352d,_0x534f72,_0x39f408);}['setCameraU'+'niforms'](_0x540b54,_0x553a9d){var _0x1afa02,_0xab0e5a;const _0x36b493=_0x553a9d==null?void(-0x1da0*0x1+-0x3*-0x9bb+-0x25*-0x3):_0x553a9d['flipY'];let _0x437764=null;if(_0x540b54['xr']&&_0x540b54['xr']['session']){const _0xac5d5=((_0xab0e5a=(_0x1afa02=_0x540b54['_node'])==null?void(-0x16bb+-0x1bf3+-0x1a*-0x1f3):_0x1afa02['parent'])==null?void(0xc57*-0x3+0x3*-0xc88+0x1*0x4a9d):_0xab0e5a['getWorldTr'+'ansform']())||null;_0x437764=_0x540b54['xr']['views']['list'];for(let _0x5f394f=-0x72f+0x65+0x6ca;_0x5f394f<_0x437764['length'];_0x5f394f++){const _0x415507=_0x437764[_0x5f394f];_0x415507['updateTran'+'sforms'](_0xac5d5),_0x540b54['frustum']['setFromMat'+'4'](_0x415507['projViewOf'+'fMat']);}}else{let _0x649e9c=_0x540b54['projection'+'Matrix'];_0x540b54['calculateP'+'rojection']&&_0x540b54['calculateP'+'rojection'](_0x649e9c,zl);let _0x2296df=_0x540b54['getProject'+'ionMatrixS'+'kybox']();_0x36b493&&(_0x649e9c=ob['mul2'](y_,_0x649e9c),_0x2296df=lb['mul2'](y_,_0x2296df)),this['device']['isWebGPU']&&(_0x649e9c=cb['mul2'](v_,_0x649e9c),_0x2296df=hb['mul2'](v_,_0x2296df));const {jitter:_0x5b8ee6}=_0x540b54;let _0x428744=0x150b*-0x1+0x2d9+0x1232,_0x43801d=-0x29b+-0x36b*0x8+0x1df3;if(_0x5b8ee6>-0x7e+0x1d7c+-0x1cfe){const _0x1c4899=_0x553a9d?_0x553a9d['width']:this['device']['width'],_0x4264f8=_0x553a9d?_0x553a9d['height']:this['device']['height'],_0x2deb85=x_[this['device']['renderVers'+'ion']%x_['length']];_0x428744=_0x5b8ee6*(_0x2deb85['x']*(-0x183d+0xf38+0x907)-(0x17*-0x67+0x6fe+0x244*0x1))/_0x1c4899,_0x43801d=_0x5b8ee6*(_0x2deb85['y']*(0x1*0x2385+0x26b6+-0x4a39*0x1)-(-0x4*0x1ae+-0x1*-0x2aa+0x40f))/_0x4264f8,_0x649e9c=db['copy'](_0x649e9c),_0x649e9c['data'][0x24b9+-0xacf+0x1*-0x19e2]=_0x428744,_0x649e9c['data'][0x1b89+-0x136*-0x15+-0x34ee*0x1]=_0x43801d,_0x2296df=fb['copy'](_0x2296df),_0x2296df['data'][0x1c5+0x3*-0x24f+0x530]=_0x428744,_0x2296df['data'][0x249e+-0xdda+-0x16bb]=_0x43801d,this['blueNoiseJ'+'itterVersi'+'on']!==this['device']['renderVers'+'ion']&&(this['blueNoiseJ'+'itterVersi'+'on']=this['device']['renderVers'+'ion'],this['blueNoise']['vec4'](this['blueNoiseJ'+'itterVec']));}const _0x2fb955=_0x5b8ee6>-0x43b*0x1+-0x2*-0x36d+-0x29f?this['blueNoiseJ'+'itterVec']:re['ZERO'];if(this['blueNoiseJ'+'itterData'][-0x7*-0xe7+0x11d7+-0x1828]=_0x2fb955['x'],this['blueNoiseJ'+'itterData'][-0x104a+-0x65*0x2a+0x2f*0xb3]=_0x2fb955['y'],this['blueNoiseJ'+'itterData'][0x1*-0x1ef7+-0x1*-0x26ab+-0x7b2]=_0x2fb955['z'],this['blueNoiseJ'+'itterData'][-0x511*-0x1+0x2*-0xae2+0x592*0x3]=_0x2fb955['w'],this['blueNoiseJ'+'itterId']['setValue'](this['blueNoiseJ'+'itterData']),this['projId']['setValue'](_0x649e9c['data']),this['projSkybox'+'Id']['setValue'](_0x2296df['data']),_0x540b54['calculateT'+'ransform'])_0x540b54['calculateT'+'ransform'](ar,zl);else{const _0x1698a2=_0x540b54['_node']['getPositio'+'n'](),_0x4b3675=_0x540b54['_node']['getRotatio'+'n']();ar['setTRS'](_0x1698a2,_0x4b3675,D['ONE']);}this['viewInvId']['setValue'](ar['data']),Ma['copy'](ar)['invert'](),this['viewId']['setValue'](Ma['data']),S_['setFromMat'+'4'](Ma),this['viewId3']['setValue'](S_['data']),rr['mul2'](_0x649e9c,Ma),this['viewProjId']['setValue'](rr['data']),_0x540b54['_storeShad'+'erMatrices'](rr,_0x428744,_0x43801d,this['device']['renderVers'+'ion']),this['flipYId']['setValue'](_0x36b493?-(0x172a+-0x110*0x5+-0x11d9):0x5d*0x1d+0xb37+-0x15bf),this['dispatchVi'+'ewPos'](_0x540b54['_node']['getPositio'+'n']()),_0x540b54['frustum']['setFromMat'+'4'](rr);}this['tbnBasis']['setValue'](_0x36b493?-(0x1b83+0x1037*-0x2+0x5*0xfc):0x62f+-0x26c5+0x2097);const _0x25b531=_0x540b54['_nearClip'],_0x1c35af=_0x540b54['_farClip'];return this['nearClipId']['setValue'](_0x25b531),this['farClipId']['setValue'](_0x1c35af),this['cameraPara'+'ms'][-0x58e+-0xb1d*-0x3+0x3*-0x943]=(0xf76+0x66e*-0x4+0xa43)/_0x1c35af,this['cameraPara'+'ms'][-0x1*0x3fa+0x1d27+0x219*-0xc]=_0x1c35af,this['cameraPara'+'ms'][0x92*-0xf+-0x11cb+0x1a5b]=_0x25b531,this['cameraPara'+'ms'][0xc73*0x1+0x4e+0x1d2*-0x7]=_0x540b54['projection']===gn?0x182c+0x8b*-0x38+0x63d:0x1*0x1b2c+0xd7e+-0x28aa,this['cameraPara'+'msId']['setValue'](this['cameraPara'+'ms']),this['exposureId']['setValue'](this['scene']['physicalUn'+'its']?_0x540b54['getExposur'+'e']():this['scene']['exposure']),_0x437764;}['clear'](_0x101b93,_0x35a06b,_0x250bad,_0x133a9b){const _0x57d1aa=(_0x35a06b??_0x101b93['_clearColo'+'rBuffer']?Fo:0x1eb*0x14+-0x1aa1*-0x1+0x1*-0x40fd)|(_0x250bad??_0x101b93['_clearDept'+'hBuffer']?No:-0x411+-0x84d+0xc5e)|(_0x133a9b??_0x101b93['_clearSten'+'cilBuffer']?Vc:0x21e7+0x9e9*0x3+-0x3fa2);if(_0x57d1aa){const _0x403ae9=this['device'];Q['pushGpuMar'+'ker'](_0x403ae9,'CLEAR'),_0x403ae9['clear']({'color':[_0x101b93['_clearColo'+'r']['r'],_0x101b93['_clearColo'+'r']['g'],_0x101b93['_clearColo'+'r']['b'],_0x101b93['_clearColo'+'r']['a']],'depth':_0x101b93['_clearDept'+'h'],'stencil':_0x101b93['_clearSten'+'cil'],'flags':_0x57d1aa}),Q['popGpuMark'+'er'](_0x403ae9);}}['setCamera'](_0x496513,_0x1f9131,_0x1ce750,_0x5053fe=null){this['setCameraU'+'niforms'](_0x496513,_0x1f9131),this['clearView'](_0x496513,_0x1f9131,_0x1ce750,!(0x2357+0x20b7+-0x1*0x440d));}['clearView'](_0x3f7860,_0x1b3ef2,_0x11219b,_0x348f10){const _0x527c49=this['device'];if(Q['pushGpuMar'+'ker'](_0x527c49,'CLEAR-VIEW'),_0x527c49['setRenderT'+'arget'](_0x1b3ef2),_0x527c49['updateBegi'+'n'](),_0x348f10&&(_0x527c49['setColorWr'+'ite'](!(0x58a*0x7+0x3f*-0x81+-0x1*0x707),!(0x1547+-0x1*-0xdde+-0x3*0xbb7),!(-0x63*-0x44+0x613+-0x205f),!(0xf4d+-0xf35+0x8*-0x3)),_0x527c49['setDepthWr'+'ite'](!(-0x242a+0x1*-0x1583+0xb89*0x5))),this['setupViewp'+'ort'](_0x3f7860,_0x1b3ef2),_0x11219b){const _0x117a38=_0x3f7860['_clearOpti'+'ons'];_0x527c49['clear'](_0x117a38||{'color':[_0x3f7860['_clearColo'+'r']['r'],_0x3f7860['_clearColo'+'r']['g'],_0x3f7860['_clearColo'+'r']['b'],_0x3f7860['_clearColo'+'r']['a']],'depth':_0x3f7860['_clearDept'+'h'],'flags':(_0x3f7860['_clearColo'+'rBuffer']?Fo:0x132a+-0x1*0x789+0xe5*-0xd)|(_0x3f7860['_clearDept'+'hBuffer']?No:-0x58a+0xa3f+0x5*-0xf1)|(_0x3f7860['_clearSten'+'cilBuffer']?Vc:0x1485*0x1+-0x246e*0x1+0xfe9),'stencil':_0x3f7860['_clearSten'+'cil']});}Q['popGpuMark'+'er'](_0x527c49);}['setupCullM'+'ode'](_0x1aee52,_0xaab549,_0x5cabbc){const _0x5e0d8b=_0x5cabbc['material'];let _0x307ec2=bt;if(_0x1aee52){let _0xc47455=0x1f04+-0x1cb*0xf+-0x41e;(_0x5e0d8b['cull']===wo||_0x5e0d8b['cull']===ca)&&(_0xc47455=_0xaab549*_0x5cabbc['flipFacesF'+'actor']*_0x5cabbc['node']['worldScale'+'Sign']),_0xc47455<-0xeed*0x2+-0x1*0x14b9+0x3293?_0x307ec2=_0x5e0d8b['cull']===wo?ca:wo:_0x307ec2=_0x5e0d8b['cull'];}this['device']['setCullMod'+'e'](_0x307ec2),_0x307ec2===bt&&_0x5e0d8b['cull']===bt&&this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](_0x5cabbc['node']['worldScale'+'Sign']);}['updateCame'+'raFrustum'](_0xbeb0b7){if(_0xbeb0b7['xr']&&_0xbeb0b7['xr']['views']['list']['length']){const _0x564438=_0xbeb0b7['xr']['views']['list'][-0x20a6+0x2*0xe6e+0x3ca];rr['mul2'](_0x564438['projMat'],_0x564438['viewOffMat']),_0xbeb0b7['frustum']['setFromMat'+'4'](rr);return;}const _0x27fbce=_0xbeb0b7['projection'+'Matrix'];if(_0xbeb0b7['calculateP'+'rojection']&&_0xbeb0b7['calculateP'+'rojection'](_0x27fbce,zl),_0xbeb0b7['calculateT'+'ransform'])_0xbeb0b7['calculateT'+'ransform'](ar,zl);else{const _0xb0c3fd=_0xbeb0b7['_node']['getPositio'+'n'](),_0x4be1cb=_0xbeb0b7['_node']['getRotatio'+'n']();ar['setTRS'](_0xb0c3fd,_0x4be1cb,D['ONE']),this['viewInvId']['setValue'](ar['data']);}Ma['copy'](ar)['invert'](),rr['mul2'](_0x27fbce,Ma),_0xbeb0b7['frustum']['setFromMat'+'4'](rr);}['setBaseCon'+'stants'](_0x23c52a,_0x18b0c7){_0x23c52a['setCullMod'+'e'](_0x18b0c7['cull']),_0x18b0c7['opacityMap']&&this['opacityMap'+'Id']['setValue'](_0x18b0c7['opacityMap']),(_0x18b0c7['opacityMap']||_0x18b0c7['alphaTest']>0x1c7f+-0x26ad+0x1*0xa2e)&&this['alphaTestI'+'d']['setValue'](_0x18b0c7['alphaTest']);}['updateCpuS'+'kinMatrice'+'s'](_0x55d49e){kd++;const _0x213b8=_0x55d49e['length'];if(_0x213b8===0x4f9*-0x1+0x215e+0x977*-0x3)return;const _0x37df67=de();for(let _0x27bb2c=0x190d+0x211a+0x1*-0x3a27;_0x27bb2c<_0x213b8;_0x27bb2c++){const _0x425fc4=_0x55d49e[_0x27bb2c]['skinInstan'+'ce'];_0x425fc4&&(_0x425fc4['updateMatr'+'ices'](_0x55d49e[_0x27bb2c]['node'],kd),_0x425fc4['_dirty']=!(-0x21e*-0xc+-0x12e7+-0x681));}this['_skinTime']+=de()-_0x37df67;}['updateGpuS'+'kinMatrice'+'s'](_0x4368ff){const _0x46a935=de();for(const _0x25fbc4 of _0x4368ff){const _0x242475=_0x25fbc4['skinInstan'+'ce'];_0x242475&&_0x242475['_dirty']&&(_0x242475['updateMatr'+'ixPalette'](_0x25fbc4['node'],kd),_0x242475['_dirty']=!(0x18fb+0x1689+-0x2f83*0x1));}this['_skinTime']+=de()-_0x46a935;}['updateMorp'+'hing'](_0x48f365){const _0x4c7c6e=de();for(const _0x5c506c of _0x48f365){const _0x56ec7d=_0x5c506c['morphInsta'+'nce'];_0x56ec7d&&_0x56ec7d['_dirty']&&_0x56ec7d['update']();}this['_morphTime']+=de()-_0x4c7c6e;}['updateGSpl'+'ats'](_0x23d77d){var _0x1c0454;for(const _0x4bcb44 of _0x23d77d)(_0x1c0454=_0x4bcb44['gsplatInst'+'ance'])==null||_0x1c0454['update']();}['gpuUpdate'](_0xd96786){this['updateGpuS'+'kinMatrice'+'s'](_0xd96786),this['updateMorp'+'hing'](_0xd96786),this['updateGSpl'+'ats'](_0xd96786);}['setVertexB'+'uffers'](_0x402026,_0x539a83){_0x402026['setVertexB'+'uffer'](_0x539a83['vertexBuff'+'er']);}['setMorphin'+'g'](_0x279ead,_0x4a194d){_0x4a194d&&(_0x4a194d['prepareRen'+'dering'](_0x279ead),_0x279ead['setVertexB'+'uffer'](_0x4a194d['morph']['vertexBuff'+'erIds']),this['morphPosit'+'ionTex']['setValue'](_0x4a194d['texturePos'+'itions']),this['morphNorma'+'lTex']['setValue'](_0x4a194d['textureNor'+'mals']),this['morphTexPa'+'rams']['setValue'](_0x4a194d['_texturePa'+'rams']));}['setSkinnin'+'g'](_0x300185,_0x3fd1cf){const _0x44920c=_0x3fd1cf['skinInstan'+'ce'];if(_0x44920c){this['_skinDrawC'+'alls']++;const _0x3fe2bc=_0x44920c['boneTextur'+'e'];this['boneTextur'+'eId']['setValue'](_0x3fe2bc);}}['dispatchVi'+'ewPos'](_0x38010e){const _0x29bde1=this['viewPos'];_0x29bde1[0x168a+0x6b*-0x3b+0xb5*0x3]=_0x38010e['x'],_0x29bde1[0x9c1*-0x1+-0x221c+0x463*0xa]=_0x38010e['y'],_0x29bde1[-0x216b+-0xfb5+0x1*0x3122]=_0x38010e['z'],this['viewPosId']['setValue'](_0x29bde1);}['initViewBi'+'ndGroupFor'+'mat'](_0x1e15bd){if(this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']){const _0x31a316=[new dt('matrix_vie'+'w',li),new dt('matrix_vie'+'wInverse',li),new dt('matrix_pro'+'jection',li),new dt('matrix_pro'+'jectionSky'+'box',li),new dt('matrix_vie'+'wProjectio'+'n',li),new dt('matrix_vie'+'w3',Cn),new dt('cubeMapRot'+'ationMatri'+'x',Cn),new dt('view_posit'+'ion',ds),new dt('skyboxInte'+'nsity',$s),new dt('exposure',$s),new dt('textureBia'+'s',$s),new dt('view_index',$s)];_0x1e15bd&&_0x31a316['push'](new dt('clusterCel'+'lsCountByB'+'oundsSize',ds),new dt('clusterTex'+'tureSize',ds),new dt('clusterBou'+'ndsMin',ds),new dt('clusterBou'+'ndsDelta',ds),new dt('clusterCel'+'lsDot',ds),new dt('clusterCel'+'lsMax',ds),new dt('shadowAtla'+'sParams',fa),new dt('clusterMax'+'Cells',da),new dt('clusterSki'+'p',$s)),this['viewUnifor'+'mFormat']=new ry(this['device'],_0x31a316);const _0x1866de=[new hp(cp,lp|HS)];this['viewBindGr'+'oupFormat']=new ey(this['device'],_0x1866de);}}['setupViewU'+'niforms'](_0x3913f2,_0x349c80){this['projId']['setValue'](_0x3913f2['projMat']['data']),this['projSkybox'+'Id']['setValue'](_0x3913f2['projMat']['data']),this['viewId']['setValue'](_0x3913f2['viewOffMat']['data']),this['viewInvId']['setValue'](_0x3913f2['viewInvOff'+'Mat']['data']),this['viewId3']['setValue'](_0x3913f2['viewMat3']['data']),this['viewProjId']['setValue'](_0x3913f2['projViewOf'+'fMat']['data']),this['viewPosId']['setValue'](_0x3913f2['positionDa'+'ta']),this['viewIndexI'+'d']['setValue'](_0x349c80);}['setupViewU'+'niformBuff'+'ers'](_0x2aa07c,_0x3a7232,_0x128398,_0x422dab){w['assert'](Array['isArray'](_0x2aa07c),'viewBindGr'+'oups\x20must\x20'+'be\x20an\x20arra'+'y');const {device:_0x162466}=this,_0x1e0823=(_0x422dab==null?void(0x1c1d+-0x2417+0x7fa):_0x422dab['length'])??-0x14a*0x8+-0xd3*0x9+0x11bc;for(;_0x2aa07c['length']<_0x1e0823;){const _0x1425f1=new up(_0x162466,_0x3a7232,!(-0x7bf+-0x1d*0x19+0x12d*0x9)),_0x192603=new dp(_0x162466,_0x128398,_0x1425f1);ya['setName'](_0x192603,'ViewBindGr'+'oup_'+_0x192603['id']),_0x2aa07c['push'](_0x192603);}if(_0x422dab)for(let _0x4cadb2=0x1fb7+0x1b8f+-0x119*0x36;_0x4cadb2<_0x1e0823;_0x4cadb2++){const _0x1e4a11=_0x422dab[_0x4cadb2];this['setupViewU'+'niforms'](_0x1e4a11,_0x4cadb2);const _0x47017e=_0x2aa07c[_0x4cadb2];_0x47017e['defaultUni'+'formBuffer']['update'](),_0x47017e['update']();}else{const _0x22e6ce=_0x2aa07c[-0x39*0x40+0x1*-0xc91+-0x5*-0x55d];_0x22e6ce['defaultUni'+'formBuffer']['update'](),_0x22e6ce['update']();}_0x422dab||_0x162466['setBindGro'+'up']($o,_0x2aa07c[-0x1*-0x19ed+-0x1*0x1e7f+0x492]);}['setupMeshU'+'niformBuff'+'ers'](_0x1c516e){const _0x285e3b=this['device'];if(_0x285e3b['supportsUn'+'iformBuffe'+'rs']){const _0x2ccfa8=_0x1c516e['getBindGro'+'up'](_0x285e3b);_0x2ccfa8['update'](),_0x285e3b['setBindGro'+'up'](QS,_0x2ccfa8),_0x1c516e['getUniform'+'Buffer'](_0x285e3b)['update'](Vd),_0x285e3b['setBindGro'+'up'](Df,Vd['bindGroup'],Vd['offsets']);}}['setMeshIns'+'tanceMatri'+'ces'](_0xdb92e0,_0x8f573e=!(0x1bb*0xe+0x9cb+0x137*-0x1c)){const _0x3ff98b=_0xdb92e0['node']['worldTrans'+'form'];this['modelMatri'+'xId']['setValue'](_0x3ff98b['data']),_0x8f573e&&this['normalMatr'+'ixId']['setValue'](_0xdb92e0['node']['normalMatr'+'ix']['data']);}['cull'](_0x316233,_0x4bae04,_0x4c521f){const _0x294dcb=de(),_0x838360=_0x4c521f['opaque'];_0x838360['length']=0x611*-0x6+-0x2628+0x4a8e;const _0xc8dad5=_0x4c521f['transparen'+'t'];_0xc8dad5['length']=-0x37*0x2b+0x1bfb+-0x12be;const _0x42b69a=_0x316233['frustumCul'+'ling'],_0x42063f=_0x4bae04['length'];for(let _0x5b3a90=0xe3*-0x21+0x1678+0x6cb;_0x5b3a90<_0x42063f;_0x5b3a90++){const _0x3435c8=_0x4bae04[_0x5b3a90];_0x3435c8['visible']&&(!_0x42b69a||!_0x3435c8['cull']||_0x3435c8['_isVisible'](_0x316233))&&(_0x3435c8['visibleThi'+'sFrame']=!(-0x5*0x5f3+-0x90f+0x2*0x1367),(_0x3435c8['transparen'+'t']?_0xc8dad5:_0x838360)['push'](_0x3435c8),(_0x3435c8['skinInstan'+'ce']||_0x3435c8['morphInsta'+'nce']||_0x3435c8['gsplatInst'+'ance'])&&(this['processing'+'MeshInstan'+'ces']['add'](_0x3435c8),_0x3435c8['gsplatInst'+'ance']&&_0x3435c8['gsplatInst'+'ance']['cameras']['push'](_0x316233)));}this['_cullTime']+=de()-_0x294dcb,this['_numDrawCa'+'llsCulled']+=_0x42b69a?_0x42063f:0x11*0x28+0x131*-0xe+0xe06;}['collectLig'+'hts'](_0x4b8732){this['lights']['length']=0xe6*0xa+0x1fe9+-0x28e5,this['localLight'+'s']['length']=-0x1ad4+-0x99b+0x246f;const _0x36f392=this['scene']['_stats'];_0x36f392['dynamicLig'+'hts']=0x2*-0x1147+-0x135d*-0x1+0xf31,_0x36f392['bakedLight'+'s']=0x2*0xdc1+0x1*0x253d+-0xf*0x451;const _0x31e022=_0x4b8732['layerList']['length'];for(let _0x26e73b=-0x1ac*0x11+0x1641+-0x1*-0x62b;_0x26e73b<_0x31e022;_0x26e73b++){const _0x33471d=_0x4b8732['layerList'][_0x26e73b];if(!zd['has'](_0x33471d)){zd['add'](_0x33471d);const _0x3886f4=_0x33471d['_lights'];for(let _0x48d5e8=0x1*-0x100f+0x32a+0xce5;_0x48d5e8<_0x3886f4['length'];_0x48d5e8++){const _0x1171f1=_0x3886f4[_0x48d5e8];Bd['has'](_0x1171f1)||(Bd['add'](_0x1171f1),this['lights']['push'](_0x1171f1),_0x1171f1['_type']!==ve&&this['localLight'+'s']['push'](_0x1171f1),(_0x1171f1['mask']&Ss||_0x1171f1['mask']&di)&&_0x36f392['dynamicLig'+'hts']++,_0x1171f1['mask']&fi&&_0x36f392['bakedLight'+'s']++);}}}_0x36f392['lights']=this['lights']['length'],Bd['clear'](),zd['clear']();}['cullLights'](_0x50c2e7,_0x3c77af){const _0x562282=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x7a8b37=this['scene']['physicalUn'+'its'];for(let _0x26af6a=-0x2038+0x9*0x1ff+0xe41;_0x26af6a<_0x3c77af['length'];_0x26af6a++){const _0x54125c=_0x3c77af[_0x26af6a];if(_0x54125c['enabled']){if(_0x54125c['_type']!==ve){if(_0x54125c['getBoundin'+'gSphere'](Ud),_0x50c2e7['frustum']['containsSp'+'here'](Ud)){_0x54125c['visibleThi'+'sFrame']=!(-0x4*0x379+-0x1cac*-0x1+-0xec8),_0x54125c['usePhysica'+'lUnits']=_0x7a8b37;const _0x503345=_0x50c2e7['getScreenS'+'ize'](Ud);_0x54125c['maxScreenS'+'ize']=Math['max'](_0x54125c['maxScreenS'+'ize'],_0x503345);}else _0x562282||_0x54125c['castShadow'+'s']&&!_0x54125c['shadowMap']&&(_0x54125c['visibleThi'+'sFrame']=!(-0x1*-0x829+0xf76+-0x179f));}else _0x54125c['usePhysica'+'lUnits']=this['scene']['physicalUn'+'its'];}}}['cullShadow'+'maps'](_0x231d68){const _0x168f8d=this['scene']['clusteredL'+'ightingEna'+'bled'];for(let _0x12cff1=0x25f3+-0xea8+-0x174b;_0x12cff1<this['localLight'+'s']['length'];_0x12cff1++){const _0x5bbfb4=this['localLight'+'s'][_0x12cff1];_0x5bbfb4['_type']!==ve&&(_0x168f8d?_0x5bbfb4['atlasSlotU'+'pdated']&&_0x5bbfb4['shadowUpda'+'teMode']===Ps&&(_0x5bbfb4['shadowUpda'+'teMode']=gr):_0x5bbfb4['shadowUpda'+'teMode']===Ps&&_0x5bbfb4['castShadow'+'s']&&(_0x5bbfb4['getRenderD'+'ata'](null,-0x1727+0x11+-0x7b2*-0x3)['shadowCame'+'ra']['renderTarg'+'et']||(_0x5bbfb4['shadowUpda'+'teMode']=gr)),_0x5bbfb4['visibleThi'+'sFrame']&&_0x5bbfb4['castShadow'+'s']&&_0x5bbfb4['shadowUpda'+'teMode']!==Ps&&this['_shadowRen'+'dererLocal']['cull'](_0x5bbfb4,_0x231d68));}this['cameraDirS'+'hadowLight'+'s']['clear']();const _0x52fcd3=_0x231d68['cameras'];for(let _0x326c0d=-0xf2*-0xd+-0xc30+0x1a*-0x1;_0x326c0d<_0x52fcd3['length'];_0x326c0d++){const _0x569662=_0x52fcd3[_0x326c0d];if(_0x569662['enabled']){const _0x5a4912=_0x569662['camera'];let _0x59395f;const _0x39711f=_0x5a4912['layers'];for(let _0x20f915=0x11f*0x1d+-0x1007+-0x34c*0x5;_0x20f915<_0x39711f['length'];_0x20f915++){const _0x475a65=_0x231d68['getLayerBy'+'Id'](_0x39711f[_0x20f915]);if(_0x475a65){const _0x3d4b3d=_0x475a65['splitLight'+'s'][ve];for(let _0x1548ab=0x2344+-0x2084+-0x2c0;_0x1548ab<_0x3d4b3d['length'];_0x1548ab++){const _0x6e47fa=_0x3d4b3d[_0x1548ab];_0x6e47fa['castShadow'+'s']&&!Da['has'](_0x6e47fa)&&(Da['add'](_0x6e47fa),_0x59395f=_0x59395f??[],_0x59395f['push'](_0x6e47fa),this['_shadowRen'+'dererDirec'+'tional']['cull'](_0x6e47fa,_0x231d68,_0x5a4912));}}}_0x59395f&&this['cameraDirS'+'hadowLight'+'s']['set'](_0x5a4912,_0x59395f),Da['clear']();}}}['cullCompos'+'ition'](_0x2f7e64){const _0x558a2a=de(),{scene:_0x36a12f}=this;this['processing'+'MeshInstan'+'ces']['clear']();const _0x5f8423=_0x2f7e64['cameras']['length'];this['_camerasRe'+'ndered']+=_0x5f8423;for(let _0x391cd2=-0x174+0x1c5b+-0x1ae7;_0x391cd2<_0x5f8423;_0x391cd2++){const _0x1de3df=_0x2f7e64['cameras'][_0x391cd2];_0x36a12f==null||_0x36a12f['fire'](Ry,_0x1de3df);const _0x20dbfc=_0x1de3df['renderTarg'+'et'];_0x1de3df['frameUpdat'+'e'](_0x20dbfc),this['updateCame'+'raFrustum'](_0x1de3df['camera']);const _0x570956=_0x1de3df['layers'];for(let _0x1693ef=0x1eff+-0x1*-0x577+-0x2476*0x1;_0x1693ef<_0x570956['length'];_0x1693ef++){const _0x11a4cb=_0x2f7e64['getLayerBy'+'Id'](_0x570956[_0x1693ef]);if(_0x11a4cb&&_0x11a4cb['enabled']){this['cullLights'](_0x1de3df['camera'],_0x11a4cb['_lights']);const _0x13285c=_0x11a4cb['getCulledI'+'nstances'](_0x1de3df['camera']);this['cull'](_0x1de3df['camera'],_0x11a4cb['meshInstan'+'ces'],_0x13285c);}}_0x36a12f==null||_0x36a12f['fire'](Oy,_0x1de3df);}_0x36a12f['clusteredL'+'ightingEna'+'bled']&&this['updateLigh'+'tTextureAt'+'las'](),this['cullShadow'+'maps'](_0x2f7e64),_0x36a12f==null||_0x36a12f['fire'](Aw),this['_cullTime']+=de()-_0x558a2a;}['updateShad'+'ers'](_0x3bcd49,_0x37ec12){const _0xb23a6c=_0x3bcd49['length'];for(let _0x15a616=0x1f5f+-0x1d*0x7+0x4*-0x7a5;_0x15a616<_0xb23a6c;_0x15a616++){const _0x2387c9=_0x3bcd49[_0x15a616]['material'];if(_0x2387c9&&!Da['has'](_0x2387c9)&&(Da['add'](_0x2387c9),_0x2387c9['getShaderV'+'ariant']!==er['prototype']['getShaderV'+'ariant'])){if(_0x37ec12&&(!_0x2387c9['useLightin'+'g']||_0x2387c9['emitter']&&!_0x2387c9['emitter']['lighting']))continue;_0x2387c9['clearVaria'+'nts']();}}Da['clear']();}['updateFram'+'eUniforms'](){this['blueNoiseT'+'extureId']['setValue'](XE(this['device']));}['beginFrame'](_0x4c7760){const _0x36af87=this['scene'],_0x1c6e68=_0x36af87['updateShad'+'ers']||this['device']['_shadersDi'+'rty'];let _0x1a314b=0x442*0x2+0x9*-0x40f+0x1c03;const _0x4ceaa0=_0x4c7760['layerList'],_0x2c4c2d=_0x4ceaa0['length'];for(let _0x397877=-0x256f+0xfc5+0x15aa;_0x397877<_0x2c4c2d;_0x397877++){const _0x104109=_0x4ceaa0[_0x397877]['meshInstan'+'ces'],_0x324711=_0x104109['length'];_0x1a314b+=_0x324711;for(let _0x51cd01=0x12e*-0xa+0xbe9*0x1+-0x1d;_0x51cd01<_0x324711;_0x51cd01++){const _0x1bf143=_0x104109[_0x51cd01];_0x1bf143['visibleThi'+'sFrame']=!(0x151+0x5*-0x567+0x3*0x891),_0x1c6e68&&Gd['push'](_0x1bf143),_0x1bf143['skinInstan'+'ce']&&Hd['push'](_0x1bf143);}}if(_0x36af87['_stats']['meshInstan'+'ces']=_0x1a314b,_0x1c6e68){const _0x274607=!_0x36af87['updateShad'+'ers']||!this['device']['_shadersDi'+'rty'];this['updateShad'+'ers'](Gd,_0x274607),_0x36af87['updateShad'+'ers']=!(-0x110c+-0x2*0x7c3+-0x1f*-0x10d),this['device']['_shadersDi'+'rty']=!(-0x1*0x67f+-0xab1*0x2+0x2b*0xa6),_0x36af87['_shaderVer'+'sion']++;}this['updateFram'+'eUniforms'](),this['updateCpuS'+'kinMatrice'+'s'](Hd),Gd['length']=0x23b0+0x1d42+0x40f2*-0x1,Hd['length']=0xa+-0x1*0xc59+0x89*0x17;const _0x5abfe0=this['lights'],_0x400499=_0x5abfe0['length'];for(let _0x2c8de0=-0x2b*0x6b+-0xa48+0x3*0x96b;_0x2c8de0<_0x400499;_0x2c8de0++)_0x5abfe0[_0x2c8de0]['beginFrame']();}['updateLigh'+'tTextureAt'+'las'](){this['lightTextu'+'reAtlas']['update'](this['localLight'+'s'],this['scene']['lighting']);}['updateLaye'+'rCompositi'+'on'](_0x1496df){const _0x2fab61=de(),_0x5c7117=_0x1496df['layerList']['length'],_0x410085=this['scene']['_shaderVer'+'sion'];for(let _0x2e3a24=0x248a+0x1*0x4db+-0x2965;_0x2e3a24<_0x5c7117;_0x2e3a24++){const _0x3d2616=_0x1496df['layerList'][_0x2e3a24];_0x3d2616['_shaderVer'+'sion']=_0x410085,_0x3d2616['_skipRende'+'rCounter']=-0x1*0x18f6+-0x21d*-0x4+-0x2*-0x841,_0x3d2616['_forwardDr'+'awCalls']=-0xa1d*0x2+-0x178b+0x2bc5,_0x3d2616['_shadowDra'+'wCalls']=-0x1bd2+-0x1c7f+0x3851,_0x3d2616['_renderTim'+'e']=-0x31+0x45*0x2+-0x59;}_0x1496df['_update'](),this['_layerComp'+'ositionUpd'+'ateTime']+=de()-_0x2fab61;}['frameUpdat'+'e'](){this['clustersDe'+'bugRendere'+'d']=!(0xc11*0x1+0x822*0x2+0x4*-0x715),this['initViewBi'+'ndGroupFor'+'mat'](this['scene']['clusteredL'+'ightingEna'+'bled']),this['dirLightSh'+'adows']['clear']();}}class Xy{constructor(){h(this,'camera',null),(this['layer']=null,this['transparen'+'t']=!(-0x2452*0x1+-0x152c+0x397f*0x1),this['renderTarg'+'et']=null,this['lightClust'+'ers']=null,this['clearColor']=!(-0xfb1+-0xb1a+-0x23*-0xc4),this['clearDepth']=!(-0x1aae+-0x11be+0x2c6d*0x1),this['clearStenc'+'il']=!(-0xc*0x31+-0x19d9+0x3*0x962),this['triggerPos'+'tprocess']=!(-0x25c4+-0x1b85+0x414a),this['firstCamer'+'aUse']=!(-0x1f35*0x1+-0x49e*-0x3+-0x4*-0x457),this['lastCamera'+'Use']=!(-0x1*-0x18cd+-0x20ad+0x7e1),this['viewBindGr'+'oups']=[],this['useCameraP'+'asses']=!(0x774+0x1499*-0x1+0x33*0x42));}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x2cb351=>{_0x2cb351['defaultUni'+'formBuffer']['destroy'](),_0x2cb351['destroy']();}),this['viewBindGr'+'oups']['length']=-0x6f3*-0x5+0xeee+0x51*-0x9d;}['setupClear'+'s'](_0x29fd74,_0x37ee8e){this['clearColor']=(_0x29fd74==null?void(0x207b+-0x25a0+0x1*0x525):_0x29fd74['clearColor'+'Buffer'])||_0x37ee8e['clearColor'+'Buffer'],this['clearDepth']=(_0x29fd74==null?void(-0x11b9+0x2*-0x5f6+0x1da5):_0x29fd74['clearDepth'+'Buffer'])||_0x37ee8e['clearDepth'+'Buffer'],this['clearStenc'+'il']=(_0x29fd74==null?void(0x425+0x62e+-0xa53):_0x29fd74['clearStenc'+'ilBuffer'])||_0x37ee8e['clearStenc'+'ilBuffer'];}}class pb extends ys{constructor(_0x5c6d47,_0x2c5a14,_0x56e191,_0x167003){super(_0x5c6d47),h(this,'layerCompo'+'sition'),h(this,'scene'),h(this,'renderer'),h(this,'renderActi'+'ons',[]),h(this,'gammaCorre'+'ction'),h(this,'toneMappin'+'g'),h(this,'noDepthCle'+'ar',!(0xf2*-0xd+-0x136a+0x1fb5)),(this['layerCompo'+'sition']=_0x2c5a14,this['scene']=_0x56e191,this['renderer']=_0x167003);}get['rendersAny'+'thing'](){return this['renderActi'+'ons']['length']>-0x181c+0xe3+-0x1*-0x1739;}['addRenderA'+'ction'](_0x51e5ab){this['renderActi'+'ons']['push'](_0x51e5ab);}['addLayer'](_0x1f188c,_0xbfcf1a,_0x4664c9,_0x1050da=!(0x32*-0x3+0x15b3+-0x151d)){w['assert'](_0x1f188c),w['assert'](this['renderTarg'+'et']!==void(-0x1*-0x25f9+-0x1*-0x21a4+-0x3*0x17df),'Render\x20pas'+'s\x20needs\x20to'+'\x20be\x20initia'+'lized\x20befo'+'re\x20adding\x20'+'layers'),w['assert'](_0x1f188c['camera']['layersSet']['has'](_0xbfcf1a['id']),'Camera\x20'+_0x1f188c['entity']['name']+('\x20does\x20not\x20'+'render\x20lay'+'er\x20')+_0xbfcf1a['name']+'.');const _0x2c2a78=new Xy();if(_0x2c2a78['renderTarg'+'et']=this['renderTarg'+'et'],_0x2c2a78['camera']=_0x1f188c,_0x2c2a78['layer']=_0xbfcf1a,_0x2c2a78['transparen'+'t']=_0x4664c9,_0x1050da){const _0x1834a4=this['renderActi'+'ons']['length']===0xff4+0x1ebd+-0x2eb1;_0x2c2a78['setupClear'+'s'](_0x1834a4?_0x1f188c:void(-0x2434+0x1*0x22f1+0x1*0x143),_0xbfcf1a);}this['addRenderA'+'ction'](_0x2c2a78);}['addLayers'](_0x3df214,_0x56f8ff,_0x26805d,_0x57a08f,_0x294247,_0x33f34=!(-0x234e+-0xbeb+0x2f39)){const {layerList:_0x566a79,subLayerList:_0xea38f8}=_0x3df214;let _0x520276=_0x57a08f,_0x2c2a6a=_0x26805d;for(;_0x2c2a6a<_0x566a79['length'];){const _0x3b7a77=_0x566a79[_0x2c2a6a],_0x57235d=_0xea38f8[_0x2c2a6a];if(_0x56f8ff['camera']['layersSet']['has'](_0x3b7a77['id'])&&(this['addLayer'](_0x56f8ff,_0x3b7a77,_0x57235d,_0x520276),_0x520276=!(0x328*-0x9+0xf*0x194+0x4bd)),_0x2c2a6a++,_0x3b7a77['id']===_0x294247&&_0x57235d===_0x33f34)break;}return _0x2c2a6a;}['updateDire'+'ctionalSha'+'dows'](){const {renderer:_0x132a90,renderActions:_0x48796d}=this;for(let _0x478067=0x2*-0x506+-0x866+0x1272;_0x478067<_0x48796d['length'];_0x478067++){const _0xfcbd5e=_0x48796d[_0x478067]['camera']['camera'],_0x465718=this['renderer']['cameraDirS'+'hadowLight'+'s']['get'](_0xfcbd5e);if(_0x465718)for(let _0x112406=-0x3*-0x215+-0x1b*0xe2+0x1197;_0x112406<_0x465718['length'];_0x112406++){const _0x11b863=_0x465718[_0x112406];if(_0x132a90['dirLightSh'+'adows']['get'](_0x11b863)!==_0xfcbd5e){_0x132a90['dirLightSh'+'adows']['set'](_0x11b863,_0xfcbd5e);const _0x22e990=_0x132a90['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x11b863,_0xfcbd5e);_0x22e990&&this['beforePass'+'es']['push'](_0x22e990);}}}}['updateClea'+'rs'](){const _0x1fc4df=this['renderActi'+'ons'][-0x479+-0x15df+0x1a58];if(_0x1fc4df){const _0x226cce=_0x1fc4df['camera']['camera'],_0x523f41=_0x226cce['fullSizeCl'+'earRect'];this['setClearCo'+'lor'](_0x523f41&&_0x1fc4df['clearColor']?_0x226cce['clearColor']:void(0xae3+-0xd23+0x240)),this['setClearDe'+'pth'](_0x523f41&&_0x1fc4df['clearDepth']&&!this['noDepthCle'+'ar']?_0x226cce['clearDepth']:void(0x16c2+0x14d7+0x2b99*-0x1)),this['setClearSt'+'encil'](_0x523f41&&_0x1fc4df['clearStenc'+'il']?_0x226cce['clearStenc'+'il']:void(-0x181c+-0x1f9e+0x37ba));}}['frameUpdat'+'e'](){super['frameUpdat'+'e'](),this['updateDire'+'ctionalSha'+'dows'](),this['updateClea'+'rs']();}['before'](){const {renderActions:_0xc6ee4}=this;for(let _0x46a332=0x2b4*0x1+-0x4ec+0x4*0x8e;_0x46a332<_0xc6ee4['length'];_0x46a332++){const _0x43f03d=_0xc6ee4[_0x46a332];_0x43f03d['firstCamer'+'aUse']&&this['scene']['fire'](Tw,_0x43f03d['camera']);}}['execute'](){const {layerComposition:_0xe92f54,renderActions:_0x1abd6a}=this;for(let _0x866dba=-0x20b5+0x7d+0x2038;_0x866dba<_0x1abd6a['length'];_0x866dba++){const _0x3abe43=_0x1abd6a[_0x866dba],_0x4d916e=_0x3abe43['layer'];w['call'](()=>{_0xe92f54['getLayerBy'+'Name'](_0x4d916e['name'])||w['warnOnce']('Layer\x20'+_0x4d916e['name']+('\x20is\x20not\x20fo'+'und\x20in\x20the'+'\x20scene\x20and'+'\x20will\x20not\x20'+'be\x20rendere'+'d.\x20Your\x20re'+'nder\x20pass\x20'+'setup\x20migh'+'t\x20need\x20to\x20'+'be\x20updated'+'.'));}),_0xe92f54['isEnabled'](_0x4d916e,_0x3abe43['transparen'+'t'])&&this['renderRend'+'erAction'](_0x3abe43,_0x866dba===0x11*-0xbf+0x1*0xa2a+0x285);}}['after'](){for(let _0x5ce871=0x2277*0x1+-0x149e+-0x2c5*0x5;_0x5ce871<this['renderActi'+'ons']['length'];_0x5ce871++){const _0xbcbde8=this['renderActi'+'ons'][_0x5ce871];_0xbcbde8['lastCamera'+'Use']&&this['scene']['fire'](ww,_0xbcbde8['camera']);}this['beforePass'+'es']['length']=0x2*0x11ed+-0x621*0x4+-0xb56;}['renderRend'+'erAction'](_0x3856e4,_0xde0899){var _0x3e6897;const {renderer:_0x7181eb,scene:_0x118d4d}=this,_0x19252c=_0x7181eb['device'],{layer:_0x4006aa,transparent:_0x415f6b,camera:_0x3aaa61}=_0x3856e4;Q['pushGpuMar'+'ker'](this['device'],'Camera:\x20'+(_0x3aaa61?_0x3aaa61['entity']['name']:'Unnamed')+',\x20Layer:\x20'+_0x4006aa['name']+'('+(_0x415f6b?'TRANSP':'OPAQUE')+')');const _0x678c5d=de();if(_0x3aaa61){const _0x5256ee=_0x3aaa61['gammaCorre'+'ction'],_0x403985=_0x3aaa61['toneMappin'+'g'];this['gammaCorre'+'ction']!==void(0x11ed+0x759+-0x50e*0x5)&&(_0x3aaa61['gammaCorre'+'ction']=this['gammaCorre'+'ction']),this['toneMappin'+'g']!==void(0x227*0x10+0x106c+-0x7c*0x69)&&(_0x3aaa61['toneMappin'+'g']=this['toneMappin'+'g']),_0x118d4d['fire'](Ew,_0x3aaa61,_0x4006aa,_0x415f6b);const _0x47610d={'lightClusters':_0x3856e4['lightClust'+'ers']},_0x366797=((_0x3e6897=_0x3aaa61['camera']['shaderPass'+'Info'])==null?void(-0x1284+0x1*-0xb86+-0x602*-0x5):_0x3e6897['index'])??xa;(!_0xde0899||!_0x3aaa61['camera']['fullSizeCl'+'earRect'])&&(_0x47610d['clearColor']=_0x3856e4['clearColor'],_0x47610d['clearDepth']=_0x3856e4['clearDepth'],_0x47610d['clearStenc'+'il']=_0x3856e4['clearStenc'+'il']);const _0x1517ac=_0x3856e4['renderTarg'+'et']??_0x19252c['backBuffer'];_0x7181eb['renderForw'+'ardLayer'](_0x3aaa61['camera'],_0x1517ac,_0x4006aa,_0x415f6b,_0x366797,_0x3856e4['viewBindGr'+'oups'],_0x47610d),_0x19252c['setBlendSt'+'ate'](pt['NOBLEND']),_0x19252c['setStencil'+'State'](null,null),_0x19252c['setAlphaTo'+'Coverage'](!(0x2*-0x1c5+-0x25d3+0x295e)),_0x118d4d['fire'](bw,_0x3aaa61,_0x4006aa,_0x415f6b),this['gammaCorre'+'ction']!==void(-0x9*-0x232+0xa59*-0x2+0x1*0xf0)&&(_0x3aaa61['gammaCorre'+'ction']=_0x5256ee),this['toneMappin'+'g']!==void(-0xa3*0x3b+0x1*-0x1d91+0x4322)&&(_0x3aaa61['toneMappin'+'g']=_0x403985);}Q['popGpuMark'+'er'](this['device']),_0x4006aa['_renderTim'+'e']+=de()-_0x678c5d;}['log'](_0x1dccbc,_0x2abbbe){if(super['log'](_0x1dccbc,_0x2abbbe),mi['get'](tn)){const {layerComposition:_0x4c43dd}=this;this['renderActi'+'ons']['forEach']((_0x2c98b7,_0x2b7778)=>{const _0x1d09ed=_0x2c98b7['layer'],_0x4a87c6=_0x1d09ed['enabled']&&_0x4c43dd['isEnabled'](_0x1d09ed,_0x2c98b7['transparen'+'t']),_0x48a75d=_0x2c98b7['camera'];w['trace'](tn,'\x20\x20\x20\x20'+_0x2b7778+':'+('\x20Cam:\x20'+(_0x48a75d?_0x48a75d['entity']['name']:'-'))['padEnd'](-0x1683+-0x1*-0x25ab+-0x6*0x283,'\x20')+('\x20Lay:\x20'+_0x1d09ed['name'])['padEnd'](0x679*0x3+-0x55*-0x61+-0x19c5*0x2,'\x20')+(_0x2c98b7['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x4a87c6?'\x20ENABLED':'\x20DISABLED')+('\x20Meshes:\x20'+_0x1d09ed['meshInstan'+'ces']['length'])['padEnd'](-0x2ef*-0xd+-0x53*0x14+-0x1*0x1fa2,'\x20'));});}}}class mb extends ys{constructor(_0x4b9a78,_0x2f8dac,_0x7ae01d){super(_0x4b9a78),this['renderer']=_0x2f8dac,this['renderActi'+'on']=_0x7ae01d,this['requiresCu'+'bemaps']=!(0x5*0x1d3+-0x1*-0x10df+-0x1*0x19fd);}['execute'](){const _0x263d3c=this['renderActi'+'on'],_0xd6f1ba=_0x263d3c['camera'];w['assert'](_0x263d3c['triggerPos'+'tprocess']&&_0xd6f1ba['onPostproc'+'essing']),_0xd6f1ba['onPostproc'+'essing']();}}const _b=[[],[],[]],nr=new ie(),Lr={'drawCalls':[],'shaderInstances':[],'isNewMaterial':[],'lightMaskChanged':[],'clear':function(){this['drawCalls']['length']=0x2050+0x589*-0x1+-0x1*0x1ac7,this['shaderInst'+'ances']['length']=-0x2a9*0x2+-0x13d7+0x1929,this['isNewMater'+'ial']['length']=-0x1c3+-0x1776+0x1939,this['lightMaskC'+'hanged']['length']=0xf1d*0x1+0x44*0x54+-0x1*0x256d;}};function gb(_0xd10738){const _0x158daf=[];for(let _0x1df7fd=0x14b*-0x1c+-0x7ed+0x2c21;_0x1df7fd<_0xd10738;++_0x1df7fd){const _0x534bdf=Math['sqrt'](_0x1df7fd+(0x326*0x9+-0x1*0x1ac9+-0x18d*0x1+0.5))/Math['sqrt'](_0xd10738);_0x158daf['push'](_0x534bdf);}return _0x158daf;}function Sb(_0x34742b){const _0x4d2edd=[];for(let _0x42c18a=0x2f*0x66+-0x21b8+0xefe;_0x42c18a<_0x34742b;_0x42c18a++){const _0x3d9b3d=_0x42c18a/_0x34742b,_0x76d619=Math['sqrt'](_0x3d9b3d*_0x3d9b3d);_0x4d2edd['push'](_0x76d619);}return _0x4d2edd;}const Fi=class Fi extends ub{constructor(_0x355de0){super(_0x355de0);const _0x454f56=this['device'];this['_forwardDr'+'awCalls']=-0x146d+-0x698*0x5+0x3565,this['_materialS'+'witches']=0xce0+-0x8*-0x10c+0x40*-0x55,this['_depthMapT'+'ime']=0x1*0x5d8+0x4f3*0x1+0xacb*-0x1,this['_forwardTi'+'me']=-0x1*0x193a+0x4*-0x2ce+0x2472,this['_sortTime']=-0x831+0x293*0x5+-0x1*0x4ae;const _0x4cdf24=_0x454f56['scope'];this['fogColorId']=_0x4cdf24['resolve']('fog_color'),this['fogStartId']=_0x4cdf24['resolve']('fog_start'),this['fogEndId']=_0x4cdf24['resolve']('fog_end'),this['fogDensity'+'Id']=_0x4cdf24['resolve']('fog_densit'+'y'),this['ambientId']=_0x4cdf24['resolve']('light_glob'+'alAmbient'),this['skyboxInte'+'nsityId']=_0x4cdf24['resolve']('skyboxInte'+'nsity'),this['cubeMapRot'+'ationMatri'+'xId']=_0x4cdf24['resolve']('cubeMapRot'+'ationMatri'+'x'),this['pcssDiskSa'+'mplesId']=_0x4cdf24['resolve']('pcssDiskSa'+'mples[0]'),this['pcssSphere'+'SamplesId']=_0x4cdf24['resolve']('pcssSphere'+'Samples[0]'),this['lightColor'+'Id']=[],this['lightDir']=[],this['lightDirId']=[],this['lightShado'+'wMapId']=[],this['lightShado'+'wMatrixId']=[],this['lightShado'+'wParamsId']=[],this['lightShado'+'wIntensity']=[],this['lightRadiu'+'sId']=[],this['lightPos']=[],this['lightPosId']=[],this['lightWidth']=[],this['lightWidth'+'Id']=[],this['lightHeigh'+'t']=[],this['lightHeigh'+'tId']=[],this['lightInAng'+'leId']=[],this['lightOutAn'+'gleId']=[],this['lightCooki'+'eId']=[],this['lightCooki'+'eIntId']=[],this['lightCooki'+'eMatrixId']=[],this['lightCooki'+'eOffsetId']=[],this['lightShado'+'wSearchAre'+'aId']=[],this['lightCamer'+'aParamsId']=[],this['lightSoftS'+'hadowParam'+'sId']=[],this['shadowMatr'+'ixPaletteI'+'d']=[],this['shadowCasc'+'adeDistanc'+'esId']=[],this['shadowCasc'+'adeCountId']=[],this['shadowCasc'+'adeBlendId']=[],this['screenSize'+'Id']=_0x4cdf24['resolve']('uScreenSiz'+'e'),this['_screenSiz'+'e']=new Float32Array(0x15d8+0x1156+-0x272a*0x1),this['fogColor']=new Float32Array(0x1d05*-0x1+-0x2497+-0x419f*-0x1),this['ambientCol'+'or']=new Float32Array(-0x5*0xbf+0x899*0x1+-0x4db),this['pcssDiskSa'+'mples']=gb(0x173*-0x16+-0xcc9+0x2cbb),this['pcssSphere'+'Samples']=Sb(0x32*0x34+0x26e7+0x30ff*-0x1);}['destroy'](){super['destroy']();}['dispatchGl'+'obalLights'](_0x53dc69){const _0x3a10df=this['ambientCol'+'or'];if(nr['linear'](_0x53dc69['ambientLig'+'ht']),_0x3a10df[-0x1107*-0x1+-0x142f*-0x1+0x1b1*-0x16]=nr['r'],_0x3a10df[-0x1a8c+-0x43*-0xd+-0x2*-0xb93]=nr['g'],_0x3a10df[-0x4*0x661+0x704+-0xce*-0x17]=nr['b'],_0x53dc69['physicalUn'+'its']){for(let _0xe2f651=0x2706+-0x1262+0x529*-0x4;_0xe2f651<-0xdbd+0x1d*0x11+-0x3*-0x3f1;_0xe2f651++)_0x3a10df[_0xe2f651]*=_0x53dc69['ambientLum'+'inance'];}this['ambientId']['setValue'](_0x3a10df),this['skyboxInte'+'nsityId']['setValue'](_0x53dc69['physicalUn'+'its']?_0x53dc69['skyboxLumi'+'nance']:_0x53dc69['skyboxInte'+'nsity']),this['cubeMapRot'+'ationMatri'+'xId']['setValue'](_0x53dc69['_skyboxRot'+'ationMat3']['data']);}['_resolveLi'+'ght'](_0x4f9fda,_0x712745){const _0x5e65c8='light'+_0x712745;this['lightColor'+'Id'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+'_color'),this['lightDir'][_0x712745]=new Float32Array(-0x81d+-0x8d3+0x1*0x10f3),this['lightDirId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+'_direction'),this['lightShado'+'wMapId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+'_shadowMap'),this['lightShado'+'wMatrixId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_shadowMat'+'rix')),this['lightShado'+'wParamsId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_shadowPar'+'ams')),this['lightShado'+'wIntensity'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_shadowInt'+'ensity')),this['lightShado'+'wSearchAre'+'aId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_shadowSea'+'rchArea')),this['lightRadiu'+'sId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+'_radius'),this['lightPos'][_0x712745]=new Float32Array(-0x18fc*-0x1+-0x1*0x598+0x1361*-0x1),this['lightPosId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+'_position'),this['lightWidth'][_0x712745]=new Float32Array(-0x12d3+0x61*0x47+-0x5*0x19d),this['lightWidth'+'Id'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+'_halfWidth'),this['lightHeigh'+'t'][_0x712745]=new Float32Array(-0x1*-0x5e3+0x1*-0xfc7+0x9e7),this['lightHeigh'+'tId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_halfHeigh'+'t')),this['lightInAng'+'leId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_innerCone'+'Angle')),this['lightOutAn'+'gleId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_outerCone'+'Angle')),this['lightCooki'+'eId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+'_cookie'),this['lightCooki'+'eIntId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_cookieInt'+'ensity')),this['lightCooki'+'eMatrixId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_cookieMat'+'rix')),this['lightCooki'+'eOffsetId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_cookieOff'+'set')),this['lightCamer'+'aParamsId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_cameraPar'+'ams')),this['lightSoftS'+'hadowParam'+'sId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_softShado'+'wParams')),this['shadowMatr'+'ixPaletteI'+'d'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_shadowMat'+'rixPalette'+'[0]')),this['shadowCasc'+'adeDistanc'+'esId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_shadowCas'+'cadeDistan'+'ces')),this['shadowCasc'+'adeCountId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_shadowCas'+'cadeCount')),this['shadowCasc'+'adeBlendId'][_0x712745]=_0x4f9fda['resolve'](_0x5e65c8+('_shadowCas'+'cadeBlend'));}['setLTCDire'+'ctionalLig'+'ht'](_0x546cf8,_0x5ab695,_0x35f2ff,_0x44f175,_0x49f6bf){this['lightPos'][_0x5ab695][-0x1*0x1597+-0x1582+0x3eb*0xb]=_0x44f175['x']-_0x35f2ff['x']*_0x49f6bf,this['lightPos'][_0x5ab695][0x6*0x195+-0x115*0x16+0xe51]=_0x44f175['y']-_0x35f2ff['y']*_0x49f6bf,this['lightPos'][_0x5ab695][-0x1f3f+-0x1d94+0x1447*0x3]=_0x44f175['z']-_0x35f2ff['z']*_0x49f6bf,this['lightPosId'][_0x5ab695]['setValue'](this['lightPos'][_0x5ab695]);const _0x1be192=_0x546cf8['transformV'+'ector'](new D(-(-0x2*0x4be+0x1760+0x1c*-0x7f+0.5),0x1a*0x56+0x133f+-0x1bfb,0x3*-0xc22+0xe0c+0x165a));this['lightWidth'][_0x5ab695][0x37+0x125*0x17+0x1*-0x1a8a]=_0x1be192['x']*_0x49f6bf,this['lightWidth'][_0x5ab695][-0x1*-0x1e71+0x7f*-0x46+0x6*0xb7]=_0x1be192['y']*_0x49f6bf,this['lightWidth'][_0x5ab695][-0x24bb+0x1081+-0x8c*-0x25]=_0x1be192['z']*_0x49f6bf,this['lightWidth'+'Id'][_0x5ab695]['setValue'](this['lightWidth'][_0x5ab695]);const _0x1e0ce6=_0x546cf8['transformV'+'ector'](new D(-0x1*0x39a+-0x137f+0x1719,-0x142b*0x1+-0x2507+0x1*0x3932,0x21ca+-0x1624+0xd5*-0xe+0.5));this['lightHeigh'+'t'][_0x5ab695][-0xdbc+-0x220f+-0x5*-0x98f]=_0x1e0ce6['x']*_0x49f6bf,this['lightHeigh'+'t'][_0x5ab695][-0x183+-0x1*0xd91+-0x15f*-0xb]=_0x1e0ce6['y']*_0x49f6bf,this['lightHeigh'+'t'][_0x5ab695][0x59f+0x104b*0x1+0x15e8*-0x1]=_0x1e0ce6['z']*_0x49f6bf,this['lightHeigh'+'tId'][_0x5ab695]['setValue'](this['lightHeigh'+'t'][_0x5ab695]);}['dispatchDi'+'rectLights'](_0x44099d,_0x615ad2,_0x56e9d0){let _0x47d34a=-0x8e3+0xf44+0x661*-0x1;const _0x1ed658=this['device']['scope'];for(let _0x4480fd=-0xbc+-0x195d+0x1a19;_0x4480fd<_0x44099d['length'];_0x4480fd++){if(!(_0x44099d[_0x4480fd]['mask']&_0x615ad2))continue;const _0x5927b7=_0x44099d[_0x4480fd],_0x4e0ed9=_0x5927b7['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x47d34a]||this['_resolveLi'+'ght'](_0x1ed658,_0x47d34a),this['lightColor'+'Id'][_0x47d34a]['setValue'](_0x5927b7['_colorLine'+'ar']),_0x4e0ed9['getY'](_0x5927b7['_direction'])['mulScalar'](-(0x251*0xd+-0x17*-0x1a1+0x1*-0x4393)),_0x5927b7['_direction']['normalize'](),this['lightDir'][_0x47d34a][0x672+-0x1b8+-0x4ba]=_0x5927b7['_direction']['x'],this['lightDir'][_0x47d34a][-0xf*0x15a+-0x93c+-0x1d83*-0x1]=_0x5927b7['_direction']['y'],this['lightDir'][_0x47d34a][0x1ddd*-0x1+0x1506+-0x5*-0x1c5]=_0x5927b7['_direction']['z'],this['lightDirId'][_0x47d34a]['setValue'](this['lightDir'][_0x47d34a]),_0x5927b7['shape']!==js&&this['setLTCDire'+'ctionalLig'+'ht'](_0x4e0ed9,_0x47d34a,_0x5927b7['_direction'],_0x56e9d0['_node']['getPositio'+'n'](),_0x56e9d0['farClip']),_0x5927b7['castShadow'+'s']){const _0x13aa72=_0x5927b7['getRenderD'+'ata'](_0x56e9d0,-0x62f*0x5+0x19f8+0x7*0xb5),_0x1c4cef=_0x5927b7['_getUnifor'+'mBiasValue'+'s'](_0x13aa72);this['lightShado'+'wMapId'][_0x47d34a]['setValue'](_0x13aa72['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x47d34a]['setValue'](_0x13aa72['shadowMatr'+'ix']['data']),this['shadowMatr'+'ixPaletteI'+'d'][_0x47d34a]['setValue'](_0x5927b7['_shadowMat'+'rixPalette']),this['shadowCasc'+'adeDistanc'+'esId'][_0x47d34a]['setValue'](_0x5927b7['_shadowCas'+'cadeDistan'+'ces']),this['shadowCasc'+'adeCountId'][_0x47d34a]['setValue'](_0x5927b7['numCascade'+'s']),this['shadowCasc'+'adeBlendId'][_0x47d34a]['setValue'](-0x1de8+0x125*-0x7+-0x4*-0x97b-_0x5927b7['cascadeBle'+'nd']),this['lightShado'+'wIntensity'][_0x47d34a]['setValue'](_0x5927b7['shadowInte'+'nsity']),this['lightSoftS'+'hadowParam'+'sId'][_0x47d34a]['setValue'](_0x5927b7['_softShado'+'wParams']),_0x13aa72['shadowCame'+'ra']['renderTarg'+'et']&&this['lightShado'+'wSearchAre'+'aId'][_0x47d34a]['setValue'](_0x5927b7['penumbraSi'+'ze']/_0x13aa72['shadowCame'+'ra']['renderTarg'+'et']['width']*_0x13aa72['projection'+'Compensati'+'on']);const _0x80072f=_0x5927b7['_shadowCam'+'eraParams'];_0x80072f['length']=-0x22e7*-0x1+-0x2*0x7b1+-0x1381,_0x80072f[0xb*-0x6f+-0x13*-0x125+0x6a*-0x29]=0x205f+0xb7c+-0x2bdb,_0x80072f[0x691*0x1+-0xe11+0x781]=_0x13aa72['shadowCame'+'ra']['_farClip'],_0x80072f[-0xf1d+0x8a5*0x2+-0x3*0xb9]=_0x13aa72['shadowCame'+'ra']['_nearClip'],_0x80072f[-0x258e+-0x29*-0x29+0xf80*0x2]=-0x24c5+0x104b+0x147b,this['lightCamer'+'aParamsId'][_0x47d34a]['setValue'](_0x80072f);const _0x1911b9=_0x5927b7['_shadowRen'+'derParams'];_0x1911b9['length']=-0x2397+0x1f05+0x496,_0x1911b9[0x820+-0x1d01+0x14e1]=_0x5927b7['_shadowRes'+'olution'],_0x1911b9[-0x1e8d+0x13d*0x11+0x981]=_0x1c4cef['normalBias'],_0x1911b9[0x1*-0x268f+-0x1056+0x36e7]=_0x1c4cef['bias'],_0x1911b9[-0x22f*-0xd+-0x1da0+0x140]=-0x4a*0x21+0x25b1+-0x1c27,this['lightShado'+'wParamsId'][_0x47d34a]['setValue'](_0x1911b9);}_0x47d34a++;}return _0x47d34a;}['setLTCPosi'+'tionalLigh'+'t'](_0x299d24,_0x4fe94d){const _0x566dd0=_0x299d24['transformV'+'ector'](new D(-(0xefd*-0x2+-0x1868+0x3662*0x1+0.5),0x3*0x14f+-0x14*0x6e+0x4ab,-0x503*0x1+-0xfd1*-0x2+-0x2f*0x91));this['lightWidth'][_0x4fe94d][0x1daf+0xe*-0x86+-0x165b*0x1]=_0x566dd0['x'],this['lightWidth'][_0x4fe94d][-0x2674+-0x1832+0x2b*0x175]=_0x566dd0['y'],this['lightWidth'][_0x4fe94d][0x56*-0x14+0x1b0c+-0x1452]=_0x566dd0['z'],this['lightWidth'+'Id'][_0x4fe94d]['setValue'](this['lightWidth'][_0x4fe94d]);const _0x2e7ee0=_0x299d24['transformV'+'ector'](new D(-0x81e+0x2*-0x1a3+-0x2d9*-0x4,0xa46+0x1*0x16c1+-0x1*0x2107,0x20ea*-0x1+0x232a+-0x240+0.5));this['lightHeigh'+'t'][_0x4fe94d][0xd5*-0x1e+0xa72*-0x2+-0x1*-0x2dda]=_0x2e7ee0['x'],this['lightHeigh'+'t'][_0x4fe94d][-0xf40+0x12f*0xb+0x23c*0x1]=_0x2e7ee0['y'],this['lightHeigh'+'t'][_0x4fe94d][-0x6a*-0x4+-0x25*0x7e+0x8*0x212]=_0x2e7ee0['z'],this['lightHeigh'+'tId'][_0x4fe94d]['setValue'](this['lightHeigh'+'t'][_0x4fe94d]);}['dispatchOm'+'niLight'](_0x1738f4,_0x501cc4,_0x302a97){const _0xdf29cc=_0x501cc4['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x302a97]||this['_resolveLi'+'ght'](_0x1738f4,_0x302a97),this['lightRadiu'+'sId'][_0x302a97]['setValue'](_0x501cc4['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x302a97]['setValue'](_0x501cc4['_colorLine'+'ar']),_0xdf29cc['getTransla'+'tion'](_0x501cc4['_position']),this['lightPos'][_0x302a97][0x969+0xb76+-0x14df]=_0x501cc4['_position']['x'],this['lightPos'][_0x302a97][-0x1a6d+0x239+-0x1*-0x1835]=_0x501cc4['_position']['y'],this['lightPos'][_0x302a97][-0x1b1f+-0x5c4+0x20e5]=_0x501cc4['_position']['z'],this['lightPosId'][_0x302a97]['setValue'](this['lightPos'][_0x302a97]),_0x501cc4['shape']!==js&&this['setLTCPosi'+'tionalLigh'+'t'](_0xdf29cc,_0x302a97),_0x501cc4['castShadow'+'s']){const _0x5949a3=_0x501cc4['getRenderD'+'ata'](null,-0x1883+0x334+0x154f);this['lightShado'+'wMapId'][_0x302a97]['setValue'](_0x5949a3['shadowBuff'+'er']);const _0x547bb9=_0x501cc4['_getUnifor'+'mBiasValue'+'s'](_0x5949a3),_0x10cbef=_0x501cc4['_shadowRen'+'derParams'];_0x10cbef['length']=0x6d6+0x4a5+-0x1*0xb77,_0x10cbef[0x1afc+-0x67*0x9+-0x175d*0x1]=_0x501cc4['_shadowRes'+'olution'],_0x10cbef[-0xe7*0x17+0xfd9+0x4e9]=_0x547bb9['normalBias'],_0x10cbef[0xdcf+0x1*-0x67f+-0x74e]=_0x547bb9['bias'],_0x10cbef[-0x150*-0x2+0x1*0x52b+-0x7c8]=(-0xca7+0x182f+0xb87*-0x1)/_0x501cc4['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x302a97]['setValue'](_0x10cbef),this['lightShado'+'wIntensity'][_0x302a97]['setValue'](_0x501cc4['shadowInte'+'nsity']);const _0x561ba3=_0x501cc4['penumbraSi'+'ze']/_0x5949a3['shadowCame'+'ra']['renderTarg'+'et']['width'];this['lightShado'+'wSearchAre'+'aId'][_0x302a97]['setValue'](_0x561ba3);const _0x35bbdf=_0x501cc4['_shadowCam'+'eraParams'];_0x35bbdf['length']=0x97*0x3+-0x25c3+0xb*0x346,_0x35bbdf[-0x165f+0x2677*0x1+0x19c*-0xa]=0x64*-0x3+-0x841*-0x3+0x225*-0xb,_0x35bbdf[0x1997+-0x1c68+0x26*0x13]=_0x5949a3['shadowCame'+'ra']['_farClip'],_0x35bbdf[-0x13b1*0x1+-0xb45+0x1ef8]=_0x5949a3['shadowCame'+'ra']['_nearClip'],_0x35bbdf[-0x15*-0x12d+0xcbf+-0x2e1*0xd]=-0x26e7*-0x1+0x3d*-0x3b+-0x13e*0x14,this['lightCamer'+'aParamsId'][_0x302a97]['setValue'](_0x35bbdf);}_0x501cc4['_cookie']&&(this['lightCooki'+'eId'][_0x302a97]['setValue'](_0x501cc4['_cookie']),this['lightShado'+'wMatrixId'][_0x302a97]['setValue'](_0xdf29cc['data']),this['lightCooki'+'eIntId'][_0x302a97]['setValue'](_0x501cc4['cookieInte'+'nsity']));}['dispatchSp'+'otLight'](_0x2f4725,_0x26f680,_0x465f1b){const _0x21be3e=_0x26f680['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x465f1b]||this['_resolveLi'+'ght'](_0x2f4725,_0x465f1b),this['lightInAng'+'leId'][_0x465f1b]['setValue'](_0x26f680['_innerCone'+'AngleCos']),this['lightOutAn'+'gleId'][_0x465f1b]['setValue'](_0x26f680['_outerCone'+'AngleCos']),this['lightRadiu'+'sId'][_0x465f1b]['setValue'](_0x26f680['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x465f1b]['setValue'](_0x26f680['_colorLine'+'ar']),_0x21be3e['getTransla'+'tion'](_0x26f680['_position']),this['lightPos'][_0x465f1b][-0xa*-0x9+-0x2*0xec5+0x1d30]=_0x26f680['_position']['x'],this['lightPos'][_0x465f1b][-0x268+-0x1551+0x17ba]=_0x26f680['_position']['y'],this['lightPos'][_0x465f1b][-0x1ea5+-0x265a*0x1+-0xdcd*-0x5]=_0x26f680['_position']['z'],this['lightPosId'][_0x465f1b]['setValue'](this['lightPos'][_0x465f1b]),_0x26f680['shape']!==js&&this['setLTCPosi'+'tionalLigh'+'t'](_0x21be3e,_0x465f1b),_0x21be3e['getY'](_0x26f680['_direction'])['mulScalar'](-(-0x16b7*-0x1+0x2f*-0x25+0xfeb*-0x1)),_0x26f680['_direction']['normalize'](),this['lightDir'][_0x465f1b][0x1271*-0x1+0xa55*0x1+0x3*0x2b4]=_0x26f680['_direction']['x'],this['lightDir'][_0x465f1b][0x7*-0x481+0x2*-0xff8+0x3f78]=_0x26f680['_direction']['y'],this['lightDir'][_0x465f1b][-0x1a1*0x13+-0x2329+0xb6*0x5d]=_0x26f680['_direction']['z'],this['lightDirId'][_0x465f1b]['setValue'](this['lightDir'][_0x465f1b]),_0x26f680['castShadow'+'s']){const _0x3e392a=_0x26f680['getRenderD'+'ata'](null,0x14d1+0x158+-0x1629);this['lightShado'+'wMapId'][_0x465f1b]['setValue'](_0x3e392a['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x465f1b]['setValue'](_0x3e392a['shadowMatr'+'ix']['data']);const _0x3f0474=_0x26f680['_getUnifor'+'mBiasValue'+'s'](_0x3e392a),_0x1b9a25=_0x26f680['_shadowRen'+'derParams'];_0x1b9a25['length']=0x1fd0+-0x35c*-0x8+-0x3aac,_0x1b9a25[-0x3*-0x234+-0x133f+0xca3]=_0x26f680['_shadowRes'+'olution'],_0x1b9a25[-0x2c5*0x2+0xb5e+-0xd5*0x7]=_0x3f0474['normalBias'],_0x1b9a25[-0x21dd+0xafc+-0x1b*-0xd9]=_0x3f0474['bias'],_0x1b9a25[0x18ad+-0x2588+0x7a*0x1b]=(0x389*-0xb+0x1af1+0x1b5*0x7)/_0x26f680['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x465f1b]['setValue'](_0x1b9a25),this['lightShado'+'wIntensity'][_0x465f1b]['setValue'](_0x26f680['shadowInte'+'nsity']);const _0x16c125=_0x26f680['penumbraSi'+'ze']/_0x3e392a['shadowCame'+'ra']['renderTarg'+'et']['width'],_0xcab702=_0x3e392a['shadowCame'+'ra']['_fov']*Math['PI']/(0x14*0x9a+0x165a+-0x21ae*0x1),_0x2d489a=(-0x11bc+-0x7*-0x397+0x56*-0x16)/Math['tan'](_0xcab702/(-0x207*-0xf+0x3*-0x2ce+0xd*-0x1b1));this['lightShado'+'wSearchAre'+'aId'][_0x465f1b]['setValue'](_0x16c125*_0x2d489a);const _0x1747d1=_0x26f680['_shadowCam'+'eraParams'];_0x1747d1['length']=0x13ca+-0x10*0x11b+-0x216,_0x1747d1[0x2077+-0x1*-0x8e4+0x1*-0x295b]=0x1a9b+-0x210*-0x1+-0x1cab,_0x1747d1[-0x1df8+-0x1206+0x2fff]=_0x3e392a['shadowCame'+'ra']['_farClip'],_0x1747d1[0x2587+0x1a53+-0x3fd8]=_0x3e392a['shadowCame'+'ra']['_nearClip'],_0x1747d1[-0xb7*-0x6+-0xb67+0x720]=0xad4*0x1+-0x2400+-0xb3*-0x24,this['lightCamer'+'aParamsId'][_0x465f1b]['setValue'](_0x1747d1);}if(_0x26f680['_cookie']){if(!_0x26f680['castShadow'+'s']){const _0x375627=kn['evalSpotCo'+'okieMatrix'](_0x26f680);this['lightShado'+'wMatrixId'][_0x465f1b]['setValue'](_0x375627['data']);}this['lightCooki'+'eId'][_0x465f1b]['setValue'](_0x26f680['_cookie']),this['lightCooki'+'eIntId'][_0x465f1b]['setValue'](_0x26f680['cookieInte'+'nsity']),_0x26f680['_cookieTra'+'nsform']&&(_0x26f680['_cookieTra'+'nsformUnif'+'orm'][0x256f+0x52*0x5+-0xd03*0x3]=_0x26f680['_cookieTra'+'nsform']['x'],_0x26f680['_cookieTra'+'nsformUnif'+'orm'][-0x3*-0xb7b+-0x93b*-0x1+0x63d*-0x7]=_0x26f680['_cookieTra'+'nsform']['y'],_0x26f680['_cookieTra'+'nsformUnif'+'orm'][0x1310+0x119*-0x1b+-0x3f*-0x2b]=_0x26f680['_cookieTra'+'nsform']['z'],_0x26f680['_cookieTra'+'nsformUnif'+'orm'][0x7*0x11+-0xa41+-0xc1*-0xd]=_0x26f680['_cookieTra'+'nsform']['w'],this['lightCooki'+'eMatrixId'][_0x465f1b]['setValue'](_0x26f680['_cookieTra'+'nsformUnif'+'orm']),_0x26f680['_cookieOff'+'setUniform'][0x1a3*-0x11+0x1720+-0x4b3*-0x1]=_0x26f680['_cookieOff'+'set']['x'],_0x26f680['_cookieOff'+'setUniform'][-0x1927+0xeab+0xa7d]=_0x26f680['_cookieOff'+'set']['y'],this['lightCooki'+'eOffsetId'][_0x465f1b]['setValue'](_0x26f680['_cookieOff'+'setUniform']));}}['dispatchLo'+'calLights'](_0x25dbbe,_0x5c9509,_0x4b3478){let _0x296b66=_0x4b3478;const _0x34c678=this['device']['scope'],_0x10b252=_0x25dbbe[Ke],_0x4a0077=_0x10b252['length'];for(let _0x10ad84=-0x1*0x1b3c+-0xdb*-0xd+0x101d;_0x10ad84<_0x4a0077;_0x10ad84++){const _0xa27e17=_0x10b252[_0x10ad84];_0xa27e17['mask']&_0x5c9509&&(this['dispatchOm'+'niLight'](_0x34c678,_0xa27e17,_0x296b66),_0x296b66++);}const _0x1193a6=_0x25dbbe[Ze],_0x4b5ba4=_0x1193a6['length'];for(let _0x445a40=0x1*0x19ab+-0x1*0x1909+-0xa2;_0x445a40<_0x4b5ba4;_0x445a40++){const _0x12c1c3=_0x1193a6[_0x445a40];_0x12c1c3['mask']&_0x5c9509&&(this['dispatchSp'+'otLight'](_0x34c678,_0x12c1c3,_0x296b66),_0x296b66++);}}['renderForw'+'ardPrepare'+'Materials'](_0x118b10,_0x46342a,_0x5ca06d,_0x3594cc,_0x55dec8,_0x1527ad){const _0xabc56=_0x118b10['fogParams']??this['scene']['fog'],_0x12ba5d=_0x118b10['shaderPara'+'ms'];_0x12ba5d['fog']=_0xabc56['type'],_0x12ba5d['srgbRender'+'Target']=(_0x46342a==null?void(-0x1cd5+-0x2354+0x4029):_0x46342a['isColorBuf'+'ferSrgb'](0x4e7+-0x2*-0x5b3+-0x104d))??!(-0x1*-0x53e+0x279*-0x3+0x22e);const _0x250b57=(_0x277c03,_0x5a565c,_0x1ccf21,_0x202fac)=>{Lr['drawCalls']['push'](_0x277c03),Lr['shaderInst'+'ances']['push'](_0x5a565c),Lr['isNewMater'+'ial']['push'](_0x1ccf21),Lr['lightMaskC'+'hanged']['push'](_0x202fac);};Lr['clear']();const _0x14fa72=this['device'],_0x49d842=this['scene'],_0x3d6a06=_0x49d842['clusteredL'+'ightingEna'+'bled'],_0x2a06c7=(_0x55dec8==null?void(-0x1093*0x1+-0x1d02+-0x2d95*-0x1):_0x55dec8['getLightHa'+'sh'](_0x3d6a06))??-0x1*-0x742+0xed*-0x27+0x1cd9;let _0xf31e3a=null,_0xc73f1,_0xd0a929;const _0x1c63c4=_0x5ca06d['length'];for(let _0x9b095=0x1d19*-0x1+-0x463*-0x8+-0x5ff;_0x9b095<_0x1c63c4;_0x9b095++){const _0x4e0b75=_0x5ca06d[_0x9b095];if(_0x118b10===Fi['skipRender'+'Camera']){if(Fi['_skipRende'+'rCounter']>=Fi['skipRender'+'After'])continue;Fi['_skipRende'+'rCounter']++;}if(_0x55dec8){if(_0x55dec8['_skipRende'+'rCounter']>=_0x55dec8['skipRender'+'After'])continue;_0x55dec8['_skipRende'+'rCounter']++;}const _0x4de3e3=_0x4e0b75['instancing'+'Data'];if(_0x4de3e3&&_0x4de3e3['count']<=-0x81+-0x2185*0x1+0x29e*0xd)continue;_0x4e0b75['ensureMate'+'rial'](_0x14fa72);const _0x32ff57=_0x4e0b75['material'],_0x3a7630=_0x4e0b75['_shaderDef'+'s'],_0x3d9a4c=_0x4e0b75['mask'];_0x32ff57&&_0x32ff57===_0xf31e3a&&_0x3a7630!==_0xc73f1&&(_0xf31e3a=null),_0x32ff57!==_0xf31e3a&&(this['_materialS'+'witches']++,_0x32ff57['_scene']=_0x49d842,_0x32ff57['dirty']&&(Q['pushGpuMar'+'ker'](_0x14fa72,'Node:\x20'+_0x4e0b75['node']['name']+(',\x20Material'+':\x20')+_0x32ff57['name']),_0x32ff57['updateUnif'+'orms'](_0x14fa72,_0x49d842),_0x32ff57['dirty']=!(-0x63*-0xd+0x2f*0x71+-0x1*0x19c5),Q['popGpuMark'+'er'](_0x14fa72)));const _0x323f0f=_0x4e0b75['getShaderI'+'nstance'](_0x1527ad,_0x2a06c7,_0x49d842,_0x12ba5d,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x3594cc);_0x250b57(_0x4e0b75,_0x323f0f,_0x32ff57!==_0xf31e3a,!_0xf31e3a||_0x3d9a4c!==_0xd0a929),_0xf31e3a=_0x32ff57,_0xc73f1=_0x3a7630,_0xd0a929=_0x3d9a4c;}return Lr;}['renderForw'+'ardInterna'+'l'](_0x45f9b9,_0x1f2fd7,_0x472fc8,_0x2466f0,_0xe97b03,_0x2898fa,_0x46e0c0){var _0x14f3ce,_0x170607;const _0x2b13e1=this['device'],_0x4006b4=this['scene'],_0x3c3132=-0x19c9+0x121*0x5+0x1425<<_0x2466f0,_0x24bf20=_0x2898fa?-(0x1edc+0x3*-0xb72+-0x1b*-0x21):-0x234e+-0x14*0xe5+-0x1*-0x3533,_0x308c6a=_0x4006b4['clusteredL'+'ightingEna'+'bled'],_0x3c8a2a=(_0x14f3ce=_0x45f9b9['xr'])!=null&&_0x14f3ce['session']&&_0x45f9b9['xr']['views']['list']['length']?_0x45f9b9['xr']['views']['list']:null,_0x36d88d=_0x1f2fd7['drawCalls']['length'];for(let _0x4ee8a7=0x4*-0x61b+0x16e2+0x18a;_0x4ee8a7<_0x36d88d;_0x4ee8a7++){const _0x4e7314=_0x1f2fd7['drawCalls'][_0x4ee8a7],_0x52db15=_0x1f2fd7['isNewMater'+'ial'][_0x4ee8a7],_0x4a2c3a=_0x1f2fd7['lightMaskC'+'hanged'][_0x4ee8a7],_0x5768aa=_0x1f2fd7['shaderInst'+'ances'][_0x4ee8a7],_0x2ac461=_0x4e7314['material'],_0x6a8a9c=_0x4e7314['mask'];if(_0x5768aa['shader']['failed'])continue;if(_0x52db15){if(_0x2b13e1['setShader'](_0x5768aa['shader'],!(0x19cc+-0x10*0x4+-0x198b)),_0x2ac461['setParamet'+'ers'](_0x2b13e1),_0x4a2c3a){const _0x57b870=this['dispatchDi'+'rectLights'](_0x472fc8[ve],_0x6a8a9c,_0x45f9b9);_0x308c6a||this['dispatchLo'+'calLights'](_0x472fc8,_0x6a8a9c,_0x57b870);}this['alphaTestI'+'d']['setValue'](_0x2ac461['alphaTest']),_0x2b13e1['setBlendSt'+'ate'](_0x2ac461['blendState']),_0x2b13e1['setDepthSt'+'ate'](_0x2ac461['depthState']),_0x2b13e1['setAlphaTo'+'Coverage'](_0x2ac461['alphaToCov'+'erage']);}Q['pushGpuMar'+'ker'](_0x2b13e1,'Node:\x20'+_0x4e7314['node']['name']+(',\x20Material'+':\x20')+_0x2ac461['name']),this['setupCullM'+'ode'](_0x45f9b9['_cullFaces'],_0x24bf20,_0x4e7314);const _0x4a1837=_0x4e7314['stencilFro'+'nt']??_0x2ac461['stencilFro'+'nt'],_0x2220e4=_0x4e7314['stencilBac'+'k']??_0x2ac461['stencilBac'+'k'];_0x2b13e1['setStencil'+'State'](_0x4a1837,_0x2220e4),_0x4e7314['setParamet'+'ers'](_0x2b13e1,_0x3c3132),_0x2b13e1['scope']['resolve']('meshInstan'+'ceId')['setValue'](_0x4e7314['id']);const _0x4fb06b=_0x4e7314['mesh'];this['setVertexB'+'uffers'](_0x2b13e1,_0x4fb06b),this['setMorphin'+'g'](_0x2b13e1,_0x4e7314['morphInsta'+'nce']),this['setSkinnin'+'g'](_0x2b13e1,_0x4e7314);const _0x522f99=_0x4e7314['instancing'+'Data'];_0x522f99&&_0x2b13e1['setVertexB'+'uffer'](_0x522f99['vertexBuff'+'er']),this['setMeshIns'+'tanceMatri'+'ces'](_0x4e7314,!(-0x1*0x33d+0x160c+-0x12cf)),this['setupMeshU'+'niformBuff'+'ers'](_0x5768aa);const _0x25c37e=_0x4e7314['renderStyl'+'e'],_0x2f99d9=_0x4fb06b['indexBuffe'+'r'][_0x25c37e];_0xe97b03==null||_0xe97b03(_0x4e7314,_0x4ee8a7);const _0xf72f50=(_0x170607=_0x4e7314['indirectDa'+'ta'])==null?void(0x2519+-0xc05+-0x217*0xc):_0x170607['get'](_0x45f9b9);if(_0x3c8a2a)for(let _0xf73664=-0x1*0x188e+-0x2*-0x129b+0x1*-0xca8;_0xf73664<_0x3c8a2a['length'];_0xf73664++){const _0x34976a=_0x3c8a2a[_0xf73664];if(_0x2b13e1['setViewpor'+'t'](_0x34976a['viewport']['x'],_0x34976a['viewport']['y'],_0x34976a['viewport']['z'],_0x34976a['viewport']['w']),_0x2b13e1['supportsUn'+'iformBuffe'+'rs']){const _0x514de9=_0x46e0c0[_0xf73664];_0x2b13e1['setBindGro'+'up']($o,_0x514de9);}else this['setupViewU'+'niforms'](_0x34976a,_0xf73664);const _0x292099=_0xf73664===-0x2122+0x1*-0x2701+0x4823,_0xc78a40=_0xf73664===_0x3c8a2a['length']-(0x15aa+-0x23d1+0x18*0x97);_0x2b13e1['draw'](_0x4fb06b['primitive'][_0x25c37e],_0x2f99d9,_0x522f99==null?void(-0x1283+0x3e*0x57+0x83*-0x5):_0x522f99['count'],_0xf72f50,_0x292099,_0xc78a40),this['_forwardDr'+'awCalls']++,_0x4e7314['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;}else _0x2b13e1['draw'](_0x4fb06b['primitive'][_0x25c37e],_0x2f99d9,_0x522f99==null?void(-0x1*-0x2cf+0x109c+-0x136b):_0x522f99['count'],_0xf72f50),this['_forwardDr'+'awCalls']++,_0x4e7314['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;_0x4ee8a7<_0x36d88d-(-0x121e+-0x1f*-0x41+0x52*0x20)&&!_0x1f2fd7['isNewMater'+'ial'][_0x4ee8a7+(0x11f9+-0x12fb+-0x1*-0x103)]&&_0x2ac461['setParamet'+'ers'](_0x2b13e1,_0x4e7314['parameters']),Q['popGpuMark'+'er'](_0x2b13e1);}}['renderForw'+'ard'](_0x4bdc02,_0x4c8805,_0x2b0899,_0x3dcd7c,_0x3c7cc7,_0x5011e2,_0x53f158,_0x257177,_0x3a448b){const _0x3082d7=de(),_0x13190f=this['renderForw'+'ardPrepare'+'Materials'](_0x4bdc02,_0x4c8805,_0x2b0899,_0x3dcd7c,_0x53f158,_0x3c7cc7);this['renderForw'+'ardInterna'+'l'](_0x4bdc02,_0x13190f,_0x3dcd7c,_0x3c7cc7,_0x5011e2,_0x257177,_0x3a448b),Lr['clear'](),this['_forwardTi'+'me']+=de()-_0x3082d7;}['renderForw'+'ardLayer'](_0x1f1c56,_0x49b0b6,_0x2df075,_0x4fec80,_0x4d918d,_0x221e3e,_0x33ba13={}){const {scene:_0x46d0d7,device:_0x15f90f}=this,_0x177719=_0x46d0d7['clusteredL'+'ightingEna'+'bled'];this['setupViewp'+'ort'](_0x1f1c56,_0x49b0b6);let _0x7a546,_0xb00698;if(_0x2df075){const _0x45a814=de();_0x2df075['sortVisibl'+'e'](_0x1f1c56,_0x4fec80),this['_sortTime']+=de()-_0x45a814;const _0x261497=_0x2df075['getCulledI'+'nstances'](_0x1f1c56);_0x7a546=_0x4fec80?_0x261497['transparen'+'t']:_0x261497['opaque'],_0x46d0d7['immediate']['onPreRende'+'rLayer'](_0x2df075,_0x7a546,_0x4fec80),_0x2df075['requiresLi'+'ghtCube']&&(this['lightCube']['update'](_0x46d0d7['ambientLig'+'ht'],_0x2df075['_lights']),this['constantLi'+'ghtCube']['setValue'](this['lightCube']['colors'])),_0xb00698=_0x2df075['splitLight'+'s'];}else _0x7a546=_0x33ba13['meshInstan'+'ces'],_0xb00698=_0x33ba13['splitLight'+'s']??_b;if(w['assert'](_0x7a546,'Either\x20lay'+'er\x20or\x20opti'+'ons.meshIn'+'stances\x20mu'+'st\x20be\x20prov'+'ided'),_0x177719){const _0x3bcdc3=_0x33ba13['lightClust'+'ers']??this['worldClust'+'ersAllocat'+'or']['empty'];_0x3bcdc3['activate'](),_0x2df075&&!this['clustersDe'+'bugRendere'+'d']&&_0x46d0d7['lighting']['debugLayer']===_0x2df075['id']&&(this['clustersDe'+'bugRendere'+'d']=!(0x251*0x10+0x187+-0x2697),Uf['render'](_0x3bcdc3,this['scene']));}_0x46d0d7['_activeCam'+'era']=_0x1f1c56;const _0x2347ca=_0x1f1c56['fogParams']??this['scene']['fog'];this['setFogCons'+'tants'](_0x2347ca);const _0x2b69cb=this['setCameraU'+'niforms'](_0x1f1c56,_0x49b0b6);_0x15f90f['supportsUn'+'iformBuffe'+'rs']&&this['setupViewU'+'niformBuff'+'ers'](_0x221e3e,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x2b69cb);const _0x57b88f=_0x33ba13['clearColor']??!(0x9*-0x20f+-0x24b1+0x3739),_0x2fcdc4=_0x33ba13['clearDepth']??!(0x11ff+-0x13c3+-0x1c5*-0x1),_0x231bff=_0x33ba13['clearStenc'+'il']??!(0x42b*-0x7+0x7fd*0x2+0xd34);(_0x57b88f||_0x2fcdc4||_0x231bff)&&this['clear'](_0x1f1c56,_0x57b88f,_0x2fcdc4,_0x231bff);const _0x4b126b=!!(_0x1f1c56['_flipFaces']^(_0x49b0b6==null?void(-0x9b2+-0x8d+0xa3f):_0x49b0b6['flipY'])),_0x500117=this['_forwardDr'+'awCalls'];this['renderForw'+'ard'](_0x1f1c56,_0x49b0b6,_0x7a546,_0xb00698,_0x4d918d,null,_0x2df075,_0x4b126b,_0x221e3e),_0x2df075&&(_0x2df075['_forwardDr'+'awCalls']+=this['_forwardDr'+'awCalls']-_0x500117);}['setFogCons'+'tants'](_0x1b379a){if(_0x1b379a['type']!==Hn){nr['linear'](_0x1b379a['color']);const _0x427f8e=this['fogColor'];_0x427f8e[0xb27+-0xc5*-0x23+-0x2616]=nr['r'],_0x427f8e[-0x7fc+-0xed2+-0x1*-0x16cf]=nr['g'],_0x427f8e[0x21db+0x185f+-0x9b4*0x6]=nr['b'],this['fogColorId']['setValue'](_0x427f8e),_0x1b379a['type']===YT?(this['fogStartId']['setValue'](_0x1b379a['start']),this['fogEndId']['setValue'](_0x1b379a['end'])):this['fogDensity'+'Id']['setValue'](_0x1b379a['density']);}}['setSceneCo'+'nstants'](){const _0x22298b=this['scene'];this['dispatchGl'+'obalLights'](_0x22298b);const _0x5d92e8=this['device'];this['_screenSiz'+'e'][-0x19*0xb5+-0x8+0x11b5*0x1]=_0x5d92e8['width'],this['_screenSiz'+'e'][0x8*0x264+-0x1f9a+0xf*0xd5]=_0x5d92e8['height'],this['_screenSiz'+'e'][-0x7c*0x32+-0x409*-0x7+-0x3*0x157]=(0x233a+0x209*-0xc+-0x229*0x5)/_0x5d92e8['width'],this['_screenSiz'+'e'][-0x229b+-0x16c9*0x1+-0xb7b*-0x5]=(0x1*0x5ba+0x39*0x72+-0x1f1b)/_0x5d92e8['height'],this['screenSize'+'Id']['setValue'](this['_screenSiz'+'e']),this['pcssDiskSa'+'mplesId']['setValue'](this['pcssDiskSa'+'mples']),this['pcssSphere'+'SamplesId']['setValue'](this['pcssSphere'+'Samples']);}['buildFrame'+'Graph'](_0x1f46ef,_0x31568d){const _0x2aad35=this['scene'];if(_0x1f46ef['reset'](),_0x2aad35['clusteredL'+'ightingEna'+'bled']){const {shadowsEnabled:_0x2dd0f6,cookiesEnabled:_0x492d14}=_0x2aad35['lighting'];this['_renderPas'+'sUpdateClu'+'stered']['update'](_0x1f46ef,_0x2dd0f6,_0x492d14,this['lights'],this['localLight'+'s']),_0x1f46ef['addRenderP'+'ass'](this['_renderPas'+'sUpdateClu'+'stered']);}else this['_shadowRen'+'dererLocal']['buildNonCl'+'usteredRen'+'derPasses'](_0x1f46ef,this['localLight'+'s']);let _0x3078d5=0x1*0xb9e+-0x22cf+0x1731,_0x220ccf=!(-0x1*-0x170e+0x268e+0x4*-0xf67),_0x181360=null;const _0x4e03c2=_0x31568d['_renderAct'+'ions'];for(let _0x275e1f=_0x3078d5;_0x275e1f<_0x4e03c2['length'];_0x275e1f++){const _0x344db0=_0x4e03c2[_0x275e1f],{layer:_0x8de736,camera:_0x241269}=_0x344db0;if(_0x344db0['useCameraP'+'asses'])w['call'](()=>{_0x241269['postEffect'+'s']['effects']['length']>0xc6d*-0x3+-0x1*0x1ba7+-0x2*-0x2077&&w['warnOnce']('Camera\x20\x27'+_0x241269['entity']['name']+('\x27\x20uses\x20ren'+'der\x20passes'+',\x20which\x20ar'+'e\x20not\x20comp'+'atible\x20wit'+'h\x20post-eff'+'ects\x20scrip'+'ts.\x20Render'+'ing\x20of\x20the'+'\x20post-effe'+'cts\x20is\x20ign'+'ored,\x20but\x20'+'they\x20shoul'+'d\x20not\x20be\x20a'+'ttached\x20to'+'\x20the\x20camer'+'a.'));}),_0x241269['camera']['renderPass'+'es']['forEach'](_0x3e943f=>{_0x1f46ef['addRenderP'+'ass'](_0x3e943f);});else{const _0x3a6045=_0x8de736['id']===ps,_0x1bef0c=_0x3a6045&&(_0x241269['renderScen'+'eColorMap']||_0x241269['renderScen'+'eDepthMap']);_0x220ccf&&(_0x220ccf=!(0x81*0x11+-0x13a*-0x10+-0x1c30),_0x3078d5=_0x275e1f,_0x181360=_0x344db0['renderTarg'+'et']);const _0x505bfd=_0x4e03c2[_0x275e1f+(0x6d3+-0x5*0x595+-0x1517*-0x1)],_0x1b81f3=(_0x505bfd?!_0x505bfd['useCameraP'+'asses']&&_0x505bfd['layer']['id']===ps:!(0x1a7+0x1d13+-0x1eb9))&&(_0x241269['renderScen'+'eColorMap']||_0x241269['renderScen'+'eDepthMap']),_0x23ac92=_0x505bfd?_0x505bfd['firstCamer'+'aUse']&&this['cameraDirS'+'hadowLight'+'s']['has'](_0x505bfd['camera']['camera']):!(0x1ef1*0x1+0x3ed*-0x1+-0x1b03);if(!_0x505bfd||_0x505bfd['renderTarg'+'et']!==_0x181360||_0x23ac92||_0x1b81f3||_0x1bef0c){if(_0x3a6045&&_0x3078d5===_0x275e1f||this['addMainRen'+'derPass'](_0x1f46ef,_0x31568d,_0x181360,_0x3078d5,_0x275e1f),_0x3a6045){if(_0x241269['renderScen'+'eColorMap']){const _0x6f763e=_0x241269['camera']['renderPass'+'ColorGrab'];_0x6f763e['source']=_0x241269['renderTarg'+'et'],_0x1f46ef['addRenderP'+'ass'](_0x6f763e);}_0x241269['renderScen'+'eDepthMap']&&_0x1f46ef['addRenderP'+'ass'](_0x241269['camera']['renderPass'+'DepthGrab']);}if(_0x344db0['triggerPos'+'tprocess']&&(_0x241269!=null&&_0x241269['onPostproc'+'essing'])){const _0x460320=new mb(this['device'],this,_0x344db0);_0x1f46ef['addRenderP'+'ass'](_0x460320);}_0x220ccf=!(-0x155f+0x5*-0x477+0x2bb2);}}}}['addMainRen'+'derPass'](_0x54f1f6,_0x5780f4,_0x1f879a,_0x57319c,_0x1df706){const _0x4b0988=new pb(this['device'],_0x5780f4,this['scene'],this);_0x4b0988['init'](_0x1f879a);const _0xb8c34a=_0x5780f4['_renderAct'+'ions'];for(let _0x325b66=_0x57319c;_0x325b66<=_0x1df706;_0x325b66++)_0x4b0988['addRenderA'+'ction'](_0xb8c34a[_0x325b66]);_0x54f1f6['addRenderP'+'ass'](_0x4b0988);}['update'](_0x361e00){this['frameUpdat'+'e'](),this['shadowRend'+'erer']['frameUpdat'+'e'](),this['scene']['_updateSky'+'Mesh'](),this['updateLaye'+'rCompositi'+'on'](_0x361e00),this['collectLig'+'hts'](_0x361e00),this['beginFrame'](_0x361e00),this['setSceneCo'+'nstants'](),this['cullCompos'+'ition'](_0x361e00),this['gpuUpdate'](this['processing'+'MeshInstan'+'ces']);}};h(Fi,'skipRender'+'Camera',null),h(Fi,'_skipRende'+'rCounter',-0x1d92+0xb4e+0x14e*0xe),h(Fi,'skipRender'+'After',-0x8*-0x30a+-0x1f2*-0x9+-0x29d2);let Jo=Fi,Wd=-0xb1*-0x1+-0x1*-0x2433+0x3*-0xc4c;const so=[],Kl=new Set();function yb(_0x372fde,_0xd5fa12){return _0x372fde['drawOrder']-_0xd5fa12['drawOrder'];}function vb(_0x74d408,_0x24a682){const _0x110e36=_0x74d408['_sortKeyFo'+'rward'],_0x41ffd9=_0x24a682['_sortKeyFo'+'rward'];return _0x110e36===_0x41ffd9?_0x24a682['mesh']['id']-_0x74d408['mesh']['id']:_0x41ffd9-_0x110e36;}function xb(_0x569486,_0x10ce18){return _0x10ce18['_sortKeyDy'+'namic']-_0x569486['_sortKeyDy'+'namic'];}function Tb(_0x11304b,_0x525a87){return _0x11304b['_sortKeyDy'+'namic']-_0x525a87['_sortKeyDy'+'namic'];}const wb=[null,yb,vb,xb,Tb];class Eb{constructor(){h(this,'opaque',[]),h(this,'transparen'+'t',[]);}}class Ot{constructor(_0x308c26={}){h(this,'meshInstan'+'ces',[]),h(this,'meshInstan'+'cesSet',new Set()),h(this,'shadowCast'+'ers',[]),h(this,'shadowCast'+'ersSet',new Set()),h(this,'_visibleIn'+'stances',new WeakMap()),h(this,'_lights',[]),h(this,'_lightsSet',new Set()),h(this,'_clustered'+'LightsSet',new Set()),h(this,'_splitLigh'+'ts',[[],[],[]]),h(this,'_splitLigh'+'tsDirty',!(-0x95*0x2f+0x1*0x13aa+0x7b1)),h(this,'requiresLi'+'ghtCube',!(0x1*0x1925+0x1be0+-0x3504)),h(this,'cameras',[]),h(this,'camerasSet',new Set()),h(this,'_dirtyComp'+'osition',!(0x14fd+0x1b6*-0x9+-0x1*0x596)),(_0x308c26['id']!==void(-0x17f5+0x989*0x1+0xe6c)?(this['id']=_0x308c26['id'],Wd=Math['max'](this['id']+(-0x414*-0x1+0x236a+-0x277d),Wd)):this['id']=Wd++,this['name']=_0x308c26['name'],this['_enabled']=_0x308c26['enabled']??!(-0x1*0x7c1+0xe*0x12+-0x6c5*-0x1),this['_refCounte'+'r']=this['_enabled']?0x5*-0x32b+0x1*-0x145c+-0x2434*-0x1:0x1*-0x827+-0x2*0x115f+-0x4f*-0x8b,this['opaqueSort'+'Mode']=_0x308c26['opaqueSort'+'Mode']??uw,this['transparen'+'tSortMode']=_0x308c26['transparen'+'tSortMode']??zm,_0x308c26['renderTarg'+'et']&&(this['renderTarg'+'et']=_0x308c26['renderTarg'+'et']),this['_clearColo'+'rBuffer']=!!_0x308c26['clearColor'+'Buffer'],this['_clearDept'+'hBuffer']=!!_0x308c26['clearDepth'+'Buffer'],this['_clearSten'+'cilBuffer']=!!_0x308c26['clearStenc'+'ilBuffer'],this['onEnable']=_0x308c26['onEnable'],this['onDisable']=_0x308c26['onDisable'],this['_enabled']&&this['onEnable']&&this['onEnable'](),this['customSort'+'Callback']=null,this['customCalc'+'ulateSortV'+'alues']=null,this['_lightHash']=0x7*-0x56f+0x6*-0xd4+-0x1*-0x2b01,this['_lightHash'+'Dirty']=!(-0x3*-0x246+-0x139*0x9+0x10c*0x4),this['_lightIdHa'+'sh']=-0x18a7+-0x1841+-0x272*-0x14,this['_lightIdHa'+'shDirty']=!(-0x1bf9+-0xabb+-0x26b5*-0x1),this['skipRender'+'After']=Number['MAX_VALUE'],this['_skipRende'+'rCounter']=-0x1303+-0x1a52+-0xd3*-0x37,this['_renderTim'+'e']=0x14db+-0x9+-0x14d2,this['_forwardDr'+'awCalls']=0x141c+0x1109+-0x2525,this['_shadowDra'+'wCalls']=0x1*-0xb9b+-0x1*-0x25f5+0x1a5a*-0x1,this['_shaderVer'+'sion']=-(0x1b30+-0x6b6+-0x1479));}set['enabled'](_0x386c79){_0x386c79!==this['_enabled']&&(this['_dirtyComp'+'osition']=!(0x2279+0x5c5*0x4+-0x132f*0x3),this['_enabled']=_0x386c79,_0x386c79?(this['incrementC'+'ounter'](),this['onEnable']&&this['onEnable']()):(this['decrementC'+'ounter'](),this['onDisable']&&this['onDisable']()));}get['enabled'](){return this['_enabled'];}set['clearColor'+'Buffer'](_0x1b8755){this['_clearColo'+'rBuffer']=_0x1b8755,this['_dirtyComp'+'osition']=!(-0xb07+-0xedc+0x19e3);}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'+'Buffer'](_0x241179){this['_clearDept'+'hBuffer']=_0x241179,this['_dirtyComp'+'osition']=!(-0x744+-0xd2c+0x1470);}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'ilBuffer'](_0x4e390e){this['_clearSten'+'cilBuffer']=_0x4e390e,this['_dirtyComp'+'osition']=!(0xa7e*0x1+-0x9d6*-0x1+-0x1454);}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}get['hasCluster'+'edLights'](){return this['_clustered'+'LightsSet']['size']>-0x4*0x88b+0xac1+0x176b;}get['clusteredL'+'ightsSet'](){return this['_clustered'+'LightsSet'];}['incrementC'+'ounter'](){this['_refCounte'+'r']===-0x1b00+0x231d+-0x81d&&(this['_enabled']=!(0x1*0x1717+-0x75d+0x7dd*-0x2),this['onEnable']&&this['onEnable']()),this['_refCounte'+'r']++;}['decrementC'+'ounter'](){if(this['_refCounte'+'r']===0x2d7*0x8+-0xb72*0x1+-0xb45)this['_enabled']=!(-0x16d3+0x1aa*-0x2+0x36*0x7c),this['onDisable']&&this['onDisable']();else{if(this['_refCounte'+'r']===0x21dd+-0x9*-0x43+-0x2438){w['warn']('Trying\x20to\x20'+'decrement\x20'+'layer\x20coun'+'ter\x20below\x20'+'0');return;}}this['_refCounte'+'r']--;}['addMeshIns'+'tances'](_0x3b8193,_0x36c926){const _0x4fbf4d=this['meshInstan'+'ces'],_0x9f58bd=this['meshInstan'+'cesSet'];for(let _0x55a6a8=0x1*0x84d+0x982*0x4+-0x2e55;_0x55a6a8<_0x3b8193['length'];_0x55a6a8++){const _0x16b084=_0x3b8193[_0x55a6a8];_0x9f58bd['has'](_0x16b084)||(_0x4fbf4d['push'](_0x16b084),_0x9f58bd['add'](_0x16b084),Kl['add'](_0x16b084['material']));}if(_0x36c926||this['addShadowC'+'asters'](_0x3b8193),Kl['size']>-0x1276+0x3*-0x8a2+0x2c5c*0x1){const _0x3fa634=this['_shaderVer'+'sion'];Kl['forEach'](_0x4a45bb=>{_0x3fa634>=-0x114a*0x1+0x1820+-0xe*0x7d&&_0x4a45bb['_shaderVer'+'sion']!==_0x3fa634&&(_0x4a45bb['getShaderV'+'ariant']!==er['prototype']['getShaderV'+'ariant']&&_0x4a45bb['clearVaria'+'nts'](),_0x4a45bb['_shaderVer'+'sion']=_0x3fa634);}),Kl['clear']();}}['removeMesh'+'Instances'](_0x1d09a4,_0x598b40){const _0x142ff0=this['meshInstan'+'ces'],_0x57063a=this['meshInstan'+'cesSet'];for(let _0x350008=-0x2*-0x2d+-0xc7*-0x1b+0x3*-0x71d;_0x350008<_0x1d09a4['length'];_0x350008++){const _0x4119bb=_0x1d09a4[_0x350008];if(_0x57063a['has'](_0x4119bb)){_0x57063a['delete'](_0x4119bb);const _0x3040f9=_0x142ff0['indexOf'](_0x4119bb);_0x3040f9>=0x156a+-0x949+-0x17*0x87&&_0x142ff0['splice'](_0x3040f9,0x1dd7+0x115*-0x1+-0x1*0x1cc1);}}_0x598b40||this['removeShad'+'owCasters'](_0x1d09a4);}['addShadowC'+'asters'](_0x42cb72){const _0x123ee1=this['shadowCast'+'ers'],_0x380e62=this['shadowCast'+'ersSet'];for(let _0x4f4708=-0x2*-0x95f+0x33b*-0x5+-0x33*0xd;_0x4f4708<_0x42cb72['length'];_0x4f4708++){const _0x2bb3f1=_0x42cb72[_0x4f4708];_0x2bb3f1['castShadow']&&!_0x380e62['has'](_0x2bb3f1)&&(_0x380e62['add'](_0x2bb3f1),_0x123ee1['push'](_0x2bb3f1));}}['removeShad'+'owCasters'](_0x9f8d10){const _0x48b08a=this['shadowCast'+'ers'],_0x46f0b7=this['shadowCast'+'ersSet'];for(let _0x3269d2=0x255a+-0x241a+-0x140;_0x3269d2<_0x9f8d10['length'];_0x3269d2++){const _0x32915f=_0x9f8d10[_0x3269d2];if(_0x46f0b7['has'](_0x32915f)){_0x46f0b7['delete'](_0x32915f);const _0x416a5d=_0x48b08a['indexOf'](_0x32915f);_0x416a5d>=0x12d+-0x3ce+0x1*0x2a1&&_0x48b08a['splice'](_0x416a5d,0x1d04+-0x8*-0x1a0+-0x2a03);}}}['clearMeshI'+'nstances'](_0x1dab90=!(0xb8e*-0x1+-0x2009+-0xf8*-0x2d)){this['meshInstan'+'ces']['length']=-0x1575+-0x527+0x1a9c,this['meshInstan'+'cesSet']['clear'](),_0x1dab90||(this['shadowCast'+'ers']['length']=0x1ace+-0x4b1*-0x1+-0x1f7f,this['shadowCast'+'ersSet']['clear']());}['markLights'+'Dirty'](){this['_lightHash'+'Dirty']=!(-0x1169*0x1+0x802+0x967),this['_lightIdHa'+'shDirty']=!(-0x6a0+-0x2142+0x27e2),this['_splitLigh'+'tsDirty']=!(-0x335*-0x1+0x1914+-0xd*0x22d);}['hasLight'](_0x594e3d){return this['_lightsSet']['has'](_0x594e3d);}['addLight'](_0x50aa19){const _0xe76164=_0x50aa19['light'];this['_lightsSet']['has'](_0xe76164)||(this['_lightsSet']['add'](_0xe76164),this['_lights']['push'](_0xe76164),this['markLights'+'Dirty']()),_0xe76164['type']!==ve&&this['_clustered'+'LightsSet']['add'](_0xe76164);}['removeLigh'+'t'](_0x746bea){const _0x2d33da=_0x746bea['light'];this['_lightsSet']['has'](_0x2d33da)&&(this['_lightsSet']['delete'](_0x2d33da),this['_lights']['splice'](this['_lights']['indexOf'](_0x2d33da),-0x1*0x2135+0x1*0x9dc+0xbad*0x2),this['markLights'+'Dirty']()),_0x2d33da['type']!==ve&&this['_clustered'+'LightsSet']['delete'](_0x2d33da);}['clearLight'+'s'](){this['_lightsSet']['forEach'](_0x382648=>_0x382648['removeLaye'+'r'](this)),this['_lightsSet']['clear'](),this['_clustered'+'LightsSet']['clear'](),this['_lights']['length']=0xe4e+-0xe9*-0x1f+-0x2a85,this['markLights'+'Dirty']();}get['splitLight'+'s'](){if(this['_splitLigh'+'tsDirty']){this['_splitLigh'+'tsDirty']=!(-0x47f+-0x38b*0x2+-0x5cb*-0x2);const _0x1ce8cb=this['_splitLigh'+'ts'];for(let _0x3fc135=0x17d3+0xb86+-0x2359;_0x3fc135<_0x1ce8cb['length'];_0x3fc135++)_0x1ce8cb[_0x3fc135]['length']=-0x7*-0x223+0x7*-0x409+-0x12*-0xbd;const _0x5c7001=this['_lights'];for(let _0x22a786=-0x1df8+-0x1*0x143+-0x27*-0xcd;_0x22a786<_0x5c7001['length'];_0x22a786++){const _0x598a8c=_0x5c7001[_0x22a786];_0x598a8c['enabled']&&_0x1ce8cb[_0x598a8c['_type']]['push'](_0x598a8c);}for(let _0x6d3218=-0x857+0xf2a+-0x6d3;_0x6d3218<_0x1ce8cb['length'];_0x6d3218++)_0x1ce8cb[_0x6d3218]['sort']((_0x58a3ef,_0x4a48de)=>_0x58a3ef['key']-_0x4a48de['key']);}return this['_splitLigh'+'ts'];}['evaluateLi'+'ghtHash'](_0x19e30e,_0x3d7fb1,_0x3e3af4){let _0x1f5b21=-0xc82*0x1+0x125a+0x5d8*-0x1;const _0x422807=this['_lights'];for(let _0x5aba3b=-0x1095+-0x85*0xf+0x1860;_0x5aba3b<_0x422807['length'];_0x5aba3b++){const _0x3dfc02=_0x422807[_0x5aba3b]['type']!==ve;(_0x19e30e&&_0x3dfc02||_0x3d7fb1&&!_0x3dfc02)&&so['push'](_0x3e3af4?_0x422807[_0x5aba3b]['id']:_0x422807[_0x5aba3b]['key']);}return so['length']>0x2f*0xc9+-0x251e+0x37&&(so['sort'](),_0x1f5b21=iy(so),so['length']=0x49*-0x6+-0x14db+0x1691),_0x1f5b21;}['getLightHa'+'sh'](_0x3bfc74){return this['_lightHash'+'Dirty']&&(this['_lightHash'+'Dirty']=!(-0x1bfe+-0x1fae+0x1*0x3bad),this['_lightHash']=this['evaluateLi'+'ghtHash'](!_0x3bfc74,!(0xdf1+0x2679+-0x346a),!(-0x63*-0x31+-0x14ad+-0x1bb*-0x1))),this['_lightHash'];}['getLightId'+'Hash'](){return this['_lightIdHa'+'shDirty']&&(this['_lightIdHa'+'shDirty']=!(-0x49*-0x1d+0x2f1+-0xb35),this['_lightIdHa'+'sh']=this['evaluateLi'+'ghtHash'](!(0x19*-0x116+0xcb5+0xe71),!(0x8e9+-0x8*-0x30c+-0x429*0x8),!(-0x54+0x1*-0x1cab+0xd*0x23b))),this['_lightIdHa'+'sh'];}['addCamera'](_0xa9e95){this['camerasSet']['has'](_0xa9e95['camera'])||(this['camerasSet']['add'](_0xa9e95['camera']),this['cameras']['push'](_0xa9e95),this['_dirtyComp'+'osition']=!(-0x923*0x3+-0x1a*0x8c+0x29a1*0x1));}['removeCame'+'ra'](_0x4b5c46){if(this['camerasSet']['has'](_0x4b5c46['camera'])){this['camerasSet']['delete'](_0x4b5c46['camera']);const _0x55bea0=this['cameras']['indexOf'](_0x4b5c46);this['cameras']['splice'](_0x55bea0,0x829+-0xba2*0x1+0x37a),this['_dirtyComp'+'osition']=!(0xa*-0x4d+0x28a*0x4+-0x726);}}['clearCamer'+'as'](){this['cameras']['length']=-0x20de+-0x2022+0x4100,this['camerasSet']['clear'](),this['_dirtyComp'+'osition']=!(0x119a*-0x1+0x201+-0x3*-0x533);}['_calculate'+'SortDistan'+'ces'](_0x2889f8,_0x22dda9,_0x1f6008){const _0x27ea55=_0x2889f8['length'],{x:_0x4743af,y:_0x1cd56f,z:_0x51b1d0}=_0x22dda9,{x:_0x20084b,y:_0x11680a,z:_0x5c6cc1}=_0x1f6008;for(let _0x1d1806=0x232+0x1759+0x1*-0x198b;_0x1d1806<_0x27ea55;_0x1d1806++){const _0x2214a0=_0x2889f8[_0x1d1806];let _0x1b663c;if(_0x2214a0['calculateS'+'ortDistanc'+'e'])_0x1b663c=_0x2214a0['calculateS'+'ortDistanc'+'e'](_0x2214a0,_0x22dda9,_0x1f6008);else{const _0x1a4568=_0x2214a0['aabb']['center'];_0x1b663c=(_0x1a4568['x']-_0x4743af)*_0x20084b+(_0x1a4568['y']-_0x1cd56f)*_0x11680a+(_0x1a4568['z']-_0x51b1d0)*_0x5c6cc1;}const _0x1a018e=_0x2214a0['_drawBucke'+'t']*(0x1e5c7f20+-0x3e6be3b*-0x10+-0x212d98d0);_0x2214a0['_sortKeyDy'+'namic']=_0x1a018e+_0x1b663c;}}['getCulledI'+'nstances'](_0x3f8519){let _0xdff584=this['_visibleIn'+'stances']['get'](_0x3f8519);return _0xdff584||(_0xdff584=new Eb(),this['_visibleIn'+'stances']['set'](_0x3f8519,_0xdff584)),_0xdff584;}['sortVisibl'+'e'](_0xd36d88,_0x13f2d7){const _0x20a102=_0x13f2d7?this['transparen'+'tSortMode']:this['opaqueSort'+'Mode'];if(_0x20a102===Cc)return;const _0x2c98fb=this['getCulledI'+'nstances'](_0xd36d88),_0x5f4748=_0x13f2d7?_0x2c98fb['transparen'+'t']:_0x2c98fb['opaque'],_0x124811=_0xd36d88['node'];if(_0x20a102===mw){const _0x144b6c=_0x124811['getPositio'+'n'](),_0x557b08=_0x124811['forward'];this['customCalc'+'ulateSortV'+'alues']&&this['customCalc'+'ulateSortV'+'alues'](_0x5f4748,_0x5f4748['length'],_0x144b6c,_0x557b08),this['customSort'+'Callback']&&_0x5f4748['sort'](this['customSort'+'Callback']);}else{if(_0x20a102===zm||_0x20a102===pw){const _0xf0b214=_0x124811['getPositio'+'n'](),_0x56fe4d=_0x124811['forward'];this['_calculate'+'SortDistan'+'ces'](_0x5f4748,_0xf0b214,_0x56fe4d);}_0x5f4748['sort'](wb[_0x20a102]);}}}const bb=(_0x318b2e,_0x50820e)=>_0x318b2e['priority']-_0x50820e['priority'],el=_0x4736c9=>_0x4736c9['sort'](bb);class Bf extends me{constructor(_0x4e87cf='Untitled'){super(),h(this,'layerList',[]),h(this,'layerIdMap',new Map()),h(this,'layerNameM'+'ap',new Map()),h(this,'layerOpaqu'+'eIndexMap',new Map()),h(this,'layerTrans'+'parentInde'+'xMap',new Map()),h(this,'subLayerLi'+'st',[]),h(this,'subLayerEn'+'abled',[]),h(this,'cameras',[]),h(this,'_renderAct'+'ions',[]),h(this,'_dirty',!(-0x74*0x35+0x9b3+-0x5e*-0x27)),(this['name']=_0x4e87cf,this['_opaqueOrd'+'er']={},this['_transpare'+'ntOrder']={});}['destroy'](){this['destroyRen'+'derActions']();}['destroyRen'+'derActions'](){this['_renderAct'+'ions']['forEach'](_0x410396=>_0x410396['destroy']()),this['_renderAct'+'ions']['length']=-0x355*-0x7+-0x52d*-0x5+-0x86*0x5e;}['markDirty'](){this['_dirty']=!(0x1*0xf9f+0x25db+-0x357a*0x1);}['_update'](){const _0xf531ab=this['layerList']['length'];if(!this['_dirty']){for(let _0x5702af=0x7af+0x19b4+0xb*-0x309;_0x5702af<_0xf531ab;_0x5702af++)if(this['layerList'][_0x5702af]['_dirtyComp'+'osition']){this['_dirty']=!(0x267e+-0x5b*0x6b+-0x1*0x75);break;}}if(this['_dirty']){this['_dirty']=!(-0x14b2+0x18c3+0x34*-0x14),this['cameras']['length']=0xbb3+0x4b0+-0x1063;for(let _0xbd3bb5=0x5*0x743+-0x2*-0x871+-0x3531;_0xbd3bb5<_0xf531ab;_0xbd3bb5++){const _0x4b5c53=this['layerList'][_0xbd3bb5];_0x4b5c53['_dirtyComp'+'osition']=!(0x1*-0x4ad+0x9f5+-0x547*0x1);for(let _0x4875bd=-0x1abc+0xdd7*-0x1+0xd*0x31f;_0x4875bd<_0x4b5c53['cameras']['length'];_0x4875bd++){const _0x18f65e=_0x4b5c53['cameras'][_0x4875bd];this['cameras']['indexOf'](_0x18f65e)<-0x2074+0xff9+0x1*0x107b&&this['cameras']['push'](_0x18f65e);}}this['cameras']['length']>-0x923+-0x26b3+-0x14b*-0x25&&el(this['cameras']);let _0x18edac=0xbdf+-0xd31+0x152;this['destroyRen'+'derActions']();for(let _0x539ca6=-0x8e*0x17+0x234c+-0x168a;_0x539ca6<this['cameras']['length'];_0x539ca6++){const _0x35582c=this['cameras'][_0x539ca6];if(_0x35582c['camera']['renderPass'+'es']['length']>-0x1bb9+0xf8f+-0x1*-0xc2a){this['addDummyRe'+'nderAction'](_0x18edac,_0x35582c),_0x18edac++;continue;}let _0x3289ae=!(0x15f2+-0x1*0x101b+-0x41*0x17);const _0x276554=_0x18edac;let _0x3c6c89=null,_0x43b93e=!(-0x38*0x45+-0x1f83+0x2e9c);for(let _0xb5ae7b=0x1ff0+0x1a2+-0x2192*0x1;_0xb5ae7b<_0xf531ab;_0xb5ae7b++){const _0x15384d=this['layerList'][_0xb5ae7b];if(_0x15384d['enabled']&&this['subLayerEn'+'abled'][_0xb5ae7b]&&_0x15384d['cameras']['length']>-0x316*-0x5+0x1223*-0x1+0x2b5&&_0x35582c['layers']['indexOf'](_0x15384d['id'])>=0xbb*0x9+-0x4*-0x229+-0xf37){!_0x43b93e&&_0x15384d['id']===_0x35582c['disablePos'+'tEffectsLa'+'yer']&&(_0x43b93e=!(-0x1c76+-0xd35+0x29ab*0x1),_0x3c6c89&&(_0x3c6c89['triggerPos'+'tprocess']=!(-0x4*0x433+-0x3cc*-0x4+0x19c)));const _0x5390b9=this['subLayerLi'+'st'][_0xb5ae7b];_0x3c6c89=this['addRenderA'+'ction'](_0x18edac,_0x15384d,_0x5390b9,_0x35582c,_0x3289ae,_0x43b93e),_0x18edac++,_0x3289ae=!(-0x73f+0xa*-0x1fb+0x1b0e);}}_0x276554<_0x18edac&&(_0x3c6c89['lastCamera'+'Use']=!(-0x6d*0x25+0x2*-0x103c+0x1*0x3039)),!_0x43b93e&&_0x3c6c89&&(_0x3c6c89['triggerPos'+'tprocess']=!(-0x127*-0x1a+0x1b71+0x3967*-0x1)),_0x35582c['renderTarg'+'et']&&_0x35582c['postEffect'+'sEnabled']&&this['propagateR'+'enderTarge'+'t'](_0x276554-(0x2*-0x4a3+-0x226a*-0x1+-0x1923),_0x35582c);}this['_logRender'+'Actions']();}}['getNextRen'+'derAction'](_0x167448){w['assert'](this['_renderAct'+'ions']['length']===_0x167448);const _0x1530a4=new Xy();return this['_renderAct'+'ions']['push'](_0x1530a4),_0x1530a4;}['addDummyRe'+'nderAction'](_0x3680e1,_0x501f33){const _0x1378d8=this['getNextRen'+'derAction'](_0x3680e1);_0x1378d8['camera']=_0x501f33,_0x1378d8['useCameraP'+'asses']=!(0x135*0x1b+-0x1f4f+-0x52*0x4);}['addRenderA'+'ction'](_0x21dad7,_0x2aa3fa,_0x29e47e,_0x4a0c45,_0xb3e24d,_0x2c2297){let _0x5e3b99=_0x2aa3fa['id']!==ps?_0x4a0c45['renderTarg'+'et']:null,_0x17c348=!(0x127+0xfbe+-0x10e4);const _0x545922=this['_renderAct'+'ions'];for(let _0x32d00d=_0x21dad7-(-0x18*-0x51+-0x19e6+0x124f);_0x32d00d>=-0x121f+0x24c0+-0x12a1*0x1;_0x32d00d--)if(_0x545922[_0x32d00d]['camera']===_0x4a0c45&&_0x545922[_0x32d00d]['renderTarg'+'et']===_0x5e3b99){_0x17c348=!(-0x608*-0x4+0xc8*0x2+-0x19b0);break;}_0x2c2297&&_0x4a0c45['postEffect'+'sEnabled']&&(_0x5e3b99=null);const _0x565000=this['getNextRen'+'derAction'](_0x21dad7);_0x565000['triggerPos'+'tprocess']=!(0x59b+-0x25e4+-0x204a*-0x1),_0x565000['layer']=_0x2aa3fa,_0x565000['transparen'+'t']=_0x29e47e,_0x565000['camera']=_0x4a0c45,_0x565000['renderTarg'+'et']=_0x5e3b99,_0x565000['firstCamer'+'aUse']=_0xb3e24d,_0x565000['lastCamera'+'Use']=!(-0x4*-0x3fd+-0x1ca3*-0x1+-0x2c96);const _0x1c2f0e=_0xb3e24d||!_0x17c348,_0x34eb45=_0x2aa3fa['clearColor'+'Buffer']||_0x2aa3fa['clearDepth'+'Buffer']||_0x2aa3fa['clearStenc'+'ilBuffer'];return(_0x1c2f0e||_0x34eb45)&&_0x565000['setupClear'+'s'](_0x1c2f0e?_0x4a0c45:void(-0x1*0x1e9a+-0xcfa+-0x15ca*-0x2),_0x2aa3fa),_0x565000;}['propagateR'+'enderTarge'+'t'](_0x2359ed,_0x4212df){for(let _0x1533e4=_0x2359ed;_0x1533e4>=-0x1632+-0x1*-0xe45+0x7ed;_0x1533e4--){const _0x3ab302=this['_renderAct'+'ions'][_0x1533e4],_0x352b05=_0x3ab302['layer'];if(_0x3ab302['renderTarg'+'et']&&_0x352b05['id']!==ps)break;if(_0x352b05['id']===ps)continue;if(_0x3ab302['useCameraP'+'asses'])break;const _0x31edc2=_0x3ab302==null?void(-0x2*0x1241+0xe53+0x162f):_0x3ab302['camera']['camera'];if(_0x31edc2&&(!_0x4212df['camera']['rect']['equals'](_0x31edc2['rect'])||!_0x4212df['camera']['scissorRec'+'t']['equals'](_0x31edc2['scissorRec'+'t'])))break;_0x3ab302['renderTarg'+'et']=_0x4212df['renderTarg'+'et'];}}['_logRender'+'Actions'](){if(mi['get'](Pl)){w['trace'](Pl,'Render\x20Act'+'ions\x20for\x20c'+'omposition'+':\x20'+this['name']);for(let _0x449eae=-0x5e9*0x2+0x8c5*-0x4+-0x1773*-0x2;_0x449eae<this['_renderAct'+'ions']['length'];_0x449eae++){const _0x37d353=this['_renderAct'+'ions'][_0x449eae],_0x524349=_0x37d353['camera'];if(_0x37d353['useCameraP'+'asses'])w['trace'](Pl,_0x449eae+('CustomPass'+'es\x20Cam:\x20')+(_0x524349?_0x524349['entity']['name']:'-'));else{const _0x1b2680=_0x37d353['layer'],_0x4c1671=_0x1b2680['enabled']&&this['isEnabled'](_0x1b2680,_0x37d353['transparen'+'t']),_0x2c117b=(_0x37d353['clearColor']?'Color\x20':'.....\x20')+(_0x37d353['clearDepth']?'Depth\x20':'.....\x20')+(_0x37d353['clearStenc'+'il']?'Stencil':'.......');w['trace'](Pl,_0x449eae+('\x20Cam:\x20'+(_0x524349?_0x524349['entity']['name']:'-'))['padEnd'](0x2342+0x1*-0x2309+-0x23,'\x20')+('\x20Lay:\x20'+_0x1b2680['name'])['padEnd'](0x1*-0xba1+0x8d*-0x12+0x15a1,'\x20')+(_0x37d353['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x4c1671?'\x20ENABLED\x20':'\x20DISABLED')+('\x20RT:\x20'+(_0x37d353['renderTarg'+'et']?_0x37d353['renderTarg'+'et']['name']:'-'))['padEnd'](-0x4*-0x259+-0x1*0x24fd+0x1bb7,'\x20')+'\x20Clear:\x20'+_0x2c117b+(_0x37d353['firstCamer'+'aUse']?'\x20CAM-FIRST':'')+(_0x37d353['lastCamera'+'Use']?'\x20CAM-LAST':'')+(_0x37d353['triggerPos'+'tprocess']?'\x20POSTPROCE'+'SS':''));}}}}['_isLayerAd'+'ded'](_0x4edd89){const _0x26f33a=this['layerIdMap']['get'](_0x4edd89['id'])===_0x4edd89;return w['assert'](!_0x26f33a,'Layer\x20is\x20a'+'lready\x20add'+'ed:\x20'+_0x4edd89['name']),_0x26f33a;}['_isSublaye'+'rAdded'](_0x481ad6,_0x5a0950){return(_0x5a0950?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['get'](_0x481ad6)!==void(-0x4d*-0x1+0x244e+-0x249b)?(w['error']('Sublayer\x20'+_0x481ad6['name']+(',\x20transpar'+'ent:\x20')+_0x5a0950+('\x20is\x20alread'+'y\x20added.')),!(-0x229*0x11+0x189d*0x1+0xc1c)):!(-0x8*-0x1cd+-0x1*-0x14cc+0x2333*-0x1);}['push'](_0x869453){this['_isLayerAd'+'ded'](_0x869453)||(this['layerList']['push'](_0x869453),this['layerList']['push'](_0x869453),this['_opaqueOrd'+'er'][_0x869453['id']]=this['subLayerLi'+'st']['push'](!(-0x3fb+0x1c9d+-0x18a1))-(-0xa*-0x23d+0x2407+-0x38*0x10b),this['_transpare'+'ntOrder'][_0x869453['id']]=this['subLayerLi'+'st']['push'](!(-0x13e6+0x2477+-0x1*0x1091))-(-0x413+-0x6e*0x26+0x1468),this['subLayerEn'+'abled']['push'](!(-0xb9*0x24+0x2*0x54c+0x2f*0x54)),this['subLayerEn'+'abled']['push'](!(-0x1105+0x450+0xcb5)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1ec0+0x1b41+0xb3*0x5),this['fire']('add',_0x869453));}['insert'](_0x443593,_0x4f56f3){if(this['_isLayerAd'+'ded'](_0x443593))return;this['layerList']['splice'](_0x4f56f3,-0xc*-0x301+0x20c+-0x4*0x986,_0x443593,_0x443593),this['subLayerLi'+'st']['splice'](_0x4f56f3,0x3cb*-0x1+0xd51+-0x35*0x2e,!(-0xe93*-0x1+-0x205b+0x1d*0x9d),!(-0x2118*-0x1+0xef*-0x25+0x173));const _0xc0ef46=this['layerList']['length'];this['_updateOpa'+'queOrder'](_0x4f56f3,_0xc0ef46-(0xc34*-0x3+-0xd41+0x2*0x18ef)),this['_updateTra'+'nsparentOr'+'der'](_0x4f56f3,_0xc0ef46-(0xcf+0x15f2+-0x16c0)),this['subLayerEn'+'abled']['splice'](_0x4f56f3,0x156d*-0x1+-0x900+0x1e6d,!(-0x27*0x9b+0xa4d+-0x18*-0x8e),!(0x368+-0x2472+-0x1085*-0x2)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x58a+0x4ee+0x9c),this['fire']('add',_0x443593);}['remove'](_0x38e57d){let _0xd06e70=this['layerList']['indexOf'](_0x38e57d);for(delete this['_opaqueOrd'+'er'][_0xd06e70],delete this['_transpare'+'ntOrder'][_0xd06e70];_0xd06e70>=-0x278+0x1e55*0x1+-0x1*0x1bdd;)this['layerList']['splice'](_0xd06e70,-0x577*-0x6+0x1f4e+-0x4017),this['subLayerLi'+'st']['splice'](_0xd06e70,-0x1796+0x1d1c+-0x585),this['subLayerEn'+'abled']['splice'](_0xd06e70,-0x54+-0xd*0x259+0x1eda),_0xd06e70=this['layerList']['indexOf'](_0x38e57d),this['_dirty']=!(-0x8ad*0x2+-0xb66*0x3+0x338c),this['fire']('remove',_0x38e57d);const _0x40c81b=this['layerList']['length'];this['_updateOpa'+'queOrder'](0x219a+0x2*-0xcde+0x26*-0x35,_0x40c81b-(-0x34*0x25+-0xb*-0x30d+-0x1a0a)),this['_updateTra'+'nsparentOr'+'der'](0x128e+0x611*-0x2+0x66c*-0x1,_0x40c81b-(-0xc1*0xd+-0x1583+0x1f51)),this['_updateLay'+'erMaps']();}['pushOpaque'](_0x2a38c3){this['_isSublaye'+'rAdded'](_0x2a38c3,!(-0x1*0x113d+0x1*-0x20c8+0x3206))||(this['layerList']['push'](_0x2a38c3),this['_opaqueOrd'+'er'][_0x2a38c3['id']]=this['subLayerLi'+'st']['push'](!(0x157b+-0x12ba+-0x2c0))-(0x173+-0x1*0x1fd3+-0x1*-0x1e61),this['subLayerEn'+'abled']['push'](!(0x1e2*-0xc+0x1c40+-0x5a8)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x10d6+-0xa49*0x1+-0x2b*0x27),this['fire']('add',_0x2a38c3));}['insertOpaq'+'ue'](_0x546886,_0x3c7e6d){if(this['_isSublaye'+'rAdded'](_0x546886,!(-0x8f*-0x45+0x1*0x216f+0x47f9*-0x1)))return;this['layerList']['splice'](_0x3c7e6d,0xf*0x1eb+0x122c*-0x1+0xa99*-0x1,_0x546886),this['subLayerLi'+'st']['splice'](_0x3c7e6d,-0x25ea+0x301*0x1+-0x3e1*-0x9,!(0x1*-0x29+0x10f*0xd+-0xd99));const _0x41eb7a=this['subLayerLi'+'st']['length'];this['_updateOpa'+'queOrder'](_0x3c7e6d,_0x41eb7a-(0xe02+0x2271+-0x3072)),this['subLayerEn'+'abled']['splice'](_0x3c7e6d,0xfd*-0x5+-0x13c4+0x4f1*0x5,!(0x1e3c+0x10f3*0x1+-0x1*0x2f2f)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x1251+-0x1*-0xa09+-0x1c5a),this['fire']('add',_0x546886);}['removeOpaq'+'ue'](_0x108482){for(let _0x2181aa=0x8e1*-0x4+-0x45f*-0x6+0x94a,_0x5e2446=this['layerList']['length'];_0x2181aa<_0x5e2446;_0x2181aa++)if(this['layerList'][_0x2181aa]===_0x108482&&!this['subLayerLi'+'st'][_0x2181aa]){this['layerList']['splice'](_0x2181aa,-0x1083*0x1+-0x59d+0x1621),this['subLayerLi'+'st']['splice'](_0x2181aa,-0x255b+-0x15cb+0x3b27),_0x5e2446--,this['_updateOpa'+'queOrder'](_0x2181aa,_0x5e2446-(0x193e*-0x1+-0x1*-0x1997+-0x1*0x58)),this['subLayerEn'+'abled']['splice'](_0x2181aa,0x1be6+0xcd4+0x1*-0x28b9),this['_dirty']=!(0x8e*0x1b+0xfb*-0x3+-0x3*0x403),this['layerList']['indexOf'](_0x108482)<-0x4ad+-0x4ad*0x5+0x1c0e&&this['fire']('remove',_0x108482);break;}this['_updateLay'+'erMaps']();}['pushTransp'+'arent'](_0x206266){this['_isSublaye'+'rAdded'](_0x206266,!(0x5ea+0x2348+-0x2932))||(this['layerList']['push'](_0x206266),this['_transpare'+'ntOrder'][_0x206266['id']]=this['subLayerLi'+'st']['push'](!(-0x2*0x2d7+0x1f91+-0x19e3))-(-0xfaa+-0x2431+0x4*0xcf7),this['subLayerEn'+'abled']['push'](!(-0x192c+-0x116*-0xd+-0x5*-0x236)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0xeb*-0xc+0x2cf*0x5+-0x19*0x1f),this['fire']('add',_0x206266));}['insertTran'+'sparent'](_0x3607d1,_0x1707df){if(this['_isSublaye'+'rAdded'](_0x3607d1,!(-0x256+0x64f*-0x1+-0x8a5*-0x1)))return;this['layerList']['splice'](_0x1707df,0x408+-0x134a+0x516*0x3,_0x3607d1),this['subLayerLi'+'st']['splice'](_0x1707df,0x89*-0x1+0xe35*-0x1+-0x1*-0xebe,!(0x3d5*0x3+0x1630+-0x1*0x21af));const _0xc8895b=this['subLayerLi'+'st']['length'];this['_updateTra'+'nsparentOr'+'der'](_0x1707df,_0xc8895b-(0x10d6+-0x89*-0x29+-0x1363*0x2)),this['subLayerEn'+'abled']['splice'](_0x1707df,0x21e4+-0x10*0x50+0xe72*-0x2,!(-0x123e+0x13f6+-0x1b8)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x112a+-0xa*-0x1+-0x1134),this['fire']('add',_0x3607d1);}['removeTran'+'sparent'](_0x2181be){for(let _0x48a5ff=-0xff9+0x1a7f+-0xa86,_0x3a4dda=this['layerList']['length'];_0x48a5ff<_0x3a4dda;_0x48a5ff++)if(this['layerList'][_0x48a5ff]===_0x2181be&&this['subLayerLi'+'st'][_0x48a5ff]){this['layerList']['splice'](_0x48a5ff,-0x1ca*0x8+-0x2163*0x1+0x2fb4),this['subLayerLi'+'st']['splice'](_0x48a5ff,0x3*0xcdd+0x22c2+0x1*-0x4958),_0x3a4dda--,this['_updateTra'+'nsparentOr'+'der'](_0x48a5ff,_0x3a4dda-(-0x215b+-0x69d*0x3+-0x3533*-0x1)),this['subLayerEn'+'abled']['splice'](_0x48a5ff,0xc1d+0x20b+-0x1*0xe27),this['_dirty']=!(0x97*-0x13+-0x1*0xba+0xbef),this['layerList']['indexOf'](_0x2181be)<0x9e9+0x308+-0xcf1&&this['fire']('remove',_0x2181be);break;}this['_updateLay'+'erMaps']();}['getOpaqueI'+'ndex'](_0x12e953){return this['layerOpaqu'+'eIndexMap']['get'](_0x12e953)??-(0xde8+0x1621+-0x2408);}['getTranspa'+'rentIndex'](_0xebaf2){return this['layerTrans'+'parentInde'+'xMap']['get'](_0xebaf2)??-(0x61f*0x1+0x6a7*0x2+0x4*-0x4db);}['isEnabled'](_0x57858c,_0x423bb7){if(_0x57858c['enabled']){const _0x235005=_0x423bb7?this['getTranspa'+'rentIndex'](_0x57858c):this['getOpaqueI'+'ndex'](_0x57858c);if(_0x235005>=0x106*0x14+0x102*0x1+-0x1*0x157a)return this['subLayerEn'+'abled'][_0x235005];}return!(0x78e+-0x114*-0x21+-0x3d*0xb5);}['_updateLay'+'erMaps'](){this['layerIdMap']['clear'](),this['layerNameM'+'ap']['clear'](),this['layerOpaqu'+'eIndexMap']['clear'](),this['layerTrans'+'parentInde'+'xMap']['clear']();for(let _0x467fcf=0x25b0+0x17*-0x7f+-0x1a47;_0x467fcf<this['layerList']['length'];_0x467fcf++){const _0x4cd8d1=this['layerList'][_0x467fcf];this['layerIdMap']['set'](_0x4cd8d1['id'],_0x4cd8d1),this['layerNameM'+'ap']['set'](_0x4cd8d1['name'],_0x4cd8d1),(this['subLayerLi'+'st'][_0x467fcf]?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['set'](_0x4cd8d1,_0x467fcf);}}['getLayerBy'+'Id'](_0x576cbe){return this['layerIdMap']['get'](_0x576cbe)??null;}['getLayerBy'+'Name'](_0x4dd364){return this['layerNameM'+'ap']['get'](_0x4dd364)??null;}['_updateOpa'+'queOrder'](_0x4b7385,_0x5708dc){for(let _0x204f5c=_0x4b7385;_0x204f5c<=_0x5708dc;_0x204f5c++)this['subLayerLi'+'st'][_0x204f5c]===!(0x1f90+-0x1871+-0x71e)&&(this['_opaqueOrd'+'er'][this['layerList'][_0x204f5c]['id']]=_0x204f5c);}['_updateTra'+'nsparentOr'+'der'](_0x14b139,_0x5afc1b){for(let _0x53d337=_0x14b139;_0x53d337<=_0x5afc1b;_0x53d337++)this['subLayerLi'+'st'][_0x53d337]===!(-0x1d22+0x1242+-0x3*-0x3a0)&&(this['_transpare'+'ntOrder'][this['layerList'][_0x53d337]['id']]=_0x53d337);}['_sortLayer'+'sDescendin'+'g'](_0x539e94,_0x17d2c0,_0x3d5169){let _0x3ff2d3=-(0xc4f+0xfc5+-0x1c13),_0x19b41c=-(-0x1*0xa6c+0x36e+0x6ff);for(let _0x1b5869=0x241+0x14be+-0x16ff,_0x5d7aff=_0x539e94['length'];_0x1b5869<_0x5d7aff;_0x1b5869++){const _0x3cf22d=_0x539e94[_0x1b5869];_0x3d5169['hasOwnProp'+'erty'](_0x3cf22d)&&(_0x3ff2d3=Math['max'](_0x3ff2d3,_0x3d5169[_0x3cf22d]));}for(let _0x4e9278=0xea+0xe75*-0x1+-0xd8b*-0x1,_0x2dd39a=_0x17d2c0['length'];_0x4e9278<_0x2dd39a;_0x4e9278++){const _0x4ca071=_0x17d2c0[_0x4e9278];_0x3d5169['hasOwnProp'+'erty'](_0x4ca071)&&(_0x19b41c=Math['max'](_0x19b41c,_0x3d5169[_0x4ca071]));}return _0x3ff2d3===-(0x2ce+-0x2*-0xcac+-0x1*0x1c25)&&_0x19b41c!==-(0x1*-0x2146+-0x3e*-0x27+0x17d5)?0x90b+0x1*-0x1213+-0x3*-0x303:_0x19b41c===-(0x1*0x11ef+-0x1ffa*0x1+0xe0c)&&_0x3ff2d3!==-(0x1792+-0x6e4+-0x10ad)?-(0x1*-0x7af+-0x3*0x7bb+0x1ee1):_0x19b41c-_0x3ff2d3;}['sortTransp'+'arentLayer'+'s'](_0x38d61d,_0x455802){return this['_sortLayer'+'sDescendin'+'g'](_0x38d61d,_0x455802,this['_transpare'+'ntOrder']);}['sortOpaque'+'Layers'](_0x5d5b96,_0x4cffd8){return this['_sortLayer'+'sDescendin'+'g'](_0x5d5b96,_0x4cffd8,this['_opaqueOrd'+'er']);}}const Zl=new D(),wi={'bias':0x0,'normalBias':0x0},io=new ie(),$d={'r':0x0,'g':0x1,'b':0x2,'a':0x3},zf={'directional':ve,'omni':Ke,'point':Ke,'spot':Ze},Ab=[[new re(-0x156+-0x6f1+0x847,-0x40f*-0x9+-0xc20*0x2+0x1*-0xc47,-0x2529+0x5d*-0x15+0x2ccb,-0x1ee4+0x1*-0x11b+0x2000)],[new re(0x1598+0x1*-0x5bf+-0xfd9,-0x2451+0xb1*-0x35+0x48f6,-0xc6d*-0x2+0x17c4+0x184f*-0x2+0.5,-0x1729+0x1ddf*-0x1+-0x6a1*-0x8+0.5),new re(0x22c3*-0x1+0x1f8d+0x6*0x89,0x92*0x23+-0xa2*0x24+0x2d2+0.5,0x67*0x46+0x12*0x186+-0x1*0x3796+0.5,0x822+0x10d+0x92f*-0x1+0.5)],[new re(-0x1e7+0xbd8+-0x9f1,-0x17d3+-0x3d*-0x3c+0x987,-0x329*-0x1+0x24c6+-0x27ef+0.5,0x262b*0x1+0x2*0xb61+0x3ced*-0x1+0.5),new re(-0xd*0x1db+0x15a6+0x1*0x279,0x817+-0x1323+0xb0c+0.5,0x10fc+-0x2*-0x21a+-0x54c*0x4+0.5,0x242c+-0x2d*0xe+-0x2*0x10db+0.5),new re(-0x1308+0x4f*0x55+-0x13*0x61+0.5,0x2343+0xf*-0xd0+-0xb*0x219,0xc8*-0x2b+0xbc*0xb+0x1984+0.5,-0x1*0xbdd+-0x1161*0x2+0x2e9f+0.5)],[new re(-0x1fd2*0x1+0xd8d*0x1+0x3*0x617,0x1de3*0x1+0x1223+-0x12*0x2ab,0x5a6+0x9*-0x455+0x2157*0x1+0.5,-0xa66+0x2*-0x7e7+0x56*0x4e+0.5),new re(0x1*0xaf3+0x1c4e*-0x1+-0x1*-0x115b,-0x248*-0x8+0x59*-0x59+0x9*0x169+0.5,-0x111b+-0x3*0x9c2+0x2e61+0.5,0x1e0d+0x1421+0x85d*-0x6+0.5),new re(-0x459+-0x8*-0x31+0x2d1+0.5,-0x178e+-0x1*-0x1d07+-0x579,-0x6*0x15d+-0x602+0xe30+0.5,0x21*0xa7+0x1f62+-0x34e9+0.5),new re(-0x1*-0x108d+-0xd35+-0x8*0x6b+0.5,0x1*-0x387+0x1252+-0xecb+0.5,0x1bb4+0x3*-0x7b9+-0x1b*0x2b+0.5,0x1*-0x2221+-0x22f7+0x4518+0.5)]],Cb={'rrr':0x1,'ggg':0x2,'bbb':0x4,'aaa':0x8,'rgb':0x7};let Pb=-0x9b*-0x31+-0x1979*-0x1+-0x4*0xdc9;class Mb{constructor(_0x5e4833,_0x373fd1,_0x33116e){this['light']=_0x33116e,this['camera']=_0x5e4833,this['shadowCame'+'ra']=$y['createShad'+'owCamera'](_0x33116e['_shadowTyp'+'e'],_0x33116e['_type'],_0x373fd1),this['shadowMatr'+'ix']=new te(),this['shadowView'+'port']=new re(-0x13ea+-0x2667+0x3a51,0x25f1+-0x1ec8+-0x27*0x2f,-0x19b6+-0x1*-0x258b+0x2f5*-0x4,0x1066*0x2+-0x710+-0x3ad*0x7),this['shadowScis'+'sor']=new re(0x8bf*-0x3+-0x365+0x1da2,0xf0b+-0x33*0x2e+-0x23*0x2b,-0x94c+0x47*-0x6a+0x26b3,0x335+-0x1202+0xece),this['projection'+'Compensati'+'on']=-0x11d6+0x7f2+0x9e4*0x1,this['face']=_0x373fd1,this['visibleCas'+'ters']=[],this['viewBindGr'+'oups']=[];}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x173a40=>{_0x173a40['defaultUni'+'formBuffer']['destroy'](),_0x173a40['destroy']();}),this['viewBindGr'+'oups']['length']=0x9*-0x1bb+0x841+0x752;}get['shadowBuff'+'er'](){const _0x1161eb=this['shadowCame'+'ra']['renderTarg'+'et'];return _0x1161eb?this['light']['_isPcf']?_0x1161eb['depthBuffe'+'r']:_0x1161eb['colorBuffe'+'r']:null;}}class tl{constructor(_0x22a256,_0x21f2ab){h(this,'layers',new Set()),h(this,'clusteredL'+'ighting'),h(this,'shadowDept'+'hState',Yt['DEFAULT']['clone']()),h(this,'clusteredF'+'lags',0x1*-0xbbb+0x1753+-0xb98),h(this,'clusteredD'+'ata',new Uint32Array(0x7a*0x1f+-0x1*0x21ce+0x130b)),h(this,'clusteredD'+'ata16',new Uint16Array(this['clusteredD'+'ata']['buffer'])),h(this,'_evtDevice'+'Restored',null),(this['device']=_0x22a256,this['clusteredL'+'ighting']=_0x21f2ab,this['id']=Pb++,this['_evtDevice'+'Restored']=_0x22a256['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this),this['_type']=ve,this['_color']=new ie(-0x12cd*0x2+-0x1f23+-0x1*-0x44bd+0.8,0x19f5+0x1ff3+0x1*-0x39e8+0.8,0x31e*-0xc+0xf13*-0x2+-0x2*-0x21c7+0.8),this['_intensity']=-0x72f+-0x18dd+0x3*0xaaf,this['_affectSpe'+'cularity']=!(-0x1*-0x19e5+-0xad*0x38+0xbf3),this['_luminance']=-0x7a8*0x5+-0x1*-0xfca+0x167e,this['_castShado'+'ws']=!(-0xc5b+-0x1eb8+0xc*0x397),this['_enabled']=!(-0x21bf+-0x1*0x1643+0x3803),this['_mask']=Ss,this['isStatic']=!(-0x35c*-0x4+0xa3d+-0x17ac),this['key']=0x705*-0x3+-0x1*0xbfc+0x210b,this['bakeDir']=!(0x1f0c+-0xe6b+-0x10a1),this['bakeNumSam'+'ples']=0x1b*0x65+-0x1*-0x241a+0x160*-0x22,this['bakeArea']=0x1e57+0x18d7+-0x372e,this['attenuatio'+'nStart']=-0x1cde*0x1+-0xdb0+0x2a98,this['attenuatio'+'nEnd']=-0x2684+0x1162+0x152c,this['_falloffMo'+'de']=bp,this['_shadowTyp'+'e']=Ws,this['_vsmBlurSi'+'ze']=0x2328+0x1*0xedb+-0x31f8,this['vsmBlurMod'+'e']=Cp,this['vsmBias']=(0x58*0x4+-0x1332+0x11d2+0.01)*(-0x1cd2+-0x4*-0x923+0x2e*-0x2b+0.25),this['_cookie']=null,this['cookieInte'+'nsity']=0x15d+-0x2378+0x221c,this['_cookieFal'+'loff']=!(-0x985*-0x4+0x1*0x25b7+-0x1*0x4bcb),this['_cookieCha'+'nnel']='rgb',this['_cookieTra'+'nsform']=null,this['_cookieTra'+'nsformUnif'+'orm']=new Float32Array(-0x157c+0x13ef+0x191),this['_cookieOff'+'set']=null,this['_cookieOff'+'setUniform']=new Float32Array(-0x7*0x32e+-0xa12+0x2056),this['_cookieTra'+'nsformSet']=!(-0x1*0x1fd9+0xf3d+0x109d),this['_cookieOff'+'setSet']=!(-0x5ae+0x2654+-0x20a5),this['_innerCone'+'Angle']=0x196b+0x249a+0x1*-0x3ddd,this['_outerCone'+'Angle']=0xb0*0x5+-0x1397+-0x5f*-0x2c,this['cascades']=null,this['_shadowMat'+'rixPalette']=null,this['_shadowCas'+'cadeDistan'+'ces']=null,this['numCascade'+'s']=-0xa57+0x74e+-0x1*-0x30a,this['_cascadeBl'+'end']=-0x1cc1*0x1+0xf88+-0xd39*-0x1,this['cascadeDis'+'tribution']=0x1b07+-0x149f*0x1+-0x668+0.5,this['_shape']=js,this['_colorLine'+'ar']=new Float32Array(0x1065*-0x1+-0xbbd*0x1+0x1c25),this['_updateLin'+'earColor'](),this['_position']=new D(0x1*0x1297+0x82f*0x1+0x17*-0x12a,-0x1ec1+-0x2566+0x4427,-0xf9*0x1f+-0x9*-0x9d+-0x1*-0x18a2),this['_direction']=new D(0x1*-0x6d9+0x19b9+-0x12e*0x10,-0x5+-0x595+-0x59a*-0x1,0x1b61*0x1+-0x4c*0x3a+-0x363*0x3),this['_innerCone'+'AngleCos']=Math['cos'](this['_innerCone'+'Angle']*Math['PI']/(-0x1927+-0x3*0x2b+0x2*0xd2e)),this['_updateOut'+'erAngle'](this['_outerCone'+'Angle']),this['_usePhysic'+'alUnits']=void(-0x606*0x5+0xda+-0x751*-0x4),this['_shadowMap']=null,this['_shadowRen'+'derParams']=[],this['_shadowCam'+'eraParams']=[],this['shadowDist'+'ance']=-0x2650+0x22e4+0x4*0xe5,this['_shadowRes'+'olution']=0x2239+0x734*0x1+-0x256d*0x1,this['_shadowBia'+'s']=-(-0x2*-0x1041+-0x1075+0x24b*-0x7+0.0005),this['_shadowInt'+'ensity']=0x5bd+-0x53*-0x23+0x1115*-0x1,this['_normalOff'+'setBias']=0x1*0x19e1+0x1*0x1b2b+0x2*-0x1a86,this['shadowUpda'+'teMode']=Fp,this['shadowUpda'+'teOverride'+'s']=null,this['_isVsm']=!(-0x8b7*0x1+-0x5*-0x454+0x33b*-0x4),this['_isPcf']=!(0x1b5*0x1+-0x3*0xc0f+0x2278),this['_softShado'+'wParams']=new Float32Array(0x6d7*-0x5+0x19fc+0x83b),this['shadowSamp'+'les']=-0x1*-0x1499+0x1472*0x1+-0x3*0xda9,this['shadowBloc'+'kerSamples']=-0x3b*0x2d+-0x5*-0x54c+-0x100d,this['penumbraSi'+'ze']=0xaa4+0x4a*-0x4c+0x3*0x3c7,this['penumbraFa'+'lloff']=-0x1*0x1ae3+-0x1b7b+0x365f,this['_cookieMat'+'rix']=null,this['_atlasView'+'port']=null,this['atlasViewp'+'ortAllocat'+'ed']=!(0x2c2*-0xa+0x2*0xc7f+0x297),this['atlasVersi'+'on']=0x18df+0xc8e+0x256d*-0x1,this['atlasSlotI'+'ndex']=0x47c*0x5+-0x250c+-0x4e*-0x30,this['atlasSlotU'+'pdated']=!(-0x179c+0x1e3f+0x236*-0x3),this['_node']=null,this['_renderDat'+'a']=[],this['visibleThi'+'sFrame']=!(0x801*0x1+0x21b8+-0x29b8),this['maxScreenS'+'ize']=-0x7b*-0x25+0x2698+-0x385f,this['_updateSha'+'dowBias']());}['destroy'](){var _0x2eeae3;(_0x2eeae3=this['_evtDevice'+'Restored'])==null||_0x2eeae3['off'](),this['_evtDevice'+'Restored']=null,this['_destroySh'+'adowMap'](),this['releaseRen'+'derData'](),this['_renderDat'+'a']=null;}['onDeviceRe'+'stored'](){this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=gr);}['releaseRen'+'derData'](){if(this['_renderDat'+'a']){for(let _0xb3daaa=-0x25b7+0x4*0x1df+0x1e3b;_0xb3daaa<this['_renderDat'+'a']['length'];_0xb3daaa++)this['_renderDat'+'a'][_0xb3daaa]['destroy']();this['_renderDat'+'a']['length']=-0x1ed*-0x9+-0x13f*-0x17+-0x7*0x692;}}['addLayer'](_0x48015c){this['layers']['add'](_0x48015c);}['removeLaye'+'r'](_0x277dd4){this['layers']['delete'](_0x277dd4);}set['shadowSamp'+'les'](_0x3c348a){this['_softShado'+'wParams'][-0x1458+-0x8*0x183+0x4*0x81c]=_0x3c348a;}get['shadowSamp'+'les'](){return this['_softShado'+'wParams'][-0xa7+-0x1*-0xcd9+-0xc32];}set['shadowBloc'+'kerSamples'](_0x3172dc){this['_softShado'+'wParams'][-0x6ff*0x5+0xcf5*0x1+0x1607]=_0x3172dc;}get['shadowBloc'+'kerSamples'](){return this['_softShado'+'wParams'][-0x140f+-0x99f+0x1daf];}set['shadowBias'](_0x58e53c){this['_shadowBia'+'s']!==_0x58e53c&&(this['_shadowBia'+'s']=_0x58e53c,this['_updateSha'+'dowBias']());}get['shadowBias'](){return this['_shadowBia'+'s'];}set['numCascade'+'s'](_0x1ba1f8){(!this['cascades']||this['numCascade'+'s']!==_0x1ba1f8)&&(this['cascades']=Ab[_0x1ba1f8-(-0x1*-0x1b25+-0xba*0x19+-0x8fa)],this['_shadowMat'+'rixPalette']=new Float32Array(-0xbb1*-0x3+0x1e2a+-0x40fd),this['_shadowCas'+'cadeDistan'+'ces']=new Float32Array(-0x9*0x289+0x602*-0x1+0x1cd7),this['_destroySh'+'adowMap'](),this['updateKey']());}get['numCascade'+'s'](){return this['cascades']['length'];}set['cascadeBle'+'nd'](_0x5ea2f9){this['_cascadeBl'+'end']!==_0x5ea2f9&&(this['_cascadeBl'+'end']=_0x5ea2f9,this['updateKey']());}get['cascadeBle'+'nd'](){return this['_cascadeBl'+'end'];}set['shadowMap'](_0x1880e9){this['_shadowMap']!==_0x1880e9&&(this['_destroySh'+'adowMap'](),this['_shadowMap']=_0x1880e9);}get['shadowMap'](){return this['_shadowMap'];}set['mask'](_0x11cf09){this['_mask']!==_0x11cf09&&(this['_mask']=_0x11cf09,this['updateKey'](),this['updateClus'+'teredFlags']());}get['mask'](){return this['_mask'];}get['numShadowF'+'aces'](){const _0x18fbe9=this['_type'];return _0x18fbe9===ve?this['numCascade'+'s']:_0x18fbe9===Ke?-0x2614*-0x1+0x1b4c+-0x415a:-0x1695+0x160e+0x88;}set['type'](_0x4a38e8){if(this['_type']===_0x4a38e8)return;this['_type']=_0x4a38e8,this['_destroySh'+'adowMap'](),this['_updateSha'+'dowBias'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x2948f8=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowUpda'+'teOverride'+'s']=null,this['shadowType']=_0x2948f8;}get['type'](){return this['_type'];}set['shape'](_0x522ff8){if(this['_shape']===_0x522ff8)return;this['_shape']=_0x522ff8,this['_destroySh'+'adowMap'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x1a9cc3=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowType']=_0x1a9cc3;}get['shape'](){return this['_shape'];}set['usePhysica'+'lUnits'](_0x446c17){this['_usePhysic'+'alUnits']!==_0x446c17&&(this['_usePhysic'+'alUnits']=_0x446c17,this['_updateLin'+'earColor']());}get['usePhysica'+'lUnits'](){return this['_usePhysic'+'alUnits'];}set['shadowType'](_0x9786d6){if(this['_shadowTyp'+'e']===_0x9786d6)return;let _0x4eadae=Xi['get'](_0x9786d6);_0x4eadae||(_0x9786d6=Ws);const _0x59034c=this['device'];_0x9786d6===Xo&&!_0x59034c['textureFlo'+'atRenderab'+'le']&&!_0x59034c['textureHal'+'fFloatRend'+'erable']&&(_0x9786d6=Ws),this['_type']===Ke&&_0x9786d6!==yy&&_0x9786d6!==Ws&&_0x9786d6!==vy&&_0x9786d6!==xy&&_0x9786d6!==Xo&&(_0x9786d6=Ws),_0x9786d6===Ap&&(!_0x59034c['textureFlo'+'atRenderab'+'le']||!_0x59034c['textureFlo'+'atFilterab'+'le'])&&(_0x9786d6=Rf),_0x9786d6===Rf&&!_0x59034c['textureHal'+'fFloatRend'+'erable']&&(_0x9786d6=Ws),_0x4eadae=Xi['get'](_0x9786d6),this['_isVsm']=(_0x4eadae==null?void(-0x251*0xa+-0x2fd+-0x1*-0x1a27):_0x4eadae['vsm'])??!(-0x2*-0x115a+0x9d*0x22+-0x378d),this['_isPcf']=(_0x4eadae==null?void(0x61*-0x3b+0x2515+0x2f2*-0x5):_0x4eadae['pcf'])??!(-0x2000+0x762+0x189f),this['_shadowTyp'+'e']=_0x9786d6,this['_destroySh'+'adowMap'](),this['updateKey']();}get['shadowType'](){return this['_shadowTyp'+'e'];}set['enabled'](_0x1f2283){this['_enabled']!==_0x1f2283&&(this['_enabled']=_0x1f2283,this['layersDirt'+'y']());}get['enabled'](){return this['_enabled'];}set['castShadow'+'s'](_0x3ffb83){this['_castShado'+'ws']!==_0x3ffb83&&(this['_castShado'+'ws']=_0x3ffb83,this['_destroySh'+'adowMap'](),this['layersDirt'+'y'](),this['updateKey']());}get['castShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']!==fi&&this['_mask']!==0x2*0x306+0xcf*-0x5+-0x1b*0x13;}set['shadowInte'+'nsity'](_0x361d25){this['_shadowInt'+'ensity']!==_0x361d25&&(this['_shadowInt'+'ensity']=_0x361d25,this['updateKey']());}get['shadowInte'+'nsity'](){return this['_shadowInt'+'ensity'];}get['bakeShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']===fi;}set['shadowReso'+'lution'](_0x2eb7f5){this['_shadowRes'+'olution']!==_0x2eb7f5&&(this['_type']===Ke?_0x2eb7f5=Math['min'](_0x2eb7f5,this['device']['maxCubeMap'+'Size']):_0x2eb7f5=Math['min'](_0x2eb7f5,this['device']['maxTexture'+'Size']),this['_shadowRes'+'olution']=_0x2eb7f5,this['_destroySh'+'adowMap']());}get['shadowReso'+'lution'](){return this['_shadowRes'+'olution'];}set['vsmBlurSiz'+'e'](_0x3d402b){this['_vsmBlurSi'+'ze']!==_0x3d402b&&(_0x3d402b%(0x1d23+0x952*-0x1+-0x13cf)===-0x6d1*0x5+0x3e9+0x2*0xf16&&_0x3d402b++,this['_vsmBlurSi'+'ze']=_0x3d402b);}get['vsmBlurSiz'+'e'](){return this['_vsmBlurSi'+'ze'];}set['normalOffs'+'etBias'](_0x215499){if(this['_normalOff'+'setBias']!==_0x215499){const _0x19f008=!this['_normalOff'+'setBias']&&_0x215499||this['_normalOff'+'setBias']&&!_0x215499;this['_normalOff'+'setBias']=_0x215499,_0x19f008&&this['updateKey']();}}get['normalOffs'+'etBias'](){return this['_normalOff'+'setBias'];}set['falloffMod'+'e'](_0x1ca495){this['_falloffMo'+'de']!==_0x1ca495&&(this['_falloffMo'+'de']=_0x1ca495,this['updateKey'](),this['updateClus'+'teredFlags']());}get['falloffMod'+'e'](){return this['_falloffMo'+'de'];}set['innerConeA'+'ngle'](_0x1091a8){this['_innerCone'+'Angle']!==_0x1091a8&&(this['_innerCone'+'Angle']=_0x1091a8,this['_innerCone'+'AngleCos']=Math['cos'](_0x1091a8*Math['PI']/(-0x4a3*-0x3+0x1*0x6d+-0xda2)),this['updateClus'+'terData'](!(0x2bb+0x13*-0x1cd+0x1f7d),!(-0x284+0xedb+-0xc57)),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['innerConeA'+'ngle'](){return this['_innerCone'+'Angle'];}set['outerConeA'+'ngle'](_0x23142a){this['_outerCone'+'Angle']!==_0x23142a&&(this['_outerCone'+'Angle']=_0x23142a,this['_updateOut'+'erAngle'](_0x23142a),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['outerConeA'+'ngle'](){return this['_outerCone'+'Angle'];}set['penumbraSi'+'ze'](_0x490929){this['_penumbraS'+'ize']=_0x490929,this['_softShado'+'wParams'][-0x236+-0x13f+-0x1*-0x377]=_0x490929;}get['penumbraSi'+'ze'](){return this['_penumbraS'+'ize'];}set['penumbraFa'+'lloff'](_0x270601){this['_softShado'+'wParams'][-0x3b4+-0x31*0xb2+0x25c9]=_0x270601;}get['penumbraFa'+'lloff'](){return this['_softShado'+'wParams'][-0xfb*-0x1f+-0xcf4+-0x116e];}['_updateOut'+'erAngle'](_0x43df62){const _0x1d5cbb=_0x43df62*Math['PI']/(-0x2201+-0x1e3c+0x40f1);this['_outerCone'+'AngleCos']=Math['cos'](_0x1d5cbb),this['_outerCone'+'AngleSin']=Math['sin'](_0x1d5cbb),this['updateClus'+'terData'](!(0x142*0xc+0xfb0+-0x1ec7),!(-0x6b1*0x4+-0xd*0x24b+0x3893));}set['intensity'](_0x4c7b43){this['_intensity']!==_0x4c7b43&&(this['_intensity']=_0x4c7b43,this['_updateLin'+'earColor']());}get['intensity'](){return this['_intensity'];}set['affectSpec'+'ularity'](_0x5a1837){this['_type']===ve&&(this['_affectSpe'+'cularity']=_0x5a1837,this['updateKey']());}get['affectSpec'+'ularity'](){return this['_affectSpe'+'cularity'];}set['luminance'](_0x37dd7a){this['_luminance']!==_0x37dd7a&&(this['_luminance']=_0x37dd7a,this['_updateLin'+'earColor']());}get['luminance'](){return this['_luminance'];}get['cookieMatr'+'ix'](){return this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new te()),this['_cookieMat'+'rix'];}get['atlasViewp'+'ort'](){return this['_atlasView'+'port']||(this['_atlasView'+'port']=new re(-0x2076+0xa9e+0x18*0xe9,-0x9e4+-0x185d+0x25*0xed,0x1d00+-0x5*-0x55f+0x3*-0x129e,-0x27b*0x2+-0x1*-0x1b59+-0x1662*0x1)),this['_atlasView'+'port'];}set['cookie'](_0x5b296a){this['_cookie']!==_0x5b296a&&(this['_cookie']=_0x5b296a,this['updateKey']());}get['cookie'](){return this['_cookie'];}set['cookieFall'+'off'](_0x52c369){this['_cookieFal'+'loff']!==_0x52c369&&(this['_cookieFal'+'loff']=_0x52c369,this['updateKey']());}get['cookieFall'+'off'](){return this['_cookieFal'+'loff'];}set['cookieChan'+'nel'](_0x571fd3){if(this['_cookieCha'+'nnel']!==_0x571fd3){if(_0x571fd3['length']<-0x55c+-0xbc*-0x22+0x1399*-0x1){const _0x173d4c=_0x571fd3['charAt'](_0x571fd3['length']-(-0x7*0x479+0x2126+0x2*-0xeb)),_0x401d5e=0x9*-0x264+0x117f+0x408-_0x571fd3['length'];for(let _0x1e74bb=-0x16b*0x1+-0x148d+0x15f8;_0x1e74bb<_0x401d5e;_0x1e74bb++)_0x571fd3+=_0x173d4c;}this['_cookieCha'+'nnel']=_0x571fd3,this['updateKey'](),this['updateClus'+'teredFlags']();}}get['cookieChan'+'nel'](){return this['_cookieCha'+'nnel'];}set['cookieTran'+'sform'](_0x4659d6){this['_cookieTra'+'nsform']!==_0x4659d6&&(this['_cookieTra'+'nsform']=_0x4659d6,this['_cookieTra'+'nsformSet']=!!_0x4659d6,_0x4659d6&&!this['_cookieOff'+'set']&&(this['cookieOffs'+'et']=new J(),this['_cookieOff'+'setSet']=!(-0x1c54+-0x25ec+0x4241)),this['updateKey']());}get['cookieTran'+'sform'](){return this['_cookieTra'+'nsform'];}set['cookieOffs'+'et'](_0x3d24a0){if(this['_cookieOff'+'set']===_0x3d24a0)return;!!(this['_cookieTra'+'nsformSet']||_0x3d24a0)&&!_0x3d24a0&&this['_cookieOff'+'set']?this['_cookieOff'+'set']['set'](-0xb56+-0x9af+0x1505*0x1,0xd*-0x169+-0x2a5+0x6fe*0x3):this['_cookieOff'+'set']=_0x3d24a0,this['_cookieOff'+'setSet']=!!_0x3d24a0,_0x3d24a0&&!this['_cookieTra'+'nsform']&&(this['cookieTran'+'sform']=new re(0x7*0x56c+0x1615+0x388*-0x11,-0x1*0x54a+-0xbd5+0x1120,-0x17c6+-0x1611*0x1+-0x1*-0x2dd7,0x660+-0x24d5+0x1e75),this['_cookieTra'+'nsformSet']=!(0xe6d+-0x1126*-0x2+-0x30b8)),this['updateKey']();}get['cookieOffs'+'et'](){return this['_cookieOff'+'set'];}['beginFrame'](){this['visibleThi'+'sFrame']=this['_type']===ve&&this['_enabled'],this['maxScreenS'+'ize']=0x4e3+-0x1e7*0x5+0x4a0,this['atlasViewp'+'ortAllocat'+'ed']=!(-0x157*-0x4+0x1935+-0x1e90),this['atlasSlotU'+'pdated']=!(-0x7*-0x511+-0x1*-0xd03+-0x3079);}['_destroySh'+'adowMap'](){if(this['releaseRen'+'derData'](),this['_shadowMap']&&(this['_shadowMap']['cached']||this['_shadowMap']['destroy'](),this['_shadowMap']=null),this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=gr),this['shadowUpda'+'teOverride'+'s']){for(let _0x4bbdd8=-0x5f*0x5f+0x69a+0x1ca7;_0x4bbdd8<this['shadowUpda'+'teOverride'+'s']['length'];_0x4bbdd8++)this['shadowUpda'+'teOverride'+'s'][_0x4bbdd8]===Ps&&(this['shadowUpda'+'teOverride'+'s'][_0x4bbdd8]=gr);}}['getRenderD'+'ata'](_0x5d067b,_0x21ec20){for(let _0x377f06=-0x25*-0x100+-0x4*-0x7db+-0x1*0x446c;_0x377f06<this['_renderDat'+'a']['length'];_0x377f06++){const _0x35ca71=this['_renderDat'+'a'][_0x377f06];if(_0x35ca71['camera']===_0x5d067b&&_0x35ca71['face']===_0x21ec20)return _0x35ca71;}const _0x34db72=new Mb(_0x5d067b,_0x21ec20,this);return this['_renderDat'+'a']['push'](_0x34db72),_0x34db72;}['clone'](){const _0x49e5ec=new tl(this['device'],this['clusteredL'+'ighting']);return _0x49e5ec['type']=this['_type'],_0x49e5ec['setColor'](this['_color']),_0x49e5ec['intensity']=this['_intensity'],_0x49e5ec['affectSpec'+'ularity']=this['_affectSpe'+'cularity'],_0x49e5ec['luminance']=this['_luminance'],_0x49e5ec['castShadow'+'s']=this['castShadow'+'s'],_0x49e5ec['_enabled']=this['_enabled'],_0x49e5ec['attenuatio'+'nStart']=this['attenuatio'+'nStart'],_0x49e5ec['attenuatio'+'nEnd']=this['attenuatio'+'nEnd'],_0x49e5ec['falloffMod'+'e']=this['_falloffMo'+'de'],_0x49e5ec['shadowType']=this['_shadowTyp'+'e'],_0x49e5ec['vsmBlurSiz'+'e']=this['_vsmBlurSi'+'ze'],_0x49e5ec['vsmBlurMod'+'e']=this['vsmBlurMod'+'e'],_0x49e5ec['vsmBias']=this['vsmBias'],_0x49e5ec['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x49e5ec['mask']=this['mask'],this['shadowUpda'+'teOverride'+'s']&&(_0x49e5ec['shadowUpda'+'teOverride'+'s']=this['shadowUpda'+'teOverride'+'s']['slice']()),_0x49e5ec['innerConeA'+'ngle']=this['_innerCone'+'Angle'],_0x49e5ec['outerConeA'+'ngle']=this['_outerCone'+'Angle'],_0x49e5ec['numCascade'+'s']=this['numCascade'+'s'],_0x49e5ec['cascadeDis'+'tribution']=this['cascadeDis'+'tribution'],_0x49e5ec['cascadeBle'+'nd']=this['_cascadeBl'+'end'],_0x49e5ec['shape']=this['_shape'],_0x49e5ec['shadowDept'+'hState']['copy'](this['shadowDept'+'hState']),_0x49e5ec['shadowBias']=this['shadowBias'],_0x49e5ec['normalOffs'+'etBias']=this['_normalOff'+'setBias'],_0x49e5ec['shadowReso'+'lution']=this['_shadowRes'+'olution'],_0x49e5ec['shadowDist'+'ance']=this['shadowDist'+'ance'],_0x49e5ec['shadowInte'+'nsity']=this['shadowInte'+'nsity'],_0x49e5ec['shadowSamp'+'les']=this['shadowSamp'+'les'],_0x49e5ec['shadowBloc'+'kerSamples']=this['shadowBloc'+'kerSamples'],_0x49e5ec['penumbraSi'+'ze']=this['penumbraSi'+'ze'],_0x49e5ec['penumbraFa'+'lloff']=this['penumbraFa'+'lloff'],_0x49e5ec;}static['getLightUn'+'itConversi'+'on'](_0x25b0a6,_0x224f4c=Math['PI']/(-0x1ffb+0x463+0x1b9c),_0x277443=-0x683+0xb5c+-0x4d9){switch(_0x25b0a6){case Ze:{const _0x4ce1dc=Math['cos'](_0x224f4c),_0x221f38=Math['cos'](_0x277443);return(-0x7e1*0x3+-0x729+-0x2*-0xf67)*Math['PI']*(0xaa4+0x129a+-0x5d9*0x5-_0x221f38+(_0x221f38-_0x4ce1dc)/(-0x24f5+0x1224+0x12d3));}case Ke:return(-0x12c1*0x1+-0x47*0x1e+-0x1b17*-0x1)*Math['PI'];case ve:return 0x1fe7+-0x3d*0x9b+0x509;}}['_getUnifor'+'mBiasValue'+'s'](_0x52e6fe){const _0x3389d2=_0x52e6fe['shadowCame'+'ra']['_farClip'];switch(this['_type']){case Ke:wi['bias']=this['shadowBias'],wi['normalBias']=this['_normalOff'+'setBias'];break;case Ze:this['_isVsm']?wi['bias']=-(-0x49a*0x5+-0x821*-0x1+0xee1+0.00001)*(0x5a1+-0x11ab+0xc1e):wi['bias']=this['shadowBias']*(0x25d6+-0x1ca5*-0x1+0xbf*-0x59),wi['normalBias']=this['_isVsm']?this['vsmBias']/(this['attenuatio'+'nEnd']/(-0xe22+0x8a5+0x584)):this['_normalOff'+'setBias'];break;case ve:this['_isVsm']?wi['bias']=-(-0x2446*-0x1+0x2543*0x1+-0x19*0x2f1+0.00001)*(0x1*-0x1861+-0x7*0x527+0x3c86*0x1):wi['bias']=this['shadowBias']/_0x3389d2*(0x1895*-0x1+-0x776+0x1b5*0x13),wi['normalBias']=this['_isVsm']?this['vsmBias']/(_0x3389d2/(-0x5*0x392+-0x61*0x65+0x3826*0x1)):this['_normalOff'+'setBias'];break;}return wi;}['getColor'](){return this['_color'];}['getBoundin'+'gSphere'](_0x1b546a){if(this['_type']===Ze){const _0x30868f=this['attenuatio'+'nEnd'],_0x4b316c=this['_outerCone'+'Angle'],_0x181794=this['_outerCone'+'AngleCos'],_0x4a68ff=this['_node'];Zl['copy'](_0x4a68ff['up']),_0x4b316c>-0x1eae+-0x455*-0x1+-0x1*-0x1a86?(_0x1b546a['radius']=_0x30868f*this['_outerCone'+'AngleSin'],Zl['mulScalar'](-_0x30868f*_0x181794)):(_0x1b546a['radius']=_0x30868f/((-0xe3+-0x1049+-0x2dd*-0x6)*_0x181794),Zl['mulScalar'](-_0x1b546a['radius'])),_0x1b546a['center']['add2'](_0x4a68ff['getPositio'+'n'](),Zl);}else this['_type']===Ke&&(_0x1b546a['center']=this['_node']['getPositio'+'n'](),_0x1b546a['radius']=this['attenuatio'+'nEnd']);}['getBoundin'+'gBox'](_0x1d7275){if(this['_type']===Ze){const _0x3a057f=this['attenuatio'+'nEnd'],_0x1609d5=this['_outerCone'+'Angle'],_0x32d951=this['_node'],_0x39df96=Math['abs'](Math['sin'](_0x1609d5*Y['DEG_TO_RAD'])*_0x3a057f);_0x1d7275['center']['set'](0x5a5*-0x5+-0x1706+0x1115*0x3,-_0x3a057f*(-0x1b1b+-0x1*0x1eb7+0x1346*0x3+0.5),0x8*0x1d+0x1fa0+-0x56c*0x6),_0x1d7275['halfExtent'+'s']['set'](_0x39df96,_0x3a057f*(-0x41*0x39+-0x258+0x10d1+0.5),_0x39df96),_0x1d7275['setFromTra'+'nsformedAa'+'bb'](_0x1d7275,_0x32d951['getWorldTr'+'ansform'](),!(0x10*-0x13e+0x1*-0x1acc+0x2eac));}else this['_type']===Ke&&(_0x1d7275['center']['copy'](this['_node']['getPositio'+'n']()),_0x1d7275['halfExtent'+'s']['set'](this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd']));}['_updateSha'+'dowBias'](){if(this['_type']===Ke&&!this['clusteredL'+'ighting'])this['shadowDept'+'hState']['depthBias']=0x18d2+0x1*0x1e34+-0x3706,this['shadowDept'+'hState']['depthBiasS'+'lope']=-0x199*-0x17+-0x110f*0x2+-0x1*0x2a1;else{const _0x12a76f=this['shadowBias']*-(0x25f2+0x13a3+-0x1*0x35ad);this['shadowDept'+'hState']['depthBias']=_0x12a76f,this['shadowDept'+'hState']['depthBiasS'+'lope']=_0x12a76f;}}['_updateLin'+'earColor'](){let _0x182b9e=this['_intensity'];this['_usePhysic'+'alUnits']&&(_0x182b9e=this['_luminance']/tl['getLightUn'+'itConversi'+'on'](this['_type'],this['_outerCone'+'Angle']*Y['DEG_TO_RAD'],this['_innerCone'+'Angle']*Y['DEG_TO_RAD']));const _0x13db7a=this['_color'],_0x365e22=this['_colorLine'+'ar'];_0x182b9e>=0x57*0x4d+0x18da+0x5*-0xa34?io['linear'](_0x13db7a)['mulScalar'](_0x182b9e):io['copy'](_0x13db7a)['mulScalar'](_0x182b9e)['linear'](),_0x365e22[0x1c8f+0x2633+-0xa*0x6ad]=io['r'],_0x365e22[0x1*-0x19da+0x1*-0xaf8+-0x359*-0xb]=io['g'],_0x365e22[-0x15b8+-0x1604+0x2bbe]=io['b'],this['updateClus'+'terData'](!(0x328*-0xb+-0x1abb+0x3d73*0x1));}['setColor'](){arguments['length']===0x1*0xfd2+0xc30+-0x1c01?this['_color']['set'](arguments[-0x1*0x21c6+-0x1cbb*-0x1+0x1*0x50b]['r'],arguments[-0x9*0x53+0x1879+0x1*-0x158e]['g'],arguments[-0xfb*0x1f+0x14d7+-0x4c7*-0x2]['b']):arguments['length']===0x159f+0x1*-0xa99+-0xb03&&this['_color']['set'](arguments[0x781+0x2385+-0x1583*0x2],arguments[-0x665*-0x1+0x237d*-0x1+-0x1d19*-0x1],arguments[-0x1*-0x2115+-0xa*0x361+0x3*0x3d]),this['_updateLin'+'earColor']();}['layersDirt'+'y'](){this['layers']['forEach'](_0x1398f9=>{_0x1398f9['hasLight'](this)&&_0x1398f9['markLights'+'Dirty']();});}['updateKey'](){let _0x4b64ac=this['_type']<<0x2702+0xbe6+-0x32cb|this['_shadowTyp'+'e']<<-0x1501+-0x23de+0x1*0x38f8|this['_falloffMo'+'de']<<-0x92f+0x254f+0x1c09*-0x1|(this['_normalOff'+'setBias']!==-0x6*0x199+-0x1*-0x13d6+-0xa40?-0x1*0x26c3+-0x62*-0x1+-0x1*-0x2662:-0x1*-0x34a+-0x127*0x15+0x65*0x35)<<-0x739+-0x1347+0x1a96|(this['_cookie']?0x1e*-0x4c+-0x953+-0x123c*-0x1:-0x1*0xd62+-0x677+0x13d9)<<0x3*0x1b1+0x1dc5*0x1+0x1*-0x22c3|(this['_cookieFal'+'loff']?-0x1c8b+-0x113*0x5+-0x13*-0x1c9:0x43*-0xd+-0x1*-0x24d4+-0x216d)<<0x7*-0x4c5+-0x44d*-0x7+0x1ae*0x2|$d[this['_cookieCha'+'nnel']['charAt'](-0x19f*0x10+0xf1*0x2+0x180e)]<<-0x5*-0x6bc+-0xc38*0x1+-0x1562|(this['_cookieTra'+'nsform']?0x50a+0x2030+-0xd*0x2dd:-0x148+-0xc60+0xda8)<<0xa9e+-0x542*0x7+-0x5c*-0x49|this['_shape']<<-0x17e4+0x3*-0x401+0x23f1|(this['numCascade'+'s']>-0x1b53+0x262d+0x39e*-0x3?-0x6fa+-0xb*0x89+0xcde:-0xf*0x3+-0x1*-0x1ba1+0xdba*-0x2)<<-0x1b39+0x1173+0x9cf|(this['_cascadeBl'+'end']>-0x214d+0x729+-0xef*-0x1c?0x1398+-0x7d7+0x40*-0x2f:0x144b+-0x54c+0xb*-0x15d)<<-0x1e93+0x1*0x122b+0xc70|(this['affectSpec'+'ularity']?-0x202+0x1*-0x2d8+-0xb*-0x71:-0x15df+0x16b0+-0xd1)<<-0x79*0x3d+0x279*-0xa+-0x3596*-0x1|this['mask']<<-0x7*0x35d+-0x4dc+0x1c6d|(this['_castShado'+'ws']?0xed*0x17+0x2710+-0x3c5a:-0x1*0x841+-0x196b+-0x86b*-0x4)<<0x14d7+-0x1*0x53f+0xf95*-0x1;this['_cookieCha'+'nnel']['length']===0x1*-0x9af+-0x1*-0x34f+0x663&&(_0x4b64ac|=$d[this['_cookieCha'+'nnel']['charAt'](-0x1d83+-0xee7*0x1+0x2c6b)]<<0x26e5+0x23b+-0x2910,_0x4b64ac|=$d[this['_cookieCha'+'nnel']['charAt'](0xc8*-0x18+-0xf75+0x2237)]<<0x3f6*0x3+-0x1643*-0x1+0x2217*-0x1),_0x4b64ac!==this['key']&&this['layersDirt'+'y'](),this['key']=_0x4b64ac;}['updateClus'+'teredFlags'](){const _0x59cf8f=!!(this['mask']&Ss),_0x177994=!!(this['mask']&di);this['clusteredF'+'lags']=(this['type']===Ze?-0x2361+0x5*0x5f+0x3*0xb2d:0x157d+-0x3*0x1+-0xabd*0x2)<<0x13*-0x112+-0x1*-0x19d9+0x1*-0x565|(this['_shape']&0x6b5+-0x1f41+0x188f)<<-0x8*-0xe5+-0x9a7+-0x17*-0x1d|(this['_falloffMo'+'de']&0x25d6+-0x5*0xf5+-0x4*0x843)<<0x3*-0x8ad+-0x1*0xc6e+0x2690|(Cb[this['_cookieCha'+'nnel']]??0x7*0x455+-0x1*-0x10fc+0x2f4f*-0x1)<<-0xceb*0x3+-0x18ab+0x47*0xe5|(_0x59cf8f?0x1*0x1d4+-0x1*0xb51+0x97e:-0x14e4+0x5*0x131+0xeef)<<0x1fd8+-0x1cd8+-0x2ea|(_0x177994?-0xf30+-0x196b+0x289c:-0x4*0x6a8+0x157d+0x523)<<0x16*-0x106+0x7*0x565+-0xf2a;}['getCluster'+'edFlags'](_0x25ceda,_0x421133){return this['clusteredF'+'lags']|((_0x25ceda?Math['floor'](this['shadowInte'+'nsity']*(-0xea3+-0x1*-0x2db+0xcc7)):-0x19da*-0x1+-0x42e+-0x49*0x4c)&0x13cd+-0x1e0+-0x10ee)<<0x5*0x19f+-0x46*-0x35+0xd*-0x1bd|((_0x421133?Math['floor'](this['cookieInte'+'nsity']*(0x26c8+0x67a+-0x2c43)):0x100e+0x1364+-0x2372)&0x177d*-0x1+0x4d4+0x13a8)<<-0xb*-0x29f+-0x8*-0xe5+0x523*-0x7;}['updateClus'+'terData'](_0x2f6018,_0x16b1d9){const {clusteredData16:_0x9c8f1f}=this,_0x595da3=Tn['float2Half'];_0x2f6018&&(_0x9c8f1f[0xb15+0x1*0x3d6+-0xeeb]=_0x595da3(Y['clamp'](this['_colorLine'+'ar'][-0x13*-0x147+-0x29b*-0x1+-0x1ae0]/wc,0x379+-0x1343*0x2+0x230d,-0x1c952+0x1377f*0x1+-0x311*-0x83)),_0x9c8f1f[-0x1407+0x3*-0xb6f+0x3655*0x1]=_0x595da3(Y['clamp'](this['_colorLine'+'ar'][0x1419+-0x2*-0x110f+0x606*-0x9]/wc,-0x1*0x285+0x1344+-0x1*0x10bf,0x5*0x1709+-0x2f41+0xbbf4)),_0x9c8f1f[-0x162f+-0x497+0x359*0x8]=_0x595da3(Y['clamp'](this['_colorLine'+'ar'][-0x2217*0x1+-0x240*-0x11+0x1*-0x427]/wc,-0x742+-0x71*-0x43+0xc5*-0x1d,-0x13*-0xef9+0xc765*0x1+-0xe400))),_0x16b1d9&&(_0x9c8f1f[0x1*-0x204a+0x1969+0x6e5]=_0x595da3(this['_innerCone'+'AngleCos']),_0x9c8f1f[0x16d3+-0xc6a+-0x85*0x14]=_0x595da3(this['_outerCone'+'AngleCos']));}}class qy{constructor(_0x181969,_0x5770f2,_0x268c14){h(this,'_areaLight'+'sEnabled',!(-0xad*0x1+-0x1*-0x6b5+-0x1*0x607)),h(this,'_cells',new D(-0x22a3+-0x1c08+0x3eb5,-0xeca+0x6da+0x7f3,0x1705+0x17e8+-0x2ee3)),h(this,'_maxLights'+'PerCell',-0x31*-0x6d+-0x3*0x1ae+-0xed4),h(this,'_shadowsEn'+'abled',!(0x1119+0x138*-0x6+-0x9c9)),h(this,'_shadowTyp'+'e',Ws),h(this,'_shadowAtl'+'asResoluti'+'on',-0x121*0x13+0x78b+0x15e8),h(this,'_cookiesEn'+'abled',!(0x16*0x3d+-0x1937+0x2*0x9fd)),h(this,'_cookieAtl'+'asResoluti'+'on',-0x16b3+0x1239+-0x1*-0xc7a),h(this,'debugLayer'),h(this,'atlasSplit',null),(this['_supportsA'+'reaLights']=_0x181969,this['_maxTextur'+'eSize']=_0x5770f2,this['_dirtyLigh'+'tsFnc']=_0x268c14);}['applySetti'+'ngs'](_0x1a7177){this['shadowsEna'+'bled']=_0x1a7177['lightingSh'+'adowsEnabl'+'ed']??this['shadowsEna'+'bled'],this['cookiesEna'+'bled']=_0x1a7177['lightingCo'+'okiesEnabl'+'ed']??this['cookiesEna'+'bled'],this['areaLights'+'Enabled']=_0x1a7177['lightingAr'+'eaLightsEn'+'abled']??this['areaLights'+'Enabled'],this['shadowAtla'+'sResolutio'+'n']=_0x1a7177['lightingSh'+'adowAtlasR'+'esolution']??this['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x1a7177['lightingCo'+'okieAtlasR'+'esolution']??this['cookieAtla'+'sResolutio'+'n'],this['maxLightsP'+'erCell']=_0x1a7177['lightingMa'+'xLightsPer'+'Cell']??this['maxLightsP'+'erCell'],this['shadowType']=_0x1a7177['lightingSh'+'adowType']??this['shadowType'],_0x1a7177['lightingCe'+'lls']&&(this['cells']=new D(_0x1a7177['lightingCe'+'lls']));}set['cells'](_0x91c7b1){this['_cells']['copy'](_0x91c7b1);}get['cells'](){return this['_cells'];}set['maxLightsP'+'erCell'](_0x5ef2f3){this['_maxLights'+'PerCell']=Y['clamp'](_0x5ef2f3,-0x1b04+0x50d+0x15f8,0x70e+0xaf8+-0x1107*0x1);}get['maxLightsP'+'erCell'](){return this['_maxLights'+'PerCell'];}set['cookieAtla'+'sResolutio'+'n'](_0x502326){this['_cookieAtl'+'asResoluti'+'on']=Y['clamp'](_0x502326,-0x6d3*0x1+0x1*-0x1da0+0x2493,this['_maxTextur'+'eSize']);}get['cookieAtla'+'sResolutio'+'n'](){return this['_cookieAtl'+'asResoluti'+'on'];}set['shadowAtla'+'sResolutio'+'n'](_0x125984){this['_shadowAtl'+'asResoluti'+'on']=Y['clamp'](_0x125984,0x229+0x287+-0x490,this['_maxTextur'+'eSize']);}get['shadowAtla'+'sResolutio'+'n'](){return this['_shadowAtl'+'asResoluti'+'on'];}set['shadowType'](_0x23603e){this['_shadowTyp'+'e']!==_0x23603e&&(this['_shadowTyp'+'e']=_0x23603e,this['_dirtyLigh'+'tsFnc']());}get['shadowType'](){return this['_shadowTyp'+'e'];}set['cookiesEna'+'bled'](_0x42d440){this['_cookiesEn'+'abled']!==_0x42d440&&(this['_cookiesEn'+'abled']=_0x42d440,this['_dirtyLigh'+'tsFnc']());}get['cookiesEna'+'bled'](){return this['_cookiesEn'+'abled'];}set['areaLights'+'Enabled'](_0x53f84d){this['_supportsA'+'reaLights']&&this['_areaLight'+'sEnabled']!==_0x53f84d&&(this['_areaLight'+'sEnabled']=_0x53f84d,this['_dirtyLigh'+'tsFnc']());}get['areaLights'+'Enabled'](){return this['_areaLight'+'sEnabled'];}set['shadowsEna'+'bled'](_0x34f11e){this['_shadowsEn'+'abled']!==_0x34f11e&&(this['_shadowsEn'+'abled']=_0x34f11e,this['_dirtyLigh'+'tsFnc']());}get['shadowsEna'+'bled'](){return this['_shadowsEn'+'abled'];}}class _a{constructor(_0x450588){this['morph']=_0x450588,_0x450588['incRefCoun'+'t'](),this['device']=_0x450588['device'];const _0x36e176=_0x450588['_targets']['length'];this['shader']=this['_createSha'+'der'](_0x36e176),this['_weights']=[],this['_weightMap']=new Map();for(let _0x50f452=-0x1*0x13cf+-0xa4*-0xa+0xd67;_0x50f452<_0x450588['_targets']['length'];_0x50f452++){const _0x4abd7b=_0x450588['_targets'][_0x50f452];_0x4abd7b['name']&&this['_weightMap']['set'](_0x4abd7b['name'],_0x50f452),this['setWeight'](_0x50f452,_0x4abd7b['defaultWei'+'ght']);}this['_shaderMor'+'phWeights']=new Float32Array(_0x36e176),this['_shaderMor'+'phIndex']=new Uint32Array(_0x36e176);const _0x362cd2=(_0x2dc0ae,_0x4698df)=>(this[_0x4698df]=_0x450588['_createTex'+'ture'](_0x2dc0ae,_0x450588['_renderTex'+'tureFormat']),new gt({'colorBuffer':this[_0x4698df],'depth':!(-0x195+-0x72a*-0x4+0xf*-0x1ce)}));_0x450588['morphPosit'+'ions']&&(this['rtPosition'+'s']=_0x362cd2('MorphRTPos','texturePos'+'itions')),_0x450588['morphNorma'+'ls']&&(this['rtNormals']=_0x362cd2('MorphRTNrm','textureNor'+'mals')),this['_texturePa'+'rams']=new Float32Array([_0x450588['morphTextu'+'reWidth'],_0x450588['morphTextu'+'reHeight']]);const _0x88c48=_0x450588['aabb']['halfExtent'+'s'];this['_aabbSize']=new Float32Array([_0x88c48['x']*(0x751+-0x1*-0x1e2d+-0x257a),_0x88c48['y']*(0x1354*0x2+0x12b4+-0x3958),_0x88c48['z']*(0x53*-0x65+0x1*-0x4d1+0x1*0x2594)]);const _0x1365d1=_0x450588['aabb']['getMin']();this['_aabbMin']=new Float32Array([_0x1365d1['x']*(-0x24e9+0x5c*-0x29+-0x761*-0x7),_0x1365d1['y']*(-0x40*0x58+0x1e3a+-0x838),_0x1365d1['z']*(-0x1*-0x13fc+0x1*-0x2f5+-0x1105)]),this['_aabbNrmSi'+'ze']=new Float32Array([0x476*-0x8+0x1c6a*-0x1+0x401c,-0x2c6+0x1da8+0x6b8*-0x4,-0xa18+0x138e+-0x974]),this['_aabbNrmMi'+'n']=new Float32Array([-(-0x939+0x285+0x6b5),-(0x24a9+0x164a+-0x3af2),-(-0x4*-0x8f7+0x1662+0x36d*-0x11)]),this['aabbSizeId']=this['device']['scope']['resolve']('aabbSize'),this['aabbMinId']=this['device']['scope']['resolve']('aabbMin'),this['morphTextu'+'reId']=this['device']['scope']['resolve']('morphTextu'+'re'),this['morphFacto'+'r']=this['device']['scope']['resolve']('morphFacto'+'r[0]'),this['morphIndex']=this['device']['scope']['resolve']('morphIndex'+'[0]'),this['countId']=this['device']['scope']['resolve']('count'),this['zeroTextur'+'es']=!(-0x1427+0x1dd9*-0x1+0x3201);}['destroy'](){var _0x590658,_0x396c2c,_0x2bf5dc,_0x585ad7;this['shader']=null;const _0x54000c=this['morph'];_0x54000c&&(this['morph']=null,_0x54000c['decRefCoun'+'t'](),_0x54000c['refCount']<0x328*-0x3+0x3*0x28+0x901&&_0x54000c['destroy']()),(_0x590658=this['rtPosition'+'s'])==null||_0x590658['destroy'](),this['rtPosition'+'s']=null,(_0x396c2c=this['texturePos'+'itions'])==null||_0x396c2c['destroy'](),this['texturePos'+'itions']=null,(_0x2bf5dc=this['rtNormals'])==null||_0x2bf5dc['destroy'](),this['rtNormals']=null,(_0x585ad7=this['textureNor'+'mals'])==null||_0x585ad7['destroy'](),this['textureNor'+'mals']=null;}['clone'](){return new _a(this['morph']);}['_getWeight'+'Index'](_0x2e2003){if(typeof _0x2e2003=='string'){const _0x580e9e=this['_weightMap']['get'](_0x2e2003);return _0x580e9e===void(-0xc4e+-0x1ca0+0x28ee)&&w['errorOnce']('Cannot\x20fin'+'d\x20morph\x20ta'+'rget\x20with\x20'+'name:\x20'+_0x2e2003+'.'),_0x580e9e;}return _0x2e2003;}['getWeight'](_0x38729d){const _0xde464e=this['_getWeight'+'Index'](_0x38729d);return this['_weights'][_0xde464e];}['setWeight'](_0x561871,_0x2362d7){const _0x9b2151=this['_getWeight'+'Index'](_0x561871);w['assert'](_0x9b2151>=-0xdda+0x1*0xc81+-0x1*-0x159&&_0x9b2151<this['morph']['_targets']['length']),this['_weights'][_0x9b2151]=_0x2362d7,this['_dirty']=!(-0x2*-0xe72+-0x8d*0x3b+0x39b);}['_createSha'+'der'](_0x209364){const _0x2c480b=new Map();_0x2c480b['set']('{MORPH_TEX'+'TURE_MAX_C'+'OUNT}',_0x209364),this['morph']['intRenderF'+'ormat']&&_0x2c480b['set']('MORPH_INT','');const _0x38371d=this['morph']['intRenderF'+'ormat']?'uvec4':'vec4';return $t['createShad'+'er'](this['device'],{'uniqueName':'TextureMor'+'phShader_'+_0x209364+'-'+(this['morph']['intRenderF'+'ormat']?'int':'float'),'attributes':{'vertex_position':Pe},'vertexChunk':'morphVS','fragmentChunk':'morphPS','fragmentDefines':_0x2c480b,'fragmentOutputTypes':[_0x38371d]});}['_updateTex'+'tureRender'+'Target'](_0x18c421,_0x5706da,_0x56161e){const {morph:_0x33718c,device:_0x163a88}=this;this['setAabbUni'+'forms'](_0x56161e),this['morphTextu'+'reId']['setValue'](_0x56161e?_0x33718c['targetsTex'+'turePositi'+'ons']:_0x33718c['targetsTex'+'tureNormal'+'s']),_0x163a88['setBlendSt'+'ate'](pt['NOBLEND']),this['countId']['setValue'](_0x5706da),this['morphFacto'+'r']['setValue'](this['_shaderMor'+'phWeights']),this['morphIndex']['setValue'](this['_shaderMor'+'phIndex']),Tr(_0x163a88,_0x18c421,this['shader']);}['_updateTex'+'tureMorph'](_0x567c2a){const _0x465065=this['device'];Q['pushGpuMar'+'ker'](_0x465065,'MorphUpdat'+'e'),(_0x567c2a>-0xe6b+-0x735+0x15a0||!this['zeroTextur'+'es'])&&(this['rtPosition'+'s']&&this['_updateTex'+'tureRender'+'Target'](this['rtPosition'+'s'],_0x567c2a,!(0x1*-0x1f47+0xc*-0x75+0x24c3)),this['rtNormals']&&this['_updateTex'+'tureRender'+'Target'](this['rtNormals'],_0x567c2a,!(-0x2633+-0x489+0x2abd)),this['zeroTextur'+'es']=_0x567c2a===-0x17*-0x172+0x1*0x231e+0x8c*-0x7d),Q['popGpuMark'+'er'](_0x465065);}['setAabbUni'+'forms'](_0x2d3c4c=!(-0x1562+0xedb*0x2+-0x2*0x42a)){this['aabbSizeId']['setValue'](_0x2d3c4c?this['_aabbSize']:this['_aabbNrmSi'+'ze']),this['aabbMinId']['setValue'](_0x2d3c4c?this['_aabbMin']:this['_aabbNrmMi'+'n']);}['prepareRen'+'dering'](_0x4fee62){this['setAabbUni'+'forms']();}['update'](){this['_dirty']=!(0x1522+-0x1*-0x1e17+-0x3338);const _0x4e9be9=this['morph']['_targets'],_0x16ef0e=-0x1*-0xbb9+-0x1418+0x85f+0.00001,_0x35044a=this['_shaderMor'+'phWeights'],_0x1a7556=this['_shaderMor'+'phIndex'];let _0xc06c9e=-0x1464+0x8a*-0x3d+0x11c2*0x3;for(let _0x395372=-0x11*0x97+0x56+0x9b1;_0x395372<_0x4e9be9['length'];_0x395372++)Math['abs'](this['getWeight'](_0x395372))>_0x16ef0e&&(_0x35044a[_0xc06c9e]=this['getWeight'](_0x395372),_0x1a7556[_0xc06c9e]=_0x395372,_0xc06c9e++);this['_updateTex'+'tureMorph'](_0xc06c9e);}}class tr{constructor(){h(this,'graph',null),h(this,'meshInstan'+'ces',[]),h(this,'skinInstan'+'ces',[]),h(this,'morphInsta'+'nces',[]),(this['cameras']=[],this['lights']=[],this['_shadersVe'+'rsion']=-0x705*0x1+-0x4f1*0x2+0x10e7,this['_immutable']=!(0x34b*-0x5+0x2*-0x817+-0xae2*-0x3));}['getGraph'](){return this['graph'];}['setGraph'](_0x4d2106){this['graph']=_0x4d2106;}['getCameras'](){return this['cameras'];}['setCameras'](_0x52d11a){this['cameras']=_0x52d11a;}['getLights'](){return this['lights'];}['setLights'](_0xc7df2e){this['lights']=_0xc7df2e;}['getMateria'+'ls'](){const _0x32b41d=[];for(let _0x163cf3=-0x1*-0x8cc+-0x23d*-0x8+-0x1ab4;_0x163cf3<this['meshInstan'+'ces']['length'];_0x163cf3++){const _0xed3fef=this['meshInstan'+'ces'][_0x163cf3];_0x32b41d['indexOf'](_0xed3fef['material'])===-(-0x2*0xbd7+-0xf14+0x26c3)&&_0x32b41d['push'](_0xed3fef['material']);}return _0x32b41d;}['clone'](){const _0x1d64fb=[],_0x3591bc=[],_0x51314a=function(_0x524b83){const _0x1baa3f=_0x524b83['clone']();_0x1d64fb['push'](_0x524b83),_0x3591bc['push'](_0x1baa3f);for(let _0x3834d4=0xbde+0xc9+-0xca7*0x1;_0x3834d4<_0x524b83['_children']['length'];_0x3834d4++)_0x1baa3f['addChild'](_0x51314a(_0x524b83['_children'][_0x3834d4]));return _0x1baa3f;},_0x15360c=_0x51314a(this['graph']),_0x433c70=[],_0x560d82=[],_0x25cfbf=[];for(let _0x25f1bb=-0x3*0xa1f+0xb*0x1f5+0x8d6;_0x25f1bb<this['skinInstan'+'ces']['length'];_0x25f1bb++){const _0x5745c7=this['skinInstan'+'ces'][_0x25f1bb]['skin'],_0x59665d=new xl(_0x5745c7),_0x26978e=[];for(let _0xe473ac=-0x1e64+0x1f2d*-0x1+0x3d91;_0xe473ac<_0x5745c7['boneNames']['length'];_0xe473ac++){const _0xa54a41=_0x5745c7['boneNames'][_0xe473ac],_0x400e4c=_0x15360c['findByName'](_0xa54a41);_0x26978e['push'](_0x400e4c);}_0x59665d['bones']=_0x26978e,_0x560d82['push'](_0x59665d);}for(let _0x24a01c=0x2*-0x875+-0x1868+-0x2*-0x14a9;_0x24a01c<this['morphInsta'+'nces']['length'];_0x24a01c++){const _0x330944=this['morphInsta'+'nces'][_0x24a01c]['morph'],_0x11b4ff=new _a(_0x330944);_0x25cfbf['push'](_0x11b4ff);}for(let _0x4005bb=-0x375*0x2+0x89*0x19+-0x677;_0x4005bb<this['meshInstan'+'ces']['length'];_0x4005bb++){const _0x165c3b=this['meshInstan'+'ces'][_0x4005bb],_0x3f1e27=_0x1d64fb['indexOf'](_0x165c3b['node']),_0x1db7f2=new He(_0x165c3b['mesh'],_0x165c3b['material'],_0x3591bc[_0x3f1e27]);if(_0x165c3b['skinInstan'+'ce']){const _0x6cb7fd=this['skinInstan'+'ces']['indexOf'](_0x165c3b['skinInstan'+'ce']);_0x1db7f2['skinInstan'+'ce']=_0x560d82[_0x6cb7fd];}if(_0x165c3b['morphInsta'+'nce']){const _0x3388af=this['morphInsta'+'nces']['indexOf'](_0x165c3b['morphInsta'+'nce']);_0x1db7f2['morphInsta'+'nce']=_0x25cfbf[_0x3388af];}_0x433c70['push'](_0x1db7f2);}const _0x390f44=new tr();return _0x390f44['graph']=_0x15360c,_0x390f44['meshInstan'+'ces']=_0x433c70,_0x390f44['skinInstan'+'ces']=_0x560d82,_0x390f44['morphInsta'+'nces']=_0x25cfbf,_0x390f44['getGraph']()['syncHierar'+'chy'](),_0x390f44;}['destroy'](){const _0x7fd3f8=this['meshInstan'+'ces'];for(let _0x388b7c=0x7df+-0x256+-0x589;_0x388b7c<_0x7fd3f8['length'];_0x388b7c++)_0x7fd3f8[_0x388b7c]['destroy']();this['meshInstan'+'ces']['length']=-0x23ab+0x250c+-0x161;}['generateWi'+'reframe'](){He['_prepareRe'+'nderStyleF'+'orArray'](this['meshInstan'+'ces'],Vr);}}class Gp extends td{constructor(_0x308ec1,_0x5b803c,{preferHighPrecision:_0xe8b9e9=!(-0x1*0x23f9+-0x1*0x5f3+-0x1*-0x29ed)}={}){super(),h(this,'_aabb'),h(this,'preferHigh'+'Precision'),(w['assert'](_0x5b803c,'Morph\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x5b803c);const _0x14b760=_0x5b803c;this['preferHigh'+'Precision']=_0xe8b9e9,w['assert'](_0x308ec1['every'](_0x5c6888=>!_0x5c6888['used']),'A\x20specifie'+'d\x20target\x20h'+'as\x20already'+'\x20been\x20used'+'\x20to\x20create'+'\x20a\x20Morph,\x20'+'use\x20its\x20cl'+'one\x20instea'+'d.'),this['_targets']=_0x308ec1['slice']();const _0x558368=_0x14b760['textureHal'+'fFloatRend'+'erable']?nt:void(0x62*0x63+0x1bd7+-0x41bd),_0x3c6737=_0x14b760['textureFlo'+'atRenderab'+'le']?Xt:void(-0x9*-0x1c3+-0x354*0x9+0x4b3*0x3);this['_renderTex'+'tureFormat']=this['preferHigh'+'Precision']?_0x3c6737??_0x558368:_0x558368??_0x3c6737,this['_renderTex'+'tureFormat']=this['_renderTex'+'tureFormat']??Uh,this['intRenderF'+'ormat']=rn(this['_renderTex'+'tureFormat']),this['_textureFo'+'rmat']=this['preferHigh'+'Precision']?Xt:nt,this['_init'](),this['_updateMor'+'phFlags']();}['destroy'](){var _0x4b03aa,_0x52d5af,_0x54a753;(_0x4b03aa=this['vertexBuff'+'erIds'])==null||_0x4b03aa['destroy'](),this['vertexBuff'+'erIds']=null,(_0x52d5af=this['targetsTex'+'turePositi'+'ons'])==null||_0x52d5af['destroy'](),this['targetsTex'+'turePositi'+'ons']=null,(_0x54a753=this['targetsTex'+'tureNormal'+'s'])==null||_0x54a753['destroy'](),this['targetsTex'+'tureNormal'+'s']=null;}get['aabb'](){if(!this['_aabb']){const _0x862ee5=new D(),_0x2cd16d=new D();for(let _0x50e145=0x1*-0x1095+-0x2107+-0x2*-0x18ce;_0x50e145<this['_targets']['length'];_0x50e145++){const _0x486ae1=this['_targets'][_0x50e145]['aabb'];_0x862ee5['min'](_0x486ae1['getMin']()),_0x2cd16d['max'](_0x486ae1['getMax']());}this['_aabb']=new De(),this['_aabb']['setMinMax'](_0x862ee5,_0x2cd16d);}return this['_aabb'];}get['morphPosit'+'ions'](){return this['_morphPosi'+'tions'];}get['morphNorma'+'ls'](){return this['_morphNorm'+'als'];}['_init'](){this['_initTextu'+'reBased']();for(let _0x4ad0cc=-0x1*-0x2272+0x2*0xb01+-0x3874;_0x4ad0cc<this['_targets']['length'];_0x4ad0cc++)this['_targets'][_0x4ad0cc]['_postInit']();}['_findSpars'+'eSet'](_0x186dc0,_0x29fd79,_0x2be941){let _0x364a02=0x84*0xc+-0x1*-0x43+-0x4b*0x16;const _0x4030a3=_0x186dc0[0x22cc+-0x31*0x8b+-0x1*0x831]['length'];for(let _0x5ba428=0x18c7+0xc84+-0x254b;_0x5ba428<_0x4030a3;_0x5ba428+=-0xd*-0xb5+0x1*-0x19bd+0x108f){let _0x21fcd4=!(0xab*-0x1e+0x247b*-0x1+0x5*0xb4e);for(let _0x4c2db9=-0xa*-0x59+-0xd65+0x9eb;_0x4c2db9<_0x186dc0['length'];_0x4c2db9++){const _0x339df4=_0x186dc0[_0x4c2db9];if(_0x339df4[_0x5ba428]!==0x4*0x96b+-0xc3e*0x1+-0x196e||_0x339df4[_0x5ba428+(-0xbe3+-0x204b+0x2c2f)]!==0xfbf+0x25f1+0xd6c*-0x4||_0x339df4[_0x5ba428+(0x20da+-0x1*-0x2c7+-0x239f)]!==0x2047*-0x1+0x35b*-0x1+-0x23a2*-0x1){_0x21fcd4=!(0x3*-0xc26+0x5*-0x7cd+-0x4b73*-0x1);break;}}_0x21fcd4?(_0x29fd79['push'](_0x364a02),_0x2be941['push'](_0x5ba428/(0xa8c+0x1*-0x1925+0xe9c)),_0x364a02++):_0x29fd79['push'](0x1*0x1055+0xbd6+-0x1c2b);}return _0x364a02;}['_initTextu'+'reBased'](){const _0x1848cf=[],_0x712f20=[],_0x5acf2f=this['_targets'];for(let _0x5bfc24=0x41f+-0x11d*0x13+-0x1b4*-0xa;_0x5bfc24<_0x5acf2f['length'];_0x5bfc24++){const _0x57e460=_0x5acf2f[_0x5bfc24];_0x57e460['options']['deltaPosit'+'ions']&&(_0x1848cf['push'](_0x57e460['options']['deltaPosit'+'ions']),_0x712f20['push'](!(0x2e*0x34+0x88d+-0x9*0x1fd))),_0x57e460['options']['deltaNorma'+'ls']&&(_0x1848cf['push'](_0x57e460['options']['deltaNorma'+'ls']),_0x712f20['push'](!(-0x1*-0x7a9+0x22c4+-0xf*0x2d4)));}const _0x5b87c3=[],_0x1d0c45=[],_0x20f911=this['_findSpars'+'eSet'](_0x1848cf,_0x5b87c3,_0x1d0c45),_0x1cd6f2=this['device']['maxTexture'+'Size'];let _0x12437c=Math['ceil'](Math['sqrt'](_0x20f911));_0x12437c=Math['min'](_0x12437c,_0x1cd6f2);const _0x6a6431=Math['ceil'](_0x20f911/_0x12437c);if(_0x6a6431>_0x1cd6f2){w['warnOnce']('Morph\x20targ'+'et\x20data\x20is'+'\x20too\x20large'+'\x20to\x20fit\x20in'+'to\x20a\x20textu'+'re\x20array.\x20'+'Required\x20t'+'exture\x20siz'+'e:\x20'+_0x12437c+'x'+_0x6a6431+(',\x20max\x20text'+'ure\x20size:\x20')+_0x1cd6f2+'x'+_0x1cd6f2+'.');return;}this['morphTextu'+'reWidth']=_0x12437c,this['morphTextu'+'reHeight']=_0x6a6431;let _0x5080f5=!(0x129b+0x1298+-0xc66*0x3);const _0x8dcd27=Tn['float2Half'];this['_textureFo'+'rmat']===nt&&(_0x5080f5=!(-0x8*-0x97+-0x12a2+0xdea));const _0x22e0a6=[],_0x1966f4=[],_0x58f100=_0x12437c*_0x6a6431*(0x2be+-0x1576+-0x1*-0x12bc);for(let _0x366595=-0x21c0+-0x24d7+0x4697;_0x366595<_0x1848cf['length'];_0x366595++){const _0x5a07d4=_0x1848cf[_0x366595],_0x1a6311=this['_textureFo'+'rmat']===nt?new Uint16Array(_0x58f100):new Float32Array(_0x58f100);if((_0x712f20[_0x366595]?_0x22e0a6:_0x1966f4)['push'](_0x1a6311),_0x5080f5)for(let _0x10c591=-0x110a+-0x1*-0x47+-0x7*-0x265;_0x10c591<_0x1d0c45['length'];_0x10c591++){const _0x499718=_0x1d0c45[_0x10c591]*(-0x116b+0x6e5+0x3*0x383),_0x3bd472=_0x10c591*(-0x1*0x3bb+0x20f1+-0x1d32)+(-0xe*-0x5b+0x1*0x8a7+-0xd9d);_0x1a6311[_0x3bd472]=_0x8dcd27(_0x5a07d4[_0x499718]),_0x1a6311[_0x3bd472+(0x1a0c*0x1+0x1*0xc3d+-0x2648)]=_0x8dcd27(_0x5a07d4[_0x499718+(-0x1169+0x4*0x349+0x1*0x446)]),_0x1a6311[_0x3bd472+(-0x1*-0x1b92+0x3d6+0xfb3*-0x2)]=_0x8dcd27(_0x5a07d4[_0x499718+(-0xc2f*-0x3+0x1999*-0x1+-0xaf2)]);}else for(let _0x7b2afe=-0xa32+-0x162d+0x1*0x205f;_0x7b2afe<_0x1d0c45['length'];_0x7b2afe++){const _0x493365=_0x1d0c45[_0x7b2afe]*(0x2c0+-0x1*-0x25c+-0x519),_0xada63c=_0x7b2afe*(-0x19e4+-0x3*-0x97+0x1823)+(-0x15ef*-0x1+-0xc6c+-0x97f);_0x1a6311[_0xada63c]=_0x5a07d4[_0x493365],_0x1a6311[_0xada63c+(0x1*-0x13ad+-0xe7*0x17+0x286f)]=_0x5a07d4[_0x493365+(-0x1a08+-0x2*-0xb3d+0x1*0x38f)],_0x1a6311[_0xada63c+(0xa54+0xba8+-0x15fa)]=_0x5a07d4[_0x493365+(-0x211f*-0x1+0x22d7+-0x10fd*0x4)];}}_0x22e0a6['length']>-0x1353+-0x19eb+0x2d3e*0x1&&(this['targetsTex'+'turePositi'+'ons']=this['_createTex'+'ture']('MorphPosit'+'ionsTextur'+'e',this['_textureFo'+'rmat'],_0x5acf2f['length'],[_0x22e0a6]),this['targetsTex'+'turePositi'+'ons']['upload']()),_0x1966f4['length']>0x10*-0x44+-0x406+0x161*0x6&&(this['targetsTex'+'tureNormal'+'s']=this['_createTex'+'ture']('MorphNorma'+'lsTexture',this['_textureFo'+'rmat'],_0x5acf2f['length'],[_0x1966f4]),this['targetsTex'+'tureNormal'+'s']['upload']());const _0x43efac=[{'semantic':bn,'components':0x1,'type':Vo,'asInt':!(-0x99f*-0x3+0x7*0x3c7+-0x374e)}];return this['vertexBuff'+'erIds']=new Ds(this['device'],new kt(this['device'],_0x43efac,_0x5b87c3['length']),_0x5b87c3['length'],{'data':new Uint32Array(_0x5b87c3)}),!(-0x2fa+-0x935+0x1*0xc2f);}get['targets'](){return this['_targets'];}['_updateMor'+'phFlags'](){this['_morphPosi'+'tions']=!(-0x6ae+-0x140d+0x1abc),this['_morphNorm'+'als']=!(-0x1208+-0x9fd*-0x2+-0x47*0x7);for(let _0x52589e=0x9*-0x65+0x20c2+-0x1d35;_0x52589e<this['_targets']['length'];_0x52589e++){const _0x3cc1c3=this['_targets'][_0x52589e];_0x3cc1c3['morphPosit'+'ions']&&(this['_morphPosi'+'tions']=!(-0x2ae+0x1*-0x217e+0x14*0x1cf)),_0x3cc1c3['morphNorma'+'ls']&&(this['_morphNorm'+'als']=!(0x931*-0x1+0x104+0x7*0x12b));}}['_createTex'+'ture'](_0x4842ac,_0x405a47,_0x2be1c3,_0x5ea669){return new _e(this['device'],{'levels':_0x5ea669,'arrayLength':_0x2be1c3,'width':this['morphTextu'+'reWidth'],'height':this['morphTextu'+'reHeight'],'format':_0x405a47,'cubemap':!(-0x15*0x9d+0x118d*-0x2+0x2ffc),'mipmaps':!(-0x1a5+-0x303*-0x1+-0x15d),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x4842ac});}}class od{constructor(_0x70eb46){h(this,'used',!(-0xab8+0x81d*-0x2+-0x1*-0x1af3)),(w['assert'](arguments['length']===0x1*-0x21b1+0x1fde+0x1d4),this['options']=_0x70eb46,this['_name']=_0x70eb46['name'],this['_defaultWe'+'ight']=_0x70eb46['defaultWei'+'ght']||0x1177+0x2551+-0x36c8,this['_aabb']=_0x70eb46['aabb'],this['deltaPosit'+'ions']=_0x70eb46['deltaPosit'+'ions'],this['morphPosit'+'ions']=!!_0x70eb46['deltaPosit'+'ions'],this['morphNorma'+'ls']=!!_0x70eb46['deltaNorma'+'ls']);}get['name'](){return this['_name'];}get['defaultWei'+'ght'](){return this['_defaultWe'+'ight'];}get['aabb'](){return this['_aabb']||(this['_aabb']=new De(),this['deltaPosit'+'ions']&&this['_aabb']['compute'](this['deltaPosit'+'ions'])),this['_aabb'];}['clone'](){return w['assert'](this['options'],'MorphTarge'+'t\x20cannot\x20b'+'e\x20cloned,\x20'+'was\x20it\x20cre'+'ated\x20with\x20'+'a\x20preserve'+'Data\x20optio'+'n?'),new od(this['options']);}['_postInit'](){this['options']['preserveDa'+'ta']||(this['options']=null),this['used']=!(0x4*0xa1+-0xb66+0x17b*0x6);}}let Ei,T_=-0xa9a+-0x25*0xad+0x239c;const ce=-0x1*0xb66+0x2e3*-0xd+0x30f1,Xd=new te(),qd=new te(),ti=new D(),tt=new D(),Fs=new D(),Ia=new D(),ns=new D(),_t=new D(),La=new D(),Ra=new D(),ro=new D(),w_=new D(),zt=new D(),Ql=new D(),Rr=new D();function on(_0x5b369c){return _0x5b369c-Math['floor'](_0x5b369c);}function Db(_0x5a346f){return Math['max'](Math['min'](_0x5a346f,0x1*0x2327+0x117c*-0x1+0x77*-0x26),-0x23b3+-0x1e4f+0x1f1*0x22);}function jd(_0xa32e0e,_0x290941){return _0xa32e0e-_0x290941*Math['floor'](_0xa32e0e/_0x290941);}function Ib(_0x202c90){let _0x5b5cfa=on(_0x202c90),_0x50d88a=on((-0x2*-0xecb+0x1*-0x225d+0x5c6*0x1)*_0x202c90),_0x272ca0=on((-0x252*-0x9b+0x228b+0x1186*-0x8)*_0x202c90),_0x357d86=on((0x75e6715+-0x124f0bb5+0x1482eb9f)*_0x202c90);return _0x5b5cfa-=_0x50d88a/(0xc7*0xf+0x10cc+-0x1b76),_0x50d88a-=_0x272ca0/(0x135c+0x140c*0x1+0x2669*-0x1),_0x272ca0-=_0x357d86/(0x19ad+0x1164+-0x435*0xa),_0x357d86-=_0x357d86/(-0x2*-0x1e9+0x10f+-0x3e2),[_0x5b5cfa,_0x50d88a,_0x272ca0,_0x357d86];}function Jl(_0x2bab14){let _0x289189=on(_0x2bab14),_0x56a8e6=on((0x2*0xb6a+-0x10eb+-0x4ea)*_0x2bab14);return _0x289189-=_0x56a8e6/(-0x5*0x4a9+-0x15*-0x1da+-0x2*0x74b),_0x56a8e6-=_0x56a8e6/(0x10d2+-0xb*-0xcf+-0x18b8),[_0x289189,_0x56a8e6];}class Lb{constructor(_0x592d92){this['_emitter']=_0x592d92;}['calcSpawnP'+'osition'](_0xe09a1c,_0x239268,_0x297bf9,_0x55d80a,_0xb5c985){const _0x2b5013=this['_emitter'],_0x19074a=Math['random'](),_0x18ab19=Math['random'](),_0x4479ca=Math['random'](),_0xf38d36=Math['random']();if(_0x2b5013['useCpu']&&(_0xe09a1c[_0xb5c985*ce+(-0x961+0x18d9*0x1+-0xf78)+_0x2b5013['numParticl'+'esPot']*(-0x12*-0xdf+-0x8c9*-0x4+-0x32d0)*ce]=_0x19074a,_0xe09a1c[_0xb5c985*ce+(-0x2158+0x10e7+0x1072*0x1)+_0x2b5013['numParticl'+'esPot']*(0x17bc+-0x1*-0x15d7+-0x2d91)*ce]=_0x18ab19,_0xe09a1c[_0xb5c985*ce+(-0x1405*0x1+-0xd33+0x2*0x109d)+_0x2b5013['numParticl'+'esPot']*(-0x1208+0xb6+-0x4*-0x455)*ce]=_0x4479ca),tt['x']=_0x19074a-(0x624+-0x2*0xa7a+0xed0+0.5),tt['y']=_0x18ab19-(0x1442+-0x1c48+-0x403*-0x2+0.5),tt['z']=_0x4479ca-(-0x5d9*-0x2+0x22af+-0x2e61+0.5),_0x2b5013['emitterSha'+'pe']===ai){const _0x448fa8=Math['max'](Math['abs'](tt['x']),Math['max'](Math['abs'](tt['y']),Math['abs'](tt['z']))),_0x52ad73=_0x448fa8+(0x2f*-0x7e+0x1888+-0x1*0x166+0.5-_0x448fa8)*_0x297bf9[-0x155c+0x360+0x11fc],_0x1f5a42=_0x448fa8+(0x121c+-0x1a77+-0x17*-0x5d+0.5-_0x448fa8)*_0x297bf9[-0x192c+0xad*-0x7+0x1de8],_0x452b89=_0x448fa8+(0x2356*0x1+-0x1efe*0x1+-0x458+0.5-_0x448fa8)*_0x297bf9[0x1ead+-0x25bb+0x710];tt['x']=_0x52ad73*(_0x448fa8===Math['abs'](tt['x'])?Math['sign'](tt['x']):(-0x1*0x1f9+0x7ca*0x1+-0x1*0x5cf)*tt['x']),tt['y']=_0x1f5a42*(_0x448fa8===Math['abs'](tt['y'])?Math['sign'](tt['y']):(-0x17e9+0x2*0x3fd+-0x4d*-0x35)*tt['y']),tt['z']=_0x452b89*(_0x448fa8===Math['abs'](tt['z'])?Math['sign'](tt['z']):(-0xd*0x1e+-0x504+0x68c)*tt['z']),_0x2b5013['localSpace']?ti['copy'](_0x239268['transformP'+'oint'](tt)):ti['copy'](_0x55d80a)['add'](_0x239268['transformP'+'oint'](tt));}else{tt['normalize']();const _0x5628e9=_0x2b5013['emitterRad'+'ius']===0x2*0xbfb+0xef*-0x16+0x2*-0x1b6?-0x2*0x1093+0x12b*0xf+-0x1*-0xfa1:_0x2b5013['emitterRad'+'iusInner']/_0x2b5013['emitterRad'+'ius'],_0x57e9d5=_0xf38d36*(-0x816+0xbb0+-0x399-_0x5628e9)+_0x5628e9;_0x2b5013['localSpace']?ti['copy'](tt['mulScalar'](_0x57e9d5*_0x2b5013['emitterRad'+'ius'])):ti['copy'](_0x55d80a)['add'](tt['mulScalar'](_0x57e9d5*_0x2b5013['emitterRad'+'ius']));}let _0x14bdb6=-Y['lerp'](_0x2b5013['rate'],_0x2b5013['rate2'],_0x19074a)*_0xb5c985;if(_0x2b5013['pack8']){const _0x4d9b0c=(ti['x']-_0x2b5013['worldBound'+'s']['center']['x'])/_0x2b5013['worldBound'+'sSize']['x']+(-0x7*0x557+0x1cc*-0xf+0x4055+0.5),_0x35a476=(ti['y']-_0x2b5013['worldBound'+'s']['center']['y'])/_0x2b5013['worldBound'+'sSize']['y']+(-0x34*-0x68+-0x1c*-0x9+0x46c*-0x5+0.5),_0x2ca0d4=(ti['z']-_0x2b5013['worldBound'+'s']['center']['z'])/_0x2b5013['worldBound'+'sSize']['z']+(0x54e+-0x10b1*0x2+0x1c14+0.5);let _0x4bc45b=Y['lerp'](_0x2b5013['startAngle']*Y['DEG_TO_RAD'],_0x2b5013['startAngle'+'2']*Y['DEG_TO_RAD'],_0x19074a);_0x4bc45b=_0x4bc45b%(Math['PI']*(0x11*-0xc+-0x253a+0x2608))/(Math['PI']*(0x63*0x1+0x3*0x961+-0x1c84));const _0x4b7e6a=Jl(_0x4d9b0c);_0xe09a1c[_0xb5c985*ce]=_0x4b7e6a[-0x229+0x2599+-0x2370],_0xe09a1c[_0xb5c985*ce+(0x1*-0x132d+0x1b02+0x1f5*-0x4)]=_0x4b7e6a[0x53*0x61+0x1e37*0x1+0x59b*-0xb];const _0x4a85c4=Jl(_0x35a476);_0xe09a1c[_0xb5c985*ce+(-0x100b+0x1549*-0x1+0x6*0x639)]=_0x4a85c4[0x1cc+-0x3*-0x27+-0x241*0x1],_0xe09a1c[_0xb5c985*ce+(-0xb3*-0x1b+0x1*-0x1696+0x3b8)]=_0x4a85c4[0x89d+-0x25b9+0x1*0x1d1d];const _0x5d8c8a=Jl(_0x2ca0d4);_0xe09a1c[_0xb5c985*ce+(0x169*-0x4+0x1*-0x92c+0xed0)+_0x2b5013['numParticl'+'esPot']*ce]=_0x5d8c8a[-0x1ebc+-0x2*0x109d+0x2*0x1ffb],_0xe09a1c[_0xb5c985*ce+(0x1ab+0x905*0x1+0x5*-0x223)+_0x2b5013['numParticl'+'esPot']*ce]=_0x5d8c8a[0x20e3+-0x577*-0x3+0x106d*-0x3];const _0x126b54=Jl(_0x4bc45b);_0xe09a1c[_0xb5c985*ce+(0xa3d+-0x5a7+-0x24a*0x2)+_0x2b5013['numParticl'+'esPot']*ce]=_0x126b54[-0x1fe8+0x26ac+-0x6c4*0x1],_0xe09a1c[_0xb5c985*ce+(0x1*0x10f+-0x1f5f+0x1e53)+_0x2b5013['numParticl'+'esPot']*ce]=_0x126b54[0x1*-0x1060+-0x124b*-0x1+0xa*-0x31];const _0x6fd313=0x23c3+-0xa75+-0x194d;_0xe09a1c[_0xb5c985*ce+(-0x43*-0x95+-0x13ad+-0x1*0x134f)+_0x2b5013['numParticl'+'esPot']*ce*(-0x1*0xc9+0x1e24+-0x1d59)]=_0x6fd313;const _0x5cff9e=Math['max'](_0x2b5013['lifetime'],(_0x2b5013['numParticl'+'es']-(-0x5af+-0x6b2+0xc62))*Math['max'](_0x2b5013['rate'],_0x2b5013['rate2'])),_0x1f9d8b=_0x2b5013['lifetime']+(0x26+0x1*0x93c+0x7*-0x157);_0x14bdb6=(_0x14bdb6+_0x5cff9e)/(_0x5cff9e+_0x1f9d8b);const _0x13b430=Ib(_0x14bdb6);_0xe09a1c[_0xb5c985*ce+(-0x2*0x543+-0xdb0*0x1+0x1836)+_0x2b5013['numParticl'+'esPot']*ce*(-0x1*-0xecf+-0x1e47+0xf7b)]=_0x13b430[-0xbd7+-0x43c+0x1013],_0xe09a1c[_0xb5c985*ce+(-0x1e*0x7b+-0xa8a+0x18f5)+_0x2b5013['numParticl'+'esPot']*ce*(0x7*0x2f+-0x33*-0x79+-0x59*0x49)]=_0x13b430[-0x946+0x31*0x61+-0x94a*0x1],_0xe09a1c[_0xb5c985*ce+(0x380+-0x20ba+0x1d3c)+_0x2b5013['numParticl'+'esPot']*ce*(0xd0f*-0x1+0x1d04+-0xff2)]=_0x13b430[-0x1f8c+-0xeca+0x2e58],_0xe09a1c[_0xb5c985*ce+(0x31*-0x81+0x1*0x4d0+0x13e4)+_0x2b5013['numParticl'+'esPot']*ce*(0x27*0x6c+0x15a*0xb+-0x1f4f)]=_0x13b430[-0x1cf5+0x35b*0x2+-0x2*-0xb21];}else _0xe09a1c[_0xb5c985*ce]=ti['x'],_0xe09a1c[_0xb5c985*ce+(-0x59*0x47+-0x18b9+-0x70f*-0x7)]=ti['y'],_0xe09a1c[_0xb5c985*ce+(-0x27*-0xed+-0x82*-0x3e+-0x4395)]=ti['z'],_0xe09a1c[_0xb5c985*ce+(-0x3c0+0x1a6*0x1+0x21d)]=Y['lerp'](_0x2b5013['startAngle']*Y['DEG_TO_RAD'],_0x2b5013['startAngle'+'2']*Y['DEG_TO_RAD'],_0x19074a),_0xe09a1c[_0xb5c985*ce+(-0x1034+-0x1c0d+-0x4*-0xb11)+_0x2b5013['numParticl'+'esPot']*ce]=_0x14bdb6;}['update'](_0x386753,_0x1b2cfe,_0x241b17,_0x183a6b,_0x3629ea,_0x59d776,_0x5d7f16,_0xdce1da){let _0x3df55a,_0x1db9b6,_0x176254;const _0x5dcc83=this['_emitter'];if(_0x5dcc83['meshInstan'+'ce']['node']){const _0x589d83=_0x5dcc83['meshInstan'+'ce']['node']['worldTrans'+'form'];for(let _0x2ed935=0x16b2+0x149*0x7+-0x1fb1;_0x2ed935<0x3*0x2a5+0x1*0x24f3+0x779*-0x6;_0x2ed935++)Xd['data'][_0x2ed935]=_0x589d83['data'][_0x2ed935];qd['copy'](Xd),qd['invert'](),Ei=_0x5dcc83['meshInstan'+'ce']['node']['localScale'],T_=Math['max'](Math['max'](Ei['x'],Ei['y']),Ei['z']);}_0x59d776=_0x5dcc83['meshInstan'+'ce']['node']===null||_0x5dcc83['localSpace']?D['ZERO']:_0x5dcc83['meshInstan'+'ce']['node']['getPositio'+'n']();const _0x54f194=_0x5dcc83['camera']?_0x5dcc83['camera']['_node']['getPositio'+'n']():D['ZERO'],_0x565778=_0x5dcc83['useMesh']?-0x230*-0xa+-0xd30+-0x89f:-0x1211+0x312+0xf0e*0x1;let _0x122121,_0x1286d3,_0x29e967,_0x363325,_0x3c28c7,_0x41e535,_0x43e533,_0x1c291b,_0x14ae30;const _0x40c6c5=_0x5dcc83['precision']-(-0x2285+-0x931*-0x2+0x1024);for(let _0xe04650=0x1*0xe99+0x1*0x1f01+-0xd*0x382;_0xe04650<_0x5dcc83['numParticl'+'es'];_0xe04650++){const _0x56f00d=Math['floor'](_0x5dcc83['vbCPU'][_0xe04650*_0x5dcc83['numParticl'+'eVerts']*(_0x5dcc83['useMesh']?0x23cd+-0x1*-0x2001+0x24*-0x1e2:-0x2444+0x17*-0x49+-0x3e5*-0xb)+(0x88*-0x5+0xcdb*0x2+-0x1*0x170b)]),_0x53d614=_0x241b17[_0x56f00d*ce+(0x1d*0x51+-0x1*0x14d4+0xba7)+_0x5dcc83['numParticl'+'esPot']*(-0x22e6+0x1*0x827+-0x9*-0x2f9)*ce];Fs['x']=_0x53d614,Fs['y']=_0x241b17[_0x56f00d*ce+(-0xf7d+0x4*0x139+0xa9a)+_0x5dcc83['numParticl'+'esPot']*(0x1740*0x1+0x1*-0xa1f+0x1*-0xd1f)*ce],Fs['z']=_0x241b17[_0x56f00d*ce+(0x6c9+0x1ae8+0x1*-0x21af)+_0x5dcc83['numParticl'+'esPot']*(-0x4*-0x5da+-0xf66+-0x40*0x20)*ce];const _0x10fb62=_0x5dcc83['rate']+(_0x5dcc83['rate2']-_0x5dcc83['rate'])*_0x53d614,_0x1d318f=_0x5dcc83['lifetime'];let _0x437fed=_0x241b17[_0x56f00d*ce+(0x1773+-0x3e1+-0x138f)+_0x5dcc83['numParticl'+'esPot']*ce]+_0x5d7f16;const _0x297e10=Db(_0x437fed/_0x1d318f);let _0x1bf68e=-0x21c2+-0x13fa+0x2d4*0x13,_0x3aed8f=-0x4ca*0x1+-0x6e5*-0x1+-0x21b;const _0x5d230b=0x1*0x2e3+-0x19*-0x135+0x170*-0x17;(_0x437fed-_0x5d7f16<=0x14d*-0x9+0x6f*-0x12+0x1383||_0x437fed>=_0x1d318f)&&this['calcSpawnP'+'osition'](_0x241b17,_0x183a6b,_0x3629ea,_0x59d776,_0x56f00d);let _0x2babdb=_0x437fed>0x1047+0x11f9+-0x89*0x40&&_0x437fed<_0x1d318f;_0x2babdb&&(_0x176254=_0x297e10*_0x40c6c5,_0x122121=Math['floor'](_0x176254),_0x1286d3=Math['ceil'](_0x176254),_0x176254%=-0x116*0x20+-0x650+0x2911,_0x3df55a=_0x5dcc83['qRotSpeed'][_0x122121],_0x1db9b6=_0x5dcc83['qRotSpeed'][_0x1286d3],_0x29e967=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qRotSpeed2'][_0x122121],_0x1db9b6=_0x5dcc83['qRotSpeed2'][_0x1286d3],_0x363325=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qScale'][_0x122121],_0x1db9b6=_0x5dcc83['qScale'][_0x1286d3],_0x1bf68e=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qScale2'][_0x122121],_0x1db9b6=_0x5dcc83['qScale2'][_0x1286d3],_0x3c28c7=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qAlpha'][_0x122121],_0x1db9b6=_0x5dcc83['qAlpha'][_0x1286d3],_0x41e535=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qAlpha2'][_0x122121],_0x1db9b6=_0x5dcc83['qAlpha2'][_0x1286d3],_0x43e533=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qRadialSpe'+'ed'][_0x122121],_0x1db9b6=_0x5dcc83['qRadialSpe'+'ed'][_0x1286d3],_0x1c291b=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qRadialSpe'+'ed2'][_0x122121],_0x1db9b6=_0x5dcc83['qRadialSpe'+'ed2'][_0x1286d3],_0x14ae30=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x1c291b+=(_0x14ae30-_0x1c291b)*(_0x53d614*(-0x381+0xc*-0x298+-0x5*-0x701)%(0x7*0x32f+0x4f*0x61+-0x3437)),Ia['x']=_0x241b17[_0x56f00d*ce],Ia['y']=_0x241b17[_0x56f00d*ce+(0x25c2+0xa22+-0x2fe3)],Ia['z']=_0x241b17[_0x56f00d*ce+(-0x14c1+0x7cb+0xcf8)],_0x5dcc83['localSpace']?ro['copy'](Ia):ro['copy'](Ia)['sub'](_0x59d776),ro['normalize']()['mulScalar'](_0x1c291b),_0x122121*=-0x1*0x11ea+0x1*-0x1357+-0x2544*-0x1,_0x1286d3*=0x26d6+-0x2399+-0x33a,_0x3df55a=_0x5dcc83['qLocalVelo'+'city'][_0x122121],_0x1db9b6=_0x5dcc83['qLocalVelo'+'city'][_0x1286d3],_t['x']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qLocalVelo'+'city'][_0x122121+(-0x1*0x1873+-0x148e+0x2d02)],_0x1db9b6=_0x5dcc83['qLocalVelo'+'city'][_0x1286d3+(-0x1d74+-0x1dc3+0x3b38)],_t['y']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qLocalVelo'+'city'][_0x122121+(0x1cb+-0x1412+0x1*0x1249)],_0x1db9b6=_0x5dcc83['qLocalVelo'+'city'][_0x1286d3+(-0x8e5*-0x1+0x18e2+0x299*-0xd)],_t['z']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qLocalVelo'+'city2'][_0x122121],_0x1db9b6=_0x5dcc83['qLocalVelo'+'city2'][_0x1286d3],Ra['x']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qLocalVelo'+'city2'][_0x122121+(-0xd76+0x1f53+-0x4*0x477)],_0x1db9b6=_0x5dcc83['qLocalVelo'+'city2'][_0x1286d3+(0x1*-0x7f+0x1271+-0x5fb*0x3)],Ra['y']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qLocalVelo'+'city2'][_0x122121+(-0x2*-0x241+0x2125+-0x25a5)],_0x1db9b6=_0x5dcc83['qLocalVelo'+'city2'][_0x1286d3+(0x54*0x5f+0x20b7+-0x3fe1)],Ra['z']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qVelocity'][_0x122121],_0x1db9b6=_0x5dcc83['qVelocity'][_0x1286d3],ns['x']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qVelocity'][_0x122121+(-0x7fd*0x2+-0x29*-0xb5+0x6*-0x22b)],_0x1db9b6=_0x5dcc83['qVelocity'][_0x1286d3+(-0x1edb+-0x18fe*-0x1+0x2*0x2ef)],ns['y']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qVelocity'][_0x122121+(-0x421*0x7+0x1714+0x1*0x5d5)],_0x1db9b6=_0x5dcc83['qVelocity'][_0x1286d3+(0x26f6*0x1+0x1954+0x4048*-0x1)],ns['z']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qVelocity2'][_0x122121],_0x1db9b6=_0x5dcc83['qVelocity2'][_0x1286d3],La['x']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qVelocity2'][_0x122121+(-0xcd4+0x2*0x126f+-0x1809)],_0x1db9b6=_0x5dcc83['qVelocity2'][_0x1286d3+(0x26b*0xb+-0x507+0x1*-0x1591)],La['y']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_0x3df55a=_0x5dcc83['qVelocity2'][_0x122121+(-0xcf5*0x2+0x52b+0x15*0xfd)],_0x1db9b6=_0x5dcc83['qVelocity2'][_0x1286d3+(0x2*-0x25d+-0x1d*-0xc9+0x51*-0x39)],La['z']=_0x3df55a+(_0x1db9b6-_0x3df55a)*_0x176254,_t['x']+=(Ra['x']-_t['x'])*Fs['x'],_t['y']+=(Ra['y']-_t['y'])*Fs['y'],_t['z']+=(Ra['z']-_t['z'])*Fs['z'],_0x5dcc83['initialVel'+'ocity']>0x6be*0x5+-0x1e20*-0x1+-0x3fd6&&(_0x5dcc83['emitterSha'+'pe']===rw?(tt['copy'](Fs)['mulScalar'](0x385*-0x5+0xbb9*-0x1+0x1d54)['sub'](D['ONE'])['normalize'](),_t['add'](tt['mulScalar'](_0x5dcc83['initialVel'+'ocity']))):_t['add'](D['FORWARD']['mulScalar'](_0x5dcc83['initialVel'+'ocity']))),ns['x']+=(La['x']-ns['x'])*Fs['x'],ns['y']+=(La['y']-ns['y'])*Fs['y'],ns['z']+=(La['z']-ns['z'])*Fs['z'],_0x29e967+=(_0x363325-_0x29e967)*Fs['y'],_0x1bf68e=(_0x1bf68e+(_0x3c28c7-_0x1bf68e)*(_0x53d614*(0x26da+-0x16e1*-0x2+-0x2c*0x109)%(-0x14e9+-0x17d9+0x2cc3)))*T_,_0x3aed8f=(_0x43e533-_0x41e535)*(_0x53d614*(0xa0c*-0x1+0xd25+0xcf)%(0x1*0x36d+-0x1733+-0x53*-0x3d)),_0x5dcc83['meshInstan'+'ce']['node']&&(_0x5dcc83['localSpace']?(_t['x']/=Ei['x'],_t['y']/=Ei['y'],_t['z']/=Ei['z']):Xd['transformP'+'oint'](_t,_t)),_0x5dcc83['localSpace']?(qd['transformP'+'oint'](ns,ns),_t['add'](ns)['add'](ro)):(_t['add'](ns['mul'](Ei)),_t['add'](ro['mul'](Ei))),Ql['copy'](_t),w_['copy'](Ia)['add'](_t['mulScalar'](_0x5d7f16)),zt['copy'](w_),_0x241b17[_0x56f00d*ce]=zt['x'],_0x241b17[_0x56f00d*ce+(0x1c6b+-0x145f+-0x1*0x80b)]=zt['y'],_0x241b17[_0x56f00d*ce+(-0x10b4+-0x2114+0x2*0x18e5)]=zt['z'],_0x241b17[_0x56f00d*ce+(-0x235*-0x11+-0x2638+0xb6)]+=_0x29e967*_0x5d7f16,_0x5dcc83['wrap']&&_0x5dcc83['wrapBounds']&&(_0x5dcc83['localSpace']||zt['sub'](_0x59d776),zt['x']=jd(zt['x'],_0x5dcc83['wrapBounds']['x'])-_0x5dcc83['wrapBounds']['x']*(0x2*-0x113+0x7a7*0x1+0x1*-0x581+0.5),zt['y']=jd(zt['y'],_0x5dcc83['wrapBounds']['y'])-_0x5dcc83['wrapBounds']['y']*(0x491+0x3e5*0x1+-0x876+0.5),zt['z']=jd(zt['z'],_0x5dcc83['wrapBounds']['z'])-_0x5dcc83['wrapBounds']['z']*(-0x1*0x1286+-0x13c3*-0x1+-0x1*0x13d+0.5),_0x5dcc83['localSpace']||zt['add'](_0x59d776)),_0x5dcc83['sort']>-0x1c7d+0x6a*-0x2e+-0x2f89*-0x1&&(_0x5dcc83['sort']===-0x10fd+-0xa06*-0x2+-0x30e?(Rr['copy'](zt)['sub'](_0x54f194),_0x5dcc83['particleDi'+'stance'][_0x56f00d]=-(Rr['x']*Rr['x']+Rr['y']*Rr['y']+Rr['z']*Rr['z'])):_0x5dcc83['sort']===0x1420+0x9d5+0x1df3*-0x1?_0x5dcc83['particleDi'+'stance'][_0x56f00d]=_0x437fed:_0x5dcc83['sort']===0x1*0x1bd7+-0x1d8c+0x1b8&&(_0x5dcc83['particleDi'+'stance'][_0x56f00d]=-_0x437fed))),_0xdce1da?_0x437fed<0xf80+-0x13*-0x135+-0x266f&&(_0x241b17[_0x56f00d*ce+(-0xc85*0x1+0x2505+-0x187d)+_0x5dcc83['numParticl'+'esPot']*(0x1c74+0x1*0x254f+-0x41c1)*ce]=-(0x4ce+0xf3b+-0x281*0x8)):(_0x437fed>=_0x1d318f&&(_0x437fed-=Math['max'](_0x1d318f,(_0x5dcc83['numParticl'+'es']-(-0x12*0x3+-0xd3*0x1d+0x405*0x6))*_0x10fb62),_0x241b17[_0x56f00d*ce+(-0x25d+0x1*-0xc51+0xeb1)+_0x5dcc83['numParticl'+'esPot']*(0x8*0x431+0xb9*-0xd+-0x1*0x1821)*ce]=_0x5dcc83['loop']?-0x26f5+-0x1073+0x3769:-(0x6d2*-0x3+-0x51b*0x7+0x3834)),_0x437fed<-0x1152+0x97*-0xb+0x17cf&&_0x5dcc83['loop']&&(_0x241b17[_0x56f00d*ce+(-0xa01*0x3+-0x2083+0x3e89)+_0x5dcc83['numParticl'+'esPot']*(0xbf*0x24+-0xd09+-0xdd1)*ce]=-0x1e8f+-0xce*0x7+0x2432)),_0x241b17[_0x56f00d*ce+(0x15*0x82+-0x1*0x1e62+0x13bb)+_0x5dcc83['numParticl'+'esPot']*(0x140f+0x1*-0x26b1+-0x952*-0x2)*ce]<-0xad6+-0x2633+0x3109&&(_0x2babdb=!(-0x6fa*0x4+-0x162f+-0xc86*-0x4)),_0x241b17[_0x56f00d*ce+(-0x79*0x5+-0x434*0x8+-0x300*-0xc)+_0x5dcc83['numParticl'+'esPot']*ce]=_0x437fed;for(let _0x507e11=0x2aa+0x1e0e+0x6*-0x574;_0x507e11<_0x5dcc83['numParticl'+'eVerts'];_0x507e11++){const _0x3acffc=(_0xe04650*_0x5dcc83['numParticl'+'eVerts']+_0x507e11)*(_0x5dcc83['useMesh']?0x85f+-0x786+-0xd3:0x2*-0x3eb+0x4*-0x2e3+0x1366);let _0x555ac1=_0x5dcc83['vbCPU'][_0x3acffc],_0x17b7f1=_0x5dcc83['vbCPU'][_0x3acffc+(0x1205+0x21d4+-0x33d8)],_0x4c986d=_0x5dcc83['vbCPU'][_0x3acffc+(-0x6e9+0x1*-0x236b+0x152b*0x2)];_0x2babdb||(_0x555ac1=_0x17b7f1=_0x4c986d=0x67*-0x39+-0x135+-0x4*-0x609);const _0x2deb2b=_0xe04650*_0x5dcc83['numParticl'+'eVerts']*_0x565778+_0x507e11*_0x565778;_0x386753[_0x2deb2b]=zt['x'],_0x386753[_0x2deb2b+(0x1*-0xdf0+0x8e3+-0x50e*-0x1)]=zt['y'],_0x386753[_0x2deb2b+(-0x9*0x2a7+0x2db+0x1506)]=zt['z'],_0x386753[_0x2deb2b+(0x13*-0x29+-0xf61+0x126f)]=_0x297e10,_0x386753[_0x2deb2b+(-0x7c9*-0x4+-0x2*-0x1dd+-0x22da)]=_0x5dcc83['alignToMot'+'ion']?_0x5d230b:_0x241b17[_0x56f00d*ce+(-0xf*0x50+-0x26aa*0x1+-0x11*-0x28d)],_0x386753[_0x2deb2b+(0x2*-0xe+0x19eb+-0x1*0x19ca)]=_0x1bf68e,_0x386753[_0x2deb2b+(-0x1f*-0xab+0x723+-0x1bd2)]=_0x3aed8f,_0x386753[_0x2deb2b+(-0x1202+0x1*0x2056+0x1*-0xe4d)]=Ql['x'],_0x386753[_0x2deb2b+(-0x266c+0x4a*0x74+0x4ec)]=_0x555ac1,_0x386753[_0x2deb2b+(-0x26ea+-0x775*0x5+0x4c3c)]=_0x17b7f1,_0x386753[_0x2deb2b+(-0xbd8+-0x5*-0x7b7+-0x1*0x1ab1)]=_0x4c986d,_0x386753[_0x2deb2b+(0x1aa8+-0x4*0x959+-0xac7*-0x1)]=Ql['y'],_0x386753[_0x2deb2b+(0x1a90+0x1*0x2237+-0x3cbb)]=_0x56f00d,_0x386753[_0x2deb2b+(-0xfe2+0xb08+0x4e7)]=Ql['z'],_0x386753[_0x2deb2b+(-0x2*-0x7db+-0x1055*0x1+0xad)]=_0x5dcc83['vbCPU'][_0x3acffc+(-0xa71+-0x1fb5*0x1+-0x2a29*-0x1)],_0x5dcc83['useMesh']&&(_0x386753[_0x2deb2b+(0x616+-0x141b*-0x1+-0x1a22)]=_0x5dcc83['vbCPU'][_0x3acffc+(0x27*-0xf2+-0x1fdf+0x1*0x44c1)],_0x386753[_0x2deb2b+(0x17b*-0x2+-0x1*-0x1813+-0x1*0x150d)]=_0x5dcc83['vbCPU'][_0x3acffc+(-0x5cc+-0x21df+0xa*0x3f8)]);}}if(_0x5dcc83['sort']>Of&&_0x5dcc83['camera']){const _0x20009d=_0x5dcc83['useMesh']?0x16f4+-0xc9b+0x1*-0xa53:0x1ff0+0x1201*0x1+-0x31ed*0x1,_0x454501=_0x5dcc83['particleDi'+'stance'];for(let _0x527bcd=-0x208e+-0x285+-0x7b*-0x49;_0x527bcd<_0x5dcc83['numParticl'+'es'];_0x527bcd++)_0x1b2cfe[_0x527bcd][-0x4b0+-0x4*-0x50b+0x1*-0xf7c]=_0x527bcd,_0x1b2cfe[_0x527bcd][-0x2618+0x2*-0x99b+0x394f]=_0x454501[Math['floor'](_0x5dcc83['vbCPU'][_0x527bcd*_0x5dcc83['numParticl'+'eVerts']*_0x20009d+(0x1c07+-0x1ff0*-0x1+0x1*-0x3bf4)])];_0x5dcc83['vbOld']['set'](_0x5dcc83['vbCPU']),_0x1b2cfe['sort']((_0x746ac6,_0x4f49bc)=>_0x746ac6[-0x1*-0x1159+0x13*0xb5+-0x1ec7*0x1]-_0x4f49bc[-0x1*-0x16a7+0x4*0x995+-0x3cfa*0x1]);for(let _0x190595=0x5*-0x506+-0x23a2+0xa2*0x60;_0x190595<_0x5dcc83['numParticl'+'es'];_0x190595++){const _0x4760e1=_0x1b2cfe[_0x190595][-0x11f2+-0x259b*-0x1+-0x13a9]*_0x5dcc83['numParticl'+'eVerts']*_0x20009d,_0x1bd74c=_0x190595*_0x5dcc83['numParticl'+'eVerts']*_0x20009d;for(let _0x320a52=0x1*-0xd75+0x2615+-0x1*0x18a0;_0x320a52<_0x5dcc83['numParticl'+'eVerts']*_0x20009d;_0x320a52++)_0x5dcc83['vbCPU'][_0x1bd74c+_0x320a52]=_0x5dcc83['vbOld'][_0x4760e1+_0x320a52];}}}}const E_=new _i(),b_=new _i(),A_=new _i();class Rb{constructor(_0x55f0a2,_0x562166){this['_emitter']=_0x55f0a2,this['frameRando'+'mUniform']=new Float32Array(0x1*0x229e+0x10ba+0x11*-0x305),this['emitterPos'+'Uniform']=new Float32Array(-0x1855+0xca+0x25b*0xa),this['emitterSca'+'leUniform']=new Float32Array([0x35*0x3+0xa19+0x1*-0xab7,0x89b+-0x198d+0x1*0x10f3,-0x35*-0xb6+0x833*-0x1+-0x1d7a]),this['worldBound'+'sMulUnifor'+'m']=new Float32Array(0xc*-0x209+-0x12f4+0x17f*0x1d),this['worldBound'+'sAddUnifor'+'m']=new Float32Array(-0x219c+-0x208c+0x422b),this['inBoundsSi'+'zeUniform']=new Float32Array(0x7bb+0xb8+-0x870),this['inBoundsCe'+'nterUnifor'+'m']=new Float32Array(-0x120a+0x2b3*0x1+-0x189*-0xa),this['constantPa'+'rticleTexI'+'N']=_0x562166['scope']['resolve']('particleTe'+'xIN'),this['constantPa'+'rticleTexO'+'UT']=_0x562166['scope']['resolve']('particleTe'+'xOUT'),this['constantEm'+'itterPos']=_0x562166['scope']['resolve']('emitterPos'),this['constantEm'+'itterScale']=_0x562166['scope']['resolve']('emitterSca'+'le'),this['constantSp'+'awnBounds']=_0x562166['scope']['resolve']('spawnBound'+'s'),this['constantSp'+'awnPosInne'+'rRatio']=_0x562166['scope']['resolve']('spawnPosIn'+'nerRatio'),this['constantSp'+'awnBoundsS'+'phere']=_0x562166['scope']['resolve']('spawnBound'+'sSphere'),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']=_0x562166['scope']['resolve']('spawnBound'+'sSphereInn'+'erRatio'),this['constantIn'+'itialVeloc'+'ity']=_0x562166['scope']['resolve']('initialVel'+'ocity'),this['constantFr'+'ameRandom']=_0x562166['scope']['resolve']('frameRando'+'m'),this['constantDe'+'lta']=_0x562166['scope']['resolve']('delta'),this['constantRa'+'te']=_0x562166['scope']['resolve']('rate'),this['constantRa'+'teDiv']=_0x562166['scope']['resolve']('rateDiv'),this['constantLi'+'fetime']=_0x562166['scope']['resolve']('lifetime'),this['constantGr'+'aphSampleS'+'ize']=_0x562166['scope']['resolve']('graphSampl'+'eSize'),this['constantGr'+'aphNumSamp'+'les']=_0x562166['scope']['resolve']('graphNumSa'+'mples'),this['constantIn'+'ternalTex0']=_0x562166['scope']['resolve']('internalTe'+'x0'),this['constantIn'+'ternalTex1']=_0x562166['scope']['resolve']('internalTe'+'x1'),this['constantIn'+'ternalTex2']=_0x562166['scope']['resolve']('internalTe'+'x2'),this['constantIn'+'ternalTex3']=_0x562166['scope']['resolve']('internalTe'+'x3'),this['constantEm'+'itterMatri'+'x']=_0x562166['scope']['resolve']('emitterMat'+'rix'),this['constantEm'+'itterMatri'+'xInv']=_0x562166['scope']['resolve']('emitterMat'+'rixInv'),this['constantNu'+'mParticles']=_0x562166['scope']['resolve']('numParticl'+'es'),this['constantNu'+'mParticles'+'Pot']=_0x562166['scope']['resolve']('numParticl'+'esPot'),this['constantLo'+'calVelocit'+'yDivMult']=_0x562166['scope']['resolve']('localVeloc'+'ityDivMult'),this['constantVe'+'locityDivM'+'ult']=_0x562166['scope']['resolve']('velocityDi'+'vMult'),this['constantRo'+'tSpeedDivM'+'ult']=_0x562166['scope']['resolve']('rotSpeedDi'+'vMult'),this['constantSe'+'ed']=_0x562166['scope']['resolve']('seed'),this['constantSt'+'artAngle']=_0x562166['scope']['resolve']('startAngle'),this['constantSt'+'artAngle2']=_0x562166['scope']['resolve']('startAngle'+'2'),this['constantOu'+'tBoundsMul']=_0x562166['scope']['resolve']('outBoundsM'+'ul'),this['constantOu'+'tBoundsAdd']=_0x562166['scope']['resolve']('outBoundsA'+'dd'),this['constantIn'+'BoundsSize']=_0x562166['scope']['resolve']('inBoundsSi'+'ze'),this['constantIn'+'BoundsCent'+'er']=_0x562166['scope']['resolve']('inBoundsCe'+'nter'),this['constantMa'+'xVel']=_0x562166['scope']['resolve']('maxVel'),this['constantFa'+'ceTangent']=_0x562166['scope']['resolve']('faceTangen'+'t'),this['constantFa'+'ceBinorm']=_0x562166['scope']['resolve']('faceBinorm');}['_setInputB'+'ounds'](){this['inBoundsSi'+'zeUniform'][-0x61d*0x4+-0x2c7+0x1*0x1b3b]=this['_emitter']['prevWorldB'+'oundsSize']['x'],this['inBoundsSi'+'zeUniform'][-0x2e8+0xa70*0x3+-0x1c67]=this['_emitter']['prevWorldB'+'oundsSize']['y'],this['inBoundsSi'+'zeUniform'][-0x1050+0x9d6*0x3+-0xd30]=this['_emitter']['prevWorldB'+'oundsSize']['z'],this['constantIn'+'BoundsSize']['setValue'](this['inBoundsSi'+'zeUniform']),this['inBoundsCe'+'nterUnifor'+'m'][0x1*-0xf7c+0x2d1*-0x5+0x1*0x1d91]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['x'],this['inBoundsCe'+'nterUnifor'+'m'][0xf2e+-0x14ae+0x1*0x581]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['y'],this['inBoundsCe'+'nterUnifor'+'m'][0x124f*-0x1+-0x5f2+0x1843*0x1]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['z'],this['constantIn'+'BoundsCent'+'er']['setValue'](this['inBoundsCe'+'nterUnifor'+'m']);}['randomize'](){this['frameRando'+'mUniform'][0x25e3+-0x579+-0x567*0x6]=Math['random'](),this['frameRando'+'mUniform'][-0x5d7*-0x3+-0x761*0x2+0x2*-0x161]=Math['random'](),this['frameRando'+'mUniform'][0x4b*-0x65+0x8*0x458+-0x527]=Math['random']();}['update'](_0x354487,_0x486e58,_0x204b8c,_0x789a6d,_0x27e347){Q['pushGpuMar'+'ker'](_0x354487,'ParticleGP'+'U');const _0x42800d=this['_emitter'];_0x354487['setBlendSt'+'ate'](pt['NOBLEND']),_0x354487['setDepthSt'+'ate'](Yt['NODEPTH']),_0x354487['setCullMod'+'e'](bt),this['randomize'](),this['constantGr'+'aphSampleS'+'ize']['setValue']((-0x1e0*-0x12+-0xa99*0x2+-0xc8d)/_0x42800d['precision']),this['constantGr'+'aphNumSamp'+'les']['setValue'](_0x42800d['precision']),this['constantNu'+'mParticles']['setValue'](_0x42800d['numParticl'+'es']),this['constantNu'+'mParticles'+'Pot']['setValue'](_0x42800d['numParticl'+'esPot']),this['constantIn'+'ternalTex0']['setValue'](_0x42800d['internalTe'+'x0']),this['constantIn'+'ternalTex1']['setValue'](_0x42800d['internalTe'+'x1']),this['constantIn'+'ternalTex2']['setValue'](_0x42800d['internalTe'+'x2']),this['constantIn'+'ternalTex3']['setValue'](_0x42800d['internalTe'+'x3']);const _0x186f26=_0x42800d['meshInstan'+'ce']['node'],_0x49cb72=_0x186f26===null?D['ONE']:_0x186f26['localScale'];if(_0x42800d['pack8']){this['worldBound'+'sMulUnifor'+'m'][-0x266*-0x2+0xea2+-0x136e]=_0x42800d['worldBound'+'sMul']['x'],this['worldBound'+'sMulUnifor'+'m'][-0x1*0x1d3+-0x153d*-0x1+-0x1369]=_0x42800d['worldBound'+'sMul']['y'],this['worldBound'+'sMulUnifor'+'m'][0x2138+-0xa*0x184+-0x2*0x907]=_0x42800d['worldBound'+'sMul']['z'],this['constantOu'+'tBoundsMul']['setValue'](this['worldBound'+'sMulUnifor'+'m']),this['worldBound'+'sAddUnifor'+'m'][0xd*-0x1ca+-0x269+0x1*0x19ab]=_0x42800d['worldBound'+'sAdd']['x'],this['worldBound'+'sAddUnifor'+'m'][-0x1fe3+0xa*0x114+0x1*0x151c]=_0x42800d['worldBound'+'sAdd']['y'],this['worldBound'+'sAddUnifor'+'m'][-0xe*-0x6b+-0x195f+0x1387]=_0x42800d['worldBound'+'sAdd']['z'],this['constantOu'+'tBoundsAdd']['setValue'](this['worldBound'+'sAddUnifor'+'m']),this['_setInputB'+'ounds']();let _0x3e8da5=_0x42800d['maxVel']*Math['max'](Math['max'](_0x49cb72['x'],_0x49cb72['y']),_0x49cb72['z']);_0x3e8da5=Math['max'](_0x3e8da5,-0x2463+-0x2*-0x1358+0x7*-0x54),this['constantMa'+'xVel']['setValue'](_0x3e8da5);}const _0x473b7d=_0x186f26===null||_0x42800d['localSpace']?D['ZERO']:_0x186f26['getPositio'+'n'](),_0x4bc702=_0x186f26===null?te['IDENTITY']:_0x186f26['getWorldTr'+'ansform']();_0x42800d['emitterSha'+'pe']===ai?(E_['setFromMat'+'4'](_0x486e58),this['constantSp'+'awnBounds']['setValue'](E_['data']),this['constantSp'+'awnPosInne'+'rRatio']['setValue'](_0x204b8c)):(this['constantSp'+'awnBoundsS'+'phere']['setValue'](_0x42800d['emitterRad'+'ius']),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']['setValue'](_0x42800d['emitterRad'+'ius']===-0x1f79+0x22f8+-0x1*0x37f?-0x252+-0x1*-0xe26+-0xbd4:_0x42800d['emitterRad'+'iusInner']/_0x42800d['emitterRad'+'ius'])),this['constantIn'+'itialVeloc'+'ity']['setValue'](_0x42800d['initialVel'+'ocity']),b_['setFromMat'+'4'](_0x4bc702),A_['invertMat4'](_0x4bc702),this['emitterPos'+'Uniform'][0x151e+0x2e9+0x1*-0x1807]=_0x473b7d['x'],this['emitterPos'+'Uniform'][0x1e4a*0x1+0x11d2+-0x301b]=_0x473b7d['y'],this['emitterPos'+'Uniform'][0x202b+-0x1dc3*0x1+-0x266]=_0x473b7d['z'],this['constantEm'+'itterPos']['setValue'](this['emitterPos'+'Uniform']),this['constantFr'+'ameRandom']['setValue'](this['frameRando'+'mUniform']),this['constantDe'+'lta']['setValue'](_0x789a6d),this['constantRa'+'te']['setValue'](_0x42800d['rate']),this['constantRa'+'teDiv']['setValue'](_0x42800d['rate2']-_0x42800d['rate']),this['constantSt'+'artAngle']['setValue'](_0x42800d['startAngle']*Y['DEG_TO_RAD']),this['constantSt'+'artAngle2']['setValue'](_0x42800d['startAngle'+'2']*Y['DEG_TO_RAD']),this['constantSe'+'ed']['setValue'](_0x42800d['seed']),this['constantLi'+'fetime']['setValue'](_0x42800d['lifetime']),this['emitterSca'+'leUniform'][0x6*-0x2f0+-0x1*0x2268+0x1158*0x3]=_0x49cb72['x'],this['emitterSca'+'leUniform'][-0x3*0x962+-0x1*0x215a+-0x14f*-0x2f]=_0x49cb72['y'],this['emitterSca'+'leUniform'][0x26*-0xb8+-0x19da+-0x2*-0x1a96]=_0x49cb72['z'],this['constantEm'+'itterScale']['setValue'](this['emitterSca'+'leUniform']),this['constantEm'+'itterMatri'+'x']['setValue'](b_['data']),this['constantEm'+'itterMatri'+'xInv']['setValue'](A_['data']),this['constantLo'+'calVelocit'+'yDivMult']['setValue'](_0x42800d['localVeloc'+'ityUMax']),this['constantVe'+'locityDivM'+'ult']['setValue'](_0x42800d['velocityUM'+'ax']),this['constantRo'+'tSpeedDivM'+'ult']['setValue'](_0x42800d['rotSpeedUM'+'ax'][0x1af2+0x1d86+-0x3878]);let _0xf8a714=_0x42800d['swapTex']?_0x42800d['particleTe'+'xOUT']:_0x42800d['particleTe'+'xIN'];_0xf8a714=_0x42800d['beenReset']?_0x42800d['particleTe'+'xStart']:_0xf8a714;const _0x3a56b1=_0x42800d['swapTex']?_0x42800d['particleTe'+'xIN']:_0x42800d['particleTe'+'xOUT'];this['constantPa'+'rticleTexI'+'N']['setValue'](_0xf8a714),Tr(_0x354487,_0x42800d['swapTex']?_0x42800d['rtParticle'+'TexIN']:_0x42800d['rtParticle'+'TexOUT'],_0x27e347?_0x42800d['shaderPart'+'icleUpdate'+'OnStop']:_0x42800d['loop']?_0x42800d['shaderPart'+'icleUpdate'+'Respawn']:_0x42800d['shaderPart'+'icleUpdate'+'NoRespawn']),_0x42800d['material']['setParamet'+'er']('particleTe'+'xOUT',_0xf8a714),_0x42800d['material']['setParamet'+'er']('particleTe'+'xIN',_0x3a56b1),_0x42800d['beenReset']=!(0xc7*0x14+-0x14cf+0x544),_0x42800d['swapTex']=!_0x42800d['swapTex'],_0x42800d['prevWorldB'+'oundsSize']['copy'](_0x42800d['worldBound'+'sSize']),_0x42800d['prevWorldB'+'oundsCente'+'r']['copy'](_0x42800d['worldBound'+'s']['center']),_0x42800d['pack8']&&this['_setInputB'+'ounds'](),Q['popGpuMark'+'er'](_0x354487);}}const C_=['NONE','VERTEX','MAP'];class Ob extends pa{['generateKe'+'y'](_0x5d5cef){let _0x11968a='particle_'+pa['definesHas'+'h'](_0x5d5cef['defines'])+'_';for(const _0x490a8d in _0x5d5cef)_0x5d5cef['hasOwnProp'+'erty'](_0x490a8d)&&(_0x11968a+=_0x5d5cef[_0x490a8d]);return _0x11968a;}['createVert'+'exDefines'](_0x467304,_0x23789b){const _0x404f2a=new Map(_0x467304['defines']);return _0x467304['mesh']&&_0x404f2a['set']('USE_MESH',''),_0x467304['meshUv']&&_0x404f2a['set']('USE_MESH_U'+'V',''),_0x467304['localSpace']&&_0x404f2a['set']('LOCAL_SPAC'+'E',''),_0x467304['screenSpac'+'e']&&_0x404f2a['set']('SCREEN_SPA'+'CE',''),_0x467304['animTex']&&_0x404f2a['set']('ANIMTEX',''),_0x467304['soft']>-0x1ecf+0x23c9+-0x4fa&&_0x404f2a['set']('SOFT',''),_0x467304['stretch']>0x1dd7+-0xfa2+-0xe35&&_0x404f2a['set']('STRETCH',''),_0x467304['customFace']&&_0x404f2a['set']('CUSTOM_FAC'+'E',''),_0x467304['pack8']&&_0x404f2a['set']('PACK8',''),_0x467304['localSpace']&&_0x404f2a['set']('LOCAL_SPAC'+'E',''),_0x467304['animTexLoo'+'p']&&_0x404f2a['set']('ANIMTEX_LO'+'OP',''),_0x467304['wrap']&&_0x404f2a['set']('WRAP',''),_0x467304['alignToMot'+'ion']&&_0x404f2a['set']('ALIGN_TO_M'+'OTION',''),_0x404f2a['set']('NORMAL',C_[_0x467304['normal']]),_0x23789b['particle_v'+'ertexData']=Pe,_0x467304['mesh']&&_0x467304['meshUv']&&(_0x23789b['particle_u'+'v']=is),_0x467304['useCpu']&&(_0x23789b['particle_v'+'ertexData2']=$c,_0x23789b['particle_v'+'ertexData3']=Ju,_0x23789b['particle_v'+'ertexData4']=ep,_0x23789b['particle_v'+'ertexData5']=tp),_0x404f2a;}['createFrag'+'mentDefine'+'s'](_0x537e42){const _0x5792aa=new Map(_0x537e42['defines']);return _0x537e42['soft']>0x1*-0x171+0x18*-0x18a+0x2661&&_0x5792aa['set']('SOFT',''),_0x537e42['halflamber'+'t']&&_0x5792aa['set']('HALF_LAMBE'+'RT',''),_0x5792aa['set']('NORMAL',C_[_0x537e42['normal']]),_0x5792aa['set']('BLEND',uy[_0x537e42['blend']]),_0x5792aa;}['createShad'+'erDefiniti'+'on'](_0x3beebb,_0x34e9e6){const _0x412157=_0x3beebb['isWebGPU']?it:Fe,_0x51905d=Ce['get'](_0x3beebb,_0x412157),_0x13ade4={},_0x7f4d8d=this['createVert'+'exDefines'](_0x34e9e6,_0x13ade4),_0x38ba91=this['createFrag'+'mentDefine'+'s'](_0x34e9e6),_0x4f08ac='PARTICLE_'+(_0x34e9e6['useCpu']?'CPU':'GPU')+'\x0a';_0x7f4d8d['set'](_0x4f08ac,''),_0x38ba91['set'](_0x4f08ac,'');const _0x194a8f=new Map(_0x51905d);return Jt['createDefi'+'nition'](_0x3beebb,{'name':'ParticleSh'+'ader','shaderLanguage':_0x412157,'attributes':_0x13ade4,'vertexCode':_0x51905d['get']('particle_s'+'haderVS'),'fragmentCode':_0x51905d['get']('particle_s'+'haderPS'),'fragmentDefines':_0x38ba91,'fragmentIncludes':_0x194a8f,'vertexIncludes':_0x194a8f,'vertexDefines':_0x7f4d8d});}}const Fb=new Ob();class Nb extends er{constructor(_0x1ac7de){super(),h(this,'emitter',null),(this['emitter']=_0x1ac7de,w['assert'](_0x1ac7de));}['getShaderV'+'ariant'](_0x2c76d6){const {device:_0x2117ab,scene:_0x3d6a35,cameraShaderParams:_0x5c1083,objDefs:_0x4f4ce9}=_0x2c76d6,{emitter:_0x341960}=this,_0x5160e2={'defines':$t['getCoreDef'+'ines'](this,_0x2c76d6),'pass':xa,'useCpu':this['emitter']['useCpu'],'normal':_0x341960['lighting']?_0x341960['normalMap']!==null?0x1*-0x1709+-0x24d1+0x3bdc:-0x1b19*0x1+-0x44a+0x1f64:0x269b+0xfc9+-0x3664,'halflambert':this['emitter']['halfLamber'+'t'],'stretch':this['emitter']['stretch'],'alignToMotion':this['emitter']['alignToMot'+'ion'],'soft':this['emitter']['depthSofte'+'ning'],'mesh':this['emitter']['useMesh'],'meshUv':_0x4f4ce9&Rp,'gamma':(_0x5c1083==null?void(0x1*0xcc7+-0x21a+-0xaad):_0x5c1083['shaderOutp'+'utGamma'])??yl,'toneMap':(_0x5c1083==null?void(-0x5*-0x744+0x21*0x20+-0xd7c*0x3):_0x5c1083['toneMappin'+'g'])??Mp,'fog':_0x3d6a35&&!this['emitter']['noFog']?_0x3d6a35['fog']['type']:'none','wrap':this['emitter']['wrap']&&this['emitter']['wrapBounds'],'localSpace':this['emitter']['localSpace'],'screenSpace':_0x341960['inTools']?!(0x2*0x139+0x3*-0x481+0x1a*0x6d):this['emitter']['screenSpac'+'e'],'blend':this['emitter']['blendType'],'animTex':this['emitter']['_isAnimate'+'d'](),'animTexLoop':this['emitter']['animLoop'],'pack8':this['emitter']['pack8'],'customFace':this['emitter']['orientatio'+'n']!==Zc},_0x38a9bf=new rd(_0x2c76d6['viewUnifor'+'mFormat'],_0x2c76d6['viewBindGr'+'oupFormat'],_0x2c76d6['vertexForm'+'at']),_0x2ce35e=Nn(_0x2117ab);return _0x2ce35e['register']('particle',Fb),_0x2ce35e['getProgram']('particle',_0x5160e2,_0x38a9bf,this['userId']);}}const P_=[[-(-0xe8e+-0x2497+-0x3326*-0x1),-(-0x637+0x54a+0x77*0x2)],[-0x2182*-0x1+0x1*-0x17b1+-0x9d0,-(-0x3*-0xbb7+0x1dca+-0x40ee)],[0x531*0x2+0x190a+-0x236b,-0x1*-0x13d9+-0x2529+0x1151],[-(-0x1*0x1206+-0x160+-0x1*-0x1367),0x60f*0x3+-0x261a+-0x2*-0x9f7]];function xs(_0x4b8d16,_0x261f70,_0x3dcf27,_0x4de4d3,_0x2f0a3d=Xt,_0x569e90,_0x5b31d4){let _0x133ca8=Te;_0x5b31d4&&(_0x2f0a3d===Ne||_0x2f0a3d===_s)&&(_0x133ca8=vt);const _0x885e60=new _e(_0x4b8d16,{'width':_0x261f70,'height':_0x3dcf27,'format':_0x2f0a3d,'cubemap':!(-0x1f70+-0x74f+0x26c0),'mipmaps':!(0x188b*-0x1+0x1ae+0x16de*0x1),'minFilter':_0x133ca8,'magFilter':_0x133ca8,'addressU':ue,'addressV':ue,'name':'ParticleSy'+'stemTextur'+'e'}),_0xe9aa34=_0x885e60['lock']();if(_0x2f0a3d===Ne||_0x2f0a3d===_s){const _0x5b6679=new Uint8Array(_0x4de4d3['length']);for(let _0x538a9d=-0x3*0xcec+-0x893+0x2f57;_0x538a9d<_0x4de4d3['length'];_0x538a9d++)_0x5b6679[_0x538a9d]=_0x4de4d3[_0x538a9d]*_0x569e90*(0x5ae+-0x4ab+-0x4);_0x4de4d3=_0x5b6679;}return _0xe9aa34['set'](_0x4de4d3),_0x885e60['unlock'](),_0x885e60;}function M_(_0x447f53){return Math['max'](Math['min'](_0x447f53,0x2450+0x1aa+-0x25f9),-0x2*-0xf9+0x624+-0x2d*0x2e);}const D_=new Xs([0x1c2f+0x1*0x17ab+-0x2*0x19ed,-0x15c5+-0x2*0x5e7+0xbf*0x2d,-0x5e7*0x2+-0x245*0x7+0x5*0x58a,-0xb14+0x20a1+-0x158d]),I_=new Xs([-0x6f2*-0x1+0x20ec+-0x1b*0x17a,-0x2173+0x1*-0x1fa9+0xd3*0x4f,0x11f9+0x2cb*-0x8+0x460,-0x130f+0x21*0x11+0x10df]),L_=new ta([0x1acb+-0x1*-0x1ea1+0x6*-0x992,-0x633+-0x26ad+0x2ce0*0x1,-0x1405+0x2ab*0x9+-0x3fd*0x1,0x414+-0x1*0xb47+0x733],[-0x1c67*-0x1+-0x122e+-0xa39,-0x3*-0x60a+0x2129+-0x3347,-0xec4+0x283+0xc42,0x5c*0x7+0x1f*0xb9+-0x18eb],[-0x15bb+-0x19a4+0x2f5f*0x1,0x122+-0x43*0x1f+0x1*0x6fb,0x25be+0x259d+0x283*-0x1e,-0x212*-0x1+0x2217+0x1*-0x2429]),kb=new ta([0x23e5+-0x1*0x1eef+-0x1*0x4f6,0x2660+0x2639+-0x408*0x13,0x1522+-0x14bb*-0x1+-0x29dc,-0xd2a+-0x46*-0xe+-0x1*-0x957],[-0x508*-0x6+-0x1e7d+0x1*0x4d,-0xca5+-0x753+0x13f9,-0x2501+0x52a*0x7+0xdc,-0x475+0x255a+-0x20e4],[-0x25b0+-0x3*-0x2b4+0xc*0x277,0x11c3+-0x2509+0x1347,0x99+-0x1141+0x10a9,0x4dc+0x1276+-0x1751]);let bi=0x1*0x2472+0x11d9+0xd*-0x42d;const ec=-0x3b*-0x57+0x51b*-0x5+-0x57e*-0x1,Ai=new Float32Array(0x8b*0x3d+0x4e1*0x1+-0x25fd),Or=new te(),R_=new D(),tc=new D(),sc=new D();let Vf,Mc;function he(_0x18914a,_0x54faa3){Mc[_0x18914a]!==void(-0x214f*0x1+-0x17f+0x22ce)&&Mc[_0x18914a]!==null?Vf[_0x18914a]=Mc[_0x18914a]:Vf[_0x18914a]=_0x54faa3;}function jy(_0x33d5e3,_0x2d64cc,_0x4f1b2f){return(_0x33d5e3*(-0x4*-0x82+-0xa*0x3b2+0x23eb)<<0x1232+-0x2088+-0xc2*-0x13|_0x2d64cc*(0x176f*-0x1+-0x53*-0x2+-0x2f9*-0x8)<<0x25f1*-0x1+0x1d*-0x4a+0x2e5b*0x1|_0x4f1b2f*(0x2295*-0x1+-0x3dd+0x2771*0x1))/(0x12ad+-0x7b*-0xe+-0x1966<<0x2*0x12bf+0x2421+-0x1*0x4987);}function O_(_0x1b1081,_0x39d13d){const _0x7066f9=_0x1b1081['length']/(0x1*-0x103f+-0x6d8+0x171a),_0x3ab490=new Array(_0x7066f9*(-0x1098+-0x1b35+-0xe9b*-0x3));for(let _0x5887cd=-0xd81*0x2+-0x2c*0xb5+-0x1d0f*-0x2;_0x5887cd<_0x7066f9;_0x5887cd++)_0x3ab490[_0x5887cd*(0x1*-0xfb7+0x303*0x5+0x1*0xac)]=_0x1b1081[_0x5887cd*(-0x7f0+-0x27*0x44+0x6d*0x2b)],_0x3ab490[_0x5887cd*(0x1906+0x5*0x332+0x147e*-0x2)+(0xd13*-0x1+0xac4+0x250)]=_0x1b1081[_0x5887cd*(-0xc41*-0x2+0x203*-0x9+0x199*-0x4)+(-0x15*0x182+0x2297+-0x2ec)],_0x3ab490[_0x5887cd*(-0x3*-0x98b+0x24e4+-0x4181)+(0xda*0x1d+-0x4*0xa7+0x585*-0x4)]=_0x1b1081[_0x5887cd*(-0x1696+-0x1602*-0x1+0x97*0x1)+(0x143f+-0x4*-0x695+-0x2e91)],_0x3ab490[_0x5887cd*(0x6*-0x296+-0x10*0xc+0x412*0x4)+(0x56e*-0x4+-0x1c00+0x1b7*0x1d)]=jy(_0x39d13d[_0x5887cd*(0x2650+0x8c5+0x19*-0x1e2)],_0x39d13d[_0x5887cd*(-0x1402+-0xaf3*0x3+0x34de)+(0x52*0x28+-0xa55+-0x27a*0x1)],_0x39d13d[_0x5887cd*(-0xb03*0x1+0x2284+-0x177e)+(-0x2361*0x1+-0x383+0x26e6)]);return _0x3ab490;}function Ub(_0x56ec30,_0x4bd4dc){const _0x570ceb=new Array(_0x4bd4dc['length']*(-0x1*0xfb5+-0x221c+0x31d5));for(let _0xf63bdc=-0x16*0x163+0x2338+-0x4b6;_0xf63bdc<_0x4bd4dc['length'];_0xf63bdc++)_0x570ceb[_0xf63bdc*(0x2*0xdf9+-0x621+-0x15cd)]=_0x56ec30[_0xf63bdc*(0x10c8+-0x1d57+0xc92*0x1)],_0x570ceb[_0xf63bdc*(0x20e7*0x1+-0xe7*0x1b+0x886*-0x1)+(0x7f*-0x1+-0xb06+0x1*0xb86)]=_0x56ec30[_0xf63bdc*(-0x3f*-0x25+0x1393+0x29*-0xb3)+(0x14b*-0x9+-0x5*0x7c+-0x9*-0x190)],_0x570ceb[_0xf63bdc*(0x1ec3+0x2329+-0x41e8)+(0x49*0x18+-0x1f5c+0x1886)]=_0x56ec30[_0xf63bdc*(-0x1*-0xa36+-0x796+-0x29d)+(0x74*0x16+0x1*-0x101+-0x8f5)],_0x570ceb[_0xf63bdc*(-0xabf*0x2+0x140a+0x178)+(-0x1154*0x2+-0x126a+0x3515)]=_0x4bd4dc[_0xf63bdc];return _0x570ceb;}function Bb(_0x212149,_0x539ba9,_0x32892e,_0x19fb46,_0x16315c){const _0x2fa687=new Array(_0x212149['length']*(-0x2*0x1+0x66a+-0x664*0x1));for(let _0x3fdc2b=0x286*-0xf+0x1*-0xdfe+0x33d8;_0x3fdc2b<_0x212149['length'];_0x3fdc2b++)_0x2fa687[_0x3fdc2b*(0x1*-0x8c7+-0x896*0x2+-0x19f7*-0x1)]=_0x212149[_0x3fdc2b],_0x2fa687[_0x3fdc2b*(-0x30e+-0x7*0x3dc+0x1e16)+(-0x1f45+-0x951+0x2897)]=_0x539ba9[_0x3fdc2b],_0x2fa687[_0x3fdc2b*(-0x1aa8+-0x107*-0x26+-0x62f*0x2)+(-0x1a*-0x119+0x1c*0x68+-0x27e8)]=0x1*0x793+0x5b*-0x5+-0x5cc,_0x2fa687[_0x3fdc2b*(-0xf3e*0x2+-0x8*0x498+0x4340)+(-0x1*0x21c4+-0x2095*0x1+0x425c)]=jy(_0x32892e[_0x3fdc2b],_0x19fb46[_0x3fdc2b],_0x16315c[_0x3fdc2b]);return _0x2fa687;}function zb(_0x254af5,_0xd5de8){const _0x215d35=new Array(_0x254af5['length']*(0x1e35+-0x7*0x1ea+-0x10cb));for(let _0x5df449=-0xb*-0x322+0x1*-0xc11+0x111*-0x15;_0x5df449<_0x254af5['length'];_0x5df449++)_0x215d35[_0x5df449*(-0x368+-0x2154+0x540*0x7)]=_0x254af5[_0x5df449],_0x215d35[_0x5df449*(-0x8d5+-0x161f+0x2*0xf7c)+(-0x383+-0x1725*0x1+0x7*0x3cf)]=_0xd5de8[_0x5df449],_0x215d35[_0x5df449*(-0x83*-0x25+0x1618+-0x2903)+(-0x2099+0x1df7+0x2a4)]=0x1df3+-0x188*-0xe+-0x3363,_0x215d35[_0x5df449*(0x1*0x1402+-0x17c8+0x3ca)+(-0x1226+-0x1873+0x2a9c)]=0x360+-0x10*-0xac+0x71*-0x20;return _0x215d35;}function Vb(_0x3175c1){const _0xa19680=Math['max'](_0x3175c1['rate'],_0x3175c1['rate2'])*_0x3175c1['numParticl'+'es']+_0x3175c1['lifetime'];return Date['now']()+_0xa19680*(-0x5*-0x717+0xbd6+-0x8ad*0x5);}function Gb(_0x5c5a1a,_0x57fcec){const _0x551a70=new Float32Array(_0x5c5a1a['length']);for(let _0x1e346a=0x1523*0x1+0x157d+0x10*-0x2aa;_0x1e346a<_0x5c5a1a['length'];_0x1e346a++)_0x551a70[_0x1e346a]=_0x5c5a1a[_0x1e346a]-_0x57fcec[_0x1e346a];return _0x551a70;}function Gr(_0x40af4b,_0x3f4a25){const _0x2798d5=_0x3f4a25['length'],_0x529b79=_0x40af4b['length']/_0x2798d5;for(let _0x5a167c=0x4ac*0x6+-0x1*-0x1fff+-0x3c07;_0x5a167c<_0x529b79;_0x5a167c++)for(let _0x8fd5a1=-0x904+0x7*0x83+0x56f;_0x8fd5a1<_0x2798d5;_0x8fd5a1++){const _0x3660c0=Math['abs'](_0x40af4b[_0x5a167c*_0x2798d5+_0x8fd5a1]);_0x3f4a25[_0x8fd5a1]=Math['max'](_0x3f4a25[_0x8fd5a1],_0x3660c0);}}function Hb(_0x535252,_0x1874ae){const _0x1d6556=_0x1874ae['length'],_0x187dec=_0x535252['length']/_0x1d6556;for(let _0x5c49da=0xc1*-0x11+-0x6db+0x13ac;_0x5c49da<_0x187dec;_0x5c49da++)for(let _0x4a84ed=-0x2b*0x9d+0x1a2c+0x33;_0x4a84ed<_0x1d6556;_0x4a84ed++)_0x535252[_0x5c49da*_0x1d6556+_0x4a84ed]/=_0x1874ae[_0x4a84ed]===0x20d+0xf53+-0x1160?0xd4e+0x387+-0x10d4*0x1:_0x1874ae[_0x4a84ed],_0x535252[_0x5c49da*_0x1d6556+_0x4a84ed]*=-0x1*-0x119f+0x1b3e+0x5*-0x8f9+0.5,_0x535252[_0x5c49da*_0x1d6556+_0x4a84ed]+=0x2*-0x45e+0x65c+0x260+0.5;}function Fr(_0x588e15,_0x4684d0,_0x5d4f87){const _0x356772=Gb(_0x4684d0,_0x588e15);return Gr(_0x356772,_0x5d4f87),Hb(_0x356772,_0x5d4f87),_0x356772;}const Wb=new Kt();class $b{constructor(_0x132ff9,_0x2f8eee){h(this,'material',null),h(this,'internalTe'+'x0',null),h(this,'internalTe'+'x1',null),h(this,'internalTe'+'x2',null),h(this,'colorParam',null),this['graphicsDe'+'vice']=_0x132ff9;const _0x5f25a7=_0x132ff9,_0x4befbf=0x1b0*0x10+-0x26a1+0xbc1;this['precision']=_0x4befbf,this['_addTimeTi'+'me']=-0x1a0d+-0x1*0x392+-0x1d9f*-0x1,Vf=this,Mc=_0x2f8eee,he('numParticl'+'es',0x393+0x122*-0x18+-0x2*-0xbcf),this['numParticl'+'es']>_0x132ff9['maxTexture'+'Size']&&(w['warn']('WARNING:\x20c'+'an\x27t\x20creat'+'e\x20more\x20tha'+'n\x20'+_0x132ff9['maxTexture'+'Size']+('\x20particles'+'\x20on\x20this\x20d'+'evice.')),this['numParticl'+'es']=_0x132ff9['maxTexture'+'Size']),he('rate',-0x7*-0x39d+-0x182f+-0x11b),he('rate2',this['rate']),he('lifetime',-0x1*-0x1e82+-0x22cd+-0x47d*-0x1),he('emitterExt'+'ents',new D(0x23ce+-0x2697+-0x1f*-0x17,0x11bc+-0x1*-0xb63+-0x1d1f,0x2*0xfa6+0x233c+-0x4288)),he('emitterExt'+'entsInner',new D(-0x109c*-0x2+0x1*0x8b6+-0x29ee*0x1,0xc1f+0xb*-0x2c3+0x1242,0x220a+-0x1ced+-0x7*0xbb)),he('emitterRad'+'ius',0xdd4+-0x19c*0x9+0x54*0x2),he('emitterRad'+'iusInner',0x13b6+-0x14e0+0x12a),he('emitterSha'+'pe',ai),he('initialVel'+'ocity',0xec+-0x1b47+0x1a5c),he('wrap',!(-0x952+0x1283+0x62*-0x18)),he('localSpace',!(-0x188e+0x1087+0x404*0x2)),he('screenSpac'+'e',!(-0x1142+-0x15f*0xa+-0x1ef9*-0x1)),he('wrapBounds',null),he('colorMap',this['defaultPar'+'amTexture']),he('normalMap',null),he('loop',!(0x23f9*0x1+-0x11*0x1b6+-0x6e3)),he('preWarm',!(0x23b7*0x1+0x4cd*0x5+-0x3bb7)),he('sort',Of),he('mode',Ty),he('scene',null),he('lighting',!(-0x2*-0xb5d+-0x1*-0x12cd+-0x2986)),he('halfLamber'+'t',!(0xdcd*0x1+0x94*-0x40+0x1734)),he('intensity',-0x1*-0x6e8+0x1cc3*-0x1+0x15dc),he('stretch',0x1290+-0x21cd+-0x1*-0xf3d),he('alignToMot'+'ion',!(0x100*-0x1+-0x1d03+0x1e04)),he('depthSofte'+'ning',0x1399*0x1+0x1*-0x22a5+0xf0c),he('mesh',null),he('particleNo'+'rmal',new D(-0x1*-0x154d+-0x2*-0x1299+0x3a7f*-0x1,0xabd*0x1+-0x19b5*-0x1+-0x1eb*0x13,-0x76d*-0x1+-0x1899+0x896*0x2)),he('orientatio'+'n',Zc),he('depthWrite',!(-0x25d3+0x14b*-0x9+0x3177)),he('noFog',!(0x1e*-0x32+0x5eb*0x1+-0xe)),he('blendType',Zs),he('node',null),he('startAngle',-0x31c*-0x2+-0xd*0x26+-0x44a),he('startAngle'+'2',this['startAngle']),he('animTilesX',0x191*-0xb+0x2*-0x1073+-0x17*-0x22e),he('animTilesY',0x1cd*-0x15+0x1*-0x1633+0x3c05),he('animStartF'+'rame',0xea0+0x129a*-0x2+-0xaa*-0x22),he('animNumFra'+'mes',0x3cd+-0x63*-0x4a+-0x1cd*0x12),he('animNumAni'+'mations',0x1f28+0x1f91+-0x37c*0x12),he('animIndex',0x25*0xe+-0x840+-0x63a*-0x1),he('randomizeA'+'nimIndex',!(0x2f*-0x84+0x1*-0x102b+0x2868)),he('animSpeed',0x1*-0x11a5+-0x2*0x14+0x11ce),he('animLoop',!(0x23f3*-0x1+0x1ccd+0x726)),this['_gpuUpdate'+'r']=new Rb(this,_0x5f25a7),this['_cpuUpdate'+'r']=new Lb(this),this['emitterPos'+'Uniform']=new Float32Array(0x94f*-0x4+0x1*-0x3e1+0x149*0x20),this['wrapBounds'+'Uniform']=new Float32Array(0x1*0xcd3+-0x18fa+-0x9*-0x15a),this['emitterSca'+'leUniform']=new Float32Array([-0x5a2+-0xdf*-0x1b+-0x11e2,0x148f*-0x1+0x246b+-0xfdb,0x51b+-0xaf*0x37+-0xb1*-0x2f]),he('colorGraph',kb),he('colorGraph'+'2',this['colorGraph']),he('scaleGraph',I_),he('scaleGraph'+'2',this['scaleGraph']),he('alphaGraph',I_),he('alphaGraph'+'2',this['alphaGraph']),he('localVeloc'+'ityGraph',L_),he('localVeloc'+'ityGraph2',this['localVeloc'+'ityGraph']),he('velocityGr'+'aph',L_),he('velocityGr'+'aph2',this['velocityGr'+'aph']),he('rotationSp'+'eedGraph',D_),he('rotationSp'+'eedGraph2',this['rotationSp'+'eedGraph']),he('radialSpee'+'dGraph',D_),he('radialSpee'+'dGraph2',this['radialSpee'+'dGraph']),this['animTilesP'+'arams']=new Float32Array(0xbdf*0x2+-0x1c54*-0x1+-0xc4*0x44),this['animParams']=new Float32Array(0x8a0+-0x7f*-0x47+-0x2bd5),this['animIndexP'+'arams']=new Float32Array(0x2269+-0xd3*0xd+-0x17b0),this['vbToSort']=null,this['vbOld']=null,this['particleDi'+'stance']=null,this['camera']=null,this['swapTex']=!(-0x2687+-0x1fd*0xb+0x3c67),this['useMesh']=!(0x17eb+0x1*0x1003+-0x27ee),this['useCpu']=!_0x132ff9['supportsGp'+'uParticles'],this['pack8']=!(0x4b4+-0x1*-0x17cb+0x1*-0x1c7f),this['localBound'+'s']=new De(),this['worldBound'+'sNoTrail']=new De(),this['worldBound'+'sTrail']=[new De(),new De()],this['worldBound'+'s']=new De(),this['worldBound'+'sSize']=new D(),this['prevWorldB'+'oundsSize']=new D(),this['prevWorldB'+'oundsCente'+'r']=new D(),this['prevEmitte'+'rExtents']=this['emitterExt'+'ents'],this['prevEmitte'+'rRadius']=this['emitterRad'+'ius'],this['worldBound'+'sMul']=new D(),this['worldBound'+'sAdd']=new D(),this['timeToSwit'+'chBounds']=0x229e+-0x7*-0x527+-0x46af,this['shaderPart'+'icleUpdate'+'Respawn']=null,this['shaderPart'+'icleUpdate'+'NoRespawn']=null,this['shaderPart'+'icleUpdate'+'OnStop']=null,this['numParticl'+'eVerts']=-0x1819+-0x2bf+0x1ad8,this['numParticl'+'eIndices']=0x66e+0x14*0x148+-0x200e*0x1,this['material']=null,this['meshInstan'+'ce']=null,this['drawOrder']=0x113+0x84d+-0x960,this['seed']=Math['random'](),this['fixedTimeS'+'tep']=(0x174+0x260e*0x1+-0x2781)/(-0x9e1+-0x59e*0x1+-0xfbb*-0x1),this['maxSubStep'+'s']=-0x8*-0xce+-0x5a6*0x1+0x20*-0x6,this['simTime']=-0x3*0x207+-0x1a2*-0x3+-0x65*-0x3,this['simTimeTot'+'al']=0xd83*0x2+-0x24b1+0xb*0xe1,this['beenReset']=!(0xccc+0x16*0x9f+-0x1a75),this['_layer']=null,this['rebuild']();}get['defaultPar'+'amTexture'](){return w['assert'](this['graphicsDe'+'vice']),Wb['get'](this['graphicsDe'+'vice'],()=>{const _0x26795b=new Float32Array(-0x236+-0x107*0x18+-0x6*-0x525);for(let _0x279d6d=0x72a*-0x4+0x2f+0x1c79;_0x279d6d<-0x18ea+0x12e+0x5f3*0x4;_0x279d6d++)for(let _0x11167b=-0x24b*-0x7+0x1a47+-0x2a54;_0x11167b<-0x4*0x52f+-0x38f+0x4df*0x5;_0x11167b++){const _0xa70f15=_0x11167b+(0x1*0x1d4e+-0x87e+-0x14cf)-(-0x19b1+-0xc44+0x5*0x799+0.5),_0x1dc29c=_0x279d6d+(-0x1aa3+0x5d5*-0x5+-0x5*-0xb29)-(-0x20e+0x4*-0x9b6+-0x193*-0x1a+0.5),_0x5797e8=M_(0xb33+0x3d*0x8d+-0x1*0x2ccb-M_(Math['sqrt'](_0xa70f15*_0xa70f15+_0x1dc29c*_0x1dc29c)/(-0x2565*0x1+-0x19*0x25+0x2912))-(-0xd2b*0x1+0x135e+0x1*-0x633+0.5)),_0x29515e=_0x279d6d*(-0x3*-0x855+0x3*0x4ee+-0x27b9)+_0x11167b;_0x26795b[_0x29515e*(0x7*-0x3f+-0x2da*-0x9+-0x7d*0x31)]=0x205f*0x1+-0x512+0x4*-0x6d3,_0x26795b[_0x29515e*(0x2242+0x2*-0x777+0x1*-0x1350)+(0x13ec+-0x1447+0x5c)]=0x179f*0x1+0x20a*0x13+-0x3e5c,_0x26795b[_0x29515e*(0x15c6+0x15f4+0xf*-0x2ea)+(0x81*0x25+-0x2ad*0xb+0x1*0xacc)]=-0x136d+0x29e+0x10d0,_0x26795b[_0x29515e*(0x21c3+-0x2*-0x80e+-0x31db)+(0x908+-0x20a7+-0x4ba*-0x5)]=_0x5797e8;}const _0x2db1c6=xs(this['graphicsDe'+'vice'],0x3b3+-0x1898+-0x5*-0x431,0x225d+0x229d+-0x44ea,_0x26795b,_s,0x1c88+0x5*0x6b1+0x4*-0xf7f,!(0x989+0x1053+-0x19dc));return _0x2db1c6['minFilter']=vt,_0x2db1c6['magFilter']=vt,_0x2db1c6;});}['onChangeCa'+'mera'](){this['resetMater'+'ial']();}['calculateB'+'oundsMad'](){this['worldBound'+'sMul']['x']=(-0x2021+-0x3f9+-0x1*-0x241b)/this['worldBound'+'sSize']['x'],this['worldBound'+'sMul']['y']=(0x16f*0x1b+-0x82e+-0x1e86)/this['worldBound'+'sSize']['y'],this['worldBound'+'sMul']['z']=(-0x1*-0x1421+-0xfb+-0x179*0xd)/this['worldBound'+'sSize']['z'],this['worldBound'+'sAdd']['copy'](this['worldBound'+'s']['center'])['mul'](this['worldBound'+'sMul'])['mulScalar'](-(0x1*-0xf8e+-0x1c2b+0x2bba)),this['worldBound'+'sAdd']['x']+=-0x1*-0x1f12+0x1539+-0x344b+0.5,this['worldBound'+'sAdd']['y']+=0x239d+0x102*-0xd+-0x1683+0.5,this['worldBound'+'sAdd']['z']+=-0x11*-0xf1+0x22b9+-0x195d*0x2+0.5;}['calculateW'+'orldBounds'](){if(!this['node'])return;if(this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),!this['useCpu']){let _0x74c5a3=!(0x8e0+-0x988+-0xa9*-0x1);this['emitterSha'+'pe']===ai?_0x74c5a3=!this['emitterExt'+'ents']['equals'](this['prevEmitte'+'rExtents']):_0x74c5a3=this['emitterRad'+'ius']!==this['prevEmitte'+'rRadius'],_0x74c5a3&&this['calculateL'+'ocalBounds']();}const _0x4d814c=this['node']['getWorldTr'+'ansform']();this['localSpace']?this['worldBound'+'sNoTrail']['copy'](this['localBound'+'s']):this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],_0x4d814c),this['worldBound'+'sTrail'][-0x1*0x1b3b+0x683*-0x2+0x2841]['add'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][-0x1bd2*-0x1+-0x15bd+-0x614*0x1]['add'](this['worldBound'+'sNoTrail']);const _0x5532d6=this['simTimeTot'+'al'];_0x5532d6>=this['timeToSwit'+'chBounds']&&(this['worldBound'+'sTrail'][0x12ad*-0x2+-0x7*-0x414+0x8ce]['copy'](this['worldBound'+'sTrail'][-0x52b+0x2*-0x95f+0x2*0xbf5]),this['worldBound'+'sTrail'][-0x65e+-0x1*-0x24af+-0x1*0x1e50]['copy'](this['worldBound'+'sNoTrail']),this['timeToSwit'+'chBounds']=_0x5532d6+this['lifetime']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0x1dbb+-0x416*-0x6+-0x9*0x607]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x2280+-0x31e*0x1+0x2*-0xfb0),this['localSpace']?(this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x4d814c),this['meshInstan'+'ce']['mesh']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x4d814c)):(this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['mesh']['aabb']['copy'](this['worldBound'+'s'])),this['meshInstan'+'ce']['_aabbVer']=-0x8ba+-0x1*0x2206+-0x1*-0x2ac1-this['meshInstan'+'ce']['_aabbVer'],this['pack8']&&this['calculateB'+'oundsMad']();}['resetWorld'+'Bounds'](){this['node']&&(this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0x1152+-0xb42*-0x1+-0x2*0xe4a]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][-0x113d+0x1*0x35b+0x4f*0x2d]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0x1*-0x2359+0x22b5+0xa4]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x30a+-0x875+0x56d),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['simTimeTot'+'al']=0x12f*0x1+-0x7ec+0x19*0x45,this['timeToSwit'+'chBounds']=-0x1*-0x1ece+-0xbc9+-0x1*0x1305);}['calculateL'+'ocalBounds'](){let _0x2868fd=Number['MAX_VALUE'],_0x459ca4=Number['MAX_VALUE'],_0x5585c5=Number['MAX_VALUE'],_0x9c0ee0=-Number['MAX_VALUE'],_0x4b809a=-Number['MAX_VALUE'],_0x13c01d=-Number['MAX_VALUE'],_0x43814e=0x1961+-0xb88+-0xdd9,_0x3adad3=-0x242*0x11+-0x34*-0x2b+0x1da6;const _0x34c60e=this['lifetime']/this['precision'],_0xbe2544=[this['qVelocity'],this['qVelocity2']],_0x27086b=[this['qLocalVelo'+'city'],this['qLocalVelo'+'city2']],_0x4e2f1e=[0xdf8+-0x9d6*-0x1+-0x17ce,0x1*0x1163+0x36e+0x14d1*-0x1],_0x2f00be=[-0x373*0x3+0x346*-0x1+0x13d*0xb,-0x65b+-0x19*0x7+0x70a],_0x33a8b9=[-0x2708+-0xb24*0x1+-0x13*-0x2a4,0x5*-0x5ab+0x3ff+-0x616*-0x4],_0x527cc4=[0x11ba*-0x1+-0x1*-0xbae+0x60c,0x1*-0x851+-0x3*-0x6de+-0xc49],_0x34b668=[-0x35*0x3d+-0xb51+-0x5*-0x4ca,0x75*-0x2d+-0x1385+0x2816];let _0x5d9399,_0x9713b1,_0x576e93;for(let _0xa337c5=0x11c0*-0x1+0x242c+-0x126c;_0xa337c5<this['precision']+(-0x1*0x1835+-0xc66+0x249c);_0xa337c5++){const _0x3b5050=Math['min'](_0xa337c5,this['precision']-(0xe2b+0x1*0x15e1+-0x1*0x240b));for(let _0x495c41=0x1be5*0x1+-0x1*-0xa84+-0x2669;_0x495c41<-0x21f9+-0x73*0x3b+0x229*0x1c;_0x495c41++)_0x5d9399=_0x27086b[_0x495c41][_0x3b5050*(0x5f*-0x17+-0x1*-0x1583+-0xcf7)+(-0x11*0x19b+-0x108c+0x2bd7)]*_0x34c60e+_0x4e2f1e[_0x495c41],_0x9713b1=_0x27086b[_0x495c41][_0x3b5050*(0xa51+0x3*-0xac9+0x160d)+(-0x1ee8+-0x4*-0x3c4+-0x1*-0xfd9)]*_0x34c60e+_0x2f00be[_0x495c41],_0x576e93=_0x27086b[_0x495c41][_0x3b5050*(-0xfb+-0x2*0x6e5+0xec8)+(-0x10bb*0x1+-0x609+0x16c6)]*_0x34c60e+_0x33a8b9[_0x495c41],_0x2868fd=Math['min'](_0x5d9399,_0x2868fd),_0x459ca4=Math['min'](_0x9713b1,_0x459ca4),_0x5585c5=Math['min'](_0x576e93,_0x5585c5),_0x9c0ee0=Math['max'](_0x5d9399,_0x9c0ee0),_0x4b809a=Math['max'](_0x9713b1,_0x4b809a),_0x13c01d=Math['max'](_0x576e93,_0x13c01d),_0x4e2f1e[_0x495c41]=_0x5d9399,_0x2f00be[_0x495c41]=_0x9713b1,_0x33a8b9[_0x495c41]=_0x576e93;for(let _0x172437=0xac+0x59*-0x12+-0x2*-0x2cb;_0x172437<-0x14b*0x1d+0x1063+0x13e*0x11;_0x172437++)_0x34b668[_0x172437]+=_0x34c60e*Math['sqrt'](_0xbe2544[_0x172437][_0x3b5050*(0x1*0x494+-0x2099*-0x1+-0x252a)+(-0x1*-0x973+0x6*0x602+0x1*-0x2d7f)]*_0xbe2544[_0x172437][_0x3b5050*(0x84*0x2c+-0x15c*-0x13+-0x1*0x3081)+(0x63a*-0x3+0x14db+-0x22d)]+_0xbe2544[_0x172437][_0x3b5050*(-0x1b97+0x1079*0x1+-0x1*-0xb21)+(0x11a5+-0xf61*-0x1+0x4f*-0x6b)]*_0xbe2544[_0x172437][_0x3b5050*(-0x1*-0x15f7+0x9*0x3a+-0x1*0x17fe)+(-0x5de+-0x19ca+0x1fa9)]+_0xbe2544[_0x172437][_0x3b5050*(0x5*0x2e6+0x7fb+-0x2e*0x7d)+(-0x1eae+-0x17df+0x1*0x368f)]*_0xbe2544[_0x172437][_0x3b5050*(0x108b+0x2452+-0x8cf*0x6)+(-0x1e9d+-0xdc3+0x2c62)]);_0x527cc4[-0x1*0x91b+0xa96+0x17b*-0x1]+=this['qRadialSpe'+'ed'][_0x3b5050]*_0x34c60e,_0x527cc4[0x4*0x542+-0x5b*-0x17+-0x54*0x59]+=this['qRadialSpe'+'ed2'][_0x3b5050]*_0x34c60e,_0x43814e=Math['max'](_0x43814e,Math['max'](Math['abs'](_0x527cc4[0x17ee+0x62e*-0x5+0x6f8]),Math['abs'](_0x527cc4[-0x1*0x2188+-0x2489+0x1*0x4612]))),_0x3adad3=Math['max'](_0x3adad3,this['qScale'][_0x3b5050]);}this['emitterSha'+'pe']===ai?(_0x5d9399=this['emitterExt'+'ents']['x']*(-0x1*0x1663+0x14ef+0x174+0.5),_0x9713b1=this['emitterExt'+'ents']['y']*(0xb0f*-0x2+-0x91a+0x1f38+0.5),_0x576e93=this['emitterExt'+'ents']['z']*(0x123f+0xa7*-0x1+-0x1198+0.5)):(_0x5d9399=this['emitterRad'+'ius'],_0x9713b1=this['emitterRad'+'ius'],_0x576e93=this['emitterRad'+'ius']);const _0x202968=Math['max'](_0x34b668[-0xb*0x62+0x403+0x11*0x3],_0x34b668[-0x21af*-0x1+0xb2a*0x3+-0x1*0x432c]);tc['x']=_0x2868fd-_0x3adad3-_0x5d9399-_0x43814e-_0x202968,tc['y']=_0x459ca4-_0x3adad3-_0x9713b1-_0x43814e-_0x202968,tc['z']=_0x5585c5-_0x3adad3-_0x576e93-_0x43814e-_0x202968,sc['x']=_0x9c0ee0+_0x3adad3+_0x5d9399+_0x43814e+_0x202968,sc['y']=_0x4b809a+_0x3adad3+_0x9713b1+_0x43814e+_0x202968,sc['z']=_0x13c01d+_0x3adad3+_0x576e93+_0x43814e+_0x202968,this['localBound'+'s']['setMinMax'](tc,sc);}['rebuild'](){const _0x375b0c=this['graphicsDe'+'vice'];this['colorMap']===null&&(this['colorMap']=this['defaultPar'+'amTexture']),this['spawnBound'+'s']=this['emitterSha'+'pe']===ai?this['emitterExt'+'ents']:this['emitterRad'+'ius'],this['useCpu']=this['useCpu']||this['sort']>Of||_0x375b0c['maxVertexT'+'extures']<=0x17ab+-0x7*-0xea+0x34*-0x94||_0x375b0c['fragmentUn'+'iformsCoun'+'t']<-0x65*0xa+-0x51*0xe+0x8a0||_0x375b0c['forceCpuPa'+'rticles'],this['_destroyRe'+'sources'](),this['pack8']=(this['pack8']||!_0x375b0c['textureFlo'+'atRenderab'+'le'])&&!this['useCpu'],bi=this['useCpu']||this['pack8']?-0xb07+0x187b+-0xd70:0x1d*0x8d+-0x3d7*0x1+-0xc20,this['useMesh']=!!this['mesh'],this['numParticl'+'esPot']=Y['nextPowerO'+'fTwo'](this['numParticl'+'es']),this['rebuildGra'+'phs'](),this['calculateL'+'ocalBounds'](),this['resetWorld'+'Bounds'](),this['node']&&(this['worldBound'+'s']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][-0xa6*-0x1e+-0x114c+-0x228]['copy'](this['worldBound'+'s']),this['worldBound'+'sTrail'][0x99*0x35+-0x42d*0x2+0x7c6*-0x3]['copy'](this['worldBound'+'s']),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x1640+0x787+-0x1dc5),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['pack8']&&this['calculateB'+'oundsMad']()),this['vbToSort']=new Array(this['numParticl'+'es']);for(let _0x471000=-0x1*0x2456+-0x1185+0x1*0x35db;_0x471000<this['numParticl'+'es'];_0x471000++)this['vbToSort'][_0x471000]=[0x1b74*0x1+-0x5*-0x6fb+-0x3e5b,0x17da+0x1c88+-0x3462];this['particleDi'+'stance']=new Float32Array(this['numParticl'+'es']),this['_gpuUpdate'+'r']['randomize'](),this['particleTe'+'x']=new Float32Array(this['numParticl'+'esPot']*bi*ec);const _0x351ed6=this['node']===null||this['localSpace']?D['ZERO']:this['node']['getPositio'+'n']();this['emitterSha'+'pe']===ai&&(this['node']===null||this['localSpace']?Or['setTRS'](D['ZERO'],le['IDENTITY'],this['spawnBound'+'s']):Or['setTRS'](D['ZERO'],this['node']['getRotatio'+'n'](),R_['copy'](this['spawnBound'+'s'])['mul'](this['node']['localScale'])),Ai[-0x222d+-0x1a54+0x142b*0x3]=this['emitterExt'+'ents']['x']!==0x99*-0x27+0x1*-0x1e01+-0x3550*-0x1?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0xf+-0x253+0x244,Ai[0x99*0x3c+-0xedd+-0x14fe]=this['emitterExt'+'ents']['y']!==0x1*-0x9c3+-0x5e*0x62+-0x31*-0xef?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:0x1*0x59f+0x5c*-0x25+-0x7ad*-0x1,Ai[0xc*0x1e9+-0x2522+0x28*0x5b]=this['emitterExt'+'ents']['z']!==0x11c4+0x68*-0x1+-0x115c?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x1*0x24a6+-0x8c6+-0x1be0);for(let _0x37210b=-0xa13+0x18e4+-0xed1;_0x37210b<this['numParticl'+'es'];_0x37210b++)this['_cpuUpdate'+'r']['calcSpawnP'+'osition'](this['particleTe'+'x'],Or,Ai,_0x351ed6,_0x37210b),this['useCpu']&&(this['particleTe'+'x'][_0x37210b*ec+(0x1b72+-0x10*0x20f+0x581*0x1)+this['numParticl'+'esPot']*(-0xe1+-0x5d6+0x6b9*0x1)*ec]=-0x15fe+0x14ba+-0x19*-0xd);this['particleTe'+'xStart']=new Float32Array(this['numParticl'+'esPot']*bi*ec);for(let _0x14e63f=-0xee9*-0x2+-0x256+-0x1b7c*0x1;_0x14e63f<this['particleTe'+'xStart']['length'];_0x14e63f++)this['particleTe'+'xStart'][_0x14e63f]=this['particleTe'+'x'][_0x14e63f];this['useCpu']||(this['pack8']?(this['particleTe'+'xIN']=xs(_0x375b0c,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,-0x46*0x16+-0x1daa+0x23af,!(-0x1d1e+0x61b+-0x6*-0x3d6)),this['particleTe'+'xOUT']=xs(_0x375b0c,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,-0x1856+-0x1beb+0x3442,!(0x1afc+-0x1ed3+0x3d8)),this['particleTe'+'xStart']=xs(_0x375b0c,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'],Ne,-0x1525+0x411*0x9+-0xf73,!(0x24ac+0x205f*0x1+0x1*-0x450a))):(this['particleTe'+'xIN']=xs(_0x375b0c,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xOUT']=xs(_0x375b0c,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xStart']=xs(_0x375b0c,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'])),this['rtParticle'+'TexIN']=new gt({'colorBuffer':this['particleTe'+'xIN'],'depth':!(0x1867*0x1+-0x2470+0xc0a)}),this['rtParticle'+'TexOUT']=new gt({'colorBuffer':this['particleTe'+'xOUT'],'depth':!(-0xf84+-0x1241+0x21c6)}),this['swapTex']=!(0x20a9+-0x80*0x24+-0xea8));const _0x54533f=new Map();this['localSpace']&&_0x54533f['set']('LOCAL_SPAC'+'E',''),this['pack8']&&_0x54533f['set']('PACK8',''),this['emitterSha'+'pe']===ai&&_0x54533f['set']('EMITTERSHA'+'PE_BOX','');const _0x18b4a4='Shape:'+this['emitterSha'+'pe']+'-Pack:'+this['pack8']+'-Local:'+this['localSpace'],_0x19a9c3=Ce['get'](_0x375b0c,_0x375b0c['isWebGPU']?it:Fe),_0x50caf5=new Map(_0x19a9c3),_0x22b5ba={'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'particle_s'+'imulationP'+'S','fragmentDefines':_0x54533f,'fragmentIncludes':_0x50caf5};_0x22b5ba['uniqueName']='ParticleUp'+'dateRespaw'+'n-'+_0x18b4a4,_0x54533f['set']('RESPAWN',''),this['shaderPart'+'icleUpdate'+'Respawn']=$t['createShad'+'er'](_0x375b0c,_0x22b5ba),_0x54533f['delete']('RESPAWN'),_0x22b5ba['uniqueName']='ParticleUp'+'dateNoResp'+'awn-'+_0x18b4a4,_0x54533f['set']('NO_RESPAWN',''),this['shaderPart'+'icleUpdate'+'NoRespawn']=$t['createShad'+'er'](_0x375b0c,_0x22b5ba),_0x54533f['delete']('NO_RESPAWN'),_0x22b5ba['uniqueName']='ParticleUp'+'dateStop-'+_0x18b4a4,_0x54533f['set']('ON_STOP',''),this['shaderPart'+'icleUpdate'+'OnStop']=$t['createShad'+'er'](_0x375b0c,_0x22b5ba),this['numParticl'+'eVerts']=this['useMesh']?this['mesh']['vertexBuff'+'er']['numVertice'+'s']:-0x11*-0x209+0x1*0x23f9+-0x468e,this['numParticl'+'eIndices']=this['useMesh']?this['mesh']['indexBuffe'+'r'][0x1*0x3a6+-0x8b6*-0x1+-0xc5c]['numIndices']:0x16*0x15d+0x4b6+-0x22ae,this['_allocate'](this['numParticl'+'es']);const _0x56cd77=new Ge(_0x375b0c);_0x56cd77['vertexBuff'+'er']=this['vertexBuff'+'er'],_0x56cd77['indexBuffe'+'r'][-0x200*0x4+-0x1c76+0x2476]=this['indexBuffe'+'r'],_0x56cd77['primitive'][-0x1c2a+0x642+0x2*0xaf4]['type']=qs,_0x56cd77['primitive'][-0x26*0x65+-0x264a+-0x4*-0xd52]['base']=0x1d07+-0xc65*-0x2+0x17*-0x257,_0x56cd77['primitive'][0x19b9+0x19d*0x15+0x3b9a*-0x1]['count']=this['numParticl'+'es']*this['numParticl'+'eIndices'],_0x56cd77['primitive'][0xed0*0x2+0x2383+-0x4123]['indexed']=!(-0x12e*0xf+-0x709*0x5+0x34df),this['material']=this['_createMat'+'erial'](),this['resetMater'+'ial']();const _0x20088a=this['meshInstan'+'ce']?this['meshInstan'+'ce']['visible']:!(0x2*-0x19e+-0x240d*-0x1+0x20d1*-0x1);this['meshInstan'+'ce']=new He(_0x56cd77,this['material'],this['node']),this['meshInstan'+'ce']['pick']=!(-0x6*0x17+0xd*0x1c9+-0x16aa),this['meshInstan'+'ce']['updateKey'](),this['meshInstan'+'ce']['cull']=!(-0x1b56+-0x805*0x1+0x50d*0x7),this['localSpace']?this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],this['node']['getWorldTr'+'ansform']()):this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['_updateAab'+'b']=!(0x926+0xb5d*-0x1+0x11c*0x2),this['meshInstan'+'ce']['visible']=_0x20088a,this['_setMateri'+'alTextures'](),this['resetTime'](),this['addTime'](-0x137f+0x231d+-0xf9e,!(-0x1183+-0x3d*-0xd+0xe6b)),this['preWarm']&&this['prewarm'](this['lifetime']);}['_isAnimate'+'d'](){return this['animNumFra'+'mes']>=0x7bb*0x5+0xb4f*0x1+0x9*-0x58d&&(this['animTilesX']>-0x20c7*-0x1+0x21d2+-0x1*0x4298||this['animTilesY']>0x1*0x59f+0xb*-0x49+0x7f*-0x5)&&(this['colorMap']&&this['colorMap']!==this['defaultPar'+'amTexture']||this['normalMap']);}['rebuildGra'+'phs'](){const _0x37c21d=this['precision'],_0xe3d71b=this['graphicsDe'+'vice'];this['qLocalVelo'+'city']=this['localVeloc'+'ityGraph']['quantize'](_0x37c21d),this['qVelocity']=this['velocityGr'+'aph']['quantize'](_0x37c21d),this['qColor']=this['colorGraph']['quantizeCl'+'amped'](_0x37c21d,0x137a+0x1*-0x1f61+0xbe7,0x613+-0x1f72+-0x196*-0x10),this['qRotSpeed']=this['rotationSp'+'eedGraph']['quantize'](_0x37c21d),this['qScale']=this['scaleGraph']['quantize'](_0x37c21d),this['qAlpha']=this['alphaGraph']['quantize'](_0x37c21d),this['qRadialSpe'+'ed']=this['radialSpee'+'dGraph']['quantize'](_0x37c21d),this['qLocalVelo'+'city2']=this['localVeloc'+'ityGraph2']['quantize'](_0x37c21d),this['qVelocity2']=this['velocityGr'+'aph2']['quantize'](_0x37c21d),this['qColor2']=this['colorGraph'+'2']['quantizeCl'+'amped'](_0x37c21d,-0x8e9+-0x1*0x29+0x2b*0x36,-0x1*-0x11+0xe95*-0x2+0x1d1a),this['qRotSpeed2']=this['rotationSp'+'eedGraph2']['quantize'](_0x37c21d),this['qScale2']=this['scaleGraph'+'2']['quantize'](_0x37c21d),this['qAlpha2']=this['alphaGraph'+'2']['quantize'](_0x37c21d),this['qRadialSpe'+'ed2']=this['radialSpee'+'dGraph2']['quantize'](_0x37c21d);for(let _0x691f44=0x156e*-0x1+0x49*0x77+0x42b*-0x3;_0x691f44<_0x37c21d;_0x691f44++)this['qRotSpeed'][_0x691f44]*=Y['DEG_TO_RAD'],this['qRotSpeed2'][_0x691f44]*=Y['DEG_TO_RAD'];if(this['localVeloc'+'ityUMax']=new Float32Array(-0xd13+-0x1*-0x23f9+-0x1f*0xbd),this['velocityUM'+'ax']=new Float32Array(0xaa5+0x615+-0x10b7),this['colorUMax']=new Float32Array(-0x1*0xcbb+0x6*0x5ed+-0x16d0),this['rotSpeedUM'+'ax']=[-0xbbc+-0x24*0x4b+0x2c9*0x8],this['scaleUMax']=[-0x2cb+0x25b*-0xd+0x216a],this['alphaUMax']=[-0x191a+-0xb*-0x32b+-0x9bf],this['radialSpee'+'dUMax']=[0x2af+-0x1*0x21d+-0x49*0x2],this['qLocalVelo'+'cityDiv']=Fr(this['qLocalVelo'+'city'],this['qLocalVelo'+'city2'],this['localVeloc'+'ityUMax']),this['qVelocityD'+'iv']=Fr(this['qVelocity'],this['qVelocity2'],this['velocityUM'+'ax']),this['qColorDiv']=Fr(this['qColor'],this['qColor2'],this['colorUMax']),this['qRotSpeedD'+'iv']=Fr(this['qRotSpeed'],this['qRotSpeed2'],this['rotSpeedUM'+'ax']),this['qScaleDiv']=Fr(this['qScale'],this['qScale2'],this['scaleUMax']),this['qAlphaDiv']=Fr(this['qAlpha'],this['qAlpha2'],this['alphaUMax']),this['qRadialSpe'+'edDiv']=Fr(this['qRadialSpe'+'ed'],this['qRadialSpe'+'ed2'],this['radialSpee'+'dUMax']),this['pack8']){const _0x2ee446=[-0xc*-0x13c+0xc30+-0x1b00,-0x1756*-0x1+-0xf35+0x1*-0x821,0x302*0x9+0x58*-0x4c+-0xf2];Gr(this['qVelocity'],_0x2ee446);const _0x512507=[-0x222c+0x17*-0x147+0x3f8d,-0x3*0x91d+-0x1*-0x15e3+0x2*0x2ba,-0x4b*-0x27+0x2*0xbbc+-0x1*0x22e5];Gr(this['qVelocity2'],_0x512507);const _0x24ffb5=[-0xdba*-0x1+-0xda0+0x2*-0xd,-0x1341+0xa7*-0x4+-0xc1*-0x1d,-0x14c3*0x1+0x988+0x17*0x7d];Gr(this['qLocalVelo'+'city'],_0x24ffb5);const _0x3b92a4=[0xf9b+-0x14fd+-0x2b1*-0x2,-0x605+-0x2c*-0x24+-0x2b,0x1f5e+-0x24da+0x57c];Gr(this['qLocalVelo'+'city2'],_0x3b92a4);const _0x45facf=[0x2217*0x1+-0x260+0x161*-0x17];Gr(this['qRadialSpe'+'ed'],_0x45facf);const _0x3ea40e=[-0xce6+-0x1f00+-0x6*-0x751];Gr(this['qRadialSpe'+'ed2'],_0x3ea40e);let _0x46b266=Math['max'](_0x2ee446[-0x193f+-0x996+-0x1*-0x22d5],_0x512507[-0x1*0x162a+-0x1087*0x2+0x3738]);_0x46b266=Math['max'](_0x46b266,_0x2ee446[-0x1bc4+0x3*-0x321+0x2528]),_0x46b266=Math['max'](_0x46b266,_0x512507[-0x1963+0x4f3*-0x7+0x3*0x1403]),_0x46b266=Math['max'](_0x46b266,_0x2ee446[0x181c*0x1+0x17fb+0x3015*-0x1]),_0x46b266=Math['max'](_0x46b266,_0x512507[0x79f*0x1+0x683+-0x1c4*0x8]);let _0x3339a0=Math['max'](_0x24ffb5[-0xf*0x14a+0x192+-0xc*-0x17b],_0x3b92a4[-0xf7a+0x1*-0x2635+0x35af*0x1]);_0x3339a0=Math['max'](_0x3339a0,_0x24ffb5[0x1aa3+-0x430+-0x1672*0x1]),_0x3339a0=Math['max'](_0x3339a0,_0x3b92a4[0x9a2+0x456+-0xdf7]),_0x3339a0=Math['max'](_0x3339a0,_0x24ffb5[-0x97+0xdd3+-0x1*0xd3a]),_0x3339a0=Math['max'](_0x3339a0,_0x3b92a4[0x2623+0x2689+-0x4caa]);const _0x577ec1=Math['max'](_0x45facf[-0x1*0x412+-0x243*0x1+-0x1*-0x655],_0x3ea40e[0x22d9*0x1+0x1*-0x2413+-0x13a*-0x1]);this['maxVel']=_0x46b266+_0x3339a0+_0x577ec1;}this['useCpu']||(this['internalTe'+'x0']=xs(_0xe3d71b,_0x37c21d,0x2*-0xaab+-0xeee+0x5*0x741,O_(this['qLocalVelo'+'city'],this['qLocalVelo'+'cityDiv'])),this['internalTe'+'x1']=xs(_0xe3d71b,_0x37c21d,0x26a2+0x192a*0x1+0x3fcb*-0x1,O_(this['qVelocity'],this['qVelocityD'+'iv'])),this['internalTe'+'x2']=xs(_0xe3d71b,_0x37c21d,0x2499*-0x1+0x1262+0x1238,Bb(this['qRotSpeed'],this['qScale'],this['qScaleDiv'],this['qRotSpeedD'+'iv'],this['qAlphaDiv'])),this['internalTe'+'x3']=xs(_0xe3d71b,_0x37c21d,0x36e*-0x4+0x8*-0x61+0x10c1,zb(this['qRadialSpe'+'ed'],this['qRadialSpe'+'edDiv']))),this['colorParam']=xs(_0xe3d71b,_0x37c21d,0x583+-0x1731+0x11af,Ub(this['qColor'],this['qAlpha']),_s,-0x13*0xb2+-0x754+0x148b,!(-0x393+-0x353*-0x1+0x2*0x20));}['_setMateri'+'alTextures'](){this['colorMap']&&(w['call'](()=>{LS(this['colorMap']['format'])&&w['warnOnce']('ParticleEm'+'itter:\x20col'+'orMap\x20text'+'ure\x20['+this['colorMap']['name']+(']\x20is\x20not\x20u'+'sing\x20sRGB\x20'+'format.\x20Pl'+'ease\x20corre'+'ct\x20it\x20for\x20'+'the\x20correc'+'t\x20renderin'+'g.'),this['colorMap']);}),this['material']['setParamet'+'er']('colorMap',this['colorMap']),this['lighting']&&this['normalMap']&&this['material']['setParamet'+'er']('normalMap',this['normalMap']));}['_createMat'+'erial'](){const _0x31c53a=new Nb(this);return _0x31c53a['name']='EmitterMat'+'erial:'+this['node']['name'],_0x31c53a['cull']=bt,_0x31c53a['alphaWrite']=!(-0x1*0x7ab+0x379+-0x19*-0x2b),_0x31c53a['blendType']=this['blendType'],_0x31c53a['depthWrite']=this['depthWrite'],_0x31c53a;}['resetMater'+'ial'](){const _0x444db4=this['material'];_0x444db4['setParamet'+'er']('stretch',this['stretch']),this['_isAnimate'+'d']()&&(_0x444db4['setParamet'+'er']('animTexTil'+'esParams',this['animTilesP'+'arams']),_0x444db4['setParamet'+'er']('animTexPar'+'ams',this['animParams']),_0x444db4['setParamet'+'er']('animTexInd'+'exParams',this['animIndexP'+'arams'])),_0x444db4['setParamet'+'er']('colorMult',this['intensity']),this['useCpu']||(_0x444db4['setParamet'+'er']('internalTe'+'x0',this['internalTe'+'x0']),_0x444db4['setParamet'+'er']('internalTe'+'x1',this['internalTe'+'x1']),_0x444db4['setParamet'+'er']('internalTe'+'x2',this['internalTe'+'x2']),_0x444db4['setParamet'+'er']('internalTe'+'x3',this['internalTe'+'x3'])),_0x444db4['setParamet'+'er']('colorParam',this['colorParam']),_0x444db4['setParamet'+'er']('numParticl'+'es',this['numParticl'+'es']),_0x444db4['setParamet'+'er']('numParticl'+'esPot',this['numParticl'+'esPot']),_0x444db4['setParamet'+'er']('lifetime',this['lifetime']),_0x444db4['setParamet'+'er']('rate',this['rate']),_0x444db4['setParamet'+'er']('rateDiv',this['rate2']-this['rate']),_0x444db4['setParamet'+'er']('seed',this['seed']),_0x444db4['setParamet'+'er']('scaleDivMu'+'lt',this['scaleUMax'][-0x3c1*-0x3+0x25a2+-0x30e5]),_0x444db4['setParamet'+'er']('alphaDivMu'+'lt',this['alphaUMax'][-0x1a2*0x1+0x1126+-0x3e1*0x4]),_0x444db4['setParamet'+'er']('radialSpee'+'dDivMult',this['radialSpee'+'dUMax'][0x157+0x2*0x11fb+-0x254d]),_0x444db4['setParamet'+'er']('graphNumSa'+'mples',this['precision']),_0x444db4['setParamet'+'er']('graphSampl'+'eSize',(-0x17*-0x17f+-0xb1d+-0x174b)/this['precision']),_0x444db4['setParamet'+'er']('emitterSca'+'le',new Float32Array([-0x190f+-0x1a8a+0x529*0xa,-0x1d*-0xcd+-0x3*-0xb67+0x396d*-0x1,0x7ef+0x4d*-0x37+0x89d])),this['pack8']&&(this['_gpuUpdate'+'r']['_setInputB'+'ounds'](),_0x444db4['setParamet'+'er']('inBoundsSi'+'ze',this['_gpuUpdate'+'r']['inBoundsSi'+'zeUniform']),_0x444db4['setParamet'+'er']('inBoundsCe'+'nter',this['_gpuUpdate'+'r']['inBoundsCe'+'nterUnifor'+'m']),_0x444db4['setParamet'+'er']('maxVel',this['maxVel'])),this['wrap']&&this['wrapBounds']&&(this['wrapBounds'+'Uniform'][-0x15c1+-0x384+-0x1*-0x1945]=this['wrapBounds']['x'],this['wrapBounds'+'Uniform'][-0x1*-0x139d+0x244d+-0x37e9]=this['wrapBounds']['y'],this['wrapBounds'+'Uniform'][0x2c6*0x2+0x2148+-0x26d2*0x1]=this['wrapBounds']['z'],_0x444db4['setParamet'+'er']('wrapBounds',this['wrapBounds'+'Uniform'])),this['_setMateri'+'alTextures'](),this['depthSofte'+'ning']>-0x1cb*-0x14+-0x1d*0x11+-0x21ef&&_0x444db4['setParamet'+'er']('softening',(-0x11bd+-0xa3*0x8+0x4a*0x4f)/(this['depthSofte'+'ning']*this['depthSofte'+'ning']*(0x11eb+0x2081+-0x3208))),this['stretch']>0x165c+0x13d+-0x1799&&(_0x444db4['cull']=bt),this['_compParti'+'cleFacePar'+'ams']();}['_compParti'+'cleFacePar'+'ams'](){let _0x40ae50,_0xf8fc3c;if(this['orientatio'+'n']===Zc)_0x40ae50=new Float32Array([0xc70+0x8*0x380+0x286f*-0x1,-0x37*0x1+0xe16+0x1*-0xddf,-0xfa2+0x1d3b+-0xd99]),_0xf8fc3c=new Float32Array([0x1f63*-0x1+0x632+-0x1*-0x1931,0x1*0x1959+-0x33*0x4f+-0x99c,0xb4c*-0x3+-0x1507+0xdbb*0x4]);else{let _0x26702c;this['orientatio'+'n']===aw?_0x26702c=this['particleNo'+'rmal']['normalize']():_0x26702c=(this['node']===null?te['IDENTITY']:this['node']['getWorldTr'+'ansform']())['transformV'+'ector'](this['particleNo'+'rmal'])['normalize']();const _0x24886f=new D(-0xad1+0x2*-0xdd2+-0x1*-0x2676,0x11*0x1a7+-0xad*-0x7+-0x20d2,-0x13*-0xbf+-0x1086+-0x259*-0x1);Math['abs'](_0x24886f['dot'](_0x26702c))===0x121d+-0x1b53+0x937*0x1&&_0x24886f['set'](0x58a*-0x4+0x49*0x75+-0x97*0x13,-0x1*-0x23f3+-0x552+0x1ea1*-0x1,0x1d77+-0x1106+-0xc70);const _0x227e5b=new D()['cross'](_0x26702c,_0x24886f)['normalize']();_0x24886f['cross'](_0x227e5b,_0x26702c)['normalize'](),_0x40ae50=new Float32Array([_0x24886f['x'],_0x24886f['y'],_0x24886f['z']]),_0xf8fc3c=new Float32Array([_0x227e5b['x'],_0x227e5b['y'],_0x227e5b['z']]);}this['material']['setParamet'+'er']('faceTangen'+'t',_0x40ae50),this['material']['setParamet'+'er']('faceBinorm',_0xf8fc3c);}['getVertexI'+'nfo'](){const _0x5817bc=[];return this['useCpu']?_0x5817bc['push']({'semantic':Cf,'components':0x4,'type':Ve},{'semantic':$c,'components':0x4,'type':Ve},{'semantic':Ju,'components':0x4,'type':Ve},{'semantic':ep,'components':0x1,'type':Ve},{'semantic':tp,'components':this['useMesh']?-0x1f62+0xbcc+0x139a:-0x147a+0x2c*-0x32+-0x1d14*-0x1,'type':Ve}):(_0x5817bc['push']({'semantic':Cf,'components':0x4,'type':Ve}),this['useMesh']&&_0x5817bc['push']({'semantic':$c,'components':0x2,'type':Ve})),_0x5817bc;}['_allocate'](_0x34a584){const _0x25e9ba=_0x34a584*this['numParticl'+'eVerts'],_0x5aaa21=_0x34a584*this['numParticl'+'eIndices'];if(this['vertexBuff'+'er']===void(0x1723+0x1273*-0x2+-0x1*-0xdc3)||this['vertexBuff'+'er']['getNumVert'+'ices']()!==_0x25e9ba){const _0x42c7c9=this['getVertexI'+'nfo'](),_0x246811=new kt(this['graphicsDe'+'vice'],_0x42c7c9);this['vertexBuff'+'er']=new Ds(this['graphicsDe'+'vice'],_0x246811,_0x25e9ba,{'usage':zc}),this['indexBuffe'+'r']=new xr(this['graphicsDe'+'vice'],yr,_0x5aaa21);const _0x2e29d1=new Float32Array(this['vertexBuff'+'er']['lock']());let _0x965f9,_0x122a9e,_0x1c0d8a;if(this['useMesh']){_0x965f9=new Float32Array(this['mesh']['vertexBuff'+'er']['lock']()),_0x122a9e=_0x965f9['length']/this['mesh']['vertexBuff'+'er']['numVertice'+'s'];for(let _0x5a65b2=0x1341+0x2047*0x1+-0x3388;_0x5a65b2<this['mesh']['vertexBuff'+'er']['format']['elements']['length'];_0x5a65b2++)if(this['mesh']['vertexBuff'+'er']['format']['elements'][_0x5a65b2]['name']===is){_0x1c0d8a=this['mesh']['vertexBuff'+'er']['format']['elements'][_0x5a65b2]['offset']/(0x6*-0x57b+0x110f+0xfd7);break;}}for(let _0x281674=-0x901+0xdd0+0x4cf*-0x1;_0x281674<_0x25e9ba;_0x281674++){const _0x21a0a3=Math['floor'](_0x281674/this['numParticl'+'eVerts']);if(this['useMesh']){const _0x35eb1b=_0x281674%this['numParticl'+'eVerts'];_0x2e29d1[_0x281674*(0x9f8+0xa4a+-0x143c)]=_0x965f9[_0x35eb1b*_0x122a9e],_0x2e29d1[_0x281674*(0x277+0x26c0+0x5f*-0x6f)+(0x2038+0x87b*-0x1+-0x1c*0xd9)]=_0x965f9[_0x35eb1b*_0x122a9e+(-0x9d*-0x13+0x1b6a+0x64*-0x64)],_0x2e29d1[_0x281674*(-0x10cb+0xb*0x97+0x2*0x52a)+(-0x2af*-0x5+0x1c3f+-0x29a8)]=_0x965f9[_0x35eb1b*_0x122a9e+(-0x18*0x158+-0x1*0x127f+0x32c1)],_0x2e29d1[_0x281674*(0x656+0x1*-0xa09+0x1*0x3b9)+(-0x1*0x793+0x180b+-0x1075)]=_0x21a0a3,_0x2e29d1[_0x281674*(0xdb3*-0x1+0x83a+-0x1*-0x57f)+(-0xe6a+0x56*-0x47+-0x118*-0x23)]=_0x965f9[_0x35eb1b*_0x122a9e+_0x1c0d8a+(0x1936+-0x184d*0x1+-0xe9)],_0x2e29d1[_0x281674*(0x265f+0x1886+0xf*-0x431)+(-0x1f7*-0x5+0x23c9+-0x2d97)]=0x3ad*0x1+0x1d+-0x3c9-_0x965f9[_0x35eb1b*_0x122a9e+_0x1c0d8a+(-0x2635+0x2419*-0x1+-0x33*-0x175)];}else{const _0x200ebf=_0x281674%(-0x1*-0x154f+-0x1*0x1395+-0x3*0x92);_0x2e29d1[_0x281674*(0x43a+0x3c*-0x1d+0x296)]=P_[_0x200ebf][0x14*0x1b7+0x1fb8+-0x152*0x32],_0x2e29d1[_0x281674*(-0x169d*-0x1+0xc3f+-0x22d8)+(0xb*-0x2bb+-0x1df0+0x3bfa)]=P_[_0x200ebf][0x25c1+0xe1a*0x1+-0x33da],_0x2e29d1[_0x281674*(-0x4e*0x17+0x8bf*-0x2+0x1884)+(0x434*0x1+-0xdce+0x99c)]=0x1cfd+0x1*-0x164+-0x1b99*0x1,_0x2e29d1[_0x281674*(0x12*-0xfc+-0xe93+0x204f)+(-0x234f+0x5*0x523+-0x9a3*-0x1)]=_0x21a0a3;}}this['useCpu']&&(this['vbCPU']=new Float32Array(_0x2e29d1),this['vbOld']=new Float32Array(this['vbCPU']['length'])),this['vertexBuff'+'er']['unlock'](),this['useMesh']&&this['mesh']['vertexBuff'+'er']['unlock']();let _0x392e00=0x22*-0x23+0x1*0x221+0x285;const _0x18eadb=new Uint32Array(this['indexBuffe'+'r']['lock']());if(this['useMesh']){const _0x229501=this['mesh']['indexBuffe'+'r'][-0x11ed+-0x2465+0x3652];_0x965f9=new Kc[_0x229501['format']](_0x229501['lock']());}for(let _0x36fa80=-0x130+-0x1*0x5dd+0x70d;_0x36fa80<_0x34a584;_0x36fa80++)if(this['useMesh']){for(let _0x2d8490=0x129f*-0x1+0x630+-0xc6f*-0x1;_0x2d8490<this['numParticl'+'eIndices'];_0x2d8490++)_0x18eadb[_0x36fa80*this['numParticl'+'eIndices']+_0x2d8490]=_0x965f9[_0x2d8490]+_0x36fa80*this['numParticl'+'eVerts'];}else{const _0x1a20d2=_0x36fa80*(-0xc81*0x1+-0x2194+0x2e19);_0x18eadb[_0x392e00++]=_0x1a20d2,_0x18eadb[_0x392e00++]=_0x1a20d2+(0x2209*0x1+0x678+-0x2880),_0x18eadb[_0x392e00++]=_0x1a20d2+(0xbc*0x18+0x2167+-0x3305),_0x18eadb[_0x392e00++]=_0x1a20d2,_0x18eadb[_0x392e00++]=_0x1a20d2+(0x1944+0x2b*0x85+-0x5*0x985),_0x18eadb[_0x392e00++]=_0x1a20d2+(0xdcd*0x1+-0xee6+0x11c);}this['indexBuffe'+'r']['unlock'](),this['useMesh']&&this['mesh']['indexBuffe'+'r'][0x469+-0x2*-0x1cd+0x125*-0x7]['unlock']();}}['reset'](){if(this['beenReset']=!(0x13b2+0x8fb*0x3+0x1*-0x2ea3),this['seed']=Math['random'](),this['material']['setParamet'+'er']('seed',this['seed']),this['useCpu']){for(let _0xb324b4=0xfa*-0x25+-0x4*0x7a7+-0x1*-0x42be;_0xb324b4<this['particleTe'+'xStart']['length'];_0xb324b4++)this['particleTe'+'x'][_0xb324b4]=this['particleTe'+'xStart'][_0xb324b4];}else this['_setMateri'+'alTextures']();this['resetWorld'+'Bounds'](),this['resetTime']();const _0x55885f=this['loop'];this['loop']=!(-0x1a11*0x1+-0x24c4+0x1*0x3ed5),this['addTime'](0xfbd+0xa72+-0x1a2f,!(0x2*0x1031+-0xe42*-0x1+0x1*-0x2ea3)),this['loop']=_0x55885f,this['preWarm']&&this['prewarm'](this['lifetime']);}['prewarm'](_0x312f3d){const _0x3bb448=_0x312f3d/this['lifetime'],_0x3231a8=Math['min'](Math['floor'](_0x3bb448*this['precision']),this['precision']),_0x443b1e=_0x312f3d/_0x3231a8;for(let _0x33c8bb=0x90d*0x1+-0x11d7*-0x1+0x6b9*-0x4;_0x33c8bb<_0x3231a8;_0x33c8bb++)this['addTime'](_0x443b1e,!(0x875+-0x1167+0x8f3));}['resetTime'](){this['endTime']=Vb(this);}['finishFram'+'e'](){this['useCpu']&&this['vertexBuff'+'er']['unlock']();}['addTime'](_0x192c7a,_0x4ccff9){const _0x4343f4=this['graphicsDe'+'vice'],_0x116ff8=de();if(this['simTimeTot'+'al']+=_0x192c7a,this['calculateW'+'orldBounds'](),this['_isAnimate'+'d']()){const _0x3fc95c=this['animTilesP'+'arams'];_0x3fc95c[0x1803+-0x5b*-0x1b+-0x219c]=(0x9e2+0x11d3+-0x1bb4)/this['animTilesX'],_0x3fc95c[0x10ac+0x2*0x8ea+-0x227f]=(-0x840+0xf21*0x2+0x83*-0x2b)/this['animTilesY'];const _0x2ed954=this['animParams'];_0x2ed954[-0x17*0x95+0x1243+-0x4e0]=this['animStartF'+'rame'],_0x2ed954[-0xf77+0x1a09+-0xa91*0x1]=this['animNumFra'+'mes']*this['animSpeed'],_0x2ed954[-0x18ca+-0x124a+0x2b16]=this['animNumFra'+'mes']-(-0x1ac9+0xd*-0x1a2+-0x6dc*-0x7),_0x2ed954[0x1490+-0x911+-0xb7c]=this['animNumAni'+'mations']-(-0x3*0x74b+0x159b+0x47);const _0x122541=this['animIndexP'+'arams'];_0x122541[0xca*0x3+-0x1*-0xbb3+-0xe11]=this['animIndex'],_0x122541[0x161b*-0x1+0x2563+-0xf47]=this['randomizeA'+'nimIndex'];}this['scene']&&this['camera']!==this['scene']['_activeCam'+'era']&&(this['camera']=this['scene']['_activeCam'+'era'],this['onChangeCa'+'mera']()),this['emitterSha'+'pe']===ai&&(Ai[-0x1c8c+0xdfd+0xe8f]=this['emitterExt'+'ents']['x']!==0x21cd+-0x1cb6+0x517*-0x1?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0xa49*0x2+0xba1+-0x2033*0x1,Ai[-0x539+0x181b+-0x12e1]=this['emitterExt'+'ents']['y']!==-0x5f*0xb+0x1*-0xae7+-0x2*-0x77e?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:-0x4*-0x6b9+0x2614+-0x948*0x7,Ai[-0x1fb4+0xd27+0x128f]=this['emitterExt'+'ents']['z']!==-0x7e*0x21+-0x1086+0x9*0x3a4?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x1b7d+-0x1981+-0x1fc,this['meshInstan'+'ce']['node']===null?Or['setTRS'](D['ZERO'],le['IDENTITY'],this['emitterExt'+'ents']):Or['setTRS'](D['ZERO'],this['meshInstan'+'ce']['node']['getRotatio'+'n'](),R_['copy'](this['emitterExt'+'ents'])['mul'](this['meshInstan'+'ce']['node']['localScale'])));let _0x58b64a;const _0x514420=this['meshInstan'+'ce']['node']===null?D['ONE']:this['meshInstan'+'ce']['node']['localScale'];if(this['emitterSca'+'leUniform'][-0x1085+-0x3b9*0x7+0x6d*0x64]=_0x514420['x'],this['emitterSca'+'leUniform'][0x2a*-0x1f+0x1a52+-0x153b]=_0x514420['y'],this['emitterSca'+'leUniform'][0x2*-0xa+0x4*-0x8c9+0x233a]=_0x514420['z'],this['material']['setParamet'+'er']('emitterSca'+'le',this['emitterSca'+'leUniform']),this['localSpace']&&this['meshInstan'+'ce']['node']&&(_0x58b64a=this['meshInstan'+'ce']['node']['getPositio'+'n'](),this['emitterPos'+'Uniform'][0xbd1+-0x9d+-0xb34]=_0x58b64a['x'],this['emitterPos'+'Uniform'][0x16e1+0xa*-0x17f+-0x7ea]=_0x58b64a['y'],this['emitterPos'+'Uniform'][-0x88*0x2e+0x1159+0x4f*0x17]=_0x58b64a['z'],this['material']['setParamet'+'er']('emitterPos',this['emitterPos'+'Uniform'])),this['_compParti'+'cleFacePar'+'ams'](),!this['useCpu'])this['_gpuUpdate'+'r']['update'](_0x4343f4,Or,Ai,_0x192c7a,_0x4ccff9);else{const _0x106b7c=new Float32Array(this['vertexBuff'+'er']['lock']());this['_cpuUpdate'+'r']['update'](_0x106b7c,this['vbToSort'],this['particleTe'+'x'],Or,Ai,_0x58b64a,_0x192c7a,_0x4ccff9);}this['loop']||Date['now']()>this['endTime']&&(this['onFinished']&&this['onFinished'](),this['meshInstan'+'ce']['visible']=!(0x3*-0x4a5+0x298+0xb*0x108)),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['drawOrder']=this['drawOrder']),this['_addTimeTi'+'me']+=de()-_0x116ff8;}['_destroyRe'+'sources'](){var _0x2a4feb,_0xf15c52,_0x1a7376,_0x45b4dd,_0x58ebba,_0x19abf2,_0x377c37,_0x5e9086,_0x15c4cb,_0x2a0b7b,_0x2c1377,_0x1da281;(_0x2a4feb=this['particleTe'+'xIN'])==null||_0x2a4feb['destroy'](),this['particleTe'+'xIN']=null,(_0xf15c52=this['particleTe'+'xOUT'])==null||_0xf15c52['destroy'](),this['particleTe'+'xOUT']=null,this['particleTe'+'xStart']&&this['particleTe'+'xStart']['destroy']&&(this['particleTe'+'xStart']['destroy'](),this['particleTe'+'xStart']=null),(_0x1a7376=this['rtParticle'+'TexIN'])==null||_0x1a7376['destroy'](),this['rtParticle'+'TexIN']=null,(_0x45b4dd=this['rtParticle'+'TexOUT'])==null||_0x45b4dd['destroy'](),this['rtParticle'+'TexOUT']=null,(_0x58ebba=this['internalTe'+'x0'])==null||_0x58ebba['destroy'](),this['internalTe'+'x0']=null,(_0x19abf2=this['internalTe'+'x1'])==null||_0x19abf2['destroy'](),this['internalTe'+'x1']=null,(_0x377c37=this['internalTe'+'x2'])==null||_0x377c37['destroy'](),this['internalTe'+'x2']=null,(_0x5e9086=this['internalTe'+'x3'])==null||_0x5e9086['destroy'](),this['internalTe'+'x3']=null,(_0x15c4cb=this['colorParam'])==null||_0x15c4cb['destroy'](),this['colorParam']=null,(_0x2a0b7b=this['vertexBuff'+'er'])==null||_0x2a0b7b['destroy'](),this['vertexBuff'+'er']=void(-0xf05+0x9a3+0x562),(_0x2c1377=this['indexBuffe'+'r'])==null||_0x2c1377['destroy'](),this['indexBuffe'+'r']=void(-0x438+-0x1*-0x5+0x2b*0x19),(_0x1da281=this['material'])==null||_0x1da281['destroy'](),this['material']=null;}['destroy'](){this['camera']=null,this['_destroyRe'+'sources']();}}class Xb extends pa{['generateKe'+'y'](_0x22a504){var _0x2d995c;const _0x29ef96=_0x22a504['shaderDesc'],_0x4d1c73=_0x29ef96['vertexGLSL']?hi(_0x29ef96['vertexGLSL']):-0x1c9b+-0xf8c+-0x2c27*-0x1,_0x2f2ded=_0x29ef96['fragmentGL'+'SL']?hi(_0x29ef96['fragmentGL'+'SL']):0x1df5*0x1+-0x1542+-0x8b3,_0x5041f9=_0x29ef96['vertexWGSL']?hi(_0x29ef96['vertexWGSL']):-0x53*-0x3f+0x9*-0x124+0x363*-0x3,_0x2ea5a5=_0x29ef96['fragmentWG'+'SL']?hi(_0x29ef96['fragmentWG'+'SL']):-0x1e0d+-0x1cde+-0x1*-0x3aeb,_0x288c7=pa['definesHas'+'h'](_0x22a504['defines']),_0x32c1b7=((_0x2d995c=_0x22a504['shaderChun'+'ks'])==null?void(-0x63+0x32a+-0x2c7):_0x2d995c['key'])??'';let _0x4a5dd2=_0x29ef96['uniqueName']+'_'+_0x288c7+'_'+_0x4d1c73+'_'+_0x2f2ded+'_'+_0x5041f9+'_'+_0x2ea5a5+'_'+_0x32c1b7;return _0x22a504['skin']&&(_0x4a5dd2+='_skin'),_0x22a504['useInstanc'+'ing']&&(_0x4a5dd2+='_inst'),_0x22a504['useMorphPo'+'sition']&&(_0x4a5dd2+='_morphp'),_0x22a504['useMorphNo'+'rmal']&&(_0x4a5dd2+='_morphn'),_0x22a504['useMorphTe'+'xtureBased'+'Int']&&(_0x4a5dd2+='_morphi'),_0x4a5dd2;}['createAttr'+'ibutesDefi'+'nition'](_0x5498ec,_0x12e4b9){const _0x503993=_0x12e4b9['shaderDesc']['attributes'],_0x53f26b=_0x503993?{..._0x503993}:void(-0x150c+-0x22*-0x116+0x4*-0x3f8);_0x12e4b9['skin']&&(_0x53f26b['vertex_bon'+'eWeights']=gi,_0x53f26b['vertex_bon'+'eIndices']=us),(_0x12e4b9['useMorphPo'+'sition']||_0x12e4b9['useMorphNo'+'rmal'])&&(_0x53f26b['morph_vert'+'ex_id']=bn),_0x5498ec['attributes']=_0x53f26b;}['createVert'+'exDefiniti'+'on'](_0x530a2b,_0x29cc45,_0x262ab1,_0x54f81d){const _0x24c5da=_0x29cc45['shaderDesc'],_0x15b8d2=new Map(_0x262ab1);_0x15b8d2['set']('transformI'+'nstancingV'+'S','');const _0x20cd1b=new Map(_0x29cc45['defines']);_0x29cc45['skin']&&_0x20cd1b['set']('SKIN',!(-0xf04+-0x1bcf+0x2ad3)),_0x29cc45['useInstanc'+'ing']&&_0x20cd1b['set']('INSTANCING',!(0x1*0x1937+-0xb5*0x13+-0x8*0x179)),(_0x29cc45['useMorphPo'+'sition']||_0x29cc45['useMorphNo'+'rmal'])&&(_0x20cd1b['set']('MORPHING',!(0x29d*-0x7+-0x1098+0x27*0xe5)),_0x29cc45['useMorphTe'+'xtureBased'+'Int']&&_0x20cd1b['set']('MORPHING_I'+'NT',!(-0x14eb+0x123*0x9+-0x30*-0x39)),_0x29cc45['useMorphPo'+'sition']&&_0x20cd1b['set']('MORPHING_P'+'OSITION',!(0x19e5+-0x259a+0x6f*0x1b)),_0x29cc45['useMorphNo'+'rmal']&&_0x20cd1b['set']('MORPHING_N'+'ORMAL',!(-0x1f1a+-0x1ae4+0x1cff*0x2))),_0x530a2b['vertexCode']=_0x54f81d?_0x24c5da['vertexWGSL']:_0x24c5da['vertexGLSL'],_0x530a2b['vertexIncl'+'udes']=_0x15b8d2,_0x530a2b['vertexDefi'+'nes']=_0x20cd1b;}['createFrag'+'mentDefini'+'tion'](_0x5e08bd,_0x455b7a,_0x3c7f29,_0x3371aa){const _0x53bb73=_0x455b7a['shaderDesc'],_0x309c72=new Map(_0x3c7f29),_0x3482c4=new Map(_0x455b7a['defines']);_0x5e08bd['fragmentCo'+'de']=_0x3371aa?_0x53bb73['fragmentWG'+'SL']:_0x53bb73['fragmentGL'+'SL'],_0x5e08bd['fragmentIn'+'cludes']=_0x309c72,_0x5e08bd['fragmentDe'+'fines']=_0x3482c4;}['createShad'+'erDefiniti'+'on'](_0x50e947,_0x16b52c){var _0x19d930;const _0x289ffe=_0x16b52c['shaderDesc'],_0x13c03b=_0x50e947['isWebGPU']&&!!_0x289ffe['vertexWGSL']&&!!_0x289ffe['fragmentWG'+'SL']&&(((_0x19d930=_0x16b52c['shaderChun'+'ks'])==null?void(-0x86*0x10+-0x257*0x8+0x1b18):_0x19d930['useWGSL'])??!(-0xee9*0x2+0x133c*0x2+-0x8a6)),_0x274d23={'name':'ShaderMate'+'rial-'+_0x289ffe['uniqueName'],'shaderLanguage':_0x13c03b?it:Fe,'fragmentOutputTypes':_0x289ffe['fragmentOu'+'tputTypes'],'meshUniformBufferFormat':_0x289ffe['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x289ffe['meshBindGr'+'oupFormat']},_0x77c369=_0x13c03b?it:Fe,_0x3f85a2=ih['merge'](Ce['get'](_0x50e947,_0x77c369),_0x16b52c['shaderChun'+'ks'][_0x77c369]);return this['createAttr'+'ibutesDefi'+'nition'](_0x274d23,_0x16b52c),this['createVert'+'exDefiniti'+'on'](_0x274d23,_0x16b52c,_0x3f85a2,_0x13c03b),this['createFrag'+'mentDefini'+'tion'](_0x274d23,_0x16b52c,_0x3f85a2,_0x13c03b),Jt['createDefi'+'nition'](_0x50e947,_0x274d23);}}const qb=new Xb();class Bn extends er{constructor(_0x5ed2e0){super(),h(this,'_shaderDes'+'c'),this['shaderDesc']=_0x5ed2e0;}set['shaderDesc'](_0x246294){if(this['_shaderDes'+'c']=void(-0x1e1*0x9+-0x446*-0x5+0xa3*-0x7),_0x246294&&(this['_shaderDes'+'c']={'uniqueName':_0x246294['uniqueName'],'attributes':_0x246294['attributes'],'fragmentOutputTypes':_0x246294['fragmentOu'+'tputTypes'],'vertexGLSL':_0x246294['vertexGLSL'],'fragmentGLSL':_0x246294['fragmentGL'+'SL'],'vertexWGSL':_0x246294['vertexWGSL'],'fragmentWGSL':_0x246294['fragmentWG'+'SL']},_0x246294['vertexCode']||_0x246294['fragmentCo'+'de']||_0x246294['shaderLang'+'uage'])){w['deprecated']('ShaderMate'+'rial\x20['+_0x246294['uniqueName']+(']:\x20vertexC'+'ode,\x20fragm'+'entCode\x20an'+'d\x20shaderLa'+'nguage\x20pro'+'perties\x20of'+'\x20ShaderDes'+'c\x20is\x20depre'+'cated.\x20Use'+'\x20vertexGLS'+'L,\x20fragmen'+'tGLSL,\x20ver'+'texWGSL\x20or'+'\x20fragmentW'+'GSL\x20instea'+'d.'));const _0x5a82f2=_0x246294['shaderLang'+'uage']??Fe;_0x5a82f2===Fe?(this['_shaderDes'+'c']['vertexGLSL']=_0x246294['vertexCode'],this['_shaderDes'+'c']['fragmentGL'+'SL']=_0x246294['fragmentCo'+'de']):_0x5a82f2===it&&(this['_shaderDes'+'c']['vertexWGSL']=_0x246294['vertexCode'],this['_shaderDes'+'c']['fragmentWG'+'SL']=_0x246294['fragmentCo'+'de']);}this['clearVaria'+'nts']();}get['shaderDesc'](){return this['_shaderDes'+'c'];}['copy'](_0x31da40){return super['copy'](_0x31da40),this['shaderDesc']=_0x31da40['shaderDesc'],this;}['getShaderV'+'ariant'](_0x767524){const {objDefs:_0x39e4b4}=_0x767524,_0x23831e={'defines':$t['getCoreDef'+'ines'](this,_0x767524),'skin':(_0x39e4b4&qo)!==-0x13*0x119+-0x1363+-0x33*-0xca,'useInstancing':(_0x39e4b4&jo)!==-0x47e*0x1+0x124+0x3*0x11e,'useMorphPosition':(_0x39e4b4&Yo)!==-0x152*-0x11+0x298*0x5+-0x236a,'useMorphNormal':(_0x39e4b4&Ko)!==-0xf41+0xf21*0x2+-0x1*0xf01,'useMorphTextureBasedInt':(_0x39e4b4&Zo)!==0x969+0x8f*0xb+-0xf8e,'pass':_0x767524['pass'],'gamma':_0x767524['cameraShad'+'erParams']['shaderOutp'+'utGamma'],'toneMapping':_0x767524['cameraShad'+'erParams']['toneMappin'+'g'],'fog':_0x767524['cameraShad'+'erParams']['fog'],'shaderDesc':this['shaderDesc'],'shaderChunks':this['shaderChun'+'ks']},_0x1f2f51=new rd(_0x767524['viewUnifor'+'mFormat'],_0x767524['viewBindGr'+'oupFormat'],_0x767524['vertexForm'+'at']),_0x31300d=Nn(_0x767524['device']);return _0x31300d['register']('shader-mat'+'erial',qb),_0x31300d['getProgram']('shader-mat'+'erial',_0x23831e,_0x1f2f51,this['userId']);}}const Yy=(_0x2043ae,_0x12da7c)=>{const _0x5d485e=_0x12da7c['length']/(-0x1d5*0x13+0xe38+-0x9*-0x24a),_0x3c3986=_0x2043ae['length']/(-0x416+-0x3a*-0x8b+-0x1b65),_0x2a38b6=new D(),_0x255c91=new D(),_0x4cd2d3=new D(),_0x56e441=new D(),_0x2f0701=new D(),_0x1db782=new D(),_0x159d1b=[];for(let _0x3bedb3=-0x24be+-0x2f*0x4d+0x209*0x19;_0x3bedb3<_0x2043ae['length'];_0x3bedb3++)_0x159d1b[_0x3bedb3]=-0xb1*0x11+0x1b2+0xa0f*0x1;for(let _0x51bfd3=-0x1d87+-0x1572+-0x32f9*-0x1;_0x51bfd3<_0x5d485e;_0x51bfd3++){const _0x49601f=_0x12da7c[_0x51bfd3*(-0x10d*-0xb+-0x3fb*0x5+0x85b)],_0x184051=_0x12da7c[_0x51bfd3*(-0x1*0xeea+-0x6ab+-0x1598*-0x1)+(-0x4*-0x370+0x19a+0xf59*-0x1)],_0x543599=_0x12da7c[_0x51bfd3*(0x22d4+0xa*0x6d+-0x2713)+(-0x41*-0x62+-0x1*0x143e+-0x4a2)];_0x2a38b6['set'](_0x2043ae[_0x49601f*(-0x73a*-0x4+0x868+0xc6f*-0x3)],_0x2043ae[_0x49601f*(0x2*-0x50b+-0x1*-0x8c5+0x154)+(0x189d+0x1*0x217+-0x5*0x557)],_0x2043ae[_0x49601f*(-0x193f+0x1b7f+-0xbf*0x3)+(0xb4a+0x5*0xcf+0xf53*-0x1)]),_0x255c91['set'](_0x2043ae[_0x184051*(-0x2*-0xb15+0x16e9+-0x2d10)],_0x2043ae[_0x184051*(-0xad4+-0x1a55+0x4e*0x7a)+(0x7b*-0x3f+-0x266*-0x2+0x2*0xcbd)],_0x2043ae[_0x184051*(0xd79*0x1+-0x1c75+0xeff)+(-0x1f87+0x14e1+0xaa8)]),_0x4cd2d3['set'](_0x2043ae[_0x543599*(-0x49*0x79+-0x1a5f+-0x4af*-0xd)],_0x2043ae[_0x543599*(-0x11c5+-0x31f*0x1+0x14e7)+(-0x1491+-0x1*0x243e+0x650*0x9)],_0x2043ae[_0x543599*(-0x8*0xe4+-0x20eb+0x6ad*0x6)+(-0x2*-0xa7+0x3e*-0x25+0x1*0x7aa)]),_0x56e441['sub2'](_0x255c91,_0x2a38b6),_0x2f0701['sub2'](_0x4cd2d3,_0x2a38b6),_0x1db782['cross'](_0x56e441,_0x2f0701)['normalize'](),_0x159d1b[_0x49601f*(0x1609+-0xa47+-0x61*0x1f)]+=_0x1db782['x'],_0x159d1b[_0x49601f*(0x1d*-0x1b+-0x102+0x414)+(0x11*-0x1d1+0x25a5+0x3*-0x241)]+=_0x1db782['y'],_0x159d1b[_0x49601f*(-0x189c+-0x1eaf+-0x1*-0x374e)+(-0x1*0x1df2+0x10cf+0x1*0xd25)]+=_0x1db782['z'],_0x159d1b[_0x184051*(-0x24*-0x3b+0xc5*0x10+0x1*-0x1499)]+=_0x1db782['x'],_0x159d1b[_0x184051*(0x250e+0x12ae*-0x2+0x51)+(0x6fd*0x5+-0xc86+-0x1*0x166a)]+=_0x1db782['y'],_0x159d1b[_0x184051*(-0x1ce2+-0x9f8*0x3+-0x3acd*-0x1)+(-0x2115+-0x85*0x37+0x3daa)]+=_0x1db782['z'],_0x159d1b[_0x543599*(0x6b*0x43+0x36f*0x4+-0x29ba)]+=_0x1db782['x'],_0x159d1b[_0x543599*(-0x1771+0x4*-0x505+0x2b88)+(0x1a4f+-0x20f*-0x2+-0x1e6c)]+=_0x1db782['y'],_0x159d1b[_0x543599*(-0x473*0x5+0x29e*-0x5+0x4*0x8d6)+(0xe0f+-0x2122+0x1315)]+=_0x1db782['z'];}for(let _0x295566=0x17d5*0x1+0xc*-0x68+-0x17*0xd3;_0x295566<_0x3c3986;_0x295566++){const _0x3bf304=_0x159d1b[_0x295566*(-0xb8a+-0x53b+0x10c8)],_0x9ac61e=_0x159d1b[_0x295566*(-0x19d5+-0x326+0xe7f*0x2)+(0x268+-0xb7a+0x65*0x17)],_0x43821f=_0x159d1b[_0x295566*(0xbed+0x1*0x3f3+-0xfdd)+(-0x16db+0x956+0xd87*0x1)],_0x361b00=(-0x26*-0xe2+0x1a9a+-0x3c25)/Math['sqrt'](_0x3bf304*_0x3bf304+_0x9ac61e*_0x9ac61e+_0x43821f*_0x43821f);_0x159d1b[_0x295566*(0x1*0x689+0x63b+0xcc1*-0x1)]*=_0x361b00,_0x159d1b[_0x295566*(-0x13d5+-0x24af*0x1+0x1d*0x1f3)+(-0x864+0x111b+-0x8b6)]*=_0x361b00,_0x159d1b[_0x295566*(-0x2280+-0x669+-0x6c*-0x61)+(-0x1*0x1200+0x53f*0x4+-0x2fa)]*=_0x361b00;}return _0x159d1b;},br=(_0xef2ac7,_0x416c1a,_0x415d6d,_0x389d7b)=>{const _0x5c86a3=_0x389d7b['length']/(0x1ea1*0x1+-0x1bdc+-0x2c2),_0x482274=_0xef2ac7['length']/(0x445*-0x1+-0x1a3*0x2+0x2*0x3c7),_0x84ecc7=new D(),_0x4c7bfb=new D(),_0x25f662=new D(),_0x5ac963=new J(),_0x1192cf=new J(),_0x2d02b4=new J(),_0x4dffc8=new D(),_0x406df2=new D(),_0x428bfc=new Float32Array(_0x482274*(-0x3b6+-0x172b+-0x1*-0x1ae4)),_0x43f877=new Float32Array(_0x482274*(-0x247c+-0x2a1*0x1+-0x8*-0x4e4)),_0xd5a23c=[];for(let _0x2f07f0=-0x1852+0x217*0x1+-0x10f*-0x15;_0x2f07f0<_0x5c86a3;_0x2f07f0++){const _0xe3df67=_0x389d7b[_0x2f07f0*(0x2600+0x745*0x5+-0x4a56)],_0x52c1b9=_0x389d7b[_0x2f07f0*(0x1024+0x190c+-0x292d)+(0xe3b+0x29*-0x17+0xa8b*-0x1)],_0x5588d0=_0x389d7b[_0x2f07f0*(-0x173*0x5+0xd60+0x20a*-0x3)+(-0x22*0x69+0x1e9e*-0x1+0x2c92)];_0x84ecc7['set'](_0xef2ac7[_0xe3df67*(0x131e*-0x1+0xa91+0x4*0x224)],_0xef2ac7[_0xe3df67*(0x1b44+0x43*0x2b+-0x2682)+(-0x10ab+-0x522+0x15ce)],_0xef2ac7[_0xe3df67*(-0x2408+0x14c2+0xf49)+(-0x253c*0x1+-0x16db+-0xb5*-0x55)]),_0x4c7bfb['set'](_0xef2ac7[_0x52c1b9*(0x3b*0x11+-0x6f5*0x1+0x30d*0x1)],_0xef2ac7[_0x52c1b9*(0x2*0x835+0x1708+0x276f*-0x1)+(-0x3ec+0x85*0x17+-0x806)],_0xef2ac7[_0x52c1b9*(-0x2cb+-0x180a+0x1ad8*0x1)+(0x122f+0xca7+-0x1ed4)]),_0x25f662['set'](_0xef2ac7[_0x5588d0*(-0xf1c+-0x263b+0x355a)],_0xef2ac7[_0x5588d0*(-0x312+-0x645+-0x15*-0x72)+(0xca0+-0xd*0x25+-0xfa*0xb)],_0xef2ac7[_0x5588d0*(0x192f+-0x1*-0x4e4+0x1*-0x1e10)+(0x358+0x1c32+-0x1f88)]),_0x5ac963['set'](_0x415d6d[_0xe3df67*(-0x1e30+0x1*0x11f4+0xc3e)],_0x415d6d[_0xe3df67*(-0x5*-0x12+-0x15e4+0x158c)+(-0x1ab+0x10ed*0x1+-0xf41)]),_0x1192cf['set'](_0x415d6d[_0x52c1b9*(-0x1*0xe4e+0xe3e+0x12*0x1)],_0x415d6d[_0x52c1b9*(0x4be+-0x423*-0x1+0x3*-0x2f5)+(-0xfe7+0x1ac6+-0x1a*0x6b)]),_0x2d02b4['set'](_0x415d6d[_0x5588d0*(0x2dc*0x8+0xd28+-0x35*0xae)],_0x415d6d[_0x5588d0*(0x919+-0x215f+-0x309*-0x8)+(-0x22ed+-0x220f+0x44fd)]);const _0x166794=_0x4c7bfb['x']-_0x84ecc7['x'],_0x330d42=_0x25f662['x']-_0x84ecc7['x'],_0x1e3732=_0x4c7bfb['y']-_0x84ecc7['y'],_0x2d0162=_0x25f662['y']-_0x84ecc7['y'],_0x317b75=_0x4c7bfb['z']-_0x84ecc7['z'],_0x1df4e1=_0x25f662['z']-_0x84ecc7['z'],_0x256fe3=_0x1192cf['x']-_0x5ac963['x'],_0x296c82=_0x2d02b4['x']-_0x5ac963['x'],_0x372813=_0x1192cf['y']-_0x5ac963['y'],_0x366a83=_0x2d02b4['y']-_0x5ac963['y'],_0x454ffb=_0x256fe3*_0x366a83-_0x296c82*_0x372813;if(_0x454ffb===-0xb64+0xe68*0x2+-0x116c)_0x4dffc8['set'](-0x2057+0x126b+0xdec,0x7*0x455+-0x1761+0x1*-0x6f1,0x1*-0x542+-0x1e14+0x2356),_0x406df2['set'](-0x1240+0xc*-0x193+0x1*0x2525,-0x4cb+0x1*0x27b+0x250,0x56*0x6f+-0x14*-0x1f1+0x260f*-0x2);else{const _0x5dbbbe=(0x6bc+-0xca4+-0x11*-0x59)/_0x454ffb;_0x4dffc8['set']((_0x366a83*_0x166794-_0x372813*_0x330d42)*_0x5dbbbe,(_0x366a83*_0x1e3732-_0x372813*_0x2d0162)*_0x5dbbbe,(_0x366a83*_0x317b75-_0x372813*_0x1df4e1)*_0x5dbbbe),_0x406df2['set']((_0x256fe3*_0x330d42-_0x296c82*_0x166794)*_0x5dbbbe,(_0x256fe3*_0x2d0162-_0x296c82*_0x1e3732)*_0x5dbbbe,(_0x256fe3*_0x1df4e1-_0x296c82*_0x317b75)*_0x5dbbbe);}_0x428bfc[_0xe3df67*(0x182*-0x12+-0x1*0x21c4+-0xc2f*-0x5)+(-0x4d1*0x2+-0x1*-0x2429+-0x1a87)]+=_0x4dffc8['x'],_0x428bfc[_0xe3df67*(0xfa+-0x217a+0x2083)+(0x1803+-0x269+-0x1599)]+=_0x4dffc8['y'],_0x428bfc[_0xe3df67*(0x17*-0x17f+0x413*0x5+0xe0d)+(0xcba+0x5ee+0x953*-0x2)]+=_0x4dffc8['z'],_0x428bfc[_0x52c1b9*(0x66c+-0x16f7+0x108e)+(0x488+-0x1*0x1e49+-0x15b*-0x13)]+=_0x4dffc8['x'],_0x428bfc[_0x52c1b9*(0x1b04+0x4*0x6ea+-0x36a9)+(0x71f*0x5+-0x3*0xb95+-0xdb)]+=_0x4dffc8['y'],_0x428bfc[_0x52c1b9*(0xb5*-0x1b+-0x15f1+-0x5dd*-0x7)+(-0x1ce0+0x1961*-0x1+-0x1d*-0x1df)]+=_0x4dffc8['z'],_0x428bfc[_0x5588d0*(0x17db+-0x763*-0x3+-0x2e01)+(0x2ce*0x7+-0x1*0xeed+-0x5*0xf1)]+=_0x4dffc8['x'],_0x428bfc[_0x5588d0*(0x73*-0xf+0x21b+0x4a5)+(0x820+0x13f6+-0x4f*0x5b)]+=_0x4dffc8['y'],_0x428bfc[_0x5588d0*(-0x6e*0x28+0x5*-0x2ab+0x1e8a)+(0x2*-0xfad+0x20fc+-0x4*0x68)]+=_0x4dffc8['z'],_0x43f877[_0xe3df67*(0x1012+-0x1*-0x14f7+-0x2506)+(0x115*-0x2+0x1c40+0x2*-0xd0b)]+=_0x406df2['x'],_0x43f877[_0xe3df67*(0x7*0x313+0x1eb*-0x1+0x127*-0x11)+(0x19d3+0x5b*-0x49+0x21)]+=_0x406df2['y'],_0x43f877[_0xe3df67*(0x1048+-0x3*-0x7c1+-0x2788)+(-0x84c+-0x113c*-0x2+-0x1a2a)]+=_0x406df2['z'],_0x43f877[_0x52c1b9*(0x1d15+-0x176f+0x5a3*-0x1)+(-0x149e+0x41c*0x2+0x45*0x2e)]+=_0x406df2['x'],_0x43f877[_0x52c1b9*(-0x16f7*0x1+-0x6*-0x56+0x14f6)+(0x5*-0x647+0x21cd+0x1*-0x269)]+=_0x406df2['y'],_0x43f877[_0x52c1b9*(0x1*0x12b3+0x1951+0x1*-0x2c01)+(0x3*0x4ad+0x17eb+-0x25f0)]+=_0x406df2['z'],_0x43f877[_0x5588d0*(-0x96e+-0x1*0x6ad+0x101e)+(0x1*-0xc0c+-0x1*-0x1069+-0x45d)]+=_0x406df2['x'],_0x43f877[_0x5588d0*(-0x1*0xbca+0x1e8+0x9e5)+(0x1*0x7e+-0x15cb+0x154e)]+=_0x406df2['y'],_0x43f877[_0x5588d0*(0x1ca9+0xf66+-0x2c0c)+(-0x7e4+-0x1*-0x1a05+0x1*-0x121f)]+=_0x406df2['z'];}const _0x22b9ea=new D(),_0x576653=new D(),_0x3d1051=new D(),_0xea2d60=new D();for(let _0x15b743=-0x21eb+0x8f*0x1c+0x1247;_0x15b743<_0x482274;_0x15b743++){_0x3d1051['set'](_0x416c1a[_0x15b743*(-0x1*0x831+-0x1b*0x43+0xf45)],_0x416c1a[_0x15b743*(-0x233*0x4+-0x229b+-0x15b5*-0x2)+(0x14b*-0xb+-0x801+0x163b)],_0x416c1a[_0x15b743*(-0xda+-0x135b+0xa1c*0x2)+(-0x19*0x117+-0xa8+0x1be9)]),_0x22b9ea['set'](_0x428bfc[_0x15b743*(-0x1a35+-0xcd4+0x270c)],_0x428bfc[_0x15b743*(-0x1*0x1cf7+0x2107+-0x40d)+(-0x1631+-0x3*-0x5f7+0x44d)],_0x428bfc[_0x15b743*(0x10b5+-0x1cf6+0xa*0x13a)+(-0xb7e+0x14*0x12e+-0xc18)]),_0x576653['set'](_0x43f877[_0x15b743*(-0x4*-0x8a8+-0x86a+0x13*-0x161)],_0x43f877[_0x15b743*(-0xcec+0x979+0x1*0x376)+(-0x1719+0x1*-0x8d+0x17a7*0x1)],_0x43f877[_0x15b743*(0xf2c+0x7ae+0x79d*-0x3)+(-0x1e71+0x912+0x1561)]);const _0x306acb=_0x3d1051['dot'](_0x22b9ea);_0xea2d60['copy'](_0x3d1051)['mulScalar'](_0x306acb),_0xea2d60['sub2'](_0x22b9ea,_0xea2d60)['normalize'](),_0xd5a23c[_0x15b743*(0x59a*0x5+0x18a+0x438*-0x7)]=_0xea2d60['x'],_0xd5a23c[_0x15b743*(0x132d+-0x21f2+-0x5*-0x2f5)+(0x25e*0x3+-0x11be+0xaa5)]=_0xea2d60['y'],_0xd5a23c[_0x15b743*(0x110*-0x3+0xbc5*0x1+0x2db*-0x3)+(-0x9c2*-0x1+-0x1315+0x1*0x955)]=_0xea2d60['z'],_0xea2d60['cross'](_0x3d1051,_0x22b9ea),_0xd5a23c[_0x15b743*(0x23bd+0xd17*-0x2+-0x98b)+(0x2153+0xc32+-0x2d82)]=_0xea2d60['dot'](_0x576653)<-0x35e*-0x2+0x173e+-0x1dfa?-(-0x183e+0x2293*-0x1+0x1d69*0x2):-0x3b*-0x3c+0x2*-0x3dc+0x61b*-0x1;}return _0xd5a23c;};class ga{constructor(){h(this,'positions'),h(this,'normals'),h(this,'colors'),h(this,'uvs'),h(this,'uvs1'),h(this,'blendIndic'+'es'),h(this,'blendWeigh'+'ts'),h(this,'tangents'),h(this,'indices');}['calculateN'+'ormals'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['normals']=Yy(this['positions'],this['indices']);}['calculateT'+'angents'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['normals'],'Geometry\x20m'+'ust\x20have\x20n'+'ormals\x20set'),w['assert'](this['uvs'],'Geometry\x20m'+'ust\x20have\x20u'+'vs\x20set'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']);}}const Gf=(0xe9c+0x24a7+-0x333f)/(0x3*0x61e+-0xd1e+-0x4fc),F_=0x1*0x1889+-0x5*0x5a3+-0x1*-0x3a7-Gf*(0x15b2+-0x94a+-0xc66);class Hf extends ga{constructor(_0x435b45={}){super();const _0xc3fdb7=_0x435b45['halfExtent'+'s']??new D(0x2c*-0xa0+-0x1*0x1b23+-0x36a3*-0x1+0.5,-0x29*0xf+-0x1309+0x1570+0.5,0x6b7+-0x1b0+0x8f*-0x9+0.5),_0x3588a7=_0x435b45['widthSegme'+'nts']??0x15da+-0x6f*0x29+0x412*-0x1,_0x9b1388=_0x435b45['lengthSegm'+'ents']??-0x61b*0x4+0x1c*-0x163+0x1*0x3f41,_0x2e6de5=_0x435b45['heightSegm'+'ents']??0x1c4f*-0x1+-0x55e*0x5+0x1*0x3726,_0x488275=_0x435b45['yOffset']??0x17a6+0xc53+-0x23f9,_0x420fe3=-_0xc3fdb7['y']+_0x488275,_0x246eef=_0xc3fdb7['y']+_0x488275,_0x10e5c7=[new D(-_0xc3fdb7['x'],_0x420fe3,_0xc3fdb7['z']),new D(_0xc3fdb7['x'],_0x420fe3,_0xc3fdb7['z']),new D(_0xc3fdb7['x'],_0x246eef,_0xc3fdb7['z']),new D(-_0xc3fdb7['x'],_0x246eef,_0xc3fdb7['z']),new D(_0xc3fdb7['x'],_0x420fe3,-_0xc3fdb7['z']),new D(-_0xc3fdb7['x'],_0x420fe3,-_0xc3fdb7['z']),new D(-_0xc3fdb7['x'],_0x246eef,-_0xc3fdb7['z']),new D(_0xc3fdb7['x'],_0x246eef,-_0xc3fdb7['z'])],_0x192f43=[[-0xe66+0xd*0x69+-0xd3*-0xb,-0x13*0x161+-0x9*0x39b+-0x27*-0x181,0x1097*0x2+0x2133+-0x425e],[-0x1c81+0x9b8+0x12cd,0x1*-0x65d+0x2261+-0x1bff,0x4ca*-0x3+0x2239*0x1+-0x13d4],[-0x1883+0x15a8+0x16f*0x2,0x18b*-0x3+0x16*-0x129+-0x1*-0x1e29,0x115*0x3+-0x22e4+0x2e1*0xb],[-0x193c+0x1de3+0x23*-0x22,-0x1*0x1625+0x721+0x4*0x3c1,0x1*-0x1e93+-0x7b9*-0x3+0x14*0x5f],[-0x21e2+-0x12d7+0x34ba,-0xf21+0xb*0x1c1+-0x426,-0x2003*0x1+-0xc75+-0x163d*-0x2],[0x20ea*-0x1+-0xb*-0x1b5+0xe28,0x12e*-0xa+-0x62e+-0xd*-0x162,0x1*0x35+-0x1*-0x9ef+-0x4a*0x23]],_0x4b9313=[[0x12*-0x143+0x1cd*0x1+0x14e9,-0x13*-0x19f+0x22d8+-0x1*0x41a5,0x2*-0x1365+-0x3*0x2fd+0x2fc2],[0x173e+-0x1*0x16af+-0x8f,0x1*0x229+0x586*-0x7+-0x74d*-0x5,-(0x223*0x6+-0xf76+0x1*0x2a5)],[0x2348+0xda2+-0x30ea,-0x1*0x15c+-0x435+0x592,0x3*-0xccd+0x2*0x1163+0x3a1],[-0x30a*0x1+-0x15af+0x18b9,-(-0x101d+0x1338+-0x31a),-0x9a5+-0x243b+0x5bc*0x8],[-0x1*0x1ac9+0x3d*-0x53+0x2e91,-0x696*0x1+-0x1*-0xb5f+-0x4c9,0x3*0x56+-0x5d4*0x4+0x164e],[-(0x1f75+-0x27*0x73+-0xdef),0xed9+-0x2258+0x137f,-0xb*0x278+0x3*-0xb5c+0x3d3c]],_0x2fa0b3={'FRONT':0x0,'BACK':0x1,'TOP':0x2,'BOTTOM':0x3,'RIGHT':0x4,'LEFT':0x5},_0x2e6b7c=[],_0x5872ad=[],_0x516c91=[],_0x238357=[];let _0x594356=0x1208*0x2+0x1*0xc63+-0x3073;const _0x3d4837=(_0x462118,_0xbf1c3f,_0x1d7a51)=>{const _0x568ade=new D(),_0x26719d=new D(),_0x3a2a7d=new D(),_0x2b789b=new D();for(let _0x4ec4ee=0x8e5+-0x13*-0x6b+0xa*-0x1af;_0x4ec4ee<=_0xbf1c3f;_0x4ec4ee++)for(let _0x10ee2e=0x21bc+-0x1e38+-0x19*0x24;_0x10ee2e<=_0x1d7a51;_0x10ee2e++){_0x568ade['lerp'](_0x10e5c7[_0x192f43[_0x462118][0x2*-0xd40+-0x114d+0x2bcd]],_0x10e5c7[_0x192f43[_0x462118][0xf*0x15b+-0x24e8+0x1094]],_0x4ec4ee/_0xbf1c3f),_0x26719d['lerp'](_0x10e5c7[_0x192f43[_0x462118][0x32*0x68+-0x1501+0xb1]],_0x10e5c7[_0x192f43[_0x462118][-0x2389+0x13e2+0xd3*0x13]],_0x10ee2e/_0x1d7a51),_0x3a2a7d['sub2'](_0x26719d,_0x10e5c7[_0x192f43[_0x462118][0x598*0x4+0x1*0x1369+-0x29c9]]),_0x2b789b['add2'](_0x568ade,_0x3a2a7d);let _0x205309=_0x4ec4ee/_0xbf1c3f,_0x5bad89=_0x10ee2e/_0x1d7a51;_0x2e6b7c['push'](_0x2b789b['x'],_0x2b789b['y'],_0x2b789b['z']),_0x5872ad['push'](_0x4b9313[_0x462118][-0x1c+0x1*-0x723+0x7*0x109],_0x4b9313[_0x462118][-0x469*-0x3+-0x2*0x49d+-0x400],_0x4b9313[_0x462118][-0x11e7+-0x134+0x131d]),_0x516c91['push'](_0x205309,-0x1b28+0x210c+-0x5e3-_0x5bad89),_0x205309=_0x205309*F_+Gf,_0x5bad89=_0x5bad89*F_+Gf,_0x205309/=0x2195*0x1+-0xdeb+-0x13a7,_0x5bad89/=-0x1*0x12aa+0x945+-0x4*-0x25a,_0x205309+=_0x462118%(0x24af+-0xc1*0x1+-0x23eb)/(0x1*-0xd55+-0xd68+0x1ac0),_0x5bad89+=Math['floor'](_0x462118/(0xb*0xf+-0xbc8+-0xb26*-0x1))/(0x1fec+0x352*0x1+-0x233b),_0x4ec4ee<_0xbf1c3f&&_0x10ee2e<_0x1d7a51&&(_0x238357['push'](_0x594356+_0x1d7a51+(-0xbe1+0xd*-0x213+-0x9*-0x451),_0x594356+(-0x56*-0x23+0x1e2b*0x1+-0x29ec),_0x594356),_0x238357['push'](_0x594356+_0x1d7a51+(-0x1146+0x1b9c+-0xa55),_0x594356+_0x1d7a51+(0x1*-0x3ad+-0x111*-0x1e+0x1*-0x1c4f),_0x594356+(-0x1*-0x1dcd+0x1*0x18d7+-0x47*0xc5))),_0x594356++;}};_0x3d4837(_0x2fa0b3['FRONT'],_0x3588a7,_0x2e6de5),_0x3d4837(_0x2fa0b3['BACK'],_0x3588a7,_0x2e6de5),_0x3d4837(_0x2fa0b3['TOP'],_0x3588a7,_0x9b1388),_0x3d4837(_0x2fa0b3['BOTTOM'],_0x3588a7,_0x9b1388),_0x3d4837(_0x2fa0b3['RIGHT'],_0x9b1388,_0x2e6de5),_0x3d4837(_0x2fa0b3['LEFT'],_0x9b1388,_0x2e6de5),this['positions']=_0x2e6b7c,this['normals']=_0x5872ad,this['uvs']=_0x516c91,this['uvs1']=_0x516c91,this['indices']=_0x238357,_0x435b45['calculateT'+'angents']&&(this['tangents']=br(_0x2e6b7c,_0x5872ad,_0x516c91,_0x238357));}}class Hp extends ga{constructor(_0x1e5b2f={}){super();const _0x287171=_0x1e5b2f['radius']??-0x1501+-0x553+0x1a54+0.5,_0x1b00e3=_0x1e5b2f['latitudeBa'+'nds']??-0xf84+0x16e+0xe26,_0x5a41a6=_0x1e5b2f['longitudeB'+'ands']??-0x15f*-0xb+0x136e+0x1*-0x2273,_0x3a0de2=[],_0x59114c=[],_0x11f621=[],_0x527387=[];for(let _0x4f1ff2=0xc*0x133+0x1018+0x1e7c*-0x1;_0x4f1ff2<=_0x1b00e3;_0x4f1ff2++){const _0x3b1f90=_0x4f1ff2*Math['PI']/_0x1b00e3,_0x561d8e=Math['sin'](_0x3b1f90),_0x534f57=Math['cos'](_0x3b1f90);for(let _0x401a16=0x647+0x4*0x38e+-0x147f;_0x401a16<=_0x5a41a6;_0x401a16++){const _0x4b2953=_0x401a16*(0xd*0x25f+-0xa4c*-0x1+-0x1*0x291d)*Math['PI']/_0x5a41a6-Math['PI']/(-0x176+0x123d+-0x10c5),_0x387dde=Math['sin'](_0x4b2953),_0x5d0aaa=Math['cos'](_0x4b2953)*_0x561d8e,_0x1b4025=_0x534f57,_0x4b6842=_0x387dde*_0x561d8e,_0x288f4d=0x2*0xbe3+0xe*0x1de+-0x31e9-_0x401a16/_0x5a41a6,_0x106558=-0x179d+-0x3b3+0x3f*0x6f-_0x4f1ff2/_0x1b00e3;_0x3a0de2['push'](_0x5d0aaa*_0x287171,_0x1b4025*_0x287171,_0x4b6842*_0x287171),_0x59114c['push'](_0x5d0aaa,_0x1b4025,_0x4b6842),_0x11f621['push'](_0x288f4d,0x1f8b*-0x1+0xf*0x24d+-0x2f7-_0x106558);}}for(let _0x4828fc=-0xbf4+0xc64+0x1c*-0x4;_0x4828fc<_0x1b00e3;++_0x4828fc)for(let _0x516ab1=0xef4+-0x29*0x37+-0x625;_0x516ab1<_0x5a41a6;++_0x516ab1){const _0x349b92=_0x4828fc*(_0x5a41a6+(-0x23ad+-0x10b*0x1f+0x4403))+_0x516ab1,_0x5b55d1=_0x349b92+_0x5a41a6+(-0x973+0x14*-0x2+0x99c);_0x527387['push'](_0x349b92+(-0x1*0xb6+-0x39*-0x40+0x13b*-0xb),_0x5b55d1,_0x349b92),_0x527387['push'](_0x349b92+(-0x1109+0x116*-0x18+0x2*0x158d),_0x5b55d1+(0x3c7+-0xcfc+0x106*0x9),_0x5b55d1);}this['positions']=_0x3a0de2,this['normals']=_0x59114c,this['uvs']=_0x11f621,this['uvs1']=_0x11f621,this['indices']=_0x527387,_0x1e5b2f['calculateT'+'angents']&&(this['tangents']=br(_0x3a0de2,_0x59114c,_0x11f621,_0x527387));}}class jb extends Hp{constructor(_0x22103d={}){const _0x37e2d0=_0x22103d['latitudeBa'+'nds']??-0x199*-0x2+-0x16ed+0x13cb,_0x3f7ae2=_0x22103d['longitudeB'+'ands']??0x1c*0xf2+-0x101*-0x2+0xe35*-0x2;super({'radius':0.5,'latitudeBands':_0x37e2d0,'longitudeBands':_0x3f7ae2});const _0x21a025=-0x447*-0x2+0x8*-0x467+-0xd55*-0x2+0.1,_0x510b9c=-0xc93+0x1c1*-0x13+0x2de6+0.95,_0x34fc8f=_0x510b9c*_0x510b9c,_0x447411=this['positions'];for(let _0x25eaf3=0xd*-0x15d+-0x1*0x849+0x1a02;_0x25eaf3<_0x447411['length'];_0x25eaf3+=0xef*-0x6+0x2664*0x1+-0x20c7){const _0x4bbc5d=_0x447411[_0x25eaf3]/(-0x170c+0x251*-0x7+0x1*0x2743+0.5);let _0x293e0b=_0x447411[_0x25eaf3+(0x76*0x47+0x269b*0x1+0x67c*-0xb)]/(-0x49f+0x1*-0x1148+-0x3f*-0x59+0.5);const _0x34d8bd=_0x447411[_0x25eaf3+(0x1b44*0x1+-0x22ab+-0x1*-0x769)]/(-0x150f+0xb*-0x21e+0x2c59*0x1+0.5);_0x293e0b<0x1927*-0x1+-0x1cc8+0x35ef&&(_0x293e0b*=0x13eb+0xae+0x1*-0x1499+0.3,_0x4bbc5d*_0x4bbc5d+_0x34d8bd*_0x34d8bd<_0x34fc8f&&(_0x293e0b=-_0x21a025)),_0x293e0b+=_0x21a025,_0x293e0b*=-0x1*0x1e63+0x18cd+0x596+0.5,_0x447411[_0x25eaf3+(-0x1b91+-0x238b+0x3f1d)]=_0x293e0b;}}}class Po{static['create'](_0x1aed87,_0x1db157){switch(_0x1db157){case _w:return Po['box'](_0x1aed87);case gw:return Po['dome'](_0x1aed87);}return w['assert'](_0x1db157===Co,'Unsupporte'+'d\x20sky\x20geom'+'etry\x20type\x20'+_0x1db157),Po['infinite'](_0x1aed87);}static['infinite'](_0x1c502f){return Ge['fromGeomet'+'ry'](_0x1c502f,new Hf(_0x1c502f));}static['box'](_0x5e2278){return Ge['fromGeomet'+'ry'](_0x5e2278,new Hf({'yOffset':0.5}));}static['dome'](_0x4bc172){const _0x63c4f4=new jb({'latitudeBands':0x32,'longitudeBands':0x32});return _0x63c4f4['normals']=void(-0xa65+-0xa70+0x1*0x14d5),_0x63c4f4['uvs']=void(0x4*0x9b7+-0x3d*0x43+-0x16e5),Ge['fromGeomet'+'ry'](_0x4bc172,_0x63c4f4);}}class Yb{constructor(_0x19febe,_0x43abba,_0x5b0894,_0x392ddb,_0x2ff2ce){h(this,'meshInstan'+'ce',null),h(this,'_depthWrit'+'e',!(-0x1a82+-0x88*-0x1c+0x1*0xba3));const _0x3cd94f=new Bn({'uniqueName':'SkyMateria'+'l','vertexGLSL':Ce['get'](_0x19febe,Fe)['get']('skyboxVS'),'fragmentGLSL':Ce['get'](_0x19febe,Fe)['get']('skyboxPS'),'vertexWGSL':Ce['get'](_0x19febe,it)['get']('skyboxVS'),'fragmentWGSL':Ce['get'](_0x19febe,it)['get']('skyboxPS'),'attributes':{'aPosition':Pe}});_0x3cd94f['setDefine']('{SKYBOX_DE'+'CODE_FNC}',Sr['decodeFunc'](_0x392ddb['encoding'])),_0x2ff2ce!==Co&&_0x3cd94f['setDefine']('SKYMESH',''),_0x392ddb['cubemap']&&_0x3cd94f['setDefine']('SKY_CUBEMA'+'P',''),_0x3cd94f['setParamet'+'er']('skyboxHigh'+'lightMulti'+'plier',_0x43abba['skyboxHigh'+'lightMulti'+'plier']),_0x392ddb['cubemap']?_0x3cd94f['setParamet'+'er']('texture_cu'+'beMap',_0x392ddb):(_0x3cd94f['setParamet'+'er']('texture_en'+'vAtlas',_0x392ddb),_0x3cd94f['setParamet'+'er']('mipLevel',_0x43abba['skyboxMip'])),_0x3cd94f['cull']=wo,_0x3cd94f['depthWrite']=this['_depthWrit'+'e'];const _0x3c08e0=_0x43abba['layers']['getLayerBy'+'Id'](wp);if(_0x3c08e0){const _0x33cf8a=Po['create'](_0x19febe,_0x2ff2ce),_0x455e50=new He(_0x33cf8a,_0x3cd94f,_0x5b0894);this['meshInstan'+'ce']=_0x455e50,_0x455e50['cull']=!(0x2*0x3be+0x7d5+-0xf50),_0x455e50['pick']=!(-0xc47+-0x25*0x31+0x1*0x135d),_0x3c08e0['addMeshIns'+'tances']([_0x455e50]),this['skyLayer']=_0x3c08e0;}}['destroy'](){this['meshInstan'+'ce']&&(this['skyLayer']&&this['skyLayer']['removeMesh'+'Instances']([this['meshInstan'+'ce']]),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}set['depthWrite'](_0x164d8d){this['_depthWrit'+'e']=_0x164d8d,this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']['depthWrite']=_0x164d8d);}get['depthWrite'](){return this['_depthWrit'+'e'];}}class Kb{constructor(_0x34bc20){h(this,'_type',Co),h(this,'_center',new D(0x3f6*0x2+-0x91*-0x41+0x371*-0xd,-0x1*-0x16a1+-0x5b4+-0x10ec,-0x185f+0x9c+0x17c3)),h(this,'skyMesh',null),h(this,'_depthWrit'+'e',!(0x823*0x1+0x1623+0x15*-0x171)),h(this,'node',new Ie('SkyMeshNod'+'e')),(this['device']=_0x34bc20['device'],this['scene']=_0x34bc20,this['center']=new D(0x113c*0x1+0x3*-0xced+0x158b,-0x1d0b+0x181c*-0x1+0x4*0xd4a,0x2093+-0x489+-0xe05*0x2),this['centerArra'+'y']=new Float32Array(-0x5f*-0x5e+0x17be+-0x3a9d),this['projectedS'+'kydomeCent'+'erId']=this['device']['scope']['resolve']('projectedS'+'kydomeCent'+'er'));}['applySetti'+'ngs'](_0x4d3802){this['type']=_0x4d3802['skyType']??Co,this['node']['setLocalPo'+'sition'](new D(_0x4d3802['skyMeshPos'+'ition']??[-0x1af8+0x1*0xeba+0xc3e,-0x25*0x59+-0xe64+0x1*0x1b41,-0x361+-0x25c6+-0x5e1*-0x7])),this['node']['setLocalEu'+'lerAngles'](new D(_0x4d3802['skyMeshRot'+'ation']??[0xe9c+0x14*0x12b+-0x25f8,-0x1d2a+-0x5*-0x446+-0x1f3*-0x4,0x13*-0x1a5+-0x2343+0x2*0x2141])),this['node']['setLocalSc'+'ale'](new D(_0x4d3802['skyMeshSca'+'le']??[0x3b*-0x79+-0x1a95+0x3679,0xc93*0x2+-0xca*0x16+-0x7c9,0x15ad+0xbe7+-0x2193])),_0x4d3802['skyCenter']&&(this['_center']=new D(_0x4d3802['skyCenter']));}set['type'](_0x492ff7){this['_type']!==_0x492ff7&&(this['_type']=_0x492ff7,this['scene']['updateShad'+'ers']=!(0x1f3*-0x10+-0x13*0x34+-0x230c*-0x1),this['updateSkyM'+'esh']());}get['type'](){return this['_type'];}set['center'](_0x1ea6e7){this['_center']['copy'](_0x1ea6e7);}get['center'](){return this['_center'];}set['depthWrite'](_0x2c4260){this['_depthWrit'+'e']!==_0x2c4260&&(this['_depthWrit'+'e']=_0x2c4260,this['skyMesh']&&(this['skyMesh']['depthWrite']=_0x2c4260));}get['depthWrite'](){return this['_depthWrit'+'e'];}['updateSkyM'+'esh'](){const _0x45042b=this['scene']['_getSkybox'+'Tex']();_0x45042b&&(this['resetSkyMe'+'sh'](),this['skyMesh']=new Yb(this['device'],this['scene'],this['node'],_0x45042b,this['type']),this['skyMesh']['depthWrite']=this['_depthWrit'+'e'],this['scene']['fire']('set:skybox',_0x45042b));}['resetSkyMe'+'sh'](){var _0x9d31a2;(_0x9d31a2=this['skyMesh'])==null||_0x9d31a2['destroy'](),this['skyMesh']=null;}['update'](){if(this['type']!==Co){const {center:_0x134576,centerArray:_0x13c520}=this,_0x495e3a=new D();this['node']['getWorldTr'+'ansform']()['transformP'+'oint'](_0x134576,_0x495e3a),_0x13c520[-0xaff+-0x1597+0x2096]=_0x495e3a['x'],_0x13c520[0x8ca+-0x1*0xc23+-0x1ad*-0x2]=_0x495e3a['y'],_0x13c520[0x512+-0x24ba+0x1faa]=_0x495e3a['z'],this['projectedS'+'kydomeCent'+'erId']['setValue'](_0x13c520);}}}const ah=new Ie();ah['worldTrans'+'form']=te['IDENTITY'],ah['_dirtyWorl'+'d']=ah['_dirtyNorm'+'al']=!(0x8fe+0x1011+0x1*-0x190e);class Zb{constructor(_0x59912c,_0x38d66f,_0x4661ec){this['material']=_0x38d66f,this['layer']=_0x4661ec,this['positions']=[],this['colors']=[],this['mesh']=new Ge(_0x59912c),this['meshInstan'+'ce']=null;}['addLines'](_0x1a4739,_0xb349d0){const _0xfdc2d8=this['positions'],_0x476ef2=_0x1a4739['length'];for(let _0x42e860=0x21ba+0xd*-0x167+-0xf7f;_0x42e860<_0x476ef2;_0x42e860++){const _0x8acb74=_0x1a4739[_0x42e860];_0xfdc2d8['push'](_0x8acb74['x'],_0x8acb74['y'],_0x8acb74['z']);}const _0x53a29b=this['colors'];if(_0xb349d0['length'])for(let _0x3661f2=-0x215d+-0x1fc6+0x91*0x73;_0x3661f2<_0x476ef2;_0x3661f2++){const _0x489cac=_0xb349d0[_0x3661f2];_0x53a29b['push'](_0x489cac['r'],_0x489cac['g'],_0x489cac['b'],_0x489cac['a']);}else{for(let _0x2e3aa=-0x1*-0x1445+0x2*-0x11ec+0xf93*0x1;_0x2e3aa<_0x476ef2;_0x2e3aa++)_0x53a29b['push'](_0xb349d0['r'],_0xb349d0['g'],_0xb349d0['b'],_0xb349d0['a']);}}['addLinesAr'+'rays'](_0x3d1070,_0x533d54){const _0x1338a4=this['positions'];for(let _0x5bfc60=-0xe58+0x52d+-0x92b*-0x1;_0x5bfc60<_0x3d1070['length'];_0x5bfc60+=0x1*-0xaa1+0x1*-0xe4e+-0xc79*-0x2)_0x1338a4['push'](_0x3d1070[_0x5bfc60],_0x3d1070[_0x5bfc60+(0x2*0x626+0x119a+-0x1*0x1de5)],_0x3d1070[_0x5bfc60+(-0x2*0x6bb+-0x21e6+0x3*0xfca)]);const _0x19e0d5=this['colors'];if(_0x533d54['length']){for(let _0x189a7a=0xeb3*0x1+-0xff7+0x144;_0x189a7a<_0x533d54['length'];_0x189a7a+=-0x11c2*0x2+-0x2260+-0x4*-0x117a)_0x19e0d5['push'](_0x533d54[_0x189a7a],_0x533d54[_0x189a7a+(-0x9b1+-0x23ff+0x2db1*0x1)],_0x533d54[_0x189a7a+(0x1931+-0x8*-0x3ce+-0x379f)],_0x533d54[_0x189a7a+(-0x4*0x937+0x252e+0x1*-0x4f)]);}else{const _0x57e7e6=_0x3d1070['length']/(0x305*0x1+0x1*0x92f+-0xc31);for(let _0xd6be21=-0x872+-0x1f*-0x6d+-0x1*0x4c1;_0xd6be21<_0x57e7e6;_0xd6be21++)_0x19e0d5['push'](_0x533d54['r'],_0x533d54['g'],_0x533d54['b'],_0x533d54['a']);}}['onPreRende'+'r'](_0x43b3e0,_0x55eff6){this['positions']['length']>0x195e+-0x15e2+-0x37c&&this['material']['transparen'+'t']===_0x55eff6&&(this['mesh']['setPositio'+'ns'](this['positions']),this['mesh']['setColors'](this['colors']),this['mesh']['update'](Gh,!(-0x356*0x2+0x1*-0x1fe7+-0x2694*-0x1)),this['meshInstan'+'ce']||(this['meshInstan'+'ce']=new He(this['mesh'],this['material'],ah)),_0x43b3e0['push'](this['meshInstan'+'ce']));}['clear'](){this['positions']['length']=-0x1977+0x1e72+0x1a9*-0x3,this['colors']['length']=-0x14c8+0xa9+0x141f;}}class Qb{constructor(_0x3fca39){this['device']=_0x3fca39,this['map']=new Map();}['getBatch'](_0x41ab9f,_0x29c5c1){let _0x5ef403=this['map']['get'](_0x41ab9f);return _0x5ef403||(_0x5ef403=new Zb(this['device'],_0x41ab9f,_0x29c5c1),this['map']['set'](_0x41ab9f,_0x5ef403)),_0x5ef403;}['onPreRende'+'r'](_0x4a6210,_0x43856b){this['map']['forEach'](_0x515794=>{_0x515794['onPreRende'+'r'](_0x4a6210,_0x43856b);});}['clear'](){this['map']['forEach'](_0x300d8d=>_0x300d8d['clear']());}}const Ts=[],Oa=new D();class Jb{constructor(_0x451afa){h(this,'shaderDesc'+'s',new Map()),(this['device']=_0x451afa,this['quadMesh']=null,this['textureSha'+'der']=null,this['depthTextu'+'reShader']=null,this['cubeLocalP'+'os']=null,this['cubeWorldP'+'os']=null,this['batchesMap']=new Map(),this['allBatches']=new Set(),this['updatedLay'+'ers']=new Set(),this['_materialD'+'epth']=null,this['_materialN'+'oDepth']=null,this['layerMeshI'+'nstances']=new Map());}['createMate'+'rial'](_0xd7417){const _0x288d04=new Bn({'uniqueName':'ImmediateL'+'ine','vertexGLSL':Ce['get'](this['device'],Fe)['get']('immediateL'+'ineVS'),'fragmentGLSL':Ce['get'](this['device'],Fe)['get']('immediateL'+'inePS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('immediateL'+'ineVS'),'fragmentWGSL':Ce['get'](this['device'],it)['get']('immediateL'+'inePS'),'attributes':{'vertex_position':Pe,'vertex_color':Wt}});return _0x288d04['blendType']=Zs,_0x288d04['depthTest']=_0xd7417,_0x288d04['update'](),_0x288d04;}get['materialDe'+'pth'](){return this['_materialD'+'epth']||(this['_materialD'+'epth']=this['createMate'+'rial'](!(-0x1622+-0x1*-0x24af+0xe8d*-0x1))),this['_materialD'+'epth'];}get['materialNo'+'Depth'](){return this['_materialN'+'oDepth']||(this['_materialN'+'oDepth']=this['createMate'+'rial'](!(0x1e2c+-0xe4d*0x2+-0x191))),this['_materialN'+'oDepth'];}['getBatch'](_0x1ad96f,_0x3da19c){let _0x28f451=this['batchesMap']['get'](_0x1ad96f);_0x28f451||(_0x28f451=new Qb(this['device']),this['batchesMap']['set'](_0x1ad96f,_0x28f451)),this['allBatches']['add'](_0x28f451);const _0x2de767=_0x3da19c?this['materialDe'+'pth']:this['materialNo'+'Depth'];return _0x28f451['getBatch'](_0x2de767,_0x1ad96f);}['getShaderD'+'esc'](_0x5087d4,_0x2428fe,_0x387cfc){return this['shaderDesc'+'s']['has'](_0x5087d4)||this['shaderDesc'+'s']['set'](_0x5087d4,{'uniqueName':'DebugShade'+'r:'+_0x5087d4,'vertexGLSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20matr'+'ix_model;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ve'+'c2\x20uv0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_model\x20*\x20v'+'ec4(vertex'+'_position,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uv0\x20=\x20ve'+'rtex_posit'+'ion.xy\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20','vertexWGSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20@ver'+'tex\x20fn\x20ver'+'texMain(in'+'put:\x20Verte'+'xInput)\x20->'+'\x20VertexOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20un'+'iform.matr'+'ix_model\x20*'+'\x20vec4f(inp'+'ut.vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.uv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20+\x20vec2f'+'(0.5);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20','fragmentGLSL':_0x2428fe,'fragmentWGSL':_0x387cfc,'attributes':{'vertex_position':Pe}}),this['shaderDesc'+'s']['get'](_0x5087d4);}['getTexture'+'ShaderDesc'](_0x200410){const _0x4bc6b2=Sr['decodeFunc'](_0x200410);return this['getShaderD'+'esc']('textureSha'+'der-'+_0x200410,'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20vec2\x20uv0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20colorMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20linear'+'Color\x20=\x20'+_0x4bc6b2+('(texture2D'+'(colorMap,'+'\x20uv0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(linearC'+'olor),\x201);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20colorMa'+'pSampler:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20@fragment'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output:\x20Fr'+'agmentOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20sample'+'dTex\x20=\x20tex'+'tureSample'+'(colorMap,'+'\x20colorMapS'+'ampler,\x20in'+'put.uv0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'linearColo'+'r:\x20vec3f\x20='+'\x20'+_0x4bc6b2+('(sampledTe'+'x);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(gammaCorr'+'ectOutput('+'linearColo'+'r),\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'));}['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](){return this['getShaderD'+'esc']('textureSha'+'derUnfilte'+'rable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vec2\x20uv0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20highp\x20sam'+'pler2D\x20col'+'orMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'oid\x20main\x20('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'uv\x20=\x20ivec2'+'(uv0\x20*\x20tex'+'tureSize(c'+'olorMap,\x200'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'texelFetch'+'(colorMap,'+'\x20uv,\x200).xy'+'z,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<uff>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20@'+'fragment\x20f'+'n\x20fragment'+'Main(input'+'\x20:\x20Fragmen'+'tInput)\x20->'+'\x20FragmentO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'nput.uv0\x20*'+'\x20vec2f(tex'+'tureDimens'+'ions(color'+'Map,\x200)));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20fetchedCo'+'lor\x20:\x20vec4'+'f\x20=\x20textur'+'eLoad(colo'+'rMap,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(fetchedCo'+'lor.xyz,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20');}['getDepthTe'+'xtureShade'+'rDesc'](){return this['getShaderD'+'esc']('depthTextu'+'reShader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20void\x20main'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x20getLi'+'nearScreen'+'Depth(getI'+'mageEffect'+'UV(uv0))\x20*'+'\x20camera_pa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(vec3(de'+'pth)),\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20u'+'v0:\x20vec2f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20@fragme'+'nt\x20fn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20depth'+':\x20f32\x20=\x20ge'+'tLinearScr'+'eenDepth(g'+'etImageEff'+'ectUV(inpu'+'t.uv0))\x20*\x20'+'uniform.ca'+'mera_param'+'s.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(vec3f(dep'+'th)),\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}['getQuadMes'+'h'](){return this['quadMesh']||(this['quadMesh']=new Ge(this['device']),this['quadMesh']['setPositio'+'ns']([-(0x7*0x30d+-0x24da+-0x1*-0xf7f+0.5),-(0x26cf+0x1349*-0x1+0x7*-0x2ca+0.5),-0x1369+0x234c*-0x1+0x36b5,0x6d3*-0x1+0x2020+-0x194d+0.5,-(-0x2cc*-0xb+0x1327+-0x31eb+0.5),0x704*0x5+-0x8*-0x3e6+0x1*-0x4244,-(-0x1e5*0x7+-0x14b3+-0x2e*-0xbd+0.5),-0xc8b+-0x12*0x21+0xedd+0.5,-0x1*-0x22ae+-0x12c3+-0xfeb,-0x1*-0x1663+-0x1ff8+0x995+0.5,0x1842+0x21ae+-0x18*0x26a+0.5,-0x31*-0x3+0x3ba+0x16f*-0x3]),this['quadMesh']['update'](vr)),this['quadMesh'];}['drawMesh'](_0x334bcd,_0x593a62,_0xb2a36d,_0x1be7cb,_0x56a811){if(!_0x1be7cb){const _0x4bd220=this['getGraphNo'+'de'](_0x593a62);_0x1be7cb=new He(_0xb2a36d,_0x334bcd,_0x4bd220);}let _0x49166b=this['layerMeshI'+'nstances']['get'](_0x56a811);_0x49166b||(_0x49166b=[],this['layerMeshI'+'nstances']['set'](_0x56a811,_0x49166b)),_0x49166b['push'](_0x1be7cb);}['drawWireAl'+'ignedBox'](_0x3d2dde,_0x29502d,_0x682725,_0x344e35,_0x3668be,_0x33b955){if(_0x33b955){const _0x457766=(_0x4a2218,_0x45ac74,_0x235fae)=>{Oa['set'](_0x4a2218,_0x45ac74,_0x235fae),_0x33b955['transformP'+'oint'](Oa,Oa),Ts['push'](Oa['x'],Oa['y'],Oa['z']);};_0x457766(_0x3d2dde['x'],_0x3d2dde['y'],_0x3d2dde['z']),_0x457766(_0x3d2dde['x'],_0x29502d['y'],_0x3d2dde['z']),_0x457766(_0x3d2dde['x'],_0x29502d['y'],_0x3d2dde['z']),_0x457766(_0x29502d['x'],_0x29502d['y'],_0x3d2dde['z']),_0x457766(_0x29502d['x'],_0x29502d['y'],_0x3d2dde['z']),_0x457766(_0x29502d['x'],_0x3d2dde['y'],_0x3d2dde['z']),_0x457766(_0x29502d['x'],_0x3d2dde['y'],_0x3d2dde['z']),_0x457766(_0x3d2dde['x'],_0x3d2dde['y'],_0x3d2dde['z']),_0x457766(_0x3d2dde['x'],_0x3d2dde['y'],_0x29502d['z']),_0x457766(_0x3d2dde['x'],_0x29502d['y'],_0x29502d['z']),_0x457766(_0x3d2dde['x'],_0x29502d['y'],_0x29502d['z']),_0x457766(_0x29502d['x'],_0x29502d['y'],_0x29502d['z']),_0x457766(_0x29502d['x'],_0x29502d['y'],_0x29502d['z']),_0x457766(_0x29502d['x'],_0x3d2dde['y'],_0x29502d['z']),_0x457766(_0x29502d['x'],_0x3d2dde['y'],_0x29502d['z']),_0x457766(_0x3d2dde['x'],_0x3d2dde['y'],_0x29502d['z']),_0x457766(_0x3d2dde['x'],_0x3d2dde['y'],_0x3d2dde['z']),_0x457766(_0x3d2dde['x'],_0x3d2dde['y'],_0x29502d['z']),_0x457766(_0x3d2dde['x'],_0x29502d['y'],_0x3d2dde['z']),_0x457766(_0x3d2dde['x'],_0x29502d['y'],_0x29502d['z']),_0x457766(_0x29502d['x'],_0x29502d['y'],_0x3d2dde['z']),_0x457766(_0x29502d['x'],_0x29502d['y'],_0x29502d['z']),_0x457766(_0x29502d['x'],_0x3d2dde['y'],_0x3d2dde['z']),_0x457766(_0x29502d['x'],_0x3d2dde['y'],_0x29502d['z']);}else Ts['push'](_0x3d2dde['x'],_0x3d2dde['y'],_0x3d2dde['z'],_0x3d2dde['x'],_0x29502d['y'],_0x3d2dde['z'],_0x3d2dde['x'],_0x29502d['y'],_0x3d2dde['z'],_0x29502d['x'],_0x29502d['y'],_0x3d2dde['z'],_0x29502d['x'],_0x29502d['y'],_0x3d2dde['z'],_0x29502d['x'],_0x3d2dde['y'],_0x3d2dde['z'],_0x29502d['x'],_0x3d2dde['y'],_0x3d2dde['z'],_0x3d2dde['x'],_0x3d2dde['y'],_0x3d2dde['z'],_0x3d2dde['x'],_0x3d2dde['y'],_0x29502d['z'],_0x3d2dde['x'],_0x29502d['y'],_0x29502d['z'],_0x3d2dde['x'],_0x29502d['y'],_0x29502d['z'],_0x29502d['x'],_0x29502d['y'],_0x29502d['z'],_0x29502d['x'],_0x29502d['y'],_0x29502d['z'],_0x29502d['x'],_0x3d2dde['y'],_0x29502d['z'],_0x29502d['x'],_0x3d2dde['y'],_0x29502d['z'],_0x3d2dde['x'],_0x3d2dde['y'],_0x29502d['z'],_0x3d2dde['x'],_0x3d2dde['y'],_0x3d2dde['z'],_0x3d2dde['x'],_0x3d2dde['y'],_0x29502d['z'],_0x3d2dde['x'],_0x29502d['y'],_0x3d2dde['z'],_0x3d2dde['x'],_0x29502d['y'],_0x29502d['z'],_0x29502d['x'],_0x29502d['y'],_0x3d2dde['z'],_0x29502d['x'],_0x29502d['y'],_0x29502d['z'],_0x29502d['x'],_0x3d2dde['y'],_0x3d2dde['z'],_0x29502d['x'],_0x3d2dde['y'],_0x29502d['z']);this['getBatch'](_0x3668be,_0x344e35)['addLinesAr'+'rays'](Ts,_0x682725),Ts['length']=0xea7+-0x1bed*0x1+-0x6a3*-0x2;}['drawWireSp'+'here'](_0x27f4f2,_0x267aaf,_0x544a16,_0x4e0ed6,_0x49effa,_0x17df3a){const _0x285bc6=(-0x1*-0xbb+-0x2*-0x815+0x1*-0x10e3)*Math['PI']/_0x4e0ed6;let _0x3ec674=-0x1*-0xe5d+0x2*0x2db+-0x1413;for(let _0x158c1f=-0x270+-0xabe+0xd2e;_0x158c1f<_0x4e0ed6;_0x158c1f++){const _0x405ca0=Math['sin'](_0x3ec674),_0x49a037=Math['cos'](_0x3ec674);_0x3ec674+=_0x285bc6;const _0x324d69=Math['sin'](_0x3ec674),_0x445cc8=Math['cos'](_0x3ec674);Ts['push'](_0x27f4f2['x']+_0x267aaf*_0x405ca0,_0x27f4f2['y'],_0x27f4f2['z']+_0x267aaf*_0x49a037),Ts['push'](_0x27f4f2['x']+_0x267aaf*_0x324d69,_0x27f4f2['y'],_0x27f4f2['z']+_0x267aaf*_0x445cc8),Ts['push'](_0x27f4f2['x']+_0x267aaf*_0x405ca0,_0x27f4f2['y']+_0x267aaf*_0x49a037,_0x27f4f2['z']),Ts['push'](_0x27f4f2['x']+_0x267aaf*_0x324d69,_0x27f4f2['y']+_0x267aaf*_0x445cc8,_0x27f4f2['z']),Ts['push'](_0x27f4f2['x'],_0x27f4f2['y']+_0x267aaf*_0x405ca0,_0x27f4f2['z']+_0x267aaf*_0x49a037),Ts['push'](_0x27f4f2['x'],_0x27f4f2['y']+_0x267aaf*_0x324d69,_0x27f4f2['z']+_0x267aaf*_0x445cc8);}this['getBatch'](_0x17df3a,_0x49effa)['addLinesAr'+'rays'](Ts,_0x544a16),Ts['length']=0x1*0x3a+-0x13*-0xc2+0x270*-0x6;}['getGraphNo'+'de'](_0x1c8cb1){const _0x295d12=new Ie('ImmediateD'+'ebug');return _0x295d12['worldTrans'+'form']=_0x1c8cb1,_0x295d12['_dirtyWorl'+'d']=_0x295d12['_dirtyNorm'+'al']=!(0x40*-0x6d+-0x1a7+0x39d*0x8),_0x295d12;}['onPreRende'+'rLayer'](_0x35388a,_0x412c75,_0x5e2324){if(this['batchesMap']['forEach']((_0x14f149,_0x3be7e2)=>{_0x3be7e2===_0x35388a&&_0x14f149['onPreRende'+'r'](_0x412c75,_0x5e2324);}),!this['updatedLay'+'ers']['has'](_0x35388a)){this['updatedLay'+'ers']['add'](_0x35388a);const _0x44fe47=this['layerMeshI'+'nstances']['get'](_0x35388a);if(_0x44fe47){for(let _0x5c1379=0x2643+0x1*-0x291+-0xbe6*0x3;_0x5c1379<_0x44fe47['length'];_0x5c1379++)_0x412c75['push'](_0x44fe47[_0x5c1379]);_0x44fe47['length']=-0xb*0x11b+0xe1*-0xf+0x1958;}}}['onPostRend'+'er'](){this['allBatches']['forEach'](_0x5b7c91=>_0x5b7c91['clear']()),this['allBatches']['clear'](),this['updatedLay'+'ers']['clear']();}}class eA{constructor(){h(this,'type',Hn),h(this,'color',new ie(0x1*-0x1e49+0x7*-0x365+0x360c,-0x293+-0xa8f*0x1+0x1*0xd22,-0x11b*0x20+-0x891*0x1+-0x647*-0x7)),h(this,'density',0x1d8c+0x27d+-0x2009),h(this,'start',-0x2635*0x1+-0x340+0x6e9*0x6),h(this,'end',0x244a+-0x1e66+-0x1*0x1fc);}}class Et extends me{constructor(_0x344c9b){super(),h(this,'ambientBak'+'e',!(-0x1*0xda1+0x500+0x8a2)),h(this,'ambientBak'+'eOcclusion'+'Brightness',-0x1c30+-0x17e1*-0x1+-0x44f*-0x1),h(this,'ambientBak'+'eOcclusion'+'Contrast',-0x3*-0xcd+0x4f*0x65+-0x2192),h(this,'ambientLig'+'ht',new ie(0x25*0x5d+-0x2327+0x15b6,-0x845*-0x4+-0x1606+-0xb0e,0x3f*0x71+-0x1e80+0x2b1)),h(this,'ambientLum'+'inance',-0x7*0x584+0x87c*-0x1+0x89*0x58),h(this,'exposure',0x6c5*-0x4+-0xf*0x3e+0xa3d*0x3),h(this,'lightmapSi'+'zeMultipli'+'er',-0x107b*0x1+-0x1*-0x1314+-0x298),h(this,'lightmapMa'+'xResolutio'+'n',-0x26ac+-0x3*-0x164+0x2a80),h(this,'lightmapMo'+'de',Ac),h(this,'lightmapFi'+'lterEnable'+'d',!(-0x1a5c+-0xca*0x23+0x427*0xd)),h(this,'lightmapHD'+'R',!(0x15ba+-0xe3+-0x14d6)),h(this,'root',null),h(this,'physicalUn'+'its',!(-0x1b98+0x161*-0xd+0x2d86)),h(this,'_envAtlas',null),h(this,'_skyboxCub'+'eMap',null),h(this,'_fogParams',new eA()),h(this,'forcePassT'+'hroughSpec'+'ular',!(-0x16c2*-0x1+-0x1*-0x7c9+-0xf45*0x2)),(w['assert'](_0x344c9b,'Scene\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x344c9b,this['_gravity']=new D(-0x1*0x1d1b+0x443*0x4+0xc0f,-(-0x9*0xee+0x15ac+-0xd45+0.8000000000000007),0xcac*-0x1+0x3a8+0x904),this['_layers']=null,this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']=null,this['_skyboxInt'+'ensity']=0x572*-0x4+-0x1874+0x2e3d,this['_skyboxLum'+'inance']=0x122f+-0x1103+-0x12c,this['_skyboxMip']=-0x1*0x2b2+0x25c*0xb+-0x1742,this['_skyboxHig'+'hlightMult'+'iplier']=0x828+0x11c0+-0x19e7,this['_skyboxRot'+'ationShade'+'rInclude']=!(0x1*0x1b61+-0x13d*-0x6+-0x22ce),this['_skyboxRot'+'ation']=new le(),this['_skyboxRot'+'ationMat3']=new _i(),this['_skyboxRot'+'ationMat4']=new te(),this['_ambientBa'+'keNumSampl'+'es']=0x1*-0x24fa+-0x13*-0x158+0xb73,this['_ambientBa'+'keSpherePa'+'rt']=0x6*0x48b+0x1*-0x24dd+0x1*0x99b+0.4,this['_lightmapF'+'ilterRange']=-0xfc9+0x203*-0x5+0x19e2,this['_lightmapF'+'ilterSmoot'+'hness']=0x2*0x25f+0x1f*-0x3d+0x2a5+0.2,this['_clustered'+'LightingEn'+'abled']=!(0x21b5*0x1+-0x71f+-0x2*0xd4b),this['_lightingP'+'arams']=new qy(this['device']['supportsAr'+'eaLights'],this['device']['maxTexture'+'Size'],()=>{this['updateShad'+'ers']=!(0x1cf3+-0x27b*0xe+0x5c7);}),this['_sky']=new Kb(this),this['_stats']={'meshInstances':0x0,'lights':0x0,'dynamicLights':0x0,'bakedLights':0x0,'updateShadersTime':0x0},this['updateShad'+'ers']=!(0x10f*0x5+0x92a*-0x1+0x3df),this['_shaderVer'+'sion']=0x315*-0xc+0x526*0x6+-0x4e*-0x14,this['immediate']=new Jb(this['device']));}get['defaultDra'+'wLayer'](){return this['layers']['getLayerBy'+'Id'](Ep);}set['ambientBak'+'eNumSample'+'s'](_0x1bd6c8){this['_ambientBa'+'keNumSampl'+'es']=Y['clamp'](Math['floor'](_0x1bd6c8),-0x753+-0x115*-0x1+0x63f,0x829*-0x1+-0x1a*0x45+0x102a);}get['ambientBak'+'eNumSample'+'s'](){return this['_ambientBa'+'keNumSampl'+'es'];}set['ambientBak'+'eSpherePar'+'t'](_0x377884){this['_ambientBa'+'keSpherePa'+'rt']=Y['clamp'](_0x377884,0x1*-0x1f35+0x8fe*0x1+0x1637+0.001,0x335*0x1+0x976+0x1*-0xcaa);}get['ambientBak'+'eSpherePar'+'t'](){return this['_ambientBa'+'keSpherePa'+'rt'];}set['clusteredL'+'ightingEna'+'bled'](_0x4e106f){if(this['device']['isWebGPU']&&!_0x4e106f){w['warnOnce']('WebGPU\x20cur'+'rently\x20onl'+'y\x20supports'+'\x20clustered'+'\x20lighting,'+'\x20and\x20this\x20'+'cannot\x20be\x20'+'disabled.');return;}if(!this['_clustered'+'LightingEn'+'abled']&&_0x4e106f){console['error']('Turning\x20on'+'\x20disabled\x20'+'clustered\x20'+'lighting\x20i'+'s\x20not\x20curr'+'ently\x20supp'+'orted');return;}this['_clustered'+'LightingEn'+'abled']=_0x4e106f;}get['clusteredL'+'ightingEna'+'bled'](){return this['_clustered'+'LightingEn'+'abled'];}set['envAtlas'](_0x36afc5){_0x36afc5!==this['_envAtlas']&&(this['_envAtlas']=_0x36afc5,_0x36afc5&&(_0x36afc5['addressU']=ue,_0x36afc5['addressV']=ue,_0x36afc5['minFilter']=vt,_0x36afc5['magFilter']=vt,_0x36afc5['mipmaps']=!(-0x14d2+0x107*-0xe+-0x2335*-0x1)),this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_resetSkyM'+'esh']());}get['envAtlas'](){return this['_envAtlas'];}set['layers'](_0x140299){const _0x4a95e5=this['_layers'];this['_layers']=_0x140299,this['fire']('set:layers',_0x4a95e5,_0x140299);}get['layers'](){return this['_layers'];}get['sky'](){return this['_sky'];}get['lighting'](){return this['_lightingP'+'arams'];}get['fog'](){return this['_fogParams'];}set['lightmapFi'+'lterRange'](_0x4cfa0e){this['_lightmapF'+'ilterRange']=Math['max'](_0x4cfa0e,-0x2551*-0x1+-0xaf9+-0xc*0x232+0.001);}get['lightmapFi'+'lterRange'](){return this['_lightmapF'+'ilterRange'];}set['lightmapFi'+'lterSmooth'+'ness'](_0x495268){this['_lightmapF'+'ilterSmoot'+'hness']=Math['max'](_0x495268,-0x3fe+0x78*0x2+-0x30e*-0x1+0.001);}get['lightmapFi'+'lterSmooth'+'ness'](){return this['_lightmapF'+'ilterSmoot'+'hness'];}set['prefiltere'+'dCubemaps'](_0x2c0120){_0x2c0120=_0x2c0120||[];const _0x282ffe=this['_prefilter'+'edCubemaps'];(_0x282ffe['length']!==_0x2c0120['length']||_0x282ffe['some']((_0x2b62b0,_0xc7fab3)=>_0x2b62b0!==_0x2c0120[_0xc7fab3]))&&(_0x2c0120['length']===-0xce3*0x2+0x5c7*0x1+-0xcd*-0x19&&_0x2c0120['every'](_0x29edef=>!!_0x29edef)?(this['_internalE'+'nvAtlas']=zy['generatePr'+'efilteredA'+'tlas'](_0x2c0120,{'target':this['_internalE'+'nvAtlas']}),this['_envAtlas']=this['_internalE'+'nvAtlas']):(this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_envAtlas']=null),this['_prefilter'+'edCubemaps']=_0x2c0120['slice'](),this['_resetSkyM'+'esh']());}get['prefiltere'+'dCubemaps'](){return this['_prefilter'+'edCubemaps'];}set['skybox'](_0x2362cd){_0x2362cd!==this['_skyboxCub'+'eMap']&&(this['_skyboxCub'+'eMap']=_0x2362cd,this['_resetSkyM'+'esh']());}get['skybox'](){return this['_skyboxCub'+'eMap'];}set['skyboxInte'+'nsity'](_0x47e4a6){_0x47e4a6!==this['_skyboxInt'+'ensity']&&(this['_skyboxInt'+'ensity']=_0x47e4a6,this['_resetSkyM'+'esh']());}get['skyboxInte'+'nsity'](){return this['_skyboxInt'+'ensity'];}set['skyboxLumi'+'nance'](_0x4a6ada){_0x4a6ada!==this['_skyboxLum'+'inance']&&(this['_skyboxLum'+'inance']=_0x4a6ada,this['_resetSkyM'+'esh']());}get['skyboxLumi'+'nance'](){return this['_skyboxLum'+'inance'];}set['skyboxMip'](_0x141ea4){_0x141ea4!==this['_skyboxMip']&&(this['_skyboxMip']=_0x141ea4,this['_resetSkyM'+'esh']());}get['skyboxMip'](){return this['_skyboxMip'];}set['skyboxHigh'+'lightMulti'+'plier'](_0x127719){_0x127719!==this['_skyboxHig'+'hlightMult'+'iplier']&&(this['_skyboxHig'+'hlightMult'+'iplier']=_0x127719,this['_resetSkyM'+'esh']());}get['skyboxHigh'+'lightMulti'+'plier'](){return this['_skyboxHig'+'hlightMult'+'iplier'];}set['skyboxRota'+'tion'](_0x3b1416){if(!this['_skyboxRot'+'ation']['equals'](_0x3b1416)){const _0x1c0dc4=_0x3b1416['equals'](le['IDENTITY']);this['_skyboxRot'+'ation']['copy'](_0x3b1416),_0x1c0dc4?this['_skyboxRot'+'ationMat3']['setIdentit'+'y']():(this['_skyboxRot'+'ationMat4']['setTRS'](D['ZERO'],_0x3b1416,D['ONE']),this['_skyboxRot'+'ationMat3']['invertMat4'](this['_skyboxRot'+'ationMat4'])),!this['_skyboxRot'+'ationShade'+'rInclude']&&!_0x1c0dc4&&(this['_skyboxRot'+'ationShade'+'rInclude']=!(0x1765+-0x11a9+-0x5bc),this['_resetSkyM'+'esh']());}}get['skyboxRota'+'tion'](){return this['_skyboxRot'+'ation'];}['destroy'](){this['_resetSkyM'+'esh'](),this['root']=null,this['off']();}['drawLine'](_0x66028d,_0x304234,_0x212ffc=ie['WHITE'],_0x4d43ad=!(-0x283*-0x2+-0xdc2+0x8bc),_0x572f69=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x572f69,_0x4d43ad)['addLines']([_0x66028d,_0x304234],[_0x212ffc,_0x212ffc]);}['drawLines'](_0x49a489,_0x5e047e,_0x50f453=!(-0x1*-0x1c99+-0x97*0xe+-0x1457),_0x5ae923=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x5ae923,_0x50f453)['addLines'](_0x49a489,_0x5e047e);}['drawLineAr'+'rays'](_0x1b4875,_0x441973,_0x147681=!(-0x4*0x11d+0x221c+-0x1da8),_0x511584=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x511584,_0x147681)['addLinesAr'+'rays'](_0x1b4875,_0x441973);}['applySetti'+'ngs'](_0x18fbec){const _0x480b47=_0x18fbec['physics'],_0x48919f=_0x18fbec['render'];this['_gravity']['set'](_0x480b47['gravity'][0xf80+-0x25e*-0x6+0x4*-0x76d],_0x480b47['gravity'][-0x183b+0x79+0x17c3],_0x480b47['gravity'][0x2d2*0x3+0x3b*0x22+0x8b*-0x1e]),this['ambientLig'+'ht']['set'](_0x48919f['global_amb'+'ient'][0x1*0x2336+0x1a95+-0x3dcb],_0x48919f['global_amb'+'ient'][-0x11f1+-0x110f+-0x2301*-0x1],_0x48919f['global_amb'+'ient'][0x2a+-0x22e7+-0x5*-0x6f3]),this['ambientLum'+'inance']=_0x48919f['ambientLum'+'inance'],this['fog']['type']=_0x48919f['fog'],this['fog']['color']['set'](_0x48919f['fog_color'][-0xd43*0x2+-0x1a17*0x1+0x349d],_0x48919f['fog_color'][-0x84*0x8+0x11*-0x2e+0x72f],_0x48919f['fog_color'][0x2430+-0x7bd*-0x3+-0x5*0xbe1]),this['fog']['start']=_0x48919f['fog_start'],this['fog']['end']=_0x48919f['fog_end'],this['fog']['density']=_0x48919f['fog_densit'+'y'],this['lightmapSi'+'zeMultipli'+'er']=_0x48919f['lightmapSi'+'zeMultipli'+'er'],this['lightmapMa'+'xResolutio'+'n']=_0x48919f['lightmapMa'+'xResolutio'+'n'],this['lightmapMo'+'de']=_0x48919f['lightmapMo'+'de'],this['exposure']=_0x48919f['exposure'],this['_skyboxInt'+'ensity']=_0x48919f['skyboxInte'+'nsity']??-0x2*0x472+0x15b+0x78a,this['_skyboxLum'+'inance']=_0x48919f['skyboxLumi'+'nance']??0x2*-0x4459+0x685f+0x3*0x24d1,this['_skyboxMip']=_0x48919f['skyboxMip']??-0x1*-0x1df9+0x20f2+-0x3eeb,_0x48919f['skyboxRota'+'tion']&&(this['skyboxRota'+'tion']=new le()['setFromEul'+'erAngles'](_0x48919f['skyboxRota'+'tion'][-0x6ab+-0xe3*-0x3+-0x2*-0x201],_0x48919f['skyboxRota'+'tion'][0x32*0x4a+-0x1def+-0x1*-0xf7c],_0x48919f['skyboxRota'+'tion'][0x378+-0x3b*-0x61+-0x19d1])),this['sky']['applySetti'+'ngs'](_0x48919f),this['clusteredL'+'ightingEna'+'bled']=_0x48919f['clusteredL'+'ightingEna'+'bled']??!(0x1d54+-0x985*0x3+0x7*-0x1c),this['lighting']['applySetti'+'ngs'](_0x48919f),['lightmapFi'+'lterEnable'+'d','lightmapFi'+'lterRange','lightmapFi'+'lterSmooth'+'ness','ambientBak'+'e','ambientBak'+'eNumSample'+'s','ambientBak'+'eSpherePar'+'t','ambientBak'+'eOcclusion'+'Brightness','ambientBak'+'eOcclusion'+'Contrast']['forEach'](_0x1bbf0a=>{_0x48919f['hasOwnProp'+'erty'](_0x1bbf0a)&&(this[_0x1bbf0a]=_0x48919f[_0x1bbf0a]);}),this['_resetSkyM'+'esh']();}['_getSkybox'+'Tex'](){const _0x55fd89=this['_prefilter'+'edCubemaps'];return this['_skyboxMip']?_0x55fd89[[-0x1*-0xf43+-0x16a*0x8+-0x3f3,0xd9+0x230e+-0x23e6,-0x9a9*-0x3+-0x49*0x5b+-0x305,-0x511*-0x1+-0xb63+0x656,-0x17a5+0x1590+0x21a*0x1,-0xc1d+-0x90b+0x2*0xa97][this['_skyboxMip']]]||this['_envAtlas']||_0x55fd89[-0x77c+0x187a+-0x10fe]||this['_skyboxCub'+'eMap']:this['_skyboxCub'+'eMap']||_0x55fd89[0xd6d+0x901+-0x105*0x16]||this['_envAtlas'];}['_updateSky'+'Mesh'](){this['sky']['skyMesh']||this['sky']['updateSkyM'+'esh'](),this['sky']['update']();}['_resetSkyM'+'esh'](){this['sky']['resetSkyMe'+'sh'](),this['updateShad'+'ers']=!(-0x9c7*-0x1+0x218d+-0x3b*0xbc);}['setSkybox'](_0x358c00){_0x358c00?(this['skybox']=_0x358c00[0x85b+-0x13d0+0xb75]||null,_0x358c00[0x1033+-0x3ce*0x2+-0x9d*0xe]&&!_0x358c00[-0x1d0d+-0x1ed7+0x13f7*0x3]['cubemap']?this['envAtlas']=_0x358c00[0x883+-0x3a3*0x2+-0x4f*0x4]:this['prefiltere'+'dCubemaps']=_0x358c00['slice'](-0x1f60*0x1+0xb9c*-0x2+0x3699)):(this['skybox']=null,this['envAtlas']=null);}get['lightmapPi'+'xelFormat'](){return this['lightmapHD'+'R']&&this['device']['getRendera'+'bleHdrForm'+'at']()||Ne;}}h(Et,'EVENT_SETL'+'AYERS','set:layers'),h(Et,'EVENT_SETS'+'KYBOX','set:skybox'),h(Et,'EVENT_PRER'+'ENDER','prerender'),h(Et,'EVENT_POST'+'RENDER','postrender'),h(Et,'EVENT_PRER'+'ENDER_LAYE'+'R','prerender:'+'layer'),h(Et,'EVENT_POST'+'RENDER_LAY'+'ER','postrender'+':layer'),h(Et,'EVENT_PREC'+'ULL','precull'),h(Et,'EVENT_POST'+'CULL','postcull');class Ky{constructor(_0x557274,_0x26ccd8,_0x2f522b){this['device']=_0x557274,this['inverseBin'+'dPose']=_0x26ccd8,this['boneNames']=_0x2f522b;}}const tA=[0x429+-0x1*-0xe55+-0x1*0x127e,0x166f+-0x708+-0xf67,0x6d*0x3b+-0x2*-0x541+-0x23a*0x10,-0x2*-0x344+-0x1*0x1a2d+0x13a5,-0xb8f*-0x2+0x1*-0x83+-0x3*0x789,0x1*0x2343+-0x64f*0x1+-0x1*0x1cf3,0xa0+0x380+-0x420,0x1ae2*-0x1+-0x2*0x11c4+-0x3e6a*-0x1,0x2ad*-0x8+0xed*-0x1f+0xc87*0x4,0x12c6+-0x1*-0x1acf+-0x2d95,0x236d+0x1be8+-0x3f55,0x184c+0x44a+0x1b*-0x10f],sA=[-0x2141+-0x1b*0x10d+0x3da0,-0x25cf+0xe3+0x24ed,0x23e1+-0x3*0xaca+0x7*-0x80,0x1*-0x1f8a+-0x1ab*0x15+-0x2e5*-0x17,-0xdb2*-0x1+-0x67*0x29+-0xc*-0x3c,-0x2695+0x1645+0x1051];class iA extends me{constructor(_0x31a5b1,_0x2dd9fb){super(),this['_device']=_0x31a5b1,this['_pixelsPer'+'Unit']=_0x2dd9fb&&_0x2dd9fb['pixelsPerU'+'nit']!==void(-0x2*0x460+-0x36b+-0xc2b*-0x1)?_0x2dd9fb['pixelsPerU'+'nit']:0x1191+0xa*-0x19f+-0x15a*0x1,this['_renderMod'+'e']=_0x2dd9fb&&_0x2dd9fb['renderMode']!==void(0xcca+-0xddc+0x112)?_0x2dd9fb['renderMode']:ci,this['_atlas']=_0x2dd9fb&&_0x2dd9fb['atlas']!==void(0x15*0x17e+-0x16af+-0x1bb*0x5)?_0x2dd9fb['atlas']:null,this['_frameKeys']=_0x2dd9fb&&_0x2dd9fb['frameKeys']!==void(0x3*0x99d+-0x1465+-0x872)?_0x2dd9fb['frameKeys']:null,this['_meshes']=[],this['_updatingP'+'roperties']=!(0x1*0x5a0+-0x142d+0x6*0x26d),this['_meshesDir'+'ty']=!(-0x1*0xf8b+-0x390+0x131c),this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes']();}set['frameKeys'](_0x2ac278){this['_frameKeys']=_0x2ac278,this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x9*-0x2c1+-0x1d82*0x1+0x364b):this['_createMes'+'hes']()),this['fire']('set:frameK'+'eys',_0x2ac278);}get['frameKeys'](){return this['_frameKeys'];}set['atlas'](_0x1c7979){_0x1c7979!==this['_atlas']&&(this['_atlas']&&(this['_atlas']['off']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['off']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['off']('remove:fra'+'me',this['_onFrameRe'+'moved'],this)),this['_atlas']=_0x1c7979,this['_atlas']&&this['_frameKeys']&&(this['_atlas']['on']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['on']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['on']('remove:fra'+'me',this['_onFrameRe'+'moved'],this),this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x2652+-0x2df+-0x2373):this['_createMes'+'hes']()),this['fire']('set:atlas',_0x1c7979));}get['atlas'](){return this['_atlas'];}set['pixelsPerU'+'nit'](_0x6211cd){this['_pixelsPer'+'Unit']!==_0x6211cd&&(this['_pixelsPer'+'Unit']=_0x6211cd,this['fire']('set:pixels'+'PerUnit',_0x6211cd),this['_atlas']&&this['_frameKeys']&&this['renderMode']===ci&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x189b+-0x168+-0x1733):this['_createMes'+'hes']()));}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}set['renderMode'](_0x10bdc0){if(this['_renderMod'+'e']===_0x10bdc0)return;const _0x542178=this['_renderMod'+'e'];this['_renderMod'+'e']=_0x10bdc0,this['fire']('set:render'+'Mode',_0x10bdc0),(_0x542178===ci||_0x10bdc0===ci)&&this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x116c+0x2*0xa5b+-0x2622):this['_createMes'+'hes']());}get['renderMode'](){return this['_renderMod'+'e'];}get['meshes'](){return this['_meshes'];}['_createMes'+'hes'](){const _0x20171f=this['_meshes']['length'];for(let _0x1c454b=-0x3*-0xba7+-0x16*0xcd+-0x1157;_0x1c454b<_0x20171f;_0x1c454b++){const _0x508c8b=this['_meshes'][_0x1c454b];_0x508c8b&&_0x508c8b['destroy']();}const _0x164a2b=this['_frameKeys']['length'];this['_meshes']=new Array(_0x164a2b);const _0x455a64=this['renderMode']===Pt||this['_renderMod'+'e']===Mt?this['_create9Sl'+'iceMesh']:this['_createSim'+'pleMesh'];for(let _0x5caa4c=-0x1d39*-0x1+0x2391+-0x40ca;_0x5caa4c<_0x164a2b;_0x5caa4c++){const _0x19de22=this['_atlas']['frames'][this['_frameKeys'][_0x5caa4c]];this['_meshes'][_0x5caa4c]=_0x19de22?_0x455a64['call'](this,_0x19de22):null;}this['fire']('set:meshes');}['_createSim'+'pleMesh'](_0x15264e){const _0x3ddba0=_0x15264e['rect'],_0x57e1ff=this['_atlas']['texture']['width'],_0x288ec4=this['_atlas']['texture']['height'],_0x46cc2e=_0x3ddba0['z']/this['_pixelsPer'+'Unit'],_0x5f54f8=_0x3ddba0['w']/this['_pixelsPer'+'Unit'],_0x2f1956=_0x15264e['pivot']['x'],_0x121269=_0x15264e['pivot']['y'],_0x1c2cb8=[-_0x2f1956*_0x46cc2e,-_0x121269*_0x5f54f8,-0x182b+-0x16c2+-0x29*-0x125,(0x20a2+-0x542+-0xd*0x21b-_0x2f1956)*_0x46cc2e,-_0x121269*_0x5f54f8,-0x2*-0xb95+0x1*-0x1993+0x269,(0x17db+0x1144+-0x148f*0x2-_0x2f1956)*_0x46cc2e,(0x1*0x1721+-0x835*-0x1+-0xd*0x269-_0x121269)*_0x5f54f8,-0x3d3+-0x3ed*0x9+0x1*0x2728,-_0x2f1956*_0x46cc2e,(-0x40*0x2c+0x1ee+0x17*0x65-_0x121269)*_0x5f54f8,0xc0+0x2411+-0x41*0x91],_0x968fa1=_0x3ddba0['x']/_0x57e1ff,_0x1be71c=0x2030+0x15e1+0xad0*-0x5-_0x3ddba0['y']/_0x288ec4,_0x15983a=(_0x3ddba0['x']+_0x3ddba0['z'])/_0x57e1ff,_0x21287e=-0x2178+0x3*0xa31+0x2e6-(_0x3ddba0['y']+_0x3ddba0['w'])/_0x288ec4,_0x450da5=[_0x968fa1,_0x1be71c,_0x15983a,_0x1be71c,_0x15983a,_0x21287e,_0x968fa1,_0x21287e],_0x36cecf=new ga();return _0x36cecf['positions']=_0x1c2cb8,_0x36cecf['normals']=tA,_0x36cecf['uvs']=_0x450da5,_0x36cecf['indices']=sA,Ge['fromGeomet'+'ry'](this['_device'],_0x36cecf);}['_create9Sl'+'iceMesh'](){const _0x23efdb=J['ONE'],_0x3389b9=-0x1*0x2029+0x4d*0x12+-0x2*-0xd61,_0x2d29fb=-0x2496+-0xe05*0x2+0x1*0x40a3,_0x46a0fa=[],_0x2b320c=[],_0x33cfd0=[],_0x185e6e=[];let _0x3df4a8=0x26df*-0x1+0x7*0x70+-0x1*-0x23cf;for(let _0x12093f=-0x73*0x49+-0xfd3*-0x1+0x10f8;_0x12093f<=_0x3389b9;_0x12093f++){const _0x559651=_0x12093f===-0x127c+0x8e9+0x331*0x3||_0x12093f===_0x3389b9?0x144c+0x7f7+-0x1c43:0x5d*-0x1a+0x144d+-0x1cf*0x6;for(let _0x514a7a=-0x1*-0x1a8a+-0xc3d+0x1*-0xe4d;_0x514a7a<=_0x2d29fb;_0x514a7a++){const _0x3f4dda=-_0x23efdb['x']+(-0x5de*0x3+-0x202*-0x2+0xd98*0x1)*_0x23efdb['x']*(_0x12093f<=0x9da*0x2+0x1d3a+-0x30ed?-0x1db4*-0x1+0xf5f+-0x2d13:-0x1*0x1472+-0x2b3*-0x6+-0x1*-0x443)/_0x3389b9,_0xae3241=0xbf3+-0x860*0x1+0x131*-0x3,_0x20c62e=-(-_0x23efdb['y']+(-0x550+-0xe81+0x13d3)*_0x23efdb['y']*(_0x514a7a<=-0x7*0x57d+-0xfb*-0x3+0x237b?0x202*-0x4+-0x9d*-0x37+-0x19b3:-0xef2+0x8f3+-0x2*-0x301)/_0x2d29fb),_0x30568b=_0x514a7a===0x1c2e+0x2*-0x46d+-0x4d5*0x4||_0x514a7a===_0x2d29fb?-0x2f*-0x3d+-0x1*0x2237+0x1704:0x1b49+-0x258d+-0xb*-0xef;_0x46a0fa['push'](-_0x3f4dda,_0xae3241,_0x20c62e),_0x2b320c['push'](-0x2519+-0x58c+-0x3*-0xe37,-0x8a4+-0x251*-0x4+-0x9f,0x1718+0x1f4+-0x190c),_0x33cfd0['push'](_0x559651,_0x30568b),_0x12093f<_0x3389b9&&_0x514a7a<_0x2d29fb&&(_0x185e6e['push'](_0x3df4a8+_0x2d29fb+(-0x2*-0x95f+-0x159e+0xb*0x43),_0x3df4a8+(0x11*0x47+0xaa6+-0xf5c),_0x3df4a8),_0x185e6e['push'](_0x3df4a8+_0x2d29fb+(0xd*0x2a1+-0x2*0x1af+-0x1ece),_0x3df4a8+_0x2d29fb+(-0x610*-0x3+-0x1c0+-0x106e),_0x3df4a8+(0x253d+0xef1+0x169*-0x25))),_0x3df4a8++;}}const _0x4bea2b=new ga();return _0x4bea2b['positions']=_0x46a0fa,_0x4bea2b['normals']=_0x2b320c,_0x4bea2b['uvs']=_0x33cfd0,_0x4bea2b['indices']=_0x185e6e,Ge['fromGeomet'+'ry'](this['_device'],_0x4bea2b);}['_onSetFram'+'es'](_0x37742f){this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x1*0x469+-0x1993+0x13*0x194):this['_createMes'+'hes']();}['_onFrameCh'+'anged'](_0x1c3f07,_0x4903b3){const _0x1353b6=this['_frameKeys']['indexOf'](_0x1c3f07);_0x1353b6<0x46d+0x4*0xfb+-0x859||(_0x4903b3?this['renderMode']===ci&&(this['_meshes'][_0x1353b6]=this['_createSim'+'pleMesh'](_0x4903b3)):this['_meshes'][_0x1353b6]=null,this['fire']('set:meshes'));}['_onFrameRe'+'moved'](_0x393d85){const _0x201892=this['_frameKeys']['indexOf'](_0x393d85);_0x201892<0x671+0x18aa+-0x1f1b||(this['_meshes'][_0x201892]=null,this['fire']('set:meshes'));}['startUpdat'+'e'](){this['_updatingP'+'roperties']=!(0x2682+-0x26c4+0x42),this['_meshesDir'+'ty']=!(0xa3d*-0x1+-0x2*-0xc3a+-0xe36);}['endUpdate'](){this['_updatingP'+'roperties']=!(0x1986+0x257b+-0x3f00),this['_meshesDir'+'ty']&&this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes'](),this['_meshesDir'+'ty']=!(-0x1*0x21f9+-0x1*-0x1613+-0xbe7*-0x1);}['destroy'](){for(const _0x309990 of this['_meshes'])_0x309990&&_0x309990['destroy']();this['_meshes']['length']=0x43*-0x43+-0x229+0x13b2;}}class rA extends me{constructor(){super(),this['_texture']=null,this['_frames']=null;}set['texture'](_0x3af247){this['_texture']=_0x3af247,this['fire']('set:textur'+'e',_0x3af247);}get['texture'](){return this['_texture'];}set['frames'](_0x1a1ce1){this['_frames']=_0x1a1ce1,this['fire']('set:frames',_0x1a1ce1);}get['frames'](){return this['_frames'];}['setFrame'](_0x13681f,_0x245875){let _0x1f7617=this['_frames'][_0x13681f];_0x1f7617?(_0x1f7617['rect']['copy'](_0x245875['rect']),_0x1f7617['pivot']['copy'](_0x245875['pivot']),_0x1f7617['border']['copy'](_0x245875['border'])):(_0x1f7617={'rect':_0x245875['rect']['clone'](),'pivot':_0x245875['pivot']['clone'](),'border':_0x245875['border']['clone']()},this['_frames'][_0x13681f]=_0x1f7617),this['fire']('set:frame',_0x13681f['toString'](),_0x1f7617);}['removeFram'+'e'](_0x3109d4){const _0x5d9aed=this['_frames'][_0x3109d4];_0x5d9aed&&(delete this['_frames'][_0x3109d4],this['fire']('remove:fra'+'me',_0x3109d4['toString'](),_0x5d9aed));}['destroy'](){this['_texture']&&this['_texture']['destroy']();}}class N_{constructor(_0x55d359,_0x3962d2,_0x34d8ce,_0x1c0876){this['time']=_0x55d359,this['position']=_0x3962d2,this['rotation']=_0x34d8ce,this['scale']=_0x1c0876;}}class k_{constructor(){this['_name']='',this['_keys']=[];}}class U_{constructor(){h(this,'name',''),h(this,'duration',-0xf34+0xc15+0x31f),(this['_nodes']=[],this['_nodeDict']={});}['getNode'](_0x13b75f){return this['_nodeDict'][_0x13b75f];}['addNode'](_0x250067){this['_nodes']['push'](_0x250067),this['_nodeDict'][_0x250067['_name']]=_0x250067;}get['nodes'](){return this['_nodes'];}}class aA{constructor(){this['_written']=!(-0x2*0xd01+0x37b+0x1688),this['_name']='',this['_keyFrames']=[],this['_quat']=new le(),this['_pos']=new D(),this['_scale']=new D(),this['_targetNod'+'e']=null;}['getTarget'](){return this['_targetNod'+'e'];}['setTarget'](_0x416f2f){this['_targetNod'+'e']=_0x416f2f;}}class Yd{constructor(_0x551c96){h(this,'looping',!(-0xb42+-0x1*-0x1d75+-0x3*0x611)),(this['_animation']=null,this['_time']=0x1ace+0x1d55+-0x3823,this['_interpola'+'tedKeys']=[],this['_interpola'+'tedKeyDict']={},this['_currKeyIn'+'dices']={},this['graph']=null);const _0x4a6328=_0x5ccbf3=>{const _0x4ba00b=new aA();_0x4ba00b['_name']=_0x5ccbf3['name'],this['_interpola'+'tedKeys']['push'](_0x4ba00b),this['_interpola'+'tedKeyDict'][_0x5ccbf3['name']]=_0x4ba00b,this['_currKeyIn'+'dices'][_0x5ccbf3['name']]=-0x97f*0x1+0x6a3+0x6*0x7a;for(let _0x512554=0x6*0x176+-0xd*0x8e+0x2*-0xc7;_0x512554<_0x5ccbf3['_children']['length'];_0x512554++)_0x4a6328(_0x5ccbf3['_children'][_0x512554]);};_0x4a6328(_0x551c96);}set['animation'](_0x7b1c6){this['_animation']=_0x7b1c6,this['currentTim'+'e']=-0xfe9*-0x1+-0x6*-0x33+-0x111b;}get['animation'](){return this['_animation'];}set['currentTim'+'e'](_0x3792ab){this['_time']=_0x3792ab;const _0x5a567d=this['_interpola'+'tedKeys']['length'];for(let _0x3f1a8e=0x973+-0x7cf+-0xe*0x1e;_0x3f1a8e<_0x5a567d;_0x3f1a8e++){const _0x488b34=this['_interpola'+'tedKeys'][_0x3f1a8e]['_name'];this['_currKeyIn'+'dices'][_0x488b34]=0x5*0x634+-0x14e7+-0xa1d*0x1;}this['addTime'](0x3*0x6d0+-0xa*0x65+-0x107e),this['updateGrap'+'h']();}get['currentTim'+'e'](){return this['_time'];}get['numNodes'](){return this['_interpola'+'tedKeys']['length'];}['addTime'](_0x10107b){if(this['_animation']!==null){const _0x1611be=this['_animation']['_nodes'],_0x52a133=this['_animation']['duration'];if(this['_time']===_0x52a133&&!this['looping'])return;if(this['_time']+=_0x10107b,this['_time']>_0x52a133){this['_time']=this['looping']?0x6*-0x43b+-0x5a3*-0x5+-0x2cd:_0x52a133;for(let _0x1b70ce=-0xe*-0x176+-0x2ab*0xa+0x63a;_0x1b70ce<_0x1611be['length'];_0x1b70ce++){const _0x4f02cf=_0x1611be[_0x1b70ce]['_name'];this['_currKeyIn'+'dices'][_0x4f02cf]=0x1*-0x20ed+-0x1*0x59d+0x268a;}}else{if(this['_time']<0xacc+-0xf42+-0x476*-0x1){this['_time']=this['looping']?_0x52a133:0xc3d+-0xe17+-0xed*-0x2;for(let _0x1e785e=0x24a*0x2+-0xc0e+0xb*0xae;_0x1e785e<_0x1611be['length'];_0x1e785e++){const _0x1b6f70=_0x1611be[_0x1e785e],_0x337170=_0x1b6f70['_name'];this['_currKeyIn'+'dices'][_0x337170]=_0x1b6f70['_keys']['length']-(-0x16b3+0x1af3*0x1+-0x43e);}}}const _0x1d9cfa=_0x10107b>=0xfc4+0x1c7b+0x2c3f*-0x1?0x1cca+0x157c+-0x1*0x3245:-(0x7*0x7b+0x1b67+0x7d*-0x3f);for(let _0x40fcf2=0x11d3+0x164+-0x1*0x1337;_0x40fcf2<_0x1611be['length'];_0x40fcf2++){const _0x1142fe=_0x1611be[_0x40fcf2],_0x1bbee7=_0x1142fe['_name'],_0xdea572=_0x1142fe['_keys'],_0x368f46=this['_interpola'+'tedKeyDict'][_0x1bbee7];if(_0x368f46===void(-0x47*-0x89+-0x1426+-0x3*0x5f3)){w['warn']('Unknown\x20sk'+'eleton\x20nod'+'e\x20name:\x20'+_0x1bbee7);continue;}let _0x10dd60=!(-0x1*-0x19e2+-0xf53*-0x1+-0x2934);if(_0xdea572['length']!==0x8d*0x6+0x1c70+-0x5*0x659)for(let _0x5169e0=this['_currKeyIn'+'dices'][_0x1bbee7];_0x5169e0<_0xdea572['length']-(0x3b9+-0x21e6*0x1+0x1e2e)&&_0x5169e0>=-0x8ac+0x25fc+0x7*-0x430;_0x5169e0+=_0x1d9cfa){const _0xd60da0=_0xdea572[_0x5169e0],_0x56e2af=_0xdea572[_0x5169e0+(0x265a*0x1+0xeb4+-0x3*0x11af)];if(_0xd60da0['time']<=this['_time']&&_0x56e2af['time']>=this['_time']){const _0x471252=(this['_time']-_0xd60da0['time'])/(_0x56e2af['time']-_0xd60da0['time']);_0x368f46['_pos']['lerp'](_0xd60da0['position'],_0x56e2af['position'],_0x471252),_0x368f46['_quat']['slerp'](_0xd60da0['rotation'],_0x56e2af['rotation'],_0x471252),_0x368f46['_scale']['lerp'](_0xd60da0['scale'],_0x56e2af['scale'],_0x471252),_0x368f46['_written']=!(0x19b7*0x1+0xf*-0x1ac+-0xa3),this['_currKeyIn'+'dices'][_0x1bbee7]=_0x5169e0,_0x10dd60=!(-0x4d*-0x11+-0x101*0x11+0xbf4);break;}}(_0xdea572['length']===-0x1d8d+-0x15f2+0x3380||!_0x10dd60&&this['_time']===0x3f3+0x8ef*-0x1+0x4fc&&this['looping'])&&(_0x368f46['_pos']['copy'](_0xdea572[0x3f+0x1519+-0x1558]['position']),_0x368f46['_quat']['copy'](_0xdea572[0x19*-0x102+-0xafb*-0x1+0x1*0xe37]['rotation']),_0x368f46['_scale']['copy'](_0xdea572[-0x1379+0xd*0x8e+0x1*0xc43]['scale']),_0x368f46['_written']=!(-0x19*0x73+0x1c4+0x977));}}}['blend'](_0x4e6e02,_0xd1b1c7,_0x24ad76){const _0xc583e6=this['_interpola'+'tedKeys']['length'];for(let _0x10f8f1=0x1ac9+-0x139a+-0x3*0x265;_0x10f8f1<_0xc583e6;_0x10f8f1++){const _0x83edf6=_0x4e6e02['_interpola'+'tedKeys'][_0x10f8f1],_0x1e2ff0=_0xd1b1c7['_interpola'+'tedKeys'][_0x10f8f1],_0x1b7589=this['_interpola'+'tedKeys'][_0x10f8f1];_0x83edf6['_written']&&_0x1e2ff0['_written']?(_0x1b7589['_quat']['slerp'](_0x83edf6['_quat'],_0xd1b1c7['_interpola'+'tedKeys'][_0x10f8f1]['_quat'],_0x24ad76),_0x1b7589['_pos']['lerp'](_0x83edf6['_pos'],_0xd1b1c7['_interpola'+'tedKeys'][_0x10f8f1]['_pos'],_0x24ad76),_0x1b7589['_scale']['lerp'](_0x83edf6['_scale'],_0x1e2ff0['_scale'],_0x24ad76),_0x1b7589['_written']=!(-0x85*-0x35+0x3*-0xbab+0x778)):_0x83edf6['_written']?(_0x1b7589['_quat']['copy'](_0x83edf6['_quat']),_0x1b7589['_pos']['copy'](_0x83edf6['_pos']),_0x1b7589['_scale']['copy'](_0x83edf6['_scale']),_0x1b7589['_written']=!(-0x107*-0x6+-0x4*0x17a+-0x42)):_0x1e2ff0['_written']&&(_0x1b7589['_quat']['copy'](_0x1e2ff0['_quat']),_0x1b7589['_pos']['copy'](_0x1e2ff0['_pos']),_0x1b7589['_scale']['copy'](_0x1e2ff0['_scale']),_0x1b7589['_written']=!(0xb*-0x32b+-0x199*0x17+0x4798));}}['setGraph'](_0x3e8aff){if(this['graph']=_0x3e8aff,_0x3e8aff)for(let _0x4ab367=0x4f1*0x1+-0xee9+0x9f8;_0x4ab367<this['_interpola'+'tedKeys']['length'];_0x4ab367++){const _0x20321f=this['_interpola'+'tedKeys'][_0x4ab367],_0x2e07eb=_0x3e8aff['findByName'](_0x20321f['_name']);this['_interpola'+'tedKeys'][_0x4ab367]['setTarget'](_0x2e07eb);}else{for(let _0x50f7b8=-0x9c8+-0x814+0x6*0x2fa;_0x50f7b8<this['_interpola'+'tedKeys']['length'];_0x50f7b8++)this['_interpola'+'tedKeys'][_0x50f7b8]['setTarget'](null);}}['updateGrap'+'h'](){if(this['graph'])for(let _0x18ad2a=-0x1251+-0x1*0x137b+0x25cc;_0x18ad2a<this['_interpola'+'tedKeys']['length'];_0x18ad2a++){const _0x4b3bb0=this['_interpola'+'tedKeys'][_0x18ad2a];if(_0x4b3bb0['_written']){const _0x1e9585=_0x4b3bb0['getTarget']();_0x1e9585['localPosit'+'ion']['copy'](_0x4b3bb0['_pos']),_0x1e9585['localRotat'+'ion']['copy'](_0x4b3bb0['_quat']),_0x1e9585['localScale']['copy'](_0x4b3bb0['_scale']),_0x1e9585['_dirtyLoca'+'l']||_0x1e9585['_dirtifyLo'+'cal'](),_0x4b3bb0['_written']=!(-0xc2f*0x1+-0x2*0xabd+-0x21aa*-0x1);}}}}const Bs=(0x2291*-0x1+-0x7*-0xef+-0xe06*-0x2)/(-0x1*0x22a3+-0x455+0x2*0x139c),si=-0x5c*-0x45+0x956+-0x2221*0x1-Bs*(-0x7b5+0x23be+0x23*-0xcd);class Wp extends ga{constructor(_0x197eae,_0x42bf85,_0x4017a5,_0x122bfa,_0x577d2b,_0x49791b){super();const _0x3a59be=new D(),_0x5a31c5=new D(),_0xa2dce8=new D(),_0xa05872=new D(),_0x44dcaa=new D(),_0x5df709=new D(),_0x323ae2=[],_0x41f3ce=[],_0x531b2a=[],_0x206f33=[],_0x416fed=[];let _0x2622c3;if(_0x4017a5>-0x1578+-0xe3*0x28+0x2*0x1c78){for(let _0x337920=0x1cb+-0x2691+0x24c6;_0x337920<=_0x122bfa;_0x337920++)for(let _0x5a2060=-0x98e+-0xc7c+0x160a;_0x5a2060<=_0x577d2b;_0x5a2060++){const _0x46d028=_0x5a2060/_0x577d2b*(-0x12f9*0x1+0x14e7*-0x1+-0x2*-0x13f1)*Math['PI']-Math['PI'],_0x560517=Math['sin'](_0x46d028),_0x58d00c=Math['cos'](_0x46d028);_0x44dcaa['set'](_0x560517*_0x197eae,-_0x4017a5/(-0x1ca4+-0xacb*-0x3+0x3bb*-0x1),_0x58d00c*_0x197eae),_0xa05872['set'](_0x560517*_0x42bf85,_0x4017a5/(-0x15d3+0x9f6+-0x3*-0x3f5),_0x58d00c*_0x42bf85),_0x3a59be['lerp'](_0x44dcaa,_0xa05872,_0x337920/_0x122bfa),_0x5a31c5['sub2'](_0xa05872,_0x44dcaa)['normalize'](),_0x5df709['set'](_0x58d00c,0x62c+-0x5ef+-0x3d,-_0x560517),_0xa2dce8['cross'](_0x5df709,_0x5a31c5)['normalize'](),_0x323ae2['push'](_0x3a59be['x'],_0x3a59be['y'],_0x3a59be['z']),_0x41f3ce['push'](_0xa2dce8['x'],_0xa2dce8['y'],_0xa2dce8['z']);let _0x1c0bbc=_0x5a2060/_0x577d2b,_0xbf3204=_0x337920/_0x122bfa;_0x531b2a['push'](_0x1c0bbc,-0xec2+0xc42+0x281-_0xbf3204);const _0x26928a=_0xbf3204;if(_0xbf3204=_0x1c0bbc,_0x1c0bbc=_0x26928a,_0x1c0bbc=_0x1c0bbc*si+Bs,_0xbf3204=_0xbf3204*si+Bs,_0x1c0bbc/=0x15dd+-0xa6a+-0xb70,_0x206f33['push'](_0x1c0bbc,-0xc8+-0x49*0x5f+0x1be0-_0xbf3204),_0x337920<_0x122bfa&&_0x5a2060<_0x577d2b){const _0x4d6a1d=_0x337920*(_0x577d2b+(0x2d+-0x136a*-0x1+0x6d*-0x2e))+_0x5a2060,_0x15868c=_0x337920*(_0x577d2b+(-0x1*0x1799+-0x11cf+0x2969*0x1))+(_0x5a2060+(0x1*-0x1123+-0x656+0x177a)),_0x25a164=(_0x337920+(0x1c9+-0x34*-0x9f+-0x1*0x2214))*(_0x577d2b+(-0x27*0x51+-0x2*-0x789+-0x15d*0x2))+_0x5a2060,_0x184b88=(_0x337920+(-0x52d+-0x7*-0x139+-0x361))*(_0x577d2b+(0x2653+0x13d+-0x1*0x278f))+(_0x5a2060+(0x231b+0xc*0x2b6+-0x21d1*0x2));_0x416fed['push'](_0x4d6a1d,_0x15868c,_0x25a164),_0x416fed['push'](_0x15868c,_0x184b88,_0x25a164);}}}if(_0x49791b){const _0x5ac566=Math['floor'](_0x577d2b/(-0x144c+-0x1517+0x2965)),_0x361604=_0x577d2b,_0x1cbd95=_0x4017a5/(0xd6b+-0x2a4*0x4+-0x9*0x51);for(let _0x392ce8=-0x1*-0x18b+0x30f+-0x49a*0x1;_0x392ce8<=_0x5ac566;_0x392ce8++){const _0x5639b8=_0x392ce8*Math['PI']*(0x2528+0xdf0+0x1*-0x3318+0.5)/_0x5ac566,_0x4b664e=Math['sin'](_0x5639b8),_0x45b1de=Math['cos'](_0x5639b8);for(let _0x57c6b4=-0x19e0+0x6*-0x2e5+-0x12*-0x267;_0x57c6b4<=_0x361604;_0x57c6b4++){const _0x278924=_0x57c6b4*(-0x53+0x4c6*0x1+0x471*-0x1)*Math['PI']/_0x361604-Math['PI']/(0x6*0x397+0x1*0x215+-0x179d),_0x1b290a=Math['sin'](_0x278924),_0x4ca412=Math['cos'](_0x278924)*_0x4b664e,_0x3c6032=_0x45b1de,_0x492746=_0x1b290a*_0x4b664e;let _0x240378=0x1*-0x180+-0x1*-0x98b+0x126*-0x7-_0x57c6b4/_0x361604,_0x3c3d1b=0x1250*-0x1+-0x2140+0x3391*0x1-_0x392ce8/_0x5ac566;_0x323ae2['push'](_0x4ca412*_0x42bf85,_0x3c6032*_0x42bf85+_0x1cbd95,_0x492746*_0x42bf85),_0x41f3ce['push'](_0x4ca412,_0x3c6032,_0x492746),_0x531b2a['push'](_0x240378,0xa*-0xdf+-0xa07+-0x1*-0x12be-_0x3c3d1b),_0x240378=_0x240378*si+Bs,_0x3c3d1b=_0x3c3d1b*si+Bs,_0x240378/=0x1af6+-0x2288+-0x795*-0x1,_0x3c3d1b/=-0x12d0+-0x110+0x1*0x13e3,_0x240378+=(0x4*-0x7c3+0xf73+0xf9a)/(0x130c+-0x2*-0x12d3+-0x38af),_0x206f33['push'](_0x240378,-0xce9+-0x189+0xe73-_0x3c3d1b);}}_0x2622c3=(_0x122bfa+(-0xe1c+0x8*-0x2fe+0x260d))*(_0x577d2b+(0x1a*-0x22+0x6d*0xd+-0x214));for(let _0x1c7efd=-0x1856+-0x2545+-0x2ef*-0x15;_0x1c7efd<_0x5ac566;++_0x1c7efd)for(let _0x699e24=-0x12a5+-0x7f+-0x32*-0x62;_0x699e24<_0x361604;++_0x699e24){const _0x27c70a=_0x1c7efd*(_0x361604+(-0x81d+0x24e1*0x1+-0x1cc3))+_0x699e24,_0x4ed5c2=_0x27c70a+_0x361604+(-0x1954+-0x3*0x71d+0x2eac);_0x416fed['push'](_0x2622c3+_0x27c70a+(0x24bc+-0x61*0x35+0x853*-0x2),_0x2622c3+_0x4ed5c2,_0x2622c3+_0x27c70a),_0x416fed['push'](_0x2622c3+_0x27c70a+(0xb1e*0x1+-0xf91+0x474),_0x2622c3+_0x4ed5c2+(-0x38c+0x266f*0x1+-0x13*0x1d6),_0x2622c3+_0x4ed5c2);}for(let _0x283a6c=-0x4*0x4cd+0x11*0x25+0x10bf;_0x283a6c<=_0x5ac566;_0x283a6c++){const _0x3cdfb8=Math['PI']*(0x1*0x3b9+-0x3*-0x539+-0x1364+0.5)+_0x283a6c*Math['PI']*(0xbe3+-0xee2+0x2ff+0.5)/_0x5ac566,_0x486468=Math['sin'](_0x3cdfb8),_0x41e8bf=Math['cos'](_0x3cdfb8);for(let _0xa4d13d=-0x2555+0x11c3*-0x1+0x3718*0x1;_0xa4d13d<=_0x361604;_0xa4d13d++){const _0x1d3a1d=_0xa4d13d*(0x3*-0x29d+-0x914+0x10ed)*Math['PI']/_0x361604-Math['PI']/(-0x26c3+-0x1f*-0xd+-0x2532*-0x1),_0x2e7050=Math['sin'](_0x1d3a1d),_0x3efc45=Math['cos'](_0x1d3a1d)*_0x486468,_0x51e1ae=_0x41e8bf,_0x4aed15=_0x2e7050*_0x486468;let _0x480ca9=-0x1*0x1fd2+-0x52*-0xd+0x1ba9-_0xa4d13d/_0x361604,_0x5e1618=0xb37+-0x1843+0xd0d-_0x283a6c/_0x5ac566;_0x323ae2['push'](_0x3efc45*_0x42bf85,_0x51e1ae*_0x42bf85-_0x1cbd95,_0x4aed15*_0x42bf85),_0x41f3ce['push'](_0x3efc45,_0x51e1ae,_0x4aed15),_0x531b2a['push'](_0x480ca9,0x19d+0x1*-0xd5b+-0x1*-0xbbf-_0x5e1618),_0x480ca9=_0x480ca9*si+Bs,_0x5e1618=_0x5e1618*si+Bs,_0x480ca9/=-0x1*0x19f3+-0x2*-0x1ac+-0x3*-0x78a,_0x5e1618/=0xbe3*0x3+0x1991+0x3d37*-0x1,_0x480ca9+=(-0x704+-0x1e34+0x253a)/(-0x1*-0x24d3+0x1da7+-0x4277),_0x206f33['push'](_0x480ca9,-0x233f+0x7f3*-0x2+0x3326-_0x5e1618);}}_0x2622c3=(_0x122bfa+(-0xa5*0xe+0xed5*-0x1+0x17dc))*(_0x577d2b+(0x233d+0x1*0x25ea+-0x2*0x2493))+(_0x361604+(0x7f2+0x1e8*0xb+-0x1ce9))*(_0x5ac566+(0x1739+0x820*-0x2+-0x6f8));for(let _0x37a756=-0x1851+0x1*0x16cb+-0x27*-0xa;_0x37a756<_0x5ac566;++_0x37a756)for(let _0x31b71e=0x43*-0x17+0x76e+0x1*-0x169;_0x31b71e<_0x361604;++_0x31b71e){const _0x1ef6f8=_0x37a756*(_0x361604+(0xaa*-0x11+-0x23*-0x67+0x22*-0x15))+_0x31b71e,_0x56ba40=_0x1ef6f8+_0x361604+(-0x1c24+0xb3*0x6+0x17f3);_0x416fed['push'](_0x2622c3+_0x1ef6f8+(-0xc46*0x1+0x1c6+0xa81),_0x2622c3+_0x56ba40,_0x2622c3+_0x1ef6f8),_0x416fed['push'](_0x2622c3+_0x1ef6f8+(-0x1fd7+-0x15*0xdd+-0xb*-0x48b),_0x2622c3+_0x56ba40+(-0x2290+0x950+0x1941),_0x2622c3+_0x56ba40);}}else{if(_0x2622c3=(_0x122bfa+(-0xf0d+-0x509+-0x1417*-0x1))*(_0x577d2b+(0xe*0x11a+0x37e*-0x7+0x907)),_0x197eae>-0xbb7*0x1+-0xefd+0xd5a*0x2)for(let _0x293bb7=0x1*-0x19b+0x1d43+-0x1ba8;_0x293bb7<_0x577d2b;_0x293bb7++){const _0x8fa7c6=_0x293bb7/_0x577d2b*(-0x3*-0x858+0xf7*0x7+-0x1*0x1fc7)*Math['PI'],_0x1508bd=Math['sin'](_0x8fa7c6),_0x3323d9=-_0x4017a5/(0xf61*-0x2+-0x1*0x18c5+0x3789),_0x320a16=Math['cos'](_0x8fa7c6);let _0x540a9b=0x8*-0x17e+-0x1021*-0x1+-0x430-(_0x1508bd+(0xea8+-0x1081+0x1da))/(-0x1b*-0xa9+-0x1*-0x26fd+0x2*-0x1c67),_0x1fde67=(_0x320a16+(-0x15e2+-0xd*-0xb1+0xce6))/(0x8e3+0xc7*0x3+-0xb36);_0x323ae2['push'](_0x1508bd*_0x197eae,_0x3323d9,_0x320a16*_0x197eae),_0x41f3ce['push'](0x161d+0x7f0+-0x1e0d,-(0x2c9+-0x1c3*0xc+0x1*0x125c),-0x1a*0xb3+-0x273*0x3+-0x51b*-0x5),_0x531b2a['push'](_0x540a9b,0x99b*0x3+0xa88+-0x9d6*0x4-_0x1fde67),_0x540a9b=_0x540a9b*si+Bs,_0x1fde67=_0x1fde67*si+Bs,_0x540a9b/=0x159f+0x16e8+0x134*-0x25,_0x1fde67/=0x3bc*-0x1+-0x1ab5+0x1e74,_0x540a9b+=(0xab3+0x2*-0x392+0x7*-0x82)/(0x885*0x1+0x1bb5+0x7f*-0x49),_0x206f33['push'](_0x540a9b,-0x2*-0x8c0+0x1906+0x881*-0x5-_0x1fde67),_0x293bb7>-0x12a7+-0x17*0x4f+0x19c1&&_0x416fed['push'](_0x2622c3,_0x2622c3+_0x293bb7,_0x2622c3+_0x293bb7-(0xff*0x3+-0x1*0x19df+0x16e3));}if(_0x2622c3+=_0x577d2b,_0x42bf85>-0x12c1*-0x1+0x6ff*0x5+-0x4*0xd6f)for(let _0x36ad30=0x1*-0x1977+-0x23a7*0x1+0x3d1e;_0x36ad30<_0x577d2b;_0x36ad30++){const _0x680ac4=_0x36ad30/_0x577d2b*(-0x222+-0x9ef+0xc13)*Math['PI'],_0x15e29f=Math['sin'](_0x680ac4),_0x294a66=_0x4017a5/(0x1a06+0x41*-0x83+0x73f),_0x5a3973=Math['cos'](_0x680ac4);let _0x488b40=-0xa1d+0x2d8+0x746-(_0x15e29f+(-0x1472+0x30e+-0x1165*-0x1))/(-0x3*0x8d7+0x206d*-0x1+-0x2c*-0x157),_0x2c46f6=(_0x5a3973+(0x1a99*-0x1+-0x24b+-0x1ce5*-0x1))/(0x1ef6+-0x11fb+0x3*-0x453);_0x323ae2['push'](_0x15e29f*_0x42bf85,_0x294a66,_0x5a3973*_0x42bf85),_0x41f3ce['push'](-0x1*-0x10e7+0x1*0x17e6+-0x28cd,-0x5ac+0x76+0x537,-0x22e3+-0x1047+-0x162*-0x25),_0x531b2a['push'](_0x488b40,0x3*0x3df+0x76b+-0x1307-_0x2c46f6),_0x488b40=_0x488b40*si+Bs,_0x2c46f6=_0x2c46f6*si+Bs,_0x488b40/=-0x211f+-0x5f*0x4b+0x3cf7,_0x2c46f6/=-0x8*-0x4ca+-0x9db*0x3+-0x8bc,_0x488b40+=(-0x11d+0x185*0xb+-0xf98)/(-0x12e5+-0x1d1b+0x3003),_0x206f33['push'](_0x488b40,-0x159c*0x1+0x29c*0x4+0xb2d*0x1-_0x2c46f6),_0x36ad30>0x21cc+0x55e+-0x5*0x7d5&&_0x416fed['push'](_0x2622c3,_0x2622c3+_0x36ad30-(-0xd*0x2a5+-0xd0e*0x2+0x3c7e),_0x2622c3+_0x36ad30);}}this['positions']=_0x323ae2,this['normals']=_0x41f3ce,this['uvs']=_0x531b2a,this['uvs1']=_0x206f33,this['indices']=_0x416fed;}}class nA extends Wp{constructor(_0x1b759b={}){const _0x294391=_0x1b759b['radius']??0xe5*0x9+0x724*0x1+0xf31*-0x1+0.3,_0x27e07b=_0x1b759b['height']??-0xbe2+-0x2576+-0x3159*-0x1,_0xc5b443=_0x1b759b['heightSegm'+'ents']??-0xacd+-0x1*-0x43+-0xa8b*-0x1,_0x31376f=_0x1b759b['sides']??0x660+0x181+-0x7cd;super(_0x294391,_0x294391,_0x27e07b-(-0x8*-0x9+-0x1c2d*0x1+0x1be7)*_0x294391,_0xc5b443,_0x31376f,!(0x1*0x1f9e+-0x1faa+-0x6*-0x2)),_0x1b759b['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class oA extends Wp{constructor(_0x5494f5={}){const _0x7bba29=_0x5494f5['baseRadius']??-0xf21+-0x361*-0x1+-0x5e*-0x20+0.5,_0x2e970c=_0x5494f5['peakRadius']??-0x178c+0x54d*-0x5+0x320d,_0x497b25=_0x5494f5['height']??-0x2ca+0xcc1+-0xff*0xa,_0x5799a0=_0x5494f5['heightSegm'+'ents']??0x265+-0x3aa+0x14a,_0x592df3=_0x5494f5['capSegment'+'s']??-0x13f1+-0x100*0x1a+-0x1*-0x2e03;super(_0x7bba29,_0x2e970c,_0x497b25,_0x5799a0,_0x592df3,!(-0x6*0x26e+-0x18d5+0x276a)),_0x5494f5['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class lA extends Wp{constructor(_0x432e9d={}){const _0x43bd8d=_0x432e9d['radius']??0x1*0x1424+0xf98+0x1*-0x23bc+0.5,_0x1bba00=_0x432e9d['height']??-0x1e9d+0x43*-0x1a+0x256c,_0xc0a78e=_0x432e9d['heightSegm'+'ents']??0x2d*0x25+0x241b+-0x2a97,_0x2105d5=_0x432e9d['capSegment'+'s']??-0x7e2+-0xc2d+-0x1*-0x1423;super(_0x43bd8d,_0x43bd8d,_0x1bba00,_0xc0a78e,_0x2105d5,!(0x232f+-0x57*-0x6d+-0x4839*0x1)),_0x432e9d['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class cA extends ga{constructor(_0x1694ab={}){super();const _0x2b80b3=_0x1694ab['halfExtent'+'s']??new J(0x21b7+0x15d5+0x2c7*-0x14+0.5,-0x1b04+-0x1b7e+0x2*0x1b41+0.5),_0x4a65f7=_0x1694ab['widthSegme'+'nts']??-0x23b2+-0x13*-0x13d+0xc30,_0x345ea7=_0x1694ab['lengthSegm'+'ents']??0x5ea+0x16a6+-0x1c8b,_0x1effa4=[],_0x3ad258=[],_0x4f8fbc=[],_0x3ce21d=[];let _0x20cc53=-0x71f*0x1+-0x1b*0x116+0x2471;for(let _0x100e32=0xc89*-0x1+0x1450+0xb*-0xb5;_0x100e32<=_0x4a65f7;_0x100e32++)for(let _0x3dfdad=-0xdd0+0xcee+0xe2;_0x3dfdad<=_0x345ea7;_0x3dfdad++){const _0x1e5084=-_0x2b80b3['x']+(-0x1c3*0xa+0x81a+0x986)*_0x2b80b3['x']*_0x100e32/_0x4a65f7,_0x87c2ee=0xdd*-0x2+-0x11*-0x23b+-0x2431,_0x171ef4=-(-_0x2b80b3['y']+(-0x34a*0x9+-0x50b*-0x1+0x1891*0x1)*_0x2b80b3['y']*_0x3dfdad/_0x345ea7),_0x1fa0f1=_0x100e32/_0x4a65f7,_0x5304e7=_0x3dfdad/_0x345ea7;_0x1effa4['push'](_0x1e5084,_0x87c2ee,_0x171ef4),_0x3ad258['push'](0x1*-0x24d4+0x2630+-0x15c,-0x1*0x703+-0x1e68+0x256c,0x25d*0xf+-0x18*0xe7+-0xdcb),_0x4f8fbc['push'](_0x1fa0f1,-0x1588+-0x942+0x1ecb-_0x5304e7),_0x100e32<_0x4a65f7&&_0x3dfdad<_0x345ea7&&(_0x3ce21d['push'](_0x20cc53+_0x345ea7+(-0x1*0x1ed3+-0x164a+0x351e),_0x20cc53+(-0x11*-0x23+0x9d*0x5+-0x7*0xc5),_0x20cc53),_0x3ce21d['push'](_0x20cc53+_0x345ea7+(-0x24e3+-0x1af3+0x3fd7),_0x20cc53+_0x345ea7+(0x1af*0x7+-0xa79+-0xa7*0x2),_0x20cc53+(-0x3*0x91f+-0x2602+0x4160))),_0x20cc53++;}this['positions']=_0x1effa4,this['normals']=_0x3ad258,this['uvs']=_0x4f8fbc,this['uvs1']=_0x4f8fbc,this['indices']=_0x3ce21d,_0x1694ab['calculateT'+'angents']&&(this['tangents']=br(_0x1effa4,_0x3ad258,_0x4f8fbc,_0x3ce21d));}}class hA extends ga{constructor(_0x309973={}){super();const _0x50442b=_0x309973['tubeRadius']??0x85*-0xc+0x1868+0x122c*-0x1+0.2,_0x25a89e=_0x309973['ringRadius']??0x6d3*-0x2+-0x1*-0x1b8f+-0x4a3*0x3+0.3,_0x3f187f=(_0x309973['sectorAngl'+'e']??-0xbd7*-0x1+0x2344+-0x2db3)*Y['DEG_TO_RAD'],_0x296cb3=_0x309973['segments']??0x21cd+-0xee6+-0x12c9,_0xede07a=_0x309973['sides']??0x149a+0x135c+0x2*-0x13f1,_0x2d84b2=[],_0x33ee59=[],_0x8cb541=[],_0x354c65=[];for(let _0x24bdc6=0x1a12+0x2*0x11b1+-0xe4*0x45;_0x24bdc6<=_0xede07a;_0x24bdc6++)for(let _0x2d6d21=0x385+-0x3df+0x2d*0x2;_0x2d6d21<=_0x296cb3;_0x2d6d21++){const _0x8c9d5d=Math['cos'](_0x3f187f*_0x2d6d21/_0x296cb3)*(_0x25a89e+_0x50442b*Math['cos']((0x3d0+-0x1*0x156b+0x119d)*Math['PI']*_0x24bdc6/_0xede07a)),_0x380312=Math['sin']((-0x35*0xb3+0x26d7+-0x1c6)*Math['PI']*_0x24bdc6/_0xede07a)*_0x50442b,_0x5818eb=Math['sin'](_0x3f187f*_0x2d6d21/_0x296cb3)*(_0x25a89e+_0x50442b*Math['cos']((0x2*-0x934+0x946+-0x5a*-0x1a)*Math['PI']*_0x24bdc6/_0xede07a)),_0xc5002d=Math['cos'](_0x3f187f*_0x2d6d21/_0x296cb3)*Math['cos']((-0xfe*-0x21+-0x1488+-0xc34)*Math['PI']*_0x24bdc6/_0xede07a),_0x11390e=Math['sin']((-0x606+0x688+-0x80)*Math['PI']*_0x24bdc6/_0xede07a),_0xf89611=Math['sin'](_0x3f187f*_0x2d6d21/_0x296cb3)*Math['cos']((-0x7b*-0x3+0x1607*-0x1+-0x2*-0xa4c)*Math['PI']*_0x24bdc6/_0xede07a),_0xb4501d=_0x24bdc6/_0xede07a,_0x360900=0x502*0x4+-0x5f1*0x5+-0x3b*-0x2a-_0x2d6d21/_0x296cb3;if(_0x2d84b2['push'](_0x8c9d5d,_0x380312,_0x5818eb),_0x33ee59['push'](_0xc5002d,_0x11390e,_0xf89611),_0x8cb541['push'](_0xb4501d,0xd11+-0x91e*0x1+0x1*-0x3f2-_0x360900),_0x24bdc6<_0xede07a&&_0x2d6d21<_0x296cb3){const _0x2aee20=_0x24bdc6*(_0x296cb3+(-0xadd+-0x744+-0x911*-0x2))+_0x2d6d21,_0x30a155=(_0x24bdc6+(0x22d7+0x633*0x2+-0x4*0xbcf))*(_0x296cb3+(-0x71d*-0x2+0x216c+-0x2fa5*0x1))+_0x2d6d21,_0x4aee79=_0x24bdc6*(_0x296cb3+(-0x21*-0x45+0x5df+-0xec3))+(_0x2d6d21+(-0x1953+0x1*0x163a+0x31a)),_0x9cac5c=(_0x24bdc6+(-0x967*0x4+-0x41*0x11+0x14f7*0x2))*(_0x296cb3+(0x71*0x35+0x1336*-0x2+-0x1e1*-0x8))+(_0x2d6d21+(0x1473+-0x2*0x4d9+-0xac0));_0x354c65['push'](_0x2aee20,_0x30a155,_0x4aee79),_0x354c65['push'](_0x30a155,_0x9cac5c,_0x4aee79);}}this['positions']=_0x2d84b2,this['normals']=_0x33ee59,this['uvs']=_0x8cb541,this['uvs1']=_0x8cb541,this['indices']=_0x354c65,_0x309973['calculateT'+'angents']&&(this['tangents']=br(_0x2d84b2,_0x33ee59,_0x8cb541,_0x354c65));}}class dA{constructor(_0x59985b,_0x522569){h(this,'processedC'+'ache',new Map()),h(this,'definition'+'sCache',new Map()),h(this,'_generator'+'s',new Map()),(this['_device']=_0x59985b,this['_isClearin'+'gCache']=!(-0x1b92+0x2*0xb74+0x1*0x4ab),this['_precached']=!(-0x7e*-0x13+-0x1*0x96b+0x3*0x6),this['_programsC'+'ollection']=[],this['_defaultSt'+'dMatOption']=new Qo(),this['_defaultSt'+'dMatOption'+'Min']=new Qo());const _0x225315=new Uy();_0x522569['shaderOptB'+'uilder']['updateRef'](this['_defaultSt'+'dMatOption'],{},_0x225315,_0x522569,null,[],xa,null),_0x522569['shaderOptB'+'uilder']['updateMinR'+'ef'](this['_defaultSt'+'dMatOption'+'Min'],{},_0x522569,null,Np,null),_0x59985b['on']('destroy:sh'+'ader',_0x55dea8=>{this['removeFrom'+'Cache'](_0x55dea8);});}['destroy'](){this['clearCache']();}['register'](_0x28e7f3,_0x5186bb){this['_generator'+'s']['has'](_0x28e7f3)||this['_generator'+'s']['set'](_0x28e7f3,_0x5186bb);}['unregister'](_0x1fc3b9){this['_generator'+'s']['has'](_0x1fc3b9)&&this['_generator'+'s']['delete'](_0x1fc3b9);}['isRegister'+'ed'](_0x3e74b3){return this['_generator'+'s']['has'](_0x3e74b3);}['generateSh'+'aderDefini'+'tion'](_0xb6331,_0x2116fd,_0x1c667d,_0x34293e){var _0x1a27b3,_0x46b33d;let _0x39e377=this['definition'+'sCache']['get'](_0x1c667d);if(!_0x39e377){let _0x247289;(_0x1a27b3=_0x34293e['litOptions'])!=null&&_0x1a27b3['lights']&&(_0x247289=_0x34293e['litOptions']['lights'],_0x34293e['litOptions']['lights']=_0x247289['map'](_0x27b1b0=>{const _0x5d5d6d=_0x27b1b0['clone']?_0x27b1b0['clone']():_0x27b1b0;return _0x5d5d6d['key']=_0x27b1b0['key'],_0x5d5d6d;})),this['storeNewPr'+'ogram'](_0x2116fd,_0x34293e),(_0x46b33d=_0x34293e['litOptions'])!=null&&_0x46b33d['lights']&&(_0x34293e['litOptions']['lights']=_0x247289),this['_precached']&&w['log']('ProgramLib'+'rary#getPr'+'ogram:\x20Cac'+'he\x20miss\x20fo'+'r\x20shader\x20'+_0x2116fd+'\x20key\x20'+_0x1c667d+('\x20after\x20sha'+'ders\x20preca'+'ching'));const _0x4dc0e6=this['_device'];_0x39e377=_0xb6331['createShad'+'erDefiniti'+'on'](_0x4dc0e6,_0x34293e),_0x39e377['name']=_0x39e377['name']??(_0x34293e['pass']?_0x2116fd+'-pass:'+_0x34293e['pass']:_0x2116fd),this['definition'+'sCache']['set'](_0x1c667d,_0x39e377);}return _0x39e377;}['getCachedS'+'hader'](_0x216605){return this['processedC'+'ache']['get'](_0x216605);}['setCachedS'+'hader'](_0xa2f461,_0x499689){this['processedC'+'ache']['set'](_0xa2f461,_0x499689);}['getProgram'](_0x5adde2,_0x20877f,_0x13c4f0,_0x278e61){const _0x5d80e4=this['_generator'+'s']['get'](_0x5adde2);if(!_0x5d80e4)return w['warn']('ProgramLib'+'rary#getPr'+'ogram:\x20No\x20'+'program\x20li'+'brary\x20func'+'tions\x20regi'+'stered\x20for'+':\x20'+_0x5adde2),null;const _0x754514=_0x5d80e4['generateKe'+'y'](_0x20877f),_0x48396a=hi(_0x754514),_0x105da0=_0x13c4f0['generateKe'+'y'](this['_device']),_0x7e1a4=hi(_0x105da0),_0xabf52e=_0x48396a+'#'+_0x7e1a4;let _0x3f7215=this['getCachedS'+'hader'](_0xabf52e);if(!_0x3f7215){const _0x121ffd=this['generateSh'+'aderDefini'+'tion'](_0x5d80e4,_0x5adde2,_0x48396a,_0x20877f);w['assert'](_0x121ffd);let _0x1dbc76='',_0x5ceb87;_0x20877f['pass']!==void(-0x126e+-0x2*0xba2+0x29b2)&&(_0x5ceb87=Si['get'](this['_device'])['getByIndex'](_0x20877f['pass']),_0x1dbc76='-'+_0x5ceb87['name']),this['_device']['fire']('shader:gen'+'erate',{'userMaterialId':_0x278e61,'shaderPassInfo':_0x5ceb87,'definition':_0x121ffd});const _0x359139={'name':''+_0x121ffd['name']+_0x1dbc76+'-proc','attributes':_0x121ffd['attributes'],'vshader':_0x121ffd['vshader'],'vincludes':_0x121ffd['vincludes'],'fincludes':_0x121ffd['fincludes'],'fshader':_0x121ffd['fshader'],'processingOptions':_0x13c4f0,'shaderLanguage':_0x121ffd['shaderLang'+'uage'],'meshUniformBufferFormat':_0x121ffd['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x121ffd['meshBindGr'+'oupFormat']};_0x3f7215=new dy(this['_device'],_0x359139),w['call'](()=>{_0x3f7215['_generatio'+'nKey']=_0x754514,_0x3f7215['_processin'+'gKey']=_0x105da0;}),this['setCachedS'+'hader'](_0xabf52e,_0x3f7215);}return _0x3f7215;}['storeNewPr'+'ogram'](_0x538bf0,_0x1ca1db){let _0x5774cd={};if(_0x538bf0==='standard'){const _0x5aa390=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x1ca1db['pass']);for(const _0x17d9bf in _0x1ca1db)(_0x1ca1db['hasOwnProp'+'erty'](_0x17d9bf)&&_0x5aa390[_0x17d9bf]!==_0x1ca1db[_0x17d9bf]||_0x17d9bf==='pass')&&(_0x5774cd[_0x17d9bf]=_0x1ca1db[_0x17d9bf]);for(const _0x213fdf in _0x1ca1db['litOptions'])_0x5774cd[_0x213fdf]=_0x1ca1db['litOptions'][_0x213fdf];}else _0x5774cd=_0x1ca1db;this['_programsC'+'ollection']['push'](JSON['stringify']({'name':_0x538bf0,'options':_0x5774cd}));}['dumpProgra'+'ms'](){let _0x24176f='let\x20device'+'\x20=\x20pc.app\x20'+'?\x20pc.app.g'+'raphicsDev'+'ice\x20:\x20pc.A'+'pplication'+'.getApplic'+'ation().gr'+'aphicsDevi'+'ce;\x0a';_0x24176f+='let\x20shader'+'s\x20=\x20[',this['_programsC'+'ollection'][-0x2010+-0x6c5*-0x4+0x4fc]&&(_0x24176f+='\x0a\x09'+this['_programsC'+'ollection'][0x489+-0x1*-0x1615+-0x1a9e]);for(let _0xe6931=-0x42*-0x66+-0x7*-0xad+-0x1f06;_0xe6931<this['_programsC'+'ollection']['length'];++_0xe6931)_0x24176f+=',\x0a\x09'+this['_programsC'+'ollection'][_0xe6931];_0x24176f+='\x0a];\x0a',_0x24176f+='pc.getProg'+'ramLibrary'+'(device).p'+'recompile('+'shaders);\x0a',_0x24176f+='if\x20(pc.ver'+'sion\x20!=\x20\x22'+sn+('\x22\x20||\x20pc.re'+'vision\x20!=\x20'+'\x22')+cS+'\x22)\x0a',_0x24176f+='\x09console.w'+'arn(\x22preco'+'mpile-shad'+'ers.js:\x20en'+'gine\x20versi'+'on\x20mismatc'+'h,\x20rebuild'+'\x20shaders\x20l'+'ib\x20with\x20cu'+'rrent\x20engi'+'ne\x22);';const _0x4a5e1f=document['createElem'+'ent']('a');_0x4a5e1f['setAttribu'+'te']('href','data:text/'+'plain;char'+'set=utf-8,'+encodeURIComponent(_0x24176f)),_0x4a5e1f['setAttribu'+'te']('download','precompile'+'-shaders.j'+'s'),_0x4a5e1f['style']['display']='none',document['body']['appendChil'+'d'](_0x4a5e1f),_0x4a5e1f['click'](),document['body']['removeChil'+'d'](_0x4a5e1f);}['clearCache'](){this['_isClearin'+'gCache']=!(0x2*0x1281+0xa6a*0x2+-0x542*0xb),this['processedC'+'ache']['forEach'](_0x10eff5=>{_0x10eff5['destroy']();}),this['processedC'+'ache']['clear'](),this['_isClearin'+'gCache']=!(0x3ce*-0x1+0x6a6+-0x1*0x2d7);}['removeFrom'+'Cache'](_0x42bac5){this['_isClearin'+'gCache']||this['processedC'+'ache']['forEach']((_0x52e3f7,_0x190024)=>{_0x42bac5===_0x52e3f7&&this['processedC'+'ache']['delete'](_0x190024);});}['_getDefaul'+'tStdMatOpt'+'ions'](_0x704e51){const _0x31f3fa=Si['get'](this['_device'])['getByIndex'](_0x704e51);return _0x704e51===Wn||_0x704e51===vl||_0x31f3fa['isShadow']?this['_defaultSt'+'dMatOption'+'Min']:this['_defaultSt'+'dMatOption'];}['precompile'](_0x27355e){if(_0x27355e){const _0x1827c6=new Array(_0x27355e['length']);for(let _0x24a664=0x1e73+0x106b+-0x2ede;_0x24a664<_0x27355e['length'];_0x24a664++){if(_0x27355e[_0x24a664]['name']==='standard'){const _0x4cee55=_0x27355e[_0x24a664]['options'],_0x3541f4=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x4cee55['pass']);for(const _0x58976d in _0x3541f4)_0x3541f4['hasOwnProp'+'erty'](_0x58976d)&&_0x4cee55[_0x58976d]===void(0x11c7+0x2232+0x1153*-0x3)&&(_0x4cee55[_0x58976d]=_0x3541f4[_0x58976d]);}_0x1827c6[_0x24a664]=this['getProgram'](_0x27355e[_0x24a664]['name'],_0x27355e[_0x24a664]['options']);}}this['_precached']=!(-0x234c+0x184a+0xb02);}}async function fA(){const _0x51c08=new Float32Array(0x16*-0x1a5+0x1bf7+0x838),_0x1d957e=new Int32Array(_0x51c08['buffer']);let _0x53313a=-0x9c1+0x158e+-0xbcd,_0x368bae={};self['onmessage']=async _0x1872fd=>{const {data:_0x5b0f7a}=_0x1872fd;switch(_0x5b0f7a['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x14a535(_0x5b0f7a['properties'],_0x5b0f7a['timeIndex'],_0x5b0f7a['timeOption']);break;case'releaseSeq'+'Data':_0x5275d1(_0x5b0f7a['index']);break;case'releaseAll'+'SeqData':_0x42d82a();break;case'destroyWor'+'ker':_0x588d1c();break;}};class _0x4475df{constructor(_0x281268=0xbc+-0x3e*-0x51+-0x145a,_0x5bf6ba=-0x9d*-0x3b+-0x1f32+-0x4fd,_0x5a205a=0x3*-0x742+-0x21d0+0x3796,_0x4f8052=-0x1e3d+0x209*0xd+-0x143*-0x3){this['x']=_0x281268,this['y']=_0x5bf6ba,this['z']=_0x5a205a,this['w']=_0x4f8052;}['set'](_0xfa2a3e,_0x261003,_0x51efa6,_0x30c615){return this['x']=_0xfa2a3e,this['y']=_0x261003,this['z']=_0x51efa6,this['w']=_0x30c615,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x3aab4f=this){let _0x357f1b=_0x3aab4f['length']();return _0x357f1b===0x2*0xb5a+0x5*-0x7b5+0xfd5?(this['x']=this['y']=this['z']=0x383*0x4+-0x12dd*-0x2+-0x33c6,this['w']=-0x1da*0x1+0x1135+-0xf5a):(_0x357f1b=(0x13e9*0x1+-0x35*-0x6f+-0x2ae3)/_0x357f1b,this['x']=_0x3aab4f['x']*_0x357f1b,this['y']=_0x3aab4f['y']*_0x357f1b,this['z']=_0x3aab4f['z']*_0x357f1b,this['w']=_0x3aab4f['w']*_0x357f1b),this;}['mulScalar'](_0x1b0358,_0x67c7fa=this){return this['x']=_0x67c7fa['x']*_0x1b0358,this['y']=_0x67c7fa['y']*_0x1b0358,this['z']=_0x67c7fa['z']*_0x1b0358,this['w']=_0x67c7fa['w']*_0x1b0358,this;}}const _0x3a6915=_0x18fd06=>{_0x51c08[-0x1fc4+0x3aa+0x1c1a]=_0x18fd06;const _0x5e9794=_0x1d957e[0x25e3+-0x106*-0x9+0xfb3*-0x3];let _0x100a04=_0x5e9794>>-0x1371+-0x21f5*0x1+-0x3*-0x11d2&-0x2*0x2539+0x21e*-0x4b+0x1693c,_0x58acb9=_0x5e9794>>-0x1*0x1523+-0x9b5*0x2+-0x2899*-0x1&0x270e+-0x6a5+-0x186a;const _0x5cd080=_0x5e9794>>0x213d+-0xb50+-0x15d6&0xf2*-0xb+0xd60+0xa9*-0x3;return _0x5cd080<0x3*0x4b1+-0xf4*0x4+-0x9dc?_0x100a04:_0x5cd080>-0x3f5*-0x8+-0x1*-0x1539+0xa77*-0x5?(_0x100a04|=0x30c1*0x3+-0x4cf1*-0x3+-0xfd16,_0x100a04|=(_0x5cd080===-0x21f+0x1385*0x2+-0x23ec?0xaec+0x2441+-0x2f2d:-0x344*0x4+-0x10f7+-0x3e*-0x7c)&&_0x5e9794&-0x8bd20a+0x64c432+0xa70dd7,_0x100a04):_0x5cd080<-0x2f*-0x53+-0x57*0x11+0x905*-0x1?(_0x58acb9|=-0x1*0x211b+-0x2671+0x4f8c*0x1,_0x100a04|=(_0x58acb9>>-0x233*-0xd+0x1863+0x2*-0x1a44-_0x5cd080)+(_0x58acb9>>-0x1410+0x9*-0xdc+0x1c3d*0x1-_0x5cd080&0x357*-0x9+0x9fa+0x1416),_0x100a04):(_0x100a04|=_0x5cd080-(0x7*-0x3a6+-0x1413+0x2e0d)<<0x8f5+-0x1ecb*-0x1+-0x27b6|_0x58acb9>>-0x12ba+0x1aa4+-0x2a3*0x3,_0x100a04+=_0x58acb9&0x12b4+-0x2154+-0x217*-0x7,_0x100a04);},_0x1c9913=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x46b211=0x2*0x625+-0x1f32+0x1*0x12e8;_0x46b211<-0x119c+-0x16fd+0x28c6;++_0x46b211)if(!_0x368bae['f_rest_'+_0x46b211])return _0x46b211;return 0x20f8+0x648+-0x2713;})())]??-0x13*-0xd1+-0x6d9*0x5+0x11*0x11a),_0x14a535=(_0x21d052,_0x1151fc,_0x4d5659)=>{const _0x1ce2be=!!_0x21d052['time_index'];_0x1ce2be||(_0x21d052['time_index']=new Float32Array(0xe6e+-0x1ed+-0xc81)),_0x53313a+=_0x21d052['x']['length']??0x11f*-0xe+-0x1b04+-0x2*-0x155b;const _0x4b6eeb=Object['keys'](_0x21d052);for(let _0x57b070=-0x1*0x1557+-0x124c+0x27a3;_0x57b070<_0x4b6eeb['length'];_0x57b070++){const _0x1dd544=_0x4b6eeb[_0x57b070],_0x187fb9=_0x21d052[_0x1dd544],_0xe05fed=_0x368bae[_0x1dd544]??new Float32Array(-0x21*-0x47+-0x29*-0x87+0x6*-0x521);if(!_0x1ce2be&&_0x1dd544==='time_index'){const _0x17469f=new Float32Array(_0x53313a);_0x17469f['fill'](_0x1151fc),_0x17469f['set'](_0xe05fed,-0xa5*0x2+0xa20+-0x8d6),_0x368bae[_0x1dd544]=_0x17469f;}else{if(!_0x1ce2be&&_0x187fb9&&_0x1dd544==='t'){const _0x5ae107=new Float32Array(_0x53313a);if(_0x5ae107['set'](_0xe05fed,0x137c*0x2+0xf7*-0x19+0x21f*-0x7),_0x4d5659){for(let _0x32bbe1=_0xe05fed['length'];_0x32bbe1<_0x53313a;_0x32bbe1++)_0x187fb9[_0x32bbe1-_0xe05fed['length']]>-(0x9da+-0x4e7*0x5+-0xeae*-0x1)?_0x5ae107[_0x32bbe1]=_0x187fb9[_0x32bbe1-_0xe05fed['length']]+_0x4d5659[(-0x1*0x17c5+-0x114+0x18db)*_0x1151fc]:_0x5ae107[_0x32bbe1]=_0x187fb9[_0x32bbe1-_0xe05fed['length']];}_0x368bae[_0x1dd544]=_0x5ae107;}else{if(_0x187fb9){const _0x43cb62=new Float32Array(_0x53313a);_0x43cb62['set'](_0xe05fed,-0x696+0x7bf+0x1b*-0xb),_0x43cb62['set'](_0x187fb9,_0xe05fed['length']),_0x368bae[_0x1dd544]=_0x43cb62;}}}}const _0x356c3b={};Object['keys'](_0x368bae)['forEach'](_0x1e0906=>{_0x356c3b[_0x1e0906]=new Float32Array(_0x368bae[_0x1e0906]['buffer']['slice']());});const _0x54df74=Object['keys'](_0x356c3b)['map'](_0x58ce1c=>_0x356c3b[_0x58ce1c]['buffer']),_0x5e069b=_0x72a84a(),_0x432c39=Object['keys'](_0x5e069b)['map'](_0x335f44=>_0x5e069b[_0x335f44]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x356c3b,'transformData':_0x5e069b},_0x54df74['concat'](_0x432c39));},_0x72a84a=()=>{const _0x4ca5b1=_0x368bae['x']['length'],_0x1ef8f7=_0x368bae['x'],_0x219b90=_0x368bae['y'],_0x4d132b=_0x368bae['z'],_0x4627b2=_0x368bae['scale_0'],_0x48bb3d=_0x368bae['scale_1'],_0x25a0f3=_0x368bae['scale_2'],_0x2e0cf7=_0x368bae['rot_1'],_0x58019b=_0x368bae['rot_2'],_0x298713=_0x368bae['rot_3'],_0x5d0fa1=_0x368bae['rot_0'],_0x4977c8=_0x368bae['motion_0'],_0x2f17ec=_0x368bae['motion_1'],_0x3c63c8=_0x368bae['motion_2'],_0x5d2431=_0x368bae['t'],_0x191731=_0x368bae['t_scale'],_0x43463b=_0x368bae['time_index'],_0x3e35f3=_0x368bae['f_dc_0'],_0x5a1ba0=_0x368bae['f_dc_1'],_0x49d92a=_0x368bae['f_dc_2'],_0x7a838a=_0x368bae['opacity'],_0x563399=(_0x5d2431==null?void(-0x3b3*-0x5+-0x12d2+0x53):_0x5d2431['length'])>-0x73f*-0x2+-0x2377+0x14f9,_0x5834b0=new Float32Array(_0x4ca5b1*(-0x1*-0x119b+-0x7*-0x19b+-0x1cd5)),_0x6475b8=new Float32Array(_0x4ca5b1*(0x12c4+0x4*0x695+-0x2d15)),_0x13fa31=new Uint16Array(_0x4ca5b1*(0x4b1+-0x4c4+0x16)),_0x1fa2a2=new Float32Array(_0x4ca5b1*(-0x173*0x4+0xb8c+-0x5bd));let _0x2e1981=null,_0x344974=null,_0x2b9898=null,_0x5e6235=null;_0x563399&&(_0x2e1981=new Float32Array(_0x4ca5b1*(-0xdc*0x1f+0x1c29*-0x1+0x36d0)),_0x344974=new Float32Array(_0x4ca5b1*(0x476*0x7+-0x1294+-0xca3)),_0x2b9898=new Float32Array(_0x4ca5b1*(0x12*-0x214+-0x6e+0x25d9)),_0x5e6235=new Float32Array(_0x4ca5b1));const _0x36183c=new _0x4475df(0x29*-0x6e+0x1b2f*0x1+0x4f*-0x1f,0x17f6+0xe2e+-0x2624,0x34*0x59+-0x3ee+-0xe26,0x1a83+0x2253+-0x3cd6);let _0x3b9986=0x24*-0x1+-0x7d0+0x7f4,_0x104eb7=-0xe9*0x1d+-0x85*-0x19+-0xc*-0x11e,_0x52f68a=0x1630+0x2236*-0x1+0xc06,_0x484b33=-0x1826+0x93*0x1f+0x659,_0x12aff1=-0x1db1+0x1009*0x2+0x261*-0x1,_0x8bb850=0x214a*0x1+0x107a+-0x31c4,_0x44eb01=!(0x2a7*0xd+0xb67+0x7*-0x68e);const _0x54c16e=new Float32Array(-0x594+0x51d+0x2*0x3d),_0x323e3c=new Float32Array(-0x6*0xc1+0xa*0x321+-0x1ac1),_0x5366dd=new Uint16Array(_0x4ca5b1*(0x270d+0x1ea7+-0x45b0)),_0x17bf06=0x1042+0x21d6+-0x7*0x728+0.28209479177387814;for(let _0x3b3439=0x26bb+0x2*-0x7cc+-0x1723*0x1;_0x3b3439<_0x4ca5b1;++_0x3b3439){const _0x1f5e99=_0x3e35f3[_0x3b3439]*_0x17bf06+(0x69b*0x1+0x125+-0x7c0+0.5),_0x829341=_0x5a1ba0[_0x3b3439]*_0x17bf06+(0x5*0x3ab+0x23d2*-0x1+-0x5*-0x37f+0.5),_0x5dbf81=_0x49d92a[_0x3b3439]*_0x17bf06+(-0x21de+0x7fa*-0x1+-0xce*-0x34+0.5),_0x2dd76b=_0x7a838a[_0x3b3439];_0x5366dd[_0x3b3439*(-0x1*0x2561+0x1*-0xa9f+-0x1c*-0x1b7)+(0x1fa7+0x38b+-0x2332)]=_0x3a6915(_0x1f5e99),_0x5366dd[_0x3b3439*(0x1bd3+0x9f2+-0x25c1)+(0x4*-0x6b6+0x598+0x1541)]=_0x3a6915(_0x829341),_0x5366dd[_0x3b3439*(-0x1c53+0x31*-0x4c+-0x2ae3*-0x1)+(0x3c1+-0x9d*-0x14+0x1*-0x1003)]=_0x3a6915(_0x5dbf81),_0x5366dd[_0x3b3439*(0x1*-0x1445+0x1*-0x1d2a+0x3173)+(-0x1*0xf80+-0x179*-0x1+0x3*0x4ae)]=_0x3a6915(_0x2dd76b);const _0x20c322=_0x1ef8f7[_0x3b3439],_0x1df509=_0x219b90[_0x3b3439],_0x35ef34=_0x4d132b[_0x3b3439],_0x4dbd52=Math['max'](_0x4627b2[_0x3b3439],_0x48bb3d[_0x3b3439],_0x25a0f3[_0x3b3439]);if(isFinite(_0x20c322)&&isFinite(_0x1df509)&&isFinite(_0x35ef34)&&isFinite(_0x4dbd52)){const _0x2b969a=(0x1fdf+-0x77c*-0x2+0x1*-0x2ed5)*Math['exp'](_0x4dbd52);_0x44eb01?(_0x44eb01=!(-0x26*-0x44+0x195b*0x1+-0x1a*0x15d),_0x3b9986=_0x20c322-_0x2b969a,_0x104eb7=_0x1df509-_0x2b969a,_0x52f68a=_0x35ef34-_0x2b969a,_0x484b33=_0x20c322+_0x2b969a,_0x12aff1=_0x1df509+_0x2b969a,_0x8bb850=_0x35ef34+_0x2b969a):(_0x3b9986=Math['min'](_0x3b9986,_0x20c322-_0x2b969a),_0x104eb7=Math['min'](_0x104eb7,_0x1df509-_0x2b969a),_0x52f68a=Math['min'](_0x52f68a,_0x35ef34-_0x2b969a),_0x484b33=Math['max'](_0x484b33,_0x20c322+_0x2b969a),_0x12aff1=Math['max'](_0x12aff1,_0x1df509+_0x2b969a),_0x8bb850=Math['max'](_0x8bb850,_0x35ef34+_0x2b969a));}_0x36183c['set'](_0x2e0cf7[_0x3b3439],_0x58019b[_0x3b3439],_0x298713[_0x3b3439],_0x5d0fa1[_0x3b3439]),_0x36183c['normalize'](),_0x36183c['w']<-0x11d5*-0x1+-0x106f*0x2+0xf09&&_0x36183c['mulScalar'](-(0x1*-0xd5a+0xd0c*-0x1+0x1a67)),_0x6475b8[_0x3b3439*(-0x3*-0x376+-0x1*0x147d+-0x1*-0xa1e)+(0x99b*-0x3+-0x2104+-0x1*-0x3dd5)]=_0x1ef8f7[_0x3b3439],_0x6475b8[_0x3b3439*(-0x1*-0x8bd+-0x987+0x5*0x29)+(-0x184+-0x1b8+0x33d*0x1)]=_0x219b90[_0x3b3439],_0x6475b8[_0x3b3439*(-0x20ba+0x733*0x5+-0x342)+(-0x3*0xb51+0x10a6+0x114f)]=_0x4d132b[_0x3b3439],_0x5834b0[_0x3b3439*(0x2361+0xf6f+-0x5a5*0x9)+(0xac3+-0x1d7a+-0x3*-0x63d)]=_0x1ef8f7[_0x3b3439],_0x5834b0[_0x3b3439*(-0xf11+-0x1*-0x34a+-0x1f7*-0x6)+(0x1471*-0x1+0x1*0x23bc+0x1*-0xf4a)]=_0x219b90[_0x3b3439],_0x5834b0[_0x3b3439*(0x2412+0x713*0x1+0x2b22*-0x1)+(0xd*0x1df+-0x2292+0xa41)]=_0x4d132b[_0x3b3439],_0x13fa31[_0x3b3439*(0x5f1+-0x15cd*-0x1+-0x1bbb)+(0xbb1+-0x2*0x1b4+-0x849*0x1)]=_0x3a6915(Math['exp'](_0x4627b2[_0x3b3439])),_0x13fa31[_0x3b3439*(-0x2*-0x10dd+-0x85a+-0x1*0x195d)+(0xb93+-0x1*-0xa94+-0x1626)]=_0x3a6915(Math['exp'](_0x48bb3d[_0x3b3439])),_0x13fa31[_0x3b3439*(-0x1*-0x615+0x1*0x23cd+-0xdf5*0x3)+(-0xc7+-0x138f+0x1458)]=_0x3a6915(Math['exp'](_0x25a0f3[_0x3b3439])),_0x1fa2a2[_0x3b3439*(0xa*0x13+-0x2081+-0xe*-0x245)+(0x7*0x4d+-0x215c+-0x1f41*-0x1)]=_0x36183c['x'],_0x1fa2a2[_0x3b3439*(0x2255+0x1096+-0x32e8)+(0x763+-0xa7f*-0x3+-0x26df)]=_0x36183c['y'],_0x1fa2a2[_0x3b3439*(-0xb09+-0x56d+-0x1079*-0x1)+(0xb28+-0x373*0xb+0x1*0x1acb)]=_0x36183c['z'],_0x563399&&_0x2e1981&&_0x344974&&_0x2b9898&&_0x5e6235&&(_0x2e1981[_0x3b3439*(-0x2320+0x1224+0x10ff)+(-0x24f3+0x1*-0x180f+0x1e81*0x2)]=_0x4977c8[_0x3b3439],_0x2e1981[_0x3b3439*(-0x269a+-0x102*-0x1a+0xc69)+(-0x2*-0x465+-0x1321+0xa58)]=_0x2f17ec[_0x3b3439],_0x2e1981[_0x3b3439*(0x1bdf+0x241c+-0x3ff8)+(-0xbde+0x1*0x12b9+-0x6d9)]=_0x3c63c8[_0x3b3439],_0x2b9898[_0x3b3439*(0xb4d*0x3+-0x3d*-0x97+-0x45df)+(-0xa*0x113+0x1*-0x45+0x1*0xb03)]=_0x4977c8[_0x3b3439],_0x2b9898[_0x3b3439*(0x1986*0x1+0x2*0x1e6+-0x3d*0x7b)+(0x1a6*-0x1+-0x24ae+0x3*0xcc7)]=_0x2f17ec[_0x3b3439],_0x2b9898[_0x3b3439*(-0x366*0x5+0xb*0x388+-0x1*0x15d7)+(0x1e5+0x292*0x4+-0xc2b)]=_0x3c63c8[_0x3b3439],_0x5e6235[_0x3b3439]=_0x191731?Math['exp'](_0x191731[_0x3b3439]):0xfc4+-0xd31+-0x293,_0x344974[_0x3b3439*(-0x1983+0x14f3+0x493)+(0x23ed+0x1*-0x225b+-0x192)]=_0x5d2431?_0x5d2431[_0x3b3439]:0x1698+0x592+-0x1c2a,_0x344974[_0x3b3439*(-0xa75+-0x250c+0x2f84)+(0x182+0x919*-0x2+0x10b1)]=_0x5e6235[_0x3b3439]);}_0x44eb01||(_0x54c16e[-0x11df+0x13fd+-0x10f*0x2]=(_0x3b9986+_0x484b33)*(-0x54c*0x2+0x1*-0x2e5+0xd7d+0.5),_0x54c16e[0x1989*-0x1+-0x5e*-0x64+-0xb2e]=(_0x104eb7+_0x12aff1)*(-0xc3+-0x16a5*0x1+0x1768+0.5),_0x54c16e[-0x1368+0x1ffb+-0xc91]=(_0x52f68a+_0x8bb850)*(-0xc*0x145+-0xa*0x293+0x1*0x28fa+0.5),_0x323e3c[-0x74b*-0x4+0x1ffb*0x1+-0x65*0x9b]=(_0x484b33-_0x3b9986)*(-0x125*-0x1d+-0x1*-0x525+-0x2656+0.5),_0x323e3c[-0x87*-0x1d+-0x1087*0x1+0x13d]=(_0x12aff1-_0x104eb7)*(0x3*0xb2b+-0x1f27+-0x25a+0.5),_0x323e3c[0x23*0x1c+0x2ad+0x67f*-0x1]=(_0x8bb850-_0x52f68a)*(0x1*0x1d5c+-0x3d*0x67+-0x4d1+0.5));const _0x419270=_0x46b190();let _0x810141={'dataColor':_0x5366dd,'center':_0x54c16e,'halfExtents':_0x323e3c,'dataCenters':_0x5834b0,'dataPosition':_0x6475b8,'dataScale':_0x13fa31,'dataRotation':_0x1fa2a2,..._0x419270};return _0x563399&&(_0x810141={..._0x810141,'dataMotion':_0x2e1981,'dataTime':_0x344974,'motion':_0x2b9898,'tScaleArray':_0x5e6235,'muT':new Float32Array(_0x5d2431),'timeIndex':new Float32Array(_0x43463b)}),_0x810141;},_0x459345=_0x48f050=>{const _0x141dad=[];for(let _0x38c6b7=-0x2612+0x13*-0x18d+-0x4389*-0x1;_0x38c6b7<_0x48f050;++_0x38c6b7)_0x141dad['push'](_0x368bae['f_rest_'+_0x38c6b7]);return _0x141dad;},_0x46b190=()=>{const _0x31995a=_0x1c9913();if(_0x31995a<=0xde2+-0x18e3+-0xb01*-0x1)return{};const _0x88f903=_0x368bae['x']['length'],_0x6e63fa=new Uint32Array(_0x88f903*(0x469+-0x1f17+0x1ab2)),_0x4fab1f=new Uint32Array(_0x88f903*(-0x1*0xd03+-0x112f+0x1e36)),_0x178304=new Uint32Array(_0x88f903*(-0x1645+0x20fa+-0xab1)),_0x49e1f5=new Uint32Array(_0x88f903*(0x6*-0x409+0x1264+0x3*0x1f2)),_0x15a00c={0x1:0x3,0x2:0x8,0x3:0xf}[_0x31995a],_0x33560b=_0x459345(_0x15a00c*(0xb84+0x623*-0x1+-0x55e*0x1)),_0x545485=0x1*0x244d+0x560+-0x59d*0x6,_0x1fdbb1=0x1*0x15b7+-0x1458+0x2a0,_0x4b7c56=new Float32Array(0x25d7*0x1+-0x279*-0x1+-0x284f),_0x2c42a5=new Uint32Array(_0x4b7c56['buffer']),_0x7da14b=new Array(_0x15a00c*(0x47*0x2e+-0x18c4+0xc05))['fill'](-0x12e1+0x22bd*-0x1+-0x1acf*-0x2);for(let _0x15bb40=-0xb1c+-0x7de*0x1+0x12fa;_0x15bb40<_0x88f903;++_0x15bb40){for(let _0x40ab02=-0x1*0xc83+-0x1a5+0xe28;_0x40ab02<_0x15a00c;++_0x40ab02)_0x7da14b[_0x40ab02*(-0x2*-0x9e+-0x26*-0x5a+-0xe95)]=_0x33560b[_0x40ab02][_0x15bb40],_0x7da14b[_0x40ab02*(-0x3ad+-0x2296+0x2646)+(0x3*-0x5d9+-0x5*-0x7c0+-0x1534)]=_0x33560b[_0x40ab02+_0x15a00c][_0x15bb40],_0x7da14b[_0x40ab02*(-0x1e8+0x579*-0x1+-0x4*-0x1d9)+(0xa6+0x2689+-0xd0f*0x3)]=_0x33560b[_0x40ab02+_0x15a00c*(-0x2*-0xd4b+-0xa7*0x1+0x19ed*-0x1)][_0x15bb40];let _0x522dc0=_0x7da14b[-0xc57+-0x24f8+-0x314f*-0x1];for(let _0x1e45b3=0x1*0x18ea+-0xf3+-0x17f6;_0x1e45b3<_0x15a00c*(-0x1f3d+-0x213*-0x11+0x4f*-0xd);++_0x1e45b3)_0x522dc0=Math['max'](_0x522dc0,Math['abs'](_0x7da14b[_0x1e45b3]));if(_0x522dc0!==-0x1*0x9be+0x1*-0xe84+0x1842){for(let _0x18ae54=0xa8d+0xfbb*0x1+0x1*-0x1a48;_0x18ae54<_0x15a00c;++_0x18ae54)_0x7da14b[_0x18ae54*(-0x10*-0xd8+-0xac3+-0x2ba)+(-0x5af*-0x4+0x1*-0x1499+-0x223)]=Math['max'](0x2147+0x3*0x1a3+-0x2630,Math['min'](_0x545485,Math['floor']((_0x7da14b[_0x18ae54*(-0xb*-0x12f+0x1e9*-0x1+0x3b3*-0x3)+(-0x1364+0x1*0x1795+0x1*-0x431)]/_0x522dc0*(-0x5*-0x629+0x1c81+-0x3b4e+0.5)+(0x865*-0x1+0x10c1+-0x85c+0.5))*_0x545485+(-0x602*-0x6+0x2554+0x24b0*-0x2+0.5)))),_0x7da14b[_0x18ae54*(0x25d9*0x1+0x1*-0xcb+0x57*-0x6d)+(0x13de+-0x1*-0x1098+0x99*-0x3d)]=Math['max'](0x1*0x2023+-0x3*-0xa3+-0x1106*0x2,Math['min'](_0x1fdbb1,Math['floor']((_0x7da14b[_0x18ae54*(-0x139+-0x11*-0x5e+-0x502)+(-0x1b*-0x16b+-0x11b*-0xb+-0x3271)]/_0x522dc0*(0x1afd+0xb*-0x67+-0x1690+0.5)+(-0x2568+-0x4f*0x1d+0x1*0x2e5b+0.5))*_0x1fdbb1+(-0xd68+-0x187d*-0x1+-0xb15+0.5)))),_0x7da14b[_0x18ae54*(0x9*-0x406+-0x17f6+0x3c2f)+(-0x6*-0x590+-0x1b83+0x5db*-0x1)]=Math['max'](-0xbbb+0x82*-0x32+-0x2b*-0xdd,Math['min'](_0x545485,Math['floor']((_0x7da14b[_0x18ae54*(-0x20e3*-0x1+0x527+-0x2607)+(-0xaab*-0x3+-0x167f+-0x26*0x40)]/_0x522dc0*(-0x767*-0x1+0x9b5*-0x3+0x14*0x116+0.5)+(0x10*0x218+-0x849+-0x1937+0.5))*_0x545485+(-0x1e27+-0x114c+0x2f73+0.5))));_0x4b7c56[-0x938+0x65*0x23+-0x5*0xeb]=_0x522dc0,_0x6e63fa[_0x15bb40*(-0x238*-0x2+-0xe3b*0x1+0x9cf)+(-0x1834+-0x1d8c+0xac*0x50)]=_0x2c42a5[0x135f+-0x1d8d+0xa2e],_0x6e63fa[_0x15bb40*(-0x754+0x8*-0x1d5+0x10*0x160)+(0x120d+-0xfd4+-0x238)]=_0x7da14b[0xd11+0x257*-0x7+0x350]<<-0xac8+0x17*0x165+0xa*-0x21f|_0x7da14b[0x17*0xcb+0x79*-0x19+0x1f*-0x35]<<-0xf3d+-0x30c*-0x2+0x930|_0x7da14b[-0x11a*-0x22+-0x1*-0x2517+-0x4a89],_0x6e63fa[_0x15bb40*(-0x2685+0x18ef+0xd9a*0x1)+(-0x3b9*-0x7+-0x51f+-0x14ee)]=_0x7da14b[-0x1*0x228f+0xa6*0x37+-0x118]<<-0x1289+-0x18b0+0x2b4e|_0x7da14b[0x29*-0x7f+0x532+0x1*0xf29]<<-0x35b*-0x7+0x364+0x479*-0x6|_0x7da14b[-0xb2d*0x3+-0x1*-0x147a+0xd12],_0x6e63fa[_0x15bb40*(0x25ab+0x174a+0x1*-0x3cf1)+(-0x1*0x23bf+-0xb99*-0x2+0xc90)]=_0x7da14b[0x1*0x125d+0xd6*0xc+0x975*-0x3]<<-0x1*0x112d+-0xb3e+0x1c80|_0x7da14b[0x1198+-0x25d4+0x1443]<<-0x1d43+-0x8fd+0x264b|_0x7da14b[0x241d+-0x1*0x1ffb+-0x41a],_0x31995a>0x825+-0xc56+0x432&&(_0x4fab1f[_0x15bb40*(0x25eb+0x771+0x2*-0x16ac)+(0xda5*-0x1+-0x20b+0xfb0)]=_0x7da14b[0x207f+-0x283*0xb+-0x4d5]<<0x125d*0x1+0x22cd+-0x3515|_0x7da14b[-0x8*0x2f9+0x23de*0x1+-0xc0c]<<-0x2c0*0x4+-0xc26+0x1731|_0x7da14b[0x1*0xf4d+-0xca*0x2b+0x12ac],_0x4fab1f[_0x15bb40*(-0x1cb0+0x1*0xf0+0x1*0x1bc4)+(-0x1825+0xb29*0x1+0xcfd)]=_0x7da14b[0x1b14+0x1503+-0xfb*0x31]<<-0x40*0x88+-0x58+-0x226d*-0x1|_0x7da14b[0xe+0x17f8+0x1*-0x17f9]<<0x41d+-0x88f+0x17f*0x3|_0x7da14b[0x6e1+0x1*-0x52a+-0x1a9],_0x4fab1f[_0x15bb40*(-0xa76+-0x1f*0x1f+-0xe3b*-0x1)+(-0x1665+0x1*0xc61+0xa06)]=_0x7da14b[0x647+0x157+-0x78f]<<0x1e*-0x64+0x23bd+0x10*-0x17f|_0x7da14b[0x437+-0x1619*-0x1+0xd2*-0x20]<<-0x280*0xc+0x129a*-0x1+0x30a5|_0x7da14b[-0x3*-0xb51+-0xb58+-0x168a],_0x4fab1f[_0x15bb40*(-0x18a2+0x5d4*0x3+0x72a)+(-0x76+0x1cb5+-0x1c3c)]=_0x7da14b[0xb1d+0xe16+-0x1921]<<-0x6*-0x54d+0x95f*-0x2+0xcfb*-0x1|_0x7da14b[0x4a5+-0x6*0x4b3+-0x1b*-0xe0]<<0x1395+-0x1*-0x2015+-0x339f|_0x7da14b[-0xa4+-0x244f+-0x1*-0x2507],_0x31995a>0xd2d+0x2*-0x10af+0x1433?(_0x178304[_0x15bb40*(0x1bbd+0xeff*0x2+0x3*-0x133d)+(-0x25dc+-0x914*-0x3+0xaa0)]=_0x7da14b[0xbcb*-0x1+0x959*-0x1+0x1539]<<0x3*-0x9cf+-0x2481+0x1601*0x3|_0x7da14b[-0xf5c+0x1381*0x1+-0x40f]<<-0x285+-0x217d*-0x1+-0xa4f*0x3|_0x7da14b[0xacc+-0x1114*-0x1+0x943*-0x3],_0x178304[_0x15bb40*(0x1*0x839+-0x125*-0xb+-0x14cc)+(0x823+-0xe7f+0x1*0x65d)]=_0x7da14b[-0x1*-0x1b0a+-0x2*-0x38b+-0x1*0x2208]<<0x11*-0x14b+-0x249e+0x3aae|_0x7da14b[-0xc3*-0x31+0x15ff+-0x3b39]<<-0x7cf*0x1+-0x13c3+0x1b9d|_0x7da14b[0x1d8+0x110e+0x4*-0x4b3],_0x178304[_0x15bb40*(-0x7*-0xf+-0x1b8+0x153)+(0x76e+-0xd1f*-0x1+-0x1*0x148b)]=_0x7da14b[-0x49*0x31+0x14e6+0x6*-0x123]<<-0x437+-0x185c+-0x38*-0x83|_0x7da14b[-0x78b+0x143*-0x5+0x2*0x6fb]<<0xb*-0x28d+-0x1a3*-0x12+-0x15c|_0x7da14b[0x4d5*0x3+-0xd*-0x2cd+0x32cb*-0x1],_0x178304[_0x15bb40*(0x105c+0x1559+-0x25b1)+(0x207f+0x364+-0x11f0*0x2)]=_0x7da14b[-0x2*-0xf2b+0x855+0x8b*-0x47]<<-0x332+-0x2b4*0xe+0x16b*0x1d|_0x7da14b[-0x175*0x7+0x1ed9+-0x5*0x41b]<<-0x23f0+0x403*-0x7+0x4010|_0x7da14b[-0x13ba+0xe*-0x6b+0x19b4],_0x49e1f5[_0x15bb40*(-0x24e*0x2+-0x1*-0xd13+-0x873)+(0x23a1+-0xb0+-0x22f1)]=_0x7da14b[0x3c*-0x91+0x2*-0x9a4+0x3565]<<-0x10e1*-0x1+-0x1475+0x3a9|_0x7da14b[-0x1cfb+0x402+0x1*0x191b]<<0x1499+0x3*-0x74c+0x13*0x12|_0x7da14b[0xb11*-0x1+0x1*0x120d+0x1*-0x6d9],_0x49e1f5[_0x15bb40*(0x1cfe+0x444*0x6+0x16*-0x27b)+(-0x7*0x28b+0x1cde+-0xb10)]=_0x7da14b[0xd10+-0x26f4+0x1a08]<<0xbaf*0x1+0x1ce7+-0x2881|_0x7da14b[0x2141*-0x1+0x24cd+-0xd*0x43]<<-0x5*-0x26b+-0x59*-0x8+0x4*-0x3b5|_0x7da14b[0x1d48+-0x66e+-0x16b4],_0x49e1f5[_0x15bb40*(-0x1063+-0xf3d+0xa2*0x32)+(-0x1*0x6cb+-0x8*0x3e5+0x25f5)]=_0x7da14b[-0x11d1+0x1a75+-0x35*0x29]<<0x3e4*-0x3+0x207d+0x4*-0x52f|_0x7da14b[-0x5*0x216+0x30c+0x78a]<<0x3*-0xcb9+0x81d+0x14f*0x17|_0x7da14b[-0x7e*-0x40+0x840+-0x2797],_0x49e1f5[_0x15bb40*(-0x19*0x2b+-0x20d2+0x2509*0x1)+(0xd25+-0x2*-0x1303+-0x3328)]=_0x7da14b[0xac9*0x1+-0xc50*-0x3+-0x2f8f]<<-0x1b3d+0x2126*0x1+-0x5d4|_0x7da14b[-0x8*0xda+-0x1c24+0x51*0x6f]<<0x19*-0x123+0x10d1+-0xb*-0x10f|_0x7da14b[0x12c0*0x1+0x6b2+-0x2*0xca3]):_0x178304[_0x15bb40]=_0x7da14b[-0xcb*-0x16+-0x1*0x461+-0xcfc]<<-0x8fa*0x2+-0x55f*-0x7+0x139*-0x10|_0x7da14b[0x1896+-0x202f+0x7af]<<-0x1*-0x541+-0xedb+0x9a5|_0x7da14b[-0x1*-0x1e25+-0x2cd*0x2+0x5*-0x4e4]);}}return{'sh1to3Data':_0x6e63fa,'sh4to7Data':_0x4fab1f,'sh8to11Data':_0x178304,'sh12to15Data':_0x49e1f5};},_0x5275d1=_0x47a23e=>{if(!_0x368bae['time_index'])return;const _0x4e1365=_0x368bae['time_index']['findIndex'](_0x5734b2=>_0x5734b2===_0x47a23e);let _0x11a15a=_0x368bae['time_index']['findIndex']((_0x29be02,_0x1ef5a6)=>_0x29be02!==_0x47a23e&&_0x1ef5a6>_0x4e1365);if(_0x11a15a===-(0xe27+-0x895+-0x39*0x19)&&_0x4e1365===-(-0x10c*0x9+0x1*0x4a+0x923))return;_0x11a15a===-(-0x24cd+-0x1d96*0x1+-0x4264*-0x1)&&_0x4e1365!==-(-0x1*0x995+-0x7ad+0x1143)&&(_0x11a15a=_0x368bae['time_index']['length']),_0x53313a-=_0x11a15a-_0x4e1365;const _0x4d99e4=Object['keys'](_0x368bae);for(let _0x51e71b=0x7b*0x11+0x25fa*-0x1+0x1dcf;_0x51e71b<_0x4d99e4['length'];_0x51e71b++){const _0x20be3a=_0x4d99e4[_0x51e71b],_0x4be792=_0x368bae[_0x20be3a];if(_0x4be792){const _0x1760a1=new Float32Array(_0x53313a);_0x4e1365>0x8b7*-0x3+-0x2177+0x3b9c?(_0x1760a1['set'](_0x4be792['subarray'](-0x181*0x1+0xcd0*0x3+-0x24ef,_0x4e1365),-0x313*0xc+-0xd43+-0x25*-0x15b),_0x1760a1['set'](_0x4be792['subarray'](_0x11a15a),_0x4e1365)):_0x1760a1['set'](_0x4be792['subarray'](_0x11a15a),-0xb98+-0x167b+-0x1*-0x2213),_0x368bae[_0x20be3a]=_0x1760a1;}}},_0x42d82a=()=>{const _0x67a519=Object['keys'](_0x368bae);for(let _0x4400b6=-0x2*-0x12c+0x695+0x5*-0x1c9;_0x4400b6<_0x67a519['length'];_0x4400b6++){const _0x464105=_0x67a519[_0x4400b6];_0x368bae[_0x464105]&&(_0x368bae[_0x464105]=[]);}},_0x588d1c=()=>{_0x368bae={},_0x53313a=0xd70+0x1*0x81d+-0x158d*0x1;};}class uA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+fA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x2bd7a3,_0x156584,_0x5cad91,_0x2de9b9=!(-0x16e*-0x13+-0x1*-0x30e+-0x451*0x7)){var _0x5cff22,_0x1534ef;const _0x20ff9c={};return _0x2bd7a3['elements'][-0x2136+0x1*-0x1e5+-0x331*-0xb]['properties']['forEach'](_0x1a787d=>{_0x20ff9c[_0x1a787d['name']]=_0x1a787d['storage'];}),_0x2de9b9?(_0x5cff22=this['worker'])==null||_0x5cff22['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x20ff9c,'timeIndex':_0x156584,'timeOption':_0x5cad91},_0x2bd7a3['elements'][-0x24e3+0x15f7*0x1+0xeec]['properties']['map'](_0x4082ff=>_0x4082ff['storage']['buffer'])):(_0x1534ef=this['worker'])==null||_0x1534ef['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x20ff9c,'timeIndex':_0x156584,'timeOption':_0x5cad91}),new Promise(_0x20aa33=>{this['worker']['onmessage']=_0xd0d725=>{if(!this['worker'])return;const {data:_0x378d5c}=_0xd0d725;_0x378d5c['type']==='newAppendD'+'ata'&&_0x20aa33(_0x378d5c);};});}async['releaseSeq'+'Data'](_0x24c6cd){var _0x2403f3;(_0x2403f3=this['worker'])==null||_0x2403f3['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x24c6cd});}async['releaseAll'+'SeqData'](){var _0x422a78;(_0x422a78=this['worker'])==null||_0x422a78['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x4922c7;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x4922c7=this['worker'])==null||_0x4922c7['terminate'](),this['worker']=null);}}const Fa=new te(),B_=new le(),Kd=new De(),z_=new De(),pA=new ie(-0xc26+0x193f+-0xd18,-0x1*0x1e0d+-0x3b*-0x54+0xab2,0x12f6+-0x373*0x2+-0x8*0x182,0xc07+0x1d3*0x10+-0x3*0xdbd+0.4),Zd=0x1bf5+0x203*-0x11+0x63e+0.28209479177387814,Qd=-0x27155+0x4ea24*0x1+0x9f*0xef;let mA=class{constructor(_0x999f51,_0x141bcd,_0x228d3d,_0x8b62a9,_0x5c871b,_0xb5595){const _0x545ad5=_0x999f51['getProp']('x'),_0x5683c5=_0x999f51['getProp']('y'),_0x510d50=_0x999f51['getProp']('z'),_0x122b89=_0x999f51['getProp']('rot_1'),_0x58b729=_0x999f51['getProp']('rot_2'),_0x5b993b=_0x999f51['getProp']('rot_3'),_0x3b388c=_0x999f51['getProp']('rot_0'),_0x3aef0e=_0x999f51['getProp']('motion_0'),_0x55c63d=_0x999f51['getProp']('motion_1'),_0x23540b=_0x999f51['getProp']('motion_2'),_0x357402=_0x999f51['getProp']('scale_0'),_0x49e866=_0x999f51['getProp']('scale_1'),_0x1dac8f=_0x999f51['getProp']('scale_2'),_0x3f6721=_0x999f51['getProp']('f_dc_0'),_0x1deeb2=_0x999f51['getProp']('f_dc_1'),_0x2feba0=_0x999f51['getProp']('f_dc_2'),_0x5cdc9a=_0x999f51['getProp']('opacity');this['read']=_0x405547=>{_0x141bcd&&(_0x141bcd['x']=_0x545ad5[_0x405547],_0x141bcd['y']=_0x5683c5[_0x405547],_0x141bcd['z']=_0x510d50[_0x405547]),_0x228d3d&&_0x228d3d['set'](_0x122b89[_0x405547],_0x58b729[_0x405547],_0x5b993b[_0x405547],_0x3b388c[_0x405547]),_0x8b62a9&&_0x8b62a9['set'](Math['exp'](_0x357402[_0x405547]),Math['exp'](_0x49e866[_0x405547]),Math['exp'](_0x1dac8f[_0x405547])),_0xb5595&&_0x3aef0e&&_0xb5595['set'](_0x3aef0e[_0x405547],_0x55c63d[_0x405547],_0x23540b[_0x405547]),_0x5c871b&&_0x5c871b['set'](0x4f*-0x34+-0x2*0xc54+0x5*0x824+0.5+_0x3f6721[_0x405547]*Zd,-0x7f*0x17+0x8b*-0x5+-0x10*-0xe2+0.5+_0x1deeb2[_0x405547]*Zd,0x21f3+0xff0+-0x31e3*0x1+0.5+_0x2feba0[_0x405547]*Zd,_0x5cdc9a[_0x405547]);};}};const V_=(_0x5c0e30,_0x18c53c,_0x2e62bd)=>{B_['set'](_0x2e62bd['x'],_0x2e62bd['y'],_0x2e62bd['z'],_0x2e62bd['w'])['normalize'](),_0x5c0e30['setTRS'](_0x18c53c,B_,D['ONE']);};class zn{constructor(_0x2fd2c3,_0x598fe3=[]){h(this,'elements'),h(this,'numSplats',-0x438+-0x21e3+0x261b),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x3770af;(_0x3770af=this['dataWorker'])==null||_0x3770af['destroy'](),this['dataWorker']=null;});var _0x3d3012,_0x4fcea7,_0x107f2c;this['elements']=_0x2fd2c3,this['numSplats']=((_0x3d3012=this['getElement']('vertex'))==null?void(-0x24db+0x8*0x2f9+0xd13*0x1):_0x3d3012['count'])??0xeec+-0x599*-0x1+-0x1485,this['comments']=_0x598fe3,this['is4D']=!!((_0x107f2c=(_0x4fcea7=this['getElement']('vertex'))==null?void(-0x21e*-0xf+-0x8*0x203+-0xfaa):_0x4fcea7['properties']['find'](_0xc508b4=>_0xc508b4['name']==='t'))!=null&&_0x107f2c['storage']);}async['appendGSpl'+'atData'](_0x31643f,_0xc590a1,_0x5c13e5){var _0x35491f;let _0x4d9cdb=-0x2f8+-0x1506+0x17fe;for(let _0x15947d=0x765+0x595*-0x5+-0x194*-0xd;_0x15947d<_0x5c13e5['length']&&_0xc590a1>_0x5c13e5[_0x15947d];_0x15947d+=-0x1c41+0x1*-0x1f51+0x1f*0x1ec)_0x4d9cdb=_0x15947d/(0x1da4+0x97a+-0x271c);console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData',_0x4d9cdb),this['dataWorker']||(this['dataWorker']=new uA(),await this['dataWorker']['appendGSpl'+'atData'](this,0xcbb+-0xa41*0x1+-0x27a,_0x5c13e5));const _0x4c1eec=this['getElement']('vertex');_0x4c1eec&&(_0x4c1eec['count']=this['numSplats']);const _0xc751f0=await this['dataWorker']['appendGSpl'+'atData'](_0x31643f,_0x4d9cdb,_0x5c13e5,!(-0x115*0x16+-0x763+-0x5*-0x63d)),_0x43e703=_0xc751f0['properties'],_0x5b626d=((_0x35491f=this['getElement']('vertex'))==null?void(-0x123*0x1a+0x7ae+-0x64*-0x38):_0x35491f['properties'])??[];for(const _0x4bda23 in _0x43e703){const _0x29e2d1=_0x5b626d['find'](_0x56c78c=>_0x56c78c['name']===_0x4bda23);_0x29e2d1?_0x29e2d1['storage']=_0x43e703[_0x4bda23]:_0x5b626d['push']({'type':'float','name':_0x4bda23,'storage':_0x43e703[_0x4bda23],'byteSize':0x4});}this['transformD'+'ata']=_0xc751f0['transformD'+'ata'],this['numSplats']=_0x43e703['x']['length'],console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData\x20nu'+'mSplats',this['numSplats']);}async['releaseSeq'+'Data'](_0x46e691){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20releaseSe'+'qData',_0x46e691),this['dataWorker']['releaseSeq'+'Data'](_0x46e691),this;}async['releaseAll'+'SeqData'](){var _0x5aafd6;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20release\x20a'+'ll\x20SeqData'),(_0x5aafd6=this['dataWorker'])==null||_0x5aafd6['releaseAll'+'SeqData'](),this;}static['calcSplatA'+'abb'](_0x2c2c96,_0x18b3d9,_0x301011,_0x3ff6cf){V_(Fa,_0x18b3d9,_0x301011),Kd['center']['set'](0x254e+0x13*-0x97+-0x83*0x33,-0x1f17+0xdc4+-0x377*-0x5,-0x4f*0x24+0x584+0x598),Kd['halfExtent'+'s']['set'](_0x3ff6cf['x']*(0x14bb+-0x1*0x131e+-0x19b),_0x3ff6cf['y']*(-0x2*-0x7a+0x3*-0xc23+0x2377),_0x3ff6cf['z']*(-0x1*-0x17c8+-0x1*-0x4e3+-0x17*0x13f)),_0x2c2c96['setFromTra'+'nsformedAa'+'bb'](Kd,Fa);}['getProp'](_0x25de6e,_0x12bc60='vertex'){var _0x5724c1,_0x456789;return(_0x456789=(_0x5724c1=this['getElement'](_0x12bc60))==null?void(0x1f9e+-0x2064+0xc6):_0x5724c1['properties']['find'](_0x258d07=>_0x258d07['name']===_0x25de6e))==null?void(0x24a*0x2+0x1782+0x2*-0xe0b):_0x456789['storage'];}['getElement'](_0x2a7f6c){return this['elements']['find'](_0x4feb08=>_0x4feb08['name']===_0x2a7f6c);}['addProp'](_0x3c485a,_0x437bc0){this['getElement']('vertex')['properties']['push']({'type':'float','name':_0x3c485a,'storage':_0x437bc0,'byteSize':0x4});}['createIter'](_0x4dfde0,_0x1fabb3,_0x5a3c3d,_0x5bf056,_0x306c23){return new mA(this,_0x4dfde0,_0x1fabb3,_0x5a3c3d,_0x5bf056,_0x306c23);}async['calcAabbAs'+'ync'](_0x2c035e,_0x425cc4){var _0x242e2b,_0x41e1f6;if((_0x242e2b=this['transformD'+'ata'])!=null&&_0x242e2b['center']&&((_0x41e1f6=this['transformD'+'ata'])!=null&&_0x41e1f6['halfExtent'+'s'])){_0x2c035e['center']['set'](this['transformD'+'ata']['center'][0x189e+-0x1e12+0x574],this['transformD'+'ata']['center'][-0x11ef+0x151a+-0x2*0x195],this['transformD'+'ata']['center'][-0xfc8+-0x2*0x7a2+0x1f0e]),_0x2c035e['halfExtent'+'s']['set'](this['transformD'+'ata']['halfExtent'+'s'][0x253e+-0x8*-0x40c+-0x13*0x3aa],this['transformD'+'ata']['halfExtent'+'s'][0x268d+0x26d5+-0x4d61],this['transformD'+'ata']['halfExtent'+'s'][0x5*0x433+-0x251f+-0x127*-0xe]);return;}const _0x579312=this['getProp']('x'),_0x243014=this['getProp']('y'),_0x24c704=this['getProp']('z'),_0x28fa77=this['getProp']('scale_0'),_0x3237ca=this['getProp']('scale_1'),_0xed088=this['getProp']('scale_2'),_0x3ef80f=await(_0x425cc4==null?void(-0x294+-0x8*0x74+0x18d*0x4):_0x425cc4['calcAabb'](this['numSplats'],_0x579312,_0x243014,_0x24c704,_0x28fa77,_0x3237ca,_0xed088));_0x2c035e['center']['set'](_0x3ef80f['center'][0x2b*-0x67+0x220e+-0x10c1],_0x3ef80f['center'][-0x256a+-0x2656+0x4bc1],_0x3ef80f['center'][-0x101e+-0x1aa2+0x2ac2]),_0x2c035e['halfExtent'+'s']['set'](_0x3ef80f['halfExtent'+'s'][0x12c4+0x1*-0x1b6d+0x8a9],_0x3ef80f['halfExtent'+'s'][0x1d03*-0x1+-0x2e*-0x84+0x153*0x4],_0x3ef80f['halfExtent'+'s'][0x3a6+0x14b*0x4+-0x8d0]);}['calcAabb'](_0x2cf9fd,_0x4fa64d){let _0x38e79b,_0x9002db,_0x1de032,_0x153d81,_0x418b8b,_0x1d5d97,_0x3f8ffd=!(-0xa16*-0x1+0x5d*-0x12+0x1c6*-0x2);const _0x3c96da=this['getProp']('x'),_0x9a968a=this['getProp']('y'),_0x2942bc=this['getProp']('z'),_0x40afe7=this['getProp']('scale_0'),_0x783998=this['getProp']('scale_1'),_0x427063=this['getProp']('scale_2');for(let _0x45bac0=0xbc7+0x17*0x13a+-0x1*0x27fd;_0x45bac0<this['numSplats'];++_0x45bac0){if(_0x4fa64d&&!_0x4fa64d(_0x45bac0))continue;const _0x27488d=_0x3c96da[_0x45bac0],_0x53e7f8=_0x9a968a[_0x45bac0],_0x5b865f=_0x2942bc[_0x45bac0],_0x26ad37=Math['max'](_0x40afe7[_0x45bac0],_0x783998[_0x45bac0],_0x427063[_0x45bac0]);if(!isFinite(_0x27488d)||!isFinite(_0x53e7f8)||!isFinite(_0x5b865f)||!isFinite(_0x26ad37))continue;const _0x22b678=(-0x15a4*-0x1+-0x1be*0x2+-0x1226)*Math['exp'](_0x26ad37);_0x3f8ffd?(_0x3f8ffd=!(-0x1*0x1189+0x1c25+0x21f*-0x5),_0x38e79b=_0x27488d-_0x22b678,_0x9002db=_0x53e7f8-_0x22b678,_0x1de032=_0x5b865f-_0x22b678,_0x153d81=_0x27488d+_0x22b678,_0x418b8b=_0x53e7f8+_0x22b678,_0x1d5d97=_0x5b865f+_0x22b678):(_0x38e79b=Math['min'](_0x38e79b,_0x27488d-_0x22b678),_0x9002db=Math['min'](_0x9002db,_0x53e7f8-_0x22b678),_0x1de032=Math['min'](_0x1de032,_0x5b865f-_0x22b678),_0x153d81=Math['max'](_0x153d81,_0x27488d+_0x22b678),_0x418b8b=Math['max'](_0x418b8b,_0x53e7f8+_0x22b678),_0x1d5d97=Math['max'](_0x1d5d97,_0x5b865f+_0x22b678));}return _0x3f8ffd||(_0x2cf9fd['center']['set']((_0x38e79b+_0x153d81)*(-0x2031+0x21a0+0x16f*-0x1+0.5),(_0x9002db+_0x418b8b)*(-0x254b+-0x1df+-0x272a*-0x1+0.5),(_0x1de032+_0x1d5d97)*(-0x54+-0x22*-0xd0+-0xda6*0x2+0.5)),_0x2cf9fd['halfExtent'+'s']['set']((_0x153d81-_0x38e79b)*(-0x1629+-0x3a*-0x9+0x33*0x65+0.5),(_0x418b8b-_0x9002db)*(-0x138c+0x2002+0x16*-0x91+0.5),(_0x1d5d97-_0x1de032)*(-0xaf0+0x1eb1+0xd*-0x185+0.5))),!_0x3f8ffd;}['yieldToMai'+'n'](){var _0x3bcbb4;return(_0x3bcbb4=globalThis['scheduler'])!=null&&_0x3bcbb4['yield']?globalThis['scheduler']['yield']():new Promise(_0x10c24c=>{setTimeout(_0x10c24c,0x20ff+0x19d8+0x139d*-0x3);});}['calcAabbEx'+'act'](_0x5bbb13,_0x5ebf97){const _0x2ba546=new D(),_0x128c47=new le(),_0x321be9=new D(),_0x22f77c=this['createIter'](_0x2ba546,_0x128c47,_0x321be9);let _0x43c307=!(-0x5e*0x17+-0xec5+0x1737*0x1);for(let _0x1eb0bc=-0xc50+0xc*-0x29b+-0x15ca*-0x2;_0x1eb0bc<this['numSplats'];++_0x1eb0bc)_0x5ebf97&&!_0x5ebf97(_0x1eb0bc)||(_0x22f77c['read'](_0x1eb0bc),_0x43c307?(_0x43c307=!(-0x1cc8+0x26f4+0x89*-0x13),zn['calcSplatA'+'abb'](_0x5bbb13,_0x2ba546,_0x128c47,_0x321be9)):(zn['calcSplatA'+'abb'](z_,_0x2ba546,_0x128c47,_0x321be9),_0x5bbb13['add'](z_)));return!_0x43c307;}async['getCenters'](_0x307679){const _0x36b257=this['getProp']('x'),_0x543c60=this['getProp']('y'),_0x1bd80a=this['getProp']('z');for(let _0x20f3c6=-0x219c+-0x38*0x4f+-0x1972*-0x2;_0x20f3c6<this['numSplats'];++_0x20f3c6)_0x307679[_0x20f3c6*(-0x20bb+-0x9*0x330+0x3d6e*0x1)+(0x3e6*0x1+-0x2132+0x1d4c)]=_0x36b257[_0x20f3c6],_0x307679[_0x20f3c6*(0x1*0x643+0x53a+-0x1a*0x71)+(0x514+-0x1611+0x10fe)]=_0x543c60[_0x20f3c6],_0x307679[_0x20f3c6*(0x1f76+0x2467+0xc1*-0x5a)+(-0x167*-0x16+0x1305+-0x31dd)]=_0x1bd80a[_0x20f3c6],_0x20f3c6%Qd===0x77*-0x53+-0xd*-0x22e+0xa3f&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x2c48a5;if((_0x2c48a5=this['transformD'+'ata'])!=null&&_0x2c48a5['muT'])return this['transformD'+'ata']['muT'];const _0x39928d=this['getProp']('t');return _0x39928d?new Float32Array(_0x39928d):void(0x4*-0x8be+0x227e+0x7a);}async['getTScale'](){const _0x5bc0f5=this['getProp']('t_scale');if(!_0x5bc0f5)return;const _0x3a19c5=new Float32Array(this['numSplats']);for(let _0x23e3d4=0x21c6+-0x157e*0x1+-0x312*0x4;_0x23e3d4<this['numSplats'];++_0x23e3d4)_0x3a19c5[_0x23e3d4]=Math['exp'](_0x5bc0f5[_0x23e3d4]),_0x23e3d4%Qd===0x260e+-0x3*-0xa3d+-0x44c5&&await this['yieldToMai'+'n']();return _0x3a19c5;}async['getMotion'](_0x161d71){const _0x1ad195=this['getProp']('motion_0'),_0x2bef9f=this['getProp']('motion_1'),_0xefc6c0=this['getProp']('motion_2');if(!(!_0x1ad195||!_0x2bef9f||!_0xefc6c0)){for(let _0x128e0a=0xaf*-0xd+0x234+0x6af;_0x128e0a<this['numSplats'];++_0x128e0a)_0x161d71[_0x128e0a*(-0x16b7+-0x2f5*-0x3+0xddb)+(0x16e+0x1*0x10f1+-0x125f)]=_0x1ad195[_0x128e0a],_0x161d71[_0x128e0a*(-0x1171+-0x1a56+0x13*0x24e)+(-0x7f*-0x1d+0xc8d+-0x1aef)]=_0x2bef9f[_0x128e0a],_0x161d71[_0x128e0a*(0x10fe+0xe*-0x115+-0x1*0x1d5)+(0x21bd+-0x331+-0x3*0xa2e)]=_0xefc6c0[_0x128e0a],_0x128e0a%Qd===-0x3a*0x89+0x94d+0x15bd&&await this['yieldToMai'+'n']();}}['getTimeInd'+'ex'](){var _0x49a905;if((_0x49a905=this['transformD'+'ata'])!=null&&_0x49a905['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x412cf7=this['getProp']('time_index');if(_0x412cf7)return new Float32Array(_0x412cf7);}['calcFocalP'+'oint'](_0x2540fd,_0x523310){const _0x5eaaa3=this['getProp']('x'),_0x5901bb=this['getProp']('y'),_0x4f51c8=this['getProp']('z'),_0x24984b=this['getProp']('scale_0'),_0x2d8c4a=this['getProp']('scale_1'),_0x31e640=this['getProp']('scale_2');_0x2540fd['x']=-0xfbd+-0x24e+-0x95*-0x1f,_0x2540fd['y']=-0xa73+-0x20cb*0x1+0x36*0xcd,_0x2540fd['z']=-0x189*-0x8+0x10b9*0x1+-0x1*0x1d01;let _0x5c9c5c=-0x15b*-0x7+-0x5d6+-0x3a7;for(let _0x192ad8=0x21c9+-0x5a3+0xe13*-0x2;_0x192ad8<this['numSplats'];++_0x192ad8){if(_0x523310&&!_0x523310(_0x192ad8))continue;const _0x300c6d=_0x5eaaa3[_0x192ad8],_0x3a761c=_0x5901bb[_0x192ad8],_0x234b73=_0x4f51c8[_0x192ad8];if(!isFinite(_0x300c6d)||!isFinite(_0x3a761c)||!isFinite(_0x234b73))continue;const _0x23749e=(-0xab+0x8fa*-0x1+0x9a6)/(0x1039+-0x1f10+0xed8+Math['exp'](Math['max'](_0x24984b[_0x192ad8],_0x2d8c4a[_0x192ad8],_0x31e640[_0x192ad8])));_0x2540fd['x']+=_0x300c6d*_0x23749e,_0x2540fd['y']+=_0x3a761c*_0x23749e,_0x2540fd['z']+=_0x234b73*_0x23749e,_0x5c9c5c+=_0x23749e;}_0x2540fd['mulScalar']((0x11b0+-0x34a*0x6+0x20d)/_0x5c9c5c);}['renderWire'+'frameBound'+'s'](_0x4db81f,_0x4ca084){const _0x515f37=new D(),_0x2b90c1=new le(),_0x16018=new D(),_0x2cb062=new D(),_0x395c18=new D(),_0x223a3f=this['createIter'](_0x515f37,_0x2b90c1,_0x16018);for(let _0x15d5fa=-0x103*0x13+0x1*0x1efa+-0xbc1;_0x15d5fa<this['numSplats'];++_0x15d5fa)_0x223a3f['read'](_0x15d5fa),V_(Fa,_0x515f37,_0x2b90c1),Fa['mul2'](_0x4ca084,Fa),_0x2cb062['set'](_0x16018['x']*-(-0x1d7b*-0x1+0x17c0+-0x3539),_0x16018['y']*-(0xb6c+-0x60*0x64+0x6*0x459),_0x16018['z']*-(0x2f1+-0x74c+-0x1*-0x45d)),_0x395c18['set'](_0x16018['x']*(-0x38f+0xfaf+-0x21*0x5e),_0x16018['y']*(-0x8c0+-0x371+-0x411*-0x3),_0x16018['z']*(0x25*-0x10d+0x109a+0x1649)),_0x4db81f['immediate']['drawWireAl'+'ignedBox'](_0x2cb062,_0x395c18,pA,!(-0x4*0x997+0x15*-0x1d8+0x268a*0x2),_0x4db81f['defaultDra'+'wLayer'],Fa);}get['isCompress'+'ed'](){return!(-0x2010*0x1+0x1d3f*0x1+-0x2*-0x169);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x1ba0c8=-0x22e4+-0x1ec5+0x27*0x1af;_0x1ba0c8<0x1baa+0x12e3+-0x2e60;++_0x1ba0c8)if(!this['getProp']('f_rest_'+_0x1ba0c8))return _0x1ba0c8;return 0x2600+0xa25*0x1+-0x17fc*0x2;})())]??0x2ad+-0xcea+0x1*0xa3d;}['calcMorton'+'Order'](){const _0x203cd1=_0x11d9d8=>{let _0x23216b=_0x11d9d8[0x993+0x3a4+-0x1*0xd37],_0x2a25ad=_0x11d9d8[-0x17e6+0x1*-0x24ce+0x3cb4];for(let _0x388936=-0x1916+0x44d+0x2*0xa65;_0x388936<_0x11d9d8['length'];_0x388936++)_0x11d9d8[_0x388936]<_0x23216b&&(_0x23216b=_0x11d9d8[_0x388936]),_0x11d9d8[_0x388936]>_0x2a25ad&&(_0x2a25ad=_0x11d9d8[_0x388936]);return{'min':_0x23216b,'max':_0x2a25ad};},_0x46416c=(_0x1e1c80,_0x1f6bb4,_0x5721ad)=>{const _0x3d61a4=_0x44afe7=>(_0x44afe7&=-0x1*0x1b7c+-0xc1*0x2f+0x1e*0x23b,_0x44afe7=(_0x44afe7^_0x44afe7<<0x1*0x1a8f+0x1560+-0x2fdf)&0x849cccb3*0x1+-0x1533beb19+0x1*0x1cd9f1f65,_0x44afe7=(_0x44afe7^_0x44afe7<<0x203f+0xfc4+0xad*-0x47)&-0x29f42e2+-0xf68b2a*0x1+0x696be1b*0x1,_0x44afe7=(_0x44afe7^_0x44afe7<<0x4a7+-0x1c4b+0x17a8)&-0x4d3129+-0x5eac039+0x9442225,_0x44afe7=(_0x44afe7^_0x44afe7<<-0xaa7+0x5b3+0x27b*0x2)&0x65ce5f*-0x21+0x15*-0x9ede74+0x234c6c0c,_0x44afe7);return(_0x3d61a4(_0x5721ad)<<0x1*0x7bb+-0xfcb+0x812*0x1)+(_0x3d61a4(_0x1f6bb4)<<0xae7*-0x3+0x1*0x79a+0x191c*0x1)+_0x3d61a4(_0x1e1c80);},_0x5231cc=this['getProp']('x'),_0x235dbe=this['getProp']('y'),_0x45c74f=this['getProp']('z'),{min:_0x475f3c,max:_0x171071}=_0x203cd1(_0x5231cc),{min:_0x40aaa8,max:_0x1fb79c}=_0x203cd1(_0x235dbe),{min:_0xa70a59,max:_0x137f57}=_0x203cd1(_0x45c74f),_0x51a518=_0x475f3c===_0x171071?-0xd*0x13+-0x20e0+0x21d7:(0x1d98+0x6de+-0x2076*0x1)/(_0x171071-_0x475f3c),_0x4e59c2=_0x40aaa8===_0x1fb79c?-0x1546+-0x1*-0x6bc+0x745*0x2:(0x1*0x1a75+0x1*-0xb5a+0x1*-0xb1b)/(_0x1fb79c-_0x40aaa8),_0x591407=_0xa70a59===_0x137f57?-0x1*-0x295+-0x2364+-0x25*-0xe3:(0x1b*0x10e+0x2*-0x83f+-0x7fc)/(_0x137f57-_0xa70a59),_0x1c7aab=new Map();for(let _0x572ded=-0x2*-0x1df+-0x671*0x1+0x2b3;_0x572ded<this['numSplats'];_0x572ded++){const _0xffe360=Math['min'](0x2639+-0x14a0+-0xd9a,Math['floor']((_0x5231cc[_0x572ded]-_0x475f3c)*_0x51a518)),_0x5152ac=Math['min'](0x79*0x2b+-0x188e+0x83a,Math['floor']((_0x235dbe[_0x572ded]-_0x40aaa8)*_0x4e59c2)),_0x287080=Math['min'](-0x22fe+-0x1331*0x2+0x4d5f,Math['floor']((_0x45c74f[_0x572ded]-_0xa70a59)*_0x591407)),_0x427a22=_0x46416c(_0xffe360,_0x5152ac,_0x287080),_0x3e43d1=_0x1c7aab['get'](_0x427a22);_0x3e43d1?_0x3e43d1['push'](_0x572ded):_0x1c7aab['set'](_0x427a22,[_0x572ded]);}const _0x330167=Array['from'](_0x1c7aab['keys']())['sort']((_0x333aea,_0x52911a)=>_0x333aea-_0x52911a),_0x4db245=new Uint32Array(this['numSplats']);let _0x38f97f=0x1*-0x148+-0x632+0xb*0xae;for(let _0x1b1bca=0xfed+0x1*-0xd7f+-0x26e;_0x1b1bca<_0x330167['length'];++_0x1b1bca){const _0xd32e5a=_0x1c7aab['get'](_0x330167[_0x1b1bca]);for(let _0x57ed13=0x6c1*-0x1+0x49*0x7a+-0x1*0x1c09;_0x57ed13<_0xd32e5a['length'];++_0x57ed13)_0x4db245[_0x38f97f++]=_0xd32e5a[_0x57ed13];}return _0x4db245;}['reorder'](_0x49d660){const _0x40e010=new Map(),_0x30e61b=_0x75fff7=>{if(_0x40e010['has'](_0x75fff7)){const _0x3b2f0a=_0x40e010['get'](_0x75fff7);return _0x40e010['delete'](_0x75fff7),_0x3b2f0a;}return new ArrayBuffer(_0x75fff7);},_0xf3129b=_0x3c7a2f=>{_0x40e010['set'](_0x3c7a2f['byteLength'],_0x3c7a2f);},_0x34ccfa=_0x229e77=>{const _0x1ffbfb=new _0x229e77['constructo'+'r'](_0x30e61b(_0x229e77['byteLength']));for(let _0x2946ad=0xcc1*-0x2+0x1fa2+-0x62*0x10;_0x2946ad<_0x49d660['length'];_0x2946ad++)_0x1ffbfb[_0x2946ad]=_0x229e77[_0x49d660[_0x2946ad]];return _0xf3129b(_0x229e77['buffer']),_0x1ffbfb;};this['elements']['forEach'](_0x11f9b1=>{_0x11f9b1['properties']['forEach'](_0x30a5ce=>{_0x30a5ce['storage']&&(_0x30a5ce['storage']=_0x34ccfa(_0x30a5ce['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}async function _A(){const _0x50eba1=new Float32Array(-0x1*-0x24bb+0x167*0x1+0xe3*-0x2b);new Int32Array(_0x50eba1['buffer']);let _0x243ce7=0x2*-0x9a1+-0x1*0x2701+0x3a43,_0x1e1dd2={};self['onmessage']=async _0x24e207=>{const {data:_0x27b611}=_0x24e207;switch(_0x27b611['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x575a76(_0x27b611['properties'],_0x27b611['timeIndex'],_0x27b611['timeOption']);break;case'releaseSeq'+'Data':_0x129406(_0x27b611['index']);break;case'releaseAll'+'SeqData':_0x566639();break;case'destroyWor'+'ker':_0x3c91f0();break;}};const _0x7b1f75=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x1dde14=-0x3*-0x89a+0x647*0x4+-0x32ea;_0x1dde14<-0x1*-0x185e+0x2111+0x15d*-0x2a;++_0x1dde14)if(!_0x1e1dd2['f_rest_'+_0x1dde14])return _0x1dde14;return 0x1fd4+-0x1744+-0x863;})())]??0xcd*-0x2b+-0x19b0+0x3c1f),_0x575a76=(_0x42e2cb,_0x535261,_0x58d191)=>{var _0x2a9995,_0x37bf07;_0x243ce7+=(((_0x2a9995=_0x42e2cb['position'])==null?void(0xfc7+0x2628+-0x35ef):_0x2a9995['length'])??0x1*0x1046+-0x53a+0x194*-0x7)/(-0x13c*-0x18+0x15d7+-0x3374),console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20append'+'GSplatData'+'\x20numSplats',_0x243ce7,(((_0x37bf07=_0x42e2cb['position'])==null?void(0x9b1+-0x260f*-0x1+-0xbf*0x40):_0x37bf07['length'])??0x90e+0xe6b*-0x2+-0x4*-0x4f2)/(-0xf2d+-0x908*-0x2+0x1*-0x2e0));const _0x135c89=Object['keys'](_0x42e2cb);for(let _0x3bddc1=0xc6c+-0x5*0x254+-0x5*0x28;_0x3bddc1<_0x135c89['length'];_0x3bddc1++){const _0xcd6181=_0x135c89[_0x3bddc1],_0x5ea6a6=_0x42e2cb[_0xcd6181],_0x26d1bc=_0x1e1dd2[_0xcd6181]??new Float32Array(0xe80+0xaec+0x65b*-0x4);if(_0x5ea6a6){let _0x6923a5=null;switch(_0xcd6181){case'position':_0x6923a5=new Float32Array(_0x243ce7*(-0x1*0x1c25+-0x1e69+-0xb*-0x553));break;case'color_opac'+'ity':_0x6923a5=new Uint16Array(_0x243ce7*(0x1ec5+-0x1e67*0x1+0xa*-0x9));break;case'scale':_0x6923a5=new Uint16Array(_0x243ce7*(-0x1*-0x75a+0x5*0x2f3+-0x1616));break;case'motion':_0x6923a5=new Float32Array(_0x243ce7*(0x54*-0x35+-0x85*0x47+0x364a*0x1));break;case'rotation':_0x6923a5=new Float32Array(_0x243ce7*(-0x2*-0xc3b+-0x17b4+-0x1*0xbf));break;default:_0x6923a5=new Float32Array(_0x243ce7);break;}_0x6923a5['set'](_0x26d1bc,-0x21ed+0x23ad+-0xe0*0x2),_0x6923a5['set'](_0x5ea6a6,_0x26d1bc['length']),_0x1e1dd2[_0xcd6181]=_0x6923a5;}}const _0x29dd80={};Object['keys'](_0x1e1dd2)['forEach'](_0xb24836=>{_0xb24836==='scale'||_0xb24836==='color_opac'+'ity'?_0x29dd80[_0xb24836]=new Uint16Array(_0x1e1dd2[_0xb24836]['buffer']['slice']()):_0x29dd80[_0xb24836]=new Float32Array(_0x1e1dd2[_0xb24836]['buffer']['slice']());});const _0xfc93f3=Object['keys'](_0x29dd80)['map'](_0x2ce7bb=>_0x29dd80[_0x2ce7bb]['buffer']),_0xd10e37=_0xccc6f1(),_0x5cd0a6=Object['keys'](_0xd10e37)['map'](_0x7220c3=>_0xd10e37[_0x7220c3]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x29dd80,'transformData':_0xd10e37},_0xfc93f3['concat'](_0x5cd0a6));},_0xccc6f1=()=>{const _0x36b2e2=_0x1e1dd2['position']['length']/(0x209*0x4+-0x587*-0x6+-0x1*0x294b),_0x915e05=_0x1e1dd2['position'],_0x33f9c6=_0x1e1dd2['scale'],_0x9e02e1=_0x1e1dd2['rotation'],_0x37eb68=_0x1e1dd2['motion'],_0x3a06b1=_0x1e1dd2['t'],_0x5a8c6c=_0x1e1dd2['t_scale'],_0x1e7fee=_0x1e1dd2['time_index'],_0x3cb66f=_0x1e1dd2['color_opac'+'ity'],_0x19eab8=(_0x3a06b1==null?void(0x1930+0xe82+-0x27b2):_0x3a06b1['length'])>-0x10ca+-0x5e4+0x16ae;let _0x27934a=null,_0x2bc71f=null,_0x5bce38=null,_0x2536c0=null;_0x19eab8&&(_0x2bc71f=new Float32Array(_0x36b2e2*(-0x156f+0xca5+-0x2ef*-0x3)),_0x2536c0=new Float32Array(_0x36b2e2),_0x27934a=new Float32Array(_0x37eb68['buffer']['slice']()),_0x5bce38=new Float32Array(_0x37eb68['buffer']['slice']()));const _0x33714a=new Float32Array(_0x915e05['buffer']['slice']()),_0x545cb7=new Float32Array(_0x915e05['buffer']['slice']()),_0x5707ad=new Uint16Array(_0x3cb66f['buffer']['slice']()),_0x48ca32=new Uint16Array(_0x33f9c6['buffer']['slice']()),_0x55b0a0=new Float32Array(_0x9e02e1['buffer']['slice']());for(let _0x4d9dab=-0x2f*0x20+0x146c*-0x1+0x1a4c;_0x4d9dab<_0x36b2e2;++_0x4d9dab)_0x19eab8&&_0x2bc71f&&_0x2536c0&&(_0x2536c0[_0x4d9dab]=_0x5a8c6c?Math['exp'](_0x5a8c6c[_0x4d9dab]):0x147*0xd+-0x783+-0x48c*0x2,_0x2bc71f[_0x4d9dab*(0x620+-0x2b5*-0x5+-0x13a6)+(-0x9b0+0x1*-0x946+-0x3*-0x652)]=_0x3a06b1?_0x3a06b1[_0x4d9dab]:-0x2*0xd63+-0x53f*0x7+0x1*0x3f7f,_0x2bc71f[_0x4d9dab*(-0x19b5+0x1af2+-0x13a)+(-0x11*-0x125+-0x2482+-0x2*-0x887)]=_0x2536c0[_0x4d9dab]);const _0x42daaa=_0x1f0f53();let _0x1d0e19={'dataColor':_0x5707ad,'dataCenters':_0x545cb7,'dataPosition':_0x33714a,'dataScale':_0x48ca32,'dataRotation':_0x55b0a0,..._0x42daaa};return _0x19eab8&&(_0x1d0e19={..._0x1d0e19,'dataMotion':_0x27934a,'dataTime':_0x2bc71f,'motion':_0x5bce38,'tScaleArray':_0x2536c0,'muT':new Float32Array(_0x3a06b1),'timeIndex':new Float32Array(_0x1e7fee)}),_0x1d0e19;},_0xa2a1e3=_0x4e8b27=>{const _0x4e8d6b=[];for(let _0x5c2e74=0xd*0x236+0x1*0x16a7+-0x3365;_0x5c2e74<_0x4e8b27;++_0x5c2e74)_0x4e8d6b['push'](_0x1e1dd2['f_rest_'+_0x5c2e74]);return _0x4e8d6b;},_0x1f0f53=()=>{const _0x5e3e0b=_0x7b1f75();if(_0x5e3e0b<=0x71f*-0x5+-0x2243+0x45de)return{};const _0x145a01=_0x1e1dd2['x']['length'],_0x2a3d9f=new Uint32Array(_0x145a01*(0x1*0xa6f+-0x114*-0xd+-0x186f)),_0x3b4de6=new Uint32Array(_0x145a01*(-0x2511+0x25*-0x9d+-0x445*-0xe)),_0x573f5a=new Uint32Array(_0x145a01*(-0x2334+-0x1cb4+-0x4*-0xffb)),_0x50021d=new Uint32Array(_0x145a01*(-0x48+0x511*-0x7+0x23c3)),_0xa08fc0={0x1:0x3,0x2:0x8,0x3:0xf}[_0x5e3e0b],_0x48a3be=_0xa2a1e3(_0xa08fc0*(0x1990+0x51+-0x19de)),_0x157681=-0xcd7*-0x3+-0x22e0+0x45a,_0x2484d3=-0x1291+0x47*0x1+0x1649,_0x14691d=new Float32Array(-0x2103+0x13f4+0xd10),_0x3031c6=new Uint32Array(_0x14691d['buffer']),_0x51fea9=new Array(_0xa08fc0*(-0x3*0x8dd+-0x12*-0x124+0x612))['fill'](-0x3fd+0xdbb+-0x2b*0x3a);for(let _0x43bf5f=0x260e+-0x15*0x129+-0xdb1;_0x43bf5f<_0x145a01;++_0x43bf5f){for(let _0x17710c=0x5c5*-0x4+0x1f51+0x1*-0x83d;_0x17710c<_0xa08fc0;++_0x17710c)_0x51fea9[_0x17710c*(-0x1a8*0x3+0xf5f+0x26*-0x46)]=_0x48a3be[_0x17710c][_0x43bf5f],_0x51fea9[_0x17710c*(-0xb*-0x25e+0xbd7*0x1+-0x25de)+(-0x10f8+-0xcc5+0x1dbe)]=_0x48a3be[_0x17710c+_0xa08fc0][_0x43bf5f],_0x51fea9[_0x17710c*(-0x10b7+0x19b*0x1+0x31*0x4f)+(-0xc1*0x27+-0x3*-0x75b+0x758*0x1)]=_0x48a3be[_0x17710c+_0xa08fc0*(0x2513+-0xebe+-0x1*0x1653)][_0x43bf5f];let _0x3cc70f=_0x51fea9[0x1*-0xcd8+0xb5*0x35+0x61*-0x41];for(let _0x4b5902=-0x13c7*-0x1+-0x208c*-0x1+-0x3452;_0x4b5902<_0xa08fc0*(0x14aa+-0xa17+0x2*-0x548);++_0x4b5902)_0x3cc70f=Math['max'](_0x3cc70f,Math['abs'](_0x51fea9[_0x4b5902]));if(_0x3cc70f!==0xcaf+-0xb68+-0x147){for(let _0x4eee1c=0x1*0x1446+0x1f65+-0x33ab;_0x4eee1c<_0xa08fc0;++_0x4eee1c)_0x51fea9[_0x4eee1c*(0x1*-0x8e9+-0x1*0x14bf+0x7*0x43d)+(-0x1a6f+0x9*-0x453+0x1de*0x23)]=Math['max'](0xaab+-0x105f+0x5b4,Math['min'](_0x157681,Math['floor']((_0x51fea9[_0x4eee1c*(-0x20ff+0x3c7*-0x7+0x3b73)+(0x2033*0x1+-0x1dc0+0x1*-0x273)]/_0x3cc70f*(-0x2618+-0x10bb*0x2+0x6*0xbed+0.5)+(-0x125*0x6+0x12a3+0x17*-0x83+0.5))*_0x157681+(0x669*0x3+0x1ad*0x2+-0x1695+0.5)))),_0x51fea9[_0x4eee1c*(-0x1*-0xa1c+-0x450+0x1*-0x5c9)+(-0x1*-0x7f1+0x6f8+-0x48*0x35)]=Math['max'](-0xf01+0x424*0x5+0x1*-0x5b3,Math['min'](_0x2484d3,Math['floor']((_0x51fea9[_0x4eee1c*(-0x112*-0x4+-0x2*0xbfe+0x31*0x67)+(0xd5d+0xa74+-0x17d0)]/_0x3cc70f*(-0x9cb*-0x3+-0x20bd+0x56*0xa+0.5)+(0xfd1*0x2+0x133b+0x1*-0x32dd+0.5))*_0x2484d3+(0x2*-0x1007+-0x1c6+0x2*0x10ea+0.5)))),_0x51fea9[_0x4eee1c*(-0x133a+-0x21b5+0x34f2)+(0x83f+0x171*0x6+0x5a1*-0x3)]=Math['max'](-0x11ab*0x1+0x516+0xc95,Math['min'](_0x157681,Math['floor']((_0x51fea9[_0x4eee1c*(0x2625+-0x2+-0x2620)+(-0x1079+-0x1625*-0x1+-0x5aa)]/_0x3cc70f*(0x2144+0x1813+0x65f*-0x9+0.5)+(-0xb58+-0x23f*0xe+0x2*0x1565+0.5))*_0x157681+(0x13a0+0x2f*0x4b+-0x2165+0.5))));_0x14691d[0x47e+-0x7e4+-0xf*-0x3a]=_0x3cc70f,_0x2a3d9f[_0x43bf5f*(-0x1825+0xc1a+0x405*0x3)+(-0x3*-0xcb3+0xfb1+-0x35ca)]=_0x3031c6[-0x73*-0x14+-0x1254+-0x958*-0x1],_0x2a3d9f[_0x43bf5f*(-0x3*-0x565+0x217*0x8+-0x20e3)+(0x2*0x57b+-0xf9d+0x4a8)]=_0x51fea9[-0xa72+0x1*0x1dfa+0xa*-0x1f4]<<0x251*0xd+-0x663+-0x1*0x17a5|_0x51fea9[-0x1701+-0x92d+0x6b*0x4d]<<0x160+0x2404+0x1*-0x2559|_0x51fea9[-0x25f7*-0x1+-0x3d6+-0x221f],_0x2a3d9f[_0x43bf5f*(0x1a7*0xd+0x383*-0xb+0x112a*0x1)+(-0x3b3+-0x1b35+0x3*0xa4e)]=_0x51fea9[0x2635*-0x1+0x5f3*-0x1+0x2c2b]<<0xb38+-0x201a+-0x6fd*-0x3|_0x51fea9[0x228d+-0xe8f+-0x13fa]<<0x1*-0x15c7+0x16e3+-0x111|_0x51fea9[0x1*0x230d+0x12af*-0x2+0x256],_0x2a3d9f[_0x43bf5f*(0x17ca+0x64d*-0x1+0x1f1*-0x9)+(0x376+-0x1804+0x1491)]=_0x51fea9[-0x10d4+0x166c+-0x3e*0x17]<<0xe3*0x1+-0x93e+0x870|_0x51fea9[0xc25*0x1+0x22*-0x63+0x108*0x1]<<0x1e12+-0x409+-0x19fe|_0x51fea9[0x22bb+0xb66+-0x2e19*0x1],_0x5e3e0b>-0x61+0x3*-0xb29+-0x1*-0x21dd&&(_0x3b4de6[_0x43bf5f*(0x1617+0x1303+-0x2916)+(-0x6*0x1+-0x1068+0x1*0x106e)]=_0x51fea9[0x12b4+-0x1108+0x1*-0x1a3]<<-0x92e+-0x2*-0x24+0x8fb|_0x51fea9[0x1288+0x3fd*-0x1+-0xe81]<<-0x14f3+0x20*0x83+0x49e|_0x51fea9[-0x23e2*0x1+-0x9c1+0xf3a*0x3],_0x3b4de6[_0x43bf5f*(-0x2e*-0x10+-0x9a3+0x6c7)+(-0x17*0x59+0x1a7+0x7d*0xd)]=_0x51fea9[-0x2fb+0x1c14+-0x190d]<<-0x1*0xcee+0x4f*0x21+0x2d4|_0x51fea9[0x2*-0x7cf+-0x7c5*-0x3+-0x7a4]<<0x261+-0x6f2+-0x1*-0x49c|_0x51fea9[0x331*-0xc+-0x18ee+0x3f48],_0x3b4de6[_0x43bf5f*(0xc1*0x12+0x16ba+-0x2448)+(-0x1352*0x1+-0x1937+0x2c8b)]=_0x51fea9[-0x107f+-0x20f8+0x3186]<<0x253c+-0x19f1+-0xb36|_0x51fea9[0x61*0x14+-0x99a+0x59*0x6]<<0xdf9+-0x661+-0x78d|_0x51fea9[-0x940+-0x1ddb+0x272c],_0x3b4de6[_0x43bf5f*(-0x1b55*-0x1+-0x1*-0x1a33+0x32*-0x112)+(-0xb3*-0x1a+-0x1e2b+0x400*0x3)]=_0x51fea9[0xba3+0xa5e*-0x2+-0x92b*-0x1]<<0xf39*-0x1+-0x1*0x1145+-0x1f*-0x10d|_0x51fea9[-0x6*-0x509+-0xa*-0x7+-0x1e69]<<0xe0b*-0x1+-0x13*0xe3+-0x1eef*-0x1|_0x51fea9[0x1*0x2613+0x476*0x1+0x1*-0x2a75],_0x5e3e0b>0x1*-0x67b+0x16b*0x11+0xa*-0x1c3?(_0x573f5a[_0x43bf5f*(-0xa14+-0x71a*0x3+0x1*0x1f66)+(-0xb3+0x25d0+-0x251d)]=_0x51fea9[0x89c*-0x3+0x203*0x1+0x17e6]<<0x1f8f+-0x99d+-0x15dd|_0x51fea9[-0x12f7+-0x1*0x1d7b+-0x4*-0xc22]<<-0x16e8+0x8d*0x3+-0x2f*-0x74|_0x51fea9[-0x1*-0x14f7+-0x954+-0x2e3*0x4],_0x573f5a[_0x43bf5f*(-0x3*-0x418+-0x2023+0x13df)+(0x1*0x23e+0x26e2+-0x291f)]=_0x51fea9[-0x1e81+-0x1c86+-0x5*-0xbd3]<<-0x9*-0x77+-0x2105+0x1ceb|_0x51fea9[-0x2*0x976+-0x1*0x179b+0x2aa0]<<0x1*-0x1b1d+-0x1698*0x1+0x31c0|_0x51fea9[0x17*0xed+-0x1c7f+-0x2*-0x3a7],_0x573f5a[_0x43bf5f*(0x1*0x1b0f+0xa3c*0x2+0x1*-0x2f83)+(-0xa6*0x13+-0x1*-0x1bfe+0x1*-0xfaa)]=_0x51fea9[-0x822+0x138e+0x1*-0xb51]<<0x2e4+-0xb*0x350+0x21a1|_0x51fea9[-0xda*0x3+0x2*0x105f+-0x1e14]<<-0xf17*0x1+-0x1*-0x1051+-0x1*0x12f|_0x51fea9[-0x15*-0xb3+0x1910+-0x13d1*0x2],_0x573f5a[_0x43bf5f*(0x2*-0x10cc+0x1e33*0x1+-0x123*-0x3)+(-0x329+-0x3d1+0x6fd*0x1)]=_0x51fea9[0x1*0xd2e+-0x1*0x1df9+0x10e9]<<0x11*0x33+0x2b*0x65+-0x1445|_0x51fea9[-0x29*-0x49+-0x1368+-0x3b*-0x22]<<0xac7+-0xc44*0x1+0x188|_0x51fea9[0x29*0xce+0x25bb+-0x4699],_0x50021d[_0x43bf5f*(-0x1322+-0xbb9*-0x1+0x1*0x76d)+(0x1d3*0x11+0x61*0x11+-0x2574)]=_0x51fea9[0x2*0x97d+0x248c+-0x3765]<<-0x15f*0x1a+-0x1*0x162a+0x39e5|_0x51fea9[-0x23c9*0x1+0x19*-0x26+0x27a1*0x1]<<-0x1*-0x1017+-0x1e17*-0x1+-0x2e23|_0x51fea9[-0x1a*-0x48+-0x2346+-0x1c19*-0x1],_0x50021d[_0x43bf5f*(0x1588+-0x11a7+-0x3dd)+(0x4b*0x5b+-0x1f04+0x45c)]=_0x51fea9[-0x1*0x967+-0xaae*0x3+-0x851*-0x5]<<-0x1cf*-0x12+-0x37a+-0x1cff|_0x51fea9[0x2*-0x521+-0x107+0xb6e]<<0x78e+0x1*-0x1647+0x2f4*0x5|_0x51fea9[-0x14*-0x16d+0x1ec3+0x1*-0x3b21],_0x50021d[_0x43bf5f*(0x20e+0x1*-0x129a+0x1090)+(0xc*-0x28c+-0x2255+0x40e7*0x1)]=_0x51fea9[0xede+0x206d+-0x2f24]<<0x16f6*-0x1+0x9b1+0x6ad*0x2|_0x51fea9[0x110d+0x675*-0x2+-0x3fb]<<-0x15a2+-0x1063+-0x70*-0x57|_0x51fea9[-0x24be+-0x174b+0x43*0xe6],_0x50021d[_0x43bf5f*(0x22f7*-0x1+-0x69c+0x3*0xddd)+(0x1902+-0xcaf+-0x2*0x628)]=_0x51fea9[-0x5ef+-0x1a7+-0x4*-0x1f0]<<0xf95+-0x4*0x342+-0x278|_0x51fea9[-0x2409+-0x1f4b+0x437f]<<0x3*-0x107+0x18e8+-0x52*0x44|_0x51fea9[0xd12+-0x15df+0x8f9]):_0x573f5a[_0x43bf5f]=_0x51fea9[-0xf82+-0x1*-0x98f+0x608]<<-0x107*0xd+-0x57e+0x12ee|_0x51fea9[0x1ddc+0x49*-0x1+-0x1d7d]<<-0x1a38+-0x3*-0x537+-0x1c5*-0x6|_0x51fea9[-0x783+-0x163*0xe+0x1b04]);}}return{'sh1to3Data':_0x2a3d9f,'sh4to7Data':_0x3b4de6,'sh8to11Data':_0x573f5a,'sh12to15Data':_0x50021d};},_0x129406=_0x108e50=>{if(!_0x1e1dd2['time_index'])return;const _0x282f08=_0x1e1dd2['time_index']['findIndex'](_0x426010=>_0x426010===_0x108e50);let _0x179a32=_0x1e1dd2['time_index']['findIndex']((_0x4a59ef,_0x517520)=>_0x4a59ef!==_0x108e50&&_0x517520>_0x282f08);if(_0x179a32===-(-0x8ed+0x18be+0x170*-0xb)&&_0x282f08===-(-0x3*0xb8+0x1ab4+0x67*-0x3d))return;_0x179a32===-(-0x955*0x1+-0x67*0x4+-0xaf2*-0x1)&&_0x282f08!==-(0x14f0+-0x18c4+-0x9*-0x6d)&&(_0x179a32=_0x1e1dd2['time_index']['length']),_0x243ce7-=_0x179a32-_0x282f08,console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20releas'+'eSeqData\x20n'+'umSplats',_0x243ce7,_0x179a32-_0x282f08);const _0x11d4a0=Object['keys'](_0x1e1dd2);for(let _0x2e752=0x1*-0x1f4b+0xe33+0x88c*0x2;_0x2e752<_0x11d4a0['length'];_0x2e752++){const _0x3a7f64=_0x11d4a0[_0x2e752],_0x29af24=_0x1e1dd2[_0x3a7f64];if(_0x29af24){let _0xa47ca6=0x1921+-0x21b8+-0x898*-0x1;switch(_0x3a7f64){case'position':_0xa47ca6=0xc73+-0x1c*-0x9d+-0x1d9c;break;case'color_opac'+'ity':_0xa47ca6=-0x147*-0x2+0x245*-0xf+0x1f81;break;case'scale':_0xa47ca6=-0x7*0x50b+-0x1557+0x38a7;break;case'motion':_0xa47ca6=0x1487*-0x1+0x1580+0x7b*-0x2;break;case'rotation':_0xa47ca6=0x1656+0x22*0x7f+-0x2731;break;default:_0xa47ca6=0x1*-0x1d14+-0x25cd+0x42e2;break;}const _0x1010d8=new Float32Array(_0x243ce7*_0xa47ca6);_0x282f08>0x1050+0x2aa*-0x7+-0x256*-0x1?(_0x1010d8['set'](_0x29af24['subarray'](0xc1*0x2c+0x1*-0x1539+-0x85*0x17,_0x282f08*_0xa47ca6),-0xd*0x248+-0xa29+0x27d1),_0x1010d8['set'](_0x29af24['subarray'](_0x179a32*_0xa47ca6),_0x282f08*_0xa47ca6)):_0x1010d8['set'](_0x29af24['subarray'](_0x179a32*_0xa47ca6),-0x6d9*-0x5+0x19a0+-0x3bdd),_0x1e1dd2[_0x3a7f64]=_0x1010d8;}}},_0x566639=()=>{const _0x423a4e=Object['keys'](_0x1e1dd2);for(let _0x2d9280=-0x10*0x106+0x1*-0x2275+0x32d5;_0x2d9280<_0x423a4e['length'];_0x2d9280++){const _0x31cb9b=_0x423a4e[_0x2d9280];_0x1e1dd2[_0x31cb9b]&&(_0x1e1dd2[_0x31cb9b]=[]);}},_0x3c91f0=()=>{_0x1e1dd2={},_0x243ce7=0x2398+0x1*-0x1d9c+0x2*-0x2fe;};}class gA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+_A['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x51c3e5,_0x4fc62a,_0x4f943b,_0x58af82=!(-0x72*-0x33+0x13*0x39+-0x1af0)){var _0x5509de,_0x15de2a;const _0x30b5db={};return _0x51c3e5['elements'][-0xe5f+0x10d5+-0x3*0xd2]['properties']['forEach'](_0x146163=>{_0x30b5db[_0x146163['name']]=_0x146163['storage'];}),_0x58af82?(_0x5509de=this['worker'])==null||_0x5509de['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x30b5db,'timeIndex':_0x4fc62a,'timeOption':_0x4f943b},_0x51c3e5['elements'][0x107a+0xb8c+-0x1*0x1c06]['properties']['map'](_0x16aee6=>_0x16aee6['storage']['buffer'])):(_0x15de2a=this['worker'])==null||_0x15de2a['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x30b5db,'timeIndex':_0x4fc62a,'timeOption':_0x4f943b}),new Promise(_0x1fb6a8=>{this['worker']['onmessage']=_0x2c7e82=>{if(!this['worker'])return;const {data:_0x12b048}=_0x2c7e82;_0x12b048['type']==='newAppendD'+'ata'&&_0x1fb6a8(_0x12b048);};});}async['releaseSeq'+'Data'](_0x3cd350){var _0x572bce;(_0x572bce=this['worker'])==null||_0x572bce['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x3cd350});}async['releaseAll'+'SeqData'](){var _0x2f47ae;(_0x2f47ae=this['worker'])==null||_0x2f47ae['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0xb0021b;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0xb0021b=this['worker'])==null||_0xb0021b['terminate'](),this['worker']=null);}}const ic=new te(),G_=new le(),SA=new ie(0x90b+-0x209f+0x1795,0x1*-0x1d27+0x1a3*0x1+0x5*0x581,-0xb77+-0x9*-0x126+0x121,-0x499+-0x15f7*-0x1+-0xab*0x1a+0.4),H_=0xcdb*0x3+0x23ac7+0x2afa*0x4;class yA{constructor(_0x105394,_0x500d21,_0x5d96c9,_0xdb3a44,_0x16d73c,_0x44dec6){const _0x437541=_0x105394['getProp']('position'),_0x3de059=_0x105394['getProp']('color_opac'+'ity'),_0x2f2242=_0x105394['getProp']('scale'),_0x1fad05=_0x105394['getProp']('motion'),_0x2b2da9=_0x105394['getProp']('rotation');this['read']=_0x352719=>{_0x500d21&&_0x500d21['set'](_0x437541[_0x352719*(-0xd03*-0x1+0x26e6+-0x33e6)+(0x207c+-0x1*-0xeef+-0x2f6b)],_0x437541[_0x352719*(0x13d*-0x1+0x22e2+-0x21a2)+(-0x3*0xbad+0x9d*-0xb+-0x45*-0x9b)],_0x437541[_0x352719*(-0x147e+-0x1cdf+0x5*0x9e0)+(-0x35e+-0x907+0xc67)]),_0x5d96c9&&_0x5d96c9['set'](_0x2b2da9[_0x352719*(-0x2426+0x6*-0x3b5+0x3a67)+(0xb*0x114+-0x1175*-0x2+-0x1*0x2ec6)],_0x2b2da9[_0x352719*(0x205f*-0x1+-0x103c+-0x1*-0x309e)+(0x51a*0x5+0x24a4+-0x3e25)],_0x2b2da9[_0x352719*(0x15*-0x5d+0x281*0xa+-0x1166)+(-0x1c33+-0x142d+-0xb*-0x466)]),_0xdb3a44&&_0xdb3a44['set'](_0x2f2242[_0x352719*(0x2b0+0x1255+0x1*-0x1502)+(0x1563+0x21d9+-0x373c)],_0x2f2242[_0x352719*(-0x3a1*-0x5+0x3*0x501+0x1*-0x2125)+(-0x24e6+0x889+-0xe2f*-0x2)],_0x2f2242[_0x352719*(-0x1*-0xc56+-0xd10+0xbd)+(0xc5e*0x3+0x24a*0x1+-0x2*0x13b1)]),_0x44dec6&&_0x1fad05&&_0x44dec6['set'](_0x1fad05[_0x352719*(-0x18d2+-0x2531+0x1*0x3e06)+(0x1f82*-0x1+-0x245c+0x43de)],_0x1fad05[_0x352719*(0x4a8+-0x236d+-0x3d9*-0x8)+(0x298*0xe+0x1edd*-0x1+-0x572)],_0x1fad05[_0x352719*(0x4*0x2bd+-0x4ab+0xb*-0x92)+(-0x567*0x3+-0x1f*0xca+0x9*0x485)]),_0x16d73c&&_0x16d73c['set'](_0x3de059[_0x352719*(0x24c1+-0x1*-0x11e0+0xb*-0x4f7)+(0x2098+-0x1121+-0xf77*0x1)],_0x3de059[_0x352719*(0x25e6+-0x169c+-0xf46)+(-0x4e2*-0x4+-0xe16+-0xc7*0x7)],_0x3de059[_0x352719*(0x332+0x1529+-0x1857)+(0x2*-0xc1c+0x2*-0x23b+0x1cb0)],_0x3de059[_0x352719*(0x5*0x14d+-0x205a*-0x1+-0x26d7)+(0x221d+0x13*-0x204+-0x1*-0x432)]);};}}const vA=(_0x344b86,_0x3c531f,_0x44e5df)=>{G_['set'](_0x44e5df['x'],_0x44e5df['y'],_0x44e5df['z'],_0x44e5df['w'])['normalize'](),_0x344b86['setTRS'](_0x3c531f,G_,D['ONE']);};class xA{constructor(_0x3495aa,_0x12da14=[],_0xfeaa12=[]){h(this,'elements'),h(this,'properties'),h(this,'numSplats',-0x1ba5+0x22a2+-0x6fd),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x130a46;(_0x130a46=this['dataWorker'])==null||_0x130a46['destroy'](),this['dataWorker']=null;});var _0x170111,_0x544e99,_0x4a49c5;this['elements']=_0x3495aa,this['properties']=_0xfeaa12,this['numSplats']=((_0x170111=this['getElement']('vertex'))==null?void(-0x1*-0x22e5+0xaea+-0x2dcf):_0x170111['count'])??-0xcb3*0x2+-0x147a+0x2de0,this['comments']=_0x12da14,this['is4D']=!!((_0x4a49c5=(_0x544e99=this['getElement']('vertex'))==null?void(-0x12e7+0x25f*0x6+0x4ad):_0x544e99['properties']['find'](_0x394fc6=>_0x394fc6['name']==='t'))!=null&&_0x4a49c5['storage']);}async['appendGSpl'+'atData'](_0x55d596,_0x4dd083,_0x229d15){var _0xe39990;let _0xfa0aec=0x1a06+-0x1*0x4b5+-0x1551;for(let _0xd35a80=-0x933+0x1563+-0xc30;_0xd35a80<_0x229d15['length']&&_0x4dd083>_0x229d15[_0xd35a80];_0xd35a80+=0x17df+-0x1ab*0xd+-0x22e)_0xfa0aec=_0xd35a80/(0x20ca+0x1f56+-0x2*0x200f);this['dataWorker']||(this['dataWorker']=new gA(),await this['dataWorker']['appendGSpl'+'atData'](this,-0x150c+-0x16c0+0x2bcc,_0x229d15));const _0x11356c=this['getElement']('vertex');_0x11356c&&(_0x11356c['count']=this['numSplats']);const _0x39a17a=await this['dataWorker']['appendGSpl'+'atData'](_0x55d596,_0xfa0aec,_0x229d15,!(0x25*0xfb+-0x5dc+-0x1e6b)),_0x58a950=_0x39a17a['properties'],_0x2ce346=((_0xe39990=this['getElement']('vertex'))==null?void(-0x1da7*-0x1+0x19dc+-0x3783):_0xe39990['properties'])??[];for(const _0x489bc0 in _0x58a950){const _0x2ca975=_0x2ce346['find'](_0x4e45a5=>_0x4e45a5['name']===_0x489bc0);_0x2ca975?_0x2ca975['storage']=_0x58a950[_0x489bc0]:_0x2ce346['push']({'type':'float','name':_0x489bc0,'storage':_0x58a950[_0x489bc0],'byteSize':0x4});}this['transformD'+'ata']=_0x39a17a['transformD'+'ata'],this['numSplats']=_0x58a950['position']['length']/(0x5fc*-0x6+0x1f42*-0x1+0x432d);}async['releaseSeq'+'Data'](_0x55833a){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'leaseSeqDa'+'ta',_0x55833a),this['dataWorker']['releaseSeq'+'Data'](_0x55833a),this;}async['releaseAll'+'SeqData'](){var _0x5b8d4a;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'lease\x20all\x20'+'SeqData'),(_0x5b8d4a=this['dataWorker'])==null||_0x5b8d4a['releaseAll'+'SeqData'](),this;}['getProp'](_0x3c6e82,_0x5d7d5b='vertex'){var _0xa135e,_0x289b29;return(_0x289b29=(_0xa135e=this['getElement'](_0x5d7d5b))==null?void(0xfd6+-0x1456+0x9*0x80):_0xa135e['properties']['find'](_0x1ca8dc=>_0x1ca8dc['name']===_0x3c6e82))==null?void(-0x1*0x6d2+0x117b*0x1+0xaa9*-0x1):_0x289b29['storage'];}['getElement'](_0xa5768){return this['elements']['find'](_0x40f418=>_0x40f418['name']===_0xa5768);}['createIter'](_0x2960d5,_0x4ea2aa,_0x37be3f,_0xdf0230,_0x178bfd){return new yA(this,_0x2960d5,_0x4ea2aa,_0x37be3f,_0xdf0230,_0x178bfd);}['calcAabb'](_0x147ce1,_0x572348){let _0x4bb110=0x1f51+-0x10f+-0x1e42,_0x4017f2=-0x1096+-0x126e+0x2304,_0x177b9c=0x14c9+-0x1*-0x21dd+-0x36a6,_0x8ad7c9=-0x2*-0x871+-0x61*0x7+-0xe3b*0x1,_0x461ab1=-0x152*0xd+0x1*-0x1e9b+0x2fc5,_0x18e73b=-0x13e8+-0x1e58+0x3240,_0x5476a4=!(-0x17c0+-0x2*-0xd6c+-0x318);const _0x2c23af=this['getProp']('position'),_0x2453b8=this['getProp']('scale');for(let _0x189683=0x2*0x1295+0x1d08+-0x1*0x4232;_0x189683<this['numSplats'];++_0x189683){if(_0x572348&&!_0x572348(_0x189683))continue;const _0x3e267f=_0x2c23af[_0x189683*(0x20e7*0x1+-0xc97+0x144d*-0x1)+(-0x420*0x8+0x4*-0x8ab+0x21d6*0x2)],_0x3a9de3=_0x2c23af[_0x189683*(0x1b*-0xd8+-0x1*-0xacc+0xbff*0x1)+(-0x5*-0x3c1+0xb*-0x272+-0x822*-0x1)],_0xd8a0de=_0x2c23af[_0x189683*(0x688+0x1cc7+-0x3ec*0x9)+(0x1e34+-0x2*-0xda3+-0x3978)],_0x371518=Math['max'](_0x2453b8[_0x189683*(0x1*0x2194+0x784*-0x3+-0xb05)+(0x1*-0x24b5+-0x1175+-0x1*-0x362a)],_0x2453b8[_0x189683*(0x35e+-0x14f*-0xe+-0x15ad)+(-0x17*-0x113+-0x2b*-0x5+0x1f7*-0xd)],_0x2453b8[_0x189683*(-0xde2*0x1+0x5a5+-0x42*-0x20)+(-0x1*0x208e+0x171a+0x2*0x4bb)]);if(!isFinite(_0x3e267f)||!isFinite(_0x3a9de3)||!isFinite(_0xd8a0de)||!isFinite(_0x371518))continue;const _0x17d992=(0x5b*-0x19+0x7e4+0x101)*Math['exp'](_0x371518);_0x5476a4?(_0x5476a4=!(-0x20bc+-0x19*0xcb+0x3490),_0x4bb110=_0x3e267f-_0x17d992,_0x4017f2=_0x3a9de3-_0x17d992,_0x177b9c=_0xd8a0de-_0x17d992,_0x8ad7c9=_0x3e267f+_0x17d992,_0x461ab1=_0x3a9de3+_0x17d992,_0x18e73b=_0xd8a0de+_0x17d992):(_0x4bb110=Math['min'](_0x4bb110,_0x3e267f-_0x17d992),_0x4017f2=Math['min'](_0x4017f2,_0x3a9de3-_0x17d992),_0x177b9c=Math['min'](_0x177b9c,_0xd8a0de-_0x17d992),_0x8ad7c9=Math['max'](_0x8ad7c9,_0x3e267f+_0x17d992),_0x461ab1=Math['max'](_0x461ab1,_0x3a9de3+_0x17d992),_0x18e73b=Math['max'](_0x18e73b,_0xd8a0de+_0x17d992));}return _0x5476a4||(_0x147ce1['center']['set']((_0x4bb110+_0x8ad7c9)*(0x11bb+0x1823+-0x1d2*0x17+0.5),(_0x4017f2+_0x461ab1)*(0xd2c+-0x1bf2+0xec6+0.5),(_0x177b9c+_0x18e73b)*(0xa2d+-0x3*0x14b+-0x64c+0.5)),_0x147ce1['halfExtent'+'s']['set']((_0x8ad7c9-_0x4bb110)*(0x1*-0x704+-0x1*-0x1c1b+-0x1517+0.5),(_0x461ab1-_0x4017f2)*(0x1*-0x35d+0x2199+0x183*-0x14+0.5),(_0x18e73b-_0x177b9c)*(0x16e0+0x1*-0x16a9+-0x37+0.5))),!_0x5476a4;}['yieldToMai'+'n'](){var _0x2de901;return(_0x2de901=globalThis['scheduler'])!=null&&_0x2de901['yield']?globalThis['scheduler']['yield']():new Promise(_0x24f4c6=>{setTimeout(_0x24f4c6,-0x2050+0x1b9e+0x4b2);});}async['getCenters'](_0xd9feef){const _0xaf16d8=this['getProp']('x'),_0x1610cb=this['getProp']('y'),_0x1020f1=this['getProp']('z');for(let _0xd42f6b=-0x1cba*0x1+0x1ed8+-0x2*0x10f;_0xd42f6b<this['numSplats'];++_0xd42f6b)_0xd9feef[_0xd42f6b*(-0xd*0x33+-0x92*0x2c+0x1bb2)+(-0x20c0+-0x1abe+0x3b7e)]=_0xaf16d8[_0xd42f6b],_0xd9feef[_0xd42f6b*(-0x2175*0x1+-0x26a*-0x3+0x1a3a)+(0x2058+-0x3*-0xc2+0x229d*-0x1)]=_0x1610cb[_0xd42f6b],_0xd9feef[_0xd42f6b*(-0x82a+-0xf9c+0x17c9*0x1)+(-0x5*0x168+0x269*-0x3+-0xd*-0x119)]=_0x1020f1[_0xd42f6b],_0xd42f6b%H_===-0x2146+0x6*0x54a+-0x1*-0x18a&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x53d927;if((_0x53d927=this['transformD'+'ata'])!=null&&_0x53d927['muT'])return this['transformD'+'ata']['muT'];const _0x48efcd=this['getProp']('t');return _0x48efcd?new Float32Array(_0x48efcd):void(0x314+0x4*-0x1d7+0x448);}async['getTScale'](){const _0x85242f=this['getProp']('t_scale');if(!_0x85242f)return;const _0x193499=new Float32Array(this['numSplats']);for(let _0x3ba7b5=0x3*0x1a3+-0xc8+0x1*-0x421;_0x3ba7b5<this['numSplats'];++_0x3ba7b5)_0x193499[_0x3ba7b5]=Math['exp'](_0x85242f[_0x3ba7b5]),_0x3ba7b5%H_===-0x15b5+-0x4*0x5e9+0x2d59&&await this['yieldToMai'+'n']();return _0x193499;}['getMotion'](_0x2a0357){const _0x136f82=this['getProp']('motion');_0x136f82&&new Float32Array(_0x136f82['buffer']['slice']());}['getTimeInd'+'ex'](){var _0x586c46;if((_0x586c46=this['transformD'+'ata'])!=null&&_0x586c46['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x4c49c5=this['getProp']('time_index');if(_0x4c49c5)return new Float32Array(_0x4c49c5);}['calcFocalP'+'oint'](_0x52a0cb,_0x19117a){const _0x4e860f=this['getProp']('position'),_0x507922=this['getProp']('scale');_0x52a0cb['x']=0x154b+-0x2627+0x10dc,_0x52a0cb['y']=0x24ca+0xebe+-0x3388*0x1,_0x52a0cb['z']=-0x263*0x5+-0x3a1*0x8+0x28f7;let _0x4cd463=0x4*-0x8ab+0x10*-0x116+0x340c;for(let _0x638707=-0x1*0x1337+0x3*-0x714+-0x221*-0x13;_0x638707<this['numSplats'];++_0x638707){if(_0x19117a&&!_0x19117a(_0x638707))continue;const _0x4ebf98=_0x4e860f[_0x638707*(-0x806+-0x1*0x2075+0x287e)+(0x63a+-0x2*0x926+0x203*0x6)],_0x5d815d=_0x4e860f[_0x638707*(-0x15f7*-0x1+0x3*0x935+-0x3193)+(-0x259*-0xf+-0x17f9+-0xb3d)],_0x4bb396=_0x4e860f[_0x638707*(-0x171f+-0x1733+0x2e55)+(0x8ba*0x4+-0x1d7d+-0x569)];if(!isFinite(_0x4ebf98)||!isFinite(_0x5d815d)||!isFinite(_0x4bb396))continue;const _0x18613f=(0x5b4+0x29*-0x8d+0x871*0x2)/(-0x12dd+-0x5*0x365+0x72b*0x5+Math['max'](_0x507922[_0x638707*(0xc1*-0x14+0x2*-0x89e+0x2053)+(0x211e+-0xefa+0x12*-0x102)],_0x507922[_0x638707*(0x2488+0x168a+-0x48b*0xd)+(-0x16*-0x9d+0x15de+-0x235b)],_0x507922[_0x638707*(-0x1b*-0xc0+0x1c75+0x1859*-0x2)+(0x11*-0x34+0xc3*-0x7+0x8cb)]));_0x52a0cb['x']+=_0x4ebf98*_0x18613f,_0x52a0cb['y']+=_0x5d815d*_0x18613f,_0x52a0cb['z']+=_0x4bb396*_0x18613f,_0x4cd463+=_0x18613f;}_0x52a0cb['mulScalar']((-0xd*0x4f+0x1*0x5d+0x3a7)/_0x4cd463);}['renderWire'+'frameBound'+'s'](_0x4f1a6c,_0x33efa1){const _0x13d971=new D(),_0x46972a=new le(),_0x54899a=new D(),_0x5e9838=new D(),_0x59f0de=new D(),_0x2ce9d9=this['createIter'](_0x13d971,_0x46972a,_0x54899a);for(let _0x3bdb22=0x1b3f+-0x2225*-0x1+0x1*-0x3d64;_0x3bdb22<this['numSplats'];++_0x3bdb22)_0x2ce9d9['read'](_0x3bdb22),vA(ic,_0x13d971,_0x46972a),ic['mul2'](_0x33efa1,ic),_0x5e9838['set'](_0x54899a['x']*-(-0x15*0x1c1+-0x5f6+0x1*0x2acd),_0x54899a['y']*-(-0x1221+0x45*-0x35+-0x2*-0x1036),_0x54899a['z']*-(-0x2002+0x1820*0x1+0x1*0x7e4)),_0x59f0de['set'](_0x54899a['x']*(-0x2*0x265+0x3*-0x526+-0x2*-0xa1f),_0x54899a['y']*(-0x836*-0x3+0x2027*-0x1+0x787),_0x54899a['z']*(-0xe08+-0x32c+0x89b*0x2)),_0x4f1a6c['immediate']['drawWireAl'+'ignedBox'](_0x5e9838,_0x59f0de,SA,!(-0x18a9+0x15f3+0x15b*0x2),_0x4f1a6c['defaultDra'+'wLayer'],ic);}get['isCompress'+'ed'](){return!(-0x125b+-0x6eb+0x2cf*0x9);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x419634=0x17*-0x131+-0x1*-0x2335+-0x7ce;_0x419634<-0x3*0x606+-0x2*-0xe6f+-0xa9f;++_0x419634)if(!this['getProp']('f_rest_'+_0x419634))return _0x419634;return 0x6*-0x40+-0x25b8+0x2765;})())]??0x10eb*0x1+-0x1656+0x56b;}['calcMorton'+'Order'](){const _0x39fefe=_0x5d2d12=>{let _0x183657=_0x5d2d12[-0x1*-0x256+0x22eb+-0xbb*0x33],_0x4ed214=_0x5d2d12[-0x1e15+-0x8e0+0x1*0x26f5];for(let _0x439109=0x2f*0xc2+0x9b9*0x1+-0x2d56;_0x439109<_0x5d2d12['length'];_0x439109++)_0x5d2d12[_0x439109]<_0x183657&&(_0x183657=_0x5d2d12[_0x439109]),_0x5d2d12[_0x439109]>_0x4ed214&&(_0x4ed214=_0x5d2d12[_0x439109]);return{'min':_0x183657,'max':_0x4ed214};},_0x55889a=(_0x2b644,_0x57b072,_0x138739)=>{const _0x2d1a9b=_0x5f274c=>(_0x5f274c&=0xae*0x1f+0xf2e+-0x2041,_0x5f274c=(_0x5f274c^_0x5f274c<<-0x2049+0x1fe5+0x74)&0x14217685d+-0x1818cd285+0x13e756b27,_0x5f274c=(_0x5f274c^_0x5f274c<<0x1*0xd09+0x107d+-0x5e6*0x5)&0x1*0x1fdf179+0x1edf512+-0xeaf67c,_0x5f274c=(_0x5f274c^_0x5f274c<<0x1*0x1f45+-0xff9+-0xf48)&-0x3a994c8*-0x1+0x1e880a0+-0x285e4a5,_0x5f274c=(_0x5f274c^_0x5f274c<<-0x1*0x80d+-0x103e+0x184d)&0xc11617e+-0x439df93+0x14d105e,_0x5f274c);return(_0x2d1a9b(_0x138739)<<-0x684+-0x1*-0x2051+-0x19cb)+(_0x2d1a9b(_0x57b072)<<-0x2373+-0x15b*-0xc+0x1330)+_0x2d1a9b(_0x2b644);},_0x537835=this['getProp']('x'),_0x5314b3=this['getProp']('y'),_0x247151=this['getProp']('z'),{min:_0x402dad,max:_0x2ec1d2}=_0x39fefe(_0x537835),{min:_0x333dba,max:_0x3a7dd2}=_0x39fefe(_0x5314b3),{min:_0x1e6a31,max:_0x59fef9}=_0x39fefe(_0x247151),_0x5d3666=_0x402dad===_0x2ec1d2?0x56*-0x6+0x1fda+-0x43*0x72:(-0x1*-0x2256+-0x5ea+-0x186c)/(_0x2ec1d2-_0x402dad),_0x24c70d=_0x333dba===_0x3a7dd2?0x1a*0x15a+-0xa87+-0x189d:(-0x1*0x1835+0x1e38+-0x203)/(_0x3a7dd2-_0x333dba),_0x5834bd=_0x1e6a31===_0x59fef9?-0xefd+-0x1b*-0x1+0xa*0x17d:(-0x1*0x19f+-0xd5*-0x24+-0x1855)/(_0x59fef9-_0x1e6a31),_0x5a9b3b=new Map();for(let _0x3724d0=-0x1a91*-0x1+0x15af+-0x3040;_0x3724d0<this['numSplats'];_0x3724d0++){const _0x5f1bc6=Math['min'](-0x1*0x565+-0x3+-0x1*-0x967,Math['floor']((_0x537835[_0x3724d0]-_0x402dad)*_0x5d3666)),_0x49469f=Math['min'](0x696*-0x3+-0x1e4c+0x360d,Math['floor']((_0x5314b3[_0x3724d0]-_0x333dba)*_0x24c70d)),_0x4893ff=Math['min'](0x711+0x4eb*-0x7+0x17*0x15d,Math['floor']((_0x247151[_0x3724d0]-_0x1e6a31)*_0x5834bd)),_0x2ce223=_0x55889a(_0x5f1bc6,_0x49469f,_0x4893ff),_0x47e048=_0x5a9b3b['get'](_0x2ce223);_0x47e048?_0x47e048['push'](_0x3724d0):_0x5a9b3b['set'](_0x2ce223,[_0x3724d0]);}const _0x218454=Array['from'](_0x5a9b3b['keys']())['sort']((_0x484a2b,_0x4a37f4)=>_0x484a2b-_0x4a37f4),_0x5152c2=new Uint32Array(this['numSplats']);let _0x31b4fb=-0xdc6+-0x2ee+0x10b4;for(let _0x4bd9f0=-0x229a+-0x1acc+0x3d66;_0x4bd9f0<_0x218454['length'];++_0x4bd9f0){const _0x1448e6=_0x5a9b3b['get'](_0x218454[_0x4bd9f0]);for(let _0x2b9f5a=0x25*0x1+0x2116*0x1+0x2f*-0xb5;_0x2b9f5a<_0x1448e6['length'];++_0x2b9f5a)_0x5152c2[_0x31b4fb++]=_0x1448e6[_0x2b9f5a];}return _0x5152c2;}['reorder'](_0x53a030){const _0x1520fa=new Map(),_0x123fb3=_0x1ff75d=>{if(_0x1520fa['has'](_0x1ff75d)){const _0xa3d4c2=_0x1520fa['get'](_0x1ff75d);return _0x1520fa['delete'](_0x1ff75d),_0xa3d4c2;}return new ArrayBuffer(_0x1ff75d);},_0x739e4d=_0x506b4e=>{_0x1520fa['set'](_0x506b4e['byteLength'],_0x506b4e);},_0x402de5=_0x2a1bae=>{const _0x62a318=new _0x2a1bae['constructo'+'r'](_0x123fb3(_0x2a1bae['byteLength']));for(let _0x17def7=0x2157+-0x1*0x106+-0x2051;_0x17def7<_0x53a030['length'];_0x17def7++)_0x62a318[_0x17def7]=_0x2a1bae[_0x53a030[_0x17def7]];return _0x739e4d(_0x2a1bae['buffer']),_0x62a318;};this['elements']['forEach'](_0x508362=>{_0x508362['properties']['forEach'](_0x3cb55e=>{_0x3cb55e['storage']&&(_0x3cb55e['storage']=_0x402de5(_0x3cb55e['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}const TA='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20void\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(vert'+'ex_positio'+'n,\x200.0,\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a',wA='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'vec4\x20packR'+'gb(vec3\x20v)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uvec3\x20vb\x20'+'=\x20uvec3(cl'+'amp(v,\x20vec'+'3(0.0),\x20ve'+'c3(1.0))\x20*'+'\x20vec3(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uint\x20bits\x20'+'=\x20(vb.x\x20<<'+'\x2021)\x20|\x20(vb'+'.y\x20<<\x2010)\x20'+'|\x20vb.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4((u'+'vec4(bits)'+'\x20>>\x20uvec4('+'24,\x2016,\x208,'+'\x200))\x20&\x20uve'+'c4(0xff))\x20'+'/\x20vec4(255'+'.0);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20vec3\x20dir'+';\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20sampler2'+'D\x20centroid'+'s;\x0a\x20\x20\x20\x20uni'+'form\x20mediu'+'mp\x20float\x20s'+'hN_mins;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20f'+'loat\x20shN_m'+'axs;\x0a\x0a\x20\x20\x20\x20'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20ivec'+'2\x20uv\x20=\x20ive'+'c2(gl_Frag'+'Coord.xy)\x20'+'*\x20ivec2(SH'+'_COEFFS,\x201'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20mediump\x20v'+'ec3\x20coeffi'+'cients[SH_'+'COEFFS];\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(int\x20i\x20=\x20'+'0;\x20i\x20<\x20SH_'+'COEFFS;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20s\x20=\x20texe'+'lFetch(cen'+'troids,\x20iv'+'ec2(uv.x\x20+'+'\x20i,\x20uv.y),'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20coefficie'+'nts[i]\x20=\x20m'+'ix(vec3(sh'+'N_mins),\x20v'+'ec3(shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20packRgb'+'(evalSH(co'+'efficients'+',\x20dir)\x20*\x200'+('.25\x20+\x200.5)'+';\x0a\x20\x20\x20\x20}\x0a'),EA='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput:\x20Vert'+'exInput)\x20-'+'>\x20VertexOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Ver'+'texOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a',bA='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'fn\x20packRgb'+'(v:\x20vec3f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vb\x20=\x20v'+'ec3u(clamp'+'(v,\x20vec3f('+'0.0),\x20vec3'+'f(1.0))\x20*\x20'+'vec3f(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20bits\x20='+'\x20dot(vb,\x20v'+'ec3u(1\x20<<\x20'+'21,\x201\x20<<\x201'+'0,\x201));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(('+'vec4u(bits'+')\x20>>\x20vec4u'+'(24,\x2016,\x208'+',\x200))\x20&\x20ve'+'c4u(0xff))'+'\x20/\x20vec4f(2'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20un'+'iform\x20dir:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'shN_mins:\x20'+'f32;\x0a\x20\x20\x20\x20u'+'niform\x20shN'+'_maxs:\x20f32'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20centroids'+':\x20texture_'+'2d<f32>;\x0a\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input:'+'\x20FragmentI'+'nput)\x20->\x20F'+'ragmentOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20uv\x20=\x20'+'vec2i(inpu'+'t.position'+'.xy)\x20*\x20vec'+'2i(SH_COEF'+'FS,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'coefficien'+'ts:\x20array<'+'vec3f,\x20SH_'+'COEFFS>;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x200;\x20i\x20'+'<\x20SH_COEFF'+'S;\x20i++)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s:\x20v'+'ec3f\x20=\x20tex'+'tureLoad(c'+'entroids,\x20'+'vec2i(uv.x'+'\x20+\x20i,\x20uv.y'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20coeffic'+'ients[i]\x20='+'\x20mix(vec3f'+'(uniform.s'+'hN_mins),\x20'+'vec3f(unif'+('orm.shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20packRgb'+'(evalSH(&c'+'oefficient'+'s,\x20uniform'+'.dir)\x20*\x200.'+'25\x20+\x200.5);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20}'+'\x0a'),AA='\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20sampler2D'+'\x20sh0;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x20\x20\x20\x20u'+'niform\x20med'+'iump\x20sampl'+'er2D\x20sh_re'+'sult;\x0a\x0a\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20sh0_mi'+'ns;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20sh0_maxs;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20SH_C0\x20=\x20'+'0.28209479'+'177387814;'+'\x0a\x0a\x20\x20\x20\x20//\x20u'+'npack\x2011,\x20'+'11,\x2010\x20nor'+'malized\x20va'+'lue\x20from\x20r'+'gba8\x20textu'+'re\x20sample\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackRgb(v'+'ec4\x20v)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uve'+'c4\x20uv\x20=\x20uv'+'ec4(v\x20*\x2025'+'5.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uint\x20b'+'its\x20=\x20(uv.'+'x\x20<<\x2024)\x20|'+'\x20(uv.y\x20<<\x20'+'16)\x20|\x20(uv.'+'z\x20<<\x208)\x20|\x20'+'uv.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uvec3\x20'+'vb\x20=\x20(uvec'+'3(bits)\x20>>'+'\x20uvec3(21,'+'\x2010,\x200))\x20&'+'\x20uvec3(0x7'+'ffu,\x200x7ff'+'u,\x200x3ffu)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3(vb)\x20/\x20ve'+'c3(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20baseSampl'+'e\x20=\x20mix(sh'+'0_mins,\x20sh'+'0_maxs,\x20te'+'xelFetch(s'+'h0,\x20source'+'.uv,\x200));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20resolve\x20'+'base\x20color'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4\x20base\x20='+'\x20vec4(vec3'+'(0.5)\x20+\x20ba'+'seSample.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'baseSample'+'.w)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'xtract\x20sph'+'erical\x20har'+'monics\x20pal'+'ette\x20index'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20label'+'Sample\x20=\x20i'+'vec2(texel'+'Fetch(sh_l'+'abels,\x20sou'+'rce.uv,\x200)'+'.xy\x20*\x20255.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20int\x20n\x20=\x20'+('labelSampl'+'e.x\x20+\x20labe'+'lSample.y\x20'+'*\x20256;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20shSample\x20'+'=\x20texelFet'+'ch(sh_resu'+'lt,\x20ivec2('+'n\x20%\x2064,\x20n\x20'+'/\x2064),\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20sh\x20=\x20('+'unpackRgb('+'shSample)\x20'+'-\x20vec3(0.5'+'))\x20*\x204.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'(base.xyz\x20'+'+\x20sh,\x20base'+'.w);\x0a\x20\x20\x20\x20}'+'\x0a'),CA='\x0a\x20\x20\x20\x20var\x20s'+'h0:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'h_labels:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20sh_re'+'sult:\x20text'+'ure_2d<f32'+'>;\x0a\x0a\x20\x20\x20\x20un'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20sh0_m'+'axs:\x20vec4f'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20SH_C0:\x20'+'f32\x20=\x200.28'+'2094791773'+'87814;\x0a\x0a\x20\x20'+'\x20\x20//\x20unpac'+'k\x2011,\x2011,\x20'+'10\x20normali'+'zed\x20value\x20'+'from\x20rgba8'+'\x20texture\x20s'+'ample\x0a\x20\x20\x20\x20'+'fn\x20unpackR'+'gb(v:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20bits'+'\x20=\x20dot(vec'+'4u(v\x20*\x20255'+'.0),\x20vec4u'+'(1u\x20<<\x2024,'+'\x201u\x20<<\x2016,'+'\x201u\x20<<\x208,\x20'+'1u));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20vb'+'\x20=\x20(vec3u('+'bits)\x20>>\x20v'+'ec3u(21,\x201'+'0,\x200))\x20&\x20v'+'ec3u(0x7ff'+'u,\x200x7ffu,'+'\x200x3ffu);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec3f'+'(vb)\x20/\x20vec'+'3f(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20f'+'n\x20readColo'+'r(source:\x20'+'ptr<functi'+'on,\x20SplatS'+'ource>)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'baseSample'+':\x20vec4f\x20=\x20'+'mix(unifor'+'m.sh0_mins'+',\x20uniform.'+'sh0_maxs,\x20'+'textureLoa'+'d(sh0,\x20sou'+'rce.uv,\x200)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20base\x20'+'=\x20vec4f(ve'+'c3f(0.5)\x20+'+'\x20baseSampl'+'e.xyz\x20*\x20SH'+'_C0,\x201.0\x20/'+'\x20(1.0\x20+\x20ex'+'p(-baseSam'+'ple.w)));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20extract\x20'+'spherical\x20'+'harmonics\x20'+'palette\x20in'+'dex\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20labe'+'lSample:\x20v'+'ec2i\x20=\x20vec'+'2i(texture'+'Load(sh_la'+'bels,\x20sour'+'ce.uv,\x200).'+'xy\x20*\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20n\x20=\x20l'+('abelSample'+'.x\x20+\x20label'+'Sample.y\x20*'+'\x20256;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hSample:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(s'+'h_result,\x20'+'vec2i(n\x20%\x20'+'64,\x20n\x20/\x2064'+'),\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'h:\x20vec3f\x20='+'\x20(unpackRg'+'b(shSample'+')\x20-\x20vec3f('+'0.5))\x20*\x204.'+'0;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(base.'+'xyz\x20+\x20sh,\x20'+'base.w);\x0a\x20'+'\x20\x20\x20}\x0a'),PA=(_0x5e1af7,_0x563572)=>{for(const _0x57b1ff in _0x563572)_0x5e1af7['resolve'](_0x57b1ff)['setValue'](_0x563572[_0x57b1ff]);};class MA extends ys{constructor(){super(...arguments),h(this,'executeCal'+'lback',null);}['execute'](){var _0x5aea8b;(_0x5aea8b=this['executeCal'+'lback'])==null||_0x5aea8b['call'](this);}}const W_=new te(),ao=new D();class DA{constructor(_0x4febea,_0x2ed204){h(this,'prevDir',new D()),h(this,'updateMode','enable'),(this['device']=_0x4febea,this['gsplatInst'+'ance']=_0x2ed204);const {resource:_0x3b68c5}=_0x2ed204,_0x5ee66f=new Map(Ce['get'](_0x4febea,_0x4febea['isWebGPU']?'wgsl':'glsl'));this['shader']=$t['createShad'+'er'](_0x4febea,{'uniqueName':'gsplatReso'+'lveSH','vertexGLSL':TA,'fragmentGLSL':wA,'vertexWGSL':EA,'fragmentWGSL':bA,'vertexIncludes':_0x5ee66f,'fragmentIncludes':_0x5ee66f,'fragmentDefines':new Map([['SH_BANDS',_0x3b68c5['gsplatData']['shBands']['toString']()]]),'attributes':{'vertex_position':Pe}}),this['texture']=_0x3b68c5['createText'+'ure']('centroids',Ne,new J(0x105f+-0x1374+0x355,-0x14a8+0x6e1+-0x7b*-0x25)),this['renderTarg'+'et']=new gt({'colorBuffer':this['texture'],'depth':!(-0x1d9f*0x1+0x1852*0x1+-0x54e*-0x1)}),this['renderPass']=new MA(_0x4febea),this['renderPass']['init'](this['renderTarg'+'et'],{}),this['renderPass']['colorOps']['clear']=!(-0xd3*0x2c+-0x2346+-0x23c5*-0x2),this['quadRender']=new rh(this['shader']);const {material:_0x420e17}=_0x2ed204;_0x420e17['setDefine']('SH_BANDS','0');const {shaderChunks:_0x3a0508}=_0x420e17;_0x3a0508['glsl']['set']('gsplatSogs'+'ColorVS',AA),_0x3a0508['wgsl']['set']('gsplatSogs'+'ColorVS',CA),_0x420e17['update'](),_0x4febea['scope']['resolve']('sh_result')['setValue'](this['texture']);}['destroy'](){const {gsplatInstance:_0x29bcac}=this,{material:_0x41cfe3}=_0x29bcac;_0x41cfe3['setDefine']('SH_BANDS',_0x29bcac['resource']['gsplatData']['shBands']['toString']());const {shaderChunks:_0x1de7b2}=_0x41cfe3;_0x1de7b2['glsl']['delete']('gsplatSogs'+'ColorVS'),_0x1de7b2['wgsl']['delete']('gsplatSogs'+'ColorVS'),_0x41cfe3['update'](),this['quadRender']['destroy'](),this['renderPass']['destroy'](),this['renderTarg'+'et']['destroy'](),this['texture']['destroy'](),this['shader']['destroy']();}['render'](_0x13d4f2,_0x1efbf0){const {prevDir:_0x130b8a,updateMode:_0x210fc0}=this;if(_0x210fc0==='disable'||(W_['invert'](_0x1efbf0),W_['transformV'+'ector'](_0x13d4f2['forward'],ao),ao['normalize'](),_0x210fc0==='enable'&&ao['equalsAppr'+'ox'](_0x130b8a,0x21a9+0x1*-0x19b5+-0x4*0x1fd+0.001)))return;_0x130b8a['copy'](ao);const _0x3d934e=()=>{const {device:_0x241d3e}=this,{sh_centroids:_0xcfcfa6,meta:_0x2f9eaa}=this['gsplatInst'+'ance']['resource']['gsplatData'];PA(_0x241d3e['scope'],{'dir':ao['toArray'](),'centroids':_0xcfcfa6,'shN_mins':_0x2f9eaa['shN']['mins'],'shN_maxs':_0x2f9eaa['shN']['maxs']}),_0x241d3e['setCullMod'+'e'](bt),_0x241d3e['setDepthSt'+'ate'](Yt['NODEPTH']),_0x241d3e['setStencil'+'State'](null,null),_0x241d3e['setBlendSt'+'ate'](pt['NOBLEND']),this['quadRender']['render']();};this['renderPass']['executeCal'+'lback']=_0x3d934e,this['renderPass']['render']();}}const IA='\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20means_l'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20means_'+'u;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20quats'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20scales'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20uint\x20n'+'umSplats;\x0a'+'\x0a\x20\x20\x20\x20uint\x20'+'packU32(ve'+'c4\x20v)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20uint(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u\x20|\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20uint('+'v.y\x20*\x20255.'+'0)\x20<<\x2016u\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uin'+'t(v.z\x20*\x2025'+'5.0)\x20<<\x208u'+'\x20|\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(v.w\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20uv'+'ec4\x20packU3'+'2(vec4\x20a,\x20'+'vec4\x20b,\x20ve'+'c4\x20c,\x20vec4'+'\x20d)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uvec4(pac'+'kU32(a),\x20p'+'ackU32(b),'+'\x20packU32(c'+'),\x20packU32'+'(d));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20w\x20='+'\x20int(textu'+'reSize(mea'+'ns_l,\x200).x'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ivec2\x20uv\x20'+'=\x20ivec2(gl'+'_FragCoord'+'.xy);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(ui'+'nt(uv.x\x20+\x20'+'uv.y\x20*\x20w)\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansLSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_l,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansUSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_u,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20quatsSamp'+'le\x20=\x20texel'+'Fetch(quat'+'s,\x20uv,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20scales'+'Sample\x20=\x20t'+'exelFetch('+'scales,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shLabel'+'sSample\x20=\x20'+'texelFetch'+'(sh_labels'+',\x20uv,\x200).x'+('y;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20pcFragCo'+'lor0\x20=\x20pac'+'kU32(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansLS'+'ample,\x20shL'+'abelsSampl'+'e.x),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansUS'+'ample,\x20shL'+'abelsSampl'+'e.y),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(quatsSa'+'mple),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4(scales'+'Sample,\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20}\x0a'),LA='\x0a\x20\x20\x20\x20var\x20m'+'eans_l:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20means_u'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20qua'+'ts:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'cales:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sh_label'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20numSpla'+'ts:\x20u32;\x0a\x0a'+'\x20\x20\x20\x20fn\x20pac'+'kU32(v:\x20ve'+'c4<f32>)\x20-'+'>\x20u32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(u32(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20(u3'+'2(v.y\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20\x20|\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(u32(v.z\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20u32(v.w'+'\x20*\x20255.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20packU'+'Vec32(a:\x20v'+'ec4<f32>,\x20'+'b:\x20vec4<f3'+'2>,\x20c:\x20vec'+'4<f32>,\x20d:'+'\x20vec4<f32>'+')\x20->\x20vec4<'+'u32>\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4<u32'+'>(packU32('+'a),\x20packU3'+'2(b),\x20pack'+'U32(c),\x20pa'+'ckU32(d));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20@fragmen'+'t\x0a\x20\x20\x20\x20fn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20w:\x20u32\x20'+'=\x20textureD'+'imensions('+'means_l,\x200'+').x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2<u32>'+'\x20=\x20vec2<u3'+'2>(pcPosit'+'ion.xy);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv.x\x20+\x20uv'+'.y\x20*\x20w\x20>=\x20'+'uniform.nu'+'mSplats)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20fetch\x20the'+'\x20source\x20in'+'dex\x20and\x20ca'+'lculate\x20so'+'urce\x20uv\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'meansLSamp'+'le:\x20vec3<f'+('32>\x20=\x20text'+'ureLoad(me'+'ans_l,\x20uv,'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20meansUSam'+'ple:\x20vec3<'+'f32>\x20=\x20tex'+'tureLoad(m'+'eans_u,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20quatsSam'+'ple:\x20vec4<'+'f32>\x20=\x20tex'+'tureLoad(q'+'uats,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20scal'+'esSample:\x20'+'vec3<f32>\x20'+'=\x20textureL'+'oad(scales'+',\x20uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shLa'+'belsSample'+':\x20vec2<f32'+'>\x20=\x20textur'+'eLoad(sh_l'+'abels,\x20uv,'+'\x200).xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20packUVec'+'32(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansLSam'+'ple,\x20shLab'+'elsSample.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansUSam'+'ple,\x20shLab'+'elsSample.'+'y),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(quatsSamp'+'le),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4(scalesSa'+'mple,\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a'),yn=0x101f*-0x2+0x131*0xf+-0xd*-0x11b+0.28209479177387814,Ci=_0x1f2aef=>_0x1f2aef['read'](-0x18*-0x187+-0x1be9+-0x1*0x8bf,0x1*0x376+-0x26f2+0x237c,_0x1f2aef['width'],_0x1f2aef['height'],{'mipLevel':0x0,'face':0x0,'immediate':!(-0x2613+0x25f3+-0x1*-0x20)}),RA=(_0x4ee28c,_0x76ef89)=>{for(const _0xc7d2d5 in _0x76ef89)_0x4ee28c['resolve'](_0xc7d2d5)['setValue'](_0x76ef89[_0xc7d2d5]);};class OA{constructor(_0x426957,_0x130191,_0x33da78,_0x2c685e,_0x398c57,_0x3b2fe2){const _0x57c8e8=(_0x11fc84,_0x2fd7c6,_0x4fd78c)=>_0x11fc84*(-0x1*0xaba+-0x252b+-0x17f3*-0x2-_0x4fd78c)+_0x2fd7c6*_0x4fd78c,{meta:_0x19fc6e}=_0x426957,{means:_0x2e37d3,scales:_0x21f407,sh0:_0x3403ce,shN:_0x4581e7}=_0x19fc6e,_0xd5a0e7=_0x130191&&_0x426957['means_l']['_levels'][-0x11bf+-0x1dae+0x2f6d],_0x116353=_0x130191&&_0x426957['means_u']['_levels'][0x2*-0xacf+0x254f+-0xfb1],_0xda12eb=_0x33da78&&_0x426957['quats']['_levels'][0x7*0xec+-0x1cba+-0x2*-0xb23],_0x2dfe67=_0x2c685e&&_0x426957['scales']['_levels'][0x174*0x9+0xbc7+0x3f*-0x65],_0x46d211=_0x398c57&&_0x426957['sh0']['_levels'][0x205f+-0x13b4+-0xcab],_0x475086=_0x3b2fe2&&_0x426957['sh_labels']['_levels'][-0x1*-0x1bea+0xb0*0x4+-0x2*0xf55],_0x51e20e=_0x3b2fe2&&_0x426957['sh_centroi'+'ds']['_levels'][0x18ff+-0x1f61+-0x1*-0x662],_0xa04246=(-0x1*0x18d9+0x17*-0x116+0x31d5)/Math['sqrt'](-0x1399+-0x92e+0x1cc9*0x1);this['read']=_0x42fba1=>{if(_0x130191){const _0x57e7b3=_0x57c8e8(_0x2e37d3['mins'][0x94*0x40+0x1*-0x2177+0xb5*-0x5],_0x2e37d3['maxs'][-0x11e8*0x2+0x8c2+0x1b0e],((_0x116353[_0x42fba1*(0x1149+-0xccb+-0x47a)+(-0x61*0x2f+-0x1d3*0xb+0x328*0xc)]<<0x13d5+-0x2*-0x29b+-0x1903*0x1)+_0xd5a0e7[_0x42fba1*(0x4ff*-0x1+0x949+-0x446)+(-0x1*0x2276+-0xb98*-0x3+-0x1*0x52)])/(-0x127ef+0x1d093+-0x1*-0x575b)),_0x2e1386=_0x57c8e8(_0x2e37d3['mins'][0x1*-0x25ab+0x1fa9+0x603],_0x2e37d3['maxs'][-0x1f*-0x99+0x131*-0xb+0x56b*-0x1],((_0x116353[_0x42fba1*(-0x1*0x213f+-0x217+0x235a)+(-0x55b*0x5+0x85d+0x126b)]<<-0x2688+0xa39+0x1c57)+_0xd5a0e7[_0x42fba1*(0xd45+-0x10c1+0x380)+(0xf93+0x12e0+0x1*-0x2272)])/(-0x3652+0x21e2*0x7+0x4923)),_0x570cc7=_0x57c8e8(_0x2e37d3['mins'][-0x3e5*0x2+-0x2067+0x2833],_0x2e37d3['maxs'][-0x12af*-0x2+-0x2472+-0x2*0x75],((_0x116353[_0x42fba1*(0x241c+0x1*0xe89+0xd*-0x3e5)+(0xd09*-0x2+0x18be+0x156)]<<-0x26ab+0x8d2+0x1*0x1de1)+_0xd5a0e7[_0x42fba1*(-0x2549*-0x1+0x2*-0x5c6+-0x525*0x5)+(0x30b*0x1+0xc44+-0xf4d)])/(0xd4cc*0x1+-0x2*-0x5f57+-0x347*0x2d));_0x130191['x']=Math['sign'](_0x57e7b3)*(Math['exp'](Math['abs'](_0x57e7b3))-(0x17*0xb2+-0x1837+0x83a)),_0x130191['y']=Math['sign'](_0x2e1386)*(Math['exp'](Math['abs'](_0x2e1386))-(-0x24db+0x1*0xc5d+0x187f*0x1)),_0x130191['z']=Math['sign'](_0x570cc7)*(Math['exp'](Math['abs'](_0x570cc7))-(0x1*-0xa91+0x20ff+-0x166d));}if(_0x33da78){const _0x1e7906=(_0xda12eb[_0x42fba1*(0x18d4+-0x1eab+0x1*0x5db)+(0x1*0x593+-0x2d*0x4e+0x823)]/(0x2352+0x15ee+-0x3841)-(0x703*-0x4+-0x13*-0x98+-0x94*-0x1d+0.5))*_0xa04246,_0x4fa01b=(_0xda12eb[_0x42fba1*(-0xded+-0x8b*-0x17+0x3*0x7c)+(-0x2136*0x1+-0x29*-0x8b+0xaf4*0x1)]/(0x2111+-0x38c*0x4+-0xe*0x147)-(0xa01*-0x1+0x1*-0x847+-0x924*-0x2+0.5))*_0xa04246,_0x3a0c1a=(_0xda12eb[_0x42fba1*(0xd*0x1b7+-0x1fce+0x987)+(-0x2*0xa0b+-0x277*0xe+0x369a)]/(-0x276+0x17*0x14b+-0x692*0x4)-(0x1*0x11d7+0x39*0x6b+-0x1*0x29aa+0.5))*_0xa04246,_0x15a920=Math['sqrt'](Math['max'](-0xfe1+-0x216f+0x3150,0x11fe*-0x1+-0x1fb9*0x1+0x31b8-(_0x1e7906*_0x1e7906+_0x4fa01b*_0x4fa01b+_0x3a0c1a*_0x3a0c1a)));switch(_0xda12eb[_0x42fba1*(0x6*-0x11e+0x9*0xce+-0x86)+(0xe0+0x1d*-0x1e+0x3b*0xb)]-(0x1*0x1668+0x1997+0x1*-0x2f03)){case-0x2*0x34+0x47*-0x47+0x1419:_0x33da78['set'](_0x1e7906,_0x4fa01b,_0x3a0c1a,_0x15a920);break;case-0xa*-0x394+0x1dc1+-0x1062*0x4:_0x33da78['set'](_0x15a920,_0x4fa01b,_0x3a0c1a,_0x1e7906);break;case 0x2205+-0x9*-0x2d1+-0x3b5c:_0x33da78['set'](_0x4fa01b,_0x15a920,_0x3a0c1a,_0x1e7906);break;case 0x23a6+0x1f09+-0x22*0x1f6:_0x33da78['set'](_0x4fa01b,_0x3a0c1a,_0x15a920,_0x1e7906);break;}}if(_0x2c685e){const _0x4951b4=_0x57c8e8(_0x21f407['mins'][0x1580+-0x2*0x76e+-0x6a4],_0x21f407['maxs'][0x230e+0x4af+-0x1*0x27bd],_0x2dfe67[_0x42fba1*(0x19ff+0xdfd*-0x2+0x1ff)+(-0x1d70+0x2*-0x25e+0x222c)]/(0x1*0xb75+0xd33+-0x17a9)),_0x460f5a=_0x57c8e8(_0x21f407['mins'][0x21ba+0x1*0x46b+-0x989*0x4],_0x21f407['maxs'][0x18e*-0x4+-0x1d*-0x73+0x1*-0x6ce],_0x2dfe67[_0x42fba1*(0x1*0x18ea+0xc70+-0x2556)+(0x4ee*0x1+0x1*-0x65b+-0x6*-0x3d)]/(-0xd0f*0x2+0x1487*0x1+0x1*0x696)),_0x287744=_0x57c8e8(_0x21f407['mins'][-0x270e+-0x1455+0x3b65],_0x21f407['maxs'][0x2f*-0xbf+0x1730+0xbe3],_0x2dfe67[_0x42fba1*(-0x24b8+0x3da+0x20e2)+(-0x3f8*0x7+-0x1385*-0x2+-0x28*0x48)]/(0x628*-0x4+0x1efe+-0x55f));_0x2c685e['set'](_0x4951b4,_0x460f5a,_0x287744);}if(_0x398c57){const _0xdde9a8=_0x57c8e8(_0x3403ce['mins'][-0xd78*-0x1+-0x1411+0x699],_0x3403ce['maxs'][-0x6b*-0x59+-0x1*-0x13fd+-0x1310*0x3],_0x46d211[_0x42fba1*(0x257f*-0x1+0x5e*-0x2b+0x354d)+(0x1*-0x9c1+-0x1e19+0x27da)]/(-0x1bde+-0x35e*-0x1+-0x3d*-0x6b)),_0x3defef=_0x57c8e8(_0x3403ce['mins'][-0x6b9*-0x1+0x6d3*-0x1+0x1b],_0x3403ce['maxs'][-0x955+-0x231c+0x2c72],_0x46d211[_0x42fba1*(-0x1*-0xfa1+-0x86b*-0x1+-0x1808)+(0x1460+-0x1b4c+0x1*0x6ed)]/(-0xb28+-0x121c+0x1e43)),_0x2b4c2f=_0x57c8e8(_0x3403ce['mins'][0x2b3+-0xfd3+0x29*0x52],_0x3403ce['maxs'][-0x6f2+-0x22c*0xd+-0x10*-0x233],_0x46d211[_0x42fba1*(-0x1215+-0x4*0x5ad+-0x5*-0x829)+(-0x32*0x12+0x40e+-0x11*0x8)]/(0x11c2*-0x1+0x1a4a+0x1*-0x789)),_0x28c932=_0x57c8e8(_0x3403ce['mins'][-0x1b32+-0x2*0x343+-0x311*-0xb],_0x3403ce['maxs'][-0x1*-0x26f1+-0x200a+-0x3f*0x1c],_0x46d211[_0x42fba1*(-0x6d5+0x7c1+-0xe8)+(-0x3*0x24d+0x32*0x17+-0x26c*-0x1)]/(-0xa87+-0x7b*-0x3d+0x1*-0x11c9));_0x398c57['set'](0x235f+0x382*-0xb+0x1*0x337+0.5+_0xdde9a8*yn,0x2044+-0x1*0x254b+0x507+0.5+_0x3defef*yn,0x1*0x266b+-0xd80+-0x18eb*0x1+0.5+_0x2b4c2f*yn,(0x1da5*-0x1+-0xbca+-0x374*-0xc)/(-0x3e*0x21+0x2293+0x15*-0x144+Math['exp'](-_0x28c932)));}if(_0x3b2fe2){const _0x3dadc1=_0x475086[_0x42fba1*(-0x5+-0x1345+0x134e)+(0x1b1e+0x2dd*0x2+-0x20d8*0x1)]+(_0x475086[_0x42fba1*(0x10a*0x14+0x250e+0x1ce9*-0x2)+(0x8*0xae+-0x106+-0x469*0x1)]<<-0xeda*-0x1+-0xf88+0xb6),_0x1eee80=_0x3dadc1%(0xf62+-0x1b92*-0x1+-0x2ab4)*(-0x58*-0x1d+0x102a+-0x1a13),_0x1bc510=Math['floor'](_0x3dadc1/(0x959*0x1+0x1555+0xa*-0x30b));for(let _0x136cda=-0x2*-0xe3f+-0x335+-0x1*0x1949;_0x136cda<0x1d75+-0xf3c+-0x1*0xe36;++_0x136cda)for(let _0x51d607=0x1*-0x113+-0xeb6+0xfc9;_0x51d607<0xeb*0x3+0x1fd6+0x82*-0x44;++_0x51d607)_0x3b2fe2[_0x136cda*(-0x2487+0xd7f+0x101*0x17)+_0x51d607]=_0x57c8e8(_0x4581e7['mins'],_0x4581e7['maxs'],_0x51e20e[(_0x1eee80+_0x51d607)*(0xd47*-0x2+-0x2a9*-0xa+-0x8)+_0x136cda+_0x1bc510*_0x426957['sh_centroi'+'ds']['width']*(0x1*0x368+0x1*-0x26b3+-0x83*-0x45)]/(-0x555+-0x3f*-0x54+-0x6c*0x22));}};}}class FA{constructor(){h(this,'meta'),h(this,'numSplats'),h(this,'means_l'),h(this,'means_u'),h(this,'quats'),h(this,'scales'),h(this,'sh0'),h(this,'sh_centroi'+'ds'),h(this,'sh_labels'),h(this,'packedText'+'ure');}['destroy'](){var _0x2ccf8a,_0x4f2fa1,_0x957cbb,_0x3f0a65,_0x477ab7,_0x5cc939,_0x56b67a,_0x135c3d;(_0x2ccf8a=this['means_l'])==null||_0x2ccf8a['destroy'](),(_0x4f2fa1=this['means_u'])==null||_0x4f2fa1['destroy'](),(_0x957cbb=this['quats'])==null||_0x957cbb['destroy'](),(_0x3f0a65=this['scales'])==null||_0x3f0a65['destroy'](),(_0x477ab7=this['sh0'])==null||_0x477ab7['destroy'](),(_0x5cc939=this['sh_centroi'+'ds'])==null||_0x5cc939['destroy'](),(_0x56b67a=this['sh_labels'])==null||_0x56b67a['destroy'](),(_0x135c3d=this['packedText'+'ure'])==null||_0x135c3d['destroy']();}['createIter'](_0x37420e,_0x23cd76,_0x6977d1,_0x37037c,_0x1a4b40){return new OA(this,_0x37420e,_0x23cd76,_0x6977d1,_0x37037c,_0x1a4b40);}['calcAabb'](_0x7ee8f9){const {mins:_0x5378f4,maxs:_0x505a9f}=this['meta']['means'],_0x511617=_0x5788dc=>Math['sign'](_0x5788dc)*(Math['exp'](Math['abs'](_0x5788dc))-(-0x17b1+0x1084+0x72e*0x1));_0x7ee8f9['center']['set']((_0x511617(_0x5378f4[-0x7*-0x71+-0x2f5*-0x5+-0x11e0])+_0x511617(_0x505a9f[-0x83*0x18+0x2bd*-0x5+-0x1*-0x19f9]))*(-0xf75+0x2*0x10d3+-0x1231+0.5),(_0x511617(_0x5378f4[-0x26df+-0x17cb*0x1+0x3eab*0x1])+_0x511617(_0x505a9f[0x63*-0x9+0x14a6+0x2*-0x895]))*(-0x5*0x112+0x35*-0x1+0x58f+0.5),(_0x511617(_0x5378f4[-0x179f+-0x9e4+0x2185*0x1])+_0x511617(_0x505a9f[-0x4*0x396+0x1c04+0x247*-0x6]))*(-0x24*-0xb5+0x11*-0x21a+0xa46+0.5)),_0x7ee8f9['halfExtent'+'s']['set']((_0x511617(_0x505a9f[0x2070+0x787+0x1*-0x27f7])-_0x511617(_0x5378f4[-0x1a9f+-0x959+0x23f8]))*(0x5*0x4a3+0x2544+-0x3c73+0.5),(_0x511617(_0x505a9f[-0x7a*0x1+-0x10a3*0x2+-0x1*-0x21c1])-_0x511617(_0x5378f4[-0x25a6+-0x2*0x134b+0x1d*0x2a1]))*(0x1b9+0xeb*-0x14+0x10a3+0.5),(_0x511617(_0x505a9f[-0x26e2*-0x1+-0x1*0x1e09+-0x8d7])-_0x511617(_0x5378f4[-0x5*-0x2a9+0x1572+-0x22bd]))*(0x1*0x13eb+-0x3d9+-0xf2*0x11+0.5));}['getCenters'](_0x49377b){const {meta:_0x5677de,means_l:_0x1fc883,means_u:_0x86f8f0,numSplats:_0x33dac}=this,{means:_0x43d8c8}=_0x5677de,_0x289232=new Uint32Array(_0x86f8f0['_levels'][0x1aa4+-0x3de+-0x16c6]['buffer']),_0xebc912=new Uint32Array(_0x1fc883['_levels'][0x10a+-0x8*-0x316+-0x19ba]['buffer']),_0x4f9087=_0x43d8c8['mins'][-0x404+-0x12ac+-0x16b*-0x10]/(-0x9f*-0x1f1+0x1*-0xfd97+0xc8e7*0x1),_0x5bab77=_0x43d8c8['mins'][-0x535*0x5+0x1e00+-0x3f6]/(-0x3e89+0x5*-0xc5f+0x17c63),_0x22c547=_0x43d8c8['mins'][0x223c+0x16aa+-0x38e4]/(-0x47fc+0x1042*0x14+0x2d3),_0x290df0=_0x43d8c8['maxs'][-0x4*0x7fb+-0x61c*0x1+0x2608]/(0x58c1*0x1+-0x3*-0x8ba9+0x5*-0x3259),_0x397333=_0x43d8c8['maxs'][-0x9d*-0x21+-0x80d+0x1*-0xc2f]/(-0x6289+-0x17fdf+-0x2e267*-0x1),_0x504f11=_0x43d8c8['maxs'][0xa8f+0x1*-0xc49+0x6*0x4a]/(-0x1072c*0x1+-0x1*0x19356+0x39a81);for(let _0x18bc5e=0x70a+-0x142d+-0x1*-0xd23;_0x18bc5e<_0x33dac;_0x18bc5e++){const _0x2e7a82=_0x18bc5e,_0x3c9b1e=_0x289232[_0x2e7a82],_0x18453c=_0xebc912[_0x2e7a82],_0x17c08c=_0x3c9b1e<<-0x1668+0x57d+0x10f3&-0xd*0xcef+-0x19d4d+0x34470|_0x18453c&-0x16f*0x1b+-0x1a9d+0x4251*0x1,_0xc7695e=_0x3c9b1e&-0x366b*0x2+-0x15fe0+0x2cbb6|_0x18453c>>>0xfef+0x153e+-0x25*0x101&0x8*-0x101+-0x1fd*-0xf+0x4*-0x533,_0x4a2053=_0x3c9b1e>>>0xc5*-0xe+-0x2453+-0x1*-0x2f21&-0xd3*0x162+-0x1*-0x1c0d1+0x20a7*0x3|_0x18453c>>>-0x1*0xb14+-0x14ea*0x1+-0x16*-0x175&0x3*-0x915+0x157+0x61*0x47,_0x3b13cc=_0x4f9087*(-0x3*0x8c0b+-0x5a2*0x2e+0x3a73c-_0x17c08c)+_0x290df0*_0x17c08c,_0xa4661d=_0x5bab77*(-0x5*0x2add+0x115f7+-0x1*-0xc059-_0xc7695e)+_0x397333*_0xc7695e,_0x4a978d=_0x22c547*(0x10739+0xa203+0xa93d*-0x1-_0x4a2053)+_0x504f11*_0x4a2053,_0x5a1664=_0x3b13cc<-0x497*0x1+0xbf+0x3d8?-_0x3b13cc:_0x3b13cc,_0x234517=_0xa4661d<0x95a+0x1*-0x592+-0x3c8*0x1?-_0xa4661d:_0xa4661d,_0x3e496f=_0x4a978d<0x9e6+0x1d46+-0x6d*0x5c?-_0x4a978d:_0x4a978d;_0x49377b[_0x18bc5e*(0x1f*0x1f+-0x26d0+0x2312)]=(_0x3b13cc<0x5*-0x5e5+-0x2614+-0x1*-0x438d?-(0xa3e+0x2*-0x8fd+-0x7*-0x11b):0x2*-0x115f+0x1f83+0x33c)*(Math['exp'](_0x5a1664)-(0x6bc*-0x4+0x1999+0x158)),_0x49377b[_0x18bc5e*(0x6*-0x62a+-0x20a9+0x6*0xb9c)+(-0x1*0x791+-0x1ba+-0x46*-0x22)]=(_0xa4661d<-0x497+-0x2636+-0x2acd*-0x1?-(0x183f+-0x2251*0x1+0xa13):-0x172f*0x1+0x1*-0x68a+0x1dba)*(Math['exp'](_0x234517)-(-0x212e+0x329*-0x1+0x2458)),_0x49377b[_0x18bc5e*(0x1*0x9ec+-0x1*-0x1dd+0x16*-0x89)+(-0x16*-0x5b+0xb13+-0x12e3)]=(_0x4a978d<0x1169+-0x1*0x113b+-0x1*0x2e?-(-0xa09+0x28*0x1c+0x5aa):-0xf3e+0xb91+0x3ae)*(Math['exp'](_0x3e496f)-(-0x15b*-0x1+0x2204+-0x235e));}}['calcFocalP'+'oint'](_0x95b77c,_0x3023d6){_0x95b77c['set'](-0x236c+0xa*0x38b+0x2*-0x1,0x1*0x16d9+-0x21*0x128+0xf4f,0x11*-0x1a7+0x1*-0x1717+0x332e);}get['isSogs'](){return!(0x14ad+0x48*-0x52+0x263);}get['shBands'](){var _0x4cffd9;return{0xc0:0x1,0x200:0x2,0x3c0:0x3}[(_0x4cffd9=this['sh_centroi'+'ds'])==null?void(0x1*0x1b01+-0x1149+-0x9b8):_0x4cffd9['width']]??0x7*-0x3fb+-0xd13+0x418*0xa;}async['decompress'](){const _0x5a1c35=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3'],{shBands:_0xf381a2}=this,{means_l:_0x3f3428,means_u:_0xacb72c,quats:_0x2181e4,scales:_0x2b2ff0,sh0:_0x1b0dab,sh_labels:_0x59cf00,sh_centroids:_0x3350e0}=this;if(_0x3f3428['_levels'][-0x18*-0xf6+0x20c6+-0x37d6]=await Ci(_0x3f3428),_0xacb72c['_levels'][0x1d12+0x189e+-0x35b0*0x1]=await Ci(_0xacb72c),_0x2181e4['_levels'][-0x2601+0x17*0x1a5+0x2e]=await Ci(_0x2181e4),_0x2b2ff0['_levels'][0x95*-0x1+0x20da*0x1+-0x2ef*0xb]=await Ci(_0x2b2ff0),_0x1b0dab['_levels'][-0x9*-0xb9+0x4*-0x1a+0x1*-0x619]=await Ci(_0x1b0dab),_0xf381a2>0x1085+0xd04+0x1*-0x1d89){_0x59cf00['_levels'][0x1d62+-0x120e*0x2+0xe*0x7b]=await Ci(_0x59cf00),_0x3350e0['_levels'][-0x4*0x19d+-0x72*-0x1d+0x33b*-0x2]=await Ci(_0x3350e0);const _0x3a1a38=[];for(let _0x2aa84a=-0x2*0xc68+-0xa*0x2e2+-0x4*-0xd69;_0x2aa84a<-0x4ef*-0x2+0x3d0+-0xd81;++_0x2aa84a)_0x3a1a38['push']('f_rest_'+_0x2aa84a);_0x5a1c35['splice'](_0x5a1c35['indexOf']('f_dc_0')+(-0x1d2f+0x1*0x829+0x1507),-0x1*-0x264b+-0x23e5+-0x2*0x133,..._0x3a1a38);}const _0x232488={};_0x5a1c35['forEach'](_0x1d7df7=>{_0x232488[_0x1d7df7]=new Float32Array(this['numSplats']);});const _0x32c2c4=new D(),_0x2cb22=new le(),_0x5db5b1=new D(),_0x345b4d=new re(),_0x495b61=_0xf381a2>-0x22ff+0x1*0x1450+0xeaf?new Float32Array(0x155b+0x3*-0x43b+-0x87d):null,_0x51b7b1=this['createIter'](_0x32c2c4,_0x2cb22,_0x5db5b1,_0x345b4d,_0x495b61);for(let _0x45689a=0x95*0x40+-0x1a*0x13a+-0x55c;_0x45689a<this['numSplats'];++_0x45689a)if(_0x51b7b1['read'](_0x45689a),_0x232488['x'][_0x45689a]=_0x32c2c4['x'],_0x232488['y'][_0x45689a]=_0x32c2c4['y'],_0x232488['z'][_0x45689a]=_0x32c2c4['z'],_0x232488['rot_1'][_0x45689a]=_0x2cb22['x'],_0x232488['rot_2'][_0x45689a]=_0x2cb22['y'],_0x232488['rot_3'][_0x45689a]=_0x2cb22['z'],_0x232488['rot_0'][_0x45689a]=_0x2cb22['w'],_0x232488['scale_0'][_0x45689a]=_0x5db5b1['x'],_0x232488['scale_1'][_0x45689a]=_0x5db5b1['y'],_0x232488['scale_2'][_0x45689a]=_0x5db5b1['z'],_0x232488['f_dc_0'][_0x45689a]=(_0x345b4d['x']-(0x6*-0x11f+0x16aa+0x18*-0xaa+0.5))/yn,_0x232488['f_dc_1'][_0x45689a]=(_0x345b4d['y']-(0x1*0xd27+0x6*0x459+0x23*-0x11f+0.5))/yn,_0x232488['f_dc_2'][_0x45689a]=(_0x345b4d['z']-(0x22b3+0xbcb*-0x3+0x6*0x1d+0.5))/yn,_0x232488['opacity'][_0x45689a]=_0x345b4d['w']<=0x2*0x569+0x253+0xd25*-0x1?-(0x14be+0x5*-0x311+-0x10d*0x5):_0x345b4d['w']>=-0x7f5+-0x431*-0x2+-0x6c?-0x139e+0x1919*0x1+-0x553:-Math['log']((-0x1d+0x58*-0x2+0xce)/_0x345b4d['w']-(0x27*-0xd+0x13d7+-0x11db)),_0x495b61){for(let _0x57bbec=0xa5f*-0x1+-0x1baf+0x1*0x260e;_0x57bbec<-0x24c0+-0x233+-0x1*-0x2720;++_0x57bbec)_0x232488['f_rest_'+_0x57bbec][_0x45689a]=_0x495b61[_0x57bbec];}return new zn([{'name':'vertex','count':this['numSplats'],'properties':_0x5a1c35['map'](_0x4c5822=>({'name':_0x4c5822,'type':'float','byteSize':0x4,'storage':_0x232488[_0x4c5822]}))}]);}['packGpuMem'+'ory'](){const {means_l:_0x41f8e,means_u:_0x35b361,quats:_0x361c7a,scales:_0x499e93,sh_labels:_0x15f488,numSplats:_0x287496}=this,{device:_0x35691f}=_0x41f8e,{scope:_0x2a26ee}=_0x35691f,_0x42636a=$t['createShad'+'er'](_0x35691f,{'uniqueName':'GsplatSogs'+'ReorderSha'+'der','attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentGLSL':IA,'fragmentWGSL':LA,'fragmentOutputTypes':['uvec4']}),_0x552e23=new gt({'colorBuffer':this['packedText'+'ure'],'depth':!(-0x7ed+-0x20dc+-0xe3*-0x2e),'mipLevel':0x0});_0x35691f['setCullMod'+'e'](bt),_0x35691f['setBlendSt'+'ate'](pt['NOBLEND']),_0x35691f['setDepthSt'+'ate'](Yt['NODEPTH']),RA(_0x2a26ee,{'means_l':_0x41f8e,'means_u':_0x35b361,'quats':_0x361c7a,'scales':_0x499e93,'sh_labels':_0x15f488??_0x41f8e,'numSplats':_0x287496}),Tr(_0x35691f,_0x552e23,_0x42636a),_0x552e23['destroy'](),_0x42636a['destroy']();}async['prepareGpu'+'Data'](){const {device:_0x41c4f3,height:_0x3a8f6b,width:_0xb49538}=this['means_l'];this['means_l']['_levels'][0x1912+-0x1ca2+-0x4*-0xe4]=await Ci(this['means_l']),this['means_u']['_levels'][0x262+-0xfe2+0x120*0xc]=await Ci(this['means_u']),this['packedText'+'ure']=new _e(_0x41c4f3,{'name':'sogsPacked'+'Texture','width':_0xb49538,'height':_0x3a8f6b,'format':Ue,'mipmaps':!(0x8c9*0x2+0x432+-0x15c3)}),_0x41c4f3['on']('devicerest'+'ored',()=>{this['packGpuMem'+'ory']();}),this['packGpuMem'+'ory']();}['reorderDat'+'a'](){return this['prepareGpu'+'Data']();}}async function NA(){let _0x4db5d0=null,_0x18bb67=null,_0x38fb00=null,_0x57d297=null,_0x1a8ad7=null,_0x10ed01=null,_0x49c343=null,_0x2d9ed6=null,_0x38fad1=null,_0x4bdbe0=null,_0x1319d9=null,_0x3ccdc0=null,_0x5bf7d1=null,_0xb5dff0=null,_0x3af5f2=null,_0x1c07af=null,_0x11353c=null,_0x47e0c3=null,_0x4bfed1=null,_0x307617=null,_0x3548c2=null,_0x5e0522=null,_0x1e7cec=null,_0x16ca38=null,_0x57d25f=Float32Array['BYTES_PER_'+'ELEMENT'],_0x310602=Uint32Array['BYTES_PER_'+'ELEMENT'],_0x7f9598=-0x23*-0xef+-0x2*-0x7ef+-0x308b,_0x779c9d=!(-0x1*-0x29f+0xc*0xa6+0xa67*-0x1),_0x5581b6,_0x1eb840,_0x381604={'x':0x0,'y':0x0,'z':0x0},_0x300bf7={'x':0x0,'y':0x0,'z':0x0},_0x8b2983=!(0x52e*0x2+-0x1*-0x1a0f+-0x246b),_0x2a1f08=!(-0x2c5+-0x78*0x29+-0x1b1*-0xd),_0x2636ff=!(-0x1c95+-0xb89+0x281f),_0x4bcf36=!(-0x1b8f+-0x4*0x466+0x2d28),_0x14147f=-0x37*-0x6+0x503+-0x1*0x64d,_0x2e7d1b=-0x193a*0x1+0x5*0x4ab+0x1e3,_0x2bc50b=!(-0x1*0x269f+0xded+0x18b3*0x1),_0x5d35b4=null,_0x588513=!(0x67*0xa+0x1816*-0x1+0x1411),_0x51c8b0=0x17ee+0x12*-0xe2+-0x80a,_0x1c3e7c=-0x4b3*-0x2+0x74e+0x2*-0x85a,_0x396d1={'x':0x0,'y':0x0,'z':0x0},_0x9224ae={'x':0x0,'y':0x0,'z':0x0},_0x15ca1f,_0x321376;self['onmessage']=async _0x1223d5=>{const {data:_0x179bfe}=_0x1223d5;switch(_0x179bfe['type']){case'initWorker':await _0x2f8469(_0x179bfe['sortWasmUr'+'l']),self['postMessag'+'e']({'type':'initialize'+'d'});break;case'initData':if(_0x7f9598=_0x179bfe['centers']['length']/(-0x12cb+-0xe08+0x579*0x6),_0x7f9598<=0x8ed+-0xcbc+0x3cf||!_0x18bb67)return;_0x129e7a(),_0x779c9d=_0x179bfe['is4d'],_0x15ca1f=_0x179bfe['id'];const _0x2a3284=_0x5631f9(_0x7f9598);if(_0x2c8570(_0x2a3284),_0x38fb00[-0x1eaa+0x1cac+0x1fe]=_0x396d1['x'],_0x38fb00[-0xa77+0x1f*0x130+-0x696*0x4]=_0x396d1['y'],_0x38fb00[0x291*0xd+0xdf8+-0x2f53]=_0x396d1['z'],_0x57d297[-0x1f9e+-0x18f3*0x1+0x3891]=_0x9224ae['x'],_0x57d297[-0x4*-0x5ae+-0xe*0x1f+-0x1505]=_0x9224ae['y'],_0x57d297[-0x3*0x8a2+-0x36a+0x1d52]=_0x9224ae['z'],_0x10ed01&&_0x179bfe['centers']&&_0x10ed01['length']===_0x179bfe['centers']['length']){const _0x4d6c39=new Float32Array(_0x179bfe['centers']);_0x10ed01['set'](_0x4d6c39);}if(_0x2d9ed6&&_0x179bfe['timeIndex']&&_0x2d9ed6['length']===_0x179bfe['timeIndex']['length']){const _0x11c58a=new Uint32Array(_0x179bfe['timeIndex']);_0x2d9ed6['set'](_0x11c58a);}if(_0x1319d9&&_0x179bfe['motion']&&_0x1319d9['length']===_0x179bfe['motion']['length']){const _0x44e96d=new Float32Array(_0x179bfe['motion']);_0x1319d9['set'](_0x44e96d);}if(_0x779c9d&&_0x38fad1&&_0x4bdbe0&&_0x179bfe['muT']&&_0x179bfe['tScale']&&_0x38fad1['length']===_0x179bfe['muT']['length']&&_0x4bdbe0['length']===_0x179bfe['tScale']['length']&&(_0x38fad1['set'](_0x179bfe['muT']),_0x4bdbe0['set'](_0x179bfe['tScale'])),_0x49c343){for(let _0x30eb9d=0x79+0x1*-0xd99+0xa0*0x15;_0x30eb9d<_0x49c343['length'];++_0x30eb9d)_0x49c343[_0x30eb9d]=_0x30eb9d;}_0x1a8ad7&&_0x179bfe['timeOption']&&_0x1a8ad7['set'](_0x179bfe['timeOption']),_0x4bd408(),_0x588513=!(0xaa3+0x1*-0x1295+0x7f2),_0x2636ff=!(0x7db+-0x1*0xaaf+0x2d4),_0x591fc5();break;case'setTime':_0x5581b6=_0x179bfe['time'],_0x591fc5();break;case'setUseTemp'+'oralSort':_0x8b2983=_0x179bfe['useTempora'+'lSort'];break;case'setUseDyna'+'micSort':_0x2a1f08=_0x179bfe['useDynamic'+'Sort'];break;case'sort':if(!_0x38fb00)return;_0x38fb00[0x1cf3*0x1+0x1796*0x1+0x3489*-0x1]=_0x179bfe['cameraPosi'+'tion']['x'],_0x38fb00[0x3ee+0x87e+-0xc6b]=_0x179bfe['cameraPosi'+'tion']['y'],_0x38fb00[-0x1f3a*-0x1+0x2445+0x437d*-0x1]=_0x179bfe['cameraPosi'+'tion']['z'],_0x57d297[-0x1*-0x24d1+-0x209*0x8+-0x1489]=_0x179bfe['cameraDire'+'ction']['x'],_0x57d297[0x1bb*0x13+-0x1b3a+-0x5a6]=_0x179bfe['cameraDire'+'ction']['y'],_0x57d297[-0x1*0x1206+0x2417*-0x1+0x32f*0x11]=_0x179bfe['cameraDire'+'ction']['z'],_0x396d1['x']=_0x179bfe['cameraPosi'+'tion']['x'],_0x396d1['y']=_0x179bfe['cameraPosi'+'tion']['y'],_0x396d1['z']=_0x179bfe['cameraPosi'+'tion']['z'],_0x9224ae['x']=_0x179bfe['cameraDire'+'ction']['x'],_0x9224ae['y']=_0x179bfe['cameraDire'+'ction']['y'],_0x9224ae['z']=_0x179bfe['cameraDire'+'ction']['z'],_0x591fc5();break;}};const _0x129e7a=()=>{_0x2e7d1b=Math['max'](0x37*-0x17+-0x4c1*0x1+-0x4*-0x26f,Math['min'](-0x1456+0x44f+0x7*0x24d,Math['round'](Math['log2'](_0x7f9598/(-0xc97+-0x1444+-0x231*-0xf))))),_0x14147f=(0x1bd4+0x1*0x2463+0x1*-0x4035)**_0x2e7d1b+(-0x168e+0x146a+0x3*0xb7);},_0x2c8570=_0x3e53c5=>{_0x3ccdc0=-0x1*-0x577+0x1525*-0x1+-0x6*-0x29d,_0x5bf7d1=_0x3ccdc0+_0x7f9598*_0x57d25f*(0x12b1+-0x1f*-0x6c+0x32d*-0xa),_0x47e0c3=_0x5bf7d1+(0x1*0xdab+0x8*0x17a+0x1*-0x1917)*_0x57d25f*(0x1352+-0xa*-0x1b1+0x2*-0x121d),_0x4bfed1=_0x47e0c3+_0x7f9598*_0x310602,_0x307617=_0x4bfed1+(0x22df+0x25e3*0x1+-0x48bf)*_0x57d25f,_0x3548c2=_0x307617+(-0x4c+0x2*-0x106d+0xd*0x28d)*_0x57d25f,_0x5e0522=_0x3548c2+(0x1*-0x3e7+0x1d*0xcc+-0x1a*0xbd)*_0x57d25f,_0x1e7cec=_0x5e0522+(0x1bd2+-0x16a*-0x1+-0x1d39)*_0x57d25f,_0x16ca38=_0x1e7cec+_0x7f9598*_0x310602,_0x10ed01=new Float32Array(_0x3e53c5,_0x3ccdc0,_0x7f9598*(0x2107+0x2*0x3fb+-0x28fa)),_0x1a8ad7=new Float32Array(_0x3e53c5,_0x5bf7d1,0x1b6e+0x2586+0xab2*-0x6),_0x49c343=new Uint32Array(_0x3e53c5,_0x47e0c3,_0x7f9598),_0x38fb00=new Float32Array(_0x3e53c5,_0x4bfed1,0x1e*0x112+0xd72+-0x2d8b),_0x57d297=new Float32Array(_0x3e53c5,_0x307617,-0xf08*0x2+-0x73*0x5+0x2052),_0x779c9d&&(_0x1c07af=_0x16ca38+_0x14147f*_0x310602,_0x11353c=_0x1c07af+_0x7f9598*_0x57d25f,_0x3af5f2=_0x11353c+_0x7f9598*_0x57d25f,_0xb5dff0=_0x3af5f2+_0x7f9598*(-0x3*0x8ea+-0x649*-0x3+-0x3*-0x2a2)*_0x57d25f,_0x38fad1=new Float32Array(_0x3e53c5,_0x1c07af,_0x7f9598),_0x4bdbe0=new Float32Array(_0x3e53c5,_0x11353c,_0x7f9598),_0x1319d9=new Float32Array(_0x3e53c5,_0x3af5f2,_0x7f9598*(0x1b62+0xd93*-0x1+0x6e6*-0x2)),_0x2d9ed6=new Uint32Array(_0x3e53c5,_0xb5dff0,_0x7f9598));},_0x2f8469=async _0x183f92=>{_0x51c8b0=0x24d8+-0x1a*-0x13+-0x26c5;const _0x2ece49={'env':{'memory':new WebAssembly['Memory']({'initial':_0x51c8b0}),'pthread_self':function(){return-0x781+0xc3f+-0x4be;},'emscripten_builtin_memalign':function(){return-0x3a*-0xb+-0xd46+-0xc*-0xe6;},'loggerVec3':(_0x4db736,_0x50f745,_0x3c14ad,_0x3ecbc9)=>{console['log']('C++\x20logger'+'Vec3\x20['+_0x4db736+']\x200:'+_0x50f745+'\x201:'+_0x3c14ad+'\x202:'+_0x3ecbc9);},'loggerFloat':(_0x5994f8,_0x2eaafc)=>{console['log']('C++\x20LogFlo'+'at\x20['+_0x5994f8+']\x20a:'+_0x2eaafc);},'loggerValue':(_0x2b9a0a,_0x2a20f8,_0x1c2106,_0x563bbc,_0x3c1df3)=>{console['log']('C++\x20logger'+'Value\x20['+_0x2b9a0a+']\x20minDist:'+_0x2a20f8+'\x20maxDist:'+_0x1c2106+'\x20range:'+_0x563bbc+'\x20divider:'+_0x3c1df3);},'loggerCamera':(_0x499d4c,_0x3219fe,_0x4a8eed,_0x70807b,_0x25b278,_0x128aa9,_0x32eaaf)=>{console['log']('C++\x20logger'+'Camera\x20['+_0x499d4c+']\x20x:'+_0x3219fe+'\x20y:'+_0x4a8eed+'\x20z:'+_0x70807b+'\x20dx:'+_0x25b278+'\x20dy:'+_0x128aa9+'\x20dz:'+_0x32eaaf);},'loggerBound':(_0x505acd,_0x4a2d8e,_0x21021b,_0x23eccd,_0x34510a,_0x3bb8af)=>{console['log']('C++\x20logger'+'Bound\x20minX'+':'+_0x505acd+'\x20minY:'+_0x4a2d8e+'\x20minZ:'+_0x21021b+'\x20maxX:'+_0x23eccd+'\x20maxY:'+_0x34510a+'\x20maxZ:'+_0x3bb8af);},'loggerDebug':_0x1db8ef=>{console['log']('C++\x20logger'+'Debug\x20['+_0x1db8ef+']');}}};try{const _0x171d53=await(await fetch(_0x183f92))['arrayBuffe'+'r']();return _0x4db5d0=(await WebAssembly['instantiat'+'e'](_0x171d53,_0x2ece49))['instance'],_0x18bb67=_0x2ece49['env']['memory'],_0x4db5d0;}catch(_0x898204){throw console['error']('加载WASM模块失败'+':',_0x898204),_0x898204;}},_0x5d991a=_0x2f479c=>{if(_0x2f479c<=0xa*-0x31f+0x1*0x15f2+0x251*0x4)return 0x17d2+0x1849*0x1+-0x301a;let _0x2053b1=_0x2f479c*_0x57d25f*(-0xf1*0x11+-0x7*0x42d+-0x15f*-0x21);_0x2053b1+=_0x2f479c*_0x310602,_0x2053b1+=(0x2688*-0x1+0x1*-0x6cf+0x306*0xf)*_0x57d25f,_0x2053b1+=(0x1*0x2209+0x1*0x14d5+-0x3*0x1249)*_0x57d25f,_0x2053b1+=(-0x4b*0x40+-0x4*-0x1bb+0xbd7)*_0x57d25f,_0x2053b1+=(-0x1b24+-0xc4c+0x2773)*_0x57d25f,_0x2053b1+=_0x2f479c*_0x57d25f,_0x2053b1+=_0x14147f*_0x310602,_0x2053b1+=(0x3d7+0x23*-0x9e+0x1227)*_0x57d25f*(0x755*0x1+-0x2*0x6ac+0x605),_0x2053b1+=_0x2f479c*_0x310602,_0x779c9d&&(_0x2053b1+=_0x2f479c*_0x57d25f,_0x2053b1+=_0x2f479c*_0x57d25f,_0x2053b1+=_0x2f479c*_0x57d25f*(-0x3fa*0x1+0x145d+-0x1060*0x1));const _0x1c2f72=(-0x1*0x875+0xf89+-0x6d4)*(0x5bb*-0x2+0xc76+0x10*0x30);return Math['ceil'](_0x2053b1/_0x1c2f72);},_0x5631f9=_0x466cce=>{const _0x13cfbe=_0x5d991a(_0x466cce);return _0x13cfbe>_0x51c8b0?(_0x18bb67['grow'](_0x13cfbe-_0x51c8b0),_0x51c8b0=_0x13cfbe):_0x18bb67['grow'](-0x1264+0x16ca+-0x466),_0x18bb67['buffer'];},_0x4bd408=()=>{if(!_0x4db5d0)return;const {calcAABB:_0x229d21}=_0x4db5d0['exports'];_0x229d21(_0x3ccdc0,_0x3548c2,_0x5e0522,_0x7f9598);},_0x591fc5=()=>{_0x5d35b4&&clearTimeout(_0x5d35b4),_0x5d35b4=setTimeout(()=>{_0x5d35b4=null,_0x3e6e40();},0x1f1b+0x11ab+-0x3*0x1042);},_0x3e6e40=()=>{if(!_0x4db5d0||!_0x588513||_0x49c343['length']!==_0x7f9598||_0x47e0c3===null||_0x3ccdc0===null||_0x4bfed1===null||_0x307617===null||_0x3548c2===null||_0x5e0522===null)return;const _0xdd4185=_0x38fb00[-0x4*0x5+-0x9ba+0x9ce],_0x5989b5=_0x38fb00[-0x1195+-0x8c*0x1+-0x1*-0x1222],_0x1ac8bd=_0x38fb00[0x65*0x48+0x1d29+-0x398f],_0x5d2139=_0x57d297[-0x181*-0x4+0x44e*0x1+-0xa52],_0x2114e5=_0x57d297[-0x1*-0x19a9+0x6d*-0x23+-0xac1],_0x5d5010=_0x57d297[0x10f+0x3c1*0x8+0x1*-0x1f15],_0x5ba993=0x19a7+0x14fe+-0x2ea5+0.001;if(!_0x2636ff&&Math['abs'](_0xdd4185-_0x381604['x'])<_0x5ba993&&Math['abs'](_0x5989b5-_0x381604['y'])<_0x5ba993&&Math['abs'](_0x1ac8bd-_0x381604['z'])<_0x5ba993&&Math['abs'](_0x5d2139-_0x300bf7['x'])<_0x5ba993&&Math['abs'](_0x2114e5-_0x300bf7['y'])<_0x5ba993&&Math['abs'](_0x5d5010-_0x300bf7['z'])<_0x5ba993&&Math['abs'](_0x5581b6-_0x1eb840)<-0x15c0+0xfb2+0x60e+0.01)return;if(_0x4bcf36){_0x2bc50b=!(0x129a*-0x1+0xec8+0x3*0x146);return;}_0x4bcf36=!(-0x1207+-0xbf2+0x1df9),_0x2636ff=!(0x217a+0x56b+-0x26e4),_0x1eb840=_0x5581b6,_0x381604['x']=_0xdd4185,_0x381604['y']=_0x5989b5,_0x381604['z']=_0x1ac8bd,_0x300bf7['x']=_0x5d2139,_0x300bf7['y']=_0x2114e5,_0x300bf7['z']=_0x5d5010,_0x2bc50b=!(0x9c*-0x3b+0x21f*0x9+0x10de);const {sortIndexes:_0x414ec0}=_0x4db5d0['exports'];try{const _0x16417b=_0x414ec0(_0x47e0c3,_0x3ccdc0,_0x3af5f2,_0x1c07af,_0x11353c,_0x4bfed1,_0x307617,_0x3548c2,_0x5e0522,_0x1e7cec,_0x16ca38,_0x5581b6||-0x140d+0x787*0x4+-0x5*0x203,_0x8b2983,_0x2a1f08,_0x779c9d,_0x7f9598,_0x14147f,_0x2e7d1b,_0x5bf7d1,_0xb5dff0),_0x1094bf=new Uint32Array(_0x49c343);if(_0x16417b===-0xb1b+0x1463+0x3*-0x318){debugger;console['log']('____\x20ENGIN'+'E','Indexes\x20co'+'unt\x20===\x20',_0x16417b);}const _0x2357ff=_0x7f9598!==_0x1c3e7c||_0x321376!==_0x15ca1f;self['postMessag'+'e']({'type':'sortComple'+'ted','count':_0x16417b,'order':_0x1094bf,'isNewOrder':_0x2357ff},[_0x1094bf['buffer']]),_0x1c3e7c=_0x7f9598,_0x321376=_0x15ca1f;}catch(_0x1aea16){console['error']('排序操作失败:',_0x1aea16),self['postMessag'+'e']({'type':'error','error':_0x1aea16['message']});}_0x4bcf36=!(0x1*0x1f6f+0x332+0x2*-0x1150),_0x2bc50b&&_0x591fc5();};}class kA extends me{constructor(){super(),h(this,'worker',null),h(this,'numSplats',-0x1fb2+0xf65+0x141*0xd),h(this,'is4d',!(-0x2332+-0x1ad*-0x3+0x1*0x1e2b)),h(this,'sortStartT'+'ime',0x7*-0x4b7+0x1786+-0x1*-0x97b),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'data',{}),(this['orderTextu'+'re']=null,this['backOrderT'+'exture']=null,this['worker']=null,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+NA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x128e6a=>{var _0x5b9019;if(!this['worker'])return;const {data:_0x567525}=_0x128e6a;switch(_0x567525['type']){case'initialize'+'d':this['fire']('initialize'+'d');break;case'sortComple'+'ted':_0x567525['order']&&(_0x567525['isNewOrder']&&(this['orderTextu'+'re']=this['backOrderT'+'exture']),(_0x5b9019=this['orderTextu'+'re'])==null||_0x5b9019['write'](0x165+-0x7*0x32b+0xe*0x17c,0x6a8+0x1b6e+-0x2216,this['orderTextu'+'re']['width'],this['orderTextu'+'re']['height']-(0x1a10+-0x1aff+0xf0),_0x567525['order']));let _0x33d9f3=0x3c1+0x4*-0x669+0x15e3;this['sortStartT'+'ime']!==-0x22d0+0x1024*-0x2+0x388*0x13&&(_0x33d9f3=performance['now']()-this['sortStartT'+'ime']),this['fire']('updated',_0x128e6a['data']['count'],_0x33d9f3,_0x567525['isNewOrder']),this['sortStartT'+'ime']=-0x1*-0xe9d+0x18ef+-0x4*0x9e3;break;case'error':console['error']('Worker错误:',_0x567525['error']),this['fire']('error',_0x567525['error']);break;}};const _0x4180a9='https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/sorter-t'+'railing.wa'+'sm?t='+Date['now']();this['worker']['postMessag'+'e']({'type':'initWorker','sortWasmUrl':_0x4180a9});}['initData'](_0x12e5e8,_0x510c58,_0x324436,_0x420214,_0x3a6c29,_0x598f03,_0x5b6770,_0x1d1f84){var _0x4688d3;this['is4d']=_0x1d1f84,this['numSplats']=_0x510c58['length']/(-0x1*0x1601+0x443*-0x8+-0xfc*-0x39),(!_0x5b6770||_0x5b6770['length']===-0x2*0xef5+-0xb72*0x2+0x9*0x5de)&&(_0x5b6770=[-0x1b5e+0x8*0x49d+-0x25*0x42,-0x166e+0x1762+-0x8*0x17]),this['orderTextu'+'re']||(this['orderTextu'+'re']=_0x12e5e8),this['backOrderT'+'exture']=_0x12e5e8;const _0x29347b=new Date()['getTime']();(_0x4688d3=this['worker'])==null||_0x4688d3['postMessag'+'e']({'type':'initData','centers':_0x510c58,'muT':_0x324436,'tScale':_0x420214,'motion':_0x3a6c29,'timeIndex':_0x598f03,'timeOption':_0x5b6770,'is4d':_0x1d1f84,'id':_0x29347b});}['setCamera'](_0x403e4a,_0x1d3eb2){this['worker']&&(!_0x403e4a||!_0x1d3eb2||(this['data']['cameraPosi'+'tion']={'x':_0x403e4a['x'],'y':_0x403e4a['y'],'z':_0x403e4a['z']},this['data']['cameraDire'+'ction']={'x':_0x1d3eb2['x'],'y':_0x1d3eb2['y'],'z':_0x1d3eb2['z']},this['sortStartT'+'ime']===0x2b*-0xac+-0x1e5*0x10+-0x4*-0xecd&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'sort','cameraPosition':{'x':_0x403e4a['x'],'y':_0x403e4a['y'],'z':_0x403e4a['z']},'cameraDirection':{'x':_0x1d3eb2['x'],'y':_0x1d3eb2['y'],'z':_0x1d3eb2['z']}})));}['setCurrent'+'Time'](_0x5dab8b){this['worker']&&(this['data']['time']=_0x5dab8b,this['sortStartT'+'ime']===-0xa42+0x23e*0x1+0x12*0x72&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'setTime','time':_0x5dab8b}));}['setUseTemp'+'oralSort'](_0x13f5a2){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseTemp'+'oralSort','useTemporalSort':_0x13f5a2});}['setUseDyna'+'micSort'](_0x1cd3f8){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseDyna'+'micSort','useDynamicSort':_0x1cd3f8});}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}const UA=new te(),Na=new D(),ka=new D(),rc=[0x46c*0x1+0xe0f+0x629*-0x3,-0xc2c+0x2*-0xebf+0x2*0x14d5];class BA{constructor(_0x4937d2,_0x5f5ca6={}){h(this,'resource'),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'_material'),h(this,'meshInstan'+'ce'),h(this,'options',{}),h(this,'sorter',null),h(this,'time',-0x43c+0xd5*0x1b+-0xd*0x167),h(this,'lastCamera'+'Position',new D()),h(this,'lastCamera'+'Direction',new D()),h(this,'resolveSH',null),h(this,'cameras',[]),h(this,'forceUpDat'+'eSorterTim'+'e',(_0x46717d,_0xb7c2fc=void(0x1418+-0x1e8c+0xa74))=>{(_0xb7c2fc||_0xb7c2fc===-0x11dc+-0x2279+0x3455*0x1)&&(this['material']['setParamet'+'er']('uTime',_0xb7c2fc),this['updateTime'](_0xb7c2fc)),this['sort'](_0x46717d);}),(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Instance',_0x4937d2['numSplats']),this['resource']=_0x4937d2,this['orderTextu'+'re']=this['resource']['createText'+'ure']('splatOrder',Yi,this['resource']['evalTextur'+'eSize'](this['resource']['numSplats'])),this['backOrderT'+'exture']=null,_0x5f5ca6['material']?(this['_material']=_0x5f5ca6['material'],this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])):(this['_material']=new Bn({'uniqueName':'SplatMater'+'ial','vertexGLSL':'#include\x20\x22'+'gsplatVS\x22','fragmentGLSL':'#include\x20\x22'+'gsplatPS\x22','vertexWGSL':'#include\x20\x22'+'gsplatVS\x22','fragmentWGSL':'#include\x20\x22'+'gsplatPS\x22','attributes':{'vertex_position':Pe,'vertex_id_attrib':Xc}}),this['configureM'+'aterial'](this['_material']),this['_material']['update']()),this['meshInstan'+'ce']=new He(this['resource']['mesh'],this['_material']),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x1*-0x3f6+-0xa*0x37+-0x1d0)),this['meshInstan'+'ce']['gsplatInst'+'ance']=this,this['meshInstan'+'ce']['instancing'+'Count']=0x1382+0x1*-0x599+-0xde9,this['sorter']=new kA(),this['sorter']['on']('initialize'+'d',()=>{var _0x4e5e07,_0x61a3d1,_0x41d39d,_0x5adfec,_0x53b0fe,_0x1575bf,_0x441700,_0x35d529,_0x3cefdb,_0x175920,_0x480075;const _0xf278c5=new Float32Array(this['resource']['centers']['buffer']['slice']()),_0x5bc5d5=new Float32Array(((_0x61a3d1=(_0x4e5e07=this['resource']['muT'])==null?void(0x14*-0x95+0x1f7a+-0x13d6):_0x4e5e07['buffer'])==null?void(0xb8d*0x2+-0x1e44+0x72a):_0x61a3d1['slice']())??new Float32Array()),_0x290d4a=new Float32Array(((_0x5adfec=(_0x41d39d=this['resource']['tScale'])==null?void(0x132d+0x3*0xb37+-0x34d2*0x1):_0x41d39d['buffer'])==null?void(-0x10b9+0x1b3d+-0x542*0x2):_0x5adfec['slice']())??new Float32Array()),_0x4390aa=new Float32Array(((_0x1575bf=(_0x53b0fe=this['resource']['motion'])==null?void(-0x1*-0xf09+0x55a*-0x2+-0x455):_0x53b0fe['buffer'])==null?void(-0x1518+-0x17*0x56+0x1cd2):_0x1575bf['slice']())??new Float32Array()),_0x2a3d95=new Float32Array(((_0x35d529=(_0x441700=this['resource']['timeIndex'])==null?void(0x12e*-0x1d+0x9*0x3d7+-0x59*0x1):_0x441700['buffer'])==null?void(-0x68b+0x243a+-0x3*0x9e5):_0x35d529['slice']())??new Float32Array(0x47*-0x5e+-0x5d0+-0xff1*-0x2)),_0x3daa8f=new Float32Array(((_0x175920=(_0x3cefdb=this['resource']['timeOption'])==null?void(0x387+0x3*-0x9ff+0x1a76):_0x3cefdb['buffer'])==null?void(-0xafb*0x1+-0x34*0xc+0xd6b):_0x175920['slice']())??new Float32Array());(_0x480075=this['sorter'])==null||_0x480075['initData'](this['orderTextu'+'re'],_0xf278c5,_0x5bc5d5,_0x290d4a,_0x4390aa,_0x2a3d95,_0x3daa8f,this['resource']['is4D']);}),this['sorter']['on']('updated',async(_0x114363,_0x4edb9d,_0x345352)=>{var _0x42606a;this['meshInstan'+'ce']['instancing'+'Count']=Math['ceil'](_0x114363/this['resource']['instanceSi'+'ze']),_0x345352&&this['backOrderT'+'exture']&&(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatInst'+'ance\x20updat'+'ed'),[this['orderTextu'+'re'],this['backOrderT'+'exture']]=[this['backOrderT'+'exture'],this['orderTextu'+'re']],await this['resource']['updateText'+'ure'](),this['resource']['configureM'+'aterial'](this['_material']),this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])),_0x345352&&((_0x42606a=this['resource'])==null||_0x42606a['fireAssets'+'ManagerTim'+'eIndex']()),this['material']['setParamet'+'er']('numSplats',_0x114363);}),this['setHighQua'+'litySH'](_0x5f5ca6['highQualit'+'ySH']??!(-0x1*-0x1426+-0x2*0x130d+0x11f5)));}async['updateInst'+'anceData'](_0x145316){var _0x52122f,_0x59ee52;console['log']('____\x20ENGIN'+'E\x20IVAN','updateInst'+'anceData\x20A'+'SSETS\x20GSpl'+'atInstance',_0x145316['numSplats']),this['resource']=_0x145316;const _0x107ba7=this['resource']['evalTextur'+'eSize'](_0x145316['centers']['length']/(0x8dc+-0x71*0x16+0xdd));return(_0x52122f=this['backOrderT'+'exture'])==null||_0x52122f['destroy'](),this['backOrderT'+'exture']=this['resource']['createText'+'ure']('splatOrder'+'2',Yi,_0x107ba7),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x1c9b+0x75*-0x4a+0x3*0x14cf)),(_0x59ee52=this['sorter'])==null||_0x59ee52['initData'](this['backOrderT'+'exture'],_0x145316['centers'],_0x145316['muT'],_0x145316['tScale'],_0x145316['motion'],_0x145316['timeIndex'],_0x145316['timeOption'],_0x145316['is4D']),new Promise(_0xfcf67d=>{var _0x3e8444;const _0x29f6fb=(_0xa187d8,_0x2d658e,_0x4e5d62)=>{var _0x4308f1;_0x4e5d62&&((_0x4308f1=this['sorter'])==null||_0x4308f1['off']('updated',_0x29f6fb),_0xfcf67d(!(-0xb04+-0x1*-0x1f31+-0x142d)));};(_0x3e8444=this['sorter'])==null||_0x3e8444['on']('updated',_0x29f6fb);});}['destroy'](){var _0x931599,_0x55a82c,_0x290845,_0x4f11df,_0x449223,_0x3d41e6;(_0x931599=this['resolveSH'])==null||_0x931599['destroy'](),(_0x55a82c=this['material'])==null||_0x55a82c['destroy'](),(_0x290845=this['meshInstan'+'ce'])==null||_0x290845['destroy'](),(_0x4f11df=this['sorter'])==null||_0x4f11df['destroy'](),(_0x449223=this['orderTextu'+'re'])==null||_0x449223['destroy'](),(_0x3d41e6=this['backOrderT'+'exture'])==null||_0x3d41e6['destroy']();}set['material'](_0x2d8495){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.set\x20'+'material'),this['_material']!==_0x2d8495&&(this['_material']=_0x2d8495,this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x2d8495));}get['material'](){return this['_material'];}['configureM'+'aterial'](_0x42abdb,_0x3245e7={}){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.conf'+'igureMater'+'ial'),this['resource']['configureM'+'aterial'](_0x42abdb),_0x42abdb['setParamet'+'er']('numSplats',-0xa22*0x2+-0x1f9e+0x19f1*0x2),_0x42abdb['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),_0x42abdb['setParamet'+'er']('alphaClip',-0x9ba+0x2591+-0x1bd7*0x1+0.3),_0x42abdb['setDefine']('DITHER_'+(_0x3245e7['dither']?'BLUENOISE':'NONE'),''),_0x42abdb['cull']=bt,_0x42abdb['blendType']=_0x3245e7['dither']?Cs:Zs,_0x42abdb['depthWrite']=!!_0x3245e7['dither'];}['updateView'+'port'](_0xab7498){var _0x27f0d7;const _0x3311eb=_0xab7498==null?void(0x152e+0x1fb*-0x7+-0x751):_0xab7498['camera'],_0x19c801=_0x3311eb==null?void(-0x79+0x1473*-0x1+0x67*0x34):_0x3311eb['renderTarg'+'et'],{width:_0x1d690e,height:_0x242350}=_0x19c801??this['resource']['device'];rc[-0x11f5+-0xcf3*-0x1+0x502*0x1]=_0x1d690e,rc[-0x1*0x30a+-0x245+-0x1*-0x550]=_0x242350;const _0x2a6ec1=(_0x27f0d7=_0x3311eb==null?void(-0x1864+0x1de1+-0x57d):_0x3311eb['camera'])==null?void(0xa8d*0x3+0x859*0x3+0x973*-0x6):_0x27f0d7['xr'];_0x2a6ec1!=null&&_0x2a6ec1['active']&&_0x2a6ec1['views']['list']['length']===0x165d+-0x2*-0x1364+0x9*-0x6cb&&(rc[-0x710*-0x3+-0xd1d+-0x813]*=-0x7*-0x2c9+0x1*0x19e1+-0x2d60+0.5),this['material']['setParamet'+'er']('viewport',rc);}['sort'](_0x3cfb0b){if(this['sorter']){const _0x258e5a=_0x3cfb0b['getWorldTr'+'ansform']();_0x258e5a['getTransla'+'tion'](Na),_0x258e5a['getZ'](ka);const _0x50d819=this['meshInstan'+'ce']['node']['getWorldTr'+'ansform'](),_0x425def=UA['invert'](_0x50d819);_0x425def['transformP'+'oint'](Na,Na),_0x425def['transformV'+'ector'](ka,ka),(!Na['equalsAppr'+'ox'](this['lastCamera'+'Position'])||!ka['equalsAppr'+'ox'](this['lastCamera'+'Direction']))&&(this['lastCamera'+'Position']['copy'](Na),this['lastCamera'+'Direction']['copy'](ka),this['sorter']['setCamera'](Na,ka)),this['sorter']['setCurrent'+'Time'](this['time']);}this['updateView'+'port'](_0x3cfb0b);}['update'](){var _0x55d39;if(this['cameras']['length']>0x1*-0x6e7+-0x1d81*-0x1+-0x107*0x16){const _0x4aa2cc=this['cameras'][0x168a+0xf96+-0x2620];this['sort'](_0x4aa2cc['_node']),(_0x55d39=this['resolveSH'])==null||_0x55d39['render'](_0x4aa2cc['_node'],this['meshInstan'+'ce']['node']['getWorldTr'+'ansform']()),this['cameras']['length']=0x308*0xb+-0x46*-0x29+-0x2c8e;}}['setHighQua'+'litySH'](_0x438ef9){const {resource:_0x21d481}=this,{gsplatData:_0x4a5898}=_0x21d481;_0x4a5898 instanceof FA&&_0x4a5898['shBands']>-0x1*0x45f+-0x216e+0x25cd&&_0x438ef9===!!this['resolveSH']&&(this['resolveSH']?(this['resolveSH']['destroy'](),this['resolveSH']=null):this['resolveSH']=new DA(_0x21d481['device'],this));}['updateTime'](_0x4ebf86){this['time']=_0x4ebf86;}}class Zy{constructor(_0x144beb,_0x2e3233){h(this,'sceneInfo',{}),h(this,'isDestroye'+'d',!(-0x22b0+0x3*-0x209+0x28cb)),h(this,'device'),h(this,'gsplatData'),h(this,'centers'),h(this,'aabb'),h(this,'mesh'),h(this,'instanceIn'+'dices'),h(this,'gsplatInst'+'ance'),(this['device']=_0x144beb,this['gsplatData']=_0x2e3233,this['isDestroye'+'d']=!(-0xd86+-0x2*0xbb+0xefd));const _0x265c3f=0x24*-0xa3+-0xcb6*-0x3+-0xeb6*0x1,_0x2c0923=Math['ceil'](_0x2e3233['numSplats']/_0x265c3f)*_0x265c3f/_0x265c3f,_0x1f4e0f=new Uint32Array(_0x2c0923);for(let _0x463607=0x132f*-0x1+0xa6+0x3b5*0x5;_0x463607<_0x2c0923;++_0x463607)_0x1f4e0f[_0x463607]=_0x463607*_0x265c3f;const _0x457640=new kt(_0x144beb,[{'semantic':Xc,'components':0x1,'type':Vo,'asInt':!(0x1ff6+-0x3*-0xa88+-0x65b*0xa)}]),_0x4289c1=new Float32Array((0x1e2f+0x329*0xb+0x4e*-0xd5)*_0x265c3f),_0x474ee8=new Uint32Array((0x1a3f+-0x23cf+-0x996*-0x1)*_0x265c3f);for(let _0x15da1c=-0x122f+-0x2411+-0x20*-0x1b2;_0x15da1c<_0x265c3f;++_0x15da1c){_0x4289c1['set']([-(0x33f*0x1+0xbc9*-0x3+0x201d),-(-0x6de+0x2686+0xa8d*-0x3),_0x15da1c,0x1216+-0x14fa+0x2e5,-(0x957*-0x1+0xc5*-0x16+-0x13*-0x162),_0x15da1c,0xa5d+0x77b+0x11d7*-0x1,0x1bad+-0x1799*-0x1+0x3345*-0x1,_0x15da1c,-(-0x21b8+-0x1266+0x341f),-0x72a*-0x1+-0x5*-0x115+-0xc92,_0x15da1c],_0x15da1c*(0x17*-0x119+-0x9*-0x158+-0x6d*-0x1f));const _0x3734f1=_0x15da1c*(0x1153+0x8a*0xf+-0x24f*0xb);_0x474ee8['set']([0x8c7+-0x17d2+0xf0b+_0x3734f1,-0x1d1*0x5+-0x22e0+0x2bf6+_0x3734f1,-0x69f+0x7b1+-0x110+_0x3734f1,-0x2*-0x2c7+-0x27*0xa6+0x13bc+_0x3734f1,0xe35*0x2+0xf2d+0xe87*-0x3+_0x3734f1,0x1*0x1d6b+-0x9*0x95+0x1*-0x182b+_0x3734f1],_0x15da1c*(0x109*-0x1+0x349*-0x9+0x1ea0));}this['mesh']=new Ge(_0x144beb),this['mesh']['setPositio'+'ns'](_0x4289c1,0x23de+-0x563*0x1+0x514*-0x6),this['mesh']['setIndices'](_0x474ee8),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),this['instanceIn'+'dices']=new Ds(_0x144beb,_0x457640,_0x2c0923,{'usage':ms,'data':_0x1f4e0f['buffer']});}['updateData'](){var _0x58df89;const _0x1a9328=this['gsplatData'];if(!_0x1a9328)return;const _0x5d2e74=0x101*0x1d+0x30*-0xa6+0x283,_0x1d64a4=Math['ceil'](_0x1a9328['numSplats']/_0x5d2e74)*_0x5d2e74/_0x5d2e74,_0x4934f1=new Uint32Array(_0x1d64a4);for(let _0x4ed54c=-0x1fa8*0x1+-0x3d*0x1+0x1fe5;_0x4ed54c<_0x1d64a4;++_0x4ed54c)_0x4934f1[_0x4ed54c]=_0x4ed54c*_0x5d2e74;const _0x4c8311=new kt(this['device'],[{'semantic':Xc,'components':0x1,'type':Vo,'asInt':!(0x181*-0x14+-0x121c+0x3030)}]),_0x94fa9a=new Float32Array((-0x113*-0x1+0x10fc+-0x1d*0x9f)*_0x5d2e74),_0x289890=new Uint32Array((-0x34*0xb8+-0x37*-0x4+0x3*0xc2e)*_0x5d2e74);for(let _0x5776b8=0xa3*-0x26+-0xef9+0x25*0x10f;_0x5776b8<_0x5d2e74;++_0x5776b8){_0x94fa9a['set']([-(0x32c+-0xc2b+0x900),-(-0x1*-0x12b2+-0x386+0xf2b*-0x1),_0x5776b8,0x40*0x2d+0xe87*0x1+0xce3*-0x2,-(0x3*-0x3cb+-0x147*0x4+-0x2*-0x83f),_0x5776b8,-0x2226+-0x1*0x1715+0x393c*0x1,0x9e3*-0x3+-0xb*-0x2a5+-0x7*-0x15,_0x5776b8,-(-0x246+0x13c8+-0x1181),0x5cb*-0x1+0x19bd*0x1+-0x13f1,_0x5776b8],_0x5776b8*(0x2ba+-0x1b2f+0x2b9*0x9));const _0x15d9d3=_0x5776b8*(0x1af+-0x12b0+-0x1*-0x1105);_0x289890['set']([-0x59*-0xa+-0x24d9+-0x1*-0x215f+_0x15d9d3,-0x87e+-0x122a+0x1aa9+_0x15d9d3,0x1f1*-0x4+0x1631+-0x1*0xe6b+_0x15d9d3,0x157e+-0x105e*-0x2+-0x363a*0x1+_0x15d9d3,-0x1513*0x1+0x7*0x1c9+0x896+_0x15d9d3,-0x175*0xb+0x17*0xaa+0xc4+_0x15d9d3],_0x5776b8*(0x48d*0x6+-0x1341+0xf*-0x89));}this['mesh']['setPositio'+'ns'](_0x94fa9a,0xcd4+-0x21e1+-0x2a2*-0x8),this['mesh']['setIndices'](_0x289890),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),(_0x58df89=this['instanceIn'+'dices'])==null||_0x58df89['destroy'](),this['instanceIn'+'dices']=new Ds(this['device'],_0x4c8311,_0x1d64a4,{'usage':ms,'data':_0x4934f1['buffer']});}['updateText'+'ure'](){}['destroy'](){var _0x490430,_0x2e3126,_0x54ffb0,_0x24d667;(_0x490430=this['mesh'])==null||_0x490430['destroy'](),(_0x2e3126=this['instanceIn'+'dices'])==null||_0x2e3126['destroy'](),(_0x54ffb0=this['gsplatData'])==null||_0x54ffb0['destroy'](),this['gsplatData']=null,(_0x24d667=this['gsplatInst'+'ance'])==null||_0x24d667['destroy'](),this['gsplatInst'+'ance']=void(-0x15*0x11b+-0x267*-0x5+0x3bc*0x3),this['isDestroye'+'d']=!(-0x1a*0x6f+0x25b5+-0x43*0x65),this['mesh']=null;}get['instanceSi'+'ze'](){return 0xa6*0x7+0xc2f+-0x1039;}get['numSplats'](){var _0x3f48f3;return(_0x3f48f3=this['gsplatData'])==null?void(-0x839+0x4*-0x796+0x449*0x9):_0x3f48f3['numSplats'];}['setSceneIn'+'fo'](_0x14c54d){}['configureM'+'aterial'](_0x17ffc5){}['evalTextur'+'eSize'](_0x415b86){return J['ZERO'];}['appendGSpl'+'atResource'](_0x448c23,_0x1be9e0,_0x498996,_0x23ab1b,_0x1ea976){}['fireAssets'+'ManagerTim'+'eIndex'](){}['createText'+'ure'](_0x18b111,_0xfa5562,_0x2ca911,_0x58f703){return new _e(this['device'],{'name':_0x18b111,'width':_0x2ca911['x'],'height':_0x2ca911['y'],'format':_0xfa5562,'cubemap':!(0x3*0x98f+-0x6a*0x5d+-0x9d6*-0x1),'mipmaps':!(0x1be6+-0x16db*-0x1+-0x20*0x196),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,..._0x58f703?{'levels':[_0x58f703]}:{}});}['instantiat'+'e'](){w['removed']('GSplatReso'+'urce.insta'+'ntiate\x20is\x20'+'removed.\x20U'+'se\x20gsplat\x20'+'component\x20'+'instead');}['createInst'+'ance'](_0x3e7991,_0x227a50){return this['gsplatInst'+'ance']=new BA(_0x3e7991,_0x227a50),this['gsplatInst'+'ance'];}}async function zA(){const _0x4e1962=new Float32Array(0x30a+0xf36+-0x123f),_0x5da89c=new Int32Array(_0x4e1962['buffer']);let _0xdb859d=null,_0x133ba5=null,_0x375ce3=null,_0xfa1f53=null,_0x56d39a=null,_0x922cff=null,_0x12c662=null,_0x5ba46e=null;self['onmessage']=async _0x2221c1=>{const {data:_0x2a0397}=_0x2221c1;switch(_0x2a0397['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x272175(_0x2a0397['numSplats'],_0x2a0397['shBands'],_0x2a0397['SHData']);break;case'updateColo'+'rData':_0x446e35(_0x2a0397['numSplats'],_0x2a0397['cr'],_0x2a0397['cg'],_0x2a0397['cb'],_0x2a0397['ca']);break;case'updateTran'+'sformData':_0x301dd9(_0x2a0397['numSplats'],_0x2a0397['is4D'],_0x2a0397['x'],_0x2a0397['y'],_0x2a0397['z'],_0x2a0397['rx'],_0x2a0397['ry'],_0x2a0397['rz'],_0x2a0397['rw'],_0x2a0397['mx'],_0x2a0397['my'],_0x2a0397['mz'],_0x2a0397['sx'],_0x2a0397['sy'],_0x2a0397['sz'],_0x2a0397['muT'],_0x2a0397['tScale']);break;case'calcAabb':_0x1f53f6(_0x2a0397['numSplats'],_0x2a0397['x'],_0x2a0397['y'],_0x2a0397['z'],_0x2a0397['sx'],_0x2a0397['sy'],_0x2a0397['sz']);break;case'destroyWor'+'ker':_0x52e592();break;}};class _0x33be4e{constructor(_0x52b91a=0x4ed+-0x132+0x5*-0xbf,_0x5b08fd=0x8ad+0x43d+0x3a*-0x39,_0x4d88f6=-0x29*-0xa5+-0xcd3+-0xd9a,_0x40cb38=-0x24a8+0x1efb+0x5ae){this['x']=_0x52b91a,this['y']=_0x5b08fd,this['z']=_0x4d88f6,this['w']=_0x40cb38;}['set'](_0x1429df,_0x880651,_0x20b75b,_0xcd8c7){return this['x']=_0x1429df,this['y']=_0x880651,this['z']=_0x20b75b,this['w']=_0xcd8c7,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x482168=this){let _0xa097f5=_0x482168['length']();return _0xa097f5===-0x1*0x20a1+0xe*-0x15b+0x1*0x339b?(this['x']=this['y']=this['z']=0x1*0x12d+0x33a+0x7*-0xa1,this['w']=0x254c+-0x33*-0x43+-0x2*0x1952):(_0xa097f5=(-0x59c+0x16*-0x2b+0x94f)/_0xa097f5,this['x']=_0x482168['x']*_0xa097f5,this['y']=_0x482168['y']*_0xa097f5,this['z']=_0x482168['z']*_0xa097f5,this['w']=_0x482168['w']*_0xa097f5),this;}['mulScalar'](_0x11c350,_0x4f49b2=this){return this['x']=_0x4f49b2['x']*_0x11c350,this['y']=_0x4f49b2['y']*_0x11c350,this['z']=_0x4f49b2['z']*_0x11c350,this['w']=_0x4f49b2['w']*_0x11c350,this;}}const _0x16e12a=_0x5b84f3=>{_0x4e1962[-0x524+-0x4c9+0xe7*0xb]=_0x5b84f3;const _0x1a690e=_0x5da89c[0x50b*0x1+0x644*0x1+-0xb4f];let _0x2f47ff=_0x1a690e>>-0x75c+-0x1eba+0x2626&-0x3c60+0xc66d+-0xa0d*0x1,_0x4f6549=_0x1a690e>>-0x159*0x1+0xdd*-0xd+0x2*0x64f&-0x1850+0x1*-0x1f1f+0x2c2*0x17;const _0xe41f7d=_0x1a690e>>0x1461+0x3e5*-0x2+-0xc80&-0x7*0x43+-0x3*-0x4dc+0x40*-0x2f;return _0xe41f7d<0x1*-0x1917+0x2*0xf72+0x2*-0x2b3?_0x2f47ff:_0xe41f7d>-0x2462+-0xfeb+-0x34db*-0x1?(_0x2f47ff|=0x3661*0x4+-0xfd1+-0x4db3,_0x2f47ff|=(_0xe41f7d===-0x195a+0xa2b+0xda*0x13?-0x16*0x3a+0x3ec*0x1+0x110:-0x2*0x7f+0x1*-0x511+0x610)&&_0x1a690e&0x166d0c*0x3+-0x301b59*-0x1+-0x2*-0x64ec1,_0x2f47ff):_0xe41f7d<-0x2589+-0x45*-0x28+-0x2*-0xd99?(_0x4f6549|=-0x1c6e+0x3*0x8a5+0xa7f,_0x2f47ff|=(_0x4f6549>>0x1d1f+-0x2379+0x6cc-_0xe41f7d)+(_0x4f6549>>-0x223c+-0x675+0x2922-_0xe41f7d&0x1*-0x192+-0x17b1+0x1944),_0x2f47ff):(_0x2f47ff|=_0xe41f7d-(-0x64d+-0x213c+0x1b*0x17b)<<-0x19f9+-0x1e67+0xf9*0x3a|_0x4f6549>>0xfcf+-0x1d02+0xd34,_0x2f47ff+=_0x4f6549&-0x17b*0x17+-0x1426*-0x1+0x164*0xa,_0x2f47ff);},_0x1f53f6=(_0x5ebd10,_0x4af294,_0xb0c29d,_0x240927,_0x4bd201,_0x2cdbc3,_0x3c85f6)=>{let _0x203b70=-0x3*-0xbb+0x5a*-0x43+0x155d,_0x401103=-0x13*0x1a2+0x2*0xc91+-0x1a*-0x3a,_0x361bb9=0x4*-0x78e+0x82*-0x1f+0x2df6,_0x25e04b=0xc04+0x24e5+-0x30e9,_0x318bf3=-0x765+0x17a3+-0x103e,_0x4c5430=0x11d4*-0x1+0x1d18*-0x1+-0x9c*-0x4d,_0x5e3542=!(-0x220d+0x36*-0x17+0x26e7);const _0x3fa02d=new Float32Array(0x1f9f+0x2165+-0x4101*0x1),_0x44078d=new Float32Array(-0x1f3*0x10+-0x1a5*-0x15+-0x356);for(let _0x182bee=-0xf26+0x177a+-0x854;_0x182bee<_0x5ebd10;++_0x182bee){const _0x36728c=_0x4af294[_0x182bee],_0x2d2b0b=_0xb0c29d[_0x182bee],_0x52145a=_0x240927[_0x182bee],_0x56ecb8=Math['max'](_0x4bd201[_0x182bee],_0x2cdbc3[_0x182bee],_0x3c85f6[_0x182bee]);if(!isFinite(_0x36728c)||!isFinite(_0x2d2b0b)||!isFinite(_0x52145a)||!isFinite(_0x56ecb8))continue;const _0x233b09=(-0x6f1*0x1+-0x126c*-0x2+-0x1*0x1de5)*Math['exp'](_0x56ecb8);_0x5e3542?(_0x5e3542=!(-0x26f0+-0x1679*-0x1+0x3e*0x44),_0x203b70=_0x36728c-_0x233b09,_0x401103=_0x2d2b0b-_0x233b09,_0x361bb9=_0x52145a-_0x233b09,_0x25e04b=_0x36728c+_0x233b09,_0x318bf3=_0x2d2b0b+_0x233b09,_0x4c5430=_0x52145a+_0x233b09):(_0x203b70=Math['min'](_0x203b70,_0x36728c-_0x233b09),_0x401103=Math['min'](_0x401103,_0x2d2b0b-_0x233b09),_0x361bb9=Math['min'](_0x361bb9,_0x52145a-_0x233b09),_0x25e04b=Math['max'](_0x25e04b,_0x36728c+_0x233b09),_0x318bf3=Math['max'](_0x318bf3,_0x2d2b0b+_0x233b09),_0x4c5430=Math['max'](_0x4c5430,_0x52145a+_0x233b09));}_0x5e3542||(_0x3fa02d[0x1eb3+-0x1431+-0xa82]=(_0x203b70+_0x25e04b)*(0x9ef*-0x1+-0x80b+0x3b*0x4e+0.5),_0x3fa02d[-0x1ab+-0x21db+0x2387]=(_0x401103+_0x318bf3)*(0xc9c+0x1144+0x4*-0x778+0.5),_0x3fa02d[-0x17bf+-0x1*0x97+0x1858]=(_0x361bb9+_0x4c5430)*(-0x10*-0x155+0x1511+-0x13*0x23b+0.5),_0x44078d[-0x161*-0x18+-0x2ad+-0x1e6b]=(_0x25e04b-_0x203b70)*(-0x1*0x170f+0x1ebf+0x1*-0x7b0+0.5),_0x44078d[-0x1a28+0x20*-0xc0+0x1*0x3229]=(_0x318bf3-_0x401103)*(-0x9b2+-0x21e0+0x2b92+0.5),_0x44078d[0x1bf*-0x7+-0x8*-0x1c4+-0x1e5]=(_0x4c5430-_0x361bb9)*(-0x2*0xe8b+-0x21d7+0x3eed*0x1+0.5)),self['postMessag'+'e']({'type':'updatedAab'+'bData','center':_0x3fa02d,'halfExtents':_0x44078d});},_0x301dd9=(_0x2119fe,_0xd70bf2,_0x353731,_0x4dfadb,_0x2c97a4,_0x329fdd,_0x44cd3a,_0x2ddf63,_0x5995d0,_0x4446df,_0x24726b,_0x29e140,_0x3db296,_0x13d513,_0x2b5ba7,_0x2f2165,_0x3d5eb5)=>{_0x52e592(),_0xdb859d=new Float32Array(_0x2119fe*(0x220b+-0x416*-0x3+-0x2e4a)),_0xfa1f53=new Float32Array(_0x2119fe*(0x1f*-0x4+0x1*-0x1b5c+0x1bdb)),_0x922cff=new Uint16Array(_0x2119fe*(0x1*-0xfef+0x1981+-0x98f*0x1)),_0x375ce3=new Float32Array(_0x2119fe*(0x1369+0xa78+0x2*-0xeef)),_0xd70bf2&&(_0x56d39a=new Float32Array(_0x2119fe*(-0x68*-0x49+-0x25f*0x1+-0x2*0xda3)),_0x133ba5=new Float32Array(_0x2119fe*(0xffd+0x2271*-0x1+-0x1277*-0x1)),_0x12c662=new Float32Array(_0x2119fe*(0x8ff*-0x3+-0x2*-0x95f+-0x12e*-0x7)),_0x5ba46e=new Float32Array(_0x2119fe));const _0xb558f2=new _0x33be4e(0x76b+-0x575+-0x1f6*0x1,0x39d*0x7+-0x14*0x95+0x5*-0x2bb,-0x1*0x23ad+-0x131e+0x36cb,0x512*0x7+-0x6c2*-0x5+0x5c6*-0xc);for(let _0x10f8ef=-0x3*-0x6d1+0x7e5+0x1c58*-0x1;_0x10f8ef<_0x2119fe;_0x10f8ef++)_0xb558f2['set'](_0x329fdd[_0x10f8ef],_0x44cd3a[_0x10f8ef],_0x2ddf63[_0x10f8ef],_0x5995d0[_0x10f8ef]),_0xb558f2['normalize'](),_0xb558f2['w']<0x1743*0x1+-0x1e9d+0x2*0x3ad&&_0xb558f2['mulScalar'](-(-0x1eb*0x3+-0x38e+0x4*0x254)),_0xfa1f53[_0x10f8ef*(-0x335*0x2+0x12bf+-0xc52)+(-0xc63+0x25b5+-0x1952)]=_0x353731[_0x10f8ef],_0xfa1f53[_0x10f8ef*(0x202b+0x1999*0x1+0xb8d*-0x5)+(0x3a+-0x25f9*-0x1+0x2*-0x1319)]=_0x4dfadb[_0x10f8ef],_0xfa1f53[_0x10f8ef*(-0x1e0d+0x1*0x10b1+0xd5f)+(-0x23c1*-0x1+0x1432+-0x37f1)]=_0x2c97a4[_0x10f8ef],_0xdb859d[_0x10f8ef*(0x3*-0xa59+-0x18b5+0x37c3)+(0x1*0x1565+-0xd*0x21d+-0x614*-0x1)]=_0x353731[_0x10f8ef],_0xdb859d[_0x10f8ef*(0x21d4+0x1b7*-0xe+0x117*-0x9)+(-0xf52*0x1+-0x153*0x2+0x2b*0x6b)]=_0x4dfadb[_0x10f8ef],_0xdb859d[_0x10f8ef*(0x1*0x16d+-0xc19+0x5*0x223)+(0x2186+-0x1*0x26db+0x557*0x1)]=_0x2c97a4[_0x10f8ef],_0x922cff[_0x10f8ef*(-0x23bd+0xabb*-0x3+0x1*0x43f1)+(-0x1066+0x1b10*-0x1+0x15bb*0x2)]=_0x16e12a(Math['exp'](_0x3db296[_0x10f8ef])),_0x922cff[_0x10f8ef*(-0x31*0x12+-0x2407+0x277c)+(0x15*-0x14e+-0x1f*0x115+0x3a*0x10d)]=_0x16e12a(Math['exp'](_0x13d513[_0x10f8ef])),_0x922cff[_0x10f8ef*(-0x1*-0x210b+-0x113+-0x1ff5)+(0xf9*0x1+-0x4b1+0x3*0x13e)]=_0x16e12a(Math['exp'](_0x2b5ba7[_0x10f8ef])),_0x375ce3[_0x10f8ef*(-0x116*-0x6+0x54b*-0x7+0x1e8c)+(-0x213f+-0x1*-0x1795+0x9aa)]=_0xb558f2['x'],_0x375ce3[_0x10f8ef*(0x1fb*-0x3+0x1096+-0xaa2)+(0x1270+-0x2*-0xecf+0x1*-0x300d)]=_0xb558f2['y'],_0x375ce3[_0x10f8ef*(0x5*-0x382+0x1819+-0x1*0x68c)+(0x79*-0x47+-0x40e*0x4+0x31c9)]=_0xb558f2['z'],_0xd70bf2&&_0x56d39a&&_0x133ba5&&(_0x56d39a[_0x10f8ef*(0x900+0x5ba*-0x1+-0x343*0x1)+(0x208d+0x37*-0x1+0x102b*-0x2)]=_0x4446df[_0x10f8ef],_0x56d39a[_0x10f8ef*(0x130f+-0x2c9+-0x1043*0x1)+(-0x2*0x496+-0x1*-0x215e+-0x1831)]=_0x24726b[_0x10f8ef],_0x56d39a[_0x10f8ef*(0x3d*0x2f+0x447*-0x1+-0x6e9)+(-0x1*-0x1789+-0xabb*0x2+0x1*-0x211)]=_0x29e140[_0x10f8ef],_0x12c662[_0x10f8ef*(-0x245e+0xd43*-0x1+0x31a4)+(-0x1d85+-0x1153*0x1+0x2ed8)]=_0x4446df[_0x10f8ef],_0x12c662[_0x10f8ef*(-0x248d*0x1+-0x61*-0xa+0x20c6)+(-0x1*-0x1011+-0x6d*-0x37+-0x277b)]=_0x24726b[_0x10f8ef],_0x12c662[_0x10f8ef*(0x2*-0x1a+-0x2f9*0x3+-0x7*-0x14e)+(0x13a7+0xfed+-0x3a*0x9d)]=_0x29e140[_0x10f8ef],_0x5ba46e[_0x10f8ef]=_0x3d5eb5?Math['exp'](_0x3d5eb5[_0x10f8ef]):-0xb1b*0x1+-0x1*0x1c33+0x274e,_0x133ba5[_0x10f8ef*(0x92b*-0x4+-0x1*0x50b+-0x7*-0x5f6)+(0x1b0e+0xcc0+-0x27ce)]=_0x2f2165?_0x2f2165[_0x10f8ef]:0x1*-0x1dee+-0x4d*-0x9+0x1b39,_0x133ba5[_0x10f8ef*(-0x11*0x137+0x59f*-0x1+0x1a49)+(-0x114*-0x12+-0x1*-0xbe1+0x8*-0x3e9)]=_0x5ba46e[_0x10f8ef]);const _0x35ecff=[_0xdb859d['buffer'],_0xfa1f53['buffer'],_0x922cff['buffer'],_0x375ce3['buffer']];_0xd70bf2&&_0x35ecff['push'](_0x56d39a['buffer'],_0x133ba5['buffer'],_0x12c662['buffer'],_0x5ba46e['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0xdb859d,'dataPosition':_0xfa1f53,'dataScale':_0x922cff,'dataRotation':_0x375ce3,'dataMotion':_0x56d39a,'dataTime':_0x133ba5,'motion':_0x12c662,'tScaleArray':_0x5ba46e},_0x35ecff);},_0x446e35=(_0xaf07a0,_0x265289,_0x4cd3f5,_0x46a2aa,_0xab20f8)=>{const _0x2a25e1=new Uint16Array(_0xaf07a0*(-0x1*0x927+-0x58b*0x6+0x1*0x2a6d)),_0x361e0=-0x2*-0x11f5+0x4*-0x4cc+-0x10ba+0.28209479177387814;for(let _0xf8d749=-0x350+0x665*0x5+-0x1ca9;_0xf8d749<_0xaf07a0;++_0xf8d749){const _0x20c50a=_0x265289[_0xf8d749]*_0x361e0+(0x4f9+-0x113a+0xc41+0.5),_0x1d6dbe=_0x4cd3f5[_0xf8d749]*_0x361e0+(-0x17*-0xd+0x14d6+-0x1601+0.5),_0x4ecf5b=_0x46a2aa[_0xf8d749]*_0x361e0+(0x1*0x26b5+0x2046+0x1*-0x46fb+0.5),_0x33ce78=_0xab20f8[_0xf8d749];_0x2a25e1[_0xf8d749*(0x19df+0x1aee+-0x34c9)+(-0x17a0+-0xca0*0x2+0x30e0)]=_0x16e12a(_0x20c50a),_0x2a25e1[_0xf8d749*(0x85*0x23+0x18dc+0x5*-0x89b)+(-0x3cd+-0xc*0x189+0x163a)]=_0x16e12a(_0x1d6dbe),_0x2a25e1[_0xf8d749*(0xdc0+-0x36a*-0x9+-0x2c76)+(-0x13*-0x9b+-0xab9+0x63*-0x2)]=_0x16e12a(_0x4ecf5b),_0x2a25e1[_0xf8d749*(-0x81b+-0x2ce*-0x6+-0x8b5)+(-0x2*0x800+0xb74+0x1*0x48f)]=_0x16e12a(_0x33ce78);}self['postMessag'+'e']({'type':'updatedCol'+'orData','data':_0x2a25e1});},_0x272175=(_0x35049b,_0x1831cc,_0x388f7e)=>{const _0x23818b=new Uint32Array(_0x35049b*(-0x5*0x3a5+-0x9d*-0x37+0x1*-0xf7e)),_0x5905e6=new Uint32Array(_0x35049b*(0x26a8+0x1a92+-0x4136)),_0x3070e7=new Uint32Array(_0x35049b*(0x1720+0x779*0x4+-0x3500)),_0x506580=new Uint32Array(_0x35049b*(-0x52a*-0x5+0x1*-0x14f0+-0x4de)),_0x3aed20={0x1:0x3,0x2:0x8,0x3:0xf}[_0x1831cc],_0x426abc=_0x388f7e,_0x5b96d0=0xbe2+0x183+-0x566,_0x340dfa=-0x1*-0x20c7+-0x25b1*0x1+-0x8e9*-0x1,_0x11e6ff=new Float32Array(0x1228+-0x1*0x1f01+-0xcda*-0x1),_0x2a48e6=new Uint32Array(_0x11e6ff['buffer']),_0x1735fe=new Array(_0x3aed20*(-0x1*-0x5d9+0x116c+-0x1742))['fill'](-0x11b2+0x129b+0x1*-0xe9);for(let _0x33d4a3=-0x1537+0xcfe+0x839*0x1;_0x33d4a3<_0x35049b;++_0x33d4a3){for(let _0x12ded7=0x1da7+-0x11*-0x3d+0x2*-0x10da;_0x12ded7<_0x3aed20;++_0x12ded7)_0x1735fe[_0x12ded7*(0x1e*-0x111+0x19b1*0x1+0x650)]=_0x426abc[_0x12ded7][_0x33d4a3],_0x1735fe[_0x12ded7*(-0x21a8+0x2*0xbaa+0xa57)+(0x25dd+-0x2*0xeed+-0x802)]=_0x426abc[_0x12ded7+_0x3aed20][_0x33d4a3],_0x1735fe[_0x12ded7*(0x2382+-0xb*0x332+-0x59*0x1)+(-0x1862+-0x457+0x1cbb)]=_0x426abc[_0x12ded7+_0x3aed20*(0x16*-0x20+0x198d+-0x16cb)][_0x33d4a3];let _0x429260=_0x1735fe[-0xc*-0x24c+0x4a*0x52+0xc1*-0x44];for(let _0xa95f9a=-0x807+-0x2b0*0xe+0x5b5*0x8;_0xa95f9a<_0x3aed20*(0x60a+-0x13e2*-0x1+-0x3*0x8a3);++_0xa95f9a)_0x429260=Math['max'](_0x429260,Math['abs'](_0x1735fe[_0xa95f9a]));if(_0x429260!==0xa4c+0x3*0x7ad+-0x2153){for(let _0x100854=0x10*0xbf+0x1078+-0x1c68;_0x100854<_0x3aed20;++_0x100854)_0x1735fe[_0x100854*(0x319*-0x1+0xb54*0x1+-0x20e*0x4)+(-0x4*0x99f+-0x15*0xa1+0x33b1)]=Math['max'](0x55c*-0x1+-0x1146+-0x2*-0xb51,Math['min'](_0x5b96d0,Math['floor']((_0x1735fe[_0x100854*(-0x857+0x2*0x1+0x858)+(0x2*0xbf5+0x2385+-0x3b6f*0x1)]/_0x429260*(-0x160c*0x1+-0xfb1+-0x1*-0x25bd+0.5)+(0x1a94+-0x4*0x9e+-0x181c+0.5))*_0x5b96d0+(-0x14e*0x1+0x25fe+-0x24b0+0.5)))),_0x1735fe[_0x100854*(0x22c1+0x268b+-0x4949)+(-0x1f*-0x10f+0x2*-0x134a+0x29*0x24)]=Math['max'](0x66d+-0x1f9f*0x1+0x1*0x1932,Math['min'](_0x340dfa,Math['floor']((_0x1735fe[_0x100854*(0x523*0x4+-0x13c0+-0xc9)+(0x146c+0x1*0x225b+-0x36c6)]/_0x429260*(-0x11*0x1c1+-0x6fe+0x24cf*0x1+0.5)+(0x145a+-0x1*0x1c97+0x83d+0.5))*_0x340dfa+(0x1e59+-0x1*0x47+-0x1e12+0.5)))),_0x1735fe[_0x100854*(-0x18b1+0x1*-0x16a1+0x2f55)+(-0x6bb*-0x4+-0xa69*0x1+-0x5*0x34d)]=Math['max'](-0x1a3*0x11+-0x1e7*0x9+-0x2*-0x1679,Math['min'](_0x5b96d0,Math['floor']((_0x1735fe[_0x100854*(0x2*0x1348+-0x12aa*0x1+-0x13e3)+(-0x9*-0x2a+0x26*-0x10+0xe8)]/_0x429260*(0x7*-0x1e5+0x827*0x3+0x599*-0x2+0.5)+(-0x1fc*0x5+-0x599*0x2+-0x151e*-0x1+0.5))*_0x5b96d0+(-0xf3*-0x26+0x1123+-0x1*0x3535+0.5))));_0x11e6ff[0x549*-0x7+-0x1121+0x3620]=_0x429260,_0x23818b[_0x33d4a3*(0x15b6+-0x3a9+-0x1209)+(-0x1*-0xa36+0x10*-0xdf+-0x2*-0x1dd)]=_0x2a48e6[-0xf*0x1d3+0x144b+-0x2*-0x389],_0x23818b[_0x33d4a3*(0x31*0x4+-0x167*0xd+-0x117b*-0x1)+(0x4a*-0x41+-0x872*0x1+0x13*0x16f)]=_0x1735fe[-0x1*0x25fa+-0x21f8+0x47f2]<<0x103f*0x1+0x229f+0x32c9*-0x1|_0x1735fe[-0x443*-0x3+-0x3*0x89+-0xb2d]<<-0x6e*-0xa+0x2d*0x37+-0xdec|_0x1735fe[0xb*-0x38b+-0x13c0+0x1f*0x1e5],_0x23818b[_0x33d4a3*(0x1ef4+0x6f*-0x2+0xf09*-0x2)+(0x1e89*0x1+-0x1*0x23d2+0x10f*0x5)]=_0x1735fe[-0x2566+-0x81*0x6+0x1*0x286f]<<0x3*-0x492+-0xf1a*-0x1+0x14f*-0x1|_0x1735fe[0x1a84+0x13*-0x1ee+-0xa2a*-0x1]<<-0x228f+0xfb1+-0x1*-0x12e9|_0x1735fe[0xf75*-0x2+0xb69+0x1386],_0x23818b[_0x33d4a3*(-0x6*0x536+-0x53e+0xb*0x352)+(-0x144c+-0x925*-0x4+-0x1045)]=_0x1735fe[-0x2d*-0x41+-0x830+0x337*-0x1]<<-0x9a2+-0x96b+0x1322|_0x1735fe[0x22*-0x121+-0xdec+0x3455]<<0xb98+0x2*0xb4d+-0x2227|_0x1735fe[0x112d+0x13c1*0x1+-0x24e6],_0x1831cc>0xe4c+-0x1*0xdf1+-0x5a&&(_0x5905e6[_0x33d4a3*(-0x3*0x82e+0xc5*-0x17+0x2a41)+(-0x17*0xa+0x10f7+-0x1011)]=_0x1735fe[0xae8+-0xcb9*0x2+0xe93]<<0x557*0x1+-0x1*0x12cd+0x1*0xd8b|_0x1735fe[0x31*-0x1+-0x2e3*-0x5+0x3*-0x4bc]<<-0xfd2+0x12e+0xeaf|_0x1735fe[0x26de+0x1f10+-0x45e3],_0x5905e6[_0x33d4a3*(0x1b05+0xacf+-0x974*0x4)+(0x1*0x4eb+0x801+-0xceb*0x1)]=_0x1735fe[-0x1b4a+0xaed*0x1+0x1069]<<0xc80+0x594+0x11ff*-0x1|_0x1735fe[0xa5a+0xde2+-0x182f]<<0xdba*0x1+-0xf13+0x164|_0x1735fe[-0x2*0x115a+-0x1c02+0x3ec4],_0x5905e6[_0x33d4a3*(0xed4+0x1c1d+0xe4f*-0x3)+(0x1685*0x1+-0xbfb*-0x3+-0x9be*0x6)]=_0x1735fe[-0x134f*0x1+-0x1af*-0x9+0x437]<<0x689+0x8*0x262+0x5c*-0x47|_0x1735fe[0x1e95+-0x3*-0x26d+-0x973*0x4]<<-0x5*0x3e6+-0x1787+-0xd*-0x350|_0x1735fe[-0x1*0xc26+-0x1dc0+0x29f7],_0x5905e6[_0x33d4a3*(0x128*0x17+0x1f7*0x7+-0x2855)+(-0xcd*-0x7+-0x1d0e+0x1776)]=_0x1735fe[0x99d+0x8e1*-0x1+0x22*-0x5]<<0xb29*0x1+0x1643+0xb1d*-0x3|_0x1735fe[0x4*-0x58f+0xd*-0x47+0x6b*0x3e]<<0x7c9*-0x3+0x1318+0x2*0x227|_0x1735fe[-0x14e8+-0x104c+0x2548],_0x1831cc>-0x1*-0x196+0x21fe+0x11c9*-0x2?(_0x3070e7[_0x33d4a3*(0x295*0x2+0x3*0xc46+-0x14fc*0x2)+(0x57*0x62+0x1f*0xa9+-0x35c5*0x1)]=_0x1735fe[0x1*-0x19c1+0x1*0xa0f+0xfc7]<<-0x4*-0x800+-0x77*0x21+0x1094*-0x1|_0x1735fe[-0xb*0xad+0x23f5+-0x1c70]<<0x5*0x155+0x1a84+-0x2122|_0x1735fe[-0x6*-0x4f2+-0x9*-0x3b9+-0x3f16],_0x3070e7[_0x33d4a3*(-0x11c8+0xe23+0x3a9)+(0x4db+-0x5df*-0x3+-0x1677)]=_0x1735fe[0x17e9+-0x3*-0x687+-0x2b66]<<0x1fa9+0x5*-0x435+-0xa8b|_0x1735fe[-0x253*-0x3+0x584+-0xc64]<<-0xd*0x5a+0x2*-0x517+0x1*0xecb|_0x1735fe[0xd1*-0x13+-0x2183+0x189*0x20],_0x3070e7[_0x33d4a3*(-0xf70+0x27d+0xcf7)+(0xeb7+-0x6*-0x486+-0x1*0x29d9)]=_0x1735fe[0x8f*0x25+0x51*-0x13+-0xe8d]<<-0x16d*-0xb+0x217c*-0x1+0x11e2|_0x1735fe[-0x1787+-0x1640+0x11*0x2b3]<<0xacd+0xe57+0x1919*-0x1|_0x1735fe[-0xdcc*0x2+-0x10a6*-0x2+0x9f*-0x9],_0x3070e7[_0x33d4a3*(-0x1797+0x4cb*0x8+-0xebd)+(0xb86+0x173f*0x1+-0x22c2)]=_0x1735fe[-0x1568+0x21e1+-0x1*0xc5b]<<-0x1de7+-0x17a3+0x359f|_0x1735fe[0xc2f+0x228a+0x4a9*-0xa]<<0x14fc+-0xb3e+-0x1*0x9b3|_0x1735fe[-0x1*-0x2f+-0x16ab*0x1+0x2*0xb4e],_0x506580[_0x33d4a3*(-0x8*-0x29a+-0x998+-0x3*0x3bc)+(0x40c+-0x1*-0x1d95+-0x21a1)]=_0x1735fe[-0x190a+0x402*0x9+-0xae7]<<0x1*0xd5d+0xb98+-0x10*0x18e|_0x1735fe[0x1607+-0x2ea*-0x7+-0x1b*0x191]<<-0x2603+-0x271*-0x1+0x239d|_0x1735fe[0x1757+-0xbf*-0x1+-0x1*0x17f3],_0x506580[_0x33d4a3*(0x1e6e+-0x3e8+-0x1a82)+(0xc35+-0xd*-0x115+-0x1a45)]=_0x1735fe[0x14f*-0xe+0x66a+0x3*0x404]<<0x1c2*0xf+-0x5d*-0x1f+-0x1b*0x164|_0x1735fe[-0xb4d+-0x1387*-0x1+-0x815]<<-0x3b*0x67+-0x153e+0x2d06|_0x1735fe[0x7*0xdd+0x1*-0x1b4f+-0x1*-0x156a],_0x506580[_0x33d4a3*(-0x12a1+-0xce*0x1d+0x29fb*0x1)+(-0x227e+0x159*0x10+0xcf0)]=_0x1735fe[0x246b+0x24fe+0x1*-0x4942]<<0x1b46+-0x12f5+0x4*-0x20f|_0x1735fe[-0x262f+0xab8+-0x935*-0x3]<<-0x1*-0x258d+-0x519+-0x2069|_0x1735fe[0xc27+0x2074+-0x2c72],_0x506580[_0x33d4a3*(0x48*-0x60+0x154f+-0x3*-0x1e7)+(-0x1*0xa1f+-0x1*0x8e9+0x130b*0x1)]=_0x1735fe[0x516+0x20d9+-0x25c5]<<-0x2011*-0x1+-0x4af+-0x1*0x1b4d|_0x1735fe[0x53*0x25+-0xd26+-0xd*-0x1a]<<-0x4c8*0x4+0x51*-0x49+-0x2a44*-0x1|_0x1735fe[0x2ce*-0x5+-0x1*0x2f+0x4cb*0x3]):_0x3070e7[_0x33d4a3]=_0x1735fe[0x8*0x410+-0x979*-0x4+-0x464f]<<-0x3ce+0x1*0x435+0x2*-0x29|_0x1735fe[0xdb9+0x1*-0x178d+0x36*0x2f]<<0x18d9*0x1+-0xe15+-0x131*0x9|_0x1735fe[0x1470*-0x1+-0x1757+-0x2bde*-0x1]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x23818b,'sh4to7Data':_0x5905e6,'sh8to11Data':_0x3070e7,'sh12to15Data':_0x506580}},[_0x23818b['buffer'],_0x5905e6['buffer'],_0x3070e7['buffer'],_0x506580['buffer']]);},_0x52e592=()=>{_0xdb859d=null,_0x133ba5=null,_0x375ce3=null,_0xfa1f53=null,_0x56d39a=null,_0x922cff=null,_0x12c662=null,_0x5ba46e=null;};}let VA=class extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+zA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x5a1409,_0x575880,_0x394660){_0x5a1409['onmessage']=_0x451fe7=>{if(!this['worker'])return;const {data:_0x314bab}=_0x451fe7;if(_0x314bab['type']===_0x575880)switch(_0x575880){case'updatedSHD'+'ata1':_0x394660(_0x314bab['data']);break;case'updatedCol'+'orData':_0x394660(_0x314bab['data']);break;case'updatedTra'+'nsformData':_0x394660(_0x314bab);break;case'updatedAab'+'bData':_0x394660(_0x314bab);break;}};}['updateSHDa'+'ta1'](_0x4d1bd7,_0x20aa37,_0x5f17dd){var _0x53b2cd;return(_0x53b2cd=this['worker'])==null||_0x53b2cd['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x4d1bd7,'shBands':_0x20aa37,'SHData':_0x5f17dd}),new Promise(_0x1fa3fa=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x515bdd=>{_0x1fa3fa(_0x515bdd);});});}async['updateColo'+'rData'](_0x25cb27,_0x4563c8,_0x26d267,_0x416982,_0x588227){var _0x1ba997;return(_0x1ba997=this['worker'])==null||_0x1ba997['postMessag'+'e']({'type':'updateColo'+'rData','numSplats':_0x25cb27,'cr':_0x4563c8,'cg':_0x26d267,'cb':_0x416982,'ca':_0x588227}),new Promise(_0x22e98e=>{this['workerMess'+'ageFn'](this['worker'],'updatedCol'+'orData',_0x2b3c48=>{_0x22e98e(_0x2b3c48);});});}async['calcAabb'](_0x4fa1ab,_0x11e987,_0x297882,_0x1e6a43,_0x4af847,_0x3a869b,_0x2f5922){var _0x23d651;const _0x51175e=new Float32Array(_0x11e987),_0x478aca=new Float32Array(_0x297882),_0x1a60b8=new Float32Array(_0x1e6a43),_0x6532f8=new Float32Array(_0x4af847),_0x25aee4=new Float32Array(_0x3a869b),_0x4a9763=new Float32Array(_0x2f5922);return(_0x23d651=this['worker'])==null||_0x23d651['postMessag'+'e']({'type':'calcAabb','numSplats':_0x4fa1ab,'x':_0x51175e,'y':_0x478aca,'z':_0x1a60b8,'sx':_0x6532f8,'sy':_0x25aee4,'sz':_0x4a9763},[_0x51175e['buffer'],_0x478aca['buffer'],_0x1a60b8['buffer'],_0x6532f8['buffer'],_0x25aee4['buffer'],_0x4a9763['buffer']]),new Promise(_0xe90f7e=>{this['workerMess'+'ageFn'](this['worker'],'updatedAab'+'bData',_0x2d13df=>{_0xe90f7e(_0x2d13df);});});}async['updateTran'+'sData'](_0x15ed64,_0x3805f1,_0x4212d5,_0x49db24,_0x2086b7,_0xed6479,_0x269610,_0x2b9d8d,_0x45c2c5,_0x5332c9,_0x3bed3c,_0x241903,_0x5a1d02,_0x5e419d,_0x5b3a37,_0x98e8f7,_0x50ed1c){var _0x350e9c;return(_0x350e9c=this['worker'])==null||_0x350e9c['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x15ed64,'is4D':_0x3805f1,'x':_0x4212d5,'y':_0x49db24,'z':_0x2086b7,'rx':_0xed6479,'ry':_0x269610,'rz':_0x2b9d8d,'rw':_0x45c2c5,'mx':_0x5332c9,'my':_0x3bed3c,'mz':_0x241903,'sx':_0x5a1d02,'sy':_0x5e419d,'sz':_0x5b3a37,'muT':_0x98e8f7,'tScale':_0x50ed1c}),new Promise(_0x4a5fe5=>{const _0x51d674=_0x51a9ca=>{_0x4a5fe5(_0x51a9ca);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x51d674);});}['destroy'](){var _0x449333;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x449333=this['worker'])==null||_0x449333['terminate'](),this['worker']=null);}};const $_=(_0x4e8c6e,_0xc80b26)=>{const _0x1bda05=[];for(let _0x559654=0xc9a*-0x2+0x1c*0x44+0x6*0x2f6;_0x559654<_0xc80b26;++_0x559654)_0x1bda05['push'](_0x4e8c6e['getProp']('f_rest_'+_0x559654));return _0x1bda05;};class GA extends Zy{constructor(_0x1fd664,_0x547167){console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),super(_0x1fd664,_0x547167),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(-0x4*0x115+-0xbe+0x1*0x513)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new VA(),this['assetsMana'+'gerLoadedT'+'ime']=-0x244e+0x1*-0xdf+0x1299*0x2);}async['updateData'](){var _0x1e0dc7,_0x2ad0de,_0x4ef5b5,_0xf3057c,_0x1a5bce,_0x5cf82a,_0x36b5d7,_0x4f4256,_0x3a6bee,_0x3f376f,_0x5ce706;console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Data'),await super['updateData']();const _0x1d5312=this['gsplatData'];if(!_0x1d5312)return;this['is4D']=_0x1d5312['is4D'];const _0x370a0c=await this['getTransfo'+'rmDataByWo'+'rker'](_0x1d5312);this['aabb']=new De(),await _0x1d5312['calcAabbAs'+'ync'](this['aabb'],this['updateData'+'Worker']),this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x370a0c['centers'],this['motion']=_0x370a0c['motion'],this['tScale']=_0x370a0c['tScaleArra'+'y'],this['muT']=await _0x1d5312['getMuT'](),this['timeIndex']=await _0x1d5312['getTimeInd'+'ex']();const _0x18ccd8=this['evalTextur'+'eSize'](_0x1d5312['numSplats']);this['colorTextu'+'re']?((_0x1e0dc7=this['colorTextu'+'re2'])==null||_0x1e0dc7['destroy'](),(_0x2ad0de=this['transformA'+'Texture2'])==null||_0x2ad0de['destroy'](),(_0x4ef5b5=this['transformB'+'Texture2'])==null||_0x4ef5b5['destroy'](),(_0xf3057c=this['transformR'+'Texture2'])==null||_0xf3057c['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x18ccd8),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x18ccd8),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x18ccd8),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x18ccd8),this['is4D']&&((_0x1a5bce=this['transformM'+'otionTextu'+'re2'])==null||_0x1a5bce['destroy'](),(_0x5cf82a=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x5cf82a['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x18ccd8),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x18ccd8))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x18ccd8),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x18ccd8),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x18ccd8),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x18ccd8),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x18ccd8),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x18ccd8),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x18ccd8),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x18ccd8),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x18ccd8),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x18ccd8),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x18ccd8),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x18ccd8))),await this['updateColo'+'rData'](_0x1d5312),await this['updateTran'+'sformFromD'+'ata'](_0x370a0c),this['shBands']=_0x1d5312['shBands'],this['shBands']>0x1*0x1c0d+0x3*0xa21+0x10*-0x3a7&&(this['sh1to3Text'+'ure']?((_0x36b5d7=this['sh1to3Text'+'ure2'])==null||_0x36b5d7['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x18ccd8),this['shBands']>0x141e+-0x18f9+0x4dc&&((_0x4f4256=this['sh4to7Text'+'ure2'])==null||_0x4f4256['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x18ccd8),this['shBands']>0x266d+0x1312*-0x1+-0x1359?((_0x3a6bee=this['sh8to11Tex'+'ture2'])==null||_0x3a6bee['destroy'](),(_0x3f376f=this['sh12to15Te'+'xture2'])==null||_0x3f376f['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x18ccd8),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x18ccd8)):((_0x5ce706=this['sh8to11Tex'+'ture2'])==null||_0x5ce706['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x18ccd8)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x18ccd8),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x18ccd8),this['shBands']>-0x64d*0x3+-0x2b1+0x1599&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x18ccd8),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x18ccd8),this['shBands']>-0x58c+-0x201e*-0x1+-0x11*0x190?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x18ccd8),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x18ccd8),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x18ccd8),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x18ccd8)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Yi,_0x18ccd8),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Yi,_0x18ccd8)))),await this['updateSHDa'+'taByWorker'](_0x1d5312));}['updateText'+'ure'](){console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Texture'),!this['isDestroye'+'d']&&(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x59edf7){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x59edf7}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20releas'+'eSeqGSplat'+'\x20all'),this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x195ef4,_0x3dfe4d,_0x479373,_0x448697,_0x2112bc){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x195ef4,'timeOption':_0x3dfe4d,'loadedTime':_0x479373,'asset':_0x448697,'events':_0x2112bc}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(-0x33*-0x34+-0x183c+0xde0);try{for(;this['appendQueu'+'e']['length']>-0xa17+-0x23bb*-0x1+-0x19a4;){const _0x4b6f7e=this['appendQueu'+'e']['shift']();_0x4b6f7e['type']==='append'?await this['processApp'+'endTask'](_0x4b6f7e['data']):_0x4b6f7e['type']==='release'&&await this['processRel'+'easeTask'](_0x4b6f7e['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x1*0xf0d+-0x1*0xb3e+-0x1e7*0x2);}}}async['processRel'+'easeTask'](_0x409cf8){const {index:_0x3ee8de}=_0x409cf8;console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.relea'+'seGSplatRe'+'source',_0x3ee8de),!this['isDestroye'+'d']&&await this['gsplatData']['releaseSeq'+'Data'](_0x3ee8de);}async['processApp'+'endTask'](_0x21262b){var _0x1efdd7;const {gsplatData:_0x7981cc,timeOption:_0x389af7,loadedTime:_0x495d85,asset:_0x117d0c,events:_0x50dff2}=_0x21262b;!this['gsplatData']||this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.appen'+'dGSplatRes'+'ource'),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x389af7,await this['gsplatData']['appendGSpl'+'atData'](_0x7981cc,_0x495d85,_0x389af7),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20gspla'+'tData.appe'+'ndGSplatDa'+'ta',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x172d+-0x1da6+-0x4f*-0x15),_0x7981cc['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x7981cc['numSplats'])['toFixed'](0x1e*0xb4+0x19a8+-0x1*0x2ebd)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20this.'+'updateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x2a4+0x8b3*-0x2+-0x140c*-0x1),_0x7981cc['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),(_0x1efdd7=this['gsplatInst'+'ance'])==null||_0x1efdd7['updateInst'+'anceData'](this),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20updat'+'eInstanceD'+'ata',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x15a4*0x1+-0x3b5+-0x11ed),_0x7981cc['numSplats']),this['asset']=_0x117d0c,this['assetsMana'+'gerLoadedT'+'ime']=_0x495d85,this['events']=_0x50dff2);}['fireAssets'+'ManagerTim'+'eIndex'](){var _0x4a2216;const _0x529223=this['assetsMana'+'gerLoadedT'+'ime'];console['log']('____\x20ENGIN'+'E\x20IVAN','fireAssets'+'ManagerTim'+'eIndex',_0x529223),(_0x4a2216=this['asset'])==null||_0x4a2216['fire']('setAssetsL'+'oaded',_0x529223);}['destroy'](){var _0x305e7d,_0x1c2f10,_0x273cfe,_0xee2ec3,_0x560d11,_0x15c223,_0x40c300,_0x52dd19,_0x4c1c60,_0x206a14,_0x353645,_0x52df96,_0x5c5091,_0x46a6ea,_0x38760b,_0x2b7fdb,_0x39f342,_0x5eb27b,_0x385f9a,_0x2949bd,_0x4b4865;(_0x305e7d=this['updateData'+'Worker'])==null||_0x305e7d['destroy'](),this['updateData'+'Worker']=void(-0x27*-0x2f+-0x12*0x4f+-0x19b),(_0x1c2f10=this['colorTextu'+'re'])==null||_0x1c2f10['destroy'](),(_0x273cfe=this['transformA'+'Texture'])==null||_0x273cfe['destroy'](),(_0xee2ec3=this['transformB'+'Texture'])==null||_0xee2ec3['destroy'](),(_0x560d11=this['transformR'+'Texture'])==null||_0x560d11['destroy'](),(_0x15c223=this['transformM'+'otionTextu'+'re'])==null||_0x15c223['destroy'](),(_0x40c300=this['transformL'+'ifecycleTe'+'xture'])==null||_0x40c300['destroy'](),(_0x52dd19=this['sh1to3Text'+'ure'])==null||_0x52dd19['destroy'](),(_0x4c1c60=this['sh4to7Text'+'ure'])==null||_0x4c1c60['destroy'](),(_0x206a14=this['sh8to11Tex'+'ture'])==null||_0x206a14['destroy'](),(_0x353645=this['sh12to15Te'+'xture'])==null||_0x353645['destroy'](),(_0x52df96=this['colorTextu'+'re2'])==null||_0x52df96['destroy'](),(_0x5c5091=this['transformA'+'Texture2'])==null||_0x5c5091['destroy'](),(_0x46a6ea=this['transformB'+'Texture2'])==null||_0x46a6ea['destroy'](),(_0x38760b=this['transformR'+'Texture2'])==null||_0x38760b['destroy'](),(_0x2b7fdb=this['transformM'+'otionTextu'+'re2'])==null||_0x2b7fdb['destroy'](),(_0x39f342=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x39f342['destroy'](),(_0x5eb27b=this['sh1to3Text'+'ure2'])==null||_0x5eb27b['destroy'](),(_0x385f9a=this['sh4to7Text'+'ure2'])==null||_0x385f9a['destroy'](),(_0x2949bd=this['sh8to11Tex'+'ture2'])==null||_0x2949bd['destroy'](),(_0x4b4865=this['sh12to15Te'+'xture2'])==null||_0x4b4865['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x399b4e){var _0xecee2,_0x550906,_0xef4887,_0x17688c,_0x4094cb,_0x45af6a,_0x3c337e,_0x24f5e4,_0x203d7d,_0x1b96bd,_0x2aa36c,_0x13a64f,_0x136677;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0xab6c2a=((_0xecee2=_0x399b4e['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0xbb*0x2c+0x7*-0x23+0x2119):_0xecee2['data'])??0x1eb+-0x25cd*0x1+0x23e2*0x1,_0x2a44dc=((_0x550906=_0x399b4e['getParamet'+'er']('uSplatScal'+'e'))==null?void(0x496*0x1+0x1a57*-0x1+-0x1*-0x15c1):_0x550906['data'])??0x8e+0x1*-0x50d+-0x8*-0x90,_0x163457=((_0xef4887=_0x399b4e['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x2cb*-0x4+0x13e5+0x21*-0xf1):_0xef4887['data'])??-0xd6f*0x1+0x54d+0x823,_0x3ad2aa=((_0x17688c=_0x399b4e['getParamet'+'er']('uHueOffset'))==null?void(-0x48*-0x2f+0x4f+-0xd87*0x1):_0x17688c['data'])??0x671*-0x1+0x4b1*0x5+-0x1104,_0x55dd8a=((_0x4094cb=_0x399b4e['getParamet'+'er']('uInvertOpa'+'city'))==null?void(0x5a*-0x43+0x1a5b+-0x2cd):_0x4094cb['data'])??-0x129d+-0x248f+0x372c,_0x53d540=((_0x45af6a=_0x399b4e['getParamet'+'er']('uOpacity'))==null?void(0x1*0x18c7+0x5*-0xa5+0xb2*-0x1f):_0x45af6a['data'])??0x112b+0xed6+-0x2000,_0x7e2501=((_0x3c337e=_0x399b4e['getParamet'+'er']('clrOffset'))==null?void(-0x8*0x226+-0x245a+0x4d*0xb2):_0x3c337e['data'])??[0x1*-0x142b+0x1dbd+-0x992,0xd75*0x1+-0xe*-0x13b+0x5*-0x623,-0x1*0x1915+-0x3*0x469+0x8*0x4ca,0x47*-0x57+-0x1fd+0x1a1f],_0xe5f301=((_0x24f5e4=_0x399b4e['getParamet'+'er']('clrScale'))==null?void(-0x9b8*-0x1+0x1ed3+-0x61*0x6b):_0x24f5e4['data'])??[-0xec0*0x2+-0x5fa+0x237b,0x1b88+-0x716*-0x2+0x19*-0x1ab,-0x1af*-0x13+-0x6*0x45d+-0x5ce,-0x1*-0x625+-0x802+-0x1de*-0x1],_0x3c0930=((_0x203d7d=_0x399b4e['getParamet'+'er']('uShapeN'))==null?void(0x23ac+-0x595*-0x3+-0x27f*0x15):_0x203d7d['data'])??0x2a6*-0x3+-0x3*0x6d+0x1*0x939,_0xe36e78=((_0x1b96bd=_0x399b4e['getParamet'+'er']('mode'))==null?void(0x2*-0xe3c+-0x1d*-0xd9+0x3e3):_0x1b96bd['data'])??0x2629+0x1*-0xf4f+0xf*-0x186,_0x50d74e=((_0x2aa36c=_0x399b4e['getParamet'+'er']('ringSize'))==null?void(0x3*0x423+0xa31*0x1+-0x169a):_0x2aa36c['data'])??0x1bd1+-0x1d85+-0x2*-0xda,_0x162309=((_0x13a64f=_0x399b4e['defines'])==null?void(-0x1a2*0x13+-0x1*0xc5+0x1fcb):_0x13a64f['get']('uOpenAnim'))??'0',_0x465d6e=((_0x136677=_0x399b4e['defines'])==null?void(0x32*0x4b+0x1*-0xbc4+-0x2e2):_0x136677['get']('uControlCo'+'lorMode'))??'0';_0x399b4e['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x399b4e['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x399b4e['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x399b4e['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x399b4e['setParamet'+'er']('uSplatScal'+'e',_0x2a44dc),_0x399b4e['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0xab6c2a),_0x399b4e['setParamet'+'er']('uSaturatio'+'n',_0x163457),_0x399b4e['setParamet'+'er']('uHueOffset',_0x3ad2aa),_0x399b4e['setParamet'+'er']('uInvertOpa'+'city',_0x55dd8a),_0x399b4e['setParamet'+'er']('uOpacity',_0x53d540),_0x399b4e['setParamet'+'er']('clrOffset',_0x7e2501),_0x399b4e['setParamet'+'er']('clrScale',_0xe5f301),_0x399b4e['setParamet'+'er']('uShapeN',_0x3c0930),_0x399b4e['setParamet'+'er']('mode',_0xe36e78),_0x399b4e['setParamet'+'er']('ringSize',_0x50d74e),_0x399b4e['setParamet'+'er']('prerenderC'+'Time',0xd*0x233+-0x1b42+-0x1*0x155),_0x399b4e['setParamet'+'er']('renderSpac'+'e',-0xb3*0x1d+-0x37+0x49*0x48),_0x399b4e['setParamet'+'er']('endSpace',-0x493+-0x1058+-0x91*-0x25),_0x399b4e['setDefine']('uOpenAnim',_0x162309),_0x399b4e['setDefine']('uControlCo'+'lorMode',_0x465d6e),this['transformM'+'otionTextu'+'re']&&_0x399b4e['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x399b4e['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x399b4e['setDefine']('SH_BANDS',this['shBands']),_0x399b4e['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x399b4e['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x399b4e['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x399b4e['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x399b4e['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x53fa54){const _0x1b3fc4=Math['ceil'](Math['sqrt'](_0x53fa54)),_0x2d55ad=Math['ceil'](_0x53fa54/_0x1b3fc4);return new J(_0x1b3fc4,_0x2d55ad);}async['updateColo'+'rData'](_0x1d9e68){var _0x4ff795;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x19b07b=this['colorTextu'+'re2'];if(!_0x19b07b||this['isDestroye'+'d'])return;const _0x4b77f8=_0x1d9e68['getProp']('f_dc_0'),_0x42f85a=_0x1d9e68['getProp']('f_dc_1'),_0x11d7bc=_0x1d9e68['getProp']('f_dc_2'),_0x7a629d=_0x1d9e68['getProp']('opacity');let _0x18ec39=(_0x4ff795=_0x1d9e68['transformD'+'ata'])==null?void(0xb05+0x1*-0x1071+0x56c):_0x4ff795['dataColor'];_0x18ec39||(_0x18ec39=await this['updateData'+'Worker']['updateColo'+'rData'](_0x1d9e68['numSplats'],_0x4b77f8,_0x42f85a,_0x11d7bc,_0x7a629d)),await this['idleUpdate'+'TexturePro'+'mise'](_0x19b07b,_0x18ec39);}async['getTransfo'+'rmDataByWo'+'rker'](_0x5b6c4f){var _0x1045fa;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x1045fa=_0x5b6c4f['transformD'+'ata'])!=null&&_0x1045fa['dataCenter'+'s'])return{'centers':_0x5b6c4f['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x5b6c4f['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x5b6c4f['transformD'+'ata']['dataScale'],'dataRotation':_0x5b6c4f['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x5b6c4f['transformD'+'ata']['dataMotion'],'dataTime':_0x5b6c4f['transformD'+'ata']['dataTime'],'motion':_0x5b6c4f['transformD'+'ata']['motion'],'tScaleArray':_0x5b6c4f['transformD'+'ata']['tScaleArra'+'y']};const _0x5aab11=_0x5b6c4f['getProp']('x'),_0x22a479=_0x5b6c4f['getProp']('y'),_0x20d2e2=_0x5b6c4f['getProp']('z'),_0x5c1aa1=_0x5b6c4f['getProp']('rot_1'),_0x1b752c=_0x5b6c4f['getProp']('rot_2'),_0x41efec=_0x5b6c4f['getProp']('rot_3'),_0x3184dc=_0x5b6c4f['getProp']('rot_0'),_0xc940af=_0x5b6c4f['getProp']('motion_0'),_0x2c2928=_0x5b6c4f['getProp']('motion_1'),_0x3d76cc=_0x5b6c4f['getProp']('motion_2'),_0x235ff2=_0x5b6c4f['getProp']('scale_0'),_0x263dd1=_0x5b6c4f['getProp']('scale_1'),_0x255abc=_0x5b6c4f['getProp']('scale_2'),_0x301364=_0x5b6c4f['getProp']('t'),_0x4fbe95=_0x5b6c4f['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x5b6c4f['numSplats'],this['is4D'],_0x5aab11,_0x22a479,_0x20d2e2,_0x5c1aa1,_0x1b752c,_0x41efec,_0x3184dc,_0xc940af,_0x2c2928,_0x3d76cc,_0x235ff2,_0x263dd1,_0x255abc,_0x301364,_0x4fbe95);}async['updateTran'+'sformFromD'+'ata'](_0x48df23){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x48df23['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x48df23['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x48df23['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x48df23['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x48df23['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x1c6533,_0xb2361e){if(!this['isDestroye'+'d'])return new Promise(_0x17f50b=>{requestIdleCallback(()=>{const _0x1d2fc6=_0x1c6533['lock']();_0x1d2fc6==null||_0x1d2fc6['set'](_0xb2361e),_0x1c6533['unlock'](),_0x17f50b(!(0x240b+-0x280+-0x218b));},{'timeout':0x12c});});}async['updateTran'+'sformData'](_0x252e26){var _0x1c5ebd,_0x340d67,_0x8e78e,_0x921048;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformData'),this['isDestroye'+'d'])return;const _0x372919=Tn['float2Half'];if(!this['transformA'+'Texture'])return;const _0x21df63=this['transformA'+'Texture']['lock'](),_0x279aac=this['transformR'+'Texture']['lock'](),_0x254e07=this['transformB'+'Texture']['lock'](),_0x3fc910=(_0x1c5ebd=this['transformM'+'otionTextu'+'re'])==null?void(-0x517*0x1+-0xe9f*-0x1+-0x988):_0x1c5ebd['lock'](),_0x39cb0b=(_0x340d67=this['transformL'+'ifecycleTe'+'xture'])==null?void(-0x25fd+-0x175b+-0x1*-0x3d58):_0x340d67['lock'](),_0x166abc=new D(),_0x5a9ae8=new le(),_0x262ee9=new D(),_0x39b805=new D(),_0x501cac=_0x252e26['createIter'](_0x166abc,_0x5a9ae8,_0x262ee9,null,_0x39b805),_0x1f1341=_0x252e26['getProp']('t'),_0x268b93=_0x252e26['getProp']('t_scale');for(let _0x452291=0x20ec+0x16d*0x1b+0x476b*-0x1;_0x452291<_0x252e26['numSplats'];_0x452291++)_0x501cac['read'](_0x452291),_0x5a9ae8['normalize'](),_0x5a9ae8['w']<-0x47*-0x1b+0x1a*-0xa3+0xd3*0xb&&_0x5a9ae8['mulScalar'](-(0x942+-0x8f*-0x41+-0x2d90)),_0x21df63[_0x452291*(-0x1*0x2174+-0x1145+0x32bc)+(0x1654+0xa0+-0x16f4*0x1)]=_0x166abc['x'],_0x21df63[_0x452291*(0xb*-0x65+-0x1ae4+0x1f3e)+(0x9*-0xa8+-0x848*0x2+0x1679)]=_0x166abc['y'],_0x21df63[_0x452291*(-0x25d5+-0x355+0x292d)+(0x2*-0xfa7+-0x1eb5+0x3e05)]=_0x166abc['z'],_0x254e07[_0x452291*(0xfe5*0x2+-0x1d*0xc5+-0x976)+(-0x5dd+-0x1e30+0x1*0x240d)]=_0x372919(_0x262ee9['x']),_0x254e07[_0x452291*(0xf*0xfb+-0x2516+0x1664)+(0x1e64+0x140a+-0x326d)]=_0x372919(_0x262ee9['y']),_0x254e07[_0x452291*(-0x173b+-0x1*0x730+0x52*0x5f)+(-0x202f+0x2047+-0x16)]=_0x372919(_0x262ee9['z']),_0x279aac[_0x452291*(0x9*0x3eb+0x6bf+-0x33b*0xd)+(0x2*-0x5ad+-0x1c77+0x27d1)]=_0x5a9ae8['x'],_0x279aac[_0x452291*(0x1325+0x10a6*0x2+-0x346e)+(0x1*-0x747+0xbde+-0x496)]=_0x5a9ae8['y'],_0x279aac[_0x452291*(-0xaab*0x1+0x12*0xb+0x9e8)+(-0x36f+0x590*0x3+0x1*-0xd3f)]=_0x5a9ae8['z'],this['is4D']&&_0x3fc910&&_0x39cb0b&&(_0x3fc910[_0x452291*(0x255+-0xb95*-0x3+-0x2511)+(0x1bca+-0x8d*-0x7+-0x1fa5*0x1)]=_0x39b805['x'],_0x3fc910[_0x452291*(0x49d*-0x1+0x2433+-0x89*0x3b)+(-0xe16+0x66c+0x97*0xd)]=_0x39b805['y'],_0x3fc910[_0x452291*(-0x1277+0x238b+-0x1111)+(0x8b5*-0x4+0xe4f+0x1487)]=_0x39b805['z'],_0x39cb0b[_0x452291*(0x1fc3*0x1+-0x5*0x2d7+-0x118d)+(-0xc8*0x16+0x1*-0x1b4c+-0x2c7c*-0x1)]=_0x1f1341?_0x1f1341[_0x452291]:0x2*0x1307+-0x87a+0x765*-0x4,_0x39cb0b[_0x452291*(0xca7+-0xbf0+-0xb4)+(0x2e7*-0x1+-0x2*0xe84+0x1ff0)]=_0x268b93?Math['exp'](_0x268b93[_0x452291]):0x174a+0xdaa+-0x24f4);this['transformA'+'Texture']['unlock'](),this['transformB'+'Texture']['unlock'](),this['transformR'+'Texture']['unlock'](),(_0x8e78e=this['transformM'+'otionTextu'+'re'])==null||_0x8e78e['unlock'](),(_0x921048=this['transformL'+'ifecycleTe'+'xture'])==null||_0x921048['unlock']();}async['updateSHDa'+'ta'](_0x4c714e){var _0x1c93bc,_0x499229,_0x5370ad,_0x5706f0,_0x3cdca3,_0x2675fc,_0xe24d3f,_0x2dcf9e;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x4ccf8d=(_0x1c93bc=this['sh1to3Text'+'ure2'])==null?void(-0x1e4d*0x1+-0x2*-0x3a9+0x6f*0x35):_0x1c93bc['lock'](),_0x3b4d00=(_0x499229=this['sh4to7Text'+'ure2'])==null?void(0x5*-0x704+0x25f7+-0x2e3):_0x499229['lock'](),_0x5d844a=(_0x5370ad=this['sh8to11Tex'+'ture2'])==null?void(-0x2*-0x3e4+0x23ba+-0x1*0x2b82):_0x5370ad['lock'](),_0x8f09f1=(_0x5706f0=this['sh12to15Te'+'xture2'])==null?void(0x5eb*-0x1+-0x14*0xf4+-0x1*-0x18fb):_0x5706f0['lock'](),_0x40f562={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x4cedd9=$_(_0x4c714e,_0x40f562*(-0x49d*-0x7+-0x4*0x3b1+-0x1184*0x1)),_0x5b8313=-0x3c2+-0x10eb+0x5*0x5bc,_0x28672d=0x44b*0x8+0x2d*-0xcd+0x5b0,_0x542508=new Float32Array(0x4*0x878+-0x26c0+0x4e1*0x1),_0x118588=new Uint32Array(_0x542508['buffer']),_0x259347=new Array(_0x40f562*(0x1189+-0xa03+-0x783))['fill'](-0x1616+-0x110a*0x2+-0x1*-0x382a);for(let _0xa7ea8f=0x11e5+-0x62*-0x7+-0x1493;_0xa7ea8f<_0x4c714e['numSplats'];++_0xa7ea8f){for(let _0x2e6375=0x2*0x1aa+-0x236c*0x1+0x2018;_0x2e6375<_0x40f562;++_0x2e6375)_0x259347[_0x2e6375*(-0x2*0x868+0x1091*0x1+0x42)]=_0x4cedd9[_0x2e6375][_0xa7ea8f],_0x259347[_0x2e6375*(-0xef*-0x1+0x25ca+-0x1*0x26b6)+(-0xe09*-0x1+-0x1*0x1ccd+0xec5)]=_0x4cedd9[_0x2e6375+_0x40f562][_0xa7ea8f],_0x259347[_0x2e6375*(0x2485*-0x1+0x28d+-0x1*-0x21fb)+(0x1af*-0x7+-0x2625+0x31f0)]=_0x4cedd9[_0x2e6375+_0x40f562*(0x235e+0x2*0x12f7+-0x13e*0x3b)][_0xa7ea8f];let _0x398925=_0x259347[0x41a+0x24c3+0x13d*-0x21];for(let _0x5afbd4=0x134a+-0xb89+-0x7c0*0x1;_0x5afbd4<_0x40f562*(-0x14*-0x67+0x1*0xc47+-0x1450);++_0x5afbd4)_0x398925=Math['max'](_0x398925,Math['abs'](_0x259347[_0x5afbd4]));if(_0x398925!==0x41*0x8c+-0x4aa+0x43*-0x76){for(let _0x17d94c=-0xca*-0x19+0x5b9+0x5*-0x517;_0x17d94c<_0x40f562;++_0x17d94c)_0x259347[_0x17d94c*(-0x605+0x11f9*0x2+-0x1dea)+(0xca5+-0x1c7c*-0x1+-0x2921)]=Math['max'](0x81*-0x2b+-0x4*-0x293+0xb5f*0x1,Math['min'](_0x5b8313,Math['floor']((_0x259347[_0x17d94c*(-0x1*-0x14b+0xa64*-0x1+0x91c)+(-0xa5a+0x207c+0x1*-0x1622)]/_0x398925*(-0x1c16*0x1+0x101*-0x1d+0x3933+0.5)+(0x1*-0x170f+0x1281*-0x1+0x50*0x85+0.5))*_0x5b8313+(-0x7*-0x1b3+-0x97+-0xb4e+0.5)))),_0x259347[_0x17d94c*(-0xd4c+-0x1e5f*0x1+0x2bae)+(0xb*-0xad+0x242e+-0x11b*0x1a)]=Math['max'](-0x65*-0x35+0x1224+0x1*-0x270d,Math['min'](_0x28672d,Math['floor']((_0x259347[_0x17d94c*(0x2312+0xc61*0x1+-0x2f70)+(-0x30*0x89+-0x275*-0x1+0x173c)]/_0x398925*(0x1*-0x1f01+0x1e79+0x88+0.5)+(0x1f77+-0x6*-0x4f6+0x39*-0x113+0.5))*_0x28672d+(0x1830+0x1237*0x1+-0x2a67+0.5)))),_0x259347[_0x17d94c*(-0x8bc+-0xc*-0xc+0x82f)+(-0x1549*0x1+-0x1912+0x437*0xb)]=Math['max'](-0xfa9*0x1+0x3*0xadf+0x87a*-0x2,Math['min'](_0x5b8313,Math['floor']((_0x259347[_0x17d94c*(0x176+0x2b*0x31+-0x9ae)+(0x2210+0x1d*-0x88+-0x12a6)]/_0x398925*(-0x20ba+-0x24e2+0x3*0x1734+0.5)+(-0x22b3+0x7aa*-0x4+0x21*0x1fb+0.5))*_0x5b8313+(0x1f22+0x18c5+-0x37e7+0.5))));_0x542508[0xd*-0x1cd+-0xa9e+-0x2207*-0x1]=_0x398925,_0x4ccf8d[_0xa7ea8f*(0x1*0x13fb+0x7b2+-0x1ba9)+(0x6*-0x108+-0x144c+-0x69f*-0x4)]=_0x118588[0x1*-0x21c7+-0x6d2+0x2899],_0x4ccf8d[_0xa7ea8f*(0x25f+0x1a59+-0x1cb4)+(-0xc02+0x4*-0x88c+0x2e33*0x1)]=_0x259347[0x1748+-0x1e1a+0x3*0x246]<<0x766*0x5+-0x1*-0x60b+-0x4*0xabd|_0x259347[-0x256c*-0x1+0x11f5*0x1+0x1bb0*-0x2]<<0x2390+-0x20fa*0x1+-0x28b|_0x259347[-0x79e+0x2*0x18c+0x2*0x244],_0x4ccf8d[_0xa7ea8f*(0x10ad+0x154f*-0x1+0x4a6)+(0x61d*0x2+0x11c5+-0x9*0x355)]=_0x259347[0x7*-0x4f+-0x245b*-0x1+0x1*-0x222f]<<-0xb5e+0x422*-0x5+0x201d|_0x259347[-0xa6f+0x5*-0x61+0x4f*0x28]<<-0xb75+0x1*0x83f+0x341|_0x259347[-0x1d3*-0x1+0x11a2+-0x26e*0x8],_0x4ccf8d[_0xa7ea8f*(-0x2*-0xd88+0x1864+0x337*-0x10)+(0x13cc+-0x23c7+-0x1*-0xffe)]=_0x259347[0x99*-0x1+0x112a+-0x108b]<<-0x2*0xeac+0xc7a+0x10f3|_0x259347[0x6c+0x20e9+0x7*-0x4c2]<<0x1ef2+0x1*0x1ad7+-0x26*0x185|_0x259347[0x16d*0x5+0xcb7+0x9e8*-0x2],this['shBands']>0x2507+0x8*-0x26b+0x8d7*-0x2&&(_0x3b4d00[_0xa7ea8f*(-0x8b3*0x1+0x1*0x16f7+-0xe40)+(-0x26c3+0x11f3+-0x29a*-0x8)]=_0x259347[0x1966+0xa*-0x1b0+-0x87d*0x1]<<-0x12*-0x16a+0x3*0xa2a+-0x635*0x9|_0x259347[0x115c+-0x9f5*0x3+0xc8d]<<0x263a+0x2377+-0x359*0x16|_0x259347[-0x1efa+-0x14d1+0x33d6],_0x3b4d00[_0xa7ea8f*(-0x3*-0x717+-0x6*-0x9d+-0x18ef)+(0xcee+0x1*-0xd29+0x3c)]=_0x259347[0x1a*-0x4+-0x3*-0x10b+-0x2ad]<<0xa*-0x53+0x2*0x185+-0x49*-0x1|_0x259347[-0x16*0x3d+-0x267*0x8+0x1883]<<-0x2*-0x81+0x5b5*0x1+-0x6ac|_0x259347[-0xa69*0x3+0x5*-0x365+-0x8e*-0x57],_0x3b4d00[_0xa7ea8f*(0x2d7+0x31*-0x2a+-0x1*-0x537)+(-0xf83+-0x11*0xf1+0x1f86)]=_0x259347[-0x363*-0x4+0x16*0x109+-0x2443]<<0x1a4+-0x4*0x1a6+0x509|_0x259347[-0x13*-0x15f+0x1*-0x23d7+-0x4ed*-0x2]<<-0x318+-0x2341+0x2664|_0x259347[0x7f*-0x16+-0x113+0xc0e],_0x3b4d00[_0xa7ea8f*(0x1*-0x72e+0xd6c+-0x63a)+(0x1af6+-0x885+-0x126e)]=_0x259347[0x2*-0x5c1+0x832+0x1b1*0x2]<<0x1*-0x3f9+0x64a+-0xb*0x34|_0x259347[0x10*0x130+0x183c*0x1+-0x2b29]<<-0xbd9*-0x1+0x14*0x12a+0x1*-0x2316|_0x259347[-0x13d7+-0xa34*0x3+0x3287],this['shBands']>0x1c3d+0x1e61+-0x3a9c?(_0x5d844a[_0xa7ea8f*(-0x6d5*0x5+0x10b4+0x1179)+(-0x187d+-0x7*-0x21d+0x1*0x9b2)]=_0x259347[0x1097+0x85b*-0x1+-0x827]<<0x2534+-0x1541+-0x1*0xfde|_0x259347[-0x2e3*0x3+0x25c7+-0x1d08]<<-0x1e26+0x6*-0xc1+0x22b7|_0x259347[0x7db*-0x4+0x6b7*-0x4+0x3a5f],_0x5d844a[_0xa7ea8f*(-0x79*-0x6+0x7c9+0x389*-0x3)+(0x40d*-0x2+-0x7ca+0xfe5)]=_0x259347[0x1170+0x21df+-0x3337*0x1]<<0x1357+-0x12ee+-0x54|_0x259347[0x10b4*-0x1+-0x1a01+0x2ace*0x1]<<0x1bae+-0x208d+0x275*0x2|_0x259347[-0x8*-0x1eb+0x126+-0x1*0x1064],_0x5d844a[_0xa7ea8f*(-0x1*0x182d+0x2706+-0xed5)+(-0x504+-0x1*0x13b8+0x18be)]=_0x259347[0x12be+0xb59+0x65*-0x4c]<<0x5a*0x4e+0x1*0x21e+0x1d75*-0x1|_0x259347[0x1fb+-0x1a45+0x1866]<<0x1*-0x1ceb+0x1304+0x43*0x26|_0x259347[0x268b+-0x12*-0x14e+-0x3dea*0x1],_0x5d844a[_0xa7ea8f*(0x1*-0x1c33+-0x1d60+-0x3997*-0x1)+(-0x1fa8*0x1+-0x15b+0x2106)]=_0x259347[-0x1cb1+0x236c+0x1*-0x69d]<<0x2237*-0x1+0x13eb+0xe61|_0x259347[-0x167*0x2+-0x22c5+0x25b2]<<0x5*0x4c1+0x414+0x2*-0xde7|_0x259347[-0x236*0xd+0x1edb+-0x1fd],_0x8f09f1[_0xa7ea8f*(0x1*-0x13e1+0xb*0xc2+0xb8f*0x1)+(-0x2*-0x2e7+-0x1*0x1e89+-0xd*-0x1e7)]=_0x259347[0x1*0x503+-0x4b*0x5+-0x36b]<<-0x73b*0x1+-0x139*-0x13+-0xfeb|_0x259347[0x1a*0x133+0x776+-0x2682]<<-0x210e*-0x1+0x119*0x13+-0x18a*0x23|_0x259347[0x18*-0xe5+-0xdfa+0x2395],_0x8f09f1[_0xa7ea8f*(-0x822*-0x2+-0x2b*-0x97+-0x299d*0x1)+(-0x15fe+0x4ea+0x1115)]=_0x259347[0x2423+-0x1a6f+0x18*-0x66]<<0xa*0x115+0x86*-0x6+0x185*-0x5|_0x259347[0x2*0xdf3+-0x114b*-0x2+-0x3e57]<<-0x9*-0xba+-0x2*0x89c+0x393*0x3|_0x259347[0x1*0x120a+0xeb*-0xa+0xdf*-0xa],_0x8f09f1[_0xa7ea8f*(0x57a*-0x3+-0x1d87+0x2df9)+(0x2276+-0x1ca7+-0x63*0xf)]=_0x259347[-0x1f8d+-0x2017+0x3fcb]<<0x1*-0x218b+0x1231*0x2+-0x161*0x2|_0x259347[0x190e+0x1699+0x9*-0x547]<<0x2689+0x218e+-0x480c|_0x259347[-0x2355*0x1+0x508*-0x1+-0x85*-0x4e],_0x8f09f1[_0xa7ea8f*(0x22*0x98+0x1*0x23e0+-0x380c)+(0x1967+-0x34b+0x1*-0x1619)]=_0x259347[0x136d*-0x1+0x1866+0x4cf*-0x1]<<-0x3e+0x1ade+-0x1a8b|_0x259347[-0x9c6+0x147+0x1*0x8aa]<<0xa50+-0x1*0x1a52+0x100d|_0x259347[-0x1*0x177b+-0x201f+-0x289*-0x16]):_0x5d844a[_0xa7ea8f]=_0x259347[-0x464*0x1+-0x1ea8+0x211*0x11]<<0x4e7+0x8a*0x1b+-0x1360|_0x259347[-0x1bef*0x1+0x1*-0x251a+0x411f]<<0x24f0+-0x1a79+-0xa6c|_0x259347[-0x2c9*0x1+0x92*0x28+-0x13f0]);}}(_0x3cdca3=this['sh1to3Text'+'ure2'])==null||_0x3cdca3['unlock'](),(_0x2675fc=this['sh4to7Text'+'ure2'])==null||_0x2675fc['unlock'](),(_0xe24d3f=this['sh8to11Tex'+'ture2'])==null||_0xe24d3f['unlock'](),(_0x2dcf9e=this['sh12to15Te'+'xture2'])==null||_0x2dcf9e['unlock']();}async['updateSHDa'+'taByWorker'](_0x3afc19){var _0x2edf54,_0x5db0c5,_0x1a9776,_0x4a1c86,_0x5c3def;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x355fc7={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x164b8e,_0x780bdb,_0x3bec65,_0x56630b;if((_0x2edf54=_0x3afc19['transformD'+'ata'])!=null&&_0x2edf54['sh1to3Data'])_0x164b8e=(_0x5db0c5=_0x3afc19['transformD'+'ata'])==null?void(-0x1da*0x5+0x1915+-0x1*0xfd3):_0x5db0c5['sh1to3Data'],_0x780bdb=(_0x1a9776=_0x3afc19['transformD'+'ata'])==null?void(0x1373+0x1*0x855+-0x1bc8):_0x1a9776['sh4to7Data'],_0x3bec65=(_0x4a1c86=_0x3afc19['transformD'+'ata'])==null?void(0xef2+-0xdb1+-0x141):_0x4a1c86['sh8to11Dat'+'a'],_0x56630b=(_0x5c3def=_0x3afc19['transformD'+'ata'])==null?void(0x1998+0x1bc9+-0x3561):_0x5c3def['sh12to15Da'+'ta'];else{const _0x172ff6=$_(_0x3afc19,_0x355fc7*(-0x267a+-0x16c9+0x3d46)),_0x14b6e9=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x3afc19['numSplats'],this['shBands'],_0x172ff6);_0x164b8e=_0x14b6e9['sh1to3Data'],_0x780bdb=_0x14b6e9['sh4to7Data'],_0x3bec65=_0x14b6e9['sh8to11Dat'+'a'],_0x56630b=_0x14b6e9['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x164b8e),this['shBands']>0x511*0x7+-0x1e25*0x1+0x551*-0x1&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x780bdb),this['shBands']>0x2*-0x11c0+-0x456*0x9+-0xd4*-0x5a?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x3bec65),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x56630b)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x3bec65));}}async function HA(){const _0x7e184=new Float32Array(0x1e47*0x1+-0x1de2+0x14*-0x5);new Int32Array(_0x7e184['buffer']);let _0x114ca5=null,_0x2760f4=null,_0x246d5c=null,_0x272915=null,_0x397dd6=null,_0x5f0241=null,_0x281485=null,_0x5a0b0e=null;self['onmessage']=async _0x6712ee=>{const {data:_0x578df4}=_0x6712ee;switch(_0x578df4['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x6ff4c0(_0x578df4['numSplats'],_0x578df4['shBands'],_0x578df4['SHData']);break;case'updateTran'+'sformData':_0x3aa066(_0x578df4['numSplats'],_0x578df4['is4D'],_0x578df4['position'],_0x578df4['rotation'],_0x578df4['motion'],_0x578df4['scale'],_0x578df4['muT'],_0x578df4['tScale']);break;case'destroyWor'+'ker':_0x4bf394();break;}};const _0x3aa066=(_0x2b8eae,_0x37b95a,_0x375954,_0x26877a,_0xba99cd,_0xf59d8f,_0x554cc5,_0x15b63d)=>{_0x4bf394(),_0x37b95a&&(_0x2760f4=new Float32Array(_0x2b8eae*(0x1*-0x488+0xd*0x1f+-0x98*-0x5)),_0x5a0b0e=new Float32Array(_0x2b8eae),_0x397dd6=new Float32Array(_0xba99cd['buffer']['slice']()),_0x281485=new Float32Array(_0xba99cd['buffer']['slice']())),_0x272915=new Float32Array(_0x375954['buffer']['slice']()),_0x114ca5=new Float32Array(_0x375954['buffer']['slice']()),_0x5f0241=new Uint16Array(_0xf59d8f['buffer']['slice']()),_0x246d5c=new Float32Array(_0x26877a['buffer']['slice']());for(let _0xde359a=-0x971+0x112a+-0x1*0x7b9;_0xde359a<_0x2b8eae;_0xde359a++)_0x37b95a&&_0x2760f4&&(_0x5a0b0e[_0xde359a]=_0x15b63d?Math['exp'](_0x15b63d[_0xde359a]):-0x1c05*-0x1+0x1563+-0x18b4*0x2,_0x2760f4[_0xde359a*(-0x9e5*0x2+-0x3a*-0x1d+0xd3b)+(0x1*0x1dd+0x1e63*0x1+-0x2040)]=_0x554cc5?_0x554cc5[_0xde359a]:-0x425*-0x5+0x1d17+0x18e8*-0x2,_0x2760f4[_0xde359a*(-0xc4a+-0x23d2*-0x1+-0x1785)+(0x26*0xdf+-0xbd3+-0x1546)]=_0x5a0b0e[_0xde359a]);const _0x35384b=[_0x114ca5['buffer'],_0x272915['buffer'],_0x5f0241['buffer'],_0x246d5c['buffer']];_0x37b95a&&_0x35384b['push'](_0x397dd6['buffer'],_0x2760f4['buffer'],_0x281485['buffer'],_0x5a0b0e['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x114ca5,'dataPosition':_0x272915,'dataScale':_0x5f0241,'dataRotation':_0x246d5c,'dataMotion':_0x397dd6,'dataTime':_0x2760f4,'motion':_0x281485,'tScaleArray':_0x5a0b0e},_0x35384b);},_0x6ff4c0=(_0x59d04e,_0x599c51,_0x2467db)=>{const _0x4a023e=new Uint32Array(_0x59d04e*(0xe*0x164+-0xd21+0x1*-0x653)),_0x31163d=new Uint32Array(_0x59d04e*(0x1776+0x1e4f*-0x1+0x6dd)),_0x3ee9b0=new Uint32Array(_0x59d04e*(-0xe80*0x2+-0x69d*-0x2+-0xfca*-0x1)),_0x426504=new Uint32Array(_0x59d04e*(-0x1*0x1337+-0x1a68+0x685*0x7)),_0x19ce44={0x1:0x3,0x2:0x8,0x3:0xf}[_0x599c51],_0x333405=_0x2467db,_0x1a76d5=-0x26dc+0x261b+0x8c0,_0x4f588b=-0x26a9*0x1+-0x1439+0x3ee1,_0x4e5ff9=new Float32Array(-0x1ab4+0x1*0xfb5+0x20*0x58),_0x46cf5c=new Uint32Array(_0x4e5ff9['buffer']),_0x350eb9=new Array(_0x19ce44*(-0x309*-0x1+0x12ec+-0x15f2))['fill'](0x9*0x258+-0x1cb7+0x79f*0x1);for(let _0x9b57eb=0x2b9*0x4+0x9e8*-0x3+0x4*0x4b5;_0x9b57eb<_0x59d04e;++_0x9b57eb){for(let _0x19caa3=-0x6b*-0x7+-0x74e+0x461;_0x19caa3<_0x19ce44;++_0x19caa3)_0x350eb9[_0x19caa3*(0x10*-0xb8+0x1609+-0xa86)]=_0x333405[_0x19caa3][_0x9b57eb],_0x350eb9[_0x19caa3*(-0x3*-0xb1b+-0x170f+-0x2b*0x3d)+(0x395+0x1*-0x1565+0x11d1*0x1)]=_0x333405[_0x19caa3+_0x19ce44][_0x9b57eb],_0x350eb9[_0x19caa3*(-0x20f3+-0xf3*0x2+0x22dc)+(0x6*0x45b+0xb84*0x1+0x16*-0x1b6)]=_0x333405[_0x19caa3+_0x19ce44*(0xfb*-0x23+-0x15f3+0x3846)][_0x9b57eb];let _0x11d6aa=_0x350eb9[-0x2590+0x17c7+0x1*0xdc9];for(let _0x40b1f5=-0x95b*0x2+-0x19d0+0x2c87;_0x40b1f5<_0x19ce44*(-0x3a1*0x3+-0x1*-0x148d+-0x9a7);++_0x40b1f5)_0x11d6aa=Math['max'](_0x11d6aa,Math['abs'](_0x350eb9[_0x40b1f5]));if(_0x11d6aa!==0x19bb+0x26d0+0x29*-0x193){for(let _0x21c06c=0xde0+0x96b*-0x3+0xe61;_0x21c06c<_0x19ce44;++_0x21c06c)_0x350eb9[_0x21c06c*(-0x1037+0x1fc8+-0xb5*0x16)+(-0x1e7f+-0x2*0x517+0x9*0x485)]=Math['max'](0x8b4*-0x1+0x2201+-0x86f*0x3,Math['min'](_0x1a76d5,Math['floor']((_0x350eb9[_0x21c06c*(-0x5bc*0x1+0x629*0x1+-0x35*0x2)+(0x69*-0x33+0x14f1+-0x6)]/_0x11d6aa*(-0x2d2*0x4+0x26b6+-0x1b6e*0x1+0.5)+(-0xa66+-0xe3b*0x1+-0x18a1*-0x1+0.5))*_0x1a76d5+(0x11f8+0x40f*0x8+-0x3270+0.5)))),_0x350eb9[_0x21c06c*(-0x1802+0x1*0x1343+0x4c2)+(0x8a*-0x2c+0x56*0x52+-0x59*0xb)]=Math['max'](0x1*-0x26b3+0x2*-0xd45+0x125*0x39,Math['min'](_0x4f588b,Math['floor']((_0x350eb9[_0x21c06c*(0x10dc+-0x9ea+0x6ef*-0x1)+(-0x182*-0x18+-0xd*0x37+-0x2164)]/_0x11d6aa*(0x1*-0x24e2+-0x12e9+-0x1299*-0x3+0.5)+(-0x2*0xcf5+-0x3c*0xa+0x1c42+0.5))*_0x4f588b+(0x2672+0xd0f+-0x3381*0x1+0.5)))),_0x350eb9[_0x21c06c*(-0x908+-0x277*-0xf+-0x1bee)+(-0x1*0x1a17+-0x5*-0x89+0x176c)]=Math['max'](0x1084+-0x2543+0x14bf,Math['min'](_0x1a76d5,Math['floor']((_0x350eb9[_0x21c06c*(-0x10*-0xd4+-0x1*0x266+0xad7*-0x1)+(0x2c2*0x1+-0xa1d*0x1+0x75d)]/_0x11d6aa*(0x1a64+-0xf*-0xaf+-0x24a5+0.5)+(-0x13e2+0xc2*0x25+0x3*-0x2b8+0.5))*_0x1a76d5+(0x16af+0x475*0x8+-0x3a57+0.5))));_0x4e5ff9[0x11d3+-0x22de+0x110b]=_0x11d6aa,_0x4a023e[_0x9b57eb*(-0x2427+0xac8+0x43*0x61)+(0x60e+-0xf*0x266+0x1dec)]=_0x46cf5c[0x1c39+-0x2*0x73e+-0x1*0xdbd],_0x4a023e[_0x9b57eb*(-0x86f+-0x19cc+0x223f)+(0x1ea0+-0x18c1+-0x5de)]=_0x350eb9[0x1*0x26fe+-0x5*-0x4a3+0x3e2d*-0x1]<<0x5*0x17f+-0x1*0x1b55+-0x3f*-0x51|_0x350eb9[-0x1*0xd5d+0x1cda+-0xf7c*0x1]<<-0x1f7d*-0x1+-0x2*-0x1318+0xb9b*-0x6|_0x350eb9[-0x1f0a+0x1*0x162d+0x3*0x2f5],_0x4a023e[_0x9b57eb*(-0x3*0x3d7+-0x16*-0x67+0x2af)+(-0xdfd*0x2+0x616+0x2*0xaf3)]=_0x350eb9[-0x1*0xb4d+-0x4c*-0x43+-0x894]<<-0x3e*-0x79+-0xeb8*0x1+-0x2f*0x4f|_0x350eb9[0x15ab+-0x22b9+-0xe*-0xef]<<-0x1eee+0x2d7*0x8+-0x841*-0x1|_0x350eb9[-0x4ab+0x166a+-0x2*0x8dd],_0x4a023e[_0x9b57eb*(-0xc4d*0x3+0x11fa+0xd*0x175)+(0x699+-0x1827*-0x1+0x1ebd*-0x1)]=_0x350eb9[0x32*0x13+-0x7cb+-0x1*-0x41b]<<-0xd61+0x1b5a+-0xde4|_0x350eb9[-0x5*-0x19+0x22bf+-0x2335*0x1]<<0x220d+-0x905*0x2+-0xff8|_0x350eb9[-0x20ff+-0x8*0x3cb+-0x3f5f*-0x1],_0x599c51>-0x4f*-0x3d+-0x1f57+0xc85&&(_0x31163d[_0x9b57eb*(-0x1*0x17c6+0x243b+-0x27d*0x5)+(0x1*-0x517+0xc7e+-0x767)]=_0x350eb9[0x1ed5+-0x221b+0x34f]<<0x2*-0xfca+0x2ef*-0xc+-0x1*-0x42dd|_0x350eb9[-0x1ff*0x5+-0x1c7a+0x267f]<<0xfec+-0x191*0xe+0x1*0x60d|_0x350eb9[-0x71a+0x681+0xa4],_0x31163d[_0x9b57eb*(0x57e+0xcca+0x14e*-0xe)+(-0xd1*0x17+0x19f8+-0x730)]=_0x350eb9[-0xd73*0x2+-0x15c8*0x1+0xb*0x46e]<<0xac1*-0x3+-0x214a*0x1+0x41a2|_0x350eb9[0x11*-0x151+0x136+-0x7*-0x308]<<-0x1de8+-0x2*0x5b+0x1ea9|_0x350eb9[-0x1*0x15d6+-0xa22+0x2*0x1003],_0x31163d[_0x9b57eb*(-0xac1*-0x1+0x1*0x1763+-0x2220)+(0x1bf6+0x6*0x33a+-0x2f50)]=_0x350eb9[-0x25ae+0x1f*-0x59+-0x8a*-0x5a]<<0x209d+-0x83c+0x2*-0xc26|_0x350eb9[-0x840+-0x2*-0x5df+0x1b7*-0x2]<<-0xd*0x17c+-0x4ba+0x1811|_0x350eb9[-0x1bd6+-0x161*-0x5+0x2*0xa81],_0x31163d[_0x9b57eb*(-0x159+-0x1*0x2275+-0x395*-0xa)+(0x9cf+-0x2594+0x4*0x6f2)]=_0x350eb9[-0x1f46*-0x1+0xa57+-0x3*0xdd9]<<0x10f+0x12c1*0x1+-0x1*0x13bb|_0x350eb9[0xf7*-0x28+0x175*-0xe+0x3b11]<<0x17*0xe5+0x1*-0xede+-0x1d*0x32|_0x350eb9[0x21+-0xdcd+0x1*0xdc0],_0x599c51>-0x266e+0x797+0x1ed9?(_0x3ee9b0[_0x9b57eb*(0x1247+0x3*-0x496+0x481*-0x1)+(0x735+-0x233f+0x1c0a)]=_0x350eb9[0x59*-0x11+-0xa3e+-0x40f*-0x4]<<0x1*-0x1eab+-0x2641*0x1+-0xdcd*-0x5|_0x350eb9[-0x48b+-0x4fe+0x99f*0x1]<<-0x13*-0x1d+-0x23b6+0x187*0x16|_0x350eb9[0x22eb*-0x1+-0x83e*0x4+-0x9b6*-0x7],_0x3ee9b0[_0x9b57eb*(-0x954+-0x25*0x7f+0x1bb3)+(0xe01+0x1260+0x10*-0x206)]=_0x350eb9[0x3d*0x63+-0x150b+-0x9d*0x4]<<-0x1f*0x13+-0x1e85+0x20e7|_0x350eb9[-0x1da5*-0x1+0x109c*-0x1+0x450*-0x3]<<-0x9b*-0xf+-0x2eb*0x5+0x58d|_0x350eb9[-0xfe5+-0x29*0x7d+-0x39a*-0xa],_0x3ee9b0[_0x9b57eb*(0x1*-0x1b19+-0xef6+0x2a13)+(-0xe46+0x12d*-0x1d+-0x5*-0x9ad)]=_0x350eb9[0xf70+-0x101*-0x19+-0x286e]<<0x297*-0xa+0x146*-0x5+0xa9*0x31|_0x350eb9[-0x1*-0xd5d+-0x69*0x15+-0x2c*0x1b]<<-0x7*-0x148+-0x8*-0x382+0x22d*-0x11|_0x350eb9[-0xeb*0x1b+-0x1d39*0x1+0x1*0x361f],_0x3ee9b0[_0x9b57eb*(-0x1*0x176c+-0xa*-0xa4+0x1108)+(-0x1642+-0x5b3+0x1bf8)]=_0x350eb9[-0x17b*0xa+0x11a*-0x1a+0x2b90]<<-0x1*-0x11c5+-0x72e*-0x2+-0x200c|_0x350eb9[-0xcb9*-0x3+0xa7c+-0x3088]<<0x1cf7+-0x111e+-0xbce|_0x350eb9[0x2125+-0x1*0x267a+0x575],_0x426504[_0x9b57eb*(0x15d*0x17+-0xf0a+-0x104d)+(0x1*0x1ce2+-0xbde+0x79*-0x24)]=_0x350eb9[0x9f0+-0x883+-0x14c*0x1]<<0x1093+0x1*-0xea1+0x9f*-0x3|_0x350eb9[-0x287+-0x587*0x2+-0xdb7*-0x1]<<0x15*-0x1f+-0x2385+0x261b|_0x350eb9[-0x24b6+0x24c8+0x11*0x1],_0x426504[_0x9b57eb*(-0x1*0x1d4f+-0x5ae+0x2301)+(0x162f+-0x9*-0xda+-0x1dd8)]=_0x350eb9[0xc01+-0x56f+-0x66e]<<0xd*-0x3d+0x19b+0x193|_0x350eb9[-0x1e6c+0x1f96+-0x3*0x57]<<-0x3*0x8cf+0x6*0x14b+0x12b6|_0x350eb9[0x17a9*0x1+0x15c6+0x1*-0x2d49],_0x426504[_0x9b57eb*(-0x142*0x1b+-0xced+0x2ee7)+(-0x1eb*0x7+0xd41+0x2e*0x1)]=_0x350eb9[-0xe*-0x1a+-0x31a*0x1+0x1d5]<<-0xc5*0xb+0x6b2+0x1da|_0x350eb9[0x202f+-0x2*-0xb6e+-0x36e3]<<0x25b3*-0x1+0x22*0xe+-0xbf6*-0x3|_0x350eb9[-0x6*-0x34e+-0xf4*-0x7+-0x1a57],_0x426504[_0x9b57eb*(0x2063*-0x1+0xa32+0x17b*0xf)+(0x1096+-0x3c2*0x3+-0x54d)]=_0x350eb9[-0x2c0+0x19fe+-0xd3*0x1c]<<0x1128+0x73c*0x2+-0x64f*0x5|_0x350eb9[-0x4c0+0xb7*-0x9+0xb5a]<<0x10*0x1db+0x209b+-0x60*0xa6|_0x350eb9[-0x67c+0x17f+0x529]):_0x3ee9b0[_0x9b57eb]=_0x350eb9[0x62*-0x11+-0xf5d+0x5*0x464]<<0x78+0x547*0x1+-0x5aa|_0x350eb9[-0x18f9+-0x2620+-0x5*-0xca3]<<-0x1d*-0xed+0x1397+0x3*-0xf77|_0x350eb9[-0x21de+-0x14*-0x1d+0x1fb1]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x4a023e,'sh4to7Data':_0x31163d,'sh8to11Data':_0x3ee9b0,'sh12to15Data':_0x426504}},[_0x4a023e['buffer'],_0x31163d['buffer'],_0x3ee9b0['buffer'],_0x426504['buffer']]);},_0x4bf394=()=>{_0x114ca5=null,_0x2760f4=null,_0x246d5c=null,_0x272915=null,_0x397dd6=null,_0x5f0241=null,_0x281485=null,_0x5a0b0e=null;};}class WA extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+HA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x3125f1,_0x21cf1a,_0x5e9822){_0x3125f1['onmessage']=_0x2c7684=>{if(!this['worker'])return;const {data:_0x3abfcd}=_0x2c7684;if(_0x3abfcd['type']===_0x21cf1a)switch(_0x21cf1a){case'updatedSHD'+'ata1':_0x5e9822(_0x3abfcd['data']);break;case'updatedCol'+'orData':_0x5e9822(_0x3abfcd['data']);break;case'updatedTra'+'nsformData':_0x5e9822(_0x3abfcd);break;}};}['updateSHDa'+'ta1'](_0x9b9958,_0x445eae,_0x3bfceb){var _0x5d02f3;return(_0x5d02f3=this['worker'])==null||_0x5d02f3['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x9b9958,'shBands':_0x445eae,'SHData':_0x3bfceb}),new Promise(_0x501c41=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x6dff00=>{_0x501c41(_0x6dff00);});});}async['updateTran'+'sData'](_0x2d7378,_0x4f3e53,_0x4e443e,_0x3111d0,_0x3360cc,_0x439acb,_0x416a72,_0x2eb55b){var _0x5160a5;return(_0x5160a5=this['worker'])==null||_0x5160a5['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x2d7378,'is4D':_0x4f3e53,'position':_0x4e443e,'rotation':_0x3111d0,'motion':_0x3360cc,'scale':_0x439acb,'muT':_0x416a72,'tScale':_0x2eb55b}),new Promise(_0x22d468=>{const _0x37c29d=_0x48baba=>{_0x22d468(_0x48baba);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x37c29d);});}['destroy'](){var _0x49533b;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x49533b=this['worker'])==null||_0x49533b['terminate'](),this['worker']=null);}}const X_=(_0x1ddf6e,_0x36e87d)=>{const _0x40b4d5=[];for(let _0x30045f=-0x25e5+0x4*-0x20b+0x2e11;_0x30045f<_0x36e87d;++_0x30045f)_0x40b4d5['push'](_0x1ddf6e['getProp']('f_rest_'+_0x30045f));return _0x40b4d5;};class $A extends Zy{constructor(_0xb8e417,_0x4f375e){super(_0xb8e417,_0x4f375e),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(-0x1935+-0x1a84+0x33ba)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new WA(),this['assetsMana'+'gerLoadedT'+'ime']=0x1*0x162a+-0x144a+-0x1db);}['setSceneIn'+'fo'](_0x4143eb){this['sceneInfo']['duration']=_0x4143eb['duration'],this['sceneInfo']['fps']=_0x4143eb['fps'],this['sceneInfo']['totalGauss'+'ians']=_0x4143eb['totalGauss'+'ians'],this['sceneInfo']['globalBoun'+'dingBoxMin']=new D(_0x4143eb['globalBoun'+'dingBox']['min'][-0xa52+-0xde7*0x1+0x1839],_0x4143eb['globalBoun'+'dingBox']['min'][0x1696+-0x1a9e+0x1*0x409],_0x4143eb['globalBoun'+'dingBox']['min'][0x1c54+0x9dd*0x3+-0x39e9]),this['sceneInfo']['globalBoun'+'dingBoxMax']=new D(_0x4143eb['globalBoun'+'dingBox']['max'][-0x7c3*0x5+0x17b+0x2554],_0x4143eb['globalBoun'+'dingBox']['max'][0xd*0x2ba+0x1756+0x29*-0x16f],_0x4143eb['globalBoun'+'dingBox']['max'][0x928*-0x2+0x3*0xbc9+-0x1109]);const _0x2b2232=_0x4143eb['globalBoun'+'dingBox']['min'][0x7b9+-0x7ed*0x1+0x34*0x1],_0x40640e=_0x4143eb['globalBoun'+'dingBox']['min'][-0x257f*-0x1+-0x4e6+-0x2098],_0x14571d=_0x4143eb['globalBoun'+'dingBox']['min'][0x1d*-0x131+0xa*-0xd6+-0x2aeb*-0x1],_0x394772=_0x4143eb['globalBoun'+'dingBox']['max'][-0x7*0x350+0x2*0x103a+-0x1*0x944],_0x4a012b=_0x4143eb['globalBoun'+'dingBox']['max'][-0x215f+0x2*-0x102b+0x41b6],_0x28ac01=_0x4143eb['globalBoun'+'dingBox']['max'][0x12d3+-0x1546+0x275],_0xb04737=new D((_0x2b2232+_0x394772)*(-0x109b+0x1*0x1cab+0x4*-0x304+0.5),(_0x40640e+_0x4a012b)*(0x3*-0x43+0x2*-0x619+-0xcfb*-0x1+0.5),(_0x14571d+_0x28ac01)*(-0x1b6+0x164+0x52+0.5)),_0x299680=new D((_0x394772-_0x2b2232)*(0x12*0xb0+-0x3*0x102+0x6*-0x18f+0.5),(_0x4a012b-_0x40640e)*(0x49d*-0x1+-0x7a*-0x17+-0x41*0x19+0.5),(_0x28ac01-_0x14571d)*(-0x12*-0x133+0xbc*0x1a+0x52*-0x7f+0.5)),_0x127912=new De(_0xb04737,_0x299680);this['sceneInfo']['globalBoun'+'dingBox']=_0x127912,this['aabb']=_0x127912;}async['updateData'](){var _0x4c2582,_0xc764c3,_0x92aef0,_0x577ab8,_0x57fa6c,_0x4d8033,_0x4d7b38,_0x4cd91a,_0x29fb39,_0x2c0e0c,_0x1c4b93;await super['updateData']();const _0x2a4692=this['gsplatData'];if(!_0x2a4692)return;this['is4D']=_0x2a4692['is4D'];const _0x5c97ea=await this['getTransfo'+'rmDataByWo'+'rker'](_0x2a4692);this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x5c97ea['centers'],this['motion']=_0x5c97ea['motion'],this['tScale']=_0x5c97ea['tScaleArra'+'y'],this['muT']=await _0x2a4692['getMuT'](),this['timeIndex']=await _0x2a4692['getTimeInd'+'ex']();const _0x3f7642=this['evalTextur'+'eSize'](_0x2a4692['numSplats']);this['colorTextu'+'re']?((_0x4c2582=this['colorTextu'+'re2'])==null||_0x4c2582['destroy'](),(_0xc764c3=this['transformA'+'Texture2'])==null||_0xc764c3['destroy'](),(_0x92aef0=this['transformB'+'Texture2'])==null||_0x92aef0['destroy'](),(_0x577ab8=this['transformR'+'Texture2'])==null||_0x577ab8['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x3f7642),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x3f7642),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x3f7642),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x3f7642),this['is4D']&&((_0x57fa6c=this['transformM'+'otionTextu'+'re2'])==null||_0x57fa6c['destroy'](),(_0x4d8033=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x4d8033['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x3f7642),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x3f7642))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x3f7642),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x3f7642),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x3f7642),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x3f7642),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x3f7642),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x3f7642),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x3f7642),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x3f7642),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x3f7642),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x3f7642),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x3f7642),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x3f7642))),await this['updateColo'+'rData'](_0x2a4692),await this['updateTran'+'sformFromD'+'ata'](_0x5c97ea),this['shBands']=_0x2a4692['shBands'],this['shBands']>-0x2*0x866+0x2672+0x2*-0xad3&&(this['sh1to3Text'+'ure']?((_0x4d7b38=this['sh1to3Text'+'ure2'])==null||_0x4d7b38['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x3f7642),this['shBands']>0x207*-0x2+0xc1*-0x8+0xa17&&((_0x4cd91a=this['sh4to7Text'+'ure2'])==null||_0x4cd91a['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x3f7642),this['shBands']>0x4*-0x3ad+0x29*0x94+-0x8fe?((_0x29fb39=this['sh8to11Tex'+'ture2'])==null||_0x29fb39['destroy'](),(_0x2c0e0c=this['sh12to15Te'+'xture2'])==null||_0x2c0e0c['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x3f7642),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x3f7642)):((_0x1c4b93=this['sh8to11Tex'+'ture2'])==null||_0x1c4b93['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x3f7642)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x3f7642),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x3f7642),this['shBands']>-0x24bd+-0x1c96*-0x1+0x828&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x3f7642),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x3f7642),this['shBands']>0x16bf*0x1+0x31*-0x83+0x256*0x1?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x3f7642),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x3f7642),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x3f7642),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x3f7642)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Yi,_0x3f7642),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Yi,_0x3f7642)))),await this['updateSHDa'+'taByWorker'](_0x2a4692));}['updateText'+'ure'](){this['isDestroye'+'d']||(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x3134f8){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x3134f8}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x381b09,_0x38394c,_0x5a1039,_0x25de57,_0x547c01,_0x471038){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x381b09,'timeOption':_0x38394c,'loadedTime':_0x5a1039,'asset':_0x25de57,'events':_0x547c01,'seekCB':_0x471038}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(-0x1*0x1c73+-0x2221*0x1+0x3e94);try{for(;this['appendQueu'+'e']['length']>0x26b+-0x1add+0x413*0x6;){const _0x43e5d8=this['appendQueu'+'e']['shift']();_0x43e5d8['type']==='append'?await this['processApp'+'endTask'](_0x43e5d8['data']):_0x43e5d8['type']==='release'&&await this['processRel'+'easeTask'](_0x43e5d8['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x2a*-0xc1+-0x1e0e+0x3db9);}}}async['processRel'+'easeTask'](_0xd5c73f){const {index:_0x17ad37}=_0xd5c73f;this['isDestroye'+'d']||await this['gsplatData']['releaseSeq'+'Data'](_0x17ad37);}async['processApp'+'endTask'](_0x870946){var _0x2382cc;const {gsplatData:_0x750f11,timeOption:_0x6211dc,loadedTime:_0x4c3081,asset:_0x1341c9,events:_0x57d398,seekCB:_0xd85dc9}=_0x870946;!this['gsplatData']||this['isDestroye'+'d']||(globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x6211dc,this['asset']=_0x1341c9,this['assetsMana'+'gerLoadedT'+'ime']=_0x4c3081,this['events']=_0x57d398,await this['gsplatData']['appendGSpl'+'atData'](_0x750f11,_0x4c3081,_0x6211dc),console['log']('loadTime__'+'__','gsplatDeco'+'dedResourc'+'e\x20gsplatDa'+'ta.appendG'+'SplatData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x4f*0x79+-0x2f0+0x2849),_0x750f11['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x750f11['numSplats'])['toFixed'](-0x1bf9+-0x16d*0x1+0x1d69)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20this.upd'+'ateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x8ba+-0x1c3+-0x6f5*0x1),_0x750f11['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await((_0x2382cc=this['gsplatInst'+'ance'])==null?void(-0x2b1*-0xc+-0x941+-0x170b):_0x2382cc['updateInst'+'anceData'](this,_0x4c3081,_0xd85dc9)),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20updateIn'+'stanceData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x13*-0x19b+0xb*-0x2a2+0x3*-0x83),_0x750f11['numSplats']));}['fireAssets'+'ManagerTim'+'eIndex'](_0x5dc6e9,_0x1284a2){var _0x133efd;const _0x53d3cd=_0x5dc6e9||this['assetsMana'+'gerLoadedT'+'ime'];(_0x133efd=this['asset'])==null||_0x133efd['fire']('setAssetsL'+'oaded',_0x53d3cd,_0x1284a2);}['destroy'](){var _0x138209,_0xbf8179,_0x1cc23a,_0x43bf25,_0x6a0681,_0x4ac408,_0xd4e08f,_0x50970c,_0x4908f6,_0x383d29,_0xf3ce6c,_0x28bf98,_0x5ed858,_0x3fae8b,_0x1762ee,_0x3ee3ec,_0xd6ba93,_0x485cce,_0x3c6b66,_0xe589ba,_0xb24f97;(_0x138209=this['updateData'+'Worker'])==null||_0x138209['destroy'](),this['updateData'+'Worker']=void(-0xd4*0x24+0x1374+-0x27*-0x44),(_0xbf8179=this['colorTextu'+'re'])==null||_0xbf8179['destroy'](),(_0x1cc23a=this['transformA'+'Texture'])==null||_0x1cc23a['destroy'](),(_0x43bf25=this['transformB'+'Texture'])==null||_0x43bf25['destroy'](),(_0x6a0681=this['transformR'+'Texture'])==null||_0x6a0681['destroy'](),(_0x4ac408=this['transformM'+'otionTextu'+'re'])==null||_0x4ac408['destroy'](),(_0xd4e08f=this['transformL'+'ifecycleTe'+'xture'])==null||_0xd4e08f['destroy'](),(_0x50970c=this['sh1to3Text'+'ure'])==null||_0x50970c['destroy'](),(_0x4908f6=this['sh4to7Text'+'ure'])==null||_0x4908f6['destroy'](),(_0x383d29=this['sh8to11Tex'+'ture'])==null||_0x383d29['destroy'](),(_0xf3ce6c=this['sh12to15Te'+'xture'])==null||_0xf3ce6c['destroy'](),(_0x28bf98=this['colorTextu'+'re2'])==null||_0x28bf98['destroy'](),(_0x5ed858=this['transformA'+'Texture2'])==null||_0x5ed858['destroy'](),(_0x3fae8b=this['transformB'+'Texture2'])==null||_0x3fae8b['destroy'](),(_0x1762ee=this['transformR'+'Texture2'])==null||_0x1762ee['destroy'](),(_0x3ee3ec=this['transformM'+'otionTextu'+'re2'])==null||_0x3ee3ec['destroy'](),(_0xd6ba93=this['transformL'+'ifecycleTe'+'xture2'])==null||_0xd6ba93['destroy'](),(_0x485cce=this['sh1to3Text'+'ure2'])==null||_0x485cce['destroy'](),(_0x3c6b66=this['sh4to7Text'+'ure2'])==null||_0x3c6b66['destroy'](),(_0xe589ba=this['sh8to11Tex'+'ture2'])==null||_0xe589ba['destroy'](),(_0xb24f97=this['sh12to15Te'+'xture2'])==null||_0xb24f97['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x36e63e){var _0x753608,_0xf9560a,_0xaa844f,_0xa56a24,_0x1941ad,_0x11814d,_0x2b7567,_0x19a4d8,_0x22b34f,_0x4cae72,_0x4c0169,_0x4a8893,_0x4f15ac;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x21afd5=((_0x753608=_0x36e63e['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(0xe*-0x52+0x14*-0x1de+-0x4*-0xa75):_0x753608['data'])??0x1*-0x2105+0x2*0x137a+-0x5ef*0x1,_0x551e90=((_0xf9560a=_0x36e63e['getParamet'+'er']('uSplatScal'+'e'))==null?void(0xa*-0x39+0x2657+-0x241d):_0xf9560a['data'])??0x71*0x4d+0x5*0x3d6+-0x352a,_0x12b8bb=((_0xaa844f=_0x36e63e['getParamet'+'er']('uSaturatio'+'n'))==null?void(0x2470+0x196d+0x149f*-0x3):_0xaa844f['data'])??0x1777+-0x313*-0x1+0x1*-0x1a89,_0x408141=((_0xa56a24=_0x36e63e['getParamet'+'er']('uHueOffset'))==null?void(-0x11dd+-0x685+-0x2*-0xc31):_0xa56a24['data'])??0x20bc+0x1c14+-0x3cd0,_0xaf65=((_0x1941ad=_0x36e63e['getParamet'+'er']('uInvertOpa'+'city'))==null?void(0x3aa*0x5+-0x101*0x13+0xc1*0x1):_0x1941ad['data'])??-0xcc*0xf+0x501*-0x1+0x10f5*0x1,_0x5d739e=((_0x11814d=_0x36e63e['getParamet'+'er']('uOpacity'))==null?void(-0x1*0x264b+-0x4d4*0x5+-0x5ad*-0xb):_0x11814d['data'])??-0x1825+0x1003*0x2+-0x60*0x15,_0x4e6b49=((_0x2b7567=_0x36e63e['getParamet'+'er']('clrOffset'))==null?void(-0x13fd+-0x171e+0x5*0x89f):_0x2b7567['data'])??[-0x80*-0x3e+0x42c+-0x232c,0x9*-0x3fd+0x11a2+-0x3a7*-0x5,0x7d*0x38+0x13f1*0x1+-0x975*0x5,0x2313+0x2491+0x3*-0x17e1],_0x585e4f=((_0x19a4d8=_0x36e63e['getParamet'+'er']('clrScale'))==null?void(0x232a+0x2428+-0x4752):_0x19a4d8['data'])??[-0x7c*0x7+0x13ea+0x1*-0x1085,0x1*-0x1973+0x1a4b+-0xd7,0x21bf+-0xad1+-0x16ed,-0x99*-0xf+-0x19d3+0x3*0x59f],_0x1c36e7=((_0x22b34f=_0x36e63e['getParamet'+'er']('uShapeN'))==null?void(0x8d4+0x7*0x207+-0x1705):_0x22b34f['data'])??-0x17b*0x19+0xc70+-0xe9*-0x1b,_0xad43db=((_0x4cae72=_0x36e63e['getParamet'+'er']('mode'))==null?void(0x3*0x871+0x2*0xe1c+0x5f3*-0x9):_0x4cae72['data'])??-0x22cb+0x1bb*-0x9+-0x325e*-0x1,_0x323687=((_0x4c0169=_0x36e63e['getParamet'+'er']('ringSize'))==null?void(-0x26ef+-0xb0d*-0x2+0x10d5):_0x4c0169['data'])??-0x3*0x65+0x199f+0x10*-0x187,_0x5d528c=((_0x4a8893=_0x36e63e['defines'])==null?void(-0x977+-0x1*0x1f9+0xb70):_0x4a8893['get']('uOpenAnim'))??'0',_0x31b563=((_0x4f15ac=_0x36e63e['defines'])==null?void(-0x47+0xa16+0x1*-0x9cf):_0x4f15ac['get']('uControlCo'+'lorMode'))??'0';_0x36e63e['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x36e63e['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x36e63e['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x36e63e['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x36e63e['setParamet'+'er']('uSplatScal'+'e',_0x551e90),_0x36e63e['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x21afd5),_0x36e63e['setParamet'+'er']('uSaturatio'+'n',_0x12b8bb),_0x36e63e['setParamet'+'er']('uHueOffset',_0x408141),_0x36e63e['setParamet'+'er']('uInvertOpa'+'city',_0xaf65),_0x36e63e['setParamet'+'er']('uOpacity',_0x5d739e),_0x36e63e['setParamet'+'er']('clrOffset',_0x4e6b49),_0x36e63e['setParamet'+'er']('clrScale',_0x585e4f),_0x36e63e['setParamet'+'er']('uShapeN',_0x1c36e7),_0x36e63e['setParamet'+'er']('mode',_0xad43db),_0x36e63e['setParamet'+'er']('ringSize',_0x323687),_0x36e63e['setParamet'+'er']('prerenderC'+'Time',-0x542*0x7+-0xed*-0x3+0x2207),_0x36e63e['setParamet'+'er']('renderSpac'+'e',-0x2506+-0x1578+0xea2*0x4),_0x36e63e['setParamet'+'er']('endSpace',0x11a5+-0x8be+-0x8dd*0x1),_0x36e63e['setDefine']('uOpenAnim',_0x5d528c),_0x36e63e['setDefine']('uControlCo'+'lorMode',_0x31b563),this['transformM'+'otionTextu'+'re']&&_0x36e63e['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x36e63e['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x36e63e['setDefine']('SH_BANDS',this['shBands']),_0x36e63e['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x36e63e['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x36e63e['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x36e63e['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x36e63e['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x48fb92){const _0x311cf6=Math['ceil'](Math['sqrt'](_0x48fb92)),_0x140ea3=Math['ceil'](_0x48fb92/_0x311cf6);return new J(_0x311cf6,_0x140ea3);}async['updateColo'+'rData'](_0x5e9036){var _0x2003eb;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x2f1209=this['colorTextu'+'re2'];if(!_0x2f1209||this['isDestroye'+'d'])return;let _0xd3985b=(_0x2003eb=_0x5e9036['transformD'+'ata'])==null?void(0xdf4+0x19ef+-0x27e3):_0x2003eb['dataColor'];if(!_0xd3985b){const _0x4dcea8=_0x5e9036['getProp']('color_opac'+'ity');_0xd3985b=new Uint16Array(_0x4dcea8['buffer']['slice']());}await this['idleUpdate'+'TexturePro'+'mise'](_0x2f1209,_0xd3985b);}async['getTransfo'+'rmDataByWo'+'rker'](_0x3b889b){var _0x2d283b;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x2d283b=_0x3b889b['transformD'+'ata'])!=null&&_0x2d283b['dataCenter'+'s'])return{'centers':_0x3b889b['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x3b889b['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x3b889b['transformD'+'ata']['dataScale'],'dataRotation':_0x3b889b['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x3b889b['transformD'+'ata']['dataMotion'],'dataTime':_0x3b889b['transformD'+'ata']['dataTime'],'motion':_0x3b889b['transformD'+'ata']['motion'],'tScaleArray':_0x3b889b['transformD'+'ata']['tScaleArra'+'y']};const _0x6f80ca=_0x3b889b['getProp']('position'),_0x5e17ad=_0x3b889b['getProp']('motion'),_0x4094c1=_0x3b889b['getProp']('rotation'),_0x5ed4db=_0x3b889b['getProp']('scale'),_0x57403c=_0x3b889b['getProp']('t'),_0x4ddbb8=_0x3b889b['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x3b889b['numSplats'],this['is4D'],_0x6f80ca,_0x4094c1,_0x5e17ad,_0x5ed4db,_0x57403c,_0x4ddbb8);}async['updateTran'+'sformFromD'+'ata'](_0x3a0410){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x3a0410['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x3a0410['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x3a0410['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x3a0410['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x3a0410['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x50ca85,_0x3df01c){if(!this['isDestroye'+'d'])return new Promise(_0x2e143c=>{requestIdleCallback(()=>{const _0x2753c6=_0x50ca85['lock']();_0x2753c6==null||_0x2753c6['set'](_0x3df01c),_0x50ca85['unlock'](),_0x2e143c(!(-0x1fc5+-0x491+0x2456));},{'timeout':0x12c});});}async['updateSHDa'+'ta'](_0x4dce43){var _0x5b3d0c,_0x3666bd,_0x329ce8,_0x3c5ad9,_0x4ef95b,_0x58b393,_0x2b2e82,_0x20e24d;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x5926c9=(_0x5b3d0c=this['sh1to3Text'+'ure2'])==null?void(-0x1*-0x2546+-0x1*-0x1c45+0x418b*-0x1):_0x5b3d0c['lock'](),_0x2e21e2=(_0x3666bd=this['sh4to7Text'+'ure2'])==null?void(-0x254+0xd68+-0x58a*0x2):_0x3666bd['lock'](),_0x422074=(_0x329ce8=this['sh8to11Tex'+'ture2'])==null?void(-0x5*-0x62e+0x13cb+-0x32b1):_0x329ce8['lock'](),_0x324145=(_0x3c5ad9=this['sh12to15Te'+'xture2'])==null?void(-0x1052+0x1c30+-0xbde):_0x3c5ad9['lock'](),_0x58818f={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x5da170=X_(_0x4dce43,_0x58818f*(0x22ea+-0x20e7+-0x40*0x8)),_0x4211be=0x1b47+-0x120d+-0x13b*0x1,_0x3d8471=0x20*0x71+-0x3*0x93e+0x1199,_0x5f01d8=new Float32Array(0x1f78+0x1df0+-0x3d67),_0x31b566=new Uint32Array(_0x5f01d8['buffer']),_0x4a5111=new Array(_0x58818f*(-0x20e8+0x21b8+-0x29*0x5))['fill'](0x207+-0x4*-0x4e6+-0x159f);for(let _0x3e417c=0x19da*0x1+0x15c7*-0x1+-0x413;_0x3e417c<_0x4dce43['numSplats'];++_0x3e417c){for(let _0x404bd8=-0xcf+0x1*0xea5+-0xdd6;_0x404bd8<_0x58818f;++_0x404bd8)_0x4a5111[_0x404bd8*(-0x15f0+0x13ca+0x229)]=_0x5da170[_0x404bd8][_0x3e417c],_0x4a5111[_0x404bd8*(0x5*0x2c3+0x1*-0xc1b+-0x1b1)+(-0x1076+0x15de+-0x567)]=_0x5da170[_0x404bd8+_0x58818f][_0x3e417c],_0x4a5111[_0x404bd8*(-0x2*0xd1a+-0x1f77+0x39ae)+(-0x2*-0xc0b+-0x34*-0x21+-0x7b2*0x4)]=_0x5da170[_0x404bd8+_0x58818f*(-0x2*-0x3c3+0x193c+-0x20c0)][_0x3e417c];let _0xc823=_0x4a5111[0x144b+0xaa3+-0x1eee];for(let _0x5b1c89=0x13b7*-0x1+0x1*-0x501+0x18b9;_0x5b1c89<_0x58818f*(-0x814*-0x1+-0x16f9+-0xd4*-0x12);++_0x5b1c89)_0xc823=Math['max'](_0xc823,Math['abs'](_0x4a5111[_0x5b1c89]));if(_0xc823!==-0xa81+0x29*0x89+0x10*-0xb7){for(let _0x6cfe21=-0x7cd+-0x1014+0x1*0x17e1;_0x6cfe21<_0x58818f;++_0x6cfe21)_0x4a5111[_0x6cfe21*(0xf1+0x1b91+-0x1c7f)+(-0x714+-0x17b*0x9+0x1467)]=Math['max'](0x1*-0x6e8+-0x21b2+-0x1*-0x289a,Math['min'](_0x4211be,Math['floor']((_0x4a5111[_0x6cfe21*(0xa*0x33d+0x709*-0x3+-0xb44)+(-0x22d6+-0x938+-0x1607*-0x2)]/_0xc823*(-0x38*0x28+-0x13ed*0x1+0x1cad+0.5)+(0x143c+-0xbd8+-0x432*0x2+0.5))*_0x4211be+(0x804+0x2372*0x1+-0x2b76*0x1+0.5)))),_0x4a5111[_0x6cfe21*(0x4c6+-0xe63*0x1+0xe0*0xb)+(-0x24d2+-0x16e1+0x3bb4)]=Math['max'](0x3*-0x996+0x2f9*0x2+-0x16d*-0x10,Math['min'](_0x3d8471,Math['floor']((_0x4a5111[_0x6cfe21*(-0xaf4+0x1*0x1a52+-0x1*0xf5b)+(-0x39b+-0x78+0x414)]/_0xc823*(-0x7*-0x38e+0x1*0x63f+-0x1f21*0x1+0.5)+(0x713*-0x5+-0x202b+-0x2*-0x21c5+0.5))*_0x3d8471+(0x1e06+-0x17*0x97+-0x1075+0.5)))),_0x4a5111[_0x6cfe21*(-0x1895+-0x1*-0x1f29+-0x691)+(-0x1805+-0x5*0x202+0x13*0x1cb)]=Math['max'](0x5b*0x4c+-0x1b7d+0x79*0x1,Math['min'](_0x4211be,Math['floor']((_0x4a5111[_0x6cfe21*(-0x42a*0x1+-0x174e+0x1b7b)+(-0x1f96+0x18a1*-0x1+0x3839*0x1)]/_0xc823*(0xa9*0x34+0x15*0x106+-0x37d2+0.5)+(0x2669*-0x1+-0xbd5*0x1+0x323e+0.5))*_0x4211be+(0x5f0+0xa08+0x2*-0x7fc+0.5))));_0x5f01d8[0x103f+-0x22f7+0x12b8]=_0xc823,_0x5926c9[_0x3e417c*(-0x5f5*0x5+0x25d5+-0x808)+(-0xa4f+0x3*-0x3e5+-0xaff*-0x2)]=_0x31b566[0x2*-0x10b7+-0xa0b*-0x1+0x1763*0x1],_0x5926c9[_0x3e417c*(-0x212c+-0x6d+0x219d)+(0x10ff+-0x2*0x1be+-0x2*0x6c1)]=_0x4a5111[-0xae5+-0x16b3+0x2198]<<0xccd+0x2f*-0x35+-0x2fd|_0x4a5111[0x1*-0x1a69+0x8c4+0x11a6]<<-0x258e+0x6*-0x1f6+0x315d|_0x4a5111[-0x1a30+0x1752+0x2e0],_0x5926c9[_0x3e417c*(-0x349*0x1+0x11*-0x13f+0x187c)+(-0x1c08+-0x191b+0x3525)]=_0x4a5111[-0x897*0x3+0x1579+0x44f]<<-0x1*0xce3+0x2653*-0x1+0x334b|_0x4a5111[-0xe6*0x2+0x40f*0x7+-0x1a99]<<-0x1c4e+0x255*-0xe+-0xf*-0x411|_0x4a5111[0x1*0x42d+-0x913+-0x1*-0x4eb],_0x5926c9[_0x3e417c*(-0xa5*0x2d+0x2137+-0x432)+(0x1fd3*0x1+-0x6e9+-0x18e7)]=_0x4a5111[-0x1*-0x13f3+0x1f23+-0xac*0x4c]<<-0x1310+-0xd72+0x2097|_0x4a5111[0x598*-0x4+-0x25c6*0x1+0x3c2d]<<0x22f0+-0x3*-0xbf+-0x2522|_0x4a5111[0x4ad+-0x1b3*0x15+-0x3a*-0x89],this['shBands']>-0x2*0x727+0x6bb+0x794&&(_0x2e21e2[_0x3e417c*(-0x1396+0x2bf+-0x10db*-0x1)+(0x26*0x7a+-0x2525*-0x1+-0x3*0x126b)]=_0x4a5111[0xd08+0x1526+-0x1*0x2225]<<-0x26fb*0x1+-0xf0*-0x22+0xe6*0x8|_0x4a5111[-0x332+-0x1*-0x13e1+0x1*-0x10a5]<<-0x1998*0x1+-0x805+-0x167*-0x18|_0x4a5111[0x17ff+-0x11*0x15+-0x168f],_0x2e21e2[_0x3e417c*(0x7*0x458+-0x18a7+-0x5bd)+(-0x3d2*-0x1+-0x5e4+0x213)]=_0x4a5111[-0x27a*0xd+-0x7f*-0x25+0xde3]<<0x1a43+-0x2553+-0x1*-0xb25|_0x4a5111[0x1f*0xbb+-0x1*0x21dd+0xb45]<<0x1dfe+0x3*-0x727+-0x87e|_0x4a5111[0x1*-0x1051+-0x44*0x59+0x1*0x2803],_0x2e21e2[_0x3e417c*(-0x6b*0x49+0x1cb8+-0x1cf*-0x1)+(0x1*0x1bdd+0x1*-0x1163+-0xa78)]=_0x4a5111[0x1*0x259a+-0xc*0x81+-0x1f7f*0x1]<<-0x1b78+0x1f14+-0x387|_0x4a5111[0x17d*0x15+-0x117f+-0xdb2]<<0x1*-0x25e9+-0xb0*-0x1f+0x10a4|_0x4a5111[-0x3*-0x733+0xeb9*0x1+-0x2441],_0x2e21e2[_0x3e417c*(-0x1e8d+0x19d*-0x3+0x2368)+(0x2250+0x612+-0x285f)]=_0x4a5111[0x10a1+0x4ef*-0x7+0x11fa]<<-0x1df*0x12+-0xa*0x3e2+0x1*0x4897|_0x4a5111[-0x313*0x1+-0x1b1e+-0x95*-0x34]<<-0x51*0x22+-0x15*-0x189+-0x1570|_0x4a5111[-0x8ce*-0x3+-0x13*-0x122+-0xbf7*0x4],this['shBands']>0x77*-0x34+-0x3*0x8fa+0x331c?(_0x422074[_0x3e417c*(-0x17*-0xa3+0x17b*0x1+-0x2*0x80e)+(-0x157*-0x7+-0x234+-0x72d*0x1)]=_0x4a5111[0x2101+-0xb4*0x1f+-0x59*0x20]<<0x1993+-0x1386+-0x5f8|_0x4a5111[-0x197e+0x24e5+-0xb51*0x1]<<0x1134+0x3*-0x87e+-0x1*-0x851|_0x4a5111[-0x1584+0x5e7+0xfb4],_0x422074[_0x3e417c*(0x314*-0x7+-0x16*-0xb9+0x5aa)+(0x1*-0xe51+0x16b8*-0x1+0x250a*0x1)]=_0x4a5111[0x1146+0x2419+-0x3547]<<-0x1732+0x1f62+-0x81b|_0x4a5111[0x1f22+-0x23c3+-0xa*-0x79]<<-0x33+-0xe5c+0x74d*0x2|_0x4a5111[0x187d+0x263+-0x2e*0x95],_0x422074[_0x3e417c*(0x2613+0xfe2+-0x35f1)+(-0x1a95+-0x144e*-0x1+0x649)]=_0x4a5111[-0x131*-0x1e+-0x10a1+-0x1302]<<-0x2bf+0x3*-0x96b+0x1f15|_0x4a5111[0x4*-0x9a5+-0x16b*-0x12+0xd2a]<<0x1f47+-0x1c1*-0xa+-0x30c6|_0x4a5111[0x9ce+0x7*0x562+0x2f5f*-0x1],_0x422074[_0x3e417c*(-0x551*-0x3+-0x1*-0x1a5d+-0x2a4c)+(-0x2*-0xf5+0x1*-0xb75+0x98e)]=_0x4a5111[-0x13e2+-0xa93*0x1+0x1e93]<<0xd26+-0x11*0x11b+0x5ba|_0x4a5111[-0x11c2*0x2+0x1f5a+-0x1*-0x449]<<-0x19d5*-0x1+0x21+-0x19eb|_0x4a5111[-0xa9f+-0xd*-0x2f5+-0xdd9*0x2],_0x324145[_0x3e417c*(-0x672*-0x2+0x2*0x673+-0x19c6)+(-0x5*0x2e1+0x1*-0x1702+0x77b*0x5)]=_0x4a5111[0x129a+-0x26d5*0x1+0x145c]<<-0x1be8+-0xd68+0x2965*0x1|_0x4a5111[-0x21d6+0x499*0x7+0x1c9]<<-0x6b*-0xf+0xc5a+-0x4a5*0x4|_0x4a5111[0x142*0x7+0x888+-0x1133],_0x324145[_0x3e417c*(-0x62f*-0x1+-0xaeb*0x2+0xfab)+(-0xd41+0x3*-0x47+0xe17)]=_0x4a5111[-0x1eb+0x9ba+0x97*-0xd]<<-0xb*0x1ff+0x5bd*-0x1+0x223*0xd|_0x4a5111[0x2244+-0x120*0x12+-0xddf]<<-0x2*-0x365+0x3a9+-0xa68|_0x4a5111[-0x1241+-0x13*0x137+0x297c],_0x324145[_0x3e417c*(-0xbca+0x19c2+-0x5e*0x26)+(-0x1*-0x7fa+0x5*0x5f8+-0x37*0xb0)]=_0x4a5111[-0x544*-0x1+-0x9de+-0x1*-0x4c1]<<-0x1a39+-0x2402+0x3e50|_0x4a5111[-0x12ed+0x1677+-0x1*0x362]<<-0x11*-0x19e+0x23d*0x7+-0x2b1e|_0x4a5111[-0x1*0x1cef+0xa93*-0x1+0x27ab],_0x324145[_0x3e417c*(0x11*-0x7f+-0x1*0x1645+0x1eb8)+(-0x11*0x232+0x140*0x13+0x13*0xb7)]=_0x4a5111[-0x184b+-0xac1+0x2336]<<-0x2474*-0x1+-0x7ae*0x1+-0x5bd*0x5|_0x4a5111[-0x16a2+-0xc52*-0x2+-0x1d7]<<-0x1bf5*0x1+0x88f+0x7*0x2c7|_0x4a5111[0xa61+0x684*0x1+-0x593*0x3]):_0x422074[_0x3e417c]=_0x4a5111[0x61*0xe+-0x20a9+0x1b70]<<-0x10f0*0x1+-0x25*-0x83+-0x1ea|_0x4a5111[-0x1*0x115a+0x29*0x4f+0x4c9]<<0xa0c+-0x13*0x12e+0xc69*0x1|_0x4a5111[-0x1*0x203+0x8*-0x37b+0x1df2]);}}(_0x4ef95b=this['sh1to3Text'+'ure2'])==null||_0x4ef95b['unlock'](),(_0x58b393=this['sh4to7Text'+'ure2'])==null||_0x58b393['unlock'](),(_0x2b2e82=this['sh8to11Tex'+'ture2'])==null||_0x2b2e82['unlock'](),(_0x20e24d=this['sh12to15Te'+'xture2'])==null||_0x20e24d['unlock']();}async['updateSHDa'+'taByWorker'](_0x5b0911){var _0x2aefd1,_0x489489,_0x24dac8,_0x3b159c,_0x536a08;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x15b40d={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x536efb,_0xe2a165,_0x2c9c2c,_0x239a9a;if((_0x2aefd1=_0x5b0911['transformD'+'ata'])!=null&&_0x2aefd1['sh1to3Data'])_0x536efb=(_0x489489=_0x5b0911['transformD'+'ata'])==null?void(-0xd13+-0x143f*0x1+0x2152*0x1):_0x489489['sh1to3Data'],_0xe2a165=(_0x24dac8=_0x5b0911['transformD'+'ata'])==null?void(0x7*-0x1f4+0x1*-0x135f+0x301*0xb):_0x24dac8['sh4to7Data'],_0x2c9c2c=(_0x3b159c=_0x5b0911['transformD'+'ata'])==null?void(-0x6*0x1a5+-0x1*-0x1f17+-0x3*0x713):_0x3b159c['sh8to11Dat'+'a'],_0x239a9a=(_0x536a08=_0x5b0911['transformD'+'ata'])==null?void(0x1503+-0x1f6b+0x2*0x534):_0x536a08['sh12to15Da'+'ta'];else{const _0x28f778=X_(_0x5b0911,_0x15b40d*(0x2c8*0x1+0x647*-0x2+0x3*0x343)),_0x16f98d=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x5b0911['numSplats'],this['shBands'],_0x28f778);_0x536efb=_0x16f98d['sh1to3Data'],_0xe2a165=_0x16f98d['sh4to7Data'],_0x2c9c2c=_0x16f98d['sh8to11Dat'+'a'],_0x239a9a=_0x16f98d['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x536efb),this['shBands']>0xdc9+-0xe*0x26d+0x11f*0x12&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0xe2a165),this['shBands']>-0x20c+-0x5*0x257+0xdc1?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x2c9c2c),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x239a9a)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x2c9c2c));}}const XA='FILL_WINDO'+'W',q_='KEEP_ASPEC'+'T',j_='AUTO',qA='FIXED';let Qy;function Ys(){return Qy;}function Wf(_0x529efb){Qy=_0x529efb;}class jA{constructor(){h(this,'renderPass'+'es',[]),h(this,'renderTarg'+'etMap',new Map());}['addRenderP'+'ass'](_0x106626){w['assert'](_0x106626),_0x106626['frameUpdat'+'e']();const _0x15222c=_0x106626['beforePass'+'es'];for(let _0x166073=-0xaca+0x1534+0x56*-0x1f;_0x166073<_0x15222c['length'];_0x166073++){const _0x349132=_0x15222c[_0x166073];_0x349132['enabled']&&this['addRenderP'+'ass'](_0x349132);}_0x106626['enabled']&&this['renderPass'+'es']['push'](_0x106626);const _0x40247e=_0x106626['afterPasse'+'s'];for(let _0x43e0df=0x1c13+-0x2c7*0x5+-0xe30;_0x43e0df<_0x40247e['length'];_0x43e0df++){const _0x40b25e=_0x40247e[_0x43e0df];_0x40b25e['enabled']&&this['addRenderP'+'ass'](_0x40b25e);}}['reset'](){this['renderPass'+'es']['length']=0x6f+0x21ff+-0x2a6*0xd;}['compile'](){const _0x85eb6c=this['renderTarg'+'etMap'],_0x391abd=this['renderPass'+'es'];for(let _0x136c61=-0x3*0x650+0x2*0x10cf+-0x1*0xeae;_0x136c61<_0x391abd['length'];_0x136c61++){const _0x154f0f=_0x391abd[_0x136c61],_0x4675a6=_0x154f0f['renderTarg'+'et'];if(_0x4675a6!==void(0x4*-0x800+-0x1*0x189d+0x3*0x12df)){const _0xa4b96b=_0x85eb6c['get'](_0x4675a6);if(_0xa4b96b){const _0x194cee=_0x154f0f['colorArray'+'Ops']['length'];for(let _0x44803e=-0x8*0x3a4+0x1a87+-0x299*-0x1;_0x44803e<_0x194cee;_0x44803e++)_0x154f0f['colorArray'+'Ops'][_0x44803e]['clear']||(_0xa4b96b['colorArray'+'Ops'][_0x44803e]['store']=!(-0x17e*-0x3+0xbb*0x1+-0x1f*0x2b));_0x154f0f['depthStenc'+'ilOps']['clearDepth']||(_0xa4b96b['depthStenc'+'ilOps']['storeDepth']=!(-0x65+-0x1*0x8a5+0x90a)),_0x154f0f['depthStenc'+'ilOps']['clearStenc'+'il']||(_0xa4b96b['depthStenc'+'ilOps']['storeStenc'+'il']=!(0x18c8+0x332+-0x1*0x1bfa));}_0x85eb6c['set'](_0x4675a6,_0x154f0f);}}for(let _0x2cc394=0x47c+0x1*-0x9ef+0x573;_0x2cc394<_0x391abd['length']-(0xc65*-0x1+0x1607+-0x9a1);_0x2cc394++){const _0x460538=_0x391abd[_0x2cc394],_0x1ca720=_0x460538['renderTarg'+'et'],_0x8c80b8=_0x391abd[_0x2cc394+(0x1323+-0x2*-0x1186+-0x5*0xad6)],_0x1d2dd9=_0x8c80b8['renderTarg'+'et'];_0x1ca720!==_0x1d2dd9||_0x1ca720===void(-0xcaf+0x1829+-0xe2*0xd)||_0x8c80b8['depthStenc'+'ilOps']['clearDepth']||_0x8c80b8['depthStenc'+'ilOps']['clearStenc'+'il']||_0x8c80b8['colorArray'+'Ops']['some'](_0x16a3a0=>_0x16a3a0['clear'])||_0x460538['afterPasse'+'s']['length']>0x1*0x883+0x19a+0xa1d*-0x1||_0x8c80b8['beforePass'+'es']['length']>0x1*-0xd7b+0x3b*-0x35+0x19b2||(_0x460538['_skipEnd']=!(-0x5*0x49e+0x20*-0x3+-0x3e9*-0x6),_0x8c80b8['_skipStart']=!(0x4e3*0x1+0x4fb+-0x3*0x34a));}let _0x2a5b4a=null,_0x121ee3=null;for(let _0x293f36=0x1ca*-0x1+-0x296*-0x1+0x66*-0x2;_0x293f36<_0x391abd['length'];_0x293f36++){const _0x1001b0=_0x391abd[_0x293f36],_0x36d34d=_0x1001b0['renderTarg'+'et'],_0x26ec29=_0x36d34d==null?void(-0x1*0x1c0+0xe9c+-0xcdc):_0x36d34d['colorBuffe'+'r'];if(_0x26ec29!=null&&_0x26ec29['cubemap']){if(_0x2a5b4a===_0x26ec29){const _0x50bd2f=_0x121ee3['colorArray'+'Ops']['length'];for(let _0x33e559=0x6*-0x5ab+0x257b+-0x1*0x379;_0x33e559<_0x50bd2f;_0x33e559++)_0x121ee3['colorArray'+'Ops'][_0x33e559]['mipmaps']=!(0xc81+0x1*-0xc7d+0x1*-0x3);}_0x2a5b4a=_0x36d34d['colorBuffe'+'r'],_0x121ee3=_0x1001b0;}else _0x1001b0['requiresCu'+'bemaps']&&(_0x2a5b4a=null,_0x121ee3=null);}_0x85eb6c['clear']();}['render'](_0x1f8069){this['compile']();const _0xd8d38f=this['renderPass'+'es'];for(let _0x8dd8af=0x16dd+0x18c9*-0x1+-0x6*-0x52;_0x8dd8af<_0xd8d38f['length'];_0x8dd8af++)_0xd8d38f[_0x8dd8af]['render']();}}class YA{constructor(_0x20f746,_0x2fc782){this['texture0']=_0x20f746,this['texture1']=_0x2fc782;}['destroy'](){var _0x139767,_0x4279af;(_0x139767=this['texture0'])==null||_0x139767['destroy'](),(_0x4279af=this['texture1'])==null||_0x4279af['destroy']();}}const Y_=new Kt();class Qr{static['createText'+'ure'](_0x5f307b,_0xca8b68,_0x2c637f,_0x53eb4d=''){return new _e(_0x5f307b,{'name':'AreaLightL'+'UT'+_0x53eb4d,'width':_0x2c637f,'height':_0x2c637f,'format':_0xca8b68,'addressU':ue,'addressV':ue,'type':Ms,'magFilter':vt,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x1cde+-0x1*0x1f9f+0x3c7e)});}static['applyTextu'+'res'](_0x479223,_0x5da663,_0x4fadc5){Y_['remove'](_0x479223),Y_['get'](_0x479223,()=>new YA(_0x5da663,_0x5da663===_0x4fadc5?null:_0x4fadc5)),_0x479223['scope']['resolve']('areaLights'+'LutTex1')['setValue'](_0x5da663),_0x479223['scope']['resolve']('areaLights'+'LutTex2')['setValue'](_0x4fadc5);}static['createPlac'+'eholder'](_0x3e4de2){const _0x3becb3=Qr['createText'+'ure'](_0x3e4de2,nt,-0x15e2+0x1*-0x1f10+0x34f4,'placeholde'+'r');_0x3becb3['lock']()['fill'](-0x4d6+0xe*0x93+-0x14*0x29),_0x3becb3['unlock'](),Qr['applyTextu'+'res'](_0x3e4de2,_0x3becb3,_0x3becb3);}static['set'](_0x43fb66,_0x56cfd8,_0x43d8df){function _0x3d0245(_0x369c68,_0x46932e,_0x56e2c4){const _0x396c0b=Qr['createText'+'ure'](_0x369c68,_0x56e2c4,-0x1317+-0x14+0x136b);return _0x396c0b['lock']()['set'](_0x46932e),_0x396c0b['unlock'](),_0x396c0b;}function _0xd2cb2c(_0x143388){const _0x26aafc=_0x143388['length'],_0x11d253=new Uint16Array(_0x26aafc),_0x8a4b35=Tn['float2Half'];for(let _0x26f184=-0xa3*0x8+-0x17f6+0x1d0e;_0x26f184<_0x26aafc;_0x26f184++)_0x11d253[_0x26f184]=_0x8a4b35(_0x143388[_0x26f184]);return _0x11d253;}const _0x2d2433=_0x56cfd8,_0x190c14=_0x43d8df,_0x53123c=_0xd2cb2c(_0x2d2433),_0x580d1c=_0xd2cb2c(_0x190c14),_0x3107d8=_0x3d0245(_0x43fb66,_0x53123c,nt),_0x10b34c=_0x3d0245(_0x43fb66,_0x580d1c,nt);Qr['applyTextu'+'res'](_0x43fb66,_0x3107d8,_0x10b34c);}}const nh='en-US',oh={'en':'en-US','es':'en-ES','zh':'zh-CN','zh-HK':'zh-TW','zh-TW':'zh-HK','zh-MO':'zh-HK','fr':'fr-FR','de':'de-DE','it':'it-IT','ru':'ru-RU','ja':'ja-JP'},$p={};function Ar(_0x4a1676,_0x244ceb){for(let _0x45742d=0x1422+-0xa*-0x11a+-0x1f26,_0x24f3d8=_0x4a1676['length'];_0x45742d<_0x24f3d8;_0x45742d++)$p[_0x4a1676[_0x45742d]]=_0x244ceb;}function Ri(_0x4690f0){const _0x46b287=_0x4690f0['indexOf']('-');return _0x46b287!==-(-0xbf4+-0x1f3*-0xc+-0xb6f*0x1)?_0x4690f0['substring'](0x1880+0x97*-0xc+-0x116c,_0x46b287):_0x4690f0;}function KA(_0x94ab3d,_0x16ce06){const _0x56a5b8=_0x94ab3d['indexOf']('-');return _0x56a5b8!==-(-0x1f17+-0x16d4*0x1+0x35ec)?_0x16ce06+_0x94ab3d['substring'](_0x56a5b8):_0x16ce06;}function Jy(_0x522c6f,_0x22b682){if(_0x22b682[_0x522c6f])return _0x522c6f;let _0x3afb26=oh[_0x522c6f];if(_0x3afb26&&_0x22b682[_0x3afb26])return _0x3afb26;const _0xb7d1fb=Ri(_0x522c6f);return _0x3afb26=oh[_0xb7d1fb],_0x22b682[_0x3afb26]?_0x3afb26:_0x22b682[_0xb7d1fb]?_0xb7d1fb:nh;}Ar(['ja','ko','th','vi','zh','id'],_0x21d5f5=>-0x24e3+0x2526*0x1+-0x1*0x43),Ar(['fa','hi'],_0x3ca095=>_0x3ca095>=-0x26e*0xb+0x3cf+0x1*0x16eb&&_0x3ca095<=-0x391+0x1*0x201b+-0x5*0x5b5?0xcc9+0x9d4+-0x169d:0x2ba+0x29b+0x4*-0x155),Ar(['fr','pt'],_0x5a3b45=>_0x5a3b45>=0x1*0x128e+-0x1*0xa4d+-0x841&&_0x5a3b45<0x2*0x614+-0x1003*-0x1+-0x1c29?-0x1e36*-0x1+0x164b+-0x3481:-0x2e*-0x2f+-0x13b5+0xb44),Ar(['da'],_0xdfac4a=>_0xdfac4a===0x9*0x145+0x1e22+0x2*-0x14c7||!Number['isInteger'](_0xdfac4a)&&_0xdfac4a>=0xe*0x287+-0x3d1+-0x1f91&&_0xdfac4a<=0x38b*0xb+0xb*0x2dd+-0x4677?0x17f2+0x961+-0x2153:-0x1*-0x943+-0x6f1+-0x251),Ar(['de','en','it','el','es','tr','fi','sv','nb','no','ur'],_0x101828=>_0x101828===0x18a8+-0x135d+-0x54a?-0xf49*0x1+-0x235+0x117e:-0xb3*-0x31+-0x1b5e+0xc*-0x93),Ar(['ru','uk'],_0x384278=>{if(Number['isInteger'](_0x384278)){const _0x23f9b7=_0x384278%(-0x1*0x26fa+0x22*-0xe5+0x456e),_0x3e3d8e=_0x384278%(0x3*0x19b+0x1943+-0x5f0*0x5);if(_0x23f9b7===0x43*0xd+-0x6e1+0x37b&&_0x3e3d8e!==-0xcf7*-0x1+0x911+-0x15fd)return 0x1ffc+-0x10f*0x23+0x511;if(_0x23f9b7>=-0x1018+0x1dc7+-0x185*0x9&&_0x23f9b7<=-0x207b+0x6bb+-0x22*-0xc2&&(_0x3e3d8e<0x128e+0x1a62+-0x2ce4||_0x3e3d8e>0x1*0x15b2+0x1*0xa57+-0x1ffb))return-0x1d78+0x1*-0x8a5+-0x29*-0xee;if(_0x23f9b7===-0xa*0x3b9+-0x9e8+0xfb6*0x3||_0x23f9b7>=0x11*0x245+-0xf17+-0x1779&&_0x23f9b7<=-0x2*0x719+0x655*0x5+-0x116e||_0x3e3d8e>=0x114a+-0x18af+0x7*0x110&&_0x3e3d8e<=-0x1*0x26e5+0xdf*0x2b+0x17e*0x1)return 0x22*0x41+-0x1*-0x61b+0x9*-0x1a3;}return-0xe35+-0x1*0x15fd+0x2435;}),Ar(['pl'],_0xe3f13f=>{if(Number['isInteger'](_0xe3f13f)){if(_0xe3f13f===-0x1f17+-0x1af6+0x1*0x3a0e)return 0x1*0x2149+-0x22d3+0xc5*0x2;const _0x40dd57=_0xe3f13f%(0x1dd6+0x2*-0x1+0x1f*-0xf6),_0xc67d64=_0xe3f13f%(-0x3*0xa73+0x1458+0xb65);if(_0x40dd57>=-0x2bd+-0x2221+0x24e0&&_0x40dd57<=-0x12b+0x19f0+-0x18c1*0x1&&(_0xc67d64<0x4*-0x74b+0x1e98+-0x160||_0xc67d64>0x1*0xd45+-0xeb4+0x17d))return 0x1*-0x12fb+-0x1bc2+-0xc1*-0x3e;if(_0x40dd57>=-0x1f69*0x1+0x230e+0x137*-0x3&&_0x40dd57<=-0x7*-0x221+-0x506*-0x6+-0x2d0a||_0x40dd57>=-0x1*-0x1efe+0x1ffb*0x1+-0xc*0x53f&&_0x40dd57<=0x98f*0x2+0x11e5*0x1+-0x2*0x127d||_0xc67d64>=0xeb0+-0x4*-0x392+-0x1cec&&_0xc67d64<=0x985*-0x1+-0xb*-0x1f+0x1a6*0x5)return 0xe*-0x125+0x16fb+0x6f3*-0x1;}return 0xa*0x3bc+0x3f*0x63+-0x3db2;}),Ar(['ar'],_0x410fb9=>{if(_0x410fb9===-0x1943*-0x1+-0x16e6*0x1+0x79*-0x5)return-0x739*-0x1+-0x1*-0x2309+-0x1*0x2a42;if(_0x410fb9===-0x1e97+-0xd7f+0x2c17)return-0x4b6+0x1b37+-0x1680;if(_0x410fb9===0x4de*0x5+0x3*0x1ad+0x5df*-0x5)return-0xf25*-0x1+-0x1ef9*-0x1+0xb87*-0x4;if(Number['isInteger'](_0x410fb9)){const _0x2f805f=_0x410fb9%(0x11c+-0xfd2+-0xf1a*-0x1);if(_0x2f805f>=0x293*0x9+-0x65d+0x599*-0x3&&_0x2f805f<=-0x1a81+-0x20e4+-0x5*-0xbe3)return-0x11c1+0x6cc+0xaf8;if(_0x2f805f>=0x1e90+0x78+0x1*-0x1efd&&_0x2f805f<=0xc71+-0x16a2+-0x2*-0x54a)return-0x1dc1+-0xe6b+0x1618*0x2;}return 0x1f13+0x5d*-0x1+0x1b*-0x123;});const ZA=$p[Ri(nh)];function Jd(_0x4dfda4){return $p[_0x4dfda4]||ZA;}const Vn=new RegExp('^\x5cs*(?:(?:'+'[a-z]+[a-z'+'0-9\x5c-+.]*:'+')?//|data:'+'|blob:)','i');class QA{constructor(_0x1b4528='',_0x18f13d='',_0x466bcf=null,_0x1d807d=null,_0x7d876e=null,_0x53fc50=null){this['url']=_0x1b4528,this['filename']=_0x18f13d,this['hash']=_0x466bcf,this['size']=_0x1d807d,this['opt']=_0x7d876e,this['contents']=_0x53fc50;}['equals'](_0xadff43){return this['url']===_0xadff43['url']&&this['filename']===_0xadff43['filename']&&this['hash']===_0xadff43['hash']&&this['size']===_0xadff43['size']&&this['opt']===_0xadff43['opt']&&this['contents']===_0xadff43['contents'];}}let JA=-(0x1*0xe6+-0x4*-0x792+0x1f2d*-0x1);const eC={'pvr':'extCompres'+'sedTexture'+'PVRTC','dxt':'extCompres'+'sedTexture'+'S3TC','etc2':'extCompres'+'sedTexture'+'ETC','etc1':'extCompres'+'sedTexture'+'ETC1','basis':'canvas'},K_=['pvr','dxt','etc2','etc1','basis'];class pe extends me{constructor(_0x369775,_0x39f2c3,_0x1ac269,_0x35e7a3={},_0x1dce9b={}){super(),h(this,'_file',null),h(this,'_i18n',{}),h(this,'_preload',!(0x13*0x172+-0x1d94+0x21f)),h(this,'_resources',[]),h(this,'id',JA--),h(this,'loaded',!(-0x756*-0x1+-0x234+-0x521)),h(this,'loading',!(0x1*0xd9c+-0x162f+0x894)),h(this,'options',{}),h(this,'registry',null),h(this,'tags',new To(this)),h(this,'type'),h(this,'urlObject',null),(this['_name']=_0x369775||'',this['type']=_0x39f2c3,this['_data']=_0x35e7a3||{},this['options']=_0x1dce9b||{},_0x1ac269&&(this['file']=_0x1ac269));}set['name'](_0x4a63c1){if(this['_name']===_0x4a63c1)return;const _0xbf5f66=this['_name'];this['_name']=_0x4a63c1,this['fire']('name',this,this['_name'],_0xbf5f66);}get['name'](){return this['_name'];}set['file'](_0x2e3fb6){var _0x4bf31a,_0x2b14da;if(_0x2e3fb6&&_0x2e3fb6['variants']&&['texture','textureatl'+'as','bundle']['indexOf'](this['type'])!==-(0x3b*-0xa4+-0x2*-0x125f+-0x1*-0x10f)){const _0x1267fc=((_0x2b14da=(_0x4bf31a=this['registry'])==null?void(0x1176+0xd7+-0x124d):_0x4bf31a['_loader'])==null?void(0x43*0x3+-0x17*-0xb3+-0x10de):_0x2b14da['_app'])||Ys(),_0x975963=_0x1267fc==null?void(0x2412+0x5ad*0x2+0x17b6*-0x2):_0x1267fc['graphicsDe'+'vice'];if(_0x975963)for(let _0x1d6e7a=-0x39*0x26+0x9*-0xf7+0x18f*0xb,_0x3e86f8=K_['length'];_0x1d6e7a<_0x3e86f8;_0x1d6e7a++){const _0x314815=K_[_0x1d6e7a];if(_0x2e3fb6['variants'][_0x314815]&&_0x975963[eC[_0x314815]]){_0x2e3fb6=_0x2e3fb6['variants'][_0x314815];break;}if(_0x1267fc['enableBund'+'les']){const _0x42a160=_0x1267fc['bundles']['listBundle'+'sForAsset'](this);if(_0x42a160&&_0x42a160['find'](_0x4cc329=>{var _0x5aeab5;return(_0x5aeab5=_0x4cc329==null?void(0x3ba+-0xd*-0xd9+-0x5*0x2f3):_0x4cc329['file'])==null?void(-0xe84+0x30*-0x1+0xeb4):_0x5aeab5['variants'][_0x314815];}))break;}}}const _0x1ae8c5=this['_file'],_0x30b270=_0x2e3fb6?new QA(_0x2e3fb6['url'],_0x2e3fb6['filename'],_0x2e3fb6['hash'],_0x2e3fb6['size'],_0x2e3fb6['opt'],_0x2e3fb6['contents']):null;(!!_0x30b270!=!!_0x1ae8c5||_0x30b270&&!_0x30b270['equals'](_0x1ae8c5))&&(this['_file']=_0x30b270,this['fire']('change',this,'file',_0x30b270,_0x1ae8c5),this['reload']());}get['file'](){return this['_file'];}set['data'](_0x456d57){const _0xe245ef=this['_data'];this['_data']=_0x456d57,_0x456d57!==_0xe245ef&&(this['fire']('change',this,'data',_0x456d57,_0xe245ef),this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['data'](){return this['_data'];}set['resource'](_0x477af6){const _0x327ee7=this['_resources'][-0x182f+0x25f1+0x6*-0x24b];this['_resources'][0xc5f*0x2+-0x1c1*-0x11+-0x368f]=_0x477af6,this['fire']('change',this,'resource',_0x477af6,_0x327ee7);}get['resource'](){return this['_resources'][-0x693+0x2ef*-0x6+0x182d];}set['resources'](_0x548f24){const _0x52dad5=this['_resources'];this['_resources']=_0x548f24,this['fire']('change',this,'resources',_0x548f24,_0x52dad5);}get['resources'](){return this['_resources'];}set['preload'](_0xda07f5){_0xda07f5=!!_0xda07f5,this['_preload']!==_0xda07f5&&(this['_preload']=_0xda07f5,this['_preload']&&!this['loaded']&&!this['loading']&&this['registry']&&this['registry']['load'](this));}get['preload'](){return this['_preload'];}set['loadFaces'](_0x3fdec6){_0x3fdec6=!!_0x3fdec6,(!this['hasOwnProp'+'erty']('_loadFaces')||_0x3fdec6!==this['_loadFaces'])&&(this['_loadFaces']=_0x3fdec6,this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['loadFaces'](){return this['_loadFaces'];}['getFileUrl'](){const _0x2dbfcf=this['file'];if(!_0x2dbfcf||!_0x2dbfcf['url'])return null;let _0x59c1a0=_0x2dbfcf['url'];if(this['registry']&&this['registry']['prefix']&&!Vn['test'](_0x59c1a0)&&(_0x59c1a0=this['registry']['prefix']+_0x59c1a0),this['type']!=='script'&&_0x2dbfcf['hash']){const _0x436112=_0x59c1a0['indexOf']('?')!==-(-0x1868+0x4b7*0x5+0xd6)?'&':'?';_0x59c1a0+=_0x436112+'t='+_0x2dbfcf['hash'];}return _0x59c1a0;}['getAbsolut'+'eUrl'](_0x5959c2){if(_0x5959c2['startsWith']('blob:')||_0x5959c2['startsWith']('data:'))return _0x5959c2;const _0x36d831=xe['getDirecto'+'ry'](this['file']['url']);return xe['join'](_0x36d831,_0x5959c2);}['getLocaliz'+'edAssetId'](_0x3a0e2f){return _0x3a0e2f=Jy(_0x3a0e2f,this['_i18n']),this['_i18n'][_0x3a0e2f]||null;}['addLocaliz'+'edAssetId'](_0x26f720,_0x1f976e){this['_i18n'][_0x26f720]=_0x1f976e,this['fire']('add:locali'+'zed',_0x26f720,_0x1f976e);}['removeLoca'+'lizedAsset'+'Id'](_0x30fd03){const _0x13094f=this['_i18n'][_0x30fd03];_0x13094f&&(delete this['_i18n'][_0x30fd03],this['fire']('remove:loc'+'alized',_0x30fd03,_0x13094f));}['ready'](_0xfec3de,_0x4edad8){_0x4edad8=_0x4edad8||this,this['loaded']?_0xfec3de['call'](_0x4edad8,this):this['once']('load',_0x8ea6a=>{_0xfec3de['call'](_0x4edad8,_0x8ea6a);});}['reload'](){this['loaded']&&(this['loaded']=!(0xbf0*0x2+0xf2e+-0x270d*0x1),this['registry']['load'](this));}['unload'](){if(!this['loaded']&&this['_resources']['length']===0x7*0x64+-0x1*-0x9a5+-0xc61)return;this['fire']('unload',this),this['registry']['fire']('unload:'+this['id'],this);const _0x51b829=this['_resources'];this['urlObject']&&(URL['revokeObje'+'ctURL'](this['urlObject']),this['urlObject']=null),this['resources']=[],this['loaded']=!(0x1b40+0x65*-0x2c+-0x9e3),this['file']&&this['registry']['_loader']['clearCache'](this['getFileUrl'](),this['type']);for(let _0x4de6de=0x1dad+0x50d+-0x22ba;_0x4de6de<_0x51b829['length'];++_0x4de6de){const _0x5c4585=_0x51b829[_0x4de6de];_0x5c4585&&_0x5c4585['destroy']&&_0x5c4585['destroy']();}}static['fetchArray'+'Buffer'](_0xe7f6de,_0x42f242,_0x25f0dd,_0xdcb870=-0x72*0x1b+0x10*0x19a+-0xd9a){var _0x593fe2;(_0x593fe2=_0x25f0dd==null?void(-0xa8d*0x3+0x2*0x182+0x1ca3*0x1):_0x25f0dd['file'])!=null&&_0x593fe2['contents']?setTimeout(()=>{_0x42f242(null,_0x25f0dd['file']['contents']);}):ot['get'](_0xe7f6de,{'cache':!(0x1a+0x235+-0x24f),'responseType':'arraybuffe'+'r','retry':_0xdcb870>-0x1d7d*0x1+-0x876*0x3+-0xb*-0x4fd,'maxRetries':_0xdcb870},_0x42f242);}}h(pe,'EVENT_LOAD','load'),h(pe,'EVENT_UNLO'+'AD','unload'),h(pe,'EVENT_REMO'+'VE','remove'),h(pe,'EVENT_ERRO'+'R','error'),h(pe,'EVENT_CHAN'+'GE','change'),h(pe,'EVENT_PROG'+'RESS','progress'),h(pe,'EVENT_ADDL'+'OCALIZED','add:locali'+'zed'),h(pe,'EVENT_REMO'+'VELOCALIZE'+'D','remove:loc'+'alized');class tC{constructor(_0x596077=null){h(this,'_index',{}),h(this,'_key'),this['_key']=_0x596077;}['addItem'](_0x58d36d){const _0xc23bf8=_0x58d36d['tags']['_list'];for(const _0x2f42ee of _0xc23bf8)this['add'](_0x2f42ee,_0x58d36d);}['removeItem'](_0x39fd27){const _0x17bbb1=_0x39fd27['tags']['_list'];for(const _0x340725 of _0x17bbb1)this['remove'](_0x340725,_0x39fd27);}['add'](_0x3d7df9,_0x2ab15a){this['_index'][_0x3d7df9]&&this['_index'][_0x3d7df9]['list']['indexOf'](_0x2ab15a)!==-(0x489+-0x23d8+0x30*0xa7)||(this['_index'][_0x3d7df9]||(this['_index'][_0x3d7df9]={'list':[]},this['_key']&&(this['_index'][_0x3d7df9]['keys']={})),this['_index'][_0x3d7df9]['list']['push'](_0x2ab15a),this['_key']&&(this['_index'][_0x3d7df9]['keys'][_0x2ab15a[this['_key']]]=_0x2ab15a));}['remove'](_0x1f1ecd,_0x9a8a29){if(!this['_index'][_0x1f1ecd]||this['_key']&&!this['_index'][_0x1f1ecd]['keys'][_0x9a8a29[this['_key']]])return;const _0x3237cc=this['_index'][_0x1f1ecd]['list']['indexOf'](_0x9a8a29);_0x3237cc!==-(-0x3d*0x9+0x408+-0x1e2)&&(this['_index'][_0x1f1ecd]['list']['splice'](_0x3237cc,-0x22d8+0x39d+0x1f3c),this['_key']&&delete this['_index'][_0x1f1ecd]['keys'][_0x9a8a29[this['_key']]],this['_index'][_0x1f1ecd]['list']['length']===0x17fa+0xa05*0x2+0x272*-0x12&&delete this['_index'][_0x1f1ecd]);}['find'](_0x35190b){const _0x480cce={},_0x54a125=[];let _0x36baf3,_0x5f1a80,_0x1554aa,_0x20b7ed,_0x4bc535;const _0x903e6b=(_0x5abb50,_0x579363)=>this['_index'][_0x5abb50]['list']['length']-this['_index'][_0x579363]['list']['length'];for(let _0x271e20=0x6*-0x4a+-0x6a3*0x5+-0x22eb*-0x1;_0x271e20<_0x35190b['length'];_0x271e20++){if(_0x5f1a80=_0x35190b[_0x271e20],_0x5f1a80 instanceof Array){if(_0x5f1a80['length']===-0xc7*-0x22+-0x1c0*-0xb+-0x2dae)continue;if(_0x5f1a80['length']===-0xc9e+-0x1a47+0x1a*0x17f)_0x5f1a80=_0x5f1a80[0x745+0xba8+-0x12ed];else{_0x4bc535=!(-0x1964+-0x1da9+0x2*0x1b87);for(let _0x3aff12=-0x864*0x4+0xad0+0x16c0;_0x3aff12<_0x5f1a80['length'];_0x3aff12++)if(!this['_index'][_0x5f1a80[_0x3aff12]]){_0x4bc535=!(-0x1*-0x80f+0x69a+-0x3*0x4e3);break;}if(_0x4bc535)continue;_0x1554aa=_0x5f1a80['slice'](0x76*-0x10+-0x62*-0x2c+-0x978)['sort'](_0x903e6b),_0x20b7ed=_0x1554aa['slice'](-0x1*0x469+0x2*0x128e+0xf*-0x22e),_0x20b7ed['length']===0x1cb5*0x1+0x1*-0x195e+-0x356&&(_0x20b7ed=_0x20b7ed[0x1049+-0x13dd+0x394*0x1]);for(let _0xc01844=0x24e8+-0xbbf+-0x1929;_0xc01844<this['_index'][_0x1554aa[0x2a+0x17b*-0xd+0x1*0x1315]]['list']['length'];_0xc01844++)_0x36baf3=this['_index'][_0x1554aa[0x1714*-0x1+0x225e+-0x2*0x5a5]]['list'][_0xc01844],(this['_key']?!_0x480cce[_0x36baf3[this['_key']]]:_0x54a125['indexOf'](_0x36baf3)===-(0xeec+0x11f2*0x1+-0x20dd))&&_0x36baf3['tags']['has'](_0x20b7ed)&&(this['_key']&&(_0x480cce[_0x36baf3[this['_key']]]=!(0x21+0x1d1b+-0xe9e*0x2)),_0x54a125['push'](_0x36baf3));continue;}}if(_0x5f1a80&&typeof _0x5f1a80=='string'&&this['_index'][_0x5f1a80]){for(let _0x32e3dd=0x21ea+-0x2e4+-0x1f06;_0x32e3dd<this['_index'][_0x5f1a80]['list']['length'];_0x32e3dd++)_0x36baf3=this['_index'][_0x5f1a80]['list'][_0x32e3dd],this['_key']?_0x480cce[_0x36baf3[this['_key']]]||(_0x480cce[_0x36baf3[this['_key']]]=!(0x14a8+0x1e47+-0x32ef),_0x54a125['push'](_0x36baf3)):_0x54a125['indexOf'](_0x36baf3)===-(0x1d78+0x2359*0x1+0x40d0*-0x1)&&_0x54a125['push'](_0x36baf3);}}return _0x54a125;}}class ln extends me{constructor(_0x3db456){super(),h(this,'_assets',new Set()),h(this,'_loader'),h(this,'_idToAsset',new Map()),h(this,'_urlToAsse'+'t',new Map()),h(this,'_nameToAss'+'et',new Map()),h(this,'_tags',new tC('id')),h(this,'prefix',null),h(this,'bundles',null),this['_loader']=_0x3db456;}['list'](_0x134c90={}){const _0x179e3c=Array['from'](this['_assets']);return _0x134c90['preload']!==void(-0x1e94*0x1+-0x1f10+-0x315*-0x14)?_0x179e3c['filter'](_0x143a51=>_0x143a51['preload']===_0x134c90['preload']):_0x179e3c;}['add'](_0x47424c){var _0x2e8bd9,_0x48cd99;this['_assets']['has'](_0x47424c)||(this['_assets']['add'](_0x47424c),this['_idToAsset']['set'](_0x47424c['id'],_0x47424c),(_0x2e8bd9=_0x47424c['file'])!=null&&_0x2e8bd9['url']&&this['_urlToAsse'+'t']['set'](_0x47424c['file']['url'],_0x47424c),this['_nameToAss'+'et']['has'](_0x47424c['name'])||this['_nameToAss'+'et']['set'](_0x47424c['name'],new Set()),this['_nameToAss'+'et']['get'](_0x47424c['name'])['add'](_0x47424c),_0x47424c['on']('name',this['_onNameCha'+'nge'],this),_0x47424c['registry']=this,this['_tags']['addItem'](_0x47424c),_0x47424c['tags']['on']('add',this['_onTagAdd'],this),_0x47424c['tags']['on']('remove',this['_onTagRemo'+'ve'],this),this['fire']('add',_0x47424c),this['fire']('add:'+_0x47424c['id'],_0x47424c),(_0x48cd99=_0x47424c['file'])!=null&&_0x48cd99['url']&&this['fire']('add:url:'+_0x47424c['file']['url'],_0x47424c),_0x47424c['preload']&&this['load'](_0x47424c));}['remove'](_0x42d787){var _0x3d9495,_0x2e99b7;if(!this['_assets']['has'](_0x42d787))return!(-0x1891+-0x4a*0x62+0x34e6);if(this['_assets']['delete'](_0x42d787),this['_idToAsset']['delete'](_0x42d787['id']),(_0x3d9495=_0x42d787['file'])!=null&&_0x3d9495['url']&&this['_urlToAsse'+'t']['delete'](_0x42d787['file']['url']),_0x42d787['off']('name',this['_onNameCha'+'nge'],this),this['_nameToAss'+'et']['has'](_0x42d787['name'])){const _0x22aed9=this['_nameToAss'+'et']['get'](_0x42d787['name']);_0x22aed9['delete'](_0x42d787),_0x22aed9['size']===0x113*0x14+-0x1*0x26aa+0x112e&&this['_nameToAss'+'et']['delete'](_0x42d787['name']);}return this['_tags']['removeItem'](_0x42d787),_0x42d787['tags']['off']('add',this['_onTagAdd'],this),_0x42d787['tags']['off']('remove',this['_onTagRemo'+'ve'],this),_0x42d787['fire']('remove',_0x42d787),this['fire']('remove',_0x42d787),this['fire']('remove:'+_0x42d787['id'],_0x42d787),(_0x2e99b7=_0x42d787['file'])!=null&&_0x2e99b7['url']&&this['fire']('remove:url'+':'+_0x42d787['file']['url'],_0x42d787),!(0x3*-0x943+-0x1fdb+0x16*0x2b6);}['get'](_0x2b7126){return this['_idToAsset']['get'](Number(_0x2b7126));}['getByUrl'](_0x2476d0){return this['_urlToAsse'+'t']['get'](_0x2476d0);}['load'](_0x3994be,_0x507746){if((_0x3994be['loading']||_0x3994be['loaded'])&&!(_0x507746!=null&&_0x507746['force']))return;const _0x4d2f64=_0x3994be['file'],_0xd65ed7=()=>{this['fire']('load',_0x3994be),this['fire']('load:'+_0x3994be['id'],_0x3994be),_0x4d2f64&&_0x4d2f64['url']&&this['fire']('load:url:'+_0x4d2f64['url'],_0x3994be),_0x3994be['fire']('load',_0x3994be);},_0x3171f2=_0x75bd80=>{if(_0x75bd80 instanceof Array?_0x3994be['resources']=_0x75bd80:_0x3994be['resource']=_0x75bd80,this['_loader']['patch'](_0x3994be,this),_0x3994be['type']==='bundle'){const _0x4c2e59=_0x3994be['data']['assets'];for(let _0x47fac5=0x18ab*-0x1+0x831+0x107a;_0x47fac5<_0x4c2e59['length'];_0x47fac5++){const _0x3011f8=this['_idToAsset']['get'](_0x4c2e59[_0x47fac5]);_0x3011f8&&!_0x3011f8['loaded']&&this['load'](_0x3011f8,{'force':!(-0x2440+-0x5*0x328+0x3408)});}_0x3994be['resource']['loaded']?_0xd65ed7():(this['fire']('load:start',_0x3994be),this['fire']('load:start'+':'+_0x3994be['id'],_0x3994be),_0x4d2f64&&_0x4d2f64['url']&&this['fire']('load:start'+':url:'+_0x4d2f64['url'],_0x3994be),_0x3994be['fire']('load:start',_0x3994be),_0x3994be['resource']['on']('load',_0xd65ed7));}else _0xd65ed7();},_0x142f77=(_0x1cee40,_0x125e26,_0x345a36)=>{if(_0x3994be['loaded']=!(0x17b4+0x1*0x156b+-0x2d1f),_0x3994be['loading']=!(-0x396+-0x1fc6*-0x1+0x1*-0x1c2f),_0x1cee40)this['fire']('error',_0x1cee40,_0x3994be),this['fire']('error:'+_0x3994be['id'],_0x1cee40,_0x3994be),_0x3994be['fire']('error',_0x1cee40,_0x3994be);else{if(_0x3994be['type']==='script'){const _0x4106f5=this['_loader']['getHandler']('script');_0x4106f5['_cache'][_0x3994be['id']]&&_0x4106f5['_cache'][_0x3994be['id']]['parentNode']===document['head']&&document['head']['removeChil'+'d'](_0x4106f5['_cache'][_0x3994be['id']]),_0x4106f5['_cache'][_0x3994be['id']]=_0x345a36;}_0x3171f2(_0x125e26);}};if(_0x4d2f64||_0x3994be['type']==='cubemap'){this['fire']('load:start',_0x3994be),this['fire']('load:'+_0x3994be['id']+':start',_0x3994be),_0x3994be['loading']=!(-0x28*0x4a+-0x1f84+-0x397*-0xc);const _0x29d051=_0x3994be['getFileUrl']();if(_0x3994be['type']==='bundle'){const _0x21d803=_0x3994be['data']['assets'];for(let _0x47385a=0x1b46*0x1+0x18e8+-0x342e;_0x47385a<_0x21d803['length'];_0x47385a++){const _0x150109=this['_idToAsset']['get'](_0x21d803[_0x47385a]);_0x150109&&(_0x150109['loaded']||_0x150109['resource']||_0x150109['loading']||(_0x150109['loading']=!(0x3c*-0x5+-0x14cc+-0x25*-0x98)));}}this['_loader']['load'](_0x29d051,_0x3994be['type'],_0x142f77,_0x3994be,_0x507746);}else{const _0x1b6115=this['_loader']['open'](_0x3994be['type'],_0x3994be['data']);_0x3994be['loaded']=!(0x8e*0x7+-0x53*0x8+-0x14a),_0x3171f2(_0x1b6115);}}['reloadInde'+'x'](_0x569324,_0x5e8d9e,_0x25aed2){const _0x28db30=(_0x1d16e3,_0x5b0952,_0x225b8f)=>{_0x5e8d9e['loaded']=!(-0x22ca+0x23+0x1*0x22a7),_0x5e8d9e['loading']=!(0x10dd+0xd3d*0x2+-0x2b56);};return this['_loader']['load'](_0x569324,_0x5e8d9e['type'],_0x28db30,_0x5e8d9e,_0x25aed2),_0x5e8d9e;}['loadFromUr'+'l'](_0x30ccef,_0x46bd66,_0x373046){this['loadFromUr'+'lAndFilena'+'me'](_0x30ccef,null,_0x46bd66,_0x373046);}['loadFromUr'+'lAndFilena'+'me'](_0x41d751,_0xefd8db,_0xd38c47,_0x17dd9c){const _0x4c54a8=xe['getBasenam'+'e'](_0xefd8db||_0x41d751),_0xf19350={'filename':_0xefd8db||_0x4c54a8,'url':_0x41d751};let _0x4938b4=this['getByUrl'](_0x41d751);if(!_0x4938b4)_0x4938b4=new pe(_0x4c54a8,_0xd38c47,_0xf19350),this['add'](_0x4938b4);else{if(_0x4938b4['loaded']){_0x17dd9c(_0x4938b4['loadFromUr'+'lError']||null,_0x4938b4);return;}}const _0x159751=_0x57d68b=>{_0x57d68b['once']('load',_0x41937b=>{_0xd38c47==='material'?this['_loadTextu'+'res'](_0x41937b,(_0x28aefc,_0x1c4247)=>{_0x17dd9c(_0x28aefc,_0x41937b);}):_0x17dd9c(null,_0x41937b);}),_0x57d68b['once']('error',_0x35b409=>{_0x35b409&&(this['loadFromUr'+'lError']=_0x35b409),_0x17dd9c(_0x35b409,_0x57d68b);}),this['load'](_0x57d68b);};_0x4938b4['resource']?_0x17dd9c(null,_0x4938b4):_0xd38c47==='model'?this['_loadModel'](_0x4938b4,_0x159751):_0x159751(_0x4938b4);}['_loadModel'](_0x27aa9d,_0x41f684){const _0x5ac33a=_0x27aa9d['getFileUrl'](),_0x3f4177=xe['getExtensi'+'on'](_0x5ac33a);if(_0x3f4177==='.json'||_0x3f4177==='.glb'){const _0xae264f=xe['getDirecto'+'ry'](_0x5ac33a),_0x2d451d=xe['getBasenam'+'e'](_0x5ac33a),_0x1e89b5=xe['join'](_0xae264f,_0x2d451d['replace'](_0x3f4177,'.mapping.j'+'son'));this['_loader']['load'](_0x1e89b5,'json',(_0x4bb4b8,_0x501ea2)=>{_0x4bb4b8?(_0x27aa9d['data']={'mapping':[]},_0x41f684(_0x27aa9d)):this['_loadMater'+'ials'](_0x27aa9d,_0x501ea2,(_0x3ef596,_0x12427b)=>{_0x27aa9d['data']=_0x501ea2,_0x41f684(_0x27aa9d);});});}else _0x41f684(_0x27aa9d);}['_loadMater'+'ials'](_0x4ecbd1,_0x39a43a,_0x592c27){const _0x11d22d=[];let _0x53f76d=0x12f9+0x1713+-0x2e*0xea;const _0x1c6668=(_0x4d9350,_0xc95439)=>{this['_loadTextu'+'res'](_0xc95439,(_0x470b6b,_0x2d09ff)=>{_0x11d22d['push'](_0xc95439),_0x11d22d['length']===_0x53f76d&&_0x592c27(null,_0x11d22d);});};for(let _0x4be910=-0x2414+0x391*-0x1+0x3*0xd37;_0x4be910<_0x39a43a['mapping']['length'];_0x4be910++){const _0x2130b0=_0x39a43a['mapping'][_0x4be910]['path'];if(_0x2130b0){_0x53f76d++;const _0x56c710=_0x4ecbd1['getAbsolut'+'eUrl'](_0x2130b0);this['loadFromUr'+'l'](_0x56c710,'material',_0x1c6668);}}_0x53f76d===0x1da5+0x23a+0x1*-0x1fdf&&_0x592c27(null,_0x11d22d);}['_loadTextu'+'res'](_0x9ce73d,_0x4ee71a){const _0x3b0dab=[];let _0x4adc3a=0x1*-0x413+-0x17*-0x35+-0xb0;const _0x43b55a=_0x9ce73d['data'];if(_0x43b55a['mappingFor'+'mat']!=='path'){w['warn']('Skipping:\x20'+_0x9ce73d['name']+(',\x20material'+'\x20files\x20mus'+'t\x20be\x20mappi'+'ngFormat:\x20'+'\x22path\x22\x20to\x20'+'be\x20loaded\x20'+'from\x20URL')),_0x4ee71a(null,_0x3b0dab);return;}const _0x343a71=(_0x3c60ec,_0x31b420)=>{_0x3c60ec&&console['error'](_0x3c60ec),_0x3b0dab['push'](_0x31b420),_0x3b0dab['length']===_0x4adc3a&&_0x4ee71a(null,_0x3b0dab);},_0x414047=ad;for(let _0x1c5b42=-0x51a*-0x5+0x5*0x17f+0x20fd*-0x1;_0x1c5b42<_0x414047['length'];_0x1c5b42++){const _0x327335=_0x43b55a[_0x414047[_0x1c5b42]];if(_0x327335&&typeof _0x327335=='string'){_0x4adc3a++;const _0x5a3d49=_0x9ce73d['getAbsolut'+'eUrl'](_0x327335);this['loadFromUr'+'l'](_0x5a3d49,'texture',_0x343a71);}}_0x4adc3a===-0x1*0x24fd+-0x7fc+-0x1*-0x2cf9&&_0x4ee71a(null,_0x3b0dab);}['_onTagAdd'](_0x25a4ff,_0x435451){this['_tags']['add'](_0x25a4ff,_0x435451);}['_onTagRemo'+'ve'](_0xa99c5e,_0x2053c4){this['_tags']['remove'](_0xa99c5e,_0x2053c4);}['_onNameCha'+'nge'](_0xe2df7d,_0x4c5a4c,_0x18f65b){if(this['_nameToAss'+'et']['has'](_0x18f65b)){const _0x200c0b=this['_nameToAss'+'et']['get'](_0x18f65b);_0x200c0b['delete'](_0xe2df7d),_0x200c0b['size']===-0x1*-0x117f+0x2706+-0x3885&&this['_nameToAss'+'et']['delete'](_0x18f65b);}this['_nameToAss'+'et']['has'](_0xe2df7d['name'])||this['_nameToAss'+'et']['set'](_0xe2df7d['name'],new Set()),this['_nameToAss'+'et']['get'](_0xe2df7d['name'])['add'](_0xe2df7d);}['findByTag'](..._0x19abd6){return this['_tags']['find'](_0x19abd6);}['filter'](_0x251efc){return Array['from'](this['_assets'])['filter'](_0xeb667d=>_0x251efc(_0xeb667d));}['find'](_0x35c2b8,_0x2bc5cf){const _0x128622=this['_nameToAss'+'et']['get'](_0x35c2b8);if(!_0x128622)return null;for(const _0xd97e19 of _0x128622)if(!_0x2bc5cf||_0xd97e19['type']===_0x2bc5cf)return _0xd97e19;return null;}['findAll'](_0x57311b,_0x3fc730){const _0x4d8832=this['_nameToAss'+'et']['get'](_0x57311b);if(!_0x4d8832)return[];const _0x520236=Array['from'](_0x4d8832);return _0x3fc730?_0x520236['filter'](_0xf9c2ed=>_0xf9c2ed['type']===_0x3fc730):_0x520236;}}h(ln,'EVENT_LOAD','load'),h(ln,'EVENT_ADD','add'),h(ln,'EVENT_REMO'+'VE','remove'),h(ln,'EVENT_ERRO'+'R','error');class sC{constructor(_0x2b92cb){h(this,'_idToBundl'+'e',new Map()),h(this,'_assetToBu'+'ndles',new Map()),h(this,'_urlsToBun'+'dles',new Map()),h(this,'_fileReque'+'sts',new Map()),(this['_assets']=_0x2b92cb,this['_assets']['bundles']=this,this['_assets']['on']('add',this['_onAssetAd'+'d'],this),this['_assets']['on']('remove',this['_onAssetRe'+'move'],this));}['_onAssetAd'+'d'](_0xe137ab){if(_0xe137ab['type']==='bundle'){this['_idToBundl'+'e']['set'](_0xe137ab['id'],_0xe137ab),this['_assets']['on']('load:start'+':'+_0xe137ab['id'],this['_onBundleL'+'oadStart'],this),this['_assets']['on']('load:'+_0xe137ab['id'],this['_onBundleL'+'oad'],this),this['_assets']['on']('error:'+_0xe137ab['id'],this['_onBundleE'+'rror'],this);const _0x241bc8=_0xe137ab['data']['assets'];for(let _0x92c155=0xa*0x4f+-0xa59+-0x8f*-0xd;_0x92c155<_0x241bc8['length'];_0x92c155++)this['_indexAsse'+'tInBundle'](_0x241bc8[_0x92c155],_0xe137ab);}else this['_assetToBu'+'ndles']['has'](_0xe137ab['id'])&&this['_indexAsse'+'tFileUrls'](_0xe137ab);}['_unbindAss'+'etEvents'](_0x22c1a8){this['_assets']['off']('load:start'+':'+_0x22c1a8,this['_onBundleL'+'oadStart'],this),this['_assets']['off']('load:'+_0x22c1a8,this['_onBundleL'+'oad'],this),this['_assets']['off']('error:'+_0x22c1a8,this['_onBundleE'+'rror'],this);}['_indexAsse'+'tInBundle'](_0x786d4e,_0x33f54c){let _0x32df91=this['_assetToBu'+'ndles']['get'](_0x786d4e);_0x32df91||(_0x32df91=new Set(),this['_assetToBu'+'ndles']['set'](_0x786d4e,_0x32df91)),_0x32df91['add'](_0x33f54c);const _0x1dc8a8=this['_assets']['get'](_0x786d4e);_0x1dc8a8&&this['_indexAsse'+'tFileUrls'](_0x1dc8a8);}['_indexAsse'+'tFileUrls'](_0x4b1344){const _0x40ebcd=this['_getAssetF'+'ileUrls'](_0x4b1344);if(_0x40ebcd)for(let _0x28bf3e=0xac8+0x1f0f+-0x29d7;_0x28bf3e<_0x40ebcd['length'];_0x28bf3e++){const _0x2dc00c=this['_assetToBu'+'ndles']['get'](_0x4b1344['id']);_0x2dc00c&&this['_urlsToBun'+'dles']['set'](_0x40ebcd[_0x28bf3e],_0x2dc00c);}}['_getAssetF'+'ileUrls'](_0x4c17e2){let _0x49c939=_0x4c17e2['getFileUrl']();if(!_0x49c939)return null;_0x49c939=_0x49c939['split']('?')[-0x244a+0x447*-0x3+0x311f];const _0x27bd33=[_0x49c939];if(_0x4c17e2['type']==='font'){const _0x4d2547=_0x4c17e2['data']['info']['maps']['length'];for(let _0x4db880=0xb*0x89+0xc60+-0x1*0x1242;_0x4db880<_0x4d2547;_0x4db880++)_0x27bd33['push'](_0x49c939['replace']('.png',_0x4db880+'.png'));}return _0x27bd33;}['_onAssetRe'+'move'](_0x5f5277){if(_0x5f5277['type']==='bundle'){this['_idToBundl'+'e']['delete'](_0x5f5277['id']),this['_unbindAss'+'etEvents'](_0x5f5277['id']);const _0x2169bd=_0x5f5277['data']['assets'];for(let _0x4333fe=-0x252c+-0x19fc+0x3f28;_0x4333fe<_0x2169bd['length'];_0x4333fe++){const _0x147133=this['_assetToBu'+'ndles']['get'](_0x2169bd[_0x4333fe]);if(_0x147133&&(_0x147133['delete'](_0x5f5277),_0x147133['size']===0x1*-0x20f+0x11fc*-0x2+0x3*0xcad)){this['_assetToBu'+'ndles']['delete'](_0x2169bd[_0x4333fe]);for(const [_0x4d3d85,_0x14e85f]of this['_urlsToBun'+'dles'])_0x14e85f===_0x147133&&this['_urlsToBun'+'dles']['delete'](_0x4d3d85);}}this['_onBundleE'+'rror']('Bundle\x20'+_0x5f5277['id']+('\x20was\x20remov'+'ed'));}else{if(!this['_assetToBu'+'ndles']['get'](_0x5f5277['id']))return;this['_assetToBu'+'ndles']['delete'](_0x5f5277['id']);const _0x4349c6=this['_getAssetF'+'ileUrls'](_0x5f5277);if(!_0x4349c6)return;for(let _0x296afa=0x6a*0x1f+0x1b*0x4a+-0x1*0x14a4;_0x296afa<_0x4349c6['length'];_0x296afa++)this['_urlsToBun'+'dles']['delete'](_0x4349c6[_0x296afa]);}}['_onBundleL'+'oadStart'](_0x56b093){_0x56b093['resource']['on']('add',(_0x22e2b4,_0x504984)=>{const _0x38187b=this['_fileReque'+'sts']['get'](_0x22e2b4);if(_0x38187b){for(let _0x124481=-0x4c8+0x1d04+-0x183c;_0x124481<_0x38187b['length'];_0x124481++)_0x38187b[_0x124481](null,_0x504984);this['_fileReque'+'sts']['delete'](_0x22e2b4);}});}['_onBundleL'+'oad'](_0x2edbc4){if(!_0x2edbc4['resource']){this['_onBundleE'+'rror']('Bundle\x20'+_0x2edbc4['id']+('\x20failed\x20to'+'\x20load'));return;}if(this['_fileReque'+'sts'])for(const [_0x9c9a12,_0x8853e]of this['_fileReque'+'sts']){const _0x4f279a=this['_urlsToBun'+'dles']['get'](_0x9c9a12);if(!_0x4f279a||!_0x4f279a['has'](_0x2edbc4))continue;const _0x56a1de=decodeURIComponent(_0x9c9a12);let _0x2f8ce8,_0x59db54;if(_0x2edbc4['resource']['has'](_0x56a1de))_0x59db54=_0x2edbc4['resource']['get'](_0x56a1de);else{if(_0x2edbc4['resource']['loaded'])_0x2f8ce8='Bundle\x20'+_0x2edbc4['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x9c9a12;else continue;}for(let _0x322820=-0x1*0x295+0x7*-0x586+-0x1*-0x293f;_0x322820<_0x8853e['length'];_0x322820++)_0x8853e[_0x322820](_0x2f8ce8,_0x2f8ce8||_0x59db54);this['_fileReque'+'sts']['delete'](_0x9c9a12);}}['_onBundleE'+'rror'](_0x5aa378){for(const [_0xc5d176,_0x20b1a3]of this['_fileReque'+'sts'])if(!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0xc5d176)){for(let _0x35dde1=-0xe5a+0x1d00+-0x96*0x19;_0x35dde1<_0x20b1a3['length'];_0x35dde1++)_0x20b1a3[_0x35dde1](_0x5aa378);this['_fileReque'+'sts']['delete'](_0xc5d176);}}['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x2d62d7){const _0x1007bb=this['_urlsToBun'+'dles']['get'](_0x2d62d7);if(!_0x1007bb)return null;let _0x25edfc=null;for(const _0x5a63b8 of _0x1007bb){if(_0x5a63b8['loaded']&&_0x5a63b8['resource'])return _0x5a63b8;_0x5a63b8['loading']&&(_0x25edfc=_0x5a63b8);}return _0x25edfc;}['listBundle'+'sForAsset'](_0x562219){const _0x3865f8=this['_assetToBu'+'ndles']['get'](_0x562219['id']);return _0x3865f8?Array['from'](_0x3865f8):null;}['list'](){return Array['from'](this['_idToBundl'+'e']['values']());}['hasUrl'](_0x2b355a){return this['_urlsToBun'+'dles']['has'](_0x2b355a);}['urlIsLoade'+'dOrLoading'](_0x2d9b9f){return!!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x2d9b9f);}['loadUrl'](_0x14668f,_0x54ab39){const _0x123b2b=this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x14668f);if(!_0x123b2b){_0x54ab39('URL\x20'+_0x14668f+('\x20not\x20found'+'\x20in\x20any\x20bu'+'ndles'));return;}if(_0x123b2b['loaded']){const _0x151a82=decodeURIComponent(_0x14668f);if(_0x123b2b['resource']['has'](_0x151a82)){_0x54ab39(null,_0x123b2b['resource']['get'](_0x151a82));return;}else{if(_0x123b2b['resource']['loaded']){_0x54ab39('Bundle\x20'+_0x123b2b['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x14668f);return;}}}let _0x421cf2=this['_fileReque'+'sts']['get'](_0x14668f);_0x421cf2||(_0x421cf2=[],this['_fileReque'+'sts']['set'](_0x14668f,_0x421cf2)),_0x421cf2['push'](_0x54ab39);}['destroy'](){this['_assets']['off']('add',this['_onAssetAd'+'d'],this),this['_assets']['off']('remove',this['_onAssetRe'+'move'],this);for(const _0x5eecdb of this['_idToBundl'+'e']['keys']())this['_unbindAss'+'etEvents'](_0x5eecdb);this['_assets']=null,this['_idToBundl'+'e']['clear'](),this['_idToBundl'+'e']=null,this['_assetToBu'+'ndles']['clear'](),this['_assetToBu'+'ndles']=null,this['_urlsToBun'+'dles']['clear'](),this['_urlsToBun'+'dles']=null,this['_fileReque'+'sts']['clear'](),this['_fileReque'+'sts']=null;}}class iC extends me{constructor(){super(),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'joint'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'zone'),this['list']=[];}['add'](_0x5d1195){const _0x558991=_0x5d1195['id'];if(this[_0x558991])throw new Error('ComponentS'+'ystem\x20name'+'\x20\x27'+_0x558991+('\x27\x20already\x20'+'registered'+'\x20or\x20not\x20al'+'lowed'));this[_0x558991]=_0x5d1195,this['list']['push'](_0x5d1195);}['remove'](_0x1bae26){const _0x27c96b=_0x1bae26['id'];if(!this[_0x27c96b])throw new Error('No\x20Compone'+'ntSystem\x20n'+'amed\x20\x27'+_0x27c96b+('\x27\x20register'+'ed'));delete this[_0x27c96b];const _0x51a3f9=this['list']['indexOf'](this[_0x27c96b]);_0x51a3f9!==-(-0x1*0xcb5+-0x630+0x29*0x76)&&this['list']['splice'](_0x51a3f9,-0x170d+0xab+0x1663);}['destroy'](){this['off']();for(let _0x35a3df=0x16c2+0x72+-0x21c*0xb;_0x35a3df<this['list']['length'];_0x35a3df++)this['list'][_0x35a3df]['destroy']();}}class $f extends me{constructor(){super(...arguments),h(this,'_index',new Map()),h(this,'_loaded',!(-0x2*-0xf35+-0x1638+-0x831));}['addFile'](_0x2a0d8d,_0x368481){this['_index']['has'](_0x2a0d8d)||(this['_index']['set'](_0x2a0d8d,_0x368481),this['fire']('add',_0x2a0d8d,_0x368481));}['has'](_0xc2323b){return this['_index']['has'](_0xc2323b);}['get'](_0x3aaed6){return this['_index']['get'](_0x3aaed6)||null;}['destroy'](){this['_index']['clear']();}set['loaded'](_0x7895e9){!_0x7895e9||this['_loaded']||(this['_loaded']=!(-0x1d16+-0x25b0+-0x42c6*-0x1),this['fire']('load'));}get['loaded'](){return this['_loaded'];}}h($f,'EVENT_ADD','add'),h($f,'EVENT_LOAD','load');class rC extends me{constructor(_0x3cb3c5,_0x8e2339=''){super(),h(this,'headerSize',0x1f5a+-0x1*-0x70b+-0x2465),h(this,'paddingSiz'+'e',-0x2aa*-0x5+0x11*0x5a+0x6*-0x2e2),h(this,'bytesRead',-0x20b*-0x11+-0x5c9+-0x1cf2),h(this,'bytesRecei'+'ved',0x11a3+0x1*-0x1764+0x5c1),h(this,'headerRead',!(-0xdc1+0x6b*0x3a+0xa7c*-0x1)),h(this,'reader',null),h(this,'data',new Uint8Array(-0x230b+-0x1*0x1ea9+0x41b4)),h(this,'decoder',null),h(this,'prefix',''),h(this,'fileName',''),h(this,'fileSize',-0x8b*0x6+0x10*-0x1e7+0x21b2),h(this,'fileType',''),h(this,'ustarForma'+'t',''),(this['prefix']=_0x8e2339||'',this['reader']=_0x3cb3c5['body']['getReader'](),this['reader']['read']()['then'](_0x2f7ecd=>{this['pump'](_0x2f7ecd['done'],_0x2f7ecd['value']);})['catch'](_0x45bb60=>{this['fire']('error',_0x45bb60);}));}['pump'](_0x259017,_0x1385f3){if(_0x259017)return this['fire']('done'),null;this['bytesRecei'+'ved']+=_0x1385f3['byteLength'];const _0x582b1e=new Uint8Array(this['data']['length']+_0x1385f3['length']);for(_0x582b1e['set'](this['data']),_0x582b1e['set'](_0x1385f3,this['data']['length']),this['data']=_0x582b1e;this['readFile'](););return this['reader']['read']()['then'](_0x38231b=>{this['pump'](_0x38231b['done'],_0x38231b['value']);})['catch'](_0xee01b1=>{this['fire']('error',_0xee01b1);});}['readFile'](){if(!this['headerRead']&&this['bytesRecei'+'ved']>this['bytesRead']+this['headerSize']){this['headerRead']=!(-0x202e+-0x1656+0x3684);const _0x41bdd5=new DataView(this['data']['buffer'],this['bytesRead'],this['headerSize']);this['decoder']??(this['decoder']=new TextDecoder('windows-12'+'52'));const _0x260e71=this['decoder']['decode'](_0x41bdd5);if(this['fileName']=_0x260e71['substring'](0x1*0x23c5+0x1abe+-0x3e83,0x12*0x15d+0x6ad*-0x4+0x28e)['replace'](/\0/g,''),this['fileSize']=parseInt(_0x260e71['substring'](-0x21a4+-0xe89*0x1+-0x30a9*-0x1,-0xa0+0x225f+-0x2137),0x1*-0x1093+-0xcbf*-0x1+0x34*0x13),this['fileType']=_0x260e71['substring'](0x1fd5+-0xc*0xb3+-0x16d5,0x13*0x1a9+0x14*0x3a+-0x2376),this['ustarForma'+'t']=_0x260e71['substring'](0x7bf+0x71*-0x52+-0x14*-0x179,0x19dc+-0x11*-0x137+-0x11c*0x29),this['ustarForma'+'t']['indexOf']('ustar')!==-(0x5d8*-0x2+0x25a+-0x957*-0x1)){const _0x25541a=_0x260e71['substring'](-0x162+-0x2*-0xbc5+-0x14cf,0x45*0x7a+-0x9d7+-0x1517)['replace'](/\0/g,'');_0x25541a['length']>-0x2055+-0x83e+-0x2893*-0x1&&(this['fileName']=_0x25541a['trim']()+this['fileName']['trim']());}this['bytesRead']+=-0x54*0x70+-0x5e0+0x2ca*0x10;}if(this['headerRead']){if(this['bytesRecei'+'ved']<this['bytesRead']+this['fileSize'])return!(0x4*-0xa7+0xb*-0x2ab+0x1ff6);if(this['fileType']===''||this['fileType']==='0'){const _0x3c6b5e=new DataView(this['data']['buffer'],this['bytesRead'],this['fileSize']),_0x22a477={'name':this['prefix']+this['fileName'],'size':this['fileSize'],'data':_0x3c6b5e};this['fire']('file',_0x22a477);}this['bytesRead']+=this['fileSize'],this['headerRead']=!(0x38d+0x2193+-0x251f);const _0x5c6d76=this['bytesRead']%this['paddingSiz'+'e'];return _0x5c6d76!==-0x1ef2+0xb*-0x306+0x4034&&(this['bytesRead']+=this['paddingSiz'+'e']-_0x5c6d76),!(0x2*0xa6b+0x1d*-0x144+0xfde);}return!(-0x1f8b+0x2*-0x5b3+0x2af2);}}class Qe{constructor(_0x4fba0e,_0x252d9d){h(this,'handlerTyp'+'e',''),h(this,'_app'),h(this,'_maxRetrie'+'s',0x1bf8+-0x730*0x5+-0x11*-0x78),(this['_app']=_0x4fba0e,this['handlerTyp'+'e']=_0x252d9d);}set['maxRetries'](_0x4cf621){this['_maxRetrie'+'s']=_0x4cf621;}get['maxRetries'](){return this['_maxRetrie'+'s'];}['load'](_0x11ffa1,_0x2bf28f,_0x31ad49){}['open'](_0x214fdf,_0x53a226,_0x29d4c7){return _0x53a226;}['patch'](_0x53b6bc,_0x337f47){}}class aC extends Qe{constructor(_0x58cd96){super(_0x58cd96,'bundle'),this['_assets']=_0x58cd96['assets'];}['_fetchRetr'+'ies'](_0xce4170,_0x227dd2,_0x270e69=-0x8e0*0x3+0x2004*0x1+-0x564){return new Promise((_0x24955a,_0x21fae6)=>{const _0x536916=()=>{fetch(_0xce4170,_0x227dd2)['then'](_0x24955a)['catch'](_0x1a757c=>{_0x270e69++,_0x270e69<this['maxRetries']?(w['error']('Bundle\x20fai'+'led\x20to\x20loa'+'d\x20retrying'+'\x20(attempt\x20'+_0x270e69),_0x536916()):_0x21fae6(_0x1a757c);});};_0x536916();});}['load'](_0x223558,_0x954f38){typeof _0x223558=='string'&&(_0x223558={'load':_0x223558,'original':_0x223558}),this['_fetchRetr'+'ies'](_0x223558['load'],{'mode':'cors'},this['maxRetries'])['then'](_0x420d58=>{const _0x558583=new $f();_0x954f38(null,_0x558583);const _0x4aff1e=new rC(_0x420d58,this['_assets']['prefix']);_0x4aff1e['on']('file',_0x3df71d=>{_0x558583['addFile'](_0x3df71d['name'],_0x3df71d['data']);}),_0x4aff1e['on']('done',()=>{_0x558583['loaded']=!(0x8cf+0x730+-0xfff);}),_0x4aff1e['on']('error',_0x4c34e7=>{w['error'](_0x4c34e7),_0x954f38(_0x4c34e7);});})['catch'](_0x384e0c=>{w['error'](_0x384e0c),_0x954f38(_0x384e0c);});}['open'](_0x54c945,_0x2824cd){return _0x2824cd;}}class vn{constructor(_0x10ef74){this['_handlers']={},this['_requests']={},this['_cache']={},this['_app']=_0x10ef74;}['addHandler'](_0x45984b,_0x4677ad){this['_handlers'][_0x45984b]=_0x4677ad,_0x4677ad['_loader']=this;}['removeHand'+'ler'](_0x1d0e9f){delete this['_handlers'][_0x1d0e9f];}['getHandler'](_0x5b023a){return this['_handlers'][_0x5b023a];}static['makeKey'](_0x4a7ec0,_0x25a515){return _0x4a7ec0+'-'+_0x25a515;}['load'](_0x2eab7e,_0x22cc90,_0x21f572,_0x428ccd,_0xac6ba0){var _0x23c4bf;const _0x15dbc7=this['_handlers'][_0x22cc90];if(!_0x15dbc7){const _0x4ba343='No\x20resourc'+'e\x20handler\x20'+'for\x20asset\x20'+'type:\x20\x27'+_0x22cc90+('\x27\x20when\x20loa'+'ding\x20[')+_0x2eab7e+']';w['errorOnce'](_0x4ba343),_0x21f572(_0x4ba343);return;}if(!_0x2eab7e){this['_loadNull'](_0x15dbc7,_0x21f572,_0x428ccd);return;}const _0x1aa3fa=vn['makeKey'](_0x2eab7e,_0x22cc90);if(this['_requests'][_0x1aa3fa])this['_requests'][_0x1aa3fa]['push'](_0x21f572);else{this['_requests'][_0x1aa3fa]=[_0x21f572];const _0x246cd7=this,_0x15d95d=function(_0x2658d2,_0x3458ed){if(_0x2658d2){_0x246cd7['_onFailure'](_0x1aa3fa,_0x2658d2);return;}if(_0x3458ed['load']instanceof DataView){if(_0x15dbc7['openBinary']){if(!_0x246cd7['_requests'][_0x1aa3fa])return;try{const _0x14dd3e=_0x15dbc7['openBinary'](_0x3458ed['load']);_0x246cd7['_onSuccess'](_0x1aa3fa,_0x14dd3e);}catch(_0x20a8be){_0x246cd7['_onFailure'](_0x1aa3fa,_0x20a8be);}return;}_0x3458ed['load']=URL['createObje'+'ctURL'](new Blob([_0x3458ed['load']])),_0x428ccd&&(_0x428ccd['urlObject']&&URL['revokeObje'+'ctURL'](_0x428ccd['urlObject']),_0x428ccd['urlObject']=_0x3458ed['load']);}_0x15dbc7['load'](_0x3458ed,(_0xdb7943,_0x1bf1a2,_0x3493ef)=>{if(_0x246cd7['_requests'][_0x1aa3fa]){if(_0xdb7943){_0x246cd7['_onFailure'](_0x1aa3fa,_0xdb7943);return;}try{_0x246cd7['_onSuccess'](_0x1aa3fa,_0x15dbc7['open'](_0x3458ed['original'],_0x1bf1a2,_0x428ccd),_0x3493ef);}catch(_0x5285a8){_0x246cd7['_onFailure'](_0x1aa3fa,_0x5285a8);}}},_0x428ccd);},_0x5655f9=_0x2eab7e['split']('?')[-0x89+0x17*-0xf1+0x1630];if(this['_app']['enableBund'+'les']&&this['_app']['bundles']['hasUrl'](_0x5655f9)&&!(_0xac6ba0&&_0xac6ba0['bundlesIgn'+'ore'])){if(!this['_app']['bundles']['urlIsLoade'+'dOrLoading'](_0x5655f9)){const _0x41ea26=this['_app']['bundles']['listBundle'+'sForAsset'](_0x428ccd);let _0x4525bc;_0xac6ba0&&_0xac6ba0['bundlesFil'+'ter']&&(_0x4525bc=_0xac6ba0['bundlesFil'+'ter'](_0x41ea26)),_0x4525bc||(_0x41ea26==null||_0x41ea26['sort']((_0x3e410b,_0x298758)=>_0x3e410b['file']['size']-_0x298758['file']['size']),_0x4525bc=_0x41ea26==null?void(0x12ab+0xc50+-0x1efb):_0x41ea26[-0xb7c+0x5e*-0x49+-0xd*-0x2f2]),_0x4525bc&&((_0x23c4bf=this['_app']['assets'])==null||_0x23c4bf['load'](_0x4525bc));}this['_app']['bundles']['loadUrl'](_0x5655f9,(_0x5dd1c7,_0x236a5e)=>{_0x15d95d(_0x5dd1c7,{'load':_0x236a5e,'original':_0x5655f9});});}else _0x15d95d(null,{'load':_0x2eab7e,'original':_0x428ccd&&_0x428ccd['file']['filename']||_0x2eab7e});}}['_loadNull'](_0x210de9,_0x1ba3d2,_0x4f94f1){const _0x296eea=function(_0x2a47bc,_0x43885f,_0x386071){if(_0x2a47bc)_0x1ba3d2(_0x2a47bc);else try{_0x1ba3d2(null,_0x210de9['open'](null,_0x43885f,_0x4f94f1),_0x386071);}catch(_0x640e5){_0x1ba3d2(_0x640e5);}};_0x210de9['load'](null,_0x296eea,_0x4f94f1);}['_onSuccess'](_0x58d208,_0x4f370e,_0x6d575f){for(let _0x43ec5a=0x14b3*0x1+-0x14f1+-0x2*-0x1f;_0x43ec5a<this['_requests'][_0x58d208]['length'];_0x43ec5a++)this['_requests'][_0x58d208][_0x43ec5a](null,_0x4f370e,_0x6d575f);delete this['_requests'][_0x58d208];}['_onFailure'](_0x45fb1f,_0x3426e4){if(console['error'](_0x3426e4),this['_requests'][_0x45fb1f]){for(let _0x188093=-0x6e6*0x2+-0xe02+0x1bce;_0x188093<this['_requests'][_0x45fb1f]['length'];_0x188093++)this['_requests'][_0x45fb1f][_0x188093](_0x3426e4);delete this['_requests'][_0x45fb1f];}}['open'](_0x3fe38c,_0x41207e){const _0x37fb48=this['_handlers'][_0x3fe38c];return _0x37fb48?_0x37fb48['open'](null,_0x41207e):(console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x3fe38c),_0x41207e);}['patch'](_0x4c1549,_0x1a8888){const _0x56cb86=this['_handlers'][_0x4c1549['type']];if(!_0x56cb86){console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x4c1549['type']);return;}_0x56cb86['patch']&&_0x56cb86['patch'](_0x4c1549,_0x1a8888);}['clearCache'](_0x5f262c,_0x3b1f31){const _0x5031f1=vn['makeKey'](_0x5f262c,_0x3b1f31);delete this['_cache'][_0x5031f1];}['getFromCac'+'he'](_0x50d567,_0x1d8c03){const _0x4d679a=vn['makeKey'](_0x50d567,_0x1d8c03);if(this['_cache'][_0x4d679a])return this['_cache'][_0x4d679a];}['enableRetr'+'y'](_0xf9c4a2=0x212+0x184+0x1*-0x391){_0xf9c4a2=Math['max'](-0x85b+0x1733+-0xed8,_0xf9c4a2)||-0xc41*0x2+0x1225+-0x1*-0x65d;for(const _0x5995f3 in this['_handlers'])this['_handlers'][_0x5995f3]['maxRetries']=_0xf9c4a2;}['disableRet'+'ry'](){for(const _0x93c0b7 in this['_handlers'])this['_handlers'][_0x93c0b7]['maxRetries']=0x193b+-0x1b3f+0x204;}['destroyReq'+'uests'](){this['_requests']={};}['destroy'](){this['_handlers']={},this['_requests']={},this['_cache']={};}}class nC{['_validate'](_0x12ff8d){if(!_0x12ff8d['header'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er\x22\x20field');if(!_0x12ff8d['header']['version'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er.version'+'\x22\x20field');if(_0x12ff8d['header']['version']!==-0x9d6*-0x2+0x44a+-0x17f5)throw new Error('pc.I18n#ad'+'dData:\x20Inv'+'alid\x20\x22head'+'er.version'+'\x22\x20field');if(_0x12ff8d['data']){if(!Array['isArray'](_0x12ff8d['data']))throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta\x22\x20field\x20'+'must\x20be\x20an'+'\x20array');}else throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22data'+'\x22\x20field');for(let _0xcc0d49=0x24c4+-0x62d*0x1+-0x1e97,_0x33a30c=_0x12ff8d['data']['length'];_0xcc0d49<_0x33a30c;_0xcc0d49++){const _0x919a48=_0x12ff8d['data'][_0xcc0d49];if(!_0x919a48['info'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0xcc0d49+('].info\x22\x20fi'+'eld'));if(!_0x919a48['info']['locale'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0xcc0d49+('].info.loc'+'ale\x22\x20field'));if(typeof _0x919a48['info']['locale']!='string')throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta['+_0xcc0d49+('].info.loc'+'ale\x22\x20must\x20'+'be\x20a\x20strin'+'g'));if(!_0x919a48['messages'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0xcc0d49+('].messages'+'\x22\x20field'));}}['parse'](_0x3e0a7f){return this['_validate'](_0x3e0a7f),_0x3e0a7f['data'];}}const vh=class vh extends me{constructor(_0x26278d){super(),this['locale']=nh,this['_translati'+'ons']={},this['_available'+'Langs']={},this['_app']=_0x26278d,this['_assets']=[],this['_parser']=new nC();}set['assets'](_0x5153e0){const _0x25132c={};for(let _0x477735=-0x2*-0x432+0xdb2+-0x1*0x1616,_0x2d0bea=_0x5153e0['length'];_0x477735<_0x2d0bea;_0x477735++){const _0x25bc13=_0x5153e0[_0x477735]instanceof pe?_0x5153e0[_0x477735]['id']:_0x5153e0[_0x477735];_0x25132c[_0x25bc13]=!(-0x13bb+0x2*-0xfb9+-0x1*-0x332d);}let _0x233f96=this['_assets']['length'];for(;_0x233f96--;){const _0xf414a3=this['_assets'][_0x233f96];if(!_0x25132c[_0xf414a3]){this['_app']['assets']['off']('add:'+_0xf414a3,this['_onAssetAd'+'d'],this);const _0x1ff4b6=this['_app']['assets']['get'](_0xf414a3);_0x1ff4b6&&this['_onAssetRe'+'move'](_0x1ff4b6),this['_assets']['splice'](_0x233f96,0x2121+-0x1*0x5d7+0xb*-0x27b);}}for(const _0x5c1c68 in _0x25132c){const _0x2f0370=parseInt(_0x5c1c68,0x1*-0x17b+0x243a*-0x1+0x25bf);if(this['_assets']['indexOf'](_0x2f0370)!==-(0xe40+-0x216+-0xc29))continue;this['_assets']['push'](_0x2f0370);const _0x2b1575=this['_app']['assets']['get'](_0x2f0370);_0x2b1575?this['_onAssetAd'+'d'](_0x2b1575):this['_app']['assets']['once']('add:'+_0x2f0370,this['_onAssetAd'+'d'],this);}}get['assets'](){return this['_assets'];}set['locale'](_0x5b5b79){if(this['_locale']===_0x5b5b79)return;let _0x565508=Ri(_0x5b5b79);if(_0x565508==='in'&&(_0x565508='id',_0x5b5b79=KA(_0x5b5b79,_0x565508),this['_locale']===_0x5b5b79))return;const _0x23db05=this['_locale'];this['_locale']=_0x5b5b79,this['_lang']=_0x565508,this['_pluralFn']=Jd(this['_lang']),this['fire'](vh['EVENT_CHAN'+'GE'],_0x5b5b79,_0x23db05);}get['locale'](){return this['_locale'];}static['findAvaila'+'bleLocale'](_0x502198,_0x399884){return Jy(_0x502198,_0x399884);}['findAvaila'+'bleLocale'](_0xbc8838){if(this['_translati'+'ons'][_0xbc8838])return _0xbc8838;const _0x472d85=Ri(_0xbc8838);return this['_findFallb'+'ackLocale'](_0xbc8838,_0x472d85);}['getText'](_0x2d4185,_0xfbca87){let _0x5341d7=_0x2d4185,_0x42f31b;_0xfbca87||(_0xfbca87=this['_locale'],_0x42f31b=this['_lang']);let _0x4b251b=this['_translati'+'ons'][_0xfbca87];return _0x4b251b||(_0x42f31b||(_0x42f31b=Ri(_0xfbca87)),_0xfbca87=this['_findFallb'+'ackLocale'](_0xfbca87,_0x42f31b),_0x4b251b=this['_translati'+'ons'][_0xfbca87]),_0x4b251b&&_0x4b251b['hasOwnProp'+'erty'](_0x2d4185)&&(_0x5341d7=_0x4b251b[_0x2d4185],Array['isArray'](_0x5341d7)&&(_0x5341d7=_0x5341d7[0xc93+-0x21b6*-0x1+-0x2e49]),_0x5341d7==null&&(_0x5341d7=_0x2d4185)),_0x5341d7;}['getPluralT'+'ext'](_0x564f33,_0x4f1683,_0x39ced3){let _0x44f9ee=_0x564f33,_0x4a06fc,_0x560365;_0x39ced3?(_0x4a06fc=Ri(_0x39ced3),_0x560365=Jd(_0x4a06fc)):(_0x39ced3=this['_locale'],_0x4a06fc=this['_lang'],_0x560365=this['_pluralFn']);let _0x1494ed=this['_translati'+'ons'][_0x39ced3];if(_0x1494ed||(_0x39ced3=this['_findFallb'+'ackLocale'](_0x39ced3,_0x4a06fc),_0x4a06fc=Ri(_0x39ced3),_0x560365=Jd(_0x4a06fc),_0x1494ed=this['_translati'+'ons'][_0x39ced3]),_0x1494ed&&_0x1494ed[_0x564f33]&&_0x560365){const _0x142e35=_0x560365(_0x4f1683);_0x44f9ee=_0x1494ed[_0x564f33][_0x142e35],_0x44f9ee==null&&(_0x44f9ee=_0x564f33);}return _0x44f9ee;}['addData'](_0x356e7b){let _0x5f5df9;try{_0x5f5df9=this['_parser']['parse'](_0x356e7b);}catch(_0x3b189e){console['error'](_0x3b189e);return;}for(let _0x4e7ccd=0x2260+-0x19b8+-0x115*0x8,_0x2c458a=_0x5f5df9['length'];_0x4e7ccd<_0x2c458a;_0x4e7ccd++){const _0x3c98f=_0x5f5df9[_0x4e7ccd],_0x35e729=_0x3c98f['info']['locale'],_0x3c1dbc=_0x3c98f['messages'];if(!this['_translati'+'ons'][_0x35e729]){this['_translati'+'ons'][_0x35e729]={};const _0x5a0a82=Ri(_0x35e729);this['_available'+'Langs'][_0x5a0a82]||(this['_available'+'Langs'][_0x5a0a82]=_0x35e729);}Object['assign'](this['_translati'+'ons'][_0x35e729],_0x3c1dbc),this['fire']('data:add',_0x35e729,_0x3c1dbc);}}['removeData'](_0xb99781){let _0x9a7822;try{_0x9a7822=this['_parser']['parse'](_0xb99781);}catch(_0x501b91){console['error'](_0x501b91);return;}for(let _0x1a6cf4=0x24d1+-0x655+-0x1e7c,_0x2c3ceb=_0x9a7822['length'];_0x1a6cf4<_0x2c3ceb;_0x1a6cf4++){const _0x7dd696=_0x9a7822[_0x1a6cf4],_0x4eb661=_0x7dd696['info']['locale'],_0x1ca4d5=this['_translati'+'ons'][_0x4eb661];if(!_0x1ca4d5)continue;const _0x1b1c3f=_0x7dd696['messages'];for(const _0x3bea02 in _0x1b1c3f)delete _0x1ca4d5[_0x3bea02];Object['keys'](_0x1ca4d5)['length']===-0x1252+-0x2172+-0x19e2*-0x2&&(delete this['_translati'+'ons'][_0x4eb661],delete this['_available'+'Langs'][Ri(_0x4eb661)]),this['fire']('data:remov'+'e',_0x4eb661,_0x1b1c3f);}}['destroy'](){this['_translati'+'ons']=null,this['_available'+'Langs']=null,this['_assets']=null,this['_parser']=null,this['off']();}['_findFallb'+'ackLocale'](_0x3c011b,_0x16396d){let _0x1d398d=oh[_0x3c011b];return _0x1d398d&&this['_translati'+'ons'][_0x1d398d]||(_0x1d398d=oh[_0x16396d],_0x1d398d&&this['_translati'+'ons'][_0x1d398d])||(_0x1d398d=this['_available'+'Langs'][_0x16396d],_0x1d398d&&this['_translati'+'ons'][_0x1d398d])?_0x1d398d:nh;}['_onAssetAd'+'d'](_0x544ab9){_0x544ab9['on']('load',this['_onAssetLo'+'ad'],this),_0x544ab9['on']('change',this['_onAssetCh'+'ange'],this),_0x544ab9['on']('remove',this['_onAssetRe'+'move'],this),_0x544ab9['on']('unload',this['_onAssetUn'+'load'],this),_0x544ab9['resource']&&this['_onAssetLo'+'ad'](_0x544ab9);}['_onAssetLo'+'ad'](_0x1b8857){this['addData'](_0x1b8857['resource']);}['_onAssetCh'+'ange'](_0x323d2f){_0x323d2f['resource']&&this['addData'](_0x323d2f['resource']);}['_onAssetRe'+'move'](_0x4aba2b){_0x4aba2b['off']('load',this['_onAssetLo'+'ad'],this),_0x4aba2b['off']('change',this['_onAssetCh'+'ange'],this),_0x4aba2b['off']('remove',this['_onAssetRe'+'move'],this),_0x4aba2b['off']('unload',this['_onAssetUn'+'load'],this),_0x4aba2b['resource']&&this['removeData'](_0x4aba2b['resource']),this['_app']['assets']['once']('add:'+_0x4aba2b['id'],this['_onAssetAd'+'d'],this);}['_onAssetUn'+'load'](_0xe7c0d8){_0xe7c0d8['resource']&&this['removeData'](_0xe7c0d8['resource']);}};h(vh,'EVENT_CHAN'+'GE','change');let Sa=vh;class oC extends me{constructor(_0x45b898){super(),h(this,'_scripts',{}),h(this,'_list',[]),h(this,'_scriptSch'+'emas',new Map()),this['app']=_0x45b898;}['destroy'](){this['app']=null,this['off']();}['addSchema'](_0x2ad082,_0x2df37d){_0x2df37d&&this['_scriptSch'+'emas']['set'](_0x2ad082,_0x2df37d);}['getSchema'](_0x482dc2){return this['_scriptSch'+'emas']['get'](_0x482dc2);}['add'](_0x23a1d4){const _0xfa0d1f=_0x23a1d4['__name'];return this['_scripts']['hasOwnProp'+'erty'](_0xfa0d1f)?(setTimeout(()=>{if(_0x23a1d4['prototype']['swap']){const _0x4d7c8c=this['_scripts'][_0xfa0d1f],_0x5ae697=this['_list']['indexOf'](_0x4d7c8c);this['_list'][_0x5ae697]=_0x23a1d4,this['_scripts'][_0xfa0d1f]=_0x23a1d4,this['fire']('swap',_0xfa0d1f,_0x23a1d4),this['fire']('swap:'+_0xfa0d1f,_0x23a1d4);}else console['warn']('script\x20reg'+'istry\x20alre'+'ady\x20has\x20\x27'+_0xfa0d1f+('\x27\x20script,\x20'+'define\x20\x27sw'+'ap\x27\x20method'+'\x20for\x20new\x20s'+'cript\x20type'+'\x20to\x20enable'+'\x20code\x20hot\x20'+'swapping'));}),!(0x3*-0x387+-0x1eba+0x10*0x295)):(this['_scripts'][_0xfa0d1f]=_0x23a1d4,this['_list']['push'](_0x23a1d4),this['fire']('add',_0xfa0d1f,_0x23a1d4),this['fire']('add:'+_0xfa0d1f,_0x23a1d4),setTimeout(()=>{if(!this['_scripts']['hasOwnProp'+'erty'](_0xfa0d1f)||!this['app']||!this['app']['systems']||!this['app']['systems']['script'])return;const _0x59709d=this['app']['systems']['script']['_component'+'s'];let _0x388a80;const _0x3bfdcb=[],_0x406990=[];for(_0x59709d['loopIndex']=-0x3c2*-0x2+0x203d+-0x27c1;_0x59709d['loopIndex']<_0x59709d['length'];_0x59709d['loopIndex']++){const _0x3d822f=_0x59709d['items'][_0x59709d['loopIndex']];if(_0x3d822f['_scriptsIn'+'dex'][_0xfa0d1f]&&_0x3d822f['_scriptsIn'+'dex'][_0xfa0d1f]['awaiting']){_0x3d822f['_scriptsDa'+'ta']&&_0x3d822f['_scriptsDa'+'ta'][_0xfa0d1f]&&(_0x388a80=_0x3d822f['_scriptsDa'+'ta'][_0xfa0d1f]['attributes']);const _0x1f101a=_0x3d822f['create'](_0xfa0d1f,{'preloading':!(-0x1c90*0x1+0x1*-0x16fd+-0x9f*-0x53),'ind':_0x3d822f['_scriptsIn'+'dex'][_0xfa0d1f]['ind'],'attributes':_0x388a80});_0x1f101a&&_0x3bfdcb['push'](_0x1f101a);for(const _0x4dbf31 of _0x3d822f['scripts'])_0x3d822f['initialize'+'Attributes'](_0x4dbf31);}}for(let _0x15753c=0x1131+-0x419+-0xd18;_0x15753c<_0x3bfdcb['length'];_0x15753c++)_0x3bfdcb[_0x15753c]['enabled']&&(_0x3bfdcb[_0x15753c]['_initializ'+'ed']=!(0x2560+0x1a*-0xb+-0x2442),_0x406990['push'](_0x3bfdcb[_0x15753c]),_0x3bfdcb[_0x15753c]['initialize']&&_0x3bfdcb[_0x15753c]['initialize']());for(let _0xf6be46=0x1*-0x75d+0x7e1+-0x84;_0xf6be46<_0x406990['length'];_0xf6be46++)!_0x406990[_0xf6be46]['enabled']||_0x406990[_0xf6be46]['_postIniti'+'alized']||(_0x406990[_0xf6be46]['_postIniti'+'alized']=!(-0x2c3*-0x5+-0x1a61+-0x1*-0xc92),_0x406990[_0xf6be46]['postInitia'+'lize']&&_0x406990[_0xf6be46]['postInitia'+'lize']());}),!(-0x1*-0x159c+-0x9e*-0x36+-0x1b78*0x2));}['remove'](_0x4fb0cd){let _0x33ebbf=_0x4fb0cd,_0x3a6379=_0x4fb0cd;if(typeof _0x3a6379!='string'?_0x3a6379=_0x33ebbf['__name']:_0x33ebbf=this['get'](_0x3a6379),this['get'](_0x3a6379)!==_0x33ebbf)return!(0x2197+0x118d+0x35*-0xf7);delete this['_scripts'][_0x3a6379];const _0x52a3b3=this['_list']['indexOf'](_0x33ebbf);return this['_list']['splice'](_0x52a3b3,0x1*0xf22+0x1*-0x120f+-0x19*-0x1e),this['fire']('remove',_0x3a6379,_0x33ebbf),this['fire']('remove:'+_0x3a6379,_0x33ebbf),!(-0x1dbf*-0x1+-0x16c+-0x1c53);}['get'](_0x597c12){return this['_scripts'][_0x597c12]||null;}['has'](_0x2d1894){if(typeof _0x2d1894=='string')return this['_scripts']['hasOwnProp'+'erty'](_0x2d1894);if(!_0x2d1894)return!(-0x1*0xa1d+-0x75b*0x1+0x27f*0x7);const _0x1e1bd6=_0x2d1894['__name'];return this['_scripts'][_0x1e1bd6]===_0x2d1894;}['list'](){return this['_list'];}}const lC=(_0x219028,_0x26f78d)=>_0x219028['constructo'+'r']['order']-_0x26f78d['constructo'+'r']['order'],cC=_0x521286=>_0x521286['sort'](lC),no=[],ev=[],hC=()=>ev['pop']()??[],Z_=_0x19d1b2=>{_0x19d1b2['length']=0x10*-0x1b4+-0x20ad+0x3bed,ev['push'](_0x19d1b2);},xh=class xh extends Ie{constructor(_0x195eff,_0x128be7=Ys()){super(_0x195eff),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'gsplat'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'c',{}),h(this,'_app'),h(this,'_destroyin'+'g',!(-0xa5d+-0x1ec7+-0xdb7*-0x3)),h(this,'_guid',null),h(this,'_template',!(-0xae5*0x1+0xad*0x17+-0x4a5)),(w['assert'](_0x128be7,'Could\x20not\x20'+'find\x20curre'+'nt\x20applica'+'tion'),this['_app']=_0x128be7);}['addCompone'+'nt'](_0x10ad0d,_0x1141ab){const _0x5c62d6=this['_app']['systems'][_0x10ad0d];return _0x5c62d6?this['c'][_0x10ad0d]?(w['warn']('addCompone'+'nt:\x20Entity'+'\x20already\x20h'+'as\x20\x27'+_0x10ad0d+('\x27\x20componen'+'t')),null):_0x5c62d6['addCompone'+'nt'](this,_0x1141ab):(w['error']('addCompone'+'nt:\x20System'+'\x20\x27'+_0x10ad0d+('\x27\x20doesn\x27t\x20'+'exist')),null);}['removeComp'+'onent'](_0x370227){const _0x561798=this['_app']['systems'][_0x370227];if(!_0x561798){w['error']('removeComp'+'onent:\x20Sys'+'tem\x20\x27'+_0x370227+('\x27\x20doesn\x27t\x20'+'exist'));return;}if(!this['c'][_0x370227]){w['warn']('removeComp'+'onent:\x20Ent'+'ity\x20doesn\x27'+'t\x20have\x20\x27'+_0x370227+('\x27\x20componen'+'t'));return;}_0x561798['removeComp'+'onent'](this);}['findCompon'+'ent'](_0x551319){const _0x1c44f3=this['findOne'](_0x36000f=>{var _0x120d6f;return(_0x120d6f=_0x36000f['c'])==null?void(0x217f*0x1+0x72a*0x3+-0x36fd):_0x120d6f[_0x551319];});return _0x1c44f3&&_0x1c44f3['c'][_0x551319];}['findCompon'+'ents'](_0x3de0a2){return this['find'](_0x410574=>{var _0xc85de1;return(_0xc85de1=_0x410574['c'])==null?void(-0x123+0x1f17+-0x9*0x354):_0xc85de1[_0x3de0a2];})['map'](_0x3ad1de=>_0x3ad1de['c'][_0x3de0a2]);}['findScript'](_0x2ae27b){const _0x20a4ce=this['findOne'](_0x39d432=>{var _0x1bbb53,_0x41ac7d;return(_0x41ac7d=(_0x1bbb53=_0x39d432['c'])==null?void(0xf6+0x10b1+0x11a7*-0x1):_0x1bbb53['script'])==null?void(0x1bd7*0x1+0x6*-0x21d+0xf29*-0x1):_0x41ac7d['has'](_0x2ae27b);});return _0x20a4ce==null?void(0x12bc+0xf9a+0x1e*-0x125):_0x20a4ce['c']['script']['get'](_0x2ae27b);}['findScript'+'s'](_0x7eb3a3){return this['find'](_0xf395ef=>{var _0x3adc64,_0x25c8fe;return(_0x25c8fe=(_0x3adc64=_0xf395ef['c'])==null?void(-0x25*0xe0+0xf7f*-0x2+0x3f5e):_0x3adc64['script'])==null?void(0x207a+-0x1229*-0x1+-0x32a3):_0x25c8fe['has'](_0x7eb3a3);})['map'](_0x58b97b=>_0x58b97b['c']['script']['get'](_0x7eb3a3));}['getGuid'](){return this['_guid']||this['setGuid'](_0['create']()),this['_guid'];}['setGuid'](_0x5132b4){const _0x2f50f9=this['_app']['_entityInd'+'ex'];this['_guid']&&delete _0x2f50f9[this['_guid']],this['_guid']=_0x5132b4,_0x2f50f9[this['_guid']]=this;}['_notifyHie'+'rarchyStat'+'eChanged'](_0xa68d0d,_0x1415e5){let _0x183c91=!(0x1*0xa7+0x1e89+-0x1f2f);_0xa68d0d===this&&no['length']===-0xa00+-0x3*-0xb6f+-0x184d&&(_0x183c91=!(-0x1*-0x3b3+0x5f4+-0x1*0x9a7)),_0xa68d0d['_beingEnab'+'led']=!(-0x1*-0x373+0x1*-0xcab+0x4*0x24e),_0xa68d0d['_onHierarc'+'hyStateCha'+'nged'](_0x1415e5),_0xa68d0d['_onHierarc'+'hyStatePos'+'tChanged']&&no['push'](_0xa68d0d);const _0x12fd7d=_0xa68d0d['_children'];for(let _0x1f3eff=-0x1b7*-0x15+0xcd8+-0x30db,_0x2c22cf=_0x12fd7d['length'];_0x1f3eff<_0x2c22cf;_0x1f3eff++)_0x12fd7d[_0x1f3eff]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x12fd7d[_0x1f3eff],_0x1415e5);if(_0xa68d0d['_beingEnab'+'led']=!(-0xb3*0x1d+-0x112*0x7+0x1bc6),_0x183c91){for(let _0x78ff4b=-0x245*0xd+-0x1*0x611+0x2392;_0x78ff4b<no['length'];_0x78ff4b++)no[_0x78ff4b]['_onHierarc'+'hyStatePos'+'tChanged']();no['length']=0x1908+-0x229c+-0x1*-0x994;}}['_onHierarc'+'hyStateCha'+'nged'](_0x218560){super['_onHierarc'+'hyStateCha'+'nged'](_0x218560);const _0x1a96dc=this['_getSorted'+'Components']();for(let _0x455ed3=0x25ef+-0x881+-0x1d6e;_0x455ed3<_0x1a96dc['length'];_0x455ed3++){const _0x2df1e7=_0x1a96dc[_0x455ed3];_0x2df1e7['enabled']&&(_0x218560?_0x2df1e7['onEnable']():_0x2df1e7['onDisable']());}Z_(_0x1a96dc);}['_onHierarc'+'hyStatePos'+'tChanged'](){const _0x3e0379=this['_getSorted'+'Components']();for(let _0x2541b9=-0xd*-0x193+0xb59+0xfe8*-0x2;_0x2541b9<_0x3e0379['length'];_0x2541b9++)_0x3e0379[_0x2541b9]['onPostStat'+'eChange']();Z_(_0x3e0379);}['findByGuid'](_0x1cdb7c){if(this['_guid']===_0x1cdb7c)return this;const _0x23a96a=this['_app']['_entityInd'+'ex'][_0x1cdb7c];return _0x23a96a&&(_0x23a96a===this||_0x23a96a['isDescenda'+'ntOf'](this))?_0x23a96a:null;}['destroy'](){this['_destroyin'+'g']=!(0x2374+0x1b0f+-0x3e83);for(const _0x82452b in this['c'])this['c'][_0x82452b]['enabled']=!(-0xfc8+0x1*0x235+0xd94);for(const _0x3813bc in this['c'])this['c'][_0x3813bc]['system']['removeComp'+'onent'](this);super['destroy'](),this['_guid']&&delete this['_app']['_entityInd'+'ex'][this['_guid']],this['_destroyin'+'g']=!(0x12a8+0x1ff2+-0x3299);}['clone'](){const _0x56aed3={},_0x367029=this['_cloneRecu'+'rsively'](_0x56aed3);return _0x56aed3[this['getGuid']()]=_0x367029,tv(this,this,_0x367029,_0x56aed3),_0x367029;}['_getSorted'+'Components'](){const _0x1ebe61=this['c'],_0x1e7074=hC();let _0x3b7c5e=0x8c8+0x1cc3+0x55d*-0x7;for(const _0x34df41 in _0x1ebe61)if(_0x1ebe61['hasOwnProp'+'erty'](_0x34df41)){const _0x39b99c=_0x1ebe61[_0x34df41];_0x3b7c5e|=_0x39b99c['constructo'+'r']['order']!==-0xae+-0x1*0xe7b+-0x1*-0xf29,_0x1e7074['push'](_0x39b99c);}return _0x3b7c5e&&_0x1e7074['length']>0x7b8*-0x1+0x4d3+-0x6a*-0x7&&cC(_0x1e7074),_0x1e7074;}['_cloneRecu'+'rsively'](_0x5347fa){const _0x49fc81=new this['constructo'+'r'](void(-0x13d6*0x1+-0x2377+0x374d),this['_app']);super['_cloneInte'+'rnal'](_0x49fc81);for(const _0x238d68 in this['c'])this['c'][_0x238d68]['system']['cloneCompo'+'nent'](this,_0x49fc81);for(let _0x4b294c=0xc8b+0x2062+-0x2ced;_0x4b294c<this['_children']['length'];_0x4b294c++){const _0x18b792=this['_children'][_0x4b294c];if(_0x18b792 instanceof xh){const _0x35f428=_0x18b792['_cloneRecu'+'rsively'](_0x5347fa);_0x49fc81['addChild'](_0x35f428),_0x5347fa[_0x18b792['getGuid']()]=_0x35f428;}}return _0x49fc81;}};h(xh,'EVENT_DEST'+'ROY','destroy');let lt=xh;function tv(_0x22c252,_0x2337cd,_0x3f2b05,_0x22e80a){if(_0x2337cd instanceof lt){const _0x16c5a5=_0x2337cd['c'];for(const _0x48e62b in _0x16c5a5){const _0x3999f8=_0x16c5a5[_0x48e62b],_0x395e91=_0x3999f8['system']['getPropert'+'iesOfType']('entity');for(let _0x2589fb=0x5*0x766+0x1*-0x137+-0x23c7,_0x51bb3a=_0x395e91['length'];_0x2589fb<_0x51bb3a;_0x2589fb++){const _0x5736b8=_0x395e91[_0x2589fb]['name'],_0x34bab5=_0x3999f8[_0x5736b8];if(!!_0x22c252['findByGuid'](_0x34bab5)){const _0x56e5a5=_0x22e80a[_0x34bab5]['getGuid']();_0x56e5a5?_0x3f2b05['c'][_0x48e62b][_0x5736b8]=_0x56e5a5:w['warn']('Could\x20not\x20'+'find\x20corre'+'sponding\x20e'+'ntity\x20id\x20w'+'hen\x20resolv'+'ing\x20duplic'+'ated\x20entit'+'y\x20referenc'+'es');}}}_0x16c5a5['script']&&_0x3f2b05['script']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x16c5a5['script'],_0x22e80a),_0x16c5a5['render']&&_0x3f2b05['render']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x16c5a5['render'],_0x22e80a),_0x16c5a5['button']&&_0x3f2b05['button']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x16c5a5['button'],_0x22e80a),_0x16c5a5['scrollview']&&_0x3f2b05['scrollview']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x16c5a5['scrollview'],_0x22e80a),_0x16c5a5['scrollbar']&&_0x3f2b05['scrollbar']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x16c5a5['scrollbar'],_0x22e80a),_0x16c5a5['anim']&&_0x3f2b05['anim']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x16c5a5['anim'],_0x22e80a);const _0x3eee9d=_0x2337cd['children']['filter'](_0x147c2c=>_0x147c2c instanceof lt),_0x32f0d8=_0x3f2b05['children']['filter'](_0xdef8b4=>_0xdef8b4 instanceof lt);for(let _0x1b26fe=0x1632+-0x1*0xdaf+0x1*-0x883,_0x45e329=_0x3eee9d['length'];_0x1b26fe<_0x45e329;_0x1b26fe++)tv(_0x22c252,_0x3eee9d[_0x1b26fe],_0x32f0d8[_0x1b26fe],_0x22e80a);}}class Q_{constructor(_0x4d0ee7,_0x535c40){h(this,'name'),h(this,'url'),h(this,'data',null),h(this,'_loading',!(0x1*0x412+0xd9*-0xb+0x542)),h(this,'_onLoadedC'+'allbacks',[]),(this['name']=_0x4d0ee7,this['url']=_0x535c40);}get['loaded'](){return!!this['data'];}get['loading'](){return this['_loading'];}}class dC{constructor(_0x17380a){h(this,'_app'),h(this,'_list',[]),h(this,'_index',{}),h(this,'_urlIndex',{}),this['_app']=_0x17380a;}['destroy'](){this['_app']=null;}['list'](){return this['_list'];}['add'](_0x7cd02c,_0x50c013){if(this['_index']['hasOwnProp'+'erty'](_0x7cd02c))return w['warn']('pc.SceneRe'+'gistry:\x20tr'+'ying\x20to\x20ad'+'d\x20more\x20tha'+'n\x20one\x20scen'+'e\x20called:\x20'+_0x7cd02c),!(-0x120a+0x12*0x1d1+-0xb*0x155);const _0x51dfbe=new Q_(_0x7cd02c,_0x50c013),_0x367c37=this['_list']['push'](_0x51dfbe);return this['_index'][_0x51dfbe['name']]=_0x367c37-(-0x50b*-0x2+0x171f*0x1+-0x2*0x109a),this['_urlIndex'][_0x51dfbe['url']]=_0x367c37-(-0x3ef*0x1+-0x2*-0x827+0x1*-0xc5e),!(0x14fe+-0xa4a+0x1*-0xab4);}['find'](_0x31f522){return this['_index']['hasOwnProp'+'erty'](_0x31f522)?this['_list'][this['_index'][_0x31f522]]:null;}['findByUrl'](_0x446681){return this['_urlIndex']['hasOwnProp'+'erty'](_0x446681)?this['_list'][this['_urlIndex'][_0x446681]]:null;}['remove'](_0x57b61b){if(this['_index']['hasOwnProp'+'erty'](_0x57b61b)){const _0x366e85=this['_index'][_0x57b61b];let _0x1752bd=this['_list'][_0x366e85];delete this['_urlIndex'][_0x1752bd['url']],delete this['_index'][_0x57b61b],this['_list']['splice'](_0x366e85,-0x20cc+-0x1104*0x1+0x31d1);for(let _0x6e9bb0=0x2582+-0x4*0x7b5+-0x6ae;_0x6e9bb0<this['_list']['length'];_0x6e9bb0++)_0x1752bd=this['_list'][_0x6e9bb0],this['_index'][_0x1752bd['name']]=_0x6e9bb0,this['_urlIndex'][_0x1752bd['url']]=_0x6e9bb0;}}['_loadScene'+'Data'](_0x1209ef,_0x15a6c6,_0x58d9ee){const _0x42a625=this['_app'];let _0x457e45=_0x1209ef;if(typeof _0x1209ef=='string'&&(_0x1209ef=this['findByUrl'](_0x457e45)||this['find'](_0x457e45)||new Q_('Untitled',_0x457e45)),_0x457e45=_0x1209ef['url'],!_0x457e45){_0x58d9ee('Cannot\x20fin'+'d\x20scene\x20to'+'\x20load');return;}if(_0x1209ef['loaded']){_0x58d9ee(null,_0x1209ef);return;}_0x42a625['assets']&&_0x42a625['assets']['prefix']&&!Vn['test'](_0x457e45)&&(_0x457e45=xe['join'](_0x42a625['assets']['prefix'],_0x457e45)),_0x1209ef['_onLoadedC'+'allbacks']['push'](_0x58d9ee),_0x1209ef['_loading']||_0x42a625['loader']['getHandler']('hierarchy')['load'](_0x457e45,(_0x383c73,_0x119c6a)=>{_0x1209ef['data']=_0x119c6a,_0x1209ef['_loading']=!(0x25bd*0x1+0x4*0x269+-0x2f60);for(let _0x2634ff=0x116*-0xc+-0x1*-0x2531+-0x1829;_0x2634ff<_0x1209ef['_onLoadedC'+'allbacks']['length'];_0x2634ff++)_0x1209ef['_onLoadedC'+'allbacks'][_0x2634ff](_0x383c73,_0x1209ef);_0x15a6c6||(_0x1209ef['data']=null),_0x1209ef['_onLoadedC'+'allbacks']['length']=0x1937+0x155f+-0x2e96;}),_0x1209ef['_loading']=!(-0x21ba*-0x1+-0x2*-0x11e1+-0x457c);}['loadSceneD'+'ata'](_0x384b0a,_0x130321){this['_loadScene'+'Data'](_0x384b0a,!(-0x224b*0x1+-0xb91+0x2ddc),_0x130321);}['unloadScen'+'eData'](_0x53988f){typeof _0x53988f=='string'&&(_0x53988f=this['findByUrl'](_0x53988f)),_0x53988f&&(_0x53988f['data']=null);}['_loadScene'+'Hierarchy'](_0x3b08a1,_0x11d7ac,_0x461b74){this['_loadScene'+'Data'](_0x3b08a1,!(0x716*0x3+0x2281+-0x37c2),(_0x11dd2f,_0x42e7c3)=>{if(_0x11dd2f){_0x461b74&&_0x461b74(_0x11dd2f);return;}_0x11d7ac&&_0x11d7ac(_0x42e7c3);const _0x271632=this['_app'],_0x30cba3=()=>{const _0xc7ba15=_0x271632['loader']['getHandler']('hierarchy');_0x271632['systems']['script']['preloading']=!(0x2*-0xd9b+-0xe3*-0x2+-0x250*-0xb);const _0x2f11e4=_0xc7ba15['open'](_0x42e7c3['url'],_0x42e7c3['data']);_0x271632['systems']['script']['preloading']=!(0x1c7d+0x7d*0x35+0x121f*-0x3),_0x271632['loader']['clearCache'](_0x42e7c3['url'],'hierarchy'),_0x271632['root']['addChild'](_0x2f11e4),_0x271632['systems']['fire']('initialize',_0x2f11e4),_0x271632['systems']['fire']('postInitia'+'lize',_0x2f11e4),_0x271632['systems']['fire']('postPostIn'+'itialize',_0x2f11e4),_0x461b74&&_0x461b74(null,_0x2f11e4);};_0x271632['_preloadSc'+'ripts'](_0x42e7c3['data'],_0x30cba3);});}['loadSceneH'+'ierarchy'](_0x1db502,_0x901c38){this['_loadScene'+'Hierarchy'](_0x1db502,null,_0x901c38);}['loadSceneS'+'ettings'](_0x10e436,_0xb13cd4){this['_loadScene'+'Data'](_0x10e436,!(-0x11*0x215+0x871*0x1+-0x43*-0x67),(_0x4b91bb,_0x39c783)=>{_0x4b91bb?_0xb13cd4&&_0xb13cd4(_0x4b91bb):(this['_app']['applyScene'+'Settings'](_0x39c783['data']['settings']),_0xb13cd4&&_0xb13cd4(null));});}['changeScen'+'e'](_0x4084fd,_0x186fb7){const _0xd2186a=this['_app'],_0x2ae90d=_0x52fc8c=>{const {children:_0x10e74d}=_0xd2186a['root'];for(;_0x10e74d['length'];)_0x10e74d[0x1d16+0x627+-0x233d]['destroy']();_0xd2186a['applyScene'+'Settings'](_0x52fc8c['data']['settings']);};this['_loadScene'+'Hierarchy'](_0x4084fd,_0x2ae90d,_0x186fb7);}['loadScene'](_0x3acd7e,_0x266020){const _0x1e933e=this['_app'],_0x3cffd3=_0x1e933e['loader']['getHandler']('scene');_0x1e933e['assets']&&_0x1e933e['assets']['prefix']&&!Vn['test'](_0x3acd7e)&&(_0x3acd7e=xe['join'](_0x1e933e['assets']['prefix'],_0x3acd7e)),_0x3cffd3['load'](_0x3acd7e,(_0x189651,_0x223bcb)=>{if(_0x189651)_0x266020&&_0x266020(_0x189651);else{const _0x512c9f=()=>{_0x1e933e['systems']['script']['preloading']=!(-0x82b*-0x2+-0x1244+0x2*0xf7);const _0x68710e=_0x3cffd3['open'](_0x3acd7e,_0x223bcb),_0x4f42d4=this['findByUrl'](_0x3acd7e);_0x4f42d4&&!_0x4f42d4['loaded']&&(_0x4f42d4['data']=_0x223bcb),_0x1e933e['systems']['script']['preloading']=!(0x4b*0xa+-0x9a6*-0x3+-0x1*0x1fdf),_0x1e933e['loader']['clearCache'](_0x3acd7e,'scene'),_0x1e933e['loader']['patch']({'resource':_0x68710e,'type':'scene'},_0x1e933e['assets']),_0x1e933e['root']['addChild'](_0x68710e['root']),_0x1e933e['systems']['rigidbody']&&typeof Ammo<'u'&&_0x1e933e['systems']['rigidbody']['gravity']['set'](_0x68710e['_gravity']['x'],_0x68710e['_gravity']['y'],_0x68710e['_gravity']['z']),_0x266020&&_0x266020(null,_0x68710e);};_0x1e933e['_preloadSc'+'ripts'](_0x223bcb,_0x512c9f);}});}}class fC{constructor(_0x122a98){this['frame']={'fps':0x0,'ms':0x0,'dt':0x0,'updateStart':0x0,'updateTime':0x0,'renderStart':0x0,'renderTime':0x0,'physicsStart':0x0,'physicsTime':0x0,'cullTime':0x0,'sortTime':0x0,'skinTime':0x0,'morphTime':0x0,'instancingTime':0x0,'triangles':0x0,'otherPrimitives':0x0,'shaders':0x0,'materials':0x0,'cameras':0x0,'shadowMapUpdates':0x0,'shadowMapTime':0x0,'depthMapTime':0x0,'forwardTime':0x0,'lightClustersTime':0x0,'lightClusters':0x0,'_timeToCountFrames':0x0,'_fpsAccum':0x0},this['drawCalls']={'forward':0x0,'depth':0x0,'shadow':0x0,'immediate':0x0,'misc':0x0,'total':0x0,'skinned':0x0,'instanced':0x0,'removedByInstancing':0x0},this['misc']={'renderTargetCreationTime':0x0},this['particles']={'updatesPerFrame':0x0,'_updatesPerFrame':0x0,'frameTime':0x0,'_frameTime':0x0},this['shaders']=_0x122a98['_shaderSta'+'ts'],this['vram']=_0x122a98['_vram'],Object['defineProp'+'erty'](this['vram'],'totalUsed',{'get':function(){return this['tex']+this['vb']+this['ib'];}}),Object['defineProp'+'erty'](this['vram'],'geom',{'get':function(){return this['vb']+this['ib'];}});}get['scene'](){return Ys()['scene']['_stats'];}get['lightmappe'+'r'](){var _0x232e35;return(_0x232e35=Ys()['lightmappe'+'r'])==null?void(-0x17*-0x193+0xf6a+-0x339f):_0x232e35['stats'];}get['batcher'](){const _0xd58250=Ys()['_batcher'];return _0xd58250?_0xd58250['_stats']:null;}}const uC='\x0auniform\x20f'+'loat\x20alpha'+'_ref;\x0a\x0avoi'+'d\x20alphaTes'+'t(float\x20a)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(a\x20<\x20alpha'+'_ref)\x20disc'+'ard;\x0a}\x0a',pC='\x0a\x0a#ifdef\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+'\x20AMBIENTSH'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20am'+'bientSH[9]'+';\x0a#endif\x0a\x0a'+'#if\x20LIT_AM'+'BIENT_SOUR'+'CE\x20==\x20ENVA'+'LATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fndef\x20ENV_'+'ATLAS\x0a\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_envAtlas'+';\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0avoid\x20addA'+'mbient(vec'+'3\x20worldNor'+'mal)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'AMBIENTSH\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20n\x20=\x20cu'+'beMapRotat'+'e(worldNor'+'mal);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20c'+'olor\x20=\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[0'+']\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ambi'+'entSH[1]\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[2'+']\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[3]\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[4]\x20*\x20'+'n.x\x20*\x20n.z\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ambien'+'tSH[5]\x20*\x20n'+'.z\x20*\x20n.y\x20+'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ambient'+'SH[6]\x20*\x20n.'+'y\x20*\x20n.x\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[7]\x20*\x20(3.'+'0\x20*\x20n.z\x20*\x20'+'n.z\x20-\x201.0)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[8]\x20*\x20'+'(n.x\x20*\x20n.x'+'\x20-\x20n.y\x20*\x20n'+'.y);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20processEn'+'vironment('+'max(color,'+'\x20vec3(0.0)'+'));\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_A'+'MBIENT_SOU'+'RCE\x20==\x20ENV'+'ALATLAS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dir\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20ma'+'pUv(toSphe'+'ricalUv(di'+'r),\x20vec4(1'+('28.0,\x20256.'+'0\x20+\x20128.0,'+'\x2064.0,\x2032.'+'0)\x20/\x20atlas'+'Size);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20raw\x20=\x20tex'+'ture2D(tex'+'ture_envAt'+'las,\x20uv);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20linear\x20'+'=\x20{ambient'+'Decode}(ra'+'w);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20p'+'rocessEnvi'+'ronment(li'+'near);\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'CONSTANT\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20light'+'_globalAmb'+'ient;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),mC='\x0a\x0a#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_anisotr'+'opyIntensi'+'ty;\x0a\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20material_'+'anisotropy'+'Rotation;\x0a'+'#endif\x0a\x0avo'+'id\x20getAnis'+'otropy()\x20{'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x200'+'.0;\x0a\x20\x20\x20\x20dA'+'nisotropyR'+'otation\x20=\x20'+'vec2(1.0,\x20'+'0.0);\x0a\x0a#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20m'+'aterial_an'+'isotropyIn'+'tensity;\x0a\x20'+'\x20\x20\x20dAnisot'+'ropyRotati'+'on\x20=\x20mater'+'ial_anisot'+'ropyRotati'+'on;\x0a#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_ANI'+'SOTROPY_TE'+'XTURE\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropyTex\x20='+'\x20texture2D'+'Bias({STD_'+'ANISOTROPY'+'_TEXTURE_N'+'AME},\x20{STD'+'_ANISOTROP'+'Y_TEXTURE_'+'UV},\x20textu'+'reBias).rg'+'b;\x0a\x20\x20\x20\x20dAn'+'isotropy\x20*'+'=\x20anisotro'+'pyTex.b;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20a'+'nisotropyR'+'otationFro'+'mTex\x20=\x20ani'+'sotropyTex'+'.rg\x20*\x202.0\x20'+'-\x20vec2(1.0'+');\x0a\x20\x20\x20\x20mat'+'2\x20rotation'+'Matrix\x20=\x20m'+'at2(dAniso'+'tropyRotat'+'ion.x,\x20dAn'+'isotropyRo'+'tation.y,\x20'+'-dAnisotro'+'pyRotation'+'.y,\x20dAniso'+'tropyRotat'+'ion.x);\x0a\x20\x20'+'\x20\x20dAnisotr'+'opyRotatio'+'n\x20=\x20rotati'+'onMatrix\x20*'+'\x20anisotrop'+'yRotationF'+'romTex;\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20dA'+'nisotropy\x20'+'=\x20clamp(dA'+'nisotropy,'+'\x200.0,\x201.0)'+';\x0a}\x0a',_C='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_aoInten'+'sity;\x0a#end'+'if\x0a\x0a#ifdef'+'\x20STD_AODET'+'AIL_TEXTUR'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22deta'+'ilModesPS\x22'+'\x0a#endif\x0a\x0av'+'oid\x20getAO('+')\x20{\x0a\x20\x20\x20\x20dA'+'o\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'aoBase\x20=\x20t'+'exture2DBi'+'as({STD_AO'+'_TEXTURE_N'+'AME},\x20{STD'+'_AO_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_AO_TE'+'XTURE_CHAN'+'NEL};\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20aoDetail\x20'+'=\x20texture2'+'DBias({STD'+'_AODETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'AODETAIL_T'+'EXTURE_UV}'+',\x20textureB'+'ias).{STD_'+'AODETAIL_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'oBase\x20=\x20de'+'tailMode_{'+'STD_AODETA'+'IL_DETAILM'+'ODE}(vec3('+'aoBase),\x20v'+'ec3(aoDeta'+'il)).r;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_AO_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(STD_A'+'O_TEXTURE)'+'\x20||\x20define'+'d(STD_AO_V'+'ERTEX)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAo\x20='+'\x20mix(1.0,\x20'+'dAo,\x20mater'+'ial_aoInte'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',gC='\x0avoid\x20occl'+'udeDiffuse'+'(float\x20ao)'+'\x20{\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20ao;\x0a}\x0a',SC='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_occlud'+'eSpecularI'+'ntensity;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0av'+'oid\x20occlud'+'eSpecular('+'float\x20glos'+'s,\x20float\x20a'+'o,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir)\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'AO\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_OCCLUDE_'+'SPECULAR_F'+'LOAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20specOcc'+'\x20=\x20mix(1.0'+',\x20ao,\x20mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20specOc'+'c\x20=\x20ao;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_OCC'+'LUDE_SPECU'+'LAR\x20==\x20GLO'+'SSDEPENDEN'+'T\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20approx'+'imated\x20spe'+'cular\x20occl'+'usion\x20from'+'\x20AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20http:'+'//research'+'.tri-ace.c'+'om/Data/ce'+'dec2011_Re'+'altimePBR_'+'Implementa'+'tion_e.ppt'+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20spec'+'Pow\x20=\x20exp2'+'(gloss\x20*\x201'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'specOcc\x20=\x20'+'saturate(p'+'ow(dot(wor'+'ldNormal,\x20'+'viewDir)\x20+'+'\x20ao,\x200.01\x20'+'*\x20specPow)'+'\x20-\x201.0\x20+\x20a'+'o);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecOcc\x20=\x20m'+'ix(1.0,\x20sp'+'ecOcc,\x20mat'+'erial_occl'+'udeSpecula'+'rIntensity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'*=\x20specOcc'+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20*=\x20specO'+'cc;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sSpecula'+'rLight\x20*=\x20'+'specOcc;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sReflecti'+'on\x20*=\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a'),yC='\x0a\x20\x20\x20\x20vec4\x20'+'dirLm\x20=\x20te'+'xture2D(te'+'xture_dirL'+'ightMap,\x20v'+'Uv1);\x0a\x0a\x20\x20\x20'+'\x20if\x20(bakeD'+'ir\x20>\x200.5)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dAtten'+'\x20>\x200.00001'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dirL'+'m.xyz\x20=\x20di'+'rLm.xyz\x20*\x20'+'2.0\x20-\x20vec3'+'(1.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20sa'+'turate(dAt'+'ten);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20nor'+'malize(dLi'+'ghtDirNorm'+'W.xyz*dAtt'+'en\x20+\x20dirLm'+'.xyz*dirLm'+'.w)\x20*\x200.5\x20'+'+\x20vec3(0.5'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20dirLm.w\x20'+'+\x20dAtten;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.a\x20=\x20m'+'ax(gl_Frag'+'Color.a,\x201'+'.0\x20/\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20dir'+'Lm;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20dirLm.'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color.a\x20=\x20'+'max(dirLm.'+'w,\x20dAtten\x20'+'>\x200.00001\x20'+'?\x20(1.0/255'+'.0)\x20:\x200.0)'+';\x0a\x20\x20\x20\x20}\x0a',vC='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'ambientBak'+'eOcclusion'+'Contrast\x20+'+'\x201.0,\x200.0)'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'vec3(ambie'+'ntBakeOccl'+'usionBrigh'+'tness);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20sa'+'turate(dDi'+'ffuseLight'+');\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20dAmbie'+'ntLight;\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHTM'+'AP_RGBM\x0a\x20\x20'+'\x20\x20//\x20encod'+'e\x20to\x20RGBM\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.rgb'+'\x20=\x20dDiffus'+'eLight;\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor.rgb\x20='+'\x20pow(gl_Fr'+'agColor.rg'+'b,\x20vec3(0.'+'5));\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20/=\x208'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.a\x20=\x20clamp'+'(\x20max(\x20max'+'(\x20gl_FragC'+'olor.r,\x20gl'+'_FragColor'+'.g\x20),\x20max('+'\x20gl_FragCo'+'lor.b,\x201.0'+'\x20/\x20255.0\x20)'+'\x20),\x200.0,1.'+'0\x20);\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.a\x20=\x20ceil'+'(gl_FragCo'+'lor.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20/=\x20gl'+'_FragColor'+'.a;\x0a#else\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(dDiffu'+'seLight,\x201'+'.0);\x0a#endi'+'f\x0a',xC='\x0auniform\x20v'+'ec3\x20view_p'+'osition;\x0a\x0a'+'uniform\x20ve'+'c3\x20light_g'+'lobalAmbie'+'nt;\x0a\x0afloat'+'\x20square(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'x*x;\x0a}\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0ave'+'c3\x20saturat'+'e(vec3\x20x)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3(0.0'+'),\x20vec3(1.'+'0));\x0a}\x0a',TC='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'ec2\x20vMask;'+'\x0avarying\x20v'+'ec2\x20vTiled'+'Uv;\x0a\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0au'+'niform\x20med'+'iump\x20vec2\x20'+'outerScale'+';\x0auniform\x20'+'mediump\x20ve'+'c4\x20atlasRe'+'ct;\x0a\x0avec2\x20'+'nineSliced'+'Uv;\x0a',wC='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vec2\x20vMa'+'sk;\x0avaryin'+'g\x20vec2\x20vTi'+'ledUv;\x0a\x0aun'+'iform\x20medi'+'ump\x20vec4\x20i'+'nnerOffset'+';\x0auniform\x20'+'mediump\x20ve'+'c2\x20outerSc'+'ale;\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20atla'+'sRect;\x0a\x0ave'+'c2\x20nineSli'+'cedUv;\x0a',EC='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afloat\x20'+'bayer2(vec'+'2\x20p)\x20{\x0a\x20\x20\x20'+'\x20return\x20mo'+'d(2.0\x20*\x20p.'+'y\x20+\x20p.x\x20+\x20'+'1.0,\x204.0);'+'\x0a}\x0a\x0a//\x204x4'+'\x20matrix,\x20p'+'\x20-\x20pixel\x20c'+'oordinate\x0a'+'float\x20baye'+'r4(vec2\x20p)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20p1\x20=\x20mod'+'(p,\x202.0);\x0a'+'\x20\x20\x20\x20vec2\x20p'+'2\x20=\x20floor('+'0.5\x20*\x20mod('+'p,\x204.0));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afloat\x20bay'+'er8(vec2\x20p'+')\x20{\x0a\x20\x20\x20\x20ve'+'c2\x20p1\x20=\x20mo'+'d(p,\x202.0);'+'\x0a\x20\x20\x20\x20vec2\x20'+'p2\x20=\x20floor'+'(0.5\x20*\x20mod'+'(p,\x204.0));'+'\x0a\x20\x20\x20\x20vec2\x20'+'p4\x20=\x20floor'+'(0.25\x20*\x20mo'+'d(p,\x208.0))'+';\x0a\x20\x20\x20\x20retu'+'rn\x204.0\x20*\x20('+'4.0\x20*\x20baye'+'r2(p1)\x20+\x20b'+'ayer2(p2))'+'\x20+\x20bayer2('+'p4);\x0a}\x0a',bC='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0auni'+'form\x20vec2\x20'+'pixelOffse'+'t;\x0a\x0a#ifdef'+'\x20GAUSS\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20weigh'+'t[{SAMPLES'+'}];\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20m'+'oments\x20=\x20v'+'ec3(0.0);\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vUv0\x20-'+'\x20pixelOffs'+'et\x20*\x20(floa'+'t({SAMPLES'+'})\x20*\x200.5);'+'\x0a\x20\x20\x20\x20for\x20('+'int\x20i\x20=\x200;'+'\x20i\x20<\x20{SAMP'+'LES};\x20i++)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20c\x20=\x20'+'texture2D('+'source,\x20uv'+'\x20+\x20pixelOf'+'fset\x20*\x20flo'+'at(i));\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20GAUSS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20moments\x20'+'+=\x20c.xyz\x20*'+'\x20weight[i]'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'ments\x20+=\x20c'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'GAUSS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20*=\x201.0\x20/'+'\x20float({SA'+'MPLES});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(momen'+'ts.x,\x20mome'+'nts.y,\x20mom'+'ents.z,\x201.'+'0);\x0a}\x0a',AC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oat;\x0a\x0avoid'+'\x20getClearC'+'oat()\x20{\x0a\x20\x20'+'\x20\x20ccSpecul'+'arity\x20=\x20ma'+'terial_cle'+'arCoat;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_CLEARC'+'OAT_TEXTUR'+'E\x0a\x20\x20\x20\x20ccSp'+'ecularity\x20'+'*=\x20texture'+'2DBias({ST'+'D_CLEARCOA'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_CL'+'EARCOAT_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20*=\x20satu'+'rate(vVert'+'exColor.{S'+'TD_CLEARCO'+'AT_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',CC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oatGloss;\x0a'+'\x0avoid\x20getC'+'learCoatGl'+'ossiness()'+'\x20{\x0a\x20\x20\x20\x20ccG'+'lossiness\x20'+'=\x20material'+'_clearCoat'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE\x0a\x20\x20\x20\x20'+'ccGlossine'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_CLEAR'+'COATGLOSS_'+'TEXTURE_NA'+'ME},\x20{STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_CLEAR'+'COATGLOSS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_CLEAR'+'COATGLOSS_'+'INVERT\x0a\x20\x20\x20'+'\x20ccGlossin'+'ess\x20=\x201.0\x20'+'-\x20ccGlossi'+'ness;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20+=\x200.'+'0000001;\x0a}'+'\x0a',PC='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0aunif'+'orm\x20float\x20'+'material_c'+'learCoatBu'+'mpiness;\x0a#'+'endif\x0a\x0avoi'+'d\x20getClear'+'CoatNormal'+'()\x20{\x0a#ifde'+'f\x20STD_CLEA'+'RCOATNORMA'+'L_TEXTURE\x0a'+'\x20\x20\x20\x20vec3\x20n'+'ormalMap\x20='+'\x20{STD_CLEA'+'RCOATNORMA'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_UV}'+',\x20textureB'+'ias));\x0a\x20\x20\x20'+'\x20normalMap'+'\x20=\x20mix(vec'+'3(0.0,\x200.0'+',\x201.0),\x20no'+'rmalMap,\x20m'+'aterial_cl'+'earCoatBum'+'piness);\x0a\x20'+'\x20\x20\x20ccNorma'+'lW\x20=\x20norma'+'lize(dTBN\x20'+'*\x20normalMa'+'p);\x0a#else\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20dVer'+'texNormalW'+';\x0a#endif\x0a}'+'\x0a',MC='\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0avec2\x20ge'+'tCubemapFa'+'ceCoordina'+'tes(const\x20'+'vec3\x20dir,\x20'+'out\x20float\x20'+'faceIndex,'+'\x20out\x20vec2\x20'+'tileOffset'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20vAbs\x20=\x20'+'abs(dir);\x0a'+'\x20\x20\x20\x20float\x20'+'ma;\x0a\x20\x20\x20\x20ve'+'c2\x20uv;\x0a\x20\x20\x20'+'\x20if\x20(vAbs.'+'z\x20>=\x20vAbs.'+'x\x20&&\x20vAbs.'+'z\x20>=\x20vAbs.'+'y)\x20{\x20\x20\x20//\x20'+'front\x20/\x20ba'+'ck\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20faceInde'+'x\x20=\x20dir.z\x20'+'<\x200.0\x20?\x205.'+'0\x20:\x204.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2(dir.z\x20'+'<\x200.0\x20?\x20-d'+'ir.x\x20:\x20dir'+'.x,\x20-dir.y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.x\x20=\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20t'+'ileOffset.'+'y\x20=\x20dir.z\x20'+'<\x200.0\x20?\x201.'+'0\x20:\x200.0;\x0a\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if(vAbs.y'+'\x20>=\x20vAbs.x'+')\x20{\x20\x20//\x20to'+'p\x20index\x202,'+'\x20bottom\x20in'+'dex\x203\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20faceI'+'ndex\x20=\x20dir'+'.y\x20<\x200.0\x20?'+'\x203.0\x20:\x202.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ma\x20=\x200.5\x20/'+'\x20vAbs.y;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uv\x20'+'=\x20vec2(dir'+'.x,\x20dir.y\x20'+'<\x200.0\x20?\x20-d'+'ir.z\x20:\x20dir'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20tileOff'+'set.x\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.y\x20=\x20dir.'+'y\x20<\x200.0\x20?\x20'+'1.0\x20:\x200.0;'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'\x20=\x200.5\x20/\x20v'+'Abs.x;\x0a\x20\x20\x20'+('\x20\x20\x20\x20\x20uv\x20=\x20'+'vec2(dir.x'+'\x20<\x200.0\x20?\x20d'+'ir.z\x20:\x20-di'+'r.z,\x20-dir.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20tileOffs'+'et.x\x20=\x200.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'tileOffset'+'.y\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20uv'+'\x20*\x20ma\x20+\x200.'+'5;\x0a}\x0a\x0a//\x20c'+'onverts\x20un'+'normalized'+'\x20direction'+'\x20vector\x20to'+'\x20a\x20texture'+'\x20coordinat'+'e\x20for\x20a\x20cu'+'bemap\x20face'+'\x20stored\x20wi'+'thin\x20textu'+'re\x20atlas\x20d'+'escribed\x20b'+'y\x20the\x20view'+'port\x0avec2\x20'+'getCubemap'+'AtlasCoord'+'inates(con'+'st\x20vec3\x20om'+'niAtlasVie'+'wport,\x20flo'+'at\x20shadowE'+'dgePixels,'+'\x20float\x20sha'+'dowTexture'+'Resolution'+',\x20const\x20ve'+'c3\x20dir)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20faceIndex'+';\x0a\x20\x20\x20\x20vec2'+'\x20tileOffse'+'t;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapFac'+'eCoordinat'+'es(dir,\x20fa'+'ceIndex,\x20t'+'ileOffset)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'move\x20uv\x20co'+'ordinates\x20'+'inwards\x20in'+'side\x20to\x20co'+'mpensate\x20f'+'or\x20larger\x20'+'fov\x20when\x20r'+'endering\x20s'+'hadow\x20into'+'\x20atlas\x0a\x20\x20\x20'+'\x20float\x20atl'+'asFaceSize'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20tileSi'+'ze\x20=\x20shado'+'wTextureRe'+'solution\x20*'+'\x20atlasFace'+'Size;\x0a\x20\x20\x20\x20'+'float\x20offs'+'et\x20=\x20shado'+'wEdgePixel'+'s\x20/\x20tileSi'+'ze;\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv\x20*\x20ve'+'c2(1.0\x20-\x20o'+'ffset\x20*\x202.'+'0)\x20+\x20vec2('+'offset\x20*\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20*'+'=\x20atlasFac'+'eSize;\x0a\x0a\x20\x20'+'\x20\x20//\x20offse'+'t\x20into\x20fac'+'e\x20of\x20the\x20a')+('tlas\x20(3x3\x20'+'grid)\x0a\x20\x20\x20\x20'+'uv\x20+=\x20tile'+'Offset\x20*\x20a'+'tlasFaceSi'+'ze;\x0a\x0a\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nto\x20the\x20at'+'las\x20viewpo'+'rt\x0a\x20\x20\x20\x20uv\x20'+'+=\x20omniAtl'+'asViewport'+'.xy;\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a'),DC='\x0avec3\x20_get'+'CookieClus'+'tered(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20uv,\x20floa'+'t\x20intensit'+'y,\x20vec4\x20co'+'okieChanne'+'l)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20pixel\x20'+'=\x20mix(vec4'+'(1.0),\x20tex'+'ture2DLod('+'tex,\x20uv,\x200'+'.0),\x20inten'+'sity);\x0a\x20\x20\x20'+'\x20bool\x20isRg'+'b\x20=\x20dot(co'+'okieChanne'+'l.rgb,\x20vec'+'3(1.0))\x20=='+'\x203.0;\x0a\x20\x20\x20\x20'+'return\x20isR'+'gb\x20?\x20pixel'+'.rgb\x20:\x20vec'+'3(dot(pixe'+'l,\x20cookieC'+'hannel));\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0ave'+'c3\x20getCook'+'ie2DCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20mat4\x20'+'transform,'+'\x20vec3\x20worl'+'dPosition,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieC'+'hannel)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20p'+'rojPos\x20=\x20t'+'ransform\x20*'+'\x20vec4(worl'+'dPosition,'+'\x201.0);\x0a\x20\x20\x20'+'\x20return\x20_g'+'etCookieCl'+'ustered(TE'+'XTURE_PASS'+'(tex),\x20pro'+'jPos.xy\x20/\x20'+'projPos.w,'+'\x20intensity'+',\x20cookieCh'+'annel);\x0a}\x0a'+'\x0a//\x20getCoo'+'kie\x20for\x20cl'+'ustered\x20om'+'ni\x20light\x20w'+'ith\x20the\x20co'+'okie\x20textu'+'re\x20being\x20s'+'tored\x20in\x20t'+'he\x20cookie\x20'+'atlas\x0avec3'+'\x20getCookie'+'CubeCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec3\x20'+'dir,\x20float'+'\x20intensity'+',\x20vec4\x20coo'+'kieChannel'+',\x20float\x20sh'+'adowTextur'+'eResolutio'+'n,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20omniAtla'+'sViewport)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+('tureResolu'+'tion,\x20dir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getCoo'+'kieCluster'+'ed(TEXTURE'+'_PASS(tex)'+',\x20uv,\x20inte'+'nsity,\x20coo'+'kieChannel'+');\x0a}\x0a'),IC='\x0a\x0avec3\x20_ge'+'tShadowCoo'+'rdPerspZbu'+'ffer(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20wP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20shado'+'wMatrix\x20*\x20'+'vec4(wPos,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'yz\x20/=\x20proj'+'Pos.w;\x0a\x20\x20\x20'+'\x20return\x20pr'+'ojPos.xyz;'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20bias\x20i'+'s\x20already\x20'+'applied\x20on'+'\x20render\x0a}\x0a'+'\x0avec3\x20getS'+'hadowCoord'+'PerspZbuff'+'erNormalOf'+'fset(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20no'+'rmal)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20wPo'+'s\x20=\x20vPosit'+'ionW\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowCoordPe'+'rspZbuffer'+'(shadowMat'+'rix,\x20shado'+'wParams,\x20w'+'Pos);\x0a}\x0a\x0av'+'ec3\x20normal'+'OffsetPoin'+'tShadow(ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20lightPos'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm,\x20vec3'+'\x20normal)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20distScale'+'\x20=\x20length('+'lightDir);'+'\x0a\x20\x20\x20\x20vec3\x20'+'wPos\x20=\x20vPo'+'sitionW\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x20/'+'/0.02\x0a\x20\x20\x20\x20'+'vec3\x20dir\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0afloa'+'t\x20getShado'+'wOmniClust'+'eredPCF1(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20omniAtla'+'sViewport,'+'\x20float\x20sha'+'dowEdgePix'+'els,\x20vec3\x20'+'lightDir)\x20'+'{\x0a\x0a\x20\x20\x20\x20flo'+'at\x20shadowT'+('extureReso'+'lution\x20=\x20s'+'hadowParam'+'s.x;\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etCubemapA'+'tlasCoordi'+'nates(omni'+'AtlasViewp'+'ort,\x20shado'+'wEdgePixel'+'s,\x20shadowT'+'extureReso'+'lution,\x20li'+'ghtDir);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'shadowZ\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(uv,\x20sha'+'dowZ));\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF3'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF3'+'x3(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF5)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF5'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s')+('hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF5'+'x5(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a/'+'/\x20Clustere'+'d\x20Spot\x20Sam'+'pling\x20usin'+'g\x20atlas\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF1)\x0a\x0afl'+'oat\x20getSha'+'dowSpotClu'+'steredPCF1'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSha'+'dow(shadow'+'Map,\x20shado'+'wCoord);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x0af'+'loat\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF3x3'+'(SHADOWMAP'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a}\x0a\x0a#'+'endif\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x0afloa'+'t\x20getShado'+'wSpotClust'+'eredPCF5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC')+('oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a}'+'\x0a#endif\x0a'),LC='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20clu'+'sterWorldT'+'exture;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20lightsTe'+'xture;\x0a\x0a#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x20\x20\x20\x20//\x20TO'+'DO:\x20when\x20V'+'SM\x20shadow\x20'+'is\x20support'+'ed,\x20it\x20nee'+'ds\x20to\x20use\x20'+'sampler2D\x20'+'in\x20webgl2\x0a'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'DShadow\x20sh'+'adowAtlasT'+'exture;\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20CLUSTER'+'_COOKIES\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20cookieAtl'+'asTexture;'+'\x0a#endif\x0a\x0au'+'niform\x20int'+'\x20clusterMa'+'xCells;\x0a\x0a/'+'/\x201.0\x20if\x20c'+'lustered\x20l'+'ighting\x20ca'+'n\x20be\x20skipp'+'ed\x20(0\x20ligh'+'ts\x20in\x20the\x20'+'clusters)\x0a'+'uniform\x20fl'+'oat\x20cluste'+'rSkip;\x0a\x0aun'+'iform\x20vec3'+'\x20clusterCe'+'llsCountBy'+'BoundsSize'+';\x0auniform\x20'+'vec3\x20clust'+'erTextureS'+'ize;\x0aunifo'+'rm\x20vec3\x20cl'+'usterBound'+'sMin;\x0aunif'+'orm\x20vec3\x20c'+'lusterBoun'+'dsDelta;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsDot;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsMax;\x0au'+'niform\x20vec'+'2\x20shadowAt'+'lasParams;'+'\x0a\x0a//\x20struc'+'ture\x20stori'+'ng\x20light\x20p'+'roperties\x20'+'of\x20a\x20clust'+'ered\x20light'+'\x0a//\x20it\x27s\x20s'+('orted\x20to\x20h'+'ave\x20all\x20ve'+'ctors\x20alig'+'ned\x20to\x204\x20f'+'loats\x20to\x20l'+'imit\x20paddi'+'ng\x0astruct\x20'+'ClusterLig'+'htData\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x2032b'+'it\x20of\x20flag'+'s\x0a\x20\x20\x20\x20uint'+'\x20flags;\x0a\x0a\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20siz'+'es\x20/\x20orien'+'tation\x0a\x20\x20\x20'+'\x20vec3\x20half'+'Width;\x0a\x0a\x20\x20'+'\x20\x20bool\x20isS'+'pot;\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20sizes\x20'+'/\x20orientat'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20halfHei'+'ght;\x0a\x0a\x20\x20\x20\x20'+'//\x20light\x20i'+'ndex\x0a\x20\x20\x20\x20i'+'nt\x20lightIn'+'dex;\x0a\x0a\x20\x20\x20\x20'+'//\x20world\x20s'+'pace\x20posit'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20positio'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20shape\x0a\x20\x20'+'\x20\x20uint\x20sha'+'pe;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20direct'+'ion\x20(spot\x20'+'light\x20only'+')\x0a\x20\x20\x20\x20vec3'+'\x20direction'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20foll'+'ow\x20mode\x0a\x20\x20'+'\x20\x20bool\x20fal'+'loffModeLi'+'near;\x0a\x0a\x20\x20\x20'+'\x20//\x20color\x0a'+'\x20\x20\x20\x20vec3\x20c'+'olor;\x0a\x0a\x20\x20\x20'+'\x20//\x200.0\x20if'+'\x20the\x20light'+'\x20doesn\x27t\x20c'+'ast\x20shadow'+'s\x0a\x20\x20\x20\x20floa'+'t\x20shadowIn'+'tensity;\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20vec3\x20om'+'niAtlasVie'+'wport;\x0a\x0a\x20\x20'+'\x20\x20//\x20range'+'\x20of\x20the\x20li'+'ght\x0a\x20\x20\x20\x20fl'+'oat\x20range;'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'hannel\x20mas'+'k\x20-\x20one\x20of'+'\x20the\x20chann'+'els\x20has\x201,'+'\x20the\x20other'+'s\x20are\x200\x0a\x20\x20'+'\x20\x20vec4\x20coo'+'kieChannel'+'Mask;\x0a\x0a\x20\x20\x20'+'\x20//\x20compre'+'ssed\x20biase'+'s,\x20two\x20haf'+'-floats\x20st'+'ored\x20in\x20a\x20'+'float\x0a\x20\x20\x20\x20'+'float\x20bias'+'esData;\x0a\x0a\x20')+('\x20\x20\x20//\x20shad'+'ow\x20bias\x20va'+'lues\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wBias;\x0a\x20\x20\x20'+'\x20float\x20sha'+'dowNormalB'+'ias;\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20f'+'loat\x20angle'+'sData;\x0a\x0a\x20\x20'+'\x20\x20//\x20spot\x20'+'light\x20inne'+'r\x20and\x20oute'+'r\x20angle\x20co'+'sine\x0a\x20\x20\x20\x20f'+'loat\x20inner'+'ConeAngleC'+'os;\x0a\x20\x20\x20\x20fl'+'oat\x20outerC'+'oneAngleCo'+'s;\x0a\x0a\x20\x20\x20\x20//'+'\x20intensity'+'\x20of\x20the\x20co'+'okie\x0a\x20\x20\x20\x20f'+'loat\x20cooki'+'eIntensity'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20mask'+'\x0a\x20\x20\x20\x20//flo'+'at\x20mask;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Dynamic;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Lightmappe'+'d;\x0a};\x0a\x0a//\x20'+'Note:\x20on\x20s'+'ome\x20device'+'s\x20(tested\x20'+'on\x20Pixel\x203'+'A\x20XL),\x20thi'+'s\x20matrix\x20w'+'hen\x20stored'+'\x20inside\x20th'+'e\x20light\x20st'+'ruct\x20has\x20l'+'ower\x20preci'+'sion\x20compa'+'red\x20to\x0a//\x20'+'when\x20store'+'d\x20outside,'+'\x20so\x20we\x20sto'+'re\x20it\x20outs'+'ide\x20to\x20avo'+'id\x20spot\x20sh'+'adow\x20flick'+'ering.\x20Thi'+'s\x20might\x20ne'+'ed\x20to\x20be\x20d'+'one\x20to\x20oth'+'er\x20/\x20all\x20m'+'embers\x0a//\x20'+'of\x20the\x20str'+'ucture\x20if\x20'+'further\x20si'+'milar\x20issu'+'es\x20are\x20obs'+'erved.\x0a\x0a//'+'\x20shadow\x20(s'+'pot\x20light\x20'+'only)\x20/\x20co'+'okie\x20proje'+'ction\x20matr'+'ix\x0amat4\x20li'+'ghtProject'+'ionMatrix;'+'\x0a\x0avec4\x20sam'+'pleLightTe'+'xtureF(con'+'st\x20Cluster'+'LightData\x20'+'clusterLig'+'htData,\x20in'+'t\x20index)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20texelFet'+'ch(lightsT'+'exture,\x20iv'+'ec2(index,'+'\x20clusterLi'+'ghtData.li'+'ghtIndex),'+'\x200);\x0a}\x0a\x0avo'+'id\x20decodeC'+'lusterLigh')+('tCore(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData,\x20flo'+'at\x20lightIn'+'dex)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20index\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.li'+'ghtIndex\x20='+'\x20int(light'+'Index);\x0a\x0a\x20'+'\x20\x20\x20//\x20samp'+'le\x20data\x20en'+'coding\x20hal'+'f-float\x20va'+'lues\x20into\x20'+'32bit\x20uint'+'s\x0a\x20\x20\x20\x20vec4'+'\x20halfData\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_COL'+'OR_ANGLES_'+'BIAS});\x0a\x0a\x20'+'\x20\x20\x20//\x20stor'+'e\x20floats\x20w'+'e\x20decode\x20l'+'ater\x20as\x20ne'+'eded\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.angl'+'esData\x20=\x20h'+'alfData.z;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.biasesDa'+'ta\x20=\x20halfD'+'ata.w;\x0a\x0a\x20\x20'+'\x20\x20//\x20decom'+'press\x20colo'+'r\x20half-flo'+'ats\x0a\x20\x20\x20\x20ve'+'c2\x20colorRG'+'\x20=\x20unpackH'+'alf2x16(fl'+'oatBitsToU'+'int(halfDa'+'ta.x));\x0a\x20\x20'+'\x20\x20vec2\x20col'+'orB_\x20=\x20unp'+'ackHalf2x1'+'6(floatBit'+'sToUint(ha'+'lfData.y))'+';\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.color\x20='+'\x20vec3(colo'+'rRG,\x20color'+'B_.x)\x20*\x20{L'+'IGHT_COLOR'+'_DIVIDER};'+'\x0a\x0a\x20\x20\x20\x20//\x20p'+'osition\x20an'+'d\x20range,\x20f'+'ull\x20floats'+'\x0a\x20\x20\x20\x20vec4\x20'+'lightPosRa'+'nge\x20=\x20samp'+'leLightTex'+'tureF(clus'+'terLightDa'+'ta,\x20{CLUST'+'ER_TEXTURE'+'_POSITION_'+'RANGE});\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'position\x20='+'\x20lightPosR'+'ange.xyz;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.range\x20=\x20l'+'ightPosRan'+'ge.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20d'+'irection\x20&'+'\x20flags\x20dat'+'a\x0a\x20\x20\x20\x20vec4'+'\x20lightDir_'+'Flags\x20=\x20sa'+'mpleLightT'+'extureF(cl')+('usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_DIRECTI'+'ON_FLAGS})'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'spot\x20light'+'\x20direction'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.directio'+'n\x20=\x20lightD'+'ir_Flags.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x2032bit\x20fl'+'ags\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20floatBi'+'tsToUint(l'+'ightDir_Fl'+'ags.w);\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sSpot\x20=\x20(c'+'lusterLigh'+'tData.flag'+'s\x20&\x20(1u\x20<<'+'\x2030u))\x20!=\x20'+'0u;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.shape'+'\x20=\x20(cluste'+'rLightData'+'.flags\x20>>\x20'+'28u)\x20&\x200x3'+'u;\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.fallof'+'fModeLinea'+'r\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2027u'+'))\x20==\x200u;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.shadowInt'+'ensity\x20=\x20f'+'loat((clus'+'terLightDa'+'ta.flags\x20>'+'>\x200u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eIntensity'+'\x20=\x20float(('+'clusterLig'+'htData.fla'+'gs\x20>>\x208u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sDynamic\x20='+'\x20(clusterL'+'ightData.f'+'lags\x20&\x20(1u'+'\x20<<\x2022u))\x20'+'!=\x200u;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.is'+'Lightmappe'+'d\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2021u'+'))\x20!=\x200u;\x0a'+'}\x0a\x0avoid\x20de'+'codeCluste'+'rLightSpot'+'(inout\x20Clu'+'sterLightD'+'ata\x20cluste'+'rLightData'+')\x20{\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20cos\x20ang'+'les\x0a\x20\x20\x20\x20ve'+'c2\x20angles\x20'+'=\x20unpackHa'+'lf2x16(flo'+'atBitsToUi'+'nt(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight')+('Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0av'+'oid\x20decode'+'ClusterLig'+'htOmniAtla'+'sViewport('+'inout\x20Clus'+'terLightDa'+'ta\x20cluster'+'LightData)'+'\x20{\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.omniAt'+'lasViewpor'+'t\x20=\x20sample'+'LightTextu'+'reF(cluste'+'rLightData'+',\x20{CLUSTER'+'_TEXTURE_P'+'ROJ_MAT_0}'+').xyz;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtAreaDat'+'a(inout\x20Cl'+'usterLight'+'Data\x20clust'+'erLightDat'+'a)\x20{\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.half'+'Width\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_AREA_DA'+'TA_WIDTH})'+'.xyz;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.hal'+'fHeight\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData,\x20{C'+'LUSTER_TEX'+'TURE_AREA_'+'DATA_HEIGH'+'T}).xyz;\x0a}'+'\x0a\x0avoid\x20dec'+'odeCluster'+'LightProje'+'ctionMatri'+'xData(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20m0\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData,\x20{CL'+'USTER_TEXT'+'URE_PROJ_M'+'AT_0});\x0a\x20\x20'+'\x20\x20vec4\x20m1\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_PRO'+'J_MAT_1});'+'\x0a\x20\x20\x20\x20vec4\x20'+'m2\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a,\x20{CLUSTE'+'R_TEXTURE_'+'PROJ_MAT_2'+'});\x0a\x20\x20\x20\x20ve'+'c4\x20m3\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight')+('Data,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4('+'m0,\x20m1,\x20m2'+',\x20m3);\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtShadowD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20//\x20s'+'hadow\x20bias'+'es\x0a\x20\x20\x20\x20vec'+'2\x20biases\x20='+'\x20unpackHal'+'f2x16(floa'+'tBitsToUin'+'t(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20extra'+'ct\x20channel'+'\x20mask\x20from'+'\x20flags\x0a\x20\x20\x20'+'\x20uint\x20cook'+'ieFlags\x20=\x20'+'(clusterLi'+'ghtData.fl'+'ags\x20>>\x2023u'+')\x20&\x200x0Fu;'+'\x20\x20//\x204bits'+',\x20each\x20bit'+'\x20enables\x20a'+'\x20channel\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'cookieChan'+'nelMask\x20=\x20'+'vec4(uvec4'+'(cookieFla'+'gs)\x20&\x20uvec'+'4(1u,\x202u,\x20'+'4u,\x208u));\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.cookieCha'+'nnelMask\x20='+'\x20step(1.0,'+'\x20clusterLi'+'ghtData.co'+'okieChanne'+'lMask);\x20\x20/'+'/\x20Normaliz'+'e\x20to\x200.0\x20o'+'r\x201.0\x0a}\x0a\x0av'+'oid\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20Cluster'+'LightData\x20'+'light,\x20\x0a\x20\x20'+'\x20\x20vec3\x20wor'+'ldNormal,\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'viewDir,\x20\x0a'+'\x20\x20\x20\x20vec3\x20r'+'eflectionD'+'ir,\x0a#if\x20de'+'fined(LIT_'+'CLEARCOAT)'+'\x0a\x20\x20\x20\x20vec3\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20')+('\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20mat3\x20tb'+'n,\x20\x0a#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20vec'+'3\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20vec3\x20cl'+'earcoat_wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20float'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20float\x20sh'+'een_gloss,'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce_intensi'+'ty\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20vec'+'3(1.0);\x0a\x20\x20'+'\x20\x20float\x20di'+'ffuseAtten'+'uation\x20=\x201'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20fallof'+'fAttenuati'+'on\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20omn'+'i\x20part\x20of\x20'+'the\x20light\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ightDirW\x20='+'\x20evalOmniL'+'ight(light'+'.position)'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'ormW\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20')+('else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fall'+'offAttenua'+'tion\x20=\x20get'+'FalloffLin'+'ear(light.'+'range,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20getFa'+'lloffInvSq'+'uared(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_AREALIGH'+'TS\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shape\x20!='+'\x20{LIGHTSHA'+'PE_PUNCTUA'+'L})\x20{\x20//\x20a'+'rea\x20light\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20hand'+'le\x20light\x20s'+'hape\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20diffuse'+'Attenuatio'+'n\x20=\x20getRec'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirW,\x20lig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'DISK})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getD'+'iskLightDi'+'ffuse(worl'+'dNormal,\x20v'+'iewDir,\x20li'+'ghtDirW,\x20l'+'ightDirNor'+'mW)\x20*\x2016.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20{\x20//\x20sphe'+'re\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getSphereL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20g'+'etLightDif'+'fuse(world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+');\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spot'+'\x20light\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtSpot(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20*=\x20'+'getSpotEff'+'ect(light.'+'direction,'+'\x20light.inn'+'erConeAngl'+'eCos,\x20ligh'+'t.outerCon'+'eAngleCos,'+'\x20lightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_COOK'+'IES)\x20||\x20de'+'fined(CLUS'+'TER_SHADOW'+'S)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20shadow'+'\x20/\x20cookie\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shadowIn'+'tensity\x20>\x20'+'0.0\x20||\x20lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'ared\x20shado'+'w\x20/\x20cookie'+'\x20data\x20depe'+'nds\x20on\x20lig'+'ht\x20type\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightOmniAt'+'lasViewpor'+'t(light);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20shadowTex'+'tureResolu'+'tion\x20=\x20sha'+'dowAtlasPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadowEdge'+'Pixels\x20=\x20s'+'hadowAtlas'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_COOKIES\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'cookie\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20de'+'codeCluste'+'rLightCook'+'ieData(lig'+'ht);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.isSp'+'ot)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'cookieAtte'+'nuation\x20=\x20'+'getCookie2'+'DClustered'+'(TEXTURE_P'+'ASS(cookie'+'AtlasTextu'+'re),\x20light'+'Projection'+'Matrix,\x20vP'+'ositionW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20cookieAt'+'tenuation\x20'+'=\x20getCooki'+'eCubeClust'+'ered(TEXTU'+'RE_PASS(co'+'okieAtlasT'+'exture),\x20l'+'ightDirW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask,\x20sh'+'adowTextur'+'eResolutio'+'n,\x20shadowE'+'dgePixels,'+'\x20light.omn'+'iAtlasView'+'port);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20shadow\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shadow'+'Intensity\x20'+'>\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d')+('ecodeClust'+'erLightSha'+'dowData(li'+'ght);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20shadowPa'+'rams\x20=\x20vec'+'4(shadowTe'+'xtureResol'+'ution,\x20lig'+'ht.shadowN'+'ormalBias,'+'\x20light.sha'+'dowBias,\x201'+'.0\x20/\x20light'+'.range);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'isSpot)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ot\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'hadowCoord'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat'+'rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F1)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CF1(SHADOW'+'MAP_PASS(s'+'hadowAtlas'+'Texture),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20de'+'fined(CLUS'+'TER_SHADOW'+'_TYPE_PCF3'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_PASS(sha'+'dowAtlasTe'+'xture),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#elif\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF5('+'SHADOWMAP_'+'PASS(shado'+'wAtlasText'+'ure),\x20shad'+'owCoord,\x20s'+'hadowParam')+('s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCSS)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20shadow\x20='+'\x20getShadow'+'SpotCluste'+'redPCSS(SH'+'ADOWMAP_PA'+'SS(shadowA'+'tlasTextur'+'e),\x20shadow'+'Coord,\x20sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20m'+'ix(1.0,\x20sh'+'adow,\x20ligh'+'t.shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20om'+'ni\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20d'+'ir\x20=\x20norma'+'lOffsetPoi'+'ntShadow(s'+'hadowParam'+'s,\x20light.p'+'osition,\x20l'+'ightDirW,\x20'+'lightDirNo'+'rmW,\x20geome'+'tricNormal'+');\x20\x20//\x20nor'+'malBias\x20ad'+'justed\x20for'+'\x20distance\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_SHADO'+'W_TYPE_PCF'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20sha'+'dow\x20=\x20getS'+'hadowOmniC'+'lusteredPC'+'F1(SHADOWM'+'AP_PASS(sh'+'adowAtlasT'+'exture),\x20s'+'hadowParam'+'s,\x20light.o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20dir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#eli'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF3)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadowOm'+'niClustere'+'dPCF3(SHAD'+'OWMAP_PASS'+'(shadowAtl'+'asTexture)'+',\x20shadowPa'+'rams,\x20ligh'+'t.omniAtla'+'sViewport,')+('\x20shadowEdg'+'ePixels,\x20d'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20shadow\x20'+'=\x20getShado'+'wOmniClust'+'eredPCF5(S'+'HADOWMAP_P'+'ASS(shadow'+'AtlasTextu'+'re),\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20*=\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20areaDi'+'ffuse\x20=\x20(d'+'iffuseAtte'+'nuation\x20*\x20'+'falloffAtt'+'enuation)\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaDiffuse\x20'+'=\x20mix(area'+'Diffuse,\x20v'+'ec3(0),\x20dL'+'TCSpecFres'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20dif'+'fuse\x20-\x20it\x20'+'does\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20')+('into\x20specu'+'lar\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20a'+'reaDiffuse'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20and\x20clear'+'\x20coat\x20are\x20'+'material\x20s'+'ettings\x20an'+'d\x20get\x20incl'+'uded\x20by\x20a\x20'+'define\x20bas'+'ed\x20on\x20the\x20'+'material\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20specular'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20areaLig'+'htSpecular'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'RECT})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecular\x20=\x20g'+'etRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20area'+'LightSpecu'+'lar\x20=\x20getD'+'iskLightSp'+'ecular(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x20//\x20sp'+'here\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getSp'+'hereLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp'+'ecFres\x20*\x20a'+'reaLightSp'+'ecular\x20*\x20f'+'alloffAtte'+'nuation\x20*\x20'+'light.colo'+'r\x20*\x20cookie'+'Attenuatio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x20clear'+'\x20coat\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20areaLigh'+'tSpecularC')+('C;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shape\x20'+'==\x20{LIGHTS'+'HAPE_RECT}'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getRectLig'+'htSpecular'+'(clearcoat'+'_worldNorm'+'al,\x20viewDi'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(light'+'.shape\x20==\x20'+'{LIGHTSHAP'+'E_DISK})\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'arCC\x20=\x20get'+'DiskLightS'+'pecular(cl'+'earcoat_wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x20'+'//\x20sphere\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaLi'+'ghtSpecula'+'rCC\x20=\x20getS'+'phereLight'+'Specular(c'+'learcoat_w'+'orldNormal'+',\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20+=\x20ccLTCS'+'pecFres\x20*\x20'+'areaLightS'+'pecularCC\x20'+'*\x20falloffA'+'ttenuation'+'\x20*\x20light.c'+'olor\x20\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20{\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'unctualDif'+'fuse\x20=\x20fal'+'loffAttenu'+'ation\x20*\x20li'+'ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'CLUSTER_AR'+'EALIGHTS)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20punctual')+('Diffuse\x20=\x20'+'mix(punctu'+'alDiffuse,'+'\x20vec3(0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20punctu'+'alDiffuse;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20and\x20cle'+'ar\x20coat\x20ar'+'e\x20material'+'\x20settings\x20'+'and\x20get\x20in'+'cluded\x20by\x20'+'a\x20define\x20b'+'ased\x20on\x20th'+'e\x20material'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20halfD'+'ir\x20=\x20norma'+'lize(-ligh'+'tDirNormW\x20'+'+\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR_FRESNEL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htSpecular'+'(halfDir,\x20'+'reflection'+'Dir,\x20world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation\x20*'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'viewDir,\x20h'+'alfDir),\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descence_i'+'ntensity\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecular('+'halfDir,\x20c'+'learcoatRe'+'flectionDi'+'r,\x20clearco'+'at_worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'clearcoat_'+'gloss,\x20tbn'+')\x20*\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation\x20*\x20g'+'etFresnelC'+'C(dot(view'+'Dir,\x20halfD'+'ir));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20getLi'+'ghtSpecula'+'r(halfDir,'+'\x20clearcoat'+'Reflection'+'Dir,\x20clear'+'coat_world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20clearcoa'+'t_gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HEEN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec')+('ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'ir,\x20worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNormW,'+'\x20sheen_glo'+'ss)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20Wri'+'te\x20to\x20glob'+'al\x20attenua'+'tion\x20value'+'s\x20(for\x20lig'+'htmapper)\x0a'+'\x20\x20\x20\x20dAtten'+'\x20=\x20falloff'+'Attenuatio'+'n;\x0a\x20\x20\x20\x20dLi'+'ghtDirNorm'+'W\x20=\x20lightD'+'irNormW;\x0a}'+'\x0a\x0avoid\x20eva'+'luateClust'+'erLight(\x0a\x20'+'\x20\x20\x20float\x20l'+'ightIndex,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20worldNorm'+'al,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20viewDi'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20reflect'+'ionDir,\x20\x0a#'+'if\x20defined'+'(LIT_CLEAR'+'COAT)\x0a\x20\x20\x20\x20'+'vec3\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'float\x20glos'+'s,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20specula'+'rity,\x20\x0a\x20\x20\x20'+'\x20vec3\x20geom'+'etricNorma'+'l,\x20\x0a\x20\x20\x20\x20ma'+'t3\x20tbn,\x20\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20ve'+'c3\x20clearco'+'at_worldNo'+'rmal,\x0a\x20\x20\x20\x20'+'float\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20flo'+'at\x20sheen_g'+'loss,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escence_in'+'tensity\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'decode\x20cor'+'e\x20light\x20da'+'ta\x20from\x20te'+'xtures\x0a\x20\x20\x20'+'\x20ClusterLi'+'ghtData\x20cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(cluster'+'LightData,'+'\x20lightInde'+'x);\x0a\x0a\x20\x20\x20\x20/'+'/\x20evaluate'+'\x20light\x20if\x20'+'it\x20uses\x20ac'+'cepted\x20lig'+'ht\x20mask\x0a\x20\x20'+'\x20\x20#ifdef\x20C')+('LUSTER_MES'+'H_DYNAMIC_'+'LIGHTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20bool\x20'+'acceptLigh'+'tMask\x20=\x20cl'+'usterLight'+'Data.isDyn'+'amic;\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20bool\x20a'+'cceptLight'+'Mask\x20=\x20clu'+'sterLightD'+'ata.isLigh'+'tmapped;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20if\x20(a'+'cceptLight'+'Mask)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clusterLi'+'ghtData,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20worldNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vi'+'ewDir,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'reflection'+'Dir,\x20\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x20\x0a'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_worldNorm'+'al,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sheen'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a}\x0a\x0avoid'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20reflecti'+'onDir,\x20\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20v'+'ec3\x20clearc'+'oatReflect'+'ionDir,\x0a#e'+'ndif\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20mat'+'3\x20tbn,\x20\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a#end')+('if\x0a\x20\x20\x20\x20vec'+'3\x20clearcoa'+'t_worldNor'+'mal,\x0a\x20\x20\x20\x20f'+'loat\x20clear'+'coat_gloss'+',\x0a\x20\x20\x20\x20floa'+'t\x20sheen_gl'+'oss,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scence_int'+'ensity\x0a)\x20{'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'kip\x20lights'+'\x20if\x20no\x20lig'+'hts\x20at\x20all'+'\x0a\x20\x20\x20\x20if\x20(c'+'lusterSkip'+'\x20>\x200.5)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20positi'+'on\x20to\x203d\x20i'+'nteger\x20cel'+'l\x20cordinat'+'es\x20in\x20the\x20'+'cluster\x20st'+'ructure\x0a\x20\x20'+'\x20\x20vec3\x20cel'+'lCoords\x20=\x20'+'floor((vPo'+'sitionW\x20-\x20'+'clusterBou'+'ndsMin)\x20*\x20'+'clusterCel'+'lsCountByB'+'oundsSize)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'no\x20lightin'+'g\x20when\x20cel'+'l\x20coordina'+'te\x20is\x20out\x20'+'of\x20range\x0a\x20'+'\x20\x20\x20if\x20(!(a'+'ny(lessTha'+'n(cellCoor'+'ds,\x20vec3(0'+'.0)))\x20||\x20a'+'ny(greater'+'ThanEqual('+'cellCoords'+',\x20clusterC'+'ellsMax)))'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cell'+'\x20index\x20(ma'+'pping\x20from'+'\x203d\x20cell\x20c'+'oordinates'+'\x20to\x20linear'+'\x20memory)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20cellInd'+'ex\x20=\x20dot(c'+'lusterCell'+'sDot,\x20cell'+'Coords);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20convert\x20c'+'ell\x20index\x20'+'to\x20uv\x20coor'+'dinates\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20clusterV'+'\x20=\x20floor(c'+'ellIndex\x20*'+'\x20clusterTe'+'xtureSize.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20cl'+'usterU\x20=\x20c'+'ellIndex\x20-'+'\x20(clusterV'+'\x20*\x20cluster'+'TextureSiz'+'e.x);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20lo'+'op\x20over\x20ma'+'ximum\x20numb'+'er\x20of\x20ligh'+'t\x20cells\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20light'+'CellIndex\x20'+'=\x200;\x20light'+'CellIndex\x20'+'<\x20clusterM'+'axCells;\x20l'+'ightCellIn')+('dex++)\x20{\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20using'+'\x20a\x20single\x20'+'channel\x20te'+'xture\x20with'+'\x20data\x20in\x20r'+'ed\x20channel'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20l'+'ightIndex\x20'+'=\x20texelFet'+'ch(cluster'+'WorldTextu'+'re,\x20ivec2('+'int(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20clusterV'+'),\x200).x;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'tIndex\x20<=\x20'+'0.0)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20break;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20evaluateC'+'lusterLigh'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightIndex\x20'+'*\x20255.0,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel,\x0a#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20cl'+'earcoat_gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sheen_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),RC='\x0avec3\x20comb'+'ineColor(v'+'ec3\x20albedo'+',\x20vec3\x20she'+'enSpecular'+'ity,\x20float'+'\x20clearcoat'+'Specularit'+'y)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20ret\x20=\x20'+'vec3(0);\x0a#'+'ifdef\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20ret\x20'+'+=\x20(dDiffu'+'seLight\x20-\x20'+'light_glob'+'alAmbient)'+'\x20*\x20albedo\x20'+'+\x20material'+'_ambient\x20*'+'\x20light_glo'+'balAmbient'+';\x0a#else\x0a\x20\x20'+'\x20\x20ret\x20+=\x20a'+'lbedo\x20*\x20dD'+'iffuseLigh'+'t;\x0a#endif\x0a'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20ret\x20+='+'\x20dSpecular'+'Light;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_REFLE'+'CTIONS\x0a\x20\x20\x20'+'\x20ret\x20+=\x20dR'+'eflection.'+'rgb\x20*\x20dRef'+'lection.a;'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'float\x20shee'+'nScaling\x20='+'\x201.0\x20-\x20max'+'(max(sheen'+'Specularit'+'y.r,\x20sheen'+'Specularit'+'y.g),\x20shee'+'nSpeculari'+'ty.b)\x20*\x200.'+'157;\x0a\x20\x20\x20\x20r'+'et\x20=\x20ret\x20*'+'\x20sheenScal'+'ing\x20+\x20(sSp'+'ecularLigh'+'t\x20+\x20sRefle'+'ction.rgb)'+'\x20*\x20sheenSp'+'ecularity;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20float\x20c'+'learCoatSc'+'aling\x20=\x201.'+'0\x20-\x20ccFres'+'nel\x20*\x20clea'+'rcoatSpecu'+'larity;\x0a\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20clearC'+'oatScaling'+'\x20+\x20(ccSpec'+'ularLight\x20'+'+\x20ccReflec'+'tion)\x20*\x20cl'+'earcoatSpe'+'cularity;\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20return\x20r'+'et;\x0a}\x0a',OC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blitT'+'exture;\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20texture'+'2D(blitTex'+'ture,\x20uv0)'+';\x0a\x20\x20\x20\x20}\x0a',FC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'erCube\x20bli'+'tTexture;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20inv'+'ViewProj;\x0a'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20vec4('+'uv0\x20*\x202.0\x20'+'-\x201.0,\x200.5'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20worldPos\x20'+'=\x20invViewP'+'roj\x20*\x20proj'+'Pos;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20te'+'xtureCube('+'blitTextur'+'e,\x20worldPo'+'s.xyz);\x0a\x20\x20'+'\x20\x20}\x0a',NC='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uv0'+'.y\x20=\x201.0\x20-'+'\x20uv0.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20}\x0a',kC='\x0a//\x20light\x20'+'cookie\x20fun'+'ctionality'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0avec4'+'\x20getCookie'+'2D(sampler'+'2D\x20tex,\x20ma'+'t4\x20transfo'+'rm,\x20float\x20'+'intensity)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20projPos\x20'+'=\x20transfor'+'m\x20*\x20vec4(v'+'PositionW,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'y\x20/=\x20projP'+'os.w;\x0a\x20\x20\x20\x20'+'return\x20mix'+'(vec4(1.0)'+',\x20texture2'+'D(tex,\x20pro'+'jPos.xy),\x20'+'intensity)'+';\x0a}\x0a\x0avec4\x20'+'getCookie2'+'DClip(samp'+'ler2D\x20tex,'+'\x20mat4\x20tran'+'sform,\x20flo'+'at\x20intensi'+'ty)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20trans'+'form\x20*\x20vec'+'4(vPositio'+'nW,\x201.0);\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20/=\x20pr'+'ojPos.w;\x0a\x20'+'\x20\x20\x20if\x20(pro'+'jPos.x\x20<\x200'+'.0\x20||\x20proj'+'Pos.x\x20>\x201.'+'0\x20||\x20projP'+'os.y\x20<\x200.0'+'\x20||\x20projPo'+'s.y\x20>\x201.0\x20'+'||\x20projPos'+'.z\x20<\x200.0)\x20'+'return\x20vec'+'4(0.0);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(vec4(1.'+'0),\x20textur'+'e2D(tex,\x20p'+'rojPos.xy)'+',\x20intensit'+'y);\x0a}\x0a\x0avec'+'4\x20getCooki'+'e2DXform(s'+'ampler2D\x20t'+'ex,\x20mat4\x20t'+'ransform,\x20'+'float\x20inte'+'nsity,\x20vec'+'4\x20cookieMa'+'trix,\x20vec2'+'\x20cookieOff'+'set)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20proj'+'Pos\x20=\x20tran'+'sform\x20*\x20ve'+'c4(vPositi'+'onW,\x201.0);'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20/=\x20p'+'rojPos.w;\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20+=\x20co'+'okieOffset'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookie2D'+'ClipXform('+('sampler2D\x20'+'tex,\x20mat4\x20'+'transform,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieM'+'atrix,\x20vec'+'2\x20cookieOf'+'fset)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'jPos\x20=\x20tra'+'nsform\x20*\x20v'+'ec4(vPosit'+'ionW,\x201.0)'+';\x0a\x20\x20\x20\x20proj'+'Pos.xy\x20/=\x20'+'projPos.w;'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20+=\x20c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20if\x20'+'(projPos.x'+'\x20<\x200.0\x20||\x20'+'projPos.x\x20'+'>\x201.0\x20||\x20p'+'rojPos.y\x20<'+'\x200.0\x20||\x20pr'+'ojPos.y\x20>\x20'+'1.0\x20||\x20pro'+'jPos.z\x20<\x200'+'.0)\x20return'+'\x20vec4(0.0)'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookieCu'+'be(sampler'+'Cube\x20tex,\x20'+'mat4\x20trans'+'form,\x20floa'+'t\x20intensit'+'y)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20mix('+'vec4(1.0),'+'\x20textureCu'+'be(tex,\x20dL'+'ightDirNor'+'mW\x20*\x20mat3('+'transform)'+'),\x20intensi'+'ty);\x0a}\x0a'),UC='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20envBoxM'+'in;\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20envBoxMax'+';\x0a#endif\x0a\x0a'+'vec3\x20cubeM'+'apProject('+'vec3\x20nrdir'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_CUB'+'EMAP_PROJE'+'CTION\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20c'+'ubeMapRota'+'te(nrdir);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20LIT_CUBEM'+'AP_PROJECT'+'ION\x20==\x20BOX'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'nrdir\x20=\x20cu'+'beMapRotat'+'e(nrdir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20rbmax\x20'+'=\x20(envBoxM'+'ax\x20-\x20vPosi'+'tionW)\x20/\x20n'+'rdir;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20r'+'bmin\x20=\x20(en'+'vBoxMin\x20-\x20'+'vPositionW'+')\x20/\x20nrdir;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20rbmin'+'max\x20=\x20mix('+'rbmin,\x20rbm'+'ax,\x20vec3(g'+'reaterThan'+'(nrdir,\x20ve'+'c3(0.0))))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20fa\x20='+'\x20min(min(r'+'bminmax.x,'+'\x20rbminmax.'+'y),\x20rbminm'+'ax.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20posonbox\x20'+'=\x20vPositio'+'nW\x20+\x20nrdir'+'\x20*\x20fa;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envBoxPos\x20'+'=\x20(envBoxM'+'in\x20+\x20envBo'+'xMax)\x20*\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20no'+'rmalize(po'+'sonbox\x20-\x20e'+'nvBoxPos);'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',BC='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20mat3\x20cu'+'beMapRotat'+'ionMatrix;'+'\x0a#endif\x0a\x0av'+'ec3\x20cubeMa'+'pRotate(ve'+'c3\x20refDir)'+'\x20{\x0a#ifdef\x20'+'CUBEMAP_RO'+'TATION\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'#else\x0a\x20\x20\x20\x20'+'return\x20ref'+'Dir;\x0a#endi'+'f\x0a}\x0a',zC='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0agl_FragCo'+'lor\x20=\x20vec4'+'(litArgs_a'+'lbedo\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_WORLD'+'_NORMAL_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(litArgs'+'_worldNorm'+'al\x20*\x200.5\x20+'+'\x200.5,\x201.0)'+';\x0a#endif\x0a\x0a'+'#ifdef\x20DEB'+'UG_OPACITY'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(vec3'+'(litArgs_o'+'pacity)\x20,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_SPE'+'CULARITY_P'+'ASS\x0agl_Fra'+'gColor\x20=\x20v'+'ec4(litArg'+'s_specular'+'ity,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_GLOSS_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(vec3(li'+'tArgs_glos'+'s)\x20,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_METALNES'+'S_PASS\x0agl_'+'FragColor\x20'+'=\x20vec4(vec'+'3(litArgs_'+'metalness)'+'\x20,\x201.0);\x0a#'+'endif\x0a\x0a#if'+'def\x20DEBUG_'+'AO_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ve'+'c3(litArgs'+'_ao)\x20,\x201.0'+');\x0a#endif\x0a'+'\x0a#ifdef\x20DE'+'BUG_EMISSI'+'ON_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ga'+'mmaCorrect'+'Output(lit'+'Args_emiss'+'ion),\x201.0)'+';\x0a#endif\x0a',VC='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0ali'+'tArgs_albe'+'do\x20=\x20vec3('+'0.5);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_UV0'+'_PASS\x0a#ifd'+'ef\x20VARYING'+'_VUV0\x0alitA'+'rgs_albedo'+'\x20=\x20vec3(vU'+'v0,\x200);\x0a#e'+'lse\x0alitArg'+'s_albedo\x20='+'\x20vec3(0);\x0a'+'#endif\x0a#en'+'dif\x0a',GC='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0avec3\x20'+'decodeLine'+'ar(vec4\x20ra'+'w)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw.'+'rgb;\x0a}\x0a\x0afl'+'oat\x20decode'+'Gamma(floa'+'t\x20raw)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'pow(raw,\x202'+'.2);\x0a}\x0a\x0ave'+'c3\x20decodeG'+'amma(vec3\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w(raw,\x20vec'+'3(2.2));\x0a}'+'\x0a\x0avec3\x20dec'+'odeGamma(v'+'ec4\x20raw)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(raw.'+'xyz,\x20vec3('+'2.2));\x0a}\x0a\x0a'+'vec3\x20decod'+'eRGBM(vec4'+'\x20raw)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20col'+'or\x20=\x20(8.0\x20'+'*\x20raw.a)\x20*'+'\x20raw.rgb;\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0av'+'ec3\x20decode'+'RGBP(vec4\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20colo'+'r\x20=\x20raw.rg'+'b\x20*\x20(-raw.'+'a\x20*\x207.0\x20+\x20'+'8.0);\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBE'+'(vec4\x20raw)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(raw.a\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec3(0.0'+',\x200.0,\x200.0'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20raw.xyz\x20*'+'\x20pow(2.0,\x20'+'raw.w\x20*\x2025'+'5.0\x20-\x20128.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0avec4\x20pa'+'ssThrough('+'vec4\x20raw)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20raw;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'Z(vec4\x20nma'+'p)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20nmap'+'.xyz\x20*\x202.0'+'\x20-\x201.0;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'(vec4\x20nmap'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20normal;'+'\x0a\x20\x20\x20\x20norma'+'l.xy\x20=\x20nma'+'p.wy\x20*\x202.0'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20normal.z'+'\x20=\x20sqrt(1.'+'0\x20-\x20clamp('+'dot(normal'+'.xy,\x20norma'+'l.xy),\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20return\x20'+'normal;\x0a}\x0a'+'\x0a#endif\x0a',HC='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0avec3\x20'+'detailMode'+'_mul(vec3\x20'+'c1,\x20vec3\x20c'+'2)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20c1\x20*'+'\x20c2;\x0a}\x0a\x0ave'+'c3\x20detailM'+'ode_add(ve'+'c3\x20c1,\x20vec'+'3\x20c2)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'1\x20+\x20c2;\x0a}\x0a'+'\x0a//\x20https:'+'//en.wikip'+'edia.org/w'+'iki/Blend_'+'modes#Scre'+'en\x0avec3\x20de'+'tailMode_s'+'creen(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x201.0'+'\x20-\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2);\x0a}\x0a\x0a/'+'/\x20https://'+'en.wikiped'+'ia.org/wik'+'i/Blend_mo'+'des#Overla'+'y\x0avec3\x20det'+'ailMode_ov'+'erlay(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(1.0\x20-\x202.0'+'\x20*\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2),\x202.0\x20'+'*\x20c1\x20*\x20c2,'+'\x20step(c1,\x20'+'vec3(0.5))'+');\x0a}\x0a\x0avec3'+'\x20detailMod'+'e_min(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20min'+'(c1,\x20c2);\x0a'+'}\x0a\x0avec3\x20de'+'tailMode_m'+'ax(vec3\x20c1'+',\x20vec3\x20c2)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20max(c1'+',\x20c2);\x0a}\x0a\x0a'+'#endif\x0a',WC='\x0auniform\x20v'+'ec3\x20materi'+'al_diffuse'+';\x0a\x0a#ifdef\x20'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'detailMode'+'sPS\x22\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20mate'+'rial_diffu'+'se.rgb;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_DIFFUS'+'E_TEXTURE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20albedoT'+'exture\x20=\x20{'+'STD_DIFFUS'+'E_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_DIF'+'FUSE_TEXTU'+'RE_NAME},\x20'+'{STD_DIFFU'+'SE_TEXTURE'+'_UV},\x20text'+'ureBias)).'+'{STD_DIFFU'+'SE_TEXTURE'+'_CHANNEL};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSEDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'albedoDeta'+'il\x20=\x20{STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_DECODE}('+'texture2DB'+'ias({STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'DETAIL_TEX'+'TURE_UV},\x20'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20*=\x20albe'+'doTexture;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSE_VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dAlbedo\x20*'+'=\x20gammaCor'+'rectInput('+'saturate(v'+'VertexColo'+'r.{STD_DIF'+'FUSE_VERTE'+'X_CHANNEL}'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',$C='\x0auniform\x20v'+'ec3\x20materi'+'al_emissiv'+'e;\x0auniform'+'\x20float\x20mat'+'erial_emis'+'siveIntens'+'ity;\x0a\x0avoid'+'\x20getEmissi'+'on()\x20{\x0a\x20\x20\x20'+'\x20dEmission'+'\x20=\x20materia'+'l_emissive'+'\x20*\x20materia'+'l_emissive'+'Intensity;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_TEXT'+'URE\x0a\x20\x20\x20\x20dE'+'mission\x20*='+'\x20{STD_EMIS'+'SIVE_TEXTU'+'RE_DECODE}'+'(texture2D'+'Bias({STD_'+'EMISSIVE_T'+'EXTURE_NAM'+'E},\x20{STD_E'+'MISSIVE_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'EMISSIVE_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_EMISSI'+'VE_VERTEX\x0a'+'\x20\x20\x20\x20dEmiss'+'ion\x20*=\x20gam'+'maCorrectI'+'nput(satur'+'ate(vVerte'+'xColor.{ST'+'D_EMISSIVE'+'_VERTEX_CH'+'ANNEL}));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a',XC='\x0avec4\x20enco'+'deLinear(v'+'ec3\x20source'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'source,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeGa'+'mma(vec3\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec4(pow(s'+'ource\x20+\x200.'+'0000001,\x20v'+'ec3(1.0\x20/\x20'+'2.2)),\x201.0'+');\x0a}\x0a\x0avec4'+'\x20encodeRGB'+'M(vec3\x20sou'+'rce)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20result;'+'\x0a\x20\x20\x20\x20resul'+'t.rgb\x20=\x20po'+'w(source.r'+'gb,\x20vec3(0'+'.5));\x0a\x20\x20\x20\x20'+'result.rgb'+'\x20*=\x201.0\x20/\x20'+'8.0;\x0a\x0a\x20\x20\x20\x20'+'result.a\x20='+'\x20saturate('+'\x20max(\x20max('+'\x20result.r,'+'\x20result.g\x20'+'),\x20max(\x20re'+'sult.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20)\x20);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20ceil(res'+'ult.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x0a\x20\x20\x20\x20r'+'esult.rgb\x20'+'/=\x20result.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0avec4\x20'+'encodeRGBP'+'(vec3\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'//\x20convert'+'\x20incoming\x20'+'linear\x20to\x20'+'gamma(ish)'+'\x0a\x20\x20\x20\x20vec3\x20'+'gamma\x20=\x20po'+'w(source,\x20'+'vec3(0.5))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'the\x20maximu'+'m\x20componen'+'t\x20clamped\x20'+'to\x201..8\x0a\x20\x20'+'\x20\x20float\x20ma'+'xVal\x20=\x20min'+'(8.0,\x20max('+'1.0,\x20max(g'+'amma.x,\x20ma'+'x(gamma.y,'+'\x20gamma.z))'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20storage\x20'+'factor\x0a\x20\x20\x20'+'\x20float\x20v\x20='+'\x201.0\x20-\x20((m'+'axVal\x20-\x201.'+'0)\x20/\x207.0);'+'\x0a\x0a\x20\x20\x20\x20//\x20r'+'ound\x20the\x20v'+'alue\x20for\x20s'+'torage\x20in\x20'+'8bit\x20chann'+'el\x0a\x20\x20\x20\x20v\x20='+'\x20ceil(v\x20*\x20'+'255.0)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(gamma\x20/'+'\x20(-v\x20*\x207.0'+'\x20+\x208.0),\x20v'+');\x20\x20\x20\x20\x0a}\x0a\x0a'+'vec4\x20encod'+'eRGBE(vec3'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20float'+('\x20maxVal\x20=\x20'+'max(source'+'.x,\x20max(so'+'urce.y,\x20so'+'urce.z));\x0a'+'\x20\x20\x20\x20if\x20(ma'+'xVal\x20<\x201e-'+'32)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec4(0,\x200'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20e\x20=\x20'+'ceil(log2('+'maxVal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec4('+'source\x20/\x20p'+'ow(2.0,\x20e)'+',\x20(e\x20+\x20128'+'.0)\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),qC='\x0a\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20combin'+'eColor(lit'+'Args_albed'+'o,\x20litArgs'+'_sheen_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_sp'+'ecularity)'+';\x0a\x0a\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20+=\x20lit'+'Args_emiss'+'ion;\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20=\x20ad'+'dFog(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20ton'+'eMap(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20gam'+'maCorrectO'+'utput(gl_F'+'ragColor.r'+'gb);\x0a',jC='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20floa'+'t\x20atlasSiz'+'e\x20=\x20512.0;'+'\x0aconst\x20flo'+'at\x20seamSiz'+'e\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0avec2\x20ma'+'pUv(vec2\x20u'+'v,\x20vec4\x20re'+'ct)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(mix(rect'+'.x\x20+\x20seamS'+'ize,\x20rect.'+'x\x20+\x20rect.z'+'\x20-\x20seamSiz'+'e,\x20uv.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mix('+'rect.y\x20+\x20s'+'eamSize,\x20r'+'ect.y\x20+\x20re'+'ct.w\x20-\x20sea'+'mSize,\x20uv.'+'y));\x0a}\x0a\x0a//'+'\x20map\x20a\x20nor'+'malized\x20eq'+'uirect\x20UV\x20'+'and\x20roughn'+'ess\x20level\x20'+'to\x20the\x20cor'+'rect\x20atlas'+'\x20rect.\x0avec'+'2\x20mapRough'+'nessUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'0,\x201.0\x20-\x20t'+',\x20t,\x20t\x20*\x200'+'.5));\x0a}\x0a\x0a/'+'/\x20map\x20shin'+'y\x20level\x20UV'+'\x0avec2\x20mapS'+'hinyUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'1.0\x20-\x20t,\x201'+'.0\x20-\x20t,\x20t,'+'\x20t\x20*\x200.5))'+';\x0a}\x0a\x0a#endi'+'f\x0a',YC='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20float\x20sky'+'boxIntensi'+'ty;\x0a#endif'+'\x0a\x0avec3\x20pro'+'cessEnviro'+'nment(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20skybo'+'xIntensity'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',KC='\x0afloat\x20get'+'FalloffWin'+'dow(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'sqrDist\x20=\x20'+'dot(lightD'+'ir,\x20lightD'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20invRa'+'dius\x20=\x201.0'+'\x20/\x20lightRa'+'dius;\x0a\x20\x20\x20\x20'+'return\x20squ'+'are(satura'+'te(1.0\x20-\x20s'+'quare(sqrD'+'ist\x20*\x20squa'+'re(invRadi'+'us))));\x0a}\x0a'+'\x0afloat\x20get'+'FalloffInv'+'Squared(fl'+'oat\x20lightR'+'adius,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20sqrDis'+'t\x20=\x20dot(li'+'ghtDir,\x20li'+'ghtDir);\x0a\x20'+'\x20\x20\x20float\x20f'+'alloff\x20=\x201'+'.0\x20/\x20(sqrD'+'ist\x20+\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20invRadiu'+'s\x20=\x201.0\x20/\x20'+'lightRadiu'+'s;\x0a\x0a\x20\x20\x20\x20fa'+'lloff\x20*=\x201'+'6.0;\x0a\x20\x20\x20\x20f'+'alloff\x20*=\x20'+'square(sat'+'urate(1.0\x20'+'-\x20square(s'+'qrDist\x20*\x20s'+'quare(invR'+'adius))));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20falloff'+';\x0a}\x0a',ZC='\x0afloat\x20get'+'FalloffLin'+'ear(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20length'+'(lightDir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20max(((l'+'ightRadius'+'\x20-\x20d)\x20/\x20li'+'ghtRadius)'+',\x200.0);\x0a}\x0a',QC='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x0ave'+'c4\x20float2u'+'int(float\x20'+'value)\x20{\x0a\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20fl'+'oatBitsToU'+'int(value)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20vec4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((intBit'+'s\x20>>\x2024u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((intBits'+'\x20>>\x2016u)\x20&'+'\x200xFFu)\x20/\x20'+'255.0,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'((intBits\x20'+'>>\x208u)\x20&\x200'+'xFFu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(i'+'ntBits\x20&\x200'+'xFFu)\x20/\x2025'+'5.0\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0a//\x20dec'+'ode\x20RGBA8\x20'+'value\x20to\x20f'+'loat\x0afloat'+'\x20uint2floa'+'t(vec4\x20val'+'ue)\x20{\x0a\x20\x20\x20\x20'+'uint\x20intBi'+'ts\x20=\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20(uint('+'value.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(value.g\x20*'+'\x20255.0)\x20<<'+'\x2016u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20(uin'+'t(value.b\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uint'+'(value.a\x20*'+'\x20255.0);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20uintBitsT'+'oFloat(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0av'+'ec4\x20float2'+'vec4(float'+'\x20value)\x20{\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(CAPS'+'_TEXTURE_F'+'LOAT_RENDE'+'RABLE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4(val'+'ue,\x201.0,\x201'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20float'+'2uint(valu'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0a#e'+'ndif\x20//\x20FL'+'OAT_AS_UIN'+'T\x0a',JC='\x0a\x0afloat\x20dB'+'lendModeFo'+'gFactor\x20=\x20'+'1.0;\x0a\x0a#if\x20'+'(FOG\x20!=\x20NO'+'NE)\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20fog_color'+';\x0a\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20f'+'og_start;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20fog_end;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20fog_den'+'sity;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afloat'+'\x20getFogFac'+'tor()\x20{\x0a\x0a\x20'+'\x20\x20\x20float\x20d'+'epth\x20=\x20gl_'+'FragCoord.'+'z\x20/\x20gl_Fra'+'gCoord.w;\x0a'+'\x20\x20\x20\x20float\x20'+'fogFactor\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20#if\x20(FOG'+'\x20==\x20LINEAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fogFactor\x20'+'=\x20(fog_end'+'\x20-\x20depth)\x20'+'/\x20(fog_end'+'\x20-\x20fog_sta'+'rt);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fogF'+'actor\x20=\x20ex'+'p(-depth\x20*'+'\x20fog_densi'+'ty);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP2)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fog'+'Factor\x20=\x20e'+'xp(-depth\x20'+'*\x20depth\x20*\x20'+'fog_densit'+'y\x20*\x20fog_de'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(fog'+'Factor,\x200.'+'0,\x201.0);\x0a}'+'\x0a\x0avec3\x20add'+'Fog(vec3\x20c'+'olor)\x20{\x0a\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'fog_color\x20'+'*\x20dBlendMo'+'deFogFacto'+'r,\x20color,\x20'+'getFogFact'+'or());\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'color;\x0a}\x0a',e1='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0ave'+'c3\x20getFres'+'nel(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20c'+'osTheta,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20specu'+'larity\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20vec3'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a\x20\x20\x20\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20fresnel\x20'+'=\x20pow(1.0\x20'+'-\x20saturate'+'(cosTheta)'+',\x205.0);\x0a\x20\x20'+'\x20\x20float\x20gl'+'ossSq\x20=\x20gl'+'oss\x20*\x20glos'+'s;\x0a\x20\x20\x20\x20vec'+'3\x20ret\x20=\x20sp'+'ecularity\x20'+'+\x20(max(vec'+'3(glossSq)'+',\x20specular'+'ity)\x20-\x20spe'+'cularity)\x20'+'*\x20fresnel;'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20return'+'\x20mix(ret,\x20'+'iridescenc'+'eFresnel,\x20'+'iridescenc'+'eIntensity'+');\x0a#else\x0a\x20'+'\x20\x20\x20return\x20'+'ret;\x0a#endi'+'f\x20\x20\x20\x20\x0a}\x0a\x0af'+'loat\x20getFr'+'esnelCC(fl'+'oat\x20cosThe'+'ta)\x20{\x0a\x20\x20\x20\x20'+'float\x20fres'+'nel\x20=\x20pow('+'1.0\x20-\x20satu'+'rate(cosTh'+'eta),\x205.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x200.04\x20+\x20'+'(1.0\x20-\x200.0'+'4)\x20*\x20fresn'+'el;\x0a}\x0a',t1='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x0avaryin'+'g\x20vec2\x20vUv'+'0;\x0a\x0avoid\x20m'+'ain(void)\x0a'+'{\x0a\x20\x20\x20\x20gl_P'+'osition\x20=\x20'+'vec4(verte'+'x_position'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20vUv'+'0\x20=\x20vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x200.5;\x0a}\x0a',s1='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(color)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ga'+'mmaCorrect'+'Input(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGamma(col'+'or);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20gammaCorr'+'ectInput(v'+'ec4\x20color)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4(decodeG'+'amma(color'+'.xyz),\x20col'+'or.w);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20gammaCo'+'rrectOutpu'+'t(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20pow(color'+'\x20+\x200.00000'+'01,\x20vec3(1'+'.0\x20/\x202.2))'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'else\x20//\x20NO'+'NE\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectInp'+'ut(vec3\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20gamma'+'CorrectInp'+'ut(vec4\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectOut'+'put(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20color;\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a',i1='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0auni'+'form\x20float'+'\x20material_'+'gloss;\x0a#en'+'dif\x0a\x0avoid\x20'+'getGlossin'+'ess()\x20{\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_GLO'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20*='+'\x20material_'+'gloss;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_GLOSS_'+'TEXTURE\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20*=\x20tex'+'ture2DBias'+'({STD_GLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_GLOSS_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_G'+'LOSS_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_INVE'+'RT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x201.0\x20-\x20dGl'+'ossiness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20+='+'\x200.0000001'+';\x0a}\x0a',r1='\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tion;\x0a\x0a//\x20'+'project\x20th'+'e\x20model\x20sp'+'ace\x20gaussi'+'an\x20center\x20'+'to\x20view\x20an'+'d\x20clip\x20spa'+'ce\x0abool\x20in'+'itCenter(v'+'ec3\x20modelC'+'enter,\x20out'+'\x20SplatCent'+'er\x20center)'+'\x20{\x0a\x20\x20\x20\x20mat'+'4\x20modelVie'+'w\x20=\x20matrix'+'_view\x20*\x20ma'+'trix_model'+';\x0a\x20\x20\x20\x20vec4'+'\x20centerVie'+'w\x20=\x20modelV'+'iew\x20*\x20vec4'+'(modelCent'+'er,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly\x20out\x20if'+'\x20splat\x20is\x20'+'behind\x20the'+'\x20camera\x0a\x20\x20'+'\x20\x20if\x20(cent'+'erView.z\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20false;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20vec4\x20cent'+'erProj\x20=\x20m'+'atrix_proj'+'ection\x20*\x20c'+'enterView;'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nsure\x20gaus'+'sians\x20are\x20'+'not\x20clippe'+'d\x20by\x20camer'+'a\x20near\x20and'+'\x20far\x0a\x20\x20\x20\x20#'+'if\x20WEBGPU\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ce'+'nterProj.z'+'\x20=\x20clamp(c'+'enterProj.'+'z,\x200,\x20abs('+'centerProj'+'.w));\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20center'+'Proj.z\x20=\x20c'+'lamp(cente'+'rProj.z,\x20-'+'abs(center'+'Proj.w),\x20a'+'bs(centerP'+'roj.w));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20cente'+'r.view\x20=\x20c'+'enterView.'+'xyz\x20/\x20cent'+'erView.w;\x0a'+'\x20\x20\x20\x20center'+'.proj\x20=\x20ce'+'nterProj;\x0a'+'\x20\x20\x20\x20center'+'.projMat00'+'\x20=\x20matrix_'+'projection'+'[0][0];\x0a\x20\x20'+'\x20\x20center.m'+'odelView\x20='+'\x20modelView'+';\x0a\x20\x20\x20\x20retu'+'rn\x20true;\x0a}'+'\x0a',a1='\x0a\x0auniform\x20'+'mediump\x20sa'+'mpler2D\x20sp'+'latColor;\x0a'+'\x0a//\x20返回值:\x200'+'.0\x20~\x201.0\x20之'+'间的透明度因子\x0afl'+'oat\x20comput'+'eAlpha(flo'+'at\x20muT,\x20fl'+'oat\x20uTime,'+'\x20float\x20uFa'+'deSpeed,\x20f'+'loat\x20life)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20age\x20=\x20('+'uTime\x20-\x20mu'+'T)\x20*\x202.0;\x20'+'//\x20存活时长（秒）'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'muT\x20>\x20uTim'+'e)\x20return\x20'+'0.0;\x0a\x0a\x20\x20\x20\x20'+'//\x20---\x20线性衰'+'减：基于\x20life\x20'+'---\x0a\x20\x20\x20\x20fl'+'oat\x20linear'+'Fade\x20=\x201.0'+'\x20-\x20age\x20/\x20l'+'ife;\x0a\x20\x20\x20\x20/'+'/\x20---\x20指数衰减'+'：基于\x20uFadeS'+'peed\x20---\x0a\x20'+'\x20\x20\x20float\x20e'+'xpFade\x20=\x20e'+'xp(-age\x20*\x20'+'uFadeSpeed'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20cl'+'amp(linear'+'Fade,\x200.0,'+'\x201.0);\x20\x0a\x20\x20'+'\x20\x20return\x20c'+'lamp(expFa'+'de,\x200.0,\x201'+'.0);\x0a}\x0a\x0a\x0av'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20uTime,\x20'+'bool\x20plusA'+',\x20int\x20poin'+'tCloudMode'+'Enabled)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'color\x20=\x20te'+'xelFetch(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a\x20\x20\x20\x20'+'#ifdef\x20IS_'+'4D\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20tDat'+'a\x20=\x20texelF'+'etch(trans'+'formLifecy'+'cle,\x20sourc'+'e.uv,\x200).x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20muT'+'\x20=\x20tData.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20saveA'+'\x20=\x20pointCl'+'oudModeEna'+'bled\x20==\x201\x20'+'?\x201.0\x20:\x20co'+'lor.a;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20alpha\x20=\x20s'+'aveA;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(uOp'+'enAnim\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20alp'+'ha\x20=\x20alpha'+'\x20*\x20(muT\x20-\x20'+'uTime\x20+\x200.'+'05);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20age\x20=\x20u'+'Time\x20-\x20muT'+';\x20\x20\x20\x20//\x20当前'+'存在的时间长度\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20uFad'+'eSpeed\x20=\x202'+('.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20life\x20=\x200'+'.1;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20alph'+'a\x20=\x20comput'+'eAlpha(muT'+',\x20uTime,\x20u'+'FadeSpeed,'+'\x20life);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'alpha\x20*=\x20a'+'lpha;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor.a\x20=\x20p'+'lusA\x20?\x20alp'+'ha\x20:\x20saveA'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20ret'+'urn\x20color;'+'\x0a}\x0a\x0a'),n1='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20uint\x20o'+'rder;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20uint\x20i'+'d;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'ivec2\x20uv;\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20vec2'+'\x20cornerUV;'+'\x20\x20\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a};\x0a'+'\x0a//\x20stores'+'\x20the\x20camer'+'a\x20and\x20clip'+'\x20space\x20pos'+'ition\x20of\x20t'+'he\x20gaussia'+'n\x20center\x0as'+'truct\x20Spla'+'tCenter\x20{\x0a'+'\x20\x20\x20\x20vec3\x20v'+'iew;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cen'+'ter\x20in\x20vie'+'w\x20space\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'j;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'mat4\x20model'+'View;\x20\x20\x20\x20\x20'+'//\x20model-v'+'iew\x20matrix'+'\x0a\x20\x20\x20\x20float'+'\x20projMat00'+';\x20\x20\x20\x20//\x20el'+'ement\x20[0]['+'0]\x20of\x20the\x20'+'projection'+'\x20matrix\x0a};'+'\x0a\x0a//\x20store'+'s\x20the\x20offs'+'et\x20from\x20ce'+'nter\x20for\x20t'+'he\x20current'+'\x20gaussian\x0a'+'struct\x20Spl'+'atCorner\x20{'+'\x0a\x20\x20\x20\x20vec2\x20'+'offset;\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'rner\x20offse'+'t\x20from\x20cen'+'ter\x20in\x20cli'+'p\x20space\x0a\x20\x20'+'\x20\x20vec2\x20uv;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20aaF'+'actor;\x20//\x20'+'for\x20scenes'+'\x20generated'+'\x20with\x20anti'+'aliasing\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20vec2\x20'+'v;\x0a\x20\x20\x20\x20flo'+'at\x20dlen;\x0a\x20'+'\x20\x20\x20vec2\x20cS'+'ize;\x0a\x20\x20\x20\x20v'+'ec2\x20cUV;\x0a}'+';\x0a\x0a#includ'+'e\x20\x22gsplatE'+'valSHVS\x22\x0a#'+'include\x20\x22g'+'splatQuatT'+'oMat3VS\x22\x0a\x0a'+'#if\x20GSPLAT'+'_COMPRESSE'+('D_DATA\x20==\x20'+'true\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatCompr'+'essedDataV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_COEFFS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x20='+'=\x20true\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22gsplatSog'+'sDataVS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSo'+'gsSHVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'else\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatDataV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22gsp'+'latColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0avoi'+'d\x20clipCorn'+'er(inout\x20S'+'platCorner'+'\x20corner,\x20f'+'loat\x20alpha'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20clip\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20255.'+'0\x20/\x20alpha)'+')\x20/\x202.0);\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20*='+'\x20clip;\x0a\x20\x20\x20'+'\x20corner.uv'+'\x20*=\x20clip;\x0a'+'}\x0a'),o1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTimeText'+'ure;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20c'+'hunkTextur'+'e;\x0a\x0a//\x20wor'+'k\x20values\x0av'+'ec4\x20chunkD'+'ataA;\x20\x20\x20\x20/'+'/\x20x:\x20min_x'+',\x20y:\x20min_y'+',\x20z:\x20min_z'+',\x20w:\x20max_x'+'\x0avec4\x20chun'+'kDataB;\x20\x20\x20'+'\x20//\x20x:\x20max'+'_y,\x20y:\x20max'+'_z,\x20z:\x20sca'+'le_min_x,\x20'+'w:\x20scale_m'+'in_y\x0avec4\x20'+'chunkDataC'+';\x20\x20\x20\x20//\x20x:'+'\x20scale_min'+'_z,\x20y:\x20sca'+'le_max_x,\x20'+'z:\x20scale_m'+'ax_y,\x20w:\x20s'+'cale_max_z'+'\x0avec4\x20chun'+'kDataD;\x20\x20\x20'+'\x20//\x20x:\x20min'+'_r,\x20y:\x20min'+'_g,\x20z:\x20min'+'_b,\x20w:\x20max'+'_r\x0avec4\x20ch'+'unkDataE;\x20'+'\x20\x20\x20//\x20x:\x20m'+'ax_g,\x20y:\x20m'+'ax_b,\x20z:\x20m'+'in_motion_'+'x,\x20w:\x20min_'+'motion_y\x0av'+'ec4\x20chunkD'+'ataF;\x20\x20\x20\x20/'+'/\x20x:\x20min_m'+'otion_z,\x20y'+':\x20max_moti'+'on_x,\x20z:\x20m'+'ax_motion_'+'y,\x20w:\x20max_'+'motion_z\x0av'+'ec4\x20chunkD'+'ataT;\x20\x20\x20\x20/'+'/\x20x:\x20min_t'+'ime,\x20y:\x20ma'+'x_time,\x20z:'+'\x20min_time_'+'scale,\x20w:\x20'+'max_time_s'+'cale\x0auvec4'+'\x20packedDat'+'a;\x20\x20\x20//\x20x:'+'\x20position\x20'+'bits,\x20y:\x20r'+'otation\x20bi'+'ts,\x20z:\x20sca'+'le\x20bits,\x20w'+':\x20color\x20bi'+'ts\x0auvec2\x20p'+'ackedT;\x20\x20\x20'+'//\x20x:\x20moti'+'on\x20bits(x,'+'\x20y,\x20z),\x20y:'+'\x20time\x20bits'+'(t_scale,\x20'+'t,\x20unused)'+'\x0a\x0a//\x20tool\x20'+'for\x20comput'+'e\x20Marginal'+'\x20time\x0afloa'+'t\x20computeM'+'arginalT(f'+'loat\x20time,'+'\x20float\x20muT'+',\x20float\x20si'+'gmaT)\x20{\x0a\x20\x20'+'\x20\x20if\x20(muT\x20'+'<=\x20-10.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20float\x20re'+('sult\x20=\x20exp'+'(-0.5\x20*\x20(p'+'ow((time\x20-'+'\x20muT),\x202.0'+')\x20/\x20pow(si'+'gmaT,\x202.0)'+'));\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0avec3'+'\x20unpack111'+'011(uint\x20b'+'its)\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'c3(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float(bi'+'ts\x20>>\x2021u)'+'\x20/\x202047.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((bits'+'\x20>>\x2011u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at(bits\x20&\x20'+'0x7ffu)\x20/\x20'+'2047.0\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0avec'+'4\x20unpack88'+'88(uint\x20bi'+'ts)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float(bit'+'s\x20>>\x2024u)\x20'+'/\x20255.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((bits\x20>'+'>\x2016u)\x20&\x200'+'xffu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(('+'bits\x20>>\x208u'+')\x20&\x200xffu)'+'\x20/\x20255.0,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat(bits\x20&'+'\x200xffu)\x20/\x20'+'255.0\x0a\x20\x20\x20\x20'+');\x0a}\x0a\x0acons'+'t\x20float\x20no'+'rm\x20=\x201.0\x20/'+'\x20(sqrt(2.0'+')\x20*\x200.5);\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20a\x20=\x20(f'+'loat((bits'+'\x20>>\x2020u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0\x20-\x20'+'0.5)\x20*\x20nor'+'m;\x0a\x20\x20\x20\x20flo'+'at\x20b\x20=\x20(fl'+'oat((bits\x20'+'>>\x2010u)\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20(flo'+'at(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20m\x20=\x20sqrt'+'(1.0\x20-\x20(a\x20'+'*\x20a\x20+\x20b\x20*\x20'+'b\x20+\x20c\x20*\x20c)'+');\x0a\x0a\x20\x20\x20\x20ui'+'nt\x20mode\x20=\x20'+'bits\x20>>\x2030'+'u;\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x200'+'u)\x20return\x20'+'vec4(m,\x20a,'+'\x20b,\x20c);\x0a\x20\x20'+'\x20\x20if\x20(mode'+'\x20==\x201u)\x20re'+'turn\x20vec4('+'a,\x20m,\x20b,\x20c'+');\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x202'+'u)\x20return\x20'+'vec4(a,\x20b,'+'\x20m,\x20c);\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4(a,\x20b,\x20')+('c,\x20m);\x0a}\x0a\x0a'+'\x0a//\x20read\x20c'+'enter\x0avec3'+'\x20readCente'+'r(SplatSou'+'rce\x20source'+')\x20{\x0a\x20\x20\x20\x20ui'+'nt\x20w\x20=\x20uin'+'t(textureS'+'ize(chunkT'+'exture,\x200)'+'.x)\x20/\x205u;\x0a'+'\x20\x20\x20\x20uint\x20c'+'hunkId\x20=\x20s'+'ource.id\x20/'+'\x20256u;\x0a\x20\x20\x20'+'\x20ivec2\x20chu'+'nkUV\x20=\x20ive'+'c2((chunkI'+'d\x20%\x20w)\x20*\x205'+'u,\x20chunkId'+'\x20/\x20w);\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'chunk\x20and\x20'+'packed\x20com'+'pressed\x20da'+'ta\x0a\x20\x20\x20\x20chu'+'nkDataA\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV,\x200);\x0a\x20\x20'+'\x20\x20chunkDat'+'aB\x20=\x20texel'+'Fetch(chun'+'kTexture,\x20'+'chunkUV\x20+\x20'+'ivec2(1,\x200'+'),\x200);\x0a\x20\x20\x20'+'\x20chunkData'+'C\x20=\x20texelF'+'etch(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20i'+'vec2(2,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataD'+'\x20=\x20texelFe'+'tch(chunkT'+'exture,\x20ch'+'unkUV\x20+\x20iv'+'ec2(3,\x200),'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataE\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(4,\x200),\x20'+'0);\x0a\x20\x20\x20\x20pa'+'ckedData\x20='+'\x20texelFetc'+'h(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ch'+'unkDataA.x'+'yz,\x20vec3(c'+'hunkDataA.'+'w,\x20chunkDa'+'taB.xy),\x20u'+'npack11101'+'1(packedDa'+'ta.x));\x0a}\x0a'+'\x0avec4\x20read'+'Color(in\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'r\x20=\x20unpack'+'8888(packe'+'dData.w);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4(mix('+'chunkDataD'+'.xyz,\x20vec3'+'(chunkData'+'D.w,\x20chunk'+'DataE.xy),'+'\x20r.rgb),\x20r'+'.w);\x0a}\x0a\x0ave'+'c4\x20getRota'+'tion()\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'unpackRota'+'tion(packe'+'dData.y);\x0a'+'}\x0a\x0avec3\x20ge'+'tScale()\x20{')+('\x0a\x20\x20\x20\x20retur'+'n\x20exp(mix('+'vec3(chunk'+'DataB.zw,\x20'+'chunkDataC'+'.x),\x20chunk'+'DataC.yzw,'+'\x20unpack111'+'011(packed'+'Data.z)));'+'\x0a}\x0a\x0a//\x20giv'+'en\x20a\x20rotat'+'ion\x20matrix'+'\x20and\x20scale'+'\x20vector,\x20c'+'ompute\x203d\x20'+'covariance'+'\x20A\x20and\x20B\x0av'+'oid\x20readCo'+'variance(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20covA,\x20out'+'\x20vec3\x20covB'+')\x20{\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3('+'getRotatio'+'n());\x0a\x20\x20\x20\x20'+'vec3\x20scale'+'\x20=\x20getScal'+'e();\x0a\x0a\x20\x20\x20\x20'+'//\x20M\x20=\x20S\x20*'+'\x20R\x0a\x20\x20\x20\x20mat'+'3\x20M\x20=\x20tran'+'spose(mat3'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'scale.x\x20*\x20'+'rot[0],\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20scal'+'e.y\x20*\x20rot['+'1],\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale.z\x20'+'*\x20rot[2]\x0a\x20'+'\x20\x20\x20));\x0a\x0a\x20\x20'+'\x20\x20covA\x20=\x20v'+'ec3(dot(M['+'0],\x20M[0]),'+'\x20dot(M[0],'+'\x20M[1]),\x20do'+'t(M[0],\x20M['+'2]));\x0a\x20\x20\x20\x20'+'covB\x20=\x20vec'+'3(dot(M[1]'+',\x20M[1]),\x20d'+'ot(M[1],\x20M'+'[2]),\x20dot('+'M[2],\x20M[2]'+'));\x0a}\x0a\x0aflo'+'at\x20getMarg'+'inalT(in\x20S'+'platSource'+'\x20source,\x20i'+'n\x20float\x20ti'+'me)\x20{\x0a\x20\x20\x20\x20'+'float\x20marg'+'inal\x20=\x201.0'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20IS_4D\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20chu'+'nkDataT\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(6,\x200),\x200)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'packedT\x20=\x20'+'texelFetch'+'(packedTim'+'eTexture,\x20'+'source.uv,'+'\x200).xy;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20timeData\x20'+'=\x20mix(vec3'+'(chunkData'+'T.z,\x20chunk'+'DataT.x,\x200'+'),\x20vec3(ch'+'unkDataT.w'+',\x20chunkDat'+'aT.y,\x201),\x20'+'unpack1110'+'11(packedT'+'.y));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'tScale\x20=\x20e'+'xp(timeDat')+('a.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'muT\x20=\x20time'+'Data.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20marg'+'inal\x20=\x20com'+'puteMargin'+'alT(time,\x20'+'muT,\x20tScal'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20r'+'eturn\x20marg'+'inal;\x0a}\x0a\x0av'+'ec3\x20readCe'+'nter4D(Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20time)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(chunkText'+'ure,\x200).x)'+'\x20/\x207u;\x0a\x20\x20\x20'+'\x20uint\x20chun'+'kId\x20=\x20sour'+'ce.id\x20/\x2025'+'6u;\x0a\x20\x20\x20\x20iv'+'ec2\x20chunkU'+'V\x20=\x20ivec2('+'(chunkId\x20%'+'\x20w)\x20*\x207u,\x20'+'chunkId\x20/\x20'+'w);\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20chu'+'nk\x20and\x20pac'+'ked\x20compre'+'ssed\x20data\x0a'+'\x20\x20\x20\x20chunkD'+'ataA\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV,'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataB\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(1,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataC\x20='+'\x20texelFetc'+'h(chunkTex'+'ture,\x20chun'+'kUV\x20+\x20ivec'+'2(2,\x200),\x200'+');\x0a\x20\x20\x20\x20chu'+'nkDataD\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(3,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataE\x20=\x20t'+'exelFetch('+'chunkTextu'+'re,\x20chunkU'+'V\x20+\x20ivec2('+'4,\x200),\x200);'+'\x0a\x20\x20\x20\x20chunk'+'DataF\x20=\x20te'+'xelFetch(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20ivec2(5'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataT\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV\x20'+'+\x20ivec2(6,'+'\x200),\x200);\x0a\x20'+'\x20\x20\x20packedD'+'ata\x20=\x20texe'+'lFetch(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20packedT\x20='+'\x20texelFetc'+'h(packedTi'+'meTexture,'+'\x20source.uv'+',\x200).xy;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20mix(chu')+('nkDataA.xy'+'z,\x20vec3(ch'+'unkDataA.w'+',\x20chunkDat'+'aB.xy),\x20un'+'pack111011'+'(packedDat'+'a.x));\x0a\x20\x20\x20'+'\x20#ifdef\x20IS'+'_4D\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20tim'+'e\x20=\x20mix(ve'+'c3(chunkDa'+'taT.z,\x20chu'+'nkDataT.x,'+'\x200),\x20vec3('+'chunkDataT'+'.w,\x20chunkD'+'ataT.y,\x201)'+',\x20unpack11'+'1011(packe'+'dT.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20muT\x20=\x20ti'+'me.y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'ovingSpeed'+'\x20=\x20mix(vec'+'3(chunkDat'+'aE.zw,\x20chu'+'nkDataF.x)'+',\x20chunkDat'+'aF.yzw,\x20un'+'pack111011'+'(packedT.x'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20spl'+'atOffset\x20='+'\x20movingSpe'+'ed\x20*\x20(time'+'\x20-\x20muT);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20spl'+'atCenter\x20+'+'=\x20splatOff'+'set;\x0a\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'return\x20spl'+'atCenter;\x0a'+'}\x0a'),l1='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20shText'+'ure0;\x0aunif'+'orm\x20highp\x20'+'usampler2D'+'\x20shTexture'+'1;\x0auniform'+'\x20highp\x20usa'+'mpler2D\x20sh'+'Texture2;\x0a'+'\x0avec4\x20unpa'+'ck8888s(in'+'\x20uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'(uvec4(bit'+'s)\x20>>\x20uvec'+'4(0u,\x208u,\x20'+'16u,\x2024u))'+'\x20&\x200xffu)\x20'+'*\x20(8.0\x20/\x202'+'55.0)\x20-\x204.'+'0;\x0a}\x0a\x0avoid'+'\x20readSHDat'+'a(in\x20Splat'+'Source\x20sou'+'rce,\x20out\x20v'+'ec3\x20sh[15]'+',\x20out\x20floa'+'t\x20scale)\x20{'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20the\x20sh\x20'+'coefficien'+'ts\x0a\x20\x20\x20\x20uve'+'c4\x20shData0'+'\x20=\x20texelFe'+'tch(shText'+'ure0,\x20sour'+'ce.uv,\x200);'+'\x0a\x20\x20\x20\x20uvec4'+'\x20shData1\x20='+'\x20texelFetc'+'h(shTextur'+'e1,\x20source'+'.uv,\x200);\x0a\x20'+'\x20\x20\x20uvec4\x20s'+'hData2\x20=\x20t'+'exelFetch('+'shTexture2'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec4\x20r0\x20'+'=\x20unpack88'+'88s(shData'+'0.x);\x0a\x20\x20\x20\x20'+'vec4\x20r1\x20=\x20'+'unpack8888'+'s(shData0.'+'y);\x0a\x20\x20\x20\x20ve'+'c4\x20r2\x20=\x20un'+'pack8888s('+'shData0.z)'+';\x0a\x20\x20\x20\x20vec4'+'\x20r3\x20=\x20unpa'+'ck8888s(sh'+'Data0.w);\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'g0\x20=\x20unpac'+'k8888s(shD'+'ata1.x);\x0a\x20'+'\x20\x20\x20vec4\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20vec4\x20g2\x20='+'\x20unpack888'+'8s(shData1'+'.z);\x0a\x20\x20\x20\x20v'+'ec4\x20g3\x20=\x20u'+'npack8888s'+'(shData1.w'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20b0\x20=\x20un'+'pack8888s('+'shData2.x)'+';\x0a\x20\x20\x20\x20vec4'+'\x20b1\x20=\x20unpa'+'ck8888s(sh'+'Data2.y);\x0a'+'\x20\x20\x20\x20vec4\x20b'+'2\x20=\x20unpack'+'8888s(shDa'+'ta2.z);\x0a\x20\x20'+'\x20\x20vec4\x20b3\x20'+'=\x20unpack88'+'88s(shData'+'2.w);\x0a\x0a\x20\x20\x20'+('\x20sh[0]\x20=\x20\x20'+'vec3(r0.x,'+'\x20g0.x,\x20b0.'+'x);\x0a\x20\x20\x20\x20sh'+'[1]\x20=\x20\x20vec'+'3(r0.y,\x20g0'+'.y,\x20b0.y);'+'\x0a\x20\x20\x20\x20sh[2]'+'\x20=\x20\x20vec3(r'+'0.z,\x20g0.z,'+'\x20b0.z);\x0a\x20\x20'+'\x20\x20sh[3]\x20=\x20'+'\x20vec3(r0.w'+',\x20g0.w,\x20b0'+'.w);\x0a\x20\x20\x20\x20s'+'h[4]\x20=\x20\x20ve'+'c3(r1.x,\x20g'+'1.x,\x20b1.x)'+';\x0a\x20\x20\x20\x20sh[5'+']\x20=\x20\x20vec3('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3(r1.'+'z,\x20g1.z,\x20b'+'1.z);\x0a\x20\x20\x20\x20'+'sh[7]\x20=\x20\x20v'+'ec3(r1.w,\x20'+'g1.w,\x20b1.w'+');\x0a\x20\x20\x20\x20sh['+'8]\x20=\x20\x20vec3'+'(r2.x,\x20g2.'+'x,\x20b2.x);\x0a'+'\x20\x20\x20\x20sh[9]\x20'+'=\x20\x20vec3(r2'+'.y,\x20g2.y,\x20'+'b2.y);\x0a\x20\x20\x20'+'\x20sh[10]\x20=\x20'+'vec3(r2.z,'+'\x20g2.z,\x20b2.'+'z);\x0a\x20\x20\x20\x20sh'+'[11]\x20=\x20vec'+'3(r2.w,\x20g2'+'.w,\x20b2.w);'+'\x0a\x20\x20\x20\x20sh[12'+']\x20=\x20vec3(r'+'3.x,\x20g3.x,'+'\x20b3.x);\x0a\x20\x20'+'\x20\x20sh[13]\x20='+'\x20vec3(r3.y'+',\x20g3.y,\x20b3'+'.y);\x0a\x20\x20\x20\x20s'+'h[14]\x20=\x20ve'+'c3(r3.z,\x20g'+'3.z,\x20b3.z)'+';\x0a\x0a\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),c1='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20S'+'H_COEFFS\x203'+'\x0a\x20\x20\x20\x20#elif'+'\x20SH_BANDS\x20'+'==\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20SH_COEFFS'+'\x208\x0a\x20\x20\x20\x20#el'+'if\x20SH_BAND'+'S\x20==\x203\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20SH_COEF'+'FS\x2015\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20SH_COEFF'+'S\x200\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x200\x0a\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20SH_C1\x20'+'=\x200.488602'+'5119029199'+'f;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x201\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20f'+'loat\x20SH_C2'+'_0\x20=\x201.092'+'5484305920'+'792f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'2_1\x20=\x20-1.0'+'9254843059'+'20792f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C2_2\x20=\x200.'+'3153915652'+'5252005f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C2_3\x20=\x20'+'-1.0925484'+'305920792f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'const\x20floa'+'t\x20SH_C2_4\x20'+'=\x200.546274'+'2152960396'+'f;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x202\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'3_0\x20=\x20-0.5'+'9004358992'+'66435f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_1\x20=\x202.'+'8906114426'+'40554f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_2\x20=\x20-0'+'.457045799'+'4644658f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C3_3\x20=\x20'+'0.37317633'+'25901154f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20float'+'\x20SH_C3_4\x20='+'\x20-0.457045'+'7994644658'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_5'+'\x20=\x201.44530'+'5721320277'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_6'+'\x20=\x20-0.5900'+'4358992664'+'35f;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20see\x20ht'+'tps://gith'+'ub.com/gra'+'phdeco-inr'+('ia/gaussia'+'n-splattin'+'g/blob/mai'+'n/utils/sh'+'_utils.py\x0a'+'\x20\x20\x20\x20vec3\x20e'+'valSH(in\x20v'+'ec3\x20sh[SH_'+'COEFFS],\x20i'+'n\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20x\x20'+'=\x20dir.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20y\x20=\x20dir'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20z\x20'+'=\x20dir.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201st\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20resul'+'t\x20=\x20SH_C1\x20'+'*\x20(-sh[0]\x20'+'*\x20y\x20+\x20sh[1'+']\x20*\x20z\x20-\x20sh'+'[2]\x20*\x20x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x201\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x202nd\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xx\x20=\x20x\x20*\x20x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yy\x20=\x20y\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'zz\x20=\x20z\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yz\x20=\x20y\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xz\x20=\x20x\x20*\x20z'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[3]\x20*\x20('+'SH_C2_0\x20*\x20'+'xy)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[4]\x20*\x20'+'(SH_C2_1\x20*'+'\x20yz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[5]\x20*'+'\x20(SH_C2_2\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x20xx\x20-\x20y'+'y))\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[6]\x20*\x20'+'(SH_C2_3\x20*'+'\x20xz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20*'+'\x20(SH_C2_4\x20'+'*\x20(xx\x20-\x20yy'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'+=\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20')+('xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20#endif\x0a'),h1='\x0amat3\x20quat'+'ToMat3(vec'+'4\x20R)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20R2\x20='+'\x20R\x20+\x20R;\x0a\x20\x20'+'\x20\x20float\x20X\x20'+'=\x20R2.x\x20*\x20R'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20Y\x20\x20=\x20R2'+'.y\x20*\x20R;\x0a\x20\x20'+'\x20\x20vec4\x20Z\x20\x20'+'=\x20R2.z\x20*\x20R'+';\x0a\x20\x20\x20\x20floa'+'t\x20W\x20=\x20R2.w'+'\x20*\x20R.w;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x201.0\x20-\x20'+'Z.z\x20-\x20W,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20Y.z\x20+\x20X'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20Y.z\x20-\x20X,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x201.'+'0\x20-\x20Y.y\x20-\x20'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20+\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20Y.w\x20+\x20Z.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20-\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',d1='\x0auniform\x20m'+'ediump\x20sam'+'pler2D\x20sh0'+';\x0a\x0auniform'+'\x20vec4\x20sh0_'+'mins;\x0aunif'+'orm\x20vec4\x20s'+'h0_maxs;\x0a\x0a'+'float\x20SH_C'+'0\x20=\x200.2820'+'9479177387'+'814;\x0a\x0avec4'+'\x20readColor'+'(in\x20SplatS'+'ource\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20clr\x20='+'\x20mix(sh0_m'+'ins,\x20sh0_m'+'axs,\x20texel'+'Fetch(sh0,'+'\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(vec3(0.'+'5)\x20+\x20clr.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'clr.w)));\x0a'+'}\x0a',f1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0a\x0auniform\x20'+'vec3\x20means'+'_mins;\x0auni'+'form\x20vec3\x20'+'means_maxs'+';\x0a\x0auniform'+'\x20vec3\x20scal'+'es_mins;\x0au'+'niform\x20vec'+'3\x20scales_m'+'axs;\x0a\x0avec4'+'\x20unpackU32'+'(uint\x20v)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((v\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((v\x20>>'+'\x2016u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float((v'+'\x20>>\x208u)\x20&\x20'+'0xFFu)\x20/\x202'+'55.0,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float('+'v\x20&\x200xFFu)'+'\x20/\x20255.0\x0a\x20'+'\x20\x20\x20);\x0a}\x0a\x0au'+'vec4\x20packe'+'dSample;\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20th'+'e\x20packed\x20t'+'exture\x20sam'+'ple\x0a\x20\x20\x20\x20pa'+'ckedSample'+'\x20=\x20texelFe'+'tch(packed'+'Texture,\x20s'+'ource.uv,\x20'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20l\x20=\x20un'+'packU32(pa'+'ckedSample'+'.x).xyz;\x0a\x20'+'\x20\x20\x20vec3\x20u\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20vec'+'3\x20n\x20=\x20(l\x20*'+'\x20255.0\x20+\x20u'+'\x20*\x20255.0\x20*'+'\x20256.0)\x20/\x20'+'65535.0;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20mix(mean'+'s_mins,\x20me'+'ans_maxs,\x20'+'n);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20sign'+'(v)\x20*\x20(exp'+'(abs(v))\x20-'+'\x201.0);\x0a}\x0a\x0a'+'const\x20floa'+'t\x20norm\x20=\x202'+'.0\x20/\x20sqrt('+'2.0);\x0a\x0a//\x20'+'sample\x20cov'+'ariance\x20ve'+'ctors\x0avoid'+'\x20readCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'qdata\x20=\x20un'+'packU32(pa'+'ckedSample'+'.z);\x0a\x20\x20\x20\x20v'+'ec3\x20sdata\x20'+('=\x20unpackU3'+'2(packedSa'+'mple.w).xy'+'z;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20abc\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20f'+'loat\x20d\x20=\x20s'+'qrt(max(0.'+'0,\x201.0\x20-\x20d'+'ot(abc,\x20ab'+'c)));\x0a\x0a\x20\x20\x20'+'\x20uint\x20mode'+'\x20=\x20uint(qd'+'ata.w\x20*\x2025'+'5.0\x20+\x200.5)'+'\x20-\x20252u;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20q'+'uat\x20=\x20(mod'+'e\x20==\x200u)\x20?'+'\x20vec4(d,\x20a'+'bc)\x20:\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20((mode\x20='+'=\x201u)\x20?\x20ve'+'c4(abc.x,\x20'+'d,\x20abc.yz)'+'\x20:\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20('+'(mode\x20==\x202'+'u)\x20?\x20vec4('+'abc.xy,\x20d,'+'\x20abc.z)\x20:\x20'+'vec4(abc,\x20'+'d)));\x0a\x0a\x20\x20\x20'+'\x20mat3\x20rot\x20'+'=\x20quatToMa'+'t3(quat);\x0a'+'\x20\x20\x20\x20vec3\x20s'+'cale\x20=\x20exp'+'(mix(scale'+'s_mins,\x20sc'+'ales_maxs,'+'\x20sdata));\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20mat3\x20M\x20='+'\x20transpose'+'(mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20cov'+'A\x20=\x20vec3(d'+'ot(M[0],\x20M'+'[0]),\x20dot('+'M[0],\x20M[1]'+'),\x20dot(M[0'+'],\x20M[2]));'+'\x0a\x20\x20\x20\x20covB\x20'+'=\x20vec3(dot'+'(M[1],\x20M[1'+']),\x20dot(M['+'1],\x20M[2]),'+'\x20dot(M[2],'+'\x20M[2]));\x0a}'+'\x0a'),u1='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20sh_ce'+'ntroids;\x0a\x0a'+'uniform\x20fl'+'oat\x20shN_mi'+'ns;\x0aunifor'+'m\x20float\x20sh'+'N_maxs;\x0a\x0a/'+'/\x20To\x20suppo'+'rt\x20each\x20SH'+'\x20degree,\x20r'+'eadSHData\x20'+'is\x20overloa'+'ded\x20based\x20'+'on\x20the\x20SH\x20'+'vector\x20dep'+'th\x20\x0a\x0avoid\x20'+'readSHData'+'(in\x20SplatS'+'ource\x20sour'+'ce,\x20out\x20ve'+'c3\x20sh[SH_C'+'OEFFS],\x20ou'+'t\x20float\x20sc'+'ale)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'ivec2\x20t\x20=\x20'+'ivec2(pack'+'edSample.x'+'\x20&\x20255u,\x20p'+'ackedSampl'+'e.y\x20&\x20255u'+');\x0a\x20\x20\x20\x20int'+'\x20n\x20=\x20t.x\x20+'+'\x20t.y\x20*\x20256'+';\x0a\x20\x20\x20\x20int\x20'+'u\x20=\x20(n\x20%\x206'+'4)\x20*\x20SH_CO'+'EFFS;\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20n\x20'+'/\x2064;\x0a\x0a\x20\x20\x20'+'\x20//\x20calcul'+'ate\x20offset'+'\x20into\x20the\x20'+'centroids\x20'+'texture\x20an'+'d\x20read\x20con'+'secutive\x20t'+'exels\x0a\x20\x20\x20\x20'+'for\x20(int\x20i'+'\x20=\x200;\x20i\x20<\x20'+'SH_COEFFS;'+'\x20i++)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[i'+']\x20=\x20mix(ve'+'c3(shN_min'+'s),\x20vec3(s'+'hN_maxs),\x20'+'texelFetch'+'(sh_centro'+'ids,\x20ivec2'+'(u\x20+\x20i,\x20v)'+',\x200).xyz);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20scale\x20=\x20'+'1.0;\x0a}\x0a',p1='\x0auniform\x20v'+'ec2\x20viewpo'+'rt;\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20viewpo'+'rt\x20dimensi'+'ons\x0aunifor'+'m\x20vec4\x20cam'+'era_params'+';\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x201\x20/'+'\x20far,\x20far,'+'\x20near,\x20isO'+'rtho\x0aunifo'+'rm\x20float\x20u'+'SplatScale'+';\x0auniform\x20'+'float\x20rend'+'erSpace;\x0au'+'niform\x20flo'+'at\x20endSpac'+'e;\x0auniform'+'\x20int\x20uShap'+'eN;\x0a\x0a//\x20ca'+'lculate\x20th'+'e\x20clip-spa'+'ce\x20offset\x20'+'from\x20the\x20c'+'enter\x20for\x20'+'this\x20gauss'+'ian\x0abool\x20i'+'nitCorner('+'SplatSourc'+'e\x20source,\x20'+'SplatCente'+'r\x20center,\x20'+'out\x20SplatC'+'orner\x20corn'+'er,\x20int\x20po'+'intCloudMo'+'deEnabled)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'get\x20covari'+'ance\x0a\x20\x20\x20\x20v'+'ec3\x20covA,\x20'+'covB;\x0a\x20\x20\x20\x20'+'readCovari'+'ance(sourc'+'e,\x20covA,\x20c'+'ovB);\x0a\x0a\x20\x20\x20'+'\x20mat3\x20Vrk\x20'+'=\x20mat3(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20covA'+'.x,\x20covA.y'+',\x20covA.z,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'vA.y,\x20covB'+'.x,\x20covB.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'covA.z,\x20co'+'vB.y,\x20covB'+'.z\x0a\x20\x20\x20\x20);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20focal\x20=\x20v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'v\x20=\x20camera'+'_params.w\x20'+'==\x201.0\x20?\x20v'+'ec3(0.0,\x200'+'.0,\x201.0)\x20:'+'\x20center.vi'+'ew.xyz;\x0a\x20\x20'+'\x20\x20float\x20J1'+'\x20=\x20focal\x20/'+'\x20v.z;\x0a\x20\x20\x20\x20'+'vec2\x20J2\x20=\x20'+'-J1\x20/\x20v.z\x20'+'*\x20v.xy;\x0a\x20\x20'+'\x20\x20mat3\x20J\x20='+'\x20mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20J1,\x200'+'.0,\x20J2.x,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x200.'+'0,\x20J1,\x20J2.'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.0,\x200.0,'+'\x200.0\x0a\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20mat'+'3\x20W\x20=\x20tran'+'spose(mat3'+'(center.mo'+'delView));'+'\x0a\x20\x20\x20\x20mat3\x20'+'T\x20=\x20W\x20*\x20J;'+'\x0a\x20\x20\x20\x20mat3\x20'+'cov\x20=\x20tran'+'spose(T)\x20*'+('\x20Vrk\x20*\x20T;\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'calculate\x20'+'AA\x20factor\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20detOri'+'g\x20=\x20cov[0]'+'[0]\x20*\x20cov['+'1][1]\x20-\x20co'+'v[0][1]\x20*\x20'+'cov[0][1];'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20detBl'+'ur\x20=\x20(cov['+'0][0]\x20+\x200.'+'3)\x20*\x20(cov['+'1][1]\x20+\x200.'+'3)\x20-\x20cov[0'+'][1]\x20*\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20corn'+'er.aaFacto'+'r\x20=\x20sqrt(m'+'ax(detOrig'+'\x20/\x20detBlur'+',\x200.0));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20diagonal1'+'\x20=\x20cov[0]['+'0]\x20+\x200.3;\x0a'+'\x20\x20\x20\x20float\x20'+'offDiagona'+'l\x20=\x20cov[0]'+'[1];\x0a\x20\x20\x20\x20f'+'loat\x20diago'+'nal2\x20=\x20cov'+'[1][1]\x20+\x200'+'.3;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20mid\x20='+'\x200.5\x20*\x20(di'+'agonal1\x20+\x20'+'diagonal2)'+';\x0a\x20\x20\x20\x20floa'+'t\x20radius\x20='+'\x20length(ve'+'c2((diagon'+'al1\x20-\x20diag'+'onal2)\x20/\x202'+'.0,\x20offDia'+'gonal));\x0a\x20'+'\x20\x20\x20float\x20l'+'ambda1\x20=\x20m'+'id\x20+\x20radiu'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20lambda2'+'\x20=\x20max(mid'+'\x20-\x20radius,'+'\x200.1);\x0a\x20\x20\x20'+'\x20if\x20(point'+'CloudModeE'+'nabled\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20l'+'ambda1\x20=\x20l'+'ambda2\x20=\x202'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Us'+'e\x20the\x20smal'+'ler\x20viewpo'+'rt\x20dimensi'+'on\x20to\x20limi'+'t\x20the\x20kern'+'el\x20size\x20re'+'lative\x20to\x20'+'the\x20screen'+'\x20resolutio'+'n.\x0a\x20\x20\x20\x20flo'+'at\x20vmin\x20=\x20'+'min(1024.0'+',\x20min(view'+'port.x,\x20vi'+'ewport.y))'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20l1\x20=\x202.'+'0\x20*\x20min(sq'+'rt(2.0\x20*\x20l'+'ambda1),\x20v'+'min);\x0a\x20\x20\x20\x20'+'float\x20l2\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda2)'+',\x20vmin);\x0a\x0a'+'\x20\x20\x20\x20//\x20ear'+'ly-out\x20gau'+'ssians\x20sma'+'ller\x20than\x20'+'2\x20pixels\x0a\x20')+('\x20\x20\x20if\x20(l1\x20'+'<\x202.0\x20&&\x20l'+'2\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec2\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'viewport;\x0a'+'\x0a\x20\x20\x20\x20//\x20cu'+'ll\x20against'+'\x20frustum\x20x'+'/y\x20axes\x0a\x20\x20'+'\x20\x20if\x20(any('+'greaterTha'+'n(abs(cent'+'er.proj.xy'+')\x20-\x20vec2(m'+'ax(l1,\x20l2)'+')\x20*\x20c,\x20cen'+'ter.proj.w'+'w)))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20false;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec2\x20diago'+'nalVector\x20'+'=\x20normaliz'+'e(vec2(off'+'Diagonal,\x20'+'lambda1\x20-\x20'+'diagonal1)'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20scale\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20bool\x20inRe'+'nderSpace\x20'+'=\x20(center.'+'view.x\x20>=\x20'+'-renderSpa'+'ce\x20&&\x20cent'+'er.view.x\x20'+'<=\x20renderS'+'pace)\x20&&\x20('+'center.vie'+'w.y\x20>=\x20-re'+'nderSpace\x20'+'&&\x20center.'+'view.y\x20<=\x20'+'renderSpac'+'e);\x0a\x20\x20\x20\x20bo'+'ol\x20openRen'+'derAnim\x20=\x20'+'renderSpac'+'e\x20<\x20endSpa'+'ce;\x0a\x20\x20\x20\x20bo'+'ol\x20inRende'+'r\x20=\x20render'+'Space\x20>=\x20e'+'ndSpace\x20||'+'\x20inRenderS'+'pace\x20||\x20po'+'intCloudMo'+'deEnabled\x20'+'==\x201;\x0a\x20\x20\x20\x20'+'if(!openRe'+'nderAnim\x20&'+'&\x20uSplatSc'+'ale\x20>\x200.0\x20'+'&&\x20uSplatS'+'cale\x20<=\x205.'+'0){\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale\x20=\x20'+'uSplatScal'+'e;\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(in'+'Render){\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(openR'+'enderAnim)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'scale\x20=\x20in'+'RenderSpac'+'e\x20?\x20uSplat'+'Scale\x20:\x200.'+'1;\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20vec2\x20v1'+'\x20=\x20scale\x20*'+'\x20l1\x20*\x20diag'+'onalVector'+';\x0a\x20\x20\x20\x20vec2'+'\x20v2\x20=\x20scal'+'e\x20*\x20l2\x20*\x20v'+'ec2(diagon'+'alVector.y'+',\x20-diagona'+'lVector.x)')+(';\x0a\x0a\x20\x20\x20\x20cor'+'ner.offset'+'\x20=\x20(source'+'.cornerUV.'+'x\x20*\x20v1\x20+\x20s'+'ource.corn'+'erUV.y\x20*\x20v'+'2)\x20*\x20c;\x0a\x20\x20'+'\x20\x20//\x20corne'+'r.uv\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20if\x20(uSh'+'apeN\x20<\x203)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'corner.uv\x20'+'=\x20source.c'+'ornerUV;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'corner.cSi'+'ze\x20=\x20(v1\x20+'+'\x20v2)\x20*\x20c;\x0a'+'\x20\x20\x20\x20corner'+'.cUV\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),m1='\x0a\x0auniform\x20'+'highp\x20samp'+'ler2D\x20tran'+'sformA;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20transfor'+'mB;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformR;\x0a'+'\x0a#ifdef\x20IS'+'_4D\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformMot'+'ion;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20t'+'ransformLi'+'fecycle;\x0a#'+'endif\x0a\x0a//\x20'+'work\x20value'+'s\x0a//\x20uint\x20'+'tAw;\x0avec2\x20'+'sampledCov'+'4D;\x0afloat\x20'+'muT;\x0a\x0a//\x20t'+'ool\x20for\x20co'+'mpute\x20Marg'+'inal\x20time\x0a'+'float\x20comp'+'uteMargina'+'lT(float\x20t'+'ime,\x20float'+'\x20muT,\x20floa'+'t\x20sigmaT)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'muT\x20<=\x20-10'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20floa'+'t\x20result\x20='+'\x20exp(-0.5\x20'+'*\x20(pow((ti'+'me\x20-\x20muT),'+'\x202.0)\x20/\x20po'+'w(sigmaT,\x20'+'2.0)));\x0a\x20\x20'+'\x20\x20return\x20r'+'esult;\x0a}\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20retu'+'rn\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a}\x0a\x0ama'+'t3\x20quatToM'+'at3v2(vec4'+'\x20R)\x20{\x0a\x20\x20\x20\x20'+'float\x20x\x20=\x20'+'R.w;\x0a\x20\x20\x20\x20f'+'loat\x20y\x20=\x20R'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20R.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20w\x20=\x20R.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20mat3(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x201.0'+'\x20-\x202.0\x20*\x20('+'z\x20*\x20z\x20+\x20w\x20'+'*\x20w),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'2.0\x20*\x20(y\x20*'+'\x20z\x20+\x20x\x20*\x20w'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x202.0'+'\x20*\x20(y\x20*\x20w\x20'+'-\x20x\x20*\x20z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x202.0\x20*\x20'+'(y\x20*\x20z\x20-\x20x'+'\x20*\x20w),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x201.0\x20-'+'\x202.0\x20*\x20(y\x20'+'*\x20y\x20+\x20w\x20*\x20'+'w),\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x202.'+'0\x20*\x20(z\x20*\x20w'+'\x20+\x20x\x20*\x20y),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x202.0\x20*'+'\x20(y\x20*\x20w\x20+\x20'+'x\x20*\x20z),\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x202.0\x20*\x20(z'+'\x20*\x20w\x20-\x20x\x20*'+'\x20y),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.0\x20-\x202'+'.0\x20*\x20(y\x20*\x20'+'y\x20+\x20z\x20*\x20z)'+'\x0a\x20\x20\x20\x20);\x0a}\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(vec3\x20pack'+'ed)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(packed.x'+'yz,\x20sqrt(m'+'ax(0.0,\x201.'+'0\x20-\x20dot(pa'+'cked,\x20pack'+'ed))));\x0a}\x0a'+'\x0a//\x20sample'+'\x20covarianc'+'e\x20vectors\x0a'+'void\x20readC'+'ovariance('+'in\x20SplatSo'+'urce\x20sourc'+'e,\x20out\x20vec'+'3\x20covA,\x20ou'+'t\x20vec3\x20cov'+'B)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20tB\x20=\x20t'+'exelFetch('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20tR\x20'+'=\x20texelFet'+'ch(transfo'+'rmR,\x20sourc'+'e.uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3v'+'2(unpackRo'+'tation(tR)'+');\x0a\x20\x20\x20\x20vec'+'3\x20scale\x20=\x20'+'tB.xyz;\x0a\x0a\x20'+'\x20\x20\x20//\x20M\x20=\x20'+'S\x20*\x20R\x0a\x20\x20\x20\x20'+'mat3\x20M\x20=\x20t'+'ranspose(m'+'at3(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.x'+'\x20*\x20rot[0],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.y\x20*\x20r'+'ot[1],\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.z\x20*\x20rot[2'+']\x0a\x20\x20\x20\x20));\x0a'+'\x0a\x20\x20\x20\x20covA\x20'+'=\x20vec3(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20covB\x20=\x20'+'vec3(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a\x0a'+'//\x20sample\x20'+'4D\x20covaria'+'nce\x20vector'+'s\x0avoid\x20rea'+'dFTGSCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB,ou'+'t\x20vec4\x20cov'+'ariance4D)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20tB\x20=\x20tex'+'elFetch(tr'+'ansformB,\x20'+'source.uv,')+('\x200);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20tR\x20=\x20'+'texelFetch'+'(transform'+'R,\x20source.'+'uv,\x200).xyz'+';\x0a\x20\x20\x20\x20mat3'+'\x20rot\x20=\x20qua'+'tToMat3v2('+'unpackRota'+'tion(tR));'+'\x0a\x20\x20\x20\x20vec3\x20'+'scale\x20=\x20tB'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x20M\x20=\x20S\x20'+'*\x20R\x0a\x20\x20\x20\x20ma'+'t3\x20M\x20=\x20tra'+'nspose(mat'+'3(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20covA\x20=\x20'+'vec3(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20covB\x20=\x20ve'+'c3(dot(M[1'+'],\x20M[1]),\x20'+'dot(M[1],\x20'+'M[2]),\x20dot'+'(M[2],\x20M[2'+']));\x0a\x0a}\x0a\x0a\x0a'+'float\x20getM'+'arginalT(i'+'n\x20SplatSou'+'rce\x20source'+',\x20in\x20float'+'\x20time)\x20{\x0a\x20'+'\x20\x20\x20float\x20m'+'arginal\x20=\x20'+'1.0;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20filter\x20'+'out\x20splats'+'\x20that\x20have'+'\x20too\x20littl'+'e\x20influenc'+'e\x20to\x20now\x20i'+'n\x20the\x20time'+'\x20dimension'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20tData'+'\x20=\x20texelFe'+'tch(transf'+'ormLifecyc'+'le,\x20source'+'.uv,\x200).xy'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'muT\x20=\x20tDat'+'a.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20t'+'Scale\x20=\x20tD'+'ata.y;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20margi'+'nal\x20=\x20comp'+'uteMargina'+'lT(time,\x20m'+'uT,\x20tScale'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20re'+'turn\x20margi'+'nal;\x0a}\x0a\x0ave'+'c3\x20readCen'+'ter4D(Spla'+'tSource\x20so'+'urce,\x20floa'+'t\x20time)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20if(m'+'uT\x20>\x20-5.0)'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20movin'+'gSpeed\x20=\x20t')+('exelFetch('+'transformM'+'otion,\x20sou'+'rce.uv,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'platOffset'+'\x20=\x20movingS'+'peed\x20*\x20(ti'+'me\x20-\x20muT);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'platCenter'+'\x20+=\x20splatO'+'ffset;\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20spla'+'tCenter;\x0a}'+'\x0a'),_1='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0avec'+'3\x20prepareO'+'utputFromG'+'amma(vec3\x20'+'gammaColor'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20TONEMAP\x20'+'==\x20NONE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'GAMMA\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'onvert\x20to\x20'+'linear\x20spa'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20outp'+'ut\x20gamma\x20s'+'pace\x20color'+'\x20directly\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'ly\x20tonemap'+'ping\x20in\x20li'+'near\x20space'+'\x20and\x20outpu'+'t\x20to\x20linea'+'r\x20or\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20gamm'+'a\x20(which\x20i'+'s\x20handled\x20'+'by\x20gammaCo'+'rrectOutpu'+'t)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ga'+'mmaCorrect'+'Output(ton'+'eMap(decod'+'eGamma(gam'+'maColor)))'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',g1='\x0auniform\x20i'+'nt\x20mode;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x200:\x20c'+'enters,\x201:'+'\x20rings\x0auni'+'form\x20float'+'\x20ringSize;'+'\x0auniform\x20i'+'nt\x20uShapeN'+';\x0a\x0a#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bay'+'erPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'opacityDit'+'herPS\x22\x0a\x20\x20\x20'+'\x20varying\x20f'+'loat\x20id;\x0a#'+'endif\x0a\x0a#if'+'def\x20PICK_P'+'ASS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pi'+'ckPS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20alphaC'+'lip;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20vLinearDe'+'pth;\x0a\x20\x20\x20\x20#'+'include\x20\x22f'+'loatAsUint'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20Fast\x20'+'approximat'+'e\x20e^x\x20base'+'d\x20on\x20https'+'://nic.sch'+'raudolph.o'+'rg/pubs/Sc'+'hraudolph9'+'9.pdf\x0acons'+'t\x20float\x20\x20E'+'XP_A\x20\x20\x20\x20\x20\x20'+'=\x2012102203'+'.0;\x20\x20\x20//\x20≈'+'\x202^23\x20/\x20ln'+'(2)\x0aconst\x20'+'int\x20\x20\x20\x20EXP'+'_BC_RMS\x20=\x20'+'1064866808'+';\x20\x20\x20//\x20(12'+'7\x20<<\x2023)\x20-'+'\x2060801\x20*\x208'+'\x0afloat\x20fas'+'tExp(float'+'\x20x)\x20{\x0a\x20\x20\x20\x20'+'int\x20i\x20=\x20in'+'t(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20in'+'tBitsToFlo'+'at(i);\x0a}\x0a\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianU'+'V;\x0avarying'+'\x20mediump\x20v'+'ec4\x20gaussi'+'anColor;\x0av'+'arying\x20med'+'iump\x20vec2\x20'+'gaussianSi'+'ze;\x0avaryin'+'g\x20mediump\x20'+'vec2\x20gauss'+'ianCUV;\x0ava'+'rying\x20medi'+'ump\x20float\x20'+'saveMargin'+'al;\x0a\x0a//\x20判断'+'点\x20p\x20是否在正\x20N'+'\x20边形内\x0a//\x20p:'+'\x20点坐标\x20(UV\x20空'+'间或局部空间)\x0a//'+'\x20N:\x20边数\x0a//\x20'+'r:\x20半径（归一化到'+('1时就是单位圆）\x0a/'+'/\x20center:\x20'+'中心偏移\x0abool\x20'+'insideRegu'+'larPolygon'+'(vec2\x20p,\x20i'+'nt\x20N,\x20floa'+'t\x20r,\x20vec2\x20'+'center)\x20{\x0a'+'\x20\x20\x20\x20//\x20平移坐'+'标，确保中心对齐\x0a\x20'+'\x20\x20\x20vec2\x20d\x20'+'=\x20p\x20-\x20cent'+'er;\x0a\x20\x20\x20\x20fl'+'oat\x20theta\x20'+'=\x20atan(d.y'+',\x20d.x);\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20当前'+'角度\x0a\x20\x20\x20\x20flo'+'at\x20len\x20=\x20l'+'ength(d);\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20当前半径'+'\x0a\x20\x20\x20\x20float'+'\x20anglePerS'+'ide\x20=\x202.0\x20'+'*\x203.141592'+'65\x20/\x20float'+'(N);\x0a\x0a\x20\x20\x20\x20'+'//\x20映射到\x200\x20~'+'\x20anglePerS'+'ide\x20区间\x0a\x20\x20\x20'+'\x20float\x20loc'+'alAngle\x20=\x20'+'mod(theta,'+'\x20anglePerS'+'ide);\x0a\x0a\x20\x20\x20'+'\x20//\x20到边界的最大'+'半径（极坐标下的正\x20'+'N\x20边形公式）\x0a\x20\x20'+'\x20\x20float\x20ma'+'xR\x20=\x20r\x20*\x20c'+'os(anglePe'+'rSide\x20/\x202.'+'0)\x20/\x20cos(l'+'ocalAngle\x20'+'-\x20anglePer'+'Side\x20/\x202.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20len\x20<'+'=\x20maxR;\x0a}\x0a'+'\x0a//\x20距离场方式的'+'正N边形\x20soft\x20'+'mask\x0afloat'+'\x20polygonSo'+'ftMask(vec'+'2\x20p,\x20int\x20N'+',\x20float\x20ra'+'dius,\x20floa'+'t\x20edgeSoft'+'ness)\x20{\x0a\x20\x20'+'\x20\x20float\x20an'+'gle\x20=\x20atan'+'(p.y,\x20p.x)'+';\x0a\x20\x20\x20\x20floa'+'t\x20sector\x20='+'\x206.2831853'+'\x20/\x20float(N'+');\x20\x20//\x20每个扇'+'区角度\x0a\x20\x20\x20\x20//'+'\x20将角度归一化到\x20['+'-sector/2,'+'\x20sector/2]'+'\x0a\x20\x20\x20\x20float'+'\x20halfSecto'+'r\x20=\x20sector'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20float\x20lo'+'calAngle\x20='+'\x20mod(angle'+'\x20+\x20halfSec'+'tor,\x20secto'+'r)\x20-\x20halfS'+'ector;\x0a\x0a\x20\x20'+'\x20\x20//\x20多边形边界'+'在该方向的最大半径\x0a'+'\x20\x20\x20\x20float\x20'+'boundary\x20='+'\x20radius\x20*\x20'+'cos(halfSe'+'ctor)\x20/\x20co'+'s(localAng'+'le);\x0a\x0a\x20\x20\x20\x20'+'//\x20距离\x20=\x20点到'+'边界的差值\x0a\x20\x20\x20\x20'+'float\x20dist'+'\x20=\x20boundar'+'y\x20-\x20length'+'(p);\x0a\x0a\x20\x20\x20\x20'+'//\x20用\x20smoot')+('hstep\x20实现软边'+'缘\x20(edgeSof'+'tness\x20控制边缘'+'模糊宽度)\x0a\x20\x20\x20\x20'+'float\x20alph'+'a\x20=\x20smooth'+'step(0.0,\x20'+'edgeSoftne'+'ss,\x20dist);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20alpha;\x20'+'//\x200~1\x0a}\x0a\x0a'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20mediump\x20'+'float\x20A\x20=\x20'+'dot(gaussi'+'anUV,\x20gaus'+'sianUV);\x0a\x20'+'\x20\x20\x20if\x20(A\x20>'+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'valuate\x20al'+'pha\x0a\x20\x20\x20\x20me'+'diump\x20floa'+'t\x20alpha\x20=\x20'+'fastExp(-A'+'\x20*\x204.0)\x20*\x20'+'gaussianCo'+'lor.a;\x0a\x20\x20\x20'+'\x20//\x20TODO\x20u'+'ShapeN\x20alp'+'ha\x0a\x20\x20\x20\x20//\x20'+'float\x20dx\x20='+'\x20abs(gauss'+'ianCUV.x)\x20'+'/\x20gaussian'+'Size.x;\x0a\x20\x20'+'\x20\x20//\x20float'+'\x20dy\x20=\x20abs('+'gaussianCU'+'V.y)\x20/\x20gau'+'ssianSize.'+'y;\x0a\x20\x20\x20\x20//\x20'+'float\x20B\x20=\x20'+'max(dx,\x20dy'+');\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20距离度量：矩形'+'边界\x0a\x20\x20\x20\x20//\x20'+'mediump\x20fl'+'oat\x20alpha\x20'+'=\x20exp(-pow'+'(B,\x202.0)\x20*'+'\x204.0)\x20*\x20ga'+'ussianColo'+'r.a;\x0a\x0a\x20\x20\x20\x20'+'bool\x20openR'+'ingMode\x20=\x20'+'ringSize\x20>'+'\x200.0\x20&&\x20mo'+'de\x20==\x201;\x20/'+'/\x20&&\x20uCont'+'rolMode\x20=='+'\x201;\x20\x0a\x20\x20\x20\x20i'+'f\x20(openRin'+'gMode\x20&&\x20s'+'aveMargina'+'l\x20>=\x200.05)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(A\x20<\x201'+'.0\x20-\x20ringS'+'ize)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'lpha\x20=\x20max'+'(0.05,\x20alp'+'ha);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alpha\x20'+'=\x200.6;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20bool\x20ope'+'nShapeMode'+'\x20=\x20uShapeN'+'\x20>\x202;\x20//\x20&'+'&\x20uControl'+'Mode\x20==\x201;'+'\x0a\x20\x20\x20\x20if\x20(o'+'penShapeMo'+'de)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20gaussi'+'anCUV\x20*\x202.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20rad'+'ius\x20=\x201.0;')+('\x20//\x201.0\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20edgeSoft'+'ness\x20=\x200.0'+'5;\x20//\x200.05'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v\x20*=\x201.0;/'+'/0.9;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20c'+'enter\x20=\x20ve'+'c2(0.0,\x200.'+'0);\x20\x20\x20//\x20如'+'果中心不在原点，传入'+'偏移\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20alpha\x20'+'=\x20polygonS'+'oftMask(uv'+',\x20uShapeN,'+'\x20radius,\x20e'+'dgeSoftnes'+'s);\x20//\x20透明\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(!insideR'+'egularPoly'+'gon(uv,\x20uS'+'hapeN,\x20rad'+'ius,\x20cente'+'r))\x20{\x20//裁剪'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20defined(S'+'HADOW_PASS'+')\x20||\x20defin'+'ed(PICK_PA'+'SS)\x20||\x20def'+'ined(PREPA'+'SS_PASS)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20a'+'lphaClip)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'getPickOut'+'put();\x0a\x0a\x20\x20'+'\x20\x20#elif\x20SH'+'ADOW_PASS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(0'+'.0,\x200.0,\x200'+'.0,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20#elif'+'\x20PREPASS_P'+'ASS\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20fl'+'oat2vec4(v'+'LinearDept'+'h);\x0a\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x201.0\x20/'+'\x20255.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20discard;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20DI'+'THER_NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(alph'+'a,\x20id\x20*\x200.'+'013);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'gaussianCo'+'lor.xyz,\x20a'+'lpha);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),S1='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0avec3\x20unpa'+'ck111011s('+'uint\x20bits)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec3(('+'uvec3(bits'+')\x20>>\x20uvec3'+'(21u,\x2011u,'+'\x200u))\x20&\x20uv'+'ec3(0x7ffu'+',\x200x3ffu,\x20'+'0x7ffu))\x20/'+'\x20vec3(2047'+'.0,\x201023.0'+',\x202047.0)\x20'+'*\x202.0\x20-\x201.'+'0;\x0a}\x0a\x0a//\x20f'+'etch\x20quant'+'ized\x20spher'+'ical\x20harmo'+'nic\x20coeffi'+'cients\x0avoi'+'d\x20fetchSca'+'le(in\x20uvec'+'4\x20t,\x20out\x20f'+'loat\x20scale'+',\x20out\x20vec3'+'\x20a,\x20out\x20ve'+'c3\x20b,\x20out\x20'+'vec3\x20c)\x20{\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20uintBits'+'ToFloat(t.'+'x);\x0a\x20\x20\x20\x20a\x20'+'=\x20unpack11'+'1011s(t.y)'+';\x0a\x20\x20\x20\x20b\x20=\x20'+'unpack1110'+'11s(t.z);\x0a'+'\x20\x20\x20\x20c\x20=\x20un'+'pack111011'+'s(t.w);\x0a}\x0a'+'\x0a//\x20fetch\x20'+'quantized\x20'+'spherical\x20'+'harmonic\x20c'+'oefficient'+'s\x0avoid\x20fet'+'ch(in\x20uvec'+'4\x20t,\x20out\x20v'+'ec3\x20a,\x20out'+'\x20vec3\x20b,\x20o'+'ut\x20vec3\x20c,'+'\x20out\x20vec3\x20'+'d)\x20{\x0a\x20\x20\x20\x20a'+'\x20=\x20unpack1'+'11011s(t.x'+');\x0a\x20\x20\x20\x20b\x20='+'\x20unpack111'+'011s(t.y);'+'\x0a\x20\x20\x20\x20c\x20=\x20u'+'npack11101'+'1s(t.z);\x0a\x20'+'\x20\x20\x20d\x20=\x20unp'+'ack111011s'+'(t.w);\x0a}\x0a\x0a'+'void\x20fetch'+'(in\x20uint\x20t'+',\x20out\x20vec3'+'\x20a)\x20{\x0a\x20\x20\x20\x20'+'a\x20=\x20unpack'+'111011s(t)'+';\x0a}\x0a\x0a#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20splatSH_'+'1to3;\x0a\x20\x20\x20\x20'+'void\x20readS'+'HData(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20sh'+'[3],\x20out\x20f'+'loat\x20scale'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetchSca'+'le(texelFe'+'tch(splatS'+'H_1to3,\x20so'+'urce.uv,\x200'+'),\x20scale,\x20'+'sh[0],\x20sh['+'1],\x20sh[2])'+(';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20SH_BAN'+'DS\x20==\x202\x0a\x20\x20'+'\x20\x20uniform\x20'+'highp\x20usam'+'pler2D\x20spl'+'atSH_1to3;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20highp\x20u'+'sampler2D\x20'+'splatSH_4t'+'o7;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_8to11;\x0a\x20\x20'+'\x20\x20void\x20rea'+'dSHData(in'+'\x20SplatSour'+'ce\x20source,'+'\x20out\x20vec3\x20'+'sh[8],\x20out'+'\x20float\x20sca'+'le)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetchS'+'cale(texel'+'Fetch(spla'+'tSH_1to3,\x20'+'source.uv,'+'\x200),\x20scale'+',\x20sh[0],\x20s'+'h[1],\x20sh[2'+']);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetch(te'+'xelFetch(s'+'platSH_4to'+'7,\x20source.'+'uv,\x200),\x20sh'+'[3],\x20sh[4]'+',\x20sh[5],\x20s'+'h[6]);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20fetch'+'(texelFetc'+'h(splatSH_'+'8to11,\x20sou'+'rce.uv,\x200)'+'.x,\x20sh[7])'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_1to3;\x0a\x20\x20\x20'+'\x20uniform\x20h'+'ighp\x20usamp'+'ler2D\x20spla'+'tSH_4to7;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20us'+'ampler2D\x20s'+'platSH_8to'+'11;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_12to15;\x0a\x20'+'\x20\x20\x20void\x20re'+'adSHData(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20sh[15],\x20o'+'ut\x20float\x20s'+'cale)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fetc'+'hScale(tex'+'elFetch(sp'+'latSH_1to3'+',\x20source.u'+'v,\x200),\x20sca'+'le,\x20sh[0],'+'\x20sh[1],\x20sh'+'[2]);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetch('+'texelFetch'+'(splatSH_4'+'to7,\x20sourc'+'e.uv,\x200),\x20'+'sh[3],\x20sh['+'4],\x20sh[5],'+'\x20sh[6]);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fet'+'ch(texelFe'+'tch(splatS'+'H_8to11,\x20s'+'ource.uv,\x20'+'0),\x20sh[7],'+'\x20sh[8],\x20sh'+'[9],\x20sh[10'+']);\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20fetch(te'+'xelFetch(s'+'platSH_12t'+'o15,\x20sourc'+'e.uv,\x200),\x20'+'sh[11],\x20sh'+'[12],\x20sh[1'+'3],\x20sh[14]'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0a#en'+'dif\x0a'),y1='\x0aattribute'+'\x20vec3\x20vert'+'ex_positio'+'n;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20xy:\x20co'+'rnerUV,\x20z:'+'\x20render\x20or'+'der\x20offset'+'\x0aattribute'+'\x20uint\x20vert'+'ex_id_attr'+'ib;\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20render'+'\x20order\x20bas'+'e\x0a\x0auniform'+'\x20uint\x20numS'+'plats;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20tota'+'l\x20number\x20o'+'f\x20splats\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20splatO'+'rder;\x20\x20\x20\x20/'+'/\x20per-spla'+'t\x20index\x20to'+'\x20source\x20ga'+'ussian\x0a\x0a//'+'\x20initializ'+'e\x20the\x20spla'+'t\x20source\x20s'+'tructure\x0ab'+'ool\x20initSo'+'urce(out\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(splatOrde'+'r,\x200).x);\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20ui'+'nt(vertex_'+'position.z'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20if'+'\x20out\x20of\x20ra'+'nge\x20(since'+'\x20the\x20last\x20'+'block\x20of\x20s'+'plats\x20may\x20'+'be\x20partial'+'ly\x20full)\x0a\x20'+'\x20\x20\x20if\x20(sou'+'rce.order\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'vec2\x20order'+'UV\x20=\x20ivec2'+'(source.or'+'der\x20%\x20w,\x20s'+'ource.orde'+'r\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20splat\x20id\x0a'+'\x20\x20\x20\x20source'+'.id\x20=\x20texe'+'lFetch(spl'+'atOrder,\x20o'+'rderUV,\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20/'+'/\x20map\x20id\x20t'+'o\x20uv\x0a\x20\x20\x20\x20s'+'ource.uv\x20='+'\x20ivec2(sou'+'rce.id\x20%\x20w'+',\x20source.i'+'d\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20true;'+'\x0a}\x0a',v1='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0aun'+'iform\x20int\x20'+'pointCloud'+'ModeEnable'+'d;\x0auniform'+'\x20float\x20uTi'+'me;\x0aunifor'+'m\x20float\x20pr'+'erenderCTi'+'me;\x0aunifor'+'m\x20float\x20uS'+'aturation;'+'\x20//\x200.0-2.'+'0，1.0\x20为原始饱'+'和度\x0auniform'+'\x20float\x20uHu'+'eOffset;\x20\x20'+'//\x20色相偏移，单位'+'：度（360度环绕）'+'\x0auniform\x20v'+'ec3\x20clrOff'+'set;\x0aunifo'+'rm\x20vec4\x20cl'+'rScale;\x0aun'+'iform\x20floa'+'t\x20uOpacity'+';\x0auniform\x20'+'int\x20uInver'+'tOpacity;\x0a'+'\x0avarying\x20m'+'ediump\x20vec'+'2\x20gaussian'+'UV;\x0avaryin'+'g\x20mediump\x20'+'vec4\x20gauss'+'ianColor;\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianS'+'ize;\x0avaryi'+'ng\x20mediump'+'\x20vec2\x20gaus'+'sianCUV;\x0av'+'arying\x20med'+'iump\x20float'+'\x20saveMargi'+'nal;\x0a\x0a//\x20='+'====\x20高精度\x20H'+'SV/RGB\x20转换\x20'+'=====\x0ahigh'+'p\x20vec3\x20rgb'+'2hsv(highp'+'\x20vec3\x20c)\x20{'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20cMa'+'x\x20=\x20max(ma'+'x(c.r,\x20c.g'+'),\x20c.b);\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20cMin\x20'+'=\x20min(min('+'c.r,\x20c.g),'+'\x20c.b);\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20delta\x20='+'\x20cMax\x20-\x20cM'+'in\x20+\x201e-10'+';\x20//\x20避免除0\x0a'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20h\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'if\x20(delta\x20'+'>\x201e-6)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(cMax\x20==\x20'+'c.r)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20=\x20mod((c.'+'g\x20-\x20c.b)\x20/'+'\x20delta,\x206.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(cMax\x20=='+'\x20c.g)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.b\x20-'+'\x20c.r)\x20/\x20de'+'lta\x20+\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.r\x20-'+'\x20c.g)\x20/\x20de'+'lta\x20+\x204.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20/=\x206.0;\x20/'+'/\x20转到\x20[0,1]'+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(h\x20<\x200.0'+')\x20h\x20+=\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20s\x20=\x20('+'cMax\x20<\x201e-'+'6)\x20?\x200.0\x20:'+'\x20delta\x20/\x20c'+'Max;\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20v\x20=\x20cMax;'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec3(h,\x20'+'s,\x20v);\x0a}\x0a\x0a'+'highp\x20vec3'+'\x20hsv2rgb(h'+'ighp\x20vec3\x20'+'c)\x20{\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20h\x20=\x20c.x\x20*'+'\x206.0;\x20//\x200'+'-6\x0a\x20\x20\x20\x20hig'+'hp\x20float\x20s'+'\x20=\x20c.y;\x0a\x20\x20'+'\x20\x20highp\x20fl'+'oat\x20v\x20=\x20c.'+'z;\x0a\x0a\x20\x20\x20\x20hi'+'ghp\x20int\x20i\x20'+'=\x20int(floo'+'r(h));\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20f\x20=\x20h\x20-'+'\x20float(i);'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20p\x20='+'\x20v\x20*\x20(1.0\x20'+'-\x20s);\x0a\x20\x20\x20\x20'+'highp\x20floa'+'t\x20q\x20=\x20v\x20*\x20'+'(1.0\x20-\x20s\x20*'+'\x20f);\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20t\x20=\x20v\x20*\x20('+'1.0\x20-\x20s\x20*\x20'+'(1.0\x20-\x20f))'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(i\x20==\x200)\x20r'+'eturn\x20vec3'+'(v,\x20t,\x20p);'+'\x0a\x20\x20\x20\x20else\x20'+'if\x20(i\x20==\x201'+')\x20return\x20v'+'ec3(q,\x20v,\x20'+'p);\x0a\x20\x20\x20\x20el'+'se\x20if\x20(i\x20='+'=\x202)\x20retur'+'n\x20vec3(p,\x20'+'v,\x20t);\x0a\x20\x20\x20'+'\x20else\x20if\x20('+'i\x20==\x203)\x20re'+'turn\x20vec3('+'p,\x20q,\x20v);\x0a'+'\x20\x20\x20\x20else\x20i'+'f\x20(i\x20==\x204)'+'\x20return\x20ve'+'c3(t,\x20p,\x20v'+');\x0a\x20\x20\x20\x20els'+'e\x20return\x20v'+'ec3(v,\x20p,\x20'+'q);\x20//\x20i=='+'5\x0a}\x0a\x0a#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20id;\x0a#en'+'dif\x0a\x0amediu'+'mp\x20vec4\x20di'+'scardVec\x20='+'\x20vec4(0.0,'+'\x200.0,\x202.0,'+'\x201.0);\x0a\x0a#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20varying\x20'+'float\x20vLin'+'earDepth;\x0a'+'#endif\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'//\x20read\x20ga'+'ussian\x20det'+'ails\x0a\x20\x20\x20\x20S'+'platSource'+'\x20source;\x0a\x20'+'\x20\x20\x20if\x20(!in'+'itSource(s'+'ource))\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20')+('=\x20discardV'+'ec;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20saveMargi'+'nal\x20=\x20getM'+'arginalT(s'+'ource,\x20uTi'+'me);\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20float\x20'+'marginal\x20='+'\x20uOpenAnim'+'\x20==\x201\x20?\x201.'+'0\x20:\x20saveMa'+'rginal;\x0a\x20\x20'+'\x20\x20if\x20(marg'+'inal\x20<\x200.0'+'5)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Posi'+'tion\x20=\x20dis'+'cardVec;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec3'+'\x20modelCent'+'er;\x0a\x20\x20\x20\x20bo'+'ol\x20isCente'+'r4D\x20=\x20save'+'Marginal\x20>'+'=\x200.05;\x0a\x20\x20'+'\x20\x20if\x20(isCe'+'nter4D)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'delCenter\x20'+'=\x20readCent'+'er4D(sourc'+'e,\x20uTime);'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20modelCen'+'ter\x20=\x20read'+'Center(sou'+'rce);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20Spl'+'atCenter\x20c'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'center))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return;'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20int\x20'+'showCloud\x20'+'=\x20pointClo'+'udModeEnab'+'led;\x0a\x20\x20\x20\x20i'+'f\x20(prerend'+'erCTime\x20=='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(prer'+'enderCTime'+'\x20>=\x201.0\x20&&'+'\x20prerender'+'CTime\x20<\x202.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20showClo'+'ud\x20=\x201;\x0a\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(prerend'+'erCTime\x20>='+'\x202.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20proje'+'ct\x20center\x20'+'to\x20screen\x20'+'space\x0a\x20\x20\x20\x20'+'SplatCorne'+'r\x20corner;\x0a'+'\x20\x20\x20\x20if\x20(!i'+'nitCorner('+'source,\x20ce'+'nter,\x20corn'+'er,\x20showCl'+'oud))\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_P'+'osition\x20=\x20')+('discardVec'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20vec'+'4\x20clr\x20=\x20re'+'adColor(so'+'urce,\x20uTim'+'e,\x20!isCent'+'er4D,\x20poin'+'tCloudMode'+'Enabled);\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'apply\x20AA\x20c'+'ompensatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'clr.a\x20*=\x20c'+'orner.aaFa'+'ctor;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20if(margi'+'nal\x20>\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20clr.w\x20*=\x20'+'marginal;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20开关控制\x0a\x20'+'\x20\x20\x20if\x20(uCo'+'ntrolColor'+'Mode\x20==\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'tint/brigh'+'tness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr\x20=\x20'+'clr\x20*\x20clrS'+'cale\x20+\x20vec'+'4(clrOffse'+'t,\x200.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(uInvertO'+'pacity\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20clr'+'.a\x20=\x201.0\x20-'+'\x20clr.a;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20don\x27t\x20'+'allow\x20out-'+'of-range\x20a'+'lpha\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20clr\x20=\x20c'+'lamp(clr,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20evalu'+'ate\x20spheri'+'cal\x20harmon'+'ics\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20the\x20'+'model-spac'+'e\x20view\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20norm'+'alize(cent'+'er.view\x20*\x20'+'mat3(cente'+'r.modelVie'+'w));\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20rea'+'d\x20sh\x20coeff'+'icients\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sh[SH_COE'+'FFS];\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20readS'+'HData(sour'+'ce,\x20sh,\x20sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr.x'+'yz\x20+=\x20eval'+'SH(sh,\x20dir'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(co'+'rner,\x20clr.'+'w);\x0a\x0a\x20\x20\x20\x20/')+('/\x20pointClo'+'udMode\x0a\x20\x20\x20'+'\x20//\x20if\x20(po'+'intCloudMo'+'deEnabled\x20'+'==\x201)\x20{\x0a\x20\x20'+'\x20\x20//\x20\x20\x20\x20\x20c'+'lr.a\x20=\x201.0'+';\x0a\x20\x20\x20\x20//\x20}'+'\x0a\x20\x20\x20\x20highp'+'\x20vec3\x20colo'+'r\x20=\x20max(cl'+'r.xyz,\x200.0'+');\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20开关控制\x0a'+'\x20\x20\x20\x20if\x20(uC'+'ontrolColo'+'rMode\x20==\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20转\x20HSV'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'ighp\x20vec3\x20'+'hsv\x20=\x20rgb2'+'hsv(color)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20调整饱和度\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20hsv.'+'y\x20*=\x20uSatu'+'ration;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20调整'+'色相\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20hsv.x\x20=\x20f'+'ract(hsv.x'+'\x20+\x20uHueOff'+'set\x20/\x20360.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20转回\x20RGB'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor\x20=\x20hsv'+'2rgb(hsv);'+'\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wri'+'te\x20output\x0a'+'\x20\x20\x20\x20gl_Pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4(cor'+'ner.offset'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20gaussia'+'nUV\x20=\x20corn'+'er.uv;\x0a\x20\x20\x20'+'\x20gaussianC'+'UV\x20=\x20corne'+'r.cUV;\x0a\x20\x20\x20'+'\x20gaussianS'+'ize\x20=\x20corn'+'er.cSize;\x0a'+'\x20\x20\x20\x20gaussi'+'anColor\x20=\x20'+'vec4(prepa'+'reOutputFr'+'omGamma(co'+'lor),\x20clr.'+'w);\x0a\x20\x20\x20\x20ga'+'ussianColo'+'r\x20=\x20clamp('+'gaussianCo'+'lor,\x200.0,\x20'+'1.0);\x0a\x0a\x20\x20\x20'+'\x20#ifndef\x20D'+'ITHER_NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'d\x20=\x20float('+'source.id)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vLin'+'earDepth\x20='+'\x20-center.v'+'iew.z;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),x1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'aPosition;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x0a\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(aPos'+'ition,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv0\x20'+'=\x20getImage'+'EffectUV(('+'aPosition.'+'xy\x20+\x201.0)\x20'+'*\x200.5);\x0a\x20\x20'+'\x20\x20}\x0a',T1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec4\x20c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(decodeG'+'amma(color'+'.rgb)),\x20co'+'lor.a);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a',w1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec4\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec4\x20vert'+'ex_color;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20co'+'lor;\x0a\x20\x20\x20\x20v'+'oid\x20main(v'+'oid)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20=\x20vertex_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20matrix_'+'model\x20*\x20ve'+'rtex_posit'+'ion;\x0a\x20\x20\x20\x20}'+'\x0a',E1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceRefra'+'ctionIndex'+';\x0a\x0afloat\x20i'+'ridescence'+'_iorToFres'+'nel(float\x20'+'transmitte'+'dIor,\x20floa'+'t\x20incident'+'Ior)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'incidentIo'+'r)\x20/\x20(tran'+'smittedIor'+'\x20+\x20inciden'+'tIor),\x202.0'+');\x0a}\x0a\x0avec3'+'\x20iridescen'+'ce_iorToFr'+'esnel(vec3'+'\x20transmitt'+'edIor,\x20flo'+'at\x20inciden'+'tIor)\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow((transm'+'ittedIor\x20-'+'\x20vec3(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3(incid'+'entIor)),\x20'+'vec3(2.0))'+';\x0a}\x0a\x0avec3\x20'+'iridescenc'+'e_fresnelT'+'oIor(vec3\x20'+'f0)\x20{\x0a\x20\x20\x20\x20'+'vec3\x20sqrtF'+'0\x20=\x20sqrt(f'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20(vec3'+'(1.0)\x20+\x20sq'+'rtF0)\x20/\x20(v'+'ec3(1.0)\x20-'+'\x20sqrtF0);\x0a'+'}\x0a\x0avec3\x20ir'+'idescence_'+'sensitivit'+'y(float\x20op'+'d,\x20vec3\x20sh'+'ift)\x20{\x0a\x20\x20\x20'+'\x20float\x20PI\x20'+'=\x203.141592'+'653589793;'+'\x0a\x20\x20\x20\x20float'+'\x20phase\x20=\x202'+'.0\x20*\x20PI\x20*\x20'+'opd\x20*\x201.0e'+'-9;\x0a\x20\x20\x20\x20co'+'nst\x20vec3\x20v'+'al\x20=\x20vec3('+'5.4856e-13'+',\x204.4201e-'+'13,\x205.2481'+'e-13);\x0a\x20\x20\x20'+'\x20const\x20vec'+'3\x20pos\x20=\x20ve'+'c3(1.6810e'+'+06,\x201.795'+'3e+06,\x202.2'+'084e+06);\x0a'+'\x20\x20\x20\x20const\x20'+'vec3\x20var\x20='+'\x20vec3(4.32'+'78e+09,\x209.'+'3046e+09,\x20'+'6.6121e+09'+');\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20xyz\x20=\x20v'+'al\x20*\x20sqrt('+'2.0\x20*\x20PI\x20*'+'\x20var)\x20*\x20co'+'s(pos\x20*\x20ph'+'ase\x20+\x20shif'+'t)\x20*\x20exp(-'+'pow(phase,'+'\x202.0)\x20*\x20va'+'r);\x0a\x20\x20\x20\x20xy'+'z.x\x20+=\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+('cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20/=\x20vec3(1'+'.0685e-07)'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20mat3\x20XY'+'Z_TO_REC70'+'9\x20=\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x203.'+'2404542,\x20-'+'0.9692660,'+'\x20\x200.055643'+'4,\x0a\x20\x20\x20\x20\x20\x20\x20'+'-1.5371385'+',\x20\x201.87601'+'08,\x20-0.204'+'0259,\x0a\x20\x20\x20\x20'+'\x20\x20\x20-0.4985'+'314,\x20\x200.04'+'15560,\x20\x201.'+'0572252\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'return\x20XYZ'+'_TO_REC709'+'\x20*\x20xyz;\x0a}\x0a'+'\x0afloat\x20iri'+'descence_f'+'resnel(flo'+'at\x20cosThet'+'a,\x20float\x20f'+'0)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20x\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20x2\x20=\x20x\x20*'+'\x20x;\x0a\x20\x20\x20\x20fl'+'oat\x20x5\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x20\x0a\x0av'+'ec3\x20irides'+'cence_fres'+'nel(float\x20'+'cosTheta,\x20'+'vec3\x20f0)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20clamp'+'(1.0\x20-\x20cos'+'Theta,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20float\x20x2'+'\x20=\x20x\x20*\x20x;\x0a'+'\x20\x20\x20\x20float\x20'+'x5\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x20\x0a\x20'+'\x20\x20\x20return\x20'+'f0\x20+\x20(vec3'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0avec3\x20calc'+'Iridescenc'+'e(float\x20ou'+'tsideIor,\x20'+'float\x20cosT'+'heta,\x20vec3'+'\x20base_f0,\x20'+'float\x20irid'+'escenceThi'+'ckness)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceIor\x20'+'=\x20mix(outs'+'ideIor,\x20ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20float'+'\x20sinTheta2'+'Sq\x20=\x20pow(o'+'utsideIor\x20'+'/\x20iridesce')+('nceIor,\x202.'+'0)\x20*\x20(1.0\x20'+'-\x20pow(cosT'+'heta,\x202.0)'+');\x0a\x20\x20\x20\x20flo'+'at\x20cosThet'+'a2Sq\x20=\x201.0'+'\x20-\x20sinThet'+'a2Sq;\x0a\x0a\x20\x20\x20'+'\x20if\x20(cosTh'+'eta2Sq\x20<\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec3(1.0)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20c'+'osTheta2\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20r0\x20=\x20irid'+'escence_io'+'rToFresnel'+'(iridescen'+'ceIor,\x20out'+'sideIor);\x0a'+'\x20\x20\x20\x20float\x20'+'r12\x20=\x20irid'+'escence_fr'+'esnel(cosT'+'heta,\x20r0);'+'\x0a\x20\x20\x20\x20float'+'\x20r21\x20=\x20r12'+';\x0a\x20\x20\x20\x20floa'+'t\x20t121\x20=\x201'+'.0\x20-\x20r12;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20phi12\x20=\x20i'+'ridescence'+'Ior\x20<\x20outs'+'ideIor\x20?\x20P'+'I\x20:\x200.0;\x0a\x20'+'\x20\x20\x20float\x20p'+'hi21\x20=\x20PI\x20'+'-\x20phi12;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20b'+'aseIor\x20=\x20i'+'ridescence'+'_fresnelTo'+'Ior(base_f'+'0\x20+\x20vec3(0'+'.0001));\x0a\x20'+'\x20\x20\x20vec3\x20r1'+'\x20=\x20iridesc'+'ence_iorTo'+'Fresnel(ba'+'seIor,\x20iri'+'descenceIo'+'r);\x0a\x20\x20\x20\x20ve'+'c3\x20r23\x20=\x20i'+'ridescence'+'_fresnel(c'+'osTheta2,\x20'+'r1);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20phi23'+'\x20=\x20vec3(0.'+'0);\x0a\x20\x20\x20\x20if'+'\x20(baseIor['+'0]\x20<\x20iride'+'scenceIor)'+'\x20phi23[0]\x20'+'=\x20PI;\x0a\x20\x20\x20\x20'+'if\x20(baseIo'+'r[1]\x20<\x20iri'+'descenceIo'+'r)\x20phi23[1'+']\x20=\x20PI;\x0a\x20\x20'+'\x20\x20if\x20(base'+'Ior[2]\x20<\x20i'+'ridescence'+'Ior)\x20phi23'+'[2]\x20=\x20PI;\x0a'+'\x20\x20\x20\x20float\x20'+'opd\x20=\x202.0\x20'+'*\x20iridesce'+'nceIor\x20*\x20i'+'ridescence'+'Thickness\x20'+'*\x20cosTheta'+'2;\x0a\x20\x20\x20\x20vec'+'3\x20phi\x20=\x20ve'+'c3(phi21)\x20'+'+\x20phi23;\x20\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123Sq\x20=\x20c'+'lamp(r12\x20*'+'\x20r23,\x201e-5'+',\x200.9999);'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123\x20=\x20sqr')+('t(r123Sq);'+'\x0a\x20\x20\x20\x20vec3\x20'+'rs\x20=\x20pow(t'+'121,\x202.0)\x20'+'*\x20r23\x20/\x20(1'+'.0\x20-\x20r123S'+'q);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20c0\x20=\x20r'+'12\x20+\x20rs;\x0a\x20'+'\x20\x20\x20vec3\x20i\x20'+'=\x20c0;\x0a\x0a\x20\x20\x20'+'\x20vec3\x20cm\x20='+'\x20rs\x20-\x20t121'+';\x0a\x20\x20\x20\x20for\x20'+'(int\x20m\x20=\x201'+';\x20m\x20<=\x202;\x20'+'m++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20cm\x20*='+'\x20r123;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'sm\x20=\x202.0\x20*'+'\x20iridescen'+'ce_sensiti'+'vity(float'+'(m)\x20*\x20opd,'+'\x20float(m)\x20'+'*\x20phi);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20i\x20+='+'\x20cm\x20*\x20sm;\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20max'+'(i,\x20vec3(0'+'.0));\x0a}\x0a\x0av'+'ec3\x20getIri'+'descence(f'+'loat\x20cosTh'+'eta,\x20vec3\x20'+'specularit'+'y,\x20float\x20i'+'ridescence'+'Thickness)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),b1='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_irid'+'escence;\x0a#'+'endif\x0a\x0avoi'+'d\x20getIride'+'scence()\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_IRID'+'ESCENCE_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20iridescen'+'ce\x20*=\x20mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20*=\x20textur'+'e2DBias({S'+'TD_IRIDESC'+'ENCE_TEXTU'+'RE_NAME},\x20'+'{STD_IRIDE'+'SCENCE_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCE_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scence\x20=\x20i'+'ridescence'+';\x20\x0a}\x0a',A1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceThick'+'nessMax;\x0a\x0a'+'#ifdef\x20STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_iridesc'+'enceThickn'+'essMin;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'end\x20=\x20text'+'ure2DBias('+'{STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE_NAME},'+'\x20{STD_IRID'+'ESCENCETHI'+'CKNESS_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCET'+'HICKNESS_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20iridescen'+'ceThicknes'+'s\x20=\x20mix(ma'+'terial_iri'+'descenceTh'+'icknessMin'+',\x20material'+'_iridescen'+'ceThicknes'+'sMax,\x20blen'+'d);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20ir'+'idescenceT'+'hickness\x20='+'\x20material_'+'iridescenc'+'eThickness'+'Max;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dIridesce'+'nceThickne'+'ss\x20=\x20iride'+'scenceThic'+'kness;\x20\x0a}\x0a',C1='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'fractionIn'+'dex;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tIor()\x20{\x0a#'+'ifdef\x20STD_'+'IOR_CONSTA'+'NT\x0a\x20\x20\x20\x20dIo'+'r\x20=\x20materi'+'al_refract'+'ionIndex;\x0a'+'#else\x0a\x20\x20\x20\x20'+'dIor\x20=\x201.0'+'\x20/\x201.5;\x0a#e'+'ndif\x0a}\x0a',P1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20light{i}_'+'color;\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec3\x20light'+'{i}_direct'+'ion;\x0a\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20LIT_CODE'+'_LIGHTS_PO'+'INT\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20point\x20l'+'ights\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_pos'+'ition;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_ra'+'dius;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20SPOT\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20spot\x20ligh'+'ts\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20l'+'ight{i}_di'+'rection;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20light'+'{i}_innerC'+'oneAngle;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_outer'+'ConeAngle;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'3\x20light{i}'+'_position;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20vec3\x20lig'+'ht{i}_half'+'Width;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_hal'+'fHeight;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'FALLOFF\x20=='+'\x20LINEAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+('T_CODE_FAL'+'LOFF_LINEA'+'R\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20linear\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}FALLOFF\x20'+'==\x20INVERSE'+'SQUARED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ca'+'sting\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'CASTSHADOW'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'at4\x20light{'+'i}_shadowM'+'atrix;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_sh'+'adowIntens'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec4\x20ligh'+'t{i}_shado'+'wParams;\x20/'+'/\x20width,\x20h'+'eight,\x20bia'+'s,\x20radius\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_s'+'hadowSearc'+'hArea;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20light{i}'+'_cameraPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_sof'+'tShadowPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20direction'+'al\x20(cascad'+'ed)\x20shadow'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrixPa'+'lette[4];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec4\x20light'+'{i}_shadow'+'CascadeDis'+'tances;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20in'+'t\x20light{i}'+'_shadowCas')+('cadeCount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_shad'+'owCascadeB'+'lend;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'SHADOW_PCF'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2DShado'+'w\x20light{i}'+'_shadowMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_shadowM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'okie\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIGHT{i}C'+'OOKIE)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_COOKIE\x20'+'//\x20include'+'\x20functiona'+'lity\x20for\x20c'+'ookies\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20light{i'+'}_cookie;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_cooki'+'eIntensity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d'+'efined(LIG'+'HT{i}CASTS'+'HADOW)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20ligh'+'t{i}_shado'+'wMatrix;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20SPOT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20lig')+('ht{i}_cook'+'ie;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_c'+'ookieInten'+'sity;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIGHT{i}C'+'ASTSHADOW)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'light{i}_s'+'hadowMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIGH'+'T{i}COOKIE'+'_TRANSFORM'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20light{i}_'+'cookieMatr'+'ix;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c2\x20light{i'+'}_cookieOf'+'fset;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),M1='\x0afloat\x20get'+'LightDiffu'+'se(vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir,\x20vec3\x20'+'lightDirNo'+'rm)\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',D1='\x0avec3\x20eval'+'OmniLight('+'vec3\x20light'+'PosW)\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'PositionW\x20'+'-\x20lightPos'+'W;\x0a}\x0a',I1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',L1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0avoid\x20e'+'valuateLig'+'ht{i}(\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20iridesc'+'enceFresne'+'l\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20color\x0a\x20\x20\x20'+'\x20vec3\x20ligh'+'tColor\x20=\x20l'+'ight{i}_co'+'lor;\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x20&&\x20!defi'+'ned(LIT_SH'+'ADOW_CATCH'+'ER)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20return\x20if'+'\x20the\x20light'+'\x20color\x20is\x20'+'black\x20(use'+'d\x20by\x20shado'+'w\x20catcher\x20'+'-\x20this\x20way'+'\x20this\x20ligh'+'t\x20is\x20very\x20'+'cheap)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(a'+'ll(equal(l'+'ightColor,'+'\x20vec3(0.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20dir'+'ectional\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dLight'+'DirNormW\x20='+'\x20light{i}_'+'direction;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20omn'+'i\x20or\x20spot\x20'+'light\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtDirW\x20=\x20'+'evalOmniLi'+'ght(light{'+'i}_positio'+'n);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightDi'+'rNormW\x20=\x20n'+'ormalize(l'+'ightDirW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20cookie\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'COOKIE)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_FALLOF'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_TRANSF'+'ORM\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2DXform('+('light{i}_c'+'ookie,\x20lig'+'ht{i}_shad'+'owMatrix,\x20'+'light{i}_c'+'ookieInten'+'sity,\x20ligh'+'t{i}_cooki'+'eMatrix,\x20l'+'ight{i}_co'+'okieOffset'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2D(light'+'{i}_cookie'+',\x20light{i}'+'_shadowMat'+'rix,\x20light'+'{i}_cookie'+'Intensity)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}COOKIE_TR'+'ANSFORM\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'Cookie2DCl'+'ipXform(li'+'ght{i}_coo'+'kie,\x20light'+'{i}_shadow'+'Matrix,\x20li'+'ght{i}_coo'+'kieIntensi'+'ty,\x20light{'+'i}_cookieM'+'atrix,\x20lig'+'ht{i}_cook'+'ieOffset).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20cookieAtt'+'enuation\x20='+'\x20getCookie'+'2DClip(lig'+'ht{i}_cook'+'ie,\x20light{'+'i}_shadowM'+'atrix,\x20lig'+'ht{i}_cook'+'ieIntensit'+'y).{LIGHT{'+'i}COOKIE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20OMNI\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'CookieCube'+'(light{i}_'+'cookie,\x20li'+'ght{i}_sha')+('dowMatrix,'+'\x20light{i}_'+'cookieInte'+'nsity).{LI'+'GHT{i}COOK'+'IE_CHANNEL'+'};\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20mu'+'ltiply\x20lig'+'ht\x20color\x20b'+'y\x20the\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lig'+'htColor\x20*='+'\x20cookieAtt'+'enuation;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20di'+'stance\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20==\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}FAL'+'LOFF\x20==\x20LI'+'NEAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Linear(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20=\x20g'+'etFalloffI'+'nvSquared('+'light{i}_r'+'adius,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20non'+'\x20punctual\x20'+'lights\x20onl'+'y\x20gets\x20the'+'\x20range\x20win'+'dow\x20here\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Window(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20spot\x20li'+'ght\x20angle\x20'+'falloff\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20SPOT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20!de'+'fined(LIGH'+'T{i}COOKIE'+')\x20||\x20defin'+'ed(LIGHT{i'+'}COOKIE_FA'+'LLOFF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dAtten\x20'+'*=\x20getSpot'+'Effect(lig'+'ht{i}_dire'+'ction,\x20lig'+'ht{i}_inne'+'rConeAngle'+',\x20light{i}'+'_outerCone'+'Angle,\x20dLi'+'ghtDirNorm'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20if\x20(dA'+'tten\x20<\x200.0')+('0001)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20are'+'a\x20light\x20va'+'lues\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcR'+'ectLightVa'+'lues(light'+'{i}_positi'+'on,\x20light{'+'i}_halfWid'+'th,\x20light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20calcDi'+'skLightVal'+'ues(light{'+'i}_positio'+'n,\x20light{i'+'}_halfWidt'+'h,\x20light{i'+'}_halfHeig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcS'+'phereLight'+'Values(lig'+'ht{i}_posi'+'tion,\x20ligh'+'t{i}_halfW'+'idth,\x20ligh'+'t{i}_halfH'+'eight);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'lighting\x20-'+'\x20LTC\x20light'+'s\x20do\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20'+'into\x20atten'+'uation\x20tha'+'t\x20affects\x20'+'specular\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20atten'+'Diffuse\x20-\x20'+'separate\x20d'+'iffuse\x20att'+'enuation\x20f'+'or\x20non-pun'+'ctual\x20ligh'+'t\x20sources\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20NB:\x20'+'A\x20better\x20a'+'pproximati'+'on\x20perhaps'+'\x20using\x20wra'+'p\x20lighting'+'\x20could\x20be\x20'+'implemente'+'d\x20here\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20atten'+'Diffuse\x20=\x20'+'getLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dL'+'ightDirNor'+'mW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x2016.0\x20i'+'s\x20a\x20consta'+'nt\x20that\x20is'+'\x20in\x20getFal'+'loffInvSqu'+'ared()\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20==\x20'+'RECT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getRectL'+'ightDiffus'+'e(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20lightD'+'irW,\x20dLigh'+'tDirNormW)'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20attenDiff'+'use\x20=\x20getD'+'iskLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20li'+'ghtDirW,\x20d'+'LightDirNo'+'rmW)\x20*\x2016.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getSpher'+'eLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20ligh'+'tDirW,\x20dLi'+'ghtDirNorm'+'W)\x20*\x2016.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20one\x20'+'parameter\x20'+'is\x20unused\x20'+'for\x20punctu'+'al\x20lights\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20*=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20vec3('+'0.0),\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20apply\x20th'+'e\x20shadow\x20a'+'ttenuation'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'CASTSHADOW'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadow{i'+'}(vec3(0.0'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adow{i}(li'+'ghtDirW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20App')+('ly\x20shadow\x20'+'intensity\x20'+'to\x20the\x20sha'+'dow\x20value\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20=\x20mix'+'(1.0,\x20shad'+'ow,\x20light{'+'i}_shadowI'+'ntensity);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20*=\x20'+'shadow;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_SHADOW_'+'CATCHER)\x20&'+'&\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20accum'+'ulate\x20shad'+'ows\x20for\x20di'+'rectional\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ShadowCatc'+'her\x20*=\x20sha'+'dow;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20-\x20they\x20do'+'\x20not\x20mix\x20d'+'iffuse\x20lig'+'hting\x20into'+'\x20specular\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20('+'(attenDiff'+'use\x20*\x20dAtt'+'en)\x20*\x20ligh'+'tColor)\x20*\x20'+'(1.0\x20-\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(atte'+'nDiffuse\x20*'+'\x20dAtten)\x20*'+'\x20lightColo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20punctua'+'l\x20light\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(AR'+'EA_LIGHTS)'+'\x20&&\x20define'+'d(LIT_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(dAtt'+'en\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20litA'+'rgs_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20spec'+'ular\x20light'+'ing\x0a\x20\x20\x20\x20#i'+'fdef\x20LIGHT')+('{i}AFFECT_'+'SPECULARIT'+'Y\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x20//\x20area\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccSpecula'+'rLight\x20+=\x20'+'ccLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_clear'+'coat_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20ccLTC'+'SpecFres\x20*'+'\x20getDiskLi'+'ghtSpecula'+'r(litArgs_'+'clearcoat_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20+'+'=\x20ccLTCSpe'+'cFres\x20*\x20ge'+'tSphereLig'+'htSpecular'+'(litArgs_c'+'learcoat_w'+'orldNormal'+',\x20dViewDir'+'W)\x20*\x20dAtte'+'n\x20*\x20lightC'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20dLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp')+('ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20SPHERE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20d'+'LTCSpecFre'+'s\x20*\x20getSph'+'ereLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20punctual'+'\x20light\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20is\x20fres'+'nel\x20needed'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20LI'+'T_FRESNEL_'+'MODEL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'GHT{i}FRES'+'NEL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20hal'+'fDirW\x20=\x20no'+'rmalize(-d'+'LightDirNo'+'rmW\x20+\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20if\x20LTC\x20'+'lights\x20are'+'\x20present,\x20'+'specular\x20m'+'ust\x20be\x20acc'+'umulated\x20w'+'ith\x20specul'+'arity\x20(spe'+'cularity\x20i'+'s\x20pre\x20mult'+'iplied\x20by\x20'+'punctual\x20l'+'ight\x20fresn'+'el)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtspecula'+'rCC\x20=\x20getL'+'ightSpecul'+'ar(halfDir'+'W,\x20ccReflD'+'irW,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_clearcoat'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tspecularC'+'C\x20*=\x20getFr'+'esnelCC(do'+'t(dViewDir'+'W,\x20halfDir'+'W));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20lightsp'+'ecularCC;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_sheen_glo'+'ss)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20lightSpec'+'ular\x20=\x20get'+'LightSpecu'+'lar(halfDi'+'rW,\x20dReflD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightSpecu'+'lar\x20*=\x20get'+'Fresnel(do'+'t(dViewDir'+'W,\x20halfDir'+'W),\x20litArg'+'s_gloss,\x20l'+'itArgs_spe'+'cularity,\x20'+'iridescenc'+'eFresnel,\x20'+'litArgs_ir'+'idescence_'+'intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20*=\x20g'+'etFresnel('+'dot(dViewD'+'irW,\x20halfD'+'irW),\x20litA'+'rgs_gloss,'+'\x20litArgs_s')+('pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20lightSp'+'ecular\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20+=\x20light'+'Specular;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a#en'+'dif\x0a'),R1='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20vec3\x20'+'getShadowS'+'ampleCoord'+'{i}(mat4\x20s'+'hadowTrans'+'form,\x20vec4'+'\x20shadowPar'+'ams,\x20vec3\x20'+'worldPosit'+'ion,\x20vec3\x20'+'lightPos,\x20'+'inout\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'vec3\x20norma'+'l)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'urfacePosi'+'tion\x20=\x20wor'+'ldPosition'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT{i}_SHA'+'DOW_SAMPLE'+'_POINT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20len'+'gth(lightD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightDir'+'\x20=\x20surface'+'Position\x20-'+'\x20lightPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20lightD'+'ir;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_S'+'OURCE_ZBUF'+'FER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+('NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_NORMAL_O'+'FFSET\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20distScal'+'e\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20abs'+'(dot(vPosi'+'tionW\x20-\x20li'+'ghtPos,\x20li'+'ghtDirNorm'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20posi'+'tionInShad'+'owSpace\x20=\x20'+'shadowTran'+'sform\x20*\x20ve'+'c4(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM'+'PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20/=\x20po'+'sitionInSh'+'adowSpace.')+('w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20posit'+'ionInShado'+'wSpace.xy\x20'+'/=\x20positio'+'nInShadowS'+'pace.w;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20po'+'sitionInSh'+'adowSpace.'+'z\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20thi'+'s\x20is\x20curre'+'ntly\x20unuse'+'d\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20SHADOW_SA'+'MPLE_Z_BIA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20positionI'+'nShadowSpa'+'ce.z\x20+=\x20ge'+'tShadowBia'+'s(shadowPa'+'rams.x,\x20sh'+'adowParams'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20positi'+'onInShadow'+'Space.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20surfaceP'+'osition;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'evaluation'+'\x20function\x0a'+'\x20\x20\x20\x20float\x20'+'getShadow{'+'i}(vec3\x20li'+'ghtDirW)\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20shado'+'w\x20cascades'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_CASCADES'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20sel'+'ect\x20shadow'+'\x20cascade\x20m'+'atrix\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'t\x20cascadeI'+'ndex\x20=\x20get'+'ShadowCasc'+'adeIndex(l'+'ight{i}_sh'+'adowCascad'+'eDistances'+',\x20light{i}'+'_shadowCas'+'cadeCount)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'_SHADOW_CA'+'SCADE_BLEN'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'scadeIndex'+'\x20=\x20ditherS'+'hadowCasca'+'deIndex(ca'+'scadeIndex'+',\x20light{i}'+'_shadowCas'+'cadeDistan'+'ces,\x20light')+('{i}_shadow'+'CascadeCou'+'nt,\x20light{'+'i}_shadowC'+'ascadeBlen'+'d);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mat4'+'\x20shadowMat'+'rix\x20=\x20ligh'+'t{i}_shado'+'wMatrixPal'+'ette[casca'+'deIndex];\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t4\x20shadowM'+'atrix\x20=\x20li'+'ght{i}_sha'+'dowMatrix;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20DIRE'+'CTIONAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20light'+'\x20does\x20not\x20'+'have\x20a\x20pos'+'ition\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20light'+'{i}_shadow'+'Params,\x20vP'+'ositionW,\x20'+'vec3(0.0),'+'\x20lightDirW'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20shad'+'owCoord\x20=\x20'+'getShadowS'+'ampleCoord'+'{i}(shadow'+'Matrix,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20vPosition'+'W,\x20light{i'+'}_position'+',\x20lightDir'+'W,\x20dLightD'+'irNormW,\x20d'+'VertexNorm'+'alW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Fade\x20di'+'rectional\x20'+'shadow\x20at\x20'+'the\x20far\x20di'+'stance\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadowCoord'+'\x20=\x20fadeSha'+'dow(shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owCascadeD'+'istances);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20--'+'---\x20sample'+'\x20the\x20shado'+'w\x20-----\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x20/'+'/\x20-----\x20di'+'rectional\x20'+'light\x20----')+('-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wVSM16(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x205'+'.54);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20VSM_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowVSM32('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x2015.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCS'+'S_32F\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20sh'+'adowSearch'+'Area\x20=\x20vec'+'2(length(l'+'ight{i}_ha'+'lfWidth),\x20'+'length(lig'+'ht{i}_half'+'Height))\x20*'+'\x20light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCSS(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20light{i}_'+'cameraPara'+'ms,\x20shadow'+'SearchArea'+',\x20lightDir'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20light{i}'+'_softShado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF1_16'+'F\x20||\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'1_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF3'+'_16F\x20||\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCF3x3(SH'+'ADOWMAP_PA'+'SS(light{i'+'}_shadowMa'+'p),\x20shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owParams);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF5_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF5_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(SHADOWMAP'+'_PASS(ligh'+'t{i}_shado'+'wMap),\x20sha'+'dowCoord,\x20'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20S'+'POT\x20//\x20---'+'--\x20spot\x20li'+'ght\x20-----\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20V'+'SM_16F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potVSM16(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x205.54,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowSpo')+('tVSM32(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x201'+'5.0,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20shad'+'owSearchAr'+'ea\x20=\x20vec2('+'length(lig'+'ht{i}_half'+'Width),\x20le'+'ngth(light'+'{i}_halfHe'+'ight))\x20*\x20l'+'ight{i}_sh'+'adowSearch'+'Area;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(lig'+'ht{i}_shad'+'owSearchAr'+'ea);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotPCSS('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x20light{i}'+'_cameraPar'+'ams,\x20shado'+'wSearchAre'+'a,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF1_1'+'6F\x20||\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potPCF1x1('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(SHA')+('DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F5_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'5x5(SHADOW'+'MAP_PASS(l'+'ight{i}_sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20light{i'+'}_shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x20//\x20'+'-----\x20omni'+'\x20light\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCSS_32F'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P'+'UNCTUAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(len'+'gth(light{'+'i}_halfWid'+'th),\x20lengt'+'h(light{i}'+'_halfHeigh'+'t))\x20*\x20ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2(light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20shadowSe'+'archArea,\x20'+'lightDirW)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_')+('32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF3_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF3_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowOmniPC'+'F3x3(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),O1='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20areaLi'+'ghtsLutTex'+'1;\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20sampler2D'+'\x20areaLight'+'sLutTex2;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCSSPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22shadow'+'SoftPS\x22\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(SH'+'ADOW_KIND_'+'VSM)\x0a\x20\x20\x20\x20#'+'include\x20\x22s'+('hadowEVSMP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_LINEA'+'R\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fall'+'offLinearP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22fal'+'loffInvSqu'+'aredPS\x22\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20LIT_COD'+'E_LIGHTS_P'+'OINT\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'ightDirPoi'+'ntPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22spot'+'PS\x22\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_CODE_CO'+'OKIE\x0a\x20\x20\x20\x20#'+'include\x20\x22c'+'ookiePS\x22\x0a#'+'endif\x0a\x0a//\x20'+'clustered\x20'+'lighting\x0a#'+'ifdef\x20LIT_'+'CLUSTERED_'+'LIGHTS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22clustered'+'LightPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHT_'+'COUNT\x20>\x200\x0a'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20genera'+'te\x20shadow\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionSha'+'dowPS,\x20LIG'+'HT_COUNT\x22\x0a'+'\x0a\x20\x20\x20\x20//\x20LO'+'OP\x20-\x20gener'+'ate\x20light\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionLig'+'htPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a'),F1='\x0avoid\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20vec3\x20li'+'ghtmap,\x20\x0a\x20'+'\x20\x20\x20vec3\x20di'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20worldNo'+'rmal,\x20\x0a\x20\x20\x20'+'\x20vec3\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'vec3\x20refle'+'ctionDir,\x20'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20'+'\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20vertexNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'mat3\x20tbn\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x20\x0a\x20\x20'+'\x20\x20float\x20ir'+'idescenceI'+'ntensity\x0a#'+'endif\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'rectional\x20'+'lightmap\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x20&'+'&\x20defined('+'LIT_DIR_LI'+'GHTMAP)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dot(dir,\x20'+'dir)\x20<\x200.0'+'001)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'lightmap;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20vligh'+'t\x20=\x20satura'+'te(dot(dir'+',\x20-vertexN'+'ormal));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20fli'+'ght\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20nl'+'ight\x20=\x20(fl'+'ight\x20/\x20max'+'(vlight,\x200'+'.01))\x20*\x200.'+'5;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p\x20*\x20nlight'+'\x20*\x202.0;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20half'+'Dir\x20=\x20norm'+'alize(-dir'+'\x20+\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'specularLi'+'ght\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'*=\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20getFre'+'snel(dot(v'+'iewDir,\x20ha'+'lfDir),\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceInt'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'+=\x20specula'+'rLight;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20non-dire'+'ctional\x20li'+'ghtmap\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),N1='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'vec3\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_d'+'irLightMap'+';\x0a#endif\x0a\x0a'+'void\x20getLi'+'ghtMap()\x20{'+'\x0a\x0a\x20\x20\x20\x20dLig'+'htmap\x20=\x20ve'+'c3(1.0);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_LIGHT'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dLi'+'ghtmap\x20*=\x20'+'{STD_LIGHT'+'_TEXTURE_D'+'ECODE}(tex'+'ture2DBias'+'({STD_LIGH'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'LIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_LIGHTM'+'AP_DIR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dir\x20=\x20'+'texture2DB'+'ias(textur'+'e_dirLight'+'Map,\x20{STD_'+'LIGHT_TEXT'+'URE_UV},\x20t'+'extureBias'+').xyz\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dir'+'Dot\x20=\x20dot('+'dir,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightm'+'apDir\x20=\x20(d'+'irDot\x20>\x200.'+'001)\x20?\x20dir'+'\x20/\x20sqrt(di'+'rDot)\x20:\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_LIGHT_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightma'+'p\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_LIGHT_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a}\x0a',k1='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'float\x20calc'+'LightSpecu'+'lar(float\x20'+'gloss,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20h,\x20vec'+'3\x20lightDir'+'Norm,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20float\x20PI'+'\x20=\x203.14159'+'2653589793'+';\x0a\x20\x20\x20\x20floa'+'t\x20roughnes'+'s\x20=\x20max((1'+'.0\x20-\x20gloss'+')\x20*\x20(1.0\x20-'+'\x20gloss),\x200'+'.001);\x0a\x20\x20\x20'+'\x20float\x20alp'+'haRoughnes'+'s\x20=\x20roughn'+'ess\x20*\x20roug'+'hness;\x0a\x20\x20\x20'+'\x20float\x20ani'+'sotropy\x20=\x20'+'dAnisotrop'+'y;\x0a\x20\x20\x20\x20vec'+'2\x20directio'+'n\x20=\x20dAniso'+'tropyRotat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'float\x20at\x20='+'\x20mix(alpha'+'Roughness,'+'\x201.0,\x20anis'+'otropy\x20*\x20a'+'nisotropy)'+';\x0a\x20\x20\x20\x20floa'+'t\x20ab\x20=\x20cla'+'mp(alphaRo'+'ughness,\x200'+'.001,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20anisotro'+'picT\x20=\x20nor'+'malize(tbn'+'\x20*\x20vec3(di'+'rection,\x200'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicB\x20=\x20'+'normalize('+'cross(tbn['+'2],\x20anisot'+'ropicT));\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20NoH\x20=\x20dot'+'(worldNorm'+'al,\x20h);\x0a\x20\x20'+'\x20\x20float\x20To'+'H\x20=\x20dot(an'+'isotropicT'+',\x20h);\x0a\x20\x20\x20\x20'+'float\x20BoH\x20'+'=\x20dot(anis'+'otropicB,\x20'+'h);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20a2\x20=\x20'+'at\x20*\x20ab;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20vec3(ab\x20'+'*\x20ToH,\x20at\x20'+'*\x20BoH,\x20a2\x20'+'*\x20NoH);\x0a\x20\x20'+'\x20\x20float\x20v2'+'\x20=\x20dot(v,\x20'+'v);\x0a\x20\x20\x20\x20fl'+'oat\x20w2\x20=\x20a'+'2\x20/\x20v2;\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'ToV\x20=\x20dot('+'anisotropi'+'cT,\x20viewDi'+'r);\x0a\x20\x20\x20\x20fl'+'oat\x20BoV\x20=\x20'+'dot(anisot'+'ropicB,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20float\x20To'+'L\x20=\x20dot(an'+'isotropicT'+(',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20Bo'+'L\x20=\x20dot(an'+'isotropicB'+',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20No'+'V\x20=\x20dot(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20float'+'\x20NoL\x20=\x20dot'+'(worldNorm'+'al,\x20-light'+'DirNorm);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20lambdaV\x20='+'\x20NoL\x20*\x20len'+'gth(vec3(a'+'t\x20*\x20ToV,\x20a'+'b\x20*\x20BoV,\x20N'+'oV));\x0a\x20\x20\x20\x20'+'float\x20lamb'+'daL\x20=\x20NoV\x20'+'*\x20length(v'+'ec3(at\x20*\x20T'+'oL,\x20ab\x20*\x20B'+'oL,\x20NoL));'+'\x0a\x20\x20\x20\x20float'+'\x20G\x20=\x200.5\x20/'+'\x20(lambdaV\x20'+'+\x20lambdaL)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20D\x20*\x20G;'+'\x0a}\x0a\x0afloat\x20'+'getLightSp'+'ecular(vec'+'3\x20h,\x20vec3\x20'+'reflDir,\x20v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'float\x20glos'+'s,\x20mat3\x20tb'+'n)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'LightSpecu'+'lar(gloss,'+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20h,\x20ligh'+'tDirNorm,\x20'+'tbn);\x0a}\x0a'),U1='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afloa'+'t\x20calcLigh'+'tSpecular('+'float\x20glos'+'s,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20h)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20nh\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20specPow\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x20//\x20gloss'+'iness\x20is\x20l'+'inear,\x20pow'+'er\x20is\x20not;'+'\x200\x20-\x202048\x0a'+'\x0a\x20\x20\x20\x20//\x20Ha'+'ck:\x20On\x20Mac'+'\x20OS\x20X,\x20cal'+'ling\x20pow\x20w'+'ith\x20zero\x20f'+'or\x20the\x20exp'+'onent\x20gene'+'rates\x20hide'+'ous\x20artifa'+'cts\x20so\x20bia'+'s\x20up\x20a\x20lit'+'tle\x0a\x20\x20\x20\x20sp'+'ecPow\x20=\x20ma'+'x(specPow,'+'\x200.0001);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(nh,\x20'+'specPow)\x20*'+'\x20(specPow\x20'+'+\x202.0)\x20/\x208'+'.0;\x0a}\x0a\x0aflo'+'at\x20getLigh'+'tSpecular('+'vec3\x20h,\x20ve'+'c3\x20reflDir'+',\x20vec3\x20wor'+'ldNormal,\x20'+'vec3\x20viewD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m,\x20float\x20g'+'loss,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',B1='\x0a\x0afloat\x20sh'+'eenD(vec3\x20'+'normal,\x20ve'+'c3\x20h,\x20floa'+'t\x20roughnes'+'s)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20PI\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20f'+'loat\x20invR\x20'+'=\x201.0\x20/\x20(r'+'oughness\x20*'+'\x20roughness'+');\x0a\x20\x20\x20\x20flo'+'at\x20cos2h\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20*=\x20'+'cos2h;\x0a\x20\x20\x20'+'\x20float\x20sin'+'2h\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'float\x20shee'+'nV(vec3\x20no'+'rmal,\x20vec3'+'\x20viewDir,\x20'+'vec3\x20light'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20NoV\x20=\x20'+'max(dot(no'+'rmal,\x20view'+'Dir),\x200.00'+'0001);\x0a\x20\x20\x20'+'\x20float\x20NoL'+'\x20=\x20max(dot'+'(normal,\x20l'+'ight),\x200.0'+'00001);\x0a\x20\x20'+'\x20\x20return\x201'+'.0\x20/\x20(4.0\x20'+'*\x20(NoL\x20+\x20N'+'oV\x20-\x20NoL\x20*'+'\x20NoV));\x0a}\x0a'+'\x0afloat\x20get'+'LightSpecu'+'larSheen(v'+'ec3\x20h,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'irNorm,\x20fl'+'oat\x20sheenG'+'loss)\x20{\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20float\x20V\x20'+'=\x20sheenV(w'+'orldNormal'+',\x20viewDir,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20return\x20D\x20'+'*\x20V;\x0a}\x0a',z1='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afloat\x20lin'+'earizeDept'+'hWithParam'+'s(float\x20z,'+'\x20vec4\x20came'+'raParams)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'cameraPara'+'ms.w\x20==\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20(c'+'ameraParam'+'s.z\x20*\x20came'+'raParams.y'+')\x20/\x20(camer'+'aParams.y\x20'+'+\x20z\x20*\x20(cam'+'eraParams.'+'z\x20-\x20camera'+'Params.y))'+';\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20came'+'raParams.z'+'\x20+\x20z\x20*\x20(ca'+'meraParams'+'.y\x20-\x20camer'+'aParams.z)'+';\x0a}\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec4\x20ca'+'mera_param'+'s;\x20//\x20x:\x201'+'\x20/\x20camera_'+'far,\x20\x20\x20\x20\x20\x20'+'y:\x20camera_'+'far,\x20\x20\x20\x20\x20z'+':\x20camera_n'+'ear,\x20\x20\x20\x20\x20\x20'+'\x20\x20w:\x20is_or'+'tho\x0a#endif'+'\x0a\x0afloat\x20li'+'nearizeDep'+'th(float\x20z'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20linea'+'rizeDepthW'+'ithParams('+'z,\x20camera_'+'params);\x0a}'+'\x0a#endif\x0a',V1='\x0avoid\x20eval'+'uateBacken'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'SSAO\x20durin'+'g\x20lighting'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_SSAO'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ao\x20'+'*=\x20texture'+'2DLod(ssao'+'Texture,\x20g'+'l_FragCoor'+'d.xy\x20*\x20ssa'+'oTextureSi'+'zeInv,\x200.0'+').r;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20transf'+'orm\x20tangen'+'t\x20space\x20no'+'rmals\x20to\x20w'+'orld\x20space'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_NEED'+'S_NORMAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etReflDir('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20litArgs_'+'gloss,\x20dTB'+'N);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W\x20=\x20normal'+'ize(-refle'+'ct(dViewDi'+'rW,\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR_OR'+'_REFLECTIO'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20f'+'0\x20=\x201.0\x20/\x20'+'litArgs_io'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20f0\x20=\x20'+'(f0\x20-\x201.0)'+'\x20/\x20(f0\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20f0\x20'+'*=\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20i'+'ridescence'+'Fresnel\x20=\x20'+'getIridesc'+('ence(satur'+'ate(dot(dV'+'iewDirW,\x20l'+'itArgs_wor'+'ldNormal))'+',\x20litArgs_'+'specularit'+'y,\x20litArgs'+'_iridescen'+'ce_thickne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'mbient\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20addAmbie'+'nt(litArgs'+'_worldNorm'+'al);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20dDiffuse'+'Light\x20*\x20(1'+'.0\x20-\x20litAr'+'gs_specula'+'rity);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20move\x20a'+'mbient\x20col'+'or\x20out\x20of\x20'+'diffuse\x20(u'+'sed\x20by\x20Lig'+'htmapper,\x20'+'to\x20multipl'+'y\x20ambient\x20'+'color\x20by\x20a'+'ccumulated'+'\x20AO)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SEPARA'+'TE_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dA'+'mbientLigh'+'t\x20=\x20dDiffu'+'seLight;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_O'+'LD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20*=\x20mate'+'rial_ambie'+'nt;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OCCLUD'+'E_DIRECT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20occludeDi'+'ffuse(litA'+'rgs_ao);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTMAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'dLightMap('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmap,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_lightmap'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dViewDir'+'W,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dRef'+'lDirW,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('litArgs_gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dTBN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTING\x20'+'||\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tionCC(ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_glo'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_FRESNE'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccFresne'+'l\x20=\x20getFre'+'snelCC(dot'+'(dViewDirW'+',\x20litArgs_'+'clearcoat_'+'worldNorma'+'l));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccRef'+'lection\x20*='+'\x20ccFresnel'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccFres'+'nel\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20*=\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SH'+'EEN\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'addReflect'+'ionSheen(l'+'itArgs_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20litArgs_s'+'heen_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Fr')+('esnel\x20has\x20'+'to\x20be\x20appl'+'ied\x20to\x20ref'+'lections\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tion(dRefl'+'DirW,\x20litA'+'rgs_gloss)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_FRES'+'NEL_MODEL\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dRe'+'flection.r'+'gb\x20*=\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_iri'+'descence_i'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.rgb\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n.rgb\x20*=\x20l'+'itArgs_spe'+'cularityFa'+'ctor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20ARE'+'A_LIGHTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20has\x20to\x20'+'be\x20accumul'+'ated\x20diffe'+'rently\x20if\x20'+'we\x20want\x20ar'+'ea\x20lights\x20'+'to\x20look\x20co'+'rrect\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dS'+'pecularLig'+'ht\x20*=\x20litA'+'rgs_specul'+'arity;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'valuate\x20ma'+'terial\x20bas'+'ed\x20area\x20li'+'ghts\x20data,')+('\x20shared\x20by'+'\x20all\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20calcLTC'+'LightValue'+'s(litArgs_'+'gloss,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_gl'+'oss,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20LOOP\x20-\x20e'+'valuate\x20al'+'l\x20non-clus'+'tered\x20ligh'+'ts\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT_COUNT\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tEvaluatio'+'nPS,\x20LIGHT'+'_COUNT\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clust'+'ered\x20light'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addClust'+'eredLights'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20dReflDi'+'rW,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_CLEA'+'RCOAT)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_gl'+'oss,\x20litAr'+'gs_specula'+'rity,\x20dVer'+'texNormalW'+',\x20dTBN,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_gloss,'+'\x20litArgs_s'+'heen_gloss'+',\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20AR'+'EA_LIGHTS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity\x20=\x20ve'+'c3(1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dViewD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'thickness,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_albe'+'do,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_t'+'ransmissio'+'n,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_disp'+'ersion\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_iridesc'+'ence_inten'+'sity\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20ambient'+'\x20occlusion'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_OC')+('CLUDE_DIRE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20occlu'+'deDiffuse('+'litArgs_ao'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIT_OCCLU'+'DE_SPECULA'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeS'+'pecular(li'+'tArgs_glos'+'s,\x20litArgs'+'_ao,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULARIT'+'Y_FACTOR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20*=\x20litAr'+'gs_specula'+'rityFactor'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIT_OPACI'+'TY_FADES_S'+'PECULAR)\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIT_BLEN'+'D_TYPE\x20==\x20'+'NORMAL\x20||\x20'+'LIT_BLEND_'+'TYPE\x20==\x20PR'+'EMULTIPLIE'+'D\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20specLum\x20='+'\x20dot((dSpe'+'cularLight'+'\x20+\x20dReflec'+'tion.rgb\x20*'+'\x20dReflecti'+'on.a),\x20vec'+'3(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecLum\x20+=\x20'+'dot(ccSpec'+'ularLight\x20'+'*\x20litArgs_'+'clearcoat_'+'specularit'+'y\x20+\x20ccRefl'+'ection\x20*\x20l'+'itArgs_cle'+'arcoat_spe'+'cularity,\x20'+'vec3(\x200.21'+'26,\x200.7152'+',\x200.0722\x20)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_opacity\x20'+'=\x20clamp(li'+'tArgs_opac'+'ity\x20+\x20gamm'+'aCorrectIn'+'put(specLu'+'m),\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_op'+'acity\x20*=\x20m'+'aterial_al'+'phaFade;\x0a\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nd\x20chunks\x20'+'-\x20when\x20bak'+'ing\x20lightm'+'ap\x0a\x20\x20\x20\x20#if'+'def\x20LIT_LI')+('GHTMAP_BAK'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22bak'+'eLmEndPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_LIGHTM'+'AP_BAKING_'+'DIR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22bake'+'DirLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20en'+'d\x20chunks\x20-'+'\x20in\x20all\x20ot'+'her\x20cases\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22en'+'dPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22outputA'+'lphaPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_MSDF\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20applyMs'+'df(gl_Frag'+'Color);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22output'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22de'+'bugOutputP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HADOW_CATC'+'HER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20when\x20the'+'\x20shadow\x20ca'+'tcher\x20is\x20e'+'nabled\x20-\x20a'+'ccumulated'+'\x20shadows\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20=\x20vec3'+'(dShadowCa'+'tcher);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a'),G1='\x0a\x0a//\x20globa'+'ls\x0avec3\x20sR'+'eflection;'+'\x0avec3\x20dVer'+'texNormalW'+';\x0avec3\x20dTa'+'ngentW;\x0ave'+'c3\x20dBinorm'+'alW;\x0avec3\x20'+'dViewDirW;'+'\x0avec3\x20dRef'+'lDirW;\x0avec'+'3\x20ccReflDi'+'rW;\x0a\x0a//\x20Pe'+'r-light\x20te'+'mporaries\x0a'+'vec3\x20dLigh'+'tDirNormW;'+'\x0afloat\x20dAt'+'ten;\x0a\x0a//\x20O'+'utputs\x0amat'+'3\x20dTBN;\x0ave'+'c4\x20dReflec'+'tion;\x0avec3'+'\x20dDiffuseL'+'ight;\x0avec3'+'\x20dSpecular'+'Light;\x0aflo'+'at\x20ccFresn'+'el;\x0avec3\x20c'+'cReflectio'+'n;\x0avec3\x20cc'+'SpecularLi'+'ght;\x0afloat'+'\x20ccSpecula'+'rityNoFres'+';\x0avec3\x20sSp'+'ecularLigh'+'t;\x0a\x0a//\x20FRA'+'GMENT\x20SHAD'+'ER\x20INPUTS:'+'\x20UNIFORMS\x0a'+'\x0a#ifdef\x20LI'+'T_DISPERSI'+'ON\x0a\x20\x20\x20\x20uni'+'form\x20float'+'\x20material_'+'dispersion'+';\x0a#endif\x0a\x0a'+'#ifndef\x20LI'+'T_OPACITY_'+'FADES_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_alphaFad'+'e;\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_SSAO\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20s'+'saoTexture'+';\x0a\x20\x20\x20\x20unif'+'orm\x20vec2\x20s'+'saoTexture'+'SizeInv;\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20a'+'nd\x20shadowi'+'ng\x20declara'+'tions\x0a\x0a#if'+'def\x20LIT_SH'+'ADOW_CATCH'+'ER\x0a\x20\x20\x20\x20//\x20'+'a\x20variable'+'\x20to\x20accumu'+'late\x20shado'+'ws\x20for\x20sha'+'dow\x20catche'+'r\x20material'+'s\x0a\x20\x20\x20\x20floa'+'t\x20dShadowC'+'atcher\x20=\x201'+'.0;\x0a#endif'+'\x0a\x0a//\x20LOOP\x20'+'-\x20uniform\x20'+'declaratio'+'ns\x20for\x20all'+'\x20non-clust'+'ered\x20light'+'s\x0a#if\x20LIGH'+'T_COUNT\x20>\x20'+'0\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDeclarati'+'onPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+('\x20#if\x20LIT_F'+'RESNEL_MOD'+'EL\x20==\x20NONE'+'\x20&&\x20!defin'+'ed(LIT_REF'+'LECTIONS)\x20'+'&&\x20!define'+'d(LIT_DIFF'+'USE_MAP)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a//\x20lightm'+'ap\x20baking\x0a'+'#ifdef\x20STD'+'_LIGHTMAP_'+'DIR\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20bakeDir;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_L'+'IGHTMAP_BA'+'KING_ADD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20ambie'+'ntBakeOccl'+'usionContr'+'ast;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20ambient'+'BakeOcclus'+'ionBrightn'+'ess;\x0a#endi'+'f\x0a'),H1='\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4(0'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ccS'+'pecularLig'+'ht\x20=\x20vec3('+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'NONE_SLICE'+'_MODE\x20==\x20S'+'LICED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22startN'+'ineSlicedP'+'S\x22\x0a\x20\x20\x20\x20#el'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20TILE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'startNineS'+'licedTiled'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_NEEDS_NOR'+'MAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW\x20=\x20n'+'ormalize(v'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'TANGENTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_HEI'+'GHTS)\x20||\x20d'+'efined(LIT'+'_USE_NORMA'+'LS)\x20||\x20def'+'ined(LIT_U'+'SE_CLEARCO'+'AT_NORMALS'+')\x20||\x20defin'+'ed(LIT_GGX'+'_SPECULAR)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dTa'+'ngentW\x20=\x20v'+'TangentW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dBin'+'ormalW\x20=\x20v'+'BinormalW;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20getVie'+'wDir();\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_TB'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getTBN'+'(dTangentW'+',\x20dBinorma'+'lW,\x20dVerte'+'xNormalW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_TWO_S'+'IDED_LIGHT'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'handleTwoS'+'idedLighti'+'ng();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20i'+'nvoke\x20fron'+'tend\x20funct'+'ions\x0a\x20\x20\x20\x20e'+'valuateFro'+'ntend();\x0a\x0a'+('\x20\x20\x20\x20#inclu'+'de\x20\x22debugP'+'rocessFron'+'tendPS\x22\x0a\x0a\x20'+'\x20\x20\x20evaluat'+'eBackend()'+';\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a'),W1='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20vec3\x20mate'+'rial_ambie'+'nt;\x0a\x0a#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTING\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightSp'+'ecularAnis'+'oGGXPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightS'+'pecularBli'+'nnPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'combinePS\x22'+'\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tmapAddPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'ADD_AMBIEN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ambi'+'entPS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIT_MSDF'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22msdfP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'include\x20\x22v'+'iewDirPS\x22\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flDirAniso'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a//\x20li'+'ghting\x20fun'+'ctionality')+('\x0a#include\x20'+'\x22lightingP'+'S\x22\x0a\x0a'),$1='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',X1='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',q1='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec4\x20ve'+'rtex_color'+';\x0a#endif\x0a\x0a'+'#ifdef\x20NIN'+'ESLICED\x0a\x0a\x20'+'\x20\x20\x20varying'+'\x20vec2\x20vMas'+'k;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'vTiledUv;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20v'+'ec2\x20outerS'+'cale;\x0a\x20\x20\x20\x20'+'uniform\x20me'+'diump\x20vec4'+'\x20atlasRect'+';\x0a\x0a#endif\x0a'+'\x0avec3\x20dPos'+'itionW;\x0ama'+'t4\x20dModelM'+'atrix;\x0a\x0a#i'+'nclude\x20\x22tr'+'ansformCor'+'eVS\x22\x0a\x0a#ifd'+'ef\x20UV0\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'c2\x20vertex_'+'texCoord1;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22uv1VS'+'\x22\x0a#endif\x0a\x0a'+'\x0a#ifdef\x20LI'+'NEAR_DEPTH'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20#d'+'efine\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'transformV'+'S\x22\x0a\x0a#ifdef'+'\x20NORMALS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22normalC'+'oreVS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22normalVS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20TANG'+'ENTS\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_tangent;\x0a'+'#endif\x0a\x0a//'+'\x20expand\x20un'+'iforms\x20for'+'\x20uv\x20transf'+'orms\x0a#incl'+'ude\x20\x22uvTra'+'nsformUnif'+'ormsPS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'#ifdef\x20MSD'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22msdf'+'VS\x22\x0a#endif'+'\x0a\x0a#include'+'\x20\x20\x22litUser'+'CodeVS\x22\x0a\x0av'+'oid\x20main(v'+'oid)\x20{\x0a\x0a\x20\x20'+'\x20\x20#include'+('\x20\x22litUserM'+'ainStartVS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'default\x20po'+'int\x20size\x20t'+'o\x201\x20in\x20cas'+'e\x20the\x20shad'+'er\x20is\x20used'+'\x20with\x20poin'+'ts\x0a\x20\x20\x20\x20gl_'+'PointSize\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20getP'+'osition();'+'\x0a\x20\x20\x20\x20vPosi'+'tionW\x20=\x20ge'+'tWorldPosi'+'tion();\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'NORMALS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vNor'+'malW\x20=\x20get'+'Normal();\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20TANGENT'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vTangentW\x20'+'=\x20normaliz'+'e(dNormalM'+'atrix\x20*\x20ve'+'rtex_tange'+'nt.xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vBi'+'normalW\x20=\x20'+'cross(vNor'+'malW,\x20vTan'+'gentW)\x20*\x20v'+'ertex_tang'+'ent.w;\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(GGX_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3(0,\x201'+',\x200));\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV0\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv0'+'\x20=\x20getUv0('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20UV'+'0_UNMODIFI'+'ED\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv1\x20=\x20ge'+'tUv1();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20UV1_UNM'+'ODIFIED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vUv1\x20=\x20uv1'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20expa'+'nd\x20code\x20fo'+'r\x20uv\x20trans'+'forms\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'uvTransfor'+'mVS,\x20UV_TR'+'ANSFORMS_C'+'OUNT\x22\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20VE'+'RTEX_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition')+(',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vPosi'+'tionW,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20M'+'SDF\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20unpackMs'+'dfParams()'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tUserMainE'+'ndVS\x22\x0a}\x0a'),j1='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20g'+'etPickOutp'+'ut();\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20P'+'REPASS_PAS'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20float'+'2vec4(vLin'+'earDepth);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a',Y1='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avec3\x20litA'+'rgs_albedo'+';\x0a\x0a//\x20Tran'+'sparency\x0af'+'loat\x20litAr'+'gs_opacity'+';\x0a\x0a//\x20Emis'+'sion\x20color'+'\x0avec3\x20litA'+'rgs_emissi'+'on;\x0a\x0a//\x20No'+'rmal\x20direc'+'tion\x20in\x20wo'+'rld\x20space\x0a'+'vec3\x20litAr'+'gs_worldNo'+'rmal;\x0a\x0a//\x20'+'Ambient\x20oc'+'clusion\x20am'+'ount,\x20rang'+'e\x20[0..1]\x0af'+'loat\x20litAr'+'gs_ao;\x0a\x0a//'+'\x20Light\x20map'+'\x20color\x0avec'+'3\x20litArgs_'+'lightmap;\x0a'+'\x0a//\x20Light\x20'+'map\x20direct'+'ion\x0avec3\x20l'+'itArgs_lig'+'htmapDir;\x0a'+'\x0a//\x20Surfac'+'e\x20metalnes'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_met'+'alness;\x0a\x0a/'+'/\x20The\x20f0\x20s'+'pecularity'+'\x20factor\x0ave'+'c3\x20litArgs'+'_speculari'+'ty;\x0a\x0a//\x20Sp'+'ecularity\x20'+'intensity\x20'+'factor,\x20ra'+'nge\x20[0..1]'+'\x0afloat\x20lit'+'Args_specu'+'larityFact'+'or;\x0a\x0a//\x20Th'+'e\x20microfac'+'et\x20glossin'+'ess\x20factor'+',\x20range\x20[0'+'..1]\x0afloat'+'\x20litArgs_g'+'loss;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_sh'+'een_gloss;'+'\x0a\x0a//\x20The\x20c'+'olor\x20of\x20th'+'e\x20f0\x20specu'+'larity\x20fac'+'tor\x20for\x20th'+'e\x20sheen\x20la'+'yer\x0avec3\x20l'+'itArgs_she'+'en_specula'+'rity;\x0a\x0a//\x20'+'Transmissi'+'on\x20factor\x20'+'(refractio'+'n),\x20range\x20'+'[0..1]\x0aflo'+'at\x20litArgs'+'_transmiss'+'ion;\x0a\x0a//\x20U'+'niform\x20thi'+'ckness\x20of\x20'+'medium,\x20us'+'ed\x20by\x20tran'+'smission,\x20'+'range\x20[0..'+'inf]\x0afloat'+'\x20litArgs_t'+'hickness;\x0a'+'\x0a//\x20Index\x20'+'of\x20refract'+'ion\x0afloat\x20'+('litArgs_io'+'r;\x0a\x0a//\x20Dis'+'persion,\x20r'+'ange\x20[0..1'+']\x20typicall'+'y,\x20but\x20can'+'\x20be\x20higher'+'\x0afloat\x20lit'+'Args_dispe'+'rsion;\x0a\x0a//'+'\x20Iridescen'+'ce\x20effect\x20'+'intensity,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_ir'+'idescence_'+'intensity;'+'\x0a\x0a//\x20Thick'+'ness\x20of\x20th'+'e\x20iridesce'+'nt\x20microfi'+'lm\x20layer,\x20'+'value\x20is\x20i'+'n\x20nanomete'+'rs,\x20range\x20'+'[0..1000]\x0a'+'float\x20litA'+'rgs_irides'+'cence_thic'+'kness;\x0a\x0a//'+'\x20The\x20norma'+'l\x20used\x20for'+'\x20the\x20clear'+'coat\x20layer'+'\x0avec3\x20litA'+'rgs_clearc'+'oat_worldN'+'ormal;\x0a\x0a//'+'\x20Intensity'+'\x20of\x20the\x20cl'+'earcoat\x20la'+'yer,\x20range'+'\x20[0..1]\x0afl'+'oat\x20litArg'+'s_clearcoa'+'t_specular'+'ity;\x0a\x0a//\x20G'+'lossiness\x20'+'of\x20clearco'+'at\x20layer,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_cle'+'arcoat_glo'+'ss;\x0a\x0a'),K1='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20te'+'xtureBias\x20'+'=\x20-1000.0;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20texture'+'Bias;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litShade'+'rArgsPS\x22\x0a',Z1='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20vec3\x20v'+'iew_positi'+'on;\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20light_ra'+'dius;\x0a#end'+'if\x0a\x0a#if\x20SH'+'ADOW_TYPE\x20'+'==\x20PCSS_32'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22line'+'arizeDepth'+'PS\x22\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'evaluateFr'+'ontend();\x0a'+'\x0a\x20\x20\x20\x20//\x20us'+'ing\x20non-st'+'andard\x20dep'+'th,\x20i.e\x20gl'+'_FragCoord'+'.z\x0a\x20\x20\x20\x20#if'+'def\x20PERSPE'+'CTIVE_DEPT'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20gl_Fra'+'gCoord.z;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SHADOW_'+'TYPE\x20==\x20PC'+'SS_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot/omn'+'i\x20shadows\x20'+'currently\x20'+'use\x20linear'+'\x20depth.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20TODO:\x20u'+'se\x20perspec'+'tive\x20depth'+'\x20for\x20spot/'+'omni\x20the\x20s'+'ame\x20way\x20as'+'\x20direction'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT_TYPE\x20'+'!=\x20DIRECTI'+'ONAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20depth\x20=\x20l'+'inearizeDe'+'pthWithPar'+'ams(depth,'+'\x20camera_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20min(di'+'stance(vie'+'w_position'+',\x20vPositio'+'nW)\x20/\x20ligh'+'t_radius,\x20'+'0.99999);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20MODI'+'FIED_DEPTH'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20VSM_'+'16F\x20||\x20SHA'+'DOW_TYPE\x20='+'=\x20VSM_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20exponen'+'t\x20=\x2015.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+('t\x20exponent'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20depth\x20=\x20'+'2.0\x20*\x20dept'+'h\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dep'+'th\x20=\x20\x20exp('+'exponent\x20*'+'\x20depth);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(dep'+'th,\x20depth*'+'depth,\x201.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'SHADOW_TYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'tore\x20depth'+'\x20into\x20R32\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.r\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ODIFIED_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20If\x20we\x20e'+'nd\x20up\x20usin'+'g\x20modified'+'\x20depth,\x20it'+'\x20needs\x20to\x20'+'be\x20explici'+'tly\x20writte'+'n\x20to\x20gl_Fr'+'agDepth\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gDepth\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20just\x20the\x20'+'simplest\x20c'+'ode,\x20color'+'\x20is\x20not\x20wr'+'itten\x20anyw'+'ay\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'}\x0a'),Q1='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0amat'+'3\x20transpos'+'eMat3(\x20con'+'st\x20in\x20mat3'+'\x20m\x20)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20tmp;'+'\x0a\x20\x20\x20\x20tmp[\x20'+'0\x20]\x20=\x20vec3'+'(\x20m[\x200\x20].x'+',\x20m[\x201\x20].x'+',\x20m[\x202\x20].x'+'\x20);\x0a\x20\x20\x20\x20tm'+'p[\x201\x20]\x20=\x20v'+'ec3(\x20m[\x200\x20'+'].y,\x20m[\x201\x20'+'].y,\x20m[\x202\x20'+'].y\x20);\x0a\x20\x20\x20'+'\x20tmp[\x202\x20]\x20'+'=\x20vec3(\x20m['+'\x200\x20].z,\x20m['+'\x201\x20].z,\x20m['+'\x202\x20].z\x20);\x0a'+'\x20\x20\x20\x20return'+'\x20tmp;\x0a}\x0a\x0av'+'ec2\x20LTC_Uv'+'(\x20const\x20in'+'\x20vec3\x20N,\x20c'+'onst\x20in\x20ve'+'c3\x20V,\x20cons'+'t\x20in\x20float'+'\x20roughness'+'\x20)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20LUT_SIZE\x20'+'=\x2064.0;\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20LUT_SC'+'ALE\x20=\x20(\x20LU'+'T_SIZE\x20-\x201'+'.0\x20)\x20/\x20LUT'+'_SIZE;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20LUT_BIA'+'S\x20=\x200.5\x20/\x20'+'LUT_SIZE;\x0a'+'\x20\x20\x20\x20float\x20'+'dotNV\x20=\x20sa'+'turate(\x20do'+'t(\x20N,\x20V\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'texture\x20pa'+'rameterize'+'d\x20by\x20sqrt('+'\x20GGX\x20alpha'+'\x20)\x20and\x20sqr'+'t(\x201\x20-\x20cos'+'(\x20theta\x20)\x20'+')\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20vec2'+'(\x20roughnes'+'s,\x20sqrt(\x201'+'.0\x20-\x20dotNV'+'\x20)\x20);\x0a\x20\x20\x20\x20'+'uv\x20=\x20uv\x20*\x20'+'LUT_SCALE\x20'+'+\x20LUT_BIAS'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'float\x20LTC_'+'ClippedSph'+'ereFormFac'+'tor(\x20const'+'\x20in\x20vec3\x20f'+'\x20)\x20{\x0a\x20\x20\x20\x20/'+'/\x20Real-Tim'+'e\x20Area\x20Lig'+'hting:\x20a\x20J'+'ourney\x20fro'+'m\x20Research'+'\x20to\x20Produc'+'tion\x20(p.10'+'2)\x0a\x20\x20\x20\x20//\x20'+('An\x20approxi'+'mation\x20of\x20'+'the\x20form\x20f'+'actor\x20of\x20a'+'\x20horizon-c'+'lipped\x20rec'+'tangle.\x0a\x20\x20'+'\x20\x20float\x20l\x20'+'=\x20length(\x20'+'f\x20);\x0a\x20\x20\x20\x20r'+'eturn\x20max('+'\x20(\x20l\x20*\x20l\x20+'+'\x20f.z\x20)\x20/\x20('+'\x20l\x20+\x201.0\x20)'+',\x200.0\x20);\x0a}'+'\x0a\x0avec3\x20LTC'+'_EdgeVecto'+'rFormFacto'+'r(\x20const\x20i'+'n\x20vec3\x20v1,'+'\x20const\x20in\x20'+'vec3\x20v2\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20x\x20=\x20dot('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20float'+'\x20y\x20=\x20abs(\x20'+'x\x20);\x0a\x20\x20\x20\x20/'+'/\x20rational'+'\x20polynomia'+'l\x20approxim'+'ation\x20to\x20t'+'heta\x20/\x20sin'+'(\x20theta\x20)\x20'+'/\x202PI\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'0.8543985\x20'+'+\x20(\x200.4965'+'155\x20+\x200.01'+'45206\x20*\x20y\x20'+')\x20*\x20y;\x0a\x20\x20\x20'+'\x20float\x20b\x20='+'\x203.4175940'+'\x20+\x20(\x204.161'+'6724\x20+\x20y\x20)'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'float\x20v\x20=\x20'+'a\x20/\x20b;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta_sinthet'+'a\x20=\x20(\x20x\x20>\x20'+'0.0\x20)\x20?\x20v\x20'+':\x200.5\x20*\x20in'+'versesqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7\x20)\x20)\x20-\x20'+'v;\x0a\x20\x20\x20\x20ret'+'urn\x20cross('+'\x20v1,\x20v2\x20)\x20'+'*\x20theta_si'+'ntheta;\x0a}\x0a'+'\x0astruct\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'d0;\x0a\x20\x20\x20\x20ve'+'c3\x20coord1;'+'\x0a\x20\x20\x20\x20vec3\x20'+'coord2;\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'rd3;\x0a};\x0a\x0af'+'loat\x20LTC_E'+'valuateRec'+'t(\x20const\x20i'+'n\x20vec3\x20N,\x20'+'const\x20in\x20v'+'ec3\x20V,\x20con'+'st\x20in\x20vec3'+'\x20P,\x20const\x20'+'in\x20mat3\x20mI'+'nv,\x20const\x20'+'in\x20Coords\x20'+'rectCoords'+')\x20{\x0a\x20\x20\x20\x20//'+'\x20bail\x20if\x20p'+'oint\x20is\x20on'+'\x20back\x20side'+'\x20of\x20plane\x20'+'of\x20light\x0a\x20'+'\x20\x20\x20//\x20assu'+'mes\x20ccw\x20wi'+'nding\x20orde'+'r\x20of\x20light'+'\x20vertices\x0a'+'\x20\x20\x20\x20vec3\x20v'+'1\x20=\x20rectCo'+'ords.coord'+'1\x20-\x20rectCo'+'ords.coord'+'0;\x0a\x20\x20\x20\x20vec')+('3\x20v2\x20=\x20rec'+'tCoords.co'+'ord3\x20-\x20rec'+'tCoords.co'+'ord0;\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'lightNorma'+'l\x20=\x20cross('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20//\x20if'+'(\x20dot(\x20lig'+'htNormal,\x20'+'P\x20-\x20rectCo'+'ords.coord'+'0\x20)\x20<\x200.0\x20'+')\x20return\x200'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20factor'+'\x20=\x20sign(-d'+'ot(\x20lightN'+'ormal,\x20P\x20-'+'\x20rectCoord'+'s.coord0\x20)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20vec3\x20T1,'+'\x20T2;\x0a\x20\x20\x20\x20T'+'1\x20=\x20normal'+'ize(\x20V\x20-\x20N'+'\x20*\x20dot(\x20V,'+'\x20N\x20)\x20);\x0a\x20\x20'+'\x20\x20T2\x20=\x20\x20fa'+'ctor\x20*\x20cro'+'ss(\x20N,\x20T1\x20'+');\x20//\x20nega'+'ted\x20from\x20p'+'aper;\x20poss'+'ibly\x20due\x20t'+'o\x20a\x20differ'+'ent\x20handed'+'ness\x20of\x20wo'+'rld\x20coordi'+'nate\x20syste'+'m\x0a\x20\x20\x20\x20//\x20c'+'ompute\x20tra'+'nsform\x0a\x20\x20\x20'+'\x20mat3\x20mat\x20'+'=\x20mInv\x20*\x20t'+'ransposeMa'+'t3(\x20mat3(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20transfor'+'m\x20rect\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'ds[\x204\x20];\x0a\x20'+'\x20\x20\x20coords['+'\x200\x20]\x20=\x20mat'+'\x20*\x20(\x20rectC'+'oords.coor'+'d0\x20-\x20P\x20);\x0a'+'\x20\x20\x20\x20coords'+'[\x201\x20]\x20=\x20ma'+'t\x20*\x20(\x20rect'+'Coords.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20coord'+'s[\x202\x20]\x20=\x20m'+'at\x20*\x20(\x20rec'+'tCoords.co'+'ord2\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20coor'+'ds[\x203\x20]\x20=\x20'+'mat\x20*\x20(\x20re'+'ctCoords.c'+'oord3\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20//\x20'+'project\x20re'+'ct\x20onto\x20sp'+'here\x0a\x20\x20\x20\x20c'+'oords[\x200\x20]'+'\x20=\x20normali'+'ze(\x20coords'+'[\x200\x20]\x20);\x0a\x20'+'\x20\x20\x20coords['+'\x201\x20]\x20=\x20nor'+'malize(\x20co'+'ords[\x201\x20]\x20'+');\x0a\x20\x20\x20\x20coo'+'rds[\x202\x20]\x20='+'\x20normalize'+'(\x20coords[\x20'+'2\x20]\x20);\x0a\x20\x20\x20'+'\x20coords[\x203'+'\x20]\x20=\x20norma'+'lize(\x20coor'+'ds[\x203\x20]\x20);')+('\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20ve'+'ctor\x20form\x20'+'factor\x0a\x20\x20\x20'+'\x20vec3\x20vect'+'orFormFact'+'or\x20=\x20vec3('+'\x200.0\x20);\x0a\x20\x20'+'\x20\x20vectorFo'+'rmFactor\x20+'+'=\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[\x200\x20],'+'\x20coords[\x201'+'\x20]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20+=\x20'+'LTC_EdgeVe'+'ctorFormFa'+'ctor(\x20coor'+'ds[\x201\x20],\x20c'+'oords[\x202\x20]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa'+'ctor\x20+=\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[\x202\x20],\x20coo'+'rds[\x203\x20]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20+=\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[\x20'+'3\x20],\x20coord'+'s[\x200\x20]\x20);\x0a'+'\x20\x20\x20\x20//\x20adj'+'ust\x20for\x20ho'+'rizon\x20clip'+'ping\x0a\x20\x20\x20\x20f'+'loat\x20resul'+'t\x20=\x20LTC_Cl'+'ippedSpher'+'eFormFacto'+'r(\x20vectorF'+'ormFactor\x20'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0aCoor'+'ds\x20dLTCCoo'+'rds;\x0aCoord'+'s\x20getLTCLi'+'ghtCoords('+'vec3\x20light'+'Pos,\x20vec3\x20'+'halfWidth,'+'\x20vec3\x20half'+'Height){\x0a\x20'+'\x20\x20\x20Coords\x20'+'coords;\x0a\x20\x20'+'\x20\x20coords.c'+'oord0\x20=\x20li'+'ghtPos\x20+\x20h'+'alfWidth\x20-'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord1'+'\x20=\x20lightPo'+'s\x20-\x20halfWi'+'dth\x20-\x20half'+'Height;\x0a\x20\x20'+'\x20\x20coords.c'+'oord2\x20=\x20li'+'ghtPos\x20-\x20h'+'alfWidth\x20+'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord3'+'\x20=\x20lightPo'+'s\x20+\x20halfWi'+'dth\x20+\x20half'+'Height;\x0a\x20\x20'+'\x20\x20return\x20c'+'oords;\x0a}\x0a\x0a'+'float\x20dSph'+'ereRadius;'+'\x0aCoords\x20ge'+'tSphereLig'+'htCoords(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight){\x0a\x20\x20'+'\x20\x20//\x20used\x20'+'for\x20simple'+'\x20sphere\x20li')+('ght\x20fallof'+'f\x0a\x20\x20\x20\x20//\x20a'+'lso,\x20the\x20c'+'ode\x20only\x20h'+'andles\x20a\x20s'+'pherical\x20l'+'ight,\x20it\x20c'+'annot\x20be\x20n'+'on-uniform'+'ly\x20scaled\x20'+'in\x20world\x20s'+'pace,\x20and\x20'+'so\x20we\x20enfo'+'rce\x20it\x20her'+'e\x0a\x20\x20\x20\x20dSph'+'ereRadius\x20'+'=\x20max(leng'+'th(halfWid'+'th),\x20lengt'+'h(halfHeig'+'ht));\x0a\x0a\x20\x20\x20'+'\x20//\x20Billbo'+'ard\x20the\x202d'+'\x20light\x20qua'+'d\x20to\x20refle'+'ction\x20vect'+'or,\x20as\x20it\x27'+'s\x20used\x20for'+'\x20specular.'+'\x20This\x20allo'+'ws\x20us\x20to\x20u'+'se\x20disk\x20ma'+'th\x20for\x20the'+'\x20sphere.\x0a\x20'+'\x20\x20\x20vec3\x20f\x20'+'=\x20reflect('+'normalize('+'lightPos\x20-'+'\x20view_posi'+'tion),\x20vNo'+'rmalW);\x0a\x20\x20'+'\x20\x20vec3\x20w\x20='+'\x20normalize'+'(cross(f,\x20'+'halfHeight'+'));\x0a\x20\x20\x20\x20ve'+'c3\x20h\x20=\x20nor'+'malize(cro'+'ss(f,\x20w));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20getLTCL'+'ightCoords'+'(lightPos,'+'\x20w\x20*\x20dSphe'+'reRadius,\x20'+'h\x20*\x20dSpher'+'eRadius);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20LTC\x20L'+'UT\x20texture'+'\x20lookup\x0ave'+'c2\x20dLTCUV;'+'\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20vec2'+'\x20ccLTCUV;\x0a'+'#endif\x0a\x0ave'+'c2\x20getLTCL'+'ightUV(flo'+'at\x20gloss,\x20'+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+')\x0a{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20max('+'(1.0\x20-\x20glo'+'ss)\x20*\x20(1.0'+'\x20-\x20gloss),'+'\x200.001);\x0a\x20'+'\x20\x20\x20return\x20'+'LTC_Uv(\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'roughness\x20'+');\x0a}\x0a\x0a//\x20u'+'sed\x20for\x20en'+'ergy\x20conse'+'rvation\x20an'+'d\x20to\x20modul'+'ate\x20specul'+'ar\x0avec3\x20dL'+'TCSpecFres'+';\x0a#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20vec'+'3\x20ccLTCSpe'+'cFres;\x0a#en'+'dif\x0a\x0avec3\x20'+'getLTCLigh')+('tSpecFres('+'vec2\x20uv,\x20v'+'ec3\x20specul'+'arity)\x0a{\x0a\x20'+'\x20\x20\x20vec4\x20t2'+'\x20=\x20texture'+'2DLod(area'+'LightsLutT'+'ex2,\x20uv,\x200'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20spec'+'ularity\x20*\x20'+'t2.x\x20+\x20(\x20v'+'ec3(\x201.0\x20)'+'\x20-\x20specula'+'rity)\x20*\x20t2'+'.y;\x0a}\x0a\x0avoi'+'d\x20calcLTCL'+'ightValues'+'(float\x20glo'+'ss,\x20vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20speculari'+'ty,\x20float\x20'+'clearcoatG'+'loss,\x20vec3'+'\x20clearcoat'+'WorldNorma'+'l,\x20float\x20c'+'learcoatSp'+'ecularity)'+'\x0a{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x20\x0a\x0a#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20cc'+'LTCUV\x20=\x20ge'+'tLTCLightU'+'V(clearcoa'+'tGloss,\x20cl'+'earcoatWor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20ccLTCS'+'pecFres\x20=\x20'+'getLTCLigh'+'tSpecFres('+'ccLTCUV,\x20v'+'ec3(clearc'+'oatSpecula'+'rity));\x0a#e'+'ndif\x0a}\x0a\x0avo'+'id\x20calcRec'+'tLightValu'+'es(vec3\x20li'+'ghtPos,\x20ve'+'c3\x20halfWid'+'th,\x20vec3\x20h'+'alfHeight)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0avoid\x20c'+'alcDiskLig'+'htValues(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight)\x20{\x0a\x20'+'\x20\x20\x20calcRec'+'tLightValu'+'es(lightPo'+'s,\x20halfWid'+'th,\x20halfHe'+'ight);\x0a}\x0av'+'oid\x20calcSp'+'hereLightV'+'alues(vec3'+'\x20lightPos,'+'\x20vec3\x20half'+'Width,\x20vec'+'3\x20halfHeig'+'ht)\x20{\x0a\x20\x20\x20\x20')+('dLTCCoords'+'\x20=\x20getSphe'+'reLightCoo'+'rds(lightP'+'os,\x20halfWi'+'dth,\x20halfH'+'eight);\x0a}\x0a'+'\x0a//\x20An\x20ext'+'ended\x20vers'+'ion\x20of\x20the'+'\x20implement'+'ation\x20from'+'\x20\x22How\x20to\x20s'+'olve\x20a\x20cub'+'ic\x20equatio'+'n,\x20revisit'+'ed\x22\x0a//\x20htt'+'p://moment'+'singraphic'+'s.de/?p=10'+'5\x0avec3\x20Sol'+'veCubic(ve'+'c4\x20Coeffic'+'ient)\x0a{\x0a\x20\x20'+'\x20\x20float\x20pi'+'\x20=\x203.14159'+';\x0a\x20\x20\x20\x20//\x20N'+'ormalize\x20t'+'he\x20polynom'+'ial\x0a\x20\x20\x20\x20Co'+'efficient.'+'xyz\x20/=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20//\x20D'+'ivide\x20midd'+'le\x20coeffic'+'ients\x20by\x20t'+'hree\x0a\x20\x20\x20\x20C'+'oefficient'+'.yz\x20/=\x203.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20A\x20=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20floa'+'t\x20B\x20=\x20Coef'+'ficient.z;'+'\x0a\x20\x20\x20\x20float'+'\x20C\x20=\x20Coeff'+'icient.y;\x0a'+'\x20\x20\x20\x20float\x20'+'D\x20=\x20Coeffi'+'cient.x;\x0a\x0a'+'\x20\x20\x20\x20//\x20Com'+'pute\x20the\x20H'+'essian\x20and'+'\x20the\x20discr'+'iminant\x0a\x20\x20'+'\x20\x20vec3\x20Del'+'ta\x20=\x20vec3('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-'+'Coefficien'+'t.z\x20*\x20Coef'+'ficient.z\x20'+'+\x20Coeffici'+'ent.y,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20-Coef'+'ficient.y\x20'+'*\x20Coeffici'+'ent.z\x20+\x20Co'+'efficient.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dot(vec2('+'Coefficien'+'t.z,\x20-Coef'+'ficient.y)'+',\x20Coeffici'+'ent.xy)\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'float\x20Disc'+'riminant\x20='+'\x20dot(vec2('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20vec2\x20xlc'+',\x20xsc;\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20A\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_a'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20C_a\x20=\x20De'+'lta.x;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20D_a\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20')+('\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20Theta\x20'+'=\x20atan(sqr'+'t(Discrimi'+'nant),\x20-D_'+'a)\x20/\x203.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20x_1a\x20'+'=\x202.0\x20*\x20sq'+'rt(-C_a)\x20*'+'\x20cos(Theta'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20x_3'+'a\x20=\x202.0\x20*\x20'+'sqrt(-C_a)'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20x'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20((x_1a'+'\x20+\x20x_3a)\x20>'+'\x202.0\x20*\x20B)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xl\x20=\x20x_1'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'\x20=\x20x_3a;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'c\x20=\x20vec2(x'+'l\x20-\x20B,\x20A);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20D\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_d'+'\x20=\x20D;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'C_d\x20=\x20Delt'+'a.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20D'+'_d\x20=\x20-D\x20*\x20'+'Delta.y\x20+\x20'+'2.0\x20*\x20C\x20*\x20'+'Delta.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20Take\x20the\x20'+'cubic\x20root'+'\x20of\x20a\x20norm'+'alized\x20com'+'plex\x20numbe'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20Thet'+'a\x20=\x20atan(D'+'\x20*\x20sqrt(Di'+'scriminant'+'),\x20-D_d)\x20/'+'\x203.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20x_1d\x20=\x202.'+'0\x20*\x20sqrt(-'+'C_d)\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20x_3d\x20=\x20'+'2.0\x20*\x20sqrt'+'(-C_d)\x20*\x20c'+'os(Theta\x20+'+'\x20(2.0\x20/\x203.'+'0)\x20*\x20pi);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20xs;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(x_1d\x20+\x20x_'+'3d\x20<\x202.0\x20*'+'\x20C)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20xs\x20='+'\x20x_1d;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xs\x20=\x20x_3'+'d;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20xsc\x20=\x20ve'+'c2(-D,\x20xs\x20'+'+\x20C);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20flo'+'at\x20E\x20=\x20\x20xl'+'c.y\x20*\x20xsc.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20F\x20=\x20-xl'+'c.x\x20*\x20xsc.'+'y\x20-\x20xlc.y\x20')+('*\x20xsc.x;\x0a\x20'+'\x20\x20\x20float\x20G'+'\x20=\x20\x20xlc.x\x20'+'*\x20xsc.x;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20x'+'mc\x20=\x20vec2('+'C\x20*\x20F\x20-\x20B\x20'+'*\x20G,\x20-B\x20*\x20'+'F\x20+\x20C\x20*\x20E)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20Root\x20=\x20v'+'ec3(xsc.x\x20'+'/\x20xsc.y,\x20x'+'mc.x\x20/\x20xmc'+'.y,\x20xlc.x\x20'+'/\x20xlc.y);\x0a'+'\x0a\x20\x20\x20\x20if\x20(R'+'oot.x\x20<\x20Ro'+'ot.y\x20&&\x20Ro'+'ot.x\x20<\x20Roo'+'t.z)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root.xy'+'z\x20=\x20Root.y'+'xz;\x0a\x20\x20\x20\x20el'+'se\x20if\x20(Roo'+'t.z\x20<\x20Root'+'.x\x20&&\x20Root'+'.z\x20<\x20Root.'+'y)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root.xyz\x20'+'=\x20Root.xzy'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20Root;\x0a'+'}\x0a\x0afloat\x20L'+'TC_Evaluat'+'eDisk(vec3'+'\x20N,\x20vec3\x20V'+',\x20vec3\x20P,\x20'+'mat3\x20Minv,'+'\x20Coords\x20po'+'ints)\x0a{\x0a\x20\x20'+'\x20\x20//\x20const'+'ruct\x20ortho'+'normal\x20bas'+'is\x20around\x20'+'N\x0a\x20\x20\x20\x20vec3'+'\x20T1\x20=\x20norm'+'alize(V\x20-\x20'+'N\x20*\x20dot(V,'+'\x20N));\x0a\x20\x20\x20\x20'+'vec3\x20T2\x20=\x20'+'cross(N,\x20T'+'1);\x0a\x0a\x20\x20\x20\x20/'+'/\x20rotate\x20a'+'rea\x20light\x20'+'in\x20(T1,\x20T2'+',\x20N)\x20basis'+'\x0a\x20\x20\x20\x20//mat'+'3\x20R\x20=\x20tran'+'spose(mat3'+'(T1,\x20T2,\x20N'+'));\x0a\x20\x20\x20\x20ma'+'t3\x20R\x20=\x20tra'+'nsposeMat3'+'(\x20mat3(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'polygon\x20(a'+'llocate\x205\x20'+'vertices\x20f'+'or\x20clippin'+'g)\x0a\x20\x20\x20\x20vec'+'3\x20L_[\x203\x20];'+'\x0a\x20\x20\x20\x20L_[\x200'+'\x20]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[\x20'+'1\x20]\x20=\x20R\x20*\x20'+'(\x20points.c'+'oord1\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20L_['+'\x202\x20]\x20=\x20R\x20*'+'\x20(\x20points.'+'coord2\x20-\x20P'+'\x20);\x0a\x0a\x20\x20\x20\x20/'+'/\x20init\x20ell'+'ipse\x0a\x20\x20\x20\x20v'+'ec3\x20C\x20\x20=\x200'+'.5\x20*\x20(L_[0'+']\x20+\x20L_[2])'+';\x0a\x20\x20\x20\x20vec3'+'\x20V1\x20=\x200.5\x20'+'*\x20(L_[1]\x20-'+'\x20L_[2]);\x0a\x20'+'\x20\x20\x20vec3\x20V2'+'\x20=\x200.5\x20*\x20('+'L_[1]\x20-\x20L_'+'[0]);\x0a\x0a\x20\x20\x20'+'\x20C\x20\x20=\x20Minv')+('\x20*\x20C;\x0a\x20\x20\x20\x20'+'V1\x20=\x20Minv\x20'+'*\x20V1;\x0a\x20\x20\x20\x20'+'V2\x20=\x20Minv\x20'+'*\x20V2;\x0a\x0a\x20\x20\x20'+'\x20//if(dot('+'cross(V1,\x20'+'V2),\x20C)\x20>\x20'+'0.0)\x0a\x20\x20\x20\x20/'+'/\x20\x20\x20\x20retur'+'n\x200.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20compu'+'te\x20eigenve'+'ctors\x20of\x20e'+'llipse\x0a\x20\x20\x20'+'\x20float\x20a,\x20'+'b;\x0a\x20\x20\x20\x20flo'+'at\x20d11\x20=\x20d'+'ot(V1,\x20V1)'+';\x0a\x20\x20\x20\x20floa'+'t\x20d22\x20=\x20do'+'t(V2,\x20V2);'+'\x0a\x20\x20\x20\x20float'+'\x20d12\x20=\x20dot'+'(V1,\x20V2);\x0a'+'\x20\x20\x20\x20if\x20(ab'+'s(d12)\x20/\x20s'+'qrt(d11\x20*\x20'+'d22)\x20>\x200.0'+'001)\x0a\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20tr\x20=\x20'+'d11\x20+\x20d22;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20det\x20='+'\x20-d12\x20*\x20d1'+'2\x20+\x20d11\x20*\x20'+'d22;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20use'+'\x20sqrt\x20matr'+'ix\x20to\x20solv'+'e\x20for\x20eige'+'nvalues\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20det\x20'+'=\x20sqrt(det'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20u\x20='+'\x200.5\x20*\x20sqr'+'t(tr\x20-\x202.0'+'\x20*\x20det);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20v\x20=\x200.5'+'\x20*\x20sqrt(tr'+'\x20+\x202.0\x20*\x20d'+'et);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20e'+'_max\x20=\x20(u\x20'+'+\x20v)\x20*\x20(u\x20'+'+\x20v);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'e_min\x20=\x20(u'+'\x20-\x20v)\x20*\x20(u'+'\x20-\x20v);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20V1_,\x20V2_;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(d11\x20>\x20'+'d22)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12\x20*\x20V'+'1\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20V2_\x20'+'=\x20d12\x20*\x20V1'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20V1'+'_\x20=\x20d12*V2'+'\x20+\x20(e_max\x20'+'-\x20d22)*V1;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20V2_\x20=\x20d'+'12*V2\x20+\x20(e'+'_min\x20-\x20d22'+')*V1;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20e_max'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'b\x20=\x201.0\x20/\x20'+'e_min;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V1\x20=\x20'+'normalize('+'V1_);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20V2\x20=\x20n'+'ormalize(V'+'2_);\x0a\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20dot(V1'+',\x20V1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20b\x20=\x201'+'.0\x20/\x20dot(V'+'2,\x20V2);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20V1\x20*'+'=\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20*=\x20sqrt('+'b);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'V3\x20=\x20norma'+'lize(cross'+'(V1,\x20V2));'+'\x0a\x20\x20\x20\x20if\x20(d'+'ot(C,\x20V3)\x20'+'<\x200.0)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V3\x20*='+'\x20-1.0;\x0a\x0a\x20\x20'+'\x20\x20float\x20L\x20'+'\x20=\x20dot(V3,'+'\x20C);\x0a\x20\x20\x20\x20f'+'loat\x20x0\x20=\x20'+'dot(V1,\x20C)'+'\x20/\x20L;\x0a\x20\x20\x20\x20'+'float\x20y0\x20='+'\x20dot(V2,\x20C'+')\x20/\x20L;\x0a\x0a\x20\x20'+'\x20\x20float\x20E1'+'\x20=\x20inverse'+'sqrt(a);\x0a\x20'+'\x20\x20\x20float\x20E'+'2\x20=\x20invers'+'esqrt(b);\x0a'+'\x0a\x20\x20\x20\x20a\x20*=\x20'+'L\x20*\x20L;\x0a\x20\x20\x20'+'\x20b\x20*=\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20c0\x20=\x20a'+'\x20*\x20b;\x0a\x20\x20\x20\x20'+'float\x20c1\x20='+'\x20a\x20*\x20b\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0\x20+\x20y0\x20*'+'\x20y0)\x20-\x20a\x20-'+'\x20b;\x0a\x20\x20\x20\x20fl'+'oat\x20c2\x20=\x201'+'.0\x20-\x20a\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0)\x20-\x20b\x20*'+'\x20(1.0\x20+\x20y0'+'\x20*\x20y0);\x0a\x20\x20'+'\x20\x20float\x20c3'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ro'+'ots\x20=\x20Solv'+'eCubic(vec'+'4(c0,\x20c1,\x20'+'c2,\x20c3));\x0a'+'\x20\x20\x20\x20float\x20'+'e1\x20=\x20roots'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20e2\x20=\x20r'+'oots.y;\x0a\x20\x20'+'\x20\x20float\x20e3'+'\x20=\x20roots.z'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20avgDir\x20='+'\x20vec3(a\x20*\x20'+'x0\x20/\x20(a\x20-\x20'+'e2),\x20b\x20*\x20y'+'0\x20/\x20(b\x20-\x20e'+'2),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20mat3\x20'+'rotate\x20=\x20m'+'at3(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20L1\x20=\x20sqrt'+'(-e2\x20/\x20e3)'+';\x0a\x20\x20\x20\x20floa'+'t\x20L2\x20=\x20sqr'+'t(-e2\x20/\x20e1'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20formFa'+'ctor\x20=\x20max'+'(0.0,\x20L1\x20*'+'\x20L2\x20*\x20inve')+('rsesqrt((1'+'.0\x20+\x20L1\x20*\x20'+'L1)\x20*\x20(1.0'+'\x20+\x20L2\x20*\x20L2'+')));\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20const\x20'+'float\x20LUT_'+'SIZE\x20=\x2064.'+'0;\x0a\x20\x20\x20\x20con'+'st\x20float\x20L'+'UT_SCALE\x20='+'\x20(\x20LUT_SIZ'+'E\x20-\x201.0\x20)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20float\x20LU'+'T_BIAS\x20=\x200'+'.5\x20/\x20LUT_S'+'IZE;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20tab'+'ulated\x20hor'+'izon-clipp'+'ed\x20sphere\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vec2(a'+'vgDir.z\x20*\x20'+'0.5\x20+\x200.5,'+'\x20formFacto'+'r);\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv*LUT_'+'SCALE\x20+\x20LU'+'T_BIAS;\x0a\x0a\x20'+'\x20\x20\x20float\x20s'+'cale\x20=\x20tex'+'ture2DLod('+'areaLights'+'LutTex2,\x20u'+'v,\x200.0).w;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20formFac'+'tor*scale;'+'\x0a}\x0a\x0a//\x20LTC'+'_EvaluateD'+'isk\x20in\x20som'+'e\x20rare\x20cas'+'es\x20generea'+'tes\x20NaN\x20va'+'lues\x20in\x20a\x20'+'or\x20b,\x20just'+'\x20before\x20\x27f'+'loat\x20c0\x20=\x20'+'a\x20*\x20b;\x27\x0a//'+'\x20Get\x20rid\x20o'+'f\x20those\x20Na'+'n\x20values\x20b'+'efore\x20they'+'\x20propagate'+'\x20further,\x20'+'as\x20in\x20case'+'\x20of\x20bloom\x20'+'/\x20DOF\x20blur'+'s\x20they\x0a//\x20'+'propagate\x20'+'to\x20large\x20a'+'reas.\x20I\x20di'+'dn\x27t\x20find\x20'+'the\x20actual'+'\x20reason\x20wh'+'ere\x20those\x20'+'come\x20from,'+'\x20so\x20that\x20i'+'s\x20still\x20TO'+'DO.\x0a//\x20Not'+'e\x20that\x20onl'+'y\x20disk/sph'+'ere\x20lights'+'\x20are\x20causi'+'ng\x20it,\x20so\x20'+'only\x20handl'+'e\x20those.\x0af'+'loat\x20FixNa'+'n(float\x20va'+'lue)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'value\x20!=\x20v'+'alue\x20?\x200.0'+'\x20:\x20value;\x20'+'\x20//\x20isnan\x20'+'does\x20not\x20t'+'ranspile\x20c'+'orrectly,\x20'+'use\x20a\x20work'+'around\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20isnan(va'+'lue)\x20?\x200.0'+'\x20:\x20value;\x0a')+('\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afloat\x20'+'getRectLig'+'htDiffuse('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm)\x20{\x0a\x20\x20'+'\x20\x20return\x20L'+'TC_Evaluat'+'eRect(\x20wor'+'ldNormal,\x20'+'viewDir,\x20v'+'PositionW,'+'\x20mat3(\x201.0'+'\x20),\x20dLTCCo'+'ords\x20);\x0a}\x0a'+'\x0afloat\x20get'+'DiskLightD'+'iffuse(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20FixN'+'an(LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mat3('+'\x201.0\x20),\x20dL'+'TCCoords\x20)'+');\x0a}\x0a\x0afloa'+'t\x20getSpher'+'eLightDiff'+'use(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm)\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20float\x20fa'+'lloff\x20=\x20dS'+'phereRadiu'+'s\x20/\x20(dot(l'+'ightDir,\x20l'+'ightDir)\x20+'+'\x20dSphereRa'+'dius);\x0a\x20\x20\x20'+'\x20return\x20Fi'+'xNan(getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNorm)\x20*\x20f'+'alloff);\x0a}'+'\x0a\x0amat3\x20get'+'LTCLightIn'+'vMat(vec2\x20'+'uv)\x0a{\x0a\x20\x20\x20\x20'+'vec4\x20t1\x20=\x20'+'texture2DL'+'od(areaLig'+'htsLutTex1'+',\x20uv,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3(\x20t1.x,\x20'+'0,\x20t1.y\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3(\x20\x20\x20\x200,'+'\x201,\x20\x20\x20\x200\x20)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3(\x20t1.z'+',\x200,\x20t1.w\x20'+')\x0a\x20\x20\x20\x20);\x0a}'+'\x0a\x0afloat\x20ca'+'lcRectLigh'+'tSpecular('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir')+(',\x20vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20mat'+'3\x20mInv\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afl'+'oat\x20getRec'+'tLightSpec'+'ular(vec3\x20'+'worldNorma'+'l,\x20vec3\x20vi'+'ewDir)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'calcRectLi'+'ghtSpecula'+'r(worldNor'+'mal,\x20viewD'+'ir,\x20dLTCUV'+');\x0a}\x0a\x0afloa'+'t\x20calcDisk'+'LightSpecu'+'lar(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20mInv'+'\x20=\x20getLTCL'+'ightInvMat'+'(uv);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_EvaluateD'+'isk(\x20world'+'Normal,\x20vi'+'ewDir,\x20vPo'+'sitionW,\x20m'+'Inv,\x20dLTCC'+'oords\x20);\x0a}'+'\x0a\x0afloat\x20ge'+'tDiskLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a\x0a'+'float\x20getS'+'phereLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a'),J1='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_metaln'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tMetalness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20metal'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20metalness'+'\x20*=\x20materi'+'al_metalne'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20metalne'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_METAL'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_METAL'+'NESS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_META'+'LNESS_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_VERTEX\x0a\x20\x20'+'\x20\x20metalnes'+'s\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_METALNES'+'S_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dMet'+'alness\x20=\x20m'+'etalness;\x0a'+'}\x0a',eP='\x0auniform\x20s'+'ampler2D\x20t'+'exture_msd'+'fMap;\x0a\x0aflo'+'at\x20median('+'float\x20r,\x20f'+'loat\x20g,\x20fl'+'oat\x20b)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'max(min(r,'+'\x20g),\x20min(m'+'ax(r,\x20g),\x20'+'b));\x0a}\x0a\x0afl'+'oat\x20map\x20(f'+'loat\x20min,\x20'+'float\x20max,'+'\x20float\x20v)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20(v\x20-\x20mi'+'n)\x20/\x20(max\x20'+'-\x20min);\x0a}\x0a'+'\x0auniform\x20f'+'loat\x20font_'+'sdfIntensi'+'ty;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20float\x20f'+'ont_pxrang'+'e;\x20\x20\x20\x20\x20\x20//'+'\x20the\x20numbe'+'r\x20of\x20pixel'+'s\x20between\x20'+'inside\x20and'+'\x20outside\x20t'+'he\x20font\x20in'+'\x20SDF\x0aunifo'+'rm\x20float\x20f'+'ont_textur'+'eWidth;\x20//'+'\x20the\x20width'+'\x20of\x20the\x20te'+'xture\x20atla'+'s\x0a\x0a#ifndef'+'\x20LIT_MSDF_'+'TEXT_ATTRI'+'BUTE\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20shadow_co'+'lor;\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20shadow_o'+'ffset;\x0a#el'+'se\x0a\x20\x20\x20\x20var'+'ying\x20vec4\x20'+'outline_co'+'lor;\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20outline'+'_thickness'+';\x0a\x20\x20\x20\x20vary'+'ing\x20vec4\x20s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'shadow_off'+'set;\x0a#endi'+'f\x0a\x0avec4\x20ap'+'plyMsdf(ve'+'c4\x20color)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Convert\x20to'+'\x20linear\x20sp'+'ace\x20before'+'\x20processin'+'g\x0a\x20\x20\x20\x20//\x20T'+'ODO:\x20ideal'+'ly\x20this\x20wo'+'uld\x20receiv'+'e\x20the\x20colo'+'r\x20in\x20linea'+'r\x20space,\x20b'+'ut\x20that\x20wo'+'uld\x20requir'+'e\x20larger\x20c'+'hanges\x0a\x20\x20\x20'+('\x20//\x20on\x20the'+'\x20engine\x20si'+'de,\x20with\x20t'+'he\x20way\x20pre'+'multiplied'+'\x20alpha\x20is\x20'+'handled\x20as'+'\x20well.\x0a\x20\x20\x20'+'\x20color.rgb'+'\x20=\x20gammaCo'+'rrectInput'+'(color.rgb'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20sample\x20th'+'e\x20field\x0a\x20\x20'+'\x20\x20vec3\x20tsa'+'mple\x20=\x20tex'+'ture2D(tex'+'ture_msdfM'+'ap,\x20vUv0).'+'rgb;\x0a\x20\x20\x20\x20v'+'ec2\x20uvShdw'+'\x20=\x20vUv0\x20-\x20'+'shadow_off'+'set;\x0a\x20\x20\x20\x20v'+'ec3\x20ssampl'+'e\x20=\x20textur'+'e2D(textur'+'e_msdfMap,'+'\x20uvShdw).r'+'gb;\x0a\x0a\x20\x20\x20\x20/'+'/\x20get\x20the\x20'+'signed\x20dis'+'tance\x20valu'+'e\x0a\x20\x20\x20\x20floa'+'t\x20sigDist\x20'+'=\x20median(t'+'sample.r,\x20'+'tsample.g,'+'\x20tsample.b'+');\x0a\x20\x20\x20\x20flo'+'at\x20sigDist'+'Shdw\x20=\x20med'+'ian(ssampl'+'e.r,\x20ssamp'+'le.g,\x20ssam'+'ple.b);\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20limi'+'t\x20-\x20smalle'+'r\x20value\x20ma'+'kes\x20for\x20sh'+'arper\x20but\x20'+'more\x20alias'+'ed\x20text,\x20e'+'specially\x20'+'on\x20angles\x0a'+'\x20\x20\x20\x20//\x20too'+'\x20large\x20val'+'ue\x20(0.5)\x20c'+'reates\x20a\x20d'+'ark\x20glow\x20a'+'round\x20the\x20'+'letters\x0a\x20\x20'+'\x20\x20float\x20sm'+'oothingMax'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20vec'+'2\x20w\x20=\x20fwid'+'th(vUv0);\x0a'+'\x20\x20\x20\x20float\x20'+'smoothing\x20'+'=\x20clamp(w.'+'x\x20*\x20font_t'+'extureWidt'+'h\x20/\x20font_p'+'xrange,\x200.'+'0,\x20smoothi'+'ngMax);\x0a\x0a\x20'+'\x20\x20\x20float\x20m'+'apMin\x20=\x200.'+'05;\x0a\x20\x20\x20\x20fl'+'oat\x20mapMax'+'\x20=\x20clamp(1'+'.0\x20-\x20font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20float\x20')+('sigDistInn'+'er\x20=\x20map(m'+'apMin,\x20map'+'Max,\x20sigDi'+'st);\x0a\x20\x20\x20\x20f'+'loat\x20sigDi'+'stOutline\x20'+'=\x20map(mapM'+'in,\x20mapMax'+',\x20sigDist\x20'+'+\x20outline_'+'thickness)'+';\x0a\x20\x20\x20\x20sigD'+'istShdw\x20=\x20'+'map(mapMin'+',\x20mapMax,\x20'+'sigDistShd'+'w\x20+\x20outlin'+'e_thicknes'+'s);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20cente'+'r\x20=\x200.5;\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20smoo'+'thing\x20and\x20'+'use\x20to\x20gen'+'erate\x20opac'+'ity\x0a\x20\x20\x20\x20fl'+'oat\x20inside'+'\x20=\x20smooths'+'tep(center'+'-smoothing'+',\x20center+s'+'moothing,\x20'+'sigDistInn'+'er);\x0a\x20\x20\x20\x20f'+'loat\x20outli'+'ne\x20=\x20smoot'+'hstep(cent'+'er-smoothi'+'ng,\x20center'+'+smoothing'+',\x20sigDistO'+'utline);\x0a\x20'+'\x20\x20\x20float\x20s'+'hadow\x20=\x20sm'+'oothstep(c'+'enter-smoo'+'thing,\x20cen'+'ter+smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20vec4\x20t'+'color\x20=\x20(o'+'utline\x20>\x20i'+'nside)\x20?\x20o'+'utline\x20*\x20v'+'ec4(outlin'+'e_color.a\x20'+'*\x20outline_'+'color.rgb,'+'\x20outline_c'+'olor.a)\x20:\x20'+'vec4(0.0);'+'\x0a\x20\x20\x20\x20tcolo'+'r\x20=\x20mix(tc'+'olor,\x20colo'+'r,\x20inside)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20scolor\x20='+'\x20(shadow\x20>'+'\x20outline)\x20'+'?\x20shadow\x20*'+'\x20vec4(shad'+'ow_color.a'+'\x20*\x20shadow_'+'color.rgb,'+'\x20shadow_co'+'lor.a)\x20:\x20t'+'color;\x0a\x20\x20\x20'+'\x20tcolor\x20=\x20'+'mix(scolor'+',\x20tcolor,\x20'+'outline);\x0a'+'\x0a\x20\x20\x20\x20//\x20Co'+'nvert\x20back'+'\x20to\x20gamma\x20'+'space\x20befo'+'re\x20returni'+'ng\x0a\x20\x20\x20\x20tco'+'lor.rgb\x20=\x20'+'gammaCorre'+'ctOutput(t'+'color.rgb)'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20return\x20tc'+'olor;\x0a}\x0a'),tP='\x0a\x0avec3\x20get'+'SpecularMo'+'dulate(in\x20'+'vec3\x20specu'+'larity,\x20in'+'\x20vec3\x20albe'+'do,\x20in\x20flo'+'at\x20metalne'+'ss,\x20in\x20flo'+'at\x20f0)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20di'+'electricF0'+'\x20=\x20f0\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(diel'+'ectricF0,\x20'+'albedo,\x20me'+'talness);\x0a'+'}\x0a\x0avec3\x20ge'+'tAlbedoMod'+'ulate(in\x20v'+'ec3\x20albedo'+',\x20in\x20float'+'\x20metalness'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20albed'+'o\x20*\x20(1.0\x20-'+'\x20metalness'+');\x0a}\x0a',sP='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20vec2\x20u'+'v0;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2DArra'+'y\x20morphTex'+'ture;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20float\x20'+'morphFacto'+'r[{MORPH_T'+'EXTURE_MAX'+'_COUNT}];\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20ui'+'nt\x20morphIn'+'dex[{MORPH'+'_TEXTURE_M'+'AX_COUNT}]'+';\x0a\x20\x20\x20\x20unif'+'orm\x20int\x20co'+'unt;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PH_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20aa'+'bbSize;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20a'+'abbMin;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20highp\x20vec'+'3\x20color\x20=\x20'+'vec3(0,\x200,'+'\x200);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'pixelCoord'+'s\x20=\x20ivec2('+'uv0\x20*\x20vec2'+'(textureSi'+'ze(morphTe'+'xture,\x200).'+'xy));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20count;\x20'+'i++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'int\x20textur'+'eIndex\x20=\x20m'+'orphIndex['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20delta\x20=\x20t'+'exelFetch('+'morphTextu'+'re,\x20ivec3('+'pixelCoord'+'s,\x20int(tex'+'tureIndex)'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20color\x20+'+'=\x20morphFac'+'tor[i]\x20*\x20d'+'elta;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20MORPH_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20color\x20'+'=\x20(color\x20-'+'\x20aabbMin)\x20'+'/\x20aabbSize'+'\x20*\x2065535.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20u'+'vec4(color'+',\x201u);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20ve'+'c4(color,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a',iP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20}\x0a',rP='\x0aattribute'+'\x20vec3\x20vert'+'ex_outline'+'Parameters'+';\x0aattribut'+'e\x20vec3\x20ver'+'tex_shadow'+'Parameters'+';\x0a\x0avarying'+'\x20vec4\x20outl'+'ine_color;'+'\x0avarying\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0avaryin'+'g\x20vec4\x20sha'+'dow_color;'+'\x0avarying\x20v'+'ec2\x20shadow'+'_offset;\x0a\x0a'+'void\x20unpac'+'kMsdfParam'+'s()\x20{\x0a\x20\x20\x20\x20'+'vec3\x20littl'+'e\x20=\x20mod(ve'+'rtex_outli'+'neParamete'+'rs,\x20256.);'+'\x0a\x20\x20\x20\x20vec3\x20'+'big\x20=\x20(ver'+'tex_outlin'+'eParameter'+'s\x20-\x20little'+')\x20/\x20256.;\x0a'+'\x0a\x20\x20\x20\x20outli'+'ne_color.r'+'b\x20=\x20little'+'.xy\x20/\x20255.'+';\x0a\x20\x20\x20\x20outl'+'ine_color.'+'ga\x20=\x20big.x'+'y\x20/\x20255.;\x0a'+'\x0a\x20\x20\x20\x20//\x20_o'+'utlineThic'+'knessScale'+'\x20===\x200.2\x0a\x20'+'\x20\x20\x20outline'+'_thickness'+'\x20=\x20little.'+'z\x20/\x20255.\x20*'+'\x200.2;\x0a\x0a\x20\x20\x20'+'\x20little\x20=\x20'+'mod(vertex'+'_shadowPar'+'ameters,\x202'+'56.);\x0a\x20\x20\x20\x20'+'big\x20=\x20(ver'+'tex_shadow'+'Parameters'+'\x20-\x20little)'+'\x20/\x20256.;\x0a\x0a'+'\x20\x20\x20\x20shadow'+'_color.rb\x20'+'=\x20little.x'+'y\x20/\x20255.;\x0a'+'\x20\x20\x20\x20shadow'+'_color.ga\x20'+'=\x20big.xy\x20/'+'\x20255.;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+'ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20shado'+'w_offset\x20='+'\x20(vec2(lit'+'tle.z,\x20big'+'.z)\x20/\x20127.'+'\x20-\x201.)\x20*\x200'+'.005;\x0a}\x0a',aP='\x0amat3\x20dNor'+'malMatrix;'+'\x0a\x0avec3\x20get'+'Normal()\x20{'+'\x0a\x20\x20\x20\x20dNorm'+'alMatrix\x20='+'\x20getNormal'+'Matrix(dMo'+'delMatrix)'+';\x0a\x20\x20\x20\x20vec3'+'\x20localNorm'+'al\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}\x0a',nP='\x0a\x0aattribut'+'e\x20vec3\x20ver'+'tex_normal'+';\x0a\x0auniform'+'\x20mat3\x20matr'+'ix_normal;'+'\x0a\x0a#ifdef\x20M'+'ORPHING_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20morphNor'+'malTex;\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'morphNorma'+'lTex;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0avec3\x20'+'getLocalNo'+'rmal(vec3\x20'+'vertexNorm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20vec3\x20loca'+'lNormal\x20=\x20'+'vertex_nor'+'mal;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_NORM'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ivec2\x20mo'+'rphUV\x20=\x20ge'+'tTextureMo'+'rphCoords('+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'orphNormal'+'\x20=\x20vec3(te'+'xelFetch(m'+'orphNormal'+'Tex,\x20ivec2'+'(morphUV),'+'\x200).xyz)\x20/'+'\x2065535.0\x20*'+'\x202.0\x20-\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphNo'+'rmal\x20=\x20tex'+'elFetch(mo'+'rphNormalT'+'ex,\x20ivec2('+'morphUV),\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20localNor'+'mal\x20+=\x20mor'+'phNormal;\x0a'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20localN'+'ormal;\x0a}\x0a\x0a'+'#if\x20define'+'d(SKIN)\x20||'+'\x20defined(B'+'ATCH)\x0a\x20\x20\x20\x20'+'mat3\x20getNo'+'rmalMatrix'+'(mat4\x20mode'+'lMatrix)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mat3'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20ma'+'t3\x20getNorm'+'alMatrix(m'+'at4\x20modelM'+'atrix)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20mat3(m'+'odelMatrix'+'[0].xyz,\x20m'+('odelMatrix'+'[1].xyz,\x20m'+'odelMatrix'+'[2].xyz);\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20mat3'+'\x20getNormal'+'Matrix(mat'+'4\x20modelMat'+'rix)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_n'+'ormal;\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'),oP='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_bumpin'+'ess;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_NORMAL'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_normalDe'+'tailMapBum'+'piness;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20bl'+'endNormals'+'(vec3\x20n1,\x20'+'vec3\x20n2)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20https://'+'blog.selfs'+'hadow.com/'+'publicatio'+'ns/blendin'+'g-in-detai'+'l/#detail-'+'oriented\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20n1\x20'+'+=\x20vec3(0,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20n2\x20*'+'=\x20vec3(-1,'+'\x20-1,\x201);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20n1\x20*\x20d'+'ot(n1,\x20n2)'+'\x20/\x20n1.z\x20-\x20'+'n2;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0avo'+'id\x20getNorm'+'al()\x20{\x0a#if'+'def\x20STD_NO'+'RMAL_TEXTU'+'RE\x0a\x20\x20\x20\x20vec'+'3\x20normalMa'+'p\x20=\x20{STD_N'+'ORMAL_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_NORMAL_TE'+'XTURE_NAME'+'},\x20{STD_NO'+'RMAL_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+');\x0a\x20\x20\x20\x20nor'+'malMap\x20=\x20m'+'ix(vec3(0.'+'0,\x200.0,\x201.'+'0),\x20normal'+'Map,\x20mater'+'ial_bumpin'+'ess);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMALDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20norm'+'alDetailMa'+'p\x20=\x20{STD_N'+'ORMALDETAI'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_NOR'+'MALDETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'NORMALDETA'+'IL_TEXTURE'+'_UV},\x20text'+'ureBias));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20n'+'ormalDetai'+'lMap\x20=\x20mix'+'(vec3(0.0,'+'\x200.0,\x201.0)'+',\x20normalDe'+'tailMap,\x20m'+'aterial_no'+'rmalDetail'+'MapBumpine'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20blend'+'Normals(no'+'rmalMap,\x20n'+('ormalDetai'+'lMap);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20normal'+'ize(dTBN\x20*'+'\x20normalMap'+');\x0a#else\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20dVerte'+'xNormalW;\x0a'+'#endif\x0a}\x0a'),lP='\x0auniform\x20f'+'loat\x20mater'+'ial_opacit'+'y;\x0a\x0avoid\x20g'+'etOpacity('+')\x20{\x0a\x20\x20\x20\x20dA'+'lpha\x20=\x20mat'+'erial_opac'+'ity;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_OPACITY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20dAlpha\x20*='+'\x20texture2D'+'Bias({STD_'+'OPACITY_TE'+'XTURE_NAME'+'},\x20{STD_OP'+'ACITY_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20*=\x20c'+'lamp(vVert'+'exColor.{S'+'TD_OPACITY'+'_VERTEX_CH'+'ANNEL},\x200.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',cP='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20vec4\x20b'+'lueNoiseJi'+'tter;\x0a\x0a#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BLUENOI'+'SE\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blueN'+'oiseTex32;'+'\x0a#endif\x0a\x0av'+'oid\x20opacit'+'yDither(fl'+'oat\x20alpha,'+'\x20float\x20id)'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BAYER8\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20noise'+'\x20=\x20bayer8('+'floor(mod('+'gl_FragCoo'+'rd.xy\x20+\x20bl'+'ueNoiseJit'+'ter.xy\x20+\x20i'+'d,\x208.0)))\x20'+'/\x2064.0;\x0a\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20BLUENO'+'ISE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20frac'+'t(gl_FragC'+'oord.xy\x20/\x20'+'32.0\x20+\x20blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20noise\x20=\x20t'+'exture2DLo'+'d(blueNois'+'eTex32,\x20uv'+',\x200.0).y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20==\x20'+'IGNNOISE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20based\x20'+'on\x20https:/'+'/www.iryok'+'u.com/next'+'-generatio'+'n-post-pro'+'cessing-in'+'-call-of-d'+'uty-advanc'+'ed-warfare'+'/\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'agic\x20=\x20vec'+'3(0.067110'+'56,\x200.0058'+'3715,\x2052.9'+'829189);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20noi'+'se\x20=\x20fract'+'(magic.z\x20*'+'\x20fract(dot'+'(gl_FragCo'+'ord.xy\x20+\x20b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id,\x20magic.'+'xy)));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20convert\x20'+'the\x20noise\x20'+'to\x20linear\x20'+'space,\x20as\x20'+'that\x20is\x20sp'+'ecified\x20in'+('\x20sRGB\x20spac'+'e\x20(stores\x20'+'perceptual'+'\x20values)\x0a\x20'+'\x20\x20\x20noise\x20='+'\x20pow(noise'+',\x202.2);\x0a\x0a\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x20noise'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a}'+'\x0a'),hP='\x0a',dP='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20litArgs_'+'opacity;\x0a\x0a'+'#elif\x20LIT_'+'BLEND_TYPE'+'\x20==\x20PREMUL'+'TIPLIED\x0a\x0a\x20'+'\x20\x20\x20gl_Frag'+'Color.rgb\x20'+'*=\x20litArgs'+'_opacity;\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.a\x20='+'\x20litArgs_o'+'pacity;\x0a\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or.a\x20=\x201.0'+';\x0a\x0a#endif\x0a',fP='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20textu'+'re2D(sourc'+'e,\x20vUv0);\x0a'+'}\x0a',uP='\x0a\x0auniform\x20'+'vec3\x20mater'+'ial_sheen;'+'\x0a\x0avoid\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'heenColor\x20'+'=\x20material'+'_sheen;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEEN_'+'TEXTURE\x0a\x20\x20'+'\x20\x20sheenCol'+'or\x20*=\x20{STD'+'_SHEEN_TEX'+'TURE_DECOD'+'E}(texture'+'2DBias({ST'+'D_SHEEN_TE'+'XTURE_NAME'+'},\x20{STD_SH'+'EEN_TEXTUR'+'E_UV},\x20tex'+'tureBias))'+'.{STD_SHEE'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_VERTEX\x0a'+'\x20\x20\x20\x20sheenC'+'olor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20sSpec'+'ularity\x20=\x20'+'sheenColor'+';\x0a}\x0a',pP='\x0auniform\x20f'+'loat\x20mater'+'ial_sheenG'+'loss;\x0a\x0avoi'+'d\x20getSheen'+'Glossiness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20sheen'+'Glossiness'+'\x20=\x20materia'+'l_sheenGlo'+'ss;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20*'+'=\x20texture2'+'DBias({STD'+'_SHEENGLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_SHEENGLO'+'SS_TEXTURE'+'_UV},\x20text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20*='+'\x20saturate('+'vVertexCol'+'or.{STD_SH'+'EENGLOSS_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_INVER'+'T\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x201.0\x20-\x20'+'sheenGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20sGlossi'+'ness\x20=\x20she'+'enGlossine'+'ss\x20+\x200.000'+'0001;\x0a}\x0a',mP='\x0auniform\x20f'+'loat\x20mater'+'ial_height'+'MapFactor;'+'\x0a\x0avoid\x20get'+'Parallax()'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20paralla'+'xScale\x20=\x20m'+'aterial_he'+'ightMapFac'+'tor;\x0a\x0a\x20\x20\x20\x20'+'float\x20heig'+'ht\x20=\x20textu'+'re2DBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_H'+'EIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20he'+'ight\x20=\x20hei'+'ght\x20*\x20para'+'llaxScale\x20'+'-\x20parallax'+'Scale\x20*\x200.'+'5;\x0a\x20\x20\x20\x20vec'+'3\x20viewDirT'+'\x20=\x20dViewDi'+'rW\x20*\x20dTBN;'+'\x0a\x0a\x20\x20\x20\x20view'+'DirT.z\x20+=\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',_P='\x0auniform\x20u'+'int\x20meshIn'+'stanceId;\x0a'+'\x0avec4\x20getP'+'ickOutput('+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20vec4\x20i'+'nv\x20=\x20vec4('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20co'+'nst\x20uvec4\x20'+'shifts\x20=\x20u'+'vec4(16,\x208'+',\x200,\x2024);\x0a'+'\x20\x20\x20\x20uvec4\x20'+'col\x20=\x20(uve'+'c4(meshIns'+'tanceId)\x20>'+'>\x20shifts)\x20'+'&\x20uvec4(0x'+'ff);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'(col)\x20*\x20in'+'v;\x0a}\x0a',gP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20dR'+'eflDirW\x20=\x20'+'normalize('+'-reflect(v'+'iewDir,\x20wo'+'rldNormal)'+');\x0a}\x0a',SP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20sqrt'+'(1.0\x20-\x20min'+'(gloss,\x201.'+'0));\x0a\x0a\x20\x20\x20\x20'+'vec2\x20direc'+'tion\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicT\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3(directi'+'on,\x200.0));'+'\x0a\x20\x20\x20\x20vec3\x20'+'anisotropi'+'cB\x20=\x20norma'+'lize(cross'+'(tbn[2],\x20a'+'nisotropic'+'T));\x0a\x0a\x20\x20\x20\x20'+'float\x20anis'+'otropy\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20vec3'+'\x20anisotrop'+'icDirectio'+'n\x20=\x20anisot'+'ropicB;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicTa'+'ngent\x20=\x20cr'+'oss(anisot'+'ropicDirec'+'tion,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicNorm'+'al\x20=\x20cross'+'(anisotrop'+'icTangent,'+'\x20anisotrop'+'icDirectio'+'n);\x0a\x20\x20\x20\x20fl'+'oat\x20bendFa'+'ctor\x20=\x201.0'+'\x20-\x20anisotr'+'opy\x20*\x20(1.0'+'\x20-\x20roughne'+'ss);\x0a\x20\x20\x20\x20f'+'loat\x20bendF'+'actor4\x20=\x20b'+'endFactor\x20'+'*\x20bendFact'+'or\x20*\x20bendF'+'actor\x20*\x20be'+'ndFactor;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'entNormal\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}\x0a',yP='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0avoid\x20add'+'Reflection'+'CC(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20ccRe'+'flection\x20+'+'=\x20calcRefl'+'ection(ref'+'lDir,\x20glos'+'s);\x0a}\x0a#end'+'if\x0a',vP='\x0auniform\x20s'+'amplerCube'+'\x20texture_c'+'ubeMap;\x0aun'+'iform\x20floa'+'t\x20material'+'_reflectiv'+'ity;\x0a\x0avec3'+'\x20calcRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20lookup'+'Vec\x20=\x20cube'+'MapProject'+'(reflDir);'+'\x0a\x20\x20\x20\x20looku'+'pVec.x\x20*=\x20'+'-1.0;\x0a\x20\x20\x20\x20'+'return\x20{re'+'flectionDe'+'code}(text'+'ureCube(te'+'xture_cube'+'Map,\x20looku'+'pVec));\x0a}\x0a'+'\x0avoid\x20addR'+'eflection('+'vec3\x20reflD'+'ir,\x20float\x20'+'gloss)\x20{\x20\x20'+'\x20\x0a\x20\x20\x20\x20dRef'+'lection\x20+='+'\x20vec4(calc'+'Reflection'+'(reflDir,\x20'+'gloss),\x20ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',xP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_envAtlas;'+'\x0a#endif\x0aun'+'iform\x20samp'+'lerCube\x20te'+'xture_cube'+'Map;\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'flectivity'+';\x0a\x0avec3\x20ca'+'lcReflecti'+'on(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20cub'+'eMapProjec'+'t(reflDir)'+'\x20*\x20vec3(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20t'+'oSpherical'+'Uv(dir);\x0a\x0a'+'\x20\x20\x20\x20//\x20cal'+'culate\x20rou'+'ghness\x20lev'+'el\x0a\x20\x20\x20\x20flo'+'at\x20level\x20='+'\x20saturate('+'1.0\x20-\x20glos'+'s)\x20*\x205.0;\x0a'+'\x20\x20\x20\x20float\x20'+'ilevel\x20=\x20f'+'loor(level'+');\x0a\x20\x20\x20\x20flo'+'at\x20flevel\x20'+'=\x20level\x20-\x20'+'ilevel;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20sh'+'arp\x20=\x20{ref'+'lectionCub'+'emapDecode'+'}(textureC'+'ube(textur'+'e_cubeMap,'+'\x20dir));\x0a\x20\x20'+'\x20\x20vec3\x20rou'+'ghA\x20=\x20{ref'+'lectionDec'+'ode}(textu'+'re2D(textu'+'re_envAtla'+'s,\x20mapRoug'+'hnessUv(uv'+',\x20ilevel))'+');\x0a\x20\x20\x20\x20vec'+'3\x20roughB\x20='+'\x20{reflecti'+'onDecode}('+'texture2D('+'texture_en'+'vAtlas,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20proc'+'essEnviron'+'ment(mix(s'+'harp,\x20mix('+'roughA,\x20ro'+'ughB,\x20flev'+'el),\x20min(l'+'evel,\x201.0)'+'));\x0a}\x0a\x0avoi'+'d\x20addRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x20\x20\x20\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20+=\x20vec'+'4(calcRefl'+'ection(ref'+'lDir,\x20glos'+'s),\x20materi'+'al_reflect'+'ivity);\x0a}\x0a',TP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_env'+'Atlas;\x0a#en'+'dif\x0aunifor'+'m\x20float\x20ma'+'terial_ref'+'lectivity;'+'\x0a\x0a//\x20calcu'+'late\x20mip\x20l'+'evel\x20for\x20s'+'hiny\x20refle'+'ction\x20give'+'n\x20equirect'+'\x20coords\x20uv'+'.\x0afloat\x20sh'+'inyMipLeve'+'l(vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20dx\x20=\x20dFd'+'x(uv);\x0a\x20\x20\x20'+'\x20vec2\x20dy\x20='+'\x20dFdy(uv);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20s'+'econd\x20dF\x20a'+'t\x20180\x20degr'+'ees\x0a\x20\x20\x20\x20ve'+'c2\x20uv2\x20=\x20v'+'ec2(fract('+'uv.x\x20+\x200.5'+'),\x20uv.y);\x0a'+'\x20\x20\x20\x20vec2\x20d'+'x2\x20=\x20dFdx('+'uv2);\x0a\x20\x20\x20\x20'+'vec2\x20dy2\x20='+'\x20dFdy(uv2)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'min\x20of\x20bot'+'h\x20sets\x20of\x20'+'dF\x20to\x20hand'+'le\x20discont'+'inuity\x20at\x20'+'the\x20azim\x20e'+'dge\x0a\x20\x20\x20\x20fl'+'oat\x20maxd\x20='+'\x20min(max(d'+'ot(dx,\x20dx)'+',\x20dot(dy,\x20'+'dy)),\x20max('+'dot(dx2,\x20d'+'x2),\x20dot(d'+'y2,\x20dy2)))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'0.5\x20*\x20log2'+'(maxd)\x20-\x201'+'.0\x20+\x20textu'+'reBias,\x200.'+'0,\x205.0);\x0a}'+'\x0a\x0avec3\x20cal'+'cReflectio'+'n(vec3\x20ref'+'lDir,\x20floa'+'t\x20gloss)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3(-1.'+'0,\x201.0,\x201.'+'0);\x0a\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20to'+'SphericalU'+'v(dir);\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20roug'+'hness\x20leve'+'l\x0a\x20\x20\x20\x20floa'+'t\x20level\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20float\x20i'+'level\x20=\x20fl'+'oor(level)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'accessing\x20'+'the\x20shiny\x20'+'(top\x20level'+')\x20reflecti'+'on\x20-\x20perfo'+'rm\x20manual\x20'+'mipmap\x20loo'+'kup\x0a\x20\x20\x20\x20fl'+('oat\x20level2'+'\x20=\x20shinyMi'+'pLevel(uv\x20'+'*\x20atlasSiz'+'e);\x0a\x20\x20\x20\x20fl'+'oat\x20ilevel'+'2\x20=\x20floor('+'level2);\x0a\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v0,\x20uv1;\x0a\x20'+'\x20\x20\x20float\x20w'+'eight;\x0a\x20\x20\x20'+'\x20if\x20(ileve'+'l\x20==\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uv0\x20=\x20mapS'+'hinyUv(uv,'+'\x20ilevel2);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v1\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x20level2\x20'+'-\x20ilevel2;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20acces'+'sing\x20rough'+'\x20reflectio'+'n\x20-\x20just\x20s'+'ample\x20the\x20'+'same\x20part\x20'+'twice\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'uv1\x20=\x20mapR'+'oughnessUv'+'(uv,\x20ileve'+'l);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20weight\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'3\x20linearA\x20'+'=\x20{reflect'+'ionDecode}'+'(texture2D'+'(texture_e'+'nvAtlas,\x20u'+'v0));\x0a\x20\x20\x20\x20'+'vec3\x20linea'+'rB\x20=\x20{refl'+'ectionDeco'+'de}(textur'+'e2D(textur'+'e_envAtlas'+',\x20uv1));\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near0\x20=\x20mi'+'x(linearA,'+'\x20linearB,\x20'+'weight);\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near1\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(line'+'ar0,\x20linea'+'r1,\x20level\x20'+'-\x20ilevel))'+';\x0a}\x0a\x0avoid\x20'+'addReflect'+'ion(vec3\x20r'+'eflDir,\x20fl'+'oat\x20gloss)'+'\x20{\x20\x20\x20\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20+=\x20vec4('+'calcReflec'+'tion(reflD'+'ir,\x20gloss)'+',\x20material'+'_reflectiv'+'ity);\x0a}\x0a'),wP='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'uniform\x20sa'+'mpler2D\x20te'+'xture_sphe'+'reMap;\x0auni'+'form\x20float'+'\x20material_'+'reflectivi'+'ty;\x0a\x0avec3\x20'+'calcReflec'+'tion(vec3\x20'+'reflDir,\x20f'+'loat\x20gloss'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20reflDir'+'V\x20=\x20(mat3('+'matrix_vie'+'w)\x20*\x20reflD'+'ir);\x0a\x0a\x20\x20\x20\x20'+'float\x20m\x20=\x20'+'2.0\x20*\x20sqrt'+'(dot(reflD'+'irV.xy,\x20re'+'flDirV.xy)'+'\x20+\x20(reflDi'+'rV.z\x20+\x201.0'+')\x20*\x20(reflD'+'irV.z\x20+\x201.'+'0));\x0a\x20\x20\x20\x20v'+'ec2\x20sphere'+'MapUv\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(texture2'+'D(texture_'+'sphereMap,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0av'+'oid\x20addRef'+'lection(ve'+'c3\x20reflDir'+',\x20float\x20gl'+'oss)\x20{\x20\x20\x20\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20+=\x20v'+'ec4(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20mate'+'rial_refle'+'ctivity);\x0a'+'}\x0a',EP='\x0a\x0avoid\x20add'+'Reflection'+'Sheen(vec3'+'\x20worldNorm'+'al,\x20vec3\x20v'+'iewDir,\x20fl'+'oat\x20gloss)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20NoV\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'float\x20alph'+'aG\x20=\x20gloss'+'\x20*\x20gloss;\x0a'+'\x0a\x20\x20\x20\x20//\x20Av'+'oid\x20using\x20'+'a\x20LUT\x20and\x20'+'approximat'+'e\x20the\x20valu'+'es\x20analyti'+'cally\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'gloss\x20<\x200.'+'25\x20?\x20-339.'+'2\x20*\x20alphaG'+'\x20+\x20161.4\x20*'+'\x20gloss\x20-\x202'+'5.9\x20:\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95;\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20gl'+'oss\x20<\x200.25'+'\x20?\x2044.0\x20*\x20'+'alphaG\x20-\x202'+'3.7\x20*\x20glos'+'s\x20+\x203.26\x20:'+'\x201.97\x20*\x20al'+'phaG\x20-\x203.2'+'7\x20*\x20gloss\x20'+'+\x200.72;\x0a\x20\x20'+'\x20\x20float\x20DG'+'\x20=\x20exp(\x20a\x20'+'*\x20NoV\x20+\x20b\x20'+')\x20+\x20(\x20glos'+'s\x20<\x200.25\x20?'+'\x200.0\x20:\x200.1'+'\x20*\x20(\x20gloss'+'\x20-\x200.25\x20)\x20'+');\x0a\x20\x20\x20\x20sRe'+'flection\x20+'+'=\x20calcRefl'+'ection(wor'+'ldNormal,\x20'+'0.0)\x20*\x20sat'+'urate(DG);'+'\x0a}\x0a',bP='\x0avec3\x20refr'+'act2(vec3\x20'+'viewVec,\x20v'+'ec3\x20normal'+',\x20float\x20IO'+'R)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20vn\x20=\x20'+'dot(viewVe'+'c,\x20normal)'+';\x0a\x20\x20\x20\x20floa'+'t\x20k\x20=\x201.0\x20'+'-\x20IOR\x20*\x20IO'+'R\x20*\x20(1.0\x20-'+'\x20vn\x20*\x20vn);'+'\x0a\x20\x20\x20\x20vec3\x20'+'refrVec\x20=\x20'+'IOR\x20*\x20view'+'Vec\x20-\x20(IOR'+'\x20*\x20vn\x20+\x20sq'+'rt(k))\x20*\x20n'+'ormal;\x0a\x20\x20\x20'+'\x20return\x20re'+'frVec;\x0a}\x0a\x0a'+'void\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20vec3\x20w'+'orldNormal'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20viewDir,'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20thicknes'+'s,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20albedo'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20transmi'+'ssion,\x0a\x20\x20\x20'+'\x20float\x20ref'+'ractionInd'+'ex,\x0a\x20\x20\x20\x20fl'+'oat\x20disper'+'sion\x0a#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20,\x20'+'vec3\x20iride'+'scenceFres'+'nel,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceInte'+'nsity\x0a#end'+'if\x20\x0a)\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20s'+'ame\x20reflec'+'tion\x20code\x20'+'with\x20refra'+'ction\x20vect'+'or\x0a\x20\x20\x20\x20vec'+'4\x20tmpRefl\x20'+'=\x20dReflect'+'ion;\x0a\x20\x20\x20\x20v'+'ec3\x20reflec'+'tionDir\x20=\x20'+'refract2(-'+'viewDir,\x20w'+'orldNormal'+',\x20refracti'+'onIndex);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve'+'c4(0);\x0a\x20\x20\x20'+'\x20addReflec'+'tion(refle'+'ctionDir,\x20'+'gloss);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20dRe'+'flection.r'+'gb\x20*\x20albed'+'o,\x20transmi'+'ssion);\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20=\x20tmpR'+'efl;\x0a}\x0a',AP='\x0auniform\x20f'+'loat\x20mater'+'ial_invAtt'+'enuationDi'+'stance;\x0aun'+'iform\x20vec3'+'\x20material_'+'attenuatio'+'n;\x0a\x0avec3\x20e'+'valRefract'+'ionColor(v'+'ec3\x20refrac'+'tionVector'+',\x20float\x20gl'+'oss,\x20float'+'\x20refractio'+'nIndex)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20Th'+'e\x20refracti'+'on\x20point\x20i'+'s\x20the\x20entr'+'y\x20point\x20+\x20'+'vector\x20to\x20'+'exit\x20point'+'\x0a\x20\x20\x20\x20vec4\x20'+'pointOfRef'+'raction\x20=\x20'+'vec4(vPosi'+'tionW\x20+\x20re'+'fractionVe'+'ctor,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'Project\x20to'+'\x20texture\x20s'+'pace\x20so\x20we'+'\x20can\x20sampl'+'e\x20it\x0a\x20\x20\x20\x20v'+'ec4\x20projec'+'tionPoint\x20'+'=\x20matrix_v'+'iewProject'+'ion\x20*\x20poin'+'tOfRefract'+'ion;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20bui'+'lt-in\x20getG'+'rabScreenP'+'os\x20functio'+'n\x20to\x20conve'+'rt\x20screen\x20'+'position\x20t'+'o\x20grab\x20tex'+'ture\x20uv\x20co'+'ords\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etGrabScre'+'enPos(proj'+'ectionPoin'+'t);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Use\x20IOR\x20'+'and\x20roughn'+'ess\x20to\x20sel'+'ect\x20mip\x0a\x20\x20'+'\x20\x20float\x20io'+'rToRoughne'+'ss\x20=\x20(1.0\x20'+'-\x20gloss)\x20*'+'\x20clamp((1.'+'0\x20/\x20refrac'+'tionIndex)'+'\x20*\x202.0\x20-\x202'+'.0,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20f'+'loat\x20refra'+'ctionLod\x20='+'\x20log2(uScr'+'eenSize.x)'+'\x20*\x20iorToRo'+'ughness;\x0a\x20'+'\x20\x20\x20vec3\x20re'+'fraction\x20='+'\x20texture2D'+'Lod(uScene'+'ColorMap,\x20'+'uv,\x20refrac'+'tionLod).r'+'gb;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20refr'+'action;\x0a}\x0a'+'\x0avoid\x20addR'+'efraction('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20thickne'+'ss,\x20\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+('3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20albed'+'o,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20transm'+'ission,\x0a\x20\x20'+'\x20\x20float\x20re'+'fractionIn'+'dex,\x0a\x20\x20\x20\x20f'+'loat\x20dispe'+'rsion\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a)\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20Extr'+'act\x20scale\x20'+'from\x20the\x20m'+'odel\x20trans'+'form\x0a\x20\x20\x20\x20v'+'ec3\x20modelS'+'cale;\x0a\x20\x20\x20\x20'+'modelScale'+'.x\x20=\x20lengt'+'h(vec3(mat'+'rix_model['+'0].xyz));\x0a'+'\x20\x20\x20\x20modelS'+'cale.y\x20=\x20l'+'ength(vec3'+'(matrix_mo'+'del[1].xyz'+'));\x0a\x20\x20\x20\x20mo'+'delScale.z'+'\x20=\x20length('+'vec3(matri'+'x_model[2]'+'.xyz));\x0a\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20the\x20'+'refraction'+'\x20vector,\x20s'+'caled\x20by\x20t'+'he\x20thickne'+'ss\x20and\x20sca'+'le\x20of\x20the\x20'+'object\x0a\x20\x20\x20'+'\x20vec3\x20scal'+'e\x20=\x20thickn'+'ess\x20*\x20mode'+'lScale;\x0a\x20\x20'+'\x20\x20vec3\x20ref'+'ractionVec'+'tor\x20=\x20norm'+'alize(refr'+'act(-viewD'+'ir,\x20worldN'+'ormal,\x20ref'+'ractionInd'+'ex))\x20*\x20sca'+'le;\x0a\x20\x20\x20\x20ve'+'c3\x20refract'+'ion\x20=\x20eval'+'Refraction'+'Color(refr'+'actionVect'+'or,\x20gloss,'+'\x20refractio'+'nIndex);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20bas'+'ed\x20on\x20the\x20'+'dispersion'+'\x20material\x20'+'property,\x20'+'calculate\x20'+'modified\x20r'+'efraction\x20'+'index\x20valu'+'es\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20for\x20R\x20'+'and\x20B\x20chan'+'nels\x20and\x20e'+'valuate\x20th'+'e\x20refracti'+'on\x20color\x20f'+'or\x20them.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20halfSpr'+'ead\x20=\x20(1.0'+'\x20/\x20refract'+'ionIndex\x20-')+('\x201.0)\x20*\x200.'+'025\x20*\x20disp'+'ersion;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20refract'+'ionIndexR\x20'+'=\x20refracti'+'onIndex\x20-\x20'+'halfSpread'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'refraction'+'Vector\x20=\x20n'+'ormalize(r'+'efract(-vi'+'ewDir,\x20wor'+'ldNormal,\x20'+'refraction'+'IndexR))\x20*'+'\x20scale;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20refr'+'action.r\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'xR).r;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20refracti'+'onIndexB\x20='+'\x20refractio'+'nIndex\x20+\x20h'+'alfSpread;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efractionV'+'ector\x20=\x20no'+'rmalize(re'+'fract(-vie'+'wDir,\x20worl'+'dNormal,\x20r'+'efractionI'+'ndexB))\x20*\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20refra'+'ction.b\x20=\x20'+'evalRefrac'+'tionColor('+'refraction'+'Vector,\x20gl'+'oss,\x20refra'+'ctionIndex'+'B).b;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20Trans'+'mittance\x20i'+'s\x20our\x20fina'+'l\x20refracti'+'on\x20color\x0a\x20'+'\x20\x20\x20vec3\x20tr'+'ansmittanc'+'e;\x0a\x20\x20\x20\x20if\x20'+'(material_'+'invAttenua'+'tionDistan'+'ce\x20!=\x200.0)'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'attenuatio'+'n\x20=\x20-log(m'+'aterial_at'+'tenuation)'+'\x20*\x20materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans'+'mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20vec3'+'\x20fresnel\x20='+'\x20vec3(1.0)'+'\x20-\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot(')+('viewDir,\x20w'+'orldNormal'+'),\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20ref'+'raction\x20*\x20'+'transmitta'+'nce\x20*\x20fres'+'nel,\x20trans'+'mission);\x0a'+'}\x0a'),CP='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0a//\x20sourc'+'e\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'lerCube\x20so'+'urceCube;\x0a'+'#else\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20so'+'urceTex;\x0a#'+'endif\x0a\x0a#if'+'def\x20USE_SA'+'MPLES_TEX\x0a'+'\x20\x20\x20\x20//\x20sam'+'ples\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20sam'+'plesTex;\x0a\x20'+'\x20\x20\x20uniform'+'\x20vec2\x20samp'+'lesTexInve'+'rseSize;\x0a#'+'endif\x0a\x0a//\x20'+'params:\x0a//'+'\x20x\x20-\x20targe'+'t\x20cubemap\x20'+'face\x200..6\x0a'+'//\x20y\x20-\x20tar'+'get\x20image\x20'+'total\x20pixe'+'ls\x0a//\x20z\x20-\x20'+'source\x20cub'+'emap\x20size\x0a'+'uniform\x20ve'+'c3\x20params;'+'\x0a\x0afloat\x20ta'+'rgetFace()'+'\x20{\x20return\x20'+'params.x;\x20'+'}\x0afloat\x20ta'+'rgetTotalP'+'ixels()\x20{\x20'+'return\x20par'+'ams.y;\x20}\x0af'+'loat\x20sourc'+'eTotalPixe'+'ls()\x20{\x20ret'+'urn\x20params'+'.z;\x20}\x0a\x0aflo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0a#i'+'nclude\x20\x22de'+'codePS\x22\x0a#i'+'nclude\x20\x22en'+'codePS\x22\x0a\x0a/'+'/--\x20suppor'+'ted\x20projec'+'tions\x0a\x0avec'+'3\x20modifySe'+'ams(vec3\x20d'+'ir,\x20float\x20'+'scale)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20ad'+'ir\x20=\x20abs(d'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20M\x20=\x20m'+'ax(max(adi'+'r.x,\x20adir.'+'y),\x20adir.z'+');\x0a\x20\x20\x20\x20ret'+'urn\x20dir\x20/\x20'+'M\x20*\x20vec3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.x\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20adir.y\x20'+'==\x20M\x20?\x201.0'+'\x20:\x20scale,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.z\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0avec2\x20t'+'oSpherical'+'(vec3\x20dir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec2(d'+'ir.xz\x20==\x20v'+'ec2(0.0)\x20?'+('\x200.0\x20:\x20ata'+'n(dir.x,\x20d'+'ir.z),\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0avec3\x20f'+'romSpheric'+'al(vec2\x20uv'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec3('+'cos(uv.y)\x20'+'*\x20sin(uv.x'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'in(uv.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cos('+'uv.y)\x20*\x20co'+'s(uv.x));\x0a'+'}\x0a\x0avec3\x20ge'+'tDirection'+'Equirect()'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20fromSp'+'herical((v'+'ec2(vUv0.x'+',\x201.0\x20-\x20vU'+'v0.y)\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20vec2(PI,\x20'+'PI\x20*\x200.5))'+';\x0a}\x0a\x0a//\x20oc'+'tahedral\x20c'+'ode,\x20based'+'\x20on\x20https:'+'//jcgt.org'+'/published'+'/0003/02/0'+'1/\x0a//\x20\x22Sur'+'vey\x20of\x20Eff'+'icient\x20Rep'+'resentatio'+'ns\x20for\x20Ind'+'ependent\x20U'+'nit\x20Vector'+'s\x22\x20by\x20Cigo'+'lle,\x20Donow'+',\x20Evangela'+'kos,\x20Mara,'+'\x20McGuire,\x20'+'Meyer\x0a\x0aflo'+'at\x20signNot'+'Zero(float'+'\x20k){\x0a\x20\x20\x20\x20r'+'eturn(k\x20>='+'\x200.0)\x20?\x201.'+'0\x20:\x20-1.0;\x0a'+'}\x0a\x0avec2\x20si'+'gnNotZero('+'vec2\x20v)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20vec2(sign'+'NotZero(v.'+'x),\x20signNo'+'tZero(v.y)'+');\x0a}\x0a\x0a//\x20R'+'eturns\x20a\x20u'+'nit\x20vector'+'.\x20Argument'+'\x20o\x20is\x20an\x20o'+'ctahedral\x20'+'vector\x20pac'+'ked\x20via\x20oc'+'tEncode,\x20o'+'n\x20the\x20[-1,'+'\x20+1]\x20squar'+'e\x0avec3\x20oct'+'Decode(vec'+'2\x20o)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20v\x20=\x20'+'vec3(o.x,\x20'+'1.0\x20-\x20abs('+'o.x)\x20-\x20abs'+'(o.y),\x20o.y'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20v.xz\x20=\x20('+'1.0\x20-\x20abs('+'v.zx))\x20*\x20s'+'ignNotZero'+'(v.xz);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20norma'+'lize(v);\x0a}'+'\x0a\x0avec3\x20get'+'DirectionO'+'ctahedral('+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20octDe'+'code(vec2(')+('vUv0.x,\x201.'+'0\x20-\x20vUv0.y'+')\x20*\x202.0\x20-\x20'+'1.0);\x0a}\x0a\x0a/'+'/\x20Assumes\x20'+'that\x20v\x20is\x20'+'a\x20unit\x20vec'+'tor.\x20The\x20r'+'esult\x20is\x20a'+'n\x20octahedr'+'al\x20vector\x20'+'on\x20the\x20[-1'+',\x20+1]\x20squa'+'re\x0avec2\x20oc'+'tEncode(in'+'\x20vec3\x20v)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20vec2'+'\x20result\x20=\x20'+'v.xz\x20*\x20(1.'+'0\x20/\x20l1norm'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20result\x20='+'\x20(1.0\x20-\x20ab'+'s(result.y'+'x))\x20*\x20sign'+'NotZero(re'+'sult.xy);\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20res'+'ult;\x0a}\x0a\x0a//'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'///////\x0a\x0a#'+'ifdef\x20CUBE'+'MAP_SOURCE'+'\x0a\x20\x20\x20\x20vec4\x20'+'sampleCube'+'map(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureCu'+'be(sourceC'+'ube,\x20modif'+'ySeams(dir'+',\x201.0));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eCubemap(v'+'ec2\x20sph)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leCubemap('+'fromSpheri'+'cal(sph));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20vec4\x20sam'+'pleCubemap'+'(vec3\x20dir,'+'\x20float\x20mip'+'Level)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20textur'+'eCubeLod(s'+'ourceCube,'+'\x20modifySea'+'ms(dir,\x201.'+'0),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleCub'+'emap(vec2\x20'+'sph,\x20float'+'\x20mipLevel)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleCubema'+'p(fromSphe'+'rical(sph)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eEquirect('+'vec2\x20sph)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'sph\x20/\x20vec2'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'ture2D(sou'+'rceTex,\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec4\x20s'+'ampleEquir'+'ect(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleEqu'+'irect(toSp'+'herical(di'+'r));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleEqu'+'irect(vec2'+'\x20sph,\x20floa'+'t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20sph\x20/\x20ve'+'c2(PI\x20*\x202.'+'0,\x20PI)\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2DLo'+'d(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y),\x20mip'+'Level);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Equirect(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20sampleEq'+'uirect(toS'+'pherical(d'+'ir),\x20mipLe'+'vel);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20o'+'ctEncode(d'+'ir)\x20*\x200.5\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20texture2'+'D(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Octahedral'+'(vec2\x20sph)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleOctahe'+'dral(fromS'+'pherical(s'+'ph));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20octEn'+'code(dir)\x20'+'*\x200.5\x20+\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20te'+'xture2DLod'+'(sourceTex'+',\x20vec2(uv.'+'x,\x201.0\x20-\x20u'+'v.y),\x20mipL'+'evel);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20sampleO'+'ctahedral('+'vec2\x20sph,\x20'+'float\x20mipL'+'evel)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleO'+'ctahedral('+'fromSpheri'+'cal(sph),\x20')+('mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0avec3'+'\x20getDirect'+'ionCubemap'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec2\x20st\x20=\x20v'+'Uv0\x20*\x202.0\x20'+'-\x201.0;\x0a\x20\x20\x20'+'\x20float\x20fac'+'e\x20=\x20target'+'Face();\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ve'+'c;\x0a\x20\x20\x20\x20if\x20'+'(face\x20==\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec\x20=\x20'+'vec3(1,\x20-s'+'t.y,\x20-st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3(-1,\x20-st.'+'y,\x20st.x);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(face\x20'+'==\x202.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c\x20=\x20vec3(s'+'t.x,\x201,\x20st'+'.y);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x203.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3(st.x,\x20'+'-1,\x20-st.y)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(fac'+'e\x20==\x204.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec\x20=\x20vec3'+'(st.x,\x20-st'+'.y,\x201);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec\x20=\x20vec3('+'-st.x,\x20-st'+'.y,\x20-1);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(mod'+'ifySeams(v'+'ec,\x201.0));'+'\x0a}\x0a\x0amat3\x20m'+'atrixFromV'+'ector(vec3'+'\x20n)\x20{\x20//\x20f'+'risvad\x0a\x20\x20\x20'+'\x20float\x20a\x20='+'\x201.0\x20/\x20(1.'+'0\x20+\x20n.z);\x0a'+'\x20\x20\x20\x20float\x20'+'b\x20=\x20-n.x\x20*'+'\x20n.y\x20*\x20a;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'1\x20=\x20vec3(1'+'.0\x20-\x20n.x\x20*'+'\x20n.x\x20*\x20a,\x20'+'b,\x20-n.x);\x0a'+'\x20\x20\x20\x20vec3\x20b'+'2\x20=\x20vec3(b'+',\x201.0\x20-\x20n.'+'y\x20*\x20n.y\x20*\x20'+'a,\x20-n.y);\x0a'+'\x20\x20\x20\x20return'+'\x20mat3(b1,\x20'+'b2,\x20n);\x0a}\x0a'+'\x0amat3\x20matr'+'ixFromVect'+'orSlow(vec'+'3\x20n)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20up\x20='+'\x20(1.0\x20-\x20ab'+'s(n.y)\x20<=\x20'+'0.0000001)'+'\x20?\x20vec3(0.'+'0,\x200.0,\x20n.'+'y\x20>\x200.0\x20?\x20'+'1.0\x20:\x20-1.0'+')\x20:\x20vec3(0'+'.0,\x201.0,\x200'+'.0);\x0a\x20\x20\x20\x20v'+'ec3\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20vec'+'3\x20y\x20=\x20cros')+('s(n,\x20x);\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(x,\x20y,'+'\x20n);\x0a}\x0a\x0ave'+'c4\x20reproje'+'ct()\x20{\x0a\x20\x20\x20'+'\x20if\x20({NUM_'+'SAMPLES}\x20<'+'=\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20si'+'ngle\x20sampl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20{EN'+'CODE_FUNC}'+'({DECODE_F'+'UNC}({SOUR'+'CE_FUNC}({'+'TARGET_FUN'+'C}())));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multi\x20s'+'ample\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20t'+'\x20=\x20{TARGET'+'_FUNC}();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20tu\x20=\x20dF'+'dx(t);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'tv\x20=\x20dFdy('+'t);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(float\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'++u)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(float\x20'+'v\x20=\x200.0;\x20v'+'\x20<\x20{NUM_SA'+'MPLES_SQRT'+'};\x20++v)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20resu'+'lt\x20+=\x20{DEC'+'ODE_FUNC}('+'{SOURCE_FU'+'NC}(normal'+'ize(t\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20tu'+'\x20*\x20(u\x20/\x20{N'+'UM_SAMPLES'+'_SQRT}\x20-\x200'+'.5)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20tv\x20*'+'\x20(v\x20/\x20{NUM'+'_SAMPLES_S'+'QRT}\x20-\x200.5'+'))));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20({'+'NUM_SAMPLE'+'S_SQRT}\x20*\x20'+'{NUM_SAMPL'+'ES_SQRT}))'+';\x0a\x20\x20\x20\x20}\x0a}\x0a'+'\x0avec4\x20unpa'+'ckFloat\x20=\x20'+'vec4(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20void\x20'+'unpackSamp'+'le(int\x20i,\x20'+'out\x20vec3\x20L'+',\x20out\x20floa')+('t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20u\x20'+'=\x20(float(i'+'\x20*\x204)\x20+\x200.'+'5)\x20*\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20v\x20=\x20(f'+'loor(u)\x20+\x20'+'0.5)\x20*\x20sam'+'plesTexInv'+'erseSize.y'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20raw;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.x\x20=\x20dot'+'(texture2D'+'(samplesTe'+'x,\x20vec2(u,'+'\x20v)),\x20unpa'+'ckFloat);\x20'+'u\x20+=\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'texture2D('+'samplesTex'+',\x20vec2(u,\x20'+'v)),\x20unpac'+'kFloat);\x20u'+'\x20+=\x20sample'+'sTexInvers'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.z\x20=\x20dot(t'+'exture2D(s'+'amplesTex,'+'\x20vec2(u,\x20v'+')),\x20unpack'+'Float);\x20u\x20'+'+=\x20samples'+'TexInverse'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20raw.'+'w\x20=\x20dot(te'+'xture2D(sa'+'mplesTex,\x20'+'vec2(u,\x20v)'+'),\x20unpackF'+'loat);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20L.xy'+'z\x20=\x20raw.xy'+'z\x20*\x202.0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20mipLeve'+'l\x20=\x20raw.w\x20'+'*\x208.0;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20convolve\x20'+'an\x20environ'+'ment\x20given'+'\x20pre-gener'+'ated\x20sampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamples()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L')+(',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level))\x20*\x20'+'L.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tot'+'alWeight\x20+'+'=\x20L.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20{ENCODE'+'_FUNC}(res'+'ult\x20/\x20tota'+'lWeight);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20unweig'+'hted\x20versi'+'on\x20of\x20pref'+'ilterSampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamplesUn'+'weighted()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20fl'+'oat({NUM_S'+'AMPLES}));'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20{PROCESS'+'_FUNC}();\x0a'+'}\x0a'),PP='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0auniform'+'\x20vec4\x20uvMo'+'d;\x0avarying'+'\x20vec2\x20vUv0'+';\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20v'+'ec4(vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(vertex_po'+'sition.xy\x20'+'*\x200.5\x20+\x200.'+'5)\x20*\x20uvMod'+'.xy\x20+\x20uvMo'+'d.zw);\x0a}\x0a',MP='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20uScen'+'eDepthMap;'+'\x0a\x0a#ifndef\x20'+'SCREENSIZE'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20SCREENS'+'IZE\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20un'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#ifndef'+'\x20CAMERAPLA'+'NES\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20camera'+'_params;\x20/'+'/\x20x:\x201\x20/\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20\x20y:\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20z:\x20ca'+'mera_near,'+'\x20\x20\x20\x20\x20\x20\x20\x20w:'+'\x20is_ortho\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20lineariz'+'eDepth(flo'+'at\x20z)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'camera_par'+'ams.w\x20==\x200'+'.0)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(camera'+'_params.z\x20'+'*\x20camera_p'+'arams.y)\x20/'+'\x20(camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(camer'+'a_params.z'+'\x20-\x20camera_'+'params.y))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20camera'+'_params.z\x20'+'+\x20z\x20*\x20(cam'+'era_params'+'.y\x20-\x20camer'+'a_params.z'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0aflo'+'at\x20delinea'+'rizeDepth('+'float\x20line'+'arDepth)\x20{'+'\x0a\x20\x20\x20\x20if\x20(c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'(camera_pa'+'rams.y\x20*\x20('+'camera_par'+'ams.z\x20-\x20li'+'nearDepth)'+')\x20/\x20(linea'+'rDepth\x20*\x20('+'camera_par'+'ams.z\x20-\x20ca'+'mera_param'+'s.y));\x0a\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(line'+'arDepth\x20-\x20'+'camera_par'+'ams.z)\x20/\x20('+('camera_par'+'ams.y\x20-\x20ca'+'mera_param'+'s.z);\x0a\x20\x20\x20\x20'+'}\x0a}\x0a\x0a//\x20Re'+'trieves\x20re'+'ndered\x20lin'+'ear\x20camera'+'\x20depth\x20by\x20'+'UV\x0afloat\x20g'+'etLinearSc'+'reenDepth('+'vec2\x20uv)\x20{'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SCENE_DE'+'PTHMAP_LIN'+'EAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_FLOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2D(u'+'SceneDepth'+'Map,\x20uv).r'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20textu'+'reSize\x20=\x20t'+'extureSize'+'(uSceneDep'+'thMap,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ivec2\x20t'+'exel\x20=\x20ive'+'c2(uv\x20*\x20ve'+'c2(texture'+'Size));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20data\x20'+'=\x20texelFet'+'ch(uSceneD'+'epthMap,\x20t'+'exel,\x200);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(data.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(uint(d'+'ata.g\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20|\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(uint(dat'+'a.b\x20*\x20255.'+'0)\x20<<\x208u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(data.a\x20'+'*\x20255.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uintBitsTo'+'Float(intB'+'its);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20line'+'arizeDepth'+'(texture2D'+'(uSceneDep'+'thMap,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20float\x20'+'getLinearS'+'creenDepth'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20uv'+'\x20=\x20gl_Frag'+'Coord.xy\x20*'+'\x20uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur')+('n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afloat\x20'+'getLinearD'+'epth(vec3\x20'+'pos)\x20{\x0a\x20\x20\x20'+'\x20return\x20-('+'matrix_vie'+'w\x20*\x20vec4(p'+'os,\x201.0)).'+'z;\x0a}\x0a'),DP='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x20\x0ai'+'nt\x20getShad'+'owCascadeI'+'ndex(vec4\x20'+'shadowCasc'+'adeDistanc'+'es,\x20int\x20sh'+'adowCascad'+'eCount)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20in\x200\x20.'+'.\x20far\x20plan'+'e\x20range\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x0a\x20'+'\x20\x20\x20//\x201.0\x20'+'if\x20depth\x20>'+'=\x20distance'+',\x200.0\x20othe'+'rwise\x0a\x20\x20\x20\x20'+'vec4\x20compa'+'risons\x20=\x20s'+'tep(shadow'+'CascadeDis'+'tances,\x20ve'+'c4(depth))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'sum\x20is\x20the'+'\x20index\x0a\x20\x20\x20'+'\x20int\x20casca'+'deIndex\x20=\x20'+'int(dot(co'+'mparisons,'+'\x20vec4(1.0)'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20limit\x20to'+'\x20actual\x20nu'+'mber\x20of\x20us'+'ed\x20cascade'+'s\x0a\x20\x20\x20\x20retu'+'rn\x20min(cas'+'cadeIndex,'+'\x20shadowCas'+'cadeCount\x20'+'-\x201);\x0a}\x0a\x0a/'+'/\x20function'+'\x20which\x20mod'+'ifies\x20casc'+'ade\x20index\x20'+'to\x20dither\x20'+'between\x20ca'+'scades\x0aint'+'\x20ditherSha'+'dowCascade'+'Index(int\x20'+'cascadeInd'+'ex,\x20vec4\x20s'+'hadowCasca'+'deDistance'+'s,\x20int\x20sha'+'dowCascade'+'Count,\x20flo'+'at\x20blendFa'+'ctor)\x20{\x0a\x20\x0a'+'\x20\x20\x20\x20if\x20(ca'+'scadeIndex'+'\x20<\x20shadowC'+'ascadeCoun'+'t\x20-\x201)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20current'+'RangeEnd\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20transit'+'ionStart\x20='+'\x20blendFact'+'or\x20*\x20curre'+'ntRangeEnd'+';\x20//\x20Start'+'\x20overlap\x20f'+'actor\x20away'+'\x20from\x20the\x20'+'end\x20distan'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x201.0\x20/'+('\x20gl_FragCo'+'ord.w;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'depth\x20>\x20tr'+'ansitionSt'+'art)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Calculat'+'e\x20a\x20transi'+'tion\x20facto'+'r\x20(0.0\x20to\x20'+'1.0)\x20withi'+'n\x20the\x20over'+'lap\x20range\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20tr'+'ansitionFa'+'ctor\x20=\x20smo'+'othstep(tr'+'ansitionSt'+'art,\x20curre'+'ntRangeEnd'+',\x20depth);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Add\x20'+'pseudo-ran'+'dom\x20dither'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ODO:\x20repla'+'ce\x20by\x20user'+'\x20selectabl'+'e\x20ditherin'+'g\x20method\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dit'+'her\x20=\x20frac'+'t(sin(dot('+'gl_FragCoo'+'rd.xy,\x20vec'+'2(12.9898,'+'\x2078.233)))'+'\x20*\x2043758.5'+'453);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(dither\x20<'+'\x20transitio'+'nFactor)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cas'+'cadeIndex\x20'+'+=\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20return\x20ca'+'scadeIndex'+';\x0a}\x0a\x0avec3\x20'+'fadeShadow'+'(vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'CascadeDis'+'tances)\x20{\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20if\x20th'+'e\x20pixel\x20is'+'\x20past\x20the\x20'+'shadow\x20dis'+'tance,\x20rem'+'ove\x20shadow'+'\x0a\x20\x20\x20\x20//\x20th'+'is\x20enforce'+'s\x20straight'+'\x20line\x20inst'+'ead\x20of\x20cor'+'ner\x20of\x20sha'+'dow\x20which\x20'+'moves\x20when'+'\x20camera\x20ro'+'tates\x20\x20\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x20\x20'+'\x20\x20if\x20(dept'+'h\x20>\x20shadow'+'CascadeDis'+'tances.w)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'shadowCoor'+'d.z\x20=\x20-999'+'9999.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20shad'+'owCoord;\x0a}'+'\x0a'),IP='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afloat\x20lin'+'step(float'+'\x20a,\x20float\x20'+'b,\x20float\x20v'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20satur'+'ate((v\x20-\x20a'+')\x20/\x20(b\x20-\x20a'+'));\x0a}\x0a\x0aflo'+'at\x20reduceL'+'ightBleedi'+'ng(float\x20p'+'Max,\x20float'+'\x20amount)\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'float\x20cheb'+'yshevUpper'+'Bound(vec2'+'\x20moments,\x20'+'float\x20mean'+',\x20float\x20mi'+'nVariance,'+'\x20float\x20lig'+'htBleeding'+'Reduction)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'Compute\x20va'+'riance\x0a\x20\x20\x20'+'\x20float\x20var'+'iance\x20=\x20mo'+'ments.y\x20-\x20'+'(moments.x'+'\x20*\x20moments'+'.x);\x0a\x20\x20\x20\x20v'+'ariance\x20=\x20'+'max(varian'+'ce,\x20minVar'+'iance);\x0a\x0a\x20'+'\x20\x20\x20//\x20Comp'+'ute\x20probab'+'ilistic\x20up'+'per\x20bound\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20mean\x20-'+'\x20moments.x'+';\x0a\x20\x20\x20\x20floa'+'t\x20pMax\x20=\x20v'+'ariance\x20/\x20'+'(variance\x20'+'+\x20(d\x20*\x20d))'+';\x0a\x0a\x20\x20\x20\x20pMa'+'x\x20=\x20reduce'+'LightBleed'+'ing(pMax,\x20'+'lightBleed'+'ingReducti'+'on);\x0a\x0a\x20\x20\x20\x20'+'//\x20One-tai'+'led\x20Chebys'+'hev\x0a\x20\x20\x20\x20re'+'turn\x20(mean'+'\x20<=\x20moment'+'s.x\x20?\x201.0\x20'+':\x20pMax);\x0a}'+'\x0a\x0afloat\x20ca'+'lculateEVS'+'M(vec3\x20mom'+'ents,\x20floa'+'t\x20Z,\x20float'+'\x20vsmBias,\x20'+'float\x20expo'+'nent)\x20{\x0a\x20\x20'+'\x20\x20Z\x20=\x202.0\x20'+'*\x20Z\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20warpedDep'+'th\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20m'+'oments.xy\x20'+'+=\x20vec2(wa'+'rpedDepth,'+'\x20warpedDep'+'th*warpedD'+'epth)\x20*\x20(1'+'.0\x20-\x20momen'+'ts.z);\x0a\x0a\x20\x20'+('\x20\x20float\x20VS'+'MBias\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20float'+'\x20depthScal'+'e\x20=\x20VSMBia'+'s\x20*\x20expone'+'nt\x20*\x20warpe'+'dDepth;\x0a\x20\x20'+'\x20\x20float\x20mi'+'nVariance1'+'\x20=\x20depthSc'+'ale\x20*\x20dept'+'hScale;\x0a\x20\x20'+'\x20\x20return\x20c'+'hebyshevUp'+'perBound(m'+'oments.xy,'+'\x20warpedDep'+'th,\x20minVar'+'iance1,\x200.'+'1);\x0a}\x0a\x0a//\x20'+'------\x20VSM'+'\x2016\x20------'+'\x0a\x0afloat\x20VS'+'M16(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec2\x20'+'texCoords,'+'\x20float\x20res'+'olution,\x20f'+'loat\x20Z,\x20fl'+'oat\x20vsmBia'+'s,\x20float\x20e'+'xponent)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'moments\x20=\x20'+'texture2DL'+'od(tex,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM16('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM16(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM16(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20VSM16('+'TEXTURE_PA'+'SS(shadowM'+'ap),\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----')+('--\x0a\x0afloat\x20'+'VSM32(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20texCoord'+'s,\x20float\x20r'+'esolution,'+'\x20float\x20Z,\x20'+'float\x20vsmB'+'ias,\x20float'+'\x20exponent)'+'\x20{\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20CAPS_'+'TEXTURE_FL'+'OAT_FILTER'+'ABLE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20te'+'xture2DLod'+'(tex,\x20texC'+'oords,\x200.0'+').xyz;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ma'+'nual\x20bilin'+'ear\x20filter'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pi'+'xelSize\x20=\x20'+'1.0\x20/\x20reso'+'lution;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20texC'+'oords\x20-=\x20v'+'ec2(pixelS'+'ize);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'00\x20=\x20textu'+'re2DLod(te'+'x,\x20texCoor'+'ds,\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20s10'+'\x20=\x20texture'+'2DLod(tex,'+'\x20texCoords'+'\x20+\x20vec2(pi'+'xelSize,\x200'+'),\x200.0).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20s01\x20'+'=\x20texture2'+'DLod(tex,\x20'+'texCoords\x20'+'+\x20vec2(0,\x20'+'pixelSize)'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20s11\x20='+'\x20texture2D'+'Lod(tex,\x20t'+'exCoords\x20+'+'\x20vec2(pixe'+'lSize),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20fr\x20=\x20frac'+'t(texCoord'+'s\x20*\x20resolu'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'h0\x20=\x20mix(s'+'00,\x20s10,\x20f'+'r.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20h'+'1\x20=\x20mix(s0'+'1,\x20s11,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20mi'+'x(h0,\x20h1,\x20'+'fr.y);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM32('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM32(T')+('EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM32(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20Z\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd.xy,\x20sha'+'dowParams.'+'x,\x20Z,\x20shad'+'owParams.y'+',\x20exponent'+');\x0a}\x0a'),LP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_ACCEP'+'T(shadowMa'+'p),\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20textur'+'eShadow(sh'+'adowMap,\x20s'+'hadowCoord'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wSpotPCF1x'+'1(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSh'+'adow(shado'+'wMap,\x20shad'+'owCoord);\x0a'+'}\x0a\x0a//\x20----'+'-\x20Omni\x20Sam'+'pling\x20----'+'-\x0a\x0a#ifndef'+'\x20WEBGPU\x0a\x0af'+'loat\x20getSh'+'adowOmniPC'+'F1x1(sampl'+'erCubeShad'+'ow\x20shadowM'+'ap,\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20float\x20sh'+'adowZ\x20=\x20le'+'ngth(light'+'Dir)\x20*\x20sha'+'dowParams.'+'w\x20+\x20shadow'+'Params.z;\x0a'+'\x20\x20\x20\x20return'+'\x20texture(s'+'hadowMap,\x20'+'vec4(light'+'Dir,\x20shado'+'wZ));\x0a}\x0a\x0a#'+'endif\x0a',RP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_ACCE'+'PT(shadowM'+'ap),\x20vec3\x20'+'shadowCoor'+'d,\x20vec3\x20sh'+'adowParams'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20sh'+'adowCoord.'+'z;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20sha'+'dowCoord.x'+'y\x20*\x20shadow'+'Params.x;\x20'+'//\x201\x20unit\x20'+'-\x201\x20texel\x0a'+'\x20\x20\x20\x20float\x20'+'shadowMapS'+'izeInv\x20=\x201'+'.0\x20/\x20shado'+'wParams.x;'+'\x0a\x20\x20\x20\x20vec2\x20'+'base_uv\x20=\x20'+'floor(uv\x20+'+'\x200.5);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20(uv.x\x20+\x200'+'.5\x20-\x20base_'+'uv.x);\x0a\x20\x20\x20'+'\x20float\x20t\x20='+'\x20(uv.y\x20+\x200'+'.5\x20-\x20base_'+'uv.y);\x20\x0a\x20\x20'+'\x20\x20base_uv\x20'+'-=\x20vec2(0.'+'5);\x0a\x20\x20\x20\x20ba'+'se_uv\x20*=\x20s'+'hadowMapSi'+'zeInv;\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'uw0\x20=\x20(3.0'+'\x20-\x202.0\x20*\x20s'+');\x0a\x20\x20\x20\x20flo'+'at\x20uw1\x20=\x20('+'1.0\x20+\x202.0\x20'+'*\x20s);\x0a\x0a\x20\x20\x20'+'\x20float\x20u0\x20'+'=\x20(2.0\x20-\x20s'+')\x20/\x20uw0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20f'+'loat\x20u1\x20=\x20'+'s\x20/\x20uw1\x20+\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(3.0\x20-\x202'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20t)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20v0\x20=\x20(2'+'.0\x20-\x20t)\x20/\x20'+'vw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20v1\x20=\x20t\x20/\x20'+'vw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20u0\x20='+'\x20u0\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v0\x20=\x20v0\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u1\x20=\x20'+'u1\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'1\x20=\x20v1\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+('sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw0\x20*\x20v'+'w1\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u0,\x20v'+'1,\x20z));\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w1\x20*\x20vw1\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u1,\x20v1,\x20z'+'));\x0a\x0a\x20\x20\x20\x20s'+'um\x20*=\x201.0f'+'\x20/\x2016.0;\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowPCF3x3('+'SHADOWMAP_'+'ACCEPT(sha'+'dowMap),\x20v'+'ec3\x20shadow'+'Coord,\x20vec'+'4\x20shadowPa'+'rams)\x20{\x0a\x20\x20'+'\x20\x20return\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_PASS'+'(shadowMap'+'),\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowSpotPCF'+'3x3(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3('+'SHADOWMAP_'+'PASS(shado'+'wMap),\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0a//\x20-----'+'\x20Omni\x20Samp'+'ling\x20-----'+'\x0a\x0a#ifndef\x20'+'WEBGPU\x0a\x0afl'+'oat\x20getSha'+'dowOmniPCF'+'3x3(sample'+'rCubeShado'+'w\x20shadowMa'+'p,\x20vec4\x20sh'+'adowParams'+',\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a\x20\x20\x20\x20fl'+'oat\x20shadow'+'Z\x20=\x20length'+'(dir)\x20*\x20sh'+'adowParams'+'.w\x20+\x20shado'+'wParams.z;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x0a\x20\x20\x20\x20'+'float\x20z\x20=\x20'+'1.0\x20/\x20floa'+'t(textureS'+'ize(shadow'+'Map,\x200));\x0a'+'\x20\x20\x20\x20vec3\x20t'+'c\x20=\x20normal'+'ize(dir);\x0a'+'\x0a\x20\x20\x20\x20//\x20av'+'erage\x204\x20sa'+'mples\x20-\x20no'+'t\x20a\x20strict')+('\x203x3\x20PCF\x20b'+'ut\x20that\x27s\x20'+'tricky\x20wit'+'h\x20cubemaps'+'\x0a\x20\x20\x20\x20mediu'+'mp\x20vec4\x20sh'+'adows;\x0a\x20\x20\x20'+'\x20shadows.x'+'\x20=\x20texture'+'(shadowMap'+',\x20vec4(tc\x20'+'+\x20vec3(\x20z,'+'\x20z,\x20z),\x20sh'+'adowZ));\x0a\x20'+'\x20\x20\x20shadows'+'.y\x20=\x20textu'+'re(shadowM'+'ap,\x20vec4(t'+'c\x20+\x20vec3(-'+'z,-z,\x20z),\x20'+'shadowZ));'+'\x0a\x20\x20\x20\x20shado'+'ws.z\x20=\x20tex'+'ture(shado'+'wMap,\x20vec4'+'(tc\x20+\x20vec3'+'(-z,\x20z,-z)'+',\x20shadowZ)'+');\x0a\x20\x20\x20\x20sha'+'dows.w\x20=\x20t'+'exture(sha'+'dowMap,\x20ve'+'c4(tc\x20+\x20ve'+'c3(\x20z,-z,-'+'z),\x20shadow'+'Z));\x0a\x0a\x20\x20\x20\x20'+'return\x20dot'+'(shadows,\x20'+'vec4(0.25)'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wOmniPCF3x'+'3(samplerC'+'ubeShadow\x20'+'shadowMap,'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20lightDi'+'r)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowOmniP'+'CF3x3(shad'+'owMap,\x20sha'+'dowParams,'+'\x20lightDir)'+';\x0a}\x0a\x0a#endi'+'f\x0a'),OP='\x0afloat\x20_ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec3\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20//\x20h'+'ttp://the-'+'witness.ne'+'t/news/201'+'3/09/shado'+'w-mapping-'+'summary-pa'+'rt-1/\x0a\x0a\x20\x20\x20'+'\x20float\x20z\x20='+'\x20shadowCoo'+'rd.z;\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'shadowCoor'+'d.xy\x20*\x20sha'+'dowParams.'+'x;\x20//\x201\x20un'+'it\x20-\x201\x20tex'+'el\x0a\x20\x20\x20\x20flo'+'at\x20shadowM'+'apSizeInv\x20'+'=\x201.0\x20/\x20sh'+'adowParams'+'.x;\x0a\x20\x20\x20\x20ve'+'c2\x20base_uv'+'\x20=\x20floor(u'+'v\x20+\x200.5);\x0a'+'\x20\x20\x20\x20float\x20'+'s\x20=\x20(uv.x\x20'+'+\x200.5\x20-\x20ba'+'se_uv.x);\x0a'+'\x20\x20\x20\x20float\x20'+'t\x20=\x20(uv.y\x20'+'+\x200.5\x20-\x20ba'+'se_uv.y);\x0a'+'\x20\x20\x20\x20base_u'+'v\x20-=\x20vec2('+'0.5);\x0a\x20\x20\x20\x20'+'base_uv\x20*='+'\x20shadowMap'+'SizeInv;\x0a\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20uw0\x20=\x20(4.'+'0\x20-\x203.0\x20*\x20'+'s);\x0a\x20\x20\x20\x20fl'+'oat\x20uw1\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20f'+'loat\x20uw2\x20='+'\x20(1.0\x20+\x203.'+'0\x20*\x20s);\x0a\x0a\x20'+'\x20\x20\x20float\x20u'+'0\x20=\x20(3.0\x20-'+'\x202.0\x20*\x20s)\x20'+'/\x20uw0\x20-\x202.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20u1\x20=\x20(3'+'.0\x20+\x20s)\x20/\x20'+'uw1;\x0a\x20\x20\x20\x20f'+'loat\x20u2\x20=\x20'+'s\x20/\x20uw2\x20+\x20'+'2.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(4.0\x20-\x203'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x207.0;\x0a'+'\x20\x20\x20\x20float\x20'+'vw2\x20=\x20(1.0'+'\x20+\x203.0\x20*\x20t'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20v0\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20t)\x20/\x20vw0'+'\x20-\x202.0;\x0a\x20\x20'+'\x20\x20float\x20v1'+'\x20=\x20(3.0\x20+\x20'+'t)\x20/\x20vw1;\x0a'+'\x20\x20\x20\x20float\x20'+'v2\x20=\x20t\x20/\x20v'+'w2\x20+\x202.0;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20sum\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20u0\x20'+'=\x20u0\x20*\x20sha'+'dowMapSize'+'Inv\x20+\x20base'+'_uv.x;\x0a\x20\x20\x20'+'\x20v0\x20=\x20v0\x20*'+'\x20shadowMap'+'SizeInv\x20+\x20'+'base_uv.y;'+'\x0a\x0a\x20\x20\x20\x20u1\x20='+('\x20u1\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v1\x20=\x20v1\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u2\x20=\x20'+'u2\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'2\x20=\x20v2\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+'sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw2\x20*\x20v'+'w0\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u2,\x20v'+'0,\x20z));\x0a\x0a\x20'+'\x20\x20\x20sum\x20+=\x20'+'uw0\x20*\x20vw1\x20'+'*\x20textureS'+'hadow(shad'+'owMap,\x20vec'+'3(u0,\x20v1,\x20'+'z));\x0a\x20\x20\x20\x20s'+'um\x20+=\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureShado'+'w(shadowMa'+'p,\x20vec3(u1'+',\x20v1,\x20z));'+'\x0a\x20\x20\x20\x20sum\x20+'+'=\x20uw2\x20*\x20vw'+'1\x20*\x20textur'+'eShadow(sh'+'adowMap,\x20v'+'ec3(u2,\x20v1'+',\x20z));\x0a\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w0\x20*\x20vw2\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u0,\x20v2,\x20z'+'));\x0a\x20\x20\x20\x20su'+'m\x20+=\x20uw1\x20*'+'\x20vw2\x20*\x20tex'+'tureShadow'+'(shadowMap'+',\x20vec3(u1,'+'\x20v2,\x20z));\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw2\x20*\x20vw2'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u2,\x20v2,'+'\x20z));\x0a\x0a\x20\x20\x20'+'\x20sum\x20*=\x201.'+'0f\x20/\x20144.0'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20saturate'+'(sum);\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'um;\x0a}\x0a\x0aflo'+'at\x20getShad'+'owPCF5x5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20_g'+'etShadowPC'+'F5x5(SHADO'+'WMAP_PASS('+'shadowMap)'+',\x20shadowCo'+'ord,\x20shado')+('wParams.xy'+'z);\x0a}\x0a\x0aflo'+'at\x20getShad'+'owSpotPCF5'+'x5(SHADOWM'+'AP_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getShad'+'owPCF5x5(S'+'HADOWMAP_P'+'ASS(shadow'+'Map),\x20shad'+'owCoord,\x20s'+'hadowParam'+'s.xyz);\x0a}\x0a'),FP='\x0a\x0a/**\x0a\x20*\x20P'+'CSS\x20is\x20a\x20s'+'hadow\x20samp'+'ling\x20metho'+'d\x20that\x20pro'+'vides\x20cont'+'act\x20harden'+'ing\x20soft\x20s'+'hadows,\x20us'+'ed\x20for\x20omn'+'i\x20and\x20spot'+'\x20lights.\x0a\x20'+'*\x20Based\x20on'+':\x20\x0a\x20*\x20-\x20ht'+'tps://www.'+'gamedev.ne'+'t/tutorial'+'s/programm'+'ing/graphi'+'cs/effect-'+'area-light'+'-shadows-p'+'art-1-pcss'+'-r4971/\x0a\x20*'+'\x20-\x20https:/'+'/github.co'+'m/pboechat'+'/PCSS\x20\x0a\x20*/'+'\x0a\x0a#define\x20'+'PCSS_SAMPL'+'E_COUNT\x2016'+'\x0a\x0auniform\x20'+'float\x20pcss'+'DiskSample'+'s[PCSS_SAM'+'PLE_COUNT]'+';\x0auniform\x20'+'float\x20pcss'+'SphereSamp'+'les[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x0avec2\x20'+'vogelDisk('+'int\x20sample'+'Index,\x20flo'+'at\x20count,\x20'+'float\x20phi,'+'\x20float\x20r)\x20'+'{\x0a\x20\x20\x20\x20cons'+'t\x20float\x20Go'+'ldenAngle\x20'+'=\x202.4;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta\x20=\x20float'+'(sampleInd'+'ex)\x20*\x20Gold'+'enAngle\x20+\x20'+'phi;\x0a\x0a\x20\x20\x20\x20'+'float\x20sine'+'\x20=\x20sin(the'+'ta);\x0a\x20\x20\x20\x20f'+'loat\x20cosin'+'e\x20=\x20cos(th'+'eta);\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(r\x20*\x20cosi'+'ne,\x20r\x20*\x20si'+'ne);\x0a}\x0a\x0ave'+'c3\x20vogelSp'+'here(int\x20s'+'ampleIndex'+',\x20float\x20co'+'unt,\x20float'+'\x20phi,\x20floa'+'t\x20r)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20GoldenA'+'ngle\x20=\x202.4'+';\x0a\x20\x20\x20\x20floa'+'t\x20theta\x20=\x20'+'float(samp'+'leIndex)\x20*'+'\x20GoldenAng'+'le\x20+\x20phi;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20weight\x20=\x20'+'float(samp'+'leIndex)\x20/'+'\x20count;\x0a\x20\x20'+'\x20\x20return\x20v'+'ec3(cos(th'+'eta)\x20*\x20r,\x20'+'weight,\x20si'+'n(theta)\x20*'+'\x20r);\x0a}\x0a\x0afl'+'oat\x20noise('+'vec2\x20scree'+'nPos)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PHI\x20=\x20'+('1.61803398'+'8749894848'+'20459;\x20\x20//'+'\x20Φ\x20=\x20Golde'+'n\x20Ratio\x20\x20\x20'+'\x0a\x20\x20\x20\x20retur'+'n\x20fract(si'+'n(dot(scre'+'enPos\x20*\x20PH'+'I,\x20screenP'+'os))\x20*\x20scr'+'eenPos.x);'+'\x0a}\x0a\x0afloat\x20'+'viewSpaceD'+'epth(float'+'\x20depth,\x20ma'+'t4\x20invProj'+'ection)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'z\x20=\x20depth\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20vec'+'4\x20clipSpac'+'e\x20=\x20vec4(0'+'.0,\x200.0,\x20z'+',\x201.0);\x0a\x20\x20'+'\x20\x20vec4\x20vie'+'wSpace\x20=\x20i'+'nvProjecti'+'on\x20*\x20clipS'+'pace;\x0a\x20\x20\x20\x20'+'return\x20vie'+'wSpace.z;\x0a'+'}\x0a\x0afloat\x20P'+'CSSBlocker'+'Distance(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20sampleCoo'+'rds[PCSS_S'+'AMPLE_COUN'+'T],\x20vec2\x20s'+'hadowCoord'+'s,\x20vec2\x20se'+'archSize,\x20'+'float\x20z,\x20v'+'ec4\x20camera'+'Params)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20blockers\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20float\x20ave'+'rageBlocke'+'r\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20offset\x20='+'\x20sampleCoo'+'rds[i]\x20*\x20s'+'earchSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20sample'+'UV\x20=\x20shado'+'wCoords\x20+\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20blocker'+'\x20=\x20texture'+'2DLod(shad'+'owMap,\x20sam'+'pleUV,\x200.0'+').r;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20i'+'sBlocking\x20'+'=\x20step(blo'+'cker,\x20z);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20bl'+'ockers\x20+=\x20'+'isBlocking'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'averageBlo'+'cker\x20+=\x20bl'+'ocker\x20*\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20if\x20(block'+'ers\x20>\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20aver'+'ageBlocker'+'\x20/\x20blocker'+'s;\x0a\x20\x20\x20\x20ret'+'urn\x20-1.0;\x0a'+'}\x0a\x0afloat\x20P'+'CSS(TEXTUR')+('E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoords,\x20'+'vec4\x20camer'+'aParams,\x20v'+'ec2\x20shadow'+'SearchArea'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'linearizeD'+'epthWithPa'+'rams(shado'+'wCoords.z,'+'\x20cameraPar'+'ams);\x0a\x0a\x20\x20\x20'+'\x20vec2\x20samp'+'lePoints[P'+'CSS_SAMPLE'+'_COUNT];\x0a\x20'+'\x20\x20\x20const\x20f'+'loat\x20PI\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20float\x20n'+'oise\x20=\x20noi'+'se(\x20gl_Fra'+'gCoord.xy\x20'+')\x20*\x202.0\x20*\x20'+'PI;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x200;\x20i\x20<\x20PC'+'SS_SAMPLE_'+'COUNT;\x20i++'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pc'+'ssPresampl'+'e\x20=\x20pcssDi'+'skSamples['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20samplePo'+'ints[i]\x20=\x20'+'vogelDisk('+'i,\x20float(P'+'CSS_SAMPLE'+'_COUNT),\x20n'+'oise,\x20pcss'+'Presample)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20a'+'verageBloc'+'ker\x20=\x20PCSS'+'BlockerDis'+'tance(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20samplePoi'+'nts,\x20shado'+'wCoords.xy'+',\x20shadowSe'+'archArea,\x20'+'receiverDe'+'pth,\x20camer'+'aParams);\x0a'+'\x20\x20\x20\x20if\x20(av'+'erageBlock'+'er\x20==\x20-1.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x201'+'.0;\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depthDiff'+'erence\x20=\x20('+'receiverDe'+'pth\x20-\x20aver'+'ageBlocker'+')\x20/\x203.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20filterRa'+'dius\x20=\x20dep'+'thDifferen'+'ce\x20*\x20shado'+'wSearchAre'+'a;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20for\x20(int\x20'+'i\x20=\x200;\x20i\x20<'+'\x20PCSS_SAMP'+'LE_COUNT;\x20'+'i\x20++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20sampleU'+'V\x20=\x20sample'+'Points[i]\x20'+'*\x20filterRa')+('dius;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleUV\x20=\x20s'+'hadowCoord'+'s.xy\x20+\x20sam'+'pleUV;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20textur'+'e2DLod(sha'+'dowMap,\x20sa'+'mpleUV,\x200.'+'0).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20shadow\x20/\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT);\x0a\x20\x20\x20\x20'+'}\x20\x0a}\x0a\x0a#ifn'+'def\x20WEBGPU'+'\x0a\x0afloat\x20PC'+'SSCubeBloc'+'kerDistanc'+'e(samplerC'+'ube\x20shadow'+'Map,\x20vec3\x20'+'lightDirNo'+'rm,\x20vec3\x20s'+'amplePoint'+'s[PCSS_SAM'+'PLE_COUNT]'+',\x20float\x20z,'+'\x20float\x20sha'+'dowSearchA'+'rea)\x20{\x0a\x20\x20\x20'+'\x20float\x20blo'+'ckers\x20=\x200.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20average'+'Blocker\x20=\x20'+'0.0;\x0a\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20P'+'CSS_SAMPLE'+'_COUNT;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sa'+'mpleDir\x20=\x20'+'lightDirNo'+'rm\x20+\x20sampl'+'ePoints[i]'+'\x20*\x20shadowS'+'earchArea;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'ampleDir\x20='+'\x20normalize'+'(sampleDir'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'ocker\x20=\x20te'+'xtureCubeL'+'od(shadowM'+'ap,\x20sample'+'Dir,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20isB'+'locking\x20=\x20'+'step(block'+'er,\x20z);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20bloc'+'kers\x20+=\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20av'+'erageBlock'+'er\x20+=\x20bloc'+'ker\x20*\x20isBl'+'ocking;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'f\x20(blocker'+'s\x20>\x200.0)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20averag'+'eBlocker\x20/'+'\x20blockers;'+'\x0a\x20\x20\x20\x20retur'+'n\x20-1.0;\x0a}\x0a'+'\x0afloat\x20PCS'+'SCube(samp'+'lerCube\x20sh'+'adowMap,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20shadowC'+'oords,\x20vec')+('4\x20cameraPa'+'rams,\x20floa'+'t\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20samplePoi'+'nts[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x20\x20\x20\x20fl'+'oat\x20noise\x20'+'=\x20noise(\x20g'+'l_FragCoor'+'d.xy\x20)\x20*\x202'+'.0\x20*\x20PI;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20r\x20=\x20pcs'+'sSphereSam'+'ples[i];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sam'+'plePoints['+'i]\x20=\x20vogel'+'Sphere(i,\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT),\x20nois'+'e,\x20r);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'orm\x20=\x20norm'+'alize(ligh'+'tDir);\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20averageB'+'locker\x20=\x20P'+'CSSCubeBlo'+'ckerDistan'+'ce(shadowM'+'ap,\x20lightD'+'irNorm,\x20sa'+'mplePoints'+',\x20receiver'+'Depth,\x20sha'+'dowSearchA'+'rea);\x0a\x20\x20\x20\x20'+'if\x20(averag'+'eBlocker\x20='+'=\x20-1.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20fi'+'lterRadius'+'\x20=\x20((recei'+'verDepth\x20-'+'\x20averageBl'+'ocker)\x20/\x20a'+'verageBloc'+'ker)\x20*\x20sha'+'dowSearchA'+'rea;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20for\x20(int'+'\x20i\x20=\x200;\x20i\x20'+'<\x20PCSS_SAM'+'PLE_COUNT;'+'\x20i++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20offset\x20'+'=\x20samplePo'+'ints[i]\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sampleDir'+'\x20=\x20lightDi'+'rNorm\x20+\x20of'+'fset;\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleDir\x20=\x20'+'normalize('+'sampleDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depth\x20=\x20t'+'extureCube'+'Lod(shadow'+'Map,\x20sampl'+'eDir,\x200.0)'+'.r;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'ow\x20+=\x20step'+'(receiverD'+'epth,\x20dept'+'h);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20s'+'hadow\x20/\x20fl'+'oat(PCSS_S'+'AMPLE_COUN'+'T);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0afloat\x20g'+'etShadowOm'+'niPCSS(sam'+'plerCube\x20s'+'hadowMap,\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'4\x20cameraPa'+'rams,\x20vec2'+'\x20shadowSea'+'rchArea,\x20v'+'ec3\x20lightD'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SCube(shad'+'owMap,\x20sha'+'dowParams,'+'\x20shadowCoo'+'rd,\x20camera'+'Params,\x20sh'+'adowSearch'+'Area.x,\x20li'+'ghtDir);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'float\x20getS'+'hadowSpotP'+'CSS(TEXTUR'+'E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c4\x20cameraP'+'arams,\x20vec'+'2\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20return\x20PC'+'SS(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20cameraPar'+'ams,\x20shado'+'wSearchAre'+'a);\x0a}\x0a\x0a'),NP='\x0a\x0ahighp\x20fl'+'oat\x20fractS'+'inRand(con'+'st\x20in\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x20\x20\x20'+'\x20const\x20hig'+'hp\x20float\x20a'+'\x20=\x2012.9898'+',\x20b\x20=\x2078.2'+'33,\x20c\x20=\x2043'+'758.5453;\x0a'+'\x20\x20\x20\x20highp\x20'+'float\x20dt\x20='+'\x20dot(uv.xy'+',\x20vec2(a,\x20'+'b)),\x20sn\x20=\x20'+'mod(dt,\x20PI'+');\x0a\x20\x20\x20\x20ret'+'urn\x20fract('+'sin(sn)\x20*\x20'+'c);\x0a}\x0a\x0a//\x20'+'struct\x20to\x20'+'hold\x20preco'+'mputed\x20con'+'stants\x20and'+'\x20current\x20s'+'tate\x0astruc'+'t\x20VogelDis'+'kData\x20{\x0a\x20\x20'+'\x20\x20float\x20in'+'vNumSample'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20initial'+'Angle;\x0a\x20\x20\x20'+'\x20float\x20cur'+'rentPointI'+'d;\x0a};\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'void\x20prepa'+'reDiskCons'+'tants(out\x20'+'VogelDiskD'+'ata\x20data,\x20'+'int\x20sample'+'Count,\x20flo'+'at\x20randomS'+'eed)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20pi2\x20=\x206'+'.283185307'+'18;\x0a\x20\x20\x20\x20da'+'ta.invNumS'+'amples\x20=\x201'+'.0\x20/\x20float'+'(sampleCou'+'nt);\x0a\x20\x20\x20\x20d'+'ata.initia'+'lAngle\x20=\x20r'+'andomSeed\x20'+'*\x20pi2;\x0a\x20\x20\x20'+'\x20data.curr'+'entPointId'+'\x20=\x200.0;\x0a}\x0a'+'\x0a\x0avec2\x20gen'+'erateDiskS'+'ample(inou'+'t\x20VogelDis'+'kData\x20data'+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'GOLDEN_ANG'+'LE\x20=\x202.399'+'963;\x0a\x20\x20\x20\x20f'+'loat\x20r\x20=\x20s'+'qrt((data.'+'currentPoi'+'ntId\x20+\x200.5'+')\x20*\x20data.i'+'nvNumSampl'+'es);\x0a\x20\x20\x20\x20f'+'loat\x20theta'+'\x20=\x20data.cu'+'rrentPoint'+'Id\x20*\x20GOLDE'+'N_ANGLE\x20+\x20'+'data.initi'+'alAngle;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20o'+'ffset\x20=\x20ve'+('c2(cos(the'+'ta),\x20sin(t'+'heta))\x20*\x20p'+'ow(r,\x201.33'+');\x0a\x0a\x20\x20\x20\x20da'+'ta.current'+'PointId\x20+='+'\x201.0;\x0a\x20\x20\x20\x20'+'return\x20off'+'set;\x0a}\x0a\x0avo'+'id\x20PCSSFin'+'dBlocker(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20out\x20'+'float\x20avgB'+'lockerDept'+'h,\x20out\x20int'+'\x20numBlocke'+'rs,\x0a\x20\x20\x20\x20ve'+'c2\x20shadowC'+'oords,\x20flo'+'at\x20z,\x20int\x20'+'shadowBloc'+'kerSamples'+',\x20float\x20pe'+'numbraSize'+',\x20float\x20in'+'vShadowMap'+'Size,\x20floa'+'t\x20randomSe'+'ed)\x20{\x0a\x0a\x20\x20\x20'+'\x20VogelDisk'+'Data\x20diskD'+'ata;\x0a\x20\x20\x20\x20p'+'repareDisk'+'Constants('+'diskData,\x20'+'shadowBloc'+'kerSamples'+',\x20randomSe'+'ed);\x0a\x0a\x20\x20\x20\x20'+'float\x20sear'+'chWidth\x20=\x20'+'penumbraSi'+'ze\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x20\x20\x20\x20flo'+'at\x20blocker'+'Sum\x20=\x200.0;'+'\x0a\x20\x20\x20\x20numBl'+'ockers\x20=\x200'+';\x0a\x0a\x20\x20\x20\x20for'+'(\x20int\x20i\x20=\x20'+'0;\x20i\x20<\x20sha'+'dowBlocker'+'Samples;\x20+'+'+i\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'diskUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20sampleUV'+'\x20=\x20shadowC'+'oords\x20+\x20di'+'skUV\x20*\x20sea'+'rchWidth;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'MapDepth\x20='+'\x20texture2D'+'Lod(shadow'+'Map,\x20sampl'+'eUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(\x20shad'+'owMapDepth'+'\x20<\x20z\x20)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20blockerSu'+'m\x20+=\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers++;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20av'+'gBlockerDe'+'pth\x20=\x20bloc'+'kerSum\x20/\x20f'+'loat(numBl'+'ockers);\x0a}'+'\x0a\x0afloat\x20PC'+'SSFilter(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20uv,\x20float')+('\x20receiverD'+'epth,\x20int\x20'+'shadowSamp'+'les,\x20float'+'\x20filterRad'+'ius,\x20float'+'\x20randomSee'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'VogelDiskD'+'ata\x20diskDa'+'ta;\x0a\x20\x20\x20\x20pr'+'epareDiskC'+'onstants(d'+'iskData,\x20s'+'hadowSampl'+'es,\x20random'+'Seed);\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20shadowS'+'amples;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20of'+'fsetUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x20text'+'ure2DLod(s'+'hadowMap,\x20'+'uv\x20+\x20offse'+'tUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sum\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20retu'+'rn\x20sum\x20/\x20f'+'loat(shado'+'wSamples);'+'\x0a}\x0a\x0afloat\x20'+'getPenumbr'+'a(float\x20db'+'locker,\x20fl'+'oat\x20drecei'+'ver,\x20float'+'\x20penumbraS'+'ize,\x20float'+'\x20penumbraF'+'alloff)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'dist\x20=\x20dre'+'ceiver\x20-\x20d'+'blocker;\x0a\x20'+'\x20\x20\x20float\x20p'+'enumbra\x20=\x20'+'1.0\x20-\x20pow('+'1.0\x20-\x20dist'+',\x20penumbra'+'Falloff);\x0a'+'\x20\x20\x20\x20return'+'\x20penumbra\x20'+'*\x20penumbra'+'Size;\x0a}\x0a\x0af'+'loat\x20PCSSD'+'irectional'+'(TEXTURE_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oords,\x20vec'+'4\x20cameraPa'+'rams,\x20vec4'+'\x20softShado'+'wParams)\x20{'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20receiver'+'Depth\x20=\x20sh'+'adowCoords'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20random'+'Seed\x20=\x20fra'+'ctSinRand('+'gl_FragCoo'+'rd.xy);\x0a\x20\x20'+'\x20\x20int\x20shad'+'owSamples\x20'+'=\x20int(soft'+'ShadowPara'+'ms.x);\x0a\x20\x20\x20'+'\x20int\x20shado'+'wBlockerSa'+'mples\x20=\x20in'+'t(softShad')+('owParams.y'+');\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'aSize\x20=\x20so'+'ftShadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20float\x20pe'+'numbraFall'+'off\x20=\x20soft'+'ShadowPara'+'ms.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20normal'+'ized\x20inver'+'se\x20shadow\x20'+'map\x20size\x20t'+'o\x20preserve'+'\x20the\x20shado'+'w\x20softness'+'\x20regardles'+'s\x20of\x20the\x20s'+'hadow\x20reso'+'lution\x0a\x20\x20\x20'+'\x20int\x20shado'+'wMapSize\x20='+'\x20textureSi'+'ze(shadowM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20float\x20'+'invShadowM'+'apSize\x20=\x201'+'.0\x20/\x20float'+'(shadowMap'+'Size);\x0a\x20\x20\x20'+'\x20invShadow'+'MapSize\x20*='+'\x20float(sha'+'dowMapSize'+')\x20/\x202048.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'a;\x0a\x0a\x20\x20\x20\x20//'+'\x20contact\x20h'+'ardening\x20p'+'ath\x0a\x20\x20\x20\x20if'+'\x20(shadowBl'+'ockerSampl'+'es\x20>\x200)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20find\x20ave'+'rage\x20block'+'er\x20depth\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20avgBloc'+'kerDepth\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20int\x20nu'+'mBlockers\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20avgBlo'+'ckerDepth,'+'\x20numBlocke'+'rs,\x20shadow'+'Coords.xy,'+'\x20receiverD'+'epth,\x20shad'+'owBlockerS'+'amples,\x20pe'+'numbraSize'+',\x20invShado'+'wMapSize,\x20'+'randomSeed'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20out\x20when\x20'+'no\x20blocker'+'s\x20are\x20pres'+'ent\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(numB'+'lockers\x20<\x20'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x201.0f;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'penumbra\x20s'+'ize\x20is\x20bas'+'ed\x20on\x20the\x20'+'blocker\x20de'+'pth\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20penumbra'+'\x20=\x20getPenu'+'mbra(avgBl'+'ockerDepth'+',\x20shadowCo'+'ords.z,\x20pe'+'numbraSize'+',\x20penumbra')+('Falloff);\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'tant\x20filte'+'r\x20size,\x20no'+'\x20contact\x20h'+'ardening\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pen'+'umbra\x20=\x20pe'+'numbraSize'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20f'+'ilterRadiu'+'s\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoords'+'.xy,\x20recei'+'verDepth,\x20'+'shadowSamp'+'les,\x20filte'+'rRadius,\x20r'+'andomSeed)'+';\x0a}\x0a\x0afloat'+'\x20getShadow'+'PCSS(TEXTU'+'RE_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec4\x20camera'+'Params,\x20ve'+'c4\x20softSha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20return\x20P'+'CSSDirecti'+'onal(TEXTU'+'RE_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20cameraP'+'arams,\x20sof'+'tShadowPar'+'ams);\x0a}\x0a\x0a'),kP='\x0aattribute'+'\x20float\x20ver'+'tex_boneIn'+'dices;\x0a\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20texture_'+'poseMap;\x0a\x0a'+'mat4\x20getBo'+'neMatrix(c'+'onst\x20in\x20fl'+'oat\x20indexF'+'loat)\x20{\x0a\x0a\x20'+'\x20\x20\x20int\x20wid'+'th\x20=\x20textu'+'reSize(tex'+'ture_poseM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20int\x20in'+'dex\x20=\x20int('+'indexFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x20\x20\x20\x20int'+'\x20iy\x20=\x20inde'+'x\x20/\x20width;'+'\x0a\x20\x20\x20\x20int\x20i'+'x\x20=\x20index\x20'+'%\x20width;\x0a\x0a'+'\x20\x20\x20\x20//\x20rea'+'d\x20elements'+'\x20of\x204x3\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20v1\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x200,'+'\x20iy),\x200);\x0a'+'\x20\x20\x20\x20vec4\x20v'+'2\x20=\x20texelF'+'etch(textu'+'re_poseMap'+',\x20ivec2(ix'+'\x20+\x201,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20v'+'ec4\x20v3\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x202,'+'\x20iy),\x200);\x0a'+'\x0a\x20\x20\x20\x20//\x20tr'+'anspose\x20to'+'\x204x4\x20matri'+'x\x0a\x20\x20\x20\x20retu'+'rn\x20mat4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'x,\x20v2.x,\x20v'+'3.x,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.y'+',\x20v2.y,\x20v3'+'.y,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.z,'+'\x20v2.z,\x20v3.'+'z,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.w,\x20'+'v2.w,\x20v3.w'+',\x201\x0a\x20\x20\x20\x20);'+'\x0a}\x0a',UP='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_boneWe'+'ights;\x0aatt'+'ribute\x20vec'+'4\x20vertex_b'+'oneIndices'+';\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20tex'+'ture_poseM'+'ap;\x0a\x0avoid\x20'+'getBoneMat'+'rix(const\x20'+'in\x20int\x20wid'+'th,\x20const\x20'+'in\x20int\x20ind'+'ex,\x20out\x20ve'+'c4\x20v1,\x20out'+'\x20vec4\x20v2,\x20'+'out\x20vec4\x20v'+'3)\x20{\x0a\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20in'+'dex\x20/\x20widt'+'h;\x0a\x20\x20\x20\x20int'+'\x20u\x20=\x20index'+'\x20%\x20width;\x0a'+'\x0a\x20\x20\x20\x20v1\x20=\x20'+'texelFetch'+'(texture_p'+'oseMap,\x20iv'+'ec2(u\x20+\x200,'+'\x20v),\x200);\x0a\x20'+'\x20\x20\x20v2\x20=\x20te'+'xelFetch(t'+'exture_pos'+'eMap,\x20ivec'+'2(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20v3\x20=\x20texe'+'lFetch(tex'+'ture_poseM'+'ap,\x20ivec2('+'u\x20+\x202,\x20v),'+'\x200);\x0a}\x0a\x0ama'+'t4\x20getSkin'+'Matrix(con'+'st\x20in\x20vec4'+'\x20indicesFl'+'oat,\x20const'+'\x20in\x20vec4\x20w'+'eights)\x20{\x0a'+'\x0a\x20\x20\x20\x20int\x20w'+'idth\x20=\x20tex'+'tureSize(t'+'exture_pos'+'eMap,\x200).x'+';\x0a\x20\x20\x20\x20ivec'+'4\x20indices\x20'+'=\x20ivec4(in'+'dicesFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20get\x204\x20bon'+'e\x20matrices'+'\x0a\x20\x20\x20\x20vec4\x20'+'a1,\x20a2,\x20a3'+';\x0a\x20\x20\x20\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.x,\x20a1'+',\x20a2,\x20a3);'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20b1,\x20b2,\x20b'+'3;\x0a\x20\x20\x20\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y,\x20b'+'1,\x20b2,\x20b3)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20c1,\x20c2,\x20'+'c3;\x0a\x20\x20\x20\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.z,\x20'+'c1,\x20c2,\x20c3'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20d1,\x20d2,'+'\x20d3;\x0a\x20\x20\x20\x20g'+'etBoneMatr'+'ix(width,\x20'+'indices.w,'+'\x20d1,\x20d2,\x20d'+'3);\x0a\x0a\x20\x20\x20\x20/'+'/\x20multiply'+'\x20them\x20by\x20w'+'eights\x20and'+'\x20add\x20up\x20to'+'\x20get\x20final'+'\x204x3\x20matri'+('x\x0a\x20\x20\x20\x20vec4'+'\x20v1\x20=\x20a1\x20*'+'\x20weights.x'+'\x20+\x20b1\x20*\x20we'+'ights.y\x20+\x20'+'c1\x20*\x20weigh'+'ts.z\x20+\x20d1\x20'+'*\x20weights.'+'w;\x0a\x20\x20\x20\x20vec'+'4\x20v2\x20=\x20a2\x20'+'*\x20weights.'+'x\x20+\x20b2\x20*\x20w'+'eights.y\x20+'+'\x20c2\x20*\x20weig'+'hts.z\x20+\x20d2'+'\x20*\x20weights'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20v3\x20=\x20a3'+'\x20*\x20weights'+'.x\x20+\x20b3\x20*\x20'+'weights.y\x20'+'+\x20c3\x20*\x20wei'+'ghts.z\x20+\x20d'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'//\x20add\x20up\x20'+'weights\x0a\x20\x20'+'\x20\x20float\x20on'+'e\x20=\x20dot(we'+'ights,\x20vec'+'4(1.0));\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.x'+',\x20v2.x,\x20v3'+'.x,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.y,'+'\x20v2.y,\x20v3.'+'y,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.z,\x20'+'v2.z,\x20v3.z'+',\x200,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20v1.w,\x20v'+'2.w,\x20v3.w,'+'\x20one\x0a\x20\x20\x20\x20)'+';\x0a}\x0a'),BP='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20float\x20v'+'LinearDept'+'h;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22floatAsUi'+'ntPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec3\x20vView'+'Dir;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20skyboxH'+'ighlightMu'+'ltiplier;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SKY_CUBE'+'MAP\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20texture'+'_cubeMap;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SKYM'+'ESH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec3\x20v'+'WorldPos;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20project'+'edSkydomeC'+'enter;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#el'+'se\x20//\x20env-'+'atlas\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22spher'+'icalPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22envA'+'tlasPS\x22\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_envAtla'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mipLe'+'vel;\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20linear\x20d'+'epth\x20durin'+'g\x20prepass\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20flo'+'at2vec4(vL'+'inearDepth'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20SK'+'Y_CUBEMAP\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SKYMES'+'H\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+('\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envDir\x20=\x20n'+'ormalize(v'+'WorldPos\x20-'+'\x20projected'+'SkydomeCen'+'ter);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20env'+'Dir\x20*\x20cube'+'MapRotatio'+'nMatrix;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20di'+'r\x20=\x20vViewD'+'ir;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir.x'+'\x20*=\x20-1.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20linear\x20=\x20'+'{SKYBOX_DE'+'CODE_FNC}('+'textureCub'+'e(texture_'+'cubeMap,\x20d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x20//\x20en'+'v-atlas\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20vVie'+'wDir\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20toSph'+'ericalUv(n'+'ormalize(d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20mipLev'+'el)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20our\x20HDR'+'\x20encodes\x20v'+'alues\x20up\x20t'+'o\x2064,\x20so\x20a'+'llow\x20extra'+'\x20brightnes'+'s\x20for\x20the\x20'+'clipped\x20va'+'lues\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(any(great'+'erThanEqua'+'l(linear,\x20'+'vec3(64.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20skyboxHi'+'ghlightMul'+'tiplier;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(toneM'+'ap(process'+'Environmen'+'t(linear))'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20}'+'\x0a'),zP='\x0aattribute'+'\x20vec4\x20aPos'+'ition;\x0a\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tionSkybox'+';\x0auniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x0av'+'arying\x20vec'+'3\x20vViewDir'+';\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20//\x20'+'when\x20skydo'+'me\x20renders'+'\x20depth\x20dur'+'ing\x20prepas'+'s,\x20generat'+'e\x20linear\x20d'+'epth\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20vLinear'+'Depth;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20SKYMESH\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec3\x20vW'+'orldPos;\x0a#'+'endif\x0a\x0avoi'+'d\x20main(voi'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'mat4\x20view\x20'+'=\x20matrix_v'+'iew;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20SKY'+'MESH\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec4\x20w'+'orldPos\x20=\x20'+'matrix_mod'+'el\x20*\x20aPosi'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vWorld'+'Pos\x20=\x20worl'+'dPos.xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20'+'=\x20matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20PREPASS'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20linear\x20de'+'pth\x20from\x20t'+'he\x20worldPo'+'sition,\x20se'+'e\x20getLinea'+'rDepth\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vWorl'+'dPos,\x201.0)'+').z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'view[3][0]'+'\x20=\x20view[3]'+'[1]\x20=\x20view'+'[3][2]\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20matr'+'ix_project'+'ionSkybox\x20'+'*\x20(view\x20*\x20'+'aPosition)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vViewDir\x20='+'\x20aPosition'+'.xyz\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20//\x20for\x20in'+'finite\x20sky'+'box,\x20use\x20n'+'egative\x20gl'+'_Position.'+'w\x20to\x20get\x20p'+'ositive\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vLinear'+'Depth\x20=\x20-g'+'l_Position'+'.w;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20Fo'+'rce\x20skybox'+'\x20to\x20far\x20Z,'+'\x20regardles'+'s\x20of\x20the\x20c'+'lip\x20planes'+'\x20on\x20the\x20ca'+'mera\x0a\x20\x20\x20\x20/'+'/\x20Subtract'+'\x20a\x20tiny\x20fu'+'dge\x20factor'+'\x20to\x20ensure'+'\x20floating\x20'+'point\x20erro'+'rs\x20don\x27t\x0a\x20'+'\x20\x20\x20//\x20stil'+'l\x20push\x20pix'+'els\x20beyond'+'\x20far\x20Z.\x20Se'+'e:\x0a\x20\x20\x20\x20//\x20'+'https://co'+'mmunity.kh'+'ronos.org/'+'t/skybox-p'+'roblem/618'+'57\x0a\x0a\x20\x20\x20\x20gl'+'_Position.'+'z\x20=\x20gl_Pos'+'ition.w\x20-\x20'+'1.0e-7;\x0a}\x0a'),VP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0auniform\x20v'+'ec3\x20materi'+'al_specula'+'r;\x0a#endif\x0a'+'\x0avoid\x20getS'+'pecularity'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20specul'+'arColor\x20=\x20'+'vec3(1,1,1'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20specularC'+'olor\x20*=\x20ma'+'terial_spe'+'cular;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'AR_TEXTURE'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_SPECULAR_'+'TEXTURE_NA'+'ME},\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20textureB'+'ias)).{STD'+'_SPECULAR_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SPECU'+'LAR_VERTEX'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_S'+'PECULAR_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20spe'+'cularColor'+';\x0a}\x0a',GP='\x0a//\x20equire'+'ctangular\x20'+'helper\x20fun'+'ctions\x0avec'+'2\x20toSpheri'+'cal(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(dir.xz\x20='+'=\x20vec2(0.0'+')\x20?\x200.0\x20:\x20'+'atan(dir.x'+',\x20dir.z),\x20'+'asin(dir.y'+'));\x0a}\x0a\x0avec'+'2\x20toSpheri'+'calUv(vec3'+'\x20dir)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PI\x20=\x203'+'.141592653'+'589793;\x0a\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20toSpheri'+'cal(dir)\x20/'+'\x20vec2(PI\x20*'+'\x202.0,\x20PI)\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+';\x0a}\x0a',HP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_specula'+'rityFactor'+';\x0a#endif\x0a\x0a'+'void\x20getSp'+'ecularityF'+'actor()\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'specularit'+'yFactor\x20=\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULARI'+'TYFACTOR_C'+'ONSTANT\x0a\x20\x20'+'\x20\x20specular'+'ityFactor\x20'+'*=\x20materia'+'l_specular'+'ityFactor;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE\x0a\x20\x20\x20\x20sp'+'ecularityF'+'actor\x20*=\x20t'+'exture2DBi'+'as({STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE_NAME},'+'\x20{STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_VERT'+'EX\x0a\x20\x20\x20\x20spe'+'cularityFa'+'ctor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SPECU'+'LARITYFACT'+'OR_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dSp'+'ecularityF'+'actor\x20=\x20sp'+'ecularityF'+'actor;\x0a}\x0a',WP='\x0afloat\x20get'+'SpotEffect'+'(vec3\x20ligh'+'tSpotDir,\x20'+'float\x20ligh'+'tInnerCone'+'Angle,\x20flo'+'at\x20lightOu'+'terConeAng'+'le,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20cosAn'+'gle\x20=\x20dot('+'lightDirNo'+'rm,\x20lightS'+'potDir);\x0a\x20'+'\x20\x20\x20return\x20'+'smoothstep'+'(lightOute'+'rConeAngle'+',\x20lightInn'+'erConeAngl'+'e,\x20cosAngl'+'e);\x0a}\x0a',$P='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2(vUv0.'+'x,\x201.0\x20-\x20v'+'Uv0.y);\x0a',XP='\x0a\x20\x20\x20\x20vec2\x20'+'tileMask\x20='+'\x20step(vMas'+'k,\x20vec2(0.'+'99999));\x0a\x20'+'\x20\x20\x20vec2\x20ti'+'leSize\x20=\x200'+'.5\x20*\x20(inne'+'rOffset.xy'+'\x20+\x20innerOf'+'fset.zw);\x0a'+'\x20\x20\x20\x20vec2\x20t'+'ileScale\x20='+'\x20vec2(1.0)'+'\x20/\x20(vec2(1'+'.0)\x20-\x20tile'+'Size);\x0a\x20\x20\x20'+'\x20vec2\x20clam'+'pedUv\x20=\x20mi'+'x(innerOff'+'set.xy\x20*\x200'+'.5,\x20vec2(1'+'.0)\x20-\x20inne'+'rOffset.zw'+'\x20*\x200.5,\x20fr'+'act((vTile'+'dUv\x20-\x20tile'+'Size)\x20*\x20ti'+'leScale));'+'\x0a\x20\x20\x20\x20clamp'+'edUv\x20=\x20cla'+'mpedUv\x20*\x20a'+'tlasRect.z'+'w\x20+\x20atlasR'+'ect.xy;\x0a\x20\x20'+'\x20\x20nineSlic'+'edUv\x20=\x20vUv'+'0\x20*\x20tileMa'+'sk\x20+\x20clamp'+'edUv\x20*\x20(ve'+'c2(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x20\x20\x20\x20\x0a',qP='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20float\x20dAl'+'pha\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_o'+'pacityMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20global'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dAlbe'+'do;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20dNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dSpeculari'+'ty\x20=\x20vec3('+'0.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dGlossines'+'s\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20dT'+'ransmissio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dThicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SC'+'ENE_COLOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'uSceneColo'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SCREEN_SI'+'ZE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20uS'+'creenSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_TRAN'+'SFORMS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20matrix_v'+'iewProject'+'ion;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_mod'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20parallax\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20dUv'+'Offset;\x0a\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_he'+'ightMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20diffu'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20tex'+'ture_diffu'+'seMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_diffuseDe'+'tailMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_normal'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'NORMALDETA'+'IL_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_no'+'rmalDetail'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20refracti'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_THICKNES'+'S_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_thi'+'cknessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_REFRA'+'CTION_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_refractio'+'nMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20iridesc'+'ence\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_IRIDES'+'CENCE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20dIride'+'scence;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dIri'+'descenceTh')+('ickness;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_irides'+'cenceThick'+'nessMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_iridesce'+'nceMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20ccNorm'+'alW;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dAnisotro'+'py;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20&\x20glossin'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_OR_REFLE'+'CTION\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20sheen\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20sGloss'+'iness;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SHEEN'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_sheenM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_sh'+'eenGlossMa')+('p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20metalness'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dMet'+'alness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dIor;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_met'+'alnessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20dSpecula'+'rityFactor'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_speculari'+'tyFactorMa'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20specular\x20'+'color\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_specula'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20gloss\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_gl'+'ossMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dAo'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_aoM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_aoDeta'+'ilMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dEmis'+'sion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_EMISS'+'IVE_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_e'+'missiveMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'learcoat\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'EARCOAT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatG'+'lossMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'NORMAL_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_clea'+'rCoatNorma'+'lMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'anisotropy'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde')+('f\x20STD_ANIS'+'OTROPY_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_anis'+'otropyMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dLightma'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_LIGH'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_lightMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20front\x20'+'end\x20output'+'s\x20to\x20lit\x20s'+'hader\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'litShaderC'+'orePS\x22\x0a'),jP='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20voi'+'d\x20getSpecu'+'larity()\x20{'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20vec'+'3(1);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20g'+'loss\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22glo'+'ssPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20ao\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'aoPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'emissivePS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO')+('AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22clear'+'CoatPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatG'+'lossPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatN'+'ormalPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20anis'+'otropy\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ani'+'sotropyPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(STD'+'_LIGHTMAP)'+'\x20||\x20define'+'d(STD_LIGH'+'T_VERTEX_C'+'OLOR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20void\x20eval'+'uateFronte'+'nd()\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIT'+'_BLEND_TYP'+'E\x20!=\x20NONE\x20'+'||\x20defined'+'(LIT_ALPHA'+'_TEST)\x20||\x20'+'defined(LI'+'T_ALPHA_TO'+'_COVERAGE)'+'\x20||\x20STD_OP'+'ACITY_DITH'+'ER\x20!=\x20NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getOpac'+'ity();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_ALPH'+'A_TEST)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alphaT'+'est(dAlpha'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(dAlp'+'ha,\x200.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'opacity\x20=\x20'+'dAlpha;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20pa'+'rallax\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'HEIGHT_MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Parallax()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Albedo();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20d'+'Albedo;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20normal'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getNorm'+'al();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'worldNorma'+'l\x20=\x20dNorma'+'lW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_REFRACT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getRefract'+'ion();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_transmiss'+'ion\x20=\x20dTra'+'nsmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tThickness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_th'+'ickness\x20=\x20'+'dThickness'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_d'+'ispersion\x20'+'=\x20material'+'_dispersio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20iridescen'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_IRID'+'ESCENCE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getIri'+'descence()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tIridescen'+'ceThicknes'+'s();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_i'+'ridescence'+'_intensity'+'\x20=\x20dIrides'+'cence;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_iridescen'+'ce_thickne'+'ss\x20=\x20dIrid'+'escenceThi'+'ckness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('//\x20specula'+'rity\x20&\x20glo'+'ssiness\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR_'+'OR_REFLECT'+'ION\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getShee'+'n();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_sheen_s'+'pecularity'+'\x20=\x20sSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'SheenGloss'+'iness();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_she'+'en_gloss\x20='+'\x20sGlossine'+'ss;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20met'+'alness\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getMet'+'alness();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_me'+'talness\x20=\x20'+'dMetalness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getIor()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'ior\x20=\x20dIor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20specu'+'larity\x20fac'+'tor\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rityFactor'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ityFactor\x20'+'=\x20dSpecula'+'rityFactor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20gloss'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rity();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ity\x20=\x20dSpe'+'cularity;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss\x20'+'=\x20dGlossin')+('ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getAO'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ao'+'\x20=\x20dAo;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getEmi'+'ssion();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_e'+'mission\x20=\x20'+'dEmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cle'+'arcoat\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getC'+'learCoat()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tClearCoat'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getClearCo'+'atNormal()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20=\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_g'+'loss\x20=\x20ccG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_clear'+'coat_world'+'Normal\x20=\x20c'+'cNormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20aniso'+'tropy\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x20&&\x20def'+'ined(LIT_L'+'IGHTING)\x20&'+'&\x20defined('+'LIT_GGX_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getAni'+'sotropy();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20ligh'+'tmap\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(S'+'TD_LIGHTMA'+'P)\x20||\x20defi'+'ned(STD_LI'+'GHT_VERTEX'+'_COLOR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htMap();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_lightma'+'p\x20=\x20dLight'+'map;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_lightm'+'apDir\x20=\x20dL'+'ightmapDir'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20}\x0a'),YP='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20tbnBasis'+';\x0a#endif\x0a\x0a'+'void\x20getTB'+'N(vec3\x20tan'+'gent,\x20vec3'+'\x20binormal,'+'\x20vec3\x20norm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TB'+'N_TANGENTS'+'\x20//\x20tangen'+'ts\x20/\x20binor'+'mals\x20based'+'\x20TBN\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(tang'+'ent),\x20norm'+'alize(bino'+'rmal),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(TBN_'+'DERIVATIVE'+'S)\x20//\x20deri'+'vatives\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20{li'+'ghtingUv};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20get\x20edg'+'e\x20vectors\x20'+'of\x20the\x20pix'+'el\x20triangl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dp1\x20='+'\x20dFdx(\x20vPo'+'sitionW\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dp2\x20=\x20'+'dFdy(\x20vPos'+'itionW\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20duv1\x20=\x20'+'dFdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20duv2\x20'+'=\x20dFdy(\x20uv'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20solv'+'e\x20the\x20line'+'ar\x20system\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20dp2perp'+'\x20=\x20cross(\x20'+'dp2,\x20norma'+'l\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dp'+'1perp\x20=\x20cr'+'oss(\x20norma'+'l,\x20dp1\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20T\x20=\x20dp2'+'perp\x20*\x20duv'+'1.x\x20+\x20dp1p'+'erp\x20*\x20duv2'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20B\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+'dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+('ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'nom\x20=\x20max('+'\x20dot(T,T),'+'\x20dot(B,B)\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20inv'+'max\x20=\x20(den'+'om\x20==\x200.0)'+'\x20?\x200.0\x20:\x20t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3(T\x20*\x20i'+'nvmax,\x20-B\x20'+'*\x20invmax,\x20'+'normal\x20);\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20object'+'\x20space\x20TBN'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20B\x20=\x20c'+'ross(norma'+'l,\x20vObject'+'SpaceUpW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20T\x20=\x20cr'+'oss(normal'+',\x20B);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(d'+'ot(B,B)==0'+'.0)\x20//\x20dea'+'l\x20with\x20cas'+'e\x20when\x20vOb'+'jectSpaceU'+'pW\x20normal\x20'+'are\x20parall'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20major=max'+'(max(norma'+'l.x,\x20norma'+'l.y),\x20norm'+'al.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(normal'+'.x\x20==\x20majo'+'r)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20B\x20=\x20cro'+'ss(normal,'+'\x20vec3(0,1,'+'0));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20T\x20=\x20cross'+'(normal,\x20B'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20e'+'lse\x20if\x20(no'+'rmal.y\x20==\x20'+'major)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20B\x20='+'\x20cross(nor'+'mal,\x20vec3('+'0,0,1));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20if'+'\x20(normal.z'+'\x20==\x20major)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20B\x20=\x20cross'+'(normal,\x20v'+'ec3(1,0,0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(T),\x20'+'normalize('+'B),\x20normal'+'ize(normal'+'));\x0a\x0a\x20\x20\x20\x20#')+'endif\x0a}\x0a',KP='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_thickn'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tThickness'+'()\x20{\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_THICKNE'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dThi'+'ckness\x20*=\x20'+'material_t'+'hickness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_THI'+'CKNESS_TEX'+'TURE\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20texture'+'2DBias({ST'+'D_THICKNES'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_THICKNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_TH'+'ICKNESS_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',ZP='\x0a\x0a#if\x20(TON'+'EMAP\x20==\x20NO'+'NE)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22to'+'nemappingN'+'onePS\x22\x0a#el'+'if\x20TONEMAP'+'\x20==\x20FILMIC'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingFilm'+'icPS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20LINEAR\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingLinea'+'rPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20HEJL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngHejlPS\x22\x0a'+'#elif\x20TONE'+'MAP\x20==\x20ACE'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22tone'+'mappingAce'+'sPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20ACES2\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingAces2PS'+'\x22\x0a#elif\x20TO'+'NEMAP\x20==\x20N'+'EUTRAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngNeutralP'+'S\x22\x0a#endif\x0a'+'\x0a',QP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20tA\x20=\x202.'+'51;\x0a\x20\x20\x20\x20fl'+'oat\x20tB\x20=\x200'+'.03;\x0a\x20\x20\x20\x20f'+'loat\x20tC\x20=\x20'+'2.43;\x0a\x20\x20\x20\x20'+'float\x20tD\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20float\x20tE\x20'+'=\x200.14;\x0a\x20\x20'+'\x20\x20vec3\x20x\x20='+'\x20color\x20*\x20e'+'xposure;\x0a\x20'+'\x20\x20\x20return\x20'+'(x*(tA*x+t'+'B))/(x*(tC'+'*x+tD)+tE)'+';\x0a}\x0a',JP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0a//\x20A'+'CES\x20approx'+'imation\x20by'+'\x20Stephen\x20H'+'ill\x0a\x0a//\x20sR'+'GB\x20=>\x20XYZ\x20'+'=>\x20D65_2_D'+'60\x20=>\x20AP1\x20'+'=>\x20RRT_SAT'+'\x0aconst\x20mat'+'3\x20ACESInpu'+'tMat\x20=\x20mat'+'3(\x0a\x20\x20\x20\x200.5'+'9719,\x200.35'+'458,\x200.048'+'23,\x0a\x20\x20\x20\x200.'+'07600,\x200.9'+'0834,\x200.01'+'566,\x0a\x20\x20\x20\x200'+'.02840,\x200.'+'13383,\x200.8'+'3777\x0a);\x0a\x0a/'+'/\x20ODT_SAT\x20'+'=>\x20XYZ\x20=>\x20'+'D60_2_D65\x20'+'=>\x20sRGB\x0aco'+'nst\x20mat3\x20A'+'CESOutputM'+'at\x20=\x20mat3('+'\x0a\x20\x20\x20\x20\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367,\x0a\x20\x20\x20\x20-'+'0.10208,\x20\x20'+'1.10813,\x20-'+'0.00605,\x0a\x20'+'\x20\x20\x20-0.0032'+'7,\x20-0.0727'+'6,\x20\x201.0760'+'2\x0a);\x0a\x0avec3'+'\x20RRTAndODT'+'Fit(vec3\x20v'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20a\x20=\x20v\x20*'+'\x20(v\x20+\x200.02'+'45786)\x20-\x200'+'.000090537'+';\x0a\x20\x20\x20\x20vec3'+'\x20b\x20=\x20v\x20*\x20('+'0.983729\x20*'+'\x20v\x20+\x200.432'+'9510)\x20+\x200.'+'238081;\x0a\x20\x20'+'\x20\x20return\x20a'+'\x20/\x20b;\x0a}\x0a\x0av'+'ec3\x20toneMa'+'p(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'color\x20*=\x20e'+'xposure\x20/\x20'+'0.6;\x0a\x20\x20\x20\x20c'+'olor\x20=\x20col'+'or\x20*\x20ACESI'+'nputMat;\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20RRT\x20and'+'\x20ODT\x0a\x20\x20\x20\x20c'+'olor\x20=\x20RRT'+'AndODTFit('+'color);\x0a\x20\x20'+'\x20\x20color\x20=\x20'+'color\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20color\x20=\x20c'+'lamp(color'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',e2='\x0aconst\x20flo'+'at\x20A\x20=\x20\x200.'+'15;\x0aconst\x20'+'float\x20B\x20=\x20'+'\x200.50;\x0acon'+'st\x20float\x20C'+'\x20=\x20\x200.10;\x0a'+'const\x20floa'+'t\x20D\x20=\x20\x200.2'+'0;\x0aconst\x20f'+'loat\x20E\x20=\x20\x20'+'0.02;\x0acons'+'t\x20float\x20F\x20'+'=\x20\x200.30;\x0ac'+'onst\x20float'+'\x20W\x20=\x20\x2011.2'+';\x0a\x0auniform'+'\x20float\x20exp'+'osure;\x0a\x0ave'+'c3\x20unchart'+'ed2Tonemap'+'(vec3\x20x)\x20{'+'\x0a\x20\x20\x20return'+'\x20((x*(A*x+'+'C*B)+D*E)/'+'(x*(A*x+B)'+'+D*F))-E/F'+';\x0a}\x0a\x0avec3\x20'+'toneMap(ve'+'c3\x20color)\x20'+'{\x0a\x20\x20\x20\x20colo'+'r\x20=\x20unchar'+'ted2Tonema'+'p(color\x20*\x20'+'exposure);'+'\x0a\x20\x20\x20\x20vec3\x20'+'whiteScale'+'\x20=\x201.0\x20/\x20u'+'ncharted2T'+'onemap(vec'+'3(W,W,W));'+'\x0a\x20\x20\x20\x20color'+'\x20=\x20color\x20*'+'\x20whiteScal'+'e;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',t2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20col'+'or\x20*=\x20expo'+'sure;\x0a\x20\x20\x20\x20'+'const\x20floa'+'t\x20\x20A\x20=\x200.2'+'2,\x20B\x20=\x200.3'+',\x20C\x20=\x20.1,\x20'+'D\x20=\x200.2,\x20E'+'\x20=\x20.01,\x20F\x20'+'=\x200.3;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20Scl\x20=\x201'+'.25;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20h\x20=\x20m'+'ax(\x20vec3(0'+'.0),\x20color'+'\x20-\x20vec3(0.'+'004)\x20);\x0a\x20\x20'+'\x20\x20return\x20('+'h*((Scl*A)'+'*h+Scl*vec'+'3(C*B,C*B,'+'C*B))+Scl*'+'vec3(D*E,D'+'*E,D*E))\x20/'+'\x20(h*(A*h+v'+'ec3(B,B,B)'+')+vec3(D*F'+',D*F,D*F))'+'\x20-\x20Scl*vec'+'3(E/F,E/F,'+'E/F);\x0a}\x0a',s2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20color\x20'+'*\x20exposure'+';\x0a}\x0a',i2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x0a\x20\x20\x20\x20co'+'lor\x20*=\x20exp'+'osure;\x0a\x0a\x20\x20'+'\x20\x20float\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20float\x20d'+'esaturatio'+'n\x20=\x200.15;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20min(c'+'olor.r,\x20mi'+'n(color.g,'+'\x20color.b))'+';\x0a\x20\x20\x20\x20floa'+'t\x20offset\x20='+'\x20x\x20<\x200.08\x20'+'?\x20x\x20-\x206.25'+'\x20*\x20x\x20*\x20x\x20:'+'\x200.04;\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20float\x20p'+'eak\x20=\x20max('+'color.r,\x20m'+'ax(color.g'+',\x20color.b)'+');\x0a\x20\x20\x20\x20if\x20'+'(peak\x20<\x20st'+'artCompres'+'sion)\x20retu'+'rn\x20color;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20d\x20=\x201.\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20float\x20ne'+'wPeak\x20=\x201.'+'\x20-\x20d\x20*\x20d\x20/'+'\x20(peak\x20+\x20d'+'\x20-\x20startCo'+'mpression)'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x20newPe'+'ak\x20/\x20peak;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20g\x20=\x201.\x20-'+'\x201.\x20/\x20(des'+'aturation\x20'+'*\x20(peak\x20-\x20'+'newPeak)\x20+'+'\x201.);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ne'+'wPeak\x20*\x20ve'+'c3(1,\x201,\x201'+'),\x20g);\x0a}\x0a',r2='\x0avec3\x20tone'+'Map(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'olor;\x0a}\x0a',a2='\x0a#ifdef\x20PI'+'XELSNAP\x0aun'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'CREENSPACE'+'\x0auniform\x20f'+'loat\x20proje'+'ctionFlipY'+';\x0a#endif\x0a\x0a'+'vec4\x20evalW'+'orldPositi'+'on(vec3\x20ve'+'rtexPositi'+'on,\x20mat4\x20m'+'odelMatrix'+')\x20{\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localP'+'os\x20=\x20getLo'+'calPositio'+'n(vertexPo'+'sition);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20NINESLICE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20outer\x20a'+'nd\x20inner\x20v'+'ertices\x20ar'+'e\x20at\x20the\x20s'+'ame\x20positi'+'on,\x20scale\x20'+'both\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s.xz\x20*=\x20ou'+'terScale;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nner\x20verti'+'ces\x20inside'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20(origina'+'l\x20vertices'+'\x20must\x20be\x20i'+'n\x20[-1;1]\x20r'+'ange)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20p'+'ositiveUni'+'tOffset\x20=\x20'+'clamp(vert'+'exPosition'+'.xz,\x20vec2('+'0.0),\x20vec2'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20negativeU'+'nitOffset\x20'+'=\x20clamp(-v'+'ertexPosit'+'ion.xz,\x20ve'+'c2(0.0),\x20v'+'ec2(1.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'ocalPos.xz'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vTiledU'+'v\x20=\x20(local'+'Pos.xz\x20-\x20o'+'uterScale\x20'+'+\x20innerOff'+'set.xy)\x20*\x20'+'-0.5\x20+\x201.0'+';\x20//\x20uv\x20=\x20'+'local\x20pos\x20'+'-\x20inner\x20co'+'rner\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20localP'+'os.xz\x20*=\x20-'+'0.5;\x20//\x20mo'+'ve\x20from\x20-1'+';1\x20to\x20-0.5'+';0.5\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s\x20=\x20localP'+'os.xzy;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20vec4\x20p'+'osW\x20=\x20mode'+'lMatrix\x20*\x20'+'vec4(local'+('Pos,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREENS'+'PACE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20posW.zw'+'\x20=\x20vec2(0.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20posW;\x0a}\x0a'+'\x0avec4\x20getP'+'osition()\x20'+'{\x0a\x0a\x20\x20\x20\x20dMo'+'delMatrix\x20'+'=\x20getModel'+'Matrix();\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'posW\x20=\x20eva'+'lWorldPosi'+'tion(verte'+'x_position'+'.xyz,\x20dMod'+'elMatrix);'+'\x0a\x20\x20\x20\x20dPosi'+'tionW\x20=\x20po'+'sW.xyz;\x0a\x0a\x20'+'\x20\x20\x20vec4\x20sc'+'reenPos;\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV1LAYOUT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sc'+'reenPos\x20=\x20'+'vec4(verte'+'x_texCoord'+'1.xy\x20*\x202.0'+'\x20-\x201.0,\x200.'+'5,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20WEBGPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20SCREENSP'+'ACE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos\x20=\x20po'+'sW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.y\x20*='+'\x20projectio'+'nFlipY;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20screen'+'Pos\x20=\x20matr'+'ix_viewPro'+'jection\x20*\x20'+'posW;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PIX'+'ELSNAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20snap\x20ver'+'tex\x20to\x20a\x20p'+'ixel\x20bound'+'ary\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x200.5'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.xy\x20*=\x20uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'ScreenSize'+'.zw;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x202.'+'0)\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20sc'+'reenPos;\x0a}')+('\x0a\x0avec3\x20get'+'WorldPosit'+'ion()\x20{\x0a\x20\x20'+'\x20\x20return\x20d'+'PositionW;'+'\x0a}\x0a'),n2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_positi'+'on;\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifdef\x20MORP'+'HING\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20morph_te'+'x_params;\x0a'+'\x20\x20\x20\x20attrib'+'ute\x20uint\x20m'+'orph_verte'+'x_id;\x0a\x0a\x20\x20\x20'+'\x20ivec2\x20get'+'TextureMor'+'phCoords()'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20turn\x20'+'morph_vert'+'ex_id\x20into'+'\x20int\x20grid\x20'+'coordinate'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ivec2\x20text'+'ureSize\x20=\x20'+'ivec2(morp'+'h_tex_para'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20mor'+'phGridV\x20=\x20'+'int(morph_'+'vertex_id)'+'\x20/\x20texture'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20int\x20'+'morphGridU'+'\x20=\x20int(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20flipY\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20morphGrid'+'V\x20=\x20textur'+'eSize.y\x20-\x20'+'morphGridV'+'\x20-\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20ivec'+'2(morphGri'+'dU,\x20morphG'+'ridV);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_POSITI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_INT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec3\x20aabb'+'Size;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20aabbMin;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'usampler2D'+'\x20morphPosi'+'tionTex;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20highp\x20s'+'ampler2D\x20m'+'orphPositi'+'onTex;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a#ifdef\x20de'+'fined(BATC'+'H)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ski'+'nBatchVS\x22\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getBon'+'eMatrix(ve'+'rtex_boneI'+'ndices);\x0a\x20'+'\x20\x20\x20}\x0a\x0a#eli'+'f\x20defined('+'SKIN)\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x0a\x20'+'\x20\x20\x20mat4\x20ge'+'tModelMatr'+'ix()\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20get'+'SkinMatrix'+'(vertex_bo'+'neIndices,'+'\x20vertex_bo'+'neWeights)'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'elif\x20defin'+'ed(INSTANC'+'ING)\x0a\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'transformI'+'nstancingV'+'S\x22\x0a\x0a#else\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20matrix'+'_model;\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a\x0avec3\x20ge'+'tLocalPosi'+'tion(vec3\x20'+'vertexPosi'+'tion)\x20{\x0a\x0a\x20'+'\x20\x20\x20vec3\x20lo'+'calPos\x20=\x20v'+'ertexPosit'+'ion;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'morphUV\x20=\x20'+'getTexture'+'MorphCoord'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20MORPHING_'+'INT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20morphPos\x20'+'=\x20vec3(tex'+'elFetch(mo'+'rphPositio'+'nTex,\x20ivec'+'2(morphUV)'+',\x200).xyz)\x20'+'/\x2065535.0\x20'+'*\x20aabbSize'+'\x20+\x20aabbMin'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphPo'+'s\x20=\x20texelF'+'etch(morph'+'PositionTe'+'x,\x20ivec2(m'+'orphUV),\x200'+').xyz;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20localPos\x20'+'+=\x20morphPo'+'s;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20loc'+'alPos;\x0a}\x0a\x0a'),o2='\x0a\x0aattribut'+'e\x20vec4\x20ins'+'tance_line'+'1;\x0aattribu'+'te\x20vec4\x20in'+'stance_lin'+'e2;\x0aattrib'+'ute\x20vec4\x20i'+'nstance_li'+'ne3;\x0aattri'+'bute\x20vec4\x20'+'instance_l'+'ine4;\x0a\x0amat'+'4\x20getModel'+'Matrix()\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20mat'+'4(instance'+'_line1,\x20in'+'stance_lin'+'e2,\x20instan'+'ce_line3,\x20'+'instance_l'+'ine4);\x0a}\x0a',l2='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_refr'+'action;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getRefrac'+'tion()\x20{\x0a\x20'+'\x20\x20\x20float\x20r'+'efraction\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20ref'+'raction\x20=\x20'+'material_r'+'efraction;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_RE'+'FRACTION_T'+'EXTURE\x0a\x20\x20\x20'+'\x20refractio'+'n\x20*=\x20textu'+'re2DBias({'+'STD_REFRAC'+'TION_TEXTU'+'RE_NAME},\x20'+'{STD_REFRA'+'CTION_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_REF'+'RACTION_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_VERTEX'+'\x0a\x20\x20\x20\x20refra'+'ction\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_REFR'+'ACTION_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dTransmis'+'sion\x20=\x20ref'+'raction;\x0a}'+'\x0a',c2='\x0auniform\x20f'+'loat\x20twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0avoi'+'d\x20handleTw'+'oSidedLigh'+'ting()\x20{\x0a\x20'+'\x20\x20\x20dTBN[2]'+'\x20*=\x20gl_Fro'+'ntFacing\x20?'+'\x20twoSidedL'+'ightingNeg'+'ScaleFacto'+'r\x20:\x20-twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0a}\x0a',h2='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20vec2\x20ge'+'tUv0()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20ver'+'tex_positi'+'on.xz;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20o'+'ffset\x20inne'+'r\x20vertices'+'\x20inside\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20('+'original\x20v'+'ertices\x20mu'+'st\x20be\x20in\x20['+'-1;1]\x20rang'+'e)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2(0.'+'0),\x20vec2(1'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20n'+'egativeUni'+'tOffset\x20=\x20'+'clamp(-ver'+'tex_positi'+'on.xz,\x20vec'+'2(0.0),\x20ve'+'c2(1.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20-0.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20atlasRe'+'ct.zw\x20+\x20at'+'lasRect.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vMask\x20=\x20v'+'ertex_texC'+'oord0.xy;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20uv;\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20vec2'+'\x20getUv0()\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20ver'+'tex_texCoo'+'rd0;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a',d2='\x0avec2\x20getU'+'v1()\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'rtex_texCo'+'ord1;\x0a}\x0a',f2='\x0avUV{TRANS'+'FORM_UV_{i'+'}}_{TRANSF'+'ORM_ID_{i}'+'}\x20=\x20vec2(\x0a'+'\x20\x20\x20\x20dot(ve'+'c3(uv{TRAN'+'SFORM_UV_{'+'i}},\x201),\x20{'+'TRANSFORM_'+'NAME_{i}}0'+'),\x0a\x20\x20\x20\x20dot'+'(vec3(uv{T'+'RANSFORM_U'+'V_{i}},\x201)'+',\x20{TRANSFO'+'RM_NAME_{i'+'}}1)\x0a);\x0a',u2='\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}0;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}1;'+'\x0a',p2='\x0avoid\x20getV'+'iewDir()\x20{'+'\x0a\x20\x20\x20\x20dView'+'DirW\x20=\x20nor'+'malize(vie'+'w_position'+'\x20-\x20vPositi'+'onW);\x0a}\x0a',m2={'alphaTestPS':uC,'ambientPS':pC,'anisotropyPS':mC,'aoPS':_C,'aoDiffuseOccPS':gC,'aoSpecOccPS':SC,'bakeDirLmEndPS':yC,'bakeLmEndPS':vC,'basePS':xC,'baseNineSlicedPS':TC,'baseNineSlicedTiledPS':wC,'bayerPS':EC,'blurVSMPS':bC,'clearCoatPS':AC,'clearCoatGlossPS':CC,'clearCoatNormalPS':PC,'clusteredLightCookiesPS':DC,'clusteredLightShadowsPS':IC,'clusteredLightUtilsPS':MC,'clusteredLightPS':LC,'combinePS':RC,'cookieBlit2DPS':OC,'cookieBlitCubePS':FC,'cookieBlitVS':NC,'cookiePS':kC,'cubeMapProjectPS':UC,'cubeMapRotatePS':BC,'debugOutputPS':zC,'debugProcessFrontendPS':VC,'detailModesPS':HC,'diffusePS':WC,'decodePS':GC,'emissivePS':$C,'encodePS':XC,'endPS':qC,'envAtlasPS':jC,'envProcPS':YC,'falloffInvSquaredPS':KC,'falloffLinearPS':ZC,'floatAsUintPS':QC,'fogPS':JC,'fresnelSchlickPS':e1,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':t1,'gammaPS':s1,'gles3PS':ay,'gles3VS':ny,'glossPS':i1,'gsplatCenterVS':r1,'gsplatCornerVS':p1,'gsplatColorVS':a1,'gsplatCommonVS':n1,'gsplatCompressedDataVS':o1,'gsplatCompressedSHVS':l1,'gsplatEvalSHVS':c1,'gsplatQuatToMat3VS':h1,'gsplatSogsColorVS':d1,'gsplatSogsDataVS':f1,'gsplatSogsSHVS':u1,'gsplatDataVS':m1,'gsplatOutputVS':_1,'gsplatPS':g1,'gsplatSHVS':S1,'gsplatSourceVS':y1,'gsplatVS':v1,'quadVS':x1,'immediateLinePS':T1,'immediateLineVS':w1,'iridescenceDiffractionPS':E1,'iridescencePS':b1,'iridescenceThicknessPS':A1,'iorPS':C1,'lightDeclarationPS':P1,'lightDiffuseLambertPS':M1,'lightDirPointPS':D1,'lightEvaluationPS':I1,'lightFunctionLightPS':L1,'lightFunctionShadowPS':R1,'lightingPS':O1,'lightmapAddPS':F1,'lightmapPS':N1,'lightSpecularAnisoGGXPS':k1,'lightSpecularBlinnPS':U1,'lightSheenPS':B1,'linearizeDepthPS':z1,'litForwardBackendPS':V1,'litForwardDeclarationPS':G1,'litForwardMainPS':H1,'litForwardPostCodePS':W1,'litForwardPreCodePS':$1,'litMainPS':X1,'litMainVS':q1,'litOtherMainPS':j1,'litShaderArgsPS':Y1,'litShaderCorePS':K1,'litShadowMainPS':Z1,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':Q1,'metalnessPS':J1,'metalnessModulatePS':tP,'morphPS':sP,'morphVS':iP,'msdfPS':eP,'msdfVS':rP,'normalVS':aP,'normalCoreVS':nP,'normalMapPS':oP,'opacityPS':lP,'opacityDitherPS':cP,'outputPS':hP,'outputAlphaPS':dP,'outputTex2DPS':fP,'sheenPS':uP,'sheenGlossPS':pP,'parallaxPS':mP,'pickPS':_P,'reflDirPS':gP,'reflDirAnisoPS':SP,'reflectionCCPS':yP,'reflectionCubePS':vP,'reflectionEnvHQPS':xP,'reflectionEnvPS':TP,'reflectionSpherePS':wP,'reflectionSheenPS':EP,'refractionCubePS':bP,'refractionDynamicPS':AP,'reprojectPS':CP,'reprojectVS':PP,'screenDepthPS':MP,'shadowCascadesPS':DP,'shadowEVSMPS':IP,'shadowPCF1PS':LP,'shadowPCF3PS':RP,'shadowPCF5PS':OP,'shadowPCSSPS':FP,'shadowSoftPS':NP,'skinBatchVS':kP,'skinVS':UP,'skyboxPS':BP,'skyboxVS':zP,'specularPS':VP,'sphericalPS':GP,'specularityFactorPS':HP,'spotPS':WP,'startNineSlicedPS':$P,'startNineSlicedTiledPS':XP,'stdDeclarationPS':qP,'stdFrontEndPS':jP,'TBNPS':YP,'thicknessPS':KP,'tonemappingPS':ZP,'tonemappingAcesPS':QP,'tonemappingAces2PS':JP,'tonemappingFilmicPS':e2,'tonemappingHejlPS':t2,'tonemappingLinearPS':s2,'tonemappingNeutralPS':i2,'tonemappingNonePS':r2,'transformVS':a2,'transformCoreVS':n2,'transformInstancingVS':o2,'transmissionPS':l2,'twoSidedLightingPS':c2,'uv0VS':h2,'uv1VS':d2,'uvTransformVS':f2,'uvTransformUniformsPS':u2,'viewDirPS':p2,'webgpuPS':oy,'webgpuVS':ly},_2='\x0auniform\x20a'+'lpha_ref:\x20'+'f32;\x0a\x0afn\x20a'+'lphaTest(a'+':\x20f32)\x20{\x0a\x20'+'\x20\x20\x20if\x20(a\x20<'+'\x20uniform.a'+'lpha_ref)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',g2='\x0a\x0a#if\x20LIT_'+'AMBIENT_SO'+'URCE\x20==\x20AM'+'BIENTSH\x0a\x20\x20'+'\x20\x20uniform\x20'+'ambientSH:'+'\x20array<vec'+'3f,\x209>;\x0a#e'+'ndif\x0a\x0a#if\x20'+'LIT_AMBIEN'+'T_SOURCE\x20='+'=\x20ENVALATL'+'AS\x0a\x20\x20\x20\x20#in'+'clude\x20\x22env'+'AtlasPS\x22\x0a\x0a'+'\x20\x20\x20\x20#ifnde'+'f\x20ENV_ATLA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_en'+'vAtlas:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_envAt'+'lasSampler'+':\x20sampler;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'fn\x20addAmbi'+'ent(worldN'+'ormal:\x20vec'+'3f)\x20{\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20A'+'MBIENTSH\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20n:\x20vec3f'+'\x20=\x20cubeMap'+'Rotate(wor'+'ldNormal);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20color:\x20'+'vec3f\x20=\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[0]'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[1]\x20*\x20n.'+'x\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm.ambien'+'tSH[2]\x20*\x20n'+'.y\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form.ambie'+'ntSH[3]\x20*\x20'+'n.z\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform.ambi'+'entSH[4]\x20*'+'\x20n.x\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[5]\x20*\x20n.'+'z\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform.'+'ambientSH['+'6]\x20*\x20n.y\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform.amb'+'ientSH[7]\x20'+'*\x20(3.0\x20*\x20n'+'.z\x20*\x20n.z\x20-'+'\x201.0)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[8]'+'\x20*\x20(n.x\x20*\x20'+'n.x\x20-\x20n.y\x20'+'*\x20n.y);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20proces'+'sEnvironme'+'nt(max(col'+'or,\x20vec3f('+'0.0)));\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+('\x20ENVALATLA'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3f(-1.0,\x201'+'.0,\x201.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20mapUv'+'(toSpheric'+'alUv(dir),'+'\x20vec4f(128'+'.0,\x20256.0\x20'+'+\x20128.0,\x206'+'4.0,\x2032.0)'+'\x20/\x20atlasSi'+'ze);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20ra'+'w:\x20vec4f\x20='+'\x20textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20uv'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20linea'+'r:\x20vec3f\x20='+'\x20{ambientD'+'ecode}(raw'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20+=\x20pr'+'ocessEnvir'+'onment(lin'+'ear);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20C'+'ONSTANT\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20unifor'+'m.light_gl'+'obalAmbien'+'t;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),S2='\x0a#ifdef\x20LI'+'T_GGX_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_anis'+'otropyInte'+'nsity:\x20f32'+';\x0a\x20\x20\x20\x20unif'+'orm\x20materi'+'al_anisotr'+'opyRotatio'+'n:\x20vec2f;\x0a'+'#endif\x0a\x0afn'+'\x20getAnisot'+'ropy()\x20{\x0a\x20'+'\x20\x20\x20dAnisot'+'ropy\x20=\x200.0'+';\x0a\x20\x20\x20\x20dAni'+'sotropyRot'+'ation\x20=\x20ve'+'c2f(1.0,\x200'+'.0);\x0a\x0a#ifd'+'ef\x20LIT_GGX'+'_SPECULAR\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20=\x20un'+'iform.mate'+'rial_aniso'+'tropyInten'+'sity;\x0a\x20\x20\x20\x20'+'dAnisotrop'+'yRotation\x20'+'=\x20uniform.'+'material_a'+'nisotropyR'+'otation;\x0a#'+'endif\x0a\x0a#if'+'def\x20STD_AN'+'ISOTROPY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyTex:\x20'+'vec3f\x20=\x20te'+'xtureSampl'+'eBias({STD'+'_ANISOTROP'+'Y_TEXTURE_'+'NAME},\x20{ST'+'D_ANISOTRO'+'PY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'ANISOTROPY'+'_TEXTURE_U'+'V},\x20unifor'+'m.textureB'+'ias).rgb;\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20*=\x20a'+'nisotropyT'+'ex.b;\x0a\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyRotat'+'ionFromTex'+':\x20vec2f\x20=\x20'+'anisotropy'+'Tex.rg\x20*\x202'+'.0\x20-\x20vec2f'+'(1.0);\x0a\x20\x20\x20'+'\x20let\x20rotat'+'ionMatrix:'+'\x20mat2x2f\x20='+'\x20mat2x2f(d'+'Anisotropy'+'Rotation.x'+',\x20dAnisotr'+'opyRotatio'+'n.y,\x20-dAni'+'sotropyRot'+'ation.y,\x20d'+'Anisotropy'+'Rotation.x'+');\x0a\x20\x20\x20\x20dAn'+'isotropyRo'+'tation\x20=\x20r'+'otationMat'+'rix\x20*\x20anis'+'otropyRota'+'tionFromTe'+'x;\x0a#endif\x0a'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20c'+'lamp(dAnis'+'otropy,\x200.'+'0,\x201.0);\x0a}'+'\x0a',y2='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_aoI'+'ntensity:\x20'+'f32;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_AODETA'+'IL_TEXTURE'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22detai'+'lModesPS\x22\x0a'+'#endif\x0a\x0afn'+'\x20getAO()\x20{'+'\x0a\x20\x20\x20\x20dAo\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20aoBas'+'e:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_AO_TEXTU'+'RE_NAME},\x20'+'{STD_AO_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AO_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_AO_'+'TEXTURE_CH'+'ANNEL};\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_AO'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20aoDetail:'+'\x20f32\x20=\x20tex'+'tureSample'+'Bias({STD_'+'AODETAIL_T'+'EXTURE_NAM'+'E},\x20{STD_A'+'ODETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AODET'+'AIL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_AODETAI'+'L_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20aoBase\x20='+'\x20detailMod'+'e_{STD_AOD'+'ETAIL_DETA'+'ILMODE}(ve'+'c3f(aoBase'+'),\x20vec3f(a'+'oDetail)).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dAo'+'\x20=\x20dAo\x20*\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20=\x20dA'+'o\x20*\x20satura'+'te(vVertex'+'Color.{STD'+'_AO_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'STD_AO_TEX'+'TURE)\x20||\x20d'+'efined(STD'+'_AO_VERTEX'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAo\x20=\x20mix('+'1.0,\x20dAo,\x20'+'uniform.ma'+'terial_aoI'+'ntensity);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',v2='\x0afn\x20occlud'+'eDiffuse(a'+'o:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20ao;\x0a'+'}\x0a',x2='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'aterial_oc'+'cludeSpecu'+'larIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0afn'+'\x20occludeSp'+'ecular(glo'+'ss:\x20f32,\x20a'+'o:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f)\x20{\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20==\x20A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_OCCLUDE_S'+'PECULAR_FL'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'specOcc:\x20f'+'32\x20=\x20mix(1'+'.0,\x20ao,\x20un'+'iform.mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specOcc:'+'\x20f32\x20=\x20ao;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'GLOSSDEPEN'+'DENT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'roximated\x20'+'specular\x20o'+'cclusion\x20f'+'rom\x20AO\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ht'+'tp://resea'+'rch.tri-ac'+'e.com/Data'+'/cedec2011'+'_RealtimeP'+'BR_Impleme'+'ntation_e.'+'pptx\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20spe'+'cPow:\x20f32\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20specOc'+'c:\x20f32\x20=\x20s'+'aturate(po'+'w(dot(worl'+'dNormal,\x20v'+'iewDir)\x20+\x20'+'ao,\x200.01\x20*'+'\x20specPow)\x20'+'-\x201.0\x20+\x20ao'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_OCCLUDE'+'_SPECULAR_'+'FLOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecOcc\x20=\x20mi'+'x(1.0,\x20spe'+'cOcc,\x20unif'+'orm.materi'+'al_occlude'+'SpecularIn'+'tensity);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20*\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20dRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'*\x20specOcc;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sReflec'+'tion\x20=\x20sRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a'),T2='\x0a\x20\x20\x20\x20let\x20d'+'irLm\x20=\x20tex'+'tureSample'+'(texture_d'+'irLightMap'+',\x20texture_'+'dirLightMa'+'pSampler,\x20'+'vUv1);\x0a\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.bakeDi'+'r\x20>\x200.5)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(dAtten\x20'+'>\x200.00001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'npacked_di'+'r\x20=\x20dirLm.'+'xyz\x20*\x202.0\x20'+'-\x20vec3f(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x20clamp'+'(dAtten,\x200'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20comb'+'ined_dir\x20='+'\x20dLightDir'+'NormW.xyz\x20'+'*\x20dAtten\x20+'+'\x20unpacked_'+'dir\x20*\x20dirL'+'m.w;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20finalRgb\x20'+'=\x20normaliz'+'e(combined'+'_dir)\x20*\x200.'+'5\x20+\x20vec3f('+'0.5);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20finalA\x20='+'\x20max(dirLm'+'.w\x20+\x20dAtte'+'n,\x201.0\x20/\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalRgb,\x20'+'finalA);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20dirLm;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20alpha'+'_min\x20=\x20sel'+'ect(0.0,\x201'+'.0\x20/\x20255.0'+',\x20dAtten\x20>'+'\x200.00001);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20finalA\x20'+'=\x20max(dirL'+'m.w,\x20alpha'+'_min);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(dirL'+'m.rgb,\x20fin'+'alA);\x0a\x20\x20\x20\x20'+'}\x0a',w2='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'uniform.am'+'bientBakeO'+'cclusionCo'+'ntrast\x20+\x201'+'.0,\x200.0))\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20vec3f(u'+'niform.amb'+'ientBakeOc'+'clusionBri'+'ghtness);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'saturate3('+'dDiffuseLi'+'ght);\x0a\x20\x20\x20\x20'+'dDiffuseLi'+'ght\x20=\x20dDif'+'fuseLight\x20'+'*\x20dAmbient'+'Light;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIGHTMAP'+'_RGBM\x0a\x20\x20\x20\x20'+'//\x20encode\x20'+'to\x20RGBM\x0a\x20\x20'+'\x20\x20var\x20temp'+'_color_rgb'+'m\x20=\x20vec4f('+'dDiffuseLi'+'ght,\x201.0);'+'\x0a\x20\x20\x20\x20temp_'+'color_rgbm'+'\x20=\x20vec4f(p'+'ow(temp_co'+'lor_rgbm.r'+'gb,\x20vec3f('+'0.5)),\x20tem'+'p_color_rg'+'bm.a);\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+'color_rgbm'+'.rgb\x20/\x208.0'+',\x20temp_col'+'or_rgbm.a)'+';\x0a\x20\x20\x20\x20let\x20'+'max_g_b\x20=\x20'+'max(temp_c'+'olor_rgbm.'+'g,\x20max(tem'+'p_color_rg'+'bm.b,\x201.0\x20'+'/\x20255.0));'+'\x0a\x20\x20\x20\x20let\x20m'+'ax_rgb\x20=\x20m'+'ax(temp_co'+'lor_rgbm.r'+',\x20max_g_b)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20ceil'+'(temp_colo'+'r_rgbm.a\x20*'+'\x20255.0)\x20/\x20'+'255.0;\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+('color_rgbm'+'.rgb\x20/\x20tem'+'p_color_rg'+'bm.a,\x20temp'+'_color_rgb'+'m.a);\x0a\x20\x20\x20\x20'+'output.col'+'or\x20=\x20temp_'+'color_rgbm'+';\x0a#else\x0a\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20vec'+'4f(dDiffus'+'eLight,\x201.'+'0);\x0a#endif'+'\x0a'),E2='\x0auniform\x20v'+'iew_positi'+'on:\x20vec3f;'+'\x0a\x0auniform\x20'+'light_glob'+'alAmbient:'+'\x20vec3f;\x0a\x0af'+'n\x20square(x'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20x*x'+';\x0a}\x0a\x0afn\x20sa'+'turate(x:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0afn'+'\x20saturate3'+'(x:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3f(0.'+'0),\x20vec3f('+'1.0));\x0a}\x0a',b2='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'Mask:\x20vec2'+'f;\x0avarying'+'\x20vTiledUv:'+'\x20vec2f;\x0a\x0au'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0auni'+'form\x20outer'+'Scale:\x20vec'+'2f;\x0aunifor'+'m\x20atlasRec'+'t:\x20vec4f;\x0a'+'\x0avar<priva'+'te>\x20nineSl'+'icedUv:\x20ve'+'c2f;\x0a',A2='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vMask:\x20v'+'ec2f;\x0avary'+'ing\x20vTiled'+'Uv:\x20vec2f;'+'\x0a\x0auniform\x20'+'innerOffse'+'t:\x20vec4f;\x0a'+'uniform\x20ou'+'terScale:\x20'+'vec2f;\x0auni'+'form\x20atlas'+'Rect:\x20vec4'+'f;\x0a\x0avar<pr'+'ivate>\x20nin'+'eSlicedUv:'+'\x20vec2f;\x0a',C2='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afn\x20bay'+'er2(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(2.0\x20*'+'\x20p.y\x20+\x20p.x'+'\x20+\x201.0)\x20%\x20'+'4.0;\x0a}\x0a\x0a//'+'\x204x4\x20matri'+'x,\x20p\x20-\x20pix'+'el\x20coordin'+'ate\x0afn\x20bay'+'er4(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20p1:\x20vec2f'+'\x20=\x20p\x20%\x20vec'+'2f(2.0);\x0a\x20'+'\x20\x20\x20let\x20p2:'+'\x20vec2f\x20=\x20f'+'loor(0.5\x20*'+'\x20(p\x20%\x20vec2'+'f(4.0)));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afn\x20bayer8'+'(p:\x20vec2f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20p1'+':\x20vec2f\x20=\x20'+'p\x20%\x20vec2f('+'2.0);\x0a\x20\x20\x20\x20'+'let\x20p2:\x20ve'+'c2f\x20=\x20floo'+'r(0.5\x20*\x20(p'+'\x20%\x20vec2f(4'+'.0)));\x0a\x20\x20\x20'+'\x20let\x20p4:\x20v'+'ec2f\x20=\x20flo'+'or(0.25\x20*\x20'+'(p\x20%\x20vec2f'+'(8.0)));\x0a\x20'+'\x20\x20\x20return\x20'+'4.0\x20*\x20(4.0'+'\x20*\x20bayer2('+'p1)\x20+\x20baye'+'r2(p2))\x20+\x20'+'bayer2(p4)'+';\x0a}\x0a',P2='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20sou'+'rce:\x20textu'+'re_2d<f32>'+';\x0avar\x20sour'+'ceSampler:'+'\x20sampler;\x0a'+'\x0a#ifdef\x20GA'+'USS\x0a\x20\x20\x20\x20un'+'iform\x20weig'+'ht:\x20array<'+'f32,\x20{SAMP'+'LES}>;\x0a#en'+'dif\x0aunifor'+'m\x20pixelOff'+'set:\x20vec2f'+';\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20var'+'\x20moments:\x20'+'vec3f\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20let\x20uv'+':\x20vec2f\x20=\x20'+'input.vUv0'+'\x20-\x20uniform'+'.pixelOffs'+'et\x20*\x20(f32('+'{SAMPLES})'+'\x20*\x200.5);\x0a\x0a'+'\x20\x20\x20\x20for\x20(v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20{'+'SAMPLES};\x20'+'i\x20=\x20i\x20+\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20c:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'source,\x20so'+'urceSample'+'r,\x20uv\x20+\x20un'+'iform.pixe'+'lOffset\x20*\x20'+'f32(i));\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20moments'+'\x20=\x20moments'+'\x20+\x20c.xyz\x20*'+'\x20uniform.w'+'eight[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20=\x20moment'+'s\x20+\x20c.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'oments\x20=\x20m'+'oments\x20*\x20('+'1.0\x20/\x20f32('+'{SAMPLES})'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'moments,\x201'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a',M2='\x0auniform\x20m'+'aterial_cl'+'earCoat:\x20f'+'32;\x0a\x0afn\x20ge'+'tClearCoat'+'()\x20{\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20=\x20unifo'+'rm.materia'+'l_clearCoa'+'t;\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_C'+'LEARCOAT_T'+'EXTURE\x0a\x20\x20\x20'+'\x20ccSpecula'+'rity\x20=\x20ccS'+'pecularity'+'\x20*\x20texture'+'SampleBias'+'({STD_CLEA'+'RCOAT_TEXT'+'URE_NAME},'+'\x20{STD_CLEA'+'RCOAT_TEXT'+'URE_NAME}S'+'ampler,\x20{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_CLE'+'ARCOAT_VER'+'TEX\x0a\x20\x20\x20\x20cc'+'Specularit'+'y\x20=\x20ccSpec'+'ularity\x20*\x20'+'saturate(v'+'VertexColo'+'r.{STD_CLE'+'ARCOAT_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a',D2='\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_clearCoa'+'tGloss:\x20f3'+'2;\x0a\x0afn\x20get'+'ClearCoatG'+'lossiness('+')\x20{\x0a\x20\x20\x20\x20cc'+'Glossiness'+'\x20=\x20uniform'+'.material_'+'clearCoatG'+'loss;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE_NAME}'+',\x20{STD_CLE'+'ARCOATGLOS'+'S_TEXTURE_'+'NAME}Sampl'+'er,\x20{STD_C'+'LEARCOATGL'+'OSS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_CLEA'+'RCOATGLOSS'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_INVERT\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20=\x201.0'+'\x20-\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20ccGloss'+'iness\x20+=\x200'+'.0000001;\x0a'+'}\x0a',I2='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_cle'+'arCoatBump'+'iness:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getClea'+'rCoatNorma'+'l()\x20{\x0a#ifd'+'ef\x20STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'\x0a\x20\x20\x20\x20var\x20n'+'ormalMap:\x20'+'vec3f\x20=\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_DEC'+'ODE}(textu'+'reSampleBi'+'as({STD_CL'+'EARCOATNOR'+'MAL_TEXTUR'+'E_NAME},\x20{'+'STD_CLEARC'+'OATNORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias));\x0a\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20mix(v'+'ec3f(0.0,\x20'+'0.0,\x201.0),'+'\x20normalMap'+',\x20uniform.'+'material_c'+'learCoatBu'+'mpiness);\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20norm'+'alize(dTBN'+'\x20*\x20normalM'+'ap);\x0a#else'+'\x0a\x20\x20\x20\x20ccNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a',L2='\x0astruct\x20Fa'+'ceCoords\x20{'+'\x0a\x20\x20\x20\x20uv:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Or'+'iginal\x20ret'+'urn\x20value\x0a'+'\x20\x20\x20\x20faceIn'+'dex:\x20f32,\x20'+'\x20\x20\x20//\x20Was\x20'+'out\x20parame'+'ter\x0a\x20\x20\x20\x20ti'+'leOffset:\x20'+'vec2f,\x20//\x20'+'Was\x20out\x20pa'+'rameter\x0a}\x0a'+'\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0afn\x20getC'+'ubemapFace'+'Coordinate'+'s(dir:\x20vec'+'3f)\x20->\x20Fac'+'eCoords\x20{\x0a'+'\x20\x20\x20\x20var\x20fa'+'ceIndex:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20tileOffs'+'et:\x20vec2f;'+'\x0a\x20\x20\x20\x20var\x20u'+'v:\x20vec2f;\x20'+'//\x20This\x20is'+'\x20the\x20face\x20'+'UV\x20[0..1]\x0a'+'\x20\x20\x20\x20let\x20vA'+'bs:\x20vec3f\x20'+'=\x20abs(dir)'+';\x0a\x20\x20\x20\x20var\x20'+'ma:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20if\x20(vA'+'bs.z\x20>=\x20vA'+'bs.x\x20&&\x20vA'+'bs.z\x20>=\x20vA'+'bs.y)\x20{\x20\x20\x20'+'//\x20front\x20/'+'\x20back\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20i'+'s_neg_z\x20=\x20'+'dir.z\x20<\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20faceIndex'+'\x20=\x20select('+'4.0,\x205.0,\x20'+'is_neg_z);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'a\x20=\x200.5\x20/\x20'+'vAbs.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv\x20='+'\x20vec2f(sel'+'ect(dir.x,'+'\x20-dir.x,\x20i'+'s_neg_z),\x20'+'-dir.y);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20til'+'eOffset\x20=\x20'+'vec2f(2.0,'+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_z));\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(vAbs'+'.y\x20>=\x20vAbs'+'.x)\x20{\x20\x20//\x20'+'top\x20index\x20'+'2,\x20bottom\x20'+'index\x203\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20is_neg_y\x20'+'=\x20dir.y\x20<\x20'+'0.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20selec'+('t(2.0,\x203.0'+',\x20is_neg_y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ma\x20=\x200.5\x20'+'/\x20vAbs.y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20=\x20vec2f(d'+'ir.x,\x20sele'+'ct(dir.z,\x20'+'-dir.z,\x20is'+'_neg_y));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'leOffset\x20='+'\x20vec2f(1.0'+',\x20select(0'+'.0,\x201.0,\x20i'+'s_neg_y));'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20is_'+'neg_x\x20=\x20di'+'r.x\x20<\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'aceIndex\x20='+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_x);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2f(selec'+'t(-dir.z,\x20'+'dir.z,\x20is_'+'neg_x),\x20-d'+'ir.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20tileO'+'ffset\x20=\x20ve'+'c2f(0.0,\x20s'+'elect(0.0,'+'\x201.0,\x20is_n'+'eg_x));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20u'+'v\x20=\x20uv\x20*\x20m'+'a\x20+\x200.5;\x0a\x20'+'\x20\x20\x20return\x20'+'FaceCoords'+'(uv,\x20faceI'+'ndex,\x20tile'+'Offset);\x0a}'+'\x0a\x0a//\x20conve'+'rts\x20unnorm'+'alized\x20dir'+'ection\x20vec'+'tor\x20to\x20a\x20t'+'exture\x20coo'+'rdinate\x20fo'+'r\x20a\x20cubema'+'p\x20face\x20sto'+'red\x20within'+'\x20texture\x20a'+'tlas\x20descr'+'ibed\x20by\x20th'+'e\x20viewport'+'\x0afn\x20getCub'+'emapAtlasC'+'oordinates'+'(omniAtlas'+'Viewport:\x20'+'vec3f,\x20sha'+'dowEdgePix'+'els:\x20f32,\x20'+'shadowText'+'ureResolut'+'ion:\x20f32,\x20'+'dir:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20faceData'+':\x20FaceCoor'+'ds\x20=\x20getCu'+'bemapFaceC'+'oordinates'+'(dir);\x0a\x20\x20\x20'+'\x20var\x20uv:\x20v'+'ec2f\x20=\x20fac'+'eData.uv;\x0a'+'\x20\x20\x20\x20let\x20ti'+'leOffset:\x20'+'vec2f\x20=\x20fa'+'ceData.til'+'eOffset;\x0a\x0a'+'\x20\x20\x20\x20//\x20mov'+'e\x20uv\x20coord'+'inates\x20inw'+'ards\x20insid'+'e\x20to\x20compe'+'nsate\x20for\x20')+('larger\x20fov'+'\x20when\x20rend'+'ering\x20shad'+'ow\x20into\x20at'+'las\x0a\x20\x20\x20\x20le'+'t\x20atlasFac'+'eSize:\x20f32'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20le'+'t\x20tileSize'+':\x20f32\x20=\x20sh'+'adowTextur'+'eResolutio'+'n\x20*\x20atlasF'+'aceSize;\x0a\x20'+'\x20\x20\x20var\x20off'+'set:\x20f32\x20='+'\x20shadowEdg'+'ePixels\x20/\x20'+'tileSize;\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20*\x20(1.0\x20-'+'\x20offset\x20*\x20'+'2.0)\x20+\x20off'+'set;\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20='+'\x20uv\x20*\x20atla'+'sFaceSize;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x20into'+'\x20face\x20of\x20t'+'he\x20atlas\x20('+'3x3\x20grid)\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20+\x20tileOf'+'fset\x20*\x20atl'+'asFaceSize'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'offset\x20int'+'o\x20the\x20atla'+'s\x20viewport'+'\x0a\x20\x20\x20\x20uv\x20=\x20'+'uv\x20+\x20omniA'+'tlasViewpo'+'rt.xy;\x0a\x0a\x20\x20'+'\x20\x20return\x20u'+'v;\x0a}\x0a'),R2='\x0afn\x20_getCo'+'okieCluste'+'red(tex:\x20t'+'exture_2d<'+'f32>,\x20texS'+'ampler:\x20sa'+'mpler,\x20uv:'+'\x20vec2f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20pixel'+':\x20vec4f\x20=\x20'+'mix(vec4f('+'1.0),\x20text'+'ureSampleL'+'evel(tex,\x20'+'texSampler'+',\x20uv,\x200.0)'+',\x20intensit'+'y);\x0a\x20\x20\x20\x20le'+'t\x20isRgb:\x20b'+'ool\x20=\x20dot('+'cookieChan'+'nel.rgb,\x20v'+'ec3f(1.0))'+'\x20==\x203.0;\x0a\x20'+'\x20\x20\x20return\x20'+'select(vec'+'3f(dot(pix'+'el,\x20cookie'+'Channel)),'+'\x20pixel.rgb'+',\x20isRgb);\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0afn'+'\x20getCookie'+'2DClustere'+'d(tex:\x20tex'+'ture_2d<f3'+'2>,\x20texSam'+'pler:\x20samp'+'ler,\x20trans'+'form:\x20mat4'+'x4f,\x20world'+'Position:\x20'+'vec3f,\x20int'+'ensity:\x20f3'+'2,\x20cookieC'+'hannel:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20projPo'+'s:\x20vec4f\x20='+'\x20transform'+'\x20*\x20vec4f(w'+'orldPositi'+'on,\x201.0);\x0a'+'\x20\x20\x20\x20return'+'\x20_getCooki'+'eClustered'+'(tex,\x20texS'+'ampler,\x20pr'+'ojPos.xy\x20/'+'\x20projPos.w'+',\x20intensit'+'y,\x20cookieC'+'hannel);\x0a}'+'\x0a\x0a//\x20getCo'+'okie\x20for\x20c'+'lustered\x20o'+'mni\x20light\x20'+'with\x20the\x20c'+'ookie\x20text'+'ure\x20being\x20'+'stored\x20in\x20'+'the\x20cookie'+'\x20atlas\x0afn\x20'+'getCookieC'+'ubeCluster'+'ed(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20dir:'+'\x20vec3f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f,\x20shad'+'owTextureR'+'esolution:'+'\x20f32,\x20shad'+('owEdgePixe'+'ls:\x20f32,\x20o'+'mniAtlasVi'+'ewport:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20dir);'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getCook'+'ieClustere'+'d(tex,\x20tex'+'Sampler,\x20u'+'v,\x20intensi'+'ty,\x20cookie'+'Channel);\x0a'+'}\x0a'),O2='\x0a\x0afn\x20_getS'+'hadowCoord'+'PerspZbuff'+'er(shadowM'+'atrix:\x20mat'+'4x4f,\x20shad'+'owParams:\x20'+'vec4f,\x20wPo'+'s:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20p'+'rojPos\x20=\x20s'+'hadowMatri'+'x\x20*\x20vec4f('+'wPos,\x201.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20projPos'+'.xyz\x20/\x20pro'+'jPos.w;\x0a\x20\x20'+'\x20\x20//\x20depth'+'\x20bias\x20is\x20a'+'lready\x20app'+'lied\x20on\x20re'+'nder\x0a}\x0a\x0afn'+'\x20getShadow'+'CoordPersp'+'ZbufferNor'+'malOffset('+'shadowMatr'+'ix:\x20mat4x4'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20normal'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20wP'+'os:\x20vec3f\x20'+'=\x20vPositio'+'nW\x20+\x20norma'+'l\x20*\x20shadow'+'Params.y;\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wCoordPers'+'pZbuffer(s'+'hadowMatri'+'x,\x20shadowP'+'arams,\x20wPo'+'s);\x0a}\x0a\x0afn\x20'+'normalOffs'+'etPointSha'+'dow(shadow'+'Params:\x20ve'+'c4f,\x20light'+'Pos:\x20vec3f'+',\x20lightDir'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'normal:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(li'+'ghtDir);\x0a\x20'+'\x20\x20\x20let\x20wPo'+'s:\x20vec3f\x20='+'\x20vPosition'+'W\x20+\x20normal'+'\x20*\x20shadowP'+'arams.y\x20*\x20'+'clamp(1.0\x20'+'-\x20dot(norm'+'al,\x20-light'+'DirNorm),\x20'+'0.0,\x201.0)\x20'+'*\x20distScal'+'e;\x20//0.02\x0a'+'\x20\x20\x20\x20let\x20di'+'r:\x20vec3f\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0a\x20\x20\x20\x20'+'fn\x20getShad'+'owOmniClus'+'teredPCF1('+'shadowMap:'+'\x20texture_d'+'epth_2d,\x20s'+'hadowMapSa'+'mpler:\x20sam'+'pler_compa'+'rison,\x20sha'+'dowParams:'+('\x20vec4f,\x20om'+'niAtlasVie'+'wport:\x20vec'+'3f,\x20shadow'+'EdgePixels'+':\x20f32,\x20lig'+'htDir:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shad'+'owTextureR'+'esolution:'+'\x20f32\x20=\x20sha'+'dowParams.'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+'tureResolu'+'tion,\x20ligh'+'tDir);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowZ:\x20f'+'32\x20=\x20lengt'+'h(lightDir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv,'+'\x20shadowZ);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F3)\x0a\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'wOmniClust'+'eredPCF3(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owParams:\x20'+'vec4f,\x20omn'+'iAtlasView'+'port:\x20vec3'+'f,\x20shadowE'+'dgePixels:'+'\x20f32,\x20ligh'+'tDir:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wTextureRe'+'solution:\x20'+'f32\x20=\x20shad'+'owParams.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20light'+'Dir);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadowZ:\x20f3'+'2\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w\x20+\x20'+'shadowPara'+'ms.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowCoord:'+'\x20vec3f\x20=\x20v'+'ec3f(uv,\x20s'+'hadowZ);\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF3x3('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20}\x0a\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowOmn'+'iClustered'+'PCF5(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20omniAtl'+'asViewport'+':\x20vec3f,\x20s'+'hadowEdgeP'+'ixels:\x20f32'+',\x20lightDir'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadowTex'+'tureResolu'+'tion:\x20f32\x20'+'=\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'uv:\x20vec2f\x20'+'=\x20getCubem'+'apAtlasCoo'+'rdinates(o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20shad'+'owTextureR'+'esolution,'+'\x20lightDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20vec3f'+'(uv,\x20shado'+'wZ);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CF5x5(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'#endif\x0a\x0a//'+'\x20Clustered'+'\x20Spot\x20Samp'+'ling\x20using'+'\x20atlas\x0a\x0a#i'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF1)\x0a\x0a\x20\x20\x20'+'\x20fn\x20getSha'+'dowSpotClu'+'steredPCF1'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu')+('rn\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowCoord.'+'xy,\x20shadow'+'Coord.z);\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0a\x20\x20'+'\x20\x20fn\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'3x3(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF5)\x0a\x0a\x20'+'\x20\x20\x20fn\x20getS'+'hadowSpotC'+'lusteredPC'+'F5(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),F2='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0avar\x20clu'+'sterWorldT'+'exture:\x20te'+'xture_2d<f'+'32>;\x0avar\x20l'+'ightsTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x0a#ifdef\x20C'+'LUSTER_SHA'+'DOWS\x0a\x20\x20\x20\x20/'+'/\x20TODO:\x20wh'+'en\x20VSM\x20sha'+'dow\x20is\x20sup'+'ported,\x20it'+'\x20needs\x20to\x20'+'use\x20sample'+'r2D\x20in\x20web'+'gl2\x0a\x20\x20\x20\x20va'+'r\x20shadowAt'+'lasTexture'+':\x20texture_'+'depth_2d;\x0a'+'\x20\x20\x20\x20var\x20sh'+'adowAtlasT'+'extureSamp'+'ler:\x20sampl'+'er_compari'+'son;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'var\x20cookie'+'AtlasTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20c'+'ookieAtlas'+'TextureSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0auniform'+'\x20clusterMa'+'xCells:\x20i3'+'2;\x0a\x0a//\x201.0'+'\x20if\x20cluste'+'red\x20lighti'+'ng\x20can\x20be\x20'+'skipped\x20(0'+'\x20lights\x20in'+'\x20the\x20clust'+'ers)\x0aunifo'+'rm\x20cluster'+'Skip:\x20f32;'+'\x0a\x0auniform\x20'+'clusterCel'+'lsCountByB'+'oundsSize:'+'\x20vec3f;\x0aun'+'iform\x20clus'+'terTexture'+'Size:\x20vec3'+'f;\x0auniform'+'\x20clusterBo'+'undsMin:\x20v'+'ec3f;\x0aunif'+'orm\x20cluste'+'rBoundsDel'+'ta:\x20vec3f;'+'\x0auniform\x20c'+'lusterCell'+'sDot:\x20vec3'+'f;\x0auniform'+'\x20clusterCe'+'llsMax:\x20ve'+('c3f;\x0aunifo'+'rm\x20shadowA'+'tlasParams'+':\x20vec2f;\x0a\x0a'+'//\x20structu'+'re\x20storing'+'\x20light\x20pro'+'perties\x20of'+'\x20a\x20cluster'+'ed\x20light\x0a/'+'/\x20it\x27s\x20sor'+'ted\x20to\x20hav'+'e\x20all\x20vect'+'ors\x20aligne'+'d\x20to\x204\x20flo'+'ats\x20to\x20lim'+'it\x20padding'+'\x0astruct\x20Cl'+'usterLight'+'Data\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x2032bit'+'\x20of\x20flags\x0a'+'\x20\x20\x20\x20flags:'+'\x20u32,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfWidth:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20isSpot:\x20'+'bool,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfHeight:'+'\x20vec3f,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20index\x0a\x20\x20'+'\x20\x20lightInd'+'ex:\x20i32,\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x0a\x20\x20'+'\x20\x20position'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sh'+'ape\x0a\x20\x20\x20\x20sh'+'ape:\x20u32,\x0a'+'\x0a\x20\x20\x20\x20//\x20wo'+'rld\x20space\x20'+'direction\x20'+'(spot\x20ligh'+'t\x20only)\x0a\x20\x20'+'\x20\x20directio'+'n:\x20vec3f,\x0a'+'\x0a\x20\x20\x20\x20//\x20li'+'ght\x20follow'+'\x20mode\x0a\x20\x20\x20\x20'+'falloffMod'+'eLinear:\x20b'+'ool,\x0a\x0a\x20\x20\x20\x20'+'//\x20color\x0a\x20'+'\x20\x20\x20color:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20//\x200.0\x20i'+'f\x20the\x20ligh'+'t\x20doesn\x27t\x20'+'cast\x20shado'+'ws\x0a\x20\x20\x20\x20sha'+'dowIntensi'+'ty:\x20f32,\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20omniAtl'+'asViewport'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20of\x20the\x20'+'light\x0a\x20\x20\x20\x20'+'range:\x20f32'+',\x0a\x0a\x20\x20\x20\x20//\x20'+'channel\x20ma'+'sk\x20-\x20one\x20o'+'f\x20the\x20chan'+'nels\x20has\x201'+',\x20the\x20othe')+('rs\x20are\x200\x0a\x20'+'\x20\x20\x20cookieC'+'hannelMask'+':\x20vec4f,\x0a\x0a'+'\x20\x20\x20\x20//\x20com'+'pressed\x20bi'+'ases,\x20two\x20'+'haf-floats'+'\x20stored\x20in'+'\x20a\x20float\x0a\x20'+'\x20\x20\x20biasesD'+'ata:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20bias\x20'+'values\x0a\x20\x20\x20'+'\x20shadowBia'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20shadowNo'+'rmalBias:\x20'+'f32,\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20a'+'nglesData:'+'\x20f32,\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20inner'+'\x20and\x20outer'+'\x20angle\x20cos'+'ine\x0a\x20\x20\x20\x20in'+'nerConeAng'+'leCos:\x20f32'+',\x0a\x20\x20\x20\x20oute'+'rConeAngle'+'Cos:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'tensity\x20of'+'\x20the\x20cooki'+'e\x0a\x20\x20\x20\x20cook'+'ieIntensit'+'y:\x20f32,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20mask\x0a\x20\x20\x20'+'\x20//float\x20m'+'ask;\x0a\x20\x20\x20\x20i'+'sDynamic:\x20'+'bool,\x0a\x20\x20\x20\x20'+'isLightmap'+'ped:\x20bool\x0a'+'}\x0a\x0a//\x20Note'+':\x20on\x20some\x20'+'devices\x20(t'+'ested\x20on\x20P'+'ixel\x203A\x20XL'+'),\x20this\x20ma'+'trix\x20when\x20'+'stored\x20ins'+'ide\x20the\x20li'+'ght\x20struct'+'\x20has\x20lower'+'\x20precision'+'\x20compared\x20'+'to\x0a//\x20when'+'\x20stored\x20ou'+'tside,\x20so\x20'+'we\x20store\x20i'+'t\x20outside\x20'+'to\x20avoid\x20s'+'pot\x20shadow'+'\x20flickerin'+'g.\x20This\x20mi'+'ght\x20need\x20t'+'o\x20be\x20done\x20'+'to\x20other\x20/'+'\x20all\x20membe'+'rs\x0a//\x20of\x20t'+'he\x20structu'+'re\x20if\x20furt'+'her\x20simila'+'r\x20issues\x20a'+'re\x20observe'+'d.\x0a\x0a//\x20sha'+'dow\x20(spot\x20'+'light\x20only'+')\x20/\x20cookie'+'\x20projectio'+'n\x20matrix\x0av'+'ar<private'+'>\x20lightPro'+'jectionMat'+'rix:\x20mat4x'+'4f;\x0a\x0afn\x20sa'+'mpleLightT'+'extureF(li'+'ghtIndex:\x20'+'i32,\x20index'+':\x20i32)\x20->\x20')+('vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20t'+'extureLoad'+'(lightsTex'+'ture,\x20vec2'+'<i32>(inde'+'x,\x20lightIn'+'dex),\x200);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightCore(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>,\x20'+'lightIndex'+':\x20f32)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20lig'+'ht\x20index\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'lightIndex'+'\x20=\x20i32(lig'+'htIndex);\x0a'+'\x0a\x20\x20\x20\x20//\x20sa'+'mple\x20data\x20'+'encoding\x20h'+'alf-float\x20'+'values\x20int'+'o\x2032bit\x20ui'+'nts\x0a\x20\x20\x20\x20le'+'t\x20halfData'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_COLO'+'R_ANGLES_B'+'IAS});\x0a\x0a\x20\x20'+'\x20\x20//\x20store'+'\x20floats\x20we'+'\x20decode\x20la'+'ter\x20as\x20nee'+'ded\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.angle'+'sData\x20=\x20ha'+'lfData.z;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.biasesDat'+'a\x20=\x20halfDa'+'ta.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20decomp'+'ress\x20color'+'\x20half-floa'+'ts\x0a\x20\x20\x20\x20let'+'\x20colorRG:\x20'+'vec2f\x20=\x20un'+'pack2x16fl'+'oat(bitcas'+'t<u32>(hal'+'fData.x));'+'\x0a\x20\x20\x20\x20let\x20c'+'olorB_:\x20ve'+'c2f\x20=\x20unpa'+'ck2x16floa'+'t(bitcast<'+'u32>(halfD'+'ata.y));\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'color\x20=\x20ve'+'c3f(colorR'+'G,\x20colorB_'+'.x)\x20*\x20{LIG'+'HT_COLOR_D'+'IVIDER};\x0a\x0a'+'\x20\x20\x20\x20//\x20pos'+'ition\x20and\x20'+'range,\x20ful'+'l\x20floats\x0a\x20'+'\x20\x20\x20let\x20lig'+'htPosRange'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_POSI'+'TION_RANGE'+'});\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.posit')+('ion\x20=\x20ligh'+'tPosRange.'+'xyz;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.rang'+'e\x20=\x20lightP'+'osRange.w;'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'pot\x20direct'+'ion\x20&\x20flag'+'s\x20data\x0a\x20\x20\x20'+'\x20let\x20light'+'Dir_Flags:'+'\x20vec4f\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData.ligh'+'tIndex,\x20{C'+'LUSTER_TEX'+'TURE_DIREC'+'TION_FLAGS'+'});\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20directi'+'on\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.direct'+'ion\x20=\x20ligh'+'tDir_Flags'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x2032bit\x20'+'flags\x0a\x20\x20\x20\x20'+'let\x20flags_'+'uint:\x20u32\x20'+'=\x20bitcast<'+'u32>(light'+'Dir_Flags.'+'w);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20flags_u'+'int;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.isSp'+'ot\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2030u)'+')\x20!=\x200u;\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'shape\x20=\x20(f'+'lags_uint\x20'+'>>\x2028u)\x20&\x20'+'0x3u;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.fal'+'loffModeLi'+'near\x20=\x20(fl'+'ags_uint\x20&'+'\x20(1u\x20<<\x2027'+'u))\x20==\x200u;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.shadowIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x200'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.cookieIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x208'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.isDynami'+'c\x20=\x20(flags'+'_uint\x20&\x20(1'+'u\x20<<\x2022u))'+'\x20!=\x200u;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sLightmapp'+'ed\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2021u)'+')\x20!=\x200u;\x0a}'+'\x0a\x0afn\x20decod'+'eClusterLi'+'ghtSpot(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{')+('\x0a\x20\x20\x20\x20//\x20sp'+'ot\x20light\x20c'+'os\x20angles\x0a'+'\x20\x20\x20\x20let\x20an'+'gles:\x20vec2'+'f\x20=\x20unpack'+'2x16float('+'bitcast<u3'+'2>(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'OmniAtlasV'+'iewport(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.omniAtla'+'sViewport\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData.l'+'ightIndex,'+'\x20{CLUSTER_'+'TEXTURE_PR'+'OJ_MAT_0})'+'.xyz;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'AreaData(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>)\x20'+'{\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.halfWid'+'th\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a.lightInd'+'ex,\x20{CLUST'+'ER_TEXTURE'+'_AREA_DATA'+'_WIDTH}).x'+'yz;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.halfH'+'eight\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data.light'+'Index,\x20{CL'+'USTER_TEXT'+'URE_AREA_D'+'ATA_HEIGHT'+'}).xyz;\x0a}\x0a'+'\x0afn\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(cluster'+'LightData:'+'\x20ptr<funct'+'ion,\x20Clust'+'erLightDat'+'a>)\x20{\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'matrix\x0a\x20\x20\x20'+'\x20let\x20m0:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_0});\x0a\x20\x20\x20'+'\x20let\x20m1:\x20v')+('ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_1});\x0a\x20\x20\x20'+'\x20let\x20m2:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_2});\x0a\x20\x20\x20'+'\x20let\x20m3:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4x'+'4f(m0,\x20m1,'+'\x20m2,\x20m3);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightShadow'+'Data(clust'+'erLightDat'+'a:\x20ptr<fun'+'ction,\x20Clu'+'sterLightD'+'ata>)\x20{\x0a\x20\x20'+'\x20\x20//\x20shado'+'w\x20biases\x0a\x20'+'\x20\x20\x20let\x20bia'+'ses:\x20vec2f'+'\x20=\x20unpack2'+'x16float(b'+'itcast<u32'+'>(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'fn\x20decodeC'+'lusterLigh'+'tCookieDat'+'a(clusterL'+'ightData:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20extract'+'\x20channel\x20m'+'ask\x20from\x20f'+'lags\x0a\x20\x20\x20\x20l'+'et\x20cookieF'+'lags:\x20u32\x20'+'=\x20(cluster'+'LightData.'+'flags\x20>>\x202'+'3u)\x20&\x200x0F'+'u;\x20\x20//\x204bi'+'ts,\x20each\x20b'+'it\x20enables'+'\x20a\x20channel'+'\x0a\x20\x20\x20\x20let\x20m'+'ask_uvec:\x20'+'vec4<u32>\x20'+'=\x20vec4<u32'+'>(cookieFl'+'ags)\x20&\x20vec'+'4<u32>(1u,'+'\x202u,\x204u,\x208'+'u);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eChannelMa'+'sk\x20=\x20step('+'vec4f(1.0)')+(',\x20vec4f(ma'+'sk_uvec));'+'\x20//\x20Normal'+'ize\x20to\x200.0'+'\x20or\x201.0\x0a}\x0a'+'\x0afn\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20light:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>,\x0a\x20\x20\x20\x20wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20reflectio'+'nDir:\x20vec3'+'f,\x0a#if\x20def'+'ined(LIT_C'+'LEARCOAT)\x0a'+'\x20\x20\x20\x20clearc'+'oatReflect'+'ionDir:\x20ve'+'c3f,\x0a#endi'+'f\x0a\x20\x20\x20\x20glos'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20specular'+'ity:\x20vec3f'+',\x0a\x20\x20\x20\x20geom'+'etricNorma'+'l:\x20vec3f,\x0a'+'\x20\x20\x20\x20tbn:\x20m'+'at3x3f,\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a#e'+'ndif\x0a\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20clearco'+'at_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20s'+'heen_gloss'+':\x20f32,\x0a\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty:\x20f32\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ve'+'c3f(1.0);\x0a'+'\x20\x20\x20\x20var\x20di'+'ffuseAtten'+'uation:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20var\x20fal'+'loffAttenu'+'ation:\x20f32'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20omni\x20'+'part\x20of\x20th'+'e\x20light\x0a\x20\x20'+'\x20\x20let\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(l'+'ight.posit'+'ion);\x0a\x20\x20\x20\x20'+'let\x20lightD'+'irNormW:\x20v'+'ec3f\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20')+('handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20=\x20g'+'etFalloffL'+'inear(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'falloffAtt'+'enuation\x20='+'\x20getFallof'+'fInvSquare'+'d(light.ra'+'nge,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20if'+'\x20(falloffA'+'ttenuation'+'\x20>\x200.00001'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_AR'+'EALIGHTS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20!=\x20{LI'+'GHTSHAPE_P'+'UNCTUAL})\x20'+'{\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20handle\x20l'+'ight\x20shape'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20='+'=\x20{LIGHTSH'+'APE_RECT})'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getRectLig'+'htDiffuse('+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'W,\x20lightDi'+'rNormW)\x20*\x20'+'16.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20diffuseAt'+'tenuation\x20'+'=\x20getDiskL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x20{\x20/'+'/\x20sphere\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getS'+'phereLight'+'Diffuse(wo'+'rldNormal,'+'\x20viewDir,\x20'+'lightDirW,'+'\x20lightDirN'+'ormW)\x20*\x2016'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNormW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.is'+'Spot)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'decodeClus'+'terLightSp'+'ot(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getSp'+'otEffect(l'+'ight.direc'+'tion,\x20ligh'+'t.innerCon'+'eAngleCos,'+'\x20light.out'+'erConeAngl'+'eCos,\x20ligh'+'tDirNormW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(CLUSTER'+'_COOKIES)\x20'+'||\x20defined'+'(CLUSTER_S'+'HADOWS)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(falloffAt'+'tenuation\x20'+'>\x200.00001)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'hadow\x20/\x20co')+('okie\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'dowIntensi'+'ty\x20>\x200.0\x20|'+'|\x20light.co'+'okieIntens'+'ity\x20>\x200.0)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20shared\x20'+'shadow\x20/\x20c'+'ookie\x20data'+'\x20depends\x20o'+'n\x20light\x20ty'+'pe\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.i'+'sSpot)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ecodeClust'+'erLightPro'+'jectionMat'+'rixData(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20decodeClu'+'sterLightO'+'mniAtlasVi'+'ewport(lig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'TextureRes'+'olution:\x20f'+'32\x20=\x20unifo'+'rm.shadowA'+'tlasParams'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'EdgePixels'+':\x20f32\x20=\x20un'+'iform.shad'+'owAtlasPar'+'ams.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_C'+'OOKIES\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'cookieInte'+'nsity\x20>\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(light)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'!!!!!!!!!!'+'!\x20TEXTURE_'+'PASS\x20likel'+'y\x20needs\x20sa'+'mpler.\x20Ass'+'uming\x20cook'+'ieAtlasTex'+'tureSample'+'r\x20exists.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20cookie'+'Attenuatio'+'n\x20=\x20getCoo'+'kie2DClust'+'ered(cooki'+'eAtlasText'+'ure,\x20cooki'+'eAtlasText'+'ureSampler'+',\x20lightPro'+'jectionMat'+'rix,\x20vPosi'+'tionW,\x20lig')+('ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20!!!!!!!!'+'!!!\x20TEXTUR'+'E_PASS\x20lik'+'ely\x20needs\x20'+'sampler.\x20A'+'ssuming\x20co'+'okieAtlasT'+'extureSamp'+'ler\x20exists'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cook'+'ieAttenuat'+'ion\x20=\x20getC'+'ookieCubeC'+'lustered(c'+'ookieAtlas'+'Texture,\x20c'+'ookieAtlas'+'TextureSam'+'pler,\x20ligh'+'tDirW,\x20lig'+'ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask,\x20shado'+'wTextureRe'+'solution,\x20'+'shadowEdge'+'Pixels,\x20li'+'ght.omniAt'+'lasViewpor'+'t);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20CLUSTER_'+'SHADOWS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'adow\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(light'+'.shadowInt'+'ensity\x20>\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightShadow'+'Data(light'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowParams'+':\x20vec4f\x20=\x20'+'vec4f(shad'+'owTextureR'+'esolution,'+'\x20light.sha'+'dowNormalB'+'ias,\x20light'+'.shadowBia'+'s,\x201.0\x20/\x20l'+'ight.range'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot\x20sha'+'dow\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20shadowCo'+'ord:\x20vec3f'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat')+('rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20!!!!!'+'!!!!!!\x20SHA'+'DOWMAP_PAS'+'S\x20needs\x20te'+'xture\x20and\x20'+'sampler_co'+'mparison.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20!!!'+'!!!!!!!!\x20S'+'hadow\x20func'+'tions\x20need'+'\x20update\x20fo'+'r\x20WGSL\x20tex'+'tureSample'+'Compare\x20et'+'c.\x20Assumin'+'g\x20these\x20ar'+'e\x20handled\x20'+'in\x20include'+'s.\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'SpotCluste'+'redPCF1(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadow:\x20f32'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF3('+'shadowAtla'+'sTexture,\x20'+'shadowAtla'+'sTextureSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadow:\x20f'+'32\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'5(shadowAt'+'lasTexture'+',\x20shadowAt'+'lasTexture'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCSS)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l')+('et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CSS(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20fallo'+'ffAttenuat'+'ion\x20*\x20mix('+'1.0,\x20shado'+'w,\x20light.s'+'hadowInten'+'sity);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20omni\x20'+'shadow\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalOffset'+'PointShado'+'w(shadowPa'+'rams,\x20ligh'+'t.position'+',\x20lightDir'+'W,\x20lightDi'+'rNormW,\x20ge'+'ometricNor'+'mal);\x20\x20//\x20'+'normalBias'+'\x20adjusted\x20'+'for\x20distan'+'ce\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20!!!!!!!!!'+'!!\x20SHADOWM'+'AP_PASS\x20ne'+'eds\x20textur'+'e\x20and\x20samp'+'ler_compar'+'ison.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20!!!!!!!'+'!!!!\x20Shado'+'w\x20function'+'s\x20need\x20upd'+'ate\x20for\x20WG'+'SL\x20texture'+'SampleComp'+'are\x20etc.\x20A'+'ssuming\x20th'+'ese\x20are\x20ha'+'ndled\x20in\x20i'+'ncludes.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCF1)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowOmni'+'ClusteredP'+'CF1(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowPar'+'ams,\x20light'+'.omniAtlas'+'Viewport,\x20'+'shadowEdge'+'Pixels,\x20di'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20getSha'+'dowOmniClu'+'steredPCF3'+'(shadowAtl'+'asTexture,'+'\x20shadowAtl'+'asTextureS'+'ampler,\x20sh'+'adowParams'+',\x20light.om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'OmniCluste'+'redPCF5(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20areaDif'+'fuse:\x20vec3'+'f\x20=\x20(diffu'+'seAttenuat'+'ion\x20*\x20fall'+'offAttenua'+'tion)\x20*\x20li')+('ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaDi'+'ffuse\x20=\x20mi'+'x(areaDiff'+'use,\x20vec3f'+'(0.0),\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20diff'+'use\x20-\x20it\x20d'+'oes\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20areaDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20areaL'+'ightSpecul'+'ar:\x20f32;\x20/'+'/\x20Use\x20var\x20'+'because\x20as'+'signed\x20in\x20'+'if/else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_RECT'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getRe'+'ctLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20if\x20(ligh'+'t.shape\x20=='+'\x20{LIGHTSHA'+'PE_DISK})\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecular\x20'+'=\x20getDiskL'+'ightSpecul'+'ar(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x20//\x20sphere'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20areaLight'+'Specular\x20='+'\x20getSphere'+'LightSpecu')+('lar(worldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20dLTC'+'SpecFres\x20*'+'\x20areaLight'+'Specular\x20*'+'\x20falloffAt'+'tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sp'+'ecular\x20cle'+'ar\x20coat\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20areaLigh'+'tSpecularC'+'C:\x20f32;\x20//'+'\x20Use\x20var\x20b'+'ecause\x20ass'+'igned\x20in\x20i'+'f/else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20==\x20{LI'+'GHTSHAPE_R'+'ECT})\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecularC'+'C\x20=\x20getRec'+'tLightSpec'+'ular(clear'+'coat_world'+'Normal,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecularCC\x20='+'\x20getDiskLi'+'ghtSpecula'+'r(clearcoa'+'t_worldNor'+'mal,\x20viewD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20{\x20//\x20sph'+'ere\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getSphereL'+'ightSpecul'+'ar(clearco'+'at_worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'cSpecularL'+'ight\x20=\x20ccS'+'pecularLig'+'ht\x20+\x20ccLTC'+'SpecFres\x20*'+'\x20areaLight'+'SpecularCC'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20\x20*\x20c'+'ookieAtten')+('uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20punctual'+'\x20light\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20p'+'unctualDif'+'fuse:\x20vec3'+'f\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_AREAL'+'IGHTS)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'unctualDif'+'fuse\x20=\x20mix'+'(punctualD'+'iffuse,\x20ve'+'c3f(0.0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20=\x20dDiffus'+'eLight\x20+\x20p'+'unctualDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Dir:\x20vec3f'+'\x20=\x20normali'+'ze(-lightD'+'irNormW\x20+\x20'+'viewDir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specular\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR_FRESN'+'EL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20=\x20'+'dSpecularL'+'ight\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD')+('ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20halfD'+'ir),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecularity\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'=\x20ccSpecul'+'arLight\x20+\x20'+'getLightSp'+'ecular(hal'+'fDir,\x20clea'+'rcoatRefle'+'ctionDir,\x20'+'clearcoat_'+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'NormW,\x20cle'+'arcoat_glo'+'ss,\x20tbn)\x20*'+'\x20falloffAt')+('tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion\x20*\x20getF'+'resnelCC(d'+'ot(viewDir'+',\x20halfDir)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20='+'\x20ccSpecula'+'rLight\x20+\x20g'+'etLightSpe'+'cular(half'+'Dir,\x20clear'+'coatReflec'+'tionDir,\x20c'+'learcoat_w'+'orldNormal'+',\x20viewDir,'+'\x20lightDirN'+'ormW,\x20clea'+'rcoat_glos'+'s,\x20tbn)\x20*\x20'+'falloffAtt'+'enuation\x20*'+'\x20light.col'+'or\x20*\x20cooki'+'eAttenuati'+'on;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'+\x20getLight'+'SpecularSh'+'een(halfDi'+'r,\x20worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'sheen_glos'+'s)\x20*\x20fallo'+'ffAttenuat'+'ion\x20*\x20ligh'+'t.color\x20*\x20'+'cookieAtte'+'nuation;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20Writ'+'e\x20to\x20globa'+'l\x20attenuat'+'ion\x20values'+'\x20(for\x20ligh'+'tmapper)\x0a\x20'+'\x20\x20\x20dAtten\x20'+'=\x20falloffA'+'ttenuation'+';\x0a\x20\x20\x20\x20dLig'+'htDirNormW'+'\x20=\x20lightDi'+'rNormW;\x0a}\x0a'+'\x0a\x0afn\x20evalu'+'ateCluster'+'Light(\x0a\x20\x20\x20'+'\x20lightInde'+'x:\x20f32,\x0a\x20\x20'+'\x20\x20worldNor'+'mal:\x20vec3f'+',\x0a\x20\x20\x20\x20view'+'Dir:\x20vec3f'+',\x0a\x20\x20\x20\x20refl'+'ectionDir:'+'\x20vec3f,\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20c'+'learcoatRe'+'flectionDi'+'r:\x20vec3f,\x0a'+'#endif\x0a\x20\x20\x20')+('\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20geometric'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20t'+'bn:\x20mat3x3'+'f,\x0a#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20clearc'+'oat_worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20cl'+'earcoat_gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20sheen_'+'gloss:\x20f32'+',\x0a\x20\x20\x20\x20irid'+'escence_in'+'tensity:\x20f'+'32\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20decod'+'e\x20core\x20lig'+'ht\x20data\x20fr'+'om\x20texture'+'s\x0a\x20\x20\x20\x20var\x20'+'clusterLig'+'htData:\x20Cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(&cluste'+'rLightData'+',\x20lightInd'+'ex);\x0a\x0a\x20\x20\x20\x20'+'//\x20evaluat'+'e\x20light\x20if'+'\x20it\x20uses\x20a'+'ccepted\x20li'+'ght\x20mask\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'acceptLigh'+'tMask:\x20boo'+'l\x20=\x20cluste'+'rLightData'+'.isDynamic'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20accept'+'LightMask:'+'\x20bool\x20=\x20cl'+'usterLight'+'Data.isLig'+'htmapped;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'acceptLigh'+'tMask)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20eva'+'luateLight'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20&clust'+'erLightDat'+'a,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'viewDir,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20reflectio'+'nDir,\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20geometri'+'cNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20tbn,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE')+('NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_worl'+'dNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'sheen_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a\x0a\x0afn'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20world'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20v'+'iewDir:\x20ve'+'c3f,\x0a\x20\x20\x20\x20r'+'eflectionD'+'ir:\x20vec3f,'+'\x0a#if\x20defin'+'ed(LIT_CLE'+'ARCOAT)\x0a\x20\x20'+'\x20\x20clearcoa'+'tReflectio'+'nDir:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'specularit'+'y:\x20vec3f,\x0a'+'\x20\x20\x20\x20geomet'+'ricNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20tbn:\x20mat'+'3x3f,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a#end'+'if\x0a\x20\x20\x20\x20cle'+'arcoat_wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20clearcoat'+'_gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20she'+'en_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20i'+'ridescence'+'_intensity'+':\x20f32\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20sk'+'ip\x20lights\x20'+'if\x20no\x20ligh'+'ts\x20at\x20all\x0a'+'\x20\x20\x20\x20if\x20(un'+'iform.clus'+'terSkip\x20>\x20'+'0.5)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x20to'+'\x203d\x20intege'+'r\x20cell\x20cor'+'dinates\x20in'+'\x20the\x20clust'+'er\x20structu'+'re\x0a\x20\x20\x20\x20let'+'\x20cellCoord'+'s:\x20vec3f\x20='+'\x20floor((vP'+'ositionW\x20-'+'\x20uniform.c'+'lusterBoun'+'dsMin)\x20*\x20u'+'niform.clu'+'sterCellsC'+'ountByBoun'+'dsSize);\x0a\x0a'+'\x20\x20\x20\x20//\x20no\x20'+'lighting\x20w'+'hen\x20cell\x20c'+'oordinate\x20'+'is\x20out\x20of\x20'+'range\x0a\x20\x20\x20\x20'+'if\x20(!(any('+'cellCoords')+('\x20<\x20vec3f(0'+'.0))\x20||\x20an'+'y(cellCoor'+'ds\x20>=\x20unif'+'orm.cluste'+'rCellsMax)'+'))\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cel'+'l\x20index\x20(m'+'apping\x20fro'+'m\x203d\x20cell\x20'+'coordinate'+'s\x20to\x20linea'+'r\x20memory)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20cellInde'+'x:\x20f32\x20=\x20d'+'ot(uniform'+'.clusterCe'+'llsDot,\x20ce'+'llCoords);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20convert'+'\x20cell\x20inde'+'x\x20to\x20uv\x20co'+'ordinates\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20clusterV'+':\x20f32\x20=\x20fl'+'oor(cellIn'+'dex\x20*\x20unif'+'orm.cluste'+'rTextureSi'+'ze.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20c'+'lusterU:\x20f'+'32\x20=\x20cellI'+'ndex\x20-\x20(cl'+'usterV\x20*\x20u'+'niform.clu'+'sterTextur'+'eSize.x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20loop\x20ove'+'r\x20maximum\x20'+'number\x20of\x20'+'light\x20cell'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'for\x20(var\x20l'+'ightCellIn'+'dex:\x20i32\x20='+'\x200;\x20lightC'+'ellIndex\x20<'+'\x20uniform.c'+'lusterMaxC'+'ells;\x20ligh'+'tCellIndex'+'\x20=\x20lightCe'+'llIndex\x20+\x20'+'1)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20using\x20a\x20s'+'ingle\x20chan'+'nel\x20textur'+'e\x20with\x20dat'+'a\x20in\x20red\x20c'+'hannel\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20lightIn'+'dexPacked:'+'\x20f32\x20=\x20tex'+'tureLoad(c'+'lusterWorl'+'dTexture,\x20'+'vec2<i32>('+'i32(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20i32(clus'+'terV)),\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(lightInde'+'xPacked\x20<='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20break;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ev'+'aluateClus'+'terLight(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tIndexPack'+'ed\x20*\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20vie'+'wDir,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'eometricNo'+'rmal,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20tbn,\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coat_world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20clearc'+'oat_gloss,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20she'+'en_gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a}'),N2='\x0afn\x20combin'+'eColor(alb'+'edo:\x20vec3f'+',\x20sheenSpe'+'cularity:\x20'+'vec3f,\x20cle'+'arcoatSpec'+'ularity:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20ret:\x20ve'+'c3f\x20=\x20vec3'+'f(0.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ret\x20=\x20'+'ret\x20+\x20((dD'+'iffuseLigh'+'t\x20-\x20unifor'+'m.light_gl'+'obalAmbien'+'t)\x20*\x20albed'+'o\x20+\x20unifor'+'m.material'+'_ambient\x20*'+'\x20uniform.l'+'ight_globa'+'lAmbient);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(albedo\x20*'+'\x20dDiffuseL'+'ight);\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_OLD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20dSpecular'+'Light;\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(dReflect'+'ion.rgb\x20*\x20'+'dReflectio'+'n.a);\x0a\x20\x20\x20\x20'+'#endif\x20//\x20'+'LIT_REFLEC'+'TIONS\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'sheenScali'+'ng:\x20f32\x20=\x20'+'1.0\x20-\x20max('+'max(sheenS'+'pecularity'+'.r,\x20sheenS'+'pecularity'+'.g),\x20sheen'+'Specularit'+'y.b)\x20*\x200.1'+'57;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20sheenS'+'caling\x20+\x20('+'sSpecularL'+'ight\x20+\x20sRe'+'flection.r'+'gb)\x20*\x20shee'+'nSpeculari'+'ty;\x0a\x20\x20\x20\x20#e'+'ndif\x20//\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20clear'+'CoatScalin'+'g:\x20f32\x20=\x201'+'.0\x20-\x20ccFre'+'snel\x20*\x20cle'+'arcoatSpec'+'ularity;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'\x20=\x20ret\x20*\x20c'+'learCoatSc'+'aling\x20+\x20(c'+'cSpecularL'+'ight\x20+\x20ccR'+'eflection)'+('\x20*\x20clearco'+'atSpecular'+'ity;\x0a\x20\x20\x20\x20#'+'endif\x20//\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20re'+'turn\x20ret;\x0a'+'}\x0a'),k2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x0a\x20\x20\x20\x20'+'var\x20blitTe'+'xture:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20blitText'+'ureSampler'+'\x20:\x20sampler'+';\x0a\x0a\x20\x20\x20\x20@fr'+'agment\x0a\x20\x20\x20'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20t'+'extureSamp'+'le(blitTex'+'ture,\x20blit'+'TextureSam'+'pler,\x20inpu'+'t.uv0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20}\x0a',U2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20u'+'niform\x20inv'+'ViewProj:\x20'+'mat4x4<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'re:\x20textur'+'e_cube<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'reSampler\x20'+':\x20sampler;'+'\x0a\x0a\x20\x20\x20\x20@fra'+'gment\x0a\x20\x20\x20\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20pro'+'jPos\x20=\x20vec'+'4f(input.u'+'v0\x20*\x202.0\x20-'+'\x201.0,\x200.5,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20w'+'orldPos\x20=\x20'+'uniform.in'+'vViewProj\x20'+'*\x20projPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20textur'+'eSample(bl'+'itTexture,'+'\x20blitTextu'+'reSampler,'+'\x20worldPos.'+'xyz);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20}\x0a',B2='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.uv0.y'+'\x20=\x201.0\x20-\x20o'+'utput.uv0.'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',z2='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMin:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMax:\x20v'+'ec3f;\x0a#end'+'if\x0a\x0afn\x20cub'+'eMapProjec'+'t(nrdir:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20cubeMapR'+'otate(nrdi'+'r);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIT_CU'+'BEMAP_PROJ'+'ECTION\x20==\x20'+'BOX\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20nrd'+'ir_rotated'+':\x20vec3f\x20=\x20'+'cubeMapRot'+'ate(nrdir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20rbmax'+':\x20vec3f\x20=\x20'+'(uniform.e'+'nvBoxMax\x20-'+'\x20vPosition'+'W)\x20/\x20nrdir'+'_rotated;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20rbmin:\x20v'+'ec3f\x20=\x20(un'+'iform.envB'+'oxMin\x20-\x20vP'+'ositionW)\x20'+'/\x20nrdir_ro'+'tated;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'rbminmax:\x20'+'vec3f\x20=\x20se'+'lect(rbmin'+',\x20rbmax,\x20n'+'rdir_rotat'+'ed\x20>\x20vec3f'+'(0.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'fa:\x20f32\x20=\x20'+'min(min(rb'+'minmax.x,\x20'+'rbminmax.y'+'),\x20rbminma'+'x.z);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20p'+'osonbox:\x20v'+'ec3f\x20=\x20vPo'+'sitionW\x20+\x20'+'nrdir_rota'+'ted\x20*\x20fa;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20envBoxPo'+'s:\x20vec3f\x20='+'\x20(uniform.'+'envBoxMin\x20'+'+\x20uniform.'+'envBoxMax)'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20normali'+'ze(posonbo'+'x\x20-\x20envBox'+'Pos);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',V2='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20cubeMap'+'RotationMa'+'trix:\x20mat3'+'x3f;\x0a#endi'+'f\x0a\x0afn\x20cube'+'MapRotate('+'refDir:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a#ifd'+'ef\x20CUBEMAP'+'_ROTATION\x0a'+'\x20\x20\x20\x20return'+'\x20refDir\x20*\x20'+'uniform.cu'+'beMapRotat'+'ionMatrix;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir;\x0a#end'+'if\x0a}\x0a',G2='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0aoutp'+'ut.color\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0aoutput.co'+'lor\x20=\x20vec4'+'f(litArgs_'+'albedo\x20,\x201'+'.0);\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'DEBUG_WORL'+'D_NORMAL_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(litAr'+'gs_worldNo'+'rmal\x20*\x200.5'+'\x20+\x200.5,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_OPACI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_opacity'+')\x20,\x201.0);\x0a'+'#endif\x0a\x0a#i'+'fdef\x20DEBUG'+'_SPECULARI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(l'+'itArgs_spe'+'cularity,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_GLO'+'SS_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_gloss)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_M'+'ETALNESS_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(vec3f'+'(litArgs_m'+'etalness)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_A'+'O_PASS\x0aout'+'put.color\x20'+'=\x20vec4f(ve'+'c3f(litArg'+'s_ao)\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_EMISS'+'ION_PASS\x0ao'+'utput.colo'+'r\x20=\x20vec4f('+'gammaCorre'+'ctOutput(l'+'itArgs_emi'+'ssion),\x201.'+'0);\x0a#endif'+'\x0a',H2='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0a\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20v'+'ec3f(0.5);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0a#ifdef\x20VA'+'RYING_VUV0'+'\x0a\x20\x20\x20\x20litAr'+'gs_albedo\x20'+'=\x20vec3f(vU'+'v0,\x200.0);\x0a'+'#else\x0a\x20\x20\x20\x20'+'litArgs_al'+'bedo\x20=\x20vec'+'3f(0.0);\x0a#'+'endif\x0a#end'+'if\x0a',W2='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0afn\x20de'+'codeLinear'+'(raw:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20raw.r'+'gb;\x0a}\x0a\x0afn\x20'+'decodeGamm'+'aFloat(raw'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20pow'+'(raw,\x202.2)'+';\x0a}\x0a\x0afn\x20de'+'codeGamma3'+'(raw:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(r'+'aw,\x20vec3f('+'2.2));\x0a}\x0a\x0a'+'fn\x20decodeG'+'amma(raw:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow(raw.xyz'+',\x20vec3f(2.'+'2));\x0a}\x0a\x0afn'+'\x20decodeRGB'+'M(raw:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20color\x20='+'\x20(8.0\x20*\x20ra'+'w.a)\x20*\x20raw'+'.rgb;\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0afn\x20de'+'codeRGBP(r'+'aw:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20ra'+'w.rgb\x20*\x20(-'+'raw.a\x20*\x207.'+'0\x20+\x208.0);\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0af'+'n\x20decodeRG'+'BE(raw:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(vec3f('+'0.0),\x20raw.'+'xyz\x20*\x20pow('+'2.0,\x20raw.w'+'\x20*\x20255.0\x20-'+'\x20128.0),\x20r'+'aw.a\x20!=\x200.'+'0);\x0a}\x0a\x0afn\x20'+'passThroug'+'h(raw:\x20vec'+'4f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw;'+'\x0a}\x0a\x0afn\x20unp'+'ackNormalX'+'YZ(nmap:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20nm'+'ap.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'}\x0a\x0afn\x20unpa'+'ckNormalXY'+'(nmap:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20xy\x20=\x20nm'+'ap.wy\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'vec3f(xy,\x20'+'sqrt(1.0\x20-'+'\x20clamp(dot'+'(xy,\x20xy),\x20'+'0.0,\x201.0))'+');\x0a}\x0a\x0a#end'+'if\x0a',$2='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0afn\x20de'+'tailMode_m'+'ul(c1:\x20vec'+'3f,\x20c2:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20c1\x20'+'*\x20c2;\x0a}\x0a\x0af'+'n\x20detailMo'+'de_add(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20c1\x20+\x20c2;\x0a'+'}\x0a\x0a//\x20http'+'s://en.wik'+'ipedia.org'+'/wiki/Blen'+'d_modes#Sc'+'reen\x0afn\x20de'+'tailMode_s'+'creen(c1:\x20'+'vec3f,\x20c2:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'1.0\x20-\x20(1.0'+'\x20-\x20c1)*(1.'+'0\x20-\x20c2);\x0a}'+'\x0a\x0a//\x20https'+'://en.wiki'+'pedia.org/'+'wiki/Blend'+'_modes#Ove'+'rlay\x0afn\x20de'+'tailMode_o'+'verlay(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20mix(1.0\x20-'+'\x202.0\x20*\x20(1.'+'0\x20-\x20c1)*(1'+'.0\x20-\x20c2),\x20'+'2.0\x20*\x20c1\x20*'+'\x20c2,\x20step('+'c1,\x20vec3f('+'0.5)));\x0a}\x0a'+'\x0afn\x20detail'+'Mode_min(c'+'1:\x20vec3f,\x20'+'c2:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20min(c1,'+'\x20c2);\x0a}\x0a\x0af'+'n\x20detailMo'+'de_max(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(c1,\x20c'+'2);\x0a}\x0a\x0a#en'+'dif\x0a',X2='\x0auniform\x20m'+'aterial_di'+'ffuse:\x20vec'+'3f;\x0a\x0a#ifde'+'f\x20STD_DIFF'+'USEDETAIL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22detailMo'+'desPS\x22\x0a#en'+'dif\x0a\x0afn\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20unif'+'orm.materi'+'al_diffuse'+'.rgb;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoText'+'ure:\x20vec3f'+'\x20=\x20{STD_DI'+'FFUSE_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_DIFFU'+'SE_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'_TEXTURE_N'+'AME}Sample'+'r,\x20{STD_DI'+'FFUSE_TEXT'+'URE_UV},\x20u'+'niform.tex'+'tureBias))'+'.{STD_DIFF'+'USE_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoDeta'+'il:\x20vec3f\x20'+'=\x20{STD_DIF'+'FUSEDETAIL'+'_TEXTURE_D'+'ECODE}(tex'+'tureSample'+'Bias({STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_NAME},\x20{'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_DIFFU'+'SEDETAIL_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20=\x20dAlbe'+'do\x20*\x20albed'+'oTexture;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_DIF'+'FUSE_VERTE'+'X\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAlbedo\x20=\x20'+'dAlbedo\x20*\x20'+'gammaCorre'+'ctInputVec'+'3(saturate'+'3(vVertexC'+'olor.{STD_'+('DIFFUSE_VE'+'RTEX_CHANN'+'EL}));\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),q2='\x0auniform\x20m'+'aterial_em'+'issive:\x20ve'+'c3f;\x0aunifo'+'rm\x20materia'+'l_emissive'+'Intensity:'+'\x20f32;\x0a\x0afn\x20'+'getEmissio'+'n()\x20{\x0a\x20\x20\x20\x20'+'dEmission\x20'+'=\x20uniform.'+'material_e'+'missive\x20*\x20'+'uniform.ma'+'terial_emi'+'ssiveInten'+'sity;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_EMISSIVE'+'_TEXTURE\x0a\x20'+'\x20\x20\x20dEmissi'+'on\x20*=\x20{STD'+'_EMISSIVE_'+'TEXTURE_DE'+'CODE}(text'+'ureSampleB'+'ias({STD_E'+'MISSIVE_TE'+'XTURE_NAME'+'},\x20{STD_EM'+'ISSIVE_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_EMISSI'+'VE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias)).{S'+'TD_EMISSIV'+'E_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_VERT'+'EX\x0a\x20\x20\x20\x20dEm'+'ission\x20=\x20d'+'Emission\x20*'+'\x20gammaCorr'+'ectInputVe'+'c3(saturat'+'e3(vVertex'+'Color.{STD'+'_EMISSIVE_'+'VERTEX_CHA'+'NNEL}));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',j2='\x0afn\x20encode'+'Linear(sou'+'rce:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'source,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeGamm'+'a(source:\x20'+'vec3f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4f(pow(s'+'ource\x20+\x20ve'+'c3f(0.0000'+'001),\x20vec3'+'f(1.0\x20/\x202.'+'2)),\x201.0);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBM(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+'r\x20color:\x20v'+'ec3f\x20=\x20pow'+'(source,\x20v'+'ec3f(0.5))'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x201.0\x20/'+'\x208.0;\x0a\x0a\x20\x20\x20'+'\x20var\x20a:\x20f3'+'2\x20=\x20satura'+'te(max(max'+'(color.r,\x20'+'color.g),\x20'+'max(color.'+'b,\x201.0\x20/\x202'+'55.0)));\x0a\x20'+'\x20\x20\x20a\x20=\x20cei'+'l(a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20col'+'or\x20/=\x20a;\x0a\x20'+'\x20\x20\x20return\x20'+'vec4f(colo'+'r,\x20a);\x0a}\x0a\x0a'+'fn\x20encodeR'+'GBP(source'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20//\x20con'+'vert\x20incom'+'ing\x20linear'+'\x20to\x20gamma('+'ish)\x0a\x20\x20\x20\x20v'+'ar\x20gamma:\x20'+'vec3f\x20=\x20po'+'w(source,\x20'+'vec3f(0.5)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20the\x20maxim'+'um\x20compone'+'nt\x20clamped'+'\x20to\x201..8\x0a\x20'+'\x20\x20\x20var\x20max'+'Val:\x20f32\x20='+'\x20min(8.0,\x20'+'max(1.0,\x20m'+'ax(gamma.x'+',\x20max(gamm'+'a.y,\x20gamma'+'.z))));\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20stor'+'age\x20factor'+'\x0a\x20\x20\x20\x20var\x20v'+':\x20f32\x20=\x201.'+'0\x20-\x20((maxV'+'al\x20-\x201.0)\x20'+'/\x207.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20roun'+'d\x20the\x20valu'+'e\x20for\x20stor'+'age\x20in\x208bi'+'t\x20channel\x0a'+'\x20\x20\x20\x20v\x20=\x20ce'+'il(v\x20*\x20255'+'.0)\x20/\x20255.'+'0;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(gamma\x20/\x20('+'-v\x20*\x207.0\x20+'+'\x208.0),\x20v);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBE(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+('r\x20maxVal:\x20'+'f32\x20=\x20max('+'source.x,\x20'+'max(source'+'.y,\x20source'+'.z));\x0a\x20\x20\x20\x20'+'if\x20(maxVal'+'\x20<\x201e-32)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+':\x20f32\x20=\x20ce'+'il(log2(ma'+'xVal));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(s'+'ource\x20/\x20po'+'w(2.0,\x20e),'+'\x20(e\x20+\x20128.'+'0)\x20/\x20255.0'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a'),Y2='\x0a\x20\x20\x20\x20var\x20f'+'inalRgb:\x20v'+'ec3f\x20=\x20com'+'bineColor('+'litArgs_al'+'bedo,\x20litA'+'rgs_sheen_'+'specularit'+'y,\x20litArgs'+'_clearcoat'+'_speculari'+'ty);\x0a\x0a\x20\x20\x20\x20'+'finalRgb\x20='+'\x20finalRgb\x20'+'+\x20litArgs_'+'emission;\x0a'+'\x20\x20\x20\x20finalR'+'gb\x20=\x20addFo'+'g(finalRgb'+');\x0a\x20\x20\x20\x20fin'+'alRgb\x20=\x20to'+'neMap(fina'+'lRgb);\x0a\x20\x20\x20'+'\x20finalRgb\x20'+'=\x20gammaCor'+'rectOutput'+'(finalRgb)'+';\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(fin'+'alRgb,\x20out'+'put.color.'+'a);\x0a',K2='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20atla'+'sSize\x20:\x20f3'+'2\x20=\x20512.0;'+'\x0aconst\x20sea'+'mSize\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0afn\x20mapU'+'v(uv\x20:\x20vec'+'2f,\x20rect\x20:'+'\x20vec4f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec2f(mix('+'rect.x\x20+\x20s'+'eamSize,\x20r'+'ect.x\x20+\x20re'+'ct.z\x20-\x20sea'+'mSize,\x20uv.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20mix(rect.'+'y\x20+\x20seamSi'+'ze,\x20rect.y'+'\x20+\x20rect.w\x20'+'-\x20seamSize'+',\x20uv.y));\x0a'+'}\x0a\x0a//\x20map\x20'+'a\x20normaliz'+'ed\x20equirec'+'t\x20UV\x20and\x20r'+'oughness\x20l'+'evel\x20to\x20th'+'e\x20correct\x20'+'atlas\x20rect'+'.\x0afn\x20mapRo'+'ughnessUv('+'uv\x20:\x20vec2f'+',\x20level\x20:\x20'+'f32)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20t\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'exp2(level'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mapUv('+'uv,\x20vec4f('+'0.0,\x201.0\x20-'+'\x20t,\x20t,\x20t\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20map\x20sh'+'iny\x20level\x20'+'UV\x0afn\x20mapS'+'hinyUv(uv\x20'+':\x20vec2f,\x20l'+'evel\x20:\x20f32'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20t\x20:\x20f32\x20='+'\x201.0\x20/\x20exp'+'2(level);\x0a'+'\x20\x20\x20\x20return'+'\x20mapUv(uv,'+'\x20vec4f(1.0'+'\x20-\x20t,\x201.0\x20'+'-\x20t,\x20t,\x20t\x20'+'*\x200.5));\x0a}'+'\x0a\x0a#endif\x0a',Z2='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20skyboxInt'+'ensity\x20:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20proce'+'ssEnvironm'+'ent(color\x20'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20unifo'+'rm.skyboxI'+'ntensity;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',Q2='\x0afn\x20getFal'+'loffWindow'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20sqrDist'+':\x20f32\x20=\x20do'+'t(lightDir'+',\x20lightDir'+');\x0a\x20\x20\x20\x20let'+'\x20invRadius'+':\x20f32\x20=\x201.'+'0\x20/\x20lightR'+'adius;\x0a\x20\x20\x20'+'\x20return\x20sq'+'uare(satur'+'ate(1.0\x20-\x20'+'square(sqr'+'Dist\x20*\x20squ'+'are(invRad'+'ius))));\x0a}'+'\x0a\x0afn\x20getFa'+'lloffInvSq'+'uared(ligh'+'tRadius:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20sq'+'rDist:\x20f32'+'\x20=\x20dot(lig'+'htDir,\x20lig'+'htDir);\x0a\x20\x20'+'\x20\x20var\x20fall'+'off:\x20f32\x20='+'\x201.0\x20/\x20(sq'+'rDist\x20+\x201.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20invRadiu'+'s:\x20f32\x20=\x201'+'.0\x20/\x20light'+'Radius;\x0a\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x20square('+'saturate(1'+'.0\x20-\x20squar'+'e(sqrDist\x20'+'*\x20square(i'+'nvRadius))'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20fall'+'off;\x0a}\x0a',J2='\x0afn\x20getFal'+'loffLinear'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20length(l'+'ightDir);\x0a'+'\x20\x20\x20\x20return'+'\x20max(((lig'+'htRadius\x20-'+'\x20d)\x20/\x20ligh'+'tRadius),\x20'+'0.0);\x0a}\x0a',eM='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x20re'+'presentati'+'on\x20(0.0-1.'+'0\x20range)\x0af'+'n\x20float2ui'+'nt(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20intBit'+'s\x20=\x20bitcas'+'t<u32>(val'+'ue);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20f32((intB'+'its\x20>>\x2024u'+')\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((intBi'+'ts\x20>>\x2016u)'+'\x20&\x200xffu),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((intBit'+'s\x20>>\x208u)\x20&'+'\x200xffu),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20f32'+'(intBits\x20&'+'\x200xffu)\x0a\x20\x20'+'\x20\x20)\x20/\x20255.'+'0;\x0a}\x0a\x0a//\x20d'+'ecode\x20RGBA'+'8\x20value\x20to'+'\x20float\x0afn\x20'+'uint2float'+'(value:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20rgba_u32'+'\x20=\x20vec4<u3'+'2>(value\x20*'+'\x20255.0);\x0a\x20'+'\x20\x20\x20let\x20int'+'Bits:\x20u32\x20'+'=\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'r\x20<<\x2024u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'g\x20<<\x2016u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'b\x20<<\x208u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20rgba_u32.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20bitcas'+'t<f32>(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0af'+'n\x20float2ve'+'c4(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CAPS_TEX'+'TURE_FLOAT'+'_RENDERABL'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(value,'+'\x201.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20float2ui'+'nt(value);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0a#endi'+'f\x20//\x20FLOAT'+'_AS_UINT\x0a',tM='\x0a\x0avar<priv'+'ate>\x20dBlen'+'dModeFogFa'+'ctor\x20:\x20f32'+'\x20=\x201.0;\x0a\x0a#'+'if\x20(FOG\x20!='+'\x20NONE)\x0a\x20\x20\x20'+'\x20uniform\x20f'+'og_color\x20:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20fog_sta'+'rt\x20:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20fog_'+'end\x20:\x20f32;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20fog'+'_density\x20:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afn\x20ge'+'tFogFactor'+'()\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20depth\x20=\x20p'+'cPosition.'+'z\x20/\x20pcPosi'+'tion.w;\x0a\x0a\x20'+'\x20\x20\x20var\x20fog'+'Factor\x20:\x20f'+'32\x20=\x200.0;\x0a'+'\x0a\x20\x20\x20\x20#if\x20('+'FOG\x20==\x20LIN'+'EAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20(unif'+'orm.fog_en'+'d\x20-\x20depth)'+'\x20/\x20(unifor'+'m.fog_end\x20'+'-\x20uniform.'+'fog_start)'+';\x0a\x20\x20\x20\x20#eli'+'f\x20(FOG\x20==\x20'+'EXP)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20exp(-'+'depth\x20*\x20un'+'iform.fog_'+'density);\x0a'+'\x20\x20\x20\x20#elif\x20'+'(FOG\x20==\x20EX'+'P2)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fogFacto'+'r\x20=\x20exp(-d'+'epth\x20*\x20dep'+'th\x20*\x20unifo'+'rm.fog_den'+'sity\x20*\x20uni'+'form.fog_d'+'ensity);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(fo'+'gFactor,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0afn\x20addF'+'og(color\x20:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'uniform.fo'+'g_color\x20*\x20'+'dBlendMode'+'FogFactor,'+'\x20color,\x20ge'+'tFogFactor'+'());\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'color;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',sM='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0afn'+'\x20getFresne'+'l(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20cosTheta:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y:\x20f32\x0a\x20\x20\x20'+'\x20#endif\x0a)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20f'+'resnel:\x20f3'+'2\x20=\x20pow(1.'+'0\x20-\x20satura'+'te(cosThet'+'a),\x205.0);\x0a'+'\x20\x20\x20\x20let\x20gl'+'ossSq:\x20f32'+'\x20=\x20gloss\x20*'+'\x20gloss;\x0a\x20\x20'+'\x20\x20let\x20ret:'+'\x20vec3f\x20=\x20s'+'pecularity'+'\x20+\x20(max(ve'+'c3f(glossS'+'q),\x20specul'+'arity)\x20-\x20s'+'pecularity'+')\x20*\x20fresne'+'l;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20mix(ret,'+'\x20iridescen'+'ceFresnel,'+'\x20iridescen'+'ceIntensit'+'y);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20r'+'et;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0afn'+'\x20getFresne'+'lCC(cosThe'+'ta:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20fres'+'nel:\x20f32\x20='+'\x20pow(1.0\x20-'+'\x20saturate('+'cosTheta),'+'\x205.0);\x0a\x20\x20\x20'+'\x20return\x200.'+'04\x20+\x20(1.0\x20'+'-\x200.04)\x20*\x20'+'fresnel;\x0a}',iM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x0avary'+'ing\x20vUv0:\x20'+'vec2f;\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4f(inpu'+'t.vertex_p'+'osition,\x200'+'.5,\x201.0);\x0a'+'\x20\x20\x20\x20output'+'.vUv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x20vec2f(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',rM='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInput(c'+'olor:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGammaFloa'+'t(color);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20fn\x20gammaC'+'orrectInpu'+'tVec3(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20deco'+'deGamma3(c'+'olor);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInputVe'+'c4(color:\x20'+'vec4f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(d'+'ecodeGamma'+'3(color.xy'+'z),\x20color.'+'w);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Output(col'+'or:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20pow'+'(color\x20+\x200'+'.0000001,\x20'+'vec3f(1.0\x20'+'/\x202.2));\x0a\x20'+'\x20\x20\x20}\x0a\x0a#els'+'e\x20//\x20NONE\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Input(colo'+'r:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20gammaCo'+'rrectInput'+'Vec3(color'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20gamm'+'aCorrectIn'+'putVec4(co'+'lor:\x20vec4f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20g'+'ammaCorrec'+'tOutput(co'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a',aM='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_gl'+'oss:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getGlossi'+'ness()\x20{\x0a\x20'+'\x20\x20\x20dGlossi'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_GL'+'OSS_CONSTA'+'NT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20unifo'+'rm.materia'+'l_gloss;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_GLOS'+'S_TEXTURE\x0a'+'\x20\x20\x20\x20dGloss'+'iness\x20=\x20dG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_GLOSS'+'_TEXTURE_N'+'AME},\x20{STD'+'_GLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_GLOSS_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_GLOSS_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_I'+'NVERT\x0a\x20\x20\x20\x20'+'dGlossines'+'s\x20=\x201.0\x20-\x20'+'dGlossines'+'s;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20d'+'Glossiness'+'\x20=\x20dGlossi'+'ness\x20+\x200.0'+'000001;\x0a}\x0a',nM='\x0auniform\x20m'+'atrix_mode'+'l:\x20mat4x4f'+';\x0auniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0auniform\x20'+'matrix_pro'+'jection:\x20m'+'at4x4f;\x0a\x0a/'+'/\x20project\x20'+'the\x20model\x20'+'space\x20gaus'+'sian\x20cente'+'r\x20to\x20view\x20'+'and\x20clip\x20s'+'pace\x0afn\x20in'+'itCenter(m'+'odelCenter'+':\x20vec3f,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>)\x20->\x20bo'+'ol\x20{\x0a\x20\x20\x20\x20l'+'et\x20modelVi'+'ew:\x20mat4x4'+'f\x20=\x20unifor'+'m.matrix_v'+'iew\x20*\x20unif'+'orm.matrix'+'_model;\x0a\x20\x20'+'\x20\x20let\x20cent'+'erView:\x20ve'+'c4f\x20=\x20mode'+'lView\x20*\x20ve'+'c4f(modelC'+'enter,\x201.0'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20if\x20splat\x20'+'is\x20behind\x20'+'the\x20camera'+'\x0a\x20\x20\x20\x20if\x20(c'+'enterView.'+'z\x20>\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20ce'+'nterProj:\x20'+'vec4f\x20=\x20un'+'iform.matr'+'ix_project'+'ion\x20*\x20cent'+'erView;\x0a\x0a\x20'+'\x20\x20\x20//\x20ensu'+'re\x20gaussia'+'ns\x20are\x20not'+'\x20clipped\x20b'+'y\x20camera\x20n'+'ear\x20and\x20fa'+'r\x0a\x20\x20\x20\x20cent'+'erProj.z\x20='+'\x20clamp(cen'+'terProj.z,'+'\x200.0,\x20abs('+'centerProj'+'.w));\x0a\x0a\x20\x20\x20'+'\x20center.vi'+'ew\x20=\x20cente'+'rView.xyz\x20'+'/\x20centerVi'+'ew.w;\x0a\x20\x20\x20\x20'+'center.pro'+'j\x20=\x20center'+'Proj;\x0a\x20\x20\x20\x20'+'center.pro'+'jMat00\x20=\x20u'+'niform.mat'+'rix_projec'+'tion[0][0]'+';\x0a\x20\x20\x20\x20cent'+'er.modelVi'+'ew\x20=\x20model'+'View;\x0a\x20\x20\x20\x20'+'return\x20tru'+'e;\x0a}\x0a',oM='\x0a\x0avar\x20spla'+'tColor:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20r'+'eadColor(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20tex'+'tureLoad(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a}\x0a',lM='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20order:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20id:\x20u3'+'2,\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'uv:\x20vec2<i'+'32>,\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20corn'+'erUV:\x20vec2'+'f,\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a}\x0a\x0a'+'//\x20stores\x20'+'the\x20camera'+'\x20and\x20clip\x20'+'space\x20posi'+'tion\x20of\x20th'+'e\x20gaussian'+'\x20center\x0ast'+'ruct\x20Splat'+'Center\x20{\x0a\x20'+'\x20\x20\x20view:\x20v'+'ec3f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20vi'+'ew\x20space\x0a\x20'+'\x20\x20\x20proj:\x20v'+'ec4f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20cl'+'ip\x20space\x0a\x20'+'\x20\x20\x20modelVi'+'ew:\x20mat4x4'+'f,\x20\x20\x20//\x20mo'+'del-view\x20m'+'atrix\x0a\x20\x20\x20\x20'+'projMat00:'+'\x20f32,\x20\x20\x20\x20\x20'+'\x20\x20//\x20eleme'+'mt\x20[0][0]\x20'+'of\x20the\x20pro'+'jection\x20ma'+'trix\x0a}\x0a\x0a//'+'\x20stores\x20th'+'e\x20offset\x20f'+'rom\x20center'+'\x20for\x20the\x20c'+'urrent\x20gau'+'ssian\x0astru'+'ct\x20SplatCo'+'rner\x20{\x0a\x20\x20\x20'+'\x20offset:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20corn'+'er\x20offset\x20'+'from\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'uv:\x20vec2f,'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20aaFactor:'+'\x20f32,\x20//\x20f'+'or\x20scenes\x20'+'generated\x20'+'with\x20antia'+'liasing\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0a#include'+'\x20\x22gsplatEv'+'alSHVS\x22\x0a#i'+'nclude\x20\x22gs'+'platQuatTo'+'Mat3VS\x22\x0a\x0a#'+'if\x20GSPLAT_'+'COMPRESSED'+'_DATA\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatComp'+'ressedData'+'VS\x22\x0a\x20\x20\x20\x20#i'+('f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsDataVS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tSogsColor'+'VS\x22\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsSHVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#else\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatData'+'VS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22gs'+'platColorV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0afn\x20'+'clipCorner'+'(corner:\x20p'+'tr<functio'+'n,\x20SplatCo'+'rner>,\x20alp'+'ha:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'lip:\x20f32\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20(255'+'.0\x20*\x20alpha'+')))\x20/\x202.0)'+';\x0a\x20\x20\x20\x20corn'+'er.offset\x20'+'=\x20corner.o'+'ffset\x20*\x20cl'+'ip;\x0a\x20\x20\x20\x20co'+'rner.uv\x20=\x20'+'corner.uv\x20'+'*\x20clip;\x0a}\x0a'+'\x0a'),cM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0avar'+'\x20chunkText'+'ure:\x20textu'+'re_2d<f32>'+';\x0a\x0a//\x20work'+'\x20values\x0ava'+'r<private>'+'\x20chunkData'+'A:\x20vec4f;\x20'+'\x20\x20\x20//\x20x:\x20m'+'in_x,\x20y:\x20m'+'in_y,\x20z:\x20m'+'in_z,\x20w:\x20m'+'ax_x\x0avar<p'+'rivate>\x20ch'+'unkDataB:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20max_'+'y,\x20y:\x20max_'+'z,\x20z:\x20scal'+'e_min_x,\x20w'+':\x20scale_mi'+'n_y\x0avar<pr'+'ivate>\x20chu'+'nkDataC:\x20v'+'ec4f;\x20\x20\x20\x20/'+'/\x20x:\x20scale'+'_min_z,\x20y:'+'\x20scale_max'+'_x,\x20z:\x20sca'+'le_max_y,\x20'+'w:\x20scale_m'+'ax_z\x0avar<p'+'rivate>\x20ch'+'unkDataD:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20min_'+'r,\x20y:\x20min_'+'g,\x20z:\x20min_'+'b,\x20w:\x20max_'+'r\x0avar<priv'+'ate>\x20chunk'+'DataE:\x20vec'+'4f;\x20\x20\x20\x20//\x20'+'x:\x20max_g,\x20'+'y:\x20max_b,\x20'+'z:\x20unused,'+'\x20w:\x20unused'+'\x0avar<priva'+'te>\x20packed'+'Data:\x20vec4'+'u;\x20\x20\x20\x20//\x20x'+':\x20position'+'\x20bits,\x20y:\x20'+'rotation\x20b'+'its,\x20z:\x20sc'+'ale\x20bits,\x20'+'w:\x20color\x20b'+'its\x0a\x0afn\x20un'+'pack111011'+'(bits:\x20u32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(vec3f'+'((vec3<u32'+'>(bits)\x20>>'+'\x20vec3<u32>'+'(21u,\x2011u,'+'\x200u))\x20&\x20ve'+'c3<u32>(0x'+'7ffu,\x200x3f'+'fu,\x200x7ffu'+')))\x20/\x20vec3'+'f(2047.0,\x20'+'1023.0,\x2020'+'47.0);\x0a}\x0a\x0a'+'fn\x20unpack8'+'888(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20f32((bit'+'s\x20>>\x2024u)\x20'+'&\x200xffu),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((bits\x20>>'+'\x2016u)\x20&\x200x'+'ffu),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20f32((b'+'its\x20>>\x208u)'+'\x20\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(bits\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20&\x200'+'xffu)\x0a\x20\x20\x20\x20'+')\x20/\x20255.0;'+('\x0a}\x0a\x0aconst\x20'+'norm_const'+':\x20f32\x20=\x201.'+'0\x20/\x20(sqrt('+'2.0)\x20*\x200.5'+');\x0a\x0afn\x20unp'+'ackRotatio'+'n(bits:\x20u3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x20(f32'+'((bits\x20>>\x20'+'20u)\x20&\x200x3'+'ffu)\x20/\x20102'+'3.0\x20-\x200.5)'+'\x20*\x20norm_co'+'nst;\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20(f3'+'2((bits\x20>>'+'\x2010u)\x20&\x200x'+'3ffu)\x20/\x2010'+'23.0\x20-\x200.5'+')\x20*\x20norm_c'+'onst;\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20(f'+'32(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+'_const;\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'sqrt(1.0\x20-'+'\x20(a\x20*\x20a\x20+\x20'+'b\x20*\x20b\x20+\x20c\x20'+'*\x20c));\x0a\x0a\x20\x20'+'\x20\x20let\x20mode'+'\x20=\x20bits\x20>>'+'\x2030u;\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x200u)\x20{\x20re'+'turn\x20vec4f'+'(m,\x20a,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20m,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x202u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20b,\x20m,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(a,\x20b,\x20c'+',\x20m);\x0a}\x0a\x0a/'+'/\x20read\x20cen'+'ter\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex_siz'+'e_u\x20=\x20text'+'ureDimensi'+'ons(chunkT'+'exture,\x200)'+';\x0a\x20\x20\x20\x20let\x20'+'w:\x20u32\x20=\x20t'+'ex_size_u.'+'x\x20/\x205u;\x0a\x20\x20'+'\x20\x20let\x20chun'+'kId:\x20u32\x20='+'\x20source.id'+'\x20/\x20256u;\x0a\x20'+'\x20\x20\x20let\x20chu'+'nkUV:\x20vec2'+'<i32>\x20=\x20ve'+'c2<i32>(i3'+'2((chunkId'+'\x20%\x20w)\x20*\x205u'+'),\x20i32(chu'+'nkId\x20/\x20w))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'read\x20chunk'+'\x20and\x20packe'+'d\x20compress'+'ed\x20data\x0a\x20\x20'+'\x20\x20chunkDat'+'aA\x20=\x20textu'+'reLoad(chu'+'nkTexture,'+'\x20chunkUV\x20+'+'\x20vec2<i32>'+'(0,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataB\x20=\x20t'+'extureLoad')+('(chunkText'+'ure,\x20chunk'+'UV\x20+\x20vec2<'+'i32>(1,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataC'+'\x20=\x20texture'+'Load(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20v'+'ec2<i32>(2'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataD\x20=\x20tex'+'tureLoad(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20vec2<i3'+'2>(3,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataE\x20='+'\x20textureLo'+'ad(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20vec'+'2<i32>(4,\x20'+'0),\x200);\x0a\x20\x20'+'\x20\x20packedDa'+'ta\x20=\x20textu'+'reLoad(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(chunkDa'+'taA.xyz,\x20v'+'ec3f(chunk'+'DataA.w,\x20c'+'hunkDataB.'+'xy),\x20unpac'+'k111011(pa'+'ckedData.x'+'));\x0a}\x0a\x0afn\x20'+'readColor('+'source:\x20pt'+'r<function'+',\x20SplatSou'+'rce>)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20let\x20r\x20=\x20u'+'npack8888('+'packedData'+'.w);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(mix(chun'+'kDataD.xyz'+',\x20vec3f(ch'+'unkDataD.w'+',\x20chunkDat'+'aE.xy),\x20r.'+'rgb),\x20r.w)'+';\x0a}\x0a\x0afn\x20ge'+'tRotation('+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20unpack'+'Rotation(p'+'ackedData.'+'y);\x0a}\x0a\x0afn\x20'+'getScale()'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20exp(mix'+'(vec3f(chu'+'nkDataB.zw'+',\x20chunkDat'+'aC.x),\x20chu'+'nkDataC.yz'+'w,\x20unpack1'+'11011(pack'+'edData.z))'+');\x0a}\x0a\x0a//\x20g'+'iven\x20a\x20rot'+'ation\x20matr'+'ix\x20and\x20sca'+'le\x20vector,'+'\x20compute\x203'+'d\x20covarian'+'ce\x20A\x20and\x20B'+'\x0afn\x20readCo'+'variance(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>,\x20covA_'+'ptr:\x20ptr<f'+'unction,\x20v'+'ec3f>,\x20cov'+'B_ptr:\x20ptr'+'<function,')+('\x20vec3f>)\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'ot\x20=\x20quatT'+'oMat3(getR'+'otation())'+';\x0a\x20\x20\x20\x20let\x20'+'scale\x20=\x20ge'+'tScale();\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20let\x20M\x20=\x20'+'transpose('+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.x\x20*\x20rot'+'[0],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.y'+'\x20*\x20rot[1],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.z\x20*\x20r'+'ot[2]\x0a\x20\x20\x20\x20'+'));\x0a\x0a\x20\x20\x20\x20*'+'covA_ptr\x20='+'\x20vec3f(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20*covB_p'+'tr\x20=\x20vec3f'+'(dot(M[1],'+'\x20M[1]),\x20do'+'t(M[1],\x20M['+'2]),\x20dot(M'+'[2],\x20M[2])'+');\x0a}\x0a'),hM='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0av'+'ar\x20shTextu'+'re0:\x20textu'+'re_2d<u32>'+';\x0avar\x20shTe'+'xture1:\x20te'+'xture_2d<u'+'32>;\x0avar\x20s'+'hTexture2:'+'\x20texture_2'+'d<u32>;\x0a\x0af'+'n\x20unpack88'+'88s(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20unpack'+'ed_u\x20=\x20(ve'+'c4<u32>(bi'+'ts)\x20>>\x20vec'+'4<u32>(0u,'+'\x208u,\x2016u,\x20'+'24u))\x20&\x20ve'+'c4<u32>(0x'+'ffu);\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(unpacke'+'d_u)\x20*\x20(8.'+'0\x20/\x20255.0)'+'\x20-\x204.0;\x0a}\x0a'+'\x0afn\x20readSH'+'Data(sourc'+'e:\x20ptr<fun'+'ction,\x20Spl'+'atSource>,'+'\x20sh:\x20ptr<f'+'unction,\x20a'+'rray<vec3f'+',\x2015>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20read\x20t'+'he\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20let\x20shD'+'ata0:\x20vec4'+'<u32>\x20=\x20te'+'xtureLoad('+'shTexture0'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20let\x20shDat'+'a1:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(sh'+'Texture1,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20shData2'+':\x20vec4<u32'+'>\x20=\x20textur'+'eLoad(shTe'+'xture2,\x20so'+'urce.uv,\x200'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20r0\x20=\x20unp'+'ack8888s(s'+'hData0.x);'+'\x0a\x20\x20\x20\x20let\x20r'+'1\x20=\x20unpack'+'8888s(shDa'+'ta0.y);\x0a\x20\x20'+'\x20\x20let\x20r2\x20='+'\x20unpack888'+'8s(shData0'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20r3\x20=\x20un'+'pack8888s('+'shData0.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20g0\x20=\x20unpa'+'ck8888s(sh'+'Data1.x);\x0a'+'\x20\x20\x20\x20let\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20let\x20g2\x20=\x20'+'unpack8888'+'s(shData1.'+'z);\x0a\x20\x20\x20\x20le'+'t\x20g3\x20=\x20unp'+'ack8888s(s'+'hData1.w);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'b0\x20=\x20unpac'+'k8888s(shD'+'ata2.x);\x0a\x20'+'\x20\x20\x20let\x20b1\x20'+('=\x20unpack88'+'88s(shData'+'2.y);\x0a\x20\x20\x20\x20'+'let\x20b2\x20=\x20u'+'npack8888s'+'(shData2.z'+');\x0a\x20\x20\x20\x20let'+'\x20b3\x20=\x20unpa'+'ck8888s(sh'+'Data2.w);\x0a'+'\x0a\x20\x20\x20\x20sh[0]'+'\x20=\x20\x20vec3f('+'r0.x,\x20g0.x'+',\x20b0.x);\x0a\x20'+'\x20\x20\x20sh[1]\x20='+'\x20\x20vec3f(r0'+'.y,\x20g0.y,\x20'+'b0.y);\x0a\x20\x20\x20'+'\x20sh[2]\x20=\x20\x20'+'vec3f(r0.z'+',\x20g0.z,\x20b0'+'.z);\x0a\x20\x20\x20\x20s'+'h[3]\x20=\x20\x20ve'+'c3f(r0.w,\x20'+'g0.w,\x20b0.w'+');\x0a\x20\x20\x20\x20sh['+'4]\x20=\x20\x20vec3'+'f(r1.x,\x20g1'+'.x,\x20b1.x);'+'\x0a\x20\x20\x20\x20sh[5]'+'\x20=\x20\x20vec3f('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3f(r1'+'.z,\x20g1.z,\x20'+'b1.z);\x0a\x20\x20\x20'+'\x20sh[7]\x20=\x20\x20'+'vec3f(r1.w'+',\x20g1.w,\x20b1'+'.w);\x0a\x20\x20\x20\x20s'+'h[8]\x20=\x20\x20ve'+'c3f(r2.x,\x20'+'g2.x,\x20b2.x'+');\x0a\x20\x20\x20\x20sh['+'9]\x20=\x20\x20vec3'+'f(r2.y,\x20g2'+'.y,\x20b2.y);'+'\x0a\x20\x20\x20\x20sh[10'+']\x20=\x20vec3f('+'r2.z,\x20g2.z'+',\x20b2.z);\x0a\x20'+'\x20\x20\x20sh[11]\x20'+'=\x20vec3f(r2'+'.w,\x20g2.w,\x20'+'b2.w);\x0a\x20\x20\x20'+'\x20sh[12]\x20=\x20'+'vec3f(r3.x'+',\x20g3.x,\x20b3'+'.x);\x0a\x20\x20\x20\x20s'+'h[13]\x20=\x20ve'+'c3f(r3.y,\x20'+'g3.y,\x20b3.y'+');\x0a\x20\x20\x20\x20sh['+'14]\x20=\x20vec3'+'f(r3.z,\x20g3'+'.z,\x20b3.z);'+'\x0a\x0a\x20\x20\x20\x20*sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),dM='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'COEFFS:\x20i3'+'2\x20=\x203;\x0a\x20\x20\x20'+'\x20#elif\x20SH_'+'BANDS\x20==\x202'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20SH_CO'+'EFFS:\x20i32\x20'+'=\x208;\x0a\x20\x20\x20\x20#'+'elif\x20SH_BA'+'NDS\x20==\x203\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20con'+'st\x20SH_COEF'+'FS:\x20i32\x20=\x20'+'15;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20const\x20SH'+'_COEFFS:\x20i'+'32\x20=\x200;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20SH'+'_BANDS\x20>\x200'+'\x0a\x0a\x20\x20\x20\x20cons'+'t\x20SH_C1:\x20f'+'32\x20=\x200.488'+'6025119029'+'199;\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x201\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20const'+'\x20SH_C2_0:\x20'+'f32\x20=\x201.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_1:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_2:\x20f'+'32\x20=\x200.315'+'3915652525'+'2005;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_3:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_4:\x20f'+'32\x20=\x200.546'+'2742152960'+'396;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SH_BA'+'NDS\x20>\x202\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_0:'+'\x20f32\x20=\x20-0.'+'5900435899'+'266435;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_1:'+'\x20f32\x20=\x202.8'+'9061144264'+'0554;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_2:\x20f'+'32\x20=\x20-0.45'+'7045799464'+'4658;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_3:\x20f'+'32\x20=\x200.373'+'1763325901'+'154;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_4:\x20f3'+'2\x20=\x20-0.457'+'0457994644'+'658;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_5:\x20f3'+'2\x20=\x201.4453'+'0572132027'+'7;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'C3_6:\x20f32\x20'+'=\x20-0.59004'+'3589926643'+'5;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20see\x20http'+'s://github'+'.com/graph'+'deco-inria'+('/gaussian-'+'splatting/'+'blob/main/'+'utils/sh_u'+'tils.py\x0a\x20\x20'+'\x20\x20fn\x20evalS'+'H(sh:\x20ptr<'+'function,\x20'+'array<vec3'+'f,\x20SH_COEF'+'FS>>,\x20dir:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x\x20=\x20dir.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20y\x20=\x20di'+'r.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20z\x20='+'\x20dir.z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'1st\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20result\x20'+'=\x20SH_C1\x20*\x20'+'(-sh[0]\x20*\x20'+'y\x20+\x20sh[1]\x20'+'*\x20z\x20-\x20sh[2'+']\x20*\x20x);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x201\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x202'+'nd\x20degree\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xx\x20='+'\x20x\x20*\x20x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20yy\x20=\x20y'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20zz\x20=\x20z\x20*'+'\x20z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20yz'+'\x20=\x20y\x20*\x20z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xz\x20='+'\x20x\x20*\x20z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'result\x20+\x20('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'3]\x20*\x20(SH_C'+'2_0\x20*\x20xy)\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[4]\x20*\x20(SH_'+'C2_1\x20*\x20yz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[5]\x20*\x20(SH'+'_C2_2\x20*\x20(2'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[6]\x20*\x20(SH_'+'C2_3\x20*\x20xz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[7]\x20*\x20(SH'+'_C2_4\x20*\x20(x'+'x\x20-\x20yy))\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'=\x20result\x20+'+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20re'+'sult;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20#end'+'if\x0a'),fM='\x0afn\x20quatTo'+'Mat3(R:\x20ve'+'c4<f32>)\x20-'+'>\x20mat3x3<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'let\x20R2:\x20ve'+'c4<f32>\x20=\x20'+'R\x20+\x20R;\x0a\x20\x20\x20'+'\x20let\x20X:\x20f3'+'2\x20\x20\x20\x20\x20\x20\x20=\x20'+'R2.x\x20*\x20R.w'+';\x0a\x20\x20\x20\x20let\x20'+'Y:\x20vec4<f3'+'2>\x20=\x20R2.y\x20'+'*\x20R;\x0a\x20\x20\x20\x20l'+'et\x20Z:\x20vec4'+'<f32>\x20=\x20R2'+'.z\x20*\x20R;\x0a\x20\x20'+'\x20\x20let\x20W:\x20f'+'32\x20\x20\x20\x20\x20\x20\x20='+'\x20R2.w\x20*\x20R.'+'w;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20mat3x'+'3<f32>(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Z.z\x20-\x20W,'+'\x20\x20Y.z\x20+\x20X,'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.z\x20-'+'\x20X,\x20\x20\x20\x20\x20\x20\x20'+'\x201.0\x20-\x20Y.y'+'\x20-\x20W,\x20Z.w\x20'+'+\x20Y.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.w\x20+'+'\x20Z.x,\x20\x20\x20\x20\x20'+'\x20Z.w\x20-\x20Y.x'+',\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',uM='\x0avar\x20sh0:\x20'+'texture_2d'+'<f32>;\x0a\x0aun'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0auniform'+'\x20sh0_maxs:'+'\x20vec4f;\x0a\x0ac'+'onst\x20SH_C0'+':\x20f32\x20=\x200.'+'2820947917'+'7387814;\x0a\x0a'+'fn\x20readCol'+'or(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20let\x20cl'+'r:\x20vec4f\x20='+'\x20mix(unifo'+'rm.sh0_min'+'s,\x20uniform'+'.sh0_maxs,'+'\x20textureLo'+'ad(sh0,\x20so'+'urce.uv,\x200'+'));\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(vec3f(0.5'+')\x20+\x20clr.xy'+'z\x20*\x20SH_C0,'+'\x201.0\x20/\x20(1.'+'0\x20+\x20exp(-c'+'lr.w)));\x0a}'+'\x0a',pM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0a\x0aun'+'iform\x20mean'+'s_mins:\x20ve'+'c3f;\x0aunifo'+'rm\x20means_m'+'axs:\x20vec3f'+';\x0a\x0auniform'+'\x20scales_mi'+'ns:\x20vec3f;'+'\x0auniform\x20s'+'cales_maxs'+':\x20vec3f;\x0a\x0a'+'fn\x20unpackU'+'32(u:\x20u32)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20vec4f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((u\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((u\x20>>\x201'+'6u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((u\x20>>\x20'+'8u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(u\x20&\x200x'+'FFu)\x20/\x20255'+'.0\x0a\x20\x20\x20\x20);\x0a'+'}\x0a\x0avar<pri'+'vate>\x20pack'+'edSample:\x20'+'vec4<u32>;'+'\x0a\x0a//\x20read\x20'+'the\x20model-'+'space\x20cent'+'er\x20of\x20the\x20'+'gaussian\x0af'+'n\x20readCent'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec3f\x20{\x0a'+'\x0a\x20\x20\x20\x20packe'+'dSample\x20=\x20'+'textureLoa'+'d(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20l:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.x).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20u:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20n:\x20vec3f\x20'+'=\x20(l\x20*\x20255'+'.0\x20+\x20u\x20*\x202'+'55.0\x20*\x20256'+'.0)\x20/\x206553'+'5.0;\x0a\x20\x20\x20\x20l'+'et\x20v:\x20vec3'+'f\x20=\x20mix(un'+'iform.mean'+'s_mins,\x20un'+'iform.mean'+'s_maxs,\x20n)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20sign(v'+')\x20*\x20(exp(a'+'bs(v))\x20-\x201'+'.0);\x0a}\x0a\x0aco'+'nst\x20norm:\x20'+'f32\x20=\x202.0\x20'+'/\x20sqrt(2.0'+');\x0a\x0a//\x20sam'+'ple\x20covari'+'ance\x20vecto'+'rs\x0afn\x20read'+'Covariance'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>,\x20cov'+'A_ptr:\x20ptr'+'<function,'+'\x20vec3f>,\x20c'+('ovB_ptr:\x20p'+'tr<functio'+'n,\x20vec3f>)'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20qdata:\x20ve'+'c4f\x20=\x20unpa'+'ckU32(pack'+'edSample.z'+');\x0a\x20\x20\x20\x20let'+'\x20sdata:\x20ve'+'c3f\x20=\x20unpa'+'ckU32(pack'+'edSample.w'+').xyz;\x0a\x0a\x20\x20'+'\x20\x20let\x20abc:'+'\x20vec3f\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(abc,'+'\x20abc)));\x0a\x0a'+'\x20\x20\x20\x20let\x20mo'+'de:\x20u32\x20=\x20'+'u32(qdata.'+'w\x20*\x20255.0\x20'+'+\x200.5)\x20-\x202'+'52u;\x0a\x0a\x20\x20\x20\x20'+'var\x20quat:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20if\x20(mode\x20'+'==\x200u)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20qua'+'t\x20=\x20vec4f('+'d,\x20abc);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20quat'+'\x20=\x20vec4f(a'+'bc.x,\x20d,\x20a'+'bc.y,\x20abc.'+'z);\x0a\x20\x20\x20\x20}\x20'+'else\x20if\x20(m'+'ode\x20==\x202u)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20quat\x20=\x20ve'+'c4f(abc.x,'+'\x20abc.y,\x20d,'+'\x20abc.z);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'quat\x20=\x20vec'+'4f(abc.x,\x20'+'abc.y,\x20abc'+'.z,\x20d);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20'+'let\x20rot:\x20m'+'at3x3f\x20=\x20q'+'uatToMat3('+'quat);\x0a\x20\x20\x20'+'\x20let\x20scale'+':\x20vec3f\x20=\x20'+'exp(mix(un'+'iform.scal'+'es_mins,\x20u'+'niform.sca'+'les_maxs,\x20'+'sdata));\x0a\x0a'+'\x20\x20\x20\x20//\x20M\x20='+'\x20S\x20*\x20R\x0a\x20\x20\x20'+'\x20let\x20M:\x20ma'+'t3x3f\x20=\x20tr'+'anspose(ma'+'t3x3f(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20*co'+'vA_ptr\x20=\x20v'+'ec3f(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20*covB_ptr'+'\x20=\x20vec3f(d'+'ot(M[1],\x20M'+'[1]),\x20dot('+'M[1],\x20M[2]'+'),\x20dot(M[2'+'],\x20M[2]));')+'\x0a}\x0a',mM='\x0avar\x20sh_ce'+'ntroids:\x20t'+'exture_2d<'+'f32>;\x0a\x0auni'+'form\x20shN_m'+'ins:\x20f32;\x0a'+'uniform\x20sh'+'N_maxs:\x20f3'+'2;\x0a\x0afn\x20rea'+'dSHData(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>,\x20sh:\x20pt'+'r<function'+',\x20array<ve'+'c3f,\x20SH_CO'+'EFFS>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'let\x20t:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'32(packedS'+'ample.x\x20&\x20'+'255u),\x20i32'+'(packedSam'+'ple.y\x20&\x2025'+'5u));\x0a\x20\x20\x20\x20'+'let\x20n:\x20i32'+'\x20=\x20t.x\x20+\x20t'+'.y\x20*\x20256;\x0a'+'\x20\x20\x20\x20let\x20u:'+'\x20i32\x20=\x20(n\x20'+'%\x2064)\x20*\x20SH'+'_COEFFS;\x0a\x20'+'\x20\x20\x20let\x20v:\x20'+'i32\x20=\x20n\x20/\x20'+'64;\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20offset\x20i'+'nto\x20the\x20ce'+'ntroids\x20te'+'xture\x20and\x20'+'read\x20conse'+'cutive\x20tex'+'els\x0a\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'i32\x20=\x200;\x20i'+'\x20<\x20SH_COEF'+'FS;\x20i\x20=\x20i\x20'+'+\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[i]'+'\x20=\x20mix(vec'+'3f(uniform'+'.shN_mins)'+',\x20vec3f(un'+'iform.shN_'+'maxs),\x20tex'+'tureLoad(s'+'h_centroid'+'s,\x20vec2<i3'+'2>(u\x20+\x20i,\x20'+'v),\x200).xyz'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20*scale'+'\x20=\x201.0;\x0a}\x0a',_M='\x0auniform\x20v'+'iewport:\x20v'+'ec2f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20view'+'port\x20dimen'+'sions\x0aunif'+'orm\x20camera'+'_params:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201\x20/\x20far,\x20'+'far,\x20near,'+'\x20isOrtho\x0a\x0a'+'//\x20calcula'+'te\x20the\x20cli'+'p-space\x20of'+'fset\x20from\x20'+'the\x20center'+'\x20for\x20this\x20'+'gaussian\x0af'+'n\x20initCorn'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>,\x20corne'+'r:\x20ptr<fun'+'ction,\x20Spl'+'atCorner>)'+'\x20->\x20bool\x20{'+'\x0a\x20\x20\x20\x20//\x20ge'+'t\x20covarian'+'ce\x0a\x20\x20\x20\x20var'+'\x20covA:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20covB:\x20ve'+'c3f;\x0a\x20\x20\x20\x20r'+'eadCovaria'+'nce(source'+',\x20&covA,\x20&'+'covB);\x0a\x0a\x20\x20'+'\x20\x20let\x20Vrk\x20'+'=\x20mat3x3f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(covA.'+'x,\x20covA.y,'+'\x20covA.z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(covA.y'+',\x20covB.x,\x20'+'covB.y),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(covA.z,'+'\x20covB.y,\x20c'+'ovB.z)\x0a\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20l'+'et\x20focal\x20='+'\x20uniform.v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20let\x20v'+'\x20=\x20select('+'center.vie'+'w.xyz,\x20vec'+'3f(0.0,\x200.'+'0,\x201.0),\x20u'+'niform.cam'+'era_params'+'.w\x20==\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'J1\x20=\x20focal'+'\x20/\x20v.z;\x0a\x20\x20'+'\x20\x20let\x20J2\x20='+'\x20-J1\x20/\x20v.z'+'\x20*\x20v.xy;\x0a\x20'+'\x20\x20\x20let\x20J\x20='+'\x20mat3x3f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(J1,\x200.'+'0,\x20J2.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x20J'+'1,\x20J2.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x200'+'.0,\x200.0)\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20W\x20=\x20t'+'ranspose(m'+'at3x3f(cen'+'ter.modelV'+'iew[0].xyz'+',\x20center.m'+'odelView[1'+'].xyz,\x20cen'+('ter.modelV'+'iew[2].xyz'+'));\x0a\x20\x20\x20\x20le'+'t\x20T\x20=\x20W\x20*\x20'+'J;\x0a\x20\x20\x20\x20let'+'\x20cov\x20=\x20tra'+'nspose(T)\x20'+'*\x20Vrk\x20*\x20T;'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'GSPLAT_AA\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20calculate'+'\x20AA\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20detOrig'+'\x20=\x20cov[0]['+'0]\x20*\x20cov[1'+'][1]\x20-\x20cov'+'[0][1]\x20*\x20c'+'ov[1][0];\x20'+'//\x20Using\x20['+'0][1]\x20*\x20[1'+'][0]\x20as\x20ma'+'trix\x20might'+'\x20not\x20be\x20pe'+'rfectly\x20sy'+'mmetric\x20nu'+'merically\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20detBlur\x20'+'=\x20(cov[0]['+'0]\x20+\x200.3)\x20'+'*\x20(cov[1]['+'1]\x20+\x200.3)\x20'+'-\x20cov[0][1'+']\x20*\x20cov[1]'+'[0];\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20corner.'+'aaFactor\x20='+'\x20sqrt(detO'+'rig\x20/\x20detB'+'lur);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal1\x20=\x20co'+'v[0][0]\x20+\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20offDiag'+'onal\x20=\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal2\x20=\x20co'+'v[1][1]\x20+\x20'+'0.3;\x0a\x0a\x20\x20\x20\x20'+'let\x20mid\x20=\x20'+'0.5\x20*\x20(dia'+'gonal1\x20+\x20d'+'iagonal2);'+'\x0a\x20\x20\x20\x20let\x20r'+'adius\x20=\x20le'+'ngth(vec2f'+'((diagonal'+'1\x20-\x20diagon'+'al2)\x20/\x202.0'+',\x20offDiago'+'nal));\x0a\x20\x20\x20'+'\x20let\x20lambd'+'a1\x20=\x20mid\x20+'+'\x20radius;\x0a\x20'+'\x20\x20\x20let\x20lam'+'bda2\x20=\x20max'+'(mid\x20-\x20rad'+'ius,\x200.1);'+'\x0a\x0a\x20\x20\x20\x20//\x20U'+'se\x20the\x20sma'+'ller\x20viewp'+'ort\x20dimens'+'ion\x20to\x20lim'+'it\x20the\x20ker'+'nel\x20size\x20r'+'elative\x20to'+'\x20the\x20scree'+'n\x20resoluti'+'on.\x0a\x20\x20\x20\x20le'+'t\x20vmin\x20=\x20m'+'in(1024.0,'+'\x20min(unifo'+'rm.viewpor'+'t.x,\x20unifo'+'rm.viewpor'+'t.y));\x0a\x0a\x20\x20'+'\x20\x20let\x20l1\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda1)'+',\x20vmin);\x0a\x20'+'\x20\x20\x20let\x20l2\x20'+'=\x202.0\x20*\x20mi'+'n(sqrt(2.0'+'\x20*\x20lambda2')+('),\x20vmin);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly-out\x20ga'+'ussians\x20sm'+'aller\x20than'+'\x202\x20pixels\x0a'+'\x20\x20\x20\x20if\x20(l1'+'\x20<\x202.0\x20&&\x20'+'l2\x20<\x202.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20fal'+'se;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'uniform.vi'+'ewport;\x0a\x0a\x20'+'\x20\x20\x20//\x20cull'+'\x20against\x20f'+'rustum\x20x/y'+'\x20axes\x0a\x20\x20\x20\x20'+'if\x20(any((a'+'bs(center.'+'proj.xy)\x20-'+'\x20vec2f(max'+'(l1,\x20l2))\x20'+'*\x20c)\x20>\x20cen'+'ter.proj.w'+'w))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20diagona'+'lVector\x20=\x20'+'normalize('+'vec2f(offD'+'iagonal,\x20l'+'ambda1\x20-\x20d'+'iagonal1))'+';\x0a\x20\x20\x20\x20let\x20'+'v1\x20=\x20l1\x20*\x20'+'diagonalVe'+'ctor;\x0a\x20\x20\x20\x20'+'let\x20v2\x20=\x20l'+'2\x20*\x20vec2f('+'diagonalVe'+'ctor.y,\x20-d'+'iagonalVec'+'tor.x);\x20//'+'\x20Swizzle\x0a\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20=\x20'+'(source.co'+'rnerUV.x\x20*'+'\x20v1\x20+\x20sour'+'ce.cornerU'+'V.y\x20*\x20v2)\x20'+'*\x20c;\x0a\x20\x20\x20\x20c'+'orner.uv\x20='+'\x20source.co'+'rnerUV;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),gM='\x0avar\x20trans'+'formA:\x20tex'+'ture_2d<u3'+'2>;\x0avar\x20tr'+'ansformB:\x20'+'texture_2d'+'<f32>;\x0a\x0a//'+'\x20work\x20valu'+'es\x0avar<pri'+'vate>\x20tAw:'+'\x20u32;\x0a\x0a//\x20'+'read\x20the\x20m'+'odel-space'+'\x20center\x20of'+'\x20the\x20gauss'+'ian\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20let\x20'+'tA:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(tr'+'ansformA,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20t'+'Aw\x20=\x20tA.w;'+'\x0a\x20\x20\x20\x20retur'+'n\x20bitcast<'+'vec3f>(tA.'+'xyz);\x0a}\x0a\x0af'+'n\x20unpackRo'+'tation(pac'+'ked:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'packed.xyz'+',\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(pack'+'ed,\x20packed'+'))));\x0a}\x0a\x0a/'+'/\x20sample\x20c'+'ovariance\x20'+'vectors\x0afn'+'\x20readCovar'+'iance(sour'+'ce:\x20ptr<fu'+'nction,\x20Sp'+'latSource>'+',\x20covA_ptr'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20covB_p'+'tr:\x20ptr<fu'+'nction,\x20ve'+'c3f>)\x20{\x0a\x20\x20'+'\x20\x20let\x20tB:\x20'+'vec4f\x20=\x20te'+'xtureLoad('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20let\x20rot:'+'\x20mat3x3f\x20='+'\x20quatToMat'+'3(unpackRo'+'tation(vec'+'3f(unpack2'+'x16float(b'+'itcast<u32'+'>(tAw)),\x20t'+'B.w)).wxyz'+');\x0a\x20\x20\x20\x20let'+'\x20scale:\x20ve'+'c3f\x20=\x20tB.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x20M\x20=\x20S\x20*\x20'+'R\x0a\x20\x20\x20\x20let\x20'+'M\x20=\x20transp'+'ose(mat3x3'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20*covA_p'+'tr\x20=\x20vec3f'+'(dot(M[0],'+'\x20M[0]),\x20do'+('t(M[0],\x20M['+'1]),\x20dot(M'+'[0],\x20M[2])'+');\x0a\x20\x20\x20\x20*co'+'vB_ptr\x20=\x20v'+'ec3f(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a'),SM='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0afn\x20'+'prepareOut'+'putFromGam'+'ma(gammaCo'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20TONEMAP\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20G'+'AMMA\x20==\x20NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'nvert\x20to\x20l'+'inear\x20spac'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20decodeGam'+'ma3(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20gamma\x20'+'space\x20colo'+'r\x20directly'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'gammaColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ap'+'ply\x20tonema'+'pping\x20in\x20l'+'inear\x20spac'+'e\x20and\x20outp'+'ut\x20to\x20line'+'ar\x20or\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20gam'+'ma\x20(which\x20'+'is\x20handled'+'\x20by\x20gammaC'+'orrectOutp'+'ut)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaCorrec'+'tOutput(to'+'neMap(deco'+'deGamma3(g'+'ammaColor)'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',yM='\x0a\x0a#ifndef\x20'+'DITHER_NON'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22baye'+'rPS\x22\x0a\x20\x20\x20\x20#'+'include\x20\x22o'+'pacityDith'+'erPS\x22\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20PICK_PAS'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22pick'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_PASS)\x20||\x20'+'defined(PI'+'CK_PASS)\x20|'+'|\x20defined('+'PREPASS_PA'+'SS)\x0a\x20\x20\x20\x20un'+'iform\x20alph'+'aClip:\x20f32'+';\x0a#endif\x0a\x0a'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vLinearD'+'epth:\x20f32;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22float'+'AsUintPS\x22\x0a'+'#endif\x0a\x0a//'+'\x20Fast\x20appr'+'oximate\x20e^'+'x\x20based\x20on'+'\x20https://n'+'ic.schraud'+'olph.org/p'+'ubs/Schrau'+'dolph99.pd'+'f\x0aconst\x20EX'+'P_A:\x20f32\x20\x20'+'\x20\x20\x20\x20=\x201210'+'2203.0;\x20\x20\x20'+'//\x20≈\x202^23\x20'+'/\x20ln(2)\x0aco'+'nst\x20EXP_BC'+'_RMS:\x20i32\x20'+'=\x2010648668'+'08;\x20\x20\x20//\x20('+'127\x20<<\x2023)'+'\x20-\x2060801\x20*'+'\x208\x0afn\x20fast'+'Exp(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20var\x20i'+':\x20i32\x20=\x20i3'+'2(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20bi'+'tcast<f32>'+'(i);\x0a}\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x0a\x20\x20\x20'+'\x20let\x20A:\x20f3'+'2\x20=\x20dot(ga'+'ussianUV,\x20'+'gaussianUV'+');\x0a\x20\x20\x20\x20if\x20'+'(A\x20>\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20alpha'+'\x0a\x20\x20\x20\x20var\x20a'+'lpha:\x20f32\x20'+'=\x20fastExp('+'-A\x20*\x204.0)\x20'+'*\x20gaussian'+('Color.a;\x0a\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(al'+'pha\x20<\x20unif'+'orm.alphaC'+'lip)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20PI'+'CK_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20getPickO'+'utput();\x0a\x0a'+'\x20\x20\x20\x20#elif\x20'+'SHADOW_PAS'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(0.0,\x200.0'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20PREPAS'+'S_PASS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20float2vec'+'4(vLinearD'+'epth);\x0a\x0a\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20('+'1.0\x20/\x20255.'+'0))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20opaci'+'tyDither(&'+'alpha,\x20id\x20'+'*\x200.013);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(input'+'.gaussianC'+'olor.xyz,\x20'+'alpha);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'),vM='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0afn\x20unpack'+'111011s(bi'+'ts:\x20u32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20(vec3f((v'+'ec3<u32>(b'+'its)\x20>>\x20ve'+'c3<u32>(21'+'u,\x2011u,\x200u'+'))\x20&\x20vec3<'+'u32>(0x7ff'+'u,\x200x3ffu,'+'\x200x7ffu))\x20'+'/\x20vec3f(20'+'47.0,\x201023'+'.0,\x202047.0'+'))\x20*\x202.0\x20-'+'\x201.0;\x0a}\x0a\x0as'+'truct\x20Scal'+'eAndSH\x20{\x0a\x20'+'\x20\x20\x20scale:\x20'+'f32,\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f\x0a};\x0a\x0a'+'//\x20fetch\x20q'+'uantized\x20s'+'pherical\x20h'+'armonic\x20co'+'efficients'+'\x0afn\x20fetchS'+'cale(t_in:'+'\x20vec4<u32>'+')\x20->\x20Scale'+'AndSH\x20{\x0a\x20\x20'+'\x20\x20var\x20resu'+'lt:\x20ScaleA'+'ndSH;\x0a\x20\x20\x20\x20'+'result.sca'+'le\x20=\x20bitca'+'st<f32>(t_'+'in.x);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20unpack11'+'1011s(t_in'+'.y);\x0a\x20\x20\x20\x20r'+'esult.b\x20=\x20'+'unpack1110'+'11s(t_in.z'+');\x0a\x20\x20\x20\x20res'+'ult.c\x20=\x20un'+'pack111011'+'s(t_in.w);'+'\x0a\x20\x20\x20\x20retur'+'n\x20result;\x0a'+'}\x0a\x0astruct\x20'+'SH\x20{\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20d:\x20vec3f\x0a'+'};\x0a\x0a//\x20fet'+'ch\x20quantiz'+'ed\x20spheric'+'al\x20harmoni'+'c\x20coeffici'+'ents\x0afn\x20fe'+'tch4(t_in:'+'\x20vec4<u32>'+')\x20->\x20SH\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'sult:\x20SH;\x0a'+'\x20\x20\x20\x20result'+'.a\x20=\x20unpac'+'k111011s(t'+'_in.x);\x0a\x20\x20'+'\x20\x20result.b'+'\x20=\x20unpack1'+'11011s(t_i'+'n.y);\x0a\x20\x20\x20\x20'+'result.c\x20='+'\x20unpack111'+'011s(t_in.'+'z);\x0a\x20\x20\x20\x20re'+'sult.d\x20=\x20u'+'npack11101'+'1s(t_in.w)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20result;'+'\x0a}\x0a\x0afn\x20fet'+'ch1(t_in:\x20'+'u32)\x20->\x20ve'+('c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20unp'+'ack111011s'+'(t_in);\x0a}\x0a'+'\x0a#if\x20SH_BA'+'NDS\x20==\x201\x0a\x20'+'\x20\x20\x20var\x20spl'+'atSH_1to3:'+'\x20texture_2'+'d<u32>;\x0a\x0a\x20'+'\x20\x20\x20fn\x20read'+'SHData(sou'+'rce:\x20ptr<f'+'unction,\x20S'+'platSource'+'>,\x20sh:\x20ptr'+'<function,'+'\x20array<vec'+'3f,\x203>>,\x20s'+'cale:\x20ptr<'+'function,\x20'+'f32>)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'result\x20=\x20f'+'etchScale('+'textureLoa'+'d(splatSH_'+'1to3,\x20sour'+'ce.uv,\x200))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'*scale\x20=\x20r'+'esult.scal'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[0]\x20=\x20r'+'esult.a;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'1]\x20=\x20resul'+'t.b;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[2]\x20='+'\x20result.c;'+'\x0a\x20\x20\x20\x20}\x0a#el'+'if\x20SH_BAND'+'S\x20==\x202\x0a\x20\x20\x20'+'\x20var\x20splat'+'SH_1to3:\x20t'+'exture_2d<'+'u32>;\x0a\x20\x20\x20\x20'+'var\x20splatS'+'H_4to7:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_8to11:\x20te'+'xture_2d<u'+'32>;\x0a\x0a\x20\x20\x20\x20'+'fn\x20readSHD'+'ata(source'+':\x20ptr<func'+'tion,\x20Spla'+'tSource>,\x20'+'sh:\x20ptr<fu'+'nction,\x20ar'+'ray<vec3f,'+'\x208>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se')+('cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20='+'\x20fetch1(te'+'xtureLoad('+'splatSH_8t'+'o11,\x20sourc'+'e.uv,\x200).x'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_1to3:\x20tex'+'ture_2d<u3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20splatSH_'+'4to7:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_8'+'to11:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_1'+'2to15:\x20tex'+'ture_2d<u3'+'2>;\x0a\x0a\x20\x20\x20\x20f'+'n\x20readSHDa'+'ta(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20s'+'h:\x20ptr<fun'+'ction,\x20arr'+'ay<vec3f,\x20'+'15>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se'+'cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20thi'+'rd:\x20SH\x20=\x20f'+'etch4(text'+'ureLoad(sp'+'latSH_8to1'+'1,\x20source.'+'uv,\x200));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'7]\x20=\x20third'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[8]\x20=\x20'+'third.b;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'9]\x20=\x20third'+'.c;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[10]\x20='+'\x20third.d;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20fourth:'+'\x20SH\x20=\x20fetc'+'h4(texture'+'Load(splat'+'SH_12to15,')+('\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[11'+']\x20=\x20fourth'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[12]\x20='+'\x20fourth.b;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[13]\x20=\x20fo'+'urth.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[1'+'4]\x20=\x20fourt'+'h.d;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a\x0a#'+'endif\x0a'),xM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c3f;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20xy:\x20'+'cornerUV,\x20'+'z:\x20render\x20'+'order\x20offs'+'et\x0aattribu'+'te\x20vertex_'+'id_attrib:'+'\x20u32;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'nder\x20order'+'\x20base\x0a\x0auni'+'form\x20numSp'+'lats:\x20u32;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20total\x20nu'+'mber\x20of\x20sp'+'lats\x0avar\x20s'+'platOrder:'+'\x20texture_2'+'d<u32>;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'per-splat\x20'+'index\x20to\x20s'+'ource\x20gaus'+'sian\x0a\x0a//\x20i'+'nitialize\x20'+'the\x20splat\x20'+'source\x20str'+'ucture\x0afn\x20'+'initSource'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20let\x20w:\x20u3'+'2\x20=\x20textur'+'eDimension'+'s(splatOrd'+'er,\x200).x;\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20u3'+'2(vertex_p'+'osition.z)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'return\x20if\x20'+'out\x20of\x20ran'+'ge\x20(since\x20'+'the\x20last\x20b'+'lock\x20of\x20sp'+'lats\x20may\x20b'+'e\x20partiall'+'y\x20full)\x0a\x20\x20'+'\x20\x20if\x20(sour'+'ce.order\x20>'+'=\x20uniform.'+'numSplats)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20fa'+'lse;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'orderUV\x20=\x20'+'vec2i(vec2'+'u(source.o'+'rder\x20%\x20w,\x20'+'source.ord'+'er\x20/\x20w));\x0a'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20splat\x20i'+'d\x0a\x20\x20\x20\x20sour'+'ce.id\x20=\x20te'+'xtureLoad('+'splatOrder'+',\x20orderUV,'+'\x200).r;\x0a\x0a\x20\x20'+'\x20\x20//\x20map\x20i'+'d\x20to\x20uv\x0a\x20\x20'+'\x20\x20source.u'+'v\x20=\x20vec2i('+'vec2u(sour'+'ce.id\x20%\x20w,'+'\x20source.id'+'\x20/\x20w));\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+('turn\x20true;'+'\x0a}\x0a'),TM='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a#ifn'+'def\x20DITHER'+'_NONE\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0aconst'+'\x20discardVe'+'c:\x20vec4f\x20='+'\x20vec4f(0.0'+',\x200.0,\x202.0'+',\x201.0);\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20varying'+'\x20vLinearDe'+'pth:\x20f32;\x0a'+'#endif\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20gaussian\x20'+'details\x0a\x20\x20'+'\x20\x20var\x20sour'+'ce:\x20SplatS'+'ource;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Source(&so'+'urce))\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.positi'+'on\x20=\x20disca'+'rdVec;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20let\x20model'+'Center:\x20ve'+'c3f\x20=\x20read'+'Center(&so'+'urce);\x0a\x0a\x20\x20'+'\x20\x20var\x20cent'+'er:\x20SplatC'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'&center))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20di'+'scardVec;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20pro'+'ject\x20cente'+'r\x20to\x20scree'+'n\x20space\x0a\x20\x20'+'\x20\x20var\x20corn'+'er:\x20SplatC'+'orner;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Corner(&so'+'urce,\x20&cen'+'ter,\x20&corn'+'er))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20clr:\x20vec4'+'f\x20=\x20readCo'+'lor(&sourc'+'e);\x0a\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'AA\x20compens'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr.a\x20'+('=\x20clr.a\x20*\x20'+'corner.aaF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20spher'+'ical\x20harmo'+'nics\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x200\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cal'+'culate\x20the'+'\x20model-spa'+'ce\x20view\x20di'+'rection\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'modelView3'+'x3\x20=\x20mat3x'+'3f(center.'+'modelView['+'0].xyz,\x20ce'+'nter.model'+'View[1].xy'+'z,\x20center.'+'modelView['+'2].xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dir\x20=\x20nor'+'malize(mod'+'elView3x3\x20'+'*\x20center.v'+'iew);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'ad\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20sh:\x20array'+'<vec3f,\x20SH'+'_COEFFS>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20scale:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20readSHDa'+'ta(&source'+',\x20&sh,\x20&sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr\x20='+'\x20vec4f(clr'+'.xyz\x20+\x20eva'+'lSH(&sh,\x20d'+'ir)\x20*\x20scal'+'e,\x20clr.a);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(&c'+'orner,\x20clr'+'.w);\x0a\x0a\x20\x20\x20\x20'+'//\x20write\x20o'+'utput\x0a\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4f(co'+'rner.offse'+'t,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20ou'+'tput.gauss'+'ianUV\x20=\x20co'+'rner.uv;\x0a\x20'+'\x20\x20\x20output.'+'gaussianCo'+'lor\x20=\x20vec4'+'f(prepareO'+'utputFromG'+'amma(max(c'+'lr.xyz,\x20ve'+'c3f(0.0)))'+',\x20clr.w);\x0a'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'id\x20=\x20f32(s'+'ource.id);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vLinearD'+'epth\x20=\x20-ce'+'nter.view.'+'z;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),wM='\x0a\x20\x20\x20\x20attri'+'bute\x20aPosi'+'tion:\x20vec2'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20uv0:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20@vertex\x20f'+'n\x20vertexMa'+'in(input:\x20'+'VertexInpu'+'t)\x20->\x20Vert'+'exOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20vec4f(inp'+'ut.aPositi'+'on,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'uv0\x20=\x20getI'+'mageEffect'+'UV((input.'+'aPosition\x20'+'+\x201.0)\x20*\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a',EM='\x0a//\x20Indire'+'ct\x20indexed'+'\x20draw\x20call'+'\x20parameter'+'s\x0astruct\x20D'+'rawIndexed'+'IndirectAr'+'gs\x20{\x0a\x20\x20\x20\x20i'+'ndexCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Numb'+'er\x20of\x20indi'+'ces\x20to\x20dra'+'w\x0a\x20\x20\x20\x20inst'+'anceCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20instanc'+'es\x20to\x20draw'+'\x0a\x20\x20\x20\x20first'+'Index:\x20u32'+',\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Index\x20of'+'\x20the\x20first'+'\x20index\x20in\x20'+'the\x20index\x20'+'buffer\x0a\x20\x20\x20'+'\x20baseVerte'+'x:\x20i32,\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Of'+'fset\x20added'+'\x20to\x20each\x20i'+'ndex\x20befor'+'e\x20fetching'+'\x20vertex\x0a\x20\x20'+'\x20\x20firstIns'+'tance:\x20u32'+'\x20\x20\x20\x20\x20\x20//\x20F'+'irst\x20insta'+'nce\x20ID\x0a};\x0a'+'\x0a//\x20Indire'+'ct\x20non-ind'+'exed\x20draw\x20'+'call\x20param'+'eters\x0astru'+'ct\x20DrawInd'+'irectArgs\x20'+'{\x0a\x20\x20\x20\x20vert'+'exCount:\x20u'+'32,\x20\x20\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20vertice'+'s\x20to\x20draw\x0a'+'\x20\x20\x20\x20instan'+'ceCount:\x20u'+'32,\x20\x20\x20\x20\x20//'+'\x20Number\x20of'+'\x20instances'+'\x20to\x20draw\x0a\x20'+'\x20\x20\x20firstVe'+'rtex:\x20u32,'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Index\x20of\x20t'+'he\x20first\x20v'+'ertex\x0a\x20\x20\x20\x20'+'firstInsta'+'nce:\x20u32,\x20'+'\x20\x20\x20\x20//\x20Fir'+'st\x20instanc'+'e\x20ID\x0a\x20\x20\x20\x20_'+'pad:\x20u32\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Padd'+'ing\x20to\x20mat'+'ch\x20indexed'+'\x20size\x20(unu'+'sed)\x0a};\x0a',bM='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gamma'+'PS\x22\x0a\x20\x20\x20\x20va'+'rying\x20colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(decodeGam'+'ma3(input.'+'color.rgb)'+'),\x20input.c'+'olor.a);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a',AM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20matr'+'ix_model:\x20'+'mat4x4f;\x0a\x20'+'\x20\x20\x20uniform'+'\x20matrix_vi'+'ewProjecti'+'on:\x20mat4x4'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output\x20:\x20V'+'ertexOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20inpu'+'t.vertex_c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20unifor'+'m.matrix_m'+'odel\x20*\x20inp'+'ut.vertex_'+'position;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',CM='\x0auniform\x20m'+'aterial_ir'+'idescenceR'+'efractionI'+'ndex:\x20f32;'+'\x0a\x0afn\x20iride'+'scence_ior'+'ToFresnelS'+'calar(tran'+'smittedIor'+':\x20f32,\x20inc'+'identIor:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(('+'transmitte'+'dIor\x20-\x20inc'+'identIor)\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'incidentIo'+'r),\x202.0);\x0a'+'}\x0a\x0afn\x20irid'+'escence_io'+'rToFresnel'+'Vec3(trans'+'mittedIor:'+'\x20vec3f,\x20in'+'cidentIor:'+'\x20f32)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'vec3f(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3f(inci'+'dentIor)),'+'\x20vec3f(2.0'+'));\x0a}\x0a\x0afn\x20'+'iridescenc'+'e_fresnelT'+'oIor(f0:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20sqrtF'+'0:\x20vec3f\x20='+'\x20sqrt(f0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20(vec3f(1'+'.0)\x20+\x20sqrt'+'F0)\x20/\x20(vec'+'3f(1.0)\x20-\x20'+'sqrtF0);\x0a}'+'\x0a\x0aconst\x20XY'+'Z_TO_REC70'+'9:\x20mat3x3f'+'\x20=\x20mat3x3f'+'(\x0a\x20\x20\x20\x20vec3'+'f(3.240454'+'2,\x20-1.5371'+'385,\x20-0.49'+'85314),\x0a\x20\x20'+'\x20\x20vec3f(-0'+'.9692660,\x20'+'\x201.8760108'+',\x20\x200.04155'+'60),\x0a\x20\x20\x20\x20v'+'ec3f(0.055'+'6434,\x20-0.2'+'040259,\x20\x201'+'.0572252)\x0a'+');\x0a\x0afn\x20iri'+'descence_s'+'ensitivity'+'(opd:\x20f32,'+'\x20shift:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x20\x20\x20\x20let'+'\x20phase:\x20f3'+'2\x20=\x202.0\x20*\x20'+'PI\x20*\x20opd\x20*'+'\x201.0e-9;\x0a\x20'+'\x20\x20\x20const\x20v'+'al:\x20vec3f\x20'+'=\x20vec3f(5.'+'4856e-13,\x20'+'4.4201e-13'+',\x205.2481e-'+'13);\x0a\x20\x20\x20\x20c'+'onst\x20pos:\x20'+'vec3f\x20=\x20ve'+'c3f(1.6810'+'e+06,\x201.79'+('53e+06,\x202.'+'2084e+06);'+'\x0a\x20\x20\x20\x20const'+'\x20var_:\x20vec'+'3f\x20=\x20vec3f'+'(4.3278e+0'+'9,\x209.3046e'+'+09,\x206.612'+'1e+09);\x0a\x0a\x20'+'\x20\x20\x20var\x20xyz'+':\x20vec3f\x20=\x20'+'val\x20*\x20sqrt'+'(2.0\x20*\x20PI\x20'+'*\x20var_)\x20*\x20'+'cos(pos\x20*\x20'+'phase\x20+\x20sh'+'ift)\x20*\x20exp'+'(-pow(phas'+'e,\x202.0)\x20*\x20'+'var_);\x0a\x20\x20\x20'+'\x20xyz.x\x20=\x20x'+'yz.x\x20+\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+'cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20=\x20xyz\x20/\x20v'+'ec3f(1.068'+'5e-07);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'XYZ_TO_REC'+'709\x20*\x20xyz;'+'\x0a}\x0a\x0afn\x20iri'+'descence_f'+'resnelScal'+'ar(cosThet'+'a:\x20f32,\x20f0'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20x:\x20f32'+'\x20=\x20clamp(1'+'.0\x20-\x20cosTh'+'eta,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'let\x20x2:\x20f3'+'2\x20=\x20x\x20*\x20x;'+'\x0a\x20\x20\x20\x20let\x20x'+'5:\x20f32\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x0a\x0afn'+'\x20iridescen'+'ce_fresnel'+'Vec3(cosTh'+'eta:\x20f32,\x20'+'f0:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'x:\x20f32\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'x2:\x20f32\x20=\x20'+'x\x20*\x20x;\x0a\x20\x20\x20'+'\x20let\x20x5:\x20f'+'32\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x0a\x20\x20'+'\x20\x20return\x20f'+'0\x20+\x20(vec3f'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0afn\x20calcIr'+'idescence('+'outsideIor'+':\x20f32,\x20cos'+'Theta:\x20f32'+',\x20base_f0:'+'\x20vec3f,\x20ir'+'idescenceT'+'hickness:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0a\x20\x20\x20\x20le'+'t\x20iridesce'+'nceIor:\x20f3'+'2\x20=\x20mix(ou')+('tsideIor,\x20'+'uniform.ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20let\x20s'+'inTheta2Sq'+':\x20f32\x20=\x20po'+'w(outsideI'+'or\x20/\x20iride'+'scenceIor,'+'\x202.0)\x20*\x20(1'+'.0\x20-\x20pow(c'+'osTheta,\x202'+'.0));\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2Sq:\x20f32'+'\x20=\x201.0\x20-\x20s'+'inTheta2Sq'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(cosTheta2'+'Sq\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3f(1.0);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2:\x20f32\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20let\x20r'+'0:\x20f32\x20=\x20i'+'ridescence'+'_iorToFres'+'nelScalar('+'iridescenc'+'eIor,\x20outs'+'ideIor);\x0a\x20'+'\x20\x20\x20let\x20r12'+':\x20f32\x20=\x20ir'+'idescence_'+'fresnelSca'+'lar(cosThe'+'ta,\x20r0);\x0a\x20'+'\x20\x20\x20let\x20r21'+':\x20f32\x20=\x20r1'+'2;\x0a\x20\x20\x20\x20let'+'\x20t121:\x20f32'+'\x20=\x201.0\x20-\x20r'+'12;\x0a\x0a\x20\x20\x20\x20l'+'et\x20phi12:\x20'+'f32\x20=\x20sele'+'ct(0.0,\x20PI'+',\x20iridesce'+'nceIor\x20<\x20o'+'utsideIor)'+';\x0a\x20\x20\x20\x20let\x20'+'phi21:\x20f32'+'\x20=\x20PI\x20-\x20ph'+'i12;\x0a\x0a\x20\x20\x20\x20'+'let\x20baseIo'+'r:\x20vec3f\x20='+'\x20iridescen'+'ce_fresnel'+'ToIor(base'+'_f0\x20+\x20vec3'+'f(0.0001))'+';\x0a\x20\x20\x20\x20let\x20'+'r1:\x20vec3f\x20'+'=\x20iridesce'+'nce_iorToF'+'resnelVec3'+'(baseIor,\x20'+'iridescenc'+'eIor);\x0a\x20\x20\x20'+'\x20let\x20r23:\x20'+'vec3f\x20=\x20ir'+'idescence_'+'fresnelVec'+'3(cosTheta'+'2,\x20r1);\x0a\x0a\x20'+'\x20\x20\x20let\x20phi'+'23:\x20vec3f\x20'+'=\x20select(v'+'ec3f(0.0),'+'\x20vec3f(PI)'+',\x20baseIor\x20'+'<\x20vec3f(ir'+'idescenceI'+'or));\x0a\x20\x20\x20\x20'+'let\x20opd:\x20f'+'32\x20=\x202.0\x20*'+'\x20iridescen'+'ceIor\x20*\x20ir'+'idescenceT')+('hickness\x20*'+'\x20cosTheta2'+';\x0a\x20\x20\x20\x20let\x20'+'phi:\x20vec3f'+'\x20=\x20vec3f(p'+'hi21)\x20+\x20ph'+'i23;\x20//\x20Pr'+'omote\x20scal'+'ar\x20phi21\x20t'+'o\x20vec3f\x0a\x0a\x20'+'\x20\x20\x20let\x20r12'+'3Sq:\x20vec3f'+'\x20=\x20clamp(v'+'ec3f(r12)\x20'+'*\x20r23,\x20vec'+'3f(1e-5),\x20'+'vec3f(0.99'+'99));\x0a\x20\x20\x20\x20'+'let\x20r123:\x20'+'vec3f\x20=\x20sq'+'rt(r123Sq)'+';\x0a\x20\x20\x20\x20let\x20'+'rs:\x20vec3f\x20'+'=\x20pow(vec3'+'f(t121),\x20v'+'ec3f(2.0))'+'\x20*\x20r23\x20/\x20('+'vec3f(1.0)'+'\x20-\x20r123Sq)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20c0:\x20vec3f'+'\x20=\x20vec3f(r'+'12)\x20+\x20rs;\x0a'+'\x20\x20\x20\x20var\x20i_'+'irid:\x20vec3'+'f\x20=\x20c0;\x0a\x0a\x20'+'\x20\x20\x20var\x20cm:'+'\x20vec3f\x20=\x20r'+'s\x20-\x20vec3f('+'t121);\x0a\x0a\x20\x20'+'\x20\x20cm\x20=\x20cm\x20'+'*\x20r123;\x0a\x20\x20'+'\x20\x20let\x20sm1:'+'\x20vec3f\x20=\x202'+'.0\x20*\x20iride'+'scence_sen'+'sitivity(1'+'.0\x20*\x20opd,\x20'+'1.0\x20*\x20phi)'+';\x0a\x20\x20\x20\x20i_ir'+'id\x20=\x20i_iri'+'d\x20+\x20cm\x20*\x20s'+'m1;\x0a\x0a\x20\x20\x20\x20c'+'m\x20=\x20cm\x20*\x20r'+'123;\x0a\x20\x20\x20\x20l'+'et\x20sm2:\x20ve'+'c3f\x20=\x202.0\x20'+'*\x20iridesce'+'nce_sensit'+'ivity(2.0\x20'+'*\x20opd,\x202.0'+'\x20*\x20phi);\x0a\x20'+'\x20\x20\x20i_irid\x20'+'=\x20i_irid\x20+'+'\x20cm\x20*\x20sm2;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20max(i_i'+'rid,\x20vec3f'+'(0.0));\x0a}\x0a'+'\x0afn\x20getIri'+'descenceDi'+'ffraction('+'cosTheta:\x20'+'f32,\x20specu'+'larity:\x20ve'+'c3f,\x20iride'+'scenceThic'+'kness:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),PM='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_irides'+'cence:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getIrid'+'escence()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'iridescenc'+'e\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_CON'+'STANT\x0a\x20\x20\x20\x20'+'iridescenc'+'e\x20=\x20irides'+'cence\x20*\x20un'+'iform.mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20=\x20iridesc'+'ence\x20*\x20tex'+'tureSample'+'Bias({STD_'+'IRIDESCENC'+'E_TEXTURE_'+'NAME},\x20{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_CHANNEL}'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dI'+'ridescence'+'\x20=\x20iridesc'+'ence;\x20\x0a}\x0a',MM='\x0auniform\x20m'+'aterial_ir'+'idescenceT'+'hicknessMa'+'x:\x20f32;\x0a\x0a#'+'ifdef\x20STD_'+'IRIDESCENC'+'ETHICKNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20uniform'+'\x20material_'+'iridescenc'+'eThickness'+'Min:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20blen'+'d:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_IRIDESCE'+'NCETHICKNE'+'SS_TEXTURE'+'_NAME},\x20{S'+'TD_IRIDESC'+'ENCETHICKN'+'ESS_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20iridesce'+'nceThickne'+'ss:\x20f32\x20=\x20'+'mix(unifor'+'m.material'+'_iridescen'+'ceThicknes'+'sMin,\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax,\x20bl'+'end);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceT'+'hickness:\x20'+'f32\x20=\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scenceThic'+'kness\x20=\x20ir'+'idescenceT'+'hickness;\x20'+'\x0a}\x0a',DM='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_refr'+'actionInde'+'x:\x20f32;\x0a#e'+'ndif\x0a\x0afn\x20g'+'etIor()\x20{\x0a'+'#ifdef\x20STD'+'_IOR_CONST'+'ANT\x0a\x20\x20\x20\x20dI'+'or\x20=\x20unifo'+'rm.materia'+'l_refracti'+'onIndex;\x0a#'+'else\x0a\x20\x20\x20\x20d'+'Ior\x20=\x201.0\x20'+'/\x201.5;\x0a#en'+'dif\x0a}\x0a',IM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_color'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_direction'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_POINT\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20poi'+'nt\x20lights\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20lig'+'ht{i}_posi'+'tion:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ra'+'dius:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'SPOT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_SPOT\x20//\x20'+'include\x20fu'+'nctionalit'+'y\x20for\x20spot'+'\x20lights\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_di'+'rection:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_inner'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_outer'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20//\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_FALLOFF_'+'SQUARED\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20inv'+'erse\x20squar'+'ed\x20falloff'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_position:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ha'+'lfWidth:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_halfHeigh'+'t:\x20vec3f;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}FALLOFF\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_LINE'+'AR\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20linear\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}FALLOFF'+'\x20==\x20INVERS'+'ESQUARED\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_SQUA'+'RED\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20inverse'+'\x20squared\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20shadow\x20c'+'asting\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowMatri'+'x:\x20mat4x4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20li'+'ght{i}_sha'+'dowIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'{i}_shadow'+'Params:\x20ve'+'c4f;\x20//\x20wi'+'dth,\x20heigh'+'t,\x20bias,\x20r'+'adius\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowSearc'+'hArea:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_cameraPar'+'ams:\x20vec4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'oftShadowP'+'arams:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'directiona'+'l\x20(cascade'+'d)\x20shadows'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20light{i}_'+'shadowMatr'+'ixPalette:'+'\x20array<mat'+'4x4f,\x204>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deDistance'+'s:\x20vec4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deCount:\x20i'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20light{'+'i}_shadowC'+'ascadeBlen'+'d:\x20f32;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20N'+'OT\x20SUPPORT'+'ED\x0a/*\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIG'+'HT{i}SHADO'+'W_PCF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMap:\x20tex'+'ture_depth'+'_2d;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'{i}_shadow'+'MapSampler'+':\x20sampler_'+'comparison'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'light{i}_s'+'hadowMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMapSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIGHT{i}CO'+'OKIE)\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_COOKIE\x20/'+'/\x20include\x20'+'functional'+'ity\x20for\x20co'+'okies\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20OMNI\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20NOT\x20SUPP'+'ORTED\x0a/*\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'plerCube\x20l'+'ight{i}_co'+'okie;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un')+('iform\x20floa'+'t\x20light{i}'+'_cookieInt'+'ensity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20!defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20light{i}'+'_shadowMat'+'rix;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20NO'+'T\x20SUPPORTE'+'D\x0a/*\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_cookie;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_cook'+'ieIntensit'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20!'+'defined(LI'+'GHT{i}CAST'+'SHADOW)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrix;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}COOKIE_TR'+'ANSFORM)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_coo'+'kieMatrix;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20vec2\x20'+'light{i}_c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a*/\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),LM='\x0afn\x20getLig'+'htDiffuse('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',RM='\x0afn\x20evalOm'+'niLight(li'+'ghtPosW:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20vP'+'ositionW\x20-'+'\x20lightPosW'+';\x0a}\x0a',OM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',FM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0afn\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x20\x20\x20'+'\x20//\x20light\x20'+'color\x0a\x20\x20\x20\x20'+'var\x20lightC'+'olor:\x20vec3'+'f\x20=\x20unifor'+'m.light{i}'+'_color;\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20!d'+'efined(LIT'+'_SHADOW_CA'+'TCHER)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ea'+'rly\x20return'+'\x20if\x20the\x20li'+'ght\x20color\x20'+'is\x20black\x20('+'used\x20by\x20sh'+'adow\x20catch'+'er\x20-\x20this\x20'+'way\x20this\x20l'+'ight\x20is\x20ve'+'ry\x20cheap)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(all(ligh'+'tColor\x20==\x20'+'vec3f(0.0,'+'\x200.0,\x200.0)'+'))\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20DIRECTION'+'AL\x20//\x20dire'+'ctional\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightD'+'irNormW\x20=\x20'+'uniform.li'+'ght{i}_dir'+'ection;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20omni\x20o'+'r\x20spot\x20lig'+'ht\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(u'+'niform.lig'+'ht{i}_posi'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tDirNormW\x20'+'=\x20normaliz'+'e(lightDir'+'W);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIGHT'+'{i}COOKIE)'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20SPOT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_FAL'+'LOFF\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+('eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DXform(u'+'niform.lig'+'ht{i}_cook'+'ie,\x20unifor'+'m.light{i}'+'_shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_cookieIn'+'tensity,\x20u'+'niform.lig'+'ht{i}_cook'+'ieMatrix,\x20'+'uniform.li'+'ght{i}_coo'+'kieOffset)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookie2D('+'uniform.li'+'ght{i}_coo'+'kie,\x20unifo'+'rm.light{i'+'}_shadowMa'+'trix,\x20unif'+'orm.light{'+'i}_cookieI'+'ntensity).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClipXfo'+'rm(uniform'+'.light{i}_'+'cookie,\x20un'+'iform.ligh'+'t{i}_shado'+'wMatrix,\x20u'+'niform.lig'+'ht{i}_cook'+'ieIntensit'+'y,\x20uniform'+'.light{i}_'+'cookieMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieOff'+'set).{LIGH'+'T{i}COOKIE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClip(un'+'iform.ligh'+'t{i}_cooki'+'e,\x20uniform'+'.light{i}_'+'shadowMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieInt'+'ensity).{L'+'IGHT{i}COO'+'KIE_CHANNE'+'L};\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookieCub'+'e(uniform.'+'light{i}_c'+'ookie,\x20uni'+'form.light'+'{i}_shadow'+'Matrix,\x20un'+'iform.ligh'+'t{i}_cooki'+'eIntensity'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multipl'+'y\x20light\x20co'+'lor\x20by\x20the'+'\x20cookie\x20at'+'tenuation\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightCol'+'or\x20=\x20light'+'Color\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dista'+'nce\x20fallof'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20PUNCTUAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}FALLOF'+'F\x20==\x20LINEA'+'R\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20=\x20get'+'FalloffLin'+'ear(unifor'+'m.light{i}'+'_radius,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20getFal'+'loffInvSqu'+'ared(unifo'+'rm.light{i'+'}_radius,\x20'+'lightDirW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'non\x20punctu'+'al\x20lights\x20'+'only\x20gets\x20'+'the\x20range\x20'+'window\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20getFall'+'offWindow('+'uniform.li'+'ght{i}_rad'+'ius,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20angle'+'\x20falloff\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20SPO'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d')+('efined(LIG'+'HT{i}COOKI'+'E)\x20||\x20defi'+'ned(LIGHT{'+'i}COOKIE_F'+'ALLOFF)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20dAtten\x20'+'*\x20getSpotE'+'ffect(unif'+'orm.light{'+'i}_directi'+'on,\x20unifor'+'m.light{i}'+'_innerCone'+'Angle,\x20uni'+'form.light'+'{i}_outerC'+'oneAngle,\x20'+'dLightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20if\x20'+'(dAtten\x20<\x20'+'0.00001)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20evaluate\x20'+'area\x20light'+'\x20values\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20RECT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcRectLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20calcDiskL'+'ightValues'+'(uniform.l'+'ight{i}_po'+'sition,\x20un'+'iform.ligh'+'t{i}_halfW'+'idth,\x20unif'+'orm.light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20SPH'+'ERE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20calc'+'SphereLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20dif'+'fuse\x20light'+'ing\x20-\x20LTC\x20'+'lights\x20do\x20'+'not\x20mix\x20di'+'ffuse\x20ligh'+'ting\x20into\x20'+'attenuatio'+'n\x20that\x20aff'+'ects\x20specu'+'lar\x0a\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P')+('UNCTUAL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'attenDiffu'+'se\x20-\x20separ'+'ate\x20diffus'+'e\x20attenuat'+'ion\x20for\x20no'+'n-punctual'+'\x20light\x20sou'+'rces\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20NB:\x20A\x20bet'+'ter\x20approx'+'imation\x20pe'+'rhaps\x20usin'+'g\x20wrap\x20lig'+'hting\x20coul'+'d\x20be\x20imple'+'mented\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20at'+'tenDiffuse'+':\x20f32\x20=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x2016.0\x20is\x20'+'a\x20constant'+'\x20that\x20is\x20i'+'n\x20getFallo'+'ffInvSquar'+'ed()\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20attenDi'+'ffuse:\x20f32'+'\x20=\x20getRect'+'LightDiffu'+'se(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20light'+'DirW,\x20dLig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20DISK\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'attenDiffu'+'se:\x20f32\x20=\x20'+'getDiskLig'+'htDiffuse('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20lightDir'+'W,\x20dLightD'+'irNormW)\x20*'+'\x2016.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20LIGHT'+'{i}SHAPE\x20='+'=\x20SPHERE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20a'+'ttenDiffus'+'e:\x20f32\x20=\x20g'+'etSphereLi'+'ghtDiffuse'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20lightDi'+'rW,\x20dLight'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20one\x20par'+'ameter\x20is\x20'+'unused\x20for')+('\x20punctual\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20dAtten'+'\x20*\x20getLigh'+'tDiffuse(l'+'itArgs_wor'+'ldNormal,\x20'+'vec3(0.0),'+'\x20dLightDir'+'NormW);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20the\x20sha'+'dow\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}CASTS'+'HADOW\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20shadow:'+'\x20f32\x20=\x20get'+'Shadow{i}('+'vec3(0.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20shadow:\x20'+'f32\x20=\x20getS'+'hadow{i}(l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Ap'+'ply\x20shadow'+'\x20intensity'+'\x20to\x20the\x20sh'+'adow\x20value'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadow\x20=\x20mi'+'x(1.0,\x20sha'+'dow,\x20unifo'+'rm.light{i'+'}_shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20dA'+'tten\x20*\x20sha'+'dow;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'SHADOW_CAT'+'CHER)\x20&&\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20accumula'+'te\x20shadows'+'\x20for\x20direc'+'tional\x20lig'+'hts\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSha'+'dowCatcher'+'\x20=\x20dShadow'+'Catcher\x20*\x20'+'shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20-\x20they'+'\x20do\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((('+'attenDiffu'+'se\x20*\x20dAtte'+'n)\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20dLTC'+'SpecFres))')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'((attenDif'+'fuse\x20*\x20dAt'+'ten)\x20*\x20lig'+'htColor);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(AREA_'+'LIGHTS)\x20&&'+'\x20defined(L'+'IT_SPECULA'+'R)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((d'+'Atten\x20*\x20li'+'ghtColor)\x20'+'*\x20(1.0\x20-\x20l'+'itArgs_spe'+'cularity))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'(dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20spe'+'cular\x20ligh'+'ting\x0a\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}AFFECT'+'_SPECULARI'+'TY\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20==\x20REC'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getRe'+'ctLightSpe'+'cular(litA'+'rgs_clearc'+'oat_worldN'+'ormal,\x20dVi'+'ewDirW)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20=\x20ccSpec'+'ularLight\x20'+'+\x20(ccLTCSp'+'ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20SPHER'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_clea'+'rcoat_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20=\x20dS'+'pecularLig'+'ht\x20+\x20(dLTC'+'SpecFres\x20*'+'\x20getRectLi'+'ghtSpecula'+'r(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20(dLT'+'CSpecFres\x20'+'*\x20getDiskL'+'ightSpecul'+'ar(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW)\x20*\x20dAt'+'ten\x20*\x20ligh'+'tColor);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'=\x20dSpecula'+'rLight\x20+\x20('+'dLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20//\x20punctu'+'al\x20light\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20is\x20fr'+'esnel\x20need'+'ed\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC')+('TIONAL\x20&&\x20'+'LIT_FRESNE'+'L_MODEL\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ha'+'lfDirW:\x20ve'+'c3f\x20=\x20norm'+'alize(-dLi'+'ghtDirNorm'+'W\x20+\x20dViewD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20if\x20LTC\x20li'+'ghts\x20are\x20p'+'resent,\x20sp'+'ecular\x20mus'+'t\x20be\x20accum'+'ulated\x20wit'+'h\x20specular'+'ity\x20(specu'+'larity\x20is\x20'+'pre\x20multip'+'lied\x20by\x20pu'+'nctual\x20lig'+'ht\x20fresnel'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'specularCC'+':\x20vec3f\x20=\x20'+'getLightSp'+'ecular(hal'+'fDirW,\x20ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20dLightDir'+'NormW,\x20lit'+'Args_clear'+'coat_gloss'+',\x20dTBN)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightspecu'+'larCC\x20=\x20li'+'ghtspecula'+'rCC\x20*\x20getF'+'resnelCC(d'+'ot(dViewDi'+'rW,\x20halfDi'+'rW));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20=\x20ccSpecu'+'larLight\x20+'+'\x20lightspec'+'ularCC;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sSpecul'+'arLight\x20=\x20'+'sSpecularL'+'ight\x20+\x20(ge'+'tLightSpec'+'ularSheen('+'halfDirW,\x20'+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20dLightDi')+('rNormW,\x20li'+'tArgs_shee'+'n_gloss)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tSpecular:'+'\x20vec3f\x20=\x20g'+'etLightSpe'+'cular(half'+'DirW,\x20dRef'+'lDirW,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20d'+'LightDirNo'+'rmW,\x20litAr'+'gs_gloss,\x20'+'dTBN)\x20*\x20dA'+'tten\x20*\x20lig'+'htColor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'FRESNEL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20=\x20li'+'ghtSpecula'+'r\x20*\x20getFre'+'snel(dot(d'+'ViewDirW,\x20'+'halfDirW),'+'\x20litArgs_g'+'loss,\x20litA'+'rgs_specul'+'arity,\x20iri'+'descenceFr'+'esnel,\x20lit'+'Args_iride'+'scence_int'+'ensity);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightSpecul'+'ar\x20=\x20light'+'Specular\x20*'+'\x20getFresne'+'l(dot(dVie'+'wDirW,\x20hal'+'fDirW),\x20li'+'tArgs_glos'+'s,\x20litArgs'+'_speculari'+'ty);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20light'+'Specular\x20='+'\x20lightSpec'+'ular\x20*\x20lit'+'Args_specu'+'larity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20+\x20li'+'ghtSpecula'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'#endif\x0a'),NM='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowSam'+'pleCoord{i'+'}(shadowTr'+'ansform:\x20m'+'at4x4f,\x20sh'+'adowParams'+':\x20vec4f,\x20w'+'orldPositi'+'on:\x20vec3f,'+'\x20lightPos:'+'\x20vec3f,\x20li'+'ghtDir:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'lightDirNo'+'rm:\x20vec3f,'+'\x20normal:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'surfacePos'+'ition\x20=\x20wo'+'rldPositio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_POINT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+'NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(*l'+'ightDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20surfac'+'ePosition\x20'+'+\x20normal\x20*'+'\x20shadowPar'+'ams.y\x20*\x20cl'+'amp(1.0\x20-\x20'+'dot(normal'+',\x20-lightDi'+'rNorm),\x200.'+'0,\x201.0)\x20*\x20'+'distScale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20*li'+'ghtDir\x20=\x20s'+'urfacePosi'+'tion\x20-\x20lig'+'htPos;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'*lightDir;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}_SHADOW_'+'SAMPLE_NOR'+'MAL_OFFSET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_SAMP'+'LE_ORTHO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dis'+'tScale:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20distSca'+'le:\x20f32\x20=\x20'+'abs(dot(vP'+'ositionW\x20-'+'\x20lightPos,'+'\x20lightDirN'+'orm));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Use'+'\x20var\x20for\x20m'+'odificatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20po'+'sitionInSh'+'adowSpace:'+'\x20vec4f\x20=\x20s'+'hadowTrans'+'form\x20*\x20vec'+'4f(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM')+('PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20=\x20pos'+'itionInSha'+'dowSpace.x'+'yz\x20/\x20posit'+'ionInShado'+'wSpace.w;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+'InShadowSp'+'ace.xy\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xy\x20/\x20posi'+'tionInShad'+'owSpace.w;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20positionI'+'nShadowSpa'+'ce.z\x20=\x20len'+'gth(*light'+'Dir)\x20*\x20sha'+'dowParams.'+'w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20this\x20is\x20c'+'urrently\x20u'+'nused\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SHADO'+'W_SAMPLE_Z'+'_BIAS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20posit'+'ionInShado'+'wSpace.z\x20+'+'=\x20getShado'+'wBias(shad'+'owParams.x'+',\x20shadowPa'+'rams.z);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20sur'+'facePositi'+'on;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20evalu'+'ation\x20func'+'tion\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'w{i}(light'+'DirW_in:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20s'+'hadow\x20casc'+'ades\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_CASC'+'ADES\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20select\x20sh'+'adow\x20casca'+'de\x20matrix\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20casc'+'adeIndex:\x20'+'i32\x20=\x20getS'+'hadowCasca'+'deIndex(un'+'iform.ligh'+'t{i}_shado'+'wCascadeDi'+'stances,\x20u'+'niform.lig'+'ht{i}_shad')+('owCascadeC'+'ount);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_CASCADE'+'_BLEND\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20cascade'+'Index\x20=\x20di'+'therShadow'+'CascadeInd'+'ex(cascade'+'Index,\x20uni'+'form.light'+'{i}_shadow'+'CascadeDis'+'tances,\x20un'+'iform.ligh'+'t{i}_shado'+'wCascadeCo'+'unt,\x20unifo'+'rm.light{i'+'}_shadowCa'+'scadeBlend'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowMatri'+'x:\x20mat4x4f'+'\x20=\x20uniform'+'.light{i}_'+'shadowMatr'+'ixPalette['+'cascadeInd'+'ex];\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20sha'+'dowMatrix:'+'\x20mat4x4f\x20='+'\x20uniform.l'+'ight{i}_sh'+'adowMatrix'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20lightDirA'+'rg\x20=\x20light'+'DirW_in;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20direc'+'tional\x20lig'+'ht\x20does\x20no'+'t\x20have\x20a\x20p'+'osition\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20getSh'+'adowSample'+'Coord{i}(s'+'hadowMatri'+'x,\x20uniform'+'.light{i}_'+'shadowPara'+'ms,\x20vPosit'+'ionW,\x20vec3'+'f(0.0),\x20&l'+'ightDirArg'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owCoord:\x20v'+'ec3f\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_shadowPa'+'rams,\x20vPos'+'itionW,\x20un'+'iform.ligh'+'t{i}_posit'+'ion,\x20&ligh'+'tDirArg,\x20d'+'LightDirNo'+'rmW,\x20dVert'+'exNormalW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('#endif\x0a\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Fade\x20direc'+'tional\x20sha'+'dow\x20at\x20the'+'\x20far\x20dista'+'nce\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'owCoord\x20=\x20'+'fadeShadow'+'(shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowCas'+'cadeDistan'+'ces);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20-----\x20s'+'ample\x20the\x20'+'shadow\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20---'+'--\x20directi'+'onal\x20light'+'\x20-----\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20VSM_'+'16F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowVSM1'+'6(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s,\x205.54);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20VS'+'M_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowVS'+'M32(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x2015.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2f(lengt'+'h(uniform.'+'light{i}_h'+'alfWidth),'+'\x20length(un'+'iform.ligh'+'t{i}_halfH'+'eight))\x20*\x20'+'uniform.li'+'ght{i}_sha'+'dowSearchA'+'rea;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCSS(ligh'+'t{i}_shado'+'wMap,\x20ligh'+'t{i}_shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20unif'+'orm.light{'+'i}_shadowP'+'arams,\x20uni'+'form.light'+'{i}_camera'+'Params,\x20sh'+'adowSearch'+'Area,\x20ligh'+'tDirW_in);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CSS(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x20unifo'+'rm.light{i'+'}_cameraPa'+'rams,\x20unif'+'orm.light{'+'i}_softSha'+'dowParams,'+'\x20lightDirW'+'_in);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF1_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF1x1('+'light{i}_s'+'hadowMap,\x20'+'light{i}_s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'uniform.li'+'ght{i}_sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_16F\x20|'+'|\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF3_3'+'2F\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowPCF3x'+'3(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_16F'+'\x20||\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF5')+('_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x20//\x20-'+'----\x20spot\x20'+'light\x20----'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM16'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x205.54,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM32'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x2015.0,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20!=\x20PU'+'NCTUAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f\x20=\x20vec'+'2f(length('+'uniform.li'+'ght{i}_hal'+'fWidth),\x20l'+'ength(unif'+'orm.light{'+'i}_halfHei'+'ght))\x20*\x20un'+'iform.ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowSearc'+'hArea:\x20vec')+('2f\x20=\x20vec2f'+'(uniform.l'+'ight{i}_sh'+'adowSearch'+'Area);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCSS'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x20uniform.'+'light{i}_c'+'ameraParam'+'s,\x20shadowS'+'earchArea,'+'\x20lightDirW'+'_in);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'16F\x20||\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF1_32F\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF1x1'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'5_16F\x20||\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF5_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCF5'+'x5(light{i'+'}_shadowMa'+'p,\x20light{i'+'}_shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20uniform'+'.light{i}_'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20')+('\x20\x20\x20#endif\x0a'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x20//\x20--'+'---\x20omni\x20l'+'ight\x20-----'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f;\x20//\x20U'+'se\x20var\x20bec'+'ause\x20assig'+'ned\x20in\x20if/'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owSearchAr'+'ea:\x20vec2f\x20'+'=\x20vec2f(le'+'ngth(unifo'+'rm.light{i'+'}_halfWidt'+'h),\x20length'+'(uniform.l'+'ight{i}_ha'+'lfHeight))'+'\x20*\x20uniform'+'.light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'SearchArea'+':\x20vec2f\x20=\x20'+'vec2f(unif'+'orm.light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20un'+'iform.ligh'+'t{i}_camer'+'aParams,\x20s'+'hadowSearc'+'hArea,\x20lig'+'htDirW_in)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in')+(');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),kM='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'var\x20areaLi'+'ghtsLutTex'+'1:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20areaLight'+'sLutTex2:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20areaL'+'ightsLutTe'+'x2Sampler:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'omni\x20/\x20spo'+'t\x20PCSS\x20is\x20'+('not\x20suppor'+'ted\x20on\x20Web'+'GPU\x20curren'+'tly,\x20as\x20th'+'is\x20is\x20only'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0a\x20\x20\x20\x20'+'//\x20#includ'+'e\x20\x22shadowP'+'CSSPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22shadowSof'+'tPS\x22\x0a#endi'+'f\x0a\x0a#if\x20def'+'ined(SHADO'+'W_KIND_VSM'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owEVSMPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22falloff'+'LinearPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_SQUARED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fallof'+'fInvSquare'+'dPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_CODE_L'+'IGHTS_POIN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDirPointP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22spotPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'CODE_COOKI'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22cook'+'iePS\x22\x0a#end'+'if\x0a\x0a//\x20clu'+'stered\x20lig'+'hting\x0a#ifd'+'ef\x20LIT_CLU'+'STERED_LIG'+'HTS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22cl'+'usteredLig'+'htPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIGHT_COU'+'NT\x20>\x200\x0a\x20\x20\x20'+'\x20//\x20LOOP\x20-'+'\x20generate\x20'+'shadow\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionShadow'+'PS,\x20LIGHT_'+'COUNT\x22\x0a\x0a\x20\x20'+'\x20\x20//\x20LOOP\x20'+'-\x20generate'+'\x20light\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionLightP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a'),UM='\x0afn\x20addLig'+'htMap(\x0a\x20\x20\x20'+'\x20lightmap:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20dir:\x20vec'+'3f,\x0a\x20\x20\x20\x20wo'+'rldNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20viewDir:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20reflecti'+'onDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20ve'+'rtexNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20tbn:\x20ma'+'t3x3f\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20iridesce'+'nceIntensi'+'ty:\x20f32\x0a#e'+'ndif\x0a)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x20&&'+'\x20defined(L'+'IT_DIR_LIG'+'HTMAP)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'dot(dir,\x20d'+'ir)\x20<\x200.00'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20dD'+'iffuseLigh'+'t\x20+\x20lightm'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20vli'+'ght:\x20f32\x20='+'\x20saturate('+'dot(dir,\x20-'+'vertexNorm'+'al));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20flight:\x20'+'f32\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20nlig'+'ht:\x20f32\x20=\x20'+'(flight\x20/\x20'+'max(vlight'+',\x200.01))\x20*'+'\x200.5;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20=\x20dDiff'+'useLight\x20+'+'\x20lightmap\x20'+'*\x20nlight\x20*'+'\x202.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20halfDir'+':\x20vec3f\x20=\x20'+'normalize('+'-dir\x20+\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20specula'+'rLight:\x20ve'+'c3f\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+('_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'=\x20specular'+'Light\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(d'+'ot(viewDir'+',\x20halfDir)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gloss,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20,\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceI'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20specularL'+'ight;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'non-direct'+'ional\x20ligh'+'tmap\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20+\x20ligh'+'tmap;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),BM='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'var<privat'+'e>\x20dLightm'+'apDir:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'dirLightMa'+'p:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_dirL'+'ightMapSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0afn\x20getL'+'ightMap()\x20'+'{\x0a\x0a\x20\x20\x20\x20dLi'+'ghtmap\x20=\x20v'+'ec3f(1.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_TEXTURE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Lightmap\x20='+'\x20dLightmap'+'\x20*\x20{STD_LI'+'GHT_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_LIGHT_T'+'EXTURE_NAM'+'E},\x20{STD_L'+'IGHT_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+')).{STD_LI'+'GHT_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_LIGHTMAP'+'_DIR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20dir:\x20vec3'+'f\x20=\x20textur'+'eSampleBia'+'s(texture_'+'dirLightMa'+'p,\x20texture'+'_dirLightM'+'apSampler,'+'\x20{STD_LIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).xyz\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20d'+'irDot\x20=\x20do'+'t(dir,\x20dir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tmapDir\x20=\x20'+'select(vec'+'3(0.0),\x20di'+'r\x20/\x20sqrt(d'+'irDot),\x20di'+'rDot\x20>\x200.0'+'01);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dL'+'ightmap\x20=\x20'+'dLightmap\x20'+'*\x20saturate'+'(vVertexCo'+'lor.{STD_L'+'IGHT_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a',zM='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'fn\x20calcLig'+'htSpecular'+'(gloss:\x20f3'+'2,\x20worldNo'+'rmal:\x20vec3'+'f,\x20viewDir'+':\x20vec3f,\x20h'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'tbn:\x20mat3x'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20PI:\x20f32\x20='+'\x203.1415926'+'53589793;\x0a'+'\x20\x20\x20\x20let\x20ro'+'ughness:\x20f'+'32\x20=\x20max(('+'1.0\x20-\x20glos'+'s)\x20*\x20(1.0\x20'+'-\x20gloss),\x20'+'0.001);\x0a\x20\x20'+'\x20\x20let\x20alph'+'aRoughness'+':\x20f32\x20=\x20ro'+'ughness\x20*\x20'+'roughness;'+'\x0a\x20\x20\x20\x20let\x20a'+'nisotropy:'+'\x20f32\x20=\x20dAn'+'isotropy;\x0a'+'\x20\x20\x20\x20let\x20di'+'rection:\x20v'+'ec2f\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x0a\x20'+'\x20\x20\x20let\x20at:'+'\x20f32\x20=\x20mix'+'(alphaRoug'+'hness,\x201.0'+',\x20anisotro'+'py\x20*\x20aniso'+'tropy);\x0a\x20\x20'+'\x20\x20let\x20ab:\x20'+'f32\x20=\x20clam'+'p(alphaRou'+'ghness,\x200.'+'001,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20NoH:\x20f32\x20'+'=\x20dot(worl'+'dNormal,\x20h'+');\x0a\x20\x20\x20\x20let'+'\x20ToH:\x20f32\x20'+'=\x20dot(anis'+'otropicT,\x20'+'h);\x0a\x20\x20\x20\x20le'+'t\x20BoH:\x20f32'+'\x20=\x20dot(ani'+'sotropicB,'+'\x20h);\x0a\x0a\x20\x20\x20\x20'+'let\x20a2:\x20f3'+'2\x20=\x20at\x20*\x20a'+'b;\x0a\x20\x20\x20\x20let'+'\x20v:\x20vec3f\x20'+'=\x20vec3f(ab'+'\x20*\x20ToH,\x20at'+'\x20*\x20BoH,\x20a2'+'\x20*\x20NoH);\x0a\x20'+'\x20\x20\x20let\x20v2:'+'\x20f32\x20=\x20dot'+'(v,\x20v);\x0a\x20\x20'+'\x20\x20let\x20w2:\x20'+'f32\x20=\x20a2\x20/'+'\x20v2;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20let\x20To'+'V:\x20f32\x20=\x20d'+'ot(anisotr'+'opicT,\x20vie'+('wDir);\x0a\x20\x20\x20'+'\x20let\x20BoV:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20viewDi'+'r);\x0a\x20\x20\x20\x20le'+'t\x20ToL:\x20f32'+'\x20=\x20dot(ani'+'sotropicT,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20let\x20BoL:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20let\x20No'+'V:\x20f32\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'let\x20NoL:\x20f'+'32\x20=\x20dot(w'+'orldNormal'+',\x20-lightDi'+'rNorm);\x0a\x0a\x20'+'\x20\x20\x20let\x20lam'+'bdaV:\x20f32\x20'+'=\x20NoL\x20*\x20le'+'ngth(vec3f'+'(at\x20*\x20ToV,'+'\x20ab\x20*\x20BoV,'+'\x20NoV));\x0a\x20\x20'+'\x20\x20let\x20lamb'+'daL:\x20f32\x20='+'\x20NoV\x20*\x20len'+'gth(vec3f('+'at\x20*\x20ToL,\x20'+'ab\x20*\x20BoL,\x20'+'NoL));\x0a\x20\x20\x20'+'\x20let\x20G:\x20f3'+'2\x20=\x200.5\x20/\x20'+'(lambdaV\x20+'+'\x20lambdaL);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20D\x20*\x20G;\x0a'+'}\x0a\x0afn\x20getL'+'ightSpecul'+'ar(h:\x20vec3'+'f,\x20reflDir'+':\x20vec3f,\x20w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'DirNorm:\x20v'+'ec3f,\x20glos'+'s:\x20f32,\x20tb'+'n:\x20mat3x3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20calcLigh'+'tSpecular('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir,\x20h'+',\x20lightDir'+'Norm,\x20tbn)'+';\x0a}\x0a'),VM='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afn\x20c'+'alcLightSp'+'ecular(glo'+'ss:\x20f32,\x20w'+'orldNormal'+':\x20vec3f,\x20h'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20nh:\x20'+'f32\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'specPow:\x20f'+'32\x20=\x20exp2('+'gloss\x20*\x2011'+'.0);\x20//\x20gl'+'ossiness\x20i'+'s\x20linear,\x20'+'power\x20is\x20n'+'ot;\x200\x20-\x2020'+'48\x0a\x0a\x20\x20\x20\x20//'+'\x20Hack:\x20On\x20'+'Mac\x20OS\x20X,\x20'+'calling\x20po'+'w\x20with\x20zer'+'o\x20for\x20the\x20'+'exponent\x20g'+'enerates\x20h'+'ideous\x20art'+'ifacts\x20so\x20'+'bias\x20up\x20a\x20'+'little\x0a\x20\x20\x20'+'\x20specPow\x20='+'\x20max(specP'+'ow,\x200.0001'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20pow(n'+'h,\x20specPow'+')\x20*\x20(specP'+'ow\x20+\x202.0)\x20'+'/\x208.0;\x0a}\x0a\x0a'+'fn\x20getLigh'+'tSpecular('+'h:\x20vec3f,\x20'+'reflDir:\x20v'+'ec3f,\x20worl'+'dNormal:\x20v'+'ec3f,\x20view'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20tbn:\x20'+'mat3x3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',GM='\x0a\x0afn\x20sheen'+'D(normal:\x20'+'vec3f,\x20h:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'PI:\x20f32\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20let\x20inv'+'R:\x20f32\x20=\x201'+'.0\x20/\x20(roug'+'hness\x20*\x20ro'+'ughness);\x0a'+'\x20\x20\x20\x20var\x20co'+'s2h:\x20f32\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20=\x20c'+'os2h\x20*\x20cos'+'2h;\x0a\x20\x20\x20\x20le'+'t\x20sin2h:\x20f'+'32\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'fn\x20sheenV('+'normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20light:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20max(dot'+'(normal,\x20v'+'iewDir),\x200'+'.000001);\x0a'+'\x20\x20\x20\x20let\x20No'+'L:\x20f32\x20=\x20m'+'ax(dot(nor'+'mal,\x20light'+'),\x200.00000'+'1);\x0a\x20\x20\x20\x20re'+'turn\x201.0\x20/'+'\x20(4.0\x20*\x20(N'+'oL\x20+\x20NoV\x20-'+'\x20NoL\x20*\x20NoV'+'));\x0a}\x0a\x0afn\x20'+'getLightSp'+'ecularShee'+'n(h:\x20vec3f'+',\x20worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f,\x20li'+'ghtDirNorm'+':\x20vec3f,\x20s'+'heenGloss:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20let\x20V:\x20f'+'32\x20=\x20sheen'+'V(worldNor'+'mal,\x20viewD'+'ir,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20return'+'\x20D\x20*\x20V;\x0a}',HM='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afn\x20linear'+'izeDepthWi'+'thParams(z'+':\x20f32,\x20cam'+'eraParams:'+'\x20vec4f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20if\x20(camer'+'aParams.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(came'+'raParams.z'+'\x20*\x20cameraP'+'arams.y)\x20/'+'\x20(cameraPa'+'rams.y\x20+\x20z'+'\x20*\x20(camera'+'Params.z\x20-'+'\x20cameraPar'+'ams.y));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20cam'+'eraParams.'+'z\x20+\x20z\x20*\x20(c'+'ameraParam'+'s.y\x20-\x20came'+'raParams.z'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0a#ifndef\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20#de'+'fine\x20CAMER'+'APLANES\x0a\x20\x20'+'\x20\x20uniform\x20'+'camera_par'+'ams:\x20vec4f'+';\x20\x20\x20//\x20x:\x20'+'1\x20/\x20camera'+'_far,\x20\x20\x20\x20\x20'+'\x20y:\x20camera'+'_far,\x20\x20\x20\x20\x20'+'z:\x20camera_'+'near,\x20\x20\x20\x20\x20'+'\x20\x20\x20w:\x20is_o'+'rtho\x0a#endi'+'f\x0a\x0afn\x20line'+'arizeDepth'+'(z:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pthWithPar'+'ams(z,\x20uni'+'form.camer'+'a_params);'+'\x0a}\x0a#endif\x20'+'//\x20LINEARI'+'ZE_DEPTH\x0a',WM='\x0afn\x20evalua'+'teBackend('+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'//\x20apply\x20S'+'SAO\x20during'+'\x20lighting\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SSAO\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_ao\x20='+'\x20litArgs_a'+'o\x20*\x20textur'+'eSampleLev'+'el(ssaoTex'+'ture,\x20ssao'+'TextureSam'+'pler,\x20pcPo'+'sition.xy\x20'+'*\x20uniform.'+'ssaoTextur'+'eSizeInv,\x20'+'0.0).r;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nsform\x20tan'+'gent\x20space'+'\x20normals\x20t'+'o\x20world\x20sp'+'ace\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_N'+'EEDS_NORMA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getReflD'+'ir(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20litAr'+'gs_gloss,\x20'+'dTBN);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'DirW\x20=\x20nor'+'malize(-re'+'flect(dVie'+'wDirW,\x20lit'+'Args_clear'+'coat_world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'f0:\x20f32\x20=\x20'+'1.0\x20/\x20litA'+'rgs_ior;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20f0\x20=\x20(f0\x20'+'-\x201.0)\x20/\x20('+'f0\x20+\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20f0\x20=\x20f0'+'\x20*\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+('ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceF'+'resnel:\x20ve'+'c3f\x20=\x20getI'+'ridescence'+'Diffractio'+'n(saturate'+'(dot(dView'+'DirW,\x20litA'+'rgs_worldN'+'ormal)),\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_ir'+'idescence_'+'thickness)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20ambi'+'ent\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddAmbient('+'litArgs_wo'+'rldNormal)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20=\x20d'+'DiffuseLig'+'ht\x20*\x20(1.0\x20'+'-\x20litArgs_'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20move\x20ambi'+'ent\x20color\x20'+'out\x20of\x20dif'+'fuse\x20(used'+'\x20by\x20Lightm'+'apper,\x20to\x20'+'multiply\x20a'+'mbient\x20col'+'or\x20by\x20accu'+'mulated\x20AO'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SEPARATE_'+'AMBIENT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20dAmbie'+'ntLight:\x20v'+'ec3f\x20=\x20dDi'+'ffuseLight'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'vec3(0.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20unif'+'orm.materi'+'al_ambient'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20LI'+'T_OCCLUDE_'+'DIRECT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeDiff'+'use(litArg'+'s_ao);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTMAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20litArgs_l'+'ightmap,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmapDi'+'r,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dViewDirW,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dReflD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dVertexNor'+'malW,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'BN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_irides'+'cence_inte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTING\x20||'+'\x20LIT_REFLE'+'CTIONS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddReflecti'+'onCC(ccRef'+'lDirW,\x20lit'+'Args_clear'+'coat_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'ccFresnel\x20'+'=\x20getFresn'+'elCC(dot(d'+'ViewDirW,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccRefle'+'ction\x20=\x20cc'+'Reflection'+'\x20*\x20ccFresn'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccFr'+'esnel\x20=\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'ection\x20=\x20c'+'cReflectio'+'n\x20*\x20litArg'+'s_specular'+'ityFactor;')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20addR'+'eflectionS'+'heen(litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20lit'+'Args_sheen'+'_gloss);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20Fresne'+'l\x20has\x20to\x20b'+'e\x20applied\x20'+'to\x20reflect'+'ions\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'Reflection'+'(dReflDirW'+',\x20litArgs_'+'gloss);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_FRESNEL_'+'MODEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction.rgb\x20'+'*\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'dReflectio'+'n.rgb\x20*\x20li'+'tArgs_spec'+'ularity,\x20d'+'Reflection'+'.a);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve')+('c4f(dRefle'+'ction.rgb\x20'+'*\x20litArgs_'+'specularit'+'yFactor,\x20d'+'Reflection'+'.a);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20AREA'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20*'+'\x20litArgs_s'+'pecularity'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20evalua'+'te\x20materia'+'l\x20based\x20ar'+'ea\x20lights\x20'+'data,\x20shar'+'ed\x20by\x20all\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcLTCLight'+'Values(lit'+'Args_gloss'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20litArg'+'s_specular'+'ity,\x20litAr'+'gs_clearco'+'at_gloss,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20evalua'+'te\x20all\x20non'+'-clustered'+'\x20lights\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22lightEval'+'uationPS,\x20'+'LIGHT_COUN'+'T\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'USTERED_LI'+'GHTS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'ClusteredL'+'ights(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dR'+'eflDirW,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_CLEARCOAT'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20ccRe'+'flDirW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'litArgs_sp'+'ecularity,'+'\x20dVertexNo'+'rmalW,\x20dTB'+'N,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_g'+'loss,\x20litA'+'rgs_sheen_'+'gloss,\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20AREA_LI'+'GHTS\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x20has'+'\x20to\x20be\x20acc'+'umulated\x20d'+'ifferently'+'\x20if\x20we\x20wan'+'t\x20area\x20lig'+'hts\x20to\x20loo'+'k\x20correct\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_clearc'+'oat_specul'+'arity\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20vec3(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addRefra'+'ction(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_worldNorm'+'al,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dViewDirW'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_specu'+'larity,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr')+('gs_albedo,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_tran'+'smission,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_ior,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_dispers'+'ion\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'ambient\x20oc'+'clusion\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_OCCLU'+'DE_DIRECT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeD'+'iffuse(lit'+'Args_ao);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeSpec'+'ular(litAr'+'gs_gloss,\x20'+'litArgs_ao'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20*\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20!defi'+'ned(LIT_OP'+'ACITY_FADE'+'S_SPECULAR'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'==\x20NORMAL\x20'+'||\x20LIT_BLE'+'ND_TYPE\x20=='+'\x20PREMULTIP'+'LIED\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specLum:'+'\x20f32\x20=\x20dot'+'((dSpecula'+'rLight\x20+\x20d'+'Reflection'+'.rgb\x20*\x20dRe'+'flection.a'+'),\x20vec3f(\x20'+'0.2126,\x200.'+'7152,\x200.07'+'22\x20));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'Lum\x20=\x20spec'+'Lum\x20+\x20dot('+'ccSpecular'+'Light\x20*\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20+\x20'+'ccReflecti'+'on\x20*\x20litAr'+'gs_clearco'+'at_specula'+'rity,\x20vec3'+'f(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20c'+'lamp(litAr'+'gs_opacity'+'\x20+\x20gammaCo'+'rrectInput'+'(specLum),'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_opaci'+'ty\x20=\x20litAr'+'gs_opacity'+'\x20*\x20uniform'+'.material_'+'alphaFade;'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20end\x20chunk'+'s\x20-\x20when\x20b'+'aking\x20ligh'+'tmap\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTMAP_B'+'AKING\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_COLOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22b'+'akeLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_LIGH'+'TMAP_BAKIN'+'G_DIR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22ba'+'keDirLmEnd'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'end\x20chunks'+'\x20-\x20in\x20all\x20'+'other\x20case'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'endPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22outpu'+'tAlphaPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_MSD'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20apply'+'Msdf(outpu'+'t.color);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22outp'+'utPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'debugOutpu'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHADOW_CA'+'TCHER\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20when\x20t'+'he\x20shadow\x20'+'catcher\x20is'+'\x20enabled\x20-'+'\x20accumulat'+'ed\x20shadows')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'vec3f(dSha'+'dowCatcher'+'),\x20output.'+'color.a);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),$M='\x0a\x0a//\x20globa'+'ls\x0avar<pri'+'vate>\x20sRef'+'lection:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'VertexNorm'+'alW:\x20vec3f'+';\x0avar<priv'+'ate>\x20dTang'+'entW:\x20vec3'+'f;\x0avar<pri'+'vate>\x20dBin'+'ormalW:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dV'+'iewDirW:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'ReflDirW:\x20'+'vec3f;\x0avar'+'<private>\x20'+'ccReflDirW'+':\x20vec3f;\x0a\x0a'+'//\x20Per-lig'+'ht\x20tempora'+'ries\x0avar<p'+'rivate>\x20dL'+'ightDirNor'+'mW:\x20vec3f;'+'\x0avar<priva'+'te>\x20dAtten'+':\x20f32;\x0a\x0a//'+'\x20Outputs\x0av'+'ar<private'+'>\x20dTBN:\x20ma'+'t3x3f;\x0avar'+'<private>\x20'+'dReflectio'+'n:\x20vec4f;\x0a'+'var<privat'+'e>\x20dDiffus'+'eLight:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccFres'+'nel:\x20f32;\x0a'+'var<privat'+'e>\x20ccRefle'+'ction:\x20vec'+'3f;\x0avar<pr'+'ivate>\x20ccS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccSpec'+'ularityNoF'+'res:\x20f32;\x0a'+'var<privat'+'e>\x20sSpecul'+'arLight:\x20v'+'ec3f;\x0a\x0a//\x20'+'FRAGMENT\x20S'+'HADER\x20INPU'+'TS:\x20UNIFOR'+'MS\x0a\x0a#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_dis'+'persion:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_al'+'phaFade:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_SSAO\x0a\x20\x20'+'\x20\x20var\x20ssao'+'Texture\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20ssaoT'+'extureSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20u'+'niform\x20ssa'+'oTextureSi'+'zeInv:\x20vec'+'2f;\x0a#endif'+'\x0a\x0a//\x20light'+'ing\x20and\x20sh'+'adowing\x20de'+('clarations'+'\x0a\x0a#ifdef\x20L'+'IT_SHADOW_'+'CATCHER\x0a\x20\x20'+'\x20\x20//\x20a\x20var'+'iable\x20to\x20a'+'ccumulate\x20'+'shadows\x20fo'+'r\x20shadow\x20c'+'atcher\x20mat'+'erials\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dShado'+'wCatcher:\x20'+'f32\x20=\x201.0;'+'\x0a#endif\x0a\x0a/'+'/\x20LOOP\x20-\x20u'+'niform\x20dec'+'larations\x20'+'for\x20all\x20no'+'n-clustere'+'d\x20lights\x0a#'+'if\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightDe'+'clarationP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'f\x20LIT_FRES'+'NEL_MODEL\x20'+'==\x20NONE\x20&&'+'\x20!defined('+'LIT_REFLEC'+'TIONS)\x20&&\x20'+'!defined(L'+'IT_DIFFUSE'+'_MAP)\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_OLD'+'_AMBIENT\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0a//'+'\x20lightmap\x20'+'baking\x0a#if'+'def\x20STD_LI'+'GHTMAP_DIR'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20bakeDir'+':\x20f32;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_ADD_AMBIE'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20ambie'+'ntBakeOccl'+'usionContr'+'ast:\x20f32;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20ambientB'+'akeOcclusi'+'onBrightne'+'ss:\x20f32;\x0a#'+'endif\x0a'),XM='\x0a\x0a@fragmen'+'t\x0afn\x20fragm'+'entMain(in'+'put:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ccSpecular'+'Light\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20cc'+'Reflection'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_N'+'ONE_SLICE_'+'MODE\x20==\x20SL'+'ICED\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22startNi'+'neSlicedPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20LIT_NONE'+'_SLICE_MOD'+'E\x20==\x20TILED'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'tartNineSl'+'icedTiledP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'NEEDS_NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dVertexNo'+'rmalW\x20=\x20no'+'rmalize(vN'+'ormalW);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_T'+'ANGENTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_HEIG'+'HTS)\x20||\x20de'+'fined(LIT_'+'USE_NORMAL'+'S)\x20||\x20defi'+'ned(LIT_US'+'E_CLEARCOA'+'T_NORMALS)'+'\x20||\x20define'+'d(LIT_GGX_'+'SPECULAR)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dTan'+'gentW\x20=\x20vT'+'angentW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dBino'+'rmalW\x20=\x20vB'+'inormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20getView'+'Dir();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_TBN'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getTBN('+'dTangentW,'+'\x20dBinormal'+'W,\x20dVertex'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'andleTwoSi'+'dedLightin'+'g();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+('\x0a\x20\x20\x20\x20//\x20in'+'voke\x20front'+'end\x20functi'+'ons\x0a\x20\x20\x20\x20ev'+'aluateFron'+'tend();\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22debugPr'+'ocessFront'+'endPS\x22\x0a\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput\x20='+'\x20evaluateB'+'ackend();\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainEndP'+'S\x22\x0a\x0a\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a}\x0a'),qM='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20material_'+'ambient:\x20v'+'ec3f;\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_LIGHTING'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22light'+'SpecularAn'+'isoGGXPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tSpecularB'+'linnPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0a#include'+'\x20\x22combineP'+'S\x22\x0a\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapAddP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22am'+'bientPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_MS'+'DF\x0a\x20\x20\x20\x20#in'+'clude\x20\x22msd'+'fPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22viewDirPS'+'\x22\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_GGX_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirAni'+'soPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22reflDirP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20f'+'unctionali')+('ty\x0a#includ'+'e\x20\x22lightin'+'gPS\x22\x0a\x0a'),jM='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',YM='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',KM='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a#endif'+'\x0a\x0a#ifdef\x20N'+'INESLICED\x0a'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vMask:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20varying\x20v'+'TiledUv:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dMaskG'+'lobal:\x20vec'+'2f;\x0a\x20\x20\x20\x20va'+'r<private>'+'\x20dTiledUvG'+'lobal:\x20vec'+'2f;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'uterScale:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'atlasRect:'+'\x20vec4f;\x0a\x0a#'+'endif\x0a\x0avar'+'<private>\x20'+'dPositionW'+':\x20vec3f;\x0av'+'ar<private'+'>\x20dModelMa'+'trix:\x20mat4'+'x4f;\x0a\x0a#inc'+'lude\x20\x22tran'+'sformCoreV'+'S\x22\x0a\x0a#ifdef'+'\x20UV0\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ertex_texC'+'oord0:\x20vec'+'2f;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'rtex_texCo'+'ord1:\x20vec2'+'f;\x0a\x20\x20\x20\x20#in'+'clude\x20\x22uv1'+'VS\x22\x0a#endif'+'\x0a\x0a\x0a#ifdef\x20'+'LINEAR_DEP'+'TH\x0a\x20\x20\x20\x20#if'+'ndef\x20VIEWM'+'ATRIX\x0a\x20\x20\x20\x20'+'#define\x20VI'+'EWMATRIX\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#inc'+'lude\x20\x22tran'+'sformVS\x22\x0a\x0a'+'#ifdef\x20NOR'+'MALS\x0a\x20\x20\x20\x20#'+'include\x20\x22n'+'ormalCoreV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malVS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20TANGENTS'+'\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_tangent:'+'\x20vec4f;\x0a#e'+'ndif\x0a\x0a//\x20e'+'xpand\x20unif'+'orms\x20for\x20u'+'v\x20transfor'+'ms\x0a#includ'+'e\x20\x22uvTrans'+'formUnifor'+'msPS,\x20UV_T'+'RANSFORMS_'+('COUNT\x22\x0a\x0a#i'+'fdef\x20MSDF\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22msdfVS'+'\x22\x0a#endif\x0a\x0a'+'#include\x20\x20'+'\x22litUserCo'+'deVS\x22\x0a\x0a@ve'+'rtex\x0afn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'MainStartV'+'S\x22\x0a\x0a\x20\x20\x20\x20va'+'r\x20output\x20:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20get'+'Position()'+';\x0a\x20\x20\x20\x20outp'+'ut.vPositi'+'onW\x20=\x20getW'+'orldPositi'+'on();\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20NO'+'RMALS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vNormalW\x20'+'=\x20getNorma'+'l();\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TA'+'NGENTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vTangent'+'W\x20=\x20normal'+'ize(dNorma'+'lMatrix\x20*\x20'+'vertex_tan'+'gent.xyz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vBin'+'ormalW\x20=\x20c'+'ross(outpu'+'t.vNormalW'+',\x20output.v'+'TangentW)\x20'+'*\x20vertex_t'+'angent.w;\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(GG'+'X_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20UV0'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f\x20=\x20getU'+'v0();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20UV0_UNMOD'+'IFIED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20uv1:\x20vec2'+'f\x20=\x20getUv1'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20U'+'V1_UNMODIF'+'IED\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.vUv1\x20=\x20'+'uv1;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'xpand\x20code'+'\x20for\x20uv\x20tr'+'ansforms\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22uvTrans')+('formVS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20VERTEX_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition'+',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-(uniform'+'.matrix_vi'+'ew\x20*\x20vec4f'+'(output.vP'+'ositionW,\x20'+'1.0)).z;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MSDF\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unpac'+'kMsdfParam'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.outline_c'+'olor\x20=\x20dOu'+'tlineColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.out'+'line_thick'+'ness\x20=\x20dOu'+'tlineThick'+'ness;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.shadow_co'+'lor\x20=\x20dSha'+'dowColor;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.shado'+'w_offset\x20='+'\x20dShadowOf'+'fset;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vMask'+'\x20=\x20dMaskGl'+'obal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vTiledUv\x20'+'=\x20dTiledUv'+'Global;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndVS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),ZM='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20evaluateF'+'rontend();'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PICK_PA'+'SS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20getP'+'ickOutput('+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20float2ve'+'c4(vLinear'+'Depth);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndPS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',QM='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avar<priva'+'te>\x20litArg'+'s_albedo:\x20'+'vec3f;\x0a\x0a//'+'\x20Transpare'+'ncy\x0avar<pr'+'ivate>\x20lit'+'Args_opaci'+'ty:\x20f32;\x0a\x0a'+'//\x20Emissio'+'n\x20color\x0ava'+'r<private>'+'\x20litArgs_e'+'mission:\x20v'+'ec3f;\x0a\x0a//\x20'+'Normal\x20dir'+'ection\x20in\x20'+'world\x20spac'+'e\x0avar<priv'+'ate>\x20litAr'+'gs_worldNo'+'rmal:\x20vec3'+'f;\x0a\x0a//\x20Amb'+'ient\x20occlu'+'sion\x20amoun'+'t,\x20range\x20['+'0..1]\x0avar<'+'private>\x20l'+'itArgs_ao:'+'\x20f32;\x0a\x0a//\x20'+'Light\x20map\x20'+'color\x0avar<'+'private>\x20l'+'itArgs_lig'+'htmap:\x20vec'+'3f;\x0a\x0a//\x20Li'+'ght\x20map\x20di'+'rection\x0ava'+'r<private>'+'\x20litArgs_l'+'ightmapDir'+':\x20vec3f;\x0a\x0a'+'//\x20Surface'+'\x20metalness'+'\x20factor,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_metalne'+'ss:\x20f32;\x0a\x0a'+'//\x20The\x20f0\x20'+'specularit'+'y\x20factor\x0av'+'ar<private'+'>\x20litArgs_'+'specularit'+'y:\x20vec3f;\x0a'+'\x0a//\x20Specul'+'arity\x20inte'+'nsity\x20fact'+'or,\x20range\x20'+'[0..1]\x0avar'+'<private>\x20'+'litArgs_sp'+'ecularityF'+'actor:\x20f32'+';\x0a\x0a//\x20The\x20'+'microfacet'+'\x20glossines'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0avar<pri'+'vate>\x20litA'+'rgs_gloss:'+'\x20f32;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_sheen'+'_gloss:\x20f3'+'2;\x0a\x0a//\x20The'+'\x20color\x20of\x20'+'the\x20f0\x20spe'+'cularity\x20f'+'actor\x20for\x20'+'the\x20sheen\x20'+'layer\x0avar<'+'private>\x20l'+'itArgs_she'+'en_specula'+'rity:\x20vec3'+'f;\x0a\x0a//\x20Tra'+'nsmission\x20'+'factor\x20(re'+('fraction),'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_trans'+'mission:\x20f'+'32;\x0a\x0a//\x20Un'+'iform\x20thic'+'kness\x20of\x20m'+'edium,\x20use'+'d\x20by\x20trans'+'mission,\x20r'+'ange\x20[0..i'+'nf]\x0avar<pr'+'ivate>\x20lit'+'Args_thick'+'ness:\x20f32;'+'\x0a\x0a//\x20Index'+'\x20of\x20refrac'+'tion\x0avar<p'+'rivate>\x20li'+'tArgs_ior:'+'\x20f32;\x0a\x0a//\x20'+'Dispersion'+',\x20range\x20[0'+'..1]\x20typic'+'ally,\x20but\x20'+'can\x20be\x20hig'+'her\x0avar<pr'+'ivate>\x20lit'+'Args_dispe'+'rsion:\x20f32'+';\x0a\x0a//\x20Irid'+'escence\x20ef'+'fect\x20inten'+'sity,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'iridescenc'+'e_intensit'+'y:\x20f32;\x0a\x0a/'+'/\x20Thicknes'+'s\x20of\x20the\x20i'+'ridescent\x20'+'microfilm\x20'+'layer,\x20val'+'ue\x20is\x20in\x20n'+'anometers,'+'\x20range\x20[0.'+'.1000]\x0avar'+'<private>\x20'+'litArgs_ir'+'idescence_'+'thickness:'+'\x20f32;\x0a\x0a//\x20'+'The\x20normal'+'\x20used\x20for\x20'+'the\x20clearc'+'oat\x20layer\x0a'+'var<privat'+'e>\x20litArgs'+'_clearcoat'+'_worldNorm'+'al:\x20vec3f;'+'\x0a\x0a//\x20Inten'+'sity\x20of\x20th'+'e\x20clearcoa'+'t\x20layer,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_clearco'+'at_specula'+'rity:\x20f32;'+'\x0a\x0a//\x20Gloss'+'iness\x20of\x20c'+'learcoat\x20l'+'ayer,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'clearcoat_'+'gloss:\x20f32'+';\x0a\x0a'),JM='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20t'+'extureBias'+':\x20f32\x20=\x20-1'+'000.0;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20texture'+'Bias:\x20f32;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ShaderArgs'+'PS\x22\x0a',eD='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20view_p'+'osition:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20li'+'ght_radius'+':\x20f32;\x0a#en'+'dif\x0a\x0a#if\x20S'+'HADOW_TYPE'+'\x20==\x20PCSS_3'+'2F\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lin'+'earizeDept'+'hPS\x22\x0a#endi'+'f\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serMainSta'+'rtPS\x22\x0a\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20/'+'/\x20using\x20no'+'n-standard'+'\x20depth,\x20i.'+'e\x20gl_FragC'+'oord.z\x0a\x20\x20\x20'+'\x20#ifdef\x20PE'+'RSPECTIVE_'+'DEPTH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20de'+'pth:\x20f32\x20='+'\x20input.pos'+'ition.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20PCS'+'S_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot/omni'+'\x20shadows\x20c'+'urrently\x20u'+'se\x20linear\x20'+'depth.\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20TODO:\x20us'+'e\x20perspect'+'ive\x20depth\x20'+'for\x20spot/o'+'mni\x20the\x20sa'+'me\x20way\x20as\x20'+'directiona'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT_TYPE\x20!'+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'depth\x20=\x20li'+'nearizeDep'+'thWithPara'+'ms(depth,\x20'+'camera_par'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20depth:\x20'+'f32\x20=\x20min('+'distance(u'+'niform.vie'+'w_position'+',\x20input.vP'+'ositionW)\x20'+'/\x20uniform.'+'light_radi'+'us,\x200.9999'+'9);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'MODIFIED_D'+'EPTH\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SHADO'+'W_TYPE\x20==\x20'+'VSM_16F\x20||'+'\x20SHADOW_TY'+('PE\x20==\x20VSM_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20SHAD'+'OW_TYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20expon'+'ent:\x20f32\x20='+'\x2015.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20exp'+'onent:\x20f32'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dep'+'th_vsm\x20=\x202'+'.0\x20*\x20depth'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dept'+'h_vsm\x20=\x20ex'+'p(exponent'+'\x20*\x20depth_v'+'sm);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(depth_'+'vsm,\x20depth'+'_vsm\x20*\x20dep'+'th_vsm,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20PCSS'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(de'+'pth,\x200.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MODIFI'+'ED_DEPTH\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20If'+'\x20we\x20end\x20up'+'\x20using\x20mod'+'ified\x20dept'+'h,\x20it\x20need'+'s\x20to\x20be\x20ex'+'plicitly\x20w'+'ritten\x20to\x20'+'gl_FragDep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.frag'+'Depth\x20=\x20de'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'just\x20the\x20s'+'implest\x20co'+'de,\x20color\x20'+'is\x20not\x20wri'+'tten\x20anywa'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),tD='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0afn\x20'+'LTC_Uv(N:\x20'+'vec3f,\x20V:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20co'+'nst\x20LUT_SI'+'ZE:\x20f32\x20=\x20'+'64.0;\x0a\x20\x20\x20\x20'+'const\x20LUT_'+'SCALE:\x20f32'+'\x20=\x20(LUT_SI'+'ZE\x20-\x201.0)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_BIAS'+':\x20f32\x20=\x200.'+'5\x20/\x20LUT_SI'+'ZE;\x0a\x20\x20\x20\x20le'+'t\x20dotNV:\x20f'+'32\x20=\x20satur'+'ate(dot(\x20N'+',\x20V\x20));\x0a\x20\x20'+'\x20\x20//\x20textu'+'re\x20paramet'+'erized\x20by\x20'+'sqrt(\x20GGX\x20'+'alpha\x20)\x20an'+'d\x20sqrt(\x201\x20'+'-\x20cos(\x20the'+'ta\x20)\x20)\x0a\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20vec'+'2f(\x20roughn'+'ess,\x20sqrt('+'\x201.0\x20-\x20dot'+'NV\x20)\x20);\x0a\x20\x20'+'\x20\x20return\x20u'+'v\x20*\x20LUT_SC'+'ALE\x20+\x20LUT_'+'BIAS;\x0a}\x0a\x0af'+'n\x20LTC_Clip'+'pedSphereF'+'ormFactor('+'\x20f:\x20vec3f\x20'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20//\x20Re'+'al-Time\x20Ar'+'ea\x20Lightin'+'g:\x20a\x20Journ'+'ey\x20from\x20Re'+'search\x20to\x20'+'Production'+'\x20(p.102)\x0a\x20'+'\x20\x20\x20//\x20An\x20a'+'pproximati'+'on\x20of\x20the\x20'+'form\x20facto'+'r\x20of\x20a\x20hor'+'izon-clipp'+'ed\x20rectang'+'le.\x0a\x20\x20\x20\x20le'+'t\x20l:\x20f32\x20='+'\x20length(\x20f'+'\x20);\x0a\x20\x20\x20\x20re'+'turn\x20max(\x20'+'(\x20l\x20*\x20l\x20+\x20'+'f.z\x20)\x20/\x20(\x20'+'l\x20+\x201.0\x20),'+'\x200.0\x20);\x0a}\x0a'+'\x0afn\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'v1:\x20vec3f,'+'\x20v2:\x20vec3f'+'\x20)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20x:\x20f32\x20='+'\x20dot(\x20v1,\x20'+'v2\x20);\x0a\x20\x20\x20\x20'+'let\x20y:\x20f32'+('\x20=\x20abs(\x20x\x20'+');\x0a\x20\x20\x20\x20//\x20'+'rational\x20p'+'olynomial\x20'+'approximat'+'ion\x20to\x20the'+'ta\x20/\x20sin(\x20'+'theta\x20)\x20/\x20'+'2PI\x0a\x20\x20\x20\x20le'+'t\x20a:\x20f32\x20='+'\x200.8543985'+'\x20+\x20(\x200.496'+'5155\x20+\x200.0'+'145206\x20*\x20y'+'\x20)\x20*\x20y;\x0a\x20\x20'+'\x20\x20let\x20b:\x20f'+'32\x20=\x203.417'+'5940\x20+\x20(\x204'+'.1616724\x20+'+'\x20y\x20)\x20*\x20y;\x0a'+'\x20\x20\x20\x20let\x20v:'+'\x20f32\x20=\x20a\x20/'+'\x20b;\x0a\x20\x20\x20\x20le'+'t\x20inv_sqrt'+'_term\x20=\x20in'+'verseSqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7f\x20)\x20);\x0a'+'\x20\x20\x20\x20let\x20th'+'eta_sinthe'+'ta:\x20f32\x20=\x20'+'select(\x20(0'+'.5\x20*\x20inv_s'+'qrt_term\x20-'+'\x20v),\x20v,\x20x\x20'+'>\x200.0\x20);\x0a\x20'+'\x20\x20\x20return\x20'+'cross(\x20v1,'+'\x20v2\x20)\x20*\x20th'+'eta_sinthe'+'ta;\x0a}\x0a\x0astr'+'uct\x20Coords'+'\x20{\x0a\x20\x20\x20\x20coo'+'rd0:\x20vec3f'+',\x0a\x20\x20\x20\x20coor'+'d1:\x20vec3f,'+'\x0a\x20\x20\x20\x20coord'+'2:\x20vec3f,\x0a'+'\x20\x20\x20\x20coord3'+':\x20vec3f,\x0a}'+'\x0a\x0afn\x20LTC_E'+'valuateRec'+'t(\x20N:\x20vec3'+'f,\x20V:\x20vec3'+'f,\x20P:\x20vec3'+'f,\x20mInv:\x20m'+'at3x3f,\x20re'+'ctCoords:\x20'+'Coords)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20//\x20bail\x20i'+'f\x20point\x20is'+'\x20on\x20back\x20s'+'ide\x20of\x20pla'+'ne\x20of\x20ligh'+'t\x0a\x20\x20\x20\x20//\x20a'+'ssumes\x20ccw'+'\x20winding\x20o'+'rder\x20of\x20li'+'ght\x20vertic'+'es\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec3f'+'\x20=\x20rectCoo'+'rds.coord1'+'\x20-\x20rectCoo'+'rds.coord0'+';\x0a\x20\x20\x20\x20let\x20'+'v2:\x20vec3f\x20'+'=\x20rectCoor'+'ds.coord3\x20'+'-\x20rectCoor'+'ds.coord0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'lightNorma'+'l:\x20vec3f\x20='+'\x20cross(\x20v1'+',\x20v2\x20);\x0a\x20\x20'+'\x20\x20let\x20fact'+'or:\x20f32\x20=\x20'+'sign(-dot('+'\x20lightNorm'+'al,\x20P\x20-\x20re'+'ctCoords.c'+'oord0\x20));\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'nstruct\x20or'+'thonormal\x20'+'basis\x20arou'+'nd\x20N\x0a\x20\x20\x20\x20l')+('et\x20T1:\x20vec'+'3f\x20=\x20norma'+'lize(\x20V\x20-\x20'+'N\x20*\x20dot(\x20V'+',\x20N\x20)\x20);\x0a\x20'+'\x20\x20\x20let\x20T2:'+'\x20vec3f\x20=\x20f'+'actor\x20*\x20cr'+'oss(\x20N,\x20T1'+'\x20);\x20//\x20neg'+'ated\x20from\x20'+'paper;\x20pos'+'sibly\x20due\x20'+'to\x20a\x20diffe'+'rent\x20hande'+'dness\x20of\x20w'+'orld\x20coord'+'inate\x20syst'+'em\x0a\x20\x20\x20\x20//\x20'+'compute\x20tr'+'ansform\x0a\x20\x20'+'\x20\x20let\x20mat:'+'\x20mat3x3f\x20='+'\x20mInv\x20*\x20tr'+'anspose(\x20m'+'at3x3f(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'transform\x20'+'rect\x0a\x20\x20\x20\x20v'+'ar\x20coords:'+'\x20array<vec'+'3f,\x204>;\x0a\x20\x20'+'\x20\x20coords[0'+']\x20=\x20mat\x20*\x20'+'(\x20rectCoor'+'ds.coord0\x20'+'-\x20P\x20);\x0a\x20\x20\x20'+'\x20coords[1]'+'\x20=\x20mat\x20*\x20('+'\x20rectCoord'+'s.coord1\x20-'+'\x20P\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20mat\x20*\x20(\x20'+'rectCoords'+'.coord2\x20-\x20'+'P\x20);\x0a\x20\x20\x20\x20c'+'oords[3]\x20='+'\x20mat\x20*\x20(\x20r'+'ectCoords.'+'coord3\x20-\x20P'+'\x20);\x0a\x20\x20\x20\x20//'+'\x20project\x20r'+'ect\x20onto\x20s'+'phere\x0a\x20\x20\x20\x20'+'coords[0]\x20'+'=\x20normaliz'+'e(\x20coords['+'0]\x20);\x0a\x20\x20\x20\x20'+'coords[1]\x20'+'=\x20normaliz'+'e(\x20coords['+'1]\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20normaliz'+'e(\x20coords['+'2]\x20);\x0a\x20\x20\x20\x20'+'coords[3]\x20'+'=\x20normaliz'+'e(\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20vector\x20'+'form\x20facto'+'r\x0a\x20\x20\x20\x20var\x20'+'vectorForm'+'Factor:\x20ve'+'c3f\x20=\x20vec3'+'f(\x200.0\x20);\x0a'+'\x20\x20\x20\x20vector'+'FormFactor'+'\x20=\x20vectorF'+'ormFactor\x20'+'+\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[0],\x20c'+'oords[1]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20=\x20vecto'+'rFormFacto'+'r\x20+\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'coords[1],'+'\x20coords[2]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa')+('ctor\x20=\x20vec'+'torFormFac'+'tor\x20+\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[2'+'],\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20=\x20v'+'ectorFormF'+'actor\x20+\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[3],\x20coord'+'s[0]\x20);\x0a\x20\x20'+'\x20\x20//\x20adjus'+'t\x20for\x20hori'+'zon\x20clippi'+'ng\x0a\x20\x20\x20\x20let'+'\x20result:\x20f'+'32\x20=\x20LTC_C'+'lippedSphe'+'reFormFact'+'or(\x20vector'+'FormFactor'+'\x20);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20resu'+'lt;\x0a}\x0a\x0avar'+'<private>\x20'+'dLTCCoords'+':\x20Coords;\x0a'+'fn\x20getLTCL'+'ightCoords'+'(lightPos:'+'\x20vec3f,\x20ha'+'lfWidth:\x20v'+'ec3f,\x20half'+'Height:\x20ve'+'c3f)\x20->\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20var\x20coord'+'s:\x20Coords;'+'\x0a\x20\x20\x20\x20coord'+'s.coord0\x20='+'\x20lightPos\x20'+'+\x20halfWidt'+'h\x20-\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd1\x20=\x20ligh'+'tPos\x20-\x20hal'+'fWidth\x20-\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20coord'+'s.coord2\x20='+'\x20lightPos\x20'+'-\x20halfWidt'+'h\x20+\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd3\x20=\x20ligh'+'tPos\x20+\x20hal'+'fWidth\x20+\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20retur'+'n\x20coords;\x0a'+'}\x0a\x0avar<pri'+'vate>\x20dSph'+'ereRadius:'+'\x20f32;\x0afn\x20g'+'etSphereLi'+'ghtCoords('+'lightPos:\x20'+'vec3f,\x20hal'+'fWidth:\x20ve'+'c3f,\x20halfH'+'eight:\x20vec'+'3f)\x20->\x20Coo'+'rds\x20{\x0a\x20\x20\x20\x20'+'//\x20used\x20fo'+'r\x20simple\x20s'+'phere\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20//\x20als'+'o,\x20the\x20cod'+'e\x20only\x20han'+'dles\x20a\x20sph'+'erical\x20lig'+'ht,\x20it\x20can'+'not\x20be\x20non'+'-uniformly'+'\x20scaled\x20in'+'\x20world\x20spa'+'ce,\x20and\x20so'+'\x20we\x20enforc'+'e\x20it\x20here\x0a'+'\x20\x20\x20\x20dSpher'+'eRadius\x20=\x20')+('max(length'+'(halfWidth'+'),\x20length('+'halfHeight'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20Billboar'+'d\x20the\x202d\x20l'+'ight\x20quad\x20'+'to\x20reflect'+'ion\x20vector'+',\x20as\x20it\x27s\x20'+'used\x20for\x20s'+'pecular.\x20T'+'his\x20allows'+'\x20us\x20to\x20use'+'\x20disk\x20math'+'\x20for\x20the\x20s'+'phere.\x0a\x20\x20\x20'+'\x20let\x20f:\x20ve'+'c3f\x20=\x20refl'+'ect(normal'+'ize(lightP'+'os\x20-\x20unifo'+'rm.view_po'+'sition),\x20v'+'NormalW);\x0a'+'\x20\x20\x20\x20let\x20w:'+'\x20vec3f\x20=\x20n'+'ormalize(c'+'ross(f,\x20ha'+'lfHeight))'+';\x0a\x20\x20\x20\x20let\x20'+'h:\x20vec3f\x20='+'\x20normalize'+'(cross(f,\x20'+'w));\x0a\x0a\x20\x20\x20\x20'+'return\x20get'+'LTCLightCo'+'ords(light'+'Pos,\x20w\x20*\x20d'+'SphereRadi'+'us,\x20h\x20*\x20dS'+'phereRadiu'+'s);\x0a}\x0a\x0a//\x20'+'used\x20for\x20L'+'TC\x20LUT\x20tex'+'ture\x20looku'+'p\x0avar<priv'+'ate>\x20dLTCU'+'V:\x20vec2f;\x0a'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20var<p'+'rivate>\x20cc'+'LTCUV:\x20vec'+'2f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightUV(g'+'loss:\x20f32,'+'\x20worldNorm'+'al:\x20vec3f,'+'\x20viewDir:\x20'+'vec3f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20roug'+'hness:\x20f32'+'\x20=\x20max((1.'+'0\x20-\x20gloss)'+'\x20*\x20(1.0\x20-\x20'+'gloss),\x200.'+'001);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_Uv(\x20world'+'Normal,\x20vi'+'ewDir,\x20rou'+'ghness\x20);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20energ'+'y\x20conserva'+'tion\x20and\x20t'+'o\x20modulate'+'\x20specular\x0a'+'var<privat'+'e>\x20dLTCSpe'+'cFres:\x20vec'+'3f;\x0a#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20v'+'ar<private'+'>\x20ccLTCSpe'+'cFres:\x20vec'+'3f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightSpec'+'Fres(uv:\x20v'+'ec2f,\x20spec'+'ularity:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20t2:\x20v')+('ec4f\x20=\x20tex'+'tureSample'+'Level(area'+'LightsLutT'+'ex2,\x20areaL'+'ightsLutTe'+'x2Sampler,'+'\x20uv,\x200.0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20specular'+'ity\x20*\x20t2.x'+'\x20+\x20(\x20vec3f'+'(\x201.0\x20)\x20-\x20'+'specularit'+'y)\x20*\x20t2.y;'+'\x0a}\x0a\x0afn\x20cal'+'cLTCLightV'+'alues(glos'+'s:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f,\x20specul'+'arity:\x20vec'+'3f,\x20clearc'+'oatGloss:\x20'+'f32,\x20clear'+'coatWorldN'+'ormal:\x20vec'+'3f,\x20clearc'+'oatSpecula'+'rity:\x20f32)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'UV\x20=\x20getLT'+'CLightUV(c'+'learcoatGl'+'oss,\x20clear'+'coatWorldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'SpecFres\x20='+'\x20getLTCLig'+'htSpecFres'+'(ccLTCUV,\x20'+'vec3f(clea'+'rcoatSpecu'+'larity));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0afn\x20cal'+'cDiskLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20cal'+'cRectLight'+'Values(lig'+'htPos,\x20hal'+'fWidth,\x20ha'+'lfHeight);'+'\x0a}\x0afn\x20calc'+'SphereLigh'+'tValues(li'+'ghtPos:\x20ve'+'c3f,\x20halfW'+'idth:\x20vec3'+'f,\x20halfHei')+('ght:\x20vec3f'+')\x20{\x0a\x20\x20\x20\x20dL'+'TCCoords\x20='+'\x20getSphere'+'LightCoord'+'s(lightPos'+',\x20halfWidt'+'h,\x20halfHei'+'ght);\x0a}\x0a\x0a/'+'/\x20An\x20exten'+'ded\x20versio'+'n\x20of\x20the\x20i'+'mplementat'+'ion\x20from\x20\x22'+'How\x20to\x20sol'+'ve\x20a\x20cubic'+'\x20equation,'+'\x20revisited'+'\x22\x0a//\x20http:'+'//momentsi'+'ngraphics.'+'de/?p=105\x0a'+'fn\x20SolveCu'+'bic(Coeffi'+'cient_in:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20pi:\x20'+'f32\x20=\x203.14'+'159;\x0a\x20\x20\x20\x20v'+'ar\x20Coeffic'+'ient\x20=\x20Coe'+'fficient_i'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20Normalize'+'\x20the\x20polyn'+'omial\x0a\x20\x20\x20\x20'+'Coefficien'+'t\x20=\x20vec4f('+'Coefficien'+'t.xyz\x20/\x20Co'+'efficient.'+'w,\x20Coeffic'+'ient.w);\x0a\x0a'+'\x20\x20\x20\x20//\x20Div'+'ide\x20middle'+'\x20coefficie'+'nts\x20by\x20thr'+'ee\x0a\x20\x20\x20\x20let'+'\x20new_yz:\x20v'+'ec2f\x20=\x20Coe'+'fficient.y'+'z\x20/\x203.0;\x0a\x20'+'\x20\x20\x20Coeffic'+'ient\x20=\x20vec'+'4f(Coeffic'+'ient.x,\x20ne'+'w_yz.x,\x20ne'+'w_yz.y,\x20Co'+'efficient.'+'w);\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20let\x20A:\x20'+'f32\x20=\x20Coef'+'ficient.w;'+'\x0a\x20\x20\x20\x20let\x20B'+':\x20f32\x20=\x20Co'+'efficient.'+'z;\x0a\x20\x20\x20\x20let'+'\x20C:\x20f32\x20=\x20'+'Coefficien'+'t.y;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20Coeffici'+'ent.x;\x0a\x0a\x20\x20'+'\x20\x20//\x20Compu'+'te\x20the\x20Hes'+'sian\x20and\x20t'+'he\x20discrim'+'inant\x0a\x20\x20\x20\x20'+'let\x20Delta:'+'\x20vec3f\x20=\x20v'+'ec3f(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20-Coeff'+'icient.z\x20*'+'\x20Coefficie'+'nt.z\x20+\x20Coe'+'fficient.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'-Coefficie'+'nt.y\x20*\x20Coe'+'fficient.z'+'\x20+\x20Coeffic'+'ient.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'vec2f(Coef'+'ficient.z,'+'\x20-Coeffici'+'ent.y),\x20Co'+'efficient.'+'xy)\x0a\x20\x20\x20\x20);')+('\x0a\x0a\x20\x20\x20\x20let\x20'+'Discrimina'+'nt:\x20f32\x20=\x20'+'dot(vec2f('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20var\x20xlc:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20var\x20xsc:'+'\x20vec2f;\x0a\x0a\x20'+'\x20\x20\x20//\x20Algo'+'rithm\x20A\x0a\x20\x20'+'\x20\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20A_a:'+'\x20f32\x20=\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_a:\x20f'+'32\x20=\x20Delta'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_a:'+'\x20f32\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20Theta:\x20f'+'32\x20=\x20atan2'+'(sqrt(Disc'+'riminant),'+'\x20-D_a)\x20/\x203'+'.0;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sqr'+'t_neg_Ca\x20='+'\x20sqrt(-C_a'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20x_1a:'+'\x20f32\x20=\x202.0'+'\x20*\x20sqrt_ne'+'g_Ca\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x_3a:\x20f32'+'\x20=\x202.0\x20*\x20s'+'qrt_neg_Ca'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20xl:'+'\x20f32\x20=\x20sel'+'ect(x_3a,\x20'+'x_1a,\x20(x_1'+'a\x20+\x20x_3a)\x20'+'>\x202.0\x20*\x20B)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'xlc\x20=\x20vec2'+'f(xl\x20-\x20B,\x20'+'A);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Al'+'gorithm\x20D\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20A_'+'d:\x20f32\x20=\x20D'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_d:\x20f'+'32\x20=\x20Delta'+'.z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_d:'+'\x20f32\x20=\x20-D\x20'+'*\x20Delta.y\x20'+'+\x202.0\x20*\x20C\x20'+'*\x20Delta.z;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Take\x20th'+'e\x20cubic\x20ro'+'ot\x20of\x20a\x20no'+'rmalized\x20c'+'omplex\x20num'+'ber\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20Thet'+'a:\x20f32\x20=\x20a'+'tan2(D\x20*\x20s'+'qrt(Discri'+'minant),\x20-'+'D_d)\x20/\x203.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20sqrt_'+'neg_Cd\x20=\x20s'+'qrt(-C_d);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20x_1d:\x20f'+'32\x20=\x202.0\x20*')+('\x20sqrt_neg_'+'Cd\x20*\x20cos(T'+'heta);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20x'+'_3d:\x20f32\x20='+'\x202.0\x20*\x20sqr'+'t_neg_Cd\x20*'+'\x20cos(Theta'+'\x20+\x20(2.0\x20/\x20'+'3.0)\x20*\x20pi)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20xs:\x20f'+'32\x20=\x20selec'+'t(x_3d,\x20x_'+'1d,\x20x_1d\x20+'+'\x20x_3d\x20<\x202.'+'0\x20*\x20C);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20xsc\x20'+'=\x20vec2f(-D'+',\x20xs\x20+\x20C);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20let\x20E:\x20f'+'32\x20=\x20\x20xlc.'+'y\x20*\x20xsc.y;'+'\x0a\x20\x20\x20\x20let\x20F'+':\x20f32\x20=\x20-x'+'lc.x\x20*\x20xsc'+'.y\x20-\x20xlc.y'+'\x20*\x20xsc.x;\x0a'+'\x20\x20\x20\x20let\x20G:'+'\x20f32\x20=\x20\x20xl'+'c.x\x20*\x20xsc.'+'x;\x0a\x0a\x20\x20\x20\x20le'+'t\x20xmc:\x20vec'+'2f\x20=\x20vec2f'+'(C\x20*\x20F\x20-\x20B'+'\x20*\x20G,\x20-B\x20*'+'\x20F\x20+\x20C\x20*\x20E'+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20Root:\x20ve'+'c3f\x20=\x20vec3'+'f(xsc.x\x20/\x20'+'xsc.y,\x20xmc'+'.x\x20/\x20xmc.y'+',\x20xlc.x\x20/\x20'+'xlc.y);\x0a\x0a\x20'+'\x20\x20\x20if\x20(Roo'+'t.x\x20<\x20Root'+'.y\x20&&\x20Root'+'.x\x20<\x20Root.'+'z)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root\x20=\x20'+'Root.yxz;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(Root.'+'z\x20<\x20Root.x'+'\x20&&\x20Root.z'+'\x20<\x20Root.y)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root\x20=\x20Ro'+'ot.xzy;\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20Root;'+'\x0a}\x0a\x0afn\x20LTC'+'_EvaluateD'+'isk(N:\x20vec'+'3f,\x20V:\x20vec'+'3f,\x20P:\x20vec'+'3f,\x20Minv:\x20'+'mat3x3f,\x20p'+'oints:\x20Coo'+'rds)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20let\x20T1:\x20'+'vec3f\x20=\x20no'+'rmalize(V\x20'+'-\x20N\x20*\x20dot('+'V,\x20N));\x0a\x20\x20'+'\x20\x20let\x20T2:\x20'+'vec3f\x20=\x20cr'+'oss(N,\x20T1)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'rotate\x20are'+'a\x20light\x20in'+'\x20(T1,\x20T2,\x20'+'N)\x20basis\x0a\x20'+'\x20\x20\x20let\x20R:\x20'+'mat3x3f\x20=\x20'+'transpose('+'\x20mat3x3f(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20polygon\x20'+'(allocate\x20'+'5\x20vertices'+'\x20for\x20clipp')+('ing\x0a\x20\x20\x20\x20va'+'r\x20L_:\x20arra'+'y<vec3f,\x203'+'>;\x0a\x20\x20\x20\x20L_['+'0]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[1'+']\x20=\x20R\x20*\x20(\x20'+'points.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20L_[2]'+'\x20=\x20R\x20*\x20(\x20p'+'oints.coor'+'d2\x20-\x20P\x20);\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'it\x20ellipse'+'\x0a\x20\x20\x20\x20let\x20C'+':\x20vec3f\x20\x20='+'\x200.5\x20*\x20(L_'+'[0]\x20+\x20L_[2'+']);\x0a\x20\x20\x20\x20va'+'r\x20V1:\x20vec3'+'f\x20=\x200.5\x20*\x20'+'(L_[1]\x20-\x20L'+'_[2]);\x0a\x20\x20\x20'+'\x20var\x20V2:\x20v'+'ec3f\x20=\x200.5'+'\x20*\x20(L_[1]\x20'+'-\x20L_[0]);\x0a'+'\x0a\x20\x20\x20\x20let\x20C'+'_Minv:\x20vec'+'3f\x20\x20=\x20Minv'+'\x20*\x20C;\x0a\x20\x20\x20\x20'+'let\x20V1_Min'+'v:\x20vec3f\x20='+'\x20Minv\x20*\x20V1'+';\x0a\x20\x20\x20\x20let\x20'+'V2_Minv:\x20v'+'ec3f\x20=\x20Min'+'v\x20*\x20V2;\x0a\x0a\x20'+'\x20\x20\x20//\x20comp'+'ute\x20eigenv'+'ectors\x20of\x20'+'ellipse\x0a\x20\x20'+'\x20\x20var\x20a:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20b:\x20f32;\x0a'+'\x20\x20\x20\x20let\x20d1'+'1:\x20f32\x20=\x20d'+'ot(V1_Minv'+',\x20V1_Minv)'+';\x0a\x20\x20\x20\x20let\x20'+'d22:\x20f32\x20='+'\x20dot(V2_Mi'+'nv,\x20V2_Min'+'v);\x0a\x20\x20\x20\x20le'+'t\x20d12:\x20f32'+'\x20=\x20dot(V1_'+'Minv,\x20V2_M'+'inv);\x0a\x20\x20\x20\x20'+'if\x20(abs(d1'+'2)\x20/\x20sqrt('+'d11\x20*\x20d22)'+'\x20>\x200.0001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20tr:\x20f'+'32\x20=\x20d11\x20+'+'\x20d22;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'t_inner:\x20f'+'32\x20=\x20-d12\x20'+'*\x20d12\x20+\x20d1'+'1\x20*\x20d22;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20det:\x20f32\x20'+'=\x20sqrt(det'+'_inner);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20u:\x20f32\x20=\x20'+'0.5\x20*\x20sqrt'+'(tr\x20-\x202.0\x20'+'*\x20det);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'v:\x20f32\x20=\x200'+'.5\x20*\x20sqrt('+'tr\x20+\x202.0\x20*'+'\x20det);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20e'+'_max:\x20f32\x20'+'=\x20(u\x20+\x20v)\x20'+'*\x20(u\x20+\x20v);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20e_min:\x20'+'f32\x20=\x20(u\x20-'+'\x20v)\x20*\x20(u\x20-'+'\x20v);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20V1'+'_:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va')+('r\x20V2_:\x20vec'+'3f;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(d11'+'\x20>\x20d22)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V1_\x20=\x20d1'+'2\x20*\x20V1_Min'+'v\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2_Minv;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20V2_\x20=\x20d12'+'\x20*\x20V1_Minv'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2_Minv;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12*V2_'+'Minv\x20+\x20(e_'+'max\x20-\x20d22)'+'*V1_Minv;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V2_\x20=\x20d1'+'2*V2_Minv\x20'+'+\x20(e_min\x20-'+'\x20d22)*V1_M'+'inv;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20e_max;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20b'+'\x20=\x201.0\x20/\x20e'+'_min;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20V1\x20=\x20n'+'ormalize(V'+'1_);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20V2\x20=\x20no'+'rmalize(V2'+'_);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20dot(V'+'1_Minv,\x20V1'+'_Minv);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20b\x20=\x20'+'1.0\x20/\x20dot('+'V2_Minv,\x20V'+'2_Minv);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V1\x20'+'=\x20V1_Minv\x20'+'*\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20=\x20V2_Min'+'v\x20*\x20sqrt(b'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20V3'+':\x20vec3f\x20=\x20'+'normalize('+'cross(V1,\x20'+'V2));\x0a\x20\x20\x20\x20'+'if\x20(dot(C_'+'Minv,\x20V3)\x20'+'<\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V3\x20'+'=\x20V3\x20*\x20-1.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20let\x20L:'+'\x20f32\x20\x20=\x20do'+'t(V3,\x20C_Mi'+'nv);\x0a\x20\x20\x20\x20l'+'et\x20x0:\x20f32'+'\x20=\x20dot(V1,'+'\x20C_Minv)\x20/'+'\x20L;\x0a\x20\x20\x20\x20le'+'t\x20y0:\x20f32\x20'+'=\x20dot(V2,\x20'+'C_Minv)\x20/\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20E1:\x20f32\x20'+'=\x20inverseS'+'qrt(a);\x0a\x20\x20'+'\x20\x20let\x20E2:\x20'+'f32\x20=\x20inve'+'rseSqrt(b)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20a_scaled\x20'+'=\x20a\x20*\x20L\x20*\x20'+'L;\x0a\x20\x20\x20\x20let'+'\x20b_scaled\x20'+'=\x20b\x20*\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20c0:\x20f32\x20'+'=\x20a_scaled'+'\x20*\x20b_scale'+'d;\x0a\x20\x20\x20\x20let'+'\x20c1:\x20f32\x20='+'\x20a_scaled\x20'+'*\x20b_scaled')+('\x20*\x20(1.0\x20+\x20'+'x0\x20*\x20x0\x20+\x20'+'y0\x20*\x20y0)\x20-'+'\x20a_scaled\x20'+'-\x20b_scaled'+';\x0a\x20\x20\x20\x20let\x20'+'c2:\x20f32\x20=\x20'+'1.0\x20-\x20a_sc'+'aled\x20*\x20(1.'+'0\x20+\x20x0\x20*\x20x'+'0)\x20-\x20b_sca'+'led\x20*\x20(1.0'+'\x20+\x20y0\x20*\x20y0'+');\x0a\x20\x20\x20\x20let'+'\x20c3:\x20f32\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20let\x20roots'+':\x20vec3f\x20=\x20'+'SolveCubic'+'(vec4f(c0,'+'\x20c1,\x20c2,\x20c'+'3));\x0a\x20\x20\x20\x20l'+'et\x20e1:\x20f32'+'\x20=\x20roots.x'+';\x0a\x20\x20\x20\x20let\x20'+'e2:\x20f32\x20=\x20'+'roots.y;\x0a\x20'+'\x20\x20\x20let\x20e3:'+'\x20f32\x20=\x20roo'+'ts.z;\x0a\x0a\x20\x20\x20'+'\x20var\x20avgDi'+'r:\x20vec3f\x20='+'\x20vec3f(a_s'+'caled\x20*\x20x0'+'\x20/\x20(a_scal'+'ed\x20-\x20e2),\x20'+'b_scaled\x20*'+'\x20y0\x20/\x20(b_s'+'caled\x20-\x20e2'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20let\x20ro'+'tate:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20let\x20L'+'1:\x20f32\x20=\x20s'+'qrt(-e2\x20/\x20'+'e3);\x0a\x20\x20\x20\x20l'+'et\x20L2:\x20f32'+'\x20=\x20sqrt(-e'+'2\x20/\x20e1);\x0a\x0a'+'\x20\x20\x20\x20let\x20fo'+'rmFactor:\x20'+'f32\x20=\x20max('+'0.0,\x20L1\x20*\x20'+'L2\x20*\x20inver'+'seSqrt((1.'+'0\x20+\x20L1\x20*\x20L'+'1)\x20*\x20(1.0\x20'+'+\x20L2\x20*\x20L2)'+'));\x0a\x0a\x20\x20\x20\x20c'+'onst\x20LUT_S'+'IZE_disk:\x20'+'f32\x20=\x2064.0'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_SCAL'+'E_disk:\x20f3'+'2\x20=\x20(\x20LUT_'+'SIZE_disk\x20'+'-\x201.0\x20)\x20/\x20'+'LUT_SIZE_d'+'isk;\x0a\x20\x20\x20\x20c'+'onst\x20LUT_B'+'IAS_disk:\x20'+'f32\x20=\x200.5\x20'+'/\x20LUT_SIZE'+'_disk;\x0a\x0a\x20\x20'+'\x20\x20//\x20use\x20t'+'abulated\x20h'+'orizon-cli'+'pped\x20spher'+'e\x0a\x20\x20\x20\x20var\x20'+'uv:\x20vec2f\x20'+'=\x20vec2f(av'+'gDir.z\x20*\x200'+'.5\x20+\x200.5,\x20'+'formFactor'+');\x0a\x20\x20\x20\x20uv\x20'+'=\x20uv\x20*\x20LUT'+'_SCALE_dis'+'k\x20+\x20LUT_BI'+'AS_disk;\x0a\x0a'+'\x20\x20\x20\x20let\x20sc')+('ale:\x20f32\x20='+'\x20textureSa'+'mpleLevel('+'areaLights'+'LutTex2,\x20a'+'reaLightsL'+'utTex2Samp'+'ler,\x20uv,\x200'+'.0).w;\x0a\x0a\x20\x20'+'\x20\x20return\x20f'+'ormFactor\x20'+'*\x20scale;\x0a}'+'\x0a\x0a//\x20LTC_E'+'valuateDis'+'k\x20in\x20some\x20'+'rare\x20cases'+'\x20genereate'+'s\x20NaN\x20valu'+'es\x20in\x20a\x20or'+'\x20b,\x20just\x20b'+'efore\x20\x27flo'+'at\x20c0\x20=\x20a\x20'+'*\x20b;\x27\x0a//\x20G'+'et\x20rid\x20of\x20'+'those\x20Nan\x20'+'values\x20bef'+'ore\x20they\x20p'+'ropagate\x20f'+'urther,\x20as'+'\x20in\x20case\x20o'+'f\x20bloom\x20/\x20'+'DOF\x20blurs\x20'+'they\x0a//\x20pr'+'opagate\x20to'+'\x20large\x20are'+'as.\x20I\x20didn'+'\x27t\x20find\x20th'+'e\x20actual\x20r'+'eason\x20wher'+'e\x20those\x20co'+'me\x20from,\x20s'+'o\x20that\x20is\x20'+'still\x20TODO'+'.\x0a//\x20Note\x20'+'that\x20only\x20'+'disk/spher'+'e\x20lights\x20a'+'re\x20causing'+'\x20it,\x20so\x20on'+'ly\x20handle\x20'+'those.\x0afn\x20'+'FixNan(val'+'ue:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20v'+'alue\x20!=\x20va'+'lue\x20check\x20'+'for\x20NaN\x20as'+'\x20isnan()\x20i'+'s\x20not\x20avai'+'lable\x20in\x20W'+'GSL\x0a\x20\x20\x20\x20re'+'turn\x20selec'+'t(value,\x200'+'.0,\x20value\x20'+'!=\x20value);'+'\x0a}\x0a\x0afn\x20get'+'RectLightD'+'iffuse(wor'+'ldNormal:\x20'+'vec3f,\x20vie'+'wDir:\x20vec3'+'f,\x20lightDi'+'r:\x20vec3f,\x20'+'lightDirNo'+'rm:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20id'+'entityMat\x20'+'=\x20mat3x3f('+'vec3f(1.0,'+'\x200.0,\x200.0)'+',\x20vec3f(0.'+'0,\x201.0,\x200.'+'0),\x20vec3f('+'0.0,\x200.0,\x20'+'1.0));\x0a\x20\x20\x20'+'\x20return\x20LT'+'C_Evaluate'+'Rect(\x20worl'+'dNormal,\x20v'+'iewDir,\x20vP'+'ositionW,\x20'+'identityMa'+'t,\x20dLTCCoo'+'rds\x20);\x0a}\x0a\x0a'+'fn\x20getDisk'+'LightDiffu'+'se(worldNo'+'rmal:\x20vec3')+('f,\x20viewDir'+':\x20vec3f,\x20l'+'ightDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20identi'+'tyMat\x20=\x20ma'+'t3x3f(vec3'+'f(1.0,\x200.0'+',\x200.0),\x20ve'+'c3f(0.0,\x201'+'.0,\x200.0),\x20'+'vec3f(0.0,'+'\x200.0,\x201.0)'+');\x0a\x20\x20\x20\x20ret'+'urn\x20FixNan'+'(LTC_Evalu'+'ateDisk(\x20w'+'orldNormal'+',\x20viewDir,'+'\x20vPosition'+'W,\x20identit'+'yMat,\x20dLTC'+'Coords\x20));'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tDiffuse(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20let\x20fall'+'off:\x20f32\x20='+'\x20dSphereRa'+'dius\x20/\x20(do'+'t(lightDir'+',\x20lightDir'+')\x20+\x20dSpher'+'eRadius);\x0a'+'\x20\x20\x20\x20return'+'\x20FixNan(ge'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNorm)\x20'+'*\x20falloff)'+';\x0a}\x0a\x0afn\x20ge'+'tLTCLightI'+'nvMat(uv:\x20'+'vec2f)\x20->\x20'+'mat3x3f\x20{\x0a'+'\x20\x20\x20\x20let\x20t1'+':\x20vec4f\x20=\x20'+'textureSam'+'pleLevel(a'+'reaLightsL'+'utTex1,\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er,\x20uv,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(\x20'+'t1.x,\x200.0,'+'\x20t1.y\x20),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(\x200.0,\x201'+'.0,\x200.0\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(\x20t1.z'+',\x200.0,\x20t1.'+'w\x20)\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight')+('InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getRectLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20cal'+'cDiskLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getDiskLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcDiskLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tSpecular('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'DiskLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir,\x20'+'dLTCUV);\x0a}'+'\x0a'),sD='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_me'+'talness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getMe'+'talness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'metalness:'+'\x20f32\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20metal'+'ness\x20=\x20met'+'alness\x20*\x20u'+'niform.mat'+'erial_meta'+'lness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'metalness\x20'+'=\x20metalnes'+'s\x20*\x20textur'+'eSampleBia'+'s({STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+',\x20{STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_METALN'+'ESS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_METALNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_VE'+'RTEX\x0a\x20\x20\x20\x20m'+'etalness\x20='+'\x20metalness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'METALNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dMetal'+'ness\x20=\x20met'+'alness;\x0a}\x0a',iD='\x0avar\x20textu'+'re_msdfMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20texture'+'_msdfMapSa'+'mpler:\x20sam'+'pler;\x0a\x0afn\x20'+'median(r:\x20'+'f32,\x20g:\x20f3'+'2,\x20b:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(min(r'+',\x20g),\x20min('+'max(r,\x20g),'+'\x20b));\x0a}\x0a\x0af'+'n\x20map(min:'+'\x20f32,\x20max:'+'\x20f32,\x20v:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(v\x20-\x20m'+'in)\x20/\x20(max'+'\x20-\x20min);\x0a}'+'\x0a\x0auniform\x20'+'font_sdfIn'+'tensity:\x20f'+'32;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20font_px'+'range:\x20f32'+';\x20\x20\x20\x20\x20\x20//\x20'+'the\x20number'+'\x20of\x20pixels'+'\x20between\x20i'+'nside\x20and\x20'+'outside\x20th'+'e\x20font\x20in\x20'+'SDF\x0aunifor'+'m\x20font_tex'+'tureWidth:'+'\x20f32;\x20//\x20t'+'he\x20width\x20o'+'f\x20the\x20text'+'ure\x20atlas\x0a'+'\x0a#ifndef\x20L'+'IT_MSDF_TE'+'XT_ATTRIBU'+'TE\x0a\x20\x20\x20\x20uni'+'form\x20outli'+'ne_color:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'utline_thi'+'ckness:\x20f3'+'2;\x0a\x20\x20\x20\x20uni'+'form\x20shado'+'w_color:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'uniform\x20sh'+'adow_offse'+'t:\x20vec2f;\x0a'+'#else\x0a\x20\x20\x20\x20'+'varying\x20ou'+'tline_colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20outline_'+'thickness:'+'\x20f32;\x0a\x20\x20\x20\x20'+'varying\x20sh'+'adow_color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20varying'+'\x20shadow_of'+'fset:\x20vec2'+'f;\x0a#endif\x0a'+'\x0afn\x20applyM'+'sdf(color_'+'in:\x20vec4f)'+'\x20->\x20vec4f\x20'+'{\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_M'+'SDF_TEXT_A'+'TTRIBUTE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20uniform.'+'outline_co'+'lor;\x0a\x20\x20\x20\x20\x20'+('\x20\x20\x20var\x20out'+'line_thick'+'nessValue\x20'+'=\x20uniform.'+'outline_th'+'ickness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_co'+'lorValue\x20='+'\x20uniform.s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_offsetVa'+'lue\x20=\x20unif'+'orm.shadow'+'_offset;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utline_thi'+'cknessValu'+'e\x20=\x20outlin'+'e_thicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_colorVal'+'ue\x20=\x20shado'+'w_color;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_of'+'fsetValue\x20'+'=\x20shadow_o'+'ffset;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20Conv'+'ert\x20to\x20lin'+'ear\x20space\x20'+'before\x20pro'+'cessing\x0a\x20\x20'+'\x20\x20//\x20TODO:'+'\x20ideally\x20t'+'his\x20would\x20'+'receive\x20th'+'e\x20color\x20in'+'\x20linear\x20sp'+'ace,\x20but\x20t'+'hat\x20would\x20'+'require\x20la'+'rger\x20chang'+'es\x0a\x20\x20\x20\x20//\x20'+'on\x20the\x20eng'+'ine\x20side,\x20'+'with\x20the\x20w'+'ay\x20premult'+'iplied\x20alp'+'ha\x20is\x20hand'+'led\x20as\x20wel'+'l.\x0a\x20\x20\x20\x20var'+'\x20color\x20=\x20v'+'ec4f(gamma'+'CorrectInp'+'utVec3(col'+'or_in.rgb)'+',\x20color_in'+'.a);\x0a\x0a\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20field\x0a'+'\x20\x20\x20\x20let\x20ts'+'ample:\x20vec'+'3f\x20=\x20textu'+'reSample(t'+'exture_msd'+'fMap,\x20text'+'ure_msdfMa'+'pSampler,\x20'+'vUv0).rgb;'+'\x0a\x20\x20\x20\x20let\x20u'+'vShdw:\x20vec'+'2f\x20=\x20vUv0\x20'+'-\x20shadow_o'+'ffsetValue'+';\x0a\x20\x20\x20\x20let\x20'+'ssample:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'(texture_m'+'sdfMap,\x20te'+'xture_msdf'+'MapSampler'+',\x20uvShdw).'+'rgb;\x0a\x0a\x20\x20\x20\x20'+'//\x20get\x20the'+'\x20signed\x20di'+'stance\x20val'+'ue\x0a\x20\x20\x20\x20let')+('\x20sigDist:\x20'+'f32\x20=\x20medi'+'an(tsample'+'.r,\x20tsampl'+'e.g,\x20tsamp'+'le.b);\x0a\x20\x20\x20'+'\x20var\x20sigDi'+'stShdw:\x20f3'+'2\x20=\x20median'+'(ssample.r'+',\x20ssample.'+'g,\x20ssample'+'.b);\x0a\x0a\x20\x20\x20\x20'+'//\x20smoothi'+'ng\x20limit\x20-'+'\x20smaller\x20v'+'alue\x20makes'+'\x20for\x20sharp'+'er\x20but\x20mor'+'e\x20aliased\x20'+'text,\x20espe'+'cially\x20on\x20'+'angles\x0a\x20\x20\x20'+'\x20//\x20too\x20la'+'rge\x20value\x20'+'(0.5)\x20crea'+'tes\x20a\x20dark'+'\x20glow\x20arou'+'nd\x20the\x20let'+'ters\x0a\x20\x20\x20\x20l'+'et\x20smoothi'+'ngMax:\x20f32'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20let'+'\x20w:\x20vec2f\x20'+'=\x20abs(dpdx'+'(vUv0))\x20+\x20'+'abs(dpdy(v'+'Uv0));\x0a\x20\x20\x20'+'\x20let\x20smoot'+'hing:\x20f32\x20'+'=\x20clamp(w.'+'x\x20*\x20unifor'+'m.font_tex'+'tureWidth\x20'+'/\x20uniform.'+'font_pxran'+'ge,\x200.0,\x20s'+'moothingMa'+'x);\x0a\x0a\x20\x20\x20\x20l'+'et\x20mapMin:'+'\x20f32\x20=\x200.0'+'5;\x0a\x20\x20\x20\x20let'+'\x20mapMax:\x20f'+'32\x20=\x20clamp'+'(1.0\x20-\x20uni'+'form.font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20let\x20si'+'gDistInner'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist);\x0a\x20\x20'+'\x20\x20let\x20sigD'+'istOutline'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist\x20+\x20ou'+'tline_thic'+'knessValue'+');\x0a\x20\x20\x20\x20sig'+'DistShdw\x20='+'\x20map(mapMi'+'n,\x20mapMax,'+'\x20sigDistSh'+'dw\x20+\x20outli'+'ne_thickne'+'ssValue);\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'enter:\x20f32'+'\x20=\x200.5;\x0a\x20\x20'+'\x20\x20//\x20calcu'+'late\x20smoot'+'hing\x20and\x20u'+'se\x20to\x20gene')+('rate\x20opaci'+'ty\x0a\x20\x20\x20\x20let'+'\x20inside:\x20f'+'32\x20=\x20smoot'+'hstep(cent'+'er\x20-\x20smoot'+'hing,\x20cent'+'er\x20+\x20smoot'+'hing,\x20sigD'+'istInner);'+'\x0a\x20\x20\x20\x20let\x20o'+'utline:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stOutline)'+';\x0a\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20let\x20tc'+'olor_outli'+'ne:\x20vec4f\x20'+'=\x20outline\x20'+'*\x20vec4f(ou'+'tline_colo'+'rValue.a\x20*'+'\x20outline_c'+'olorValue.'+'rgb,\x20outli'+'ne_colorVa'+'lue.a);\x0a\x20\x20'+'\x20\x20var\x20tcol'+'or:\x20vec4f\x20'+'=\x20select(v'+'ec4f(0.0),'+'\x20tcolor_ou'+'tline,\x20out'+'line\x20>\x20ins'+'ide);\x0a\x20\x20\x20\x20'+'tcolor\x20=\x20m'+'ix(tcolor,'+'\x20color,\x20in'+'side);\x0a\x0a\x20\x20'+'\x20\x20let\x20scol'+'or_shadow:'+'\x20vec4f\x20=\x20s'+'hadow\x20*\x20ve'+'c4f(shadow'+'_colorValu'+'e.a\x20*\x20shad'+'ow_colorVa'+'lue.rgb,\x20s'+'hadow_colo'+'rValue.a);'+'\x0a\x20\x20\x20\x20let\x20s'+'color:\x20vec'+'4f\x20=\x20selec'+'t(tcolor,\x20'+'scolor_sha'+'dow,\x20shado'+'w\x20>\x20outlin'+'e);\x0a\x20\x20\x20\x20tc'+'olor\x20=\x20mix'+'(scolor,\x20t'+'color,\x20out'+'line);\x0a\x0a\x20\x20'+'\x20\x20//\x20Conve'+'rt\x20back\x20to'+'\x20gamma\x20spa'+'ce\x20before\x20'+'returning\x0a'+'\x20\x20\x20\x20tcolor'+'\x20=\x20vec4f(g'+'ammaCorrec'+'tOutput(tc'+'olor.rgb),'+'\x20tcolor.a)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20tcolor'+';\x0a}\x0a'),rD='\x0a\x0afn\x20getSp'+'ecularModu'+'late(specu'+'larity:\x20ve'+'c3f,\x20albed'+'o:\x20vec3f,\x20'+'metalness:'+'\x20f32,\x20f0:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20dielec'+'tricF0:\x20ve'+'c3f\x20=\x20f0\x20*'+'\x20speculari'+'ty;\x0a\x20\x20\x20\x20re'+'turn\x20mix(d'+'ielectricF'+'0,\x20albedo,'+'\x20metalness'+');\x0a}\x0a\x0afn\x20g'+'etAlbedoMo'+'dulate(alb'+'edo:\x20vec3f'+',\x20metalnes'+'s:\x20f32)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'albedo\x20*\x20('+'1.0\x20-\x20meta'+'lness);\x0a}\x0a',aD='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var\x20morph'+'Texture:\x20t'+'exture_2d_'+'array<f32>'+';\x0a\x20\x20\x20\x20unif'+'orm\x20morphF'+'actor:\x20arr'+'ay<f32,\x20{M'+'ORPH_TEXTU'+'RE_MAX_COU'+'NT}>;\x0a\x20\x20\x20\x20'+'uniform\x20mo'+'rphIndex:\x20'+'array<u32,'+'\x20{MORPH_TE'+'XTURE_MAX_'+'COUNT}>;\x0a\x20'+'\x20\x20\x20uniform'+'\x20count:\x20u3'+'2;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x0a\x20\x20'+'\x20\x20fn\x20fragm'+'entMain(in'+'put\x20:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20color\x20='+'\x20vec3f(0,\x20'+'0,\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20t'+'extureDims'+'\x20=\x20texture'+'Dimensions'+'(morphText'+'ure);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20pi'+'xelCoords\x20'+'=\x20vec2i(in'+'put.uv0\x20*\x20'+'vec2f(text'+'ureDims));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'u32\x20=\x200;\x20i'+'\x20<\x20uniform'+'.count;\x20i\x20'+'=\x20i\x20+\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'tureIndex:'+'\x20u32\x20=\x20uni'+'form.morph'+'Index[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20delta\x20'+'=\x20textureL'+'oad(morphT'+'exture,\x20pi'+'xelCoords,'+'\x20textureIn'+'dex,\x200).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20+=\x20unifor'+'m.morphFac'+'tor[i].ele'+'ment\x20*\x20del'+'ta;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'color,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',nD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',oD='\x0aattribute'+'\x20vertex_ou'+'tlineParam'+'eters:\x20vec'+'3f;\x0aattrib'+'ute\x20vertex'+'_shadowPar'+'ameters:\x20v'+'ec3f;\x0a\x0avar'+'ying\x20outli'+'ne_color:\x20'+'vec4f;\x0avar'+'ying\x20outli'+'ne_thickne'+'ss:\x20f32;\x0av'+'arying\x20sha'+'dow_color:'+'\x20vec4f;\x0ava'+'rying\x20shad'+'ow_offset:'+'\x20vec2f;\x0a\x0av'+'ar<private'+'>\x20dOutline'+'Color:\x20vec'+'4f;\x0avar<pr'+'ivate>\x20dOu'+'tlineThick'+'ness:\x20f32;'+'\x0avar<priva'+'te>\x20dShado'+'wColor:\x20ve'+'c4f;\x0avar<p'+'rivate>\x20dS'+'hadowOffse'+'t:\x20vec2f;\x0a'+'\x0afn\x20unpack'+'MsdfParams'+'()\x20{\x0a\x20\x20\x20\x20l'+'et\x20little:'+'\x20vec3f\x20=\x20v'+'ertex_outl'+'ineParamet'+'ers\x20%\x20vec3'+'f(256.0);\x0a'+'\x20\x20\x20\x20let\x20bi'+'g:\x20vec3f\x20='+'\x20(vertex_o'+'utlinePara'+'meters\x20-\x20l'+'ittle)\x20/\x202'+'56.0;\x0a\x0a\x20\x20\x20'+'\x20dOutlineC'+'olor\x20=\x20vec'+'4f(little.'+'x,\x20big.x,\x20'+'little.y,\x20'+'big.y)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20//\x20_outli'+'neThicknes'+'sScale\x20==='+'\x200.2\x0a\x20\x20\x20\x20d'+'OutlineThi'+'ckness\x20=\x20l'+'ittle.z\x20/\x20'+'255.0\x20*\x200.'+'2;\x0a\x0a\x20\x20\x20\x20le'+'t\x20little_s'+'hadow\x20=\x20ve'+'rtex_shado'+'wParameter'+'s\x20%\x20vec3f('+'256.0);\x0a\x20\x20'+'\x20\x20let\x20big_'+'shadow\x20=\x20('+'vertex_sha'+'dowParamet'+'ers\x20-\x20litt'+'le_shadow)'+'\x20/\x20256.0;\x0a'+'\x0a\x20\x20\x20\x20dShad'+'owColor\x20=\x20'+'vec4f(litt'+'le_shadow.'+'x,\x20big_sha'+'dow.x,\x20lit'+'tle_shadow'+'.y,\x20big_sh'+'adow.y)\x20/\x20'+'255.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+('ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20dShad'+'owOffset\x20='+'\x20(vec2f(li'+'ttle_shado'+'w.z,\x20big_s'+'hadow.z)\x20/'+'\x20127.0\x20-\x201'+'.0)\x20*\x200.00'+'5;\x0a}\x0a'),lD='\x0avar<priva'+'te>\x20dNorma'+'lMatrix:\x20m'+'at3x3f;\x0a\x0af'+'n\x20getNorma'+'l()\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20d'+'NormalMatr'+'ix\x20=\x20getNo'+'rmalMatrix'+'(dModelMat'+'rix);\x0a\x20\x20\x20\x20'+'let\x20localN'+'ormal:\x20vec'+'3f\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}',cD='\x0a\x0aattribut'+'e\x20vertex_n'+'ormal:\x20vec'+'3f;\x0a\x0aunifo'+'rm\x20matrix_'+'normal:\x20ma'+'t3x3f;\x0a\x0a#i'+'fdef\x20MORPH'+'ING_NORMAL'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MORPHING'+'_INT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20mor'+'phNormalTe'+'x:\x20texture'+'_2d<u32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphNor'+'malTexSamp'+'ler:\x20sampl'+'er;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hNormalTex'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20morphNorm'+'alTexSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0afn\x20getLo'+'calNormal('+'vertexNorm'+'al:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20localNorm'+'al:\x20vec3f\x20'+'=\x20vertexNo'+'rmal;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_NOR'+'MAL\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20mor'+'phUV:\x20vec2'+'i\x20=\x20getTex'+'tureMorphC'+'oords();\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_INT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20morphN'+'ormalInt:\x20'+'vec4u\x20=\x20te'+'xtureLoad('+'morphNorma'+'lTex,\x20morp'+'hUV,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20morph'+'NormalF:\x20v'+'ec3f\x20=\x20vec'+'3f(morphNo'+'rmalInt.xy'+'z)\x20/\x2065535'+'.0\x20*\x202.0\x20-'+'\x201.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormalF;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'morphNorma'+'l:\x20vec3f\x20='+'\x20textureLo'+'ad(morphNo'+'rmalTex,\x20m'+'orphUV,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormal;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20lo'+'calNormal;'+'\x0a}\x0a\x0a#if\x20de'+'fined(SKIN'+')\x20||\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20fn\x20get'+('NormalMatr'+'ix(modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ma'+'t3x3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20mat3x3f'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20fn'+'\x20getNormal'+'Matrix(mod'+'elMatrix:\x20'+'mat4x4f)\x20-'+'>\x20mat3x3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20mat'+'3x3f(model'+'Matrix[0].'+'xyz,\x20model'+'Matrix[1].'+'xyz,\x20model'+'Matrix[2].'+'xyz);\x0a\x20\x20\x20\x20'+'}\x0a#else\x0a\x20\x20'+'\x20\x20fn\x20getNo'+'rmalMatrix'+'(modelMatr'+'ix:\x20mat4x4'+'f)\x20->\x20mat3'+'x3f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_norm'+'al;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),hD='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_bu'+'mpiness:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20un'+'iform\x20mate'+'rial_norma'+'lDetailMap'+'Bumpiness:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20//\x20https:'+'//blog.sel'+'fshadow.co'+'m/publicat'+'ions/blend'+'ing-in-det'+'ail/#detai'+'l-oriented'+'\x0a\x20\x20\x20\x20fn\x20bl'+'endNormals'+'(inN1:\x20vec'+'3f,\x20inN2:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'n1:\x20vec3f\x20'+'=\x20inN1\x20+\x20v'+'ec3f(0.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20n2:\x20vec'+'3f\x20=\x20inN2\x20'+'*\x20vec3f(-1'+'.0,\x20-1.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20n1\x20*\x20dot('+'n1,\x20n2)\x20/\x20'+'n1.z\x20-\x20n2;'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0afn\x20ge'+'tNormal()\x20'+'{\x0a#ifdef\x20S'+'TD_NORMAL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20var\x20norm'+'alMap:\x20vec'+'3f\x20=\x20{STD_'+'NORMAL_TEX'+'TURE_DECOD'+'E}(texture'+'SampleBias'+'({STD_NORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_NORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_NOR'+'MAL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias));\x0a'+'\x20\x20\x20\x20normal'+'Map\x20=\x20mix('+'vec3f(0.0,'+'\x200.0,\x201.0)'+',\x20normalMa'+'p,\x20uniform'+'.material_'+'bumpiness)'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_NO'+'RMALDETAIL'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20normalDet'+'ailMap:\x20ve'+'c3f\x20=\x20{STD'+'_NORMALDET'+'AIL_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE_NAME},'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_NAM'+'E}Sampler,'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_UV}'+(',\x20uniform.'+'textureBia'+'s));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalD'+'etailMap\x20='+'\x20mix(vec3f'+'(0.0,\x200.0,'+'\x201.0),\x20nor'+'malDetailM'+'ap,\x20unifor'+'m.material'+'_normalDet'+'ailMapBump'+'iness);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20norm'+'alMap\x20=\x20bl'+'endNormals'+'(normalMap'+',\x20normalDe'+'tailMap);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20nor'+'malize(dTB'+'N\x20*\x20normal'+'Map);\x0a#els'+'e\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a'),dD='\x0auniform\x20m'+'aterial_op'+'acity:\x20f32'+';\x0a\x0afn\x20getO'+'pacity()\x20{'+'\x0a\x20\x20\x20\x20dAlph'+'a\x20=\x20unifor'+'m.material'+'_opacity;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E\x0a\x20\x20\x20\x20dAlp'+'ha\x20=\x20dAlph'+'a\x20*\x20textur'+'eSampleBia'+'s({STD_OPA'+'CITY_TEXTU'+'RE_NAME},\x20'+'{STD_OPACI'+'TY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'OPACITY_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20=\x20dA'+'lpha\x20*\x20cla'+'mp(vVertex'+'Color.{STD'+'_OPACITY_V'+'ERTEX_CHAN'+'NEL},\x200.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',fD='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20blueNo'+'iseJitter:'+'\x20vec4f;\x0a\x0a#'+'if\x20STD_OPA'+'CITY_DITHE'+'R\x20==\x20BLUEN'+'OISE\x0a\x20\x20\x20\x20v'+'ar\x20blueNoi'+'seTex32\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20blueN'+'oiseTex32S'+'ampler\x20:\x20s'+'ampler;\x0a#e'+'ndif\x0a\x0afn\x20o'+'pacityDith'+'er(alpha:\x20'+'f32,\x20id:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'#if\x20STD_OP'+'ACITY_DITH'+'ER\x20==\x20BAYE'+'R8\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20nois'+'e:\x20f32\x20=\x20b'+'ayer8(floo'+'r((pcPosit'+'ion.xy\x20+\x20u'+'niform.blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+')\x20%\x20vec2f('+'8.0)))\x20/\x206'+'4.0;\x0a\x0a\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20=='+'\x20BLUENOISE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uv\x20'+'=\x20fract(pc'+'Position.x'+'y\x20/\x2032.0\x20+'+'\x20uniform.b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20noise:\x20f3'+'2\x20=\x20textur'+'eSampleLev'+'el(blueNoi'+'seTex32,\x20b'+'lueNoiseTe'+'x32Sampler'+',\x20uv,\x200.0)'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20IGNNOI'+'SE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ba'+'sed\x20on\x20htt'+'ps://www.i'+'ryoku.com/'+'next-gener'+'ation-post'+'-processin'+'g-in-call-'+'of-duty-ad'+'vanced-war'+'fare/\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20magic\x20=\x20'+'vec3f(0.06'+'711056,\x200.'+'00583715,\x20'+'52.9829189'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'oise:\x20f32\x20'+'=\x20fract(ma'+'gic.z\x20*\x20fr'+'act(dot(pc'+'Position.x'+'y\x20+\x20unifor'+'m.blueNois'+'eJitter.xy'+'\x20+\x20id,\x20mag'+('ic.xy)));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20conve'+'rt\x20the\x20noi'+'se\x20to\x20line'+'ar\x20space,\x20'+'as\x20that\x20is'+'\x20specified'+'\x20in\x20sRGB\x20s'+'pace\x20(stor'+'es\x20percept'+'ual\x20values'+')\x0a\x20\x20\x20\x20nois'+'e\x20=\x20pow(no'+'ise,\x202.2);'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'alpha\x20<\x20no'+'ise)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),uD='\x0a',pD='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(outp'+'ut.color.r'+'gb,\x20litArg'+'s_opacity)'+';\x0a\x0a#elif\x20L'+'IT_BLEND_T'+'YPE\x20==\x20PRE'+'MULTIPLIED'+'\x0a\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(out'+'put.color.'+'rgb\x20*\x20litA'+'rgs_opacit'+'y,\x20litArgs'+'_opacity);'+'\x0a\x0a#else\x0a\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(output'+'.color.rgb'+',\x201.0);\x0a\x0a#'+'endif\x0a',mD='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0avar\x20sour'+'ce:\x20textur'+'e_2d<f32>;'+'\x0avar\x20sourc'+'eSampler:\x20'+'sampler;\x0a\x0a'+'@fragment\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'textureSam'+'ple(source'+',\x20sourceSa'+'mpler,\x20inp'+'ut.vUv0);\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'+'\x0a',_D='\x0a\x0auniform\x20'+'material_s'+'heen:\x20vec3'+'f;\x0a\x0afn\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20var\x20sh'+'eenColor\x20='+'\x20uniform.m'+'aterial_sh'+'een;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_TEX'+'TURE\x0a\x20\x20\x20\x20s'+'heenColor\x20'+'=\x20sheenCol'+'or\x20*\x20{STD_'+'SHEEN_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SHEEN'+'_TEXTURE_N'+'AME},\x20{STD'+'_SHEEN_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEEN_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as)).{STD_'+'SHEEN_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_VER'+'TEX\x0a\x20\x20\x20\x20sh'+'eenColor\x20='+'\x20sheenColo'+'r\x20*\x20satura'+'te3(vVerte'+'xColor.{ST'+'D_SHEEN_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20sSpecula'+'rity\x20=\x20she'+'enColor;\x0a}'+'\x0a',gD='\x0auniform\x20m'+'aterial_sh'+'eenGloss:\x20'+'f32;\x0a\x0afn\x20g'+'etSheenGlo'+'ssiness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'sheenGloss'+'iness\x20=\x20un'+'iform.mate'+'rial_sheen'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SHEENGL'+'OSS_TEXTUR'+'E\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_SHEEN'+'GLOSS_TEXT'+'URE_NAME},'+'\x20{STD_SHEE'+'NGLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_UV},\x20un'+'iform.text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20=\x20'+'sheenGloss'+'iness\x20*\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'GLOSS_VERT'+'EX_CHANNEL'+'});\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEENGLOS'+'S_INVERT\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20='+'\x201.0\x20-\x20she'+'enGlossine'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'sGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'+\x200.000000'+'1;\x0a}\x0a',SD='\x0auniform\x20m'+'aterial_he'+'ightMapFac'+'tor:\x20f32;\x0a'+'\x0afn\x20getPar'+'allax()\x20{\x0a'+'\x20\x20\x20\x20var\x20pa'+'rallaxScal'+'e\x20=\x20unifor'+'m.material'+'_heightMap'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20var\x20hei'+'ght:\x20f32\x20='+'\x20textureSa'+'mpleBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_HEIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_HEIGHT_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'height\x20=\x20h'+'eight\x20*\x20pa'+'rallaxScal'+'e\x20-\x20parall'+'axScale\x20*\x20'+'0.5;\x0a\x20\x20\x20\x20v'+'ar\x20viewDir'+'T:\x20vec3f\x20='+'\x20dViewDirW'+'\x20*\x20dTBN;\x0a\x0a'+'\x20\x20\x20\x20viewDi'+'rT.z\x20=\x20vie'+'wDirT.z\x20+\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',yD='\x0auniform\x20m'+'eshInstanc'+'eId:\x20u32;\x0a'+'\x0afn\x20getPic'+'kOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20let\x20i'+'nv:\x20vec4f\x20'+'=\x20vec4f(1.'+'0\x20/\x20255.0)'+';\x0a\x20\x20\x20\x20let\x20'+'shifts:\x20ve'+'c4u\x20=\x20vec4'+'u(16u,\x208u,'+'\x200u,\x2024u);'+'\x0a\x20\x20\x20\x20let\x20c'+'ol:\x20vec4u\x20'+'=\x20(vec4u(u'+'niform.mes'+'hInstanceI'+'d)\x20>>\x20shif'+'ts)\x20&\x20vec4'+'u(0xffu);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4f(col'+')\x20*\x20inv;\x0a}',vD='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20dReflDi'+'rW\x20=\x20norma'+'lize(-refl'+'ect(viewDi'+'r,\x20worldNo'+'rmal));\x0a}\x0a',xD='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20rou'+'ghness:\x20f3'+'2\x20=\x20sqrt(1'+'.0\x20-\x20min(g'+'loss,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20directio'+'n:\x20vec2f\x20='+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20anisotrop'+'y:\x20f32\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cDirection'+':\x20vec3f\x20=\x20'+'anisotropi'+'cB;\x0a\x20\x20\x20\x20le'+'t\x20anisotro'+'picTangent'+':\x20vec3f\x20=\x20'+'cross(anis'+'otropicDir'+'ection,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20let\x20anis'+'otropicNor'+'mal:\x20vec3f'+'\x20=\x20cross(a'+'nisotropic'+'Tangent,\x20a'+'nisotropic'+'Direction)'+';\x0a\x20\x20\x20\x20let\x20'+'bendFactor'+':\x20f32\x20=\x201.'+'0\x20-\x20anisot'+'ropy\x20*\x20(1.'+'0\x20-\x20roughn'+'ess);\x0a\x20\x20\x20\x20'+'let\x20bendFa'+'ctor4:\x20f32'+'\x20=\x20bendFac'+'tor\x20*\x20bend'+'Factor\x20*\x20b'+'endFactor\x20'+'*\x20bendFact'+'or;\x0a\x20\x20\x20\x20le'+'t\x20bentNorm'+'al:\x20vec3f\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}',TD='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0afn\x20addRe'+'flectionCC'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20ccRef'+'lection\x20=\x20'+'ccReflecti'+'on\x20+\x20calcR'+'eflection('+'reflDir,\x20g'+'loss);\x0a}\x0a#'+'endif\x0a',wD='\x0avar\x20textu'+'re_cubeMap'+':\x20texture_'+'cube<f32>;'+'\x0avar\x20textu'+'re_cubeMap'+'Sampler:\x20s'+'ampler;\x0aun'+'iform\x20mate'+'rial_refle'+'ctivity:\x20f'+'32;\x0a\x0afn\x20ca'+'lcReflecti'+'on(reflDir'+':\x20vec3f,\x20g'+'loss:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'lookupVec:'+'\x20vec3f\x20=\x20c'+'ubeMapProj'+'ect(reflDi'+'r);\x0a\x20\x20\x20\x20lo'+'okupVec.x\x20'+'=\x20lookupVe'+'c.x\x20*\x20-1.0'+';\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_cubeMa'+'p,\x20texture'+'_cubeMapSa'+'mpler,\x20loo'+'kupVec));\x0a'+'}\x0a\x0afn\x20addR'+'eflection('+'reflDir:\x20v'+'ec3f,\x20glos'+'s:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20dR'+'eflection\x20'+'+\x20vec4f(ca'+'lcReflecti'+'on(reflDir'+',\x20gloss),\x20'+'uniform.ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',ED='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20var\x20t'+'exture_env'+'Atlas:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'envAtlasSa'+'mpler:\x20sam'+'pler;\x0a#end'+'if\x0a\x0avar\x20te'+'xture_cube'+'Map:\x20textu'+'re_cube<f3'+'2>;\x0avar\x20te'+'xture_cube'+'MapSampler'+':\x20sampler;'+'\x0auniform\x20m'+'aterial_re'+'flectivity'+':\x20f32;\x0a\x0afn'+'\x20calcRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20dir:\x20ve'+'c3f\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20toSph'+'ericalUv(d'+'ir);\x0a\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20roughne'+'ss\x20level\x0a\x20'+'\x20\x20\x20let\x20lev'+'el:\x20f32\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20let\x20ile'+'vel:\x20f32\x20='+'\x20floor(lev'+'el);\x0a\x20\x20\x20\x20l'+'et\x20flevel:'+'\x20f32\x20=\x20lev'+'el\x20-\x20ileve'+'l;\x0a\x0a\x20\x20\x20\x20le'+'t\x20sharp:\x20v'+'ec3f\x20=\x20{re'+'flectionCu'+'bemapDecod'+'e}(texture'+'Sample(tex'+'ture_cubeM'+'ap,\x20textur'+'e_cubeMapS'+'ampler,\x20di'+'r));\x0a\x20\x20\x20\x20l'+'et\x20roughA:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+')));\x0a\x20\x20\x20\x20l'+'et\x20roughB:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(shar'+'p,\x20mix(rou'+('ghA,\x20rough'+'B,\x20flevel)'+',\x20min(leve'+'l,\x201.0)));'+'\x0a}\x0a\x0afn\x20add'+'Reflection'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20dRefl'+'ection\x20=\x20d'+'Reflection'+'\x20+\x20vec4f(c'+'alcReflect'+'ion(reflDi'+'r,\x20gloss),'+'\x20uniform.m'+'aterial_re'+'flectivity'+');\x0a}\x0a'),bD='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_envA'+'tlasSample'+'r:\x20sampler'+';\x0a#endif\x0au'+'niform\x20mat'+'erial_refl'+'ectivity:\x20'+'f32;\x0a\x0a//\x20c'+'alculate\x20m'+'ip\x20level\x20f'+'or\x20shiny\x20r'+'eflection\x20'+'given\x20equi'+'rect\x20coord'+'s\x20uv.\x0afn\x20s'+'hinyMipLev'+'el(uv:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20dx:\x20vec2f'+'\x20=\x20dpdx(uv'+');\x0a\x20\x20\x20\x20let'+'\x20dy:\x20vec2f'+'\x20=\x20dpdy(uv'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20second\x20dF'+'\x20at\x20180\x20de'+'grees\x0a\x20\x20\x20\x20'+'let\x20uv2:\x20v'+'ec2f\x20=\x20vec'+'2f(fract(u'+'v.x\x20+\x200.5)'+',\x20uv.y);\x0a\x20'+'\x20\x20\x20let\x20dx2'+':\x20vec2f\x20=\x20'+'dpdx(uv2);'+'\x0a\x20\x20\x20\x20let\x20d'+'y2:\x20vec2f\x20'+'=\x20dpdy(uv2'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20min\x20of\x20bo'+'th\x20sets\x20of'+'\x20dF\x20to\x20han'+'dle\x20discon'+'tinuity\x20at'+'\x20the\x20azim\x20'+'edge\x0a\x20\x20\x20\x20l'+'et\x20maxd:\x20f'+'32\x20=\x20min(m'+'ax(dot(dx,'+'\x20dx),\x20dot('+'dy,\x20dy)),\x20'+'max(dot(dx'+'2,\x20dx2),\x20d'+'ot(dy2,\x20dy'+'2)));\x0a\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(0.5\x20*\x20'+'log2(maxd)'+'\x20-\x201.0\x20+\x20u'+'niform.tex'+'tureBias,\x20'+'0.0,\x205.0);'+'\x0a}\x0a\x0afn\x20cal'+'cReflectio'+'n(reflDir:'+'\x20vec3f,\x20gl'+'oss:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20d'+'ir:\x20vec3f\x20'+'=\x20cubeMapP'+'roject(ref'+'lDir)\x20*\x20ve'+'c3f(-1.0,\x20'+'1.0,\x201.0);'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20toSpheric'+'alUv(dir);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20r'+'oughness\x20l'+'evel\x0a\x20\x20\x20\x20l'+'et\x20level:\x20'+'f32\x20=\x20satu'+'rate(1.0\x20-'+'\x20gloss)\x20*\x20'+'5.0;\x0a\x20\x20\x20\x20l'+('et\x20ilevel:'+'\x20f32\x20=\x20flo'+'or(level);'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ccessing\x20t'+'he\x20shiny\x20('+'top\x20level)'+'\x20reflectio'+'n\x20-\x20perfor'+'m\x20manual\x20m'+'ipmap\x20look'+'up\x0a\x20\x20\x20\x20let'+'\x20level2:\x20f'+'32\x20=\x20shiny'+'MipLevel(u'+'v\x20*\x20atlasS'+'ize);\x0a\x20\x20\x20\x20'+'let\x20ilevel'+'2:\x20f32\x20=\x20f'+'loor(level'+'2);\x0a\x0a\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20uv1:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20weight:'+'\x20f32;\x0a\x20\x20\x20\x20'+'if\x20(ilevel'+'\x20==\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'1\x20=\x20mapShi'+'nyUv(uv,\x20i'+'level2\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20weight\x20'+'=\x20level2\x20-'+'\x20ilevel2;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20access'+'ing\x20rough\x20'+'reflection'+'\x20-\x20just\x20sa'+'mple\x20the\x20s'+'ame\x20part\x20t'+'wice\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv0\x20=\x20m'+'apRoughnes'+'sUv(uv,\x20il'+'evel);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv1\x20='+'\x20uv0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x200.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20linearA'+':\x20vec3f\x20=\x20'+'{reflectio'+'nDecode}(t'+'extureSamp'+'le(texture'+'_envAtlas,'+'\x20texture_e'+'nvAtlasSam'+'pler,\x20uv0)'+');\x0a\x20\x20\x20\x20let'+'\x20linearB:\x20'+'vec3f\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'tureSample'+'(texture_e'+'nvAtlas,\x20t'+'exture_env'+'AtlasSampl'+'er,\x20uv1));'+'\x0a\x20\x20\x20\x20let\x20l'+'inear0:\x20ve'+'c3f\x20=\x20mix('+'linearA,\x20l'+'inearB,\x20we'+'ight);\x0a\x20\x20\x20'+'\x20let\x20linea'+'r1:\x20vec3f\x20'+'=\x20{reflect'+'ionDecode}'+'(textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r')+('eturn\x20proc'+'essEnviron'+'ment(mix(l'+'inear0,\x20li'+'near1,\x20lev'+'el\x20-\x20ileve'+'l));\x0a}\x0a\x0afn'+'\x20addReflec'+'tion(reflD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20d'+'Reflection'+'\x20=\x20dReflec'+'tion\x20+\x20vec'+'4f(calcRef'+'lection(re'+'flDir,\x20glo'+'ss),\x20unifo'+'rm.materia'+'l_reflecti'+'vity);\x0a}\x0a'),AD='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a#en'+'dif\x0a\x0avar\x20t'+'exture_sph'+'ereMap:\x20te'+'xture_2d<f'+'32>;\x0avar\x20t'+'exture_sph'+'ereMapSamp'+'ler:\x20sampl'+'er;\x0aunifor'+'m\x20material'+'_reflectiv'+'ity:\x20f32;\x0a'+'\x0afn\x20calcRe'+'flection(r'+'eflDir:\x20ve'+'c3f,\x20gloss'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20view'+'RotationMa'+'trix\x20=\x20mat'+'3x3f(unifo'+'rm.matrix_'+'view[0].xy'+'z,\x20uniform'+'.matrix_vi'+'ew[1].xyz,'+'\x20uniform.m'+'atrix_view'+'[2].xyz);\x0a'+'\x20\x20\x20\x20let\x20re'+'flDirV:\x20ve'+'c3f\x20=\x20view'+'RotationMa'+'trix\x20*\x20ref'+'lDir;\x0a\x0a\x20\x20\x20'+'\x20let\x20m:\x20f3'+'2\x20=\x202.0\x20*\x20'+'sqrt(dot(r'+'eflDirV.xy'+',\x20reflDirV'+'.xy)\x20+\x20(re'+'flDirV.z\x20+'+'\x201.0)\x20*\x20(r'+'eflDirV.z\x20'+'+\x201.0));\x0a\x20'+'\x20\x20\x20let\x20sph'+'ereMapUv:\x20'+'vec2f\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_sphere'+'Map,\x20textu'+'re_sphereM'+'apSampler,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0af'+'n\x20addRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20dRefle'+'ction\x20+\x20ve'+'c4f(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20unif'+'orm.materi'+'al_reflect'+'ivity);\x0a}\x0a',CD='\x0a\x0afn\x20addRe'+'flectionSh'+'een(worldN'+'ormal:\x20vec'+'3f,\x20viewDi'+'r:\x20vec3f,\x20'+'gloss:\x20f32'+')\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20dot(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20let\x20al'+'phaG:\x20f32\x20'+'=\x20gloss\x20*\x20'+'gloss;\x0a\x0a\x20\x20'+'\x20\x20//\x20Avoid'+'\x20using\x20a\x20L'+'UT\x20and\x20app'+'roximate\x20t'+'he\x20values\x20'+'analytical'+'ly\x0a\x20\x20\x20\x20let'+'\x20a:\x20f32\x20=\x20'+'select(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20-339.2\x20*'+'\x20alphaG\x20+\x20'+'161.4\x20*\x20gl'+'oss\x20-\x2025.9'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gloss\x20<\x200.'+'25\x0a\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20let\x20b:'+'\x20f32\x20=\x20sel'+'ect(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.97\x20*\x20'+'alphaG\x20-\x203'+'.27\x20*\x20glos'+'s\x20+\x200.72,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x2044'+'.0\x20*\x20alpha'+'G\x20-\x2023.7\x20*'+'\x20gloss\x20+\x203'+'.26,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss\x20<'+'\x200.25\x0a\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20let'+'\x20dg_add:\x20f'+'32\x20=\x20selec'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.1\x20*\x20(\x20g'+'loss\x20-\x200.2'+'5\x20),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x200.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s\x20<\x200.25\x0a\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'let\x20dg:\x20f3'+'2\x20=\x20exp(\x20a'+'\x20*\x20NoV\x20+\x20b'+'\x20)\x20+\x20dg_ad'+'d;\x0a\x20\x20\x20\x20sRe'+'flection\x20='+'\x20sReflecti'+'on\x20+\x20(calc'+'Reflection'+'(worldNorm'+'al,\x200.0)\x20*'+'\x20saturate('+'dg));\x0a}',PD='\x0afn\x20refrac'+'t2(viewVec'+':\x20vec3f,\x20n'+'ormal:\x20vec'+'3f,\x20IOR:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20vn:\x20f32'+'\x20=\x20dot(vie'+'wVec,\x20norm'+'al);\x0a\x20\x20\x20\x20l'+'et\x20k:\x20f32\x20'+'=\x201.0\x20-\x20IO'+'R\x20*\x20IOR\x20*\x20'+'(1.0\x20-\x20vn\x20'+'*\x20vn);\x0a\x20\x20\x20'+'\x20let\x20refrV'+'ec:\x20vec3f\x20'+'=\x20IOR\x20*\x20vi'+'ewVec\x20-\x20(I'+'OR\x20*\x20vn\x20+\x20'+'sqrt(k))\x20*'+'\x20normal;\x0a\x20'+'\x20\x20\x20return\x20'+'refrVec;\x0a}'+'\x0a\x0afn\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20vi'+'ewDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20th'+'ickness:\x20f'+'32,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20al'+'bedo:\x20vec3'+'f,\x0a\x20\x20\x20\x20tra'+'nsmission:'+'\x20f32,\x0a\x20\x20\x20\x20'+'refraction'+'Index:\x20f32'+',\x0a\x20\x20\x20\x20disp'+'ersion:\x20f3'+'2\x0a#if\x20defi'+'ned(LIT_IR'+'IDESCENCE)'+'\x0a\x20\x20\x20\x20,\x20iri'+'descenceFr'+'esnel:\x20vec'+'3f,\x0a\x20\x20\x20\x20ir'+'idescenceI'+'ntensity:\x20'+'f32\x0a#endif'+'\x0a)\x20{\x0a\x20\x20\x20\x20/'+'/\x20use\x20same'+'\x20reflectio'+'n\x20code\x20wit'+'h\x20refracti'+'on\x20vector\x0a'+'\x20\x20\x20\x20let\x20tm'+'pRefl:\x20vec'+'4f\x20=\x20dRefl'+'ection;\x0a\x20\x20'+'\x20\x20let\x20refl'+'ectionDir:'+'\x20vec3f\x20=\x20r'+'efract2(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndex);\x0a\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(0.0);\x0a\x20'+'\x20\x20\x20addRefl'+'ection(ref'+'lectionDir'+',\x20gloss);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'mix(dDiffu'+'seLight,\x20d'+'Reflection'+'.rgb\x20*\x20alb'+'edo,\x20trans'+'mission);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20tm'+'pRefl;\x0a}\x0a',MD='\x0auniform\x20m'+'aterial_in'+'vAttenuati'+'onDistance'+':\x20f32;\x0auni'+'form\x20mater'+'ial_attenu'+'ation:\x20vec'+'3f;\x0a\x0afn\x20ev'+'alRefracti'+'onColor(re'+'fractionVe'+'ctor:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20refra'+'ctionIndex'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20The\x20'+'refraction'+'\x20point\x20is\x20'+'the\x20entry\x20'+'point\x20+\x20ve'+'ctor\x20to\x20ex'+'it\x20point\x0a\x20'+'\x20\x20\x20let\x20poi'+'ntOfRefrac'+'tion:\x20vec4'+'f\x20=\x20vec4f('+'vPositionW'+'\x20+\x20refract'+'ionVector,'+'\x201.0);\x0a\x0a\x20\x20'+'\x20\x20//\x20Proje'+'ct\x20to\x20text'+'ure\x20space\x20'+'so\x20we\x20can\x20'+'sample\x20it\x0a'+'\x20\x20\x20\x20let\x20pr'+'ojectionPo'+'int:\x20vec4f'+'\x20=\x20uniform'+'.matrix_vi'+'ewProjecti'+'on\x20*\x20point'+'OfRefracti'+'on;\x0a\x0a\x20\x20\x20\x20/'+'/\x20use\x20buil'+'t-in\x20getGr'+'abScreenPo'+'s\x20function'+'\x20to\x20conver'+'t\x20screen\x20p'+'osition\x20to'+'\x20grab\x20text'+'ure\x20uv\x20coo'+'rds\x0a\x20\x20\x20\x20le'+'t\x20uv:\x20vec2'+'f\x20=\x20getGra'+'bScreenPos'+'(projectio'+'nPoint);\x0a\x0a'+'\x20\x20\x20\x20//\x20Use'+'\x20IOR\x20and\x20r'+'oughness\x20t'+'o\x20select\x20m'+'ip\x0a\x20\x20\x20\x20let'+'\x20iorToRoug'+'hness:\x20f32'+'\x20=\x20(1.0\x20-\x20'+'gloss)\x20*\x20c'+'lamp((1.0\x20'+'/\x20refracti'+'onIndex)\x20*'+'\x202.0\x20-\x202.0'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20let'+'\x20refractio'+'nLod:\x20f32\x20'+'=\x20log2(uni'+'form.uScre'+'enSize.x)\x20'+'*\x20iorToRou'+'ghness;\x0a\x20\x20'+'\x20\x20let\x20refr'+'action:\x20ve'+'c3f\x20=\x20text'+'ureSampleL'+'evel(uScen'+'eColorMap,'+'\x20uSceneCol'+'orMapSampl'+'er,\x20uv,\x20re'+'fractionLo'+'d).rgb;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'refraction'+';\x0a}\x0a\x0afn\x20ad'+'dRefractio'+'n(\x0a\x20\x20\x20\x20wor'+('ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20thickness'+':\x20f32,\x0a\x20\x20\x20'+'\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20albedo:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'transmissi'+'on:\x20f32,\x0a\x20'+'\x20\x20\x20refract'+'ionIndex:\x20'+'f32,\x0a\x20\x20\x20\x20d'+'ispersion:'+'\x20f32,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'iridescenc'+'eIntensity'+':\x20f32\x0a#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20Extra'+'ct\x20scale\x20f'+'rom\x20the\x20mo'+'del\x20transf'+'orm\x0a\x20\x20\x20\x20va'+'r\x20modelSca'+'le:\x20vec3f;'+'\x0a\x20\x20\x20\x20model'+'Scale.x\x20=\x20'+'length(uni'+'form.matri'+'x_model[0]'+'.xyz);\x0a\x20\x20\x20'+'\x20modelScal'+'e.y\x20=\x20leng'+'th(uniform'+'.matrix_mo'+'del[1].xyz'+');\x0a\x20\x20\x20\x20mod'+'elScale.z\x20'+'=\x20length(u'+'niform.mat'+'rix_model['+'2].xyz);\x0a\x0a'+'\x20\x20\x20\x20//\x20Cal'+'culate\x20the'+'\x20refractio'+'n\x20vector,\x20'+'scaled\x20by\x20'+'the\x20thickn'+'ess\x20and\x20sc'+'ale\x20of\x20the'+'\x20object\x0a\x20\x20'+'\x20\x20let\x20scal'+'e:\x20vec3f\x20='+'\x20thickness'+'\x20*\x20modelSc'+'ale;\x0a\x20\x20\x20\x20v'+'ar\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndex))'+'\x20*\x20scale;\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'x);\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20based\x20on'+'\x20the\x20dispe'+'rsion\x20mate'+'rial\x20prope'+'rty,\x20calcu'+'late\x20modif'+'ied\x20refrac'+'tion\x20index'+'\x20values\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20f'+'or\x20R\x20and\x20B'+'\x20channels\x20')+('and\x20evalua'+'te\x20the\x20ref'+'raction\x20co'+'lor\x20for\x20th'+'em.\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Spread:\x20f3'+'2\x20=\x20(1.0\x20/'+'\x20refractio'+'nIndex\x20-\x201'+'.0)\x20*\x200.02'+'5\x20*\x20disper'+'sion;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20r'+'efractionI'+'ndexR:\x20f32'+'\x20=\x20refract'+'ionIndex\x20-'+'\x20halfSprea'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20refractio'+'nVector\x20=\x20'+'normalize('+'refract(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndexR))\x20'+'*\x20scale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ref'+'raction.r\x20'+'=\x20evalRefr'+'actionColo'+'r(refracti'+'onVector,\x20'+'gloss,\x20ref'+'ractionInd'+'exR).r;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20refractio'+'nIndexB:\x20f'+'32\x20=\x20refra'+'ctionIndex'+'\x20+\x20halfSpr'+'ead;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndexB)'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efraction.'+'b\x20=\x20evalRe'+'fractionCo'+'lor(refrac'+'tionVector'+',\x20gloss,\x20r'+'efractionI'+'ndexB).b;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20T'+'ransmittan'+'ce\x20is\x20our\x20'+'final\x20refr'+'action\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20transmitt'+'ance:\x20vec3'+'f;\x0a\x20\x20\x20\x20if\x20'+'(uniform.m'+'aterial_in'+'vAttenuati'+'onDistance'+'\x20!=\x200.0)\x0a\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20att'+'enuation:\x20'+'vec3f\x20=\x20-l'+'og(uniform'+'.material_'+'attenuatio'+'n)\x20*\x20unifo'+'rm.materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans')+('mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20let\x20'+'fresnel:\x20v'+'ec3f\x20=\x20vec'+'3f(1.0)\x20-\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20world'+'Normal),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scenceInte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20mix(dDif'+'fuseLight,'+'\x20refractio'+'n\x20*\x20transm'+'ittance\x20*\x20'+'fresnel,\x20t'+'ransmissio'+'n);\x0a}\x0a'),DD='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0a#ifdef'+'\x20CUBEMAP_S'+'OURCE\x0a\x20\x20\x20\x20'+'var\x20source'+'Cube:\x20text'+'ure_cube<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20sourceC'+'ubeSampler'+'\x20:\x20sampler'+';\x0a#else\x0a\x20\x20'+'\x20\x20var\x20sour'+'ceTex:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sourceTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20//\x20sa'+'mples\x0a\x20\x20\x20\x20'+'var\x20sample'+'sTex:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20samplesTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20samplesT'+'exInverseS'+'ize:\x20vec2f'+';\x0a#endif\x0a\x0a'+'//\x20params:'+'\x0a//\x20x\x20-\x20ta'+'rget\x20cubem'+'ap\x20face\x200.'+'.6\x0a//\x20y\x20-\x20'+'target\x20ima'+'ge\x20total\x20p'+'ixels\x0a//\x20z'+'\x20-\x20source\x20'+'cubemap\x20si'+'ze\x0auniform'+'\x20params:\x20v'+'ec3f;\x0a\x0afn\x20'+'targetFace'+'()\x20->\x20f32\x20'+'{\x20return\x20u'+'niform.par'+'ams.x;\x20}\x0af'+'n\x20targetTo'+'talPixels('+')\x20->\x20f32\x20{'+'\x20return\x20un'+'iform.para'+'ms.y;\x20}\x0afn'+'\x20sourceTot'+'alPixels()'+'\x20->\x20f32\x20{\x20'+'return\x20uni'+'form.param'+'s.z;\x20}\x0a\x0aco'+'nst\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22enc'+'odePS\x22\x0a\x0a//'+'--\x20support'+'ed\x20project'+'ions\x0a\x0afn\x20m'+'odifySeams'+'(dir:\x20vec3'+'f,\x20scale:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20adir\x20='+'\x20abs(dir);'+'\x0a\x20\x20\x20\x20let\x20M'+'\x20=\x20max(max'+'(adir.x,\x20a'+'dir.y),\x20ad'+'ir.z);\x0a\x20\x20\x20'+'\x20return\x20di'+'r\x20/\x20M\x20*\x20ve'+'c3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20select('+('scale,\x201.0'+',\x20adir.x\x20='+'=\x20M),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20select'+'(scale,\x201.'+'0,\x20adir.y\x20'+'==\x20M),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20selec'+'t(scale,\x201'+'.0,\x20adir.z'+'\x20==\x20M)\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0afn\x20'+'toSpherica'+'l(dir:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20l'+'et\x20nonZero'+'XZ\x20=\x20any(d'+'ir.xz\x20!=\x20v'+'ec2f(0.0,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2f(select'+'(0.0,\x20atan'+'2(dir.x,\x20d'+'ir.z),\x20non'+'ZeroXZ),\x20a'+'sin(dir.y)'+');\x0a}\x0a\x0afn\x20f'+'romSpheric'+'al(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20vec3'+'f(cos(uv.y'+')\x20*\x20sin(uv'+'.x),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sin(uv.y)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'s(uv.y)\x20*\x20'+'cos(uv.x))'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Equirect(u'+'v:\x20vec2f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20fromSphe'+'rical((vec'+'2f(uv.x,\x201'+'.0\x20-\x20uv.y)'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20vec2'+'f(PI,\x20PI\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20octahe'+'dral\x20code,'+'\x20based\x20on\x20'+'https://jc'+'gt.org/pub'+'lished/000'+'3/02/01/\x0a/'+'/\x20\x22Survey\x20'+'of\x20Efficie'+'nt\x20Represe'+'ntations\x20f'+'or\x20Indepen'+'dent\x20Unit\x20'+'Vectors\x22\x20b'+'y\x20Cigolle,'+'\x20Donow,\x20Ev'+'angelakos,'+'\x20Mara,\x20McG'+'uire,\x20Meye'+'r\x0a\x0afn\x20sign'+'NotZero(k:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20sele'+'ct(-1.0,\x201'+'.0,\x20k\x20>=\x200'+'.0);\x0a}\x0a\x0afn'+'\x20signNotZe'+'roVec2(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec2f(signN'+'otZero(v.x'+'),\x20signNot'+'Zero(v.y))'+';\x0a}\x0a\x0a//\x20Re'+'turns\x20a\x20un'+'it\x20vector.'+'\x20Argument\x20'+'o\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20pack')+('ed\x20via\x20oct'+'Encode,\x20on'+'\x20the\x20[-1,\x20'+'+1]\x20square'+'\x0afn\x20octDec'+'ode(o:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20v\x20=\x20vec'+'3f(o.x,\x201.'+'0\x20-\x20abs(o.'+'x)\x20-\x20abs(o'+'.y),\x20o.y);'+'\x0a\x20\x20\x20\x20if\x20(v'+'.y\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20temp:\x20'+'vec2f\x20=\x20(1'+'.0\x20-\x20abs(v'+'.zx))\x20*\x20si'+'gnNotZeroV'+'ec2(v.xz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'\x20=\x20vec3f(t'+'emp.x,\x20v.y'+',\x20temp.y);'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20no'+'rmalize(v)'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Octahedral'+'(uv:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20octDec'+'ode(vec2f('+'uv.x,\x201.0\x20'+'-\x20uv.y)\x20*\x20'+'2.0\x20-\x201.0)'+';\x0a}\x0a\x0a//\x20As'+'sumes\x20that'+'\x20v\x20is\x20a\x20un'+'it\x20vector.'+'\x20The\x20resul'+'t\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20on\x20t'+'he\x20[-1,\x20+1'+']\x20square\x0af'+'n\x20octEncod'+'e(v:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20var\x20'+'result\x20=\x20v'+'.xz\x20*\x20(1.0'+'\x20/\x20l1norm)'+';\x0a\x20\x20\x20\x20if\x20('+'v.y\x20<\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'(1.0\x20-\x20abs'+'(result.yx'+'))\x20*\x20signN'+'otZeroVec2'+'(result.xy'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20return\x20'+'result;\x0a}\x0a'+'\x0a/////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'\x0a\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20fn'+'\x20sampleCub'+'emapDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'sourceCube'+',\x20sourceCu'+'beSampler,'+'\x20modifySea'+'ms(dir,\x201.'+'0));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleCubem'+'apSph(sph:')+('\x20vec2f)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20sample'+'CubemapDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leCubemapD'+'irLod(dir:'+'\x20vec3f,\x20mi'+'pLevel:\x20f3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leLevel(so'+'urceCube,\x20'+'sourceCube'+'Sampler,\x20m'+'odifySeams'+'(dir,\x201.0)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleCubemap'+'SphLod(sph'+':\x20vec2f,\x20m'+'ipLevel:\x20f'+'32)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'sampleCube'+'mapDirLod('+'fromSpheri'+'cal(sph),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a#el'+'se\x0a\x0a\x20\x20\x20\x20fn'+'\x20sampleEqu'+'irectSph(s'+'ph:\x20vec2f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv\x20=\x20s'+'ph\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'(sourceTex'+',\x20sourceTe'+'xSampler,\x20'+'vec2f(uv.x'+',\x201.0\x20-\x20uv'+'.y));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20fn\x20'+'sampleEqui'+'rectDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leEquirect'+'Sph(toSphe'+'rical(dir)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleEquirec'+'tSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20uv'+'\x20=\x20sph\x20/\x20v'+'ec2f(PI\x20*\x20'+'2.0,\x20PI)\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleLevel('+'sourceTex,'+'\x20sourceTex'+'Sampler,\x20v'+'ec2f(uv.x,'+'\x201.0\x20-\x20uv.'+'y),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleEquir'+'ectDirLod('+'dir:\x20vec3f'+',\x20mipLevel'+':\x20f32)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleE')+('quirectSph'+'Lod(toSphe'+'rical(dir)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleOctahed'+'ralDir(dir'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20=\x20oct'+'Encode(dir'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'textureSam'+'ple(source'+'Tex,\x20sourc'+'eTexSample'+'r,\x20vec2f(u'+'v.x,\x201.0\x20-'+'\x20uv.y));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20sampleO'+'ctahedralS'+'ph(sph:\x20ve'+'c2f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leOctahedr'+'alDirLod(d'+'ir:\x20vec3f,'+'\x20mipLevel:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'v\x20=\x20octEnc'+'ode(dir)\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'Level(sour'+'ceTex,\x20sou'+'rceTexSamp'+'ler,\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20sampl'+'eOctahedra'+'lSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'Lod(fromSp'+'herical(sp'+'h),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a\x0a'+'fn\x20getDire'+'ctionCubem'+'ap(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20st\x20=\x20uv'+'\x20*\x202.0\x20-\x201'+'.0;\x0a\x20\x20\x20\x20le'+'t\x20face\x20=\x20t'+'argetFace('+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20vec:\x20vec'+'3f;\x0a\x20\x20\x20\x20if'+'\x20(face\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(1,\x20'+'-st.y,\x20-st'+'.x);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3f(-1,\x20-'+'st.y,\x20st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x202.0)')+('\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3f(st.x,\x201'+',\x20st.y);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(face\x20='+'=\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'\x20=\x20vec3f(s'+'t.x,\x20-1,\x20-'+'st.y);\x0a\x20\x20\x20'+'\x20}\x20else\x20if'+'\x20(face\x20==\x20'+'4.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(st.'+'x,\x20-st.y,\x20'+'1);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(-st'+'.x,\x20-st.y,'+'\x20-1);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20normal'+'ize(modify'+'Seams(vec,'+'\x201.0));\x0a}\x0a'+'\x0afn\x20matrix'+'FromVector'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x201.0\x20'+'/\x20(1.0\x20+\x20n'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20-n.'+'x\x20*\x20n.y\x20*\x20'+'a;\x0a\x20\x20\x20\x20let'+'\x20b1\x20=\x20vec3'+'f(1.0\x20-\x20n.'+'x\x20*\x20n.x\x20*\x20'+'a,\x20b,\x20-n.x'+');\x0a\x20\x20\x20\x20let'+'\x20b2\x20=\x20vec3'+'f(b,\x201.0\x20-'+'\x20n.y\x20*\x20n.y'+'\x20*\x20a,\x20-n.y'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mat3x3'+'f(b1,\x20b2,\x20'+'n);\x0a}\x0a\x0afn\x20'+'matrixFrom'+'VectorSlow'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20up\x20=\x20sel'+'ect(vec3f('+'0.0,\x200.0,\x20'+'select(-1.'+'0,\x201.0,\x20n.'+'y\x20>\x200.0)),'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'),\x20abs(n.y'+')\x20>\x200.0000'+'001);\x0a\x20\x20\x20\x20'+'let\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20let'+'\x20y\x20=\x20cross'+'(n,\x20x);\x0a\x20\x20'+'\x20\x20return\x20m'+'at3x3f(x,\x20'+'y,\x20n);\x0a}\x0a\x0a'+'fn\x20reproje'+'ct(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20i'+'f\x20({NUM_SA'+'MPLES}\x20<=\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20sing'+'le\x20sample\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}({'+'DECODE_FUN'+'C}({SOURCE'+'_FUNC}Dir('+'{TARGET_FU'+'NC}(uv))))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mult'+'i\x20sample\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20t\x20=\x20{TARG')+('ET_FUNC}(u'+'v);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20tu\x20='+'\x20dpdx(t);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20tv\x20=\x20dpd'+'y(t);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'u\x20+=\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20for\x20(v'+'ar\x20v\x20=\x200.0'+';\x20v\x20<\x20{NUM'+'_SAMPLES_S'+'QRT};\x20v\x20+='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}Dir(norma'+'lize(t\x20+\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20t'+'u\x20*\x20(u\x20/\x20{'+'NUM_SAMPLE'+'S_SQRT}\x20-\x20'+'0.5)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tv\x20'+'*\x20(v\x20/\x20{NU'+'M_SAMPLES_'+'SQRT}\x20-\x200.'+'5))));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20{ENC'+'ODE_FUNC}('+'result\x20/\x20('+'{NUM_SAMPL'+'ES_SQRT}\x20*'+'\x20{NUM_SAMP'+'LES_SQRT})'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0aconst\x20un'+'packFloat:'+'\x20vec4f\x20=\x20v'+'ec4f(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20fn\x20un'+'packSample'+'(i:\x20i32,\x20L'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20mipLev'+'el:\x20ptr<fu'+'nction,\x20f3'+'2>)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20u\x20'+'=\x20(f32(i\x20*'+'\x204)\x20+\x200.5)'+'\x20*\x20uniform'+'.samplesTe'+'xInverseSi'+'ze.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20v\x20'+'=\x20(floor(u'+')\x20+\x200.5)\x20*'+'\x20uniform.s'+'amplesTexI'+'nverseSize'+'.y;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20raw'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.x\x20=\x20dot(t'+'extureSamp')+('le(samples'+'Tex,\x20sampl'+'esTexSampl'+'er,\x20vec2f('+'u,\x20v)),\x20un'+'packFloat)'+';\x20u\x20+=\x20uni'+'form.sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'textureSam'+'ple(sample'+'sTex,\x20samp'+'lesTexSamp'+'ler,\x20vec2f'+'(u,\x20v)),\x20u'+'npackFloat'+');\x20u\x20+=\x20un'+'iform.samp'+'lesTexInve'+'rseSize.x;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.z\x20=\x20dot'+'(textureSa'+'mple(sampl'+'esTex,\x20sam'+'plesTexSam'+'pler,\x20vec2'+'f(u,\x20v)),\x20'+'unpackFloa'+'t);\x20u\x20+=\x20u'+'niform.sam'+'plesTexInv'+'erseSize.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'raw.w\x20=\x20do'+'t(textureS'+'ample(samp'+'lesTex,\x20sa'+'mplesTexSa'+'mpler,\x20vec'+'2f(u,\x20v)),'+'\x20unpackFlo'+'at);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20*L\x20=\x20r'+'aw.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*m'+'ipLevel\x20=\x20'+'raw.w\x20*\x208.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20con'+'volve\x20an\x20e'+'nvironment'+'\x20given\x20pre'+'-generated'+'\x20samples\x0a\x20'+'\x20\x20\x20fn\x20pref'+'ilterSampl'+'es(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'truct\x20vect'+'or\x20space\x20g'+'iven\x20targe'+'t\x20directio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vecSpa'+'ce\x20=\x20matri'+'xFromVecto'+'rSlow({TAR'+'GET_FUNC}('+'uv));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20L'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20mipLevel:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(var\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20i\x20+=\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unpa'+'ckSample(i'+',\x20&L,\x20&mip'+'Level);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'result\x20+=\x20'+'{DECODE_FU')+('NC}({SOURC'+'E_FUNC}Dir'+'Lod(vecSpa'+'ce\x20*\x20L,\x20mi'+'pLevel))\x20*'+'\x20L.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20to'+'talWeight\x20'+'+=\x20L.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20{ENCOD'+'E_FUNC}(re'+'sult\x20/\x20tot'+'alWeight);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20unwei'+'ghted\x20vers'+'ion\x20of\x20pre'+'filterSamp'+'les\x0a\x20\x20\x20\x20fn'+'\x20prefilter'+'SamplesUnw'+'eighted(uv'+':\x20vec2f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20construct'+'\x20vector\x20sp'+'ace\x20given\x20'+'target\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20v'+'ecSpace\x20=\x20'+'matrixFrom'+'VectorSlow'+'({TARGET_F'+'UNC}(uv));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20L:\x20vec'+'3f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20mipL'+'evel:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20result'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(va'+'r\x20i\x20=\x200;\x20i'+'\x20<\x20{NUM_SA'+'MPLES};\x20i\x20'+'+=\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'unpackSamp'+'le(i,\x20&L,\x20'+'&mipLevel)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}DirLod(ve'+'cSpace\x20*\x20L'+',\x20mipLevel'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'{ENCODE_FU'+'NC}(result'+'\x20/\x20f32({NU'+'M_SAMPLES}'+'));\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20{P'+'ROCESS_FUN'+'C}(input.v'+'Uv0);\x0a\x20\x20\x20\x20'+'return\x20out'+'put;\x0a}\x0a'),ID='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0aunifo'+'rm\x20uvMod:\x20'+'vec4f;\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0a\x0a@'+'vertex\x0afn\x20'+'vertexMain'+'(input:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20var\x20outpu'+'t:\x20VertexO'+'utput;\x0a\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(input.v'+'ertex_posi'+'tion,\x200.5,'+'\x201.0);\x0a\x20\x20o'+'utput.vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(input.ver'+'tex_positi'+'on\x20*\x200.5\x20+'+'\x20vec2f(0.5'+',\x200.5))\x20*\x20'+'uniform.uv'+'Mod.xy\x20+\x20u'+'niform.uvM'+'od.zw);\x0a\x20\x20'+'return\x20out'+'put;\x0a}\x0a',LD='\x0a\x0avar\x20uSce'+'neDepthMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20uSceneD'+'epthMapSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifn'+'def\x20SCREEN'+'SIZE\x0a\x20\x20\x20\x20#'+'define\x20SCR'+'EENSIZE\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fndef\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20#define\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20unifor'+'m\x20matrix_v'+'iew:\x20mat4x'+'4f;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20CAM'+'ERAPLANES\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20CAME'+'RAPLANES\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20camer'+'a_params:\x20'+'vec4f;\x20//\x20'+'x:\x201\x20/\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20\x20y:\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20z:\x20came'+'ra_near,\x20\x20'+'\x20\x20\x20\x20\x20\x20w:\x20i'+'s_ortho\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20fn\x20lin'+'earizeDept'+'h(z:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uniform.c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x20//\x20Pe'+'rspective\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20('+'uniform.ca'+'mera_param'+'s.z\x20*\x20unif'+'orm.camera'+'_params.y)'+'\x20/\x20(unifor'+'m.camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.z\x20-'+'\x20uniform.c'+'amera_para'+'ms.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20unifor'+'m.camera_p'+'arams.z\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'+'\x0afn\x20deline'+'arizeDepth'+'(linearDep'+'th:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.camera'+'_params.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(unif'+'orm.camera'+('_params.y\x20'+'*\x20(uniform'+'.camera_pa'+'rams.z\x20-\x20l'+'inearDepth'+'))\x20/\x20(line'+'arDepth\x20*\x20'+'(uniform.c'+'amera_para'+'ms.z\x20-\x20uni'+'form.camer'+'a_params.y'+'));\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20(linearD'+'epth\x20-\x20uni'+'form.camer'+'a_params.z'+')\x20/\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20}\x0a}\x0a\x0a//\x20R'+'etrieves\x20r'+'endered\x20li'+'near\x20camer'+'a\x20depth\x20by'+'\x20UV\x0afn\x20get'+'LinearScre'+'enDepth(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_LINEAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SCEN'+'E_DEPTHMAP'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'uSceneDept'+'hMap,\x20uSce'+'neDepthMap'+'Sampler,\x20u'+'v).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20tex'+'tureSize\x20='+'\x20textureDi'+'mensions(u'+'SceneDepth'+'Map,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20texel'+':\x20vec2i\x20=\x20'+'vec2i(uv\x20*'+'\x20vec2f(tex'+'tureSize))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta:\x20vec4f\x20'+'=\x20textureL'+'oad(uScene'+'DepthMap,\x20'+'texel,\x200);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta_u32:\x20ve'+'c4u\x20=\x20vec4'+'u(data\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20intBits'+':\x20u32\x20=\x20(d'+'ata_u32.r\x20'+'<<\x2024u)\x20|\x20'+'(data_u32.'+'g\x20<<\x2016u)\x20'+'|\x20(data_u3'+'2.b\x20<<\x208u)'+'\x20|\x20data_u3'+'2.a;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20bitca'+'st<f32>(in'+'tBits);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pth(textur'+'eSample(uS'+'ceneDepthM')+('ap,\x20uScene'+'DepthMapSa'+'mpler,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20fn\x20get'+'LinearScre'+'enDepthFra'+'g()\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20pcP'+'osition.xy'+'\x20*\x20uniform'+'.uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afn\x20get'+'LinearDept'+'h(pos:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20-(unif'+'orm.matrix'+'_view\x20*\x20ve'+'c4f(pos,\x201'+'.0)).z;\x0a}\x0a'),RD='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x0afn'+'\x20getShadow'+'CascadeInd'+'ex(shadowC'+'ascadeDist'+'ances:\x20vec'+'4f,\x20shadow'+'CascadeCou'+'nt:\x20i32)\x20-'+'>\x20i32\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20dept'+'h\x20in\x200\x20..\x20'+'far\x20plane\x20'+'range\x0a\x20\x20\x20\x20'+'let\x20depth:'+'\x20f32\x20=\x201.0'+'\x20/\x20pcPosit'+'ion.w;\x0a\x0a\x20\x20'+'\x20\x20//\x201.0\x20i'+'f\x20depth\x20>='+'\x20distance,'+'\x200.0\x20other'+'wise\x0a\x20\x20\x20\x20l'+'et\x20compari'+'sons:\x20vec4'+'f\x20=\x20step(s'+'hadowCasca'+'deDistance'+'s,\x20vec4f(d'+'epth));\x0a\x0a\x20'+'\x20\x20\x20//\x20sum\x20'+'is\x20the\x20ind'+'ex\x0a\x20\x20\x20\x20let'+'\x20cascadeIn'+'dex:\x20i32\x20='+'\x20i32(dot(c'+'omparisons'+',\x20vec4f(1.'+'0)));\x0a\x0a\x20\x20\x20'+'\x20//\x20limit\x20'+'to\x20actual\x20'+'number\x20of\x20'+'used\x20casca'+'des\x0a\x20\x20\x20\x20re'+'turn\x20min(c'+'ascadeInde'+'x,\x20shadowC'+'ascadeCoun'+'t\x20-\x201);\x0a}\x0a'+'\x0a//\x20functi'+'on\x20which\x20m'+'odifies\x20ca'+'scade\x20inde'+'x\x20to\x20dithe'+'r\x20between\x20'+'cascades\x0af'+'n\x20ditherSh'+'adowCascad'+'eIndex(cas'+'cadeIndex_'+'in:\x20i32,\x20s'+'hadowCasca'+'deDistance'+'s:\x20vec4f,\x20'+'shadowCasc'+'adeCount:\x20'+'i32,\x20blend'+'Factor:\x20f3'+'2)\x20->\x20i32\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Use\x20var\x20as'+'\x20cascadeIn'+'dex\x20might\x20'+'be\x20modifie'+'d\x0a\x20\x20\x20\x20var\x20'+'cascadeInd'+'ex:\x20i32\x20=\x20'+'cascadeInd'+'ex_in;\x0a\x20\x20\x20'+'\x20if\x20(casca'+'deIndex\x20<\x20'+'shadowCasc'+'adeCount\x20-'+'\x201)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20cu'+'rrentRange'+'End:\x20f32\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+('\x20transitio'+'nStart:\x20f3'+'2\x20=\x20blendF'+'actor\x20*\x20cu'+'rrentRange'+'End;\x20//\x20St'+'art\x20overla'+'p\x20factor\x20a'+'way\x20from\x20t'+'he\x20end\x20dis'+'tance\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(depth\x20'+'>\x20transiti'+'onStart)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20a\x20tr'+'ansition\x20f'+'actor\x20(0.0'+'\x20to\x201.0)\x20w'+'ithin\x20the\x20'+'overlap\x20ra'+'nge\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'transition'+'Factor:\x20f3'+'2\x20=\x20smooth'+'step(trans'+'itionStart'+',\x20currentR'+'angeEnd,\x20d'+'epth);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Add\x20pse'+'udo-random'+'\x20dithering'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20TODO'+':\x20replace\x20'+'by\x20user\x20se'+'lectable\x20d'+'ithering\x20m'+'ethod\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20dither:\x20'+'f32\x20=\x20frac'+'t(sin(dot('+'pcPosition'+'.xy,\x20vec2f'+'(12.9898,\x20'+'78.233)))\x20'+'*\x2043758.54'+'53);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dither\x20<\x20'+'transition'+'Factor)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20casc'+'adeIndex\x20='+'\x20cascadeIn'+'dex\x20+\x201;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20cascadeIn'+'dex;\x0a}\x0a\x0afn'+'\x20fadeShado'+'w(shadowCo'+'ord_in:\x20ve'+'c3f,\x20shado'+'wCascadeDi'+'stances:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20//\x20if\x20the'+'\x20pixel\x20is\x20'+'past\x20the\x20s'+'hadow\x20dist'+'ance,\x20remo'+'ve\x20shadow\x0a'+'\x20\x20\x20\x20//\x20thi'+'s\x20enforces'+'\x20straight\x20'+'line\x20inste'+'ad\x20of\x20corn'+'er\x20of\x20shad'+'ow\x20which\x20m'+'oves\x20when\x20'+'camera\x20rot'+'ates\x0a\x20\x20\x20\x20v'+'ar\x20shadowC'+'oord:\x20vec3'+'f\x20=\x20shadow')+('Coord_in;\x0a'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x20\x20\x20\x20if\x20(d'+'epth\x20>\x20sha'+'dowCascade'+'Distances.'+'w)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20shadowC'+'oord.z\x20=\x20-'+'9999999.0;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'hadowCoord'+';\x0a}\x0a'),OD='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afn\x20linste'+'p(a:\x20f32,\x20'+'b:\x20f32,\x20v:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20/'+'/\x20WGSL\x20sat'+'urate\x20->\x20c'+'lamp\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p((v\x20-\x20a)\x20'+'/\x20(b\x20-\x20a),'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0afn\x20re'+'duceLightB'+'leeding(pM'+'ax:\x20f32,\x20a'+'mount:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'fn\x20chebysh'+'evUpperBou'+'nd(moments'+':\x20vec2f,\x20m'+'ean:\x20f32,\x20'+'minVarianc'+'e:\x20f32,\x20li'+'ghtBleedin'+'gReduction'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'//\x20Compute'+'\x20variance\x0a'+'\x20\x20\x20\x20var\x20va'+'riance:\x20f3'+'2\x20=\x20moment'+'s.y\x20-\x20(mom'+'ents.x\x20*\x20m'+'oments.x);'+'\x0a\x20\x20\x20\x20varia'+'nce\x20=\x20max('+'variance,\x20'+'minVarianc'+'e);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Compute\x20'+'probabilis'+'tic\x20upper\x20'+'bound\x0a\x20\x20\x20\x20'+'let\x20d:\x20f32'+'\x20=\x20mean\x20-\x20'+'moments.x;'+'\x0a\x20\x20\x20\x20var\x20p'+'Max:\x20f32\x20='+'\x20variance\x20'+'/\x20(varianc'+'e\x20+\x20(d\x20*\x20d'+'));\x0a\x0a\x20\x20\x20\x20p'+'Max\x20=\x20redu'+'ceLightBle'+'eding(pMax'+',\x20lightBle'+'edingReduc'+'tion);\x0a\x0a\x20\x20'+'\x20\x20//\x20One-t'+'ailed\x20Cheb'+'yshev\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(pMax,\x20'+'1.0,\x20mean\x20'+'<=\x20moments'+'.x);\x0a}\x0a\x0afn'+'\x20calculate'+'EVSM(momen'+'ts_in:\x20vec'+'3f,\x20Z_in:\x20'+'f32,\x20vsmBi'+'as:\x20f32,\x20e'+'xponent:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20Z:\x20f32\x20=\x20'+'2.0\x20*\x20Z_in'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20let\x20warp'+'edDepth:\x20f'+'32\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20l'+('et\x20moments'+':\x20vec2f\x20=\x20'+'moments_in'+'.xy\x20+\x20vec2'+'f(warpedDe'+'pth,\x20warpe'+'dDepth*war'+'pedDepth)\x20'+'*\x20(1.0\x20-\x20m'+'oments_in.'+'z);\x0a\x0a\x20\x20\x20\x20l'+'et\x20VSMBias'+':\x20f32\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20let\x20d'+'epthScale:'+'\x20f32\x20=\x20VSM'+'Bias\x20*\x20exp'+'onent\x20*\x20wa'+'rpedDepth;'+'\x0a\x20\x20\x20\x20let\x20m'+'inVariance'+'1:\x20f32\x20=\x20d'+'epthScale\x20'+'*\x20depthSca'+'le;\x0a\x20\x20\x20\x20re'+'turn\x20cheby'+'shevUpperB'+'ound(momen'+'ts,\x20warped'+'Depth,\x20min'+'Variance1,'+'\x200.1);\x0a}\x0a/'+'/\x20------\x20V'+'SM\x2016\x20----'+'--\x0a\x0afn\x20VSM'+'16(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords:\x20vec'+'2f,\x20resolu'+'tion:\x20f32,'+'\x20Z:\x20f32,\x20v'+'smBias:\x20f3'+'2,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20let\x20momen'+'ts:\x20vec3f\x20'+'=\x20textureS'+'ampleLevel'+'(tex,\x20texS'+'ampler,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'n\x20getShado'+'wVSM16(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20VS'+'M16(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord.xy,\x20s'+'hadowParam'+'s.x,\x20shado'+'wCoord.z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotVSM1'+'6(shadowMa'+'p:\x20texture'+'_2d<f32>,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler,\x20sha'+'dowCoord:\x20'+'vec3f,\x20sha')+('dowParams:'+'\x20vec4f,\x20ex'+'ponent:\x20f3'+'2,\x20lightDi'+'r:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20Z:\x20'+'f32\x20=\x20leng'+'th(lightDi'+'r)\x20*\x20shado'+'wParams.w\x20'+'+\x20shadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20return\x20V'+'SM16(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20Z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----'+'--\x0a\x0afn\x20VSM'+'32(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords_in:\x20'+'vec2f,\x20res'+'olution:\x20f'+'32,\x20Z:\x20f32'+',\x20vsmBias:'+'\x20f32,\x20expo'+'nent:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20CAPS_TEX'+'TURE_FLOAT'+'_FILTERABL'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20moment'+'s:\x20vec3f\x20='+'\x20textureSa'+'mpleLevel('+'tex,\x20texSa'+'mpler,\x20tex'+'Coords_in,'+'\x200.0).xyz;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20manual\x20b'+'ilinear\x20fi'+'ltering\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'pixelSize\x20'+':\x20f32\x20=\x201.'+'0\x20/\x20resolu'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20te'+'xCoords:\x20v'+'ec2f\x20=\x20tex'+'Coords_in\x20'+'-\x20vec2f(pi'+'xelSize);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20s00:\x20vec'+'3f\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20texCoords'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20s10:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20texCoor'+'ds\x20+\x20vec2f'+'(pixelSize'+',\x200.0),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'s01:\x20vec3f'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'exCoords\x20+'+'\x20vec2f(0.0'+',\x20pixelSiz'+'e),\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s11:')+('\x20vec3f\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20texCo'+'ords\x20+\x20vec'+'2f(pixelSi'+'ze),\x200.0).'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fr:'+'\x20vec2f\x20=\x20f'+'ract(texCo'+'ords\x20*\x20res'+'olution);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20h0:\x20vec3'+'f\x20=\x20mix(s0'+'0,\x20s10,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20h1:'+'\x20vec3f\x20=\x20m'+'ix(s01,\x20s1'+'1,\x20fr.x);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20moments:'+'\x20vec3f\x20=\x20m'+'ix(h0,\x20h1,'+'\x20fr.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20calculate'+'EVSM(momen'+'ts,\x20Z,\x20vsm'+'Bias,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owVSM32(sh'+'adowMap:\x20t'+'exture_2d<'+'f32>,\x20shad'+'owMapSampl'+'er:\x20sample'+'r,\x20shadowC'+'oord:\x20vec3'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20expone'+'nt:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20V'+'SM32(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afn\x20getSha'+'dowSpotVSM'+'32(shadowM'+'ap:\x20textur'+'e_2d<f32>,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20e'+'xponent:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20Z:'+'\x20f32\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20Z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a'),FD='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afn\x20getS'+'hadowPCF1x'+'1(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowCoo'+'rd.z);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotPCF1'+'x1(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20shad'+'owCoord.xy'+',\x20shadowCo'+'ord.z);\x0a}\x0a'+'\x0a//\x20-----\x20'+'Omni\x20Sampl'+'ing\x20-----\x0a'+'\x0a//\x20Not\x20su'+'pported\x20on'+'\x20WebGPU\x20de'+'vice\x0a//\x20fn'+'\x20getShadow'+'OmniPCF1x1'+'(shadowMap'+':\x20texture_'+'depth_cube'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f,'+'\x20lightDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a//\x20'+'\x20\x20\x20\x20let\x20sh'+'adowZ:\x20f32'+'\x20=\x20length('+'lightDir)\x20'+'*\x20shadowPa'+'rams.w\x20+\x20s'+'hadowParam'+'s.z;\x0a//\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20lightD'+'ir,\x20shadow'+'Z);\x0a//\x20}\x0a',ND='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0afn\x20_getS'+'hadowPCF3x'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20sum:\x20f3'+'2\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20let\x20uw'+'0:\x20f32\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20s);\x0a\x20\x20\x20\x20'+'let\x20uw1:\x20f'+'32\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20s)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20u0_offset'+':\x20f32\x20=\x20(2'+'.0\x20-\x20s)\x20/\x20'+'uw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20let\x20u'+'1_offset:\x20'+'f32\x20=\x20s\x20/\x20'+'uw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'vw0:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t);\x0a\x20\x20'+'\x20\x20let\x20vw1:'+'\x20f32\x20=\x20(1.'+'0\x20+\x202.0\x20*\x20'+'t);\x0a\x0a\x20\x20\x20\x20l'+'et\x20v0_offs'+'et:\x20f32\x20=\x20'+'(2.0\x20-\x20t)\x20'+'/\x20vw0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20let'+'\x20v1_offset'+':\x20f32\x20=\x20t\x20'+'/\x20vw1\x20+\x201.'+'0;\x0a\x0a\x20\x20\x20\x20le'+'t\x20u0:\x20f32\x20'+'=\x20u0_offse'+'t\x20*\x20shadow'+'MapSizeInv'+'\x20+\x20base_uv'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20v0:\x20f32\x20'+'=\x20v0_offse'+'t\x20*\x20shadow'+('MapSizeInv'+'\x20+\x20base_uv'+'.y;\x0a\x0a\x20\x20\x20\x20l'+'et\x20u1:\x20f32'+'\x20=\x20u1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20l'+'et\x20v1:\x20f32'+'\x20=\x20v1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'sum\x20=\x20sum\x20'+'+\x20uw0\x20*\x20vw'+'0\x20*\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20v'+'ec2f(u0,\x20v'+'0),\x20z);\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw1\x20*\x20'+'vw0\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u1,'+'\x20v0),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw0\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'0,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'1\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u1,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20*'+'\x20(1.0\x20/\x2016'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20sum;'+'\x0a}\x0a\x0afn\x20get'+'ShadowPCF3'+'x3(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wPCF3x3(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0afn\x20getSh'+'adowSpotPC'+'F3x3(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3(')+('shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams.xyz);'+'\x0a}\x0a\x0a//\x20---'+'--\x20Omni\x20Sa'+'mpling\x20---'+'--\x0a\x0a//\x20Not'+'\x20currently'+'\x20supported'+'\x20on\x20WebGPU'+'\x20device\x0a//'+'\x20fn\x20getSha'+'dowOmniPCF'+'3x3(shadow'+'Map:\x20textu'+'re_depth_c'+'ube,\x20shado'+'wMapSample'+'r:\x20sampler'+'_compariso'+'n,\x20shadowP'+'arams:\x20vec'+'4f,\x20dir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a//\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a//\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(dir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x0a//'+'\x20\x20\x20\x20\x20//\x20of'+'fset\x0a//\x20\x20\x20'+'\x20\x20let\x20texS'+'ize_i\x20=\x20te'+'xtureDimen'+'sions(shad'+'owMap,\x200);'+'\x0a//\x20\x20\x20\x20\x20le'+'t\x20z:\x20f32\x20='+'\x201.0\x20/\x20f32'+'(texSize_i'+'.x);\x0a//\x20\x20\x20'+'\x20\x20let\x20tc:\x20'+'vec3f\x20=\x20no'+'rmalize(di'+'r);\x0a\x0a//\x20\x20\x20'+'\x20\x20//\x20avera'+'ge\x204\x20sampl'+'es\x20-\x20not\x20a'+'\x20strict\x203x'+'3\x20PCF\x20but\x20'+'that\x27s\x20tri'+'cky\x20with\x20c'+'ubemaps\x0a//'+'\x20\x20\x20\x20\x20var\x20s'+'hadows:\x20ve'+'c4f;\x0a//\x20\x20\x20'+'\x20\x20shadows.'+'x\x20=\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20t'+'c\x20+\x20vec3f('+'\x20z,\x20\x20z,\x20\x20z'+'),\x20shadowZ'+');\x0a//\x20\x20\x20\x20\x20'+'shadows.y\x20'+'=\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20tc\x20'+'+\x20vec3f(-z'+',\x20-z,\x20\x20z),'+'\x20shadowZ);'+'\x0a//\x20\x20\x20\x20\x20sh'+'adows.z\x20=\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20tc\x20+\x20'+'vec3f(-z,\x20'+'\x20z,\x20-z),\x20s'+'hadowZ);\x0a/')+('/\x20\x20\x20\x20\x20shad'+'ows.w\x20=\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20tc\x20+\x20ve'+'c3f(\x20z,\x20-z'+',\x20-z),\x20sha'+'dowZ);\x0a\x0a//'+'\x20\x20\x20\x20\x20retur'+'n\x20dot(shad'+'ows,\x20vec4f'+'(0.25));\x0a/'+'/\x20}\x0a\x0a//\x20fn'+'\x20getShadow'+'OmniPCF3x3'+'_Wrapper(s'+'hadowMap:\x20'+'texture_de'+'pth_cube,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a//\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCF3x3(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowParams'+',\x20lightDir'+');\x0a//\x20}\x0a'),kD='\x0a//\x20http:/'+'/the-witne'+'ss.net/new'+'s/2013/09/'+'shadow-map'+'ping-summa'+'ry-part-1/'+'\x0afn\x20_getSh'+'adowPCF5x5'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20l'+'et\x20uw0:\x20f3'+'2\x20=\x20(4.0\x20-'+'\x203.0\x20*\x20s);'+'\x0a\x20\x20\x20\x20let\x20u'+'w1:\x20f32\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20l'+'et\x20uw2:\x20f3'+'2\x20=\x20(1.0\x20+'+'\x203.0\x20*\x20s);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'u0_offset:'+'\x20f32\x20=\x20(3.'+'0\x20-\x202.0\x20*\x20'+'s)\x20/\x20uw0\x20-'+'\x202.0;\x0a\x20\x20\x20\x20'+'let\x20u1_off'+'set:\x20f32\x20='+'\x20(3.0\x20+\x20s)'+'\x20/\x20uw1;\x0a\x20\x20'+'\x20\x20let\x20u2_o'+'ffset:\x20f32'+'\x20=\x20s\x20/\x20uw2'+'\x20+\x202.0;\x0a\x0a\x20'+'\x20\x20\x20let\x20vw0'+':\x20f32\x20=\x20(4'+'.0\x20-\x203.0\x20*'+'\x20t);\x0a\x20\x20\x20\x20l'+'et\x20vw1:\x20f3'+'2\x20=\x207.0;\x0a\x20'+'\x20\x20\x20let\x20vw2'+':\x20f32\x20=\x20(1'+'.0\x20+\x203.0\x20*'+'\x20t);\x0a\x0a\x20\x20\x20\x20'+'let\x20v0_off'+'set:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t)\x20/\x20v'+'w0\x20-\x202.0;\x0a'+'\x20\x20\x20\x20let\x20v1'+'_offset:\x20f'+'32\x20=\x20(3.0\x20'+('+\x20t)\x20/\x20vw1'+';\x0a\x20\x20\x20\x20let\x20'+'v2_offset:'+'\x20f32\x20=\x20t\x20/'+'\x20vw2\x20+\x202.0'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20sum:\x20f32\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20let\x20u0:\x20'+'f32\x20=\x20u0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.x;\x0a\x20\x20'+'\x20\x20let\x20v0:\x20'+'f32\x20=\x20v0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20u1:'+'\x20f32\x20=\x20u1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.x;\x0a\x20'+'\x20\x20\x20let\x20v1:'+'\x20f32\x20=\x20v1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20let\x20u2'+':\x20f32\x20=\x20u2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.x;\x0a'+'\x20\x20\x20\x20let\x20v2'+':\x20f32\x20=\x20v2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20sum\x20='+'\x20sum\x20+\x20uw0'+'\x20*\x20vw0\x20*\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20vec2f('+'u0,\x20v0),\x20z'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20sum\x20+\x20u'+'w1\x20*\x20vw0\x20*'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20vec2'+'f(u1,\x20v0),'+'\x20z);\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw2\x20*\x20vw0'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u2,\x20v0'+'),\x20z);\x0a\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw0\x20*\x20'+'vw1\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u0,'+'\x20v1),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'1,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'2\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare')+('Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u2,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw0\x20*\x20vw2'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u0,\x20v2'+'),\x20z);\x0a\x20\x20\x20'+'\x20sum\x20=\x20sum'+'\x20+\x20uw1\x20*\x20v'+'w2\x20*\x20textu'+'reSampleCo'+'mpareLevel'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'vec2f(u1,\x20'+'v2),\x20z);\x0a\x20'+'\x20\x20\x20sum\x20=\x20s'+'um\x20+\x20uw2\x20*'+'\x20vw2\x20*\x20tex'+'tureSample'+'CompareLev'+'el(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20vec2f(u2'+',\x20v2),\x20z);'+'\x0a\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20*\x20(1'+'.0\x20/\x20144.0'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20saturat'+'e(sum);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afn'+'\x20getShadow'+'PCF5x5(sha'+'dowMap:\x20te'+'xture_dept'+'h_2d,\x20shad'+'owMapSampl'+'er:\x20sample'+'r_comparis'+'on,\x20shadow'+'Coord:\x20vec'+'3f,\x20shadow'+'Params:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20_getS'+'hadowPCF5x'+'5(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params.xyz'+');\x0a}\x0a\x0afn\x20g'+'etShadowSp'+'otPCF5x5(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owCoord:\x20v'+'ec3f,\x20shad'+'owParams:\x20'+'vec4f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20_ge'+'tShadowPCF'+'5x5(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a'),UD='\x0a\x0afn\x20fract'+'SinRand(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20PI:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20a:\x20f32\x20'+'=\x2012.9898;'+'\x20let\x20b:\x20f3'+'2\x20=\x2078.233'+';\x20let\x20c:\x20f'+'32\x20=\x2043758'+'.5453;\x0a\x20\x20\x20'+'\x20let\x20dt:\x20f'+'32\x20=\x20dot(u'+'v.xy,\x20vec2'+'f(a,\x20b));\x0a'+'\x20\x20\x20\x20let\x20sn'+':\x20f32\x20=\x20dt'+'\x20%\x20PI;\x0a\x20\x20\x20'+'\x20return\x20fr'+'act(sin(sn'+')\x20*\x20c);\x0a}\x0a'+'\x0a//\x20struct'+'\x20to\x20hold\x20p'+'recomputed'+'\x20constants'+'\x20and\x20curre'+'nt\x20state\x0as'+'truct\x20Voge'+'lDiskData\x20'+'{\x0a\x20\x20\x20\x20invN'+'umSamples:'+'\x20f32,\x0a\x20\x20\x20\x20'+'initialAng'+'le:\x20f32,\x0a\x20'+'\x20\x20\x20current'+'PointId:\x20f'+'32,\x0a}\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'fn\x20prepare'+'DiskConsta'+'nts(data:\x20'+'ptr<functi'+'on,\x20VogelD'+'iskData>,\x20'+'sampleCoun'+'t:\x20i32,\x20ra'+'ndomSeed:\x20'+'f32)\x20{\x0a\x20\x20\x20'+'\x20let\x20pi2:\x20'+'f32\x20=\x206.28'+'318530718;'+'\x0a\x20\x20\x20\x20data.'+'invNumSamp'+'les\x20=\x201.0\x20'+'/\x20f32(samp'+'leCount);\x0a'+'\x20\x20\x20\x20data.i'+'nitialAngl'+'e\x20=\x20random'+'Seed\x20*\x20pi2'+';\x0a\x20\x20\x20\x20data'+'.currentPo'+'intId\x20=\x200.'+'0;\x0a}\x0a\x0a\x0afn\x20'+'generateDi'+'skSample(d'+'ata:\x20ptr<f'+'unction,\x20V'+'ogelDiskDa'+'ta>)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20GOLDEN'+'_ANGLE:\x20f3'+'2\x20=\x202.3999'+'63;\x0a\x20\x20\x20\x20le'+'t\x20r:\x20f32\x20='+'\x20sqrt((dat'+'a.currentP'+'ointId\x20+\x200'+'.5)\x20*\x20data'+'.invNumSam'+'ples);\x0a\x20\x20\x20'+'\x20let\x20theta'+':\x20f32\x20=\x20da'+'ta.current'+'PointId\x20*\x20'+'GOLDEN_ANG'+'LE\x20+\x20data.'+'initialAng'+('le;\x0a\x0a\x20\x20\x20\x20l'+'et\x20offset:'+'\x20vec2f\x20=\x20v'+'ec2f(cos(t'+'heta),\x20sin'+'(theta))\x20*'+'\x20pow(r,\x201.'+'33);\x0a\x0a\x20\x20\x20\x20'+'data.curre'+'ntPointId\x20'+'=\x20data.cur'+'rentPointI'+'d\x20+\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'offset;\x0a}\x0a'+'\x0afn\x20PCSSFi'+'ndBlocker('+'shadowMap:'+'\x20texture_2'+'d<f32>,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler,\x20avgBl'+'ockerDepth'+':\x20ptr<func'+'tion,\x20f32>'+',\x20numBlock'+'ers:\x20ptr<f'+'unction,\x20i'+'32>,\x0a\x20\x20\x20\x20s'+'hadowCoord'+'s:\x20vec2f,\x20'+'z:\x20f32,\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32,\x20penum'+'braSize:\x20f'+'32,\x20invSha'+'dowMapSize'+':\x20f32,\x20ran'+'domSeed:\x20f'+'32)\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20diskD'+'ata:\x20Vogel'+'DiskData;\x0a'+'\x20\x20\x20\x20prepar'+'eDiskConst'+'ants(&disk'+'Data,\x20shad'+'owBlockerS'+'amples,\x20ra'+'ndomSeed);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'searchWidt'+'h:\x20f32\x20=\x20p'+'enumbraSiz'+'e\x20*\x20invSha'+'dowMapSize'+';\x0a\x20\x20\x20\x20var\x20'+'blockerSum'+':\x20f32\x20=\x200.'+'0;\x0a\x20\x20\x20\x20var'+'\x20numBlocke'+'rs_local:\x20'+'i32\x20=\x200;\x0a\x0a'+'\x20\x20\x20\x20for(\x20v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20s'+'hadowBlock'+'erSamples;'+'\x20i\x20=\x20i\x20+\x201'+'\x20)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20dis'+'kUV:\x20vec2f'+'\x20=\x20generat'+'eDiskSampl'+'e(&diskDat'+'a);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20samp'+'leUV:\x20vec2'+'f\x20=\x20shadow'+'Coords\x20+\x20d'+'iskUV\x20*\x20se'+'archWidth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadowM'+'apDepth:\x20f'+'32\x20=\x20textu'+'reSampleLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20sampleU'+'V,\x200.0).r;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(\x20shadow'+'MapDepth\x20<'+'\x20z\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20b'+'lockerSum\x20')+('=\x20blockerS'+'um\x20+\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers_local'+'\x20=\x20numBloc'+'kers_local'+'\x20+\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20*avg'+'BlockerDep'+'th\x20=\x20block'+'erSum\x20/\x20f3'+'2(numBlock'+'ers_local)'+';\x0a\x20\x20\x20\x20*num'+'Blockers\x20='+'\x20numBlocke'+'rs_local;\x0a'+'}\x0a\x0afn\x20PCSS'+'Filter(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20uv:\x20vec2'+'f,\x20receive'+'rDepth:\x20f3'+'2,\x20shadowS'+'amples:\x20i3'+'2,\x20filterR'+'adius:\x20f32'+',\x20randomSe'+'ed:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20var\x20dis'+'kData:\x20Vog'+'elDiskData'+';\x0a\x20\x20\x20\x20prep'+'areDiskCon'+'stants(&di'+'skData,\x20sh'+'adowSample'+'s,\x20randomS'+'eed);\x0a\x0a\x20\x20\x20'+'\x20var\x20sum:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20for\x20('+'var\x20i:\x20i32'+'\x20=\x200;\x20i\x20<\x20'+'shadowSamp'+'les;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'offsetUV:\x20'+'vec2f\x20=\x20ge'+'nerateDisk'+'Sample(&di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dept'+'h:\x20f32\x20=\x20t'+'extureSamp'+'leLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv\x20'+'+\x20offsetUV'+',\x200.0).r;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20su'+'m\x20=\x20sum\x20+\x20'+'step(recei'+'verDepth,\x20'+'depth);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20sum\x20/'+'\x20f32(shado'+'wSamples);'+'\x0a}\x0a\x0afn\x20get'+'Penumbra(d'+'blocker:\x20f'+'32,\x20drecei'+'ver:\x20f32,\x20'+'penumbraSi'+'ze:\x20f32,\x20p'+'enumbraFal'+'loff:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20di'+'st:\x20f32\x20=\x20'+'dreceiver\x20'+'-\x20dblocker'+';\x0a\x20\x20\x20\x20let\x20'+'penumbra:\x20'+'f32\x20=\x201.0\x20'+'-\x20pow(1.0\x20'+'-\x20dist,\x20pe')+('numbraFall'+'off);\x0a\x20\x20\x20\x20'+'return\x20pen'+'umbra\x20*\x20pe'+'numbraSize'+';\x0a}\x0a\x0afn\x20PC'+'SSDirectio'+'nal(shadow'+'Map:\x20textu'+'re_2d<f32>'+',\x20shadowMa'+'pSampler:\x20'+'sampler,\x20s'+'hadowCoord'+'s:\x20vec3f,\x20'+'cameraPara'+'ms:\x20vec4f,'+'\x20softShado'+'wParams:\x20v'+'ec4f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'let\x20receiv'+'erDepth:\x20f'+'32\x20=\x20shado'+'wCoords.z;'+'\x0a\x20\x20\x20\x20let\x20r'+'andomSeed:'+'\x20f32\x20=\x20fra'+'ctSinRand('+'pcPosition'+'.xy);\x0a\x20\x20\x20\x20'+'let\x20shadow'+'Samples:\x20i'+'32\x20=\x20i32(s'+'oftShadowP'+'arams.x);\x0a'+'\x20\x20\x20\x20let\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32\x20=\x20i32('+'softShadow'+'Params.y);'+'\x0a\x20\x20\x20\x20let\x20p'+'enumbraSiz'+'e:\x20f32\x20=\x20s'+'oftShadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20let\x20pen'+'umbraFallo'+'ff:\x20f32\x20=\x20'+'softShadow'+'Params.w;\x0a'+'\x0a\x20\x20\x20\x20let\x20s'+'hadowMapSi'+'ze:\x20i32\x20=\x20'+'i32(textur'+'eDimension'+'s(shadowMa'+'p,\x200).x);\x0a'+'\x20\x20\x20\x20var\x20in'+'vShadowMap'+'Size:\x20f32\x20'+'=\x201.0\x20/\x20f3'+'2(shadowMa'+'pSize);\x0a\x20\x20'+'\x20\x20invShado'+'wMapSize\x20='+'\x20invShadow'+'MapSize\x20*\x20'+'(f32(shado'+'wMapSize)\x20'+'/\x202048.0);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'penumbra:\x20'+'f32;\x0a\x0a\x20\x20\x20\x20'+'//\x20contact'+'\x20hardening'+'\x20path\x0a\x20\x20\x20\x20'+'if\x20(shadow'+'BlockerSam'+'ples\x20>\x200)\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20find\x20a'+'verage\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20avgBloc'+'kerDepth:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20numBloc'+'kers:\x20i32\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20&a'+'vgBlockerD'+'epth,\x20&num')+('Blockers,\x20'+'shadowCoor'+'ds.xy,\x20rec'+'eiverDepth'+',\x20shadowBl'+'ockerSampl'+'es,\x20penumb'+'raSize,\x20in'+'vShadowMap'+'Size,\x20rand'+'omSeed);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20when\x20no\x20b'+'lockers\x20ar'+'e\x20present\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(numBlock'+'ers\x20<\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20pen'+'umbra\x20size'+'\x20is\x20based\x20'+'on\x20the\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20p'+'enumbra\x20=\x20'+'getPenumbr'+'a(avgBlock'+'erDepth,\x20s'+'hadowCoord'+'s.z,\x20penum'+'braSize,\x20p'+'enumbraFal'+'loff);\x0a\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20constan'+'t\x20filter\x20s'+'ize,\x20no\x20co'+'ntact\x20hard'+'ening\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20penumb'+'ra\x20=\x20penum'+'braSize;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20filter'+'Radius:\x20f3'+'2\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ords.xy,\x20r'+'eceiverDep'+'th,\x20shadow'+'Samples,\x20f'+'ilterRadiu'+'s,\x20randomS'+'eed);\x0a}\x0a\x0af'+'n\x20getShado'+'wPCSS(shad'+'owMap:\x20tex'+'ture_2d<f3'+'2>,\x20shadow'+'MapSampler'+':\x20sampler,'+'\x20shadowCoo'+'rd:\x20vec3f,'+'\x20shadowPar'+'ams:\x20vec4f'+',\x20cameraPa'+'rams:\x20vec4'+'f,\x20softSha'+'dowParams:'+'\x20vec4f,\x20li'+'ghtDir:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x20//\x20lig'+'htDir\x20unus'+'ed?\x20Kept\x20p'+'aram.\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SDirection'+'al(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ord,\x20camer'+'aParams,\x20s'+'oftShadowP')+'arams);\x0a}\x0a',BD='\x0aattribute'+'\x20vertex_bo'+'neIndices:'+'\x20f32;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20g'+'etBoneMatr'+'ix(indexFl'+'oat:\x20f32)\x20'+'->\x20mat4x4f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20width\x20=\x20'+'i32(textur'+'eDimension'+'s(texture_'+'poseMap).x'+');\x0a\x20\x20\x20\x20let'+'\x20index:\x20i3'+'2\x20=\x20i32(in'+'dexFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x20\x20\x20\x20let\x20i'+'y:\x20i32\x20=\x20i'+'ndex\x20/\x20wid'+'th;\x0a\x20\x20\x20\x20le'+'t\x20ix:\x20i32\x20'+'=\x20index\x20%\x20'+'width;\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'elements\x20o'+'f\x204x3\x20matr'+'ix\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec4f'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(ix'+'\x20+\x200,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20v2:\x20vec'+'4f\x20=\x20textu'+'reLoad(tex'+'ture_poseM'+'ap,\x20vec2i('+'ix\x20+\x201,\x20iy'+'),\x200);\x0a\x20\x20\x20'+'\x20let\x20v3:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(ix\x20+\x202,\x20'+'iy),\x200);\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4x4f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.x,\x20v2.x,'+'\x20v3.x,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.y,\x20v2.y,\x20'+'v3.y,\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'z,\x20v2.z,\x20v'+'3.z,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.w'+',\x20v2.w,\x20v3'+'.w,\x201.0\x0a\x20\x20'+'\x20\x20);\x0a}\x0a',zD='\x0a\x0aattribut'+'e\x20vertex_b'+'oneWeights'+':\x20vec4f;\x0aa'+'ttribute\x20v'+'ertex_bone'+'Indices:\x20v'+'ec4f;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0astru'+'ct\x20BoneMat'+'rix\x20{\x0a\x20\x20\x20\x20'+'v1:\x20vec4f,'+'\x0a\x20\x20\x20\x20v2:\x20v'+'ec4f,\x0a\x20\x20\x20\x20'+'v3:\x20vec4f,'+'\x0a}\x0a\x0afn\x20get'+'BoneMatrix'+'(width:\x20i3'+'2,\x20index:\x20'+'i32)\x20->\x20Bo'+'neMatrix\x20{'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'v\x20=\x20index\x20'+'/\x20width;\x0a\x20'+'\x20\x20\x20let\x20u\x20='+'\x20index\x20%\x20w'+'idth;\x0a\x0a\x20\x20\x20'+'\x20var\x20resul'+'t:\x20BoneMat'+'rix;\x0a\x20\x20\x20\x20r'+'esult.v1\x20='+'\x20textureLo'+'ad(texture'+'_poseMap,\x20'+'vec2i(u\x20+\x20'+'0,\x20v),\x200);'+'\x0a\x20\x20\x20\x20resul'+'t.v2\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20result.v3'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(u\x20'+'+\x202,\x20v),\x200'+');\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0afn\x20ge'+'tSkinMatri'+'x(indicesF'+'loat:\x20vec4'+'f,\x20weights'+':\x20vec4f)\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20width\x20=\x20i'+'32(texture'+'Dimensions'+'(texture_p'+'oseMap).x)'+';\x0a\x20\x20\x20\x20var\x20'+'indices\x20=\x20'+'vec4i(indi'+'cesFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'boneA\x20=\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.x);'+'\x0a\x20\x20\x20\x20let\x20b'+'oneB\x20=\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y);\x0a'+'\x20\x20\x20\x20let\x20bo'+'neC\x20=\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.z);\x0a\x20'+'\x20\x20\x20let\x20bon'+'eD\x20=\x20getBo'+'neMatrix(w'+'idth,\x20indi'+'ces.w);\x0a\x0a\x20'+'\x20\x20\x20//\x20...\x20'+'rest\x20of\x20ge'+'tSkinMatri'+'x\x20remains\x20'+'the\x20same\x20.'+'..\x0a\x20\x20\x20\x20let'+'\x20v1\x20=\x20bone'+'A.v1\x20*\x20wei'+('ghts.x\x20+\x20b'+'oneB.v1\x20*\x20'+'weights.y\x20'+'+\x20boneC.v1'+'\x20*\x20weights'+'.z\x20+\x20boneD'+'.v1\x20*\x20weig'+'hts.w;\x0a\x20\x20\x20'+'\x20let\x20v2\x20=\x20'+'boneA.v2\x20*'+'\x20weights.x'+'\x20+\x20boneB.v'+'2\x20*\x20weight'+'s.y\x20+\x20bone'+'C.v2\x20*\x20wei'+'ghts.z\x20+\x20b'+'oneD.v2\x20*\x20'+'weights.w;'+'\x0a\x20\x20\x20\x20let\x20v'+'3\x20=\x20boneA.'+'v3\x20*\x20weigh'+'ts.x\x20+\x20bon'+'eB.v3\x20*\x20we'+'ights.y\x20+\x20'+'boneC.v3\x20*'+'\x20weights.z'+'\x20+\x20boneD.v'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'let\x20one\x20=\x20'+'dot(weight'+'s,\x20vec4f(1'+'.0,\x201.0,\x201'+'.0,\x201.0));'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'ranspose\x20t'+'o\x204x4\x20matr'+'ix\x0a\x20\x20\x20\x20ret'+'urn\x20mat4x4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20v1.x,\x20v2.'+'x,\x20v3.x,\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'v1.y,\x20v2.y'+',\x20v3.y,\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.z,\x20v2.z,'+'\x20v3.z,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.w,\x20v2.w,\x20'+'v3.w,\x20one\x0a'+'\x20\x20\x20\x20);\x0a}\x0a'),VD='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vLinear'+'Depth:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'floatAsUin'+'tPS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20Varyin'+'g\x20and\x20unif'+'orm\x20declar'+'ations\x0a\x20\x20\x20'+'\x20varying\x20v'+'ViewDir\x20:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20uniform\x20s'+'kyboxHighl'+'ightMultip'+'lier\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20SKY_CU'+'BEMAP\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cub'+'eMap\x20:\x20tex'+'ture_cube<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_cube'+'Map_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vWo'+'rldPos\x20:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20p'+'rojectedSk'+'ydomeCente'+'r\x20:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'env-atlas\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'phericalPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'envAtlasPS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_envAtlas_'+'sampler\x20:\x20'+'sampler;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20mipL'+'evel\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20@'+'fragment\x0a\x20'+'\x20\x20\x20fn\x20frag'+'mentMain(i'+'nput\x20:\x20Fra'+'gmentInput'+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20PREPA'+('SS_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20output'+'\x20linear\x20de'+'pth\x20during'+'\x20prepass\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20floa'+'t2vec4(vLi'+'nearDepth)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20linear'+'\x20:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20dir\x20'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KY_CUBEMAP'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+'\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+'nvDir\x20:\x20ve'+'c3f\x20=\x20norm'+'alize(inpu'+'t.vWorldPo'+'s\x20-\x20unifor'+'m.projecte'+'dSkydomeCe'+'nter);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'\x20=\x20envDir\x20'+'*\x20uniform.'+'cubeMapRot'+'ationMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir\x20='+'\x20input.vVi'+'ewDir;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'.x\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'tureSample'+'(texture_c'+'ubeMap,\x20te'+'xture_cube'+'Map_sample'+'r,\x20dir));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20env-atla'+'s\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ir\x20=\x20input'+'.vViewDir\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv\x20:\x20'+'vec2f\x20=\x20to'+'SphericalU'+'v(normaliz'+'e(dir));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20linea'+'r\x20=\x20{SKYBO'+'X_DECODE_F'+'NC}(textur'+'eSample(te'+'xture_envA'+'tlas,\x20text'+'ure_envAtl'+'as_sampler'+',\x20mapRough'+'nessUv(uv,')+('\x20uniform.m'+'ipLevel)))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ou'+'r\x20HDR\x20enco'+'des\x20values'+'\x20up\x20to\x2064,'+'\x20so\x20allow\x20'+'extra\x20brig'+'htness\x20for'+'\x20the\x20clipp'+'ed\x20values\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(any('+'linear\x20>=\x20'+'vec3f(64.0'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20uniform.'+'skyboxHigh'+'lightMulti'+'plier;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(gam'+'maCorrectO'+'utput(tone'+'Map(proces'+'sEnvironme'+'nt(linear)'+')),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),GD='\x0a\x20\x20\x20\x20//\x20At'+'tribute\x0a\x20\x20'+'\x20\x20attribut'+'e\x20aPositio'+'n\x20:\x20vec4f;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20matrix'+'_view\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20uniform\x20m'+'atrix_proj'+'ectionSkyb'+'ox\x20:\x20mat4x'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vViewDir'+'\x20:\x20vec3f;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PREPASS_'+'PASS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20when'+'\x20skydome\x20r'+'enders\x20dep'+'th\x20during\x20'+'prepass,\x20g'+'enerate\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vLi'+'nearDepth:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vWorldP'+'os\x20:\x20vec3f'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input\x20'+':\x20VertexIn'+'put)\x20->\x20Ve'+'rtexOutput'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut\x20:\x20Verte'+'xOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20view\x20:\x20ma'+'t4x4f\x20=\x20un'+'iform.matr'+'ix_view;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'worldPos\x20:'+'\x20vec4f\x20=\x20u'+'niform.mat'+'rix_model\x20'+'*\x20input.aP'+'osition;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vW'+'orldPos\x20=\x20'+'worldPos.x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'inear\x20dept'+'h\x20from\x20the'+'\x20worldPosi'+'tion,\x20see\x20'+'getLinearD'+'epth\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vL'+'inearDepth'+'\x20=\x20-(unifo'+('rm.matrix_'+'view\x20*\x20vec'+'4f(worldPo'+'s.xyz,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[0]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[1]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[2]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20uniform.m'+'atrix_proj'+'ectionSkyb'+'ox\x20*\x20(view'+'\x20*\x20input.a'+'Position);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'vViewDir\x20='+'\x20input.aPo'+'sition.xyz'+'\x20*\x20uniform'+'.cubeMapRo'+'tationMatr'+'ix;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20for\x20'+'infinite\x20s'+'kybox,\x20use'+'\x20negative\x20'+'gl_Positio'+'n.w\x20to\x20get'+'\x20positive\x20'+'linear\x20dep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-pcPositi'+'on.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Force\x20sk'+'ybox\x20to\x20fa'+'r\x20Z,\x20regar'+'dless\x20of\x20t'+'he\x20clip\x20pl'+'anes\x20on\x20th'+'e\x20camera\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Subtract\x20a'+'\x20tiny\x20fudg'+'e\x20factor\x20t'+'o\x20ensure\x20f'+'loating\x20po'+'int\x20errors'+'\x20don\x27t\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20st'+'ill\x20push\x20p'+'ixels\x20beyo'+'nd\x20far\x20Z.\x20'+'See:\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20http'+'s://commun'+'ity.khrono'+'s.org/t/sk'+'ybox-probl'+'em/61857\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.posit'+'ion.z\x20=\x20ou'+'tput.posit'+'ion.w\x20-\x201.'+'0e-7;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),HD='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_specular'+':\x20vec3f;\x0a#'+'endif\x0a\x0afn\x20'+'getSpecula'+'rity()\x20{\x0a\x20'+'\x20\x20\x20var\x20spe'+'cularColor'+'\x20=\x20vec3f(1'+'.0,\x201.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'CONSTANT\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20unifo'+'rm.materia'+'l_specular'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_TE'+'XTURE\x0a\x20\x20\x20\x20'+'specularCo'+'lor\x20=\x20spec'+'ularColor\x20'+'*\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SPECU'+'LAR_TEXTUR'+'E_NAME},\x20{'+'STD_SPECUL'+'AR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_S'+'PECULAR_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SPECULA'+'R_VERTEX\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20satur'+'ate3(vVert'+'exColor.{S'+'TD_SPECULA'+'R_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dSpe'+'cularity\x20='+'\x20specularC'+'olor;\x0a}\x0a',WD='\x0a\x0afn\x20toSph'+'erical(dir'+':\x20vec3f)\x20-'+'>\x20vec2f\x20{\x0a'+'\x20\x20\x20\x20let\x20an'+'gle_xz\x20=\x20s'+'elect(0.0,'+'\x20atan2(dir'+'.x,\x20dir.z)'+',\x20any(dir.'+'xz\x20!=\x20vec2'+'f(0.0)));\x0a'+'\x20\x20\x20\x20return'+'\x20vec2f(ang'+'le_xz,\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0afn\x20toS'+'phericalUv'+'(dir\x20:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20c'+'onst\x20PI\x20:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20uv\x20:\x20ve'+'c2f\x20=\x20toSp'+'herical(di'+'r)\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x20vec'+'2f(0.5,\x200.'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y);\x0a'+'}\x0a',$D='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'\x20\x20\x20\x20unifor'+'m\x20material'+'_speculari'+'tyFactor:\x20'+'f32;\x0a#endi'+'f\x0a\x0afn\x20getS'+'pecularity'+'Factor()\x20{'+'\x0a\x20\x20\x20\x20var\x20s'+'pecularity'+'Factor\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20speculari'+'tyFactor\x20='+'\x20speculari'+'tyFactor\x20*'+'\x20uniform.m'+'aterial_sp'+'ecularityF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'ARITYFACTO'+'R_TEXTURE\x0a'+'\x20\x20\x20\x20specul'+'arityFacto'+'r\x20=\x20specul'+'arityFacto'+'r\x20*\x20textur'+'eSampleBia'+'s({STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_NAME},\x20'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_VE'+'RTEX\x0a\x20\x20\x20\x20s'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_SPEC'+'ULARITYFAC'+'TOR_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dS'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor;\x0a}\x0a',XD='\x0afn\x20getSpo'+'tEffect(li'+'ghtSpotDir'+':\x20vec3f,\x20l'+'ightInnerC'+'oneAngle:\x20'+'f32,\x20light'+'OuterConeA'+'ngle:\x20f32,'+'\x20lightDirN'+'orm:\x20vec3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'osAngle:\x20f'+'32\x20=\x20dot(l'+'ightDirNor'+'m,\x20lightSp'+'otDir);\x0a\x20\x20'+'\x20\x20return\x20s'+'moothstep('+'lightOuter'+'ConeAngle,'+'\x20lightInne'+'rConeAngle'+',\x20cosAngle'+');\x0a}',qD='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2f(vUv0'+'.x,\x201.0\x20-\x20'+'vUv0.y);\x0a',jD='\x0a\x20\x20\x20\x20let\x20t'+'ileMask:\x20v'+'ec2f\x20=\x20ste'+'p(vMask,\x20v'+'ec2f(0.999'+'99));\x0a\x20\x20\x20\x20'+'let\x20tileSi'+'ze:\x20vec2f\x20'+'=\x200.5\x20*\x20(i'+'nnerOffset'+'.xy\x20+\x20inne'+'rOffset.zw'+');\x0a\x20\x20\x20\x20let'+'\x20tileScale'+':\x20vec2f\x20=\x20'+'vec2f(1.0)'+'\x20/\x20(vec2f('+'1.0)\x20-\x20til'+'eSize);\x0a\x20\x20'+'\x20\x20var\x20clam'+'pedUv:\x20vec'+'2f\x20=\x20mix(i'+'nnerOffset'+'.xy\x20*\x200.5,'+'\x20vec2f(1.0'+')\x20-\x20innerO'+'ffset.zw\x20*'+'\x200.5,\x20frac'+'t((vTiledU'+'v\x20-\x20tileSi'+'ze)\x20*\x20tile'+'Scale));\x0a\x20'+'\x20\x20\x20clamped'+'Uv\x20=\x20clamp'+'edUv\x20*\x20atl'+'asRect.zw\x20'+'+\x20atlasRec'+'t.xy;\x0a\x20\x20\x20\x20'+'var\x20nineSl'+'icedUv:\x20ve'+'c2f\x20=\x20vUv0'+'\x20*\x20tileMas'+'k\x20+\x20clampe'+'dUv\x20*\x20(vec'+'2f(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x0a',YD='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dAlpha'+':\x20f32\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20//'+'\x20all\x20passe'+'s\x20handle\x20o'+'pacity\x0a\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'!=\x20NONE\x20||'+'\x20defined(L'+'IT_ALPHA_T'+'EST)\x20||\x20de'+'fined(LIT_'+'ALPHA_TO_C'+'OVERAGE)\x20|'+'|\x20STD_OPAC'+'ITY_DITHER'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_OP'+'ACITY_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_opa'+'cityMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_opacityMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20globals'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dAlbedo:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'NormalW:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dSp'+'ecularity:'+'\x20vec3f\x20=\x20v'+'ec3f(0.0,\x20'+'0.0,\x200.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dGlossin'+'ess:\x20f32\x20='+'\x200.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_REFR'+'ACTION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dTransmi'+'ssion:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dTh'+'ickness:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'CENE_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SCREE'+'N_SIZE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20uSc'+'reenSize:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+('f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_TRANSFOR'+'MS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20ma'+'trix_viewP'+'rojection:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20matri'+'x_model:\x20m'+'at4x4f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20paral'+'lax\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_HEIGHT_'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'UvOffset:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'DIFFUSE_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_heightM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'heightMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20diffus'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'diffuseMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_diffus'+'eMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSEDETAI'+'L_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20norma'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_NORMAL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_normalMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20#ifdef'+'\x20STD_NORMA'+'LDETAIL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalDetai'+'lMap\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_no'+'rmalDetail'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_T'+'HICKNESS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'thicknessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_thic'+'knessMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_REFRACTIO'+'N_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_refract'+'ionMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'refraction'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20i'+'ridescence'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dIr'+'idescence:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20dIridesce'+'nceThickne'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'iridescenc'+'eThickness'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_iridescen'+'ceThicknes'+'sMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur')+('e_iridesce'+'nceMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_irides'+'cenceMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20ccSp'+'ecularity:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20ccGlossin'+'ess:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20ccNor'+'malW:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dAni'+'sotropy:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'Anisotropy'+'Rotation:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'arity\x20&\x20gl'+'ossiness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20she'+'en\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SHEE'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sSpecular'+'ity:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sGlossine'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'HEENGLOSS_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_s'+'heenGlossM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_sheenG'+'lossMapSam'+'pler\x20:\x20sam'+'pler;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_MET'+'ALNESS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dMet'+'alness:\x20f3'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dIor:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'metalnessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_metaln'+'essMapSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'rity\x20facto'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var<privat'+'e>\x20dSpecul'+'arityFacto'+'r:\x20f32;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rityFactor'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_specu'+'larityFact'+'orMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_SPECULAR'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_')+('specularMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20gloss\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_glossMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_glo'+'ssMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dAo:\x20f32;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_aoMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_AODETAIL_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoDet'+'ailMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_aoDeta'+'ilMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dEmission'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_EM'+'ISSIVE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_em'+'issiveMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_emissiv'+'eMapSample'+'r\x20:\x20sample')+('r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clearcoat\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatG'+'lossMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_clear'+'CoatGlossM'+'apSampler\x20'+':\x20sampler;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_clearC'+'oatNormalM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatN'+'ormalMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20anisotr'+'opy\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_A'+'NISOTROPY_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aniso'+'tropyMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_anis'+'otropyMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20lightm'+'ap\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(STD_LIG'+'HTMAP)\x20||\x20')+('defined(ST'+'D_LIGHT_VE'+'RTEX_COLOR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dLi'+'ghtmap:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_LI'+'GHT_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_l'+'ightMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_light'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20front'+'\x20end\x20outpu'+'ts\x20to\x20lit\x20'+'shader\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22litShader'+'CorePS\x22\x0a'),KD='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fn\x20'+'getSpecula'+'rity()\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dSpeculari'+'ty\x20=\x20vec3f'+'(1.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'gloss\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22gl'+'ossPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22aoPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20emissi'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22emissiveP'+'S\x22\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clear'+'coat\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20')+('LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22clea'+'rCoatPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'GlossPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'NormalPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ani'+'sotropy\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x20&&\x20defin'+'ed(LIT_LIG'+'HTING)\x20&&\x20'+'defined(LI'+'T_GGX_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22an'+'isotropyPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(ST'+'D_LIGHTMAP'+')\x20||\x20defin'+'ed(STD_LIG'+'HT_VERTEX_'+'COLOR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22l'+'ightmapPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20fn\x20evalu'+'ateFronten'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20al'+'l\x20passes\x20h'+'andle\x20opac'+'ity\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIT_'+'BLEND_TYPE'+'\x20!=\x20NONE\x20|'+'|\x20defined('+'LIT_ALPHA_'+'TEST)\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x20'+'||\x20STD_OPA'+'CITY_DITHE'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getOpaci'+'ty();\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_ALPHA'+'_TEST)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20alphaTe'+'st(dAlpha)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20opacityDi'+'ther(dAlph'+'a,\x200.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20d'+'Alpha;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20par')+('allax\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getP'+'arallax();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getA'+'lbedo();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_a'+'lbedo\x20=\x20dA'+'lbedo;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20normal\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getNorma'+'l();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_w'+'orldNormal'+'\x20=\x20dNormal'+'W;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'fraction\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etRefracti'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'transmissi'+'on\x20=\x20dTran'+'smission;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Thickness('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness\x20=\x20d'+'Thickness;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_D'+'ISPERSION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_di'+'spersion\x20='+'\x20uniform.m'+'aterial_di'+'spersion;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_IRIDESC'+'ENCE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getIrides'+'cence();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getIr'+'idescenceT'+'hickness()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x20=\x20'+'dIridescen'+'ce;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ir'+'idescence_'+'thickness\x20'+'=\x20dIridesc'+'enceThickn'+'ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specularit'+'y\x20&\x20glossi'+'ness\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20sheen\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSheen()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'sheen_spec'+'ularity\x20=\x20'+'sSpeculari'+'ty;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getShe'+'enGlossine'+'ss();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_sheen_'+'gloss\x20=\x20sG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getMetaln'+'ess();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_metal'+'ness\x20=\x20dMe'+'talness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etIor();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+'\x20=\x20dIor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'ity\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULARITY_'+'FACTOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'yFactor();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'Factor\x20=\x20d'+'Specularit'+'yFactor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20gloss\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'y();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20dSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs')+('_gloss\x20=\x20d'+'Glossiness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ao\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getAO();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_ao\x20=\x20'+'dAo;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getEmissi'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_emis'+'sion\x20=\x20dEm'+'ission;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getClea'+'rCoat();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getCl'+'earCoatGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'ClearCoatN'+'ormal();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_specula'+'rity\x20=\x20ccS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_glos'+'s\x20=\x20ccGlos'+'siness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal\x20=\x20ccNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20anisotro'+'py\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getAnisot'+'ropy();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20lightma'+'p\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightM'+'ap();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmap\x20='+'\x20dLightmap'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_')+('LIGHTMAP_D'+'IR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmapD'+'ir\x20=\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a'),ZD='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20tbnB'+'asis:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getTBN(t'+'angent:\x20ve'+'c3f,\x20binor'+'mal:\x20vec3f'+',\x20normal:\x20'+'vec3f)\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20TBN_TANGE'+'NTS\x20//\x20tan'+'gents\x20/\x20bi'+'normals\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dTB'+'N\x20=\x20mat3x3'+'f(normaliz'+'e(tangent)'+',\x20normaliz'+'e(binormal'+'),\x20normali'+'ze(normal)'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20define'+'d(TBN_DERI'+'VATIVES)\x20/'+'/\x20derivati'+'ves\x20based\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2f\x20=\x20{'+'lightingUv'+'};\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20get\x20e'+'dge\x20vector'+'s\x20of\x20the\x20p'+'ixel\x20trian'+'gle\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dp1:'+'\x20vec3f\x20=\x20d'+'pdx(\x20vPosi'+'tionW\x20);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dp2:\x20vec3'+'f\x20=\x20dpdy(\x20'+'vPositionW'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20duv1'+':\x20vec2f\x20=\x20'+'dpdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20duv2:\x20'+'vec2f\x20=\x20dp'+'dy(\x20uv\x20);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20solve\x20th'+'e\x20linear\x20s'+'ystem\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20dp'+'2perp:\x20vec'+'3f\x20=\x20cross'+'(\x20dp2,\x20nor'+'mal\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20d'+'p1perp:\x20ve'+'c3f\x20=\x20cros'+'s(\x20normal,'+'\x20dp1\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'T:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.x\x20+\x20'+'dp1perp\x20*\x20'+'duv2.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'B:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+('dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+'ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20deno'+'m:\x20f32\x20=\x20m'+'ax(\x20dot(T,'+'\x20T),\x20dot(B'+',\x20B)\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'invmax:\x20f3'+'2\x20=\x20select'+'(uniform.t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20),\x200.0,\x20'+'denom\x20==\x200'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3x3f(T\x20'+'*\x20invmax,\x20'+'-B\x20*\x20invma'+'x,\x20normal\x20'+');\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20obj'+'ect\x20space\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20B:\x20'+'vec3f\x20=\x20cr'+'oss(normal'+',\x20vObjectS'+'paceUpW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20T:\x20vec3f'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dot(B,'+'B)\x20==\x200.0)'+'\x20//\x20deal\x20w'+'ith\x20case\x20w'+'hen\x20vObjec'+'tSpaceUpW\x20'+'normal\x20are'+'\x20parallel\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20majo'+'r:\x20f32\x20=\x20m'+'ax(max(nor'+'mal.x,\x20nor'+'mal.y),\x20no'+'rmal.z);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(norm'+'al.x\x20==\x20ma'+'jor)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20B\x20=\x20c'+'ross(norma'+'l,\x20vec3f(0'+'.0,\x201.0,\x200'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20T\x20=\x20cros'+'s(normal,\x20'+'B);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x20if\x20(n'+'ormal.y\x20=='+'\x20major)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20B\x20'+'=\x20cross(no'+'rmal,\x20vec3'+'f(0.0,\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20//'+'\x20removed\x20\x22'+'if\x20(normal'+'.z\x20==\x20majo'+'r)\x22\x20assumi'+'ng\x20it\x27s\x20th'+'e\x20only\x20rem'+'aining\x20cas'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20B\x20=\x20cros'+'s(normal,\x20'+'vec3f(1.0,'+'\x200.0,\x200.0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3x3f(n'+'ormalize(T'+'),\x20normali'+'ze(B),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a}'),QD='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_th'+'ickness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getTh'+'ickness()\x20'+'{\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'THICKNESS_'+'CONSTANT\x0a\x20'+'\x20\x20\x20dThickn'+'ess\x20=\x20dThi'+'ckness\x20*\x20u'+'niform.mat'+'erial_thic'+'kness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_THICKN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x20d'+'Thickness\x20'+'*\x20textureS'+'ampleBias('+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_THICKNESS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_THIC'+'KNESS_VERT'+'EX\x0a\x20\x20\x20\x20dTh'+'ickness\x20=\x20'+'dThickness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',JD='\x0a#if\x20(TONE'+'MAP\x20==\x20NON'+'E)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingNo'+'nePS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20FILMIC\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingFilmi'+'cPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22tonemap'+'pingLinear'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20HEJL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gHejlPS\x22\x0a#'+'elif\x20TONEM'+'AP\x20==\x20ACES'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingAces'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20ACES2\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngAces2PS\x22'+'\x0a#elif\x20TON'+'EMAP\x20==\x20NE'+'UTRAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gNeutralPS'+'\x22\x0a#endif\x0a',eI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20t'+'A:\x20f32\x20=\x202'+'.51;\x0a\x20\x20\x20\x20l'+'et\x20tB:\x20f32'+'\x20=\x200.03;\x0a\x20'+'\x20\x20\x20let\x20tC:'+'\x20f32\x20=\x202.4'+'3;\x0a\x20\x20\x20\x20let'+'\x20tD:\x20f32\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20let\x20tE:\x20f'+'32\x20=\x200.14;'+'\x0a\x20\x20\x20\x20let\x20x'+':\x20vec3f\x20=\x20'+'color\x20*\x20un'+'iform.expo'+'sure;\x0a\x20\x20\x20\x20'+'return\x20(x\x20'+'*\x20(tA\x20*\x20x\x20'+'+\x20tB))\x20/\x20('+'x\x20*\x20(tC\x20*\x20'+'x\x20+\x20tD)\x20+\x20'+'tE);\x0a}\x0a',tI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0a//\x20AC'+'ES\x20approxi'+'mation\x20by\x20'+'Stephen\x20Hi'+'ll\x0a\x0a//\x20sRG'+'B\x20=>\x20XYZ\x20='+'>\x20D65_2_D6'+'0\x20=>\x20AP1\x20='+'>\x20RRT_SAT\x0a'+'const\x20ACES'+'InputMat:\x20'+'mat3x3f\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20vec3f(0'+'.59719,\x200.'+'35458,\x200.0'+'4823),\x0a\x20\x20\x20'+'\x20vec3f(0.0'+'7600,\x200.90'+'834,\x200.015'+'66),\x0a\x20\x20\x20\x20v'+'ec3f(0.028'+'40,\x200.1338'+'3,\x200.83777'+')\x0a);\x0a\x0a//\x20O'+'DT_SAT\x20=>\x20'+'XYZ\x20=>\x20D60'+'_2_D65\x20=>\x20'+'sRGB\x0aconst'+'\x20ACESOutpu'+'tMat:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20v'+'ec3f(\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367),\x0a\x20\x20\x20\x20'+'vec3f(-0.1'+'0208,\x20\x201.1'+'0813,\x20-0.0'+'0605),\x0a\x20\x20\x20'+'\x20vec3f(-0.'+'00327,\x20-0.'+'07276,\x20\x201.'+'07602)\x0a);\x0a'+'\x0afn\x20RRTAnd'+'ODTFit(v:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20a:\x20v'+'ec3f\x20=\x20v\x20*'+'\x20(v\x20+\x20vec3'+'f(0.024578'+'6))\x20-\x20vec3'+'f(0.000090'+'537);\x0a\x20\x20\x20\x20'+'let\x20b:\x20vec'+'3f\x20=\x20v\x20*\x20('+'vec3f(0.98'+'3729)\x20*\x20v\x20'+'+\x20vec3f(0.'+'4329510))\x20'+'+\x20vec3f(0.'+'238081);\x0a\x20'+'\x20\x20\x20return\x20'+'a\x20/\x20b;\x0a}\x0a\x0a'+'fn\x20toneMap'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'var\x20c:\x20vec'+'3f\x20=\x20color'+'\x20*\x20(unifor'+'m.exposure'+'\x20/\x200.6);\x0a\x20'+'\x20\x20\x20c\x20=\x20c\x20*'+'\x20ACESInput'+'Mat;\x0a\x0a\x20\x20\x20\x20'+'//\x20Apply\x20R'+'RT\x20and\x20ODT'+'\x0a\x20\x20\x20\x20c\x20=\x20R'+'RTAndODTFi'+'t(c);\x0a\x20\x20\x20\x20'+'c\x20=\x20c\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(c,\x20vec'+'3f(0.0),\x20v'+'ec3f(1.0))'+';\x0a}\x0a',sI='\x0aconst\x20A:\x20'+'f32\x20=\x200.15'+';\x0aconst\x20B:'+'\x20f32\x20=\x200.5'+'0;\x0aconst\x20C'+':\x20f32\x20=\x200.'+'10;\x0aconst\x20'+'D:\x20f32\x20=\x200'+'.20;\x0aconst'+'\x20E:\x20f32\x20=\x20'+'0.02;\x0acons'+'t\x20F:\x20f32\x20='+'\x200.30;\x0acon'+'st\x20W:\x20f32\x20'+'=\x2011.2;\x0a\x0au'+'niform\x20exp'+'osure:\x20f32'+';\x0a\x0afn\x20unch'+'arted2Tone'+'map(x:\x20vec'+'3f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20((x\x20'+'*\x20(A\x20*\x20x\x20+'+'\x20C\x20*\x20B)\x20+\x20'+'D\x20*\x20E)\x20/\x20('+'x\x20*\x20(A\x20*\x20x'+'\x20+\x20B)\x20+\x20D\x20'+'*\x20F))\x20-\x20ve'+'c3f(E\x20/\x20F)'+';\x0a}\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20c'+':\x20vec3f\x20=\x20'+'uncharted2'+'Tonemap(co'+'lor\x20*\x20unif'+'orm.exposu'+'re);\x0a\x20\x20\x20\x20l'+'et\x20whiteSc'+'ale:\x20vec3f'+'\x20=\x20vec3f(1'+'.0)\x20/\x20unch'+'arted2Tone'+'map(vec3f('+'W,\x20W,\x20W));'+'\x0a\x20\x20\x20\x20c\x20*=\x20'+'whiteScale'+';\x0a\x20\x20\x20\x20retu'+'rn\x20c;\x0a}\x0a',iI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20A'+':\x20f32\x20=\x200.'+'22;\x0a\x20\x20\x20\x20le'+'t\x20B:\x20f32\x20='+'\x200.3;\x0a\x20\x20\x20\x20'+'let\x20C:\x20f32'+'\x20=\x200.1;\x0a\x20\x20'+'\x20\x20let\x20D:\x20f'+'32\x20=\x200.2;\x0a'+'\x20\x20\x20\x20let\x20E:'+'\x20f32\x20=\x200.0'+'1;\x0a\x20\x20\x20\x20let'+'\x20F:\x20f32\x20=\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20Scl:\x20f3'+'2\x20=\x201.25;\x0a'+'\x0a\x20\x20\x20\x20let\x20a'+'djusted_co'+'lor\x20=\x20colo'+'r\x20*\x20unifor'+'m.exposure'+';\x0a\x20\x20\x20\x20let\x20'+'h\x20=\x20max(ve'+'c3f(0.0),\x20'+'adjusted_c'+'olor\x20-\x20vec'+'3f(0.004))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20(h\x20*\x20('+'(Scl\x20*\x20A)\x20'+'*\x20h\x20+\x20Scl\x20'+'*\x20vec3f(C\x20'+'*\x20B))\x20+\x20Sc'+'l\x20*\x20vec3f('+'D\x20*\x20E))\x20/\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(h\x20*\x20(A\x20*'+'\x20h\x20+\x20vec3f'+'(B))\x20+\x20vec'+'3f(D\x20*\x20F))'+'\x20-\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20Scl\x20*\x20'+'vec3f(E\x20/\x20'+'F);\x0a}\x0a',rI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20color\x20*\x20'+'uniform.ex'+'posure;\x0a}\x0a',aI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(col:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20var\x20col'+'or\x20=\x20col\x20*'+'\x20uniform.e'+'xposure;\x0a\x0a'+'\x20\x20\x20\x20let\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20let\x20des'+'aturation\x20'+'=\x200.15;\x0a\x0a\x20'+'\x20\x20\x20let\x20x\x20='+'\x20min(color'+'.r,\x20min(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20let\x20offs'+'et\x20=\x20selec'+'t(0.04,\x20x\x20'+'-\x206.25\x20*\x20x'+'\x20*\x20x,\x20x\x20<\x20'+'0.08);\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'vec3f(offs'+'et);\x0a\x0a\x20\x20\x20\x20'+'let\x20peak\x20='+'\x20max(color'+'.r,\x20max(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20if\x20(peak'+'\x20<\x20startCo'+'mpression)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'d\x20=\x201.0\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20let\x20newP'+'eak\x20=\x201.0\x20'+'-\x20d\x20*\x20d\x20/\x20'+'(peak\x20+\x20d\x20'+'-\x20startCom'+'pression);'+'\x0a\x20\x20\x20\x20color'+'\x20*=\x20newPea'+'k\x20/\x20peak;\x0a'+'\x0a\x20\x20\x20\x20let\x20g'+'\x20=\x201.0\x20-\x201'+'.0\x20/\x20(desa'+'turation\x20*'+'\x20(peak\x20-\x20n'+'ewPeak)\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ve'+'c3f(newPea'+'k),\x20vec3f('+'g));\x0a}\x0a',nI='\x0afn\x20toneMa'+'p(color:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a}\x0a',oI='\x0a#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20SCREE'+'NSPACE\x0a\x20\x20\x20'+'\x20uniform\x20p'+'rojectionF'+'lipY:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20evalWorl'+'dPosition('+'vertexPosi'+'tion:\x20vec3'+'f,\x20modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ve'+'c4f\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20local'+'Pos:\x20vec3f'+'\x20=\x20getLoca'+'lPosition('+'vertexPosi'+'tion);\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20outer\x20and'+'\x20inner\x20ver'+'tices\x20are\x20'+'at\x20the\x20sam'+'e\x20position'+',\x20scale\x20bo'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20local'+'PosXZ:\x20vec'+'2f\x20=\x20local'+'Pos.xz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20loca'+'lPosXZ\x20=\x20l'+'ocalPosXZ\x20'+'*\x20uniform.'+'outerScale'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20offset'+'\x20inner\x20ver'+'tices\x20insi'+'de\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20(origi'+'nal\x20vertic'+'es\x20must\x20be'+'\x20in\x20[-1;1]'+'\x20range)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'positiveUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(vertex'+'Position.x'+'z,\x20vec2f(0'+'.0),\x20vec2f'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(-verte'+'xPosition.'+'xz,\x20vec2f('+'0.0),\x20vec2'+'f(1.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20loc'+'alPosXZ\x20=\x20'+'localPosXZ'+'\x20+\x20(-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy\x20+'+'\x20negativeU'+'nitOffset\x20'+'*\x20uniform.'+'innerOffse'+'t.zw)\x20*\x20ve'+'rtex_texCo'+'ord0.xy;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'iledUvGlob'+'al\x20=\x20(loca'+'lPosXZ\x20-\x20u'+'niform.out'+'erScale\x20+\x20'+'uniform.in'+'nerOffset.'+'xy)\x20*\x20-0.5'+'\x20+\x201.0;\x20//'+'\x20uv\x20=\x20loca'+'l\x20pos\x20-\x20in'+('ner\x20corner'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPosXZ'+'\x20=\x20localPo'+'sXZ\x20*\x20-0.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20='+'\x20vec3f(loc'+'alPosXZ.x,'+'\x20localPosX'+'Z.y,\x20local'+'Pos.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20var\x20po'+'sW:\x20vec4f\x20'+'=\x20modelMat'+'rix\x20*\x20vec4'+'f(localPos'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREENSPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'posW\x20=\x20vec'+'4f(posW.xy'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20posW'+';\x0a}\x0a\x0afn\x20ge'+'tPosition('+')\x20->\x20vec4f'+'\x20{\x0a\x0a\x20\x20\x20\x20dM'+'odelMatrix'+'\x20=\x20getMode'+'lMatrix();'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'posW:\x20vec4'+'f\x20=\x20evalWo'+'rldPositio'+'n(vertex_p'+'osition.xy'+'z,\x20dModelM'+'atrix);\x0a\x20\x20'+'\x20\x20dPositio'+'nW\x20=\x20posW.'+'xyz;\x0a\x0a\x20\x20\x20\x20'+'var\x20screen'+'Pos:\x20vec4f'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20UV1LAYO'+'UT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20vec4f(v'+'ertex_texC'+'oord1.xy\x20*'+'\x202.0\x20-\x201.0'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20SCR'+'EENSPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20posW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20unif'+'orm.projec'+'tionFlipY;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos\x20=\x20u'+'niform.mat'+'rix_viewPr'+'ojection\x20*'+'\x20posW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20snap\x20ve'+'rtex\x20to\x20a\x20'+'pixel\x20boun'+'dary\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x200.'+'5)\x20+\x200.5;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20screenPo'+'s.xy\x20*=\x20un'+'iforms.uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'niforms.uS'+'creenSize.'+'zw;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x202.0'+')\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20scr'+'eenPos;\x0a}\x0a'+'\x0afn\x20getWor'+'ldPosition'+'()\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20dPosi'+'tionW;\x0a}\x0a'),lI='\x0a\x0a\x20\x20\x20\x20attr'+'ibute\x20vert'+'ex_positio'+'n:\x20vec4f;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'rix_model:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20morph_te'+'x_params:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20attri'+'bute\x20morph'+'_vertex_id'+':\x20u32;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etTextureM'+'orphCoords'+'()\x20->\x20vec2'+'i\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'turn\x20morph'+'_vertex_id'+'\x20into\x20int\x20'+'grid\x20coord'+'inates\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'Size:\x20vec2'+'i\x20=\x20vec2i('+'uniform.mo'+'rph_tex_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphGr'+'idV:\x20i32\x20='+'\x20i32(morph'+'_vertex_id'+')\x20/\x20textur'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20morph'+'GridU:\x20i32'+'\x20=\x20i32(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'rphGridV\x20='+'\x20textureSi'+'ze.y\x20-\x20mor'+'phGridV\x20-\x20'+'1;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec2i(mo'+'rphGridU,\x20'+'morphGridV'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_PO'+'SITION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20aabbSiz'+'e:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20aabbMi'+'n:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'morphPosit'+'ionTex:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'sitionTex:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+('if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sk'+'inBatchVS\x22'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fn\x20getMode'+'lMatrix()\x20'+'->\x20mat4x4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getBoneM'+'atrix(vert'+'ex_boneInd'+'ices);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(SKIN'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etModelMat'+'rix()\x20->\x20m'+'at4x4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20un'+'iform.matr'+'ix_model\x20*'+'\x20getSkinMa'+'trix(verte'+'x_boneIndi'+'ces,\x20verte'+'x_boneWeig'+'hts);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(INSTA'+'NCING)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22tran'+'sformInsta'+'ncingVS\x22\x0a\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'n\x20getModel'+'Matrix()\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_mode'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'fn\x20getLoca'+'lPosition('+'vertexPosi'+'tion:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20loc'+'alPos:\x20vec'+'3f\x20=\x20verte'+'xPosition;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphUV:'+'\x20vec2i\x20=\x20g'+'etTextureM'+'orphCoords'+'();\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MORPHI'+'NG_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Use\x20'+'textureLoa'+'d\x20instead\x20'+'of\x20texelFe'+'tch.\x20Coord'+'inates\x20mus'+'t\x20be\x20integ'+'er\x20type\x20(v'+'ec2i).\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20WGSL'+'\x20requires\x20'+'explicit\x20t'+'ype\x20conver'+'sion\x20for\x20v'+'ectors.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Div'+'ision\x20by\x20f'+'loat\x20liter')+('al\x20ensures'+'\x20floating\x20'+'point\x20divi'+'sion.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hPos:\x20vec3'+'f\x20=\x20vec3f('+'textureLoa'+'d(morphPos'+'itionTex,\x20'+'morphUV,\x200'+').xyz)\x20/\x206'+'5535.0\x20*\x20u'+'niform.aab'+'bSize\x20+\x20un'+'iform.aabb'+'Min;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Use\x20text'+'ureLoad\x20in'+'stead\x20of\x20t'+'exelFetch.'+'\x20Coordinat'+'es\x20must\x20be'+'\x20integer\x20t'+'ype\x20(vec2i'+').\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'s:\x20vec3f\x20='+'\x20textureLo'+'ad(morphPo'+'sitionTex,'+'\x20morphUV,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20+'+'=\x20morphPos'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20localP'+'os;\x0a\x20\x20\x20\x20}\x0a'),cI='\x0a\x0aattribut'+'e\x20instance'+'_line1:\x20ve'+'c4f;\x0aattri'+'bute\x20insta'+'nce_line2:'+'\x20vec4f;\x0aat'+'tribute\x20in'+'stance_lin'+'e3:\x20vec4f;'+'\x0aattribute'+'\x20instance_'+'line4:\x20vec'+'4f;\x0a\x0afn\x20ge'+'tModelMatr'+'ix()\x20->\x20ma'+'t4x4f\x20{\x0a\x20\x20'+'\x20\x20return\x20u'+'niform.mat'+'rix_model\x20'+'*\x20mat4x4f('+'instance_l'+'ine1,\x20inst'+'ance_line2'+',\x20instance'+'_line3,\x20in'+'stance_lin'+'e4);\x0a}\x0a',hI='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_refrac'+'tion:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getRefra'+'ction()\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction:\x20'+'f32\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20refractio'+'n\x20=\x20unifor'+'m.material'+'_refractio'+'n;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'REFRACTION'+'_TEXTURE\x0a\x20'+'\x20\x20\x20refract'+'ion\x20=\x20refr'+'action\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_REFRACTI'+'ON_TEXTURE'+'_NAME},\x20{S'+'TD_REFRACT'+'ION_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_REFRACTIO'+'N_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_REFRACTIO'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_VE'+'RTEX\x0a\x20\x20\x20\x20r'+'efraction\x20'+'=\x20refracti'+'on\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_REFRACTI'+'ON_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dTr'+'ansmission'+'\x20=\x20refract'+'ion;\x0a}\x0a',dI='\x0auniform\x20t'+'woSidedLig'+'htingNegSc'+'aleFactor:'+'\x20f32;\x0a\x0afn\x20'+'handleTwoS'+'idedLighti'+'ng()\x20{\x0a\x20\x20\x20'+'\x20dTBN[2]\x20='+'\x20dTBN[2]\x20*'+'\x20select(-u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20p'+'cFrontFaci'+'ng);\x0a}\x0a',fI='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20fn\x20getU'+'v0()\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20uv'+'\x20=\x20vertex_'+'position.x'+'z;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20offse'+'t\x20inner\x20ve'+'rtices\x20ins'+'ide\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2f(0'+'.0,\x200.0),\x20'+'vec2f(1.0,'+'\x201.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset\x20='+'\x20clamp(-ve'+'rtex_posit'+'ion.xz,\x20ve'+'c2f(0.0,\x200'+'.0),\x20vec2f'+'(1.0,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uv\x20=\x20uv\x20'+'+\x20((-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy)\x20'+'+\x20(negativ'+'eUnitOffse'+'t\x20*\x20unifor'+'m.innerOff'+'set.zw))\x20*'+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uv\x20=\x20uv\x20*'+'\x20-0.5\x20+\x20ve'+'c2f(0.5,\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20uniform'+'.atlasRect'+'.zw\x20+\x20unif'+'orm.atlasR'+'ect.xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dMa'+'skGlobal\x20='+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20uv'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20fn'+'\x20getUv0()\x20'+'->\x20vec2f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a',uI='\x0afn\x20getUv1'+'()\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20verte'+'x_texCoord'+'1;\x0a}\x0a',pI='\x0aoutput.vU'+'V{TRANSFOR'+'M_UV_{i}}_'+'{TRANSFORM'+'_ID_{i}}\x20='+'\x20vec2f(\x0a\x20\x20'+'\x20\x20dot(vec3'+'f(uv{TRANS'+'FORM_UV_{i'+'}},\x201),\x20un'+'iform.{TRA'+'NSFORM_NAM'+'E_{i}}0),\x0a'+'\x20\x20\x20\x20dot(ve'+'c3f(uv{TRA'+'NSFORM_UV_'+'{i}},\x201),\x20'+'uniform.{T'+'RANSFORM_N'+'AME_{i}}1)'+'\x0a);\x0a',mI='\x0a\x20\x20\x20\x20unifo'+'rm\x20{TRANSF'+'ORM_NAME_{'+'i}}0:\x20vec3'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20{TRAN'+'SFORM_NAME'+'_{i}}1:\x20ve'+'c3f;\x0a',_I='\x0afn\x20getVie'+'wDir()\x20{\x0a\x20'+'\x20\x20\x20dViewDi'+'rW\x20=\x20norma'+'lize(unifo'+'rm.view_po'+'sition\x20-\x20v'+'PositionW)'+';\x0a}\x0a',gI={'alphaTestPS':_2,'ambientPS':g2,'anisotropyPS':S2,'aoPS':y2,'aoDiffuseOccPS':v2,'aoSpecOccPS':x2,'bakeDirLmEndPS':T2,'bakeLmEndPS':w2,'basePS':E2,'baseNineSlicedPS':b2,'baseNineSlicedTiledPS':A2,'bayerPS':C2,'blurVSMPS':P2,'clearCoatPS':M2,'clearCoatGlossPS':D2,'clearCoatNormalPS':I2,'clusteredLightCookiesPS':R2,'clusteredLightShadowsPS':O2,'clusteredLightUtilsPS':L2,'clusteredLightPS':F2,'combinePS':N2,'cookieBlit2DPS':k2,'cookieBlitCubePS':U2,'cookieBlitVS':B2,'cubeMapProjectPS':z2,'cubeMapRotatePS':V2,'debugOutputPS':G2,'debugProcessFrontendPS':H2,'detailModesPS':$2,'diffusePS':X2,'decodePS':W2,'emissivePS':q2,'encodePS':j2,'endPS':Y2,'envAtlasPS':K2,'envProcPS':Z2,'falloffInvSquaredPS':Q2,'falloffLinearPS':J2,'floatAsUintPS':eM,'fogPS':tM,'fresnelSchlickPS':sM,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':iM,'gammaPS':rM,'glossPS':aM,'gsplatCenterVS':nM,'gsplatCornerVS':_M,'gsplatColorVS':oM,'gsplatCommonVS':lM,'gsplatCompressedDataVS':cM,'gsplatCompressedSHVS':hM,'gsplatEvalSHVS':dM,'gsplatQuatToMat3VS':fM,'gsplatSogsColorVS':uM,'gsplatSogsDataVS':pM,'gsplatSogsSHVS':mM,'gsplatDataVS':gM,'gsplatOutputVS':SM,'gsplatPS':yM,'gsplatSHVS':vM,'gsplatSourceVS':xM,'gsplatVS':TM,'quadVS':wM,'indirectCoreCS':EM,'immediateLinePS':bM,'immediateLineVS':AM,'iridescenceDiffractionPS':CM,'iridescencePS':PM,'iridescenceThicknessPS':MM,'iorPS':DM,'lightDeclarationPS':IM,'lightDiffuseLambertPS':LM,'lightDirPointPS':RM,'lightEvaluationPS':OM,'lightFunctionLightPS':FM,'lightFunctionShadowPS':NM,'lightingPS':kM,'lightmapAddPS':UM,'lightmapPS':BM,'lightSpecularAnisoGGXPS':zM,'lightSpecularBlinnPS':VM,'lightSheenPS':GM,'linearizeDepthPS':HM,'litForwardBackendPS':WM,'litForwardDeclarationPS':$M,'litForwardMainPS':XM,'litForwardPostCodePS':qM,'litForwardPreCodePS':jM,'litMainPS':YM,'litMainVS':KM,'litOtherMainPS':ZM,'litShaderArgsPS':QM,'litShaderCorePS':JM,'litShadowMainPS':eD,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':tD,'metalnessPS':sD,'metalnessModulatePS':rD,'morphPS':aD,'morphVS':nD,'msdfPS':iD,'msdfVS':oD,'normalVS':lD,'normalCoreVS':cD,'normalMapPS':hD,'opacityPS':dD,'opacityDitherPS':fD,'outputPS':uD,'outputAlphaPS':pD,'outputTex2DPS':mD,'sheenPS':_D,'sheenGlossPS':gD,'parallaxPS':SD,'pickPS':yD,'reflDirPS':vD,'reflDirAnisoPS':xD,'reflectionCCPS':TD,'reflectionCubePS':wD,'reflectionEnvHQPS':ED,'reflectionEnvPS':bD,'reflectionSpherePS':AD,'reflectionSheenPS':CD,'refractionCubePS':PD,'refractionDynamicPS':MD,'reprojectPS':DD,'reprojectVS':ID,'screenDepthPS':LD,'shadowCascadesPS':RD,'shadowEVSMPS':OD,'shadowPCF1PS':FD,'shadowPCF3PS':ND,'shadowPCF5PS':kD,'shadowSoftPS':UD,'skinBatchVS':BD,'skinVS':zD,'skyboxPS':VD,'skyboxVS':GD,'specularPS':HD,'sphericalPS':WD,'specularityFactorPS':$D,'spotPS':XD,'startNineSlicedPS':qD,'startNineSlicedTiledPS':jD,'stdDeclarationPS':YD,'stdFrontEndPS':KD,'TBNPS':ZD,'thicknessPS':QD,'tonemappingPS':JD,'tonemappingAcesPS':eI,'tonemappingAces2PS':tI,'tonemappingFilmicPS':sI,'tonemappingHejlPS':iI,'tonemappingLinearPS':rI,'tonemappingNeutralPS':aI,'tonemappingNonePS':nI,'transformVS':oI,'transformCoreVS':lI,'transformInstancingVS':cI,'transmissionPS':hI,'twoSidedLightingPS':dI,'uv0VS':fI,'uv1VS':uI,'uvTransformVS':pI,'uvTransformUniformsPS':mI,'viewDirPS':_I,'webgpuPS':cy,'webgpuVS':hy},Kr=class Kr extends me{constructor(_0xbdad0a){super(),h(this,'_batcher',null),h(this,'_destroyRe'+'quested',!(-0x3*0x313+0x1*0x755+0x61*0x5)),h(this,'_inFrameUp'+'date',!(0x1395*-0x1+-0xa*-0x1c+0x6*0x315)),h(this,'_libraries'+'Loaded',!(0x259*-0x5+0x10be+-0x500)),h(this,'_fillMode',q_),h(this,'_resolutio'+'nMode',qA),h(this,'_allowResi'+'ze',!(0x7*-0x76+-0x2283+0x1*0x25bd)),h(this,'_skyboxAss'+'et',null),h(this,'_soundMana'+'ger'),h(this,'_visibilit'+'yChangeHan'+'dler'),h(this,'_entityInd'+'ex',{}),h(this,'_inTools',!(-0x23a6+0x16*-0xbf+-0x115b*-0x3)),h(this,'_scriptPre'+'fix',''),h(this,'_time',-0x18df+0x24db+0x34*-0x3b),h(this,'enableBund'+'les',typeof TextDecoder<'u'),h(this,'frameReque'+'stId'),h(this,'timeScale',0xca2+0xf42+0x289*-0xb),h(this,'maxDeltaTi'+'me',-0x1e78+0x114a+0xd2e+0.1),h(this,'frame',0x28b*0x1+-0x3af+0x124),h(this,'frameGraph',new jA()),h(this,'renderer'),h(this,'scriptsOrd'+'er',[]),h(this,'stats'),h(this,'autoRender',!(-0xd*0xa6+-0x1f51+0x7f3*0x5)),h(this,'renderNext'+'Frame',!(-0x141c+0x1e0a+-0x9ed)),h(this,'graphicsDe'+'vice'),h(this,'root'),h(this,'scene'),h(this,'lightmappe'+'r',null),h(this,'loader',new vn(this)),h(this,'assets'),h(this,'bundles'),h(this,'scenes',new dC(this)),h(this,'scripts',new oC(this)),h(this,'systems',new iC()),h(this,'i18n',new Sa(this)),h(this,'keyboard',null),h(this,'mouse',null),h(this,'touch',null),h(this,'gamepads',null),h(this,'elementInp'+'ut',null),h(this,'xr',null),((sn==null?void(-0x1c7b+-0xa*0xe6+0x2577):sn['indexOf']('$'))<-0x5*-0x3ad+0x147+-0x13a8&&w['log']('Powered\x20by'+'\x20PlayCanva'+'s\x20'+sn+'\x20'+cS),Kr['_applicati'+'ons'][_0xbdad0a['id']]=this,Wf(this),this['root']=new lt(),this['root']['_enabledIn'+'Hierarchy']=!(-0x210+-0x466*-0x7+-0x1cba));}['init'](_0x509358){const {assetPrefix:_0x50a2eb,batchManager:_0xb57375,componentSystems:_0x32da6f,elementInput:_0x142020,gamepads:_0x49ccc1,graphicsDevice:_0x6d79dd,keyboard:_0x25177a,lightmapper:_0x41ed42,mouse:_0x492103,resourceHandlers:_0xd20cad,scriptsOrder:_0x16a3dc,scriptPrefix:_0xeef3f2,soundManager:_0x5a0650,touch:_0x2137dd,xr:_0x5b3cbc}=_0x509358;w['assert'](_0x6d79dd,'The\x20applic'+'ation\x20cann'+'ot\x20be\x20crea'+'ted\x20withou'+'t\x20a\x20valid\x20'+'GraphicsDe'+'vice'),this['graphicsDe'+'vice']=_0x6d79dd,Ce['get'](_0x6d79dd,Fe)['add'](m2),Ce['get'](_0x6d79dd,it)['add'](gI),this['_initDefau'+'ltMaterial'](),this['_initProgr'+'amLibrary'](),this['stats']=new fC(_0x6d79dd),this['_soundMana'+'ger']=_0x5a0650,this['scene']=new Et(_0x6d79dd),this['_registerS'+'ceneImmedi'+'ate'](this['scene']),this['assets']=new ln(this['loader']),_0x50a2eb&&(this['assets']['prefix']=_0x50a2eb),this['bundles']=new sC(this['assets']),this['scriptsOrd'+'er']=_0x16a3dc||[],this['defaultLay'+'erWorld']=new Ot({'name':'World','id':Ji}),this['defaultLay'+'erDepth']=new Ot({'name':'Depth','id':ps,'enabled':!(-0x137*0xb+0x8bb*-0x1+0x1619),'opaqueSortMode':Cc}),this['defaultLay'+'erSkybox']=new Ot({'name':'Skybox','id':wp,'opaqueSortMode':Cc}),this['defaultLay'+'erUi']=new Ot({'name':'UI','id':Sl,'transparentSortMode':fw}),this['defaultLay'+'erImmediat'+'e']=new Ot({'name':'Immediate','id':Ep,'opaqueSortMode':Cc});const _0x46eb69=new Bf('default');_0x46eb69['pushOpaque'](this['defaultLay'+'erWorld']),_0x46eb69['pushOpaque'](this['defaultLay'+'erDepth']),_0x46eb69['pushOpaque'](this['defaultLay'+'erSkybox']),_0x46eb69['pushTransp'+'arent'](this['defaultLay'+'erWorld']),_0x46eb69['pushOpaque'](this['defaultLay'+'erImmediat'+'e']),_0x46eb69['pushTransp'+'arent'](this['defaultLay'+'erImmediat'+'e']),_0x46eb69['pushTransp'+'arent'](this['defaultLay'+'erUi']),this['scene']['layers']=_0x46eb69,Qr['createPlac'+'eholder'](_0x6d79dd),this['renderer']=new Jo(_0x6d79dd),this['renderer']['scene']=this['scene'],_0x41ed42&&(this['lightmappe'+'r']=new _0x41ed42(_0x6d79dd,this['root'],this['scene'],this['renderer'],this['assets']),this['once']('prerender',this['_firstBake'],this)),_0xb57375&&(this['_batcher']=new _0xb57375(_0x6d79dd,this['root'],this['scene']),this['once']('prerender',this['_firstBatc'+'h'],this)),this['keyboard']=_0x25177a||null,this['mouse']=_0x492103||null,this['touch']=_0x2137dd||null,this['gamepads']=_0x49ccc1||null,_0x142020&&(this['elementInp'+'ut']=_0x142020,this['elementInp'+'ut']['app']=this),this['xr']=_0x5b3cbc?new _0x5b3cbc(this):null,this['elementInp'+'ut']&&this['elementInp'+'ut']['attachSele'+'ctEvents'](),this['_scriptPre'+'fix']=_0xeef3f2||'',this['enableBund'+'les']&&this['loader']['addHandler']('bundle',new aC(this)),_0xd20cad['forEach'](_0x4eb95e=>{const _0x5a77f5=new _0x4eb95e(this);this['loader']['addHandler'](_0x5a77f5['handlerTyp'+'e'],_0x5a77f5);}),_0x32da6f['forEach'](_0x3d67ca=>{this['systems']['add'](new _0x3d67ca(this));}),this['_visibilit'+'yChangeHan'+'dler']=this['onVisibili'+'tyChange']['bind'](this),typeof document<'u'&&(document['hidden']!==void(-0x6ec+0x100f*0x1+-0x1*0x923)?(this['_hiddenAtt'+'r']='hidden',document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x1*-0x137e+0xb*0xa2+0xc89))):document['mozHidden']!==void(-0x2251+0x53e+0x1d13)?(this['_hiddenAtt'+'r']='mozHidden',document['addEventLi'+'stener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x347+0x1087+0x13cd*-0x1))):document['msHidden']!==void(0xc9*-0x25+-0x1*0x1876+0x3583)?(this['_hiddenAtt'+'r']='msHidden',document['addEventLi'+'stener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x2336+-0x2b9+0x25f0))):document['webkitHidd'+'en']!==void(0x5*-0x30a+0x1d46+-0xe14)&&(this['_hiddenAtt'+'r']='webkitHidd'+'en',document['addEventLi'+'stener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1f9c+-0xd5*0x5+-0x2*-0x11e3)))),this['tick']=SI(this);}static['getApplica'+'tion'](_0x44495f){return _0x44495f?Kr['_applicati'+'ons'][_0x44495f]:Ys();}['_initDefau'+'ltMaterial'](){const _0x3f8cf3=new Ut();_0x3f8cf3['name']='Default\x20Ma'+'terial',Bw(this['graphicsDe'+'vice'],_0x3f8cf3);}['_initProgr'+'amLibrary'](){const _0x415288=new dA(this['graphicsDe'+'vice'],new Ut());Cw(this['graphicsDe'+'vice'],_0x415288);}get['soundManag'+'er'](){return this['_soundMana'+'ger'];}get['batcher'](){return w['assert'](this['_batcher'],'BatchManag'+'er\x20has\x20not'+'\x20been\x20crea'+'ted\x20and\x20is'+'\x20required\x20'+'for\x20correc'+'t\x20function'+'ality.'),this['_batcher'];}get['fillMode'](){return this['_fillMode'];}get['resolution'+'Mode'](){return this['_resolutio'+'nMode'];}['configure'](_0xce9893,_0x46813e){ot['get'](_0xce9893,(_0x2ff212,_0x46c37a)=>{if(_0x2ff212){_0x46813e(_0x2ff212);return;}const _0x178ddc=_0x46c37a['applicatio'+'n_properti'+'es'],_0x36c1c5=_0x46c37a['scenes'],_0x556d58=_0x46c37a['assets'];this['_parseAppl'+'icationPro'+'perties'](_0x178ddc,_0x28fd8e=>{this['_parseScen'+'es'](_0x36c1c5),this['_parseAsse'+'ts'](_0x556d58),_0x46813e(_0x28fd8e||null);});});}['preload'](_0x4f676e){this['fire']('preload:st'+'art');const _0x4e60ae=this['assets']['list']({'preload':!(0x1*-0x2d8+-0x7*-0xf1+-0x7*0x89)});if(_0x4e60ae['length']===0x146c+0xff4+-0x2460){this['fire']('preload:en'+'d'),_0x4f676e();return;}let _0x537f0a=0x2*-0xc1d+-0xb25+0x235f;const _0x1c64dc=()=>{_0x537f0a++,this['fire']('preload:pr'+'ogress',_0x537f0a/_0x4e60ae['length']),_0x537f0a===_0x4e60ae['length']&&(this['fire']('preload:en'+'d'),_0x4f676e());};_0x4e60ae['forEach'](_0x397a4b=>{_0x397a4b['loaded']?_0x1c64dc():(_0x397a4b['once']('load',_0x1c64dc),_0x397a4b['once']('error',_0x1c64dc),this['assets']['load'](_0x397a4b));});}['_preloadSc'+'ripts'](_0x46f64f,_0x15a213){_0x15a213();}['_parseAppl'+'icationPro'+'perties'](_0x438d49,_0x24e779){if(typeof _0x438d49['maxAssetRe'+'tries']=='number'&&_0x438d49['maxAssetRe'+'tries']>-0xaee+-0x1*-0x17f8+-0x1*0xd0a&&this['loader']['enableRetr'+'y'](_0x438d49['maxAssetRe'+'tries']),_0x438d49['useDeviceP'+'ixelRatio']||(_0x438d49['useDeviceP'+'ixelRatio']=_0x438d49['use_device'+'_pixel_rat'+'io']),_0x438d49['resolution'+'Mode']||(_0x438d49['resolution'+'Mode']=_0x438d49['resolution'+'_mode']),_0x438d49['fillMode']||(_0x438d49['fillMode']=_0x438d49['fill_mode']),this['_width']=_0x438d49['width'],this['_height']=_0x438d49['height'],_0x438d49['useDeviceP'+'ixelRatio']&&(this['graphicsDe'+'vice']['maxPixelRa'+'tio']=window['devicePixe'+'lRatio']),this['setCanvasR'+'esolution'](_0x438d49['resolution'+'Mode'],this['_width'],this['_height']),this['setCanvasF'+'illMode'](_0x438d49['fillMode'],this['_width'],this['_height']),_0x438d49['layers']&&_0x438d49['layerOrder']){const _0x180b4c=new Bf('applicatio'+'n'),_0x4df9cf={};for(const _0x109641 in _0x438d49['layers']){const _0x46a955=_0x438d49['layers'][_0x109641];_0x46a955['id']=parseInt(_0x109641,-0xcf*0x28+-0x1e6f+0x3ed1),_0x46a955['enabled']=_0x46a955['id']!==ps,_0x4df9cf[_0x109641]=new Ot(_0x46a955);}for(let _0x8d6b1b=-0x10cf*-0x1+0x1*0xa2f+-0x1afe,_0x58700d=_0x438d49['layerOrder']['length'];_0x8d6b1b<_0x58700d;_0x8d6b1b++){const _0x458b65=_0x438d49['layerOrder'][_0x8d6b1b],_0x423202=_0x4df9cf[_0x458b65['layer']];_0x423202&&(_0x458b65['transparen'+'t']?_0x180b4c['pushTransp'+'arent'](_0x423202):_0x180b4c['pushOpaque'](_0x423202),_0x180b4c['subLayerEn'+'abled'][_0x8d6b1b]=_0x458b65['enabled']);}this['scene']['layers']=_0x180b4c;}if(_0x438d49['batchGroup'+'s']){const _0x885038=this['batcher'];if(_0x885038)for(let _0x1610a1=0x9ca*0x3+-0x150b+-0x853,_0x37fe91=_0x438d49['batchGroup'+'s']['length'];_0x1610a1<_0x37fe91;_0x1610a1++){const _0x193a8a=_0x438d49['batchGroup'+'s'][_0x1610a1];_0x885038['addGroup'](_0x193a8a['name'],_0x193a8a['dynamic'],_0x193a8a['maxAabbSiz'+'e'],_0x193a8a['id'],_0x193a8a['layers']);}}_0x438d49['i18nAssets']&&(this['i18n']['assets']=_0x438d49['i18nAssets']),this['_loadLibra'+'ries'](_0x438d49['libraries'],_0x24e779);}['_loadLibra'+'ries'](_0x400746,_0x574ae){const _0x49763a=_0x400746['length'];let _0x539250=_0x49763a;const _0x1a9ea0=/^https?:\/\//;if(_0x49763a){const _0x55cb48=(_0x49f1b6,_0x122a86)=>{_0x539250--,_0x49f1b6?_0x574ae(_0x49f1b6):_0x539250===0x45*0x78+-0x43*0xe+0x1cae*-0x1&&(this['onLibrarie'+'sLoaded'](),_0x574ae(null));};for(let _0x292b26=0x9ba*0x3+0x23bd*0x1+-0x1*0x40eb;_0x292b26<_0x49763a;++_0x292b26){let _0x1f6917=_0x400746[_0x292b26];!_0x1a9ea0['test'](_0x1f6917['toLowerCas'+'e']())&&this['_scriptPre'+'fix']&&(_0x1f6917=xe['join'](this['_scriptPre'+'fix'],_0x1f6917)),this['loader']['load'](_0x1f6917,'script',_0x55cb48);}}else this['onLibrarie'+'sLoaded'](),_0x574ae(null);}['_parseScen'+'es'](_0x4de550){if(_0x4de550){for(let _0xb33152=-0x1230+-0x5*-0x209+-0x1*-0x803;_0xb33152<_0x4de550['length'];_0xb33152++)this['scenes']['add'](_0x4de550[_0xb33152]['name'],_0x4de550[_0xb33152]['url']);}}['_parseAsse'+'ts'](_0x2fb3aa){const _0xc6c62=[],_0x1faf99={},_0x10b130={};for(let _0x5c485d=-0x464+0x23ba+0x539*-0x6;_0x5c485d<this['scriptsOrd'+'er']['length'];_0x5c485d++){const _0x4bdf81=this['scriptsOrd'+'er'][_0x5c485d];_0x2fb3aa[_0x4bdf81]&&(_0x1faf99[_0x4bdf81]=!(0xe55+0x4*-0x2ab+-0x3a9*0x1),_0xc6c62['push'](_0x2fb3aa[_0x4bdf81]));}if(this['enableBund'+'les']){for(const _0x2e0053 in _0x2fb3aa)_0x2fb3aa[_0x2e0053]['type']==='bundle'&&(_0x10b130[_0x2e0053]=!(0xad*0x16+0x241e+-0x1a*0x1f6),_0xc6c62['push'](_0x2fb3aa[_0x2e0053]));}for(const _0xd0c547 in _0x2fb3aa)_0x1faf99[_0xd0c547]||_0x10b130[_0xd0c547]||_0xc6c62['push'](_0x2fb3aa[_0xd0c547]);for(let _0x26d9a2=-0x1*-0x2627+-0x110*0x24+-0x5*-0x5;_0x26d9a2<_0xc6c62['length'];_0x26d9a2++){const _0x4623fc=_0xc6c62[_0x26d9a2],_0x489803=new pe(_0x4623fc['name'],_0x4623fc['type'],_0x4623fc['file'],_0x4623fc['data']);if(_0x489803['id']=parseInt(_0x4623fc['id'],0x860+0x1f8c*0x1+-0xa*0x3fd),_0x489803['preload']=_0x4623fc['preload']?_0x4623fc['preload']:!(0x1b71+-0x1a37+-0x1*0x139),_0x489803['loaded']=_0x4623fc['type']==='script'&&_0x4623fc['data']&&_0x4623fc['data']['loadingTyp'+'e']>0x629*-0x1+-0x1*0x211a+0x2743,_0x489803['tags']['add'](_0x4623fc['tags']),_0x4623fc['i18n']){for(const _0x19ba18 in _0x4623fc['i18n'])_0x489803['addLocaliz'+'edAssetId'](_0x19ba18,_0x4623fc['i18n'][_0x19ba18]);}this['assets']['add'](_0x489803);}}['start'](){w['call'](()=>{w['assert'](!this['_alreadySt'+'arted'],'The\x20applic'+'ation\x20can\x20'+'be\x20started'+'\x20only\x20one\x20'+'time.'),this['_alreadySt'+'arted']=!(-0x1536+-0x2b*0xad+-0x1*-0x3245);}),this['frame']=-0x1be3+-0xef*0x25+0x3e6e,this['fire']('start',{'timestamp':de(),'target':this}),this['_libraries'+'Loaded']||this['onLibrarie'+'sLoaded'](),this['systems']['fire']('initialize',this['root']),this['fire']('initialize'),this['systems']['fire']('postInitia'+'lize',this['root']),this['systems']['fire']('postPostIn'+'itialize',this['root']),this['fire']('postinitia'+'lize'),this['tick']();}['inputUpdat'+'e'](_0x50f63b){this['controller']&&this['controller']['update'](_0x50f63b),this['mouse']&&this['mouse']['update'](),this['keyboard']&&this['keyboard']['update'](),this['gamepads']&&this['gamepads']['update']();}['update'](_0x502fd2){this['frame']++,this['graphicsDe'+'vice']['update'](),this['stats']['frame']['updateStar'+'t']=de(),this['systems']['fire'](this['_inTools']?'toolsUpdat'+'e':'update',_0x502fd2),this['systems']['fire']('animationU'+'pdate',_0x502fd2),this['systems']['fire']('postUpdate',_0x502fd2),this['fire']('update',_0x502fd2),this['inputUpdat'+'e'](_0x502fd2),this['stats']['frame']['updateTime']=de()-this['stats']['frame']['updateStar'+'t'];}['render'](){this['updateCanv'+'asSize'](),this['graphicsDe'+'vice']['frameStart'](),this['stats']['frame']['renderStar'+'t']=de(),this['fire']('prerender'),this['root']['syncHierar'+'chy'](),this['_batcher']&&this['_batcher']['updateAll'](),Jo['_skipRende'+'rCounter']=0x1*-0x2359+0x6*-0x671+0x49ff,this['renderComp'+'osition'](this['scene']['layers']),this['fire']('postrender'),this['stats']['frame']['renderTime']=de()-this['stats']['frame']['renderStar'+'t'],this['graphicsDe'+'vice']['frameEnd']();}['renderComp'+'osition'](_0x2291b8){Q['clearGpuMa'+'rkers'](),this['renderer']['update'](_0x2291b8),this['renderer']['buildFrame'+'Graph'](this['frameGraph'],_0x2291b8),this['frameGraph']['render'](this['graphicsDe'+'vice']);}['_fillFrame'+'StatsBasic'](_0x271b3e,_0x253178,_0x9153aa){const _0x4797a9=this['stats']['frame'];_0x4797a9['dt']=_0x253178,_0x4797a9['ms']=_0x9153aa,_0x271b3e>_0x4797a9['_timeToCou'+'ntFrames']?(_0x4797a9['fps']=_0x4797a9['_fpsAccum'],_0x4797a9['_fpsAccum']=0x47*0x3+0x2658+-0x272d,_0x4797a9['_timeToCou'+'ntFrames']=_0x271b3e+(0x1aca+-0x20*-0x56+-0x21a2)):_0x4797a9['_fpsAccum']++,this['stats']['drawCalls']['total']=this['graphicsDe'+'vice']['_drawCalls'+'PerFrame'],this['graphicsDe'+'vice']['_drawCalls'+'PerFrame']=0x4*0x171+0x229c+-0x2860;}['_fillFrame'+'Stats'](){let _0x2f8738=this['stats']['frame'];_0x2f8738['cameras']=this['renderer']['_camerasRe'+'ndered'],_0x2f8738['materials']=this['renderer']['_materialS'+'witches'],_0x2f8738['shaders']=this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame'],_0x2f8738['shadowMapU'+'pdates']=this['renderer']['_shadowMap'+'Updates'],_0x2f8738['shadowMapT'+'ime']=this['renderer']['_shadowMap'+'Time'],_0x2f8738['depthMapTi'+'me']=this['renderer']['_depthMapT'+'ime'],_0x2f8738['forwardTim'+'e']=this['renderer']['_forwardTi'+'me'];const _0x3aa2ee=this['graphicsDe'+'vice']['_primsPerF'+'rame'];_0x2f8738['triangles']=_0x3aa2ee[qs]/(-0xd0+-0x1977+0x1a4a)+Math['max'](_0x3aa2ee[vr]-(0x1527*0x1+0x4f0*-0x1+-0x1035),-0x1c73+0x1*0x1b61+0x112)+Math['max'](_0x3aa2ee[sa]-(-0x9*-0x3+0x1*0x139f+-0x13b8),-0x19e6+-0x1*0x1cfa+0x36e0),_0x2f8738['cullTime']=this['renderer']['_cullTime'],_0x2f8738['sortTime']=this['renderer']['_sortTime'],_0x2f8738['skinTime']=this['renderer']['_skinTime'],_0x2f8738['morphTime']=this['renderer']['_morphTime'],_0x2f8738['lightClust'+'ers']=this['renderer']['_lightClus'+'ters'],_0x2f8738['lightClust'+'ersTime']=this['renderer']['_lightClus'+'tersTime'],_0x2f8738['otherPrimi'+'tives']=-0x1*0x412+0x2b*-0xd5+-0x65*-0x65;for(let _0x3dae63=0x1726*-0x1+0x2048+-0x922;_0x3dae63<_0x3aa2ee['length'];_0x3dae63++)_0x3dae63<qs&&(_0x2f8738['otherPrimi'+'tives']+=_0x3aa2ee[_0x3dae63]),_0x3aa2ee[_0x3dae63]=-0x111+0x714+-0xab*0x9;this['renderer']['_camerasRe'+'ndered']=0x1*0x584+-0x1c*-0x49+0x8*-0x1b0,this['renderer']['_materialS'+'witches']=-0x151f+-0x1c00+0x9d3*0x5,this['renderer']['_shadowMap'+'Updates']=-0x25d8+-0x13a*-0x3+0x222a,this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame']=0xa38+-0x135e+-0x493*-0x2,this['renderer']['_cullTime']=0x670+-0xdc*-0x2b+-0x15b2*0x2,this['renderer']['_layerComp'+'ositionUpd'+'ateTime']=-0xc5c+-0x12e7+0x1f43,this['renderer']['_lightClus'+'tersTime']=0x1fd8+0x9a1+0xdd3*-0x3,this['renderer']['_sortTime']=0x41*0x1d+0xb1b*0x1+-0x1278,this['renderer']['_skinTime']=-0x32a*-0x1+0x24f+-0x579,this['renderer']['_morphTime']=-0xd49+0x44b+0x8fe,this['renderer']['_shadowMap'+'Time']=0x31*-0x19+0x1b61+-0x3c4*0x6,this['renderer']['_depthMapT'+'ime']=0x1fcc+-0xf06+-0x10c6,this['renderer']['_forwardTi'+'me']=0x89f*0x3+0xd02+-0x26df,_0x2f8738=this['stats']['drawCalls'],_0x2f8738['forward']=this['renderer']['_forwardDr'+'awCalls'],_0x2f8738['culled']=this['renderer']['_numDrawCa'+'llsCulled'],_0x2f8738['depth']=0x107e+0x2087*-0x1+-0x335*-0x5,_0x2f8738['shadow']=this['renderer']['_shadowDra'+'wCalls'],_0x2f8738['skinned']=this['renderer']['_skinDrawC'+'alls'],_0x2f8738['immediate']=-0x43f*-0x5+-0x1e94+0x959,_0x2f8738['instanced']=0x2654+-0xdae+-0x18a6,_0x2f8738['removedByI'+'nstancing']=-0x4*-0x745+-0x10*-0xc1+-0x2924,_0x2f8738['misc']=_0x2f8738['total']-(_0x2f8738['forward']+_0x2f8738['shadow']),this['renderer']['_depthDraw'+'Calls']=0x1*0x20ff+0x122*0x13+0x1*-0x3685,this['renderer']['_shadowDra'+'wCalls']=0xe01+-0x1fca+-0x9d*-0x1d,this['renderer']['_forwardDr'+'awCalls']=-0x146f*0x1+0x1e58+-0x9e9,this['renderer']['_numDrawCa'+'llsCulled']=-0x972+0xf9+-0x9*-0xf1,this['renderer']['_skinDrawC'+'alls']=0x106+0x1415*-0x1+-0x29*-0x77,this['renderer']['_immediate'+'Rendered']=0xaa*-0x17+0x473+-0x11*-0xa3,this['renderer']['_instanced'+'DrawCalls']=-0x182c+0x4c3+0x1369,this['stats']['misc']['renderTarg'+'etCreation'+'Time']=this['graphicsDe'+'vice']['renderTarg'+'etCreation'+'Time'],_0x2f8738=this['stats']['particles'],_0x2f8738['updatesPer'+'Frame']=_0x2f8738['_updatesPe'+'rFrame'],_0x2f8738['frameTime']=_0x2f8738['_frameTime'],_0x2f8738['_updatesPe'+'rFrame']=0x1f6*-0x5+0x26*0x2e+0x17d*0x2,_0x2f8738['_frameTime']=0x18bb+-0x649*0x5+0x6b2;}['setCanvasF'+'illMode'](_0x520222,_0x5991fb,_0x1ebc6c){this['_fillMode']=_0x520222,this['resizeCanv'+'as'](_0x5991fb,_0x1ebc6c);}['setCanvasR'+'esolution'](_0x6db3d9,_0xb5b73e,_0x23ff17){this['_resolutio'+'nMode']=_0x6db3d9,_0x6db3d9===j_&&_0xb5b73e===void(0x16df+0xf85+-0x24*0x111)&&(_0xb5b73e=this['graphicsDe'+'vice']['canvas']['clientWidt'+'h'],_0x23ff17=this['graphicsDe'+'vice']['canvas']['clientHeig'+'ht']),this['graphicsDe'+'vice']['resizeCanv'+'as'](_0xb5b73e,_0x23ff17);}['isHidden'](){return document[this['_hiddenAtt'+'r']];}['onVisibili'+'tyChange'](){this['isHidden']()?this['_soundMana'+'ger']&&this['_soundMana'+'ger']['suspend']():this['_soundMana'+'ger']&&this['_soundMana'+'ger']['resume']();}['resizeCanv'+'as'](_0x1ca2f1,_0x3a4c7f){if(!this['_allowResi'+'ze']||this['xr']&&this['xr']['session'])return;const _0x2594ef=window['innerWidth'],_0x4d1dad=window['innerHeigh'+'t'];if(this['_fillMode']===q_){const _0x1c010e=this['graphicsDe'+'vice']['canvas']['width']/this['graphicsDe'+'vice']['canvas']['height'],_0x329a25=_0x2594ef/_0x4d1dad;_0x1c010e>_0x329a25?(_0x1ca2f1=_0x2594ef,_0x3a4c7f=_0x1ca2f1/_0x1c010e):(_0x3a4c7f=_0x4d1dad,_0x1ca2f1=_0x3a4c7f*_0x1c010e);}else this['_fillMode']===XA&&(_0x1ca2f1=_0x2594ef,_0x3a4c7f=_0x4d1dad);return this['graphicsDe'+'vice']['canvas']['style']['width']=_0x1ca2f1+'px',this['graphicsDe'+'vice']['canvas']['style']['height']=_0x3a4c7f+'px',this['updateCanv'+'asSize'](),{'width':_0x1ca2f1,'height':_0x3a4c7f};}['updateCanv'+'asSize'](){var _0x507da8;if(!(!this['_allowResi'+'ze']||(_0x507da8=this['xr'])!=null&&_0x507da8['active'])&&this['_resolutio'+'nMode']===j_){const _0x3a0dd0=this['graphicsDe'+'vice']['canvas'];this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x3a0dd0['clientWidt'+'h'],_0x3a0dd0['clientHeig'+'ht']);}}['onLibrarie'+'sLoaded'](){this['_libraries'+'Loaded']=!(-0x1c64+0x2*0x1142+0x10*-0x62),this['systems']['rigidbody']&&this['systems']['rigidbody']['onLibraryL'+'oaded']();}['applyScene'+'Settings'](_0x49e0df){let _0x38d610;if(this['systems']['rigidbody']&&typeof Ammo<'u'){const [_0x2e1c1c,_0xfb7ece,_0x5ba546]=_0x49e0df['physics']['gravity'];this['systems']['rigidbody']['gravity']['set'](_0x2e1c1c,_0xfb7ece,_0x5ba546);}this['scene']['applySetti'+'ngs'](_0x49e0df),_0x49e0df['render']['hasOwnProp'+'erty']('skybox')&&(_0x49e0df['render']['skybox']?(_0x38d610=this['assets']['get'](_0x49e0df['render']['skybox']),_0x38d610?this['setSkybox'](_0x38d610):this['assets']['once']('add:'+_0x49e0df['render']['skybox'],this['setSkybox'],this)):this['setSkybox'](null));}['setAreaLig'+'htLuts'](_0x3d4fa7,_0x39659e){_0x3d4fa7&&_0x39659e?Qr['set'](this['graphicsDe'+'vice'],_0x3d4fa7,_0x39659e):w['warn']('setAreaLig'+'htLuts:\x20LU'+'Ts\x20for\x20are'+'a\x20light\x20ar'+'e\x20not\x20vali'+'d');}['setSkybox'](_0x417cdb){if(_0x417cdb!==this['_skyboxAss'+'et']){const _0xbaaca9=()=>{this['setSkybox'](null);},_0x4bddfb=()=>{this['scene']['setSkybox'](this['_skyboxAss'+'et']?this['_skyboxAss'+'et']['resources']:null);};this['_skyboxAss'+'et']&&(this['assets']['off']('load:'+this['_skyboxAss'+'et']['id'],_0x4bddfb,this),this['assets']['off']('remove:'+this['_skyboxAss'+'et']['id'],_0xbaaca9,this),this['_skyboxAss'+'et']['off']('change',_0x4bddfb,this)),this['_skyboxAss'+'et']=_0x417cdb,this['_skyboxAss'+'et']&&(this['assets']['on']('load:'+this['_skyboxAss'+'et']['id'],_0x4bddfb,this),this['assets']['once']('remove:'+this['_skyboxAss'+'et']['id'],_0xbaaca9,this),this['_skyboxAss'+'et']['on']('change',_0x4bddfb,this),this['scene']['skyboxMip']===0x45b+0x1e0c+0x1*-0x2267&&!this['_skyboxAss'+'et']['loadFaces']&&(this['_skyboxAss'+'et']['loadFaces']=!(0x238f+0x1dc+-0x256b)),this['assets']['load'](this['_skyboxAss'+'et'])),_0x4bddfb();}}['_firstBake'](){var _0x23f3d7;(_0x23f3d7=this['lightmappe'+'r'])==null||_0x23f3d7['bake'](null,this['scene']['lightmapMo'+'de']);}['_firstBatc'+'h'](){var _0x5cafdd;(_0x5cafdd=this['batcher'])==null||_0x5cafdd['generate']();}['_processTi'+'mestamp'](_0x4f3689){return _0x4f3689;}['drawLine'](_0x50e2a3,_0x414a48,_0x26006b,_0x243b87,_0x513117){this['scene']['drawLine'](_0x50e2a3,_0x414a48,_0x26006b,_0x243b87,_0x513117);}['drawLines'](_0x12c4d4,_0x2f2deb,_0x5dda48=!(-0xafa+-0x1*-0x31c+0x7de),_0x9881a5=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLines'](_0x12c4d4,_0x2f2deb,_0x5dda48,_0x9881a5);}['drawLineAr'+'rays'](_0x4eaaf2,_0x1a419c,_0x4991ac=!(-0x5c4*0x3+0x1ff9*0x1+0x1*-0xead),_0x108f51=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLineAr'+'rays'](_0x4eaaf2,_0x1a419c,_0x4991ac,_0x108f51);}['drawWireSp'+'here'](_0x2cad68,_0x508803,_0x4f4992=ie['WHITE'],_0x5676ae=0x12f1+0xc03+-0x1ee0,_0xd3d9ab=!(0x11c3+-0x749+-0xa7a),_0x2d6d11=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawWireSp'+'here'](_0x2cad68,_0x508803,_0x4f4992,_0x5676ae,_0xd3d9ab,_0x2d6d11);}['drawWireAl'+'ignedBox'](_0x3496ba,_0x2c061f,_0x436e29=ie['WHITE'],_0x18761b=!(0xeff*0x1+0x1*0x1418+-0x2b3*0xd),_0x5ce500=this['scene']['defaultDra'+'wLayer'],_0x5f0f67){this['scene']['immediate']['drawWireAl'+'ignedBox'](_0x3496ba,_0x2c061f,_0x436e29,_0x18761b,_0x5ce500,_0x5f0f67);}['drawMeshIn'+'stance'](_0x704acc,_0x1aedf0=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](null,null,null,_0x704acc,_0x1aedf0);}['drawMesh'](_0x5bd53d,_0x36d8f5,_0x4a9e75,_0xc519f=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x36d8f5,_0x4a9e75,_0x5bd53d,null,_0xc519f);}['drawQuad'](_0x258f57,_0xb2a5bd,_0x1c7894=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0xb2a5bd,_0x258f57,this['scene']['immediate']['getQuadMes'+'h'](),null,_0x1c7894);}['drawTextur'+'e'](_0x375b8b,_0x1f9ddf,_0x267ca2,_0x276406,_0x2f6416,_0x44457b,_0x324c54=this['scene']['defaultDra'+'wLayer'],_0x418498=!(-0x1*-0x463+0x1fdb+-0x243e)){if(_0x418498===!(0x2cd*0x1+0x1*0x1e49+-0x2115)&&!this['graphicsDe'+'vice']['isWebGPU'])return;const _0x4a48bf=new te();_0x4a48bf['setTRS'](new D(_0x375b8b,_0x1f9ddf,-0x4*-0x920+-0x11*-0x1ab+0x1*-0x40db),le['IDENTITY'],new D(_0x267ca2,-_0x276406,-0x6cd*0x5+0x20c2+0x13f)),_0x44457b||(_0x44457b=new Bn(),_0x44457b['cull']=bt,_0x44457b['setParamet'+'er']('colorMap',_0x2f6416),_0x44457b['shaderDesc']=_0x418498?this['scene']['immediate']['getTexture'+'ShaderDesc'](_0x2f6416['encoding']):this['scene']['immediate']['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](),_0x44457b['update']()),this['drawQuad'](_0x4a48bf,_0x44457b,_0x324c54);}['drawDepthT'+'exture'](_0x2d5f42,_0x3c6e65,_0x341e3c,_0x27e62c,_0x4273ce=this['scene']['defaultDra'+'wLayer']){const _0x284f73=new Bn();_0x284f73['cull']=bt,_0x284f73['shaderDesc']=this['scene']['immediate']['getDepthTe'+'xtureShade'+'rDesc'](),_0x284f73['update'](),this['drawTextur'+'e'](_0x2d5f42,_0x3c6e65,_0x341e3c,_0x27e62c,null,_0x284f73,_0x4273ce);}['destroy'](){var _0x3d0e60,_0x1e26a0,_0x562804,_0x5b2817;if(this['_inFrameUp'+'date']){this['_destroyRe'+'quested']=!(0x23da+0x2da+0x135a*-0x2);return;}const _0x5e57f4=this['graphicsDe'+'vice']['canvas']['id'];this['fire']('destroy',this),this['off']('librariesl'+'oaded'),typeof document<'u'&&(document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x9*-0x6b+-0xb91+-0x1*-0x7cf)),document['removeEven'+'tListener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1e68+-0x3e3*0x1+0x224c)),document['removeEven'+'tListener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1cc9*0x1+0x16d1+-0x3399)),document['removeEven'+'tListener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(-0xe84+-0x13be+0x2243))),this['_visibilit'+'yChangeHan'+'dler']=null,this['root']['destroy'](),this['root']=null,this['mouse']&&(this['mouse']['off'](),this['mouse']['detach'](),this['mouse']=null),this['keyboard']&&(this['keyboard']['off'](),this['keyboard']['detach'](),this['keyboard']=null),this['touch']&&(this['touch']['off'](),this['touch']['detach'](),this['touch']=null),this['elementInp'+'ut']&&(this['elementInp'+'ut']['detach'](),this['elementInp'+'ut']=null),this['gamepads']&&(this['gamepads']['destroy'](),this['gamepads']=null),this['controller']&&(this['controller']=null),this['systems']['destroy'](),this['scene']['layers']&&this['scene']['layers']['destroy']();const _0x5e95a0=this['assets']['list']();for(let _0x303322=0x1b0b+0x296+0xcd*-0x25;_0x303322<_0x5e95a0['length'];_0x303322++)_0x5e95a0[_0x303322]['unload'](),_0x5e95a0[_0x303322]['off']();this['assets']['off'](),this['bundles']['destroy'](),this['bundles']=null,this['i18n']['destroy'](),this['i18n']=null;const _0x146cb7=this['loader']['getHandler']('script');_0x146cb7==null||_0x146cb7['clearCache'](),this['loader']['destroy'](),this['loader']=null,this['scene']['destroy'](),this['scene']=null,this['systems']=null,this['context']=null,this['scripts']['destroy'](),this['scripts']=null,this['scenes']['destroy'](),this['scenes']=null,(_0x3d0e60=this['lightmappe'+'r'])==null||_0x3d0e60['destroy'](),this['lightmappe'+'r']=null,this['_batcher']&&(this['_batcher']['destroy'](),this['_batcher']=null),this['_entityInd'+'ex']={},this['defaultLay'+'erDepth']['onDisable']=null,this['defaultLay'+'erDepth']['onEnable']=null,this['defaultLay'+'erDepth']=null,this['defaultLay'+'erWorld']=null,(_0x1e26a0=this['xr'])==null||_0x1e26a0['end'](),(_0x562804=this['xr'])==null||_0x562804['destroy'](),this['renderer']['destroy'](),this['renderer']=null,this['graphicsDe'+'vice']['destroy'](),this['graphicsDe'+'vice']=null,this['tick']=null,this['off'](),(_0x5b2817=this['_soundMana'+'ger'])==null||_0x5b2817['destroy'](),this['_soundMana'+'ger']=null,Kr['_applicati'+'ons'][_0x5e57f4]=null,Ys()===this&&Wf(null),Kr['cancelTick'](this);}static['cancelTick'](_0x17bfa4){_0x17bfa4['frameReque'+'stId']&&(window['cancelAnim'+'ationFrame'](_0x17bfa4['frameReque'+'stId']),_0x17bfa4['frameReque'+'stId']=void(0x7*-0x167+0x620+-0x2d*-0x15));}['getEntityF'+'romIndex'](_0x237083){return this['_entityInd'+'ex'][_0x237083];}['_registerS'+'ceneImmedi'+'ate'](_0x449f4c){this['on']('postrender',_0x449f4c['immediate']['onPostRend'+'er'],_0x449f4c['immediate']);}};h(Kr,'_applicati'+'ons',{});let Ks=Kr;const SI=function(_0xe5432c){const _0x4671b1=_0xe5432c;return function(_0x175470,_0x2c1be0){var _0xdedb7,_0x6eae31,_0x41627b,_0x119eba;if(!_0x4671b1['graphicsDe'+'vice'])return;_0x4671b1['frameReque'+'stId']&&((_0x6eae31=(_0xdedb7=_0x4671b1['xr'])==null?void(-0x28*-0x3c+0x5*0x245+-0x5*0x425):_0xdedb7['session'])==null||_0x6eae31['cancelAnim'+'ationFrame'](_0x4671b1['frameReque'+'stId']),cancelAnimationFrame(_0x4671b1['frameReque'+'stId']),_0x4671b1['frameReque'+'stId']=null),_0x4671b1['_inFrameUp'+'date']=!(-0x11c3*0x1+0x1f*-0x91+-0x11a9*-0x2),Wf(_0x4671b1);const _0x1533eb=_0x4671b1['_processTi'+'mestamp'](_0x175470)||de(),_0x68b616=_0x1533eb-(_0x4671b1['_time']||_0x1533eb);let _0xeb021e=_0x68b616/(0xb*0x1+0xc*0x28c+-0x1*0x1ab3);if(_0xeb021e=Y['clamp'](_0xeb021e,0x60d*-0x5+0x1*-0x1cf3+0x3b34,_0x4671b1['maxDeltaTi'+'me']),_0xeb021e*=_0x4671b1['timeScale'],_0x4671b1['_time']=_0x1533eb,(_0x41627b=_0x4671b1['xr'])!=null&&_0x41627b['session']?_0x4671b1['frameReque'+'stId']=_0x4671b1['xr']['session']['requestAni'+'mationFram'+'e'](_0x4671b1['tick']):_0x4671b1['frameReque'+'stId']=Me['browser']||Me['worker']?requestAnimationFrame(_0x4671b1['tick']):null,_0x4671b1['graphicsDe'+'vice']['contextLos'+'t'])return;_0x4671b1['_fillFrame'+'StatsBasic'](_0x1533eb,_0xeb021e,_0x68b616),_0x4671b1['_fillFrame'+'Stats'](),_0x4671b1['fire']('frameupdat'+'e',_0x68b616);let _0x576fe1=!(0x236f+0x265*0x9+-0x1d*0x1f7);_0x2c1be0?(_0x576fe1=!((_0x119eba=_0x4671b1['xr'])!=null&&_0x119eba['update'](_0x2c1be0)),_0x4671b1['graphicsDe'+'vice']['defaultFra'+'mebuffer']=_0x2c1be0['session']['renderStat'+'e']['baseLayer']['framebuffe'+'r']):_0x4671b1['graphicsDe'+'vice']['defaultFra'+'mebuffer']=null,!_0x576fe1&&!_0x4671b1['stopSort']&&(w['trace'](l0,'----\x20Frame'+'\x20'+_0x4671b1['frame']),w['trace'](hd,'--\x20UpdateS'+'tart\x20'+de()['toFixed'](-0x5*-0x399+0x1b3d+-0x2d38)+'ms'),_0x4671b1['update'](_0xeb021e),_0x4671b1['fire']('framerende'+'r'),(_0x4671b1['autoRender']||_0x4671b1['renderNext'+'Frame'])&&(w['trace'](hd,'--\x20RenderS'+'tart\x20'+de()['toFixed'](0x11*-0x11b+-0x49d*0x5+0x29de)+'ms'),_0x4671b1['render'](),_0x4671b1['renderNext'+'Frame']=!(-0x329*0x1+0xf34+-0xc0a*0x1),w['trace'](hd,'--\x20RenderE'+'nd\x20'+de()['toFixed'](-0xb12+0x1289+0x775*-0x1)+'ms')),_0x4671b1['fire']('frameend')),_0x4671b1['_inFrameUp'+'date']=!(0x31d*-0x1+0x25ff+0x1*-0x22e1),_0x4671b1['_destroyRe'+'quested']&&_0x4671b1['destroy']();};};class yI{constructor(){h(this,'elementInp'+'ut'),h(this,'keyboard'),h(this,'mouse'),h(this,'touch'),h(this,'gamepads'),h(this,'scriptPref'+'ix'),h(this,'assetPrefi'+'x'),h(this,'scriptsOrd'+'er'),h(this,'soundManag'+'er'),h(this,'graphicsDe'+'vice'),h(this,'lightmappe'+'r'),h(this,'batchManag'+'er'),h(this,'xr'),h(this,'componentS'+'ystems',[]),h(this,'resourceHa'+'ndlers',[]);}}const oo=new Mu();class sv{constructor(_0x3d5142,_0x20ac51,_0x3ab8a5){this['scene']=_0x3d5142,this['light']=_0x20ac51,this['store'](),_0x20ac51['numCascade'+'s']=-0xd35+-0x2*0x1a0+0xe*0x12d,this['scene']['clusteredL'+'ightingEna'+'bled']&&!_0x3ab8a5['shadowsEna'+'bled']&&(_0x20ac51['castShadow'+'s']=!(0x1ce+-0x72d+0x560)),_0x20ac51['type']!==ve&&(_0x20ac51['_node']['getWorldTr'+'ansform'](),_0x20ac51['getBoundin'+'gSphere'](oo),this['lightBound'+'s']=new De(),this['lightBound'+'s']['center']['copy'](oo['center']),this['lightBound'+'s']['halfExtent'+'s']['set'](oo['radius'],oo['radius'],oo['radius']));}['store'](){this['mask']=this['light']['mask'],this['shadowUpda'+'teMode']=this['light']['shadowUpda'+'teMode'],this['enabled']=this['light']['enabled'],this['intensity']=this['light']['intensity'],this['rotation']=this['light']['_node']['getLocalRo'+'tation']()['clone'](),this['numCascade'+'s']=this['light']['numCascade'+'s'],this['castShadow'+'s']=this['light']['_castShado'+'ws'];}['restore'](){const _0x57d246=this['light'];_0x57d246['mask']=this['mask'],_0x57d246['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x57d246['enabled']=this['enabled'],_0x57d246['intensity']=this['intensity'],_0x57d246['_node']['setLocalRo'+'tation'](this['rotation']),_0x57d246['numCascade'+'s']=this['numCascade'+'s'],_0x57d246['_castShado'+'ws']=this['castShadow'+'s'];}['startBake'](){this['light']['enabled']=!(0x1*-0x1d15+-0x725+0x1*0x243a),this['light']['_destroySh'+'adowMap'](),this['light']['beginFrame']();}['endBake'](_0x1be0bb){const _0x324db1=this['light'];_0x324db1['enabled']=!(0x1cf7*0x1+0x2454+0x20a5*-0x2),_0x324db1['shadowMap']&&(_0x324db1['shadowMap']['cached']&&_0x1be0bb['add'](_0x324db1,_0x324db1['shadowMap']),_0x324db1['shadowMap']=null);}}const ac=new J();class vI extends sv{constructor(_0x5b8aa1,_0x2fd839){super(_0x5b8aa1['scene'],_0x2fd839,_0x5b8aa1['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['type']===ve?this['light']['bakeNumSam'+'ples']:0x1f0c+-0x1089+-0xe82;}['prepareVir'+'tualLight'](_0x26911f,_0x26788d){const _0x47a523=this['light'];if(_0x47a523['_node']['setLocalRo'+'tation'](this['rotation']),_0x26911f>0x1*-0x1f15+0x6*0x11b+-0x239*-0xb){const _0x4eb52b=_0x47a523['bakeArea'];wl['circlePoin'+'tDetermini'+'stic'](ac,_0x26911f,_0x26788d),ac['mulScalar'](_0x4eb52b*(-0x1c14+0x36e*0x7+0x412+0.5)),_0x47a523['_node']['rotateLoca'+'l'](ac['x'],0x204b+-0xc7*-0x1e+-0x379d,ac['y']);}_0x47a523['_node']['getWorldTr'+'ansform']();const _0x13ed20=0x2db+-0xb*-0x279+-0xf06*0x2+0.20000000000000018,_0x594f94=Math['pow'](this['intensity'],_0x13ed20);_0x47a523['intensity']=Math['pow'](_0x594f94/_0x26788d,(-0x1*0x1120+0x1099+-0x22*-0x4)/_0x13ed20);}}const J_=new D();class eg extends sv{constructor(_0x5d911d){const _0x11faa4=_0x5d911d['scene'],_0x354113=new lt('AmbientLig'+'ht');_0x354113['addCompone'+'nt']('light',{'type':'directiona'+'l','affectDynamic':!(0x13*-0xe9+-0x23*0x89+-0x57*-0x6a),'affectLightmapped':!(0x1*-0x1809+-0x1e54+0x2*0x1b2f),'bake':!(0x3*0x1fb+0x1d05+-0x32*0xb3),'bakeNumSamples':_0x11faa4['ambientBak'+'eNumSample'+'s'],'castShadows':!(0x8f*-0x3f+-0x2db+-0x5*-0x79c),'normalOffsetBias':0.05,'shadowBias':0.2,'shadowDistance':0x1,'shadowResolution':0x800,'shadowType':Ws,'color':ie['WHITE'],'intensity':0x1,'bakeDir':!(-0x61*-0x1f+-0x1f79+0x1*0x13bb)}),super(_0x11faa4,_0x354113['light']['light'],_0x5d911d['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['bakeNumSam'+'ples'];}['prepareVir'+'tualLight'](_0xbc0f26,_0x529952){wl['spherePoin'+'tDetermini'+'stic'](J_,_0xbc0f26,_0x529952,0x1581+-0x195e+-0x3dd*-0x1,this['scene']['ambientBak'+'eSpherePar'+'t']),this['light']['_node']['lookAt'](J_['mulScalar'](-(-0x191*0x1+0x1b36+-0x19a4*0x1))),this['light']['_node']['rotateLoca'+'l'](-0x1306+-0x8f3*-0x3+-0x779,0x24*-0x5c+-0x205e+0x2d4e,0x1d2e+-0x8*-0x2f0+0x2*-0x1a57);const _0x1af6fa=0x6b+-0xba2+0xa9*0x11+0.20000000000000018,_0x31042f=(0x2706+0x2596*0x1+-0x212*0x25)*Math['PI']*this['scene']['ambientBak'+'eSpherePar'+'t'],_0x31d10f=Math['pow'](_0x31042f,_0x1af6fa);this['light']['intensity']=Math['pow'](_0x31d10f/_0x529952,(0x14*0x3e+-0x15f*0x17+-0x8e6*-0x3)/_0x1af6fa);}}class nc{constructor(_0x35832d,_0x3ec8e0=null){this['node']=_0x35832d,this['component']=_0x35832d['render']||_0x35832d['model'],_0x3ec8e0=_0x3ec8e0||this['component']['meshInstan'+'ces'],this['store'](),this['meshInstan'+'ces']=_0x3ec8e0,this['bounds']=null,this['renderTarg'+'ets']=[];}['store'](){this['castShadow'+'s']=this['component']['castShadow'+'s'];}['restore'](){this['component']['castShadow'+'s']=this['castShadow'+'s'];}}const xI='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afl'+'oat\x20normpd'+'f3(in\x20vec3'+'\x20v,\x20in\x20flo'+'at\x20sigma)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x200.39894'+'\x20*\x20exp(-0.'+'5\x20*\x20dot(v,'+'\x20v)\x20/\x20(sig'+'ma\x20*\x20sigma'+'))\x20/\x20sigma'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBM'+'(vec4\x20rgbm'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20color\x20='+'\x20(8.0\x20*\x20rg'+'bm.a)\x20*\x20rg'+'bm.rgb;\x0a\x20\x20'+'\x20\x20return\x20c'+'olor\x20*\x20col'+'or;\x0a}\x0a\x0aflo'+'at\x20saturat'+'e(float\x20x)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeRG'+'BM(vec3\x20co'+'lor)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20encoded'+';\x0a\x20\x20\x20\x20enco'+'ded.rgb\x20=\x20'+'pow(color.'+('rgb,\x20vec3('+'0.5));\x0a\x20\x20\x20'+'\x20encoded.r'+'gb\x20*=\x201.0\x20'+'/\x208.0;\x0a\x0a\x20\x20'+'\x20\x20encoded.'+'a\x20=\x20satura'+'te(\x20max(\x20m'+'ax(\x20encode'+'d.r,\x20encod'+'ed.g\x20),\x20ma'+'x(\x20encoded'+'.b,\x201.0\x20/\x20'+'255.0\x20)\x20)\x20'+');\x0a\x20\x20\x20\x20enc'+'oded.a\x20=\x20c'+'eil(encode'+'d.a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20enc'+'oded.rgb\x20/'+'=\x20encoded.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20encode'+'d;\x0a}\x0a\x0avec3'+'\x20decode(ve'+'c4\x20pixel)\x20'+'{\x0a\x20\x20\x20\x20#if\x20'+'HDR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20p'+'ixel.rgb;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eRGBM(pixe'+'l);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0abo'+'ol\x20isUsed('+'vec4\x20pixel'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20HDR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20any(great'+'erThan(pix'+'el.rgb,\x20ve'+'c3(0.0)));'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20pixe'+'l.a\x20>\x200.0;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0avaryi'+'ng\x20vec2\x20vU'+'v0;\x0aunifor'+'m\x20sampler2'+'D\x20source;\x0a'+'uniform\x20ve'+'c2\x20pixelOf'+'fset;\x0aunif'+'orm\x20vec2\x20s'+'igmas;\x0auni'+'form\x20float'+'\x20bZnorm;\x0au'+'niform\x20flo'+'at\x20kernel['+'{MSIZE}];\x0a'+'\x0avoid\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20ve'+'c4\x20pixel\x20='+'\x20texture2D'+'Lod(source'+',\x20vUv0,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20/'+'/\x20lightmap'+'\x20specific\x20'+'optimizati'+'on\x20-\x20skip\x20'+'pixels\x20tha'+'t\x20were\x20not'+'\x20baked\x0a\x20\x20\x20'+'\x20//\x20this\x20a'+'lso\x20allows'+'\x20dilate\x20fi'+'lter\x20that\x20'+'work\x20on\x20th'+'e\x20output\x20o'+'f\x20this\x20to\x20'+'work\x20corre'+'ctly,\x20as\x20i'+'t\x20depends\x20'+'on\x20.a\x20bein'+'g\x20zero\x0a\x20\x20\x20'+'\x20//\x20to\x20dil'+'ate,\x20which'+'\x20the\x20follo'+'wing\x20blur\x20'+'filter\x20wou'+'ld\x20otherwi'+'se\x20modify\x0a')+('\x20\x20\x20\x20if\x20(!i'+'sUsed(pixe'+'l))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20p'+'ixel;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20sigma\x20-'+'\x20controls\x20'+'blurriness'+'\x20based\x20on\x20'+'a\x20pixel\x20di'+'stance\x0a\x20\x20\x20'+'\x20float\x20sig'+'ma\x20=\x20sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'float\x20bSig'+'ma\x20=\x20sigma'+'s.y;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20pixel'+'Hdr\x20=\x20deco'+'de(pixel);'+'\x0a\x20\x20\x20\x20vec3\x20'+'accumulate'+'dHdr\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20float\x20ac'+'cumulatedF'+'actor\x20=\x200.'+'000001;\x20\x20/'+'/\x20avoid\x20di'+'vision\x20by\x20'+'zero\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20ou'+'t\x20the\x20texe'+'ls\x0a\x20\x20\x20\x20con'+'st\x20int\x20kSi'+'ze\x20=\x20({MSI'+'ZE}\x20-\x201)\x20/'+'\x202;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x20-kSize;\x20i'+'\x20<=\x20kSize;'+'\x20++i)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20j\x20=\x20-'+'kSize;\x20j\x20<'+'=\x20kSize;\x20+'+'+j)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sample'+'\x20the\x20pixel'+'\x20with\x20offs'+'et\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'coord\x20=\x20vU'+'v0\x20+\x20vec2('+'float(i),\x20'+'float(j))\x20'+'*\x20pixelOff'+'set;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20pix\x20=\x20te'+'xture2DLod'+'(source,\x20c'+'oord,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x20-\x20o'+'nly\x20use\x20ba'+'ked\x20pixels'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(isU'+'sed(pix))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20hdr\x20=\x20d'+'ecode(pix)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20bilatera'+'l\x20factors\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20factor\x20='+'\x20kernel[kS'+'ize\x20+\x20j]\x20*'+'\x20kernel[kS')+('ize\x20+\x20i];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fact'+'or\x20*=\x20norm'+'pdf3(hdr\x20-'+'\x20pixelHdr,'+'\x20bSigma)\x20*'+'\x20bZnorm;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ccumulate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20accu'+'mulatedHdr'+'\x20+=\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20+=\x20facto'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20finalHD'+'R\x20=\x20accumu'+'latedHdr\x20/'+'\x20accumulat'+'edFactor;\x0a'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(finalHDR,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'encodeRGBM'+'(finalHDR)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a'),TI='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0auniform\x20'+'sampler2D\x20'+'source;\x0aun'+'iform\x20vec2'+'\x20pixelOffs'+'et;\x0a\x0abool\x20'+'isUsed(vec'+'4\x20pixel)\x20{'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20an'+'y(greaterT'+'han(pixel.'+'rgb,\x20vec3('+'0.0)));\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20pixel.a'+'\x20>\x200.0;\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20c'+'\x20=\x20texture'+'2DLod(sour'+'ce,\x20vUv0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'c\x20=\x20isUsed'+'(c)\x20?\x20c\x20:\x20'+'texture2DL'+'od(source,'+'\x20vUv0\x20-\x20pi'+'xelOffset,'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20v'+'ec2(0,\x20-pi'+'xelOffset.'+'y),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(pix'+'elOffset.x'+',\x20-pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(-pixelOf'+'fset.x,\x200)'+',\x200.0);\x0a\x20\x20'+'\x20\x20c\x20=\x20isUs'+'ed(c)\x20?\x20c\x20'+':\x20texture2'+'DLod(sourc'+'e,\x20vUv0\x20+\x20'+'vec2(pixel'+'Offset.x,\x20'+'0),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(-pi'+'xelOffset.'+'x,\x20pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(0,\x20pixel'+'Offset.y),'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20p'+'ixelOffset'+',\x200.0);\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20c;\x0a'+'}\x0a',wI='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afn'+'\x20normpdf3('+'v:\x20vec3f,\x20'+'sigma:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x200.39894\x20'+'*\x20exp(-0.5'+'\x20*\x20dot(v,\x20'+'v)\x20/\x20(sigm'+'a\x20*\x20sigma)'+')\x20/\x20sigma;'+'\x0a}\x0a\x0afn\x20dec'+'odeRGBM(rg'+'bm:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20(8'+'.0\x20*\x20rgbm.'+'a)\x20*\x20rgbm.'+'rgb;\x0a\x20\x20\x20\x20r'+'eturn\x20colo'+'r\x20*\x20color;'+'\x0a}\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeRGBM'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'var\x20encode'+'d:\x20vec4f;\x0a'+'\x20\x20\x20\x20let\x20rg'+'b_processe'+('d\x20=\x20pow(co'+'lor.rgb,\x20v'+'ec3f(0.5))'+'\x20*\x20(1.0\x20/\x20'+'8.0);\x0a\x20\x20\x20\x20'+'encoded\x20=\x20'+'vec4f(rgb_'+'processed,'+'\x200.0);\x0a\x0a\x20\x20'+'\x20\x20let\x20max_'+'g_b\x20=\x20max('+'\x20encoded.g'+',\x20max(\x20enc'+'oded.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20);\x0a\x20\x20\x20\x20l'+'et\x20max_rgb'+'\x20=\x20max(\x20en'+'coded.r,\x20m'+'ax_g_b\x20);\x0a'+'\x20\x20\x20\x20encode'+'d.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20enco'+'ded.a\x20=\x20ce'+'il(encoded'+'.a\x20*\x20255.0'+')\x20/\x20255.0;'+'\x0a\x0a\x20\x20\x20\x20enco'+'ded\x20=\x20vec4'+'f(encoded.'+'rgb\x20/\x20enco'+'ded.a,\x20enc'+'oded.a);\x0a\x20'+'\x20\x20\x20return\x20'+'encoded;\x0a}'+'\x0a\x0afn\x20decod'+'e(pixel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20pixel.'+'rgb;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'decodeRGBM'+'(pixel);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a\x0afn\x20isUs'+'ed(pixel:\x20'+'vec4f)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0ava'+'r\x20source:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20sourceSam'+'pler:\x20samp'+'ler;\x0aunifo'+'rm\x20kernel:'+'\x20array<f32'+',\x20{MSIZE}>'+';\x0auniform\x20'+'pixelOffse'+'t:\x20vec2f;\x0a'+'uniform\x20si'+'gmas:\x20vec2'+'f;\x0auniform'+'\x20bZnorm:\x20f'+'32;\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20pixel\x20'+'=\x20textureS'+'ampleLevel'+'(source,\x20s'+'ourceSampl'+'er,\x20input.')+('vUv0,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'lightmap\x20s'+'pecific\x20op'+'timization'+'\x20-\x20skip\x20pi'+'xels\x20that\x20'+'were\x20not\x20b'+'aked\x0a\x20\x20\x20\x20/'+'/\x20this\x20als'+'o\x20allows\x20d'+'ilate\x20filt'+'er\x20that\x20wo'+'rk\x20on\x20the\x20'+'output\x20of\x20'+'this\x20to\x20wo'+'rk\x20correct'+'ly,\x20as\x20it\x20'+'depends\x20on'+'\x20.a\x20being\x20'+'zero\x0a\x20\x20\x20\x20/'+'/\x20to\x20dilat'+'e,\x20which\x20t'+'he\x20followi'+'ng\x20blur\x20fi'+'lter\x20would'+'\x20otherwise'+'\x20modify\x0a\x20\x20'+'\x20\x20if\x20(!isU'+'sed(pixel)'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20pix'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20range\x20sig'+'ma\x20-\x20contr'+'ols\x20blurri'+'ness\x20based'+'\x20on\x20a\x20pixe'+'l\x20distance'+'\x0a\x20\x20\x20\x20let\x20s'+'igma\x20=\x20uni'+'form.sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'let\x20bSigma'+'\x20=\x20uniform'+'.sigmas.y;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'pixelHdr\x20='+'\x20decode(pi'+'xel);\x0a\x20\x20\x20\x20'+'var\x20accumu'+'latedHdr\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20var'+'\x20accumulat'+'edFactor\x20='+'\x200.000001;'+'\x20\x20//\x20avoid'+'\x20division\x20'+'by\x20zero\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20out\x20the\x20t'+'exels\x0a\x20\x20\x20\x20'+'const\x20kSiz'+'e\x20=\x20({MSIZ'+'E}\x20-\x201)\x20/\x20'+'2;\x0a\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x20-kSiz'+'e;\x20i\x20<=\x20kS'+'ize;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(var\x20j:\x20i3'+'2\x20=\x20-kSize'+';\x20j\x20<=\x20kSi'+'ze;\x20j\x20=\x20j\x20'+'+\x201)\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20pixel\x20'+'with\x20offse'+'t\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20co'+'ord\x20=\x20inpu'+'t.vUv0\x20+\x20v'+'ec2f(f32(i')+('),\x20f32(j))'+'\x20*\x20uniform'+'.pixelOffs'+'et;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'pix\x20=\x20text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20co'+'ord,\x200.0);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x20-\x20on'+'ly\x20use\x20bak'+'ed\x20pixels\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(isUs'+'ed(pix))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20hdr\x20=\x20dec'+'ode(pix);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'bilateral\x20'+'factors\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20fa'+'ctor\x20=\x20uni'+'form.kerne'+'l[u32(kSiz'+'e\x20+\x20j)].el'+'ement\x20*\x20un'+'iform.kern'+'el[u32(kSi'+'ze\x20+\x20i)].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20factor'+'\x20=\x20factor\x20'+'*\x20normpdf3'+'(hdr\x20-\x20pix'+'elHdr,\x20bSi'+'gma)\x20*\x20uni'+'form.bZnor'+'m;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20accumul'+'ate\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'accumulate'+'dHdr\x20=\x20acc'+'umulatedHd'+'r\x20+\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20=\x20accumu'+'latedFacto'+'r\x20+\x20factor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20let'+'\x20finalHDR\x20'+'=\x20accumula'+'tedHdr\x20/\x20a'+'ccumulated'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20#if\x20HDR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalHDR,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20e'+'ncodeRGBM('+'finalHDR);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),EI='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0avar\x20so'+'urce:\x20text'+'ure_2d<f32'+'>;\x0avar\x20sou'+'rceSampler'+':\x20sampler;'+'\x0auniform\x20p'+'ixelOffset'+':\x20vec2f;\x0a\x0a'+'fn\x20isUsed('+'pixel:\x20vec'+'4f)\x20->\x20boo'+'l\x20{\x0a\x20\x20\x20\x20#i'+'fdef\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0a@fr'+'agment\x0afn\x20'+'fragmentMa'+'in(input:\x20'+'FragmentIn'+'put)\x20->\x20Fr'+'agmentOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20c:\x20vec4'+'f\x20=\x20textur'+'eSampleLev'+'el(source,'+'\x20sourceSam'+'pler,\x20inpu'+'t.vUv0,\x200.'+'0);\x0a\x20\x20\x20\x20c\x20'+'=\x20select(t'+'extureSamp'+'leLevel(so'+'urce,\x20sour'+'ceSampler,'+'\x20input.vUv'+'0\x20-\x20unifor'+'m.pixelOff'+'set,\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20-un'+'iform.pixe'+'lOffset.y)'+',\x200.0),\x20c,'+'\x20isUsed(c)'+');\x0a\x20\x20\x20\x20c\x20='+'\x20select(te'+'xtureSampl'+'eLevel(sou'+'rce,\x20sourc'+'eSampler,\x20'+'input.vUv0'+'\x20+\x20vec2f(u'+'niform.pix'+'elOffset.x'+',\x20-uniform'+'.pixelOffs'+'et.y),\x200.0'+'),\x20c,\x20isUs'+'ed(c));\x0a\x20\x20'+'\x20\x20c\x20=\x20sele'+'ct(texture'+'SampleLeve'+'l(source,\x20'+'sourceSamp'+'ler,\x20input'+'.vUv0\x20+\x20ve'+'c2f(-unifo'+'rm.pixelOf'+'fset.x,\x200.'+'0),\x200.0),\x20'+'c,\x20isUsed('+'c));\x0a\x20\x20\x20\x20c'+'\x20=\x20select('+'textureSam'+'pleLevel(s'+'ource,\x20sou'+'rceSampler'+',\x20input.vU'+'v0\x20+\x20vec2f'+'(uniform.p'+('ixelOffset'+'.x,\x200.0),\x20'+'0.0),\x20c,\x20i'+'sUsed(c));'+'\x0a\x20\x20\x20\x20c\x20=\x20s'+'elect(text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20in'+'put.vUv0\x20+'+'\x20vec2f(-un'+'iform.pixe'+'lOffset.x,'+'\x20uniform.p'+'ixelOffset'+'.y),\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20uni'+'form.pixel'+'Offset.y),'+'\x200.0),\x20c,\x20'+'isUsed(c))'+';\x0a\x20\x20\x20\x20c\x20=\x20'+'select(tex'+'tureSample'+'Level(sour'+'ce,\x20source'+'Sampler,\x20i'+'nput.vUv0\x20'+'+\x20uniform.'+'pixelOffse'+'t,\x200.0),\x20c'+',\x20isUsed(c'+'));\x0a\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20FragmentO'+'utput;\x0a\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20c;\x0a\x20'+'\x20\x20\x20return\x20'+'output;\x0a}\x0a'),tg=-0x1*-0x6b3+0x2489+-0x2b2d,bI={'glslBilateralDeNoisePS':xI,'glslDilatePS':TI},AI={'wgslBilateralDeNoisePS':wI,'wgslDilatePS':EI};class CI{constructor(_0x3b6bf6){h(this,'shaderDila'+'te',[]),h(this,'shaderDeno'+'ise',[]),(this['device']=_0x3b6bf6,Ce['get'](this['device'],Fe)['add'](bI),Ce['get'](this['device'],it)['add'](AI),this['constantTe'+'xSource']=_0x3b6bf6['scope']['resolve']('source'),this['constantPi'+'xelOffset']=_0x3b6bf6['scope']['resolve']('pixelOffse'+'t'),this['pixelOffse'+'t']=new Float32Array(0x712*0x1+-0x824+0x114),this['sigmas']=null,this['constantSi'+'gmas']=null,this['kernel']=null);}['setSourceT'+'exture'](_0x2259ea){this['constantTe'+'xSource']['setValue'](_0x2259ea);}['prepare'](_0xc27fe3,_0x782017){this['pixelOffse'+'t'][-0x1*0x995+0x2404+-0x1a6f*0x1]=(0x11*-0xfb+-0x6b0*0x1+0x1*0x175c)/_0xc27fe3,this['pixelOffse'+'t'][0xd*-0x1e7+-0x1291+0x8a9*0x5]=(0x2be+0xd87*0x2+-0x1*0x1dcb)/_0x782017,this['constantPi'+'xelOffset']['setValue'](this['pixelOffse'+'t']);}['prepareDen'+'oise'](_0x5d4df5,_0x9ec2b5,_0xddccc8){const _0x52e3bd=_0xddccc8?0x34*-0x86+0x1*0x40e+0x172a:0x279*-0x4+-0x14df+0xb*0x2cc;if(!this['shaderDeno'+'ise'][_0x52e3bd]){const _0x3dc355=new Map();_0x3dc355['set']('{MSIZE}',0x1*-0x1d77+0x1*0x1931+0x455),_0xddccc8&&_0x3dc355['set']('HDR',''),this['shaderDeno'+'ise'][_0x52e3bd]=$t['createShad'+'er'](this['device'],{'uniqueName':'lmBilatera'+'lDeNoise-'+(_0xddccc8?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':Ce['get'](this['device'],Fe)['get']('glslBilate'+'ralDeNoise'+'PS'),'fragmentWGSL':Ce['get'](this['device'],it)['get']('wgslBilate'+'ralDeNoise'+'PS'),'fragmentDefines':_0x3dc355}),this['sigmas']=new Float32Array(0x1453+0xc25+-0x2076),this['constantSi'+'gmas']=this['device']['scope']['resolve']('sigmas'),this['constantKe'+'rnel']=this['device']['scope']['resolve']('kernel[0]'),this['bZnorm']=this['device']['scope']['resolve']('bZnorm');}this['sigmas'][0x553*0x5+0x1825+-0x9*0x5a4]=_0x5d4df5,this['sigmas'][-0x1*-0xa85+-0x2222+0x179e]=_0x9ec2b5,this['constantSi'+'gmas']['setValue'](this['sigmas']),this['evaluateDe'+'noiseUnifo'+'rms'](_0x5d4df5,_0x9ec2b5);}['getDenoise'](_0x68f347){const _0x4e5878=_0x68f347?0x9*-0x4e+0x884+-0x5c6:0x31e+0xb4+0x3d1*-0x1;return this['shaderDeno'+'ise'][_0x4e5878];}['getDilate'](_0x1f83ac,_0x34d403){const _0x2e2324=_0x34d403?0x3ea*0x9+-0x1*0x70c+0x2*-0xe17:-0x1074+0x16ba+0x645*-0x1;if(!this['shaderDila'+'te'][_0x2e2324]){const _0x186620=_0x34d403?'#define\x20HD'+'R\x0a':'';this['shaderDila'+'te'][_0x2e2324]=$t['createShad'+'er'](_0x1f83ac,{'uniqueName':'lmDilate-'+(_0x34d403?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':_0x186620+Ce['get'](this['device'],Fe)['get']('glslDilate'+'PS'),'fragmentWGSL':_0x186620+Ce['get'](this['device'],it)['get']('wgslDilate'+'PS')});}return this['shaderDila'+'te'][_0x2e2324];}['evaluateDe'+'noiseUnifo'+'rms'](_0x4e3176,_0x39e187){function _0x3a9551(_0x102f35,_0x25ac14){return(-0x242a+0x1f24+0x2*0x283+0.39894)*Math['exp'](-(-0x20c5+-0x1e97+0xa*0x656+0.5)*_0x102f35*_0x102f35/(_0x25ac14*_0x25ac14))/_0x25ac14;}this['kernel']=this['kernel']||new Float32Array(tg);const _0x460b2b=this['kernel'],_0x2dd258=Math['floor']((tg-(0x1f3*-0xa+-0x130e+0x47*0x8b))/(0x24c2+-0x1*0x17b1+0x1*-0xd0f));for(let _0x3a3ff9=0x2240+-0x259*0x2+0x4ed*-0x6;_0x3a3ff9<=_0x2dd258;++_0x3a3ff9){const _0x59fa28=_0x3a9551(_0x3a3ff9,_0x4e3176);_0x460b2b[_0x2dd258+_0x3a3ff9]=_0x59fa28,_0x460b2b[_0x2dd258-_0x3a3ff9]=_0x59fa28;}this['constantKe'+'rnel']['setValue'](this['kernel']);const _0x45862f=(0x22c+-0x1f05*-0x1+-0x2130)/_0x3a9551(0xd6d*0x1+0x1*-0x1655+0x8e8*0x1,_0x39e187);this['bZnorm']['setValue'](_0x45862f);}}class PI extends ys{constructor(_0x288b08,_0x1a4b28,_0x53fbb1,_0x404c03,_0x39ca9a,_0xdc9cd1){super(_0x288b08),h(this,'viewBindGr'+'oups',[]),(this['renderer']=_0x1a4b28,this['camera']=_0x53fbb1,this['worldClust'+'ers']=_0x404c03,this['receivers']=_0x39ca9a,this['lightArray']=_0xdc9cd1);}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x333923=>{_0x333923['defaultUni'+'formBuffer']['destroy'](),_0x333923['destroy']();}),this['viewBindGr'+'oups']['length']=-0x1*-0x61f+0x1a9e+0x1*-0x20bd;}['execute'](){const _0x1cc545=this['device'];Q['pushGpuMar'+'ker'](_0x1cc545,'Lightmappe'+'r');const {renderer:_0x22f09a,camera:_0x73cb64,receivers:_0x29a091,renderTarget:_0x20ae9c,worldClusters:_0x2a840d,lightArray:_0x17165a}=this;_0x22f09a['renderForw'+'ardLayer'](_0x73cb64,_0x20ae9c,null,void(0x2511+-0x1db+0x1*-0x2336),xa,this['viewBindGr'+'oups'],{'meshInstances':_0x29a091,'splitLights':_0x17165a,'lightClusters':_0x2a840d}),Q['popGpuMark'+'er'](_0x1cc545);}}const MI=-0x7*-0x22f+-0x1ad2+0x1389*0x1,DI=0x1*0xd9+-0x11*0x1e+-0x125*-0x1,II=-0x86+-0x6*0x147+0x3*0x2bb,oc=new D();class LI{constructor(_0xba651a,_0x22aaa3,_0x4033f0,_0x26287d,_0x740e91){this['device']=_0xba651a,this['root']=_0x22aaa3,this['scene']=_0x4033f0,this['renderer']=_0x26287d,this['assets']=_0x740e91,this['shadowMapC'+'ache']=_0x26287d['shadowMapC'+'ache'],this['_tempSet']=new Set(),this['_initCalle'+'d']=!(-0x22ab*-0x1+-0xb74+-0x1736*0x1),this['passMateri'+'als']=[],this['ambientAOM'+'aterial']=null,this['fog']='',this['ambientLig'+'ht']=new ie(),this['renderTarg'+'ets']=new Map(),this['stats']={'renderPasses':0x0,'lightmapCount':0x0,'totalRenderTime':0x0,'forwardTime':0x0,'fboTime':0x0,'shadowMapTime':0x0,'compileTime':0x0,'shadersLinked':0x0};}['destroy'](){var _0x471276;Bi['decRef'](this['blackTex']),this['blackTex']=null,Bi['destroy'](),this['device']=null,this['root']=null,this['scene']=null,this['renderer']=null,this['assets']=null,(_0x471276=this['camera'])==null||_0x471276['destroy'](),this['camera']=null;}['initBake'](_0x349383){if(this['bakeHDR']=this['scene']['lightmapPi'+'xelFormat']!==Ne,!this['_initCalle'+'d']){this['_initCalle'+'d']=!(-0x1*0x1391+-0xd*0x2ba+-0x1*-0x3703),this['lightmapFi'+'lters']=new CI(_0x349383),this['constantBa'+'keDir']=_0x349383['scope']['resolve']('bakeDir'),this['materials']=[],this['blackTex']=new _e(this['device'],{'width':0x4,'height':0x4,'format':Ne,'type':Ki,'name':'lightmapBl'+'ack'}),Bi['incRef'](this['blackTex']);const _0x14574f=new Tl();_0x14574f['clearColor']['set'](-0x2119+0x17d9+0x940,0x1*0x386+0x251d*-0x1+0x2197,0x1883+0x1*0x203+0xa*-0x2a7,0x3ab*0x1+0x1bf+-0x56a),_0x14574f['clearColor'+'Buffer']=!(-0xb*-0x5+0xfdf+-0x3a*0x47),_0x14574f['clearDepth'+'Buffer']=!(0x1*0x2001+0x254e+-0x454e),_0x14574f['clearStenc'+'ilBuffer']=!(0x485+-0x25ce+0x214a),_0x14574f['frustumCul'+'ling']=!(0x1e*0xf1+-0x10*0x137+-0x8cd),_0x14574f['projection']=gn,_0x14574f['aspectRati'+'o']=0x1c6c+0x60b+-0x2276,_0x14574f['node']=new Ie(),this['camera']=_0x14574f,this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=yl,this['camera']['shaderPara'+'ms']['toneMappin'+'g']=Mp;}if(this['scene']['clusteredL'+'ightingEna'+'bled']){const _0x55dd44=new qy(_0x349383['supportsAr'+'eaLights'],_0x349383['maxTexture'+'Size'],()=>{});this['lightingPa'+'rams']=_0x55dd44;const _0x486399=this['scene']['lighting'];_0x55dd44['shadowsEna'+'bled']=_0x486399['shadowsEna'+'bled'],_0x55dd44['shadowAtla'+'sResolutio'+'n']=_0x486399['shadowAtla'+'sResolutio'+'n'],_0x55dd44['cookiesEna'+'bled']=_0x486399['cookiesEna'+'bled'],_0x55dd44['cookieAtla'+'sResolutio'+'n']=_0x486399['cookieAtla'+'sResolutio'+'n'],_0x55dd44['areaLights'+'Enabled']=_0x486399['areaLights'+'Enabled'],_0x55dd44['cells']=new D(0x3*-0xd+-0xfef*0x2+0x2008,-0x14f2+0x2046+-0xb51,0xd*-0xfd+-0x8e2+0x15be),_0x55dd44['maxLightsP'+'erCell']=-0xd69+-0x654+0x13c1,this['worldClust'+'ers']=new kf(_0x349383),this['worldClust'+'ers']['name']='ClusterLig'+'htmapper';}}['finishBake'](_0x144d91){this['materials']=[];function _0x2e8a47(_0x2cca07){Bi['decRef'](_0x2cca07['colorBuffe'+'r']),_0x2cca07['destroy']();}this['renderTarg'+'ets']['forEach'](_0x5907df=>{_0x2e8a47(_0x5907df);}),this['renderTarg'+'ets']['clear'](),_0x144d91['forEach'](_0x2f0a12=>{_0x2f0a12['renderTarg'+'ets']['forEach'](_0x43bcaf=>{_0x2e8a47(_0x43bcaf);}),_0x2f0a12['renderTarg'+'ets']['length']=-0x1abd+-0x4d8+0x1f95;}),this['ambientAOM'+'aterial']=null,this['worldClust'+'ers']&&(this['worldClust'+'ers']['destroy'](),this['worldClust'+'ers']=null);}['createMate'+'rialForPas'+'s'](_0x22da41,_0x47ed9c,_0x3660e2){const _0x59c5e9=new Ut();return _0x59c5e9['name']='lmMaterial'+'-pass:'+_0x47ed9c+'-ambient:'+_0x3660e2,_0x59c5e9['setDefine']('UV1LAYOUT',''),_0x59c5e9['setDefine']('LIT_LIGHTM'+'AP_BAKING',''),_0x47ed9c===DI?(_0x59c5e9['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'COLOR',''),_0x3660e2?_0x59c5e9['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'ADD_AMBIEN'+'T',''):_0x59c5e9['ambient']=new ie(-0x40d+0x305+0x108,0x1f73+-0x275*-0x4+0x2947*-0x1,0x239c+-0x2*-0x10b2+0x228*-0x20),this['bakeHDR']||_0x59c5e9['setDefine']('LIGHTMAP_R'+'GBM',''),_0x59c5e9['lightMap']=this['blackTex']):(_0x59c5e9['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'DIR',''),_0x59c5e9['setDefine']('STD_LIGHTM'+'AP_DIR','')),_0x59c5e9['cull']=bt,_0x59c5e9['forceUv1']=!(0xc65*0x3+0x28c*-0x5+0x239*-0xb),_0x59c5e9['update'](),_0x59c5e9;}['createMate'+'rials'](_0x3c8adc,_0x4b7d3f,_0x5f3a81){for(let _0x95ca3=0x1a0*0xe+0xbe4+-0x22a4;_0x95ca3<_0x5f3a81;_0x95ca3++)this['passMateri'+'als'][_0x95ca3]||(this['passMateri'+'als'][_0x95ca3]=this['createMate'+'rialForPas'+'s'](_0x4b7d3f,_0x95ca3,!(-0x1*-0x1733+-0x2387+0xc55)));this['ambientAOM'+'aterial']||(this['ambientAOM'+'aterial']=this['createMate'+'rialForPas'+'s'](_0x4b7d3f,-0x23d6*-0x1+0x17+0x21d*-0x11,!(0x1*0x1cc7+0x1112+-0x2dd9)),this['ambientAOM'+'aterial']['onUpdateSh'+'ader']=function(_0x4375dc){return _0x4375dc['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0xee0+-0x49*0x7e+0x436*0x5),_0x4375dc['litOptions']['separateAm'+'bient']=!(0x102+0x151*-0x3+0x2f1),_0x4375dc;});}['createText'+'ure'](_0x8fb770,_0x517a88){return new _e(this['device'],{'profilerHint':US,'width':_0x8fb770,'height':_0x8fb770,'format':this['scene']['lightmapPi'+'xelFormat'],'mipmaps':!(-0x26d*-0x2+-0xc0a+0x731),'type':this['bakeHDR']?Ms:Ki,'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x517a88});}['collectMod'+'els'](_0x17fa84,_0x409525,_0x184457){var _0x30e08e,_0x499f50,_0x380a68;if(!_0x17fa84['enabled'])return;let _0x17cfc0;if((_0x30e08e=_0x17fa84['model'])!=null&&_0x30e08e['model']&&((_0x499f50=_0x17fa84['model'])!=null&&_0x499f50['enabled'])&&(_0x184457&&_0x184457['push'](new nc(_0x17fa84)),_0x17fa84['model']['lightmappe'+'d']&&_0x409525&&(_0x17cfc0=_0x17fa84['model']['model']['meshInstan'+'ces'])),(_0x380a68=_0x17fa84['render'])!=null&&_0x380a68['enabled']&&(_0x184457&&_0x184457['push'](new nc(_0x17fa84)),_0x17fa84['render']['lightmappe'+'d']&&_0x409525&&(_0x17cfc0=_0x17fa84['render']['meshInstan'+'ces'])),_0x17cfc0){let _0x2de5f5=!(0x18ba+-0x11*0xf9+-0x831);for(let _0x5ee627=-0x1*0x1ce6+0x5e6*-0x1+0x22cc;_0x5ee627<_0x17cfc0['length'];_0x5ee627++)if(!_0x17cfc0[_0x5ee627]['mesh']['vertexBuff'+'er']['format']['hasUv1']){w['log']('Lightmappe'+'r\x20-\x20node\x20['+_0x17fa84['name']+(']\x20contains'+'\x20meshes\x20wi'+'thout\x20requ'+'ired\x20uv1,\x20'+'excluding\x20'+'it\x20from\x20ba'+'king.')),_0x2de5f5=!(-0x18bd+0x106e+0x4c*0x1c);break;}if(_0x2de5f5){const _0xc994af=[];for(let _0x5d28b7=0x1*-0x587+-0x95b+0xee2;_0x5d28b7<_0x17cfc0['length'];_0x5d28b7++){const _0x2178d3=_0x17cfc0[_0x5d28b7]['mesh'];this['_tempSet']['has'](_0x2178d3)?_0x409525['push'](new nc(_0x17fa84,[_0x17cfc0[_0x5d28b7]])):_0xc994af['push'](_0x17cfc0[_0x5d28b7]),this['_tempSet']['add'](_0x2178d3);}this['_tempSet']['clear'](),_0xc994af['length']>-0x1a0d+0x146e+0x59f*0x1&&_0x409525['push'](new nc(_0x17fa84,_0xc994af));}}for(let _0x52525f=-0x7*-0x563+0x1*-0x96d+-0x1c48;_0x52525f<_0x17fa84['_children']['length'];_0x52525f++)this['collectMod'+'els'](_0x17fa84['_children'][_0x52525f],_0x409525,_0x184457);}['prepareSha'+'dowCasters'](_0x561960){const _0x587a65=[];for(let _0x2fdfa0=0x10*0xb5+0x605+-0x1155;_0x2fdfa0<_0x561960['length'];_0x2fdfa0++){const _0x1215cb=_0x561960[_0x2fdfa0]['component'];if(_0x1215cb['castShadow'+'s']=_0x1215cb['castShadow'+'sLightmap'],_0x1215cb['castShadow'+'sLightmap']){const _0x355577=_0x561960[_0x2fdfa0]['meshInstan'+'ces'];for(let _0x470033=0x29*0xce+-0xb4+-0x2*0x1025;_0x470033<_0x355577['length'];_0x470033++)_0x355577[_0x470033]['visibleThi'+'sFrame']=!(0xe9*-0x2+-0x1*0x50e+0xa*0xb0),_0x587a65['push'](_0x355577[_0x470033]);}}return _0x587a65;}['updateTran'+'sforms'](_0x23dcb7){for(let _0x2307f8=-0x9*-0x12f+0x374+-0xe1b;_0x2307f8<_0x23dcb7['length'];_0x2307f8++){const _0x1c7329=_0x23dcb7[_0x2307f8]['meshInstan'+'ces'];for(let _0x395354=-0xb5c+-0xa*-0x73+0x6de;_0x395354<_0x1c7329['length'];_0x395354++)_0x1c7329[_0x395354]['node']['getWorldTr'+'ansform']();}}['calculateL'+'ightmapSiz'+'e'](_0x1d0877){let _0x2c0987;const _0x2da12d=this['scene']['lightmapSi'+'zeMultipli'+'er']||-0x6d7+-0xfd1*0x1+0x16b8,_0x1eacb5=oc;let _0x1498c0,_0x182788;_0x1d0877['model']?(_0x182788=_0x1d0877['model']['lightmapSi'+'zeMultipli'+'er'],_0x1d0877['model']['asset']?(_0x2c0987=this['assets']['get'](_0x1d0877['model']['asset'])['data'],_0x2c0987['area']&&(_0x1498c0=_0x2c0987['area'])):_0x1d0877['model']['_area']&&(_0x2c0987=_0x1d0877['model'],_0x2c0987['_area']&&(_0x1498c0=_0x2c0987['_area']))):_0x1d0877['render']&&(_0x182788=_0x1d0877['render']['lightmapSi'+'zeMultipli'+'er'],_0x1d0877['render']['type']!=='asset'&&_0x1d0877['render']['_area']&&(_0x2c0987=_0x1d0877['render'],_0x2c0987['_area']&&(_0x1498c0=_0x2c0987['_area'])));const _0x2ea47f={'x':0x1,'y':0x1,'z':0x1,'uv':0x1};_0x1498c0&&(_0x2ea47f['x']=_0x1498c0['x'],_0x2ea47f['y']=_0x1498c0['y'],_0x2ea47f['z']=_0x1498c0['z'],_0x2ea47f['uv']=_0x1498c0['uv']);const _0x19c968=_0x182788||0x1701+-0x25da+0xeda;_0x2ea47f['x']*=_0x19c968,_0x2ea47f['y']*=_0x19c968,_0x2ea47f['z']*=_0x19c968;const _0x7ed118=_0x1d0877['render']||_0x1d0877['model'],_0x5c2873=this['computeNod'+'eBounds'](_0x7ed118['meshInstan'+'ces']);_0x1eacb5['copy'](_0x5c2873['halfExtent'+'s']);let _0x4784a3=_0x2ea47f['x']*_0x1eacb5['y']*_0x1eacb5['z']+_0x2ea47f['y']*_0x1eacb5['x']*_0x1eacb5['z']+_0x2ea47f['z']*_0x1eacb5['x']*_0x1eacb5['y'];return _0x4784a3/=_0x2ea47f['uv'],_0x4784a3=Math['sqrt'](_0x4784a3),Math['min'](Y['nextPowerO'+'fTwo'](_0x4784a3*_0x2da12d),this['scene']['lightmapMa'+'xResolutio'+'n']||MI);}['setLightma'+'pping'](_0x3a9982,_0x2b3231,_0x5c6619,_0x5146ff){for(let _0xdbb8=0x1*-0x15b3+0x11*0x119+0x30a;_0xdbb8<_0x3a9982['length'];_0xdbb8++){const _0x25e792=_0x3a9982[_0xdbb8],_0x244b8b=_0x25e792['meshInstan'+'ces'];for(let _0x4cbfe1=-0x1bac+-0x16b1+0x325d;_0x4cbfe1<_0x244b8b['length'];_0x4cbfe1++){const _0x4f5835=_0x244b8b[_0x4cbfe1];if(_0x4f5835['setLightma'+'pped'](_0x2b3231),_0x2b3231){_0x5146ff&&(_0x4f5835['_shaderDef'+'s']|=_0x5146ff),_0x4f5835['mask']=di;for(let _0x338766=0x4f*-0x1+-0x2677+0xe*0x2c5;_0x338766<_0x5c6619;_0x338766++){const _0x306c5c=_0x25e792['renderTarg'+'ets'][_0x338766]['colorBuffe'+'r'];_0x306c5c['minFilter']=vt,_0x306c5c['magFilter']=vt,_0x4f5835['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x338766],_0x306c5c);}}}}}['bake'](_0x1c0324,_0x12097a=Ac){const _0x1aa578=this['device'],_0x30dadf=de();this['scene']['_updateSky'+'Mesh'](),_0x1aa578['fire']('lightmappe'+'r:start',{'timestamp':_0x30dadf,'target':this}),this['stats']['renderPass'+'es']=-0x602*0x1+0x1f5a+0x656*-0x4,this['stats']['shadowMapT'+'ime']=-0xccd*-0x1+-0xd6*0x9+-0x547,this['stats']['forwardTim'+'e']=0x57b*-0x5+0xbcb*-0x1+0x2732;const _0x4f4947=_0x1aa578['_shaderSta'+'ts']['linked'],_0x54bdbc=_0x1aa578['_renderTar'+'getCreatio'+'nTime'],_0x417a75=_0x1aa578['_shaderSta'+'ts']['compileTim'+'e'],_0x2c924d=[],_0x455cb5=[];if(_0x1c0324){for(let _0x5717a3=-0x393+0x25d3+0x89*-0x40;_0x5717a3<_0x1c0324['length'];_0x5717a3++)this['collectMod'+'els'](_0x1c0324[_0x5717a3],_0x2c924d,null);this['collectMod'+'els'](this['root'],null,_0x455cb5);}else this['collectMod'+'els'](this['root'],_0x2c924d,_0x455cb5);if(Q['pushGpuMar'+'ker'](this['device'],'LMBake'),_0x2c924d['length']>-0x90d+0xbf0+0x1*-0x2e3){this['renderer']['shadowRend'+'erer']['frameUpdat'+'e']();const _0x45a049=_0x12097a===Ac?-0x7f9+0x115c+-0x961*0x1:0x1415+0x206b*-0x1+0xc57;this['setLightma'+'pping'](_0x2c924d,!(0x2173+0x1*0x2694+0x36e*-0x15),_0x45a049),this['initBake'](_0x1aa578),this['bakeIntern'+'al'](_0x45a049,_0x2c924d,_0x455cb5);let _0x3674bf=Ff;_0x12097a===Ac&&(_0x3674bf|=Iy),this['scene']['ambientBak'+'e']&&(_0x3674bf|=Ly),this['setLightma'+'pping'](_0x2c924d,!(0x263b+-0x1*0x16d6+-0xf65),_0x45a049,_0x3674bf),this['finishBake'](_0x2c924d);}Q['popGpuMark'+'er'](this['device']);const _0xedd5b8=de();this['stats']['totalRende'+'rTime']=_0xedd5b8-_0x30dadf,this['stats']['shadersLin'+'ked']=_0x1aa578['_shaderSta'+'ts']['linked']-_0x4f4947,this['stats']['compileTim'+'e']=_0x1aa578['_shaderSta'+'ts']['compileTim'+'e']-_0x417a75,this['stats']['fboTime']=_0x1aa578['_renderTar'+'getCreatio'+'nTime']-_0x54bdbc,this['stats']['lightmapCo'+'unt']=_0x2c924d['length'],_0x1aa578['fire']('lightmappe'+'r:end',{'timestamp':_0xedd5b8,'target':this});}['allocateTe'+'xtures'](_0x281f91,_0x22740b){for(let _0x3dd07b=-0x458+-0x1f94+-0x16*-0x1a2;_0x3dd07b<_0x281f91['length'];_0x3dd07b++){const _0x5ae1a0=_0x281f91[_0x3dd07b],_0x5d965a=this['calculateL'+'ightmapSiz'+'e'](_0x5ae1a0['node']);for(let _0x1ac9c3=0x1035+-0xb5a*-0x1+-0x1b8f;_0x1ac9c3<_0x22740b;_0x1ac9c3++){const _0x3da4aa=this['createText'+'ure'](_0x5d965a,'lightmappe'+'r_lightmap'+'_'+_0x3dd07b);Bi['incRef'](_0x3da4aa),_0x5ae1a0['renderTarg'+'ets'][_0x1ac9c3]=new gt({'colorBuffer':_0x3da4aa,'depth':!(0xba1+0x552+-0x10f2)});}if(!this['renderTarg'+'ets']['has'](_0x5d965a)){const _0x8e30de=this['createText'+'ure'](_0x5d965a,'lightmappe'+'r_temp_lig'+'htmap_'+_0x5d965a);Bi['incRef'](_0x8e30de),this['renderTarg'+'ets']['set'](_0x5d965a,new gt({'colorBuffer':_0x8e30de,'depth':!(0x14ec+0x1c30+-0xd*0x3c7)}));}}}['prepareLig'+'htsToBake'](_0x5a57f7,_0x5cf994){if(this['scene']['ambientBak'+'e']){const _0x25c9b8=new eg(this);_0x5cf994['push'](_0x25c9b8);}const _0x44769f=this['renderer']['lights'];for(let _0x1a63c9=-0x12*-0x12b+0x3e9*0x2+-0x1cd8;_0x1a63c9<_0x44769f['length'];_0x1a63c9++){const _0x96f356=_0x44769f[_0x1a63c9],_0x40450f=new vI(this,_0x96f356);_0x5a57f7['push'](_0x40450f),_0x96f356['enabled']&&(_0x96f356['mask']&fi)!==0x1c57+0x4be+-0x3ad*0x9&&(_0x96f356['mask']=fi|di|Ss,_0x96f356['shadowUpda'+'teMode']=_0x96f356['type']===ve?Fp:gr,_0x5cf994['push'](_0x40450f));}_0x5cf994['sort']();}['restoreLig'+'hts'](_0x20b0d8){for(let _0x41fd1d=0x7fa*0x1+0x115*-0xf+0x1*0x841;_0x41fd1d<_0x20b0d8['length'];_0x41fd1d++)_0x20b0d8[_0x41fd1d]['restore']();}['setupScene'](){this['ambientLig'+'ht']['copy'](this['scene']['ambientLig'+'ht']),this['scene']['ambientBak'+'e']||this['scene']['ambientLig'+'ht']['set'](0x2fb*0x4+-0x104f+0x463,0xd6b+0x10a5+-0x1e10,-0x1*-0x18b9+0x213d+-0x39f6),this['renderer']['setSceneCo'+'nstants'](),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Contrast')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Contrast']),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Brightness')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Brightness']);}['restoreSce'+'ne'](){this['scene']['ambientLig'+'ht']['copy'](this['ambientLig'+'ht']);}['computeNod'+'eBounds'](_0x5edabe){const _0x3eaa79=new De();if(_0x5edabe['length']>-0x31*0x20+-0x1*0x619+-0x95*-0x15){_0x3eaa79['copy'](_0x5edabe[0x266b*-0x1+0x1*0x16b7+0xfb4]['aabb']);for(let _0x4faddb=-0x3e5*-0x1+0x1*0x1f2d+-0x2311;_0x4faddb<_0x5edabe['length'];_0x4faddb++)_0x3eaa79['add'](_0x5edabe[_0x4faddb]['aabb']);}return _0x3eaa79;}['computeNod'+'esBounds'](_0x2ef0aa){for(let _0x33c4b4=-0x1*-0x1e81+-0x17f*0x1+0x4f*-0x5e;_0x33c4b4<_0x2ef0aa['length'];_0x33c4b4++){const _0x4391ee=_0x2ef0aa[_0x33c4b4]['meshInstan'+'ces'];_0x2ef0aa[_0x33c4b4]['bounds']=this['computeNod'+'eBounds'](_0x4391ee);}}['computeBou'+'nds'](_0x4f0f1b){const _0x56c3eb=new De();for(let _0x81844b=0x133*0xd+-0xe*-0x202+0x9*-0x4db;_0x81844b<_0x4f0f1b['length'];_0x81844b++){_0x56c3eb['copy'](_0x4f0f1b[0x158a+0x3*0x466+-0x75*0x4c]['aabb']);for(let _0x7cf5d3=0x345+0x1dff*-0x1+0x1abb;_0x7cf5d3<_0x4f0f1b['length'];_0x7cf5d3++)_0x56c3eb['add'](_0x4f0f1b[_0x7cf5d3]['aabb']);}return _0x56c3eb;}['backupMate'+'rials'](_0x5d7c64){for(let _0x199037=-0x13c7+0x117a+0x24d;_0x199037<_0x5d7c64['length'];_0x199037++)this['materials'][_0x199037]=_0x5d7c64[_0x199037]['material'];}['restoreMat'+'erials'](_0x7105b0){for(let _0x838dd9=-0x12be+0x1a29+-0x76b;_0x838dd9<_0x7105b0['length'];_0x838dd9++)_0x7105b0[_0x838dd9]['material']=this['materials'][_0x838dd9];}['lightCamer'+'aPrepare'](_0x220cbd,_0x18842f){const _0x9b8f3c=_0x18842f['light'];let _0x4b4c3d;return _0x9b8f3c['type']===Ze&&(_0x4b4c3d=_0x9b8f3c['getRenderD'+'ata'](null,0x129*-0x1+-0x19ba+0x1ae3*0x1)['shadowCame'+'ra'],_0x4b4c3d['_node']['setPositio'+'n'](_0x9b8f3c['_node']['getPositio'+'n']()),_0x4b4c3d['_node']['setRotatio'+'n'](_0x9b8f3c['_node']['getRotatio'+'n']()),_0x4b4c3d['_node']['rotateLoca'+'l'](-(-0x15f2+-0x1876+-0x9*-0x532),-0xf40+0x1a22+-0xae2,-0xd*-0x43+0x548+-0x8af),_0x4b4c3d['projection']=ni,_0x4b4c3d['nearClip']=_0x9b8f3c['attenuatio'+'nEnd']/(-0x6ee*-0x3+-0x1c7*0x7+-0x471),_0x4b4c3d['farClip']=_0x9b8f3c['attenuatio'+'nEnd'],_0x4b4c3d['aspectRati'+'o']=0x151*0x2+-0x570+0x2cf,_0x4b4c3d['fov']=_0x9b8f3c['_outerCone'+'Angle']*(-0x1824+0xa6a+-0x6*-0x24a),this['renderer']['updateCame'+'raFrustum'](_0x4b4c3d)),_0x4b4c3d;}['lightCamer'+'aPrepareAn'+'dCull'](_0x2ee7eb,_0x2528b6,_0x4abedb,_0x4790e0){const _0xa269b7=_0x2ee7eb['light'];let _0x2e0fc8=!(0xfcd*0x2+0x1ae8+0x3a82*-0x1);if(_0xa269b7['type']===ve){oc['copy'](_0x4790e0['center']),oc['y']+=_0x4790e0['halfExtent'+'s']['y'],this['camera']['node']['setPositio'+'n'](oc),this['camera']['node']['setEulerAn'+'gles'](-(-0x2*0x44f+0x1efb+-0x1603),-0x3d*0x1c+-0x1668+0x1d14,-0x343+0x1d*-0x1d+-0x1*-0x68c),this['camera']['nearClip']=-0x1c6*-0x14+0x1322+0x2*-0x1b4d,this['camera']['farClip']=_0x4790e0['halfExtent'+'s']['y']*(0x254e+0x1542+-0x3a8e);const _0x5e8a70=Math['max'](_0x4790e0['halfExtent'+'s']['x'],_0x4790e0['halfExtent'+'s']['z']);this['camera']['orthoHeigh'+'t']=_0x5e8a70;}else _0x2ee7eb['lightBound'+'s']['intersects'](_0x2528b6['bounds'])||(_0x2e0fc8=!(-0x25db*-0x1+-0x1*-0x1ca3+-0x427d));if(_0xa269b7['type']===Ze){let _0x1645ba=!(0x1*0x11d1+-0x230+0x19*-0xa0);const _0x3f16ef=_0x2528b6['meshInstan'+'ces'];for(let _0x4b16f0=0x21d7+-0x16a6+-0x3bb*0x3;_0x4b16f0<_0x3f16ef['length'];_0x4b16f0++)if(_0x3f16ef[_0x4b16f0]['_isVisible'](_0x4abedb)){_0x1645ba=!(0x11*0x1d+-0x2e5*-0x7+-0x1630);break;}_0x1645ba||(_0x2e0fc8=!(0x5ac+0x24a2+-0x2a4d));}return _0x2e0fc8;}['setupLight'+'Array'](_0x17936a,_0x5199ad){_0x17936a[ve]['length']=0x1*0xb+-0x1*-0x83a+-0x1*0x845,_0x17936a[Ke]['length']=-0x79f+-0x218e+0x292d,_0x17936a[Ze]['length']=-0x1*0x275+0xaa8+-0x833,_0x17936a[_0x5199ad['type']][0x14b*-0x9+-0x15a+0xcfd]=_0x5199ad,_0x5199ad['visibleThi'+'sFrame']=!(0x21c9+-0x7*-0x13+0x1*-0x224e);}['renderShad'+'owMap'](_0x14fe96,_0x59941d,_0x21e2b4,_0x2c33e3){const _0x4d4ad2=_0x2c33e3['light'],_0x359c3d=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x17c03d=_0x4d4ad2['castShadow'+'s']&&(!_0x359c3d||this['scene']['lighting']['shadowsEna'+'bled']);if(!_0x59941d&&_0x17c03d){if(!_0x4d4ad2['shadowMap']&&!_0x359c3d&&(_0x4d4ad2['shadowMap']=this['shadowMapC'+'ache']['get'](this['device'],_0x4d4ad2)),_0x4d4ad2['type']===ve){this['renderer']['_shadowRen'+'dererDirec'+'tional']['cull'](_0x4d4ad2,_0x14fe96,this['camera'],_0x21e2b4);const _0x2af117=this['renderer']['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x4d4ad2,this['camera']);_0x2af117==null||_0x2af117['render']();}else{if(this['device']['isWebGPU'])return w['warnOnce']('Lightmappe'+'r\x20on\x20WebGP'+'U\x20does\x20not'+'\x20yet\x20suppo'+'rt\x20spot\x20an'+'d\x20omni\x20sha'+'dows.'),!(-0x819*0x2+-0xbc8*-0x1+0x1*0x46a);this['renderer']['_shadowRen'+'dererLocal']['cull'](_0x4d4ad2,_0x14fe96,_0x21e2b4),this['renderer']['shadowRend'+'erer']['render'](_0x4d4ad2,this['camera'],!(-0x2373+-0x10*0x5e+-0x14*-0x211));}}return!(0x23f5+-0x106f*0x1+-0x1386);}['postproces'+'sTextures'](_0x3d8c66,_0x3717be,_0x650b3c){const _0x326727=this['lightmapFi'+'lters']['getDilate'](_0x3d8c66,this['bakeHDR']);let _0x26ac7c;const _0x28eb6a=this['scene']['lightmapFi'+'lterEnable'+'d'];_0x28eb6a&&(this['lightmapFi'+'lters']['prepareDen'+'oise'](this['scene']['lightmapFi'+'lterRange'],this['scene']['lightmapFi'+'lterSmooth'+'ness'],this['bakeHDR']),_0x26ac7c=this['lightmapFi'+'lters']['getDenoise'](this['bakeHDR'])),_0x3d8c66['setBlendSt'+'ate'](pt['NOBLEND']),_0x3d8c66['setDepthSt'+'ate'](Yt['NODEPTH']),_0x3d8c66['setStencil'+'State'](null,null);for(let _0x408a27=0x41*0x69+-0x1f9e+-0x1b*-0x2f;_0x408a27<_0x3717be['length'];_0x408a27++){const _0x4997cf=_0x3717be[_0x408a27];Q['pushGpuMar'+'ker'](this['device'],'LMPost:'+_0x408a27);for(let _0x54ad14=0x27*-0x56+-0x33*-0x61+-0x639*0x1;_0x54ad14<_0x650b3c;_0x54ad14++){const _0x49c9e0=_0x4997cf['renderTarg'+'ets'][_0x54ad14],_0x630411=_0x49c9e0['colorBuffe'+'r'],_0x16f239=this['renderTarg'+'ets']['get'](_0x630411['width']),_0x2573bf=_0x16f239['colorBuffe'+'r'];this['lightmapFi'+'lters']['prepare'](_0x630411['width'],_0x630411['height']);for(let _0x87b539=0xa15*0x3+-0x56a*0x7+0x7a7;_0x87b539<-0x1*-0x1355+0x1a7a+-0x2dce;_0x87b539++)this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x630411),Tr(_0x3d8c66,_0x16f239,_0x28eb6a&&_0x54ad14===-0x2a*0x11+0x124f*-0x1+0x1519&&_0x87b539===-0xc34+0x1131+-0x4fd?_0x26ac7c:_0x326727),this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x2573bf),Tr(_0x3d8c66,_0x49c9e0,_0x326727);}Q['popGpuMark'+'er'](this['device']);}}['bakeIntern'+'al'](_0x49da7d,_0x21b002,_0x4df92a){const _0x3ef810=this['scene'],_0x274b85=_0x3ef810['layers'],_0x2a45f6=this['device'],_0x57918f=_0x3ef810['clusteredL'+'ightingEna'+'bled'];this['createMate'+'rials'](_0x2a45f6,_0x3ef810,_0x49da7d),this['setupScene'](),_0x274b85['_update'](),this['computeNod'+'esBounds'](_0x21b002),this['allocateTe'+'xtures'](_0x21b002,_0x49da7d),this['renderer']['collectLig'+'hts'](_0x274b85);const _0x43bad8=[],_0x242afc=[];this['prepareLig'+'htsToBake'](_0x43bad8,_0x242afc),this['updateTran'+'sforms'](_0x4df92a);const _0x211220=this['prepareSha'+'dowCasters'](_0x4df92a);this['renderer']['updateCpuS'+'kinMatrice'+'s'](_0x211220),this['renderer']['gpuUpdate'](_0x211220);const _0x2def9c=this['computeBou'+'nds'](_0x211220);let _0x382387,_0x8bf8e0,_0x3dcf89,_0x5848fa;for(_0x382387=0x48f+0x1419+0x6*-0x41c;_0x382387<_0x21b002['length'];_0x382387++)for(_0x3dcf89=_0x21b002[_0x382387]['meshInstan'+'ces'],_0x8bf8e0=0xa6d*0x1+0x99+-0x53*0x22;_0x8bf8e0<_0x3dcf89['length'];_0x8bf8e0++)_0x5848fa=_0x3dcf89[_0x8bf8e0],_0x5848fa['setLightma'+'pped'](!(0x1241+0x28f*0x1+-0x2f9*0x7)),_0x5848fa['mask']=fi,_0x5848fa['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][0x489+-0xae*0x6+0x27*-0x3],this['blackTex']),_0x5848fa['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][0x1a5*0x5+-0x52b+-0x30d],this['blackTex']);for(_0x8bf8e0=0xf6d+-0x1183*-0x1+0x11*-0x1f0;_0x8bf8e0<_0x242afc['length'];_0x8bf8e0++)_0x242afc[_0x8bf8e0]['light']['enabled']=!(-0x3f1*-0x9+0x68*-0x22+-0x15a8);const _0x462bf0=[[],[],[]];let _0x493be9,_0x18f8c9,_0x2244bb=!(0x338*-0x1+0x1*-0x6e1+0xa1a);for(_0x382387=0x448*-0x2+-0xca2+0xa99*0x2;_0x382387<_0x242afc['length'];_0x382387++){const _0x2e5ec3=_0x242afc[_0x382387],_0xc0344c=_0x2e5ec3 instanceof eg,_0x2d1c54=_0x2e5ec3['light']['type']===ve;let _0x20ccc8=_0x2e5ec3['numVirtual'+'Lights'];_0x49da7d>-0x1741+0x1*0x1709+0x13*0x3&&_0x20ccc8>0x75c+-0x2405+-0xe55*-0x2&&_0x2e5ec3['light']['bakeDir']&&(_0x20ccc8=0x5ca*-0x5+0x797*-0x5+0x42e6*0x1,w['warn']('Lightmappe'+'r\x27s\x20BAKE_C'+'OLORDIR\x20mo'+'de\x20is\x20not\x20'+'compatible'+'\x20with\x20Ligh'+'t\x27s\x20bakeNu'+'mSamples\x20l'+'arger\x20than'+'\x20one.\x20Forc'+'ing\x20it\x20to\x20'+'one.'));for(let _0x4219c8=0x181b+0xec8+-0x1*0x26e3;_0x4219c8<_0x20ccc8;_0x4219c8++){Q['pushGpuMar'+'ker'](_0x2a45f6,'Light:'+_0x2e5ec3['light']['_node']['name']+':'+_0x4219c8),_0x20ccc8>-0x211+0x2151+-0x13*0x1a5&&_0x2e5ec3['prepareVir'+'tualLight'](_0x4219c8,_0x20ccc8),_0x2e5ec3['startBake']();let _0x346c86=!(-0x15b0+-0x152e+0x2adf);const _0xe7f86b=this['lightCamer'+'aPrepare'](_0x2a45f6,_0x2e5ec3);for(_0x18f8c9=0x909+-0x11a7+-0x89e*-0x1;_0x18f8c9<_0x21b002['length'];_0x18f8c9++){const _0x3c2ac6=_0x21b002[_0x18f8c9];if(_0x3dcf89=_0x3c2ac6['meshInstan'+'ces'],!this['lightCamer'+'aPrepareAn'+'dCull'](_0x2e5ec3,_0x3c2ac6,_0xe7f86b,_0x2def9c))continue;this['setupLight'+'Array'](_0x462bf0,_0x2e5ec3['light']);const _0x1af43d=_0x2d1c54?[]:[_0x2e5ec3['light']];for(_0x57918f&&this['renderer']['lightTextu'+'reAtlas']['update'](_0x1af43d,this['lightingPa'+'rams']),_0x346c86=this['renderShad'+'owMap'](_0x274b85,_0x346c86,_0x211220,_0x2e5ec3),_0x57918f&&this['worldClust'+'ers']['update'](_0x1af43d,this['lightingPa'+'rams']),this['backupMate'+'rials'](_0x3dcf89),_0x493be9=0x8f*-0x22+-0x1*-0x1001+0x2fd;_0x493be9<_0x49da7d&&!(_0x493be9>0x2606+-0x21dc+-0xd*0x52&&_0x4219c8>-0x665+-0x2165+0x13e5*0x2||_0xc0344c&&_0x493be9>-0x1c34+-0x1e3c+0x176*0x28);_0x493be9++){Q['pushGpuMar'+'ker'](_0x2a45f6,'LMPass:'+_0x493be9);const _0x4b3a76=_0x3c2ac6['renderTarg'+'ets'][_0x493be9],_0x17a2eb=_0x3c2ac6['renderTarg'+'ets'][_0x493be9]['colorBuffe'+'r']['width'],_0x2a75bc=this['renderTarg'+'ets']['get'](_0x17a2eb),_0x21d340=_0x2a75bc['colorBuffe'+'r'];_0x493be9===0x1a44+0xa9+-0x1aed?_0x2244bb=_0x3ef810['updateShad'+'ers']:_0x2244bb&&(_0x3ef810['updateShad'+'ers']=!(0x49*0x83+0x4e1*0x7+0x3f9*-0x12));let _0xec175=this['passMateri'+'als'][_0x493be9];for(_0xc0344c&&_0x4219c8+(0x116+-0x1*0x26e5+0x25d0)===_0x20ccc8&&_0x493be9===0x1ac6+-0x2015+-0x1c5*-0x3&&(_0xec175=this['ambientAOM'+'aterial']),_0x8bf8e0=0x163b+0x5a*0x21+-0x1*0x21d5;_0x8bf8e0<_0x3dcf89['length'];_0x8bf8e0++)_0x3dcf89[_0x8bf8e0]['material']=_0xec175;if(this['renderer']['updateShad'+'ers'](_0x3dcf89),_0x493be9===II&&this['constantBa'+'keDir']['setValue'](_0x2e5ec3['light']['bakeDir']?0x1b63+0x318+0x53*-0x5e:0x2495*0x1+-0xa6d+-0x1a28),_0x2a45f6['isWebGPU']){const _0x6079e3=new PI(_0x2a45f6,this['renderer'],this['camera'],_0x57918f?this['worldClust'+'ers']:null,_0x3dcf89,_0x462bf0);_0x6079e3['init'](_0x2a75bc),_0x6079e3['render'](),_0x6079e3['destroy']();}else this['renderer']['setCamera'](this['camera'],_0x2a75bc,!(0x1c6b+0x8cb+-0x2536)),_0x57918f&&this['worldClust'+'ers']['activate'](),this['renderer']['_forwardTi'+'me']=0x12b5*0x1+-0x10b4+-0x201,this['renderer']['_shadowMap'+'Time']=0x63e+0x215b+0xd33*-0x3,this['renderer']['renderForw'+'ard'](this['camera'],_0x2a75bc,_0x3dcf89,_0x462bf0,xa),_0x2a45f6['updateEnd']();for(this['stats']['shadowMapT'+'ime']+=this['renderer']['_shadowMap'+'Time'],this['stats']['forwardTim'+'e']+=this['renderer']['_forwardTi'+'me'],this['stats']['renderPass'+'es']++,_0x3c2ac6['renderTarg'+'ets'][_0x493be9]=_0x2a75bc,this['renderTarg'+'ets']['set'](_0x17a2eb,_0x4b3a76),_0x8bf8e0=0x25c4+-0x38f+-0x2235;_0x8bf8e0<_0x3dcf89['length'];_0x8bf8e0++)_0x5848fa=_0x3dcf89[_0x8bf8e0],_0x5848fa['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x493be9],_0x21d340),_0x5848fa['_shaderDef'+'s']|=Ff;Q['popGpuMark'+'er'](_0x2a45f6);}this['restoreMat'+'erials'](_0x3dcf89);}_0x2e5ec3['endBake'](this['shadowMapC'+'ache']),Q['popGpuMark'+'er'](_0x2a45f6);}}for(this['postproces'+'sTextures'](_0x2a45f6,_0x21b002,_0x49da7d),_0x18f8c9=-0x2*0x81d+0x52c+-0x11b*-0xa;_0x18f8c9<_0x4df92a['length'];_0x18f8c9++)_0x4df92a[_0x18f8c9]['restore']();this['restoreLig'+'hts'](_0x43bad8),this['restoreSce'+'ne'](),_0x57918f||this['shadowMapC'+'ache']['clear']();}}const Th=class Th extends me{constructor(_0x4e61e5,_0x33df08){super(),h(this,'system'),h(this,'entity'),(this['system']=_0x4e61e5,this['entity']=_0x33df08,this['system']['schema']&&!this['_accessors'+'Built']&&this['buildAcces'+'sors'](this['system']['schema']),this['on']('set',function(_0x425ff3,_0x4ae3c0,_0x4d94f0){this['fire']('set_'+_0x425ff3,_0x425ff3,_0x4ae3c0,_0x4d94f0);}),this['on']('set_enable'+'d',this['onSetEnabl'+'ed'],this));}static['_buildAcce'+'ssors'](_0x5831dd,_0x487fcc){_0x487fcc['forEach'](_0x5e8cba=>{const _0x1ec3f1=typeof _0x5e8cba=='object'?_0x5e8cba['name']:_0x5e8cba;Object['defineProp'+'erty'](_0x5831dd,_0x1ec3f1,{'get':function(){return this['data'][_0x1ec3f1];},'set':function(_0x53ef1c){const _0x15d125=this['data'],_0x4c4287=_0x15d125[_0x1ec3f1];_0x15d125[_0x1ec3f1]=_0x53ef1c,this['fire']('set',_0x1ec3f1,_0x4c4287,_0x53ef1c);},'configurable':!(-0x854+0xd*0xc1+-0x179)});}),_0x5831dd['_accessors'+'Built']=!(0x5*-0x479+0xddc*-0x2+0x3215);}['buildAcces'+'sors'](_0x368a95){Th['_buildAcce'+'ssors'](this,_0x368a95);}['onSetEnabl'+'ed'](_0xc7f1e,_0x1b6e78,_0x3e3027){_0x1b6e78!==_0x3e3027&&this['entity']['enabled']&&(_0x3e3027?this['onEnable']():this['onDisable']());}['onEnable'](){}['onDisable'](){}['onPostStat'+'eChange'](){}get['data'](){const _0x379e83=this['system']['store'][this['entity']['getGuid']()];return _0x379e83?_0x379e83['data']:null;}set['enabled'](_0x21fcdf){}get['enabled'](){return!(0x192d*0x1+-0xe10+-0xb1d);}};h(Th,'order',-0xda8+0x2*-0x245+0x1232);let we=Th;class ct extends me{constructor(_0x3fd9a8){super(),this['app']=_0x3fd9a8,this['store']={},this['schema']=[];}['addCompone'+'nt'](_0x4e53ff,_0x4b77c8={}){const _0x44607a=new this['ComponentT'+'ype'](this,_0x4e53ff),_0x3c15c8=new this['DataType']();return this['store'][_0x4e53ff['getGuid']()]={'entity':_0x4e53ff,'data':_0x3c15c8},_0x4e53ff[this['id']]=_0x44607a,_0x4e53ff['c'][this['id']]=_0x44607a,this['initialize'+'ComponentD'+'ata'](_0x44607a,_0x4b77c8,[]),this['fire']('add',_0x4e53ff,_0x44607a),_0x44607a;}['removeComp'+'onent'](_0xff2cd6){const _0x52bc54=this['id'],_0x2c09ee=this['store'][_0xff2cd6['getGuid']()],_0xae76e9=_0xff2cd6['c'][_0x52bc54];_0xae76e9['fire']('beforeremo'+'ve'),this['fire']('beforeremo'+'ve',_0xff2cd6,_0xae76e9),delete this['store'][_0xff2cd6['getGuid']()],_0xff2cd6[_0x52bc54]=void(-0x4*-0x115+-0x1ce6+-0x11*-0x172),delete _0xff2cd6['c'][_0x52bc54],this['fire']('remove',_0xff2cd6,_0x2c09ee['data']);}['cloneCompo'+'nent'](_0x268a70,_0x392f42){const _0x347a06=this['store'][_0x268a70['getGuid']()];return this['addCompone'+'nt'](_0x392f42,_0x347a06['data']);}['initialize'+'ComponentD'+'ata'](_0x40223a,_0x483055={},_0xdf286d){for(let _0x10ca85=-0x1955+-0x2f7+0x1c4c,_0x1d462a=_0xdf286d['length'];_0x10ca85<_0x1d462a;_0x10ca85++){const _0x18a170=_0xdf286d[_0x10ca85];let _0x33ed46,_0x2b67d5;typeof _0x18a170=='object'?(_0x33ed46=_0x18a170['name'],_0x2b67d5=_0x18a170['type']):(_0x33ed46=_0x18a170,_0x2b67d5=void(0x83*0xb+-0x2312*-0x1+-0x28b3));let _0x2da96a=_0x483055[_0x33ed46];_0x2da96a!==void(0x45*0x1b+0x256b+-0x2cb2)?(_0x2b67d5!==void(0x4c7*-0x1+0x9bc+-0x2f*0x1b)&&(_0x2da96a=RI(_0x2da96a,_0x2b67d5)),_0x40223a[_0x33ed46]=_0x2da96a):_0x40223a[_0x33ed46]=_0x40223a['data'][_0x33ed46];}_0x40223a['enabled']&&_0x40223a['entity']['enabled']&&_0x40223a['onEnable']();}['getPropert'+'iesOfType'](_0x426b1a){const _0x38f056=[];return(this['schema']||[])['forEach'](_0x1ebbbb=>{_0x1ebbbb&&typeof _0x1ebbbb=='object'&&_0x1ebbbb['type']===_0x426b1a&&_0x38f056['push'](_0x1ebbbb);}),_0x38f056;}['destroy'](){this['off']();}}function RI(_0x2a041f,_0x556270){if(!_0x2a041f)return _0x2a041f;switch(_0x556270){case'rgb':return _0x2a041f instanceof ie?_0x2a041f['clone']():new ie(_0x2a041f[-0x1829*-0x1+0x1357+-0x2*0x15c0],_0x2a041f[-0x1ee1+0x6*0x35b+0x40*0x2b],_0x2a041f[-0x261c+-0x2*0x5a+-0x2*-0x1369]);case'rgba':return _0x2a041f instanceof ie?_0x2a041f['clone']():new ie(_0x2a041f[0x4*0x39e+0x200f+0x2e87*-0x1],_0x2a041f[-0x991*0x1+-0x1250+-0xa6*-0x2b],_0x2a041f[0x741+-0x61*0x15+0xb6],_0x2a041f[0x9da+0x1685+-0x205c*0x1]);case'vec2':return _0x2a041f instanceof J?_0x2a041f['clone']():new J(_0x2a041f[0x2454+0x2*0x105d+-0x450e],_0x2a041f[-0x9f5+-0x890+-0x2*-0x943]);case'vec3':return _0x2a041f instanceof D?_0x2a041f['clone']():new D(_0x2a041f[0x6fb*0x1+-0x456+-0x1*0x2a5],_0x2a041f[-0x9a*0x7+-0x1ec*0x12+0x26cf],_0x2a041f[-0x15*-0x3+0x1df*-0xf+-0x1*-0x1bd4]);case'vec4':return _0x2a041f instanceof re?_0x2a041f['clone']():new re(_0x2a041f[-0x58*0x8+0x228b*0x1+-0xa99*0x3],_0x2a041f[-0xfa*-0x24+-0x47*0x2c+0x19*-0xeb],_0x2a041f[0x13d4+0x3e*0x62+-0x8b6*0x5],_0x2a041f[-0x163c+0xc12+0xa2d*0x1]);case'boolean':case'number':case'string':return _0x2a041f;case'entity':return _0x2a041f;default:throw new Error('Could\x20not\x20'+'convert\x20un'+'handled\x20ty'+'pe:\x20'+_0x556270);}}const iv=-0x225*0xd+0x75*-0x9+0x1ffe,Xf=0x3*-0x31a+0x1425+-0xad6,qf=0x3*-0x52a+0x3fb+0xb85;class OI{constructor(){this['_left']=(-0x1*-0x507+0x6db+-0xbe1)/(-0x9*0xad+-0x1*0xe21+0x1436),this['_right']=-(-0xc5*-0x1b+0x2208+-0x1b67*0x2)/(-0x387*0x8+-0x1c6+-0xb*-0x2ba),this['_len']=-0x54+0x2064+-0x2010,this['_recip']=0x126a*-0x2+0x8c9*-0x1+-0x2d9d*-0x1,this['_p0']=-0x29f*0xe+0x1d97+0x71b,this['_p1']=0x11b*-0x5+-0xce+0x655*0x1,this['_t']=-0xe53+0xc5*0x22+-0xbd7,this['_hermite']={'valid':!(0x22c4+-0x201e+-0x2a5),'p0':0x0,'m0':0x0,'p1':0x0,'m1':0x0};}['update'](_0x1fe130,_0x2ca230){if(_0x1fe130<this['_left']||_0x1fe130>=this['_right']){const _0x19efac=_0x2ca230['length'];if(!_0x19efac)this['_left']=-(-0xb2*0x1c+-0x245a+0x37d3)/(-0x1ca4+-0x1*-0x2205+-0x561),this['_right']=(0x23bb*-0x1+0x1474+0xf48)/(-0x178e*0x1+-0xacf+0x225d*0x1),this['_len']=-0xf68+0x364+0x1*0xc04,this['_recip']=0x76+0x2065+-0x20db,this['_p0']=this['_p1']=0x1174*0x2+0x19a*-0x14+-0x2e0;else{if(_0x1fe130<_0x2ca230[0x3b4*-0x7+-0x1*-0x23f9+0x1*-0xa0d])this['_left']=-(-0x2659+-0x142b*-0x1+0x122f)/(-0x138c+0x9d8+0x9b4),this['_right']=_0x2ca230[-0x1d08+0x4f*0x73+-0x675],this['_len']=0x1d89*-0x1+0x11c+0x1c6d,this['_recip']=0x1b*0x1d+0x82f*-0x4+-0x1dad*-0x1,this['_p0']=this['_p1']=0x1a39+0x1*0x2a2+-0x1cdb*0x1;else{if(_0x1fe130>=_0x2ca230[_0x19efac-(-0x5fb+-0xd73+0x136f)])this['_left']=_0x2ca230[_0x19efac-(-0x2597+0x226e+0x32a)],this['_right']=(0x185*0xc+-0x1*0xb7b+-0xc0*0x9)/(0x19*0x3b+0x19cc+-0x1f8f),this['_len']=-0x1496+-0x17c3+0x2c59*0x1,this['_recip']=-0xe54+-0x1d72+0x2bc6,this['_p0']=this['_p1']=_0x19efac-(0xc1*-0x5+-0xa3e+0xe04);else{const _0x2f8ed1=this['_findKey'](_0x1fe130,_0x2ca230);this['_left']=_0x2ca230[_0x2f8ed1],this['_right']=_0x2ca230[_0x2f8ed1+(-0x74d+0x359*-0x4+-0x6*-0x373)],this['_len']=this['_right']-this['_left'];const _0x7b799c=(-0x1d9b+-0x1*-0x1d61+0x3b)/this['_len'];this['_recip']=isFinite(_0x7b799c)?_0x7b799c:0x1a28+-0x2*0x216+-0x54*0x43,this['_p0']=_0x2f8ed1,this['_p1']=_0x2f8ed1+(0x1e*0x5e+-0x207*0x11+-0x26*-0x9e);}}}}this['_t']=this['_recip']===0x21fe+0x71*-0x57+-0x1*-0x469?0x2f*0xf+-0x9*-0x2c3+-0x49a*0x6:(_0x1fe130-this['_left'])*this['_recip'],this['_hermite']['valid']=!(0xe88+0x2*-0xa1b+0x5af);}['_findKey'](_0x1f81a8,_0x3a36d6){let _0x26cbf2=-0x21c2+-0x1073+-0x1*-0x3235;for(;_0x1f81a8>=_0x3a36d6[_0x26cbf2+(-0xfce+-0x377+-0x1*-0x1346)];)_0x26cbf2++;return _0x26cbf2;}['eval'](_0x214ea7,_0x1b8cea,_0x2b7a5d){const _0x4fcc8f=_0x2b7a5d['_data'],_0x30430a=_0x2b7a5d['_component'+'s'],_0x18693d=this['_p0']*_0x30430a;if(_0x1b8cea===iv){for(let _0x3dda66=-0x1*0xa57+-0x3*-0x4d1+-0x2*0x20e;_0x3dda66<_0x30430a;++_0x3dda66)_0x214ea7[_0x3dda66]=_0x4fcc8f[_0x18693d+_0x3dda66];}else{const _0x2aacc5=this['_t'],_0x32c94b=this['_p1']*_0x30430a;switch(_0x1b8cea){case Xf:for(let _0x4f868d=-0x1*-0x25bd+0x1c99+-0x4256;_0x4f868d<_0x30430a;++_0x4f868d)_0x214ea7[_0x4f868d]=Y['lerp'](_0x4fcc8f[_0x18693d+_0x4f868d],_0x4fcc8f[_0x32c94b+_0x4f868d],_0x2aacc5);break;case qf:{const _0x4fb6f7=this['_hermite'];if(!_0x4fb6f7['valid']){const _0x549a90=_0x2aacc5*_0x2aacc5,_0x45f1e8=_0x2aacc5+_0x2aacc5,_0x408270=0x5*0x20c+0x1297*-0x1+0x217*0x4-_0x2aacc5,_0x55c978=_0x408270*_0x408270;_0x4fb6f7['valid']=!(-0x1340+0x4*-0x676+0x2d18),_0x4fb6f7['p0']=(-0x1fc*0xd+-0x26bd*0x1+0x408a+_0x45f1e8)*_0x55c978,_0x4fb6f7['m0']=_0x2aacc5*_0x55c978,_0x4fb6f7['p1']=_0x549a90*(-0xe*-0x115+0x1*0x336+-0x1*0x1259-_0x45f1e8),_0x4fb6f7['m1']=_0x549a90*(_0x2aacc5-(-0x9d*0x2e+0x20dd+-0x253*0x2));}const _0x24ead3=(this['_p0']*(0x17*0x16a+0x20*0x116+0x43*-0x101)+(0x131*0x3+0x24*0x9+-0x2*0x26b))*_0x30430a,_0x123db9=(this['_p0']*(0x1*-0x1fd7+-0x1*-0xc5+0x6d*0x49)+(-0x23b6+0x18c3+0xff*0xb))*_0x30430a,_0x1f33d7=(this['_p1']*(0x43a*0x7+-0x1fff+0x26c)+(0x40+0x220d*-0x1+0x21ce))*_0x30430a,_0x2dd775=(this['_p1']*(0x101c*-0x2+-0x108d+0x30c8)+(-0xd13+-0xfea+0x1cfd))*_0x30430a;for(let _0x5b66bd=-0x300+0x4f*-0x6a+-0x7*-0x51a;_0x5b66bd<_0x30430a;++_0x5b66bd)_0x214ea7[_0x5b66bd]=_0x4fb6f7['p0']*_0x4fcc8f[_0x24ead3+_0x5b66bd]+_0x4fb6f7['m0']*_0x4fcc8f[_0x123db9+_0x5b66bd]*this['_len']+_0x4fb6f7['p1']*_0x4fcc8f[_0x1f33d7+_0x5b66bd]+_0x4fb6f7['m1']*_0x4fcc8f[_0x2dd775+_0x5b66bd]*this['_len'];break;}}}}}class sg{constructor(_0x4aa72a){this['_name']=_0x4aa72a['name']+'Snapshot',this['_time']=-(-0x2*-0x8cb+0x2*0xddb+-0x2d4b),this['_cache']=[],this['_results']=[];for(let _0x2a4847=-0x160a+0x8e*-0xd+0x1d40;_0x2a4847<_0x4aa72a['_inputs']['length'];++_0x2a4847)this['_cache'][_0x2a4847]=new OI();const _0x19958e=_0x4aa72a['_curves'],_0x598e83=_0x4aa72a['_outputs'];for(let _0x3d8610=-0x17c9+-0x6*-0x3e+0x1655;_0x3d8610<_0x19958e['length'];++_0x3d8610){const _0x857f09=_0x19958e[_0x3d8610],_0x297d05=_0x598e83[_0x857f09['_output']],_0x13875d=[];for(let _0xc2ef2c=0x10ca+0x29*-0x12+-0xa*0x164;_0xc2ef2c<_0x297d05['_component'+'s'];++_0xc2ef2c)_0x13875d[_0xc2ef2c]=-0x2b3*-0xc+-0x1e8b+-0xb*0x2b;this['_results'][_0x3d8610]=_0x13875d;}}}const Oo=class Oo{constructor(_0x8a4e46,_0x22facd,_0x479e72,_0x5dc81e,_0x22aec7,_0x411d51){this['_name']=_0x8a4e46['name'],this['_track']=_0x8a4e46,this['_snapshot']=new sg(_0x8a4e46),this['_playing']=_0x5dc81e,this['_time']=_0x22facd,this['_speed']=_0x479e72,this['_loop']=_0x22aec7,this['_blendWeig'+'ht']=0x1d6+0x5*0x127+-0xc*0xa2,this['_blendOrde'+'r']=0x84b+0x71*-0x56+0x1dab,this['_eventHand'+'ler']=_0x411d51,this['alignCurso'+'rToCurrent'+'Time']();}set['name'](_0x2ab2a6){this['_name']=_0x2ab2a6;}get['name'](){return this['_name'];}set['track'](_0x4cf007){this['_track']=_0x4cf007,this['_snapshot']=new sg(_0x4cf007);}get['track'](){return this['_track'];}get['snapshot'](){return this['_snapshot'];}set['time'](_0x196481){this['_time']=_0x196481,this['alignCurso'+'rToCurrent'+'Time']();}get['time'](){return this['_time'];}set['speed'](_0x185cc1){const _0x38c012=Math['sign'](_0x185cc1)!==Math['sign'](this['_speed']);this['_speed']=_0x185cc1,_0x38c012&&this['alignCurso'+'rToCurrent'+'Time']();}get['speed'](){return this['_speed'];}set['loop'](_0x1d43a7){this['_loop']=_0x1d43a7;}get['loop'](){return this['_loop'];}set['blendWeigh'+'t'](_0x2579d2){this['_blendWeig'+'ht']=_0x2579d2;}get['blendWeigh'+'t'](){return this['_blendWeig'+'ht'];}set['blendOrder'](_0x2150cb){this['_blendOrde'+'r']=_0x2150cb;}get['blendOrder'](){return this['_blendOrde'+'r'];}set['eventCurso'+'r'](_0x1f099c){this['_eventCurs'+'or']=_0x1f099c;}get['eventCurso'+'r'](){return this['_eventCurs'+'or'];}get['eventCurso'+'rEnd'](){return this['isReverse']?0x354+-0x1a38+0x16e4*0x1:this['_track']['events']['length']-(0xe03*-0x1+-0xcc*0x6+0x12cc);}get['nextEvent'](){return this['_track']['events'][this['_eventCurs'+'or']];}get['isReverse'](){return this['_speed']<-0x124c+0xf9e*-0x1+0x21ea;}['nextEventA'+'headOfTime'](_0x419a80){return this['nextEvent']?this['isReverse']?this['nextEvent']['time']<=_0x419a80:this['nextEvent']['time']>=_0x419a80:!(-0x32*-0x8c+-0x21df+-0x1*-0x688);}['nextEventB'+'ehindTime'](_0x2c22d2){return this['nextEvent']?_0x2c22d2===this['track']['duration']?this['isReverse']?this['nextEvent']['time']>=_0x2c22d2:this['nextEvent']['time']<=_0x2c22d2:this['isReverse']?this['nextEvent']['time']>_0x2c22d2:this['nextEvent']['time']<_0x2c22d2:!(0x40*0x3b+0x13c8+-0x2287);}['resetEvent'+'Cursor'](){this['_eventCurs'+'or']=this['isReverse']?this['_track']['events']['length']-(0x293+0x1dc6+-0x19e*0x14):0x1*-0x2195+-0x128*-0x16+0x825;}['moveEventC'+'ursor'](){this['_eventCurs'+'or']+=this['isReverse']?-(0x6*-0x641+0x1bf4+-0x81*-0x13):0x15a1+0xcdf*-0x2+0x3e*0x11,this['_eventCurs'+'or']>=this['track']['events']['length']?this['_eventCurs'+'or']=0x4ae*0x5+-0x1165+-0x601:this['_eventCurs'+'or']<-0x272*0x5+-0xa38+-0x2*-0xb39&&(this['_eventCurs'+'or']=this['track']['events']['length']-(0x2*0xb7a+-0x190f*-0x1+0xa*-0x4cd));}['clipFrameT'+'ime'](_0x47f5c8){const _0x5e9487=Oo['eventFrame'];_0x5e9487['start']=0x1239+0x69b+-0x18d4,_0x5e9487['end']=_0x47f5c8,_0x5e9487['residual']=-0x35a+-0x6a*-0x59+-0x2180,this['isReverse']?_0x47f5c8<-0x216a+0x1b*0xc1+0x1*0xd0f&&(_0x5e9487['start']=this['track']['duration'],_0x5e9487['end']=-0x112+0x6ff+-0x5ed,_0x5e9487['residual']=_0x47f5c8+this['track']['duration']):_0x47f5c8>this['track']['duration']&&(_0x5e9487['start']=-0x67c+0x6c*0x48+-0x2*0xbf2,_0x5e9487['end']=this['track']['duration'],_0x5e9487['residual']=_0x47f5c8-this['track']['duration']);}['alignCurso'+'rToCurrent'+'Time'](){for(this['resetEvent'+'Cursor']();this['nextEventB'+'ehindTime'](this['_time'])&&this['_eventCurs'+'or']!==this['eventCurso'+'rEnd'];)this['moveEventC'+'ursor']();}['fireNextEv'+'ent'](){this['_eventHand'+'ler']['fire'](this['nextEvent']['name'],{'track':this['track'],...this['nextEvent']}),this['moveEventC'+'ursor']();}['fireNextEv'+'entInFrame'](_0x1067a1,_0x3c70be){return this['nextEventA'+'headOfTime'](_0x1067a1)&&this['nextEventB'+'ehindTime'](_0x3c70be)?(this['fireNextEv'+'ent'](),!(0x1e37+-0x123b+-0x34*0x3b)):!(0x1feb*0x1+0x5c6+-0x25b*0x10);}['activeEven'+'tsForFrame'](_0x20f335,_0x2b8acc){const _0x3c5a81=Oo['eventFrame'];this['clipFrameT'+'ime'](_0x2b8acc);const _0x255413=this['eventCurso'+'r'];for(;this['fireNextEv'+'entInFrame'](_0x20f335,_0x3c5a81['end'])&&_0x255413!==this['eventCurso'+'r'];);this['loop']&&Math['abs'](_0x3c5a81['residual'])>0x1d41*-0x1+0x1*-0x130d+0x304e&&this['activeEven'+'tsForFrame'](_0x3c5a81['start'],_0x3c5a81['residual']);}['progressFo'+'rTime'](_0x38660f){return _0x38660f*this['_speed']/this['_track']['duration'];}['_update'](_0x1e7194){if(this['_playing']){let _0x4b82bc=this['_time'];const _0x900475=this['_track']['duration'],_0x288696=this['_speed'],_0x383a8a=this['_loop'];this['_track']['events']['length']>0x505+-0x1f*-0x23+-0x3*0x316&&_0x900475>0x1b9f+0x17*0x2b+-0x1*0x1f7c&&this['activeEven'+'tsForFrame'](_0x4b82bc,_0x4b82bc+_0x288696*_0x1e7194),_0x4b82bc+=_0x288696*_0x1e7194,_0x288696>=-0x4*-0x3bb+-0x1*0xaa5+-0x447?_0x4b82bc>_0x900475&&(_0x383a8a?_0x4b82bc=_0x4b82bc%_0x900475||-0x2fe+-0x5*0xcf+-0x1*-0x709:(_0x4b82bc=this['_track']['duration'],this['pause']())):_0x4b82bc<0x1*0xf85+0x18e*-0xb+-0x5*-0x51&&(_0x383a8a?_0x4b82bc=_0x900475+(_0x4b82bc%_0x900475||-0x71d*0x5+-0x1b44+0x3ed5):(_0x4b82bc=-0x557*0x6+0x10a3+-0x1*-0xf67,this['pause']())),this['_time']=_0x4b82bc;}this['_time']!==this['_snapshot']['_time']&&this['_track']['eval'](this['_time'],this['_snapshot']);}['play'](){this['_playing']=!(-0x1*-0x176+-0x1bf5+0x1a7f),this['_time']=0x2468+-0x1eff+-0x569;}['stop'](){this['_playing']=!(-0x471*-0x2+0x124e+0x1b2f*-0x1),this['_time']=0x3cd*0x2+-0x1614+0xe7a;}['pause'](){this['_playing']=!(-0x20f3+0x79*-0x19+-0x49*-0x9d);}['resume'](){this['_playing']=!(-0x22d8+0x1899+0xa3f);}['reset'](){this['_time']=-0x10e2+-0x21e9+0x32cb*0x1;}};h(Oo,'eventFrame',{'start':0x0,'end':0x0,'residual':0x0});let lh=Oo;const rv='NONE',FI='PREV_STATE',NI='NEXT_STATE',kI='PREV_STATE'+'_NEXT_STAT'+'E',UI='NEXT_STATE'+'_PREV_STAT'+'E',BI='GREATER_TH'+'AN',zI='LESS_THAN',VI='GREATER_TH'+'AN_EQUAL_T'+'O',GI='LESS_THAN_'+'EQUAL_TO',HI='EQUAL_TO',WI='NOT_EQUAL_'+'TO',ig='INTEGER',rg='FLOAT',ag='BOOLEAN',Dc='TRIGGER',$I='1D',XI='2D_DIRECTI'+'ONAL',qI='2D_CARTESI'+'AN',jI='DIRECT',_o='START',jf='END',Hr='ANY',ch=[_o,jf,Hr],av='OVERWRITE',YI='ADDITIVE';class Ht{static['dot'](_0x2597a6,_0x542c33){const _0xa39172=_0x2597a6['length'];let _0x5a59fb=-0x1*-0x1021+-0x12f9*-0x1+0x1*-0x231a;for(let _0x28fd42=-0x2*0xa19+-0x368*-0x3+0x9fa*0x1;_0x28fd42<_0xa39172;++_0x28fd42)_0x5a59fb+=_0x2597a6[_0x28fd42]*_0x542c33[_0x28fd42];return _0x5a59fb;}static['normalize'](_0x232fc2){let _0x14f2fc=Ht['dot'](_0x232fc2,_0x232fc2);if(_0x14f2fc>-0x61*-0x17+0x14a2+-0x1d59){_0x14f2fc=(-0x1b58+0x39d*0x7+-0x20e*-0x1)/Math['sqrt'](_0x14f2fc);const _0x58c1aa=_0x232fc2['length'];for(let _0x942075=-0x1*0x1e7+0x162b+-0x1444;_0x942075<_0x58c1aa;++_0x942075)_0x232fc2[_0x942075]*=_0x14f2fc;}}static['set'](_0x387e4d,_0x180e29,_0x300ef2){const _0x52890b=_0x387e4d['length'];if(_0x300ef2==='quaternion'){let _0x4f764c=Ht['dot'](_0x180e29,_0x180e29);_0x4f764c>0x18d4+-0x25d9*0x1+0xd05&&(_0x4f764c=(-0xd3f+0x369*0x5+0x1*-0x3cd)/Math['sqrt'](_0x4f764c));for(let _0x2bf873=0x783+-0x1ab5+0x999*0x2;_0x2bf873<_0x52890b;++_0x2bf873)_0x387e4d[_0x2bf873]=_0x180e29[_0x2bf873]*_0x4f764c;}else{for(let _0x127dea=0x2d6+0x576*0x2+-0xdc2;_0x127dea<_0x52890b;++_0x127dea)_0x387e4d[_0x127dea]=_0x180e29[_0x127dea];}}static['blendVec'](_0x45ee64,_0x14be50,_0x54666e,_0x552fa2){const _0x526b02=_0x552fa2?-0x1d89+0x2*0x1266+-0x742:-0x3a4+0xa91*0x1+-0x6ec-_0x54666e,_0x1cc611=_0x45ee64['length'];for(let _0x167428=-0x161e+-0x5e*0x25+0x11da*0x2;_0x167428<_0x1cc611;++_0x167428)_0x45ee64[_0x167428]=_0x45ee64[_0x167428]*_0x526b02+_0x14be50[_0x167428]*_0x54666e;}static['blendQuat'](_0x20b9b0,_0x8d4e7f,_0x51f5a4,_0xf33fa4){const _0x27095b=_0x20b9b0['length'],_0x12e57b=_0xf33fa4?0xa09*0x3+-0x1*-0x6da+0x5*-0x764:0xeb7+0x2573+-0x3429-_0x51f5a4;Ht['dot'](_0x20b9b0,_0x8d4e7f)<-0x8c*0x47+0x2*-0xa3+0x281a&&(_0x51f5a4=-_0x51f5a4);for(let _0x4c512f=0xd71+-0x8*-0x2ff+-0x3d*0x9d;_0x4c512f<_0x27095b;++_0x4c512f)_0x20b9b0[_0x4c512f]=_0x20b9b0[_0x4c512f]*_0x12e57b+_0x8d4e7f[_0x4c512f]*_0x51f5a4;_0xf33fa4||Ht['normalize'](_0x20b9b0);}static['blend'](_0x22a713,_0xdb9028,_0x448485,_0x18ee2b,_0x38ac2d){_0x18ee2b==='quaternion'?Ht['blendQuat'](_0x22a713,_0xdb9028,_0x448485,_0x38ac2d):Ht['blendVec'](_0x22a713,_0xdb9028,_0x448485,_0x38ac2d);}static['stableSort'](_0x19f85b,_0x51b63e){const _0x127caa=_0x19f85b['length'];for(let _0x47b3e2=0x1ddc+0x12fe+-0x4a*0xa9;_0x47b3e2<_0x127caa-(0x34b*-0x7+0x1*0x20a7+-0x999);++_0x47b3e2)for(let _0x409e46=_0x47b3e2+(-0x292*-0x7+-0x185*0x11+-0xfb*-0x8);_0x409e46<_0x127caa;++_0x409e46)if(_0x51b63e(_0x19f85b[_0x409e46],_0x19f85b[_0x47b3e2])){const _0x3d210e=_0x19f85b[_0x47b3e2];_0x19f85b[_0x47b3e2]=_0x19f85b[_0x409e46],_0x19f85b[_0x409e46]=_0x3d210e;}}}const st=class st{constructor(_0x4876de,_0x48fdab){this['_component']=_0x4876de,this['mask']=new Int8Array(_0x4876de['layers']['length']),this['weights']=new Float32Array(_0x4876de['layers']['length']),this['totalWeigh'+'t']=-0x1d07+-0x2fe*0x5+0x1*0x2bfd,this['counter']=-0x3e6*-0x6+-0x2043+0x1*0x8df,this['layerCount'+'er']=-0x1b83*0x1+-0xa*0x2e3+0x11*0x351,this['valueType']=_0x48fdab,this['dirty']=!(0x3*0xc41+0x1*-0xbf+-0xa*0x39a),this['value']=_0x48fdab===st['TYPE_QUAT']?[-0xa9f+0x4*0x2e0+-0xe1,0x1df1+0xd55*-0x1+-0x109c,0x182b+-0x1e56+0x62b,-0xe80*0x2+0x1b15+-0x29*-0xc]:[-0xa*0x3ba+-0x1f4+0x2738,0x847+0x4b1*0x2+0x89*-0x21,-0x1918+0x16b6+0x262],this['baseValue']=null,this['setter']=null;}get['_normalize'+'Weights'](){return this['_component']['normalizeW'+'eights'];}['getWeight'](_0x2e380f){return this['dirty']&&this['updateWeig'+'hts'](),this['_normalize'+'Weights']&&this['totalWeigh'+'t']===-0x1*0x1f1+-0x36*-0xc+-0x97||!this['mask'][_0x2e380f]?0x18ea+-0x26c3+-0x5*-0x2c5:this['_normalize'+'Weights']?this['weights'][_0x2e380f]/this['totalWeigh'+'t']:Y['clamp'](this['weights'][_0x2e380f],0x1*-0x1cc1+-0x33e*-0x4+0xfc9,0x6*0x1bf+-0x173a+0x1*0xcc1);}['_layerBlen'+'dType'](_0x36b312){return this['_component']['layers'][_0x36b312]['blendType'];}['setMask'](_0x4190b3,_0x5226bb){this['mask'][_0x4190b3]=_0x5226bb,this['_normalize'+'Weights']&&(this['_component']['layers'][_0x4190b3]['blendType']===av&&(this['mask']=this['mask']['fill'](-0x1f4c+0x19*0x2d+0x61*0x47,0x3*0xe4+0x1305*-0x2+0x12*0x1f7,_0x4190b3)),this['dirty']=!(-0x950+-0xeab*0x2+-0x1*-0x26a6));}['updateWeig'+'hts'](){this['totalWeigh'+'t']=-0xd7*-0x10+0x1dd5+-0x247*0x13;for(let _0x65a5f3=0x1622+0xa39*-0x1+-0x1*0xbe9;_0x65a5f3<this['weights']['length'];_0x65a5f3++)this['weights'][_0x65a5f3]=this['_component']['layers'][_0x65a5f3]['weight'],this['totalWeigh'+'t']+=this['mask'][_0x65a5f3]*this['weights'][_0x65a5f3];this['dirty']=!(0x25e1*0x1+-0x8*-0x389+-0x124*0x3a);}['updateValu'+'e'](_0x36b9f8,_0x40b177){if(this['counter']===-0x86e*0x1+-0xcea+-0x8*-0x2ab&&(Ht['set'](this['value'],st['IDENTITY_Q'+'UAT_ARR'],this['valueType']),this['_normalize'+'Weights']||Ht['blend'](this['value'],this['baseValue'],-0x64*-0x35+-0x89b+-0x12*0xac,this['valueType'])),!(!this['mask'][_0x36b9f8]||this['getWeight'](_0x36b9f8)===-0x5*-0x286+-0x11*0x32+0x7*-0x154)){if(this['_layerBlen'+'dType'](_0x36b9f8)===YI&&!this['_normalize'+'Weights']){if(this['valueType']===st['TYPE_QUAT']){const _0x229107=st['q1']['set'](this['value'][-0x2*-0x4a5+-0x25*0x7f+0x911],this['value'][-0x24d8+-0xfcb*0x2+0x446f],this['value'][-0x1b03+-0x20e1+0x3be6],this['value'][0xd*0x277+0x86f*-0x1+-0x1799]),_0x1515fc=st['q2']['set'](this['baseValue'][-0x51d*-0x3+0x2*-0xb7b+0x79f],this['baseValue'][0x808+-0x15d*0x13+0x11e0],this['baseValue'][0x1456+0x16*0x25+-0x1782],this['baseValue'][0x1612+-0xa79+-0xb96]),_0x4be3bb=st['q3']['set'](_0x40b177[-0x1600+-0x1*-0x6b2+0xf4e*0x1],_0x40b177[-0x1a20+-0x1240+0x21d*0x15],_0x40b177[-0x80c+0x6*0x287+-0x4*0x1c7],_0x40b177[0x20b9+0x1*0x1fa+-0x22b0]),_0x5a22cd=_0x1515fc['invert']()['mul'](_0x4be3bb);_0x5a22cd['slerp'](le['IDENTITY'],_0x5a22cd,this['getWeight'](_0x36b9f8)),_0x229107['mul'](_0x5a22cd),st['quatArr'][0xa*0x59+0x8e9+-0xc63]=_0x229107['x'],st['quatArr'][0x1*0x382+-0x211c+0x1d9b]=_0x229107['y'],st['quatArr'][0xc0d+0x3e*0x7d+-0x2a51]=_0x229107['z'],st['quatArr'][-0xcf2+0xfc4+-0x2cf*0x1]=_0x229107['w'],Ht['set'](this['value'],st['quatArr'],this['valueType']);}else st['vecArr'][-0x22c0*0x1+0xa54*-0x2+0x3768]=_0x40b177[0xe3b+-0xc3f+-0x1fc]-this['baseValue'][0xb13+-0x2271+0x175e],st['vecArr'][0x29d+0x230c+-0x5*0x788]=_0x40b177[-0x115*-0x5+-0xb6f+0x607*0x1]-this['baseValue'][-0x142a+-0x51*0x2b+0x21c6],st['vecArr'][-0x1b9c+0x511*-0x1+0x20af*0x1]=_0x40b177[-0x18c1*-0x1+-0x17*-0xf4+-0x397*0xd]-this['baseValue'][-0x9f*-0x7+0x2*-0x641+0x7b*0x11],Ht['blend'](this['value'],st['vecArr'],this['getWeight'](_0x36b9f8),this['valueType'],!(-0x11*0x3d+0x1*0x18f7+-0x1*0x14ea));}else Ht['blend'](this['value'],_0x40b177,this['getWeight'](_0x36b9f8),this['valueType']);this['setter']&&this['setter'](this['value']);}}['unbind'](){this['setter']&&this['setter'](this['baseValue']);}};h(st,'TYPE_QUAT','quaternion'),h(st,'TYPE_VEC3','vector3'),h(st,'q1',new le()),h(st,'q2',new le()),h(st,'q3',new le()),h(st,'quatArr',[-0x15a*-0xb+-0x1b7e+0xca0,-0x1eb1+-0x2565*-0x1+0x23c*-0x3,-0x3d*0x59+0x10e2*0x2+-0xc8f,-0x233d+0x1072+0x12cc]),h(st,'vecArr',[0x536*0x3+0x17*0x59+0x107*-0x17,-0x12*-0x10a+-0x5fa*-0x3+-0x12*0x209,0xac*0x5+0x16a6+0x1*-0x1a02]),h(st,'IDENTITY_Q'+'UAT_ARR',[0x229b+-0x28*-0xb5+-0x3ee3,0xb5*0x11+-0x1eed+0x12e8,-0xb*0x1f+0x1e61+0xd*-0x23c,-0x2*-0x92f+-0xa*-0x211+-0x2707]);let Mo=st;class nv{constructor(_0x480cad){this['_binder']=_0x480cad,this['_clips']=[],this['_inputs']=[],this['_outputs']=[],this['_targets']={};}get['clips'](){return this['_clips'];}['addClip'](_0x1dc8fc){const _0x1242ac=this['_targets'],_0x494aab=this['_binder'],_0x2b9e20=_0x1dc8fc['track']['curves'],_0x460c4b=_0x1dc8fc['snapshot'],_0x563832=[],_0x280550=[];for(let _0xfe6e57=0x909+-0x24*0x59+0x1b*0x21;_0xfe6e57<_0x2b9e20['length'];++_0xfe6e57){const _0x45bc33=_0x2b9e20[_0xfe6e57]['paths'];for(let _0x18eef2=-0x6b6+0x27*0x47+0x1*-0x41b;_0x18eef2<_0x45bc33['length'];++_0x18eef2){const _0x547db9=_0x45bc33[_0x18eef2],_0x7e2db4=_0x494aab['resolve'](_0x547db9);let _0x50c779=_0x1242ac[_0x7e2db4&&_0x7e2db4['targetPath']||null];if(!_0x50c779&&_0x7e2db4){_0x50c779={'target':_0x7e2db4,'value':[],'curves':0x0,'blendCounter':0x0};for(let _0x2f53ad=0x21*0x31+-0x742+0xf1;_0x2f53ad<_0x50c779['target']['components'];++_0x2f53ad)_0x50c779['value']['push'](0x1*-0x1127+0x11*0x141+-0x52*0xd);if(_0x1242ac[_0x7e2db4['targetPath']]=_0x50c779,_0x494aab['animCompon'+'ent']){if(!_0x494aab['animCompon'+'ent']['targets'][_0x7e2db4['targetPath']]){let _0x586729;_0x7e2db4['targetPath']['substring'](_0x7e2db4['targetPath']['length']-(-0x365+-0x1*0x481+0x7f3))==='localRotat'+'ion'?_0x586729=Mo['TYPE_QUAT']:_0x586729=Mo['TYPE_VEC3'],_0x494aab['animCompon'+'ent']['targets'][_0x7e2db4['targetPath']]=new Mo(_0x494aab['animCompon'+'ent'],_0x586729);}_0x494aab['animCompon'+'ent']['targets'][_0x7e2db4['targetPath']]['layerCount'+'er']++,_0x494aab['animCompon'+'ent']['targets'][_0x7e2db4['targetPath']]['setMask'](_0x494aab['layerIndex'],0x1*-0x1f8e+-0x1ade+0x3a6d*0x1);}}_0x50c779&&(_0x50c779['curves']++,_0x563832['push'](_0x460c4b['_results'][_0xfe6e57]),_0x280550['push'](_0x50c779));}}this['_clips']['push'](_0x1dc8fc),this['_inputs']['push'](_0x563832),this['_outputs']['push'](_0x280550);}['removeClip'](_0x7e3e68){const _0x584762=this['_targets'],_0x12bdad=this['_binder'],_0x5dad87=this['_clips'],_0x5abb83=_0x5dad87[_0x7e3e68]['track']['curves'];for(let _0x159a08=0x9*0x27c+0xffa+-0x2656;_0x159a08<_0x5abb83['length'];++_0x159a08){const _0x42c17c=_0x5abb83[_0x159a08]['paths'];for(let _0x58b65e=0x1d1f+-0x1941+0x9*-0x6e;_0x58b65e<_0x42c17c['length'];++_0x58b65e){const _0x3bb810=_0x42c17c[_0x58b65e],_0x35d128=this['_binder']['resolve'](_0x3bb810);_0x35d128&&(_0x35d128['curves']--,_0x35d128['curves']===-0x3d7*-0x3+-0x1*-0xf4f+0xd6a*-0x2&&(_0x12bdad['unresolve'](_0x3bb810),delete _0x584762[_0x35d128['targetPath']],_0x12bdad['animCompon'+'ent']&&_0x12bdad['animCompon'+'ent']['targets'][_0x35d128['targetPath']]['layerCount'+'er']--));}}_0x5dad87['splice'](_0x7e3e68,-0x5e*0x56+0x1*0xab2+0x14e3),this['_inputs']['splice'](_0x7e3e68,0x141f*-0x1+0x794+0xc8c),this['_outputs']['splice'](_0x7e3e68,0xc12+0xff0+-0x1*0x1c01);}['removeClip'+'s'](){for(;this['_clips']['length']>0x266*0xc+-0x2160+0x498;)this['removeClip'](0x19c0+-0x336*-0x4+-0x2698);}['updateClip'+'Track'](_0x4db752,_0x3d1b3d){this['_clips']['forEach'](_0x26210f=>{_0x26210f['name']['includes'](_0x4db752)&&(_0x26210f['track']=_0x3d1b3d);}),this['rebind']();}['findClip'](_0x130b57){const _0x2ce578=this['_clips'];for(let _0x3c2580=-0xdf3+-0x2425+0x3218;_0x3c2580<_0x2ce578['length'];++_0x3c2580){const _0x515bff=_0x2ce578[_0x3c2580];if(_0x515bff['name']===_0x130b57)return _0x515bff;}return null;}['rebind'](){this['_binder']['rebind'](),this['_targets']={};const _0xa63df0=[...this['clips']];this['removeClip'+'s'](),_0xa63df0['forEach'](_0x5f4ca5=>{this['addClip'](_0x5f4ca5);});}['assignMask'](_0x36fe9d){return this['_binder']['assignMask'](_0x36fe9d);}['update'](_0x587618,_0x1ca435=!(0x1f*-0x8d+0x7f4+0x1*0x91f)){const _0xfb895=this['_clips'],_0x5d9505=_0xfb895['map']((_0x9ffa82,_0x4aca14)=>_0x4aca14);Ht['stableSort'](_0x5d9505,(_0x59ac48,_0x350fca)=>_0xfb895[_0x59ac48]['blendOrder']<_0xfb895[_0x350fca]['blendOrder']);for(let _0x5c6e13=0xd23+-0x9d*0x3+-0xb4c;_0x5c6e13<_0x5d9505['length'];++_0x5c6e13){const _0x6304a6=_0x5d9505[_0x5c6e13],_0x468baa=_0xfb895[_0x6304a6],_0x3b481b=this['_inputs'][_0x6304a6],_0x441934=this['_outputs'][_0x6304a6],_0x119586=_0x468baa['blendWeigh'+'t'];if(_0x119586>-0x1e7+-0xb21+0xd08&&_0x468baa['_update'](_0x587618),!_0x1ca435)break;let _0x456d1e,_0x44c4d2,_0x2a0764;if(_0x119586>=0xb46+0x1a2c+0x9*-0x429){for(let _0x373bc4=-0xe*0x61+0x11fc+-0xcae;_0x373bc4<_0x3b481b['length'];++_0x373bc4)_0x456d1e=_0x3b481b[_0x373bc4],_0x44c4d2=_0x441934[_0x373bc4],_0x2a0764=_0x44c4d2['value'],Ht['set'](_0x2a0764,_0x456d1e,_0x44c4d2['target']['type']),_0x44c4d2['blendCount'+'er']++;}else{if(_0x119586>-0x599*-0x1+0x3*0x930+0x2129*-0x1){for(let _0x4cf242=-0x1288+0x1420+0xcc*-0x2;_0x4cf242<_0x3b481b['length'];++_0x4cf242)_0x456d1e=_0x3b481b[_0x4cf242],_0x44c4d2=_0x441934[_0x4cf242],_0x2a0764=_0x44c4d2['value'],_0x44c4d2['blendCount'+'er']===0x69c+0x63b+-0xcd7?Ht['set'](_0x2a0764,_0x456d1e,_0x44c4d2['target']['type']):Ht['blend'](_0x2a0764,_0x456d1e,_0x119586,_0x44c4d2['target']['type']),_0x44c4d2['blendCount'+'er']++;}}}const _0xfd7f26=this['_targets'],_0x1c7c86=this['_binder'];for(const _0x94bf8f in _0xfd7f26)if(_0xfd7f26['hasOwnProp'+'erty'](_0x94bf8f)){const _0x1d95af=_0xfd7f26[_0x94bf8f];if(_0x1c7c86['animCompon'+'ent']&&_0x1d95af['target']['isTransfor'+'m']){const _0x1a4d63=_0x1c7c86['animCompon'+'ent']['targets'][_0x94bf8f];_0x1a4d63['counter']===_0x1a4d63['layerCount'+'er']&&(_0x1a4d63['counter']=0x264f+-0x390+-0x6f3*0x5),_0x1a4d63['path']||(_0x1a4d63['path']=_0x94bf8f,_0x1a4d63['baseValue']=_0x1d95af['target']['get'](),_0x1a4d63['setter']=_0x1d95af['target']['set']),_0x1a4d63['updateValu'+'e'](_0x1c7c86['layerIndex'],_0x1d95af['value']),_0x1a4d63['counter']++;}else _0x1d95af['target']['set'](_0x1d95af['value']);_0x1d95af['blendCount'+'er']=-0x463+-0x15*-0x199+-0x1d2a;}this['_binder']['update'](_0x587618);}}class ov{constructor(_0x52faef){this['_events']=[..._0x52faef],this['_events']['sort']((_0x4e7429,_0x190749)=>_0x4e7429['time']-_0x190749['time']);}get['events'](){return this['_events'];}}const wh=class wh{constructor(_0x25ec85,_0x1e501d,_0x166738,_0x6e2fec,_0x51588a,_0x1b3ada=new ov([])){this['_name']=_0x25ec85,this['_duration']=_0x1e501d,this['_inputs']=_0x166738,this['_outputs']=_0x6e2fec,this['_curves']=_0x51588a,this['_animEvent'+'s']=_0x1b3ada;}get['name'](){return this['_name'];}get['duration'](){return this['_duration'];}get['inputs'](){return this['_inputs'];}get['outputs'](){return this['_outputs'];}get['curves'](){return this['_curves'];}set['events'](_0x25a123){this['_animEvent'+'s']=_0x25a123;}get['events'](){return this['_animEvent'+'s']['events'];}['eval'](_0x4dc440,_0xf59509){_0xf59509['_time']=_0x4dc440;const _0x227eae=this['_inputs'],_0x3b5b5f=this['_outputs'],_0x49167d=this['_curves'],_0x457e83=_0xf59509['_cache'],_0x318cdf=_0xf59509['_results'];for(let _0x918412=-0x18*-0xc+0x1b67+0x1*-0x1c87;_0x918412<_0x227eae['length'];++_0x918412)_0x457e83[_0x918412]['update'](_0x4dc440,_0x227eae[_0x918412]['_data']);for(let _0x589e7d=-0x5*0x76c+0x40c+0x2110;_0x589e7d<_0x49167d['length'];++_0x589e7d){const _0x1afe51=_0x49167d[_0x589e7d],_0x49c926=_0x3b5b5f[_0x1afe51['_output']],_0x33a610=_0x318cdf[_0x589e7d];_0x457e83[_0x1afe51['_input']]['eval'](_0x33a610,_0x1afe51['_interpola'+'tion'],_0x49c926);}}};h(wh,'EMPTY',Object['freeze'](new wh('empty',Number['MAX_VALUE'],[],[],[])));let Zi=wh;class Jr{static['joinPath'](_0x212168,_0x254eb4){_0x254eb4=_0x254eb4||'.';const _0x366d39=function(_0x3d6f78){return _0x3d6f78['replace'](/\\/g,'\x5c\x5c')['replace'](new RegExp('\x5c'+_0x254eb4,'g'),'\x5c'+_0x254eb4);};return _0x212168['map'](_0x366d39)['join'](_0x254eb4);}static['splitPath'](_0x2abef9,_0x1823f0){_0x1823f0=_0x1823f0||'.';const _0x31c2fa=[];let _0x201c67='',_0x4c8e41=0xee4+-0x1bbf*-0x1+0x887*-0x5;for(;_0x4c8e41<_0x2abef9['length'];){let _0x1463eb=_0x2abef9[_0x4c8e41++];_0x1463eb==='\x5c'&&_0x4c8e41<_0x2abef9['length']?(_0x1463eb=_0x2abef9[_0x4c8e41++],_0x1463eb==='\x5c'||_0x1463eb===_0x1823f0?_0x201c67+=_0x1463eb:_0x201c67+='\x5c'+_0x1463eb):_0x1463eb===_0x1823f0?(_0x31c2fa['push'](_0x201c67),_0x201c67=''):_0x201c67+=_0x1463eb;}return _0x201c67['length']>0x1*0x395+-0x9d*-0x29+-0x1*0x1cba&&_0x31c2fa['push'](_0x201c67),_0x31c2fa;}static['encode'](_0x49e8bd,_0x195a18,_0xf7f27e){return(Array['isArray'](_0x49e8bd)?_0x49e8bd['join']('/'):_0x49e8bd)+'/'+_0x195a18+'/'+(Array['isArray'](_0xf7f27e)?_0xf7f27e['join']('/'):_0xf7f27e);}['resolve'](_0x4e0aeb){return null;}['unresolve'](_0x23e667){}['update'](_0x461850){}}class Yf{constructor(_0x2b2630,_0x3d67b9,_0x453f60,_0x315a07){_0x2b2630['set']?(this['_set']=_0x2b2630['set'],this['_get']=_0x2b2630['get']):this['_set']=_0x2b2630,this['_type']=_0x3d67b9,this['_component'+'s']=_0x453f60,this['_targetPat'+'h']=_0x315a07,this['_isTransfo'+'rm']=this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0x4*0x295+0xb9c+-0x13b))==='localRotat'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x767*-0x1+0x17a+-0x5a*-0x11))==='localPosit'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x14eb+-0x586+-0xf5b))==='localScale';}get['set'](){return this['_set'];}get['get'](){return this['_get'];}get['type'](){return this['_type'];}get['components'](){return this['_component'+'s'];}get['targetPath'](){return this['_targetPat'+'h'];}get['isTransfor'+'m'](){return this['_isTransfo'+'rm'];}}class pr{constructor(_0x4e3599){h(this,'_isPathInM'+'ask',(_0x45f01a,_0x2e5409)=>{const _0x3ee6f1=this['_mask'][_0x45f01a];if(_0x3ee6f1){if(_0x3ee6f1['children']||_0x2e5409&&_0x3ee6f1['value']!==!(-0x653+0x1c55*0x1+0x2b*-0x83))return!(-0x6bd+-0x1da+0x1*0x897);}else return!(-0x1179+-0x22f*-0x3+0xaed);return!(0x1*-0x3fe+-0x492+0x891*0x1);});if(this['graph']=_0x4e3599,!_0x4e3599)return;this['_mask']=null;const _0x22e4ca={},_0x11b842=function(_0x20db78){_0x22e4ca[_0x20db78['name']]=_0x20db78;for(let _0x2a9b54=-0xe9a+-0x1f*-0xdf+-0xc67;_0x2a9b54<_0x20db78['children']['length'];++_0x2a9b54)_0x11b842(_0x20db78['children'][_0x2a9b54]);};_0x11b842(_0x4e3599),this['nodes']=_0x22e4ca,this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={};const _0x1e1439=function(_0x3b19e1){let _0x4e1659=_0x3b19e1;for(;_0x4e1659&&!(_0x4e1659 instanceof lt);)_0x4e1659=_0x4e1659['parent'];let _0x3d6b4c;return _0x4e1659&&(_0x4e1659['render']?_0x3d6b4c=_0x4e1659['render']['meshInstan'+'ces']:_0x4e1659['model']&&(_0x3d6b4c=_0x4e1659['model']['meshInstan'+'ces'])),_0x3d6b4c;};this['nodeCounts']={},this['activeNode'+'s']=[],this['handlers']={'localPosition':function(_0x2b716f){const _0x10a44e=_0x2b716f['localPosit'+'ion'],_0x36954b=function(_0x66ff21){_0x10a44e['set'](..._0x66ff21);};return pr['createAnim'+'Target'](_0x36954b,'vector',-0x1*-0xe6f+0x2369*-0x1+0x14fd,_0x2b716f,'localPosit'+'ion');},'localRotation':function(_0x15b32d){const _0x34051c=_0x15b32d['localRotat'+'ion'],_0xce1ac8=function(_0x2be1c5){_0x34051c['set'](..._0x2be1c5);};return pr['createAnim'+'Target'](_0xce1ac8,'quaternion',-0x681+0xb*-0x332+-0x1*-0x29ab,_0x15b32d,'localRotat'+'ion');},'localScale':function(_0x4aab6f){const _0xc4684a=_0x4aab6f['localScale'],_0x51df76=function(_0xaff70d){_0xc4684a['set'](..._0xaff70d);};return pr['createAnim'+'Target'](_0x51df76,'vector',-0x21*0x10b+-0x1d*-0xf4+0x6ca,_0x4aab6f,'localScale');},'weight':function(_0x1bad75,_0x3b2ff0){_0x3b2ff0['indexOf']('name.')===-0x1*0x1613+-0x267c+0x3c8f?_0x3b2ff0=_0x3b2ff0['replace']('name.',''):_0x3b2ff0=Number(_0x3b2ff0);const _0x5d05cc=_0x1e1439(_0x1bad75);let _0xc9dffc;if(_0x5d05cc){for(let _0x5a3743=0x39f*0x3+-0x15+0x28*-0x45;_0x5a3743<_0x5d05cc['length'];++_0x5a3743)if(_0x5d05cc[_0x5a3743]['node']['name']===_0x1bad75['name']&&_0x5d05cc[_0x5a3743]['morphInsta'+'nce']){const _0x1a6bc5=_0x5d05cc[_0x5a3743]['morphInsta'+'nce'],_0x4dfc31=_0x1a310d=>{_0x1a6bc5['setWeight'](_0x3b2ff0,_0x1a310d[-0x662+0x16*0x1a6+-0x1de2]);};_0xc9dffc||(_0xc9dffc=[]),_0xc9dffc['push'](_0x4dfc31);}}if(_0xc9dffc){const _0xb631b2=_0x37e133=>{for(let _0x288bd2=-0x1168+0x1752+0x2f5*-0x2;_0x288bd2<_0xc9dffc['length'];++_0x288bd2)_0xc9dffc[_0x288bd2](_0x37e133);};return pr['createAnim'+'Target'](_0xb631b2,'number',-0x112*-0xe+-0x5*-0x482+-0x2585,_0x1bad75,'weight.'+_0x3b2ff0);}return null;},'materialTexture':(_0x39262a,_0x58a683)=>{const _0x481a3f=_0x1e1439(_0x39262a);if(_0x481a3f){let _0x29449a;for(let _0x3d3001=-0xa52+0x383*0x4+-0x3ba;_0x3d3001<_0x481a3f['length'];++_0x3d3001)if(_0x481a3f[_0x3d3001]['node']['name']===_0x39262a['name']){_0x29449a=_0x481a3f[_0x3d3001];break;}if(_0x29449a){const _0x153932=_0xd31dc8=>{const _0x41c531=this['animCompon'+'ent']['system']['app']['assets']['get'](_0xd31dc8[0xf97+-0x1220+-0xb*-0x3b]);_0x41c531&&_0x41c531['resource']&&_0x41c531['type']==='texture'&&(_0x29449a['material'][_0x58a683]=_0x41c531['resource'],_0x29449a['material']['update']());};return pr['createAnim'+'Target'](_0x153932,'vector',0x46*0x1+0x7e8*0x1+-0x7*0x12b,_0x39262a,'materialTe'+'xture','material');}}return null;}};}['_isPathAct'+'ive'](_0x42dd8a){if(!this['_mask'])return!(0x1*0x22f9+-0x2247+0xb2*-0x1);const _0x3078a0=[_0x42dd8a['entityPath'][0x1b93+0x7f*-0x49+-0x1c*-0x4f],this['graph']['name']];for(let _0x3605d9=0xab+0x3c7*0x7+-0x1b1c;_0x3605d9<_0x3078a0['length'];++_0x3605d9){let _0x485402=_0x3078a0[_0x3605d9];if(this['_isPathInM'+'ask'](_0x485402,_0x42dd8a['entityPath']['length']===-0x787+0x14eb+-0xd63))return!(0x1a1c+-0x2484+0xa68);for(let _0x34416e=-0x1ca8+-0xe*-0x1c4+-0x1*-0x3f1;_0x34416e<_0x42dd8a['entityPath']['length'];_0x34416e++)if(_0x485402+='/'+_0x42dd8a['entityPath'][_0x34416e],this['_isPathInM'+'ask'](_0x485402,_0x34416e===_0x42dd8a['entityPath']['length']-(-0x251+-0x220f+0x2461*0x1)))return!(-0x1*-0x1cc9+-0xd8*-0xf+-0x2971);}return!(-0x7*-0x587+0x2584*-0x1+-0x12c);}['findNode'](_0x569cbb){if(!this['_isPathAct'+'ive'](_0x569cbb))return null;let _0x5af12e;if(this['graph']&&(_0x5af12e=this['graph']['findByPath'](_0x569cbb['entityPath']),_0x5af12e||(_0x5af12e=this['graph']['findByPath'](_0x569cbb['entityPath']['slice'](0x133+-0x122b*0x1+0x10f9)))),!_0x5af12e){_0x5af12e=this['nodes'][_0x569cbb['entityPath'][_0x569cbb['entityPath']['length']-(0x78+-0x2667+0x25f0)]||''];const _0x5d20c8=Jr['encode'](_0x569cbb['entityPath'][_0x569cbb['entityPath']['length']-(0x5ce*-0x3+0x14b7*0x1+-0x34c)]||'','graph',_0x569cbb['propertyPa'+'th']);this['visitedFal'+'lbackGraph'+'Paths'][_0x5d20c8]===-0x1c83+-0xa38+0x86*0x4a&&w['warnOnce']('Anim\x20Binde'+'r:\x20Multipl'+'e\x20animatio'+'n\x20curves\x20w'+'ith\x20the\x20pa'+'th\x20'+_0x5d20c8+('\x20are\x20prese'+'nt\x20in\x20the\x20')+this['graph']['path']+('\x20graph\x20whi'+'ch\x20may\x20res'+'ult\x20in\x20the'+'\x20incorrect'+'\x20binding\x20o'+'f\x20animatio'+'ns')),Number['isFinite'](this['visitedFal'+'lbackGraph'+'Paths'][_0x5d20c8])?this['visitedFal'+'lbackGraph'+'Paths'][_0x5d20c8]++:this['visitedFal'+'lbackGraph'+'Paths'][_0x5d20c8]=0xa52+0x1cd1+0x2723*-0x1;}return _0x5af12e;}static['createAnim'+'Target'](_0x1b8b14,_0x5793ef,_0x5bf617,_0xb9dfbc,_0x5d99d8,_0x219483){const _0x247af2=Jr['encode'](_0xb9dfbc['path'],_0x219483||'entity',_0x5d99d8);return new Yf(_0x1b8b14,_0x5793ef,_0x5bf617,_0x247af2);}['resolve'](_0x4e4ae0){const _0x3bc6d7=Jr['encode'](_0x4e4ae0['entityPath'],_0x4e4ae0['component'],_0x4e4ae0['propertyPa'+'th']);let _0x4c5e10=this['targetCach'+'e'][_0x3bc6d7];if(_0x4c5e10)return _0x4c5e10;const _0x2f377b=this['findNode'](_0x4e4ae0);if(!_0x2f377b)return null;const _0x38fe3b=this['handlers'][_0x4e4ae0['propertyPa'+'th']];return!_0x38fe3b||(_0x4c5e10=_0x38fe3b(_0x2f377b),!_0x4c5e10)?null:(this['targetCach'+'e'][_0x3bc6d7]=_0x4c5e10,this['nodeCounts'][_0x2f377b['path']]?this['nodeCounts'][_0x2f377b['path']]++:(this['activeNode'+'s']['push'](_0x2f377b),this['nodeCounts'][_0x2f377b['path']]=-0x1*-0x14de+-0x7f8+-0xce5),_0x4c5e10);}['unresolve'](_0x4e3692){if(_0x4e3692['component']!=='graph')return;const _0x5a48bd=this['nodes'][_0x4e3692['entityPath'][_0x4e3692['entityPath']['length']-(-0xfd+-0x677*0x1+0x775)]||''];if(this['nodeCounts'][_0x5a48bd['path']]--,this['nodeCounts'][_0x5a48bd['path']]===-0x1*0x2+0x188f+-0x188d){const _0x191732=this['activeNode'+'s'],_0x3233e3=_0x191732['indexOf'](_0x5a48bd['node']),_0x36481e=_0x191732['length'];_0x3233e3<_0x36481e-(0x4e6+-0xf94*-0x1+0x1*-0x1479)&&(_0x191732[_0x3233e3]=_0x191732[_0x36481e-(0xe2d*0x2+-0xb3*0x7+-0x1774)]),_0x191732['pop']();}}['update'](_0x26e556){const _0x40577c=this['activeNode'+'s'];for(let _0x1b3847=-0x9*-0x44f+-0x1*-0x1bf+-0x2886;_0x1b3847<_0x40577c['length'];++_0x1b3847)_0x40577c[_0x1b3847]['_dirtifyLo'+'cal']();}['assignMask'](_0x6fbaa3){return _0x6fbaa3!==this['_mask']?(this['_mask']=_0x6fbaa3,!(-0x9*-0x3d6+0xb58+-0x7a5*0x6)):!(0x11ad+0x11*0x189+-0x2bc5);}}class lv extends we{constructor(){super(...arguments),h(this,'_animation'+'s',{}),h(this,'_assets',[]),h(this,'_loop',!(-0x60*-0x16+-0x194c+0x110c)),h(this,'animEvalua'+'tor',null),h(this,'model',null),h(this,'skeleton',null),h(this,'fromSkel',null),h(this,'toSkel',null),h(this,'animations'+'Index',{}),h(this,'prevAnim',null),h(this,'currAnim',null),h(this,'blend',0x21b3+-0x2259+0x1*0xa6),h(this,'blending',!(-0x46d*0x7+0x6a1+0x185b)),h(this,'blendSpeed',-0xc52+0x7*-0xbf+-0x1f3*-0x9),h(this,'activate',!(-0x1aad+-0x13d8+-0x2e85*-0x1)),h(this,'speed',-0x22bd+0xd3*0x3+0x1*0x2045);}set['animations'](_0x104911){this['_animation'+'s']=_0x104911,this['onSetAnima'+'tions']();}get['animations'](){return this['_animation'+'s'];}set['assets'](_0x4db874){const _0x52c27a=this['_assets'];if(_0x52c27a&&_0x52c27a['length']){for(let _0x599252=-0x2*-0xc61+-0x1*0x7ab+-0x1117;_0x599252<_0x52c27a['length'];_0x599252++)if(_0x52c27a[_0x599252]){const _0x5ebb83=this['system']['app']['assets']['get'](_0x52c27a[_0x599252]);if(_0x5ebb83){_0x5ebb83['off']('change',this['onAssetCha'+'nged'],this),_0x5ebb83['off']('remove',this['onAssetRem'+'oved'],this);const _0x571f10=this['animations'+'Index'][_0x5ebb83['id']];this['currAnim']===_0x571f10&&this['_stopCurre'+'ntAnimatio'+'n'](),delete this['animations'][_0x571f10],delete this['animations'+'Index'][_0x5ebb83['id']];}}}this['_assets']=_0x4db874;const _0x1da4b7=_0x4db874['map'](_0x3875c1=>_0x3875c1 instanceof pe?_0x3875c1['id']:_0x3875c1);this['loadAnimat'+'ionAssets'](_0x1da4b7);}get['assets'](){return this['_assets'];}set['currentTim'+'e'](_0x12bac1){if(this['skeleton']&&(this['skeleton']['currentTim'+'e']=_0x12bac1,this['skeleton']['addTime'](-0x2066+0x1c7c+0xa7*0x6),this['skeleton']['updateGrap'+'h']()),this['animEvalua'+'tor']){const _0x2e749a=this['animEvalua'+'tor']['clips'];for(let _0x277034=0x21d7+0x7*0x585+-0x243d*0x2;_0x277034<_0x2e749a['length'];++_0x277034)_0x2e749a[_0x277034]['time']=_0x12bac1;}}get['currentTim'+'e'](){if(this['skeleton'])return this['skeleton']['_time'];if(this['animEvalua'+'tor']){const _0x4eeb58=this['animEvalua'+'tor']['clips'];if(_0x4eeb58['length']>0x23d8+-0x43e+-0x652*0x5)return _0x4eeb58[_0x4eeb58['length']-(0xd39+0x24e1+-0x3219)]['time'];}return 0xb69*-0x3+-0x17*0x179+0x441a;}get['duration'](){return this['currAnim']?this['animations'][this['currAnim']]['duration']:(w['warn']('No\x20animati'+'on\x20is\x20play'+'ing\x20to\x20get'+'\x20a\x20duratio'+'n.\x20Returni'+'ng\x200.'),-0x1260+0x1c9*-0x11+0x30b9);}set['loop'](_0x150c26){if(this['_loop']=_0x150c26,this['skeleton']&&(this['skeleton']['looping']=_0x150c26),this['animEvalua'+'tor']){for(let _0x568c54=-0x12a1+-0x54a+0x17eb*0x1;_0x568c54<this['animEvalua'+'tor']['clips']['length'];++_0x568c54)this['animEvalua'+'tor']['clips'][_0x568c54]['loop']=_0x150c26;}}get['loop'](){return this['_loop'];}['play'](_0x365354,_0x27d460=-0x1d3d+0x61a+0x1723){if(!(!this['enabled']||!this['entity']['enabled'])){if(!this['animations'][_0x365354]){w['error']('Trying\x20to\x20'+'play\x20anima'+'tion\x20\x27'+_0x365354+('\x27\x20which\x20do'+'esn\x27t\x20exis'+'t'));return;}if(this['prevAnim']=this['currAnim'],this['currAnim']=_0x365354,this['model']){!this['skeleton']&&!this['animEvalua'+'tor']&&this['_createAni'+'mationCont'+'roller']();const _0x4bc1bc=this['animations'][this['prevAnim']],_0x40da32=this['animations'][this['currAnim']];if(this['blending']=_0x27d460>0x5dd+0xfd3+-0x15b0&&!!this['prevAnim'],this['blending']&&(this['blend']=-0x12bc+-0x2*-0x7d8+0x30c,this['blendSpeed']=(0x57b*-0x3+0x227*-0x10+0x32e2)/_0x27d460),this['skeleton']&&(this['blending']?(this['fromSkel']['animation']=_0x4bc1bc,this['fromSkel']['addTime'](this['skeleton']['_time']),this['toSkel']['animation']=_0x40da32):this['skeleton']['animation']=_0x40da32),this['animEvalua'+'tor']){const _0x28234e=this['animEvalua'+'tor'];if(this['blending']){for(;_0x28234e['clips']['length']>0x28d*-0x1+0xd*0x28a+0x4*-0x79d;)_0x28234e['removeClip'](-0x1813+-0x1*0x15ee+0x2e01);}else this['animEvalua'+'tor']['removeClip'+'s']();const _0x1a3335=new lh(this['animations'][this['currAnim']],-0x12*-0xf+-0x1*0x1dd+0x3*0x45,0x15d5+0x2*-0xf92+0x12a*0x8,!(0x20d3+-0x1f7e+-0x155),this['loop']);_0x1a3335['name']=this['currAnim'],_0x1a3335['blendWeigh'+'t']=this['blending']?0x14ee+0x20a8+-0x3596:-0x1283+0xdd*-0x1+0x1361,_0x1a3335['reset'](),this['animEvalua'+'tor']['addClip'](_0x1a3335);}}this['playing']=!(-0x1962+0x1e8*0x11+0x1d*-0x3e);}}['getAnimati'+'on'](_0x217f3d){return this['animations'][_0x217f3d];}['setModel'](_0x3e342f){_0x3e342f!==this['model']&&(this['_resetAnim'+'ationContr'+'oller'](),this['model']=_0x3e342f,this['animations']&&this['currAnim']&&this['animations'][this['currAnim']]&&this['play'](this['currAnim']));}['onSetAnima'+'tions'](){const _0x3edfd4=this['entity']['model'];if(_0x3edfd4){const _0x12618e=_0x3edfd4['model'];_0x12618e&&_0x12618e!==this['model']&&this['setModel'](_0x12618e);}if(!this['currAnim']&&this['activate']&&this['enabled']&&this['entity']['enabled']){const _0x20c1b6=Object['keys'](this['_animation'+'s']);_0x20c1b6['length']>-0x252f+0xdcf+0x1760&&this['play'](_0x20c1b6[-0x3*-0xc91+-0x5f*-0x47+0x2*-0x2006]);}}['_resetAnim'+'ationContr'+'oller'](){this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['_createAni'+'mationCont'+'roller'](){const _0x32ec88=this['model'],_0x5255ca=this['animations'];let _0x4fd2da=!(0x97*0xf+0x93c*0x4+-0x2dc8),_0x31a98a=!(-0x1df9+0x2*-0x5fb+0x4*0xa7c);for(const _0xf6bf17 in _0x5255ca)_0x5255ca['hasOwnProp'+'erty'](_0xf6bf17)&&(_0x5255ca[_0xf6bf17]['constructo'+'r']===Zi?_0x31a98a=!(-0x396+0x1f7*-0xd+0x1d21):_0x4fd2da=!(0x10b2+0x1762+-0x2814));const _0xcc2a4e=_0x32ec88['getGraph']();_0x4fd2da?(this['fromSkel']=new Yd(_0xcc2a4e),this['toSkel']=new Yd(_0xcc2a4e),this['skeleton']=new Yd(_0xcc2a4e),this['skeleton']['looping']=this['loop'],this['skeleton']['setGraph'](_0xcc2a4e)):_0x31a98a&&(this['animEvalua'+'tor']=new nv(new pr(this['entity'])));}['loadAnimat'+'ionAssets'](_0xf91434){if(!_0xf91434||!_0xf91434['length'])return;const _0x2ab3d6=this['system']['app']['assets'],_0x3904be=_0x22187e=>{if(_0x22187e['resources']['length']>-0x34*0xd+0x23e3+-0x213e){for(let _0x2ac034=-0x41*0x3a+0x103d*0x2+0x8e0*-0x2;_0x2ac034<_0x22187e['resources']['length'];_0x2ac034++)this['animations'][_0x22187e['resources'][_0x2ac034]['name']]=_0x22187e['resources'][_0x2ac034],this['animations'+'Index'][_0x22187e['id']]=_0x22187e['resources'][_0x2ac034]['name'];}else this['animations'][_0x22187e['name']]=_0x22187e['resource'],this['animations'+'Index'][_0x22187e['id']]=_0x22187e['name'];this['animations']=this['animations'];},_0x2e225e=_0x7b107f=>{_0x7b107f['off']('change',this['onAssetCha'+'nged'],this),_0x7b107f['on']('change',this['onAssetCha'+'nged'],this),_0x7b107f['off']('remove',this['onAssetRem'+'oved'],this),_0x7b107f['on']('remove',this['onAssetRem'+'oved'],this),_0x7b107f['resource']?_0x3904be(_0x7b107f):(_0x7b107f['once']('load',_0x3904be,this),this['enabled']&&this['entity']['enabled']&&_0x2ab3d6['load'](_0x7b107f));};for(let _0x5f469d=0x1f9d+0x1*-0x21+-0x26c*0xd,_0xca9616=_0xf91434['length'];_0x5f469d<_0xca9616;_0x5f469d++){const _0x3128be=_0x2ab3d6['get'](_0xf91434[_0x5f469d]);_0x3128be?_0x2e225e(_0x3128be):_0x2ab3d6['on']('add:'+_0xf91434[_0x5f469d],_0x2e225e);}}['onAssetCha'+'nged'](_0x2642b5,_0x2e722d,_0x280a54,_0x49b17c){if(_0x2e722d==='resource'||_0x2e722d==='resources'){if(_0x2e722d==='resources'&&_0x280a54&&_0x280a54['length']===-0x85b*-0x4+-0x145*0x5+-0x1b13&&(_0x280a54=null),_0x280a54){let _0x590dce=!(0x311*-0x3+0x1*-0xcd5+0x1609);if(_0x280a54['length']>0x4*-0x486+-0xa*0x231+0x2803){if(_0x49b17c&&_0x49b17c['length']>-0x1*0x1ddb+-0x394+0x8*0x42e){for(let _0xabe6e9=0xd25+0x1*-0xd7c+0x57;_0xabe6e9<_0x49b17c['length'];_0xabe6e9++)delete this['animations'][_0x49b17c[_0xabe6e9]['name']];}else delete this['animations'][_0x2642b5['name']];_0x590dce=!(-0x1*0xf5+-0x3*0xa39+0x1*0x1fa1);for(let _0x1c2d4f=-0x4b2*0x1+-0x4*0x333+0x117e;_0x1c2d4f<_0x280a54['length'];_0x1c2d4f++)this['animations'][_0x280a54[_0x1c2d4f]['name']]=_0x280a54[_0x1c2d4f],!_0x590dce&&this['currAnim']===_0x280a54[_0x1c2d4f]['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x590dce=!(0x3c3*-0x3+-0xad3*0x1+0x2*0xb0e),this['play'](_0x280a54[_0x1c2d4f]['name']));_0x590dce||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}else{if(_0x49b17c&&_0x49b17c['length']>-0x1*0x5ce+-0x73d+0xd0c){for(let _0x241ed=0xbe0+0x1f77+-0x2b57;_0x241ed<_0x49b17c['length'];_0x241ed++)delete this['animations'][_0x49b17c[_0x241ed]['name']];}this['animations'][_0x2642b5['name']]=_0x280a54[-0x8*-0x401+-0x1f6*-0x2+-0x23f4]||_0x280a54,_0x590dce=!(-0x752*0x3+-0x2c*0xd3+0x3a3b),this['currAnim']===_0x2642b5['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x590dce=!(-0x1*-0x779+0x96a+-0x5a1*0x3),this['play'](_0x2642b5['name'])),_0x590dce||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}this['animations'+'Index'][_0x2642b5['id']]=_0x2642b5['name'];}else{if(_0x49b17c['length']>0x24af+-0xd*0x22d+-0x865){for(let _0x243998=0x4ea+0x19*0x11+-0x33*0x21;_0x243998<_0x49b17c['length'];_0x243998++)delete this['animations'][_0x49b17c[_0x243998]['name']],this['currAnim']===_0x49b17c[_0x243998]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x2642b5['name']],this['currAnim']===_0x2642b5['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x2642b5['id']];}}}['onAssetRem'+'oved'](_0x44f9ab){if(_0x44f9ab['off']('remove',this['onAssetRem'+'oved'],this),this['animations']){if(_0x44f9ab['resources']['length']>-0xc24+-0x595+0x11ba){for(let _0x2aab19=0x1abe+-0x2258+0x79a;_0x2aab19<_0x44f9ab['resources']['length'];_0x2aab19++)delete this['animations'][_0x44f9ab['resources'][_0x2aab19]['name']],this['currAnim']===_0x44f9ab['resources'][_0x2aab19]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x44f9ab['name']],this['currAnim']===_0x44f9ab['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x44f9ab['id']];}}['_stopCurre'+'ntAnimatio'+'n'](){if(this['currAnim']=null,this['playing']=!(-0xa7*0x1e+0x1cb6+-0x923),this['skeleton']&&(this['skeleton']['currentTim'+'e']=-0x4cf+0x3c*-0x3a+-0x1*-0x1267,this['skeleton']['animation']=null),this['animEvalua'+'tor']){for(let _0x5ac5b3=-0x5ee+-0x19*-0x10+0x1*0x45e;_0x5ac5b3<this['animEvalua'+'tor']['clips']['length'];++_0x5ac5b3)this['animEvalua'+'tor']['clips'][_0x5ac5b3]['stop']();this['animEvalua'+'tor']['update'](0x1ac1+-0x16a8+-0x419),this['animEvalua'+'tor']['removeClip'+'s']();}}['onEnable'](){super['onEnable']();const _0x92f2ef=this['assets'],_0x111cee=this['system']['app']['assets'];if(_0x92f2ef)for(let _0x2db274=-0x1*0xb9e+0x13*0x7a+-0x8*-0x52,_0x77564a=_0x92f2ef['length'];_0x2db274<_0x77564a;_0x2db274++){let _0x78726a=_0x92f2ef[_0x2db274];_0x78726a instanceof pe||(_0x78726a=_0x111cee['get'](_0x78726a)),_0x78726a&&!_0x78726a['resource']&&_0x111cee['load'](_0x78726a);}if(this['activate']&&!this['currAnim']){const _0x4fd36f=Object['keys'](this['animations']);_0x4fd36f['length']>-0x1e7b+-0x1c*0xf2+0xef*0x3d&&this['play'](_0x4fd36f[-0x1709*0x1+-0xdcb+0x24d4]);}}['onBeforeRe'+'move'](){for(let _0x4dcd77=-0xbe5+0x2*0xa4+-0x13*-0x8f;_0x4dcd77<this['assets']['length'];_0x4dcd77++){let _0x33b500=this['assets'][_0x4dcd77];typeof _0x33b500=='number'&&(_0x33b500=this['system']['app']['assets']['get'](_0x33b500)),_0x33b500&&(_0x33b500['off']('change',this['onAssetCha'+'nged'],this),_0x33b500['off']('remove',this['onAssetRem'+'oved'],this));}this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['update'](_0x16def6){if(this['blending']&&(this['blend']+=_0x16def6*this['blendSpeed'],this['blend']>=0x90f+0x24af+-0x2dbd*0x1&&(this['blend']=-0x1652+0x58d+0x10c6)),this['playing']){const _0x14efb5=this['skeleton'];if(_0x14efb5!==null&&this['model']!==null){if(this['blending'])_0x14efb5['blend'](this['fromSkel'],this['toSkel'],this['blend']);else{const _0x4d66ca=_0x16def6*this['speed'];_0x14efb5['addTime'](_0x4d66ca),this['speed']>0x3*0x7cb+-0xc7*-0x1+-0x1828&&_0x14efb5['_time']===_0x14efb5['animation']['duration']&&!this['loop']?this['playing']=!(-0x7*0x25a+0x24ef+-0x106*0x14):this['speed']<0xdd7+-0x2b8*-0xc+0x2e77*-0x1&&_0x14efb5['_time']===-0x6ec+-0x2627+-0x1*-0x2d13&&!this['loop']&&(this['playing']=!(-0x1da+-0x7ac*0x4+0x208b));}this['blending']&&this['blend']===-0x2*0x873+-0x1e9e+0x2f85&&(_0x14efb5['animation']=this['toSkel']['animation']),_0x14efb5['updateGrap'+'h']();}}const _0x3abf12=this['animEvalua'+'tor'];if(_0x3abf12){for(let _0x3f8e81=0xa*0x112+0x7d8+-0x128c;_0x3f8e81<_0x3abf12['clips']['length'];++_0x3f8e81){const _0x3986d0=_0x3abf12['clips'][_0x3f8e81];_0x3986d0['speed']=this['speed'],this['playing']?_0x3986d0['resume']():_0x3986d0['pause']();}this['blending']&&_0x3abf12['clips']['length']>0xc*0x63+-0x10+-0x1*0x493&&(_0x3abf12['clips'][-0x1a9e+-0x39b*-0x3+-0x22*-0x77]['blendWeigh'+'t']=this['blend']),_0x3abf12['update'](_0x16def6);}this['blending']&&this['blend']===-0x248f+0x1*-0x1ae7+-0x1*-0x3f77&&(this['blending']=!(0x6f9+-0x42e+0x15*-0x22));}}class KI{constructor(){this['enabled']=!(0x1797+-0x102b*0x1+0x26*-0x32);}}const Kf=['enabled'];class ZI extends ct{constructor(_0x17aabc){super(_0x17aabc),this['id']='animation',this['ComponentT'+'ype']=lv,this['DataType']=KI,this['schema']=Kf,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x5368fc,_0x3aebc6,_0x4879fe){_0x4879fe=['activate','enabled','loop','speed','assets'];for(const _0x296ff0 of _0x4879fe)_0x3aebc6['hasOwnProp'+'erty'](_0x296ff0)&&(_0x5368fc[_0x296ff0]=_0x3aebc6[_0x296ff0]);super['initialize'+'ComponentD'+'ata'](_0x5368fc,_0x3aebc6,Kf);}['cloneCompo'+'nent'](_0x216af7,_0x527878){this['addCompone'+'nt'](_0x527878,{}),_0x527878['animation']['assets']=_0x216af7['animation']['assets']['slice'](),_0x527878['animation']['speed']=_0x216af7['animation']['speed'],_0x527878['animation']['loop']=_0x216af7['animation']['loop'],_0x527878['animation']['activate']=_0x216af7['animation']['activate'],_0x527878['animation']['enabled']=_0x216af7['animation']['enabled'];const _0x285830={},_0xd4a40c=_0x216af7['animation']['animations'];for(const _0x17f2e4 in _0xd4a40c)_0xd4a40c['hasOwnProp'+'erty'](_0x17f2e4)&&(_0x285830[_0x17f2e4]=_0xd4a40c[_0x17f2e4]);_0x527878['animation']['animations']=_0x285830;const _0x59991c={},_0x1f36db=_0x216af7['animation']['animations'+'Index'];for(const _0x56bf00 in _0x1f36db)_0x1f36db['hasOwnProp'+'erty'](_0x56bf00)&&(_0x59991c[_0x56bf00]=_0x1f36db[_0x56bf00]);return _0x527878['animation']['animations'+'Index']=_0x59991c,_0x527878['animation'];}['onBeforeRe'+'move'](_0x5ecce4,_0x9313ca){_0x9313ca['onBeforeRe'+'move']();}['onUpdate'](_0x1ed11e){const _0x96399d=this['store'];for(const _0x464370 in _0x96399d)if(_0x96399d['hasOwnProp'+'erty'](_0x464370)){const _0x2eb9a0=_0x96399d[_0x464370];_0x2eb9a0['data']['enabled']&&_0x2eb9a0['entity']['enabled']&&_0x2eb9a0['entity']['animation']['update'](_0x1ed11e);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](lv['prototype'],Kf);class sl{constructor(_0x5ca1f4,_0xb357d4,_0x28d8ae,_0x716566,_0x37b361=0x9b*0x3e+-0x13e+-0x244b){this['_state']=_0x5ca1f4,this['_parent']=_0xb357d4,this['_name']=_0x28d8ae,Array['isArray'](_0x716566)?(this['_point']=new J(_0x716566[0x3*0x598+0x1fe0+-0x30a8],_0x716566[-0xf31+-0x3ad*-0x1+0xb85]),this['_pointLeng'+'th']=this['_point']['length']()):(this['_point']=_0x716566,this['_pointLeng'+'th']=_0x716566),this['_speed']=_0x37b361,this['_weightedS'+'peed']=-0x2*-0x805+0x1871*0x1+-0x287a,this['_weight']=0x882+0x4*-0x7eb+0x9*0x293,this['_animTrack']=null;}get['parent'](){return this['_parent'];}get['name'](){return this['_name'];}get['path'](){return this['_parent']?this['_parent']['path']+'.'+this['_name']:this['_name'];}get['point'](){return this['_point'];}get['pointLengt'+'h'](){return this['_pointLeng'+'th'];}set['weight'](_0x2f0a10){this['_weight']=_0x2f0a10;}get['weight'](){return this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['normalized'+'Weight'](){const _0x313640=this['_state']['totalWeigh'+'t'];return _0x313640===0x7bb+-0x1fd2+0x1817*0x1?0xb12+-0xf5f+-0x16f*-0x3:this['weight']/_0x313640;}get['speed'](){return this['_weightedS'+'peed']*this['_speed'];}get['absoluteSp'+'eed'](){return Math['abs'](this['_speed']);}set['weightedSp'+'eed'](_0x1afc6e){this['_weightedS'+'peed']=_0x1afc6e;}get['weightedSp'+'eed'](){return this['_weightedS'+'peed'];}set['animTrack'](_0x14e155){this['_animTrack']=_0x14e155;}get['animTrack'](){return this['_animTrack'];}}class Xn extends sl{constructor(_0x3335bb,_0x153991,_0x1de374,_0xb8009a,_0x310e12,_0x55f281,_0x3cb09c,_0x3c48ec,_0x44cc5d){super(_0x3335bb,_0x153991,_0x1de374,_0xb8009a),this['_parameter'+'s']=_0x310e12,this['_parameter'+'Values']=new Array(_0x310e12['length']),this['_children']=[],this['_findParam'+'eter']=_0x44cc5d,this['_syncAnima'+'tions']=_0x3cb09c!==!(-0x1*0x100f+-0x1449+0x745*0x5),this['_pointCach'+'e']={};for(let _0x22a8b4=-0x98b*-0x2+0x127c+0x2af*-0xe;_0x22a8b4<_0x55f281['length'];_0x22a8b4++){const _0x525296=_0x55f281[_0x22a8b4];_0x525296['children']?this['_children']['push'](_0x3c48ec(_0x525296['type'],_0x3335bb,this,_0x525296['name'],0x1*-0x2586+0x6*0x4b4+0x94f,_0x525296['parameter']?[_0x525296['parameter']]:_0x525296['parameters'],_0x525296['children'],_0x525296['syncAnimat'+'ions'],_0x3c48ec,_0x44cc5d)):this['_children']['push'](new sl(_0x3335bb,this,_0x525296['name'],_0x525296['point'],_0x525296['speed']));}}get['weight'](){return this['calculateW'+'eights'](),this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['syncAnimat'+'ions'](){return this['_syncAnima'+'tions'];}['getChild'](_0xbd424e){for(let _0x4a247e=0x1*-0x841+0x2*-0xe0b+-0x1bb*-0x15;_0x4a247e<this['_children']['length'];_0x4a247e++)if(this['_children'][_0x4a247e]['name']===_0xbd424e)return this['_children'][_0x4a247e];return null;}['updatePara'+'meterValue'+'s'](){let _0x217ff5=!(-0x1*0x26b3+0x122*0x17+0xca5);for(let _0xd1205a=0x17ef+-0x1*0x5f+0x34*-0x74;_0xd1205a<this['_parameter'+'Values']['length'];_0xd1205a++){const _0x523754=this['_findParam'+'eter'](this['_parameter'+'s'][_0xd1205a])['value'];this['_parameter'+'Values'][_0xd1205a]!==_0x523754&&(this['_parameter'+'Values'][_0xd1205a]=_0x523754,_0x217ff5=!(-0x2*-0x647+0x5a3*0x5+-0x28bc));}return _0x217ff5;}['getNodeWei'+'ghtedDurat'+'ion'](_0x1fe36a){return this['_children'][_0x1fe36a]['animTrack']['duration']/this['_children'][_0x1fe36a]['speedMulti'+'plier']*this['_children'][_0x1fe36a]['weight'];}['getNodeCou'+'nt'](){let _0x5e95dc=0xaa+0x82e+-0x2*0x46c;for(let _0x23e6f3=0x17e9+0xa7*-0x39+-0x1*-0xd46;_0x23e6f3<this['_children']['length'];_0x23e6f3++)this['_children'][_0x23e6f3]['constructo'+'r']===Xn?_0x5e95dc+=this['_children'][_0x23e6f3]['getNodeCou'+'nt']():_0x5e95dc++;return _0x5e95dc;}}class QI extends Xn{constructor(_0x4b1397,_0x36ef5d,_0x2c6d76,_0x53601b,_0x52ece9,_0x2faff2,_0x324a2f,_0x197757,_0x29de03){_0x2faff2['sort']((_0x9be472,_0x27b396)=>_0x9be472['point']-_0x27b396['point']),super(_0x4b1397,_0x36ef5d,_0x2c6d76,_0x53601b,_0x52ece9,_0x2faff2,_0x324a2f,_0x197757,_0x29de03);}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x47b408=0x1117+0x32*0x98+0x1*-0x2ec7;this['_children'][0xaf9*-0x2+-0x10d2+-0x676*-0x6]['weight']=0x1817+-0x6bb*-0x2+-0x258d;for(let _0x2beee6=-0x33b*-0xa+-0x53*0x5d+-0x1d*0x13;_0x2beee6<this['_children']['length'];_0x2beee6++){const _0x291e3a=this['_children'][_0x2beee6];if(_0x2beee6!==this['_children']['length']-(0xe13+-0xbf9*0x2+0x9e0)){const _0x55d2e9=this['_children'][_0x2beee6+(0x989*-0x2+-0x1072+0x2385)];if(_0x291e3a['point']===_0x55d2e9['point'])_0x291e3a['weight']=0x68e*-0x3+-0x853*0x2+-0x298*-0xe+0.5,_0x55d2e9['weight']=0x4*-0x660+-0x1a91+-0x9*-0x5c9+0.5;else{if(Y['between'](this['_parameter'+'Values'][-0x155f*-0x1+-0xa*0x186+0x623*-0x1],_0x291e3a['point'],_0x55d2e9['point'],!(-0x1*-0x1647+0x1*0xbc3+0x220a*-0x1))){const _0x2fa059=Math['abs'](_0x291e3a['point']-_0x55d2e9['point']),_0x31608c=Math['abs'](_0x291e3a['point']-this['_parameter'+'Values'][-0x3*0x2bb+-0x1202+0x1a33]),_0x567882=(_0x2fa059-_0x31608c)/_0x2fa059;_0x291e3a['weight']=_0x567882,_0x55d2e9['weight']=-0x39a*-0x2+0xa*-0xca+0xb1-_0x567882;}else _0x55d2e9['weight']=-0x2105+-0x1*0x6eb+0x3*0xd50;}}this['_syncAnima'+'tions']&&(_0x47b408+=_0x291e3a['animTrack']['duration']/_0x291e3a['absoluteSp'+'eed']*_0x291e3a['weight']);}if(this['_syncAnima'+'tions'])for(let _0x23e38b=0x8f3*-0x2+-0x144+0x132a;_0x23e38b<this['_children']['length'];_0x23e38b++){const _0x317a84=this['_children'][_0x23e38b];_0x317a84['weightedSp'+'eed']=_0x317a84['animTrack']['duration']/_0x317a84['absoluteSp'+'eed']/_0x47b408;}}}const Ni=class Ni extends Xn{['pointDista'+'nceCache'](_0xcac9cb,_0x284730){const _0x3f5f88=''+_0xcac9cb+_0x284730;return this['_pointCach'+'e'][_0x3f5f88]||(this['_pointCach'+'e'][_0x3f5f88]=this['_children'][_0x284730]['point']['clone']()['sub'](this['_children'][_0xcac9cb]['point'])),this['_pointCach'+'e'][_0x3f5f88];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x36b8b3,_0x223241;Ni['_p']['set'](...this['_parameter'+'Values']),_0x36b8b3=0x2520+-0x1174+-0x13ac,_0x223241=0xafe+-0x449+-0x6b5;for(let _0x106eb0=0x20b*0x5+-0x20c2*-0x1+0xe53*-0x3;_0x106eb0<this['_children']['length'];_0x106eb0++){const _0x56962f=this['_children'][_0x106eb0],_0x292dbc=_0x56962f['point'];Ni['_pip']['set'](Ni['_p']['x'],Ni['_p']['y'])['sub'](_0x292dbc);let _0x3dd4d5=Number['MAX_VALUE'];for(let _0x50db55=-0x5*0x15d+0x37c+0x355;_0x50db55<this['_children']['length'];_0x50db55++){if(_0x106eb0===_0x50db55)continue;const _0x401510=this['pointDista'+'nceCache'](_0x106eb0,_0x50db55),_0x40d17b=Y['clamp'](0x2115+0x915+0x1*-0x2a29-Ni['_pip']['dot'](_0x401510)/_0x401510['lengthSq'](),0x2569+-0x1*-0x269e+-0x4c07*0x1,0x22a9+-0x530+0x17*-0x148);_0x40d17b<_0x3dd4d5&&(_0x3dd4d5=_0x40d17b);}_0x56962f['weight']=_0x3dd4d5,_0x36b8b3+=_0x3dd4d5,this['_syncAnima'+'tions']&&(_0x223241+=_0x56962f['animTrack']['duration']/_0x56962f['absoluteSp'+'eed']*_0x56962f['weight']);}for(let _0x49b4dc=-0x60e+-0xcd*0x1c+0x1c7a;_0x49b4dc<this['_children']['length'];_0x49b4dc++){const _0x343fa3=this['_children'][_0x49b4dc];_0x343fa3['weight']=_0x343fa3['_weight']/_0x36b8b3,this['_syncAnima'+'tions']&&(_0x343fa3['weightedSp'+'eed']=_0x343fa3['animTrack']['duration']/_0x343fa3['absoluteSp'+'eed']/_0x223241);}}};h(Ni,'_p',new J()),h(Ni,'_pip',new J());let Zf=Ni;const ki=class ki extends Xn{['pointCache'](_0x1bb16c,_0x4475e0){const _0x442ea8=''+_0x1bb16c+_0x4475e0;return this['_pointCach'+'e'][_0x442ea8]||(this['_pointCach'+'e'][_0x442ea8]=new J((this['_children'][_0x4475e0]['pointLengt'+'h']-this['_children'][_0x1bb16c]['pointLengt'+'h'])/((this['_children'][_0x4475e0]['pointLengt'+'h']+this['_children'][_0x1bb16c]['pointLengt'+'h'])/(0x427+-0x17*0x131+0x1742)),J['angleRad'](this['_children'][_0x1bb16c]['point'],this['_children'][_0x4475e0]['point'])*(-0x1*-0x4f7+0x2501*0x1+-0x29f6))),this['_pointCach'+'e'][_0x442ea8];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x62796d,_0x5402a6;ki['_p']['set'](...this['_parameter'+'Values']);const _0x191e34=ki['_p']['length']();_0x62796d=-0xf35+0xeb7*-0x2+0xd*0x36f,_0x5402a6=-0x1827+-0xa21*-0x2+-0x1*-0x3e5;for(let _0x1bc88f=0xbd1+0x89*-0x34+0x1*0x1003;_0x1bc88f<this['_children']['length'];_0x1bc88f++){const _0x202242=this['_children'][_0x1bc88f],_0x28aed3=_0x202242['point'],_0x5e6686=_0x202242['pointLengt'+'h'];let _0x2938f9=Number['MAX_VALUE'];for(let _0x263cc5=0x119*0x1c+0x53c*-0x2+-0x1444;_0x263cc5<this['_children']['length'];_0x263cc5++){if(_0x1bc88f===_0x263cc5)continue;const _0x1a5a5a=this['pointCache'](_0x1bc88f,_0x263cc5),_0x21f8dd=this['_children'][_0x263cc5]['pointLengt'+'h'];ki['_pip']['set']((_0x191e34-_0x5e6686)/((_0x21f8dd+_0x5e6686)/(-0x7*-0x1dc+0x1*-0x109f+-0xb9*-0x5)),J['angleRad'](_0x28aed3,ki['_p'])*(-0x23dd*0x1+-0x2181+0x4560));const _0x1f706e=Y['clamp'](0x38f*0x2+0x2fa*-0xc+0x1c9b-Math['abs'](ki['_pip']['dot'](_0x1a5a5a)/_0x1a5a5a['lengthSq']()),-0x1*0x11d8+0x4*0x50a+0x25*-0x10,0x31f+-0x18dc+0x15be);_0x1f706e<_0x2938f9&&(_0x2938f9=_0x1f706e);}_0x202242['weight']=_0x2938f9,_0x62796d+=_0x2938f9,this['_syncAnima'+'tions']&&(_0x5402a6+=_0x202242['animTrack']['duration']/_0x202242['absoluteSp'+'eed']*_0x202242['weight']);}for(let _0x42d19e=-0x4*-0x913+0x1c4d+0x4099*-0x1;_0x42d19e<this['_children']['length'];_0x42d19e++){const _0x48d79b=this['_children'][_0x42d19e];if(_0x48d79b['weight']=_0x48d79b['_weight']/_0x62796d,this['_syncAnima'+'tions']){const _0x38fe2f=_0x48d79b['animTrack']['duration']/_0x5402a6*_0x62796d;_0x48d79b['weightedSp'+'eed']=_0x48d79b['absoluteSp'+'eed']*_0x38fe2f;}}}};h(ki,'_p',new J()),h(ki,'_pip',new J());let Qf=ki;class JI extends Xn{['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x575f52=-0x37d*0x7+0xeff+0x96c,_0x141c2c=-0xc8*0x1+-0x724*0x1+0x2*0x3f6;for(let _0x447755=0x562+0x5*0x29a+-0xd6*0x16;_0x447755<this['_children']['length'];_0x447755++)if(_0x575f52+=Math['max'](this['_parameter'+'Values'][_0x447755],0x22fc+0xa*0x320+-0x6*0xb0a),this['_syncAnima'+'tions']){const _0x4b5762=this['_children'][_0x447755];_0x141c2c+=_0x4b5762['animTrack']['duration']/_0x4b5762['absoluteSp'+'eed']*_0x4b5762['weight'];}for(let _0x19c3f2=-0x1*0x2087+-0x3*0x3c5+0xb5*0x3e;_0x19c3f2<this['_children']['length'];_0x19c3f2++){const _0x50e79d=this['_children'][_0x19c3f2],_0x375e2f=Math['max'](this['_parameter'+'Values'][_0x19c3f2],0x710+0xa81*0x3+-0x2693);_0x575f52?(_0x50e79d['weight']=_0x375e2f/_0x575f52,this['_syncAnima'+'tions']&&(_0x50e79d['weightedSp'+'eed']=_0x50e79d['animTrack']['duration']/_0x50e79d['absoluteSp'+'eed']/_0x141c2c)):(_0x50e79d['weight']=-0x1*0x12b5+-0x2*0xf95+-0x31df*-0x1,this['_syncAnima'+'tions']&&(_0x50e79d['weightedSp'+'eed']=0x2*-0x70b+0x1072+-0x25c));}}}class ng{constructor(_0x5e2b23,_0x199fab,_0x18afbf=0x2100+0x25*-0xf+-0x1ed4,_0x2748c4=!(-0x7ec+-0x86*-0x2e+0x2f*-0x58),_0x694d15){h(this,'_animation'+'s',{}),h(this,'_animation'+'List',[]),(this['_controlle'+'r']=_0x5e2b23,this['_name']=_0x199fab,this['_speed']=_0x18afbf,this['_loop']=_0x2748c4,this['_hasAnimat'+'ions']=!(-0x1*-0x434+-0x19*-0xb2+-0x1595),_0x694d15?this['_blendTree']=this['_createTre'+'e'](_0x694d15['type'],this,null,_0x199fab,-0x3*0xc9+0x4e7+-0x28b,_0x694d15['parameter']?[_0x694d15['parameter']]:_0x694d15['parameters'],_0x694d15['children'],_0x694d15['syncAnimat'+'ions'],this['_createTre'+'e'],this['_controlle'+'r']['findParame'+'ter']):this['_blendTree']=new sl(this,null,_0x199fab,-0x2*0x15a+-0x1163*0x2+-0x1*-0x257b,_0x18afbf));}['_createTre'+'e'](_0x88da3f,_0x4d3391,_0x15c297,_0x286769,_0x27106a,_0x21d670,_0x554f49,_0x57f701,_0x11fda0,_0x2b067e){switch(_0x88da3f){case $I:return new QI(_0x4d3391,_0x15c297,_0x286769,_0x27106a,_0x21d670,_0x554f49,_0x57f701,_0x11fda0,_0x2b067e);case qI:return new Zf(_0x4d3391,_0x15c297,_0x286769,_0x27106a,_0x21d670,_0x554f49,_0x57f701,_0x11fda0,_0x2b067e);case XI:return new Qf(_0x4d3391,_0x15c297,_0x286769,_0x27106a,_0x21d670,_0x554f49,_0x57f701,_0x11fda0,_0x2b067e);case jI:return new JI(_0x4d3391,_0x15c297,_0x286769,_0x27106a,_0x21d670,_0x554f49,_0x57f701,_0x11fda0,_0x2b067e);}w['error']('Invalid\x20an'+'im\x20blend\x20t'+'ype:\x20'+_0x88da3f);}['_getNodeFr'+'omPath'](_0x1e2e89){let _0x5c818a=this['_blendTree'];for(let _0x5c5265=0x209e+-0xa*-0x2f1+-0x1*0x3e07;_0x5c5265<_0x1e2e89['length'];_0x5c5265++)_0x5c818a=_0x5c818a['getChild'](_0x1e2e89[_0x5c5265]);return _0x5c818a;}['addAnimati'+'on'](_0x59f10a,_0x248192){const _0x11e6cf=_0x59f10a['join']('.'),_0x44e30e=this['_animation'+'List']['findIndex'](_0x1166d4=>_0x1166d4['path']===_0x11e6cf);if(_0x44e30e>=-0x1a45+-0xe1b+0x2860)this['_animation'+'List'][_0x44e30e]['animTrack']=_0x248192;else{const _0x1440ff=this['_getNodeFr'+'omPath'](_0x59f10a);_0x1440ff['animTrack']=_0x248192,this['_animation'+'List']['push'](_0x1440ff);}this['_updateHas'+'Animations']();}['_updateHas'+'Animations'](){this['_hasAnimat'+'ions']=this['_animation'+'List']['length']>-0x2576*0x1+-0x16a2*-0x1+0xed4&&this['_animation'+'List']['every'](_0x58a080=>_0x58a080['animTrack']&&_0x58a080['animTrack']!==Zi['EMPTY']);}get['name'](){return this['_name'];}set['animations'](_0x531eba){this['_animation'+'List']=_0x531eba,this['_updateHas'+'Animations']();}get['animations'](){return this['_animation'+'List'];}get['hasAnimati'+'ons'](){return this['_hasAnimat'+'ions'];}set['speed'](_0x3ec846){this['_speed']=_0x3ec846;}get['speed'](){return this['_speed'];}set['loop'](_0x210236){this['_loop']=_0x210236;}get['loop'](){return this['_loop'];}get['nodeCount'](){return!this['_blendTree']||this['_blendTree']['constructo'+'r']===sl?-0x1818+0x2bd*-0x7+0x2b44:this['_blendTree']['getNodeCou'+'nt']();}get['playable'](){return ch['indexOf'](this['name'])!==-(0x1807+-0x1c*-0x3b+-0x1e7a)||this['animations']['length']===this['nodeCount'];}get['looping'](){if(this['animations']['length']>-0x855+0x1edd+0x4*-0x5a2){const _0x7ab08b=this['name']+'.'+this['animations'][0x9ad+0x1cff+-0x26ac]['animTrack']['name'],_0x5739d2=this['_controlle'+'r']['animEvalua'+'tor']['findClip'](_0x7ab08b);if(_0x5739d2)return _0x5739d2['loop'];}return!(-0x97c+0x9a9+-0x2*0x16);}get['totalWeigh'+'t'](){let _0x3881d4=0x1807*-0x1+0x31*-0x58+-0x1*-0x28df;for(let _0x6c1f0d=-0xdd2+-0xf9b*-0x2+-0x1164;_0x6c1f0d<this['animations']['length'];_0x6c1f0d++)_0x3881d4+=this['animations'][_0x6c1f0d]['weight'];return _0x3881d4;}get['timelineDu'+'ration'](){let _0x6a6b5e=0x1*-0x1f4e+-0x1*-0xe1d+0x1131;for(let _0x14bdd6=0x780+-0x1c5c+0x14dc;_0x14bdd6<this['animations']['length'];_0x14bdd6++){const _0x584a7f=this['animations'][_0x14bdd6];_0x584a7f['animTrack']['duration']>_0x6a6b5e&&(_0x6a6b5e=_0x584a7f['animTrack']['duration']);}return _0x6a6b5e;}}class hh{constructor({from:_0x3fb1ae,to:_0x32c253,time:_0x2eeb6c=-0xdbe+-0x3cb*-0x5+-0x539,priority:_0x63a342=0x1f7f+-0xe8+0xbf*-0x29,conditions:_0x388489=[],exitTime:_0x2ef24a=null,transitionOffset:_0x268acb=null,interruptionSource:_0x11a52f=rv}){this['_from']=_0x3fb1ae,this['_to']=_0x32c253,this['_time']=_0x2eeb6c,this['_priority']=_0x63a342,this['_condition'+'s']=_0x388489,this['_exitTime']=_0x2ef24a,this['_transitio'+'nOffset']=_0x268acb,this['_interrupt'+'ionSource']=_0x11a52f;}get['from'](){return this['_from'];}set['to'](_0x4c1094){this['_to']=_0x4c1094;}get['to'](){return this['_to'];}get['time'](){return this['_time'];}get['priority'](){return this['_priority'];}get['conditions'](){return this['_condition'+'s'];}get['exitTime'](){return this['_exitTime'];}get['transition'+'Offset'](){return this['_transitio'+'nOffset'];}get['interrupti'+'onSource'](){return this['_interrupt'+'ionSource'];}get['hasExitTim'+'e'](){return!!this['exitTime'];}}class eL{constructor(_0x1921a8,_0x64fe67,_0x19c120,_0x414378,_0x52f287,_0x3e65d1,_0x55f1da){h(this,'_states',{}),h(this,'_stateName'+'s',[]),h(this,'_findTrans'+'itionsFrom'+'StateCache',{}),h(this,'_findTrans'+'itionsBetw'+'eenStatesC'+'ache',{}),h(this,'_previousS'+'tateName',null),h(this,'_activeSta'+'teName',_o),h(this,'_activeSta'+'teDuration',-0x1c6c+-0x3d*0x4e+0x1781*0x2),h(this,'_activeSta'+'teDuration'+'Dirty',!(0x3*-0x7e3+0x13f*0x13+0x4*-0x1)),h(this,'_playing',!(-0x152b*-0x1+-0x1*-0x24bb+-0x39e5)),h(this,'_activate'),h(this,'_transitio'+'ns'),h(this,'_currTrans'+'itionTime',0x1a7*0x7+-0x1*-0x17c3+-0x2353),h(this,'_totalTran'+'sitionTime',0xb32+0x27a+0xdab*-0x1),h(this,'_isTransit'+'ioning',!(0x5b9*0x1+0x2588+0x15a*-0x20)),h(this,'_transitio'+'nInterrupt'+'ionSource',rv),h(this,'_transitio'+'nPreviousS'+'tates',[]),h(this,'_timeInSta'+'te',0x1*-0x1caf+0xecf+0x6*0x250),h(this,'_timeInSta'+'teBefore',0x2702*-0x1+-0x139e+0x3aa0),h(this,'findParame'+'ter',_0x4813ce=>this['_findParam'+'eter'](_0x4813ce)),(this['_animEvalu'+'ator']=_0x1921a8,this['_eventHand'+'ler']=_0x52f287,this['_findParam'+'eter']=_0x3e65d1,this['_consumeTr'+'igger']=_0x55f1da);for(let _0x511ed8=-0x21cf+0xda7+0x1428;_0x511ed8<_0x64fe67['length'];_0x511ed8++)this['_states'][_0x64fe67[_0x511ed8]['name']]=new ng(this,_0x64fe67[_0x511ed8]['name'],_0x64fe67[_0x511ed8]['speed'],_0x64fe67[_0x511ed8]['loop'],_0x64fe67[_0x511ed8]['blendTree']),this['_stateName'+'s']['push'](_0x64fe67[_0x511ed8]['name']);this['_transitio'+'ns']=_0x19c120['map'](_0x17b8b8=>new hh({..._0x17b8b8})),this['_activate']=_0x414378;}get['animEvalua'+'tor'](){return this['_animEvalu'+'ator'];}set['activeStat'+'e'](_0x2e4039){this['_activeSta'+'teName']=_0x2e4039;}get['activeStat'+'e'](){return this['_findState'](this['_activeSta'+'teName']);}get['activeStat'+'eName'](){return this['_activeSta'+'teName'];}get['activeStat'+'eAnimation'+'s'](){return this['activeStat'+'e']['animations'];}set['previousSt'+'ate'](_0x24c08d){this['_previousS'+'tateName']=_0x24c08d;}get['previousSt'+'ate'](){return this['_findState'](this['_previousS'+'tateName']);}get['previousSt'+'ateName'](){return this['_previousS'+'tateName'];}get['playable'](){let _0x4a1ff2=!(0x3*0x25+0x15ab+0x75e*-0x3);for(let _0x33cd23=0xc19+-0x2fa*0x6+0x1*0x5c3;_0x33cd23<this['_stateName'+'s']['length'];_0x33cd23++)this['_states'][this['_stateName'+'s'][_0x33cd23]]['playable']||(_0x4a1ff2=!(0x22c9+-0x1aad+-0x81b));return _0x4a1ff2;}set['playing'](_0x98f4b5){this['_playing']=_0x98f4b5;}get['playing'](){return this['_playing'];}get['activeStat'+'eProgress'](){return this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);}get['activeStat'+'eDuration'](){if(this['_activeSta'+'teDuration'+'Dirty']){let _0x3bee16=-0x1*-0x240b+-0xc1*0x7+-0xf62*0x2;for(let _0x295520=0xa*0x6f+-0x17e*-0x4+-0xa4e;_0x295520<this['activeStat'+'eAnimation'+'s']['length'];_0x295520++){const _0x21584a=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x295520]['name']);_0x21584a&&(_0x3bee16=Math['max'](_0x3bee16,_0x21584a['track']['duration']));}this['_activeSta'+'teDuration']=_0x3bee16,this['_activeSta'+'teDuration'+'Dirty']=!(-0x2d3*0xa+-0x3b*-0x75+0x29*0x8);}return this['_activeSta'+'teDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x204533){this['_timeInSta'+'teBefore']=_0x204533,this['_timeInSta'+'te']=_0x204533;for(let _0x2ae3e0=0x5*-0xef+-0x75e+0xc09;_0x2ae3e0<this['activeStat'+'eAnimation'+'s']['length'];_0x2ae3e0++){const _0x2cec47=this['animEvalua'+'tor']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x2ae3e0]['name']);_0x2cec47&&(_0x2cec47['time']=_0x204533);}}get['activeStat'+'eCurrentTi'+'me'](){return this['_timeInSta'+'te'];}get['transition'+'ing'](){return this['_isTransit'+'ioning'];}get['transition'+'Progress'](){return this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime'];}get['states'](){return this['_stateName'+'s'];}['assignMask'](_0x3f2c55){return this['_animEvalu'+'ator']['assignMask'](_0x3f2c55);}['_findState'](_0x4094c5){return this['_states'][_0x4094c5];}['_getActive'+'StateProgr'+'essForTime'](_0x105e9b){if(this['activeStat'+'eName']===_o||this['activeStat'+'eName']===jf||this['activeStat'+'eName']===Hr)return-0x12*0x171+-0x9d*0x13+0x259a;const _0x4394af=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][-0x179*-0x17+-0x1*-0x4eb+-0x26ca]['name']);return _0x4394af?_0x4394af['progressFo'+'rTime'](_0x105e9b):null;}['_findTrans'+'itionsFrom'+'State'](_0x2ded84){let _0x599506=this['_findTrans'+'itionsFrom'+'StateCache'][_0x2ded84];return _0x599506||(_0x599506=this['_transitio'+'ns']['filter'](_0x193375=>_0x193375['from']===_0x2ded84),el(_0x599506),this['_findTrans'+'itionsFrom'+'StateCache'][_0x2ded84]=_0x599506),_0x599506;}['_findTrans'+'itionsBetw'+'eenStates'](_0x240e8a,_0x45be9b){let _0xd1164c=this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x240e8a+'->'+_0x45be9b];return _0xd1164c||(_0xd1164c=this['_transitio'+'ns']['filter'](_0x3238d8=>_0x3238d8['from']===_0x240e8a&&_0x3238d8['to']===_0x45be9b),el(_0xd1164c),this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x240e8a+'->'+_0x45be9b]=_0xd1164c),_0xd1164c;}['_transitio'+'nHasCondit'+'ionsMet'](_0x345620){const _0x445902=_0x345620['conditions'];for(let _0x51fb67=-0x796*0x5+-0x1*-0x109b+0x35*0x67;_0x51fb67<_0x445902['length'];_0x51fb67++){const _0x25fa6e=_0x445902[_0x51fb67],_0x24d416=this['_findParam'+'eter'](_0x25fa6e['parameterN'+'ame']);switch(_0x25fa6e['predicate']){case BI:if(!(_0x24d416['value']>_0x25fa6e['value']))return!(-0x158d+0x4+0xac5*0x2);break;case zI:if(!(_0x24d416['value']<_0x25fa6e['value']))return!(0x63*0x2b+-0x1bb*0x15+0x13b7);break;case VI:if(!(_0x24d416['value']>=_0x25fa6e['value']))return!(-0x71c+0x80d+-0xf0);break;case GI:if(!(_0x24d416['value']<=_0x25fa6e['value']))return!(0x2*0x70a+-0x1e2b+0x80c*0x2);break;case HI:if(_0x24d416['value']!==_0x25fa6e['value'])return!(0x1*-0x11a9+0x26d7*0x1+0x70f*-0x3);break;case WI:if(_0x24d416['value']===_0x25fa6e['value'])return!(-0x20be*-0x1+-0x1*-0x2579+0x56*-0xd1);break;}}return!(-0x1cf*-0x6+0xf*-0xd5+0x1a1);}['_findTrans'+'ition'](_0x4de958,_0x3b022d){let _0x103c29=[];if(_0x4de958&&_0x3b022d)_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsBetw'+'eenStates'](_0x4de958,_0x3b022d));else{if(!this['_isTransit'+'ioning'])_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));else switch(this['_transitio'+'nInterrupt'+'ionSource']){case FI:_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case NI:_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case kI:_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case UI:_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x103c29=_0x103c29['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;}}if(_0x103c29=_0x103c29['filter'](_0x36f06b=>{if(_0x36f06b['to']===this['activeStat'+'eName'])return!(-0x26bf+-0x3b*-0x31+0x3*0x927);if(_0x36f06b['hasExitTim'+'e']){let _0x47f979=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'teBefore']),_0x1bc175=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);if(_0x36f06b['exitTime']<0xc73*-0x2+0xbe7+0xd*0x100&&this['activeStat'+'e']['loop']&&(_0x47f979-=Math['floor'](_0x47f979),_0x1bc175-=Math['floor'](_0x1bc175)),_0x1bc175===_0x47f979){if(_0x1bc175!==_0x36f06b['exitTime'])return null;}else{if(!(_0x36f06b['exitTime']>_0x47f979&&_0x36f06b['exitTime']<=_0x1bc175))return null;}}return this['_transitio'+'nHasCondit'+'ionsMet'](_0x36f06b);}),_0x103c29['length']>-0x17b1+0x86+-0x1*-0x172b){const _0x5d5227=_0x103c29[-0x1e*-0xca+-0x2*0x941+-0x52a*0x1];if(_0x5d5227['to']===jf){const _0x41744e=this['_findTrans'+'itionsFrom'+'State'](_o)[-0xa1b*0x1+-0x1*-0x148d+-0xa72];_0x5d5227['to']=_0x41744e['to'];}return _0x5d5227;}return null;}['updateStat'+'eFromTrans'+'ition'](_0x4cea83){let _0x22d4b6,_0x2d8e79,_0x2fbd18;this['previousSt'+'ate']=_0x4cea83['from']?this['activeStat'+'eName']:null,this['activeStat'+'e']=_0x4cea83['to'],this['_activeSta'+'teDuration'+'Dirty']=!(-0xc56+-0x1b50*0x1+-0x1d*-0x15e);for(let _0x260094=0x1c1f*-0x1+-0x17e3+0x13d*0x2a;_0x260094<_0x4cea83['conditions']['length'];_0x260094++){const _0x3f7990=_0x4cea83['conditions'][_0x260094];this['_findParam'+'eter'](_0x3f7990['parameterN'+'ame'])['type']===Dc&&this['_consumeTr'+'igger'](_0x3f7990['parameterN'+'ame']);}if(this['previousSt'+'ate']){this['_isTransit'+'ioning']||(this['_transitio'+'nPreviousS'+'tates']=[]),this['_transitio'+'nPreviousS'+'tates']['push']({'name':this['_previousS'+'tateName'],'weight':0x1});const _0x5788df=Math['min'](this['_totalTran'+'sitionTime']!==-0x213a+-0x2374+0x44ae?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0xdd5*-0x1+-0xc9c+-0x138,-0x2a1*-0x3+0x2*-0xf7c+0x1716);for(let _0x139b09=0xdb4+-0xf60+0x1ac;_0x139b09<this['_transitio'+'nPreviousS'+'tates']['length'];_0x139b09++){this['_isTransit'+'ioning']?_0x139b09!==this['_transitio'+'nPreviousS'+'tates']['length']-(-0x74f+-0xaa0+0x11f0)?this['_transitio'+'nPreviousS'+'tates'][_0x139b09]['weight']*=-0x1809+0x12b9+0x551-_0x5788df:this['_transitio'+'nPreviousS'+'tates'][_0x139b09]['weight']=_0x5788df:this['_transitio'+'nPreviousS'+'tates'][_0x139b09]['weight']=0xbca+-0x2*-0xc2e+0x1e7*-0x13,_0x22d4b6=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x139b09]['name']);for(let _0x1a4b0b=-0x19ac+0x1209+0x7a3;_0x1a4b0b<_0x22d4b6['animations']['length'];_0x1a4b0b++)_0x2d8e79=_0x22d4b6['animations'][_0x1a4b0b],_0x2fbd18=this['_animEvalu'+'ator']['findClip'](_0x2d8e79['name']+'.previous.'+_0x139b09),_0x2fbd18||(_0x2fbd18=this['_animEvalu'+'ator']['findClip'](_0x2d8e79['name']),_0x2fbd18['name']=_0x2d8e79['name']+'.previous.'+_0x139b09),_0x139b09!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x134d+0xa18+-0x2ac*0xb)&&_0x2fbd18['pause']();}}this['_isTransit'+'ioning']=!(0xcf8+0x1*-0x1ed4+-0x5f4*-0x3),this['_totalTran'+'sitionTime']=_0x4cea83['time'],this['_currTrans'+'itionTime']=0x44*-0x65+0x5*0x4b7+0x341,this['_transitio'+'nInterrupt'+'ionSource']=_0x4cea83['interrupti'+'onSource'];const _0x509ff0=this['activeStat'+'e'],_0x2a4390=_0x4cea83['transition'+'Offset']&&_0x4cea83['transition'+'Offset']>0xf5*-0x5+-0xabf*0x1+0xf88&&_0x4cea83['transition'+'Offset']<-0x9a6+0x17d*0xc+-0x835;let _0x3fe8f6=0x1e38+-0x1f69+0x131,_0x1a1621=-0x701+-0x829*-0x1+-0x128;if(_0x2a4390){const _0x144617=_0x509ff0['timelineDu'+'ration']*_0x4cea83['transition'+'Offset'];_0x3fe8f6=_0x144617,_0x1a1621=_0x144617;}this['_timeInSta'+'te']=_0x3fe8f6,this['_timeInSta'+'teBefore']=_0x1a1621;for(let _0x45c728=0x153*0x13+0x382+-0x1cab;_0x45c728<_0x509ff0['animations']['length'];_0x45c728++){if(_0x2fbd18=this['_animEvalu'+'ator']['findClip'](_0x509ff0['animations'][_0x45c728]['name']),_0x2fbd18)_0x2fbd18['reset']();else{const _0x3bd0c4=Number['isFinite'](_0x509ff0['animations'][_0x45c728]['speed'])?_0x509ff0['animations'][_0x45c728]['speed']:_0x509ff0['speed'];_0x2fbd18=new lh(_0x509ff0['animations'][_0x45c728]['animTrack'],this['_timeInSta'+'te'],_0x3bd0c4,!(0x1d8b*0x1+0x1f7*0x8+-0x2d43),_0x509ff0['loop'],this['_eventHand'+'ler']),_0x2fbd18['name']=_0x509ff0['animations'][_0x45c728]['name'],this['_animEvalu'+'ator']['addClip'](_0x2fbd18);}if(_0x4cea83['time']>0x19b1+-0x1246+-0x76b?_0x2fbd18['blendWeigh'+'t']=0xd6f+0x1ef+0x7af*-0x2:_0x2fbd18['blendWeigh'+'t']=_0x509ff0['animations'][_0x45c728]['normalized'+'Weight'],_0x2fbd18['play'](),_0x2a4390)_0x2fbd18['time']=_0x509ff0['timelineDu'+'ration']*_0x4cea83['transition'+'Offset'];else{const _0x4c8849=_0x509ff0['speed']>=0x25f*-0x4+0x81d*0x4+-0x16f8?0x7*-0x202+-0x2bc+0x10ca:this['activeStat'+'eDuration'];_0x2fbd18['time']=_0x4c8849;}}}['_transitio'+'nToState'](_0x1a50f7){if(!this['_findState'](_0x1a50f7))return;let _0x5e56cb=this['_findTrans'+'ition'](this['_activeSta'+'teName'],_0x1a50f7);_0x5e56cb||(this['_animEvalu'+'ator']['removeClip'+'s'](),_0x5e56cb=new hh({'from':null,'to':_0x1a50f7})),this['updateStat'+'eFromTrans'+'ition'](_0x5e56cb);}['assignAnim'+'ation'](_0x5268f8,_0x138fd2,_0x28f914,_0x4a5965){const _0x68252b=_0x5268f8['split']('.');let _0x27491d=this['_findState'](_0x68252b[-0x1*-0x1fd9+0x37f*-0x4+-0x11dd]);_0x27491d||(_0x27491d=new ng(this,_0x68252b[0x1*-0x14a2+-0x1dc3+0x1*0x3265],_0x28f914),this['_states'][_0x68252b[-0x103d*0x1+0x504*-0x5+0x2951]]=_0x27491d,this['_stateName'+'s']['push'](_0x68252b[0x12c2+0x13*0x1f5+0x1*-0x37f1])),_0x27491d['addAnimati'+'on'](_0x68252b,_0x138fd2),this['_animEvalu'+'ator']['updateClip'+'Track'](_0x27491d['name'],_0x138fd2),_0x28f914!==void(-0x1a08+0x2*-0xcec+0x33e0)&&(_0x27491d['speed']=_0x28f914),_0x4a5965!==void(0xe15+0x87*0x31+-0x27ec)&&(_0x27491d['loop']=_0x4a5965),!this['_playing']&&this['_activate']&&this['playable']&&this['play'](),this['_activeSta'+'teDuration'+'Dirty']=!(0x1be7+0x23ce+0x1*-0x3fb5);}['removeNode'+'Animations'](_0x4edaa0){if(ch['indexOf'](_0x4edaa0)!==-(-0x1017*-0x1+0x1*0x11ae+-0x21c4))return!(0x4*-0x10+-0x5b9+0x5fa);const _0x22ba0b=this['_findState'](_0x4edaa0);return _0x22ba0b?(_0x22ba0b['animations']=[],!(-0x1ac9+0x1613+0x4b6)):(w['error']('Attempting'+'\x20to\x20unassi'+'gn\x20animati'+'on\x20tracks\x20'+'from\x20a\x20sta'+'te\x20that\x20do'+'es\x20not\x20exi'+'st.',_0x4edaa0),!(0x1*-0xe6e+0x3d7+0xa98));}['play'](_0x4194d9){_0x4194d9&&this['_transitio'+'nToState'](_0x4194d9),this['_playing']=!(-0x3e*0x46+-0x1*-0x1cb5+0x3eb*-0x3);}['pause'](){this['_playing']=!(0x269c+0x10d*-0x19+-0xc56);}['reset'](){this['_previousS'+'tateName']=null,this['_activeSta'+'teName']=_o,this['_playing']=!(-0xdce*0x1+-0x12e3*-0x2+-0x17f7),this['_currTrans'+'itionTime']=-0x2*0x6b9+0x22b9*-0x1+0x302c,this['_totalTran'+'sitionTime']=-0x1e25+0x2548+-0x391*0x2,this['_isTransit'+'ioning']=!(-0x2*-0x1010+0xc80+-0x2c9f),this['_timeInSta'+'te']=-0x1653+-0x1764+-0x53*-0x8d,this['_timeInSta'+'teBefore']=-0x1fb1+0xaba+0x14f7*0x1,this['_animEvalu'+'ator']['removeClip'+'s']();}['rebind'](){this['_animEvalu'+'ator']['rebind']();}['update'](_0x52970c){if(!this['_playing'])return;let _0x98ccb7,_0x4ddf4b,_0x585da6;(this['activeStat'+'e']['loop']||this['_timeInSta'+'te']<this['activeStat'+'eDuration'])&&(this['_timeInSta'+'teBefore']=this['_timeInSta'+'te'],this['_timeInSta'+'te']+=_0x52970c*this['activeStat'+'e']['speed'],!this['activeStat'+'e']['loop']&&this['_timeInSta'+'te']>this['activeStat'+'eDuration']&&(this['_timeInSta'+'te']=this['activeStat'+'eDuration'],_0x52970c=this['activeStat'+'eDuration']-this['_timeInSta'+'teBefore']));const _0x44f36c=this['_findTrans'+'ition'](this['_activeSta'+'teName']);if(_0x44f36c&&this['updateStat'+'eFromTrans'+'ition'](_0x44f36c),this['_isTransit'+'ioning']){if(this['_currTrans'+'itionTime']+=_0x52970c,this['_currTrans'+'itionTime']<=this['_totalTran'+'sitionTime']){const _0x437222=this['_totalTran'+'sitionTime']!==-0x267a+-0x1060+0x36da?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0xfa7*-0x1+0x146*-0x9+-0x430;for(let _0x3eadd8=-0x8*0x31+-0x1ca8+0x1e3*0x10;_0x3eadd8<this['_transitio'+'nPreviousS'+'tates']['length'];_0x3eadd8++){_0x98ccb7=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x3eadd8]['name']);const _0x7c6c5f=this['_transitio'+'nPreviousS'+'tates'][_0x3eadd8]['weight'];for(let _0x1c5232=0x2251+0xa7*-0x36+0xe9;_0x1c5232<_0x98ccb7['animations']['length'];_0x1c5232++)_0x4ddf4b=_0x98ccb7['animations'][_0x1c5232],_0x585da6=this['_animEvalu'+'ator']['findClip'](_0x4ddf4b['name']+'.previous.'+_0x3eadd8),_0x585da6&&(_0x585da6['blendWeigh'+'t']=(-0x1*-0x84a+0x11f4+-0x8bf*0x3-_0x437222)*_0x4ddf4b['normalized'+'Weight']*_0x7c6c5f);}_0x98ccb7=this['activeStat'+'e'];for(let _0x4919a1=0x2603*-0x1+0x1be*-0xa+0x17*0x269;_0x4919a1<_0x98ccb7['animations']['length'];_0x4919a1++)_0x4ddf4b=_0x98ccb7['animations'][_0x4919a1],this['_animEvalu'+'ator']['findClip'](_0x4ddf4b['name'])['blendWeigh'+'t']=_0x437222*_0x4ddf4b['normalized'+'Weight'];}else{this['_isTransit'+'ioning']=!(0xb*-0x249+-0x6*-0x641+0x13d*-0xa);const _0x15f9b6=this['activeStat'+'eAnimation'+'s']['length'],_0x377937=this['_animEvalu'+'ator']['clips']['length'];for(let _0x141a49=-0x2d3+0x1ad2+-0x17ff;_0x141a49<_0x377937-_0x15f9b6;_0x141a49++)this['_animEvalu'+'ator']['removeClip'](0x4*-0x33f+0x74d+0x5af);this['_transitio'+'nPreviousS'+'tates']=[],_0x98ccb7=this['activeStat'+'e'];for(let _0x23b491=0x3b*0x9f+-0x18c7+-0xbde;_0x23b491<_0x98ccb7['animations']['length'];_0x23b491++)_0x4ddf4b=_0x98ccb7['animations'][_0x23b491],_0x585da6=this['_animEvalu'+'ator']['findClip'](_0x4ddf4b['name']),_0x585da6&&(_0x585da6['blendWeigh'+'t']=_0x4ddf4b['normalized'+'Weight']);}}else{if(this['activeStat'+'e']['_blendTree']['constructo'+'r']!==sl){_0x98ccb7=this['activeStat'+'e'];for(let _0x205999=0x1ee0*0x1+-0x5b0+-0x1930;_0x205999<_0x98ccb7['animations']['length'];_0x205999++)_0x4ddf4b=_0x98ccb7['animations'][_0x205999],_0x585da6=this['_animEvalu'+'ator']['findClip'](_0x4ddf4b['name']),_0x585da6&&(_0x585da6['blendWeigh'+'t']=_0x4ddf4b['normalized'+'Weight'],_0x4ddf4b['parent']['syncAnimat'+'ions']&&(_0x585da6['speed']=_0x4ddf4b['speed']));}}this['_animEvalu'+'ator']['update'](_0x52970c,this['activeStat'+'e']['hasAnimati'+'ons']);}}const ef=new J(),lc=new D(),lo=new re(),co=new ie(),ho=new le();class Oi extends pr{constructor(_0x59b3ec,_0x50095c,_0x32e1e4,_0x4ea0a3,_0x22f0c6){super(_0x50095c),this['animCompon'+'ent']=_0x59b3ec,this['_mask']=_0x4ea0a3,this['layerName']=_0x32e1e4,this['layerIndex']=_0x22f0c6;}static['_packFloat'](_0x22cbe3){return _0x22cbe3[-0x119*-0xf+-0x1b32+0xabb];}static['_packBoole'+'an'](_0x41526d){return!!_0x41526d[-0x195c+-0xec5+0x2821];}static['_packVec2'](_0x73ecc4){return ef['x']=_0x73ecc4[0x2032+0xf92+-0x1*0x2fc4],ef['y']=_0x73ecc4[0xb61+0x1dc6+0xe5*-0x2e],ef;}static['_packVec3'](_0x56e84a){return lc['x']=_0x56e84a[0xb*0x58+0x9c4+-0x3*0x484],lc['y']=_0x56e84a[0x250e+-0x1f9*0x7+0x77*-0x32],lc['z']=_0x56e84a[0x195e+-0x1ca5*0x1+-0x1d*-0x1d],lc;}static['_packVec4'](_0x2c9fd2){return lo['x']=_0x2c9fd2[0x5*-0x707+-0x1fd9+0x2*0x217e],lo['y']=_0x2c9fd2[0x20ff*-0x1+0x1805+-0x8fb*-0x1],lo['z']=_0x2c9fd2[0x1e7e+0xf79+-0x2df5],lo['w']=_0x2c9fd2[0x44*-0x49+0x16f6*-0x1+-0x5*-0x879],lo;}static['_packColor'](_0x57d961){return co['r']=_0x57d961[0xf68+-0x9a*-0x13+-0xe5*0x1e],co['g']=_0x57d961[0xe50+-0x1a86+0xc37],co['b']=_0x57d961[0x12d1+0x8a*0x18+-0x387*0x9],co['a']=_0x57d961[-0x2*-0x134f+-0x1*0xeb6+-0x17e5],co;}static['_packQuat'](_0x2c1a0b){return ho['x']=_0x2c1a0b[0x1*-0xfd1+-0x1e4*0x8+0x1ef1],ho['y']=_0x2c1a0b[-0x2165*0x1+0x3*0x122+0x1e00],ho['z']=_0x2c1a0b[0x11d+0x21eb+-0x2306],ho['w']=_0x2c1a0b[0xfc1+-0x1*0x47c+-0xb42],ho;}['resolve'](_0x3f63f1){const _0x3b1cb9=Jr['encode'](_0x3f63f1['entityPath'],_0x3f63f1['component'],_0x3f63f1['propertyPa'+'th']);let _0x3540a4=this['targetCach'+'e'][_0x3b1cb9];if(_0x3540a4)return _0x3540a4;let _0x4e9c60,_0x59f536,_0x5a03ed;switch(_0x3f63f1['component']){case'entity':_0x4e9c60=this['_getEntity'+'FromHierar'+'chy'](_0x3f63f1['entityPath']),_0x5a03ed=Jr['encode'](_0x4e9c60['path'],'entity',_0x3f63f1['propertyPa'+'th']),_0x59f536=_0x4e9c60;break;case'graph':if(_0x59f536=this['findNode'](_0x3f63f1),!_0x59f536)return null;_0x5a03ed=Jr['encode'](_0x59f536['path'],'graph',_0x3f63f1['propertyPa'+'th']);break;default:if(_0x4e9c60=this['_getEntity'+'FromHierar'+'chy'](_0x3f63f1['entityPath']),_0x59f536=_0x4e9c60['findCompon'+'ent'](_0x3f63f1['component']),!_0x59f536)return null;_0x5a03ed=Jr['encode'](_0x4e9c60['path'],_0x3f63f1['component'],_0x3f63f1['propertyPa'+'th']);break;}return _0x3540a4=this['_createAni'+'mTargetFor'+'Property'](_0x59f536,_0x3f63f1['propertyPa'+'th'],_0x5a03ed),this['targetCach'+'e'][_0x3b1cb9]=_0x3540a4,_0x3540a4;}['update'](_0x4de341){const _0x11121f=this['activeNode'+'s'];if(_0x11121f){for(let _0x2598e7=0xaf5+0x265e+-0x3153*0x1;_0x2598e7<_0x11121f['length'];_0x2598e7++)_0x11121f[_0x2598e7]['_dirtifyLo'+'cal']();}}['_getEntity'+'FromHierar'+'chy'](_0x14c2c5){if(!this['animCompon'+'ent']['entity']['name']===_0x14c2c5[0x12b*-0x7+-0x19db*0x1+0x2208])return null;const _0x2189e7=this['animCompon'+'ent']['entity'];return _0x14c2c5['length']===-0x2c*-0x13+0x182*0x1+-0x25*0x21?_0x2189e7:_0x2189e7['_parent']['findByPath'](_0x14c2c5);}['_resolvePa'+'th'](_0xc1d75e,_0x5ba6c8,_0x40823a){const _0x51762e=_0x5ba6c8['length']-(_0x40823a?-0x112b+-0xf79+0x20a4:-0xbb1+-0x10e*-0x1d+-0x12e4);for(let _0x1121c4=-0x211*0x6+0x2be+-0x67*-0x18;_0x1121c4<_0x51762e;_0x1121c4++)_0xc1d75e=_0xc1d75e[_0x5ba6c8[_0x1121c4]];return _0xc1d75e;}['_setter'](_0x470a24,_0x4dc757,_0x465c18){const _0x5a9fca=this['_resolvePa'+'th'](_0x470a24,_0x4dc757),_0x2992a9=_0x4dc757[_0x4dc757['length']-(-0x6b*0x49+-0x16c5+0x3549*0x1)],_0x1ae667='set'+_0x2992a9['substring'](-0x17*-0xab+0x1976+-0x1*0x28d3,-0x65f+0x13*0x71+0x67*-0x5)['toUpperCas'+'e']()+_0x2992a9['substring'](0xfe3+0xd3a+-0x12*0x19e);if(_0x5a9fca[_0x1ae667]){let _0x347b10=_0x5a9fca['get'+_0x2992a9['substring'](-0x6f0+-0x7*-0x43f+-0x16c9,0x1a19+0x5*0x672+-0x3a52)['toUpperCas'+'e']()+_0x2992a9['substring'](-0x4*0x9a7+-0xb18+0x31b5)]['bind'](_0x5a9fca)();_0x347b10=[_0x347b10['x'],_0x347b10['y'],_0x347b10['z'],_0x347b10['w']];const _0x18870c=_0x5a9fca[_0x1ae667]['bind'](_0x5a9fca);return{'set':_0x2cf05c=>{_0x18870c(_0x465c18(_0x2cf05c));},'get':()=>_0x347b10};}const _0x124769=_0x5a9fca[_0x2992a9];if(typeof _0x124769=='object'&&_0x124769['hasOwnProp'+'erty']('copy'))return function(_0x4c8f00){_0x124769['copy'](_0x465c18(_0x4c8f00));};if([J,D,re,ie,le]['indexOf'](_0x5a9fca['constructo'+'r'])!==-(0x23f0+-0x4*-0x952+-0x4937)&&_0x4dc757['length']>0x1*0x856+0xf15+0x9*-0x29a){const _0x3f8f1e=_0x4dc757['length']>-0x1*0x128d+0xb74+-0x6b*-0x11?this['_resolvePa'+'th'](_0x470a24,_0x4dc757['slice'](-0x137a+0x187c+-0x502*0x1,-(0x1*-0x4a5+-0x1512+0x19b8))):_0x470a24,_0x35398d=_0x4dc757[_0x4dc757['length']-(-0x3*0x772+-0x1*0xe02+0x34e*0xb)];return function(_0x6f7b83){_0x5a9fca[_0x2992a9]=_0x465c18(_0x6f7b83),_0x3f8f1e[_0x35398d]=_0x5a9fca;};}return function(_0x541657){_0x5a9fca[_0x2992a9]=_0x465c18(_0x541657);};}['_createAni'+'mTargetFor'+'Property'](_0x10c5f0,_0x2dca55,_0x2200ae){if(this['handlers']&&_0x2dca55[0x1*-0x10fd+-0xbaa+0x1ca7]['startsWith']('weight.'))return this['handlers']['weight'](_0x10c5f0,_0x2dca55[-0x3f7+0x7a4*0x2+-0xb51]['replace']('weight.',''));if(this['handlers']&&_0x2dca55[-0xb*-0x27d+-0x614+-0x3*0x719]==='material'&&_0x2dca55['length']===0x11bc+0xbcc+-0xec3*0x2){const _0x3d0313=_0x2dca55[0xda7+-0x1f7a+0x11d4];if(_0x3d0313['endsWith']('Map'))return this['handlers']['materialTe'+'xture'](_0x10c5f0,_0x3d0313);}const _0x5ace95=this['_resolvePa'+'th'](_0x10c5f0,_0x2dca55,!(0x1*0x265a+0x17*0x79+-0x3139));if(typeof _0x5ace95>'u')return null;let _0xc68a06,_0x171d10,_0x3baedb;if(typeof _0x5ace95=='number')_0xc68a06=this['_setter'](_0x10c5f0,_0x2dca55,Oi['_packFloat']),_0x171d10='vector',_0x3baedb=0xbe8+0x19da+-0x78d*0x5;else{if(typeof _0x5ace95=='boolean')_0xc68a06=this['_setter'](_0x10c5f0,_0x2dca55,Oi['_packBoole'+'an']),_0x171d10='vector',_0x3baedb=0x8*-0x224+-0x2073*-0x1+-0xf52;else{if(typeof _0x5ace95=='object')switch(_0x5ace95['constructo'+'r']){case J:_0xc68a06=this['_setter'](_0x10c5f0,_0x2dca55,Oi['_packVec2']),_0x171d10='vector',_0x3baedb=-0x44b*-0x4+0x1*0x10d+0x1*-0x1237;break;case D:_0xc68a06=this['_setter'](_0x10c5f0,_0x2dca55,Oi['_packVec3']),_0x171d10='vector',_0x3baedb=0x15*0x1c+0x1509+0x4aa*-0x5;break;case re:_0xc68a06=this['_setter'](_0x10c5f0,_0x2dca55,Oi['_packVec4']),_0x171d10='vector',_0x3baedb=-0x20e*-0xa+-0x1*-0x2146+0xc2*-0x47;break;case ie:_0xc68a06=this['_setter'](_0x10c5f0,_0x2dca55,Oi['_packColor']),_0x171d10='vector',_0x3baedb=-0x21d7+-0x173*-0x8+0x29*0x8b;break;case le:_0xc68a06=this['_setter'](_0x10c5f0,_0x2dca55,Oi['_packQuat']),_0x171d10='quaternion',_0x3baedb=0x188c+-0x3bb+-0x429*0x5;break;default:return null;}}}return _0x2dca55['indexOf']('material')!==-(-0xe*0x2b9+0x1f4a+0x6d5)?new Yf(_0x12ae0e=>{_0xc68a06(_0x12ae0e),_0x10c5f0['material']['update']();},_0x171d10,_0x3baedb,_0x2200ae):new Yf(_0xc68a06,_0x171d10,_0x3baedb,_0x2200ae);}['rebind'](){this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={},this['animCompon'+'ent']['rootBone']?this['graph']=this['animCompon'+'ent']['rootBone']:this['graph']=this['animCompon'+'ent']['entity'];const _0x5b5286={},_0x47fef9=function(_0xd2499){_0x5b5286[_0xd2499['name']]=_0xd2499;for(let _0x2bf4bd=0x1*0x10c3+0x21ee+-0x32b1;_0x2bf4bd<_0xd2499['children']['length'];++_0x2bf4bd)_0x47fef9(_0xd2499['children'][_0x2bf4bd]);};_0x47fef9(this['graph']),this['nodes']=_0x5b5286;}}class tL{constructor(_0x57392e,_0x29b522,_0x2ccbfc,_0x569081=0x7*0x93+-0x1ad0+0x4*0x5b3,_0x155d74=av){h(this,'_name'),h(this,'_controlle'+'r'),h(this,'_component'),h(this,'_weight'),h(this,'_blendType'),h(this,'_mask',null),h(this,'_blendTime',0x230*0x1+-0xcd3+-0x7*-0x185),h(this,'_blendTime'+'Elapsed',0x396*-0x7+-0xd*0x161+-0x1*-0x2b07),h(this,'_startingW'+'eight',-0x30*-0x5c+0x1*0x25ab+-0x36eb),h(this,'_targetWei'+'ght',0xa7*-0x39+-0x2*-0xaa7+0xfe1),(this['_name']=_0x57392e,this['_controlle'+'r']=_0x29b522,this['_component']=_0x2ccbfc,this['_weight']=_0x569081,this['_blendType']=_0x155d74);}get['name'](){return this['_name'];}set['playing'](_0x5604e7){this['_controlle'+'r']['playing']=_0x5604e7;}get['playing'](){return this['_controlle'+'r']['playing'];}get['playable'](){return this['_controlle'+'r']['playable'];}get['activeStat'+'e'](){return this['_controlle'+'r']['activeStat'+'eName'];}get['previousSt'+'ate'](){return this['_controlle'+'r']['previousSt'+'ateName'];}get['activeStat'+'eProgress'](){return this['_controlle'+'r']['activeStat'+'eProgress'];}get['activeStat'+'eDuration'](){return this['_controlle'+'r']['activeStat'+'eDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x2a1c7c){const _0x1a86cb=this['_controlle'+'r'],_0x325663=_0x1a86cb['playing'];_0x1a86cb['playing']=!(-0x2368+0x1f18+-0x5c*-0xc),_0x1a86cb['activeStat'+'eCurrentTi'+'me']=_0x2a1c7c,_0x325663||_0x1a86cb['update'](-0x11ef*0x2+0xc1*0x13+0x44f*0x5),_0x1a86cb['playing']=_0x325663;}get['activeStat'+'eCurrentTi'+'me'](){return this['_controlle'+'r']['activeStat'+'eCurrentTi'+'me'];}get['transition'+'ing'](){return this['_controlle'+'r']['transition'+'ing'];}get['transition'+'Progress'](){return this['transition'+'ing']?this['_controlle'+'r']['transition'+'Progress']:null;}get['states'](){return this['_controlle'+'r']['states'];}set['weight'](_0x29d922){this['_weight']=_0x29d922,this['_component']['dirtifyTar'+'gets']();}get['weight'](){return this['_weight'];}set['blendType'](_0x18e328){_0x18e328!==this['_blendType']&&(this['_blendType']=_0x18e328,this['_controlle'+'r']['normalizeW'+'eights']&&this['_component']['rebind']());}get['blendType'](){return this['_blendType'];}set['mask'](_0x280268){this['_controlle'+'r']['assignMask'](_0x280268)&&this['_component']['rebind'](),this['_mask']=_0x280268;}get['mask'](){return this['_mask'];}['play'](_0x2b2661){this['_controlle'+'r']['play'](_0x2b2661);}['pause'](){this['_controlle'+'r']['pause']();}['reset'](){this['_controlle'+'r']['reset']();}['rebind'](){this['_controlle'+'r']['rebind']();}['update'](_0xa84f97){this['_blendTime']&&(this['_blendTime'+'Elapsed']<this['_blendTime']?(this['weight']=Y['lerp'](this['_startingW'+'eight'],this['_targetWei'+'ght'],this['_blendTime'+'Elapsed']/this['_blendTime']),this['_blendTime'+'Elapsed']+=_0xa84f97):(this['weight']=this['_targetWei'+'ght'],this['_blendTime']=0x34a*-0x1+-0x28*-0x2f+-0x40e,this['_blendTime'+'Elapsed']=0x723*-0x4+0x20be+0x166*-0x3,this['_startingW'+'eight']=-0xe01+0x7e5+0x1*0x61c,this['_targetWei'+'ght']=0x9d5+-0x1*0x224d+0x1878)),this['_controlle'+'r']['update'](_0xa84f97);}['blendToWei'+'ght'](_0x5e09eb,_0xdc4c9c){this['_startingW'+'eight']=this['weight'],this['_targetWei'+'ght']=_0x5e09eb,this['_blendTime']=Math['max'](-0x1*0xc4d+-0x1f4f+0x15ce*0x2,_0xdc4c9c),this['_blendTime'+'Elapsed']=0x156e+0x982+-0x3*0xa50;}['assignAnim'+'ation'](_0x438f9f,_0x246f67,_0x3dd780,_0xadf87a){if(!(_0x246f67 instanceof Zi)){w['error']('assignAnim'+'ation:\x20ani'+'mTrack\x20sup'+'plied\x20to\x20f'+'unction\x20wa'+'s\x20not\x20of\x20t'+'ype\x20AnimTr'+'ack');return;}this['_controlle'+'r']['assignAnim'+'ation'](_0x438f9f,_0x246f67,_0x3dd780,_0xadf87a),this['_controlle'+'r']['_transitio'+'ns']['length']===0x7*-0x330+0x104b+-0x43*-0x17&&this['_controlle'+'r']['_transitio'+'ns']['push'](new hh({'from':'START','to':_0x438f9f})),this['_component']['activate']&&this['_component']['playable']&&(this['_component']['playing']=!(0x1*-0xdcc+-0x1eb9+0x189*0x1d));}['removeNode'+'Animations'](_0x581045){this['_controlle'+'r']['removeNode'+'Animations'](_0x581045)&&(this['_component']['playing']=!(0x1*-0x1e94+-0x1ab*0x5+0x1*0x26ec));}['getAnimati'+'onAsset'](_0x4bfdf9){return this['_component']['animationA'+'ssets'][this['name']+':'+_0x4bfdf9];}['transition'](_0x66aba5,_0x2a5c43=-0x4e2+-0x4ed*-0x1+-0xb,_0x432c30=null){this['_controlle'+'r']['updateStat'+'eFromTrans'+'ition'](new hh({'from':this['_controlle'+'r']['activeStat'+'eName'],'to':_0x66aba5,'time':_0x2a5c43,'transitionOffset':_0x432c30}));}}class Ic{constructor(_0x1751a7){if(this['_layers']=[],this['_parameter'+'s']={},Array['isArray'](_0x1751a7['layers']))this['_layers']=_0x1751a7['layers'];else for(const _0x1d6d17 in _0x1751a7['layers']){const _0x37ee53=_0x1751a7['layers'][_0x1d6d17],_0x5b6156={'name':_0x37ee53['name'],'blendType':_0x37ee53['blendType'],'weight':_0x37ee53['weight'],'states':[],'transitions':[]};for(let _0x595156=-0x5b5+-0x26cb+0x80*0x59;_0x595156<_0x37ee53['states']['length'];_0x595156++)_0x5b6156['states']['push'](_0x1751a7['states'][_0x37ee53['states'][_0x595156]]);for(let _0x5d5dc1=-0x1102+-0xbf*-0x15+0x157;_0x5d5dc1<_0x37ee53['transition'+'s']['length'];_0x5d5dc1++){const _0xd09dcb=_0x1751a7['transition'+'s'][_0x37ee53['transition'+'s'][_0x5d5dc1]];if(_0xd09dcb['conditions']&&!Array['isArray'](_0xd09dcb['conditions'])){const _0x42f02e=Object['keys'](_0xd09dcb['conditions']),_0x17fc47=[];for(let _0x2e26f4=0x1c8e+-0x2377+-0x1d*-0x3d;_0x2e26f4<_0x42f02e['length'];_0x2e26f4++){const _0x172378=_0xd09dcb['conditions'][_0x42f02e[_0x2e26f4]];_0x172378['parameterN'+'ame']&&_0x17fc47['push'](_0x172378);}_0xd09dcb['conditions']=_0x17fc47;}Number['isInteger'](_0xd09dcb['from'])&&(_0xd09dcb['from']=_0x1751a7['states'][_0xd09dcb['from']]['name']),Number['isInteger'](_0xd09dcb['to'])&&(_0xd09dcb['to']=_0x1751a7['states'][_0xd09dcb['to']]['name']),_0x5b6156['transition'+'s']['push'](_0xd09dcb);}this['_layers']['push'](_0x5b6156);}for(const _0xe5f3a0 in _0x1751a7['parameters']){const _0x2e3da1=_0x1751a7['parameters'][_0xe5f3a0];this['_parameter'+'s'][_0x2e3da1['name']]={'type':_0x2e3da1['type'],'value':_0x2e3da1['value']};}}get['parameters'](){return Object['assign']({},this['_parameter'+'s']);}get['layers'](){return this['_layers'];}}class cv extends we{constructor(){super(...arguments),h(this,'_stateGrap'+'hAsset',null),h(this,'_animation'+'Assets',{}),h(this,'_speed',0x14cf+0xd9*-0x1d+0x3c7),h(this,'_activate',!(-0x16d2+0x1ab+0x1527)),h(this,'_playing',!(0x522+-0x85+-0x49c*0x1)),h(this,'_rootBone',null),h(this,'_stateGrap'+'h',null),h(this,'_layers',[]),h(this,'_layerIndi'+'ces',{}),h(this,'_parameter'+'s',{}),h(this,'_targets',{}),h(this,'_consumedT'+'riggers',new Set()),h(this,'_normalize'+'Weights',!(0x3*-0x9e4+0x2659+-0x8ac)),h(this,'findParame'+'ter',_0x455ff2=>this['_parameter'+'s'][_0x455ff2]),h(this,'consumeTri'+'gger',_0x543df2=>{this['_consumedT'+'riggers']['add'](_0x543df2);});}set['stateGraph'+'Asset'](_0x8da480){if(_0x8da480===null){this['removeStat'+'eGraph']();return;}this['_stateGrap'+'hAsset']&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);let _0x3e31fd,_0x12855b;_0x8da480 instanceof pe?(_0x3e31fd=_0x8da480['id'],_0x12855b=this['system']['app']['assets']['get'](_0x3e31fd),_0x12855b||(this['system']['app']['assets']['add'](_0x8da480),_0x12855b=this['system']['app']['assets']['get'](_0x3e31fd))):(_0x3e31fd=_0x8da480,_0x12855b=this['system']['app']['assets']['get'](_0x3e31fd)),!(!_0x12855b||this['_stateGrap'+'hAsset']===_0x3e31fd)&&(_0x12855b['resource']?(this['_stateGrap'+'h']=_0x12855b['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']),_0x12855b['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this)):(_0x12855b['once']('load',_0x35125d=>{this['_stateGrap'+'h']=_0x35125d['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']);}),_0x12855b['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this),this['system']['app']['assets']['load'](_0x12855b)),this['_stateGrap'+'hAsset']=_0x3e31fd);}get['stateGraph'+'Asset'](){return this['_stateGrap'+'hAsset'];}set['normalizeW'+'eights'](_0x12b7d5){this['_normalize'+'Weights']=_0x12b7d5,this['unbind']();}get['normalizeW'+'eights'](){return this['_normalize'+'Weights'];}set['animationA'+'ssets'](_0x54723c){this['_animation'+'Assets']=_0x54723c,this['loadAnimat'+'ionAssets']();}get['animationA'+'ssets'](){return this['_animation'+'Assets'];}set['speed'](_0x28ccb0){this['_speed']=_0x28ccb0;}get['speed'](){return this['_speed'];}set['activate'](_0x1d550e){this['_activate']=_0x1d550e;}get['activate'](){return this['_activate'];}set['playing'](_0x1a5fe7){this['_playing']=_0x1a5fe7;}get['playing'](){return this['_playing'];}set['rootBone'](_0x56f50b){if(typeof _0x56f50b=='string'){const _0x4ddd4a=this['entity']['root']['findByGuid'](_0x56f50b);w['assert'](_0x4ddd4a,'rootBone\x20e'+'ntity\x20for\x20'+'supplied\x20g'+'uid:'+_0x56f50b+('\x20cannot\x20be'+'\x20found\x20in\x20'+'the\x20scene')),this['_rootBone']=_0x4ddd4a;}else _0x56f50b instanceof lt?this['_rootBone']=_0x56f50b:this['_rootBone']=null;this['rebind']();}get['rootBone'](){return this['_rootBone'];}set['stateGraph'](_0x1cacee){this['_stateGrap'+'h']=_0x1cacee;}get['stateGraph'](){return this['_stateGrap'+'h'];}get['layers'](){return this['_layers'];}set['layerIndic'+'es'](_0x5a8979){this['_layerIndi'+'ces']=_0x5a8979;}get['layerIndic'+'es'](){return this['_layerIndi'+'ces'];}set['parameters'](_0x59965e){this['_parameter'+'s']=_0x59965e;}get['parameters'](){return this['_parameter'+'s'];}set['targets'](_0x4c3e83){this['_targets']=_0x4c3e83;}get['targets'](){return this['_targets'];}get['playable'](){for(let _0x32e20a=-0x1e*-0x6e+0x199*-0x9+-0x1*-0x17d;_0x32e20a<this['_layers']['length'];_0x32e20a++)if(!this['_layers'][_0x32e20a]['playable'])return!(0x15d*-0xb+-0x57*0x7+0x1*0x1161);return!(0x1a98+0x1*0x1b73+0xacf*-0x5);}get['baseLayer'](){return this['_layers']['length']>-0x238f*-0x1+0x149+0x6*-0x624?this['_layers'][0x13*-0x5d+-0x1f3+0x16*0x67]:null;}['_onStateGr'+'aphAssetCh'+'angeEvent'](_0x16bbf7){const _0x1f876f=this['animationA'+'ssets'],_0x4c840d=this['layers']['map'](_0x11d977=>_0x11d977['mask']);this['removeStat'+'eGraph'](),this['_stateGrap'+'h']=new Ic(_0x16bbf7['_data']),this['loadStateG'+'raph'](this['_stateGrap'+'h']),this['animationA'+'ssets']=_0x1f876f,this['loadAnimat'+'ionAssets'](),this['layers']['forEach']((_0x456e29,_0xdbf04e)=>{_0x456e29['mask']=_0x4c840d[_0xdbf04e];}),this['rebind']();}['dirtifyTar'+'gets'](){const _0x52e892=Object['values'](this['_targets']);for(let _0x126e57=-0x2f*0x20+0x4f+0x591;_0x126e57<_0x52e892['length'];_0x126e57++)_0x52e892[_0x126e57]['dirty']=!(0x150*0x8+0x150+0x6*-0x1f8);}['_addLayer']({name:_0x365270,states:_0x4ca2b7,transitions:_0x29d13d,weight:_0x5aea1d,mask:_0xc384ea,blendType:_0x49c090}){let _0x1e2965;this['rootBone']?_0x1e2965=this['rootBone']:_0x1e2965=this['entity'];const _0x42f60a=this['_layers']['length'],_0xcdf939=new Oi(this,_0x1e2965,_0x365270,_0xc384ea,_0x42f60a),_0x3c356a=new nv(_0xcdf939),_0x58c942=new eL(_0x3c356a,_0x4ca2b7,_0x29d13d,this['_activate'],this,this['findParame'+'ter'],this['consumeTri'+'gger']);return this['_layers']['push'](new tL(_0x365270,_0x58c942,this,_0x5aea1d,_0x49c090)),this['_layerIndi'+'ces'][_0x365270]=_0x42f60a,this['_layers'][_0x42f60a];}['addLayer'](_0x2e2abc,_0x30fe7e,_0x42c1ff,_0x4ccfcf){const _0x59ef26=this['findAnimat'+'ionLayer'](_0x2e2abc);if(_0x59ef26)return _0x59ef26;const _0x56bccb=[{'name':'START','speed':0x1}],_0x520373=[];return this['_addLayer']({'name':_0x2e2abc,'states':_0x56bccb,'transitions':_0x520373,'weight':_0x30fe7e,'mask':_0x42c1ff,'blendType':_0x4ccfcf});}['_assignPar'+'ameters'](_0xe7a1f){this['_parameter'+'s']={};const _0xe21e60=Object['keys'](_0xe7a1f['parameters']);for(let _0x5421fd=-0x48b+0x1*-0x26c3+0x2b4e;_0x5421fd<_0xe21e60['length'];_0x5421fd++){const _0x10ed91=_0xe21e60[_0x5421fd];this['_parameter'+'s'][_0x10ed91]={'type':_0xe7a1f['parameters'][_0x10ed91]['type'],'value':_0xe7a1f['parameters'][_0x10ed91]['value']};}}['loadStateG'+'raph'](_0x3d38c3){this['_stateGrap'+'h']=_0x3d38c3,this['_assignPar'+'ameters'](_0x3d38c3),this['_layers']=[];let _0x377ed5=!(0x33a*-0x1+0x1acf+-0x1*0x1794);for(let _0x46c54a=-0x35*0xb6+0x9d4+0x1bda;_0x46c54a<_0x3d38c3['layers']['length'];_0x46c54a++){const _0x1d4d1b=_0x3d38c3['layers'][_0x46c54a];this['_addLayer']({..._0x1d4d1b}),_0x1d4d1b['states']['some'](_0x2fa705=>_0x2fa705['blendTree'])&&(_0x377ed5=!(-0xdfc+0xcd9*-0x1+0x1ad5*0x1));}_0x377ed5||this['setupAnima'+'tionAssets']();}['setupAnima'+'tionAssets'](){for(let _0x374a70=0x14a1+0xcca*0x2+-0x2e35;_0x374a70<this['_layers']['length'];_0x374a70++){const _0x137f66=this['_layers'][_0x374a70],_0x475d14=_0x137f66['name'];for(let _0xc18443=-0x361+-0x283*-0x6+0x1*-0xbb1;_0xc18443<_0x137f66['states']['length'];_0xc18443++){const _0x3ccb20=_0x137f66['states'][_0xc18443];if(ch['indexOf'](_0x3ccb20)===-(-0x3fd*-0x7+0x2e*-0xc+-0x19c2)){const _0x3cccc8=_0x475d14+':'+_0x3ccb20;this['_animation'+'Assets'][_0x3cccc8]||(this['_animation'+'Assets'][_0x3cccc8]={'asset':null});}}}this['loadAnimat'+'ionAssets']();}['loadAnimat'+'ionAssets'](){for(let _0x4fa6e2=-0x2487+0x10b*-0x23+0x18*0x30b;_0x4fa6e2<this['_layers']['length'];_0x4fa6e2++){const _0x565d24=this['_layers'][_0x4fa6e2];for(let _0x498aa4=0x29*-0x58+-0x1f*0xfb+0x2c7d;_0x498aa4<_0x565d24['states']['length'];_0x498aa4++){const _0x25426c=_0x565d24['states'][_0x498aa4];if(ch['indexOf'](_0x25426c)!==-(-0x7*0x4a8+-0xd6a+-0x1*-0x2e03))continue;const _0x2370b0=this['_animation'+'Assets'][_0x565d24['name']+':'+_0x25426c];if(!_0x2370b0||!_0x2370b0['asset']){this['findAnimat'+'ionLayer'](_0x565d24['name'])['assignAnim'+'ation'](_0x25426c,Zi['EMPTY']);continue;}const _0x58a898=_0x2370b0['asset'],_0x42dd98=this['system']['app']['assets']['get'](_0x58a898);_0x42dd98&&(_0x42dd98['resource']?this['onAnimatio'+'nAssetLoad'+'ed'](_0x565d24['name'],_0x25426c,_0x42dd98):(_0x42dd98['once']('load',function(_0x4eba67,_0x57175c){return function(_0x19149a){this['onAnimatio'+'nAssetLoad'+'ed'](_0x4eba67,_0x57175c,_0x19149a);}['bind'](this);}['bind'](this)(_0x565d24['name'],_0x25426c)),this['system']['app']['assets']['load'](_0x42dd98)));}}}['onAnimatio'+'nAssetLoad'+'ed'](_0x2fdfd3,_0x4213e9,_0x4d957b){this['findAnimat'+'ionLayer'](_0x2fdfd3)['assignAnim'+'ation'](_0x4213e9,_0x4d957b['resource']);}['removeStat'+'eGraph'](){this['_stateGrap'+'h']=null,this['_stateGrap'+'hAsset']=null,this['_animation'+'Assets']={},this['_layers']=[],this['_layerIndi'+'ces']={},this['_parameter'+'s']={},this['_playing']=!(0xed8+-0x12a9*0x1+0x3d2),this['unbind'](),this['_targets']={};}['reset'](){this['_assignPar'+'ameters'](this['_stateGrap'+'h']);for(let _0xafe283=0xd77+0x1*-0x2146+0x1*0x13cf;_0xafe283<this['_layers']['length'];_0xafe283++){const _0x576c8a=this['_layers'][_0xafe283]['playing'];this['_layers'][_0xafe283]['reset'](),this['_layers'][_0xafe283]['playing']=_0x576c8a;}}['unbind'](){this['_normalize'+'Weights']||Object['keys'](this['_targets'])['forEach'](_0x3fea86=>{this['_targets'][_0x3fea86]['unbind']();});}['rebind'](){this['_targets']={};for(let _0x4e2f19=0x18f0+0x13d4+-0x2cc4;_0x4e2f19<this['_layers']['length'];_0x4e2f19++)this['_layers'][_0x4e2f19]['rebind']();}['findAnimat'+'ionLayer'](_0x57ff19){const _0x351f2a=this['_layerIndi'+'ces'][_0x57ff19];return this['_layers'][_0x351f2a]||null;}['addAnimati'+'onState'](_0x1dfe20,_0x50a943,_0x43f354=-0x117*-0x1d+0x101*0x13+-0x32ad,_0x14207b=!(-0x7*0x535+0x244*0x1+0x3*0xb65),_0x4e0ad5='Base'){var _0x56ef69;this['_stateGrap'+'h']||this['loadStateG'+'raph'](new Ic({'layers':[{'name':_0x4e0ad5,'states':[{'name':'START','speed':0x1},{'name':_0x1dfe20,'speed':_0x43f354,'loop':_0x14207b,'defaultState':!(0x182f+0x1fd*0x11+-0x39fc)}],'transitions':[{'from':'START','to':_0x1dfe20}]}],'parameters':{}}));const _0x31922d=this['findAnimat'+'ionLayer'](_0x4e0ad5);_0x31922d?_0x31922d['assignAnim'+'ation'](_0x1dfe20,_0x50a943,_0x43f354,_0x14207b):(_0x56ef69=this['addLayer'](_0x4e0ad5))==null||_0x56ef69['assignAnim'+'ation'](_0x1dfe20,_0x50a943,_0x43f354,_0x14207b);}['assignAnim'+'ation'](_0x5297db,_0x13f9a8,_0x4e0047,_0x4a2435=0x4*-0x1a6+0x2c9*-0x3+0xef4,_0x27814c=!(-0x1*-0xd7e+-0x26d8+0x195a)){if(!this['_stateGrap'+'h']&&_0x5297db['indexOf']('.')===-(0x544+-0x3*0x16e+-0xf9)){this['loadStateG'+'raph'](new Ic({'layers':[{'name':'Base','states':[{'name':'START','speed':0x1},{'name':_0x5297db,'speed':_0x4a2435,'loop':_0x27814c,'defaultState':!(-0x2*-0x9f0+-0x19fb*0x1+0x61b)}],'transitions':[{'from':'START','to':_0x5297db}]}],'parameters':{}})),this['baseLayer']['assignAnim'+'ation'](_0x5297db,_0x13f9a8);return;}const _0x47f71c=_0x4e0047?this['findAnimat'+'ionLayer'](_0x4e0047):this['baseLayer'];if(!_0x47f71c){w['error']('assignAnim'+'ation:\x20Try'+'ing\x20to\x20ass'+'ign\x20an\x20ani'+'m\x20track\x20to'+'\x20a\x20layer\x20t'+'hat\x20doesn\x27'+'t\x20exist');return;}_0x47f71c['assignAnim'+'ation'](_0x5297db,_0x13f9a8,_0x4a2435,_0x27814c);}['removeNode'+'Animations'](_0x15d6f5,_0x1392d4){const _0x723195=_0x1392d4?this['findAnimat'+'ionLayer'](_0x1392d4):this['baseLayer'];if(!_0x723195){w['error']('removeStat'+'eAnimation'+'s:\x20Trying\x20'+'to\x20remove\x20'+'animation\x20'+'tracks\x20fro'+'m\x20a\x20state\x20'+'before\x20the'+'\x20state\x20gra'+'ph\x20has\x20bee'+'n\x20loaded.\x20'+'Have\x20you\x20c'+'alled\x20load'+'StateGraph'+'?');return;}_0x723195['removeNode'+'Animations'](_0x15d6f5);}['getParamet'+'erValue'](_0x3b78a4,_0x5d1cbd){const _0x2e30ce=this['_parameter'+'s'][_0x3b78a4];if(_0x2e30ce&&_0x2e30ce['type']===_0x5d1cbd)return _0x2e30ce['value'];w['log']('Cannot\x20get'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x3b78a4+('\x22\x20of\x20type\x20'+'\x22')+_0x5d1cbd+'\x22');}['setParamet'+'erValue'](_0x1d1187,_0x2c5244,_0x4d56b4){const _0x5826ce=this['_parameter'+'s'][_0x1d1187];if(_0x5826ce&&_0x5826ce['type']===_0x2c5244){_0x5826ce['value']=_0x4d56b4;return;}w['log']('Cannot\x20set'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x1d1187+('\x22\x20of\x20type\x20'+'\x22')+_0x2c5244+'\x22');}['getFloat'](_0x45540b){return this['getParamet'+'erValue'](_0x45540b,rg);}['setFloat'](_0x1579cf,_0x27edcc){this['setParamet'+'erValue'](_0x1579cf,rg,_0x27edcc);}['getInteger'](_0x3f0e11){return this['getParamet'+'erValue'](_0x3f0e11,ig);}['setInteger'](_0x122c0d,_0x11f986){typeof _0x11f986=='number'&&_0x11f986%(-0x11*-0x1cd+-0x1672+-0x82a)===0x1eca+-0x2*-0x11cd+-0x4264?this['setParamet'+'erValue'](_0x122c0d,ig,_0x11f986):w['error']('Attempting'+'\x20to\x20assign'+'\x20non\x20integ'+'er\x20value\x20t'+'o\x20integer\x20'+'parameter',_0x122c0d,_0x11f986);}['getBoolean'](_0x2eddbc){return this['getParamet'+'erValue'](_0x2eddbc,ag);}['setBoolean'](_0x3e0807,_0x46c203){this['setParamet'+'erValue'](_0x3e0807,ag,!!_0x46c203);}['getTrigger'](_0xe3d4eb){return this['getParamet'+'erValue'](_0xe3d4eb,Dc);}['setTrigger'](_0x521312,_0x2e1139=!(-0x2245+0x8f0+0x1956)){this['setParamet'+'erValue'](_0x521312,Dc,!(0x1047+0x21dd*0x1+0x3224*-0x1)),_0x2e1139&&this['_consumedT'+'riggers']['add'](_0x521312);}['resetTrigg'+'er'](_0x310223){this['setParamet'+'erValue'](_0x310223,Dc,!(0x47a+0x1e77+-0x22f0));}['onBeforeRe'+'move'](){Number['isFinite'](this['_stateGrap'+'hAsset'])&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);}['update'](_0x1f1f35){for(let _0x59a5e0=-0x2*0x31f+0x3da+-0x4*-0x99;_0x59a5e0<this['layers']['length'];_0x59a5e0++)this['layers'][_0x59a5e0]['update'](_0x1f1f35*this['speed']);this['_consumedT'+'riggers']['forEach'](_0x238e9d=>{this['parameters'][_0x238e9d]['value']=!(0x11e4+-0x1b78+0xb*0xdf);}),this['_consumedT'+'riggers']['clear']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x25c240,_0x2ffa10){_0x25c240['rootBone']&&_0x2ffa10[_0x25c240['rootBone']['getGuid']()]?this['rootBone']=_0x2ffa10[_0x25c240['rootBone']['getGuid']()]:this['rebind']();}}class sL{constructor(){this['enabled']=!(-0x17*0x46+0x9d0+-0x386);}}const Jf=['enabled'];class iL extends ct{constructor(_0x1e07a4){super(_0x1e07a4),this['id']='anim',this['ComponentT'+'ype']=cv,this['DataType']=sL,this['schema']=Jf,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x406f92,_0x50402b,_0x158a88){super['initialize'+'ComponentD'+'ata'](_0x406f92,_0x50402b,Jf);const _0xa5ade1=['animationA'+'ssets','stateGraph','layers','masks'];Object['keys'](_0x50402b)['forEach'](_0x41826d=>{_0xa5ade1['includes'](_0x41826d)||(_0x406f92[_0x41826d]=_0x50402b[_0x41826d]);}),_0x50402b['stateGraph']&&(_0x406f92['stateGraph']=_0x50402b['stateGraph'],_0x406f92['loadStateG'+'raph'](_0x406f92['stateGraph'])),_0x50402b['layers']&&_0x50402b['layers']['forEach']((_0x4d6e28,_0x1f9c18)=>{_0x4d6e28['_controlle'+'r']['states']['forEach'](_0x4c4376=>{_0x4d6e28['_controlle'+'r']['_states'][_0x4c4376]['_animation'+'List']['forEach'](_0x9c80c5=>{if(!_0x9c80c5['animTrack']||_0x9c80c5['animTrack']===Zi['EMPTY']){const _0x583914=this['app']['assets']['get'](_0x4d6e28['_component']['_animation'+'Assets'][_0x4d6e28['name']+':'+_0x9c80c5['name']]['asset']);_0x583914&&!_0x583914['loaded']&&_0x583914['once']('load',()=>{_0x406f92['layers'][_0x1f9c18]['assignAnim'+'ation'](_0x9c80c5['name'],_0x583914['resource']);});}else _0x406f92['layers'][_0x1f9c18]['assignAnim'+'ation'](_0x9c80c5['name'],_0x9c80c5['animTrack']);});});}),_0x50402b['animationA'+'ssets']&&(_0x406f92['animationA'+'ssets']=Object['assign'](_0x406f92['animationA'+'ssets'],_0x50402b['animationA'+'ssets'])),_0x50402b['masks']&&Object['keys'](_0x50402b['masks'])['forEach'](_0x2f1bd4=>{if(_0x406f92['layers'][_0x2f1bd4]){const _0x4d9a04=_0x50402b['masks'][_0x2f1bd4]['mask'],_0xeaf767={};Object['keys'](_0x4d9a04)['forEach'](_0x3072ac=>{_0xeaf767[decodeURI(_0x3072ac)]=_0x4d9a04[_0x3072ac];}),_0x406f92['layers'][_0x2f1bd4]['mask']=_0xeaf767;}});}['onAnimatio'+'nUpdate'](_0x2fe3ce){const _0x3b2021=this['store'];for(const _0x5be343 in _0x3b2021)if(_0x3b2021['hasOwnProp'+'erty'](_0x5be343)){const _0x2c0eaf=_0x3b2021[_0x5be343]['entity']['anim'];_0x2c0eaf['data']['enabled']&&_0x2c0eaf['entity']['enabled']&&_0x2c0eaf['playing']&&_0x2c0eaf['update'](_0x2fe3ce);}}['cloneCompo'+'nent'](_0x1d37e3,_0x1916d8){let _0x4987ca;(!_0x1d37e3['anim']['rootBone']||_0x1d37e3['anim']['rootBone']===_0x1d37e3)&&(_0x4987ca={},_0x1d37e3['anim']['layers']['forEach']((_0x46bf88,_0x146737)=>{if(_0x46bf88['mask']){const _0x1c1335={};Object['keys'](_0x46bf88['mask'])['forEach'](_0x2bfb0e=>{const _0x40e1a5=_0x2bfb0e['split']('/');_0x40e1a5['shift']();const _0x17fc16=[_0x1916d8['name'],..._0x40e1a5]['join']('/');_0x1c1335[_0x17fc16]=_0x46bf88['mask'][_0x2bfb0e];}),_0x4987ca[_0x146737]={'mask':_0x1c1335};}}));const _0x5f15e8={'enabled':_0x1d37e3['anim']['enabled'],'stateGraphAsset':_0x1d37e3['anim']['stateGraph'+'Asset'],'animationAssets':_0x1d37e3['anim']['animationA'+'ssets'],'speed':_0x1d37e3['anim']['speed'],'activate':_0x1d37e3['anim']['activate'],'playing':_0x1d37e3['anim']['playing'],'rootBone':_0x1d37e3['anim']['rootBone'],'stateGraph':_0x1d37e3['anim']['stateGraph'],'layers':_0x1d37e3['anim']['layers'],'layerIndices':_0x1d37e3['anim']['layerIndic'+'es'],'parameters':_0x1d37e3['anim']['parameters'],'normalizeWeights':_0x1d37e3['anim']['normalizeW'+'eights'],'masks':_0x4987ca};return this['addCompone'+'nt'](_0x1916d8,_0x5f15e8);}['onBeforeRe'+'move'](_0x3defdf,_0x2728ad){_0x2728ad['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}}we['_buildAcce'+'ssors'](cv['prototype'],Jf);class hv extends we{['setCurrent'+'Listener'](){if(this['enabled']&&this['entity']['audioliste'+'ner']&&this['entity']['enabled']){this['system']['current']=this['entity'];const _0x54fedc=this['system']['current']['getPositio'+'n']();this['system']['manager']['listener']['setPositio'+'n'](_0x54fedc);}}['onEnable'](){this['setCurrent'+'Listener']();}['onDisable'](){this['system']['current']===this['entity']&&(this['system']['current']=null);}}class rL{constructor(){this['enabled']=!(0x553+0x1e8d+-0x23e0);}}const dv=['enabled'];class aL extends ct{constructor(_0x439591){super(_0x439591),this['id']='audioliste'+'ner',this['ComponentT'+'ype']=hv,this['DataType']=rL,this['schema']=dv,this['manager']=_0x439591['soundManag'+'er'],w['assert'](this['manager'],'AudioListe'+'nerCompone'+'ntSystem\x20c'+'annot\x20be\x20c'+'reated\x20wit'+'hout\x20sound'+'\x20manager'),this['current']=null,this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x5312ac,_0xbae55d,_0x1c24a9){_0x1c24a9=['enabled'],super['initialize'+'ComponentD'+'ata'](_0x5312ac,_0xbae55d,_0x1c24a9);}['onUpdate'](_0x28c6ac){if(this['current']){const _0x24c910=this['current']['getPositio'+'n']();this['manager']['listener']['setPositio'+'n'](_0x24c910);const _0x41bc2e=this['current']['getWorldTr'+'ansform']();this['manager']['listener']['setOrienta'+'tion'](_0x41bc2e);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](hv['prototype'],dv);const eu=-0x230d+0x24a9+-0x4*0x67,og=0x1534+0x109a+0x25cd*-0x1,Lc='group',tu='image',fv='text',Rc='stretch',nL='contain',oL='cover',ft={'DEFAULT':'DEFAULT','HOVER':'HOVER','PRESSED':'PRESSED','INACTIVE':'INACTIVE'},El={};El[ft['DEFAULT']]='_defaultTi'+'nt',El[ft['HOVER']]='hoverTint',El[ft['PRESSED']]='pressedTin'+'t',El[ft['INACTIVE']]='inactiveTi'+'nt';const bl={};bl[ft['DEFAULT']]='_defaultSp'+'riteAsset',bl[ft['HOVER']]='hoverSprit'+'eAsset',bl[ft['PRESSED']]='pressedSpr'+'iteAsset',bl[ft['INACTIVE']]='inactiveSp'+'riteAsset';const Al={};Al[ft['DEFAULT']]='_defaultSp'+'riteFrame',Al[ft['HOVER']]='hoverSprit'+'eFrame',Al[ft['PRESSED']]='pressedSpr'+'iteFrame',Al[ft['INACTIVE']]='inactiveSp'+'riteFrame';class It extends we{constructor(_0xc7c094,_0x48ab7d){super(_0xc7c094,_0x48ab7d),h(this,'_visualSta'+'te',ft['DEFAULT']),h(this,'_isHoverin'+'g',!(0x2a9*-0x5+-0x1129+0x1e77)),h(this,'_hoveringC'+'ounter',-0xf94*0x2+0x3*0x89+-0x11*-0x1bd),h(this,'_isPressed',!(0x5*-0x754+0x1a12+-0x1*-0xa93)),h(this,'_defaultTi'+'nt',new ie(0xedb+0xa89+-0x1963,-0x2*-0xe5+-0x3*-0xab2+-0x21df,0x1925*0x1+-0xbb+-0x1869,-0x3c8*0x6+-0x2*-0x2a5+-0xf*-0x129)),h(this,'_defaultSp'+'riteAsset',null),h(this,'_defaultSp'+'riteFrame',0x1401+0x29*0x7+-0x1520),h(this,'_imageEnti'+'ty',null),h(this,'_evtElemen'+'tAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntRemove',null),h(this,'_evtImageE'+'ntityEleme'+'ntColor',null),h(this,'_evtImageE'+'ntityEleme'+'ntOpacity',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame',null),(this['_visualSta'+'te']=ft['DEFAULT'],this['_isHoverin'+'g']=!(0x1cc0+0x1*-0x1e52+0x193),this['_hoveringC'+'ounter']=-0x1*-0xc61+-0x1f97+0x1336,this['_isPressed']=!(0x1*-0x15a+0x3d*-0x94+-0x271*-0xf),this['_defaultTi'+'nt']=new ie(0x1c8e+0xdfc+-0x2a89,-0xfee+0x1ebc+-0xecd,0xf6b+-0x1*0xa61+-0x509,-0x46b*-0x1+0x1a9d*-0x1+0x1*0x1633),this['_defaultSp'+'riteAsset']=null,this['_defaultSp'+'riteFrame']=-0x1450+-0xd*-0x21d+-0x729,this['_toggleLif'+'ecycleList'+'eners']('on',_0xc7c094));}get['data'](){const _0x69c0d8=this['system']['store'][this['entity']['getGuid']()];return _0x69c0d8?_0x69c0d8['data']:null;}set['enabled'](_0x358b69){this['_setValue']('enabled',_0x358b69);}get['enabled'](){return this['data']['enabled'];}set['active'](_0x35daa5){this['_setValue']('active',_0x35daa5);}get['active'](){return this['data']['active'];}set['imageEntit'+'y'](_0x2da24a){if(this['_imageEnti'+'ty']!==_0x2da24a){const _0x3cdba1=typeof _0x2da24a=='string';if(this['_imageEnti'+'ty']&&_0x3cdba1&&this['_imageEnti'+'ty']['getGuid']()===_0x2da24a)return;this['_imageEnti'+'ty']&&this['_imageEnti'+'tyUnsubscr'+'ibe'](),_0x2da24a instanceof Ie?this['_imageEnti'+'ty']=_0x2da24a:_0x3cdba1?this['_imageEnti'+'ty']=this['system']['app']['getEntityF'+'romIndex'](_0x2da24a)||null:this['_imageEnti'+'ty']=null,this['_imageEnti'+'ty']&&this['_imageEnti'+'tySubscrib'+'e'](),this['_imageEnti'+'ty']?this['data']['imageEntit'+'y']=this['_imageEnti'+'ty']['getGuid']():_0x3cdba1&&_0x2da24a&&(this['data']['imageEntit'+'y']=_0x2da24a);}}get['imageEntit'+'y'](){return this['_imageEnti'+'ty'];}set['hitPadding'](_0xe15f34){this['_setValue']('hitPadding',_0xe15f34);}get['hitPadding'](){return this['data']['hitPadding'];}set['transition'+'Mode'](_0x49ed85){this['_setValue']('transition'+'Mode',_0x49ed85);}get['transition'+'Mode'](){return this['data']['transition'+'Mode'];}set['hoverTint'](_0x2d1618){this['_setValue']('hoverTint',_0x2d1618);}get['hoverTint'](){return this['data']['hoverTint'];}set['pressedTin'+'t'](_0x4f1953){this['_setValue']('pressedTin'+'t',_0x4f1953);}get['pressedTin'+'t'](){return this['data']['pressedTin'+'t'];}set['inactiveTi'+'nt'](_0x2e0701){this['_setValue']('inactiveTi'+'nt',_0x2e0701);}get['inactiveTi'+'nt'](){return this['data']['inactiveTi'+'nt'];}set['fadeDurati'+'on'](_0x31b974){this['_setValue']('fadeDurati'+'on',_0x31b974);}get['fadeDurati'+'on'](){return this['data']['fadeDurati'+'on'];}set['hoverSprit'+'eAsset'](_0x58efdc){this['_setValue']('hoverSprit'+'eAsset',_0x58efdc);}get['hoverSprit'+'eAsset'](){return this['data']['hoverSprit'+'eAsset'];}set['hoverSprit'+'eFrame'](_0x1444e7){this['_setValue']('hoverSprit'+'eFrame',_0x1444e7);}get['hoverSprit'+'eFrame'](){return this['data']['hoverSprit'+'eFrame'];}set['pressedSpr'+'iteAsset'](_0x40efae){this['_setValue']('pressedSpr'+'iteAsset',_0x40efae);}get['pressedSpr'+'iteAsset'](){return this['data']['pressedSpr'+'iteAsset'];}set['pressedSpr'+'iteFrame'](_0x856dbe){this['_setValue']('pressedSpr'+'iteFrame',_0x856dbe);}get['pressedSpr'+'iteFrame'](){return this['data']['pressedSpr'+'iteFrame'];}set['inactiveSp'+'riteAsset'](_0x2f83b2){this['_setValue']('inactiveSp'+'riteAsset',_0x2f83b2);}get['inactiveSp'+'riteAsset'](){return this['data']['inactiveSp'+'riteAsset'];}set['inactiveSp'+'riteFrame'](_0x16841a){this['_setValue']('inactiveSp'+'riteFrame',_0x16841a);}get['inactiveSp'+'riteFrame'](){return this['data']['inactiveSp'+'riteFrame'];}['_setValue'](_0x728ed0,_0x392906){const _0x4578b0=this['data'],_0x2b9a78=_0x4578b0[_0x728ed0];_0x4578b0[_0x728ed0]=_0x392906,this['fire']('set',_0x728ed0,_0x2b9a78,_0x392906);}['_toggleLif'+'ecycleList'+'eners'](_0x1b81e8,_0x58d3af){var _0x123e3f;this[_0x1b81e8]('set_active',this['_onSetActi'+'ve'],this),this[_0x1b81e8]('set_transi'+'tionMode',this['_onSetTran'+'sitionMode'],this),this[_0x1b81e8]('set_hoverT'+'int',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x1b81e8]('set_presse'+'dTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x1b81e8]('set_inacti'+'veTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x1b81e8]('set_hoverS'+'priteAsset',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x1b81e8]('set_hoverS'+'priteFrame',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x1b81e8]('set_presse'+'dSpriteAss'+'et',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x1b81e8]('set_presse'+'dSpriteFra'+'me',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x1b81e8]('set_inacti'+'veSpriteAs'+'set',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x1b81e8]('set_inacti'+'veSpriteFr'+'ame',this['_onSetTran'+'sitionValu'+'e'],this),_0x1b81e8==='on'?this['_evtElemen'+'tAdd']=this['entity']['on']('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this):((_0x123e3f=this['_evtElemen'+'tAdd'])==null||_0x123e3f['off'](),this['_evtElemen'+'tAdd']=null);}['_onSetActi'+'ve'](_0x1e291e,_0x1b379c,_0x379f03){_0x1b379c!==_0x379f03&&this['_updateVis'+'ualState']();}['_onSetTran'+'sitionMode'](_0x4d8b41,_0x5d8197,_0x24b1b0){_0x5d8197!==_0x24b1b0&&(this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](_0x5d8197),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetTran'+'sitionValu'+'e'](_0x519f32,_0x441794,_0x5eb34e){_0x441794!==_0x5eb34e&&this['_forceReap'+'plyVisualS'+'tate']();}['_imageEnti'+'tySubscrib'+'e'](){this['_evtImageE'+'ntityEleme'+'ntAdd']=this['_imageEnti'+'ty']['on']('element:ad'+'d',this['_onImageEl'+'ementGain'],this),this['_imageEnti'+'ty']['element']&&this['_onImageEl'+'ementGain']();}['_imageEnti'+'tyUnsubscr'+'ibe'](){var _0x43a918,_0x2774e6;(_0x43a918=this['_evtImageE'+'ntityEleme'+'ntAdd'])==null||_0x43a918['off'](),this['_evtImageE'+'ntityEleme'+'ntAdd']=null,(_0x2774e6=this['_imageEnti'+'ty'])!=null&&_0x2774e6['element']&&this['_onImageEl'+'ementLose']();}['_imageEnti'+'tyElementS'+'ubscribe'](){const _0x34d679=this['_imageEnti'+'ty']['element'];this['_evtImageE'+'ntityEleme'+'ntRemove']=_0x34d679['once']('beforeremo'+'ve',this['_onImageEl'+'ementLose'],this),this['_evtImageE'+'ntityEleme'+'ntColor']=_0x34d679['on']('set:color',this['_onSetColo'+'r'],this),this['_evtImageE'+'ntityEleme'+'ntOpacity']=_0x34d679['on']('set:opacit'+'y',this['_onSetOpac'+'ity'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=_0x34d679['on']('set:sprite'+'Asset',this['_onSetSpri'+'teAsset'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=_0x34d679['on']('set:sprite'+'Frame',this['_onSetSpri'+'teFrame'],this);}['_imageEnti'+'tyElementU'+'nsubscribe'](){var _0x25cc4e,_0x3b62eb,_0x4c2b66,_0x3447c9,_0x481433;(_0x25cc4e=this['_evtImageE'+'ntityEleme'+'ntRemove'])==null||_0x25cc4e['off'](),this['_evtImageE'+'ntityEleme'+'ntRemove']=null,(_0x3b62eb=this['_evtImageE'+'ntityEleme'+'ntColor'])==null||_0x3b62eb['off'](),this['_evtImageE'+'ntityEleme'+'ntColor']=null,(_0x4c2b66=this['_evtImageE'+'ntityEleme'+'ntOpacity'])==null||_0x4c2b66['off'](),this['_evtImageE'+'ntityEleme'+'ntOpacity']=null,(_0x3447c9=this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set'])==null||_0x3447c9['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=null,(_0x481433=this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame'])==null||_0x481433['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=null;}['_onElement'+'ComponentR'+'emove'](){this['_toggleHit'+'ElementLis'+'teners']('off');}['_onElement'+'ComponentA'+'dd'](){this['_toggleHit'+'ElementLis'+'teners']('on');}['_onImageEl'+'ementLose'](){this['_imageEnti'+'tyElementU'+'nsubscribe'](),this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['_onImageEl'+'ementGain'](){this['_imageEnti'+'tyElementS'+'ubscribe'](),this['_storeDefa'+'ultVisualS'+'tate'](),this['_forceReap'+'plyVisualS'+'tate']();}['_toggleHit'+'ElementLis'+'teners'](_0x532fc9){if(this['entity']['element']){const _0x5bd187=_0x532fc9==='on';if(_0x5bd187&&this['_hasHitEle'+'mentListen'+'ers'])return;this['entity']['element'][_0x532fc9]('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['entity']['element'][_0x532fc9]('mouseenter',this['_onMouseEn'+'ter'],this),this['entity']['element'][_0x532fc9]('mouseleave',this['_onMouseLe'+'ave'],this),this['entity']['element'][_0x532fc9]('mousedown',this['_onMouseDo'+'wn'],this),this['entity']['element'][_0x532fc9]('mouseup',this['_onMouseUp'],this),this['entity']['element'][_0x532fc9]('touchstart',this['_onTouchSt'+'art'],this),this['entity']['element'][_0x532fc9]('touchend',this['_onTouchEn'+'d'],this),this['entity']['element'][_0x532fc9]('touchleave',this['_onTouchLe'+'ave'],this),this['entity']['element'][_0x532fc9]('touchcance'+'l',this['_onTouchCa'+'ncel'],this),this['entity']['element'][_0x532fc9]('selectstar'+'t',this['_onSelectS'+'tart'],this),this['entity']['element'][_0x532fc9]('selectend',this['_onSelectE'+'nd'],this),this['entity']['element'][_0x532fc9]('selectente'+'r',this['_onSelectE'+'nter'],this),this['entity']['element'][_0x532fc9]('selectleav'+'e',this['_onSelectL'+'eave'],this),this['entity']['element'][_0x532fc9]('click',this['_onClick'],this),this['_hasHitEle'+'mentListen'+'ers']=_0x5bd187;}}['_storeDefa'+'ultVisualS'+'tate'](){var _0x441fb3;const _0xf0a1fc=(_0x441fb3=this['_imageEnti'+'ty'])==null?void(-0x159f+-0x20*0x87+0x267f):_0x441fb3['element'];!_0xf0a1fc||_0xf0a1fc['type']===Lc||(this['_storeDefa'+'ultColor'](_0xf0a1fc['color']),this['_storeDefa'+'ultOpacity'](_0xf0a1fc['opacity']),this['_storeDefa'+'ultSpriteA'+'sset'](_0xf0a1fc['spriteAsse'+'t']),this['_storeDefa'+'ultSpriteF'+'rame'](_0xf0a1fc['spriteFram'+'e']));}['_storeDefa'+'ultColor'](_0xd7f6f8){this['_defaultTi'+'nt']['r']=_0xd7f6f8['r'],this['_defaultTi'+'nt']['g']=_0xd7f6f8['g'],this['_defaultTi'+'nt']['b']=_0xd7f6f8['b'];}['_storeDefa'+'ultOpacity'](_0x46c51e){this['_defaultTi'+'nt']['a']=_0x46c51e;}['_storeDefa'+'ultSpriteA'+'sset'](_0x4fbf5e){this['_defaultSp'+'riteAsset']=_0x4fbf5e;}['_storeDefa'+'ultSpriteF'+'rame'](_0x4fbc75){this['_defaultSp'+'riteFrame']=_0x4fbc75;}['_onSetColo'+'r'](_0xaf00eb){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultColor'](_0xaf00eb),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetOpac'+'ity'](_0x5b17cd){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultOpacity'](_0x5b17cd),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teAsset'](_0xca5ed8){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteA'+'sset'](_0xca5ed8),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teFrame'](_0x5a2e8a){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteF'+'rame'](_0x5a2e8a),this['_forceReap'+'plyVisualS'+'tate']());}['_onMouseEn'+'ter'](_0x43c63e){this['_isHoverin'+'g']=!(0xe*0x57+0x368*-0xa+0x1d4e),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseenter',_0x43c63e);}['_onMouseLe'+'ave'](_0x36988f){this['_isHoverin'+'g']=!(-0x188b+0x2*0x493+0x1b6*0x9),this['_isPressed']=!(0x1108+-0x3be*-0xa+0x35*-0x107),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseleave',_0x36988f);}['_onMouseDo'+'wn'](_0x5bae34){this['_isPressed']=!(-0x1b*-0x7d+0x25*0x69+0x3c*-0x79),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mousedown',_0x5bae34);}['_onMouseUp'](_0x2c9a7c){this['_isPressed']=!(0x22c3+0xcbd+0x9*-0x547),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseup',_0x2c9a7c);}['_onTouchSt'+'art'](_0x596380){this['_isPressed']=!(-0x2b*0xe3+-0x1ac3+-0x4*-0x1039),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchstart',_0x596380);}['_onTouchEn'+'d'](_0x4f4859){_0x4f4859['event']['preventDef'+'ault'](),this['_isPressed']=!(0x20dc+-0x55*0x4f+-0x6a0),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchend',_0x4f4859);}['_onTouchLe'+'ave'](_0x5c5576){this['_isPressed']=!(0x1f45+0x1*-0x2392+0x26*0x1d),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchleave',_0x5c5576);}['_onTouchCa'+'ncel'](_0x4b1526){this['_isPressed']=!(-0x25df+-0xc3f+0x321f),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchcance'+'l',_0x4b1526);}['_onSelectS'+'tart'](_0x1062e1){this['_isPressed']=!(0x2*-0xd8b+-0x166*0x1+0x1c7c),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectstar'+'t',_0x1062e1);}['_onSelectE'+'nd'](_0x5b5a5c){this['_isPressed']=!(-0x44+-0xe*0x22+0x221),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectend',_0x5b5a5c);}['_onSelectE'+'nter'](_0x2b2697){this['_hoveringC'+'ounter']++,this['_hoveringC'+'ounter']===0x1dab+0x195b+-0x3705&&(this['_isHoverin'+'g']=!(-0x1d6*0x1+0x1e7f*0x1+-0x1ca9),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectente'+'r',_0x2b2697);}['_onSelectL'+'eave'](_0x152856){this['_hoveringC'+'ounter']--,this['_hoveringC'+'ounter']===-0x1*0xffb+0x1d99+-0xd9e&&(this['_isHoverin'+'g']=!(0x5a7+0xebc+-0x1462),this['_isPressed']=!(0x1473+-0x1*-0x135b+-0x27cd*0x1),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectleav'+'e',_0x152856);}['_onClick'](_0x4bba9d){this['_fireIfAct'+'ive']('click',_0x4bba9d);}['_fireIfAct'+'ive'](_0x807171,_0x3767c4){this['data']['active']&&this['fire'](_0x807171,_0x3767c4);}['_updateVis'+'ualState'](_0x240484){const _0x5e1344=this['_visualSta'+'te'],_0x36ad68=this['_determine'+'VisualStat'+'e']();if((_0x5e1344!==_0x36ad68||_0x240484)&&this['enabled'])switch(this['_visualSta'+'te']=_0x36ad68,_0x5e1344===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverend'),_0x5e1344===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedend'),_0x36ad68===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverstart'),_0x36ad68===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedsta'+'rt'),this['transition'+'Mode']){case eu:{const _0x1c1afb=El[this['_visualSta'+'te']],_0x22d5cc=this[_0x1c1afb];this['_applyTint'](_0x22d5cc);break;}case og:{const _0x3c0dc6=bl[this['_visualSta'+'te']],_0x185b88=Al[this['_visualSta'+'te']],_0x2cf3ed=this[_0x3c0dc6],_0x546c79=this[_0x185b88];this['_applySpri'+'te'](_0x2cf3ed,_0x546c79);break;}}}['_forceReap'+'plyVisualS'+'tate'](){this['_updateVis'+'ualState'](!(-0xb*0x33e+0x1b13+0x897));}['_resetToDe'+'faultVisua'+'lState'](_0x19e32b){var _0x1602fd;if((_0x1602fd=this['_imageEnti'+'ty'])!=null&&_0x1602fd['element'])switch(_0x19e32b){case eu:this['_cancelTwe'+'en'](),this['_applyTint'+'Immediatel'+'y'](this['_defaultTi'+'nt']);break;case og:this['_applySpri'+'te'](this['_defaultSp'+'riteAsset'],this['_defaultSp'+'riteFrame']);break;}}['_determine'+'VisualStat'+'e'](){if(this['active']){if(this['_isPressed'])return ft['PRESSED'];if(this['_isHoverin'+'g'])return ft['HOVER'];}else return ft['INACTIVE'];return ft['DEFAULT'];}['_applySpri'+'te'](_0x4c3560,_0x4270c5){var _0x64b868;const _0x1a3e17=(_0x64b868=this['_imageEnti'+'ty'])==null?void(0x13a5+-0xab*0x20+0x1bb):_0x64b868['element'];_0x1a3e17&&(_0x4270c5=_0x4270c5||-0x1dd*0x1+-0x1*-0x11c3+-0xfe6,this['_isApplyin'+'gSprite']=!(0x7*0x583+-0x14e1*0x1+-0x2c*0x67),_0x1a3e17['spriteAsse'+'t']!==_0x4c3560&&(_0x1a3e17['spriteAsse'+'t']=_0x4c3560),_0x1a3e17['spriteFram'+'e']!==_0x4270c5&&(_0x1a3e17['spriteFram'+'e']=_0x4270c5),this['_isApplyin'+'gSprite']=!(-0x70*-0x11+-0x1526+0xdb7));}['_applyTint'](_0x52638a){this['_cancelTwe'+'en'](),this['fadeDurati'+'on']===0x1*-0x1311+0x13a0+0x1*-0x8f?this['_applyTint'+'Immediatel'+'y'](_0x52638a):this['_applyTint'+'WithTween'](_0x52638a);}['_applyTint'+'Immediatel'+'y'](_0x31f012){var _0x596e32;const _0x2da05b=(_0x596e32=this['_imageEnti'+'ty'])==null?void(0xa4*-0x3+0x1723+0x1*-0x1537):_0x596e32['element'];if(!_0x31f012||!_0x2da05b||_0x2da05b['type']===Lc)return;const _0x10a595=lg(_0x31f012);this['_isApplyin'+'gTint']=!(0x758+-0x1f57+0x17ff*0x1),_0x10a595['equals'](_0x2da05b['color'])||(_0x2da05b['color']=_0x10a595),_0x2da05b['opacity']!==_0x31f012['a']&&(_0x2da05b['opacity']=_0x31f012['a']),this['_isApplyin'+'gTint']=!(-0x1381+0xc8*-0x26+0x1066*0x3);}['_applyTint'+'WithTween'](_0xa0a5de){var _0x2d6f16;const _0x5ee0a6=(_0x2d6f16=this['_imageEnti'+'ty'])==null?void(0x199c+-0x230e+0x972):_0x2d6f16['element'];if(!_0xa0a5de||!_0x5ee0a6||_0x5ee0a6['type']===Lc)return;const _0x5df8fa=lg(_0xa0a5de),_0x2ddc13=_0x5ee0a6['color'],_0x45cd97=_0x5ee0a6['opacity'];_0x5df8fa['equals'](_0x2ddc13)&&_0xa0a5de['a']===_0x45cd97||(this['_tweenInfo']={'startTime':de(),'from':new ie(_0x2ddc13['r'],_0x2ddc13['g'],_0x2ddc13['b'],_0x45cd97),'to':_0xa0a5de['clone'](),'lerpColor':new ie()});}['_updateTin'+'tTween'](){const _0xb8001f=de()-this['_tweenInfo']['startTime'];let _0x51f421=this['fadeDurati'+'on']===-0x1113+-0xa7*0x4+0x13af?0x1*-0x8c6+0xe3*0xc+-0x1dd*0x1:_0xb8001f/this['fadeDurati'+'on'];if(_0x51f421=Y['clamp'](_0x51f421,0x1*0x16be+0x10*0x1cf+-0x33ae,0x7bb*0x1+0x72e*0x1+0x12*-0xd4),Math['abs'](_0x51f421-(-0x2135+0x19e4+-0x2*-0x3a9))>0x11*-0xce+0xc14+0x19a+0.00001){const _0x2e32bf=this['_tweenInfo']['lerpColor'];_0x2e32bf['lerp'](this['_tweenInfo']['from'],this['_tweenInfo']['to'],_0x51f421),this['_applyTint'+'Immediatel'+'y'](new ie(_0x2e32bf['r'],_0x2e32bf['g'],_0x2e32bf['b'],_0x2e32bf['a']));}else this['_applyTint'+'Immediatel'+'y'](this['_tweenInfo']['to']),this['_cancelTwe'+'en']();}['_cancelTwe'+'en'](){delete this['_tweenInfo'];}['onUpdate'](){this['_tweenInfo']&&this['_updateTin'+'tTween']();}['onEnable'](){this['_isHoverin'+'g']=!(0x2*0x76d+-0x2174*0x1+0x129b),this['_hoveringC'+'ounter']=-0x63c+0x58b*0x7+-0x2091,this['_isPressed']=!(-0x18b9+-0x1e6f+0x3729),this['_toggleHit'+'ElementLis'+'teners']('on'),this['_forceReap'+'plyVisualS'+'tate']();}['onDisable'](){this['_toggleHit'+'ElementLis'+'teners']('off'),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['onRemove'](){this['_imageEnti'+'tyUnsubscr'+'ibe'](),this['_toggleLif'+'ecycleList'+'eners']('off',this['system']),this['onDisable']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x496909,_0x185e2e){_0x496909['imageEntit'+'y']&&(this['imageEntit'+'y']=_0x185e2e[_0x496909['imageEntit'+'y']['getGuid']()]);}}h(It,'EVENT_MOUS'+'EDOWN','mousedown'),h(It,'EVENT_MOUS'+'EUP','mouseup'),h(It,'EVENT_MOUS'+'EENTER','mouseenter'),h(It,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(It,'EVENT_CLIC'+'K','click'),h(It,'EVENT_TOUC'+'HSTART','touchstart'),h(It,'EVENT_TOUC'+'HEND','touchend'),h(It,'EVENT_TOUC'+'HCANCEL','touchcance'+'l'),h(It,'EVENT_TOUC'+'HLEAVE','touchleave'),h(It,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(It,'EVENT_SELE'+'CTEND','selectend'),h(It,'EVENT_SELE'+'CTENTER','selectente'+'r'),h(It,'EVENT_SELE'+'CTLEAVE','selectleav'+'e'),h(It,'EVENT_HOVE'+'RSTART','hoverstart'),h(It,'EVENT_HOVE'+'REND','hoverend'),h(It,'EVENT_PRES'+'SEDSTART','pressedsta'+'rt'),h(It,'EVENT_PRES'+'SEDEND','pressedend');function lg(_0x16bdda){return new ie(_0x16bdda['r'],_0x16bdda['g'],_0x16bdda['b']);}class lL{constructor(){this['enabled']=!(-0x1c4b+-0x53*0x37+-0x60*-0x7b),this['active']=!(0x3e*-0x2f+-0x15*0x158+0x2*0x13cd),this['imageEntit'+'y']=null,this['hitPadding']=new re(),this['transition'+'Mode']=eu,this['hoverTint']=new ie(0x1*0x1d83+0x33*-0xa+-0x1*0x1b85+0.75,-0x1f9*0x8+-0x1*0x1127+0x1*0x20ef+0.75,0x32e*0x7+-0x13da+-0x4d*0x8+0.75),this['pressedTin'+'t']=new ie(-0x1*0x146f+-0xfa7*-0x1+0x4c8+0.5,0x1*-0x1d7b+0x9*-0x13a+-0x3af*-0xb+0.5,-0x5c9*0x2+-0x29*-0x53+-0x1b9+0.5),this['inactiveTi'+'nt']=new ie(0x13b3+0x1d*-0x58+-0x9bb+0.25,0x1*0xddc+-0x955+0x487*-0x1+0.25,-0x19fd+0x1*-0x1b25+0x3*0x11b6+0.25),this['fadeDurati'+'on']=0xde5*0x1+0x138e+-0x2173,this['hoverSprit'+'eAsset']=null,this['hoverSprit'+'eFrame']=-0x7*0x181+-0x1*-0x22df+-0x1858,this['pressedSpr'+'iteAsset']=null,this['pressedSpr'+'iteFrame']=0xb25+0xabb+-0x15e0,this['inactiveSp'+'riteAsset']=null,this['inactiveSp'+'riteFrame']=-0xaa6+-0x293*-0x4+0x5a;}}const cg=['enabled','active',{'name':'hitPadding','type':'vec4'},'transition'+'Mode',{'name':'hoverTint','type':'rgba'},{'name':'pressedTin'+'t','type':'rgba'},{'name':'inactiveTi'+'nt','type':'rgba'},'fadeDurati'+'on','hoverSprit'+'eAsset','hoverSprit'+'eFrame','pressedSpr'+'iteAsset','pressedSpr'+'iteFrame','inactiveSp'+'riteAsset','inactiveSp'+'riteFrame'];class cL extends ct{constructor(_0x465b9d){super(_0x465b9d),this['id']='button',this['ComponentT'+'ype']=It,this['DataType']=lL,this['schema']=cg,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x38e6dd,_0x18c8ad,_0x2667e6){_0x38e6dd['imageEntit'+'y']=_0x18c8ad['imageEntit'+'y'],super['initialize'+'ComponentD'+'ata'](_0x38e6dd,_0x18c8ad,cg);}['onUpdate'](_0x391500){const _0x481bf4=this['store'];for(const _0x47782b in _0x481bf4){const _0x223fb6=_0x481bf4[_0x47782b]['entity'],_0x31fa4f=_0x223fb6['button'];_0x31fa4f['enabled']&&_0x223fb6['enabled']&&_0x31fa4f['onUpdate']();}}['_onRemoveC'+'omponent'](_0x466578,_0x2af6a6){_0x2af6a6['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}const hg=new D(),dg=new le();class Ka extends we{constructor(_0x49a97f,_0x23e71d){super(_0x49a97f,_0x23e71d),h(this,'_compoundP'+'arent',null),h(this,'_hasOffset',!(0x1683+-0x236+-0x144c)),(this['entity']['on']('insert',this['_onInsert'],this),this['on']('set_type',this['onSetType'],this),this['on']('set_convex'+'Hull',this['onSetModel'],this),this['on']('set_halfEx'+'tents',this['onSetHalfE'+'xtents'],this),this['on']('set_linear'+'Offset',this['onSetOffse'+'t'],this),this['on']('set_angula'+'rOffset',this['onSetOffse'+'t'],this),this['on']('set_radius',this['onSetRadiu'+'s'],this),this['on']('set_height',this['onSetHeigh'+'t'],this),this['on']('set_axis',this['onSetAxis'],this),this['on']('set_asset',this['onSetAsset'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_model',this['onSetModel'],this),this['on']('set_render',this['onSetRende'+'r'],this));}get['data'](){const _0x6445d8=this['system']['store'][this['entity']['getGuid']()];return _0x6445d8?_0x6445d8['data']:null;}set['enabled'](_0x51201e){this['_setValue']('enabled',_0x51201e);}get['enabled'](){return this['data']['enabled'];}set['type'](_0x343835){this['_setValue']('type',_0x343835);}get['type'](){return this['data']['type'];}set['halfExtent'+'s'](_0x19ccd4){this['_setValue']('halfExtent'+'s',_0x19ccd4);}get['halfExtent'+'s'](){return this['data']['halfExtent'+'s'];}set['linearOffs'+'et'](_0x49e118){this['_setValue']('linearOffs'+'et',_0x49e118);}get['linearOffs'+'et'](){return this['data']['linearOffs'+'et'];}set['angularOff'+'set'](_0x341d78){this['_setValue']('angularOff'+'set',_0x341d78);}get['angularOff'+'set'](){return this['data']['angularOff'+'set'];}set['radius'](_0xe0cb9e){this['_setValue']('radius',_0xe0cb9e);}get['radius'](){return this['data']['radius'];}set['axis'](_0x464e83){this['_setValue']('axis',_0x464e83);}get['axis'](){return this['data']['axis'];}set['height'](_0x439a4a){this['_setValue']('height',_0x439a4a);}get['height'](){return this['data']['height'];}set['asset'](_0x325ca1){this['_setValue']('asset',_0x325ca1);}get['asset'](){return this['data']['asset'];}set['renderAsse'+'t'](_0x28e3af){this['_setValue']('renderAsse'+'t',_0x28e3af);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['convexHull'](_0x26f6c7){this['_setValue']('convexHull',_0x26f6c7);}get['convexHull'](){return this['data']['convexHull'];}set['shape'](_0x4bdeb5){this['_setValue']('shape',_0x4bdeb5);}get['shape'](){return this['data']['shape'];}set['model'](_0x2003ab){this['_setValue']('model',_0x2003ab);}get['model'](){return this['data']['model'];}set['render'](_0x4aa6aa){this['_setValue']('render',_0x4aa6aa);}get['render'](){return this['data']['render'];}set['checkVerte'+'xDuplicate'+'s'](_0x135d3b){this['_setValue']('checkVerte'+'xDuplicate'+'s',_0x135d3b);}get['checkVerte'+'xDuplicate'+'s'](){return this['data']['checkVerte'+'xDuplicate'+'s'];}['_setValue'](_0x3c5467,_0x408ca3){const _0x4df69a=this['data'],_0x56072b=_0x4df69a[_0x3c5467];_0x4df69a[_0x3c5467]=_0x408ca3,this['fire']('set',_0x3c5467,_0x56072b,_0x408ca3);}['onSetType'](_0x23ed91,_0x4ec13f,_0x37a206){_0x4ec13f!==_0x37a206&&this['system']['changeType'](this,_0x4ec13f,_0x37a206);}['onSetHalfE'+'xtents'](_0xb280bd,_0x16c239,_0x52ac93){const _0x14c184=this['data']['type'];this['data']['initialize'+'d']&&_0x14c184==='box'&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetOffse'+'t'](_0x329fa4,_0x56af38,_0x415a33){this['_hasOffset']=!this['data']['linearOffs'+'et']['equals'](D['ZERO'])||!this['data']['angularOff'+'set']['equals'](le['IDENTITY']),this['data']['initialize'+'d']&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetRadiu'+'s'](_0x40df9e,_0x10c090,_0x47aff2){const _0x3159db=this['data']['type'];this['data']['initialize'+'d']&&(_0x3159db==='sphere'||_0x3159db==='capsule'||_0x3159db==='cylinder'||_0x3159db==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetHeigh'+'t'](_0x10608a,_0x1357a4,_0x443b45){const _0x2b29df=this['data']['type'];this['data']['initialize'+'d']&&(_0x2b29df==='capsule'||_0x2b29df==='cylinder'||_0x2b29df==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAxis'](_0x133cb7,_0x189f31,_0x425dcc){const _0xd7a728=this['data']['type'];this['data']['initialize'+'d']&&(_0xd7a728==='capsule'||_0xd7a728==='cylinder'||_0xd7a728==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAsset'](_0x3c8c6e,_0x2e1409,_0x28ff83){const _0x3f6ad9=this['system']['app']['assets'];if(_0x2e1409){const _0x5be318=_0x3f6ad9['get'](_0x2e1409);_0x5be318&&_0x5be318['off']('remove',this['onAssetRem'+'oved'],this);}if(_0x28ff83){_0x28ff83 instanceof pe&&(this['data']['asset']=_0x28ff83['id']);const _0x3de0ad=_0x3f6ad9['get'](this['data']['asset']);_0x3de0ad&&(_0x3de0ad['off']('remove',this['onAssetRem'+'oved'],this),_0x3de0ad['on']('remove',this['onAssetRem'+'oved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x28ff83||(this['data']['model']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetRende'+'rAsset'](_0x50379a,_0x395726,_0x46491a){const _0x4674ef=this['system']['app']['assets'];if(_0x395726){const _0x2298d9=_0x4674ef['get'](_0x395726);_0x2298d9&&_0x2298d9['off']('remove',this['onRenderAs'+'setRemoved'],this);}if(_0x46491a){_0x46491a instanceof pe&&(this['data']['renderAsse'+'t']=_0x46491a['id']);const _0x54bfbb=_0x4674ef['get'](this['data']['renderAsse'+'t']);_0x54bfbb&&(_0x54bfbb['off']('remove',this['onRenderAs'+'setRemoved'],this),_0x54bfbb['on']('remove',this['onRenderAs'+'setRemoved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x46491a||(this['data']['render']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetModel'](_0xac895c,_0x42edf4,_0x19548c){this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&this['system']['implementa'+'tions']['mesh']['doRecreate'+'PhysicalSh'+'ape'](this);}['onSetRende'+'r'](_0x20c679,_0x71b774,_0x361a37){this['onSetModel'](_0x20c679,_0x71b774,_0x361a37);}['onAssetRem'+'oved'](_0x2a84f9){_0x2a84f9['off']('remove',this['onAssetRem'+'oved'],this),this['data']['asset']===_0x2a84f9['id']&&(this['asset']=null);}['onRenderAs'+'setRemoved'](_0x438cad){_0x438cad['off']('remove',this['onRenderAs'+'setRemoved'],this),this['data']['renderAsse'+'t']===_0x438cad['id']&&(this['renderAsse'+'t']=null);}['getCompoun'+'dChildShap'+'eIndex'](_0x12d207){const _0x4fd69b=this['data']['shape'],_0x5e6ab8=_0x4fd69b['getNumChil'+'dShapes']();for(let _0xf12901=-0x1975+0x2*0xd71+0x16d*-0x1;_0xf12901<_0x5e6ab8;_0xf12901++){const _0x549fe7=_0x4fd69b['getChildSh'+'ape'](_0xf12901);if(Ammo['getPointer'](_0x549fe7)===Ammo['getPointer'](_0x12d207))return _0xf12901;}return null;}['_onInsert'](_0x30174d){if(!(typeof Ammo>'u')){if(this['_compoundP'+'arent'])this['system']['recreatePh'+'ysicalShap'+'es'](this);else{if(!this['entity']['rigidbody']){let _0x575bfa=this['entity']['parent'];for(;_0x575bfa;){if(_0x575bfa['collision']&&_0x575bfa['collision']['type']==='compound'){_0x575bfa['collision']['shape']['getNumChil'+'dShapes']()===-0x1758+0x61*-0x2f+0x5*0x83b?this['system']['recreatePh'+'ysicalShap'+'es'](_0x575bfa['collision']):this['system']['recreatePh'+'ysicalShap'+'es'](this);break;}_0x575bfa=_0x575bfa['parent'];}}}}}['_updateCom'+'pound'](){const _0xe8b6c=this['entity'];if(_0xe8b6c['_dirtyWorl'+'d']){let _0x37e53c=_0xe8b6c['_dirtyLoca'+'l'],_0x4f5cee=_0xe8b6c;for(;_0x4f5cee&&!_0x37e53c&&!(_0x4f5cee['collision']&&_0x4f5cee['collision']===this['_compoundP'+'arent']);)_0x4f5cee['_dirtyLoca'+'l']&&(_0x37e53c=!(-0x16ba+0x11*0x89+-0x3*-0x48b)),_0x4f5cee=_0x4f5cee['parent'];if(_0x37e53c){_0xe8b6c['forEach'](this['system']['implementa'+'tions']['compound']['_updateEac'+'hDescendan'+'tTransform'],_0xe8b6c);const _0x245ead=this['_compoundP'+'arent']['entity']['rigidbody'];_0x245ead&&_0x245ead['activate']();}}}['getShapePo'+'sition'](){const _0x33dbd8=this['entity']['getPositio'+'n']();if(this['_hasOffset']){const _0x41d185=this['entity']['getRotatio'+'n'](),_0x26c18e=this['data']['linearOffs'+'et'];return dg['copy'](_0x41d185)['transformV'+'ector'](_0x26c18e,hg),hg['add'](_0x33dbd8);}return _0x33dbd8;}['getShapeRo'+'tation'](){const _0x5b5ff6=this['entity']['getRotatio'+'n']();return this['_hasOffset']?dg['copy'](_0x5b5ff6)['mul'](this['data']['angularOff'+'set']):_0x5b5ff6;}['onEnable'](){if(this['data']['type']==='mesh'&&(this['data']['asset']||this['data']['renderAsse'+'t'])&&this['data']['initialize'+'d']){const _0x47b1c2=this['system']['app']['assets']['get'](this['data']['asset']||this['data']['renderAsse'+'t']);if(_0x47b1c2&&(!_0x47b1c2['resource']||!this['data']['shape'])){this['system']['recreatePh'+'ysicalShap'+'es'](this);return;}}if(this['entity']['rigidbody'])this['entity']['rigidbody']['enabled']&&this['entity']['rigidbody']['enableSimu'+'lation']();else{if(this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']){if(this['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===-0x2f*-0x1d+0xc42+-0x1195)this['system']['recreatePh'+'ysicalShap'+'es'](this['_compoundP'+'arent']);else{const _0x341505=this['system']['_getNodeTr'+'ansform'](this['entity'],this['_compoundP'+'arent']['entity']);this['_compoundP'+'arent']['shape']['addChildSh'+'ape'](_0x341505,this['data']['shape']),Ammo['destroy'](_0x341505),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']();}}else this['entity']['trigger']&&this['entity']['trigger']['enable']();}}['onDisable'](){this['entity']['rigidbody']?this['entity']['rigidbody']['disableSim'+'ulation']():this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']?this['_compoundP'+'arent']['entity']['_destroyin'+'g']||(this['system']['_removeCom'+'poundChild'](this['_compoundP'+'arent'],this['data']['shape']),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']()):this['entity']['trigger']&&this['entity']['trigger']['disable']();}['onBeforeRe'+'move'](){this['asset']&&(this['asset']=null),this['renderAsse'+'t']&&(this['renderAsse'+'t']=null),this['entity']['off']('insert',this['_onInsert'],this),this['off']();}}h(Ka,'EVENT_CONT'+'ACT','contact'),h(Ka,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(Ka,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(Ka,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(Ka,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve');class hL{constructor(){this['enabled']=!(-0x2*0xa09+-0x2258+-0x18e*-0x23),this['type']='box',this['halfExtent'+'s']=new D(-0xd*-0x65+-0x13*-0xe2+0x15e7*-0x1+0.5,-0x335+-0x5dc+0x911+0.5,-0x1935*0x1+0x1ca3*-0x1+0x6bb*0x8+0.5),this['linearOffs'+'et']=new D(),this['angularOff'+'set']=new le(),this['radius']=-0xa7e*-0x3+0x36*0x66+-0x22*0x18f+0.5,this['axis']=-0xb*0xf7+-0x1e5e+-0x147e*-0x2,this['height']=0x22b+0x1733+-0x3*0x874,this['convexHull']=!(-0x7f6*0x1+0x1acb+-0x12d4),this['asset']=null,this['renderAsse'+'t']=null,this['checkVerte'+'xDuplicate'+'s']=!(0xd1d*0x1+0x3*0x45c+-0x1a31),this['shape']=null,this['model']=null,this['render']=null,this['initialize'+'d']=!(-0xb97+-0x1f*0xa9+-0x200f*-0x1);}}const fo='static',Ns='dynamic',Ua='kinematic',dL=0x179+0x1*0xbf+-0x236,go=0x1bbc+0x7*0x71+-0x1ecf,su=-0x1cf9*0x1+0x1bbe+0x13c,fg=0xe33+-0x1199+0x1b5*0x2,uv=0x123f+0x104f*-0x2+-0x3*-0x4cc,fL=-0x2*-0x6ec+0x416*-0x4+0x281*0x1,ug=0x27*-0x2f+0x1*-0x841+0xf6c,uL=0xb85+0x4*-0x321+0x103,pg=-0x1*0x204b+-0x7d0+-0x71*-0x5b,mg=-0x1b43+0x5*-0x17c0+-0x1cb7*-0xe,iu=0x137e2+-0x48*0x5e8+-0x1715b*-0x1;let ks,Nr,Ba;class pv{constructor(_0x353ff6,_0x5ce17a,_0x53babe){this['entity']=_0x5ce17a['entity'],this['component']=_0x5ce17a,this['app']=_0x353ff6,typeof Ammo<'u'&&!ks&&(ks=new Ammo['btVector3'](),Nr=new Ammo['btQuaterni'+'on'](),Ba=new Ammo['btTransfor'+'m']()),this['initialize'](_0x53babe);}['initialize'](_0x3c16a3){const _0x869496=this['entity'],_0xaf9b4a=_0x3c16a3['shape'];if(_0xaf9b4a&&typeof Ammo<'u'){_0x869496['trigger']&&_0x869496['trigger']['destroy']();const _0x3dfa98=0x2598+0x15*-0x5a+-0xd1*0x25,_0x10f94e=this['component'];if(_0x10f94e){const _0xffd7c3=_0x10f94e['getShapePo'+'sition'](),_0x566cc8=_0x10f94e['getShapeRo'+'tation']();ks['setValue'](_0xffd7c3['x'],_0xffd7c3['y'],_0xffd7c3['z']),Nr['setValue'](_0x566cc8['x'],_0x566cc8['y'],_0x566cc8['z'],_0x566cc8['w']);}else{const _0x2d0e88=_0x869496['getPositio'+'n'](),_0x505e96=_0x869496['getRotatio'+'n']();ks['setValue'](_0x2d0e88['x'],_0x2d0e88['y'],_0x2d0e88['z']),Nr['setValue'](_0x505e96['x'],_0x505e96['y'],_0x505e96['z'],_0x505e96['w']);}Ba['setOrigin'](ks),Ba['setRotatio'+'n'](Nr);const _0x442ad6=this['app']['systems']['rigidbody']['createBody'](_0x3dfa98,_0xaf9b4a,Ba);_0x442ad6['setRestitu'+'tion'](0x8f4+0x2*0x134+-0x4*0x2d7),_0x442ad6['setFrictio'+'n'](0x8d2*0x1+0x3*0x5fb+-0x1ac3*0x1),_0x442ad6['setDamping'](-0x1*-0x13+0x1e89+-0x1e9c,-0x1*-0x1993+-0x731+0x1262*-0x1),ks['setValue'](-0x112*-0x5+0xf9+-0x653*0x1,-0x43*0x49+0x20d*0x2+0xf01,-0x928*-0x1+-0x1585+-0x1*-0xc5d),_0x442ad6['setLinearF'+'actor'](ks),_0x442ad6['setAngular'+'Factor'](ks),_0x442ad6['setCollisi'+'onFlags'](_0x442ad6['getCollisi'+'onFlags']()|go),_0x442ad6['entity']=_0x869496,this['body']=_0x442ad6,this['component']['enabled']&&_0x869496['enabled']&&this['enable']();}}['destroy'](){this['body']&&(this['disable'](),this['app']['systems']['rigidbody']['destroyBod'+'y'](this['body']),this['body']=null);}['_getEntity'+'Transform'](_0x27c94b){const _0x403f83=this['component'];if(_0x403f83){const _0x1f5deb=_0x403f83['getShapePo'+'sition'](),_0x2c7b8a=_0x403f83['getShapeRo'+'tation']();ks['setValue'](_0x1f5deb['x'],_0x1f5deb['y'],_0x1f5deb['z']),Nr['setValue'](_0x2c7b8a['x'],_0x2c7b8a['y'],_0x2c7b8a['z'],_0x2c7b8a['w']);}else{const _0x318c8c=this['entity']['getPositio'+'n'](),_0x56d757=this['entity']['getRotatio'+'n']();ks['setValue'](_0x318c8c['x'],_0x318c8c['y'],_0x318c8c['z']),Nr['setValue'](_0x56d757['x'],_0x56d757['y'],_0x56d757['z'],_0x56d757['w']);}_0x27c94b['setOrigin'](ks),_0x27c94b['setRotatio'+'n'](Nr);}['updateTran'+'sform'](){this['_getEntity'+'Transform'](Ba);const _0x1c114c=this['body'];_0x1c114c['setWorldTr'+'ansform'](Ba),_0x1c114c['activate']();}['enable'](){const _0x1f2bfa=this['body'];if(!_0x1f2bfa)return;const _0xf8bb2e=this['app']['systems']['rigidbody'];_0xf8bb2e['_triggers']['indexOf'](this)<-0x1ee+0x1be*-0x8+0xfde&&(_0xf8bb2e['addBody'](_0x1f2bfa,pg,iu^pg),_0xf8bb2e['_triggers']['push'](this)),_0x1f2bfa['forceActiv'+'ationState'](su),this['updateTran'+'sform']();}['disable'](){const _0x3e6194=this['body'];if(!_0x3e6194)return;const _0x42bdce=this['app']['systems']['rigidbody'],_0x24164c=_0x42bdce['_triggers']['indexOf'](this);_0x24164c>-(0x1c6a+-0x11d2*-0x2+-0x400d)&&(_0x42bdce['removeBody'](_0x3e6194),_0x42bdce['_triggers']['splice'](_0x24164c,0x2520+0x43*0x4+-0x262b)),_0x3e6194['forceActiv'+'ationState'](uv);}}const cc=new te(),pL=new D(),mL=new D(),kr=new le(),_g=new Ie(),_L=['enabled','type','halfExtent'+'s','linearOffs'+'et','angularOff'+'set','radius','axis','height','convexHull','asset','renderAsse'+'t','shape','model','render','checkVerte'+'xDuplicate'+'s'];class Ta{constructor(_0x30f1e4){this['system']=_0x30f1e4;}['beforeInit'+'ialize'](_0x523383,_0x36086e){_0x36086e['shape']=null,_0x36086e['model']=new tr(),_0x36086e['model']['graph']=new Ie();}['afterIniti'+'alize'](_0x2d4a4c,_0x3f2b73){this['recreatePh'+'ysicalShap'+'es'](_0x2d4a4c),_0x2d4a4c['data']['initialize'+'d']=!(0x51*0x62+-0x16f9+-0x79*0x11);}['reset'](_0x1a1434,_0x49db51){this['beforeInit'+'ialize'](_0x1a1434,_0x49db51),this['afterIniti'+'alize'](_0x1a1434,_0x49db51);}['recreatePh'+'ysicalShap'+'es'](_0x45b994){const _0x553397=_0x45b994['entity'],_0x4c879a=_0x45b994['data'];if(typeof Ammo<'u'){_0x553397['trigger']&&(_0x553397['trigger']['destroy'](),delete _0x553397['trigger']),_0x4c879a['shape']&&(_0x45b994['_compoundP'+'arent']&&(_0x45b994!==_0x45b994['_compoundP'+'arent']&&this['system']['_removeCom'+'poundChild'](_0x45b994['_compoundP'+'arent'],_0x4c879a['shape']),_0x45b994['_compoundP'+'arent']['entity']['rigidbody']&&_0x45b994['_compoundP'+'arent']['entity']['rigidbody']['activate']()),this['destroySha'+'pe'](_0x4c879a)),_0x4c879a['shape']=this['createPhys'+'icalShape'](_0x45b994['entity'],_0x4c879a);const _0x173afb=!_0x45b994['_compoundP'+'arent'];if(_0x4c879a['type']==='compound'&&(!_0x45b994['_compoundP'+'arent']||_0x45b994===_0x45b994['_compoundP'+'arent']))_0x45b994['_compoundP'+'arent']=_0x45b994,_0x553397['forEach'](this['_addEachDe'+'scendant'],_0x45b994);else{if(_0x4c879a['type']!=='compound'&&!_0x45b994['rigidbody']){_0x45b994['_compoundP'+'arent']=null;let _0x13cf26=_0x553397['parent'];for(;_0x13cf26;){if(_0x13cf26['collision']&&_0x13cf26['collision']['type']==='compound'){_0x45b994['_compoundP'+'arent']=_0x13cf26['collision'];break;}_0x13cf26=_0x13cf26['parent'];}}}_0x45b994['_compoundP'+'arent']&&_0x45b994!==_0x45b994['_compoundP'+'arent']&&(_0x173afb&&_0x45b994['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0x94*0xb+0x1*0xb7+0x713*-0x1?this['system']['recreatePh'+'ysicalShap'+'es'](_0x45b994['_compoundP'+'arent']):(this['system']['updateComp'+'oundChildT'+'ransform'](_0x553397,!(0x2*-0x137+-0x1b0b+0x1d79)),_0x45b994['_compoundP'+'arent']['entity']['rigidbody']&&_0x45b994['_compoundP'+'arent']['entity']['rigidbody']['activate']())),_0x553397['rigidbody']?(_0x553397['rigidbody']['disableSim'+'ulation'](),_0x553397['rigidbody']['createBody'](),_0x553397['enabled']&&_0x553397['rigidbody']['enabled']&&_0x553397['rigidbody']['enableSimu'+'lation']()):_0x45b994['_compoundP'+'arent']||(_0x553397['trigger']?_0x553397['trigger']['initialize'](_0x4c879a):_0x553397['trigger']=new pv(this['system']['app'],_0x45b994,_0x4c879a));}}['createPhys'+'icalShape'](_0x29c697,_0x42c16e){}['updateTran'+'sform'](_0x1f1f1f,_0x414837,_0x5ae926,_0x25fb15){_0x1f1f1f['entity']['trigger']&&_0x1f1f1f['entity']['trigger']['updateTran'+'sform']();}['destroySha'+'pe'](_0x28e1b5){_0x28e1b5['shape']&&(Ammo['destroy'](_0x28e1b5['shape']),_0x28e1b5['shape']=null);}['beforeRemo'+'ve'](_0xd4d699,_0x53b87a){_0x53b87a['data']['shape']&&(_0x53b87a['_compoundP'+'arent']&&!_0x53b87a['_compoundP'+'arent']['entity']['_destroyin'+'g']&&(this['system']['_removeCom'+'poundChild'](_0x53b87a['_compoundP'+'arent'],_0x53b87a['data']['shape']),_0x53b87a['_compoundP'+'arent']['entity']['rigidbody']&&_0x53b87a['_compoundP'+'arent']['entity']['rigidbody']['activate']()),_0x53b87a['_compoundP'+'arent']=null,this['destroySha'+'pe'](_0x53b87a['data']));}['remove'](_0x57e714,_0xea887c){_0x57e714['rigidbody']&&_0x57e714['rigidbody']['body']&&_0x57e714['rigidbody']['disableSim'+'ulation'](),_0x57e714['trigger']&&(_0x57e714['trigger']['destroy'](),delete _0x57e714['trigger']);}['clone'](_0x252868,_0x418449){const _0x86404=this['system']['store'][_0x252868['getGuid']()],_0x40a8a4={'enabled':_0x86404['data']['enabled'],'type':_0x86404['data']['type'],'halfExtents':[_0x86404['data']['halfExtent'+'s']['x'],_0x86404['data']['halfExtent'+'s']['y'],_0x86404['data']['halfExtent'+'s']['z']],'linearOffset':[_0x86404['data']['linearOffs'+'et']['x'],_0x86404['data']['linearOffs'+'et']['y'],_0x86404['data']['linearOffs'+'et']['z']],'angularOffset':[_0x86404['data']['angularOff'+'set']['x'],_0x86404['data']['angularOff'+'set']['y'],_0x86404['data']['angularOff'+'set']['z'],_0x86404['data']['angularOff'+'set']['w']],'radius':_0x86404['data']['radius'],'axis':_0x86404['data']['axis'],'height':_0x86404['data']['height'],'convexHull':_0x86404['data']['convexHull'],'asset':_0x86404['data']['asset'],'renderAsset':_0x86404['data']['renderAsse'+'t'],'model':_0x86404['data']['model'],'render':_0x86404['data']['render'],'checkVertexDuplicates':_0x86404['data']['checkVerte'+'xDuplicate'+'s']};return this['system']['addCompone'+'nt'](_0x418449,_0x40a8a4);}}class gL extends Ta{['createPhys'+'icalShape'](_0xa8d604,_0x32062a){if(typeof Ammo<'u'){const _0x454868=_0x32062a['halfExtent'+'s'],_0xc39d4f=new Ammo['btVector3'](_0x454868?_0x454868['x']:0x1*0x1a53+0xac5+-0x4*0x946+0.5,_0x454868?_0x454868['y']:-0x164e+0xa55+0xbf9+0.5,_0x454868?_0x454868['z']:-0x1bdc*0x1+0x1fc4+-0x5*0xc8+0.5),_0x312241=new Ammo['btBoxShape'](_0xc39d4f);return Ammo['destroy'](_0xc39d4f),_0x312241;}}}class SL extends Ta{['createPhys'+'icalShape'](_0x3bd400,_0x2f3d09){if(typeof Ammo<'u')return new Ammo['btSphereSh'+'ape'](_0x2f3d09['radius']);}}class yL extends Ta{['createPhys'+'icalShape'](_0x198079,_0x32931b){const _0x558a8f=_0x32931b['axis']??0x19*-0xc5+0x5*-0x75a+0x3800,_0xba1409=_0x32931b['radius']??0x2202+0x13f1*0x1+-0x35f3+0.5,_0x14565a=Math['max']((_0x32931b['height']??0x158c+0x18c2+0x2e4c*-0x1)-(0x305+0x2090+0x7*-0x515)*_0xba1409,0x1403+-0x2f*-0x59+-0x245a);let _0xbc67d4=null;if(typeof Ammo<'u')switch(_0x558a8f){case 0x23c5+0x72*-0xf+0x1d17*-0x1:_0xbc67d4=new Ammo['btCapsuleS'+'hapeX'](_0xba1409,_0x14565a);break;case-0xa97+-0x1*0x14e3+-0x1*-0x1f7b:_0xbc67d4=new Ammo['btCapsuleS'+'hape'](_0xba1409,_0x14565a);break;case 0x1f62+0x5d6+0x16*-0x1b1:_0xbc67d4=new Ammo['btCapsuleS'+'hapeZ'](_0xba1409,_0x14565a);break;}return _0xbc67d4;}}class vL extends Ta{['createPhys'+'icalShape'](_0x40a965,_0x360cd5){const _0x546ca8=_0x360cd5['axis']??0xc25*-0x1+0x115*-0x15+-0x4f*-0x71,_0xcd89ab=_0x360cd5['radius']??-0xb5*-0x21+-0x2*-0x4b7+-0x20c3+0.5,_0x3b0b7c=_0x360cd5['height']??0x220*-0x2+-0x3*-0x295+0x37e*-0x1;let _0x263c05=null,_0x25798e=null;if(typeof Ammo<'u')switch(_0x546ca8){case 0x6ec*-0x1+0x1*-0x7b2+0x2*0x74f:_0x263c05=new Ammo['btVector3'](_0x3b0b7c*(-0x117*-0x18+0x1*0x248f+-0xc8b*0x5+0.5),_0xcd89ab,_0xcd89ab),_0x25798e=new Ammo['btCylinder'+'ShapeX'](_0x263c05);break;case 0x17*-0xc2+0x3*0x8b6+-0x1*0x8b3:_0x263c05=new Ammo['btVector3'](_0xcd89ab,_0x3b0b7c*(-0x1*0x11db+-0x1e*-0xcc+-0x60d+0.5),_0xcd89ab),_0x25798e=new Ammo['btCylinder'+'Shape'](_0x263c05);break;case 0x2642+0x2078+0xf8*-0x49:_0x263c05=new Ammo['btVector3'](_0xcd89ab,_0xcd89ab,_0x3b0b7c*(-0x158e+0xc*-0x67+-0xd31*-0x2+0.5)),_0x25798e=new Ammo['btCylinder'+'ShapeZ'](_0x263c05);break;}return _0x263c05&&Ammo['destroy'](_0x263c05),_0x25798e;}}class xL extends Ta{['createPhys'+'icalShape'](_0x2bb2d,_0x2d2d26){const _0x14cc3d=_0x2d2d26['axis']??-0x8b0+-0x1047+0x18f8,_0x1de6a8=_0x2d2d26['radius']??0xe96+0xe*0x296+-0x3*0x10ee+0.5,_0x4ff312=_0x2d2d26['height']??-0x22e5*0x1+-0x1ad*-0x1+0x2139;let _0x25b630=null;if(typeof Ammo<'u')switch(_0x14cc3d){case-0x3a1+-0x3*0xc9+0x5fc:_0x25b630=new Ammo['btConeShap'+'eX'](_0x1de6a8,_0x4ff312);break;case 0x17a0+0x46b*-0x2+-0xec9:_0x25b630=new Ammo['btConeShap'+'e'](_0x1de6a8,_0x4ff312);break;case 0xbf1+0x18b1+-0x24a0:_0x25b630=new Ammo['btConeShap'+'eZ'](_0x1de6a8,_0x4ff312);break;}return _0x25b630;}}class TL extends Ta{['beforeInit'+'ialize'](_0x598645,_0x9f04fd){}['createAmmo'+'Hull'](_0x266869,_0x17ffe5,_0x2775a4,_0x121cc7){const _0x33bde5=new Ammo['btConvexHu'+'llShape'](),_0x12f4d1=new Ammo['btVector3'](),_0x1d4ad6=[];_0x266869['getPositio'+'ns'](_0x1d4ad6);for(let _0x5877df=0x18*-0xa1+-0xe5f*-0x1+0xb9;_0x5877df<_0x1d4ad6['length'];_0x5877df+=-0x3f1*0x2+0x827+-0x42)_0x12f4d1['setValue'](_0x1d4ad6[_0x5877df]*_0x121cc7['x'],_0x1d4ad6[_0x5877df+(0x1d21+-0x1f06+0x1e6)]*_0x121cc7['y'],_0x1d4ad6[_0x5877df+(-0xe3d+0x2*-0x7e7+0x1e0d)]*_0x121cc7['z']),_0x33bde5['addPoint'](_0x12f4d1,!(-0xea3+-0x1630+0x935*0x4));Ammo['destroy'](_0x12f4d1),_0x33bde5['recalcLoca'+'lAabb'](),_0x33bde5['setMargin'](0x2187+0x53*-0x5f+-0x1*0x2ba+0.01);const _0x3b0469=this['system']['_getNodeTr'+'ansform'](_0x17ffe5);_0x2775a4['addChildSh'+'ape'](_0x3b0469,_0x33bde5),Ammo['destroy'](_0x3b0469);}['createAmmo'+'Mesh'](_0x968487,_0x489454,_0x19359,_0x5e92d6,_0x365169=!(0xb*-0xca+-0x11*0xe3+0x7eb*0x3)){const _0x59018e=this['system'];let _0x2c7b63;if(_0x59018e['_triMeshCa'+'che'][_0x968487['id']])_0x2c7b63=_0x59018e['_triMeshCa'+'che'][_0x968487['id']];else{const _0x214bf0=_0x968487['vertexBuff'+'er'],_0x17cd98=_0x214bf0['getFormat']();let _0x449b59,_0x927b5;for(let _0x364405=-0x345*-0x7+-0x10d6+-0x1*0x60d;_0x364405<_0x17cd98['elements']['length'];_0x364405++){const _0xdde91b=_0x17cd98['elements'][_0x364405];if(_0xdde91b['name']===Pe){_0x927b5=new Float32Array(_0x214bf0['lock'](),_0xdde91b['offset']),_0x449b59=_0xdde91b['stride']/(-0x6*-0x219+-0x2615*0x1+-0x3a5*-0x7);break;}}const _0x79c1c1=[];_0x968487['getIndices'](_0x79c1c1);const _0xda37ac=_0x968487['primitive'][0x21a8+-0x64*0x16+0x644*-0x4]['count']/(0x12bb*0x1+0x76e+-0x1a26),_0x525375=new Ammo['btVector3']();let _0x4fa617,_0x59e781,_0x3031fa;const _0x3ac76f=_0x968487['primitive'][-0x147e+0x23b7+-0xf39]['base'];_0x2c7b63=new Ammo['btTriangle'+'Mesh'](),_0x59018e['_triMeshCa'+'che'][_0x968487['id']]=_0x2c7b63;const _0x3451df=new Map();w['assert'](typeof _0x2c7b63['getIndexed'+'MeshArray']=='function','Ammo.js\x20ve'+'rsion\x20is\x20t'+'oo\x20old,\x20pl'+'ease\x20updat'+'e\x20to\x20a\x20new'+'er\x20Ammo.');const _0x2eccf0=_0x2c7b63['getIndexed'+'MeshArray']();_0x2eccf0['at'](-0x1871*0x1+0xc34+0xc3d)['m_numTrian'+'gles']=_0xda37ac;const _0x478f14=_0x5e92d6?_0x5e92d6['x']:0x1489+-0x207d+-0xbf5*-0x1,_0x13b945=_0x5e92d6?_0x5e92d6['y']:0x829+0x24b9+-0x1*0x2ce1,_0xdbca0f=_0x5e92d6?_0x5e92d6['z']:-0x2670+0x1f3a+-0x737*-0x1,_0x6cf3ac=_0x3228b3=>{const _0x2a15cb=_0x927b5[_0x3228b3*_0x449b59]*_0x478f14,_0xeef61a=_0x927b5[_0x3228b3*_0x449b59+(-0x2695+0x9*-0x3b9+-0x4817*-0x1)]*_0x13b945,_0x47073c=_0x927b5[_0x3228b3*_0x449b59+(0x24e5*0x1+-0x1*0x89d+-0xe23*0x2)]*_0xdbca0f;let _0x353fe5;if(_0x365169){const _0x1a174f=_0x2a15cb+':'+_0xeef61a+':'+_0x47073c;if(_0x353fe5=_0x3451df['get'](_0x1a174f),_0x353fe5!==void(-0xe66+0x114a+-0x2*0x172))return _0x353fe5;_0x525375['setValue'](_0x2a15cb,_0xeef61a,_0x47073c),_0x353fe5=_0x2c7b63['findOrAddV'+'ertex'](_0x525375,!(-0x26a8+-0xb3d+0x851*0x6)),_0x3451df['set'](_0x1a174f,_0x353fe5);}else _0x525375['setValue'](_0x2a15cb,_0xeef61a,_0x47073c),_0x353fe5=_0x2c7b63['findOrAddV'+'ertex'](_0x525375,!(0xbbb+-0x1b1c+-0x1*-0xf62));return _0x353fe5;};for(let _0x24783d=0xe*-0x1e3+-0x2*0x43a+0x22de;_0x24783d<_0xda37ac;_0x24783d++)_0x4fa617=_0x6cf3ac(_0x79c1c1[_0x3ac76f+_0x24783d*(0x2586+0x1c76+-0x41f9)]),_0x59e781=_0x6cf3ac(_0x79c1c1[_0x3ac76f+_0x24783d*(-0xb5*0x32+0x101e+-0xd*-0x17b)+(0x1ca8+-0x1*0x21d7+0x530)]),_0x3031fa=_0x6cf3ac(_0x79c1c1[_0x3ac76f+_0x24783d*(0x1318+-0x1d21+0xa0c)+(0xb74*0x1+0x1361+-0x1ed3)]),_0x2c7b63['addIndex'](_0x4fa617),_0x2c7b63['addIndex'](_0x59e781),_0x2c7b63['addIndex'](_0x3031fa);Ammo['destroy'](_0x525375);}const _0x362de7=new Ammo['btBvhTrian'+'gleMeshSha'+'pe'](_0x2c7b63,!(-0x1639*-0x1+0x162c+-0x2c65));if(!_0x5e92d6){const _0x2f0c6a=_0x59018e['_getNodeSc'+'aling'](_0x489454);_0x362de7['setLocalSc'+'aling'](_0x2f0c6a),Ammo['destroy'](_0x2f0c6a);}const _0x4f8949=_0x59018e['_getNodeTr'+'ansform'](_0x489454);_0x19359['addChildSh'+'ape'](_0x4f8949,_0x362de7),Ammo['destroy'](_0x4f8949);}['createPhys'+'icalShape'](_0x2e8896,_0x48f1b6){if(!(typeof Ammo>'u')&&(_0x48f1b6['model']||_0x48f1b6['render'])){const _0x5d66f5=new Ammo['btCompound'+'Shape'](),_0x3215af=_0x2e8896['getWorldTr'+'ansform']()['getScale']();if(_0x48f1b6['render']){const _0x4d8bc2=_0x48f1b6['render']['meshes'];for(let _0x444bd2=0x1*0x8eb+0x60+-0x94b;_0x444bd2<_0x4d8bc2['length'];_0x444bd2++)_0x48f1b6['convexHull']?this['createAmmo'+'Hull'](_0x4d8bc2[_0x444bd2],_g,_0x5d66f5,_0x3215af):this['createAmmo'+'Mesh'](_0x4d8bc2[_0x444bd2],_g,_0x5d66f5,_0x3215af,_0x48f1b6['checkVerte'+'xDuplicate'+'s']);}else{if(_0x48f1b6['model']){const _0x1ce7fe=_0x48f1b6['model']['meshInstan'+'ces'];for(let _0x3896e4=0xd11+0x3d*-0x3b+0x1*0xfe;_0x3896e4<_0x1ce7fe['length'];_0x3896e4++)this['createAmmo'+'Mesh'](_0x1ce7fe[_0x3896e4]['mesh'],_0x1ce7fe[_0x3896e4]['node'],_0x5d66f5,null,_0x48f1b6['checkVerte'+'xDuplicate'+'s']);const _0x1e5d73=new Ammo['btVector3'](_0x3215af['x'],_0x3215af['y'],_0x3215af['z']);_0x5d66f5['setLocalSc'+'aling'](_0x1e5d73),Ammo['destroy'](_0x1e5d73);}}return _0x5d66f5;}}['recreatePh'+'ysicalShap'+'es'](_0x55af45){const _0x391a3a=_0x55af45['data'];if((_0x391a3a['renderAsse'+'t']||_0x391a3a['asset'])&&_0x55af45['enabled']&&_0x55af45['entity']['enabled']){this['loadAsset'](_0x55af45,_0x391a3a['renderAsse'+'t']||_0x391a3a['asset'],_0x391a3a['renderAsse'+'t']?'render':'model');return;}this['doRecreate'+'PhysicalSh'+'ape'](_0x55af45);}['loadAsset'](_0x15e10b,_0x7bc742,_0x508753){const _0x27f067=_0x15e10b['data'],_0x5d0da0=this['system']['app']['assets'],_0x24eae6=_0x27f067[_0x508753],_0x15c05f=_0x1d8f8b=>{_0x27f067[_0x508753]===_0x24eae6&&(_0x27f067[_0x508753]=_0x1d8f8b['resource'],this['doRecreate'+'PhysicalSh'+'ape'](_0x15e10b));},_0x55bc0a=_0x54ff72=>{_0x54ff72['ready'](_0x11c5f8=>{if(_0x11c5f8['data']['containerA'+'sset']){const _0x3ea839=_0x5d0da0['get'](_0x11c5f8['data']['containerA'+'sset']);_0x3ea839['loaded']?_0x15c05f(_0x11c5f8):(_0x3ea839['ready'](()=>{_0x15c05f(_0x11c5f8);}),_0x5d0da0['load'](_0x3ea839));}else _0x15c05f(_0x11c5f8);}),_0x5d0da0['load'](_0x54ff72);},_0x12f469=_0x5d0da0['get'](_0x7bc742);_0x12f469?_0x55bc0a(_0x12f469):_0x5d0da0['once']('add:'+_0x7bc742,_0x55bc0a);}['doRecreate'+'PhysicalSh'+'ape'](_0x3c2f2c){const _0xa3645e=_0x3c2f2c['entity'],_0x51e96e=_0x3c2f2c['data'];_0x51e96e['model']||_0x51e96e['render']?(this['destroySha'+'pe'](_0x51e96e),_0x51e96e['shape']=this['createPhys'+'icalShape'](_0xa3645e,_0x51e96e),_0xa3645e['rigidbody']?(_0xa3645e['rigidbody']['disableSim'+'ulation'](),_0xa3645e['rigidbody']['createBody'](),_0xa3645e['enabled']&&_0xa3645e['rigidbody']['enabled']&&_0xa3645e['rigidbody']['enableSimu'+'lation']()):_0xa3645e['trigger']?_0xa3645e['trigger']['initialize'](_0x51e96e):_0xa3645e['trigger']=new pv(this['system']['app'],_0x3c2f2c,_0x51e96e)):(this['beforeRemo'+'ve'](_0xa3645e,_0x3c2f2c),this['remove'](_0xa3645e,_0x51e96e));}['updateTran'+'sform'](_0x2d3ff3,_0x31e80f,_0x6cac0f,_0x543c53){if(_0x2d3ff3['shape']){const _0x4f87e6=_0x2d3ff3['entity']['getWorldTr'+'ansform']()['getScale'](),_0x37665c=_0x2d3ff3['shape']['getLocalSc'+'aling']();(_0x4f87e6['x']!==_0x37665c['x']()||_0x4f87e6['y']!==_0x37665c['y']()||_0x4f87e6['z']!==_0x37665c['z']())&&this['doRecreate'+'PhysicalSh'+'ape'](_0x2d3ff3);}super['updateTran'+'sform'](_0x2d3ff3,_0x31e80f,_0x6cac0f,_0x543c53);}['destroySha'+'pe'](_0xcb0534){if(!_0xcb0534['shape'])return;const _0x5b01de=_0xcb0534['shape']['getNumChil'+'dShapes']();for(let _0x459e05=0x1*-0x2566+-0x1583+0x3ae9;_0x459e05<_0x5b01de;_0x459e05++){const _0x1ab61b=_0xcb0534['shape']['getChildSh'+'ape'](_0x459e05);Ammo['destroy'](_0x1ab61b);}Ammo['destroy'](_0xcb0534['shape']),_0xcb0534['shape']=null;}}class wL extends Ta{['createPhys'+'icalShape'](_0x1fdfee,_0x3efc34){if(typeof Ammo<'u')return new Ammo['btCompound'+'Shape']();}['_addEachDe'+'scendant'](_0x365bea){!_0x365bea['collision']||_0x365bea['rigidbody']||(_0x365bea['collision']['_compoundP'+'arent']=this,_0x365bea!==this['entity']&&_0x365bea['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x365bea['collision']));}['_updateEac'+'hDescendan'+'t'](_0x181887){_0x181887['collision']&&_0x181887['collision']['_compoundP'+'arent']===this&&(_0x181887['collision']['_compoundP'+'arent']=null,_0x181887!==this['entity']&&!_0x181887['rigidbody']&&_0x181887['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x181887['collision']));}['_updateEac'+'hDescendan'+'tTransform'](_0x3511c1){!_0x3511c1['collision']||_0x3511c1['collision']['_compoundP'+'arent']!==this['collision']['_compoundP'+'arent']||this['collision']['system']['updateComp'+'oundChildT'+'ransform'](_0x3511c1,!(0x1ab9*0x1+-0x1*-0x4df+0x1*-0x1f97));}}class EL extends ct{constructor(_0x2a5521){super(_0x2a5521),this['id']='collision',this['ComponentT'+'ype']=Ka,this['DataType']=hL,this['schema']=_L,this['implementa'+'tions']={},this['_triMeshCa'+'che']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['on']('remove',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x21b939,_0x42e986,_0x1d760f){_0x1d760f=['type','halfExtent'+'s','radius','axis','height','convexHull','shape','model','asset','render','renderAsse'+'t','enabled','linearOffs'+'et','angularOff'+'set','checkVerte'+'xDuplicate'+'s'];const _0x52ed7f={};for(let _0x28961d=0x47*0xc+-0xcb*-0x7+-0x8e1,_0x5f3a54=_0x1d760f['length'];_0x28961d<_0x5f3a54;_0x28961d++){const _0x39e526=_0x1d760f[_0x28961d];_0x52ed7f[_0x39e526]=_0x42e986[_0x39e526];}let _0x356b70;if(_0x42e986['hasOwnProp'+'erty']('asset')?(_0x356b70=_0x1d760f['indexOf']('model'),_0x356b70!==-(0x25f7+-0x1cb6+-0x940)&&_0x1d760f['splice'](_0x356b70,0x2*0xb6f+-0x182*0x11+0x1*0x2c5),_0x356b70=_0x1d760f['indexOf']('render'),_0x356b70!==-(-0x22ed*0x1+0xed7+0x1*0x1417)&&_0x1d760f['splice'](_0x356b70,-0x1*0xb66+-0x363*-0xb+-0x19da)):_0x42e986['hasOwnProp'+'erty']('model')&&(_0x356b70=_0x1d760f['indexOf']('asset'),_0x356b70!==-(0x18*0x9c+0x67+0x6*-0x281)&&_0x1d760f['splice'](_0x356b70,-0xe97+-0xd8a+0x115*0x1a)),_0x52ed7f['type']||(_0x52ed7f['type']=_0x21b939['data']['type']),_0x21b939['data']['type']=_0x52ed7f['type'],Array['isArray'](_0x52ed7f['halfExtent'+'s'])&&(_0x52ed7f['halfExtent'+'s']=new D(_0x52ed7f['halfExtent'+'s'])),Array['isArray'](_0x52ed7f['linearOffs'+'et'])&&(_0x52ed7f['linearOffs'+'et']=new D(_0x52ed7f['linearOffs'+'et'])),Array['isArray'](_0x52ed7f['angularOff'+'set'])){const _0x391a01=_0x52ed7f['angularOff'+'set'];_0x391a01['length']===-0xde7*-0x1+0x1627*-0x1+0x2d*0x2f?_0x52ed7f['angularOff'+'set']=new le()['setFromEul'+'erAngles'](_0x391a01[-0x1*0xed1+-0x60c+0x14dd],_0x391a01[-0x11de*0x2+-0x1406+0x37c3],_0x391a01[-0x3*0x11+-0x2683+0x26b8]):_0x52ed7f['angularOff'+'set']=new le(_0x52ed7f['angularOff'+'set']);}const _0x533444=this['_createImp'+'lementatio'+'n'](_0x52ed7f['type']);_0x533444['beforeInit'+'ialize'](_0x21b939,_0x52ed7f),super['initialize'+'ComponentD'+'ata'](_0x21b939,_0x52ed7f,_0x1d760f),_0x533444['afterIniti'+'alize'](_0x21b939,_0x52ed7f);}['_createImp'+'lementatio'+'n'](_0x47d81e){if(this['implementa'+'tions'][_0x47d81e]===void(0x1e63+0x91c+-0x277f)){let _0xcddaea;switch(_0x47d81e){case'box':_0xcddaea=new gL(this);break;case'sphere':_0xcddaea=new SL(this);break;case'capsule':_0xcddaea=new yL(this);break;case'cylinder':_0xcddaea=new vL(this);break;case'cone':_0xcddaea=new xL(this);break;case'mesh':_0xcddaea=new TL(this);break;case'compound':_0xcddaea=new wL(this);break;default:w['error']('_createImp'+'lementatio'+'n:\x20Invalid'+'\x20collision'+'\x20system\x20ty'+'pe:\x20'+_0x47d81e);}this['implementa'+'tions'][_0x47d81e]=_0xcddaea;}return this['implementa'+'tions'][_0x47d81e];}['_getImplem'+'entation'](_0x38b587){return this['implementa'+'tions'][_0x38b587['collision']['data']['type']];}['cloneCompo'+'nent'](_0x2a6d2c,_0x6879db){return this['_getImplem'+'entation'](_0x2a6d2c)['clone'](_0x2a6d2c,_0x6879db);}['onBeforeRe'+'move'](_0x20fb5e,_0x1205c3){this['implementa'+'tions'][_0x1205c3['data']['type']]['beforeRemo'+'ve'](_0x20fb5e,_0x1205c3),_0x1205c3['onBeforeRe'+'move']();}['onRemove'](_0x31dce9,_0x2d8cec){this['implementa'+'tions'][_0x2d8cec['type']]['remove'](_0x31dce9,_0x2d8cec);}['updateComp'+'oundChildT'+'ransform'](_0x3005a1,_0x311508){const _0x2d8bd9=_0x3005a1['collision']['_compoundP'+'arent'];if(_0x2d8bd9!==_0x3005a1['collision']&&_0x3005a1['enabled']&&_0x3005a1['collision']['enabled']&&(_0x3005a1['_dirtyLoca'+'l']||_0x311508)){const _0x1164be=this['_getNodeTr'+'ansform'](_0x3005a1,_0x2d8bd9['entity']),_0x542cdf=_0x2d8bd9['getCompoun'+'dChildShap'+'eIndex'](_0x3005a1['collision']['shape']);_0x542cdf===null?_0x2d8bd9['shape']['addChildSh'+'ape'](_0x1164be,_0x3005a1['collision']['data']['shape']):_0x2d8bd9['shape']['updateChil'+'dTransform'](_0x542cdf,_0x1164be,!(0x69a+-0x1*-0x144d+-0x1ae7)),Ammo['destroy'](_0x1164be);}}['_removeCom'+'poundChild'](_0x3d5bbb,_0x4a3e98){if(_0x3d5bbb['shape']['getNumChil'+'dShapes']()!==0x281*0x2+0xc7b+-0x117d){if(_0x3d5bbb['shape']['removeChil'+'dShape'])_0x3d5bbb['shape']['removeChil'+'dShape'](_0x4a3e98);else{const _0x5487c0=_0x3d5bbb['getCompoun'+'dChildShap'+'eIndex'](_0x4a3e98);_0x5487c0!==null&&_0x3d5bbb['shape']['removeChil'+'dShapeByIn'+'dex'](_0x5487c0);}}}['onTransfor'+'mChanged'](_0xb3db49,_0x3a550d,_0x3ceafc,_0x485091){this['implementa'+'tions'][_0xb3db49['data']['type']]['updateTran'+'sform'](_0xb3db49,_0x3a550d,_0x3ceafc,_0x485091);}['changeType'](_0x37df44,_0x1a832a,_0x4b3255){this['implementa'+'tions'][_0x1a832a]['beforeRemo'+'ve'](_0x37df44['entity'],_0x37df44),this['implementa'+'tions'][_0x1a832a]['remove'](_0x37df44['entity'],_0x37df44['data']),this['_createImp'+'lementatio'+'n'](_0x4b3255)['reset'](_0x37df44,_0x37df44['data']);}['recreatePh'+'ysicalShap'+'es'](_0x178af9){this['implementa'+'tions'][_0x178af9['data']['type']]['recreatePh'+'ysicalShap'+'es'](_0x178af9);}['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x27b864,_0x495a9c){if(_0x27b864===_0x495a9c){const _0x586f4d=_0x27b864['getWorldTr'+'ansform']()['getScale']();cc['setScale'](_0x586f4d['x'],_0x586f4d['y'],_0x586f4d['z']);}else this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x27b864['parent'],_0x495a9c),cc['mul'](_0x27b864['getLocalTr'+'ansform']());}['_getNodeSc'+'aling'](_0x4ad617){const _0xcc058f=_0x4ad617['getWorldTr'+'ansform']()['getScale']();return new Ammo['btVector3'](_0xcc058f['x'],_0xcc058f['y'],_0xcc058f['z']);}['_getNodeTr'+'ansform'](_0x5a321a,_0x4d6904){let _0x590f82,_0x51a8a7;_0x4d6904?(this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x5a321a,_0x4d6904),_0x590f82=pL,_0x51a8a7=kr,cc['getTransla'+'tion'](_0x590f82),_0x51a8a7['setFromMat'+'4'](cc)):(_0x590f82=_0x5a321a['getPositio'+'n'](),_0x51a8a7=_0x5a321a['getRotatio'+'n']());const _0x5ae640=new Ammo['btQuaterni'+'on'](),_0x2d4019=new Ammo['btTransfor'+'m']();_0x2d4019['setIdentit'+'y']();const _0x39e86b=_0x2d4019['getOrigin'](),_0xfec40=_0x5a321a['collision'];if(_0xfec40&&_0xfec40['_hasOffset']){const _0x2257a3=_0xfec40['data']['linearOffs'+'et'],_0x2cfc0c=_0xfec40['data']['angularOff'+'set'],_0x3987ba=mL;kr['copy'](_0x51a8a7)['transformV'+'ector'](_0x2257a3,_0x3987ba),_0x3987ba['add'](_0x590f82),kr['copy'](_0x51a8a7)['mul'](_0x2cfc0c),_0x39e86b['setValue'](_0x3987ba['x'],_0x3987ba['y'],_0x3987ba['z']),_0x5ae640['setValue'](kr['x'],kr['y'],kr['z'],kr['w']);}else _0x39e86b['setValue'](_0x590f82['x'],_0x590f82['y'],_0x590f82['z']),_0x5ae640['setValue'](_0x51a8a7['x'],_0x51a8a7['y'],_0x51a8a7['z'],_0x51a8a7['w']);return _0x2d4019['setRotatio'+'n'](_0x5ae640),Ammo['destroy'](_0x5ae640),_0x2d4019;}['destroy'](){for(const _0x22b1e7 in this['_triMeshCa'+'che'])Ammo['destroy'](this['_triMeshCa'+'che'][_0x22b1e7]);this['_triMeshCa'+'che']=null,super['destroy']();}}const hc=new ie(),bL=new Kt();class AL{constructor(_0xe61fb8,_0x163efb,_0x15f36d){this['_entity']=_0xe61fb8,this['_element']=_0xe61fb8['element'],this['model']=new tr(),this['node']=new Ie(),this['model']['graph']=this['node'],this['mesh']=_0x163efb,this['meshInstan'+'ce']=new He(this['mesh'],_0x15f36d,this['node']),this['meshInstan'+'ce']['name']='ImageEleme'+'nt:\x20'+_0xe61fb8['name'],this['meshInstan'+'ce']['castShadow']=!(-0x10d+-0x89+0x197),this['meshInstan'+'ce']['receiveSha'+'dow']=!(0x1e4d*0x1+-0x1*0x513+-0x1939),this['_meshDirty']=!(0xdbe*-0x1+0x134f+-0x590),this['model']['meshInstan'+'ces']['push'](this['meshInstan'+'ce']),this['_entity']['addChild'](this['model']['graph']),this['model']['_entity']=this['_entity'],this['unmaskMesh'+'Instance']=null;}['destroy'](){var _0x2aec61,_0x4fa35a;this['setMateria'+'l'](null),this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),this['model']['destroy'](),this['model']=null,this['node']=null,this['mesh']=null,(_0x2aec61=this['meshInstan'+'ce'])==null||_0x2aec61['destroy'](),this['meshInstan'+'ce']=null,(_0x4fa35a=this['unmaskMesh'+'Instance'])==null||_0x4fa35a['destroy'](),this['unmaskMesh'+'Instance']=null,this['_entity']=null,this['_element']=null;}['setMesh'](_0x567123){this['meshInstan'+'ce']&&(this['mesh']=_0x567123,this['meshInstan'+'ce']['mesh']=_0x567123,this['meshInstan'+'ce']['visible']=!!_0x567123,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['mesh']=_0x567123),this['forceUpdat'+'eAabb']());}['setMask'](_0x12181e){var _0x13396a;if(this['meshInstan'+'ce']){if(this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),_0x12181e){this['unmaskMesh'+'Instance']=new He(this['mesh'],this['meshInstan'+'ce']['material'],this['node']),this['unmaskMesh'+'Instance']['name']='Unmask:\x20'+this['_entity']['name'],this['unmaskMesh'+'Instance']['castShadow']=!(-0xb*0x6d+-0x31*-0x5c+-0x2*0x676),this['unmaskMesh'+'Instance']['receiveSha'+'dow']=!(0x11*0x166+-0x76*-0x4b+0x1*-0x3a57),this['unmaskMesh'+'Instance']['pick']=!(-0x1*0x403+-0xf5d+0x1361),this['model']['meshInstan'+'ces']['push'](this['unmaskMesh'+'Instance']);for(const _0x252323 in this['meshInstan'+'ce']['parameters'])this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x252323,this['meshInstan'+'ce']['parameters'][_0x252323]['data']);}else{const _0x16efe0=this['model']['meshInstan'+'ces']['indexOf'](this['unmaskMesh'+'Instance']);_0x16efe0>=-0xb78+-0xaee*0x2+-0xed*-0x24&&this['model']['meshInstan'+'ces']['splice'](_0x16efe0,0x207d+0x1+-0x207d);}this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['addModelTo'+'Layers'](this['model']),_0x12181e||((_0x13396a=this['unmaskMesh'+'Instance'])==null||_0x13396a['destroy'](),this['unmaskMesh'+'Instance']=null);}}['setMateria'+'l'](_0x304ff8){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x304ff8,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['material']=_0x304ff8));}['setParamet'+'er'](_0x19d884,_0x1676ca){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['setParamet'+'er'](_0x19d884,_0x1676ca),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x19d884,_0x1676ca));}['deletePara'+'meter'](_0x3b5c27){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['deletePara'+'meter'](_0x3b5c27),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['deletePara'+'meter'](_0x3b5c27));}['setUnmaskD'+'rawOrder'](){if(!this['meshInstan'+'ce'])return;const _0x31c8d6=function(_0x7b5b88){let _0x5d390a;const _0x2be940=_0x7b5b88['children'],_0x5649c7=_0x2be940['length'];if(_0x5649c7){for(let _0x2054e0=0x9f5*0x2+0x2186+-0x3570;_0x2054e0<_0x5649c7;_0x2054e0++)_0x2be940[_0x2054e0]['element']&&(_0x5d390a=_0x2be940[_0x2054e0]);if(!_0x5d390a)return null;const _0x4886c8=_0x31c8d6(_0x5d390a);return _0x4886c8||_0x5d390a;}return null;};if(this['unmaskMesh'+'Instance']){const _0x51392e=_0x31c8d6(this['_entity']);_0x51392e&&_0x51392e['element']?this['unmaskMesh'+'Instance']['drawOrder']=_0x51392e['element']['drawOrder']+_0x51392e['element']['getMaskOff'+'set']():this['unmaskMesh'+'Instance']['drawOrder']=this['meshInstan'+'ce']['drawOrder']+this['_element']['getMaskOff'+'set'](),w['trace'](zs,'setDrawOrd'+'er:\x20',this['unmaskMesh'+'Instance']['name'],this['unmaskMesh'+'Instance']['drawOrder']);}}['setDrawOrd'+'er'](_0x56b06e){this['meshInstan'+'ce']&&(w['trace'](zs,'setDrawOrd'+'er:\x20',this['meshInstan'+'ce']['name'],_0x56b06e),this['meshInstan'+'ce']['drawOrder']=_0x56b06e);}['setCull'](_0x4468c9){if(!this['meshInstan'+'ce'])return;const _0x1a1805=this['_element'];let _0x56c4a7=null;_0x4468c9&&_0x1a1805['_isScreenS'+'pace']()&&(_0x56c4a7=function(_0x2b953a){return _0x1a1805['isVisibleF'+'orCamera'](_0x2b953a);}),this['meshInstan'+'ce']['cull']=_0x4468c9,this['meshInstan'+'ce']['isVisibleF'+'unc']=_0x56c4a7,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['cull']=_0x4468c9,this['unmaskMesh'+'Instance']['isVisibleF'+'unc']=_0x56c4a7);}['setScreenS'+'pace'](_0x3335b8){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['screenSpac'+'e']=_0x3335b8,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['screenSpac'+'e']=_0x3335b8));}['setLayer'](_0x5c0e2f){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['layer']=_0x5c0e2f,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['layer']=_0x5c0e2f));}['forceUpdat'+'eAabb'](_0x121352){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_aabbVer']=-(-0x4d*-0x22+-0x1*0xd0d+0x2d4),this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_aabbVer']=-(0x1b73+-0xac5+-0x3*0x58f)));}['setAabbFun'+'c'](_0x56a291){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_updateAab'+'bFunc']=_0x56a291,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_updateAab'+'bFunc']=_0x56a291));}}class CL{constructor(_0x5c4267){h(this,'_evtSetMes'+'hes',null),(this['_element']=_0x5c4267,this['_entity']=_0x5c4267['entity'],this['_system']=_0x5c4267['system'],this['_textureAs'+'set']=null,this['_texture']=null,this['_materialA'+'sset']=null,this['_material']=null,this['_spriteAss'+'et']=null,this['_sprite']=null,this['_spriteFra'+'me']=-0x457+-0xa5f*-0x1+-0x608,this['_pixelsPer'+'Unit']=null,this['_targetAsp'+'ectRatio']=-(0xc1*0x17+0x2cf*-0x7+-0x77*-0x5),this['_rect']=new re(-0xa04+-0x1f86+0x298a,0x1b2c+-0xbab+-0xbd*0x15,0x7bb*-0x1+0x6*-0x350+0x49a*0x6,0x3*0xcad+0x4c7*-0x4+0x1*-0x12ea),this['_mask']=!(0x210a*0x1+0x1*0xe2f+-0x8*0x5e7),this['_maskRef']=0x1282+-0x1*-0x1817+-0x2a99,this['_outerScal'+'e']=new J(),this['_outerScal'+'eUniform']=new Float32Array(0xfbb+-0x725+0x2dc*-0x3),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(-0x23*0x71+-0x48*0xf+0x13af),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(0x107*-0x1d+-0x1197+0x2f66),this['_defaultMe'+'sh']=this['_createMes'+'h'](),this['_renderabl'+'e']=new AL(this['_entity'],this['_defaultMe'+'sh'],this['_material']),this['_color']=new ie(0x3*-0x7b4+0x4*0x7a8+-0x783,0x125c+0x101b+0x322*-0xb,-0x4ab*0x1+-0x1e64+0x44*0x84,-0xd73+0x20*0x63+0x5c*0x3),this['_colorUnif'+'orm']=new Float32Array([-0x3*-0xaa9+0x41*0x4+-0x20fe*0x1,0x1775+-0x256d+0xdf9*0x1,-0x2*-0xd25+0xa40*0x1+-0xc7*0x2f]),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',-0x212a+-0xa*-0x35c+-0x6d*0x1),this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_onScreenC'+'hange'](this['_element']['screen']),this['_element']['on']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['on']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['on']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this));}['destroy'](){this['textureAss'+'et']=null,this['spriteAsse'+'t']=null,this['materialAs'+'set']=null,this['_renderabl'+'e']['setMesh'](this['_defaultMe'+'sh']),this['_renderabl'+'e']['destroy'](),this['_defaultMe'+'sh']=null,this['_element']['off']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this);}['_onResolut'+'ionChange'](_0x32a817){}['_onParentR'+'esizeOrPiv'+'otChange'](){this['_renderabl'+'e']['mesh']&&this['_updateMes'+'h'](this['_renderabl'+'e']['mesh']);}['_onScreenS'+'paceChange'](_0x5176e7){this['_updateMat'+'erial'](_0x5176e7);}['_onScreenC'+'hange'](_0x4ed100,_0x3be63e){_0x4ed100?this['_updateMat'+'erial'](_0x4ed100['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0x2*-0x10+0x4ae+-0x4cd));}['_onDrawOrd'+'erChange'](_0x5b30f0){this['_renderabl'+'e']['setDrawOrd'+'er'](_0x5b30f0),this['mask']&&this['_element']['screen']&&this['_element']['screen']['screen']['once']('syncdrawor'+'der',function(){this['_renderabl'+'e']['setUnmaskD'+'rawOrder']();},this);}['_hasUserMa'+'terial'](){return!!this['_materialA'+'sset']||!!this['_material']&&this['_system']['defaultIma'+'geMaterial'+'s']['indexOf'](this['_material'])===-(0x164e+0x2e0+-0x192d);}['_use9Slici'+'ng'](){return this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt);}['_updateMat'+'erial'](_0x37fc7e){const _0x57596c=!!this['_mask'],_0x1e40f4=!!(this['sprite']&&this['sprite']['renderMode']===Pt),_0x4a1d3c=!!(this['sprite']&&this['sprite']['renderMode']===Mt);this['_hasUserMa'+'terial']()||(this['_material']=this['_system']['getImageEl'+'ementMater'+'ial'](_0x37fc7e,_0x57596c,_0x1e40f4,_0x4a1d3c)),this['_renderabl'+'e']&&(this['_renderabl'+'e']['setCull'](!this['_element']['_isScreenS'+'pace']()||this['_element']['_isScreenC'+'ulled']()),this['_renderabl'+'e']['setMateria'+'l'](this['_material']),this['_renderabl'+'e']['setScreenS'+'pace'](_0x37fc7e),this['_renderabl'+'e']['setLayer'](_0x37fc7e?QT:py));}['_createMes'+'h'](){const _0x47cab7=this['_element'],_0x1dbced=_0x47cab7['calculated'+'Width'],_0x4cb7fd=_0x47cab7['calculated'+'Height'],_0x29109a=this['_rect'],_0x7960d9=this['_system']['app']['graphicsDe'+'vice'],_0x4e024a=new Float32Array([_0x1dbced,0x1*0x566+-0x891+-0x32b*-0x1,-0x208f+-0x1071+0x3100,-0x47*-0x89+0x11e7*0x2+-0x1*0x49cd,0x15e8+-0xc*-0x240+-0x4*0xc3a,-0x351*0x8+-0x18ca+0x7*0x755,_0x29109a['x']+_0x29109a['z'],0x2195+-0x30a*0x1+-0x1e8a-_0x29109a['y'],_0x1dbced,_0x4cb7fd,0x24db+-0x990+-0x1b4b,0x74d+-0x3e8+-0x4f*0xb,-0x5*0x2c3+-0xf32+0x1d01,0x1a3*0x17+0x5*-0x6b2+-0x42a*0x1,_0x29109a['x']+_0x29109a['z'],-0xb7*-0x20+-0x3*0xbb1+0xc34-(_0x29109a['y']+_0x29109a['w']),0x13f1+0x449+-0x2*0xc1d,0x2*0xd55+0xf4*0x1a+-0x3372,0x1358+-0xaf+0x12a9*-0x1,-0x10dd+-0xc11*0x1+-0xe77*-0x2,0x766*-0x2+0xb7f+-0x5*-0xa9,0x4*-0x87d+0xdd6+0x141f,_0x29109a['x'],0x164*-0x1+0x1ea7+0x1d42*-0x1-_0x29109a['y'],-0x1ec4+-0x1*-0x216d+-0x2a9,_0x4cb7fd,-0x44d*-0x5+0x68+-0x47*0x4f,-0x1b82+0x1029+0x53*0x23,0x41+0x1815+-0x1856,-0x19b6+-0x1295*0x1+0x2c4c,_0x29109a['x'],0x412+-0x1f6f+0x1b5e-(_0x29109a['y']+_0x29109a['w'])]),_0x4e344f=bL['get'](_0x7960d9,()=>new kt(_0x7960d9,[{'semantic':Pe,'components':0x3,'type':Ve},{'semantic':gs,'components':0x3,'type':Ve},{'semantic':is,'components':0x2,'type':Ve}])),_0x49417b=new Ds(_0x7960d9,_0x4e344f,-0xd45+-0x1*0x2123+0x1*0x2e6c,{'data':_0x4e024a['buffer']}),_0x1eb5cc=new Ge(_0x7960d9);return _0x1eb5cc['vertexBuff'+'er']=_0x49417b,_0x1eb5cc['primitive'][-0x1*-0x17e0+0x252a+-0x3d0a]['type']=vr,_0x1eb5cc['primitive'][-0x1bc*-0x1+0x269e+-0x285a]['base']=0x2*-0x110b+-0x6*0x10a+0x2852,_0x1eb5cc['primitive'][-0x1*0x10b9+-0x19a7+-0x30*-0xe2]['count']=0x22fe+-0x11bb*-0x1+-0x1*0x34b5,_0x1eb5cc['primitive'][0x1*0x89e+-0x99+0x1*-0x805]['indexed']=!(-0xb6f*-0x3+0x1a57+0x2b*-0x169),_0x1eb5cc['aabb']['setMinMax'](D['ZERO'],new D(_0x1dbced,_0x4cb7fd,-0x14cc+0x506+0xfc6)),this['_updateMes'+'h'](_0x1eb5cc),_0x1eb5cc;}['_updateMes'+'h'](_0x2cc70b){const _0xa16814=this['_element'];let _0x40277e=_0xa16814['calculated'+'Width'],_0x4ae759=_0xa16814['calculated'+'Height'];if(_0xa16814['fitMode']!==Rc&&this['_targetAsp'+'ectRatio']>-0x92b*0x1+-0x1*-0xdee+0x1*-0x4c3){const _0x2b323a=_0xa16814['calculated'+'Width']/_0xa16814['calculated'+'Height'];_0xa16814['fitMode']===nL&&_0x2b323a>this['_targetAsp'+'ectRatio']||_0xa16814['fitMode']===oL&&_0x2b323a<this['_targetAsp'+'ectRatio']?_0x40277e=_0xa16814['calculated'+'Height']*this['_targetAsp'+'ectRatio']:_0x4ae759=_0xa16814['calculated'+'Width']/this['_targetAsp'+'ectRatio'];}const _0x322126=_0xa16814['_isScreenS'+'pace']();if(this['_updateMat'+'erial'](_0x322126),this['_renderabl'+'e']&&this['_renderabl'+'e']['forceUpdat'+'eAabb'](),this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){const _0x1229b5=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]],_0x518c04=(0x2016+0x1ddf+-0x3df3*0x1)/_0x1229b5['rect']['z'],_0x279d78=(0x433+-0x27*-0x52+-0x10af)/_0x1229b5['rect']['w'];this['_innerOffs'+'et']['set'](_0x1229b5['border']['x']*_0x518c04,_0x1229b5['border']['y']*_0x279d78,_0x1229b5['border']['z']*_0x518c04,_0x1229b5['border']['w']*_0x279d78);const _0x52e090=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x1229b5['rect']['x']/_0x52e090['width'],_0x1229b5['rect']['y']/_0x52e090['height'],_0x1229b5['rect']['z']/_0x52e090['width'],_0x1229b5['rect']['w']/_0x52e090['height']);const _0x3a7cd4=this['_pixelsPer'+'Unit']!==null?this['_pixelsPer'+'Unit']:this['sprite']['pixelsPerU'+'nit'],_0x25c1a4=_0x1229b5['rect']['z']/_0x3a7cd4,_0x4df22a=_0x1229b5['rect']['w']/_0x3a7cd4;this['_outerScal'+'e']['set'](Math['max'](_0x40277e,this['_innerOffs'+'et']['x']*_0x25c1a4),Math['max'](_0x4ae759,this['_innerOffs'+'et']['y']*_0x4df22a));let _0x187371=_0x25c1a4,_0x17c61c=_0x4df22a;this['_outerScal'+'e']['x']/=_0x25c1a4,this['_outerScal'+'e']['y']/=_0x4df22a,_0x187371*=Y['clamp'](_0x40277e/(this['_innerOffs'+'et']['x']*_0x25c1a4),-0x65*-0x1+0x26e*-0x7+-0x1*-0x109d+0.0001,0x2624*0x1+-0x77*0x16+-0x1be9),_0x17c61c*=Y['clamp'](_0x4ae759/(this['_innerOffs'+'et']['y']*_0x4df22a),0x63c+0x1*0x97a+0x7db*-0x2+0.0001,0x1*0x1b8e+-0x1c*-0x123+-0x3b61*0x1),this['_renderabl'+'e']&&(this['_innerOffs'+'etUniform'][0x537+-0x11df+0x5*0x288]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0xe9*-0x9+-0x1c19*0x1+0x13e9]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][-0x21cd*-0x1+0x15d9+0x37a4*-0x1]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0x8b6+-0x22*-0x23+-0xd59]=this['_innerOffs'+'et']['w'],this['_renderabl'+'e']['setParamet'+'er']('innerOffse'+'t',this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][0x2*-0x3dd+-0xb86*-0x3+-0x1ad8]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0xf*0xf4+0x1903+-0x274e]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x155f*0x1+-0x2115+-0x1b3b*-0x2]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][-0x84*-0x10+-0x3b6+-0x487]=this['_atlasRect']['w'],this['_renderabl'+'e']['setParamet'+'er']('atlasRect',this['_atlasRect'+'Uniform']),this['_outerScal'+'eUniform'][-0x1171+-0x256a+0x36db]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x174+0x19ca+-0x16f*0x13]=this['_outerScal'+'e']['y'],this['_renderabl'+'e']['setParamet'+'er']('outerScale',this['_outerScal'+'eUniform']),this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']),this['_renderabl'+'e']['node']['setLocalSc'+'ale'](_0x187371,_0x17c61c,-0x1*-0x1e19+-0x1a8c+-0x38c),this['_renderabl'+'e']['node']['setLocalPo'+'sition']((-0xb9*-0x4+-0x376*-0x4+-0x33*0x54+0.5-_0xa16814['pivot']['x'])*_0x40277e,(0x3*0x14b+0x1ac6+0x19d*-0x13+0.5-_0xa16814['pivot']['y'])*_0x4ae759,-0x159d*-0x1+-0x249+0x1354*-0x1));}else{const _0x24b9ef=_0x2cc70b['vertexBuff'+'er'],_0x1a5085=new Float32Array(_0x24b9ef['lock']()),_0x2ab531=_0xa16814['pivot']['x'],_0x2ba700=_0xa16814['pivot']['y'];_0x1a5085[-0x1dd9+-0x1be1+-0x3*-0x133e]=_0x40277e-_0x2ab531*_0x40277e,_0x1a5085[0x2239*0x1+-0x1fb8+-0x280]=0x776+-0x1b8*-0x11+-0x24ae-_0x2ba700*_0x4ae759,_0x1a5085[-0x2*-0x781+0x1fb4+0x956*-0x5]=_0x40277e-_0x2ab531*_0x40277e,_0x1a5085[0x194*-0x8+0x1*-0xd13+0x19bc]=_0x4ae759-_0x2ba700*_0x4ae759,_0x1a5085[-0xb0a+-0x19bc+-0x75e*-0x5]=0x1456+-0x4*0x8f3+0xf76-_0x2ab531*_0x40277e,_0x1a5085[0xe02+0x1*0x11fb+0x3*-0xaa4]=-0x21e0+0xaf8+-0x8*-0x2dd-_0x2ba700*_0x4ae759,_0x1a5085[-0x980+-0x66a+0x1002]=0x2d3*-0x3+0x1*0x10af+0x1*-0x836-_0x2ab531*_0x40277e,_0x1a5085[-0xa8*0x1c+0x2126+-0xd*0x121]=_0x4ae759-_0x2ba700*_0x4ae759;let _0x7d1513=0x25ae+0x697+-0x2c44*0x1,_0xbc6429=0x68a+0x2*-0xb7b+0x5*0x349,_0x3d5d6e=this['_rect'];if(this['_sprite']&&this['_sprite']['frameKeys'][this['_spriteFra'+'me']]&&this['_sprite']['atlas']){const _0x31ac36=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];_0x31ac36&&(_0x3d5d6e=_0x31ac36['rect'],_0x7d1513=this['_sprite']['atlas']['texture']['width'],_0xbc6429=this['_sprite']['atlas']['texture']['height']);}_0x1a5085[-0x3*0x377+-0x2*-0x361+0x3a9]=(_0x3d5d6e['x']+_0x3d5d6e['z'])/_0x7d1513,_0x1a5085[0x1*0x2e3+-0x2*0x10e7+0x1ef2]=-0x121d+-0x7c8+0xff*0x1a-_0x3d5d6e['y']/_0xbc6429,_0x1a5085[-0xf80+0x1c9*0x9+0x1*-0x83]=(_0x3d5d6e['x']+_0x3d5d6e['z'])/_0x7d1513,_0x1a5085[0x1a32+0x169e+-0x30c1]=-0xb*-0x259+-0x1d30+0x35e-(_0x3d5d6e['y']+_0x3d5d6e['w'])/_0xbc6429,_0x1a5085[0xac+0x1*0x125b+-0x12f1]=_0x3d5d6e['x']/_0x7d1513,_0x1a5085[0xc4+0x1*-0x1217+0x116a]=0x20f3+-0x267e+0x58c-_0x3d5d6e['y']/_0xbc6429,_0x1a5085[-0x1225+-0x5*0x3e+0x1379]=_0x3d5d6e['x']/_0x7d1513,_0x1a5085[-0x1363+0x3a*-0x3d+0x2154]=0x133b+0xf65*0x2+0x6*-0x856-(_0x3d5d6e['y']+_0x3d5d6e['w'])/_0xbc6429,_0x24b9ef['unlock']();const _0x1fd74c=new D(-0x11fc*0x2+0x2483+-0x8b-_0x2ab531*_0x40277e,-0x846+-0xd*-0x24f+-0x15bd-_0x2ba700*_0x4ae759,-0x22d4+-0x28d*-0x9+0xbdf),_0x3968c7=new D(_0x40277e-_0x2ab531*_0x40277e,_0x4ae759-_0x2ba700*_0x4ae759,-0x75*-0xd+0x249e+-0x883*0x5);_0x2cc70b['aabb']['setMinMax'](_0x1fd74c,_0x3968c7),this['_renderabl'+'e']&&(this['_renderabl'+'e']['node']['setLocalSc'+'ale'](0x3*-0x31d+-0x1d95+0x26ed,-0xd54+-0x2*0x47+0x2d*0x4f,-0xd37+0xaef+0x249),this['_renderabl'+'e']['node']['setLocalPo'+'sition'](0x1f7e+-0x38a*-0x4+-0x2da6,0xef*-0x26+-0x3*-0x953+0x781*0x1,-0x1c30+0x1400+0x8*0x106),this['_renderabl'+'e']['setAabbFun'+'c'](null));}this['_meshDirty']=!(-0x1*-0x2665+0x442*0x1+-0x1*0x2aa6);}['_updateSpr'+'ite'](){let _0x17163d=!(-0x2*0xa13+0x5f9*0x1+-0x3*-0x4ba),_0x39c0d5=null;if(this['_targetAsp'+'ectRatio']=-(-0x117c+-0x30f*0x3+0x1*0x1aaa),this['_sprite']&&this['_sprite']['atlas']){_0x39c0d5=this['_sprite']['meshes'][this['spriteFram'+'e']],_0x17163d=this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt;const _0x2ea0e3=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];(_0x2ea0e3==null?void(-0x194a+0x67a*-0x1+0x1fc4):_0x2ea0e3['rect']['w'])>0x1*-0x1b8e+0x1d31+-0x1a3&&(this['_targetAsp'+'ectRatio']=_0x2ea0e3['rect']['z']/_0x2ea0e3['rect']['w']);}this['mesh']=_0x17163d?_0x39c0d5:this['_defaultMe'+'sh'],this['refreshMes'+'h']();}['refreshMes'+'h'](){this['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x1*-0x19a+-0x1*0x56b+0x1*0x3d1):this['_updateMes'+'h'](this['mesh']));}['_updateAab'+'b'](_0x4a2162){return _0x4a2162['center']['set'](-0x1*0x441+0xd97+0xa*-0xef,0x10f3*0x1+0xf0e+0x2001*-0x1,0x35*-0x8a+-0x15*-0x1a5+-0x1*0x5f7),_0x4a2162['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0xa4*0xd+0x4*0x515+-0xc00+0.5),this['_outerScal'+'e']['y']*(-0xb3b+0x1*0x1b55+-0x2*0x80d+0.5),0x94+0x114+-0x1a8+0.001),_0x4a2162['setFromTra'+'nsformedAa'+'bb'](_0x4a2162,this['_renderabl'+'e']['node']['getWorldTr'+'ansform']()),_0x4a2162;}['_toggleMas'+'k'](){this['_element']['_dirtifyMa'+'sk']();const _0x6c449e=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x6c449e),this['_renderabl'+'e']['setMask'](!!this['_mask']);}['_onMateria'+'lLoad'](_0x3dc542){this['material']=_0x3dc542['resource'];}['_onMateria'+'lAdded'](_0x528b63){this['_system']['app']['assets']['off']('add:'+_0x528b63['id'],this['_onMateria'+'lAdded'],this),this['_materialA'+'sset']===_0x528b63['id']&&this['_bindMater'+'ialAsset'](_0x528b63);}['_bindMater'+'ialAsset'](_0x305252){this['_entity']['enabled']&&(_0x305252['on']('load',this['_onMateria'+'lLoad'],this),_0x305252['on']('change',this['_onMateria'+'lChange'],this),_0x305252['on']('remove',this['_onMateria'+'lRemove'],this),_0x305252['resource']?this['_onMateria'+'lLoad'](_0x305252):this['_system']['app']['assets']['load'](_0x305252));}['_unbindMat'+'erialAsset'](_0x191e43){_0x191e43['off']('load',this['_onMateria'+'lLoad'],this),_0x191e43['off']('change',this['_onMateria'+'lChange'],this),_0x191e43['off']('remove',this['_onMateria'+'lRemove'],this);}['_onMateria'+'lChange'](){}['_onMateria'+'lRemove'](){}['_onTexture'+'Added'](_0x29b93e){this['_system']['app']['assets']['off']('add:'+_0x29b93e['id'],this['_onTexture'+'Added'],this),this['_textureAs'+'set']===_0x29b93e['id']&&this['_bindTextu'+'reAsset'](_0x29b93e);}['_bindTextu'+'reAsset'](_0x3f748e){this['_entity']['enabled']&&(_0x3f748e['on']('load',this['_onTexture'+'Load'],this),_0x3f748e['on']('change',this['_onTexture'+'Change'],this),_0x3f748e['on']('remove',this['_onTexture'+'Remove'],this),_0x3f748e['resource']?this['_onTexture'+'Load'](_0x3f748e):this['_system']['app']['assets']['load'](_0x3f748e));}['_unbindTex'+'tureAsset'](_0xa8b857){_0xa8b857['off']('load',this['_onTexture'+'Load'],this),_0xa8b857['off']('change',this['_onTexture'+'Change'],this),_0xa8b857['off']('remove',this['_onTexture'+'Remove'],this);}['_onTexture'+'Load'](_0xebb67){this['texture']=_0xebb67['resource'];}['_onTexture'+'Change'](_0x5b323e){}['_onTexture'+'Remove'](_0x374425){}['_onSpriteA'+'ssetAdded'](_0xa3877d){this['_system']['app']['assets']['off']('add:'+_0xa3877d['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0xa3877d['id']&&this['_bindSprit'+'eAsset'](_0xa3877d);}['_bindSprit'+'eAsset'](_0x7bf0ae){this['_entity']['enabled']&&(_0x7bf0ae['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x7bf0ae['on']('change',this['_onSpriteA'+'ssetChange'],this),_0x7bf0ae['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x7bf0ae['resource']?this['_onSpriteA'+'ssetLoad'](_0x7bf0ae):this['_system']['app']['assets']['load'](_0x7bf0ae));}['_unbindSpr'+'iteAsset'](_0x4e8596){_0x4e8596['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x4e8596['off']('change',this['_onSpriteA'+'ssetChange'],this),_0x4e8596['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x4e8596['data']['textureAtl'+'asAsset']&&this['_system']['app']['assets']['off']('load:'+_0x4e8596['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this);}['_onSpriteA'+'ssetLoad'](_0x9d409f){if(!_0x9d409f||!_0x9d409f['resource'])this['sprite']=null;else{if(_0x9d409f['resource']['atlas'])this['sprite']=_0x9d409f['resource'];else{const _0x1d3767=_0x9d409f['data']['textureAtl'+'asAsset'];if(_0x1d3767){const _0xf4cb0d=this['_system']['app']['assets'];_0xf4cb0d['off']('load:'+_0x1d3767,this['_onTexture'+'AtlasLoad'],this),_0xf4cb0d['once']('load:'+_0x1d3767,this['_onTexture'+'AtlasLoad'],this);}}}}['_onSpriteA'+'ssetChange'](_0x44ab20){this['_onSpriteA'+'ssetLoad'](_0x44ab20);}['_onSpriteA'+'ssetRemove'](_0x22afa3){}['_bindSprit'+'e'](_0xbcf3fa){this['_evtSetMes'+'hes']=_0xbcf3fa['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),_0xbcf3fa['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0xbcf3fa['on']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0xbcf3fa['atlas']&&_0xbcf3fa['atlas']['on']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_unbindSpr'+'ite'](_0x700d5a){var _0x338f3b;(_0x338f3b=this['_evtSetMes'+'hes'])==null||_0x338f3b['off'](),this['_evtSetMes'+'hes']=null,_0x700d5a['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x700d5a['off']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x700d5a['atlas']&&_0x700d5a['atlas']['off']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_onSpriteM'+'eshesChang'+'e'](){this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0x1b40+-0xb56+0x7*-0x246,this['_sprite']['frameKeys']['length']-(0x52a*0x1+-0x49*-0x6e+0xc2d*-0x3))),this['_updateSpr'+'ite']();}['_onSpriteP'+'puChange'](){this['sprite']['renderMode']!==ci&&this['_pixelsPer'+'Unit']===null&&this['_updateSpr'+'ite']();}['_onAtlasTe'+'xtureChang'+'e'](){this['sprite']&&this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'));}['_onTexture'+'AtlasLoad'](_0x2225b1){const _0x29c898=this['_spriteAss'+'et'];_0x29c898 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x29c898):this['_onSpriteA'+'ssetLoad'](this['_system']['app']['assets']['get'](_0x29c898));}['onEnable'](){if(this['_materialA'+'sset']){const _0x3ec577=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);_0x3ec577&&_0x3ec577['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x3ec577);}if(this['_textureAs'+'set']){const _0x1dc724=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x1dc724&&_0x1dc724['resource']!==this['_texture']&&this['_bindTextu'+'reAsset'](_0x1dc724);}if(this['_spriteAss'+'et']){const _0x436263=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x436263&&_0x436263['resource']!==this['_sprite']&&this['_bindSprit'+'eAsset'](_0x436263);}this['_element']['addModelTo'+'Layers'](this['_renderabl'+'e']['model']);}['onDisable'](){this['_element']['removeMode'+'lFromLayer'+'s'](this['_renderabl'+'e']['model']);}['_setStenci'+'l'](_0x5270fa){this['_renderabl'+'e']['meshInstan'+'ce']['stencilFro'+'nt']=_0x5270fa,this['_renderabl'+'e']['meshInstan'+'ce']['stencilBac'+'k']=_0x5270fa;let _0x45415e=0x13*0x197+-0x1da5+0x18*-0x6;if(this['_element']['maskedBy']&&(_0x45415e=this['_element']['maskedBy']['element']['_image']['_maskRef']),this['_renderabl'+'e']['unmaskMesh'+'Instance']){const _0x51516d=new pi({'ref':_0x45415e+(0x223d+-0x1*0x206b+-0x1d1),'func':Hc,'zpass':ix});this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']=_0x51516d,this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k']=_0x51516d;}}['_updateRen'+'derableEmi'+'ssive'](){hc['linear'](this['_color']),this['_colorUnif'+'orm'][-0x16*0x137+0x347*-0x2+0x2148]=hc['r'],this['_colorUnif'+'orm'][-0x1344+-0x1aee+0x2e33]=hc['g'],this['_colorUnif'+'orm'][-0x197d+0x1a60*0x1+-0xe1]=hc['b'],this['_renderabl'+'e']['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}set['color'](_0x28ab03){this['_color']===_0x28ab03&&w['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t');const {r:_0x3308dc,g:_0xebddca,b:_0x4f27c3}=_0x28ab03;(this['_color']['r']!==_0x3308dc||this['_color']['g']!==_0xebddca||this['_color']['b']!==_0x4f27c3)&&(this['_color']['r']=_0x3308dc,this['_color']['g']=_0xebddca,this['_color']['b']=_0x4f27c3,this['_updateRen'+'derableEmi'+'ssive']()),this['_element']&&this['_element']['fire']('set:color',this['_color']);}get['color'](){return this['_color'];}set['opacity'](_0x8f5fab){_0x8f5fab!==this['_color']['a']&&(this['_color']['a']=_0x8f5fab,this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',_0x8f5fab)),this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x8f5fab);}get['opacity'](){return this['_color']['a'];}set['rect'](_0x49ad91){this['_rect']===_0x49ad91&&console['warn']('Setting\x20el'+'ement.rect'+'\x20to\x20itself'+'\x20will\x20have'+'\x20no\x20effect');let _0x37347e,_0x14f580,_0x3a213d,_0x3517a2;_0x49ad91 instanceof re?(_0x37347e=_0x49ad91['x'],_0x14f580=_0x49ad91['y'],_0x3a213d=_0x49ad91['z'],_0x3517a2=_0x49ad91['w']):(_0x37347e=_0x49ad91[0x1d2e+0xdf*-0xa+0x2*-0xa3c],_0x14f580=_0x49ad91[0x61+-0x3*0xc21+0x2403],_0x3a213d=_0x49ad91[0x2*-0xa63+-0x2*0x10f1+0x1b55*0x2],_0x3517a2=_0x49ad91[-0x7*0x2c7+-0x9fb+0x1*0x1d6f]),!(_0x37347e===this['_rect']['x']&&_0x14f580===this['_rect']['y']&&_0x3a213d===this['_rect']['z']&&_0x3517a2===this['_rect']['w'])&&(this['_rect']['set'](_0x37347e,_0x14f580,_0x3a213d,_0x3517a2),this['_renderabl'+'e']['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x19*0xe3+0x1e2*-0x9+0x271d*0x1):this['_updateMes'+'h'](this['_renderabl'+'e']['mesh'])));}get['rect'](){return this['_rect'];}['_removeMat'+'erialAsset'+'Events'](){if(this['_materialA'+'sset']){const _0x59efa7=this['_system']['app']['assets'];_0x59efa7['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this);const _0x17e8d2=_0x59efa7['get'](this['_materialA'+'sset']);_0x17e8d2&&(_0x17e8d2['off']('load',this['_onMateria'+'lLoad'],this),_0x17e8d2['off']('change',this['_onMateria'+'lChange'],this),_0x17e8d2['off']('remove',this['_onMateria'+'lRemove'],this));}}set['material'](_0x3262f7){if(this['_material']!==_0x3262f7){if(!_0x3262f7){const _0x4960cb=this['_element']['_isScreenS'+'pace']();this['mask']?_0x3262f7=_0x4960cb?this['_system']['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']:this['_system']['defaultIma'+'geMaskMate'+'rial']:_0x3262f7=_0x4960cb?this['_system']['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']:this['_system']['defaultIma'+'geMaterial'];}if(this['_material']=_0x3262f7,this['_materialA'+'sset']){const _0x372948=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);(!_0x372948||_0x372948['resource']!==_0x3262f7)&&(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=null);}_0x3262f7&&(this['_renderabl'+'e']['setMateria'+'l'](_0x3262f7),this['_hasUserMa'+'terial']()?(this['_renderabl'+'e']['deletePara'+'meter']('material_o'+'pacity'),this['_renderabl'+'e']['deletePara'+'meter']('material_e'+'missive')):(this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a'])));}}get['material'](){return this['_material'];}set['materialAs'+'set'](_0x28e4db){const _0x45b038=this['_system']['app']['assets'];let _0x17a72e=_0x28e4db;if(_0x28e4db instanceof pe&&(_0x17a72e=_0x28e4db['id']),this['_materialA'+'sset']!==_0x17a72e){if(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=_0x17a72e,this['_materialA'+'sset']){const _0x4e240a=_0x45b038['get'](this['_materialA'+'sset']);_0x4e240a?this['_bindMater'+'ialAsset'](_0x4e240a):(this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x17a72e,_0x45b038['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this));}else this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x17a72e;}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['texture'](_0x6766be){if(this['_texture']!==_0x6766be){if(this['_textureAs'+'set']){const _0x3773c0=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x3773c0&&_0x3773c0['resource']!==_0x6766be&&(this['textureAss'+'et']=null);}if(this['_texture']=_0x6766be,_0x6766be){this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null),this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_texture']),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a']);const _0x33d702=this['_texture']['width']/this['_texture']['height'];_0x33d702!==this['_targetAsp'+'ectRatio']&&(this['_targetAsp'+'ectRatio']=_0x33d702,this['_element']['fitMode']!==Rc&&this['refreshMes'+'h']());}else this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'),this['_targetAsp'+'ectRatio']=-(-0x5*0x43f+0x628*0x4+-0x364),this['_element']['fitMode']!==Rc&&this['refreshMes'+'h']();}}get['texture'](){return this['_texture'];}set['textureAss'+'et'](_0x10d66a){const _0x56872b=this['_system']['app']['assets'];let _0x59225d=_0x10d66a;if(_0x10d66a instanceof pe&&(_0x59225d=_0x10d66a['id']),this['_textureAs'+'set']!==_0x59225d){if(this['_textureAs'+'set']){_0x56872b['off']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this);const _0x48270f=_0x56872b['get'](this['_textureAs'+'set']);_0x48270f&&(_0x48270f['off']('load',this['_onTexture'+'Load'],this),_0x48270f['off']('change',this['_onTexture'+'Change'],this),_0x48270f['off']('remove',this['_onTexture'+'Remove'],this));}if(this['_textureAs'+'set']=_0x59225d,this['_textureAs'+'set']){const _0x6717fc=_0x56872b['get'](this['_textureAs'+'set']);_0x6717fc?this['_bindTextu'+'reAsset'](_0x6717fc):(this['texture']=null,_0x56872b['on']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this));}else this['texture']=null;}}get['textureAss'+'et'](){return this['_textureAs'+'set'];}set['spriteAsse'+'t'](_0x24965d){const _0x3ee0c7=this['_system']['app']['assets'];let _0x2d6146=_0x24965d;if(_0x24965d instanceof pe&&(_0x2d6146=_0x24965d['id']),this['_spriteAss'+'et']!==_0x2d6146){if(this['_spriteAss'+'et']){_0x3ee0c7['off']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this);const _0x51940f=_0x3ee0c7['get'](this['_spriteAss'+'et']);_0x51940f&&this['_unbindSpr'+'iteAsset'](_0x51940f);}if(this['_spriteAss'+'et']=_0x2d6146,this['_spriteAss'+'et']){const _0x182234=_0x3ee0c7['get'](this['_spriteAss'+'et']);_0x182234?this['_bindSprit'+'eAsset'](_0x182234):(this['sprite']=null,_0x3ee0c7['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}this['_element']&&this['_element']['fire']('set:sprite'+'Asset',_0x2d6146);}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['sprite'](_0x3e96d4){if(this['_sprite']!==_0x3e96d4){if(this['_sprite']&&this['_unbindSpr'+'ite'](this['_sprite']),this['_spriteAss'+'et']){const _0x2bb74a=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x2bb74a&&_0x2bb74a['resource']!==_0x3e96d4&&(this['spriteAsse'+'t']=null);}this['_sprite']=_0x3e96d4,this['_sprite']&&(this['_bindSprit'+'e'](this['_sprite']),this['_textureAs'+'set']&&(this['textureAss'+'et']=null)),this['_sprite']&&this['_sprite']['atlas']&&this['_sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap')),this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],-0xac+-0x1*0x2632+0x2*0x136f,this['_sprite']['frameKeys']['length']-(0x1*-0x25b1+-0x1522+0x3ad4))),this['_updateSpr'+'ite']();}}get['sprite'](){return this['_sprite'];}set['spriteFram'+'e'](_0x3cd902){const _0x142c84=this['_spriteFra'+'me'];this['_sprite']?this['_spriteFra'+'me']=Y['clamp'](_0x3cd902,0x1fc0+0x4c8+0x14e*-0x1c,this['_sprite']['frameKeys']['length']-(-0x1*-0x1e13+-0x1*-0x1a7+-0xa93*0x3)):this['_spriteFra'+'me']=_0x3cd902,this['_spriteFra'+'me']!==_0x142c84&&this['_updateSpr'+'ite'](),this['_element']&&this['_element']['fire']('set:sprite'+'Frame',_0x3cd902);}get['spriteFram'+'e'](){return this['_spriteFra'+'me'];}set['mesh'](_0xe03cc3){this['_renderabl'+'e']['setMesh'](_0xe03cc3),this['_defaultMe'+'sh']===_0xe03cc3?this['_renderabl'+'e']['setAabbFun'+'c'](null):this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']);}get['mesh'](){return this['_renderabl'+'e']['mesh'];}set['mask'](_0x597ccf){this['_mask']!==_0x597ccf&&(this['_mask']=_0x597ccf,this['_toggleMas'+'k']());}get['mask'](){return this['_mask'];}set['pixelsPerU'+'nit'](_0x460ce7){this['_pixelsPer'+'Unit']!==_0x460ce7&&(this['_pixelsPer'+'Unit']=_0x460ce7,this['_sprite']&&(this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt)&&this['_updateSpr'+'ite']());}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}get['aabb'](){return this['_renderabl'+'e']['meshInstan'+'ce']?this['_renderabl'+'e']['meshInstan'+'ce']['aabb']:null;}}class PL extends me{constructor(_0x26ceec){super(),this['_app']=_0x26ceec,_0x26ceec['i18n']['on'](Sa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['_autoLoad']=!(-0xf*0xf2+0x1*-0xa9+0x28*0x5f),this['_disableLo'+'calization']=!(-0x269b+0x14*-0x1ef+0x4d48),this['_defaultAs'+'set']=null,this['_localized'+'Asset']=null;}set['defaultAss'+'et'](_0x3eb27d){const _0x4e57d4=_0x3eb27d instanceof pe?_0x3eb27d['id']:_0x3eb27d;this['_defaultAs'+'set']!==_0x4e57d4&&(this['_defaultAs'+'set']&&this['_unbindDef'+'aultAsset'](),this['_defaultAs'+'set']=_0x4e57d4,this['_defaultAs'+'set']&&this['_bindDefau'+'ltAsset'](),this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['defaultAss'+'et'](){return this['_defaultAs'+'set'];}set['localizedA'+'sset'](_0x37e36d){const _0x58bce2=_0x37e36d instanceof pe?_0x37e36d['id']:_0x37e36d;this['_localized'+'Asset']!==_0x58bce2&&(this['_localized'+'Asset']&&(this['_app']['assets']['off']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this),this['_unbindLoc'+'alizedAsse'+'t']()),this['_localized'+'Asset']=_0x58bce2,this['_localized'+'Asset']&&(this['_app']['assets']['get'](this['_localized'+'Asset'])?this['_bindLocal'+'izedAsset']():this['_app']['assets']['once']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this)));}get['localizedA'+'sset'](){return this['_localized'+'Asset'];}set['autoLoad'](_0x1a6fa3){this['_autoLoad']!==_0x1a6fa3&&(this['_autoLoad']=_0x1a6fa3,this['_autoLoad']&&this['_localized'+'Asset']&&(this['_unbindLoc'+'alizedAsse'+'t'](),this['_bindLocal'+'izedAsset']()));}get['autoLoad'](){return this['_autoLoad'];}set['disableLoc'+'alization'](_0x20f10e){this['_disableLo'+'calization']!==_0x20f10e&&(this['_disableLo'+'calization']=_0x20f10e,this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['disableLoc'+'alization'](){return this['_disableLo'+'calization'];}['_bindDefau'+'ltAsset'](){const _0x53466f=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x53466f?this['_onDefault'+'AssetAdd'](_0x53466f):this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);}['_unbindDef'+'aultAsset'](){if(!this['_defaultAs'+'set'])return;this['_app']['assets']['off']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);const _0x152d5d=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x152d5d&&(_0x152d5d['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x152d5d['off']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x152d5d['off']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetAdd'](_0x69148c){this['_defaultAs'+'set']===_0x69148c['id']&&(_0x69148c['on']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x69148c['on']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x69148c['once']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetRemov'+'e'](_0x513c14){this['_defaultAs'+'set']===_0x513c14['id']&&(_0x513c14['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x513c14['off']('remove:loc'+'alized',this['_onLocaleA'+'dd'],this),this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this));}['_bindLocal'+'izedAsset'](){if(!this['_autoLoad'])return;const _0x1b6262=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x1b6262&&(_0x1b6262['on']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x1b6262['on']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x1b6262['on']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this),_0x1b6262['resource']?this['_onLocaliz'+'edAssetLoa'+'d'](_0x1b6262):this['_app']['assets']['load'](_0x1b6262));}['_unbindLoc'+'alizedAsse'+'t'](){const _0xdc27d0=this['_app']['assets']['get'](this['_localized'+'Asset']);_0xdc27d0&&(_0xdc27d0['off']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0xdc27d0['off']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0xdc27d0['off']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this));}['_onLocaliz'+'edAssetAdd'](_0x1a4719){this['_localized'+'Asset']===_0x1a4719['id']&&this['_bindLocal'+'izedAsset']();}['_onLocaliz'+'edAssetLoa'+'d'](_0x10ec72){this['fire']('load',_0x10ec72);}['_onLocaliz'+'edAssetCha'+'nge'](_0x4f81d4,_0x51ebb7,_0x2c030f,_0x4ef2f8){this['fire']('change',_0x4f81d4,_0x51ebb7,_0x2c030f,_0x4ef2f8);}['_onLocaliz'+'edAssetRem'+'ove'](_0x5a2f96){this['_localized'+'Asset']===_0x5a2f96['id']&&(this['localizedA'+'sset']=this['_defaultAs'+'set']),this['fire']('remove',_0x5a2f96);}['_onLocaleA'+'dd'](_0x22f175,_0x239a99){this['_app']['i18n']['locale']===_0x22f175&&this['_onSetLoca'+'le'](_0x22f175);}['_onLocaleR'+'emove'](_0x197f26,_0x226f25){this['_app']['i18n']['locale']===_0x197f26&&this['_onSetLoca'+'le'](_0x197f26);}['_onSetLoca'+'le'](_0x17b1c0){if(!this['_defaultAs'+'set']){this['localizedA'+'sset']=null;return;}const _0xccad9=this['_app']['assets']['get'](this['_defaultAs'+'set']);if(!_0xccad9||this['_disableLo'+'calization']){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}const _0x3beb8c=_0xccad9['getLocaliz'+'edAssetId'](_0x17b1c0);if(!_0x3beb8c){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}this['localizedA'+'sset']=_0x3beb8c;}['destroy'](){this['defaultAss'+'et']=null,this['_app']['i18n']['off'](Sa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['off']();}}const dh='msdf',ML='bitmap',So=0x22f+0x17e7+0x12*-0x173,Za=0xbf3*0x3+-0x6bb*-0x1+-0x2a93,ru=0x1713+0x1*-0x10e2+-0x62f,mv=0x1a*0xe9+0x1346+-0xb*0x3e7,au=-0x2d7*0xa+0x132a+-0x128*-0x8,nu=0x1d1a+0x22a5+0x2*-0x1fdd,ou=-0x52b+0x97*0x8+0x79,lu=-0x54b*0x6+0x4*0x39+-0x1ee5*-0x1,gg=-0x1*-0xda1+-0x1*0x186b+0x22a*0x5,DL='\x20\x09\x0a\x0d\x0b\x0c',IL=/[\w|/]/;class LL{constructor(_0x50c064){this['_symbols']=_0x50c064,this['_index']=0x1c5*-0xe+-0xd*-0xa3+0x67*0x29,this['_last']=0x583+-0x5*0x28+0x7*-0xad,this['_cur']=this['_symbols']['length']>-0x2*-0xec0+-0x1ae+-0x1bd2?this['_symbols'][0x1f2e+-0x10af+-0xe7f*0x1]:null,this['_buf']=[],this['_mode']='text',this['_error']=null;}['read'](){let _0x5477d7=this['_read']();for(;_0x5477d7===gg;)_0x5477d7=this['_read']();return _0x5477d7!==So&&_0x5477d7!==Za&&(this['_last']=this['_index']),_0x5477d7;}['buf'](){return this['_buf'];}['last'](){return this['_last'];}['error'](){return this['_error'];}['debugPrint'](){const _0x4d0580=['EOF','ERROR','TEXT','OPEN_BRACK'+'ET','CLOSE_BRAC'+'KET','EQUALS','STRING','IDENTIFIER','WHITESPACE'];let _0x453591=this['read'](),_0xeade24='';for(;_0xeade24+=(_0xeade24['length']>-0x17*0x12e+0x797*-0x3+0x31e7?'\x0a':'')+_0x4d0580[_0x453591]+'\x20\x27'+this['buf']()['join']('')+'\x27',!(_0x453591===So||_0x453591===Za);)_0x453591=this['read']();return _0xeade24;}['_read'](){return this['_buf']=[],this['_eof']()?So:this['_mode']==='text'?this['_text']():this['_tag']();}['_text'](){for(;;)switch(this['_cur']){case null:return this['_buf']['length']>0x1d19+-0xbcf*0x2+0x57b*-0x1?ru:So;case'[':return this['_mode']='tag',this['_buf']['length']>-0x269c+0x207c+0x2*0x310?ru:this['_tag']();case'\x5c':switch(this['_next'](),this['_cur']){case'[':this['_store']();break;default:this['_output']('\x5c');break;}break;default:this['_store']();break;}}['_tag'](){switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20tag',Za;case'[':return this['_store'](),mv;case']':return this['_store'](),this['_mode']='text',au;case'=':return this['_store'](),nu;case'\x20':case'\x09':case'\x0a':case'\x0d':case'\x0b':case'\x0c':return this['_whitespac'+'e']();case'\x22':return this['_string']();default:return this['_isIdentif'+'ierSymbol'](this['_cur'])?this['_identifie'+'r']():(this['_error']='unrecogniz'+'ed\x20charact'+'er',Za);}}['_whitespac'+'e'](){for(this['_store']();DL['indexOf'](this['_cur'])!==-(0x96d*-0x1+0x29*0x45+-0x19f);)this['_store']();return gg;}['_string'](){for(this['_next']();;)switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20string',Za;case'\x22':return this['_next'](),ou;default:this['_store']();break;}}['_identifie'+'r'](){for(this['_store']();this['_cur']!==null&&this['_isIdentif'+'ierSymbol'](this['_cur']);)this['_store']();return lu;}['_isIdentif'+'ierSymbol'](_0x55209c){return _0x55209c['length']===-0x2368+0x29*0x7b+0xfb6&&_0x55209c['match'](IL)!==null;}['_eof'](){return this['_cur']===null;}['_next'](){return this['_eof']()||(this['_index']++,this['_cur']=this['_index']<this['_symbols']['length']?this['_symbols'][this['_index']]:null),this['_cur'];}['_store'](){return this['_buf']['push'](this['_cur']),this['_next']();}['_output'](_0x166408){this['_buf']['push'](_0x166408);}}class RL{constructor(_0x223fdf){this['_scanner']=new LL(_0x223fdf),this['_error']=null;}['parse'](_0x576807,_0x38e1f2){for(;;)switch(this['_scanner']['read']()){case So:return!(-0x236f+-0x1010+0x337f);case Za:return!(-0x1779+-0x190e+0x3088);case ru:Array['prototype']['push']['apply'](_0x576807,this['_scanner']['buf']());break;case mv:if(!this['_parseTag'](_0x576807,_0x38e1f2))return!(-0xa54*-0x1+0x15dc+0x6b*-0x4d);break;default:return!(0x8af+-0x16dc*-0x1+0x16f*-0x16);}}['error'](){return'Error\x20eval'+'uating\x20mar'+'kup\x20at\x20#'+this['_scanner']['last']()['toString']()+'\x20('+(this['_scanner']['error']()||this['_error'])+')';}['_parseTag'](_0x38c746,_0x614a84){let _0x4aec8a=this['_scanner']['read']();if(_0x4aec8a!==lu)return this['_error']='expected\x20i'+'dentifier',!(0x26d+-0x1f9f+0x1d33);const _0x5bcaa4=this['_scanner']['buf']()['join']('');if(_0x5bcaa4[0xbbe*-0x3+0x155a+-0x60*-0x25]==='/'){for(let _0x48bb5b=_0x614a84['length']-(0xbda*0x2+-0x1*-0x94+-0x1847);_0x48bb5b>=0x1218+-0x1a63+-0xb*-0xc1;--_0x48bb5b)if(_0x5bcaa4==='/'+_0x614a84[_0x48bb5b]['name']&&_0x614a84[_0x48bb5b]['end']===null)return _0x614a84[_0x48bb5b]['end']=_0x38c746['length'],_0x4aec8a=this['_scanner']['read'](),_0x4aec8a!==au?(this['_error']='expected\x20c'+'lose\x20brack'+'et',!(0x8e5+0x1*0x1b65+0x1*-0x2449)):!(0x1a68+-0x1*0x2359+-0x15*-0x6d);return this['_error']='failed\x20to\x20'+'find\x20match'+'ing\x20tag',!(0x16*0x7b+-0x1fa2*-0x1+-0x2a33);}const _0x331d58={'name':_0x5bcaa4,'value':null,'attributes':{},'start':_0x38c746['length'],'end':null};if(_0x4aec8a=this['_scanner']['read'](),_0x4aec8a===nu){if(_0x4aec8a=this['_scanner']['read'](),_0x4aec8a!==ou)return this['_error']='expected\x20s'+'tring',!(-0x290*0xd+-0xb9f+0x59e*0x8);_0x331d58['value']=this['_scanner']['buf']()['join'](''),_0x4aec8a=this['_scanner']['read']();}for(;;){switch(_0x4aec8a){case au:return _0x614a84['push'](_0x331d58),!(0x22*-0xa5+-0x23eb+0x39d5);case lu:{const _0x8bdb15=this['_scanner']['buf']()['join']('');if(_0x4aec8a=this['_scanner']['read'](),_0x4aec8a!==nu)return this['_error']='expected\x20e'+'quals',!(-0x4a*-0x47+0x58a+-0x1*0x1a0f);if(_0x4aec8a=this['_scanner']['read'](),_0x4aec8a!==ou)return this['_error']='expected\x20s'+'tring',!(0xc72+0x1*0x107+-0x1af*0x8);const _0x13ef5b=this['_scanner']['buf']()['join']('');_0x331d58['attributes'][_0x8bdb15]=_0x13ef5b;break;}default:return this['_error']='expected\x20c'+'lose\x20brack'+'et\x20or\x20iden'+'tifier',!(-0x1*-0x223+-0xad*-0x22+0x191c*-0x1);}_0x4aec8a=this['_scanner']['read']();}}}function _v(_0x32b290,_0x526ed3){for(const _0x5de8a1 in _0x526ed3){if(!_0x526ed3['hasOwnProp'+'erty'](_0x5de8a1))continue;const _0x1d5640=_0x526ed3[_0x5de8a1];_0x1d5640 instanceof Object?(_0x32b290['hasOwnProp'+'erty'](_0x5de8a1)||(_0x32b290[_0x5de8a1]={}),_v(_0x32b290[_0x5de8a1],_0x526ed3[_0x5de8a1])):_0x32b290[_0x5de8a1]=_0x1d5640;}}function OL(_0x823541){if(_0x823541['length']===0xf5a+-0x26*-0x8f+-0x2*0x124a)return null;const _0x5924d1={};for(let _0x14a153=0x1*-0x1dd7+-0x241*0x5+0x3*0xdb4;_0x14a153<_0x823541['length'];++_0x14a153){const _0x38eb55=_0x823541[_0x14a153],_0xe18f52={};_0xe18f52[_0x38eb55['name']]={'value':_0x38eb55['value'],'attributes':_0x38eb55['attributes']},_v(_0x5924d1,_0xe18f52);}return _0x5924d1;}function FL(_0x249bce,_0x5ca9bc){if(_0x249bce['length']===-0x1374+0x26bb+0x149*-0xf)return null;const _0x58c2cc={};for(let _0x2661c0=-0x1*0x941+0x1143*0x1+-0x19a*0x5;_0x2661c0<_0x249bce['length'];++_0x2661c0){const _0x54e47d=_0x249bce[_0x2661c0];_0x58c2cc['hasOwnProp'+'erty'](_0x54e47d['start'])?_0x58c2cc[_0x54e47d['start']]['open']===null?_0x58c2cc[_0x54e47d['start']]['open']=[_0x54e47d]:_0x58c2cc[_0x54e47d['start']]['open']['push'](_0x54e47d):_0x58c2cc[_0x54e47d['start']]={'open':[_0x54e47d],'close':null},_0x58c2cc['hasOwnProp'+'erty'](_0x54e47d['end'])?_0x58c2cc[_0x54e47d['end']]['close']===null?_0x58c2cc[_0x54e47d['end']]['close']=[_0x54e47d]:_0x58c2cc[_0x54e47d['end']]['close']['push'](_0x54e47d):_0x58c2cc[_0x54e47d['end']]={'open':null,'close':[_0x54e47d]};}let _0x50d1b6=[];function _0x5011b7(_0x12f9c9){_0x50d1b6=_0x50d1b6['filter'](_0x3aefa2=>_0x12f9c9['find'](_0x27f712=>_0x27f712===_0x3aefa2)===void(-0x1089+0x1adb*0x1+-0xa52));}function _0x1a3b52(_0x21dae7){for(let _0x489f60=0x12b1+0xc2a+-0x1edb;_0x489f60<_0x21dae7['length'];++_0x489f60)_0x50d1b6['push'](_0x21dae7[_0x489f60]);}const _0x3f76bf=Object['keys'](_0x58c2cc)['sort']((_0xe8bdfd,_0x481f3b)=>_0xe8bdfd-_0x481f3b),_0x5f3ab5=[];for(let _0x39316a=0x1725+-0x2575+0x2*0x728;_0x39316a<_0x3f76bf['length'];++_0x39316a){const _0x1fa054=_0x58c2cc[_0x3f76bf[_0x39316a]];_0x1fa054['close']!==null&&_0x5011b7(_0x1fa054['close']),_0x1fa054['open']!==null&&_0x1a3b52(_0x1fa054['open']),_0x5f3ab5['push']({'start':_0x3f76bf[_0x39316a],'tags':OL(_0x50d1b6)});}const _0x2d0fb0=[];let _0x4d825f=null;for(let _0x5eb28f=0x12e6*-0x2+-0xe*-0x1d+0x2436;_0x5eb28f<_0x5f3ab5['length'];++_0x5eb28f){const _0x448a63=_0x5f3ab5[_0x5eb28f];for(;_0x2d0fb0['length']<_0x448a63['start'];)_0x2d0fb0['push'](_0x4d825f?_0x4d825f['tags']:null);_0x4d825f=_0x448a63;}for(;_0x2d0fb0['length']<_0x5ca9bc;)_0x2d0fb0['push'](null);return _0x2d0fb0;}function NL(_0x2d1bc5){const _0x14c0b5=new RL(_0x2d1bc5),_0x4a31c5=[],_0x372b18=[];if(!_0x14c0b5['parse'](_0x4a31c5,_0x372b18))return console['warn'](_0x14c0b5['error']()),{'symbols':_0x2d1bc5,'tags':null};const _0x16b196=_0x372b18['find'](_0x5dc0ca=>_0x5dc0ca['end']===null);if(_0x16b196)return console['warn']('Markup\x20err'+'or:\x20found\x20'+'unclosed\x20t'+'ag=\x27'+_0x16b196['name']+'\x27'),{'symbols':_0x2d1bc5,'tags':null};const _0x772dda=FL(_0x372b18,_0x4a31c5['length']);return{'symbols':_0x4a31c5,'tags':_0x772dda};}class kL{static['evaluate'](_0x403fcd){return NL(_0x403fcd);}}class UL{constructor(){this['count']=0x245d+-0x1a14+-0xa49*0x1,this['quad']=-0x5*-0x43a+-0x2504+0xfe2,this['lines']={},this['positions']=[],this['normals']=[],this['uvs']=[],this['colors']=[],this['indices']=[],this['outlines']=[],this['shadows']=[],this['meshInstan'+'ce']=null;}}function BL(_0x30c63a,_0x1ca589){const _0x18d786=new Ge(_0x30c63a);return _0x18d786['setPositio'+'ns'](_0x1ca589['positions']),_0x18d786['setNormals'](_0x1ca589['normals']),_0x18d786['setColors3'+'2'](_0x1ca589['colors']),_0x18d786['setUvs'](0x62f*-0x1+-0x3f8+-0xa27*-0x1,_0x1ca589['uvs']),_0x18d786['setIndices'](_0x1ca589['indices']),_0x18d786['setVertexS'+'tream'](ko,_0x1ca589['outlines'],-0x224*0x10+-0x1622+0x3865,void(0x1605+0x75a*-0x2+-0x1*0x751),Ve,!(0x6*-0xc1+-0x22bc+0x2743)),_0x18d786['setVertexS'+'tream'](Uo,_0x1ca589['shadows'],0x12ec*-0x1+-0x1*-0x14a1+-0xe*0x1f,void(-0x323+0x1*-0x1cb9+0x1fdc),Ve,!(-0x78a+-0x339*-0x1+0x452)),_0x18d786['update'](),_0x18d786;}const Sg=/^[\r\n]$/,zL=/^[ \t]$/,yg=/^[ \t\-]|\u200b$/,VL=/^[a-z0-9]$/i,vg=/^[\u1100-\u11ff]|[\u3000-\u9fff\ua960-\ua97f]|[\uac00-\ud7ff]$/,GL=/^[〕〉》」』】〙〗〟ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻]$/,HL=['​','؜','‎','‏','‪','‫','‬','‭','‮','⁦','⁧','⁨','⁩'],WL={'width':0x0,'height':0x0,'xadvance':0x0,'xoffset':0x0,'yoffset':0x0},xg=new ie(),$L=new J(),We=new ie();class XL{constructor(_0x53a8b1){this['_element']=_0x53a8b1,this['_system']=_0x53a8b1['system'],this['_entity']=_0x53a8b1['entity'],this['_text']='',this['_symbols']=[],this['_colorPale'+'tte']=[],this['_outlinePa'+'lette']=[],this['_shadowPal'+'ette']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null,this['_i18nKey']=null,this['_fontAsset']=new PL(this['_system']['app']),this['_fontAsset']['disableLoc'+'alization']=!(-0x18e3*0x1+0x26a4*0x1+0x7*-0x1f7),this['_fontAsset']['on']('load',this['_onFontLoa'+'d'],this),this['_fontAsset']['on']('change',this['_onFontCha'+'nge'],this),this['_fontAsset']['on']('remove',this['_onFontRem'+'ove'],this),this['_font']=null,this['_color']=new ie(-0xb57*-0x1+-0x2a6*0x1+-0x8b0,0x3e1*0x5+0x783+-0x1ae7,-0x14c2+-0x2*-0x1053+-0xbe3,-0xa39+0x13df*0x1+-0x9a5),this['_colorUnif'+'orm']=new Float32Array(0x1*-0x847+0x1ff2*-0x1+0x283c),this['_spacing']=-0x894+-0x2673*0x1+0xe*0x35c,this['_fontSize']=-0x141a*-0x1+-0x2228+0xa*0x16b,this['_fontMinY']=-0x3*0x7ca+0x1*0xfbb+0x7a3,this['_fontMaxY']=0x26+-0x1279+0x1253,this['_originalF'+'ontSize']=-0x2674+0x1c*0x121+-0x37c*-0x2,this['_maxFontSi'+'ze']=0x1d*0x60+-0x4e5*-0x2+-0x148a,this['_minFontSi'+'ze']=0x2*-0xc17+0x20d*0x4+0x1002,this['_autoFitWi'+'dth']=!(-0xa3*-0x13+-0x1*-0x4cf+0x1*-0x10e7),this['_autoFitHe'+'ight']=!(0xb*0x2af+0xefc+-0x2c80),this['_maxLines']=-(0x1b1d+0x37*0x2f+-0x1*0x2535),this['_lineHeigh'+'t']=0x9*0x9d+0x135f+-0x18c4,this['_scaledLin'+'eHeight']=-0xab*0x1f+-0x878*-0x1+0xc5d,this['_wrapLines']=!(-0x7*-0x19d+0x26e1+-0x322b),this['_drawOrder']=0x679*0x1+-0x182*-0x3+0x233*-0x5,this['_alignment']=new J(-0x19e9*0x1+0xc2b+0x1*0xdbe+0.5,-0x1384+0x5*-0x695+0x346d*0x1+0.5),this['_autoWidth']=!(0x1*0xc9b+0x1123*-0x1+0x1*0x488),this['_autoHeigh'+'t']=!(-0x5*-0x416+0x6e2+-0x1b50),this['width']=-0x3*0x20c+-0x165+0x283*0x3,this['height']=-0x429*-0x5+0x1be9+-0x30b6,this['_node']=new Ie(),this['_model']=new tr(),this['_model']['graph']=this['_node'],this['_entity']['addChild'](this['_node']),this['_meshInfo']=[],this['_material']=null,this['_aabbDirty']=!(-0x1007+-0xe05+0x1e0c),this['_aabb']=new De(),this['_noResize']=!(0x3a6*0x1+0x199f*-0x1+0xc2*0x1d),this['_currentMa'+'terialType']=null,this['_maskedMat'+'erialSrc']=null,this['_rtlReorde'+'r']=!(-0x14da+0x3*0x8ec+0x59*-0x11),this['_unicodeCo'+'nverter']=!(-0x2*-0x5a4+-0x11a2+0x65b),this['_rtl']=!(-0x8cd*0x2+0x8*-0x179+0x1d63),this['_outlineCo'+'lor']=new ie(-0x1*0x1fa5+0xdc5+0x11e0,0x781+-0x130+-0x651,0xdc+-0x123+0x47,0x11fc+-0xd65+0x2*-0x24b),this['_outlineCo'+'lorUniform']=new Float32Array(0xb*-0xb2+-0x244a+-0x2*-0x15fa),this['_outlineTh'+'icknessSca'+'le']=-0x3a*-0x27+-0x1e06+0x1530+0.2,this['_outlineTh'+'ickness']=0x10e6+-0x1654+0x56e,this['_shadowCol'+'or']=new ie(0xa*0x2ee+0x1d*-0x126+-0x39*-0x12,0x1e82*-0x1+0xcf2+0x1190,-0x5f+0x1cb3+-0x1*0x1c54,0x1c5b+-0x178c+-0x4ce),this['_shadowCol'+'orUniform']=new Float32Array(0xd54+-0x25*0x2e+-0x6aa),this['_shadowOff'+'setScale']=0xcb8+0xf*-0x121+0xd*0x53+0.005,this['_shadowOff'+'set']=new J(-0x372+-0x767*-0x5+-0x1*0x2191,0x21e*0x5+0x55*0x3e+-0x1f2c),this['_shadowOff'+'setUniform']=new Float32Array(0x20ae+-0xecb+0x17*-0xc7),this['_enableMar'+'kup']=!(0x8*0x4c0+-0x1fed*-0x1+-0x45ec),this['_onScreenC'+'hange'](this['_element']['screen']),_0x53a8b1['on']('resize',this['_onParentR'+'esize'],this),_0x53a8b1['on']('set:screen',this['_onScreenC'+'hange'],this),_0x53a8b1['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),_0x53a8b1['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),_0x53a8b1['on']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['on'](Sa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['on']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['on']('data:remov'+'e',this['_onLocaliz'+'ationData'],this),this['_rangeStar'+'t']=0x1d6b+0x2*-0x7b2+0xe07*-0x1,this['_rangeEnd']=-0x404+-0x150b+0x190f;}['destroy'](){this['_setMateri'+'al'](null),this['_model']&&(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),this['_model']['destroy'](),this['_model']=null),this['_fontAsset']['destroy'](),this['font']=null,this['_element']['off']('resize',this['_onParentR'+'esize'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['off'](Sa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['off']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['off']('data:remov'+'e',this['_onLocaliz'+'ationData'],this);}['_onParentR'+'esize'](_0x1020d7,_0x33a497){this['_noResize']||this['_font']&&this['_updateTex'+'t']();}['_onScreenC'+'hange'](_0x2dc1d7){_0x2dc1d7?this['_updateMat'+'erial'](_0x2dc1d7['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(0x582+0x12ff*0x2+0x1*-0x2b7f));}['_onScreenS'+'paceChange'](_0x4b5ffe){this['_updateMat'+'erial'](_0x4b5ffe);}['_onDrawOrd'+'erChange'](_0x5705c5){if(this['_drawOrder']=_0x5705c5,this['_model']){for(let _0x1f20b2=-0x3c*0x6+-0x182b+0x1993*0x1,_0x534148=this['_model']['meshInstan'+'ces']['length'];_0x1f20b2<_0x534148;_0x1f20b2++)this['_model']['meshInstan'+'ces'][_0x1f20b2]['drawOrder']=_0x5705c5;}}['_onPivotCh'+'ange'](_0x51ddf4){this['_font']&&this['_updateTex'+'t']();}['_onLocaleS'+'et'](_0x40f30c){if(this['_i18nKey']){if(this['fontAsset']){const _0x356919=this['_system']['app']['assets']['get'](this['fontAsset']);(!_0x356919||!_0x356919['resource']||_0x356919['resource']!==this['_font'])&&(this['font']=null);}this['_resetLoca'+'lizedText']();}}['_onLocaliz'+'ationData'](_0x27195c,_0x4d4819){this['_i18nKey']&&_0x4d4819[this['_i18nKey']]&&this['_resetLoca'+'lizedText']();}['_resetLoca'+'lizedText'](){this['_setText'](this['_system']['app']['i18n']['getText'](this['_i18nKey']));}['_setText'](_0xfa9c1c){if(this['unicodeCon'+'verter']){const _0x174d19=this['_system']['getUnicode'+'Converter']();_0x174d19?_0xfa9c1c=_0x174d19(_0xfa9c1c):console['warn']('Element\x20cr'+'eated\x20with'+'\x20unicodeCo'+'nverter\x20op'+'tion\x20but\x20n'+'o\x20unicodeC'+'onverter\x20f'+'unction\x20re'+'gistered');}this['_text']!==_0xfa9c1c&&(this['_font']&&this['_updateTex'+'t'](_0xfa9c1c),this['_text']=_0xfa9c1c);}['_updateTex'+'t'](_0x3bc567){let _0x4b0b96;if(_0x3bc567===void(0x7*-0x131+-0x1fdf+-0x141b*-0x2)&&(_0x3bc567=this['_text']),this['_symbols']=Tc['getSymbols'](_0x3bc567['normalize']?_0x3bc567['normalize']('NFC'):_0x3bc567),this['_symbols']['length']===0x13bd+0xf8*-0xd+-0x725&&(this['_symbols']=['\x20']),this['_enableMar'+'kup']){const _0x52c34c=kL['evaluate'](this['_symbols']);this['_symbols']=_0x52c34c['symbols'],_0x4b0b96=_0x52c34c['tags']||[];}if(this['_rtlReorde'+'r']){const _0x43bb3c=this['_system']['app']['systems']['element']['getRtlReor'+'der']();if(_0x43bb3c){const _0x3cdb60=_0x43bb3c(this['_symbols']);this['_rtl']=_0x3cdb60['rtl'],this['_symbols']=_0x3cdb60['mapping']['map'](function(_0x3bc4b3){return this['_symbols'][_0x3bc4b3];},this),_0x4b0b96&&(_0x4b0b96=_0x3cdb60['mapping']['map'](_0x4acf50=>_0x4b0b96[_0x4acf50]));}else console['warn']('Element\x20cr'+'eated\x20with'+'\x20rtlReorde'+'r\x20option\x20b'+'ut\x20no\x20rtlR'+'eorder\x20fun'+'ction\x20regi'+'stered');}else this['_rtl']=!(0xd10+0x17d8+0xc9*-0x2f);const _0x3177a9=(_0x3f9a1a,_0x4f9760)=>_0x3f9a1a['toString'](!(-0x865*0x3+0xfdd+-0x2*-0x4a9))['toLowerCas'+'e']()+':'+_0x4f9760['toFixed'](0x23c2+0x1*0x1f46+-0x4306),_0x4827c4=(_0x49fd0c,_0x33af23)=>_0x49fd0c['toString'](!(-0xb9*0xf+-0x25da+0x30b1))['toLowerCas'+'e']()+':'+_0x33af23['x']['toFixed'](-0xbeb*-0x2+0x1246+-0x2a1a)+':'+_0x33af23['y']['toFixed'](0x1f4c+-0xff2*0x1+-0xf58);if(_0x4b0b96){const _0x19d058={},_0x3eb869={},_0x319531={};this['_colorPale'+'tte']=[Math['round'](this['_color']['r']*(-0x2e3+-0x1*0x1327+0x1*0x1709)),Math['round'](this['_color']['g']*(0x615*-0x5+-0xb64+0x2c*0xf9)),Math['round'](this['_color']['b']*(0x21df*-0x1+-0x1cf*0x9+0x3325))],this['_outlinePa'+'lette']=[Math['round'](this['_outlineCo'+'lor']['r']*(0x2*-0x119+-0xcfb*0x3+0x2a22)),Math['round'](this['_outlineCo'+'lor']['g']*(0x65*-0x1+-0x7*-0x24a+-0xea2)),Math['round'](this['_outlineCo'+'lor']['b']*(0x15*-0x5e+0xb1e+0x269*-0x1)),Math['round'](this['_outlineCo'+'lor']['a']*(-0x1*-0x3ab+-0x106f+0xdc3)),Math['round'](this['_outlineTh'+'ickness']*(-0x1*0x92d+-0x218d*-0x1+-0x1761))],this['_shadowPal'+'ette']=[Math['round'](this['_shadowCol'+'or']['r']*(0x2643+0x582+0x19*-0x1b6)),Math['round'](this['_shadowCol'+'or']['g']*(0x3*-0x70e+0x1bec+-0x5c3)),Math['round'](this['_shadowCol'+'or']['b']*(0x93a+-0x75b*-0x3+-0x793*0x4)),Math['round'](this['_shadowCol'+'or']['a']*(0x143+0x113e+-0x1*0x1182)),Math['round'](this['_shadowOff'+'set']['x']*(-0x2ea*-0x8+-0x1*0x54a+-0x1187)),Math['round'](this['_shadowOff'+'set']['y']*(-0x1*0x39a+0x1*0x152a+0x101*-0x11))],this['_symbolCol'+'ors']=[],this['_symbolOut'+'lineParams']=[],this['_symbolSha'+'dowParams']=[],_0x19d058[this['_color']['toString'](!(0xe*-0x11+-0x1f54+0x2043))['toLowerCas'+'e']()]=0x5e*-0x5e+-0x2f7+-0x5f*-0x65,_0x3eb869[_0x3177a9(this['_outlineCo'+'lor'],this['_outlineTh'+'ickness'])]=-0x679+-0xb47*-0x1+-0x4ce,_0x319531[_0x4827c4(this['_shadowCol'+'or'],this['_shadowOff'+'set'])]=0x2d0+-0x6*-0x27e+-0xc*0x17b;for(let _0x494ca=0xc1*0x31+0x2a*0xbc+-0x43c9,_0x35571e=this['_symbols']['length'];_0x494ca<_0x35571e;++_0x494ca){const _0x410d1d=_0x4b0b96[_0x494ca];let _0x4914c7=0x61*-0x32+-0x1*-0x996+-0x2*-0x4ae;if(_0x410d1d&&_0x410d1d['color']&&_0x410d1d['color']['value']){const _0x38dcaa=_0x410d1d['color']['value'];if(_0x38dcaa['length']===0x1dfc+-0x2071+-0x9f*-0x4&&_0x38dcaa[-0x18e4+-0x2161+0x3a45]==='#'){const _0x137705=_0x38dcaa['substring'](0x897+-0x3*-0x184+0xd22*-0x1)['toLowerCas'+'e']();_0x19d058['hasOwnProp'+'erty'](_0x137705)?_0x4914c7=_0x19d058[_0x137705]:/^[0-9a-f]{6}$/['test'](_0x137705)&&(_0x4914c7=this['_colorPale'+'tte']['length']/(0x161f+-0x1*0x76+-0x146*0x11),_0x19d058[_0x137705]=_0x4914c7,this['_colorPale'+'tte']['push'](parseInt(_0x137705['substring'](0x1d3d+-0x7be*0x1+-0x1*0x157f,-0x1*-0x1b15+-0xb11*0x1+-0x1002),-0x30*0x3e+0x1e55+-0x12a5)),this['_colorPale'+'tte']['push'](parseInt(_0x137705['substring'](0x242a+0x18e0+-0x7e*0x7c,-0x3*-0x307+0xee5+-0x17f6),0x1*0x1bef+0x21ba+-0x3d99)),this['_colorPale'+'tte']['push'](parseInt(_0x137705['substring'](-0x1e98+0x830+0x166c,-0x1*0xc8f+-0x26*-0x55+-0x9),-0x500+0x25c2+-0x20b2)));}}this['_symbolCol'+'ors']['push'](_0x4914c7);let _0x14113b=-0x1*-0x222b+0x1036+-0x3261;if(_0x410d1d&&_0x410d1d['outline']&&(_0x410d1d['outline']['attributes']['color']||_0x410d1d['outline']['attributes']['thickness'])){let _0x44eccb=_0x410d1d['outline']['attributes']['color']?xg['fromString'](_0x410d1d['outline']['attributes']['color']):this['_outlineCo'+'lor'],_0x4dafca=Number(_0x410d1d['outline']['attributes']['thickness']);(Number['isNaN'](_0x44eccb['r'])||Number['isNaN'](_0x44eccb['g'])||Number['isNaN'](_0x44eccb['b'])||Number['isNaN'](_0x44eccb['a']))&&(_0x44eccb=this['_outlineCo'+'lor']),Number['isNaN'](_0x4dafca)&&(_0x4dafca=this['_outlineTh'+'ickness']);const _0x473747=_0x3177a9(_0x44eccb,_0x4dafca);_0x3eb869['hasOwnProp'+'erty'](_0x473747)?_0x14113b=_0x3eb869[_0x473747]:(_0x14113b=this['_outlinePa'+'lette']['length']/(0x70*-0x31+0xd*-0x31+0x17f2),_0x3eb869[_0x473747]=_0x14113b,this['_outlinePa'+'lette']['push'](Math['round'](_0x44eccb['r']*(-0x1*-0x1907+-0x1*-0x8e4+0x1076*-0x2)),Math['round'](_0x44eccb['g']*(0xefe+0x7c1*0x2+-0x1d81)),Math['round'](_0x44eccb['b']*(0x221b+-0x1d36*-0x1+0x1*-0x3e52)),Math['round'](_0x44eccb['a']*(-0x552*0x3+0x287+0x1*0xe6e)),Math['round'](_0x4dafca*(-0x14de*-0x1+0x1d58+-0x3137))));}this['_symbolOut'+'lineParams']['push'](_0x14113b);let _0x58f0ae=-0x531+-0x1302+0xf*0x19d;if(_0x410d1d&&_0x410d1d['shadow']&&(_0x410d1d['shadow']['attributes']['color']||_0x410d1d['shadow']['attributes']['offset']||_0x410d1d['shadow']['attributes']['offsetX']||_0x410d1d['shadow']['attributes']['offsetY'])){let _0xa09d3a=_0x410d1d['shadow']['attributes']['color']?xg['fromString'](_0x410d1d['shadow']['attributes']['color']):this['_shadowCol'+'or'];const _0x4c23c1=Number(_0x410d1d['shadow']['attributes']['offset']),_0x153cf4=Number(_0x410d1d['shadow']['attributes']['offsetX']),_0x238eb1=Number(_0x410d1d['shadow']['attributes']['offsetY']);(Number['isNaN'](_0xa09d3a['r'])||Number['isNaN'](_0xa09d3a['g'])||Number['isNaN'](_0xa09d3a['b'])||Number['isNaN'](_0xa09d3a['a']))&&(_0xa09d3a=this['_shadowCol'+'or']);const _0x2b287f=$L['set'](Number['isNaN'](_0x153cf4)?Number['isNaN'](_0x4c23c1)?this['_shadowOff'+'set']['x']:_0x4c23c1:_0x153cf4,Number['isNaN'](_0x238eb1)?Number['isNaN'](_0x4c23c1)?this['_shadowOff'+'set']['y']:_0x4c23c1:_0x238eb1),_0x3eaa21=_0x4827c4(_0xa09d3a,_0x2b287f);_0x319531['hasOwnProp'+'erty'](_0x3eaa21)?_0x58f0ae=_0x319531[_0x3eaa21]:(_0x58f0ae=this['_shadowPal'+'ette']['length']/(0x5*-0x5d+0x2430+-0x2259),_0x319531[_0x3eaa21]=_0x58f0ae,this['_shadowPal'+'ette']['push'](Math['round'](_0xa09d3a['r']*(0x1f3+-0x1db8*-0x1+-0x1eac)),Math['round'](_0xa09d3a['g']*(0x14bd+0xb1+0x146f*-0x1)),Math['round'](_0xa09d3a['b']*(-0x3*-0xbde+0x9f*0x3+-0x1*0x2478)),Math['round'](_0xa09d3a['a']*(-0x64*0x5a+-0x358+-0x277f*-0x1)),Math['round'](_0x2b287f['x']*(0x421+0xf9*-0x16+0x11c4)),Math['round'](_0x2b287f['y']*(0x23ac+0x1213*-0x1+-0x111a))));}this['_symbolSha'+'dowParams']['push'](_0x58f0ae);}}else this['_colorPale'+'tte']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null;this['_updateMat'+'erialEmiss'+'ive'](),this['_updateMat'+'erialOutli'+'ne'](),this['_updateMat'+'erialShado'+'w']();const _0x5acd0a=this['_calculate'+'CharsPerTe'+'xture']();let _0x49cc6f=!(-0x1d2e+-0x12e7+-0x3016*-0x1);const _0x4941c5=this['_element'],_0x588478=_0x4941c5['_isScreenS'+'pace'](),_0xd866ac=_0x4941c5['_isScreenC'+'ulled'](),_0x44c93e=function(_0x41ed6f){return _0x4941c5['isVisibleF'+'orCamera'](_0x41ed6f);};for(let _0x262dae=0x1*-0x2311+-0xd*-0x39+0x1d*0x11c,_0x161975=this['_meshInfo']['length'];_0x262dae<_0x161975;_0x262dae++){const _0x4aef4e=_0x5acd0a[_0x262dae]||-0x10*0xb2+-0x2b9*0xb+0x2913,_0x454a00=this['_meshInfo'][_0x262dae];if(_0x454a00['count']!==_0x4aef4e){if(_0x49cc6f||(_0x4941c5['removeMode'+'lFromLayer'+'s'](this['_model']),_0x49cc6f=!(-0x10b+0x169d+-0x1592)),_0x454a00['count']=_0x4aef4e,_0x454a00['positions']['length']=_0x454a00['normals']['length']=_0x4aef4e*(0x26df+-0x206*-0x9+-0x1e*0x1e7)*(-0x1*-0x18e0+0xb79*-0x3+0x98f*0x1),_0x454a00['indices']['length']=_0x4aef4e*(-0x1*-0x963+-0xb*-0x2ba+-0x275e)*(0x760+-0x18fd+0x119f),_0x454a00['uvs']['length']=_0x4aef4e*(-0x707+-0x5f1*0x2+0x12eb)*(-0x2468+-0x4*-0x22d+0x1bb8),_0x454a00['colors']['length']=_0x4aef4e*(-0x24bc+0x2*-0x303+0x2ac6)*(0x24ef+-0x1610+0x1*-0xedb),_0x454a00['outlines']['length']=_0x4aef4e*(-0x254d+0x16cc+0x15*0xb1)*(-0xb*-0x22a+-0x5b+0x4b*-0x50),_0x454a00['shadows']['length']=_0x4aef4e*(-0x1e1f+-0xeb8*-0x1+0x1*0xf6b)*(-0x21db+0x884+0x195a),_0x454a00['meshInstan'+'ce']&&this['_removeMes'+'hInstance'](_0x454a00['meshInstan'+'ce']),_0x4aef4e===0x619*-0x1+0x1*0x22f7+-0x1cde){_0x454a00['meshInstan'+'ce']=null;continue;}for(let _0x1f2565=-0x18f4+-0x1*-0x196+0x175e;_0x1f2565<_0x4aef4e;_0x1f2565++)_0x454a00['indices'][_0x1f2565*(0x72c+0x19eb+-0x2114)*(0xb7d+-0x4*-0x737+0x2857*-0x1)+(0x1e11*0x1+0x1*0xaf3+-0x2bc*0xf)]=_0x1f2565*(0x29*-0x22+0x1*-0xcb0+0x1226),_0x454a00['indices'][_0x1f2565*(0x24d3+0x1a41+-0x3f11)*(-0x1*0x602+-0x1b52+0x1*0x2156)+(0x1612+0x2*-0x1192+0xd13*0x1)]=_0x1f2565*(-0xf01+-0x38f*0x8+0x2b7d)+(0x6cc+-0x3*0x269+0x70),_0x454a00['indices'][_0x1f2565*(-0x1e0a+0x242e+-0x621)*(-0xb11*0x1+-0x33*-0x1d+0x2*0x2a6)+(-0x1c2c+-0xe*0x11b+0x2ba8)]=_0x1f2565*(-0x1b35+-0x1*-0x2229+0x18*-0x4a)+(-0x9cc+-0x8b*-0x19+-0x3c4),_0x454a00['indices'][_0x1f2565*(-0x3a*0x52+-0x1879+0x2b10)*(-0x953+-0x162+0xab7)+(0x1fa3+-0x20*-0x3d+-0x2740)]=_0x1f2565*(0x1dd2+-0xb5*-0x26+-0x38ac)+(-0x25b9+0x3*-0x6e6+0x3a6d),_0x454a00['indices'][_0x1f2565*(0x22c*0xd+-0x162+-0x1ad7*0x1)*(-0x182c+-0x2427+0x1*0x3c55)+(0x1*0x7a+0x1e51+-0x1ec7)]=_0x1f2565*(-0xfd3+0xb0+-0x3*-0x50d)+(0xe44+0x1*0x15bf+-0x2400),_0x454a00['indices'][_0x1f2565*(0x2a2*0x2+-0x1988+0x1447)*(0x4*-0x51+0x5ba+0x1*-0x474)+(0x258e+0x6*0x279+-0x345f)]=_0x1f2565*(-0x2179+-0x1*0x1367+0x34e4)+(-0x1555+-0x5*-0x5c8+-0x792),_0x454a00['normals'][_0x1f2565*(-0x2*-0x1319+0x2164+-0x4792)*(-0x1*-0x20e+-0x1*-0x109d+0x18*-0xc7)+(-0x2c*0xd4+0x45f+0x2011*0x1)]=0x25a*0x3+-0x62*-0x5+0x2*-0x47c,_0x454a00['normals'][_0x1f2565*(0xaf3+0x1*0x1c41+0x39*-0xb0)*(0x487+-0x622+0x17*0x12)+(0x206a+0x3*-0x6bd+-0x619*0x2)]=-0x1eac+0x1cb9+0x1*0x1f3,_0x454a00['normals'][_0x1f2565*(-0xa46+-0x2106+-0x30*-0xe7)*(-0xce9*0x3+-0x1f76*-0x1+0x748)+(0x18a0+0xb9e*-0x3+-0x5*-0x20c)]=-(-0x1*0x5da+-0x58d*-0x7+-0x42*0x80),_0x454a00['normals'][_0x1f2565*(-0x1ef0+-0x6*-0x427+0x60a)*(-0x2*-0xe2f+-0xd0a*-0x1+0x1*-0x2965)+(-0xe92+-0x1*0x235a+0x31ef)]=0x1c6e+0xd*0xb+-0x1cfd,_0x454a00['normals'][_0x1f2565*(0x2211+-0xadb+-0x1732)*(0x1a9f+0xc4a+-0x26e6)+(-0x1fef+-0x811+0x1a*0x18a)]=-0x1cdc+-0x1*-0x71f+0x15bd,_0x454a00['normals'][_0x1f2565*(0x1709+-0x235*-0xc+-0x3181)*(-0x15c5+0x21a6+0x1*-0xbde)+(-0x6*-0x446+-0x1*0x2501+-0x3e*-0x2f)]=-(0x7*0x36a+-0x177b+-0x2*0x35),_0x454a00['normals'][_0x1f2565*(-0x236*0x2+0x33*-0x7e+0x1*0x1d8a)*(-0x1aa0+0x1*-0x121f+0x1*0x2cc2)+(0xb52+0x25d1+0x105f*-0x3)]=0x9f*-0x7+-0x21c1+0x261a,_0x454a00['normals'][_0x1f2565*(0x33f+0x1513+-0x40d*0x6)*(0x3d+0x1973*-0x1+0x1939)+(0x50b*0x3+0xc8f*0x2+-0x141c*0x2)]=0xad*-0x29+-0x14f8+0x30ad,_0x454a00['normals'][_0x1f2565*(-0x1c8+-0x1394+0x720*0x3)*(0x63+-0x84c*0x3+0x1884)+(0xf*-0x1e7+-0x736+0x23c7)]=-(0x7b*0x29+0x3*0x153+-0x17ab),_0x454a00['normals'][_0x1f2565*(0xea7*-0x2+-0x24f2*-0x1+-0x7a0)*(0xc7f*0x1+0x31*-0x45+0xb9)+(0x293+-0x22*-0x76+-0x1236)]=-0x48*0x66+0xa08+0x18*0xc7,_0x454a00['normals'][_0x1f2565*(-0x19b*-0x16+0x1*0x387+-0x26d5)*(-0x1f3a+-0x2539+-0x4476*-0x1)+(-0x231b+0xd*0x257+0x4ba)]=-0x167c*-0x1+0x6e*-0x19+-0x2*0x5df,_0x454a00['normals'][_0x1f2565*(0x8bd*0x2+0xa32+-0x1ba8)*(0x1b82+0xe*-0xe8+0xdf*-0x11)+(0x1*-0x13e1+-0x24d1+0x7*0x81b)]=-(-0xb19*0x3+-0x2453+0x1c9*0x27);const _0x4df095=BL(this['_system']['app']['graphicsDe'+'vice'],_0x454a00),_0x211873=new He(_0x4df095,this['_material'],this['_node']);if(_0x211873['name']='Text\x20Eleme'+'nt:\x20'+this['_entity']['name'],_0x211873['castShadow']=!(0x1a9d*-0x1+0x1400+0x69e),_0x211873['receiveSha'+'dow']=!(0xc85+-0xbc5+-0xbf),_0x211873['cull']=!_0x588478,_0x211873['screenSpac'+'e']=_0x588478,_0x211873['drawOrder']=this['_drawOrder'],_0xd866ac&&(_0x211873['cull']=!(-0x1d80+0x4*0x35+0x1cac),_0x211873['isVisibleF'+'unc']=_0x44c93e),this['_setTextur'+'eParams'](_0x211873,this['_font']['textures'][_0x262dae]),_0x211873['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']),_0x211873['setParamet'+'er']('material_o'+'pacity',this['_color']['a']),_0x211873['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x211873['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x211873['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x262dae]['width']),_0x211873['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']),_0x211873['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']),_0x211873['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']),this['_symbolSha'+'dowParams'])this['_shadowOff'+'setUniform'][-0x2191+0x16d9*0x1+0x157*0x8]=-0x118c*-0x2+-0x51*0xf+-0x1e59,this['_shadowOff'+'setUniform'][-0x1798+-0xc2*0xe+-0x1a1*-0x15]=-0x22*-0x1f+-0x2363+-0x641*-0x5;else{const _0x5ed21a=-this['_font']['data']['info']['maps'][_0x262dae]['width']/this['_font']['data']['info']['maps'][_0x262dae]['height'];this['_shadowOff'+'setUniform'][-0x18bf+-0xb17*-0x3+-0x2*0x443]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][0x14*0x10f+-0x135b+0x74*-0x4]=_0x5ed21a*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'];}_0x211873['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']),_0x454a00['meshInstan'+'ce']=_0x211873,this['_model']['meshInstan'+'ces']['push'](_0x211873);}}this['_element']['maskedBy']&&this['_element']['_setMasked'+'By'](this['_element']['maskedBy']),_0x49cc6f&&this['_element']['enabled']&&this['_entity']['enabled']&&this['_element']['addModelTo'+'Layers'](this['_model']),this['_updateMes'+'hes'](),this['_rangeStar'+'t']=-0x1819+0x17d5+0x2*0x22,this['_rangeEnd']=this['_symbols']['length'],this['_updateRen'+'derRange']();}['_removeMes'+'hInstance'](_0xe14f2){_0xe14f2['destroy']();const _0x419dc5=this['_model']['meshInstan'+'ces']['indexOf'](_0xe14f2);_0x419dc5!==-(0xd6*0x19+-0x1b25+-0x640*-0x1)&&this['_model']['meshInstan'+'ces']['splice'](_0x419dc5,0x347+-0xd*0x2b7+0x2005);}['_setMateri'+'al'](_0x3658f2){if(this['_material']=_0x3658f2,this['_model'])for(let _0x56ec8b=-0x1e71*0x1+-0x10*0x154+-0x21*-0x191,_0x292c73=this['_model']['meshInstan'+'ces']['length'];_0x56ec8b<_0x292c73;_0x56ec8b++){const _0xa7007c=this['_model']['meshInstan'+'ces'][_0x56ec8b];_0xa7007c['material']=_0x3658f2;}}['_updateMat'+'erial'](_0x1994a8){const _0x19d3be=this['_element'],_0xf6ce3a=_0x19d3be['_isScreenC'+'ulled'](),_0x5210c0=function(_0x15cbf1){return _0x19d3be['isVisibleF'+'orCamera'](_0x15cbf1);},_0x48be4a=this['_font']&&this['_font']['type']===dh;if(this['_material']=this['_system']['getTextEle'+'mentMateri'+'al'](_0x1994a8,_0x48be4a,this['_enableMar'+'kup']),this['_model'])for(let _0x56289c=-0x279+0x1e3b+-0x1*0x1bc2,_0x3fe378=this['_model']['meshInstan'+'ces']['length'];_0x56289c<_0x3fe378;_0x56289c++){const _0x4b0fac=this['_model']['meshInstan'+'ces'][_0x56289c];_0x4b0fac['cull']=!_0x1994a8,_0x4b0fac['material']=this['_material'],_0x4b0fac['screenSpac'+'e']=_0x1994a8,_0xf6ce3a?(_0x4b0fac['cull']=!(0x1*-0x1ec1+0x82c+0x1695*0x1),_0x4b0fac['isVisibleF'+'unc']=_0x5210c0):_0x4b0fac['isVisibleF'+'unc']=null;}}['_updateMat'+'erialEmiss'+'ive'](){this['_symbolCol'+'ors']?(this['_colorUnif'+'orm'][0x81b*-0x2+0x2*-0x808+0x2046]=-0x1c2d*0x1+-0x160a+0x3238,this['_colorUnif'+'orm'][0x23*0x9f+0x1*0x1619+0x2bd5*-0x1]=-0xe20+-0xcca*0x1+0x1aeb,this['_colorUnif'+'orm'][-0x215f+-0x43f*-0x9+-0x4d6]=0x63*-0x36+0xff8+0x4eb*0x1):(We['linear'](this['_color']),this['_colorUnif'+'orm'][-0x37e+0x29*-0x10+-0x5*-0x136]=We['r'],this['_colorUnif'+'orm'][0x261e*-0x1+0x18b*-0x7+0x30ec]=We['g'],this['_colorUnif'+'orm'][0xa*0x31f+-0x1*0x25c3+0x68f]=We['b']);}['_updateMat'+'erialOutli'+'ne'](){this['_symbolOut'+'lineParams']?(this['_outlineCo'+'lorUniform'][-0x21c7*0x1+-0x14be+-0x335*-0x11]=-0x2b*0x83+-0x6*-0x45e+-0x433,this['_outlineCo'+'lorUniform'][0x2207*-0x1+0x1*-0x5d1+0x27d9]=-0x1581+-0x1f12+0x3493,this['_outlineCo'+'lorUniform'][0x53c+-0x168e+0x1154]=-0x999+0x5*-0x126+0xf57,this['_outlineCo'+'lorUniform'][0x12d9+0x2176*0x1+-0x344c]=0x1e7c+-0x1c1b+0x260*-0x1):(We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][0x6*-0x4f0+0x1*-0x195d+-0x36fd*-0x1]=We['r'],this['_outlineCo'+'lorUniform'][-0x2f*0x3+-0xa*-0x1fb+-0x1340]=We['g'],this['_outlineCo'+'lorUniform'][0x2479*0x1+-0xff7+-0x8*0x290]=We['b'],this['_outlineCo'+'lorUniform'][0x19b*0x3+-0x3*0x831+0x13c5]=We['a']);}['_updateMat'+'erialShado'+'w'](){this['_symbolOut'+'lineParams']?(this['_shadowCol'+'orUniform'][0x191b+0x474+-0x1d8f]=0x626*0x2+-0x1e6d+0x1221,this['_shadowCol'+'orUniform'][-0x4e1*0x5+0x3*-0x920+0x33c6]=-0x1*-0x1726+0x605+0x189*-0x13,this['_shadowCol'+'orUniform'][0xe86+-0x792*-0x1+-0x1616]=-0x1cf9+-0x5*0x127+0x22bc,this['_shadowCol'+'orUniform'][-0x3*-0xc2f+-0x18c1+-0xbc9]=-0x2c*0x29+-0x3d*0x3b+0x151b):(We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][0x268f*-0x1+0x1d40+0x94f*0x1]=We['r'],this['_shadowCol'+'orUniform'][0xad3+0x2ac+0xb*-0x13a]=We['g'],this['_shadowCol'+'orUniform'][-0x49*-0x39+-0x2274+0x1235]=We['b'],this['_shadowCol'+'orUniform'][0x1baf+-0x869+-0x1343]=We['a']);}['_isWordBou'+'ndary'](_0x48a959){return yg['test'](_0x48a959);}['_isValidNe'+'xtChar'](_0x2a59bb){return _0x2a59bb!==null&&!GL['test'](_0x2a59bb);}['_isNextCJK'+'Boundary'](_0x550265,_0x2d5d2){return vg['test'](_0x550265)&&(yg['test'](_0x2d5d2)||VL['test'](_0x2d5d2));}['_isNextCJK'+'WholeWord'](_0x4d7146){return vg['test'](_0x4d7146);}['_updateMes'+'hes'](){const _0x3368f6=this['_font']['data'],_0x34c987=this,_0x2a5978=Math['min'](this['_minFontSi'+'ze'],this['_maxFontSi'+'ze']),_0x3f9126=this['_maxFontSi'+'ze'],_0x47aaa9=this['_shouldAut'+'oFit']();_0x47aaa9&&(this['_fontSize']=this['_maxFontSi'+'ze']);const _0x2b6385=0x30d+0xf4a+-0x1237,_0x5b046e=this['_symbols']['length'];let _0x2a6a38=-0x202*-0x12+-0x2*-0x32+0x8*-0x491,_0x9fa379=-0x21b+0x2b4*0x5+-0xb69,_0x514a8b=-0x1*-0x1e1+0x187*-0x1+0xf*-0x6,_0x5382fa=-0x4be*0x5+0x8c6+0xef0,_0x60890=-0x1*-0x23bf+-0xbad+-0x1811,_0x199e1c=0x7ff+0xb1+-0x8b0,_0x42cc47=0x8a1*0x1+-0x10ba+0x819,_0x318a4f=-0x22ea+0x2013+0x2d7,_0x446479=-0xc13*-0x1+0x62*-0x39+0x9bf,_0x2b5af2=0x1f35+0x1*-0x1527+-0xd*0xc6,_0x4cd4a1=-0x2018+-0x18c1+0x38d9;const _0x10cbbe=Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])>=0x4*0x234+0xe1c+-0x16ec+0.0001;let _0x36ce69=this['_element']['calculated'+'Width'];(this['autoWidth']&&!_0x10cbbe||!this['_wrapLines'])&&(_0x36ce69=Number['POSITIVE_I'+'NFINITY']);let _0x5a3f1b=-0x1709+-0xe4*-0x16+0x1*0x371,_0x35ecef=0x1e83+0x1c06+-0x3a89,_0x41dd5d,_0x139c04,_0x259c2c,_0x34ff2b;function _0x3d2a72(_0x431ad8,_0x4bfe93,_0x2123b5){_0x34c987['_lineWidth'+'s']['push'](Math['abs'](_0x2123b5));const _0xd79b0f=_0x318a4f>_0x4bfe93?_0x4bfe93+(0x172f+0x1b*-0xab+-0x525):_0x318a4f,_0x43f119=_0x318a4f>_0x4bfe93?_0x318a4f+(0x21f5+-0x1a*0x9c+-0x487*0x4):_0x4bfe93,_0x3fbfe0=_0x431ad8['slice'](_0xd79b0f,_0x43f119);if(_0x4cd4a1){let _0x4d7221=_0x3fbfe0['length'];for(;_0x4d7221--&&_0x4cd4a1>-0xd59+0x2293*-0x1+0x17f6*0x2;)Sg['test'](_0x3fbfe0[_0x4d7221])&&(_0x3fbfe0['splice'](_0x4d7221,0x17a6+0x2*0x1246+0x13*-0x32b),_0x4cd4a1--);}_0x34c987['_lineConte'+'nts']['push'](_0x3fbfe0['join']('')),_0x2a6a38=-0x9b9*0x1+-0x17*-0xcf+-0x8e0,_0x9fa379-=_0x34c987['_scaledLin'+'eHeight'],_0x60890++,_0x446479=0x211*0xf+-0x22e9+0x6*0xa7,_0x2b5af2=0x917+0x671+-0xf88,_0x4cd4a1=0x1b84+0xa63*-0x1+-0x1121,_0x199e1c=-0x1e0e+-0xec+0x3d*0x82,_0x318a4f=_0x4bfe93;}let _0x1f23a3=!(0x1dc2+0x1*-0x540+-0x1882);for(;_0x1f23a3;){_0x1f23a3=!(-0x1c0d+-0xeed*0x1+0x2afb),_0x47aaa9?this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t']*this['_fontSize']/(this['_maxFontSi'+'ze']||-0x1*-0x25d7+0x1*-0x8f9+-0x1cde+0.0001):this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t'],this['width']=-0x81*-0x2f+0x1a3*-0x7+-0x5*0x272,this['height']=-0xe*-0x71+-0x2456*-0x1+0x6*-0x716,this['_lineWidth'+'s']=[],this['_lineConte'+'nts']=[],_0x2a6a38=0x116e*0x1+0x208c+-0x31fa,_0x9fa379=-0x47a*-0x1+-0x1c61+-0x17e7*-0x1,_0x514a8b=0x66e*-0x6+0xabf+-0x947*-0x3,_0x5382fa=-0x6c*-0x10+-0x6c*-0x33+-0x1c44,_0x60890=-0x2f*-0xb7+-0x2c7+-0x1ed1*0x1,_0x199e1c=-0x1*-0x1121+0xd94+-0x1eb5,_0x42cc47=0x6e5*-0x1+0x262c+-0x1f47,_0x318a4f=0xc15+-0x55*-0x33+-0xc*0x26b,_0x446479=0x128*-0x17+-0xfed+0x2a85,_0x2b5af2=-0x1f46+-0xa9+0x1fef,_0x4cd4a1=-0x479*0x5+0x243d+-0x2*0x6f0;const _0x293c7c=this['_fontSize']/_0x2b6385;_0x5a3f1b=this['_fontMinY']*_0x293c7c,_0x35ecef=this['_fontMaxY']*_0x293c7c;for(let _0x40a189=0xc7c+0x167f+-0x22fb;_0x40a189<this['_meshInfo']['length'];_0x40a189++)this['_meshInfo'][_0x40a189]['quad']=-0x41*0x5b+-0x4d*0x25+0x223c,this['_meshInfo'][_0x40a189]['lines']={};let _0x5551a1=-0xf83*0x2+-0x1681+0xe*0x3e5,_0x513737=0x563*0x1+-0x1*0x2bb+0x1a9*-0x1,_0x5d6b14=0xc3*0xb+-0x1*0x11d1+0x1*0xa6f,_0x40c364=-0x1*0x169f+0x1*0x263b+0x3*-0x4df+(0x1c*-0x8f+0x26c7+0x1a*-0xda)*(-0xa*-0x107+-0x881*-0x1+-0x11c7),_0x153168=0x24ec+0x16cd+-0x3aba*0x1+(-0x39*0xab+0xea5*0x2+-0x8*-0x139)*(-0x65*0xf+-0x233*-0x5+-0x414),_0x308a5f=0x14df+0x21bf*-0x1+0x4*0x338,_0x41e947=0x4a1+0x9*0x3f8+-0x275a+(0x167*0xe+0x1cfd+-0x20*0x17d)*(-0x1*0xa3a+0x1b53+-0x1019),_0x4a7b2c=-0x1*0xa16+0xc86*0x1+-0x29*0x9+(-0x5*0x283+0x24cf+-0x1741)*(0x6b5+0x1*-0x1fd+-0x44*0xe),_0x54cfd7=0x1ba+-0x14bc+0x1*0x1381+(-0x71+-0x1158+-0xea*-0x14)*(-0x216e+0xb6f+0x16ff);for(let _0x575c99=0x163c+-0x7cd+-0x1*0xe6f;_0x575c99<_0x5b046e;_0x575c99++){if(_0x41dd5d=this['_symbols'][_0x575c99],_0x34ff2b=_0x575c99+(0x1c55*0x1+0x1151*-0x2+0x327*0x2)>=_0x5b046e?null:this['_symbols'][_0x575c99+(0x18b9*0x1+-0x4bc+-0x4ff*0x4)],Sg['test'](_0x41dd5d)){_0x4cd4a1++,(!this['_wrapLines']||this['_maxLines']<-0x1*0x1f4e+0x585*0x1+0x19c9||_0x60890<this['_maxLines'])&&(_0x3d2a72(this['_symbols'],_0x575c99,_0x5382fa),_0x42cc47=_0x575c99+(-0x1031+-0x1b7*-0x9+-0xd*-0xf),_0x318a4f=_0x575c99+(-0x4*0x819+-0x1*-0x964+0x1701));continue;}let _0x277887=-0xa*-0x37f+0x2143+-0x4439,_0x4a84eb=0x2a7*-0x9+0x12c5+0x51a*0x1,_0x118f85=-0x1c6+-0x2*0xa3f+-0x96*-0x26,_0x13d50f=-0x2482*0x1+-0x153a+0x39bd*0x1,_0xa1448a,_0x261a22;if(_0x139c04=_0x3368f6['chars'][_0x41dd5d],!_0x139c04){if(HL['indexOf'](_0x41dd5d)!==-(-0xea3*0x2+-0x3*0x359+0x2752))_0x139c04=WL;else{if(_0x3368f6['chars']['\x20'])_0x139c04=_0x3368f6['chars']['\x20'];else for(const _0x4ad63b in _0x3368f6['chars']){_0x139c04=_0x3368f6['chars'][_0x4ad63b];break;}_0x3368f6['missingCha'+'rs']||(_0x3368f6['missingCha'+'rs']=new Set()),_0x3368f6['missingCha'+'rs']['has'](_0x41dd5d)||(console['warn']('Character\x20'+'\x27'+_0x41dd5d+('\x27\x20is\x20missi'+'ng\x20from\x20th'+'e\x20font\x20')+_0x3368f6['info']['face']),_0x3368f6['missingCha'+'rs']['add'](_0x41dd5d));}}if(_0x139c04){let _0x5c096e=-0x49*-0x43+-0x176f+0x115*0x4;if(_0x2b5af2>0x1f6c*0x1+-0xb23*-0x3+-0x40d5){const _0x25c6d0=this['_font']['data']['kerning'];if(_0x25c6d0){const _0xdfead0=_0x25c6d0[Tc['getCodePoi'+'nt'](this['_symbols'][_0x575c99-(0x1045+-0x13*-0xb2+-0x1d7a)])||-0x1fe2+-0xe24+0x2b*0x112];_0xdfead0&&(_0x5c096e=_0xdfead0[Tc['getCodePoi'+'nt'](this['_symbols'][_0x575c99])||0x10f7+-0x23c0+0x12c9*0x1]||0x16f9*0x1+0x5*-0x216+0x13*-0xa9);}}_0xa1448a=_0x139c04['scale']||0x1319*-0x1+0x14e9+0x1cf*-0x1,_0x261a22=(_0x139c04['width']+_0x139c04['height'])/(0x7*0x272+0x403*-0x6+0x6f6),_0x13d50f=_0x293c7c*_0x261a22/_0xa1448a,_0x118f85=(_0x139c04['xadvance']+_0x5c096e)*_0x293c7c,_0x277887=(_0x139c04['xoffset']-_0x5c096e)*_0x293c7c,_0x4a84eb=_0x139c04['yoffset']*_0x293c7c;}else console['error']('Couldn\x27t\x20s'+'ubstitute\x20'+'missing\x20ch'+'aracter:\x20\x27'+_0x41dd5d+'\x27');const _0x43383e=zL['test'](_0x41dd5d),_0x42531e=_0x139c04&&_0x139c04['map']||-0xc46+-0xd*0x1bb+0x2b*0xcf,_0x3e1471=-this['_font']['data']['info']['maps'][_0x42531e]['width']/this['_font']['data']['info']['maps'][_0x42531e]['height'],_0x1fa730=this['_meshInfo'][_0x42531e],_0x3ec544=_0x2a6a38+this['_spacing']*_0x118f85;if(_0x3ec544>_0x36ce69&&_0x2b5af2>-0xc8a+0x5*0x577+0xec9*-0x1&&!_0x43383e&&(this['_maxLines']<-0x24ac+0x1565+-0x1*-0xf47||_0x60890<this['_maxLines'])){if(_0x446479===-0x1ea8+0x200e*-0x1+-0x2e*-0x15d)_0x42cc47=_0x575c99,_0x3d2a72(this['_symbols'],_0x575c99,_0x5382fa);else{const _0x5947d7=Math['max'](_0x575c99-_0x42cc47,-0x7b0+-0x60e*0x4+0x7fa*0x4);if(this['_meshInfo']['length']<=0xa93+0x2f3*-0x7+0xa13)_0x1fa730['lines'][_0x60890-(0x1cbe+0x11*-0x15d+-0x590*0x1)]-=_0x5947d7,_0x1fa730['quad']-=_0x5947d7;else{const _0xf073d1=_0x42cc47,_0x500e66=_0x575c99;for(let _0x1de839=_0xf073d1;_0x1de839<_0x500e66;_0x1de839++){const _0x436f18=this['_symbols'][_0x1de839],_0x2b595c=_0x3368f6['chars'][_0x436f18],_0x38a9a2=this['_meshInfo'][_0x2b595c&&_0x2b595c['map']||-0xd6+-0x1*0x1865+0x193b];_0x38a9a2['lines'][_0x60890-(0x460*0x1+0x2670+-0x2acf)]-=0x1026+-0x6a*-0x3e+-0x29d1,_0x38a9a2['quad']-=0x215e*0x1+0x7c5+-0x2922;}}_0x575c99-=_0x5947d7+(0x3*-0x8dd+0x2*-0x2ce+0x2034),_0x3d2a72(this['_symbols'],_0x42cc47,_0x199e1c);continue;}}_0x259c2c=_0x1fa730['quad'],_0x1fa730['lines'][_0x60890-(-0x1*-0x94e+-0x1*-0xb5c+0x29*-0x81)]=_0x259c2c;let _0x4aac48=_0x2a6a38-_0x277887,_0x1a1cce=_0x4aac48+_0x13d50f;const _0x52d4ac=_0x9fa379-_0x4a84eb,_0x3da1e2=_0x52d4ac+_0x13d50f;if(this['_rtl']){const _0x79ef39=_0x13d50f-_0x277887-this['_spacing']*_0x118f85-_0x277887;_0x4aac48-=_0x79ef39,_0x1a1cce-=_0x79ef39;}_0x1fa730['positions'][_0x259c2c*(0x21*0x17+0x8*0x1f7+-0x12ab)*(-0x4*-0x13d+-0x21*-0x2c+0xd1*-0xd)+(-0xf*-0xe2+0x3*0x73d+0x1*-0x22f5)]=_0x4aac48,_0x1fa730['positions'][_0x259c2c*(0x1ebe+0x25c6+-0x2240*0x2)*(0x4c8+0xc7c*-0x1+-0x19*-0x4f)+(-0x2c7+0x2222*0x1+-0x1*0x1f5a)]=_0x52d4ac,_0x1fa730['positions'][_0x259c2c*(-0x3*0x347+0x54b*0x6+-0x47*0x4f)*(0x20ee+0x18bc+-0x1*0x39a7)+(0x2*-0x113+0x1ca2+-0x1a7a*0x1)]=_0x514a8b,_0x1fa730['positions'][_0x259c2c*(-0x1*-0x1d9f+-0x2*-0x10db+-0x1*0x3f51)*(-0x1c20+0x1304*-0x2+0x422b)+(0x2f*0xc7+0x5*0x6c1+-0x464b)]=_0x1a1cce,_0x1fa730['positions'][_0x259c2c*(0x3d7+-0xcb5+-0x6*-0x17b)*(0x235e+0x827*-0x1+-0x1b34)+(-0x744+-0x4bb+0x267*0x5)]=_0x52d4ac,_0x1fa730['positions'][_0x259c2c*(0x1a8b+-0x19a6*0x1+-0x19*0x9)*(0x1aad*-0x1+-0x2f*-0x7+0x1967)+(0x43f*-0x1+0x7b8+0xdd*-0x4)]=_0x514a8b,_0x1fa730['positions'][_0x259c2c*(0x2*0x3ee+-0x91b*0x2+0xa5e)*(0x1d2+0x1efc*0x1+-0x49*0x73)+(0x2*-0x451+0x16ee+0x3a*-0x3f)]=_0x1a1cce,_0x1fa730['positions'][_0x259c2c*(-0x14e9+-0x41*0x1e+-0x1c8b*-0x1)*(0x1422+0x1f27+-0x2*0x19a3)+(-0x8*0x31+-0x1e42+-0x1fd1*-0x1)]=_0x3da1e2,_0x1fa730['positions'][_0x259c2c*(-0x7*0x4eb+0x16f7+0xb7a)*(0x1*-0x215d+0x1*-0x1f05+0x4065)+(-0x2335+0x35*-0x8e+0x40a3)]=_0x514a8b,_0x1fa730['positions'][_0x259c2c*(0x2f0+0x17*0x125+-0x1d3f*0x1)*(0x742+-0x597+-0x1a8)+(-0x1245+0x513*-0x1+-0x4ad*-0x5)]=_0x4aac48,_0x1fa730['positions'][_0x259c2c*(-0x4ae*0x2+-0x7*-0x175+0xd3*-0x1)*(0xb26*0x1+0x682+0x11a5*-0x1)+(-0x27e+0x1b07*-0x1+0x1d8f)]=_0x3da1e2,_0x1fa730['positions'][_0x259c2c*(-0x38d*0x6+0xe72+0x6e0)*(-0x44a+-0x1d7c+0x21c9)+(-0x2*0xae7+0x1354+0x2b*0xf)]=_0x514a8b,this['width']=Math['max'](this['width'],_0x3ec544);let _0x1d9df7;if(this['_shouldAut'+'oFitWidth']()&&this['width']>this['_element']['calculated'+'Width']&&(_0x1d9df7=Math['floor'](this['_element']['fontSize']*this['_element']['calculated'+'Width']/(this['width']||-0x1e8*-0xd+-0x25e6+-0x2e*-0x49+0.0001)),_0x1d9df7=Y['clamp'](_0x1d9df7,_0x2a5978,_0x3f9126),_0x1d9df7!==this['_element']['fontSize'])){this['_fontSize']=_0x1d9df7,_0x1f23a3=!(0x2702*-0x1+-0x1087+0x3789);break;}if(this['height']=Math['max'](this['height'],_0x35ecef-(_0x9fa379+_0x5a3f1b)),this['_shouldAut'+'oFitHeight']()&&this['height']>this['_element']['calculated'+'Height']&&(_0x1d9df7=Y['clamp'](this['_fontSize']-(0x320*-0x5+-0x1*-0x22dd+-0x133c*0x1),_0x2a5978,_0x3f9126),_0x1d9df7!==this['_element']['fontSize'])){this['_fontSize']=_0x1d9df7,_0x1f23a3=!(0x11d7+-0x2*-0xc7a+-0x2acb);break;}_0x2a6a38+=this['_spacing']*_0x118f85,_0x43383e||(_0x5382fa=_0x2a6a38),(this['_isWordBou'+'ndary'](_0x41dd5d)||this['_isValidNe'+'xtChar'](_0x34ff2b)&&(this['_isNextCJK'+'Boundary'](_0x41dd5d,_0x34ff2b)||this['_isNextCJK'+'WholeWord'](_0x34ff2b)))&&(_0x446479++,_0x199e1c=_0x5382fa,_0x42cc47=_0x575c99+(0x1*-0x1abb+-0x1*0x1bb5+0x3671)),_0x2b5af2++;const _0x120e02=this['_getUv'](_0x41dd5d);if(_0x1fa730['uvs'][_0x259c2c*(0x27d*-0x8+-0x1646+0x2a32)*(-0x16f+0x98b+-0x3d*0x22)+(-0xd23+-0x238f+0x30b2)]=_0x120e02[0x16ef+0x118d+-0x287c],_0x1fa730['uvs'][_0x259c2c*(0x256e+-0x10*0x154+-0x102a*0x1)*(0x7*0x2ab+-0x1c6d+-0x9c2*-0x1)+(0x7c*-0x2b+-0x129b*-0x2+-0x1061)]=-0xb9f+0x554*0x5+-0x1f*0x7c-_0x120e02[0x665*0x5+0x10dd*0x1+-0x30d5],_0x1fa730['uvs'][_0x259c2c*(0x579*-0x1+-0x2*-0x874+-0xb6b)*(0x626+-0x107+-0x51d)+(-0x1*-0x1b2d+0x2446+0x1*-0x3f71)]=_0x120e02[0x85*0x35+-0x6*0x74+-0x845*0x3],_0x1fa730['uvs'][_0x259c2c*(0x1d0f+-0x202d+-0x1*-0x322)*(0x3c*-0x5c+-0x295*0x9+0x2ccf*0x1)+(0x773+-0x469*0x2+0x162)]=0x1*-0x241+-0x46*0x34+0x107a-_0x120e02[-0x1eae+-0x2*-0xb6f+0x17*0x57],_0x1fa730['uvs'][_0x259c2c*(-0x11b6*-0x1+-0x1be0+0xa2e)*(-0x5*0xce+0x1c15+0x180d*-0x1)+(-0x382*0x8+0x1564+0x6b0)]=_0x120e02[-0x74f*0x1+0x214e+-0x1*0x19fd],_0x1fa730['uvs'][_0x259c2c*(0xdf5+-0x1*0xd9f+-0x52)*(-0xcdf+-0x14a3+0x2184)+(-0x11a4+0x25de*-0x1+-0x1*-0x3787)]=-0x95f+0xaa0+0x40*-0x5-_0x120e02[0x212e+0x1*0x7c2+0x1*-0x28ed],_0x1fa730['uvs'][_0x259c2c*(0x18d*-0x9+0x2696+0x189d*-0x1)*(-0x1*-0x20f2+0xaa9+0x2b99*-0x1)+(0xf89+-0x1*-0x202c+-0x2faf)]=_0x120e02[0xb84+-0x25de+0x1a5a],_0x1fa730['uvs'][_0x259c2c*(-0x1*-0x58a+-0x7c3+0x23d)*(-0x14e7+-0x1*-0x18c2+-0x3d9)+(0x1e05+-0x2c*-0xa+-0x1fb6)]=-0x12d7*0x1+0x1292+-0x23*-0x2-_0x120e02[-0x67d*-0x3+-0x12e2+0x1*-0x92],this['_symbolCol'+'ors']){const _0x2e71dd=this['_symbolCol'+'ors'][_0x575c99]*(-0x110e+-0xa63+0x1c*0xfb);_0x5551a1=this['_colorPale'+'tte'][_0x2e71dd],_0x513737=this['_colorPale'+'tte'][_0x2e71dd+(-0x1444+-0x1d43+0x631*0x8)],_0x5d6b14=this['_colorPale'+'tte'][_0x2e71dd+(-0x1d0f+0x1d54+-0x1*0x43)];}if(_0x1fa730['colors'][_0x259c2c*(0x7+0xab+-0xae)*(0xa*0x18e+0x2*-0x11ae+0x234*0x9)+(-0x1710+-0x5*0x27a+0x2372)]=_0x5551a1,_0x1fa730['colors'][_0x259c2c*(-0x1627+0x1*0x13f+0x14ec)*(-0x1*0x1e1d+-0x3*-0xc8f+-0x78c)+(-0x203a+-0xb5c*-0x3+-0x2b*0xb)]=_0x513737,_0x1fa730['colors'][_0x259c2c*(0x89*0x35+0x21e1+-0x3e3a)*(-0xbbc*-0x1+-0x1*-0x1013+-0x1bcb)+(0x384*0xb+-0x1e*0x2a+-0x21be)]=_0x5d6b14,_0x1fa730['colors'][_0x259c2c*(-0x13f9*-0x1+0xa25*0x1+0x2*-0xf0d)*(0x2*0xdc7+0x1d8d+-0x3917)+(0x9b8+0x2*-0xb7e+0xd47)]=-0x1*0x6e6+0x1599+-0x4*0x36d,_0x1fa730['colors'][_0x259c2c*(-0x152c+-0x11c0+0x26f0)*(-0xb3c*0x1+0x9*0x337+-0x1f7*0x9)+(0x1ee+0x79c*0x2+-0x1122)]=_0x5551a1,_0x1fa730['colors'][_0x259c2c*(0x1b92+0x5*-0x449+-0x621)*(0xb1f+-0x1*0xb47+0xb*0x4)+(0x371+0x1*0x6a1+-0xa0d)]=_0x513737,_0x1fa730['colors'][_0x259c2c*(0x7c2+0x1*-0x8ae+0xc*0x14)*(0x443*-0x9+-0xe3+0x1e*0x14f)+(0xa43+0x43*0x61+-0x23a0)]=_0x5d6b14,_0x1fa730['colors'][_0x259c2c*(0xfae+0x580+0x3f*-0x56)*(0x6*-0x20f+0x184f+0x3fb*-0x3)+(-0x14*-0xe0+0x3*-0x1c+0xe7*-0x13)]=-0x8ca+0xa1d+-0x54,_0x1fa730['colors'][_0x259c2c*(0x38*0x43+-0x34f*-0x7+-0x25cd)*(-0x1eed+0xf3c+0x1*0xfb5)+(0xdf*-0x4+-0x6ff+-0x3*-0x381)]=_0x5551a1,_0x1fa730['colors'][_0x259c2c*(-0x19be+-0x1*0x2207+0x5*0xbf5)*(0x1c7*-0x12+0xa99*-0x2+0x2*0x1a9a)+(-0x135f*-0x1+-0x1f26+0xbd0)]=_0x513737,_0x1fa730['colors'][_0x259c2c*(-0x3*-0x6a+0x1fb*0xa+-0x1508)*(-0x1*0x1bfd+0x623*-0x1+-0xbe*-0x2e)+(0x1*0x518+0xb5d*0x3+-0x1*0x2725)]=_0x5d6b14,_0x1fa730['colors'][_0x259c2c*(-0xeec+-0x1ce2*-0x1+-0xdf2)*(-0x8e0*-0x4+-0x1536+0x6*-0x261)+(0x8db*-0x1+0xc4c+-0x366)]=0x51*0x11+0x2248+-0x26aa*0x1,_0x1fa730['colors'][_0x259c2c*(0x367+0x1db9+-0xd*0x28c)*(-0x1a39+0x2*-0xa62+0x2f01)+(0x1*-0x1423+0xaf5+0x93a)]=_0x5551a1,_0x1fa730['colors'][_0x259c2c*(0x123+-0x37*0x7f+0x1a2a)*(-0x91d+-0x14dd+0x1dfe)+(-0xb81+-0xfc9+0x1b57)]=_0x513737,_0x1fa730['colors'][_0x259c2c*(0x21c5+0x5bf*-0x3+0x25c*-0x7)*(0x1820+-0x88a+0xf92*-0x1)+(-0x748+0x1ef7+-0x17a1)]=_0x5d6b14,_0x1fa730['colors'][_0x259c2c*(0x3*0x805+-0xd*0xcb+-0xdbc)*(-0x1857+-0xcec*-0x2+-0x17d)+(0xe9*-0x7+-0x1d7a+0x23e8)]=0xb30+-0x337*0x9+0x2*0x95f,this['_symbolOut'+'lineParams']){const _0x382700=this['_symbolOut'+'lineParams'][_0x575c99]*(-0x1*0x1009+-0x10*0x17e+0x27ee);_0x40c364=this['_outlinePa'+'lette'][_0x382700]+this['_outlinePa'+'lette'][_0x382700+(-0x222b*-0x1+0x3f0+-0x261a)]*(-0x52*0x25+-0x1*0xd01+0x19db),_0x153168=this['_outlinePa'+'lette'][_0x382700+(0x1*-0x210a+0x7af+0x195d*0x1)]+this['_outlinePa'+'lette'][_0x382700+(-0x166f+-0x1b0d+-0x317f*-0x1)]*(0x4e1*0x1+-0x21d*0x10+0x1def),_0x308a5f=this['_outlinePa'+'lette'][_0x382700+(0x15ab+0xd3*0x16+-0x27c9)];}if(_0x1fa730['outlines'][_0x259c2c*(-0x1*-0x219c+-0x83a+-0xcaf*0x2)*(0x90*0xd+-0x7*0x28c+-0x5*-0x21b)+(-0x251e+-0x4fe+0x16*0x1ea)]=_0x40c364,_0x1fa730['outlines'][_0x259c2c*(0x65c*-0x1+-0x591+0x3*0x3fb)*(0x1a48+-0x3fc*-0x8+0x3a25*-0x1)+(-0xd*0xfe+0x1*0xfc1+-0x2da)]=_0x153168,_0x1fa730['outlines'][_0x259c2c*(0x606+-0x22a8*-0x1+0x28aa*-0x1)*(-0xacf+0x1ffa+-0x1528)+(0x1f5+-0x3*0xbbd+-0x851*-0x4)]=_0x308a5f,_0x1fa730['outlines'][_0x259c2c*(0x3*0x925+0x1ad1+-0x363c)*(0x1*0x1a02+0x608+0x38f*-0x9)+(-0x15a1+-0xd3f*0x1+0x22e3)]=_0x40c364,_0x1fa730['outlines'][_0x259c2c*(-0x411*0x8+0x1ad6+0x22*0x2b)*(-0x1981*-0x1+-0x252d+0xbaf)+(0x1c2+0xe87+-0x1045)]=_0x153168,_0x1fa730['outlines'][_0x259c2c*(0x871+-0xd8*-0xd+-0x1365)*(-0x3*0xbcf+-0x1*0x11b4+-0x2*-0x1a92)+(-0xa*-0x185+-0x18b0+0x983)]=_0x308a5f,_0x1fa730['outlines'][_0x259c2c*(-0x20dd*-0x1+0x1fa1+0x106*-0x3f)*(-0xa84*0x2+0x23b*0x6+0x7a9*0x1)+(-0xe67+0x417+-0x7e*-0x15)]=_0x40c364,_0x1fa730['outlines'][_0x259c2c*(-0x1f81*0x1+-0x32*0x91+-0x3bd7*-0x1)*(-0x2e*0x59+-0xea6+0x1ea7)+(-0x2249+-0x248f+0x46df)]=_0x153168,_0x1fa730['outlines'][_0x259c2c*(-0x2*-0xec+0x2*0xc29+0x2*-0xd13)*(0x2304+-0x3*-0x33d+-0x2cb8)+(0xd47+-0x526*0x2+-0x2f3)]=_0x308a5f,_0x1fa730['outlines'][_0x259c2c*(-0x4a3+-0x20be+0x2565)*(-0x1*0xaf2+-0xc5*-0x31+-0x1ac*0x10)+(-0x59b+0x1778+-0x11d4*0x1)]=_0x40c364,_0x1fa730['outlines'][_0x259c2c*(0x3*0x66e+0xa25*0x1+0x1*-0x1d6b)*(-0x2ba+-0x217a+0x2437)+(-0x1ee0+-0x95e+0x2848)]=_0x153168,_0x1fa730['outlines'][_0x259c2c*(0x1bbd+0xbd1+-0x278a)*(0x2*-0xe24+-0x2470+0x40bb)+(-0x3*0x145+0xc86+-0x8ac)]=_0x308a5f,this['_symbolSha'+'dowParams']){const _0x326f4d=this['_symbolSha'+'dowParams'][_0x575c99]*(0x1*-0x8d1+-0xb19+0x3a*0x58);_0x41e947=this['_shadowPal'+'ette'][_0x326f4d]+this['_shadowPal'+'ette'][_0x326f4d+(0x260d+-0x1a5c+-0xbb0)]*(0x1df1+0x17*-0xaf+0x18*-0x8d),_0x4a7b2c=this['_shadowPal'+'ette'][_0x326f4d+(-0x127b+-0x23a9+0xef*0x3a)]+this['_shadowPal'+'ette'][_0x326f4d+(-0x2b*-0x1d+0xd84+-0x93*0x20)]*(-0xadb*-0x1+-0x24a+-0x791),_0x54cfd7=this['_shadowPal'+'ette'][_0x326f4d+(0xe24*-0x2+-0x20a8+0x53*0xbc)]+(0x2462+-0x2307+-0xdc)+Math['round'](_0x3e1471*this['_shadowPal'+'ette'][_0x326f4d+(0x1d1+-0xbb*0x13+-0x407*-0x3)]+(0x134e*0x2+0x1*0x16d9+-0x3cf6))*(-0x177f+0x13a1+0x1*0x4de);}_0x1fa730['shadows'][_0x259c2c*(0x25c5+0x49*0x82+0x4ad3*-0x1)*(-0x1989*-0x1+0x1afc+-0x3482)+(0x22e9+-0xeae+-0x143b)]=_0x41e947,_0x1fa730['shadows'][_0x259c2c*(-0x19a9+0x9d6+0xfd7)*(-0x5ad+0x1*-0x1319+0x18c9)+(0xa47*-0x2+0x1*0xb73+0x91c)]=_0x4a7b2c,_0x1fa730['shadows'][_0x259c2c*(-0x22d2+0x937+0x199f)*(0x5*-0x3d+-0xf6*0x21+0x20ea)+(0x1254*0x2+-0x71*0x57+0x1*0x1c1)]=_0x54cfd7,_0x1fa730['shadows'][_0x259c2c*(0x7*0x1fd+0x1889+-0x7b*0x50)*(-0x13a0+0xa6*-0x26+0x2c47)+(-0x8*-0x4cf+0x4fd+0x15b9*-0x2)]=_0x41e947,_0x1fa730['shadows'][_0x259c2c*(0x1*0x8e1+0x1a34+-0xbf*0x2f)*(0x24b3+0x1299+-0x3749*0x1)+(-0x6*-0x3cb+0xf7e+-0x263c*0x1)]=_0x4a7b2c,_0x1fa730['shadows'][_0x259c2c*(0x194d+-0x5e5*-0x2+0x1*-0x2513)*(-0x1*-0x2113+-0x1*-0x263+-0x2373)+(0x67c+0x3a+-0x6b1*0x1)]=_0x54cfd7,_0x1fa730['shadows'][_0x259c2c*(-0x1e95+-0x25*0x41+0x27fe)*(-0x2109*0x1+-0x1*-0x26be+-0x5b2)+(-0x1577+0x2*0x741+0x1*0x6fb)]=_0x41e947,_0x1fa730['shadows'][_0x259c2c*(-0x1a0d+0xa0*0xf+0x10b1)*(-0x22fa+0x16a6+0xc57)+(0x1*0xcc7+-0x17cb*0x1+0xb0b)]=_0x4a7b2c,_0x1fa730['shadows'][_0x259c2c*(0x43f*-0x7+0x1b13+0x2aa)*(-0x2*-0xec7+-0x7d7+-0x15b4)+(0x1fb3+0x1b7f+-0x1*0x3b2a)]=_0x54cfd7,_0x1fa730['shadows'][_0x259c2c*(0x1*-0x1c8e+0xad5*-0x2+0x2*0x191e)*(-0x143+0x14*0x62+-0x662)+(0x1*0xa36+0x1*0x581+-0xfae)]=_0x41e947,_0x1fa730['shadows'][_0x259c2c*(-0x7*0x205+-0x39c+0x11c3)*(0x1da7+-0x13e1+-0x9c3)+(-0x2388+-0x2*-0xd96+0x866*0x1)]=_0x4a7b2c,_0x1fa730['shadows'][_0x259c2c*(0x2*0x1f+-0xbbd+0xb83)*(-0x1075*0x2+0x220+0x1ecd)+(-0x161+0x293+-0x127)]=_0x54cfd7,_0x1fa730['quad']++;}_0x1f23a3||_0x318a4f<_0x5b046e&&_0x3d2a72(this['_symbols'],_0x5b046e,_0x2a6a38);}this['_noResize']=!(0x34e*0x2+0x1ed4+-0x2570),this['autoWidth']=this['_autoWidth'],this['autoHeight']=this['_autoHeigh'+'t'],this['_noResize']=!(0x53f*0x4+0x127d*0x2+-0x39f5);const _0x5e30cf=this['_element']['pivot']['x'],_0x3e585d=this['_element']['pivot']['y'],_0xd76ab7=this['_alignment']['x'],_0x468abc=this['_alignment']['y'];for(let _0x43c3e1=-0xa*0x54+-0x1*-0x1318+-0xfd0;_0x43c3e1<this['_meshInfo']['length'];_0x43c3e1++){if(this['_meshInfo'][_0x43c3e1]['count']===-0x3*0x8f+-0xa06*0x1+-0x257*-0x5)continue;let _0x49f36c=0xd0*0x8+0x15cf+0x1c4f*-0x1;for(const _0x49588c in this['_meshInfo'][_0x43c3e1]['lines']){const _0x1f7de7=this['_meshInfo'][_0x43c3e1]['lines'][_0x49588c],_0x2a75a7=this['_lineWidth'+'s'][parseInt(_0x49588c,0x186a+0x2117+-0x3977)],_0x238763=-_0x5e30cf*this['_element']['calculated'+'Width']+_0xd76ab7*(this['_element']['calculated'+'Width']-_0x2a75a7)*(this['_rtl']?-(-0xffd+-0x1*-0xffb+0x3*0x1):-0x1af2*-0x1+-0xbf*-0x27+-0x380a),_0x1b73e4=(0x1f14+0xaf*-0xd+-0x1630-_0x3e585d)*this['_element']['calculated'+'Height']-_0x35ecef-(0xa8f+-0xce+-0x9c0-_0x468abc)*(this['_element']['calculated'+'Height']-this['height']);for(let _0x73e637=_0x49f36c;_0x73e637<=_0x1f7de7;_0x73e637++)this['_meshInfo'][_0x43c3e1]['positions'][_0x73e637*(-0x47b*-0x8+0x1*0x52d+0x1*-0x2901)*(0x1*-0xa48+-0x13c9+0x1c*0x113)]+=_0x238763,this['_meshInfo'][_0x43c3e1]['positions'][_0x73e637*(-0x220c+-0x1*0x2593+0x17e1*0x3)*(0xadd+-0x4d4+-0x606)+(-0x209*-0x6+0x5*0x3+0x20b*-0x6)]+=_0x238763,this['_meshInfo'][_0x43c3e1]['positions'][_0x73e637*(0x5*0x1+-0x54c+0x54b)*(0x10e1*0x1+0x1c36+-0x904*0x5)+(0x20e9*0x1+0x73*-0x43+-0x66*0x7)]+=_0x238763,this['_meshInfo'][_0x43c3e1]['positions'][_0x73e637*(0xf2a+-0x2b*-0x76+-0x2*0x117c)*(-0x1485+0xfc0+-0x4c8*-0x1)+(0xb71*-0x2+-0x18fd+0x2fe8)]+=_0x238763,this['_meshInfo'][_0x43c3e1]['positions'][_0x73e637*(0x1c7c*-0x1+-0x580+0x440*0x8)*(0xee+0x24c5+-0x25b0)+(-0x400+-0x7*-0x44d+-0x202*0xd)]+=_0x1b73e4,this['_meshInfo'][_0x43c3e1]['positions'][_0x73e637*(0x205d+-0x1aac+-0x5ad)*(-0x1155+-0x52d*-0x3+0x1d1)+(-0x1b24+0x5*-0x321+0x2acd)]+=_0x1b73e4,this['_meshInfo'][_0x43c3e1]['positions'][_0x73e637*(-0x80b+0x3*-0x72+-0x965*-0x1)*(-0x228f+0x3fa*-0x5+-0x11*-0x334)+(0x2485+-0x4a7+-0x39*0x8f)]+=_0x1b73e4,this['_meshInfo'][_0x43c3e1]['positions'][_0x73e637*(-0xbd3*-0x2+-0x14cf+0xf1*-0x3)*(-0x2*0x704+0x1*-0x13b3+0x21be)+(0x1*0x109e+-0xff+0xf95*-0x1)]+=_0x1b73e4;if(this['_rtl'])for(let _0x1b2c88=_0x49f36c;_0x1b2c88<=_0x1f7de7;_0x1b2c88++){const _0x171880=_0x1b2c88*(-0x63e+0xde5*-0x2+0x883*0x4)*(-0xbad+-0x113b+0x1ceb);for(let _0x245510=-0x101f+0x183e+-0xbd*0xb;_0x245510<-0x131c+0x1*-0xe9+0x1409;++_0x245510)this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+_0x245510*(-0x5*0x153+-0x20e3+0x43*0x97)]=this['_element']['calculated'+'Width']-this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+_0x245510*(0x167d+-0x6e5*-0x4+0x1*-0x320e)]+_0x238763*(-0x1*-0xeb9+0x2*-0x1f3+0x47*-0x27);const _0x581f8a=this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+(0x8b*-0x31+-0x1*-0xfdf+0x189*0x7)],_0xd9704=this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+(0x6d*0x5b+-0x4*-0x570+-0x3c79)];this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+(0x253a+-0x1ddf+-0x758*0x1)]=this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+(-0x2404+-0x5b3+0x29b7)],this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+(-0x9*-0x3e1+-0x880+0x1*-0x1a63)]=this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+(0x6d*0x34+0x1aa6+-0x30c1)],this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+(0x241*0x7+0x678+-0x1*0x163f)]=_0x581f8a,this['_meshInfo'][_0x43c3e1]['positions'][_0x171880+(-0x1914+-0x250a*0x1+0x3e27)]=_0xd9704;}_0x49f36c=_0x1f7de7+(0x115+-0xded+-0x1*-0xcd9);}const _0x4e463a=this['_meshInfo'][_0x43c3e1]['count']*(-0x4d4*-0x5+0x1e07*-0x1+-0x5e7*-0x1),_0x3c9cab=this['_meshInfo'][_0x43c3e1]['quad']*(-0xe2b+-0x38*-0x42+-0x41),_0x36ce90=new Ao(this['_meshInfo'][_0x43c3e1]['meshInstan'+'ce']['mesh']['vertexBuff'+'er']);for(let _0x17f54e=0x1fab+-0x4c0+-0x1aeb;_0x17f54e<_0x4e463a;_0x17f54e++)_0x17f54e>=_0x3c9cab?(_0x36ce90['element'][Pe]['set'](0xf65+-0x7f3+0x1*-0x772,0x21fa+0xdb*0x17+0x29*-0x14f,0x1*-0x14b3+-0x1*-0x140b+0xa8),_0x36ce90['element'][is]['set'](-0x2209+0x2267+-0x2*0x2f,-0x1794+-0xe6a+0x2*0x12ff),_0x36ce90['element'][Wt]['set'](0x225c+-0x29*-0xf0+-0x6*0xc22,0x145*0x14+0x23fa+-0x3d5e,-0x4*-0x8cc+-0x1c2d+-0x703,-0x6f1*-0x5+0x1*-0xf43+-0x1372),_0x36ce90['element'][ko]['set'](-0x1*0x239+0x1*-0xdf+0x18*0x21,0x1*0x1649+-0x1c3c+0x5f3,-0xf84+-0x1*-0x1f3b+0xfb7*-0x1,0x2684*0x1+-0x3*-0x4ee+-0x354e*0x1),_0x36ce90['element'][Uo]['set'](-0x1ef0+0x1176+0xd7a,0xf5e+0x1*-0x24e4+-0x2*-0xac3,-0x6d*0xb+-0x15dc+0x1a8b,0x1ec6+0x211d+0x1*-0x3fe3)):(_0x36ce90['element'][Pe]['set'](this['_meshInfo'][_0x43c3e1]['positions'][_0x17f54e*(0x762+0xed7+-0xb1b*0x2)+(-0x101b+-0x522+0x153d)],this['_meshInfo'][_0x43c3e1]['positions'][_0x17f54e*(-0xc0f+0x169e+-0xa8c)+(0x1b27+-0x1*0x206+-0x1920)],this['_meshInfo'][_0x43c3e1]['positions'][_0x17f54e*(-0x185f+-0x1bc3+0x773*0x7)+(-0x14*-0x5b+0x12*-0x17f+0x6c*0x2f)]),_0x36ce90['element'][is]['set'](this['_meshInfo'][_0x43c3e1]['uvs'][_0x17f54e*(0x3*-0xef+0x1*0x184+0x14b)+(-0x1092+-0xf55+0x1*0x1fe7)],this['_meshInfo'][_0x43c3e1]['uvs'][_0x17f54e*(-0x654+-0x1*-0x1007+0x3*-0x33b)+(0x1cba+-0x1e*0x12d+0x68d)]),_0x36ce90['element'][Wt]['set'](this['_meshInfo'][_0x43c3e1]['colors'][_0x17f54e*(-0xe6b+-0x2dd*-0x7+-0x4*0x167)+(-0xb*-0x27b+0x2462+-0x3*0x1539)],this['_meshInfo'][_0x43c3e1]['colors'][_0x17f54e*(-0x10f6+0xb*0x323+0x1*-0x1187)+(-0x5f*0x36+0x430*-0x2+0x1c6b)],this['_meshInfo'][_0x43c3e1]['colors'][_0x17f54e*(-0xb41+-0xb13+-0xa*-0x23c)+(-0x7ac+0x1944+-0x1196*0x1)],this['_meshInfo'][_0x43c3e1]['colors'][_0x17f54e*(-0x6d9*-0x2+0x5*-0x251+-0x219)+(-0xb3d+-0x8b+0xbcb)]),_0x36ce90['element'][ko]['set'](this['_meshInfo'][_0x43c3e1]['outlines'][_0x17f54e*(-0x1d1d*-0x1+0x1578+-0x1*0x3292)+(-0x1db4+0xca3*0x3+-0x835)],this['_meshInfo'][_0x43c3e1]['outlines'][_0x17f54e*(0x2387+0x1996+-0x3d1a)+(0x27*0x37+0x13d+-0x99d)],this['_meshInfo'][_0x43c3e1]['outlines'][_0x17f54e*(0x740+-0xc79+0xa*0x86)+(0x5*-0x27+-0x707+0x1f3*0x4)]),_0x36ce90['element'][Uo]['set'](this['_meshInfo'][_0x43c3e1]['shadows'][_0x17f54e*(0xc9e+0x1170+0x1e0b*-0x1)+(0x1*-0x4d1+-0xb*-0x14b+-0x968)],this['_meshInfo'][_0x43c3e1]['shadows'][_0x17f54e*(-0x200f+0x5*-0xc6+0x23f0)+(0xf00+-0x12*0xed+0x1ab)],this['_meshInfo'][_0x43c3e1]['shadows'][_0x17f54e*(-0x1*-0xc0d+-0xbe9+-0x21*0x1)+(0x1030+-0xf14+-0x11a)])),_0x36ce90['next']();_0x36ce90['end'](),this['_meshInfo'][_0x43c3e1]['meshInstan'+'ce']['mesh']['aabb']['compute'](this['_meshInfo'][_0x43c3e1]['positions']),this['_meshInfo'][_0x43c3e1]['meshInstan'+'ce']['_aabbVer']=-(0x1405+-0x1692+0x6*0x6d);}this['_aabbDirty']=!(-0x37*-0xa3+-0x242*0x1+-0x20c3);}['_onFontRen'+'der'](){this['font']=this['_font'];}['_onFontLoa'+'d'](_0x489547){this['font']!==_0x489547['resource']&&(this['font']=_0x489547['resource']);}['_onFontCha'+'nge'](_0x574ad3,_0x552c28,_0x16c49a,_0x2f23cf){if(_0x552c28==='data'){this['_font']['data']=_0x16c49a;const _0x3678a3=this['_font']['data']['info']['maps']['length'];for(let _0x579e95=-0x8*0x38b+-0x11*-0x4f+0x1719;_0x579e95<_0x3678a3;_0x579e95++){if(!this['_meshInfo'][_0x579e95])continue;const _0x4e9836=this['_meshInfo'][_0x579e95]['meshInstan'+'ce'];_0x4e9836&&(_0x4e9836['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x4e9836['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x4e9836['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x579e95]['width']));}}}['_onFontRem'+'ove'](_0x4967a2){}['_setTextur'+'eParams'](_0xc4a2c5,_0x527e7d){this['_font']&&(this['_font']['type']===dh?(_0xc4a2c5['deletePara'+'meter']('texture_em'+'issiveMap'),_0xc4a2c5['deletePara'+'meter']('texture_op'+'acityMap'),_0xc4a2c5['setParamet'+'er']('texture_ms'+'dfMap',_0x527e7d)):this['_font']['type']===ML&&(_0xc4a2c5['deletePara'+'meter']('texture_ms'+'dfMap'),_0xc4a2c5['setParamet'+'er']('texture_em'+'issiveMap',_0x527e7d),_0xc4a2c5['setParamet'+'er']('texture_op'+'acityMap',_0x527e7d)));}['_getPxRang'+'e'](_0x1445dd){const _0x293018=Object['keys'](this['_font']['data']['chars']);for(let _0x2ea6e8=-0x1*0x257f+0x1656+0xf29;_0x2ea6e8<_0x293018['length'];_0x2ea6e8++){const _0xac4967=this['_font']['data']['chars'][_0x293018[_0x2ea6e8]];if(_0xac4967['range'])return(_0xac4967['scale']||-0xa*0xf9+-0x559+-0xf14*-0x1)*_0xac4967['range'];}return-0x254b+-0x11f*0x2+-0x1*-0x278b;}['_getUv'](_0x41ae19){const _0x189331=this['_font']['data'];if(!_0x189331['chars'][_0x41ae19])return _0x189331['chars']['\x20']?this['_getUv']('\x20'):[-0x7b6+-0xd*-0x5+0x775,0x17*0x1a+0x252b+-0x2781*0x1,-0x15ee+0x1408*-0x1+-0x29f6*-0x1,-0x801+0xfc9*-0x1+0x17ca];const _0x2d0df7=_0x189331['chars'][_0x41ae19]['map'],_0x5e1e1f=_0x189331['info']['maps'][_0x2d0df7]['width'],_0x22c61b=_0x189331['info']['maps'][_0x2d0df7]['height'],_0x580b2d=_0x189331['chars'][_0x41ae19]['x'],_0x32c981=_0x189331['chars'][_0x41ae19]['y'],_0x40db26=_0x580b2d,_0x1c67fd=_0x32c981,_0x3ec4f7=_0x580b2d+_0x189331['chars'][_0x41ae19]['width'],_0x3973e7=_0x32c981-_0x189331['chars'][_0x41ae19]['height'],_0x52d5c9=0x539+-0x1393+0xe5b-_0x189331['chars'][_0x41ae19]['height']/_0x22c61b;return[_0x40db26/_0x5e1e1f,_0x52d5c9-_0x1c67fd/_0x22c61b,_0x3ec4f7/_0x5e1e1f,_0x52d5c9-_0x3973e7/_0x22c61b];}['onEnable'](){this['_fontAsset']['autoLoad']=!(-0x1*0x132a+-0x7d*-0x29+0xdb*-0x1),this['_model']&&this['_element']['addModelTo'+'Layers'](this['_model']);}['onDisable'](){this['_fontAsset']['autoLoad']=!(0x2df*0x8+-0x3b4+-0x1343),this['_model']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']);}['_setStenci'+'l'](_0x1a0240){if(this['_model']){const _0x556647=this['_model']['meshInstan'+'ces'];for(let _0x12c552=0x409*-0x9+-0x47*0x53+0x9b*0x62;_0x12c552<_0x556647['length'];_0x12c552++)_0x556647[_0x12c552]['stencilFro'+'nt']=_0x1a0240,_0x556647[_0x12c552]['stencilBac'+'k']=_0x1a0240;}}['_shouldAut'+'oFitWidth'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth'];}['_shouldAut'+'oFitHeight'](){return this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_shouldAut'+'oFit'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth']||this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_calculate'+'CharsPerTe'+'xture'](_0x20d7db){const _0x387bde={};_0x20d7db===void(0x2478+0x2174+-0x45ec)&&(_0x20d7db=this['_symbols']['length']);for(let _0x502e95=0xf*0xe+-0x1*-0xbdb+-0xcad,_0xef279f=_0x20d7db;_0x502e95<_0xef279f;_0x502e95++){const _0x395bc9=this['_symbols'][_0x502e95];let _0x258c20=this['_font']['data']['chars'][_0x395bc9];_0x258c20||(_0x258c20=this['_font']['data']['chars']['\x20'],_0x258c20||(_0x258c20=this['_font']['data']['chars'][Object['keys'](this['_font']['data']['chars'])[0x26d2+0x188f*-0x1+-0xe43]]));const _0x28d692=_0x258c20['map'];_0x387bde[_0x28d692]?_0x387bde[_0x28d692]++:_0x387bde[_0x28d692]=0x863*-0x3+-0x2*-0xce3+-0x9c;}return _0x387bde;}['_updateRen'+'derRange'](){const _0xf18420=this['_rangeStar'+'t']===-0x25a2+-0x14d9+0x551*0xb?-0x1290+0x3c9*0x3+0x735:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeStar'+'t']),_0x2d0e5f=this['_rangeEnd']===0x8c8+-0x1*-0xb55+-0x10f*0x13?0x5e+0x1ee9+-0x1f47:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeEnd']);for(let _0x5b6d8e=-0x359*0x7+-0x3f7*0x6+0x2f39,_0x4ccb73=this['_meshInfo']['length'];_0x5b6d8e<_0x4ccb73;_0x5b6d8e++){const _0x5739b6=_0xf18420[_0x5b6d8e]||0x17c5+0x16e2+-0x2ea7,_0x1c9c95=_0x2d0e5f[_0x5b6d8e]||0x5*-0x727+-0x1f7d+-0x40*-0x10d,_0x237743=this['_meshInfo'][_0x5b6d8e]['meshInstan'+'ce'];if(_0x237743){const _0x51ccce=_0x237743['mesh'];_0x51ccce&&(_0x51ccce['primitive'][0xef*0x23+-0x20bc*-0x1+0x5*-0xd15]['base']=_0x5739b6*(-0x84e*-0x4+0x1*0xe52+-0x2f87)*(0x3c*-0x32+0x10d*0xc+-0xe2),_0x51ccce['primitive'][0x1e2d+0x25d7+-0x4404]['count']=(_0x1c9c95-_0x5739b6)*(0x188*0xb+-0x2fc+-0x5*0x2c5)*(-0xe*0x1cd+0x20a3+0xd3*-0x9));}}}set['text'](_0x3267f8){this['_i18nKey']=null;const _0x515e98=_0x3267f8!=null&&_0x3267f8['toString']()||'';this['_setText'](_0x515e98);}get['text'](){return this['_text'];}set['key'](_0x331b9a){const _0x2e980d=_0x331b9a!==null?_0x331b9a['toString']():null;this['_i18nKey']!==_0x2e980d&&(this['_i18nKey']=_0x2e980d,_0x2e980d?(this['_fontAsset']['disableLoc'+'alization']=!(0xd71+0x2dc*0xc+-0x2fc0),this['_resetLoca'+'lizedText']()):this['_fontAsset']['disableLoc'+'alization']=!(0x178f*0x1+-0x1ee7+0x758));}get['key'](){return this['_i18nKey'];}set['color'](_0x5e9b5f){const _0x318716=_0x5e9b5f['r'],_0x357126=_0x5e9b5f['g'],_0x2be704=_0x5e9b5f['b'];if(this['_color']===_0x5e9b5f&&console['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t'),!(this['_color']['r']===_0x318716&&this['_color']['g']===_0x357126&&this['_color']['b']===_0x2be704)&&(this['_color']['r']=_0x318716,this['_color']['g']=_0x357126,this['_color']['b']=_0x2be704,!!this['_model'])){if(this['_symbolCol'+'ors'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_color']),this['_colorUnif'+'orm'][0x127*-0x18+0x60*-0x8+-0x48*-0x6d]=We['r'],this['_colorUnif'+'orm'][0x1bed+-0x14a8+-0x5*0x174]=We['g'],this['_colorUnif'+'orm'][0x2ad*0x3+0x1*-0x1e0e+0x1609]=We['b'];for(let _0x2dcca9=0x1d68+0x1bce+0x1c9b*-0x2,_0x1c2bbb=this['_model']['meshInstan'+'ces']['length'];_0x2dcca9<_0x1c2bbb;_0x2dcca9++)this['_model']['meshInstan'+'ces'][_0x2dcca9]['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}this['_element']&&this['_element']['fire']('set:color',this['_color']);}}get['color'](){return this['_color'];}set['opacity'](_0x196b80){if(this['_color']['a']!==_0x196b80&&(this['_color']['a']=_0x196b80,this['_model'])){for(let _0x1aa3d6=-0x8a9+0x1cc8+-0x141f,_0x55e747=this['_model']['meshInstan'+'ces']['length'];_0x1aa3d6<_0x55e747;_0x1aa3d6++)this['_model']['meshInstan'+'ces'][_0x1aa3d6]['setParamet'+'er']('material_o'+'pacity',_0x196b80);}this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x196b80);}get['opacity'](){return this['_color']['a'];}set['lineHeight'](_0x2cb0dd){const _0x415736=this['_lineHeigh'+'t'];this['_lineHeigh'+'t']=_0x2cb0dd,this['_scaledLin'+'eHeight']=_0x2cb0dd,_0x415736!==_0x2cb0dd&&this['_font']&&this['_updateTex'+'t']();}get['lineHeight'](){return this['_lineHeigh'+'t'];}set['wrapLines'](_0x22f9fd){const _0x5dc097=this['_wrapLines'];this['_wrapLines']=_0x22f9fd,_0x5dc097!==_0x22f9fd&&this['_font']&&this['_updateTex'+'t']();}get['wrapLines'](){return this['_wrapLines'];}get['lines'](){return this['_lineConte'+'nts'];}set['spacing'](_0x310fed){const _0x32aad7=this['_spacing'];this['_spacing']=_0x310fed,_0x32aad7!==_0x310fed&&this['_font']&&this['_updateTex'+'t']();}get['spacing'](){return this['_spacing'];}set['fontSize'](_0x2be51a){const _0x15a290=this['_fontSize'];this['_fontSize']=_0x2be51a,this['_originalF'+'ontSize']=_0x2be51a,_0x15a290!==_0x2be51a&&this['_font']&&this['_updateTex'+'t']();}get['fontSize'](){return this['_fontSize'];}set['fontAsset'](_0x34d6b1){this['_fontAsset']['defaultAss'+'et']=_0x34d6b1;}get['fontAsset'](){return this['_fontAsset']['localizedA'+'sset'];}set['font'](_0x10e025){let _0x12a224;if(this['_font']&&(_0x12a224=this['_font']['type'],this['_font']['off']&&this['_font']['off']('render',this['_onFontRen'+'der'],this)),this['_font']=_0x10e025,this['_fontMinY']=0x1*-0x5c9+-0xc15+-0x2*-0x8ef,this['_fontMaxY']=-0x1*-0x21e3+0x3*0x36d+-0x2c2a,!_0x10e025)return;const _0x2b68ec=this['_font']['data'];for(const _0x4c04a9 in _0x2b68ec['chars']){const _0x286cd2=_0x2b68ec['chars'][_0x4c04a9];_0x286cd2['bounds']&&(this['_fontMinY']=Math['min'](this['_fontMinY'],_0x286cd2['bounds'][-0x4e*-0x6+0x1*0x1e62+-0x2035]),this['_fontMaxY']=Math['max'](this['_fontMaxY'],_0x286cd2['bounds'][0x3b9+0xdda+0x232*-0x8]));}if(this['_font']['on']&&this['_font']['on']('render',this['_onFontRen'+'der'],this),this['_fontAsset']['localizedA'+'sset']&&this['_system']['app']['assets']['get'](this['_fontAsset']['localizedA'+'sset'])['resource']!==this['_font']&&(this['_fontAsset']['defaultAss'+'et']=null),_0x10e025['type']!==_0x12a224){const _0x5560f6=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x5560f6);}for(let _0x55e54e=-0x5*-0x10f+0x160f+-0x91e*0x3,_0x4717a8=this['_font']['textures']['length'];_0x55e54e<_0x4717a8;_0x55e54e++)if(!this['_meshInfo'][_0x55e54e])this['_meshInfo'][_0x55e54e]=new UL();else{const _0x186346=this['_meshInfo'][_0x55e54e]['meshInstan'+'ce'];_0x186346&&(_0x186346['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x186346['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x186346['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x55e54e]['width']),this['_setTextur'+'eParams'](_0x186346,this['_font']['textures'][_0x55e54e]));}let _0x18312c=!(0x15e7+0x1589+-0x2b6f);for(let _0x10fd0b=this['_font']['textures']['length'];_0x10fd0b<this['_meshInfo']['length'];_0x10fd0b++)this['_meshInfo'][_0x10fd0b]['meshInstan'+'ce']&&(_0x18312c||(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),_0x18312c=!(-0xe07+-0x132*-0xb+-0x9*-0x19)),this['_removeMes'+'hInstance'](this['_meshInfo'][_0x10fd0b]['meshInstan'+'ce']));this['_meshInfo']['length']>this['_font']['textures']['length']&&(this['_meshInfo']['length']=this['_font']['textures']['length']),this['_updateTex'+'t']();}get['font'](){return this['_font'];}set['alignment'](_0x4708f2){_0x4708f2 instanceof J?this['_alignment']['set'](_0x4708f2['x'],_0x4708f2['y']):this['_alignment']['set'](_0x4708f2[0x2*-0xfb3+-0x2415*0x1+0x437b],_0x4708f2[0x26b2+-0x19a5+0xa*-0x14e]),this['_font']&&this['_updateTex'+'t']();}get['alignment'](){return this['_alignment'];}set['autoWidth'](_0xc2962f){const _0xc9303e=this['_autoWidth'];if(this['_autoWidth']=_0xc2962f,_0xc2962f&&Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])<0x3*0xcc1+0x4de*-0x4+-0x11b*0x11+0.0001&&(this['_element']['width']=this['width']),_0xc9303e!==_0xc2962f){const _0x1b737e=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x1b737e!==this['_fontSize']&&(this['_fontSize']=_0x1b737e,this['_font']&&this['_updateTex'+'t']());}}get['autoWidth'](){return this['_autoWidth'];}set['autoHeight'](_0x5778e1){const _0x5a0495=this['_autoHeigh'+'t'];if(this['_autoHeigh'+'t']=_0x5778e1,_0x5778e1&&Math['abs'](this['_element']['anchor']['y']-this['_element']['anchor']['w'])<-0xe3*0x10+-0x1*-0x17+0xe19+0.0001&&(this['_element']['height']=this['height']),_0x5a0495!==_0x5778e1){const _0x27bb84=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x27bb84!==this['_fontSize']&&(this['_fontSize']=_0x27bb84,this['_font']&&this['_updateTex'+'t']());}}get['autoHeight'](){return this['_autoHeigh'+'t'];}set['rtlReorder'](_0x816d36){this['_rtlReorde'+'r']!==_0x816d36&&(this['_rtlReorde'+'r']=_0x816d36,this['_font']&&this['_updateTex'+'t']());}get['rtlReorder'](){return this['_rtlReorde'+'r'];}set['unicodeCon'+'verter'](_0x29ccc9){this['_unicodeCo'+'nverter']!==_0x29ccc9&&(this['_unicodeCo'+'nverter']=_0x29ccc9,this['_setText'](this['_text']));}get['unicodeCon'+'verter'](){return this['_unicodeCo'+'nverter'];}get['aabb'](){if(this['_aabbDirty']){let _0x307a37=!(0x136b+-0x176d+0x403);for(let _0x2f5bbd=-0x6*-0x1a5+-0x1*-0x1f8e+-0x1e2*0x16;_0x2f5bbd<this['_meshInfo']['length'];_0x2f5bbd++)this['_meshInfo'][_0x2f5bbd]['meshInstan'+'ce']&&(_0x307a37?this['_aabb']['add'](this['_meshInfo'][_0x2f5bbd]['meshInstan'+'ce']['aabb']):(this['_aabb']['copy'](this['_meshInfo'][_0x2f5bbd]['meshInstan'+'ce']['aabb']),_0x307a37=!(0x680*0x1+0x20e9+0x13*-0x213)));this['_aabbDirty']=!(-0x22ce+0x3d9+0x1ef6);}return this['_aabb'];}set['outlineCol'+'or'](_0x376992){const _0x34ecd6=_0x376992 instanceof ie?_0x376992['r']:_0x376992[-0x19*0x149+0x1*0x1ddb+0x246*0x1],_0x3cb7e1=_0x376992 instanceof ie?_0x376992['g']:_0x376992[0xbc6+-0x26cc+0x1b07],_0x5c34ff=_0x376992 instanceof ie?_0x376992['b']:_0x376992[0x13*0x185+0x5bf*0x1+-0x229c],_0x3e2d37=_0x376992 instanceof ie?_0x376992['a']:_0x376992[-0xa9*0x3+0x200a+-0x1e0c];if(this['_outlineCo'+'lor']===_0x376992&&console['warn']('Setting\x20el'+'ement.outl'+'ineColor\x20t'+'o\x20itself\x20w'+'ill\x20have\x20n'+'o\x20effect'),!(this['_outlineCo'+'lor']['r']===_0x34ecd6&&this['_outlineCo'+'lor']['g']===_0x3cb7e1&&this['_outlineCo'+'lor']['b']===_0x5c34ff&&this['_outlineCo'+'lor']['a']===_0x3e2d37)&&(this['_outlineCo'+'lor']['r']=_0x34ecd6,this['_outlineCo'+'lor']['g']=_0x3cb7e1,this['_outlineCo'+'lor']['b']=_0x5c34ff,this['_outlineCo'+'lor']['a']=_0x3e2d37,!!this['_model'])){if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][-0x12d1*0x1+-0x1*-0xeb9+0x418]=We['r'],this['_outlineCo'+'lorUniform'][0xd32+-0x9d0+-0x361*0x1]=We['g'],this['_outlineCo'+'lorUniform'][0xcae+-0x1b94*0x1+0xee8]=We['b'],this['_outlineCo'+'lorUniform'][0x13c1*0x1+0x17*-0xe6+0x2*0x76]=We['a'];for(let _0x452e33=-0x22be+-0x1f*0x49+-0x2b95*-0x1,_0x29e05f=this['_model']['meshInstan'+'ces']['length'];_0x452e33<_0x29e05f;_0x452e33++)this['_model']['meshInstan'+'ces'][_0x452e33]['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']);}this['_element']&&this['_element']['fire']('set:outlin'+'e',this['_color']);}}get['outlineCol'+'or'](){return this['_outlineCo'+'lor'];}set['outlineThi'+'ckness'](_0x289dc9){const _0x4b0c98=this['_outlineTh'+'ickness'];if(this['_outlineTh'+'ickness']=_0x289dc9,_0x4b0c98!==_0x289dc9&&this['_font']){if(!this['_model'])return;if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{for(let _0x291572=0x1041+0xf5*-0x7+0x98e*-0x1,_0x1f3d75=this['_model']['meshInstan'+'ces']['length'];_0x291572<_0x1f3d75;_0x291572++)this['_model']['meshInstan'+'ces'][_0x291572]['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']);}}}get['outlineThi'+'ckness'](){return this['_outlineTh'+'ickness'];}set['shadowColo'+'r'](_0x35aa1a){const _0xa6600a=_0x35aa1a instanceof ie?_0x35aa1a['r']:_0x35aa1a[-0x22*0x3e+-0x2165+-0x1*-0x29a1],_0x50fb7c=_0x35aa1a instanceof ie?_0x35aa1a['g']:_0x35aa1a[0xc8d*-0x3+-0xe9f+0x3447],_0x42954e=_0x35aa1a instanceof ie?_0x35aa1a['b']:_0x35aa1a[-0x9*-0x25f+0x3*0x880+0x277*-0x13],_0x75614c=_0x35aa1a instanceof ie?_0x35aa1a['a']:_0x35aa1a[-0x1c9+0x13*-0xf2+-0x34b*-0x6];if(this['_shadowCol'+'or']===_0x35aa1a&&w['warn']('Setting\x20el'+'ement.shad'+'owColor\x20to'+'\x20itself\x20wi'+'ll\x20have\x20no'+'\x20effect'),!(this['_shadowCol'+'or']['r']===_0xa6600a&&this['_shadowCol'+'or']['g']===_0x50fb7c&&this['_shadowCol'+'or']['b']===_0x42954e&&this['_shadowCol'+'or']['a']===_0x75614c)&&(this['_shadowCol'+'or']['r']=_0xa6600a,this['_shadowCol'+'or']['g']=_0x50fb7c,this['_shadowCol'+'or']['b']=_0x42954e,this['_shadowCol'+'or']['a']=_0x75614c,!!this['_model'])){if(this['_symbolSha'+'dowParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][-0x1*-0x1f33+0x8e1*-0x1+-0x1652]=We['r'],this['_shadowCol'+'orUniform'][-0x5c3+0x24d3+0x1*-0x1f0f]=We['g'],this['_shadowCol'+'orUniform'][0x1*0x1b62+0x1*0x1e2e+0x1*-0x398e]=We['b'],this['_shadowCol'+'orUniform'][-0x1*0x760+-0x64e+0xdb1]=We['a'];for(let _0x5dc904=-0xacb+0x90a+0x1c1,_0x47901=this['_model']['meshInstan'+'ces']['length'];_0x5dc904<_0x47901;_0x5dc904++)this['_model']['meshInstan'+'ces'][_0x5dc904]['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']);}}}get['shadowColo'+'r'](){return this['_shadowCol'+'or'];}set['shadowOffs'+'et'](_0x489bfc){const _0x1d1a72=_0x489bfc instanceof J?_0x489bfc['x']:_0x489bfc[-0x7*0x17+0xc*-0x1f4+-0x3d*-0x65],_0xa715ba=_0x489bfc instanceof J?_0x489bfc['y']:_0x489bfc[-0x1d*-0x11+0x6*0x122+-0x8b8];if(!(this['_shadowOff'+'set']['x']===_0x1d1a72&&this['_shadowOff'+'set']['y']===_0xa715ba)&&(this['_shadowOff'+'set']['set'](_0x1d1a72,_0xa715ba),this['_font']&&this['_model'])){if(this['_symbolSha'+'dowParams'])this['_updateTex'+'t']();else for(let _0x5f1b01=0x197*0x1+0x1c24+0x81*-0x3b,_0x4bf04f=this['_model']['meshInstan'+'ces']['length'];_0x5f1b01<_0x4bf04f;_0x5f1b01++){const _0x181c1e=-this['_font']['data']['info']['maps'][_0x5f1b01]['width']/this['_font']['data']['info']['maps'][_0x5f1b01]['height'];this['_shadowOff'+'setUniform'][0x1e6f+-0x9*-0x1db+-0x2f22]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x7be+0x163e+-0xe7f]=_0x181c1e*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'],this['_model']['meshInstan'+'ces'][_0x5f1b01]['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']);}}}get['shadowOffs'+'et'](){return this['_shadowOff'+'set'];}set['minFontSiz'+'e'](_0x38d495){this['_minFontSi'+'ze']!==_0x38d495&&(this['_minFontSi'+'ze']=_0x38d495,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['minFontSiz'+'e'](){return this['_minFontSi'+'ze'];}set['maxFontSiz'+'e'](_0x10ecd3){this['_maxFontSi'+'ze']!==_0x10ecd3&&(this['_maxFontSi'+'ze']=_0x10ecd3,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['maxFontSiz'+'e'](){return this['_maxFontSi'+'ze'];}set['autoFitWid'+'th'](_0x2485c5){this['_autoFitWi'+'dth']!==_0x2485c5&&(this['_autoFitWi'+'dth']=_0x2485c5,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitWid'+'th'](){return this['_autoFitWi'+'dth'];}set['autoFitHei'+'ght'](_0x2e70cc){this['_autoFitHe'+'ight']!==_0x2e70cc&&(this['_autoFitHe'+'ight']=_0x2e70cc,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitHei'+'ght'](){return this['_autoFitHe'+'ight'];}set['maxLines'](_0x503078){this['_maxLines']!==_0x503078&&(_0x503078===null&&this['_maxLines']===-(0x15fe+0x17f*0xd+0x1ba*-0x18)||(this['_maxLines']=_0x503078===null?-(0x1314+0xb71+-0xd9*0x24):_0x503078,this['font']&&this['_wrapLines']&&this['_updateTex'+'t']()));}get['maxLines'](){return this['_maxLines'];}set['enableMark'+'up'](_0x39a8be){if(_0x39a8be=!!_0x39a8be,this['_enableMar'+'kup']===_0x39a8be)return;this['_enableMar'+'kup']=_0x39a8be,this['font']&&this['_updateTex'+'t']();const _0xe43aa2=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0xe43aa2);}get['enableMark'+'up'](){return this['_enableMar'+'kup'];}get['symbols'](){return this['_symbols'];}get['symbolColo'+'rs'](){return this['_symbolCol'+'ors']===null?null:this['_symbolCol'+'ors']['map'](function(_0x35dfa6){return this['_colorPale'+'tte']['slice'](_0x35dfa6*(0xab7+-0x951+-0x47*0x5),_0x35dfa6*(0xd65+-0x49*-0x5+-0xecf)+(0x18a2+0x1fb9+-0x4*0xe16));},this);}get['symbolOutl'+'ineParams'](){return this['_symbolOut'+'lineParams']===null?null:this['_symbolOut'+'lineParams']['map'](function(_0x530c05){return this['_outlinePa'+'lette']['slice'](_0x530c05*(0x23aa+-0x5*0x7b9+-0x5f*-0x8),_0x530c05*(-0x45*-0x73+-0x9e5*0x1+0x101*-0x15)+(0x7*0x313+0x841+-0x1dc1));},this);}get['symbolShad'+'owParams'](){return this['_symbolSha'+'dowParams']===null?null:this['_symbolSha'+'dowParams']['map'](function(_0x2afe06){return this['_shadowPal'+'ette']['slice'](_0x2afe06*(0x6*-0x51b+-0x1*0x27e+0x2126),_0x2afe06*(-0x37*0x5+-0x1047+-0x8*-0x22c)+(-0x1626+-0xf73+0x1*0x259f));},this);}get['rtl'](){return this['_rtl'];}set['rangeStart'](_0x55483b){_0x55483b=Math['max'](-0x14e2+0x1277*-0x2+0x1ce8*0x2,Math['min'](_0x55483b,this['_symbols']['length'])),_0x55483b!==this['_rangeStar'+'t']&&(this['_rangeStar'+'t']=_0x55483b,this['_updateRen'+'derRange']());}get['rangeStart'](){return this['_rangeStar'+'t'];}set['rangeEnd'](_0x96f780){_0x96f780=Math['max'](this['_rangeStar'+'t'],Math['min'](_0x96f780,this['_symbols']['length'])),_0x96f780!==this['_rangeEnd']&&(this['_rangeEnd']=_0x96f780,this['_updateRen'+'derRange']());}get['rangeEnd'](){return this['_rangeEnd'];}}const tf=new D(),Tg=new te(),Pi=new D(),qL=new D(),ws=new te(),dc=new te(),fc=new te(),za=new te();class hs extends we{constructor(_0x4cee29,_0xaa99ca){super(_0x4cee29,_0xaa99ca),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_beingInit'+'ialized']=!(-0xbbf+-0x95*0x41+-0x1*-0x3195),this['_anchor']=new re(),this['_localAnch'+'or']=new re(),this['_pivot']=new J(),this['_width']=this['_calculate'+'dWidth']=-0x2553+-0x15f1+-0x16a*-0x2a,this['_height']=this['_calculate'+'dHeight']=0x7ee+0x15a7+-0x1d75*0x1,this['_margin']=new re(-0x6bf+-0x1d36+0x23f5,-0x12ab*-0x1+-0x7ae+-0xafd,-(-0xbfe*-0x2+-0x3d*-0x41+-0x2759),-(0x2*0x39e+0x97c*0x1+-0x1098)),this['_modelTran'+'sform']=new te(),this['_screenToW'+'orld']=new te(),this['_anchorTra'+'nsform']=new te(),this['_anchorDir'+'ty']=!(-0x10da+-0x2233*0x1+0x330d),this['_parentWor'+'ldTransfor'+'m']=new te(),this['_screenTra'+'nsform']=new te(),this['_screenCor'+'ners']=[new D(),new D(),new D(),new D()],this['_canvasCor'+'ners']=[new J(),new J(),new J(),new J()],this['_worldCorn'+'ers']=[new D(),new D(),new D(),new D()],this['_cornersDi'+'rty']=!(-0x25c+-0x1*0x437+0x693),this['_canvasCor'+'nersDirty']=!(-0x95*0x37+0x1e2+0x1e21),this['_worldCorn'+'ersDirty']=!(-0x177*-0x1+0x27d+-0x3f4),this['entity']['on']('insert',this['_onInsert'],this),this['_patch'](),this['screen']=null,this['_type']=Lc,this['_image']=null,this['_text']=null,this['_group']=null,this['_drawOrder']=0x1024+0xa98*-0x2+0x50c,this['_fitMode']=Rc,this['_useInput']=!(0x2069*-0x1+-0x29*0x40+-0x56*-0x7f),this['_layers']=[Sl],this['_addedMode'+'ls']=[],this['_batchGrou'+'pId']=-(0x469+-0x20*0xad+0x1138),this['_batchGrou'+'p']=null,this['_offsetRea'+'dAt']=0xcc8+-0x11a1+0x4d9,this['_maskOffse'+'t']=-0x1*-0x2389+0x1*-0xf5b+0x12*-0x11f+0.5,this['_maskedBy']=null);}get['data'](){const _0x5bf835=this['system']['store'][this['entity']['getGuid']()];return _0x5bf835?_0x5bf835['data']:null;}set['enabled'](_0x21c36f){const _0x171b00=this['data'],_0x2f8775=_0x171b00['enabled'];_0x171b00['enabled']=_0x21c36f,this['fire']('set','enabled',_0x2f8775,_0x21c36f);}get['enabled'](){return this['data']['enabled'];}get['_absLeft'](){return this['_localAnch'+'or']['x']+this['_margin']['x'];}get['_absRight'](){return this['_localAnch'+'or']['z']-this['_margin']['z'];}get['_absTop'](){return this['_localAnch'+'or']['w']-this['_margin']['w'];}get['_absBottom'](){return this['_localAnch'+'or']['y']+this['_margin']['y'];}get['_hasSplitA'+'nchorsX'](){return Math['abs'](this['_anchor']['x']-this['_anchor']['z'])>0x2510*-0x1+0x2*0x959+0x2*0x92f+0.001;}get['_hasSplitA'+'nchorsY'](){return Math['abs'](this['_anchor']['y']-this['_anchor']['w'])>0x4c*0x5e+-0x1*0xd7f+0x7*-0x20f+0.001;}get['aabb'](){return this['_image']?this['_image']['aabb']:this['_text']?this['_text']['aabb']:null;}set['anchor'](_0x290170){_0x290170 instanceof re?this['_anchor']['copy'](_0x290170):this['_anchor']['set'](..._0x290170),!this['entity']['_parent']&&!this['screen']?this['_calculate'+'LocalAncho'+'rs']():this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['_anchorDir'+'ty']=!(0xb61*-0x3+0x1*0x1751+0xad2),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:anchor',this['_anchor']);}get['anchor'](){return this['_anchor'];}set['batchGroup'+'Id'](_0x275e18){var _0x36db7f,_0x3ea924;this['_batchGrou'+'pId']!==_0x275e18&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0x223*-0xb+-0x2ec*0x3+-0xebd&&((_0x36db7f=this['system']['app']['batcher'])==null||_0x36db7f['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x275e18>=-0x24d9+0x9ca+0x3*0x905&&((_0x3ea924=this['system']['app']['batcher'])==null||_0x3ea924['insert'](St['ELEMENT'],_0x275e18,this['entity'])),_0x275e18<0x8*0xca+-0x1c68+-0x1c*-0xca&&this['_batchGrou'+'pId']>=0xce2+-0xd*-0x1fb+-0x26a1&&this['enabled']&&this['entity']['enabled']&&(this['_image']&&this['_image']['_renderabl'+'e']['model']?this['addModelTo'+'Layers'](this['_image']['_renderabl'+'e']['model']):this['_text']&&this['_text']['_model']&&this['addModelTo'+'Layers'](this['_text']['_model'])),this['_batchGrou'+'pId']=_0x275e18);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['bottom'](_0x50e4fb){this['_margin']['y']=_0x50e4fb;const _0x28a754=this['entity']['getLocalPo'+'sition'](),_0x258582=this['_absTop'],_0x5a5037=this['_localAnch'+'or']['y']+_0x50e4fb;this['_setHeight'](_0x258582-_0x5a5037),_0x28a754['y']=_0x50e4fb+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x28a754);}get['bottom'](){return this['_margin']['y'];}set['calculated'+'Width'](_0x478ead){this['_setCalcul'+'atedWidth'](_0x478ead,!(-0xb10+0x2242+-0x1*0x1732));}get['calculated'+'Width'](){return this['_calculate'+'dWidth'];}set['calculated'+'Height'](_0x3e3e30){this['_setCalcul'+'atedHeight'](_0x3e3e30,!(-0x18d6+-0x1*0x2036+0x2*0x1c86));}get['calculated'+'Height'](){return this['_calculate'+'dHeight'];}get['canvasCorn'+'ers'](){if(!this['_canvasCor'+'nersDirty']||!this['screen']||!this['screen']['screen']['screenSpac'+'e'])return this['_canvasCor'+'ners'];const _0x330998=this['system']['app']['graphicsDe'+'vice'],_0x18af3a=this['screenCorn'+'ers'],_0x2c1119=_0x330998['canvas']['clientWidt'+'h']/_0x330998['width'],_0xb0afc1=_0x330998['canvas']['clientHeig'+'ht']/_0x330998['height'];for(let _0x4f48d5=0x2f*-0x7d+0x260d+-0xf1a;_0x4f48d5<-0x151*-0x11+0x93*-0x3+-0x14a4;_0x4f48d5++)this['_canvasCor'+'ners'][_0x4f48d5]['set'](_0x18af3a[_0x4f48d5]['x']*_0x2c1119,(_0x330998['height']-_0x18af3a[_0x4f48d5]['y'])*_0xb0afc1);return this['_canvasCor'+'nersDirty']=!(0x30*0x82+-0x2ae+-0x1*0x15b1),this['_canvasCor'+'ners'];}set['drawOrder'](_0x1ff70e){let _0x266a86=0x202+-0x17c*-0x5+-0x1*0x96e;this['screen']&&(_0x266a86=this['screen']['screen']['priority']),_0x1ff70e>0x1*-0xe45965+-0x1dfe624+0xda*0x46c54&&(w['warn']('Element.dr'+'awOrder\x20la'+'rger\x20than\x20'+'max\x20size\x20o'+'f:\x201677721'+'5'),_0x1ff70e=0x2*0x891cbf+-0x7ca*-0x1f7b+0x1b45*-0x9a9),this['_drawOrder']=(_0x266a86<<0x9d1+0x35*0x2b+-0x12a0)+_0x1ff70e,this['fire']('set:drawor'+'der',this['_drawOrder']);}get['drawOrder'](){return this['_drawOrder'];}set['height'](_0x42a08b){this['_height']=_0x42a08b,this['_hasSplitA'+'nchorsY']||this['_setCalcul'+'atedHeight'](_0x42a08b,!(0x11ce+-0x1fef+-0xe21*-0x1)),this['fire']('set:height',this['_height']);}get['height'](){return this['_height'];}set['layers'](_0x2209b3){if(this['_addedMode'+'ls']['length'])for(let _0x4f181a=0x1*-0x683+0xadc+-0x459;_0x4f181a<this['_layers']['length'];_0x4f181a++){const _0x570d6e=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x4f181a]);if(_0x570d6e){for(let _0x4f5e9e=-0x305*-0xb+-0x3c7*-0x5+-0x341a;_0x4f5e9e<this['_addedMode'+'ls']['length'];_0x4f5e9e++)_0x570d6e['removeMesh'+'Instances'](this['_addedMode'+'ls'][_0x4f5e9e]['meshInstan'+'ces']);}}if(this['_layers']=_0x2209b3,!(!this['enabled']||!this['entity']['enabled']||!this['_addedMode'+'ls']['length']))for(let _0x47a1ba=-0x14f0+-0x4*-0x5a1+-0x194;_0x47a1ba<this['_layers']['length'];_0x47a1ba++){const _0x120adf=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x47a1ba]);if(_0x120adf){for(let _0x24de91=-0x10b5*-0x2+-0x11*-0x2b+-0x2445*0x1;_0x24de91<this['_addedMode'+'ls']['length'];_0x24de91++)_0x120adf['addMeshIns'+'tances'](this['_addedMode'+'ls'][_0x24de91]['meshInstan'+'ces']);}}}get['layers'](){return this['_layers'];}set['left'](_0xcffed3){this['_margin']['x']=_0xcffed3;const _0xe04066=this['entity']['getLocalPo'+'sition'](),_0x2fea6c=this['_absRight'],_0x2c76d7=this['_localAnch'+'or']['x']+_0xcffed3;this['_setWidth'](_0x2fea6c-_0x2c76d7),_0xe04066['x']=_0xcffed3+this['_calculate'+'dWidth']*this['_pivot']['x'],this['entity']['setLocalPo'+'sition'](_0xe04066);}get['left'](){return this['_margin']['x'];}set['margin'](_0x3baa31){this['_margin']['copy'](_0x3baa31),this['_calculate'+'Size'](!(0xe1b+0x6b7+-0x14d2),!(-0x6a*-0x47+-0x1cb7+0x19*-0x7)),this['fire']('set:margin',this['_margin']);}get['margin'](){return this['_margin'];}get['maskedBy'](){return this['_maskedBy'];}set['pivot'](_0x5f413f){const {pivot:_0x289134,margin:_0x1580c9}=this,_0x38255b=_0x289134['x'],_0x51b47a=_0x289134['y'];_0x5f413f instanceof J?_0x289134['copy'](_0x5f413f):_0x289134['set'](..._0x5f413f);const _0x2fe44d=_0x1580c9['x']+_0x1580c9['z'],_0x30a440=_0x289134['x']-_0x38255b;_0x1580c9['x']+=_0x2fe44d*_0x30a440,_0x1580c9['z']-=_0x2fe44d*_0x30a440;const _0x2ee89c=_0x1580c9['y']+_0x1580c9['w'],_0x246092=_0x289134['y']-_0x51b47a;_0x1580c9['y']+=_0x2ee89c*_0x246092,_0x1580c9['w']-=_0x2ee89c*_0x246092,this['_anchorDir'+'ty']=!(0xab*0x2f+-0x2000+0x9b),this['_cornersDi'+'rty']=!(-0x135b+0x2*0x4f+0x12bd),this['_worldCorn'+'ersDirty']=!(0x7f1+-0x1f2e+0x173d*0x1),this['_calculate'+'Size'](!(0x939*-0x2+-0xe91+0x2104),!(0x1975+-0x4f*0x4e+0x6*-0x3b)),this['_flagChild'+'renAsDirty'](),this['fire']('set:pivot',_0x289134);}get['pivot'](){return this['_pivot'];}set['right'](_0x3f1cc1){this['_margin']['z']=_0x3f1cc1;const _0x26bfbb=this['entity']['getLocalPo'+'sition'](),_0x526f59=this['_absLeft'],_0x445b9a=this['_localAnch'+'or']['z']-_0x3f1cc1;this['_setWidth'](_0x445b9a-_0x526f59),_0x26bfbb['x']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-_0x3f1cc1-this['_calculate'+'dWidth']*(-0x117a*-0x2+-0x1319+-0x1*0xfda-this['_pivot']['x']),this['entity']['setLocalPo'+'sition'](_0x26bfbb);}get['right'](){return this['_margin']['z'];}get['screenCorn'+'ers'](){if(!this['_cornersDi'+'rty']||!this['screen'])return this['_screenCor'+'ners'];const _0x1f9208=this['entity']['parent']&&this['entity']['parent']['element']&&this['entity']['parent']['element']['screenCorn'+'ers'][-0x76*0x11+0x1*0x1ccc+0x2*-0xa7b];this['_screenCor'+'ners'][-0x14c9+0xee*-0x23+0x11*0x323]['set'](this['_absLeft'],this['_absBottom'],0x15ec+0x89a+-0x1*0x1e86),this['_screenCor'+'ners'][-0x9a4+-0x2420+-0x1*-0x2dc5]['set'](this['_absRight'],this['_absBottom'],0x5ed*0x1+-0x18b6+-0x12c9*-0x1),this['_screenCor'+'ners'][0x2*0xad2+0x1155+-0x26f7]['set'](this['_absRight'],this['_absTop'],-0xa3e+-0x12d6+0x1d14),this['_screenCor'+'ners'][-0x1c77+-0x2*-0x126a+-0x2*0x42d]['set'](this['_absLeft'],this['_absTop'],-0x612*-0x5+-0x1fa6+0x14c);const _0x34ea57=this['screen']['screen']['screenSpac'+'e'];for(let _0x3efea1=-0x1*0xf1f+0x123+0xdfc;_0x3efea1<-0x2*-0xc7+-0xf11+-0xd87*-0x1;_0x3efea1++)this['_screenTra'+'nsform']['transformP'+'oint'](this['_screenCor'+'ners'][_0x3efea1],this['_screenCor'+'ners'][_0x3efea1]),_0x34ea57&&this['_screenCor'+'ners'][_0x3efea1]['mulScalar'](this['screen']['screen']['scale']),_0x1f9208&&this['_screenCor'+'ners'][_0x3efea1]['add'](_0x1f9208);return this['_cornersDi'+'rty']=!(-0x1e4c+0x1*0x80c+0x1641),this['_canvasCor'+'nersDirty']=!(0x901+-0x3c*0x6a+0x1*0xfd7),this['_worldCorn'+'ersDirty']=!(0xe17+0x207+0x2*-0x80f),this['_screenCor'+'ners'];}get['textWidth'](){return this['_text']?this['_text']['width']:0x1e5a+0xdb1*0x1+-0x2c0b;}get['textHeight'](){return this['_text']?this['_text']['height']:-0x2675+0x78f+0x1ee6;}set['top'](_0x2f091d){this['_margin']['w']=_0x2f091d;const _0x3ee245=this['entity']['getLocalPo'+'sition'](),_0x515f0e=this['_absBottom'],_0x35a9d5=this['_localAnch'+'or']['w']-_0x2f091d;this['_setHeight'](_0x35a9d5-_0x515f0e),_0x3ee245['y']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-_0x2f091d-this['_calculate'+'dHeight']*(0x1*-0x19ac+0xd38+0xc75-this['_pivot']['y']),this['entity']['setLocalPo'+'sition'](_0x3ee245);}get['top'](){return this['_margin']['w'];}set['type'](_0x37ff7c){_0x37ff7c!==this['_type']&&(this['_type']=_0x37ff7c,this['_image']&&(this['_image']['destroy'](),this['_image']=null),this['_text']&&(this['_text']['destroy'](),this['_text']=null),_0x37ff7c===tu?this['_image']=new CL(this):_0x37ff7c===fv&&(this['_text']=new XL(this)));}get['type'](){return this['_type'];}set['useInput'](_0x3a0089){this['_useInput']!==_0x3a0089&&(this['_useInput']=_0x3a0089,this['system']['app']['elementInp'+'ut']?_0x3a0089?this['enabled']&&this['entity']['enabled']&&this['system']['app']['elementInp'+'ut']['addElement'](this):this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this):this['_useInput']===!(-0x1817+-0x400*-0x3+0xc17)&&w['warn']('Elements\x20w'+'ill\x20not\x20ge'+'t\x20any\x20inpu'+'t\x20events\x20b'+'ecause\x20thi'+'s.system.a'+'pp.element'+'Input\x20is\x20n'+'ot\x20created'),this['fire']('set:useInp'+'ut',_0x3a0089));}get['useInput'](){return this['_useInput'];}set['fitMode'](_0xc104a1){this['_fitMode']=_0xc104a1,this['_calculate'+'Size'](!(-0x9b1*-0x3+-0x1e*-0x57+-0x2745),!(0x2ea*-0x7+0x1*-0x11e5+0x264b)),this['_image']&&this['_image']['refreshMes'+'h']();}get['fitMode'](){return this['_fitMode'];}set['width'](_0x26c323){this['_width']=_0x26c323,this['_hasSplitA'+'nchorsX']||this['_setCalcul'+'atedWidth'](_0x26c323,!(-0x6a*-0x3f+-0x2*-0x608+-0x2626)),this['fire']('set:width',this['_width']);}get['width'](){return this['_width'];}get['worldCorne'+'rs'](){if(!this['_worldCorn'+'ersDirty'])return this['_worldCorn'+'ers'];if(this['screen']){const _0x1bb08a=this['screenCorn'+'ers'];if(!this['screen']['screen']['screenSpac'+'e']){ws['copy'](this['screen']['screen']['_screenMat'+'rix']),ws['data'][-0x11*0x163+-0x6c7*-0x5+-0xa43]=-ws['data'][-0x18db+-0xa5*-0x2f+0x1*-0x563],ws['mul2'](this['screen']['getWorldTr'+'ansform'](),ws);for(let _0x1d90a5=0x1341+0x1fde*-0x1+0xc9d;_0x1d90a5<-0x10f*-0x13+0x30b*-0x6+-0x1d7;_0x1d90a5++)ws['transformP'+'oint'](_0x1bb08a[_0x1d90a5],this['_worldCorn'+'ers'][_0x1d90a5]);}}else{const _0x57aa86=this['entity']['getLocalPo'+'sition']();ws['setTransla'+'te'](-_0x57aa86['x'],-_0x57aa86['y'],-_0x57aa86['z']),dc['setTRS'](D['ZERO'],this['entity']['getLocalRo'+'tation'](),this['entity']['getLocalSc'+'ale']()),fc['setTransla'+'te'](_0x57aa86['x'],_0x57aa86['y'],_0x57aa86['z']);const _0x15a71a=this['entity']['parent']?this['entity']['parent']:this['entity'];za['copy'](_0x15a71a['getWorldTr'+'ansform']()),za['mul'](fc)['mul'](dc)['mul'](ws),Pi['set'](_0x57aa86['x']-this['pivot']['x']*this['calculated'+'Width'],_0x57aa86['y']-this['pivot']['y']*this['calculated'+'Height'],_0x57aa86['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0xc*0x11+-0x1553+0x161f]),Pi['set'](_0x57aa86['x']+(0x59d+-0x1*-0x1049+-0x15e5-this['pivot']['x'])*this['calculated'+'Width'],_0x57aa86['y']-this['pivot']['y']*this['calculated'+'Height'],_0x57aa86['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x1*-0xbc8+-0x18a0+0x2469]),Pi['set'](_0x57aa86['x']+(-0xbb6+0x8f*-0x31+0x2716-this['pivot']['x'])*this['calculated'+'Width'],_0x57aa86['y']+(0x16b0+-0x4*0xb+-0x1683-this['pivot']['y'])*this['calculated'+'Height'],_0x57aa86['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x1d13+-0x103+0x1e18]),Pi['set'](_0x57aa86['x']-this['pivot']['x']*this['calculated'+'Width'],_0x57aa86['y']+(-0x4d5*-0x8+0x20df+-0xe4e*0x5-this['pivot']['y'])*this['calculated'+'Height'],_0x57aa86['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x116f+-0x1*0x26c3+0x25f*0x9]);}return this['_worldCorn'+'ersDirty']=!(0xb14*0x2+0x1467+-0x2a8e),this['_worldCorn'+'ers'];}set['fontSize'](_0x4cd1c0){this['_setValue']('fontSize',_0x4cd1c0);}get['fontSize'](){return this['_text']?this['_text']['fontSize']:null;}set['minFontSiz'+'e'](_0x116b4b){this['_setValue']('minFontSiz'+'e',_0x116b4b);}get['minFontSiz'+'e'](){return this['_text']?this['_text']['minFontSiz'+'e']:null;}set['maxFontSiz'+'e'](_0x349ad5){this['_setValue']('maxFontSiz'+'e',_0x349ad5);}get['maxFontSiz'+'e'](){return this['_text']?this['_text']['maxFontSiz'+'e']:null;}set['maxLines'](_0x46e37e){this['_setValue']('maxLines',_0x46e37e);}get['maxLines'](){return this['_text']?this['_text']['maxLines']:null;}set['autoFitWid'+'th'](_0x2db8e6){this['_setValue']('autoFitWid'+'th',_0x2db8e6);}get['autoFitWid'+'th'](){return this['_text']?this['_text']['autoFitWid'+'th']:null;}set['autoFitHei'+'ght'](_0x2cba01){this['_setValue']('autoFitHei'+'ght',_0x2cba01);}get['autoFitHei'+'ght'](){return this['_text']?this['_text']['autoFitHei'+'ght']:null;}set['color'](_0x3e786c){this['_setValue']('color',_0x3e786c);}get['color'](){return this['_text']?this['_text']['color']:this['_image']?this['_image']['color']:null;}set['font'](_0x266dab){this['_setValue']('font',_0x266dab);}get['font'](){return this['_text']?this['_text']['font']:null;}set['fontAsset'](_0x2492a5){this['_setValue']('fontAsset',_0x2492a5);}get['fontAsset'](){return this['_text']&&typeof this['_text']['fontAsset']=='number'?this['_text']['fontAsset']:null;}set['spacing'](_0x4ab1d6){this['_setValue']('spacing',_0x4ab1d6);}get['spacing'](){return this['_text']?this['_text']['spacing']:null;}set['lineHeight'](_0x37d0bd){this['_setValue']('lineHeight',_0x37d0bd);}get['lineHeight'](){return this['_text']?this['_text']['lineHeight']:null;}set['wrapLines'](_0x3480b8){this['_setValue']('wrapLines',_0x3480b8);}get['wrapLines'](){return this['_text']?this['_text']['wrapLines']:null;}set['lines'](_0x380207){this['_setValue']('lines',_0x380207);}get['lines'](){return this['_text']?this['_text']['lines']:null;}set['alignment'](_0x248260){this['_setValue']('alignment',_0x248260);}get['alignment'](){return this['_text']?this['_text']['alignment']:null;}set['autoWidth'](_0x563716){this['_setValue']('autoWidth',_0x563716);}get['autoWidth'](){return this['_text']?this['_text']['autoWidth']:null;}set['autoHeight'](_0x2e56ef){this['_setValue']('autoHeight',_0x2e56ef);}get['autoHeight'](){return this['_text']?this['_text']['autoHeight']:null;}set['rtlReorder'](_0x2e9e11){this['_setValue']('rtlReorder',_0x2e9e11);}get['rtlReorder'](){return this['_text']?this['_text']['rtlReorder']:null;}set['unicodeCon'+'verter'](_0x6486bc){this['_setValue']('unicodeCon'+'verter',_0x6486bc);}get['unicodeCon'+'verter'](){return this['_text']?this['_text']['unicodeCon'+'verter']:null;}set['text'](_0x3c31da){this['_setValue']('text',_0x3c31da);}get['text'](){return this['_text']?this['_text']['text']:null;}set['key'](_0x210f60){this['_setValue']('key',_0x210f60);}get['key'](){return this['_text']?this['_text']['key']:null;}set['texture'](_0x4c09f3){this['_setValue']('texture',_0x4c09f3);}get['texture'](){return this['_image']?this['_image']['texture']:null;}set['textureAss'+'et'](_0x54b363){this['_setValue']('textureAss'+'et',_0x54b363);}get['textureAss'+'et'](){return this['_image']?this['_image']['textureAss'+'et']:null;}set['material'](_0x54c21b){this['_setValue']('material',_0x54c21b);}get['material'](){return this['_image']?this['_image']['material']:null;}set['materialAs'+'set'](_0xb13e32){this['_setValue']('materialAs'+'set',_0xb13e32);}get['materialAs'+'set'](){return this['_image']?this['_image']['materialAs'+'set']:null;}set['sprite'](_0x4ef8e4){this['_setValue']('sprite',_0x4ef8e4);}get['sprite'](){return this['_image']?this['_image']['sprite']:null;}set['spriteAsse'+'t'](_0x1353a1){this['_setValue']('spriteAsse'+'t',_0x1353a1);}get['spriteAsse'+'t'](){return this['_image']?this['_image']['spriteAsse'+'t']:null;}set['spriteFram'+'e'](_0x24620a){this['_setValue']('spriteFram'+'e',_0x24620a);}get['spriteFram'+'e'](){return this['_image']?this['_image']['spriteFram'+'e']:null;}set['pixelsPerU'+'nit'](_0x4a71f9){this['_setValue']('pixelsPerU'+'nit',_0x4a71f9);}get['pixelsPerU'+'nit'](){return this['_image']?this['_image']['pixelsPerU'+'nit']:null;}set['opacity'](_0xec7c83){this['_setValue']('opacity',_0xec7c83);}get['opacity'](){return this['_text']?this['_text']['opacity']:this['_image']?this['_image']['opacity']:null;}set['rect'](_0x291e51){this['_setValue']('rect',_0x291e51);}get['rect'](){return this['_image']?this['_image']['rect']:null;}set['mask'](_0x3697ea){this['_setValue']('mask',_0x3697ea);}get['mask'](){return this['_image']?this['_image']['mask']:null;}set['outlineCol'+'or'](_0x8369ea){this['_setValue']('outlineCol'+'or',_0x8369ea);}get['outlineCol'+'or'](){return this['_text']?this['_text']['outlineCol'+'or']:null;}set['outlineThi'+'ckness'](_0x222b93){this['_setValue']('outlineThi'+'ckness',_0x222b93);}get['outlineThi'+'ckness'](){return this['_text']?this['_text']['outlineThi'+'ckness']:null;}set['shadowColo'+'r'](_0x3887f5){this['_setValue']('shadowColo'+'r',_0x3887f5);}get['shadowColo'+'r'](){return this['_text']?this['_text']['shadowColo'+'r']:null;}set['shadowOffs'+'et'](_0x593f08){this['_setValue']('shadowOffs'+'et',_0x593f08);}get['shadowOffs'+'et'](){return this['_text']?this['_text']['shadowOffs'+'et']:null;}set['enableMark'+'up'](_0x41af09){this['_setValue']('enableMark'+'up',_0x41af09);}get['enableMark'+'up'](){return this['_text']?this['_text']['enableMark'+'up']:null;}set['rangeStart'](_0x3c9a20){this['_setValue']('rangeStart',_0x3c9a20);}get['rangeStart'](){return this['_text']?this['_text']['rangeStart']:null;}set['rangeEnd'](_0x1a8032){this['_setValue']('rangeEnd',_0x1a8032);}get['rangeEnd'](){return this['_text']?this['_text']['rangeEnd']:null;}['_setValue'](_0x2cd969,_0x480a4d){this['_text']?(this['_text'][_0x2cd969]!==_0x480a4d&&this['_dirtyBatc'+'h'](),this['_text'][_0x2cd969]=_0x480a4d):this['_image']&&(this['_image'][_0x2cd969]!==_0x480a4d&&this['_dirtyBatc'+'h'](),this['_image'][_0x2cd969]=_0x480a4d);}['_patch'](){this['entity']['_sync']=this['_sync'],this['entity']['setPositio'+'n']=this['_setPositi'+'on'],this['entity']['setLocalPo'+'sition']=this['_setLocalP'+'osition'];}['_unpatch'](){this['entity']['_sync']=lt['prototype']['_sync'],this['entity']['setPositio'+'n']=lt['prototype']['setPositio'+'n'],this['entity']['setLocalPo'+'sition']=lt['prototype']['setLocalPo'+'sition'];}['_setPositi'+'on'](_0x449c5a,_0x5931e4,_0x561ba2){if(!this['element']['screen']){lt['prototype']['setPositio'+'n']['call'](this,_0x449c5a,_0x5931e4,_0x561ba2);return;}_0x449c5a instanceof D?tf['copy'](_0x449c5a):tf['set'](_0x449c5a,_0x5931e4,_0x561ba2),this['getWorldTr'+'ansform'](),Tg['copy'](this['element']['_screenToW'+'orld'])['invert'](),Tg['transformP'+'oint'](tf,this['localPosit'+'ion']),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_setLocalP'+'osition'](_0x4d527d,_0x37645d,_0x5894eb){_0x4d527d instanceof D?this['localPosit'+'ion']['copy'](_0x4d527d):this['localPosit'+'ion']['set'](_0x4d527d,_0x37645d,_0x5894eb);const _0x518fdb=this['element'],_0x2d7f1a=this['localPosit'+'ion'],_0x199cee=_0x518fdb['_pivot'];_0x518fdb['_margin']['x']=_0x2d7f1a['x']-_0x518fdb['_calculate'+'dWidth']*_0x199cee['x'],_0x518fdb['_margin']['z']=_0x518fdb['_localAnch'+'or']['z']-_0x518fdb['_localAnch'+'or']['x']-_0x518fdb['_calculate'+'dWidth']-_0x518fdb['_margin']['x'],_0x518fdb['_margin']['y']=_0x2d7f1a['y']-_0x518fdb['_calculate'+'dHeight']*_0x199cee['y'],_0x518fdb['_margin']['w']=_0x518fdb['_localAnch'+'or']['w']-_0x518fdb['_localAnch'+'or']['y']-_0x518fdb['_calculate'+'dHeight']-_0x518fdb['_margin']['y'],this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_sync'](){const _0xe9738f=this['element'],_0x23f5ff=_0xe9738f['screen'];if(_0x23f5ff){if(_0xe9738f['_anchorDir'+'ty']){let _0x3bb55e=0x8*-0x359+0x3b9+-0x170f*-0x1,_0x287faa=0x83*0x2f+0x14f1+-0x2cfe*0x1,_0x297fa8=-0x1*0xd45+0x60*-0x35+0x6a1*0x5,_0x48a7d2=-0x21b7+-0x1b*0x11c+0x3fac;if(this['_parent']&&this['_parent']['element'])_0x3bb55e=this['_parent']['element']['calculated'+'Width'],_0x287faa=this['_parent']['element']['calculated'+'Height'],_0x297fa8=this['_parent']['element']['pivot']['x'],_0x48a7d2=this['_parent']['element']['pivot']['y'];else{const _0x5bac20=_0x23f5ff['screen']['resolution'];_0x3bb55e=_0x5bac20['x']/_0x23f5ff['screen']['scale'],_0x287faa=_0x5bac20['y']/_0x23f5ff['screen']['scale'];}_0xe9738f['_anchorTra'+'nsform']['setTransla'+'te'](_0x3bb55e*(_0xe9738f['anchor']['x']-_0x297fa8),-(_0x287faa*(_0x48a7d2-_0xe9738f['anchor']['y'])),0x8af+0x146f+-0x1d1e),_0xe9738f['_anchorDir'+'ty']=!(-0x1*0x1522+-0xf6f+0x2492),_0xe9738f['_calculate'+'LocalAncho'+'rs']();}_0xe9738f['_sizeDirty']&&_0xe9738f['_calculate'+'Size'](!(0x1*0x9d1+0x29+0x353*-0x3),!(-0x48c+0x9b4+-0x527));}if(this['_dirtyLoca'+'l']){this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']);const _0x20dac0=this['localPosit'+'ion'],_0x2f2ce6=_0xe9738f['_pivot'];_0xe9738f['_margin']['x']=_0x20dac0['x']-_0xe9738f['_calculate'+'dWidth']*_0x2f2ce6['x'],_0xe9738f['_margin']['z']=_0xe9738f['_localAnch'+'or']['z']-_0xe9738f['_localAnch'+'or']['x']-_0xe9738f['_calculate'+'dWidth']-_0xe9738f['_margin']['x'],_0xe9738f['_margin']['y']=_0x20dac0['y']-_0xe9738f['_calculate'+'dHeight']*_0x2f2ce6['y'],_0xe9738f['_margin']['w']=_0xe9738f['_localAnch'+'or']['w']-_0xe9738f['_localAnch'+'or']['y']-_0xe9738f['_calculate'+'dHeight']-_0xe9738f['_margin']['y'],this['_dirtyLoca'+'l']=!(0x2*-0x1335+0x16bb+0x10*0xfb);}if(!_0x23f5ff){this['_dirtyWorl'+'d']&&(_0xe9738f['_cornersDi'+'rty']=!(-0x1*0x15e9+-0x6*-0x5+0x15cb),_0xe9738f['_canvasCor'+'nersDirty']=!(-0x29b*-0x7+0xd*0x1be+-0x48b*0x9),_0xe9738f['_worldCorn'+'ersDirty']=!(0x98b+0x5*-0x79d+0x1c86)),lt['prototype']['_sync']['call'](this);return;}if(this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['_parent']['element']?_0xe9738f['_screenToW'+'orld']['mul2'](this['_parent']['element']['_modelTran'+'sform'],_0xe9738f['_anchorTra'+'nsform']):_0xe9738f['_screenToW'+'orld']['copy'](_0xe9738f['_anchorTra'+'nsform']),_0xe9738f['_modelTran'+'sform']['mul2'](_0xe9738f['_screenToW'+'orld'],this['localTrans'+'form']),_0x23f5ff){_0xe9738f['_screenToW'+'orld']['mul2'](_0x23f5ff['screen']['_screenMat'+'rix'],_0xe9738f['_screenToW'+'orld']),_0x23f5ff['screen']['screenSpac'+'e']||_0xe9738f['_screenToW'+'orld']['mul2'](_0x23f5ff['worldTrans'+'form'],_0xe9738f['_screenToW'+'orld']),this['worldTrans'+'form']['mul2'](_0xe9738f['_screenToW'+'orld'],this['localTrans'+'form']);const _0x704ae4=_0xe9738f['_parentWor'+'ldTransfor'+'m'];_0x704ae4['setIdentit'+'y']();const _0x209f1c=this['_parent'];_0x209f1c&&_0x209f1c['element']&&_0x209f1c!==_0x23f5ff&&(ws['setTRS'](D['ZERO'],_0x209f1c['getLocalRo'+'tation'](),_0x209f1c['getLocalSc'+'ale']()),_0x704ae4['mul2'](_0x209f1c['element']['_parentWor'+'ldTransfor'+'m'],ws));const _0x2b94d4=Pi;_0x2b94d4['set'](-0x196e+0x1a87*-0x1+0x11b*0x2f,-0xb*-0x305+0x1e28+-0x3f5f,this['localPosit'+'ion']['z']);const _0x362a19=qL;_0x362a19['set'](_0xe9738f['_absLeft']+_0xe9738f['_pivot']['x']*_0xe9738f['calculated'+'Width'],_0xe9738f['_absBottom']+_0xe9738f['_pivot']['y']*_0xe9738f['calculated'+'Height'],0x2442+-0x649*-0x1+-0x2a8b),ws['setTransla'+'te'](-_0x362a19['x'],-_0x362a19['y'],-_0x362a19['z']),dc['setTRS'](_0x2b94d4,this['getLocalRo'+'tation'](),this['getLocalSc'+'ale']()),fc['setTransla'+'te'](_0x362a19['x'],_0x362a19['y'],_0x362a19['z']),_0xe9738f['_screenTra'+'nsform']['mul2'](_0xe9738f['_parentWor'+'ldTransfor'+'m'],fc)['mul'](dc)['mul'](ws),_0xe9738f['_cornersDi'+'rty']=!(-0xbfc+0xfad+-0x3b1),_0xe9738f['_canvasCor'+'nersDirty']=!(0x167*0x10+0xe2*0x29+0xbe*-0x4f),_0xe9738f['_worldCorn'+'ersDirty']=!(0x24a9+0x1474+-0x391d);}else this['worldTrans'+'form']['copy'](_0xe9738f['_modelTran'+'sform']);}this['_dirtyWorl'+'d']=!(-0x2*0x17+0x8b6+-0x887);}}['_onInsert'](_0x3d904c){const _0x519a44=this['_parseUpTo'+'Screen']();this['entity']['_dirtifyWo'+'rld'](),this['_updateScr'+'een'](_0x519a44['screen']),this['_dirtifyMa'+'sk']();}['_dirtifyMa'+'sk'](){let _0x57fb44=this['entity'];for(;_0x57fb44;){const _0x54cd73=_0x57fb44['parent'];if((_0x54cd73===null||_0x54cd73['screen'])&&_0x57fb44['element']){(!this['system']['_prerender']||!this['system']['_prerender']['length'])&&(this['system']['_prerender']=[],this['system']['app']['once']('prerender',this['_onPrerend'+'er'],this),w['trace'](zs,'register\x20p'+'rerender'));const _0x395afc=this['system']['_prerender']['indexOf'](this['entity']);_0x395afc>=0xe94+-0x1bc0+0xd2c&&this['system']['_prerender']['splice'](_0x395afc,-0x1231+-0x1dda*0x1+0x300c),this['system']['_prerender']['indexOf'](_0x57fb44)<-0x1*0x1b37+0x1*0xed4+-0x3*-0x421&&this['system']['_prerender']['push'](_0x57fb44),w['trace'](zs,'set\x20preren'+'der\x20root\x20t'+'o:\x20'+_0x57fb44['name']);}_0x57fb44=_0x54cd73;}}['_onPrerend'+'er'](){for(let _0x1d3de8=0xdfd*0x1+-0x29*-0x6d+0x17*-0x15e;_0x1d3de8<this['system']['_prerender']['length'];_0x1d3de8++){const _0x2e6740=this['system']['_prerender'][_0x1d3de8];w['trace'](zs,'prerender\x20'+'from:\x20'+_0x2e6740['name']),_0x2e6740['element']&&_0x2e6740['element']['syncMask'](0x11*-0x1d7+-0xb65*0x1+0x2aad);}this['system']['_prerender']['length']=-0xf7c+0x6e6*-0x1+0x1662;}['_bindScree'+'n'](_0x5935ed){_0x5935ed['_bindEleme'+'nt'](this);}['_unbindScr'+'een'](_0x3bc581){_0x3bc581['_unbindEle'+'ment'](this);}['_updateScr'+'een'](_0xc6206b){this['screen']&&this['screen']!==_0xc6206b&&this['_unbindScr'+'een'](this['screen']['screen']);const _0x3a9df0=this['screen'];this['screen']=_0xc6206b,this['screen']&&this['_bindScree'+'n'](this['screen']['screen']),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('set:screen',this['screen'],_0x3a9df0),this['_anchorDir'+'ty']=!(0x17e*0x15+-0x263+-0x1cf3);const _0x1ca7bf=this['entity']['children'];for(let _0x58f4dd=-0x1583*0x1+-0x1afc+0x307f,_0xf11277=_0x1ca7bf['length'];_0x58f4dd<_0xf11277;_0x58f4dd++)_0x1ca7bf[_0x58f4dd]['element']&&_0x1ca7bf[_0x58f4dd]['element']['_updateScr'+'een'](_0xc6206b);this['screen']&&this['screen']['screen']['syncDrawOr'+'der']();}['syncMask'](_0x26adad){const _0x28268f=this['_parseUpTo'+'Screen']();this['_updateMas'+'k'](_0x28268f['mask'],_0x26adad);}['_setMasked'+'By'](_0x223632){const _0xbf5a2=this['_image']||this['_text'];if(_0x223632){const _0x5bf465=_0x223632['element']['_image']['_maskRef'];w['trace'](zs,'masking:\x20'+this['entity']['name']+'\x20with\x20'+_0x5bf465),_0xbf5a2==null||_0xbf5a2['_setStenci'+'l'](new pi({'ref':_0x5bf465,'func':Hc})),this['_maskedBy']=_0x223632;}else w['trace'](zs,'no\x20masking'+'\x20on:\x20'+this['entity']['name']),_0xbf5a2==null||_0xbf5a2['_setStenci'+'l'](null),this['_maskedBy']=null;}['_updateMas'+'k'](_0x3b7c80,_0x37721e){var _0x159e3e,_0x1e507a;if(_0x3b7c80){if(this['_setMasked'+'By'](_0x3b7c80),this['mask']){const _0x16ac40=_0x3b7c80['element']['_image']['_maskRef'],_0x497ec9=new pi({'ref':_0x16ac40,'func':Hc,'zpass':sx});this['_image']['_setStenci'+'l'](_0x497ec9),this['_image']['_maskRef']=_0x37721e,_0x37721e++,w['trace'](zs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+(_0x497ec9['ref']+(0x15a3+0x2056+-0x35f8))),w['trace'](zs,'depth++\x20to'+':\x20',_0x37721e),_0x3b7c80=this['entity'];}const _0x77e871=this['entity']['children'];for(let _0x289b3d=-0x1f7+0x83*0x35+-0x1928,_0x2ac7d7=_0x77e871['length'];_0x289b3d<_0x2ac7d7;_0x289b3d++)(_0x159e3e=_0x77e871[_0x289b3d]['element'])==null||_0x159e3e['_updateMas'+'k'](_0x3b7c80,_0x37721e);this['mask']&&_0x37721e--;}else{if(this['_setMasked'+'By'](null),this['mask']){const _0xf9e307=new pi({'ref':_0x37721e,'func':Hi,'zpass':tx});this['_image']['_setStenci'+'l'](_0xf9e307),this['_image']['_maskRef']=_0x37721e,_0x37721e++,w['trace'](zs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+_0xf9e307['ref']),w['trace'](zs,'depth++\x20to'+':\x20',_0x37721e),_0x3b7c80=this['entity'];}const _0x2b81e9=this['entity']['children'];for(let _0x30a8a3=-0x8*0x76+0x249b*-0x1+0x284b,_0x426185=_0x2b81e9['length'];_0x30a8a3<_0x426185;_0x30a8a3++)(_0x1e507a=_0x2b81e9[_0x30a8a3]['element'])==null||_0x1e507a['_updateMas'+'k'](_0x3b7c80,_0x37721e);this['mask']&&_0x37721e--;}}['_parseUpTo'+'Screen'](){const _0xc280d4={'screen':null,'mask':null};let _0x1a45b5=this['entity']['_parent'];for(;_0x1a45b5&&!_0x1a45b5['screen'];)_0x1a45b5['element']&&_0x1a45b5['element']['mask']&&(_0xc280d4['mask']||(_0xc280d4['mask']=_0x1a45b5)),_0x1a45b5=_0x1a45b5['parent'];return _0x1a45b5&&_0x1a45b5['screen']&&(_0xc280d4['screen']=_0x1a45b5),_0xc280d4;}['_onScreenR'+'esize'](_0x2290b5){this['_anchorDir'+'ty']=!(-0x65b+-0x3*-0x2b6+-0x1c7),this['_cornersDi'+'rty']=!(-0x2324+0x1*-0x1bfd+-0x3f21*-0x1),this['_worldCorn'+'ersDirty']=!(-0x2594+0x15a3+0x4d*0x35),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('screen:set'+':resolutio'+'n',_0x2290b5);}['_onScreenS'+'paceChange'](){this['fire']('screen:set'+':screenspa'+'ce',this['screen']['screen']['screenSpac'+'e']);}['_onScreenR'+'emove'](){this['screen']&&(this['screen']['_destroyin'+'g']?this['screen']=null:this['_updateScr'+'een'](null));}['_calculate'+'LocalAncho'+'rs'](){let _0x4b2109=0x4*0x7b2+0x4ce+-0x1fae,_0x254a74=-0x2*-0x4+-0x13ac+0x178c;const _0x40487b=this['entity']['_parent'];if(_0x40487b&&_0x40487b['element'])_0x4b2109=_0x40487b['element']['calculated'+'Width'],_0x254a74=_0x40487b['element']['calculated'+'Height'];else{if(this['screen']){const _0x2112cc=this['screen']['screen']['resolution'],_0x4747e4=this['screen']['screen']['scale'];_0x4b2109=_0x2112cc['x']/_0x4747e4,_0x254a74=_0x2112cc['y']/_0x4747e4;}}this['_localAnch'+'or']['set'](this['_anchor']['x']*_0x4b2109,this['_anchor']['y']*_0x254a74,this['_anchor']['z']*_0x4b2109,this['_anchor']['w']*_0x254a74);}['getOffsetP'+'osition'](_0x7043d9,_0x3b90e4){const _0x5d6e6e=this['entity']['getLocalPo'+'sition']()['clone']();return _0x5d6e6e['x']+=_0x7043d9,_0x5d6e6e['y']+=_0x3b90e4,this['_screenToW'+'orld']['transformP'+'oint'](_0x5d6e6e,_0x5d6e6e),_0x5d6e6e;}['onLayersCh'+'anged'](_0x347404,_0x39a62f){this['addModelTo'+'Layers'](this['_image']?this['_image']['_renderabl'+'e']['model']:this['_text']['_model']),_0x347404['off']('add',this['onLayerAdd'+'ed'],this),_0x347404['off']('remove',this['onLayerRem'+'oved'],this),_0x39a62f['on']('add',this['onLayerAdd'+'ed'],this),_0x39a62f['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x1316a5){this['layers']['indexOf'](_0x1316a5['id'])<-0x14aa+0xa4*0x13+-0x43f*-0x2||(this['_image']?_0x1316a5['addMeshIns'+'tances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x1316a5['addMeshIns'+'tances'](this['_text']['_model']['meshInstan'+'ces']));}['onLayerRem'+'oved'](_0x517c6f){this['layers']['indexOf'](_0x517c6f['id'])<-0x1*-0x23f9+0x5b*-0x31+-0x1db*0xa||(this['_image']?_0x517c6f['removeMesh'+'Instances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x517c6f['removeMesh'+'Instances'](this['_text']['_model']['meshInstan'+'ces']));}['onEnable'](){var _0x135feb;const _0x497455=this['system']['app']['scene'],_0x1d9f63=_0x497455['layers'];this['_image']&&this['_image']['onEnable'](),this['_text']&&this['_text']['onEnable'](),this['_group']&&this['_group']['onEnable'](),this['useInput']&&this['system']['app']['elementInp'+'ut']&&this['system']['app']['elementInp'+'ut']['addElement'](this),this['_evtLayers'+'Changed']=_0x497455['on']('set:layers',this['onLayersCh'+'anged'],this),_0x1d9f63&&(this['_evtLayerA'+'dded']=_0x1d9f63['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x1d9f63['on']('remove',this['onLayerRem'+'oved'],this)),this['_batchGrou'+'pId']>=-0x35*-0x39+-0x4*0x515+0x887&&((_0x135feb=this['system']['app']['batcher'])==null||_0x135feb['insert'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('enableelem'+'ent');}['onDisable'](){var _0x4c1d14,_0x44c8a7,_0x21a6a7,_0x300594;const _0x1647c2=this['system']['app']['scene']['layers'];(_0x4c1d14=this['_evtLayers'+'Changed'])==null||_0x4c1d14['off'](),this['_evtLayers'+'Changed']=null,_0x1647c2&&((_0x44c8a7=this['_evtLayerA'+'dded'])==null||_0x44c8a7['off'](),this['_evtLayerA'+'dded']=null,(_0x21a6a7=this['_evtLayerR'+'emoved'])==null||_0x21a6a7['off'](),this['_evtLayerR'+'emoved']=null),this['_image']&&this['_image']['onDisable'](),this['_text']&&this['_text']['onDisable'](),this['_group']&&this['_group']['onDisable'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['_batchGrou'+'pId']>=-0x1a2c+-0x101a*0x1+0x2a46&&((_0x300594=this['system']['app']['batcher'])==null||_0x300594['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('disableele'+'ment');}['onRemove'](){this['entity']['off']('insert',this['_onInsert'],this),this['_unpatch'](),this['_image']&&this['_image']['destroy'](),this['_text']&&this['_text']['destroy'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['screen']&&this['screen']['screen']&&(this['_unbindScr'+'een'](this['screen']['screen']),this['screen']['screen']['syncDrawOr'+'der']()),this['off']();}['_calculate'+'Size'](_0x418df1,_0x5de872){if(!this['entity']['_parent']&&!this['screen'])return;this['_calculate'+'LocalAncho'+'rs']();const _0x29b78d=this['_absRight']-this['_absLeft'],_0x2da7df=this['_absTop']-this['_absBottom'];_0x418df1?this['_setWidth'](_0x29b78d):this['_setCalcul'+'atedWidth'](_0x29b78d,!(-0x221f+0x2605+-0x3e5*0x1)),_0x5de872?this['_setHeight'](_0x2da7df):this['_setCalcul'+'atedHeight'](_0x2da7df,!(0x23f6+-0x2*0x193+-0x20cf));const _0x261ae2=this['entity']['getLocalPo'+'sition']();_0x261ae2['x']=this['_margin']['x']+this['_calculate'+'dWidth']*this['_pivot']['x'],_0x261ae2['y']=this['_margin']['y']+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x261ae2),this['_sizeDirty']=!(-0x1971+-0xbd1+0x2543);}['_setWidth'](_0x2db83e){this['_width']=_0x2db83e,this['_setCalcul'+'atedWidth'](_0x2db83e,!(0x5b8+0x1*0x1c06+-0x21bd)),this['fire']('set:width',this['_width']);}['_setHeight'](_0xc14035){this['_height']=_0xc14035,this['_setCalcul'+'atedHeight'](_0xc14035,!(-0x15b7+-0x17df+0x2d97)),this['fire']('set:height',this['_height']);}['_setCalcul'+'atedWidth'](_0x2d62bc,_0x329bf4){if(!(Math['abs'](_0x2d62bc-this['_calculate'+'dWidth'])<=0x1f67+-0x1658+0x305*-0x3+0.0001)){if(this['_calculate'+'dWidth']=_0x2d62bc,this['entity']['_dirtifyLo'+'cal'](),_0x329bf4){const _0x39d668=this['entity']['getLocalPo'+'sition'](),_0x4763ca=this['_pivot'];this['_margin']['x']=_0x39d668['x']-this['_calculate'+'dWidth']*_0x4763ca['x'],this['_margin']['z']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-this['_calculate'+'dWidth']-this['_margin']['x'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedWidth',this['_calculate'+'dWidth']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_setCalcul'+'atedHeight'](_0x1a11a3,_0x34c0fe){if(!(Math['abs'](_0x1a11a3-this['_calculate'+'dHeight'])<=-0x913+0x10d*0x20+-0x4e9*0x5+0.0001)){if(this['_calculate'+'dHeight']=_0x1a11a3,this['entity']['_dirtifyLo'+'cal'](),_0x34c0fe){const _0x53f41e=this['entity']['getLocalPo'+'sition'](),_0x48f157=this['_pivot'];this['_margin']['y']=_0x53f41e['y']-this['_calculate'+'dHeight']*_0x48f157['y'],this['_margin']['w']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-this['_calculate'+'dHeight']-this['_margin']['y'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedHeight',this['_calculate'+'dHeight']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_flagChild'+'renAsDirty'](){const _0x39a426=this['entity']['_children'];for(let _0x1572a7=0x1704+0x1*-0x13cf+-0x335,_0x20876c=_0x39a426['length'];_0x1572a7<_0x20876c;_0x1572a7++)_0x39a426[_0x1572a7]['element']&&(_0x39a426[_0x1572a7]['element']['_anchorDir'+'ty']=!(-0x781+0x18c+-0x1*-0x5f5),_0x39a426[_0x1572a7]['element']['_sizeDirty']=!(0x35*-0x2+0x1119+-0x10af));}['addModelTo'+'Layers'](_0x30ab8f){this['_addedMode'+'ls']['push'](_0x30ab8f);for(let _0x5df56c=-0x20*-0xd3+-0xaea+-0xf76;_0x5df56c<this['layers']['length'];_0x5df56c++){const _0x622004=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x5df56c]);_0x622004&&_0x622004['addMeshIns'+'tances'](_0x30ab8f['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](_0x50813d){const _0x563734=this['_addedMode'+'ls']['indexOf'](_0x50813d);_0x563734>=0x200+0x640*-0x4+0x40*0x5c&&this['_addedMode'+'ls']['splice'](_0x563734,0xf4e*0x1+0x6*-0x5b9+0x1bb*0xb);for(let _0x47808f=-0x25b1+0x23d1+0x1e0;_0x47808f<this['layers']['length'];_0x47808f++){const _0x5772fd=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x47808f]);_0x5772fd&&_0x5772fd['removeMesh'+'Instances'](_0x50813d['meshInstan'+'ces']);}}['getMaskOff'+'set'](){const _0x778cd8=this['system']['app']['frame'];this['_offsetRea'+'dAt']!==_0x778cd8&&(this['_maskOffse'+'t']=0x2611+-0x1923+-0xcee+0.5,this['_offsetRea'+'dAt']=_0x778cd8);const _0x8e0f71=this['_maskOffse'+'t'];return this['_maskOffse'+'t']-=-0x2*-0x12eb+0x1242+-0x3818+0.001,_0x8e0f71;}['isVisibleF'+'orCamera'](_0x3e5ac7){let _0x3af9dd,_0x2e1621,_0x147421,_0x358bd8;if(this['maskedBy']){const _0x40e6a1=this['maskedBy']['element']['screenCorn'+'ers'];_0x3af9dd=Math['min'](Math['min'](_0x40e6a1[0x57*-0x3+-0x389*0x4+0xf29]['x'],_0x40e6a1[0x5c*0x26+0x1*-0x26b+-0x2cf*0x4]['x']),Math['min'](_0x40e6a1[0x1f66+-0x292+0xe*-0x20f]['x'],_0x40e6a1[-0x17bf+0x2*0x10b+0x26*0x92]['x'])),_0x2e1621=Math['max'](Math['max'](_0x40e6a1[0xaa9+0xe*0x124+-0x1aa1]['x'],_0x40e6a1[0x8c+0x128*-0x18+0x1b35]['x']),Math['max'](_0x40e6a1[0x1*0x1f43+-0xcf3+-0x124e]['x'],_0x40e6a1[-0x263*0x1+0x67f*-0x2+0xf64]['x'])),_0x358bd8=Math['min'](Math['min'](_0x40e6a1[0x12a4*-0x2+-0xdbc*-0x1+0x224*0xb]['y'],_0x40e6a1[0x5*0x53b+-0x22a8+0x882]['y']),Math['min'](_0x40e6a1[-0x295*-0xa+-0x705+-0x11b*0x11]['y'],_0x40e6a1[-0x347*-0x1+0x1e8e+-0x21d2]['y'])),_0x147421=Math['max'](Math['max'](_0x40e6a1[0xd4e+0x17a3+-0x1*0x24f1]['y'],_0x40e6a1[0x6b*-0x2+0x19ca+-0x18f3]['y']),Math['max'](_0x40e6a1[0x3*0x8f3+0x1cb0+-0x3787]['y'],_0x40e6a1[0x11*0x216+0x1*0x1dd1+-0x4144]['y']));}else{const _0x357e47=this['system']['app']['graphicsDe'+'vice']['width'],_0xc8a6b3=this['system']['app']['graphicsDe'+'vice']['height'],_0x39df70=_0x3e5ac7['_rect']['z']*_0x357e47,_0x412939=_0x3e5ac7['_rect']['w']*_0xc8a6b3;_0x3af9dd=_0x3e5ac7['_rect']['x']*_0x357e47,_0x2e1621=_0x3af9dd+_0x39df70,_0x147421=(-0x1c02+-0x27*-0x77+-0x17*-0x6e-_0x3e5ac7['_rect']['y'])*_0xc8a6b3,_0x358bd8=_0x147421-_0x412939;}const _0x5c9ad5=this['screenCorn'+'ers'],_0x5514fa=Math['min'](Math['min'](_0x5c9ad5[-0x1826+-0xa21*0x3+-0x17*-0x25f]['x'],_0x5c9ad5[0x19bb*-0x1+-0x1*-0x313+0x1*0x16a9]['x']),Math['min'](_0x5c9ad5[0x154d+-0x264d+-0x2*-0x881]['x'],_0x5c9ad5[-0x374*-0x5+-0x53*0x18+-0x61*0x19]['x'])),_0x1a126d=Math['max'](Math['max'](_0x5c9ad5[0xfe3+0x2*0x1207+-0x33f1]['x'],_0x5c9ad5[0x6aa*-0x3+-0x8c0+0x29d*0xb]['x']),Math['max'](_0x5c9ad5[-0x4*-0x603+-0x10*-0x177+-0x2f7a]['x'],_0x5c9ad5[-0x41*0x3a+0xc6*0x14+-0x1*0xbb]['x'])),_0x59fdf0=Math['min'](Math['min'](_0x5c9ad5[0x34*-0x82+0x14ed+0x57b]['y'],_0x5c9ad5[-0x1524+0x39*-0x53+0x4f4*0x8]['y']),Math['min'](_0x5c9ad5[0x211*0x12+-0x210a+-0x213*0x2]['y'],_0x5c9ad5[0x36*-0x5+-0x1b93+0x1ca4]['y'])),_0x568e5d=Math['max'](Math['max'](_0x5c9ad5[0x47f*0x7+-0x5*-0x6b9+-0x4116]['y'],_0x5c9ad5[-0x2*-0xed0+0x6*0x3bb+-0x3401]['y']),Math['max'](_0x5c9ad5[-0x2192+-0x151*-0x1+-0x3*-0xac1]['y'],_0x5c9ad5[0x151d+-0xdef+-0x72b]['y']));return!(_0x1a126d<_0x3af9dd||_0x5514fa>_0x2e1621||_0x59fdf0>_0x147421||_0x568e5d<_0x358bd8);}['_isScreenS'+'pace'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['screenSpac'+'e']:!(0x40d+0x1e23*-0x1+0x1a17);}['_isScreenC'+'ulled'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['cull']:!(-0x1c92+0x15c1+-0x2*-0x369);}['_dirtyBatc'+'h'](){var _0xc4faab;this['batchGroup'+'Id']!==-(0x1*-0x2583+0x35b*-0x1+0x28df)&&((_0xc4faab=this['system']['app']['batcher'])==null||_0xc4faab['markGroupD'+'irty'](this['batchGroup'+'Id']));}}h(hs,'EVENT_MOUS'+'EDOWN','mousedown'),h(hs,'EVENT_MOUS'+'EUP','mouseup'),h(hs,'EVENT_MOUS'+'EENTER','mouseenter'),h(hs,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(hs,'EVENT_MOUS'+'EMOVE','mousemove'),h(hs,'EVENT_MOUS'+'EWHEEL','mousewheel'),h(hs,'EVENT_CLIC'+'K','click'),h(hs,'EVENT_TOUC'+'HSTART','touchstart'),h(hs,'EVENT_TOUC'+'HEND','touchend'),h(hs,'EVENT_TOUC'+'HMOVE','touchmove'),h(hs,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');class jL{constructor(){this['enabled']=!(-0x8f*-0x18+0xc34+-0x199c);}}const YL=['enabled'];class KL extends ct{constructor(_0x5166f9){super(_0x5166f9),this['id']='element',this['ComponentT'+'ype']=hs,this['DataType']=jL,this['schema']=YL,this['_unicodeCo'+'nverter']=null,this['_rtlReorde'+'r']=null,this['_defaultTe'+'xture']=new _e(_0x5166f9['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'element-sy'+'stem'});const _0x28fe0d=this['_defaultTe'+'xture']['lock'](),_0x3d6d48=new Uint8Array(0x1*-0xa78+-0x1d8a*0x1+0x2806);_0x3d6d48[-0x5*-0x630+-0x6f1*-0x2+-0x2cd2]=-0x11eb+-0x2c6+0x15b0,_0x3d6d48[0x29a+-0x14ea*-0x1+-0x1783]=-0x1*0xad+-0x118d+0x1339,_0x3d6d48[0x73e+-0x963*-0x3+0xdd*-0x29]=0xb*-0x95+0x2+0x764,_0x3d6d48[0x1489+-0xc9c+-0x3f5*0x2]=-0x150*0x17+0x63*-0xb+0x2370,_0x28fe0d['set'](_0x3d6d48),this['_defaultTe'+'xture']['unlock'](),this['defaultIma'+'geMaterial']=null,this['defaultIma'+'ge9SlicedM'+'aterial']=null,this['defaultIma'+'ge9TiledMa'+'terial']=null,this['defaultIma'+'geMaskMate'+'rial']=null,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=null,this['defaultIma'+'ge9TiledMa'+'skMaterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=null,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=null,this['_defaultTe'+'xtMaterial'+'s']={},this['defaultIma'+'geMaterial'+'s']=[],this['on']('add',this['onAddCompo'+'nent'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['destroy'](){super['destroy'](),this['_defaultTe'+'xture']['destroy']();}['initialize'+'ComponentD'+'ata'](_0x281807,_0x157cdf,_0x339a26){_0x281807['_beingInit'+'ialized']=!(-0xdee+0x18b*0x3+0x94d),_0x157cdf['anchor']!==void(0x7*-0x214+-0x1f*0xdf+0x298d)&&(_0x157cdf['anchor']instanceof re?_0x281807['anchor']['copy'](_0x157cdf['anchor']):_0x281807['anchor']['set'](_0x157cdf['anchor'][-0xb*-0x107+-0x1b1b*0x1+-0x22*-0x77],_0x157cdf['anchor'][0xf00+-0x197a+0xa7b],_0x157cdf['anchor'][0x3e+-0xf24+0x1*0xee8],_0x157cdf['anchor'][0xc18+-0x18d7+-0x8e*-0x17])),_0x157cdf['pivot']!==void(0x1*0x7a1+0x18c4+0x1*-0x2065)&&(_0x157cdf['pivot']instanceof J?_0x281807['pivot']['copy'](_0x157cdf['pivot']):_0x281807['pivot']['set'](_0x157cdf['pivot'][0x25f6+-0x973+-0x3*0x981],_0x157cdf['pivot'][0x16*-0x35+0xc26+0x43*-0x1d]));const _0x12fc4d=Math['abs'](_0x281807['anchor']['x']-_0x281807['anchor']['z'])>-0x17af+0x1dd4+-0x625+0.001,_0x241bd0=Math['abs'](_0x281807['anchor']['y']-_0x281807['anchor']['w'])>-0x24d*0x1+-0x1bb9+0x1e06+0.001;let _0x22f839=!(-0x2566+0x1*0xc25+0x1942),_0xc44f6d;_0x157cdf['margin']!==void(0x167e+-0x3a*0x6b+0x2*0xe0)&&(_0x157cdf['margin']instanceof re?_0x281807['margin']['copy'](_0x157cdf['margin']):_0x281807['_margin']['set'](_0x157cdf['margin'][0x44*-0x5e+0x1266+0x3a*0x1d],_0x157cdf['margin'][-0x5*-0x73b+0x1c09+-0x1*0x402f],_0x157cdf['margin'][0x4*0x450+0x499*0x5+0xd69*-0x3],_0x157cdf['margin'][0x770+0x1541*-0x1+-0x3c*-0x3b]),_0x22f839=!(-0x1e6+-0x1ee1+0x20c7)),_0x157cdf['left']!==void(0xfc0+0x2422+0x3a*-0xe5)&&(_0x281807['_margin']['x']=_0x157cdf['left'],_0x22f839=!(0x2b*-0x75+-0x215d+0x3504)),_0x157cdf['bottom']!==void(-0x14aa+-0x23*-0xec+-0xb9a)&&(_0x281807['_margin']['y']=_0x157cdf['bottom'],_0x22f839=!(0x1*0x20c6+-0x7b*-0x4f+0x3b9*-0x13)),_0x157cdf['right']!==void(-0x1047+0x25+-0x2*-0x811)&&(_0x281807['_margin']['z']=_0x157cdf['right'],_0x22f839=!(-0xb52+-0x1968+0x24ba)),_0x157cdf['top']!==void(-0x2689+-0xeb9+0x1*0x3542)&&(_0x281807['_margin']['w']=_0x157cdf['top'],_0x22f839=!(-0x7*-0x49f+-0x1a90+-0x5c9)),_0x22f839&&(_0x281807['margin']=_0x281807['_margin']);let _0x5b9370=!(0x1*0xbe9+-0x3*0x233+-0x9*0x97);_0x157cdf['width']!==void(-0xf2c+0x1*-0x1dae+0x2cda)&&!_0x12fc4d?_0x281807['width']=_0x157cdf['width']:_0x12fc4d&&(_0x5b9370=!(-0x2227+0x19a2+0x1*0x885)),_0x157cdf['height']!==void(0x866*0x4+-0x8f3*-0x1+-0x2a8b*0x1)&&!_0x241bd0?_0x281807['height']=_0x157cdf['height']:_0x241bd0&&(_0x5b9370=!(-0x1353+-0x1b1*0x9+0x2c*0xc9)),_0x5b9370&&(_0x281807['anchor']=_0x281807['anchor']),_0x157cdf['enabled']!==void(-0x38a+-0x2f*0x8f+-0x1dcb*-0x1)&&(_0x281807['enabled']=_0x157cdf['enabled']),_0x157cdf['useInput']!==void(-0x577+0x2db*-0x1+-0xf*-0x8e)&&(_0x281807['useInput']=_0x157cdf['useInput']),_0x157cdf['fitMode']!==void(0x1*0x7a4+0xc6e+-0x1412)&&(_0x281807['fitMode']=_0x157cdf['fitMode']),_0x281807['batchGroup'+'Id']=_0x157cdf['batchGroup'+'Id']===void(-0x1378*-0x1+0x728+-0x1aa0)||_0x157cdf['batchGroup'+'Id']===null?-(0x14+0x1*-0x12ff+-0x1*-0x12ec):_0x157cdf['batchGroup'+'Id'],_0x157cdf['layers']&&Array['isArray'](_0x157cdf['layers'])&&(_0x281807['layers']=_0x157cdf['layers']['slice'](-0x11*0xe+0x19b1+0x841*-0x3)),_0x157cdf['type']!==void(0x8e*0x9+0x490*0x8+-0x2*0x14bf)&&(_0x281807['type']=_0x157cdf['type']),_0x281807['type']===tu?(_0x157cdf['rect']!==void(0x1dec+-0x7*-0x8+-0x1e24)&&(_0x281807['rect']=_0x157cdf['rect']),_0x157cdf['color']!==void(-0x17ac+-0x181f+-0x98f*-0x5)&&(_0xc44f6d=_0x157cdf['color'],_0xc44f6d instanceof ie||(_0xc44f6d=new ie(_0x157cdf['color'][0x1810+0xf71+-0x1*0x2781],_0x157cdf['color'][-0x551+-0x14ce+0x1a20],_0x157cdf['color'][0x7b*0x34+0xef*-0x29+0xd4d])),_0x281807['color']=_0xc44f6d),_0x157cdf['opacity']!==void(0x2417*0x1+-0x1393+-0x1084)&&(_0x281807['opacity']=_0x157cdf['opacity']),_0x157cdf['textureAss'+'et']!==void(0x598+0x247f*0x1+0x1*-0x2a17)&&(_0x281807['textureAss'+'et']=_0x157cdf['textureAss'+'et']),_0x157cdf['texture']&&(_0x281807['texture']=_0x157cdf['texture']),_0x157cdf['spriteAsse'+'t']!==void(-0xe6*0x1b+-0x2d0+-0xa5*-0x2a)&&(_0x281807['spriteAsse'+'t']=_0x157cdf['spriteAsse'+'t']),_0x157cdf['sprite']&&(_0x281807['sprite']=_0x157cdf['sprite']),_0x157cdf['spriteFram'+'e']!==void(-0x184b+0xa3*0x2b+-0x316*0x1)&&(_0x281807['spriteFram'+'e']=_0x157cdf['spriteFram'+'e']),_0x157cdf['pixelsPerU'+'nit']!==void(0x4f*0x67+-0x1ddc+-0x11*0x1d)&&_0x157cdf['pixelsPerU'+'nit']!==null&&(_0x281807['pixelsPerU'+'nit']=_0x157cdf['pixelsPerU'+'nit']),_0x157cdf['materialAs'+'set']!==void(-0x1d1*0x13+0x1a*-0x56+0x2b3f)&&(_0x281807['materialAs'+'set']=_0x157cdf['materialAs'+'set']),_0x157cdf['material']&&(_0x281807['material']=_0x157cdf['material']),_0x157cdf['mask']!==void(0x1288+0xbb2+0x1e3a*-0x1)&&(_0x281807['mask']=_0x157cdf['mask'])):_0x281807['type']===fv&&(_0x157cdf['autoWidth']!==void(0x19b0+0xdb*-0x2b+0xb19)&&(_0x281807['autoWidth']=_0x157cdf['autoWidth']),_0x157cdf['autoHeight']!==void(-0x288+0xc51+-0x9c9)&&(_0x281807['autoHeight']=_0x157cdf['autoHeight']),_0x157cdf['rtlReorder']!==void(0x464+0x19ec+-0x8*0x3ca)&&(_0x281807['rtlReorder']=_0x157cdf['rtlReorder']),_0x157cdf['unicodeCon'+'verter']!==void(0x4*-0x433+0x2111+-0x1045)&&(_0x281807['unicodeCon'+'verter']=_0x157cdf['unicodeCon'+'verter']),_0x157cdf['text']!==null&&_0x157cdf['text']!==void(-0x1*-0xd64+0x1067*0x1+-0x1dcb)?_0x281807['text']=_0x157cdf['text']:_0x157cdf['key']!==null&&_0x157cdf['key']!==void(0x762+-0x1bf5+-0xe5*-0x17)&&(_0x281807['key']=_0x157cdf['key']),_0x157cdf['color']!==void(-0x19b9+0x14e2+0x4d7)&&(_0xc44f6d=_0x157cdf['color'],_0xc44f6d instanceof ie||(_0xc44f6d=new ie(_0xc44f6d[0x27d+-0x21d*0x7+-0x5a*-0x23],_0xc44f6d[0x51e+0x497+-0x19e*0x6],_0xc44f6d[-0x198+0xe2d+0x3*-0x431])),_0x281807['color']=_0xc44f6d),_0x157cdf['opacity']!==void(0x5e1+0x12ca+-0x18ab)&&(_0x281807['opacity']=_0x157cdf['opacity']),_0x157cdf['spacing']!==void(-0x69b*-0x5+0x335+-0x243c)&&(_0x281807['spacing']=_0x157cdf['spacing']),_0x157cdf['fontSize']!==void(-0x20a+-0x1255+0x145f)&&(_0x281807['fontSize']=_0x157cdf['fontSize'],_0x157cdf['lineHeight']||(_0x281807['lineHeight']=_0x157cdf['fontSize'])),_0x157cdf['lineHeight']!==void(-0x7c4+-0x1ab*-0x11+-0x7*0x2f1)&&(_0x281807['lineHeight']=_0x157cdf['lineHeight']),_0x157cdf['maxLines']!==void(-0x13d9*0x1+-0x521*0x5+0x2d7e)&&(_0x281807['maxLines']=_0x157cdf['maxLines']),_0x157cdf['wrapLines']!==void(-0x31*-0x6d+0x1*-0x126b+-0x272)&&(_0x281807['wrapLines']=_0x157cdf['wrapLines']),_0x157cdf['minFontSiz'+'e']!==void(0x2193+0x23d8+-0xd*0x557)&&(_0x281807['minFontSiz'+'e']=_0x157cdf['minFontSiz'+'e']),_0x157cdf['maxFontSiz'+'e']!==void(0xcf3*-0x2+0x1d83+-0x39d)&&(_0x281807['maxFontSiz'+'e']=_0x157cdf['maxFontSiz'+'e']),_0x157cdf['autoFitWid'+'th']&&(_0x281807['autoFitWid'+'th']=_0x157cdf['autoFitWid'+'th']),_0x157cdf['autoFitHei'+'ght']&&(_0x281807['autoFitHei'+'ght']=_0x157cdf['autoFitHei'+'ght']),_0x157cdf['fontAsset']!==void(-0x1*-0x162f+-0x13dc+-0x253)&&(_0x281807['fontAsset']=_0x157cdf['fontAsset']),_0x157cdf['font']!==void(-0x1185+-0x1d33+-0x1*-0x2eb8)&&(_0x281807['font']=_0x157cdf['font']),_0x157cdf['alignment']!==void(-0x3d9+0xee5+-0xb0c)&&(_0x281807['alignment']=_0x157cdf['alignment']),_0x157cdf['outlineCol'+'or']!==void(-0xdba+0x1*-0x836+0x10*0x15f)&&(_0x281807['outlineCol'+'or']=_0x157cdf['outlineCol'+'or']),_0x157cdf['outlineThi'+'ckness']!==void(0x7*-0x535+-0xc29*0x3+0x48ee)&&(_0x281807['outlineThi'+'ckness']=_0x157cdf['outlineThi'+'ckness']),_0x157cdf['shadowColo'+'r']!==void(0x167*0x1b+-0x1*0x3a5+-0x6d8*0x5)&&(_0x281807['shadowColo'+'r']=_0x157cdf['shadowColo'+'r']),_0x157cdf['shadowOffs'+'et']!==void(-0x9c+-0x1*-0x1f41+-0x1ea5)&&(_0x281807['shadowOffs'+'et']=_0x157cdf['shadowOffs'+'et']),_0x157cdf['enableMark'+'up']!==void(0xccb+0x2*0x123c+0x3143*-0x1)&&(_0x281807['enableMark'+'up']=_0x157cdf['enableMark'+'up']));const _0x318231=_0x281807['_parseUpTo'+'Screen']();_0x318231['screen']&&_0x281807['_updateScr'+'een'](_0x318231['screen']),super['initialize'+'ComponentD'+'ata'](_0x281807,_0x157cdf,_0x339a26),_0x281807['_beingInit'+'ialized']=!(0x8*0x2cf+0x6ca*-0x1+0xfad*-0x1),_0x281807['type']===tu&&_0x281807['_image']['_meshDirty']&&_0x281807['_image']['_updateMes'+'h'](_0x281807['_image']['mesh']);}['onAddCompo'+'nent'](_0x57e911,_0x2140dc){_0x57e911['fire']('element:ad'+'d');}['onRemoveCo'+'mponent'](_0x272b4c,_0x3a2e8c){_0x3a2e8c['onRemove']();}['cloneCompo'+'nent'](_0x572f70,_0x4eecf5){const _0x22837f=_0x572f70['element'],_0x30644f={'enabled':_0x22837f['enabled'],'width':_0x22837f['width'],'height':_0x22837f['height'],'anchor':_0x22837f['anchor']['clone'](),'pivot':_0x22837f['pivot']['clone'](),'margin':_0x22837f['margin']['clone'](),'alignment':_0x22837f['alignment']&&_0x22837f['alignment']['clone']()||_0x22837f['alignment'],'autoWidth':_0x22837f['autoWidth'],'autoHeight':_0x22837f['autoHeight'],'type':_0x22837f['type'],'rect':_0x22837f['rect']&&_0x22837f['rect']['clone']()||_0x22837f['rect'],'rtlReorder':_0x22837f['rtlReorder'],'unicodeConverter':_0x22837f['unicodeCon'+'verter'],'materialAsset':_0x22837f['materialAs'+'set'],'material':_0x22837f['material'],'color':_0x22837f['color']&&_0x22837f['color']['clone']()||_0x22837f['color'],'opacity':_0x22837f['opacity'],'textureAsset':_0x22837f['textureAss'+'et'],'texture':_0x22837f['texture'],'spriteAsset':_0x22837f['spriteAsse'+'t'],'sprite':_0x22837f['sprite'],'spriteFrame':_0x22837f['spriteFram'+'e'],'pixelsPerUnit':_0x22837f['pixelsPerU'+'nit'],'spacing':_0x22837f['spacing'],'lineHeight':_0x22837f['lineHeight'],'wrapLines':_0x22837f['wrapLines'],'layers':_0x22837f['layers'],'fontSize':_0x22837f['fontSize'],'minFontSize':_0x22837f['minFontSiz'+'e'],'maxFontSize':_0x22837f['maxFontSiz'+'e'],'autoFitWidth':_0x22837f['autoFitWid'+'th'],'autoFitHeight':_0x22837f['autoFitHei'+'ght'],'maxLines':_0x22837f['maxLines'],'fontAsset':_0x22837f['fontAsset'],'font':_0x22837f['font'],'useInput':_0x22837f['useInput'],'fitMode':_0x22837f['fitMode'],'batchGroupId':_0x22837f['batchGroup'+'Id'],'mask':_0x22837f['mask'],'outlineColor':_0x22837f['outlineCol'+'or']&&_0x22837f['outlineCol'+'or']['clone']()||_0x22837f['outlineCol'+'or'],'outlineThickness':_0x22837f['outlineThi'+'ckness'],'shadowColor':_0x22837f['shadowColo'+'r']&&_0x22837f['shadowColo'+'r']['clone']()||_0x22837f['shadowColo'+'r'],'shadowOffset':_0x22837f['shadowOffs'+'et']&&_0x22837f['shadowOffs'+'et']['clone']()||_0x22837f['shadowOffs'+'et'],'enableMarkup':_0x22837f['enableMark'+'up']};return _0x22837f['key']!==void(0x3a*-0x7a+0x16b4+0x4f0)&&_0x22837f['key']!==null?_0x30644f['key']=_0x22837f['key']:_0x30644f['text']=_0x22837f['text'],this['addCompone'+'nt'](_0x4eecf5,_0x30644f);}['getTextEle'+'mentMateri'+'al'](_0x325e55,_0x57c1ec,_0x15cec2){const _0x48590c=(_0x325e55&&0x1b41+0x17df+-0x331f)|(_0x57c1ec&&-0x16f7+-0x17a6+0x2e9f)|(_0x15cec2&&-0xeaa+0x1bb2+-0xd04);let _0x1811d1=this['_defaultTe'+'xtMaterial'+'s'][_0x48590c];if(_0x1811d1)return _0x1811d1;let _0x2bda78='TextMateri'+'al';return _0x1811d1=new Ut(),_0x57c1ec?(_0x1811d1['msdfMap']=this['_defaultTe'+'xture'],_0x1811d1['msdfTextAt'+'tribute']=_0x15cec2,_0x1811d1['emissive']['set'](-0xc5*0x9+0x1*0x23b1+-0x1cc3,0x1c7e+-0x67c+0x1601*-0x1,-0x1*-0x197e+-0xa*-0xfd+-0x235f)):(_0x2bda78='Bitmap'+_0x2bda78,_0x1811d1['emissive']['set'](-0x1*-0x16d3+-0x303*-0xc+-0x1d7b*0x2,0x51*0x16+-0x10d*-0x17+0x10*-0x1f2,0x9bc*0x1+0xef5+-0x18b0),_0x1811d1['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x1811d1['opacityMap']=this['_defaultTe'+'xture'],_0x1811d1['opacityMap'+'Channel']='a'),_0x325e55&&(_0x2bda78='ScreenSpac'+'e'+_0x2bda78,_0x1811d1['depthTest']=!(-0x20e3+0x1*0x1fa1+0x143)),_0x1811d1['name']='default'+_0x2bda78,_0x1811d1['useLightin'+'g']=!(-0x22ce+-0x1ea9+0x5*0xd18),_0x1811d1['useTonemap']=!(-0xb63*0x3+0x163c+0x1fd*0x6),_0x1811d1['useFog']=!(-0x85a*0x2+-0x21d1*0x1+-0x1943*-0x2),_0x1811d1['useSkybox']=!(0x2529+0x1ec9+0x1*-0x43f1),_0x1811d1['diffuse']['set'](-0x4e4+-0x1*0xc16+0x52*0x35,0xd3e+0xe1d*-0x1+0xdf,0x1*0x63b+0x21bd*-0x1+-0x3ee*-0x7),_0x1811d1['opacity']=0xe8e+0x7e+-0x6*0x282+0.5,_0x1811d1['blendType']=Fn,_0x1811d1['depthWrite']=!(-0xff7*0x2+-0x3d9*-0x1+0x1c16),_0x1811d1['emissiveVe'+'rtexColor']=!(0x1ef9*-0x1+-0x2204+-0x1*-0x40fd),_0x1811d1['update'](),this['_defaultTe'+'xtMaterial'+'s'][_0x48590c]=_0x1811d1,_0x1811d1;}['_createBas'+'eImageMate'+'rial'](){const _0x108abb=new Ut();return _0x108abb['diffuse']['set'](0x107e+-0x1*0x1e31+0xdb3,0x1c81+0x229d+-0xa85*0x6,0x1a4+0x1*-0x622+0x47e),_0x108abb['emissive']['set'](-0x281*0x9+0x619+0x1071,0x245f+-0x22f0+-0x16e,-0x1d1a+0x109e+0xc7d),_0x108abb['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x108abb['opacityMap']=this['_defaultTe'+'xture'],_0x108abb['opacityMap'+'Channel']='a',_0x108abb['useLightin'+'g']=!(0x195*-0x13+0xf1e+0xef2),_0x108abb['useTonemap']=!(-0x1c44+-0x1d86+0x39cb),_0x108abb['useFog']=!(0x4c*-0x44+0xb57*0x2+-0x27d),_0x108abb['useSkybox']=!(-0x215e*0x1+-0x7*0x71+0x2476),_0x108abb['blendType']=Fn,_0x108abb['depthWrite']=!(-0x1*0x211+0xd3*0x1+0x13f),_0x108abb;}['getImageEl'+'ementMater'+'ial'](_0x1fc267,_0x410ef2,_0x4434f9,_0x5a7f72){return _0x1fc267?_0x410ef2?_0x4434f9?(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al',this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['depthTest']=!(0x340*-0x7+0x1*0x123+0x159e),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaTest']=-0x211b+-0xb64+0x2c80,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['redWrite']=!(-0x74*0x3d+0x6a0*-0x2+0x28e5),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['greenWrite']=!(0x3ce+0x1*0xd8d+-0x115a),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['blueWrite']=!(-0x1*-0x656+0x17c7+-0x1e1c),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaWrite']=!(-0x835*0x2+0x6*0x47d+-0xa83),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']):_0x5a7f72?(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['clone'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['depthTest']=!(0x1*0xf4f+-0x6c0+-0x88e),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaTest']=-0x13fb+0x1*-0x162a+0x2a26,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['redWrite']=!(-0x9dc*-0x1+-0x2*-0x121d+-0x2e15),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['greenWrite']=!(-0x5*-0x5e8+-0x3*0x217+-0x1*0x1742),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['blueWrite']=!(0x183f*0x1+0x9a4+0x21e2*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaWrite']=!(0x1*0x477+0x11dc+-0x1652),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']):(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']||(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['name']='defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial',this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['depthTest']=!(-0x19df+-0x11ea+0x5f*0x76),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaTest']=-0x5d1+-0x21c3+-0x2795*-0x1,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['redWrite']=!(0x1*-0xccb+-0x88d+0x1559*0x1),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['greenWrite']=!(-0xd7f+-0x5*-0x43f+-0x7bb),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['blueWrite']=!(0xbba*0x1+0x5*-0x42e+0x92d),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaWrite']=!(0xf37+0x1*0x1558+-0x248e),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial'])),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']):_0x4434f9?(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']||(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['name']='defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material',this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['depthTest']=!(0x11*0xe3+0x19bf+-0x28d1),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material'])),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']):_0x5a7f72?(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']||(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['name']='defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial',this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['depthTest']=!(0x80+-0x11d*-0x1a+-0x1*0x1d71),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial'])),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']):(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['depthTest']=!(-0x7*0x2e7+0x173a*0x1+-0x2e8),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']):_0x410ef2?_0x4434f9?(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']||(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['name']='defaultIma'+'ge9SlicedM'+'askMateria'+'l',this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaTest']=-0x1*-0x10f0+0x32f+-0x2*0xa0f,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['redWrite']=!(-0xa6*-0x3+0x1*0x26d2+0x5*-0x827),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['greenWrite']=!(-0x1a*-0x15+-0x1df8+-0x1bd7*-0x1),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['blueWrite']=!(-0x1eb*-0xa+-0x7c9*-0x2+-0x251*0xf),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaWrite']=!(-0x2fa+0x1*-0x1051+0x134c),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'askMateria'+'l'])),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']):_0x5a7f72?(this['defaultIma'+'ge9TiledMa'+'skMaterial']||(this['defaultIma'+'ge9TiledMa'+'skMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'skMaterial']['name']='defaultIma'+'ge9TiledMa'+'skMaterial',this['defaultIma'+'ge9TiledMa'+'skMaterial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaTest']=-0x1967+0x2e*-0x23+0x1fb2,this['defaultIma'+'ge9TiledMa'+'skMaterial']['redWrite']=!(0x4f*-0x19+-0x11*0x1c9+0x2611),this['defaultIma'+'ge9TiledMa'+'skMaterial']['greenWrite']=!(-0x23e8+0x5*0x275+0x36*0x70),this['defaultIma'+'ge9TiledMa'+'skMaterial']['blueWrite']=!(-0x1*0x602+0x1ae*0xf+0x132f*-0x1),this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaWrite']=!(-0x1e7d+-0x5dd+0x245b),this['defaultIma'+'ge9TiledMa'+'skMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'skMaterial'])),this['defaultIma'+'ge9TiledMa'+'skMaterial']):(this['defaultIma'+'geMaskMate'+'rial']||(this['defaultIma'+'geMaskMate'+'rial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaskMate'+'rial']['name']='defaultIma'+'geMaskMate'+'rial',this['defaultIma'+'geMaskMate'+'rial']['alphaTest']=0x36a*-0xa+0x785*0x5+0x374*-0x1,this['defaultIma'+'geMaskMate'+'rial']['redWrite']=!(0x1d33+-0xf0c+-0xe26),this['defaultIma'+'geMaskMate'+'rial']['greenWrite']=!(-0x179e+0x1a4f+-0x2b0),this['defaultIma'+'geMaskMate'+'rial']['blueWrite']=!(-0x1b0+-0xc9a+-0xe4b*-0x1),this['defaultIma'+'geMaskMate'+'rial']['alphaWrite']=!(0x2127+-0x2447+0x321),this['defaultIma'+'geMaskMate'+'rial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaskMate'+'rial'])),this['defaultIma'+'geMaskMate'+'rial']):_0x4434f9?(this['defaultIma'+'ge9SlicedM'+'aterial']||(this['defaultIma'+'ge9SlicedM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'aterial']['name']='defaultIma'+'ge9SlicedM'+'aterial',this['defaultIma'+'ge9SlicedM'+'aterial']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'aterial'])),this['defaultIma'+'ge9SlicedM'+'aterial']):_0x5a7f72?(this['defaultIma'+'ge9TiledMa'+'terial']||(this['defaultIma'+'ge9TiledMa'+'terial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'terial']['name']='defaultIma'+'ge9TiledMa'+'terial',this['defaultIma'+'ge9TiledMa'+'terial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'terial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'terial'])),this['defaultIma'+'ge9TiledMa'+'terial']):(this['defaultIma'+'geMaterial']||(this['defaultIma'+'geMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaterial']['name']='defaultIma'+'geMaterial',this['defaultIma'+'geMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaterial'])),this['defaultIma'+'geMaterial']);}['registerUn'+'icodeConve'+'rter'](_0x418bb1){this['_unicodeCo'+'nverter']=_0x418bb1;}['registerRt'+'lReorder'](_0x3d96d5){this['_rtlReorde'+'r']=_0x3d96d5;}['getUnicode'+'Converter'](){return this['_unicodeCo'+'nverter'];}['getRtlReor'+'der'](){return this['_rtlReorde'+'r'];}}const Va='free',Ga='limited',Ha='locked',ZL=['angularDam'+'pingX','angularDam'+'pingY','angularDam'+'pingZ','angularEqu'+'ilibriumX','angularEqu'+'ilibriumY','angularEqu'+'ilibriumZ','angularLim'+'itsX','angularLim'+'itsY','angularLim'+'itsZ','angularMot'+'ionX','angularMot'+'ionY','angularMot'+'ionZ','angularSpr'+'ingX','angularSpr'+'ingY','angularSpr'+'ingZ','angularSti'+'ffnessX','angularSti'+'ffnessY','angularSti'+'ffnessZ','breakForce','enableColl'+'ision','enabled','entityA','entityB','linearDamp'+'ingX','linearDamp'+'ingY','linearDamp'+'ingZ','linearEqui'+'libriumX','linearEqui'+'libriumY','linearEqui'+'libriumZ','linearLimi'+'tsX','linearLimi'+'tsY','linearLimi'+'tsZ','linearMoti'+'onX','linearMoti'+'onY','linearMoti'+'onZ','linearSpri'+'ngX','linearSpri'+'ngY','linearSpri'+'ngZ','linearStif'+'fnessX','linearStif'+'fnessY','linearStif'+'fnessZ'];class Xp extends we{constructor(_0x12f338,_0x2f1d14){super(_0x12f338,_0x2f1d14),w['assert'](typeof Ammo<'u','ERROR:\x20Att'+'empting\x20to'+'\x20create\x20a\x20'+'pc.JointCo'+'mponent\x20bu'+'t\x20Ammo.js\x20'+'is\x20not\x20loa'+'ded'),this['_constrain'+'t']=null,this['_entityA']=null,this['_entityB']=null,this['_breakForc'+'e']=0xffc99e3c66fd68000000000000000000,this['_enableCol'+'lision']=!(0x9f7*-0x2+-0x73c+-0x6*-0x487),this['_linearMot'+'ionX']=Ha,this['_linearLim'+'itsX']=new J(0x53*0x27+0x1*0xc77+-0x647*0x4,-0xc59*0x3+-0x2*0x579+0x555*0x9),this['_linearSpr'+'ingX']=!(-0x53*0x25+-0x3ad*-0x2+0x4a6),this['_linearSti'+'ffnessX']=-0x1*-0x90d+0x702+0x100f*-0x1,this['_linearDam'+'pingX']=0x33d*0x8+-0xed9+-0x236*0x5,this['_linearEqu'+'ilibriumX']=-0x9e7*0x1+-0x113*-0x20+-0x1879,this['_linearMot'+'ionY']=Ha,this['_linearLim'+'itsY']=new J(-0x2*0x5fb+0xec7*-0x2+-0x14c2*-0x2,-0x29d*0xb+0x1*0xdb5+0xf0a),this['_linearSpr'+'ingY']=!(0x51a+-0x2*0xbdd+-0x1*-0x12a1),this['_linearSti'+'ffnessY']=0x243c+-0x1e*0x143+-0x12*-0x17,this['_linearDam'+'pingY']=-0x101e+-0x10*0x1d6+0x13*0x265,this['_linearEqu'+'ilibriumY']=-0x205*0x10+0x1fd6+0x7a,this['_linearMot'+'ionZ']=Ha,this['_linearLim'+'itsZ']=new J(-0x116d+0x3c0+-0x3*-0x48f,0x263b*0x1+-0x1a1d+-0xc1e),this['_linearSpr'+'ingZ']=!(-0x112+-0x26cb+0x27de),this['_linearSti'+'ffnessZ']=0x1626+-0x260+0x2*-0x9e3,this['_linearDam'+'pingZ']=0x7*-0x17+0x1*-0x236b+0x240d,this['_linearEqu'+'ilibriumZ']=0x733+-0x709+-0x2a,this['_angularMo'+'tionX']=Ha,this['_angularLi'+'mitsX']=new J(0x22dc*0x1+-0x1387+-0x311*0x5,-0x116b+0x4bf*0x3+0x32e),this['_angularSp'+'ringX']=!(0xb8c+0x2*-0xc11+-0x125*-0xb),this['_angularSt'+'iffnessX']=0x1a30+0x437+0xb5*-0x2b,this['_angularDa'+'mpingX']=-0x22b3*0x1+0x1d6*0x11+0x3*0x12a,this['_angularEq'+'uilibriumX']=0x1c87*0x1+0x259*0x2+-0x2139,this['_angularMo'+'tionY']=Ha,this['_angularLi'+'mitsY']=new J(-0x142b+-0xfd8+0x2403,0x1c1*-0x1+0x227*-0x3+-0x41b*-0x2),this['_angularSp'+'ringY']=!(-0xddf+0x1*0x8aa+-0x536*-0x1),this['_angularSt'+'iffnessY']=-0xf2+0x5*-0x772+0x262c,this['_angularDa'+'mpingY']=-0x11*0xc7+0x3b*0x2e+0x29e,this['_angularEq'+'uilibriumY']=-0x351*0x7+-0x1dd1+0x3508,this['_angularMo'+'tionZ']=Ha,this['_angularLi'+'mitsZ']=new J(0x20f7+0xb58+-0xc7*0x39,-0x189b+0x1711+0x18a),this['_angularSp'+'ringZ']=!(0x5*0x6e7+0x8*0x17+-0x233a),this['_angularEq'+'uilibriumZ']=0x23ed+0x2277+-0x2*0x2332,this['_angularDa'+'mpingZ']=-0x44b*0x3+-0x2*0x1042+0x37e*0xd,this['_angularSt'+'iffnessZ']=0x3*-0x3af+0xd3d*0x2+-0xb*0x167,this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['entityA'](_0x1e18f5){this['_destroyCo'+'nstraint'](),this['_entityA']=_0x1e18f5,this['_createCon'+'straint']();}get['entityA'](){return this['_entityA'];}set['entityB'](_0x1927ac){this['_destroyCo'+'nstraint'](),this['_entityB']=_0x1927ac,this['_createCon'+'straint']();}get['entityB'](){return this['_entityB'];}set['breakForce'](_0x32e5f5){this['_constrain'+'t']&&this['_breakForc'+'e']!==_0x32e5f5&&(this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](_0x32e5f5),this['_breakForc'+'e']=_0x32e5f5);}get['breakForce'](){return this['_breakForc'+'e'];}set['enableColl'+'ision'](_0x5bbb37){this['_destroyCo'+'nstraint'](),this['_enableCol'+'lision']=_0x5bbb37,this['_createCon'+'straint']();}get['enableColl'+'ision'](){return this['_enableCol'+'lision'];}set['angularLim'+'itsX'](_0x3b4c24){this['_angularLi'+'mitsX']['equals'](_0x3b4c24)||(this['_angularLi'+'mitsX']['copy'](_0x3b4c24),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsX'](){return this['_angularLi'+'mitsX'];}set['angularMot'+'ionX'](_0x37c966){this['_angularMo'+'tionX']!==_0x37c966&&(this['_angularMo'+'tionX']=_0x37c966,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionX'](){return this['_angularMo'+'tionX'];}set['angularLim'+'itsY'](_0x443dc2){this['_angularLi'+'mitsY']['equals'](_0x443dc2)||(this['_angularLi'+'mitsY']['copy'](_0x443dc2),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsY'](){return this['_angularLi'+'mitsY'];}set['angularMot'+'ionY'](_0x447e79){this['_angularMo'+'tionY']!==_0x447e79&&(this['_angularMo'+'tionY']=_0x447e79,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionY'](){return this['_angularMo'+'tionY'];}set['angularLim'+'itsZ'](_0xa62f39){this['_angularLi'+'mitsZ']['equals'](_0xa62f39)||(this['_angularLi'+'mitsZ']['copy'](_0xa62f39),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsZ'](){return this['_angularLi'+'mitsZ'];}set['angularMot'+'ionZ'](_0x4dbdf3){this['_angularMo'+'tionZ']!==_0x4dbdf3&&(this['_angularMo'+'tionZ']=_0x4dbdf3,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionZ'](){return this['_angularMo'+'tionZ'];}set['linearLimi'+'tsX'](_0xea3232){this['_linearLim'+'itsX']['equals'](_0xea3232)||(this['_linearLim'+'itsX']['copy'](_0xea3232),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsX'](){return this['_linearLim'+'itsX'];}set['linearMoti'+'onX'](_0x32b98c){this['_linearMot'+'ionX']!==_0x32b98c&&(this['_linearMot'+'ionX']=_0x32b98c,this['_updateLin'+'earLimits']());}get['linearMoti'+'onX'](){return this['_linearMot'+'ionX'];}set['linearLimi'+'tsY'](_0x56f260){this['_linearLim'+'itsY']['equals'](_0x56f260)||(this['_linearLim'+'itsY']['copy'](_0x56f260),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsY'](){return this['_linearLim'+'itsY'];}set['linearMoti'+'onY'](_0x25e7d1){this['_linearMot'+'ionY']!==_0x25e7d1&&(this['_linearMot'+'ionY']=_0x25e7d1,this['_updateLin'+'earLimits']());}get['linearMoti'+'onY'](){return this['_linearMot'+'ionY'];}set['linearLimi'+'tsZ'](_0x16f2f1){this['_linearLim'+'itsZ']['equals'](_0x16f2f1)||(this['_linearLim'+'itsZ']['copy'](_0x16f2f1),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsZ'](){return this['_linearLim'+'itsZ'];}set['linearMoti'+'onZ'](_0x1ef550){this['_linearMot'+'ionZ']!==_0x1ef550&&(this['_linearMot'+'ionZ']=_0x1ef550,this['_updateLin'+'earLimits']());}get['linearMoti'+'onZ'](){return this['_linearMot'+'ionZ'];}['_convertTr'+'ansform'](_0x4e817f,_0x2342a7){const _0x1e2a6b=_0x4e817f['getTransla'+'tion'](),_0x33fa52=new le();_0x33fa52['setFromMat'+'4'](_0x4e817f);const _0x44f4c3=new Ammo['btVector3'](_0x1e2a6b['x'],_0x1e2a6b['y'],_0x1e2a6b['z']),_0x1bf78c=new Ammo['btQuaterni'+'on'](_0x33fa52['x'],_0x33fa52['y'],_0x33fa52['z'],_0x33fa52['w']);_0x2342a7['setOrigin'](_0x44f4c3),_0x2342a7['setRotatio'+'n'](_0x1bf78c),Ammo['destroy'](_0x44f4c3),Ammo['destroy'](_0x1bf78c);}['_updateAng'+'ularLimits'](){const _0x5a128a=this['_constrain'+'t'];if(_0x5a128a){let _0x223987,_0x5b797c,_0x244446,_0x4f5d45,_0x119a7e,_0x13aa25;this['_angularMo'+'tionX']===Ga?(_0x223987=this['_angularLi'+'mitsX']['x']*Y['DEG_TO_RAD'],_0x4f5d45=this['_angularLi'+'mitsX']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionX']===Va?(_0x223987=0xed7+0x16f3+0x1*-0x25c9,_0x4f5d45=0xd*-0x125+-0x260f*0x1+-0x1e4*-0x1c):_0x223987=_0x4f5d45=0x1*-0xdcd+0x1*-0xc91+0x1a5e,this['_angularMo'+'tionY']===Ga?(_0x5b797c=this['_angularLi'+'mitsY']['x']*Y['DEG_TO_RAD'],_0x119a7e=this['_angularLi'+'mitsY']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionY']===Va?(_0x5b797c=0x2577+-0x1a95+-0x1*0xae1,_0x119a7e=-0x3c3+0x16f*0x5+0x1b4*-0x2):_0x5b797c=_0x119a7e=-0x83*0x4+0x8ab*0x3+-0x17f5,this['_angularMo'+'tionZ']===Ga?(_0x244446=this['_angularLi'+'mitsZ']['x']*Y['DEG_TO_RAD'],_0x13aa25=this['_angularLi'+'mitsZ']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionZ']===Va?(_0x244446=-0x1314+-0xaa9+0x1dbe,_0x13aa25=0xfef+0x79d*0x1+-0x2*0xbc6):_0x244446=_0x13aa25=0x26+0x193b*-0x1+-0x1*-0x1915;const _0x1da0f5=new Ammo['btVector3'](_0x223987,_0x5b797c,_0x244446);_0x5a128a['setAngular'+'LowerLimit'](_0x1da0f5),_0x1da0f5['setValue'](_0x4f5d45,_0x119a7e,_0x13aa25),_0x5a128a['setAngular'+'UpperLimit'](_0x1da0f5),Ammo['destroy'](_0x1da0f5);}}['_updateLin'+'earLimits'](){const _0x1d87db=this['_constrain'+'t'];if(_0x1d87db){let _0x47ce3b,_0x264aab,_0x5f35df,_0xe354aa,_0x1a866a,_0x3909af;this['_linearMot'+'ionX']===Ga?(_0x47ce3b=this['_linearLim'+'itsX']['x'],_0xe354aa=this['_linearLim'+'itsX']['y']):this['_linearMot'+'ionX']===Va?(_0x47ce3b=-0x33*0x2d+-0x20d1+0x29c9,_0xe354aa=0x1c63+-0x1*-0xc9e+0x1*-0x2901):_0x47ce3b=_0xe354aa=0xcfa*-0x1+-0x1b5e+0x2858,this['_linearMot'+'ionY']===Ga?(_0x264aab=this['_linearLim'+'itsY']['x'],_0x1a866a=this['_linearLim'+'itsY']['y']):this['_linearMot'+'ionY']===Va?(_0x264aab=0xa1f*-0x2+-0x101c+0x1*0x245b,_0x1a866a=0x12e1+0x1*0x1467+0x9d2*-0x4):_0x264aab=_0x1a866a=0xe89+0x31*0x57+-0x1*0x1f30,this['_linearMot'+'ionZ']===Ga?(_0x5f35df=this['_linearLim'+'itsZ']['x'],_0x3909af=this['_linearLim'+'itsZ']['y']):this['_linearMot'+'ionZ']===Va?(_0x5f35df=-0x2*0xa8b+-0x1*-0xa01+0xb16,_0x3909af=-0x13d4+0xd22+0x6b2):_0x5f35df=_0x3909af=-0x1732+-0x16af+0x2de1;const _0x5ee70e=new Ammo['btVector3'](_0x47ce3b,_0x264aab,_0x5f35df);_0x1d87db['setLinearL'+'owerLimit'](_0x5ee70e),_0x5ee70e['setValue'](_0xe354aa,_0x1a866a,_0x3909af),_0x1d87db['setLinearU'+'pperLimit'](_0x5ee70e),Ammo['destroy'](_0x5ee70e);}}['_createCon'+'straint'](){if(this['_entityA']&&this['_entityA']['rigidbody']){this['_destroyCo'+'nstraint']();const _0x3c5a36=new te(),_0x276c4e=this['_entityA']['rigidbody']['body'];_0x276c4e['activate']();const _0x1c0da5=this['entity']['getWorldTr'+'ansform'](),_0x19cb39=this['_entityA']['getWorldTr'+'ansform']()['clone']()['invert']();_0x3c5a36['mul2'](_0x19cb39,_0x1c0da5);const _0x245230=new Ammo['btTransfor'+'m']();if(this['_convertTr'+'ansform'](_0x3c5a36,_0x245230),this['_entityB']&&this['_entityB']['rigidbody']){const _0x5998ea=this['_entityB']['rigidbody']['body'];_0x5998ea['activate']();const _0xa23ed2=this['_entityB']['getWorldTr'+'ansform']()['clone']()['invert']();_0x3c5a36['mul2'](_0xa23ed2,_0x1c0da5);const _0x54ff7b=new Ammo['btTransfor'+'m']();this['_convertTr'+'ansform'](_0x3c5a36,_0x54ff7b),this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x276c4e,_0x5998ea,_0x245230,_0x54ff7b,!this['_enableCol'+'lision']),Ammo['destroy'](_0x54ff7b);}else this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x276c4e,_0x245230,!this['_enableCol'+'lision']);Ammo['destroy'](_0x245230);const _0x123a4c=['X','Y','Z','X','Y','Z'];for(let _0x279021=0x7*0xd3+-0x1*0xf3e+0x19*0x61;_0x279021<-0x1e31*-0x1+-0x1*0xee6+-0xf45;_0x279021++){const _0x3ce10d=_0x279021<0x1424+0x95a+-0x1d7b?'_linear':'_angular';this['_constrain'+'t']['enableSpri'+'ng'](_0x279021,this[_0x3ce10d+'Spring'+_0x123a4c[_0x279021]]),this['_constrain'+'t']['setDamping'](_0x279021,this[_0x3ce10d+'Damping'+_0x123a4c[_0x279021]]),this['_constrain'+'t']['setEquilib'+'riumPoint'](_0x279021,this[_0x3ce10d+('Equilibriu'+'m')+_0x123a4c[_0x279021]]),this['_constrain'+'t']['setStiffne'+'ss'](_0x279021,this[_0x3ce10d+'Stiffness'+_0x123a4c[_0x279021]]);}this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](this['_breakForc'+'e']),this['_updateLin'+'earLimits'](),this['_updateAng'+'ularLimits'](),this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['addConstra'+'int'](this['_constrain'+'t'],!this['_enableCol'+'lision']);}}['_destroyCo'+'nstraint'](){this['_constrain'+'t']&&(this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['removeCons'+'traint'](this['_constrain'+'t']),Ammo['destroy'](this['_constrain'+'t']),this['_constrain'+'t']=null);}['initFromDa'+'ta'](_0x11f30a){for(const _0x5f4a79 of ZL)_0x11f30a['hasOwnProp'+'erty'](_0x5f4a79)&&(_0x11f30a[_0x5f4a79]instanceof J?this['_'+_0x5f4a79]['copy'](_0x11f30a[_0x5f4a79]):this['_'+_0x5f4a79]=_0x11f30a[_0x5f4a79]);this['_createCon'+'straint']();}['onEnable'](){this['_createCon'+'straint']();}['onDisable'](){this['_destroyCo'+'nstraint']();}['_onSetEnab'+'led'](_0x1a8a8a,_0x2b21b4,_0x4823fc){}['_onBeforeR'+'emove'](){this['fire']('remove');}}const QL={'Damping':'setDamping','Equilibrium':'setEquilib'+'riumPoint','Spring':'enableSpri'+'ng','Stiffness':'setStiffne'+'ss'};['linear','angular']['forEach'](_0x24f7a8=>{['Damping','Equilibriu'+'m','Spring','Stiffness']['forEach'](_0x29ebb9=>{['X','Y','Z']['forEach'](_0x248fae=>{const _0x56041c=_0x24f7a8+_0x29ebb9+_0x248fae,_0x484ff6='_'+_0x56041c;let _0x122ef4=_0x24f7a8==='linear'?-0x177+-0x1f56+0x9*0x3a5:0x97+0x1cf8+0x2*-0xec6;_0x248fae==='Y'&&(_0x122ef4+=-0x1*-0x14a8+0x26dd+-0x3b84),_0x248fae==='Z'&&(_0x122ef4+=-0x1bf*-0xb+-0x310+-0x3*0x561),Object['defineProp'+'erty'](Xp['prototype'],_0x56041c,{'get':function(){return this[_0x484ff6];},'set':function(_0x3dd70c){this[_0x484ff6]!==_0x3dd70c&&(this[_0x484ff6]=_0x3dd70c,this['_constrain'+'t'][QL[_0x29ebb9]](_0x122ef4,_0x3dd70c));}});});});});class JL{constructor(){this['enabled']=!(-0x1a*0x47+-0x731*-0x1+0x5);}}const cu=['enabled'];class eR extends ct{constructor(_0x2af237){super(_0x2af237),this['id']='joint',this['app']=_0x2af237,this['ComponentT'+'ype']=Xp,this['DataType']=JL,this['schema']=cu;}['initialize'+'ComponentD'+'ata'](_0x438b94,_0x5524dc,_0x32d59d){_0x438b94['initFromDa'+'ta'](_0x5524dc),super['initialize'+'ComponentD'+'ata'](_0x438b94,_0x5524dc,cu);}}we['_buildAcce'+'ssors'](Xp['prototype'],cu);class gv extends we{constructor(){super(...arguments),h(this,'_minWidth',0x1*0xe56+0x26d7+-0x1*0x352d),h(this,'_minHeight',0x11*0x1e4+0x172+-0xb32*0x3),h(this,'_maxWidth',null),h(this,'_maxHeight',null),h(this,'_fitWidthP'+'roportion',0x1*-0x1516+0x22*0xc0+-0x46a),h(this,'_fitHeight'+'Proportion',0x3a*-0x85+0x5*-0x3dc+0xab*0x4a),h(this,'_excludeFr'+'omLayout',!(-0x19f7+0x2393+-0x99b*0x1));}set['minWidth'](_0xac60c7){_0xac60c7!==this['_minWidth']&&(this['_minWidth']=_0xac60c7,this['fire']('resize'));}get['minWidth'](){return this['_minWidth'];}set['minHeight'](_0x4395f6){_0x4395f6!==this['_minHeight']&&(this['_minHeight']=_0x4395f6,this['fire']('resize'));}get['minHeight'](){return this['_minHeight'];}set['maxWidth'](_0x380780){_0x380780!==this['_maxWidth']&&(this['_maxWidth']=_0x380780,this['fire']('resize'));}get['maxWidth'](){return this['_maxWidth'];}set['maxHeight'](_0x110c36){_0x110c36!==this['_maxHeight']&&(this['_maxHeight']=_0x110c36,this['fire']('resize'));}get['maxHeight'](){return this['_maxHeight'];}set['fitWidthPr'+'oportion'](_0x190916){_0x190916!==this['_fitWidthP'+'roportion']&&(this['_fitWidthP'+'roportion']=_0x190916,this['fire']('resize'));}get['fitWidthPr'+'oportion'](){return this['_fitWidthP'+'roportion'];}set['fitHeightP'+'roportion'](_0x22ee49){_0x22ee49!==this['_fitHeight'+'Proportion']&&(this['_fitHeight'+'Proportion']=_0x22ee49,this['fire']('resize'));}get['fitHeightP'+'roportion'](){return this['_fitHeight'+'Proportion'];}set['excludeFro'+'mLayout'](_0x505d40){_0x505d40!==this['_excludeFr'+'omLayout']&&(this['_excludeFr'+'omLayout']=_0x505d40,this['fire']('resize'));}get['excludeFro'+'mLayout'](){return this['_excludeFr'+'omLayout'];}}class tR{constructor(){this['enabled']=!(0x1*-0x503+-0x1*-0xb4d+-0x64a);}}const Sv=['enabled'];class sR extends ct{constructor(_0x45dcc6){super(_0x45dcc6),this['id']='layoutchil'+'d',this['ComponentT'+'ype']=gv,this['DataType']=tR,this['schema']=Sv;}['initialize'+'ComponentD'+'ata'](_0x2687a8,_0x7a24ea,_0x14455f){_0x7a24ea['enabled']!==void(0x26a*0xe+0x11*0x11+-0x22ed)&&(_0x2687a8['enabled']=_0x7a24ea['enabled']),_0x7a24ea['minWidth']!==void(-0x427*-0x5+-0x1*0x1e6b+-0xce*-0xc)&&(_0x2687a8['minWidth']=_0x7a24ea['minWidth']),_0x7a24ea['minHeight']!==void(-0x8b5*-0x2+0x1e*-0x61+-0x60c)&&(_0x2687a8['minHeight']=_0x7a24ea['minHeight']),_0x7a24ea['maxWidth']!==void(0x7e0+0xbb3+-0x1393*0x1)&&(_0x2687a8['maxWidth']=_0x7a24ea['maxWidth']),_0x7a24ea['maxHeight']!==void(-0x505+0xba5+-0x6a0)&&(_0x2687a8['maxHeight']=_0x7a24ea['maxHeight']),_0x7a24ea['fitWidthPr'+'oportion']!==void(0x25d6+0x3d2*0x2+0x2*-0x16bd)&&(_0x2687a8['fitWidthPr'+'oportion']=_0x7a24ea['fitWidthPr'+'oportion']),_0x7a24ea['fitHeightP'+'roportion']!==void(0x2*0x1018+-0x181b+0x815*-0x1)&&(_0x2687a8['fitHeightP'+'roportion']=_0x7a24ea['fitHeightP'+'roportion']),_0x7a24ea['excludeFro'+'mLayout']!==void(0x2*0xfaa+0x5*0x3df+-0x32af*0x1)&&(_0x2687a8['excludeFro'+'mLayout']=_0x7a24ea['excludeFro'+'mLayout']),super['initialize'+'ComponentD'+'ata'](_0x2687a8,_0x7a24ea,_0x14455f);}['cloneCompo'+'nent'](_0x4bf508,_0x148e09){const _0xf834d0=_0x4bf508['layoutchil'+'d'];return this['addCompone'+'nt'](_0x148e09,{'enabled':_0xf834d0['enabled'],'minWidth':_0xf834d0['minWidth'],'minHeight':_0xf834d0['minHeight'],'maxWidth':_0xf834d0['maxWidth'],'maxHeight':_0xf834d0['maxHeight'],'fitWidthProportion':_0xf834d0['fitWidthPr'+'oportion'],'fitHeightProportion':_0xf834d0['fitHeightP'+'roportion'],'excludeFromLayout':_0xf834d0['excludeFro'+'mLayout']});}}we['_buildAcce'+'ssors'](gv['prototype'],Sv);const hu=-0xe3*0x29+-0x1c*0x123+-0xda3*-0x5,iR=0x10f*0xf+-0x112*0x8+-0x750,wg=0x1211+0x1225+-0x2434,rR=0x24ab+-0xb*0x2ef+-0x463,fh={};fh[Ae]={'axis':'x','size':'width','calculatedSize':'calculated'+'Width','minSize':'minWidth','maxSize':'maxWidth','fitting':'widthFitti'+'ng','fittingProportion':'fitWidthPr'+'oportion'},fh[je]={'axis':'y','size':'height','calculatedSize':'calculated'+'Height','minSize':'minHeight','maxSize':'maxHeight','fitting':'heightFitt'+'ing','fittingProportion':'fitHeightP'+'roportion'};const qp={};qp[Ae]=je,qp[je]=Ae;const aR={'minWidth':0x0,'minHeight':0x0,'maxWidth':Number['POSITIVE_I'+'NFINITY'],'maxHeight':Number['POSITIVE_I'+'NFINITY'],'width':null,'height':null,'fitWidthProportion':0x0,'fitHeightProportion':0x0},os={'NONE':'NONE','APPLY_STRETCHING':'APPLY_STRE'+'TCHING','APPLY_SHRINKING':'APPLY_SHRI'+'NKING'},ls=new J();function yv(_0xa5dc84){let _0x462621;const _0x2c4538=fh[_0xa5dc84],_0x39f3fa=fh[qp[_0xa5dc84]];function _0x24195a(_0x3580ef,_0x1d51fd){return-_0x1d51fd[_0x2c4538['size']]*_0x3580ef['pivot'][_0x2c4538['axis']];}function _0xb9f069(_0x81c3a0,_0x20417d){return-_0x20417d[_0x39f3fa['size']]*_0x81c3a0['pivot'][_0x39f3fa['axis']];}function _0x2a2e3d(_0x42de4f,_0x28d7c9){return _0x28d7c9[_0x2c4538['size']]*(0x1*-0x2287+-0xd0*0x19+-0x1a*-0x21c-_0x42de4f['pivot'][_0x2c4538['axis']]);}function _0x1518fc(_0x149148,_0x1654a2){_0x149148=_0x149148['filter'](_0x21937),_0x462621=_0x1654a2,ls['x']=_0x462621['containerS'+'ize']['x']-_0x462621['padding']['x']-_0x462621['padding']['z'],ls['y']=_0x462621['containerS'+'ize']['y']-_0x462621['padding']['y']-_0x462621['padding']['w'],_0x3e25d0(_0x149148);const _0x566445=_0x69276f(_0x159f40(_0x149148)),_0x422014=_0x2de5dd(_0x566445,_0x5e9975(_0x566445)),_0x55c133=_0x554e1e(_0x566445,_0x422014);return _0x5036cc(_0x566445,_0x422014,_0x55c133),_0x5da3e9(_0x566445,_0x422014,_0x55c133),_0x5c94d2(_0x566445);}function _0x21937(_0xe0f59d){const _0x35d40d=_0xe0f59d['entity']['layoutchil'+'d'];return!_0x35d40d||!_0x35d40d['enabled']||!_0x35d40d['excludeFro'+'mLayout'];}function _0x3e25d0(_0x3bd210){for(let _0x57a054=-0x19f1+0x1*-0xb68+0x2559;_0x57a054<_0x3bd210['length'];++_0x57a054){const _0x106628=_0x3bd210[_0x57a054],_0xf32f5c=_0x106628['anchor'];(_0xf32f5c['x']!==0x16f+0x23cc+0x3*-0xc69||_0xf32f5c['y']!==-0x24b*0x7+0x63d+-0x9d0*-0x1||_0xf32f5c['z']!==-0x239d+0xef2+0x14ab||_0xf32f5c['w']!==0x89f+-0x1654+0x13f*0xb)&&(_0x106628['anchor']=re['ZERO']);}}function _0x159f40(_0x4c21a7){if(!_0x462621['wrap'])return[_0x4c21a7];const _0x5ac04d=[[]],_0x35250d=_0x41db2b(_0x4c21a7);let _0x2f1b24=-0x1*-0xada+0xf3+-0xbcd;const _0x41f417=_0x462621[_0x2c4538['fitting']]===wg;for(let _0x50e3b8=-0x3*-0x737+0x57*0x57+-0x3336;_0x50e3b8<_0x4c21a7['length'];++_0x50e3b8){_0x5ac04d[_0x5ac04d['length']-(-0x16eb+0x14f1+0x1fb)]['length']>0xb67+0x2222+-0x2d89&&(_0x2f1b24+=_0x462621['spacing'][_0x2c4538['axis']]);const _0x5dffd6=_0x35250d[_0x50e3b8][_0x2c4538['size']];_0x2f1b24+=_0x5dffd6,!_0x41f417&&_0x2f1b24>ls[_0x2c4538['axis']]&&_0x5ac04d[_0x5ac04d['length']-(-0xd5a+-0x39b*-0x4+0x15*-0xd)]['length']!==0x4*-0x4+0x1871+-0x1861*0x1&&(_0x2f1b24=_0x5dffd6,_0x5ac04d['push']([])),_0x5ac04d[_0x5ac04d['length']-(0x13*-0x14f+0x83c+-0x1*-0x10a2)]['push'](_0x4c21a7[_0x50e3b8]),_0x41f417&&_0x2f1b24>ls[_0x2c4538['axis']]&&_0x50e3b8!==_0x4c21a7['length']-(0x2626+0x3*-0xb1+-0x12*0x201)&&(_0x2f1b24=-0x23*-0x6d+-0x5e5+-0x902,_0x5ac04d['push']([]));}return _0x5ac04d;}function _0x69276f(_0x46c773){const _0x1c34ec=_0x462621['orientatio'+'n']===Ae&&_0x462621['reverseX']||_0x462621['orientatio'+'n']===je&&_0x462621['reverseY'],_0x10298c=_0x462621['orientatio'+'n']===Ae&&_0x462621['reverseY']||_0x462621['orientatio'+'n']===je&&_0x462621['reverseX'];if(_0x1c34ec){for(let _0x5421ba=-0x30+-0xc61+0xc91*0x1;_0x5421ba<_0x46c773['length'];++_0x5421ba)_0x1c34ec&&_0x46c773[_0x5421ba]['reverse']();}return _0x10298c&&_0x46c773['reverse'](),_0x46c773;}function _0x5e9975(_0x249815){const _0x2889b9=[];for(let _0x5ac409=-0x19a3+0x6d9+0x12ca;_0x5ac409<_0x249815['length'];++_0x5ac409){const _0x6ee28f=_0x249815[_0x5ac409],_0x4b0d75=_0x41db2b(_0x6ee28f),_0x49fd8f=_0x65803(_0x4b0d75,_0x2c4538),_0x1599f3=_0x1dcb92(_0x462621[_0x2c4538['fitting']],_0x49fd8f,ls[_0x2c4538['axis']]);_0x1599f3===os['APPLY_STRE'+'TCHING']?_0x5c6392(_0x4b0d75,_0x49fd8f,_0x2c4538):_0x1599f3===os['APPLY_SHRI'+'NKING']&&_0x441d54(_0x4b0d75,_0x49fd8f,_0x2c4538),_0x2889b9['push'](_0x4b0d75);}return _0x2889b9;}function _0x2de5dd(_0x30d573,_0x5785f2){const _0x280386=[],_0x5be3f2=[];for(let _0x30ab6c=-0x2666+0x1dc1+0x8a5;_0x30ab6c<_0x30d573['length'];++_0x30ab6c){const _0x7accd0=_0x30d573[_0x30ab6c];_0x7accd0['largestEle'+'ment']=null,_0x7accd0['largestSiz'+'e']={'width':Number['NEGATIVE_I'+'NFINITY'],'height':Number['NEGATIVE_I'+'NFINITY']};for(let _0x1c938f=-0x3cd*0x5+-0x1075+0x2376;_0x1c938f<_0x7accd0['length'];++_0x1c938f){const _0x197e6c=_0x5785f2[_0x30ab6c][_0x1c938f];_0x197e6c[_0x39f3fa['size']]>_0x7accd0['largestSiz'+'e'][_0x39f3fa['size']]&&(_0x7accd0['largestEle'+'ment']=_0x7accd0[_0x1c938f],_0x7accd0['largestSiz'+'e']=_0x197e6c);}_0x280386['push'](_0x7accd0['largestEle'+'ment']),_0x5be3f2['push'](_0x7accd0['largestSiz'+'e']);}const _0x1f1559=_0x65803(_0x5be3f2,_0x39f3fa),_0x49d970=_0x1dcb92(_0x462621[_0x39f3fa['fitting']],_0x1f1559,ls[_0x39f3fa['axis']]);_0x49d970===os['APPLY_STRE'+'TCHING']?_0x5c6392(_0x5be3f2,_0x1f1559,_0x39f3fa):_0x49d970===os['APPLY_SHRI'+'NKING']&&_0x441d54(_0x5be3f2,_0x1f1559,_0x39f3fa);for(let _0x266ddb=-0xce5+0x813+0x4d2;_0x266ddb<_0x30d573['length'];++_0x266ddb){const _0x4a8c7c=_0x30d573[_0x266ddb];for(let _0x3afb49=0x2*0x631+0x8e9*0x3+-0x271d;_0x3afb49<_0x4a8c7c['length'];++_0x3afb49){const _0x3f983b=_0x5785f2[_0x266ddb][_0x3afb49],_0x50c2e9=_0x3f983b[_0x39f3fa['size']],_0x221529=_0x30d573['length']===-0x53c+0x21f4+-0x1cb7?ls[_0x39f3fa['axis']]:_0x4a8c7c['largestSiz'+'e'][_0x39f3fa['size']],_0x214bd5=_0x1dcb92(_0x462621[_0x39f3fa['fitting']],_0x50c2e9,_0x221529);_0x214bd5===os['APPLY_STRE'+'TCHING']?_0x3f983b[_0x39f3fa['size']]=Math['min'](_0x221529,_0x3f983b[_0x39f3fa['maxSize']]):_0x214bd5===os['APPLY_SHRI'+'NKING']&&(_0x3f983b[_0x39f3fa['size']]=Math['max'](_0x221529,_0x3f983b[_0x39f3fa['minSize']]));}}return _0x5785f2;}function _0x1dcb92(_0x1e95d9,_0x23ebfd,_0x536456){switch(_0x1e95d9){case hu:return os['NONE'];case iR:return _0x23ebfd<_0x536456?os['APPLY_STRE'+'TCHING']:os['NONE'];case wg:return _0x23ebfd>=_0x536456?os['APPLY_SHRI'+'NKING']:os['NONE'];case rR:return _0x23ebfd<_0x536456?os['APPLY_STRE'+'TCHING']:os['APPLY_SHRI'+'NKING'];default:throw new Error('Unrecogniz'+'ed\x20fitting'+'\x20mode:\x20'+_0x1e95d9);}}function _0x65803(_0x1ff467,_0x38e359){const _0x48a675=_0x4c9ac3(_0x1ff467,_0x38e359['size']),_0x41d5de=(_0x1ff467['length']-(0x1b6a+-0xd7*-0x12+-0x2a87))*_0x462621['spacing'][_0x38e359['axis']];return _0x48a675+_0x41d5de;}function _0x5c6392(_0x212711,_0x9ccc05,_0x30e108){const _0x4ac345=_0x383868(_0x212711,_0x30e108['maxSize']),_0xa982b=_0x5d7e55(_0x212711,_0x30e108['fittingPro'+'portion']),_0x343cdf=_0x3707a5(_0xa982b,_0x4ac345);let _0x4aed63=ls[_0x30e108['axis']]-_0x9ccc05;for(let _0x413e23=0x250e+-0x7b*-0x2f+-0x13e1*0x3;_0x413e23<_0x212711['length'];++_0x413e23){const _0x1609ad=_0x4ac345[_0x413e23],_0x5cfc98=_0x1a97fa(_0x1609ad,_0x4aed63,_0xa982b,_0x343cdf),_0x4ba802=_0x212711[_0x1609ad][_0x30e108['size']]+_0x5cfc98,_0x59135f=_0x212711[_0x1609ad][_0x30e108['maxSize']],_0x37fc19=Math['min'](_0x4ba802,_0x59135f);_0x212711[_0x1609ad][_0x30e108['size']]=_0x37fc19;const _0x289b41=Math['max'](_0x4ba802-_0x37fc19,0x23ea+-0x1a67+0x1*-0x983),_0x4bb6fe=_0x5cfc98-_0x289b41;_0x4aed63-=_0x4bb6fe;}}function _0x441d54(_0xcb1cce,_0x3a2cd1,_0x3efc53){const _0x191156=_0x383868(_0xcb1cce,_0x3efc53['minSize'],!(-0x461*-0x6+-0x1f1b+0x4d5)),_0x1abf28=_0x5d7e55(_0xcb1cce,_0x3efc53['fittingPro'+'portion']),_0x31d590=_0x5b2748(_0x1abf28),_0x1db532=_0x3707a5(_0x31d590,_0x191156);let _0x54187c=_0x3a2cd1-ls[_0x3efc53['axis']];for(let _0x3021de=0x4c*-0x4f+-0x1a5+0x1919;_0x3021de<_0xcb1cce['length'];++_0x3021de){const _0x525e77=_0x191156[_0x3021de],_0x3b37e3=_0x1a97fa(_0x525e77,_0x54187c,_0x31d590,_0x1db532),_0x1c13bc=_0xcb1cce[_0x525e77][_0x3efc53['size']]-_0x3b37e3,_0x5574cf=_0xcb1cce[_0x525e77][_0x3efc53['minSize']],_0x5bb6f2=Math['max'](_0x1c13bc,_0x5574cf);_0xcb1cce[_0x525e77][_0x3efc53['size']]=_0x5bb6f2;const _0x9b2612=Math['max'](_0x5bb6f2-_0x1c13bc,0xea7*-0x1+-0x16c8+0x256f),_0x5662f9=_0x3b37e3-_0x9b2612;_0x54187c-=_0x5662f9;}}function _0x1a97fa(_0x37aae2,_0x42db9e,_0x44e999,_0x5522cb){const _0x44bc95=_0x44e999[_0x37aae2],_0x1f6fab=_0x5522cb[_0x37aae2];return Math['abs'](_0x44bc95)<0xdff+-0x3*0x11+-0xdcc+0.00001&&Math['abs'](_0x1f6fab)<-0x6*0x1fd+-0x38*-0x86+-0x1*0x1162+0.00001?_0x42db9e:_0x42db9e*_0x44bc95/_0x1f6fab;}function _0x554e1e(_0x3e807c,_0x390ca4){const _0x382467={};_0x382467[_0x2c4538['axis']]=-0xb0f+-0x13f1+0x1f00,_0x382467[_0x39f3fa['axis']]=0x540+-0xa8*0x31+0x1ae8,_0x3e807c[_0x2c4538['size']]=Number['NEGATIVE_I'+'NFINITY'];const _0x3462e2=[];for(let _0x7182a8=0xb*-0x14b+0x1*-0x239+0x1072;_0x7182a8<_0x3e807c['length'];++_0x7182a8){const _0x4a46d1=_0x3e807c[_0x7182a8];if(_0x4a46d1['length']===-0xd1+0x1*-0x6ed+0x7be){_0x3462e2['push']([]);continue;}const _0x3d21f5=[],_0x3d8a39=_0x390ca4[_0x7182a8];for(let _0x477bda=-0x8fe*-0x1+0x5f5+0x1*-0xef3;_0x477bda<_0x4a46d1['length'];++_0x477bda){const _0x5b1502=_0x4a46d1[_0x477bda],_0x1dda10=_0x3d8a39[_0x477bda];_0x382467[_0x39f3fa['axis']]-=_0xb9f069(_0x5b1502,_0x1dda10),_0x382467[_0x2c4538['axis']]-=_0x24195a(_0x5b1502,_0x1dda10),_0x3d21f5[_0x477bda]={},_0x3d21f5[_0x477bda][_0x2c4538['axis']]=_0x382467[_0x2c4538['axis']],_0x3d21f5[_0x477bda][_0x39f3fa['axis']]=_0x382467[_0x39f3fa['axis']],_0x382467[_0x39f3fa['axis']]+=_0xb9f069(_0x5b1502,_0x1dda10),_0x382467[_0x2c4538['axis']]+=_0x2a2e3d(_0x5b1502,_0x1dda10)+_0x462621['spacing'][_0x2c4538['axis']];}_0x4a46d1[_0x2c4538['size']]=_0x382467[_0x2c4538['axis']]-_0x462621['spacing'][_0x2c4538['axis']],_0x4a46d1[_0x39f3fa['size']]=_0x4a46d1['largestSiz'+'e'][_0x39f3fa['size']],_0x3e807c[_0x2c4538['size']]=Math['max'](_0x3e807c[_0x2c4538['size']],_0x4a46d1[_0x2c4538['size']]),_0x382467[_0x2c4538['axis']]=-0x11fa+0x1ba0+-0x9a6*0x1,_0x382467[_0x39f3fa['axis']]+=_0x4a46d1[_0x39f3fa['size']]+_0x462621['spacing'][_0x39f3fa['axis']],_0x3462e2['push'](_0x3d21f5);}return _0x3e807c[_0x39f3fa['size']]=_0x382467[_0x39f3fa['axis']]-_0x462621['spacing'][_0x39f3fa['axis']],_0x3462e2;}function _0x5036cc(_0x47db18,_0x24b2ab,_0x2ee109){const _0x3da41d=_0x462621['alignment'][_0x2c4538['axis']],_0x260e0a=_0x462621['alignment'][_0x39f3fa['axis']],_0x1afea9=_0x462621['padding'][_0x2c4538['axis']],_0x2a59d5=_0x462621['padding'][_0x39f3fa['axis']];for(let _0x3ca5e7=-0x1a54+0xc2*-0x3+0x1c9a;_0x3ca5e7<_0x47db18['length'];++_0x3ca5e7){const _0x29a97b=_0x47db18[_0x3ca5e7],_0x9723ac=_0x24b2ab[_0x3ca5e7],_0x481019=_0x2ee109[_0x3ca5e7],_0x13f676=(ls[_0x2c4538['axis']]-_0x29a97b[_0x2c4538['size']])*_0x3da41d+_0x1afea9,_0x4634ee=(ls[_0x39f3fa['axis']]-_0x47db18[_0x39f3fa['size']])*_0x260e0a+_0x2a59d5;for(let _0x41f4c8=-0x16a4+-0x1855+0x1*0x2ef9;_0x41f4c8<_0x29a97b['length'];++_0x41f4c8){const _0x302f10=(_0x29a97b[_0x39f3fa['size']]-_0x9723ac[_0x41f4c8][_0x39f3fa['size']])*_0x462621['alignment'][_0x39f3fa['axis']];_0x481019[_0x41f4c8][_0x2c4538['axis']]+=_0x13f676,_0x481019[_0x41f4c8][_0x39f3fa['axis']]+=_0x4634ee+_0x302f10;}}}function _0x5da3e9(_0x320bfc,_0x6e4e8b,_0x3e9f9a){for(let _0x1f33c7=-0xd7*0x15+-0xb6c+0x1*0x1d0f;_0x1f33c7<_0x320bfc['length'];++_0x1f33c7){const _0x325494=_0x320bfc[_0x1f33c7],_0x3ecf73=_0x6e4e8b[_0x1f33c7],_0x2c4204=_0x3e9f9a[_0x1f33c7];for(let _0x4d1d3c=-0x191c*0x1+-0x2098*0x1+0x39b4;_0x4d1d3c<_0x325494['length'];++_0x4d1d3c){const _0x1c7db6=_0x325494[_0x4d1d3c];_0x1c7db6[_0x2c4538['calculated'+'Size']]=_0x3ecf73[_0x4d1d3c][_0x2c4538['size']],_0x1c7db6[_0x39f3fa['calculated'+'Size']]=_0x3ecf73[_0x4d1d3c][_0x39f3fa['size']],_0x462621['orientatio'+'n']===Ae?_0x1c7db6['entity']['setLocalPo'+'sition'](_0x2c4204[_0x4d1d3c][_0x2c4538['axis']],_0x2c4204[_0x4d1d3c][_0x39f3fa['axis']],_0x1c7db6['entity']['getLocalPo'+'sition']()['z']):_0x1c7db6['entity']['setLocalPo'+'sition'](_0x2c4204[_0x4d1d3c][_0x39f3fa['axis']],_0x2c4204[_0x4d1d3c][_0x2c4538['axis']],_0x1c7db6['entity']['getLocalPo'+'sition']()['z']);}}}function _0x5c94d2(_0x4a2c55){const _0x18437a=_0x4a2c55['width'],_0x25abfc=_0x4a2c55['height'],_0x3f15f7=(ls['x']-_0x18437a)*_0x462621['alignment']['x']+_0x462621['padding']['x'],_0x121eb8=(ls['y']-_0x25abfc)*_0x462621['alignment']['y']+_0x462621['padding']['y'];return{'bounds':new re(_0x3f15f7,_0x121eb8,_0x18437a,_0x25abfc)};}function _0x41db2b(_0x4ec1e2){const _0xc9b3f1=[];for(let _0x18317e=-0x848+-0x1*-0x124f+0xa07*-0x1;_0x18317e<_0x4ec1e2['length'];++_0x18317e){const _0x20febe=_0x4ec1e2[_0x18317e],_0x302daa=Math['max'](_0x33ab05(_0x20febe,'minWidth'),0x188+0x2591+0x1*-0x2719),_0x5bd048=Math['max'](_0x33ab05(_0x20febe,'minHeight'),-0x6a1*-0x1+-0x179b+-0x1*-0x10fa),_0x17d5ac=Math['max'](_0x33ab05(_0x20febe,'maxWidth'),_0x302daa),_0x2f3415=Math['max'](_0x33ab05(_0x20febe,'maxHeight'),_0x5bd048),_0x50865f=_0x362a5f(_0x33ab05(_0x20febe,'width'),_0x302daa,_0x17d5ac),_0x4166f4=_0x362a5f(_0x33ab05(_0x20febe,'height'),_0x5bd048,_0x2f3415),_0x357deb=_0x33ab05(_0x20febe,'fitWidthPr'+'oportion'),_0x29d1db=_0x33ab05(_0x20febe,'fitHeightP'+'roportion');_0xc9b3f1['push']({'minWidth':_0x302daa,'minHeight':_0x5bd048,'maxWidth':_0x17d5ac,'maxHeight':_0x2f3415,'width':_0x50865f,'height':_0x4166f4,'fitWidthProportion':_0x357deb,'fitHeightProportion':_0x29d1db});}return _0xc9b3f1;}function _0x33ab05(_0x2224fd,_0x523297){const _0x49b1c0=_0x2224fd['entity']['layoutchil'+'d'];return _0x49b1c0&&_0x49b1c0['enabled']&&_0x49b1c0[_0x523297]!==void(0x2*0x35f+0x874+0x799*-0x2)&&_0x49b1c0[_0x523297]!==null?_0x49b1c0[_0x523297]:_0x2224fd[_0x523297]!==void(0x1339+0x1235+-0x256e)?_0x2224fd[_0x523297]:aR[_0x523297];}function _0x362a5f(_0x39564e,_0x586200,_0x445837){return Math['min'](Math['max'](_0x39564e,_0x586200),_0x445837);}function _0x4c9ac3(_0x54d353,_0x1e7542){return _0x54d353['reduce']((_0x3868c4,_0x1f277c)=>_0x3868c4+_0x1f277c[_0x1e7542],-0x8e*-0x2f+-0x244f+0xa3d);}function _0x5d7e55(_0x5814d8,_0x369349){const _0x591a4e=_0x4c9ac3(_0x5814d8,_0x369349),_0x5795d8=[],_0x36de30=_0x5814d8['length'];if(_0x591a4e===-0x929+-0x70d+-0x81b*-0x2){for(let _0x3efe20=-0x1*-0x5f2+-0x2*-0x5d7+-0xc*0x178;_0x3efe20<_0x36de30;++_0x3efe20)_0x5795d8['push']((0x1d0b+0x13d*-0x16+0x14*-0x17)/_0x36de30);}else{for(let _0x1fd09e=-0x96f+0x1469+-0xafa;_0x1fd09e<_0x36de30;++_0x1fd09e)_0x5795d8['push'](_0x5814d8[_0x1fd09e][_0x369349]/_0x591a4e);}return _0x5795d8;}function _0x5b2748(_0x130b5f){if(_0x130b5f['length']===0x1*-0x1e1d+-0x1050+0x2e6e)return[0x2a4+-0x259a+-0x1*-0x22f7];const _0x115fb0=[],_0x194bbe=_0x130b5f['length'];for(let _0x3efe7e=0x127f+0x2270+0x1*-0x34ef;_0x3efe7e<_0x194bbe;++_0x3efe7e)_0x115fb0['push']((0x2088+0x1d42*-0x1+0x5d*-0x9-_0x130b5f[_0x3efe7e])/(_0x194bbe-(-0x4*-0x8b4+-0x26f+-0x2060)));return _0x115fb0;}function _0x383868(_0x1305e7,_0x3bb0a5,_0x1b6f60){return _0x1305e7['forEach'](_0x49b510),_0x1305e7['slice']()['sort']((_0x381166,_0x2ed0a3)=>_0x1b6f60?_0x2ed0a3[_0x3bb0a5]-_0x381166[_0x3bb0a5]:_0x381166[_0x3bb0a5]-_0x2ed0a3[_0x3bb0a5])['map'](_0x1a2835);}function _0x49b510(_0x2e5930,_0x3600c9){_0x2e5930['index']=_0x3600c9;}function _0x1a2835(_0x495042){return _0x495042['index'];}function _0x3707a5(_0x241679,_0xb6e5ba){const _0x339724=[];_0x339724[_0xb6e5ba[_0x241679['length']-(-0x6c7*0x3+-0x2b*0xe3+-0x3a77*-0x1)]]=_0x241679[_0xb6e5ba[_0x241679['length']-(0xc23+0x20a8+-0x2cca)]];for(let _0x236376=_0x241679['length']-(0x2*0x425+0x1016+-0x1*0x185e);_0x236376>=-0x2611+-0x5*-0x424+-0x379*-0x5;--_0x236376)_0x339724[_0xb6e5ba[_0x236376]]=_0x339724[_0xb6e5ba[_0x236376+(0x2539*-0x1+0x50c+0x202e)]]+_0x241679[_0xb6e5ba[_0x236376]];return _0x339724;}return _0x1518fc;}const jp={};jp[Ae]=yv(Ae),jp[je]=yv(je);class nR{['calculateL'+'ayout'](_0x12b597,_0x18b523){const _0x40633f=jp[_0x18b523['orientatio'+'n']];if(_0x40633f)return _0x40633f(_0x12b597,_0x18b523);throw new Error('Unrecogniz'+'ed\x20orienta'+'tion\x20value'+':\x20'+_0x18b523['orientatio'+'n']);}}function Eg(_0x11f9da){return _0x11f9da['element'];}function oR(_0x4f80b4){return _0x4f80b4['enabled']&&_0x4f80b4['element']&&_0x4f80b4['element']['enabled'];}class vv extends we{constructor(_0xa9e350,_0x484b57){super(_0xa9e350,_0x484b57),h(this,'_orientati'+'on',Ae),h(this,'_reverseX',!(-0x5c8+-0x1ea+0x7b3)),h(this,'_reverseY',!(0x15a3+0x1f03+-0x34a6)),h(this,'_alignment',new J(0x89f+0x1*-0x781+-0x11e,-0x1d0*0xc+-0xcaf+-0x8*-0x44e)),h(this,'_padding',new re()),h(this,'_spacing',new J()),h(this,'_widthFitt'+'ing',hu),h(this,'_heightFit'+'ting',hu),h(this,'_wrap',!(-0x38c+-0x1a54+0x1de1)),h(this,'_layoutCal'+'culator',new nR()),(this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'on'),this['entity']['children']['forEach'](_0x20f138=>{this['_listenFor'+'ReflowEven'+'ts'](_0x20f138,'on');}),this['entity']['on']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['on']('childremov'+'e',this['_onChildRe'+'move'],this),w['assert'](_0xa9e350['app']['systems']['element'],'System\x20\x27el'+'ement\x27\x20doe'+'sn\x27t\x20exist'),_0xa9e350['app']['systems']['element']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0xa9e350['app']['systems']['element']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),w['assert'](_0xa9e350['app']['systems']['layoutchil'+'d'],'System\x20\x27la'+'youtchild\x27'+'\x20doesn\x27t\x20e'+'xist'),_0xa9e350['app']['systems']['layoutchil'+'d']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0xa9e350['app']['systems']['layoutchil'+'d']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this));}set['orientatio'+'n'](_0x15ba90){_0x15ba90!==this['_orientati'+'on']&&(this['_orientati'+'on']=_0x15ba90,this['_scheduleR'+'eflow']());}get['orientatio'+'n'](){return this['_orientati'+'on'];}set['reverseX'](_0x4d0291){_0x4d0291!==this['_reverseX']&&(this['_reverseX']=_0x4d0291,this['_scheduleR'+'eflow']());}get['reverseX'](){return this['_reverseX'];}set['reverseY'](_0x1e90d5){_0x1e90d5!==this['_reverseY']&&(this['_reverseY']=_0x1e90d5,this['_scheduleR'+'eflow']());}get['reverseY'](){return this['_reverseY'];}set['alignment'](_0x46ad0b){_0x46ad0b['equals'](this['_alignment'])||(this['_alignment']['copy'](_0x46ad0b),this['_scheduleR'+'eflow']());}get['alignment'](){return this['_alignment'];}set['padding'](_0x2ba14a){_0x2ba14a['equals'](this['_padding'])||(this['_padding']['copy'](_0x2ba14a),this['_scheduleR'+'eflow']());}get['padding'](){return this['_padding'];}set['spacing'](_0x4889d2){_0x4889d2['equals'](this['_spacing'])||(this['_spacing']['copy'](_0x4889d2),this['_scheduleR'+'eflow']());}get['spacing'](){return this['_spacing'];}set['widthFitti'+'ng'](_0x218ea5){_0x218ea5!==this['_widthFitt'+'ing']&&(this['_widthFitt'+'ing']=_0x218ea5,this['_scheduleR'+'eflow']());}get['widthFitti'+'ng'](){return this['_widthFitt'+'ing'];}set['heightFitt'+'ing'](_0x48d81b){_0x48d81b!==this['_heightFit'+'ting']&&(this['_heightFit'+'ting']=_0x48d81b,this['_scheduleR'+'eflow']());}get['heightFitt'+'ing'](){return this['_heightFit'+'ting'];}set['wrap'](_0x2bbca7){_0x2bbca7!==this['_wrap']&&(this['_wrap']=_0x2bbca7,this['_scheduleR'+'eflow']());}get['wrap'](){return this['_wrap'];}['_isSelfOrC'+'hild'](_0x5ef95e){return _0x5ef95e===this['entity']||this['entity']['children']['indexOf'](_0x5ef95e)!==-(-0x938+0x810*-0x3+0xb23*0x3);}['_listenFor'+'ReflowEven'+'ts'](_0x4624d4,_0x32253b){_0x4624d4['element']&&(_0x4624d4['element'][_0x32253b]('enableelem'+'ent',this['_scheduleR'+'eflow'],this),_0x4624d4['element'][_0x32253b]('disableele'+'ment',this['_scheduleR'+'eflow'],this),_0x4624d4['element'][_0x32253b]('resize',this['_scheduleR'+'eflow'],this),_0x4624d4['element'][_0x32253b]('set:pivot',this['_scheduleR'+'eflow'],this)),_0x4624d4['layoutchil'+'d']&&(_0x4624d4['layoutchil'+'d'][_0x32253b]('set_enable'+'d',this['_scheduleR'+'eflow'],this),_0x4624d4['layoutchil'+'d'][_0x32253b]('resize',this['_scheduleR'+'eflow'],this));}['_onElement'+'OrLayoutCo'+'mponentAdd'](_0x474c48){this['_isSelfOrC'+'hild'](_0x474c48)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x474c48,'on'),this['_scheduleR'+'eflow']());}['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'](_0x37da66){this['_isSelfOrC'+'hild'](_0x37da66)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x37da66,'off'),this['_scheduleR'+'eflow']());}['_onChildIn'+'sert'](_0xcabe15){this['_listenFor'+'ReflowEven'+'ts'](_0xcabe15,'on'),this['_scheduleR'+'eflow']();}['_onChildRe'+'move'](_0x3ae196){this['_listenFor'+'ReflowEven'+'ts'](_0x3ae196,'off'),this['_scheduleR'+'eflow']();}['_scheduleR'+'eflow'](){this['enabled']&&this['entity']&&this['entity']['enabled']&&!this['_isPerform'+'ingReflow']&&this['system']['scheduleRe'+'flow'](this);}['reflow'](){const _0x52ce08=Eg(this['entity']),_0x5e296e=this['entity']['children']['filter'](oR)['map'](Eg);if(!_0x52ce08||_0x5e296e['length']===-0x246*-0x7+0x1c89+-0x2c73)return;const _0x33718e=Math['max'](_0x52ce08['calculated'+'Width'],0xc13*0x2+-0x1b39+-0x1*-0x313),_0x288c9d=Math['max'](_0x52ce08['calculated'+'Height'],0x4bd+0x1e89*0x1+-0x2346),_0x120467={'orientation':this['_orientati'+'on'],'reverseX':this['_reverseX'],'reverseY':this['_reverseY'],'alignment':this['_alignment'],'padding':this['_padding'],'spacing':this['_spacing'],'widthFitting':this['_widthFitt'+'ing'],'heightFitting':this['_heightFit'+'ting'],'wrap':this['_wrap'],'containerSize':new J(_0x33718e,_0x288c9d)};this['_isPerform'+'ingReflow']=!(0x1842+0x127*-0x2+-0x15f4);const _0x4049de=this['_layoutCal'+'culator']['calculateL'+'ayout'](_0x5e296e,_0x120467);this['_isPerform'+'ingReflow']=!(0x10aa+0x258e+-0x3637),this['fire']('reflow',_0x4049de);}['onEnable'](){this['_scheduleR'+'eflow']();}['onRemove'](){this['entity']['off']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['off']('childremov'+'e',this['_onChildRe'+'move'],this),this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'off'),this['entity']['children']['forEach'](_0x27558a=>{this['_listenFor'+'ReflowEven'+'ts'](_0x27558a,'off');}),this['system']['app']['systems']['element']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['element']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this);}}class lR{constructor(){this['enabled']=!(-0x1*-0x251+-0x6d4+-0x3*-0x181);}}const xv=['enabled'],cR=-0x2c*0xb5+0xbed+0x1*0x1393;class hR extends ct{constructor(_0xf12cba){super(_0xf12cba),this['id']='layoutgrou'+'p',this['ComponentT'+'ype']=vv,this['DataType']=lR,this['schema']=xv,this['_reflowQue'+'ue']=[],this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0xd5f216,_0x47039f,_0x4dd795){_0x47039f['enabled']!==void(-0xdc*0xa+0x1007*0x1+-0x76f)&&(_0xd5f216['enabled']=_0x47039f['enabled']),_0x47039f['orientatio'+'n']!==void(-0x75b+-0x25d*-0x7+-0x930)&&(_0xd5f216['orientatio'+'n']=_0x47039f['orientatio'+'n']),_0x47039f['reverseX']!==void(0x1bd*-0x1+0x9*0x105+0x2*-0x3b8)&&(_0xd5f216['reverseX']=_0x47039f['reverseX']),_0x47039f['reverseY']!==void(-0xc9d+-0x5b*0x64+0x3029)&&(_0xd5f216['reverseY']=_0x47039f['reverseY']),_0x47039f['alignment']!==void(0x1da7+-0x4*0x6bb+0x1*-0x2bb)&&(_0xd5f216['alignment']=Array['isArray'](_0x47039f['alignment'])?new J(_0x47039f['alignment']):_0x47039f['alignment']),_0x47039f['padding']!==void(0x43*-0x19+-0xc5*0x4+0x99f)&&(_0xd5f216['padding']=Array['isArray'](_0x47039f['padding'])?new re(_0x47039f['padding']):_0x47039f['padding']),_0x47039f['spacing']!==void(0x60*0x5b+0x18e2+-0x3b02)&&(_0xd5f216['spacing']=Array['isArray'](_0x47039f['spacing'])?new J(_0x47039f['spacing']):_0x47039f['spacing']),_0x47039f['widthFitti'+'ng']!==void(-0x1724+0x1edf+-0x7bb)&&(_0xd5f216['widthFitti'+'ng']=_0x47039f['widthFitti'+'ng']),_0x47039f['heightFitt'+'ing']!==void(-0xb82+-0x18fc+0x247e)&&(_0xd5f216['heightFitt'+'ing']=_0x47039f['heightFitt'+'ing']),_0x47039f['wrap']!==void(-0xd27+-0x7f0+0x1517)&&(_0xd5f216['wrap']=_0x47039f['wrap']),super['initialize'+'ComponentD'+'ata'](_0xd5f216,_0x47039f,_0x4dd795);}['cloneCompo'+'nent'](_0x2869aa,_0xf77502){const _0x106930=_0x2869aa['layoutgrou'+'p'];return this['addCompone'+'nt'](_0xf77502,{'enabled':_0x106930['enabled'],'orientation':_0x106930['orientatio'+'n'],'reverseX':_0x106930['reverseX'],'reverseY':_0x106930['reverseY'],'alignment':_0x106930['alignment'],'padding':_0x106930['padding'],'spacing':_0x106930['spacing'],'widthFitting':_0x106930['widthFitti'+'ng'],'heightFitting':_0x106930['heightFitt'+'ing'],'wrap':_0x106930['wrap']});}['scheduleRe'+'flow'](_0x679681){this['_reflowQue'+'ue']['indexOf'](_0x679681)===-(-0x373*-0x1+0x3e*0x1b+-0x9fc)&&this['_reflowQue'+'ue']['push'](_0x679681);}['_onPostUpd'+'ate'](){this['_processRe'+'flowQueue']();}['_processRe'+'flowQueue'](){if(this['_reflowQue'+'ue']['length']===-0x11b6+-0x24b*0xd+0x981*0x5)return;let _0xcf7efd=0x478*0x3+-0x205+-0xb*0x109;for(;this['_reflowQue'+'ue']['length']>-0x141a+-0x4*-0x349+0x6f6;){const _0x5e067b=this['_reflowQue'+'ue']['slice']();this['_reflowQue'+'ue']['length']=-0x1c81*-0x1+-0x1*0x11b3+-0x2*0x567,_0x5e067b['sort']((_0x57d7a6,_0x6b2d6c)=>_0x57d7a6['entity']['graphDepth']-_0x6b2d6c['entity']['graphDepth']);for(let _0x4a065b=0x6*-0x32b+-0xdab+-0x7*-0x4ab;_0x4a065b<_0x5e067b['length'];++_0x4a065b)_0x5e067b[_0x4a065b]['reflow']();if(++_0xcf7efd>=cR){console['warn']('Max\x20reflow'+'\x20iteration'+'s\x20limit\x20re'+'ached,\x20bai'+'ling.');break;}}}['_onRemoveC'+'omponent'](_0x352df6,_0x29b81b){_0x29b81b['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}we['_buildAcce'+'ssors'](vv['prototype'],xv);class dR{constructor(){h(this,'map',new Map());}['destroy'](_0x9ad80f){this['map']['forEach'](_0x313421=>_0x313421['mesh']['destroy']());}}const fR=new Kt(),Tv=(_0x567b23,_0x203e66)=>{const _0x271c0a=fR['get'](_0x567b23,()=>new dR());let _0x47ea40=_0x271c0a['map']['get'](_0x203e66);if(!_0x47ea40){let _0xd923c3,_0x30ee48;switch(_0x203e66){case'box':_0xd923c3=Ge['fromGeomet'+'ry'](_0x567b23,new Hf()),_0x30ee48={'x':0x2,'y':0x2,'z':0x2,'uv':(0x2*-0x9ca+0xa12+0x1c*0x57)/(0x1*-0x1b9f+-0x37c+0xe*0x239)};break;case'capsule':_0xd923c3=Ge['fromGeomet'+'ry'](_0x567b23,new nA({'radius':0.5,'height':0x2})),_0x30ee48={'x':Math['PI']*(-0x11ef+-0xbec+-0x1*-0x1ddd),'y':Math['PI'],'z':Math['PI']*(0x5*0x6df+0x18a7+-0x3b00*0x1),'uv':(0x1db9+0x1f9f+-0x17f*0x29)/(-0x652+-0xc85+0x12da)+(0xad6*0x1+-0x1*0x19f4+-0xf1f*-0x1)/(0x13*-0x7b+-0x10f*0x24+0x2f40)/(0x7b2+0xc*-0x5e+-0x347)*(0x4*0x7dd+-0x6d6+-0x189c)};break;case'cone':_0xd923c3=Ge['fromGeomet'+'ry'](_0x567b23,new oA({'baseRadius':0.5,'peakRadius':0x0,'height':0x1})),_0x30ee48={'x':2.54,'y':2.54,'z':2.54,'uv':(-0xefe+-0x1ed1*-0x1+-0x6*0x2a3)/(-0x25e9+-0x2*-0xb85+0x27b*0x6)+(-0x117*0x16+0x1*0x24bf+-0xcc4)/(-0x258b+-0x4ac+0x2a3a)/(0x4a0+0xfcd+-0x146a)};break;case'cylinder':_0xd923c3=Ge['fromGeomet'+'ry'](_0x567b23,new lA({'radius':0.5,'height':0x1})),_0x30ee48={'x':Math['PI'],'y':(0x2429+0x6ab+-0x2ad4+0.79)*(-0x14fe+-0x16e1+0x2be1),'z':Math['PI'],'uv':(-0x1316*-0x1+0x7*-0x3cd+0x786)/(-0x4*-0x61+-0x3af*0x2+-0x4f*-0x13)+(0x21*0x125+0xbb9*0x1+0x3*-0x107f)/(-0x7eb+0x1b2a+-0x133c)/(-0x1010+0x140+-0x4f1*-0x3)*(0x2066+0x18a*-0xd+-0x631*0x2)};break;case'plane':_0xd923c3=Ge['fromGeomet'+'ry'](_0x567b23,new cA({'halfExtents':new J(0x2462*0x1+-0x4*0x628+0x1ae*-0x7+0.5,-0xd*0x10f+-0xc3+0xe86+0.5),'widthSegments':0x1,'lengthSegments':0x1})),_0x30ee48={'x':0x0,'y':0x1,'z':0x0,'uv':0x1};break;case'sphere':_0xd923c3=Ge['fromGeomet'+'ry'](_0x567b23,new Hp({'radius':0.5})),_0x30ee48={'x':Math['PI'],'y':Math['PI'],'z':Math['PI'],'uv':0x1};break;case'torus':_0xd923c3=Ge['fromGeomet'+'ry'](_0x567b23,new hA({'tubeRadius':0.2,'ringRadius':0.3})),_0x30ee48={'x':Math['PI']*(0x2670+-0x2467+-0x209+0.5)*(0x15*0xb+0x2*0x60+-0x2f*0x9+0.5)-Math['PI']*(0x1edb+-0x1*0x4fd+-0x19de+0.1)*(0xb9e+0x13f+-0xcdd+0.1),'y':0.4,'z':0.4,'uv':0x1};break;default:throw new Error('Invalid\x20pr'+'imitive\x20ty'+'pe:\x20'+_0x203e66);}_0xd923c3['incRefCoun'+'t'](),_0x47ea40={'mesh':_0xd923c3,'area':_0x30ee48},_0x271c0a['map']['set'](_0x203e66,_0x47ea40);}return _0x47ea40;};class Yp extends we{constructor(_0x307f49,_0x11c454){super(_0x307f49,_0x11c454),h(this,'_type','asset'),h(this,'_asset',null),h(this,'_model',null),h(this,'_mapping',{}),h(this,'_castShado'+'ws',!(-0x1*0x20f6+0x1f*0xe4+0x55a*0x1)),h(this,'_receiveSh'+'adows',!(-0x2298+-0x1*0x65f+0x28f7)),h(this,'_materialA'+'sset',null),h(this,'_material'),h(this,'_castShado'+'wsLightmap',!(-0x1692+0x20a+0x1488)),h(this,'_lightmapp'+'ed',!(0x396+0x478+-0x80d)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x511*0x7+0x13*-0x5d+0x2a5f),h(this,'isStatic',!(-0x650+0x1*-0x265+-0xdf*-0xa)),h(this,'_layers',[Ji]),h(this,'_batchGrou'+'pId',-(-0x484*-0x5+-0xe10+0x1*-0x883)),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_materialE'+'vents',null),h(this,'_clonedMod'+'el',!(0x11e2+0x105f*-0x1+0x182*-0x1)),h(this,'_batchGrou'+'p',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_material']=_0x307f49['defaultMat'+'erial'],_0x11c454['on']('remove',this['onRemoveCh'+'ild'],this),_0x11c454['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x11c454['on']('insert',this['onInsertCh'+'ild'],this),_0x11c454['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['meshInstan'+'ces'](_0x3aec14){this['_model']&&(this['_model']['meshInstan'+'ces']=_0x3aec14);}get['meshInstan'+'ces'](){return this['_model']?this['_model']['meshInstan'+'ces']:null;}set['customAabb'](_0x19770d){if(this['_customAab'+'b']=_0x19770d,this['_model']){const _0x181d4a=this['_model']['meshInstan'+'ces'];if(_0x181d4a){for(let _0x166f1d=0x8*-0x2f4+0x1*-0xcac+0x244c;_0x166f1d<_0x181d4a['length'];_0x166f1d++)_0x181d4a[_0x166f1d]['setCustomA'+'abb'](this['_customAab'+'b']);}}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x274140){if(this['_type']!==_0x274140){if(this['_area']=null,this['_type']=_0x274140,_0x274140==='asset')this['_asset']!==null?this['_bindModel'+'Asset'](this['_asset']):this['model']=null;else{const _0x5d1259=Tv(this['system']['app']['graphicsDe'+'vice'],_0x274140);this['_area']=_0x5d1259['area'];const _0x58c9c5=_0x5d1259['mesh'],_0x289359=new Ie(),_0x5da794=new tr();_0x5da794['graph']=_0x289359,_0x5da794['meshInstan'+'ces']=[new He(_0x58c9c5,this['_material'],_0x289359)],this['model']=_0x5da794,this['_asset']=null;}}}get['type'](){return this['_type'];}set['asset'](_0x204c9d){const _0x343c51=this['system']['app']['assets'];let _0x39a779=_0x204c9d;if(_0x204c9d instanceof pe&&(_0x39a779=_0x204c9d['id']),this['_asset']!==_0x39a779){if(this['_asset']){_0x343c51['off']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this);const _0x3d54a8=_0x343c51['get'](this['_asset']);_0x3d54a8&&this['_unbindMod'+'elAsset'](_0x3d54a8);}if(this['_asset']=_0x39a779,this['_asset']){const _0x594dfc=_0x343c51['get'](this['_asset']);_0x594dfc?this['_bindModel'+'Asset'](_0x594dfc):(this['model']=null,_0x343c51['on']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this));}else this['model']=null;}}get['asset'](){return this['_asset'];}set['model'](_0x4e7c76){if(this['_model']!==_0x4e7c76){if(_0x4e7c76&&_0x4e7c76['_immutable']){w['error']('Invalid\x20at'+'tempt\x20to\x20a'+'ssign\x20a\x20mo'+'del\x20to\x20mul'+'tiple\x20Mode'+'lComponent'+'s');return;}if(this['_model']&&(this['_model']['_immutable']=!(-0x63b+-0x1520*-0x1+-0xee4),this['removeMode'+'lFromLayer'+'s'](),this['_model']['getGraph']()['destroy'](),delete this['_model']['_entity'],this['_clonedMod'+'el']&&(this['_model']['destroy'](),this['_clonedMod'+'el']=!(0x949+0x7ea*-0x2+0x68c))),this['_model']=_0x4e7c76,this['_model']){this['_model']['_immutable']=!(-0x446+-0x33d*0x1+0x783);const _0x207c4=this['_model']['meshInstan'+'ces'];for(let _0x4a9674=0xcc+-0x1548+0x13*0x114;_0x4a9674<_0x207c4['length'];_0x4a9674++)_0x207c4[_0x4a9674]['castShadow']=this['_castShado'+'ws'],_0x207c4[_0x4a9674]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x207c4[_0x4a9674]['setCustomA'+'abb'](this['_customAab'+'b']);this['lightmappe'+'d']=this['_lightmapp'+'ed'],this['entity']['addChild'](this['_model']['graph']),this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_model']['_entity']=this['entity'],this['entity']['animation']&&this['entity']['animation']['setModel'](this['_model']),this['entity']['anim']&&this['entity']['anim']['rebind'](),this['type']==='asset'?this['mapping']=this['_mapping']:this['_unsetMate'+'rialEvents']();}}}get['model'](){return this['_model'];}set['lightmappe'+'d'](_0x354127){if(_0x354127!==this['_lightmapp'+'ed']&&(this['_lightmapp'+'ed']=_0x354127,this['_model'])){const _0xcdbd03=this['_model']['meshInstan'+'ces'];for(let _0x4d01d3=-0x1*0x1b7b+0x16ad+0x267*0x2;_0x4d01d3<_0xcdbd03['length'];_0x4d01d3++)_0xcdbd03[_0x4d01d3]['setLightma'+'pped'](_0x354127);}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x5ee56a){if(this['_castShado'+'ws']===_0x5ee56a)return;const _0xa3ecfe=this['_model'];if(_0xa3ecfe){const _0x538eb1=this['layers'],_0xc24d00=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x5ee56a)for(let _0x2b07e8=-0x1d13+0x5b*0x21+-0x456*-0x4;_0x2b07e8<_0x538eb1['length'];_0x2b07e8++){const _0x2313ad=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x2b07e8]);_0x2313ad&&_0x2313ad['removeShad'+'owCasters'](_0xa3ecfe['meshInstan'+'ces']);}const _0x37d1af=_0xa3ecfe['meshInstan'+'ces'];for(let _0x9d1d60=-0x1f85+-0x164f+0x35d4;_0x9d1d60<_0x37d1af['length'];_0x9d1d60++)_0x37d1af[_0x9d1d60]['castShadow']=_0x5ee56a;if(!this['_castShado'+'ws']&&_0x5ee56a)for(let _0x5e0a05=0x664+0x1*0x536+0x9*-0x14a;_0x5e0a05<_0x538eb1['length'];_0x5e0a05++){const _0x156ec0=_0xc24d00['layers']['getLayerBy'+'Id'](_0x538eb1[_0x5e0a05]);_0x156ec0&&_0x156ec0['addShadowC'+'asters'](_0xa3ecfe['meshInstan'+'ces']);}}this['_castShado'+'ws']=_0x5ee56a;}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x5cc9cc){if(this['_receiveSh'+'adows']!==_0x5cc9cc&&(this['_receiveSh'+'adows']=_0x5cc9cc,this['_model'])){const _0x779613=this['_model']['meshInstan'+'ces'];for(let _0x1e0cd2=-0x1c90+0x14a5+0x7eb,_0x3a50b2=_0x779613['length'];_0x1e0cd2<_0x3a50b2;_0x1e0cd2++)_0x779613[_0x1e0cd2]['receiveSha'+'dow']=_0x5cc9cc;}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x39069b){this['_castShado'+'wsLightmap']=_0x39069b;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x2ff595){this['_lightmapS'+'izeMultipl'+'ier']=_0x2ff595;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x4f152c){const _0x1b484e=this['system']['app']['scene']['layers'];if(this['meshInstan'+'ces'])for(let _0x4d1e4b=0x19fc*0x1+0x2416+-0x3e12;_0x4d1e4b<this['_layers']['length'];_0x4d1e4b++){const _0x11abda=_0x1b484e['getLayerBy'+'Id'](this['_layers'][_0x4d1e4b]);_0x11abda&&_0x11abda['removeMesh'+'Instances'](this['meshInstan'+'ces']);}this['_layers']['length']=-0xbb*0xb+0x6*-0x313+0x1a7b;for(let _0xb0ba29=-0x2417+-0x14b1*0x1+0x38c8;_0xb0ba29<_0x4f152c['length'];_0xb0ba29++)this['_layers'][_0xb0ba29]=_0x4f152c[_0xb0ba29];if(!(!this['enabled']||!this['entity']['enabled']||!this['meshInstan'+'ces']))for(let _0x51257e=-0x5a1+0x1*0x1e5f+-0x18be*0x1;_0x51257e<this['_layers']['length'];_0x51257e++){const _0x22dd72=_0x1b484e['getLayerBy'+'Id'](this['_layers'][_0x51257e]);_0x22dd72&&_0x22dd72['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x15dce2){var _0x320bf4,_0x1e9d3a;this['_batchGrou'+'pId']!==_0x15dce2&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x9d*-0x1d+-0x1a81+0x2c4a&&((_0x320bf4=this['system']['app']['batcher'])==null||_0x320bf4['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x15dce2>=-0x2*0x3bb+-0x1ad6+-0x2*-0x1126&&((_0x1e9d3a=this['system']['app']['batcher'])==null||_0x1e9d3a['insert'](St['MODEL'],_0x15dce2,this['entity'])),_0x15dce2<-0x2*-0xf45+-0x6*-0x2b+-0x1f8c&&this['_batchGrou'+'pId']>=-0x1*-0x12f1+0x2a5+0x1596*-0x1&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_batchGrou'+'pId']=_0x15dce2);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['materialAs'+'set'](_0x20179b){let _0x4a9f86=_0x20179b;_0x20179b instanceof pe&&(_0x4a9f86=_0x20179b['id']);const _0x1519ec=this['system']['app']['assets'];if(_0x4a9f86!==this['_materialA'+'sset']){if(this['_materialA'+'sset']){_0x1519ec['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this);const _0x89d1cf=_0x1519ec['get'](this['_materialA'+'sset']);_0x89d1cf&&this['_unbindMat'+'erialAsset'](_0x89d1cf);}if(this['_materialA'+'sset']=_0x4a9f86,this['_materialA'+'sset']){const _0x6b158c=_0x1519ec['get'](this['_materialA'+'sset']);_0x6b158c?this['_bindMater'+'ialAsset'](_0x6b158c):(this['_setMateri'+'al'](this['system']['defaultMat'+'erial']),_0x1519ec['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this));}else this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['material'](_0x3cac57){this['_material']!==_0x3cac57&&(this['materialAs'+'set']=null,this['_setMateri'+'al'](_0x3cac57));}get['material'](){return this['_material'];}set['mapping'](_0x4cad48){if(this['_type']!=='asset'||(this['_unsetMate'+'rialEvents'](),_0x4cad48||(_0x4cad48={}),this['_mapping']=_0x4cad48,!this['_model']))return;const _0x15a8ff=this['_model']['meshInstan'+'ces'],_0x301cef=this['asset']?this['system']['app']['assets']['get'](this['asset']):null,_0x3bba9f=_0x301cef?_0x301cef['data']['mapping']:null;let _0x54469c=null;for(let _0x331f78=0xf2e+0x162*-0xe+0x42e,_0x5e6daf=_0x15a8ff['length'];_0x331f78<_0x5e6daf;_0x331f78++)if(_0x4cad48[_0x331f78]!==void(0x1f34+-0x250*-0x5+-0x2ac4))_0x4cad48[_0x331f78]?(_0x54469c=this['system']['app']['assets']['get'](_0x4cad48[_0x331f78]),this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x54469c,_0x15a8ff[_0x331f78],_0x331f78)):_0x15a8ff[_0x331f78]['material']=this['system']['defaultMat'+'erial'];else{if(_0x3bba9f){if(_0x3bba9f[_0x331f78]&&(_0x3bba9f[_0x331f78]['material']||_0x3bba9f[_0x331f78]['path'])){if(_0x3bba9f[_0x331f78]['material']!==void(-0x199*-0x17+0x2354+0x4813*-0x1))_0x54469c=this['system']['app']['assets']['get'](_0x3bba9f[_0x331f78]['material']);else{if(_0x3bba9f[_0x331f78]['path']!==void(-0x141a*-0x1+-0x3d*0x13+-0xf93)){const _0x15f108=this['_getMateri'+'alAssetUrl'](_0x3bba9f[_0x331f78]['path']);_0x15f108&&(_0x54469c=this['system']['app']['assets']['getByUrl'](_0x15f108));}}this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x54469c,_0x15a8ff[_0x331f78],_0x331f78);}else _0x15a8ff[_0x331f78]['material']=this['system']['defaultMat'+'erial'];}}}get['mapping'](){return this['_mapping'];}['addModelTo'+'Layers'](){const _0x14a952=this['system']['app']['scene']['layers'];for(let _0x164d07=-0x263b*0x1+-0x774+-0x5*-0x923;_0x164d07<this['_layers']['length'];_0x164d07++){const _0x2bc786=_0x14a952['getLayerBy'+'Id'](this['_layers'][_0x164d07]);_0x2bc786&&_0x2bc786['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](){const _0x115e2d=this['system']['app']['scene']['layers'];for(let _0x2ea140=0x401*-0x5+0x1cc1+0x8bc*-0x1;_0x2ea140<this['_layers']['length'];_0x2ea140++){const _0x22a403=_0x115e2d['getLayerBy'+'Id'](this['_layers'][_0x2ea140]);_0x22a403&&_0x22a403['removeMesh'+'Instances'](this['meshInstan'+'ces']);}}['onRemoveCh'+'ild'](){this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['onInsertCh'+'ild'](){this['_model']&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers']();}['onRemove'](){this['asset']=null,this['model']=null,this['materialAs'+'set']=null,this['_unsetMate'+'rialEvents'](),this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x33e090,_0x1532b7){this['addModelTo'+'Layers'](),_0x33e090['off']('add',this['onLayerAdd'+'ed'],this),_0x33e090['off']('remove',this['onLayerRem'+'oved'],this),_0x1532b7['on']('add',this['onLayerAdd'+'ed'],this),_0x1532b7['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x377fe4){this['layers']['indexOf'](_0x377fe4['id'])<-0x727*-0x5+0x4a3*-0x8+0x155||_0x377fe4['addMeshIns'+'tances'](this['meshInstan'+'ces']);}['onLayerRem'+'oved'](_0xaaab4){this['layers']['indexOf'](_0xaaab4['id'])<-0x31*-0x42+0x1e76+0x38*-0xc5||_0xaaab4['removeMesh'+'Instances'](this['meshInstan'+'ces']);}['_setMateri'+'alEvent'](_0x484c13,_0x377f03,_0x5993d3,_0x55381a){const _0x19cc95=_0x377f03+':'+_0x5993d3;this['system']['app']['assets']['on'](_0x19cc95,_0x55381a,this),this['_materialE'+'vents']||(this['_materialE'+'vents']=[]),this['_materialE'+'vents'][_0x484c13]||(this['_materialE'+'vents'][_0x484c13]={}),this['_materialE'+'vents'][_0x484c13][_0x19cc95]={'id':_0x5993d3,'handler':_0x55381a};}['_unsetMate'+'rialEvents'](){const _0x5a339b=this['system']['app']['assets'],_0x3d4fee=this['_materialE'+'vents'];if(_0x3d4fee){for(let _0xa68e8d=0x8c*-0x3+0x2c0+-0x11c,_0x4266e6=_0x3d4fee['length'];_0xa68e8d<_0x4266e6;_0xa68e8d++){if(!_0x3d4fee[_0xa68e8d])continue;const _0x46c625=_0x3d4fee[_0xa68e8d];for(const _0x5e7de7 in _0x46c625)_0x5a339b['off'](_0x5e7de7,_0x46c625[_0x5e7de7]['handler'],this);}this['_materialE'+'vents']=null;}}['_getAssetB'+'yIdOrPath'](_0x1b9ea0){let _0x5d9d98=null;if(!isNaN(parseInt(_0x1b9ea0,0xc51*0x1+0x14*-0x3c+-0x797)))_0x5d9d98=this['system']['app']['assets']['get'](_0x1b9ea0);else{if(this['asset']){const _0x593b09=this['_getMateri'+'alAssetUrl'](_0x1b9ea0);_0x593b09&&(_0x5d9d98=this['system']['app']['assets']['getByUrl'](_0x593b09));}}return _0x5d9d98;}['_getMateri'+'alAssetUrl'](_0x97bcff){if(!this['asset'])return null;const _0x5afbfd=this['system']['app']['assets']['get'](this['asset']);return _0x5afbfd?_0x5afbfd['getAbsolut'+'eUrl'](_0x97bcff):null;}['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x3d242a,_0x1d55fe,_0x1c187b){const _0x3b835d=this['system']['app']['assets'];_0x3d242a&&(_0x3d242a['resource']?(_0x1d55fe['material']=_0x3d242a['resource'],this['_setMateri'+'alEvent'](_0x1c187b,'remove',_0x3d242a['id'],function(){_0x1d55fe['material']=this['system']['defaultMat'+'erial'];})):(this['_setMateri'+'alEvent'](_0x1c187b,'load',_0x3d242a['id'],function(_0x2e2666){_0x1d55fe['material']=_0x2e2666['resource'],this['_setMateri'+'alEvent'](_0x1c187b,'remove',_0x3d242a['id'],function(){_0x1d55fe['material']=this['system']['defaultMat'+'erial'];});}),this['enabled']&&this['entity']['enabled']&&_0x3b835d['load'](_0x3d242a)));}['onEnable'](){var _0x369100;const _0x365bb8=this['system']['app'],_0x3fe434=_0x365bb8['scene'],_0x9e761e=_0x3fe434==null?void(-0x12a0+-0x9ff*-0x2+-0xaf*0x2):_0x3fe434['layers'];this['_evtLayers'+'Changed']=_0x3fe434['on']('set:layers',this['onLayersCh'+'anged'],this),_0x9e761e&&(this['_evtLayerA'+'dded']=_0x9e761e['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x9e761e['on']('remove',this['onLayerRem'+'oved'],this));const _0x47bac2=this['_type']==='asset';let _0x4b6c86;if(this['_model']?this['addModelTo'+'Layers']():_0x47bac2&&this['_asset']&&(_0x4b6c86=_0x365bb8['assets']['get'](this['_asset']),_0x4b6c86&&_0x4b6c86['resource']!==this['_model']&&this['_bindModel'+'Asset'](_0x4b6c86)),this['_materialA'+'sset']&&(_0x4b6c86=_0x365bb8['assets']['get'](this['_materialA'+'sset']),_0x4b6c86&&_0x4b6c86['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x4b6c86)),_0x47bac2&&this['_mapping']){for(const _0x45f0cf in this['_mapping'])this['_mapping'][_0x45f0cf]&&(_0x4b6c86=this['_getAssetB'+'yIdOrPath'](this['_mapping'][_0x45f0cf]),_0x4b6c86&&!_0x4b6c86['resource']&&_0x365bb8['assets']['load'](_0x4b6c86));}this['_batchGrou'+'pId']>=0x17dc+0xc69*-0x1+-0xb73&&((_0x369100=_0x365bb8['batcher'])==null||_0x369100['insert'](St['MODEL'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x49d4d5,_0x16ab96,_0x1f8c66,_0x54cc49;const _0x2319a6=this['system']['app'],_0x549811=_0x2319a6['scene']['layers'];(_0x49d4d5=this['_evtLayers'+'Changed'])==null||_0x49d4d5['off'](),this['_evtLayers'+'Changed']=null,_0x549811&&((_0x16ab96=this['_evtLayerA'+'dded'])==null||_0x16ab96['off'](),this['_evtLayerA'+'dded']=null,(_0x1f8c66=this['_evtLayerR'+'emoved'])==null||_0x1f8c66['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x1241*-0x1+0xec9+0x128*0x3&&((_0x54cc49=_0x2319a6['batcher'])==null||_0x54cc49['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['hide'](){if(this['_model']){const _0x1876ee=this['_model']['meshInstan'+'ces'];for(let _0x4364fa=-0x7a*-0x4e+0x1ec5+-0x43f1,_0x2ce512=_0x1876ee['length'];_0x4364fa<_0x2ce512;_0x4364fa++)_0x1876ee[_0x4364fa]['visible']=!(-0x132b*0x1+0x535*0x3+0x3*0x12f);}}['show'](){if(this['_model']){const _0x96c278=this['_model']['meshInstan'+'ces'];for(let _0x4c8222=0x109+0x1529+-0x1632,_0xcc0c28=_0x96c278['length'];_0x4c8222<_0xcc0c28;_0x4c8222++)_0x96c278[_0x4c8222]['visible']=!(-0x18*-0x174+-0x78*-0x4+0x62*-0x60);}}['_bindMater'+'ialAsset'](_0x4925ea){if(_0x4925ea['on']('load',this['_onMateria'+'lAssetLoad'],this),_0x4925ea['on']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x4925ea['on']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x4925ea['on']('change',this['_onMateria'+'lAssetChan'+'ge'],this),_0x4925ea['resource'])this['_onMateria'+'lAssetLoad'](_0x4925ea);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x4925ea);}}['_unbindMat'+'erialAsset'](_0x4cdc06){_0x4cdc06['off']('load',this['_onMateria'+'lAssetLoad'],this),_0x4cdc06['off']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x4cdc06['off']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x4cdc06['off']('change',this['_onMateria'+'lAssetChan'+'ge'],this);}['_onMateria'+'lAssetAdd'](_0xaf15d){this['system']['app']['assets']['off']('add:'+_0xaf15d['id'],this['_onMateria'+'lAssetAdd'],this),this['_materialA'+'sset']===_0xaf15d['id']&&this['_bindMater'+'ialAsset'](_0xaf15d);}['_onMateria'+'lAssetLoad'](_0x434847){this['_setMateri'+'al'](_0x434847['resource']);}['_onMateria'+'lAssetUnlo'+'ad'](_0x1dd68e){this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}['_onMateria'+'lAssetRemo'+'ve'](_0x31cae){this['_onMateria'+'lAssetUnlo'+'ad'](_0x31cae);}['_onMateria'+'lAssetChan'+'ge'](_0x4072fb){}['_bindModel'+'Asset'](_0x11a874){if(this['_unbindMod'+'elAsset'](_0x11a874),_0x11a874['on']('load',this['_onModelAs'+'setLoad'],this),_0x11a874['on']('unload',this['_onModelAs'+'setUnload'],this),_0x11a874['on']('change',this['_onModelAs'+'setChange'],this),_0x11a874['on']('remove',this['_onModelAs'+'setRemove'],this),_0x11a874['resource'])this['_onModelAs'+'setLoad'](_0x11a874);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x11a874);}}['_unbindMod'+'elAsset'](_0x384730){_0x384730['off']('load',this['_onModelAs'+'setLoad'],this),_0x384730['off']('unload',this['_onModelAs'+'setUnload'],this),_0x384730['off']('change',this['_onModelAs'+'setChange'],this),_0x384730['off']('remove',this['_onModelAs'+'setRemove'],this);}['_onModelAs'+'setAdded'](_0x28db2b){this['system']['app']['assets']['off']('add:'+_0x28db2b['id'],this['_onModelAs'+'setAdded'],this),_0x28db2b['id']===this['_asset']&&this['_bindModel'+'Asset'](_0x28db2b);}['_onModelAs'+'setLoad'](_0xa8fdef){this['model']=_0xa8fdef['resource']['clone'](),this['_clonedMod'+'el']=!(-0xe3b+-0x1*-0x322+0x3b3*0x3);}['_onModelAs'+'setUnload'](_0x511998){this['model']=null;}['_onModelAs'+'setChange'](_0x18a25c,_0x25d2fa,_0x44351d,_0x372ebf){_0x25d2fa==='data'&&(this['mapping']=this['_mapping']);}['_onModelAs'+'setRemove'](_0x4308cc){this['model']=null;}['_setMateri'+'al'](_0x10e39f){if(this['_material']===_0x10e39f)return;this['_material']=_0x10e39f;const _0x1f8257=this['_model'];if(_0x1f8257&&this['_type']!=='asset'){const _0x57a2ca=_0x1f8257['meshInstan'+'ces'];for(let _0x2f5126=0x1f0e+0x152c+-0xa*0x539,_0x538430=_0x57a2ca['length'];_0x2f5126<_0x538430;_0x2f5126++)_0x57a2ca[_0x2f5126]['material']=_0x10e39f;}}}class uR{constructor(){this['enabled']=!(0xd96+-0x17e*0x7+-0xc*0x43);}}const wv=['enabled'];class pR extends ct{constructor(_0x452fd3){super(_0x452fd3),this['id']='model',this['ComponentT'+'ype']=Yp,this['DataType']=uR,this['schema']=wv,this['defaultMat'+'erial']=$n(_0x452fd3['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x1f65a4,_0x1084bf,_0x7b807e){_0x7b807e=['material','materialAs'+'set','asset','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','type','mapping','layers','isStatic','batchGroup'+'Id'],(_0x1084bf['batchGroup'+'Id']===null||_0x1084bf['batchGroup'+'Id']===void(0x1d1b+-0x2*0x11c9+0x677))&&(_0x1084bf['batchGroup'+'Id']=-(0x1bb4+0x17b5+-0xe*0x3ac)),_0x1084bf['layers']&&_0x1084bf['layers']['length']&&(_0x1084bf['layers']=_0x1084bf['layers']['slice'](0xb5*-0x35+-0x7*-0xc9+-0x1ffa*-0x1));for(let _0x112a73=0x92*-0x7+-0x1864*-0x1+-0x1466;_0x112a73<_0x7b807e['length'];_0x112a73++)_0x1084bf['hasOwnProp'+'erty'](_0x7b807e[_0x112a73])&&(_0x1f65a4[_0x7b807e[_0x112a73]]=_0x1084bf[_0x7b807e[_0x112a73]]);_0x1084bf['aabbCenter']&&_0x1084bf['aabbHalfEx'+'tents']&&(_0x1f65a4['customAabb']=new De(new D(_0x1084bf['aabbCenter']),new D(_0x1084bf['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x1f65a4,_0x1084bf,['enabled']);}['cloneCompo'+'nent'](_0x5c4e1a,_0x23dfb4){const _0x1b4136={'type':_0x5c4e1a['model']['type'],'asset':_0x5c4e1a['model']['asset'],'castShadows':_0x5c4e1a['model']['castShadow'+'s'],'receiveShadows':_0x5c4e1a['model']['receiveSha'+'dows'],'castShadowsLightmap':_0x5c4e1a['model']['castShadow'+'sLightmap'],'lightmapped':_0x5c4e1a['model']['lightmappe'+'d'],'lightmapSizeMultiplier':_0x5c4e1a['model']['lightmapSi'+'zeMultipli'+'er'],'isStatic':_0x5c4e1a['model']['isStatic'],'enabled':_0x5c4e1a['model']['enabled'],'layers':_0x5c4e1a['model']['layers'],'batchGroupId':_0x5c4e1a['model']['batchGroup'+'Id'],'mapping':kc({},_0x5c4e1a['model']['mapping'])};let _0x74d9b2=_0x5c4e1a['model']['materialAs'+'set'];!(_0x74d9b2 instanceof pe)&&_0x74d9b2!=null&&(_0x74d9b2=this['app']['assets']['get'](_0x74d9b2));const _0x57deb0=_0x5c4e1a['model']['material'];(!_0x57deb0||_0x57deb0===this['defaultMat'+'erial']||!_0x74d9b2||_0x57deb0===_0x74d9b2['resource'])&&(_0x1b4136['materialAs'+'set']=_0x74d9b2);const _0x36c840=this['addCompone'+'nt'](_0x23dfb4,_0x1b4136);if(_0x5c4e1a['model']['model']&&_0x5c4e1a['model']['type']==='asset'&&!_0x5c4e1a['model']['asset']&&(_0x36c840['model']=_0x5c4e1a['model']['model']['clone'](),_0x36c840['_clonedMod'+'el']=!(-0x1*-0xed9+-0x1*-0x137f+0x274*-0xe)),_0x1b4136['materialAs'+'set']||(_0x36c840['material']=_0x57deb0),_0x5c4e1a['model']['model']){const _0x1930fc=_0x5c4e1a['model']['model']['meshInstan'+'ces'],_0x304a35=_0x36c840['model']['meshInstan'+'ces'];for(let _0x3ba0fc=0xbd9+0x1*0x21ce+0x1*-0x2da7;_0x3ba0fc<_0x1930fc['length'];_0x3ba0fc++)_0x304a35[_0x3ba0fc]['mask']=_0x1930fc[_0x3ba0fc]['mask'],_0x304a35[_0x3ba0fc]['material']=_0x1930fc[_0x3ba0fc]['material'],_0x304a35[_0x3ba0fc]['layer']=_0x1930fc[_0x3ba0fc]['layer'],_0x304a35[_0x3ba0fc]['receiveSha'+'dow']=_0x1930fc[_0x3ba0fc]['receiveSha'+'dow'];}return _0x5c4e1a['model']['customAabb']&&(_0x36c840['customAabb']=_0x5c4e1a['model']['customAabb']['clone']()),_0x36c840;}['onRemove'](_0x18511a,_0x3dec18){_0x3dec18['onRemove']();}}we['_buildAcce'+'ssors'](Yp['prototype'],wv);const mR=['emitterExt'+'ents','emitterRad'+'ius','emitterExt'+'entsInner','emitterRad'+'iusInner','loop','initialVel'+'ocity','animSpeed','normalMap','particleNo'+'rmal'],_R=['numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','lighting','halfLamber'+'t','intensity','wrap','wrapBounds','depthWrite','noFog','sort','stretch','alignToMot'+'ion','preWarm','emitterSha'+'pe','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animLoop','colorMap','localSpace','screenSpac'+'e','orientatio'+'n'],gR=['scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','velocityGr'+'aph','velocityGr'+'aph2','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2'],uc=['colorMapAs'+'set','normalMapA'+'sset','meshAsset','renderAsse'+'t'];let Wa;class SR extends we{constructor(_0x4f861a,_0x4d5483){super(_0x4f861a,_0x4d5483),h(this,'_requested'+'Depth',!(0x21d5+-0x583*0x2+-0x16ce)),h(this,'_drawOrder',-0x8c*0x26+-0x1080+0x2548),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['on']('set_colorM'+'apAsset',this['onSetColor'+'MapAsset'],this),this['on']('set_normal'+'MapAsset',this['onSetNorma'+'lMapAsset'],this),this['on']('set_meshAs'+'set',this['onSetMeshA'+'sset'],this),this['on']('set_mesh',this['onSetMesh'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_loop',this['onSetLoop'],this),this['on']('set_blendT'+'ype',this['onSetBlend'+'Type'],this),this['on']('set_depthS'+'oftening',this['onSetDepth'+'Softening'],this),this['on']('set_layers',this['onSetLayer'+'s'],this),mR['forEach'](_0x364eed=>{this['on']('set_'+_0x364eed,this['onSetSimpl'+'eProperty'],this);}),_R['forEach'](_0xa6f67f=>{this['on']('set_'+_0xa6f67f,this['onSetCompl'+'exProperty'],this);}),gR['forEach'](_0x5e51e1=>{this['on']('set_'+_0x5e51e1,this['onSetGraph'+'Property'],this);}));}get['data'](){const _0x47773b=this['system']['store'][this['entity']['getGuid']()];return _0x47773b?_0x47773b['data']:null;}set['enabled'](_0xde5150){this['_setValue']('enabled',_0xde5150);}get['enabled'](){return this['data']['enabled'];}set['autoPlay'](_0x5cdbb1){this['_setValue']('autoPlay',_0x5cdbb1);}get['autoPlay'](){return this['data']['autoPlay'];}set['numParticl'+'es'](_0x45b579){this['_setValue']('numParticl'+'es',_0x45b579);}get['numParticl'+'es'](){return this['data']['numParticl'+'es'];}set['lifetime'](_0x71c2af){this['_setValue']('lifetime',_0x71c2af);}get['lifetime'](){return this['data']['lifetime'];}set['rate'](_0x385774){this['_setValue']('rate',_0x385774);}get['rate'](){return this['data']['rate'];}set['rate2'](_0x53da7e){this['_setValue']('rate2',_0x53da7e);}get['rate2'](){return this['data']['rate2'];}set['startAngle'](_0x457a93){this['_setValue']('startAngle',_0x457a93);}get['startAngle'](){return this['data']['startAngle'];}set['startAngle'+'2'](_0x477f8b){this['_setValue']('startAngle'+'2',_0x477f8b);}get['startAngle'+'2'](){return this['data']['startAngle'+'2'];}set['loop'](_0x590dfe){this['_setValue']('loop',_0x590dfe);}get['loop'](){return this['data']['loop'];}set['preWarm'](_0x5edda){this['_setValue']('preWarm',_0x5edda);}get['preWarm'](){return this['data']['preWarm'];}set['lighting'](_0x11f4b4){this['_setValue']('lighting',_0x11f4b4);}get['lighting'](){return this['data']['lighting'];}set['halfLamber'+'t'](_0x1ad917){this['_setValue']('halfLamber'+'t',_0x1ad917);}get['halfLamber'+'t'](){return this['data']['halfLamber'+'t'];}set['intensity'](_0x3a2ecf){this['_setValue']('intensity',_0x3a2ecf);}get['intensity'](){return this['data']['intensity'];}set['depthWrite'](_0x2e6e38){this['_setValue']('depthWrite',_0x2e6e38);}get['depthWrite'](){return this['data']['depthWrite'];}set['noFog'](_0x1d583e){this['_setValue']('noFog',_0x1d583e);}get['noFog'](){return this['data']['noFog'];}set['depthSofte'+'ning'](_0x41a07b){this['_setValue']('depthSofte'+'ning',_0x41a07b);}get['depthSofte'+'ning'](){return this['data']['depthSofte'+'ning'];}set['sort'](_0x588b95){this['_setValue']('sort',_0x588b95);}get['sort'](){return this['data']['sort'];}set['blendType'](_0x3d258e){this['_setValue']('blendType',_0x3d258e);}get['blendType'](){return this['data']['blendType'];}set['stretch'](_0x14bd62){this['_setValue']('stretch',_0x14bd62);}get['stretch'](){return this['data']['stretch'];}set['alignToMot'+'ion'](_0x31ca6a){this['_setValue']('alignToMot'+'ion',_0x31ca6a);}get['alignToMot'+'ion'](){return this['data']['alignToMot'+'ion'];}set['emitterSha'+'pe'](_0x3778e6){this['_setValue']('emitterSha'+'pe',_0x3778e6);}get['emitterSha'+'pe'](){return this['data']['emitterSha'+'pe'];}set['emitterExt'+'ents'](_0x174708){this['_setValue']('emitterExt'+'ents',_0x174708);}get['emitterExt'+'ents'](){return this['data']['emitterExt'+'ents'];}set['emitterExt'+'entsInner'](_0x4718f5){this['_setValue']('emitterExt'+'entsInner',_0x4718f5);}get['emitterExt'+'entsInner'](){return this['data']['emitterExt'+'entsInner'];}set['emitterRad'+'ius'](_0x4866d0){this['_setValue']('emitterRad'+'ius',_0x4866d0);}get['emitterRad'+'ius'](){return this['data']['emitterRad'+'ius'];}set['emitterRad'+'iusInner'](_0x4e584b){this['_setValue']('emitterRad'+'iusInner',_0x4e584b);}get['emitterRad'+'iusInner'](){return this['data']['emitterRad'+'iusInner'];}set['initialVel'+'ocity'](_0x541a00){this['_setValue']('initialVel'+'ocity',_0x541a00);}get['initialVel'+'ocity'](){return this['data']['initialVel'+'ocity'];}set['wrap'](_0x5bbf13){this['_setValue']('wrap',_0x5bbf13);}get['wrap'](){return this['data']['wrap'];}set['wrapBounds'](_0x321f59){this['_setValue']('wrapBounds',_0x321f59);}get['wrapBounds'](){return this['data']['wrapBounds'];}set['localSpace'](_0x1d4984){this['_setValue']('localSpace',_0x1d4984);}get['localSpace'](){return this['data']['localSpace'];}set['screenSpac'+'e'](_0x2873b8){this['_setValue']('screenSpac'+'e',_0x2873b8);}get['screenSpac'+'e'](){return this['data']['screenSpac'+'e'];}set['colorMapAs'+'set'](_0x553304){this['_setValue']('colorMapAs'+'set',_0x553304);}get['colorMapAs'+'set'](){return this['data']['colorMapAs'+'set'];}set['normalMapA'+'sset'](_0x2d7490){this['_setValue']('normalMapA'+'sset',_0x2d7490);}get['normalMapA'+'sset'](){return this['data']['normalMapA'+'sset'];}set['mesh'](_0x83c087){this['_setValue']('mesh',_0x83c087);}get['mesh'](){return this['data']['mesh'];}set['meshAsset'](_0x2eb182){this['_setValue']('meshAsset',_0x2eb182);}get['meshAsset'](){return this['data']['meshAsset'];}set['renderAsse'+'t'](_0x14d9c7){this['_setValue']('renderAsse'+'t',_0x14d9c7);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['orientatio'+'n'](_0x1f0bc0){this['_setValue']('orientatio'+'n',_0x1f0bc0);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['particleNo'+'rmal'](_0x30a927){this['_setValue']('particleNo'+'rmal',_0x30a927);}get['particleNo'+'rmal'](){return this['data']['particleNo'+'rmal'];}set['localVeloc'+'ityGraph'](_0x255fa6){this['_setValue']('localVeloc'+'ityGraph',_0x255fa6);}get['localVeloc'+'ityGraph'](){return this['data']['localVeloc'+'ityGraph'];}set['localVeloc'+'ityGraph2'](_0x5210cc){this['_setValue']('localVeloc'+'ityGraph2',_0x5210cc);}get['localVeloc'+'ityGraph2'](){return this['data']['localVeloc'+'ityGraph2'];}set['velocityGr'+'aph'](_0x5324fd){this['_setValue']('velocityGr'+'aph',_0x5324fd);}get['velocityGr'+'aph'](){return this['data']['velocityGr'+'aph'];}set['velocityGr'+'aph2'](_0x32daa0){this['_setValue']('velocityGr'+'aph2',_0x32daa0);}get['velocityGr'+'aph2'](){return this['data']['velocityGr'+'aph2'];}set['rotationSp'+'eedGraph'](_0x36fc61){this['_setValue']('rotationSp'+'eedGraph',_0x36fc61);}get['rotationSp'+'eedGraph'](){return this['data']['rotationSp'+'eedGraph'];}set['rotationSp'+'eedGraph2'](_0x45d8c2){this['_setValue']('rotationSp'+'eedGraph2',_0x45d8c2);}get['rotationSp'+'eedGraph2'](){return this['data']['rotationSp'+'eedGraph2'];}set['radialSpee'+'dGraph'](_0x474406){this['_setValue']('radialSpee'+'dGraph',_0x474406);}get['radialSpee'+'dGraph'](){return this['data']['radialSpee'+'dGraph'];}set['radialSpee'+'dGraph2'](_0x389844){this['_setValue']('radialSpee'+'dGraph2',_0x389844);}get['radialSpee'+'dGraph2'](){return this['data']['radialSpee'+'dGraph2'];}set['scaleGraph'](_0x3b1c0b){this['_setValue']('scaleGraph',_0x3b1c0b);}get['scaleGraph'](){return this['data']['scaleGraph'];}set['scaleGraph'+'2'](_0x49d828){this['_setValue']('scaleGraph'+'2',_0x49d828);}get['scaleGraph'+'2'](){return this['data']['scaleGraph'+'2'];}set['colorGraph'](_0x5cc8a0){this['_setValue']('colorGraph',_0x5cc8a0);}get['colorGraph'](){return this['data']['colorGraph'];}set['colorGraph'+'2'](_0x306ab3){this['_setValue']('colorGraph'+'2',_0x306ab3);}get['colorGraph'+'2'](){return this['data']['colorGraph'+'2'];}set['alphaGraph'](_0x4c0af9){this['_setValue']('alphaGraph',_0x4c0af9);}get['alphaGraph'](){return this['data']['alphaGraph'];}set['alphaGraph'+'2'](_0x1c01c9){this['_setValue']('alphaGraph'+'2',_0x1c01c9);}get['alphaGraph'+'2'](){return this['data']['alphaGraph'+'2'];}set['colorMap'](_0x8af667){this['_setValue']('colorMap',_0x8af667);}get['colorMap'](){return this['data']['colorMap'];}set['normalMap'](_0xfdc6c8){this['_setValue']('normalMap',_0xfdc6c8);}get['normalMap'](){return this['data']['normalMap'];}set['animTilesX'](_0x1e8856){this['_setValue']('animTilesX',_0x1e8856);}get['animTilesX'](){return this['data']['animTilesX'];}set['animTilesY'](_0x528401){this['_setValue']('animTilesY',_0x528401);}get['animTilesY'](){return this['data']['animTilesY'];}set['animStartF'+'rame'](_0x5d5f3b){this['_setValue']('animStartF'+'rame',_0x5d5f3b);}get['animStartF'+'rame'](){return this['data']['animStartF'+'rame'];}set['animNumFra'+'mes'](_0x1a43bc){this['_setValue']('animNumFra'+'mes',_0x1a43bc);}get['animNumFra'+'mes'](){return this['data']['animNumFra'+'mes'];}set['animNumAni'+'mations'](_0x162039){this['_setValue']('animNumAni'+'mations',_0x162039);}get['animNumAni'+'mations'](){return this['data']['animNumAni'+'mations'];}set['animIndex'](_0x49909d){this['_setValue']('animIndex',_0x49909d);}get['animIndex'](){return this['data']['animIndex'];}set['randomizeA'+'nimIndex'](_0x1c84e9){this['_setValue']('randomizeA'+'nimIndex',_0x1c84e9);}get['randomizeA'+'nimIndex'](){return this['data']['randomizeA'+'nimIndex'];}set['animSpeed'](_0x2ab09e){this['_setValue']('animSpeed',_0x2ab09e);}get['animSpeed'](){return this['data']['animSpeed'];}set['animLoop'](_0x4faa03){this['_setValue']('animLoop',_0x4faa03);}get['animLoop'](){return this['data']['animLoop'];}set['layers'](_0x14c20f){this['_setValue']('layers',_0x14c20f);}get['layers'](){return this['data']['layers'];}set['drawOrder'](_0x5a9bd5){this['_drawOrder']=_0x5a9bd5,this['emitter']&&(this['emitter']['drawOrder']=_0x5a9bd5);}get['drawOrder'](){return this['_drawOrder'];}['_setValue'](_0x3f27d3,_0x4029da){const _0x11845f=this['data'],_0x2b18e4=_0x11845f[_0x3f27d3];_0x11845f[_0x3f27d3]=_0x4029da,this['fire']('set',_0x3f27d3,_0x2b18e4,_0x4029da);}['addMeshIns'+'tanceToLay'+'ers'](){if(this['emitter'])for(let _0x9ae933=-0x1*-0x1f6c+0x2*-0x1cf+0x2*-0xde7;_0x9ae933<this['layers']['length'];_0x9ae933++){const _0x1cbdeb=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x9ae933]);_0x1cbdeb&&(_0x1cbdeb['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]),this['emitter']['_layer']=_0x1cbdeb);}}['removeMesh'+'InstanceFr'+'omLayers'](){if(this['emitter'])for(let _0x153d1b=-0xd37+0x49*-0x5f+0x284e;_0x153d1b<this['layers']['length'];_0x153d1b++){const _0x467662=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x153d1b]);_0x467662&&_0x467662['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}}['onSetLayer'+'s'](_0x38e3f4,_0x2e38a9,_0x359b1b){if(this['emitter']){for(let _0x3ef4ea=0x17d5+0x1437+0x2c0c*-0x1;_0x3ef4ea<_0x2e38a9['length'];_0x3ef4ea++){const _0x19113a=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x2e38a9[_0x3ef4ea]);_0x19113a&&_0x19113a['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}if(!(!this['enabled']||!this['entity']['enabled']))for(let _0x3a3a6a=0xb*-0x2ea+-0x37b*-0x9+0xb*0x11;_0x3a3a6a<_0x359b1b['length'];_0x3a3a6a++){const _0x33e90c=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x359b1b[_0x3a3a6a]);_0x33e90c&&_0x33e90c['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}}}['onLayersCh'+'anged'](_0x106af4,_0x27de7e){this['addMeshIns'+'tanceToLay'+'ers'](),_0x106af4['off']('add',this['onLayerAdd'+'ed'],this),_0x106af4['off']('remove',this['onLayerRem'+'oved'],this),_0x27de7e['on']('add',this['onLayerAdd'+'ed'],this),_0x27de7e['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0xfc3ed8){!this['emitter']||this['layers']['indexOf'](_0xfc3ed8['id'])<-0x1*-0x2c6+-0x2*-0x541+-0xd48||_0xfc3ed8['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}['onLayerRem'+'oved'](_0x4e4cf6){!this['emitter']||this['layers']['indexOf'](_0x4e4cf6['id'])<0x4*-0x68c+-0x18d0+0x3300||_0x4e4cf6['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}['_bindColor'+'MapAsset'](_0x5f4d96){if(_0x5f4d96['on']('load',this['_onColorMa'+'pAssetLoad'],this),_0x5f4d96['on']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x5f4d96['on']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x5f4d96['on']('change',this['_onColorMa'+'pAssetChan'+'ge'],this),_0x5f4d96['resource'])this['_onColorMa'+'pAssetLoad'](_0x5f4d96);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x5f4d96);}}['_unbindCol'+'orMapAsset'](_0x5042b1){_0x5042b1['off']('load',this['_onColorMa'+'pAssetLoad'],this),_0x5042b1['off']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x5042b1['off']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x5042b1['off']('change',this['_onColorMa'+'pAssetChan'+'ge'],this);}['_onColorMa'+'pAssetLoad'](_0x5bb51d){this['colorMap']=_0x5bb51d['resource'];}['_onColorMa'+'pAssetUnlo'+'ad'](_0x3eaedb){this['colorMap']=null;}['_onColorMa'+'pAssetRemo'+'ve'](_0x213912){this['_onColorMa'+'pAssetUnlo'+'ad'](_0x213912);}['_onColorMa'+'pAssetChan'+'ge'](_0x5a2a71){}['onSetColor'+'MapAsset'](_0x530d73,_0x37ec3d,_0x47b958){const _0x1f2753=this['system']['app']['assets'];if(_0x37ec3d){const _0x49388a=_0x1f2753['get'](_0x37ec3d);_0x49388a&&this['_unbindCol'+'orMapAsset'](_0x49388a);}if(_0x47b958){_0x47b958 instanceof pe&&(this['data']['colorMapAs'+'set']=_0x47b958['id'],_0x47b958=_0x47b958['id']);const _0x2b3305=_0x1f2753['get'](_0x47b958);_0x2b3305?this['_bindColor'+'MapAsset'](_0x2b3305):_0x1f2753['once']('add:'+_0x47b958,_0x1396e9=>{this['_bindColor'+'MapAsset'](_0x1396e9);});}else this['colorMap']=null;}['_bindNorma'+'lMapAsset'](_0x176735){if(_0x176735['on']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x176735['on']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x176735['on']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x176735['on']('change',this['_onNormalM'+'apAssetCha'+'nge'],this),_0x176735['resource'])this['_onNormalM'+'apAssetLoa'+'d'](_0x176735);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x176735);}}['_unbindNor'+'malMapAsse'+'t'](_0x2fd801){_0x2fd801['off']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x2fd801['off']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x2fd801['off']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x2fd801['off']('change',this['_onNormalM'+'apAssetCha'+'nge'],this);}['_onNormalM'+'apAssetLoa'+'d'](_0x598b4c){this['normalMap']=_0x598b4c['resource'];}['_onNormalM'+'apAssetUnl'+'oad'](_0x54d300){this['normalMap']=null;}['_onNormalM'+'apAssetRem'+'ove'](_0x17b874){this['_onNormalM'+'apAssetUnl'+'oad'](_0x17b874);}['_onNormalM'+'apAssetCha'+'nge'](_0x24bfaf){}['onSetNorma'+'lMapAsset'](_0x5dc42f,_0x46fc3f,_0x78a550){const _0x1f85bc=this['system']['app']['assets'];if(_0x46fc3f){const _0x857a4=_0x1f85bc['get'](_0x46fc3f);_0x857a4&&this['_unbindNor'+'malMapAsse'+'t'](_0x857a4);}if(_0x78a550){_0x78a550 instanceof pe&&(this['data']['normalMapA'+'sset']=_0x78a550['id'],_0x78a550=_0x78a550['id']);const _0x1146b6=_0x1f85bc['get'](_0x78a550);_0x1146b6?this['_bindNorma'+'lMapAsset'](_0x1146b6):_0x1f85bc['once']('add:'+_0x78a550,_0x1e3f24=>{this['_bindNorma'+'lMapAsset'](_0x1e3f24);});}else this['normalMap']=null;}['_bindMeshA'+'sset'](_0x37434a){if(_0x37434a['on']('load',this['_onMeshAss'+'etLoad'],this),_0x37434a['on']('unload',this['_onMeshAss'+'etUnload'],this),_0x37434a['on']('remove',this['_onMeshAss'+'etRemove'],this),_0x37434a['on']('change',this['_onMeshAss'+'etChange'],this),_0x37434a['resource'])this['_onMeshAss'+'etLoad'](_0x37434a);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x37434a);}}['_unbindMes'+'hAsset'](_0x4b2822){_0x4b2822['off']('load',this['_onMeshAss'+'etLoad'],this),_0x4b2822['off']('unload',this['_onMeshAss'+'etUnload'],this),_0x4b2822['off']('remove',this['_onMeshAss'+'etRemove'],this),_0x4b2822['off']('change',this['_onMeshAss'+'etChange'],this);}['_onMeshAss'+'etLoad'](_0x166a05){this['_onMeshCha'+'nged'](_0x166a05['resource']);}['_onMeshAss'+'etUnload'](_0x5467c){this['mesh']=null;}['_onMeshAss'+'etRemove'](_0x15331c){this['_onMeshAss'+'etUnload'](_0x15331c);}['_onMeshAss'+'etChange'](_0x48ccec){}['onSetMeshA'+'sset'](_0x427ff6,_0x5dfb58,_0x4af08d){const _0x159442=this['system']['app']['assets'];if(_0x5dfb58){const _0x10eddb=_0x159442['get'](_0x5dfb58);_0x10eddb&&this['_unbindMes'+'hAsset'](_0x10eddb);}if(_0x4af08d){_0x4af08d instanceof pe&&(this['data']['meshAsset']=_0x4af08d['id'],_0x4af08d=_0x4af08d['id']);const _0x326b62=_0x159442['get'](_0x4af08d);_0x326b62&&this['_bindMeshA'+'sset'](_0x326b62);}else this['_onMeshCha'+'nged'](null);}['onSetMesh'](_0x1788f6,_0x499a58,_0x5d91bc){!_0x5d91bc||_0x5d91bc instanceof pe||typeof _0x5d91bc=='number'?this['meshAsset']=_0x5d91bc:this['_onMeshCha'+'nged'](_0x5d91bc);}['_onMeshCha'+'nged'](_0x3582d8){_0x3582d8&&!(_0x3582d8 instanceof Ge)&&(_0x3582d8['meshInstan'+'ces'][0x2*-0xe7d+0x185e+0x49c]?_0x3582d8=_0x3582d8['meshInstan'+'ces'][-0xe10+0x4*-0x93f+0x441*0xc]['mesh']:_0x3582d8=null),this['data']['mesh']=_0x3582d8,this['emitter']&&(this['emitter']['mesh']=_0x3582d8,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['onSetRende'+'rAsset'](_0xe64c0a,_0x269070,_0x1ea1bc){const _0x556370=this['system']['app']['assets'];if(_0x269070){const _0x9605d1=_0x556370['get'](_0x269070);_0x9605d1&&this['_unbindRen'+'derAsset'](_0x9605d1);}if(_0x1ea1bc){_0x1ea1bc instanceof pe&&(this['data']['renderAsse'+'t']=_0x1ea1bc['id'],_0x1ea1bc=_0x1ea1bc['id']);const _0x116ee2=_0x556370['get'](_0x1ea1bc);_0x116ee2&&this['_bindRende'+'rAsset'](_0x116ee2);}else this['_onRenderC'+'hanged'](null);}['_bindRende'+'rAsset'](_0x31e1d1){if(_0x31e1d1['on']('load',this['_onRenderA'+'ssetLoad'],this),_0x31e1d1['on']('unload',this['_onRenderA'+'ssetUnload'],this),_0x31e1d1['on']('remove',this['_onRenderA'+'ssetRemove'],this),_0x31e1d1['resource'])this['_onRenderA'+'ssetLoad'](_0x31e1d1);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x31e1d1);}}['_unbindRen'+'derAsset'](_0x13ca7f){var _0x557673;_0x13ca7f['off']('load',this['_onRenderA'+'ssetLoad'],this),_0x13ca7f['off']('unload',this['_onRenderA'+'ssetUnload'],this),_0x13ca7f['off']('remove',this['_onRenderA'+'ssetRemove'],this),(_0x557673=this['_evtSetMes'+'hes'])==null||_0x557673['off'](),this['_evtSetMes'+'hes']=null;}['_onRenderA'+'ssetLoad'](_0x59718d){this['_onRenderC'+'hanged'](_0x59718d['resource']);}['_onRenderA'+'ssetUnload'](_0x790a84){this['_onRenderC'+'hanged'](null);}['_onRenderA'+'ssetRemove'](_0x518cb3){this['_onRenderA'+'ssetUnload'](_0x518cb3);}['_onRenderC'+'hanged'](_0x41217e){var _0x4e9c6f;if(!_0x41217e){this['_onMeshCha'+'nged'](null);return;}(_0x4e9c6f=this['_evtSetMes'+'hes'])==null||_0x4e9c6f['off'](),this['_evtSetMes'+'hes']=_0x41217e['on']('set:meshes',this['_onRenderS'+'etMeshes'],this),_0x41217e['meshes']&&this['_onRenderS'+'etMeshes'](_0x41217e['meshes']);}['_onRenderS'+'etMeshes'](_0x119166){this['_onMeshCha'+'nged'](_0x119166&&_0x119166[-0x5e1+0x6fd+0x8e*-0x2]);}['onSetLoop'](_0x57e1d4,_0x4f3d08,_0x2a37fb){this['emitter']&&(this['emitter'][_0x57e1d4]=_0x2a37fb,this['emitter']['resetTime']());}['onSetBlend'+'Type'](_0x4616b2,_0x1b71e3,_0x581c1b){this['emitter']&&(this['emitter'][_0x4616b2]=_0x581c1b,this['emitter']['material']['blendType']=_0x581c1b,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['_requestDe'+'pth'](){this['_requested'+'Depth']||(Wa||(Wa=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps)),Wa&&(Wa['incrementC'+'ounter'](),this['_requested'+'Depth']=!(0x1d79+0x1b10+-0x3889)));}['_releaseDe'+'pth'](){this['_requested'+'Depth']&&Wa&&(Wa['decrementC'+'ounter'](),this['_requested'+'Depth']=!(-0x265a+-0x22c0+0x3d9*0x13));}['onSetDepth'+'Softening'](_0x2808ed,_0x526d01,_0x2fff64){_0x526d01!==_0x2fff64&&(_0x2fff64?(this['enabled']&&this['entity']['enabled']&&this['_requestDe'+'pth'](),this['emitter']&&(this['emitter'][_0x2808ed]=_0x2fff64)):(this['enabled']&&this['entity']['enabled']&&this['_releaseDe'+'pth'](),this['emitter']&&(this['emitter'][_0x2808ed]=_0x2fff64)),this['emitter']&&(this['reset'](),this['emitter']['resetMater'+'ial'](),this['rebuild']()));}['onSetSimpl'+'eProperty'](_0x30ce3a,_0x105a67,_0xacf2bf){this['emitter']&&(this['emitter'][_0x30ce3a]=_0xacf2bf,this['emitter']['resetMater'+'ial']());}['onSetCompl'+'exProperty'](_0x31acf4,_0x34754f,_0x535d85){this['emitter']&&(this['emitter'][_0x31acf4]=_0x535d85,this['emitter']['resetMater'+'ial'](),this['rebuild'](),this['reset']());}['onSetGraph'+'Property'](_0x4049cf,_0x4603eb,_0x2e0492){this['emitter']&&(this['emitter'][_0x4049cf]=_0x2e0492,this['emitter']['rebuildGra'+'phs'](),this['emitter']['resetMater'+'ial']());}['onEnable'](){const _0x221df7=this['system']['app']['scene'],_0x3895f1=_0x221df7['layers'],_0x4a64d5=this['data'];for(let _0x179491=-0x1cb1+0x29*-0x45+0x2*0x13df,_0xbcd1fd=uc['length'];_0x179491<_0xbcd1fd;_0x179491++){let _0x5da961=_0x4a64d5[uc[_0x179491]];if(_0x5da961){if(!(_0x5da961 instanceof pe)){if(parseInt(_0x5da961,0x1*-0x767+-0x64*0x61+0x2d55)>=0x16a3+-0x1e2c+0x789*0x1)_0x5da961=this['system']['app']['assets']['get'](_0x5da961);else continue;}_0x5da961&&!_0x5da961['resource']&&this['system']['app']['assets']['load'](_0x5da961);}}if(!this['system']['app']['graphicsDe'+'vice']['disablePar'+'ticleSyste'+'m']){if(!this['emitter']){let _0x32d3ce=_0x4a64d5['mesh'];_0x32d3ce instanceof Ge||(_0x32d3ce=null),this['emitter']=new $b(this['system']['app']['graphicsDe'+'vice'],{'numParticles':_0x4a64d5['numParticl'+'es'],'emitterExtents':_0x4a64d5['emitterExt'+'ents'],'emitterExtentsInner':_0x4a64d5['emitterExt'+'entsInner'],'emitterRadius':_0x4a64d5['emitterRad'+'ius'],'emitterRadiusInner':_0x4a64d5['emitterRad'+'iusInner'],'emitterShape':_0x4a64d5['emitterSha'+'pe'],'initialVelocity':_0x4a64d5['initialVel'+'ocity'],'wrap':_0x4a64d5['wrap'],'localSpace':_0x4a64d5['localSpace'],'screenSpace':_0x4a64d5['screenSpac'+'e'],'wrapBounds':_0x4a64d5['wrapBounds'],'lifetime':_0x4a64d5['lifetime'],'rate':_0x4a64d5['rate'],'rate2':_0x4a64d5['rate2'],'orientation':_0x4a64d5['orientatio'+'n'],'particleNormal':_0x4a64d5['particleNo'+'rmal'],'animTilesX':_0x4a64d5['animTilesX'],'animTilesY':_0x4a64d5['animTilesY'],'animStartFrame':_0x4a64d5['animStartF'+'rame'],'animNumFrames':_0x4a64d5['animNumFra'+'mes'],'animNumAnimations':_0x4a64d5['animNumAni'+'mations'],'animIndex':_0x4a64d5['animIndex'],'randomizeAnimIndex':_0x4a64d5['randomizeA'+'nimIndex'],'animSpeed':_0x4a64d5['animSpeed'],'animLoop':_0x4a64d5['animLoop'],'startAngle':_0x4a64d5['startAngle'],'startAngle2':_0x4a64d5['startAngle'+'2'],'scaleGraph':_0x4a64d5['scaleGraph'],'scaleGraph2':_0x4a64d5['scaleGraph'+'2'],'colorGraph':_0x4a64d5['colorGraph'],'colorGraph2':_0x4a64d5['colorGraph'+'2'],'alphaGraph':_0x4a64d5['alphaGraph'],'alphaGraph2':_0x4a64d5['alphaGraph'+'2'],'localVelocityGraph':_0x4a64d5['localVeloc'+'ityGraph'],'localVelocityGraph2':_0x4a64d5['localVeloc'+'ityGraph2'],'velocityGraph':_0x4a64d5['velocityGr'+'aph'],'velocityGraph2':_0x4a64d5['velocityGr'+'aph2'],'rotationSpeedGraph':_0x4a64d5['rotationSp'+'eedGraph'],'rotationSpeedGraph2':_0x4a64d5['rotationSp'+'eedGraph2'],'radialSpeedGraph':_0x4a64d5['radialSpee'+'dGraph'],'radialSpeedGraph2':_0x4a64d5['radialSpee'+'dGraph2'],'colorMap':_0x4a64d5['colorMap'],'normalMap':_0x4a64d5['normalMap'],'loop':_0x4a64d5['loop'],'preWarm':_0x4a64d5['preWarm'],'sort':_0x4a64d5['sort'],'stretch':_0x4a64d5['stretch'],'alignToMotion':_0x4a64d5['alignToMot'+'ion'],'lighting':_0x4a64d5['lighting'],'halfLambert':_0x4a64d5['halfLamber'+'t'],'intensity':_0x4a64d5['intensity'],'depthSoftening':_0x4a64d5['depthSofte'+'ning'],'scene':this['system']['app']['scene'],'mesh':_0x32d3ce,'depthWrite':_0x4a64d5['depthWrite'],'noFog':_0x4a64d5['noFog'],'node':this['entity'],'blendType':_0x4a64d5['blendType']}),this['emitter']['meshInstan'+'ce']['node']=this['entity'],this['emitter']['drawOrder']=this['drawOrder'],_0x4a64d5['autoPlay']||(this['pause'](),this['emitter']['meshInstan'+'ce']['visible']=!(0x1a61*0x1+0xb9f+0x1*-0x25ff));}this['emitter']['colorMap']&&this['addMeshIns'+'tanceToLay'+'ers'](),this['_evtLayers'+'Changed']=_0x221df7['on']('set:layers',this['onLayersCh'+'anged'],this),_0x3895f1&&(this['_evtLayerA'+'dded']=_0x3895f1['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x3895f1['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&_0x4a64d5['depthSofte'+'ning']&&this['_requestDe'+'pth']();}}['onDisable'](){var _0x11fd74,_0x5bbcda,_0x31a261;const _0x4e846d=this['system']['app']['scene']['layers'];(_0x11fd74=this['_evtLayers'+'Changed'])==null||_0x11fd74['off'](),this['_evtLayers'+'Changed']=null,_0x4e846d&&((_0x5bbcda=this['_evtLayerA'+'dded'])==null||_0x5bbcda['off'](),this['_evtLayerA'+'dded']=null,(_0x31a261=this['_evtLayerR'+'emoved'])==null||_0x31a261['off'](),this['_evtLayerR'+'emoved']=null),this['emitter']&&(this['removeMesh'+'InstanceFr'+'omLayers'](),this['data']['depthSofte'+'ning']&&this['_releaseDe'+'pth'](),this['emitter']['camera']=null);}['onBeforeRe'+'move'](){this['enabled']&&(this['enabled']=!(0x6f*0x47+-0x11b*-0x1d+-0x3ed7)),this['emitter']&&(this['emitter']['destroy'](),this['emitter']=null);for(let _0x5c7f42=0x2b*-0xb2+0x2540+-0x75a;_0x5c7f42<uc['length'];_0x5c7f42++){const _0x25a159=uc[_0x5c7f42];this['data'][_0x25a159]&&(this[_0x25a159]=null);}this['off']();}['reset'](){this['emitter']&&this['emitter']['reset']();}['stop'](){this['emitter']&&(this['emitter']['loop']=!(-0x1af*0x17+-0xfca+0x3684),this['emitter']['resetTime'](),this['emitter']['addTime'](-0x88d*0x1+-0x1*-0x1181+-0x8f4,!(-0x1209+-0x19aa+0x2bb3)));}['pause'](){this['data']['paused']=!(-0xb*-0x36e+0xd91+-0x334b);}['unpause'](){this['data']['paused']=!(0x1b46*-0x1+0xa*0x3c5+-0xa6b);}['play'](){this['data']['paused']=!(0x1b9a+0x1*-0x1dda+0x241),this['emitter']&&(this['emitter']['meshInstan'+'ce']['visible']=!(0x4*0x47d+0xbda+-0x1dce),this['emitter']['loop']=this['data']['loop'],this['emitter']['resetTime']());}['isPlaying'](){return this['data']['paused']?!(0x7*0x1f9+-0xd91*0x2+-0x1*-0xd54):this['emitter']&&this['emitter']['loop']?!(-0x245e+0x4a*-0x48+0x392e):Date['now']()<=this['emitter']['endTime'];}['setInTools'](){const {emitter:_0x3119e3}=this;_0x3119e3&&!_0x3119e3['inTools']&&(_0x3119e3['inTools']=!(-0x2*0x793+0x247e+0x4*-0x556),this['rebuild']());}['rebuild'](){const _0x488fc0=this['enabled'];this['enabled']=!(-0x2ae*0x1+0x1d*-0x45+0x1*0xa80),this['emitter']&&this['emitter']['rebuild'](),this['enabled']=_0x488fc0;}}class yR{constructor(){this['numParticl'+'es']=-0x4*0x574+-0x1f80+0x3551,this['rate']=0x12*-0x1eb+0x46*0x6d+-0x5d*-0xd,this['rate2']=null,this['startAngle']=-0x462+-0xb64+0xfc6,this['startAngle'+'2']=null,this['lifetime']=-0x1*0x162a+-0xa51*0x1+0x20ad*0x1,this['emitterExt'+'ents']=new D(),this['emitterExt'+'entsInner']=new D(),this['emitterRad'+'ius']=-0x1*-0x63d+0x1def*0x1+-0x242c,this['emitterRad'+'iusInner']=-0x159b+-0x126*0x17+0x3005,this['emitterSha'+'pe']=ai,this['initialVel'+'ocity']=0x1401+0x2171+-0x3572,this['wrap']=!(0x284+0x5f*-0x39+0x4a9*0x4),this['wrapBounds']=new D(),this['localSpace']=!(0x8b3+-0x1*0x92f+0x7d),this['screenSpac'+'e']=!(0x1440+-0x10f3+-0x34c),this['colorMap']=null,this['colorMapAs'+'set']=null,this['normalMap']=null,this['normalMapA'+'sset']=null,this['loop']=!(0xc*0xea+-0xb2*-0x32+-0x2dbc*0x1),this['preWarm']=!(-0x198+0x604+-0x1d*0x27),this['sort']=-0x269*0x3+-0x1cb*-0x11+-0x40*0x5d,this['mode']=Ty,this['scene']=null,this['lighting']=!(0x1b1*-0x5+0x3e5*-0x1+0xc5b*0x1),this['halfLamber'+'t']=!(0x3b*-0x5b+0xcbf+0x83b),this['intensity']=-0x3*0x22d+-0x3b*-0x1f+-0x9d,this['stretch']=-0x3c6+-0xe16*-0x1+-0xa50,this['alignToMot'+'ion']=!(0x26d3+-0x1349*0x2+0x8*-0x8),this['depthSofte'+'ning']=-0xf7b*0x1+0x1*-0x20f4+0x306f,this['renderAsse'+'t']=null,this['meshAsset']=null,this['mesh']=null,this['depthWrite']=!(0x2041+-0x1a4b+-0x5f5),this['noFog']=!(0x3*-0x9fa+-0x2*-0x4f+-0x5*-0x5dd),this['orientatio'+'n']=Zc,this['particleNo'+'rmal']=new D(0x2*-0xa36+0x920+0xb4c,-0x10ab+0x206d+-0xfc1,0x2089*0x1+-0x14b8+-0xbd1),this['animTilesX']=0xb*-0x338+-0x52*-0xd+-0x1f3f*-0x1,this['animTilesY']=0xd5e+-0x1eb*0x1+-0x125*0xa,this['animStartF'+'rame']=0xc03+0x365*-0x5+-0x4f6*-0x1,this['animNumFra'+'mes']=-0x571*0x6+-0x805*0x1+0xa2b*0x4,this['animNumAni'+'mations']=-0x1*-0x1066+0x1*0x2406+-0x346b,this['animIndex']=-0x90c+-0x2061+0x296d,this['randomizeA'+'nimIndex']=!(0x3*-0x398+-0x756+0x121f),this['animSpeed']=0xe6*-0xa+-0x1a04+-0x3*-0xbab,this['animLoop']=!(-0x16*0x43+-0x7*-0x37f+-0x12b7),this['scaleGraph']=null,this['scaleGraph'+'2']=null,this['colorGraph']=null,this['colorGraph'+'2']=null,this['alphaGraph']=null,this['alphaGraph'+'2']=null,this['localVeloc'+'ityGraph']=null,this['localVeloc'+'ityGraph2']=null,this['velocityGr'+'aph']=null,this['velocityGr'+'aph2']=null,this['rotationSp'+'eedGraph']=null,this['rotationSp'+'eedGraph2']=null,this['radialSpee'+'dGraph']=null,this['radialSpee'+'dGraph2']=null,this['blendType']=Zs,this['enabled']=!(-0x19b5+0x2655+0x328*-0x4),this['paused']=!(-0x7e*0x8+-0x19*0x4+0x455),this['autoPlay']=!(-0x2367+-0x2db*0x1+0x1*0x2642),this['layers']=[Ji];}}const vR='\x0avarying\x20v'+'ec4\x20texCoo'+'rdsAlphaLi'+'fe;\x0a\x0aunifo'+'rm\x20sampler'+'2D\x20colorMa'+'p;\x0auniform'+'\x20sampler2D'+'\x20colorPara'+'m;\x0auniform'+'\x20float\x20gra'+'phSampleSi'+'ze;\x0aunifor'+'m\x20float\x20gr'+'aphNumSamp'+'les;\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0auniform\x20'+'float\x20soft'+'ening;\x0auni'+'form\x20float'+'\x20colorMult'+';\x0a\x0afloat\x20s'+'aturate(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex\x20\x20=\x20tex'+'ture2D(col'+'orMap,\x20vec'+'2(texCoord'+'sAlphaLife'+'.x,\x201.0\x20-\x20'+'texCoordsA'+'lphaLife.y'+'));\x0a\x20\x20\x20\x20ve'+'c4\x20ramp\x20=\x20'+'texture2D('+'colorParam'+',\x20vec2(tex'+'CoordsAlph'+'aLife.w,\x200'+'.0));\x0a\x20\x20\x20\x20'+'ramp.rgb\x20*'+'=\x20colorMul'+'t;\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20+=\x20te'+'xCoordsAlp'+'haLife.z;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'rgb\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'float\x20a\x20\x20='+'\x20tex.a\x20*\x20r'+'amp.a;\x0a',xR='\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0af'+'loat\x20satur'+'ate(float\x20'+'x)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p(x,\x200.0,\x20'+'1.0);\x0a}\x0a\x0av'+'ec4\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(\x20texture2'+'D(tex,tc),'+'\x20texture2D'+'(tex,tc\x20+\x20'+'graphSampl'+'eSize),\x20fr'+'act(tc.x*g'+'raphNumSam'+'ples)\x20);\x0a}'+'\x0a\x0avec4\x20tex'+'1Dlod_lerp'+'(TEXTURE_A'+'CCEPT_HIGH'+'P(tex),\x20ve'+'c2\x20tc,\x20out'+'\x20vec3\x20w)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'a\x20=\x20textur'+'e2D(tex,tc'+');\x0a\x20\x20\x20\x20vec'+'4\x20b\x20=\x20text'+'ure2D(tex,'+'tc\x20+\x20graph'+'SampleSize'+');\x0a\x20\x20\x20\x20flo'+'at\x20c\x20=\x20fra'+'ct(tc.x*gr'+'aphNumSamp'+'les);\x0a\x0a\x20\x20\x20'+'\x20vec3\x20unpa'+'ckedA\x20=\x20un'+'pack3NFloa'+'ts(a.w);\x0a\x20'+'\x20\x20\x20vec3\x20un'+'packedB\x20=\x20'+'unpack3NFl'+'oats(b.w);'+'\x0a\x20\x20\x20\x20w\x20=\x20m'+'ix(unpacke'+'dA,\x20unpack'+'edB,\x20c);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20mix(a,\x20b,'+'\x20c);\x0a}\x0a\x0ave'+'c2\x20rotate('+'vec2\x20quadX'+'Y,\x20float\x20p'+'Rotation,\x20'+'out\x20mat2\x20r'+'otMatrix)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20cos('+'pRotation)'+';\x0a\x20\x20\x20\x20floa'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x0a\x20\x20\x20\x20mat'+'2\x20m\x20=\x20mat2'+'(c,\x20-s,\x20s,'+'\x20c);\x0a\x20\x20\x20\x20r'+'otMatrix\x20='+'\x20m;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20m\x20*\x20'+'quadXY;\x0a}\x0a'+'\x0avec3\x20bill'+'board(vec3'+'\x20InstanceC'+'oords,\x20vec'+'2\x20quadXY)\x20'+'{\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREEN_'+('SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'os\x20=\x20vec3('+'-1,\x200,\x200)\x20'+'*\x20quadXY.x'+'\x20+\x20vec3(0,'+'\x20-1,\x200)\x20*\x20'+'quadXY.y;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20pos;\x0a}\x0a\x0av'+'ec3\x20custom'+'Face(vec3\x20'+'InstanceCo'+'ords,\x20vec2'+'\x20quadXY)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'pos\x20=\x20face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20faceBinor'+'m\x20*\x20quadXY'+'.y;\x0a\x20\x20\x20\x20re'+'turn\x20pos;\x0a'+'}\x0a\x0avec2\x20sa'+'feNormaliz'+'e(vec2\x20v)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20l\x20=\x20leng'+'th(v);\x0a\x20\x20\x20'+'\x20return\x20(l'+'\x20>\x201e-06)\x20'+'?\x20v\x20/\x20l\x20:\x20'+'v;\x0a}\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20meshLoc'+'alPos\x20=\x20pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20flo'+'at\x20id\x20=\x20fl'+'oor(partic'+'le_vertexD'+'ata.w);\x0a\x0a\x20'+'\x20\x20\x20float\x20r'+'ndFactor\x20='+'\x20fract(sin'+'(id\x20+\x201.0\x20'+'+\x20seed));\x0a'+'\x20\x20\x20\x20vec3\x20r'+'ndFactor3\x20'+'=\x20vec3(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20float\x20uv\x20'+'=\x20id\x20/\x20num'+'ParticlesP'+'ot;\x0a\x20\x20\x20\x20re'+'adInput(uv'+');\x0a\x0a#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20inV'+'el\x20=\x20mat3('+'matrix_mod'+'el)\x20*\x20inVe'+'l;\x0a#endif\x0a'+'\x20\x20\x20\x20vec2\x20v'+'elocityV\x20='+'\x20safeNorma'+'lize((mat3'+'(matrix_vi'+'ew)\x20*\x20inVe'+'l).xy);\x20//'+'\x20should\x20be'+'\x20removed\x20b'+'y\x20compiler'+'\x20if\x20align/'+'stretch\x20is'+'\x20not\x20used\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20particleL'+'ifetime\x20=\x20'+'lifetime;\x0a'+'\x0a\x20\x20\x20\x20if\x20(i')+('nLife\x20<=\x200'+'.0\x20||\x20inLi'+'fe\x20>\x20parti'+'cleLifetim'+'e\x20||\x20!inSh'+'ow)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20meshLoca'+'lPos\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20vec2\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20nlife\x20='+'\x20clamp(inL'+'ife\x20/\x20part'+'icleLifeti'+'me,\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20param'+'Div;\x0a\x20\x20\x20\x20v'+'ec4\x20params'+'\x20=\x20tex1Dlo'+'d_lerp(TEX'+'TURE_PASS('+'internalTe'+'x2),\x20vec2('+'nlife,\x200),'+'\x20paramDiv)'+';\x0a\x20\x20\x20\x20floa'+'t\x20scale\x20=\x20'+'params.y;\x0a'+'\x20\x20\x20\x20float\x20'+'scaleDiv\x20='+'\x20paramDiv.'+'x;\x0a\x20\x20\x20\x20flo'+'at\x20alphaDi'+'v\x20=\x20paramD'+'iv.z;\x0a\x0a\x20\x20\x20'+'\x20scale\x20+=\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20scale'+'DivMult\x20*\x20'+'fract(rndF'+'actor*1000'+'0.0);\x0a\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(quadXY'+'\x20*\x20-0.5\x20+\x20'+'0.5,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'alphaDivMu'+'lt\x20*\x20fract'+'(rndFactor'+'*1000.0),\x20'+'nlife);\x0a#e'+'lse\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(partic'+'le_uv,\x20(al'+'phaDiv\x20*\x202'+'.0\x20-\x201.0)\x20'+'*\x20alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePos\x20='+'\x20inPos;\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePosMo'+'ved\x20=\x20vec3'+'(0.0);\x0a\x0a\x20\x20'+'\x20\x20mat2\x20rot'+'Matrix;\x0a'),TR='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20min(flo'+'or(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y)\x20+\x20animT'+'exParams.x'+',\x20animTexP'+'arams.z);\x0a',wR='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20floor(m'+'od(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y\x20+\x20animTe'+'xParams.x,'+'\x20animTexPa'+'rams.z\x20+\x201'+'.0));\x0a',ER='\x0a\x20\x20\x20\x20float'+'\x20animation'+'Index;\x0a\x0a\x20\x20'+'\x20\x20if\x20(anim'+'TexIndexPa'+'rams.y\x20==\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20anima'+'tionIndex\x20'+'=\x20floor((a'+'nimTexPara'+'ms.w\x20+\x201.0'+')\x20*\x20rndFac'+'tor3.z)\x20*\x20'+'(animTexPa'+'rams.z\x20+\x201'+'.0);\x0a\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20animTex'+'IndexParam'+'s.x\x20*\x20(ani'+'mTexParams'+'.z\x20+\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20float\x20at'+'lasX\x20=\x20(an'+'imationInd'+'ex\x20+\x20animF'+'rame)\x20*\x20an'+'imTexTiles'+'Params.x;\x0a'+'\x20\x20\x20\x20float\x20'+'atlasY\x20=\x201'+'.0\x20-\x20floor'+'(atlasX\x20+\x20'+'1.0)\x20*\x20ani'+'mTexTilesP'+'arams.y;\x0a\x20'+'\x20\x20\x20atlasX\x20'+'=\x20fract(at'+'lasX);\x0a\x0a\x20\x20'+'\x20\x20texCoord'+'sAlphaLife'+'.xy\x20*=\x20ani'+'mTexTilesP'+'arams.xy;\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe.xy\x20+=\x20v'+'ec2(atlasX'+',\x20atlasY);'+'\x0a',bR='\x0avoid\x20read'+'Input(floa'+'t\x20uv)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'\x20=\x20texture'+'2D(particl'+'eTexIN,\x20ve'+'c2(uv,\x200.2'+'5));\x0a\x20\x20\x20\x20v'+'ec4\x20tex2\x20='+'\x20texture2D'+'(particleT'+'exIN,\x20vec2'+'(uv,\x200.75)'+');\x0a\x0a\x20\x20\x20\x20in'+'Pos\x20=\x20tex.'+'xyz;\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inAngle\x20='+'\x20(tex.w\x20<\x20'+'0.0?\x20-tex.'+'w\x20:\x20tex.w)'+'\x20-\x201000.0;'+'\x0a\x20\x20\x20\x20inSho'+'w\x20=\x20tex.w\x20'+'>=\x200.0;\x0a\x20\x20'+'\x20\x20inLife\x20='+'\x20tex2.w;\x0a}'+'\x0a',AR='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0a#'+'define\x20PI2'+'\x206.2831853'+'07179586\x0a\x0a'+'uniform\x20ve'+'c3\x20inBound'+'sSize;\x0auni'+'form\x20vec3\x20'+'inBoundsCe'+'nter;\x0a\x0auni'+'form\x20float'+'\x20maxVel;\x0a\x0a'+'float\x20deco'+'deFloatRG('+'vec2\x20rg)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20rg.y\x20*\x20('+'1.0\x20/\x20255.'+'0)\x20+\x20rg.x;'+'\x0a}\x0a\x0afloat\x20'+'decodeFloa'+'tRGBA(\x20vec'+'4\x20rgba\x20)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20dot(rgba'+',\x20vec4(1.0'+',\x201.0\x20/\x2025'+'5.0,\x201.0\x20/'+'\x2065025.0,\x20'+'1.0\x20/\x201605'+'81375.0));'+'\x0a}\x0a\x0avoid\x20r'+'eadInput(f'+'loat\x20uv)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex0\x20=\x20tex'+'ture2D(par'+'ticleTexIN'+',\x20vec2(uv,'+'\x200.125));\x0a'+'\x20\x20\x20\x20vec4\x20t'+'ex1\x20=\x20text'+'ure2D(part'+'icleTexIN,'+'\x20vec2(uv,\x20'+'0.375));\x0a\x20'+'\x20\x20\x20vec4\x20te'+'x2\x20=\x20textu'+'re2D(parti'+'cleTexIN,\x20'+'vec2(uv,\x200'+'.625));\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'3\x20=\x20textur'+'e2D(partic'+'leTexIN,\x20v'+'ec2(uv,\x200.'+'875));\x0a\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'vec3(decod'+'eFloatRG(t'+'ex0.rg),\x20d'+'ecodeFloat'+'RG(tex0.ba'+'),\x20decodeF'+'loatRG(tex'+'1.rg));\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'(inPos\x20-\x20v'+'ec3(0.5))\x20'+'*\x20inBounds'+'Size\x20+\x20inB'+'oundsCente'+'r;\x0a\x0a\x20\x20\x20\x20in'+'Vel\x20=\x20tex2'+'.xyz;\x0a\x20\x20\x20\x20'+'inVel\x20=\x20(i'+'nVel\x20-\x20vec'+'3(0.5))\x20*\x20'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20float\x20max'+'NegLife\x20=\x20'+'max(lifeti'+'me,\x20(numPa'+('rticles\x20-\x20'+'1.0)\x20*\x20(ra'+'te+rateDiv'+'));\x0a\x20\x20\x20\x20fl'+'oat\x20maxPos'+'Life\x20=\x20lif'+'etime+1.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20inLife'+'\x20*\x20(maxNeg'+'Life\x20+\x20max'+'PosLife)\x20-'+'\x20maxNegLif'+'e;\x0a}\x0a'),CR='\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'gl_FragCoo'+'rd.y<1.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'outPos,\x20(o'+'utAngle\x20+\x20'+'1000.0)\x20*\x20'+'visMode);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(outVel,\x20o'+'utLife);\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',PR='\x0auniform\x20v'+'ec3\x20outBou'+'ndsMul;\x0aun'+'iform\x20vec3'+'\x20outBounds'+'Add;\x0a\x0avec2'+'\x20encodeFlo'+'atRG(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec2\x20enc'+'\x20=\x20vec2(1.'+'0,\x20255.0)\x20'+'*\x20v;\x0a\x20\x20\x20\x20e'+'nc\x20=\x20fract'+'(enc);\x0a\x20\x20\x20'+'\x20enc\x20-=\x20en'+'c.yy\x20*\x20vec'+'2(1.0/255.'+'0,\x201.0/255'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20enc;'+'\x0a}\x0a\x0avec4\x20e'+'ncodeFloat'+'RGBA(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20enc'+'\x20=\x20vec4(1.'+'0,\x20255.0,\x20'+'65025.0,\x201'+'60581375.0'+')\x20*\x20v;\x0a\x20\x20\x20'+'\x20enc\x20=\x20fra'+'ct(enc);\x0a\x20'+'\x20\x20\x20enc\x20-=\x20'+'enc.yzww\x20*'+'\x20vec4(1.0/'+'255.0,1.0/'+'255.0,1.0/'+'255.0,0.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20enc;\x0a}\x0a'+'\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20outP'+'os\x20=\x20outPo'+'s\x20*\x20outBou'+'ndsMul\x20+\x20o'+'utBoundsAd'+'d;\x0a\x20\x20\x20\x20out'+'Angle\x20=\x20fr'+'act(outAng'+'le\x20/\x20PI2);'+'\x0a\x0a\x20\x20\x20\x20outV'+'el\x20=\x20(outV'+'el\x20/\x20maxVe'+'l)\x20+\x20vec3('+'0.5);\x20//\x20T'+'ODO:\x20mul\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'maxNegLife'+'\x20=\x20max(lif'+'etime,\x20(nu'+'mParticles'+'\x20-\x201.0)\x20*\x20'+'(rate+rate'+'Div));\x0a\x20\x20\x20'+'\x20float\x20max'+'PosLife\x20=\x20'+'lifetime+1'+'.0;\x0a\x20\x20\x20\x20ou'+'tLife\x20=\x20(o'+'utLife\x20+\x20m'+'axNegLife)'+'\x20/\x20(maxNeg'+'Life\x20+\x20max'+'PosLife);\x0a'+'\x0a\x20\x20\x20\x20if\x20(g'+'l_FragCoor'+'d.y\x20<\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(encodeFlo'+'atRG(outPo'+'s.x),\x20enco'+'deFloatRG('+'outPos.y))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(gl_'+'FragCoord.'+'y\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(e'+'ncodeFloat'+'RG(outPos.'+'z),\x20encode'+'FloatRG(ou'+'tAngle));\x0a'+'\x20\x20\x20\x20}\x20else'+('\x20if\x20(gl_Fr'+'agCoord.y\x20'+'<\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(out'+'Vel,\x20visMo'+'de*0.5+0.5'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20e'+'ncodeFloat'+'RGBA(outLi'+'fe);\x0a\x20\x20\x20\x20}'+'\x0a}\x0a'),MR='\x0auniform\x20m'+'at3\x20spawnB'+'ounds;\x0auni'+'form\x20vec3\x20'+'spawnPosIn'+'nerRatio;\x0a'+'\x0avec3\x20calc'+'SpawnPosit'+'ion(vec3\x20i'+'nBounds,\x20f'+'loat\x20rndFa'+'ctor)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20pos'+'\x20=\x20inBound'+'s\x20-\x20vec3(0'+'.5);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20posAb'+'s\x20=\x20abs(po'+'s);\x0a\x20\x20\x20\x20ve'+'c3\x20maxPos\x20'+'=\x20vec3(max'+'(posAbs.x,'+'\x20max(posAb'+'s.y,\x20posAb'+'s.z)));\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ed'+'ge\x20=\x20maxPo'+'s\x20+\x20(vec3('+'0.5)\x20-\x20max'+'Pos)\x20*\x20spa'+'wnPosInner'+'Ratio;\x0a\x0a\x20\x20'+'\x20\x20pos.x\x20=\x20'+'edge.x\x20*\x20('+'maxPos.x\x20='+'=\x20posAbs.x'+'\x20?\x20sign(po'+'s.x)\x20:\x202.0'+'\x20*\x20pos.x);'+'\x0a\x20\x20\x20\x20pos.y'+'\x20=\x20edge.y\x20'+'*\x20(maxPos.'+'y\x20==\x20posAb'+'s.y\x20?\x20sign'+'(pos.y)\x20:\x20'+'2.0\x20*\x20pos.'+'y);\x0a\x20\x20\x20\x20po'+'s.z\x20=\x20edge'+'.z\x20*\x20(maxP'+'os.z\x20==\x20po'+'sAbs.z\x20?\x20s'+'ign(pos.z)'+'\x20:\x202.0\x20*\x20p'+'os.z);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20return\x20e'+'mitterPos\x20'+'+\x20spawnBou'+'nds\x20*\x20pos;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20sp'+'awnBounds\x20'+'*\x20pos;\x0a#en'+'dif\x0a}\x0a\x0avoi'+'d\x20addIniti'+'alVelocity'+'(inout\x20vec'+'3\x20localVel'+'ocity,\x20vec'+'3\x20inBounds'+')\x20{\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20-=\x20vec3('+'0,\x200,\x20init'+'ialVelocit'+'y);\x0a}\x0a',DR='\x0a\x20\x20\x20\x20write'+'Output();\x0a'+'}\x0a',IR='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20parti'+'cleTexIN;\x0a'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex0;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0aunif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x2;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex3'+';\x0a\x0auniform'+'\x20mat3\x20emit'+'terMatrix;'+'\x0auniform\x20m'+'at3\x20emitte'+'rMatrixInv'+';\x0auniform\x20'+'vec3\x20emitt'+'erScale;\x0a\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Pos;\x0aunifo'+'rm\x20vec3\x20fr'+'ameRandom;'+'\x0auniform\x20v'+'ec3\x20localV'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20vec3\x20v'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20float\x20'+'delta;\x0auni'+'form\x20float'+'\x20rate;\x0auni'+'form\x20float'+'\x20rateDiv;\x0a'+'uniform\x20fl'+'oat\x20lifeti'+'me;\x0aunifor'+'m\x20float\x20nu'+'mParticles'+';\x0auniform\x20'+'float\x20rotS'+'peedDivMul'+'t;\x0auniform'+'\x20float\x20rad'+'ialSpeedDi'+'vMult;\x0auni'+'form\x20float'+'\x20seed;\x0auni'+'form\x20float'+'\x20startAngl'+'e;\x0auniform'+'\x20float\x20sta'+'rtAngle2;\x0a'+'uniform\x20fl'+'oat\x20initia'+'lVelocity;'+'\x0a\x0auniform\x20'+'float\x20grap'+'hSampleSiz'+'e;\x0auniform'+'\x20float\x20gra'+'phNumSampl'+'es;\x0a\x0avec3\x20'+'inPos;\x0avec'+'3\x20inVel;\x0af'+'loat\x20inAng'+'le;\x0abool\x20i'+'nShow;\x0aflo'+'at\x20inLife;'+'\x0afloat\x20vis'+'Mode;\x0a\x0avec'+'3\x20outPos;\x0a'+'vec3\x20outVe'+'l;\x0afloat\x20o'+'utAngle;\x0ab'+'ool\x20outSho'+'w;\x0afloat\x20o'+'utLife;\x0a',LR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x20-1.0;\x0a\x20\x20\x20'+'\x20}\x0a',RR='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20outLi'+'fe\x20<\x200.0?\x20'+'-1.0:\x20visM'+'ode;\x0a',OR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20visM'+'ode\x20=\x20outL'+'ife\x20<\x200.0?'+'\x201.0:\x20visM'+'ode;\x0a',FR='\x0auniform\x20f'+'loat\x20spawn'+'BoundsSphe'+'re;\x0aunifor'+'m\x20float\x20sp'+'awnBoundsS'+'phereInner'+'Ratio;\x0a\x0ave'+'c3\x20calcSpa'+'wnPosition'+'(vec3\x20inBo'+'unds,\x20floa'+'t\x20rndFacto'+'r)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20rnd4\x20'+'=\x20fract(rn'+'dFactor\x20*\x20'+'1000.0);\x0a\x20'+'\x20\x20\x20vec3\x20no'+'rm\x20=\x20norma'+'lize(inBou'+'nds.xyz\x20-\x20'+'vec3(0.5))'+';\x0a\x20\x20\x20\x20floa'+'t\x20r\x20=\x20rnd4'+'\x20*\x20(1.0\x20-\x20'+'spawnBound'+'sSphereInn'+'erRatio)\x20+'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio;\x0a'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20return'+'\x20emitterPo'+'s\x20+\x20norm\x20*'+'\x20r\x20*\x20spawn'+'BoundsSphe'+'re;\x0a#else\x0a'+'\x20\x20\x20\x20return'+'\x20norm\x20*\x20r\x20'+'*\x20spawnBou'+'ndsSphere;'+'\x0a#endif\x0a}\x0a'+'\x0avoid\x20addI'+'nitialVelo'+'city(inout'+'\x20vec3\x20loca'+'lVelocity,'+'\x20vec3\x20inBo'+'unds)\x20{\x0a\x20\x20'+'\x20\x20localVel'+'ocity\x20+=\x20n'+'ormalize(i'+'nBounds\x20-\x20'+'vec3(0.5))'+'\x20*\x20initial'+'Velocity;\x0a'+'}\x0a',NR='\x0afloat\x20sat'+'urate(floa'+'t\x20x)\x20{\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(x,\x200.0'+',\x201.0);\x0a}\x0a'+'\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0av'+'ec3\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc,\x20out\x20ve'+'c3\x20w)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20a\x20='+'\x20texture2D'+'(tex,\x20tc);'+'\x0a\x20\x20\x20\x20vec4\x20'+'b\x20=\x20textur'+'e2D(tex,\x20t'+'c\x20+\x20graphS'+'ampleSize)'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20g'+'raphNumSam'+'ples);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20unp'+'ackedA\x20=\x20u'+'npack3NFlo'+'ats(a.w);\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20w\x20=\x20'+'mix(unpack'+'edA,\x20unpac'+'kedB,\x20c);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(a.xy'+'z,\x20b.xyz,\x20'+'c);\x0a}\x0a\x0a#de'+'fine\x20HASHS'+'CALE4\x20vec4'+'(1031,\x20.10'+'30,\x20.0973,'+'\x20.1099)\x0ave'+'c4\x20hash41('+'float\x20p)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'p4\x20=\x20fract'+'(vec4(p)\x20*'+'\x20HASHSCALE'+'4);\x0a\x20\x20\x20\x20p4'+'\x20+=\x20dot(p4'+',\x20p4.wzxy+'+'19.19);\x0a\x20\x20'+'\x20\x20return\x20f'+'ract(vec4('+'(p4.x\x20+\x20p4'+'.y)*p4.z,\x20'+'(p4.x\x20+\x20p4'+'.z)*p4.y,\x20'+'(p4.y\x20+\x20p4'+'.z)*p4.w,\x20'+'(p4.z\x20+\x20p4'+'.w)*p4.x))'+';\x0a}\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(gl_FragCo'+'ord.x\x20>\x20nu'+'mParticles'+')\x20discard;'+'\x0a\x0a\x20\x20\x20\x20read'+'Input(vUv0'+'.x);\x0a\x20\x20\x20\x20v'+'isMode\x20=\x20i'+'nShow?\x201.0'+'\x20:\x20-1.0;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20r'+'ndFactor\x20='+'\x20hash41(gl'+'_FragCoord'+('.x\x20+\x20seed)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eRate\x20=\x20ra'+'te\x20+\x20rateD'+'iv\x20*\x20rndFa'+'ctor.x;\x0a\x0a\x20'+'\x20\x20\x20outLife'+'\x20=\x20inLife\x20'+'+\x20delta;\x0a\x20'+'\x20\x20\x20float\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20lifetim'+'e,\x200.0,\x201.'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localV'+'elocityDiv'+';\x0a\x20\x20\x20\x20vec3'+'\x20velocityD'+'iv;\x0a\x20\x20\x20\x20ve'+'c3\x20paramDi'+'v;\x0a\x20\x20\x20\x20vec'+'3\x20localVel'+'ocity\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex0),\x20'+'vec2(nlife'+',\x200),\x20loca'+'lVelocityD'+'iv);\x0a\x20\x20\x20\x20v'+'ec3\x20veloci'+'ty\x20=\x20\x20\x20\x20\x20\x20'+'tex1Dlod_l'+'erp(TEXTUR'+'E_PASS(int'+'ernalTex1)'+',\x20vec2(nli'+'fe,\x200),\x20ve'+'locityDiv)'+';\x0a\x20\x20\x20\x20vec3'+'\x20params\x20=\x20'+'\x20\x20\x20\x20\x20\x20\x20tex'+'1Dlod_lerp'+'(TEXTURE_P'+'ASS(intern'+'alTex2),\x20v'+'ec2(nlife,'+'\x200),\x20param'+'Div);\x0a\x20\x20\x20\x20'+'float\x20rotS'+'peed\x20=\x20par'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rot'+'SpeedDiv\x20='+'\x20paramDiv.'+'y;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20radialP'+'arams\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex3),\x20'+'vec2(nlife'+',\x200),\x20para'+'mDiv);\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeed\x20='+'\x20radialPar'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeedDi'+'v\x20=\x20radial'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20bool\x20'+'respawn\x20=\x20'+'inLife\x20<=\x20'+'0.0\x20||\x20out'+'Life\x20>=\x20li'+'fetime;\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'respawn\x20?\x20'+'calcSpawnP'+'osition(rn'+'dFactor.xy'+'z,\x20rndFact'+'or.x)\x20:\x20in'+'Pos;\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20r'+'espawn\x20?\x20m'+'ix(startAn'+'gle,\x20start'+'Angle2,\x20rn'+'dFactor.x)'+'\x20:\x20inAngle'+';\x0a\x0a#ifndef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20vec')+('3\x20radialVe'+'l\x20=\x20inPos\x20'+'-\x20emitterP'+'os;\x0a#else\x0a'+'\x20\x20\x20\x20vec3\x20r'+'adialVel\x20='+'\x20inPos;\x0a#e'+'ndif\x0a\x20\x20\x20\x20r'+'adialVel\x20='+'\x20(dot(radi'+'alVel,\x20rad'+'ialVel)\x20>\x20'+'1.0E-8)\x20?\x20'+'radialSpee'+'d\x20*\x20normal'+'ize(radial'+'Vel)\x20:\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20+=\x20(radi'+'alSpeedDiv'+'\x20*\x20vec3(2.'+'0)\x20-\x20vec3('+'1.0))\x20*\x20ra'+'dialSpeedD'+'ivMult\x20*\x20r'+'ndFactor.x'+'yz;\x0a\x0a\x20\x20\x20\x20l'+'ocalVeloci'+'ty\x20+=\x20\x20\x20\x20('+'localVeloc'+'ityDiv\x20*\x20v'+'ec3(2.0)\x20-'+'\x20vec3(1.0)'+')\x20*\x20localV'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20velo'+'city\x20+=\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20(vel'+'ocityDiv\x20*'+'\x20vec3(2.0)'+'\x20-\x20vec3(1.'+'0))\x20*\x20velo'+'cityDivMul'+'t\x20*\x20rndFac'+'tor.xyz;\x0a\x20'+'\x20\x20\x20rotSpee'+'d\x20+=\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(rotSpe'+'edDiv\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20rotSpeedD'+'ivMult\x20*\x20r'+'ndFactor.y'+';\x0a\x0a\x20\x20\x20\x20add'+'InitialVel'+'ocity(loca'+'lVelocity,'+'\x20rndFactor'+'.xyz);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20em'+'itterScale'+';\x0a#else\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20(localVel'+'ocity\x20+\x20ra'+'dialVel)\x20/'+'\x20emitterSc'+'ale\x20+\x20emit'+'terMatrixI'+'nv\x20*\x20veloc'+'ity;\x0a#endi'+'f\x0a\x0a\x20\x20\x20\x20out'+'Pos\x20=\x20inPo'+'s\x20+\x20outVel'+'\x20*\x20delta;\x0a'+'\x20\x20\x20\x20outAng'+'le\x20=\x20inAng'+'le\x20+\x20rotSp'+'eed\x20*\x20delt'+'a;\x0a'),kR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',UR='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'*=\x20saturat'+'e(gammaCor'+'rectInput('+'max(a,\x200.0'+')));\x0a\x20\x20\x20\x20i'+'f\x20((rgb.r\x20'+'+\x20rgb.g\x20+\x20'+'rgb.b)\x20<\x200'+'.000001)\x20d'+'iscard;\x0a',BR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3('+'1.0),\x20rgb,'+'\x20vec3(a));'+'\x0a\x20\x20\x20\x20if\x20(r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+'\x20>\x202.99)\x20d'+'iscard;\x0a',zR='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20d'+'iscard;\x0a',VR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20\x20\x20/'+'/\x20XYZ\x20=\x20wo'+'rld\x20pos,\x20W'+'\x20=\x20life\x0aat'+'tribute\x20ve'+'c4\x20particl'+'e_vertexDa'+'ta2;\x20\x20//\x20X'+'\x20=\x20angle,\x20'+'Y\x20=\x20scale,'+'\x20Z\x20=\x20alpha'+',\x20W\x20=\x20velo'+'city.x\x0aatt'+'ribute\x20vec'+'4\x20particle'+'_vertexDat'+'a3;\x20\x20//\x20XY'+'Z\x20=\x20partic'+'le\x20local\x20p'+'os,\x20W\x20=\x20ve'+'locity.y\x0aa'+'ttribute\x20f'+'loat\x20parti'+'cle_vertex'+'Data4;\x20//\x20'+'particle\x20i'+'d\x0a\x0a//\x20type'+'\x20depends\x20o'+'n\x20useMesh\x20'+'property.\x20'+'Start\x20with'+'\x20X\x20=\x20veloc'+'ity.z,\x20Y\x20='+'\x20particle\x20'+'ID\x20and\x20for'+'\x20mesh\x20part'+'icles\x20proc'+'eeds\x20with\x20'+'Z\x20=\x20mesh\x20U'+'V.x,\x20W\x20=\x20m'+'esh\x20UV.y\x0a/'+'/\x20Note:\x20Th'+'is\x20generat'+'es\x20a\x20dupli'+'cate\x20attri'+'bute\x20warni'+'ng,\x20as\x20the'+'\x20scanning\x20'+'we\x20do\x20is\x20v'+'ery\x20simple'+'.\x0a#ifndef\x20'+'USE_MESH\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec2\x20pa'+'rticle_ver'+'texData5;\x0a'+'#else\x0a\x20\x20\x20\x20'+'attribute\x20'+'vec4\x20parti'+'cle_vertex'+'Data5;\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifndef\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20#define\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a#endif\x0a\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20lifetim'+'e;\x0auniform'+'\x20float\x20str'+'etch;\x0aunif'+'orm\x20float\x20'+'seed;\x0aunif'+'orm\x20vec3\x20w'+'rapBounds;'+'\x0auniform\x20v'+'ec3\x20emitte'+'rScale;\x0aun'+('iform\x20vec3'+'\x20faceTange'+'nt;\x0aunifor'+'m\x20vec3\x20fac'+'eBinorm;\x0a\x0a'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex0'+';\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x1;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex2;\x0a#end'+'if\x0auniform'+'\x20vec3\x20emit'+'terPos;\x0a\x0av'+'arying\x20vec'+'4\x20texCoord'+'sAlphaLife'+';\x0a\x0avec2\x20ro'+'tate(vec2\x20'+'quadXY,\x20fl'+'oat\x20pRotat'+'ion,\x20out\x20m'+'at2\x20rotMat'+'rix)\x0a{\x0a\x20\x20\x20'+'\x20float\x20c\x20='+'\x20cos(pRota'+'tion);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20sin(pRota'+'tion);\x0a\x20\x20\x20'+'\x20//vec4\x20ro'+'tationMatr'+'ix\x20=\x20vec4('+'c,\x20-s,\x20s,\x20'+'c);\x0a\x0a\x20\x20\x20\x20m'+'at2\x20m\x20=\x20ma'+'t2(c,\x20-s,\x20'+'s,\x20c);\x0a\x20\x20\x20'+'\x20rotMatrix'+'\x20=\x20m;\x0a\x0a\x20\x20\x20'+'\x20return\x20m\x20'+'*\x20quadXY;\x0a'+'}\x0a\x0avec3\x20bi'+'llboard(ve'+'c3\x20Instanc'+'eCoords,\x20v'+'ec2\x20quadXY'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20return\x20p'+'os;\x0a}\x0a\x0avec'+'3\x20customFa'+'ce(vec3\x20In'+'stanceCoor'+'ds,\x20vec2\x20q'+'uadXY)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20po'+'s\x20=\x20faceTa'+'ngent\x20*\x20qu'+'adXY.x\x20+\x20f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0avoid\x20main'+'(void)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20pa'+'rticlePos\x20'+'=\x20particle'+'_vertexDat'+'a.xyz;\x0a\x20\x20\x20'+'\x20vec3\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20vec3\x20vert'+'Pos\x20=\x20part'+'icle_verte'+'xData3.xyz'+';\x0a\x20\x20\x20\x20vec3'+'\x20inVel\x20=\x20v'+'ec3(partic'+'le_vertexD'+'ata2.w,\x20pa')+('rticle_ver'+'texData3.w'+',\x20particle'+'_vertexDat'+'a5.x);\x0a\x0a\x20\x20'+'\x20\x20float\x20id'+'\x20=\x20floor(p'+'article_ve'+'rtexData4)'+';\x0a\x20\x20\x20\x20floa'+'t\x20rndFacto'+'r\x20=\x20fract('+'sin(id\x20+\x201'+'.0\x20+\x20seed)'+');\x0a\x20\x20\x20\x20vec'+'3\x20rndFacto'+'r3\x20=\x20vec3('+'rndFactor,'+'\x20fract(rnd'+'Factor*10.'+'0),\x20fract('+'rndFactor*'+'100.0));\x0a\x0a'+'#ifdef\x20LOC'+'AL_SPACE\x0a\x20'+'\x20\x20\x20inVel\x20='+'\x20mat3(matr'+'ix_model)\x20'+'*\x20inVel;\x0a#'+'endif\x0a\x20\x20\x20\x20'+'vec2\x20veloc'+'ityV\x20=\x20nor'+'malize((ma'+'t3(matrix_'+'view)\x20*\x20in'+'Vel).xy);\x20'+'//\x20should\x20'+'be\x20removed'+'\x20by\x20compil'+'er\x20if\x20alig'+'n/stretch\x20'+'is\x20not\x20use'+'d\x0a\x0a\x20\x20\x20\x20vec'+'2\x20quadXY\x20='+'\x20vertPos.x'+'y;\x0a\x0a#ifdef'+'\x20USE_MESH\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe\x20=\x20vec4('+'particle_v'+'ertexData5'+'.zw,\x20parti'+'cle_vertex'+'Data2.z,\x20p'+'article_ve'+'rtexData.w'+');\x0a#else\x0a\x20'+'\x20\x20\x20texCoor'+'dsAlphaLif'+'e\x20=\x20vec4(q'+'uadXY\x20*\x20-0'+'.5\x20+\x200.5,\x20'+'particle_v'+'ertexData2'+'.z,\x20partic'+'le_vertexD'+'ata.w);\x0a#e'+'ndif\x0a\x20\x20\x20\x20m'+'at2\x20rotMat'+'rix;\x0a\x0a\x20\x20\x20\x20'+'float\x20inAn'+'gle\x20=\x20part'+'icle_verte'+'xData2.x;\x0a'+'\x20\x20\x20\x20vec3\x20p'+'articlePos'+'Moved\x20=\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20vec3\x20me'+'shLocalPos'+'\x20=\x20particl'+'e_vertexDa'+'ta3.xyz;\x0a'),GR='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20par'+'ticle_vert'+'exData2.y\x20'+'*\x20emitterS'+'cale;\x0a\x20\x20\x20\x20'+'localPos\x20+'+'=\x20particle'+'Pos;\x0a\x0a\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_viewProje'+'ction\x20*\x20ve'+'c4(localPo'+'s,\x201.0);\x0a',HR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20quadXY'+');\x0a',WR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(rgb'+',\x20a);\x0a}\x0a',$R='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20sca'+'le\x20*\x20emitt'+'erScale;\x0a\x20'+'\x20\x20\x20localPo'+'s\x20+=\x20parti'+'clePos;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREEN_SPA'+'CE\x0a\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(loca'+'lPos.x,\x20lo'+'calPos.y,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20vec4(lo'+'calPos.xyz'+',\x201.0);\x0a\x20\x20'+'\x20\x20#endif\x0a',XR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20normal\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20vec3'+'\x20posNormal'+'\x20=\x20-normal'+'\x20*\x200.5\x20+\x200'+'.5;\x0a\x20\x20\x20\x20ne'+'gNormal\x20*='+'\x20negNormal'+';\x0a\x20\x20\x20\x20posN'+'ormal\x20*=\x20p'+'osNormal;\x0a',qR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20//\x20'+'XYZ\x20=\x20part'+'icle\x20posit'+'ion,\x20W\x20=\x20p'+'article\x20ID'+'\x20+\x20random\x20'+'factor\x0a\x0a#i'+'f\x20defined('+'USE_MESH)\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(USE_'+'MESH_UV)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20att'+'ribute\x20vec'+'2\x20particle'+'_uv;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mesh'+'\x20UV\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20par'+'ticle_uv\x20='+'\x20vec2(0.0,'+'\x200.0);\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20mat4\x20m'+'atrix_view'+'Projection'+';\x0auniform\x20'+'mat4\x20matri'+'x_model;\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20numPart'+'iclesPot;\x0a'+'uniform\x20fl'+'oat\x20graphS'+'ampleSize;'+'\x0auniform\x20f'+'loat\x20graph'+'NumSamples'+';\x0auniform\x20'+'float\x20stre'+'tch;\x0aunifo'+'rm\x20vec3\x20wr'+'apBounds;\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Scale;\x0auni'+'form\x20vec3\x20'+'emitterPos'+';\x0auniform\x20'+'vec3\x20faceT'+'angent;\x0aun'+'iform\x20vec3'+'\x20faceBinor'+'m;\x0auniform'+'\x20float\x20rat'+'e;\x0auniform'+'\x20float\x20rat'+'eDiv;\x0aunif'+'orm\x20float\x20'+'lifetime;\x0a'+'uniform\x20fl'+'oat\x20deltaR'+'andomnessS'+'tatic;\x0auni'+'form\x20float'+'\x20scaleDivM'+'ult;\x0aunifo'+'rm\x20float\x20a'+'lphaDivMul'+'t;\x0auniform'+'\x20float\x20see'+'d;\x0auniform'+'\x20float\x20del'+'ta;\x0aunifor'+'m\x20sampler2'+'D\x20particle'+'TexOUT;\x0aun'+'iform\x20samp'+('ler2D\x20part'+'icleTexIN;'+'\x0a\x0a#ifdef\x20P'+'ARTICLE_GP'+'U\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x0;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex2;\x0a#e'+'ndif\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0avarying\x20'+'vec4\x20texCo'+'ordsAlphaL'+'ife;\x0a\x0avec3'+'\x20inPos;\x0ave'+'c3\x20inVel;\x0a'+'float\x20inAn'+'gle;\x0abool\x20'+'inShow;\x0afl'+'oat\x20inLife'+';\x0a'),jR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20max(norm'+'al,\x20vec3(0'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20posNo'+'rmal\x20=\x20max'+'(-normal,\x20'+'vec3(0.0))'+';\x0a',YR='\x0a\x20\x20\x20\x20vec3\x20'+'light\x20=\x20ne'+'gNormal.x*'+'lightCube['+'0]\x20+\x20posNo'+'rmal.x*lig'+'htCube[1]\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20negN'+'ormal.y*li'+'ghtCube[2]'+'\x20+\x20posNorm'+'al.y*light'+'Cube[3]\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20negNor'+'mal.z*ligh'+'tCube[4]\x20+'+'\x20posNormal'+'.z*lightCu'+'be[5];\x0a\x0a\x20\x20'+'\x20\x20rgb\x20*=\x20l'+'ight;\x0a',KR='\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20('+'matrix_mod'+'el\x20*\x20vec4('+'particlePo'+'s,\x201.0)).x'+'yz;\x0a',ZR='\x0a\x20\x20\x20\x20vec3\x20'+'localPos\x20='+'\x20meshLocal'+'Pos;\x0a\x20\x20\x20\x20l'+'ocalPos.xy'+'\x20=\x20rotate('+'localPos.x'+'y,\x20inAngle'+',\x20rotMatri'+'x);\x0a\x20\x20\x20\x20lo'+'calPos.yz\x20'+'=\x20rotate(l'+'ocalPos.yz'+',\x20inAngle,'+'\x20rotMatrix'+');\x0a\x0a\x20\x20\x20\x20bi'+'llboard(pa'+'rticlePos,'+'\x20quadXY);\x0a',QR='\x0a\x20\x20\x20\x20Norma'+'l\x20=\x20normal'+'ize(localP'+'os\x20+\x20matri'+'x_viewInve'+'rse[2].xyz'+');\x0a',JR='\x0a\x20\x20\x20\x20vec3\x20'+'normalMap\x20'+'=\x20normaliz'+'e(texture2'+'D(normalMa'+'p,\x20vec2(te'+'xCoordsAlp'+'haLife.x,\x20'+'1.0\x20-\x20texC'+'oordsAlpha'+'Life.y)).x'+'yz\x20*\x202.0\x20-'+'\x201.0);\x0a\x20\x20\x20'+'\x20vec3\x20norm'+'al\x20=\x20Parti'+'cleMat\x20*\x20n'+'ormalMap;\x0a',e3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan(veloci'+'tyV.x,\x20vel'+'ocityV.y);'+'\x0a\x0a',t3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',s3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vec3\x20No'+'rmal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20lightCu'+'be[6];\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20float\x20vDe'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fogP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'f\x20NORMAL\x20='+'=\x20MAP\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20normalMa'+'p;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22p'+'articlePS\x22'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_softP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20normal\x20'+'=\x20Normal;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalMap'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20HALF_L'+'AMBERT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_ha'+'lflambertP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_la'+'mbertPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_lighting'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20BLEND\x20'+'==\x20NORMAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndNormalPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+('\x20ADDITIVE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndAddPS\x22\x0a\x20'+'\x20\x20\x20#elif\x20B'+'LEND\x20==\x20MU'+'LTIPLICATI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendMulti'+'plyPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endPS\x22\x0a'),i3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20animTexTi'+'lesParams;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20animTexP'+'arams;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec2\x20an'+'imTexIndex'+'Params;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20NO'+'RMAL\x20==\x20MA'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec3\x20Normal'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20SOFT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'rying\x20floa'+'t\x20vDepth;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_initVS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PA'+'CK8\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleInputR'+'gba8PS\x22\x20\x20\x20'+'\x20\x20//\x20why\x20a'+'re\x20these\x20P'+'S\x20and\x20not\x20'+'VS?\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x20'+'\x22particleI'+'nputFloatP'+'S\x22\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'OFT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22scre'+'enDepthPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleVS\x22\x0a\x0a\x20\x20'+'\x20\x20#else\x20//'+'\x20PARTICLE_'+'CPU\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22scr'+'eenDepthPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_cpuVS'+'\x22\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_local'+'ShiftVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20ANIMT'+'EX_LOOP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('#include\x20\x22'+'particleAn'+'imFrameLoo'+'pVS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particleA'+'nimFrameCl'+'ampVS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleAn'+'imTexVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20wr'+'ap\x20is\x20not\x20'+'used\x20on\x20CP'+'U,\x20it\x20was\x20'+'commented\x20'+'out.\x20TODO:'+'\x20investiga'+'te\x20why\x0a\x20\x20\x20'+'\x20#ifdef\x20PA'+'RTICLE_GPU'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20WRAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_wrapVS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20AL'+'IGN_TO_MOT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_pointAlon'+'gVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20US'+'E_MESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_meshVS'+'\x22\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20CUS'+'TOM_FACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'customFace'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_b'+'illboardVS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalVS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_TBNVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STRETCH\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_str'+'etchVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endVS\x22\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20PARTICLE'+'_CPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_cpu_endV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#')+('ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_so'+'ftVS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20}\x0a'),r3='\x0a\x20\x20\x20\x20float'+'\x20depth\x20=\x20g'+'etLinearSc'+'reenDepth('+');\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eDepth\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20float\x20dep'+'thDiff\x20=\x20s'+'aturate(ab'+'s(particle'+'Depth\x20-\x20de'+'pth)\x20*\x20sof'+'tening);\x0a\x20'+'\x20\x20\x20a\x20*=\x20de'+'pthDiff;\x0a',a3='\x0a\x20\x20\x20\x20vDept'+'h\x20=\x20getLin'+'earDepth(l'+'ocalPos);\x0a',n3='\x0a\x20\x20\x20\x20vec3\x20'+'moveDir\x20=\x20'+'inVel\x20*\x20st'+'retch;\x0a\x20\x20\x20'+'\x20vec3\x20posP'+'rev\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20+=\x20partic'+'lePosMoved'+';\x0a\x0a\x20\x20\x20\x20vec'+'2\x20centerTo'+'VertexV\x20=\x20'+'normalize('+'(mat3(matr'+'ix_view)\x20*'+'\x20localPos)'+'.xy);\x0a\x0a\x20\x20\x20'+'\x20float\x20int'+'erpolation'+'\x20=\x20dot(-ve'+'locityV,\x20c'+'enterToVer'+'texV)\x20*\x200.'+'5\x20+\x200.5;\x0a\x0a'+'\x20\x20\x20\x20partic'+'lePos\x20=\x20mi'+'x(particle'+'Pos,\x20posPr'+'ev,\x20interp'+'olation);\x0a',o3='\x0a\x20\x20\x20\x20mat3\x20'+'rot3\x20=\x20mat'+'3(rotMatri'+'x[0][0],\x20r'+'otMatrix[0'+'][1],\x200.0,'+'\x20rotMatrix'+'[1][0],\x20ro'+'tMatrix[1]'+'[1],\x200.0,\x20'+'0.0,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'ParticleMa'+'t\x20=\x20mat3(-'+'matrix_vie'+'wInverse[0'+'].xyz,\x20-ma'+'trix_viewI'+'nverse[1].'+'xyz,\x20matri'+'x_viewInve'+'rse[2].xyz'+')\x20*\x20rot3;\x0a',l3='\x0a\x20\x20\x20\x20vec3\x20'+'origPartic'+'lePos\x20=\x20pa'+'rticlePos;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20-=\x20'+'matrix_mod'+'el[3].xyz;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20m'+'od(particl'+'ePos,\x20wrap'+'Bounds)\x20-\x20'+'wrapBounds'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20+=\x20mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'PosMoved\x20='+'\x20particleP'+'os\x20-\x20origP'+'articlePos'+';\x0a',c3={'particlePS':vR,'particleVS':xR,'particleAnimFrameClampVS':TR,'particleAnimFrameLoopVS':wR,'particleAnimTexVS':ER,'particleInputFloatPS':bR,'particleInputRgba8PS':AR,'particleOutputFloatPS':CR,'particleOutputRgba8PS':PR,'particleUpdaterAABBPS':MR,'particleUpdaterEndPS':DR,'particleUpdaterInitPS':IR,'particleUpdaterNoRespawnPS':LR,'particleUpdaterOnStopPS':RR,'particleUpdaterRespawnPS':OR,'particleUpdaterSpherePS':FR,'particleUpdaterStartPS':NR,'particle_billboardVS':kR,'particle_blendAddPS':UR,'particle_blendMultiplyPS':BR,'particle_blendNormalPS':zR,'particle_cpuVS':VR,'particle_cpu_endVS':GR,'particle_customFaceVS':HR,'particle_endPS':WR,'particle_endVS':$R,'particle_halflambertPS':XR,'particle_initVS':qR,'particle_lambertPS':jR,'particle_lightingPS':YR,'particle_localShiftVS':KR,'particle_meshVS':ZR,'particle_normalVS':QR,'particle_normalMapPS':JR,'particle_pointAlongVS':e3,'particle_simulationPS':t3,'particle_shaderPS':s3,'particle_shaderVS':i3,'particle_softPS':r3,'particle_softVS':a3,'particle_stretchVS':n3,'particle_TBNVS':o3,'particle_wrapVS':l3},h3='\x0avarying\x20t'+'exCoordsAl'+'phaLife:\x20v'+'ec4f;\x0a\x0avar'+'\x20colorMap:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20colorMap'+'Sampler:\x20s'+'ampler;\x0ava'+'r\x20colorPar'+'am:\x20textur'+'e_2d<f32>;'+'\x0avar\x20color'+'ParamSampl'+'er:\x20sample'+'r;\x0a\x0aunifor'+'m\x20graphSam'+'pleSize:\x20f'+'32;\x0aunifor'+'m\x20graphNum'+'Samples:\x20f'+'32;\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0auniform'+'\x20softening'+':\x20f32;\x0auni'+'form\x20color'+'Mult:\x20f32;'+'\x0a\x0afn\x20satur'+'ate(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(x,'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20tex:\x20v'+'ec4f\x20\x20=\x20te'+'xtureSampl'+'e(colorMap'+',\x20colorMap'+'Sampler,\x20v'+'ec2f(input'+'.texCoords'+'AlphaLife.'+'x,\x201.0\x20-\x20i'+'nput.texCo'+'ordsAlphaL'+'ife.y));\x0a\x20'+'\x20\x20\x20var\x20ram'+'p:\x20vec4f\x20='+'\x20textureSa'+'mple(color'+'Param,\x20col'+'orParamSam'+'pler,\x20vec2'+'f(input.te'+'xCoordsAlp'+'haLife.w,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20ramp\x20=\x20ve'+'c4f(ramp.r'+'gb\x20*\x20unifo'+'rm.colorMu'+'lt,\x20ramp.a'+');\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20=\x20ram'+'p.a\x20+\x20inpu'+'t.texCoord'+'sAlphaLife'+'.z;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20rgb:\x20ve'+'c3f\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'var\x20a:\x20f32'+'\x20=\x20tex.a\x20*'+'\x20ramp.a;\x0a',d3='\x0afn\x20unpack'+'3NFloats(s'+'rc:\x20f32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20r\x20'+'=\x20fract(sr'+'c);\x0a\x20\x20\x20\x20le'+'t\x20g\x20=\x20frac'+'t(src\x20*\x2025'+'6.0);\x0a\x20\x20\x20\x20'+'let\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3f(r,\x20'+'g,\x20b);\x0a}\x0a\x0a'+'fn\x20saturat'+'e(x:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0astruct\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20resu'+'lt:\x20vec4f,'+'\x0a\x20\x20\x20\x20unpac'+'ked:\x20vec3f'+'\x0a}\x0a\x0afn\x20tex'+'1Dlod_lerp'+'_simple(te'+'x:\x20texture'+'_2d<f32>,\x20'+'texSampler'+':\x20sampler,'+'\x20tc:\x20vec2f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20tc_next\x20='+'\x20tc\x20+\x20vec2'+'f(uniform.'+'graphSampl'+'eSize);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(\x20textur'+'eSample(te'+'x,\x20texSamp'+'ler,\x20tc),\x20'+'textureSam'+'ple(tex,\x20t'+'exSampler,'+'\x20tc_next),'+'\x20fract(tc.'+'x\x20*\x20unifor'+'m.graphNum'+'Samples)\x20)'+';\x0a}\x0a\x0afn\x20te'+'x1Dlod_ler'+'p_unpack(t'+'ex:\x20textur'+'e_2d<f32>,'+'\x20texSample'+'r:\x20sampler'+',\x20tc:\x20vec2'+'f)\x20->\x20TexL'+'erpUnpackR'+'esult\x20{\x0a\x20\x20'+'\x20\x20let\x20tc_n'+'ext\x20=\x20tc\x20+'+'\x20vec2f(uni'+'form.graph'+'SampleSize'+');\x0a\x20\x20\x20\x20let'+'\x20a\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20tc,\x200.0);'+'\x0a\x20\x20\x20\x20let\x20b'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'c_next,\x200.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20u'+'niform.gra'+'phNumSampl'+'es);\x0a\x20\x20\x20\x20l'+'et\x20unpacke'+'dA\x20=\x20unpac'+'k3NFloats('+'a.w);\x0a\x20\x20\x20\x20'+'let\x20unpack'+'edB\x20=\x20unpa'+'ck3NFloats'+'(b.w);\x0a\x20\x20\x20'+'\x20let\x20w_out'+('\x20=\x20mix(unp'+'ackedA,\x20un'+'packedB,\x20c'+');\x0a\x20\x20\x20\x20ret'+'urn\x20TexLer'+'pUnpackRes'+'ult(mix(a,'+'\x20b,\x20c),\x20w_'+'out);\x0a}\x0a\x0as'+'truct\x20Rota'+'teResult\x20{'+'\x0a\x20\x20\x20\x20rotat'+'edVec:\x20vec'+'2f,\x0a\x20\x20\x20\x20ma'+'trix:\x20mat2'+'x2f\x0a}\x0a\x0afn\x20'+'rotateWith'+'Matrix(qua'+'dXY:\x20vec2f'+',\x20pRotatio'+'n:\x20f32)\x20->'+'\x20RotateRes'+'ult\x20{\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20co'+'s(pRotatio'+'n);\x0a\x20\x20\x20\x20le'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x20\x20\x20\x20let\x20'+'m\x20=\x20mat2x2'+'f(vec2f(c,'+'\x20s),\x20vec2f'+'(-s,\x20c));\x0a'+'\x20\x20\x20\x20return'+'\x20RotateRes'+'ult(m\x20*\x20qu'+'adXY,\x20m);\x0a'+'}\x0a\x0afn\x20bill'+'board(Inst'+'anceCoords'+':\x20vec3f,\x20q'+'uadXY:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20pos:\x20ve'+'c3f;\x0a\x20\x20\x20\x20#'+'ifdef\x20SCRE'+'EN_SPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pos'+'\x20=\x20vec3f(-'+'1.0,\x200.0,\x20'+'0.0)\x20*\x20qua'+'dXY.x\x20+\x20ve'+'c3f(0.0,\x20-'+'1.0,\x200.0)\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20custom'+'Face(Insta'+'nceCoords:'+'\x20vec3f,\x20qu'+'adXY:\x20vec2'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20pos\x20=\x20un'+'iform.face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20uniform.f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20safeNo'+'rmalize(v:'+'\x20vec2f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20let\x20l\x20='+'\x20length(v)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20select('+'v,\x20v\x20/\x20l,\x20'+'l\x20>\x201e-06)'+';\x0a}\x0a\x0a@vert'+'ex\x0afn\x20vert'+'exMain(inp')+('ut:\x20Vertex'+'Input)\x20->\x20'+'VertexOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20meshLo'+'calPos_in\x20'+'=\x20input.pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20id\x20=\x20floo'+'r(input.pa'+'rticle_ver'+'texData.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20rndFactor'+'\x20=\x20fract(s'+'in(id\x20+\x201.'+'0\x20+\x20unifor'+'m.seed));\x0a'+'\x20\x20\x20\x20let\x20rn'+'dFactor3\x20='+'\x20vec3f(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20let\x20uv\x20=\x20'+'id\x20/\x20unifo'+'rm.numPart'+'iclesPot;\x0a'+'\x20\x20\x20\x20readIn'+'put(uv);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20model'+'Rotation\x20='+'\x20mat3x3f(u'+'niform.mat'+'rix_model['+'0].xyz,\x20un'+'iform.matr'+'ix_model[1'+'].xyz,\x20uni'+'form.matri'+'x_model[2]'+'.xyz);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20inVel'+'\x20=\x20modelRo'+'tation\x20*\x20i'+'nVel;\x0a\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20let\x20viewR'+'otation\x20=\x20'+'mat3x3f(un'+'iform.matr'+'ix_view[0]'+'.xyz,\x20unif'+'orm.matrix'+'_view[1].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[2].xyz'+');\x0a\x20\x20\x20\x20let'+'\x20velocityV'+'\x20=\x20safeNor'+'malize((vi'+'ewRotation'+'\x20*\x20inVel).'+'xy);\x0a\x0a\x20\x20\x20\x20'+'let\x20partic'+'leLifetime'+'\x20=\x20uniform'+'.lifetime;'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'meshLocalP'+'os\x20=\x20meshL'+'ocalPos_in'+';\x0a\x20\x20\x20\x20if\x20('+'inLife\x20<=\x20'+'0.0\x20||\x20inL'+'ife\x20>\x20part'+'icleLifeti'+'me\x20||\x20!inS'+'how)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mesh'+'LocalPos\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20let\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20let'+'\x20nlife\x20=\x20c')+('lamp(inLif'+'e\x20/\x20partic'+'leLifetime'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20lerp_res'+'ult\x20=\x20tex1'+'Dlod_lerp_'+'unpack(int'+'ernalTex2,'+'\x20internalT'+'ex2Sampler'+',\x20vec2f(nl'+'ife,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'params\x20=\x20l'+'erp_result'+'.result;\x0a\x20'+'\x20\x20\x20let\x20par'+'amDiv\x20=\x20le'+'rp_result.'+'unpacked;\x0a'+'\x0a\x20\x20\x20\x20var\x20s'+'cale\x20=\x20par'+'ams.y;\x0a\x20\x20\x20'+'\x20let\x20scale'+'Div\x20=\x20para'+'mDiv.x;\x0a\x20\x20'+'\x20\x20let\x20alph'+'aDiv\x20=\x20par'+'amDiv.z;\x0a\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20scale\x20+\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20unifo'+'rm.scaleDi'+'vMult\x20*\x20fr'+'act(rndFac'+'tor*10000.'+'0);\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20USE'+'_MESH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.texCoords'+'AlphaLife\x20'+'=\x20vec4f(qu'+'adXY\x20*\x20-0.'+'5\x20+\x200.5,\x20('+'alphaDiv\x20*'+'\x202.0\x20-\x201.0'+')\x20*\x20unifor'+'m.alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife\x20=\x20vec4'+'f(particle'+'_uv,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'uniform.al'+'phaDivMult'+'\x20*\x20fract(r'+'ndFactor*1'+'000.0),\x20nl'+'ife);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20var\x20part'+'iclePos\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20var\x20parti'+'clePosMove'+'d\x20=\x20vec3f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20var\x20rotMa'+'trix:\x20mat2'+'x2f;\x0a'),f3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20min('+'floor(inpu'+'t.texCoord'+'sAlphaLife'+'.w\x20*\x20unifo'+'rm.animTex'+'Params.y)\x20'+'+\x20uniform.'+'animTexPar'+'ams.x,\x20uni'+'form.animT'+'exParams.z'+');\x0a',u3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20floo'+'r((output.'+'texCoordsA'+'lphaLife.w'+'\x20*\x20uniform'+'.animTexPa'+'rams.y\x20+\x20u'+'niform.ani'+'mTexParams'+'.x)\x20%\x20(uni'+'form.animT'+'exParams.z'+'\x20+\x201.0));\x20'+'\x20\x20\x20\x0a',p3='\x0a\x20\x20\x20\x20var\x20a'+'nimationIn'+'dex:\x20f32;\x0a'+'\x0a\x20\x20\x20\x20if\x20(u'+'niform.ani'+'mTexIndexP'+'arams.y\x20=='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20floor(('+'uniform.an'+'imTexParam'+'s.w\x20+\x201.0)'+'\x20*\x20rndFact'+'or3.z)\x20*\x20('+'uniform.an'+'imTexParam'+'s.z\x20+\x201.0)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20animati'+'onIndex\x20=\x20'+'uniform.an'+'imTexIndex'+'Params.x\x20*'+'\x20(uniform.'+'animTexPar'+'ams.z\x20+\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20var\x20a'+'tlasX:\x20f32'+'\x20=\x20(animat'+'ionIndex\x20+'+'\x20animFrame'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20atlasY:\x20'+'f32\x20=\x201.0\x20'+'-\x20floor(at'+'lasX\x20+\x201.0'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.y;\x0a\x20\x20\x20\x20at'+'lasX\x20=\x20fra'+'ct(atlasX)'+';\x20//\x20Reass'+'ign\x20atlasX'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'current_tc'+'al_xy\x20=\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.xy;\x0a\x20\x20'+'\x20\x20let\x20scal'+'ed_tcal_xy'+'\x20=\x20current'+'_tcal_xy\x20*'+'\x20uniform.a'+'nimTexTile'+'sParams.xy'+';\x0a\x20\x20\x20\x20let\x20'+'final_tcal'+'_xy\x20=\x20scal'+'ed_tcal_xy'+'\x20+\x20vec2f(a'+'tlasX,\x20atl'+'asY);\x0a\x20\x20\x20\x20'+'output.tex'+'CoordsAlph'+'aLife\x20=\x20ve'+'c4f(final_'+'tcal_xy,\x20o'+'utput.texC'+'oordsAlpha'+'Life.z,\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.w);\x0a',m3='\x0afn\x20readIn'+'put(uv:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex:\x20ve'+'c4f\x20=\x20text'+'ureSampleL'+'evel(parti'+'cleTexIN,\x20'+'particleTe'+'xINSampler'+',\x20vec2f(uv'+',\x200.25),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex2:\x20v'+'ec4f\x20=\x20tex'+'tureSample'+'Level(part'+'icleTexIN,'+'\x20particleT'+'exINSample'+'r,\x20vec2f(u'+'v,\x200.75),\x20'+'0.0);\x0a\x0a\x20\x20\x20'+'\x20inPos\x20=\x20t'+'ex.xyz;\x0a\x20\x20'+'\x20\x20inVel\x20=\x20'+'tex2.xyz;\x0a'+'\x20\x20\x20\x20inAngl'+'e\x20=\x20abs(te'+'x.w)\x20-\x20100'+'0.0;\x0a\x20\x20\x20\x20i'+'nShow\x20=\x20te'+'x.w\x20>=\x200.0'+';\x0a\x20\x20\x20\x20inLi'+'fe\x20=\x20tex2.'+'w;\x0a}\x0a',_3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0ac'+'onst\x20PI2:\x20'+'f32\x20=\x206.28'+'3185307179'+'586;\x0a\x0aunif'+'orm\x20inBoun'+'dsSize:\x20ve'+'c3f;\x0aunifo'+'rm\x20inBound'+'sCenter:\x20v'+'ec3f;\x0a\x0auni'+'form\x20maxVe'+'l:\x20f32;\x0a\x0af'+'n\x20decodeFl'+'oatRG(rg:\x20'+'vec2f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20rg.'+'y\x20*\x20(1.0\x20/'+'\x20255.0)\x20+\x20'+'rg.x;\x0a}\x0a\x0af'+'n\x20decodeFl'+'oatRGBA(\x20r'+'gba:\x20vec4f'+'\x20)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20dot(rgb'+'a,\x20vec4f(1'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x2065025.0'+',\x201.0\x20/\x2016'+'0581375.0)'+');\x0a}\x0a\x0afn\x20r'+'eadInput(u'+'v:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20let\x20te'+'x0\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.125),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex1\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.37'+'5),\x200.0);\x0a'+'\x20\x20\x20\x20let\x20te'+'x2\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.625),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex3\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.87'+'5),\x200.0);\x0a'+'\x0a\x20\x20\x20\x20inPos'+'\x20=\x20vec3f(d'+'ecodeFloat'+'RG(tex0.rg'+'),\x20decodeF'+'loatRG(tex'+'0.ba),\x20dec'+'odeFloatRG'+'(tex1.rg))'+';\x0a\x20\x20\x20\x20inPo'+'s\x20=\x20(inPos'+'\x20-\x20vec3f(0'+'.5))\x20*\x20uni'+'form.inBou'+'ndsSize\x20+\x20'+'uniform.in'+'BoundsCent'+'er;\x0a\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inVel\x20=\x20('+('inVel\x20-\x20ve'+'c3f(0.5))\x20'+'*\x20uniform.'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20let\x20l'+'ife_decode'+'d\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20let\x20maxNe'+'gLife\x20=\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20(uniform.'+'rate\x20+\x20uni'+'form.rateD'+'iv));\x0a\x20\x20\x20\x20'+'let\x20maxPos'+'Life\x20=\x20uni'+'form.lifet'+'ime\x20+\x201.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20life_d'+'ecoded\x20*\x20('+'maxNegLife'+'\x20+\x20maxPosL'+'ife)\x20-\x20max'+'NegLife;\x0a}'),g3='\x0afn\x20getOut'+'put()\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20if\x20(pcPos'+'ition.y\x20<\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4f(ou'+'tPos,\x20(out'+'Angle\x20+\x2010'+'00.0)\x20*\x20vi'+'sMode);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(outVel,\x20'+'outLife);\x0a'+'\x20\x20\x20\x20}\x0a}\x0a',S3='\x0auniform\x20o'+'utBoundsMu'+'l:\x20vec3f;\x0a'+'uniform\x20ou'+'tBoundsAdd'+':\x20vec3f;\x0a\x0a'+'fn\x20encodeF'+'loatRG(\x20v:'+'\x20f32\x20)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20var\x20enc:'+'\x20vec2f\x20=\x20v'+'ec2f(1.0,\x20'+'255.0)\x20*\x20v'+';\x0a\x20\x20\x20\x20enc\x20'+'=\x20fract(en'+'c);\x0a\x20\x20\x20\x20en'+'c\x20=\x20enc\x20-\x20'+'enc.yy\x20*\x20('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20enc;\x0a'+'}\x0a\x0afn\x20enco'+'deFloatRGB'+'A(\x20v:\x20f32\x20'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20factors\x20='+'\x20vec4f(1.0'+',\x20255.0,\x206'+'5025.0,\x2016'+'0581375.0)'+';\x0a\x20\x20\x20\x20var\x20'+'enc:\x20vec4f'+'\x20=\x20factors'+'\x20*\x20v;\x0a\x20\x20\x20\x20'+'enc\x20=\x20frac'+'t(enc);\x0a\x20\x20'+'\x20\x20enc\x20=\x20en'+'c\x20-\x20enc.yz'+'ww\x20*\x20vec4f'+'(1.0\x20/\x20255'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x20255.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'return\x20enc'+';\x0a}\x0a\x0afn\x20ge'+'tOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20outPo'+'s\x20=\x20outPos'+'\x20*\x20uniform'+'.outBounds'+'Mul\x20+\x20unif'+'orm.outBou'+'ndsAdd;\x0a\x20\x20'+'\x20\x20outAngle'+'\x20=\x20fract(o'+'utAngle\x20/\x20'+'PI2);\x0a\x0a\x20\x20\x20'+'\x20outVel\x20=\x20'+'(outVel\x20/\x20'+'uniform.ma'+'xVel)\x20+\x20ve'+'c3f(0.5);\x20'+'//\x20TODO:\x20m'+'ul\x0a\x0a\x20\x20\x20\x20le'+'t\x20maxNegLi'+'fe\x20=\x20max(u'+'niform.lif'+'etime,\x20(un'+'iform.numP'+'articles\x20-'+'\x201.0)\x20*\x20(u'+'niform.rat'+'e\x20+\x20unifor'+'m.rateDiv)'+');\x0a\x20\x20\x20\x20let'+'\x20maxPosLif'+'e\x20=\x20unifor'+'m.lifetime'+'\x20+\x201.0;\x0a\x20\x20'+'\x20\x20outLife\x20'+'=\x20(outLife'+'\x20+\x20maxNegL'+'ife)\x20/\x20(ma'+'xNegLife\x20+'+'\x20maxPosLif'+'e);\x0a\x0a\x20\x20\x20\x20i'+'f\x20(pcPosit'+'ion.y\x20<\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'vec4f(enco'+'deFloatRG('+'outPos.x),'+'\x20encodeFlo'+'atRG(outPo'+'s.y));\x0a\x20\x20\x20'+('\x20}\x20else\x20if'+'\x20(pcPositi'+'on.y\x20<\x202.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(encod'+'eFloatRG(o'+'utPos.z),\x20'+'encodeFloa'+'tRG(outAng'+'le));\x0a\x20\x20\x20\x20'+'}\x20else\x20if\x20'+'(pcPositio'+'n.y\x20<\x203.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(outVel'+',\x20visMode\x20'+'*\x200.5\x20+\x200.'+'5);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20encodeFl'+'oatRGBA(ou'+'tLife);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),y3='\x0auniform\x20s'+'pawnBounds'+':\x20mat3x3f;'+'\x0auniform\x20s'+'pawnPosInn'+'erRatio:\x20v'+'ec3f;\x0a\x0afn\x20'+'calcSpawnP'+'osition(in'+'Bounds:\x20ve'+'c3f,\x20rndFa'+'ctor:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'pos\x20=\x20inBo'+'unds\x20-\x20vec'+'3f(0.5);\x0a\x0a'+'\x20\x20\x20\x20let\x20po'+'sAbs\x20=\x20abs'+'(pos);\x0a\x20\x20\x20'+'\x20let\x20maxCo'+'mp\x20=\x20max(p'+'osAbs.x,\x20m'+'ax(posAbs.'+'y,\x20posAbs.'+'z));\x0a\x20\x20\x20\x20l'+'et\x20maxPos\x20'+'=\x20vec3f(ma'+'xComp);\x0a\x0a\x20'+'\x20\x20\x20let\x20edg'+'e\x20=\x20maxPos'+'\x20+\x20(vec3f('+'0.5)\x20-\x20max'+'Pos)\x20*\x20uni'+'form.spawn'+'PosInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'pos.x\x20=\x20ed'+'ge.x\x20*\x20sel'+'ect(2.0\x20*\x20'+'pos.x,\x20sig'+'n(pos.x),\x20'+'maxPos.x\x20='+'=\x20posAbs.x'+');\x0a\x20\x20\x20\x20pos'+'.y\x20=\x20edge.'+'y\x20*\x20select'+'(2.0\x20*\x20pos'+'.y,\x20sign(p'+'os.y),\x20max'+'Pos.y\x20==\x20p'+'osAbs.y);\x0a'+'\x20\x20\x20\x20pos.z\x20'+'=\x20edge.z\x20*'+'\x20select(2.'+'0\x20*\x20pos.z,'+'\x20sign(pos.'+'z),\x20maxPos'+'.z\x20==\x20posA'+'bs.z);\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20uni'+'form.emitt'+'erPos\x20+\x20un'+'iform.spaw'+'nBounds\x20*\x20'+'pos;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uniform.sp'+'awnBounds\x20'+'*\x20pos;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20*localV'+'elocity\x20=\x20'+'*localVelo'+'city\x20-\x20vec'+'3f(0.0,\x200.'+'0,\x20uniform'+'.initialVe'+'locity);\x0a}'+'\x0a',v3='\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'getOutput('+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',x3='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20par'+'ticleTexIN'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20particl'+'eTexINSamp'+'ler:\x20sampl'+'er;\x0avar\x20in'+'ternalTex0'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0avar\x20int'+'ernalTex1:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20internal'+'Tex1Sample'+'r:\x20sampler'+';\x0avar\x20inte'+'rnalTex2:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20internalT'+'ex2Sampler'+':\x20sampler;'+'\x0avar\x20inter'+'nalTex3:\x20t'+'exture_2d<'+'f32>;\x0avar\x20'+'internalTe'+'x3Sampler:'+'\x20sampler;\x0a'+'\x0auniform\x20e'+'mitterMatr'+'ix:\x20mat3x3'+'f;\x0auniform'+'\x20emitterMa'+'trixInv:\x20m'+'at3x3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0a\x0aun'+'iform\x20emit'+'terPos:\x20ve'+'c3f;\x0aunifo'+'rm\x20frameRa'+'ndom:\x20vec3'+'f;\x0auniform'+'\x20localVelo'+'cityDivMul'+'t:\x20vec3f;\x0a'+'uniform\x20ve'+'locityDivM'+'ult:\x20vec3f'+';\x0auniform\x20'+'delta:\x20f32'+';\x0auniform\x20'+'rate:\x20f32;'+'\x0auniform\x20r'+'ateDiv:\x20f3'+'2;\x0auniform'+'\x20lifetime:'+'\x20f32;\x0aunif'+'orm\x20numPar'+'ticles:\x20f3'+'2;\x0auniform'+'\x20rotSpeedD'+'ivMult:\x20f3'+'2;\x0auniform'+'\x20radialSpe'+'edDivMult:'+'\x20f32;\x0aunif'+'orm\x20seed:\x20'+'f32;\x0aunifo'+'rm\x20startAn'+'gle:\x20f32;\x0a'+'uniform\x20st'+'artAngle2:'+'\x20f32;\x0aunif'+'orm\x20initia'+'lVelocity:'+'\x20f32;\x0a\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0a\x0ava'+'r<private>'+'\x20inPos:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20in'+'Vel:\x20vec3f'+';\x0avar<priv'+'ate>\x20inAng'+('le:\x20f32;\x0av'+'ar<private'+'>\x20inShow:\x20'+'bool;\x0avar<'+'private>\x20i'+'nLife:\x20f32'+';\x0avar<priv'+'ate>\x20visMo'+'de:\x20f32;\x0a\x0a'+'var<privat'+'e>\x20outPos:'+'\x20vec3f;\x0ava'+'r<private>'+'\x20outVel:\x20v'+'ec3f;\x0avar<'+'private>\x20o'+'utAngle:\x20f'+'32;\x0avar<pr'+'ivate>\x20out'+'Show:\x20bool'+';\x0avar<priv'+'ate>\x20outLi'+'fe:\x20f32;\x0a'),T3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tLife\x20=\x20ou'+'tLife\x20-\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20particleR'+'ate);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20visMod'+'e\x20=\x20-1.0;\x0a'+'\x20\x20\x20\x20}\x0a',w3='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20selec'+'t(visMode,'+'\x20-1.0,\x20out'+'Life\x20<\x200.0'+');\x0a',E3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20subtract'+'Amount\x20=\x20m'+'ax(uniform'+'.lifetime,'+'\x20(uniform.'+'numParticl'+'es\x20-\x201.0)\x20'+'*\x20particle'+'Rate);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outLi'+'fe\x20=\x20outLi'+'fe\x20-\x20subtr'+'actAmount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'isMode\x20=\x201'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20visMod'+'e\x20=\x20select'+'(visMode,\x20'+'1.0,\x20outLi'+'fe\x20<\x200.0);'+'\x0a',b3='\x0auniform\x20s'+'pawnBounds'+'Sphere:\x20f3'+'2;\x0auniform'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio:\x20'+'f32;\x0a\x0afn\x20c'+'alcSpawnPo'+'sition(inB'+'ounds:\x20vec'+'3f,\x20rndFac'+'tor:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'nd4:\x20f32\x20='+'\x20fract(rnd'+'Factor\x20*\x201'+'000.0);\x0a\x20\x20'+'\x20\x20let\x20norm'+':\x20vec3f\x20=\x20'+'normalize('+'inBounds.x'+'yz\x20-\x20vec3f'+'(0.5));\x0a\x20\x20'+'\x20\x20let\x20r:\x20f'+'32\x20=\x20rnd4\x20'+'*\x20(1.0\x20-\x20u'+'niform.spa'+'wnBoundsSp'+'hereInnerR'+'atio)\x20+\x20un'+'iform.spaw'+'nBoundsSph'+'ereInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20unifo'+'rm.emitter'+'Pos\x20+\x20norm'+'\x20*\x20r\x20*\x20uni'+'form.spawn'+'BoundsSphe'+'re;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20n'+'orm\x20*\x20r\x20*\x20'+'uniform.sp'+'awnBoundsS'+'phere;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20ini'+'tialVelOff'+'set:\x20vec3f'+'\x20=\x20normali'+'ze(inBound'+'s\x20-\x20vec3f('+'0.5))\x20*\x20un'+'iform.init'+'ialVelocit'+'y;\x0a\x20\x20\x20\x20*lo'+'calVelocit'+'y\x20=\x20*local'+'Velocity\x20+'+'\x20initialVe'+'lOffset;\x0a}'+'\x0a',A3='\x0afn\x20satura'+'te(x:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(x,\x20'+'0.0,\x201.0);'+'\x0a}\x0a\x0afn\x20unp'+'ack3NFloat'+'s(src:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20r\x20=\x20fract'+'(src);\x0a\x20\x20\x20'+'\x20let\x20g\x20=\x20f'+'ract(src\x20*'+'\x20256.0);\x0a\x20'+'\x20\x20\x20let\x20b\x20='+'\x20fract(src'+'\x20*\x2065536.0'+');\x0a\x20\x20\x20\x20ret'+'urn\x20vec3f('+'r,\x20g,\x20b);\x0a'+'}\x0a\x0a//\x20Stru'+'ct\x20to\x20hand'+'le\x20multipl'+'e\x20return\x20v'+'alues\x20from'+'\x20tex1Dlod_'+'lerp\x0astruc'+'t\x20TexLerpU'+'npackResul'+'t\x20{\x0a\x20\x20\x20\x20re'+'sult:\x20vec3'+'f,\x0a\x20\x20\x20\x20unp'+'acked:\x20vec'+'3f\x0a}\x0a\x0afn\x20t'+'ex1Dlod_le'+'rp(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20tc:\x20'+'vec2f)\x20->\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'tc_next\x20=\x20'+'tc\x20+\x20vec2f'+'(uniform.g'+'raphSample'+'Size);\x0a\x20\x20\x20'+'\x20let\x20a\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20tc,\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20tc_next'+',\x200.0);\x0a\x20\x20'+'\x20\x20let\x20c\x20=\x20'+'fract(tc.x'+'\x20*\x20uniform'+'.graphNumS'+'amples);\x0a\x0a'+'\x20\x20\x20\x20let\x20un'+'packedA\x20=\x20'+'unpack3NFl'+'oats(a.w);'+'\x0a\x20\x20\x20\x20let\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20let\x20'+'w_out\x20=\x20mi'+'x(unpacked'+'A,\x20unpacke'+'dB,\x20c);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'TexLerpUnp'+'ackResult('+'mix(a.xyz,'+'\x20b.xyz,\x20c)'+',\x20w_out);\x0a'+'}\x0a\x0aconst\x20H'+'ASHSCALE4:'+'\x20vec4f\x20=\x20v'+'ec4f(1031.'+'0,\x200.1030,'+'\x200.0973,\x200'+'.1099);\x0afn'+'\x20hash41(p:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20var\x20p4\x20=\x20'+'fract(vec4'+'f(p)\x20*\x20HAS'+('HSCALE4);\x0a'+'\x20\x20\x20\x20p4\x20=\x20p'+'4\x20+\x20dot(p4'+',\x20p4.wzxy\x20'+'+\x2019.19);\x0a'+'\x20\x20\x20\x20return'+'\x20fract(vec'+'4f((p4.x\x20+'+'\x20p4.y)*p4.'+'z,\x20(p4.x\x20+'+'\x20p4.z)*p4.'+'y,\x20(p4.y\x20+'+'\x20p4.z)*p4.'+'w,\x20(p4.z\x20+'+'\x20p4.w)*p4.'+'x));\x0a}\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20if\x20(pc'+'Position.x'+'\x20>\x20uniform'+'.numPartic'+'les)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20re'+'adInput(in'+'put.vUv0.x'+');\x0a\x20\x20\x20\x20vis'+'Mode\x20=\x20sel'+'ect(-1.0,\x20'+'1.0,\x20inSho'+'w);\x0a\x0a\x20\x20\x20\x20l'+'et\x20rndFact'+'or\x20=\x20hash4'+'1(pcPositi'+'on.x\x20+\x20uni'+'form.seed)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20particleR'+'ate\x20=\x20unif'+'orm.rate\x20+'+'\x20uniform.r'+'ateDiv\x20*\x20r'+'ndFactor.x'+';\x0a\x0a\x20\x20\x20\x20out'+'Life\x20=\x20inL'+'ife\x20+\x20unif'+'orm.delta;'+'\x0a\x20\x20\x20\x20let\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20uniform'+'.lifetime,'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t0\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'0,\x20interna'+'lTex0Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20va'+'r\x20localVel'+'ocity\x20=\x20le'+'rpResult0.'+'result;\x0a\x20\x20'+'\x20\x20let\x20loca'+'lVelocityD'+'iv\x20=\x20lerpR'+'esult0.unp'+'acked;\x0a\x0a\x20\x20'+'\x20\x20let\x20lerp'+'Result1\x20=\x20'+'tex1Dlod_l'+'erp(intern'+'alTex1,\x20in'+'ternalTex1'+'Sampler,\x20v'+'ec2f(nlife'+',\x200.0));\x0a\x20'+'\x20\x20\x20var\x20vel'+'ocity\x20=\x20le'+'rpResult1.'+'result;\x0a\x20\x20'+'\x20\x20let\x20velo'+'cityDiv\x20=\x20'+'lerpResult')+('1.unpacked'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t2\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'2,\x20interna'+'lTex2Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20le'+'t\x20params\x20='+'\x20lerpResul'+'t2.result;'+'\x0a\x20\x20\x20\x20let\x20p'+'aramDiv\x20=\x20'+'lerpResult'+'2.unpacked'+';\x0a\x20\x20\x20\x20var\x20'+'rotSpeed\x20='+'\x20params.x;'+'\x0a\x20\x20\x20\x20let\x20r'+'otSpeedDiv'+'\x20=\x20paramDi'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'let\x20lerpRe'+'sult3\x20=\x20te'+'x1Dlod_ler'+'p(internal'+'Tex3,\x20inte'+'rnalTex3Sa'+'mpler,\x20vec'+'2f(nlife,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20let\x20radia'+'lParams\x20=\x20'+'lerpResult'+'3.result;\x0a'+'\x20\x20\x20\x20let\x20ra'+'dialParamD'+'iv\x20=\x20lerpR'+'esult3.unp'+'acked;\x0a\x20\x20\x20'+'\x20let\x20radia'+'lSpeed\x20=\x20r'+'adialParam'+'s.x;\x0a\x20\x20\x20\x20l'+'et\x20radialS'+'peedDiv\x20=\x20'+'radialPara'+'mDiv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20res'+'pawn\x20=\x20inL'+'ife\x20<=\x200.0'+'\x20||\x20outLif'+'e\x20>=\x20unifo'+'rm.lifetim'+'e;\x0a\x20\x20\x20\x20inP'+'os\x20=\x20selec'+'t(inPos,\x20c'+'alcSpawnPo'+'sition(rnd'+'Factor.xyz'+',\x20rndFacto'+'r.x),\x20resp'+'awn);\x0a\x20\x20\x20\x20'+'inAngle\x20=\x20'+'select(inA'+'ngle,\x20mix('+'uniform.st'+'artAngle,\x20'+'uniform.st'+'artAngle2,'+'\x20rndFactor'+'.x),\x20respa'+'wn);\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20radialVe'+'l:\x20vec3f\x20='+'\x20inPos\x20-\x20u'+'niform.emi'+'tterPos;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20radialVel'+':\x20vec3f\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20=\x20select'+'(vec3f(0.0'+'),\x20radialS'+'peed\x20*\x20nor'+'malize(rad'+'ialVel),\x20d'+'ot(radialV'+'el,\x20radial'+'Vel)\x20>\x201.0')+('E-8);\x0a\x20\x20\x20\x20'+'radialVel\x20'+'=\x20radialVe'+'l\x20+\x20(radia'+'lSpeedDiv\x20'+'*\x20vec3f(2.'+'0)\x20-\x20vec3f'+'(1.0))\x20*\x20u'+'niform.rad'+'ialSpeedDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20=\x20localV'+'elocity\x20+\x20'+'(localVelo'+'cityDiv\x20*\x20'+'vec3f(2.0)'+'\x20-\x20vec3f(1'+'.0))\x20*\x20uni'+'form.local'+'VelocityDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x20\x20\x20\x20vel'+'ocity\x20=\x20ve'+'locity\x20+\x20('+'velocityDi'+'v\x20*\x20vec3f('+'2.0)\x20-\x20vec'+'3f(1.0))\x20*'+'\x20uniform.v'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20rotS'+'peed\x20=\x20rot'+'Speed\x20+\x20(r'+'otSpeedDiv'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20unif'+'orm.rotSpe'+'edDivMult\x20'+'*\x20rndFacto'+'r.y;\x0a\x0a\x20\x20\x20\x20'+'addInitial'+'Velocity(&'+'localVeloc'+'ity,\x20rndFa'+'ctor.xyz);'+'\x0a\x0a\x20\x20\x20\x20#ifn'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20outVel'+'\x20=\x20uniform'+'.emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tVel\x20=\x20(lo'+'calVelocit'+'y\x20+\x20radial'+'Vel)\x20/\x20uni'+'form.emitt'+'erScale\x20+\x20'+'uniform.em'+'itterMatri'+'xInv\x20*\x20vel'+'ocity;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20outPos\x20'+'=\x20inPos\x20+\x20'+'outVel\x20*\x20u'+'niform.del'+'ta;\x0a\x20\x20\x20\x20ou'+'tAngle\x20=\x20i'+'nAngle\x20+\x20r'+'otSpeed\x20*\x20'+'uniform.de'+'lta;\x0a'),C3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20rotated'+'QuadXY);\x0a',P3='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20sa'+'turate(gam'+'maCorrectI'+'nput(max(a'+',\x200.0)));\x0a'+'\x20\x20\x20\x20if\x20((r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+')\x20<\x200.0000'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20}\x20\x20'+'\x20\x20\x0a',M3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3f'+'(1.0),\x20rgb'+',\x20a);\x0a\x20\x20\x20\x20'+'if\x20((rgb.r'+'\x20+\x20rgb.g\x20+'+'\x20rgb.b)\x20>\x20'+'2.99)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a',D3='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20}\x0a',I3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20\x20'+'\x20//\x20XYZ\x20=\x20'+'world\x20pos,'+'\x20W\x20=\x20life\x0a'+'attribute\x20'+'particle_v'+'ertexData2'+':\x20vec4f;\x20\x20'+'//\x20X\x20=\x20ang'+'le,\x20Y\x20=\x20sc'+'ale,\x20Z\x20=\x20a'+'lpha,\x20W\x20=\x20'+'velocity.x'+'\x0aattribute'+'\x20particle_'+'vertexData'+'3:\x20vec4f;\x20'+'\x20//\x20XYZ\x20=\x20'+'particle\x20l'+'ocal\x20pos,\x20'+'W\x20=\x20veloci'+'ty.y\x0aattri'+'bute\x20parti'+'cle_vertex'+'Data4:\x20f32'+';\x20\x20\x20\x20//\x20pa'+'rticle\x20id\x0a'+'\x0a//\x20type\x20d'+'epends\x20on\x20'+'useMesh\x20pr'+'operty.\x20St'+'art\x20with\x20X'+'\x20=\x20velocit'+'y.z,\x20Y\x20=\x20p'+'article\x20ID'+'\x20and\x20for\x20m'+'esh\x20partic'+'les\x20procee'+'ds\x20with\x20Z\x20'+'=\x20mesh\x20UV.'+'x,\x20W\x20=\x20mes'+'h\x20UV.y\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_ver'+'texData5:\x20'+'vec2f;\x0a#el'+'se\x0a\x20\x20\x20\x20att'+'ribute\x20par'+'ticle_vert'+'exData5:\x20v'+'ec4f;\x0a#end'+'if\x0a\x0aunifor'+'m\x20matrix_v'+'iewProject'+'ion:\x20mat4x'+'4f;\x0aunifor'+'m\x20matrix_m'+'odel:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20ma'+'trix_norma'+'l:\x20mat3x3f'+';\x0auniform\x20'+'matrix_vie'+'wInverse:\x20'+'mat4x4f;\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20lifet'+'ime:\x20f32;\x0a'+'uniform\x20st'+'retch:\x20f32'+';\x0auniform\x20'+'seed:\x20f32;'+'\x0auniform\x20w'+'rapBounds:'+'\x20vec3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0auni'+'form\x20faceT'+'angent:\x20ve'+'c3f;\x0aunifo'+'rm\x20faceBin'+'orm:\x20vec3f'+';\x0a\x0a#ifdef\x20'+('PARTICLE_G'+'PU\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex0:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x0Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex1'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex1S'+'ampler:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20var\x20inter'+'nalTex2:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex2Samp'+'ler:\x20sampl'+'er;\x0a#endif'+'\x0auniform\x20e'+'mitterPos:'+'\x20vec3f;\x0a\x0av'+'arying\x20tex'+'CoordsAlph'+'aLife:\x20vec'+'4f;\x0a\x0astruc'+'t\x20RotateRe'+'sult\x20{\x0a\x20\x20\x20'+'\x20rotatedVe'+'c:\x20vec2f,\x0a'+'\x20\x20\x20\x20matrix'+':\x20mat2x2f\x0a'+'}\x0a\x0afn\x20rota'+'teWithMatr'+'ix(quadXY:'+'\x20vec2f,\x20pR'+'otation:\x20f'+'32)\x20->\x20Rot'+'ateResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'c\x20=\x20cos(pR'+'otation);\x0a'+'\x20\x20\x20\x20let\x20s\x20'+'=\x20sin(pRot'+'ation);\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'mat2x2f(ve'+'c2f(c,\x20s),'+'\x20vec2f(-s,'+'\x20c));\x0a\x20\x20\x20\x20'+'return\x20Rot'+'ateResult('+'m\x20*\x20quadXY'+',\x20m);\x0a}\x0a\x0a\x0a'+'fn\x20billboa'+'rd(Instanc'+'eCoords:\x20v'+'ec3f,\x20quad'+'XY:\x20vec2f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20customF'+'ace(Instan'+'ceCoords:\x20'+'vec3f,\x20qua'+'dXY:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20pos\x20=\x20uni'+'form.faceT'+'angent\x20*\x20q'+'uadXY.x\x20+\x20'+'uniform.fa'+'ceBinorm\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20safeNor'+'malize(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20l\x20=\x20')+('length(v);'+'\x0a\x20\x20\x20\x20retur'+'n\x20select(v'+',\x20v\x20/\x20l,\x20l'+'\x20>\x201e-06);'+'\x0a}\x0a\x0a@verte'+'x\x0afn\x20verte'+'xMain(inpu'+'t:\x20VertexI'+'nput)\x20->\x20V'+'ertexOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'VertexOutp'+'ut;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20particl'+'ePos\x20=\x20inp'+'ut.particl'+'e_vertexDa'+'ta.xyz;\x0a\x20\x20'+'\x20\x20let\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20let\x20vertP'+'os\x20=\x20input'+'.particle_'+'vertexData'+'3.xyz;\x0a\x20\x20\x20'+'\x20var\x20inVel'+'\x20=\x20vec3f(i'+'nput.parti'+'cle_vertex'+'Data2.w,\x20i'+'nput.parti'+'cle_vertex'+'Data3.w,\x20i'+'nput.parti'+'cle_vertex'+'Data5.x);\x0a'+'\x0a\x20\x20\x20\x20let\x20i'+'d\x20=\x20floor('+'input.part'+'icle_verte'+'xData4);\x0a\x20'+'\x20\x20\x20let\x20rnd'+'Factor\x20=\x20f'+'ract(sin(i'+'d\x20+\x201.0\x20+\x20'+'uniform.se'+'ed));\x0a\x20\x20\x20\x20'+'let\x20rndFac'+'tor3\x20=\x20vec'+'3f(rndFact'+'or,\x20fract('+'rndFactor*'+'10.0),\x20fra'+'ct(rndFact'+'or*100.0))'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20mo'+'delRotatio'+'n\x20=\x20mat3x3'+'f(uniform.'+'matrix_mod'+'el[0].xyz,'+'\x20uniform.m'+'atrix_mode'+'l[1].xyz,\x20'+'uniform.ma'+'trix_model'+'[2].xyz);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'Vel\x20=\x20mode'+'lRotation\x20'+'*\x20inVel;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20let\x20ve'+'locityV\x20=\x20'+'safeNormal'+'ize((mat3x'+'3f(uniform'+'.matrix_vi'+'ew[0].xyz,'+'\x20uniform.m'+'atrix_view'+'[1].xyz,\x20u'+'niform.mat'+'rix_view[2'+'].xyz)\x20*\x20i'+'nVel).xy);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'quadXY\x20=\x20v'+'ertPos.xy;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20USE_MES'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.tex'+'CoordsAlph')+('aLife\x20=\x20ve'+'c4f(input.'+'particle_v'+'ertexData5'+'.zw,\x20input'+'.particle_'+'vertexData'+'2.z,\x20input'+'.particle_'+'vertexData'+'.w);\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'texCoordsA'+'lphaLife\x20='+'\x20vec4f(qua'+'dXY\x20*\x20-0.5'+'\x20+\x200.5,\x20in'+'put.partic'+'le_vertexD'+'ata2.z,\x20in'+'put.partic'+'le_vertexD'+'ata.w);\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20var\x20rot'+'Matrix:\x20ma'+'t2x2f;\x0a\x0a\x20\x20'+'\x20\x20var\x20inAn'+'gle\x20=\x20inpu'+'t.particle'+'_vertexDat'+'a2.x;\x0a\x20\x20\x20\x20'+'var\x20partic'+'lePosMoved'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20meshLoc'+'alPos\x20=\x20in'+'put.partic'+'le_vertexD'+'ata3.xyz;\x0a'),L3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20inp'+'ut.particl'+'e_vertexDa'+'ta2.y\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20localP'+'os\x20=\x20local'+'Pos\x20+\x20part'+'iclePos;\x0a\x0a'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20vec4f('+'localPos,\x20'+'1.0);\x0a',R3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20rotate'+'dQuadXY);\x0a',O3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(rg'+'b,\x20a);\x0a\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a}\x0a',F3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20sca'+'le\x20*\x20unifo'+'rm.emitter'+'Scale;\x0a\x20\x20\x20'+'\x20localPos\x20'+'=\x20localPos'+'\x20+\x20particl'+'ePos;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20SC'+'REEN_SPACE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(localPo'+'s.x,\x20local'+'Pos.y,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_v'+'iewProject'+'ion\x20*\x20vec4'+'f(localPos'+'.xyz,\x201.0)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a',N3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20no'+'rmal\x20*\x200.5'+'\x20+\x200.5;\x0a\x20\x20'+'\x20\x20var\x20posN'+'ormal:\x20vec'+'3f\x20=\x20-norm'+'al\x20*\x200.5\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'negNormal\x20'+'=\x20negNorma'+'l\x20*\x20negNor'+'mal;\x0a\x20\x20\x20\x20p'+'osNormal\x20='+'\x20posNormal'+'\x20*\x20posNorm'+'al;\x0a',k3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20/'+'/\x20XYZ\x20=\x20pa'+'rticle\x20pos'+'ition,\x20W\x20='+'\x20particle\x20'+'ID\x20+\x20rando'+'m\x20factor\x0a#'+'if\x20defined'+'(USE_MESH)'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(USE'+'_MESH_UV)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_uv:'+'\x20vec2f;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'esh\x20UV\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20pa'+'rticle_uv:'+'\x20vec2f\x20=\x20v'+'ec2f(0.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0aunifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0aunif'+'orm\x20matrix'+'_normal:\x20m'+'at3x3f;\x0aun'+'iform\x20matr'+'ix_viewInv'+'erse:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20numPa'+'rticlesPot'+':\x20f32;\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0auni'+'form\x20stret'+'ch:\x20f32;\x0au'+'niform\x20wra'+'pBounds:\x20v'+'ec3f;\x0aunif'+'orm\x20emitte'+'rScale:\x20ve'+'c3f;\x0aunifo'+'rm\x20emitter'+'Pos:\x20vec3f'+';\x0auniform\x20'+'faceTangen'+'t:\x20vec3f;\x0a'+'uniform\x20fa'+'ceBinorm:\x20'+'vec3f;\x0auni'+'form\x20rate:'+'\x20f32;\x0aunif'+'orm\x20rateDi'+'v:\x20f32;\x0aun'+'iform\x20life'+'time:\x20f32;'+'\x0auniform\x20d'+'eltaRandom'+'nessStatic'+':\x20f32;\x0auni'+'form\x20scale'+'DivMult:\x20f'+'32;\x0aunifor'+'m\x20alphaDiv'+'Mult:\x20f32;'+'\x0auniform\x20s'+'eed:\x20f32;\x0a'+'uniform\x20de'+'lta:\x20f32;\x0a'+'\x0avar\x20parti'+('cleTexOUT:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20particle'+'TexOUTSamp'+'ler:\x20sampl'+'er;\x0avar\x20pa'+'rticleTexI'+'N:\x20texture'+'_2d<f32>;\x0a'+'var\x20partic'+'leTexINSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex0:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex1:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x1Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex2'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex2S'+'ampler:\x20sa'+'mpler;\x0a#en'+'dif\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0avarying'+'\x20texCoords'+'AlphaLife:'+'\x20vec4f;\x0a\x0av'+'ar<private'+'>\x20inPos:\x20v'+'ec3f;\x0avar<'+'private>\x20i'+'nVel:\x20vec3'+'f;\x0avar<pri'+'vate>\x20inAn'+'gle:\x20f32;\x0a'+'var<privat'+'e>\x20inShow:'+'\x20bool;\x0avar'+'<private>\x20'+'inLife:\x20f3'+'2;\x0a'),U3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20ma'+'x(normal,\x20'+'vec3(0.0))'+';\x0a\x20\x20\x20\x20var\x20'+'posNormal:'+'\x20vec3f\x20=\x20m'+'ax(-normal'+',\x20vec3(0.0'+'));\x0a',B3='\x0a\x20\x20\x20\x20let\x20l'+'ight:\x20vec3'+'f\x20=\x20negNor'+'mal.x\x20*\x20un'+'iform.ligh'+'tCube[0]\x20+'+'\x20posNormal'+'.x\x20*\x20unifo'+'rm.lightCu'+'be[1]\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20negNormal'+'.y\x20*\x20unifo'+'rm.lightCu'+'be[2]\x20+\x20po'+'sNormal.y\x20'+'*\x20uniform.'+'lightCube['+'3]\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ne'+'gNormal.z\x20'+'*\x20uniform.'+'lightCube['+'4]\x20+\x20posNo'+'rmal.z\x20*\x20u'+'niform.lig'+'htCube[5];'+'\x0a\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20li'+'ght;\x0a',z3='\x0aparticleP'+'os\x20=\x20(unif'+'orm.matrix'+'_model\x20*\x20v'+'ec4f(parti'+'clePos,\x201.'+'0)).xyz;\x0a',V3='\x0avar\x20local'+'Pos\x20=\x20mesh'+'LocalPos;\x0a'+'let\x20rotRes'+'ultXY\x20=\x20ro'+'tateWithMa'+'trix(local'+'Pos.xy,\x20in'+'Angle);\x0alo'+'calPos\x20=\x20v'+'ec3f(rotRe'+'sultXY.rot'+'atedVec,\x20l'+'ocalPos.z)'+';\x0arotMatri'+'x\x20=\x20rotRes'+'ultXY.matr'+'ix;\x0a\x0alet\x20r'+'otResultYZ'+'\x20=\x20rotateW'+'ithMatrix('+'localPos.y'+'z,\x20inAngle'+');\x0alocalPo'+'s\x20=\x20vec3f('+'localPos.x'+',\x20rotResul'+'tYZ.rotate'+'dVec);\x0arot'+'Matrix\x20=\x20r'+'otResultYZ'+'.matrix;\x0a\x0a'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',G3='\x0aoutput.No'+'rmal\x20=\x20nor'+'malize(loc'+'alPos\x20+\x20un'+'iform.matr'+'ix_viewInv'+'erse[2].xy'+'z);\x0a',H3='\x0a\x20\x20\x20\x20let\x20s'+'ampledNorm'+'al:\x20vec4f\x20'+'=\x20textureS'+'ample(norm'+'alMap,\x20nor'+'malMapSamp'+'ler,\x20vec2f'+'(input.tex'+'CoordsAlph'+'aLife.x,\x201'+'.0\x20-\x20input'+'.texCoords'+'AlphaLife.'+'y));\x0a\x20\x20\x20\x20l'+'et\x20normalM'+'ap:\x20vec3f\x20'+'=\x20normaliz'+'e(sampledN'+'ormal.xyz\x20'+'*\x202.0\x20-\x201.'+'0);\x0a\x0a\x20\x20\x20\x20l'+'et\x20Particl'+'eMat\x20=\x20mat'+'3x3<f32>(P'+'articleMat'+'0,\x20Particl'+'eMat1,\x20Par'+'ticleMat2)'+';\x0a\x20\x20\x20\x20let\x20'+'normal:\x20ve'+'c3f\x20=\x20Part'+'icleMat\x20*\x20'+'normalMap;'+'\x0a',W3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan2(veloc'+'ityV.x,\x20ve'+'locityV.y)'+';\x0a',$3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',X3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20Normal:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20varying\x20'+'ParticleMa'+'t0:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Particle'+'Mat2:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'Cube:\x20arra'+'y<vec3f,\x206'+'>;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vDe'+'pth:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sc'+'reenDepthP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22fogPS\x22\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'ap:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'apSampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'iclePS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'VERTEX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'ormal:\x20vec'+'3f\x20=\x20Norma'+'l;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20MAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_normal'+'MapPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20!=\x20NON'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20HAL'+'F_LAMBERT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_halflambe'+'rtPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_lambertPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+('#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_light'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20BLE'+'ND\x20==\x20NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendNorma'+'lPS\x22\x0a\x20\x20\x20\x20#'+'elif\x20BLEND'+'\x20==\x20ADDITI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendAddPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+'\x20MULTIPLIC'+'ATIVE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_blendMu'+'ltiplyPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_endPS'+'\x22\x0a'),q3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20anim'+'TexTilesPa'+'rams:\x20vec2'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20a'+'nimTexPara'+'ms:\x20vec4f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20ani'+'mTexIndexP'+'arams:\x20vec'+'2f;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20Partic'+'leMat0:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20Pa'+'rticleMat2'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20==\x20V'+'ERTEX\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Normal:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vDepth:\x20f'+'32;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_in'+'itVS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20PACK8\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleIn'+'putRgba8PS'+'\x22\x20\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x20\x22parti'+'cleInputFl'+'oatPS\x22\x20\x20\x20\x20'+'//\x20why\x20are'+'\x20these\x20PS\x20'+'and\x20not\x20VS'+'?\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'screenDept'+'hPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'articleVS\x22'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x20//\x20PARTI'+'CLE_CPU\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SOFT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22screenDep'+'thPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_c'+'puVS\x22\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_l'+('ocalShiftV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20ANIM'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20A'+'NIMTEX_LOO'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimFram'+'eLoopVS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleAnimFra'+'meClampVS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimTexV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20wrap\x20is\x20'+'not\x20used\x20o'+'n\x20CPU,\x20it\x20'+'was\x20commen'+'ted\x20out.\x20T'+'ODO:\x20inves'+'tigate\x20why'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'WRAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_wrap'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ALIGN_TO'+'_MOTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_point'+'AlongVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20USE_MESH'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_me'+'shVS\x22\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CUSTOM_FA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_custom'+'FaceVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_billboa'+'rdVS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20VERTEX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_norma'+'lVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20NORMA'+'L\x20==\x20MAP\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_TBNV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STRE'+'TCH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_stretchVS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PART'+'ICLE_GPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_endV')+('S\x22\x0a\x20\x20\x20\x20#el'+'se\x20//\x20PART'+'ICLE_CPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_cpu_'+'endVS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softVS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),j3='\x0a\x20\x20\x20\x20var\x20d'+'epth:\x20f32\x20'+'=\x20getLinea'+'rScreenDep'+'thFrag();\x0a'+'\x20\x20\x20\x20var\x20pa'+'rticleDept'+'h:\x20f32\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20var\x20depth'+'Diff:\x20f32\x20'+'=\x20saturate'+'(abs(parti'+'cleDepth\x20-'+'\x20depth)\x20*\x20'+'uniform.so'+'ftening);\x0a'+'\x20\x20\x20\x20a\x20=\x20a\x20'+'*\x20depthDif'+'f;\x0a',Y3='\x0a\x20\x20\x20\x20outpu'+'t.vDepth\x20='+'\x20getLinear'+'Depth(loca'+'lPos);\x0a',K3='\x0a\x20\x20\x20\x20let\x20m'+'oveDir:\x20ve'+'c3f\x20=\x20inVe'+'l\x20*\x20unifor'+'m.stretch;'+'\x0a\x20\x20\x20\x20var\x20p'+'osPrev:\x20ve'+'c3f\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20=\x20posPrev'+'\x20+\x20particl'+'ePosMoved;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'viewRotati'+'onTemp:\x20ma'+'t3x3f\x20=\x20ma'+'t3x3f(unif'+'orm.matrix'+'_view[0].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[1].xyz'+',\x20uniform.'+'matrix_vie'+'w[2].xyz);'+'\x0a\x20\x20\x20\x20let\x20c'+'enterToVer'+'texV:\x20vec2'+'f\x20=\x20normal'+'ize((viewR'+'otationTem'+'p\x20*\x20localP'+'os).xy);\x0a\x0a'+'\x20\x20\x20\x20let\x20in'+'terpolatio'+'n:\x20f32\x20=\x20d'+'ot(-veloci'+'tyV,\x20cente'+'rToVertexV'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x0a\x20\x20\x20\x20'+'particlePo'+'s\x20=\x20mix(pa'+'rticlePos,'+'\x20posPrev,\x20'+'interpolat'+'ion);\x0a',Z3='\x0a\x20\x20\x20\x20let\x20r'+'ot3\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(r'+'otMatrix[0'+'][0],\x20rotM'+'atrix[1][0'+'],\x200.0),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(rotMatr'+'ix[0][1],\x20'+'rotMatrix['+'1][1],\x200.0'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3f(0.0'+',\x200.0,\x201.0'+')\x0a\x20\x20\x20\x20);\x0a\x0a'+'\x20\x20\x20\x20let\x20vi'+'ewBasis\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20-un'+'iform.matr'+'ix_viewInv'+'erse[0].xy'+'z,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20-uniform.'+'matrix_vie'+'wInverse[1'+'].xyz,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.matrix_'+'viewInvers'+'e[2].xyz\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20tempM'+'at\x20=\x20viewB'+'asis\x20*\x20rot'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20WGSL\x20does'+'\x20not\x20suppo'+'rt\x20matrix\x20'+'varyings,\x20'+'decompose\x20'+'it\x20to\x20vec3'+'s\x0a\x20\x20\x20\x20outp'+'ut.Particl'+'eMat0\x20=\x20te'+'mpMat[0];\x0a'+'\x20\x20\x20\x20output'+'.ParticleM'+'at1\x20=\x20temp'+'Mat[1];\x0a\x20\x20'+'\x20\x20output.P'+'articleMat'+'2\x20=\x20tempMa'+'t[2];\x0a',Q3='\x0a\x20\x20\x20\x20let\x20o'+'rigParticl'+'ePos:\x20vec3'+'f\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20particleP'+'os\x20=\x20parti'+'clePos\x20-\x20u'+'niform.mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20=\x20(par'+'ticlePos\x20%'+'\x20uniform.w'+'rapBounds)'+'\x20-\x20uniform'+'.wrapBound'+'s\x20*\x200.5;\x0a\x20'+'\x20\x20\x20particl'+'ePos\x20=\x20par'+'ticlePos\x20+'+'\x20uniform.m'+'atrix_mode'+'l[3].xyz;\x0a'+'\x20\x20\x20\x20partic'+'lePosMoved'+'\x20=\x20particl'+'ePos\x20-\x20ori'+'gParticleP'+'os;\x0a',J3={'particlePS':h3,'particleVS':d3,'particleAnimFrameClampVS':f3,'particleAnimFrameLoopVS':u3,'particleAnimTexVS':p3,'particleInputFloatPS':m3,'particleInputRgba8PS':_3,'particleOutputFloatPS':g3,'particleOutputRgba8PS':S3,'particleUpdaterAABBPS':y3,'particleUpdaterEndPS':v3,'particleUpdaterInitPS':x3,'particleUpdaterNoRespawnPS':T3,'particleUpdaterOnStopPS':w3,'particleUpdaterRespawnPS':E3,'particleUpdaterSpherePS':b3,'particleUpdaterStartPS':A3,'particle_billboardVS':C3,'particle_blendAddPS':P3,'particle_blendMultiplyPS':M3,'particle_blendNormalPS':D3,'particle_cpuVS':I3,'particle_cpu_endVS':L3,'particle_customFaceVS':R3,'particle_endPS':O3,'particle_endVS':F3,'particle_halflambertPS':N3,'particle_initVS':k3,'particle_lambertPS':U3,'particle_lightingPS':B3,'particle_localShiftVS':z3,'particle_meshVS':V3,'particle_normalVS':G3,'particle_normalMapPS':H3,'particle_pointAlongVS':W3,'particle_simulationPS':$3,'particle_shaderPS':X3,'particle_shaderVS':q3,'particle_softPS':j3,'particle_softVS':Y3,'particle_stretchVS':K3,'particle_TBNVS':Z3,'particle_wrapVS':Q3},eO=['enabled','autoPlay','numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','loop','preWarm','lighting','halfLamber'+'t','intensity','depthWrite','noFog','depthSofte'+'ning','sort','blendType','stretch','alignToMot'+'ion','emitterSha'+'pe','emitterExt'+'ents','emitterExt'+'entsInner','emitterRad'+'ius','emitterRad'+'iusInner','initialVel'+'ocity','wrap','wrapBounds','localSpace','screenSpac'+'e','colorMapAs'+'set','normalMapA'+'sset','mesh','meshAsset','renderAsse'+'t','orientatio'+'n','particleNo'+'rmal','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','velocityGr'+'aph','velocityGr'+'aph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2','scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','colorMap','normalMap','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animSpeed','animLoop','layers'];class tO extends ct{constructor(_0x4963db){super(_0x4963db),this['id']='particlesy'+'stem',this['ComponentT'+'ype']=SR,this['DataType']=yR,this['schema']=eO,this['propertyTy'+'pes']={'emitterExtents':'vec3','emitterExtentsInner':'vec3','particleNormal':'vec3','wrapBounds':'vec3','localVelocityGraph':'curveset','localVelocityGraph2':'curveset','velocityGraph':'curveset','velocityGraph2':'curveset','colorGraph':'curveset','colorGraph2':'curveset','alphaGraph':'curve','alphaGraph2':'curve','rotationSpeedGraph':'curve','rotationSpeedGraph2':'curve','radialSpeedGraph':'curve','radialSpeedGraph2':'curve','scaleGraph':'curve','scaleGraph2':'curve'},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this),Ce['get'](_0x4963db['graphicsDe'+'vice'],Fe)['add'](c3),Ce['get'](_0x4963db['graphicsDe'+'vice'],it)['add'](J3);}['initialize'+'ComponentD'+'ata'](_0xdf0612,_0x1bb70c,_0x347f09){const _0x20ecc0={};_0x347f09=[];const _0x34e8a1=this['propertyTy'+'pes'];(_0x1bb70c['mesh']instanceof pe||typeof _0x1bb70c['mesh']=='number')&&(_0x1bb70c['meshAsset']=_0x1bb70c['mesh'],delete _0x1bb70c['mesh']);for(const _0xc94c6a in _0x1bb70c){if(_0x1bb70c['hasOwnProp'+'erty'](_0xc94c6a)&&(_0x347f09['push'](_0xc94c6a),_0x20ecc0[_0xc94c6a]=_0x1bb70c[_0xc94c6a]),_0x34e8a1[_0xc94c6a]==='vec3')Array['isArray'](_0x20ecc0[_0xc94c6a])&&(_0x20ecc0[_0xc94c6a]=new D(_0x20ecc0[_0xc94c6a][-0x1b77+0x1*-0x13fa+0x2f71],_0x20ecc0[_0xc94c6a][0x1cb6+0xb2a+-0x27df],_0x20ecc0[_0xc94c6a][0x959+0x190c+0x1*-0x2263]));else{if(_0x34e8a1[_0xc94c6a]==='curve'){if(!(_0x20ecc0[_0xc94c6a]instanceof Xs)){const _0x3379f1=_0x20ecc0[_0xc94c6a]['type'];_0x20ecc0[_0xc94c6a]=new Xs(_0x20ecc0[_0xc94c6a]['keys']),_0x20ecc0[_0xc94c6a]['type']=_0x3379f1;}}else{if(_0x34e8a1[_0xc94c6a]==='curveset'&&!(_0x20ecc0[_0xc94c6a]instanceof ta)){const _0xb7c3c2=_0x20ecc0[_0xc94c6a]['type'];_0x20ecc0[_0xc94c6a]=new ta(_0x20ecc0[_0xc94c6a]['keys']),_0x20ecc0[_0xc94c6a]['type']=_0xb7c3c2;}}}_0x20ecc0['layers']&&Array['isArray'](_0x20ecc0['layers'])&&(_0x20ecc0['layers']=_0x20ecc0['layers']['slice'](-0x26e0+-0x1252+-0x3932*-0x1));}super['initialize'+'ComponentD'+'ata'](_0xdf0612,_0x20ecc0,_0x347f09);}['cloneCompo'+'nent'](_0x498107,_0x5b4618){const _0x4f59e6=_0x498107['particlesy'+'stem']['data'],_0x4f011a=this['schema'],_0x5978a7={};for(let _0x127660=0x20*-0xfd+0x1c3*0x7+0x1c1*0xb,_0x1c98c6=_0x4f011a['length'];_0x127660<_0x1c98c6;_0x127660++){const _0x5a059c=_0x4f011a[_0x127660];let _0x39f25a=_0x4f59e6[_0x5a059c];_0x39f25a instanceof D||_0x39f25a instanceof Xs||_0x39f25a instanceof ta?(_0x39f25a=_0x39f25a['clone'](),_0x5978a7[_0x5a059c]=_0x39f25a):_0x5a059c==='layers'?_0x5978a7['layers']=_0x4f59e6['layers']['slice'](0xb4+-0x257b+0x541*0x7):_0x39f25a!=null&&(_0x5978a7[_0x5a059c]=_0x39f25a);}return this['addCompone'+'nt'](_0x5b4618,_0x5978a7);}['onUpdate'](_0x106efc){const _0x13adc8=this['store'],_0x2b5d46=this['app']['stats']['particles'],_0xa2f548=this['app']['scene']['layers'];for(let _0x71d9e5=0x17c5+-0x2b3*-0x1+-0x1a78;_0x71d9e5<_0xa2f548['layerList']['length'];_0x71d9e5++)_0xa2f548['layerList'][_0x71d9e5]['requiresLi'+'ghtCube']=!(-0xc9d*0x3+-0x1e2e+-0x2*-0x2203);for(const _0x77fa02 in _0x13adc8)if(_0x13adc8['hasOwnProp'+'erty'](_0x77fa02)){const _0x16bc33=_0x13adc8[_0x77fa02],_0x522315=_0x16bc33['entity'],_0x53ccbe=_0x16bc33['data'];if(_0x53ccbe['enabled']&&_0x522315['enabled']){const _0x29b148=_0x522315['particlesy'+'stem']['emitter'];if(!(_0x29b148!=null&&_0x29b148['meshInstan'+'ce']['visible']))continue;if(_0x29b148['lighting']){const _0xd2a6f5=_0x53ccbe['layers'];for(let _0x3e8c23=0x14a1+0x3*0x9d5+-0x3220;_0x3e8c23<_0xd2a6f5['length'];_0x3e8c23++){const _0x220a09=_0xa2f548['getLayerBy'+'Id'](_0xd2a6f5[_0x3e8c23]);_0x220a09&&(_0x220a09['requiresLi'+'ghtCube']=!(-0x148a+-0xc7e+0x2108));}}if(!_0x53ccbe['paused']){let _0x5693be=-0x1*0x105a+-0x78e*0x2+0x1f76;if(_0x29b148['simTime']+=_0x106efc,_0x29b148['simTime']>=_0x29b148['fixedTimeS'+'tep']&&(_0x5693be=Math['floor'](_0x29b148['simTime']/_0x29b148['fixedTimeS'+'tep']),_0x29b148['simTime']-=_0x5693be*_0x29b148['fixedTimeS'+'tep']),_0x5693be){_0x5693be=Math['min'](_0x5693be,_0x29b148['maxSubStep'+'s']);for(let _0xe04103=0xa32+0x5c7*-0x3+0x723;_0xe04103<_0x5693be;_0xe04103++)_0x29b148['addTime'](_0x29b148['fixedTimeS'+'tep'],!(0x15e6+-0x47b+-0x5ce*0x3));_0x2b5d46['_updatesPe'+'rFrame']+=_0x5693be,_0x2b5d46['_frameTime']+=_0x29b148['_addTimeTi'+'me'],_0x29b148['_addTimeTi'+'me']=-0x230d+-0x1867+-0x14*-0x2f9;}_0x29b148['finishFram'+'e']();}}}}['onBeforeRe'+'move'](_0x160555,_0x5ef185){_0x5ef185['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class sO extends td{constructor(_0x4a5ddd,_0x46f4d6){super(),this['skin']=_0x4a5ddd,this['skinInstan'+'ce']=_0x46f4d6;}}const Vs=class Vs{static['logCachedS'+'kinInstanc'+'es'](){console['log']('CachedSkin'+'Instances'),Vs['_skinInsta'+'nceCache']['forEach']((_0x293e9c,_0x1318b8)=>{console['log'](_0x1318b8['name']+':\x20Array('+_0x293e9c['length']+')');for(let _0x354807=0xb5*0x1d+-0x2047+0xbc6;_0x354807<_0x293e9c['length'];_0x354807++)console['log']('\x20\x20'+_0x354807+(':\x20RefCount'+'\x20')+_0x293e9c[_0x354807]['refCount']);});}static['createCach'+'edSkinInst'+'ance'](_0x3a2214,_0x519131,_0x34a6f9){let _0x2ae975=Vs['getCachedS'+'kinInstanc'+'e'](_0x3a2214,_0x519131);return _0x2ae975||(_0x2ae975=new xl(_0x3a2214),_0x2ae975['resolve'](_0x519131,_0x34a6f9),Vs['addCachedS'+'kinInstanc'+'e'](_0x3a2214,_0x519131,_0x2ae975)),_0x2ae975;}static['getCachedS'+'kinInstanc'+'e'](_0xd85c10,_0x3faa1b){let _0x3cfb71=null;const _0x50647b=Vs['_skinInsta'+'nceCache']['get'](_0x3faa1b);if(_0x50647b){const _0x5e260e=_0x50647b['find'](_0x757a3c=>_0x757a3c['skin']===_0xd85c10);_0x5e260e&&(_0x5e260e['incRefCoun'+'t'](),_0x3cfb71=_0x5e260e['skinInstan'+'ce']);}return _0x3cfb71;}static['addCachedS'+'kinInstanc'+'e'](_0x151dcb,_0x45fd6b,_0x2c61d7){let _0x47861e=Vs['_skinInsta'+'nceCache']['get'](_0x45fd6b);_0x47861e||(_0x47861e=[],Vs['_skinInsta'+'nceCache']['set'](_0x45fd6b,_0x47861e));let _0x3d1591=_0x47861e['find'](_0x319d38=>_0x319d38['skin']===_0x151dcb);_0x3d1591||(_0x3d1591=new sO(_0x151dcb,_0x2c61d7),_0x47861e['push'](_0x3d1591)),_0x3d1591['incRefCoun'+'t']();}static['removeCach'+'edSkinInst'+'ance'](_0x3737c6){if(_0x3737c6){const _0x33c9f9=_0x3737c6['rootBone'];if(_0x33c9f9){const _0x802b06=Vs['_skinInsta'+'nceCache']['get'](_0x33c9f9);if(_0x802b06){const _0x46204f=_0x802b06['findIndex'](_0x12cbf9=>_0x12cbf9['skinInstan'+'ce']===_0x3737c6);if(_0x46204f>=-0x12c7+0x1*-0x11e1+0x44*0x8a){const _0x2414a9=_0x802b06[_0x46204f];_0x2414a9['decRefCoun'+'t'](),_0x2414a9['refCount']===0x116c+0x1612+-0x6*0x695&&(_0x802b06['splice'](_0x46204f,-0xa22*0x2+-0x13a0+-0x1*-0x27e5),_0x802b06['length']||Vs['_skinInsta'+'nceCache']['delete'](_0x33c9f9),_0x3737c6&&(_0x3737c6['destroy'](),_0x2414a9['skinInstan'+'ce']=null));}}}}}};h(Vs,'_skinInsta'+'nceCache',new Map());let il=Vs;class rl{constructor(_0x1bc663,_0x3ac7db,_0x19511d,_0x243a06,_0xba94f1){h(this,'_evtLoadBy'+'Id',null),h(this,'_evtUnload'+'ById',null),h(this,'_evtAddByI'+'d',null),h(this,'_evtRemove'+'ById',null),h(this,'_evtLoadBy'+'Url',null),h(this,'_evtAddByU'+'rl',null),h(this,'_evtRemove'+'ByUrl',null),(this['propertyNa'+'me']=_0x1bc663,this['parent']=_0x3ac7db,this['_scope']=_0xba94f1,this['_registry']=_0x19511d,this['id']=null,this['url']=null,this['asset']=null,this['_onAssetLo'+'ad']=_0x243a06['load'],this['_onAssetAd'+'d']=_0x243a06['add'],this['_onAssetRe'+'move']=_0x243a06['remove'],this['_onAssetUn'+'load']=_0x243a06['unload']);}set['id'](_0x174221){if(this['url'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_id']=_0x174221,this['asset']=this['_registry']['get'](this['_id']),this['_bind']();}get['id'](){return this['_id'];}set['url'](_0x558d37){if(this['id'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_url']=_0x558d37,this['asset']=this['_registry']['getByUrl'](this['_url']),this['_bind']();}get['url'](){return this['_url'];}['_bind'](){this['id']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Id']=this['_registry']['on']('load:'+this['id'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByI'+'d']=this['_registry']['once']('add:'+this['id'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ById']=this['_registry']['on']('remove:'+this['id'],this['_onRemove'],this)),this['_onAssetUn'+'load']&&(this['_evtUnload'+'ById']=this['_registry']['on']('unload:'+this['id'],this['_onUnload'],this))),this['url']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Url']=this['_registry']['on']('load:url:'+this['url'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByU'+'rl']=this['_registry']['once']('add:url:'+this['url'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ByUrl']=this['_registry']['on']('remove:url'+':'+this['url'],this['_onRemove'],this)));}['_unbind'](){var _0xb3f754,_0x367f38,_0x1c1a4c,_0x3b8fae,_0x5091bb,_0x305380,_0x3ff907;this['id']&&((_0xb3f754=this['_evtLoadBy'+'Id'])==null||_0xb3f754['off'](),this['_evtLoadBy'+'Id']=null,(_0x367f38=this['_evtAddByI'+'d'])==null||_0x367f38['off'](),this['_evtAddByI'+'d']=null,(_0x1c1a4c=this['_evtRemove'+'ById'])==null||_0x1c1a4c['off'](),this['_evtRemove'+'ById']=null,(_0x3b8fae=this['_evtUnload'+'ById'])==null||_0x3b8fae['off'](),this['_evtUnload'+'ById']=null),this['url']&&((_0x5091bb=this['_evtLoadBy'+'Url'])==null||_0x5091bb['off'](),this['_evtLoadBy'+'Url']=null,(_0x305380=this['_evtAddByU'+'rl'])==null||_0x305380['off'](),this['_evtAddByU'+'rl']=null,(_0x3ff907=this['_evtRemove'+'ByUrl'])==null||_0x3ff907['off'](),this['_evtRemove'+'ByUrl']=null);}['_onLoad'](_0x5c0d05){this['_onAssetLo'+'ad']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x5c0d05);}['_onAdd'](_0x32b7a8){this['asset']=_0x32b7a8,this['_onAssetAd'+'d']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x32b7a8);}['_onRemove'](_0x887d9){this['_onAssetRe'+'move']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x887d9),this['asset']=null;}['_onUnload'](_0x18a2b6){this['_onAssetUn'+'load']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x18a2b6);}}class Ev extends we{constructor(_0x27a9c8,_0x4e662b){super(_0x27a9c8,_0x4e662b),h(this,'_type','asset'),h(this,'_castShado'+'ws',!(-0x1f*0x6d+-0x258d*0x1+-0x1*-0x32c0)),h(this,'_receiveSh'+'adows',!(-0x1a3f+0x85*-0x32+0x1cd*0x1d)),h(this,'_castShado'+'wsLightmap',!(-0x12fb+0x2254+-0xf59)),h(this,'_lightmapp'+'ed',!(-0x8f2+-0x15d6+0x1ec9)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x246*0x4+-0x6d6*-0x3+-0x1*0xb69),h(this,'isStatic',!(-0x1*-0x1539+-0x38*-0x98+0x1*-0x3678)),h(this,'_batchGrou'+'pId',-(-0x17b*0x7+-0x2e*0x4f+0x418*0x6)),h(this,'_layers',[Ji]),h(this,'_renderSty'+'le',nn),h(this,'_meshInsta'+'nces',[]),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_assetRefe'+'rence'),h(this,'_materialR'+'eferences',[]),h(this,'_material'),h(this,'_rootBone',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['_assetRefe'+'rence']=new rl('asset',this,_0x27a9c8['app']['assets'],{'add':this['_onRenderA'+'ssetAdded'],'load':this['_onRenderA'+'ssetLoad'],'remove':this['_onRenderA'+'ssetRemove'],'unload':this['_onRenderA'+'ssetUnload']},this),this['_material']=_0x27a9c8['defaultMat'+'erial'],_0x4e662b['on']('remove',this['onRemoveCh'+'ild'],this),_0x4e662b['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x4e662b['on']('insert',this['onInsertCh'+'ild'],this),_0x4e662b['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['renderStyl'+'e'](_0x3af5f0){this['_renderSty'+'le']!==_0x3af5f0&&(this['_renderSty'+'le']=_0x3af5f0,He['_prepareRe'+'nderStyleF'+'orArray'](this['_meshInsta'+'nces'],_0x3af5f0));}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['customAabb'](_0x59df37){this['_customAab'+'b']=_0x59df37;const _0x1de134=this['_meshInsta'+'nces'];if(_0x1de134){for(let _0x2a6f6d=0xef*0x19+0xba3*-0x2+-0x11*0x1;_0x2a6f6d<_0x1de134['length'];_0x2a6f6d++)_0x1de134[_0x2a6f6d]['setCustomA'+'abb'](this['_customAab'+'b']);}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x221215){if(this['_type']!==_0x221215&&(this['_area']=null,this['_type']=_0x221215,this['destroyMes'+'hInstances'](),_0x221215!=='asset')){let _0x33fcd5=this['_material'];(!_0x33fcd5||_0x33fcd5===this['system']['defaultMat'+'erial'])&&(_0x33fcd5=this['_materialR'+'eferences'][0x3a*0x3e+-0x3b*0x7f+0x3*0x513]&&this['_materialR'+'eferences'][0x21ad+-0x25ac+0x3*0x155]['asset']&&this['_materialR'+'eferences'][-0xe0f+0x195*-0xf+-0x25ca*-0x1]['asset']['resource']);const _0x41042c=Tv(this['system']['app']['graphicsDe'+'vice'],_0x221215);this['_area']=_0x41042c['area'],this['meshInstan'+'ces']=[new He(_0x41042c['mesh'],_0x33fcd5||this['system']['defaultMat'+'erial'],this['entity'])];}}get['type'](){return this['_type'];}set['meshInstan'+'ces'](_0x415087){if(w['assert'](Array['isArray'](_0x415087),'MeshInstan'+'ces\x20set\x20to'+'\x20a\x20Render\x20'+'component\x20'+'must\x20be\x20an'+'\x20array.'),this['destroyMes'+'hInstances'](),this['_meshInsta'+'nces']=_0x415087,this['_meshInsta'+'nces']){const _0x36e9e8=this['_meshInsta'+'nces'];for(let _0x3372dd=0x2511+-0x1940+-0x37*0x37;_0x3372dd<_0x36e9e8['length'];_0x3372dd++)_0x36e9e8[_0x3372dd]['node']||(_0x36e9e8[_0x3372dd]['node']=this['entity']),_0x36e9e8[_0x3372dd]['castShadow']=this['_castShado'+'ws'],_0x36e9e8[_0x3372dd]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x36e9e8[_0x3372dd]['renderStyl'+'e']=this['_renderSty'+'le'],_0x36e9e8[_0x3372dd]['setLightma'+'pped'](this['_lightmapp'+'ed']),_0x36e9e8[_0x3372dd]['setCustomA'+'abb'](this['_customAab'+'b']);this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['meshInstan'+'ces'](){return this['_meshInsta'+'nces'];}set['lightmappe'+'d'](_0x42a019){if(_0x42a019!==this['_lightmapp'+'ed']){this['_lightmapp'+'ed']=_0x42a019;const _0x5653ae=this['_meshInsta'+'nces'];if(_0x5653ae){for(let _0x1b26c2=-0x18d7+0x1042+0x895;_0x1b26c2<_0x5653ae['length'];_0x1b26c2++)_0x5653ae[_0x1b26c2]['setLightma'+'pped'](_0x42a019);}}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x4e2106){if(this['_castShado'+'ws']!==_0x4e2106){const _0x190bc5=this['_meshInsta'+'nces'];if(_0x190bc5){const _0x28de3e=this['layers'],_0x4d67be=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x4e2106)for(let _0x5a2fea=0x1e72+-0x1*0x10e6+-0x3*0x484;_0x5a2fea<_0x28de3e['length'];_0x5a2fea++){const _0x3f66d0=_0x4d67be['layers']['getLayerBy'+'Id'](this['layers'][_0x5a2fea]);_0x3f66d0&&_0x3f66d0['removeShad'+'owCasters'](_0x190bc5);}for(let _0x24f721=-0x1414+0x256f+0x5c9*-0x3;_0x24f721<_0x190bc5['length'];_0x24f721++)_0x190bc5[_0x24f721]['castShadow']=_0x4e2106;if(!this['_castShado'+'ws']&&_0x4e2106)for(let _0x2affd9=-0x1c0c+0x3bd+-0x1*-0x184f;_0x2affd9<_0x28de3e['length'];_0x2affd9++){const _0x1002b4=_0x4d67be['layers']['getLayerBy'+'Id'](_0x28de3e[_0x2affd9]);_0x1002b4&&_0x1002b4['addShadowC'+'asters'](_0x190bc5);}}this['_castShado'+'ws']=_0x4e2106;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x1cbadc){if(this['_receiveSh'+'adows']!==_0x1cbadc){this['_receiveSh'+'adows']=_0x1cbadc;const _0x4c3a25=this['_meshInsta'+'nces'];if(_0x4c3a25){for(let _0x48fcb5=0x1*-0x256d+0x4b8+0x20b5;_0x48fcb5<_0x4c3a25['length'];_0x48fcb5++)_0x4c3a25[_0x48fcb5]['receiveSha'+'dow']=_0x1cbadc;}}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x33258f){this['_castShado'+'wsLightmap']=_0x33258f;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x55ecab){this['_lightmapS'+'izeMultipl'+'ier']=_0x55ecab;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x1ed94f){const _0x3f4683=this['system']['app']['scene']['layers'];let _0x4d5838;if(this['_meshInsta'+'nces']){for(let _0x457eb2=0x1970+0x1c37+0x14f*-0x29;_0x457eb2<this['_layers']['length'];_0x457eb2++)_0x4d5838=_0x3f4683['getLayerBy'+'Id'](this['_layers'][_0x457eb2]),_0x4d5838&&_0x4d5838['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}this['_layers']['length']=-0x1798+-0x2*-0xd2d+-0x2c2;for(let _0x42cc01=0x233b+0x1db0+0x40eb*-0x1;_0x42cc01<_0x1ed94f['length'];_0x42cc01++)this['_layers'][_0x42cc01]=_0x1ed94f[_0x42cc01];if(!(!this['enabled']||!this['entity']['enabled']||!this['_meshInsta'+'nces'])){for(let _0x117367=0x9*0x409+0x1858*0x1+-0x1*0x3ca9;_0x117367<this['_layers']['length'];_0x117367++)_0x4d5838=_0x3f4683['getLayerBy'+'Id'](this['_layers'][_0x117367]),_0x4d5838&&_0x4d5838['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x1cbbc6){var _0x59f5db,_0x2834ee;this['_batchGrou'+'pId']!==_0x1cbbc6&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0xdff+0xe94*-0x2+0x2b27&&((_0x59f5db=this['system']['app']['batcher'])==null||_0x59f5db['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x1cbbc6>=0x1692+-0xf2+-0x2*0xad0&&((_0x2834ee=this['system']['app']['batcher'])==null||_0x2834ee['insert'](St['RENDER'],_0x1cbbc6,this['entity'])),_0x1cbbc6<0x164f+0x31*0x1f+-0x5*0x5a6&&this['_batchGrou'+'pId']>=0x231a+-0x2077+0x5*-0x87&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s'](),this['_batchGrou'+'pId']=_0x1cbbc6);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['material'](_0x532db6){if(this['_material']!==_0x532db6&&(this['_material']=_0x532db6,this['_meshInsta'+'nces']&&this['_type']!=='asset')){for(let _0x3ff469=-0x1523+-0x239c*-0x1+-0xe79;_0x3ff469<this['_meshInsta'+'nces']['length'];_0x3ff469++)this['_meshInsta'+'nces'][_0x3ff469]['material']=_0x532db6;}}get['material'](){return this['_material'];}set['materialAs'+'sets'](_0x287dda=[]){if(this['_materialR'+'eferences']['length']>_0x287dda['length']){for(let _0x3fb4c2=_0x287dda['length'];_0x3fb4c2<this['_materialR'+'eferences']['length'];_0x3fb4c2++)this['_materialR'+'eferences'][_0x3fb4c2]['id']=null;this['_materialR'+'eferences']['length']=_0x287dda['length'];}for(let _0x3f2ac0=0x1df5*-0x1+0xf2e*-0x1+0x2d23;_0x3f2ac0<_0x287dda['length'];_0x3f2ac0++)if(this['_materialR'+'eferences'][_0x3f2ac0]||this['_materialR'+'eferences']['push'](new rl(_0x3f2ac0,this,this['system']['app']['assets'],{'add':this['_onMateria'+'lAdded'],'load':this['_onMateria'+'lLoad'],'remove':this['_onMateria'+'lRemove'],'unload':this['_onMateria'+'lUnload']},this)),_0x287dda[_0x3f2ac0]){const _0x540e9c=_0x287dda[_0x3f2ac0]instanceof pe?_0x287dda[_0x3f2ac0]['id']:_0x287dda[_0x3f2ac0];this['_materialR'+'eferences'][_0x3f2ac0]['id']!==_0x540e9c&&(this['_materialR'+'eferences'][_0x3f2ac0]['id']=_0x540e9c),this['_materialR'+'eferences'][_0x3f2ac0]['asset']&&this['_onMateria'+'lAdded'](_0x3f2ac0,this,this['_materialR'+'eferences'][_0x3f2ac0]['asset']);}else this['_materialR'+'eferences'][_0x3f2ac0]['id']=null,this['_meshInsta'+'nces'][_0x3f2ac0]&&(this['_meshInsta'+'nces'][_0x3f2ac0]['material']=this['system']['defaultMat'+'erial']);}get['materialAs'+'sets'](){return this['_materialR'+'eferences']['map'](_0x2c0508=>_0x2c0508['id']);}set['asset'](_0x3722a0){const _0x1cce7c=_0x3722a0 instanceof pe?_0x3722a0['id']:_0x3722a0;this['_assetRefe'+'rence']['id']!==_0x1cce7c&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onRenderA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x1cce7c,this['_assetRefe'+'rence']['asset']&&this['_onRenderA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['assignAsse'+'t'](_0x1a1a22){const _0x2ee816=_0x1a1a22 instanceof pe?_0x1a1a22['id']:_0x1a1a22;this['_assetRefe'+'rence']['id']=_0x2ee816;}set['rootBone'](_0x1546e2){if(this['_rootBone']!==_0x1546e2){const _0x155d63=typeof _0x1546e2=='string';if(this['_rootBone']&&_0x155d63&&this['_rootBone']['getGuid']()===_0x1546e2)return;this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x1546e2 instanceof Ie?this['_rootBone']=_0x1546e2:_0x155d63?(this['_rootBone']=this['system']['app']['getEntityF'+'romIndex'](_0x1546e2)||null,this['_rootBone']||w['warn']('Failed\x20to\x20'+'find\x20rootB'+'one\x20Entity'+'\x20by\x20GUID')):this['_rootBone']=null,this['_rootBone']&&this['_cloneSkin'+'Instances']();}}get['rootBone'](){return this['_rootBone'];}['destroyMes'+'hInstances'](){const _0x5b807f=this['_meshInsta'+'nces'];if(_0x5b807f){this['removeFrom'+'Layers'](),this['_clearSkin'+'Instances']();for(let _0x14386f=-0x3bc*0x6+0x2283+-0xc1b;_0x14386f<_0x5b807f['length'];_0x14386f++)_0x5b807f[_0x14386f]['destroy']();this['_meshInsta'+'nces']['length']=0x1*0x89a+-0x7a8+-0x2*0x79;}}['addToLayer'+'s'](){const _0xe0503d=this['system']['app']['scene']['layers'];for(let _0x25763e=0x1d8*-0xe+-0xd*-0x256+-0x48e;_0x25763e<this['_layers']['length'];_0x25763e++){const _0xd9246e=_0xe0503d['getLayerBy'+'Id'](this['_layers'][_0x25763e]);_0xd9246e&&_0xd9246e['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}['removeFrom'+'Layers'](){if(this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']){const _0xc49434=this['system']['app']['scene']['layers'];for(let _0x2470ec=0x1*0x1af+-0x1*-0xfa1+-0x1150;_0x2470ec<this['_layers']['length'];_0x2470ec++){const _0x4edc44=_0xc49434['getLayerBy'+'Id'](this['_layers'][_0x2470ec]);_0x4edc44&&_0x4edc44['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_meshInsta'+'nces']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyMes'+'hInstances'](),this['asset']=null,this['materialAs'+'set']=null,this['_assetRefe'+'rence']['id']=null;for(let _0x171a4e=-0x142a+0x1d32+-0x908;_0x171a4e<this['_materialR'+'eferences']['length'];_0x171a4e++)this['_materialR'+'eferences'][_0x171a4e]['id']=null;this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x49d3c8,_0x5a8f5d){this['addToLayer'+'s'](),_0x49d3c8['off']('add',this['onLayerAdd'+'ed'],this),_0x49d3c8['off']('remove',this['onLayerRem'+'oved'],this),_0x5a8f5d['on']('add',this['onLayerAdd'+'ed'],this),_0x5a8f5d['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x453c4f){this['layers']['indexOf'](_0x453c4f['id'])<0x14f7+-0x1e72+0x97b||_0x453c4f['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}['onLayerRem'+'oved'](_0x171098){this['layers']['indexOf'](_0x171098['id'])<0x4fa*-0x4+0xc4a*-0x3+-0x2b*-0x152||_0x171098['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}['onEnable'](){var _0x57a4a8;const _0x4db3c7=this['system']['app'],_0x1f26b3=_0x4db3c7['scene'],_0x433618=_0x1f26b3['layers'];this['_rootBone']&&this['_cloneSkin'+'Instances'](),this['_evtLayers'+'Changed']=_0x1f26b3['on']('set:layers',this['onLayersCh'+'anged'],this),_0x433618&&(this['_evtLayerA'+'dded']=_0x433618['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x433618['on']('remove',this['onLayerRem'+'oved'],this));const _0x412daf=this['_type']==='asset';this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']?this['addToLayer'+'s']():_0x412daf&&this['asset']&&this['_onRenderA'+'ssetAdded']();for(let _0x585eb8=0x1aff*0x1+0x5*-0x543+-0xb0;_0x585eb8<this['_materialR'+'eferences']['length'];_0x585eb8++)this['_materialR'+'eferences'][_0x585eb8]['asset']&&this['system']['app']['assets']['load'](this['_materialR'+'eferences'][_0x585eb8]['asset']);this['_batchGrou'+'pId']>=-0xc83*-0x1+-0x2669+0x19e6&&((_0x57a4a8=_0x4db3c7['batcher'])==null||_0x57a4a8['insert'](St['RENDER'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x565284,_0x5e4093,_0x4a9849,_0x9d6527;const _0x22007e=this['system']['app'],_0x5ca550=_0x22007e['scene']['layers'];(_0x565284=this['_evtLayers'+'Changed'])==null||_0x565284['off'](),this['_evtLayers'+'Changed']=null,this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x5ca550&&((_0x5e4093=this['_evtLayerA'+'dded'])==null||_0x5e4093['off'](),this['_evtLayerA'+'dded']=null,(_0x4a9849=this['_evtLayerR'+'emoved'])==null||_0x4a9849['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x1645+-0xde7*0x1+-0x7*0x132&&((_0x9d6527=_0x22007e['batcher'])==null||_0x9d6527['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['removeFrom'+'Layers']();}['hide'](){if(this['_meshInsta'+'nces']){for(let _0x3162e5=-0x1932+-0x1*-0x1f23+-0x5f1;_0x3162e5<this['_meshInsta'+'nces']['length'];_0x3162e5++)this['_meshInsta'+'nces'][_0x3162e5]['visible']=!(0x146+-0x24*-0x87+-0x1441);}}['show'](){if(this['_meshInsta'+'nces']){for(let _0x5b92e3=-0x2ed*0x4+-0x2*0x1139+-0x6*-0x7b1;_0x5b92e3<this['_meshInsta'+'nces']['length'];_0x5b92e3++)this['_meshInsta'+'nces'][_0x5b92e3]['visible']=!(0x19*0xa9+0x2d7*0x1+-0x1358);}}['_onRenderA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onRenderA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onRenderA'+'ssetLoad'](){var _0x333132;if(this['destroyMes'+'hInstances'](),this['_assetRefe'+'rence']['asset']){const _0x6bbbb9=this['_assetRefe'+'rence']['asset']['resource'];(_0x333132=this['_evtSetMes'+'hes'])==null||_0x333132['off'](),this['_evtSetMes'+'hes']=_0x6bbbb9['on']('set:meshes',this['_onSetMesh'+'es'],this),_0x6bbbb9['meshes']&&this['_onSetMesh'+'es'](_0x6bbbb9['meshes']);}}['_onSetMesh'+'es'](_0x1a2915){this['_cloneMesh'+'es'](_0x1a2915);}['_clearSkin'+'Instances'](){for(let _0x9884de=-0x76d+-0x4*-0x393+0x6df*-0x1;_0x9884de<this['_meshInsta'+'nces']['length'];_0x9884de++){const _0x19d34c=this['_meshInsta'+'nces'][_0x9884de];il['removeCach'+'edSkinInst'+'ance'](_0x19d34c['skinInstan'+'ce']),_0x19d34c['skinInstan'+'ce']=null;}}['_cloneSkin'+'Instances'](){if(this['_meshInsta'+'nces']['length']&&this['_rootBone']instanceof Ie)for(let _0x3647b5=0xc57+0x158+-0xdaf;_0x3647b5<this['_meshInsta'+'nces']['length'];_0x3647b5++){const _0x4fd67d=this['_meshInsta'+'nces'][_0x3647b5],_0x40d37e=_0x4fd67d['mesh'];_0x40d37e['skin']&&!_0x4fd67d['skinInstan'+'ce']&&(_0x4fd67d['skinInstan'+'ce']=il['createCach'+'edSkinInst'+'ance'](_0x40d37e['skin'],this['_rootBone'],this['entity']));}}['_cloneMesh'+'es'](_0x1f85d0){if(_0x1f85d0&&_0x1f85d0['length']){const _0x4a5651=[];for(let _0xce9e12=0x300+0x6e7+-0xc3*0xd;_0xce9e12<_0x1f85d0['length'];_0xce9e12++){const _0x37d2e9=_0x1f85d0[_0xce9e12],_0xe79d4=this['_materialR'+'eferences'][_0xce9e12]&&this['_materialR'+'eferences'][_0xce9e12]['asset']&&this['_materialR'+'eferences'][_0xce9e12]['asset']['resource'],_0x28c9f1=new He(_0x37d2e9,_0xe79d4||this['system']['defaultMat'+'erial'],this['entity']);_0x4a5651['push'](_0x28c9f1),_0x37d2e9['morph']&&(_0x28c9f1['morphInsta'+'nce']=new _a(_0x37d2e9['morph']));}this['meshInstan'+'ces']=_0x4a5651,this['_cloneSkin'+'Instances']();}}['_onRenderA'+'ssetUnload'](){this['_type']==='asset'&&this['destroyMes'+'hInstances']();}['_onRenderA'+'ssetRemove'](){var _0x54f243;(_0x54f243=this['_evtSetMes'+'hes'])==null||_0x54f243['off'](),this['_evtSetMes'+'hes']=null,this['_onRenderA'+'ssetUnload']();}['_onMateria'+'lAdded'](_0x2921c5,_0x3890ce,_0x43bdee){_0x43bdee['resource']?this['_onMateria'+'lLoad'](_0x2921c5,_0x3890ce,_0x43bdee):this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](_0x43bdee);}['_updateMai'+'nMaterial'](_0x517e12,_0x1292f2){_0x517e12===0x9*-0x211+-0x2*-0x838+0x229&&(this['material']=_0x1292f2);}['_onMateria'+'lLoad'](_0x2757ef,_0x15a163,_0x1728a9){this['_meshInsta'+'nces'][_0x2757ef]&&(this['_meshInsta'+'nces'][_0x2757ef]['material']=_0x1728a9['resource']),this['_updateMai'+'nMaterial'](_0x2757ef,_0x1728a9['resource']);}['_onMateria'+'lRemove'](_0x50cf06,_0x2a3f0a,_0x58e391){this['_meshInsta'+'nces'][_0x50cf06]&&(this['_meshInsta'+'nces'][_0x50cf06]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x50cf06,this['system']['defaultMat'+'erial']);}['_onMateria'+'lUnload'](_0x599b5c,_0x1a0016,_0x5d15e3){this['_meshInsta'+'nces'][_0x599b5c]&&(this['_meshInsta'+'nces'][_0x599b5c]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x599b5c,this['system']['defaultMat'+'erial']);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0xbc2b95,_0x5776ef){_0xbc2b95['rootBone']&&(this['rootBone']=_0x5776ef[_0xbc2b95['rootBone']['getGuid']()]);}}class iO{constructor(){this['enabled']=!(-0x1*0x242b+0x24a6*-0x1+0x48d1);}}const du=['enabled'],Ur=['material','meshInstan'+'ces','asset','materialAs'+'sets','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','renderStyl'+'e','type','layers','isStatic','batchGroup'+'Id','rootBone'];class rO extends ct{constructor(_0x1b18ff){super(_0x1b18ff),this['id']='render',this['ComponentT'+'ype']=Ev,this['DataType']=iO,this['schema']=du,this['defaultMat'+'erial']=$n(_0x1b18ff['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x1ee47a,_0x471b09,_0x240daa){(_0x471b09['batchGroup'+'Id']===null||_0x471b09['batchGroup'+'Id']===void(0x3*0x23b+-0x1*-0x151f+-0x1bd*0x10))&&(_0x471b09['batchGroup'+'Id']=-(-0x25a3+-0x5e6+0x2b8a)),_0x471b09['layers']&&_0x471b09['layers']['length']&&(_0x471b09['layers']=_0x471b09['layers']['slice'](0x4c*-0x8+0x1*0x534+-0x4*0xb5));for(let _0x53fa8b=0xb*-0x281+-0x1215+0x2da0;_0x53fa8b<Ur['length'];_0x53fa8b++)_0x471b09['hasOwnProp'+'erty'](Ur[_0x53fa8b])&&(_0x1ee47a[Ur[_0x53fa8b]]=_0x471b09[Ur[_0x53fa8b]]);_0x471b09['aabbCenter']&&_0x471b09['aabbHalfEx'+'tents']&&(_0x1ee47a['customAabb']=new De(new D(_0x471b09['aabbCenter']),new D(_0x471b09['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x1ee47a,_0x471b09,du);}['cloneCompo'+'nent'](_0x419a2e,_0x42398e){const _0x7d99e6={};for(let _0x199aa6=-0x20d0+0x1882+0x84e;_0x199aa6<Ur['length'];_0x199aa6++)_0x7d99e6[Ur[_0x199aa6]]=_0x419a2e['render'][Ur[_0x199aa6]];_0x7d99e6['enabled']=_0x419a2e['render']['enabled'],delete _0x7d99e6['meshInstan'+'ces'];const _0x55102b=this['addCompone'+'nt'](_0x42398e,_0x7d99e6),_0x1f6c2d=_0x419a2e['render']['meshInstan'+'ces'],_0x26e44e=_0x1f6c2d['map'](_0x151107=>_0x151107['mesh']);_0x55102b['_onSetMesh'+'es'](_0x26e44e);for(let _0x980bea=0x6af+0x7e3*0x2+-0x1675;_0x980bea<_0x1f6c2d['length'];_0x980bea++)_0x55102b['meshInstan'+'ces'][_0x980bea]['material']=_0x1f6c2d[_0x980bea]['material'];return _0x419a2e['render']['customAabb']&&(_0x55102b['customAabb']=_0x419a2e['render']['customAabb']['clone']()),_0x55102b;}['onRemove'](_0x59f263,_0x19e9d2){_0x19e9d2['onRemove']();}}we['_buildAcce'+'ssors'](Ev['prototype'],du);class sf{constructor(_0x46716b,_0x17cbb6){h(this,'_construct'+'or'),h(this,'_pool',[]),h(this,'_count',-0x9*0x2ce+-0x1338+0x769*0x6),(this['_construct'+'or']=_0x46716b,this['_resize'](_0x17cbb6));}['_resize'](_0x33afa0){if(_0x33afa0>this['_pool']['length']){for(let _0x4ae765=this['_pool']['length'];_0x4ae765<_0x33afa0;_0x4ae765++)this['_pool'][_0x4ae765]=new this['_construct'+'or']();}}['allocate'](){return this['_count']>=this['_pool']['length']&&this['_resize'](this['_pool']['length']*(0xf5*-0x15+-0x7c*-0x2e+0x1*-0x22d)),this['_pool'][this['_count']++];}['freeAll'](){this['_count']=0x1f7f*-0x1+0x5ea+0x1995;}}let cs,Re,Us,$a;const aO=new le(),nO=new le(),pc=new D();class bs extends we{constructor(){super(...arguments),h(this,'_angularDa'+'mping',-0x35f*-0x5+0xc8*-0x2c+0x1185),h(this,'_angularFa'+'ctor',new D(-0x1*-0x701+0x1*0x1f7b+-0x267b,-0xf2*0x1b+-0x4d3*0x5+0x1f*0x19a,0xa13*0x1+0x1c3c+-0x264e)),h(this,'_angularVe'+'locity',new D()),h(this,'_body',null),h(this,'_friction',0x199*-0x5+0x1*-0x101f+-0xc0e*-0x2+0.5),h(this,'_group',ug),h(this,'_linearDam'+'ping',0x759+-0x2*0x123a+0x1d1b),h(this,'_linearFac'+'tor',new D(0xd60+0x343*0x5+-0x1d*0x106,0x290+-0x1*-0x2396+-0x7a1*0x5,-0x24b*-0x1+0xae7+-0x133*0xb)),h(this,'_linearVel'+'ocity',new D()),h(this,'_mask',iu),h(this,'_mass',-0x1191+-0x1a2*-0x14+-0xf16),h(this,'_restituti'+'on',0x1688+-0x2120*-0x1+-0x112*0x34),h(this,'_rollingFr'+'iction',-0x5*-0x71b+0x25b9+-0x494*0x10),h(this,'_simulatio'+'nEnabled',!(0x236*-0x6+0x6cc+0x679)),h(this,'_type',fo);}static['onLibraryL'+'oaded'](){typeof Ammo<'u'&&(cs=new Ammo['btTransfor'+'m'](),Re=new Ammo['btVector3'](),Us=new Ammo['btVector3'](),$a=new Ammo['btQuaterni'+'on']());}static['onAppDestr'+'oy'](){Ammo['destroy'](cs),Ammo['destroy'](Re),Ammo['destroy'](Us),Ammo['destroy']($a),cs=null,Re=null,Us=null,$a=null;}set['angularDam'+'ping'](_0x46cb2b){this['_angularDa'+'mping']!==_0x46cb2b&&(this['_angularDa'+'mping']=_0x46cb2b,this['_body']&&this['_body']['setDamping'](this['_linearDam'+'ping'],_0x46cb2b));}get['angularDam'+'ping'](){return this['_angularDa'+'mping'];}set['angularFac'+'tor'](_0x4288f0){this['_angularFa'+'ctor']['equals'](_0x4288f0)||(this['_angularFa'+'ctor']['copy'](_0x4288f0),this['_body']&&this['_type']===Ns&&(Re['setValue'](_0x4288f0['x'],_0x4288f0['y'],_0x4288f0['z']),this['_body']['setAngular'+'Factor'](Re)));}get['angularFac'+'tor'](){return this['_angularFa'+'ctor'];}set['angularVel'+'ocity'](_0x2197d6){this['_body']&&this['_type']===Ns&&(this['_body']['activate'](),Re['setValue'](_0x2197d6['x'],_0x2197d6['y'],_0x2197d6['z']),this['_body']['setAngular'+'Velocity'](Re),this['_angularVe'+'locity']['copy'](_0x2197d6));}get['angularVel'+'ocity'](){if(this['_body']&&this['_type']===Ns){const _0x32a089=this['_body']['getAngular'+'Velocity']();this['_angularVe'+'locity']['set'](_0x32a089['x'](),_0x32a089['y'](),_0x32a089['z']());}return this['_angularVe'+'locity'];}set['body'](_0x428132){this['_body']!==_0x428132&&(this['_body']=_0x428132,_0x428132&&this['_simulatio'+'nEnabled']&&_0x428132['activate']());}get['body'](){return this['_body'];}set['friction'](_0x447175){this['_friction']!==_0x447175&&(this['_friction']=_0x447175,this['_body']&&this['_body']['setFrictio'+'n'](_0x447175));}get['friction'](){return this['_friction'];}set['group'](_0x1ba6bc){this['_group']!==_0x1ba6bc&&(this['_group']=_0x1ba6bc,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['group'](){return this['_group'];}set['linearDamp'+'ing'](_0x48e5d8){this['_linearDam'+'ping']!==_0x48e5d8&&(this['_linearDam'+'ping']=_0x48e5d8,this['_body']&&this['_body']['setDamping'](_0x48e5d8,this['_angularDa'+'mping']));}get['linearDamp'+'ing'](){return this['_linearDam'+'ping'];}set['linearFact'+'or'](_0x5462a6){this['_linearFac'+'tor']['equals'](_0x5462a6)||(this['_linearFac'+'tor']['copy'](_0x5462a6),this['_body']&&this['_type']===Ns&&(Re['setValue'](_0x5462a6['x'],_0x5462a6['y'],_0x5462a6['z']),this['_body']['setLinearF'+'actor'](Re)));}get['linearFact'+'or'](){return this['_linearFac'+'tor'];}set['linearVelo'+'city'](_0x1a4135){this['_body']&&this['_type']===Ns&&(this['_body']['activate'](),Re['setValue'](_0x1a4135['x'],_0x1a4135['y'],_0x1a4135['z']),this['_body']['setLinearV'+'elocity'](Re),this['_linearVel'+'ocity']['copy'](_0x1a4135));}get['linearVelo'+'city'](){if(this['_body']&&this['_type']===Ns){const _0x7d083a=this['_body']['getLinearV'+'elocity']();this['_linearVel'+'ocity']['set'](_0x7d083a['x'](),_0x7d083a['y'](),_0x7d083a['z']());}return this['_linearVel'+'ocity'];}set['mask'](_0x40e4fd){this['_mask']!==_0x40e4fd&&(this['_mask']=_0x40e4fd,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['mask'](){return this['_mask'];}set['mass'](_0x36c213){if(this['_mass']!==_0x36c213&&(this['_mass']=_0x36c213,this['_body']&&this['_type']===Ns)){const _0x74cd36=this['enabled']&&this['entity']['enabled'];_0x74cd36&&this['disableSim'+'ulation'](),this['_body']['getCollisi'+'onShape']()['calculateL'+'ocalInerti'+'a'](_0x36c213,Re),this['_body']['setMassPro'+'ps'](_0x36c213,Re),this['_body']['updateIner'+'tiaTensor'](),_0x74cd36&&this['enableSimu'+'lation']();}}get['mass'](){return this['_mass'];}set['restitutio'+'n'](_0x1b12ed){this['_restituti'+'on']!==_0x1b12ed&&(this['_restituti'+'on']=_0x1b12ed,this['_body']&&this['_body']['setRestitu'+'tion'](_0x1b12ed));}get['restitutio'+'n'](){return this['_restituti'+'on'];}set['rollingFri'+'ction'](_0x31462a){this['_rollingFr'+'iction']!==_0x31462a&&(this['_rollingFr'+'iction']=_0x31462a,this['_body']&&this['_body']['setRolling'+'Friction'](_0x31462a));}get['rollingFri'+'ction'](){return this['_rollingFr'+'iction'];}set['type'](_0x4fab47){if(this['_type']!==_0x4fab47){switch(this['_type']=_0x4fab47,this['disableSim'+'ulation'](),_0x4fab47){case Ns:this['_group']=fL,this['_mask']=mg;break;case Ua:this['_group']=uL,this['_mask']=mg;break;case fo:default:this['_group']=ug,this['_mask']=iu;break;}this['createBody']();}}get['type'](){return this['_type'];}['createBody'](){const _0x37634a=this['entity'];let _0x2925b7;if(_0x37634a['collision']&&(_0x2925b7=_0x37634a['collision']['shape'],_0x37634a['trigger']&&(_0x37634a['trigger']['destroy'](),delete _0x37634a['trigger'])),_0x2925b7){this['_body']&&(this['system']['removeBody'](this['_body']),this['system']['destroyBod'+'y'](this['_body']),this['_body']=null);const _0x1d8f5b=this['_type']===Ns?this['_mass']:0xdf*0x7+0x1*0x164f+0x4*-0x71a;this['_getEntity'+'Transform'](cs);const _0x244571=this['system']['createBody'](_0x1d8f5b,_0x2925b7,cs);if(_0x244571['setRestitu'+'tion'](this['_restituti'+'on']),_0x244571['setFrictio'+'n'](this['_friction']),_0x244571['setRolling'+'Friction'](this['_rollingFr'+'iction']),_0x244571['setDamping'](this['_linearDam'+'ping'],this['_angularDa'+'mping']),this['_type']===Ns){const _0x574b05=this['_linearFac'+'tor'];Re['setValue'](_0x574b05['x'],_0x574b05['y'],_0x574b05['z']),_0x244571['setLinearF'+'actor'](Re);const _0x56b36a=this['_angularFa'+'ctor'];Re['setValue'](_0x56b36a['x'],_0x56b36a['y'],_0x56b36a['z']),_0x244571['setAngular'+'Factor'](Re);}else this['_type']===Ua&&(_0x244571['setCollisi'+'onFlags'](_0x244571['getCollisi'+'onFlags']()|dL),_0x244571['setActivat'+'ionState'](fg));_0x244571['entity']=_0x37634a,this['body']=_0x244571,this['enabled']&&_0x37634a['enabled']&&this['enableSimu'+'lation']();}}['isActive'](){return this['_body']?this['_body']['isActive']():!(0x971+-0x19ee+0x107e);}['activate'](){this['_body']&&this['_body']['activate']();}['enableSimu'+'lation'](){const _0x2f715d=this['entity'];if(_0x2f715d['collision']&&_0x2f715d['collision']['enabled']&&!this['_simulatio'+'nEnabled']){const _0x25a2e0=this['_body'];if(_0x25a2e0){switch(this['system']['addBody'](_0x25a2e0,this['_group'],this['_mask']),this['_type']){case Ns:this['system']['_dynamic']['push'](this),_0x25a2e0['forceActiv'+'ationState'](su),this['syncEntity'+'ToBody']();break;case Ua:this['system']['_kinematic']['push'](this),_0x25a2e0['forceActiv'+'ationState'](fg);break;case fo:_0x25a2e0['forceActiv'+'ationState'](su),this['syncEntity'+'ToBody']();break;}_0x2f715d['collision']['type']==='compound'&&this['system']['_compounds']['push'](_0x2f715d['collision']),_0x25a2e0['activate'](),this['_simulatio'+'nEnabled']=!(-0x1b75+-0x22e1+0x9e*0x65);}}}['disableSim'+'ulation'](){const _0x531e6d=this['_body'];if(_0x531e6d&&this['_simulatio'+'nEnabled']){const _0x44113d=this['system'];let _0x4f2b50=_0x44113d['_compounds']['indexOf'](this['entity']['collision']);_0x4f2b50>-(-0x17*-0x19a+-0x636+-0x1e9f)&&_0x44113d['_compounds']['splice'](_0x4f2b50,-0x23*0x57+-0xd2b+-0x1911*-0x1),_0x4f2b50=_0x44113d['_dynamic']['indexOf'](this),_0x4f2b50>-(0x32*-0xaa+0x159a+-0xb9b*-0x1)&&_0x44113d['_dynamic']['splice'](_0x4f2b50,0x1bbe+-0x1576+-0x647),_0x4f2b50=_0x44113d['_kinematic']['indexOf'](this),_0x4f2b50>-(-0x1ff*0x13+-0x449+0x65*0x6b)&&_0x44113d['_kinematic']['splice'](_0x4f2b50,0xd3c+-0x1899+0xb5e),_0x44113d['removeBody'](_0x531e6d),_0x531e6d['forceActiv'+'ationState'](uv),this['_simulatio'+'nEnabled']=!(0x1*0x189+0x126f+-0x13*0x10d);}}['applyForce'](_0x1b70a0,_0x46e7fe,_0x2dec48,_0x15f1c2,_0xdcef58,_0xc34799){const _0x2aadb3=this['_body'];_0x2aadb3&&(_0x2aadb3['activate'](),_0x1b70a0 instanceof D?Re['setValue'](_0x1b70a0['x'],_0x1b70a0['y'],_0x1b70a0['z']):Re['setValue'](_0x1b70a0,_0x46e7fe,_0x2dec48),_0x46e7fe instanceof D?Us['setValue'](_0x46e7fe['x'],_0x46e7fe['y'],_0x46e7fe['z']):_0x15f1c2!==void(0x26ee+0xf2*0x17+-0x3cac)?Us['setValue'](_0x15f1c2,_0xdcef58,_0xc34799):Us['setValue'](-0xe9c+0x1*-0x21b5+-0x3*-0x101b,-0x13bf+-0xb63*0x1+-0x1f22*-0x1,0x1ba3*-0x1+0x117a*0x1+0xa29),_0x2aadb3['applyForce'](Re,Us));}['applyTorqu'+'e'](_0x29861f,_0x52ca85,_0x33a51b){const _0x426ac8=this['_body'];_0x426ac8&&(_0x426ac8['activate'](),_0x29861f instanceof D?Re['setValue'](_0x29861f['x'],_0x29861f['y'],_0x29861f['z']):Re['setValue'](_0x29861f,_0x52ca85,_0x33a51b),_0x426ac8['applyTorqu'+'e'](Re));}['applyImpul'+'se'](_0x37c35a,_0x3d6186,_0x4f789a,_0x58d55c,_0x2d9b67,_0x251f66){const _0xd17a7f=this['_body'];_0xd17a7f&&(_0xd17a7f['activate'](),_0x37c35a instanceof D?Re['setValue'](_0x37c35a['x'],_0x37c35a['y'],_0x37c35a['z']):Re['setValue'](_0x37c35a,_0x3d6186,_0x4f789a),_0x3d6186 instanceof D?Us['setValue'](_0x3d6186['x'],_0x3d6186['y'],_0x3d6186['z']):_0x58d55c!==void(0x4*0x4ff+-0x1b1d+0x5*0x16d)?Us['setValue'](_0x58d55c,_0x2d9b67,_0x251f66):Us['setValue'](-0x23fc+0x2152+-0x155*-0x2,0x164*0x5+-0x257+-0x49d,0xd87*0x1+0xf63*0x1+-0x1cea),_0xd17a7f['applyImpul'+'se'](Re,Us));}['applyTorqu'+'eImpulse'](_0x18f943,_0x456d22,_0x1e7e2f){const _0x496a23=this['_body'];_0x496a23&&(_0x496a23['activate'](),_0x18f943 instanceof D?Re['setValue'](_0x18f943['x'],_0x18f943['y'],_0x18f943['z']):Re['setValue'](_0x18f943,_0x456d22,_0x1e7e2f),_0x496a23['applyTorqu'+'eImpulse'](Re));}['isStatic'](){return this['_type']===fo;}['isStaticOr'+'Kinematic'](){return this['_type']===fo||this['_type']===Ua;}['isKinemati'+'c'](){return this['_type']===Ua;}['_getEntity'+'Transform'](_0x56c1d1){const _0x4d0fc0=this['entity'],_0x3c0652=_0x4d0fc0['collision'];if(_0x3c0652){const _0x1b436a=_0x3c0652['getShapePo'+'sition'](),_0x329e60=_0x3c0652['getShapeRo'+'tation']();Re['setValue'](_0x1b436a['x'],_0x1b436a['y'],_0x1b436a['z']),$a['setValue'](_0x329e60['x'],_0x329e60['y'],_0x329e60['z'],_0x329e60['w']);}else{const _0x21e9c9=_0x4d0fc0['getPositio'+'n'](),_0x593f1e=_0x4d0fc0['getRotatio'+'n']();Re['setValue'](_0x21e9c9['x'],_0x21e9c9['y'],_0x21e9c9['z']),$a['setValue'](_0x593f1e['x'],_0x593f1e['y'],_0x593f1e['z'],_0x593f1e['w']);}_0x56c1d1['setOrigin'](Re),_0x56c1d1['setRotatio'+'n']($a);}['syncEntity'+'ToBody'](){const _0x46cd2f=this['_body'];if(_0x46cd2f){if(this['_getEntity'+'Transform'](cs),_0x46cd2f['setWorldTr'+'ansform'](cs),this['_type']===Ua){const _0x31296a=_0x46cd2f['getMotionS'+'tate']();_0x31296a&&_0x31296a['setWorldTr'+'ansform'](cs);}_0x46cd2f['activate']();}}['_updateDyn'+'amic'](){const _0x189437=this['_body'];if(_0x189437['isActive']()){const _0x4496ff=_0x189437['getMotionS'+'tate']();if(_0x4496ff){const _0x3e8523=this['entity'];_0x4496ff['getWorldTr'+'ansform'](cs);const _0xe4148=cs['getOrigin'](),_0x588cd6=cs['getRotatio'+'n'](),_0x40a963=_0x3e8523['collision'];if(_0x40a963&&_0x40a963['_hasOffset']){const _0x2f9d08=_0x40a963['data']['linearOffs'+'et'],_0x45318f=_0x40a963['data']['angularOff'+'set'],_0x1b4c28=nO['copy'](_0x45318f)['invert'](),_0x500c10=aO['set'](_0x588cd6['x'](),_0x588cd6['y'](),_0x588cd6['z'](),_0x588cd6['w']())['mul'](_0x1b4c28);_0x500c10['transformV'+'ector'](_0x2f9d08,pc),_0x3e8523['setPositio'+'n'](_0xe4148['x']()-pc['x'],_0xe4148['y']()-pc['y'],_0xe4148['z']()-pc['z']),_0x3e8523['setRotatio'+'n'](_0x500c10);}else _0x3e8523['setPositio'+'n'](_0xe4148['x'](),_0xe4148['y'](),_0xe4148['z']()),_0x3e8523['setRotatio'+'n'](_0x588cd6['x'](),_0x588cd6['y'](),_0x588cd6['z'](),_0x588cd6['w']());}}}['_updateKin'+'ematic'](){const _0x2e3759=this['_body']['getMotionS'+'tate']();_0x2e3759&&(this['_getEntity'+'Transform'](cs),_0x2e3759['setWorldTr'+'ansform'](cs));}['teleport'](_0x5e757e,_0x3286e4,_0x375543,_0x4a01a3,_0x28032f,_0x1c76dc){_0x5e757e instanceof D?this['entity']['setPositio'+'n'](_0x5e757e):this['entity']['setPositio'+'n'](_0x5e757e,_0x3286e4,_0x375543),_0x3286e4 instanceof le?this['entity']['setRotatio'+'n'](_0x3286e4):_0x3286e4 instanceof D?this['entity']['setEulerAn'+'gles'](_0x3286e4):_0x4a01a3!==void(-0x48c*-0x4+-0x67d+-0x5*0x257)&&this['entity']['setEulerAn'+'gles'](_0x4a01a3,_0x28032f,_0x1c76dc),this['syncEntity'+'ToBody']();}['onEnable'](){this['_body']||this['createBody'](),this['enableSimu'+'lation']();}['onDisable'](){this['disableSim'+'ulation']();}}h(bs,'EVENT_CONT'+'ACT','contact'),h(bs,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(bs,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(bs,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(bs,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve'),h(bs,'order',-(0x13e3+0x445*-0x1+-0xf9d));class oO{constructor(){this['enabled']=!(-0x2*0x11d6+-0x413*0x7+0x4031);}}let Mi,Di;class bg{constructor(_0x29af44,_0x2ad240,_0xc984c2,_0x4a881d){h(this,'entity'),h(this,'point'),h(this,'normal'),h(this,'hitFractio'+'n'),(this['entity']=_0x29af44,this['point']=_0x2ad240,this['normal']=_0xc984c2,this['hitFractio'+'n']=_0x4a881d);}}class lO{constructor(_0x121a67,_0x5cf526,_0x48dbc0){h(this,'a'),h(this,'b'),h(this,'impulse'),h(this,'localPoint'+'A'),h(this,'localPoint'+'B'),h(this,'pointA'),h(this,'pointB'),h(this,'normal'),arguments['length']!==0x1*-0x200a+0x1f61+0xd*0xd?(this['a']=_0x121a67,this['b']=_0x5cf526,this['impulse']=_0x48dbc0['impulse'],this['localPoint'+'A']=_0x48dbc0['localPoint'],this['localPoint'+'B']=_0x48dbc0['localPoint'+'Other'],this['pointA']=_0x48dbc0['point'],this['pointB']=_0x48dbc0['pointOther'],this['normal']=_0x48dbc0['normal']):(this['a']=null,this['b']=null,this['impulse']=0x20*0x128+0x6d6*0x1+-0x2bd6,this['localPoint'+'A']=new D(),this['localPoint'+'B']=new D(),this['pointA']=new D(),this['pointB']=new D(),this['normal']=new D());}}class cO{constructor(_0x5b11b5=new D(),_0x42f09f=new D(),_0x4ac144=new D(),_0x1ba7c4=new D(),_0x499b13=new D(),_0x3f4741=-0x11f4*-0x2+-0x2168+-0x20*0x14){h(this,'localPoint'),h(this,'localPoint'+'Other'),h(this,'point'),h(this,'pointOther'),h(this,'normal'),h(this,'impulse'),(this['localPoint']=_0x5b11b5,this['localPoint'+'Other']=_0x42f09f,this['point']=_0x4ac144,this['pointOther']=_0x1ba7c4,this['normal']=_0x499b13,this['impulse']=_0x3f4741);}}class hO{constructor(_0x11e641,_0x12f36b){h(this,'other'),h(this,'contacts'),(this['other']=_0x11e641,this['contacts']=_0x12f36b);}}const bv=['enabled'];class Kp extends ct{constructor(_0x3c432){super(_0x3c432),h(this,'maxSubStep'+'s',-0x1ba6*0x1+-0x19*-0xd0+0x760),h(this,'fixedTimeS'+'tep',(-0x1*-0x162f+0x25be+0xec*-0x41)/(-0x1215+0x1207+0x4a)),h(this,'gravity',new D(0x714+0x1*-0xea2+-0x1*-0x78e,-(-0x5*-0x541+-0x1079*0x1+-0x31*0x33+0.8100000000000005),0x1098+0xc07*-0x3+0x1*0x137d)),h(this,'_gravityFl'+'oat32',new Float32Array(0xca2*0x2+0x168a+0x1*-0x2fcb)),h(this,'_dynamic',[]),h(this,'_kinematic',[]),h(this,'_triggers',[]),h(this,'_compounds',[]),(this['id']='rigidbody',this['_stats']=_0x3c432['stats']['frame'],this['ComponentT'+'ype']=bs,this['DataType']=oO,this['contactPoi'+'ntPool']=null,this['contactRes'+'ultPool']=null,this['singleCont'+'actResultP'+'ool']=null,this['schema']=bv,this['collisions']={},this['frameColli'+'sions']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this));}['onLibraryL'+'oaded'](){if(typeof Ammo<'u'){if(this['collisionC'+'onfigurati'+'on']=new Ammo['btDefaultC'+'ollisionCo'+'nfiguratio'+'n'](),this['dispatcher']=new Ammo['btCollisio'+'nDispatche'+'r'](this['collisionC'+'onfigurati'+'on']),this['overlappin'+'gPairCache']=new Ammo['btDbvtBroa'+'dphase'](),this['solver']=new Ammo['btSequenti'+'alImpulseC'+'onstraintS'+'olver'](),this['dynamicsWo'+'rld']=new Ammo['btDiscrete'+'DynamicsWo'+'rld'](this['dispatcher'],this['overlappin'+'gPairCache'],this['solver'],this['collisionC'+'onfigurati'+'on']),this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']){const _0x535059=Ammo['addFunctio'+'n'](this['_checkForC'+'ollisions']['bind'](this),'vif');this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack'](_0x535059);}else w['warn']('WARNING:\x20T'+'his\x20versio'+'n\x20of\x20ammo.'+'js\x20can\x20pot'+'entially\x20f'+'ail\x20to\x20rep'+'ort\x20contac'+'ts.\x20Please'+'\x20update\x20it'+'\x20to\x20the\x20la'+'test\x20versi'+'on.');Mi=new Ammo['btVector3'](),Di=new Ammo['btVector3'](),bs['onLibraryL'+'oaded'](),this['contactPoi'+'ntPool']=new sf(cO,0x1af*-0x17+0x8cc+0x1dee),this['contactRes'+'ultPool']=new sf(hO,0xfa4*-0x1+-0x22f4+0x3299*0x1),this['singleCont'+'actResultP'+'ool']=new sf(lO,0x1b3e+0x131d+-0x2e5a),this['app']['systems']['on']('update',this['onUpdate'],this);}else this['app']['systems']['off']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x399965,_0x51cac6,_0x3a9930){const _0x43570a=['mass','linearDamp'+'ing','angularDam'+'ping','linearFact'+'or','angularFac'+'tor','friction','rollingFri'+'ction','restitutio'+'n','type','group','mask'];for(const _0x3de5aa of _0x43570a)if(_0x51cac6['hasOwnProp'+'erty'](_0x3de5aa)){const _0x34a556=_0x51cac6[_0x3de5aa];Array['isArray'](_0x34a556)?_0x399965[_0x3de5aa]=new D(_0x34a556[-0x24da+0x734+0x5ee*0x5],_0x34a556[-0x2*-0x2a+0x31*0x7a+-0x17ad],_0x34a556[-0x358+0x18*0xf7+0x82*-0x27]):_0x399965[_0x3de5aa]=_0x34a556;}super['initialize'+'ComponentD'+'ata'](_0x399965,_0x51cac6,['enabled']);}['cloneCompo'+'nent'](_0x5a5d3d,_0x73303){const _0x42a9ff=_0x5a5d3d['rigidbody'],_0x2039c1={'enabled':_0x42a9ff['enabled'],'mass':_0x42a9ff['mass'],'linearDamping':_0x42a9ff['linearDamp'+'ing'],'angularDamping':_0x42a9ff['angularDam'+'ping'],'linearFactor':[_0x42a9ff['linearFact'+'or']['x'],_0x42a9ff['linearFact'+'or']['y'],_0x42a9ff['linearFact'+'or']['z']],'angularFactor':[_0x42a9ff['angularFac'+'tor']['x'],_0x42a9ff['angularFac'+'tor']['y'],_0x42a9ff['angularFac'+'tor']['z']],'friction':_0x42a9ff['friction'],'rollingFriction':_0x42a9ff['rollingFri'+'ction'],'restitution':_0x42a9ff['restitutio'+'n'],'type':_0x42a9ff['type'],'group':_0x42a9ff['group'],'mask':_0x42a9ff['mask']};return this['addCompone'+'nt'](_0x73303,_0x2039c1);}['onBeforeRe'+'move'](_0x123b61,_0x419f70){_0x419f70['enabled']&&(_0x419f70['enabled']=!(-0x19e*-0x9+0x1121+-0x1fae)),_0x419f70['body']&&(this['destroyBod'+'y'](_0x419f70['body']),_0x419f70['body']=null);}['addBody'](_0x16aa47,_0xff54c0,_0x30432e){_0xff54c0!==void(0x12ec+-0x5fd+-0x4d*0x2b)&&_0x30432e!==void(0x8d2+-0x21d*-0x11+-0x1d*0x18b)?this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x16aa47,_0xff54c0,_0x30432e):this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x16aa47);}['removeBody'](_0x1aecad){this['dynamicsWo'+'rld']['removeRigi'+'dBody'](_0x1aecad);}['createBody'](_0x326713,_0x2a8808,_0x30cf5c){const _0x58665a=new Ammo['btVector3'](0x2*0x60b+0x1aa+0x14*-0xb0,-0x2*0xfee+0x1953*0x1+-0xef*-0x7,0x19ea+0x1*0x2483+-0x14cf*0x3);_0x326713!==0x3*0x92c+0x1*-0xeb0+-0xcd4&&_0x2a8808['calculateL'+'ocalInerti'+'a'](_0x326713,_0x58665a);const _0x46f9fa=new Ammo['btDefaultM'+'otionState'](_0x30cf5c),_0x19d62f=new Ammo['btRigidBod'+'yConstruct'+'ionInfo'](_0x326713,_0x46f9fa,_0x2a8808,_0x58665a),_0x46c6d2=new Ammo['btRigidBod'+'y'](_0x19d62f);return Ammo['destroy'](_0x19d62f),Ammo['destroy'](_0x58665a),_0x46c6d2;}['destroyBod'+'y'](_0x3596b0){const _0x334a43=_0x3596b0['getMotionS'+'tate']();_0x334a43&&Ammo['destroy'](_0x334a43),Ammo['destroy'](_0x3596b0);}['raycastFir'+'st'](_0x4665dd,_0x2b0bea,_0x4c11b6={}){if(_0x4c11b6['filterTags']||_0x4c11b6['filterCall'+'back'])return _0x4c11b6['sort']=!(-0xec7+-0xe82+0x99*0x31),this['raycastAll'](_0x4665dd,_0x2b0bea,_0x4c11b6)[-0x1450+0xc*-0x32+0x16a8]||null;let _0x357a7f=null;Mi['setValue'](_0x4665dd['x'],_0x4665dd['y'],_0x4665dd['z']),Di['setValue'](_0x2b0bea['x'],_0x2b0bea['y'],_0x2b0bea['z']);const _0xfbcbbf=new Ammo['ClosestRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x4c11b6['filterColl'+'isionGroup']=='number'&&_0xfbcbbf['set_m_coll'+'isionFilte'+'rGroup'](_0x4c11b6['filterColl'+'isionGroup']),typeof _0x4c11b6['filterColl'+'isionMask']=='number'&&_0xfbcbbf['set_m_coll'+'isionFilte'+'rMask'](_0x4c11b6['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0xfbcbbf),_0xfbcbbf['hasHit']()){const _0x385b79=_0xfbcbbf['get_m_coll'+'isionObjec'+'t'](),_0x2bc7d4=Ammo['castObject'](_0x385b79,Ammo['btRigidBod'+'y']);if(_0x2bc7d4){const _0x578b3c=_0xfbcbbf['get_m_hitP'+'ointWorld'](),_0x18f489=_0xfbcbbf['get_m_hitN'+'ormalWorld']();_0x357a7f=new bg(_0x2bc7d4['entity'],new D(_0x578b3c['x'](),_0x578b3c['y'](),_0x578b3c['z']()),new D(_0x18f489['x'](),_0x18f489['y'](),_0x18f489['z']()),_0xfbcbbf['get_m_clos'+'estHitFrac'+'tion']());}}return Ammo['destroy'](_0xfbcbbf),_0x357a7f;}['raycastAll'](_0x2e688c,_0x2df4b9,_0x5321bc={}){w['assert'](Ammo['AllHitsRay'+'ResultCall'+'back'],'pc.RigidBo'+'dyComponen'+'tSystem#ra'+'ycastAll:\x20'+'Your\x20versi'+'on\x20of\x20ammo'+'.js\x20does\x20n'+'ot\x20expose\x20'+'Ammo.AllHi'+'tsRayResul'+'tCallback.'+'\x20Update\x20it'+'\x20to\x20latest'+'.');const _0xcf32a6=[];Mi['setValue'](_0x2e688c['x'],_0x2e688c['y'],_0x2e688c['z']),Di['setValue'](_0x2df4b9['x'],_0x2df4b9['y'],_0x2df4b9['z']);const _0x11430b=new Ammo['AllHitsRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x5321bc['filterColl'+'isionGroup']=='number'&&_0x11430b['set_m_coll'+'isionFilte'+'rGroup'](_0x5321bc['filterColl'+'isionGroup']),typeof _0x5321bc['filterColl'+'isionMask']=='number'&&_0x11430b['set_m_coll'+'isionFilte'+'rMask'](_0x5321bc['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x11430b),_0x11430b['hasHit']()){const _0x32e689=_0x11430b['get_m_coll'+'isionObjec'+'ts'](),_0xc1478c=_0x11430b['get_m_hitP'+'ointWorld'](),_0x1931cb=_0x11430b['get_m_hitN'+'ormalWorld'](),_0x104d43=_0x11430b['get_m_hitF'+'ractions'](),_0x3f7b7a=_0x32e689['size']();for(let _0x18d998=0x36*-0x90+0x18b4+0x5ac;_0x18d998<_0x3f7b7a;_0x18d998++){const _0x22c435=Ammo['castObject'](_0x32e689['at'](_0x18d998),Ammo['btRigidBod'+'y']);if(_0x22c435&&_0x22c435['entity']){if(_0x5321bc['filterTags']&&!_0x22c435['entity']['tags']['has'](..._0x5321bc['filterTags'])||_0x5321bc['filterCall'+'back']&&!_0x5321bc['filterCall'+'back'](_0x22c435['entity']))continue;const _0x2d01f6=_0xc1478c['at'](_0x18d998),_0x4132a3=_0x1931cb['at'](_0x18d998),_0x1839c7=new bg(_0x22c435['entity'],new D(_0x2d01f6['x'](),_0x2d01f6['y'](),_0x2d01f6['z']()),new D(_0x4132a3['x'](),_0x4132a3['y'](),_0x4132a3['z']()),_0x104d43['at'](_0x18d998));_0xcf32a6['push'](_0x1839c7);}}_0x5321bc['sort']&&_0xcf32a6['sort']((_0x495f23,_0x37fe5f)=>_0x495f23['hitFractio'+'n']-_0x37fe5f['hitFractio'+'n']);}return Ammo['destroy'](_0x11430b),_0xcf32a6;}['_storeColl'+'ision'](_0x121748,_0x30d19e){let _0x25e49e=!(-0x1*0x2109+-0x13e+-0x1124*-0x2);const _0x43d76d=_0x121748['getGuid']();return this['collisions'][_0x43d76d]=this['collisions'][_0x43d76d]||{'others':[],'entity':_0x121748},this['collisions'][_0x43d76d]['others']['indexOf'](_0x30d19e)<0x1fbd+0x3*0x6c9+-0x3418*0x1&&(this['collisions'][_0x43d76d]['others']['push'](_0x30d19e),_0x25e49e=!(0x128+0x1feb*0x1+0x1*-0x2113)),this['frameColli'+'sions'][_0x43d76d]=this['frameColli'+'sions'][_0x43d76d]||{'others':[],'entity':_0x121748},this['frameColli'+'sions'][_0x43d76d]['others']['push'](_0x30d19e),_0x25e49e;}['_createCon'+'tactPointF'+'romAmmo'](_0x58297a){const _0x300e62=_0x58297a['get_m_loca'+'lPointA'](),_0xa5d2c2=_0x58297a['get_m_loca'+'lPointB'](),_0x3df9cc=_0x58297a['getPositio'+'nWorldOnA'](),_0xdd813c=_0x58297a['getPositio'+'nWorldOnB'](),_0x46b43e=_0x58297a['get_m_norm'+'alWorldOnB'](),_0xb00033=this['contactPoi'+'ntPool']['allocate']();return _0xb00033['localPoint']['set'](_0x300e62['x'](),_0x300e62['y'](),_0x300e62['z']()),_0xb00033['localPoint'+'Other']['set'](_0xa5d2c2['x'](),_0xa5d2c2['y'](),_0xa5d2c2['z']()),_0xb00033['point']['set'](_0x3df9cc['x'](),_0x3df9cc['y'](),_0x3df9cc['z']()),_0xb00033['pointOther']['set'](_0xdd813c['x'](),_0xdd813c['y'](),_0xdd813c['z']()),_0xb00033['normal']['set'](_0x46b43e['x'](),_0x46b43e['y'](),_0x46b43e['z']()),_0xb00033['impulse']=_0x58297a['getApplied'+'Impulse'](),_0xb00033;}['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x369d2e){const _0x2f67d7=_0x369d2e['get_m_loca'+'lPointA'](),_0x1d34dc=_0x369d2e['get_m_loca'+'lPointB'](),_0x849469=_0x369d2e['getPositio'+'nWorldOnA'](),_0x5e646e=_0x369d2e['getPositio'+'nWorldOnB'](),_0x536bca=_0x369d2e['get_m_norm'+'alWorldOnB'](),_0x17881b=this['contactPoi'+'ntPool']['allocate']();return _0x17881b['localPoint'+'Other']['set'](_0x2f67d7['x'](),_0x2f67d7['y'](),_0x2f67d7['z']()),_0x17881b['localPoint']['set'](_0x1d34dc['x'](),_0x1d34dc['y'](),_0x1d34dc['z']()),_0x17881b['pointOther']['set'](_0x849469['x'](),_0x849469['y'](),_0x849469['z']()),_0x17881b['point']['set'](_0x5e646e['x'](),_0x5e646e['y'](),_0x5e646e['z']()),_0x17881b['normal']['set'](_0x536bca['x'](),_0x536bca['y'](),_0x536bca['z']()),_0x17881b['impulse']=_0x369d2e['getApplied'+'Impulse'](),_0x17881b;}['_createSin'+'gleContact'+'Result'](_0x276392,_0x2070f3,_0x169a4c){const _0x4f47db=this['singleCont'+'actResultP'+'ool']['allocate']();return _0x4f47db['a']=_0x276392,_0x4f47db['b']=_0x2070f3,_0x4f47db['localPoint'+'A']=_0x169a4c['localPoint'],_0x4f47db['localPoint'+'B']=_0x169a4c['localPoint'+'Other'],_0x4f47db['pointA']=_0x169a4c['point'],_0x4f47db['pointB']=_0x169a4c['pointOther'],_0x4f47db['normal']=_0x169a4c['normal'],_0x4f47db['impulse']=_0x169a4c['impulse'],_0x4f47db;}['_createCon'+'tactResult'](_0x1e79d2,_0x18972e){const _0x2c5f27=this['contactRes'+'ultPool']['allocate']();return _0x2c5f27['other']=_0x1e79d2,_0x2c5f27['contacts']=_0x18972e,_0x2c5f27;}['_cleanOldC'+'ollisions'](){for(const _0x27d06d in this['collisions'])if(this['collisions']['hasOwnProp'+'erty'](_0x27d06d)){const _0x246226=this['frameColli'+'sions'][_0x27d06d],_0x175073=this['collisions'][_0x27d06d],_0x3e4c1d=_0x175073['entity'],_0x234dc5=_0x3e4c1d['collision'],_0x5d3c27=_0x3e4c1d['rigidbody'],_0x51bde8=_0x175073['others'];let _0x237ecd=_0x51bde8['length'];for(;_0x237ecd--;){const _0x39cccf=_0x51bde8[_0x237ecd];(!_0x246226||_0x246226['others']['indexOf'](_0x39cccf)<0x4b2*0x5+0x3b*-0x14+0x3*-0x64a)&&(_0x51bde8['splice'](_0x237ecd,-0x1*0x18e5+0x1b56+-0x3*0xd0),_0x3e4c1d['trigger']?(_0x234dc5&&_0x234dc5['fire']('triggerlea'+'ve',_0x39cccf),_0x39cccf['rigidbody']&&_0x39cccf['rigidbody']['fire']('triggerlea'+'ve',_0x3e4c1d)):_0x39cccf['trigger']||(_0x5d3c27&&_0x5d3c27['fire']('collisione'+'nd',_0x39cccf),_0x234dc5&&_0x234dc5['fire']('collisione'+'nd',_0x39cccf)));}_0x51bde8['length']===0x1d6b+-0x1981*0x1+-0x3ea&&delete this['collisions'][_0x27d06d];}}['_hasContac'+'tEvent'](_0x88ff0e){const _0x8037b3=_0x88ff0e['collision'];if(_0x8037b3&&(_0x8037b3['hasEvent']('collisions'+'tart')||_0x8037b3['hasEvent']('collisione'+'nd')||_0x8037b3['hasEvent']('contact')))return!(-0x1210+-0x103*0x23+-0x27*-0x15f);const _0x157f56=_0x88ff0e['rigidbody'];return _0x157f56&&(_0x157f56['hasEvent']('collisions'+'tart')||_0x157f56['hasEvent']('collisione'+'nd')||_0x157f56['hasEvent']('contact'));}['_checkForC'+'ollisions'](_0x40ef70,_0x2a8f34){const _0x25c085=Ammo['wrapPointe'+'r'](_0x40ef70,Ammo['btDynamics'+'World'])['getDispatc'+'her'](),_0x2adf19=_0x25c085['getNumMani'+'folds']();this['frameColli'+'sions']={};for(let _0x5cb2ed=-0x26f*-0xb+0x124d+-0x2d12;_0x5cb2ed<_0x2adf19;_0x5cb2ed++){const _0x3eeba1=_0x25c085['getManifol'+'dByIndexIn'+'ternal'](_0x5cb2ed),_0x420785=_0x3eeba1['getBody0'](),_0x67cfa=_0x3eeba1['getBody1'](),_0xe6e367=Ammo['castObject'](_0x420785,Ammo['btRigidBod'+'y']),_0x50657a=Ammo['castObject'](_0x67cfa,Ammo['btRigidBod'+'y']),_0x443461=_0xe6e367['entity'],_0x45ade3=_0x50657a['entity'];if(!_0x443461||!_0x45ade3)continue;const _0x41243b=_0xe6e367['getCollisi'+'onFlags'](),_0x598f79=_0x50657a['getCollisi'+'onFlags'](),_0x2ebb08=_0x3eeba1['getNumCont'+'acts'](),_0x392928=[],_0x2e8cef=[];let _0x17ed33;if(_0x2ebb08>-0xbd2+-0x1c24+0x27f6){if(_0x41243b&go||_0x598f79&go){const _0x234921=_0x443461['collision']&&(_0x443461['collision']['hasEvent']('triggerent'+'er')||_0x443461['collision']['hasEvent']('triggerlea'+'ve')),_0x437a60=_0x45ade3['collision']&&(_0x45ade3['collision']['hasEvent']('triggerent'+'er')||_0x45ade3['collision']['hasEvent']('triggerlea'+'ve')),_0x506040=_0x443461['rigidbody']&&(_0x443461['rigidbody']['hasEvent']('triggerent'+'er')||_0x443461['rigidbody']['hasEvent']('triggerlea'+'ve')),_0x1d9186=_0x45ade3['rigidbody']&&(_0x45ade3['rigidbody']['hasEvent']('triggerent'+'er')||_0x45ade3['rigidbody']['hasEvent']('triggerlea'+'ve'));_0x234921&&(_0x17ed33=this['_storeColl'+'ision'](_0x443461,_0x45ade3),_0x17ed33&&!(_0x598f79&go)&&_0x443461['collision']['fire']('triggerent'+'er',_0x45ade3)),_0x437a60&&(_0x17ed33=this['_storeColl'+'ision'](_0x45ade3,_0x443461),_0x17ed33&&!(_0x41243b&go)&&_0x45ade3['collision']['fire']('triggerent'+'er',_0x443461)),_0x506040&&(_0x17ed33||(_0x17ed33=this['_storeColl'+'ision'](_0x45ade3,_0x443461)),_0x17ed33&&_0x443461['rigidbody']['fire']('triggerent'+'er',_0x45ade3)),_0x1d9186&&(_0x17ed33||(_0x17ed33=this['_storeColl'+'ision'](_0x443461,_0x45ade3)),_0x17ed33&&_0x45ade3['rigidbody']['fire']('triggerent'+'er',_0x443461));}else{const _0x498cf1=this['_hasContac'+'tEvent'](_0x443461),_0x4f52b6=this['_hasContac'+'tEvent'](_0x45ade3),_0x9d1e69=this['hasEvent']('contact');if(_0x9d1e69||_0x498cf1||_0x4f52b6){for(let _0x2f26a7=-0x269*0x2+-0x94*-0x11+-0x502;_0x2f26a7<_0x2ebb08;_0x2f26a7++){const _0xe12ed6=_0x3eeba1['getContact'+'Point'](_0x2f26a7),_0x5d1776=this['_createCon'+'tactPointF'+'romAmmo'](_0xe12ed6);if(_0x498cf1||_0x4f52b6){_0x392928['push'](_0x5d1776);const _0x3e845d=this['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0xe12ed6);_0x2e8cef['push'](_0x3e845d);}if(_0x9d1e69){const _0x3c3c1f=this['_createSin'+'gleContact'+'Result'](_0x443461,_0x45ade3,_0x5d1776);this['fire']('contact',_0x3c3c1f);}}if(_0x498cf1){const _0x123f95=this['_createCon'+'tactResult'](_0x45ade3,_0x392928);_0x17ed33=this['_storeColl'+'ision'](_0x443461,_0x45ade3),_0x443461['collision']&&(_0x443461['collision']['fire']('contact',_0x123f95),_0x17ed33&&_0x443461['collision']['fire']('collisions'+'tart',_0x123f95)),_0x443461['rigidbody']&&(_0x443461['rigidbody']['fire']('contact',_0x123f95),_0x17ed33&&_0x443461['rigidbody']['fire']('collisions'+'tart',_0x123f95));}if(_0x4f52b6){const _0x25d7ff=this['_createCon'+'tactResult'](_0x443461,_0x2e8cef);_0x17ed33=this['_storeColl'+'ision'](_0x45ade3,_0x443461),_0x45ade3['collision']&&(_0x45ade3['collision']['fire']('contact',_0x25d7ff),_0x17ed33&&_0x45ade3['collision']['fire']('collisions'+'tart',_0x25d7ff)),_0x45ade3['rigidbody']&&(_0x45ade3['rigidbody']['fire']('contact',_0x25d7ff),_0x17ed33&&_0x45ade3['rigidbody']['fire']('collisions'+'tart',_0x25d7ff));}}}}}this['_cleanOldC'+'ollisions'](),this['contactPoi'+'ntPool']['freeAll'](),this['contactRes'+'ultPool']['freeAll'](),this['singleCont'+'actResultP'+'ool']['freeAll']();}['onUpdate'](_0x207341){let _0x382c47,_0x3cd6fa;this['_stats']['physicsSta'+'rt']=de(),this['_gravityFl'+'oat32'][-0x1c09*0x1+-0xe*-0x112+0xd0d]=this['gravity']['x'],this['_gravityFl'+'oat32'][-0x67*0x5e+-0x1564+-0x3b37*-0x1]=this['gravity']['y'],this['_gravityFl'+'oat32'][-0x24b4+-0x1da*-0x2+0x1a*0x145]=this['gravity']['z'];const _0x2c07bf=this['dynamicsWo'+'rld']['getGravity']();(_0x2c07bf['x']()!==this['_gravityFl'+'oat32'][0x1280*-0x2+0x1f9c+-0x3c*-0x17]||_0x2c07bf['y']()!==this['_gravityFl'+'oat32'][0x2*0x771+-0x89*-0x1+-0xf6a]||_0x2c07bf['z']()!==this['_gravityFl'+'oat32'][-0x703+0x1081+-0x97c])&&(_0x2c07bf['setValue'](this['gravity']['x'],this['gravity']['y'],this['gravity']['z']),this['dynamicsWo'+'rld']['setGravity'](_0x2c07bf));const _0x2f4a60=this['_triggers'];for(_0x382c47=0x11dc+0x1e2d+0x3009*-0x1,_0x3cd6fa=_0x2f4a60['length'];_0x382c47<_0x3cd6fa;_0x382c47++)_0x2f4a60[_0x382c47]['updateTran'+'sform']();const _0x52d217=this['_compounds'];for(_0x382c47=0x1bb7*0x1+-0x7d5+0xa*-0x1fd,_0x3cd6fa=_0x52d217['length'];_0x382c47<_0x3cd6fa;_0x382c47++)_0x52d217[_0x382c47]['_updateCom'+'pound']();const _0x13b29b=this['_kinematic'];for(_0x382c47=-0xb3d+0x113*0xd+-0x15d*0x2,_0x3cd6fa=_0x13b29b['length'];_0x382c47<_0x3cd6fa;_0x382c47++)_0x13b29b[_0x382c47]['_updateKin'+'ematic']();this['dynamicsWo'+'rld']['stepSimula'+'tion'](_0x207341,this['maxSubStep'+'s'],this['fixedTimeS'+'tep']);const _0x4e4a6d=this['_dynamic'];for(_0x382c47=0xbd1+-0xc7c+0xab,_0x3cd6fa=_0x4e4a6d['length'];_0x382c47<_0x3cd6fa;_0x382c47++)_0x4e4a6d[_0x382c47]['_updateDyn'+'amic']();this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']||this['_checkForC'+'ollisions'](Ammo['getPointer'](this['dynamicsWo'+'rld']),_0x207341),this['_stats']['physicsTim'+'e']=de()-this['_stats']['physicsSta'+'rt'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),typeof Ammo<'u'&&(Ammo['destroy'](this['dynamicsWo'+'rld']),Ammo['destroy'](this['solver']),Ammo['destroy'](this['overlappin'+'gPairCache']),Ammo['destroy'](this['dispatcher']),Ammo['destroy'](this['collisionC'+'onfigurati'+'on']),Ammo['destroy'](Mi),Ammo['destroy'](Di),this['dynamicsWo'+'rld']=null,this['solver']=null,this['overlappin'+'gPairCache']=null,this['dispatcher']=null,this['collisionC'+'onfigurati'+'on']=null,Mi=null,Di=null,bs['onAppDestr'+'oy']());}}h(Kp,'EVENT_CONT'+'ACT','contact'),we['_buildAcce'+'ssors'](bs['prototype'],bv);const Xa='none',dO='blend',Ag=new te();class Av extends we{constructor(_0x2a53d1,_0x1d386c){super(_0x2a53d1,_0x1d386c),this['_resolutio'+'n']=new J(-0x7*-0x191+-0x19ec+0x1175,0x4*0x3d7+0xb3f+0x1*-0x195b),this['_reference'+'Resolution']=new J(-0x4f*0x45+-0x10cf*0x1+0x289a,0x1e5c+-0x1676+0x17*-0x4a),this['_scaleMode']=Xa,this['scale']=0x339+-0x1*0xed7+0xb9f,this['_scaleBlen'+'d']=0x78e*-0x4+0x90a+0xa97*0x2+0.5,this['_priority']=0x1*-0x2686+-0x119*-0x1f+0x47f,this['_screenSpa'+'ce']=!(0x1035*-0x1+-0x1962+0x58*0x79),this['cull']=this['_screenSpa'+'ce'],this['_screenMat'+'rix']=new te(),this['_elements']=new Set(),_0x2a53d1['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this);}['syncDrawOr'+'der'](){this['system']['queueDrawO'+'rderSync'](this['entity']['getGuid'](),this['_processDr'+'awOrderSyn'+'c'],this);}['_recurseDr'+'awOrderSyn'+'c'](_0x1f2f9f,_0x5ebac0){var _0x59eedc;if(!(_0x1f2f9f instanceof lt))return _0x5ebac0;if(_0x1f2f9f['element']){const _0x20a5ca=_0x1f2f9f['element']['drawOrder'];_0x1f2f9f['element']['drawOrder']=_0x5ebac0++,_0x1f2f9f['element']['_batchGrou'+'pId']>=-0x1*0x1421+0xac5*-0x1+0x1ee6&&_0x20a5ca!==_0x1f2f9f['element']['drawOrder']&&((_0x59eedc=this['system']['app']['batcher'])==null||_0x59eedc['markGroupD'+'irty'](_0x1f2f9f['element']['_batchGrou'+'pId']));}_0x1f2f9f['particlesy'+'stem']&&(_0x1f2f9f['particlesy'+'stem']['drawOrder']=_0x5ebac0++);const _0x10253e=_0x1f2f9f['children'];for(let _0x22fa6b=0x55d+-0x1*-0x20ab+-0x2608;_0x22fa6b<_0x10253e['length'];_0x22fa6b++)_0x5ebac0=this['_recurseDr'+'awOrderSyn'+'c'](_0x10253e[_0x22fa6b],_0x5ebac0);return _0x5ebac0;}['_processDr'+'awOrderSyn'+'c'](){this['_recurseDr'+'awOrderSyn'+'c'](this['entity'],-0xa5a+0x1e8a+0x142f*-0x1),this['fire']('syncdrawor'+'der');}['_calcProje'+'ctionMatri'+'x'](){const _0x51406e=this['_resolutio'+'n']['x']/this['scale'],_0x368ede=this['_resolutio'+'n']['y']/this['scale'],_0x46b45a=-0x21eb+0x1b85+0x3*0x222,_0x170efe=_0x51406e,_0x33cfbe=-_0x368ede;this['_screenMat'+'rix']['setOrtho'](_0x46b45a,_0x170efe,_0x33cfbe,0xe6b*-0x1+-0x5cc+0x45*0x4b,0x1f5b*0x1+0x2224+-0x417e*0x1,-(-0x1*0x255a+-0x1*-0x501+0x205a)),this['_screenSpa'+'ce']||(Ag['setScale']((-0xd8e+-0x11aa+-0x12*-0x1bc+0.5)*_0x51406e,(-0x4c8*0x4+-0x2f*0xd+0x1*0x1583+0.5)*_0x368ede,0x115*-0x9+0x1*0x116a+-0x7ac),this['_screenMat'+'rix']['mul2'](Ag,this['_screenMat'+'rix']));}['_updateSca'+'le'](){this['scale']=this['_calcScale'](this['_resolutio'+'n'],this['referenceR'+'esolution']);}['_calcScale'](_0x1d3ea2,_0x2f7e1a){const _0x2ef452=Math['log2']((_0x1d3ea2['x']||0xd*0x293+0x8f6*0x1+-0x2a6c)/_0x2f7e1a['x']),_0x24c184=Math['log2']((_0x1d3ea2['y']||0x1679*0x1+0x142d+-0x2aa5)/_0x2f7e1a['y']);return Math['pow'](-0x9f+-0x1*-0xb67+-0xac6,_0x2ef452*(0x22ed*0x1+0x80b*-0x4+0x58*-0x8-this['_scaleBlen'+'d'])+_0x24c184*this['_scaleBlen'+'d']);}['_onResize'](_0x5351d7,_0x5672ca){this['_screenSpa'+'ce']&&(this['_resolutio'+'n']['set'](_0x5351d7,_0x5672ca),this['resolution']=this['_resolutio'+'n']);}['_bindEleme'+'nt'](_0x1d3b57){this['_elements']['add'](_0x1d3b57);}['_unbindEle'+'ment'](_0x537676){this['_elements']['delete'](_0x537676);}['onRemove'](){this['system']['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['fire']('remove'),this['_elements']['forEach'](_0x2999c2=>_0x2999c2['_onScreenR'+'emove']()),this['_elements']['clear'](),this['off']();}set['resolution'](_0x156c08){this['_screenSpa'+'ce']?this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']):this['_resolutio'+'n']['set'](_0x156c08['x'],_0x156c08['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:resolu'+'tion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x4f1a92=>_0x4f1a92['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['resolution'](){return this['_resolutio'+'n'];}set['referenceR'+'esolution'](_0x207d25){this['_reference'+'Resolution']['set'](_0x207d25['x'],_0x207d25['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:refere'+'nceresolut'+'ion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x1b7b23=>_0x1b7b23['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['referenceR'+'esolution'](){return this['_scaleMode']===Xa?this['_resolutio'+'n']:this['_reference'+'Resolution'];}set['screenSpac'+'e'](_0x37ad8f){this['_screenSpa'+'ce']=_0x37ad8f,this['_screenSpa'+'ce']&&this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']),this['resolution']=this['_resolutio'+'n'],this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:screen'+'space',this['_screenSpa'+'ce']),this['_elements']['forEach'](_0x5444f3=>_0x5444f3['_onScreenS'+'paceChange']());}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['scaleMode'](_0x449d9d){_0x449d9d!==Xa&&_0x449d9d!==dO&&(_0x449d9d=Xa),!this['_screenSpa'+'ce']&&_0x449d9d!==Xa&&(_0x449d9d=Xa),this['_scaleMode']=_0x449d9d,this['resolution']=this['_resolutio'+'n'],this['fire']('set:scalem'+'ode',this['_scaleMode']);}get['scaleMode'](){return this['_scaleMode'];}set['scaleBlend'](_0x3ab405){this['_scaleBlen'+'d']=_0x3ab405,this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:scaleb'+'lend',this['_scaleBlen'+'d']),this['_elements']['forEach'](_0x5df678=>_0x5df678['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['scaleBlend'](){return this['_scaleBlen'+'d'];}set['priority'](_0x5ab344){_0x5ab344>-0x7*0x4ca+-0xa95+-0x17*-0x1f6&&(w['warn']('Clamping\x20s'+'creen\x20prio'+'rity\x20from\x20'+_0x5ab344+'\x20to\x20255'),_0x5ab344=-0x2bb*0x7+-0xf8f+0x18d*0x17),this['_priority']!==_0x5ab344&&(this['_priority']=_0x5ab344,this['syncDrawOr'+'der']());}get['priority'](){return this['_priority'];}}class fO{constructor(){this['enabled']=!(-0x3ce+-0x86*-0x42+-0x1ebe);}}const fu=['enabled'];class uO extends ct{constructor(_0x256024){super(_0x256024),this['id']='screen',this['ComponentT'+'ype']=Av,this['DataType']=fO,this['schema']=fu,this['windowReso'+'lution']=new J(),this['_drawOrder'+'SyncQueue']=new D0(),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['initialize'+'ComponentD'+'ata'](_0x740cb1,_0x41377c,_0x51d99c){_0x41377c['priority']!==void(-0x27*0x81+0x1*0x25f2+-0x1*0x124b)&&(_0x740cb1['priority']=_0x41377c['priority']),_0x41377c['screenSpac'+'e']!==void(0xc3+-0x4e5+0x17*0x2e)&&(_0x740cb1['screenSpac'+'e']=_0x41377c['screenSpac'+'e']),_0x740cb1['cull']=_0x740cb1['screenSpac'+'e'],_0x41377c['scaleMode']!==void(-0x3*0x464+0x10e6+-0x35*0x12)&&(_0x740cb1['scaleMode']=_0x41377c['scaleMode']),_0x41377c['scaleBlend']!==void(0x179f*-0x1+-0xf7*0x1e+0x3491)&&(_0x740cb1['scaleBlend']=_0x41377c['scaleBlend']),_0x41377c['resolution']!==void(-0x214e+-0x338+0x1*0x2486)&&(_0x41377c['resolution']instanceof J?_0x740cb1['_resolutio'+'n']['copy'](_0x41377c['resolution']):_0x740cb1['_resolutio'+'n']['set'](_0x41377c['resolution'][0xa*0x65+0x997+-0x7*0x1ef],_0x41377c['resolution'][0x1d80+0x272*-0x3+-0x1629]),_0x740cb1['resolution']=_0x740cb1['_resolutio'+'n']),_0x41377c['referenceR'+'esolution']!==void(0x99f+0x1792+0x1d*-0x125)&&(_0x41377c['referenceR'+'esolution']instanceof J?_0x740cb1['_reference'+'Resolution']['copy'](_0x41377c['referenceR'+'esolution']):_0x740cb1['_reference'+'Resolution']['set'](_0x41377c['referenceR'+'esolution'][0x142f+0x4fc+-0x1*0x192b],_0x41377c['referenceR'+'esolution'][-0x1*0xf6d+0x1*-0x244e+-0x2*-0x19de]),_0x740cb1['referenceR'+'esolution']=_0x740cb1['_reference'+'Resolution']),_0x740cb1['syncDrawOr'+'der'](),super['initialize'+'ComponentD'+'ata'](_0x740cb1,_0x41377c,fu);}['destroy'](){super['destroy'](),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this);}['_onUpdate'](_0x65cd77){const _0x91bc03=this['store'];for(const _0x4bb1ed in _0x91bc03)_0x91bc03[_0x4bb1ed]['entity']['screen']['update']&&_0x91bc03[_0x4bb1ed]['entity']['screen']['update'](_0x65cd77);}['_onResize'](_0x3a0370,_0x4ec636){this['windowReso'+'lution']['x']=_0x3a0370,this['windowReso'+'lution']['y']=_0x4ec636;}['cloneCompo'+'nent'](_0x2a41e7,_0x575264){const _0x55a2b9=_0x2a41e7['screen'];return this['addCompone'+'nt'](_0x575264,{'enabled':_0x55a2b9['enabled'],'screenSpace':_0x55a2b9['screenSpac'+'e'],'scaleMode':_0x55a2b9['scaleMode'],'resolution':_0x55a2b9['resolution']['clone'](),'referenceResolution':_0x55a2b9['referenceR'+'esolution']['clone']()});}['onRemoveCo'+'mponent'](_0x3f9765,_0x56c7cc){_0x56c7cc['onRemove']();}['processDra'+'wOrderSync'+'Queue'](){const _0x50d892=this['_drawOrder'+'SyncQueue']['list']();for(let _0x579109=-0x13c*0x13+-0x18bc+0x3030;_0x579109<_0x50d892['length'];_0x579109++){const _0x10e28c=_0x50d892[_0x579109];_0x10e28c['callback']['call'](_0x10e28c['scope']);}this['_drawOrder'+'SyncQueue']['clear']();}['queueDrawO'+'rderSync'](_0x1c3102,_0xa2aeb3,_0x36c4fb){this['_drawOrder'+'SyncQueue']['list']()['length']||this['app']['once']('prerender',this['processDra'+'wOrderSync'+'Queue'],this),this['_drawOrder'+'SyncQueue']['has'](_0x1c3102)||this['_drawOrder'+'SyncQueue']['push'](_0x1c3102,{'callback':_0xa2aeb3,'scope':_0x36c4fb});}}we['_buildAcce'+'ssors'](Av['prototype'],fu);const or=new J(),Cg=new D(),Br=new wn(),Pg=new _S(),Mg=new D(),uo=new D(),pO=new le(),mO={'x':'y','y':'x'};class Do extends me{constructor(_0x1af68c,_0x402523){if(super(),!_0x1af68c||!(_0x1af68c instanceof hs))throw new Error('Element\x20wa'+'s\x20null\x20or\x20'+'not\x20an\x20Ele'+'mentCompon'+'ent');if(_0x402523&&_0x402523!=='x'&&_0x402523!=='y')throw new Error('Unrecogniz'+'ed\x20axis:\x20'+_0x402523);this['_element']=_0x1af68c,this['_app']=_0x1af68c['system']['app'],this['_axis']=_0x402523||null,this['_enabled']=!(-0x7*0xda+-0xc6*-0x1b+-0xeec),this['_dragScale']=new D(),this['_dragStart'+'MousePosit'+'ion']=new D(),this['_dragStart'+'HandlePosi'+'tion']=new D(),this['_deltaMous'+'ePosition']=new D(),this['_deltaHand'+'lePosition']=new D(),this['_isDraggin'+'g']=!(0x2312+0x297+-0x25a8),this['_toggleLif'+'ecycleList'+'eners']('on');}['_toggleLif'+'ecycleList'+'eners'](_0x3d2071){this['_element'][_0x3d2071]('mousedown',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x3d2071]('touchstart',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x3d2071]('selectstar'+'t',this['_onMouseDo'+'wnOrTouchS'+'tart'],this);}['_toggleDra'+'gListeners'](_0x49e391){const _0x19b011=_0x49e391==='on';this['_hasDragLi'+'steners']&&_0x19b011||(this['_app']['mouse']&&(this['_element'][_0x49e391]('mousemove',this['_onMove'],this),this['_element'][_0x49e391]('mouseup',this['_onMouseUp'+'OrTouchEnd'],this)),Me['touch']&&(this['_element'][_0x49e391]('touchmove',this['_onMove'],this),this['_element'][_0x49e391]('touchend',this['_onMouseUp'+'OrTouchEnd'],this),this['_element'][_0x49e391]('touchcance'+'l',this['_onMouseUp'+'OrTouchEnd'],this)),this['_element'][_0x49e391]('selectmove',this['_onMove'],this),this['_element'][_0x49e391]('selectend',this['_onMouseUp'+'OrTouchEnd'],this),this['_hasDragLi'+'steners']=_0x19b011);}['_onMouseDo'+'wnOrTouchS'+'tart'](_0x16e2c7){if(this['_element']&&!this['_isDraggin'+'g']&&this['enabled']){this['_dragCamer'+'a']=_0x16e2c7['camera'],this['_calculate'+'DragScale']();const _0x1ce372=this['_screenToL'+'ocal'](_0x16e2c7);_0x1ce372&&(this['_toggleDra'+'gListeners']('on'),this['_isDraggin'+'g']=!(-0x22a9+0x2200+-0xd*-0xd),this['_dragStart'+'MousePosit'+'ion']['copy'](_0x1ce372),this['_dragStart'+'HandlePosi'+'tion']['copy'](this['_element']['entity']['getLocalPo'+'sition']()),this['fire']('drag:start'));}}['_onMouseUp'+'OrTouchEnd'](){this['_isDraggin'+'g']&&(this['_isDraggin'+'g']=!(-0x1*0xd29+0x7*-0x3da+0x2820),this['_toggleDra'+'gListeners']('off'),this['fire']('drag:end'));}['_screenToL'+'ocal'](_0x4af36b){return _0x4af36b['inputSourc'+'e']?Br['set'](_0x4af36b['inputSourc'+'e']['getOrigin'](),_0x4af36b['inputSourc'+'e']['getDirecti'+'on']()):(this['_determine'+'InputPosit'+'ion'](_0x4af36b),this['_chooseRay'+'OriginAndD'+'irection']()),Mg['copy'](this['_element']['entity']['forward'])['mulScalar'](-(0xa*-0x1bf+-0x5*-0x4af+-0x5f4)),Pg['setFromPoi'+'ntNormal'](this['_element']['entity']['getPositio'+'n'](),Mg),Pg['intersects'+'Ray'](Br,uo)?(pO['copy'](this['_element']['entity']['getRotatio'+'n']())['invert']()['transformV'+'ector'](uo,uo),uo['mul'](this['_dragScale']),uo):null;}['_determine'+'InputPosit'+'ion'](_0x57ad13){const _0x59fbc5=this['_app']['graphicsDe'+'vice']['maxPixelRa'+'tio'];typeof _0x57ad13['x']<'u'&&typeof _0x57ad13['y']<'u'?(or['x']=_0x57ad13['x']*_0x59fbc5,or['y']=_0x57ad13['y']*_0x59fbc5):_0x57ad13['changedTou'+'ches']?(or['x']=_0x57ad13['changedTou'+'ches'][0xb19+-0x3*0x96f+0x5bc*0x3]['x']*_0x59fbc5,or['y']=_0x57ad13['changedTou'+'ches'][-0x25*0xc1+-0xf07*-0x1+-0x6*-0x225]['y']*_0x59fbc5):console['warn']('Could\x20not\x20'+'determine\x20'+'position\x20f'+'rom\x20input\x20'+'event');}['_chooseRay'+'OriginAndD'+'irection'](){this['_element']['screen']&&this['_element']['screen']['screen']['screenSpac'+'e']?(Br['origin']['set'](or['x'],-or['y'],-0x1*0xd91+-0x9*0x2db+0x2744),Br['direction']['copy'](D['FORWARD'])):(Cg['copy'](this['_dragCamer'+'a']['screenToWo'+'rld'](or['x'],or['y'],-0x2*0x3b7+0x1102*-0x1+0x1871*0x1)),Br['origin']['copy'](this['_dragCamer'+'a']['entity']['getPositio'+'n']()),Br['direction']['copy'](Cg)['sub'](Br['origin'])['normalize']());}['_calculate'+'DragScale'](){let _0x1e7a5b=this['_element']['entity']['parent'];const _0x36d00b=this['_element']['screen']&&this['_element']['screen']['screen'],_0x19f042=_0x36d00b&&_0x36d00b['screenSpac'+'e'],_0x35540a=_0x19f042?_0x36d00b['scale']:-0x2*-0x131d+0x7*-0x48b+-0x66c,_0xae0f4b=this['_dragScale'];for(_0xae0f4b['set'](_0x35540a,_0x35540a,_0x35540a);_0x1e7a5b&&(_0xae0f4b['mul'](_0x1e7a5b['getLocalSc'+'ale']()),_0x1e7a5b=_0x1e7a5b['parent'],!(_0x19f042&&_0x1e7a5b['screen'])););_0xae0f4b['x']=(0x11db+-0x2c5*-0x2+0xc*-0x1f3)/_0xae0f4b['x'],_0xae0f4b['y']=(-0x488+0x15f6+0x3*-0x5cf)/_0xae0f4b['y'],_0xae0f4b['z']=-0x266c+-0x10cf+0x373b;}['_onMove'](_0x3ad6db){const {_element:_0x55d415,_deltaMousePosition:_0x3cc145,_deltaHandlePosition:_0x291c09,_axis:_0x7e9d30}=this;if(_0x55d415&&this['_isDraggin'+'g']&&this['enabled']&&_0x55d415['enabled']&&_0x55d415['entity']['enabled']){const _0x4c7290=this['_screenToL'+'ocal'](_0x3ad6db);if(_0x4c7290){if(_0x3cc145['sub2'](_0x4c7290,this['_dragStart'+'MousePosit'+'ion']),_0x291c09['add2'](this['_dragStart'+'HandlePosi'+'tion'],_0x3cc145),_0x7e9d30){const _0x25db5f=_0x55d415['entity']['getLocalPo'+'sition'](),_0x45b773=mO[_0x7e9d30];_0x291c09[_0x45b773]=_0x25db5f[_0x45b773];}_0x55d415['entity']['setLocalPo'+'sition'](_0x291c09),this['fire']('drag:move',_0x291c09);}}}['destroy'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleDra'+'gListeners']('off');}set['enabled'](_0x272ec7){this['_enabled']=_0x272ec7;}get['enabled'](){return this['_enabled'];}get['isDragging'](){return this['_isDraggin'+'g'];}}h(Do,'EVENT_DRAG'+'START','drag:start'),h(Do,'EVENT_DRAG'+'END','drag:end'),h(Do,'EVENT_DRAG'+'MOVE','drag:move');const _O=-0x5b*-0xe+0x1901+-0x1dfb*0x1,Dg=0x2460+-0x8b0+-0x13*0x175,gO=0xa5e+0x21c+-0xc78,SO=0x243b*-0x1+-0x1b18+-0x2b*-0x179,yO=-0x6e*-0x47+0x25f*0xb+-0x2*0x1c4b,po=new J();class Cv extends we{constructor(_0x4bb418,_0x44aec9){super(_0x4bb418,_0x44aec9),h(this,'_viewportE'+'ntity',null),h(this,'_contentEn'+'tity',null),h(this,'_horizonta'+'lScrollbar'+'Entity',null),h(this,'_verticalS'+'crollbarEn'+'tity',null),h(this,'_evtElemen'+'tRemove',null),h(this,'_evtViewpo'+'rtElementR'+'emove',null),h(this,'_evtViewpo'+'rtResize',null),h(this,'_evtConten'+'tEntityEle'+'mentAdd',null),h(this,'_evtConten'+'tElementRe'+'move',null),h(this,'_evtConten'+'tResize',null),h(this,'_evtHorizo'+'ntalScroll'+'barAdd',null),h(this,'_evtHorizo'+'ntalScroll'+'barRemove',null),h(this,'_evtHorizo'+'ntalScroll'+'barValue',null),h(this,'_evtVertic'+'alScrollba'+'rAdd',null),h(this,'_evtVertic'+'alScrollba'+'rRemove',null),h(this,'_evtVertic'+'alScrollba'+'rValue',null),(this['_scrollbar'+'UpdateFlag'+'s']={},this['_scrollbar'+'Entities']={},this['_prevConte'+'ntSizes']={},this['_prevConte'+'ntSizes'][Ae]=null,this['_prevConte'+'ntSizes'][je]=null,this['_scroll']=new J(),this['_velocity']=new D(),this['_dragStart'+'Position']=new D(),this['_disabledC'+'ontentInpu'+'t']=!(0x5da+-0xa1b*-0x1+-0xff4),this['_disabledC'+'ontentInpu'+'tEntities']=[],this['_toggleLif'+'ecycleList'+'eners']('on'),this['_toggleEle'+'mentListen'+'ers']('on'));}get['data'](){const _0xcec55f=this['system']['store'][this['entity']['getGuid']()];return _0xcec55f?_0xcec55f['data']:null;}set['enabled'](_0x410eb4){this['_setValue']('enabled',_0x410eb4);}get['enabled'](){return this['data']['enabled'];}set['horizontal'](_0x1a1718){this['_setValue']('horizontal',_0x1a1718);}get['horizontal'](){return this['data']['horizontal'];}set['vertical'](_0xf6f566){this['_setValue']('vertical',_0xf6f566);}get['vertical'](){return this['data']['vertical'];}set['scrollMode'](_0x3e2434){this['_setValue']('scrollMode',_0x3e2434);}get['scrollMode'](){return this['data']['scrollMode'];}set['bounceAmou'+'nt'](_0x7932ad){this['_setValue']('bounceAmou'+'nt',_0x7932ad);}get['bounceAmou'+'nt'](){return this['data']['bounceAmou'+'nt'];}set['friction'](_0x3b4eb1){this['_setValue']('friction',_0x3b4eb1);}get['friction'](){return this['data']['friction'];}set['dragThresh'+'old'](_0xeafaa7){this['_setValue']('dragThresh'+'old',_0xeafaa7);}get['dragThresh'+'old'](){return this['data']['dragThresh'+'old'];}set['useMouseWh'+'eel'](_0xb8f08f){this['_setValue']('useMouseWh'+'eel',_0xb8f08f);}get['useMouseWh'+'eel'](){return this['data']['useMouseWh'+'eel'];}set['mouseWheel'+'Sensitivit'+'y'](_0x4aa658){this['_setValue']('mouseWheel'+'Sensitivit'+'y',_0x4aa658);}get['mouseWheel'+'Sensitivit'+'y'](){return this['data']['mouseWheel'+'Sensitivit'+'y'];}set['horizontal'+'ScrollbarV'+'isibility'](_0x2478ca){this['_setValue']('horizontal'+'ScrollbarV'+'isibility',_0x2478ca);}get['horizontal'+'ScrollbarV'+'isibility'](){return this['data']['horizontal'+'ScrollbarV'+'isibility'];}set['verticalSc'+'rollbarVis'+'ibility'](_0x4b9686){this['_setValue']('verticalSc'+'rollbarVis'+'ibility',_0x4b9686);}get['verticalSc'+'rollbarVis'+'ibility'](){return this['data']['verticalSc'+'rollbarVis'+'ibility'];}set['viewportEn'+'tity'](_0x1366e1){if(this['_viewportE'+'ntity']===_0x1366e1)return;const _0xb2658c=typeof _0x1366e1=='string';this['_viewportE'+'ntity']&&_0xb2658c&&this['_viewportE'+'ntity']['getGuid']()===_0x1366e1||(this['_viewportE'+'ntity']&&this['_viewportE'+'ntityUnsub'+'scribe'](),_0x1366e1 instanceof Ie?this['_viewportE'+'ntity']=_0x1366e1:_0xb2658c?this['_viewportE'+'ntity']=this['system']['app']['getEntityF'+'romIndex'](_0x1366e1)||null:this['_viewportE'+'ntity']=null,this['_viewportE'+'ntity']&&this['_viewportE'+'ntitySubsc'+'ribe'](),this['_viewportE'+'ntity']?this['data']['viewportEn'+'tity']=this['_viewportE'+'ntity']['getGuid']():_0xb2658c&&_0x1366e1&&(this['data']['viewportEn'+'tity']=_0x1366e1));}get['viewportEn'+'tity'](){return this['_viewportE'+'ntity'];}set['contentEnt'+'ity'](_0x3b7049){if(this['_contentEn'+'tity']===_0x3b7049)return;const _0x3846fd=typeof _0x3b7049=='string';this['_contentEn'+'tity']&&_0x3846fd&&this['_contentEn'+'tity']['getGuid']()===_0x3b7049||(this['_contentEn'+'tity']&&this['_contentEn'+'tityUnsubs'+'cribe'](),_0x3b7049 instanceof Ie?this['_contentEn'+'tity']=_0x3b7049:_0x3846fd?this['_contentEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x3b7049)||null:this['_contentEn'+'tity']=null,this['_contentEn'+'tity']&&this['_contentEn'+'titySubscr'+'ibe'](),this['_contentEn'+'tity']?this['data']['contentEnt'+'ity']=this['_contentEn'+'tity']['getGuid']():_0x3846fd&&_0x3b7049&&(this['data']['contentEnt'+'ity']=_0x3b7049));}get['contentEnt'+'ity'](){return this['_contentEn'+'tity'];}set['horizontal'+'ScrollbarE'+'ntity'](_0x55e339){if(this['_horizonta'+'lScrollbar'+'Entity']===_0x55e339)return;const _0x275a39=typeof _0x55e339=='string';this['_horizonta'+'lScrollbar'+'Entity']&&_0x275a39&&this['_horizonta'+'lScrollbar'+'Entity']['getGuid']()===_0x55e339||(this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](),_0x55e339 instanceof Ie?this['_horizonta'+'lScrollbar'+'Entity']=_0x55e339:_0x275a39?this['_horizonta'+'lScrollbar'+'Entity']=this['system']['app']['getEntityF'+'romIndex'](_0x55e339)||null:this['_horizonta'+'lScrollbar'+'Entity']=null,this['_scrollbar'+'Entities'][Ae]=this['_horizonta'+'lScrollbar'+'Entity'],this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](),this['_horizonta'+'lScrollbar'+'Entity']?this['data']['horizontal'+'ScrollbarE'+'ntity']=this['_horizonta'+'lScrollbar'+'Entity']['getGuid']():_0x275a39&&_0x55e339&&(this['data']['horizontal'+'ScrollbarE'+'ntity']=_0x55e339));}get['horizontal'+'ScrollbarE'+'ntity'](){return this['_horizonta'+'lScrollbar'+'Entity'];}set['verticalSc'+'rollbarEnt'+'ity'](_0x2f27db){if(this['_verticalS'+'crollbarEn'+'tity']===_0x2f27db)return;const _0x50104b=typeof _0x2f27db=='string';this['_verticalS'+'crollbarEn'+'tity']&&_0x50104b&&this['_verticalS'+'crollbarEn'+'tity']['getGuid']()===_0x2f27db||(this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](),_0x2f27db instanceof Ie?this['_verticalS'+'crollbarEn'+'tity']=_0x2f27db:_0x50104b?this['_verticalS'+'crollbarEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x2f27db)||null:this['_verticalS'+'crollbarEn'+'tity']=null,this['_scrollbar'+'Entities'][je]=this['_verticalS'+'crollbarEn'+'tity'],this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](),this['_verticalS'+'crollbarEn'+'tity']?this['data']['verticalSc'+'rollbarEnt'+'ity']=this['_verticalS'+'crollbarEn'+'tity']['getGuid']():_0x50104b&&_0x2f27db&&(this['data']['verticalSc'+'rollbarEnt'+'ity']=_0x2f27db));}get['verticalSc'+'rollbarEnt'+'ity'](){return this['_verticalS'+'crollbarEn'+'tity'];}set['scroll'](_0x219dd8){this['_onSetScro'+'ll'](_0x219dd8['x'],_0x219dd8['y']);}get['scroll'](){return this['_scroll'];}['_setValue'](_0x5ccf86,_0x1087a5){const _0x13dc61=this['data'],_0x4bd98b=_0x13dc61[_0x5ccf86];_0x13dc61[_0x5ccf86]=_0x1087a5,this['fire']('set',_0x5ccf86,_0x4bd98b,_0x1087a5);}['_toggleLif'+'ecycleList'+'eners'](_0x9f0a64){this[_0x9f0a64]('set_horizo'+'ntal',this['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'],this),this[_0x9f0a64]('set_vertic'+'al',this['_onSetVert'+'icalScroll'+'ingEnabled'],this),this['entity'][_0x9f0a64]('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this);}['_toggleEle'+'mentListen'+'ers'](_0x1b14e7){if(this['entity']['element']){if(_0x1b14e7==='on'&&this['_hasElemen'+'tListeners'])return;this['entity']['element'][_0x1b14e7]('resize',this['_syncAll'],this),this['entity']['element'][_0x1b14e7]('mousewheel',this['_onMouseWh'+'eel'],this),this['_hasElemen'+'tListeners']=_0x1b14e7==='on';}}['_onElement'+'ComponentA'+'dd'](_0x3ad80c){this['_evtElemen'+'tRemove']=this['entity']['element']['once']('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['_toggleEle'+'mentListen'+'ers']('on');}['_onElement'+'ComponentR'+'emove'](_0x473b5e){var _0x1b3d4f;(_0x1b3d4f=this['_evtElemen'+'tRemove'])==null||_0x1b3d4f['off'](),this['_evtElemen'+'tRemove']=null,this['_toggleEle'+'mentListen'+'ers']('off');}['_viewportE'+'ntitySubsc'+'ribe'](){this['_evtViewpo'+'rtEntityEl'+'ementAdd']=this['_viewportE'+'ntity']['on']('element:ad'+'d',this['_onViewpor'+'tElementGa'+'in'],this),this['_viewportE'+'ntity']['element']&&this['_onViewpor'+'tElementGa'+'in']();}['_viewportE'+'ntityUnsub'+'scribe'](){var _0x4e1f53,_0x445359;(_0x4e1f53=this['_evtViewpo'+'rtEntityEl'+'ementAdd'])==null||_0x4e1f53['off'](),this['_evtViewpo'+'rtEntityEl'+'ementAdd']=null,(_0x445359=this['_viewportE'+'ntity'])!=null&&_0x445359['element']&&this['_onViewpor'+'tElementLo'+'se']();}['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](){const _0x179183=this['_viewportE'+'ntity']['element'];this['_evtViewpo'+'rtElementR'+'emove']=_0x179183['once']('beforeremo'+'ve',this['_onViewpor'+'tElementLo'+'se'],this),this['_evtViewpo'+'rtResize']=_0x179183['on']('resize',this['_syncAll'],this);}['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe'](){var _0x2eee03,_0x3060cc;(_0x2eee03=this['_evtViewpo'+'rtElementR'+'emove'])==null||_0x2eee03['off'](),this['_evtViewpo'+'rtElementR'+'emove']=null,(_0x3060cc=this['_evtViewpo'+'rtResize'])==null||_0x3060cc['off'](),this['_evtViewpo'+'rtResize']=null;}['_onViewpor'+'tElementGa'+'in'](){this['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](),this['_syncAll']();}['_onViewpor'+'tElementLo'+'se'](){this['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe']();}['_contentEn'+'titySubscr'+'ibe'](){this['_evtConten'+'tEntityEle'+'mentAdd']=this['_contentEn'+'tity']['on']('element:ad'+'d',this['_onContent'+'ElementGai'+'n'],this),this['_contentEn'+'tity']['element']&&this['_onContent'+'ElementGai'+'n']();}['_contentEn'+'tityUnsubs'+'cribe'](){var _0x4c4caa,_0x3bfd23;(_0x4c4caa=this['_evtConten'+'tEntityEle'+'mentAdd'])==null||_0x4c4caa['off'](),this['_evtConten'+'tEntityEle'+'mentAdd']=null,(_0x3bfd23=this['_contentEn'+'tity'])!=null&&_0x3bfd23['element']&&this['_onContent'+'ElementLos'+'e']();}['_contentEn'+'tityElemen'+'tSubscribe'](){const _0x1d36fb=this['_contentEn'+'tity']['element'];this['_evtConten'+'tElementRe'+'move']=_0x1d36fb['once']('beforeremo'+'ve',this['_onContent'+'ElementLos'+'e'],this),this['_evtConten'+'tResize']=_0x1d36fb['on']('resize',this['_syncAll'],this);}['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](){var _0x38d9af,_0x3c3036;(_0x38d9af=this['_evtConten'+'tElementRe'+'move'])==null||_0x38d9af['off'](),this['_evtConten'+'tElementRe'+'move']=null,(_0x3c3036=this['_evtConten'+'tResize'])==null||_0x3c3036['off'](),this['_evtConten'+'tResize']=null;}['_onContent'+'ElementGai'+'n'](){this['_contentEn'+'tityElemen'+'tSubscribe'](),this['_destroyDr'+'agHelper'](),this['_contentDr'+'agHelper']=new Do(this['_contentEn'+'tity']['element']),this['_contentDr'+'agHelper']['on']('drag:start',this['_onContent'+'DragStart'],this),this['_contentDr'+'agHelper']['on']('drag:end',this['_onContent'+'DragEnd'],this),this['_contentDr'+'agHelper']['on']('drag:move',this['_onContent'+'DragMove'],this),this['_prevConte'+'ntSizes'][Ae]=null,this['_prevConte'+'ntSizes'][je]=null,this['_syncAll']();}['_onContent'+'ElementLos'+'e'](){this['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](),this['_destroyDr'+'agHelper']();}['_onContent'+'DragStart'](){this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&this['_dragStart'+'Position']['copy'](this['_contentEn'+'tity']['getLocalPo'+'sition']());}['_onContent'+'DragEnd'](){this['_prevConte'+'ntDragPosi'+'tion']=null,this['_enableCon'+'tentInput']();}['_onContent'+'DragMove'](_0x2b8b3e){if(this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&(this['_wasDragge'+'d']=!(0x2a*-0x93+-0x3*-0x4b8+0x32*0x33),this['_setScroll'+'FromConten'+'tPosition'](_0x2b8b3e),this['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x2b8b3e),!this['_disabledC'+'ontentInpu'+'t'])){const _0x5da908=_0x2b8b3e['x']-this['_dragStart'+'Position']['x'],_0x590b93=_0x2b8b3e['y']-this['_dragStart'+'Position']['y'];(Math['abs'](_0x5da908)>this['dragThresh'+'old']||Math['abs'](_0x590b93)>this['dragThresh'+'old'])&&this['_disableCo'+'ntentInput']();}}['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](){this['_evtHorizo'+'ntalScroll'+'barAdd']=this['_horizonta'+'lScrollbar'+'Entity']['on']('scrollbar:'+'add',this['_onHorizon'+'talScrollb'+'arGain'],this),this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arGain']();}['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](){this['_evtVertic'+'alScrollba'+'rAdd']=this['_verticalS'+'crollbarEn'+'tity']['on']('scrollbar:'+'add',this['_onVertica'+'lScrollbar'+'Gain'],this),this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Gain']();}['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](){var _0x3d539f;(_0x3d539f=this['_evtHorizo'+'ntalScroll'+'barAdd'])==null||_0x3d539f['off'](),this['_evtHorizo'+'ntalScroll'+'barAdd']=null,this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arLose']();}['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](){var _0x1bfe60;(_0x1bfe60=this['_evtVertic'+'alScrollba'+'rAdd'])==null||_0x1bfe60['off'](),this['_evtVertic'+'alScrollba'+'rAdd']=null,this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Lose']();}['_onSetHori'+'zontalScro'+'llbarValue'](_0x4b1ffa){!this['_scrollbar'+'UpdateFlag'+'s'][Ae]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](_0x4b1ffa,null);}['_onSetVert'+'icalScroll'+'barValue'](_0x19d86d){!this['_scrollbar'+'UpdateFlag'+'s'][je]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](null,_0x19d86d);}['_onHorizon'+'talScrollb'+'arGain'](){var _0x14b6b8;const _0x159dd7=(_0x14b6b8=this['_horizonta'+'lScrollbar'+'Entity'])==null?void(0x509*-0x1+-0x2*0x11b5+0x2873):_0x14b6b8['scrollbar'];this['_evtHorizo'+'ntalScroll'+'barRemove']=_0x159dd7['on']('beforeremo'+'ve',this['_onHorizon'+'talScrollb'+'arLose'],this),this['_evtHorizo'+'ntalScroll'+'barValue']=_0x159dd7['on']('set:value',this['_onSetHori'+'zontalScro'+'llbarValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarPositi'+'on'](Ae);}['_onVertica'+'lScrollbar'+'Gain'](){var _0x29040e;const _0x244d59=(_0x29040e=this['_verticalS'+'crollbarEn'+'tity'])==null?void(0x1*0x1e9c+0x17da+-0x3676):_0x29040e['scrollbar'];this['_evtVertic'+'alScrollba'+'rRemove']=_0x244d59['on']('beforeremo'+'ve',this['_onVertica'+'lScrollbar'+'Lose'],this),this['_evtVertic'+'alScrollba'+'rValue']=_0x244d59['on']('set:value',this['_onSetVert'+'icalScroll'+'barValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](je),this['_syncScrol'+'lbarPositi'+'on'](je);}['_onHorizon'+'talScrollb'+'arLose'](){var _0x449ce5,_0x579d9c;(_0x449ce5=this['_evtHorizo'+'ntalScroll'+'barRemove'])==null||_0x449ce5['off'](),this['_evtHorizo'+'ntalScroll'+'barRemove']=null,(_0x579d9c=this['_evtHorizo'+'ntalScroll'+'barValue'])==null||_0x579d9c['off'](),this['_evtHorizo'+'ntalScroll'+'barValue']=null;}['_onVertica'+'lScrollbar'+'Lose'](){var _0x221212,_0x237444;(_0x221212=this['_evtVertic'+'alScrollba'+'rRemove'])==null||_0x221212['off'](),this['_evtVertic'+'alScrollba'+'rRemove']=null,(_0x237444=this['_evtVertic'+'alScrollba'+'rValue'])==null||_0x237444['off'](),this['_evtVertic'+'alScrollba'+'rValue']=null;}['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'](){this['_syncScrol'+'lbarEnable'+'dState'](Ae);}['_onSetVert'+'icalScroll'+'ingEnabled'](){this['_syncScrol'+'lbarEnable'+'dState'](je);}['_onSetScro'+'ll'](_0x6fbeca,_0x14dea1,_0x47cf9a){_0x47cf9a!==!(0x1d35+0x1187+-0x2ebb)&&this['_velocity']['set'](0x1a03+0x37e*-0xb+0xc67,-0x2*0x1381+-0x268f+0x3*0x19db,0x1*-0x11a5+-0x1245+0x23ea);const _0x25e384=this['_updateAxi'+'s'](_0x6fbeca,'x',Ae),_0x4d5d09=this['_updateAxi'+'s'](_0x14dea1,'y',je);(_0x25e384||_0x4d5d09)&&this['fire']('set:scroll',this['_scroll']);}['_updateAxi'+'s'](_0x571781,_0x43839f,_0x1202b3){const _0x33aaac=_0x571781!==null&&Math['abs'](_0x571781-this['_scroll'][_0x43839f])>-0x131e+-0xeb+0x1409+0.00001;return(_0x33aaac||this['_isDraggin'+'g']()||_0x571781===0x1*-0xf7f+-0x2c*-0x2f+-0x9*-0xd3)&&(this['_scroll'][_0x43839f]=this['_determine'+'NewScrollV'+'alue'](_0x571781,_0x43839f,_0x1202b3),this['_syncConte'+'ntPosition'](_0x1202b3),this['_syncScrol'+'lbarPositi'+'on'](_0x1202b3)),_0x33aaac;}['_determine'+'NewScrollV'+'alue'](_0xdb8b6c,_0x4a9ceb,_0x175a5b){if(!this['_getScroll'+'ingEnabled'](_0x175a5b))return this['_scroll'][_0x4a9ceb];switch(this['scrollMode']){case _O:return Y['clamp'](_0xdb8b6c,-0x1ef*0x5+0x14*0x31+0x5d7,this['_getMaxScr'+'ollValue'](_0x175a5b));case Dg:return this['_setVeloci'+'tyFromOver'+'shoot'](_0xdb8b6c,_0x4a9ceb,_0x175a5b),_0xdb8b6c;case gO:return _0xdb8b6c;default:return console['warn']('Unhandled\x20'+'scroll\x20mod'+'e:'+this['scrollMode']),_0xdb8b6c;}}['_syncAll'](){this['_syncConte'+'ntPosition'](Ae),this['_syncConte'+'ntPosition'](je),this['_syncScrol'+'lbarPositi'+'on'](Ae),this['_syncScrol'+'lbarPositi'+'on'](je),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarEnable'+'dState'](je);}['_syncConte'+'ntPosition'](_0x47dee4){if(!this['_contentEn'+'tity'])return;const _0x90b5e0=this['_getAxis'](_0x47dee4),_0x5bcaaa=this['_getSign'](_0x47dee4),_0x330f9b=this['_prevConte'+'ntSizes'][_0x47dee4],_0x563f7f=this['_getConten'+'tSize'](_0x47dee4);if(_0x330f9b!==null&&Math['abs'](_0x330f9b-_0x563f7f)>-0x2007+0x2f6*-0x3+0x1*0x28e9+0.0001){const _0x13f86c=this['_getMaxOff'+'set'](_0x47dee4,_0x330f9b),_0x5208e=this['_getMaxOff'+'set'](_0x47dee4,_0x563f7f);_0x5208e===-0x19a8+-0x901*0x3+0x34ab?this['_scroll'][_0x90b5e0]=0xce8+0x1309*-0x1+0x622:this['_scroll'][_0x90b5e0]=Y['clamp'](this['_scroll'][_0x90b5e0]*_0x13f86c/_0x5208e,-0x23cb+0x1*0x267a+-0x2af,-0x761*-0x2+0x43a+-0x12fb*0x1);}const _0xfebd57=this['_scroll'][_0x90b5e0]*this['_getMaxOff'+'set'](_0x47dee4),_0x50df71=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x50df71[_0x90b5e0]=_0xfebd57*_0x5bcaaa,this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x50df71),this['_prevConte'+'ntSizes'][_0x47dee4]=_0x563f7f;}['_syncScrol'+'lbarPositi'+'on'](_0x482b0e){const _0x123074=this['_scrollbar'+'Entities'][_0x482b0e];if(!(_0x123074!=null&&_0x123074['scrollbar']))return;const _0x477fd8=this['_getAxis'](_0x482b0e);this['_scrollbar'+'UpdateFlag'+'s'][_0x482b0e]=!(0x25b9+0x2038+-0x45f1),_0x123074['scrollbar']['value']=this['_scroll'][_0x477fd8],_0x123074['scrollbar']['handleSize']=this['_getScroll'+'barHandleS'+'ize'](_0x477fd8,_0x482b0e),this['_scrollbar'+'UpdateFlag'+'s'][_0x482b0e]=!(-0x1f*0x19+0x13b*-0x1a+0x2306);}['_syncScrol'+'lbarEnable'+'dState'](_0x598e84){const _0x161ae0=this['_scrollbar'+'Entities'][_0x598e84];if(!_0x161ae0)return;const _0x22726e=this['_getScroll'+'ingEnabled'](_0x598e84),_0x24aa31=this['_getScroll'+'barVisibil'+'ity'](_0x598e84);switch(_0x24aa31){case SO:_0x161ae0['enabled']=_0x22726e;return;case yO:_0x161ae0['enabled']=_0x22726e&&this['_contentIs'+'LargerThan'+'Viewport'](_0x598e84);return;default:console['warn']('Unhandled\x20'+'scrollbar\x20'+'visibility'+':'+_0x24aa31),_0x161ae0['enabled']=_0x22726e;}}['_contentIs'+'LargerThan'+'Viewport'](_0x31f834){return this['_getConten'+'tSize'](_0x31f834)>this['_getViewpo'+'rtSize'](_0x31f834);}['_contentPo'+'sitionToSc'+'rollValue'](_0x5bda1c){const _0x355d54=this['_getMaxOff'+'set'](Ae),_0xc718b9=this['_getMaxOff'+'set'](je);return _0x355d54===0xb9e*0x1+-0x2066+0x14c8?po['x']=0xa9f*-0x1+-0x1673+0x2112:po['x']=_0x5bda1c['x']/_0x355d54,_0xc718b9===0x1*-0x1be5+-0x1f5+0x1dda?po['y']=-0x21be+-0x22c7+0x4485:po['y']=_0x5bda1c['y']/-_0xc718b9,po;}['_getMaxOff'+'set'](_0x894719,_0x173d70){_0x173d70=_0x173d70===void(-0xf22+0xf2*-0x1b+0x28a8)?this['_getConten'+'tSize'](_0x894719):_0x173d70;const _0x558118=this['_getViewpo'+'rtSize'](_0x894719);return _0x173d70<_0x558118?-this['_getViewpo'+'rtSize'](_0x894719):_0x558118-_0x173d70;}['_getMaxScr'+'ollValue'](_0x3facf0){return this['_contentIs'+'LargerThan'+'Viewport'](_0x3facf0)?-0x2*0x4a3+0x13be+-0xa77:0xd2a*0x2+0x1db7+0x380b*-0x1;}['_getScroll'+'barHandleS'+'ize'](_0x428897,_0x416da3){const _0xd08551=this['_getViewpo'+'rtSize'](_0x416da3),_0x1529a5=this['_getConten'+'tSize'](_0x416da3);if(Math['abs'](_0x1529a5)<-0x20f5+-0x1bca+0x3cbf+0.001)return 0x1bc3*0x1+0x24a0+-0x1*0x4062;const _0x4088dd=Math['min'](_0xd08551/_0x1529a5,-0x128*0x3+-0x229f+0x2618),_0x856458=this['_toOversho'+'ot'](this['_scroll'][_0x428897],_0x416da3);return _0x856458===-0x13a9+0x1*0x1b81+-0x8*0xfb?_0x4088dd:_0x4088dd/(-0x1e2d+0x1ace+0x360+Math['abs'](_0x856458));}['_getViewpo'+'rtSize'](_0x122c3d){return this['_getSize'](_0x122c3d,this['_viewportE'+'ntity']);}['_getConten'+'tSize'](_0x5b0301){return this['_getSize'](_0x5b0301,this['_contentEn'+'tity']);}['_getSize'](_0x58175d,_0x120b43){return _0x120b43!=null&&_0x120b43['element']?_0x120b43['element'][this['_getCalcul'+'atedDimens'+'ion'](_0x58175d)]:-0x1*-0x149f+0xa2a+0x47*-0x6f;}['_getScroll'+'ingEnabled'](_0x4e4dcb){if(_0x4e4dcb===Ae)return this['horizontal'];if(_0x4e4dcb===je)return this['vertical'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x4e4dcb);}['_getScroll'+'barVisibil'+'ity'](_0x3a95bb){if(_0x3a95bb===Ae)return this['horizontal'+'ScrollbarV'+'isibility'];if(_0x3a95bb===je)return this['verticalSc'+'rollbarVis'+'ibility'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x3a95bb);}['_getSign'](_0x2f93e9){return _0x2f93e9===Ae?0x655*0x3+-0x112d*-0x1+-0x242b:-(0x1549+-0x15b9+0x71);}['_getAxis'](_0xc23430){return _0xc23430===Ae?'x':'y';}['_getCalcul'+'atedDimens'+'ion'](_0x100202){return _0x100202===Ae?'calculated'+'Width':'calculated'+'Height';}['_destroyDr'+'agHelper'](){this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['destroy']();}['onUpdate'](){this['_contentEn'+'tity']&&(this['_updateVel'+'ocity'](),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarEnable'+'dState'](je));}['_updateVel'+'ocity'](){if(!this['_isDraggin'+'g']()){if(this['scrollMode']===Dg&&(this['_hasOversh'+'oot']('x',Ae)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['x'],'x',Ae),this['_hasOversh'+'oot']('y',je)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['y'],'y',je)),Math['abs'](this['_velocity']['x'])>0xbce+0x11*-0x235+0x19b7+0.0001||Math['abs'](this['_velocity']['y'])>-0x82e*0x1+0x2042+-0x1814+0.0001){const _0x5c5e66=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x5c5e66['x']+=this['_velocity']['x'],_0x5c5e66['y']+=this['_velocity']['y'],this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x5c5e66),this['_setScroll'+'FromConten'+'tPosition'](_0x5c5e66);}this['_velocity']['x']*=-0x1f97+-0x1*-0x259f+-0x607-this['friction'],this['_velocity']['y']*=0x1232+0x5*0x1e2+-0x1b9b-this['friction'];}}['_hasOversh'+'oot'](_0x55b7cc,_0xe1b1c3){return Math['abs'](this['_toOversho'+'ot'](this['scroll'][_0x55b7cc],_0xe1b1c3))>0xb7f+-0x1b2+0xd*-0xc1+0.001;}['_toOversho'+'ot'](_0x597df6,_0x2e5022){const _0x5d19b3=this['_getMaxScr'+'ollValue'](_0x2e5022);return _0x597df6<0x4*0x2c5+0x20b*-0xd+0xf7b?_0x597df6:_0x597df6>_0x5d19b3?_0x597df6-_0x5d19b3:-0x8*-0x1b+-0x11b6*-0x1+-0x128e;}['_setVeloci'+'tyFromOver'+'shoot'](_0x4282dd,_0xa629a,_0x4687f1){const _0x429839=this['_toOversho'+'ot'](_0x4282dd,_0x4687f1)*this['_getMaxOff'+'set'](_0x4687f1)*this['_getSign'](_0x4687f1);Math['abs'](_0x429839)>-0x1669*-0x1+-0x98c+-0xcdd*0x1&&(this['_velocity'][_0xa629a]=-_0x429839/(this['bounceAmou'+'nt']*(0x18d7+0x24b2+-0x3d57)+(-0x1ec5+-0x1115+0x2fdb)));}['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x3dd6a5){this['_prevConte'+'ntDragPosi'+'tion']?(this['_velocity']['sub2'](_0x3dd6a5,this['_prevConte'+'ntDragPosi'+'tion']),this['_prevConte'+'ntDragPosi'+'tion']['copy'](_0x3dd6a5)):(this['_velocity']['set'](-0x37d*-0x9+0x5*0x452+-0x1*0x34ff,-0x1d*0x86+-0x3e7+0x1315,0x1*-0x12c7+-0xef5*0x2+0x30b1),this['_prevConte'+'ntDragPosi'+'tion']=_0x3dd6a5['clone']());}['_setScroll'+'FromConten'+'tPosition'](_0x1256e9){let _0x23a2ee=this['_contentPo'+'sitionToSc'+'rollValue'](_0x1256e9);this['_isDraggin'+'g']()&&(_0x23a2ee=this['_applyScro'+'llValueTen'+'sion'](_0x23a2ee)),this['_onSetScro'+'ll'](_0x23a2ee['x'],_0x23a2ee['y'],!(0x2499*0x1+-0xe13+-0x1685));}['_applyScro'+'llValueTen'+'sion'](_0x4b8bbe){let _0x4c912a=this['_getMaxScr'+'ollValue'](Ae),_0x33a309=this['_toOversho'+'ot'](_0x4b8bbe['x'],Ae);return _0x33a309>0x10b*0x9+0xabd+-0x1420?_0x4b8bbe['x']=_0x4c912a+(-0x211*0x1+0x6a5+-0x1*0x493)*Math['log10'](0xcbd*0x2+-0xbef+-0xd8a*0x1+_0x33a309):_0x33a309<0x6ba+0x1e6f+-0x2529&&(_0x4b8bbe['x']=-(0x2001+0x1*0x1f7c+-0x3f7c)*Math['log10'](0x46f+-0x23e8+0x1f7a-_0x33a309)),_0x4c912a=this['_getMaxScr'+'ollValue'](je),_0x33a309=this['_toOversho'+'ot'](_0x4b8bbe['y'],je),_0x33a309>-0x4e9+-0x2225+-0x1*-0x270e?_0x4b8bbe['y']=_0x4c912a+(-0x6dc+-0x13d*0xd+0x16f6*0x1)*Math['log10'](-0x1d59+-0x198d+-0xafb*-0x5+_0x33a309):_0x33a309<0x37*0x74+-0x12*0x190+-0x334*-0x1&&(_0x4b8bbe['y']=-(-0x5b4*-0x4+0x12d6+-0x29a5)*Math['log10'](-0x81e*0x1+0xa76*0x3+0x1743*-0x1-_0x33a309)),_0x4b8bbe;}['_isDraggin'+'g'](){return this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['isDragging'];}['_setScroll'+'barCompone'+'ntsEnabled'](_0x2eb5eb){var _0x967193,_0xb1d162;(_0x967193=this['_horizonta'+'lScrollbar'+'Entity'])!=null&&_0x967193['scrollbar']&&(this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']['enabled']=_0x2eb5eb),(_0xb1d162=this['_verticalS'+'crollbarEn'+'tity'])!=null&&_0xb1d162['scrollbar']&&(this['_verticalS'+'crollbarEn'+'tity']['scrollbar']['enabled']=_0x2eb5eb);}['_setConten'+'tDraggingE'+'nabled'](_0x11551d){this['_contentDr'+'agHelper']&&(this['_contentDr'+'agHelper']['enabled']=_0x11551d);}['_onMouseWh'+'eel'](_0x2d99a4){var _0x35165c;if(!this['useMouseWh'+'eel']||!((_0x35165c=this['_contentEn'+'tity'])!=null&&_0x35165c['element']))return;const _0x3fbd8b=_0x2d99a4['event'],_0x4cf15e=_0x3fbd8b['deltaX']/this['_contentEn'+'tity']['element']['calculated'+'Width']*this['mouseWheel'+'Sensitivit'+'y']['x'],_0x5b5d4a=_0x3fbd8b['deltaY']/this['_contentEn'+'tity']['element']['calculated'+'Height']*this['mouseWheel'+'Sensitivit'+'y']['y'],_0x33951e=Y['clamp'](this['_scroll']['x']+_0x4cf15e,0x1f80+-0xce*0x1f+0x347*-0x2,this['_getMaxScr'+'ollValue'](Ae)),_0x4ea7da=Y['clamp'](this['_scroll']['y']+_0x5b5d4a,-0x1b7f*-0x1+0xa34+-0x25b3,this['_getMaxScr'+'ollValue'](je));this['scroll']=new J(_0x33951e,_0x4ea7da);}['_enableCon'+'tentInput'](){for(;this['_disabledC'+'ontentInpu'+'tEntities']['length'];){const _0x304f22=this['_disabledC'+'ontentInpu'+'tEntities']['pop']();_0x304f22['element']&&(_0x304f22['element']['useInput']=!(0xeab+-0x1*0x126f+-0x1*-0x3c4));}this['_disabledC'+'ontentInpu'+'t']=!(-0x6bb*0x3+0x2537+0x1*-0x1105);}['_disableCo'+'ntentInput'](){const _0x3111f2=_0x4d99ca=>{_0x4d99ca['element']&&_0x4d99ca['element']['useInput']&&(this['_disabledC'+'ontentInpu'+'tEntities']['push'](_0x4d99ca),_0x4d99ca['element']['useInput']=!(0xfd*-0x13+-0x8d6+0x1b9e));const _0x2d6b93=_0x4d99ca['children'];for(let _0x49c4d8=-0xb24+0x190*0x7+0x1*0x34,_0x1840a2=_0x2d6b93['length'];_0x49c4d8<_0x1840a2;_0x49c4d8++)_0x3111f2(_0x2d6b93[_0x49c4d8]);};if(this['_contentEn'+'tity']){const _0x2736f0=this['_contentEn'+'tity']['children'];for(let _0x113e50=0x1*-0x223e+-0x1f86*0x1+0x41c4,_0x50aacf=_0x2736f0['length'];_0x113e50<_0x50aacf;_0x113e50++)_0x3111f2(_0x2736f0[_0x113e50]);}this['_disabledC'+'ontentInpu'+'t']=!(-0x2f0*0x1+-0x296*-0xd+-0x1eae);}['onEnable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(0x56b*0x1+0xc98+0x3*-0x601)),this['_setConten'+'tDraggingE'+'nabled'](!(0x1*-0xffd+0x10cb+-0xce)),this['_syncAll']();}['onDisable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0x20bf+-0x2193+0x4253*0x1)),this['_setConten'+'tDraggingE'+'nabled'](!(0x1*-0x1f21+0x532+0x530*0x5));}['onRemove'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleEle'+'mentListen'+'ers']('off'),this['_destroyDr'+'agHelper']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x2cda8a,_0x3c851e){_0x2cda8a['viewportEn'+'tity']&&(this['viewportEn'+'tity']=_0x3c851e[_0x2cda8a['viewportEn'+'tity']['getGuid']()]),_0x2cda8a['contentEnt'+'ity']&&(this['contentEnt'+'ity']=_0x3c851e[_0x2cda8a['contentEnt'+'ity']['getGuid']()]),_0x2cda8a['horizontal'+'ScrollbarE'+'ntity']&&(this['horizontal'+'ScrollbarE'+'ntity']=_0x3c851e[_0x2cda8a['horizontal'+'ScrollbarE'+'ntity']['getGuid']()]),_0x2cda8a['verticalSc'+'rollbarEnt'+'ity']&&(this['verticalSc'+'rollbarEnt'+'ity']=_0x3c851e[_0x2cda8a['verticalSc'+'rollbarEnt'+'ity']['getGuid']()]);}}h(Cv,'EVENT_SETS'+'CROLL','set:scroll');const vO=-0x14e1*-0x1+-0x2*-0x506+0x1*-0x1ee3;class xO{constructor(){h(this,'enabled',!(0xe2*-0x8+0xc4e+-0x53e)),h(this,'horizontal'),h(this,'vertical'),h(this,'scrollMode'),h(this,'bounceAmou'+'nt'),h(this,'friction'),h(this,'dragThresh'+'old',vO),h(this,'useMouseWh'+'eel',!(0x1f2+0x5da+-0x7cc)),h(this,'mouseWheel'+'Sensitivit'+'y',new J(-0x1e6e*-0x1+-0x23c9+0x55c,-0x1720+0x20a1+-0x980)),h(this,'horizontal'+'ScrollbarV'+'isibility',0x73e+-0x1*0x17e9+0x10ab),h(this,'verticalSc'+'rollbarVis'+'ibility',0x1e71*-0x1+0x2558+-0x6e7),h(this,'viewportEn'+'tity',null),h(this,'contentEnt'+'ity',null),h(this,'horizontal'+'ScrollbarE'+'ntity',null),h(this,'verticalSc'+'rollbarEnt'+'ity',null);}}const Ig=[{'name':'enabled','type':'boolean'},{'name':'horizontal','type':'boolean'},{'name':'vertical','type':'boolean'},{'name':'scrollMode','type':'number'},{'name':'bounceAmou'+'nt','type':'number'},{'name':'friction','type':'number'},{'name':'dragThresh'+'old','type':'number'},{'name':'useMouseWh'+'eel','type':'boolean'},{'name':'mouseWheel'+'Sensitivit'+'y','type':'vec2'},{'name':'horizontal'+'ScrollbarV'+'isibility','type':'number'},{'name':'verticalSc'+'rollbarVis'+'ibility','type':'number'}],TO=-0x2ab*-0x7+0x1e9e+-0x3141;class wO extends ct{constructor(_0x3d0aa1){super(_0x3d0aa1),this['id']='scrollview',this['ComponentT'+'ype']=Cv,this['DataType']=xO,this['schema']=Ig,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x5d45e2,_0x2e0a28,_0x16c36f){_0x2e0a28['dragThresh'+'old']===void(0x1516+-0x3*0x9fe+-0x239*-0x4)&&(_0x2e0a28['dragThresh'+'old']=TO),_0x2e0a28['useMouseWh'+'eel']===void(-0x21bb+-0x9*0x5d+-0x2500*-0x1)&&(_0x2e0a28['useMouseWh'+'eel']=!(0x542*-0x4+0x64+0x14a4)),_0x2e0a28['mouseWheel'+'Sensitivit'+'y']===void(0xc45*-0x1+-0x95*-0x1f+-0x5c6)&&(_0x2e0a28['mouseWheel'+'Sensitivit'+'y']=new J(0x644+-0x95d+0x31a,0xfbe+0x1bf4+-0x2bb1)),super['initialize'+'ComponentD'+'ata'](_0x5d45e2,_0x2e0a28,Ig),_0x5d45e2['viewportEn'+'tity']=_0x2e0a28['viewportEn'+'tity'],_0x5d45e2['contentEnt'+'ity']=_0x2e0a28['contentEnt'+'ity'],_0x5d45e2['horizontal'+'ScrollbarE'+'ntity']=_0x2e0a28['horizontal'+'ScrollbarE'+'ntity'],_0x5d45e2['verticalSc'+'rollbarEnt'+'ity']=_0x2e0a28['verticalSc'+'rollbarEnt'+'ity'];}['onUpdate'](_0x23d259){const _0x97e204=this['store'];for(const _0x4990dd in _0x97e204){const _0x3e8d68=_0x97e204[_0x4990dd]['entity'],_0xe1852f=_0x3e8d68['scrollview'];_0xe1852f['enabled']&&_0x3e8d68['enabled']&&_0xe1852f['onUpdate']();}}['_onRemoveC'+'omponent'](_0x187dfd,_0x379b15){_0x379b15['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class Pv extends we{constructor(_0x5bd1fa,_0x3af0f3){super(_0x5bd1fa,_0x3af0f3),h(this,'_handleEnt'+'ity',null),h(this,'_evtHandle'+'EntityElem'+'entAdd',null),h(this,'_evtHandle'+'EntityChan'+'ges',[]),this['_toggleLif'+'ecycleList'+'eners']('on');}get['data'](){const _0x1b0fa4=this['system']['store'][this['entity']['getGuid']()];return _0x1b0fa4?_0x1b0fa4['data']:null;}set['enabled'](_0x1a0b35){this['_setValue']('enabled',_0x1a0b35);}get['enabled'](){return this['data']['enabled'];}set['orientatio'+'n'](_0x208904){this['_setValue']('orientatio'+'n',_0x208904);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['value'](_0x278392){this['_setValue']('value',_0x278392);}get['value'](){return this['data']['value'];}set['handleSize'](_0x5f52f2){this['_setValue']('handleSize',_0x5f52f2);}get['handleSize'](){return this['data']['handleSize'];}set['handleEnti'+'ty'](_0x20efda){if(this['_handleEnt'+'ity']===_0x20efda)return;const _0x5035d0=typeof _0x20efda=='string';this['_handleEnt'+'ity']&&_0x5035d0&&this['_handleEnt'+'ity']['getGuid']()===_0x20efda||(this['_handleEnt'+'ity']&&this['_handleEnt'+'ityUnsubsc'+'ribe'](),_0x20efda instanceof Ie?this['_handleEnt'+'ity']=_0x20efda:_0x5035d0?this['_handleEnt'+'ity']=this['system']['app']['getEntityF'+'romIndex'](_0x20efda)||null:this['_handleEnt'+'ity']=null,this['_handleEnt'+'ity']&&this['_handleEnt'+'itySubscri'+'be'](),this['_handleEnt'+'ity']?this['data']['handleEnti'+'ty']=this['_handleEnt'+'ity']['getGuid']():_0x5035d0&&_0x20efda&&(this['data']['handleEnti'+'ty']=_0x20efda));}get['handleEnti'+'ty'](){return this['_handleEnt'+'ity'];}['_setValue'](_0x1b9c94,_0x891eef){const _0x228c20=this['data'],_0x156aa4=_0x228c20[_0x1b9c94];_0x228c20[_0x1b9c94]=_0x891eef,this['fire']('set',_0x1b9c94,_0x156aa4,_0x891eef);}['_toggleLif'+'ecycleList'+'eners'](_0x243382){this[_0x243382]('set_value',this['_onSetValu'+'e'],this),this[_0x243382]('set_handle'+'Size',this['_onSetHand'+'leSize'],this),this[_0x243382]('set_orient'+'ation',this['_onSetOrie'+'ntation'],this);}['_handleEnt'+'itySubscri'+'be'](){this['_evtHandle'+'EntityElem'+'entAdd']=this['_handleEnt'+'ity']['on']('element:ad'+'d',this['_onHandleE'+'lementGain'],this),this['_handleEnt'+'ity']['element']&&this['_onHandleE'+'lementGain']();}['_handleEnt'+'ityUnsubsc'+'ribe'](){var _0x36cc11,_0x3df32a;(_0x36cc11=this['_evtHandle'+'EntityElem'+'entAdd'])==null||_0x36cc11['off'](),this['_evtHandle'+'EntityElem'+'entAdd']=null,(_0x3df32a=this['_handleEnt'+'ity'])!=null&&_0x3df32a['element']&&this['_onHandleE'+'lementLose']();}['_handleEnt'+'ityElement'+'Subscribe'](){const _0x154d8c=this['_handleEnt'+'ity']['element'],_0x2c4d7a=this['_evtHandle'+'EntityChan'+'ges'];_0x2c4d7a['push'](_0x154d8c['once']('beforeremo'+'ve',this['_onHandleE'+'lementLose'],this)),_0x2c4d7a['push'](_0x154d8c['on']('set:anchor',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x2c4d7a['push'](_0x154d8c['on']('set:margin',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x2c4d7a['push'](_0x154d8c['on']('set:pivot',this['_onSetHand'+'leAlignmen'+'t'],this));}['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](){for(let _0x17462c=-0x245d+0xfa8+0x14b5;_0x17462c<this['_evtHandle'+'EntityChan'+'ges']['length'];_0x17462c++)this['_evtHandle'+'EntityChan'+'ges'][_0x17462c]['off']();this['_evtHandle'+'EntityChan'+'ges']['length']=-0x199*-0xc+0x81*0x13+-0x1*0x1cbf;}['_onHandleE'+'lementGain'](){this['_handleEnt'+'ityElement'+'Subscribe'](),this['_destroyDr'+'agHelper'](),this['_handleDra'+'gHelper']=new Do(this['_handleEnt'+'ity']['element'],this['_getAxis']()),this['_handleDra'+'gHelper']['on']('drag:move',this['_onHandleD'+'rag'],this),this['_updateHan'+'dlePositio'+'nAndSize']();}['_onHandleE'+'lementLose'](){this['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](),this['_destroyDr'+'agHelper']();}['_onHandleD'+'rag'](_0x3afc35){this['_handleEnt'+'ity']&&this['enabled']&&this['entity']['enabled']&&(this['value']=this['_handlePos'+'itionToScr'+'ollValue'](_0x3afc35[this['_getAxis']()]));}['_onSetValu'+'e'](_0x290954,_0x3b9c39,_0x8973f9){Math['abs'](_0x8973f9-_0x3b9c39)>0x1f*0x35+-0x6*-0x3b2+0x233*-0xd+0.00001&&(this['data']['value']=Y['clamp'](_0x8973f9,-0x194c+-0x1ef2+0x383e,0x13d1+0x7*0x4c7+-0x3541*0x1),this['_updateHan'+'dlePositio'+'nAndSize'](),this['fire']('set:value',this['data']['value']));}['_onSetHand'+'leSize'](_0x548330,_0x3dbb39,_0x5c72ad){Math['abs'](_0x5c72ad-_0x3dbb39)>0xf4f+-0x1*-0x567+0xa5b*-0x2+0.00001&&(this['data']['handleSize']=Y['clamp'](_0x5c72ad,0x1*0x2319+0x1a94+-0x1*0x3dad,0x3d*0x49+0x41*-0x85+0x1061),this['_updateHan'+'dlePositio'+'nAndSize']());}['_onSetHand'+'leAlignmen'+'t'](){this['_updateHan'+'dlePositio'+'nAndSize']();}['_onSetOrie'+'ntation'](_0x1adb1d,_0x231389,_0x40f5e8){var _0x3ef832;_0x40f5e8!==_0x231389&&((_0x3ef832=this['_handleEnt'+'ity'])!=null&&_0x3ef832['element'])&&(this['_handleEnt'+'ity']['element'][this['_getOpposi'+'teDimensio'+'n']()]=0x1ce5+-0x8e4+-0x1401);}['_updateHan'+'dlePositio'+'nAndSize'](){const _0x39ab3e=this['_handleEnt'+'ity'],_0x19a3f3=_0x39ab3e==null?void(-0x1670+-0x23a7*-0x1+-0xd37):_0x39ab3e['element'];if(_0x39ab3e){const _0x4b139f=_0x39ab3e['getLocalPo'+'sition']();_0x4b139f[this['_getAxis']()]=this['_getHandle'+'Position'](),_0x39ab3e['setLocalPo'+'sition'](_0x4b139f);}_0x19a3f3&&(_0x19a3f3[this['_getDimens'+'ion']()]=this['_getHandle'+'Length']());}['_handlePos'+'itionToScr'+'ollValue'](_0x237b27){return _0x237b27*this['_getSign']()/this['_getUsable'+'TrackLengt'+'h']();}['_scrollVal'+'ueToHandle'+'Position'](_0x369fb8){return _0x369fb8*this['_getSign']()*this['_getUsable'+'TrackLengt'+'h']();}['_getUsable'+'TrackLengt'+'h'](){return Math['max'](this['_getTrackL'+'ength']()-this['_getHandle'+'Length'](),0x4de*0x5+0x1d00+0x2*-0x1aab+0.001);}['_getTrackL'+'ength'](){return this['entity']['element']?this['orientatio'+'n']===Ae?this['entity']['element']['calculated'+'Width']:this['entity']['element']['calculated'+'Height']:-0x34*-0xa3+-0x2459+0x33d*0x1;}['_getHandle'+'Length'](){return this['_getTrackL'+'ength']()*this['handleSize'];}['_getHandle'+'Position'](){return this['_scrollVal'+'ueToHandle'+'Position'](this['value']);}['_getSign'](){return this['orientatio'+'n']===Ae?0x148e+-0x2528+0x109b:-(-0x2412+-0x1610+0x3a23);}['_getAxis'](){return this['orientatio'+'n']===Ae?'x':'y';}['_getDimens'+'ion'](){return this['orientatio'+'n']===Ae?'width':'height';}['_getOpposi'+'teDimensio'+'n'](){return this['orientatio'+'n']===Ae?'height':'width';}['_destroyDr'+'agHelper'](){this['_handleDra'+'gHelper']&&this['_handleDra'+'gHelper']['destroy']();}['_setHandle'+'DraggingEn'+'abled'](_0x34b2f0){this['_handleDra'+'gHelper']&&(this['_handleDra'+'gHelper']['enabled']=_0x34b2f0);}['onEnable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0x1b*-0xb+-0x2*-0x93a+-0x139d));}['onDisable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0x7b+-0x1fff*0x1+0x207b));}['onRemove'](){this['_destroyDr'+'agHelper'](),this['_toggleLif'+'ecycleList'+'eners']('off');}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x2a4aa4,_0x3937e8){_0x2a4aa4['handleEnti'+'ty']&&(this['handleEnti'+'ty']=_0x3937e8[_0x2a4aa4['handleEnti'+'ty']['getGuid']()]);}}h(Pv,'EVENT_SETV'+'ALUE','set:value');class EO{constructor(){h(this,'enabled',!(0x210b+0x38b*0x5+0x1*-0x32c2)),h(this,'orientatio'+'n',Ae),h(this,'value',-0x4e1+0x47*-0x3a+0x14f7),h(this,'handleSize',-0x17c9+0x39e+0x142b*0x1),h(this,'handleEnti'+'ty',null);}}const Lg=[{'name':'enabled','type':'boolean'},{'name':'orientatio'+'n','type':'number'},{'name':'value','type':'number'},{'name':'handleSize','type':'number'}];class bO extends ct{constructor(_0x4e2375){super(_0x4e2375),this['id']='scrollbar',this['ComponentT'+'ype']=Pv,this['DataType']=EO,this['schema']=Lg,this['on']('add',this['_onAddComp'+'onent'],this),this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x5defdb,_0x2a7b9a,_0x513d38){super['initialize'+'ComponentD'+'ata'](_0x5defdb,_0x2a7b9a,Lg),_0x5defdb['handleEnti'+'ty']=_0x2a7b9a['handleEnti'+'ty'];}['_onAddComp'+'onent'](_0x3b9559){_0x3b9559['fire']('scrollbar:'+'add');}['_onRemoveC'+'omponent'](_0x38eadf,_0x5e8bcb){_0x5e8bcb['onRemove']();}}const AO={'volume':0x0,'pitch':0x0,'loop':!(0x246a+-0x1876*0x1+-0xbf3),'startTime':0x0,'duration':0x0,'position':new D(),'maxDistance':0x0,'refDistance':0x0,'rollOffFactor':0x0,'distanceModel':0x0,'onPlay':null,'onPause':null,'onResume':null,'onStop':null,'onEnd':null};class Vi extends me{constructor(_0x1d31d9,_0xcc3093='Untitled',_0x1fc0bb={}){super(),h(this,'name'),h(this,'instances',[]),(this['_component']=_0x1d31d9,this['_assets']=_0x1d31d9['system']['app']['assets'],this['_manager']=_0x1d31d9['system']['manager'],this['name']=_0xcc3093,this['_volume']=_0x1fc0bb['volume']!==void(0x778+0xa46+-0x11be)?Y['clamp'](Number(_0x1fc0bb['volume'])||0x1*0xa75+-0x1622+0xbad,0x14e8+-0x226+0x7*-0x2ae,-0x64e+-0x2407*-0x1+-0x1db8):-0x1aa4+0xa*-0x139+-0xcf5*-0x3,this['_pitch']=_0x1fc0bb['pitch']!==void(0x1af3*0x1+0x121b*0x1+-0x49*0x9e)?Math['max'](-0x20dc+-0x7bf+-0x3b1*-0xb+0.01,Number(_0x1fc0bb['pitch'])||0x5e7+-0x20ff*-0x1+0x17f*-0x1a):-0x2a0+-0x229+0x4ca,this['_loop']=!!(_0x1fc0bb['loop']!==void(0x2667+-0x720+0x1d7*-0x11)&&_0x1fc0bb['loop']),this['_duration']=_0x1fc0bb['duration']>-0x8c3+0x209a+-0x17d7?_0x1fc0bb['duration']:null,this['_startTime']=Math['max'](0x168+-0x1a5*-0x17+-0x273b,Number(_0x1fc0bb['startTime'])||0x80c+0xd91+-0x159d),this['_overlap']=!!_0x1fc0bb['overlap'],this['_autoPlay']=!!_0x1fc0bb['autoPlay'],this['_firstNode']=null,this['_lastNode']=null,this['_asset']=_0x1fc0bb['asset'],this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_onInstanc'+'ePlayHandl'+'er']=this['_onInstanc'+'ePlay']['bind'](this),this['_onInstanc'+'ePauseHand'+'ler']=this['_onInstanc'+'ePause']['bind'](this),this['_onInstanc'+'eResumeHan'+'dler']=this['_onInstanc'+'eResume']['bind'](this),this['_onInstanc'+'eStopHandl'+'er']=this['_onInstanc'+'eStop']['bind'](this),this['_onInstanc'+'eEndHandle'+'r']=this['_onInstanc'+'eEnd']['bind'](this));}['play'](_0x255378){if(this['overlap']||this['stop'](),!this['isLoaded']&&!this['_hasAsset']()){w['warn']('Trying\x20to\x20'+'play\x20Sound'+'Slot\x20'+this['name']+('\x20but\x20it\x20is'+'\x20not\x20loade'+'d\x20and\x20does'+'n\x27t\x20have\x20a'+'n\x20asset.'));return;}let _0x4e0701=_0x255378;if(_0x4e0701||(_0x4e0701=this['_createIns'+'tance'](),this['instances']['push'](_0x4e0701)),this['isLoaded'])_0x4e0701['play']();else{const _0x4b37aa=function(_0x4a46a6){const _0x38b730=_0x4e0701['_playWhenL'+'oaded'];_0x4e0701['sound']=_0x4a46a6,_0x38b730&&_0x4e0701['play']();};this['off']('load',_0x4b37aa),this['once']('load',_0x4b37aa),this['load']();}return _0x4e0701;}['pause'](){let _0x21b428=!(-0x1c0d+0x1e6d+0x1*-0x25f);const _0x1bb400=this['instances'];for(let _0x44ab10=-0xeef*0x1+0x133*-0x16+0x5e7*0x7,_0x532b5f=_0x1bb400['length'];_0x44ab10<_0x532b5f;_0x44ab10++)_0x1bb400[_0x44ab10]['pause']()&&(_0x21b428=!(-0x16e4+-0x9bc+0x20a0));return _0x21b428;}['resume'](){let _0x58d9b4=!(-0x2376*-0x1+0x25a4+-0x4919*0x1);const _0x38be7f=this['instances'];for(let _0x102ff2=0xb*0x2c9+0x212c+0x63*-0xa5,_0x90621f=_0x38be7f['length'];_0x102ff2<_0x90621f;_0x102ff2++)_0x38be7f[_0x102ff2]['resume']()&&(_0x58d9b4=!(0x18e*-0xd+-0x272*-0xa+0x16a*-0x3));return _0x58d9b4;}['stop'](){let _0x13d7ee=!(-0x45f*0x1+-0xd*-0x2b3+-0x3*0xa3d);const _0x1a1691=this['instances'];let _0x1a4ead=_0x1a1691['length'];for(;_0x1a4ead--;)_0x1a1691[_0x1a4ead]['stop'](),_0x13d7ee=!(0x24d+0x10*0xe8+0xb*-0x187);return _0x1a1691['length']=0x2b*0x5+0x29*0x52+-0xdf9,_0x13d7ee;}['load'](){if(!this['_hasAsset']())return;const _0x3adb6e=this['_assets']['get'](this['_asset']);if(!_0x3adb6e){this['_assets']['off']('add:'+this['_asset'],this['_onAssetAd'+'d'],this),this['_assets']['once']('add:'+this['_asset'],this['_onAssetAd'+'d'],this);return;}if(_0x3adb6e['off']('remove',this['_onAssetRe'+'moved'],this),_0x3adb6e['on']('remove',this['_onAssetRe'+'moved'],this),!_0x3adb6e['resource']){_0x3adb6e['off']('load',this['_onAssetLo'+'ad'],this),_0x3adb6e['once']('load',this['_onAssetLo'+'ad'],this),this['_assets']['load'](_0x3adb6e);return;}this['fire']('load',_0x3adb6e['resource']);}['setExterna'+'lNodes'](_0x30ece2,_0x2a741c){if(!_0x30ece2){console['error']('The\x20firstN'+'ode\x20must\x20h'+'ave\x20a\x20vali'+'d\x20AudioNod'+'e');return;}if(_0x2a741c||(_0x2a741c=_0x30ece2),this['_firstNode']=_0x30ece2,this['_lastNode']=_0x2a741c,!this['_overlap']){const _0x3c91dd=this['instances'];for(let _0x397108=0xf8b+0x20ba*0x1+-0x3045,_0x38eb0d=_0x3c91dd['length'];_0x397108<_0x38eb0d;_0x397108++)_0x3c91dd[_0x397108]['setExterna'+'lNodes'](_0x30ece2,_0x2a741c);}}['clearExter'+'nalNodes'](){if(this['_firstNode']=null,this['_lastNode']=null,!this['_overlap']){const _0x230d7d=this['instances'];for(let _0x2d7419=0xc8+0x2*0x63d+-0xd42,_0x131edc=_0x230d7d['length'];_0x2d7419<_0x131edc;_0x2d7419++)_0x230d7d[_0x2d7419]['clearExter'+'nalNodes']();}}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_hasAsset'](){return this['_asset']!=null;}['_createIns'+'tance'](){let _0x58d561=null;const _0x2e9805=this['_component'];let _0x322eb7=null;if(this['_hasAsset']()){const _0x59f79a=this['_assets']['get'](this['_asset']);_0x59f79a&&(_0x322eb7=_0x59f79a['resource']);}const _0x14d0e9=AO;return _0x14d0e9['volume']=this['_volume']*_0x2e9805['volume'],_0x14d0e9['pitch']=this['_pitch']*_0x2e9805['pitch'],_0x14d0e9['loop']=this['_loop'],_0x14d0e9['startTime']=this['_startTime'],_0x14d0e9['duration']=this['_duration'],_0x14d0e9['onPlay']=this['_onInstanc'+'ePlayHandl'+'er'],_0x14d0e9['onPause']=this['_onInstanc'+'ePauseHand'+'ler'],_0x14d0e9['onResume']=this['_onInstanc'+'eResumeHan'+'dler'],_0x14d0e9['onStop']=this['_onInstanc'+'eStopHandl'+'er'],_0x14d0e9['onEnd']=this['_onInstanc'+'eEndHandle'+'r'],_0x2e9805['positional']?(_0x14d0e9['position']['copy'](_0x2e9805['entity']['getPositio'+'n']()),_0x14d0e9['maxDistanc'+'e']=_0x2e9805['maxDistanc'+'e'],_0x14d0e9['refDistanc'+'e']=_0x2e9805['refDistanc'+'e'],_0x14d0e9['rollOffFac'+'tor']=_0x2e9805['rollOffFac'+'tor'],_0x14d0e9['distanceMo'+'del']=_0x2e9805['distanceMo'+'del'],_0x58d561=new Ya(this['_manager'],_0x322eb7,_0x14d0e9)):_0x58d561=new As(this['_manager'],_0x322eb7,_0x14d0e9),this['_firstNode']&&_0x58d561['setExterna'+'lNodes'](this['_firstNode'],this['_lastNode']),_0x58d561;}['_onInstanc'+'ePlay'](_0x56a503){this['fire']('play',_0x56a503),this['_component']['fire']('play',this,_0x56a503);}['_onInstanc'+'ePause'](_0x5c34d8){this['fire']('pause',_0x5c34d8),this['_component']['fire']('pause',this,_0x5c34d8);}['_onInstanc'+'eResume'](_0x4cfc87){this['fire']('resume',_0x4cfc87),this['_component']['fire']('resume',this,_0x4cfc87);}['_onInstanc'+'eStop'](_0x2d2d87){const _0x1ae1f3=this['instances']['indexOf'](_0x2d2d87);_0x1ae1f3!==-(-0xc5*0x16+-0x1998+0x2a87)&&this['instances']['splice'](_0x1ae1f3,-0x14db+-0x5*-0x42b+-0x5*-0x1),this['fire']('stop',_0x2d2d87),this['_component']['fire']('stop',this,_0x2d2d87);}['_onInstanc'+'eEnd'](_0x43c902){const _0x2ca3a7=this['instances']['indexOf'](_0x43c902);_0x2ca3a7!==-(0x249*0x1+-0x2684+0x243c)&&this['instances']['splice'](_0x2ca3a7,0x6fb*-0x4+-0x1*0x10b1+0x2c9e),this['fire']('end',_0x43c902),this['_component']['fire']('end',this,_0x43c902);}['_onAssetAd'+'d'](_0xbfdb86){this['load']();}['_onAssetLo'+'ad'](_0x79192){this['load']();}['_onAssetRe'+'moved'](_0x1ed2df){_0x1ed2df['off']('remove',this['_onAssetRe'+'moved'],this),this['_assets']['off']('add:'+_0x1ed2df['id'],this['_onAssetAd'+'d'],this),this['stop']();}['updatePosi'+'tion'](_0x3d3927){const _0x5d079b=this['instances'];for(let _0x3f5260=0x6c3*0x2+0x14ae+-0x2234,_0x19e412=_0x5d079b['length'];_0x3f5260<_0x19e412;_0x3f5260++)_0x5d079b[_0x3f5260]['position']=_0x3d3927;}set['asset'](_0x5d29e5){const _0xaff014=this['_asset'];if(_0xaff014){this['_assets']['off']('add:'+_0xaff014,this['_onAssetAd'+'d'],this);const _0x4c9efe=this['_assets']['get'](_0xaff014);_0x4c9efe&&_0x4c9efe['off']('remove',this['_onAssetRe'+'moved'],this);}this['_asset']=_0x5d29e5,this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_hasAsset']()&&this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['load']();}get['asset'](){return this['_asset'];}set['autoPlay'](_0x365f9e){this['_autoPlay']=!!_0x365f9e;}get['autoPlay'](){return this['_autoPlay'];}set['duration'](_0x53c610){if(this['_duration']=Math['max'](-0x87e+-0xd22+0x568*0x4,Number(_0x53c610)||0x22ba+0x274+0x1297*-0x2)||null,!this['_overlap']){const _0x17f1c0=this['instances'];for(let _0x1264cf=-0x1aa5+-0x1*0x73+0x1b18,_0x17227e=_0x17f1c0['length'];_0x1264cf<_0x17227e;_0x1264cf++)_0x17f1c0[_0x1264cf]['duration']=this['_duration'];}}get['duration'](){let _0x1c4f49=0xef0+-0xc2d+-0x2c3;if(this['_hasAsset']()){const _0x15ba1f=this['_assets']['get'](this['_asset']);_0x1c4f49=_0x15ba1f!=null&&_0x15ba1f['resource']?_0x15ba1f['resource']['duration']:0x15e8+0x20c8+-0x1f4*0x1c;}return this['_duration']!=null?this['_duration']%(_0x1c4f49||0x5d*-0xb+-0x1*-0x4eb+-0xeb):_0x1c4f49;}get['isLoaded'](){if(this['_hasAsset']()){const _0x5a6bb4=this['_assets']['get'](this['_asset']);if(_0x5a6bb4)return!!_0x5a6bb4['resource'];}return!(-0x7d6+-0x1495+0x1c6c);}get['isPaused'](){const _0x2c8ab7=this['instances'],_0x1ec58e=_0x2c8ab7['length'];if(_0x1ec58e===0x18c+-0xdb2*0x2+-0x4*-0x676)return!(0x1f76*-0x1+-0xa*0x16+0x2053);for(let _0x13b0fe=0x16*-0x1a5+-0x4*0x526+0xd*0x45e;_0x13b0fe<_0x1ec58e;_0x13b0fe++)if(!_0x2c8ab7[_0x13b0fe]['isPaused'])return!(-0x4de+0x249f*-0x1+0x71*0x5e);return!(-0xc9c*0x2+-0x1923+-0x325b*-0x1);}get['isPlaying'](){const _0x912a19=this['instances'];for(let _0x17a39a=-0x1db1+0x1adb+0x2d6,_0x28ae2e=_0x912a19['length'];_0x17a39a<_0x28ae2e;_0x17a39a++)if(_0x912a19[_0x17a39a]['isPlaying'])return!(0x1*0xbb7+-0x1*-0x2215+-0x2dcc);return!(-0x1*-0x2576+-0x7ed*0x1+-0x1d88);}get['isStopped'](){const _0x376410=this['instances'];for(let _0x1243dc=-0x97*-0x1d+0x3*0x1d1+0xb47*-0x2,_0x4619c3=_0x376410['length'];_0x1243dc<_0x4619c3;_0x1243dc++)if(!_0x376410[_0x1243dc]['isStopped'])return!(-0x4*0x517+-0x1fe2+-0x217*-0x19);return!(0x7d7*-0x1+0xbfc*-0x2+0x1fcf);}set['loop'](_0x3ec5b1){this['_loop']=!!_0x3ec5b1;const _0x17ae8a=this['instances'];for(let _0x4f071a=-0x17bc+-0x21f1*-0x1+-0x1*0xa35,_0x56caec=_0x17ae8a['length'];_0x4f071a<_0x56caec;_0x4f071a++)_0x17ae8a[_0x4f071a]['loop']=this['_loop'];}get['loop'](){return this['_loop'];}set['overlap'](_0x2190cd){this['_overlap']=!!_0x2190cd;}get['overlap'](){return this['_overlap'];}set['pitch'](_0xdd3a24){if(this['_pitch']=Math['max'](Number(_0xdd3a24)||0x14e5*0x1+-0x1891+0x3ac,0xbc4+-0x5ee+0xa6*-0x9+0.01),!this['_overlap']){const _0x46a056=this['instances'];for(let _0x115c0a=0xc70+-0xf8b+0x31b,_0x33a8f4=_0x46a056['length'];_0x115c0a<_0x33a8f4;_0x115c0a++)_0x46a056[_0x115c0a]['pitch']=this['pitch']*this['_component']['pitch'];}}get['pitch'](){return this['_pitch'];}set['startTime'](_0xd002d2){if(this['_startTime']=Math['max'](0x2*-0x73a+-0x137c+0x21f*0x10,Number(_0xd002d2)||0x1*-0x1da5+0x28*-0x49+-0x71*-0x5d),!this['_overlap']){const _0x42088c=this['instances'];for(let _0x3f049e=0x5*0x3b+-0x1427+0x1300,_0x2a86b0=_0x42088c['length'];_0x3f049e<_0x2a86b0;_0x3f049e++)_0x42088c[_0x3f049e]['startTime']=this['_startTime'];}}get['startTime'](){return this['_startTime'];}set['volume'](_0x3c515d){if(this['_volume']=Y['clamp'](Number(_0x3c515d)||-0x19ed+0x12f4+0x6f9,-0x1*-0x42d+0x5a8+-0x9d5,0x7e7+-0x2*0xe59+0x14cc),!this['_overlap']){const _0x48fd11=this['instances'];for(let _0x533a57=0x88f*-0x3+0x1081+0x92c,_0xf595d7=_0x48fd11['length'];_0x533a57<_0xf595d7;_0x533a57++)_0x48fd11[_0x533a57]['volume']=this['_volume']*this['_component']['volume'];}}get['volume'](){return this['_volume'];}}h(Vi,'EVENT_PLAY','play'),h(Vi,'EVENT_PAUS'+'E','pause'),h(Vi,'EVENT_RESU'+'ME','resume'),h(Vi,'EVENT_STOP','stop'),h(Vi,'EVENT_END','end'),h(Vi,'EVENT_LOAD','load');class Xr extends we{constructor(){super(...arguments),h(this,'_volume',0x1*-0x18f3+0x4*0xc2+0x7a*0x2e),h(this,'_pitch',-0x71f*-0x4+-0x386+0x1*-0x18f5),h(this,'_positiona'+'l',!(-0x1*-0x805+0x10*-0x10+-0x705)),h(this,'_refDistan'+'ce',0xe0b+-0x25b7+-0xb*-0x227),h(this,'_maxDistan'+'ce',-0xb*0xfc+0x619*0xc+-0x1748),h(this,'_rollOffFa'+'ctor',0x1d*-0x10d+-0x655*-0x1+0x373*0x7),h(this,'_distanceM'+'odel',pp),h(this,'_slots',{}),h(this,'_playingBe'+'foreDisabl'+'e',{});}['_updateSou'+'ndInstance'+'s'](_0x58d5a9,_0xa687ef,_0x53e7a8){const _0x4bf5ab=this['_slots'];for(const _0x533090 in _0x4bf5ab){const _0x54ea1d=_0x4bf5ab[_0x533090];if(!_0x54ea1d['overlap']){const _0x18f99f=_0x54ea1d['instances'];for(let _0x45f873=0xc5b*-0x2+-0x9d*-0x1+0x1819*0x1,_0x18336d=_0x18f99f['length'];_0x45f873<_0x18336d;_0x45f873++)_0x18f99f[_0x45f873][_0x58d5a9]=_0x53e7a8?_0x54ea1d[_0x58d5a9]*_0xa687ef:_0xa687ef;}}}set['distanceMo'+'del'](_0x28ea23){this['_distanceM'+'odel']=_0x28ea23,this['_updateSou'+'ndInstance'+'s']('distanceMo'+'del',_0x28ea23,!(-0x11a6+0x21b2+-0x100b));}get['distanceMo'+'del'](){return this['_distanceM'+'odel'];}set['maxDistanc'+'e'](_0x5d5666){this['_maxDistan'+'ce']=_0x5d5666,this['_updateSou'+'ndInstance'+'s']('maxDistanc'+'e',_0x5d5666,!(-0xc69+0x3*-0xc1d+0x7*0x6f7));}get['maxDistanc'+'e'](){return this['_maxDistan'+'ce'];}set['refDistanc'+'e'](_0x2fc4a0){this['_refDistan'+'ce']=_0x2fc4a0,this['_updateSou'+'ndInstance'+'s']('refDistanc'+'e',_0x2fc4a0,!(-0x5*0x1bf+-0xd*-0xf4+-0x3a8));}get['refDistanc'+'e'](){return this['_refDistan'+'ce'];}set['rollOffFac'+'tor'](_0x1e7b01){this['_rollOffFa'+'ctor']=_0x1e7b01,this['_updateSou'+'ndInstance'+'s']('rollOffFac'+'tor',_0x1e7b01,!(-0xa7+0x3*-0x5c+0x1bc));}get['rollOffFac'+'tor'](){return this['_rollOffFa'+'ctor'];}set['pitch'](_0x323435){this['_pitch']=_0x323435,this['_updateSou'+'ndInstance'+'s']('pitch',_0x323435,!(-0x18ff+0x7d+0xc41*0x2));}get['pitch'](){return this['_pitch'];}set['volume'](_0x40ced4){this['_volume']=_0x40ced4,this['_updateSou'+'ndInstance'+'s']('volume',_0x40ced4,!(0x70+-0x1cf4+0x19*0x124));}get['volume'](){return this['_volume'];}set['positional'](_0x4a57e0){this['_positiona'+'l']=_0x4a57e0;const _0xb1b5f5=this['_slots'];for(const _0x3fb310 in _0xb1b5f5){const _0x271fb2=_0xb1b5f5[_0x3fb310];if(!_0x271fb2['overlap']){const _0xbd90c6=_0x271fb2['instances'],_0x16c0cc=_0xbd90c6['length'];for(let _0x681d4f=_0x16c0cc-(0x1b21+0x11bb+-0x2cdb);_0x681d4f>=-0x1880+-0x17be+0x303e;_0x681d4f--){const _0x104afa=_0xbd90c6[_0x681d4f]['isPlaying']||_0xbd90c6[_0x681d4f]['isSuspende'+'d'],_0x375e4a=_0xbd90c6[_0x681d4f]['currentTim'+'e'];_0x104afa&&_0xbd90c6[_0x681d4f]['stop']();const _0x42ba8=_0x271fb2['_createIns'+'tance']();_0x104afa&&(_0x42ba8['play'](),_0x42ba8['currentTim'+'e']=_0x375e4a),_0xbd90c6['push'](_0x42ba8);}}}}get['positional'](){return this['_positiona'+'l'];}set['slots'](_0x191b03){const _0x2845c1=this['_slots'];if(_0x2845c1){for(const _0x2c68db in _0x2845c1)_0x2845c1[_0x2c68db]['stop']();}const _0x8076b5={};for(const _0x14e038 in _0x191b03)_0x191b03[_0x14e038]instanceof Vi?_0x8076b5[_0x191b03[_0x14e038]['name']]=_0x191b03[_0x14e038]:_0x191b03[_0x14e038]['name']&&(_0x8076b5[_0x191b03[_0x14e038]['name']]=new Vi(this,_0x191b03[_0x14e038]['name'],_0x191b03[_0x14e038]));this['_slots']=_0x8076b5,this['enabled']&&this['entity']['enabled']&&this['onEnable']();}get['slots'](){return this['_slots'];}['onEnable'](){if(this['system']['_inTools'])return;const _0x29cbdc=this['_slots'],_0x53ea73=this['_playingBe'+'foreDisabl'+'e'];for(const _0xa01f6e in _0x29cbdc){const _0x1dcd70=_0x29cbdc[_0xa01f6e];_0x1dcd70['autoPlay']&&_0x1dcd70['isStopped']?_0x1dcd70['play']():_0x53ea73[_0xa01f6e]?_0x1dcd70['resume']():_0x1dcd70['isLoaded']||_0x1dcd70['load']();}}['onDisable'](){const _0x329344=this['_slots'],_0x57769f={};for(const _0x3ab424 in _0x329344)_0x329344[_0x3ab424]['overlap']||_0x329344[_0x3ab424]['isPlaying']&&(_0x329344[_0x3ab424]['pause'](),_0x57769f[_0x3ab424]=!(-0xb*-0xf7+-0x5*-0x523+0x17*-0x194));this['_playingBe'+'foreDisabl'+'e']=_0x57769f;}['onRemove'](){this['off']();}['addSlot'](_0x1d32d3,_0x54bb68){const _0x12d0bb=this['_slots'];if(_0x12d0bb[_0x1d32d3])return w['warn']('A\x20sound\x20sl'+'ot\x20with\x20na'+'me\x20'+_0x1d32d3+('\x20already\x20e'+'xists\x20on\x20E'+'ntity\x20')+this['entity']['path']),null;const _0x1fef78=new Vi(this,_0x1d32d3,_0x54bb68);return _0x12d0bb[_0x1d32d3]=_0x1fef78,_0x1fef78['autoPlay']&&this['enabled']&&this['entity']['enabled']&&_0x1fef78['play'](),_0x1fef78;}['removeSlot'](_0x1ac5f0){const _0x3a0162=this['_slots'];_0x3a0162[_0x1ac5f0]&&(_0x3a0162[_0x1ac5f0]['stop'](),delete _0x3a0162[_0x1ac5f0]);}['slot'](_0x1ff25a){return this['_slots'][_0x1ff25a];}['_getSlotPr'+'operty'](_0x5bbb42,_0x141dea){if(!this['enabled']||!this['entity']['enabled'])return;const _0x379dde=this['_slots'][_0x5bbb42];if(!_0x379dde){w['warn']('Trying\x20to\x20'+'get\x20'+_0x141dea+('\x20from\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20')+_0x5bbb42+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}return _0x379dde[_0x141dea];}['isPlaying'](_0x27d378){return this['_getSlotPr'+'operty'](_0x27d378,'isPlaying')||!(-0x1011+-0x1272+0x2284);}['isLoaded'](_0x22e951){return this['_getSlotPr'+'operty'](_0x22e951,'isLoaded')||!(-0x20b*0x5+0x1684+-0xc4c*0x1);}['isPaused'](_0x1cd28b){return this['_getSlotPr'+'operty'](_0x1cd28b,'isPaused')||!(0x1f47+0x1d7b*-0x1+-0x33*0x9);}['isStopped'](_0x273901){return this['_getSlotPr'+'operty'](_0x273901,'isStopped')||!(0x7*0x35d+0x16*0x61+-0x66*0x50);}['play'](_0x279fdd){if(!this['enabled']||!this['entity']['enabled'])return null;const _0x4f6db0=this['_slots'][_0x279fdd];return _0x4f6db0?_0x4f6db0['play']():(w['warn']('Trying\x20to\x20'+'play\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x279fdd+('\x20which\x20doe'+'s\x20not\x20exis'+'t')),null);}['pause'](_0x4095a3){const _0x267b71=this['_slots'];if(_0x4095a3){const _0x8dc7d3=_0x267b71[_0x4095a3];if(!_0x8dc7d3){w['warn']('Trying\x20to\x20'+'pause\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20'+_0x4095a3+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x8dc7d3['pause']();}else{for(const _0x31bcc3 in _0x267b71)_0x267b71[_0x31bcc3]['pause']();}}['resume'](_0x2ecda7){const _0x2e9db2=this['_slots'];if(_0x2ecda7){const _0x4f05b8=_0x2e9db2[_0x2ecda7];if(!_0x4f05b8){w['warn']('Trying\x20to\x20'+'resume\x20sou'+'nd\x20slot\x20wi'+'th\x20name\x20'+_0x2ecda7+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x4f05b8['isPaused']&&_0x4f05b8['resume']();}else{for(const _0x32bf3e in _0x2e9db2)_0x2e9db2[_0x32bf3e]['resume']();}}['stop'](_0x5c81f7){const _0x2a2ce3=this['_slots'];if(_0x5c81f7){const _0x34529e=_0x2a2ce3[_0x5c81f7];if(!_0x34529e){w['warn']('Trying\x20to\x20'+'stop\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x5c81f7+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x34529e['stop']();}else{for(const _0x21a8a7 in _0x2a2ce3)_0x2a2ce3[_0x21a8a7]['stop']();}}}h(Xr,'EVENT_PLAY','play'),h(Xr,'EVENT_PAUS'+'E','pause'),h(Xr,'EVENT_RESU'+'ME','resume'),h(Xr,'EVENT_STOP','stop'),h(Xr,'EVENT_END','end');class CO{constructor(){this['enabled']=!(0x1e1f+0x44e+0x1*-0x226d);}}const Mv=['enabled'];class PO extends ct{constructor(_0xb44ec9){super(_0xb44ec9),this['id']='sound',this['ComponentT'+'ype']=Xr,this['DataType']=CO,this['schema']=Mv,this['manager']=_0xb44ec9['soundManag'+'er'],w['assert'](this['manager'],'SoundCompo'+'nentSystem'+'\x20cannot\x20be'+'\x20created\x20w'+'ithout\x20sou'+'nd\x20manager'),this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['volume'](_0x20a2a1){this['manager']['volume']=_0x20a2a1;}get['volume'](){return this['manager']['volume'];}get['context'](){return gl()?this['manager']['context']:(w['warn']('WARNING:\x20A'+'udio\x20conte'+'xt\x20is\x20not\x20'+'supported\x20'+'on\x20this\x20br'+'owser'),null);}['initialize'+'ComponentD'+'ata'](_0x5cc90f,_0x132c50,_0x3745db){_0x3745db=['volume','pitch','positional','refDistanc'+'e','maxDistanc'+'e','rollOffFac'+'tor','distanceMo'+'del','slots'];for(let _0x866fac=-0x1a*-0x4e+0xdb7+-0x15a3;_0x866fac<_0x3745db['length'];_0x866fac++)_0x132c50['hasOwnProp'+'erty'](_0x3745db[_0x866fac])&&(_0x5cc90f[_0x3745db[_0x866fac]]=_0x132c50[_0x3745db[_0x866fac]]);super['initialize'+'ComponentD'+'ata'](_0x5cc90f,_0x132c50,['enabled']);}['cloneCompo'+'nent'](_0x3db1b5,_0x4a9330){const _0x37aa08=_0x3db1b5['sound'],_0xb999b1=_0x37aa08['slots'],_0x4399f4={};for(const _0x16d59d in _0xb999b1){const _0x20eaf2=_0xb999b1[_0x16d59d];_0x4399f4[_0x16d59d]={'name':_0x20eaf2['name'],'volume':_0x20eaf2['volume'],'pitch':_0x20eaf2['pitch'],'loop':_0x20eaf2['loop'],'duration':_0x20eaf2['duration'],'startTime':_0x20eaf2['startTime'],'overlap':_0x20eaf2['overlap'],'autoPlay':_0x20eaf2['autoPlay'],'asset':_0x20eaf2['asset']};}const _0x20c73c={'distanceModel':_0x37aa08['distanceMo'+'del'],'enabled':_0x37aa08['enabled'],'maxDistance':_0x37aa08['maxDistanc'+'e'],'pitch':_0x37aa08['pitch'],'positional':_0x37aa08['positional'],'refDistance':_0x37aa08['refDistanc'+'e'],'rollOffFactor':_0x37aa08['rollOffFac'+'tor'],'slots':_0x4399f4,'volume':_0x37aa08['volume']};return this['addCompone'+'nt'](_0x4a9330,_0x20c73c);}['onUpdate'](_0x4fcf46){const _0x4b24e1=this['store'];for(const _0x5c3e5f in _0x4b24e1)if(_0x4b24e1['hasOwnProp'+'erty'](_0x5c3e5f)){const _0x4c54ef=_0x4b24e1[_0x5c3e5f]['entity'];if(_0x4c54ef['enabled']){const _0x2b67d7=_0x4c54ef['sound'];if(_0x2b67d7['enabled']&&_0x2b67d7['positional']){const _0x4afd74=_0x4c54ef['getPositio'+'n'](),_0x3a8997=_0x2b67d7['slots'];for(const _0x255d62 in _0x3a8997)_0x3a8997[_0x255d62]['updatePosi'+'tion'](_0x4afd74);}}}}['onBeforeRe'+'move'](_0x7c2bd6,_0x3267db){const _0x11dded=_0x3267db['slots'];for(const _0x4b900e in _0x11dded)_0x11dded[_0x4b900e]['overlap']||_0x11dded[_0x4b900e]['stop']();_0x3267db['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Xr['prototype'],Mv);const Rg='simple',Og='animated';class Gi extends me{constructor(_0x6842da,_0x1a8c4f){super(),h(this,'_evtSetMes'+'hes',null),(this['_component']=_0x6842da,this['_frame']=0x1863+-0x59*0x53+0x478,this['_sprite']=null,this['_spriteAss'+'et']=null,this['spriteAsse'+'t']=_0x1a8c4f['spriteAsse'+'t'],this['name']=_0x1a8c4f['name'],this['fps']=_0x1a8c4f['fps']||0x44f*0x5+0xa88+0xab1*-0x3,this['loop']=_0x1a8c4f['loop']||!(-0x81*-0x3d+-0x1*-0x1c06+-0x3ac2),this['_playing']=!(-0x43*0x3f+0x226*-0x11+0x3504),this['_paused']=!(-0x2*-0x1249+-0x5*0x464+-0x57*0x2b),this['_time']=-0x24a1+-0x844*0x2+0x3529);}get['duration'](){if(this['_sprite']){const _0x13339b=this['fps']||Number['MIN_VALUE'];return this['_sprite']['frameKeys']['length']/Math['abs'](_0x13339b);}return-0x1696+0x11*0x1c0+-0x72a;}set['frame'](_0x4eb3d4){this['_setFrame'](_0x4eb3d4);const _0x3a9934=this['fps']||Number['MIN_VALUE'];this['_setTime'](this['_frame']/_0x3a9934);}get['frame'](){return this['_frame'];}get['isPaused'](){return this['_paused'];}get['isPlaying'](){return this['_playing'];}set['sprite'](_0x4a3f2a){var _0x243eea;if(this['_sprite']&&((_0x243eea=this['_evtSetMes'+'hes'])==null||_0x243eea['off'](),this['_evtSetMes'+'hes']=null,this['_sprite']['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['off']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['off']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_sprite']=_0x4a3f2a,this['_sprite']&&(this['_evtSetMes'+'hes']=this['_sprite']['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['on']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['on']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_component']['currentCli'+'p']===this){let _0x1803f6;!_0x4a3f2a||!_0x4a3f2a['atlas']?(_0x1803f6=this['_component']['_meshInsta'+'nce'],_0x1803f6&&(_0x1803f6['deletePara'+'meter']('texture_em'+'issiveMap'),_0x1803f6['deletePara'+'meter']('texture_op'+'acityMap')),this['_component']['_hideModel']()):(_0x4a3f2a['atlas']['texture']&&(_0x1803f6=this['_component']['_meshInsta'+'nce'],_0x1803f6&&(_0x1803f6['setParamet'+'er']('texture_em'+'issiveMap',_0x4a3f2a['atlas']['texture']),_0x1803f6['setParamet'+'er']('texture_op'+'acityMap',_0x4a3f2a['atlas']['texture'])),this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['_component']['_showModel']()),this['time']&&this['fps']?this['time']=this['time']:this['frame']=this['frame']);}}get['sprite'](){return this['_sprite'];}set['spriteAsse'+'t'](_0x5a9820){const _0x27f06c=this['_component']['system']['app']['assets'];let _0x4c7fcf=_0x5a9820;if(_0x5a9820 instanceof pe&&(_0x4c7fcf=_0x5a9820['id']),this['_spriteAss'+'et']!==_0x4c7fcf){if(this['_spriteAss'+'et']){const _0x3be516=_0x27f06c['get'](this['_spriteAss'+'et']);_0x3be516&&this['_unbindSpr'+'iteAsset'](_0x3be516);}if(this['_spriteAss'+'et']=_0x4c7fcf,this['_spriteAss'+'et']){const _0xac537c=_0x27f06c['get'](this['_spriteAss'+'et']);_0xac537c?this['_bindSprit'+'eAsset'](_0xac537c):(this['sprite']=null,_0x27f06c['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['time'](_0x481f56){this['_setTime'](_0x481f56),this['_sprite']?this['frame']=Math['min'](this['_sprite']['frameKeys']['length']-(0x1cd+-0x3*0xb1d+0x11*0x1db),Math['floor'](this['_time']*Math['abs'](this['fps']))):this['frame']=0x152*-0x2+0x22*0x97+-0x116a;}get['time'](){return this['_time'];}['_onSpriteA'+'ssetAdded'](_0x24d7dd){this['_component']['system']['app']['assets']['off']('add:'+_0x24d7dd['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x24d7dd['id']&&this['_bindSprit'+'eAsset'](_0x24d7dd);}['_bindSprit'+'eAsset'](_0x4ee74c){_0x4ee74c['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x4ee74c['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x4ee74c['resource']?this['_onSpriteA'+'ssetLoad'](_0x4ee74c):this['_component']['system']['app']['assets']['load'](_0x4ee74c);}['_unbindSpr'+'iteAsset'](_0x580d2f){_0x580d2f&&(_0x580d2f['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x580d2f['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x580d2f['resource']&&!_0x580d2f['resource']['atlas']&&this['_component']['system']['app']['assets']['off']('load:'+_0x580d2f['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this));}['_onSpriteA'+'ssetLoad'](_0x527a5b){if(!_0x527a5b['resource'])this['sprite']=null;else{if(_0x527a5b['resource']['atlas'])this['sprite']=_0x527a5b['resource'];else{const _0x251d59=_0x527a5b['data']['textureAtl'+'asAsset'],_0x188504=this['_component']['system']['app']['assets'];_0x188504['off']('load:'+_0x251d59,this['_onTexture'+'AtlasLoad'],this),_0x188504['once']('load:'+_0x251d59,this['_onTexture'+'AtlasLoad'],this);}}}['_onTexture'+'AtlasLoad'](_0x2c2187){const _0x137d42=this['_spriteAss'+'et'];_0x137d42 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x137d42):this['_onSpriteA'+'ssetLoad'](this['_component']['system']['app']['assets']['get'](_0x137d42));}['_onSpriteA'+'ssetRemove'](_0xdc227e){this['sprite']=null;}['_onSpriteM'+'eshesChang'+'e'](){this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['frame']);}['_onSpriteP'+'puChanged'](){this['_component']['currentCli'+'p']===this&&this['sprite']['renderMode']!==ci&&this['_component']['_showFrame'](this['frame']);}['_update'](_0x2fb84d){if(this['fps']===-0x2544+-0x21df*-0x1+0x4f*0xb||!this['_playing']||this['_paused']||!this['_sprite'])return;const _0x479927=this['fps']<-0x55e+0x1a42+-0x14e4?-(-0x2*0x6de+-0x179b*0x1+-0xa*-0x3bc):0x3*0x233+-0x2*0x778+0x858,_0x307194=this['_time']+_0x2fb84d*this['_component']['speed']*_0x479927,_0xa71b6c=this['duration'],_0x216ea1=_0x307194>_0xa71b6c||_0x307194<-0xbc3*0x1+0x2*-0xbd4+-0x1*-0x236b;this['_setTime'](_0x307194);let _0x2e0d58=this['frame'];this['_sprite']?_0x2e0d58=Math['floor'](this['_sprite']['frameKeys']['length']*this['_time']/_0xa71b6c):_0x2e0d58=0x98f*0x1+0x10*-0x11b+0x821,_0x2e0d58!==this['_frame']&&this['_setFrame'](_0x2e0d58),_0x216ea1&&(this['loop']?(this['fire']('loop'),this['_component']['fire']('loop',this)):(this['_playing']=!(0x4*0x9ae+0x18eb+0x1e*-0x21f),this['_paused']=!(-0x15c*-0x1+0x563+-0x6be),this['fire']('end'),this['_component']['fire']('end',this)));}['_setTime'](_0x275bca){this['_time']=_0x275bca;const _0xc61d3f=this['duration'];this['_time']<0xed7+0x1*0x1072+-0x1f49?this['loop']?this['_time']=this['_time']%_0xc61d3f+_0xc61d3f:this['_time']=0x3d9*0x3+0x1b00+-0x268b:this['_time']>_0xc61d3f&&(this['loop']?this['_time']%=_0xc61d3f:this['_time']=_0xc61d3f);}['_setFrame'](_0xac40ff){this['_sprite']?this['_frame']=Y['clamp'](_0xac40ff,-0x1e13*-0x1+-0x2623+0x810,this['_sprite']['frameKeys']['length']-(0x7b*-0x3+0x1*-0x2109+0x227b)):this['_frame']=_0xac40ff,this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['_frame']);}['_destroy'](){if(this['_spriteAss'+'et']){const _0x589b16=this['_component']['system']['app']['assets'];this['_unbindSpr'+'iteAsset'](_0x589b16['get'](this['_spriteAss'+'et']));}this['_sprite']&&(this['sprite']=null),this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null);}['play'](){this['_playing']||(this['_playing']=!(0x212d+0x270d+0x2*-0x241d),this['_paused']=!(-0x7d*-0x3e+0x1237*-0x1+-0xc0e),this['frame']=0x9*-0x284+0xc7a+-0xa2a*-0x1,this['fire']('play'),this['_component']['fire']('play',this));}['pause'](){!this['_playing']||this['_paused']||(this['_paused']=!(-0x1*-0x184d+-0x1*-0x21e2+-0x3a2f),this['fire']('pause'),this['_component']['fire']('pause',this));}['resume'](){this['_paused']&&(this['_paused']=!(-0x3aa*0x5+0x1c74+-0xa21*0x1),this['fire']('resume'),this['_component']['fire']('resume',this));}['stop'](){this['_playing']&&(this['_playing']=!(0xa27+0x2*0xc0c+0xb6a*-0x3),this['_paused']=!(0x1856+-0xe57*-0x1+-0xce4*0x3),this['_time']=0x7a6+-0xc0+-0x6e6,this['frame']=-0x1ead+0x251*0xd+0x90,this['fire']('stop'),this['_component']['fire']('stop',this));}}h(Gi,'EVENT_PLAY','play'),h(Gi,'EVENT_PAUS'+'E','pause'),h(Gi,'EVENT_RESU'+'ME','resume'),h(Gi,'EVENT_STOP','stop'),h(Gi,'EVENT_END','end'),h(Gi,'EVENT_LOOP','loop');const Fg='texture_em'+'issiveMap',Ng='texture_op'+'acityMap',kg='material_e'+'missive',Ug='material_o'+'pacity',MO='innerOffse'+'t',DO='outerScale',IO='atlasRect';class cr extends we{constructor(_0x424c56,_0x3d60c4){super(_0x424c56,_0x3d60c4),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_type']=Rg,this['_material']=_0x424c56['defaultMat'+'erial'],this['_color']=new ie(-0x1d*0x4f+0x1*0x1219+-0x925,0x926*-0x2+0xaff+0x74e,0x26b8+-0x1*0x445+-0x2272*0x1,-0x1355+-0xcc7*0x1+0x1*0x201d),this['_colorUnif'+'orm']=new Float32Array(0x1dc9+0x1a85+-0x384b),this['_speed']=-0x2f2*0x8+-0x26f5+0x3e86,this['_flipX']=!(-0x2e6+-0x22*-0xc1+-0x16bb),this['_flipY']=!(-0xd*0xb3+0x1*-0x1dc5+-0x26dd*-0x1),this['_width']=0xc31+0x1adc+-0x2ca*0xe,this['_height']=0x23a1+-0x1884+-0xed*0xc,this['_drawOrder']=-0x15aa*0x1+-0x7c8+-0xeb9*-0x2,this['_layers']=[Ji],this['_outerScal'+'e']=new J(0x22c6+0x11*-0x83+-0x5e*0x47,0x18c0+-0x1861+-0x5e),this['_outerScal'+'eUniform']=new Float32Array(0x141f+-0x1679+0x25c),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(0x189e+0x1f20+-0x37ba),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(-0x22*-0x68+0x1*0x15e7+-0xd*0x2bf),this['_batchGrou'+'pId']=-(0x18a+-0x232f+0x21a6),this['_batchGrou'+'p']=null,this['_node']=new Ie(),this['_model']=new tr(),this['_model']['graph']=this['_node'],this['_meshInsta'+'nce']=null,_0x3d60c4['addChild'](this['_model']['graph']),this['_model']['_entity']=_0x3d60c4,this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_addedMode'+'l']=!(-0x21e*0x2+0x4a*-0x4+0x565),this['_autoPlayC'+'lip']=null,this['_clips']={},this['_defaultCl'+'ip']=new Gi(this,{'name':this['entity']['name'],'fps':0x0,'loop':!(-0x1*-0x1183+-0x26b0+0x152e),'spriteAsset':null}),this['_currentCl'+'ip']=this['_defaultCl'+'ip']);}set['type'](_0x30643a){this['_type']!==_0x30643a&&(this['_type']=_0x30643a,this['_type']===Rg?(this['stop'](),this['_currentCl'+'ip']=this['_defaultCl'+'ip'],this['enabled']&&this['entity']['enabled']&&(this['_currentCl'+'ip']['frame']=this['frame'],this['_currentCl'+'ip']['sprite']?this['_showModel']():this['_hideModel']())):this['_type']===Og&&(this['stop'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_currentCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['enabled']&&this['entity']['enabled']?this['_showModel']():this['_hideModel']()));}get['type'](){return this['_type'];}set['frame'](_0x1714d8){this['_currentCl'+'ip']['frame']=_0x1714d8;}get['frame'](){return this['_currentCl'+'ip']['frame'];}set['spriteAsse'+'t'](_0x2f7378){this['_defaultCl'+'ip']['spriteAsse'+'t']=_0x2f7378;}get['spriteAsse'+'t'](){return this['_defaultCl'+'ip']['_spriteAss'+'et'];}set['sprite'](_0xfb8a5d){this['_currentCl'+'ip']['sprite']=_0xfb8a5d;}get['sprite'](){return this['_currentCl'+'ip']['sprite'];}set['material'](_0x538091){this['_material']=_0x538091,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=_0x538091);}get['material'](){return this['_material'];}set['color'](_0x151fc9){this['_color']['r']=_0x151fc9['r'],this['_color']['g']=_0x151fc9['g'],this['_color']['b']=_0x151fc9['b'],this['_meshInsta'+'nce']&&(this['_colorUnif'+'orm'][0x1930+-0xfde+-0x952]=this['_color']['r'],this['_colorUnif'+'orm'][0x1729+0x6*-0x3d3+-0x36]=this['_color']['g'],this['_colorUnif'+'orm'][-0x110f*-0x2+0xbd1+-0xf4f*0x3]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](kg,this['_colorUnif'+'orm']));}get['color'](){return this['_color'];}set['opacity'](_0x2fa3c6){this['_color']['a']=_0x2fa3c6,this['_meshInsta'+'nce']&&this['_meshInsta'+'nce']['setParamet'+'er'](Ug,_0x2fa3c6);}get['opacity'](){return this['_color']['a'];}set['clips'](_0x4b9805){if(!_0x4b9805){for(const _0x4f1f54 in this['_clips'])this['removeClip'](_0x4f1f54);return;}for(const _0x2fbf3e in this['_clips']){let _0x50973a=!(-0x635*0x5+0x9c5*-0x1+0x28cf);for(const _0x251765 in _0x4b9805)if(_0x4b9805[_0x251765]['name']===_0x2fbf3e){_0x50973a=!(0x1ddc+0x1*-0x1335+-0xaa7),this['_clips'][_0x2fbf3e]['fps']=_0x4b9805[_0x251765]['fps'],this['_clips'][_0x2fbf3e]['loop']=_0x4b9805[_0x251765]['loop'],_0x4b9805[_0x251765]['hasOwnProp'+'erty']('sprite')?this['_clips'][_0x2fbf3e]['sprite']=_0x4b9805[_0x251765]['sprite']:_0x4b9805[_0x251765]['hasOwnProp'+'erty']('spriteAsse'+'t')&&(this['_clips'][_0x2fbf3e]['spriteAsse'+'t']=_0x4b9805[_0x251765]['spriteAsse'+'t']);break;}_0x50973a||this['removeClip'](_0x2fbf3e);}for(const _0x5c6fa8 in _0x4b9805)this['_clips'][_0x4b9805[_0x5c6fa8]['name']]||this['addClip'](_0x4b9805[_0x5c6fa8]);this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['sprite'])&&this['_hideModel']();}get['clips'](){return this['_clips'];}get['currentCli'+'p'](){return this['_currentCl'+'ip'];}set['speed'](_0x119c23){this['_speed']=_0x119c23;}get['speed'](){return this['_speed'];}set['flipX'](_0x1cb18b){this['_flipX']!==_0x1cb18b&&(this['_flipX']=_0x1cb18b,this['_updateTra'+'nsform']());}get['flipX'](){return this['_flipX'];}set['flipY'](_0x153c73){this['_flipY']!==_0x153c73&&(this['_flipY']=_0x153c73,this['_updateTra'+'nsform']());}get['flipY'](){return this['_flipY'];}set['width'](_0x169afd){_0x169afd!==this['_width']&&(this['_width']=_0x169afd,this['_outerScal'+'e']['x']=this['_width'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['width'](){return this['_width'];}set['height'](_0x5136b7){_0x5136b7!==this['_height']&&(this['_height']=_0x5136b7,this['_outerScal'+'e']['y']=this['height'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['height'](){return this['_height'];}set['batchGroup'+'Id'](_0xe0b03b){var _0x50940c,_0xf6ed92;if(this['_batchGrou'+'pId']===_0xe0b03b)return;const _0x45cb52=this['_batchGrou'+'pId'];this['_batchGrou'+'pId']=_0xe0b03b,this['entity']['enabled']&&_0x45cb52>=0x16a5+-0x484+-0x5b*0x33&&((_0x50940c=this['system']['app']['batcher'])==null||_0x50940c['remove'](St['SPRITE'],_0x45cb52,this['entity'])),this['entity']['enabled']&&_0xe0b03b>=-0x1c80+0xc2f+0x1051?(_0xf6ed92=this['system']['app']['batcher'])==null||_0xf6ed92['insert'](St['SPRITE'],_0xe0b03b,this['entity']):_0x45cb52>=-0x952+-0x63f*0x6+0x2ecc&&this['_currentCl'+'ip']&&this['_currentCl'+'ip']['sprite']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['autoPlayCl'+'ip'](_0x89bd13){this['_autoPlayC'+'lip']=_0x89bd13 instanceof Gi?_0x89bd13['name']:_0x89bd13,this['_tryAutoPl'+'ay']();}get['autoPlayCl'+'ip'](){return this['_autoPlayC'+'lip'];}set['drawOrder'](_0x1f005d){this['_drawOrder']=_0x1f005d,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['drawOrder']=_0x1f005d);}get['drawOrder'](){return this['_drawOrder'];}set['layers'](_0x394bab){this['_addedMode'+'l']&&this['_hideModel'](),this['_layers']=_0x394bab,this['_meshInsta'+'nce']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['layers'](){return this['_layers'];}get['aabb'](){return this['_meshInsta'+'nce']?this['_meshInsta'+'nce']['aabb']:null;}['onEnable'](){var _0x2ae615;const _0x3a7407=this['system']['app'],_0x1bdb00=_0x3a7407['scene'],_0x2c95c4=_0x1bdb00['layers'];this['_evtLayers'+'Changed']=_0x1bdb00['on']('set:layers',this['_onLayersC'+'hanged'],this),_0x2c95c4&&(this['_evtLayerA'+'dded']=_0x2c95c4['on']('add',this['_onLayerAd'+'ded'],this),this['_evtLayerR'+'emoved']=_0x2c95c4['on']('remove',this['_onLayerRe'+'moved'],this)),this['_showModel'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_batchGrou'+'pId']>=-0x1460+-0x1aa2+-0x446*-0xb&&((_0x2ae615=_0x3a7407['batcher'])==null||_0x2ae615['insert'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDisable'](){var _0x516986,_0x179304,_0x24df05,_0x36e8e7;const _0x117d57=this['system']['app'],_0x9a17ea=_0x117d57['scene']['layers'];(_0x516986=this['_evtLayers'+'Changed'])==null||_0x516986['off'](),this['_evtLayers'+'Changed']=null,_0x9a17ea&&((_0x179304=this['_evtLayerA'+'dded'])==null||_0x179304['off'](),this['_evtLayerA'+'dded']=null,(_0x24df05=this['_evtLayerR'+'emoved'])==null||_0x24df05['off'](),this['_evtLayerR'+'emoved']=null),this['stop'](),this['_hideModel'](),this['_batchGrou'+'pId']>=0x2*-0x28e+-0xe6a+0x126*0x11&&((_0x36e8e7=_0x117d57['batcher'])==null||_0x36e8e7['remove'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDestroy'](){var _0x43557c;this['_currentCl'+'ip']=null,this['_defaultCl'+'ip']&&(this['_defaultCl'+'ip']['_destroy'](),this['_defaultCl'+'ip']=null);for(const _0x4131cb in this['_clips'])this['_clips'][_0x4131cb]['_destroy']();this['_clips']=null,this['_hideModel'](),this['_model']=null,(_0x43557c=this['_node'])==null||_0x43557c['remove'](),this['_node']=null,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=null,this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']=null);}['_showModel'](){if(this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x1c2b43=[this['_meshInsta'+'nce']];for(let _0x5a4ac5=0x72d+0x22*-0xe3+0x1*0x16f9,_0x395663=this['_layers']['length'];_0x5a4ac5<_0x395663;_0x5a4ac5++){const _0x46b878=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x5a4ac5]);_0x46b878&&_0x46b878['addMeshIns'+'tances'](_0x1c2b43);}this['_addedMode'+'l']=!(-0x130d+-0x12c2+-0x25cf*-0x1);}['_hideModel'](){if(!this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x4a1409=[this['_meshInsta'+'nce']];for(let _0x53f905=0xdc+0x2*0xc5+-0x133*0x2,_0x3dbc82=this['_layers']['length'];_0x53f905<_0x3dbc82;_0x53f905++){const _0x503313=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x53f905]);_0x503313&&_0x503313['removeMesh'+'Instances'](_0x4a1409);}this['_addedMode'+'l']=!(-0x36b+0xa*-0x177+-0x12*-0x101);}['_showFrame'](_0x23b95b){if(!this['sprite'])return;const _0x275c78=this['sprite']['meshes'][_0x23b95b];if(!_0x275c78){this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']['visible']=!(0x18fc+-0x2624+0xd29));return;}let _0x1ed9c6;if(this['sprite']['renderMode']===Pt?_0x1ed9c6=this['system']['default9Sl'+'icedMateri'+'alSlicedMo'+'de']:this['sprite']['renderMode']===Mt?_0x1ed9c6=this['system']['default9Sl'+'icedMateri'+'alTiledMod'+'e']:_0x1ed9c6=this['system']['defaultMat'+'erial'],this['_meshInsta'+'nce']||(this['_meshInsta'+'nce']=new He(_0x275c78,this['_material'],this['_node']),this['_meshInsta'+'nce']['castShadow']=!(0x24e5*-0x1+-0xa58+0x2f3e),this['_meshInsta'+'nce']['receiveSha'+'dow']=!(0x915+0xdfc+0x148*-0x12),this['_meshInsta'+'nce']['drawOrder']=this['_drawOrder'],this['_model']['meshInstan'+'ces']['push'](this['_meshInsta'+'nce']),this['_colorUnif'+'orm'][-0x1dd6+0x2610+0x41d*-0x2]=this['_color']['r'],this['_colorUnif'+'orm'][0x72e*-0x2+0x13b8+-0x55b]=this['_color']['g'],this['_colorUnif'+'orm'][-0x1*-0x2014+0x6d7+-0x26e9]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](kg,this['_colorUnif'+'orm']),this['_meshInsta'+'nce']['setParamet'+'er'](Ug,this['_color']['a']),this['enabled']&&this['entity']['enabled']&&this['_showModel']()),this['_meshInsta'+'nce']['material']!==_0x1ed9c6&&(this['_meshInsta'+'nce']['material']=_0x1ed9c6),this['_meshInsta'+'nce']['mesh']!==_0x275c78&&(this['_meshInsta'+'nce']['mesh']=_0x275c78,this['_meshInsta'+'nce']['visible']=!(0x138d+0x98f*0x1+0x12*-0x19e),this['_meshInsta'+'nce']['_aabbVer']=-(0xa*-0x3d1+-0xc64+0x328f)),this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_meshInsta'+'nce']['setParamet'+'er'](Fg,this['sprite']['atlas']['texture']),this['_meshInsta'+'nce']['setParamet'+'er'](Ng,this['sprite']['atlas']['texture'])):(this['_meshInsta'+'nce']['deletePara'+'meter'](Fg),this['_meshInsta'+'nce']['deletePara'+'meter'](Ng)),this['sprite']['atlas']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){this['_meshInsta'+'nce']['_updateAab'+'bFunc']=this['_updateAab'+'bFunc'];const _0x32ece1=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][_0x23b95b]];if(_0x32ece1){const _0x1cdaad=(-0x8d8+0x2b*-0x12+0x14*0x98)/_0x32ece1['rect']['z'],_0x3d0080=(0x9fc*0x3+0x1e15+-0x7f*0x79)/_0x32ece1['rect']['w'];this['_innerOffs'+'et']['set'](_0x32ece1['border']['x']*_0x1cdaad,_0x32ece1['border']['y']*_0x3d0080,_0x32ece1['border']['z']*_0x1cdaad,_0x32ece1['border']['w']*_0x3d0080);const _0x8ae3e2=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x32ece1['rect']['x']/_0x8ae3e2['width'],_0x32ece1['rect']['y']/_0x8ae3e2['height'],_0x32ece1['rect']['z']/_0x8ae3e2['width'],_0x32ece1['rect']['w']/_0x8ae3e2['height']);}else this['_innerOffs'+'et']['set'](0xfad*-0x2+-0x1ec4+0x3e1e*0x1,-0x1ebc+-0x1085*0x1+-0x1*-0x2f41,0x1b*0xd0+-0x705*-0x1+-0x3*0x9a7,0x51*-0x61+0x1*0x697+0x181a);this['_innerOffs'+'etUniform'][-0x6de+-0x774*0x4+0x24ae]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][0x1a8f*-0x1+-0x61*-0x67+0x1*-0xc77]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][0x1ef9+0x1*0x5ad+-0x24a4]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][-0xd09+0x2*-0xfd1+-0x2*-0x1657]=this['_innerOffs'+'et']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](MO,this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x20b*-0x1+-0x41c*0x5+-0x1*-0x1281]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][-0x137*-0x1e+0xc*-0x242+-0x959]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x3*0x1b+0x942+-0x8ef]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0x1*0x1591+-0x10*-0x1f5+-0x34de]=this['_atlasRect']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](IO,this['_atlasRect'+'Uniform']);}else this['_meshInsta'+'nce']['_updateAab'+'bFunc']=null;this['_updateTra'+'nsform']();}['_updateTra'+'nsform'](){let _0x3b8b07=this['flipX']?-(0x734+-0xaa4+0x371*0x1):0x3*-0x66c+0x108c+0x2b9,_0x5c5b92=this['flipY']?-(0x13*-0x2b+0x2531*0x1+-0x21ff*0x1):-0x3*-0x233+-0x132a+-0x649*-0x2,_0x3d5286=0x74*0x2b+0xd74+-0x20f0,_0x4ad7af=-0x2bb*0x1+-0x1*0x202e+0x22e9;if(this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){let _0x12303d=-0x41c+0x1df0+0x1*-0x19d3,_0x2dc655=-0x12c7+-0x22dc+-0x4*-0xd69;if(this['sprite']['atlas']){const _0x2d172d=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][this['frame']]];_0x2d172d&&(_0x12303d=_0x2d172d['rect']['z'],_0x2dc655=_0x2d172d['rect']['w'],_0x3d5286=(0x172f+-0x3cb*0x9+0xaf4+0.5-_0x2d172d['pivot']['x'])*this['_width'],_0x4ad7af=(0x544+0xe7f*0x1+0x1*-0x13c3+0.5-_0x2d172d['pivot']['y'])*this['_height']);}const _0x163b7a=_0x12303d/this['sprite']['pixelsPerU'+'nit'],_0xdd4837=_0x2dc655/this['sprite']['pixelsPerU'+'nit'];this['_outerScal'+'e']['set'](Math['max'](this['_width'],this['_innerOffs'+'et']['x']*_0x163b7a),Math['max'](this['_height'],this['_innerOffs'+'et']['y']*_0xdd4837)),_0x3b8b07*=_0x163b7a,_0x5c5b92*=_0xdd4837,this['_outerScal'+'e']['x']/=_0x163b7a,this['_outerScal'+'e']['y']/=_0xdd4837,_0x3b8b07*=Y['clamp'](this['_width']/(this['_innerOffs'+'et']['x']*_0x163b7a),0x24d3+0x29*0x97+-0x3d02+0.0001,-0x8*0x47b+-0xe10+0x10a3*0x3),_0x5c5b92*=Y['clamp'](this['_height']/(this['_innerOffs'+'et']['y']*_0xdd4837),0x1629+0x682*0x2+-0x232d+0.0001,-0x1*-0x2135+-0x2*0x433+-0x18ce),this['_meshInsta'+'nce']&&(this['_outerScal'+'eUniform'][-0x1de*-0x12+0x32*-0x7d+-0x932*0x1]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][-0x245f+0x26bf+-0x25f]=this['_outerScal'+'e']['y'],this['_meshInsta'+'nce']['setParamet'+'er'](DO,this['_outerScal'+'eUniform']));}this['_node']['setLocalSc'+'ale'](_0x3b8b07,_0x5c5b92,-0x1*0x203e+0x8e8+0x1757),this['_node']['setLocalPo'+'sition'](_0x3d5286,_0x4ad7af,-0x4*-0x263+-0x8*-0x17f+-0x1584);}['_updateAab'+'b'](_0x484eb2){return _0x484eb2['center']['set'](0x16a+0x6c*0x11+-0x896,-0x2662+0xe89+0x22b*0xb,-0x1042+0x76c+0x8d6),_0x484eb2['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0xd41+0x60d*-0x2+0x195b+0.5),this['_outerScal'+'e']['y']*(-0x71*0xd+-0x1*0x137b+0x1938+0.5),-0x3e+0x20ee+-0x10*0x20b+0.001),_0x484eb2['setFromTra'+'nsformedAa'+'bb'](_0x484eb2,this['_node']['getWorldTr'+'ansform']()),_0x484eb2;}['_tryAutoPl'+'ay'](){if(!this['_autoPlayC'+'lip']||this['type']!==Og)return;const _0x41287f=this['_clips'][this['_autoPlayC'+'lip']];_0x41287f&&!_0x41287f['isPlaying']&&(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['isPlaying'])&&this['enabled']&&this['entity']['enabled']&&this['play'](_0x41287f['name']);}['_onLayersC'+'hanged'](_0x1f27b2,_0x1c43ba){_0x1f27b2['off']('add',this['onLayerAdd'+'ed'],this),_0x1f27b2['off']('remove',this['onLayerRem'+'oved'],this),_0x1c43ba['on']('add',this['onLayerAdd'+'ed'],this),_0x1c43ba['on']('remove',this['onLayerRem'+'oved'],this),this['enabled']&&this['entity']['enabled']&&this['_showModel']();}['_onLayerAd'+'ded'](_0x56930e){this['layers']['indexOf'](_0x56930e['id'])<-0x19*-0x5c+0x34d+-0x5*0x275||this['_addedMode'+'l']&&this['enabled']&&this['entity']['enabled']&&this['_meshInsta'+'nce']&&_0x56930e['addMeshIns'+'tances']([this['_meshInsta'+'nce']]);}['_onLayerRe'+'moved'](_0x1c7433){!this['_meshInsta'+'nce']||this['layers']['indexOf'](_0x1c7433['id'])<-0x6b*0x2a+-0x826+0x19b4||_0x1c7433['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}['removeMode'+'lFromLayer'+'s'](){for(let _0x3b05e7=-0x2*-0xd0d+0xac*-0x33+0x82a;_0x3b05e7<this['layers']['length'];_0x3b05e7++){const _0x168eb4=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x3b05e7]);_0x168eb4&&_0x168eb4['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}}['addClip'](_0x1b46e8){const _0x37c7f4=new Gi(this,{'name':_0x1b46e8['name'],'fps':_0x1b46e8['fps'],'loop':_0x1b46e8['loop'],'spriteAsset':_0x1b46e8['spriteAsse'+'t']});return this['_clips'][_0x1b46e8['name']]=_0x37c7f4,_0x37c7f4['name']&&_0x37c7f4['name']===this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),_0x37c7f4;}['removeClip'](_0x324c4d){delete this['_clips'][_0x324c4d];}['clip'](_0x14da8b){return this['_clips'][_0x14da8b];}['play'](_0x41bd3a){const _0x1aefbf=this['_clips'][_0x41bd3a],_0x33ad11=this['_currentCl'+'ip'];return _0x33ad11&&_0x33ad11!==_0x1aefbf&&(_0x33ad11['_playing']=!(0x4f*-0x5+0x640+-0x2*0x25a)),this['_currentCl'+'ip']=_0x1aefbf,this['_currentCl'+'ip']?(this['_currentCl'+'ip']=_0x1aefbf,this['_currentCl'+'ip']['play']()):w['warn']('Trying\x20to\x20'+'play\x20sprit'+'e\x20animatio'+'n\x20'+_0x41bd3a+('\x20which\x20doe'+'s\x20not\x20exis'+'t.')),_0x1aefbf;}['pause'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['_currentCl'+'ip']['pause']();}['resume'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPaused']&&this['_currentCl'+'ip']['resume']();}['stop'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['stop']();}}h(cr,'EVENT_PLAY','play'),h(cr,'EVENT_PAUS'+'E','pause'),h(cr,'EVENT_RESU'+'ME','resume'),h(cr,'EVENT_STOP','stop'),h(cr,'EVENT_END','end'),h(cr,'EVENT_LOOP','loop');class LO{constructor(){this['enabled']=!(-0x1*-0x2611+0x1f*0xd4+-0x3fbd);}}const Dv=['enabled'];class RO extends ct{constructor(_0x239450){super(_0x239450),this['id']='sprite',this['ComponentT'+'ype']=cr,this['DataType']=LO,this['schema']=Dv,this['_defaultTe'+'xture']=null,this['_defaultMa'+'terial']=null,this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=null,this['_default9S'+'licedMater'+'ialTiledMo'+'de']=null,this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['defaultMat'+'erial'](_0xa2a82){this['_defaultMa'+'terial']=_0xa2a82;}get['defaultMat'+'erial'](){if(!this['_defaultMa'+'terial']){const _0x52f79b=new _e(this['app']['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'sprite'}),_0x3591ae=new Uint8Array(_0x52f79b['lock']());_0x3591ae[-0x669*-0x2+-0x19c7+0xcf5]=_0x3591ae[-0x11b6+0x1603+0x44c*-0x1]=_0x3591ae[0x1*0xb28+-0x1cd*0x1+-0x959]=_0x3591ae[0x501*0x7+0x17e5+-0x3*0x13a3]=0x1*0x787+0x146e+0x3da*-0x7,_0x52f79b['unlock']();const _0x328fa8=new Ut();_0x328fa8['diffuse']['set'](0x759+-0x2567+0x1e0e,0x1*0x1f2d+-0x1f8b+0x5e,0x1ce1+0x3c4*-0x6+-0x649),_0x328fa8['emissive']['set'](-0x2*-0x6dc+-0xc*0x265+0xf05,-0x1cf9+-0x691*-0x5+0x2f*-0x15,0x1399+0x4*0x5bc+-0x551*0x8),_0x328fa8['emissiveMa'+'p']=_0x52f79b,_0x328fa8['opacityMap']=_0x52f79b,_0x328fa8['opacityMap'+'Channel']='a',_0x328fa8['useLightin'+'g']=!(-0xe7a+-0x1*0x258b+-0x1*-0x3406),_0x328fa8['useTonemap']=!(-0x9bd+0xef+0x8cf),_0x328fa8['useFog']=!(0x26d+-0xcee+0xa82),_0x328fa8['useSkybox']=!(0x5b2*-0x2+0xe9*0x10+-0x32b),_0x328fa8['blendType']=Fn,_0x328fa8['depthWrite']=!(-0xa4c+-0xf*-0x21a+-0x1539),_0x328fa8['pixelSnap']=!(-0x2*-0x3b3+0x18e4+0x5f*-0x57),_0x328fa8['cull']=bt,_0x328fa8['update'](),this['_defaultTe'+'xture']=_0x52f79b,this['_defaultMa'+'terial']=_0x328fa8;}return this['_defaultMa'+'terial'];}set['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](_0x8a7d02){this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x8a7d02;}get['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](){if(!this['_default9S'+'licedMater'+'ialSlicedM'+'ode']){const _0x366e47=this['defaultMat'+'erial']['clone']();_0x366e47['nineSliced'+'Mode']=Pt,_0x366e47['update'](),this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x366e47;}return this['_default9S'+'licedMater'+'ialSlicedM'+'ode'];}set['default9Sl'+'icedMateri'+'alTiledMod'+'e'](_0x511037){this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x511037;}get['default9Sl'+'icedMateri'+'alTiledMod'+'e'](){if(!this['_default9S'+'licedMater'+'ialTiledMo'+'de']){const _0x3f519a=this['defaultMat'+'erial']['clone']();_0x3f519a['nineSliced'+'Mode']=Mt,_0x3f519a['update'](),this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x3f519a;}return this['_default9S'+'licedMater'+'ialTiledMo'+'de'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),this['_defaultTe'+'xture']&&(this['_defaultTe'+'xture']['destroy'](),this['_defaultTe'+'xture']=null);}['initialize'+'ComponentD'+'ata'](_0x31080d,_0x5d69c9,_0x52d150){if(_0x5d69c9['enabled']!==void(0x2608+0x2f*0xc8+-0x4ac0)&&(_0x31080d['enabled']=_0x5d69c9['enabled']),_0x31080d['type']=_0x5d69c9['type'],_0x5d69c9['layers']&&Array['isArray'](_0x5d69c9['layers'])&&(_0x31080d['layers']=_0x5d69c9['layers']['slice'](0x31f+0x1048+-0x1367*0x1)),_0x5d69c9['drawOrder']!==void(-0x1a3*-0xb+0xf5*-0x1d+0x9c0)&&(_0x31080d['drawOrder']=_0x5d69c9['drawOrder']),_0x5d69c9['color']!==void(-0x3c6+0x226a+0x7a9*-0x4)&&(_0x5d69c9['color']instanceof ie?_0x31080d['color']['set'](_0x5d69c9['color']['r'],_0x5d69c9['color']['g'],_0x5d69c9['color']['b'],_0x5d69c9['opacity']??-0x9fb+-0x1618+-0x4*-0x805):_0x31080d['color']['set'](_0x5d69c9['color'][-0x14*0x132+-0x1d77+0x355f],_0x5d69c9['color'][-0x16+0x118f+-0x1178],_0x5d69c9['color'][0x1e4d+-0x1e63+0x6*0x4],_0x5d69c9['opacity']??0x47d+-0x832*0x1+0x3b6),_0x31080d['color']=_0x31080d['color']),_0x5d69c9['opacity']!==void(0x61*0x17+-0x1*0x25e5+0x1d2e)&&(_0x31080d['opacity']=_0x5d69c9['opacity']),_0x5d69c9['flipX']!==void(-0x253f*0x1+0x6*0x53d+-0x5d1*-0x1)&&(_0x31080d['flipX']=_0x5d69c9['flipX']),_0x5d69c9['flipY']!==void(-0x212f+0xb89*-0x3+-0x2*-0x21e5)&&(_0x31080d['flipY']=_0x5d69c9['flipY']),_0x5d69c9['width']!==void(-0x1*0x215f+0x65*0x51+0x16a)&&(_0x31080d['width']=_0x5d69c9['width']),_0x5d69c9['height']!==void(0x24a3+0x2b*0x7f+-0x39f8)&&(_0x31080d['height']=_0x5d69c9['height']),_0x5d69c9['spriteAsse'+'t']!==void(0x1cb1+-0x20f*-0xf+0x3d*-0xfa)&&(_0x31080d['spriteAsse'+'t']=_0x5d69c9['spriteAsse'+'t']),_0x5d69c9['sprite']&&(_0x31080d['sprite']=_0x5d69c9['sprite']),_0x5d69c9['frame']!==void(-0x17d*0x7+-0x5d5+0x1040)&&(_0x31080d['frame']=_0x5d69c9['frame']),_0x5d69c9['clips']){for(const _0xdb7960 in _0x5d69c9['clips'])_0x31080d['addClip'](_0x5d69c9['clips'][_0xdb7960]);}_0x5d69c9['speed']!==void(-0xf59*0x1+-0x13af*-0x1+-0x456)&&(_0x31080d['speed']=_0x5d69c9['speed']),_0x5d69c9['autoPlayCl'+'ip']&&(_0x31080d['autoPlayCl'+'ip']=_0x5d69c9['autoPlayCl'+'ip']),_0x31080d['batchGroup'+'Id']=_0x5d69c9['batchGroup'+'Id']===void(-0x3*0x803+0xb*-0x39+0x4*0x69f)||_0x5d69c9['batchGroup'+'Id']===null?-(-0x42d*0x1+-0xcbb*-0x2+-0x18*0xe3):_0x5d69c9['batchGroup'+'Id'],super['initialize'+'ComponentD'+'ata'](_0x31080d,_0x5d69c9,_0x52d150);}['cloneCompo'+'nent'](_0x50f243,_0x510bd9){const _0xed34f=_0x50f243['sprite'];return this['addCompone'+'nt'](_0x510bd9,{'enabled':_0xed34f['enabled'],'type':_0xed34f['type'],'spriteAsset':_0xed34f['spriteAsse'+'t'],'sprite':_0xed34f['sprite'],'width':_0xed34f['width'],'height':_0xed34f['height'],'frame':_0xed34f['frame'],'color':_0xed34f['color']['clone'](),'opacity':_0xed34f['opacity'],'flipX':_0xed34f['flipX'],'flipY':_0xed34f['flipY'],'speed':_0xed34f['speed'],'clips':_0xed34f['clips'],'autoPlayClip':_0xed34f['autoPlayCl'+'ip'],'batchGroupId':_0xed34f['batchGroup'+'Id'],'drawOrder':_0xed34f['drawOrder'],'layers':_0xed34f['layers']['slice'](-0x2582+-0x1360+-0x12*-0x329)});}['onUpdate'](_0x5ba59e){const _0x2be8a4=this['store'];for(const _0x1bb176 in _0x2be8a4)if(_0x2be8a4['hasOwnProp'+'erty'](_0x1bb176)){const _0x36c236=_0x2be8a4[_0x1bb176];if(_0x36c236['data']['enabled']&&_0x36c236['entity']['enabled']){const _0x35792c=_0x36c236['entity']['sprite'];_0x35792c['_currentCl'+'ip']&&_0x35792c['_currentCl'+'ip']['_update'](_0x5ba59e);}}}['onBeforeRe'+'move'](_0x523099,_0x196a09){_0x196a09['onDestroy']();}}we['_buildAcce'+'ssors'](cr['prototype'],Dv);class cn extends we{constructor(_0x2f2ed2,_0x5926c0){super(_0x2f2ed2,_0x5926c0),this['_oldState']=!(-0x2554+-0xca5+-0x48b*-0xb),this['_size']=new D(),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['size'](_0x32c200){_0x32c200 instanceof D?this['_size']['copy'](_0x32c200):_0x32c200 instanceof Array&&_0x32c200['length']>=-0x48b*0x3+0x1*-0x1fc4+0x2d68&&this['size']['set'](_0x32c200[-0x1*-0x1a42+0xa*0x22f+-0x144*0x26],_0x32c200[0xa9*0x17+-0x1824+0x8f6],_0x32c200[-0x1afd+-0x1723+0x3222]);}get['size'](){return this['_size'];}['onEnable'](){this['_checkStat'+'e']();}['onDisable'](){this['_checkStat'+'e']();}['_onSetEnab'+'led'](_0x52a184,_0x46038f,_0x33e091){this['_checkStat'+'e']();}['_checkStat'+'e'](){const _0x16eb4c=this['enabled']&&this['entity']['enabled'];_0x16eb4c!==this['_oldState']&&(this['_oldState']=_0x16eb4c,this['fire']('enable'),this['fire']('state',this['enabled']));}['_onBeforeR'+'emove'](){this['fire']('remove');}}h(cn,'EVENT_ENAB'+'LE','enable'),h(cn,'EVENT_DISA'+'BLE','disable'),h(cn,'EVENT_STAT'+'E','state'),h(cn,'EVENT_REMO'+'VE','remove');class OO{constructor(){this['enabled']=!(-0x1a18+0x486+-0x16*-0xfb);}}const Iv=['enabled'];class FO extends ct{constructor(_0x310049){super(_0x310049),this['id']='zone',this['ComponentT'+'ype']=cn,this['DataType']=OO,this['schema']=Iv,this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this);}['initialize'+'ComponentD'+'ata'](_0x293506,_0x33e6ac,_0x16da88){_0x293506['enabled']=_0x33e6ac['hasOwnProp'+'erty']('enabled')?!!_0x33e6ac['enabled']:!(-0x29*-0xbf+0x243c+0x42d3*-0x1),_0x33e6ac['size']&&(_0x33e6ac['size']instanceof D?_0x293506['size']['copy'](_0x33e6ac['size']):_0x33e6ac['size']instanceof Array&&_0x33e6ac['size']['length']>=0xb2f+-0x22b7+0x178b&&_0x293506['size']['set'](_0x33e6ac['size'][0x1*-0x457+-0x174b+-0x936*-0x3],_0x33e6ac['size'][0xdfb*-0x2+-0x202b+0x3c22],_0x33e6ac['size'][0x543*0x6+-0x334+-0xf*0x1e4]));}['cloneCompo'+'nent'](_0x5cd2a5,_0x1a4cdb){const _0x400a09={'enabled':_0x5cd2a5['zone']['enabled'],'size':_0x5cd2a5['zone']['size']};return this['addCompone'+'nt'](_0x1a4cdb,_0x400a09);}['_onBeforeR'+'emove'](_0x3179cc,_0x52f08a){_0x52f08a['_onBeforeR'+'emove']();}}we['_buildAcce'+'ssors'](cn['prototype'],Iv);class NO{constructor(_0x300d9f,_0x40bc67){this['effect']=_0x300d9f,this['inputTarge'+'t']=_0x40bc67,this['outputTarg'+'et']=null,this['name']=_0x300d9f['constructo'+'r']['name'];}}class kO{constructor(_0x17de43,_0x39fe16){this['app']=_0x17de43,this['camera']=_0x39fe16,this['destinatio'+'nRenderTar'+'get']=null,this['effects']=[],this['enabled']=!(-0x10*-0x4a+0x14*-0x76+-0x1*-0x499),this['depthTarge'+'t']=null,_0x39fe16['on']('set:rect',this['onCameraRe'+'ctChanged'],this);}['_allocateC'+'olorBuffer'](_0xb88bff,_0x3ae189){const _0x5e9eb4=this['camera']['rect'],_0x34ecd1=this['destinatio'+'nRenderTar'+'get'],_0x3d6dbf=this['app']['graphicsDe'+'vice'],_0x26e70c=Math['floor'](_0x5e9eb4['z']*((_0x34ecd1==null?void(-0x3ad*-0x2+0x5*0x37d+-0x18cb*0x1):_0x34ecd1['width'])??_0x3d6dbf['width'])),_0x94c964=Math['floor'](_0x5e9eb4['w']*((_0x34ecd1==null?void(0x1*-0x14d+0x2*-0x1217+0x257b):_0x34ecd1['height'])??_0x3d6dbf['height']));return new _e(_0x3d6dbf,{'name':_0x3ae189,'format':_0xb88bff,'width':_0x26e70c,'height':_0x94c964,'mipmaps':!(-0x1*0x55f+0x1*-0xeaf+0x140f),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});}['_createOff'+'screenTarg'+'et'](_0xf9b455,_0x5553b0){const _0x55329c=this['app']['graphicsDe'+'vice'],_0x31c420=(this['destinatio'+'nRenderTar'+'get']??_0x55329c['backBuffer'])['isColorBuf'+'ferSrgb'](-0x34b*0x1+-0xe19*-0x1+-0xace),_0x3c1959=(_0x5553b0&&_0x55329c['getRendera'+'bleHdrForm'+'at']([nt,Xt],!(-0x1*-0x2449+0x703*0x4+-0x4055)))??(_0x31c420?_s:Ne),_0x1e79df=this['camera']['entity']['name']+('-posteffec'+'t-')+this['effects']['length'],_0x56ded3=this['_allocateC'+'olorBuffer'](_0x3c1959,_0x1e79df);return new gt({'colorBuffer':_0x56ded3,'depth':_0xf9b455,'stencil':_0xf9b455&&this['app']['graphicsDe'+'vice']['supportsSt'+'encil'],'samples':_0xf9b455?_0x55329c['samples']:0x3*0x24+0x1d3*-0x7+0xc5a});}['_resizeOff'+'screenTarg'+'et'](_0x335e6b){const _0x359152=_0x335e6b['colorBuffe'+'r']['format'],_0x4c1367=_0x335e6b['colorBuffe'+'r']['name'];_0x335e6b['destroyFra'+'meBuffers'](),_0x335e6b['destroyTex'+'tureBuffer'+'s'](),_0x335e6b['_colorBuff'+'er']=this['_allocateC'+'olorBuffer'](_0x359152,_0x4c1367),_0x335e6b['_colorBuff'+'ers']=[_0x335e6b['_colorBuff'+'er']];}['_destroyOf'+'fscreenTar'+'get'](_0x17a60e){_0x17a60e['destroyTex'+'tureBuffer'+'s'](),_0x17a60e['destroy']();}['addEffect'](_0x5635e2){const _0x1125fe=this['effects'],_0x3499d8=_0x1125fe['length']===-0x2141+0x1*-0x11d1+0x3312*0x1,_0x130612=this['_createOff'+'screenTarg'+'et'](_0x3499d8,_0x5635e2['hdr']),_0x41fef0=new NO(_0x5635e2,_0x130612);_0x1125fe['push'](_0x41fef0),this['_sourceTar'+'get']=_0x41fef0['inputTarge'+'t'],_0x1125fe['length']>0x1343+-0xc14+-0x72e&&(_0x1125fe[_0x1125fe['length']-(-0x1c75+-0x57*-0x1b+0x3*0x66e)]['outputTarg'+'et']=_0x41fef0['inputTarge'+'t']),this['_newPostEf'+'fect']=_0x5635e2,_0x5635e2['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap'](),this['enable'](),this['_newPostEf'+'fect']=void(0x2654+-0x95*-0x21+-0x46d*0xd);}['removeEffe'+'ct'](_0xe9afc1){let _0x2b8acf=-(0x1*0xb2f+0x1eb1+0x1b*-0x18d);for(let _0x1236d4=-0x6da*0x2+0x16a5*-0x1+0x5*0x745,_0x10d351=this['effects']['length'];_0x1236d4<_0x10d351;_0x1236d4++)if(this['effects'][_0x1236d4]['effect']===_0xe9afc1){_0x2b8acf=_0x1236d4;break;}_0x2b8acf>=0x31*0x27+-0x653*0x1+0x49*-0x4&&(_0x2b8acf>0xc9b*0x1+0xc9a+-0x1935?this['effects'][_0x2b8acf-(-0x1*0x2514+0x900+0x1c15)]['outputTarg'+'et']=_0x2b8acf+(0x242b+0x19a7+-0x3dd1)<this['effects']['length']?this['effects'][_0x2b8acf+(0x159+0x5*-0x163+0x1b*0x35)]['inputTarge'+'t']:null:this['effects']['length']>-0x2b1+0x161f+0x1*-0x136d&&(this['effects'][0x185e+-0x629+-0x1234]['inputTarge'+'t']['_depth']||(this['_destroyOf'+'fscreenTar'+'get'](this['effects'][-0x110+-0x598*0x4+-0x161*-0x11]['inputTarge'+'t']),this['effects'][0x71*0x44+-0x2fe*-0xb+-0x59*0xb5]['inputTarge'+'t']=this['_createOff'+'screenTarg'+'et'](!(0x25e2+0x32e+-0x2910),this['effects'][-0x2547+-0x20df+0x4627]['hdr']),this['_sourceTar'+'get']=this['effects'][0x1969*-0x1+-0x345*0x3+0x2339]['inputTarge'+'t']),this['camera']['renderTarg'+'et']=this['effects'][-0x9*-0x16b+0x95*0x17+-0x1a25]['inputTarge'+'t']),this['_destroyOf'+'fscreenTar'+'get'](this['effects'][_0x2b8acf]['inputTarge'+'t']),this['effects']['splice'](_0x2b8acf,0x258a+0x24c4+-0x4a4d)),this['enabled']&&_0xe9afc1['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap'](),this['effects']['length']===0x25*0x7b+0x2110+-0x32d7&&this['disable']();}['_requestDe'+'pthMaps'](){for(let _0x570658=-0x449+-0x5c2+-0xa0b*-0x1,_0x456d81=this['effects']['length'];_0x570658<_0x456d81;_0x570658++){const _0x40d7a8=this['effects'][_0x570658]['effect'];this['_newPostEf'+'fect']!==_0x40d7a8&&_0x40d7a8['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap']();}}['_releaseDe'+'pthMaps'](){for(let _0x3f1a44=0x1e2*-0x9+0x99*0x13+0x597,_0x264b4f=this['effects']['length'];_0x3f1a44<_0x264b4f;_0x3f1a44++)this['effects'][_0x3f1a44]['effect']['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap']();}['_requestDe'+'pthMap'](){const _0x58a474=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x58a474&&(_0x58a474['incrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x2*0xe27+-0xef1+-0xd5d)));}['_releaseDe'+'pthMap'](){const _0x140c6b=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x140c6b&&(_0x140c6b['decrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x3*-0x182+0x135*0xb+-0x8c0)));}['destroy'](){for(let _0xa17412=-0x21*0xef+-0x8c5+-0x1*-0x2794,_0x20e00d=this['effects']['length'];_0xa17412<_0x20e00d;_0xa17412++)this['effects'][_0xa17412]['inputTarge'+'t']['destroy']();this['effects']['length']=-0x1*0x1d41+-0xb*-0xe5+0x136a,this['disable']();}['enable'](){!this['enabled']&&this['effects']['length']&&(this['enabled']=!(-0xcb*0x7+0x7*-0x2f6+0x1a47),this['_requestDe'+'pthMaps'](),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['destinatio'+'nRenderTar'+'get']=this['camera']['renderTarg'+'et'],this['camera']['renderTarg'+'et']=this['effects'][0x2a*0xca+0x1281+0x1*-0x33a5]['inputTarge'+'t'],this['camera']['onPostproc'+'essing']=()=>{if(this['enabled']){let _0x59daba=null;const _0x53bd17=this['effects']['length'];if(_0x53bd17)for(let _0x1bdedc=0xff4+0x142b+0x1*-0x241f;_0x1bdedc<_0x53bd17;_0x1bdedc++){const _0x6a0746=this['effects'][_0x1bdedc];let _0x1134ce=_0x6a0746['outputTarg'+'et'];_0x1bdedc===_0x53bd17-(-0x112c+0x1*-0x213a+0x3267)&&(_0x59daba=this['camera']['rect'],this['destinatio'+'nRenderTar'+'get']&&(_0x1134ce=this['destinatio'+'nRenderTar'+'get'])),Q['pushGpuMar'+'ker'](this['app']['graphicsDe'+'vice'],_0x6a0746['name']),_0x6a0746['effect']['render'](_0x6a0746['inputTarge'+'t'],_0x1134ce,_0x59daba),Q['popGpuMark'+'er'](this['app']['graphicsDe'+'vice']);}}});}['disable'](){this['enabled']&&(this['enabled']=!(0x2636+-0x119f*0x1+-0x1496),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['_releaseDe'+'pthMaps'](),this['_destroyOf'+'fscreenTar'+'get'](this['_sourceTar'+'get']),this['camera']['renderTarg'+'et']=this['destinatio'+'nRenderTar'+'get'],this['camera']['onPostproc'+'essing']=null);}['_onCanvasR'+'esized'](_0x32da7c,_0x6ce7da){const _0x52a24d=this['camera']['rect'],_0x51e4b9=this['destinatio'+'nRenderTar'+'get'];_0x32da7c=(_0x51e4b9==null?void(0x4*0x5a+-0x8f7+0x285*0x3):_0x51e4b9['width'])??_0x32da7c,_0x6ce7da=(_0x51e4b9==null?void(0x1*-0x1423+0x7dd+0xc46*0x1):_0x51e4b9['height'])??_0x6ce7da,this['camera']['camera']['aspectRati'+'o']=_0x32da7c*_0x52a24d['z']/(_0x6ce7da*_0x52a24d['w']),this['resizeRend'+'erTargets']();}['resizeRend'+'erTargets'](){const _0x18ed9c=this['app']['graphicsDe'+'vice'],_0x38315b=this['destinatio'+'nRenderTar'+'get'],_0x5731a9=(_0x38315b==null?void(-0x9e9+0x75+0x974):_0x38315b['width'])??_0x18ed9c['width'],_0x3e5005=(_0x38315b==null?void(0x2626+-0x1*0x12cb+-0x135b):_0x38315b['height'])??_0x18ed9c['height'],_0x12a5d1=this['camera']['rect'],_0x1ca73c=Math['floor'](_0x12a5d1['z']*_0x5731a9),_0x1360fb=Math['floor'](_0x12a5d1['w']*_0x3e5005),_0x1170f5=this['effects'];for(let _0x2c4af1=-0x1939+0x2141+0x404*-0x2,_0x557e3a=_0x1170f5['length'];_0x2c4af1<_0x557e3a;_0x2c4af1++){const _0x295e21=_0x1170f5[_0x2c4af1];(_0x295e21['inputTarge'+'t']['width']!==_0x1ca73c||_0x295e21['inputTarge'+'t']['height']!==_0x1360fb)&&this['_resizeOff'+'screenTarg'+'et'](_0x295e21['inputTarge'+'t']);}}['onCameraRe'+'ctChanged'](_0x19b6e7,_0x39387b,_0x54c9b2){this['enabled']&&this['resizeRend'+'erTargets']();}}class Cr extends we{constructor(_0x27e8a4,_0x41add9){super(_0x27e8a4,_0x41add9),h(this,'onPostproc'+'essing',null),h(this,'_renderSce'+'neDepthMap',-0x106*-0x18+-0xce3*-0x3+-0x3f39),h(this,'_renderSce'+'neColorMap',-0xfc4+0x19e9+-0xa25),h(this,'_sceneDept'+'hMapReques'+'ted',!(0x5ff+-0x1e25+-0x1*-0x1827)),h(this,'_sceneColo'+'rMapReques'+'ted',!(-0x1199+-0x1*-0x19ef+-0x855)),h(this,'_priority',-0x231b*-0x1+-0x107d+-0x94f*0x2),h(this,'_disablePo'+'stEffectsL'+'ayer',Sl),h(this,'_camera',new Tl()),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_camera']['node']=_0x41add9,this['_postEffec'+'ts']=new kO(_0x27e8a4['app'],this));}['setShaderP'+'ass'](_0x23e762){const _0x338a95=Si['get'](this['system']['app']['graphicsDe'+'vice']),_0x46a1ad=_0x23e762?_0x338a95['allocate'](_0x23e762,{'isForward':!(0x840+-0x50d+-0x7*0x75)}):null;return this['_camera']['shaderPass'+'Info']=_0x46a1ad,_0x46a1ad['index'];}['getShaderP'+'ass'](){var _0x162b64;return(_0x162b64=this['_camera']['shaderPass'+'Info'])==null?void(-0x793*0x3+-0xb21+-0x21da*-0x1):_0x162b64['name'];}set['renderPass'+'es'](_0xf1e3bd){this['_camera']['renderPass'+'es']=_0xf1e3bd||[],this['dirtyLayer'+'Compositio'+'nCameras'](),this['system']['app']['scene']['updateShad'+'ers']=!(-0x1b7d+0x1d7e+0xab*-0x3);}get['renderPass'+'es'](){return this['_camera']['renderPass'+'es'];}get['shaderPara'+'ms'](){return this['_camera']['shaderPara'+'ms'];}set['gammaCorre'+'ction'](_0xbc6a09){this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=_0xbc6a09;}get['gammaCorre'+'ction'](){return this['camera']['shaderPara'+'ms']['gammaCorre'+'ction'];}set['toneMappin'+'g'](_0x449ac0){this['camera']['shaderPara'+'ms']['toneMappin'+'g']=_0x449ac0;}get['toneMappin'+'g'](){return this['camera']['shaderPara'+'ms']['toneMappin'+'g'];}set['fog'](_0x1591b7){this['_camera']['fogParams']=_0x1591b7;}get['fog'](){return this['_camera']['fogParams'];}set['aperture'](_0x1efd2e){this['_camera']['aperture']=_0x1efd2e;}get['aperture'](){return this['_camera']['aperture'];}set['aspectRati'+'o'](_0x4a9ac6){this['_camera']['aspectRati'+'o']=_0x4a9ac6;}get['aspectRati'+'o'](){return this['_camera']['aspectRati'+'o'];}set['aspectRati'+'oMode'](_0x5d7ef1){this['_camera']['aspectRati'+'oMode']=_0x5d7ef1;}get['aspectRati'+'oMode'](){return this['_camera']['aspectRati'+'oMode'];}set['calculateP'+'rojection'](_0x158fe5){this['_camera']['calculateP'+'rojection']=_0x158fe5;}get['calculateP'+'rojection'](){return this['_camera']['calculateP'+'rojection'];}set['calculateT'+'ransform'](_0x1c0f5a){this['_camera']['calculateT'+'ransform']=_0x1c0f5a;}get['calculateT'+'ransform'](){return this['_camera']['calculateT'+'ransform'];}get['camera'](){return this['_camera'];}set['clearColor'](_0x2a1d76){this['_camera']['clearColor']=_0x2a1d76;}get['clearColor'](){return this['_camera']['clearColor'];}set['clearColor'+'Buffer'](_0x4606ea){this['_camera']['clearColor'+'Buffer']=_0x4606ea,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearColor'+'Buffer'](){return this['_camera']['clearColor'+'Buffer'];}set['clearDepth'+'Buffer'](_0x250c4a){this['_camera']['clearDepth'+'Buffer']=_0x250c4a,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearDepth'+'Buffer'](){return this['_camera']['clearDepth'+'Buffer'];}set['clearStenc'+'ilBuffer'](_0x1d1b5a){this['_camera']['clearStenc'+'ilBuffer']=_0x1d1b5a,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearStenc'+'ilBuffer'](){return this['_camera']['clearStenc'+'ilBuffer'];}set['cullFaces'](_0x5c011d){this['_camera']['cullFaces']=_0x5c011d;}get['cullFaces'](){return this['_camera']['cullFaces'];}set['disablePos'+'tEffectsLa'+'yer'](_0x25c9f3){this['_disablePo'+'stEffectsL'+'ayer']=_0x25c9f3,this['dirtyLayer'+'Compositio'+'nCameras']();}get['disablePos'+'tEffectsLa'+'yer'](){return this['_disablePo'+'stEffectsL'+'ayer'];}set['farClip'](_0x1b201e){this['_camera']['farClip']=_0x1b201e;}get['farClip'](){return this['_camera']['farClip'];}set['flipFaces'](_0x50bb09){this['_camera']['flipFaces']=_0x50bb09;}get['flipFaces'](){return this['_camera']['flipFaces'];}set['fov'](_0x469df4){this['_camera']['fov']=_0x469df4;}get['fov'](){return this['_camera']['fov'];}get['frustum'](){return this['_camera']['frustum'];}set['frustumCul'+'ling'](_0x24a4c4){this['_camera']['frustumCul'+'ling']=_0x24a4c4;}get['frustumCul'+'ling'](){return this['_camera']['frustumCul'+'ling'];}set['horizontal'+'Fov'](_0x353c2a){this['_camera']['horizontal'+'Fov']=_0x353c2a;}get['horizontal'+'Fov'](){return this['_camera']['horizontal'+'Fov'];}set['layers'](_0x398ebf){const _0x53fe55=this['_camera']['layers'],_0x11379c=this['system']['app']['scene'];_0x53fe55['forEach'](_0x1547c6=>{const _0x56d64d=_0x11379c['layers']['getLayerBy'+'Id'](_0x1547c6);_0x56d64d==null||_0x56d64d['removeCame'+'ra'](this);}),this['_camera']['layers']=_0x398ebf,this['enabled']&&this['entity']['enabled']&&_0x398ebf['forEach'](_0x3d5e86=>{const _0x47d2bc=_0x11379c['layers']['getLayerBy'+'Id'](_0x3d5e86);_0x47d2bc==null||_0x47d2bc['addCamera'](this);}),this['fire']('set:layers');}get['layers'](){return this['_camera']['layers'];}get['layersSet'](){return this['_camera']['layersSet'];}set['jitter'](_0x2810ab){this['_camera']['jitter']=_0x2810ab;}get['jitter'](){return this['_camera']['jitter'];}set['nearClip'](_0x5bf765){this['_camera']['nearClip']=_0x5bf765;}get['nearClip'](){return this['_camera']['nearClip'];}set['orthoHeigh'+'t'](_0x117bcd){this['_camera']['orthoHeigh'+'t']=_0x117bcd;}get['orthoHeigh'+'t'](){return this['_camera']['orthoHeigh'+'t'];}get['postEffect'+'s'](){return this['_postEffec'+'ts'];}get['postEffect'+'sEnabled'](){return this['_postEffec'+'ts']['enabled'];}set['priority'](_0x499c4c){this['_priority']=_0x499c4c,this['dirtyLayer'+'Compositio'+'nCameras']();}get['priority'](){return this['_priority'];}set['projection'](_0x1fa95c){this['_camera']['projection']=_0x1fa95c;}get['projection'](){return this['_camera']['projection'];}get['projection'+'Matrix'](){return this['_camera']['projection'+'Matrix'];}set['rect'](_0x2fdd82){this['_camera']['rect']=_0x2fdd82,this['fire']('set:rect',this['_camera']['rect']);}get['rect'](){return this['_camera']['rect'];}set['renderScen'+'eColorMap'](_0x260415){_0x260415&&!this['_sceneColo'+'rMapReques'+'ted']?(this['requestSce'+'neColorMap'](!(-0x778+0x2*-0xb7a+-0x21*-0xec)),this['_sceneColo'+'rMapReques'+'ted']=!(-0x8f4+0x1ac7+-0x5f1*0x3)):this['_sceneColo'+'rMapReques'+'ted']&&(this['requestSce'+'neColorMap'](!(-0x6d3+0xfa6+0x2*-0x469)),this['_sceneColo'+'rMapReques'+'ted']=!(-0x5*-0x7cd+0x54a+-0x1625*0x2));}get['renderScen'+'eColorMap'](){return this['_renderSce'+'neColorMap']>0x1cc7+-0x5fe*0x2+-0x10cb;}set['renderScen'+'eDepthMap'](_0x5e3587){_0x5e3587&&!this['_sceneDept'+'hMapReques'+'ted']?(this['requestSce'+'neDepthMap'](!(0x2*0x110b+0x9*-0xd9+-0x1a75)),this['_sceneDept'+'hMapReques'+'ted']=!(0x73*-0x6+-0x1*-0x863+-0x5b1)):this['_sceneDept'+'hMapReques'+'ted']&&(this['requestSce'+'neDepthMap'](!(-0x17*-0x49+-0x2*-0xc01+0xa30*-0x3)),this['_sceneDept'+'hMapReques'+'ted']=!(0x182d*-0x1+0x209*-0x7+0x266d));}get['renderScen'+'eDepthMap'](){return this['_renderSce'+'neDepthMap']>-0x3*-0x36c+-0x26f2+0x1cae;}set['renderTarg'+'et'](_0x38f747){w['call'](()=>{this['_camera']['renderPass'+'es']['length']>-0xd3a*0x2+0x162a+0x44a&&w['warn']('Setting\x20a\x20'+'render\x20tar'+'get\x20on\x20the'+'\x20camera\x20'+this['entity']['name']+('\x20after\x20the'+'\x20render\x20pa'+'sses\x20is\x20no'+'t\x20supporte'+'d,\x20set\x20it\x20'+'up\x20first.'));}),this['_camera']['renderTarg'+'et']=_0x38f747,this['dirtyLayer'+'Compositio'+'nCameras']();}get['renderTarg'+'et'](){return this['_camera']['renderTarg'+'et'];}set['scissorRec'+'t'](_0x1f2ab5){this['_camera']['scissorRec'+'t']=_0x1f2ab5;}get['scissorRec'+'t'](){return this['_camera']['scissorRec'+'t'];}set['sensitivit'+'y'](_0x5c70a0){this['_camera']['sensitivit'+'y']=_0x5c70a0;}get['sensitivit'+'y'](){return this['_camera']['sensitivit'+'y'];}set['shutter'](_0x3db207){this['_camera']['shutter']=_0x3db207;}get['shutter'](){return this['_camera']['shutter'];}get['viewMatrix'](){return this['_camera']['viewMatrix'];}['_enableDep'+'thLayer'](_0xed0547){if(this['layers']['find'](_0x3e6eda=>_0x3e6eda===ps)){const _0x27fb25=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0xed0547?_0x27fb25==null||_0x27fb25['incrementC'+'ounter']():_0x27fb25==null||_0x27fb25['decrementC'+'ounter']();}else{if(_0xed0547)return!(-0x1f9a+-0x2355+-0x11*-0x3f0);}return!(-0x177f+-0x12f1+-0x2a7*-0x10);}['requestSce'+'neColorMap'](_0x54000d){this['_renderSce'+'neColorMap']+=_0x54000d?-0x69e*0x2+0x8c2+0x47b:-(-0x1a*-0xb1+0x27*0xe8+-0x3551),w['assert'](this['_renderSce'+'neColorMap']>=-0x2*-0xd3d+-0x516+0x559*-0x4),this['_enableDep'+'thLayer'](_0x54000d)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneCo'+'lorMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassCol'+'orGrab'](this['system']['app']['graphicsDe'+'vice'],this['renderScen'+'eColorMap']),this['system']['app']['scene']['layers']['markDirty']();}['requestSce'+'neDepthMap'](_0xa94138){this['_renderSce'+'neDepthMap']+=_0xa94138?-0x3*0x6c5+0x1dd*0xb+-0x2f*0x1:-(0x1684+-0x1*-0x2099+-0x371c),w['assert'](this['_renderSce'+'neDepthMap']>=0x227e+0x35f+-0x435*0x9),this['_enableDep'+'thLayer'](_0xa94138)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneDe'+'pthMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassDep'+'thGrab'](this['system']['app']['graphicsDe'+'vice'],this['system']['app']['renderer'],this['renderScen'+'eDepthMap']),this['system']['app']['scene']['layers']['markDirty']();}['dirtyLayer'+'Compositio'+'nCameras'](){const _0x2dc4b4=this['system']['app']['scene']['layers'];_0x2dc4b4['_dirty']=!(0x3e*0x6d+-0x243*0x4+-0x115a);}['screenToWo'+'rld'](_0x193b1b,_0x531aed,_0x5b453a,_0x3090dd){const _0x3b9033=this['system']['app']['graphicsDe'+'vice'],{width:_0x2b391d,height:_0x15af38}=_0x3b9033['clientRect'];return this['_camera']['screenToWo'+'rld'](_0x193b1b,_0x531aed,_0x5b453a,_0x2b391d,_0x15af38,_0x3090dd);}['worldToScr'+'een'](_0x37eadb,_0xc3382f){const _0x36b770=this['system']['app']['graphicsDe'+'vice'],{width:_0x4ffbe1,height:_0x56c914}=_0x36b770['clientRect'];return this['_camera']['worldToScr'+'een'](_0x37eadb,_0x4ffbe1,_0x56c914,_0xc3382f);}['onAppPrere'+'nder'](){this['_camera']['_viewMatDi'+'rty']=!(0x4c7*0x7+0x44f*0x2+-0x2a0f),this['_camera']['_viewProjM'+'atDirty']=!(-0x106*0x8+0x209f+-0x2b7*0x9);}['addCameraT'+'oLayers'](){const _0xa8c4a7=this['layers'];for(let _0x2afec1=0x10c0+0x1*-0x21a1+-0x10e1*-0x1;_0x2afec1<_0xa8c4a7['length'];_0x2afec1++){const _0x9c2e1b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0xa8c4a7[_0x2afec1]);_0x9c2e1b&&_0x9c2e1b['addCamera'](this);}}['removeCame'+'raFromLaye'+'rs'](){const _0x45ffd0=this['layers'];for(let _0x4dd14d=0x17a4+-0x2*-0xbef+-0x2f82;_0x4dd14d<_0x45ffd0['length'];_0x4dd14d++){const _0x3ec101=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x45ffd0[_0x4dd14d]);_0x3ec101&&_0x3ec101['removeCame'+'ra'](this);}}['onLayersCh'+'anged'](_0x5f28a1,_0x3c0d74){this['addCameraT'+'oLayers'](),_0x5f28a1['off']('add',this['onLayerAdd'+'ed'],this),_0x5f28a1['off']('remove',this['onLayerRem'+'oved'],this),_0x3c0d74['on']('add',this['onLayerAdd'+'ed'],this),_0x3c0d74['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x258e92){this['layers']['indexOf'](_0x258e92['id'])<-0x1*0x245b+0x9e*-0x4+0x26d3||_0x258e92['addCamera'](this);}['onLayerRem'+'oved'](_0x1aed81){this['layers']['indexOf'](_0x1aed81['id'])<0x25b3*-0x1+0x2512+0xa1||_0x1aed81['removeCame'+'ra'](this);}['onEnable'](){var _0x3b3521,_0x299828,_0x33e85d;const _0xafefab=this['system']['app']['scene'],_0x1fc95d=_0xafefab['layers'];this['system']['addCamera'](this),(_0x3b3521=this['_evtLayers'+'Changed'])==null||_0x3b3521['off'](),this['_evtLayers'+'Changed']=_0xafefab['on']('set:layers',this['onLayersCh'+'anged'],this),_0x1fc95d&&((_0x299828=this['_evtLayerA'+'dded'])==null||_0x299828['off'](),this['_evtLayerA'+'dded']=_0x1fc95d['on']('add',this['onLayerAdd'+'ed'],this),(_0x33e85d=this['_evtLayerR'+'emoved'])==null||_0x33e85d['off'](),this['_evtLayerR'+'emoved']=_0x1fc95d['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addCameraT'+'oLayers'](),this['postEffect'+'s']['enable']();}['onDisable'](){var _0x46cab9,_0x183099,_0x822bab;const _0x24dc24=this['system']['app']['scene']['layers'];this['postEffect'+'s']['disable'](),this['removeCame'+'raFromLaye'+'rs'](),(_0x46cab9=this['_evtLayers'+'Changed'])==null||_0x46cab9['off'](),this['_evtLayers'+'Changed']=null,_0x24dc24&&((_0x183099=this['_evtLayerA'+'dded'])==null||_0x183099['off'](),this['_evtLayerA'+'dded']=null,(_0x822bab=this['_evtLayerR'+'emoved'])==null||_0x822bab['off'](),this['_evtLayerR'+'emoved']=null),this['system']['removeCame'+'ra'](this);}['onRemove'](){this['onDisable'](),this['off'](),this['camera']['destroy']();}['calculateA'+'spectRatio'](_0x41cce1){const _0xea2999=this['system']['app']['graphicsDe'+'vice'],_0x489697=_0x41cce1?_0x41cce1['width']:_0xea2999['width'],_0x3afc0c=_0x41cce1?_0x41cce1['height']:_0xea2999['height'];return _0x489697*this['rect']['z']/(_0x3afc0c*this['rect']['w']);}['frameUpdat'+'e'](_0x13b30d){this['aspectRati'+'oMode']===kp&&(this['aspectRati'+'o']=this['calculateA'+'spectRatio'](_0x13b30d));}['startXr'](_0xdf2a5c,_0x30f052,_0x5e56fb){this['system']['app']['xr']['start'](this,_0xdf2a5c,_0x30f052,_0x5e56fb);}['endXr'](_0x1dd1ad){if(!this['_camera']['xr']){_0x1dd1ad&&_0x1dd1ad(new Error('Camera\x20is\x20'+'not\x20in\x20XR'));return;}this['_camera']['xr']['end'](_0x1dd1ad);}['copy'](_0x54ba28){this['aperture']=_0x54ba28['aperture'],this['aspectRati'+'o']=_0x54ba28['aspectRati'+'o'],this['aspectRati'+'oMode']=_0x54ba28['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x54ba28['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x54ba28['calculateT'+'ransform'],this['clearColor']=_0x54ba28['clearColor'],this['clearColor'+'Buffer']=_0x54ba28['clearColor'+'Buffer'],this['clearDepth'+'Buffer']=_0x54ba28['clearDepth'+'Buffer'],this['clearStenc'+'ilBuffer']=_0x54ba28['clearStenc'+'ilBuffer'],this['cullFaces']=_0x54ba28['cullFaces'],this['disablePos'+'tEffectsLa'+'yer']=_0x54ba28['disablePos'+'tEffectsLa'+'yer'],this['farClip']=_0x54ba28['farClip'],this['flipFaces']=_0x54ba28['flipFaces'],this['fov']=_0x54ba28['fov'],this['frustumCul'+'ling']=_0x54ba28['frustumCul'+'ling'],this['horizontal'+'Fov']=_0x54ba28['horizontal'+'Fov'],this['layers']=_0x54ba28['layers'],this['nearClip']=_0x54ba28['nearClip'],this['orthoHeigh'+'t']=_0x54ba28['orthoHeigh'+'t'],this['priority']=_0x54ba28['priority'],this['projection']=_0x54ba28['projection'],this['rect']=_0x54ba28['rect'],this['renderTarg'+'et']=_0x54ba28['renderTarg'+'et'],this['scissorRec'+'t']=_0x54ba28['scissorRec'+'t'],this['sensitivit'+'y']=_0x54ba28['sensitivit'+'y'],this['shutter']=_0x54ba28['shutter'];}}class UO{constructor(){this['enabled']=!(-0x15d7+-0x114b*-0x1+-0x123*-0x4);}}const Lv=['enabled'];class BO extends ct{constructor(_0x10d17b){super(_0x10d17b),h(this,'cameras',[]),(this['id']='camera',this['ComponentT'+'ype']=Cr,this['DataType']=UO,this['schema']=Lv,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['on']('prerender',this['onAppPrere'+'nder'],this));}['initialize'+'ComponentD'+'ata'](_0x425c77,_0x43fb4b,_0x355dce){_0x355dce=['aspectRati'+'o','aspectRati'+'oMode','calculateP'+'rojection','calculateT'+'ransform','clearColor','clearColor'+'Buffer','clearDepth'+'Buffer','clearStenc'+'ilBuffer','renderScen'+'eColorMap','renderScen'+'eDepthMap','cullFaces','farClip','flipFaces','fog','fov','frustumCul'+'ling','horizontal'+'Fov','layers','renderTarg'+'et','nearClip','orthoHeigh'+'t','projection','priority','rect','scissorRec'+'t','aperture','shutter','sensitivit'+'y','gammaCorre'+'ction','toneMappin'+'g'];for(let _0x107ccb=0x156+-0x1*-0x20b9+-0x220f*0x1;_0x107ccb<_0x355dce['length'];_0x107ccb++){const _0x3587b7=_0x355dce[_0x107ccb];if(_0x43fb4b['hasOwnProp'+'erty'](_0x3587b7)){const _0x43739e=_0x43fb4b[_0x3587b7];switch(_0x3587b7){case'rect':case'scissorRec'+'t':Array['isArray'](_0x43739e)?_0x425c77[_0x3587b7]=new re(_0x43739e[0x1ddf+-0xddb+-0x1004],_0x43739e[0x269e+-0x9c*0x6+0x1*-0x22f5],_0x43739e[-0x1*-0xe84+-0xb6d*0x1+-0x315],_0x43739e[-0x1*-0x1f1+-0x4*0x6f3+0x19de]):_0x425c77[_0x3587b7]=_0x43739e;break;case'clearColor':Array['isArray'](_0x43739e)?_0x425c77[_0x3587b7]=new ie(_0x43739e[-0x1113*0x2+-0x62f*0x4+0x3ae2],_0x43739e[-0x2fd+0x1*0x2377+-0x2079],_0x43739e[0x5*0x2d+0x15e0+-0x16bf],_0x43739e[-0x3cf+0xd10+-0x93e]):_0x425c77[_0x3587b7]=_0x43739e;break;default:_0x425c77[_0x3587b7]=_0x43739e;break;}}}super['initialize'+'ComponentD'+'ata'](_0x425c77,_0x43fb4b,['enabled']);}['cloneCompo'+'nent'](_0xa47617,_0x3f2ecc){const _0xce4cf2=_0xa47617['camera'];return this['addCompone'+'nt'](_0x3f2ecc,{'aspectRatio':_0xce4cf2['aspectRati'+'o'],'aspectRatioMode':_0xce4cf2['aspectRati'+'oMode'],'calculateProjection':_0xce4cf2['calculateP'+'rojection'],'calculateTransform':_0xce4cf2['calculateT'+'ransform'],'clearColor':_0xce4cf2['clearColor'],'clearColorBuffer':_0xce4cf2['clearColor'+'Buffer'],'clearDepthBuffer':_0xce4cf2['clearDepth'+'Buffer'],'clearStencilBuffer':_0xce4cf2['clearStenc'+'ilBuffer'],'renderSceneDepthMap':_0xce4cf2['renderScen'+'eDepthMap'],'renderSceneColorMap':_0xce4cf2['renderScen'+'eColorMap'],'cullFaces':_0xce4cf2['cullFaces'],'enabled':_0xce4cf2['enabled'],'farClip':_0xce4cf2['farClip'],'flipFaces':_0xce4cf2['flipFaces'],'fov':_0xce4cf2['fov'],'frustumCulling':_0xce4cf2['frustumCul'+'ling'],'horizontalFov':_0xce4cf2['horizontal'+'Fov'],'layers':_0xce4cf2['layers'],'renderTarget':_0xce4cf2['renderTarg'+'et'],'nearClip':_0xce4cf2['nearClip'],'orthoHeight':_0xce4cf2['orthoHeigh'+'t'],'projection':_0xce4cf2['projection'],'priority':_0xce4cf2['priority'],'rect':_0xce4cf2['rect'],'scissorRect':_0xce4cf2['scissorRec'+'t'],'aperture':_0xce4cf2['aperture'],'sensitivity':_0xce4cf2['sensitivit'+'y'],'shutter':_0xce4cf2['shutter'],'gammaCorrection':_0xce4cf2['gammaCorre'+'ction'],'toneMapping':_0xce4cf2['toneMappin'+'g']});}['onBeforeRe'+'move'](_0x3fbeed,_0xdad606){this['removeCame'+'ra'](_0xdad606),_0xdad606['onRemove']();}['onAppPrere'+'nder'](){for(let _0x134764=-0x1864*-0x1+-0x2092+0x82e,_0x4b09b1=this['cameras']['length'];_0x134764<_0x4b09b1;_0x134764++)this['cameras'][_0x134764]['onAppPrere'+'nder']();}['addCamera'](_0x3d053e){this['cameras']['push'](_0x3d053e),el(this['cameras']);}['removeCame'+'ra'](_0x14d640){const _0x141a2e=this['cameras']['indexOf'](_0x14d640);_0x141a2e>=-0x7*0x1bb+-0x2ed+0x32*0x4d&&(this['cameras']['splice'](_0x141a2e,0x1c00+-0x1b*0x25+-0x1818),el(this['cameras']));}['destroy'](){this['app']['off']('prerender',this['onAppPrere'+'nder'],this),super['destroy']();}}we['_buildAcce'+'ssors'](Cr['prototype'],Lv);class Rv{constructor(){h(this,'enabled',!(0x1*-0x2405+-0x2bb+0x140*0x1f)),h(this,'light'),h(this,'type','directiona'+'l'),h(this,'color',new ie(-0x3e2*0x5+0xbb2+0x7b9*0x1,-0x1897*-0x1+0x68+-0x18fe,0x2373+-0x693+-0x1cdf)),h(this,'intensity',0x8b+0x1e3a+-0x1ec4*0x1),h(this,'luminance',-0x11c6+0x3a*0x9+0xfbc),h(this,'shape',js),h(this,'affectSpec'+'ularity',!(-0x156c+0x1d*0x14f+-0x1*0x1087)),h(this,'castShadow'+'s',!(0x15f9+0xda1*0x2+-0x189d*0x2)),h(this,'shadowDist'+'ance',-0x1550+0x1b46+-0x5ce),h(this,'shadowInte'+'nsity',0xc00+0x1e2f*-0x1+-0x6*-0x308),h(this,'shadowReso'+'lution',-0xa*-0x59+-0x1ab*-0x14+-0x20d6),h(this,'shadowBias',0xd*-0x44+-0x1c7f+0x1ff3+0.05),h(this,'numCascade'+'s',-0x248c+0x3d3+0x20ba),h(this,'cascadeBle'+'nd',0x13c9*0x1+0x1d02+0x30cb*-0x1),h(this,'bakeNumSam'+'ples',0xa4*-0x11+0x1a*0xe7+0x1*-0xc91),h(this,'bakeArea',0x14c1+-0x7*-0x104+-0x1bdd),h(this,'cascadeDis'+'tribution',0x17f*0xf+-0x22b8+0x1*0xc47+0.5),h(this,'normalOffs'+'etBias',-0x1*-0x270d+-0x14b7+-0x92b*0x2),h(this,'range',-0x1348+-0xb2a+0x1e7c),h(this,'innerConeA'+'ngle',0x1d83+-0x18e1*0x1+-0x47a),h(this,'outerConeA'+'ngle',0xb81*0x3+0x1978+-0x3bce),h(this,'falloffMod'+'e',bp),h(this,'shadowType',Ws),h(this,'vsmBlurSiz'+'e',0x1b9a+-0x2*-0xdff+-0x378d),h(this,'vsmBlurMod'+'e',Cp),h(this,'vsmBias',(0x20eb+0x21a2+-0x428d+0.01)*(-0x46b*-0x3+-0x1c9+-0xb78+0.25)),h(this,'cookieAsse'+'t',null),h(this,'cookie',null),h(this,'cookieInte'+'nsity',-0x1185+-0x17ed+0x2973),h(this,'cookieFall'+'off',!(-0xc6b*-0x1+0x7a1+-0x140c)),h(this,'cookieChan'+'nel','rgb'),h(this,'cookieAngl'+'e',0x1*-0x1ab9+-0x13f0*0x1+0x2ea9),h(this,'cookieScal'+'e',null),h(this,'cookieOffs'+'et',null),h(this,'shadowUpda'+'teMode',Fp),h(this,'mask',0x22f1+0x1062+-0x2*0x19a9),h(this,'affectDyna'+'mic',!(-0x1*-0x44b+-0x24b*-0xc+0x1*-0x1fcf)),h(this,'affectLigh'+'tmapped',!(0x1874+0x21dd+-0x1370*0x3)),h(this,'bake',!(0x1*-0x15c3+0x2e6+-0x17*-0xd2)),h(this,'bakeDir',!(0x1*0x165a+-0x51e+-0x89e*0x2)),h(this,'isStatic',!(-0x2004+-0x1aa0+0x3aa5)),h(this,'layers',[Ji]),h(this,'penumbraSi'+'ze',-0x1ae8+0xf*-0xe5+-0x142a*-0x2),h(this,'penumbraFa'+'lloff',0x2*-0x11c7+0x23cd+0x2*-0x1f),h(this,'shadowSamp'+'les',0x11c*0x5+-0x1af4+0x2af*0x8),h(this,'shadowBloc'+'kerSamples',0x11*-0x20b+0x2689+-0x3be);}}const Io=Object['keys'](new Rv());class zO extends we{constructor(){super(...arguments),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_cookieAss'+'et',null),h(this,'_cookieAss'+'etId',null),h(this,'_cookieAss'+'etAdd',!(-0x1bab+-0x1c26+0x5*0xb2a)),h(this,'_cookieMat'+'rix',null);}get['data'](){const _0x5e0ad5=this['system']['store'][this['entity']['getGuid']()];return _0x5e0ad5?_0x5e0ad5['data']:null;}set['enabled'](_0x17574d){this['_setValue']('enabled',_0x17574d,function(_0x1761b6,_0x2acf38){this['onSetEnabl'+'ed'](null,_0x2acf38,_0x1761b6);});}get['enabled'](){return this['data']['enabled'];}set['light'](_0x41da01){this['_setValue']('light',_0x41da01);}get['light'](){return this['data']['light'];}set['type'](_0x3a049f){this['_setValue']('type',_0x3a049f,function(_0x412dff,_0x32e8fb){this['system']['changeType'](this,_0x32e8fb,_0x412dff),this['refreshPro'+'perties']();});}get['type'](){return this['data']['type'];}set['color'](_0x5b2fa2){this['_setValue']('color',_0x5b2fa2,function(_0x253b75,_0xb6037f){this['light']['setColor'](_0x253b75);},!(-0x27c+-0x1*0x1c1+0x43d));}get['color'](){return this['data']['color'];}set['intensity'](_0x5bf8bc){this['_setValue']('intensity',_0x5bf8bc,function(_0x3413ed,_0x30ddd0){this['light']['intensity']=_0x3413ed;});}get['intensity'](){return this['data']['intensity'];}set['luminance'](_0x28e638){this['_setValue']('luminance',_0x28e638,function(_0x131b09,_0x13b7c7){this['light']['luminance']=_0x131b09;});}get['luminance'](){return this['data']['luminance'];}set['shape'](_0x1b7020){this['_setValue']('shape',_0x1b7020,function(_0x9a7a63,_0x38cc29){this['light']['shape']=_0x9a7a63;});}get['shape'](){return this['data']['shape'];}set['affectSpec'+'ularity'](_0x4898b4){this['_setValue']('affectSpec'+'ularity',_0x4898b4,function(_0x423a2d,_0x4e72b6){this['light']['affectSpec'+'ularity']=_0x423a2d;});}get['affectSpec'+'ularity'](){return this['data']['affectSpec'+'ularity'];}set['castShadow'+'s'](_0x171d33){this['_setValue']('castShadow'+'s',_0x171d33,function(_0x2e920b,_0xaa68ab){this['light']['castShadow'+'s']=_0x2e920b;});}get['castShadow'+'s'](){return this['data']['castShadow'+'s'];}set['shadowDist'+'ance'](_0x1976ca){this['_setValue']('shadowDist'+'ance',_0x1976ca,function(_0x529de4,_0x27be4d){this['light']['shadowDist'+'ance']=_0x529de4;});}get['shadowDist'+'ance'](){return this['data']['shadowDist'+'ance'];}set['shadowInte'+'nsity'](_0x142115){this['_setValue']('shadowInte'+'nsity',_0x142115,function(_0x4ed6b9,_0x8521e7){this['light']['shadowInte'+'nsity']=_0x4ed6b9;});}get['shadowInte'+'nsity'](){return this['data']['shadowInte'+'nsity'];}set['shadowReso'+'lution'](_0x5b261d){this['_setValue']('shadowReso'+'lution',_0x5b261d,function(_0x3a6970,_0x31454c){this['light']['shadowReso'+'lution']=_0x3a6970;});}get['shadowReso'+'lution'](){return this['data']['shadowReso'+'lution'];}set['shadowBias'](_0x208a6d){this['_setValue']('shadowBias',_0x208a6d,function(_0x56ca91,_0x525a15){this['light']['shadowBias']=-(0x1f0*0xa+-0x1e13+0xab3+0.01)*Y['clamp'](_0x56ca91,0x1767+-0x1*0x1f75+0x80e,0x25a9+0x5f8*-0x1+-0x1fb0);});}get['shadowBias'](){return this['data']['shadowBias'];}set['numCascade'+'s'](_0x7b0cb1){this['_setValue']('numCascade'+'s',_0x7b0cb1,function(_0x4b749a,_0x4cf485){this['light']['numCascade'+'s']=Y['clamp'](Math['floor'](_0x4b749a),-0xb*-0xe9+0x5*-0x751+0x1a93*0x1,0x1257+-0x50e*0x1+-0x4f*0x2b);});}get['numCascade'+'s'](){return this['data']['numCascade'+'s'];}set['cascadeBle'+'nd'](_0x325705){this['_setValue']('cascadeBle'+'nd',_0x325705,function(_0x261632,_0x33b578){this['light']['cascadeBle'+'nd']=Y['clamp'](_0x261632,-0x11*-0x178+-0x552*-0x7+-0x3e36,-0x1f*0x10b+0xdf*0x5+0x1bfb);});}get['cascadeBle'+'nd'](){return this['data']['cascadeBle'+'nd'];}set['bakeNumSam'+'ples'](_0x375f9c){this['_setValue']('bakeNumSam'+'ples',_0x375f9c,function(_0x3d6585,_0x4ae0e2){this['light']['bakeNumSam'+'ples']=Y['clamp'](Math['floor'](_0x3d6585),0x21df+-0x7*0x2d+0x687*-0x5,-0xb76+-0xc*-0x1be+-0x873);});}get['bakeNumSam'+'ples'](){return this['data']['bakeNumSam'+'ples'];}set['bakeArea'](_0x41a7bc){this['_setValue']('bakeArea',_0x41a7bc,function(_0x5504d9,_0xbe4168){this['light']['bakeArea']=Y['clamp'](_0x5504d9,-0x4*-0x527+0x259a+-0x2*0x1d1b,0x796+-0x1b3a+-0x38*-0x5d);});}get['bakeArea'](){return this['data']['bakeArea'];}set['cascadeDis'+'tribution'](_0x52ab4c){this['_setValue']('cascadeDis'+'tribution',_0x52ab4c,function(_0x45afdc,_0x52ce84){this['light']['cascadeDis'+'tribution']=Y['clamp'](_0x45afdc,-0x1fb2*-0x1+0x1a6b+-0x3a1d,-0x269+0x2008*0x1+0x11*-0x1be);});}get['cascadeDis'+'tribution'](){return this['data']['cascadeDis'+'tribution'];}set['normalOffs'+'etBias'](_0x4be1ee){this['_setValue']('normalOffs'+'etBias',_0x4be1ee,function(_0x5a2531,_0x1de518){this['light']['normalOffs'+'etBias']=Y['clamp'](_0x5a2531,0x15dd+0x3f4+-0x3*0x89b,-0x5*-0x335+0x676+-0x167e*0x1);});}get['normalOffs'+'etBias'](){return this['data']['normalOffs'+'etBias'];}set['range'](_0x21bdac){this['_setValue']('range',_0x21bdac,function(_0x442db2,_0x52bbf6){this['light']['attenuatio'+'nEnd']=_0x442db2;});}get['range'](){return this['data']['range'];}set['innerConeA'+'ngle'](_0x11ec4a){this['_setValue']('innerConeA'+'ngle',_0x11ec4a,function(_0x1c26ca,_0xbad635){this['light']['innerConeA'+'ngle']=_0x1c26ca;});}get['innerConeA'+'ngle'](){return this['data']['innerConeA'+'ngle'];}set['outerConeA'+'ngle'](_0x207a17){this['_setValue']('outerConeA'+'ngle',_0x207a17,function(_0x38506f,_0x1df505){this['light']['outerConeA'+'ngle']=_0x38506f;});}get['outerConeA'+'ngle'](){return this['data']['outerConeA'+'ngle'];}set['falloffMod'+'e'](_0xe5617d){this['_setValue']('falloffMod'+'e',_0xe5617d,function(_0xd8d6f7,_0x5f5b68){this['light']['falloffMod'+'e']=_0xd8d6f7;});}get['falloffMod'+'e'](){return this['data']['falloffMod'+'e'];}set['shadowType'](_0x40c765){this['_setValue']('shadowType',_0x40c765,function(_0x48dd64,_0x559d3c){this['light']['shadowType']=_0x48dd64;});}get['shadowType'](){return this['data']['shadowType'];}set['vsmBlurSiz'+'e'](_0x4716f1){this['_setValue']('vsmBlurSiz'+'e',_0x4716f1,function(_0x33bc74,_0x5181d5){this['light']['vsmBlurSiz'+'e']=_0x33bc74;});}get['vsmBlurSiz'+'e'](){return this['data']['vsmBlurSiz'+'e'];}set['vsmBlurMod'+'e'](_0x1f298b){this['_setValue']('vsmBlurMod'+'e',_0x1f298b,function(_0x2f6b85,_0x14f599){this['light']['vsmBlurMod'+'e']=_0x2f6b85;});}get['vsmBlurMod'+'e'](){return this['data']['vsmBlurMod'+'e'];}set['vsmBias'](_0x18c33f){this['_setValue']('vsmBias',_0x18c33f,function(_0x353113,_0x4d9687){this['light']['vsmBias']=Y['clamp'](_0x353113,-0x186+0x5*-0x649+-0x697*-0x5,-0x2*-0x772+0x21ab+-0x308e);});}get['vsmBias'](){return this['data']['vsmBias'];}set['cookieAsse'+'t'](_0x31938e){this['_setValue']('cookieAsse'+'t',_0x31938e,function(_0xc101a6,_0x129e08){if(!(this['_cookieAss'+'etId']&&(_0xc101a6 instanceof pe&&_0xc101a6['id']===this['_cookieAss'+'etId']||_0xc101a6===this['_cookieAss'+'etId']))){if(this['onCookieAs'+'setRemove'](),this['_cookieAss'+'etId']=null,_0xc101a6 instanceof pe)this['data']['cookieAsse'+'t']=_0xc101a6['id'],this['_cookieAss'+'etId']=_0xc101a6['id'],this['onCookieAs'+'setAdd'](_0xc101a6);else{if(typeof _0xc101a6=='number'){this['_cookieAss'+'etId']=_0xc101a6;const _0x3e5020=this['system']['app']['assets']['get'](_0xc101a6);_0x3e5020?this['onCookieAs'+'setAdd'](_0x3e5020):(this['_cookieAss'+'etAdd']=!(0x1374+0x1*0x1707+-0x2a7b),this['system']['app']['assets']['on']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this));}}}});}get['cookieAsse'+'t'](){return this['data']['cookieAsse'+'t'];}set['cookie'](_0x2f5874){this['_setValue']('cookie',_0x2f5874,function(_0x459528,_0x251e0f){this['light']['cookie']=_0x459528;});}get['cookie'](){return this['data']['cookie'];}set['cookieInte'+'nsity'](_0x5d3be0){this['_setValue']('cookieInte'+'nsity',_0x5d3be0,function(_0x4d22f7,_0x4a733c){this['light']['cookieInte'+'nsity']=Y['clamp'](_0x4d22f7,-0x2409+0x181b+-0x2*-0x5f7,0x31*0x23+0x96e*-0x1+-0x46*-0xa);});}get['cookieInte'+'nsity'](){return this['data']['cookieInte'+'nsity'];}set['cookieFall'+'off'](_0x1e01f8){this['_setValue']('cookieFall'+'off',_0x1e01f8,function(_0x4226d7,_0x49b778){this['light']['cookieFall'+'off']=_0x4226d7;});}get['cookieFall'+'off'](){return this['data']['cookieFall'+'off'];}set['cookieChan'+'nel'](_0x2e52bc){this['_setValue']('cookieChan'+'nel',_0x2e52bc,function(_0x62a9a1,_0x35a6d9){this['light']['cookieChan'+'nel']=_0x62a9a1;});}get['cookieChan'+'nel'](){return this['data']['cookieChan'+'nel'];}set['cookieAngl'+'e'](_0x4e4b33){this['_setValue']('cookieAngl'+'e',_0x4e4b33,function(_0x2e5b28,_0x5c00d4){if(_0x2e5b28!==0x195f+0x1*-0x22c0+-0x31*-0x31||this['cookieScal'+'e']!==null){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());let _0x37c3ff=-0x517+-0x996+0xeae*0x1,_0x2e91fa=-0x56a*-0x2+-0x3*0xa31+0x13c0;this['cookieScal'+'e']&&(_0x37c3ff=this['cookieScal'+'e']['x'],_0x2e91fa=this['cookieScal'+'e']['y']);const _0x2c202a=Math['cos'](_0x2e5b28*Y['DEG_TO_RAD']),_0x39f35e=Math['sin'](_0x2e5b28*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x2c202a/_0x37c3ff,-_0x39f35e/_0x37c3ff,_0x39f35e/_0x2e91fa,_0x2c202a/_0x2e91fa),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;});}get['cookieAngl'+'e'](){return this['data']['cookieAngl'+'e'];}set['cookieScal'+'e'](_0x1e4dac){this['_setValue']('cookieScal'+'e',_0x1e4dac,function(_0x475715,_0x1d11bf){if(_0x475715!==null||this['cookieAngl'+'e']!==-0x67*0x5+-0x30b+-0x287*-0x2){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());const _0x175744=_0x475715['x'],_0x47b77d=_0x475715['y'],_0x299782=Math['cos'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']),_0x24d24c=Math['sin'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x299782/_0x175744,-_0x24d24c/_0x175744,_0x24d24c/_0x47b77d,_0x299782/_0x47b77d),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;},!(0x1*0x202d+0x1b08+0x3b35*-0x1));}get['cookieScal'+'e'](){return this['data']['cookieScal'+'e'];}set['cookieOffs'+'et'](_0x44dbd2){this['_setValue']('cookieOffs'+'et',_0x44dbd2,function(_0x311e36,_0x13f936){this['light']['cookieOffs'+'et']=_0x311e36;},!(0x4f+0x5d0*0x6+-0x232f));}get['cookieOffs'+'et'](){return this['data']['cookieOffs'+'et'];}set['shadowUpda'+'teMode'](_0x2eabe9){this['_setValue']('shadowUpda'+'teMode',_0x2eabe9,function(_0x1579af,_0x24d881){this['light']['shadowUpda'+'teMode']=_0x1579af;},!(0xe2+0x47*-0x51+0x1595));}get['shadowUpda'+'teMode'](){return this['data']['shadowUpda'+'teMode'];}set['mask'](_0xe6e2e4){this['_setValue']('mask',_0xe6e2e4,function(_0x52ad61,_0x46c808){this['light']['mask']=_0x52ad61;});}get['mask'](){return this['data']['mask'];}set['affectDyna'+'mic'](_0x23a0cc){this['_setValue']('affectDyna'+'mic',_0x23a0cc,function(_0x4e4448,_0x13972d){_0x4e4448?this['light']['mask']|=Ss:this['light']['mask']&=~Ss,this['light']['layersDirt'+'y']();});}get['affectDyna'+'mic'](){return this['data']['affectDyna'+'mic'];}set['affectLigh'+'tmapped'](_0x5ede3d){this['_setValue']('affectLigh'+'tmapped',_0x5ede3d,function(_0x5e5780,_0x46502b){_0x5e5780?(this['light']['mask']|=di,this['bake']&&(this['light']['mask']&=~fi)):(this['light']['mask']&=~di,this['bake']&&(this['light']['mask']|=fi));});}get['affectLigh'+'tmapped'](){return this['data']['affectLigh'+'tmapped'];}set['bake'](_0x47be21){this['_setValue']('bake',_0x47be21,function(_0x5b82d4,_0x582def){_0x5b82d4?(this['light']['mask']|=fi,this['affectLigh'+'tmapped']&&(this['light']['mask']&=~di)):(this['light']['mask']&=~fi,this['affectLigh'+'tmapped']&&(this['light']['mask']|=di)),this['light']['layersDirt'+'y']();});}get['bake'](){return this['data']['bake'];}set['bakeDir'](_0x4f6a1a){this['_setValue']('bakeDir',_0x4f6a1a,function(_0x547a03,_0x298ae8){this['light']['bakeDir']=_0x547a03;});}get['bakeDir'](){return this['data']['bakeDir'];}set['isStatic'](_0x5e8c57){this['_setValue']('isStatic',_0x5e8c57,function(_0x1fb645,_0x5158c9){this['light']['isStatic']=_0x1fb645;});}get['isStatic'](){return this['data']['isStatic'];}set['layers'](_0x108013){this['_setValue']('layers',_0x108013,function(_0x4626d3,_0x4de24a){for(let _0x294932=-0x1b05+0x7*0x24b+0xaf8;_0x294932<_0x4de24a['length'];_0x294932++){const _0x282db5=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x4de24a[_0x294932]);_0x282db5&&(_0x282db5['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x282db5));}for(let _0x1231a5=-0xa9+0x16a0+-0x1*0x15f7;_0x1231a5<_0x4626d3['length'];_0x1231a5++){const _0xef8b5a=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x4626d3[_0x1231a5]);_0xef8b5a&&this['enabled']&&this['entity']['enabled']&&(_0xef8b5a['addLight'](this),this['light']['addLayer'](_0xef8b5a));}});}get['layers'](){return this['data']['layers'];}set['shadowUpda'+'teOverride'+'s'](_0xf3b9ba){this['light']['shadowUpda'+'teOverride'+'s']=_0xf3b9ba;}get['shadowUpda'+'teOverride'+'s'](){return this['light']['shadowUpda'+'teOverride'+'s'];}set['shadowSamp'+'les'](_0x534cb3){this['light']['shadowSamp'+'les']=_0x534cb3;}get['shadowSamp'+'les'](){return this['light']['shadowSamp'+'les'];}set['shadowBloc'+'kerSamples'](_0x31127f){this['light']['shadowBloc'+'kerSamples']=_0x31127f;}get['shadowBloc'+'kerSamples'](){return this['light']['shadowBloc'+'kerSamples'];}set['penumbraSi'+'ze'](_0x5b8ca0){this['light']['penumbraSi'+'ze']=_0x5b8ca0;}get['penumbraSi'+'ze'](){return this['light']['penumbraSi'+'ze'];}set['penumbraFa'+'lloff'](_0x3fbf95){this['light']['penumbraFa'+'lloff']=_0x3fbf95;}get['penumbraFa'+'lloff'](){return this['light']['penumbraFa'+'lloff'];}['_setValue'](_0x9e60c,_0x42704f,_0x245ab1,_0x35b4f6){const _0x45068c=this['data'],_0x4062e0=_0x45068c[_0x9e60c];!_0x35b4f6&&_0x4062e0===_0x42704f||(_0x45068c[_0x9e60c]=_0x42704f,_0x245ab1&&_0x245ab1['call'](this,_0x42704f,_0x4062e0));}['addLightTo'+'Layers'](){for(let _0x568f86=-0x1*-0x2103+-0x2*-0x22d+-0x779*0x5;_0x568f86<this['layers']['length'];_0x568f86++){const _0x8e719c=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x568f86]);_0x8e719c&&(_0x8e719c['addLight'](this),this['light']['addLayer'](_0x8e719c));}}['removeLigh'+'tFromLayer'+'s'](){for(let _0xb3597d=0x107*0x1b+-0x205*0xd+-0x17c;_0xb3597d<this['layers']['length'];_0xb3597d++){const _0x131908=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0xb3597d]);_0x131908&&(_0x131908['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x131908));}}['onLayersCh'+'anged'](_0x33907e,_0x30f24c){this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),_0x33907e['off']('add',this['onLayerAdd'+'ed'],this),_0x33907e['off']('remove',this['onLayerRem'+'oved'],this),_0x30f24c['on']('add',this['onLayerAdd'+'ed'],this),_0x30f24c['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x493076){this['layers']['indexOf'](_0x493076['id'])>=-0x27a*0x9+0x2ba+0x1390&&this['enabled']&&this['entity']['enabled']&&(_0x493076['addLight'](this),this['light']['addLayer'](_0x493076));}['onLayerRem'+'oved'](_0x573b41){this['layers']['indexOf'](_0x573b41['id'])>=-0x4*0x85+-0x1*-0x2581+-0x236d&&(_0x573b41['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x573b41));}['refreshPro'+'perties'](){for(let _0x328924=-0x671*-0x4+-0x1918+-0x2b*0x4;_0x328924<Io['length'];_0x328924++){const _0x298544=Io[_0x328924];this[_0x298544]=this[_0x298544];}this['enabled']&&this['entity']['enabled']&&this['onEnable']();}['onCookieAs'+'setSet'](){let _0x26e3d3=!(-0x2431+-0x1021+-0xf*-0x37d);this['_cookieAss'+'et']['type']==='cubemap'&&!this['_cookieAss'+'et']['loadFaces']&&(this['_cookieAss'+'et']['loadFaces']=!(0x2043+0x3ef+-0x2432),_0x26e3d3=!(-0x190b*0x1+0x3d*0x5d+0x2e2)),(!this['_cookieAss'+'et']['resource']||_0x26e3d3)&&this['system']['app']['assets']['load'](this['_cookieAss'+'et']),this['_cookieAss'+'et']['resource']&&this['onCookieAs'+'setLoad']();}['onCookieAs'+'setAdd'](_0x4be59c){this['_cookieAss'+'etId']===_0x4be59c['id']&&(this['_cookieAss'+'et']=_0x4be59c,this['light']['enabled']&&this['onCookieAs'+'setSet'](),this['_cookieAss'+'et']['on']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['on']('remove',this['onCookieAs'+'setRemove'],this));}['onCookieAs'+'setLoad'](){!this['_cookieAss'+'et']||!this['_cookieAss'+'et']['resource']||(this['cookie']=this['_cookieAss'+'et']['resource']);}['onCookieAs'+'setRemove'](){this['_cookieAss'+'etId']&&(this['_cookieAss'+'etAdd']&&(this['system']['app']['assets']['off']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this),this['_cookieAss'+'etAdd']=!(-0x18e*0x5+-0xd21*-0x2+-0x127b)),this['_cookieAss'+'et']&&(this['_cookieAss'+'et']['off']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['off']('remove',this['onCookieAs'+'setRemove'],this),this['_cookieAss'+'et']=null),this['cookie']=null);}['onEnable'](){const _0x3307dc=this['system']['app']['scene'],_0x371348=_0x3307dc['layers'];this['light']['enabled']=!(0x14e*-0x1b+0xdaf+0x44f*0x5),this['_evtLayers'+'Changed']=_0x3307dc['on']('set:layers',this['onLayersCh'+'anged'],this),_0x371348&&(this['_evtLayerA'+'dded']=_0x371348['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x371348['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),this['_cookieAss'+'et']&&!this['cookie']&&this['onCookieAs'+'setSet']();}['onDisable'](){var _0x3eed9e,_0x17d42f,_0x3b4fc1;const _0x54e816=this['system']['app']['scene']['layers'];this['light']['enabled']=!(-0xb*0x32c+0x19ed+0x8f8),(_0x3eed9e=this['_evtLayers'+'Changed'])==null||_0x3eed9e['off'](),this['_evtLayers'+'Changed']=null,_0x54e816&&((_0x17d42f=this['_evtLayerA'+'dded'])==null||_0x17d42f['off'](),this['_evtLayerA'+'dded']=null,(_0x3b4fc1=this['_evtLayerR'+'emoved'])==null||_0x3b4fc1['off'](),this['_evtLayerR'+'emoved']=null),this['removeLigh'+'tFromLayer'+'s']();}['onRemove'](){this['onDisable'](),this['light']['destroy'](),this['cookieAsse'+'t']=null;}}class VO extends ct{constructor(_0x5b8717){super(_0x5b8717),this['id']='light',this['ComponentT'+'ype']=zO,this['DataType']=Rv,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x596979,_0x3de9be){const _0x3c5d6e={..._0x3de9be};_0x3c5d6e['type']||(_0x3c5d6e['type']=_0x596979['data']['type']),_0x596979['data']['type']=_0x3c5d6e['type'],_0x3c5d6e['layers']&&Array['isArray'](_0x3c5d6e['layers'])&&(_0x3c5d6e['layers']=_0x3c5d6e['layers']['slice'](-0x782*-0x1+-0x16e*-0x19+-0x2b40)),_0x3c5d6e['color']&&Array['isArray'](_0x3c5d6e['color'])&&(_0x3c5d6e['color']=new ie(_0x3c5d6e['color'][0x21a0+0x14d6*0x1+-0x1b3b*0x2],_0x3c5d6e['color'][-0x1db*-0xd+-0x5*-0x20b+-0x2255],_0x3c5d6e['color'][0x30+-0x28*-0x58+-0x2*0x6f7])),_0x3c5d6e['cookieOffs'+'et']&&_0x3c5d6e['cookieOffs'+'et']instanceof Array&&(_0x3c5d6e['cookieOffs'+'et']=new J(_0x3c5d6e['cookieOffs'+'et'][0x6*0x20c+-0x27b+-0x1*0x9cd],_0x3c5d6e['cookieOffs'+'et'][0x1853+-0x17b9+0x3*-0x33])),_0x3c5d6e['cookieScal'+'e']&&_0x3c5d6e['cookieScal'+'e']instanceof Array&&(_0x3c5d6e['cookieScal'+'e']=new J(_0x3c5d6e['cookieScal'+'e'][-0x4df+-0x23d7*0x1+0x486*0x9],_0x3c5d6e['cookieScal'+'e'][0x220d+0x25b7+0x1*-0x47c3])),_0x3c5d6e['enable']&&(console['warn']('WARNING:\x20e'+'nable:\x20Pro'+'perty\x20is\x20d'+'eprecated.'+'\x20Set\x20enabl'+'ed\x20propert'+'y\x20instead.'),_0x3c5d6e['enabled']=_0x3c5d6e['enable']),_0x3c5d6e['shape']||(_0x3c5d6e['shape']=js);const _0x124bf5=new tl(this['app']['graphicsDe'+'vice'],this['app']['scene']['clusteredL'+'ightingEna'+'bled']);_0x124bf5['type']=zf[_0x3c5d6e['type']],_0x124bf5['_node']=_0x596979['entity'],_0x596979['data']['light']=_0x124bf5,super['initialize'+'ComponentD'+'ata'](_0x596979,_0x3c5d6e,Io);}['_onRemoveC'+'omponent'](_0x8c553e,_0x1cd729){_0x1cd729['onRemove']();}['cloneCompo'+'nent'](_0x4d0ee2,_0x1a2630){const _0x5927bf=_0x4d0ee2['light'],_0x8e7a9a=[];let _0x290943;for(let _0x1ed0de=0xa9*0x17+0x4d*0xb+0x9*-0x20e;_0x1ed0de<Io['length'];_0x1ed0de++)_0x290943=Io[_0x1ed0de],_0x290943!=='light'&&(_0x5927bf[_0x290943]&&_0x5927bf[_0x290943]['clone']?_0x8e7a9a[_0x290943]=_0x5927bf[_0x290943]['clone']():_0x8e7a9a[_0x290943]=_0x5927bf[_0x290943]);return this['addCompone'+'nt'](_0x1a2630,_0x8e7a9a);}['changeType'](_0x30ed59,_0x520f5d,_0x2af3d4){_0x520f5d!==_0x2af3d4&&(_0x30ed59['light']['type']=zf[_0x2af3d4]);}}const GO=['x','y','z','w'],HO=[void(0x1*-0x172e+-0x74*-0x43+0x1*-0x72e),void(-0x433+0x117e+-0xd4b),J,D,re];function Gn(_0x1f7cdb,_0x32e6d0,_0x412f93,_0x32a904){switch(_0x32e6d0['type']){case'boolean':return!!_0x412f93;case'number':if(typeof _0x412f93=='number')return _0x412f93;if(typeof _0x412f93=='string'){const _0x1f2589=parseInt(_0x412f93,0x1e43+-0x73*-0x39+-0x37d4);return isNaN(_0x1f2589)?null:_0x1f2589;}else{if(typeof _0x412f93=='boolean')return-0x111f+0x4*-0x398+0x1f7f+_0x412f93;}return null;case'json':{const _0x231a4c={};if(Array['isArray'](_0x32e6d0['schema'])){(!_0x412f93||typeof _0x412f93!='object')&&(_0x412f93={});for(let _0x9810f7=0x15c3+-0x5*0x9d+-0x2*0x959;_0x9810f7<_0x32e6d0['schema']['length'];_0x9810f7++){const _0x4828a7=_0x32e6d0['schema'][_0x9810f7];if(_0x4828a7['name']){if(_0x4828a7['array']){_0x231a4c[_0x4828a7['name']]=[];const _0x3883d0=Array['isArray'](_0x412f93[_0x4828a7['name']])?_0x412f93[_0x4828a7['name']]:[];for(let _0x4e5dd8=-0x1bd*-0x3+-0x1a7b*-0x1+-0x1fb2;_0x4e5dd8<_0x3883d0['length'];_0x4e5dd8++)_0x231a4c[_0x4828a7['name']]['push'](Gn(_0x1f7cdb,_0x4828a7,_0x3883d0[_0x4e5dd8]));}else{const _0x52d159=_0x412f93['hasOwnProp'+'erty'](_0x4828a7['name'])?_0x412f93[_0x4828a7['name']]:_0x4828a7['default'];_0x231a4c[_0x4828a7['name']]=Gn(_0x1f7cdb,_0x4828a7,_0x52d159);}}}}return _0x231a4c;}case'asset':return _0x412f93 instanceof pe?_0x412f93:typeof _0x412f93=='number'?_0x1f7cdb['assets']['get'](_0x412f93)||null:typeof _0x412f93=='string'&&_0x1f7cdb['assets']['get'](parseInt(_0x412f93,0x616*0x5+-0x8b5*-0x1+-0x2719))||null;case'entity':return _0x412f93 instanceof Ie?_0x412f93:typeof _0x412f93=='string'?_0x1f7cdb['getEntityF'+'romIndex'](_0x412f93):null;case'rgb':case'rgba':if(_0x412f93 instanceof ie)return _0x32a904 instanceof ie?(_0x32a904['copy'](_0x412f93),_0x32a904):_0x412f93['clone']();if(_0x412f93 instanceof Array&&_0x412f93['length']>=-0x619*-0x6+0x259e+-0x4a31&&_0x412f93['length']<=-0xb27*-0x2+0x156a+-0x2*0x15da){for(let _0x5255cc=-0x3*0x7ce+0x1fe2+-0x43c*0x2;_0x5255cc<_0x412f93['length'];_0x5255cc++)if(typeof _0x412f93[_0x5255cc]!='number')return null;return _0x32a904||(_0x32a904=new ie()),_0x32a904['r']=_0x412f93[0x1*-0x1659+-0x1c57+-0x1958*-0x2],_0x32a904['g']=_0x412f93[-0x1*0x1777+-0x22c7+0x1*0x3a3f],_0x32a904['b']=_0x412f93[0x1ff*-0x3+-0x1035*0x1+-0x31*-0x74],_0x32a904['a']=_0x412f93['length']===0x1b4+0x198*-0x15+-0x65b*-0x5?0x215f+-0x2*0x1+-0x215c:_0x412f93[0x2*0xe00+-0x1bfd+0x0],_0x32a904;}else{if(typeof _0x412f93=='string'&&/#(?:[0-9a-f]{2}){3,4}/i['test'](_0x412f93))return _0x32a904||(_0x32a904=new ie()),_0x32a904['fromString'](_0x412f93),_0x32a904;}return null;case'vec2':case'vec3':case'vec4':{const _0x506d5f=parseInt(_0x32e6d0['type']['slice'](0x8e*0x1+-0x8aa*0x3+0x1*0x1973),0x236*0x5+-0x57e+-0x586),_0x1bf448=HO[_0x506d5f];if(_0x412f93 instanceof _0x1bf448)return _0x32a904 instanceof _0x1bf448?(_0x32a904['copy'](_0x412f93),_0x32a904):_0x412f93['clone']();if(_0x412f93 instanceof Array&&_0x412f93['length']===_0x506d5f){for(let _0x3e5b81=-0x1564+-0x9a2+0x1f06;_0x3e5b81<_0x412f93['length'];_0x3e5b81++)if(typeof _0x412f93[_0x3e5b81]!='number')return null;_0x32a904||(_0x32a904=new _0x1bf448());for(let _0x2cf5f1=0x89d+0x9*-0x123+0x3*0x8a;_0x2cf5f1<_0x506d5f;_0x2cf5f1++)_0x32a904[GO[_0x2cf5f1]]=_0x412f93[_0x2cf5f1];return _0x32a904;}return null;}case'curve':if(_0x412f93){let _0x3dcd57;if(_0x412f93 instanceof Xs||_0x412f93 instanceof ta)_0x3dcd57=_0x412f93['clone']();else{const _0x2a4427=_0x412f93['keys'][-0x153c+0x1*0x2119+-0xbdd]instanceof Array?ta:Xs;_0x3dcd57=new _0x2a4427(_0x412f93['keys']),_0x3dcd57['type']=_0x412f93['type'];}return _0x3dcd57;}break;}return _0x412f93;}function Ov(_0x58714b,_0x51ed7c,_0x3690f8,_0x210a93){return _0x51ed7c['array']?_0x3690f8['map']((_0x2f7e0d,_0x58a51a)=>Gn(_0x58714b,_0x51ed7c,_0x2f7e0d,_0x210a93?_0x210a93[_0x58a51a]:null)):Gn(_0x58714b,_0x51ed7c,_0x3690f8,_0x210a93);}function Fv(_0x3dbd42,_0x41f3f9,_0x35171c,_0x2504fb){if(_0x35171c)for(const _0x5818e1 in _0x41f3f9){const _0x45a95a=_0x41f3f9[_0x5818e1],_0x23d285=_0x35171c[_0x5818e1];_0x23d285!==void(-0x16cf*-0x1+-0x6*0xef+-0x1*0x1135)&&(_0x2504fb[_0x5818e1]=Ov(_0x3dbd42,_0x45a95a,_0x23d285,_0x2504fb[_0x5818e1]));}}const fn=class fn{constructor(_0x363ea7){this['scriptType']=_0x363ea7,this['index']={};}['add'](_0x23a3d0,_0x189982){if(this['index'][_0x23a3d0]){w['warn']('attribute\x20'+'\x27'+_0x23a3d0+('\x27\x20is\x20alrea'+'dy\x20defined'+'\x20for\x20scrip'+'t\x20type\x20\x27')+this['scriptType']['name']+'\x27');return;}else{if(fn['reservedNa'+'mes']['has'](_0x23a3d0)){w['warn']('attribute\x20'+'\x27'+_0x23a3d0+('\x27\x20is\x20a\x20res'+'erved\x20attr'+'ibute\x20name'));return;}}this['index'][_0x23a3d0]=_0x189982,Object['defineProp'+'erty'](this['scriptType']['prototype'],_0x23a3d0,{'get':function(){return this['__attribut'+'es'][_0x23a3d0];},'set':function(_0x1838fe){const _0x1e03a8='attr',_0xf54237='attr:'+_0x23a3d0,_0x18cd96=this['__attribut'+'es'][_0x23a3d0];let _0x36c6cd=_0x18cd96;if(_0x18cd96&&_0x189982['type']!=='json'&&_0x189982['type']!=='entity'&&_0x18cd96['clone']&&(this['hasEvent'](_0x1e03a8)||this['hasEvent'](_0xf54237))&&(_0x36c6cd=_0x18cd96['clone']()),_0x189982['array']){if(this['__attribut'+'es'][_0x23a3d0]=[],_0x1838fe){for(let _0x30c107=-0x1083+0x5ea*0x2+0x6d*0xb,_0x109cb7=_0x1838fe['length'];_0x30c107<_0x109cb7;_0x30c107++)this['__attribut'+'es'][_0x23a3d0]['push'](Gn(this['app'],_0x189982,_0x1838fe[_0x30c107],_0x18cd96?_0x18cd96[_0x30c107]:null));}}else this['__attribut'+'es'][_0x23a3d0]=Gn(this['app'],_0x189982,_0x1838fe,_0x18cd96);this['fire'](_0x1e03a8,_0x23a3d0,this['__attribut'+'es'][_0x23a3d0],_0x36c6cd),this['fire'](_0xf54237,this['__attribut'+'es'][_0x23a3d0],_0x36c6cd);}});}['remove'](_0x53474f){return this['index'][_0x53474f]?(delete this['index'][_0x53474f],delete this['scriptType']['prototype'][_0x53474f],!(-0x1483+-0x8*-0x31d+0x4b*-0xf)):!(-0x198+0x3*-0x3c3+0x671*0x2);}['has'](_0x3c9055){return!!this['index'][_0x3c9055];}['get'](_0x2ecaa1){return this['index'][_0x2ecaa1]||null;}};h(fn,'assignAttr'+'ibutesToSc'+'ript',Fv),h(fn,'attributeT'+'oValue',Ov),h(fn,'reservedNa'+'mes',new Set(['app','entity','enabled','_enabled','_enabledOl'+'d','_destroyed','__attribut'+'es','__attribut'+'esRaw','__scriptTy'+'pe','__executio'+'nOrder','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']));let al=fn;const uu='initialize',pu='postInitia'+'lize',WO='update',$O='postUpdate',XO='swap';class ts extends me{constructor(_0x3c07a7){super(),h(this,'app'),h(this,'entity'),h(this,'_enabled'),h(this,'_enabledOl'+'d'),h(this,'_initializ'+'ed'),h(this,'_postIniti'+'alized'),h(this,'__destroye'+'d'),h(this,'__scriptTy'+'pe'),h(this,'__executio'+'nOrder'),this['initScript'](_0x3c07a7);}set['enabled'](_0x261e9d){this['_enabled']=!!_0x261e9d,this['enabled']!==this['_enabledOl'+'d']&&(this['_enabledOl'+'d']=this['enabled'],this['fire'](this['enabled']?'enable':'disable'),this['fire']('state',this['enabled']),!this['_initializ'+'ed']&&this['enabled']&&(this['_initializ'+'ed']=!(-0x10b1+0x54*-0x53+-0x41*-0xad),this['fire']('preInitial'+'ize'),this['initialize']&&this['entity']['script']['_scriptMet'+'hod'](this,uu)),this['_initializ'+'ed']&&!this['_postIniti'+'alized']&&this['enabled']&&!this['entity']['script']['_beingEnab'+'led']&&(this['_postIniti'+'alized']=!(-0x1ab5+0x25c6+-0xb11),this['postInitia'+'lize']&&this['entity']['script']['_scriptMet'+'hod'](this,pu)));}get['enabled'](){return this['_enabled']&&!this['_destroyed']&&this['entity']['script']['enabled']&&this['entity']['enabled'];}['initScript'](_0x4330ce){const _0x2a7a9d=this['constructo'+'r'];w['assert'](_0x4330ce&&_0x4330ce['app']&&_0x4330ce['entity'],'script\x20['+_0x2a7a9d['__name']+(']\x20has\x20miss'+'ing\x20argume'+'nts\x20in\x20con'+'structor')),this['app']=_0x4330ce['app'],this['entity']=_0x4330ce['entity'],this['_enabled']=typeof _0x4330ce['enabled']=='boolean'?_0x4330ce['enabled']:!(0x1*0xe18+0x52f*-0x7+0x1631),this['_enabledOl'+'d']=this['enabled'],this['__destroye'+'d']=!(-0x1*0x20d7+-0x2fe+0x23d6),this['__scriptTy'+'pe']=_0x2a7a9d,this['__executio'+'nOrder']=-(-0x2*0x324+0x23e2+-0x1*0x1d99);}static get['scriptName'](){return this['__name'];}}h(ts,'EVENT_ENAB'+'LE','enable'),h(ts,'EVENT_DISA'+'BLE','disable'),h(ts,'EVENT_STAT'+'E','state'),h(ts,'EVENT_DEST'+'ROY','destroy'),h(ts,'EVENT_ATTR','attr'),h(ts,'EVENT_ERRO'+'R','error'),h(ts,'__name',null),h(ts,'__getScrip'+'tName',Nv);const qO=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s\/]*)\s*/;function Nv(_0x530ba3){if(typeof _0x530ba3!='function')return;if(_0x530ba3['scriptName'])return _0x530ba3['scriptName'];if('name'in Function['prototype'])return _0x530ba3['name'];if(_0x530ba3===Function||_0x530ba3===Function['prototype']['constructo'+'r'])return'Function';const _0x5045d8=(''+_0x530ba3)['match'](qO);return _0x5045d8?_0x5045d8[-0x1dbd*0x1+0x1*-0x1a56+-0xc2*-0x4a]:void(-0x1*-0xbbd+0x9*0x3cd+-0x2df2);}class Lo extends ts{constructor(_0x2dfc70){super(_0x2dfc70),h(this,'__attribut'+'es'),h(this,'__attribut'+'esRaw'),this['initScript'+'Type'](_0x2dfc70);}static get['attributes'](){return this['hasOwnProp'+'erty']('__attribut'+'es')||(this['__attribut'+'es']=new al(this)),this['__attribut'+'es'];}['initScript'](_0x418cd2){ts['prototype']['initScript']['call'](this,_0x418cd2),this['__attribut'+'es']={},this['__attribut'+'esRaw']=_0x418cd2['attributes']||{};}['initScript'+'Type'](_0x2bc30e){this['initScript'](_0x2bc30e);}['__initiali'+'zeAttribut'+'es'](_0x34dccc){if(!(!_0x34dccc&&!this['__attribut'+'esRaw'])){for(const _0x1f02ee in this['__scriptTy'+'pe']['attributes']['index'])this['__attribut'+'esRaw']&&this['__attribut'+'esRaw']['hasOwnProp'+'erty'](_0x1f02ee)?this[_0x1f02ee]=this['__attribut'+'esRaw'][_0x1f02ee]:this['__attribut'+'es']['hasOwnProp'+'erty'](_0x1f02ee)||(this['__scriptTy'+'pe']['attributes']['index'][_0x1f02ee]['hasOwnProp'+'erty']('default')?this[_0x1f02ee]=this['__scriptTy'+'pe']['attributes']['index'][_0x1f02ee]['default']:this[_0x1f02ee]=null);this['__attribut'+'esRaw']=null;}}static['extend'](_0x198117){for(const _0x332132 in _0x198117)_0x198117['hasOwnProp'+'erty'](_0x332132)&&(this['prototype'][_0x332132]=_0x198117[_0x332132]);}}const jO=_0x57d7dc=>_0x57d7dc[-0xc45+-0x1*0x1a7d+0x26c2]['toLowerCas'+'e']()+_0x57d7dc['substring'](-0xfe0+0x2390+-0x13af);class Ii extends we{constructor(_0x1f94ba,_0x336e0a){super(_0x1f94ba,_0x336e0a),h(this,'_attribute'+'DataMap',new Map()),(this['_scripts']=[],this['_updateLis'+'t']=new Bc({'sortBy':'__executio'+'nOrder'}),this['_postUpdat'+'eList']=new Bc({'sortBy':'__executio'+'nOrder'}),this['_scriptsIn'+'dex']={},this['_destroyed'+'Scripts']=[],this['_destroyed']=!(-0x401+-0x16c*-0xf+0x1152*-0x1),this['_scriptsDa'+'ta']=null,this['_oldState']=!(-0x31*-0x3d+-0x26cf+0x97*0x2e),this['_enabled']=!(0x12d*0x17+-0x1b92+0x87),this['_beingEnab'+'led']=!(-0x7*0x41+0x1187+-0xfbf),this['_isLooping'+'ThroughScr'+'ipts']=!(-0xa74+-0x1eaf+0x2924),this['_execution'+'Order']=-(0x1a4b*0x1+0x21d7+0x2dd*-0x15),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this));}set['scripts'](_0x1f911e){this['_scriptsDa'+'ta']=_0x1f911e;for(const _0x2ccc39 in _0x1f911e){if(!_0x1f911e['hasOwnProp'+'erty'](_0x2ccc39))continue;const _0x3c12fc=this['_scriptsIn'+'dex'][_0x2ccc39];if(_0x3c12fc){if(typeof _0x1f911e[_0x2ccc39]['enabled']=='boolean'&&(_0x3c12fc['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x3c12fc);}),_0x3c12fc['enabled']=!!_0x1f911e[_0x2ccc39]['enabled']),typeof _0x1f911e[_0x2ccc39]['attributes']=='object'){for(const _0x3fee26 in _0x1f911e[_0x2ccc39]['attributes'])if(!al['reservedNa'+'mes']['has'](_0x3fee26)){if(!_0x3c12fc['__attribut'+'es']['hasOwnProp'+'erty'](_0x3fee26)){const _0x17dc12=this['system']['app']['scripts']['get'](_0x2ccc39);_0x17dc12&&_0x17dc12['attributes']['add'](_0x3fee26,{});}_0x3c12fc[_0x3fee26]=_0x1f911e[_0x2ccc39]['attributes'][_0x3fee26];}}}else console['log'](this['order']);}}get['scripts'](){return this['_scripts'];}set['enabled'](_0x46a26e){const _0x5d7fb7=this['_enabled'];this['_enabled']=_0x46a26e,this['fire']('set','enabled',_0x5d7fb7,_0x46a26e);}get['enabled'](){return this['_enabled'];}['onEnable'](){this['_beingEnab'+'led']=!(-0x17*0x49+0x8af+-0x220*0x1),this['_checkStat'+'e'](),this['entity']['_beingEnab'+'led']||this['onPostStat'+'eChange'](),this['_beingEnab'+'led']=!(-0x1df6+0x1*-0x1a7e+-0x95*-0x61);}['onDisable'](){this['_checkStat'+'e']();}['onPostStat'+'eChange'](){const _0x317d8f=this['_beginLoop'+'ing']();for(let _0x2589ed=0x1*0x2d+0x3*0x5e+-0x147,_0x3bcee0=this['scripts']['length'];_0x2589ed<_0x3bcee0;_0x2589ed++){const _0x10ae24=this['scripts'][_0x2589ed];_0x10ae24['_initializ'+'ed']&&!_0x10ae24['_postIniti'+'alized']&&_0x10ae24['enabled']&&(_0x10ae24['_postIniti'+'alized']=!(-0x9*0x1be+0x8*-0x4e+0x60a*0x3),_0x10ae24['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x10ae24,pu));}this['_endLoopin'+'g'](_0x317d8f);}['_beginLoop'+'ing'](){const _0xdf8852=this['_isLooping'+'ThroughScr'+'ipts'];return this['_isLooping'+'ThroughScr'+'ipts']=!(0x1*0x116e+0x3*-0xa49+0x1eb*0x7),_0xdf8852;}['_endLoopin'+'g'](_0x13d660){this['_isLooping'+'ThroughScr'+'ipts']=_0x13d660,this['_isLooping'+'ThroughScr'+'ipts']||this['_removeDes'+'troyedScri'+'pts']();}['_onSetEnab'+'led'](_0x1a2ab0,_0x509a91,_0x50b5cc){this['_beingEnab'+'led']=!(-0x22c6+0x1829+0xa9d),this['_checkStat'+'e'](),this['_beingEnab'+'led']=!(0x13ac+-0x14*-0x13d+-0x2c6f);}['_checkStat'+'e'](){const _0x4349d3=this['enabled']&&this['entity']['enabled'];if(_0x4349d3===this['_oldState'])return;this['_oldState']=_0x4349d3,this['fire'](_0x4349d3?'enable':'disable'),this['fire']('state',_0x4349d3),_0x4349d3?this['system']['_addCompon'+'entToEnabl'+'ed'](this):this['system']['_removeCom'+'ponentFrom'+'Enabled'](this);const _0x392e7f=this['_beginLoop'+'ing']();for(let _0x5e9f97=0x1*-0x59a+0xa6e+-0xce*0x6,_0x5fdce8=this['scripts']['length'];_0x5e9f97<_0x5fdce8;_0x5e9f97++){const _0x3d30a1=this['scripts'][_0x5e9f97];_0x3d30a1['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x3d30a1);}),_0x3d30a1['enabled']=_0x3d30a1['_enabled'];}this['_endLoopin'+'g'](_0x392e7f);}['_onBeforeR'+'emove'](){this['fire']('remove');const _0x27e15f=this['_beginLoop'+'ing']();for(let _0x4ca1f9=0xb98+0x22aa+-0x2e42;_0x4ca1f9<this['scripts']['length'];_0x4ca1f9++){const _0x5c7b2=this['scripts'][_0x4ca1f9];_0x5c7b2&&this['destroy'](_0x5c7b2['__scriptTy'+'pe']['__name']);}this['_endLoopin'+'g'](_0x27e15f);}['_removeDes'+'troyedScri'+'pts'](){const _0x4368e2=this['_destroyed'+'Scripts']['length'];if(_0x4368e2){for(let _0x404e96=-0x1708+0x18d1+-0x1*0x1c9;_0x404e96<_0x4368e2;_0x404e96++){const _0x506521=this['_destroyed'+'Scripts'][_0x404e96];this['_removeScr'+'iptInstanc'+'e'](_0x506521);}this['_destroyed'+'Scripts']['length']=-0x14d7+0x1f73+-0x7*0x184,this['_resetExec'+'utionOrder'](0x1105*-0x1+-0x3a*0x9d+0x3497,this['_scripts']['length']);}}['_onInitial'+'izeAttribu'+'tes'](){for(let _0x2c46b9=0x1eb0+-0x3e*0x49+-0xd02,_0x1ea538=this['scripts']['length'];_0x2c46b9<_0x1ea538;_0x2c46b9++){const _0x1ab121=this['scripts'][_0x2c46b9];this['initialize'+'Attributes'](_0x1ab121);}}['initialize'+'Attributes'](_0x20c444){var _0x5e0d49;if(_0x20c444 instanceof Lo)_0x20c444['__initiali'+'zeAttribut'+'es']();else{const _0x5524c7=_0x20c444['__scriptTy'+'pe']['__name'],_0x49fe74=this['_attribute'+'DataMap']['get'](_0x5524c7);if(!_0x49fe74)return;const _0x31ef67=(_0x5e0d49=this['system']['app']['scripts'])==null?void(0x232*-0x3+-0x1777+0x7*0x44b):_0x5e0d49['getSchema'](_0x5524c7);_0x31ef67||w['warnOnce']('No\x20schema\x20'+'exists\x20for'+'\x20the\x20scrip'+'t\x20\x27'+_0x5524c7+('\x27.\x20A\x20schem'+'a\x20must\x20exi'+'st\x20for\x20dat'+'a\x20to\x20be\x20in'+'stantiated'+'\x20on\x20the\x20sc'+'ript.')),Fv(this['system']['app'],_0x31ef67['attributes'],_0x49fe74,_0x20c444);}}['_scriptMet'+'hod'](_0xcbbe15,_0xc0659d,_0x18be0f){try{_0xcbbe15[_0xc0659d](_0x18be0f);}catch(_0x3f588b){_0xcbbe15['enabled']=!(0x171d+-0x19b6+-0x29a*-0x1),_0xcbbe15['hasEvent']('error')||(console['warn']('unhandled\x20'+'exception\x20'+'while\x20call'+'ing\x20\x22'+_0xc0659d+'\x22\x20for\x20\x22'+_0xcbbe15['__scriptTy'+'pe']['__name']+'\x22\x20script:\x20',_0x3f588b),console['error'](_0x3f588b)),_0xcbbe15['fire']('error',_0x3f588b,_0xc0659d),this['fire']('error',_0xcbbe15,_0x3f588b,_0xc0659d);}}['_onInitial'+'ize'](){const _0x2e1f37=this['_scripts'],_0x3e70ea=this['_beginLoop'+'ing']();for(let _0x5a1945=0x1c7f+0x2285+-0x6d*0x94,_0x47a656=_0x2e1f37['length'];_0x5a1945<_0x47a656;_0x5a1945++){const _0x396373=_0x2e1f37[_0x5a1945];!_0x396373['_initializ'+'ed']&&_0x396373['enabled']&&(_0x396373['_initializ'+'ed']=!(0x1852+-0x55*0x11+-0x12ad),_0x396373['initialize']&&this['_scriptMet'+'hod'](_0x396373,uu));}this['_endLoopin'+'g'](_0x3e70ea);}['_onPostIni'+'tialize'](){this['onPostStat'+'eChange']();}['_onUpdate'](_0x4be4b1){const _0x44413f=this['_updateLis'+'t'];if(!_0x44413f['length'])return;const _0x300cba=this['_beginLoop'+'ing']();for(_0x44413f['loopIndex']=0x148f*0x1+0x17*-0x14b+0x92e;_0x44413f['loopIndex']<_0x44413f['length'];_0x44413f['loopIndex']++){const _0x100f96=_0x44413f['items'][_0x44413f['loopIndex']];_0x100f96['enabled']&&this['_scriptMet'+'hod'](_0x100f96,WO,_0x4be4b1);}this['_endLoopin'+'g'](_0x300cba);}['_onPostUpd'+'ate'](_0x53befd){const _0x535e7b=this['_postUpdat'+'eList'];if(!_0x535e7b['length'])return;const _0x23ad90=this['_beginLoop'+'ing']();for(_0x535e7b['loopIndex']=-0xb60+0x1659+-0xaf9;_0x535e7b['loopIndex']<_0x535e7b['length'];_0x535e7b['loopIndex']++){const _0x1e2dd2=_0x535e7b['items'][_0x535e7b['loopIndex']];_0x1e2dd2['enabled']&&this['_scriptMet'+'hod'](_0x1e2dd2,$O,_0x53befd);}this['_endLoopin'+'g'](_0x23ad90);}['_insertScr'+'iptInstanc'+'e'](_0x49c91e,_0xdc057e,_0x3c6e97){_0xdc057e===-(0x26d*0x2+-0x2410+-0x1*-0x1f37)?(this['_scripts']['push'](_0x49c91e),_0x49c91e['__executio'+'nOrder']=_0x3c6e97,_0x49c91e['update']&&this['_updateLis'+'t']['append'](_0x49c91e),_0x49c91e['postUpdate']&&this['_postUpdat'+'eList']['append'](_0x49c91e)):(this['_scripts']['splice'](_0xdc057e,-0x2ff+0x1*-0x1d4d+0x9f*0x34,_0x49c91e),_0x49c91e['__executio'+'nOrder']=_0xdc057e,this['_resetExec'+'utionOrder'](_0xdc057e+(-0x3*0x181+-0x2689+0x2b0d*0x1),_0x3c6e97+(-0x7*-0x466+-0x1ecb+0x1*0x2)),_0x49c91e['update']&&this['_updateLis'+'t']['insert'](_0x49c91e),_0x49c91e['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x49c91e));}['_removeScr'+'iptInstanc'+'e'](_0x4c35bc){const _0x1de747=this['_scripts']['indexOf'](_0x4c35bc);return _0x1de747===-(-0xde*0x2+-0x1da9+0xfb3*0x2)||(this['_scripts']['splice'](_0x1de747,0x7*-0x205+0x4bb*0x1+0x969),_0x4c35bc['update']&&this['_updateLis'+'t']['remove'](_0x4c35bc),_0x4c35bc['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x4c35bc)),_0x1de747;}['_resetExec'+'utionOrder'](_0x37eafb,_0x3f8ec3){for(let _0x3eac24=_0x37eafb;_0x3eac24<_0x3f8ec3;_0x3eac24++)this['_scripts'][_0x3eac24]['__executio'+'nOrder']=_0x3eac24;}['_resolveEn'+'tityScript'+'Attribute'](_0x1e49f8,_0x97948a,_0x3ec8c9,_0x89f82a,_0x539779,_0x387ffe){if(_0x1e49f8['array']){const _0x4aca9e=_0x3ec8c9['length'];if(!_0x4aca9e)return;const _0x1dd525=_0x3ec8c9['slice']();for(let _0x5ea080=-0x86b+0x34+0x837;_0x5ea080<_0x4aca9e;_0x5ea080++){const _0x25875d=_0x1dd525[_0x5ea080]instanceof lt?_0x1dd525[_0x5ea080]['getGuid']():_0x1dd525[_0x5ea080];_0x387ffe[_0x25875d]&&(_0x1dd525[_0x5ea080]=_0x89f82a?_0x387ffe[_0x25875d]['getGuid']():_0x387ffe[_0x25875d]);}_0x539779[_0x97948a]=_0x1dd525;}else{if(_0x3ec8c9 instanceof lt)_0x3ec8c9=_0x3ec8c9['getGuid']();else{if(typeof _0x3ec8c9!='string')return;}_0x387ffe[_0x3ec8c9]&&(_0x539779[_0x97948a]=_0x387ffe[_0x3ec8c9]);}}['has'](_0x2f6e77){if(typeof _0x2f6e77=='string')return!!this['_scriptsIn'+'dex'][_0x2f6e77];if(!_0x2f6e77)return!(-0x13fd+-0x45+0x5b*0x39);const _0x3ac614=_0x2f6e77,_0x168b66=_0x3ac614['__name'],_0x50cab8=this['_scriptsIn'+'dex'][_0x168b66];return(_0x50cab8&&_0x50cab8['instance'])instanceof _0x3ac614;}['get'](_0x363864){if(typeof _0x363864=='string'){const _0x47e6b6=this['_scriptsIn'+'dex'][_0x363864];return _0x47e6b6?_0x47e6b6['instance']:null;}if(!_0x363864)return null;const _0x239d86=_0x363864,_0x4f737c=_0x239d86['__name'],_0x39e000=this['_scriptsIn'+'dex'][_0x4f737c],_0x2aafdd=_0x39e000&&_0x39e000['instance'];return _0x2aafdd instanceof _0x239d86?_0x2aafdd:null;}['create'](_0x2d1180,_0x45787d={}){const _0x531fd1=this;let _0x13b4f1=_0x2d1180,_0x339286=_0x2d1180;if(typeof _0x13b4f1=='string')_0x13b4f1=this['system']['app']['scripts']['get'](_0x13b4f1);else{if(_0x13b4f1){const _0x2a5b40=Nv(_0x13b4f1),_0x1d123b=jO(_0x2a5b40);!(_0x13b4f1['prototype']instanceof Lo)&&!_0x13b4f1['scriptName']&&w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x2a5b40+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x2a5b40+('.scriptNam'+'e\x20=\x20\x22')+_0x1d123b+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.')),_0x13b4f1['__name']??(_0x13b4f1['__name']=_0x13b4f1['scriptName']??_0x1d123b),_0x339286=_0x13b4f1['__name'];}}if(_0x13b4f1){if(!this['_scriptsIn'+'dex'][_0x339286]||!this['_scriptsIn'+'dex'][_0x339286]['instance']){const _0x147f38=new _0x13b4f1({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x45787d['hasOwnProp'+'erty']('enabled')?_0x45787d['enabled']:!(0x3c1*0x6+-0x1661+-0x25),'attributes':_0x45787d['attributes']||{}});_0x45787d['properties']&&typeof _0x45787d['properties']=='object'&&Object['assign'](_0x147f38,_0x45787d['properties']),_0x147f38 instanceof Lo||this['_attribute'+'DataMap']['set'](_0x339286,_0x45787d['attributes']);const _0xd88808=this['_scripts']['length'];let _0xebafa7=-(-0xd*0x233+-0x1def+0x3a87*0x1);return typeof _0x45787d['ind']=='number'&&_0x45787d['ind']!==-(-0x1d1e*0x1+0x1694+0x68b)&&_0xd88808>_0x45787d['ind']&&(_0xebafa7=_0x45787d['ind']),this['_insertScr'+'iptInstanc'+'e'](_0x147f38,_0xebafa7,_0xd88808),this['_scriptsIn'+'dex'][_0x339286]={'instance':_0x147f38,'onSwap':function(){_0x531fd1['swap'](_0x339286);}},this[_0x339286]=_0x147f38,_0x45787d['preloading']||this['initialize'+'Attributes'](_0x147f38),this['fire']('create',_0x339286,_0x147f38),this['fire']('create:'+_0x339286,_0x147f38),this['system']['app']['scripts']['on']('swap:'+_0x339286,this['_scriptsIn'+'dex'][_0x339286]['onSwap']),_0x45787d['preloading']||(_0x147f38['enabled']&&!_0x147f38['_initializ'+'ed']&&(_0x147f38['_initializ'+'ed']=!(0x55b+0x5f*0x49+-0x2072*0x1),_0x147f38['initialize']&&this['_scriptMet'+'hod'](_0x147f38,uu)),_0x147f38['enabled']&&!_0x147f38['_postIniti'+'alized']&&(_0x147f38['_postIniti'+'alized']=!(0x1127+0xcfb*-0x3+-0x15ca*-0x1),_0x147f38['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x147f38,pu))),_0x147f38;}w['warn']('script\x20\x27'+_0x339286+('\x27\x20is\x20alrea'+'dy\x20added\x20t'+'o\x20entity\x20\x27')+this['entity']['name']+'\x27');}else this['_scriptsIn'+'dex'][_0x339286]={'awaiting':!(-0x24ea+-0x6ee+0x8*0x57b),'ind':this['_scripts']['length']},w['warn']('script\x20\x27'+_0x339286+('\x27\x20is\x20not\x20f'+'ound,\x20awai'+'ting\x20it\x20to'+'\x20be\x20added\x20'+'to\x20registr'+'y'));return null;}['destroy'](_0x2c3669){let _0x448100=_0x2c3669,_0x314947=_0x2c3669;typeof _0x314947=='string'?_0x314947=this['system']['app']['scripts']['get'](_0x314947):_0x314947&&(_0x448100=_0x314947['__name']);const _0x57785a=this['_scriptsIn'+'dex'][_0x448100];if(delete this['_scriptsIn'+'dex'][_0x448100],!_0x57785a)return!(-0xd*0xb7+-0x6be*-0x3+0x577*-0x2);this['_attribute'+'DataMap']['delete'](_0x448100);const _0x4202ae=_0x57785a['instance'];if(_0x4202ae&&!_0x4202ae['_destroyed']){if(_0x4202ae['enabled']=!(0x10*-0x1b7+0x2*-0xd55+0x361b),_0x4202ae['_destroyed']=!(-0x1*-0xad+0xb*0x261+-0x1ad8),this['_isLooping'+'ThroughScr'+'ipts'])this['_destroyed'+'Scripts']['push'](_0x4202ae);else{const _0x4eb33e=this['_removeScr'+'iptInstanc'+'e'](_0x4202ae);_0x4eb33e>=-0x3*-0xb39+-0x26b3+0x508&&this['_resetExec'+'utionOrder'](_0x4eb33e,this['_scripts']['length']);}}return this['system']['app']['scripts']['off']('swap:'+_0x448100,_0x57785a['onSwap']),delete this[_0x448100],this['fire']('destroy',_0x448100,_0x4202ae||null),this['fire']('destroy:'+_0x448100,_0x4202ae||null),_0x4202ae&&_0x4202ae['fire']('destroy'),!(0xca0+0x848+-0x14e8);}['swap'](_0x304b5b){let _0x2754e1=_0x304b5b,_0x12ada5=_0x304b5b;typeof _0x12ada5=='string'?_0x12ada5=this['system']['app']['scripts']['get'](_0x12ada5):_0x12ada5&&(_0x2754e1=_0x12ada5['__name']);const _0x3e0c01=this['_scriptsIn'+'dex'][_0x2754e1];if(!_0x3e0c01||!_0x3e0c01['instance'])return!(0x2a1*-0x6+-0x2171+0x1e*0x1a4);const _0x5405b5=_0x3e0c01['instance'],_0x3688f4=this['_scripts']['indexOf'](_0x5405b5),_0x55c158=new _0x12ada5({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x5405b5['enabled'],'attributes':_0x5405b5['__attribut'+'es']});return _0x55c158['swap']?(this['initialize'+'Attributes'](_0x55c158),this['_scripts'][_0x3688f4]=_0x55c158,this['_scriptsIn'+'dex'][_0x2754e1]['instance']=_0x55c158,this[_0x2754e1]=_0x55c158,_0x55c158['__executio'+'nOrder']=_0x3688f4,_0x5405b5['update']&&this['_updateLis'+'t']['remove'](_0x5405b5),_0x5405b5['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x5405b5),_0x55c158['update']&&this['_updateLis'+'t']['insert'](_0x55c158),_0x55c158['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x55c158),this['_scriptMet'+'hod'](_0x55c158,XO,_0x5405b5),this['fire']('swap',_0x2754e1,_0x55c158),this['fire']('swap:'+_0x2754e1,_0x55c158),!(-0x1f0c+-0x25*0x5c+0x2c58*0x1)):!(0xb2+-0xaa9*-0x2+-0x31*0x73);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x1a0dde,_0x292b00){var _0x530ab6,_0x5e798a,_0x571d61;const _0x1d46f7=this['entity']['script'];for(const _0x5bd0eb in _0x1a0dde['_scriptsIn'+'dex']){const _0x297e91=this['system']['app']['scripts']['get'](_0x5bd0eb);if(!_0x297e91)continue;const _0x3f71e2=_0x1a0dde['_scriptsIn'+'dex'][_0x5bd0eb];if(!_0x3f71e2||!_0x3f71e2['instance'])continue;const _0x1eac99=_0x1d46f7[_0x5bd0eb]['__attribut'+'esRaw']??_0x1d46f7['_attribute'+'DataMap']['get'](_0x5bd0eb),_0x21feff=_0x1d46f7[_0x5bd0eb]['__attribut'+'es'];if(!_0x1eac99&&!_0x21feff)continue;const _0x36a95f=!!_0x1eac99,_0x50e2c0=_0x3f71e2['instance']['__attribut'+'es']??_0x1d46f7['_attribute'+'DataMap']['get'](_0x5bd0eb);for(const _0x2422bf in _0x50e2c0){if(!_0x50e2c0[_0x2422bf])continue;const _0x32ec08=((_0x530ab6=_0x297e91['attributes'])==null?void(0x1*-0x1311+-0x1*-0x165f+-0x34e):_0x530ab6['get'](_0x2422bf))??((_0x571d61=(_0x5e798a=this['system']['app']['scripts']['getSchema'](_0x5bd0eb))==null?void(0x1*-0x1f55+0x6b*0x4f+-0x1b0):_0x5e798a['attributes'])==null?void(0x1e18+-0xf*0x18b+0x6f3*-0x1):_0x571d61[_0x2422bf]);if(_0x32ec08){if(_0x32ec08['type']==='entity')this['_resolveEn'+'tityScript'+'Attribute'](_0x32ec08,_0x2422bf,_0x50e2c0[_0x2422bf],_0x36a95f,_0x1eac99||_0x21feff,_0x292b00);else{if(_0x32ec08['type']==='json'&&Array['isArray'](_0x32ec08['schema'])){const _0x305ce3=_0x50e2c0[_0x2422bf],_0x3aad4d=_0x1eac99?_0x1eac99[_0x2422bf]:_0x21feff[_0x2422bf];for(let _0x5630dc=-0xa0+0x1ac2+-0x3*0x8b6;_0x5630dc<_0x32ec08['schema']['length'];_0x5630dc++){const _0x1d4148=_0x32ec08['schema'][_0x5630dc];if(_0x1d4148['type']==='entity'){if(_0x32ec08['array']){for(let _0x585a17=-0x233a+0x811+0x1b29;_0x585a17<_0x305ce3['length'];_0x585a17++)this['_resolveEn'+'tityScript'+'Attribute'](_0x1d4148,_0x1d4148['name'],_0x305ce3[_0x585a17][_0x1d4148['name']],_0x36a95f,_0x3aad4d[_0x585a17],_0x292b00);}else this['_resolveEn'+'tityScript'+'Attribute'](_0x1d4148,_0x1d4148['name'],_0x305ce3[_0x1d4148['name']],_0x36a95f,_0x3aad4d,_0x292b00);}}}}}}}}['move'](_0x1216f3,_0xdc25f9){const _0x4feeed=this['_scripts']['length'];if(_0xdc25f9>=_0x4feeed||_0xdc25f9<0x36f*0x1+-0x1ad2+0x1*0x1763)return!(-0x2*-0x2e7+0xa97+-0x1064);let _0x1ae35a=_0x1216f3,_0x56ca2b=_0x1216f3;typeof _0x56ca2b!='string'?_0x56ca2b=_0x1216f3['__name']:_0x1ae35a=null;const _0x2cea60=this['_scriptsIn'+'dex'][_0x56ca2b];if(!_0x2cea60||!_0x2cea60['instance'])return!(-0x5*0x5ab+-0x312+-0xfb5*-0x2);const _0x2c41e0=_0x2cea60['instance'];if(_0x1ae35a&&!(_0x2c41e0 instanceof _0x1ae35a))return!(-0x1*0x115b+-0x1*-0x40f+0x3*0x46f);const _0xa93753=this['_scripts']['indexOf'](_0x2c41e0);return _0xa93753===-(0xf1*-0x4+0x724*0x5+-0x1fef)||_0xa93753===_0xdc25f9?!(0x2*-0x121+-0x24e8+0x272b):(this['_scripts']['splice'](_0xdc25f9,0xa23+0x53c+-0x313*0x5,this['_scripts']['splice'](_0xa93753,-0x511*-0x4+-0xb1f+0x82*-0x12)[-0x1*0xe5+-0x2*-0x7c7+-0xea9]),this['_resetExec'+'utionOrder'](-0x4*0xf2+0x71*-0x34+-0x3b*-0x74,_0x4feeed),this['_updateLis'+'t']['sort'](),this['_postUpdat'+'eList']['sort'](),this['fire']('move',_0x56ca2b,_0x2c41e0,_0xdc25f9,_0xa93753),this['fire']('move:'+_0x56ca2b,_0x2c41e0,_0xdc25f9,_0xa93753),!(-0x18f2+0x23cd+0x1*-0xadb));}}h(Ii,'EVENT_CREA'+'TE','create'),h(Ii,'EVENT_DEST'+'ROY','destroy'),h(Ii,'EVENT_ENAB'+'LE','enable'),h(Ii,'EVENT_DISA'+'BLE','disable'),h(Ii,'EVENT_REMO'+'VE','remove'),h(Ii,'EVENT_STAT'+'E','state'),h(Ii,'EVENT_MOVE','move'),h(Ii,'EVENT_ERRO'+'R','error');class YO{constructor(){this['enabled']=!(0x829*-0x3+-0x2191*0x1+-0xb9c*-0x5);}}const KO='_onInitial'+'izeAttribu'+'tes',ZO='_onInitial'+'ize',QO='_onPostIni'+'tialize',JO='_onUpdate',eF='_onPostUpd'+'ate';let mc=0xa21*-0x1+0x29*0x3d+0x5c;class tF extends ct{constructor(_0x2e997d){super(_0x2e997d),this['id']='script',this['ComponentT'+'ype']=Ii,this['DataType']=YO,this['_component'+'s']=new Bc({'sortBy':'_execution'+'Order'}),this['_enabledCo'+'mponents']=new Bc({'sortBy':'_execution'+'Order'}),this['preloading']=!(0xc64+-0x5b7+-0x6ad),this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this),this['app']['systems']['on']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['on']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x434b10,_0x1557e2){if(_0x434b10['_execution'+'Order']=mc++,this['_component'+'s']['append'](_0x434b10),mc>Number['MAX_SAFE_I'+'NTEGER']&&this['_resetExec'+'utionOrder'](),_0x434b10['enabled']=_0x1557e2['hasOwnProp'+'erty']('enabled')?!!_0x1557e2['enabled']:!(0xc1e*0x1+-0x1895+0xc77),_0x434b10['enabled']&&_0x434b10['entity']['enabled']&&this['_enabledCo'+'mponents']['append'](_0x434b10),_0x1557e2['hasOwnProp'+'erty']('order')&&_0x1557e2['hasOwnProp'+'erty']('scripts')){_0x434b10['_scriptsDa'+'ta']=_0x1557e2['scripts'];for(let _0x3b67a1=-0xf17*-0x1+0x814*0x4+0xfcd*-0x3;_0x3b67a1<_0x1557e2['order']['length'];_0x3b67a1++)_0x434b10['create'](_0x1557e2['order'][_0x3b67a1],{'enabled':_0x1557e2['scripts'][_0x1557e2['order'][_0x3b67a1]]['enabled'],'attributes':_0x1557e2['scripts'][_0x1557e2['order'][_0x3b67a1]]['attributes'],'preloading':this['preloading']});}}['cloneCompo'+'nent'](_0x4fc231,_0x194265){var _0x527d05;const _0x5b86b3=[],_0x11e9f2={};for(let _0x23ee8a=0x596+-0x1a9b+0x1505;_0x23ee8a<_0x4fc231['script']['_scripts']['length'];_0x23ee8a++){const _0x1595d0=_0x4fc231['script']['_scripts'][_0x23ee8a],_0x2fe6c2=_0x1595d0['__scriptTy'+'pe']['__name'];_0x5b86b3['push'](_0x2fe6c2);const _0x19fd5a=((_0x527d05=_0x4fc231['script']['_attribute'+'DataMap'])==null?void(0xaa2+0x2bd*0x3+0xc1*-0x19):_0x527d05['get'](_0x2fe6c2))||{};for(const _0x5ba5c9 in _0x1595d0['__attribut'+'es'])_0x19fd5a[_0x5ba5c9]=_0x1595d0['__attribut'+'es'][_0x5ba5c9];_0x11e9f2[_0x2fe6c2]={'enabled':_0x1595d0['_enabled'],'attributes':_0x19fd5a};}for(const _0x57d7d3 in _0x4fc231['script']['_scriptsIn'+'dex'])_0x57d7d3['awaiting']&&_0x5b86b3['splice'](_0x57d7d3['ind'],-0xdb9+-0x5*-0x262+0x1cf,_0x57d7d3);const _0x1f135d={'enabled':_0x4fc231['script']['enabled'],'order':_0x5b86b3,'scripts':_0x11e9f2};return this['addCompone'+'nt'](_0x194265,_0x1f135d);}['_resetExec'+'utionOrder'](){mc=-0x1*0x581+-0x2d*0xc9+-0x1*-0x28d6;for(let _0x20f0f1=-0xbf0+-0x147+0xd37,_0xe613ff=this['_component'+'s']['length'];_0x20f0f1<_0xe613ff;_0x20f0f1++)this['_component'+'s']['items'][_0x20f0f1]['_execution'+'Order']=mc++;}['_callCompo'+'nentMethod'](_0x387729,_0x2ae902,_0x1ddbe8){for(_0x387729['loopIndex']=-0x1b94+0x179c+-0x3f8*-0x1;_0x387729['loopIndex']<_0x387729['length'];_0x387729['loopIndex']++)_0x387729['items'][_0x387729['loopIndex']][_0x2ae902](_0x1ddbe8);}['_onInitial'+'ize'](){this['preloading']=!(0x25d3+-0x57*-0x34+-0x377e),this['_callCompo'+'nentMethod'](this['_component'+'s'],KO),this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],ZO);}['_onPostIni'+'tialize'](){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],QO);}['_onUpdate'](_0xb45f97){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],JO,_0xb45f97);}['_onPostUpd'+'ate'](_0xd0f576){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],eF,_0xd0f576);}['_addCompon'+'entToEnabl'+'ed'](_0x4541e2){this['_enabledCo'+'mponents']['insert'](_0x4541e2);}['_removeCom'+'ponentFrom'+'Enabled'](_0x2949ee){this['_enabledCo'+'mponents']['remove'](_0x2949ee);}['_onBeforeR'+'emove'](_0x3015f7,_0x56765e){this['_component'+'s']['items']['indexOf'](_0x56765e)>=-0x2616+-0xef*-0x2+0x2438&&_0x56765e['_onBeforeR'+'emove'](),this['_removeCom'+'ponentFrom'+'Enabled'](_0x56765e),this['_component'+'s']['remove'](_0x56765e);}['destroy'](){super['destroy'](),this['app']['systems']['off']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['off']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}class kv extends we{constructor(_0x4b6694,_0x34f845){super(_0x4b6694,_0x34f845),h(this,'_layers',[Ji]),h(this,'_instance',null),h(this,'_materialT'+'mp',null),h(this,'_highQuali'+'tySH',!(0x1*-0x2183+0x2057*0x1+0x12c)),h(this,'_customAab'+'b',null),h(this,'_assetRefe'+'rence'),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_castShado'+'ws',!(-0x20d6+0x46+0x2091)),(this['_assetRefe'+'rence']=new rl('asset',this,_0x4b6694['app']['assets'],{'add':this['_onGSplatA'+'ssetAdded'],'load':this['_onGSplatA'+'ssetLoad'],'remove':this['_onGSplatA'+'ssetRemove'],'unload':this['_onGSplatA'+'ssetUnload']},this),_0x34f845['on']('remove',this['onRemoveCh'+'ild'],this),_0x34f845['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x34f845['on']('insert',this['onInsertCh'+'ild'],this),_0x34f845['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['customAabb'](_0x106bed){var _0x3e9580,_0x5a2f3f;this['_customAab'+'b']=_0x106bed,(_0x5a2f3f=(_0x3e9580=this['_instance'])==null?void(-0x1*0xda2+-0x28*0x4c+0xcc1*0x2):_0x3e9580['meshInstan'+'ce'])==null||_0x5a2f3f['setCustomA'+'abb'](this['_customAab'+'b']);}get['customAabb'](){return this['_customAab'+'b'];}set['instance'](_0x3c7fd3){if(this['destroyIns'+'tance'](),this['_instance']=_0x3c7fd3,this['_instance']){const _0xb9373a=this['_instance']['meshInstan'+'ce'];_0xb9373a['node']||(_0xb9373a['node']=this['entity']),_0xb9373a['castShadow']=this['_castShado'+'ws'],_0xb9373a['setCustomA'+'abb'](this['_customAab'+'b']),this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['instance'](){return this['_instance'];}set['material'](_0x131758){this['_instance']?this['_instance']['material']=_0x131758:this['_materialT'+'mp']=_0x131758;}get['material'](){var _0x499817;return((_0x499817=this['_instance'])==null?void(0x875*-0x3+0x95c*0x2+0x6a7):_0x499817['material'])??this['_materialT'+'mp']??null;}set['highQualit'+'ySH'](_0x1f51e4){_0x1f51e4!==this['_highQuali'+'tySH']&&(this['_highQuali'+'tySH']=_0x1f51e4,this['_instance']&&this['_instance']['setHighQua'+'litySH'](_0x1f51e4));}get['highQualit'+'ySH'](){return this['_highQuali'+'tySH'];}set['castShadow'+'s'](_0x1f3d4a){var _0x357ac6;if(this['_castShado'+'ws']!==_0x1f3d4a){const _0x3e924=(_0x357ac6=this['instance'])==null?void(-0xf*0x243+-0x867+0x2a54):_0x357ac6['meshInstan'+'ce'];if(_0x3e924){const _0x228d10=this['layers'],_0x564abd=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x1f3d4a)for(let _0x376a2d=-0x487*0x7+-0x26e2+-0xcb*-0x59;_0x376a2d<_0x228d10['length'];_0x376a2d++){const _0x1af575=_0x564abd['layers']['getLayerBy'+'Id'](this['layers'][_0x376a2d]);_0x1af575&&_0x1af575['removeShad'+'owCasters']([_0x3e924]);}if(_0x3e924['castShadow']=_0x1f3d4a,!this['_castShado'+'ws']&&_0x1f3d4a)for(let _0x336dc5=0x6+-0x1761+-0x7c9*-0x3;_0x336dc5<_0x228d10['length'];_0x336dc5++){const _0x1beaca=_0x564abd['layers']['getLayerBy'+'Id'](_0x228d10[_0x336dc5]);_0x1beaca&&_0x1beaca['addShadowC'+'asters']([_0x3e924]);}}this['_castShado'+'ws']=_0x1f3d4a;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['layers'](_0xf83379){this['removeFrom'+'Layers'](),this['_layers']['length']=-0xa3f+-0x1*-0x11b2+-0x773;for(let _0x484e66=-0x8f*0x2f+0x18c1+0x1*0x180;_0x484e66<_0xf83379['length'];_0x484e66++)this['_layers'][_0x484e66]=_0xf83379[_0x484e66];!this['enabled']||!this['entity']['enabled']||this['addToLayer'+'s']();}get['layers'](){return this['_layers'];}set['asset'](_0xb895c4){const _0x25fbbb=_0xb895c4 instanceof pe?_0xb895c4['id']:_0xb895c4;this['_assetRefe'+'rence']['id']!==_0x25fbbb&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onGSplatA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x25fbbb,this['_assetRefe'+'rence']['asset']&&this['_onGSplatA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['destroyIns'+'tance'](){var _0x333d7f;this['_instance']&&(this['removeFrom'+'Layers'](),(_0x333d7f=this['_instance'])==null||_0x333d7f['destroy'](),this['_instance']=null);}['addToLayer'+'s'](){var _0x1c094f,_0xbf6cec;const _0x7b3b5a=(_0x1c094f=this['instance'])==null?void(0x218*0xb+-0x28a+-0x147e):_0x1c094f['meshInstan'+'ce'];if(_0x7b3b5a){const _0x4ac26c=this['system']['app']['scene']['layers'];for(let _0x836250=-0x19e*-0x6+0x1b9a+-0x19*0x17e;_0x836250<this['_layers']['length'];_0x836250++)(_0xbf6cec=_0x4ac26c['getLayerBy'+'Id'](this['_layers'][_0x836250]))==null||_0xbf6cec['addMeshIns'+'tances']([_0x7b3b5a]);}}['removeFrom'+'Layers'](){var _0x4cb53a,_0xdf7f0c;const _0xa92b04=(_0x4cb53a=this['instance'])==null?void(0x6*0x59e+0xab8+-0x4*0xb1b):_0x4cb53a['meshInstan'+'ce'];if(_0xa92b04){const _0x3aea23=this['system']['app']['scene']['layers'];for(let _0x4c1596=-0x2679+0x1*0x5c1+0x20b8;_0x4c1596<this['_layers']['length'];_0x4c1596++)(_0xdf7f0c=_0x3aea23['getLayerBy'+'Id'](this['_layers'][_0x4c1596]))==null||_0xdf7f0c['removeMesh'+'Instances']([_0xa92b04]);}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_instance']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyIns'+'tance'](),this['asset']=null,this['_assetRefe'+'rence']['id']=null,this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x49c771,_0x440db5){this['addToLayer'+'s'](),_0x49c771['off']('add',this['onLayerAdd'+'ed'],this),_0x49c771['off']('remove',this['onLayerRem'+'oved'],this),_0x440db5['on']('add',this['onLayerAdd'+'ed'],this),_0x440db5['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x2d3d7a){this['layers']['indexOf'](_0x2d3d7a['id'])<-0x17ae+-0x2ac+-0x1a5a*-0x1||this['_instance']&&_0x2d3d7a['addMeshIns'+'tances'](this['_instance']['meshInstan'+'ce']);}['onLayerRem'+'oved'](_0x208341){this['layers']['indexOf'](_0x208341['id'])<-0xa2b*-0x1+-0x151*-0x15+-0x25d0||this['_instance']&&_0x208341['removeMesh'+'Instances'](this['_instance']['meshInstan'+'ce']);}['onEnable'](){const _0x5a2163=this['system']['app']['scene'],_0x1da709=_0x5a2163['layers'];this['_evtLayers'+'Changed']=_0x5a2163['on']('set:layers',this['onLayersCh'+'anged'],this),_0x1da709&&(this['_evtLayerA'+'dded']=_0x1da709['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x1da709['on']('remove',this['onLayerRem'+'oved'],this)),this['_instance']?this['addToLayer'+'s']():this['asset']&&this['_onGSplatA'+'ssetAdded']();}['onDisable'](){var _0xeb49b1,_0x1c4767,_0x2aceed;const _0x487725=this['system']['app']['scene']['layers'];(_0xeb49b1=this['_evtLayers'+'Changed'])==null||_0xeb49b1['off'](),this['_evtLayers'+'Changed']=null,_0x487725&&((_0x1c4767=this['_evtLayerA'+'dded'])==null||_0x1c4767['off'](),this['_evtLayerA'+'dded']=null,(_0x2aceed=this['_evtLayerR'+'emoved'])==null||_0x2aceed['off'](),this['_evtLayerR'+'emoved']=null),this['removeFrom'+'Layers']();}['hide'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0x11*-0x9b+-0xb7d+0x133));}['show'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(0x6a1*-0x2+0x1eb8+-0x1e*0x95));}['_onGSplatA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onGSplatA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onGSplatA'+'ssetLoad'](){this['destroyIns'+'tance']();const _0x581bd1=this['_assetRefe'+'rence']['asset'];_0x581bd1&&(this['instance']=_0x581bd1['resource']['createInst'+'ance'](_0x581bd1['resource'],{'material':this['_materialT'+'mp'],'highQualitySH':this['_highQuali'+'tySH']}),this['_materialT'+'mp']=null,this['customAabb']=this['instance']['resource']['aabb']['clone']());}['_onGSplatA'+'ssetUnload'](){this['destroyIns'+'tance']();}['_onGSplatA'+'ssetRemove'](){this['_onGSplatA'+'ssetUnload']();}}class sF{constructor(){this['enabled']=!(-0x373+-0x291*0x8+0x7*0x36d);}}const mu=['enabled'],mo=['castShadow'+'s','material','highQualit'+'ySH','asset','layers'];class iF extends ct{constructor(_0x248a32){super(_0x248a32),this['id']='gsplat',this['ComponentT'+'ype']=kv,this['DataType']=sF,this['schema']=mu,this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x1196c7,_0x1d4623,_0x61777f){_0x1d4623['layers']&&_0x1d4623['layers']['length']&&(_0x1d4623['layers']=_0x1d4623['layers']['slice'](-0x81*-0x25+-0x1*-0x1d23+-0x2fc8));for(let _0x44caf2=-0x827*0x3+0x5*0x382+0x6eb;_0x44caf2<mo['length'];_0x44caf2++)_0x1d4623['hasOwnProp'+'erty'](mo[_0x44caf2])&&(_0x1196c7[mo[_0x44caf2]]=_0x1d4623[mo[_0x44caf2]]);_0x1d4623['aabbCenter']&&_0x1d4623['aabbHalfEx'+'tents']&&(_0x1196c7['customAabb']=new De(new D(_0x1d4623['aabbCenter']),new D(_0x1d4623['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x1196c7,_0x1d4623,mu);}['cloneCompo'+'nent'](_0x44ad22,_0x59cf8a){const _0x3736de=_0x44ad22['gsplat'],_0x5f0e69={};mo['forEach'](_0x142b8d=>{_0x142b8d==='material'?_0x5f0e69[_0x142b8d]=_0x3736de[_0x142b8d]['clone']():_0x5f0e69[_0x142b8d]=_0x3736de[_0x142b8d];}),_0x5f0e69['enabled']=_0x3736de['enabled'];const _0x548f94=this['addCompone'+'nt'](_0x59cf8a,_0x5f0e69);return _0x3736de['customAabb']&&(_0x548f94['customAabb']=_0x3736de['customAabb']['clone']()),_0x548f94;}['onRemove'](_0x925791,_0x2394fd){_0x2394fd['onRemove']();}}we['_buildAcce'+'ssors'](kv['prototype'],mu);class Zp extends me{constructor(){super(...arguments),h(this,'_meshes',null);}set['meshes'](_0x38c538){this['decRefMesh'+'es'](),this['_meshes']=_0x38c538,this['incRefMesh'+'es'](),this['fire']('set:meshes',_0x38c538);}get['meshes'](){return this['_meshes'];}['destroy'](){this['meshes']=null;}['decRefMesh'+'es'](){var _0x28d750;(_0x28d750=this['_meshes'])==null||_0x28d750['forEach']((_0x289ccc,_0xff4ddc)=>{_0x289ccc&&(_0x289ccc['decRefCoun'+'t'](),_0x289ccc['refCount']<0x4*-0xd+-0x1cfa*0x1+-0x1d2f*-0x1&&(_0x289ccc['destroy'](),this['_meshes'][_0xff4ddc]=null));});}['incRefMesh'+'es'](){var _0x1140c4;(_0x1140c4=this['_meshes'])==null||_0x1140c4['forEach'](_0x24383f=>{_0x24383f==null||_0x24383f['incRefCoun'+'t']();});}}h(Zp,'EVENT_SETM'+'ESHES','set:meshes');function Oc(_0x14045d){const _0x594143=this;if(!_0x594143['resource'])return;const _0x1a59af=_0x14045d['resource'],_0x332bce=_0x1a59af['renders']&&_0x1a59af['renders'][_0x594143['data']['renderInde'+'x']];_0x332bce&&(_0x594143['resource']['meshes']=_0x332bce['resource']['meshes']);}function Bg(_0x51d573){const _0x100e13=this;_0x100e13['registry']['off']('load:'+_0x51d573['id'],Oc,_0x100e13),_0x100e13['registry']['on']('load:'+_0x51d573['id'],Oc,_0x100e13),_0x100e13['registry']['off']('remove:'+_0x51d573['id'],zg,_0x100e13),_0x100e13['registry']['once']('remove:'+_0x51d573['id'],zg,_0x100e13),_0x51d573['resource']?Oc['call'](_0x100e13,_0x51d573):_0x100e13['registry']['load'](_0x51d573);}function zg(_0x525c3b){const _0x5189eb=this;_0x5189eb['registry']['off']('load:'+_0x525c3b['id'],Oc,_0x5189eb),_0x5189eb['resource']&&_0x5189eb['resource']['destroy']();}class rF extends Qe{constructor(_0x53a913){super(_0x53a913,'render'),this['_registry']=_0x53a913['assets'];}['open'](_0x23f65d,_0x254d2f){return new Zp();}['patch'](_0x379276,_0xc182a9){if(!_0x379276['data']['containerA'+'sset'])return;const _0x2909cc=_0xc182a9['get'](_0x379276['data']['containerA'+'sset']);if(!_0x2909cc){_0xc182a9['once']('add:'+_0x379276['data']['containerA'+'sset'],Bg,_0x379276);return;}Bg['call'](_0x379276,_0x2909cc);}}class Uv{constructor(_0x20294d,_0x238004,_0x5471c3,_0x2d6484){this['_paths']=_0x20294d,this['_input']=_0x238004,this['_output']=_0x5471c3,this['_interpola'+'tion']=_0x2d6484;}get['paths'](){return this['_paths'];}get['input'](){return this['_input'];}get['output'](){return this['_output'];}get['interpolat'+'ion'](){return this['_interpola'+'tion'];}}class uh{constructor(_0x54c54f,_0x21416e){this['_component'+'s']=_0x54c54f,this['_data']=_0x21416e;}get['components'](){return this['_component'+'s'];}get['data'](){return this['_data'];}}function aF(_0xe1414c,_0x3bbddd){let _0x5a8041;const _0x41b391=(_0x65f02c,_0x3c8d52)=>{switch(_0x3c8d52){case _0x5a8041['DT_INT8']:return new Int8Array(_0x65f02c['buffer'],_0x65f02c['byteOffset'],_0x65f02c['byteLength']);case _0x5a8041['DT_INT16']:return new Int16Array(_0x65f02c['buffer'],_0x65f02c['byteOffset'],_0x65f02c['byteLength']/(0x5*-0x67e+-0x61*0x6+0x22be));case _0x5a8041['DT_INT32']:return new Int32Array(_0x65f02c['buffer'],_0x65f02c['byteOffset'],_0x65f02c['byteLength']/(0x553*-0x5+0x169c+0x407));case _0x5a8041['DT_UINT8']:return new Uint8Array(_0x65f02c['buffer'],_0x65f02c['byteOffset'],_0x65f02c['byteLength']);case _0x5a8041['DT_UINT16']:return new Uint16Array(_0x65f02c['buffer'],_0x65f02c['byteOffset'],_0x65f02c['byteLength']/(0x13e9+0x18a*0xb+-0x15*0x1c1));case _0x5a8041['DT_UINT32']:return new Uint32Array(_0x65f02c['buffer'],_0x65f02c['byteOffset'],_0x65f02c['byteLength']/(-0x16aa+0x3*-0xb41+0x3871*0x1));case _0x5a8041['DT_FLOAT32']:return new Float32Array(_0x65f02c['buffer'],_0x65f02c['byteOffset'],_0x65f02c['byteLength']/(0x1*-0x2349+0x2701+-0x3b4));}return null;},_0x35d4e9=_0x2e4b1d=>{switch(_0x2e4b1d){case _0x5a8041['DT_INT8']:return-0x3*-0x56a+-0xbc3*0x1+-0x47a;case _0x5a8041['DT_INT16']:return-0x150e+-0x176c*-0x1+0x4*-0x97;case _0x5a8041['DT_INT32']:return-0x1*-0x13ab+0x22ee+-0x3695;case _0x5a8041['DT_UINT8']:return-0x96a+-0x2026+-0x3*-0xddb;case _0x5a8041['DT_UINT16']:return 0x1*-0x16e5+-0xa55+0x213c;case _0x5a8041['DT_UINT32']:return-0x1*0x1da+-0x8bd*-0x1+0x6df*-0x1;case _0x5a8041['DT_FLOAT32']:return 0x61f+-0x2616+0xaa9*0x3;}return 0x12*-0xb3+0x1*-0x27b+-0x1*-0xf12;},_0x417ef1=_0xbf513d=>_0xbf513d['num_compon'+'ents']()*_0x35d4e9(_0xbf513d['data_type']()),_0x303a30={0x0:0x0,0x1:0x1,0x5:0x2,0x2:0x3,0x7:0x4,0x8:0x5,0x4:0x6,0x3:0x7},_0x78f48b=(_0x4cab44,_0x30760d)=>{const _0x457b34=(_0x2b7e16,_0xba9f4f,_0x340471)=>{_0x2b7e16[0x538*0x6+-0x2*0x95+0x1c6*-0x11]=_0xba9f4f[-0xb06*0x3+0x822*0x1+0x18f0]-_0x340471[-0x1123+-0x1453+0x2576],_0x2b7e16[0xde5+-0x7*-0x329+-0x2403]=_0xba9f4f[0x167*0xd+0x54e+-0x1788]-_0x340471[-0xb2d*-0x3+0xabd+-0x2c43],_0x2b7e16[0xd65+0x13*0x25+-0x1022]=_0xba9f4f[0x3*-0x101+0x176f+-0x86*0x27]-_0x340471[-0x2*-0x1175+0x18c+-0x2474];},_0x379288=(_0x44abb8,_0x324566,_0x34dc94)=>{_0x44abb8[0x159d*-0x1+0x186d*0x1+-0x2d*0x10]=_0x324566[-0x35*0xb3+0x6af*0x4+0x295*0x4]*_0x34dc94[0x1e1e+-0xf85+0x3*-0x4dd]-_0x34dc94[0x95*-0x3c+-0x5*-0x765+-0x20c]*_0x324566[0x1d2e+0x59*-0x5d+0x329*0x1],_0x44abb8[0x1e79+0x918+-0x2*0x13c8]=_0x324566[-0x2fb+0x514+-0x217]*_0x34dc94[-0x1*-0xf45+-0xa*0x287+0xa01]-_0x34dc94[0x2*-0x1100+-0x65*-0x53+0x143]*_0x324566[-0x165+-0x2*-0x926+-0x10e7],_0x44abb8[-0x135*-0x17+-0x24b2+0x15*0x6d]=_0x324566[0x1af2+0x1*-0x21c9+-0x67*-0x11]*_0x34dc94[-0x101*0x2+-0x1a3*0x11+0x1dd6]-_0x34dc94[0xac7*-0x1+-0x1ee9+0xe8*0x2e]*_0x324566[0x1*-0x204b+-0x1a96+0x1d71*0x2];},_0x522561=(_0x16a130,_0x235136)=>{const _0x22aaf9=_0x16a130[_0x235136+(-0x13b2+-0xce8*-0x1+0x6ca)],_0x3403e6=_0x16a130[_0x235136+(0x1185+-0x1f*-0x128+0xaac*-0x5)],_0x2586c3=_0x16a130[_0x235136+(-0x12c5+0x1462+-0x19b)],_0x4e2654=(0x4*-0x972+-0x7bc*0x1+-0x1*-0x2d85)/Math['sqrt'](_0x22aaf9*_0x22aaf9+_0x3403e6*_0x3403e6+_0x2586c3*_0x2586c3);_0x16a130[_0x235136+(-0x249a+-0x204+0x134f*0x2)]*=_0x4e2654,_0x16a130[_0x235136+(-0x1*-0x11ef+0x1*0x263f+0xc5*-0x49)]*=_0x4e2654,_0x16a130[_0x235136+(0x12ab+0x13f*-0xb+-0x4f4)]*=_0x4e2654;},_0x2bc6e8=(_0x4ad732,_0x3d9ba9,_0x3b824c)=>{for(let _0x3d23bb=0x27d+0x1bc6+-0x1e43;_0x3d23bb<0x258a+0x1*0x2293+-0x481a;++_0x3d23bb)_0x4ad732[_0x3d23bb]=_0x3d9ba9[_0x3b824c+_0x3d23bb];},_0x436528=_0x30760d['length']/(-0x733*-0x1+-0x142c+0x22a*0x6),_0x350f44=_0x4cab44['length']/(-0x1fb3+-0x960+0x2916),_0x6499b4=new Float32Array(_0x4cab44['length']),_0x4333a0=[0x52f*0x5+-0xd18+-0x1*0xcd3,0x1527+-0x2349+0xe22,0x1*-0xf3+-0x574+0x667],_0x5e8da9=[0x9*-0x17f+-0xb4b*0x3+0x17ac*0x2,-0x2522+0x26f9*0x1+-0x1d7,-0x1d9*-0xa+-0xceb*0x3+0x1447],_0x401187=[0x43*-0x6b+-0x1*-0x1931+0x2*0x168,0x1f1*0x7+0x1e1+-0xf78,0x15c5+-0x3*0xa47+0x8*0x122],_0x48bc37=[-0xe0a+0x192*0x12+0xe3a*-0x1,-0x190a+0x26fe+-0xdf4,0x7*-0x293+-0x103f*0x1+-0x2244*-0x1],_0x4eec60=[-0x737*-0x1+-0x1df*-0x1+-0x916,0x1*-0x1a65+0x1*-0x499+-0x1efe*-0x1,0x162*0x1+0xf2b+-0xdf*0x13],_0x2c95fb=[0x1*0x26b+-0xd15+0xaaa,-0x19b7+-0x1306+0x2cbd,-0x1*0x17b2+-0x1e6e+0x3620];for(let _0x55435a=-0x37*0x3e+0x6b9+0x699;_0x55435a<_0x436528;++_0x55435a){const _0x2444a9=_0x30760d[_0x55435a*(-0x10b+-0x23f3+-0x1*-0x2501)+(-0xb3e+-0x1083+0x3f7*0x7)]*(0x18a*-0x1+0xdf0+0x15*-0x97),_0x134420=_0x30760d[_0x55435a*(-0x1ab7*-0x1+-0x19*0x175+0x9b9)+(-0x270d+0x1*0x19c2+0x1*0xd4c)]*(0x21f9+-0x2*-0x2c0+-0x13bb*0x2),_0x2bdeb0=_0x30760d[_0x55435a*(-0x9b4+0x1908+-0xf51)+(-0x17f+0xd*0x1bc+-0x150b)]*(0x119+-0x4d*0x3a+-0xc*-0x15d);_0x2bc6e8(_0x4333a0,_0x4cab44,_0x2444a9),_0x2bc6e8(_0x5e8da9,_0x4cab44,_0x134420),_0x2bc6e8(_0x401187,_0x4cab44,_0x2bdeb0),_0x457b34(_0x48bc37,_0x5e8da9,_0x4333a0),_0x457b34(_0x4eec60,_0x401187,_0x4333a0),_0x379288(_0x2c95fb,_0x48bc37,_0x4eec60),_0x522561(_0x2c95fb,0x1db0+-0xed*-0x6+-0x1*0x233e);for(let _0x38f18e=-0x1*0x1085+-0x1*0x6bb+0x1740;_0x38f18e<0x1c91+-0x1846+-0x448;++_0x38f18e)_0x6499b4[_0x2444a9+_0x38f18e]+=_0x2c95fb[_0x38f18e],_0x6499b4[_0x134420+_0x38f18e]+=_0x2c95fb[_0x38f18e],_0x6499b4[_0x2bdeb0+_0x38f18e]+=_0x2c95fb[_0x38f18e];}for(let _0x171e51=0x19a8+-0xa+-0x199e;_0x171e51<_0x350f44;++_0x171e51)_0x522561(_0x6499b4,_0x171e51*(0xd*0x2cb+0x13af+0x3*-0x12a9));return new Uint8Array(_0x6499b4['buffer']);},_0x582cbf=_0x4784ec=>{const _0x32b64e={},_0x2baac4=new _0x5a8041['DecoderBuf'+'fer']();_0x2baac4['Init'](_0x4784ec,_0x4784ec['length']);const _0x2cf48a=new _0x5a8041['Decoder']();if(_0x2cf48a['GetEncoded'+'GeometryTy'+'pe'](_0x2baac4)!==_0x5a8041['TRIANGULAR'+'_MESH'])return _0x32b64e['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20mesh:\x20n'+'ot\x20a\x20mesh',_0x32b64e;const _0x559f9d=new _0x5a8041['Mesh'](),_0x1984f7=_0x2cf48a['DecodeBuff'+'erToMesh'](_0x2baac4,_0x559f9d);if(!_0x1984f7||!_0x1984f7['ok']()||_0x5a8041['getPointer'](_0x559f9d)===-0x6f*0x3b+0x12a7+0x6ee)return _0x32b64e['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20asset',_0x32b64e;const _0xdade4e=_0x559f9d['num_faces']()*(0x2ba+0x17a5+-0x1a5c),_0x2c62ae=_0x559f9d['num_points']()<=-0x1f1b8+0x2203*0xa+0x19d99,_0x27d725=_0xdade4e*(_0x2c62ae?0x5*0x335+-0x2411+0x140a:-0x8*0x1fc+0x24d7*0x1+0x14f3*-0x1),_0x536153=_0x5a8041['_malloc'](_0x27d725);_0x2c62ae?(_0x2cf48a['GetTriangl'+'esUInt16Ar'+'ray'](_0x559f9d,_0x27d725,_0x536153),_0x32b64e['indices']=new Uint16Array(_0x5a8041['HEAPU16']['buffer'],_0x536153,_0xdade4e)['slice']()['buffer']):(_0x2cf48a['GetTriangl'+'esUInt32Ar'+'ray'](_0x559f9d,_0x27d725,_0x536153),_0x32b64e['indices']=new Uint32Array(_0x5a8041['HEAPU32']['buffer'],_0x536153,_0xdade4e)['slice']()['buffer']),_0x5a8041['_free'](_0x536153);const _0x488021=[];for(let _0xd7b740=0x1e9d*0x1+0xcc1+0x15af*-0x2;_0xd7b740<_0x559f9d['num_attrib'+'utes']();++_0xd7b740)_0x488021['push'](_0x2cf48a['GetAttribu'+'te'](_0x559f9d,_0xd7b740));_0x488021['sort']((_0x3040d9,_0x2ff9e2)=>(_0x303a30[_0x3040d9['attribute_'+'type']()]??_0x303a30['length'])-(_0x303a30[_0x2ff9e2['attribute_'+'type']()]??_0x303a30['length'])),_0x32b64e['attributes']=_0x488021['map'](_0x4b4a11=>_0x4b4a11['unique_id']());let _0x4d646f=0x1*-0x7ee+0xcf2*0x1+0x4*-0x141;const _0x5d855b=_0x488021['map'](_0x4abf91=>{const _0x25ed60=_0x4d646f;return _0x4d646f+=Math['ceil'](_0x417ef1(_0x4abf91)/(-0x1*0x25bd+0x761+0x1e60))*(0x1*-0xc13+-0x2f*-0x23+-0x19*-0x3a),_0x25ed60;}),_0x318ea6=_0x488021['some'](_0x4de7a6=>_0x4de7a6['attribute_'+'type']()===-0x7*-0x11d+0x75e+-0xf28),_0xf12367=_0x5d855b[-0xed+-0x1*0x1fba+0x20a8];if(!_0x318ea6){for(let _0x1d47d5=-0x1*-0x1c09+0x2d9+-0x1ee1;_0x1d47d5<_0x5d855b['length'];++_0x1d47d5)_0x5d855b[_0x1d47d5]+=0x44*0x3+-0x18ff*-0x1+-0x19bf;_0x4d646f+=-0xa3b+0x2181*0x1+-0x173a;}_0x32b64e['vertices']=new ArrayBuffer(_0x559f9d['num_points']()*_0x4d646f);const _0x239c40=new Uint8Array(_0x32b64e['vertices']);for(let _0x385689=-0x25e+0x12d*-0x7+0xa99*0x1;_0x385689<_0x559f9d['num_attrib'+'utes']();++_0x385689){const _0x275cbb=_0x488021[_0x385689],_0x2861a9=_0x417ef1(_0x275cbb),_0x1271b4=_0x559f9d['num_points']()*_0x2861a9,_0x18d654=_0x5a8041['_malloc'](_0x1271b4);_0x2cf48a['GetAttribu'+'teDataArra'+'yForAllPoi'+'nts'](_0x559f9d,_0x275cbb,_0x275cbb['data_type'](),_0x1271b4,_0x18d654);const _0x50900e=new Uint8Array(_0x5a8041['HEAPU8']['buffer'],_0x18d654,_0x1271b4);for(let _0x21efe4=0x12af+0x12ea+-0x2599;_0x21efe4<_0x559f9d['num_points']();++_0x21efe4)for(let _0x213010=0x1*0x2113+0x8c5+-0x29d8;_0x213010<_0x2861a9;++_0x213010)_0x239c40[_0x21efe4*_0x4d646f+_0x5d855b[_0x385689]+_0x213010]=_0x50900e[_0x21efe4*_0x2861a9+_0x213010];if(!_0x318ea6&&_0x275cbb['attribute_'+'type']()===-0xb34+0x20db*0x1+-0x15a7){const _0x13f744=_0x78f48b(_0x41b391(_0x50900e,_0x275cbb['data_type']()),_0x2c62ae?new Uint16Array(_0x32b64e['indices']):new Uint32Array(_0x32b64e['indices']));for(let _0x4bff49=0xe9e+-0x215a+-0x4*-0x4af;_0x4bff49<_0x559f9d['num_points']();++_0x4bff49)for(let _0x227aa8=0x1859+-0x2225+0x9cc;_0x227aa8<-0x1727+-0x3*-0x12a+0x13b5;++_0x227aa8)_0x239c40[_0x4bff49*_0x4d646f+_0xf12367+_0x227aa8]=_0x13f744[_0x4bff49*(-0x43b*-0x7+0xad0+-0x2861)+_0x227aa8];}_0x5a8041['_free'](_0x18d654);}return _0x5a8041['destroy'](_0x559f9d),_0x5a8041['destroy'](_0x2cf48a),_0x5a8041['destroy'](_0x2baac4),_0x32b64e;},_0x5057a2=_0x21fe52=>{const _0x25f235=_0x582cbf(new Uint8Array(_0x21fe52['buffer']));self['postMessag'+'e']({'jobId':_0x21fe52['jobId'],'error':_0x25f235['error'],'indices':_0x25f235['indices'],'vertices':_0x25f235['vertices'],'attributes':_0x25f235['attributes']},[_0x25f235['indices'],_0x25f235['vertices']]['filter'](_0x4c6762=>_0x4c6762!=null));},_0x249b1a=[];self['onmessage']=_0x3cf120=>{const _0x22684a=_0x3cf120['data'];switch(_0x22684a['type']){case'init':self['DracoDecod'+'erModule']({'instantiateWasm':(_0x59d54c,_0x48d3a4)=>(WebAssembly['instantiat'+'e'](_0x22684a['module'],_0x59d54c)['then'](_0x4ccf66=>_0x48d3a4(_0x4ccf66))['catch'](_0x168368=>console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x168368)),{})})['then'](_0x4f0c0a=>{_0x5a8041=_0x4f0c0a,_0x249b1a['forEach'](_0x1baab1=>_0x5057a2(_0x1baab1));});break;case'decodeMesh':_0x5a8041?_0x5057a2(_0x22684a):_0x249b1a['push'](_0x22684a);break;}};}const Vg=0x265c+0x38*-0x43+-0x1*0x17b1;class nF{constructor(){this['workers']=[[],[],[]],this['jobId']=0x9*0x2d9+0x5*0x64b+-0x3918,this['jobQueue']=[],this['jobCallbac'+'ks']=new Map(),this['run']=(_0x5cb9d6,_0x30c563)=>{_0x5cb9d6['postMessag'+'e']({'type':'decodeMesh','jobId':_0x30c563['jobId'],'buffer':_0x30c563['buffer']},[_0x30c563['buffer']]);};}['init'](_0x1868cf){for(_0x1868cf['forEach'](_0x5b3519=>{_0x5b3519['addEventLi'+'stener']('message',_0x20666a=>{const _0x672091=_0x20666a['data'],_0x4869f0=this['jobCallbac'+'ks']['get'](_0x672091['jobId']);if(_0x4869f0&&_0x4869f0(_0x672091['error'],{'indices':_0x672091['indices'],'vertices':_0x672091['vertices'],'attributes':_0x672091['attributes']}),this['jobCallbac'+'ks']['delete'](_0x672091['jobId']),this['jobQueue']['length']>-0x1*0x17e9+0x21c1+-0x9d8){const _0x17a65d=this['jobQueue']['shift']();this['run'](_0x5b3519,_0x17a65d);}else{const _0x214df3=this['workers'][-0xc2e+0x1*-0x1621+0x2251]['indexOf'](_0x5b3519);if(_0x214df3!==-(-0x981+-0x1d3*0xb+0x1*0x1d93))this['workers'][0x107*-0xe+-0x15b7+0x241b]['splice'](_0x214df3,-0x9ce*0x1+0x92*-0x2e+0x240b),this['workers'][-0x7c2*0x4+-0x48b*-0x1+-0xd3f*-0x2]['push'](_0x5b3519);else{const _0x1bf5f8=this['workers'][-0x2252+-0x115d+0x33b0]['indexOf'](_0x5b3519);_0x1bf5f8!==-(0x2235+-0x112*0x14+-0xccc)?(this['workers'][-0x5*-0x1ed+0x5*0x17f+-0x111b]['splice'](_0x1bf5f8,-0xa52+-0x18df*0x1+-0x385*-0xa),this['workers'][-0x4*-0x36d+-0x2201+0x144d*0x1]['push'](_0x5b3519)):w['error']('logical\x20er'+'ror');}}});}),this['workers'][0x303*-0x5+0x228b+-0x137c]=_0x1868cf;this['jobQueue']['length']&&(this['workers'][-0x3*-0x9c3+-0x283*-0x8+0x1*-0x3161]['length']||this['workers'][-0x2406+-0x6*-0x50e+0x5b3*0x1]['length']);){const _0x34d61a=this['jobQueue']['shift']();if(this['workers'][0x24b9*-0x1+-0x172+0x262b]['length']>-0xa25*0x2+0x10e2+-0x1b4*-0x2){const _0x9dbd9d=this['workers'][-0x2*0xa90+-0x1*-0x11b4+-0xdb*-0x4]['shift']();this['workers'][-0x1e7+0x2399*0x1+0x6bd*-0x5]['push'](_0x9dbd9d),this['run'](_0x9dbd9d,_0x34d61a);}else{const _0x4cb36f=this['workers'][-0x1ac6+-0x5d9*0x3+-0x3d*-0xba]['shift']();this['workers'][0x88*-0x11+0xf72+0x29*-0x28]['push'](_0x4cb36f),this['run'](_0x4cb36f,_0x34d61a);}}}['enqueueJob'](_0x4ebfb2,_0x462628){const _0x410c13={'jobId':this['jobId']++,'buffer':_0x4ebfb2};if(this['jobCallbac'+'ks']['set'](_0x410c13['jobId'],_0x462628),this['workers'][0x17*0x5+0x1fdb+-0x33b*0xa]['length']>0x16df+-0xa1d+-0x2e*0x47){const _0x5e6a87=this['workers'][-0x5b6+0x60*0x49+0x5e*-0x3b]['shift']();this['workers'][-0x26bd+-0x19a+0x142c*0x2]['push'](_0x5e6a87),this['run'](_0x5e6a87,_0x410c13);}else{if(this['workers'][-0x2480+-0x2*-0xefa+-0x1*-0x68d]['length']>-0x1a6*0xc+-0x98e*0x2+0x26e4){const _0x1dbf4d=this['workers'][0x98+0x1419+-0x14b0]['shift']();this['workers'][0x8*-0x6d+-0x280+-0x5ea*-0x1]['push'](_0x1dbf4d),this['run'](_0x1dbf4d,_0x410c13);}else this['jobQueue']['push'](_0x410c13);}}}const oF=_0x393271=>new Promise((_0x46d724,_0x34d878)=>{const _0x1b82a9={'cache':!(-0x684+-0x1*0x6a7+0xd2b),'responseType':'text','retry':Vg>0x6fa+-0x220f*-0x1+-0x2909,'maxRetries':Vg};ot['get'](_0x393271,_0x1b82a9,(_0x22fa9b,_0x25f50c)=>{_0x22fa9b?_0x34d878(_0x22fa9b):_0x46d724(_0x25f50c);});}),lF=_0x498b01=>{const _0x571a53=()=>fetch(_0x498b01)['then'](_0x117f60=>_0x117f60['arrayBuffe'+'r']())['then'](_0x3ee33a=>WebAssembly['compile'](_0x3ee33a)),_0x4a3809=()=>WebAssembly['compileStr'+'eaming'](fetch(_0x498b01))['catch'](_0x417b47=>(w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x498b01+'\x20('+_0x417b47+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x571a53()));return WebAssembly['compileStr'+'eaming']?_0x4a3809():_0x571a53();},Gg=-0x361*-0x7+0xb3a+-0x5d0*0x6;let Fc;const cF=_0x341203=>{if(Fc)return!(-0x1*0x172+0xa*-0x87+0x6b8);if(!_0x341203){const _0x27dcff=uS['getConfig']('DracoDecod'+'erModule');_0x27dcff?_0x341203={'jsUrl':_0x27dcff['glueUrl'],'wasmUrl':_0x27dcff['wasmUrl'],'numWorkers':_0x27dcff['numWorkers']}:_0x341203={'jsUrl':'draco.wasm'+'.js','wasmUrl':'draco.wasm'+'.wasm','numWorkers':Gg};}return!_0x341203['jsUrl']||!_0x341203['wasmUrl']?!(0x807*0x1+-0x71d+-0xe9*0x1):(Fc=new nF(),Promise['all']([oF(_0x341203['jsUrl']),lF(_0x341203['wasmUrl'])])['then'](([_0x3825e0,_0x2b25c0])=>{const _0x446895=['/*\x20draco\x20*'+'/',_0x3825e0,'/*\x20worker\x20'+'*/','(\x0a'+aF['toString']()+'\x0a)()\x0a\x0a']['join']('\x0a'),_0x5e6785=new Blob([_0x446895],{'type':'applicatio'+'n/javascri'+'pt'}),_0x193b42=URL['createObje'+'ctURL'](_0x5e6785),_0x2fa420=Math['max'](-0x231b+-0x122b*0x1+0x3547,Math['min'](-0x152+0x2c5*-0xd+0x2563*0x1,_0x341203['numWorkers']||Gg)),_0x36b3bd=[];for(let _0x27dc0c=-0x14db+-0x1e72+-0x17*-0x23b;_0x27dc0c<_0x2fa420;++_0x27dc0c){const _0x339745=new Worker(_0x193b42);_0x339745['postMessag'+'e']({'type':'init','module':_0x2b25c0}),_0x36b3bd['push'](_0x339745);}Fc['init'](_0x36b3bd);}),!(0x1*-0x18a3+0x8*0x48a+-0xbad));},hF=(_0x2f30a1,_0x13566c)=>cF()?(Fc['enqueueJob'](_0x2f30a1,_0x13566c),!(0x1ded+-0x61e+-0x17cf)):!(-0x1615+-0xe8c+0x24a2);class dF{constructor(){h(this,'gltf'),h(this,'nodes'),h(this,'scenes'),h(this,'animations'),h(this,'textures'),h(this,'materials'),h(this,'variants'),h(this,'meshVarian'+'ts'),h(this,'meshDefaul'+'tMaterials'),h(this,'renders'),h(this,'skins'),h(this,'lights'),h(this,'cameras'),h(this,'nodeInstan'+'cingMap');}['destroy'](){this['renders']&&this['renders']['forEach'](_0x5cb0d9=>{_0x5cb0d9['meshes']=null;});}}const Bv=_0x1a97aa=>/^data:[^\n\r,\u2028\u2029]*,.*$/i['test'](_0x1a97aa),fF=_0x1b1f2e=>_0x1b1f2e['substring'](_0x1b1f2e['indexOf'](':')+(-0xb66+0x47*-0x9+0xde6),_0x1b1f2e['indexOf'](';')),nl=_0x41ba3a=>{switch(_0x41ba3a){case'SCALAR':return-0xf9+-0xc31+0xd2b;case'VEC2':return 0x2175+-0x92d+-0x1846;case'VEC3':return-0x26ab+0xb3*0x29+-0xe9*-0xb;case'VEC4':return-0x9e9*-0x3+-0x4*-0x363+0x1*-0x2b43;case'MAT2':return-0x197d+-0x1*0x26ad+0x402e;case'MAT3':return 0x12b7+0x8b8+0x1*-0x1b66;case'MAT4':return 0x112a+0x2*0x55d+-0x1bd4;default:return-0xdde+-0x2637+0x3418;}},ld=_0x5205f1=>{switch(_0x5205f1){case 0x1c46+-0xe82+0x63c:return Hh;case-0x2f*0xb+0x20d4*-0x1+-0x1*-0x36da:return ia;case 0x7af+-0x1fd6+0x2c29:return Wh;case-0x29f+0x1a27+0x35*-0x11:return _l;case-0x6*0x93+-0x223*0x7+0x266b:return zS;case 0x1a5*-0x6+0x1236+0x3d*0x31:return Vo;case-0xd5f*-0x2+-0x1*-0x1379+-0x1a31:return Ve;default:return 0x24b7+-0x10e2+-0x13d5;}},uF=_0x205ecb=>{switch(_0x205ecb){case-0x14*-0x1b2+0x8a5+-0x17*0xfb:return-0x24bb*-0x1+0x1*-0xbd2+-0x18e8;case 0x1d6*-0x5+-0x7f2+0x2521:return 0x1098+-0x2*0x1fd+0x1*-0xc9d;case-0x59*0xd+-0x2364+0x3beb:return 0x1892+-0x2e*-0x7+-0x19d2;case 0x556+-0xacc*-0x1+0x3e1:return-0x1881+-0xe28+0x26ab;case-0xf89+0x1c9*0x6+0x18d7:return 0xcd1+0x2338+-0x287*0x13;case 0x1c11+0x133c+-0x1b48:return-0xa4+0x189*0xd+0x66f*-0x3;case-0x4*-0x1fc+0x1832+-0xc1c:return-0x16b8+0x252d+-0xe71;default:return-0xdb*-0x1+-0x123a+0x115f;}},pF=_0x50c590=>{switch(_0x50c590){case-0x2758+-0x4*-0x4b3+0x288c:return Int8Array;case-0x903*-0x3+0x1c26+-0xbba*0x3:return Uint8Array;case-0x25a+-0x3*-0xd1d+-0x1*0x10fb:return Int16Array;case-0x248e+0x527*0x1+-0x336a*-0x1:return Uint16Array;case-0xe53+0x10a6*-0x1+-0x32fd*-0x1:return Int32Array;case-0x4a4+0x1cd*0x13+-0x98e:return Uint32Array;case 0x2*0x301+-0x9*-0x195+-0x39:return Float32Array;default:return null;}},ph={'POSITION':Pe,'NORMAL':gs,'TANGENT':yi,'COLOR_0':Wt,'JOINTS_0':us,'WEIGHTS_0':gi,'TEXCOORD_0':is,'TEXCOORD_1':va,'TEXCOORD_2':hl,'TEXCOORD_3':dl,'TEXCOORD_4':fl,'TEXCOORD_5':ul,'TEXCOORD_6':pl,'TEXCOORD_7':ml},Hg={[Pe]:0x2426+0x23ca*-0x1+-0x1*0x5c,[gs]:-0x21c6+-0x2572+0x4739,[yi]:0xa77+-0x139*0x17+0x11aa,[Wt]:0x18aa+0x3d*0xa2+-0x3f41,[us]:-0x76*-0xc+0xe9d+-0x1421,[gi]:-0x803+0x6b1+0x157,[is]:-0xd*0x119+-0x1*-0x51+-0x1*-0xdfa,[va]:-0x1*0x1c4e+0x51*0x7+0x1*0x1a1e,[hl]:-0x1bb9+0x192a*0x1+0xdd*0x3,[dl]:-0x6*0x119+0x12f4+-0xc55,[fl]:-0xcea+0x124e+-0x55a,[ul]:0x1c44+-0x11de+-0xa5b,[pl]:-0x71+0x10*0x43+-0x3b3,[ml]:0x1c6*-0xe+0x2cc+0x1615},mF=_0x9ace96=>{switch(_0x9ace96){case Hh:return _0x3ad869=>Math['max'](_0x3ad869/(0x19*0x22+-0x1c09+-0x39a*-0x7),-(0xd*-0x53+0x268f+0x3b*-0x95));case ia:return _0x1a72ee=>_0x1a72ee/(-0x2242+-0x2*0x611+-0x7*-0x6c5);case Wh:return _0x506939=>Math['max'](_0x506939/(0x11*0xd93+-0x3fa9*0x1+-0x271b),-(0x284+-0xaf6+0x873));case _l:return _0x11bdc2=>_0x11bdc2/(-0x1*-0x1976b+-0x1*-0xb4e3+-0x14c4f);default:return _0x137cb3=>_0x137cb3;}},_u=(_0x25dfd0,_0x5f1294,_0x2291f9)=>{const _0x3253a9=mF(_0x2291f9),_0x1b7421=_0x5f1294['length'];for(let _0x3ab14d=0x1*-0x14a7+-0x1*0x49d+0x1944;_0x3ab14d<_0x1b7421;++_0x3ab14d)_0x25dfd0[_0x3ab14d]=_0x3253a9(_0x5f1294[_0x3ab14d]);return _0x25dfd0;},la=(_0xb13664,_0x312eef,_0xbea93f=!(0x1bc2+0x17df+-0x3b*0xe0))=>{const _0x188856=nl(_0xb13664['type']),_0x3672ce=pF(_0xb13664['componentT'+'ype']);if(!_0x3672ce)return null;let _0x59e690;if(_0xb13664['sparse']){const _0x4303a7=_0xb13664['sparse'],_0x436154={'count':_0x4303a7['count'],'type':'SCALAR'},_0xa17179=la(Object['assign'](_0x436154,_0x4303a7['indices']),_0x312eef,!(-0x1*0x25c1+0x1115+0x6e4*0x3)),_0x201247={'count':_0x4303a7['count'],'type':_0xb13664['type'],'componentType':_0xb13664['componentT'+'ype']},_0x3c262c=la(Object['assign'](_0x201247,_0x4303a7['values']),_0x312eef,!(-0x7*-0x3f1+0x2*-0x111d+0x6a3));if(_0xb13664['hasOwnProp'+'erty']('bufferView')){const _0x480e45={'bufferView':_0xb13664['bufferView'],'byteOffset':_0xb13664['byteOffset'],'componentType':_0xb13664['componentT'+'ype'],'count':_0xb13664['count'],'type':_0xb13664['type']};_0x59e690=la(_0x480e45,_0x312eef,!(0x10ab+-0x6de+-0x9cd))['slice']();}else _0x59e690=new _0x3672ce(_0xb13664['count']*_0x188856);for(let _0x5568bb=-0x5*-0x7c3+-0x1270+0x413*-0x5;_0x5568bb<_0x4303a7['count'];++_0x5568bb){const _0x3009eb=_0xa17179[_0x5568bb];for(let _0x22c284=0x1235+0x9f*0x2b+0x1675*-0x2;_0x22c284<_0x188856;++_0x22c284)_0x59e690[_0x3009eb*_0x188856+_0x22c284]=_0x3c262c[_0x5568bb*_0x188856+_0x22c284];}}else{if(_0xb13664['hasOwnProp'+'erty']('bufferView')){const _0x3586b8=_0x312eef[_0xb13664['bufferView']];if(_0xbea93f&&_0x3586b8['hasOwnProp'+'erty']('byteStride')){const _0x58d66a=_0x188856*_0x3672ce['BYTES_PER_'+'ELEMENT'],_0x1c8f0b=new ArrayBuffer(_0xb13664['count']*_0x58d66a),_0x281034=new Uint8Array(_0x1c8f0b);let _0x4f4120=-0x2289+0x1b74+0x715;for(let _0x53a2ee=0x8e6+0x4*-0xb1+0xa*-0x9d;_0x53a2ee<_0xb13664['count'];++_0x53a2ee){let _0x11760e=(_0xb13664['byteOffset']||0x22d2+-0x1*0x106c+-0x1266)+_0x53a2ee*_0x3586b8['byteStride'];for(let _0x3e483a=-0x2b*-0x9c+0x25a+0x2db*-0xa;_0x3e483a<_0x58d66a;++_0x3e483a)_0x281034[_0x4f4120++]=_0x3586b8[_0x11760e++];}_0x59e690=new _0x3672ce(_0x1c8f0b);}else _0x59e690=new _0x3672ce(_0x3586b8['buffer'],_0x3586b8['byteOffset']+(_0xb13664['byteOffset']||0x1247*0x1+0x59+-0x12a0),_0xb13664['count']*_0x188856);}else _0x59e690=new _0x3672ce(_0xb13664['count']*_0x188856);}return _0x59e690;},xn=(_0x1356be,_0x37f019)=>{const _0x3e8704=la(_0x1356be,_0x37f019,!(-0x15b3+0x1e24+-0x871));if(_0x3e8704 instanceof Float32Array||!_0x1356be['normalized'])return _0x3e8704;const _0x2a568e=new Float32Array(_0x3e8704['length']);return _u(_0x2a568e,_0x3e8704,ld(_0x1356be['componentT'+'ype'])),_0x2a568e;},gu=_0x3c68fe=>{let _0x3eb91e=_0x3c68fe['min'],_0x5f1e7c=_0x3c68fe['max'];if(!_0x3eb91e||!_0x5f1e7c)return null;if(_0x3c68fe['normalized']){const _0x4384be=ld(_0x3c68fe['componentT'+'ype']);_0x3eb91e=_u([],_0x3eb91e,_0x4384be),_0x5f1e7c=_u([],_0x5f1e7c,_0x4384be);}return new De(new D((_0x5f1e7c[-0x25a6+0x495+0x2111]+_0x3eb91e[-0x38f*0x6+0x25+0x1535*0x1])*(-0x1b13+0x5*0x26d+0x2*0x779+0.5),(_0x5f1e7c[0x130+-0x1*-0x11b9+-0x12e8]+_0x3eb91e[0x1*0x215d+-0x6*-0x4ab+-0x3d5e])*(-0x1737+-0x8e*0x11+-0x3d*-0x89+0.5),(_0x5f1e7c[0x14cb*-0x1+-0x3f*0x1c+0x1bb1]+_0x3eb91e[-0x20b*0xb+-0x68*0xd+0x3*0x941])*(0x19e9+0x2351*0x1+-0x3d3a+0.5)),new D((_0x5f1e7c[0x173a+0x236f*-0x1+0xc35]-_0x3eb91e[0xa54+-0x19b8+0xf64])*(0x4f1*0x2+-0x2*-0x1032+-0x2*0x1523+0.5),(_0x5f1e7c[0x15a*0x2+-0x250b+-0x44b*-0x8]-_0x3eb91e[-0xaed*-0x2+-0x9*0x2ea+0x461])*(0x1d73+-0x760+-0x1613+0.5),(_0x5f1e7c[-0x676*0x1+-0xb1+0x729]-_0x3eb91e[-0xd*0x255+-0x6f+0xfe*0x1f])*(0xb*0x61+0x1370+0x179b*-0x1+0.5)));},zv=_0x29a056=>{if(!_0x29a056['hasOwnProp'+'erty']('mode'))return qs;switch(_0x29a056['mode']){case 0x14ab+-0xaff+-0x2*0x4d6:return Vh;case-0xa10+0x886+0x18b:return Gh;case 0x7cc+0x513*-0x5+0x1195:return OS;case-0x15c2+0x1*-0xb2b+0x20f0:return FS;case 0x24df+0x1541+-0x3a1c:return qs;case-0xeb2+0xb6b+0x2*0x1a6:return vr;case-0x405+0x1ae4+-0x16d9*0x1:return sa;default:return qs;}},_F=_0x35f843=>{const _0x253b90=new Uint16Array(_0x35f843);for(let _0x33d0d0=0x33*0x19+0x1eea+0xbf7*-0x3;_0x33d0d0<_0x35f843;_0x33d0d0++)_0x253b90[_0x33d0d0]=_0x33d0d0;return _0x253b90;},gF=(_0x46ddae,_0x520e9a)=>{const _0x4f53ab=_0x46ddae[Pe];if(!_0x4f53ab||_0x4f53ab['components']!==-0x476*0x1+0x691*0x1+-0x218)return;let _0x23f4b7;if(_0x4f53ab['size']!==_0x4f53ab['stride']){const _0x49caa9=_0x4f53ab['stride']/Eo[_0x4f53ab['type']],_0x2fab28=new _n[_0x4f53ab['type']](_0x4f53ab['buffer'],_0x4f53ab['offset'],_0x4f53ab['count']*_0x49caa9);_0x23f4b7=new _n[_0x4f53ab['type']](_0x4f53ab['count']*(-0x315+-0x1889+-0xb*-0x283));for(let _0xd42f7c=-0xcb*-0x1c+-0x3a5*-0x9+-0x1*0x3701;_0xd42f7c<_0x4f53ab['count'];++_0xd42f7c)_0x23f4b7[_0xd42f7c*(0x448+0x47*0x21+-0x2*0x6b6)+(-0x1598+0x16f9*0x1+0x1*-0x161)]=_0x2fab28[_0xd42f7c*_0x49caa9+(-0x20d2*0x1+0x1751+0x981)],_0x23f4b7[_0xd42f7c*(0x2f9*-0xa+0x571+0x26e*0xa)+(-0x183*0x14+-0x1b89+0x39c6)]=_0x2fab28[_0xd42f7c*_0x49caa9+(-0x1c3e+0x8be+0x1381)],_0x23f4b7[_0xd42f7c*(-0x2343+-0x15f+0xc37*0x3)+(0xe30+-0x1b*0xb5+0x4e9)]=_0x2fab28[_0xd42f7c*_0x49caa9+(-0xdb1+-0x112*0x11+0x1fe5)];}else _0x23f4b7=new _n[_0x4f53ab['type']](_0x4f53ab['buffer'],_0x4f53ab['offset'],_0x4f53ab['count']*(-0xa6f*0x3+-0x2e4+0x2234));const _0x3339c2=_0x4f53ab['count'];_0x520e9a||(_0x520e9a=_F(_0x3339c2));const _0x110946=Yy(_0x23f4b7,_0x520e9a),_0x59fd80=new Float32Array(_0x110946['length']);_0x59fd80['set'](_0x110946),_0x46ddae[gs]={'buffer':_0x59fd80['buffer'],'size':0xc,'offset':0x0,'stride':0xc,'count':_0x3339c2,'components':0x3,'type':Ve};},SF=_0x32d90d=>{const _0x3e2716=_0x57fc5e=>{const _0x33e1cd=[];for(let _0x34c785=0x17d9+-0xa6c+0xd6d*-0x1;_0x34c785<_0x57fc5e['_levels']['length'];++_0x34c785){let _0x4957ad=[];if(_0x57fc5e['cubemap']){for(let _0x44ecdd=-0x17*-0x133+-0x2370+0x7db;_0x44ecdd<-0x347*0x2+-0xd54+0x62*0x34;++_0x44ecdd)_0x4957ad['push'](_0x57fc5e['_levels'][_0x34c785][_0x44ecdd]);}else _0x4957ad=_0x57fc5e['_levels'][_0x34c785];_0x33e1cd['push'](_0x4957ad);}return _0x33e1cd;},_0x7f0561=new _e(_0x32d90d['device'],_0x32d90d);return _0x7f0561['_levels']=_0x3e2716(_0x32d90d),_0x7f0561;},yF=_0x6d1358=>{const _0x555efd=new pe(_0x6d1358['name']+'_clone',_0x6d1358['type'],_0x6d1358['file'],_0x6d1358['data'],_0x6d1358['options']);return _0x555efd['loaded']=!(0x2a1*0x4+-0x9d7+-0xad),_0x555efd['resource']=SF(_0x6d1358['resource']),_0x6d1358['registry']['add'](_0x555efd),_0x555efd;},vF=(_0x59fa37,_0x658c4a)=>{const _0x190f2d=_0x658c4a[Pe];if(!_0x190f2d)return null;const _0x3e802d=_0x190f2d['count'],_0x185139=[];for(const _0xa34c73 in _0x658c4a)if(_0x658c4a['hasOwnProp'+'erty'](_0xa34c73)){const _0x237556={'semantic':_0xa34c73,'components':_0x658c4a[_0xa34c73]['components'],'type':_0x658c4a[_0xa34c73]['type'],'normalize':!!_0x658c4a[_0xa34c73]['normalize']};kt['isElementV'+'alid'](_0x59fa37,_0x237556)||_0x237556['components']++,_0x185139['push'](_0x237556);}_0x185139['sort']((_0x3202e9,_0x2d3f82)=>Hg[_0x3202e9['semantic']]-Hg[_0x2d3f82['semantic']]);let _0x2e7858,_0x2467c5,_0x13f7ed,_0x2113b9,_0x65c9f2,_0x1a5b60;const _0x1a8bab=new kt(_0x59fa37,_0x185139);let _0x19f363=!(0x18*-0xc0+0x89*0x44+-0x1264);for(_0x2e7858=-0x2077+-0x1a*-0x29+-0x15*-0x159;_0x2e7858<_0x1a8bab['elements']['length'];++_0x2e7858)if(_0x65c9f2=_0x1a8bab['elements'][_0x2e7858],_0x2113b9=_0x658c4a[_0x65c9f2['name']],_0x1a5b60=_0x2113b9['offset']-_0x190f2d['offset'],_0x2113b9['buffer']!==_0x190f2d['buffer']||_0x2113b9['stride']!==_0x65c9f2['stride']||_0x2113b9['size']!==_0x65c9f2['size']||_0x1a5b60!==_0x65c9f2['offset']){_0x19f363=!(0x23*0x53+-0x812*-0x2+-0x1b7c);break;}const _0x1df0a7=new Ds(_0x59fa37,_0x1a8bab,_0x3e802d),_0x1c2cb5=_0x1df0a7['lock'](),_0x34806a=new Uint32Array(_0x1c2cb5);let _0x59aac9;if(_0x19f363)_0x59aac9=new Uint32Array(_0x190f2d['buffer'],_0x190f2d['offset'],_0x3e802d*_0x1df0a7['format']['size']/(-0x7a*0x3d+-0xd*0x3e+0x203c)),_0x34806a['set'](_0x59aac9);else{let _0x2534f6,_0x240bcd;for(_0x2e7858=0x3*-0xad0+0x7*-0x477+0xcbd*0x5;_0x2e7858<_0x1df0a7['format']['elements']['length'];++_0x2e7858){_0x65c9f2=_0x1df0a7['format']['elements'][_0x2e7858],_0x2534f6=_0x65c9f2['stride']/(-0xacb+0x1a4e+-0xf7f*0x1),_0x2113b9=_0x658c4a[_0x65c9f2['name']],_0x240bcd=_0x2113b9['stride']/(-0x7af*0x1+-0x1ca4+0x2457),_0x59aac9=new Uint32Array(_0x2113b9['buffer'],_0x2113b9['offset'],(_0x2113b9['count']-(0x6f5+0x25b4+-0x2ca8))*_0x240bcd+(_0x2113b9['size']+(-0x1*0x9ca+0x6b*0xe+0x3f3))/(0x21c0+0x1859*-0x1+0x3*-0x321));let _0x37c801=-0xd31*-0x1+-0x3*0x9f5+0x356*0x5,_0x2ea03a=_0x65c9f2['offset']/(0x1*-0x1eaf+-0x8*-0x431+-0x2d5);const _0x2e1fee=Math['floor']((_0x2113b9['size']+(0x1c86+0x36*0x96+0x140d*-0x3))/(0xa27*-0x1+-0xa39*-0x1+0x7*-0x2));for(_0x2467c5=0x5*0x634+-0xd*-0x172+-0x31ce;_0x2467c5<_0x3e802d;++_0x2467c5){for(_0x13f7ed=0x17*-0x1a1+0x186d+-0x2*-0x685;_0x13f7ed<_0x2e1fee;++_0x13f7ed)_0x34806a[_0x2ea03a+_0x13f7ed]=_0x59aac9[_0x37c801+_0x13f7ed];_0x37c801+=_0x240bcd,_0x2ea03a+=_0x2534f6;}}}return _0x1df0a7['unlock'](),_0x1df0a7;},xF=(_0x24304e,_0x509acf,_0x5a33c0,_0x949608,_0x3e5e3c,_0x407c82)=>{const _0x2f1cb0={},_0x34f6a5=[];for(const _0x28c777 in _0x509acf)_0x509acf['hasOwnProp'+'erty'](_0x28c777)&&ph['hasOwnProp'+'erty'](_0x28c777)&&(_0x2f1cb0[_0x28c777]=_0x509acf[_0x28c777],_0x34f6a5['push'](_0x28c777+':'+_0x509acf[_0x28c777]));_0x34f6a5['sort']();const _0x55f475=_0x34f6a5['join']();let _0x1c3c23=_0x407c82[_0x55f475];if(!_0x1c3c23){const _0x1b6b58={};for(const _0x1b7814 in _0x2f1cb0){const _0x5b43f6=_0x949608[_0x509acf[_0x1b7814]],_0x2b6a75=la(_0x5b43f6,_0x3e5e3c),_0x1408dd=_0x3e5e3c[_0x5b43f6['bufferView']],_0x7a3742=ph[_0x1b7814],_0x25f28f=nl(_0x5b43f6['type'])*uF(_0x5b43f6['componentT'+'ype']),_0xe80136=_0x1408dd&&_0x1408dd['hasOwnProp'+'erty']('byteStride')?_0x1408dd['byteStride']:_0x25f28f;_0x1b6b58[_0x7a3742]={'buffer':_0x2b6a75['buffer'],'size':_0x25f28f,'offset':_0x2b6a75['byteOffset'],'stride':_0xe80136,'count':_0x5b43f6['count'],'components':nl(_0x5b43f6['type']),'type':ld(_0x5b43f6['componentT'+'ype']),'normalize':_0x5b43f6['normalized']};}_0x1b6b58['hasOwnProp'+'erty'](gs)||gF(_0x1b6b58,_0x5a33c0),_0x1c3c23=vF(_0x24304e,_0x1b6b58),_0x407c82[_0x55f475]=_0x1c3c23;}return _0x1c3c23;},TF=(_0x97dbcc,_0xb82dba,_0x492f2b,_0xa0974,_0x202644,_0xd7eb0e)=>{let _0xc52131,_0x5c9df9,_0x11db16;const _0x535c49=_0xb82dba['joints'],_0x5c2cd0=_0x535c49['length'],_0x50bfdc=[];if(_0xb82dba['hasOwnProp'+'erty']('inverseBin'+'dMatrices')){const _0xa47a8b=_0xb82dba['inverseBin'+'dMatrices'],_0x36d022=la(_0x492f2b[_0xa47a8b],_0xa0974,!(-0x23f4+0x155f+0xe95)),_0x241292=[];for(_0xc52131=0xc57+-0x45*-0x25+-0x1650;_0xc52131<_0x5c2cd0;_0xc52131++){for(_0x5c9df9=-0x1b6c+-0x13*0x135+0x325b;_0x5c9df9<0x11*-0x1ca+0x67*-0x2+-0x2d8*-0xb;_0x5c9df9++)_0x241292[_0x5c9df9]=_0x36d022[_0xc52131*(0x1db9+-0x74f*-0x2+0x2c47*-0x1)+_0x5c9df9];_0x11db16=new te(),_0x11db16['set'](_0x241292),_0x50bfdc['push'](_0x11db16);}}else{for(_0xc52131=-0x1ae8+-0x2bd*-0x5+0xd37;_0xc52131<_0x5c2cd0;_0xc52131++)_0x11db16=new te(),_0x50bfdc['push'](_0x11db16);}const _0x1a2add=[];for(_0xc52131=-0x1ffd+0x17a1+-0x2*-0x42e;_0xc52131<_0x5c2cd0;_0xc52131++)_0x1a2add[_0xc52131]=_0x202644[_0x535c49[_0xc52131]]['name'];const _0x17b14d=_0x1a2add['join']('#');let _0x2263cd=_0xd7eb0e['get'](_0x17b14d);return _0x2263cd||(_0x2263cd=new Ky(_0x97dbcc,_0x50bfdc,_0x1a2add),_0xd7eb0e['set'](_0x17b14d,_0x2263cd)),_0x2263cd;},wF=(_0xeaf65d,_0x10d2e2,_0x2d18ee,_0x263a5f,_0x2eba6e,_0x29f461,_0x499cde)=>{var _0x3ff49e;const _0x4d6823=new Ge(_0xeaf65d);_0x4d6823['aabb']=gu(_0x2d18ee[_0x10d2e2['attributes']['POSITION']]);const _0x1b302f=[];for(const [_0x475a40,_0x3f0dbf]of Object['entries'](_0x10d2e2['attributes'])){const _0x1829de=_0x2d18ee[_0x3f0dbf],_0x159247=ph[_0x475a40],_0x5a5bf6=ld(_0x1829de['componentT'+'ype']);_0x1b302f['push']({'semantic':_0x159247,'components':nl(_0x1829de['type']),'type':_0x5a5bf6,'normalize':_0x1829de['normalized']??(_0x159247===Wt&&(_0x5a5bf6===ia||_0x5a5bf6===_l))});}if(_0x499cde['push'](new Promise((_0x2d0fcb,_0x2b9015)=>{const _0x1d9dae=_0x10d2e2['extensions']['KHR_draco_'+'mesh_compr'+'ession'];hF(_0x263a5f[_0x1d9dae['bufferView']]['slice']()['buffer'],(_0x66b0e1,_0x3fb205)=>{var _0x36f8d0;if(_0x66b0e1)console['log'](_0x66b0e1),_0x2b9015(_0x66b0e1);else{const _0x39988b={};for(const [_0x1417e2,_0x10fea3]of Object['entries'](_0x1d9dae['attributes']))_0x39988b[ph[_0x1417e2]]=_0x3fb205['attributes']['indexOf'](_0x10fea3);_0x1b302f['sort']((_0x22aca0,_0x493f45)=>_0x39988b[_0x22aca0['semantic']]-_0x39988b[_0x493f45['semantic']]),(_0x36f8d0=_0x10d2e2['attributes'])!=null&&_0x36f8d0['NORMAL']||_0x1b302f['splice'](-0x4*0x176+-0x9*-0x2e8+0x1*-0x144f,-0x2*0x409+-0x97*0x33+-0x1*-0x2627,{'semantic':'NORMAL','components':0x3,'type':Ve});const _0x2d8c47=new kt(_0xeaf65d,_0x1b302f),_0x28b792=_0x3fb205['vertices']['byteLength']/_0x2d8c47['size'],_0x5d5410=_0x28b792<=-0xae4d+-0x52*-0x2a8+0xd47c?ji:yr,_0x437e27=_0x3fb205['indices']['byteLength']/(_0x28b792<=-0xd8b6*0x2+-0x30b4+0x2e21f*0x1?-0x2*-0x983+-0x26a1+0x139d*0x1:-0x13e1+-0x5*0x65f+0x33c0);w['call'](()=>{_0x28b792!==_0x2d18ee[_0x10d2e2['attributes']['POSITION']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ver'+'tex\x20count'),_0x437e27!==_0x2d18ee[_0x10d2e2['indices']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ind'+'ex\x20count');});const _0x18284d=new Ds(_0xeaf65d,_0x2d8c47,_0x28b792,{'data':_0x3fb205['vertices']}),_0x22c018=new xr(_0xeaf65d,_0x5d5410,_0x437e27,ms,_0x3fb205['indices']);_0x4d6823['vertexBuff'+'er']=_0x18284d,_0x4d6823['indexBuffe'+'r'][-0x24d8+0x7*0xb2+0x1ffa]=_0x22c018,_0x4d6823['primitive'][-0x174c+0x1*0x1819+-0xcd]['type']=zv(_0x10d2e2),_0x4d6823['primitive'][0x8ef*-0x1+-0xaf*0xb+0x1074]['base']=0x9f8*0x1+-0x358*0xa+-0xbbc*-0x2,_0x4d6823['primitive'][-0x1343+-0x19f2+-0x1*-0x2d35]['count']=_0x22c018?_0x437e27:_0x28b792,_0x4d6823['primitive'][-0xb88+-0x173+0xcfb]['indexed']=!!_0x22c018,_0x2d0fcb();}});})),(_0x3ff49e=_0x10d2e2==null?void(0x20ab*0x1+0x1*-0x18c7+-0x1f9*0x4):_0x10d2e2['extensions'])!=null&&_0x3ff49e['KHR_materi'+'als_varian'+'ts']){const _0x33c03b=_0x10d2e2['extensions']['KHR_materi'+'als_varian'+'ts'],_0x331886={};_0x33c03b['mappings']['forEach'](_0x530614=>{_0x530614['variants']['forEach'](_0x499593=>{_0x331886[_0x499593]=_0x530614['material'];});}),_0x2eba6e[_0x4d6823['id']]=_0x331886;}return _0x29f461[_0x4d6823['id']]=_0x10d2e2['material'],_0x4d6823;},EF=(_0x488c0b,_0x22796f,_0x52fc83,_0x510813,_0x12bfbe,_0x35d0a3,_0x1ea89f,_0x54d15a,_0x342312)=>{const _0x4f3890=[];return _0x22796f['primitives']['forEach'](_0x4ad7f5=>{var _0x4a52c0;if((_0x4a52c0=_0x4ad7f5['extensions'])!=null&&_0x4a52c0['KHR_draco_'+'mesh_compr'+'ession'])_0x4f3890['push'](wF(_0x488c0b,_0x4ad7f5,_0x52fc83,_0x510813,_0x35d0a3,_0x1ea89f,_0x342312));else{let _0x187697=_0x4ad7f5['hasOwnProp'+'erty']('indices')?la(_0x52fc83[_0x4ad7f5['indices']],_0x510813,!(0x1*0x1999+-0x2*-0x773+-0x287f)):null;const _0x9f8e60=xF(_0x488c0b,_0x4ad7f5['attributes'],_0x187697,_0x52fc83,_0x510813,_0x12bfbe),_0x572519=zv(_0x4ad7f5),_0x412665=new Ge(_0x488c0b);if(_0x412665['vertexBuff'+'er']=_0x9f8e60,_0x412665['primitive'][0x109a+-0x92+0x4*-0x402]['type']=_0x572519,_0x412665['primitive'][-0x9d*-0x3a+0x1c64+0x2*-0x1ffb]['base']=-0x4*0x590+-0x1*-0x561+0x7*0x269,_0x412665['primitive'][0x1*-0x835+0x238a+-0x1*0x1b55]['indexed']=_0x187697!==null,_0x187697!==null){let _0x57f5a7;_0x187697 instanceof Uint8Array?_0x57f5a7=yf:_0x187697 instanceof Uint16Array?_0x57f5a7=ji:_0x57f5a7=yr,_0x57f5a7===yf&&_0x488c0b['isWebGPU']&&(_0x57f5a7=ji,_0x187697=new Uint16Array(_0x187697));const _0x14da1f=new xr(_0x488c0b,_0x57f5a7,_0x187697['length'],ms,_0x187697);_0x412665['indexBuffe'+'r'][0x1*0x14b+0x4*-0x655+0x1809]=_0x14da1f,_0x412665['primitive'][-0x7fa*0x3+-0x3*-0x1d2+-0x6*-0x314]['count']=_0x187697['length'];}else _0x412665['primitive'][0x3*0x86a+-0x34*0x67+-0x452]['count']=_0x9f8e60['numVertice'+'s'];if(_0x4ad7f5['hasOwnProp'+'erty']('extensions')&&_0x4ad7f5['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts')){const _0x4f678c=_0x4ad7f5['extensions']['KHR_materi'+'als_varian'+'ts'],_0x4d44ed={};_0x4f678c['mappings']['forEach'](_0x50746e=>{_0x50746e['variants']['forEach'](_0x109ecf=>{_0x4d44ed[_0x109ecf]=_0x50746e['material'];});}),_0x35d0a3[_0x412665['id']]=_0x4d44ed;}_0x1ea89f[_0x412665['id']]=_0x4ad7f5['material'];let _0x5c5190=_0x52fc83[_0x4ad7f5['attributes']['POSITION']];if(_0x412665['aabb']=gu(_0x5c5190),_0x4ad7f5['hasOwnProp'+'erty']('targets')){const _0x101e87=[];_0x4ad7f5['targets']['forEach']((_0x3b8dce,_0x294fb3)=>{const _0x2b046a={};_0x3b8dce['hasOwnProp'+'erty']('POSITION')&&(_0x5c5190=_0x52fc83[_0x3b8dce['POSITION']],_0x2b046a['deltaPosit'+'ions']=xn(_0x5c5190,_0x510813),_0x2b046a['aabb']=gu(_0x5c5190)),_0x3b8dce['hasOwnProp'+'erty']('NORMAL')&&(_0x5c5190=_0x52fc83[_0x3b8dce['NORMAL']],_0x2b046a['deltaNorma'+'ls']=xn(_0x5c5190,_0x510813)),_0x22796f['hasOwnProp'+'erty']('extras')&&_0x22796f['extras']['hasOwnProp'+'erty']('targetName'+'s')?_0x2b046a['name']=_0x22796f['extras']['targetName'+'s'][_0x294fb3]:_0x2b046a['name']=_0x294fb3['toString'](0x7ec+0xd66+0x552*-0x4),_0x22796f['hasOwnProp'+'erty']('weights')&&(_0x2b046a['defaultWei'+'ght']=_0x22796f['weights'][_0x294fb3]),_0x2b046a['preserveDa'+'ta']=_0x54d15a['morphPrese'+'rveData'],_0x101e87['push'](new od(_0x2b046a));}),_0x412665['morph']=new Gp(_0x101e87,_0x488c0b,{'preferHighPrecision':_0x54d15a['morphPrefe'+'rHighPreci'+'sion']});}_0x4f3890['push'](_0x412665);}}),_0x4f3890;},Dt=(_0x529277,_0x34b6a0,_0x590bfc)=>{var _0x8efc65;let _0x3efd82;const _0x53ea21=_0x529277['texCoord'];if(_0x53ea21){for(_0x3efd82=0x243+-0x193*0xa+-0xcb*-0x11;_0x3efd82<_0x590bfc['length'];++_0x3efd82)_0x34b6a0[_0x590bfc[_0x3efd82]+'MapUv']=_0x53ea21;}const _0x28b94e=[-0x13af+-0x2451+0x3800,-0xf0e+-0x25fa+0x3508],_0x4ad048=[0x7a3*-0x1+-0x17f9+-0x1*-0x1f9d,0x2*0xefb+0x2393*-0x1+0x59e],_0x5cddd3=(_0x8efc65=_0x529277['extensions'])==null?void(-0xc5f*0x2+0x1*-0xaf6+0x23b4):_0x8efc65['KHR_textur'+'e_transfor'+'m'];if(_0x5cddd3){const _0x1e9f3c=_0x5cddd3['offset']||_0x28b94e,_0x3d2054=_0x5cddd3['scale']||_0x4ad048,_0x3397f3=_0x5cddd3['rotation']?-_0x5cddd3['rotation']*Y['RAD_TO_DEG']:-0x7ce+-0x52*-0x68+-0x1982,_0x597a5c=new J(_0x3d2054[-0x4be*-0x5+0x106a+-0x2820],_0x3d2054[-0x4*-0x644+0xc*-0x11+0x1843*-0x1]),_0x30329c=new J(_0x1e9f3c[0x0+0x35*-0xb5+0x2579],-0xfcd*0x2+0x607*-0x4+0x37b7-_0x3d2054[0x2487+-0x1f67+-0x51f]-_0x1e9f3c[-0xb*-0x4e+0x2331+-0x268a]);for(_0x3efd82=-0x10*-0x33+-0x496*-0x6+-0x1eb4;_0x3efd82<_0x590bfc['length'];++_0x3efd82)_0x34b6a0[_0x590bfc[_0x3efd82]+'MapTiling']=_0x597a5c,_0x34b6a0[_0x590bfc[_0x3efd82]+'MapOffset']=_0x30329c,_0x34b6a0[_0x590bfc[_0x3efd82]+('MapRotatio'+'n')]=_0x3397f3;}},bF=(_0x34db24,_0x2a71ad,_0x1382f6)=>{let _0x397fbe,_0x5e52db;if(_0x34db24['hasOwnProp'+'erty']('diffuseFac'+'tor')?(_0x397fbe=_0x34db24['diffuseFac'+'tor'],_0x2a71ad['diffuse']['set'](Math['pow'](_0x397fbe[-0x2*-0xe59+-0x1*-0x1c27+-0x38d9],(0x7f7*-0x1+0xcd*0x2b+0x10f*-0x19)/(0x1*0xfef+-0xc1*-0x15+0xa*-0x32d+0.20000000000000018)),Math['pow'](_0x397fbe[-0x137*0x11+0xfad+-0x11*-0x4b],(-0x1c61+0x9*0x2ce+0x3*0x10c)/(0x69*-0x19+0x19d1+-0xf8e+0.20000000000000018)),Math['pow'](_0x397fbe[0x1e0b+0xb*0x29+0x2*-0xfe6],(0x50a+0x2001*-0x1+0x1af8)/(-0x3ac+-0x1710+0x1abe+0.20000000000000018))),_0x2a71ad['opacity']=_0x397fbe[0x1162+0xd*0x2fb+0x1c0f*-0x2]):(_0x2a71ad['diffuse']['set'](0x2*-0x19c+0xa4d+0x12e*-0x6,-0x1*0x149d+-0x10b8+0x2556,-0x12a9+0x613+0x125*0xb),_0x2a71ad['opacity']=0x1d9*-0x11+0x959+0x1611),_0x34db24['hasOwnProp'+'erty']('diffuseTex'+'ture')){const _0x10d751=_0x34db24['diffuseTex'+'ture'];_0x5e52db=_0x1382f6[_0x10d751['index']],_0x2a71ad['diffuseMap']=_0x5e52db,_0x2a71ad['diffuseMap'+'Channel']='rgb',_0x2a71ad['opacityMap']=_0x5e52db,_0x2a71ad['opacityMap'+'Channel']='a',Dt(_0x10d751,_0x2a71ad,['diffuse','opacity']);}if(_0x2a71ad['useMetalne'+'ss']=!(-0xf54+-0x65*0xf+0x22*0xa0),_0x34db24['hasOwnProp'+'erty']('specularFa'+'ctor')?(_0x397fbe=_0x34db24['specularFa'+'ctor'],_0x2a71ad['specular']['set'](Math['pow'](_0x397fbe[-0x98*0x24+0x1c2+-0x6*-0x345],(0x3b*-0x25+0x3b7*0x6+0x1*-0xdc2)/(-0x221b*-0x1+-0x23*0xdd+-0x3e2+0.20000000000000018)),Math['pow'](_0x397fbe[-0x33*-0xb+0xf*-0x49+-0x5*-0x6b],(0xa3*-0x10+0x125e+-0x82d)/(0x41b*-0x3+0x42b+-0x8*-0x105+0.20000000000000018)),Math['pow'](_0x397fbe[0x29*0xbf+0x1c99*0x1+0x65*-0x96],(0x6fa*0x3+-0x1*-0x56b+0x2*-0xd2c)/(0x1*-0x128b+-0x26ad+0x5b9*0xa+0.20000000000000018)))):_0x2a71ad['specular']['set'](-0x4f1*-0x1+0x1b01+-0x1ff1,0x5a4+0x13c3+-0x1966*0x1,-0x4*-0x53f+-0x947*-0x4+0x135d*-0x3),_0x34db24['hasOwnProp'+'erty']('glossiness'+'Factor')?_0x2a71ad['gloss']=_0x34db24['glossiness'+'Factor']:_0x2a71ad['gloss']=0x121*0x19+0x879+-0x12f*0x1f,_0x34db24['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x3ab199=_0x34db24['specularGl'+'ossinessTe'+'xture'];_0x2a71ad['specularMa'+'p']=_0x2a71ad['glossMap']=_0x1382f6[_0x3ab199['index']],_0x2a71ad['specularMa'+'pChannel']='rgb',_0x2a71ad['glossMapCh'+'annel']='a',Dt(_0x3ab199,_0x2a71ad,['gloss','metalness']);}},AF=(_0x332b97,_0x86fbfd,_0x2d4269)=>{if(_0x332b97['hasOwnProp'+'erty']('clearcoatF'+'actor')?_0x86fbfd['clearCoat']=_0x332b97['clearcoatF'+'actor']*(-0x7e3*-0x2+-0x2304*0x1+-0x133e*-0x1+0.25):_0x86fbfd['clearCoat']=0x7*-0x39f+-0xa76+0x23cf,_0x332b97['hasOwnProp'+'erty']('clearcoatT'+'exture')){const _0x1ad15b=_0x332b97['clearcoatT'+'exture'];_0x86fbfd['clearCoatM'+'ap']=_0x2d4269[_0x1ad15b['index']],_0x86fbfd['clearCoatM'+'apChannel']='r',Dt(_0x1ad15b,_0x86fbfd,['clearCoat']);}if(_0x332b97['hasOwnProp'+'erty']('clearcoatR'+'oughnessFa'+'ctor')?_0x86fbfd['clearCoatG'+'loss']=_0x332b97['clearcoatR'+'oughnessFa'+'ctor']:_0x86fbfd['clearCoatG'+'loss']=-0x869*0x2+0x245f+-0x138d,_0x332b97['hasOwnProp'+'erty']('clearcoatR'+'oughnessTe'+'xture')){const _0x4fed5d=_0x332b97['clearcoatR'+'oughnessTe'+'xture'];_0x86fbfd['clearCoatG'+'lossMap']=_0x2d4269[_0x4fed5d['index']],_0x86fbfd['clearCoatG'+'lossMapCha'+'nnel']='g',Dt(_0x4fed5d,_0x86fbfd,['clearCoatG'+'loss']);}if(_0x332b97['hasOwnProp'+'erty']('clearcoatN'+'ormalTextu'+'re')){const _0x57ea45=_0x332b97['clearcoatN'+'ormalTextu'+'re'];_0x86fbfd['clearCoatN'+'ormalMap']=_0x2d4269[_0x57ea45['index']],Dt(_0x57ea45,_0x86fbfd,['clearCoatN'+'ormal']),_0x57ea45['hasOwnProp'+'erty']('scale')?_0x86fbfd['clearCoatB'+'umpiness']=_0x57ea45['scale']:_0x86fbfd['clearCoatB'+'umpiness']=0x9af*-0x2+-0x293*-0xb+-0x8f2*0x1;}_0x86fbfd['clearCoatG'+'lossInvert']=!(-0x2d1*0xa+-0x1d5+-0x1*-0x1dff);},CF=(_0x49e0ff,_0x16b973,_0x5927d5)=>{_0x16b973['useLightin'+'g']=!(0x1*0x1979+0x16bf+-0x3037*0x1),_0x16b973['emissive']['copy'](_0x16b973['diffuse']),_0x16b973['emissiveMa'+'p']=_0x16b973['diffuseMap'],_0x16b973['emissiveMa'+'pUv']=_0x16b973['diffuseMap'+'Uv'],_0x16b973['emissiveMa'+'pTiling']['copy'](_0x16b973['diffuseMap'+'Tiling']),_0x16b973['emissiveMa'+'pOffset']['copy'](_0x16b973['diffuseMap'+'Offset']),_0x16b973['emissiveMa'+'pRotation']=_0x16b973['diffuseMap'+'Rotation'],_0x16b973['emissiveMa'+'pChannel']=_0x16b973['diffuseMap'+'Channel'],_0x16b973['emissiveVe'+'rtexColor']=_0x16b973['diffuseVer'+'texColor'],_0x16b973['emissiveVe'+'rtexColorC'+'hannel']=_0x16b973['diffuseVer'+'texColorCh'+'annel'],_0x16b973['useLightin'+'g']=!(-0x823+0x24c8+-0x1ca4),_0x16b973['useSkybox']=!(0x1143+-0x76*0x17+-0x6a8),_0x16b973['diffuse']['set'](-0x255*0xc+-0x1e*0x86+-0x1*-0x2bb1,-0x33b+-0x1464+0x17a0,0x26b*-0x5+-0x1015*-0x1+-0x1*0x3fd),_0x16b973['diffuseMap']=null,_0x16b973['diffuseVer'+'texColor']=!(0xd03*-0x1+0x504*-0x3+0x1c10);},PF=(_0x2b00f3,_0x33b8b8,_0x411cef)=>{if(_0x33b8b8['useMetalne'+'ssSpecular'+'Color']=!(-0x1*0x198e+-0x1914+0x32a2),_0x2b00f3['hasOwnProp'+'erty']('specularCo'+'lorTexture')&&(_0x33b8b8['specularMa'+'p']=_0x411cef[_0x2b00f3['specularCo'+'lorTexture']['index']],_0x33b8b8['specularMa'+'pChannel']='rgb',Dt(_0x2b00f3['specularCo'+'lorTexture'],_0x33b8b8,['specular'])),_0x2b00f3['hasOwnProp'+'erty']('specularCo'+'lorFactor')){const _0x3cca49=_0x2b00f3['specularCo'+'lorFactor'];_0x33b8b8['specular']['set'](Math['pow'](_0x3cca49[0x2*0xd6d+0x39e+-0x1e78],(0xc*0x1c2+-0x19*0xb5+-0x36a)/(-0x869*0x2+-0x2e7*0xc+-0x3a*-0xe4+0.20000000000000018)),Math['pow'](_0x3cca49[-0x141*-0x4+-0x673*0x1+-0x5c*-0x4],(-0xb30+-0x74*0x2c+0x265*0xd)/(-0x1274+0x1153+0x123+0.20000000000000018)),Math['pow'](_0x3cca49[0x2bc+-0x15fb+-0x1*-0x1341],(0x9e8+0x855+-0x123c)/(-0x3e4*-0x1+-0x10ad+-0x1*-0xccb+0.20000000000000018)));}else _0x33b8b8['specular']['set'](-0x1be2+0x21f9+-0x616,-0x1*-0x11a5+-0x1bbc*-0x1+-0x2d60,0x1e9*-0x8+0x21*-0x118+-0x757*-0x7);_0x2b00f3['hasOwnProp'+'erty']('specularFa'+'ctor')?_0x33b8b8['specularit'+'yFactor']=_0x2b00f3['specularFa'+'ctor']:_0x33b8b8['specularit'+'yFactor']=0xe3e+0xbbe+-0x19fb,_0x2b00f3['hasOwnProp'+'erty']('specularTe'+'xture')&&(_0x33b8b8['specularit'+'yFactorMap'+'Channel']='a',_0x33b8b8['specularit'+'yFactorMap']=_0x411cef[_0x2b00f3['specularTe'+'xture']['index']],Dt(_0x2b00f3['specularTe'+'xture'],_0x33b8b8,['specularit'+'yFactor']));},MF=(_0x33def0,_0x19afb4,_0x42fa10)=>{_0x33def0['hasOwnProp'+'erty']('ior')&&(_0x19afb4['refraction'+'Index']=(-0x1175+-0x16be+0x3e*0xa6)/_0x33def0['ior']);},DF=(_0x221753,_0xf15c4a,_0x1da58a)=>{_0x221753['hasOwnProp'+'erty']('dispersion')&&(_0xf15c4a['dispersion']=_0x221753['dispersion']);},IF=(_0x302842,_0x3d36df,_0x87d0bf)=>{_0x3d36df['blendType']=Zs,_0x3d36df['useDynamic'+'Refraction']=!(-0x17a0+-0x1cd*-0xa+0x59e*0x1),_0x302842['hasOwnProp'+'erty']('transmissi'+'onFactor')&&(_0x3d36df['refraction']=_0x302842['transmissi'+'onFactor']),_0x302842['hasOwnProp'+'erty']('transmissi'+'onTexture')&&(_0x3d36df['refraction'+'MapChannel']='r',_0x3d36df['refraction'+'Map']=_0x87d0bf[_0x302842['transmissi'+'onTexture']['index']],Dt(_0x302842['transmissi'+'onTexture'],_0x3d36df,['refraction']));},LF=(_0x4d35e9,_0x40e802,_0x8a309b)=>{if(_0x40e802['useSheen']=!(-0x1*-0xa05+0xf6+-0x3a9*0x3),_0x4d35e9['hasOwnProp'+'erty']('sheenColor'+'Factor')){const _0x1d2681=_0x4d35e9['sheenColor'+'Factor'];_0x40e802['sheen']['set'](Math['pow'](_0x1d2681[0x11*-0x10a+-0x15*-0x2a+0xe38],(0x13fd+-0x2*-0x295+-0x862*0x3)/(-0x50c*0x6+-0x1d50+0x3b9a+0.20000000000000018)),Math['pow'](_0x1d2681[0x27*0x9f+0x1810+-0x3c*0xce],(0x2249+0x2701+-0x4949)/(0x1709+-0x1df8+0x6f1+0.20000000000000018)),Math['pow'](_0x1d2681[-0x1*0x3b9+-0xbf*0x2b+0x23d0],(0x17a6*-0x1+0x210d+-0x966*0x1)/(0x293+-0xd83+0xaf2+0.20000000000000018)));}else _0x40e802['sheen']['set'](-0x2*0x262+-0x109*-0x5+-0x68,-0x2*0xfa2+0x149a+-0xaab*-0x1,-0x1*0x2474+-0x10a7+0x351c);_0x4d35e9['hasOwnProp'+'erty']('sheenColor'+'Texture')&&(_0x40e802['sheenMap']=_0x8a309b[_0x4d35e9['sheenColor'+'Texture']['index']],Dt(_0x4d35e9['sheenColor'+'Texture'],_0x40e802,['sheen'])),_0x40e802['sheenGloss']=_0x4d35e9['hasOwnProp'+'erty']('sheenRough'+'nessFactor')?_0x4d35e9['sheenRough'+'nessFactor']:0x20bc+0x974+0x14*-0x21c,_0x4d35e9['hasOwnProp'+'erty']('sheenRough'+'nessTextur'+'e')&&(_0x40e802['sheenGloss'+'Map']=_0x8a309b[_0x4d35e9['sheenRough'+'nessTextur'+'e']['index']],_0x40e802['sheenGloss'+'MapChannel']='a',Dt(_0x4d35e9['sheenRough'+'nessTextur'+'e'],_0x40e802,['sheenGloss'])),_0x40e802['sheenGloss'+'Invert']=!(0x1553+0x3fa*0x2+-0x1d47);},RF=(_0x8c8095,_0x32e282,_0x4e23dd)=>{if(_0x32e282['blendType']=Zs,_0x32e282['useDynamic'+'Refraction']=!(0x1cd5+-0x30b+-0x19ca),_0x8c8095['hasOwnProp'+'erty']('thicknessF'+'actor')&&(_0x32e282['thickness']=_0x8c8095['thicknessF'+'actor']),_0x8c8095['hasOwnProp'+'erty']('thicknessT'+'exture')&&(_0x32e282['thicknessM'+'ap']=_0x4e23dd[_0x8c8095['thicknessT'+'exture']['index']],_0x32e282['thicknessM'+'apChannel']='g',Dt(_0x8c8095['thicknessT'+'exture'],_0x32e282,['thickness'])),_0x8c8095['hasOwnProp'+'erty']('attenuatio'+'nDistance')&&(_0x32e282['attenuatio'+'nDistance']=_0x8c8095['attenuatio'+'nDistance']),_0x8c8095['hasOwnProp'+'erty']('attenuatio'+'nColor')){const _0x17100a=_0x8c8095['attenuatio'+'nColor'];_0x32e282['attenuatio'+'n']['set'](Math['pow'](_0x17100a[0x1*-0x1cb5+-0x220e+0x1*0x3ec3],(-0x503*0x1+-0x1*0x1c66+0x216a)/(-0x3*0xa21+0x7*0x157+-0x14*-0x10d+0.20000000000000018)),Math['pow'](_0x17100a[0xf7e+0x158c*-0x1+0x60f],(-0x2*-0x1286+0x10f9+-0x3604)/(-0xe4*-0x13+0x209d+-0x1*0x3187+0.20000000000000018)),Math['pow'](_0x17100a[0x18ad+0x11*-0x17b+0x80],(0x23a6+-0x1c63+0x2*-0x3a1)/(-0x10b8+0xf86*-0x1+0x2040+0.20000000000000018)));}},OF=(_0x289b0c,_0x16afb8,_0x468396)=>{_0x289b0c['hasOwnProp'+'erty']('emissiveSt'+'rength')&&(_0x16afb8['emissiveIn'+'tensity']=_0x289b0c['emissiveSt'+'rength']);},FF=(_0x278da5,_0x3c004f,_0x28310c)=>{_0x3c004f['useIridesc'+'ence']=!(-0x1b5*0xf+0x9a9*0x3+-0x3*0x120),_0x278da5['hasOwnProp'+'erty']('iridescenc'+'eFactor')&&(_0x3c004f['iridescenc'+'e']=_0x278da5['iridescenc'+'eFactor']),_0x278da5['hasOwnProp'+'erty']('iridescenc'+'eTexture')&&(_0x3c004f['iridescenc'+'eMapChanne'+'l']='r',_0x3c004f['iridescenc'+'eMap']=_0x28310c[_0x278da5['iridescenc'+'eTexture']['index']],Dt(_0x278da5['iridescenc'+'eTexture'],_0x3c004f,['iridescenc'+'e'])),_0x278da5['hasOwnProp'+'erty']('iridescenc'+'eIor')&&(_0x3c004f['iridescenc'+'eRefractio'+'nIndex']=_0x278da5['iridescenc'+'eIor']),_0x278da5['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Minimum')&&(_0x3c004f['iridescenc'+'eThickness'+'Min']=_0x278da5['iridescenc'+'eThickness'+'Minimum']),_0x278da5['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Maximum')&&(_0x3c004f['iridescenc'+'eThickness'+'Max']=_0x278da5['iridescenc'+'eThickness'+'Maximum']),_0x278da5['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Texture')&&(_0x3c004f['iridescenc'+'eThickness'+'MapChannel']='g',_0x3c004f['iridescenc'+'eThickness'+'Map']=_0x28310c[_0x278da5['iridescenc'+'eThickness'+'Texture']['index']],Dt(_0x278da5['iridescenc'+'eThickness'+'Texture'],_0x3c004f,['iridescenc'+'eThickness']));},NF=(_0x1b40d1,_0x13640e,_0x20bada)=>{if(_0x13640e['enableGGXS'+'pecular']=!(-0x2239+-0x14d6+0x370f),_0x1b40d1['hasOwnProp'+'erty']('anisotropy'+'Strength')?_0x13640e['anisotropy'+'Intensity']=_0x1b40d1['anisotropy'+'Strength']:_0x13640e['anisotropy'+'Intensity']=0x185*0xe+-0x1*0x1057+-0x1a5*0x3,_0x1b40d1['hasOwnProp'+'erty']('anisotropy'+'Texture')){const _0x837318=_0x1b40d1['anisotropy'+'Texture'];_0x13640e['anisotropy'+'Map']=_0x20bada[_0x837318['index']],Dt(_0x837318,_0x13640e,['anisotropy']);}_0x1b40d1['hasOwnProp'+'erty']('anisotropy'+'Rotation')?_0x13640e['anisotropy'+'Rotation']=_0x1b40d1['anisotropy'+'Rotation']*Y['RAD_TO_DEG']:_0x13640e['anisotropy'+'Rotation']=-0x1*-0x12c4+-0x3e2+-0xee2;},Vv=(_0x13c8cf,_0x58e841)=>{const _0x563414=new Ut();_0x13c8cf['hasOwnProp'+'erty']('name')&&(_0x563414['name']=_0x13c8cf['name']),_0x563414['occludeSpe'+'cular']=id,_0x563414['diffuseVer'+'texColor']=!(-0xd11+-0x16ee+0x23ff),_0x563414['specularTi'+'nt']=!(0x1*0x227+-0x3*0x5d5+-0x2*-0x7ac),_0x563414['specularVe'+'rtexColor']=!(-0x253d+0x1045+-0x53e*-0x4),_0x563414['specular']['set'](0x1*0xa34+0x109e+-0x1ad1,0x446*-0x5+0xc7b+0x8e4,-0x79e+0x1f83+-0x8b*0x2c),_0x563414['gloss']=0x148e+0x2*-0x30a+-0xe79,_0x563414['glossInver'+'t']=!(0x10a3+0x14e*-0x15+0xac3),_0x563414['useMetalne'+'ss']=!(-0x479+-0x1890+0x1d09);let _0xd9acf9,_0x1abc78;if(_0x13c8cf['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x405612=_0x13c8cf['pbrMetalli'+'cRoughness'];if(_0x405612['hasOwnProp'+'erty']('baseColorF'+'actor')&&(_0xd9acf9=_0x405612['baseColorF'+'actor'],_0x563414['diffuse']['set'](Math['pow'](_0xd9acf9[-0x1e00+-0x4f8+0x22f8],(0x26f1+0x1*-0x14a1+-0x124f)/(0xf1*0x11+-0x20e+-0xdf1+0.20000000000000018)),Math['pow'](_0xd9acf9[0x1dc2+0x1a1d+-0x37de],(-0xbc*0x1f+0x1*-0x200e+-0x191*-0x23)/(-0x3ae*-0x8+-0x2*0xe7d+-0x74+0.20000000000000018)),Math['pow'](_0xd9acf9[-0x112d+-0x1*0x1855+0xa61*0x4],(-0x29*-0x6b+-0x5*-0x2b6+-0x1eb0)/(-0x1*0x1319+0xf52+-0x13*-0x33+0.20000000000000018))),_0x563414['opacity']=_0xd9acf9[0x7b0*-0x2+0xa80+0x4e3]),_0x405612['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x257e46=_0x405612['baseColorT'+'exture'];_0x1abc78=_0x58e841[_0x257e46['index']],_0x563414['diffuseMap']=_0x1abc78,_0x563414['diffuseMap'+'Channel']='rgb',_0x563414['opacityMap']=_0x1abc78,_0x563414['opacityMap'+'Channel']='a',Dt(_0x257e46,_0x563414,['diffuse','opacity']);}if(_0x405612['hasOwnProp'+'erty']('metallicFa'+'ctor')&&(_0x563414['metalness']=_0x405612['metallicFa'+'ctor']),_0x405612['hasOwnProp'+'erty']('roughnessF'+'actor')&&(_0x563414['gloss']=_0x405612['roughnessF'+'actor']),_0x405612['hasOwnProp'+'erty']('metallicRo'+'ughnessTex'+'ture')){const _0x51a7c3=_0x405612['metallicRo'+'ughnessTex'+'ture'];_0x563414['metalnessM'+'ap']=_0x563414['glossMap']=_0x58e841[_0x51a7c3['index']],_0x563414['metalnessM'+'apChannel']='b',_0x563414['glossMapCh'+'annel']='g',Dt(_0x51a7c3,_0x563414,['gloss','metalness']);}}if(_0x13c8cf['hasOwnProp'+'erty']('normalText'+'ure')){const _0x546d15=_0x13c8cf['normalText'+'ure'];_0x563414['normalMap']=_0x58e841[_0x546d15['index']],Dt(_0x546d15,_0x563414,['normal']),_0x546d15['hasOwnProp'+'erty']('scale')&&(_0x563414['bumpiness']=_0x546d15['scale']);}if(_0x13c8cf['hasOwnProp'+'erty']('occlusionT'+'exture')){const _0x5ba499=_0x13c8cf['occlusionT'+'exture'];_0x563414['aoMap']=_0x58e841[_0x5ba499['index']],_0x563414['aoMapChann'+'el']='r',Dt(_0x5ba499,_0x563414,['ao']);}if(_0x13c8cf['hasOwnProp'+'erty']('emissiveFa'+'ctor')&&(_0xd9acf9=_0x13c8cf['emissiveFa'+'ctor'],_0x563414['emissive']['set'](Math['pow'](_0xd9acf9[-0x451+-0xe8*-0x21+0x1997*-0x1],(0x1eb+0x9b*-0x19+0xd39*0x1)/(0x2*-0x3ce+0x1c6e+-0x1bc*0xc+0.20000000000000018)),Math['pow'](_0xd9acf9[0x65*-0x45+-0x1c3d+0x3777],(0x14e8*-0x1+0x99a*-0x3+-0x485*-0xb)/(-0x1*-0xc11+-0x582+-0x1*0x68d+0.20000000000000018)),Math['pow'](_0xd9acf9[0x210*-0x5+0x4*-0x968+0x22*0x169],(-0x164f+0x16*0x131+-0x3e6)/(0x2422+0xe6b+-0x328b+0.20000000000000018)))),_0x13c8cf['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x388c70=_0x13c8cf['emissiveTe'+'xture'];_0x563414['emissiveMa'+'p']=_0x58e841[_0x388c70['index']],Dt(_0x388c70,_0x563414,['emissive']);}if(_0x13c8cf['hasOwnProp'+'erty']('alphaMode'))switch(_0x13c8cf['alphaMode']){case'MASK':_0x563414['blendType']=Cs,_0x13c8cf['hasOwnProp'+'erty']('alphaCutof'+'f')?_0x563414['alphaTest']=_0x13c8cf['alphaCutof'+'f']:_0x563414['alphaTest']=-0x7f*-0x41+-0x2698+-0x19*-0x41+0.5;break;case'BLEND':_0x563414['blendType']=Zs,_0x563414['depthWrite']=!(-0x1*-0x266d+-0xe*0x24f+-0x61a);break;default:case'OPAQUE':_0x563414['blendType']=Cs;break;}else _0x563414['blendType']=Cs;_0x13c8cf['hasOwnProp'+'erty']('doubleSide'+'d')?(_0x563414['twoSidedLi'+'ghting']=_0x13c8cf['doubleSide'+'d'],_0x563414['cull']=_0x13c8cf['doubleSide'+'d']?bt:ca):(_0x563414['twoSidedLi'+'ghting']=!(-0x1*0x1725+0xb5a+0xbcc),_0x563414['cull']=ca);const _0x44cb41={'KHR_materials_clearcoat':AF,'KHR_materials_emissive_strength':OF,'KHR_materials_ior':MF,'KHR_materials_dispersion':DF,'KHR_materials_iridescence':FF,'KHR_materials_pbrSpecularGlossiness':bF,'KHR_materials_sheen':LF,'KHR_materials_specular':PF,'KHR_materials_transmission':IF,'KHR_materials_unlit':CF,'KHR_materials_volume':RF,'KHR_materials_anisotropy':NF};if(_0x13c8cf['hasOwnProp'+'erty']('extensions'))for(const _0x50f14d in _0x13c8cf['extensions']){const _0xf5a90c=_0x44cb41[_0x50f14d];_0xf5a90c!==void(0xbf*0x1+0x15a0+0x1*-0x165f)&&_0xf5a90c(_0x13c8cf['extensions'][_0x50f14d],_0x563414,_0x58e841);}return _0x563414['update'](),_0x563414;},kF=(_0x499950,_0x3c31dc,_0x1c6686,_0x407db7,_0x409eef,_0x14d8b3,_0x16ccd4)=>{const _0x597236=_0x116b07=>new uh(nl(_0x116b07['type']),xn(_0x116b07,_0x407db7)),_0x4ea890={'STEP':iv,'LINEAR':Xf,'CUBICSPLINE':qf},_0x4fa10d={},_0x284160={},_0x5c8b4d={};let _0x131e03=0x21+0x1061+-0x1081,_0x5e3dec;for(_0x5e3dec=-0x294*-0x4+0xdc+-0x37*0x34;_0x5e3dec<_0x499950['samplers']['length'];++_0x5e3dec){const _0x35343d=_0x499950['samplers'][_0x5e3dec];_0x4fa10d['hasOwnProp'+'erty'](_0x35343d['input'])||(_0x4fa10d[_0x35343d['input']]=_0x597236(_0x1c6686[_0x35343d['input']])),_0x284160['hasOwnProp'+'erty'](_0x35343d['output'])||(_0x284160[_0x35343d['output']]=_0x597236(_0x1c6686[_0x35343d['output']]));const _0x46b114=_0x35343d['hasOwnProp'+'erty']('interpolat'+'ion')&&_0x4ea890['hasOwnProp'+'erty'](_0x35343d['interpolat'+'ion'])?_0x4ea890[_0x35343d['interpolat'+'ion']]:Xf,_0x9589e3={'paths':[],'input':_0x35343d['input'],'output':_0x35343d['output'],'interpolation':_0x46b114};_0x5c8b4d[_0x5e3dec]=_0x9589e3;}const _0xc04ea1=[],_0x2ae177={'translation':'localPosit'+'ion','rotation':'localRotat'+'ion','scale':'localScale'},_0x19a3d2=_0x58faac=>{const _0x240f5a=[];for(;_0x58faac;)_0x240f5a['unshift'](_0x58faac['name']),_0x58faac=_0x58faac['parent'];return _0x240f5a;},_0x31342d=(_0xb3316a,_0xd095b5,_0x905538)=>{const _0x24e412=_0x284160[_0xb3316a['output']];if(!_0x24e412){w['warn']('glb-parser'+':\x20No\x20outpu'+'t\x20data\x20is\x20'+'available\x20'+'for\x20the\x20mo'+'rph\x20target'+'\x20curve\x20('+_0x905538+('/graph/wei'+'ghts).\x20Ski'+'pping.'));return;}let _0xb811bf;if(_0x14d8b3&&_0x14d8b3[_0xd095b5['mesh']]){const _0x30599d=_0x14d8b3[_0xd095b5['mesh']];_0x30599d['hasOwnProp'+'erty']('extras')&&_0x30599d['extras']['hasOwnProp'+'erty']('targetName'+'s')&&(_0xb811bf=_0x30599d['extras']['targetName'+'s']);}const _0x38b530=_0x24e412['data'],_0x43c790=_0x38b530['length']/_0x4fa10d[_0xb3316a['input']]['data']['length'],_0x50a39f=_0x38b530['length']/_0x43c790,_0x240ef2=_0x50a39f*(0x4*0x879+-0x7*-0xb6+-0x26da),_0x21716e=new ArrayBuffer(_0x240ef2*_0x43c790);for(let _0x1b5cc0=0x1*0x2d3+0x1*0x13da+-0x16ad;_0x1b5cc0<_0x43c790;_0x1b5cc0++){const _0x46d659=new Float32Array(_0x21716e,_0x240ef2*_0x1b5cc0,_0x50a39f);for(let _0x14b9c7=-0x6*0x296+0x1*0xd21+-0xd*-0x2f;_0x14b9c7<_0x50a39f;_0x14b9c7++)_0x46d659[_0x14b9c7]=_0x38b530[_0x14b9c7*_0x43c790+_0x1b5cc0];const _0x12a9e0=new uh(-0x12*-0x16e+0x1959+0x2*-0x198a,_0x46d659),_0x5e9ae7=_0xb811bf!=null&&_0xb811bf[_0x1b5cc0]?'name.'+_0xb811bf[_0x1b5cc0]:_0x1b5cc0;_0x284160[-_0x131e03]=_0x12a9e0;const _0x5ca4c6={'paths':[{'entityPath':_0x905538,'component':'graph','propertyPath':['weight.'+_0x5e9ae7]}],'input':_0xb3316a['input'],'output':-_0x131e03,'interpolation':_0xb3316a['interpolat'+'ion']};_0x131e03++,_0x5c8b4d['morphCurve'+'-'+_0x5e3dec+'-'+_0x1b5cc0]=_0x5ca4c6;}};for(_0x5e3dec=-0x1527+0x1ff+0x2*0x994;_0x5e3dec<_0x499950['channels']['length'];++_0x5e3dec){const _0xadbc64=_0x499950['channels'][_0x5e3dec],_0x2bc944=_0xadbc64['target'],_0x14e4be=_0x5c8b4d[_0xadbc64['sampler']],_0x40f405=_0x409eef[_0x2bc944['node']],_0x5a6768=_0x16ccd4[_0x2bc944['node']],_0x3f3c8c=_0x19a3d2(_0x40f405);_0x2bc944['path']['startsWith']('weights')?(_0x31342d(_0x14e4be,_0x5a6768,_0x3f3c8c),_0x5c8b4d[_0xadbc64['sampler']]['morphCurve']=!(0x704*0x2+0x92*0x27+-0x1*0x2446)):_0x14e4be['paths']['push']({'entityPath':_0x3f3c8c,'component':'graph','propertyPath':[_0x2ae177[_0x2bc944['path']]]});}const _0x2b5408=[],_0x3ad1ea=[],_0x13afa1=[];for(const _0x2c763d in _0x4fa10d)_0x2b5408['push'](_0x4fa10d[_0x2c763d]),_0x4fa10d[_0x2c763d]=_0x2b5408['length']-(-0x24b*-0x1+0x23ed+-0x2637);for(const _0x15cb7c in _0x284160)_0x3ad1ea['push'](_0x284160[_0x15cb7c]),_0x284160[_0x15cb7c]=_0x3ad1ea['length']-(-0x4*-0x601+-0x34*0x3d+0x1a9*-0x7);for(const _0x4b6910 in _0x5c8b4d){const _0xd49792=_0x5c8b4d[_0x4b6910];_0xd49792['morphCurve']||(_0x13afa1['push'](new Uv(_0xd49792['paths'],_0x4fa10d[_0xd49792['input']],_0x284160[_0xd49792['output']],_0xd49792['interpolat'+'ion'])),_0xd49792['paths']['length']>0x1456+0x3*0x935+0x2ff5*-0x1&&_0xd49792['paths'][0x251b+0xf*0x20f+0x43fc*-0x1]['propertyPa'+'th'][0x1d62+0x2b*0x1+0x55*-0x59]==='localRotat'+'ion'&&_0xd49792['interpolat'+'ion']!==qf&&_0xc04ea1['push'](_0x13afa1[_0x13afa1['length']-(0x10f3*-0x2+-0xaa0+0x2c87)]['output']));}_0xc04ea1['sort']();let _0x29d9ef=null,_0x91eb16;for(_0x5e3dec=-0x1*0x4e4+-0x1ec4*-0x1+0x3*-0x8a0;_0x5e3dec<_0xc04ea1['length'];++_0x5e3dec){const _0x40b6f5=_0xc04ea1[_0x5e3dec];if(_0x5e3dec===0x81e+0x1*-0xcc1+0x4a3||_0x40b6f5!==_0x29d9ef){if(_0x91eb16=_0x3ad1ea[_0x40b6f5],_0x91eb16['components']===-0x25e4+0x140f+-0x1*-0x11d9){const _0x4d7253=_0x91eb16['data'],_0x168989=_0x4d7253['length']-(-0x112f*-0x1+-0xd*-0x2d3+0x16b*-0x26);for(let _0xe84104=-0x1cca+0x1fde+0x2*-0x18a;_0xe84104<_0x168989;_0xe84104+=0x9*0x1f0+0x1160+0x22*-0x106)_0x4d7253[_0xe84104+(0x2*-0x32d+-0xe90+0x14ea*0x1)]*_0x4d7253[_0xe84104+(-0x774+-0x1fae+-0x2726*-0x1)]+_0x4d7253[_0xe84104+(0x814+0xac5+0x192*-0xc)]*_0x4d7253[_0xe84104+(0x1e7+0x2043+-0x1*0x2225)]+_0x4d7253[_0xe84104+(-0xfc2+-0x586*-0x3+-0xce)]*_0x4d7253[_0xe84104+(0x1*0x552+0x1*-0xf9f+0x371*0x3)]+_0x4d7253[_0xe84104+(0x1f6*0x3+0x11*0xab+-0x113a)]*_0x4d7253[_0xe84104+(0x7*0x476+0xbd7+-0x7*0x626)]<0x315*0x6+-0x18ed+-0x1b*-0x3d&&(_0x4d7253[_0xe84104+(-0x1f92+-0x1*0x11d4+-0x5*-0x9e2)]*=-(0xcf8+-0x151+-0x1aa*0x7),_0x4d7253[_0xe84104+(0x1d79+0x1177*0x1+-0x2eeb)]*=-(0x1b09+-0x9f5*-0x1+-0x11*0x22d),_0x4d7253[_0xe84104+(0xd98+0x1515+-0x22a7)]*=-(0x1*-0x1ecb+-0x1237*0x1+0x1*0x3103),_0x4d7253[_0xe84104+(-0x1*-0x962+0x1a6*0x1+-0xb01)]*=-(0x144d+0x2f*-0x8b+0x1*0x539));}_0x29d9ef=_0x40b6f5;}}let _0x269d5a=-0x1*0xf07+0x935*0x2+-0x363;for(_0x5e3dec=-0x3*0x846+0x175+0x175d;_0x5e3dec<_0x2b5408['length'];_0x5e3dec++)_0x91eb16=_0x2b5408[_0x5e3dec]['_data'],_0x269d5a=Math['max'](_0x269d5a,_0x91eb16['length']===0x10ec+0xbe3+0x7d*-0x3b?-0x77f+0x4*0x509+-0xca5:_0x91eb16[_0x91eb16['length']-(-0xf49+-0x7*0x17f+0x5*0x527)]);return new Zi(_0x499950['hasOwnProp'+'erty']('name')?_0x499950['name']:'animation_'+_0x3c31dc,_0x269d5a,_0x2b5408,_0x3ad1ea,_0x13afa1);},_c=new te(),qa=new D(),UF=(_0xcc6b43,_0x1b43d,_0x3e2d23)=>{const _0x341079=new Ie();if(_0xcc6b43['hasOwnProp'+'erty']('name')&&_0xcc6b43['name']['length']>-0x1949+-0x1d64+-0x1*-0x36ad?_0x341079['name']=_0xcc6b43['name']:_0x341079['name']='node_'+_0x1b43d,_0xcc6b43['hasOwnProp'+'erty']('matrix')&&(_c['data']['set'](_0xcc6b43['matrix']),_c['getTransla'+'tion'](qa),_0x341079['setLocalPo'+'sition'](qa),_c['getEulerAn'+'gles'](qa),_0x341079['setLocalEu'+'lerAngles'](qa),_c['getScale'](qa),_0x341079['setLocalSc'+'ale'](qa)),_0xcc6b43['hasOwnProp'+'erty']('rotation')){const _0x2becf9=_0xcc6b43['rotation'];_0x341079['setLocalRo'+'tation'](_0x2becf9[0x171c+0x1d11*0x1+-0x342d],_0x2becf9[-0x1*0xb75+0x33e+-0x1*-0x838],_0x2becf9[0x394*-0x9+-0x1*0x1e9a+-0x1e*-0x218],_0x2becf9[-0x62*0x5+-0xee0+0x10cd]);}if(_0xcc6b43['hasOwnProp'+'erty']('translatio'+'n')){const _0x251ea5=_0xcc6b43['translatio'+'n'];_0x341079['setLocalPo'+'sition'](_0x251ea5[-0x33*-0x66+-0x47a+-0xfd8],_0x251ea5[0x2706+0x94b+0x60a*-0x8],_0x251ea5[0x1f39+-0x2*-0xe72+-0x3c1b]);}if(_0xcc6b43['hasOwnProp'+'erty']('scale')){const _0xa8bf56=_0xcc6b43['scale'];_0x341079['setLocalSc'+'ale'](_0xa8bf56[-0x13*-0x6d+-0x1*-0x5aa+-0x1*0xdc1],_0xa8bf56[-0x2*0x874+0x36*-0x9d+0x3207],_0xa8bf56[0xf*0x169+-0x5*0x83+-0x1296]);}return _0xcc6b43['hasOwnProp'+'erty']('extensions')&&_0xcc6b43['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']&&_0x3e2d23['set'](_0xcc6b43,{'ext':_0xcc6b43['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']}),_0x341079;},BF=(_0x2ab730,_0x3284ad)=>{const _0x299d65=_0x2ab730['type']==='orthograph'+'ic'?gn:ni,_0x5d6989=_0x299d65===gn?_0x2ab730['orthograph'+'ic']:_0x2ab730['perspectiv'+'e'],_0x303db1={'enabled':!(0x2461+0x316+0x2*-0x13bb),'projection':_0x299d65,'nearClip':_0x5d6989['znear'],'aspectRatioMode':kp};_0x5d6989['zfar']&&(_0x303db1['farClip']=_0x5d6989['zfar']),_0x299d65===gn?(_0x303db1['orthoHeigh'+'t']=(0x24b5+-0x139f+-0x1116+0.5)*_0x5d6989['ymag'],_0x5d6989['ymag']&&(_0x303db1['aspectRati'+'oMode']=Nf,_0x303db1['aspectRati'+'o']=_0x5d6989['xmag']/_0x5d6989['ymag'])):(_0x303db1['fov']=_0x5d6989['yfov']*Y['RAD_TO_DEG'],_0x5d6989['aspectRati'+'o']&&(_0x303db1['aspectRati'+'oMode']=Nf,_0x303db1['aspectRati'+'o']=_0x5d6989['aspectRati'+'o']));const _0x5864e4=new lt(_0x2ab730['name']);return _0x5864e4['addCompone'+'nt']('camera',_0x303db1),_0x5864e4;},zF=(_0x294bf7,_0x50fd70)=>{const _0x7c9f85={'enabled':!(-0xe1f+-0x3d*-0x67+0xa6b*-0x1),'type':_0x294bf7['type']==='point'?'omni':_0x294bf7['type'],'color':_0x294bf7['hasOwnProp'+'erty']('color')?new ie(_0x294bf7['color']):ie['WHITE'],'range':_0x294bf7['hasOwnProp'+'erty']('range')?_0x294bf7['range']:-0x3eff+0x301*-0x6+0x7814,'falloffMode':Sy,'intensity':_0x294bf7['hasOwnProp'+'erty']('intensity')?Y['clamp'](_0x294bf7['intensity'],-0x1*0xe17+0x128b+-0xa*0x72,-0x75c+-0x598+0xcf6):0x6b5+0x112b+-0x17df*0x1};_0x294bf7['hasOwnProp'+'erty']('spot')&&(_0x7c9f85['innerConeA'+'ngle']=_0x294bf7['spot']['hasOwnProp'+'erty']('innerConeA'+'ngle')?_0x294bf7['spot']['innerConeA'+'ngle']*Y['RAD_TO_DEG']:-0x1d3b+0x1c3f+0xc*0x15,_0x7c9f85['outerConeA'+'ngle']=_0x294bf7['spot']['hasOwnProp'+'erty']('outerConeA'+'ngle')?_0x294bf7['spot']['outerConeA'+'ngle']*Y['RAD_TO_DEG']:Math['PI']/(0x29*-0xb2+-0x1*0x26b2+-0x3bc*-0x12)),_0x294bf7['hasOwnProp'+'erty']('intensity')&&(_0x7c9f85['luminance']=_0x294bf7['intensity']*tl['getLightUn'+'itConversi'+'on'](zf[_0x7c9f85['type']],_0x7c9f85['outerConeA'+'ngle'],_0x7c9f85['innerConeA'+'ngle']));const _0xcce0ba=new lt(_0x50fd70['name']);return _0xcce0ba['rotateLoca'+'l'](0x196+-0x8a*-0x41+0x2*-0x1223,-0x13ca+-0x1*-0x69c+0xd2e,0x1676+-0x1709+0x93),_0xcce0ba['addCompone'+'nt']('light',_0x7c9f85),_0xcce0ba;},VF=(_0x40e340,_0x303e3d,_0x5000e7,_0x2fd228)=>{if(!_0x303e3d['hasOwnProp'+'erty']('skins')||_0x303e3d['skins']['length']===-0x1fde*0x1+0x1*-0x102b+0x3009)return[];const _0xad1df3=new Map();return _0x303e3d['skins']['map'](_0x214a44=>TF(_0x40e340,_0x214a44,_0x303e3d['accessors'],_0x2fd228,_0x5000e7,_0xad1df3));},GF=(_0x28682b,_0xd41f77,_0x27056e,_0x32f964)=>{var _0x38815a,_0x782616,_0x380801;const _0x5416c0={},_0x14ab97={},_0x57d91a={},_0x446336=[];return{'meshes':!_0x32f964['skipMeshes']&&((_0x38815a=_0xd41f77==null?void(-0x237b+-0x89*0xe+-0x13*-0x243):_0xd41f77['meshes'])==null?void(0xcce+-0x1673+-0x1*-0x9a5):_0x38815a['length'])&&((_0x782616=_0xd41f77==null?void(0x3dc*-0x3+0x1*0x1831+-0xc9d*0x1):_0xd41f77['accessors'])==null?void(0x1466+0x491*-0x7+0xb91):_0x782616['length'])&&((_0x380801=_0xd41f77==null?void(0x1bd9*0x1+0x18e1+-0x1a5d*0x2):_0xd41f77['bufferView'+'s'])==null?void(0xf76+-0x28*-0x29+-0x15de):_0x380801['length'])?_0xd41f77['meshes']['map'](_0x1a0301=>EF(_0x28682b,_0x1a0301,_0xd41f77['accessors'],_0x27056e,_0x5416c0,_0x14ab97,_0x57d91a,_0x32f964,_0x446336)):[],'meshVariants':_0x14ab97,'meshDefaultMaterials':_0x57d91a,'promises':_0x446336};},HF=(_0x1d8dcb,_0x829ee5,_0x13deca)=>{var _0x503a8a,_0x4fd784,_0x5e5eb1;if(!_0x1d8dcb['hasOwnProp'+'erty']('materials')||_0x1d8dcb['materials']['length']===0x62a+0x1b18+-0x2142)return[];const _0x1ddae1=(_0x503a8a=_0x13deca==null?void(0xf67+0x1390+-0x22f7):_0x13deca['material'])==null?void(-0x8b5+-0x26ef*-0x1+-0x1e3a):_0x503a8a['preprocess'],_0x2a5cb2=((_0x4fd784=_0x13deca==null?void(-0x269+-0x1*0xdfb+0x832*0x2):_0x13deca['material'])==null?void(0x5*-0x2a5+0x11d1+-0x498):_0x4fd784['process'])??Vv,_0x5085ab=(_0x5e5eb1=_0x13deca==null?void(0x58b*-0x2+-0xa*-0x90+-0x1d2*-0x3):_0x13deca['material'])==null?void(0x1d*-0x86+-0x1dfd+-0x2d2b*-0x1):_0x5e5eb1['postproces'+'s'];return _0x1d8dcb['materials']['map'](_0x4eb453=>{_0x1ddae1&&_0x1ddae1(_0x4eb453);const _0x6636c2=_0x2a5cb2(_0x4eb453,_0x829ee5);return _0x5085ab&&_0x5085ab(_0x4eb453,_0x6636c2),_0x6636c2;});},WF=_0x2edd0f=>{if(!_0x2edd0f['hasOwnProp'+'erty']('extensions')||!_0x2edd0f['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts'))return null;const _0x3791f7=_0x2edd0f['extensions']['KHR_materi'+'als_varian'+'ts']['variants'],_0x4be115={};for(let _0x98cada=-0x1*0xdfd+-0x227b+0x11a*0x2c;_0x98cada<_0x3791f7['length'];_0x98cada++)_0x4be115[_0x3791f7[_0x98cada]['name']]=_0x98cada;return _0x4be115;},$F=(_0x4a9be3,_0xf3a150,_0x4234a8,_0x1ea37d)=>{var _0x296497,_0x2c3869;if(!_0x4a9be3['hasOwnProp'+'erty']('animations')||_0x4a9be3['animations']['length']===0xc78+-0xd0a*-0x1+-0x1982*0x1)return[];const _0x292073=(_0x296497=_0x1ea37d==null?void(-0x112+0xf26+0x385*-0x4):_0x1ea37d['animation'])==null?void(-0x2083+-0x3*0x87e+0x39fd):_0x296497['preprocess'],_0x335731=(_0x2c3869=_0x1ea37d==null?void(0x176b+-0xd57+-0xa14):_0x1ea37d['animation'])==null?void(-0x9d9+0x10e9+-0x2*0x388):_0x2c3869['postproces'+'s'];return _0x4a9be3['animations']['map']((_0x4f3f92,_0x27c0fd)=>{_0x292073&&_0x292073(_0x4f3f92);const _0x3a4525=kF(_0x4f3f92,_0x27c0fd,_0x4a9be3['accessors'],_0x4234a8,_0xf3a150,_0x4a9be3['meshes'],_0x4a9be3['nodes']);return _0x335731&&_0x335731(_0x4f3f92,_0x3a4525),_0x3a4525;});},XF=(_0x4db7f5,_0x3574cb,_0x44e4e7,_0x17c250)=>{const _0x51dc33=_0x3574cb['accessors'];_0x44e4e7['forEach']((_0x346c4c,_0x573a39)=>{const _0x27610d=_0x346c4c['ext']['attributes'];let _0x21b26d;if(_0x27610d['hasOwnProp'+'erty']('TRANSLATIO'+'N')){const _0x588c1d=_0x51dc33[_0x27610d['TRANSLATIO'+'N']];_0x21b26d=xn(_0x588c1d,_0x17c250);}let _0x2a7894;if(_0x27610d['hasOwnProp'+'erty']('ROTATION')){const _0x1fe05c=_0x51dc33[_0x27610d['ROTATION']];_0x2a7894=xn(_0x1fe05c,_0x17c250);}let _0x44fc02;if(_0x27610d['hasOwnProp'+'erty']('SCALE')){const _0x3231b0=_0x51dc33[_0x27610d['SCALE']];_0x44fc02=xn(_0x3231b0,_0x17c250);}const _0x89101a=(_0x21b26d?_0x21b26d['length']/(-0x2cf*-0x2+-0xfc1+-0x3*-0x362):-0x1*0x1f5a+-0x7*0x422+0x1e24*0x2)||(_0x2a7894?_0x2a7894['length']/(0x2589+-0x1*0x2069+0x6d*-0xc):-0x3ba*-0x8+0x4d+-0x1e1d)||(_0x44fc02?_0x44fc02['length']/(-0x260d+-0x18bc+-0x2*-0x1f66):0x2*-0x757+-0x251f*0x1+0x59*0x95);if(_0x89101a){const _0x1e062f=new Float32Array(_0x89101a*(-0xc0c*-0x3+-0x100*-0x9+0x482*-0xa)),_0x1b3384=new D(),_0x1e1bf6=new le(),_0x317f90=new D(-0xb97*-0x1+0x98b*-0x3+0x110b*0x1,-0x1044+-0x1f42*-0x1+-0xefd,-0x1*-0xa9d+-0x3*0x27a+-0x32e),_0x2bce5b=new te();let _0x143b45=-0x3*-0x577+-0x7*0x32+-0x1*0xf07;for(let _0x47eaad=-0x353+0x25c8+-0x2275;_0x47eaad<_0x89101a;_0x47eaad++){const _0x49f99f=_0x47eaad*(-0x984+-0xe09+0x1790);if(_0x21b26d&&_0x1b3384['set'](_0x21b26d[_0x49f99f],_0x21b26d[_0x49f99f+(-0x812+0x149e+-0xd*0xf7)],_0x21b26d[_0x49f99f+(0x6*-0x47d+-0x5be+0x2f*0xb2)]),_0x2a7894){const _0x554960=_0x47eaad*(0xba*-0xd+0xd8c*0x1+-0x416);_0x1e1bf6['set'](_0x2a7894[_0x554960],_0x2a7894[_0x554960+(-0x1*-0x1852+-0x1*0x1a6c+-0x7*-0x4d)],_0x2a7894[_0x554960+(-0x146e+-0x137b+0x3a1*0xb)],_0x2a7894[_0x554960+(0x119a+-0xfb9+-0x1de)]);}_0x44fc02&&_0x317f90['set'](_0x44fc02[_0x49f99f],_0x44fc02[_0x49f99f+(-0x23d*-0x1+-0x1a10+0x131*0x14)],_0x44fc02[_0x49f99f+(-0x2454+0x9*0x105+0x1b29)]),_0x2bce5b['setTRS'](_0x1b3384,_0x1e1bf6,_0x317f90);for(let _0x13143c=0x2bb*-0xb+0x25*0x10b+-0x1b6*0x5;_0x13143c<0x7b*-0x2f+-0x12d0+0x2975*0x1;_0x13143c++)_0x1e062f[_0x143b45++]=_0x2bce5b['data'][_0x13143c];}_0x346c4c['matrices']=_0x1e062f;}});},qF=(_0xdf2e52,_0x437457,_0x5cfa5e)=>{var _0x96120b,_0x5220f1,_0x18579c;if(!_0xdf2e52['hasOwnProp'+'erty']('nodes')||_0xdf2e52['nodes']['length']===0x192d*0x1+-0x5*0x347+-0x8ca)return[];const _0xc92740=(_0x96120b=_0x437457==null?void(-0xac*0x1e+0x1*-0x1b9f+0x97*0x51):_0x437457['node'])==null?void(-0x2050+-0x1865*0x1+0x38b5):_0x96120b['preprocess'],_0x2a3720=((_0x5220f1=_0x437457==null?void(-0x777+0x1557+0x4a*-0x30):_0x437457['node'])==null?void(-0xd2*0x15+0x40*0x91+-0x983*0x2):_0x5220f1['process'])??UF,_0x115581=(_0x18579c=_0x437457==null?void(0x19d*0x3+-0x61*0x47+0x1610):_0x437457['node'])==null?void(0xcc9+0x762*0x1+-0x142b):_0x18579c['postproces'+'s'],_0x4e590=_0xdf2e52['nodes']['map']((_0x550eab,_0x2ecc1f)=>{_0xc92740&&_0xc92740(_0x550eab);const _0x1ce03a=_0x2a3720(_0x550eab,_0x2ecc1f,_0x5cfa5e);return _0x115581&&_0x115581(_0x550eab,_0x1ce03a),_0x1ce03a;});for(let _0x1b899d=0x2234+-0xeba+-0x137a;_0x1b899d<_0xdf2e52['nodes']['length'];++_0x1b899d){const _0x189ad9=_0xdf2e52['nodes'][_0x1b899d];if(_0x189ad9['hasOwnProp'+'erty']('children')){const _0x2a5581=_0x4e590[_0x1b899d],_0x209d92={};for(let _0x35bca8=0x572+-0x1151+-0x1*-0xbdf;_0x35bca8<_0x189ad9['children']['length'];++_0x35bca8){const _0x1f4ef9=_0x4e590[_0x189ad9['children'][_0x35bca8]];_0x1f4ef9['parent']||(_0x209d92['hasOwnProp'+'erty'](_0x1f4ef9['name'])?_0x1f4ef9['name']+=_0x209d92[_0x1f4ef9['name']]++:_0x209d92[_0x1f4ef9['name']]=-0x3*-0x21e+0xbe6*-0x1+0x58d,_0x2a5581['addChild'](_0x1f4ef9));}}}return _0x4e590;},jF=(_0x1e1ee1,_0x269d78)=>{var _0x47ca6c;const _0x530b8a=[],_0xce95c3=_0x1e1ee1['scenes']['length'];if(_0xce95c3===-0x4cd*0x2+-0x68b+0x1026&&((_0x47ca6c=_0x1e1ee1['scenes'][0x241*-0xb+-0x1fec+-0x1*-0x38b7]['nodes'])==null?void(-0xa94+0x112*0x7+0x316):_0x47ca6c['length'])===-0x88f*0x3+0x1093*-0x1+0x2a41){const _0xfe6d94=_0x1e1ee1['scenes'][0x25d*-0xe+0xc8c+0x148a]['nodes'][0x1*-0x8d5+0xf*0x91+-0x1*-0x56];_0x530b8a['push'](_0x269d78[_0xfe6d94]);}else for(let _0x2065f7=-0x1*-0x2492+-0x1c72+-0x68*0x14;_0x2065f7<_0xce95c3;_0x2065f7++){const _0x42804d=_0x1e1ee1['scenes'][_0x2065f7];if(_0x42804d['nodes']){const _0x20f40e=new Ie(_0x42804d['name']);for(let _0x491363=-0x10ec+0xd55*0x1+0x397;_0x491363<_0x42804d['nodes']['length'];_0x491363++){const _0x3c27e7=_0x269d78[_0x42804d['nodes'][_0x491363]];_0x20f40e['addChild'](_0x3c27e7);}_0x530b8a['push'](_0x20f40e);}}return _0x530b8a;},YF=(_0x424f92,_0x5224b4,_0x1d45d8)=>{var _0x4b94d1,_0x54d898,_0xafdd94;let _0x47d0be=null;if(_0x424f92['hasOwnProp'+'erty']('nodes')&&_0x424f92['hasOwnProp'+'erty']('cameras')&&_0x424f92['cameras']['length']>0x2584+0xae3+-0x3067){const _0xdfc317=(_0x4b94d1=_0x1d45d8==null?void(0x1672+0xda*0x8+-0x1d42):_0x1d45d8['camera'])==null?void(0xe40+0x99b*0x1+-0x1*0x17db):_0x4b94d1['preprocess'],_0x2a38e6=((_0x54d898=_0x1d45d8==null?void(0xec0+0x56*-0x3e+0x614*0x1):_0x1d45d8['camera'])==null?void(-0x1d36+0x2*0x437+0x14c8):_0x54d898['process'])??BF,_0x197084=(_0xafdd94=_0x1d45d8==null?void(0x1105+0x1*0x499+0x1*-0x159e):_0x1d45d8['camera'])==null?void(0x3*0x2a2+-0x14fd+-0x1*-0xd17):_0xafdd94['postproces'+'s'];_0x424f92['nodes']['forEach']((_0x2bd35c,_0x31045b)=>{if(_0x2bd35c['hasOwnProp'+'erty']('camera')){const _0x4340b1=_0x424f92['cameras'][_0x2bd35c['camera']];if(_0x4340b1){_0xdfc317&&_0xdfc317(_0x4340b1);const _0x3e4cc2=_0x2a38e6(_0x4340b1,_0x5224b4[_0x31045b]);_0x197084&&_0x197084(_0x4340b1,_0x3e4cc2),_0x3e4cc2&&(_0x47d0be||(_0x47d0be=new Map()),_0x47d0be['set'](_0x2bd35c,_0x3e4cc2));}}});}return _0x47d0be;},KF=(_0x39c516,_0x401f22,_0x3e3507)=>{var _0x18d747,_0x59593c,_0x26e4f4;let _0x35aa8a=null;if(_0x39c516['hasOwnProp'+'erty']('nodes')&&_0x39c516['hasOwnProp'+'erty']('extensions')&&_0x39c516['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x39c516['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('lights')){const _0x10f9b5=_0x39c516['extensions']['KHR_lights'+'_punctual']['lights'];if(_0x10f9b5['length']){const _0x195e78=(_0x18d747=_0x3e3507==null?void(-0x1b7*0x11+-0x51+0x1d78):_0x3e3507['light'])==null?void(-0x4ec+-0x1a72+-0xb*-0x2da):_0x18d747['preprocess'],_0x5af109=((_0x59593c=_0x3e3507==null?void(0x7c3*-0x3+0x19e5+-0x29c):_0x3e3507['light'])==null?void(0x61a+-0x1*0x18c1+0x12a7*0x1):_0x59593c['process'])??zF,_0x33ba8e=(_0x26e4f4=_0x3e3507==null?void(0x13a*-0x3+-0x26ac+0x2a5a):_0x3e3507['light'])==null?void(-0x1a93+0xee6+0xbad):_0x26e4f4['postproces'+'s'];_0x39c516['nodes']['forEach']((_0x239752,_0x2b0879)=>{if(_0x239752['hasOwnProp'+'erty']('extensions')&&_0x239752['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x239752['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('light')){const _0x33f97c=_0x239752['extensions']['KHR_lights'+'_punctual']['light'],_0x469433=_0x10f9b5[_0x33f97c];if(_0x469433){_0x195e78&&_0x195e78(_0x469433);const _0x33dea0=_0x5af109(_0x469433,_0x401f22[_0x2b0879]);_0x33ba8e&&_0x33ba8e(_0x469433,_0x33dea0),_0x33dea0&&(_0x35aa8a||(_0x35aa8a=new Map()),_0x35aa8a['set'](_0x239752,_0x33dea0));}}});}}return _0x35aa8a;},ZF=(_0x347221,_0x43b9d5,_0x33cbbc)=>{_0x347221['nodes']['forEach'](_0x4e4c52=>{_0x4e4c52['hasOwnProp'+'erty']('mesh')&&_0x4e4c52['hasOwnProp'+'erty']('skin')&&_0x43b9d5[_0x4e4c52['mesh']]['meshes']['forEach'](_0x35d4f2=>{_0x35d4f2['skin']=_0x33cbbc[_0x4e4c52['skin']];});});},QF=async(_0x26a142,_0x3a51de,_0x4ec565,_0x444277,_0x51ba1e)=>{var _0x2ab4ae,_0x2b788e;const _0x3f8827=(_0x2ab4ae=_0x51ba1e==null?void(-0x13a5*-0x1+-0xf97*0x1+-0xad*0x6):_0x51ba1e['global'])==null?void(-0x5c1+-0x22c3+0x2884):_0x2ab4ae['preprocess'],_0x52ad3=(_0x2b788e=_0x51ba1e==null?void(0x13f*-0x18+-0x98*-0x29+0x2*0x2c8):_0x51ba1e['global'])==null?void(0x13d*0x1a+-0x9ad+0x1*-0x1685):_0x2b788e['postproces'+'s'];_0x3f8827&&_0x3f8827(_0x3a51de),_0x3a51de['asset']&&_0x3a51de['asset']['generator']==='PlayCanvas'&&w['warn']('glTF\x20model'+'\x20may\x20have\x20'+'been\x20gener'+'ated\x20with\x20'+'flipped\x20UV'+'s.\x20Please\x20'+'reconvert.');const _0x751c52=new Map(),_0x190d9b=qF(_0x3a51de,_0x51ba1e,_0x751c52),_0xc81e60=jF(_0x3a51de,_0x190d9b),_0x3ec65d=KF(_0x3a51de,_0x190d9b,_0x51ba1e),_0x247f95=YF(_0x3a51de,_0x190d9b,_0x51ba1e),_0x1410b2=WF(_0x3a51de),_0x27e100=await Promise['all'](_0x4ec565),{meshes:_0x593a99,meshVariants:_0xc99a8d,meshDefaultMaterials:_0x3cde58,promises:_0xdb2c76}=GF(_0x26a142,_0x3a51de,_0x27e100,_0x51ba1e),_0x3be219=$F(_0x3a51de,_0x190d9b,_0x27e100,_0x51ba1e);XF(_0x26a142,_0x3a51de,_0x751c52,_0x27e100);const _0x3d2461=await Promise['all'](_0x444277),_0x3984ca=_0x3d2461['map'](_0x26a813=>_0x26a813['resource']),_0x3030c4=HF(_0x3a51de,_0x3984ca,_0x51ba1e),_0x356de1=VF(_0x26a142,_0x3a51de,_0x190d9b,_0x27e100),_0xa80589=[];for(let _0x5dba28=0x14*-0x4a+0x1*-0x1363+0x192b;_0x5dba28<_0x593a99['length'];_0x5dba28++)_0xa80589[_0x5dba28]=new Zp(),_0xa80589[_0x5dba28]['meshes']=_0x593a99[_0x5dba28];ZF(_0x3a51de,_0xa80589,_0x356de1);const _0xc42b2e=new dF();return _0xc42b2e['gltf']=_0x3a51de,_0xc42b2e['nodes']=_0x190d9b,_0xc42b2e['scenes']=_0xc81e60,_0xc42b2e['animations']=_0x3be219,_0xc42b2e['textures']=_0x3d2461,_0xc42b2e['materials']=_0x3030c4,_0xc42b2e['variants']=_0x1410b2,_0xc42b2e['meshVarian'+'ts']=_0xc99a8d,_0xc42b2e['meshDefaul'+'tMaterials']=_0x3cde58,_0xc42b2e['renders']=_0xa80589,_0xc42b2e['skins']=_0x356de1,_0xc42b2e['lights']=_0x3ec65d,_0xc42b2e['cameras']=_0x247f95,_0xc42b2e['nodeInstan'+'cingMap']=_0x751c52,_0x52ad3&&_0x52ad3(_0x3a51de,_0xc42b2e),await Promise['all'](_0xdb2c76),_0xc42b2e;},JF=(_0x142c29,_0x23e4eb)=>{const _0xe4b098=(_0x5ec02e,_0x347346)=>{switch(_0x5ec02e){case 0x1cef+-0x1536+0x1e47:return Te;case-0x2*0x993+0x4663+-0xd3c:return vt;case 0x2d0c+0xd3*0x53+-0x1*0x4a75:return Ph;case 0x2995+-0x1*-0x18d1+-0x1b65:return Dh;case-0x2d44+-0x4c94+0xa0da:return Mh;case-0x316*0x3+0x28*-0xec+0x5525:return ha;default:return _0x347346;}},_0x5c850e=(_0x34cb8b,_0x322952)=>{switch(_0x34cb8b){case-0x63c5*0x1+0x139*0x77+0x5375:return ue;case 0xa437+0x4340*0x3+-0x9*0x1a0f:return Du;case 0x2070+0x146d+-0xbdc:return yt;default:return _0x322952;}};_0x142c29&&(_0x23e4eb=_0x23e4eb??{},_0x142c29['minFilter']=_0xe4b098(_0x23e4eb['minFilter'],ha),_0x142c29['magFilter']=_0xe4b098(_0x23e4eb['magFilter'],vt),_0x142c29['addressU']=_0x5c850e(_0x23e4eb['wrapS'],yt),_0x142c29['addressV']=_0x5c850e(_0x23e4eb['wrapT'],yt));};let eN=-0x691+0x1*0x2417+-0x1d86*0x1;const Qa=_0x20b8a8=>{var _0x50b254,_0x4805a0,_0x1121d9,_0x409544;return((_0x4805a0=(_0x50b254=_0x20b8a8['extensions'])==null?void(-0x3*0x139+-0x24d1+0x287c):_0x50b254['KHR_textur'+'e_basisu'])==null?void(0x1e75+-0x10ac+0x1*-0xdc9):_0x4805a0['source'])??((_0x409544=(_0x1121d9=_0x20b8a8['extensions'])==null?void(-0x137*-0x4+-0x82*0x1f+-0xe*-0xc7):_0x1121d9['EXT_textur'+'e_webp'])==null?void(-0x116*0x14+0x2246+-0xc8e):_0x409544['source'])??_0x20b8a8['source'];},tN=(_0x1f9355,_0x5636fc,_0x6897f5,_0x142c6d,_0x1f16bd)=>{var _0xd934f9,_0x585c59,_0x134e8e;if(!_0x1f9355['images']||_0x1f9355['images']['length']===-0x15ee+0x107b*-0x1+-0x1*-0x2669)return[];const _0x22f179=(_0xd934f9=_0x1f16bd==null?void(-0x2054*0x1+0x21*-0x93+-0x1*-0x3347):_0x1f16bd['image'])==null?void(-0x240f+-0x426+0xd67*0x3):_0xd934f9['preprocess'],_0x529220=(_0x585c59=_0x1f16bd==null?void(0x2f6*0x7+-0x1611+0x157):_0x1f16bd['image'])==null?void(-0x480+-0x9ee*0x2+0x185c):_0x585c59['processAsy'+'nc'],_0x331fa5=(_0x134e8e=_0x1f16bd==null?void(0x1*-0x863+0x15b5*0x1+-0xa*0x155):_0x1f16bd['image'])==null?void(0x19*0xe3+0x7*-0x253+-0x5e6):_0x134e8e['postproces'+'s'],_0xe6b2b9={'image/png':'png','image/jpeg':'jpg','image/basis':'basis','image/ktx':'ktx','image/ktx2':'ktx2','image/vnd-ms.dds':'dds'},_0x5e5497=_0x252d0c=>{const _0x353f09=new Set();return _0x252d0c['hasOwnProp'+'erty']('materials')&&_0x252d0c['materials']['forEach'](_0x43c7a6=>{if(_0x43c7a6['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x10733f=_0x43c7a6['pbrMetalli'+'cRoughness'];if(_0x10733f['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x9659f=_0x252d0c['textures'][_0x10733f['baseColorT'+'exture']['index']];_0x353f09['add'](Qa(_0x9659f));}}if(_0x43c7a6['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x140d98=_0x252d0c['textures'][_0x43c7a6['emissiveTe'+'xture']['index']];_0x353f09['add'](Qa(_0x140d98));}if(_0x43c7a6['hasOwnProp'+'erty']('extensions')){const _0x37d9b2=_0x43c7a6['extensions']['KHR_materi'+'als_sheen'];if(_0x37d9b2&&_0x37d9b2['hasOwnProp'+'erty']('sheenColor'+'Texture')){const _0x167d4d=_0x252d0c['textures'][_0x37d9b2['sheenColor'+'Texture']['index']];_0x353f09['add'](Qa(_0x167d4d));}const _0x5a9338=_0x43c7a6['extensions']['KHR_materi'+'als_pbrSpe'+'cularGloss'+'iness'];if(_0x5a9338&&_0x5a9338['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x54fa07=_0x252d0c['textures'][_0x5a9338['specularGl'+'ossinessTe'+'xture']['index']];_0x353f09['add'](Qa(_0x54fa07));}const _0x15390b=_0x43c7a6['extensions']['KHR_materi'+'als_specul'+'ar'];if(_0x15390b&&_0x15390b['hasOwnProp'+'erty']('specularCo'+'lorTexture')){const _0x129797=_0x252d0c['textures'][_0x15390b['specularCo'+'lorTexture']['index']];_0x353f09['add'](Qa(_0x129797));}}}),_0x353f09;},_0x1e005e=(_0x26539f,_0x16213b,_0x4d26e4,_0x44c802,_0x4ee77d,_0x1df1c8)=>new Promise((_0x53101a,_0x1a8393)=>{const _0x2910ed=_0x25a973=>{const _0x48ff5a=(_0x26539f['name']||'gltf-textu'+'re')+'-'+eN++,_0x3d1642={'url':_0x16213b||_0x48ff5a};if(_0x25a973&&(_0x3d1642['contents']=_0x25a973['slice'](0xc76+0x187c*-0x1+0xc06)['buffer']),_0x44c802){const _0x51ce6f=_0xe6b2b9[_0x44c802];_0x51ce6f&&(_0x3d1642['filename']=_0x3d1642['url']+'.'+_0x51ce6f);}const _0x3c6601={'srgb':_0x1df1c8},_0x379e16=new pe(_0x48ff5a,'texture',_0x3d1642,_0x3c6601,_0x4ee77d);_0x379e16['on']('load',_0x1e4f68=>_0x53101a(_0x1e4f68)),_0x379e16['on']('error',_0x3319b0=>_0x1a8393(_0x3319b0)),_0x142c6d['add'](_0x379e16),_0x142c6d['load'](_0x379e16);};_0x4d26e4?_0x4d26e4['then'](_0x482e84=>_0x2910ed(_0x482e84)):_0x2910ed(null);}),_0x56d9d4=_0x5e5497(_0x1f9355);return _0x1f9355['images']['map']((_0x5cf142,_0x35a0d0)=>{_0x22f179&&_0x22f179(_0x5cf142);let _0x3e4c3b;return _0x529220?_0x3e4c3b=new Promise((_0x26dea6,_0x2caab7)=>{_0x529220(_0x5cf142,(_0x1400f1,_0x1261ff)=>{_0x1400f1?_0x2caab7(_0x1400f1):_0x26dea6(_0x1261ff);});}):_0x3e4c3b=new Promise(_0x619682=>{_0x619682(null);}),_0x3e4c3b=_0x3e4c3b['then'](_0x52da86=>{const _0x2996b3=_0x56d9d4['has'](_0x35a0d0);return _0x52da86||(_0x5cf142['hasOwnProp'+'erty']('uri')?Bv(_0x5cf142['uri'])?_0x1e005e(_0x5cf142,_0x5cf142['uri'],null,fF(_0x5cf142['uri']),null,_0x2996b3):_0x1e005e(_0x5cf142,Vn['test'](_0x5cf142['uri'])?_0x5cf142['uri']:xe['join'](_0x6897f5,_0x5cf142['uri']),null,null,{'crossOrigin':'anonymous'},_0x2996b3):_0x5cf142['hasOwnProp'+'erty']('bufferView')&&_0x5cf142['hasOwnProp'+'erty']('mimeType')?_0x1e005e(_0x5cf142,null,_0x5636fc[_0x5cf142['bufferView']],_0x5cf142['mimeType'],null,_0x2996b3):Promise['reject'](new Error('Invalid\x20im'+'age\x20found\x20'+'in\x20gltf\x20(n'+'either\x20uri'+'\x20or\x20buffer'+'View\x20found'+').\x20index='+_0x35a0d0)));}),_0x331fa5&&(_0x3e4c3b=_0x3e4c3b['then'](_0x11bb93=>(_0x331fa5(_0x5cf142,_0x11bb93),_0x11bb93))),_0x3e4c3b;});},sN=(_0x1e7452,_0x54c548,_0x435b54)=>{var _0x2e728d,_0x3a4772,_0x386fe3,_0x4b4768,_0x2700b4;if(!((_0x2e728d=_0x1e7452==null?void(-0x2*-0x6a1+-0x1*-0x1145+-0x1e87):_0x1e7452['images'])!=null&&_0x2e728d['length'])||!((_0x3a4772=_0x1e7452==null?void(-0x4b1*0x4+-0x3b*0x67+0x2a81):_0x1e7452['textures'])!=null&&_0x3a4772['length']))return[];const _0x57dc31=(_0x386fe3=_0x435b54==null?void(0x1*-0x22d8+-0x1d35+0x400d):_0x435b54['texture'])==null?void(-0x2147+0x1573+0xbd4):_0x386fe3['preprocess'],_0x283368=(_0x4b4768=_0x435b54==null?void(-0x1966+-0xe*-0x1ca+0x1*0x5a):_0x435b54['texture'])==null?void(0x26d1+-0x26ef+0xf*0x2):_0x4b4768['processAsy'+'nc'],_0x54d10b=(_0x2700b4=_0x435b54==null?void(0x847+-0xb87+-0x1a*-0x20):_0x435b54['texture'])==null?void(0x7*0x43+0xa98+0xc6d*-0x1):_0x2700b4['postproces'+'s'],_0x45c3d1=new Set();return _0x1e7452['textures']['map'](_0x2b30f5=>{_0x57dc31&&_0x57dc31(_0x2b30f5);let _0x346325;return _0x283368?_0x346325=new Promise((_0x342656,_0x3f1e34)=>{_0x283368(_0x2b30f5,_0x1e7452['images'],(_0x121ddc,_0x1e4624)=>{_0x121ddc?_0x3f1e34(_0x121ddc):_0x342656(_0x1e4624);});}):_0x346325=new Promise(_0x360c03=>{_0x360c03(null);}),_0x346325=_0x346325['then'](_0x355057=>{_0x355057=_0x355057??Qa(_0x2b30f5);const _0x240e66=_0x45c3d1['has'](_0x355057);return _0x45c3d1['add'](_0x355057),_0x54c548[_0x355057]['then'](_0x503927=>{const _0x3f79a1=_0x240e66?yF(_0x503927):_0x503927;return JF(_0x3f79a1['resource'],(_0x1e7452['samplers']??[])[_0x2b30f5['sampler']]),_0x3f79a1;});}),_0x54d10b&&(_0x346325=_0x346325['then'](_0x42a392=>(_0x54d10b(_0x2b30f5,_0x42a392),_0x42a392))),_0x346325;});},iN=(_0x499792,_0x18ab79,_0xb0a8b9,_0x266966)=>{var _0x234805,_0x28146e,_0x187459;if(!_0x499792['buffers']||_0x499792['buffers']['length']===0x23b6+0x619+-0x4d*0x8b)return[];const _0x488b04=(_0x234805=_0x266966==null?void(-0x1*0x21cb+0x23ab*-0x1+0x4576):_0x266966['buffer'])==null?void(0x1*-0xdca+-0x10fd+-0x1*-0x1ec7):_0x234805['preprocess'],_0x326e10=(_0x28146e=_0x266966==null?void(0x1dac*-0x1+0x463*-0x1+-0x1*-0x220f):_0x266966['buffer'])==null?void(-0x19*0x2d+0x12b9*0x2+0x1*-0x210d):_0x28146e['processAsy'+'nc'],_0x65b26b=(_0x187459=_0x266966==null?void(-0x1bab*-0x1+-0x874*0x2+-0x5*0x227):_0x266966['buffer'])==null?void(-0x1*0x16bf+0x1f72+-0x8b3):_0x187459['postproces'+'s'];return _0x499792['buffers']['map']((_0x54b179,_0x56329c)=>{_0x488b04&&_0x488b04(_0x54b179);let _0x30f7a8;return _0x326e10?_0x30f7a8=new Promise((_0x37590f,_0x1bfae3)=>{_0x326e10(_0x54b179,(_0x94674c,_0x94128c)=>{_0x94674c?_0x1bfae3(_0x94674c):_0x37590f(_0x94128c);});}):_0x30f7a8=new Promise(_0x5c2773=>{_0x5c2773(null);}),_0x30f7a8=_0x30f7a8['then'](_0x253e81=>{if(_0x253e81)return _0x253e81;if(_0x54b179['hasOwnProp'+'erty']('uri')){if(Bv(_0x54b179['uri'])){const _0x1a1e77=atob(_0x54b179['uri']['split'](',')[0x207e+-0x10e*0x15+0x1*-0xa57]),_0x425d9c=new Uint8Array(_0x1a1e77['length']);for(let _0x55fa9b=-0x1*0x1d21+0x1*-0x82+0x119*0x1b;_0x55fa9b<_0x1a1e77['length'];_0x55fa9b++)_0x425d9c[_0x55fa9b]=_0x1a1e77['charCodeAt'](_0x55fa9b);return _0x425d9c;}return new Promise((_0x2013e3,_0x26e477)=>{ot['get'](Vn['test'](_0x54b179['uri'])?_0x54b179['uri']:xe['join'](_0xb0a8b9,_0x54b179['uri']),{'cache':!(0x86*0x3e+0x182*0x4+-0x267c),'responseType':'arraybuffe'+'r','retry':!(0x248*0x1+-0x4*-0x211+0xa8b*-0x1)},(_0x26b562,_0x1c7074)=>{_0x26b562?_0x26e477(_0x26b562):_0x2013e3(new Uint8Array(_0x1c7074));});});}return _0x18ab79;}),_0x65b26b&&(_0x30f7a8=_0x30f7a8['then'](_0x50308b=>(_0x65b26b(_0x499792['buffers'][_0x56329c],_0x50308b),_0x50308b))),_0x30f7a8;});},rN=(_0x5892e7,_0x45a21e)=>{const _0x2e6ff0=JSON['parse']((_0x2084c5=>{if(typeof TextDecoder<'u')return new TextDecoder()['decode'](_0x2084c5);let _0x58308e='';for(let _0x5249c1=0x1*0x26f8+0xcfc*0x1+-0x33f4;_0x5249c1<_0x2084c5['length'];_0x5249c1++)_0x58308e+=String['fromCharCo'+'de'](_0x2084c5[_0x5249c1]);return decodeURIComponent(escape(_0x58308e));})(_0x5892e7));if(_0x2e6ff0['asset']&&_0x2e6ff0['asset']['version']&&parseFloat(_0x2e6ff0['asset']['version'])<-0x152*0xe+-0x39*0x39+0x1f2f){_0x45a21e('Invalid\x20gl'+'tf\x20version'+'.\x20Expected'+'\x20version\x202'+'.0\x20or\x20abov'+'e\x20but\x20foun'+'d\x20version\x20'+'\x27'+_0x2e6ff0['asset']['version']+'\x27.');return;}_0x45a21e(null,_0x2e6ff0);},aN=(_0x3f6558,_0xbc7067)=>{const _0x2afb5e=_0x3f6558 instanceof ArrayBuffer?new DataView(_0x3f6558):new DataView(_0x3f6558['buffer'],_0x3f6558['byteOffset'],_0x3f6558['byteLength']),_0x1ac9b8=_0x2afb5e['getUint32'](-0x1ac9+0x13*-0x1e7+0x3eee,!(0xb0c+-0x1759*0x1+-0xc4d*-0x1)),_0x335d98=_0x2afb5e['getUint32'](-0x11e3+0x2*-0x1345+0x1*0x3871,!(-0x12*0x95+-0x1*-0x839+0x1*0x241)),_0x513865=_0x2afb5e['getUint32'](-0x71a+-0x1*0x1f0f+0x3*0xcbb,!(-0x2f*-0x5f+0x3*0x2fc+-0x1*0x1a65));if(_0x1ac9b8!==0x2*-0x30e8c175+0x2d51d100+0x7ad41e51){_0xbc7067('Invalid\x20ma'+'gic\x20number'+'\x20found\x20in\x20'+'glb\x20header'+'.\x20Expected'+'\x200x46546C6'+'7,\x20found\x200'+'x'+_0x1ac9b8['toString'](0x923+0x1d*-0x1a+-0x3*0x20b));return;}if(_0x335d98!==-0x50d*0x7+-0x1*0x16dd+0x3a3a){_0xbc7067('Invalid\x20ve'+'rsion\x20numb'+'er\x20found\x20i'+'n\x20glb\x20head'+'er.\x20Expect'+'ed\x202,\x20foun'+'d\x20'+_0x335d98);return;}if(_0x513865<=-0x1b15+0x2*-0xc75+0x33*0x105||_0x513865>_0x2afb5e['byteLength']){_0xbc7067('Invalid\x20le'+'ngth\x20found'+'\x20in\x20glb\x20he'+'ader.\x20Foun'+'d\x20'+_0x513865);return;}const _0x5e2838=[];let _0x5741ef=-0x265*0xb+0x1c28+0x1c5*-0x1;for(;_0x5741ef<_0x513865;){const _0x16eaf2=_0x2afb5e['getUint32'](_0x5741ef,!(-0x1*0x2622+-0x92d*-0x1+0x161*0x15));_0x5741ef+_0x16eaf2+(-0x2*0x134f+0x1*-0xe5+-0x278b*-0x1)>_0x2afb5e['byteLength']&&_0xbc7067('Invalid\x20ch'+'unk\x20length'+'\x20found\x20in\x20'+'glb.\x20Found'+'\x20'+_0x16eaf2);const _0x217f05=_0x2afb5e['getUint32'](_0x5741ef+(0x23d9+-0xa2c+-0x19a9),!(-0x89d+-0x2*0x1206+-0x135*-0x25)),_0x1d07b6=new Uint8Array(_0x2afb5e['buffer'],_0x2afb5e['byteOffset']+_0x5741ef+(-0x121b+-0x6cb+-0xc77*-0x2),_0x16eaf2);_0x5e2838['push']({'length':_0x16eaf2,'type':_0x217f05,'data':_0x1d07b6}),_0x5741ef+=_0x16eaf2+(-0x1a5+0x1e27+-0x51*0x5a);}if(_0x5e2838['length']!==-0x1f93+0x1d3a+0x25a&&_0x5e2838['length']!==-0x1093*-0x1+-0xd*0xb2+0x2f*-0x29){_0xbc7067('Invalid\x20nu'+'mber\x20of\x20ch'+'unks\x20found'+'\x20in\x20glb\x20fi'+'le.');return;}if(_0x5e2838[-0x1*-0x1ced+0x268b*-0x1+0x99e]['type']!==0x8b9f1872+0x178*-0x59530b+0x45e23300){_0xbc7067('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x4'+'E4F534A,\x20f'+'ound\x200x'+_0x5e2838[-0x24d0+0x16d1+0x1*0xdff]['type']['toString'](-0x1*0x371+0xa76+-0x89*0xd));return;}if(_0x5e2838['length']>0x15ed+0x2273+0x385f*-0x1&&_0x5e2838[-0x20ad+-0x23a0+-0x2*-0x2227]['type']!==0x6de5cd+0x7ef944+-0x9e95cf){_0xbc7067('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x0'+'04E4942,\x20f'+'ound\x200x'+_0x5e2838[0x1f5+-0x1be9+0x19f5]['type']['toString'](-0x76*-0x1a+0x245b+0x11*-0x2d7));return;}_0xbc7067(null,{'gltfChunk':_0x5e2838[-0xc65+0x131c+-0x6b7]['data'],'binaryChunk':_0x5e2838['length']===0x1791+0x1*0x2ce+-0x1a5d?_0x5e2838[0x1592+-0x11e9+-0x9c*0x6]['data']:null});},nN=(_0x448d79,_0x14cf2b,_0x4d8179)=>{const _0x2e7f9d=()=>{const _0xf2cdb1=new Uint8Array(_0x14cf2b);return _0xf2cdb1[-0x106+0x1873+-0x176d*0x1]===-0x2*-0x53e+0x28c*0x8+-0x1*0x1e75&&_0xf2cdb1[-0xc2*-0x25+-0x20a0+-0xeb*-0x5]===0x3*-0xa7f+0x5d2+0x1a17&&_0xf2cdb1[-0x2476+0x1*0x1016+0x2*0xa31]===-0x63*-0x50+-0x107+-0x1d95&&_0xf2cdb1[-0x2002+0x8*-0x27+0x213d]===-0x6d6*0x5+-0x19b0*0x1+0xf09*0x4;};_0x448d79&&_0x448d79['toLowerCas'+'e']()['endsWith']('.glb')||_0x2e7f9d()?aN(_0x14cf2b,_0x4d8179):_0x4d8179(null,{'gltfChunk':_0x14cf2b,'binaryChunk':null});},oN=(_0x70d89c,_0x18b124,_0x38e863)=>{var _0x498ed7,_0x26d3d7,_0xb4cdd4,_0xd8a2e2;const _0x4703b8=[],_0x56410e=(_0x498ed7=_0x38e863==null?void(0x22b7+0x1d2e*0x1+-0xb*0x5cf):_0x38e863['bufferView'])==null?void(-0x1*-0x1f2d+0x164b*-0x1+-0x8e2):_0x498ed7['preprocess'],_0x487096=(_0x26d3d7=_0x38e863==null?void(0x24c6+0x1143+-0x3609):_0x38e863['bufferView'])==null?void(-0x1*0x1597+0x190e+-0x1*0x377):_0x26d3d7['processAsy'+'nc'],_0x1abfc8=(_0xb4cdd4=_0x38e863==null?void(-0xbf9+0x1a*0x53+0x38b):_0x38e863['bufferView'])==null?void(0x816+0x1e52*0x1+-0x2668):_0xb4cdd4['postproces'+'s'];if(!((_0xd8a2e2=_0x70d89c['bufferView'+'s'])!=null&&_0xd8a2e2['length']))return _0x4703b8;for(let _0x325618=-0x57*0x59+-0x112*0x17+0x5*0xaf9;_0x325618<_0x70d89c['bufferView'+'s']['length'];++_0x325618){const _0x1bc4c4=_0x70d89c['bufferView'+'s'][_0x325618];_0x56410e&&_0x56410e(_0x1bc4c4);let _0x1523fe;_0x487096?_0x1523fe=new Promise((_0x12c2c0,_0x350fd7)=>{_0x487096(_0x1bc4c4,_0x18b124,(_0x30a48a,_0x35c291)=>{_0x30a48a?_0x350fd7(_0x30a48a):_0x12c2c0(_0x35c291);});}):_0x1523fe=new Promise(_0x3cdbfc=>{_0x3cdbfc(null);}),_0x1523fe=_0x1523fe['then'](_0x126747=>_0x126747||_0x18b124[_0x1bc4c4['buffer']]['then'](_0x83712=>new Uint8Array(_0x83712['buffer'],_0x83712['byteOffset']+(_0x1bc4c4['byteOffset']||-0x5c2+-0x7*0x31c+0x1b86),_0x1bc4c4['byteLength']))),_0x1bc4c4['hasOwnProp'+'erty']('byteStride')&&(_0x1523fe=_0x1523fe['then'](_0x55ed16=>(_0x55ed16['byteStride']=_0x1bc4c4['byteStride'],_0x55ed16))),_0x1abfc8&&(_0x1523fe=_0x1523fe['then'](_0xa44f1e=>(_0x1abfc8(_0x1bc4c4,_0xa44f1e),_0xa44f1e))),_0x4703b8['push'](_0x1523fe);}return _0x4703b8;};class mh{static['parse'](_0x4799e4,_0x387ca8,_0x5cf5eb,_0x14c72c,_0x116d66,_0x414788,_0x186e28){nN(_0x4799e4,_0x5cf5eb,(_0x22b796,_0x5942d5)=>{if(_0x22b796){_0x186e28(_0x22b796);return;}rN(_0x5942d5['gltfChunk'],(_0x167515,_0x279e91)=>{if(_0x167515){_0x186e28(_0x167515);return;}const _0x18bfe3=iN(_0x279e91,_0x5942d5['binaryChun'+'k'],_0x387ca8,_0x414788),_0x209ff7=oN(_0x279e91,_0x18bfe3,_0x414788),_0x202ff9=tN(_0x279e91,_0x209ff7,_0x387ca8,_0x116d66,_0x414788),_0x4b82e4=sN(_0x279e91,_0x202ff9,_0x414788);QF(_0x14c72c,_0x279e91,_0x209ff7,_0x4b82e4,_0x414788)['then'](_0x5886e6=>_0x186e28(null,_0x5886e6))['catch'](_0x25b27b=>_0x186e28(_0x25b27b));});});}static['createDefa'+'ultMateria'+'l'](){return Vv({'name':'defaultGlb'+'Material'},[]);}}class lN extends Qe{constructor(_0x7c34fc){super(_0x7c34fc,'animation'),this['device']=_0x7c34fc['graphicsDe'+'vice'],this['assets']=_0x7c34fc['assets'];}['load'](_0x1bf5e1,_0x1a580c,_0x5c622d){typeof _0x1bf5e1=='string'&&(_0x1bf5e1={'load':_0x1bf5e1,'original':_0x1bf5e1});const _0x37f670={'retry':this['maxRetries']>0x9ff*-0x2+0x1485+-0x87,'maxRetries':this['maxRetries']};(_0x1bf5e1['load']['startsWith']('blob:')||_0x1bf5e1['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x1bf5e1['original'])['toLowerCas'+'e']()==='.glb'?_0x37f670['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x37f670['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x1bf5e1['load'],_0x37f670,(_0x5e7b8d,_0x572560)=>{_0x5e7b8d?_0x1a580c('Error\x20load'+'ing\x20animat'+'ion\x20resour'+'ce:\x20'+_0x1bf5e1['original']+'\x20['+_0x5e7b8d+']'):xe['getExtensi'+'on'](_0x1bf5e1['original'])['toLowerCas'+'e']()==='.glb'?mh['parse']('filename.g'+'lb','',_0x572560,this['device'],this['assets'],(_0x5c622d==null?void(0x236d+-0x6cc*-0x4+-0x3e9d):_0x5c622d['options'])??{},(_0x4303c8,_0x43fe4e)=>{var _0x19789f;if(_0x4303c8)_0x1a580c(_0x4303c8);else{const _0x40ae47=_0x43fe4e['animations'];if((_0x19789f=_0x5c622d==null?void(0xc0e+-0x1d50+0x1142):_0x5c622d['data'])!=null&&_0x19789f['events']){for(let _0x2accbf=-0x3*0x23+-0x1666+0x16cf;_0x2accbf<_0x40ae47['length'];_0x2accbf++)_0x40ae47[_0x2accbf]['events']=new ov(Object['values'](_0x5c622d['data']['events']));}_0x43fe4e['destroy'](),_0x1a580c(null,_0x40ae47);}}):_0x1a580c(null,this['_parseAnim'+'ationV'+_0x572560['animation']['version']](_0x572560));});}['open'](_0x580230,_0x4bec00,_0x1e8ad4){return _0x4bec00;}['_parseAnim'+'ationV3'](_0x2b2df9){const _0x4f8b25=_0x2b2df9['animation'],_0x5e35e6=new U_();_0x5e35e6['name']=_0x4f8b25['name'],_0x5e35e6['duration']=_0x4f8b25['duration'];for(let _0x585433=-0x1*-0x225b+-0x183+-0x41b*0x8;_0x585433<_0x4f8b25['nodes']['length'];_0x585433++){const _0x486bb3=new k_(),_0x262f10=_0x4f8b25['nodes'][_0x585433];_0x486bb3['_name']=_0x262f10['name'];for(let _0x47660a=0xdf3*0x1+0x2*-0x1+0x2b*-0x53;_0x47660a<_0x262f10['keys']['length'];_0x47660a++){const _0x101ee1=_0x262f10['keys'][_0x47660a],_0x47fffc=_0x101ee1['time'],_0xb0992c=_0x101ee1['pos'],_0xbca4d4=_0x101ee1['rot'],_0x6a617f=_0x101ee1['scale'],_0x4b8bf3=new D(_0xb0992c[0x23e5+-0x1*-0x1186+-0x356b],_0xb0992c[-0x2*-0x79+-0xb*-0x315+-0x2*0x116c],_0xb0992c[-0x141b*-0x1+0x20d7+-0x16*0x268]),_0x41b6f4=new le()['setFromEul'+'erAngles'](_0xbca4d4[-0xb3f*0x3+0x3cd*-0x4+0x30f1*0x1],_0xbca4d4[0x26b3+-0x1d4f+0x321*-0x3],_0xbca4d4[0x1270+0x1734+-0x29a2]),_0x6afdf4=new D(_0x6a617f[0x91f*-0x1+-0x123f+0x1b5e],_0x6a617f[-0xf*0x165+0x1607+-0x11b],_0x6a617f[0xd*0x72+0x12*0x166+-0x1ef4]),_0x534fa9=new N_(_0x47fffc,_0x4b8bf3,_0x41b6f4,_0x6afdf4);_0x486bb3['_keys']['push'](_0x534fa9);}_0x5e35e6['addNode'](_0x486bb3);}return _0x5e35e6;}['_parseAnim'+'ationV4'](_0x30cd4c){const _0xc56472=_0x30cd4c['animation'],_0x3ce3cb=new U_();_0x3ce3cb['name']=_0xc56472['name'],_0x3ce3cb['duration']=_0xc56472['duration'];for(let _0x374bb0=-0x1b5+0xfd3*-0x2+0x215b;_0x374bb0<_0xc56472['nodes']['length'];_0x374bb0++){const _0x4bb9bd=new k_(),_0x28fef9=_0xc56472['nodes'][_0x374bb0];_0x4bb9bd['_name']=_0x28fef9['name'];const _0x8d8c13=_0x28fef9['defaults']['p'],_0x53edd9=_0x28fef9['defaults']['r'],_0x16994c=_0x28fef9['defaults']['s'];for(let _0x1fa035=0x47d*0x8+0xc3*-0x2e+-0xde;_0x1fa035<_0x28fef9['keys']['length'];_0x1fa035++){const _0x51fd9c=_0x28fef9['keys'][_0x1fa035],_0x3333d8=_0x51fd9c['t'],_0x1979c5=_0x8d8c13||_0x51fd9c['p'],_0x30ec6c=_0x53edd9||_0x51fd9c['r'],_0x115587=_0x16994c||_0x51fd9c['s'],_0x3c1697=new D(_0x1979c5[-0x1*0x493+0x3a3*-0x4+0x1*0x131f],_0x1979c5[0x67*0x35+-0x1d5*-0x11+-0x3477],_0x1979c5[0x1*0x10dc+0x13d9+0x24b3*-0x1]),_0x3b035b=new le()['setFromEul'+'erAngles'](_0x30ec6c[0x10d6+-0xa07*-0x1+-0x1add],_0x30ec6c[-0xcf2+0xa0d+-0x7*-0x6a],_0x30ec6c[0x47*-0x65+-0x1bf8+-0x1*-0x37fd]),_0x4ba7cf=new D(_0x115587[0xa9a+0x716+0x10*-0x11b],_0x115587[0x730+-0xd24+0x5f5],_0x115587[0x3*0x25+-0x5*-0x368+-0x6d*0x29]),_0x5a0b6f=new N_(_0x3333d8,_0x3c1697,_0x3b035b,_0x4ba7cf);_0x4bb9bd['_keys']['push'](_0x5a0b6f);}_0x3ce3cb['addNode'](_0x4bb9bd);}return _0x3ce3cb;}}class cN extends Qe{constructor(_0x2fa4a7){super(_0x2fa4a7,'animclip');}['load'](_0x2dd8a9,_0x6e8ac5){typeof _0x2dd8a9=='string'&&(_0x2dd8a9={'load':_0x2dd8a9,'original':_0x2dd8a9});const _0x5df96e={'retry':this['maxRetries']>-0x10ce+-0x1*0x1707+-0x39f*-0xb,'maxRetries':this['maxRetries']};_0x2dd8a9['load']['startsWith']('blob:')&&(_0x5df96e['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x2dd8a9['load'],_0x5df96e,(_0x1df5c7,_0x30fb0a)=>{_0x1df5c7?_0x6e8ac5('Error\x20load'+'ing\x20animat'+'ion\x20clip\x20r'+'esource:\x20'+_0x2dd8a9['original']+'\x20['+_0x1df5c7+']'):_0x6e8ac5(null,_0x30fb0a);});}['open'](_0x5e85b0,_0x42b370){const _0x502bc0=_0x42b370['name'],_0x19606d=_0x42b370['duration'],_0x3052e7=_0x42b370['inputs']['map'](_0x3ae5f0=>new uh(0x3*0x815+0x77*0xb+-0x9*0x343,_0x3ae5f0)),_0x3a2176=_0x42b370['outputs']['map'](_0x21c0bd=>new uh(_0x21c0bd['components'],_0x21c0bd['data'])),_0x3ad20c=_0x42b370['curves']['map'](_0x170661=>new Uv([_0x170661['path']],_0x170661['inputIndex'],_0x170661['outputInde'+'x'],_0x170661['interpolat'+'ion']));return new Zi(_0x502bc0,_0x19606d,_0x3052e7,_0x3a2176,_0x3ad20c);}}class hN extends Qe{constructor(_0x3d325c){super(_0x3d325c,'animstateg'+'raph');}['load'](_0x3d915e,_0x542e30){typeof _0x3d915e=='string'&&(_0x3d915e={'load':_0x3d915e,'original':_0x3d915e});const _0x7dc62c={'retry':this['maxRetries']>-0x4a*-0x36+0x106c+-0x2008,'maxRetries':this['maxRetries']};_0x3d915e['load']['startsWith']('blob:')&&(_0x7dc62c['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x3d915e['load'],_0x7dc62c,(_0x12b3ba,_0x19c239)=>{_0x12b3ba?_0x542e30('Error\x20load'+'ing\x20animat'+'ion\x20state\x20'+'graph\x20reso'+'urce:\x20'+_0x3d915e['original']+'\x20['+_0x12b3ba+']'):_0x542e30(null,_0x19c239);});}['open'](_0x512e23,_0x55537a){return new Ic(_0x55537a);}}const rf=(function(){if(typeof window>'u')return!(0x166d*-0x1+-0x1972+0x2fe0);const _0x416ded=window['navigator']['userAgent'],_0x40b631=_0x416ded['indexOf']('MSIE\x20');if(_0x40b631>-0x3d*0x1+-0x1*0x5f1+0x71*0xe)return parseInt(_0x416ded['substring'](_0x40b631+(-0x2245+0x2030+0x21a),_0x416ded['indexOf']('.',_0x40b631)),0xb8f+0x1ace+-0x2653);if(_0x416ded['indexOf']('Trident/')>-0x1103+0x25de*0x1+-0x119*0x13){const _0x5640ee=_0x416ded['indexOf']('rv:');return parseInt(_0x416ded['substring'](_0x5640ee+(-0x1618+0x251b+0x20*-0x78),_0x416ded['indexOf']('.',_0x5640ee)),0x851+-0x43*-0x41+-0x194a);}return!(-0x1*-0x21b3+0x215e+-0x4310);}()),dN=['.ogg','.mp3','.wav','.mp4a','.m4a','.mp4','.aac','.opus'];class fN extends Qe{constructor(_0x3f547b){super(_0x3f547b,'audio'),this['manager']=_0x3f547b['soundManag'+'er'],w['assert'](this['manager'],'AudioHandl'+'er\x20cannot\x20'+'be\x20created'+'\x20without\x20s'+'ound\x20manag'+'er');}['_isSupport'+'ed'](_0x54d484){const _0x1a709c=xe['getExtensi'+'on'](_0x54d484);return dN['indexOf'](_0x1a709c)>-(-0x81*-0x9+0x2190+-0x2618)||_0x54d484['startsWith']('blob:');}['load'](_0x35ddea,_0x398d31){typeof _0x35ddea=='string'&&(_0x35ddea={'load':_0x35ddea,'original':_0x35ddea});const _0x1f141f=function(_0xb53dd){_0x398d31(null,new qT(_0xb53dd));},_0x5edaa5=function(_0x429479){let _0x1889e9='Error\x20load'+'ing\x20audio\x20'+'url:\x20'+_0x35ddea['original'];_0x429479&&(_0x1889e9+=':\x20'+(_0x429479['message']||_0x429479)),console['warn'](_0x1889e9),_0x398d31(_0x1889e9);};if(this['_createSou'+'nd']){if(!this['_isSupport'+'ed'](_0x35ddea['original'])){_0x5edaa5('Audio\x20form'+'at\x20for\x20'+_0x35ddea['original']+('\x20not\x20suppo'+'rted'));return;}this['_createSou'+'nd'](_0x35ddea['load'],_0x1f141f,_0x5edaa5);}else _0x5edaa5(null);}['_createSou'+'nd'](_0x3edea9,_0x1dfddc,_0x35bf61){if(gl()){const _0x32313a=this['manager'];if(!_0x32313a['context']){_0x35bf61('Audio\x20mana'+'ger\x20has\x20no'+'\x20audio\x20con'+'text');return;}const _0x3eb8f5={'retry':this['maxRetries']>0x489*0x6+-0x1127+-0xa0f,'maxRetries':this['maxRetries']};(_0x3edea9['startsWith']('blob:')||_0x3edea9['startsWith']('data:'))&&(_0x3eb8f5['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']),ot['get'](_0x3edea9,_0x3eb8f5,(_0xa71405,_0x1e63a7)=>{if(_0xa71405){_0x35bf61(_0xa71405);return;}_0x32313a['context']['decodeAudi'+'oData'](_0x1e63a7,_0x1dfddc,_0x35bf61);});}else{let _0xe776d8=null;try{_0xe776d8=new Audio();}catch{_0x35bf61('No\x20support'+'\x20for\x20Audio'+'\x20element');return;}rf&&document['body']['appendChil'+'d'](_0xe776d8);const _0x4cc600=function(){_0xe776d8['removeEven'+'tListener']('canplaythr'+'ough',_0x4cc600),rf&&document['body']['removeChil'+'d'](_0xe776d8),_0x1dfddc(_0xe776d8);};_0xe776d8['onerror']=function(){_0xe776d8['onerror']=null,rf&&document['body']['removeChil'+'d'](_0xe776d8),_0x35bf61();},_0xe776d8['addEventLi'+'stener']('canplaythr'+'ough',_0x4cc600),_0xe776d8['src']=_0x3edea9;}}}class uN extends Qe{constructor(_0x5402e8){super(_0x5402e8,'binary');}['load'](_0x467186,_0x31abe7){typeof _0x467186=='string'&&(_0x467186={'load':_0x467186,'original':_0x467186}),ot['get'](_0x467186['load'],{'responseType':Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER'],'retry':this['maxRetries']>-0x3c7*0x7+-0x1899*-0x1+0x3b*0x8,'maxRetries':this['maxRetries']},(_0x143786,_0x23e3e1)=>{_0x143786?_0x31abe7('Error\x20load'+'ing\x20binary'+'\x20resource:'+'\x20'+_0x467186['original']+'\x20['+_0x143786+']'):_0x31abe7(null,_0x23e3e1);});}['openBinary'](_0x3c9b36){return _0x3c9b36['buffer'];}}class mr{constructor(_0xe7a15f,_0x27276e,_0x1f1b52,_0x49c64e){const _0x475f2b=function(_0x5cd41b,_0x2fe773,_0xc63379){const _0x22e339=mr['createAsse'+'t'](_0x27276e['name'],_0x5cd41b,_0x2fe773,_0xc63379);return _0x1f1b52['add'](_0x22e339),_0x22e339;},_0x3e9dbc=[];for(let _0x35b2e4=0xe8+-0xe03*0x1+0xd1b;_0x35b2e4<_0xe7a15f['renders']['length'];++_0x35b2e4)_0x3e9dbc['push'](_0x475f2b('render',_0xe7a15f['renders'][_0x35b2e4],_0x35b2e4));const _0x2dc7d4=[];for(let _0x19db44=-0x2255+0x1*0xdf+-0x1*-0x2176;_0x19db44<_0xe7a15f['materials']['length'];++_0x19db44)_0x2dc7d4['push'](_0x475f2b('material',_0xe7a15f['materials'][_0x19db44],_0x19db44));const _0x2d3c3e=[];for(let _0x42575a=-0x32*0x41+-0x1*-0xcf1+-0x3f;_0x42575a<_0xe7a15f['animations']['length'];++_0x42575a)_0x2d3c3e['push'](_0x475f2b('animation',_0xe7a15f['animations'][_0x42575a],_0x42575a));this['data']=_0xe7a15f,this['_model']=null,this['_assetName']=_0x27276e['name'],this['_assets']=_0x1f1b52,this['_defaultMa'+'terial']=_0x49c64e,this['renders']=_0x3e9dbc,this['materials']=_0x2dc7d4,this['textures']=_0xe7a15f['textures'],this['animations']=_0x2d3c3e;}get['model'](){if(!this['_model']){const _0x558e24=mr['createMode'+'l'](this['data'],this['_defaultMa'+'terial']),_0x22e25e=mr['createAsse'+'t'](this['_assetName'],'model',_0x558e24,-0xbf*0x23+-0x1*-0xdc7+-0x1*-0xc56);this['_assets']['add'](_0x22e25e),this['_model']=_0x22e25e;}return this['_model'];}static['createAsse'+'t'](_0x45de0b,_0x5cc858,_0x14b660,_0x2fa0f5){const _0x3d0c80=new pe(_0x45de0b+'/'+_0x5cc858+'/'+_0x2fa0f5,_0x5cc858,{'url':''});return _0x3d0c80['resource']=_0x14b660,_0x3d0c80['loaded']=!(-0x21df+0xc90+0x154f),_0x3d0c80;}['instantiat'+'eModelEnti'+'ty'](_0x3a3d98){const _0x1570bf=new lt(void(-0x3ad*-0x2+-0x1*-0x1237+-0x1991),this['_assets']['_loader']['_app']);return _0x1570bf['addCompone'+'nt']('model',Object['assign']({'type':'asset','asset':this['model']},_0x3a3d98)),_0x1570bf;}['instantiat'+'eRenderEnt'+'ity'](_0x2f5591){const _0x1bc7ae=this['_defaultMa'+'terial'],_0x45278d=[],_0x4be402=function(_0x3d1917,_0x478776,_0x142fab,_0x551226,_0x15eb38,_0x52fd9d,_0x1c0d40,_0x2e0e1a){const _0x11f154=_0x15eb38[_0x142fab['id']],_0x3872e3=_0x11f154===void(0x1dfc+0x233+-0x202f)?_0x1bc7ae:_0x551226[_0x11f154],_0x5a479a=new He(_0x142fab,_0x3872e3);_0x142fab['morph']&&(_0x5a479a['morphInsta'+'nce']=new _a(_0x142fab['morph'])),_0x1c0d40['hasOwnProp'+'erty']('skin')&&_0x45278d['push']({'meshInstance':_0x5a479a,'rootBone':_0x3d1917,'entity':_0x478776});const _0x14153f=_0x2e0e1a['get'](_0x1c0d40);if(_0x14153f){const _0x5629c1=_0x14153f['matrices'],_0x2ba026=kt['getDefault'+'Instancing'+'Format'](_0x142fab['device']),_0x45e9c1=new Ds(_0x142fab['device'],_0x2ba026,_0x5629c1['length']/(0x161*-0xb+0x1b9f+-0xc64),{'data':_0x5629c1});_0x5a479a['setInstanc'+'ing'](_0x45e9c1),_0x5a479a['instancing'+'Data']['_destroyVe'+'rtexBuffer']=!(0x1309+-0x2*0xec+0x1b*-0xa3);}return _0x5a479a;},_0x3d831b=(_0x3343a2,_0x550ba1,_0x526032)=>{const _0x484a3b=new lt(void(-0x3*0x5b3+0x4e*-0x57+0x3*0xe89),this['_assets']['_loader']['_app']);_0x550ba1['_cloneInte'+'rnal'](_0x484a3b),_0x3343a2||(_0x3343a2=_0x484a3b);let _0x1dc709=null,_0x5e4fd1=null;for(let _0x21e063=-0x10d*-0x8+-0x483*-0x1+0x1*-0xceb;_0x21e063<_0x526032['nodes']['length'];_0x21e063++)if(_0x526032['nodes'][_0x21e063]===_0x550ba1){const _0x97f846=_0x526032['gltf']['nodes'][_0x21e063];if(_0x97f846['hasOwnProp'+'erty']('mesh')){const _0x48d895=_0x526032['renders'][_0x97f846['mesh']]['meshes'];_0x5e4fd1=this['renders'][_0x97f846['mesh']];for(let _0x132a08=0x162d+-0xc5*-0x2+-0x17b7;_0x132a08<_0x48d895['length'];_0x132a08++){const _0x50d622=_0x48d895[_0x132a08];if(_0x50d622){const _0x137409=_0x4be402(_0x3343a2,_0x484a3b,_0x50d622,_0x526032['materials'],_0x526032['meshDefaul'+'tMaterials'],_0x526032['skins'],_0x97f846,_0x526032['nodeInstan'+'cingMap']);_0x1dc709||(_0x1dc709=[]),_0x1dc709['push'](_0x137409);}}}if(_0x526032['lights']){const _0x54c5a0=_0x526032['lights']['get'](_0x97f846);_0x54c5a0&&_0x484a3b['addChild'](_0x54c5a0['clone']());}if(_0x526032['cameras']){const _0x378da7=_0x526032['cameras']['get'](_0x97f846);_0x378da7&&_0x378da7['camera']['system']['cloneCompo'+'nent'](_0x378da7,_0x484a3b);}}_0x1dc709&&(_0x484a3b['addCompone'+'nt']('render',Object['assign']({'type':'asset','meshInstances':_0x1dc709},_0x2f5591)),_0x484a3b['render']['assignAsse'+'t'](_0x5e4fd1));const _0x2b2652=_0x550ba1['children'];for(let _0x5dcb46=-0x1*0x203+-0x7*-0x1b7+-0x9fe;_0x5dcb46<_0x2b2652['length'];_0x5dcb46++){const _0x1e95e7=_0x3d831b(_0x3343a2,_0x2b2652[_0x5dcb46],_0x526032);_0x484a3b['addChild'](_0x1e95e7);}return _0x484a3b;},_0x146a7c=[];for(const _0x514f90 of this['data']['scenes'])_0x146a7c['push'](_0x3d831b(null,_0x514f90,this['data']));return _0x45278d['forEach'](_0x1cf90c=>{_0x1cf90c['meshInstan'+'ce']['skinInstan'+'ce']=il['createCach'+'edSkinInst'+'ance'](_0x1cf90c['meshInstan'+'ce']['mesh']['skin'],_0x1cf90c['rootBone'],_0x1cf90c['entity']),_0x1cf90c['meshInstan'+'ce']['node']['render']['rootBone']=_0x1cf90c['rootBone'];}),mr['createScen'+'eHierarchy'](_0x146a7c,lt);}['getMateria'+'lVariants'](){return this['data']['variants']?Object['keys'](this['data']['variants']):[];}['applyMater'+'ialVariant'](_0x3c497e,_0x19e836){const _0x3b3cc1=_0x19e836?this['data']['variants'][_0x19e836]:null;if(_0x3b3cc1===void(0x21af+0x111+-0x1*0x22c0)){w['warn']('No\x20variant'+'\x20named\x20'+_0x19e836+('\x20exists\x20in'+'\x20resource'));return;}const _0x56408d=_0x3c497e['findCompon'+'ents']('render');for(let _0x22b637=-0x1bf*0x11+0x15ba+0x7f5;_0x22b637<_0x56408d['length'];_0x22b637++){const _0x5694b1=_0x56408d[_0x22b637];this['_applyMate'+'rialVarian'+'t'](_0x3b3cc1,_0x5694b1['meshInstan'+'ces']);}}['applyMater'+'ialVariant'+'Instances'](_0x158c77,_0x128d0a){const _0x179567=_0x128d0a?this['data']['variants'][_0x128d0a]:null;if(_0x179567===void(0x37b+-0x114*0x1+-0x267)){w['warn']('No\x20variant'+'\x20named\x20'+_0x128d0a+('\x20exists\x20in'+'\x20resource'));return;}this['_applyMate'+'rialVarian'+'t'](_0x179567,_0x158c77);}['_applyMate'+'rialVarian'+'t'](_0x36dfb9,_0x3409f8){_0x3409f8['forEach'](_0x503728=>{if(_0x36dfb9===null)_0x503728['material']=this['_defaultMa'+'terial'];else{const _0x590622=this['data']['meshVarian'+'ts'][_0x503728['mesh']['id']];_0x590622&&(_0x503728['material']=this['data']['materials'][_0x590622[_0x36dfb9]]);}w['assert'](_0x503728['material']);});}static['createScen'+'eHierarchy'](_0x5ac993,_0x249a40){let _0x2bc19e=null;if(_0x5ac993['length']===0x2a2+-0x7b9+0x518)_0x2bc19e=_0x5ac993[-0x12a4+0xf2c+-0xc*-0x4a];else{_0x2bc19e=new _0x249a40('SceneGroup');for(const _0x5b7ca2 of _0x5ac993)_0x2bc19e['addChild'](_0x5b7ca2);}return _0x2bc19e;}static['createMode'+'l'](_0x2a745e,_0x4c22d6){const _0x5c534b=function(_0x686fdf,_0x32846e,_0x1d53e6,_0xbc98a9,_0x5dc567,_0x16d923,_0x55891e){const _0x5afe5f=_0x2a745e['meshDefaul'+'tMaterials'][_0x32846e['id']],_0x47fa3e=_0x5afe5f===void(0x2*-0x39d+-0x132f+-0x1*-0x1a69)?_0x4c22d6:_0x5dc567[_0x5afe5f],_0x4b9b95=new He(_0x32846e,_0x47fa3e,_0x16d923);if(_0x32846e['morph']){const _0x2f720a=new _a(_0x32846e['morph']);_0x4b9b95['morphInsta'+'nce']=_0x2f720a,_0x686fdf['morphInsta'+'nces']['push'](_0x2f720a);}if(_0x55891e['hasOwnProp'+'erty']('skin')){const _0x3a4b10=_0x55891e['skin'],_0x566624=_0x1d53e6[_0x3a4b10];_0x32846e['skin']=_0x566624;const _0x11a482=_0xbc98a9[_0x3a4b10];_0x4b9b95['skinInstan'+'ce']=_0x11a482,_0x686fdf['skinInstan'+'ces']['push'](_0x11a482);}_0x686fdf['meshInstan'+'ces']['push'](_0x4b9b95);},_0x43d3d3=new tr(),_0x538add=[];for(const _0x2eb522 of _0x2a745e['skins']){const _0x4c5e22=new xl(_0x2eb522);_0x4c5e22['bones']=_0x2eb522['bones'],_0x538add['push'](_0x4c5e22);}_0x43d3d3['graph']=mr['createScen'+'eHierarchy'](_0x2a745e['scenes'],Ie);for(let _0x49333d=0x1b7e+-0xe37+0xd47*-0x1;_0x49333d<_0x2a745e['nodes']['length'];_0x49333d++){const _0x1133f1=_0x2a745e['nodes'][_0x49333d];if(_0x1133f1['root']===_0x43d3d3['graph']){const _0x1feb41=_0x2a745e['gltf']['nodes'][_0x49333d];if(_0x1feb41['hasOwnProp'+'erty']('mesh')){const _0x16d475=_0x2a745e['renders'][_0x1feb41['mesh']]['meshes'];for(let _0x515fe6=-0xbca+-0x9*-0x31d+-0xf*0x115;_0x515fe6<_0x16d475['length'];_0x515fe6++){const _0x56b791=_0x16d475[_0x515fe6];_0x56b791&&_0x5c534b(_0x43d3d3,_0x56b791,_0x2a745e['skins'],_0x538add,_0x2a745e['materials'],_0x1133f1,_0x1feb41);}}}}return _0x43d3d3;}['destroy'](){const _0x234fc4=this['_assets'],_0x1c2840=function(_0x1e8293){_0x234fc4['remove'](_0x1e8293),_0x1e8293['unload']();},_0x34205a=function(_0x598d33){_0x598d33['forEach'](_0x42e264=>{_0x1c2840(_0x42e264);});};this['animations']&&(_0x34205a(this['animations']),this['animations']=null),this['textures']&&(_0x34205a(this['textures']),this['textures']=null),this['materials']&&(_0x34205a(this['materials']),this['materials']=null),this['renders']&&(_0x34205a(this['renders']),this['renders']=null),this['_model']&&(_0x1c2840(this['_model']),this['_model']=null),this['data']=null,this['assets']=null;}}class pN{constructor(_0x5d5454,_0x1a4f5c,_0x555830){this['_device']=_0x5d5454,this['_assets']=_0x1a4f5c,this['_defaultMa'+'terial']=mh['createDefa'+'ultMateria'+'l'](),this['maxRetries']=_0x555830;}['_getUrlWit'+'houtParams'](_0x66f513){return _0x66f513['indexOf']('?')>=0xa60+0x2*0xdb7+0xc9a*-0x3?_0x66f513['split']('?')[-0x13*-0x1+0x1208*0x2+-0x2423]:_0x66f513;}['load'](_0x2aaa69,_0x184d6a,_0x11611b){pe['fetchArray'+'Buffer'](_0x2aaa69['load'],(_0x418103,_0x2d49a2)=>{_0x418103?_0x184d6a(_0x418103):mh['parse'](this['_getUrlWit'+'houtParams'](_0x2aaa69['original']),xe['extractPat'+'h'](_0x2aaa69['load']),_0x2d49a2,this['_device'],_0x11611b['registry'],_0x11611b['options'],(_0x38d75a,_0x20f005)=>{_0x38d75a?_0x184d6a(_0x38d75a):_0x184d6a(null,new mr(_0x20f005,_0x11611b,this['_assets'],this['_defaultMa'+'terial']));});},_0x11611b,this['maxRetries']);}['open'](_0x48848f,_0x306bd1,_0x493c03){return _0x306bd1;}['patch'](_0x1828ea,_0x26ccf0){}}class mN extends Qe{constructor(_0x121162){super(_0x121162,'container'),this['glbContain'+'erParser']=new pN(_0x121162['graphicsDe'+'vice'],_0x121162['assets'],0x25d*-0x5+-0x1*-0x1487+-0x8b6),this['parsers']={};}set['maxRetries'](_0x285246){this['glbContain'+'erParser']['maxRetries']=_0x285246;for(const _0x5e153d in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x5e153d)&&(this['parsers'][_0x5e153d]['maxRetries']=_0x285246);}get['maxRetries'](){return this['glbContain'+'erParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x3efc7d){return _0x3efc7d['indexOf']('?')>=-0x1b86+-0xdd*-0x1d+0x27d?_0x3efc7d['split']('?')[0x1aa7+0x1f2e+-0x39d5]:_0x3efc7d;}['_getParser'](_0x575498){const _0x30f51b=_0x575498?xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x575498))['toLowerCas'+'e']()['replace']('.',''):null;return this['parsers'][_0x30f51b]||this['glbContain'+'erParser'];}['load'](_0x129fe6,_0x406359,_0x23536d){typeof _0x129fe6=='string'&&(_0x129fe6={'load':_0x129fe6,'original':_0x129fe6}),this['_getParser'](_0x129fe6['original'])['load'](_0x129fe6,_0x406359,_0x23536d);}['open'](_0x11f103,_0x4f14b8,_0x49735f){return this['_getParser'](_0x11f103)['open'](_0x11f103,_0x4f14b8,_0x49735f);}}class _N extends Qe{constructor(_0x456bfe){super(_0x456bfe,'css'),h(this,'decoder',null);}['load'](_0x4bd444,_0x1788d5){typeof _0x4bd444=='string'&&(_0x4bd444={'load':_0x4bd444,'original':_0x4bd444}),ot['get'](_0x4bd444['load'],{'retry':this['maxRetries']>0xf70+-0x548+-0x1*0xa28,'maxRetries':this['maxRetries']},(_0x140c51,_0x16cd10)=>{_0x140c51?_0x1788d5('Error\x20load'+'ing\x20css\x20re'+'source:\x20'+_0x4bd444['original']+'\x20['+_0x140c51+']'):_0x1788d5(null,_0x16cd10);});}['openBinary'](_0x3d8b10){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x3d8b10);}}class gN extends Qe{constructor(_0x457bd1){super(_0x457bd1,'cubemap'),this['_device']=_0x457bd1['graphicsDe'+'vice'],this['_registry']=_0x457bd1['assets'],this['_loader']=_0x457bd1['loader'];}['load'](_0x2baf81,_0x3b2c69,_0x54b2b9){this['loadAssets'](_0x54b2b9,_0x3b2c69);}['open'](_0x26cfb9,_0x49f4e7,_0x4d86c8){return _0x4d86c8?_0x4d86c8['resource']:null;}['patch'](_0x2c886f,_0x1c2140){this['loadAssets'](_0x2c886f,(_0x101419,_0x1643f9)=>{_0x101419&&(_0x1c2140['fire']('error',_0x2c886f),_0x1c2140['fire']('error:'+_0x2c886f['id'],_0x101419,_0x2c886f),_0x2c886f['fire']('error',_0x2c886f));});}['getAssetId'+'s'](_0x2c8ff3){const _0x3ad031=[];if(_0x3ad031[-0x26bb+-0x1c2a+0x42e5]=_0x2c8ff3['file'],(_0x2c8ff3['loadFaces']||!_0x2c8ff3['file'])&&_0x2c8ff3['data']&&_0x2c8ff3['data']['textures']){for(let _0xc132c9=-0x1*0x1b31+0x517*0x5+0x1be;_0xc132c9<0x1*0x619+0x1*0x523+0x5*-0x23e;++_0xc132c9)_0x3ad031[_0xc132c9+(0x1dfb+0x1a93+-0x388d)]=_0x2c8ff3['data']['textures'][_0xc132c9];}else _0x3ad031[-0x13*-0x89+0x1cd7+-0x2701]=_0x3ad031[-0x7*0xdf+-0x18f6+0x1f11]=_0x3ad031[0x24d*0xf+0x236f+-0x1*0x45ef]=_0x3ad031[0x1*0x1a46+-0x2*-0xfcb+-0x1cec*0x2]=_0x3ad031[-0x1253*0x2+-0x1d8d+-0xa3*-0x68]=_0x3ad031[-0x19a9+-0x58*-0x39+0x1*0x617]=null;return _0x3ad031;}['compareAss'+'etIds'](_0x409485,_0x4cb788){return _0x409485&&_0x4cb788?parseInt(_0x409485,0x4c*-0xb+-0x1112+-0x8*-0x28c)===_0x409485||typeof _0x409485=='string'?_0x409485===_0x4cb788:_0x409485['url']===_0x4cb788['url']:_0x409485!==null==(_0x4cb788!==null);}['update'](_0x3c53fa,_0x52ab16,_0x3aab9c){const _0xa878cb=_0x3c53fa['data']||{},_0x28eb5f=_0x3c53fa['_handlerSt'+'ate']['assets'],_0x51bdf4=_0x3c53fa['_resources'];let _0x3c4f5f,_0xcebcf7,_0x42d4d4;const _0x1a3805=[null,null,null,null,null,null,null],_0x576716=function(){return _0xa878cb['hasOwnProp'+'erty']('type')?_0xa878cb['type']:_0xa878cb['hasOwnProp'+'erty']('rgbm')?_0xa878cb['rgbm']?Ki:Ms:null;};if(!_0x3c53fa['loaded']||_0x3aab9c[0x114b+-0x1b*-0xd3+-0x278c]!==_0x28eb5f[0x23*-0xe7+0x23b*-0xb+0x16*0x28d]){if(_0x3aab9c[0x1*-0x1a7d+0x530+0x154d]){if(_0x3c4f5f=_0x3aab9c[-0x5e3*0x1+0xa8+0x1*0x53b]['resource'],_0x3c4f5f['cubemap']){for(_0x42d4d4=-0xb1c+-0x1d89+0x28a5;_0x42d4d4<-0x1*-0xa8b+0x9d*0x1d+-0x1c4e;++_0x42d4d4)_0x1a3805[_0x42d4d4+(0xef*-0x2+-0x8ba*0x2+0x1353)]=new _e(this['_device'],{'name':_0x3c53fa['name']+('_prelitCub'+'emap')+(_0x3c4f5f['width']>>_0x42d4d4),'cubemap':!(-0x700+0x8d*0x15+-0x491),'type':_0x576716()||_0x3c4f5f['type'],'width':_0x3c4f5f['width']>>_0x42d4d4,'height':_0x3c4f5f['height']>>_0x42d4d4,'format':_0x3c4f5f['format'],'levels':[_0x3c4f5f['_levels'][_0x42d4d4]],'addressU':ue,'addressV':ue,'mipmaps':_0x42d4d4===-0xd*-0x23+-0x142+-0x1*0x85});}else _0x1a3805[0xe*-0x283+0x44*-0x5f+0x3c67]=_0x3c4f5f;}}else _0x1a3805[0x136b+0xd5c+-0x20c6]=_0x51bdf4[-0x14f2+0x1*0x270f+-0x121c]||null,_0x1a3805[0x1b9d+-0x1b6b+-0x4*0xc]=_0x51bdf4[0x2b1*0xd+0x99b+-0x2c96]||null,_0x1a3805[0x12ec+0x7*-0x47d+0xc82]=_0x51bdf4[-0x4*0x651+-0x1*0xc93+0xaa*0x39]||null,_0x1a3805[-0x9dc+0x18d3+-0xef3]=_0x51bdf4[0xb6a+0x7ff+0x677*-0x3]||null,_0x1a3805[0x7*0x3fd+-0xb1*-0x2b+-0x39a1*0x1]=_0x51bdf4[-0xc9*-0x3+-0x5*0x17d+0x51b*0x1]||null,_0x1a3805[0x60*-0x5d+0x41*0x2+-0x4*-0x899]=_0x51bdf4[0x14b*0x5+0xe16*0x1+-0x1487]||null;const _0x23e7a6=_0x3aab9c['slice'](-0x560+0x1*-0x270+0x7d1);if(!_0x3c53fa['loaded']||!this['cmpArrays'](_0x23e7a6,_0x28eb5f['slice'](-0x244d+0x263b*0x1+-0x1ed))){if(_0x23e7a6['indexOf'](null)===-(-0x6ff+0x1*0x17b9+0x3*-0x593)){const _0x521331=_0x23e7a6['map'](_0x3db271=>_0x3db271['resource']),_0x547d9f=[];for(_0xcebcf7=0x1*-0x1a12+0x132d+0x6e5;_0xcebcf7<_0x521331[0x14b*-0xd+-0x11ad+0x227c]['_levels']['length'];++_0xcebcf7)_0x547d9f['push'](_0x521331['map'](_0x48eeea=>_0x48eeea['_levels'][_0xcebcf7]));const _0x4f2c4b=_0x521331[-0xd*0x16b+0x8*-0x1d6+0x1*0x211f]['format'],_0x2250a8=new _e(this['_device'],{'name':_0x3c53fa['name']+'_faces','cubemap':!(-0x1*-0xd81+0xf69+0x1*-0x1cea),'type':_0x576716()||_0x521331[0x5*-0x372+0x1*-0xe2+-0x7a*-0x26]['type'],'width':_0x521331[-0x1*-0x39+-0x10c2*0x2+0x214b]['width'],'height':_0x521331[-0x1cac+0x2*-0x10d4+0x3e54]['height'],'format':_0x4f2c4b===wr?Ne:_0x4f2c4b,'mipmaps':_0xa878cb['mipmaps']??!(0x1*-0x146f+0x3*0xc28+-0x1009),'levels':_0x547d9f,'minFilter':_0xa878cb['hasOwnProp'+'erty']('minFilter')?_0xa878cb['minFilter']:_0x521331[0x119*0x7+-0xc7e*0x2+0x114d]['minFilter'],'magFilter':_0xa878cb['hasOwnProp'+'erty']('magFilter')?_0xa878cb['magFilter']:_0x521331[0xcde+0x3*0xbd9+-0x3069]['magFilter'],'anisotropy':_0xa878cb['hasOwnProp'+'erty']('anisotropy')?_0xa878cb['anisotropy']:-0x166*0x4+0x2b6+0x2e3*0x1,'addressU':ue,'addressV':ue});_0x1a3805[-0xe9b+-0x7ef+0x1*0x168a]=_0x2250a8;}}else _0x1a3805[-0xbbd+-0x528+-0x1*-0x10e5]=_0x51bdf4[-0x8ab*-0x1+-0xc70+-0x3c5*-0x1]||null;if(!this['cmpArrays'](_0x1a3805,_0x51bdf4)){for(_0x3c53fa['resources']=_0x1a3805,_0x3c53fa['_handlerSt'+'ate']['assetIds']=_0x52ab16,_0x3c53fa['_handlerSt'+'ate']['assets']=_0x3aab9c,_0x42d4d4=0x15cb+-0x1d0b+-0x3a0*-0x2;_0x42d4d4<_0x51bdf4['length'];++_0x42d4d4)_0x51bdf4[_0x42d4d4]!==null&&_0x1a3805['indexOf'](_0x51bdf4[_0x42d4d4])===-(-0x1*-0x1741+-0x6e*-0x1e+0x909*-0x4)&&_0x51bdf4[_0x42d4d4]['destroy']();}for(_0x42d4d4=0x6c4*-0x3+0x7b9+0xc93;_0x42d4d4<_0x28eb5f['length'];++_0x42d4d4)_0x28eb5f[_0x42d4d4]!==null&&_0x3aab9c['indexOf'](_0x28eb5f[_0x42d4d4])===-(-0x1*-0xf99+-0xcd3*-0x2+-0x293e)&&_0x28eb5f[_0x42d4d4]['unload']();}['cmpArrays'](_0x377579,_0x202265){if(_0x377579['length']!==_0x202265['length'])return!(0x14ab*0x1+0x1834*-0x1+0x97*0x6);for(let _0x1419f1=0x14b4+0x24d5+-0x3989;_0x1419f1<_0x377579['length'];++_0x1419f1)if(_0x377579[_0x1419f1]!==_0x202265[_0x1419f1])return!(0x57d+-0x27*-0xc3+-0x21*0x111);return!(-0x3*0x8f5+-0xef3+0x29d2);}['resolveId'](_0x4aa6e8){const _0x113cdf=parseInt(_0x4aa6e8,0xb73*-0x2+-0x9*-0x15d+0xaab);return _0x113cdf===_0x4aa6e8||_0x113cdf['toString']()===_0x4aa6e8?_0x113cdf:_0x4aa6e8;}['loadAssets'](_0x1d02c8,_0xb077e6){_0x1d02c8['hasOwnProp'+'erty']('_handlerSt'+'ate')||(_0x1d02c8['_handlerSt'+'ate']={'assetIds':[null,null,null,null,null,null,null],'assets':[null,null,null,null,null,null,null]});const _0xfcdc38=this,_0x53448f=_0xfcdc38['getAssetId'+'s'](_0x1d02c8),_0x19aee3=[null,null,null,null,null,null,null],_0xc8765f=_0x1d02c8['_handlerSt'+'ate']['assetIds'],_0x39591c=_0x1d02c8['_handlerSt'+'ate']['assets'],_0x1292f7=_0xfcdc38['_registry'];let _0x6d7c4f=0x3c0*0x8+0xe4*0x2+0x1*-0x1fc1;const _0x842230=function(_0x386ced,_0x506c21){_0x19aee3[_0x386ced]=_0x506c21,_0x6d7c4f--,_0x6d7c4f===0x166b+-0x18f5+0x32*0xd&&(_0xfcdc38['update'](_0x1d02c8,_0x53448f,_0x19aee3),_0xb077e6(null,_0x1d02c8['resources']));},_0x27e2ef=function(_0x224e10,_0x1774ae,_0x10ca97){_0xb077e6(_0x1774ae);},_0x3d76a0=function(_0x3e2ebb,_0x4dbd46){_0x4dbd46['loaded']?_0x842230(_0x3e2ebb,_0x4dbd46):(_0x1292f7['once']('load:'+_0x4dbd46['id'],_0x842230['bind'](_0xfcdc38,_0x3e2ebb)),_0x1292f7['once']('error:'+_0x4dbd46['id'],_0x27e2ef['bind'](_0xfcdc38,_0x3e2ebb)),_0x4dbd46['loading']||_0x1292f7['load'](_0x4dbd46));};let _0x9c3559;for(let _0x4f1869=-0xe73+0x25e*0x5+0x29d;_0x4f1869<-0x113f+-0x1907+-0x1*-0x2a4d;++_0x4f1869){const _0x1087bd=this['resolveId'](_0x53448f[_0x4f1869]);if(!_0x1087bd)_0x842230(_0x4f1869,null);else{if(_0xfcdc38['compareAss'+'etIds'](_0x1087bd,_0xc8765f[_0x4f1869]))_0x3d76a0(_0x4f1869,_0x39591c[_0x4f1869]);else{if(parseInt(_0x1087bd,-0x12ee*0x1+-0x1813+0xe59*0x3)===_0x1087bd)_0x9c3559=_0x1292f7['get'](_0x1087bd),_0x9c3559?_0x3d76a0(_0x4f1869,_0x9c3559):setTimeout(((_0x4c7f2,_0x4ebf21)=>{const _0x5b211c=_0x1292f7['get'](_0x4ebf21);_0x5b211c?_0x3d76a0(_0x4c7f2,_0x5b211c):_0x27e2ef(_0x4c7f2,'failed\x20to\x20'+'find\x20depen'+'dent\x20cubem'+'ap\x20asset='+_0x4ebf21);})['bind'](null,_0x4f1869,_0x1087bd));else{const _0x5094ad=typeof _0x1087bd=='string'?{'url':_0x1087bd,'filename':_0x1087bd}:_0x1087bd,_0x4f9192=_0x5094ad['url']['search']('.dds')===-(-0x4e*0x27+-0x246e+-0x39*-0xd9)?{'type':'rgbp','addressu':'clamp','addressv':'clamp','mipmaps':!(0x156f+-0x176e+0x200)}:null;_0x9c3559=new pe(_0x1d02c8['name']+'_part_'+_0x4f1869,'texture',_0x5094ad,_0x4f9192),_0x1292f7['add'](_0x9c3559),_0x3d76a0(_0x4f1869,_0x9c3559);}}}}}}class SN extends Qe{constructor(_0xdb4297){super(_0xdb4297,'folder');}['load'](_0x549ce9,_0x130c24){_0x130c24(null,null);}}class Wg{constructor(_0x3daf60,_0x16102b){this['type']=_0x16102b&&_0x16102b['type']||dh,this['em']=0x1*0x73b+0xb*0x1c2+0x154*-0x14,this['textures']=_0x3daf60,this['intensity']=0x23b2+-0x3b*0x6+-0x2250,this['_data']=null,this['data']=_0x16102b;}set['data'](_0x17411c){if(this['_data']=_0x17411c,!!_0x17411c&&(this['_data']['intensity']!==void(-0xe*0x100+-0x4*0x755+0x2b54)&&(this['intensity']=this['_data']['intensity']),this['_data']['info']||(this['_data']['info']={}),(!this['_data']['version']||this['_data']['version']<-0x8de+-0x7f*-0x13+-0x8d)&&(this['_data']['info']['maps']=[{'width':this['_data']['info']['width'],'height':this['_data']['info']['height']}],this['_data']['chars']))){for(const _0x21f849 in this['_data']['chars'])this['_data']['chars'][_0x21f849]['map']=-0x731+-0x4d8+0xc09;}}get['data'](){return this['_data'];}}function af(_0x3167c6){return _0x3167c6['version']<-0xc7e+0xfe*-0xb+0xb*0x221&&(_0x3167c6['version']<0x2*-0x11dc+0x117c+0x1*0x123e&&(_0x3167c6['info']['maps']=_0x3167c6['info']['maps']||[{'width':_0x3167c6['info']['width'],'height':_0x3167c6['info']['height']}]),_0x3167c6['chars']=Object['keys'](_0x3167c6['chars']||{})['reduce']((_0x297b59,_0x320087)=>{const _0xc8815d=_0x3167c6['chars'][_0x320087],_0x1d1818=_0xc8815d['letter']!==void(0xaa5*0x1+-0x2*-0x3ec+-0x1*0x127d)?_0xc8815d['letter']:Tc['fromCodePo'+'int'](_0x320087);return _0x3167c6['version']<-0x23de+0xb62+0x187e&&(_0xc8815d['map']=_0xc8815d['map']||0x254f+0x84*-0x47+-0xb3*0x1),_0x297b59[_0x1d1818]=_0xc8815d,_0x297b59;},{}),_0x3167c6['version']=-0x5b9*0x1+0x1*0xad8+0x6*-0xda),_0x3167c6;}class yN extends Qe{constructor(_0x6e3d74){super(_0x6e3d74,'font'),this['_loader']=_0x6e3d74['loader'],this['maxRetries']=-0xa6*-0x1b+-0x24bf*-0x1+-0x3641;}['load'](_0x273bc4,_0x579288,_0x26e9b1){typeof _0x273bc4=='string'&&(_0x273bc4={'load':_0x273bc4,'original':_0x273bc4});const _0x515200=this;xe['getExtensi'+'on'](_0x273bc4['original'])==='.json'?ot['get'](_0x273bc4['load'],{'retry':this['maxRetries']>0xb*-0x1e5+0x2f0+0x11e7,'maxRetries':this['maxRetries']},(_0x374cc4,_0x3de2e3)=>{if(_0x374cc4)_0x579288('Error\x20load'+'ing\x20font\x20r'+'esource:\x20'+_0x273bc4['original']+'\x20['+_0x374cc4+']');else{const _0x3d724c=af(_0x3de2e3);_0x515200['_loadTextu'+'res'](_0x273bc4['load']['replace']('.json','.png'),_0x3d724c,(_0x38c0cf,_0x20a2c5)=>{_0x38c0cf?_0x579288(_0x38c0cf):_0x579288(null,{'data':_0x3d724c,'textures':_0x20a2c5});});}}):(_0x26e9b1&&_0x26e9b1['data']&&(_0x26e9b1['data']=af(_0x26e9b1['data'])),this['_loadTextu'+'res'](_0x273bc4['load'],_0x26e9b1&&_0x26e9b1['data'],_0x579288));}['_loadTextu'+'res'](_0xbbf1e,_0x3de89e,_0x5a709c){const _0x1dd0f3=_0x3de89e['info']['maps']['length'];let _0x476336=0x454+0xe1d*-0x1+0x343*0x3,_0xe5c6ae=null;const _0x52decc=new Array(_0x1dd0f3),_0x4647b3=this['_loader'],_0xbbec8b=function(_0x4b96f9){const _0x55fe0c=function(_0x340fdb,_0x408dfb){if(!_0xe5c6ae){if(_0x340fdb){_0xe5c6ae=_0x340fdb,_0x5a709c(_0x340fdb);return;}_0x408dfb['upload'](),_0x52decc[_0x4b96f9]=_0x408dfb,_0x476336++,_0x476336===_0x1dd0f3&&_0x5a709c(null,_0x52decc);}};_0x4b96f9===0x1af2+0x4*0x2b8+-0x25d2?_0x4647b3['load'](_0xbbf1e,'texture',_0x55fe0c):_0x4647b3['load'](_0xbbf1e['replace']('.png',_0x4b96f9+'.png'),'texture',_0x55fe0c);};for(let _0xa9f516=-0x4*-0x897+-0x1723+0xb39*-0x1;_0xa9f516<_0x1dd0f3;_0xa9f516++)_0xbbec8b(_0xa9f516);}['open'](_0x24c434,_0x21e7a5,_0x5a7e1f){let _0x50b187;return _0x21e7a5['textures']?_0x50b187=new Wg(_0x21e7a5['textures'],_0x21e7a5['data']):_0x50b187=new Wg(_0x21e7a5,null),_0x50b187;}['patch'](_0x49fadc,_0x9f9cc6){const _0x1e34d9=_0x49fadc['resource'];!_0x1e34d9['data']&&_0x49fadc['data']?_0x1e34d9['data']=_0x49fadc['data']:!_0x49fadc['data']&&_0x1e34d9['data']&&(_0x49fadc['data']=_0x1e34d9['data']),_0x49fadc['data']&&(_0x49fadc['data']=af(_0x49fadc['data']));}}async function vN(){const _0x42dcb7=0x9c9+-0x2*0x12af+0x1b95+0.28209479177387814;class _0x562309{constructor(_0x5b8d67,_0x34d7f6,_0x113d84){this['x']=_0x5b8d67,this['y']=_0x34d7f6,this['z']=_0x113d84;}}class _0x6a03d8{constructor(_0x3febbf,_0x5a6433,_0xed54fc,_0x27f802){this['x']=_0x3febbf,this['y']=_0x5a6433,this['z']=_0xed54fc,this['w']=_0x27f802;}}class _0x3caf4b{constructor(_0xd18dbc,_0x2ef16a,_0x11bbba,_0x25b69a){this['x']=_0xd18dbc,this['y']=_0x2ef16a,this['z']=_0x11bbba,this['w']=_0x25b69a;}['set'](_0xe87ec3,_0x5e66ab,_0x6e68ec,_0x170cd0){this['x']=_0xe87ec3,this['y']=_0x5e66ab,this['z']=_0x6e68ec,this['w']=_0x170cd0;}}class _0x436aa8{constructor(_0x1eaac2,_0x5986ea,_0x39dd70,_0x7fe988,_0xb7f132,_0x4528a8,_0xa6a71,_0xc22e3b,_0xa20047,_0x49152a,_0x5ce4d1,_0x1bfff6,_0x438762,_0x4baf48){const _0x456054=(_0x390d81,_0x1dc4a0)=>{const _0x25901c=(-0x1b*-0xfb+-0x23+0x8c7*-0x3<<_0x1dc4a0)-(-0x1*0x14ea+-0x1*-0x102a+0x4c1);return(_0x390d81&_0x25901c)/_0x25901c;},_0xe5571b=(_0x5f1dac,_0x37bbfc)=>{_0x5f1dac['x']=_0x456054(_0x37bbfc>>>-0x108a*-0x1+-0x89+-0xfec,-0x7a*-0x37+0xd4a+-0x25*0x111),_0x5f1dac['y']=_0x456054(_0x37bbfc>>>0x2*-0x8f9+0x2ae+0xf4f*0x1,-0x5*-0x41+-0xa8d+0x952),_0x5f1dac['z']=_0x456054(_0x37bbfc,0x1*-0x15ff+-0x1a*-0x21+-0x10*-0x12b);},_0x12027b=(_0x50727,_0x52fb5e)=>{_0x50727['x']=_0x456054(_0x52fb5e>>>0x1*-0x1d21+-0x2a9*0x9+0x352a*0x1,-0x1*0x25f+-0xd3*-0xc+0x9*-0xd5),_0x50727['y']=_0x456054(_0x52fb5e>>>-0x3*-0x76f+0x4d8*0x1+-0x907*0x3,0x1dcd*0x1+0x380+-0x2145),_0x50727['z']=_0x456054(_0x52fb5e>>>-0x107*-0x26+-0x1d42+0x340*-0x3,0x20*0x36+-0x1*-0xc51+-0x1*0x1309),_0x50727['w']=_0x456054(_0x52fb5e,0x1b08+-0x1cf*-0xc+-0x30b4);},_0x6e242c=(_0x2f5908,_0x6dde50)=>{const _0x32763d=(-0x965*0x1+0x11d3+-0x86d)/(Math['sqrt'](0x1*0x117c+0x2*0x4b0+0x7*-0x3d6)*(0x12*0x156+-0x13*0x1f6+-0x59*-0x26+0.5)),_0x2abcef=(_0x456054(_0x6dde50>>>0x1302+-0xca7+0x647*-0x1,-0x25e5+0x67a*-0x1+0x1*0x2c69)-(-0x31*0xb7+-0x1965+0x3c6c+0.5))*_0x32763d,_0x355ba7=(_0x456054(_0x6dde50>>>0x1b11+-0x25df+0x2*0x56c,-0x137*0x1+-0x1b9d+0x1cde)-(-0x45b*-0x5+-0x14bd*0x1+-0x10a+0.5))*_0x32763d,_0x2e31f7=(_0x456054(_0x6dde50,-0x2247+0x758*0x4+0x4f1)-(0x202+0x179b+-0x199d+0.5))*_0x32763d,_0x1f0e24=Math['sqrt'](0x1596+-0xffa+-0xcd*0x7-(_0x2abcef*_0x2abcef+_0x355ba7*_0x355ba7+_0x2e31f7*_0x2e31f7));switch(_0x6dde50>>>0x141*0x17+-0x25c0+0x1*0x907){case-0x1809*-0x1+-0xaed+-0xd1c:_0x2f5908['set'](_0x2abcef,_0x355ba7,_0x2e31f7,_0x1f0e24);break;case 0x3*0x123+-0x7bc+0x1*0x454:_0x2f5908['set'](_0x1f0e24,_0x355ba7,_0x2e31f7,_0x2abcef);break;case-0x11*-0xa9+-0xc*-0x338+-0x31d7:_0x2f5908['set'](_0x355ba7,_0x1f0e24,_0x2e31f7,_0x2abcef);break;case 0x9a*-0x3e+0x22ba+0x295:_0x2f5908['set'](_0x355ba7,_0x2e31f7,_0x1f0e24,_0x2abcef);break;}},_0x20c1d0=(_0x3b4e9a,_0x2c4cc5,_0x4e3392)=>_0x3b4e9a*(0x1ae3+-0xcab+0x3*-0x4bd-_0x4e3392)+_0x2c4cc5*_0x4e3392,_0x322290=[0x4*-0x29a+-0x102c+0x1a97,0xd3+0x5c*-0x33+0x1189,-0x1749+-0x1262+0x29ba][_0xa6a71-(-0x25b5*0x1+-0x89*-0x1+0x252d)],_0x4fd884=-0x7f0+0x8*0x230+-0x98a;this['read']=_0x2ab3ac=>{const _0xd405a1=Math['floor'](_0x2ab3ac/(-0x21c6+0x793*-0x3+0x167*0x29))*_0x5986ea;if(_0xc22e3b&&(_0xe5571b(_0xc22e3b,_0x39dd70[_0x2ab3ac*_0x4fd884+(0x2332+0xc56+-0x12*0x2a4)]),_0xc22e3b['x']=_0x20c1d0(_0x1eaac2[_0xd405a1+(0x1161*0x1+0x903*0x3+-0x2c6a)],_0x1eaac2[_0xd405a1+(-0x3*-0xab0+0x1*0x2526+-0xdd7*0x5)],_0xc22e3b['x']),_0xc22e3b['y']=_0x20c1d0(_0x1eaac2[_0xd405a1+(-0x17*0x79+0x1d1a+-0x123a)],_0x1eaac2[_0xd405a1+(0x21dc*-0x1+0x2bd*0x1+0x1f23)],_0xc22e3b['y']),_0xc22e3b['z']=_0x20c1d0(_0x1eaac2[_0xd405a1+(-0x2556+-0x1c65+-0x1*-0x41bd)],_0x1eaac2[_0xd405a1+(-0x75+0x16d5+-0x165b)],_0xc22e3b['z'])),_0xa20047&&_0x6e242c(_0xa20047,_0x39dd70[_0x2ab3ac*_0x4fd884+(-0x5*-0x247+0xc1b+-0x1*0x177d)]),_0x49152a&&(_0xe5571b(_0x49152a,_0x39dd70[_0x2ab3ac*_0x4fd884+(0x2*0x64d+0xbf*-0x1+0x151*-0x9)]),_0x49152a['x']=_0x20c1d0(_0x1eaac2[_0xd405a1+(0x12aa*0x2+0x1c*0xc7+-0x2*0x1d89)],_0x1eaac2[_0xd405a1+(-0x30e+-0x92+0x3a9)],_0x49152a['x']),_0x49152a['y']=_0x20c1d0(_0x1eaac2[_0xd405a1+(0x3*-0x986+0x68d+-0x14c*-0x11)],_0x1eaac2[_0xd405a1+(0x935+-0x1657+0xd2c)],_0x49152a['y']),_0x49152a['z']=_0x20c1d0(_0x1eaac2[_0xd405a1+(0x228c+0x1624+-0x38a8)],_0x1eaac2[_0xd405a1+(0x8cd+-0x18ee+0x102c)],_0x49152a['z'])),_0x5ce4d1&&(_0x12027b(_0x5ce4d1,_0x39dd70[_0x2ab3ac*_0x4fd884+(-0xe2c+0x1e80+0x1051*-0x1)]),_0x5986ea>-0x9cb+0x1133+-0x75c&&(_0x5ce4d1['x']=_0x20c1d0(_0x1eaac2[_0xd405a1+(0x577*-0x5+-0x1721+0x65*0x80)],_0x1eaac2[_0xd405a1+(0x1*0x12c3+-0x1*0x2153+0xe9f)],_0x5ce4d1['x']),_0x5ce4d1['y']=_0x20c1d0(_0x1eaac2[_0xd405a1+(-0x1460+-0x1d7f+-0x1*-0x31ec)],_0x1eaac2[_0xd405a1+(0x1a*-0x91+-0x1319*0x1+0x21e3)],_0x5ce4d1['y']),_0x5ce4d1['z']=_0x20c1d0(_0x1eaac2[_0xd405a1+(0x2*-0x14d+0x6df+-0x437)],_0x1eaac2[_0xd405a1+(-0x26b4+0x3*-0xb85+0x4954)],_0x5ce4d1['z']))),_0x1bfff6&&(_0xe5571b(_0x1bfff6,_0x39dd70[_0x2ab3ac*_0x4fd884+(0x1478+0x14e1+-0x2955)]),_0x1bfff6['x']=_0x20c1d0(_0x1eaac2[_0xd405a1+(-0x1bb5+-0x1441+0x3008)],_0x1eaac2[_0xd405a1+(0xcd0+-0x13*-0xdf+-0x1d48)],_0x1bfff6['x']),_0x1bfff6['y']=_0x20c1d0(_0x1eaac2[_0xd405a1+(0xa*0x1e2+-0x19fe+0x73d)],_0x1eaac2[_0xd405a1+(-0x8d5+0x1515+0x615*-0x2)],_0x1bfff6['y']),_0x1bfff6['z']=_0x20c1d0(_0x1eaac2[_0xd405a1+(-0xc08+0x91b+0x1*0x301)],_0x1eaac2[_0xd405a1+(-0x27*-0x5f+-0x4*0x7c1+0x10a2)],_0x1bfff6['z'])),_0x438762&&(_0xe5571b(_0x438762,_0x39dd70[_0x2ab3ac*_0x4fd884+(0x41e*0x1+0x138+-0x1*0x551)]),_0x438762['x']=_0x20c1d0(_0x1eaac2[_0xd405a1+(-0x21a7+0xfb1+0x120e)],_0x1eaac2[_0xd405a1+(0xcda*-0x1+0x17f*0x9+-0x84)],_0x438762['x']),_0x438762['y']=_0x20c1d0(_0x1eaac2[_0xd405a1+(-0x2643+-0xff7*-0x2+0x66f)],_0x1eaac2[_0xd405a1+(-0x230*-0xb+0xaa8+-0x229d)],_0x438762['y'])),_0x4baf48&&_0xa6a71>-0x1a9f+-0x74d+0x1a*0x14e){const _0x50f513=[_0x7fe988,_0xb7f132,_0x4528a8];for(let _0x222a6f=0x12e3*0x1+-0x23*-0x11a+0xb7d*-0x5;_0x222a6f<0x1e71+-0x56*-0x11+0x2*-0x1212;++_0x222a6f)for(let _0x58cab8=0x2b*-0x3d+0x8a2+0x3b*0x7;_0x58cab8<0x36a+-0x2*-0xbe5+-0x1b25;++_0x58cab8)_0x4baf48[_0x222a6f*(-0x49a+-0x1fac+0x2455)+_0x58cab8]=_0x58cab8<_0x322290?_0x50f513[_0x222a6f][_0x2ab3ac*(-0x1de*0x12+0x1*0x14ad+0xcff)+_0x58cab8]*((0x1*-0x92f+0xe8c*-0x2+0x264f)/(0x89*-0x19+0x1824+-0x9c4))-(-0x47*-0x3+0x1*0x22cd+0x61*-0x5e):-0xd83+0x3e5*-0x2+0x154d;}};}}self['onmessage']=async _0x34cb7f=>{const {data:_0x5aad77}=_0x34cb7f;switch(_0x5aad77['type']){case'initWorker':break;case'decompress':_0x37ab13(_0x5aad77['numSplats'],_0x5aad77['chunkData'],_0x5aad77['chunkSize'],_0x5aad77['vertexData'],_0x5aad77['shData0'],_0x5aad77['shData1'],_0x5aad77['shData2'],_0x5aad77['shBands']);break;}};const _0x37ab13=(_0x32101a,_0xc661bd,_0xf05fde,_0x238ddb,_0x49d79b,_0x3623c7,_0x1c3b96,_0x56e6ec)=>{const _0x40437c=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'];if(_0x56e6ec>0x1160+0x8*-0x44b+-0x2*-0x87c){const _0x4c3a64=[];for(let _0x150a7e=0x598*0x3+-0xdce+-0x2fa;_0x150a7e<-0x1862+0x1273+-0x22*-0x2e;++_0x150a7e)_0x4c3a64['push']('f_rest_'+_0x150a7e);_0x40437c['splice'](_0x40437c['indexOf']('f_dc_0')+(-0x7b5*-0x3+-0x1882+0x164),-0x1eb1+0x2af*-0xe+0xf*0x48d,..._0x4c3a64);}const _0x380c72={};_0x40437c['forEach'](_0x221786=>{_0x380c72[_0x221786]=new Float32Array(_0x32101a);});const _0x1e393d=new _0x562309(),_0x1bcaaa=new _0x3caf4b(),_0x5a3c46=new _0x562309(),_0x205b34=new _0x6a03d8(),_0x218fc6=new _0x562309(),_0x3aaa52=new _0x562309(),_0x3c60ed=_0x56e6ec>-0x1*0xd31+0x55*-0x5a+0x2b13?new Float32Array(0x13d4+-0x3*0x4a3+-0x5be):null,_0x363073=new _0x436aa8(_0xc661bd,_0xf05fde,_0x238ddb,_0x49d79b,_0x3623c7,_0x1c3b96,_0x56e6ec,_0x1e393d,_0x1bcaaa,_0x5a3c46,_0x205b34,_0x218fc6,_0x3aaa52,_0x3c60ed);for(let _0x531a4a=0x59*-0x7+0xeef*-0x2+0x204d;_0x531a4a<_0x32101a;++_0x531a4a)if(_0x363073['read'](_0x531a4a),_0x380c72['x'][_0x531a4a]=_0x1e393d['x'],_0x380c72['y'][_0x531a4a]=_0x1e393d['y'],_0x380c72['z'][_0x531a4a]=_0x1e393d['z'],_0x380c72['rot_1'][_0x531a4a]=_0x1bcaaa['x'],_0x380c72['rot_2'][_0x531a4a]=_0x1bcaaa['y'],_0x380c72['rot_3'][_0x531a4a]=_0x1bcaaa['z'],_0x380c72['rot_0'][_0x531a4a]=_0x1bcaaa['w'],_0x380c72['scale_0'][_0x531a4a]=_0x5a3c46['x'],_0x380c72['scale_1'][_0x531a4a]=_0x5a3c46['y'],_0x380c72['scale_2'][_0x531a4a]=_0x5a3c46['z'],_0x380c72['motion_0'][_0x531a4a]=_0x218fc6['x'],_0x380c72['motion_1'][_0x531a4a]=_0x218fc6['y'],_0x380c72['motion_2'][_0x531a4a]=_0x218fc6['z'],_0x380c72['t_scale'][_0x531a4a]=_0x3aaa52['x'],_0x380c72['t'][_0x531a4a]=_0x3aaa52['y'],_0x380c72['f_dc_0'][_0x531a4a]=(_0x205b34['x']-(-0xffb+0x1a72*0x1+-0xa77+0.5))/_0x42dcb7,_0x380c72['f_dc_1'][_0x531a4a]=(_0x205b34['y']-(-0xd34+-0x1e20+0x2*0x15aa+0.5))/_0x42dcb7,_0x380c72['f_dc_2'][_0x531a4a]=(_0x205b34['z']-(-0xc64+0xa77+0x1ed+0.5))/_0x42dcb7,_0x380c72['opacity'][_0x531a4a]=_0x205b34['w']<=-0xc5c+-0x1*-0x1cb8+-0x2*0x82e?-(0x1acf+-0xc1a+-0x2e9*0x5):_0x205b34['w']>=-0xf93*-0x1+0x30d+-0x129f?0x11fd*-0x1+-0x2c*0x87+-0x16d*-0x1d:-Math['log']((-0x2610+0x15fa+0x1017)/_0x205b34['w']-(-0x1509+0x1b*-0xb+0x1633)),_0x3c60ed){for(let _0x2f3abd=-0x216e+0x2d8+0x1d*0x10e;_0x2f3abd<-0xbe9+0xf83+-0x36d;++_0x2f3abd)_0x380c72['f_rest_'+_0x2f3abd][_0x531a4a]=_0x3c60ed[_0x2f3abd];}let _0x7a9e9c={'x':_0x380c72['x'],'y':_0x380c72['y'],'z':_0x380c72['z'],'rot_1':_0x380c72['rot_1'],'rot_2':_0x380c72['rot_2'],'rot_3':_0x380c72['rot_3'],'rot_0':_0x380c72['rot_0'],'scale_0':_0x380c72['scale_0'],'scale_1':_0x380c72['scale_1'],'scale_2':_0x380c72['scale_2'],'motion_0':_0x380c72['motion_0'],'motion_1':_0x380c72['motion_1'],'motion_2':_0x380c72['motion_2'],'t_scale':_0x380c72['t_scale'],'t':_0x380c72['t'],'f_dc_0':_0x380c72['f_dc_0'],'f_dc_1':_0x380c72['f_dc_1'],'f_dc_2':_0x380c72['f_dc_2'],'opacity':_0x380c72['opacity']};_0x3c60ed&&(_0x7a9e9c={..._0x7a9e9c,'f_rest_0':_0x380c72['f_rest_0'],'f_rest_1':_0x380c72['f_rest_1'],'f_rest_2':_0x380c72['f_rest_2'],'f_rest_3':_0x380c72['f_rest_3'],'f_rest_4':_0x380c72['f_rest_4'],'f_rest_5':_0x380c72['f_rest_5'],'f_rest_6':_0x380c72['f_rest_6'],'f_rest_7':_0x380c72['f_rest_7'],'f_rest_8':_0x380c72['f_rest_8'],'f_rest_9':_0x380c72['f_rest_9'],'f_rest_10':_0x380c72['f_rest_10'],'f_rest_11':_0x380c72['f_rest_11'],'f_rest_12':_0x380c72['f_rest_12'],'f_rest_13':_0x380c72['f_rest_13'],'f_rest_14':_0x380c72['f_rest_14'],'f_rest_15':_0x380c72['f_rest_15'],'f_rest_16':_0x380c72['f_rest_16'],'f_rest_17':_0x380c72['f_rest_17'],'f_rest_18':_0x380c72['f_rest_18'],'f_rest_19':_0x380c72['f_rest_19'],'f_rest_20':_0x380c72['f_rest_20'],'f_rest_21':_0x380c72['f_rest_21'],'f_rest_22':_0x380c72['f_rest_22'],'f_rest_23':_0x380c72['f_rest_23'],'f_rest_24':_0x380c72['f_rest_24'],'f_rest_25':_0x380c72['f_rest_25'],'f_rest_26':_0x380c72['f_rest_26'],'f_rest_27':_0x380c72['f_rest_27'],'f_rest_28':_0x380c72['f_rest_28'],'f_rest_29':_0x380c72['f_rest_29'],'f_rest_30':_0x380c72['f_rest_30'],'f_rest_31':_0x380c72['f_rest_31'],'f_rest_32':_0x380c72['f_rest_32'],'f_rest_33':_0x380c72['f_rest_33'],'f_rest_34':_0x380c72['f_rest_34'],'f_rest_35':_0x380c72['f_rest_35'],'f_rest_36':_0x380c72['f_rest_36'],'f_rest_37':_0x380c72['f_rest_37'],'f_rest_38':_0x380c72['f_rest_38'],'f_rest_39':_0x380c72['f_rest_39'],'f_rest_40':_0x380c72['f_rest_40'],'f_rest_41':_0x380c72['f_rest_41'],'f_rest_42':_0x380c72['f_rest_42'],'f_rest_43':_0x380c72['f_rest_43'],'f_rest_44':_0x380c72['f_rest_44']});const _0x1c2365=Object['values'](_0x7a9e9c)['map'](_0x1218ae=>_0x1218ae['buffer']);self['postMessag'+'e']({'type':'decompress'+'ed','data':_0x7a9e9c},_0x1c2365);};}class xN extends me{constructor(){super(),h(this,'worker'),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+vN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x20895d=>{if(!this['worker'])return;const {data:_0x54b857}=_0x20895d;switch(_0x54b857['type']){case'decompress'+'ed':console['log']('decompress'+'ed'),this['fire']('decompress'+'ed',_0x54b857['data']);break;}};}['decompress'](_0x498f07,_0x3f08ac,_0x4cec6b,_0x479db0,_0x16d292,_0x15d369,_0x4d6938,_0x1bd397){const _0xaf3f16=[_0x3f08ac['buffer'],_0x479db0['buffer']];_0x16d292&&_0xaf3f16['push'](_0x16d292['buffer']),_0x15d369&&_0xaf3f16['push'](_0x15d369['buffer']),_0x4d6938&&_0xaf3f16['push'](_0x4d6938['buffer']),this['worker']['postMessag'+'e']({'type':'decompress','numSplats':_0x498f07,'chunkData':_0x3f08ac,'chunkSize':_0x4cec6b,'vertexData':_0x479db0,'shData0':_0x16d292,'shData1':_0x15d369,'shData2':_0x4d6938,'shBands':_0x1bd397},_0xaf3f16);}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}class TN{constructor(_0x12b4a0,_0x5cec06,_0x249bba,_0x89bfd9,_0x52cf82,_0x240d4e,_0x7ab506,_0x11e3e2){const _0x5be539=(_0x3073e7,_0x58a9b4)=>{const _0x2d13e0=(-0x2*-0xdaf+0x1*-0xc6b+-0xef2<<_0x58a9b4)-(0x3ef*0x1+-0xd*-0x1f8+-0x1d86);return(_0x3073e7&_0x2d13e0)/_0x2d13e0;},_0x3e177c=(_0x4a13e5,_0x5ae82a)=>{_0x4a13e5['x']=_0x5be539(_0x5ae82a>>>-0xda3+0x1149+-0x391,-0x1*0xa1b+0x126a+-0x844),_0x4a13e5['y']=_0x5be539(_0x5ae82a>>>-0x1*0x1d0b+-0x367+-0x1*-0x207d,0x1235*-0x1+0x1*0xfde+0x3*0xcb),_0x4a13e5['z']=_0x5be539(_0x5ae82a,0xe26+-0x665+-0x7b6);},_0x12a53f=(_0x48e7bd,_0x343656)=>{_0x48e7bd['x']=_0x5be539(_0x343656>>>-0x34*0x54+0x1e21+-0x9*0x171,-0x5c6+0xfc2*0x1+-0x9f4),_0x48e7bd['y']=_0x5be539(_0x343656>>>0x1690+-0xbd7+-0xaa9,0x422*-0x4+0x145c+-0x3cc),_0x48e7bd['z']=_0x5be539(_0x343656>>>0x71e+-0xb2e+0x8*0x83,-0x69+0xefe+0xe8d*-0x1),_0x48e7bd['w']=_0x5be539(_0x343656,-0x5*-0x74f+-0x71e+-0x1d65);},_0x2746da=(_0x430329,_0x4ef0e2)=>{const _0x11c0d9=(-0x25*0x100+0x4dd+0x2024)/(Math['sqrt'](-0xf1*-0x1d+-0x161c+-0x52f)*(-0x487+0x49*0x5+-0x1*-0x31a+0.5)),_0x134165=(_0x5be539(_0x4ef0e2>>>-0x1579+-0x8f6*0x2+-0x2f*-0xd7,0x132d+0x8*-0x148+-0x7*0x145)-(-0x10b*-0xf+0x18a5+-0x284a+0.5))*_0x11c0d9,_0x1f614d=(_0x5be539(_0x4ef0e2>>>-0x2*-0x2a0+0xb*-0x178+0xaf2,-0x47*-0x71+0x1*0x376+-0x22c3)-(-0x2566+-0x9d2+0x2f38+0.5))*_0x11c0d9,_0x5c6fe7=(_0x5be539(_0x4ef0e2,0x152*-0x2+-0x1*0x113f+0x13ed)-(0x1*0x1e49+0x3e7+0x1*-0x2230+0.5))*_0x11c0d9,_0x43d994=Math['sqrt'](0x23fe+-0x12a*0x2+-0x21a9*0x1-(_0x134165*_0x134165+_0x1f614d*_0x1f614d+_0x5c6fe7*_0x5c6fe7));switch(_0x4ef0e2>>>0xef9+-0x21e+-0xcbd){case 0x1411+0x3*-0x10f+-0x10e4:_0x430329['set'](_0x134165,_0x1f614d,_0x5c6fe7,_0x43d994);break;case-0x6ee+0xc+0x6e3:_0x430329['set'](_0x43d994,_0x1f614d,_0x5c6fe7,_0x134165);break;case-0x23bf+-0x1f67+-0x2*-0x2194:_0x430329['set'](_0x1f614d,_0x43d994,_0x5c6fe7,_0x134165);break;case-0x250e+0x2234+0x2dd:_0x430329['set'](_0x1f614d,_0x5c6fe7,_0x43d994,_0x134165);break;}},_0xd9799a=(_0x1f24cc,_0x24703a,_0xd27959)=>_0x1f24cc*(-0x109e+-0x12*0x207+-0x351d*-0x1-_0xd27959)+_0x24703a*_0xd27959,{chunkData:_0x15c749,chunkSize:_0x393f51,vertexData:_0x57ac84,shData0:_0xe14473,shData1:_0x1232ea,shData2:_0x41ea8f,shBands:_0x14aa3b}=_0x12b4a0,_0x32987e=[-0x870+0x25d9+-0x2*0xeb3,-0x19b7+0x4*0x5f3+-0x1f3*-0x1,0x14b*0x16+-0xe0c+0xe57*-0x1][_0x14aa3b-(0x1*-0x1685+0x53*-0x59+0x3361)],_0x3086b7=-0x130+0x4*0x785+-0x1cde;this['read']=_0x4de757=>{const _0x4e690a=Math['floor'](_0x4de757/(-0x163*0x1+0xfc6+-0x95*0x17))*_0x393f51;if(_0x5cec06&&(_0x3e177c(_0x5cec06,_0x57ac84[_0x4de757*_0x3086b7+(0x1*-0x1a19+-0x20dc+-0x3*-0x13a7)]),_0x5cec06['x']=_0xd9799a(_0x15c749[_0x4e690a+(-0x1b3e+0x14ea+-0x5a*-0x12)],_0x15c749[_0x4e690a+(0xf83+0x3*0x255+-0x167f*0x1)],_0x5cec06['x']),_0x5cec06['y']=_0xd9799a(_0x15c749[_0x4e690a+(-0x30d*-0x1+-0x64+-0x14*0x22)],_0x15c749[_0x4e690a+(-0x2ef+-0x9*0x23d+0x1718)],_0x5cec06['y']),_0x5cec06['z']=_0xd9799a(_0x15c749[_0x4e690a+(-0x10ee+-0x1b7+0x12a7)],_0x15c749[_0x4e690a+(-0x174+-0x1*-0xd53+-0xbda)],_0x5cec06['z'])),_0x249bba&&_0x2746da(_0x249bba,_0x57ac84[_0x4de757*_0x3086b7+(0x28f*-0xd+0x16b5+0xa8f)]),_0x89bfd9&&(_0x3e177c(_0x89bfd9,_0x57ac84[_0x4de757*_0x3086b7+(-0x240c+-0x83f*0x3+-0x1*-0x3ccb)]),_0x89bfd9['x']=_0xd9799a(_0x15c749[_0x4e690a+(0x4f*0x52+0x1f83+-0x38cb)],_0x15c749[_0x4e690a+(-0x1699+0x17b*-0x2+-0x18*-0x111)],_0x89bfd9['x']),_0x89bfd9['y']=_0xd9799a(_0x15c749[_0x4e690a+(-0x15e8+0x1*-0x251e+0x3b0d)],_0x15c749[_0x4e690a+(-0x20a9+-0xff7*-0x1+0x10bc)],_0x89bfd9['y']),_0x89bfd9['z']=_0xd9799a(_0x15c749[_0x4e690a+(-0x763+-0x162*-0x13+-0x12db)],_0x15c749[_0x4e690a+(-0x51+-0xd41+0xcd*0x11)],_0x89bfd9['z'])),_0x52cf82&&(_0x12a53f(_0x52cf82,_0x57ac84[_0x4de757*_0x3086b7+(-0x1094*0x2+-0x2383+0x44ae)]),_0x393f51>-0x65*0x62+0xc45+0x1a71&&(_0x52cf82['x']=_0xd9799a(_0x15c749[_0x4e690a+(-0xa6f+0x18*0xc4+-0x7e5*0x1)],_0x15c749[_0x4e690a+(0x191b*0x1+0x12c9+-0x2bd5)],_0x52cf82['x']),_0x52cf82['y']=_0xd9799a(_0x15c749[_0x4e690a+(-0x5*0x662+0x19f6+0x601)],_0x15c749[_0x4e690a+(0x225d+-0xf7e*-0x2+-0x741*0x9)],_0x52cf82['y']),_0x52cf82['z']=_0xd9799a(_0x15c749[_0x4e690a+(0x1919+-0x1bc1+0x2b6)],_0x15c749[_0x4e690a+(-0x6d*0xb+0x8b5*-0x3+0x1edf)],_0x52cf82['z']))),_0x240d4e&&(_0x3e177c(_0x240d4e,_0x57ac84[_0x4de757*_0x3086b7+(-0x5d5+-0x3*-0x139+0x22e)]),_0x240d4e['x']=_0xd9799a(_0x15c749[_0x4e690a+(-0x1*0x1bdf+0x4*0x8ff+0x1*-0x80b)],_0x15c749[_0x4e690a+(-0x88*-0x4+0xba5+-0xdb0)],_0x240d4e['x']),_0x240d4e['y']=_0xd9799a(_0x15c749[_0x4e690a+(-0x2*0xc82+-0x23e4+0x1*0x3cfb)],_0x15c749[_0x4e690a+(-0x17eb+0x1*0x1ca1+-0x4a0)],_0x240d4e['y']),_0x240d4e['z']=_0xd9799a(_0x15c749[_0x4e690a+(-0x1c3e+-0x875+0x24c7)],_0x15c749[_0x4e690a+(-0x1028+0x8e6+0x759)],_0x240d4e['z'])),_0x7ab506&&(_0x3e177c(_0x7ab506,_0x57ac84[_0x4de757*_0x3086b7+(0x700+0xa24+0x111f*-0x1)]),_0x7ab506['x']=_0xd9799a(_0x15c749[_0x4e690a+(0xcaa+-0x22a+-0x128*0x9)],_0x15c749[_0x4e690a+(0xa0c+0x17*0xcf+-0x1c8c)],_0x7ab506['x']),_0x7ab506['y']=_0xd9799a(_0x15c749[_0x4e690a+(-0x1*-0x9da+-0xbe2+0x222)],_0x15c749[_0x4e690a+(-0x23bd*0x1+0x7a2+0x13a*0x17)],_0x7ab506['y'])),_0x11e3e2&&_0x14aa3b>-0x1*-0xbdb+-0xbea+0xf){const _0x4eaf99=[_0xe14473,_0x1232ea,_0x41ea8f];for(let _0x298465=0x869*-0x4+0x2525+-0xd*0x45;_0x298465<-0x6*-0x655+-0x3d1*0x8+-0x773;++_0x298465)for(let _0x361df9=0x18a8+-0x7*-0x387+-0x3159;_0x361df9<-0x1e65+0x6c0+0x17b4;++_0x361df9)_0x11e3e2[_0x298465*(-0x2689+-0x1*0x1bce+0x2*0x2133)+_0x361df9]=_0x361df9<_0x32987e?_0x4eaf99[_0x298465][_0x4de757*(-0x80+-0x44e*0x1+0x4de)+_0x361df9]*((-0x49*-0x4+0x5*-0x15+0xb3*-0x1)/(-0xf62+0x112a+0x43*-0x3))-(-0x19c6+0x1683+0x347*0x1):0x5*0x2fc+-0x1*-0x2121+-0x300d;}};}}class wN{constructor(){h(this,'numSplats'),h(this,'comments'),h(this,'chunkData'),h(this,'vertexData'),h(this,'is4D'),h(this,'shData0'),h(this,'shData1'),h(this,'shData2'),h(this,'shBands');}['createIter'](_0x59a943,_0x2cc1a2,_0x708c48,_0xeebf00,_0x17b18c,_0x1e9ec4,_0x2e0a5b){return new TN(this,_0x59a943,_0x2cc1a2,_0x708c48,_0xeebf00,_0x17b18c,_0x1e9ec4,_0x2e0a5b);}['calcAabb'](_0x38f527){const {chunkData:_0x46e651,numChunks:_0x3c12a0,chunkSize:_0xa52b28}=this;let _0x130281=Math['exp'](Math['max'](_0x46e651[0xac1*0x1+0xb*0x1a3+-0x1cb9],_0x46e651[-0x2*0xb78+0x22*-0xfe+0x38b6],_0x46e651[0x83*0x1+0xdd1*-0x1+-0x473*-0x3])),_0x4f1ed2=_0x46e651[-0xbe2+-0xf0+0xcd2]-_0x130281,_0x217bc5=_0x46e651[-0x182d+0x15*0x192+0x466*-0x2]-_0x130281,_0x448023=_0x46e651[0x2*-0x535+-0x1934+0xf*0x260]-_0x130281,_0x2d3bea=_0x46e651[-0x26b3+-0x1*-0x9c2+-0xda*-0x22]+_0x130281,_0x47b521=_0x46e651[-0x1b12+-0x2324+0x3e3a]+_0x130281,_0x290bb6=_0x46e651[0x373*-0xb+0x88b*-0x1+0x2e81]+_0x130281;for(let _0x142aa1=-0x13c4+0x2*0xc59+-0x4ed;_0x142aa1<_0x3c12a0;++_0x142aa1){const _0x284902=_0x142aa1*_0xa52b28;_0x130281=Math['exp'](Math['max'](_0x46e651[_0x284902+(0x29*-0xda+0x20da+0x219)],_0x46e651[_0x284902+(0x691+0x25a5*-0x1+0x1f1e)],_0x46e651[_0x284902+(0x69*-0x10+-0x1394+0x1a2f)])),_0x4f1ed2=Math['min'](_0x4f1ed2,_0x46e651[_0x284902+(-0x5*0x145+0xf50+-0x8f7)]-_0x130281),_0x217bc5=Math['min'](_0x217bc5,_0x46e651[_0x284902+(0xab*0x18+-0x1bb*0x2+-0xc91)]-_0x130281),_0x448023=Math['min'](_0x448023,_0x46e651[_0x284902+(-0xddf*0x1+-0xad9*-0x3+-0x1*0x12aa)]-_0x130281),_0x2d3bea=Math['max'](_0x2d3bea,_0x46e651[_0x284902+(0x56+-0x8d2+0x1b3*0x5)]+_0x130281),_0x47b521=Math['max'](_0x47b521,_0x46e651[_0x284902+(-0x1*-0x2105+0x1e7a+-0x3f7b)]+_0x130281),_0x290bb6=Math['max'](_0x290bb6,_0x46e651[_0x284902+(0x2080*0x1+-0x19b7*-0x1+-0x3a32)]+_0x130281);}return _0x38f527['center']['set']((_0x4f1ed2+_0x2d3bea)*(-0x23e3+0x1*0x1d53+0x3c*0x1c+0.5),(_0x217bc5+_0x47b521)*(0x2624+-0x18*0x12c+-0xa04+0.5),(_0x448023+_0x290bb6)*(-0x227d+-0xd*-0x2a7+0x2+0.5)),_0x38f527['halfExtent'+'s']['set']((_0x2d3bea-_0x4f1ed2)*(0x5*-0x16b+0x4*-0x4d8+-0x10f*-0x19+0.5),(_0x47b521-_0x217bc5)*(-0x36a+0xd33+-0x9c9+0.5),(_0x290bb6-_0x448023)*(0x1bb7+0x1*0x21d7+-0x2*0x1ec7+0.5)),!(-0x2*0x10cf+-0xfa5+-0x1*-0x3143);}['getCenters'](_0x31945f){const {vertexData:_0x12985f,chunkData:_0x6b8232,numChunks:_0x31307c,chunkSize:_0x509285}=this;let _0x468c80,_0x5a1eec,_0x5dd3b2,_0x4c9a2b,_0x5a0523,_0x36a704;for(let _0x434eab=0x117a+-0x1fde+0xe64;_0x434eab<_0x31307c;++_0x434eab){const _0x481ff0=_0x434eab*_0x509285;_0x468c80=_0x6b8232[_0x481ff0+(0xc65+0x10df+-0x1d44)],_0x5a1eec=_0x6b8232[_0x481ff0+(-0x1fba+0x22d7+-0x31c)],_0x5dd3b2=_0x6b8232[_0x481ff0+(0xfdd*0x2+-0x31b+-0x1c9d)],_0x4c9a2b=_0x6b8232[_0x481ff0+(-0x943+-0xc99+0x15df)],_0x5a0523=_0x6b8232[_0x481ff0+(0x11d4*-0x1+0x89*0x47+-0x1427)],_0x36a704=_0x6b8232[_0x481ff0+(0x20*0xa+0x16fc+0x1*-0x1837)];const _0x3dc235=Math['min'](this['numSplats'],(_0x434eab+(0x124*0x18+-0x15c2+-0x59d*0x1))*(0xed5*0x1+-0x1087+-0x2*-0x159));for(let _0x455587=_0x434eab*(-0x85d*0x1+-0x2*-0xef+-0x1*-0x77f);_0x455587<_0x3dc235;++_0x455587){const _0x4361d7=_0x12985f[_0x455587*(0x222c+-0x645+-0x1be3)],_0x4002d8=(_0x4361d7>>>0x8d*0x41+0x1*0x70b+-0x2ac3)/(-0x145f*0x1+0x1218+0xa46),_0x3f8f58=(_0x4361d7>>>-0x19c6*-0x1+0x1682*0x1+-0x303d&-0x1057*0x2+-0xb*-0x364+-0x3*0x35)/(0x12*-0x12d+-0x14*0x13c+0x1*0x31d9),_0x15479e=(_0x4361d7&0xea5+0x19a4+-0x204a*0x1)/(0x19f*-0x5+0x1c8d+-0xc73);_0x31945f[_0x455587*(-0x119*0x1+0x991*-0x1+0xaad)+(-0x19*0x6d+-0xea2+0x1947)]=(-0x1f3*-0x6+0x2*0x99e+0x261*-0xd-_0x4002d8)*_0x468c80+_0x4002d8*_0x4c9a2b,_0x31945f[_0x455587*(0x1cee+0x418+-0x2103*0x1)+(0x155d+0x5aa+-0x1b06)]=(-0x519+0x235a+0x8*-0x3c8-_0x3f8f58)*_0x5a1eec+_0x3f8f58*_0x5a0523,_0x31945f[_0x455587*(0x2*-0x118a+-0x1*0x653+0x3*0xdce)+(0x2*0xe35+0xb*0x71+0x5*-0x6a7)]=(0x1063+0x1*-0x347+-0x1*0xd1b-_0x15479e)*_0x5dd3b2+_0x15479e*_0x36a704;}}}['getChunks'](_0xcf7af5){const {chunkData:_0x487b00,numChunks:_0x59f37d,chunkSize:_0x1f25e0}=this;let _0x309849,_0x352dbe,_0x352578,_0x5cc7ee,_0x1969e1,_0x87b959;for(let _0x57ba19=-0x1d11+-0x14eb+-0x31fc*-0x1;_0x57ba19<_0x59f37d;++_0x57ba19){const _0x264509=_0x57ba19*_0x1f25e0;_0x309849=_0x487b00[_0x264509+(-0x890+0x1e1c+-0x158c)],_0x352dbe=_0x487b00[_0x264509+(-0x228e*0x1+0x2*-0x417+0x2abd)],_0x352578=_0x487b00[_0x264509+(0x10a2+0x21a9+-0x3249)],_0x5cc7ee=_0x487b00[_0x264509+(0x16*-0x2b+-0x212d+0x24e2)],_0x1969e1=_0x487b00[_0x264509+(-0x5*0x6b1+0x1*-0x1b05+0x3c7e)],_0x87b959=_0x487b00[_0x264509+(-0x25*0x9e+0x52*-0x3e+0x2ab7)],_0xcf7af5[_0x57ba19*(-0xc5*-0x7+0x6*0xbd+-0x9cb)+(0xd1*0x1d+-0x296*0xe+0x1*0xc87)]=_0x309849,_0xcf7af5[_0x57ba19*(0x1*-0x10a5+-0x1bb9+0x2c64)+(0x10bf+0x35f*-0x3+0x6a1*-0x1)]=_0x352dbe,_0xcf7af5[_0x57ba19*(-0x24a3+0x179b+0xd0e)+(0x55e+0x25cc+-0x8*0x565)]=_0x352578,_0xcf7af5[_0x57ba19*(0x11c7+0x219e+0x335f*-0x1)+(-0xe6b+0x16*0xb6+0x9b*-0x2)]=_0x5cc7ee,_0xcf7af5[_0x57ba19*(0x61*-0xa+0x23b6*0x1+-0x1fe6)+(0xdc7+-0x37+-0xd8c)]=_0x1969e1,_0xcf7af5[_0x57ba19*(-0x17*-0x107+0x148e+0x55*-0x85)+(0x94*0x9+0x160d*-0x1+0x10de)]=_0x87b959;}}['calcFocalP'+'oint'](_0xec793c){const {chunkData:_0x4ba1b4,numChunks:_0x460a20,chunkSize:_0x245b64}=this;_0xec793c['x']=-0x20a9+-0x95f*-0x3+0x48c,_0xec793c['y']=-0x171e+-0x16*-0x40+0x119e,_0xec793c['z']=-0xdb2+-0x1f4c+0x2cfe*0x1;for(let _0x2b50c8=0x2351+-0x2397+0x1*0x46;_0x2b50c8<_0x460a20;++_0x2b50c8){const _0x456dbb=_0x2b50c8*_0x245b64;_0xec793c['x']+=_0x4ba1b4[_0x456dbb+(0x1*0x18bd+0xee6*0x1+-0x27a3)]+_0x4ba1b4[_0x456dbb+(0x275+0x157e+-0x10*0x17f)],_0xec793c['y']+=_0x4ba1b4[_0x456dbb+(-0xe0c+0xb2b*0x3+-0x2*0x9ba)]+_0x4ba1b4[_0x456dbb+(0xac3+0x18*0x15d+0x1*-0x2b77)],_0xec793c['z']+=_0x4ba1b4[_0x456dbb+(0x84+0x1*-0x1a5a+-0x19d8*-0x1)]+_0x4ba1b4[_0x456dbb+(0x3*0x664+-0x24c1+0x119a)];}_0xec793c['mulScalar']((-0x6b1+0x10bf+-0xa0e+0.5)/_0x460a20);}get['isCompress'+'ed'](){return!(-0x322+-0x22b4+0x1d*0x14e);}get['numChunks'](){return Math['ceil'](this['numSplats']/(-0x151*0x17+-0x1f4b+0x2*0x1f49));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}async['decompress'](){const _0x550e8e=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'],{shBands:_0x45e993}=this;if(_0x45e993>-0x163+-0x1*0xa13+-0x3*-0x3d2){const _0xcb2b0c=[];for(let _0x2b8956=-0x1*0x676+-0x703+0x1*0xd79;_0x2b8956<-0x1*-0xe8a+-0x335*-0x3+-0x17fc;++_0x2b8956)_0xcb2b0c['push']('f_rest_'+_0x2b8956);_0x550e8e['splice'](_0x550e8e['indexOf']('f_dc_0')+(0xb95+-0x5*0x5c5+-0x1*-0x1145),0xc4b+0x155c+-0x6bb*0x5,..._0xcb2b0c);}const _0x2ab28d=new xN();return _0x2ab28d['decompress'](this['numSplats'],this['chunkData'],this['chunkSize'],this['vertexData'],this['shData0'],this['shData1'],this['shData2'],this['shBands']),new Promise((_0x431c24,_0x13fe36)=>{_0x2ab28d['on']('decompress'+'ed',_0x23d97d=>{_0x2ab28d['destroy'](),_0x431c24(new zn([{'name':'vertex','count':this['numSplats'],'properties':_0x550e8e['map'](_0x189bb1=>({'type':'float','name':_0x189bb1,'storage':_0x23d97d[_0x189bb1],'byteSize':0x4}))}],this['comments']));});});}}async function EN(){const _0x1a99e7='super4d-ca'+'che-v1',_0x13063b={'maxAge':0x9a7ec800,'maxSize':0x280000000},_0x214ac7=new Uint8Array([0x198d*-0x1+0xc*0x33+0x35f*0x7,-0x5*-0x1c9+0x16ee+-0x1f6f*0x1,0x19d1+0x348+-0x1ca0,-0x1c34+0xda*0x22+-0xb6]),_0x4b4118=new Uint8Array([0x73*0x4+-0xd05*-0x1+-0xec7,-0x1c34+0x2051+-0x2*0x1dc,-0x1704+-0x1cf7+0x3469,0x1*0x40b+0x10b*0x8+-0xbff,0xcd1+-0x1261*0x2+0x10*0x185,0x218+-0x5c8+0x418,-0x8de*-0x4+0x9e2+-0x2cf5,0x2121+-0x1*-0x18e9+-0x39a9,-0x1*0x21d+-0x1*-0x1b34+0x18b3*-0x1,-0x2224+-0x2602+0x31*0x17b,-0x2fa*-0xd+-0x105e*0x1+-0x15e2,0x19*-0x139+0x168b+-0x18*-0x56]),_0x1add48=0x1*0x511+-0x17*-0x13d+-0x218c+0.28209479177387814,_0x3155c7=new Map([['char',Int8Array],['uchar',Uint8Array],['short',Int16Array],['ushort',Uint16Array],['int',Int32Array],['uint',Uint32Array],['float',Float32Array],['double',Float64Array]]);class _0x2ceb0b{constructor(_0x5d934c={}){this['options']={..._0x13063b,..._0x5d934c},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0x5de*0x6+0xf6*-0x2+0x78*-0x47,this['initialize'+'d']=!(0x1613+-0x1aad+-0x1*-0x49b);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x1a99e7);const _0xef585f=await this['cache']['keys'](),_0x1068c9=[];for(const _0x4eafb2 of _0xef585f){const _0x46704f=_0x4eafb2['url'],_0x1a0bea=await this['cache']['match'](_0x46704f);if(_0x1a0bea){const _0x96d5ad=(await _0x1a0bea['blob']())['size'],_0x14e872=_0x1a0bea['headers']['get']('x-cache-ti'+'me');_0x14e872&&_0x1068c9['push']({'url':_0x46704f,'size':_0x96d5ad,'cacheTime':parseInt(_0x14e872)});}}_0x1068c9['sort']((_0x4722f5,_0x43f2e2)=>_0x4722f5['cacheTime']-_0x43f2e2['cacheTime']);for(const _0x50e6b2 of _0x1068c9)this['cacheSizes']['set'](_0x50e6b2['url'],_0x50e6b2['size']),this['currentSiz'+'e']+=_0x50e6b2['size'],this['lruList']['push'](_0x50e6b2['url']);}catch(_0x420ad6){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x420ad6);}this['initialize'+'d']=!(-0x63*0x17+-0x45*-0x76+-0x16e9);}}async['get'](_0x291055){if(await this['init'](),!this['cache'])return null;try{const _0x530308=await this['cache']['match'](_0x291055);if(!_0x530308)return null;const _0x1e7162=_0x530308['headers']['get']('x-cache-ti'+'me');return _0x1e7162&&Date['now']()-parseInt(_0x1e7162)>this['options']['maxAge']?(await this['delete'](_0x291055),null):(this['updateLRU'](_0x291055),_0x530308);}catch{return null;}}async['set'](_0x4c2720,_0x203466){if(!(!this['cache']||_0x4c2720['startsWith']('blob:')))try{const _0x3b73bd=_0x203466['clone'](),_0x26883e=await _0x3b73bd['blob'](),_0x5cc70b=_0x26883e['size'];this['currentSiz'+'e']+_0x5cc70b>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x5cc70b);const _0x273b5e=new Headers(_0x3b73bd['headers']);_0x273b5e['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x1457a3=new Response(_0x26883e,{'status':_0x3b73bd['status'],'statusText':_0x3b73bd['statusText'],'headers':_0x273b5e});await this['cache']['put'](_0x4c2720,_0x1457a3),this['cacheSizes']['set'](_0x4c2720,_0x5cc70b),this['currentSiz'+'e']+=_0x5cc70b,this['updateLRU'](_0x4c2720);}catch(_0x1effe8){console['error']('Cache\x20set\x20'+'error:',_0x1effe8);}}['updateLRU'](_0x3e578d){const _0x21378b=this['lruList']['indexOf'](_0x3e578d);_0x21378b>-(-0x4*-0x7f1+-0x59e*0x3+0x15b*-0xb)&&this['lruList']['splice'](_0x21378b,0x26cf*-0x1+-0x469+0x2b39),this['lruList']['push'](_0x3e578d);}async['cleanupSpa'+'ce'](_0x1fee7a){const _0x451916=this['options']['maxSize']*(-0x1c41+-0x1bfc+0x383d+0.9);if(!(this['currentSiz'+'e']<=_0x451916))for(;this['lruList']['length']>-0x733*-0x3+0x2d*0x3d+-0x1029*0x2&&this['currentSiz'+'e']>_0x451916;){const _0xee1af3=this['lruList']['shift']();_0xee1af3&&await this['delete'](_0xee1af3);}}async['delete'](_0x47cade){if(this['cache'])try{await this['cache']['delete'](_0x47cade);const _0x13618a=this['cacheSizes']['get'](_0x47cade)||-0x19*-0x189+-0x1bf7*0x1+0x535*-0x2;this['currentSiz'+'e']-=_0x13618a,this['cacheSizes']['delete'](_0x47cade);const _0x2d3ed2=this['lruList']['indexOf'](_0x47cade);_0x2d3ed2>-(-0x3bb*0xa+0x1b18+0xa37)&&this['lruList']['splice'](_0x2d3ed2,-0x1ea2+-0x1c2d*-0x1+-0x12*-0x23);}catch(_0x43307e){console['error']('Cache\x20dele'+'te\x20error:',_0x43307e);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x1a603e=>Promise['all'](_0x1a603e['map'](_0x53871e=>{var _0x53e595;return(_0x53e595=this['cache'])==null?void(0x1*0x1972+0x8*-0x2aa+-0x422):_0x53e595['delete'](_0x53871e);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x1b01+-0x2301*0x1+0x800;}catch(_0x489843){console['error']('Cache\x20clea'+'r\x20error:',_0x489843);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x1d*0x13a+-0x1ebb+0x1*0x424d;}}class _0x2df6fe{constructor(_0x440db4=[],_0x6ed6b8={}){this['cacheManag'+'er']=new _0x2ceb0b(_0x6ed6b8['cache']),this['retryCount']=_0x6ed6b8['retryCount']||0x6*-0x77+-0x1*0x599+0x866,this['retryDelay']=_0x6ed6b8['retryDelay']||0x1410*0x1+-0x11f5+-0x27,this['maxConcurr'+'ency']=_0x6ed6b8['maxConcurr'+'ency']||0x1994+0x155b*0x1+-0x2eed,this['downloadQu'+'eue']=_0x440db4,this['isProcessi'+'ngDownload'+'Queue']=!(-0x650+0x907*0x1+-0x2b6),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(0x1*0x254f+0x2d*0xcf+-0x1*0x49b2);this['downloadQu'+'eue']['length']>-0x1c48+-0x4*-0x50d+0x814;)try{const _0xdafd97=this['downloadQu'+'eue']['splice'](0x1f41+0x1*0xb21+0x19*-0x1b2,this['maxConcurr'+'ency'])['map'](_0x25c516=>{if(!this['pendingRes'+'ponses']['has'](_0x25c516)){const _0x24ea0d=this['download'](_0x25c516);return this['pendingRes'+'ponses']['set'](_0x25c516,_0x24ea0d),_0x24ea0d['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x25c516);});}return Promise['resolve']();});await Promise['all'](_0xdafd97);}catch(_0x2d9dac){console['error']('Download\x20e'+'rror:',_0x2d9dac);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x1ba0+0x2f5*0xb+-0x2*0x273);}}}async['fetch'](_0x5e1ed0,_0x2a817b={}){if(this['pendingRes'+'ponses']['has'](_0x5e1ed0))return this['pendingRes'+'ponses']['get'](_0x5e1ed0);const {forceRefresh:_0x1c0eb1=!(-0x17a3+0x4c*0x5f+0x248*-0x2),..._0x519515}=_0x2a817b;this['pendingRes'+'ponses']['set'](_0x5e1ed0,this['download'](_0x5e1ed0,_0x519515));const _0x7b1fa7=await this['pendingRes'+'ponses']['get'](_0x5e1ed0);return this['pendingRes'+'ponses']['delete'](_0x5e1ed0),_0x7b1fa7;}async['download'](_0x94fe17,_0x1dadea={}){var _0xa7c533;await((_0xa7c533=this['cacheManag'+'er'])==null?void(0x120d+0x359+-0x1566):_0xa7c533['init']());const {forceRefresh:_0x50f4ba=!(-0x469*-0x2+-0x6f*-0x3+-0xa1e),..._0x1cbe01}=_0x1dadea;_0x50f4ba&&await this['cacheManag'+'er']['delete'](_0x94fe17);const _0x568377=await this['cacheManag'+'er']['get'](_0x94fe17);if(_0x568377)return _0x568377;let _0x30ada4;for(let _0x843513=0x1b94+0x1*-0x250f+0x97b;_0x843513<this['retryCount'];_0x843513++)try{const _0x299bae=await fetch(_0x94fe17,_0x1cbe01);if(!_0x299bae['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x299bae['status']);return await this['cacheManag'+'er']['set'](_0x94fe17,_0x299bae),_0x299bae;}catch(_0x1414a4){console['error']('Download\x20e'+'rror:',_0x1414a4),_0x30ada4=_0x1414a4,_0x843513<this['retryCount']-(0x10df+0x1c98+0x1fa*-0x17)&&await new Promise(_0x4774a7=>setTimeout(_0x4774a7,this['retryDelay']*(_0x843513+(0x1*0x1a4b+-0x1*-0x13d1+-0x2e1b))));}throw _0x30ada4;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){this['cacheManag'+'er']['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x968+0x13a+-0x82f*-0x1),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x16a4f8{constructor(){this['numSplats']=-0x2693*0x1+-0x5e3*-0x2+-0x8ef*-0x3,this['comments']=[],this['chunkData']=new Float32Array(-0x1*-0x6b9+-0x1444+-0x1*-0xd8b),this['vertexData']=new Uint32Array(0x1019+-0x21b0+0x1*0x1197),this['is4D']=!(-0x11f6+-0x17bd+0x29b3),this['shBands']=0x159c+0x2*-0x1a9+-0x124a,this['shData0']=new Uint8Array(-0x18dd+0x11ea+0x6f3),this['shData1']=new Uint8Array(0xe8a+0xa85+-0x190f),this['shData2']=new Uint8Array(-0x30c+0x20*-0x3e+-0x2*-0x566),this['elements']=[],this['isCompress'+'ed']=!(0x6fb*-0x5+-0xc*0x148+0x3247);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x584+-0x786*0x2+0x151*0x8));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}}class _0x2d931{constructor(_0x363e64,_0x3e1723=[]){this['elements']=_0x363e64,this['comments']=_0x3e1723,this['isCompress'+'ed']=!(-0x2438+-0x1b1b+-0x3f54*-0x1);}}class _0x402e76{constructor(_0x1d20de,_0x59433f){this['reader']=_0x1d20de,this['progressFu'+'nc']=_0x59433f,this['head']=-0x345*-0x3+-0x1*0x13c1+0x9f2,this['tail']=-0xe21+0x39a+0xa87;}async['read'](){var _0x53631f;const {value:_0x1292a6,done:_0x41838f}=await this['reader']['read']();if(_0x41838f)throw new Error('Stream\x20fin'+'ished\x20befo'+'re\x20end\x20of\x20'+'header');this['push'](_0x1292a6),(_0x53631f=this['progressFu'+'nc'])==null||_0x53631f['call'](this,_0x1292a6['byteLength']);}['push'](_0x59e924){if(!this['data'])this['data']=_0x59e924,this['view']=new DataView(this['data']['buffer']),this['tail']=_0x59e924['length'];else{const _0x461e3d=this['tail']-this['head'],_0x3aa81d=_0x461e3d+_0x59e924['length'];if(this['data']['length']>=_0x3aa81d)this['head']>0x4b9+0x273+-0x72c?(this['data']['copyWithin'](0xd11+-0x1bbc+0xeab,this['head'],this['tail']),this['data']['set'](_0x59e924,_0x461e3d),this['head']=-0xc92*0x1+0x21bf+0x1a1*-0xd,this['tail']=_0x3aa81d):(this['data']['set'](_0x59e924,this['tail']),this['tail']+=_0x59e924['length']);else{const _0xe269ed=new Uint8Array(_0x3aa81d);this['head']>0x579*-0x1+-0x184*-0x5+-0x21b*0x1||this['tail']<this['data']['length']?_0xe269ed['set'](this['data']['subarray'](this['head'],this['tail']),0x1d5e+-0x1*0x84b+-0x1513):_0xe269ed['set'](this['data'],0x219a+0x1*-0x1085+0x1*-0x1115),_0xe269ed['set'](_0x59e924,_0x461e3d),this['data']=_0xe269ed,this['view']=new DataView(this['data']['buffer']),this['head']=0x15ff+0x3*0x99+-0x17ca,this['tail']=_0x3aa81d;}}}['compact'](){this['head']>-0x1*-0xa58+-0xc2*-0x23+-0xd*0x2d6&&(this['data']['copyWithin'](0x14be+-0x8da+0x2f9*-0x4,this['head'],this['tail']),this['tail']-=this['head'],this['head']=-0x1f0*0x13+-0x1*-0x3e5+0x20eb);}get['remaining'](){return this['tail']-this['head'];}['getInt8'](){const _0x3d3cd1=this['view']['getInt8'](this['head']);return this['head']++,_0x3d3cd1;}['getUint8'](){const _0x36f05e=this['view']['getUint8'](this['head']);return this['head']++,_0x36f05e;}['getInt16'](){const _0x5582c1=this['view']['getInt16'](this['head'],!(0x2*-0x1062+-0x5*0x43f+0x1*0x35ff));return this['head']+=-0x9d*-0x1d+0x3f*-0x95+0x12e4,_0x5582c1;}['getUint16'](){const _0x2e9c7e=this['view']['getUint16'](this['head'],!(-0xa1*-0x11+0x3*0x125+-0xe20));return this['head']+=-0x24fb+-0x8*0x4e+0x276d,_0x2e9c7e;}['getInt32'](){const _0x5f2bff=this['view']['getInt32'](this['head'],!(0x2*-0x3f8+-0x1*-0x1999+-0x1*0x11a9));return this['head']+=-0x23e5+0xa7+-0x2*-0x11a1,_0x5f2bff;}['getUint32'](){const _0x2ef279=this['view']['getUint32'](this['head'],!(-0x3c6+0x235d*0x1+-0x1f97));return this['head']+=0x145b+-0x1d5d+0x906,_0x2ef279;}['getFloat32'](){const _0x11b51b=this['view']['getFloat32'](this['head'],!(0xa*0x2c8+-0x5*-0x1d2+-0x24ea));return this['head']+=0x5*-0x519+0x3a5*-0x1+0x1d26,_0x11b51b;}['getFloat64'](){const _0x1659cc=this['view']['getFloat64'](this['head'],!(-0x6d7+-0x23a0+0x7*0x611));return this['head']+=-0x1d6e+0x21f8*0x1+-0x1*0x482,_0x1659cc;}}class _0x824154{constructor(_0x5ad32c,_0x184369,_0xe7e2ca){this['x']=_0x5ad32c,this['y']=_0x184369,this['z']=_0xe7e2ca;}}class _0x5ec4e9{constructor(_0x333d99,_0x28d1ce,_0xa3a770,_0x17b30b){this['x']=_0x333d99,this['y']=_0x28d1ce,this['z']=_0xa3a770,this['w']=_0x17b30b;}}class _0x320ea7{constructor(_0x1dbf35,_0x2a3211,_0x4c0ee9,_0x3cb61){this['x']=_0x1dbf35,this['y']=_0x2a3211,this['z']=_0x4c0ee9,this['w']=_0x3cb61;}['set'](_0x254fff,_0x1a24b9,_0x190bbf,_0x4cd9f8){this['x']=_0x254fff,this['y']=_0x1a24b9,this['z']=_0x190bbf,this['w']=_0x4cd9f8;}}class _0x43e205{constructor(_0x208478,_0x1ce150,_0x10ab0b,_0x364909,_0xc953f2,_0x1e1ad8,_0x47452e,_0x4a0606,_0x220ce2,_0x52486a,_0x4758c0,_0x53026f,_0x5705d6,_0x3ab2fd){const _0x50b482=(_0x485ce7,_0x241acc)=>{const _0x252f8a=(-0xe58+-0x134a+0x21a3<<_0x241acc)-(0xdc7+-0x155a+0x794);return(_0x485ce7&_0x252f8a)/_0x252f8a;},_0x23e77f=(_0x2a9592,_0x5ba838)=>{_0x2a9592['x']=_0x50b482(_0x5ba838>>>0x4de*-0x4+-0x432*0x6+-0x1*-0x2cb9,0x3d*-0x56+0x5f1+-0xe98*-0x1),_0x2a9592['y']=_0x50b482(_0x5ba838>>>0x2233+-0x13*0x11b+-0x103*0xd,-0x1*-0xdfa+0x92c+-0x3a*0x66),_0x2a9592['z']=_0x50b482(_0x5ba838,-0x9b*0x3+-0x41e*-0x1+-0x242);},_0x223a8b=(_0x245b88,_0x3ba73d)=>{_0x245b88['x']=_0x50b482(_0x3ba73d>>>0x237c+-0x1f*0x1+-0x2345,0x2610+0x2c6*-0xb+-0x282*0x3),_0x245b88['y']=_0x50b482(_0x3ba73d>>>-0x4*0x59d+0x1*-0x2001+0x3685,0x95*-0x31+0x1*-0x1771+-0xa*-0x533),_0x245b88['z']=_0x50b482(_0x3ba73d>>>0x1d8b*0x1+0x100*0x7+-0x2483,-0x2333*0x1+-0x1573+0x38ae),_0x245b88['w']=_0x50b482(_0x3ba73d,0x1*0x1cfe+-0x1*-0x24d3+-0x1*0x41c9);},_0x2bebe9=(_0x19726a,_0x4ce8c3)=>{const _0x175c4a=(-0x93*-0x2c+0xa02+0x1*-0x2345)/(Math['sqrt'](-0x1*0x46b+0x110c*0x2+-0x1dab)*(0xcde+0x1*0xeb4+0x1b92*-0x1+0.5)),_0xf59e06=(_0x50b482(_0x4ce8c3>>>0x2f2+-0x1aad+0x17cf,0x11fe+0x1b*-0x10e+0xa86*0x1)-(-0x2*0xb46+0xd7b+0x911+0.5))*_0x175c4a,_0x5af594=(_0x50b482(_0x4ce8c3>>>0xcf2*0x1+-0x458+-0x890,0x1f3*0x1+-0x18b+-0x5e)-(-0x19*-0x6d+-0xcac*-0x2+-0xf9*0x25+0.5))*_0x175c4a,_0x341fbc=(_0x50b482(_0x4ce8c3,0x1cfc+0x61*0x13+-0x2425)-(0x138e+0x26d8+-0x3a66+0.5))*_0x175c4a,_0x1af651=Math['sqrt'](0x1*0x1afb+0x1607*-0x1+0x1*-0x4f3-(_0xf59e06*_0xf59e06+_0x5af594*_0x5af594+_0x341fbc*_0x341fbc));switch(_0x4ce8c3>>>0xd48+0xdb0+-0x1ada){case-0x1fab+0x794*-0x2+0x2ed3:_0x19726a['set'](_0xf59e06,_0x5af594,_0x341fbc,_0x1af651);break;case-0x1d34+0x21c9+-0x494:_0x19726a['set'](_0x1af651,_0x5af594,_0x341fbc,_0xf59e06);break;case 0xaae+-0xb41+0x95:_0x19726a['set'](_0x5af594,_0x1af651,_0x341fbc,_0xf59e06);break;case 0x2367+-0x1c2*-0x10+0x2*-0x1fc2:_0x19726a['set'](_0x5af594,_0x341fbc,_0x1af651,_0xf59e06);break;}},_0x4882df=(_0x52b1d2,_0x43913a,_0x4221e6)=>_0x52b1d2*(0x1*0x28f+-0x12e4+0x1056-_0x4221e6)+_0x43913a*_0x4221e6,_0x4b36e1=[-0x11bc+0x1bf4*-0x1+-0x1*-0x2db3,-0x4*0x616+0x1aec*-0x1+0x334c,0x3*0x7b+0x1f2+-0x1*0x354][_0x47452e-(-0x2bb+0xc41+-0x985*0x1)],_0x5096f5=-0x9*-0xc2+-0x693+-0x39;this['read']=_0x5d042b=>{const _0x586a81=Math['floor'](_0x5d042b/(-0x12*-0x223+-0x3f*0xb+0x29*-0xd9))*_0x1ce150;if(_0x4a0606&&(_0x23e77f(_0x4a0606,_0x10ab0b[_0x5d042b*_0x5096f5+(0x1e43+-0x292+0x8b*-0x33)]),_0x4a0606['x']=_0x4882df(_0x208478[_0x586a81+(-0x82*-0x10+0x1c75*0x1+0x1*-0x2495)],_0x208478[_0x586a81+(-0x1*0xade+-0x3*-0x145+0x712)],_0x4a0606['x']),_0x4a0606['y']=_0x4882df(_0x208478[_0x586a81+(0x1751+0x24b1+-0x3c01)],_0x208478[_0x586a81+(0xf5*0x13+-0x216a+0xf3f)],_0x4a0606['y']),_0x4a0606['z']=_0x4882df(_0x208478[_0x586a81+(-0xa8c+0xf*-0x20c+0x2942)],_0x208478[_0x586a81+(0x10fd+-0x368*0x2+-0x19*0x68)],_0x4a0606['z'])),_0x220ce2&&_0x2bebe9(_0x220ce2,_0x10ab0b[_0x5d042b*_0x5096f5+(-0xc*-0xc8+-0xf5c+-0xdb*-0x7)]),_0x52486a&&(_0x23e77f(_0x52486a,_0x10ab0b[_0x5d042b*_0x5096f5+(-0x2227+0x1*-0x95+0x22be)]),_0x52486a['x']=_0x4882df(_0x208478[_0x586a81+(0xd*0x2db+0x1*-0x171d+-0xdfc)],_0x208478[_0x586a81+(-0x1692+0xc84+-0x3f*-0x29)],_0x52486a['x']),_0x52486a['y']=_0x4882df(_0x208478[_0x586a81+(-0x5*-0x36d+-0xc77+0x4a3*-0x1)],_0x208478[_0x586a81+(0x8b7+0xd*0xca+0x12ef*-0x1)],_0x52486a['y']),_0x52486a['z']=_0x4882df(_0x208478[_0x586a81+(-0x1*-0x21f1+0x15e1+-0x2*0x1be5)],_0x208478[_0x586a81+(-0x3*0x283+0x3f*0x3d+-0x76f)],_0x52486a['z'])),_0x4758c0&&(_0x223a8b(_0x4758c0,_0x10ab0b[_0x5d042b*_0x5096f5+(-0x65*0x4+0x21d+0x2*-0x43)]),_0x1ce150>0x77*0x29+-0xb4b+-0x7b8&&(_0x4758c0['x']=_0x4882df(_0x208478[_0x586a81+(0x2*-0x3dd+0x1842+-0x5*0x34c)],_0x208478[_0x586a81+(0x887+-0x1e23*0x1+0x15ab)],_0x4758c0['x']),_0x4758c0['y']=_0x4882df(_0x208478[_0x586a81+(-0x2417*0x1+0x10*0x1b7+0x4*0x22d)],_0x208478[_0x586a81+(0x7ef*-0x4+0x14c3+0xb09)],_0x4758c0['y']),_0x4758c0['z']=_0x4882df(_0x208478[_0x586a81+(-0x2b4+0x7a*-0x2f+-0x5c*-0x46)],_0x208478[_0x586a81+(0x245a+0x1b4d+-0xa99*0x6)],_0x4758c0['z']))),_0x53026f&&(_0x23e77f(_0x53026f,_0x10ab0b[_0x5d042b*_0x5096f5+(0x1962+-0x67*-0x59+0x3d2d*-0x1)]),_0x53026f['x']=_0x4882df(_0x208478[_0x586a81+(-0x12*-0x1df+0x235e+-0x44fa)],_0x208478[_0x586a81+(-0x1*0xd6c+0x2b3*-0x9+0x25cc)],_0x53026f['x']),_0x53026f['y']=_0x4882df(_0x208478[_0x586a81+(-0x1552+-0x5*-0x757+0x28d*-0x6)],_0x208478[_0x586a81+(-0x1874+-0x2*0xc7c+0x3182)],_0x53026f['y']),_0x53026f['z']=_0x4882df(_0x208478[_0x586a81+(-0x1*0xb1b+-0xb89+0x16b8)],_0x208478[_0x586a81+(-0x1e3f+0x26fa+-0x8a4)],_0x53026f['z'])),_0x5705d6&&(_0x23e77f(_0x5705d6,_0x10ab0b[_0x5d042b*_0x5096f5+(-0x784+0x818+-0x8f)]),_0x5705d6['x']=_0x4882df(_0x208478[_0x586a81+(-0x2375+0x13*-0xd1+0x3310)],_0x208478[_0x586a81+(-0x1f*0xfd+-0x1*-0x5ba+0x1902)],_0x5705d6['x']),_0x5705d6['y']=_0x4882df(_0x208478[_0x586a81+(-0x425*0x5+-0x212f+-0x1f*-0x1be)],_0x208478[_0x586a81+(-0x1771*-0x1+-0x175+-0x15e1)],_0x5705d6['y'])),_0x3ab2fd&&_0x47452e>0x1a4d+0x43*0x59+-0x3198){const _0x5173f7=[_0x364909,_0xc953f2,_0x1e1ad8];for(let _0xf9351a=0x2627*-0x1+0x169f+0xf88;_0xf9351a<-0xe23+0x204b*-0x1+0x2e71*0x1;++_0xf9351a)for(let _0x1cd0d3=0x22b5+0x4*-0x157+-0x1d59;_0x1cd0d3<-0x7a*-0x1+-0xd3c+0xcd1;++_0x1cd0d3)_0x3ab2fd[_0xf9351a*(-0x1863+0xbd*-0x29+-0x261*-0x17)+_0x1cd0d3]=_0x1cd0d3<_0x4b36e1?_0x5173f7[_0xf9351a][_0x5d042b*(-0x543+-0x3*0xbc3+0x289c)+_0x1cd0d3]*((-0x1bbd+-0x1022+0x2be7)/(0xb*0x209+0x2e4+-0x1848))-(0x36e*0x2+0x49*-0x61+0x14d1):0x4aa+0x26ea+-0xae5*0x4;}};}}self['onmessage']=async _0x239965=>{var _0x1fd37d,_0x48c0e8,_0x1ccf5f;const {data:_0x569f61}=_0x239965;switch(_0x569f61['type']){case'initWorker':globalThis['loadUrlLis'+'t']=_0x569f61['loadUrlLis'+'t'],globalThis['fetchWorke'+'r']=new _0x2df6fe(globalThis['loadUrlLis'+'t']);break;case'destroyWor'+'ker':(_0x1fd37d=globalThis['fetchWorke'+'r'])==null||_0x1fd37d['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['loadUrlLis'+'t']=[];break;case'loadPly':const {url:_0x3b44d1,decompress:_0x314ca7}=_0x569f61;try{globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x2df6fe(globalThis['loadUrlLis'+'t']));const _0x5f533a=await globalThis['fetchWorke'+'r']['fetch'](_0x3b44d1);if(!_0x5f533a||!_0x5f533a['body'])self['postMessag'+'e']({'type':'error','data':'Error\x20load'+'ing\x20resour'+'ce','url':_0x3b44d1});else{const _0x56bdaa=parseInt(_0x5f533a['headers']['get']('content-le'+'ngth')??'0',-0x1*0x6b2+0x2615*-0x1+0x2cd1);self['postMessag'+'e']({'type':'totalLengt'+'h','totalLength':_0x56bdaa,'bytes':0x0,'url':_0x3b44d1});let _0x53d193=await _0x25fe76(_0x5f533a['body']['getReader'](),_0x50669d=>{self['postMessag'+'e']({'type':'progress','bytes':_0x50669d,'totalLength':_0x56bdaa,'url':_0x3b44d1});});if(_0x314ca7&&_0x53d193['isCompress'+'ed']){const _0x57315c=_0x374347(_0x53d193),_0x2ffec1=(_0x48c0e8=_0x57315c==null?void(-0x1edb+0x1*0xdff+0x10dc):_0x57315c['elements'][-0x2*0x10fc+-0x3*0x227+0x286d])==null?void(0x260c+-0x369+0x22a3*-0x1):_0x48c0e8['properties']['map'](_0x5d4a6b=>_0x5d4a6b['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x57315c,'url':_0x3b44d1},_0x2ffec1);}else{if(_0x53d193['isCompress'+'ed']){const _0x2d431d=['chunkData','vertexData'];_0x53d193['shData0']&&_0x2d431d['push']('shData0','shData1','shData2');const _0x32daca=_0x2d431d['map'](_0x1d1158=>{var _0x2eac93;return(_0x2eac93=_0x53d193[_0x1d1158])==null?void(-0x3e6+0x5b9+-0x1*0x1d3):_0x2eac93['buffer'];});self['postMessag'+'e']({'type':'splatData','data':_0x53d193,'url':_0x3b44d1},_0x32daca);}else{_0x53d193=_0x44e27f(_0x53d193);const _0x43bebd=(_0x1ccf5f=_0x53d193==null?void(0x187*-0x1+-0x4*-0x3d4+-0xdc9):_0x53d193['elements'][-0x1f*0xa3+-0x17*-0x1+0x13a6])==null?void(-0x3*-0x178+-0x76f*0x4+-0x2*-0xcaa):_0x1ccf5f['properties']['map'](_0x2a263c=>_0x2a263c['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x53d193,'url':_0x3b44d1},_0x43bebd);}}}}catch(_0x1e74d8){self['postMessag'+'e']({'type':'error','data':_0x1e74d8['message'],'url':_0x3b44d1});}break;}};const _0x44e27f=_0x1f6c14=>{var _0xc75372;const _0x3557af=(_0xc75372=_0x1f6c14==null?void(-0xdd3*-0x1+-0x301+0xa*-0x115):_0x1f6c14['elements'][-0x858*0x4+-0x2*-0xb16+-0x1de*-0x6])==null?void(-0x835+0x1b37*-0x1+0x236c):_0xc75372['properties']['find'](_0x1b390f=>_0x1b390f['name']==='opacity');if(_0x3557af){for(let _0x4dd1f9=-0x4a2*-0x2+-0x7f3+-0x151;_0x4dd1f9<_0x3557af['storage']['length'];_0x4dd1f9++)_0x3557af['storage'][_0x4dd1f9]=(0xb65*-0x1+-0x1ce3+0x2849)/(-0x9cf+0x141b+-0xa4b+Math['exp'](-_0x3557af['storage'][_0x4dd1f9]));}return _0x1f6c14;},_0x2a8d33=_0x30d3fd=>{const _0x5a5ec5=[],_0x29aa62=[];let _0x36f5da;for(let _0x3a87b1=0x1*-0x1d2c+-0xb2a+0x2857;_0x3a87b1<_0x30d3fd['length'];++_0x3a87b1){const _0xef281d=_0x30d3fd[_0x3a87b1]['split']('\x20');switch(_0xef281d[-0x215*0x1+0x234a*0x1+-0x2135]){case'comment':_0x29aa62['push'](_0xef281d['slice'](0x192a+0x24f1+0x2*-0x1f0d)['join']('\x20'));break;case'format':_0x36f5da=_0xef281d[0x10f5+0xe76+-0x1f6a];break;case'element':_0x5a5ec5['push']({'name':_0xef281d[-0xadf+0x2*0x1348+-0x1bb0],'count':parseInt(_0xef281d[0x1*0xfd6+0x1e71+-0x2e45],0xf38+0x1e96+-0x2dc4),'properties':[]});break;case'property':{if(!_0x3155c7['has'](_0xef281d[-0x1b37+0x1fb1+-0x479]))throw new Error('Unrecogniz'+'ed\x20propert'+'y\x20data\x20typ'+'e\x20\x27'+_0xef281d[-0x2*-0x10f1+0x7b9+0x6*-0x6ef]+('\x27\x20in\x20ply\x20h'+'eader'));_0x5a5ec5[_0x5a5ec5['length']-(-0x17*0x4a+-0x401*0x4+-0x33d*-0x7)]['properties']['push']({'type':_0xef281d[0x2445+-0xb79+-0x18cb],'name':_0xef281d[0xab*0x2e+0x1616+0x3*-0x119a],'storage':null,'byteSize':_0x3155c7['get'](_0xef281d[0xb77+0x152*-0x8+-0x2*0x73])['BYTES_PER_'+'ELEMENT']});break;}default:throw new Error('Unrecogniz'+'ed\x20header\x20'+'value\x20\x27'+_0xef281d[-0x3*0x497+-0x1e3+0x29c*0x6]+('\x27\x20in\x20ply\x20h'+'eader'));}}return{'elements':_0x5a5ec5,'format':_0x36f5da,'comments':_0x29aa62};},_0x2e46c8=_0x51263f=>{const _0x3f3ece=['min_x','min_y','min_z','max_x','max_y','max_z','min_scale_'+'x','min_scale_'+'y','min_scale_'+'z','max_scale_'+'x','max_scale_'+'y','max_scale_'+'z','min_r','min_g','min_b','max_r','max_g','max_b','min_motion'+'_x','min_motion'+'_y','min_motion'+'_z','max_motion'+'_x','max_motion'+'_y','max_motion'+'_z','min_time_s'+'cale','max_time_s'+'cale','min_time','max_time'],_0x48fa55=['packed_pos'+'ition','packed_rot'+'ation','packed_sca'+'le','packed_col'+'or','packed_mot'+'ion','packed_tim'+'e'],_0x5566d2=new Array(-0x2a9*-0x9+-0x2f*0x9d+0x50f)['fill']('')['map']((_0x4d7610,_0x1f6582)=>'f_rest_'+_0x1f6582),_0x574c5e=()=>_0x51263f[-0x1005+-0x7e2+0x1d*0xd3]['name']==='chunk'&&_0x51263f[-0xce8+-0x2620+0x238*0x17]['properties']['every']((_0x4fdcaf,_0x33001a)=>_0x4fdcaf['name']===_0x3f3ece[_0x33001a]&&_0x4fdcaf['type']==='float')&&_0x51263f[0x16d8+-0xdba+-0x91d]['name']==='vertex'&&_0x51263f[-0x3*0x445+0x1*0x329+0x9a7]['properties']['every']((_0xa8bfca,_0x4ddb28)=>_0xa8bfca['name']===_0x48fa55[_0x4ddb28]&&_0xa8bfca['type']==='uint'),_0x17881a=()=>_0x51263f[0xd6*0x2c+0x1a6c+-0x1f99*0x2]['name']==='sh'&&[-0x496*-0x1+0x39d*0x5+-0x169e,0x829*-0x1+0x7d4+0x6d,-0x263+-0xa85+0xd15]['indexOf'](_0x51263f[-0x23c2*-0x1+0x1*-0xc0b+0x77*-0x33]['properties']['length'])!==-(0x1e67+-0x21e3+0x37d)&&_0x51263f[-0x20b7+0xf2b*-0x1+0x2fe4]['properties']['every']((_0x1278c2,_0x544ec0)=>_0x1278c2['name']===_0x5566d2[_0x544ec0]&&_0x1278c2['type']==='uchar');return _0x51263f['length']===-0x1*0x16e2+-0x10a9+-0x465*-0x9&&_0x574c5e()||_0x51263f['length']===0x1*-0x1af7+0xcad+0x1*0xe4d&&_0x574c5e()&&_0x17881a();},_0x5f1af1=_0x3d0db5=>_0x3d0db5['length']===-0x186e+0x2c8*0x3+-0x1*-0x1017&&_0x3d0db5[0x104d+-0x4d3*-0x4+-0x2399]['name']==='vertex'&&_0x3d0db5[0x13fc*-0x1+-0x13e3+-0x27df*-0x1]['properties']['every'](_0x1c267c=>_0x1c267c['type']==='float'),_0x1d2b74=async(_0x985a54,_0x2c62f7,_0x3f335f)=>{const _0x53e50b=new _0x16a4f8();_0x53e50b['comments']=_0x3f335f;const _0x11938a=_0x2c62f7[0xa8a+0x1ca5+-0x7*0x599]['count'],_0x540966=_0x2c62f7[-0x1d30+-0x2b*-0x90+0x14*0x40]['properties']['length'],_0x5f1160=_0x2c62f7[0x1*-0x21e3+0xbd4+-0x8*-0x2c2]['count'],_0x1f4cda=_0x2c62f7[-0x107*0x2+0x6cc+0x4bd*-0x1]['properties']['some'](_0x26f539=>_0x26f539['name']==='packed_tim'+'e'),_0x1cdf78=(_0x244be1=>{const _0x387ad4=Math['ceil'](Math['sqrt'](_0x244be1)),_0x21c03f=Math['ceil'](_0x244be1/_0x387ad4);return _0x387ad4*_0x21c03f;})(_0x5f1160);_0x53e50b['numSplats']=_0x5f1160,_0x53e50b['is4D']=_0x1f4cda,_0x53e50b['chunkData']=new Float32Array(_0x11938a*_0x540966),_0x53e50b['vertexData']=new Uint32Array(_0x1cdf78*(0x11f*0x12+-0x4*0xfb+0x81e*-0x2));const _0x403894=async(_0x32055d,_0x49e028)=>{const _0x1ac06e=new Uint8Array(_0x32055d);let _0x30e8d5=-0xcc1+-0x578+-0x1239*-0x1;for(;_0x30e8d5<_0x49e028;){for(;_0x985a54['remaining']===-0x1d40+0x3d+0x1d03;)await _0x985a54['read']();const _0x3bd829=Math['min'](_0x49e028-_0x30e8d5,_0x985a54['remaining']),_0x12fdc7=_0x985a54['data'];for(let _0x225ac1=-0x1659*-0x1+0x4ff*0x3+-0xa2*0x3b;_0x225ac1<_0x3bd829;++_0x225ac1)_0x1ac06e[_0x30e8d5++]=_0x12fdc7[_0x985a54['head']++];}};if(await _0x403894(_0x53e50b['chunkData']['buffer'],_0x11938a*_0x540966*(-0xb66*0x2+-0x12a8+-0xa5e*-0x4)),await _0x403894(_0x53e50b['vertexData']['buffer'],_0x5f1160*(-0x1dd8+-0x1a00+0x37de)*(-0x2*-0x389+-0x2*0x1062+0xcdb*0x2)),_0x2c62f7['length']===-0xb*0xe6+-0x1*0x164a+0x6b*0x4d){const _0x23f7fa=_0x1cdf78*(-0x110+-0x1*-0x676+-0x556),_0x41f40c=new Uint8Array(_0x23f7fa),_0xa53414=new Uint8Array(_0x23f7fa),_0x15da02=new Uint8Array(_0x23f7fa),_0x49e5d2=0x2*-0x18e+-0x1d75+0x2491,_0x4eaa6b=_0x2c62f7[-0x2de+0x4*0x78c+0x36a*-0x8]['properties']['length']/(-0x2068+0xfd3+0x6*0x2c4),_0x22b4f3=new Uint8Array(_0x49e5d2*_0x4eaa6b*(-0xf06+0x5*-0x1bb+0x17b0));for(let _0x455719=-0xa68+0x1255+0x1*-0x7ed;_0x455719<_0x53e50b['numSplats'];_0x455719+=_0x49e5d2){const _0xa49bdf=Math['min'](_0x49e5d2,_0x53e50b['numSplats']-_0x455719);await _0x403894(_0x22b4f3['buffer'],_0xa49bdf*_0x4eaa6b*(0x6df+-0x1bac+0x30*0x6f));for(let _0x1a40db=-0x1*0xbe+-0x5c1+-0x67f*-0x1;_0x1a40db<_0xa49bdf;++_0x1a40db)for(let _0x1e249a=0xeaa*0x1+-0x25a2+-0x5*-0x498;_0x1e249a<-0x3*0x87d+-0x4*-0x8eb+-0xa26;++_0x1e249a){const _0x5ba627=(_0x455719+_0x1a40db)*(-0x373*-0xa+-0x1*0x2315+0xa7)+_0x1e249a;_0x1e249a<_0x4eaa6b?(_0x41f40c[_0x5ba627]=_0x22b4f3[(_0x1a40db*(0x8a4+0x84f+-0x10f0)+(0x257*-0x5+-0xaeb*-0x1+-0x5*-0x28))*_0x4eaa6b+_0x1e249a],_0xa53414[_0x5ba627]=_0x22b4f3[(_0x1a40db*(0x2*0x136f+0x1*0x434+-0x1*0x2b0f)+(-0x2e8+0xbf*0x1+-0x1*-0x22a))*_0x4eaa6b+_0x1e249a],_0x15da02[_0x5ba627]=_0x22b4f3[(_0x1a40db*(-0x26db+0x11de+0x1500)+(-0x22dc+0x1863+0xa7b))*_0x4eaa6b+_0x1e249a]):(_0x41f40c[_0x5ba627]=0x53f+-0x3*-0xce6+-0x15b9*0x2,_0xa53414[_0x5ba627]=-0x18bf+0xfa*-0x1f+0x4c*0xbb,_0x15da02[_0x5ba627]=0x17*0x1ae+-0x89*-0x46+-0x4b99);}}_0x53e50b['shData0']=_0x41f40c,_0x53e50b['shData1']=_0xa53414,_0x53e50b['shData2']=_0x15da02,_0x53e50b['shBands']={0x3:0x1,0x8:0x2,0xf:0x3}[_0x4eaa6b];}else _0x53e50b['shBands']=0x7e5+-0x4*-0x31+-0x8a9;return _0x53e50b;},_0x1551a1=async(_0x3c11d0,_0x423530,_0x1f7cf6)=>{const _0x21c6aa=_0x423530[-0x36*-0xd+0xe7*0x28+0xcf2*-0x3],_0x51df20=_0x21c6aa['properties'],_0x17c6d2=_0x51df20['length'],_0xee774c=_0x51df20['map'](_0x971409=>_0x971409['storage']),_0x4a5006=_0x51df20['reduce']((_0x50f455,_0x36ff5b)=>_0x50f455+_0x36ff5b['byteSize'],-0x25e7+0x1*0x253f+0x7*0x18);let _0x2f8826=-0xd*-0x16f+-0x209c+-0x1ff*-0x7,_0x49e600;const _0x10762a=()=>{const _0x3c32c8=_0x3c11d0['data']['buffer'];(_0x49e600==null?void(0x1248+0xd*0x5c+-0x16f4):_0x49e600['buffer'])!==_0x3c32c8&&(_0x49e600=new Float32Array(_0x3c32c8,-0x859+0x160b+-0xdb2*0x1,_0x3c32c8['byteLength']/(-0x4cf+0x6c9*-0x3+-0xc97*-0x2)));};for(_0x10762a();_0x2f8826<_0x21c6aa['count'];){for(;_0x3c11d0['remaining']<_0x4a5006;)await _0x3c11d0['read'](),_0x10762a();const _0x27a377=Math['min'](_0x21c6aa['count']-_0x2f8826,Math['floor'](_0x3c11d0['remaining']/_0x4a5006));for(let _0x32e96b=0x1f2*-0x14+-0x135d+0x3a45;_0x32e96b<_0x17c6d2;++_0x32e96b){const _0x2c1800=_0xee774c[_0x32e96b];for(let _0x364302=0x21c1*-0x1+0x1*0x64+0xb1f*0x3;_0x364302<_0x27a377;++_0x364302)_0x2c1800[_0x364302+_0x2f8826]=_0x49e600[_0x364302*_0x17c6d2+_0x32e96b];}_0x2f8826+=_0x27a377,_0x3c11d0['head']+=_0x27a377*_0x4a5006;}return new _0x2d931(_0x423530,_0x1f7cf6);},_0x490afb=async(_0x1dabb5,_0x4b3731,_0x44c113)=>{for(let _0x5b338d=-0x690+-0xe80*-0x2+-0x1670;_0x5b338d<_0x4b3731['length'];++_0x5b338d){const _0x415fe4=_0x4b3731[_0x5b338d],_0x57af8b=_0x415fe4['properties']['reduce']((_0x5b50f3,_0x3c03b1)=>_0x5b50f3+_0x3c03b1['byteSize'],0x71*0x55+-0x2*0x530+0x1*-0x1b25),_0x1d3034=_0x415fe4['properties']['map'](_0x56fecd=>{if(_0x56fecd['storage'])switch(_0x56fecd['type']){case'char':return(_0x129f1c,_0x269b78)=>{_0x56fecd['storage'][_0x269b78]=_0x129f1c['getInt8']();};case'uchar':return(_0x4413c8,_0x2a8ed5)=>{_0x56fecd['storage'][_0x2a8ed5]=_0x4413c8['getUint8']();};case'short':return(_0x38bf7c,_0x352c16)=>{_0x56fecd['storage'][_0x352c16]=_0x38bf7c['getInt16']();};case'ushort':return(_0x44d313,_0x4a6ddf)=>{_0x56fecd['storage'][_0x4a6ddf]=_0x44d313['getUint16']();};case'int':return(_0x5af0e4,_0x13dcab)=>{_0x56fecd['storage'][_0x13dcab]=_0x5af0e4['getInt32']();};case'uint':return(_0x512bdc,_0x1ed228)=>{_0x56fecd['storage'][_0x1ed228]=_0x512bdc['getUint32']();};case'float':return(_0x15d48b,_0x5541b3)=>{_0x56fecd['storage'][_0x5541b3]=_0x15d48b['getFloat32']();};case'double':return(_0x35a642,_0x2a5458)=>{_0x56fecd['storage'][_0x2a5458]=_0x35a642['getFloat64']();};default:throw new Error('Unsupporte'+'d\x20property'+'\x20data\x20type'+'\x20\x27'+_0x56fecd['type']+('\x27\x20in\x20ply\x20h'+'eader'));}else return _0x1574a7=>{_0x1574a7['head']+=_0x56fecd['byteSize'];};});let _0x4b5d95=-0x1*-0x25cf+-0x9cf+0x20*-0xe0;for(;_0x4b5d95<_0x415fe4['count'];){for(;_0x1dabb5['remaining']<_0x57af8b;)await _0x1dabb5['read']();const _0x35ebb3=Math['min'](_0x415fe4['count']-_0x4b5d95,Math['floor'](_0x1dabb5['remaining']/_0x57af8b));for(let _0x5930b2=0x4*-0x515+0x1*0x17c0+-0x36c;_0x5930b2<_0x35ebb3;++_0x5930b2){for(let _0x1eac00=-0x22fb+0x14*-0x2c+0x1*0x266b;_0x1eac00<_0x415fe4['properties']['length'];++_0x1eac00)_0x1d3034[_0x1eac00](_0x1dabb5,_0x4b5d95);_0x4b5d95++;}}}return new _0x2d931(_0x4b3731,_0x44c113);},_0x25fe76=async(_0x511d8c,_0x19b9e6=null)=>{const _0x11f670=(_0x4b8ef6,_0x3746a2)=>{const _0xd5cfc=_0x4b8ef6['length']-_0x3746a2['length'];let _0x190a61,_0x185812;for(_0x190a61=-0x1f85+-0x16f*0xb+-0x17a5*-0x2;_0x190a61<=_0xd5cfc;++_0x190a61){for(_0x185812=0x2040+0x33d+-0x237d;_0x185812<_0x3746a2['length']&&_0x4b8ef6[_0x190a61+_0x185812]===_0x3746a2[_0x185812];++_0x185812);if(_0x185812===_0x3746a2['length'])return _0x190a61;}return-(-0xfa7+0x9d9*-0x3+0x2d33);},_0x22d260=(_0x369c13,_0x2b48d1)=>{if(_0x369c13['length']<_0x2b48d1['length'])return!(-0x609+0x1c42+-0x1638);for(let _0x131f31=-0x61e+0x106*0x22+-0x1*0x1cae;_0x131f31<_0x2b48d1['length'];++_0x131f31)if(_0x369c13[_0x131f31]!==_0x2b48d1[_0x131f31])return!(0x11*0x194+0x1*0x895+-0x67*0x58);return!(0x2200+-0x3c1*-0x4+-0x3104);},_0x1846ef=new _0x402e76(_0x511d8c,_0x19b9e6);let _0x41b4a1;for(;;){if(await _0x1846ef['read'](),_0x1846ef['tail']>=_0x214ac7['length']&&!_0x22d260(_0x1846ef['data'],_0x214ac7))throw new Error('Invalid\x20pl'+'y\x20header');if(_0x41b4a1=_0x11f670(_0x1846ef['data'],_0x4b4118),_0x41b4a1!==-(-0x1087*0x1+0x8e5+0x7a3))break;}const _0x4131f9=new TextDecoder('ascii')['decode'](_0x1846ef['data']['subarray'](-0x54*-0x76+0x2*0xd1b+-0x40ee,_0x41b4a1))['split']('\x0a'),{elements:_0x3b8904,format:_0xae287d,comments:_0xd637c}=_0x2a8d33(_0x4131f9);if(_0xae287d!=='binary_lit'+'tle_endian')throw new Error('Unsupporte'+'d\x20ply\x20form'+'at');return _0x1846ef['head']=_0x41b4a1+_0x4b4118['length'],_0x1846ef['compact'](),await((async()=>_0x2e46c8(_0x3b8904)?await _0x1d2b74(_0x1846ef,_0x3b8904,_0xd637c):(_0x3b8904['forEach'](_0x41896c=>{_0x41896c['properties']['forEach'](_0x387062=>{const _0x4be6a3=_0x3155c7['get'](_0x387062['type']);if(_0x4be6a3){const _0x33966b=new _0x4be6a3(_0x41896c['count']);_0x387062['storage']=_0x33966b;}});}),_0x5f1af1(_0x3b8904)?await _0x1551a1(_0x1846ef,_0x3b8904,_0xd637c):await _0x490afb(_0x1846ef,_0x3b8904,_0xd637c)))());},_0x374347=_0x3d293a=>{const {numSplats:_0x1b3432,chunkData:_0x53fa00,chunkSize:_0x1c2a63,vertexData:_0x4b5415,shData0:_0x52c20c,shData1:_0x4d04b7,shData2:_0x1b5e3d,shBands:_0x4bb78c,comments:_0x14a9a9,is4D:_0x669fde}=_0x3d293a,_0x12a02d=['x','y','z','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','f_dc_0','f_dc_1','f_dc_2','opacity'];if(_0x669fde&&_0x12a02d['push']('t','t_scale','motion_0','motion_1','motion_2'),_0x4bb78c>0xa34*0x3+0x1c74+-0x9d8*0x6){const _0xf5f75e=[];for(let _0x3d914e=-0x134c+-0xa3d+0x1d89;_0x3d914e<-0x3e+-0x524+-0x58f*-0x1;++_0x3d914e)_0xf5f75e['push']('f_rest_'+_0x3d914e);_0x12a02d['splice'](_0x12a02d['indexOf']('f_dc_0')+(-0x18aa+-0x54e*-0x5+0x13*-0x19),0x4cc+0xa9f*0x1+-0xf6b*0x1,..._0xf5f75e);}const _0xce9a4f={};_0x12a02d['forEach'](_0x2fb65f=>{_0xce9a4f[_0x2fb65f]=new Float32Array(_0x1b3432);});const _0x4eba59=new _0x824154(),_0x6825ad=new _0x320ea7(),_0x9ace42=new _0x824154(),_0x4406d2=new _0x5ec4e9(),_0x454e56=new _0x824154(),_0x3a2864=new _0x824154(),_0x139946=_0x4bb78c>0x1b*-0x14b+-0x3b*0x14+-0x97*-0x43?new Float32Array(-0x1d7d+0xcfb+0x10af):null,_0x5e9a91=new _0x43e205(_0x53fa00,_0x1c2a63,_0x4b5415,_0x52c20c,_0x4d04b7,_0x1b5e3d,_0x4bb78c,_0x4eba59,_0x6825ad,_0x9ace42,_0x4406d2,_0x454e56,_0x3a2864,_0x139946);for(let _0x7ea9b1=-0x1da2+-0x5*0x4cb+0x3599;_0x7ea9b1<_0x1b3432;++_0x7ea9b1){_0x5e9a91['read'](_0x7ea9b1),_0xce9a4f['x'][_0x7ea9b1]=_0x4eba59['x'],_0xce9a4f['y'][_0x7ea9b1]=_0x4eba59['y'],_0xce9a4f['z'][_0x7ea9b1]=_0x4eba59['z'],_0xce9a4f['rot_1'][_0x7ea9b1]=_0x6825ad['x'],_0xce9a4f['rot_2'][_0x7ea9b1]=_0x6825ad['y'],_0xce9a4f['rot_3'][_0x7ea9b1]=_0x6825ad['z'],_0xce9a4f['rot_0'][_0x7ea9b1]=_0x6825ad['w'],_0xce9a4f['scale_0'][_0x7ea9b1]=_0x9ace42['x'],_0xce9a4f['scale_1'][_0x7ea9b1]=_0x9ace42['y'],_0xce9a4f['scale_2'][_0x7ea9b1]=_0x9ace42['z'],_0xce9a4f['motion_0'][_0x7ea9b1]=_0x454e56['x'],_0xce9a4f['motion_1'][_0x7ea9b1]=_0x454e56['y'],_0xce9a4f['motion_2'][_0x7ea9b1]=_0x454e56['z'],_0xce9a4f['t_scale'][_0x7ea9b1]=_0x3a2864['x'],_0xce9a4f['t'][_0x7ea9b1]=_0x3a2864['y'],_0xce9a4f['f_dc_0'][_0x7ea9b1]=(_0x4406d2['x']-(-0x2*-0x8e+0x2*-0x12b7+-0x2*-0x1229+0.5))/_0x1add48,_0xce9a4f['f_dc_1'][_0x7ea9b1]=(_0x4406d2['y']-(0x3*0xc6a+-0xb*-0x37f+0x1*-0x4bb3+0.5))/_0x1add48,_0xce9a4f['f_dc_2'][_0x7ea9b1]=(_0x4406d2['z']-(-0x992+0x31c*-0x5+0x191e+0.5))/_0x1add48;const _0x4d6ac8=_0x4406d2['w']<=0x2398+0x24d8+-0x4870?-(-0x1c9*-0x2+-0x1*0x139+0x21*-0x11):_0x4406d2['w']>=-0xae+0xdff*-0x1+0xeae?-0x1920*-0x1+-0x14b7+-0x441:-Math['log']((0x19df*-0x1+0xf3f*0x2+-0x1*0x49e)/_0x4406d2['w']-(0x11*0x2b+-0xc*-0xe3+-0xd7e));if(_0xce9a4f['opacity'][_0x7ea9b1]=(0x1432+-0x80d*-0x3+0x56*-0x84)/(-0x1ff8+-0xd9*-0x1a+-0x1*-0x9ef+Math['exp'](-_0x4d6ac8)),_0x139946){for(let _0x450c6d=-0x2cd+-0x1a9b*0x1+0x1d68;_0x450c6d<-0x472+0x29d+0x202;++_0x450c6d)_0xce9a4f['f_rest_'+_0x450c6d][_0x7ea9b1]=_0x139946[_0x450c6d];}}const _0x5b3709=[{'count':_0x1b3432,'name':'vertex','properties':_0x12a02d['map'](_0x128f8c=>({'byteSize':0x4,'name':_0x128f8c,'type':'float','storage':_0xce9a4f[_0x128f8c]}))}];return new _0x2d931(_0x5b3709,_0x14a9a9);};}class bN extends me{constructor(_0x452ab2){super(),h(this,'worker'),h(this,'loadUrlLis'+'t'),(this['loadUrlLis'+'t']=_0x452ab2,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+EN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','loadUrlList':this['loadUrlLis'+'t']});}['loadPly'](_0x1c1573,_0x395f1f,_0x4e2a9d=(_0x24bb0a,_0xac8f99)=>{},_0x2ca52f=(_0x1ad146,_0x3eff03,_0x234472)=>{},_0x5e3c1e=(_0x5beee3,_0x4b8ce0)=>{}){var _0x3c32f9;return(_0x3c32f9=this['worker'])==null||_0x3c32f9['postMessag'+'e']({'type':'loadPly','url':_0x1c1573,'decompress':_0x395f1f}),new Promise((_0x55fea9,_0x29a773)=>{if(!this['worker']){_0x29a773(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x5aadcc=>{if(!this['worker'])return;const {data:_0x337d8b}=_0x5aadcc;if(_0x1c1573===_0x337d8b['url'])switch(_0x337d8b['type']){case'totalLengt'+'h':_0x4e2a9d==null||_0x4e2a9d(_0x337d8b['totalLengt'+'h'],_0x337d8b['url']);break;case'progress':_0x2ca52f==null||_0x2ca52f(_0x337d8b['bytes'],_0x337d8b['totalLengt'+'h'],_0x337d8b['url']);break;case'splatData':_0x55fea9(_0x337d8b['data']);break;case'error':_0x5e3c1e==null||_0x5e3c1e(_0x337d8b['data'],_0x337d8b['url']);break;}};});}['destroy'](){this['loadUrl']='',this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0xb*0x86+-0xd0f+0x74d));}}class AN{constructor(_0x381682,_0x46d43a){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'readWorker'),(console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','Register\x20P'+'lyParser.c'+'onstructor'),this['app']=_0x381682,this['maxRetries']=_0x46d43a,this['urlList']=[],this['gsplatReso'+'urce']=null,this['readWorker']=null,this['totalRecei'+'ved']=-0xbf*-0x15+-0x1*-0x983+-0x1*0x192e);}async['load'](_0x46ee43,_0x3a1c2c,_0x483bd3){var _0x441b31,_0x180ba3,_0x2b4fdb;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','PlyParser.'+'load'),this['urlList']=[],_0x46ee43['load']['includes'](',')?this['urlList']=_0x46ee43['load']['split'](','):this['urlList']['push'](_0x46ee43['load']);const _0x4f0d5f=_0x483bd3['data']['createTime']!==((_0x180ba3=(_0x441b31=this['onlyOneAss'+'et'])==null?void(0x8*-0x3fa+0x1*0x24a3+-0x4d3):_0x441b31['data'])==null?void(-0xb*-0x2d7+0x120b+-0x3148):_0x180ba3['createTime']);(!this['readWorker']||_0x4f0d5f)&&((_0x2b4fdb=this['readWorker'])==null||_0x2b4fdb['destroy'](),this['readWorker']=new bN(this['urlList']));const _0x3e11ff=_0x483bd3['data']['loadIndex']>=0xc1d+-0x1c6c+0x1*0x104f?_0x483bd3['data']['loadIndex']:0x2*-0x8b+-0x85f+-0x975*-0x1,_0x8d7339=_0x483bd3['data']['loadMode']==='all'?this['urlList']['length']-_0x3e11ff:_0x3e11ff+(0x1*0x1a65+-0x6f2+-0x1372),_0x1b79b=_0x483bd3['data']['timeOption'],_0x481895=_0x483bd3['data']['events'];for(let _0x4ac2c0=_0x3e11ff;_0x4ac2c0<_0x8d7339;_0x4ac2c0++)await this['loadGsplat'+'Data'](this['urlList'],_0x3a1c2c,_0x483bd3,_0x4ac2c0,_0x1b79b,_0x481895,_0x8d7339);_0x481895['fire']('loadAllAss'+'etsDone');}async['loadGsplat'+'Data'](_0x1a0cc6,_0x178c32,_0x32f183,_0x3ae082,_0x2a4735,_0x23214e,_0x19d747){var _0x594b83,_0xb5ac1a,_0x147b7b;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','loadGsplat'+'Data',_0x1a0cc6[_0x3ae082]['trim'](),_0x3ae082);const _0x50ba4c=_0x2a4735[(-0x63*-0x19+0x103*-0x21+0x17ba)*_0x3ae082]+_0x2a4735[(-0x1f5f+-0x1f01+-0xa*-0x63d)*_0x3ae082+(0x98*0x3d+0x1407+-0x383e)],_0x787872=_0x1a0cc6[_0x3ae082]['trim']();globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('loadTime','=========='+'=========='+'=========='+'=========='+'=========='+'====='),console['log']('loadTime','start\x20load'+'\x20ply\x20data',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0x337+0x7f*-0x32+-0x2f*-0x103))['toFixed'](-0x3af*-0xa+-0xb*-0x166+-0x1*0x3436));try{const _0xd6052b=await((_0x594b83=this['readWorker'])==null?void(0x123b+-0x506*-0x7+-0x3565):_0x594b83['loadPly'](_0x787872,_0x32f183['data']['decompress'],()=>{this['totalRecei'+'ved']=-0x16ae+-0x2650+0x1e7f*0x2;},(_0x4dae67,_0x1ec493)=>{this['totalRecei'+'ved']+=_0x4dae67,_0x32f183&&_0x23214e['fire']('progress',_0x1ec493*_0x3ae082/_0x19d747+this['totalRecei'+'ved']/_0x19d747,_0x1ec493);},(_0x566e97,_0x200833)=>{debugger;console['warn']('ERROE\x20Load'+'\x20Ply',_0x200833,_0x566e97);}));let _0x4e9643;console['log']('loadTime','load\x20ply\x20d'+'ata\x20done',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0x45a*0x5+0x23f7+0x553))['toFixed'](0xc62+0x23fb+-0x305b)),_0xd6052b['isCompress'+'ed']?(_0x4e9643=new wN(),_0x4e9643['comments']=_0xd6052b['comments'],_0x4e9643['numSplats']=_0xd6052b['numSplats'],_0x4e9643['is4D']=_0xd6052b['is4D'],_0x4e9643['chunkData']=_0xd6052b['chunkData'],_0x4e9643['vertexData']=_0xd6052b['vertexData'],_0x4e9643['shData0']=_0xd6052b['shData0'],_0x4e9643['shData1']=_0xd6052b['shData1'],_0x4e9643['shData2']=_0xd6052b['shData2'],_0x4e9643['shBands']=_0xd6052b['shBands']):_0x4e9643=new zn(_0xd6052b['elements'],_0xd6052b['comments']),_0x32f183['fire']('load:data',_0x4e9643),_0x4e9643['isCompress'+'ed']||_0x32f183['data']['reorder'];const _0x4f2acf=_0x32f183['data']['createTime']!==((_0x147b7b=(_0xb5ac1a=this['onlyOneAss'+'et'])==null?void(-0x233*-0x9+0x6f2*-0x5+0xeef):_0xb5ac1a['data'])==null?void(-0x80*-0xd+-0x1*-0x1c4+-0x844):_0x147b7b['createTime']);this['gsplatReso'+'urce']&&!_0x4f2acf?this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x4e9643['isCompress'+'ed']?await _0x4e9643['decompress']():_0x4e9643,_0x2a4735,_0x50ba4c,_0x32f183,_0x23214e):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),this['gsplatReso'+'urce']=new GA(this['app']['graphicsDe'+'vice'],_0x4e9643['isCompress'+'ed']?await _0x4e9643['decompress']():_0x4e9643),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x2a4735,this['onlyOneAss'+'et']=_0x32f183),_0x178c32(null,this['gsplatReso'+'urce']);}catch(_0x57cbb3){_0x178c32(_0x57cbb3,null);}}['open'](_0x364c3f,_0x5ea0e6){return _0x5ea0e6;}}async function CN(){const _0x28ab60='super4d-ca'+'che-v1',_0x237e17={'maxAge':0x202fbf000,'maxSize':0x280000000},_0x49c8cd=-0x6*0x568+-0x16*-0x22+-0xec2*-0x2+0.28209479177387814;class _0x48cef5{constructor(_0x44390f={}){this['options']={..._0x237e17,..._0x44390f},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=-0x34*0x3a+0x229b+0x1*-0x16d3,this['initialize'+'d']=!(0xec3*0x2+0x1435+-0x31ba);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x28ab60);const _0x29ce4a=await this['cache']['keys'](),_0x39acce=[];for(const _0x5829e6 of _0x29ce4a){const _0x4695cd=_0x5829e6['url'],_0x335bd3=await this['cache']['match'](_0x4695cd);if(_0x335bd3){const _0x4359e0=(await _0x335bd3['blob']())['size'],_0x4fa1b6=_0x335bd3['headers']['get']('x-cache-ti'+'me');_0x4fa1b6&&_0x39acce['push']({'url':_0x4695cd,'size':_0x4359e0,'cacheTime':parseInt(_0x4fa1b6)});}}_0x39acce['sort']((_0x405a2a,_0x3de6d0)=>_0x405a2a['cacheTime']-_0x3de6d0['cacheTime']);for(const _0x128bcd of _0x39acce)this['cacheSizes']['set'](_0x128bcd['url'],_0x128bcd['size']),this['currentSiz'+'e']+=_0x128bcd['size'],this['lruList']['push'](_0x128bcd['url']);}catch(_0x257cfc){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x257cfc);}this['initialize'+'d']=!(-0x13bd+-0x23*0xcd+0x17e2*0x2);}}async['get'](_0x226553){if(await this['init'](),!this['cache'])return null;try{const _0x5e2b47=await this['cache']['match'](_0x226553);if(!_0x5e2b47)return null;const _0x3ba6e6=_0x5e2b47['headers']['get']('x-cache-ti'+'me');return _0x3ba6e6&&Date['now']()-parseInt(_0x3ba6e6)>this['options']['maxAge']?(await this['delete'](_0x226553),null):(this['updateLRU'](_0x226553),_0x5e2b47);}catch{return null;}}async['set'](_0x1875fe,_0x12cf29){if(!(!this['cache']||_0x1875fe['startsWith']('blob:')))try{const _0x539e4c=_0x12cf29['clone'](),_0xd84d57=await _0x539e4c['blob'](),_0x19f240=_0xd84d57['size'];this['currentSiz'+'e']+_0x19f240>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x19f240);const _0x4de233=new Headers(_0x539e4c['headers']);_0x4de233['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x579d19=new Response(_0xd84d57,{'status':_0x539e4c['status'],'statusText':_0x539e4c['statusText'],'headers':_0x4de233});await this['cache']['put'](_0x1875fe,_0x579d19),this['cacheSizes']['set'](_0x1875fe,_0x19f240),this['currentSiz'+'e']+=_0x19f240,this['updateLRU'](_0x1875fe);}catch(_0xc5e83e){console['error']('Cache\x20set\x20'+'error:',_0xc5e83e);}}['updateLRU'](_0x4317ae){const _0x4fb2ca=this['lruList']['indexOf'](_0x4317ae);_0x4fb2ca>-(0x66f+-0xb7b+0x50d)&&this['lruList']['splice'](_0x4fb2ca,0x11f7*0x1+-0x2*-0xcf4+-0x2bde),this['lruList']['push'](_0x4317ae);}async['cleanupSpa'+'ce'](_0x21d29c){const _0x21b97f=this['options']['maxSize']*(-0x546+-0x162*-0x1c+-0xb26*0x3+0.9);if(!(this['currentSiz'+'e']<=_0x21b97f))for(;this['lruList']['length']>-0x1012+-0x1*-0xe21+0x1f1&&this['currentSiz'+'e']>_0x21b97f;){const _0x554fb4=this['lruList']['shift']();_0x554fb4&&await this['delete'](_0x554fb4);}}async['delete'](_0x289de9){if(this['cache'])try{await this['cache']['delete'](_0x289de9);const _0x3559ed=this['cacheSizes']['get'](_0x289de9)||-0x4f9*-0x2+0x73e+-0x1130;this['currentSiz'+'e']-=_0x3559ed,this['cacheSizes']['delete'](_0x289de9);const _0x5e3232=this['lruList']['indexOf'](_0x289de9);_0x5e3232>-(0xdcb+0x55d*0x7+-0x3355)&&this['lruList']['splice'](_0x5e3232,-0x1*0x134d+0x22a0+0x7a9*-0x2);}catch(_0x5e7d77){console['error']('Cache\x20dele'+'te\x20error:',_0x5e7d77);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x3161b9=>Promise['all'](_0x3161b9['map'](_0x3619e8=>{var _0x442b3f;return(_0x442b3f=this['cache'])==null?void(-0x1*0x30+-0x2*0x1a+-0x64*-0x1):_0x442b3f['delete'](_0x3619e8);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x2412+-0xb50+0x18c2*-0x1;}catch(_0x989b48){console['error']('Cache\x20clea'+'r\x20error:',_0x989b48);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0xe30+0xf*-0x272+0x167e;}}class _0x4acca8{constructor(_0x409b04=[],_0x19b249={}){this['cacheManag'+'er']=new _0x48cef5(_0x19b249['cache']),this['retryCount']=_0x19b249['retryCount']||0x1df0+0x15*0xf1+-0x18d9*0x2,this['retryDelay']=_0x19b249['retryDelay']||0x623*-0x1+-0x95*-0x16+-0x4b7,this['maxConcurr'+'ency']=_0x19b249['maxConcurr'+'ency']||-0x2534*0x1+-0x1a*0x17b+-0x4*-0x12ee,this['downloadQu'+'eue']=_0x409b04,this['isProcessi'+'ngDownload'+'Queue']=!(0x1ec*-0x3+0xb95*0x3+0x1*-0x1cfa),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0x1*0x1119+-0x8b2+0xd5*0x1f);this['downloadQu'+'eue']['length']>0x697*-0x5+0x1d18+0x7*0x8d;)try{const _0xfd2985=this['downloadQu'+'eue']['splice'](-0x13ce+0x2*0x827+0x80*0x7,this['maxConcurr'+'ency'])['map'](_0x528be0=>{if(!this['pendingRes'+'ponses']['has'](_0x528be0)){const _0x1391f7=this['download'](_0x528be0);return this['pendingRes'+'ponses']['set'](_0x528be0,_0x1391f7),_0x1391f7['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x528be0);});}return Promise['resolve']();});await Promise['all'](_0xfd2985);}catch(_0x40202e){console['error']('Download\x20e'+'rror:',_0x40202e);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x265d+0x1b57+0x3ad*0x3);}}}async['fetch'](_0x2c504a,_0x17ebf0={}){if(this['pendingRes'+'ponses']['has'](_0x2c504a))return this['pendingRes'+'ponses']['get'](_0x2c504a);const {forceRefresh:_0x255bad=!(-0x2311*0x1+-0x2*0x115c+0x45ca*0x1),..._0x3bc342}=_0x17ebf0;this['pendingRes'+'ponses']['set'](_0x2c504a,this['download'](_0x2c504a,_0x3bc342));const _0x1d871f=await this['pendingRes'+'ponses']['get'](_0x2c504a);return this['pendingRes'+'ponses']['delete'](_0x2c504a),_0x1d871f;}async['download'](_0x17f811,_0x25c82d={}){var _0x2522ea;await((_0x2522ea=this['cacheManag'+'er'])==null?void(0xa*-0x345+0x1a85+0x62d):_0x2522ea['init']());const {forceRefresh:_0x1520ba=!(-0x14b+-0x1e6f+-0x1fbb*-0x1),..._0x371297}=_0x25c82d;_0x1520ba&&await this['cacheManag'+'er']['delete'](_0x17f811);const _0x362716=await this['cacheManag'+'er']['get'](_0x17f811);if(_0x362716)return _0x362716;let _0x24c511;for(let _0x112b74=-0x753*0x3+0x2402*-0x1+0x39fb;_0x112b74<this['retryCount'];_0x112b74++)try{const _0x5583ee=await fetch(_0x17f811,_0x371297);if(!_0x5583ee['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x5583ee['status']);return await this['cacheManag'+'er']['set'](_0x17f811,_0x5583ee),_0x5583ee;}catch(_0x41e69c){console['error']('Download\x20e'+'rror:',_0x41e69c),_0x24c511=_0x41e69c,_0x112b74<this['retryCount']-(-0x24*0x62+0x4*0x85a+-0x139f)&&await new Promise(_0x5ebcdb=>setTimeout(_0x5ebcdb,this['retryDelay']*(_0x112b74+(0x26bd+0x1a53+-0x410f*0x1))));}throw _0x24c511;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){var _0xd8cd6d;(_0xd8cd6d=this['cacheManag'+'er'])==null||_0xd8cd6d['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x1e5*0x4+0x22af*-0x1+0x2a44),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x26b628{constructor(_0x44fce9,_0x5d226c=[]){this['elements']=_0x44fce9,this['comments']=_0x5d226c,this['isCompress'+'ed']=!(0xe76*-0x1+-0x17be+0x1*0x2635);}}class _0x34b6a3{constructor(_0x27d10f){this['url']=_0x27d10f;}async['readFragme'+'nt'](){globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x4acca8(globalThis['downloadQu'+'eueUrlList']));const _0x9f6607=await globalThis['fetchWorke'+'r']['fetch'](this['url']);if(!_0x9f6607['ok'])throw new Error('Failed\x20to\x20'+'fetch\x20'+this['url']+':\x20'+_0x9f6607['statusText']);const _0x572f62=await _0x9f6607['arrayBuffe'+'r'](),_0x2584fa=new Uint8Array(_0x572f62);let _0x12561f=-0x21*0xa3+0x1dc3+-0x460*0x2,{size:_0x4be7ce,type:_0xe88130}=this['_readBoxHe'+'ader'](_0x2584fa,_0x12561f);if(_0xe88130!=='moof')throw new Error('Not\x20a\x20moof');_0x12561f+=0x6e5+-0x1*0x150e+-0x3*-0x4bb;const _0x167948=_0x12561f+_0x4be7ce-(-0x98e+0x2*-0x728+0xa1*0x26);let _0x1841e0=null;for(;_0x12561f<_0x167948;){const {size:_0x646855,type:_0x3dc1a9}=this['_readBoxHe'+'ader'](_0x2584fa,_0x12561f);_0x12561f+=0x798+-0x33*0x3+-0x6f7;const _0x1d27c6=_0x2584fa['slice'](_0x12561f,_0x12561f+_0x646855-(-0xb4a+0x6*0x1da+0x36));_0x12561f+=_0x646855-(0x1f88+-0x2*0xb92+-0x85c),_0x3dc1a9==='emsg'&&(_0x1841e0=this['_parseEmsg'](_0x1d27c6));}if(!_0x1841e0)throw new Error('Incomplete'+'\x20moof');const {size:_0x287199,type:_0x165fb9}=this['_readBoxHe'+'ader'](_0x2584fa,_0x12561f);if(_0x165fb9!=='mdat')throw new Error('Expected\x20m'+'dat\x20box\x20af'+'ter\x20moof');_0x12561f+=-0x23e6+-0x25ed+0x103*0x49;const _0x38c114=_0x2584fa['slice'](_0x12561f,_0x12561f+(_0x287199-(-0x1*-0x1821+0x1191*-0x1+-0x688)));return{'metadata':_0x1841e0,'segmentData':_0x38c114};}['_readBoxHe'+'ader'](_0x463506,_0x9edaa9){if(_0x9edaa9+(0x8c1+-0x2*-0x4ea+-0x128d)>_0x463506['length'])throw new Error('EOF');const _0x590807=_0x463506[_0x9edaa9]<<-0x74d+0x966+-0x201|_0x463506[_0x9edaa9+(0x65f*-0x6+-0x1791+0x3dcc)]<<-0x1*0x287+0x943*-0x1+0xbda|_0x463506[_0x9edaa9+(-0x1317+0x49*0x2d+0x644)]<<-0x1eaa+-0x2*0xb48+0x3542|_0x463506[_0x9edaa9+(0x1151+-0x2*0xfad+0xe0c)],_0x4ae6ad=String['fromCharCo'+'de'](_0x463506[_0x9edaa9+(0x9*-0x272+-0x14*-0xdf+0x26*0x1f)],_0x463506[_0x9edaa9+(-0x21fc+0x1dc6+0x43b)],_0x463506[_0x9edaa9+(-0xc*-0x189+0x3*0x5e+-0x1380)],_0x463506[_0x9edaa9+(0xa*-0x95+-0x1ee0+0x24b9)]);return{'size':_0x590807,'type':_0x4ae6ad};}['_parseEmsg'](_0x21cd52){let _0x579fec=-0x1*-0x2a9+-0x147*0x8+0x285*0x3;_0x579fec=_0x21cd52['indexOf'](-0x15de+-0xdf*-0x20+0x602*-0x1,_0x579fec)+(-0x2526+-0x86*0x21+0x366d),_0x579fec=_0x21cd52['indexOf'](0x1c53*0x1+-0x3*-0xa94+-0x7b*0x7d,_0x579fec)+(-0xfa5+0x1995+-0x9ef),_0x579fec+=-0xd*0x17+0x1d6b+-0x1c30;const _0x575e4b=_0x21cd52['slice'](_0x579fec);return globalThis['CBOR']['decode'](_0x575e4b);}}class _0xb6408a{constructor(_0x3244a4=-0x385+0x6*-0x25a+0x1*0x11a1,_0x5cebc4=0x1a47+-0x36e+-0x16d9*0x1,_0x4a7836=0x7*0x4fc+-0x3*-0xc22+-0x23a5*0x2,_0x4ebf42=0x42a+-0x2*-0x3cb+-0xbbf*0x1){this['x']=_0x3244a4,this['y']=_0x5cebc4,this['z']=_0x4a7836,this['w']=_0x4ebf42;}['set'](_0x4874b6,_0xc32eea,_0x57ed33,_0x40afce){return this['x']=_0x4874b6,this['y']=_0xc32eea,this['z']=_0x57ed33,this['w']=_0x40afce,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0xa69a7b=this){let _0x49a90c=_0xa69a7b['length']();return _0x49a90c===0x4f*-0x8+0x1a46+-0x17ce?(this['x']=this['y']=this['z']=-0x265f+-0x9b7+0x3016,this['w']=0x8ca+0x1653+-0x1f1c):(_0x49a90c=(-0x1967*-0x1+-0x57a+-0x13ec)/_0x49a90c,this['x']=_0xa69a7b['x']*_0x49a90c,this['y']=_0xa69a7b['y']*_0x49a90c,this['z']=_0xa69a7b['z']*_0x49a90c,this['w']=_0xa69a7b['w']*_0x49a90c),this;}['mulScalar'](_0x3f697d,_0xaf5001=this){return this['x']=_0xaf5001['x']*_0x3f697d,this['y']=_0xaf5001['y']*_0x3f697d,this['z']=_0xaf5001['z']*_0x3f697d,this['w']=_0xaf5001['w']*_0x3f697d,this;}}self['onmessage']=async _0x58e77f=>{var _0x4f1df1,_0x16375d;const {data:_0x498ebd}=_0x58e77f;switch(_0x498ebd['type']){case'initWorker':importScripts(_0x498ebd['cborXUrl']);break;case'destroyWor'+'ker':_0x1df1b7();break;case'loadGsdMan'+'ifest':const {manifestUrl:_0x5d46c4,loadRepresentation:_0x268de7}=_0x498ebd,_0x5b1ce8=await _0x545913(_0x5d46c4,_0x268de7);globalThis['manifestUr'+'l']=_0x5d46c4,globalThis['manifest']=_0x5b1ce8,globalThis['resentatio'+'n']=_0x5b1ce8['representa'+'tion'],globalThis['downloadQu'+'eueUrlList']=_0xa2fe66(),globalThis['fetchWorke'+'r']=new _0x4acca8(globalThis['downloadQu'+'eueUrlList']),self['postMessag'+'e']({'type':'onloadMani'+'fest','data':_0x5b1ce8,'url':_0x5d46c4,'representation':_0x268de7});break;case'loadGsdSeg'+'ments':try{const _0x45a5a1=_0x50f798(globalThis['manifest'],globalThis['resentatio'+'n']),_0x5ed934=await _0xa6252a(globalThis['manifest'],_0x45a5a1),_0x334835=(_0x4f1df1=_0x5ed934==null?void(0x1646+0x42f+-0x209*0xd):_0x5ed934['elements'][0x1721*-0x1+-0x1*-0x31c+0x1405])==null?void(0x2526+-0x11f2+-0x1334):_0x4f1df1['properties']['map'](_0x4e3417=>_0x4e3417['storage']['buffer']);self['postMessag'+'e']({'type':'loadGsdSeg'+'mentsDone','data':_0x5ed934,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x334835);}catch(_0x4c6f07){console['error']('Error\x20load'+'ing\x20GSD:',_0x4c6f07),self['postMessag'+'e']({'type':'error','data':_0x4c6f07['message'],'url':globalThis['manifestUr'+'l']});}break;case'loadTimeli'+'neIndexSeg'+'ments':const {timelineIndexs:_0x21fab6}=_0x498ebd;try{const _0x29e91a=_0x50f798(globalThis['manifest'],globalThis['resentatio'+'n']),_0x38dc71=await _0x579a06(globalThis['manifest'],_0x29e91a,_0x21fab6),_0x5d7c2c=(_0x16375d=_0x38dc71==null?void(-0x7b+0x146b+0xb0*-0x1d):_0x38dc71['elements'][0xe8c+0x3*-0x8b+0x1*-0xceb])==null?void(-0xa7b*0x1+-0x100d+-0x3*-0x8d8):_0x16375d['properties']['map'](_0x3f52bf=>_0x3f52bf['storage']['buffer']);self['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'mentsDone','data':_0x38dc71,'timelineIndexs':_0x21fab6,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x5d7c2c);}catch(_0x3bd8cf){console['error']('Error\x20load'+'ing\x20GSD:',_0x3bd8cf),self['postMessag'+'e']({'type':'error','data':_0x3bd8cf['message'],'url':globalThis['manifestUr'+'l']});}break;}};const _0x1df1b7=()=>{var _0x44bfe9;globalThis['manifestUr'+'l']=null,globalThis['manifest']=null,globalThis['resentatio'+'n']=null,(_0x44bfe9=globalThis['fetchWorke'+'r'])==null||_0x44bfe9['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['downloadQu'+'eueUrlList']=[],globalThis['loadedSegm'+'ents']=[],globalThis['currentLoa'+'dSg']=null;},_0xa2fe66=()=>{const _0x159d10=new Set(),_0x428941=_0x50f798(globalThis['manifest'],globalThis['resentatio'+'n']),_0x3d3c1b=globalThis['manifest']['baseUrl'],_0x1fae45=_0x428941['segmentTem'+'plate'][-0x111b*-0x2+-0x2353*0x1+-0x1*-0x11d];for(const _0x295e99 of _0x1fae45['segmentTim'+'eline'])for(const _0x276923 of _0x295e99['nl']){const _0x2a9670=''+_0x3d3c1b+_0x1fae45['media']['replace']('$SegGroupI'+'ndex$',String(_0x295e99['sg']))['replace']('$NodeIndex'+'$',String(_0x276923));_0x159d10['add'](_0x2a9670);}return Array['from'](_0x159d10);},_0x545913=async(_0x5c75e2,_0x3b3000)=>{const _0x31a99e=await(await fetch(_0x5c75e2))['text'](),_0x8e3b7d=JSON['parse'](_0x31a99e);_0x8e3b7d['baseUrl']=_0x5c75e2['replace'](/\/[^\/]*$/,'/');const {schemas:_0x1032c5,gsiUrl:_0x409288,repId:_0x355355}=await _0x480262(_0x8e3b7d,_0x3b3000);return _0x8e3b7d['schemas']=_0x1032c5,_0x8e3b7d['gsiUrl']=_0x409288,_0x8e3b7d['representa'+'tion']=_0x355355,_0x8e3b7d;},_0x480262=async(_0x3a955a,_0x524379)=>{let _0x21a77f=null,_0x539e38=null;for(const _0x423ce4 of _0x3a955a['adaptation'+'Sets'])if(_0x423ce4['contentTyp'+'e']==='4dgs'){_0x539e38=_0x423ce4;for(const _0x4b574c of _0x423ce4['representa'+'tions'])if(_0x4b574c['id']===_0x524379){_0x21a77f=_0x4b574c;break;}break;}_0x21a77f||(_0x21a77f=_0x539e38['representa'+'tions'][-0x23*0xd+-0x323*-0xb+0x1*-0x20ba],console['warn']('Representa'+'tion\x20\x27'+_0x524379+('\x27\x20not\x20foun'+'d,\x20use\x20the'+'\x20first\x20rep'+'resentatio'+'n\x20instead')));const _0x5eabf4=_0x21a77f['id'],_0x4ac694=_0x3a955a['baseUrl']+_0x5eabf4+('/init.gsi.'+'json'),_0x58e9c6=await(await fetch(_0x4ac694))['text'](),_0xb99d9a=JSON['parse'](_0x58e9c6),_0x4a4c2f={};return _0x4a4c2f[_0x5eabf4]=_0xb99d9a,{'schemas':_0x4a4c2f,'gsiUrl':_0x4ac694,'repId':_0x5eabf4};},_0x50f798=(_0xa64c7e,_0x39738e='high-quant'+'ized')=>{let _0x340551=null;for(const _0x4e215a of _0xa64c7e['adaptation'+'Sets'])if(_0x4e215a['contentTyp'+'e']==='4dgs'){for(const _0x4033b5 of _0x4e215a['representa'+'tions'])if(_0x4033b5['id']===_0x39738e){_0x340551=_0x4033b5;break;}break;}if(!_0x340551)throw new Error('Representa'+'tion\x20\x27'+_0x39738e+('\x27\x20not\x20foun'+'d'));return _0x340551;},_0xa6252a=async(_0x55c3d8,_0x3a61f3)=>{const _0x5a6813=_0x3a61f3['id'],_0x3c2a87=_0x55c3d8['schemas'][_0x5a6813]['attributes'],_0x3d87fb=_0x3a61f3['segmentTem'+'plate'][-0x1*-0x1345+-0xa02+0x943*-0x1];globalThis['loadedSegm'+'ents']=[];const _0x56cff5=[],_0x5cd15c=[];for(const _0x5e69f3 of _0x3d87fb['segmentTim'+'eline'])for(const _0x7fb14d of _0x5e69f3['nl']){if(globalThis['loadedSegm'+'ents']['includes'](_0x5e69f3['sg']+'_'+_0x7fb14d))continue;globalThis['loadedSegm'+'ents']['push'](_0x5e69f3['sg']+'_'+_0x7fb14d);const _0x5f4065=await _0x3034ad(_0x55c3d8,_0x3a61f3,_0x3c2a87,_0x5e69f3['sg'],_0x7fb14d);_0x5cd15c['push'](_0x5f4065['decoded']),_0x56cff5['push'](_0x5f4065['metadata']);}return _0x4c52b8(_0x5cd15c,_0x3c2a87,_0x55c3d8['comments']);},_0x579a06=async(_0x5b5a23,_0x4affd0,_0x3ff7e7)=>{if(!_0x3ff7e7||_0x3ff7e7['length']===0xc1+-0xce+0x1*0xd)return{'decoded':[],'metadata':[]};const _0x218b9b=_0x4affd0['id'],_0x22c466=_0x5b5a23['schemas'][_0x218b9b]['attributes'],_0x2a2c55=_0x4affd0['segmentTem'+'plate'][-0x543*-0x6+-0x1*-0x2629+-0x45bb*0x1];globalThis['loadedSegm'+'ents']||(globalThis['loadedSegm'+'ents']=[]);const _0x5bea45=_0x2a2c55['segmentTim'+'eline'][_0x3ff7e7[0x10d2*-0x2+0x1352*-0x2+-0x4*-0x1212]];globalThis['currentLoa'+'dSg']!==_0x5bea45['sg']&&(globalThis['loadedSegm'+'ents']=globalThis['loadedSegm'+'ents']['filter'](_0x5b478b=>!_0x5b478b['startsWith'](globalThis['currentLoa'+'dSg'])),globalThis['currentLoa'+'dSg']=_0x5bea45['sg']);let _0x3fca45;const _0x3b3762=[];for(const _0x1191e7 of _0x3ff7e7){_0x3fca45=_0x2a2c55['segmentTim'+'eline'][_0x1191e7];for(const _0x51db24 of _0x3fca45['nl'])globalThis['loadedSegm'+'ents']['includes'](_0x3fca45['sg']+'_'+_0x51db24)||(globalThis['loadedSegm'+'ents']['push'](_0x3fca45['sg']+'_'+_0x51db24),_0x3b3762['push'](_0x51db24));}const _0xba1ac8=await _0x3034ad(_0x5b5a23,_0x4affd0,_0x22c466,_0x3fca45['sg'],_0x3b3762);_0xba1ac8['metadata'];const _0x31e80a=_0xba1ac8['decoded'];return _0x4c52b8(_0x31e80a,_0x22c466,_0x5b5a23['comments']);},_0x3034ad=async(_0x2b728e,_0xe83df,_0x58273a,_0x351c1b,_0x17c04c)=>{const _0x32655c=_0x2b728e['baseUrl'],_0x3a8290=_0xe83df['segmentTem'+'plate'][0xee4*0x1+-0x1e1c+0xf38]['media'],_0x59b0cf=_0x17c04c['map'](_0x5e51d9=>''+_0x32655c+_0x3a8290['replace']('$SegGroupI'+'ndex$',String(_0x351c1b))['replace']('$NodeIndex'+'$',String(_0x5e51d9))),_0xa03799=await Promise['all'](_0x59b0cf['map'](async _0x405cba=>{const _0x5b33b8=await _0xf48a95(_0x405cba),_0x458324=_0x5b33b8['metadata'],_0xba96da=_0x5b33b8['segmentDat'+'a'],_0x197bb7=_0x458324['gaussianCo'+'unt'];console['log']('loadSegmen'+'t\x20'+_0x405cba),console['log']('loadSegmen'+'t\x20timeStar'+'t:',_0x458324['timeStart'],'segment\x20ti'+'meEnd:',_0x458324['timeEnd'],'segment\x20ga'+'ussianCoun'+'t:',_0x197bb7);let _0x5dc0e9;if(_0xe83df['id']['includes']('quantized')){const _0x38c537=_0x458324['chunk_boun'+'ds'];_0x5dc0e9=_0x3b6626(_0xba96da,_0x197bb7,_0x58273a,_0x351c1b,_0x38c537);}else _0x5dc0e9=_0x2020bc(_0xba96da,_0x197bb7,_0x58273a,_0x351c1b);return{'decoded':_0x5dc0e9,'metadata':_0x458324};})),_0x18d0c5=_0xa03799['map'](_0x23a233=>_0x23a233['decoded']),_0x2d5648=_0xa03799['map'](_0x1136c2=>_0x1136c2['metadata']);return{'decoded':_0x18d0c5,'metadata':_0x2d5648};},_0x4c52b8=(_0x1ae64b,_0x382a66,_0x54d428)=>{if(_0x1ae64b['length']===-0x19dd*0x1+0xf4f*0x1+0xa8e)return new _0x26b628([{'name':'vertex','count':0x0,'properties':[{'name':'position','type':'float','storage':new Float32Array(0xc1b+0x1c93+-0x28ae),'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':new Uint16Array(-0x5c9+0xa13+-0x44a),'byteSize':0x2},{'name':'t','type':'float','storage':new Float32Array(0x204f+-0x14*0x1ec+0x621),'byteSize':0x4},{'name':'t_scale','type':'float','storage':new Float32Array(-0x94c+-0x252d*-0x1+-0x1be1),'byteSize':0x4},{'name':'cutoff','type':'float','storage':new Float32Array(-0xa*-0x106+-0x2c3+-0x779),'byteSize':0x4},{'name':'motion','type':'float','storage':new Float32Array(-0x6*-0x2cd+-0xa75+-0x659),'byteSize':0x4},{'name':'rotation','type':'float','storage':new Float32Array(0xfc+0x9b2+-0xaae),'byteSize':0x4},{'name':'scale','type':'uint16','storage':new Uint16Array(-0x18af+0x2d3+0x4*0x577),'byteSize':0x2},{'name':'time_index','type':'float','storage':new Float32Array(0x2*0x9b3+0xf08*0x1+-0x226e),'byteSize':0x4}]}],_0x54d428);const _0x4cfc1c=_0x5a80e9(_0x1ae64b),[_0x29df12,_0x15c9a5,_0x27f102]=_0x53b92e(_0x4cfc1c['lifecycle'],-0xc7c+0xb*-0x361+-0xa3*-0x4e,Float32Array),_0x4feee3=_0x4cfc1c['time_index'],_0x1daa6e=_0x382a66['find'](_0x260d81=>_0x260d81['name']==='feature_re'+'st'),_0x16d1cf=[];if(_0x1daa6e&&_0x4cfc1c['feature_re'+'st']){const _0x2c2e4c=_0x1daa6e['dataType']['split'](',')[-0x1f0b+0xb*0x57+0x1*0x1b4f]['trim']()['replace']('>',''),_0x221820=_0x53b92e(_0x4cfc1c['feature_re'+'st'],0x1687+0xc7*0x7+-0x1bf5,Float32Array);for(const _0x3af16b of _0x221820){const _0x16fac3=_0x53b92e(_0x3af16b,_0x2c2e4c/(-0x1d47+-0x5e4+0x232e),Float32Array);for(let _0x3e0b0b=0x2*0xd1e+-0x4*-0x3c+-0x4*0x6cb;_0x3e0b0b<_0x16fac3['length'];_0x3e0b0b++)_0x16d1cf['push']({'name':'f_rest_'+_0x3e0b0b,'type':'float','storage':_0x16fac3[_0x3e0b0b],'byteSize':0x4});}}return new _0x26b628([{'name':'vertex','count':_0x4cfc1c['position']['length']/(-0xc8e+0x111d+0x6*-0xc2),'properties':[{'name':'position','type':'float','storage':_0x4cfc1c['position'],'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':_0x4cfc1c['color_opac'+'ity'],'byteSize':0x2},{'name':'t','type':'float','storage':_0x15c9a5,'byteSize':0x4},{'name':'t_scale','type':'float','storage':_0x29df12,'byteSize':0x4},{'name':'cutoff','type':'float','storage':_0x27f102,'byteSize':0x4},{'name':'motion','type':'float','storage':_0x4cfc1c['motion'],'byteSize':0x4},{'name':'rotation','type':'float','storage':_0x4cfc1c['rotation'],'byteSize':0x4},{'name':'scale','type':'uint16','storage':_0x4cfc1c['scale'],'byteSize':0x2},{'name':'time_index','type':'float','storage':_0x4feee3,'byteSize':0x4},..._0x16d1cf]}],_0x54d428);},_0x53b92e=(_0x52a165,_0x2cb4e2,_0xb054a6)=>{const _0x5ed845=new Array(_0x2cb4e2),_0x23c6f2=Math['floor'](_0x52a165['length']/_0x2cb4e2),_0x493ba8=_0x52a165['length']%_0x2cb4e2;for(let _0x113e99=-0x14cb*-0x1+0xb5e+-0x2029;_0x113e99<_0x2cb4e2;_0x113e99++){const _0x4f2310=_0x113e99<_0x493ba8?_0x23c6f2+(-0x801*0x2+-0x1b10*0x1+0x2b13):_0x23c6f2;_0x5ed845[_0x113e99]=new _0xb054a6(_0x4f2310);}for(let _0x5e568e=0xc*0x1+-0x7*-0x17b+-0x215*0x5;_0x5e568e<_0x52a165['length'];_0x5e568e++){const _0xbe88e2=_0x5e568e%_0x2cb4e2,_0x90f22d=Math['floor'](_0x5e568e/_0x2cb4e2);_0x5ed845[_0xbe88e2][_0x90f22d]=_0x52a165[_0x5e568e];}return _0x5ed845;},_0xf48a95=async _0x5e8873=>{const _0x2706ed=new _0x34b6a3(_0x5e8873),{metadata:_0x40f415,segmentData:_0x1f0cf1}=await _0x2706ed['readFragme'+'nt']();return{'metadata':_0x40f415,'segmentData':_0x1f0cf1};},_0x483a7c=(_0x105c18,_0x47f250)=>{let _0x5f298c,_0x33dae3,_0x554883=-(-0x17c2+0x1c55*0x1+-0x492);if(_0x105c18['encoding']){const _0x589760=_0x105c18['encoding']['storageTyp'+'e'];if(_0x589760==='uint32')_0x33dae3=Uint32Array,_0x5f298c=Uint32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x589760['startsWith']('array<ucha'+'r')){_0x33dae3=Uint8Array;const _0x6a93e7=_0x589760['split'](',')[0x173f*0x1+0xd*0x1f4+-0x30a2]['trim']()['replace']('>','');_0x554883=parseInt(_0x6a93e7),_0x5f298c=_0x554883*Uint8Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20storage\x20'+'type:\x20'+_0x589760);}}else{if(_0x33dae3=Float32Array,_0x105c18['dataType']==='vec3f')_0x5f298c=(0x1*-0x2083+0x2417*0x1+-0x391)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x105c18['dataType']==='vec4f')_0x5f298c=(-0x11*-0x14f+0x10*-0x5a+-0x109b*0x1)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x105c18['dataType']==='vec2f')_0x5f298c=(-0x17*0x3a+0x2*-0x470+-0xb*-0x148)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x105c18['dataType']['startsWith']('array<floa'+'t')){const _0x31efa2=_0x105c18['dataType']['split'](',')[0x3d*-0x8e+-0x3d8+0x36d*0xb]['trim']()['replace']('>','');_0x554883=parseInt(_0x31efa2),_0x5f298c=_0x554883*Float32Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x105c18['dataType']);}}}}return{'dataSize':_0x47f250*_0x5f298c,'datatype':_0x33dae3,'arraySize':_0x554883};},_0x24b355=(_0x2edc3a,_0x501ad8)=>{const _0x556032=(0x20ee+0xc1f+-0x1686*0x2<<_0x501ad8)-(-0x319+-0x1f9f*0x1+-0x3*-0xb93);return(_0x2edc3a&_0x556032)/_0x556032;},_0xbf084e=_0x435f64=>{const _0x4763fe=new Float32Array(_0x435f64['length']*(-0x33*0x4f+0xf65*0x2+0x7*-0x226));for(let _0x457111=-0xe*0x1d5+-0xe23*0x1+0x27c9;_0x457111<_0x435f64['length'];_0x457111++)_0x4763fe[_0x457111*(-0x2675+0x21bb+0x4bd)]=_0x24b355(_0x435f64[_0x457111]>>>-0x9*0x94+0x1*0xc97+0xaa*-0xb,-0xb*-0x23d+-0xb53*-0x2+-0x2f3a),_0x4763fe[_0x457111*(-0x2612*-0x1+0x1*0x1e86+-0x4495)+(-0x102+0x167*0x7+-0x8ce)]=_0x24b355(_0x435f64[_0x457111]>>>-0x3d1*0x7+0x1e74+-0x3b2*0x1,0x1ad2+-0x23f9+0xb5*0xd),_0x4763fe[_0x457111*(-0x24b5*0x1+-0x1079*0x1+0x5e9*0x9)+(-0x86b+0x7a2+0x1d*0x7)]=_0x24b355(_0x435f64[_0x457111],-0x1*-0x21c8+0x15f1*0x1+-0x37ae*0x1);return _0x4763fe;},_0xd2689e=_0x29bbbd=>{const _0x39f9bd=new Float32Array(_0x29bbbd['length']*(0x26a7+0x11f2+-0x5*0xb51));for(let _0x53e72f=0x1*-0x6d9+0x2631+-0x1f58;_0x53e72f<_0x29bbbd['length'];_0x53e72f++)_0x39f9bd[_0x53e72f*(0x1c8*0x1+0x1c31+-0x1df5)]=_0x24b355(_0x29bbbd[_0x53e72f]>>>0x15d5+-0x35*0x6d+-0xd4*-0x1,0x2481+-0xa*0x105+-0xd9*0x1f),_0x39f9bd[_0x53e72f*(-0x2f*-0x3b+0x1d25+-0x1f*0x14a)+(-0xa4e*0x2+-0x170c+-0x1*-0x2ba9)]=_0x24b355(_0x29bbbd[_0x53e72f]>>>0x8ac+-0x3e*-0x8b+-0x2a46,-0x35*-0x29+-0x1*0x17c+0x55*-0x15),_0x39f9bd[_0x53e72f*(0x2*0x7dd+-0x5*0x5ed+0x7*0x1fd)+(0x170+0x224f+-0x51b*0x7)]=_0x24b355(_0x29bbbd[_0x53e72f]>>>0x194b*-0x1+-0xd*-0x33+0x16bc,-0x1*0x201f+0x11a1+0x1*0xe86),_0x39f9bd[_0x53e72f*(-0x7*0x95+-0x17e2+0x1bf9*0x1)+(0x1*0x1beb+0x121+-0x1d09)]=_0x24b355(_0x29bbbd[_0x53e72f],-0x7a*-0x1a+0xcc0+-0x191c);return _0x39f9bd;},_0x406df6=_0x10791d=>{const _0xe2d27c=new Float32Array(_0x10791d['length']*(-0x1*-0x17c2+-0xc4*0x1c+-0x24f)),_0x57e35e=(-0xc34+0x1a69+0x12*-0xca)/(Math['sqrt'](0x18fb+-0x1b13+-0x10d*-0x2)*(-0x5*-0xa2+-0xae*-0xd+-0x8*0x180+0.5));for(let _0x535491=-0x4*0x527+-0x9*0x121+0x1ec5*0x1;_0x535491<_0x10791d['length'];_0x535491++){const _0x320b1e=(_0x24b355(_0x10791d[_0x535491]>>>0xe0c+-0x577*-0x6+-0x2ec2,-0x1a32+0x35+0x8ad*0x3)-(-0x24c+-0xc5+0x1*0x311+0.5))*_0x57e35e,_0x3c5775=(_0x24b355(_0x10791d[_0x535491]>>>0x1c8a*0x1+-0x1070+-0xc10,-0x1560+0x1a*-0x7b+0x7c*0x46)-(-0x106f+-0x15*-0xb+0xf88+0.5))*_0x57e35e,_0x368c36=(_0x24b355(_0x10791d[_0x535491],-0x2f4*0x2+-0xe2*0x2+-0x1*-0x7b6)-(0x30e+-0x3e+-0x2d0+0.5))*_0x57e35e,_0x54ddef=Math['sqrt'](-0x1e3d+-0x1*0x6e3+0x76d*0x5-(_0x320b1e*_0x320b1e+_0x3c5775*_0x3c5775+_0x368c36*_0x368c36));let _0x299d9e=0x1*-0x2695+0x35f*-0x8+0x61*0xad,_0x2e1b96=0x20b0+-0x9c2+-0x16ee,_0x53775c=-0x1*0x1266+0x1*0x17ab+-0x545,_0x926bbb=0x121*0xe+-0x242+-0xd8c;switch(_0x10791d[_0x535491]>>>-0x1*-0x16bc+0x1ca*-0x8+-0x84e){case-0x789+-0xaee+-0xa3*-0x1d:_0x299d9e=_0x54ddef,_0x2e1b96=_0x320b1e,_0x53775c=_0x3c5775,_0x926bbb=_0x368c36;break;case-0x667+-0x653+-0xcbb*-0x1:_0x299d9e=_0x54ddef,_0x2e1b96=_0x3c5775,_0x53775c=_0x368c36,_0x926bbb=_0x320b1e;break;case-0x1650+-0x18e8+0x2f3a:_0x299d9e=_0x3c5775,_0x2e1b96=_0x54ddef,_0x53775c=_0x368c36,_0x926bbb=_0x320b1e;break;case-0xefc*-0x1+-0x149a+0x1*0x5a1:_0x299d9e=_0x3c5775,_0x2e1b96=_0x368c36,_0x53775c=_0x54ddef,_0x926bbb=_0x320b1e;break;}const _0x9f3f59=_0x5f5a0b(_0x299d9e,_0x2e1b96,_0x53775c,_0x926bbb);_0xe2d27c[_0x535491*(-0x2*0x557+-0x42*0x8d+0x2f0b)]=_0x9f3f59['x'],_0xe2d27c[_0x535491*(0x2d5+-0x15*0x43+0x1*0x2ad)+(0x2206+-0x24c5*0x1+-0xb*-0x40)]=_0x9f3f59['y'],_0xe2d27c[_0x535491*(-0x1*0x2669+-0x34*-0x9+-0x2*-0x124c)+(0x43*-0x83+-0xbf5*-0x3+0x1*-0x194)]=_0x9f3f59['z'];}return _0xe2d27c;},_0x5a1257=(_0x3ab107,_0x404986,_0x1ea8ff)=>{const _0x469b55=_0x1ea8ff-_0x404986,_0x4c09d7=new Float32Array(_0x3ab107['length']);for(let _0xf3ea6f=-0x1aa*0x3+0x1915+-0x8b*0x25;_0xf3ea6f<_0x3ab107['length'];_0xf3ea6f++)_0x4c09d7[_0xf3ea6f]=_0x3ab107[_0xf3ea6f]/(-0x8*0x37c+0x1*-0x253f+0x421e)*_0x469b55+_0x404986;return _0x4c09d7;},_0x3ccd74=new Float32Array(0x12c6+-0x1363+-0x1*-0x9e),_0x220458=new Int32Array(_0x3ccd74['buffer']),_0x4112c8=_0xb7331d=>{_0x3ccd74[-0x11d9+-0x17*0xf1+0x40*0x9e]=_0xb7331d;const _0x1fb6bf=_0x220458[0x8*0x161+0x1252*-0x2+0x199c];let _0x2b4d61=_0x1fb6bf>>0xed4+-0x15f7*-0x1+-0x24bb*0x1&0xf73c*-0x1+0x29*0x61f+-0x449*-0x1d,_0x29f753=_0x1fb6bf>>-0xe03+0x1*0xfb+0xd14&-0x1a3*-0x14+0x5c*0x65+-0x3d09;const _0x80f928=_0x1fb6bf>>0x1590+-0x4*-0x3ca+-0x24a1&-0x1*-0x1ef7+-0x80c*0x1+-0x7a*0x2e;return _0x80f928<0x47*-0x66+-0x1fd+0x1eae?_0x2b4d61:_0x80f928>0x5fd+0x1bc8+-0xb*0x305?(_0x2b4d61|=0x949f+-0xd*-0x1244+0x1*-0x10613,_0x2b4d61|=(_0x80f928===-0x5*0x446+0x1075*0x2+-0x1*0xa8d?-0x246e*0x1+-0x2143+0x3ab*0x13:0x157e+-0xf7+-0x1486)&&_0x1fb6bf&-0x8b02fd+0x4118fe+0xc9e9fe,_0x2b4d61):_0x80f928<-0x1de5+0x127*0x6+0x176c?(_0x29f753|=0x1732*0x1+-0x176b*0x1+0x839,_0x2b4d61|=(_0x29f753>>-0x7*0x415+0x1*-0x6b6+0x23bb-_0x80f928)+(_0x29f753>>0x291*0xe+-0x262a+0x2ad-_0x80f928&0x1*0x2323+0x1263+-0x3585),_0x2b4d61):(_0x2b4d61|=_0x80f928-(0x1*-0x57b+-0x24bf*-0x1+-0x1ed4)<<0x6ad*0x2+0xc42+0x6*-0x443|_0x29f753>>0xfd9+-0xa7b*-0x2+-0x1*0x24ce,_0x2b4d61+=_0x29f753&0x25aa+0x239*-0xd+-0x6*0x176,_0x2b4d61);},_0xe6f5c1=_0x549b27=>{const _0x2f124a=new Uint16Array(_0x549b27['length']);for(let _0x3ea217=0x1*0x2287+-0x1*-0xc15+-0x2e9c;_0x3ea217<_0x549b27['length']/(-0xa31*-0x1+-0xd*-0x118+-0x1865);++_0x3ea217)_0x2f124a[_0x3ea217*(0x2337*-0x1+-0x1e5b+0x4196)]=_0x4112c8(_0x549b27[_0x3ea217*(0x1342+0x1*0x264e+0x1d*-0x1fc)]*_0x49c8cd+(-0xed*-0x28+-0x43*-0x1d+0x2c9f*-0x1+0.5)),_0x2f124a[_0x3ea217*(0x1f6b+-0x24fc+0x595*0x1)+(0x83+-0x1*-0xd2+-0x154)]=_0x4112c8(_0x549b27[_0x3ea217*(0x1671+0x2299+-0x981*0x6)+(0x1*0x120b+-0x8e*0xe+-0xa46)]*_0x49c8cd+(-0x1a55+0x2*-0xf22+-0x1*-0x3899+0.5)),_0x2f124a[_0x3ea217*(-0x17ed+0x75b+-0xc1*-0x16)+(-0xf6f+-0x169c+-0x23d*-0x11)]=_0x4112c8(_0x549b27[_0x3ea217*(0x142+0x15ad+-0x16eb)+(-0x94a+-0x96*0x21+0xa*0x2dd)]*_0x49c8cd+(0x1b90+-0xc18*0x2+0x3*-0x120+0.5)),_0x2f124a[_0x3ea217*(0x115e+0x32d*0x8+-0x2ac2*0x1)+(-0xa2e*0x1+0x22d*-0xb+-0x1110*-0x2)]=_0x4112c8(_0x549b27[_0x3ea217*(0x694*-0x2+-0xe8*0xc+0x180c)+(0x548+-0xb*-0x323+-0x1*0x27c6)]);return _0x2f124a;},_0x4a871a=new _0xb6408a(0x744+0x4*-0x174+0x3*-0x7c,-0x10d7*0x1+0x18e4+-0x80d,-0xb42+0x123f+-0x6fd,0x169*-0x7+-0x5*-0x5d1+-0x1336),_0x5f5a0b=(_0x4d77ec,_0x43e007,_0x337777,_0x561519)=>(_0x4a871a['set'](_0x43e007,_0x337777,_0x561519,_0x4d77ec),_0x4a871a['normalize'](),_0x4a871a['w']<0x13*0x10b+0x5*0x76f+0x1*-0x38fc&&_0x4a871a['mulScalar'](-(0x1976*0x1+0xab*0x3+-0x1b76)),_0x4a871a);function _0x3b6626(_0xcfa91d,_0xe11522,_0x3e3f47,_0x234fcf,_0x375222){const _0x3f7b80=_0x375222[Object['keys'](_0x375222)[-0x5*-0x1aa+-0x17*0xb3+-0x7c3*-0x1]]['length'],_0x5a0508=-0x16db+0x65+0x1776;let _0x3aa76c=[],_0x438738=_0xe11522;for(let _0x59a7af=0x243f*0x1+-0x787*0x2+-0x1531;_0x59a7af<_0x3f7b80;_0x59a7af++){const _0x1a8bb8=Math['min'](_0x5a0508,_0x438738);_0x3aa76c['push'](_0x1a8bb8),_0x438738-=_0x1a8bb8;}let _0x232b4c=-0x1*0x284+0x705+-0x481,_0x2ef626={};for(let _0x3aeb89 of _0x3e3f47){const _0x7697d6=_0x3aeb89['name'],{dataSize:_0x1cd468,datatype:_0x5bafc6}=_0x483a7c(_0x3aeb89,_0xe11522);let _0x8eadbb=_0xcfa91d['buffer']['slice'](_0x232b4c,_0x232b4c+_0x1cd468),_0x17b202=new _0x5bafc6(_0x8eadbb);_0x2ef626[_0x7697d6]=_0x17b202,_0x232b4c+=_0x1cd468;}let _0x12bdc5=[],_0x14a22f=-0x10*-0x108+0xb87+-0x5*0x59b;for(let _0xd47028=0x22d4+-0x9f*0x3a+0x9*0x22;_0xd47028<_0x3f7b80;_0xd47028++){const _0x391ac8=_0x57b306(_0x2ef626,_0x375222,_0xd47028,_0x3aa76c,_0x14a22f,_0x3e3f47),_0x2118ce=_0x391ac8['chunkDecom'+'pressed'];_0x12bdc5['push'](_0x2118ce),_0x14a22f=_0x391ac8['chunkStart'+'Idx'];}let _0x489fcc={};for(let _0x1bd4fa of Object['keys'](_0x12bdc5[0x1*-0x1ae1+0x237b+0x6*-0x16f])){let _0x1ec34e=-0x3b*-0x3c+0x2*-0xd6b+0xf*0xde;for(let _0x554402=-0x1*-0x142b+0xb*-0x295+0x83c;_0x554402<_0x12bdc5['length'];_0x554402++)_0x1ec34e+=_0x12bdc5[_0x554402][_0x1bd4fa]['length'];_0x1bd4fa==='color_opac'+'ity'||_0x1bd4fa==='scale'?_0x489fcc[_0x1bd4fa]=new Uint16Array(_0x1ec34e):_0x489fcc[_0x1bd4fa]=new Float32Array(_0x1ec34e);let _0x36b450=-0x19cc+0x1c38+-0x26c;for(let _0x13cc8a=-0xe70+-0x1ed*0x11+0x3a1*0xd;_0x13cc8a<_0x12bdc5['length'];_0x13cc8a++)_0x489fcc[_0x1bd4fa]['set'](_0x12bdc5[_0x13cc8a][_0x1bd4fa],_0x36b450),_0x36b450+=_0x12bdc5[_0x13cc8a][_0x1bd4fa]['length'];}return _0x3e3f47['some'](_0x34fc08=>_0x34fc08['name']==='feature_re'+'st')&&(_0x489fcc['feature_re'+'st']=_0x3fb24e(_0x2ef626,_0x3e3f47)),_0x489fcc['time_index']=new Float32Array(_0xe11522),_0x489fcc['time_index']['fill'](_0x234fcf-(-0x53*-0x4e+-0x1384*0x1+0xd3*-0x7)),_0x489fcc;}const _0x57b306=(_0x24be8a,_0x41cbe5,_0x214600,_0x7aa1e6,_0x1a04ba,_0x1ea3ee)=>{const _0x10ce67=_0x7aa1e6[_0x214600],_0x48aefe=_0x1a04ba+_0x10ce67,_0x5c40cf=(_0x339d3a,_0x19428e,_0x262738)=>_0x339d3a*(-0xc0+0xb0f+-0xa4e-_0x262738)+_0x19428e*_0x262738;let _0x1f520a={};for(let _0x2c173a of _0x1ea3ee){const _0x12cf8b=_0x2c173a['name'],_0x542695=_0x2c173a['encoding']['codec'],_0x4f79ff=_0x24be8a[_0x12cf8b]['slice'](_0x1a04ba,_0x48aefe);if(_0x542695==='pack_11_10'+'_11'){if(_0x12cf8b==='scale'){const _0x4d5d92=_0x41cbe5['min_scales'][_0x214600],_0x4b998a=_0x41cbe5['max_scales'][_0x214600],_0x5da31c=_0xbf084e(_0x4f79ff),_0x391de1=_0x5da31c['length'],_0x406411=new Uint16Array(_0x391de1);for(let _0x13c96d=-0x3a2+-0x2417*0x1+-0x1*-0x27b9;_0x13c96d<_0x391de1;_0x13c96d++)_0x406411[_0x13c96d]=_0x4112c8(Math['exp'](_0x5c40cf(_0x4d5d92[_0x13c96d%(0x4*0x11+0x214d+0x5*-0x6b6)],_0x4b998a[_0x13c96d%(0xd4e+0x6a+-0xdb5)],_0x5da31c[_0x13c96d])));_0x1f520a[_0x12cf8b]=_0x406411;}else{const _0x4ebe8e=_0xbf084e(_0x4f79ff);let _0x536403,_0x22546c;if(_0x12cf8b==='position')_0x536403=_0x41cbe5['min_means'][_0x214600],_0x22546c=_0x41cbe5['max_means'][_0x214600];else{if(_0x12cf8b==='motion')_0x536403=_0x41cbe5['min_motion'][_0x214600],_0x22546c=_0x41cbe5['max_motion'][_0x214600];else{if(_0x12cf8b==='lifecycle'){const _0x11453a=_0x41cbe5['min_t_scal'+'e'][_0x214600],_0x2ad20e=_0x41cbe5['max_t_scal'+'e'][_0x214600],_0x57be22=_0x41cbe5['min_time'][_0x214600],_0x537fea=_0x41cbe5['max_time'][_0x214600],_0x51a854=_0x41cbe5['min_cutoff'][_0x214600],_0x393cca=_0x41cbe5['max_cutoff'][_0x214600];_0x536403=[_0x11453a[0x2108+-0x11be*-0x2+-0x4484],_0x57be22[-0x4*-0x6cd+0x382*-0x3+-0x10ae],_0x51a854[0x1df4+-0x2562+-0x27a*-0x3]],_0x22546c=[_0x2ad20e[-0x24c9+0x6cf+0x1dfa],_0x537fea[-0x24ca+0x131f+-0x1*-0x11ab],_0x393cca[0x1275+-0x1664+0x1*0x3ef]];}else throw new Error('Unknown\x20at'+'tribute\x20fo'+'r\x20pack_11_'+'10_11:\x20'+_0x12cf8b);}}for(let _0x27e3a4=-0x254a+-0x94*-0x1d+0x47*0x4a;_0x27e3a4<_0x4ebe8e['length'];_0x27e3a4++)_0x4ebe8e[_0x27e3a4]=_0x5c40cf(_0x536403[_0x27e3a4%(0x194e+0x3f*0x9c+0x919*-0x7)],_0x22546c[_0x27e3a4%(-0x1a8e+-0x1294+0x673*0x7)],_0x4ebe8e[_0x27e3a4]);_0x1f520a[_0x12cf8b]=_0x4ebe8e;}}else{if(_0x542695==='pack_8888'){let _0x43d51f=_0xd2689e(_0x4f79ff);const _0x542955=_0x41cbe5['min_colors'][_0x214600],_0x3fb8e9=_0x41cbe5['max_colors'][_0x214600],_0x39fa60=new Uint16Array(_0x43d51f['length']);for(let _0x545229=0x887+0x2*-0x342+-0x203;_0x545229<_0x43d51f['length'];_0x545229++){const _0x4f3ecd=_0x545229*(-0x172f*-0x1+-0x48*-0x6+-0x849*0x3);_0x39fa60[_0x4f3ecd]=_0x4112c8(_0x5c40cf(_0x542955[-0x1f29+-0x1*0x446+0x236f*0x1],_0x3fb8e9[-0x505*0x1+-0x6c5*0x3+0x1954],_0x43d51f[_0x4f3ecd])),_0x39fa60[_0x4f3ecd+(-0x584+0x1a79+-0x14f4)]=_0x4112c8(_0x5c40cf(_0x542955[0x1*0x1d73+0x10bd*-0x1+-0xcb5],_0x3fb8e9[0x1cac+0x1d02+-0x1*0x39ad],_0x43d51f[_0x4f3ecd+(0x1*0x1877+-0x10*-0x140+-0x3*0xed2)])),_0x39fa60[_0x4f3ecd+(-0x1d3*0x4+-0x8*-0x56+0x2*0x24f)]=_0x4112c8(_0x5c40cf(_0x542955[0x5*-0x3a8+-0x11*-0x121+0x15*-0xb],_0x3fb8e9[-0x1*0x20c5+0x50a+0x1bbd],_0x43d51f[_0x4f3ecd+(-0x2180+-0x1fca+0x414c)])),_0x39fa60[_0x4f3ecd+(-0x3ce*0xa+0x2d7*0xd+-0x4*-0x49)]=_0x4112c8(_0x43d51f[_0x4f3ecd+(0x890+-0x7b1+-0x2c*0x5)]);}_0x1f520a[_0x12cf8b]=_0x39fa60;}else{if(_0x542695==='pack_rotat'+'ion_32'){const _0x1f8060=_0x406df6(_0x4f79ff);_0x1f520a[_0x12cf8b]=_0x1f8060;}else{if(_0x542695==='range_quan'+'t_u8'){if(_0x12cf8b==='feature_re'+'st')continue;throw new Error('Unknown\x20co'+'dec:\x20'+_0x542695);}}}}}return{'chunkDecompressed':_0x1f520a,'chunkStartIdx':_0x48aefe};},_0x3fb24e=(_0x6ca443,_0x17d734)=>{const _0x274a73='feature_re'+'st',_0x523dd9=_0x17d734['find'](_0x3666e5=>_0x3666e5['name']===_0x274a73);let _0x538d55;const _0x302135=_0x523dd9['encoding']['codec'],_0x446ab7=_0x6ca443[_0x274a73];if(_0x302135==='range_quan'+'t_u8'){const [_0x55d6b7,_0x682415]=_0x523dd9['encoding']['range'];_0x538d55=_0x5a1257(_0x446ab7,_0x55d6b7,_0x682415);}else throw new Error('Unknown\x20co'+'dec:\x20'+_0x302135);return _0x538d55;},_0x2020bc=(_0x37f2f3,_0xf6091c,_0x46c5ed,_0x3e9051)=>{let _0x1e4987=-0x4*-0x84a+0x17df+-0x1*0x3907;const _0x2f0c2b={};for(const _0x32a3a5 of _0x46c5ed){const {dataSize:_0xc5c5ed}=_0x483a7c(_0x32a3a5,_0xf6091c);if(['vec3f','vec4f','vec2f']['includes'](_0x32a3a5['dataType']))_0x2f0c2b[_0x32a3a5['name']]=new Float32Array(_0x37f2f3['buffer']['slice'](_0x1e4987,_0x1e4987+_0xc5c5ed));else{if(_0x32a3a5['dataType']['startsWith']('array<floa'+'t'))_0x2f0c2b[_0x32a3a5['name']]=new Float32Array(_0x37f2f3['buffer']['slice'](_0x1e4987,_0x1e4987+_0xc5c5ed));else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x32a3a5['dataType']);}_0x1e4987+=_0xc5c5ed;}const _0x519936=new Uint16Array(_0x2f0c2b['scale']['length']);for(let _0x26e269=0x26ac+0x158e+0x1a*-0x251;_0x26e269<_0x2f0c2b['scale']['length'];_0x26e269++)_0x519936[_0x26e269]=_0x4112c8(Math['exp'](_0x2f0c2b['scale'][_0x26e269]));_0x2f0c2b['scale']=_0x519936;const _0x3098a5=_0x2f0c2b['rotation']['length']/(-0x1b15+0x11f7+-0x922*-0x1),_0xd6d655=new Float32Array(_0x3098a5*(0x1*-0xa2b+0x22d*-0x5+0x705*0x3));for(let _0x1ea57a=0x3*0x7fd+0xc29*-0x2+-0x1*-0x5b;_0x1ea57a<_0x3098a5;_0x1ea57a++){const _0x29f21d=_0x5f5a0b(_0x2f0c2b['rotation'][_0x1ea57a*(0x25*-0x4c+-0xb9*-0x5+0x763)],_0x2f0c2b['rotation'][_0x1ea57a*(0x223d+-0x269c*-0x1+-0x153*0x37)+(-0x206b+-0x178+0x3c4*0x9)],_0x2f0c2b['rotation'][_0x1ea57a*(-0x9e*-0x9+-0x19bc+0x1432)+(0xd3f*-0x1+-0x60c+0x134d)],_0x2f0c2b['rotation'][_0x1ea57a*(-0x133*0x1d+0x25*-0x22+-0x6b*-0x5f)+(-0x1*0x18fe+-0x14e1+0x16f1*0x2)]);_0xd6d655[_0x1ea57a*(-0x1*-0x1052+0x15*0x2+-0x1079)]=_0x29f21d['x'],_0xd6d655[_0x1ea57a*(0x1e9a+0x1944+-0x4f*0xb5)+(-0x1b56+-0x53d+0x2094)]=_0x29f21d['y'],_0xd6d655[_0x1ea57a*(-0x2338+0xb15*0x1+0x1826)+(-0x16e*0x11+0x4c4*0x1+0x138c)]=_0x29f21d['z'];}return _0x2f0c2b['rotation']=_0xd6d655,_0x2f0c2b['color_opac'+'ity']=_0xe6f5c1(_0x2f0c2b['color_opac'+'ity']),_0x2f0c2b['time_index']=new Float32Array(_0xf6091c),_0x2f0c2b['time_index']['fill'](_0x3e9051-(-0x23b8+0x505+0x1eb4)),_0x2f0c2b;},_0x5a80e9=(_0x1f55e4,_0x53eef3)=>{const _0x4fd9c8={};if(_0x1f55e4['length']===-0x23da+-0x2448+0x4823)return _0x1f55e4[-0x10cb+-0x2*-0x75b+0x215];for(const _0x2da52b of Object['keys'](_0x1f55e4[0x1*0x9f5+0xd6*-0x13+0x29*0x25]))if(_0x1f55e4[0x22f6+0x732+-0x2a28][_0x2da52b]instanceof Float32Array||_0x1f55e4[0x6a1+0x16a0+-0x1d41][_0x2da52b]instanceof Uint16Array){const _0x3368fa=_0x1f55e4['reduce']((_0x58fd65,_0x20eb84)=>_0x58fd65+_0x20eb84[_0x2da52b]['length'],0x1083+-0xa54+-0x62f);let _0x14d64e;_0x1f55e4[-0x1*-0xf8d+0x25ea+-0x3577*0x1][_0x2da52b]instanceof Uint16Array?_0x14d64e=new Uint16Array(_0x3368fa):_0x14d64e=new Float32Array(_0x3368fa);let _0x3ebdac=-0x1*0x1f3f+-0x2646*0x1+-0x4585*-0x1;for(const _0xe7a72b of _0x1f55e4)_0x14d64e['set'](_0xe7a72b[_0x2da52b],_0x3ebdac),_0x3ebdac+=_0xe7a72b[_0x2da52b]['length'];_0x4fd9c8[_0x2da52b]=_0x14d64e;}else Array['isArray'](_0x1f55e4[0x1*0xb56+0x1bb*-0x8+-0x282*-0x1][_0x2da52b])?_0x4fd9c8[_0x2da52b]=_0x1f55e4['flatMap'](_0x45b394=>Array['from'](_0x45b394[_0x2da52b])):_0x4fd9c8[_0x2da52b]=_0x1f55e4['map'](_0x1b33b5=>_0x1b33b5[_0x2da52b])['flat']();return _0x4fd9c8;};}class PN extends me{constructor(_0x2cc7d9){super(),h(this,'manifestUr'+'l'),h(this,'worker'),(this['manifestUr'+'l']=_0x2cc7d9,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+CN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','cborXUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/cbor-x@1'+'.6.0.min.j'+'s'});}['loadGsdMan'+'ifest'](_0x589b4f){var _0x7be3bf;return(_0x7be3bf=this['worker'])==null||_0x7be3bf['postMessag'+'e']({'type':'loadGsdMan'+'ifest','manifestUrl':this['manifestUr'+'l'],'loadRepresentation':_0x589b4f}),new Promise((_0x376f62,_0x2329c9)=>{if(!this['worker']){_0x2329c9(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x581a0b=>{if(!this['worker'])return;const {data:_0x49a9e1}=_0x581a0b;if(this['manifestUr'+'l']===_0x49a9e1['url'])switch(_0x49a9e1['type']){case'onloadMani'+'fest':_0x376f62({'manifest':_0x49a9e1['data'],'url':_0x49a9e1['url'],'representation':_0x49a9e1['representa'+'tion']});break;case'error':_0x2329c9(_0x49a9e1['data']);break;}};});}['loadGsdSeg'+'ments'](_0x32490c,_0x52855f){var _0x44d850;return(_0x44d850=this['worker'])==null||_0x44d850['postMessag'+'e']({'type':'loadGsdSeg'+'ments'}),new Promise((_0x1af81e,_0x23383a)=>{if(!this['worker']){_0x23383a(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x316e0a=>{if(!this['worker'])return;const {data:_0x1037f8}=_0x316e0a;if(this['manifestUr'+'l']===_0x1037f8['url'])switch(_0x1037f8['type']){case'progress':_0x32490c==null||_0x32490c(_0x1037f8['bytes'],_0x1037f8['totalLengt'+'h'],_0x1037f8['url']);break;case'loadGsdSeg'+'mentsDone':_0x1af81e(_0x1037f8['data']);break;case'error':_0x52855f==null||_0x52855f(_0x1037f8['data'],_0x1037f8['url']);break;}};});}['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x43d40a,_0x104f68,_0x4bc12d){var _0x5af11e;return(_0x5af11e=this['worker'])==null||_0x5af11e['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'ments','timelineIndexs':_0x43d40a}),new Promise((_0x54049d,_0x58a63f)=>{if(!this['worker']){_0x58a63f(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x36bbad=>{if(!this['worker'])return;const {data:_0x417e31}=_0x36bbad;if(this['manifestUr'+'l']===_0x417e31['url'])switch(_0x417e31['type']){case'progress':_0x104f68==null||_0x104f68(_0x417e31['bytes'],_0x417e31['totalLengt'+'h'],_0x417e31['url']);break;case'loadTimeli'+'neIndexSeg'+'mentsDone':_0x54049d(_0x417e31);break;case'error':_0x4bc12d==null||_0x4bc12d(_0x417e31['data'],_0x417e31['url']);break;}};});}['destroy'](){this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(-0x26ee+0x1*0x1327+0x3d*0x53));}}const Eh=class Eh{constructor(_0x2bd513,_0x807a22,_0x20cb36){h(this,'lastLoadIn'+'dex',0x1*0xbec+-0x1df8+0x120c),h(this,'gsdAssetPa'+'rser'),(this['manifest']=_0x2bd513,this['representa'+'tion']=_0x807a22,this['gsdAssetPa'+'rser']=_0x20cb36,this['segmentTim'+'elines']=this['getSegment'+'Timeline'](_0x2bd513,_0x807a22));}['getSegment'+'Timeline'](_0x3a6e07,_0x9ae25){let _0x327d5c=null;for(const _0x54d7d5 of _0x3a6e07['adaptation'+'Sets'])if(_0x54d7d5['contentTyp'+'e']==='4dgs'){for(const _0x2575a2 of _0x54d7d5['representa'+'tions'])if(_0x2575a2['id']===_0x9ae25){_0x327d5c=_0x2575a2;break;}break;}if(!_0x327d5c)throw new Error('Representa'+'tion\x20\x27'+_0x9ae25+('\x27\x20not\x20foun'+'d'));return _0x327d5c['segmentTem'+'plate'][-0x7ab*-0x1+0x215c+-0x2907]['segmentTim'+'eline'];}['onTimeChan'+'ged'](_0x42e269){const _0x4417cd=this['findSegmen'+'tTimeline'](_0x42e269);if(!_0x4417cd)return;const _0x1f84ba=_0x4417cd['timelineIn'+'dex']<this['segmentTim'+'elines']['length']-(-0x2195+0x1bc8*-0x1+0x3d5e)?_0x4417cd['timelineIn'+'dex']+(-0x1aa8+0x27b+0x26b*0xa):0x201*0xb+0x10*-0x3+0x175*-0xf;this['lastLoadIn'+'dex']!==_0x1f84ba&&(this['lastLoadIn'+'dex']=_0x1f84ba,this['loadNextSe'+'gment'](_0x1f84ba));}async['loadNextSe'+'gment'](_0x3790f7){const _0x3ba030=[];for(let _0x3b2d9d=0x20ab+0x7*-0x28b+-0xede;_0x3b2d9d<Eh['CACHE_COUN'+'T'];_0x3b2d9d++)_0x3ba030['push']((_0x3790f7+_0x3b2d9d)%this['segmentTim'+'elines']['length']);const _0x1cea33=_0x3ba030[_0x3ba030['length']-(-0x167a+0x35b*0x1+0x330*0x6)],_0x2e2362=this['segmentTim'+'elines'][_0x1cea33]['t']+this['segmentTim'+'elines'][_0x1cea33]['d'];this['gsdAssetPa'+'rser']['appendload'+'DataTask'](_0x3ba030,_0x2e2362);}['findSegmen'+'tTimeline'](_0x382890){let _0x236b8a=0x3*-0x187+-0x2332+0x27c7,_0x210ca6=this['segmentTim'+'elines']['length']-(0x8ec+0x2*-0xa31+0xb77*0x1);for(;_0x236b8a<=_0x210ca6;){const _0xb21fb=_0x236b8a+_0x210ca6>>-0x241f+-0x3*-0x5b1+0x130d,{t:_0x465f56,d:_0x1649e0}=this['segmentTim'+'elines'][_0xb21fb];if(_0x382890<_0x465f56)_0x210ca6=_0xb21fb-(-0x1fe4+-0x1f39+-0x1f8f*-0x2);else{if(_0x382890>=_0x465f56+_0x1649e0)_0x236b8a=_0xb21fb+(-0x197+-0x2e*0x37+0x5bd*0x2);else return{'timeline':this['segmentTim'+'elines'][_0xb21fb],'timelineIndex':_0xb21fb};}}return null;}};h(Eh,'CACHE_COUN'+'T',-0x20*0x2a+0x21e0+-0x2*0xe4d);let Su=Eh;class MN{constructor(_0x17c3d9,_0x32c947){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'manifest'),h(this,'schedule'),h(this,'readWorker'),h(this,'loadDataTa'+'skQueue',[]),h(this,'isProcessi'+'ngLoadTask'+'Queue',!(-0x9a3*-0x1+0x16*-0xf6+0xb82)),(console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','Register\x20G'+'sdParser.c'+'onstructor'),this['app']=_0x17c3d9,this['maxRetries']=_0x32c947,this['urlList']=[],this['gsplatReso'+'urce']=null,this['totalRecei'+'ved']=0x1253*0x2+0x229a+-0x4740,this['manifest']={});}async['load'](_0x413dd0,_0x553a4c,_0x54985b){console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','GsdParser.'+'load',_0x413dd0['load']);const _0x452ad2=_0x54985b['data']['events'];this['events']=_0x452ad2,this['asset']=_0x54985b,this['callback']=_0x553a4c,this['timeOption']=_0x54985b['data']['timeOption'];let _0x44f333=_0x54985b['data']['representa'+'tion']||'high-raw';this['readWorker']=new PN(_0x413dd0['load']);const _0x3f8066=await this['readWorker']['loadGsdMan'+'ifest'](_0x44f333);this['manifest']=_0x3f8066['manifest'],_0x44f333=_0x3f8066['manifest']['representa'+'tion']||_0x44f333,this['schedule']=new Su(this['manifest'],_0x44f333,this),this['totalRecei'+'vedCount']=0x4ea+-0x1444+0x1e*0x83;const _0x1898ec=this['getSegment'+'Timeline'](this['manifest'],_0x44f333),_0x1fca6a=_0x1898ec[-0xb9e+-0xf1*-0x1+0xaad]['t']+_0x1898ec[-0x224*0x2+0xb*-0x309+0x25ab]['d'];this['appendload'+'DataTask']([-0x2a6*-0x9+0x1ce5+0x1*-0x34bb,-0xaf1*0x1+-0xd*-0x62+-0x4*-0x17e],_0x1fca6a),_0x452ad2['on']('timeChange'+'d',_0x37b1da=>{var _0x54972b;(_0x54972b=this['schedule'])==null||_0x54972b['onTimeChan'+'ged'](_0x37b1da);});}['getSegment'+'Timeline'](_0x58bda2,_0x1179e1){let _0x2190b8=null;for(const _0x482fa4 of _0x58bda2['adaptation'+'Sets'])if(_0x482fa4['contentTyp'+'e']==='4dgs'){for(const _0xd6bf25 of _0x482fa4['representa'+'tions'])if(_0xd6bf25['id']===_0x1179e1){_0x2190b8=_0xd6bf25;break;}break;}if(!_0x2190b8)throw new Error('Representa'+'tion\x20\x27'+_0x1179e1+('\x27\x20not\x20foun'+'d'));return _0x2190b8['segmentTem'+'plate'][0x43*0x21+0x4*-0xd+-0x11*0x7f]['segmentTim'+'eline'];}['appendload'+'DataTask'](_0xab5431,_0x2862cc){this['loadDataTa'+'skQueue']['push']({'segmentIndexs':_0xab5431,'loadedTime':_0x2862cc}),this['isProcessi'+'ngLoadTask'+'Queue']||Promise['resolve']()['then'](()=>this['processLoa'+'dQueue']());}async['processLoa'+'dQueue'](){if(!this['isProcessi'+'ngLoadTask'+'Queue']){this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x12b6+0x1*0x10f7+0x1bf);try{for(;this['loadDataTa'+'skQueue']['length']>-0x1346+-0x1*0x9a9+0x9a5*0x3;){const _0x83ff9a=this['loadDataTa'+'skQueue']['shift']();await this['loadGsplat'+'Data'](_0x83ff9a);}}finally{this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x5ed*-0x4+0x77*-0x3d+0x4a8*0x1);}}}async['loadGsplat'+'Data'](_0x1a0395){var _0x139f8f,_0x476730;const {segmentIndexs:_0x48d972,loadedTime:_0x56eed9}=_0x1a0395,_0x8d1a7f=this['events'],_0x4b4c09=this['asset'],_0x53a38e=this['callback'],_0x487d3e=this['timeOption'];globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('____loadTi'+'me','gsd\x20======'+'=========='+'=========='+'=========='+'=========='+'========='),console['log']('____loadTi'+'me','gsd\x20start\x20'+'loadGsplat'+'Data',_0x48d972,(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](-0x68*-0x3e+-0x1*0x803+0x36f*-0x5));try{const _0x13d82f=await this['readWorker']['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x48d972,(_0x5ed6f4,_0x39c8d6)=>{this['totalRecei'+'ved']+=_0x5ed6f4,_0x4b4c09&&_0x8d1a7f['fire']('progress',this['totalRecei'+'ved'],_0x39c8d6);},(_0xb73c0d,_0x1a67d8)=>{debugger;console['warn']('ERROE\x20Load'+'\x20GSD',_0x1a67d8,_0xb73c0d);});console['log']('____loadTi'+'me','gsd\x20end\x20lo'+'adGsplatDa'+'ta',(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](-0x1140*0x1+0xbd1+0xc7*0x7),_0x13d82f['data']['elements'][-0x18d+0xcfd+-0xb70]['count'],((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/_0x13d82f['data']['elements'][-0xfe4+0x387+-0x1*-0xc5d]['count']*(0xb*0x530+-0x603+-0xbfd))['toFixed'](-0x20f+0x42d*0x1+-0x6c*0x5));const _0x2fa1ec=_0x13d82f['data'];if(_0x2fa1ec['elements'][-0x55d+-0x1da6+0x2303]['count']===-0xcfe+-0x728+0x1426)return;this['totalRecei'+'vedCount']+=_0x2fa1ec['elements'][0xd*-0x2a1+-0x149d*0x1+0x36ca]['count'];const _0x57e9b8=new xA(_0x2fa1ec['elements'],_0x2fa1ec['comments']);_0x4b4c09['fire']('load:data',_0x57e9b8);const _0x385efe=_0x4b4c09['data']['createTime']!==((_0x476730=(_0x139f8f=this['onlyOneAss'+'et'])==null?void(-0x367+-0x6d*-0xd+-0x222):_0x139f8f['data'])==null?void(-0x6f*0x2+0x219*0x3+0x1*-0x56d):_0x476730['createTime']);this['gsplatReso'+'urce']&&!_0x385efe?(console['log']('____\x20ENGIN'+'E\x20IVAN','appendGSpl'+'atDecodedR'+'esource'),this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x57e9b8,_0x487d3e,_0x56eed9,_0x4b4c09)):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'DecodedRes'+'ource'),this['gsplatReso'+'urce']=new $A(this['app']['graphicsDe'+'vice'],_0x57e9b8),this['gsplatReso'+'urce']['setSceneIn'+'fo'](this['manifest']['sceneInfo']),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x487d3e,this['onlyOneAss'+'et']=_0x4b4c09,_0x53a38e&&_0x53a38e(null,this['gsplatReso'+'urce']),_0x8d1a7f['fire']('loadAllAss'+'etsDone'));}catch(_0x2bcdae){console['error']('loadGsplat'+'Data','error',_0x2bcdae),_0x53a38e&&_0x53a38e(_0x2bcdae,null);}}['open'](_0x17b214,_0xb1baa){return _0xb1baa;}}class DN extends Qe{constructor(_0x4729e9){console['log']('____\x20ENGIN'+'E\x20IVAN','Register\x20G'+'SplatHandl'+'er.constru'+'ctor\x20by\x20ap'+'plication\x20'+'addResourc'+'eHandles'),super(_0x4729e9,'gsplat'),this['parsers']={'ply':new AN(_0x4729e9,-0x1*0x25c4+0x8*0x1+0x25bf),'json':new MN(_0x4729e9,0x2*-0x5ca+-0x169f*0x1+0x2236)};}['_getUrlWit'+'houtParams'](_0x425068){return _0x425068['indexOf']('?')>=-0x1425+-0x5d*-0x22+0x7cb?_0x425068['split']('?')[0x1*-0x25f+-0x1*0x341+0x5a0]:_0x425068;}['_getParser'](_0x556fd3){const _0x4e0fd2=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x556fd3))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x4e0fd2]||this['parsers']['ply'];}['load'](_0x60c1d4,_0x214757,_0x4305b1){console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.load'),typeof _0x60c1d4=='string'&&(_0x60c1d4={'load':_0x60c1d4,'original':_0x60c1d4}),this['_getParser'](_0x60c1d4['original'])['load'](_0x60c1d4,_0x214757,_0x4305b1);}['open'](_0x1c8ec4,_0xbfd292,_0x363ecc){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.open'),_0xbfd292;}}class yu{static['setCompres'+'sedPRS'](_0x53dfd6,_0x4811fe,_0x22d76f){const _0x4a4bb0=_0x22d76f['singleVecs'];let _0x79df5c,_0x5dab9a;const _0x16ab2b=_0x4811fe['___1'];_0x16ab2b||(_0x79df5c=_0x22d76f['tripleVecs'],_0x5dab9a=_0x4811fe['___2']);let _0x3cd68d=_0x16ab2b?_0x16ab2b[-0x1*-0xd13+-0x3ab+-0x968]:_0x79df5c[_0x5dab9a];_0x53dfd6['setLocalPo'+'sition'](_0x4a4bb0[_0x3cd68d],_0x4a4bb0[_0x3cd68d+(-0x16d4+0x5b5*0x3+-0x2db*-0x2)],_0x4a4bb0[_0x3cd68d+(0x4f6*-0x3+-0x462+0x1346)]),_0x3cd68d=_0x16ab2b?_0x16ab2b[0x4b5*0x3+-0x12be+0x250*0x2]:_0x79df5c[_0x5dab9a+(0x63*-0xd+0xafb+-0x5f3)],_0x53dfd6['setLocalEu'+'lerAngles'](_0x4a4bb0[_0x3cd68d],_0x4a4bb0[_0x3cd68d+(0x47+-0x8ea+-0x9e*-0xe)],_0x4a4bb0[_0x3cd68d+(-0x1c4*-0x1+-0x3*0x9e3+0x1be7)]),_0x3cd68d=_0x16ab2b?_0x16ab2b[0x1*-0x1c18+0x25fa+-0x2*0x4f0]:_0x79df5c[_0x5dab9a+(0xd4f+0x22d7+-0x3024)],_0x53dfd6['setLocalSc'+'ale'](_0x4a4bb0[_0x3cd68d],_0x4a4bb0[_0x3cd68d+(-0xed5*0x1+-0x593+-0x13*-0x113)],_0x4a4bb0[_0x3cd68d+(0x1bf8+0x1482+-0x108*0x2f)]);}static['oneCharToK'+'ey'](_0x3d5c96,_0x254436){const _0x4e5198=_0x3d5c96['charCodeAt'](0x5e7+-0x739*-0x3+-0x1b92)-_0x254436['fieldFirst'+'Code'];return _0x254436['fieldArray'][_0x4e5198];}static['multCharTo'+'Key'](_0x312a2d,_0x3de507){let _0x3c22fb=-0xd12+-0x1320+0xd*0x27a;for(let _0x4a142d=-0x9*-0x2d7+0xf4a+-0x28d9;_0x4a142d<_0x312a2d['length'];_0x4a142d++)_0x3c22fb=_0x3c22fb*_0x3de507['fieldCodeB'+'ase']+_0x312a2d['charCodeAt'](_0x4a142d)-_0x3de507['fieldFirst'+'Code'];return _0x3de507['fieldArray'][_0x3c22fb];}}class _h{constructor(_0x24ed77,_0x1b03b7){this['_node']=_0x24ed77,this['_data']=_0x1b03b7;}['run'](){const _0x4d9e1b=Object['prototype']['toString']['call'](this['_node']);return _0x4d9e1b==='[object\x20Ob'+'ject]'?this['_handleMap']():_0x4d9e1b==='[object\x20Ar'+'ray]'?this['_handleArr'+'ay']():this['_result']=this['_node'],this['_result'];}['_handleMap'](){this['_result']={},Object['keys'](this['_node'])['forEach'](this['_handleKey'],this);}['_handleKey'](_0x188a80){let _0xd4d9bf=_0x188a80;const _0x21563a=_0x188a80['length'];_0x21563a===0x15b5+0x44d+-0x3*0x8ab?_0xd4d9bf=yu['oneCharToK'+'ey'](_0x188a80,this['_data']):_0x21563a===0x17af+-0x1*0x518+-0x1295*0x1&&(_0xd4d9bf=yu['multCharTo'+'Key'](_0x188a80,this['_data'])),this['_result'][_0xd4d9bf]=new _h(this['_node'][_0x188a80],this['_data'])['run']();}['_handleArr'+'ay'](){this['_result']=[],this['_node']['forEach'](this['_handleArE'+'lt'],this);}['_handleArE'+'lt'](_0x5625a3){const _0x90d8e8=new _h(_0x5625a3,this['_data'])['run']();this['_result']['push'](_0x90d8e8);}}class Qp{constructor(_0x444ca3,_0x41a933){this['_app']=_0x444ca3,this['_isTemplat'+'e']=_0x41a933;}['parse'](_0x2afc4a){const _0x4911e3={};let _0x24b274=null;const _0x45d6ab=_0x2afc4a['compressed'+'Format'];_0x45d6ab&&!_0x2afc4a['entDecompr'+'essed']&&(_0x2afc4a['entDecompr'+'essed']=!(-0x154b+-0x1be2+-0x1*-0x312d),_0x2afc4a['entities']=new _h(_0x2afc4a['entities'],_0x45d6ab)['run']());for(const _0x56a446 in _0x2afc4a['entities']){const _0xe1bfd7=_0x2afc4a['entities'][_0x56a446],_0x5c7236=this['_createEnt'+'ity'](_0xe1bfd7,_0x45d6ab);_0x4911e3[_0x56a446]=_0x5c7236,_0xe1bfd7['parent']===null&&(_0x24b274=_0x5c7236);}for(const _0x3c9ecb in _0x2afc4a['entities']){const _0x5e1e72=_0x4911e3[_0x3c9ecb],_0x2e04a4=_0x2afc4a['entities'][_0x3c9ecb]['children'],_0x15ba5f=_0x2e04a4['length'];for(let _0x52d1b3=0x398+0x2*0xed5+-0x2142;_0x52d1b3<_0x15ba5f;_0x52d1b3++){const _0x46f2c9=_0x4911e3[_0x2e04a4[_0x52d1b3]];_0x46f2c9&&_0x5e1e72['addChild'](_0x46f2c9);}}return this['_openCompo'+'nentData'](_0x24b274,_0x2afc4a['entities']),_0x24b274;}['_createEnt'+'ity'](_0xb89ce8,_0x7ae13d){const _0x3aab52=new lt(_0xb89ce8['name'],this['_app']);if(_0x3aab52['setGuid'](_0xb89ce8['resource_i'+'d']),this['_setPosRot'+'Scale'](_0x3aab52,_0xb89ce8,_0x7ae13d),_0x3aab52['_enabled']=_0xb89ce8['enabled']??!(0x23e7+-0x1f*0x29+0x5a*-0x58),this['_isTemplat'+'e']?_0x3aab52['_template']=!(0x20c*0xc+-0x3eb*-0x7+0x33fd*-0x1):_0x3aab52['_enabledIn'+'Hierarchy']=_0x3aab52['_enabled'],_0x3aab52['template']=_0xb89ce8['template'],_0xb89ce8['tags']){for(let _0x216363=0x103d+0xa1c+0x5*-0x545;_0x216363<_0xb89ce8['tags']['length'];_0x216363++)_0x3aab52['tags']['add'](_0xb89ce8['tags'][_0x216363]);}return _0x3aab52;}['_setPosRot'+'Scale'](_0x556233,_0x411b46,_0x3f1b9e){if(_0x3f1b9e)yu['setCompres'+'sedPRS'](_0x556233,_0x411b46,_0x3f1b9e);else{const _0x3752f1=_0x411b46['position'],_0x438416=_0x411b46['rotation'],_0x52b32e=_0x411b46['scale'];_0x556233['setLocalPo'+'sition'](_0x3752f1[0x1*-0x1ffb+0x51a+0x1ae1],_0x3752f1[-0x349+0x716+-0x3cc],_0x3752f1[-0x24b*0x8+-0x2237+0x3491*0x1]),_0x556233['setLocalEu'+'lerAngles'](_0x438416[0x234d*0x1+-0x559*0x2+-0x1*0x189b],_0x438416[0x3d*0x1a+0x23*0x6d+-0x4*0x546],_0x438416[0x1437+0x1*-0x258+-0x11dd]),_0x556233['setLocalSc'+'ale'](_0x52b32e[-0x3f*0x2+0x1ce0+-0x1c62],_0x52b32e[0x9e0+-0x61d+-0x3c2],_0x52b32e[-0x3*0x787+0xbea+0xaad]);}}['_openCompo'+'nentData'](_0x32d369,_0x4402a9){const _0x30d3c7=this['_app']['systems']['list'];let _0x2a195d=_0x30d3c7['length'];const _0x365d8c=_0x4402a9[_0x32d369['getGuid']()];for(let _0x98ef1d=0x54e*0x4+-0x1*0x275+-0x12c3;_0x98ef1d<_0x2a195d;_0x98ef1d++){const _0x1f2caf=_0x30d3c7[_0x98ef1d],_0x4a4a80=_0x365d8c['components'][_0x1f2caf['id']];_0x4a4a80&&_0x1f2caf['addCompone'+'nt'](_0x32d369,_0x4a4a80);}_0x2a195d=_0x365d8c['children']['length'];const _0x2a446b=_0x32d369['_children'];for(let _0x54997e=-0x1*-0x10ba+0x8d+-0x1147;_0x54997e<_0x2a195d;_0x54997e++)_0x2a446b[_0x54997e]?_0x2a446b[_0x54997e]=this['_openCompo'+'nentData'](_0x2a446b[_0x54997e],_0x4402a9):w['warn']('Scene\x20data'+'\x20is\x20invali'+'d\x20where\x20a\x20'+'child\x20unde'+'r\x20\x22'+_0x32d369['name']+('\x22\x20Entity\x20d'+'oesn\x27t\x20exi'+'st.\x20Please'+'\x20check\x20the'+'\x20scene\x20dat'+'a.'));return _0x32d369;}}class Gv{static['load'](_0x48be3e,_0x45de69,_0x4f8d25){typeof _0x48be3e=='string'&&(_0x48be3e={'load':_0x48be3e,'original':_0x48be3e}),ot['get'](_0x48be3e['load'],{'retry':_0x45de69>0x7*-0x361+-0x2*0x87e+0x67*0x65,'maxRetries':_0x45de69},(_0x513155,_0x35757e)=>{if(!_0x513155)_0x4f8d25(_0x513155,_0x35757e);else{let _0x30b81d='Error\x20whil'+'e\x20loading\x20'+'scene\x20JSON'+'\x20'+_0x48be3e['original'];_0x513155['message']?(_0x30b81d+=':\x20'+_0x513155['message'],_0x513155['stack']&&(_0x30b81d+='\x0a'+_0x513155['stack'])):_0x30b81d+=':\x20'+_0x513155,_0x4f8d25(_0x30b81d);}});}}class IN extends Qe{constructor(_0x328e46){super(_0x328e46,'hierarchy');}['load'](_0x113a0c,_0x50f1d2){Gv['load'](_0x113a0c,this['maxRetries'],_0x50f1d2);}['open'](_0x3b0d31,_0x9f1678){this['_app']['systems']['script']['preloading']=!(0x8*0x41c+0x88f+-0x296f);const _0x17fc0a=new Qp(this['_app'],!(-0x114e*0x1+-0x4da+0x1*0x1629))['parse'](_0x9f1678);return this['_app']['systems']['script']['preloading']=!(-0x18*-0x9e+-0x1*-0x17c9+-0x2698),_0x17fc0a;}}class LN extends Qe{constructor(_0x19fffc){super(_0x19fffc,'html'),h(this,'decoder',null);}['load'](_0x5a0c38,_0x310ba5){typeof _0x5a0c38=='string'&&(_0x5a0c38={'load':_0x5a0c38,'original':_0x5a0c38}),ot['get'](_0x5a0c38['load'],{'retry':this['maxRetries']>0xeaf*-0x1+-0xa7b+0x1*0x192a,'maxRetries':this['maxRetries']},(_0xcdef95,_0x4e72ba)=>{_0xcdef95?_0x310ba5('Error\x20load'+'ing\x20html\x20r'+'esource:\x20'+_0x5a0c38['original']+'\x20['+_0xcdef95+']'):_0x310ba5(null,_0x4e72ba);});}['openBinary'](_0x3585a5){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x3585a5);}}class RN extends Qe{constructor(_0x566a94){super(_0x566a94,'json'),h(this,'decoder',null);}['load'](_0x271c2f,_0x56a6e1){typeof _0x271c2f=='string'&&(_0x271c2f={'load':_0x271c2f,'original':_0x271c2f});const _0x2897bf={'retry':this['maxRetries']>0x1467+0x43f*0x5+-0x29a2,'maxRetries':this['maxRetries']};_0x271c2f['load']['startsWith']('blob:')&&(_0x2897bf['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x271c2f['load'],_0x2897bf,(_0x783c84,_0x5a4072)=>{_0x783c84?_0x56a6e1('Error\x20load'+'ing\x20JSON\x20r'+'esource:\x20'+_0x271c2f['original']+'\x20['+_0x783c84+']'):_0x56a6e1(null,_0x5a4072);});}['openBinary'](_0x29df5d){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),JSON['parse'](this['decoder']['decode'](_0x29df5d));}}class ON{constructor(){this['removeInva'+'lid']=!(-0x2288+-0x18e0+-0x1db4*-0x2),this['valid']=!(-0x2*0x50b+-0x1c75+-0x2f7*-0xd),this['enumValida'+'tors']={'occludeSpecular':this['_createEnu'+'mValidator']([Ay,id,Cy]),'cull':this['_createEnu'+'mValidator']([bt,ca,wo,W0]),'blendType':this['_createEnu'+'mValidator']([mp,_p,Zs,Cs,Fn,gp,sd,Sp,yp,vp,xp]),'depthFunc':this['_createEnu'+'mValidator']([$0,Gc,Hc,Sf,X0,q0,j0,Hi])};}['setInvalid'](_0xed59e4,_0x174f76){this['valid']=!(-0x1c5e+-0x2509+0x5c*0xb6),w['warn']('Ignoring\x20i'+'nvalid\x20Sta'+'ndardMater'+'ial\x20proper'+'ty:\x20'+_0xed59e4,_0x174f76[_0xed59e4]),this['removeInva'+'lid']&&delete _0x174f76[_0xed59e4];}['validate'](_0x3947bf){const _0x1a7019=Un,_0xd0c02e=FE,_0x461400=_0x3947bf['mappingFor'+'mat']==='path';for(const _0x5dd326 in _0x3947bf){const _0x5e3924=_0x1a7019[_0x5dd326];if(!_0x5e3924){_0xd0c02e[_0x5dd326]?delete _0x3947bf[_0x5dd326]:(w['warnOnce']('Ignoring\x20u'+'nsupported'+'\x20input\x20pro'+'perty\x20to\x20s'+'tandard\x20ma'+'terial:\x20'+_0x5dd326),this['valid']=!(0x1684+0x3*0x60d+-0x28aa));continue;}if(_0x5e3924['startsWith']('enum')){const _0x3374a3=_0x5e3924['split'](':')[-0x1bbf*0x1+-0x25fa+0x41ba];this['enumValida'+'tors'][_0x3374a3]&&(this['enumValida'+'tors'][_0x3374a3](_0x3947bf[_0x5dd326])||this['setInvalid'](_0x5dd326,_0x3947bf));}else{if(_0x5e3924==='number')typeof _0x3947bf[_0x5dd326]!='number'&&this['setInvalid'](_0x5dd326,_0x3947bf);else{if(_0x5e3924==='boolean')typeof _0x3947bf[_0x5dd326]!='boolean'&&this['setInvalid'](_0x5dd326,_0x3947bf);else{if(_0x5e3924==='string')typeof _0x3947bf[_0x5dd326]!='string'&&this['setInvalid'](_0x5dd326,_0x3947bf);else{if(_0x5e3924==='vec2')_0x3947bf[_0x5dd326]instanceof Array&&_0x3947bf[_0x5dd326]['length']===0x1*-0xb6c+0xd*0x2f5+-0x1b03||this['setInvalid'](_0x5dd326,_0x3947bf);else{if(_0x5e3924==='rgb')_0x3947bf[_0x5dd326]instanceof Array&&_0x3947bf[_0x5dd326]['length']===-0x4e5+0x23e3+-0x1efb||this['setInvalid'](_0x5dd326,_0x3947bf);else{if(_0x5e3924==='texture')_0x461400?typeof _0x3947bf[_0x5dd326]=='string'||_0x3947bf[_0x5dd326]===null||_0x3947bf[_0x5dd326]instanceof _e||this['setInvalid'](_0x5dd326,_0x3947bf):typeof _0x3947bf[_0x5dd326]=='number'||_0x3947bf[_0x5dd326]===null||_0x3947bf[_0x5dd326]instanceof _e||this['setInvalid'](_0x5dd326,_0x3947bf);else{if(_0x5e3924==='boundingbo'+'x')_0x3947bf[_0x5dd326]['center']&&_0x3947bf[_0x5dd326]['center']instanceof Array&&_0x3947bf[_0x5dd326]['center']['length']===-0x5a6+-0x3*0x503+0x14b2||this['setInvalid'](_0x5dd326,_0x3947bf),_0x3947bf[_0x5dd326]['halfExtent'+'s']&&_0x3947bf[_0x5dd326]['halfExtent'+'s']instanceof Array&&_0x3947bf[_0x5dd326]['halfExtent'+'s']['length']===-0x1*0xa09+-0x1*0x13b5+-0x3*-0x9eb||this['setInvalid'](_0x5dd326,_0x3947bf);else{if(_0x5e3924==='cubemap')typeof _0x3947bf[_0x5dd326]=='number'||_0x3947bf[_0x5dd326]===null||_0x3947bf[_0x5dd326]===void(-0xe59+0x1085*0x1+0x4*-0x8b)||_0x3947bf[_0x5dd326]instanceof _e&&_0x3947bf[_0x5dd326]['cubemap']||this['setInvalid'](_0x5dd326,_0x3947bf);else{if(_0x5e3924==='chunks'){const _0x34980c=Object['keys'](_0x3947bf[_0x5dd326]);for(let _0x33373d=-0x13c2+-0x4a9*-0x8+-0x1186;_0x33373d<_0x34980c['length'];_0x33373d++)typeof _0x3947bf[_0x5dd326][_0x34980c[_0x33373d]]!='string'&&this['setInvalid'](_0x34980c[_0x33373d],_0x3947bf[_0x5dd326]);}else console['error']('Unknown\x20ma'+'terial\x20typ'+'e:\x20'+_0x5e3924);}}}}}}}}}}return _0x3947bf['validated']=!(-0x1c78+-0x122b*-0x1+-0x9*-0x125),this['valid'];}['_createEnu'+'mValidator'](_0x136b5c){return function(_0x3c5b94){return _0x136b5c['indexOf'](_0x3c5b94)>=-0xd7*-0x7+-0x1*-0x1249+-0x182a;};}}class FN{constructor(){this['_validator']=null;}['parse'](_0x235095){const _0x5981db=this['migrate'](_0x235095),_0x425f6e=this['_validate'](_0x5981db),_0x250aaa=new Ut();return this['initialize'](_0x250aaa,_0x425f6e),_0x250aaa;}['initialize'](_0x14aba2,_0x51c26a){if(_0x51c26a['validated']||(_0x51c26a=this['_validate'](_0x51c26a)),_0x51c26a['chunks']&&_0x51c26a['chunks']&&Object['keys'](_0x51c26a['chunks'])['length']>0x1*-0x15f1+0xf6c+0x685*0x1){const _0x4e3932=_0x14aba2['shaderChun'+'ks']['glsl'];Object['entries'](_0x51c26a['chunks'])['forEach'](([_0x55e3cd,_0xb859fc])=>_0x4e3932['set'](_0x55e3cd,_0xb859fc));}for(const _0x46374d in _0x51c26a){const _0x44c2f8=Un[_0x46374d],_0x52e6ac=_0x51c26a[_0x46374d];if(_0x44c2f8==='vec2')_0x14aba2[_0x46374d]=new J(_0x52e6ac[0x1657+0x6d4+0x13*-0x189],_0x52e6ac[-0x206*0xa+-0x2280+0x36bd]);else{if(_0x44c2f8==='rgb')_0x14aba2[_0x46374d]=new ie(_0x52e6ac[-0x22*0xca+-0x1011+0x2ae5],_0x52e6ac[-0x1a07+0x8b7+0x1151],_0x52e6ac[0x1857+0x186+-0x19db*0x1]);else{if(_0x44c2f8==='texture')_0x52e6ac instanceof _e?_0x14aba2[_0x46374d]=_0x52e6ac:_0x14aba2[_0x46374d]instanceof _e&&typeof _0x52e6ac=='number'&&_0x52e6ac>-0x2364+-0x466*0x5+-0x82*-0x71||(_0x14aba2[_0x46374d]=null);else{if(_0x44c2f8==='cubemap')_0x52e6ac instanceof _e?_0x14aba2[_0x46374d]=_0x52e6ac:_0x14aba2[_0x46374d]instanceof _e&&typeof _0x52e6ac=='number'&&_0x52e6ac>-0x1e0+0x1aac+-0x8a*0x2e||(_0x14aba2[_0x46374d]=null),_0x46374d==='cubeMap'&&!_0x52e6ac&&(_0x14aba2['prefiltere'+'dCubemaps']=null);else{if(_0x44c2f8==='boundingbo'+'x'){const _0x503089=new D(_0x52e6ac['center'][-0x1d15+-0x2f*0x92+0x3*0x12a1],_0x52e6ac['center'][-0x4a9*-0x5+-0x3*0x8df+0x351],_0x52e6ac['center'][-0x6*-0x24b+-0x779*-0x2+-0x1cb2]),_0x3620f5=new D(_0x52e6ac['halfExtent'+'s'][0xb76*0x1+0x18ad*-0x1+0xd37],_0x52e6ac['halfExtent'+'s'][0x1c*-0xe8+-0x4ae*-0x6+-0x2b3*0x1],_0x52e6ac['halfExtent'+'s'][-0x2a7*0x1+0x1702+-0x1459]);_0x14aba2[_0x46374d]=new De(_0x503089,_0x3620f5);}else _0x14aba2[_0x46374d]=_0x51c26a[_0x46374d];}}}}}_0x14aba2['update']();}['migrate'](_0x397337){_0x397337['shader']&&delete _0x397337['shader'],_0x397337['mapping_fo'+'rmat']&&(_0x397337['mappingFor'+'mat']=_0x397337['mapping_fo'+'rmat'],delete _0x397337['mapping_fo'+'rmat']);let _0x27385a;const _0x1d23ba=[['bumpMapFac'+'tor','bumpiness'],['aoUvSet','aoMapUv'],['aoMapVerte'+'xColor','aoVertexCo'+'lor'],['diffuseMap'+'VertexColo'+'r','diffuseVer'+'texColor'],['emissiveMa'+'pVertexCol'+'or','emissiveVe'+'rtexColor'],['specularMa'+'pVertexCol'+'or','specularVe'+'rtexColor'],['metalnessM'+'apVertexCo'+'lor','metalnessV'+'ertexColor'],['opacityMap'+'VertexColo'+'r','opacityVer'+'texColor'],['glossMapVe'+'rtexColor','glossVerte'+'xColor'],['lightMapVe'+'rtexColor','lightVerte'+'xColor'],['specularMa'+'pTint','specularTi'+'nt'],['metalnessM'+'apTint','metalnessT'+'int'],['clearCoatG'+'lossiness','clearCoatG'+'loss']];for(_0x27385a=0x42b*-0x9+0x18a4+-0x5*-0x293;_0x27385a<_0x1d23ba['length'];_0x27385a++){const _0x521743=_0x1d23ba[_0x27385a][0x16be+0x87*0x43+-0x1*0x3a13],_0x4bda28=_0x1d23ba[_0x27385a][0xc57+0x15b5+-0x220b];_0x397337[_0x521743]!==void(-0x1a4+-0x1c6c+-0x1a*-0x128)&&(_0x397337[_0x4bda28]===void(0x5*-0x50+0x1*0x2051+0x1*-0x1ec1)&&(_0x397337[_0x4bda28]=_0x397337[_0x521743]),delete _0x397337[_0x521743]);}const _0x30851f=['fresnelFac'+'tor','shadowSamp'+'leType'];for(_0x27385a=-0x244*0x7+-0x141c+0x8*0x47f;_0x27385a<_0x30851f['length'];_0x27385a++){const _0x10a546=_0x30851f[_0x27385a];_0x397337['hasOwnProp'+'erty'](_0x10a546)&&delete _0x397337[_0x10a546];}return _0x397337;}['_validate'](_0x3edd5e){return _0x3edd5e['validated']||(this['_validator']||(this['_validator']=new ON()),this['_validator']['validate'](_0x3edd5e)),_0x3edd5e;}}const NN={'aoMap':'white','aoDetailMap':'white','diffuseMap':'gray','diffuseDetailMap':'gray','specularMap':'gray','specularityFactorMap':'white','metalnessMap':'black','glossMap':'gray','sheenMap':'black','sheenGlossMap':'gray','clearCoatMap':'black','clearCoatGlossMap':'gray','clearCoatNormalMap':'normal','refractionMap':'white','emissiveMap':'gray','normalMap':'normal','normalDetailMap':'normal','heightMap':'gray','opacityMap':'gray','sphereMap':'gray','lightMap':'white','thicknessMap':'black','iridescenceMap':'black','iridescenceThicknessMap':'black','envAtlas':'black','anisotropyMap':'black'};class kN extends Qe{constructor(_0x354ec5){super(_0x354ec5,'material'),this['_assets']=_0x354ec5['assets'],this['_device']=_0x354ec5['graphicsDe'+'vice'],this['_parser']=new FN();}['load'](_0x29f961,_0x58c85c){typeof _0x29f961=='string'&&(_0x29f961={'load':_0x29f961,'original':_0x29f961}),ot['get'](_0x29f961['load'],{'retry':this['maxRetries']>-0x1*-0xbe9+0xaa2+0x168b*-0x1,'maxRetries':this['maxRetries']},(_0x2453aa,_0x125339)=>{_0x2453aa?_0x58c85c&&_0x58c85c('Error\x20load'+'ing\x20materi'+'al:\x20'+_0x29f961['original']+'\x20['+_0x2453aa+']'):_0x58c85c&&(_0x125339['_engine']=!(-0xf5b+0x1*0x170a+-0x7af),_0x58c85c(null,_0x125339));});}['open'](_0x1d17fb,_0x5063bd){const _0xa0bc26=this['_parser']['parse'](_0x5063bd);return _0x5063bd['_engine']&&(_0xa0bc26['_data']=_0x5063bd,delete _0x5063bd['_engine']),_0xa0bc26;}['patch'](_0x33a5ea,_0x42f5a5){_0x33a5ea['resource']['_data']&&(_0x33a5ea['_data']=_0x33a5ea['resource']['_data'],delete _0x33a5ea['resource']['_data']),_0x33a5ea['data']['name']=_0x33a5ea['name'],_0x33a5ea['resource']['name']=_0x33a5ea['name'],this['_bindAndAs'+'signAssets'](_0x33a5ea,_0x42f5a5),_0x33a5ea['off']('unload',this['_onAssetUn'+'load'],this),_0x33a5ea['on']('unload',this['_onAssetUn'+'load'],this);}['_onAssetUn'+'load'](_0xf00050){delete _0xf00050['data']['parameters'],delete _0xf00050['data']['chunks'],delete _0xf00050['data']['name'];}['_assignTex'+'ture'](_0x4d6dc0,_0x32fbaf,_0x3f3f86){_0x32fbaf['resource'][_0x4d6dc0]=_0x3f3f86;}['_getPlaceh'+'olderTextu'+'re'](_0x2adf16){const _0x2f97e5=NN[_0x2adf16];return w['assert'](_0x2f97e5,'No\x20placeho'+'lder\x20textu'+'re\x20found\x20f'+'or\x20paramet'+'er:\x20'+_0x2adf16),oa(this['_device'],_0x2f97e5);}['_assignPla'+'ceholderTe'+'xture'](_0x20216e,_0x3a743f){_0x3a743f['resource'][_0x20216e]=this['_getPlaceh'+'olderTextu'+'re'](_0x20216e);}['_onTexture'+'Load'](_0x54a702,_0x328e1,_0x394ee2){this['_assignTex'+'ture'](_0x54a702,_0x328e1,_0x394ee2['resource']),_0x328e1['resource']['update']();}['_onTexture'+'Add'](_0x3c4ea3,_0x447c21,_0x2f2c6a){this['_assets']['load'](_0x2f2c6a);}['_onTexture'+'RemoveOrUn'+'load'](_0x3b9742,_0x43096d,_0x5493d5){const _0x29ff2e=_0x43096d['resource'];_0x29ff2e&&_0x43096d['resource'][_0x3b9742]===_0x5493d5['resource']&&(this['_assignPla'+'ceholderTe'+'xture'](_0x3b9742,_0x43096d),_0x29ff2e['update']());}['_assignCub'+'emap'](_0x484e46,_0x268f9e,_0x4ab2bb){if(_0x268f9e['resource'][_0x484e46]=_0x4ab2bb[-0x206a+-0x5e5*0x4+-0x6*-0x955],_0x484e46==='cubeMap'){const _0x41202c=_0x4ab2bb['slice'](0x2b0+-0xc2*0xd+0x72b*0x1);_0x41202c['every'](_0x29d472=>_0x29d472)?_0x268f9e['resource']['prefiltere'+'dCubemaps']=_0x41202c:_0x41202c[0x1*0xe53+0x1d25+-0x2b78]&&(_0x268f9e['resource']['envAtlas']=_0x41202c[-0xb*-0x12e+-0x1d8e+-0x2*-0x84a]);}}['_onCubemap'+'Load'](_0x4e222c,_0x4e126a,_0x4c427f){this['_assignCub'+'emap'](_0x4e222c,_0x4e126a,_0x4c427f['resources']),this['_parser']['initialize'](_0x4e126a['resource'],_0x4e126a['data']);}['_onCubemap'+'Add'](_0x266146,_0x3a3004,_0x5f2ccd){this['_assets']['load'](_0x5f2ccd);}['_onCubemap'+'RemoveOrUn'+'load'](_0x2ce05a,_0xa9e422,_0x4089da){const _0x25c4f4=_0xa9e422['resource'];_0xa9e422['data']['prefiltere'+'dCubeMap12'+'8']===_0x4089da['resources'][-0x3*-0x66a+0x2*-0x6d+-0x1263]&&(this['_assignCub'+'emap'](_0x2ce05a,_0xa9e422,[null,null,null,null,null,null,null]),_0x25c4f4['update']());}['_bindAndAs'+'signAssets'](_0x526e3d,_0x9ab36){const _0x4febfa=this['_parser']['migrate'](_0x526e3d['data']),_0x4dcbfd=_0x526e3d['resource'],_0x69a8cf=_0x4febfa['mappingFor'+'mat']==='path',_0xfecb74=ad;let _0x23c1df,_0x53b916,_0x574d9d;for(_0x23c1df=-0x2665+-0x1*0xe63+0x34c8;_0x23c1df<_0xfecb74['length'];_0x23c1df++){_0x53b916=_0xfecb74[_0x23c1df],_0x574d9d=_0x4dcbfd['_assetRefe'+'rences'][_0x53b916];const _0x49b522=_0x4febfa[_0x53b916],_0x102fb2=_0x4dcbfd[_0x53b916],_0x1c7208=_0x102fb2===this['_getPlaceh'+'olderTextu'+'re'](_0x53b916),_0x215648=_0x4febfa['validated'];_0x49b522&&(!_0x102fb2||!_0x215648||_0x1c7208)?(_0x574d9d||(_0x574d9d=new rl(_0x53b916,_0x526e3d,_0x9ab36,{'load':this['_onTexture'+'Load'],'add':this['_onTexture'+'Add'],'remove':this['_onTexture'+'RemoveOrUn'+'load'],'unload':this['_onTexture'+'RemoveOrUn'+'load']},this),_0x4dcbfd['_assetRefe'+'rences'][_0x53b916]=_0x574d9d),_0x69a8cf?_0x574d9d['url']=_0x526e3d['getAbsolut'+'eUrl'](_0x49b522):_0x574d9d['id']=_0x49b522,_0x574d9d['asset']&&(_0x574d9d['asset']['resource']?this['_assignTex'+'ture'](_0x53b916,_0x526e3d,_0x574d9d['asset']['resource']):this['_assignPla'+'ceholderTe'+'xture'](_0x53b916,_0x526e3d),_0x9ab36['load'](_0x574d9d['asset']))):_0x574d9d&&(_0x69a8cf?_0x574d9d['url']=null:_0x574d9d['id']=null);}const _0x5e5b41=Bp;for(_0x23c1df=0x1d37+0xc7e+-0x1*0x29b5;_0x23c1df<_0x5e5b41['length'];_0x23c1df++)_0x53b916=_0x5e5b41[_0x23c1df],_0x574d9d=_0x4dcbfd['_assetRefe'+'rences'][_0x53b916],_0x4febfa[_0x53b916]&&!_0x526e3d['data']['prefiltere'+'dCubeMap12'+'8']&&(_0x574d9d||(_0x574d9d=new rl(_0x53b916,_0x526e3d,_0x9ab36,{'load':this['_onCubemap'+'Load'],'add':this['_onCubemap'+'Add'],'remove':this['_onCubemap'+'RemoveOrUn'+'load'],'unload':this['_onCubemap'+'RemoveOrUn'+'load']},this),_0x4dcbfd['_assetRefe'+'rences'][_0x53b916]=_0x574d9d),_0x69a8cf?_0x574d9d['url']=_0x4febfa[_0x53b916]:_0x574d9d['id']=_0x4febfa[_0x53b916],_0x574d9d['asset']&&(_0x574d9d['asset']['loaded']&&this['_assignCub'+'emap'](_0x53b916,_0x526e3d,_0x574d9d['asset']['resources']),_0x9ab36['load'](_0x574d9d['asset'])));this['_parser']['initialize'](_0x4dcbfd,_0x4febfa);}}class UN{constructor(_0x5c9311){this['_device']=_0x5c9311['device'],this['_defaultMa'+'terial']=_0x5c9311['defaultMat'+'erial'],this['_assets']=_0x5c9311['assets'];}['parse'](_0x389a9e,_0x5d45d8,_0x21fed8){mh['parse']('filename.g'+'lb','',_0x389a9e,this['_device'],this['_assets'],(_0x21fed8==null?void(-0x52e*0x1+-0x55d*0x5+-0x1fff*-0x1):_0x21fed8['options'])??{},(_0x1252e1,_0x1c79b5)=>{if(_0x1252e1)_0x5d45d8(_0x1252e1);else{const _0x31eb70=mr['createMode'+'l'](_0x1c79b5,this['_defaultMa'+'terial']);_0x1c79b5['destroy'](),_0x5d45d8(null,_0x31eb70);}});}}const BN={'points':Vh,'lines':Gh,'lineloop':OS,'linestrip':FS,'triangles':qs,'trianglestrip':vr,'trianglefan':sa},zN={'int8':Hh,'uint8':ia,'int16':Wh,'uint16':_l,'int32':zS,'uint32':Vo,'float32':Ve};class VN{constructor(_0x52d686){this['_device']=_0x52d686['device'],this['_defaultMa'+'terial']=_0x52d686['defaultMat'+'erial'];}['parse'](_0x56c075,_0x33112d){const _0x1eaf14=_0x56c075['model'];if(!_0x1eaf14){_0x33112d(null,null);return;}if(_0x1eaf14['version']<=0x667+0x10*0x4d+0x5*-0x23e){_0x33112d('JsonModelP'+'arser#pars'+'e:\x20Trying\x20'+'to\x20parse\x20u'+'nsupported'+'\x20model\x20for'+'mat.');return;}const _0x1e2122=this['_parseNode'+'s'](_0x56c075),_0x4a4df3=this['_parseSkin'+'s'](_0x56c075,_0x1e2122),_0x34dadd=this['_parseVert'+'exBuffers'](_0x56c075),_0x378efe=this['_parseInde'+'xBuffers'](_0x56c075,_0x34dadd),_0x11b985=this['_parseMorp'+'hs'](_0x56c075,_0x1e2122,_0x34dadd),_0x1473bc=this['_parseMesh'+'es'](_0x56c075,_0x4a4df3['skins'],_0x11b985['morphs'],_0x34dadd,_0x378efe['buffer'],_0x378efe['data']),_0x214d30=this['_parseMesh'+'Instances'](_0x56c075,_0x1e2122,_0x1473bc,_0x4a4df3['skins'],_0x4a4df3['instances'],_0x11b985['morphs'],_0x11b985['instances']),_0x4760c3=new tr();_0x4760c3['graph']=_0x1e2122[-0x140e+-0x11*-0xbb+0x7a3],_0x4760c3['meshInstan'+'ces']=_0x214d30,_0x4760c3['skinInstan'+'ces']=_0x4a4df3['instances'],_0x4760c3['morphInsta'+'nces']=_0x11b985['instances'],_0x4760c3['getGraph']()['syncHierar'+'chy'](),_0x33112d(null,_0x4760c3);}['_parseNode'+'s'](_0x5235b1){const _0x303865=_0x5235b1['model'],_0x3fc780=[];let _0x2c195a;for(_0x2c195a=-0x22b3+0xfa*-0x20+0x41f3;_0x2c195a<_0x303865['nodes']['length'];_0x2c195a++){const _0x1ae697=_0x303865['nodes'][_0x2c195a],_0x2ab311=new Ie(_0x1ae697['name']);_0x2ab311['setLocalPo'+'sition'](_0x1ae697['position'][0x1*0x189+0x1d4f+-0x1ed8],_0x1ae697['position'][-0x13ef+0xac*-0x2f+0x3384],_0x1ae697['position'][0x236d+0x6*-0x506+-0x547]),_0x2ab311['setLocalEu'+'lerAngles'](_0x1ae697['rotation'][-0x1add+0xb*-0x379+-0x18*-0x2b6],_0x1ae697['rotation'][-0x1345+-0x250a+0x3850],_0x1ae697['rotation'][0x13*0x1c7+-0x1f*-0x24+-0xcb5*0x3]),_0x2ab311['setLocalSc'+'ale'](_0x1ae697['scale'][0x2576*0x1+-0x35d*-0x2+-0x2c30],_0x1ae697['scale'][-0xfcb+-0x2663+-0x61*-0x8f],_0x1ae697['scale'][0x3*-0x73e+-0xffe+0x1b7*0x16]),_0x2ab311['scaleCompe'+'nsation']=!!_0x1ae697['scaleCompe'+'nsation'],_0x3fc780['push'](_0x2ab311);}for(_0x2c195a=-0x2f*0x7a+0x1f2b*0x1+-0x8c4;_0x2c195a<_0x303865['parents']['length'];_0x2c195a++)_0x3fc780[_0x303865['parents'][_0x2c195a]]['addChild'](_0x3fc780[_0x2c195a]);return _0x3fc780;}['_parseSkin'+'s'](_0x249dd4,_0x19126f){const _0x2e566c=_0x249dd4['model'],_0x4cce1e=[],_0x3a989d=[];let _0x4a98b6,_0x37713c;for(_0x4a98b6=-0x11de+0x1*-0x18e9+0x2ac7;_0x4a98b6<_0x2e566c['skins']['length'];_0x4a98b6++){const _0x15ab3a=_0x2e566c['skins'][_0x4a98b6],_0x351f6c=[];for(_0x37713c=0xe07+-0x10d*0x4+-0x9d3;_0x37713c<_0x15ab3a['inverseBin'+'dMatrices']['length'];_0x37713c++){const _0x3ec7e2=_0x15ab3a['inverseBin'+'dMatrices'][_0x37713c];_0x351f6c[_0x37713c]=new te()['set'](_0x3ec7e2);}const _0x43bce8=new Ky(this['_device'],_0x351f6c,_0x15ab3a['boneNames']);_0x4cce1e['push'](_0x43bce8);const _0x56c7da=new xl(_0x43bce8),_0x332985=[];for(_0x37713c=0x11c7*0x2+-0x101f*0x1+-0x1*0x136f;_0x37713c<_0x43bce8['boneNames']['length'];_0x37713c++){const _0x4a00ec=_0x43bce8['boneNames'][_0x37713c],_0x2f91c3=_0x19126f[-0x1*0x178e+0x2*0xe2b+0x99*-0x8]['findByName'](_0x4a00ec);_0x332985['push'](_0x2f91c3);}_0x56c7da['bones']=_0x332985,_0x3a989d['push'](_0x56c7da);}return{'skins':_0x4cce1e,'instances':_0x3a989d};}['_getMorphV'+'ertexCount'](_0x2b32bc,_0x2b5b93,_0xf790d9){for(let _0x134e6f=0x3d*-0x89+-0xc6b+0x2d10;_0x134e6f<_0x2b32bc['meshes']['length'];_0x134e6f++){const _0x1d9f1f=_0x2b32bc['meshes'][_0x134e6f];if(_0x1d9f1f['morph']===_0x2b5b93)return _0xf790d9[_0x1d9f1f['vertices']]['numVertice'+'s'];}}['_parseMorp'+'hs'](_0x6251d0,_0x3f45d4,_0x171091){const _0x40484d=_0x6251d0['model'],_0x32237f=[],_0x16f194=[];let _0x1c2daf,_0x41bd20,_0x5eab22,_0x1f1456,_0x1bb1dc,_0x4e8e90;if(_0x40484d['morphs']){const _0x2da8a9=function(_0x415372,_0x40eb20,_0x48c985){const _0x4191fa=new Float32Array(_0x48c985*(0x1a45+0x90a*0x3+-0x3560));for(let _0x425fe4=0x3ee*-0x1+0x11c3*0x1+-0xdd5;_0x425fe4<_0x40eb20['length'];_0x425fe4++){const _0x5a735f=_0x40eb20[_0x425fe4]*(-0x13*-0x1c9+-0x1*-0xca9+-0x2e91);_0x4191fa[_0x5a735f]=_0x415372[_0x425fe4*(-0x606+-0x39e*0x9+0x6f*0x59)],_0x4191fa[_0x5a735f+(-0x164f*-0x1+-0x9d7+0xc77*-0x1)]=_0x415372[_0x425fe4*(0x4*0x885+-0x2c0+-0x1f51*0x1)+(-0x23b9+-0x2*-0x83e+0x133e)],_0x4191fa[_0x5a735f+(0x5*-0x179+-0x2653+0x2db2)]=_0x415372[_0x425fe4*(0x1*-0x1321+-0x35*-0x70+-0x40c)+(-0x8*-0x7+-0x665+-0x1*-0x62f)];}return _0x4191fa;};for(_0x1c2daf=-0x1fc*-0x5+0x1e78+-0x2f*0xdc;_0x1c2daf<_0x40484d['morphs']['length'];_0x1c2daf++){for(_0x1f1456=_0x40484d['morphs'][_0x1c2daf]['targets'],_0x4e8e90=[],_0x5eab22=this['_getMorphV'+'ertexCount'](_0x40484d,_0x1c2daf,_0x171091),_0x41bd20=-0x114+-0x2*0x455+0x9be;_0x41bd20<_0x1f1456['length'];_0x41bd20++){const _0x587afb=_0x1f1456[_0x41bd20]['aabb'],_0x297c24=_0x587afb['min'],_0x2a606c=_0x587afb['max'],_0x1f0a58=new De(new D((_0x2a606c[-0x17*-0x138+0x6*-0x505+0x2*0x10b]+_0x297c24[-0x272+0x449+-0x1d7])*(-0x1*-0xf9f+-0x1*-0x1ff9+-0x2f98+0.5),(_0x2a606c[-0x7*0x566+0x2335+0x296]+_0x297c24[0x11a2+-0x728+-0xa79])*(0x2441+-0x11b*0x15+-0xd0a+0.5),(_0x2a606c[0x886+0x1*0x1bad+0x1*-0x2431]+_0x297c24[0x1*0x8b3+0x48b*-0x3+-0x8*-0x9e])*(-0xaf9+-0x9b9+0xa59*0x2+0.5)),new D((_0x2a606c[0xff3+0x6c4*-0x3+0x459]-_0x297c24[0x1*0x204c+-0x1088+-0xfc4])*(0x20c9+-0x1*-0xb95+-0x1*0x2c5e+0.5),(_0x2a606c[0x1bf1+-0x1c81*0x1+0x91]-_0x297c24[-0x1111*0x1+-0x5ac+0x47*0x52])*(0x11b6*-0x2+0x17cc+0xba0+0.5),(_0x2a606c[0x18*-0x79+0xa5d+0xfd]-_0x297c24[0x3*-0xc22+-0x881*-0x1+0x1be7])*(0x1f8c+0x1*0x14a8+-0x3434+0.5))),_0x4fbd36=_0x1f1456[_0x41bd20]['indices'];let _0xa58e8a=_0x1f1456[_0x41bd20]['deltaPosit'+'ions'],_0x11a0fe=_0x1f1456[_0x41bd20]['deltaNorma'+'ls'];_0x4fbd36&&(_0xa58e8a=_0x2da8a9(_0xa58e8a,_0x4fbd36,_0x5eab22),_0x11a0fe=_0x2da8a9(_0x11a0fe,_0x4fbd36,_0x5eab22)),_0x1bb1dc=new od({'deltaPositions':_0xa58e8a,'deltaNormals':_0x11a0fe,'name':_0x1f1456[_0x41bd20]['name'],'aabb':_0x1f0a58}),_0x4e8e90['push'](_0x1bb1dc);}const _0x43908e=new Gp(_0x4e8e90,this['_device']);_0x32237f['push'](_0x43908e);const _0x1950fe=new _a(_0x43908e);_0x16f194['push'](_0x1950fe);}}return{'morphs':_0x32237f,'instances':_0x16f194};}['_parseVert'+'exBuffers'](_0x15b79d){const _0x192f0d=_0x15b79d['model'],_0x1d83d7=[],_0x53621b={'position':Pe,'normal':gs,'tangent':yi,'blendWeight':gi,'blendIndices':us,'color':Wt,'texCoord0':is,'texCoord1':va,'texCoord2':hl,'texCoord3':dl,'texCoord4':fl,'texCoord5':ul,'texCoord6':pl,'texCoord7':ml};for(let _0x2b52ec=-0x224c+0x201a+0x232;_0x2b52ec<_0x192f0d['vertices']['length'];_0x2b52ec++){const _0x1c29f1=_0x192f0d['vertices'][_0x2b52ec],_0xb7f71e=[];for(const _0x24dc57 in _0x1c29f1){const _0x3125e2=_0x1c29f1[_0x24dc57];_0xb7f71e['push']({'semantic':_0x53621b[_0x24dc57],'components':_0x3125e2['components'],'type':zN[_0x3125e2['type']],'normalize':_0x53621b[_0x24dc57]===Wt});}const _0x45f3cb=new kt(this['_device'],_0xb7f71e),_0x279bad=_0x1c29f1['position']['data']['length']/_0x1c29f1['position']['components'],_0x2bacbf=new Ds(this['_device'],_0x45f3cb,_0x279bad),_0x4eab1b=new Ao(_0x2bacbf);for(let _0x17a9a6=0xf80+-0x1d5e+0x5*0x2c6;_0x17a9a6<_0x279bad;_0x17a9a6++){for(const _0x425b7d in _0x1c29f1){const _0x30502c=_0x1c29f1[_0x425b7d];switch(_0x30502c['components']){case-0x1*0xad7+-0xa3a+0x6*0x383:_0x4eab1b['element'][_0x53621b[_0x425b7d]]['set'](_0x30502c['data'][_0x17a9a6]);break;case-0x124e+0x9*-0xa6+0x1826:_0x4eab1b['element'][_0x53621b[_0x425b7d]]['set'](_0x30502c['data'][_0x17a9a6*(0x2316*0x1+-0x2*0x1279+0x1de)],0x1*0x23a3+-0x3f4+-0x2*0xfd7-_0x30502c['data'][_0x17a9a6*(-0xc81+-0x1c1a+0x289d)+(-0x3c8+-0x214+0x5dd)]);break;case-0x1534+0xc79+0x8be:_0x4eab1b['element'][_0x53621b[_0x425b7d]]['set'](_0x30502c['data'][_0x17a9a6*(-0x2*0x801+0x1ee2+-0x1*0xedd)],_0x30502c['data'][_0x17a9a6*(-0x128b+-0x1be0+0x2e6e)+(0x2*-0x120d+0x1c*0x29+-0x653*-0x5)],_0x30502c['data'][_0x17a9a6*(-0x11e*-0x15+-0x37b*-0x9+-0x72*0x7b)+(0x92*0xd+-0x3*0x265+-0x39)]);break;case-0x26d4+0x18c+0x254c:_0x4eab1b['element'][_0x53621b[_0x425b7d]]['set'](_0x30502c['data'][_0x17a9a6*(-0x1ef7+0x502+0x19f9)],_0x30502c['data'][_0x17a9a6*(-0x1e24+-0x1f6*-0xc+0x1*0x6a0)+(-0x1f4c+-0x42*0x3b+0x2e83)],_0x30502c['data'][_0x17a9a6*(0xd1c*-0x1+0x1e7*0x9+-0x3ff)+(-0xe4f+0x1ee7+0xc1*-0x16)],_0x30502c['data'][_0x17a9a6*(0x1025+0x7*-0x22+-0xf33)+(-0x543+-0x139a+0x18e0)]);break;}}_0x4eab1b['next']();}_0x4eab1b['end'](),_0x1d83d7['push'](_0x2bacbf);}return _0x1d83d7;}['_parseInde'+'xBuffers'](_0x15ef5d,_0x27f875){const _0x15f463=_0x15ef5d['model'];let _0x2a06ca=null,_0x2f0492=null,_0x53315b,_0x2f8047=-0x5e3*-0x3+0x18cb+-0x2a74;for(_0x53315b=0x22d9+-0x5*-0x445+-0x3832*0x1;_0x53315b<_0x15f463['meshes']['length'];_0x53315b++){const _0x42f555=_0x15f463['meshes'][_0x53315b];_0x42f555['indices']!==void(-0x1f49+0xd*-0x10c+0x2ce5*0x1)&&(_0x2f8047+=_0x42f555['indices']['length']);}let _0x5177c2=-0x1ad5*-0x1+0x9c7+-0x249c;for(_0x53315b=-0x222a+-0x1854+0x3a7e;_0x53315b<_0x27f875['length'];_0x53315b++)_0x5177c2=Math['max'](_0x5177c2,_0x27f875[_0x53315b]['numVertice'+'s']);return _0x2f8047>0x25e+0x2*-0xe47+0x1a30&&(_0x5177c2>-0x10*0x199d+-0x449*0x67+0x4532e?(_0x2a06ca=new xr(this['_device'],yr,_0x2f8047),_0x2f0492=new Uint32Array(_0x2a06ca['lock']())):(_0x2a06ca=new xr(this['_device'],ji,_0x2f8047),_0x2f0492=new Uint16Array(_0x2a06ca['lock']()))),{'buffer':_0x2a06ca,'data':_0x2f0492};}['_parseMesh'+'es'](_0x416746,_0x33efaf,_0x31adc7,_0xd0eec1,_0x5ccf1d,_0xb99cd3){const _0x5b9c65=_0x416746['model'],_0xa37a52=[];let _0x127674=-0x210c+0x1*0x305+-0x1*-0x1e07;for(let _0x4ed23a=0xd*0x2cb+0xf38+-0x3387;_0x4ed23a<_0x5b9c65['meshes']['length'];_0x4ed23a++){const _0x4d774f=_0x5b9c65['meshes'][_0x4ed23a],_0xa2b92c=_0x4d774f['aabb'],_0x48f1a9=_0xa2b92c['min'],_0xe665bc=_0xa2b92c['max'],_0x291089=new De(new D((_0xe665bc[0xef5+-0x297+-0xc5e*0x1]+_0x48f1a9[0x1e8+0xf20+-0x884*0x2])*(0x525+-0x1*-0x7e9+0x6*-0x22d+0.5),(_0xe665bc[-0x2393*-0x1+-0x28d*-0x9+-0x3a87*0x1]+_0x48f1a9[0xd87*0x2+0x25bc+-0x40c9])*(-0x47f*0x1+0x157+-0x2*-0x194+0.5),(_0xe665bc[0x2300+0x1076+-0x3374]+_0x48f1a9[-0xb3c+-0x2142+0x2c80])*(0x1c9f*0x1+-0x1255+-0x3*0x36e+0.5)),new D((_0xe665bc[-0xa6*-0x33+-0xb*0x347+0x2fb*0x1]-_0x48f1a9[-0x1*0xee6+0x10ff*0x2+-0x1318])*(-0xdbe+0x1135+0x377*-0x1+0.5),(_0xe665bc[0x1*0x1747+-0x20b3*0x1+0x96d]-_0x48f1a9[0x987+-0x106+-0x880])*(-0x8b+0x6e*-0x32+0x1607+0.5),(_0xe665bc[0x124c+-0x178*-0x16+0x6*-0x86f]-_0x48f1a9[0xe93*0x1+-0x3*0xcbf+0x17ac])*(-0x8dd*-0x3+-0x5e*0x67+0xb3b+0.5))),_0x4a81b8=_0x4d774f['indices']!==void(-0x1*-0x251d+-0x248b+-0x92),_0x47bb04=new Ge(this['_device']);_0x47bb04['vertexBuff'+'er']=_0xd0eec1[_0x4d774f['vertices']],_0x47bb04['indexBuffe'+'r'][-0x1277+0x1e0*-0x2+0x79*0x2f]=_0x4a81b8?_0x5ccf1d:null,_0x47bb04['primitive'][0x1b50+0x80*-0x5+-0x18d0]['type']=BN[_0x4d774f['type']],_0x47bb04['primitive'][-0x2693+0xec*0x5+0x1*0x21f7]['base']=_0x4a81b8?_0x4d774f['base']+_0x127674:_0x4d774f['base'],_0x47bb04['primitive'][-0x3*-0x829+0x3f4+0x1*-0x1c6f]['count']=_0x4d774f['count'],_0x47bb04['primitive'][-0x1*0x9f3+0x2*-0xd18+0x2423]['indexed']=_0x4a81b8,_0x47bb04['skin']=_0x4d774f['skin']!==void(-0x815*0x4+0x1fa7+0xad*0x1)?_0x33efaf[_0x4d774f['skin']]:null,_0x47bb04['morph']=_0x4d774f['morph']!==void(0x1735+-0x1*0x259d+-0xe68*-0x1)?_0x31adc7[_0x4d774f['morph']]:null,_0x47bb04['aabb']=_0x291089,_0x4a81b8&&(_0xb99cd3['set'](_0x4d774f['indices'],_0x127674),_0x127674+=_0x4d774f['indices']['length']),_0xa37a52['push'](_0x47bb04);}return _0x5ccf1d!==null&&_0x5ccf1d['unlock'](),_0xa37a52;}['_parseMesh'+'Instances'](_0x3c6057,_0x11e8f9,_0x292646,_0x5e3055,_0xbb5ce,_0x3be427,_0x39a365){const _0x26590f=_0x3c6057['model'],_0x238f23=[];let _0xa162bd;for(_0xa162bd=-0xdfa*0x1+0x5*-0x3be+-0x82c*-0x4;_0xa162bd<_0x26590f['meshInstan'+'ces']['length'];_0xa162bd++){const _0xfbb970=_0x26590f['meshInstan'+'ces'][_0xa162bd],_0x557a79=_0x11e8f9[_0xfbb970['node']],_0xe996ec=_0x292646[_0xfbb970['mesh']],_0x5f0da5=new He(_0xe996ec,this['_defaultMa'+'terial'],_0x557a79);if(_0xe996ec['skin']){const _0x24f538=_0x5e3055['indexOf'](_0xe996ec['skin']);if(_0x24f538===-(0x1cd8+0x1338+-0x300f))throw new Error('Mesh\x27s\x20ski'+'n\x20does\x20not'+'\x20appear\x20in'+'\x20skin\x20arra'+'y.');_0x5f0da5['skinInstan'+'ce']=_0xbb5ce[_0x24f538];}if(_0xe996ec['morph']){const _0x9decd6=_0x3be427['indexOf'](_0xe996ec['morph']);if(_0x9decd6===-(0x5e*-0x67+0x3*-0x3be+0x1b1*0x1d))throw new Error('Mesh\x27s\x20mor'+'ph\x20does\x20no'+'t\x20appear\x20i'+'n\x20morph\x20ar'+'ray.');_0x5f0da5['morphInsta'+'nce']=_0x39a365[_0x9decd6];}_0x238f23['push'](_0x5f0da5);}return _0x238f23;}}class GN extends Qe{constructor(_0x2927d0){super(_0x2927d0,'model'),this['_parsers']=[],this['device']=_0x2927d0['graphicsDe'+'vice'],this['assets']=_0x2927d0['assets'],this['defaultMat'+'erial']=$n(this['device']),this['addParser'](new VN(this),(_0x3d4e08,_0x15841b)=>xe['getExtensi'+'on'](_0x3d4e08)==='.json'),this['addParser'](new UN(this),(_0x5ca02c,_0x4653b2)=>xe['getExtensi'+'on'](_0x5ca02c)==='.glb');}['load'](_0x39c4b2,_0x433055,_0x1805f5){typeof _0x39c4b2=='string'&&(_0x39c4b2={'load':_0x39c4b2,'original':_0x39c4b2});const _0x24a875={'retry':this['maxRetries']>-0x2b*0x6d+-0x2*-0xda6+0xd*-0xb1,'maxRetries':this['maxRetries']};(_0x39c4b2['load']['startsWith']('blob:')||_0x39c4b2['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x39c4b2['original'])['toLowerCas'+'e']()==='.glb'?_0x24a875['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x24a875['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x39c4b2['load'],_0x24a875,(_0x4ef30e,_0x2d1c8b)=>{if(_0x433055){if(_0x4ef30e)_0x433055('Error\x20load'+'ing\x20model:'+'\x20'+_0x39c4b2['original']+'\x20['+_0x4ef30e+']');else{for(let _0x575ca4=0x1b2*0x1+0x266a+-0x4*0xa07;_0x575ca4<this['_parsers']['length'];_0x575ca4++){const _0x5489d1=this['_parsers'][_0x575ca4];if(_0x5489d1['decider'](_0x39c4b2['original'],_0x2d1c8b)){_0x5489d1['parser']['parse'](_0x2d1c8b,(_0x47fe93,_0x6d4034)=>{_0x47fe93?_0x433055(_0x47fe93):_0x433055(null,_0x6d4034);},_0x1805f5);return;}}_0x433055('No\x20parsers'+'\x20found');}}});}['open'](_0x412b4e,_0x13327c){return _0x13327c;}['patch'](_0x4e98af,_0x376301){if(!_0x4e98af['resource'])return;const _0x439c66=_0x4e98af['data'],_0x487354=this;_0x4e98af['resource']['meshInstan'+'ces']['forEach']((_0x3d03dc,_0x1984af)=>{if(_0x439c66['mapping']){const _0x2262f3=function(_0x28fe2a){_0x28fe2a['resource']?_0x3d03dc['material']=_0x28fe2a['resource']:(_0x28fe2a['once']('load',_0x2262f3),_0x376301['load'](_0x28fe2a)),_0x28fe2a['once']('remove',_0x1918a9=>{_0x3d03dc['material']===_0x1918a9['resource']&&(_0x3d03dc['material']=_0x487354['defaultMat'+'erial']);});};if(!_0x439c66['mapping'][_0x1984af]){_0x3d03dc['material']=_0x487354['defaultMat'+'erial'];return;}const _0x4369c8=_0x439c66['mapping'][_0x1984af]['material'],_0x3dc7c8=_0x439c66['mapping'][_0x1984af]['path'];let _0x47f836;if(_0x4369c8!==void(-0x1f29+0x470+0x1*0x1ab9))_0x4369c8?(_0x47f836=_0x376301['get'](_0x4369c8),_0x47f836?_0x2262f3(_0x47f836):_0x376301['once']('add:'+_0x4369c8,_0x2262f3)):_0x3d03dc['material']=_0x487354['defaultMat'+'erial'];else{if(_0x3dc7c8){const _0x8ab38f=_0x4e98af['getAbsolut'+'eUrl'](_0x439c66['mapping'][_0x1984af]['path']);_0x47f836=_0x376301['getByUrl'](_0x8ab38f),_0x47f836?_0x2262f3(_0x47f836):_0x376301['once']('add:url:'+_0x8ab38f,_0x2262f3);}}}});}['addParser'](_0x1def2e,_0x223303){this['_parsers']['push']({'parser':_0x1def2e,'decider':_0x223303});}}class HN extends Qe{constructor(_0x3c2c21){super(_0x3c2c21,'scene');}['load'](_0x3f5401,_0x24d98f){Gv['load'](_0x3f5401,this['maxRetries'],_0x24d98f);}['open'](_0x4bf5ad,_0x3e7a72){this['_app']['systems']['script']['preloading']=!(-0x7fc+0x3*0x65b+-0x1*0xb15);const _0x5e4e87=new Qp(this['_app'],!(0x200b+-0xe71*0x1+-0x55*0x35))['parse'](_0x3e7a72),_0x3b1424=this['_app']['scene'];return _0x3b1424['root']=_0x5e4e87,this['_app']['applyScene'+'Settings'](_0x3e7a72['settings']),this['_app']['systems']['script']['preloading']=!(0x93*0x1b+-0x84e+-0x732),_0x3b1424;}}const bh=class bh{static['push'](_0x3fad87){bh['_types']['push'](_0x3fad87);}};h(bh,'_types',[]);let ea=bh;const WN=new Set(['system','entity','create','destroy','swap','move','data','scripts','_scripts','_scriptsIn'+'dex','_scriptsDa'+'ta','enabled','_oldState','onEnable','onDisable','onPostStat'+'eChange','_onSetEnab'+'led','_checkStat'+'e','_onBeforeR'+'emove','_onInitial'+'izeAttribu'+'tes','_onInitial'+'ize','_onPostIni'+'tialize','_onUpdate','_onPostUpd'+'ate','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']),$N={};al['reservedNa'+'mes']['forEach']((_0x377af9,_0x382616,_0x5c0620)=>{$N[_0x377af9]=0x15eb+0x1*0x251+-0x183b;});function XN(_0x4432b5,_0x4d9066,_0x13ed6d){if(typeof _0x4432b5!='function')throw new Error('script\x20cla'+'ss:\x20\x27'+_0x4432b5+('\x27\x20must\x20be\x20'+'a\x20construc'+'tor\x20functi'+'on\x20(i.e.\x20c'+'lass).'));if(!(_0x4432b5['prototype']instanceof ts))throw new Error('script\x20cla'+'ss:\x20\x27'+Lo['__getScrip'+'tName'](_0x4432b5)+('\x27\x20does\x20not'+'\x20extend\x20pc'+'.Script.'));if(_0x4d9066=_0x4d9066||_0x4432b5['__name']||Lo['__getScrip'+'tName'](_0x4432b5),WN['has'](_0x4d9066))throw new Error('script\x20nam'+'e:\x20\x27'+_0x4d9066+('\x27\x20is\x20reser'+'ved,\x20pleas'+'e\x20change\x20s'+'cript\x20name'));_0x4432b5['__name']=_0x4d9066,Ks['getApplica'+'tion']()['scripts']['add'](_0x4432b5),ea['push'](_0x4432b5);}const qN=_0x2d1a44=>_0x2d1a44[-0x9*-0x32a+-0x23*-0x73+-0x2c33]['toLowerCas'+'e']()+_0x2d1a44['substring'](0x110d+0x4e*0x13+0x4f*-0x4a);class jN extends Qe{constructor(_0x4e4b52){super(_0x4e4b52,'script'),this['_scripts']={},this['_cache']={};}['clearCache'](){for(const _0x4abf9d in this['_cache']){const _0x1d67af=this['_cache'][_0x4abf9d],_0xf33a38=_0x1d67af['parentNode'];_0xf33a38&&_0xf33a38['removeChil'+'d'](_0x1d67af);}this['_cache']={};}['load'](_0x5c7d4c,_0x4ba08b){typeof _0x5c7d4c=='string'&&(_0x5c7d4c={'load':_0x5c7d4c,'original':_0x5c7d4c});const _0x17359d=this;this['_app'];const _0xb19a67=(_0x5c7d4c['load'],(_0x52fe23,_0x458004,_0x19140a)=>{if(_0x52fe23)_0x4ba08b(_0x52fe23);else{const _0x1b0432={};for(let _0x1a90dd=0x8e1+-0x3*-0x47f+-0xb2f*0x2;_0x1a90dd<ea['_types']['length'];_0x1a90dd++)_0x1b0432[ea['_types'][_0x1a90dd]['name']]=ea['_types'][_0x1a90dd];ea['_types']['length']=-0x8f9+-0xda1+0xb4d*0x2,_0x4ba08b(null,_0x1b0432,_0x19140a);const _0x3f0204=_0x458004['split']('&hash=')[-0x1495+0xecc*0x1+0x5c9];delete _0x17359d['_loader']['_cache'][vn['makeKey'](_0x3f0204,'script')];}}),[_0x4de4b5]=_0x5c7d4c['load']['split']('?');_0x4de4b5['endsWith']('.mjs')?this['_loadModul'+'e'](_0x4de4b5,_0xb19a67):this['_loadScrip'+'t'](_0x5c7d4c['load'],_0xb19a67);}['open'](_0x435f52,_0xf8084b){return _0xf8084b;}['patch'](_0x1eb6fc,_0x39d06a){}['_loadScrip'+'t'](_0x523626,_0x387652){const _0xf25dd1=document['head'],_0x1c6f98=document['createElem'+'ent']('script');this['_cache'][_0x523626]=_0x1c6f98,_0x1c6f98['async']=!(-0x252e+0xcf4+0x183b),_0x1c6f98['addEventLi'+'stener']('error',_0x384c13=>{_0x387652('Script:\x20'+_0x384c13['target']['src']+('\x20failed\x20to'+'\x20load'));},!(0x1f48+-0x1*0x16d+-0x1dda*0x1));let _0x377a80=!(-0x1370+-0x1cd7+0x3048);_0x1c6f98['onload']=_0x1c6f98['onreadysta'+'techange']=function(){!_0x377a80&&(!this['readyState']||this['readyState']==='loaded'||this['readyState']==='complete')&&(_0x377a80=!(0x25b5+-0xad*-0x1f+-0x755*0x8),_0x387652(null,_0x523626,_0x1c6f98));},_0x1c6f98['src']=_0x523626,_0xf25dd1['appendChil'+'d'](_0x1c6f98);}['_loadModul'+'e'](_0x2af7ed,_0x51f290){const _0x28d7fd=Me['browser']&&window['location']['origin']!=='null'?window['location']['origin']+window['location']['pathname']:import.meta['url'],_0x350cd9=new URL(_0x2af7ed,_0x28d7fd);import(_0x350cd9['toString']())['then'](_0x58b6cc=>{var _0x2fa0fd,_0x1050ba;const _0x5d09cc=_0x350cd9['pathname']['split']('/')['pop'](),_0x4d6b23=(_0x1050ba=(_0x2fa0fd=this['_app']['assets']['find'](_0x5d09cc,'script'))==null?void(0x15*0xb+-0x716+0x62f):_0x2fa0fd['data'])==null?void(-0x45*0x3+-0x16*-0x1a5+-0x235f):_0x1050ba['scripts'];for(const _0x469a74 in _0x58b6cc){const _0x4c25ca=_0x58b6cc[_0x469a74];if(_0x4c25ca['prototype']instanceof ts){const _0xf4cdf8=qN(_0x4c25ca['name']);_0x4c25ca['scriptName']||w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x4c25ca['name']+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x4c25ca['name']+('.scriptNam'+'e\x20=\x20\x22')+_0xf4cdf8+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.'));const _0x95fcbb=_0x4c25ca['scriptName']??_0xf4cdf8;XN(_0x4c25ca,_0x95fcbb),_0x4d6b23&&this['_app']['scripts']['addSchema'](_0x95fcbb,_0x4d6b23[_0x95fcbb]);}}_0x51f290(null,_0x2af7ed,null);})['catch'](_0x59a108=>{_0x51f290(_0x59a108);});}}class YN extends Qe{constructor(_0x499836){super(_0x499836,'shader'),h(this,'decoder',null);}['load'](_0x1f413a,_0xeb8068){typeof _0x1f413a=='string'&&(_0x1f413a={'load':_0x1f413a,'original':_0x1f413a}),ot['get'](_0x1f413a['load'],{'retry':this['maxRetries']>-0x114*0x18+0x1a2c+0x26*-0x2,'maxRetries':this['maxRetries']},(_0x3dec04,_0x493e62)=>{_0x3dec04?_0xeb8068('Error\x20load'+'ing\x20shader'+'\x20resource:'+'\x20'+_0x1f413a['original']+'\x20['+_0x3dec04+']'):_0xeb8068(null,_0x493e62);});}['openBinary'](_0x5a94ac){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x5a94ac);}}function nf(_0x5d0ad8){const _0x59cef7=this;_0x59cef7['resource']&&(_0x59cef7['resource']['atlas']=_0x5d0ad8['resource']);}function of(_0x3e6e50){this['registry']['load'](_0x3e6e50);}class KN extends Qe{constructor(_0x2ff064){super(_0x2ff064,'sprite'),this['_assets']=_0x2ff064['assets'],this['_device']=_0x2ff064['graphicsDe'+'vice'];}['load'](_0x484a89,_0x2eb120){typeof _0x484a89=='string'&&(_0x484a89={'load':_0x484a89,'original':_0x484a89}),xe['getExtensi'+'on'](_0x484a89['original'])==='.json'&&ot['get'](_0x484a89['load'],{'retry':this['maxRetries']>0x2647+0x2659+0x4*-0x1328,'maxRetries':this['maxRetries']},(_0x24dd71,_0x10ff77)=>{_0x24dd71?_0x2eb120(_0x24dd71):_0x2eb120(null,_0x10ff77);});}['open'](_0x34aac8,_0x34fbc8){const _0x2794db=new iA(this['_device']);return _0x34aac8&&(_0x2794db['__data']=_0x34fbc8),_0x2794db;}['patch'](_0x32ade0,_0x2bae91){const _0x2af2cd=_0x32ade0['resource'];if(_0x2af2cd['__data']&&(_0x32ade0['data']['pixelsPerU'+'nit']=_0x2af2cd['__data']['pixelsPerU'+'nit'],_0x32ade0['data']['renderMode']=_0x2af2cd['__data']['renderMode'],_0x32ade0['data']['frameKeys']=_0x2af2cd['__data']['frameKeys'],_0x2af2cd['__data']['textureAtl'+'asAsset'])){const _0xd717b8=_0x2bae91['getByUrl'](_0x2af2cd['__data']['textureAtl'+'asAsset']);_0xd717b8?_0x32ade0['data']['textureAtl'+'asAsset']=_0xd717b8['id']:console['warn']('Could\x20not\x20'+'find\x20textu'+'reatlas\x20wi'+'th\x20url:\x20'+_0x2af2cd['__data']['textureAtl'+'asAsset']);}_0x2af2cd['startUpdat'+'e'](),_0x2af2cd['renderMode']=_0x32ade0['data']['renderMode'],_0x2af2cd['pixelsPerU'+'nit']=_0x32ade0['data']['pixelsPerU'+'nit'],_0x2af2cd['frameKeys']=_0x32ade0['data']['frameKeys'],this['_updateAtl'+'as'](_0x32ade0),_0x2af2cd['endUpdate'](),_0x32ade0['off']('change',this['_onAssetCh'+'ange'],this),_0x32ade0['on']('change',this['_onAssetCh'+'ange'],this);}['_updateAtl'+'as'](_0x1a08f5){const _0x448159=_0x1a08f5['resource'];if(!_0x1a08f5['data']['textureAtl'+'asAsset']){_0x448159['atlas']=null;return;}this['_assets']['off']('load:'+_0x1a08f5['data']['textureAtl'+'asAsset'],nf,_0x1a08f5),this['_assets']['on']('load:'+_0x1a08f5['data']['textureAtl'+'asAsset'],nf,_0x1a08f5);const _0x3691cf=this['_assets']['get'](_0x1a08f5['data']['textureAtl'+'asAsset']);_0x3691cf&&_0x3691cf['resource']?_0x448159['atlas']=_0x3691cf['resource']:_0x3691cf?this['_assets']['load'](_0x3691cf):(this['_assets']['off']('add:'+_0x1a08f5['data']['textureAtl'+'asAsset'],of,_0x1a08f5),this['_assets']['on']('add:'+_0x1a08f5['data']['textureAtl'+'asAsset'],of,_0x1a08f5));}['_onAssetCh'+'ange'](_0x2b0e2c,_0x38c14b,_0x252ec9,_0x4b1b60){_0x38c14b==='data'&&_0x252ec9&&_0x252ec9['textureAtl'+'asAsset']&&_0x4b1b60&&_0x252ec9['textureAtl'+'asAsset']!==_0x4b1b60['textureAtl'+'asAsset']&&(this['_assets']['off']('load:'+_0x4b1b60['textureAtl'+'asAsset'],nf,_0x2b0e2c),this['_assets']['off']('add:'+_0x4b1b60['textureAtl'+'asAsset'],of,_0x2b0e2c));}}class $g{constructor(_0x36ffb1,_0xa9675f){h(this,'_app'),h(this,'_data'),h(this,'_templateR'+'oot',null),(this['_app']=_0x36ffb1,this['_data']=_0xa9675f);}['instantiat'+'e'](){return this['_templateR'+'oot']||this['_parseTemp'+'late'](),this['_templateR'+'oot']['clone']();}['_parseTemp'+'late'](){const _0x50a2d0=new Qp(this['_app'],!(0x1*-0x182d+-0x14dc+0x2d09));this['_templateR'+'oot']=_0x50a2d0['parse'](this['_data']);}}class ZN extends Qe{constructor(_0x2db4f2){super(_0x2db4f2,'template'),h(this,'decoder',null);}['load'](_0xf8c4fd,_0x509cc3){typeof _0xf8c4fd=='string'&&(_0xf8c4fd={'load':_0xf8c4fd,'original':_0xf8c4fd});const _0x158304={'retry':this['maxRetries']>-0x246a+0x1708+0xd62,'maxRetries':this['maxRetries']};ot['get'](_0xf8c4fd['load'],_0x158304,(_0x38ec3a,_0x597507)=>{_0x38ec3a?_0x509cc3('Error\x20requ'+'esting\x20tem'+'plate:\x20'+_0xf8c4fd['original']):_0x509cc3(_0x38ec3a,_0x597507);});}['open'](_0xa9d798,_0x32cef0){return new $g(this['_app'],_0x32cef0);}['openBinary'](_0x716b26){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),new $g(this['_app'],JSON['parse'](this['decoder']['decode'](_0x716b26)));}}class QN extends Qe{constructor(_0x4a4eb8){super(_0x4a4eb8,'text'),h(this,'decoder',null);}['load'](_0x513926,_0x4a352f){typeof _0x513926=='string'&&(_0x513926={'load':_0x513926,'original':_0x513926}),ot['get'](_0x513926['load'],{'retry':this['maxRetries']>-0x15bb+0x2011+-0x31*0x36,'maxRetries':this['maxRetries']},(_0x5d93d7,_0xf1644b)=>{_0x5d93d7?_0x4a352f('Error\x20load'+'ing\x20text\x20r'+'esource:\x20'+_0x513926['original']+'\x20['+_0x5d93d7+']'):_0x4a352f(null,_0xf1644b);});}['openBinary'](_0x992f84){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x992f84);}}const gc={'repeat':yt,'clamp':ue,'mirror':Du},Sc={'nearest':Te,'linear':vt,'nearest_mip_nearest':Ph,'linear_mip_nearest':Dh,'nearest_mip_linear':Mh,'linear_mip_linear':ha},JN=/^data\.frames\.(\d+)$/;class ek extends Qe{constructor(_0x582c20){super(_0x582c20,'textureatl'+'as'),this['_loader']=_0x582c20['loader'];}['load'](_0x9f6e2d,_0x12e8d3){typeof _0x9f6e2d=='string'&&(_0x9f6e2d={'load':_0x9f6e2d,'original':_0x9f6e2d});const _0x44d180=this,_0x1341f0=this['_loader']['getHandler']('texture');xe['getExtensi'+'on'](_0x9f6e2d['original'])==='.json'?ot['get'](_0x9f6e2d['load'],{'retry':this['maxRetries']>0x1e1*-0x7+-0x1655+0x237c,'maxRetries':this['maxRetries']},(_0x1da986,_0x7a6345)=>{if(_0x1da986)_0x12e8d3(_0x1da986);else{const _0x31aae5=_0x9f6e2d['original']['replace']('.json','.png');_0x44d180['_loader']['load'](_0x31aae5,'texture',(_0x95fac9,_0xd5d5e)=>{_0x95fac9?_0x12e8d3(_0x95fac9):_0x12e8d3(null,{'data':_0x7a6345,'texture':_0xd5d5e});});}}):_0x1341f0['load'](_0x9f6e2d,_0x12e8d3);}['open'](_0x44ae17,_0x43b7d6,_0x258114){const _0x9b1888=new rA();if(_0x43b7d6['texture']&&_0x43b7d6['data'])_0x9b1888['texture']=_0x43b7d6['texture'],_0x9b1888['__data']=_0x43b7d6['data'];else{const _0x3753bc=this['_loader']['getHandler']('texture')['open'](_0x44ae17,_0x43b7d6,_0x258114);if(!_0x3753bc)return null;_0x9b1888['texture']=_0x3753bc;}return _0x9b1888;}['patch'](_0x3c205b,_0xe037c8){if(!_0x3c205b['resource'])return;_0x3c205b['resource']['__data']&&(_0x3c205b['resource']['__data']['minfilter']!==void(0x496*0x3+-0x1b3b+0xd79)&&(_0x3c205b['data']['minfilter']=_0x3c205b['resource']['__data']['minfilter']),_0x3c205b['resource']['__data']['magfilter']!==void(0x1*0x108e+0x1*-0xd67+0x3*-0x10d)&&(_0x3c205b['data']['magfilter']=_0x3c205b['resource']['__data']['magfilter']),_0x3c205b['resource']['__data']['addressu']!==void(0x1*-0x1ec1+0xb2+0x1e0f)&&(_0x3c205b['data']['addressu']=_0x3c205b['resource']['__data']['addressu']),_0x3c205b['resource']['__data']['addressv']!==void(0xffe+-0x13aa+0x3ac)&&(_0x3c205b['data']['addressv']=_0x3c205b['resource']['__data']['addressv']),_0x3c205b['resource']['__data']['mipmaps']!==void(-0xbf*0x7+-0x11bd+0x1*0x16f6)&&(_0x3c205b['data']['mipmaps']=_0x3c205b['resource']['__data']['mipmaps']),_0x3c205b['resource']['__data']['anisotropy']!==void(-0xe1a+-0x1*-0x1945+-0x3b9*0x3)&&(_0x3c205b['data']['anisotropy']=_0x3c205b['resource']['__data']['anisotropy']),_0x3c205b['resource']['__data']['rgbm']!==void(0x9b1*0x1+0x1cb7*-0x1+0x1306)&&(_0x3c205b['data']['rgbm']=!!_0x3c205b['resource']['__data']['rgbm']),_0x3c205b['data']['frames']=_0x3c205b['resource']['__data']['frames'],delete _0x3c205b['resource']['__data']);const _0xafa4ee=_0x3c205b['resource']['texture'];if(_0xafa4ee&&(_0xafa4ee['name']=_0x3c205b['name'],_0x3c205b['data']['hasOwnProp'+'erty']('minfilter')&&_0xafa4ee['minFilter']!==Sc[_0x3c205b['data']['minfilter']]&&(_0xafa4ee['minFilter']=Sc[_0x3c205b['data']['minfilter']]),_0x3c205b['data']['hasOwnProp'+'erty']('magfilter')&&_0xafa4ee['magFilter']!==Sc[_0x3c205b['data']['magfilter']]&&(_0xafa4ee['magFilter']=Sc[_0x3c205b['data']['magfilter']]),_0x3c205b['data']['hasOwnProp'+'erty']('addressu')&&_0xafa4ee['addressU']!==gc[_0x3c205b['data']['addressu']]&&(_0xafa4ee['addressU']=gc[_0x3c205b['data']['addressu']]),_0x3c205b['data']['hasOwnProp'+'erty']('addressv')&&_0xafa4ee['addressV']!==gc[_0x3c205b['data']['addressv']]&&(_0xafa4ee['addressV']=gc[_0x3c205b['data']['addressv']]),_0x3c205b['data']['hasOwnProp'+'erty']('mipmaps')&&_0xafa4ee['mipmaps']!==_0x3c205b['data']['mipmaps']&&(_0xafa4ee['mipmaps']=_0x3c205b['data']['mipmaps']),_0x3c205b['data']['hasOwnProp'+'erty']('anisotropy')&&_0xafa4ee['anisotropy']!==_0x3c205b['data']['anisotropy']&&(_0xafa4ee['anisotropy']=_0x3c205b['data']['anisotropy']),_0x3c205b['data']['hasOwnProp'+'erty']('rgbm'))){const _0x161a9d=_0x3c205b['data']['rgbm']?Ki:Ms;_0xafa4ee['type']!==_0x161a9d&&(_0xafa4ee['type']=_0x161a9d);}_0x3c205b['resource']['texture']=_0xafa4ee;const _0x8108c0={};for(const _0x1e9b11 in _0x3c205b['data']['frames']){const _0x4b96c3=_0x3c205b['data']['frames'][_0x1e9b11];_0x8108c0[_0x1e9b11]={'rect':new re(_0x4b96c3['rect']),'pivot':new J(_0x4b96c3['pivot']),'border':new re(_0x4b96c3['border'])};}_0x3c205b['resource']['frames']=_0x8108c0,_0x3c205b['off']('change',this['_onAssetCh'+'ange'],this),_0x3c205b['on']('change',this['_onAssetCh'+'ange'],this);}['_onAssetCh'+'ange'](_0x3e80cc,_0x34f728,_0x4b35db){let _0x44a82a;if(_0x34f728==='data'||_0x34f728==='data.frame'+'s'){const _0x95b807={};for(const _0x387e53 in _0x4b35db['frames'])_0x44a82a=_0x4b35db['frames'][_0x387e53],_0x95b807[_0x387e53]={'rect':new re(_0x44a82a['rect']),'pivot':new J(_0x44a82a['pivot']),'border':new re(_0x44a82a['border'])};_0x3e80cc['resource']['frames']=_0x95b807;}else{const _0x2a801d=_0x34f728['match'](JN);if(_0x2a801d){const _0x6bfe63=_0x2a801d[0x6a7+0xb42+-0x8f4*0x2];_0x4b35db?(_0x3e80cc['resource']['frames'][_0x6bfe63]?(_0x44a82a=_0x3e80cc['resource']['frames'][_0x6bfe63],_0x44a82a['rect']['set'](_0x4b35db['rect'][0x9b0+0x5f*-0x19+-0x23*0x3],_0x4b35db['rect'][-0x1754+0xc40+0xb15*0x1],_0x4b35db['rect'][0x822+0x12b*0x4+-0xccc],_0x4b35db['rect'][0x2ae*-0x1+-0xc2*-0xb+-0x1*0x5a5]),_0x44a82a['pivot']['set'](_0x4b35db['pivot'][-0x5b0+0x599*-0x2+-0x10e2*-0x1],_0x4b35db['pivot'][0x127a+-0xb0*-0xd+-0x1b69]),_0x44a82a['border']['set'](_0x4b35db['border'][0x1*-0x18f0+-0x4*-0x3b2+-0x104*-0xa],_0x4b35db['border'][-0x437+-0xf5d+-0x687*-0x3],_0x4b35db['border'][-0x1419+-0x265a+0x3a75],_0x4b35db['border'][-0x1270+-0x44e*0x1+0x19*0xe9])):_0x3e80cc['resource']['frames'][_0x6bfe63]={'rect':new re(_0x4b35db['rect']),'pivot':new J(_0x4b35db['pivot']),'border':new re(_0x4b35db['border'])},_0x3e80cc['resource']['fire']('set:frame',_0x6bfe63,_0x3e80cc['resource']['frames'][_0x6bfe63])):_0x3e80cc['resource']['frames'][_0x6bfe63]&&(delete _0x3e80cc['resource']['frames'][_0x6bfe63],_0x3e80cc['resource']['fire']('remove:fra'+'me',_0x6bfe63));}}}}function tk(){const _0x121a92={'cTFETC1':0x0,'cTFETC2':0x1,'cTFBC1':0x2,'cTFBC3':0x3,'cTFPVRTC1_4_RGB':0x8,'cTFPVRTC1_4_RGBA':0x9,'cTFASTC_4x4':0xa,'cTFATC_RGB':0xb,'cTFATC_RGBA_INTERPOLATED_ALPHA':0xc,'cTFRGBA32':0xd,'cTFRGB565':0xe,'cTFRGBA4444':0x10},_0x395c8f={'astc':_0x121a92['cTFASTC_4x'+'4'],'dxt':_0x121a92['cTFBC1'],'etc1':_0x121a92['cTFETC1'],'etc2':_0x121a92['cTFETC1'],'pvr':_0x121a92['cTFPVRTC1_'+'4_RGB'],'atc':_0x121a92['cTFATC_RGB'],'none':_0x121a92['cTFRGB565']},_0x3a49aa={'astc':_0x121a92['cTFASTC_4x'+'4'],'dxt':_0x121a92['cTFBC3'],'etc1':_0x121a92['cTFRGBA444'+'4'],'etc2':_0x121a92['cTFETC2'],'pvr':_0x121a92['cTFPVRTC1_'+'4_RGBA'],'atc':_0x121a92['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA'],'none':_0x121a92['cTFRGBA444'+'4']},_0x31ab24={'ETC1':0x15,'ETC2_RGB':0x16,'ETC2_RGBA':0x17,'DXT1':0x8,'DXT5':0xa,'PVRTC_4BPP_RGB_1':0x1a,'PVRTC_4BPP_RGBA_1':0x1b,'ASTC_4x4':0x1c,'ATC_RGB':0x1d,'ATC_RGBA':0x1e,'R8_G8_B8_A8':0x7,'R5_G6_B5':0x3,'R4_G4_B4_A4':0x5},_0x4aa1e7=(_0x9bc897,_0x799ce8)=>{switch(_0x9bc897){case _0x121a92['cTFETC1']:return _0x799ce8['formats']['etc2']?_0x31ab24['ETC2_RGB']:_0x31ab24['ETC1'];case _0x121a92['cTFETC2']:return _0x31ab24['ETC2_RGBA'];case _0x121a92['cTFBC1']:return _0x31ab24['DXT1'];case _0x121a92['cTFBC3']:return _0x31ab24['DXT5'];case _0x121a92['cTFPVRTC1_'+'4_RGB']:return _0x31ab24['PVRTC_4BPP'+'_RGB_1'];case _0x121a92['cTFPVRTC1_'+'4_RGBA']:return _0x31ab24['PVRTC_4BPP'+'_RGBA_1'];case _0x121a92['cTFASTC_4x'+'4']:return _0x31ab24['ASTC_4x4'];case _0x121a92['cTFATC_RGB']:return _0x31ab24['ATC_RGB'];case _0x121a92['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return _0x31ab24['ATC_RGBA'];case _0x121a92['cTFRGBA32']:return _0x31ab24['R8_G8_B8_A'+'8'];case _0x121a92['cTFRGB565']:return _0x31ab24['R5_G6_B5'];case _0x121a92['cTFRGBA444'+'4']:return _0x31ab24['R4_G4_B4_A'+'4'];}},_0x1cd3fb=_0x3f3605=>{const _0x491371=function(_0x58b258,_0x4615da){const _0x342938=_0x58b258*(0x1899+-0x1*-0x1b6f+-0x3408+0.00784313725490196)-(-0x80f+0x208+0x608),_0x21b664=_0x4615da*((-0xce4+0x30a*0x8+-0xb6a)/(-0x2eb*0x7+0x1*0x20c3+-0xb57))-(-0x10*-0x191+0x1a34+-0xb*0x4a9),_0x547e89=Math['sqrt'](0x184f+-0xee9+-0x965-Math['min'](-0x635+0x10e0+-0x222*0x5,_0x342938*_0x342938+_0x21b664*_0x21b664));return Math['max'](0x1a22+0x623*-0x6+0xab0,Math['min'](0x9*-0x446+-0xb20+0x3295*0x1,Math['floor']((_0x547e89+(-0x2704+0x1de5+0x920))*(-0x1723+0x2596+-0x1b*0x89+0.5)*(-0x218b+-0x5*0x371+0x33bf*0x1))));};for(let _0x2cd4bb=0x377*-0x6+-0x19ac+0x2e76;_0x2cd4bb<_0x3f3605['length'];_0x2cd4bb+=-0x3*0x5e6+0x1c*0xb+-0x841*-0x2){const _0x14b4a5=_0x3f3605[_0x2cd4bb+(-0x5*-0x5d2+0x1acd+0x1ff*-0x1c)],_0x3c4f2f=_0x3f3605[_0x2cd4bb+(0x14ab*0x1+-0x269*-0x5+-0x20b7)];_0x3f3605[_0x2cd4bb+(0x1*-0x229+0x258e+-0x215*0x11)]=_0x14b4a5,_0x3f3605[_0x2cd4bb+(-0x914+-0x62*-0x2+0x852)]=_0x491371(_0x14b4a5,_0x3c4f2f),_0x3f3605[_0x2cd4bb+(-0x2432+-0x123f+0x29*0x154)]=-0x182e+-0x2628+0x3f55;}return _0x3f3605;},_0x5c2e19=_0x156bba=>{const _0x5a6606=new Uint16Array(_0x156bba['length']/(0x9*0x8f+0x6db*-0x2+0x8b3));for(let _0x5a2751=0x3*-0x7+0x1df7+-0x1de2;_0x5a2751<_0x156bba['length'];_0x5a2751+=0xef*-0x21+0x3c6+-0x1*-0x1b0d){const _0x23cb72=_0x156bba[_0x5a2751+(-0xa20+0x15*-0x166+0x277e)],_0xc13a90=_0x156bba[_0x5a2751+(0x6d8+-0x19cc+0x12f5)],_0x532c48=_0x156bba[_0x5a2751+(0x74+-0x1*0xd31+0xcbf)];_0x5a6606[_0x5a2751/(-0x6d*0x47+-0xfa5+0x2de4)]=(_0x23cb72&0x13f4*-0x1+0x7d6+0xd16)<<-0x49*0x35+0x3fd+0xb28|(_0xc13a90&0xb22+0x1*-0x1aba+-0x84a*-0x2)<<-0x12f8+-0x18ac*-0x1+-0x5b1|_0x532c48>>-0x42f*-0x1+0x26*-0x2+-0x3e0;}return _0x5a6606;},_0x44c44d=(_0x32e65e,_0x4fdff8)=>(_0x32e65e&_0x32e65e-(-0x1f*-0x27+-0x13bc+-0x1*-0xf04))===0x193*-0x15+-0x10cd+0xc77*0x4&&(_0x4fdff8&_0x4fdff8-(0xa*-0x7b+0x1*-0x43c+-0x5*-0x1cf))===-0x1b13+0xe3a+0xcd9*0x1,_0x1a7f03=()=>typeof performance<'u'?performance['now']():-0x264a+-0x18f6*-0x1+0xd54;let _0xac068d,_0x15c4f5,_0x2ecb08;const _0x20be82=(_0x3b4e7a,_0x536ea1,_0x281e60)=>{if(_0x281e60){if(_0x3b4e7a['formats']['astc'])return'astc';}else{if(_0x536ea1){if(_0x3b4e7a['formats']['etc2'])return'etc2';}else{if(_0x3b4e7a['formats']['etc2'])return'etc2';if(_0x3b4e7a['formats']['etc1'])return'etc1';}}return(_0x238678=>{for(let _0x211133=-0xc*0x26b+0xfee*0x1+0xd16;_0x211133<_0x238678['length'];++_0x211133){const _0x11ed63=_0x238678[_0x211133];if(_0x3b4e7a['formats'][_0x11ed63])return _0x11ed63;}return'none';})(_0x536ea1?_0x2ecb08:_0x15c4f5);},_0x15b24b=(_0x26914b,_0x1ff3ca,_0x373853)=>{switch(_0x373853){case _0x121a92['cTFETC1']:case _0x121a92['cTFETC2']:return!(0x145d+-0x1*-0x1659+-0x2ab6);case _0x121a92['cTFBC1']:case _0x121a92['cTFBC3']:return(_0x26914b&-0x17e1+0x3b*-0x31+0x232f)===-0x1f96+0x5ca+0x19cc&&(_0x1ff3ca&0xf+-0x3*-0x34e+-0x9f6)===-0xfba+0x14b*-0x14+0x2996*0x1;case _0x121a92['cTFPVRTC1_'+'4_RGB']:case _0x121a92['cTFPVRTC1_'+'4_RGBA']:return _0x44c44d(_0x26914b,_0x1ff3ca);case _0x121a92['cTFASTC_4x'+'4']:return!(0x1664+-0x1237+-0x42d);case _0x121a92['cTFATC_RGB']:case _0x121a92['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return!(0x169*0x1a+0x61d+-0xe9*0x2f);}return!(0xf4f*0x1+0xff6+-0x15c*0x17);},_0x3261cf=(_0xa3f706,_0x5bb89b,_0x5cc9d2)=>{if(!_0xac068d['KTX2File'])throw new Error('Basis\x20tran'+'scoder\x20mod'+'ule\x20does\x20n'+'ot\x20include'+'\x20support\x20f'+'or\x20KTX2.');const _0x33af55=_0x1a7f03(),_0x5f4dcc=new _0xac068d['KTX2File'](new Uint8Array(_0x5bb89b)),_0x2ef0e4=_0x5f4dcc['getWidth'](),_0x582b1c=_0x5f4dcc['getHeight'](),_0x28b9f6=_0x5f4dcc['getLevels'](),_0x41f183=!!_0x5f4dcc['getHasAlph'+'a'](),_0x5c62b7=_0x5f4dcc['isUASTC']&&_0x5f4dcc['isUASTC']();if(!_0x2ef0e4||!_0x582b1c||!_0x28b9f6)throw _0x5f4dcc['close'](),_0x5f4dcc['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0xa3f706+'\x20width='+_0x2ef0e4+'\x20height='+_0x582b1c+'\x20levels='+_0x28b9f6);const _0x28315d=_0x20be82(_0x5cc9d2['deviceDeta'+'ils'],_0x41f183,_0x5c62b7),_0x43ca00=!!_0x5cc9d2['isGGGR']&&_0x28315d==='pvr';let _0x264495;if(_0x43ca00?_0x264495=_0x121a92['cTFRGBA32']:(_0x264495=_0x41f183?_0x3a49aa[_0x28315d]:_0x395c8f[_0x28315d],_0x15b24b(_0x2ef0e4,_0x582b1c,_0x264495)||(_0x264495=_0x41f183?_0x121a92['cTFRGBA32']:_0x121a92['cTFRGB565'])),!_0x5f4dcc['startTrans'+'coding']())throw _0x5f4dcc['close'](),_0x5f4dcc['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0xa3f706);let _0x5ca152;const _0x5d9891=[];for(let _0x4ca0fd=-0x5*-0x6b6+0x1e22+-0x7f6*0x8;_0x4ca0fd<_0x28b9f6;++_0x4ca0fd){const _0x4ae176=_0x5f4dcc['getImageTr'+'anscodedSi'+'zeInBytes'](_0x4ca0fd,-0x8*0xcc+-0xb40+0x11a0,0x1153*0x1+0xd9+-0x122c,_0x264495),_0x52803e=new Uint8Array(_0x4ae176);if(!_0x5f4dcc['transcodeI'+'mage'](_0x52803e,_0x4ca0fd,0x6c*0x18+-0x84b+-0x1d5,-0x1f47+0x1*-0x757+0x2*0x134f,_0x264495,-0xd5a+-0x183e+0xc*0x322,-(0x20ac+0x125*-0xf+-0x10*0xf8),-(-0x2027+0x601+0x1a27)))throw _0x5f4dcc['close'](),_0x5f4dcc['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0xa3f706);const _0x3624a3=_0x264495===_0x121a92['cTFRGB565']||_0x264495===_0x121a92['cTFRGBA444'+'4'];_0x5d9891['push'](_0x3624a3?new Uint16Array(_0x52803e['buffer']):_0x52803e);}if(_0x5f4dcc['close'](),_0x5f4dcc['delete'](),_0x43ca00){for(_0x264495=_0x121a92['cTFRGB565'],_0x5ca152=-0x170b+0x1f7*0xb+0x7a*0x3;_0x5ca152<_0x5d9891['length'];++_0x5ca152)_0x5d9891[_0x5ca152]=_0x5c2e19(_0x1cd3fb(_0x5d9891[_0x5ca152]));}return{'format':_0x4aa1e7(_0x264495,_0x5cc9d2['deviceDeta'+'ils']),'width':_0x2ef0e4,'height':_0x582b1c,'levels':_0x5d9891,'cubemap':!(0x7*-0x4df+-0x13b6+-0x1*-0x35d0),'transcodeTime':_0x1a7f03()-_0x33af55,'url':_0xa3f706,'unswizzledGGGR':_0x43ca00};},_0x47f4c8=(_0x36fe55,_0x56e331,_0x57a295)=>{const _0x547478=_0x1a7f03(),_0x58e0e4=new _0xac068d['BasisFile'](new Uint8Array(_0x56e331)),_0x3c9966=_0x58e0e4['getImageWi'+'dth'](0x4*0x322+0x1*-0x5ad+-0x1b*0x41,-0x9d1+-0x1*-0x8db+0x52*0x3),_0x2835de=_0x58e0e4['getImageHe'+'ight'](0x2209+0x228b+-0x4494,0xd*-0x167+0xf51+-0x2*-0x175),_0x38e268=_0x58e0e4['getNumImag'+'es'](),_0x29a6b5=_0x58e0e4['getNumLeve'+'ls'](0x74*0x3e+0x6a1+-0x22b9),_0x4d8e72=!!_0x58e0e4['getHasAlph'+'a'](),_0xe53464=_0x58e0e4['isUASTC']&&_0x58e0e4['isUASTC']();if(!_0x3c9966||!_0x2835de||!_0x38e268||!_0x29a6b5)throw _0x58e0e4['close'](),_0x58e0e4['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x36fe55+'\x20width='+_0x3c9966+'\x20height='+_0x2835de+'\x20images='+_0x38e268+'\x20levels='+_0x29a6b5);const _0x567b30=_0x20be82(_0x57a295['deviceDeta'+'ils'],_0x4d8e72,_0xe53464),_0x205015=!!_0x57a295['isGGGR']&&_0x567b30==='pvr';let _0x49d46e;if(_0x205015?_0x49d46e=_0x121a92['cTFRGBA32']:(_0x49d46e=_0x4d8e72?_0x3a49aa[_0x567b30]:_0x395c8f[_0x567b30],_0x15b24b(_0x3c9966,_0x2835de,_0x49d46e)||(_0x49d46e=_0x4d8e72?_0x121a92['cTFRGBA32']:_0x121a92['cTFRGB565'])),!_0x58e0e4['startTrans'+'coding']())throw _0x58e0e4['close'](),_0x58e0e4['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x36fe55);let _0x52eb8a;const _0x463ae7=[];for(let _0x351d28=-0x2*-0xe39+0x4a1+0x1*-0x2113;_0x351d28<_0x29a6b5;++_0x351d28){const _0x2f3d70=_0x58e0e4['getImageTr'+'anscodedSi'+'zeInBytes'](0x1f5d+0x1dd*0x1+-0x213a,_0x351d28,_0x49d46e),_0x5a33f2=new Uint8Array(_0x2f3d70);if(!_0x58e0e4['transcodeI'+'mage'](_0x5a33f2,-0x1f31*0x1+0x13a1+0x128*0xa,_0x351d28,_0x49d46e,-0xeac*0x2+-0xefe+0x2c56,-0x109c+-0x186c*0x1+0x1*0x2908)){if(_0x351d28===_0x29a6b5-(-0x40*-0x80+-0x218+-0x1de7)&&_0x2f3d70===_0x463ae7[_0x351d28-(-0x2d2*0x2+-0x1d29+0x14a*0x1b)]['buffer']['byteLength'])_0x5a33f2['set'](new Uint8Array(_0x463ae7[_0x351d28-(-0xd*-0x147+-0x302+-0xd98)]['buffer'])),console['warn']('Failed\x20to\x20'+'transcode\x20'+'last\x20mipma'+'p\x20level,\x20u'+'sing\x20previ'+'ous\x20level\x20'+'instead\x20ur'+'l='+_0x36fe55);else throw _0x58e0e4['close'](),_0x58e0e4['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x36fe55);}const _0x9be8f8=_0x49d46e===_0x121a92['cTFRGB565']||_0x49d46e===_0x121a92['cTFRGBA444'+'4'];_0x463ae7['push'](_0x9be8f8?new Uint16Array(_0x5a33f2['buffer']):_0x5a33f2);}if(_0x58e0e4['close'](),_0x58e0e4['delete'](),_0x205015){for(_0x49d46e=_0x121a92['cTFRGB565'],_0x52eb8a=0x39f*0x4+0xf70+-0x1*0x1dec;_0x52eb8a<_0x463ae7['length'];++_0x52eb8a)_0x463ae7[_0x52eb8a]=_0x5c2e19(_0x1cd3fb(_0x463ae7[_0x52eb8a]));}return{'format':_0x4aa1e7(_0x49d46e,_0x57a295['deviceDeta'+'ils']),'width':_0x3c9966,'height':_0x2835de,'levels':_0x463ae7,'cubemap':!(-0x17a4+-0x14c2+-0x2c67*-0x1),'transcodeTime':_0x1a7f03()-_0x547478,'url':_0x36fe55,'unswizzledGGGR':_0x205015};},_0x48cd91=(_0xb50a48,_0x46ba78,_0x519cc5)=>_0x519cc5['isKTX2']?_0x3261cf(_0xb50a48,_0x46ba78,_0x519cc5):_0x47f4c8(_0xb50a48,_0x46ba78,_0x519cc5),_0x201be3=(_0x1b3375,_0x4f562f,_0x411c2c)=>{try{const _0x455f07=_0x48cd91(_0x1b3375,_0x4f562f,_0x411c2c);_0x455f07['levels']=_0x455f07['levels']['map'](_0x45f4c2=>_0x45f4c2['buffer']),self['postMessag'+'e']({'url':_0x1b3375,'data':_0x455f07},_0x455f07['levels']);}catch(_0x300e48){self['postMessag'+'e']({'url':_0x1b3375,'err':_0x300e48},null);}},_0x5d5b1b=(_0x49a8c0,_0x4caece)=>{const _0x2c34a1=(_0x1ce0c1,_0x3be077)=>(WebAssembly['instantiat'+'e'](_0x49a8c0['module'],_0x1ce0c1)['then'](_0x428562=>{_0x3be077(_0x428562);})['catch'](_0x2e9c22=>{console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x2e9c22);}),{});self['BASIS'](_0x49a8c0['module']?{'instantiateWasm':_0x2c34a1}:null)['then'](_0x22aa1f=>{_0x22aa1f['initialize'+'Basis'](),_0xac068d=_0x22aa1f,_0x15c4f5=_0x49a8c0['rgbPriorit'+'y'],_0x2ecb08=_0x49a8c0['rgbaPriori'+'ty'],_0x4caece(null);});},_0x5cafd6=[];self['onmessage']=_0x52c50d=>{const _0x26bbf9=_0x52c50d['data'];switch(_0x26bbf9['type']){case'init':_0x5d5b1b(_0x26bbf9['config'],()=>{for(let _0x2dd9e7=-0x19c5+0x1*-0x1df2+0x37b7;_0x2dd9e7<_0x5cafd6['length'];++_0x2dd9e7)_0x201be3(_0x5cafd6[_0x2dd9e7]['url'],_0x5cafd6[_0x2dd9e7]['data'],_0x5cafd6[_0x2dd9e7]['options']);_0x5cafd6['length']=0x1656+0x9*-0x1cd+-0x621;});break;case'transcode':_0xac068d?_0x201be3(_0x26bbf9['url'],_0x26bbf9['data'],_0x26bbf9['options']):_0x5cafd6['push'](_0x26bbf9);break;}};}const sk=_0x21e715=>({'astc':!!_0x21e715['extCompres'+'sedTexture'+'ASTC'],'atc':!!_0x21e715['extCompres'+'sedTexture'+'ATC'],'dxt':!!_0x21e715['extCompres'+'sedTexture'+'S3TC'],'etc1':!!_0x21e715['extCompres'+'sedTexture'+'ETC1'],'etc2':!!_0x21e715['extCompres'+'sedTexture'+'ETC'],'pvr':!!_0x21e715['extCompres'+'sedTexture'+'PVRTC']}),ik=(_0x4a556e,_0x49cb7e)=>{const _0x3c61ca=_0x1bc9f4=>{const _0x50eb1e=['/*\x20basis\x20*'+'/',_0x1bc9f4,'','('+tk['toString']()+')()\x0a\x0a']['join']('\x0a');return new Blob([_0x50eb1e],{'type':'applicatio'+'n/javascri'+'pt'});},_0x4e9cc0=()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x56eca=new WebAssembly['Module'](Uint8Array['of'](-0xf0e+-0x40f*0x9+0x2b7*0x13,0x1a4e+-0x142f+-0x5be,0x7*0x257+-0xa3b+-0x5b3,-0x10da+0x1*-0x143f+0x2586,-0x3ba+0x313*0x1+0x6*0x1c,0x221*0x6+0x1f23+-0x2be9,0xee3+0x1*0x10e7+-0x1fca,0x6d*0x47+-0x1*-0xad8+0xdb1*-0x3));if(_0x56eca instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x56eca)instanceof WebAssembly['Instance'];}}catch{}return!(0x6*0x1b1+-0x13e7*0x1+0x1*0x9c2);},_0x16133e=(_0x42baba,_0x42106c)=>{_0x49cb7e(null,{'workerUrl':URL['createObje'+'ctURL'](_0x3c61ca(_0x42baba)),'module':_0x42106c,'rgbPriority':_0x4a556e['rgbPriorit'+'y'],'rgbaPriority':_0x4a556e['rgbaPriori'+'ty']});},_0x3e022a={'cache':!(0xa1f*0x1+0x1*-0x1951+0xf32),'responseType':'text','retry':_0x4a556e['maxRetries']>0x2661+0xbf*0x2d+0xa*-0x732,'maxRetries':_0x4a556e['maxRetries']};if(_0x4a556e['glueUrl']&&_0x4a556e['wasmUrl']&&_0x4e9cc0()){let _0x2b8eef=null,_0x50a914=null;ot['get'](_0x4a556e['glueUrl'],_0x3e022a,(_0x4976f1,_0x35f585)=>{_0x4976f1?_0x49cb7e(_0x4976f1):_0x50a914?_0x16133e(_0x35f585,_0x50a914):_0x2b8eef=_0x35f585;});const _0x4bd63a=fetch(_0x4a556e['wasmUrl']),_0x5249aa=()=>{_0x4bd63a['then'](_0x389a22=>_0x389a22['arrayBuffe'+'r']())['then'](_0x55bc77=>WebAssembly['compile'](_0x55bc77))['then'](_0x51acfa=>{_0x2b8eef?_0x16133e(_0x2b8eef,_0x51acfa):_0x50a914=_0x51acfa;})['catch'](_0xec83b8=>{_0x49cb7e(_0xec83b8,null);});};WebAssembly['compileStr'+'eaming']?WebAssembly['compileStr'+'eaming'](_0x4bd63a)['then'](_0x18a413=>{_0x2b8eef?_0x16133e(_0x2b8eef,_0x18a413):_0x50a914=_0x18a413;})['catch'](_0x253402=>{w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x4a556e['wasmUrl']+'\x20('+_0x253402+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x5249aa();}):_0x5249aa();}else ot['get'](_0x4a556e['fallbackUr'+'l'],_0x3e022a,(_0x17eaa3,_0x5c9f8c)=>{_0x17eaa3?_0x49cb7e(_0x17eaa3,null):_0x16133e(_0x5c9f8c,null);});};class rk{constructor(){this['callbacks']={},this['queue']=[],this['clients']=[];}['enqueueJob'](_0xb9529d,_0x541e7c,_0x372f,_0x5c4732){if(this['callbacks']['hasOwnProp'+'erty'](_0xb9529d))this['callbacks'][_0xb9529d]['push'](_0x372f);else{this['callbacks'][_0xb9529d]=[_0x372f];const _0x980b0={'url':_0xb9529d,'data':_0x541e7c,'options':_0x5c4732};this['clients']['length']>0x52b+-0x72*-0x44+-0x2373?this['clients']['shift']()['run'](_0x980b0):this['queue']['push'](_0x980b0);}}['enqueueCli'+'ent'](_0x5354d7){this['queue']['length']>-0x1264+-0x16e4+0x2948?_0x5354d7['run'](this['queue']['shift']()):this['clients']['push'](_0x5354d7);}['handleResp'+'onse'](_0x3c3ae3,_0x376cc2,_0x28dd44){const _0x27c5ed=this['callbacks'][_0x3c3ae3];if(_0x376cc2){for(let _0xbf10aa=0x2*0x4cf+0x6*0xce+0x739*-0x2;_0xbf10aa<_0x27c5ed['length'];++_0xbf10aa)_0x27c5ed[_0xbf10aa](_0x376cc2);}else{_0x28dd44['format']===Ih||_0x28dd44['format']===Lh?_0x28dd44['levels']=_0x28dd44['levels']['map'](_0x3ca655=>new Uint16Array(_0x3ca655)):_0x28dd44['levels']=_0x28dd44['levels']['map'](_0x4e4cbd=>new Uint8Array(_0x4e4cbd));for(let _0x40d4b6=-0x2688*-0x1+0x1*0x150b+-0x65*0x97;_0x40d4b6<_0x27c5ed['length'];++_0x40d4b6)_0x27c5ed[_0x40d4b6](null,_0x28dd44);}delete this['callbacks'][_0x3c3ae3];}}class ak{constructor(_0x490879,_0x13b385,_0x17871f){this['queue']=_0x490879,this['worker']=new Worker(_0x13b385['workerUrl']),this['worker']['addEventLi'+'stener']('message',_0xcceac8=>{const _0x478123=_0xcceac8['data'];this['queue']['handleResp'+'onse'](_0x478123['url'],_0x478123['err'],_0x478123['data']),this['eager']||this['queue']['enqueueCli'+'ent'](this);}),this['worker']['postMessag'+'e']({'type':'init','config':_0x13b385}),this['eager']=_0x17871f;}['run'](_0x468123){const _0x55fa1f=[];_0x468123['data']instanceof ArrayBuffer&&_0x55fa1f['push'](_0x468123['data']),this['worker']['postMessag'+'e']({'type':'transcode','url':_0x468123['url'],'format':_0x468123['format'],'data':_0x468123['data'],'options':_0x468123['options']},_0x55fa1f),this['eager']&&this['queue']['enqueueCli'+'ent'](this);}}const nk=0x1741+0x812*-0x4+0x908,ok=['etc2','etc1','astc','dxt','pvr','atc'],lk=['astc','dxt','etc2','pvr','atc'],ck=0x1*-0x260d+0x30f*0x9+0xa8b,vu=new rk();let Xg=null,xu=!(0x1*-0x5f7+0x1*-0x50d+0xd9*0xd);function hk(_0x292d39){if(!xu){if(!_0x292d39)_0x292d39=Xg||{};else{if(_0x292d39['lazyInit']){Xg=_0x292d39;return;}}if(!_0x292d39['glueUrl']||!_0x292d39['wasmUrl']||!_0x292d39['fallbackUr'+'l']){const _0x38e236=uS['getConfig']('BASIS');_0x38e236&&(_0x292d39={'glueUrl':_0x38e236['glueUrl'],'wasmUrl':_0x38e236['wasmUrl'],'fallbackUrl':_0x38e236['fallbackUr'+'l'],'numWorkers':_0x38e236['numWorkers']});}if(_0x292d39['glueUrl']||_0x292d39['wasmUrl']||_0x292d39['fallbackUr'+'l']){xu=!(0x8ce+-0x1bb+-0x713);const _0x2f5e21=Math['max'](-0xe*-0x2e+-0x1*0x23a7+-0x2124*-0x1,Math['min'](-0x250a*0x1+0x260b+-0xf1*0x1,_0x292d39['numWorkers']||nk)),_0x1682ae=_0x292d39['numWorkers']===0x230d+0x1a*-0xd1+-0xdd2||(_0x292d39['hasOwnProp'+'erty']('eagerWorke'+'rs')?_0x292d39['eagerWorke'+'rs']:!(-0x2526+0xd*-0x1e1+0x3d93));_0x292d39['rgbPriorit'+'y']=_0x292d39['rgbPriorit'+'y']||ok,_0x292d39['rgbaPriori'+'ty']=_0x292d39['rgbaPriori'+'ty']||lk,_0x292d39['maxRetries']=_0x292d39['hasOwnProp'+'erty']('maxRetries')?_0x292d39['maxRetries']:ck,ik(_0x292d39,(_0x47126f,_0xf61c4d)=>{if(_0x47126f)console['error']('failed\x20to\x20'+'initialize'+'\x20basis\x20wor'+'ker:\x20'+_0x47126f);else{for(let _0x1bd617=0xd*0x53+-0x22*0x4a+0x59d;_0x1bd617<_0x2f5e21;++_0x1bd617)vu['enqueueCli'+'ent'](new ak(vu,_0xf61c4d,_0x1682ae));}});}}}let lf=null;function Hv(_0x4c65ae,_0x1de437,_0x20adbe,_0x3658a3,_0x4779ed){return hk(),lf||(lf={'formats':sk(_0x4c65ae)}),vu['enqueueJob'](_0x1de437,_0x20adbe,_0x3658a3,{'deviceDetails':lf,'isGGGR':!!(_0x4779ed!=null&&_0x4779ed['isGGGR']),'isKTX2':!!(_0x4779ed!=null&&_0x4779ed['isKTX2'])}),xu;}class qn{['load'](_0x2a05e8,_0x5178e2,_0x71f3ba){throw new Error('not\x20implem'+'ented');}['open'](_0x256df4,_0x1ade0b,_0x615dc6){throw new Error('not\x20implem'+'ented');}}class dk extends qn{constructor(_0x4fdc06,_0x43fd4a){super(),this['device']=_0x43fd4a,this['maxRetries']=-0x96b*-0x1+0x7f9+0x2e6*-0x6;}['load'](_0x36501f,_0x124dee,_0xd9333a){const _0x26432f=this['device'],_0x10a928=_0x464db6=>{var _0x4c4113,_0x2aa6fe,_0xe0f8d;Hv(_0x26432f,_0x36501f['load'],_0x464db6,_0x124dee,{'isGGGR':(((_0xe0f8d=(_0x2aa6fe=(_0x4c4113=_0xd9333a==null?void(0x458+-0x25d0+0x2178):_0xd9333a['file'])==null?void(0x16cf+0x1166*-0x2+-0x1f*-0x63):_0x4c4113['variants'])==null?void(0x1db3+-0x1*0x1b43+0xc*-0x34):_0x2aa6fe['basis'])==null?void(-0x69*-0x49+0x1870+0x1*-0x3661):_0xe0f8d['opt'])&-0x2dd+-0x43*-0x1f+0x2*-0x29c)!==0x1d03+-0x35*0x7a+-0x3c1*0x1})||_0x124dee('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0xd9333a['name']+']('+_0xd9333a['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.'));};pe['fetchArray'+'Buffer'](_0x36501f['load'],(_0x452d8a,_0x9f5f75)=>{_0x452d8a?_0x124dee(_0x452d8a):_0x10a928(_0x9f5f75);},_0xd9333a,this['maxRetries']);}['open'](_0x4c8b75,_0x3b67ee,_0x74f480,_0x1fb4ee={}){const _0x281c20=_0x1fb4ee['srgb']?zh(_0x3b67ee['format']):_0x3b67ee['format'],_0x3ea366=new _e(_0x74f480,{'name':_0x4c8b75,'profilerHint':Er,'addressU':_0x3b67ee['cubemap']?ue:yt,'addressV':_0x3b67ee['cubemap']?ue:yt,'width':_0x3b67ee['width'],'height':_0x3b67ee['height'],'format':_0x281c20,'cubemap':_0x3b67ee['cubemap'],'levels':_0x3b67ee['levels'],..._0x1fb4ee});return _0x3ea366['upload'](),_0x3ea366;}}const Wv=new Uint8Array([0x2ce*-0x2+-0x1ecd+0x24f2,-0x26e7+0x1*0x458+-0x1*-0x22df,-0x9*0x309+-0x15*-0x1c9+-0x34a*0x3,-0x5*0x25e+-0x1*-0x116f+0x1*-0x552,-0xa09+-0x2*-0x55a+-0x9e,-0x11c*-0x19+0x1e*0x8+0x2*-0xe51,0x3*0x17e+-0x48a*0x2+0x4b4,-0x2247+0x579*-0x1+0x2*0x13e5,-0xec6+-0x1*0x602+0x14c8,0x39*-0x6d+-0xb*-0xb1+0x10aa,0x5*0x4d1+0x16ec+-0x2f01,-0xc62+-0x862+0x14d1,-0x1*-0xd54+0x20e1*-0x1+-0x1*-0x13d6,-0x1c28+-0x774+0x23e4,-0x1612+0x38b+0x12cb,0x1*-0x1fbc+-0xf44+0x2f52*0x1,0x1353+-0x1b6f+-0x81c*-0x1,0x1e92+0x1bd8+-0x3a6a,-0xaf1*-0x1+0x1d11*0x1+-0x2802,-0x1*0x17e5+-0x1*-0x128d+-0x25*-0x25,-0xc35*-0x1+0x22e8+-0x2f1d,0x1*0x13db+-0x62*0x1c+-0x923,-0x41*-0x2f+-0x18*0xd+-0xab7,0x26cc+0x3*0xb11+-0x47fe,0xc*-0x147+0x3f7*-0x1+-0x11*-0x123,0x1d29+0xff7+-0x2d1a,-0x7f1+-0x1*-0x1a89+0x154*-0xe,0x19e2+0x8bd*0x4+-0x3cd6,0x1953+0x224b+-0x3b9e,0x2f6*0x1+-0x2f*-0x31+0xf*-0xca,0x945*0x4+-0x191b*0x1+0x4*-0x2f9,0x269*-0xa+0x1*0x607+0x1*0x12d7,0x2*0x1009+0x3*-0x70b+-0xa68,-0x17c9+-0x1*-0x6e5+0x10e4,-0x2*0xd9c+0x1e7c+-0x344,0x44*-0x7d+0x1*-0x26bf+0x47f3,0x7*-0x346+0x22e3+-0xbec,0x1615+-0x5*0x76d+0xf55,0xb6f*0x1+0x1a86+0x1*-0x25b1,0x1ce8+0x19d+-0x1e44,0x1ed2+-0xa*-0x1c9+-0x3058,0xd*-0x2a5+-0x1c50+-0x1b5*-0x25,-0xbe9*-0x1+0x25bb+-0x30ca,-0x4c*0x73+0x1*0xffd+0xe*0x153,0x72e+-0x1*0x1513+0xe49*0x1,-0x2388+0x15f*0x7+0x1a53,-0x14ac+0x5db*-0x3+0x1*0x269f,-0x2*0x1212+0x1e*0x80+0x15da,0xc41+-0x8ef+0x1*-0x34b,-0x1ba0+-0x211d*-0x1+-0x57d,0x8f9+-0x265f+0x1d66,0x9e4+0x219*-0x11+0x1a1e,-0x762*-0x4+-0x688+0x17*-0x100,-0x861+0x2*-0x281+0x6d5*0x2,-0x15fc+-0x8ee+0x1f2d,-0x17cc+0x530*-0x6+-0xab*-0x53,-0x2*0xbec+-0x1*0x166+0x19d2,-0x2698+0x7b5+0x1fd0,-0xbed+-0x9cd+-0x26a*-0x9,-0x19*-0x14f+-0x13cb+0x1*-0xcec,0x1541+0x46*0x32+0x1*-0x22ed,0xdb*0x15+-0x24bb+-0x962*-0x2,0x11c4+-0xbc4+-0x5b7,-0xb51*-0x1+-0x6d1+0x169*-0x3,-0xf3+0x2499+-0x2358,0x2696+-0x1d*0xa3+-0x13db,0xa25+-0x6c*0x19+-0x1*-0x115,0x1c2a+0x168c+-0x4*0xc9d,-0xd87+0x1f1d+-0x89b*0x2,0x26a6+-0xe6c*-0x1+0x1d*-0x1d0]),$v=(_0x4b9d5,_0x2343a5)=>{const _0x4460d8=new _e(_0x4b9d5,{'width':0x1,'height':0x1,'format':Ne,'mipmaps':!(0x1f*-0x2d+0x121a+-0xca6),'levels':[_0x2343a5]}),_0xf968b5=new gt({'colorBuffer':_0x4460d8,'depth':!(-0x19a+-0x2*-0x119b+0x219b*-0x1)});_0x4b9d5['setFramebu'+'ffer'](_0xf968b5['impl']['_glFrameBu'+'ffer']),_0x4b9d5['initRender'+'Target'](_0xf968b5);const _0x31f8f5=new Uint8ClampedArray(-0x22bb+-0x286*0x5+0x2f5d);return _0x4b9d5['gl']['readPixels'](0x3*-0x6e2+0x2c2+0xe5*0x14,0x3c+0x718*-0x2+0xdf4,-0x1*0xbdd+0x341*-0x4+0x5b*0x46,-0x1*0x2479+0x2*-0x46c+0x2d52,_0x4b9d5['gl']['RGBA'],_0x4b9d5['gl']['UNSIGNED_B'+'YTE'],_0x31f8f5),_0xf968b5['destroy'](),_0x4460d8['destroy'](),_0x31f8f5[-0x5c6+0x21a3+-0x1*0x1bdd]===0xa86*-0x3+0x887+0x19*0xec&&_0x31f8f5[0x5ba*0x1+0xcce+-0x1287]===0x1964+-0x816+-0x114c&&_0x31f8f5[-0x172f+0x608+0x1129]===-0x78b*-0x3+0x2651*-0x1+0xfb3&&_0x31f8f5[-0x2030+-0x2238+0x426b]===-0x6*-0x153+0x2591+-0x2d44;},fk=_0x257366=>createImageBitmap(new Blob([Wv],{'type':'image/png'}),{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x2a1d37=>$v(_0x257366,_0x2a1d37))['catch'](_0x4722da=>!(0xfec*-0x2+0x17b*0x15+-0xc2*-0x1)),uk=_0x5ea462=>new Promise((_0xbbf2ca,_0x1be222)=>{const _0x45a61f=new Image();_0x45a61f['src']=URL['createObje'+'ctURL'](new Blob([Wv])),_0x45a61f['onload']=()=>{_0xbbf2ca($v(_0x5ea462,_0x45a61f));};});class pk{static['run'](_0x19e60a){fk(_0x19e60a)['then'](_0x2ba40b=>{console['log']('imageBitma'+'pIsCorrect'+'='+_0x2ba40b);}),uk(_0x19e60a)['then'](_0x2546fd=>{console['log']('imgElement'+'IsCorrect='+_0x2546fd);});}}class mk extends qn{constructor(_0x4d6b45,_0x28b3f1){super(),this['crossOrigi'+'n']=_0x4d6b45['prefix']?'anonymous':null,this['maxRetries']=0x128f+0x1*-0x119e+-0x1*0xf1,this['device']=_0x28b3f1,mi['get']('IMG_ALPHA_'+'TEST')&&pk['run'](this['device']);}['load'](_0x536a8a,_0x2bc391,_0x770d59){var _0x370ea5;const _0x17b33b=!!((_0x370ea5=_0x770d59==null?void(0x19f*-0x5+0x1*0x4c1+-0x1a*-0x21):_0x770d59['file'])!=null&&_0x370ea5['contents']);if(_0x17b33b){if(this['device']['supportsIm'+'ageBitmap']){this['_loadImage'+'BitmapFrom'+'Blob'](new Blob([_0x770d59['file']['contents']]),_0x2bc391);return;}_0x536a8a={'load':URL['createObje'+'ctURL'](new Blob([_0x770d59['file']['contents']])),'original':_0x536a8a['original']};}const _0x412854=(_0x167de9,_0x173a0f)=>{_0x17b33b&&URL['revokeObje'+'ctURL'](_0x536a8a['load']),_0x2bc391(_0x167de9,_0x173a0f);};let _0x25df9b;_0x770d59&&_0x770d59['options']&&_0x770d59['options']['hasOwnProp'+'erty']('crossOrigi'+'n')?_0x25df9b=_0x770d59['options']['crossOrigi'+'n']:Vn['test'](_0x536a8a['load'])&&(_0x25df9b=this['crossOrigi'+'n']),this['device']['supportsIm'+'ageBitmap']?this['_loadImage'+'Bitmap'](_0x536a8a['load'],_0x536a8a['original'],_0x25df9b,_0x412854,_0x770d59):this['_loadImage'](_0x536a8a['load'],_0x536a8a['original'],_0x25df9b,_0x412854);}['open'](_0x537bb7,_0x52a338,_0x2f916b,_0x33cecf={}){const _0x14df8b=new _e(_0x2f916b,{'name':_0x537bb7,'profilerHint':Er,'width':_0x52a338['width'],'height':_0x52a338['height'],'format':_0x33cecf['srgb']?_s:Ne,..._0x33cecf});return _0x14df8b['setSource'](_0x52a338),_0x14df8b;}['_loadImage'](_0x55b32f,_0x2c210e,_0x5c25f0,_0x5947ce){const _0x23ff33=new Image();_0x5c25f0&&(_0x23ff33['crossOrigi'+'n']=_0x5c25f0);let _0x4b711e=0x3d*-0x10+-0x352*0x6+0x17bc;const _0x407294=this['maxRetries'];let _0x3b8ec4;_0x23ff33['onload']=function(){_0x5947ce(null,_0x23ff33);},_0x23ff33['onerror']=function(){if(!_0x3b8ec4){if(_0x407294>-0x1c2+-0x204e+-0xda*-0x28&&++_0x4b711e<=_0x407294){const _0x4aea02=Math['pow'](-0xdf*0x1a+-0x2a2+-0x6*-0x437,_0x4b711e)*(-0x8f3*0x1+-0x1*-0x24c8+0x19*-0x119);console['log']('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x2c210e+('\x27\x20-\x20Retryi'+'ng\x20in\x20')+_0x4aea02+'ms...');const _0x382108=_0x55b32f['indexOf']('?')>=0x2708+0x6bc+-0x2dc4?'&':'?';_0x3b8ec4=setTimeout(()=>{_0x23ff33['src']=_0x55b32f+_0x382108+'retry='+Date['now'](),_0x3b8ec4=null;},_0x4aea02);}else _0x5947ce('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x2c210e+'\x27');}},_0x23ff33['src']=_0x55b32f;}['_loadImage'+'Bitmap'](_0x51d5c9,_0x2fd87b,_0x6ed51b,_0x365f57,_0x21e6f9){const _0x49d848={'cache':!(0x1*0x11fb+0x17*0xd6+-0x2535),'responseType':'blob','retry':this['maxRetries']>-0x751*0x1+-0x1*-0x1b1+0x5a0,'maxRetries':this['maxRetries'],'progress':_0x21e6f9};ot['get'](_0x51d5c9,_0x49d848,(_0x64de9a,_0x2cce87)=>{_0x64de9a?_0x365f57(_0x64de9a):this['_loadImage'+'BitmapFrom'+'Blob'](_0x2cce87,_0x365f57);});}['_loadImage'+'BitmapFrom'+'Blob'](_0x528d68,_0x7f9108){createImageBitmap(_0x528d68,{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0xb02b82=>_0x7f9108(null,_0xb02b82))['catch'](_0x57946c=>_0x7f9108(_0x57946c));}}const cf=[0x88bd5b87+0xa7c1e6c1+-0xd82af69d,0xa0671cbd+-0x2*-0x30b5cbfa+-0x46a18391,-0x943fc99+0x237fb4c*-0x9+0x68e4f63*0x6],_k={0x83f0:Rh,0x83f2:Ou,0x83f3:ol,0x8d64:Fh,0x9274:Nu,0x9278:ku,0x8c00:Nh,0x8c01:ll,0x8c02:kh,0x8c03:cl,0x8051:wr,0x8058:Ne,0x8c41:Fu,0x8c43:_s,0x8c3a:En,0x881b:ui,0x881a:nt};function gk(_0x23862c,_0x551dba,_0x50ebda,_0x263fda){return _0x23862c===En?new Uint32Array(_0x551dba,_0x50ebda,_0x263fda/(-0x2288+-0x22*0x47+0x2bfa)):new Uint8Array(_0x551dba,_0x50ebda,_0x263fda);}class Sk extends qn{constructor(_0x3d4bd7){super(),this['maxRetries']=0x4d*0x16+0x3*0x65b+-0x19af;}['load'](_0x403b3a,_0x5a9257,_0x12f7b9){pe['fetchArray'+'Buffer'](_0x403b3a['load'],_0x5a9257,_0x12f7b9,this['maxRetries']);}['open'](_0x11a4c0,_0x38e2cf,_0x40ebd6,_0x1bace1={}){const _0x1f4b3=this['parse'](_0x38e2cf);if(!_0x1f4b3)return null;const _0x2f1052=_0x1bace1['srgb']?zh(_0x1f4b3['format']):_0x1f4b3['format'],_0x1044cc=new _e(_0x40ebd6,{'name':_0x11a4c0,'profilerHint':Er,'addressU':_0x1f4b3['cubemap']?ue:yt,'addressV':_0x1f4b3['cubemap']?ue:yt,'width':_0x1f4b3['width'],'height':_0x1f4b3['height'],'format':_0x2f1052,'cubemap':_0x1f4b3['cubemap'],'levels':_0x1f4b3['levels'],..._0x1bace1});return _0x1044cc['upload'](),_0x1044cc;}['parse'](_0x19bef1){const _0x52e339=new Uint32Array(_0x19bef1);if(cf[0x2a9+0x625+-0x8ce]!==_0x52e339[-0x1d9d+-0x3d*0x1f+-0x80*-0x4a]||cf[0xc63+0x1*-0x7f3+0x46f*-0x1]!==_0x52e339[0x1*-0x13e9+-0x125f+0x2649]||cf[0x5f0+-0xfec+0x9fe*0x1]!==_0x52e339[-0x6c3*0x1+-0x1434+0x1af9*0x1])return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX\x20f'+'ile.\x20Expec'+'ted\x200xAB4B'+'5458,\x200x20'+'3131BB,\x200x'+'0D0A1A0A'),null;const _0x40d1b2={'endianness':_0x52e339[-0x1d11+-0x294+0xfd4*0x2],'glType':_0x52e339[-0x2521*0x1+-0x8d9+-0x349*-0xe],'glTypeSize':_0x52e339[0x1b6e+-0x133*0x10+-0x1a5*0x5],'glFormat':_0x52e339[-0x11e6*-0x2+-0x1dc6+-0x600],'glInternalFormat':_0x52e339[-0x1a72+-0x245*0x2+0x1f03],'glBaseInternalFormat':_0x52e339[-0x1*0x158c+-0x264a+0x3bde],'pixelWidth':_0x52e339[0x10ce+0x1*-0x18b6+0x7f1],'pixelHeight':_0x52e339[-0x1116+-0x1051*0x1+0x2171],'pixelDepth':_0x52e339[0x4d6+0x1e86+0x1*-0x2351],'numberOfArrayElements':_0x52e339[-0x1805+0x850+0xfc1],'numberOfFaces':_0x52e339[0x1c55+-0x2659+-0x1*-0xa11],'numberOfMipmapLevels':_0x52e339[-0x1151*0x2+0x1*0x2560+0x2b*-0x10],'bytesOfKeyValueData':_0x52e339[-0x1843+-0x2*-0xd39+-0x220]};if(_0x40d1b2['pixelDepth']>0x17a9+0x137b*-0x2+0x7a7*0x2)return w['warn']('More\x20than\x20'+'1\x20pixel\x20de'+'pth\x20not\x20su'+'pported!'),null;if(_0x40d1b2['numberOfAr'+'rayElement'+'s']!==-0x1444*0x1+-0x7c7+0x1c0b)return w['warn']('Array\x20text'+'ure\x20not\x20su'+'pported!'),null;const _0x2c05b2=_k[_0x40d1b2['glInternal'+'Format']];if(_0x2c05b2===void(-0x2a5+-0x1124+-0x5*-0x3f5))return w['warn']('Unknown\x20gl'+'InternalFo'+'rmat:\x20'+_0x40d1b2['glInternal'+'Format']),null;let _0x955b7b=-0x7b+0x2342+-0x22b7+_0x40d1b2['bytesOfKey'+'ValueData']/(-0x1b22+0xc1a+-0x6b*-0x24);const _0x55c12e=_0x40d1b2['numberOfFa'+'ces']>0x66f+-0x22d5+0x1c67,_0x4a08fb=[];for(let _0x41636e=0x222a*0x1+-0x2232+0x8;_0x41636e<(_0x40d1b2['numberOfMi'+'pmapLevels']||-0x182d+-0x2*0x1229+-0x40*-0xf2);_0x41636e++){const _0x52f452=_0x52e339[_0x955b7b++];_0x55c12e&&_0x4a08fb['push']([]);const _0x3d4ea3=_0x55c12e?_0x4a08fb[_0x41636e]:_0x4a08fb;for(let _0x5ecf3b=-0x1eab+-0x65e+-0x1f3*-0x13;_0x5ecf3b<(_0x55c12e?0x1*-0x18e2+-0x1177*0x1+0x2a5f:-0x213a+0x1e0e+-0x3*-0x10f);++_0x5ecf3b)_0x3d4ea3['push'](gk(_0x2c05b2,_0x19bef1,_0x955b7b*(0x42+0x22f2+-0x2330),_0x52f452)),_0x955b7b+=_0x52f452+(-0x1735+0x1c02+-0x4ca)>>0xad4+-0x7fa+0x2d8*-0x1;}return{'format':_0x2c05b2,'width':_0x40d1b2['pixelWidth'],'height':_0x40d1b2['pixelHeigh'+'t'],'levels':_0x4a08fb,'cubemap':_0x55c12e};}}const yk={'KHR_DF_MODEL_UASTC':0xa6};class vk extends qn{constructor(_0x5567e7,_0x2e369d){super(),this['maxRetries']=0x1*-0xf92+0xd63+-0xd*-0x2b,this['device']=_0x2e369d;}['load'](_0x24888d,_0x29df37,_0x1fb870){pe['fetchArray'+'Buffer'](_0x24888d['load'],(_0x53f9f7,_0x2456cb)=>{_0x53f9f7?_0x29df37(_0x53f9f7,_0x2456cb):this['parse'](_0x2456cb,_0x24888d,_0x29df37,_0x1fb870);},_0x1fb870,this['maxRetries']);}['open'](_0x204178,_0xe50b25,_0x3853c,_0xe65f93={}){const _0x1c2789=_0xe65f93['srgb']?zh(_0xe50b25['format']):_0xe50b25['format'],_0x4d9fac=new _e(_0x3853c,{'name':_0x204178,'profilerHint':Er,'addressU':_0xe50b25['cubemap']?ue:yt,'addressV':_0xe50b25['cubemap']?ue:yt,'width':_0xe50b25['width'],'height':_0xe50b25['height'],'format':_0x1c2789,'cubemap':_0xe50b25['cubemap'],'levels':_0xe50b25['levels'],..._0xe65f93});return _0x4d9fac['upload'](),_0x4d9fac;}['parse'](_0x44f883,_0x1bf37a,_0x49d856,_0x1e499e){var _0x115ebc,_0x1ab3c7,_0x51caff;const _0x1492d9=new pS(_0x44f883),_0x8f83f=[_0x1492d9['readU32be'](),_0x1492d9['readU32be'](),_0x1492d9['readU32be']()];if(_0x8f83f[-0xa2*0x2f+-0x4b*-0x1+0x7*0x435]!==-0x15162d551+-0x69*-0x2f47ea4+-0xc6663865*-0x1||_0x8f83f[0x2656*-0x1+0x8*-0x4d8+0x4d17]!==-0x1de6a765+0x8d7ba09+0x35411e17||_0x8f83f[0x324+-0x6ab+0x1*0x389]!==-0x4ed27f*0x16+-0x5*-0x3e67c89+-0xcfb*-0x625)return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX2\x20'+'file.\x20Expe'+'cted\x200xAB4'+'B5458,\x200x2'+'03131BB,\x200'+'x0D0A1A0A'),null;const _0x5a71c1={'vkFormat':_0x1492d9['readU32'](),'typeSize':_0x1492d9['readU32'](),'pixelWidth':_0x1492d9['readU32'](),'pixelHeight':_0x1492d9['readU32'](),'pixelDepth':_0x1492d9['readU32'](),'layerCount':_0x1492d9['readU32'](),'faceCount':_0x1492d9['readU32'](),'levelCount':_0x1492d9['readU32'](),'supercompressionScheme':_0x1492d9['readU32']()},_0x301e13={'dfdByteOffset':_0x1492d9['readU32'](),'dfdByteLength':_0x1492d9['readU32'](),'kvdByteOffset':_0x1492d9['readU32'](),'kvdByteLength':_0x1492d9['readU32'](),'sgdByteOffset':_0x1492d9['readU64'](),'sgdByteLength':_0x1492d9['readU64']()},_0x1b2557=[];for(let _0x51e932=0x617*-0x3+0x269a+0x1455*-0x1;_0x51e932<Math['max'](-0x244c+0x119*0x11+0x469*0x4,_0x5a71c1['levelCount']);++_0x51e932)_0x1b2557['push']({'byteOffset':_0x1492d9['readU64'](),'byteLength':_0x1492d9['readU64'](),'uncompressedByteLength':_0x1492d9['readU64']()});if(_0x1492d9['readU32']()!==_0x301e13['kvdByteOff'+'set']-_0x301e13['dfdByteOff'+'set'])return w['warn']('Invalid\x20fi'+'le\x20data\x20en'+'countered.'),null;_0x1492d9['skip'](-0x778+-0x264f+0x2dcf);const _0x455a83=_0x1492d9['readU8']();_0x1492d9['skip'](_0x301e13['dfdByteLen'+'gth']-(0x3*0xa2f+-0x712+0x2*-0xbb9)),_0x1492d9['skip'](_0x301e13['kvdByteLen'+'gth']),_0x5a71c1['supercompr'+'essionSche'+'me']===0x78b*0x5+0x2378+-0x492e||_0x455a83===yk['KHR_DF_MOD'+'EL_UASTC']?Hv(this['device'],_0x1bf37a['load'],_0x44f883,_0x49d856,{'isGGGR':(((_0x51caff=(_0x1ab3c7=(_0x115ebc=_0x1e499e==null?void(0x1*0x1201+-0x14ad+0xab*0x4):_0x1e499e['file'])==null?void(-0x3*0x3a5+-0x21b+0xd0a*0x1):_0x115ebc['variants'])==null?void(-0x9*-0x41c+-0x2355+0x1*-0x1a7):_0x1ab3c7['basis'])==null?void(0x75*-0x25+0x1*-0x8f9+0x19e2):_0x51caff['opt'])&-0x3*0xb07+-0x1583*0x1+0x36a0)!==-0x2272+-0x3*0x7f+0x23ef,'isKTX2':!(0x96b*-0x1+0x1af*0x5+0x100)})||_0x49d856('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x1e499e['name']+']('+_0x1e499e['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.')):_0x49d856('unsupporte'+'d\x20KTX2\x20pix'+'el\x20format');}}class xk extends qn{constructor(_0x2fba3a){super(),this['maxRetries']=0x22c2+-0x715*-0x2+0x2*-0x1876;}['load'](_0x151801,_0x1f336d,_0x67a898){pe['fetchArray'+'Buffer'](_0x151801['load'],_0x1f336d,_0x67a898,this['maxRetries']);}['open'](_0x4d4384,_0x117040,_0x3bdc07,_0x12e995={}){const _0x1e41fd=new Uint32Array(_0x117040,-0x49*0x31+-0x1efd*0x1+0x2cf6,0x1697+0x453+0x8ee*-0x3),_0xbd5408=_0x1e41fd[-0x22*0x71+0xb*0x44+0xc1a],_0x29deda=_0x1e41fd[-0x225+-0xc94+0xebc],_0x58746c=Math['max'](_0x1e41fd[-0xffc+0x2*-0x54b+0x1a99],-0x6b2*0x3+-0x43+0x145a),_0x3cee0a=_0x1e41fd[0x1f68+0x2*0x2e5+-0x251e]===0x727*-0x2+-0x1d48*-0x1+0x5*-0x2fe,_0x3747e4=_0x1e41fd[0x10af+0xa7d+-0x1b17],_0x3f8b6d=_0x1e41fd[0x1dce+0x5*-0x57c+-0x24c],_0x499045=_0x1e41fd[0xd81*0x2+-0x1*-0xd03+-0x1*0x27e9]===0x7573+-0x25c3*0x2+0xd413*0x1,_0x3f24fb=0x43896c25+-0xe8194c3+-0x3b37f1e,_0x351649=0xd*-0x6b4a841+-0x26880e81+0xb308f212,_0x1b961f=-0x347+0x176a+-0x13b2,_0x843326=-0x2573+-0x1*-0x2225+0x25*0x1a,_0x28db75=0x5149781f+-0x5840fe4a+0xe0eb69c*0x4,_0x433516=-0x34cdf9cd+-0x58c3d5ca+0x1556f*0x8f09,_0x387d5f=0x13fd6704+0x102e*0x24927+-0x7c4c9b6,_0x4211ad=0x126738a9+-0x1515d1c0+0x33e1cd67*0x1,_0x2b61e5=0xbcaa0a*-0x6b+0x59*-0x70fdf1+-0xf021*-0xb267;let _0x31a255=!(-0x82+0x1e32+-0x1daf),_0x5201dd=!(-0x1c85+-0x258e+-0x1*-0x4214),_0x39f10c=!(-0x1ba0+0x20b7+0xba*-0x7),_0x5853ae=!(-0x1de5*-0x1+0x1d47+-0x3b2b),_0x1c51c9=null,_0x2bd8a7=0x241c*-0x1+0x2056+0x1*0x3c7,_0x2e78a2;if(_0x3cee0a?_0x3747e4===_0x3f24fb?(_0x1c51c9=Rh,_0x31a255=!(-0x1540+0x1884+0x2c*-0x13)):_0x3747e4===_0x351649?(_0x1c51c9=ol,_0x31a255=!(-0x19f9+0x3ae*-0x1+-0x1*-0x1da7)):_0x3747e4===_0x1b961f?(_0x1c51c9=nt,_0x2bd8a7=0x1*0x17c7+0xe36+-0x25fb):_0x3747e4===_0x843326?(_0x1c51c9=Xt,_0x2bd8a7=-0x40a*-0x2+-0x81*0x1f+-0x81*-0xf):_0x3747e4===_0x28db75?(_0x1c51c9=Fh,_0x31a255=!(0x2065*0x1+0x17*0x131+-0x3bcc),_0x5201dd=!(-0xaf*-0x2+0x30d*-0xb+0x2031)):_0x3747e4===_0x433516||_0x3747e4===_0x387d5f?(_0x1c51c9=_0x3747e4===_0x433516?ll:cl,_0x31a255=!(-0x216b+0x1935+0x2*0x41b),_0x39f10c=!(-0x158f+0xda*0xd+-0x5*-0x219)):(_0x3747e4===_0x4211ad||_0x3747e4===_0x2b61e5)&&(_0x1c51c9=_0x3747e4===_0x4211ad?Nh:kh,_0x31a255=!(-0x1da+-0xd*0x1e9+0x1aaf),_0x5853ae=!(0x264c+0xedd+-0x3529)):_0x3f8b6d===0xe95*-0x1+0x148f+0xe*-0x6b&&(_0x1c51c9=Ne),!_0x1c51c9)return w['error']('This\x20DDS\x20p'+'ixel\x20forma'+'t\x20is\x20curre'+'ntly\x20unsup'+'ported.\x20Em'+'pty\x20textur'+'e\x20will\x20be\x20'+'created\x20in'+'stead\x20of\x20'+_0x4d4384+'.'),_0x2e78a2=new _e(_0x3bdc07,{'width':0x4,'height':0x4,'format':wr,'name':'dds-legacy'+'-empty'}),_0x2e78a2;_0x2e78a2=new _e(_0x3bdc07,{'name':_0x4d4384,'profilerHint':Er,'addressU':_0x499045?ue:yt,'addressV':_0x499045?ue:yt,'width':_0xbd5408,'height':_0x29deda,'format':_0x1c51c9,'cubemap':_0x499045,'mipmaps':_0x58746c>-0xb*0xf1+-0x2*0x5d+0xb16,..._0x12e995});let _0x11ea61=0x72e*-0x1+-0x83d+0xfeb;const _0x43f63d=_0x499045?0x13b+-0x5f*0x4+0x47:-0x22a*0x2+-0x2393+0x27e8;let _0x40dcfe;const _0x4c51f9=-0xff4+-0x1*-0x24f5+-0x14fd,_0x44c82c=0x1842+0x1843+-0x3*0x102b,_0x432bf1=_0x3747e4===_0x3f24fb?-0x2*0x129d+-0x1a46+-0x1ac*-0x26:0xcfe+0x4a2*0x1+-0x1190;let _0x326a41,_0x5b4442,_0x375e4d;for(let _0x3a0665=0x2d8+0x280*-0x6+0xc28;_0x3a0665<_0x43f63d;_0x3a0665++){let _0x147118=_0xbd5408,_0xb5e6d9=_0x29deda;for(let _0x46cadf=0x2278+0x3f*0x53+-0x36e5;_0x46cadf<_0x58746c;_0x46cadf++){_0x31a255?_0x5201dd?_0x40dcfe=Math['floor']((_0x147118+(-0x1f6*0x12+-0x97e+0x2ccd))/(0x10*0xa3+0x15*-0x150+0x1164))*Math['floor']((_0xb5e6d9+(0x1*-0x6fa+-0x12d+-0x415*-0x2))/(0x614+0x1938+0x9a*-0x34))*(0x4a+-0x1*0x16a5+0xb*0x209):_0x39f10c?_0x40dcfe=Math['max'](_0x147118,0x225c+0x1ec8+-0x4114)*Math['max'](_0xb5e6d9,0x1888+0x7*0x329+-0x2e9f)/(-0xd6d+-0x6d7*0x4+0x28cd):_0x5853ae?_0x40dcfe=Math['max'](_0x147118,-0x19b2+0x761+0x1ab*0xb)*Math['max'](_0xb5e6d9,0x13da+-0xb*-0x6d+0x3*-0x82b)/(-0x288+-0x1*-0x9af+-0x725):(_0x326a41=Math['floor']((_0x147118+_0x4c51f9-(-0x1ba6+0xc18*0x1+0x239*0x7))/_0x4c51f9),_0x5b4442=Math['floor']((_0xb5e6d9+_0x44c82c-(0x1ee8+0xf61*-0x1+-0xf86))/_0x44c82c),_0x375e4d=_0x326a41*_0x5b4442,_0x40dcfe=_0x375e4d*_0x432bf1):_0x40dcfe=_0x147118*_0xb5e6d9*(-0x9d*-0x33+-0x669*0x2+-0x1271);const _0x5ed5cd=_0x1c51c9===Xt?new Float32Array(_0x117040,_0x11ea61,_0x40dcfe):_0x1c51c9===nt?new Uint16Array(_0x117040,_0x11ea61,_0x40dcfe):new Uint8Array(_0x117040,_0x11ea61,_0x40dcfe);_0x499045?(_0x2e78a2['_levels'][_0x46cadf]||(_0x2e78a2['_levels'][_0x46cadf]=[]),_0x2e78a2['_levels'][_0x46cadf][_0x3a0665]=_0x5ed5cd):_0x2e78a2['_levels'][_0x46cadf]=_0x5ed5cd,_0x11ea61+=_0x40dcfe*_0x2bd8a7,_0x147118=Math['max'](_0x147118*(0x1074+-0x38b*0x1+-0xce9+0.5),0x71+0x1*0x5b3+-0x623),_0xb5e6d9=Math['max'](_0xb5e6d9*(-0x2570+0x11ab+0x13c5+0.5),-0x2a5+0x1*0x2356+-0x20b0);}}return _0x2e78a2['upload'](),_0x2e78a2;}}class Tk extends qn{constructor(_0x4f3ede){super(),this['maxRetries']=0x2cb*-0x3+0x17c9+0x1d*-0x88;}['load'](_0x1e86ad,_0x207b0c,_0xf0551e){pe['fetchArray'+'Buffer'](_0x1e86ad['load'],_0x207b0c,_0xf0551e,this['maxRetries']),_0xf0551e['data']&&!_0xf0551e['data']['type']&&(_0xf0551e['data']['type']=qc);}['open'](_0x4814e6,_0x2281da,_0x2d84c6,_0x42ac34={}){const _0x58489=this['parse'](_0x2281da);if(!_0x58489)return null;const _0x1b4467=new _e(_0x2d84c6,{'name':_0x4814e6,'profilerHint':Er,'addressU':yt,'addressV':ue,'minFilter':Te,'magFilter':Te,'width':_0x58489['width'],'height':_0x58489['height'],'levels':_0x58489['levels'],'format':Ne,'type':qc,'mipmaps':!(-0x1789+0x2515+-0x1*0xd8b),..._0x42ac34});return _0x1b4467['upload'](),_0x1b4467;}['parse'](_0xfbe5ae){const _0x4dbad9=new pS(_0xfbe5ae);if(!_0x4dbad9['readLine']()['startsWith']('#?RADIANCE'))return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20ma'+'gic'),null;const _0x2ad00f={};for(;;){const _0xf45806=_0x4dbad9['readLine']();if(_0xf45806['length']===-0x1312*0x2+-0x1*-0x173f+0x1f*0x7b)break;{const _0x437875=_0xf45806['split']('=');_0x437875['length']===-0x4*-0x927+-0x2451+-0x49*0x1&&(_0x2ad00f[_0x437875[-0xb3e+0xb74+-0x36]]=_0x437875[0x1*-0x1835+-0x177f+0x45*0xb1]);}}if(!_0x2ad00f['hasOwnProp'+'erty']('FORMAT'))return w['error']('radiance\x20h'+'eader\x20miss'+'ing\x20FORMAT'+'\x20variable'),null;const _0x2d1a1a=_0x4dbad9['readLine']()['split']('\x20');if(_0x2d1a1a['length']!==-0x362*-0x7+0x8*-0x46c+0xbb6)return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20re'+'solution'),null;const _0x20750b=parseInt(_0x2d1a1a[-0x16ca+-0x89f+0x1f6a],-0x80d+-0xfab+0xbe1*0x2),_0x360d9a=parseInt(_0x2d1a1a[0x163e+-0x1c6+-0x1475],0x1964+0x13ba+-0x2d14),_0x59d543=this['_readPixel'+'s'](_0x4dbad9,_0x360d9a,_0x20750b,_0x2d1a1a[-0x5*0x617+0x1de9*-0x1+0x2*0x1e2e]==='-Y');return _0x59d543?{'width':_0x360d9a,'height':_0x20750b,'levels':[_0x59d543]}:null;}['_readPixel'+'s'](_0x450fb7,_0x4d6d24,_0xaf8e92,_0x1f668f){if(_0x4d6d24<-0x1029*0x1+-0xd*0x18b+0x2440||_0x4d6d24>0x518d+0x9411*-0x1+-0x26e7*-0x5)return this['_readPixel'+'sFlat'](_0x450fb7,_0x4d6d24,_0xaf8e92);const _0x508ea5=[-0x25ed+0x185a*0x1+0xd93,0x1b8+0x1*-0x2009+0x1e51,0x2*0x10d3+-0x2646+-0x128*-0x4,-0x161*0x11+-0x1*-0xd3d+0xa34];if(_0x450fb7['readArray'](_0x508ea5),_0x508ea5[-0x1f61+0x1*0xa31+0xa98*0x2]!==0x1547+0x16bb*-0x1+0x176||_0x508ea5[-0x54*-0x42+0x1a80+0x3*-0x100d]!==-0x20e3*0x1+-0x1*-0x14fd+-0x17d*-0x8||(_0x508ea5[-0x1*-0x3ac+0x2447*0x1+0x7fd*-0x5]&0x2404+0x1*0x10af+0x245*-0x17)!==-0x95*0x8+-0x239e+0x2846*0x1)return _0x450fb7['skip'](-(-0x1d*-0x7+0x3*-0x3bb+0x2b*0x3e)),this['_readPixel'+'sFlat'](_0x450fb7,_0x4d6d24,_0xaf8e92);const _0x24a898=new ArrayBuffer(_0x4d6d24*_0xaf8e92*(0x4a1*-0x5+-0xb0d*-0x1+0xc1c)),_0x5c7b75=new Uint8Array(_0x24a898);let _0x4bc857=_0x1f668f?-0x83b+-0x1*0x5ab+0xde6:_0x4d6d24*(-0x64a+0x13a3+-0x1*0xd55)*(_0xaf8e92-(-0xa55*0x3+-0x503+0x3*0xc01)),_0x11b8d2,_0x3935b5,_0x59791f,_0x5bda4a,_0x1f5a8b,_0x1e8c60;for(_0x3935b5=0x1f01*-0x1+-0xcf7*0x1+0x2bf8;_0x3935b5<_0xaf8e92;++_0x3935b5){if(_0x3935b5&&_0x450fb7['readArray'](_0x508ea5),(_0x508ea5[-0x251a+0x1*-0x16c9+-0x327*-0x13]<<-0xc2*0x3+0x4b9+-0x26b)+_0x508ea5[-0x145f+0x542*0x7+-0x106c]!==_0x4d6d24)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'width'),null;for(_0x5bda4a=0x25ef+0x1af6+-0x40e5;_0x5bda4a<0x12f4+0x1bdc+-0x2ecc;++_0x5bda4a)for(_0x11b8d2=-0x83*-0x1+0x267c+-0x26ff;_0x11b8d2<_0x4d6d24;)if(_0x1f5a8b=_0x450fb7['readU8'](),_0x1f5a8b>0x1478+0xe2*-0x17+-0x2b*-0x2){if(_0x1f5a8b-=0x43+-0x38c+-0x39*-0x11,_0x11b8d2+_0x1f5a8b>_0x4d6d24)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x1e8c60=_0x450fb7['readU8'](),_0x59791f=0x18ff+-0x24a5+-0x3*-0x3e2;_0x59791f<_0x1f5a8b;++_0x59791f)_0x5c7b75[_0x4bc857+_0x5bda4a+(-0x250*-0x3+0x1*0x859+-0xf45)*_0x11b8d2++]=_0x1e8c60;}else{if(_0x1f5a8b===-0x1ad2+0x44f+-0x1683*-0x1||_0x11b8d2+_0x1f5a8b>_0x4d6d24)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x59791f=0x94*0x5+0x1dbe+-0x1051*0x2;_0x59791f<_0x1f5a8b;++_0x59791f)_0x5c7b75[_0x4bc857+_0x5bda4a+(-0x1e87+-0xd*-0x27+0x1c90)*_0x11b8d2++]=_0x450fb7['readU8']();}_0x4bc857+=_0x4d6d24*(-0xf15+0x2468+0x1*-0x154f)*(_0x1f668f?0x14b*0x5+0x2169+-0x27df*0x1:-(-0x26b6+-0x1892+0x3b9*0x11));}return _0x5c7b75;}['_readPixel'+'sFlat'](_0x363975,_0x1d05b2,_0x5f4089){return _0x363975['remainingB'+'ytes']===_0x1d05b2*_0x5f4089*(-0x1*0x97+0x2*0xc22+-0x17a9)?new Uint8Array(_0x363975['arraybuffe'+'r'],_0x363975['offset']):null;}}const qg={'repeat':yt,'clamp':ue,'mirror':Du},jg={'nearest':Te,'linear':vt,'nearest_mip_nearest':Ph,'linear_mip_nearest':Dh,'nearest_mip_linear':Mh,'linear_mip_linear':ha},wk={'default':Ms,'rgbm':Ki,'rgbe':qc,'rgbp':Bo,'swizzleGGGR':zo},Ek=function(_0x8e5b53){const _0x48f99d=$i['calcMipLev'+'elsCount'](_0x8e5b53['_width'],_0x8e5b53['_height']),_0x3aec89=function(_0x2511c2){return _0x2511c2 instanceof HTMLCanvasElement||_0x2511c2 instanceof HTMLImageElement||_0x2511c2 instanceof HTMLVideoElement;};if(!(_0x8e5b53['_format']===Ne||_0x8e5b53['_format']===Xt)||_0x8e5b53['_volume']||_0x8e5b53['_compresse'+'d']||_0x8e5b53['_levels']['length']===0x1846+0x517+-0x757*0x4||_0x8e5b53['_levels']['length']===_0x48f99d||_0x3aec89(_0x8e5b53['_cubemap']?_0x8e5b53['_levels'][-0x16f3+0xf*0x279+-0xe24][-0xdc2+0x11f6+0x4*-0x10d]:_0x8e5b53['_levels'][-0x1*-0x11e3+0x1918+-0x1*0x2afb]))return;const _0x2fccae=function(_0xf39827,_0x49a699,_0x138be2){const _0xaf900b=Math['max'](0x53+-0x9*0x229+0x131f,_0xf39827>>0x22f*-0xd+0x2509+-0x8a5),_0x56f058=Math['max'](0x2273+0x1*0x246b+-0x46dd,_0x49a699>>-0x1*-0x351+0xac1+0x115*-0xd),_0x1ebf84=new _0x138be2['constructo'+'r'](_0xaf900b*_0x56f058*(0xaf*-0x1f+0xf92+0x5a3)),_0x148b66=Math['floor'](_0xf39827/_0xaf900b),_0x1ad18d=Math['floor'](_0x49a699/_0x56f058),_0x2d70e0=_0x148b66*_0x1ad18d;for(let _0x29648f=0x74b*0x5+-0x1cf8+-0x1*0x77f;_0x29648f<_0x56f058;++_0x29648f)for(let _0x4ff19e=-0x1fdd*-0x1+-0x13*0x169+-0x289*0x2;_0x4ff19e<_0xaf900b;++_0x4ff19e)for(let _0x454da6=0x18cc+-0x5*0x5a7+0x377;_0x454da6<0x2240+-0x20c*0x11+-0x6*-0x18;++_0x454da6){let _0x3556a4=0x1e1d+-0x1*0x1ad9+-0x344;for(let _0x10202f=0x26e9+-0x23c1*0x1+0x4*-0xca;_0x10202f<_0x1ad18d;++_0x10202f)for(let _0x35d34c=0x1175*0x1+-0x5d2+-0xba3;_0x35d34c<_0x148b66;++_0x35d34c)_0x3556a4+=_0x138be2[(_0x4ff19e*_0x148b66+_0x35d34c+(_0x29648f*_0x1ad18d+_0x10202f)*_0xf39827)*(0xf96+-0x2d1*0x7+0x425*0x1)+_0x454da6];_0x1ebf84[(_0x4ff19e+_0x29648f*_0xaf900b)*(0x10e0+0x5*-0x491+0x5f9*0x1)+_0x454da6]=_0x3556a4/_0x2d70e0;}return _0x1ebf84;};for(let _0x1bdbcb=_0x8e5b53['_levels']['length'];_0x1bdbcb<_0x48f99d;++_0x1bdbcb){const _0x5755eb=Math['max'](-0x949+0x242e+-0x1ae4,_0x8e5b53['_width']>>_0x1bdbcb-(-0x136a+-0x193*-0x17+-0x10ca*0x1)),_0x1d3562=Math['max'](0x1*0xb65+-0x1*-0x22cd+-0x93d*0x5,_0x8e5b53['_height']>>_0x1bdbcb-(-0x35*0x9c+0x19*-0x142+0x3fbf*0x1));if(_0x8e5b53['_cubemap']){const _0x5db87a=[];for(let _0x58c18a=-0x1c4f+0x1*-0x16de+0x332d;_0x58c18a<-0xfff+0x103+0xf02;++_0x58c18a)_0x5db87a['push'](_0x2fccae(_0x5755eb,_0x1d3562,_0x8e5b53['_levels'][_0x1bdbcb-(-0x434*-0x2+0x3df*0x1+-0xc46)][_0x58c18a]));_0x8e5b53['_levels']['push'](_0x5db87a);}else _0x8e5b53['_levels']['push'](_0x2fccae(_0x5755eb,_0x1d3562,_0x8e5b53['_levels'][_0x1bdbcb-(-0x630+-0xc91*-0x1+0x660*-0x1)]));}_0x8e5b53['_levelsUpd'+'ated']=_0x8e5b53['_cubemap']?[[!(-0xe90+-0x93f*-0x2+-0x3ee*0x1),!(-0xa1*-0x37+-0x24a7+-0x84*-0x4),!(-0x20e6+0x149d*-0x1+0x67*0x85),!(0xd2e+-0x107*0x21+0x14b9),!(0x3e0+-0x7f3+0x1*0x413),!(0x1f1c+0x1b37+0x15*-0x2c7)]]:[!(0x1f*-0x132+0x254e+-0x40)];};class bk extends Qe{constructor(_0x1d7867){super(_0x1d7867,'texture');const _0x1772cb=_0x1d7867['assets'],_0x38d3ee=_0x1d7867['graphicsDe'+'vice'];this['_device']=_0x38d3ee,this['_assets']=_0x1772cb,this['imgParser']=new mk(_0x1772cb,_0x38d3ee),this['parsers']={'dds':new xk(_0x1772cb),'ktx':new Sk(_0x1772cb),'ktx2':new vk(_0x1772cb,_0x38d3ee),'basis':new dk(_0x1772cb,_0x38d3ee),'hdr':new Tk(_0x1772cb)};}set['crossOrigi'+'n'](_0x27a4da){this['imgParser']['crossOrigi'+'n']=_0x27a4da;}get['crossOrigi'+'n'](){return this['imgParser']['crossOrigi'+'n'];}set['maxRetries'](_0x5ba5a8){this['imgParser']['maxRetries']=_0x5ba5a8;for(const _0x2b096f in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x2b096f)&&(this['parsers'][_0x2b096f]['maxRetries']=_0x5ba5a8);}get['maxRetries'](){return this['imgParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x13b0a8){return _0x13b0a8['indexOf']('?')>=-0x4*-0x231+0x11*-0x125+0xab1?_0x13b0a8['split']('?')[0x806+-0x578+-0x28e]:_0x13b0a8;}['_getParser'](_0xa319d3){const _0x2770a4=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0xa319d3))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x2770a4]||this['imgParser'];}['_getTextur'+'eOptions'](_0x259597){var _0x24d55c;const _0x209e29={'profilerHint':Er};if(_0x259597){((_0x24d55c=_0x259597['name'])==null?void(-0x10*0xcb+0x1*0x16c3+0x1*-0xa13):_0x24d55c['length'])>0xcab+0x13*-0xe9+0x10*0x4a&&(_0x209e29['name']=_0x259597['name']);const _0x45228c=_0x259597['data'];_0x45228c['hasOwnProp'+'erty']('minfilter')&&(_0x209e29['minFilter']=jg[_0x45228c['minfilter']]),_0x45228c['hasOwnProp'+'erty']('magfilter')&&(_0x209e29['magFilter']=jg[_0x45228c['magfilter']]),_0x45228c['hasOwnProp'+'erty']('addressu')&&(_0x209e29['addressU']=qg[_0x45228c['addressu']]),_0x45228c['hasOwnProp'+'erty']('addressv')&&(_0x209e29['addressV']=qg[_0x45228c['addressv']]),_0x45228c['hasOwnProp'+'erty']('mipmaps')&&(_0x209e29['mipmaps']=_0x45228c['mipmaps']),_0x45228c['hasOwnProp'+'erty']('anisotropy')&&(_0x209e29['anisotropy']=_0x45228c['anisotropy']),_0x45228c['hasOwnProp'+'erty']('flipY')&&(_0x209e29['flipY']=!!_0x45228c['flipY']),_0x45228c['hasOwnProp'+'erty']('srgb')&&(_0x209e29['srgb']=!!_0x45228c['srgb']),_0x209e29['type']=Ms,_0x45228c['hasOwnProp'+'erty']('type')?_0x209e29['type']=wk[_0x45228c['type']]:_0x45228c['hasOwnProp'+'erty']('rgbm')&&_0x45228c['rgbm']?_0x209e29['type']=Ki:_0x259597['file']&&(_0x259597['file']['opt']&-0x1dda+0x6a*0x2b+-0x2*-0x60a)!==0x235c*-0x1+0xad0+0x4*0x623&&(_0x209e29['type']=zo);}return _0x209e29;}['load'](_0x1b612b,_0x149f03,_0x3238ca){typeof _0x1b612b=='string'&&(_0x1b612b={'load':_0x1b612b,'original':_0x1b612b}),this['_getParser'](_0x1b612b['original'])['load'](_0x1b612b,_0x149f03,_0x3238ca);}['open'](_0x27a01c,_0x376458,_0x470c1d){if(!_0x27a01c)return;const _0x57dc5f=this['_getTextur'+'eOptions'](_0x470c1d);let _0x307552=this['_getParser'](_0x27a01c)['open'](_0x27a01c,_0x376458,this['_device'],_0x57dc5f);return _0x307552===null?_0x307552=new _e(this['_device'],{'width':0x4,'height':0x4,'format':wr}):(Ek(_0x307552),_0x376458['unswizzled'+'GGGR']&&(_0x470c1d['file']['variants']['basis']['opt']&=-(-0x1*0x243e+0xb8f+0x1c*0xe2))),_0x307552;}['patch'](_0x5f472d,_0x3bd817){const _0x203ec2=_0x5f472d['resource'];if(!_0x203ec2)return;const _0x2ca41d=this['_getTextur'+'eOptions'](_0x5f472d);for(const _0x4bcf1a of Object['keys'](_0x2ca41d))_0x203ec2[_0x4bcf1a]=_0x2ca41d[_0x4bcf1a];}}const Ak='inline',Ck='immersive-'+'vr',Ro='immersive-'+'ar',Yg='viewer',Pk='left',Mk='cpu-optimi'+'zed',Xv='gpu-optimi'+'zed',qv='luminance-'+'alpha',jv='unsigned-s'+'hort',Yv='float32';class Dk{constructor(_0x5e0cb2){h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRDOMOverl'+'ayState']),h(this,'_root',null),this['_manager']=_0x5e0cb2;}get['supported'](){return this['_supported'];}get['available'](){return this['_supported']&&this['_manager']['active']&&this['_manager']['_session']['domOverlay'+'State']!==null;}get['state'](){return!this['_supported']||!this['_manager']['active']||!this['_manager']['_session']['domOverlay'+'State']?null:this['_manager']['_session']['domOverlay'+'State']['type'];}set['root'](_0x1bbf42){!this['_supported']||this['_manager']['active']||(this['_root']=_0x1bbf42);}get['root'](){return this['_root'];}}const yc=[],Kg=[];class Tu extends me{constructor(_0x363acd,_0x3820b7,_0x18821a,_0x4f117a=null){super(),h(this,'manager'),h(this,'_xrHitTest'+'Source'),h(this,'_transient'),h(this,'_inputSour'+'ce'),(this['manager']=_0x363acd,this['_xrHitTest'+'Source']=_0x3820b7,this['_transient']=_0x18821a,this['_inputSour'+'ce']=_0x4f117a);}['remove'](){if(!this['_xrHitTest'+'Source'])return;const _0x5e68de=this['manager']['hitTest']['sources'],_0xcc964=_0x5e68de['indexOf'](this);_0xcc964!==-(-0x86b+-0x2220+0x2a8c)&&_0x5e68de['splice'](_0xcc964,0x2613+0x23f5+-0x4a07),this['onStop']();}['onStop'](){this['_xrHitTest'+'Source']['cancel'](),this['_xrHitTest'+'Source']=null,this['fire']('remove'),this['manager']['hitTest']['fire']('remove',this);}['update'](_0x419bf0){if(this['_transient']){const _0x27807a=_0x419bf0['getHitTest'+'ResultsFor'+'TransientI'+'nput'](this['_xrHitTest'+'Source']);for(let _0xa3231f=0x9e*-0x29+0x2531+-0x11*0xb3;_0xa3231f<_0x27807a['length'];_0xa3231f++){const _0x4a379d=_0x27807a[_0xa3231f];if(!_0x4a379d['results']['length'])continue;let _0x3983e6;_0x4a379d['inputSourc'+'e']&&(_0x3983e6=this['manager']['input']['_getByInpu'+'tSource'](_0x4a379d['inputSourc'+'e'])),this['updateHitR'+'esults'](_0x4a379d['results'],_0x3983e6);}}else{const _0xec73fc=_0x419bf0['getHitTest'+'Results'](this['_xrHitTest'+'Source']);if(!_0xec73fc['length'])return;this['updateHitR'+'esults'](_0xec73fc);}}['updateHitR'+'esults'](_0x3e0564,_0x14f3f2){if(this['_inputSour'+'ce']&&this['_inputSour'+'ce']!==_0x14f3f2)return;const _0x53185d=yc['pop']()??new D();_0x14f3f2?_0x53185d['copy'](_0x14f3f2['getOrigin']()):_0x53185d['copy'](this['manager']['camera']['getPositio'+'n']());let _0x1eb850=(0x6d5*-0x1+0x15a7+-0xed1)/(-0x14d0+0xd51+0x77f),_0x666b18=null;const _0x237576=yc['pop']()??new D(),_0x246f86=Kg['pop']()??new le();for(let _0x25223c=0x20*0x88+-0x1*0x1307+0x207;_0x25223c<_0x3e0564['length'];_0x25223c++){const _0x4ce286=_0x3e0564[_0x25223c]['getPose'](this['manager']['_reference'+'Space']),_0x328d79=_0x53185d['distance'](_0x4ce286['transform']['position']);_0x328d79>=_0x1eb850||(_0x1eb850=_0x328d79,_0x666b18=_0x3e0564[_0x25223c],_0x237576['copy'](_0x4ce286['transform']['position']),_0x246f86['copy'](_0x4ce286['transform']['orientatio'+'n']));}this['fire']('result',_0x237576,_0x246f86,_0x14f3f2||this['_inputSour'+'ce'],_0x666b18),this['manager']['hitTest']['fire']('result',this,_0x237576,_0x246f86,_0x14f3f2||this['_inputSour'+'ce'],_0x666b18),yc['push'](_0x53185d),yc['push'](_0x237576),Kg['push'](_0x246f86);}}h(Tu,'EVENT_REMO'+'VE','remove'),h(Tu,'EVENT_RESU'+'LT','result');class Wr extends me{constructor(_0xd0f81c){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!(window['XRSession']&&window['XRSession']['prototype']['requestHit'+'TestSource'])),h(this,'_available',!(0x1*-0x1d37+-0x54a*-0x2+0x1*0x12a4)),h(this,'_checkingA'+'vailabilit'+'y',!(-0x11b4+0x160d+-0x458)),h(this,'sources',[]),(this['manager']=_0xd0f81c,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){if(this['manager']['session']['enabledFea'+'tures']){const _0x512c1d=this['manager']['session']['enabledFea'+'tures']['indexOf']('hit-test')!==-(-0xc93+0xb87+0x1*0x10d);if(!_0x512c1d)return;this['_available']=_0x512c1d,this['fire']('available');}else this['_checkingA'+'vailabilit'+'y']||(this['_checkingA'+'vailabilit'+'y']=!(-0x1e05+-0x18c1+-0x13*-0x2e2),this['manager']['session']['requestRef'+'erenceSpac'+'e'](Yg)['then'](_0x47c30b=>{this['manager']['session']['requestHit'+'TestSource']({'space':_0x47c30b})['then'](_0x28093f=>{_0x28093f['cancel'](),this['manager']['active']&&(this['_available']=!(-0x1fb5+-0x35*-0x79+0x6a8),this['fire']('available'));})['catch'](()=>{});})['catch'](()=>{}));}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x19ea+0x2472+0x3e5b*-0x1);for(let _0x4da076=-0x24*0x51+0x2*-0x22c+0x13*0xd4;_0x4da076<this['sources']['length'];_0x4da076++)this['sources'][_0x4da076]['onStop']();this['sources']=[],this['fire']('unavailabl'+'e');}}['start'](_0x3f138d={}){var _0x3e0666,_0x35d4e4;if(!this['_supported']){(_0x3e0666=_0x3f138d['callback'])==null||_0x3e0666['call'](_0x3f138d,new Error('XR\x20HitTest'+'\x20is\x20not\x20su'+'pported'),null);return;}if(!this['_available']){(_0x35d4e4=_0x3f138d['callback'])==null||_0x35d4e4['call'](_0x3f138d,new Error('XR\x20HitTest'+'\x20is\x20not\x20av'+'ailable'),null);return;}!_0x3f138d['profile']&&!_0x3f138d['spaceType']&&(_0x3f138d['spaceType']=Yg);let _0x5e6b9f;const _0x5b6340=_0x3f138d['offsetRay'];if(_0x5b6340){const _0x371a13=new DOMPoint(_0x5b6340['origin']['x'],_0x5b6340['origin']['y'],_0x5b6340['origin']['z'],0x667*0x2+-0x2*0xe8f+0x1051),_0x4bfe6b=new DOMPoint(_0x5b6340['direction']['x'],_0x5b6340['direction']['y'],_0x5b6340['direction']['z'],0x2293+-0x5*-0x736+-0x46a1);_0x5e6b9f=new XRRay(_0x371a13,_0x4bfe6b);}const _0xc55724=_0x3f138d['callback'];_0x3f138d['spaceType']?this['manager']['session']['requestRef'+'erenceSpac'+'e'](_0x3f138d['spaceType'])['then'](_0x42f8bb=>{if(!this['manager']['session']){const _0x2e6d60=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(2)');_0xc55724&&_0xc55724(_0x2e6d60),this['fire']('error',_0x2e6d60);return;}this['manager']['session']['requestHit'+'TestSource']({'space':_0x42f8bb,'entityTypes':_0x3f138d['entityType'+'s']||void(0x19*-0xcb+0x1345*0x1+0x8e),'offsetRay':_0x5e6b9f})['then'](_0x4c640e=>{this['_onHitTest'+'Source'](_0x4c640e,!(-0x4f4+-0x94a+0xe3f),_0x3f138d['inputSourc'+'e'],_0xc55724);})['catch'](_0x1e389b=>{_0xc55724&&_0xc55724(_0x1e389b),this['fire']('error',_0x1e389b);});})['catch'](_0x58ad67=>{_0xc55724&&_0xc55724(_0x58ad67),this['fire']('error',_0x58ad67);}):this['manager']['session']['requestHit'+'TestSource'+'ForTransie'+'ntInput']({'profile':_0x3f138d['profile'],'entityTypes':_0x3f138d['entityType'+'s']||void(-0xe36+0x22d1*-0x1+0x3107),'offsetRay':_0x5e6b9f})['then'](_0x2dcf36=>{this['_onHitTest'+'Source'](_0x2dcf36,!(0x50c+0x451*-0x1+0xbb*-0x1),_0x3f138d['inputSourc'+'e'],_0xc55724);})['catch'](_0x46aaeb=>{_0xc55724&&_0xc55724(_0x46aaeb),this['fire']('error',_0x46aaeb);});}['_onHitTest'+'Source'](_0x4184a1,_0x2514c2,_0x3bb2b7,_0x6b3ff){if(!this['manager']['session']){_0x4184a1['cancel']();const _0x13ee65=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(3)');_0x6b3ff&&_0x6b3ff(_0x13ee65),this['fire']('error',_0x13ee65);return;}const _0x2cf5c8=new Tu(this['manager'],_0x4184a1,_0x2514c2,_0x3bb2b7??null);this['sources']['push'](_0x2cf5c8),_0x6b3ff&&_0x6b3ff(null,_0x2cf5c8),this['fire']('add',_0x2cf5c8);}['update'](_0x534bd2){if(this['_available']){for(let _0x4509be=0x123*-0xb+0xa1a*-0x1+-0x9*-0x283;_0x4509be<this['sources']['length'];_0x4509be++)this['sources'][_0x4509be]['update'](_0x534bd2);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}}h(Wr,'EVENT_AVAI'+'LABLE','available'),h(Wr,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Wr,'EVENT_ADD','add'),h(Wr,'EVENT_REMO'+'VE','remove'),h(Wr,'EVENT_RESU'+'LT','result'),h(Wr,'EVENT_ERRO'+'R','error');class wu extends me{constructor(_0x28aaa5,_0x2e7c7d){super(),h(this,'_image'),h(this,'_width'),h(this,'_bitmap',null),h(this,'_measuredW'+'idth',-0x1a16+0x266e+-0xc58),h(this,'_trackable',!(-0x1*-0x96b+0x5*-0x3f+-0x1a3*0x5)),h(this,'_tracking',!(-0x1ab9*-0x1+0x486*0x3+-0x284a)),h(this,'_emulated',!(-0x2c7+0xe13+-0xb4b)),h(this,'_pose',null),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_image']=_0x28aaa5,this['_width']=_0x2e7c7d);}get['image'](){return this['_image'];}set['width'](_0x52acba){this['_width']=_0x52acba;}get['width'](){return this['_width'];}get['trackable'](){return this['_trackable'];}get['tracking'](){return this['_tracking'];}get['emulated'](){return this['_emulated'];}['prepare'](){return this['_bitmap']?{'image':this['_bitmap'],'widthInMeters':this['_width']}:createImageBitmap(this['_image'])['then'](_0x566012=>(this['_bitmap']=_0x566012,{'image':this['_bitmap'],'widthInMeters':this['_width']}));}['destroy'](){this['_image']=null,this['_pose']=null,this['_bitmap']&&(this['_bitmap']['close'](),this['_bitmap']=null);}['getPositio'+'n'](){return this['_pose']&&this['_position']['copy'](this['_pose']['transform']['position']),this['_position'];}['getRotatio'+'n'](){return this['_pose']&&this['_rotation']['copy'](this['_pose']['transform']['orientatio'+'n']),this['_rotation'];}}h(wu,'EVENT_TRAC'+'KED','tracked'),h(wu,'EVENT_UNTR'+'ACKED','untracked');class Kv extends me{constructor(_0x57e379){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRImageTra'+'ckingResul'+'t']),h(this,'_available',!(-0x1*-0x26f5+-0x3*0xcc6+-0xa2)),h(this,'_images',[]),(this['_manager']=_0x57e379,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['add'](_0x29908f,_0x4b9e8c){if(!this['_supported']||this['_manager']['active'])return null;const _0x149725=new wu(_0x29908f,_0x4b9e8c);return this['_images']['push'](_0x149725),_0x149725;}['remove'](_0x4f4559){if(this['_manager']['active'])return;const _0x5af41c=this['_images']['indexOf'](_0x4f4559);_0x5af41c!==-(-0xa13*0x2+-0x1*-0x1517+-0xf0)&&(_0x4f4559['destroy'](),this['_images']['splice'](_0x5af41c,-0x10d4+-0x4*-0x511+-0x36f));}['_onSession'+'Start'](){this['_manager']['session']['getTracked'+'ImageScore'+'s']()['then'](_0x4a2e51=>{this['_available']=!(0x1*0x12ea+-0x69d*0x3+0x4f*0x3);for(let _0xda94bc=-0x89e+0x2d2*-0xa+0x1269*0x2;_0xda94bc<_0x4a2e51['length'];_0xda94bc++)this['_images'][_0xda94bc]['_trackable']=_0x4a2e51[_0xda94bc]==='trackable';})['catch'](_0x11f6f7=>{this['_available']=!(-0x2*-0x127d+-0x2*-0xbac+-0x3c51),this['fire']('error',_0x11f6f7);});}['_onSession'+'End'](){this['_available']=!(-0x19*-0xb3+-0x4c7*-0x7+0xa5*-0x4f);for(let _0x570ae1=-0x1468+0x3e*0xc+-0x1c*-0xa0;_0x570ae1<this['_images']['length'];_0x570ae1++){const _0x4eb67e=this['_images'][_0x570ae1];_0x4eb67e['_pose']=null,_0x4eb67e['_measuredW'+'idth']=0x1*-0x1159+0x856+0x1*0x903,_0x4eb67e['_tracking']&&(_0x4eb67e['_tracking']=!(0x1503+0x1*-0x2506+0x1004),_0x4eb67e['fire']('untracked'));}}['prepareIma'+'ges'](_0xcc6029){this['_images']['length']?Promise['all'](this['_images']['map'](_0x1ad62f=>_0x1ad62f['prepare']()))['then'](_0x503b21=>{_0xcc6029(null,_0x503b21);})['catch'](_0x6aa4e0=>{_0xcc6029(_0x6aa4e0,null);}):_0xcc6029(null,null);}['update'](_0x4e11dc){if(!this['_available'])return;const _0xeda453=_0x4e11dc['getImageTr'+'ackingResu'+'lts'](),_0xdf83a5={};for(let _0x7fc89=0x1*0x46b+-0x1f30*-0x1+-0x239b;_0x7fc89<_0xeda453['length'];_0x7fc89++){_0xdf83a5[_0xeda453[_0x7fc89]['index']]=_0xeda453[_0x7fc89];const _0x4478ef=this['_images'][_0xeda453[_0x7fc89]['index']];_0x4478ef['_emulated']=_0xeda453[_0x7fc89]['trackingSt'+'ate']==='emulated',_0x4478ef['_measuredW'+'idth']=_0xeda453[_0x7fc89]['measuredWi'+'dthInMeter'+'s'],_0x4478ef['_pose']=_0x4e11dc['getPose'](_0xeda453[_0x7fc89]['imageSpace'],this['_manager']['_reference'+'Space']);}for(let _0x4d3e96=-0x1f51+-0x73*-0x20+0x10f1*0x1;_0x4d3e96<this['_images']['length'];_0x4d3e96++)this['_images'][_0x4d3e96]['_tracking']&&!_0xdf83a5[_0x4d3e96]?(this['_images'][_0x4d3e96]['_tracking']=!(-0x1083+-0x35+0x10b9),this['_images'][_0x4d3e96]['fire']('untracked')):!this['_images'][_0x4d3e96]['_tracking']&&_0xdf83a5[_0x4d3e96]&&(this['_images'][_0x4d3e96]['_tracking']=!(0x432+0x97f+0x1*-0xdb1),this['_images'][_0x4d3e96]['fire']('tracked'));}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['images'](){return this['_images'];}}h(Kv,'EVENT_ERRO'+'R','error');class Ik{constructor(_0x26b42a,_0x3398fe){h(this,'_index'),h(this,'_hand'),h(this,'_joints',[]),h(this,'_tip',null),(this['_index']=_0x26b42a,this['_hand']=_0x3398fe,this['_hand']['_fingers']['push'](this));}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['joints'](){return this['_joints'];}get['tip'](){return this['_tip'];}}const Zg=Me['browser']&&window['XRHand']?['thumb-tip','index-fing'+'er-tip','middle-fin'+'ger-tip','ring-finge'+'r-tip','pinky-fing'+'er-tip']:[],Zv={};for(let l=0x8c*-0x18+-0x11ad+0x1ecd;l<Zg['length'];l++)Zv[Zg[l]]=!(0x188+0x1*0x2677+-0x27ff);class Qg{constructor(_0x55d752,_0x11e39c,_0x528601,_0x340b97=null){h(this,'_index'),h(this,'_id'),h(this,'_hand'),h(this,'_finger'),h(this,'_wrist'),h(this,'_tip'),h(this,'_radius',null),h(this,'_localTran'+'sform',new te()),h(this,'_worldTran'+'sform',new te()),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_dirtyLoca'+'l',!(0x305+0x33b*0x2+-0x1*0x97b)),(this['_index']=_0x55d752,this['_id']=_0x11e39c,this['_hand']=_0x528601,this['_finger']=_0x340b97,this['_wrist']=_0x11e39c==='wrist',this['_tip']=this['_finger']&&!!Zv[_0x11e39c]);}['update'](_0x1776b5){this['_dirtyLoca'+'l']=!(0x29*-0x86+0x1958+0x7*-0x8e),this['_radius']=_0x1776b5['radius'],this['_localPosi'+'tion']['copy'](_0x1776b5['transform']['position']),this['_localRota'+'tion']['copy'](_0x1776b5['transform']['orientatio'+'n']);}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(-0x89e+0x1cca*0x1+-0x142b),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x448658=this['_hand']['_manager']['camera']['parent'];_0x448658?this['_worldTran'+'sform']['mul2'](_0x448658['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['getPositio'+'n'](){return this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position'];}['getRotatio'+'n'](){return this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation'];}get['id'](){return this['_id'];}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['finger'](){return this['_finger'];}get['wrist'](){return this['_wrist'];}get['tip'](){return this['_tip'];}get['radius'](){return this['_radius']||0x3*0x9a0+-0x124e+-0x3*0x386+0.005;}}let Nc=[];const zr=new D(),vc=new D(),Jg=new D();Me['browser']&&window['XRHand']&&(Nc=[['thumb-meta'+'carpal','thumb-phal'+'anx-proxim'+'al','thumb-phal'+'anx-distal','thumb-tip'],['index-fing'+'er-metacar'+'pal','index-fing'+'er-phalanx'+'-proximal','index-fing'+'er-phalanx'+'-intermedi'+'ate','index-fing'+'er-phalanx'+'-distal','index-fing'+'er-tip'],['middle-fin'+'ger-metaca'+'rpal','middle-fin'+'ger-phalan'+'x-proximal','middle-fin'+'ger-phalan'+'x-intermed'+'iate','middle-fin'+'ger-phalan'+'x-distal','middle-fin'+'ger-tip'],['ring-finge'+'r-metacarp'+'al','ring-finge'+'r-phalanx-'+'proximal','ring-finge'+'r-phalanx-'+'intermedia'+'te','ring-finge'+'r-phalanx-'+'distal','ring-finge'+'r-tip'],['pinky-fing'+'er-metacar'+'pal','pinky-fing'+'er-phalanx'+'-proximal','pinky-fing'+'er-phalanx'+'-intermedi'+'ate','pinky-fing'+'er-phalanx'+'-distal','pinky-fing'+'er-tip']]);class Eu extends me{constructor(_0x1712da){super(),h(this,'_manager'),h(this,'_inputSour'+'ce'),h(this,'_tracking',!(-0xa91+0xb64+-0xd2)),h(this,'_fingers',[]),h(this,'_joints',[]),h(this,'_jointsByI'+'d',{}),h(this,'_tips',[]),h(this,'_wrist',null);const _0x73c15a=_0x1712da['_xrInputSo'+'urce']['hand'];if(this['_manager']=_0x1712da['_manager'],this['_inputSour'+'ce']=_0x1712da,_0x73c15a['get']('wrist')){const _0xee08ea=new Qg(-0x6c*-0xa+-0xb12+-0x2*-0x36d,'wrist',this,null);this['_wrist']=_0xee08ea,this['_joints']['push'](_0xee08ea),this['_jointsByI'+'d']['wrist']=_0xee08ea;}for(let _0x1063ae=0x111d+-0xa65+-0x6b8;_0x1063ae<Nc['length'];_0x1063ae++){const _0x2eb7aa=new Ik(_0x1063ae,this);for(let _0x2ab786=0x1a81+-0x1524+-0x55d;_0x2ab786<Nc[_0x1063ae]['length'];_0x2ab786++){const _0x2cc98a=Nc[_0x1063ae][_0x2ab786];if(!_0x73c15a['get'](_0x2cc98a))continue;const _0x2e40b4=new Qg(_0x2ab786,_0x2cc98a,this,_0x2eb7aa);this['_joints']['push'](_0x2e40b4),this['_jointsByI'+'d'][_0x2cc98a]=_0x2e40b4,_0x2e40b4['tip']&&(this['_tips']['push'](_0x2e40b4),_0x2eb7aa['_tip']=_0x2e40b4),_0x2eb7aa['_joints']['push'](_0x2e40b4);}}}['update'](_0xa5b77e){const _0x4c3b5a=this['_inputSour'+'ce']['_xrInputSo'+'urce'];for(let _0x89a0c1=-0x4b6+0x24*-0x114+0x2b86;_0x89a0c1<this['_joints']['length'];_0x89a0c1++){const _0x43e87f=this['_joints'][_0x89a0c1],_0x1d0efe=_0x4c3b5a['hand']['get'](_0x43e87f['_id']);if(_0x1d0efe){let _0x2f899a;if(_0xa5b77e['session']['visibility'+'State']!=='hidden'&&(_0x2f899a=_0xa5b77e['getJointPo'+'se'](_0x1d0efe,this['_manager']['_reference'+'Space'])),_0x2f899a)_0x43e87f['update'](_0x2f899a),_0x43e87f['wrist']&&!this['_tracking']&&(this['_tracking']=!(-0xfa1*-0x1+-0x1018+0x77),this['fire']('tracking'));else{if(_0x43e87f['wrist']){this['_tracking']&&(this['_tracking']=!(-0x1a4e+-0x1*-0x1861+-0x1ee*-0x1),this['fire']('trackinglo'+'st'));break;}}}}const _0x443c02=this['_jointsByI'+'d']['thumb-meta'+'carpal'],_0x172af2=this['_jointsByI'+'d']['thumb-tip'],_0x5b2516=this['_jointsByI'+'d']['index-fing'+'er-phalanx'+'-proximal'],_0x5580e1=this['_jointsByI'+'d']['index-fing'+'er-tip'],_0x53b8ce=this['_jointsByI'+'d']['ring-finge'+'r-phalanx-'+'proximal'],_0x22d4fd=this['_jointsByI'+'d']['pinky-fing'+'er-phalanx'+'-proximal'];if(_0x443c02&&_0x172af2&&_0x5b2516&&_0x5580e1&&_0x53b8ce&&_0x22d4fd){this['_inputSour'+'ce']['_dirtyRay']=!(0x2de+0x2024+-0x2302),this['_inputSour'+'ce']['_rayLocal']['origin']['lerp'](_0x172af2['_localPosi'+'tion'],_0x5580e1['_localPosi'+'tion'],0x1350*-0x1+0xe9f+-0x4b1*-0x1+0.5);let _0x22e9be=_0x443c02,_0x3751ea=_0x22d4fd;if(this['_inputSour'+'ce']['handedness']===Pk){const _0x419241=_0x22e9be;_0x22e9be=_0x3751ea,_0x3751ea=_0x419241;}zr['sub2'](_0x22e9be['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),vc['sub2'](_0x3751ea['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),Jg['cross'](zr,vc)['normalize'](),zr['lerp'](_0x5b2516['_localPosi'+'tion'],_0x53b8ce['_localPosi'+'tion'],-0xf46+-0xc53*-0x3+-0x15b3+0.5),zr['sub'](this['_wrist']['_localPosi'+'tion'])['normalize'](),this['_inputSour'+'ce']['_rayLocal']['direction']['lerp'](Jg,zr,-0x497*-0x8+0x21ae+-0x2333*0x2+0.5)['normalize']();}this['_fingerIsC'+'losed'](-0x7*0x1cd+0xb*-0x2aa+-0x862*-0x5)&&this['_fingerIsC'+'losed'](0x11b*0x1+-0x1*0x6cd+0x14*0x49)&&this['_fingerIsC'+'losed'](0x9aa*0x3+0x2640+-0x1669*0x3)&&this['_fingerIsC'+'losed'](-0x1d32+-0x1072+0x16d4*0x2)?this['_inputSour'+'ce']['_squeezing']||(this['_inputSour'+'ce']['_squeezing']=!(0x1*-0x80b+0x40a*0x7+-0x143b),this['_inputSour'+'ce']['fire']('squeezesta'+'rt'),this['_manager']['input']['fire']('squeezesta'+'rt',this['_inputSour'+'ce'])):this['_inputSour'+'ce']['_squeezing']&&(this['_inputSour'+'ce']['_squeezing']=!(0x21a0+-0x478+0x1b7*-0x11),this['_inputSour'+'ce']['fire']('squeeze'),this['_manager']['input']['fire']('squeeze',this['_inputSour'+'ce']),this['_inputSour'+'ce']['fire']('squeezeend'),this['_manager']['input']['fire']('squeezeend',this['_inputSour'+'ce']));}['_fingerIsC'+'losed'](_0x298b31){const _0x56156f=this['_fingers'][_0x298b31];return zr['sub2'](_0x56156f['joints'][0x2*0x1147+0xa5d*-0x1+-0x1831]['_localPosi'+'tion'],_0x56156f['joints'][0x305+-0x189e*0x1+0x229*0xa]['_localPosi'+'tion'])['normalize'](),vc['sub2'](_0x56156f['joints'][-0x10*0x25+-0xea9*-0x1+0xd*-0xf3]['_localPosi'+'tion'],_0x56156f['joints'][0x2dd*-0xb+0x60+0x1f22]['_localPosi'+'tion'])['normalize'](),zr['dot'](vc)<-(0x5*-0x36b+0x1*-0x1bcc+-0x2ce3*-0x1+0.8);}['getJointBy'+'Id'](_0x5d603a){return this['_jointsByI'+'d'][_0x5d603a]||null;}get['fingers'](){return this['_fingers'];}get['joints'](){return this['_joints'];}get['tips'](){return this['_tips'];}get['wrist'](){return this['_wrist'];}get['tracking'](){return this['_tracking'];}}h(Eu,'EVENT_TRAC'+'KING','tracking'),h(Eu,'EVENT_TRAC'+'KINGLOST','trackinglo'+'st');const eS=new D(),tS=new le();let Lk=0x116f+-0x8*0x241+-0x99*-0x1;class Qt extends me{constructor(_0x16e1b5,_0x5b345b){super(),h(this,'_id'),h(this,'_manager'),h(this,'_xrInputSo'+'urce'),h(this,'_ray',new wn()),h(this,'_rayLocal',new wn()),h(this,'_grip',!(0x772*0x3+-0x1*-0x10a6+0x11*-0x24b)),h(this,'_hand',null),h(this,'_velocitie'+'sAvailable',!(-0x740+-0x9a*-0x35+-0x18a1)),h(this,'_velocitie'+'sTimestamp',de()),h(this,'_localTran'+'sform',null),h(this,'_worldTran'+'sform',null),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_localPosi'+'tion',null),h(this,'_localPosi'+'tionLast',null),h(this,'_localRota'+'tion',null),h(this,'_linearVel'+'ocity',null),h(this,'_dirtyLoca'+'l',!(0x4a7*0x7+0xf4f+-0x2fe0)),h(this,'_dirtyRay',!(0xa*0x235+-0x51*0x5e+0x7ad)),h(this,'_selecting',!(0x863+-0x675+0x1ed*-0x1)),h(this,'_squeezing',!(-0xbcb+0x121*-0x5+0x1171)),h(this,'_elementIn'+'put',!(0x2*-0x3d+0x2e5*-0x5+0xef3)),h(this,'_elementEn'+'tity',null),h(this,'_hitTestSo'+'urces',[]),(this['_id']=++Lk,this['_manager']=_0x16e1b5,this['_xrInputSo'+'urce']=_0x5b345b,_0x5b345b['hand']&&(this['_hand']=new Eu(this)));}get['id'](){return this['_id'];}get['inputSourc'+'e'](){return this['_xrInputSo'+'urce'];}get['targetRayM'+'ode'](){return this['_xrInputSo'+'urce']['targetRayM'+'ode'];}get['handedness'](){return this['_xrInputSo'+'urce']['handedness'];}get['profiles'](){return this['_xrInputSo'+'urce']['profiles'];}get['grip'](){return this['_grip'];}get['hand'](){return this['_hand'];}get['gamepad'](){return this['_xrInputSo'+'urce']['gamepad']||null;}get['selecting'](){return this['_selecting'];}get['squeezing'](){return this['_squeezing'];}set['elementInp'+'ut'](_0x2b37b0){this['_elementIn'+'put']!==_0x2b37b0&&(this['_elementIn'+'put']=_0x2b37b0,this['_elementIn'+'put']||(this['_elementEn'+'tity']=null));}get['elementInp'+'ut'](){return this['_elementIn'+'put'];}get['elementEnt'+'ity'](){return this['_elementEn'+'tity'];}get['hitTestSou'+'rces'](){return this['_hitTestSo'+'urces'];}['update'](_0x2482b0){if(this['_hand'])this['_hand']['update'](_0x2482b0);else{const _0xe9dfa5=this['_xrInputSo'+'urce']['gripSpace'];if(_0xe9dfa5){const _0x3e3e57=_0x2482b0['getPose'](_0xe9dfa5,this['_manager']['_reference'+'Space']);if(_0x3e3e57){this['_grip']||(this['_grip']=!(0xa8e+-0xf*-0x35+-0xda9),this['_localTran'+'sform']=new te(),this['_worldTran'+'sform']=new te(),this['_localPosi'+'tionLast']=new D(),this['_localPosi'+'tion']=new D(),this['_localRota'+'tion']=new le(),this['_linearVel'+'ocity']=new D());const _0x30dcd1=de(),_0x45c232=(_0x30dcd1-this['_velocitie'+'sTimestamp'])/(-0xf62+0x231c+-0xfd2);this['_velocitie'+'sTimestamp']=_0x30dcd1,this['_dirtyLoca'+'l']=!(-0x22a0+-0xa6e+-0x49*-0x9e),this['_localPosi'+'tionLast']['copy'](this['_localPosi'+'tion']),this['_localPosi'+'tion']['copy'](_0x3e3e57['transform']['position']),this['_localRota'+'tion']['copy'](_0x3e3e57['transform']['orientatio'+'n']),this['_velocitie'+'sAvailable']=!(-0x5*0x6a+-0xf1*0x1+0x3*0x101),this['_manager']['input']['velocities'+'Supported']&&_0x3e3e57['linearVelo'+'city']?this['_linearVel'+'ocity']['copy'](_0x3e3e57['linearVelo'+'city']):_0x45c232>-0x7eb+0x1526+-0x1*0xd3b&&(eS['sub2'](this['_localPosi'+'tion'],this['_localPosi'+'tionLast'])['divScalar'](_0x45c232),this['_linearVel'+'ocity']['lerp'](this['_linearVel'+'ocity'],eS,-0xf27+0x12a*-0x5+0x14f9+0.15));}else this['_velocitie'+'sAvailable']=!(-0xbe1+0x909*0x1+0x1*0x2d9);}const _0x4d58a2=_0x2482b0['getPose'](this['_xrInputSo'+'urce']['targetRayS'+'pace'],this['_manager']['_reference'+'Space']);_0x4d58a2&&(this['_dirtyRay']=!(-0x219f+0x1*0x143+-0x1*-0x205c),this['_rayLocal']['origin']['copy'](_0x4d58a2['transform']['position']),this['_rayLocal']['direction']['set'](0x21d7*0x1+0x25*0xa4+0x1*-0x398b,0x1193+-0x1*0xcf7+0x3b*-0x14,-(-0x2411+0x2f9*-0xc+0x47be)),tS['copy'](_0x4d58a2['transform']['orientatio'+'n']),tS['transformV'+'ector'](this['_rayLocal']['direction'],this['_rayLocal']['direction']));}}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0x1*0x467+-0x99b*0x1+-0x1f*-0x2b),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0xac7eaf=this['_manager']['camera']['parent'];_0xac7eaf?this['_worldTran'+'sform']['mul2'](_0xac7eaf['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['_updateRay'+'Transforms'](){const _0x12cf06=this['_dirtyRay'];if(this['_dirtyRay']=!(-0xe75*-0x2+-0xbdb*0x1+-0x110e),this['_manager']['camera']['parent']){const _0x25919c=this['_manager']['camera']['parent']['getWorldTr'+'ansform']();_0x25919c['getTransla'+'tion'](this['_position']),this['_rotation']['setFromMat'+'4'](_0x25919c),this['_rotation']['transformV'+'ector'](this['_rayLocal']['origin'],this['_ray']['origin']),this['_ray']['origin']['add'](this['_position']),this['_rotation']['transformV'+'ector'](this['_rayLocal']['direction'],this['_ray']['direction']);}else _0x12cf06&&(this['_ray']['origin']['copy'](this['_rayLocal']['origin']),this['_ray']['direction']['copy'](this['_rayLocal']['direction']));}['getPositio'+'n'](){return this['_position']?(this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position']):null;}['getLocalPo'+'sition'](){return this['_localPosi'+'tion'];}['getRotatio'+'n'](){return this['_rotation']?(this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation']):null;}['getLocalRo'+'tation'](){return this['_localRota'+'tion'];}['getLinearV'+'elocity'](){return this['_velocitie'+'sAvailable']?this['_linearVel'+'ocity']:null;}['getOrigin'](){return this['_updateRay'+'Transforms'](),this['_ray']['origin'];}['getDirecti'+'on'](){return this['_updateRay'+'Transforms'](),this['_ray']['direction'];}['hitTestSta'+'rt'](_0x43a47c={}){_0x43a47c['inputSourc'+'e']=this,_0x43a47c['profile']=this['_xrInputSo'+'urce']['profiles'][-0x26c3+-0x1fb6+0x4679];const _0x2b6ca4=_0x43a47c['callback'];_0x43a47c['callback']=(_0x3e5a4b,_0x16f87d)=>{_0x16f87d&&this['onHitTestS'+'ourceAdd'](_0x16f87d),_0x2b6ca4&&_0x2b6ca4(_0x3e5a4b,_0x16f87d);},this['_manager']['hitTest']['start'](_0x43a47c);}['onHitTestS'+'ourceAdd'](_0x39f6f8){this['_hitTestSo'+'urces']['push'](_0x39f6f8),this['fire']('hittest:ad'+'d',_0x39f6f8),_0x39f6f8['on']('result',(_0x5e0a43,_0x16c99d,_0x8c5c09,_0x37c265)=>{_0x8c5c09===this&&this['fire']('hittest:re'+'sult',_0x39f6f8,_0x5e0a43,_0x16c99d,_0x37c265);}),_0x39f6f8['once']('remove',()=>{this['onHitTestS'+'ourceRemov'+'e'](_0x39f6f8),this['fire']('hittest:re'+'move',_0x39f6f8);});}['onHitTestS'+'ourceRemov'+'e'](_0x14cfb3){const _0x541b4c=this['_hitTestSo'+'urces']['indexOf'](_0x14cfb3);_0x541b4c!==-(0x58*-0x1c+-0x1c9d+0x263e)&&this['_hitTestSo'+'urces']['splice'](_0x541b4c,-0x162e+-0x43a+0x1*0x1a69);}}h(Qt,'EVENT_REMO'+'VE','remove'),h(Qt,'EVENT_SELE'+'CT','select'),h(Qt,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Qt,'EVENT_SELE'+'CTEND','selectend'),h(Qt,'EVENT_SQUE'+'EZE','squeeze'),h(Qt,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Qt,'EVENT_SQUE'+'EZEEND','squeezeend'),h(Qt,'EVENT_HITT'+'ESTADD','hittest:ad'+'d'),h(Qt,'EVENT_HITT'+'ESTREMOVE','hittest:re'+'move'),h(Qt,'EVENT_HITT'+'ESTRESULT','hittest:re'+'sult');class Li extends me{constructor(_0x120cdf){var _0x3a6b92,_0xb88c64;super(),h(this,'manager'),h(this,'_inputSour'+'ces',[]),h(this,'_onInputSo'+'urcesChang'+'eEvt'),h(this,'velocities'+'Supported',!(0xb4*-0x21+0x1166+0x5cf)),(this['manager']=_0x120cdf,this['velocities'+'Supported']=!!(Me['browser']&&((_0xb88c64=(_0x3a6b92=window['XRPose'])==null?void(0x1d*-0xfd+0x23dd*-0x1+0x4086):_0x3a6b92['prototype'])!=null&&_0xb88c64['hasOwnProp'+'erty']('linearVelo'+'city'))),this['_onInputSo'+'urcesChang'+'eEvt']=_0x433af1=>{this['_onInputSo'+'urcesChang'+'e'](_0x433af1);},this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){const _0x1f5958=this['manager']['session'];_0x1f5958['addEventLi'+'stener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']),_0x1f5958['addEventLi'+'stener']('select',_0x306c35=>{const _0x701ef0=this['_getByInpu'+'tSource'](_0x306c35['inputSourc'+'e']);_0x701ef0['update'](_0x306c35['frame']),_0x701ef0['fire']('select',_0x306c35),this['fire']('select',_0x701ef0,_0x306c35);}),_0x1f5958['addEventLi'+'stener']('selectstar'+'t',_0x156690=>{const _0x29bdf8=this['_getByInpu'+'tSource'](_0x156690['inputSourc'+'e']);_0x29bdf8['_selecting']||(_0x29bdf8['update'](_0x156690['frame']),_0x29bdf8['_selecting']=!(-0xee7+0x25ac+-0x16c5),_0x29bdf8['fire']('selectstar'+'t',_0x156690),this['fire']('selectstar'+'t',_0x29bdf8,_0x156690));}),_0x1f5958['addEventLi'+'stener']('selectend',_0x5de3f0=>{const _0x37be57=this['_getByInpu'+'tSource'](_0x5de3f0['inputSourc'+'e']);_0x37be57['update'](_0x5de3f0['frame']),_0x37be57['_selecting']=!(-0x1ca*-0x5+-0xd8*-0xf+-0x1599),_0x37be57['fire']('selectend',_0x5de3f0),this['fire']('selectend',_0x37be57,_0x5de3f0);}),_0x1f5958['addEventLi'+'stener']('squeeze',_0x5ca13e=>{const _0x5a4176=this['_getByInpu'+'tSource'](_0x5ca13e['inputSourc'+'e']);_0x5a4176['update'](_0x5ca13e['frame']),_0x5a4176['fire']('squeeze',_0x5ca13e),this['fire']('squeeze',_0x5a4176,_0x5ca13e);}),_0x1f5958['addEventLi'+'stener']('squeezesta'+'rt',_0x177373=>{const _0x43673f=this['_getByInpu'+'tSource'](_0x177373['inputSourc'+'e']);_0x43673f['update'](_0x177373['frame']),_0x43673f['_squeezing']=!(0x172e+-0x98*0x40+0x2*0x769),_0x43673f['fire']('squeezesta'+'rt',_0x177373),this['fire']('squeezesta'+'rt',_0x43673f,_0x177373);}),_0x1f5958['addEventLi'+'stener']('squeezeend',_0x499ddb=>{const _0x4027b5=this['_getByInpu'+'tSource'](_0x499ddb['inputSourc'+'e']);_0x4027b5['update'](_0x499ddb['frame']),_0x4027b5['_squeezing']=!(0x132b+-0x152*0x1+-0x1*0x11d8),_0x4027b5['fire']('squeezeend',_0x499ddb),this['fire']('squeezeend',_0x4027b5,_0x499ddb);});const _0x36c281=_0x1f5958['inputSourc'+'es'];for(let _0x1bad70=-0x1ffd+-0x252c+0x4529*0x1;_0x1bad70<_0x36c281['length'];_0x1bad70++)this['_addInputS'+'ource'](_0x36c281[_0x1bad70]);}['_onSession'+'End'](){let _0x45c1f2=this['_inputSour'+'ces']['length'];for(;_0x45c1f2--;){const _0x111db8=this['_inputSour'+'ces'][_0x45c1f2];this['_inputSour'+'ces']['splice'](_0x45c1f2,-0x55*-0x5c+-0x2b3*-0x1+0x6a6*-0x5),_0x111db8['fire']('remove'),this['fire']('remove',_0x111db8);}this['fire']('removeall'),this['manager']['session']['removeEven'+'tListener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']);}['_onInputSo'+'urcesChang'+'e'](_0x43e211){for(let _0x29779d=0x1e9*0xf+0x1a7b+-0x3722;_0x29779d<_0x43e211['removed']['length'];_0x29779d++)this['_removeInp'+'utSource'](_0x43e211['removed'][_0x29779d]);for(let _0x1d75b5=0x1e2b*0x1+-0x1604+0x1*-0x827;_0x1d75b5<_0x43e211['added']['length'];_0x1d75b5++)this['_addInputS'+'ource'](_0x43e211['added'][_0x1d75b5]);}['_getByInpu'+'tSource'](_0x5e86e3){for(let _0x22cac3=0x1*0x16ff+0x1*-0x17a5+0x2*0x53;_0x22cac3<this['_inputSour'+'ces']['length'];_0x22cac3++)if(this['_inputSour'+'ces'][_0x22cac3]['inputSourc'+'e']===_0x5e86e3)return this['_inputSour'+'ces'][_0x22cac3];return null;}['_removeApp'+'Entity'](_0x442f98){const _0x9b3dfd=this['manager']['app']['root']['findByName']('Armature_'+_0x442f98);_0x9b3dfd&&this['manager']['app']['root']['removeChil'+'d'](_0x9b3dfd);}['_addInputS'+'ource'](_0x1d7992){if(this['_removeApp'+'Entity'](_0x1d7992['handedness']),this['_getByInpu'+'tSource'](_0x1d7992))return;const _0x1f3158=new Qt(this['manager'],_0x1d7992);this['_inputSour'+'ces']['push'](_0x1f3158),this['fire']('add',_0x1f3158);}['_removeInp'+'utSource'](_0x867af1){for(let _0x136bfd=-0x1a62+0x16d*0x5+-0x35*-0x5d;_0x136bfd<this['_inputSour'+'ces']['length'];_0x136bfd++){if(this['_inputSour'+'ces'][_0x136bfd]['inputSourc'+'e']!==_0x867af1)continue;const _0x206e22=this['_inputSour'+'ces'][_0x136bfd];this['_inputSour'+'ces']['splice'](_0x136bfd,-0x1a06+0x1*-0x517+0x472*0x7);let _0x28e36c=_0x206e22['hitTestSou'+'rces']['length'];for(;_0x28e36c--;)_0x206e22['hitTestSou'+'rces'][_0x28e36c]['remove']();this['_removeApp'+'Entity'](_0x206e22['handedness']),_0x206e22['fire']('remove'),this['fire']('remove',_0x206e22);return;}}['update'](_0x297be5){for(let _0x2c255c=0x2f8+-0x825*0x1+-0x52d*-0x1;_0x2c255c<this['_inputSour'+'ces']['length'];_0x2c255c++)this['_inputSour'+'ces'][_0x2c255c]['update'](_0x297be5);}get['inputSourc'+'es'](){return this['_inputSour'+'ces'];}}h(Li,'EVENT_ADD','add'),h(Li,'EVENT_REMO'+'VE','remove'),h(Li,'EVENT_SELE'+'CT','select'),h(Li,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Li,'EVENT_SELE'+'CTEND','selectend'),h(Li,'EVENT_SQUE'+'EZE','squeeze'),h(Li,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Li,'EVENT_SQUE'+'EZEEND','squeezeend');const ja=new D(),sS=new D(),hf=new te(),iS=new te();class bu extends me{constructor(_0x5ee0ce){super(),h(this,'_manager'),h(this,'_supported',!(-0xf3d*0x1+-0x1983+0x28c1)),h(this,'_available',!(0x703+-0xea7+0x7a5)),h(this,'_lightProb'+'eRequested',!(-0x1aaf+-0x110f+0x2bbf)),h(this,'_lightProb'+'e',null),h(this,'_intensity',0xf99+0xf1+-0x108a),h(this,'_rotation',new le()),h(this,'_color',new ie()),h(this,'_spherical'+'Harmonics',new Float32Array(0x97*0x3+-0x422*0x6+0x1722)),(this['_manager']=_0x5ee0ce,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){this['_manager']['session']['requestLig'+'htProbe']&&(this['_supported']=!(0x1*-0x1475+0x11b0+0x2c5));}['_onSession'+'End'](){this['_supported']=!(0x25*-0xa3+-0x1*-0x19bb+0x25*-0xf),this['_available']=!(-0xa57*0x1+0xc03+0x1ab*-0x1),this['_lightProb'+'eRequested']=!(-0x11e*0x1e+0x8*-0x8e+0x25f5),this['_lightProb'+'e']=null;}['start'](){let _0x438a6d;if(this['_manager']['session']||(_0x438a6d=new Error('XR\x20session'+'\x20is\x20not\x20ru'+'nning')),!_0x438a6d&&this['_manager']['type']!==Ro&&(_0x438a6d=new Error('XR\x20session'+'\x20type\x20is\x20n'+'ot\x20AR')),!_0x438a6d&&!this['_supported']&&(_0x438a6d=new Error('light-esti'+'mation\x20is\x20'+'not\x20suppor'+'ted')),(!_0x438a6d&&this['_lightProb'+'e']||this['_lightProb'+'eRequested'])&&(_0x438a6d=new Error('light\x20esti'+'mation\x20is\x20'+'already\x20re'+'quested')),_0x438a6d){this['fire']('error',_0x438a6d);return;}this['_lightProb'+'eRequested']=!(-0x1032*0x1+0x92*-0x22+0x38f*0xa),this['_manager']['session']['requestLig'+'htProbe']()['then'](_0x1f8b2a=>{const _0x43666d=this['_lightProb'+'eRequested'];this['_lightProb'+'eRequested']=!(-0x13*0xa7+-0x24e9+0x314f*0x1),this['_manager']['active']?_0x43666d&&(this['_lightProb'+'e']=_0x1f8b2a):this['fire']('error',new Error('XR\x20session'+'\x20is\x20not\x20ac'+'tive'));})['catch'](_0x257888=>{this['_lightProb'+'eRequested']=!(-0x9ca+-0x1589+-0x322*-0xa),this['fire']('error',_0x257888);});}['end'](){this['_lightProb'+'eRequested']=!(-0x6c2+0x1d83+-0xd0*0x1c),this['_lightProb'+'e']=null,this['_available']=!(-0x235e+-0x105*0xf+0x32aa*0x1);}['update'](_0x432f80){if(!this['_lightProb'+'e'])return;const _0xdd895a=_0x432f80['getLightEs'+'timate'](this['_lightProb'+'e']);if(!_0xdd895a)return;this['_available']||(this['_available']=!(0x737+0x1ebb*-0x1+-0x12d*-0x14),this['fire']('available'));const _0x45dffc=_0xdd895a['primaryLig'+'htIntensit'+'y'];this['_intensity']=Math['max'](-0x1aaa+0x811+0x94d*0x2,Math['max'](_0x45dffc['x'],Math['max'](_0x45dffc['y'],_0x45dffc['z']))),ja['copy'](_0x45dffc)['mulScalar']((0x2*-0x398+0x2289+-0x1*0x1b58)/this['_intensity']),this['_color']['set'](ja['x'],ja['y'],ja['z']),ja['set'](-0x23bb+-0x5*0x7d+-0x262c*-0x1,-0xc25*0x2+0x14ba+0x390,0x13*0x29+-0x21*0x79+0xc8e),sS['copy'](_0xdd895a['primaryLig'+'htDirectio'+'n']),hf['setLookAt'](sS,ja,D['UP']),iS['setFromAxi'+'sAngle'](D['RIGHT'],-0x20a2+0xcff+0x13fd),hf['mul'](iS),this['_rotation']['setFromMat'+'4'](hf),this['_spherical'+'Harmonics']['set'](_0xdd895a['sphericalH'+'armonicsCo'+'efficients']);}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['intensity'](){return this['_available']?this['_intensity']:null;}get['color'](){return this['_available']?this['_color']:null;}get['rotation'](){return this['_available']?this['_rotation']:null;}get['sphericalH'+'armonics'](){return this['_available']?this['_spherical'+'Harmonics']:null;}}h(bu,'EVENT_AVAI'+'LABLE','available'),h(bu,'EVENT_ERRO'+'R','error');let Rk=-0x1ac5+0x4*0x92b+-0x9e7;class Au extends me{constructor(_0x9be247,_0x36598a){super(),h(this,'_id'),h(this,'_planeDete'+'ction'),h(this,'_xrPlane'),h(this,'_lastChang'+'edTime'),h(this,'_orientati'+'on'),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_id']=++Rk,this['_planeDete'+'ction']=_0x9be247,this['_xrPlane']=_0x36598a,this['_lastChang'+'edTime']=_0x36598a['lastChange'+'dTime'],this['_orientati'+'on']=_0x36598a['orientatio'+'n']);}['destroy'](){this['_xrPlane']&&(this['_xrPlane']=null,this['fire']('remove'));}['update'](_0x4022e4){const _0x441717=this['_planeDete'+'ction']['_manager'],_0x40f995=_0x4022e4['getPose'](this['_xrPlane']['planeSpace'],_0x441717['_reference'+'Space']);_0x40f995&&(this['_position']['copy'](_0x40f995['transform']['position']),this['_rotation']['copy'](_0x40f995['transform']['orientatio'+'n'])),this['_lastChang'+'edTime']!==this['_xrPlane']['lastChange'+'dTime']&&(this['_lastChang'+'edTime']=this['_xrPlane']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}get['id'](){return this['_id'];}get['orientatio'+'n'](){return this['_orientati'+'on'];}get['points'](){return this['_xrPlane']['polygon'];}get['label'](){return this['_xrPlane']['semanticLa'+'bel']||'';}}h(Au,'EVENT_REMO'+'VE','remove'),h(Au,'EVENT_CHAN'+'GE','change');class yo extends me{constructor(_0x5f2995){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRPlane']),h(this,'_available',!(0x2457+0x2303+0x5*-0xe45)),h(this,'_planesInd'+'ex',new Map()),h(this,'_planes',[]),(this['_manager']=_0x5f2995,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){this['_manager']['session']['enabledFea'+'tures']&&this['_manager']['session']['enabledFea'+'tures']['indexOf']('plane-dete'+'ction')!==-(0x2379*0x1+-0x7c1+0x37*-0x81)&&(this['_available']=!(-0x1509+0x4*0x3ac+0x5*0x145),this['fire']('available'));}['_onSession'+'End'](){for(let _0x11f048=0x31d*-0x4+0x1*-0x24bb+-0x3*-0x1065;_0x11f048<this['_planes']['length'];_0x11f048++)this['_planes'][_0x11f048]['destroy'](),this['fire']('remove',this['_planes'][_0x11f048]);this['_planesInd'+'ex']['clear'](),this['_planes']['length']=0x2012*0x1+-0x2405+-0x151*-0x3,this['_available']&&(this['_available']=!(-0x6cf+-0x28e+-0x16*-0x6d),this['fire']('unavailabl'+'e'));}['update'](_0x390953){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x390953['detectedPl'+'anes']['size'])this['_available']=!(0x43*-0x53+-0x5*-0x5bc+-0x1*0x6f3),this['fire']('available');else return;}const _0x3f006b=_0x390953['detectedPl'+'anes'];for(const [_0x206c7c,_0x13cc43]of this['_planesInd'+'ex'])_0x3f006b['has'](_0x206c7c)||(this['_planesInd'+'ex']['delete'](_0x206c7c),this['_planes']['splice'](this['_planes']['indexOf'](_0x13cc43),0x142*-0xe+0x11a8+0x1*-0xb),_0x13cc43['destroy'](),this['fire']('remove',_0x13cc43));for(const _0x11bac3 of _0x3f006b){let _0x19894a=this['_planesInd'+'ex']['get'](_0x11bac3);_0x19894a?_0x19894a['update'](_0x390953):(_0x19894a=new Au(this,_0x11bac3),this['_planesInd'+'ex']['set'](_0x11bac3,_0x19894a),this['_planes']['push'](_0x19894a),_0x19894a['update'](_0x390953),this['fire']('add',_0x19894a));}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['planes'](){return this['_planes'];}}h(yo,'EVENT_AVAI'+'LABLE','available'),h(yo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(yo,'EVENT_ADD','add'),h(yo,'EVENT_REMO'+'VE','remove');class vo extends me{constructor(_0x397149,_0x51a605,_0x38529a=null){super(),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_uuid',null),h(this,'_uuidReque'+'sts',null),(this['_anchors']=_0x397149,this['_xrAnchor']=_0x51a605,this['_uuid']=_0x38529a);}['destroy'](){if(!this['_xrAnchor'])return;const _0x34f6e2=this['_xrAnchor'];this['_xrAnchor']['delete'](),this['_xrAnchor']=null,this['fire']('destroy',_0x34f6e2,this);}['update'](_0x511791){if(!this['_xrAnchor'])return;const _0x16e3f5=_0x511791['getPose'](this['_xrAnchor']['anchorSpac'+'e'],this['_anchors']['manager']['_reference'+'Space']);if(_0x16e3f5){if(this['_position']['equals'](_0x16e3f5['transform']['position'])&&this['_rotation']['equals'](_0x16e3f5['transform']['orientatio'+'n']))return;this['_position']['copy'](_0x16e3f5['transform']['position']),this['_rotation']['copy'](_0x16e3f5['transform']['orientatio'+'n']),this['fire']('change');}}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}['persist'](_0x1830fe){if(!this['_anchors']['persistenc'+'e']){_0x1830fe==null||_0x1830fe(new Error('Persistent'+'\x20Anchors\x20a'+'re\x20not\x20sup'+'ported'),null);return;}if(this['_uuid']){_0x1830fe==null||_0x1830fe(null,this['_uuid']);return;}if(this['_uuidReque'+'sts']){_0x1830fe&&this['_uuidReque'+'sts']['push'](_0x1830fe);return;}this['_uuidReque'+'sts']=[],this['_xrAnchor']['requestPer'+'sistentHan'+'dle']()['then'](_0x6a56ef=>{this['_uuid']=_0x6a56ef,this['_anchors']['_indexByUu'+'id']['set'](this['_uuid'],this),_0x1830fe==null||_0x1830fe(null,_0x6a56ef);for(const _0xce87eb of this['_uuidReque'+'sts'])_0xce87eb(null,_0x6a56ef);this['_uuidReque'+'sts']=null,this['fire']('persist',_0x6a56ef);})['catch'](_0x3cc8a2=>{_0x1830fe==null||_0x1830fe(_0x3cc8a2,null);for(const _0xbcec96 of this['_uuidReque'+'sts'])_0xbcec96(_0x3cc8a2,null);this['_uuidReque'+'sts']=null;});}['forget'](_0x140604){if(!this['_uuid']){_0x140604==null||_0x140604(new Error('Anchor\x20is\x20'+'not\x20persis'+'tent'));return;}this['_anchors']['forget'](this['_uuid'],_0x3cf7fc=>{this['_uuid']=null,_0x140604==null||_0x140604(_0x3cf7fc),this['fire']('forget');});}get['uuid'](){return this['_uuid'];}get['persistent'](){return!!this['_uuid'];}}h(vo,'EVENT_DEST'+'ROY','destroy'),h(vo,'EVENT_CHAN'+'GE','change'),h(vo,'EVENT_PERS'+'IST','persist'),h(vo,'EVENT_FORG'+'ET','forget');var aS;class Ja extends me{constructor(_0x1daea8){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!window['XRAnchor']),h(this,'_available',!(-0x7a3+0x1d59+-0x15b5)),h(this,'_checkingA'+'vailabilit'+'y',!(0x1*0x1df+0x24a4+0x1341*-0x2)),h(this,'_persisten'+'ce',Me['browser']&&!!((aS=window==null?void(0x3*-0x11d+0x18d*0x1+-0x2*-0xe5):window['XRSession'])!=null&&aS['prototype']['restorePer'+'sistentAnc'+'hor'])),h(this,'_creationQ'+'ueue',[]),h(this,'_index',new Map()),h(this,'_indexByUu'+'id',new Map()),h(this,'_list',[]),h(this,'_callbacks'+'Anchors',new Map()),(this['manager']=_0x1daea8,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){var _0xb5a07b;const _0x3b0542=((_0xb5a07b=this['manager']['session']['enabledFea'+'tures'])==null?void(0xbef+-0x1b12+0x1*0xf23):_0xb5a07b['indexOf']('anchors'))>=0x13fd+-0x263*0x2+0x30b*-0x5;_0x3b0542&&(this['_available']=_0x3b0542,this['fire']('available'));}['_onSession'+'End'](){if(!this['_available'])return;this['_available']=!(-0x1*-0xbdd+-0x1d74+0x1198);for(let _0x3cb3f7=-0x46*0x3b+0x685*0x1+0x99d*0x1;_0x3cb3f7<this['_creationQ'+'ueue']['length'];_0x3cb3f7++)this['_creationQ'+'ueue'][_0x3cb3f7]['callback']&&this['_creationQ'+'ueue'][_0x3cb3f7]['callback'](new Error('session\x20en'+'ded'),null);this['_creationQ'+'ueue']['length']=0x161*-0x7+0x19*-0x112+0xef*0x27,this['_index']['clear'](),this['_indexByUu'+'id']['clear']();let _0x54248e=this['_list']['length'];for(;_0x54248e--;)this['_list'][_0x54248e]['destroy']();this['_list']['length']=0x115+-0x8*-0x161+-0xc1d,this['fire']('unavailabl'+'e');}['_createAnc'+'hor'](_0x279225,_0x5a7c1a=null){const _0x108f50=new vo(this,_0x279225,_0x5a7c1a);return this['_index']['set'](_0x279225,_0x108f50),_0x5a7c1a&&this['_indexByUu'+'id']['set'](_0x5a7c1a,_0x108f50),this['_list']['push'](_0x108f50),_0x108f50['once']('destroy',this['_onAnchorD'+'estroy'],this),_0x108f50;}['_onAnchorD'+'estroy'](_0x20ef5a,_0x5c013b){this['_index']['delete'](_0x20ef5a),_0x5c013b['uuid']&&this['_indexByUu'+'id']['delete'](_0x5c013b['uuid']);const _0x562d10=this['_list']['indexOf'](_0x5c013b);_0x562d10!==-(-0x6c*0xb+0x17ee+0x1*-0x1349)&&this['_list']['splice'](_0x562d10,-0x15ff+0x4a3*-0x6+0x31d2),this['fire']('destroy',_0x5c013b);}['create'](_0x1c06c2,_0x155ca6,_0x8caaf0){if(!this['_available']){_0x8caaf0==null||_0x8caaf0(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(window['XRHitTestR'+'esult']&&_0x1c06c2 instanceof XRHitTestResult){const _0x36c490=_0x1c06c2;if(_0x8caaf0=_0x155ca6,!this['_supported']){_0x8caaf0==null||_0x8caaf0(new Error('Anchors\x20AP'+'I\x20is\x20not\x20s'+'upported'),null);return;}if(!_0x36c490['createAnch'+'or']){_0x8caaf0==null||_0x8caaf0(new Error('Creating\x20A'+'nchor\x20from'+'\x20Hit\x20Test\x20'+'is\x20not\x20sup'+'ported'),null);return;}_0x36c490['createAnch'+'or']()['then'](_0x5c2ff3=>{const _0x354102=this['_createAnc'+'hor'](_0x5c2ff3);_0x8caaf0==null||_0x8caaf0(null,_0x354102),this['fire']('add',_0x354102);})['catch'](_0x322e1f=>{_0x8caaf0==null||_0x8caaf0(_0x322e1f,null),this['fire']('error',_0x322e1f);});}else this['_creationQ'+'ueue']['push']({'transform':new XRRigidTransform(_0x1c06c2,_0x155ca6),'callback':_0x8caaf0});}['restore'](_0x533beb,_0x448d1a){if(!this['_available']){_0x448d1a==null||_0x448d1a(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(!this['_persisten'+'ce']){_0x448d1a==null||_0x448d1a(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'),null);return;}if(!this['manager']['active']){_0x448d1a==null||_0x448d1a(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'),null);return;}this['manager']['session']['restorePer'+'sistentAnc'+'hor'](_0x533beb)['then'](_0x4280ea=>{const _0x2d9c65=this['_createAnc'+'hor'](_0x4280ea,_0x533beb);_0x448d1a==null||_0x448d1a(null,_0x2d9c65),this['fire']('add',_0x2d9c65);})['catch'](_0x4abf32=>{_0x448d1a==null||_0x448d1a(_0x4abf32,null),this['fire']('error',_0x4abf32);});}['forget'](_0x4e164b,_0x330721){if(!this['_available']){_0x330721==null||_0x330721(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'));return;}if(!this['_persisten'+'ce']){_0x330721==null||_0x330721(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'));return;}if(!this['manager']['active']){_0x330721==null||_0x330721(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'));return;}this['manager']['session']['deletePers'+'istentAnch'+'or'](_0x4e164b)['then'](()=>{_0x330721==null||_0x330721(null);})['catch'](_0x8eb094=>{_0x330721==null||_0x330721(_0x8eb094),this['fire']('error',_0x8eb094);});}['update'](_0x401bb3){if(!this['_available']){!this['manager']['session']['enabledFea'+'tures']&&!this['_checkingA'+'vailabilit'+'y']&&(this['_checkingA'+'vailabilit'+'y']=!(-0x1bef*0x1+-0x1*0x266c+0x425b*0x1),_0x401bb3['createAnch'+'or'](new XRRigidTransform(),this['manager']['_reference'+'Space'])['then'](_0x494cd8=>{_0x494cd8['delete'](),this['manager']['active']&&(this['_available']=!(0x766+0x11c*0x8+0x823*-0x2),this['fire']('available'));})['catch'](()=>{}));return;}if(this['_creationQ'+'ueue']['length']){for(let _0x2f5e02=0xfcd+-0x1*0x1f21+0xc*0x147;_0x2f5e02<this['_creationQ'+'ueue']['length'];_0x2f5e02++){const _0x58e192=this['_creationQ'+'ueue'][_0x2f5e02];_0x401bb3['createAnch'+'or'](_0x58e192['transform'],this['manager']['_reference'+'Space'])['then'](_0x3fe867=>{_0x58e192['callback']&&this['_callbacks'+'Anchors']['set'](_0x3fe867,_0x58e192['callback']);})['catch'](_0x58bd86=>{_0x58e192['callback']&&_0x58e192['callback'](_0x58bd86,null),this['fire']('error',_0x58bd86);});}this['_creationQ'+'ueue']['length']=-0x295*0x3+-0x177+0x936;}for(const [_0x15c784,_0x36c841]of this['_index'])_0x401bb3['trackedAnc'+'hors']['has'](_0x15c784)||(this['_index']['delete'](_0x15c784),_0x36c841['destroy']());for(let _0x4a0aaa=0x3ce+-0x83*-0x3f+0x1*-0x240b;_0x4a0aaa<this['_list']['length'];_0x4a0aaa++)this['_list'][_0x4a0aaa]['update'](_0x401bb3);for(const _0x357730 of _0x401bb3['trackedAnc'+'hors']){if(this['_index']['has'](_0x357730))continue;try{const _0x1fe922=_0x357730['anchorSpac'+'e'];}catch{continue;}const _0x2d4ce1=this['_createAnc'+'hor'](_0x357730);_0x2d4ce1['update'](_0x401bb3);const _0x5c8195=this['_callbacks'+'Anchors']['get'](_0x357730);_0x5c8195&&(this['_callbacks'+'Anchors']['delete'](_0x357730),_0x5c8195(null,_0x2d4ce1)),this['fire']('add',_0x2d4ce1);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['persistenc'+'e'](){return this['_persisten'+'ce'];}get['uuids'](){return!this['_available']||!this['_persisten'+'ce']||!this['manager']['active']?null:this['manager']['session']['persistent'+'Anchors'];}get['list'](){return this['_list'];}}h(Ja,'EVENT_AVAI'+'LABLE','available'),h(Ja,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Ja,'EVENT_ERRO'+'R','error'),h(Ja,'EVENT_ADD','add'),h(Ja,'EVENT_DEST'+'ROY','destroy');class Cu extends me{constructor(_0x44f5b6,_0x30dd82){super(),h(this,'_meshDetec'+'tion'),h(this,'_xrMesh'),h(this,'_lastChang'+'ed',-0xa*0x254+-0x3f1*0x2+0x2*0xf95),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_meshDetec'+'tion']=_0x44f5b6,this['_xrMesh']=_0x30dd82,this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime']);}get['xrMesh'](){return this['_xrMesh'];}get['label'](){return this['_xrMesh']['semanticLa'+'bel']||'';}get['vertices'](){return this['_xrMesh']['vertices'];}get['indices'](){return this['_xrMesh']['indices'];}['destroy'](){this['_xrMesh']&&(this['_xrMesh']=null,this['fire']('remove'));}['update'](_0x502806){const _0x53d6d7=this['_meshDetec'+'tion']['_manager'],_0x167309=_0x502806['getPose'](this['_xrMesh']['meshSpace'],_0x53d6d7['_reference'+'Space']);_0x167309&&(this['_position']['copy'](_0x167309['transform']['position']),this['_rotation']['copy'](_0x167309['transform']['orientatio'+'n'])),this['_lastChang'+'ed']!==this['_xrMesh']['lastChange'+'dTime']&&(this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}}h(Cu,'EVENT_REMO'+'VE','remove'),h(Cu,'EVENT_CHAN'+'GE','change');class xo extends me{constructor(_0x3bc96f){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRMesh']),h(this,'_available',!(0x1*-0xf80+0x1728+-0x7a7)),h(this,'_index',new Map()),h(this,'_list',[]),(this['_manager']=_0x3bc96f,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['update'](_0x3b5ed7){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x3b5ed7['detectedMe'+'shes']['size'])this['_available']=!(0xaa+0x461+-0x50b),this['fire']('available');else return;}for(const _0x7b601b of _0x3b5ed7['detectedMe'+'shes']){let _0x19b6ed=this['_index']['get'](_0x7b601b);_0x19b6ed?_0x19b6ed['update'](_0x3b5ed7):(_0x19b6ed=new Cu(this,_0x7b601b),this['_index']['set'](_0x7b601b,_0x19b6ed),this['_list']['push'](_0x19b6ed),_0x19b6ed['update'](_0x3b5ed7),this['fire']('add',_0x19b6ed));}for(const _0x6d279e of this['_index']['values']())_0x3b5ed7['detectedMe'+'shes']['has'](_0x6d279e['xrMesh'])||this['_removeMes'+'h'](_0x6d279e);}['_removeMes'+'h'](_0x2e68e7){this['_index']['delete'](_0x2e68e7['xrMesh']),this['_list']['splice'](this['_list']['indexOf'](_0x2e68e7),-0x1*-0x565+0x4*-0x4c7+0xdb8*0x1),_0x2e68e7['destroy'](),this['fire']('remove',_0x2e68e7);}['_onSession'+'Start'](){if(this['_manager']['session']['enabledFea'+'tures']){const _0x4c2f88=this['_manager']['session']['enabledFea'+'tures']['indexOf']('mesh-detec'+'tion')!==-(-0x2672*0x1+-0x330+0x29a3);if(!_0x4c2f88)return;this['_available']=_0x4c2f88,this['fire']('available');}}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x4*-0x3b8+0x1eb0*0x1+-0xfcf);for(const _0xc79efc of this['_index']['values']())this['_removeMes'+'h'](_0xc79efc);this['fire']('unavailabl'+'e');}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['meshes'](){return this['_list'];}}h(xo,'EVENT_AVAI'+'LABLE','available'),h(xo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(xo,'EVENT_ADD','add'),h(xo,'EVENT_REMO'+'VE','remove');class Qv extends me{constructor(_0x52ae94,_0x22f32c,_0x25b4aa){super(),h(this,'_manager'),h(this,'_xrView'),h(this,'_positionD'+'ata',new Float32Array(-0x1*-0x3d7+0x1100+0x56*-0x3e)),h(this,'_viewport',new re()),h(this,'_projMat',new te()),h(this,'_projViewO'+'ffMat',new te()),h(this,'_viewMat',new te()),h(this,'_viewOffMa'+'t',new te()),h(this,'_viewMat3',new _i()),h(this,'_viewInvMa'+'t',new te()),h(this,'_viewInvOf'+'fMat',new te()),h(this,'_xrCamera',null),h(this,'_textureCo'+'lor',null),h(this,'_textureDe'+'pth',null),h(this,'_depthInfo',null),h(this,'_emptyDept'+'hBuffer',new Uint8Array(-0xc*0x5f+0x1eb*0x9+-0xcaf)),h(this,'_depthMatr'+'ix',new te()),(this['_manager']=_0x52ae94,this['_xrView']=_0x22f32c);const _0x869c06=this['_manager']['app']['graphicsDe'+'vice'];if(this['_manager']['views']['supportedC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera'],this['_manager']['views']['availableC'+'olor']&&this['_xrCamera']&&(this['_textureCo'+'lor']=new _e(_0x869c06,{'format':wr,'mipmaps':!(0x22b7*0x1+-0x1ba*0x6+-0x1*0x185a),'addressU':ue,'addressV':ue,'minFilter':vt,'magFilter':vt,'width':this['_xrCamera']['width'],'height':this['_xrCamera']['height'],'name':'XrView-'+this['_xrView']['eye']+'-Color'}))),this['_manager']['views']['supportedD'+'epth']&&this['_manager']['views']['availableD'+'epth']){const _0x2c1a7a=this['_manager']['views']['depthGpuOp'+'timized']?Te:vt;this['_textureDe'+'pth']=new _e(_0x869c06,{'format':this['_manager']['views']['depthPixel'+'Format'],'arrayLength':_0x25b4aa===-0x3a*-0x6+0x2*0x6c2+-0x1a7*0x9?-0x7a0+0x1*-0x142c+-0x2*-0xde6:_0x25b4aa,'mipmaps':!(0xfdd+0x233*-0x7+-0x77),'addressU':ue,'addressV':ue,'minFilter':_0x2c1a7a,'magFilter':_0x2c1a7a,'width':0x4,'height':0x4,'name':'XrView-'+this['_xrView']['eye']+'-Depth'});for(let _0x4071a4=0x3fb*0x5+-0x4*-0x86e+0x103*-0x35;_0x4071a4<this['_textureDe'+'pth']['_levels']['length'];_0x4071a4++)this['_textureDe'+'pth']['_levels'][_0x4071a4]=this['_emptyDept'+'hBuffer'];this['_textureDe'+'pth']['upload']();}(this['_textureCo'+'lor']||this['_textureDe'+'pth'])&&_0x869c06['on']('devicelost',this['_onDeviceL'+'ost'],this);}get['textureCol'+'or'](){return this['_textureCo'+'lor'];}get['textureDep'+'th'](){return this['_textureDe'+'pth'];}get['depthUvMat'+'rix'](){return this['_depthMatr'+'ix'];}get['depthValue'+'ToMeters'](){var _0x3596f1;return((_0x3596f1=this['_depthInfo'])==null?void(-0x3*0x745+0x2*-0xa71+-0xe3b*-0x3):_0x3596f1['rawValueTo'+'Meters'])||0x3*-0x27f+0x1*0x118d+0x10*-0xa1;}get['eye'](){return this['_xrView']['eye'];}get['viewport'](){return this['_viewport'];}get['projMat'](){return this['_projMat'];}get['projViewOf'+'fMat'](){return this['_projViewO'+'ffMat'];}get['viewOffMat'](){return this['_viewOffMa'+'t'];}get['viewInvOff'+'Mat'](){return this['_viewInvOf'+'fMat'];}get['viewMat3'](){return this['_viewMat3'];}get['positionDa'+'ta'](){return this['_positionD'+'ata'];}['update'](_0x2b6dfc,_0x29447c){this['_xrView']=_0x29447c,this['_manager']['views']['availableC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera']);const _0x14c98b=_0x2b6dfc['session']['renderStat'+'e']['baseLayer']['getViewpor'+'t'](this['_xrView']);this['_viewport']['x']=_0x14c98b['x'],this['_viewport']['y']=_0x14c98b['y'],this['_viewport']['z']=_0x14c98b['width'],this['_viewport']['w']=_0x14c98b['height'],this['_projMat']['set'](this['_xrView']['projection'+'Matrix']),this['_viewMat']['set'](this['_xrView']['transform']['inverse']['matrix']),this['_viewInvMa'+'t']['set'](this['_xrView']['transform']['matrix']),this['_updateTex'+'tureColor'](),this['_updateDep'+'th'](_0x2b6dfc);}['_updateTex'+'tureColor'](){if(!this['_manager']['views']['availableC'+'olor']||!this['_xrCamera']||!this['_textureCo'+'lor'])return;const _0x5395c2=this['_manager']['webglBindi'+'ng'];if(!_0x5395c2)return;const _0x25abab=_0x5395c2['getCameraI'+'mage'](this['_xrCamera']);if(!_0x25abab)return;const _0x56fa65=this['_manager']['app']['graphicsDe'+'vice'],_0x5b8bd=_0x56fa65['gl'];if(!this['_frameBuff'+'erSource'])this['_frameBuff'+'erSource']=_0x5b8bd['createFram'+'ebuffer'](),this['_frameBuff'+'er']=_0x5b8bd['createFram'+'ebuffer']();else{const _0x27f83e=_0x5b8bd['COLOR_ATTA'+'CHMENT0'],_0x413f85=this['_xrCamera']['width'],_0x51adeb=this['_xrCamera']['height'];_0x56fa65['setFramebu'+'ffer'](this['_frameBuff'+'erSource']),_0x5b8bd['framebuffe'+'rTexture2D'](_0x5b8bd['FRAMEBUFFE'+'R'],_0x27f83e,_0x5b8bd['TEXTURE_2D'],_0x25abab,0x205e+-0x393*0x2+-0x1938),_0x56fa65['setFramebu'+'ffer'](this['_frameBuff'+'er']),_0x5b8bd['framebuffe'+'rTexture2D'](_0x5b8bd['FRAMEBUFFE'+'R'],_0x27f83e,_0x5b8bd['TEXTURE_2D'],this['_textureCo'+'lor']['impl']['_glTexture'],0x22ce+0x1e5b+-0x94f*0x7),_0x5b8bd['bindFrameb'+'uffer'](_0x5b8bd['READ_FRAME'+'BUFFER'],this['_frameBuff'+'erSource']),_0x5b8bd['bindFrameb'+'uffer'](_0x5b8bd['DRAW_FRAME'+'BUFFER'],this['_frameBuff'+'er']),_0x5b8bd['blitFrameb'+'uffer'](-0x6a9*-0x1+0xab3+-0x115c,_0x51adeb,_0x413f85,0x8*-0x23d+0x2703+-0x151b,-0x126+0x97b*0x1+0x9*-0xed,-0xfc5+-0xa93+0x1a58,_0x413f85,_0x51adeb,_0x5b8bd['COLOR_BUFF'+'ER_BIT'],_0x5b8bd['NEAREST']);}}['_updateDep'+'th'](_0x145131){var _0x313b35,_0x48e2a4;if(!this['_manager']['views']['availableD'+'epth']||!this['_textureDe'+'pth'])return;const _0x15c4db=this['_manager']['views']['depthGpuOp'+'timized'],_0x50a486=_0x15c4db?this['_manager']['webglBindi'+'ng']:_0x145131;if(!_0x50a486){this['_depthInfo']=null;return;}const _0x29a8ef=_0x50a486['getDepthIn'+'formation'](this['_xrView']);if(!_0x29a8ef){this['_depthInfo']=null;return;}let _0x34f433=!this['_depthInfo']!=!_0x29a8ef;this['_depthInfo']=_0x29a8ef;const _0x3cf739=((_0x313b35=this['_depthInfo'])==null?void(0x22ba+-0xf05+-0x13b5*0x1):_0x313b35['width'])||-0x1*-0x1120+0x3*-0x7bf+-0x3*-0x20b,_0x30172f=((_0x48e2a4=this['_depthInfo'])==null?void(-0x6f2*0x5+0x1*-0x74f+0x2a09):_0x48e2a4['height'])||0x1fb5+0x658*-0x4+-0x21b*0x3;let _0x26add8=!(-0x1f*0x113+0x1b1f+0x62f);if((this['_textureDe'+'pth']['width']!==_0x3cf739||this['_textureDe'+'pth']['height']!==_0x30172f)&&(this['_textureDe'+'pth']['_width']=_0x3cf739,this['_textureDe'+'pth']['_height']=_0x30172f,_0x34f433=!(-0xf*0x46+-0x2*-0x7cd+0x80*-0x17),_0x26add8=!(-0x2657+0x1987*0x1+0xcd0)),_0x34f433&&(this['_depthInfo']?this['_depthMatr'+'ix']['data']['set'](this['_depthInfo']['normDepthB'+'ufferFromN'+'ormView']['matrix']):this['_depthMatr'+'ix']['setIdentit'+'y']()),this['_depthInfo']){if(_0x15c4db){if(this['_depthInfo']['texture']){const _0x13711a=this['_manager']['app']['graphicsDe'+'vice']['gl'];switch(this['_textureDe'+'pth']['impl']['_glTexture']=this['_depthInfo']['texture'],this['_depthInfo']['textureTyp'+'e']==='texture-ar'+'ray'?this['_textureDe'+'pth']['impl']['_glTarget']=_0x13711a['TEXTURE_2D'+'_ARRAY']:this['_textureDe'+'pth']['impl']['_glTarget']=_0x13711a['TEXTURE_2D'],this['_manager']['views']['depthPixel'+'Format']){case Qi:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x13711a['R32F'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x13711a['FLOAT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x13711a['RED'];break;case Wi:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x13711a['DEPTH_COMP'+'ONENT16'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x13711a['UNSIGNED_S'+'HORT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x13711a['DEPTH_COMP'+'ONENT'];break;}this['_textureDe'+'pth']['impl']['_glCreated']=!(0xb3*-0x1b+-0x26d0+-0x1*-0x39b1);}}else this['_textureDe'+'pth']['_levels'][0x1d5e+-0x1894+-0x4ca]=new Uint8Array(this['_depthInfo']['data']),this['_textureDe'+'pth']['upload']();}else this['_textureDe'+'pth']['_levels'][-0x13bc+0x10a9+0x313]=this['_emptyDept'+'hBuffer'],this['_textureDe'+'pth']['upload']();_0x26add8&&this['fire']('depth:resi'+'ze',_0x3cf739,_0x30172f);}['updateTran'+'sforms'](_0x297a38){_0x297a38?(this['_viewInvOf'+'fMat']['mul2'](_0x297a38,this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewInvOf'+'fMat'])['invert']()):(this['_viewInvOf'+'fMat']['copy'](this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewMat'])),this['_viewMat3']['setFromMat'+'4'](this['_viewOffMa'+'t']),this['_projViewO'+'ffMat']['mul2'](this['_projMat'],this['_viewOffMa'+'t']),this['_positionD'+'ata'][-0xaa8+0x9a*0x26+-0xc34*0x1]=this['_viewInvOf'+'fMat']['data'][-0xc7*0x3+0x1a6*-0x5+0xa9f],this['_positionD'+'ata'][-0x9*0x6b+0x417*0x2+-0x46a]=this['_viewInvOf'+'fMat']['data'][-0x3*-0x50a+-0x193d+0x6*0x1b2],this['_positionD'+'ata'][0x40*0x3b+0x4b*0x6d+0x6ab*-0x7]=this['_viewInvOf'+'fMat']['data'][0x13*0x1a9+0x4*0xed+0x3*-0xbbb];}['_onDeviceL'+'ost'](){this['_frameBuff'+'erSource']=null,this['_frameBuff'+'er']=null,this['_depthInfo']=null;}['getDepth'](_0x17c38b,_0x1ae0d9){var _0x493e7d;return this['_manager']['views']['depthGpuOp'+'timized']?null:((_0x493e7d=this['_depthInfo'])==null?void(-0x1cd*-0xb+0x2a5*-0x5+-0x696):_0x493e7d['getDepthIn'+'Meters'](_0x17c38b,_0x1ae0d9))??null;}['destroy'](){if(this['_depthInfo']=null,this['_textureCo'+'lor']&&(this['_textureCo'+'lor']['destroy'](),this['_textureCo'+'lor']=null),this['_textureDe'+'pth']&&(this['_textureDe'+'pth']['destroy'](),this['_textureDe'+'pth']=null),this['_frameBuff'+'erSource']){const _0x285b92=this['_manager']['app']['graphicsDe'+'vice']['gl'];_0x285b92['deleteFram'+'ebuffer'](this['_frameBuff'+'erSource']),this['_frameBuff'+'erSource']=null,_0x285b92['deleteFram'+'ebuffer'](this['_frameBuff'+'er']),this['_frameBuff'+'er']=null;}}}h(Qv,'EVENT_DEPT'+'HRESIZE','depth:resi'+'ze');class gh extends me{constructor(_0xcc1fb){super(),h(this,'_manager'),h(this,'_index',new Map()),h(this,'_indexTmp',new Map()),h(this,'_list',[]),h(this,'_supported'+'Color',Me['browser']&&!!window['XRCamera']&&!!window['XRWebGLBin'+'ding']),h(this,'_supported'+'Depth',Me['browser']&&!!window['XRDepthInf'+'ormation']),h(this,'_available'+'Color',!(0x1*-0x592+0x17*0x1a2+0xaa9*-0x3)),h(this,'_available'+'Depth',!(0x4*0x52d+-0x2*-0x1227+-0x3901)),h(this,'_depthUsag'+'e',''),h(this,'_depthForm'+'at',''),h(this,'_depthForm'+'ats',{[qv]:Lu,[jv]:Wi,[Yv]:Qi}),(this['_manager']=_0xcc1fb,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}get['list'](){return this['_list'];}get['supportedC'+'olor'](){return this['_supported'+'Color'];}get['supportedD'+'epth'](){return this['_supported'+'Depth'];}get['availableC'+'olor'](){return this['_available'+'Color'];}get['availableD'+'epth'](){return this['_available'+'Depth'];}get['depthUsage'](){return this['_depthUsag'+'e'];}get['depthGpuOp'+'timized'](){return this['_depthUsag'+'e']===Xv;}get['depthForma'+'t'](){return this['_depthForm'+'at'];}get['depthPixel'+'Format'](){return this['_depthForm'+'ats'][this['_depthForm'+'at']]??null;}['update'](_0x7d1341,_0x36024e){for(let _0x5d5049=-0x100+0x18b7+-0x17b7;_0x5d5049<_0x36024e['length'];_0x5d5049++)this['_indexTmp']['set'](_0x36024e[_0x5d5049]['eye'],_0x36024e[_0x5d5049]);for(const [_0x2abd67,_0x406cea]of this['_indexTmp']){let _0x817e8a=this['_index']['get'](_0x2abd67);_0x817e8a?_0x817e8a['update'](_0x7d1341,_0x406cea):(_0x817e8a=new Qv(this['_manager'],_0x406cea,_0x36024e['length']),this['_index']['set'](_0x2abd67,_0x817e8a),this['_list']['push'](_0x817e8a),_0x817e8a['update'](_0x7d1341,_0x406cea),this['fire']('add',_0x817e8a));}for(const [_0x3e9bc6,_0x210c00]of this['_index']){if(this['_indexTmp']['has'](_0x3e9bc6))continue;_0x210c00['destroy'](),this['_index']['delete'](_0x3e9bc6);const _0x2bb601=this['_list']['indexOf'](_0x210c00);_0x2bb601!==-(0x1*-0x1e5c+0x1e94+-0x37)&&this['_list']['splice'](_0x2bb601,0xe*0x2c2+0xe5*-0x2+-0x19*0x179),this['fire']('remove',_0x210c00);}this['_indexTmp']['clear']();}['get'](_0x30b4ea){return this['_index']['get'](_0x30b4ea)||null;}['_onSession'+'Start'](){if(this['_manager']['type']===Ro&&this['_manager']['session']['enabledFea'+'tures']&&(this['_available'+'Color']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('camera-acc'+'ess')!==-(-0x1bda+0x1*0x1511+-0x16*-0x4f),this['_available'+'Depth']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('depth-sens'+'ing')!==-(0xa89+-0x3*0xae3+0x1621),this['_available'+'Depth'])){const _0x40ade8=this['_manager']['session'];this['_depthUsag'+'e']=_0x40ade8['depthUsage'],this['_depthForm'+'at']=_0x40ade8['depthDataF'+'ormat'];}}['_onSession'+'End'](){for(const _0x5f3709 of this['_index']['values']())_0x5f3709['destroy']();this['_index']['clear'](),this['_available'+'Color']=!(0x12*0x185+-0x3*-0x886+-0x34eb),this['_available'+'Depth']=!(0x852+-0x1621+-0xdd*-0x10),this['_depthUsag'+'e']='',this['_depthForm'+'at']='',this['_list']['length']=0x64f+0x18e3+0x79*-0x42;}}h(gh,'EVENT_ADD','add'),h(gh,'EVENT_REMO'+'VE','remove');class en extends me{constructor(_0x7c859a){super(),h(this,'app'),h(this,'_supported',Me['browser']&&!!navigator['xr']),h(this,'_available',{}),h(this,'_type',null),h(this,'_spaceType',null),h(this,'_session',null),h(this,'_baseLayer',null),h(this,'webglBindi'+'ng',null),h(this,'_reference'+'Space',null),h(this,'domOverlay'),h(this,'hitTest'),h(this,'imageTrack'+'ing'),h(this,'planeDetec'+'tion'),h(this,'meshDetect'+'ion'),h(this,'input'),h(this,'lightEstim'+'ation'),h(this,'views'),h(this,'anchors'),h(this,'_camera',null),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_depthNear',-0xdae+-0x2461*0x1+0x320f+0.1),h(this,'_depthFar',0xfb*-0x20+-0xe1*-0x1b+-0x1*-0xb8d),h(this,'_supported'+'FrameRates',null),h(this,'_width',0x1*-0x34a+-0x245b+0x27a5),h(this,'_height',0x77+0x1cda+-0x1d51),h(this,'_framebuff'+'erScaleFac'+'tor',-0x84a+-0x174a+0x1f95),(this['app']=_0x7c859a,this['_available'][Ak]=!(-0x180d*0x1+0x75e+0x10b0),this['_available'][Ck]=!(0x646+-0x8a1+0x25c),this['_available'][Ro]=!(0x1b33+0xc28+-0x275a),this['views']=new gh(this),this['domOverlay']=new Dk(this),this['hitTest']=new Wr(this),this['imageTrack'+'ing']=new Kv(this),this['planeDetec'+'tion']=new yo(this),this['meshDetect'+'ion']=new xo(this),this['input']=new Li(this),this['lightEstim'+'ation']=new bu(this),this['anchors']=new Ja(this),this['views']=new gh(this),this['_supported']&&(navigator['xr']['addEventLi'+'stener']('devicechan'+'ge',()=>{this['_deviceAva'+'ilabilityC'+'heck']();}),this['_deviceAva'+'ilabilityC'+'heck'](),this['app']['graphicsDe'+'vice']['on']('devicelost',this['_onDeviceL'+'ost'],this),this['app']['graphicsDe'+'vice']['on']('devicerest'+'ored',this['_onDeviceR'+'estored'],this)),this['isPC']=r0());}['destroy'](){}['start'](_0xd302f9,_0x284334,_0x3334b5,_0x26f932){let _0x627244=_0x26f932;if(typeof _0x26f932=='object'&&(_0x627244=_0x26f932['callback']),!this['_available'][_0x284334]){_0x627244&&_0x627244(new Error('XR\x20is\x20not\x20'+'available'));return;}if(this['_session']){_0x627244&&_0x627244(new Error('XR\x20session'+'\x20is\x20alread'+'y\x20started'));return;}this['_camera']=_0xd302f9,this['_camera']['camera']['xr']=this,this['_type']=_0x284334,this['_spaceType']=_0x3334b5,this['_framebuff'+'erScaleFac'+'tor']=(_0x26f932==null?void(0x2ff+-0xf92+0x431*0x3):_0x26f932['framebuffe'+'rScaleFact'+'or'])??-0x14ce*0x1+-0x1aa0+0x2f6f*0x1,this['_setClipPl'+'anes'](_0xd302f9['nearClip'],_0xd302f9['farClip']);const _0x3c2e34={'requiredFeatures':[_0x3334b5],'optionalFeatures':[]},_0x294477=this['app']['graphicsDe'+'vice'];_0x294477!=null&&_0x294477['isWebGPU']&&_0x3c2e34['requiredFe'+'atures']['push']('webgpu');const _0x38bea9=_0x294477==null?void(-0xef9*0x1+-0xc07*-0x1+0x3a*0xd):_0x294477['isWebGL2'];if(_0x284334===Ro){if(_0x3c2e34['optionalFe'+'atures']['push']('light-esti'+'mation'),_0x3c2e34['optionalFe'+'atures']['push']('hit-test'),_0x26f932&&(_0x26f932['imageTrack'+'ing']&&this['imageTrack'+'ing']['supported']&&_0x3c2e34['optionalFe'+'atures']['push']('image-trac'+'king'),_0x26f932['planeDetec'+'tion']&&_0x3c2e34['optionalFe'+'atures']['push']('plane-dete'+'ction'),_0x26f932['meshDetect'+'ion']&&_0x3c2e34['optionalFe'+'atures']['push']('mesh-detec'+'tion')),this['domOverlay']['supported']&&this['domOverlay']['root']&&(_0x3c2e34['optionalFe'+'atures']['push']('dom-overla'+'y'),_0x3c2e34['domOverlay']={'root':this['domOverlay']['root']}),_0x26f932&&_0x26f932['anchors']&&this['anchors']['supported']&&_0x3c2e34['optionalFe'+'atures']['push']('anchors'),_0x26f932&&_0x26f932['depthSensi'+'ng']&&this['views']['supportedD'+'epth']){_0x3c2e34['optionalFe'+'atures']['push']('depth-sens'+'ing');const _0x3a16bd=[],_0x3114c2=[];if(_0x3a16bd['push'](Xv,Mk),_0x3114c2['push'](Yv,qv,jv),_0x26f932['depthSensi'+'ng']['usagePrefe'+'rence']){const _0x3d80f7=_0x3a16bd['indexOf'](_0x26f932['depthSensi'+'ng']['usagePrefe'+'rence']);_0x3d80f7!==-(-0x7d*0xb+0xef3+0x3*-0x331)&&_0x3a16bd['splice'](_0x3d80f7,0x25d3+-0x47*-0x47+-0x3983),_0x3a16bd['unshift'](_0x26f932['depthSensi'+'ng']['usagePrefe'+'rence']);}if(_0x26f932['depthSensi'+'ng']['dataFormat'+'Preference']){const _0x1be12a=_0x3114c2['indexOf'](_0x26f932['depthSensi'+'ng']['dataFormat'+'Preference']);_0x1be12a!==-(-0x9*-0x63+0x35*-0x13+0x75*0x1)&&_0x3114c2['splice'](_0x1be12a,0x98+-0x624*0x6+0x1*0x2441),_0x3114c2['unshift'](_0x26f932['depthSensi'+'ng']['dataFormat'+'Preference']);}_0x3c2e34['depthSensi'+'ng']={'usagePreference':_0x3a16bd,'dataFormatPreference':_0x3114c2};}_0x38bea9&&_0x26f932&&_0x26f932['cameraColo'+'r']&&this['views']['supportedC'+'olor']&&_0x3c2e34['optionalFe'+'atures']['push']('camera-acc'+'ess');}_0x3c2e34['optionalFe'+'atures']['push']('hand-track'+'ing'),_0x26f932&&_0x26f932['optionalFe'+'atures']&&(_0x3c2e34['optionalFe'+'atures']=_0x3c2e34['optionalFe'+'atures']['concat'](_0x26f932['optionalFe'+'atures'])),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['images']['length']?this['imageTrack'+'ing']['prepareIma'+'ges']((_0x396c51,_0x329747)=>{if(_0x396c51){_0x627244&&_0x627244(_0x396c51),this['fire']('error',_0x396c51);return;}_0x329747!==null&&(_0x3c2e34['trackedIma'+'ges']=_0x329747),this['_onStartOp'+'tionsReady'](_0x284334,_0x3334b5,_0x3c2e34,_0x627244);}):this['_onStartOp'+'tionsReady'](_0x284334,_0x3334b5,_0x3c2e34,_0x627244);}['_onStartOp'+'tionsReady'](_0x390d79,_0x498fa4,_0x41b835,_0x261432){const _0x137e45=this['isPC']?{'requiredFeatures':['local-floo'+'r']}:_0x41b835;navigator['xr']['requestSes'+'sion'](_0x390d79,_0x137e45)['then'](_0x4a8b6c=>{this['_onSession'+'Start'](_0x4a8b6c,_0x498fa4,_0x261432);})['catch'](_0x10ad8a=>{this['_camera']['camera']['xr']=null,this['_camera']=null,this['_type']=null,this['_spaceType']=null,_0x261432&&_0x261432(_0x10ad8a),this['fire']('error',_0x10ad8a);});}['end'](_0x6129c9){if(!this['_session']){_0x6129c9&&_0x6129c9(new Error('XR\x20Session'+'\x20is\x20not\x20in'+'itialized'));return;}this['webglBindi'+'ng']=null,_0x6129c9&&this['once']('end',_0x6129c9),this['_session']['end']();}['isAvailabl'+'e'](_0x11d847){return this['_available'][_0x11d847];}['_deviceAva'+'ilabilityC'+'heck'](){for(const _0x3863b9 in this['_available'])this['_sessionSu'+'pportCheck'](_0x3863b9);}['initiateRo'+'omCapture'](_0x1a1484){if(!this['_session']){_0x1a1484(new Error('Session\x20is'+'\x20not\x20activ'+'e'));return;}if(!this['_session']['initiateRo'+'omCapture']){_0x1a1484(new Error('Session\x20do'+'es\x20not\x20sup'+'port\x20manua'+'l\x20room\x20cap'+'ture'));return;}this['_session']['initiateRo'+'omCapture']()['then'](()=>{_0x1a1484&&_0x1a1484(null);})['catch'](_0x1b7cf3=>{_0x1a1484&&_0x1a1484(_0x1b7cf3);});}['updateTarg'+'etFrameRat'+'e'](_0x33bd3f,_0x115a85){var _0x193d6b;if(!((_0x193d6b=this['_session'])!=null&&_0x193d6b['updateTarg'+'etFrameRat'+'e'])){_0x115a85==null||_0x115a85(new Error('unable\x20to\x20'+'update\x20fra'+'meRate'));return;}this['_session']['updateTarg'+'etFrameRat'+'e'](_0x33bd3f)['then'](()=>{_0x115a85==null||_0x115a85();})['catch'](_0x481c07=>{_0x115a85==null||_0x115a85(_0x481c07);});}['_sessionSu'+'pportCheck'](_0x304902){navigator['xr']['isSessionS'+'upported'](_0x304902)['then'](_0x4c7b31=>{this['_available'][_0x304902]!==_0x4c7b31&&(this['_available'][_0x304902]=_0x4c7b31,this['fire']('available',_0x304902,_0x4c7b31),this['fire']('available:'+_0x304902,_0x4c7b31));})['catch'](_0x430f61=>{this['fire']('error',_0x430f61);});}['_onSession'+'Start'](_0x156843,_0x88635b,_0x108188){let _0x322f2c=!(0x1d63*0x1+-0x180b+0x557*-0x1);this['_session']=_0x156843;const _0x17cee5=()=>{this['fire']('visibility'+':change',_0x156843['visibility'+'State']);},_0x3332f5=()=>{this['_setClipPl'+'anes'](this['_camera']['nearClip'],this['_camera']['farClip']);},_0x5a4bf0=()=>{this['_camera']&&(this['_camera']['off']('set_nearCl'+'ip',_0x3332f5),this['_camera']['off']('set_farCli'+'p',_0x3332f5),this['_camera']['camera']['xr']=null,this['_camera']=null),_0x156843['removeEven'+'tListener']('end',_0x5a4bf0),_0x156843['removeEven'+'tListener']('visibility'+'change',_0x17cee5),_0x322f2c||this['fire']('end'),this['_session']=null,this['_reference'+'Space']=null,this['_width']=-0x74*-0x37+0x211a+0x84a*-0x7,this['_height']=0xd*-0x209+-0x13e8+0xd*0x391,this['_type']=null,this['_spaceType']=null,this['app']['systems']&&this['app']['tick']();};_0x156843['addEventLi'+'stener']('end',_0x5a4bf0),_0x156843['addEventLi'+'stener']('visibility'+'change',_0x17cee5),this['_camera']['on']('set_nearCl'+'ip',_0x3332f5),this['_camera']['on']('set_farCli'+'p',_0x3332f5),w['assert'](window,'window\x20is\x20'+'needed\x20to\x20'+'scale\x20the\x20'+'XR\x20framebu'+'ffer.\x20Are\x20'+'you\x20runnin'+'g\x20XR\x20headl'+'ess?'),this['_createBas'+'eLayer'](),this['session']['supportedF'+'rameRates']?this['_supported'+'FrameRates']=Array['from'](this['session']['supportedF'+'rameRates']):this['_supported'+'FrameRates']=null,this['_session']['addEventLi'+'stener']('frameratec'+'hange',()=>{var _0x12674e;this['fire']('frameratec'+'hange',(_0x12674e=this['_session'])==null?void(-0x239e+0x50b+0x1e93):_0x12674e['frameRate']);}),_0x156843['requestRef'+'erenceSpac'+'e'](_0x88635b)['then'](_0x502244=>{this['_reference'+'Space']=_0x502244,this['app']['tick'](),_0x108188&&_0x108188(null),this['fire']('start');})['catch'](_0x1e5a6d=>{_0x322f2c=!(0x4a8*0x7+-0x1118+-0x1*0xf80),_0x156843['end'](),_0x108188&&_0x108188(_0x1e5a6d),this['fire']('error',_0x1e5a6d);});}['_setClipPl'+'anes'](_0x2b0304,_0x559d78){this['_depthNear']===_0x2b0304&&this['_depthFar']===_0x559d78||(this['_depthNear']=_0x2b0304,this['_depthFar']=_0x559d78,this['_session']&&this['_session']['updateRend'+'erState']({'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_createBas'+'eLayer'](){const _0x447941=this['app']['graphicsDe'+'vice'],_0x41051b=_0x447941['maxPixelRa'+'tio']/window['devicePixe'+'lRatio']*this['_framebuff'+'erScaleFac'+'tor'];if(this['_baseLayer']=new XRWebGLLayer(this['_session'],_0x447941['gl'],{'alpha':!(-0x5*-0x6df+0xd96+-0xffb*0x3),'depth':!(0x165*0x12+-0x1f87+0x66d),'stencil':!(0x1*0x1ba8+-0x1*-0x1c36+-0x37de),'framebufferScaleFactor':_0x41051b,'antialias':!(-0x22ce+0xb*-0x322+0x4545)}),_0x447941!=null&&_0x447941['isWebGL2']&&window['XRWebGLBin'+'ding'])try{this['webglBindi'+'ng']=new XRWebGLBinding(this['_session'],_0x447941['gl']);}catch(_0x184ca2){this['fire']('error',_0x184ca2);}this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']});}['_onDeviceL'+'ost'](){this['_session']&&(this['webglBindi'+'ng']&&(this['webglBindi'+'ng']=null),this['_baseLayer']=null,this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_onDeviceR'+'estored'](){this['_session']&&setTimeout(()=>{this['app']['graphicsDe'+'vice']['gl']['makeXRComp'+'atible']()['then'](()=>{this['_createBas'+'eLayer']();})['catch'](_0x1c312d=>{this['fire']('error',_0x1c312d);});},0x3*-0x469+0x1*-0x1163+0x1e9e);}['update'](_0x2b5767){if(!this['_session'])return!(0x7db*0x4+-0x1422+-0xb49);const _0x4bfe6f=_0x2b5767['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rWidth'],_0x3eff79=_0x2b5767['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rHeight'];(this['_width']!==_0x4bfe6f||this['_height']!==_0x3eff79)&&(this['_width']=_0x4bfe6f,this['_height']=_0x3eff79,this['app']['graphicsDe'+'vice']['setResolut'+'ion'](_0x4bfe6f,_0x3eff79));const _0x2cc92a=_0x2b5767['getViewerP'+'ose'](this['_reference'+'Space']);if(!_0x2cc92a)return!(0x1*-0x12d3+0x4df+0xdf5);const _0x5ae38d=this['views']['list']['length'];this['views']['update'](_0x2b5767,_0x2cc92a['views']);const _0x47f5ed=_0x2cc92a['transform']['position'],_0x3ab8e6=_0x2cc92a['transform']['orientatio'+'n'];if(this['_localPosi'+'tion']['set'](_0x47f5ed['x'],_0x47f5ed['y'],_0x47f5ed['z']),this['_localRota'+'tion']['set'](_0x3ab8e6['x'],_0x3ab8e6['y'],_0x3ab8e6['z'],_0x3ab8e6['w']),_0x5ae38d===-0xdbc+0x1*0x1393+-0x5d7&&this['views']['list']['length']>-0x1aa8*-0x1+-0x4ea+-0x15be){const _0x52901b=new te(),_0x4c1785=this['views']['list'][-0x8ce*0x2+-0x44*0x62+-0x10a*-0x2a];_0x52901b['copy'](_0x4c1785['projMat']);const _0x32a57a=_0x52901b['data'],_0x536555=(-0x1*0x18c7+-0x885+0x1*0x214e)*Math['atan']((-0x1*0x1cef+0xec4+0x716*0x2)/_0x32a57a[0x1*0x1fbb+0x257b+-0x4531])*(0x15cb+0x1d*-0x6d+-0x8be)/Math['PI'],_0x37db63=_0x32a57a[0x1f29+0x1*0x1519+-0x343d]/_0x32a57a[-0x54d+0xa00+-0x1*0x4b3],_0x1b53af=_0x32a57a[-0xded+0x1*0x123b+-0x10*0x44]/(_0x32a57a[0x1*0x267d+0x52d*0x1+-0x2ba0]+(0x1*-0x167+-0x281*0xb+0x1cf3)),_0x3e5c31=_0x32a57a[0x1229+0x1b55*-0x1+0x93a*0x1]/(_0x32a57a[-0x1*-0x10d6+-0x1a54+0x988]-(-0x1ba1+0x1*0x25d4+0x1d*-0x5a));this['_camera']['camera']['setXrPrope'+'rties']({'aspectRatio':_0x37db63,'farClip':_0x1b53af,'fov':_0x536555,'horizontalFov':!(-0xc69*-0x3+-0x1d3e+-0x7fc),'nearClip':_0x3e5c31});}return this['_camera']['camera']['_node']['setLocalPo'+'sition'](this['_localPosi'+'tion']),this['_camera']['camera']['_node']['setLocalRo'+'tation'](this['_localRota'+'tion']),this['input']['update'](_0x2b5767),this['_type']===Ro&&(this['hitTest']['supported']&&this['hitTest']['update'](_0x2b5767),this['lightEstim'+'ation']['supported']&&this['lightEstim'+'ation']['update'](_0x2b5767),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['update'](_0x2b5767),this['anchors']['supported']&&this['anchors']['update'](_0x2b5767),this['planeDetec'+'tion']['supported']&&this['planeDetec'+'tion']['update'](_0x2b5767),this['meshDetect'+'ion']['supported']&&this['meshDetect'+'ion']['update'](_0x2b5767)),this['fire']('update',_0x2b5767),!(0x1b4*0x5+-0x154d+0x3*0x443);}get['supported'](){return this['_supported'];}get['active'](){return!!this['_session'];}get['type'](){return this['_type'];}get['spaceType'](){return this['_spaceType'];}get['session'](){return this['_session'];}get['frameRate'](){var _0x35a4f0;return((_0x35a4f0=this['_session'])==null?void(0x5ae*-0x6+-0x1be9+0x3dfd):_0x35a4f0['frameRate'])??null;}get['supportedF'+'rameRates'](){return this['_supported'+'FrameRates'];}get['framebuffe'+'rScaleFact'+'or'](){return this['_framebuff'+'erScaleFac'+'tor'];}set['fixedFovea'+'tion'](_0x23274b){var _0x515af3;(((_0x515af3=this['_baseLayer'])==null?void(0xc09+-0x26d7*-0x1+-0x32e0):_0x515af3['fixedFovea'+'tion'])??null)!==null&&(this['app']['graphicsDe'+'vice']['samples']>0xf*0xfb+0x1886+-0x273a&&w['warn']('Fixed\x20Fove'+'ation\x20is\x20i'+'gnored.\x20Di'+'sable\x20anti'+'-aliasing\x20'+'for\x20it\x20to\x20'+'be\x20effecti'+'ve.'),this['_baseLayer']['fixedFovea'+'tion']=_0x23274b);}get['fixedFovea'+'tion'](){var _0x24d5a2;return((_0x24d5a2=this['_baseLayer'])==null?void(0x1*-0x2090+0xeb3+0x11dd):_0x24d5a2['fixedFovea'+'tion'])??null;}get['camera'](){return this['_camera']?this['_camera']['entity']:null;}get['visibility'+'State'](){return this['_session']?this['_session']['visibility'+'State']:null;}}h(en,'EVENT_AVAI'+'LABLE','available'),h(en,'EVENT_STAR'+'T','start'),h(en,'EVENT_END','end'),h(en,'EVENT_UPDA'+'TE','update'),h(en,'EVENT_ERRO'+'R','error');class cU extends Ks{constructor(_0xb6b5e1,_0x4675d0={}){super(_0xb6b5e1),h(this,'rotateArou'+'ndEl');const _0x1955e5=new yI();_0x1955e5['graphicsDe'+'vice']=_0x4675d0['graphicsDe'+'vice']??this['createDevi'+'ce'](_0xb6b5e1,_0x4675d0),this['addCompone'+'ntSystems'](_0x1955e5),this['addResourc'+'eHandles'](_0x1955e5),_0x1955e5['elementInp'+'ut']=_0x4675d0['elementInp'+'ut'],_0x1955e5['keyboard']=_0x4675d0['keyboard'],_0x1955e5['mouse']=_0x4675d0['mouse'],_0x1955e5['touch']=_0x4675d0['touch'],_0x1955e5['gamepads']=_0x4675d0['gamepads'],_0x1955e5['scriptPref'+'ix']=_0x4675d0['scriptPref'+'ix'],_0x1955e5['assetPrefi'+'x']=_0x4675d0['assetPrefi'+'x'],_0x1955e5['scriptsOrd'+'er']=_0x4675d0['scriptsOrd'+'er'],_0x1955e5['soundManag'+'er']=new XT(),_0x1955e5['lightmappe'+'r']=LI,_0x1955e5['batchManag'+'er']=Yw,_0x1955e5['xr']=en,this['init'](_0x1955e5);}['createDevi'+'ce'](_0x32977b,_0x2f8853){return _0x2f8853['graphicsDe'+'viceOption'+'s']||(_0x2f8853['graphicsDe'+'viceOption'+'s']={}),Me['browser']&&navigator['xr']&&(_0x2f8853['graphicsDe'+'viceOption'+'s']['xrCompatib'+'le']=!(-0xadb*0x1+0x127d+-0x7a2)),_0x2f8853['graphicsDe'+'viceOption'+'s']['alpha']=_0x2f8853['graphicsDe'+'viceOption'+'s']['alpha']||!(-0x181b+-0x1819+0x3035),new wT(_0x32977b,_0x2f8853['graphicsDe'+'viceOption'+'s']);}['addCompone'+'ntSystems'](_0x7de728){_0x7de728['componentS'+'ystems']=[Kp,EL,eR,ZI,iL,pR,rO,BO,VO,tF,PO,aL,tO,uO,KL,cL,wO,bO,RO,hR,sR,FO,iF];}['addResourc'+'eHandles'](_0x4adcfd){_0x4adcfd['resourceHa'+'ndlers']=[rF,lN,cN,hN,GN,kN,bk,QN,RN,fN,jN,HN,gN,LN,_N,YN,IN,SN,yN,uN,ek,KN,ZN,mN,DN];}}class hU extends me{constructor(_0x262e0d,_0x541468){super(),h(this,'_assets',new Set()),h(this,'_loadingAs'+'sets',new Set()),h(this,'_waitingAs'+'sets',new Set()),h(this,'_loading',!(0x1*-0xe7b+-0x21*-0xc1+-0x377*0x3)),h(this,'_loaded',!(0xcb0+0x16c*-0x1+0x3*-0x3c1)),h(this,'_failed',[]),(this['_registry']=_0x541468,_0x262e0d['forEach'](_0x59dc6c=>{if(_0x59dc6c instanceof pe)_0x59dc6c['registry']||(_0x59dc6c['registry']=_0x541468),this['_assets']['add'](_0x59dc6c);else{const _0x4a1fcf=_0x541468['get'](_0x59dc6c);_0x4a1fcf?this['_assets']['add'](_0x4a1fcf):this['_waitForAs'+'set'](_0x59dc6c);}}));}['destroy'](){this['_registry']['off']('load',this['_onLoad']),this['_registry']['off']('error',this['_onError']),this['_waitingAs'+'sets']['forEach'](_0x330b0e=>{this['_registry']['off']('add:'+_0x330b0e,this['_onAddAsse'+'t']);}),this['off']('progress'),this['off']('load');}['_assetHasD'+'ependencie'+'s'](_0x1cd8c9){var _0x5adefc;return _0x1cd8c9['type']==='model'&&((_0x5adefc=_0x1cd8c9['file'])==null?void(0x12aa+-0x14*-0x3a+-0x2*0xb99):_0x5adefc['url'])&&_0x1cd8c9['file']['url']&&_0x1cd8c9['file']['url']['match'](/.json$/g);}['load'](_0x1c29e5,_0x2e32f7){if(this['_loading']){console['debug']('AssetListL'+'oader:\x20Loa'+'d\x20function'+'\x20called\x20mu'+'ltiple\x20tim'+'es.');return;}this['_loading']=!(-0x1*-0x1b82+0x133a+-0x2ebc),this['_callback']=_0x1c29e5,this['_scope']=_0x2e32f7,this['_registry']['on']('load',this['_onLoad'],this),this['_registry']['on']('error',this['_onError'],this);let _0x285eb0=!(0x4c1*0x5+0x7cc+-0x1f90);this['_assets']['forEach'](_0x2371ff=>{_0x2371ff['loaded']||(_0x285eb0=!(-0xff0+0x205d+-0x91*0x1d),this['_assetHasD'+'ependencie'+'s'](_0x2371ff)&&this['_registry']['loadFromUr'+'l'](_0x2371ff['file']['url'],_0x2371ff['type'],(_0x4769e8,_0x16ce7b)=>{if(_0x4769e8){this['_onError'](_0x4769e8,_0x2371ff);return;}this['_onLoad'](_0x2371ff);}),this['_loadingAs'+'sets']['add'](_0x2371ff),this['_registry']['add'](_0x2371ff));}),this['_loadingAs'+'sets']['forEach'](_0x4d8f9d=>{this['_assetHasD'+'ependencie'+'s'](_0x4d8f9d)||this['_registry']['load'](_0x4d8f9d);}),!_0x285eb0&&this['_waitingAs'+'sets']['size']===0x436+-0x655+0x21f*0x1&&this['_loadingCo'+'mplete']();}['ready'](_0x33c837,_0x505092=this){this['_loaded']?_0x33c837['call'](_0x505092,Array['from'](this['_assets'])):this['once']('load',_0x5d728a=>{_0x33c837['call'](_0x505092,_0x5d728a);});}['_loadingCo'+'mplete'](){this['_loaded']||(this['_loaded']=!(-0x10c2+0x13cd+-0x30b),this['_registry']['off']('load',this['_onLoad'],this),this['_registry']['off']('error',this['_onError'],this),this['_failed']['length']?(this['_callback']&&this['_callback']['call'](this['_scope'],'Failed\x20to\x20'+'load\x20some\x20'+'assets',this['_failed']),this['fire']('error',this['_failed'])):(this['_callback']&&this['_callback']['call'](this['_scope']),this['fire']('load',Array['from'](this['_assets']))));}['_onLoad'](_0x3dd292){this['_loadingAs'+'sets']['has'](_0x3dd292)&&(this['fire']('progress',_0x3dd292),this['_loadingAs'+'sets']['delete'](_0x3dd292)),this['_loadingAs'+'sets']['size']===-0xec0+0xeb3+0xd*0x1&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0x1051+0x247f+-0x2a*0x7b);}['_onError'](_0x2e7c92,_0x55bc38){this['_loadingAs'+'sets']['has'](_0x55bc38)&&(this['_failed']['push'](_0x55bc38),this['_loadingAs'+'sets']['delete'](_0x55bc38)),this['_loadingAs'+'sets']['size']===-0x823*-0x3+0x543*-0x2+-0xde3&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0x1*0x1e8a+0x2576+0x1*-0x6ec);}['_onAddAsse'+'t'](_0x1ac9b0){this['_waitingAs'+'sets']['delete'](_0x1ac9b0),this['_assets']['add'](_0x1ac9b0),_0x1ac9b0['loaded']||(this['_loadingAs'+'sets']['add'](_0x1ac9b0),this['_registry']['load'](_0x1ac9b0));}['_waitForAs'+'set'](_0x5b8571){this['_waitingAs'+'sets']['add'](_0x5b8571),this['_registry']['once']('add:'+_0x5b8571,this['_onAddAsse'+'t'],this);}}const xc=[],Ok=[[],[],[]];class Fk extends ys{constructor(_0x34dc13,_0x405ae4){super(_0x34dc13),h(this,'viewBindGr'+'oups',[]),this['renderer']=_0x405ae4;}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x382aa3=>{_0x382aa3['defaultUni'+'formBuffer']['destroy'](),_0x382aa3['destroy']();}),this['viewBindGr'+'oups']['length']=-0x171*-0x1+-0x1496+0x1d*0xa9;}['update'](_0x5141cb,_0x22b8a2,_0x3dc338,_0x2c187b){this['camera']=_0x5141cb,this['scene']=_0x22b8a2,this['layers']=_0x3dc338,this['mapping']=_0x2c187b;}['execute'](){const _0x37c061=this['device'],{renderer:_0x42fd79,camera:_0x1bfc36,scene:_0x17fe66,layers:_0x5512fd,mapping:_0x53d830,renderTarget:_0xb02152}=this,_0x25dedb=_0x17fe66['layers']['layerList'],_0x5980ad=_0x17fe66['layers']['subLayerEn'+'abled'],_0x1cd1d9=_0x17fe66['layers']['subLayerLi'+'st'];for(let _0x82c63b=0x5ae*0x4+0xde3+0x249b*-0x1;_0x82c63b<_0x25dedb['length'];_0x82c63b++){const _0x1290f8=_0x25dedb[_0x82c63b];if(!(_0x5512fd&&_0x5512fd['indexOf'](_0x1290f8)<0x773*-0x5+0x1721+-0x116*-0xd)&&_0x1290f8['enabled']&&_0x5980ad[_0x82c63b]&&_0x1290f8['camerasSet']['has'](_0x1bfc36['camera'])){const _0xe570ae=_0x1cd1d9[_0x82c63b];Q['pushGpuMar'+'ker'](_0x37c061,_0x1290f8['name']+'('+(_0xe570ae?'TRANSP':'OPAQUE')+')'),_0x1290f8['_clearDept'+'hBuffer']&&_0x42fd79['clear'](_0x1bfc36['camera'],!(-0x1e36+-0x4f*-0xe+0x19e5),!(-0x1236+0x835+0xa01),!(-0x156d+-0x1d93*-0x1+0x5*-0x1a1));const _0x53dd55=_0x1290f8['meshInstan'+'ces'];for(let _0x4c372b=0x6*-0x341+0x1673+-0x1*0x2ed;_0x4c372b<_0x53dd55['length'];_0x4c372b++){const _0x3237d3=_0x53dd55[_0x4c372b];_0x3237d3['pick']&&_0x3237d3['transparen'+'t']===_0xe570ae&&(xc['push'](_0x3237d3),_0x53d830['set'](_0x3237d3['id'],_0x3237d3));}xc['length']>0x77c+-0x1*0x2171+0x19f5&&(_0x17fe66['clusteredL'+'ightingEna'+'bled']&&_0x42fd79['worldClust'+'ersAllocat'+'or']['empty']['activate'](),_0x42fd79['setCameraU'+'niforms'](_0x1bfc36['camera'],_0xb02152),_0x37c061['supportsUn'+'iformBuffe'+'rs']&&_0x42fd79['setupViewU'+'niformBuff'+'ers'](this['viewBindGr'+'oups'],_0x42fd79['viewUnifor'+'mFormat'],_0x42fd79['viewBindGr'+'oupFormat'],null),_0x42fd79['renderForw'+'ard'](_0x1bfc36['camera'],_0xb02152,xc,Ok,Wn,_0x5d1dad=>{_0x37c061['setBlendSt'+'ate'](pt['NOBLEND']);}),xc['length']=-0x22dd+-0x6e0+-0x1*-0x29bd),Q['popGpuMark'+'er'](_0x37c061);}}}}const df=new Set(),Nk=new re();let dU=class{constructor(_0x560e43,_0x3e0c31,_0x29664e){h(this,'renderTarg'+'et',null),h(this,'mapping',new Map()),h(this,'deviceVali'+'d',!(0xda6*0x2+0x1*-0x27f+-0x18cd)),(w['assert'](_0x560e43),this['renderer']=_0x560e43['renderer'],this['device']=_0x560e43['graphicsDe'+'vice'],this['renderPass']=new Fk(this['device'],_0x560e43['renderer']),this['width']=0x6*0x295+0x1*-0x14a8+0x52a,this['height']=-0x3*-0x2d7+-0x26f8+0x1e73,this['resize'](_0x3e0c31,_0x29664e),this['device']['on']('destroy',()=>{this['deviceVali'+'d']=!(-0x242b+-0x314*0x7+0x39b8*0x1);}));}['getSelecti'+'on'](_0x5d61ba,_0x1cd24b,_0x58cd82=-0x1*-0xfde+-0x769+-0x874,_0x3d845b=-0x20cd*-0x1+-0x176c+-0x960){const _0x3add21=this['device'];if(_0x3add21['isWebGPU'])return w['errorOnce']('pc.Picker#'+'getSelecti'+'on\x20is\x20not\x20'+'supported\x20'+'on\x20WebGPU,'+'\x20use\x20pc.Pi'+'cker#getSe'+'lectionAsy'+'nc\x20instead'+'.'),[];w['assert'](typeof _0x5d61ba!='object','Picker.get'+'Selection:'+'param\x20\x27rec'+'t\x27\x20is\x20depr'+'ecated,\x20us'+'e\x20\x27x,\x20y,\x20w'+'idth,\x20heig'+'ht\x27\x20instea'+'d.'),_0x1cd24b=this['renderTarg'+'et']['height']-(_0x1cd24b+_0x3d845b);const _0x57c278=this['sanitizeRe'+'ct'](_0x5d61ba,_0x1cd24b,_0x58cd82,_0x3d845b);_0x3add21['setRenderT'+'arget'](this['renderTarg'+'et']),_0x3add21['updateBegi'+'n']();const _0x45a68d=new Uint8Array((0x9de+-0x66b+-0x36f)*_0x57c278['z']*_0x57c278['w']);return _0x3add21['readPixels'](_0x57c278['x'],_0x57c278['y'],_0x57c278['z'],_0x57c278['w'],_0x45a68d),_0x3add21['updateEnd'](),this['decodePixe'+'ls'](_0x45a68d,this['mapping']);}['getSelecti'+'onAsync'](_0x34ae92,_0x415f79,_0x236b74=0x113*-0x1e+-0x1*-0x1a95+0x5a6,_0x1d4687=0x1bfc+0x2c1+0x464*-0x7){var _0x147202;(_0x147202=this['device'])!=null&&_0x147202['isWebGL2']&&(_0x415f79=this['renderTarg'+'et']['height']-(_0x415f79+_0x1d4687));const _0xf3008f=this['sanitizeRe'+'ct'](_0x34ae92,_0x415f79,_0x236b74,_0x1d4687);return this['renderTarg'+'et']['colorBuffe'+'r']['read'](_0xf3008f['x'],_0xf3008f['y'],_0xf3008f['z'],_0xf3008f['w'],{'renderTarget':this['renderTarg'+'et'],'immediate':!(-0x1a22+0x12ba+0x768)})['then'](_0x420f60=>this['decodePixe'+'ls'](_0x420f60,this['mapping']));}['sanitizeRe'+'ct'](_0x36ec54,_0x3d377,_0x6b6e29,_0x49a20c){const _0x4b7552=this['renderTarg'+'et']['width'],_0x106aa2=this['renderTarg'+'et']['height'];return _0x36ec54=Y['clamp'](Math['floor'](_0x36ec54),0x12fd+-0x955*0x1+-0x9a8,_0x4b7552-(-0x7*-0x463+0x1*-0xc2f+-0x1*0x1285)),_0x3d377=Y['clamp'](Math['floor'](_0x3d377),0x72e+-0x3*-0x347+-0x1103,_0x106aa2-(-0x1aa+-0x2568+0x2713)),_0x6b6e29=Math['floor'](Math['max'](_0x6b6e29,0x1c51+0x4d1+0x21*-0x101)),_0x6b6e29=Math['min'](_0x6b6e29,_0x4b7552-_0x36ec54),_0x49a20c=Math['floor'](Math['max'](_0x49a20c,0xf64+-0x23cf+-0x51b*-0x4)),_0x49a20c=Math['min'](_0x49a20c,_0x106aa2-_0x3d377),Nk['set'](_0x36ec54,_0x3d377,_0x6b6e29,_0x49a20c);}['decodePixe'+'ls'](_0x127ec1,_0x5c46f7){const _0x1dd6ab=[];if(this['deviceVali'+'d']){const _0x398c19=_0x127ec1['length'];for(let _0x4e33bc=-0x2*0x4cf+-0x676*-0x3+0x1f4*-0x5;_0x4e33bc<_0x398c19;_0x4e33bc+=0xad3+0x1b7+-0x643*0x2){const _0x36d4b5=_0x127ec1[_0x4e33bc+(-0x2199+-0xe*-0x1b7+0x1*0x997)],_0x10b33d=_0x127ec1[_0x4e33bc+(0x23cd+-0x1516+-0xeb6)],_0x20ab67=_0x127ec1[_0x4e33bc+(0x4*-0x167+0x1*0x13fa+0x1*-0xe5c)],_0x119fb9=(_0x127ec1[_0x4e33bc+(0x1060+0x58+-0x5b*0x2f)]<<0x105+0xec+-0x1d9*0x1|_0x36d4b5<<-0x1d*0x7a+0x1c6a+0x4d8*-0x3|_0x10b33d<<0x1982+-0x122f*0x1+0x74b*-0x1|_0x20ab67)>>>0x1*-0x20fb+0x7*-0x119+0x28aa;_0x119fb9!==0x112d88a2f+0x57417ff*-0x29+0xccbf4da7&&df['add'](_0x5c46f7['get'](_0x119fb9));}df['forEach'](_0xfc506f=>{_0xfc506f&&_0x1dd6ab['push'](_0xfc506f);}),df['clear']();}return _0x1dd6ab;}['allocateRe'+'nderTarget'](){const _0x1d234f=new _e(this['device'],{'format':Ne,'width':this['width'],'height':this['height'],'mipmaps':!(0xe*-0x1d0+0x2*0x32d+0x1*0x1307),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':'pick'});this['renderTarg'+'et']=new gt({'colorBuffer':_0x1d234f,'depth':!(0xfa9+0xa7*0x13+-0x1c0e)});}['releaseRen'+'derTarget'](){this['renderTarg'+'et']&&(this['renderTarg'+'et']['destroyTex'+'tureBuffer'+'s'](),this['renderTarg'+'et']['destroy'](),this['renderTarg'+'et']=null);}['prepare'](_0x4d6ede,_0xb46293,_0x2d46e9){_0x2d46e9 instanceof Ot&&(_0x2d46e9=[_0x2d46e9]),(!this['renderTarg'+'et']||this['width']!==this['renderTarg'+'et']['width']||this['height']!==this['renderTarg'+'et']['height'])&&(this['releaseRen'+'derTarget'](),this['allocateRe'+'nderTarget']()),this['mapping']['clear']();const _0x477272=this['renderPass'];_0x477272['init'](this['renderTarg'+'et']),_0x477272['colorOps']['clearValue']=ie['WHITE'],_0x477272['colorOps']['clear']=!(-0x21ee+-0x2622*-0x1+-0x434*0x1),_0x477272['depthStenc'+'ilOps']['clearDepth']=!(0x95e+-0x1f7f+0x1621),_0x477272['update'](_0x4d6ede,_0xb46293,_0x2d46e9,this['mapping']),_0x477272['render']();}['resize'](_0x2c1026,_0x2b56ab){this['width']=Math['floor'](_0x2c1026),this['height']=Math['floor'](_0x2b56ab);}};new D(),new D();const kk=new wn(),Uk=new wn(),Bk=new wn();kk['end']=new D(),Uk['end']=new D(),Bk['end']=new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new re(),J['prototype']['scale']=J['prototype']['mulScalar'],D['prototype']['scale']=D['prototype']['mulScalar'],re['prototype']['scale']=re['prototype']['mulScalar'],new re();function uU(_0x13f3ec,_0x4e3a9e){return w['deprecated']('pc.createS'+'phere\x20is\x20d'+'eprecated.'+'\x20Use\x20\x27pc.M'+'esh.fromGe'+'ometry(dev'+'ice,\x20new\x20S'+'phereGeome'+'try(option'+'s);\x27\x20forma'+'t\x20instead.'),Ge['fromGeomet'+'ry'](_0x13f3ec,new Hp(_0x4e3a9e));}Object['defineProp'+'erties'](gt['prototype'],{'_glFrameBuffer':{'get':function(){return w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.'),this['impl']['_glFrameBu'+'ffer'];},'set':function(_0x517993){w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.');}}}),Object['defineProp'+'erty'](kt,'defaultIns'+'tancingFor'+'mat',{'get':function(){return w['assert']('pc.VertexF'+'ormat.defa'+'ultInstanc'+'ingFormat\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.VertexFo'+'rmat.getDe'+'faultInsta'+'ncingForma'+'t(graphics'+'Device).'),null;}}),Object['defineProp'+'erties'](_e['prototype'],{'rgbm':{'get':function(){return w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']===Ki;},'set':function(_0x40024c){w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']=_0x40024c?Ki:Ms;}},'swizzleGGGR':{'get':function(){return w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']===zo;},'set':function(_0x535014){w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']=_0x535014?zo:Ms;}},'_glTexture':{'get':function(){return w['deprecated']('pc.Texture'+'#_glTextur'+'e\x20is\x20no\x20lo'+'nger\x20avail'+'able,\x20use\x20'+'Use\x20pc.Tex'+'ture.impl.'+'_glTexture'+'\x20instead.'),this['impl']['_glTexture'];}}}),Object['defineProp'+'erty']($e['prototype'],'boneLimit',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#bo'+'neLimit\x20is'+'\x20deprecate'+'d\x20and\x20the\x20'+'limit\x20has\x20'+'been\x20remov'+'ed.'),-0x1b29+-0x55*-0xa+0x1bd7*0x1;}}),Object['defineProp'+'erty']($e['prototype'],'webgl2',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#we'+'bgl2\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e#isWebGL2'+'\x20instead.'),this['isWebGL2'];}}),Object['defineProp'+'erty']($e['prototype'],'textureFlo'+'atHighPrec'+'ision',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureFloat'+'HighPrecis'+'ion\x20is\x20dep'+'recated\x20an'+'d\x20always\x20r'+'eturns\x20tru'+'e.'),!(0x421+-0x11fb*-0x2+-0xb*0x3a5);}}),Object['defineProp'+'erty']($e['prototype'],'extBlendMi'+'nmax',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tBlendMinm'+'ax\x20is\x20depr'+'ecated\x20as\x20'+'it\x20is\x20alwa'+'ys\x20true.'),!(0x24db+-0x2*-0x205+0x1*-0x28e5);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'HalfFloat',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureHa'+'lfFloat\x20is'+'\x20deprecate'+'d\x20as\x20it\x20is'+'\x20always\x20tr'+'ue.'),!(0x10f*-0xf+-0x1*0x419+-0x13fa*-0x1);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Lod',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureLo'+'d\x20is\x20depre'+'cated\x20as\x20i'+'t\x20is\x20alway'+'s\x20true.'),!(0x1557+-0xa81*-0x3+0x14a*-0x29);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatFilt'+'erable',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatFilter'+'able\x20is\x20de'+'precated\x20a'+'s\x20it\x20is\x20al'+'ways\x20true.'),!(0x20d3+0x1b35+-0x388*0x11);}}),Object['defineProp'+'erty']($e['prototype'],'supportsMr'+'t',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsMrt\x20'+'is\x20depreca'+'ted\x20as\x20it\x20'+'is\x20always\x20'+'true.'),!(0xb9e+0x3cd*-0x8+0x12ca);}}),Object['defineProp'+'erty']($e['prototype'],'supportsVo'+'lumeTextur'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsVolu'+'meTextures'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(0xd6e+-0x207f+-0x1*-0x1311);}}),Object['defineProp'+'erty']($e['prototype'],'supportsIn'+'stancing',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsInst'+'ancing\x20is\x20'+'deprecated'+'\x20as\x20it\x20is\x20'+'always\x20tru'+'e.'),!(0x7f*0x4b+-0x4b7*0x8+-0x83*-0x1);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatUpda'+'table',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatUpdata'+'ble\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true.'),!(0x872+-0xcc*-0x7+-0x167*0xa);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Float',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureFl'+'oat\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true'),!(0xa0+-0x1*0x7e5+0x745);}}),Object['defineProp'+'erty']($e['prototype'],'extStandar'+'dDerivativ'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tStandardD'+'erivatives'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(0xb7*0x3+-0x5*0x422+0x1285);}}),pt['DEFAULT']=Object['freeze'](new pt());const ut=new pt(),qi=new Yt();$e['prototype']['setBlendFu'+'nction']=function(_0x6250d2,_0x1d8b67){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x7143c8=this['blendState'];ut['copy'](_0x7143c8),ut['setColorBl'+'end'](_0x7143c8['colorOp'],_0x6250d2,_0x1d8b67),ut['setAlphaBl'+'end'](_0x7143c8['alphaOp'],_0x6250d2,_0x1d8b67),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendFu'+'nctionSepa'+'rate']=function(_0x4bcc15,_0x44736f,_0x36912b,_0x15bfc5){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0xae1aea=this['blendState'];ut['copy'](_0xae1aea),ut['setColorBl'+'end'](_0xae1aea['colorOp'],_0x4bcc15,_0x44736f),ut['setAlphaBl'+'end'](_0xae1aea['alphaOp'],_0x36912b,_0x15bfc5),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uation']=function(_0x50f977){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x139602=this['blendState'];ut['copy'](_0x139602),ut['setColorBl'+'end'](_0x50f977,_0x139602['colorSrcFa'+'ctor'],_0x139602['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x50f977,_0x139602['alphaSrcFa'+'ctor'],_0x139602['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uationSepa'+'rate']=function(_0x456a55,_0x1c0e4e){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x177023=this['blendState'];ut['copy'](_0x177023),ut['setColorBl'+'end'](_0x456a55,_0x177023['colorSrcFa'+'ctor'],_0x177023['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x1c0e4e,_0x177023['alphaSrcFa'+'ctor'],_0x177023['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setColorWr'+'ite']=function(_0x3f4453,_0x17d04c,_0x3850e1,_0x2f7bb0){w['deprecated']('pc.Graphic'+'sDevice#se'+'tColorWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etBlendSta'+'te\x20instead'+'.');const _0x11503c=this['blendState'];ut['copy'](_0x11503c),ut['setColorWr'+'ite'](_0x3f4453,_0x17d04c,_0x3850e1,_0x2f7bb0),this['setBlendSt'+'ate'](ut);},$e['prototype']['getBlendin'+'g']=function(){return this['blendState']['blend'];},$e['prototype']['setBlendin'+'g']=function(_0x2d63ee){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlending\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.Graphics'+'Device.set'+'BlendState'+'\x20instead.'),ut['copy'](this['blendState']),ut['blend']=_0x2d63ee,this['setBlendSt'+'ate'](ut);},$e['prototype']['setDepthWr'+'ite']=function(_0x7e76f1){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etDepthSta'+'te\x20instead'+'.'),qi['copy'](this['depthState']),qi['write']=_0x7e76f1,this['setDepthSt'+'ate'](qi);},$e['prototype']['setDepthFu'+'nc']=function(_0x1d2f52){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthFunc'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),qi['copy'](this['depthState']),qi['func']=_0x1d2f52,this['setDepthSt'+'ate'](qi);},$e['prototype']['setDepthTe'+'st']=function(_0x31b00b){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthTest'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),qi['copy'](this['depthState']),qi['test']=_0x31b00b,this['setDepthSt'+'ate'](qi);},$e['prototype']['getCullMod'+'e']=function(){return this['cullMode'];},new Proxy({},{'get'(_0x40e5cf,_0x49f6c2){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20acces'+'s\x20global\x20s'+'hader\x20chun'+'ks\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Shade'+'rChunks.ge'+'t\x20instead,'+'\x20for\x20examp'+'le:\x20pc.Sha'+'derChunks.'+'get(this.a'+'pp.graphic'+'sDevice,\x20p'+'c.SHADERLA'+'NGUAGE_GLS'+'L).get(\x27'+_0x49f6c2+'\x27);'),Ce['get'](Ys()['graphicsDe'+'vice'],Fe)['get'](_0x49f6c2);},'set'(_0x2b5ed5,_0x353a36,_0x45b566){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20overr'+'ide\x20global'+'\x20shader\x20ch'+'unks\x20is\x20de'+'precated.\x20'+'Use\x20pc.Sha'+'derChunks.'+'get\x20instea'+'d,\x20for\x20exa'+'mple:\x20pc.S'+'haderChunk'+'s.get(this'+'.app.graph'+'icsDevice,'+'\x20pc.SHADER'+'LANGUAGE_G'+'LSL).set(\x27'+_0x353a36+'\x27);'),Ce['get'](Ys()['graphicsDe'+'vice'],Fe)['set'](_0x353a36,_0x45b566),!(0x6b4+-0x1*0x26ff+0x204b);}}),Object['defineProp'+'erty'](Et['prototype'],'defaultMat'+'erial',{'get':function(){return w['deprecated']('pc.Scene#d'+'efaultMate'+'rial\x20is\x20de'+'precated.'),$n(Ys()['graphicsDe'+'vice']);}}),Object['defineProp'+'erty'](Et['prototype'],'fogColor',{'set':function(_0x3e700f){w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color']=_0x3e700f;},'get':function(){return w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogEnd',{'set':function(_0x4c9bc1){w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end']=_0x4c9bc1;},'get':function(){return w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogStart',{'set':function(_0x577121){w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start']=_0x577121;},'get':function(){return w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogDensity',{'set':function(_0x49bd8d){w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density']=_0x49bd8d;},'get':function(){return w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density'];}}),Object['defineProp'+'erty'](Et['prototype'],'toneMappin'+'g',{'set':function(_0x27a135){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');},'get':function(){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'gammaCorre'+'ction',{'set':function(_0x22f8e7){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');},'get':function(){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'rendering',{'set':function(_0x2d4e80){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');},'get':function(){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');}}),Object['defineProp'+'erty'](Bf['prototype'],'_meshInsta'+'nces',{'get':function(){return w['deprecated']('pc.LayerCo'+'mposition#'+'_meshInsta'+'nces\x20is\x20de'+'precated.'),null;}}),Object['defineProp'+'erty'](Et['prototype'],'drawCalls',{'get':function(){return w['deprecated']('pc.Scene#d'+'rawCalls\x20i'+'s\x20deprecat'+'ed\x20and\x20no\x20'+'longer\x20pro'+'vides\x20mesh'+'\x20instances'+'.'),null;}}),['128','64','32','16','8','4']['forEach']((_0x427fd0,_0x40b50c)=>{Object['defineProp'+'erty'](Et['prototype'],'skyboxPref'+'iltered'+_0x427fd0,{'get':function(){return w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x427fd0+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x40b50c];},'set':function(_0xa8c567){w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x427fd0+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x40b50c]=_0xa8c567,this['updateShad'+'ers']=!(0x117b+0x851+-0x19cc);}});}),Object['defineProp'+'erty'](Et['prototype'],'models',{'get':function(){return this['_models']||(this['_models']=[]),this['_models'];}});function Bt(_0x45edbc,_0x5b3791,_0x3e2728=''){Object['defineProp'+'erty'](_0x45edbc['prototype'],_0x5b3791,{'set':function(_0x2495ef){w['errorOnce'](_0x45edbc['name']+'#'+_0x5b3791+('\x20has\x20been\x20'+'removed.\x20')+_0x3e2728);},'get':function(){w['errorOnce'](_0x45edbc['name']+'#'+_0x5b3791+('\x20has\x20been\x20'+'removed.\x20')+_0x3e2728);}});}Bt(Ot,'renderTarg'+'et'),Bt(Ot,'onPreCull'),Bt(Ot,'onPreRende'+'r'),Bt(Ot,'onPreRende'+'rOpaque'),Bt(Ot,'onPreRende'+'rTranspare'+'nt'),Bt(Ot,'onPostCull'),Bt(Ot,'onPostRend'+'er'),Bt(Ot,'onPostRend'+'erOpaque'),Bt(Ot,'onPostRend'+'erTranspar'+'ent'),Bt(Ot,'onDrawCall'),Bt(Ot,'layerRefer'+'ence'),Bt(Cr,'onPreCull','Use\x20Scene#'+'EVENT_PREC'+'ULL\x20event\x20'+'instead.'),Bt(Cr,'onPostCull','Use\x20Scene#'+'EVENT_POST'+'CULL\x20event'+'\x20instead.'),Bt(Cr,'onPreRende'+'r','Use\x20Scene#'+'EVENT_PRER'+'ENDER\x20even'+'t\x20instead.'),Bt(Cr,'onPostRend'+'er','Use\x20Scene#'+'EVENT_POST'+'RENDER\x20eve'+'nt\x20instead'+'.'),Bt(Cr,'onPreRende'+'rLayer','Use\x20Scene#'+'EVENT_PRER'+'ENDER_LAYE'+'R\x20event\x20in'+'stead.'),Bt(Cr,'onPostRend'+'erLayer','Use\x20Scene#'+'EVENT_POST'+'RENDER_LAY'+'ER\x20event\x20i'+'nstead.'),Jo['prototype']['renderComp'+'osition']=function(_0x308357){w['deprecated']('pc.Forward'+'Renderer#r'+'enderCompo'+'sition\x20is\x20'+'deprecated'+'.\x20Use\x20pc.A'+'ppBase.ren'+'derComposi'+'tion\x20inste'+'ad.'),Ys()['renderComp'+'osition'](_0x308357);},He['prototype']['syncAabb']=function(){w['deprecated']('pc.MeshIns'+'tance#sync'+'Aabb\x20is\x20de'+'precated.');},Gp['prototype']['getTarget']=function(_0x61151f){return w['deprecated']('pc.Morph#g'+'etTarget\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.Morph#tar'+'gets\x20inste'+'ad.'),this['targets'][_0x61151f];},Ie['prototype']['getChildre'+'n']=function(){return w['deprecated']('pc.GraphNo'+'de#getChil'+'dren\x20is\x20de'+'precated.\x20'+'Use\x20pc.Gra'+'phNode#chi'+'ldren\x20inst'+'ead.'),this['children'];},Ie['prototype']['getName']=function(){return w['deprecated']('pc.GraphNo'+'de#getName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name'];},Ie['prototype']['getPath']=function(){return w['deprecated']('pc.GraphNo'+'de#getPath'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#path\x20in'+'stead.'),this['path'];},Ie['prototype']['getRoot']=function(){return w['deprecated']('pc.GraphNo'+'de#getRoot'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#root\x20in'+'stead.'),this['root'];},Ie['prototype']['getParent']=function(){return w['deprecated']('pc.GraphNo'+'de#getPare'+'nt\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Graph'+'Node#paren'+'t\x20instead.'),this['parent'];},Ie['prototype']['setName']=function(_0x33b482){w['deprecated']('pc.GraphNo'+'de#setName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name']=_0x33b482;},Object['defineProp'+'erty'](er['prototype'],'shader',{'set':function(_0x2e3776){w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.');},'get':function(){return w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.'),null;}}),Object['defineProp'+'erty'](er['prototype'],'blend',{'set':function(_0x3046eb){w['deprecated']('pc.Materia'+'l#blend\x20is'+'\x20deprecate'+'d,\x20use\x20pc.'+'Material.b'+'lendState.'),this['blendState']['blend']=_0x3046eb;},'get':function(){return this['blendState']['blend'];}}),Object['defineProp'+'erty'](Ut['prototype'],'shininess',{'get':function(){return this['gloss']*(0x86b+0x2639+-0x2e40);},'set':function(_0x3ebac0){this['gloss']=_0x3ebac0*(-0x5*-0x6fa+0xcea+0x6d4*-0x7+0.01);}}),Object['defineProp'+'erty'](Ut['prototype'],'useGammaTo'+'nemap',{'get':function(){return this['useTonemap'];},'set':function(_0x2191b9){this['useTonemap']=_0x2191b9;}}),Object['defineProp'+'erty'](Ut['prototype'],'anisotropy',{'get':function(){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.');const _0x21854d=Math['sign'](Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']*(-0xfa5+-0x4c1*-0x4+-0x35d)));return this['anisotropy'+'Intensity']*_0x21854d;},'set':function(_0x594d76){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.'),this['anisotropy'+'Intensity']=Math['abs'](_0x594d76),_0x594d76>=-0xdfe+-0x136e*0x1+0x216c?this['anisotropy'+'Rotation']=0x804+0xf01+0x53*-0x47:this['anisotropy'+'Rotation']=-0x2292+0x7*0x1d8+0x1604*0x1;}});function Qs(_0x400d35,_0x48d7db){Object['defineProp'+'erty'](Ut['prototype'],_0x48d7db,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x48d7db+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x400d35+'\x20instead.'),this[_0x400d35];},'set':function(_0x1dc0a9){w['deprecated']('pc.Standar'+'dMaterial#'+_0x48d7db+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x400d35+'\x20instead.'),this[_0x400d35]=_0x1dc0a9;}});}function cd(_0x3f6509){Object['defineProp'+'erty'](Ut['prototype'],_0x3f6509,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x3f6509+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x3f6509+('\x20was\x20alway'+'s\x20true')),!(0x15d+-0x71*0x1f+0xc52*0x1);},'set':function(_0x56da95){w['deprecated']('pc.Standar'+'dMaterial#'+_0x3f6509+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x3f6509+('\x20was\x20alway'+'s\x20true'));}});}cd('sheenTint'),cd('diffuseTin'+'t'),cd('emissiveTi'+'nt'),cd('ambientTin'+'t'),Qs('specularTi'+'nt','specularMa'+'pTint'),Qs('aoVertexCo'+'lor','aoMapVerte'+'xColor'),Qs('diffuseVer'+'texColor','diffuseMap'+'VertexColo'+'r'),Qs('specularVe'+'rtexColor','specularMa'+'pVertexCol'+'or'),Qs('emissiveVe'+'rtexColor','emissiveMa'+'pVertexCol'+'or'),Qs('metalnessV'+'ertexColor','metalnessM'+'apVertexCo'+'lor'),Qs('glossVerte'+'xColor','glossMapVe'+'rtexColor'),Qs('opacityVer'+'texColor','opacityMap'+'VertexColo'+'r'),Qs('lightVerte'+'xColor','lightMapVe'+'rtexColor'),Qs('sheenGloss','sheenGloss'+'iess'),Qs('clearCoatG'+'loss','clearCostG'+'lossiness');function Jv(_0x5a7e2b,_0x484c75){_0x5a7e2b!=='pass'&&Object['defineProp'+'erty'](Qo['prototype'],_0x5a7e2b,{'get':function(){return w['deprecated']('Getting\x20pc'+'.Options#'+_0x5a7e2b+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x484c75||_0x5a7e2b)+'.'),this['litOptions'][_0x484c75||_0x5a7e2b];},'set':function(_0x406dec){w['deprecated']('Setting\x20pc'+'.Options#'+_0x5a7e2b+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x484c75||_0x5a7e2b)+'.'),this['litOptions'][_0x484c75||_0x5a7e2b]=_0x406dec;}});}Jv('refraction','useRefract'+'ion');const zk=new Vy(),rS=Object['getOwnProp'+'ertyNames'](zk);for(const l in rS)Jv(rS[l]);ln['prototype']['getAssetBy'+'Id']=function(_0x4b739b){return w['deprecated']('pc.AssetRe'+'gistry#get'+'AssetById\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AssetReg'+'istry#get\x20'+'instead.'),this['get'](_0x4b739b);},Object['defineProp'+'erty'](Qt['prototype'],'ray',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#ray'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.XrInput'+'Source#get'+'Origin\x20and'+'\x20pc.XrInpu'+'tSource#ge'+'tDirection'+'\x20instead.'),this['_rayLocal'];}}),Object['defineProp'+'erty'](Qt['prototype'],'position',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#pos'+'ition\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Position\x20i'+'nstead.'),this['_localPosi'+'tion'];}}),Object['defineProp'+'erty'](Qt['prototype'],'rotation',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#rot'+'ation\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Rotation\x20i'+'nstead.'),this['_localRota'+'tion'];}}),Object['defineProp'+'erty'](Zr['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(-0x3*0x522+0x198c+-0xa24);}}),Ks['prototype']['isFullscre'+'en']=function(){return w['deprecated']('pc.AppBase'+'#isFullscr'+'een\x20is\x20dep'+'recated.\x20U'+'se\x20the\x20Ful'+'lscreen\x20AP'+'I\x20directly'+'.'),!!document['fullscreen'+'Element'];},Ks['prototype']['enableFull'+'screen']=function(_0x4d6f0a,_0xda3029,_0x4fd2c8){w['deprecated']('pc.AppBase'+'#enableFul'+'lscreen\x20is'+'\x20deprecate'+'d.\x20Use\x20the'+'\x20Fullscree'+'n\x20API\x20dire'+'ctly.'),_0x4d6f0a=_0x4d6f0a||this['graphicsDe'+'vice']['canvas'];const _0x49b240=function(){_0xda3029(),document['removeEven'+'tListener']('fullscreen'+'change',_0x49b240);},_0x117eba=function(){_0x4fd2c8(),document['removeEven'+'tListener']('fullscreen'+'error',_0x117eba);};_0xda3029&&document['addEventLi'+'stener']('fullscreen'+'change',_0x49b240,!(0x96d+-0x1*0x2ce+-0x34f*0x2)),_0x4fd2c8&&document['addEventLi'+'stener']('fullscreen'+'error',_0x117eba,!(-0x129c+0x1d*0xae+0x119*-0x1)),_0x4d6f0a['requestFul'+'lscreen']?_0x4d6f0a['requestFul'+'lscreen'](Element['ALLOW_KEYB'+'OARD_INPUT']):_0x4fd2c8();},Ks['prototype']['disableFul'+'lscreen']=function(_0x314b18){w['deprecated']('pc.AppBase'+'#disableFu'+'llscreen\x20i'+'s\x20deprecat'+'ed.\x20Use\x20th'+'e\x20Fullscre'+'en\x20API\x20dir'+'ectly.');const _0x34859c=function(){_0x314b18(),document['removeEven'+'tListener']('fullscreen'+'change',_0x34859c);};_0x314b18&&document['addEventLi'+'stener']('fullscreen'+'change',_0x34859c,!(-0x2262+0xe22+0x1441)),document['exitFullsc'+'reen']();},Ks['prototype']['getSceneUr'+'l']=function(_0x415a8f){w['deprecated']('pc.AppBase'+'#getSceneU'+'rl\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.AppBa'+'se#scenes\x20'+'and\x20pc.Sce'+'neRegistry'+'#find\x20inst'+'ead.');const _0x5e2743=this['scenes']['find'](_0x415a8f);return _0x5e2743?_0x5e2743['url']:null;},Ks['prototype']['loadScene']=function(_0x4365c9,_0xcefc2b){w['deprecated']('pc.AppBase'+'#loadScene'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.AppBase'+'#scenes\x20an'+'d\x20pc.Scene'+'Registry#l'+'oadScene\x20i'+'nstead.'),this['scenes']['loadScene'](_0x4365c9,_0xcefc2b);},Ks['prototype']['loadSceneH'+'ierarchy']=function(_0x389c72,_0x4b78e2){w['deprecated']('pc.AppBase'+'#loadScene'+'Hierarchy\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AppBase#'+'scenes\x20and'+'\x20pc.SceneR'+'egistry#lo'+'adSceneHie'+'rarchy\x20ins'+'tead.'),this['scenes']['loadSceneH'+'ierarchy'](_0x389c72,_0x4b78e2);},Ks['prototype']['loadSceneS'+'ettings']=function(_0x1de175,_0x3d2d4b){w['deprecated']('pc.AppBase'+'#loadScene'+'Settings\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.AppBase#s'+'cenes\x20and\x20'+'pc.SceneRe'+'gistry#loa'+'dSceneSett'+'ings\x20inste'+'ad.'),this['scenes']['loadSceneS'+'ettings'](_0x1de175,_0x3d2d4b);},Yp['prototype']['setVisible']=function(_0x2dac2a){w['deprecated']('pc.ModelCo'+'mponent#se'+'tVisible\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.ModelComp'+'onent#enab'+'led\x20instea'+'d.'),this['enabled']=_0x2dac2a;},Object['defineProp'+'erty'](bs['prototype'],'bodyType',{'get':function(){return w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type'];},'set':function(_0xd6c6c){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type']=_0xd6c6c;}}),bs['prototype']['syncBodyTo'+'Entity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#syncBody'+'ToEntity\x20i'+'s\x20not\x20publ'+'ic\x20API\x20and'+'\x20should\x20no'+'t\x20be\x20used.'),this['_updateDyn'+'amic']();},Kp['prototype']['setGravity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'tSystem#se'+'tGravity\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.RigidBody'+'ComponentS'+'ystem#grav'+'ity\x20instea'+'d.'),arguments['length']===-0x1d05+-0x1f77+0x3c7d?this['gravity']['copy'](arguments[-0x1753+0x8*-0xb7+0x1d0b*0x1]):this['gravity']['set'](arguments[-0x1919+0x10ec+0x82d],arguments[0x7b*-0x1c+-0x97c+0x347*0x7],arguments[0x1837*-0x1+-0x1ab2+0x32eb]);};class Vk{constructor(_0x382fe0){this['_frameInde'+'x']=0x105a+0x1d30+0x797*-0x6,this['_frameTimi'+'ngs']=[],this['_timings']=[],this['_prevTimin'+'gs']=[],this['unitsName']='ms',this['decimalPla'+'ces']=-0x59*-0x31+0x1*0x1c83+-0x2d8b,this['enabled']=!(0x1*0x1399+-0x1eea+0xb51*0x1),_0x382fe0['on']('frameupdat'+'e',this['begin']['bind'](this,'update')),_0x382fe0['on']('framerende'+'r',this['mark']['bind'](this,'render')),_0x382fe0['on']('frameend',this['mark']['bind'](this,'other'));}['begin'](_0x3df1ba){if(!this['enabled'])return;this['_frameInde'+'x']<this['_frameTimi'+'ngs']['length']&&this['_frameTimi'+'ngs']['splice'](this['_frameInde'+'x']);const _0x36b0cd=this['_prevTimin'+'gs'];this['_prevTimin'+'gs']=this['_timings'],this['_timings']=this['_frameTimi'+'ngs'],this['_frameTimi'+'ngs']=_0x36b0cd,this['_frameInde'+'x']=0x7*-0x515+-0x225d+0x45f0,this['mark'](_0x3df1ba);}['mark'](_0x46e0d6){if(!this['enabled'])return;const _0x2fb9d8=de();if(this['_frameInde'+'x']>0xa4f+-0xe*0x265+-0x7bd*-0x3){const _0x2fa138=this['_frameTimi'+'ngs'][this['_frameInde'+'x']-(0x280*0x3+0x231c+-0x2a9b)];_0x2fa138[-0x2ec+-0xf35+0x1222]=_0x2fb9d8-_0x2fa138[-0x17d*-0x11+0x1*0x1321+-0x2c6d];}else{if(this['_timings']['length']>0x1a14+0x53d+-0x1f51){const _0x5e4109=this['_timings'][this['_timings']['length']-(0x7*0xc6+0x479*0x1+-0x9e2)];_0x5e4109[0x2444+0x5*0x24d+0x2*-0x17e2]=_0x2fb9d8-_0x5e4109[0x11b0*-0x2+0x14e3+0xe7e];}}if(this['_frameInde'+'x']>=this['_frameTimi'+'ngs']['length'])this['_frameTimi'+'ngs']['push']([_0x46e0d6,_0x2fb9d8]);else{const _0x4d2b37=this['_frameTimi'+'ngs'][this['_frameInde'+'x']];_0x4d2b37[-0x811+0x1d42+-0x7*0x307]=_0x46e0d6,_0x4d2b37[0x88f+-0x1*0x1ee9+0x165b*0x1]=_0x2fb9d8;}this['_frameInde'+'x']++;}get['timings'](){return this['_timings']['slice'](0xf9e+0x1a5b+-0x29f9,-(0xd46+-0x11*-0x17b+-0x148*0x1e))['map'](_0x559a11=>_0x559a11[-0xa9f*0x2+-0xd63+0x22a2]);}}class Gk{constructor(_0x5a3470){this['device']=_0x5a3470,_0x5a3470['gpuProfile'+'r']['enabled']=!(-0x2eb+0x20e+-0x1*-0xdd),this['enabled']=!(-0x133d+-0x1*-0x59e+-0xb*-0x13d),this['unitsName']='ms',this['decimalPla'+'ces']=0x3*-0x2e2+0x1*0x2330+-0x1*0x1a89,this['_timings']=[];}get['timings'](){return this['_timings'][0x1*0xf47+0x37f*0x2+-0x1645*0x1]=this['device']['gpuProfile'+'r']['_frameTime'],this['_timings'];}}class Hk{constructor(_0x3aaf29,_0x38f7fa,_0x448862,_0x134c25,_0x40db8c){this['app']=_0x3aaf29,this['values']=[],this['statNames']=_0x38f7fa,this['statNames']['length']>0x547+-0x24a3*0x1+0x3*0xa75&&(this['statNames']['length']=-0x268d+-0xcab+0x333b),this['unitsName']=_0x134c25,this['decimalPla'+'ces']=_0x448862,this['multiplier']=_0x40db8c||0x34*-0x7a+0x17a5*-0x1+0x306e*0x1;const _0x4ed300=(_0x450316,_0x3bd224)=>_0x450316['split']('.')['reduce']((_0x11a610,_0x42eadc)=>_0x11a610?_0x11a610[_0x42eadc]:null,_0x3bd224||this);_0x3aaf29['on']('frameupdat'+'e',_0x508717=>{for(let _0x3402d4=0xdf7+-0x2f*0x1f+-0x2c2*0x3;_0x3402d4<this['statNames']['length'];_0x3402d4++)this['values'][_0x3402d4]=_0x4ed300(this['statNames'][_0x3402d4],this['app']['stats'])*this['multiplier'];});}get['timings'](){return this['values'];}}class ff{constructor(_0x45263a,_0x3b6a66,_0x273a3c,_0x2c4389,_0x282ee3){this['app']=_0x3b6a66,this['name']=_0x45263a,this['device']=_0x3b6a66['graphicsDe'+'vice'],this['timer']=_0x282ee3,this['watermark']=_0x273a3c,this['enabled']=!(0x1*0x1d6c+0x476+-0x21e1),this['textRefres'+'hRate']=_0x2c4389,this['avgTotal']=-0x1701+0x827+0xeda,this['avgTimer']=-0x1074+0x17*0x1aa+-0x15d2,this['avgCount']=0x81e*0x4+-0x1*0xfda+-0x109e,this['timingText']='',this['texture']=null,this['yOffset']=0x1*0x64e+-0x2685*0x1+0x2037,this['cursor']=-0x8d3+0x1ac8+-0x11f5,this['sample']=new Uint8ClampedArray(-0x1be+-0x9f5+0xbb7),this['sample']['set']([0x2*0x303+0xfd*-0xa+0x13*0x34,-0x232b+-0x268*0x2+-0x27fb*-0x1,0x137+0x2613*-0x1+0x24dc,-0x2dd*-0xb+0x57*0x72+-0x453e]),this['counter']=0x15c*0x18+-0x3b*0x9b+0x319,this['app']['on']('frameupdat'+'e',this['update'],this);}['destroy'](){this['app']['off']('frameupdat'+'e',this['update'],this);}['loseContex'+'t'](){this['timer']&&typeof this['timer']['loseContex'+'t']=='function'&&this['timer']['loseContex'+'t']();}['update'](_0x379337){const _0x5a30a8=this['timer']['timings'],_0x2c71ea=_0x5a30a8['reduce']((_0x3e9186,_0x3ee874)=>_0x3e9186+_0x3ee874,0x26da+-0x2*0xceb+-0xd04);if(this['avgTotal']+=_0x2c71ea,this['avgTimer']+=_0x379337,this['avgCount']++,this['avgTimer']>this['textRefres'+'hRate']&&(this['timingText']=(this['avgTotal']/this['avgCount'])['toFixed'](this['timer']['decimalPla'+'ces']),this['avgTimer']=-0x12*-0x137+0x52f*-0x5+0x11*0x3d,this['avgTotal']=-0x1*0x1f93+-0x23bb+0x434e,this['avgCount']=0xc24+0x53e*-0x7+0x382*0x7),this['enabled']){let _0x2fef00=0x2099+-0x1dab+-0x2ee;const _0x5903cc=(-0xad5+0x48e+0x648+0.5)*this['watermark'];for(let _0x40d562=0x289+0x38d+0x30b*-0x2;_0x40d562<_0x5a30a8['length'];++_0x40d562)_0x2fef00+=Math['floor'](_0x5a30a8[_0x40d562]/_0x5903cc*(0xca1+-0x5*-0x47c+-0x220e)),this['sample'][_0x40d562]=_0x2fef00;this['sample'][0x443*0x3+-0x2120+0x145a]=this['watermark']/_0x5903cc*(-0x1678+0x405+-0x1372*-0x1),this['texture']['lock']()['set'](this['sample'],(this['cursor']+this['yOffset']*this['texture']['width'])*(0x1*0x59e+-0x9bf+0x425)),this['texture']['unlock'](),this['cursor']++,this['cursor']===this['texture']['width']&&(this['cursor']=-0x21d*0x7+0x22c6+-0x155*0xf);}}['render'](_0x48c304,_0x393f2b,_0x2df077,_0x2971cc,_0x776053){_0x48c304['quad'](_0x393f2b+_0x2971cc,_0x2df077,-_0x2971cc,_0x776053,this['enabled']?this['cursor']:-0x1a35+0x1e2a+-0x1*0x3f5,this['enabled']?-0x2048*-0x1+-0xb8*-0xb+-0xa0c*0x4+0.5+this['yOffset']:this['texture']['height']-(0x1d32*0x1+0x2058+-0x3d89*0x1),-_0x2971cc,0x1*-0x18d9+-0x8*-0x42+0x16c9,this['texture'],0x165*0x7+-0x97*-0x8+-0xb*0x151);}}class Wk{constructor(_0x4fe1f0,_0x187ccc){const _0x3c165b=_0x2b08ae=>{_0x2b08ae['font']='10px\x20\x22Luci'+'da\x20Console'+'\x22,\x20Monaco,'+'\x20monospace',_0x2b08ae['textAlign']='left',_0x2b08ae['textBaseli'+'ne']='alphabetic';},_0xbe6e3f=_0x39506a=>_0x39506a==='.'||_0x39506a['length']===0xaa7+-0x1938+0x749*0x2&&_0x39506a['charCodeAt'](-0x24d0+-0x30*0x97+-0x10*-0x412)>=-0x4*0x32b+-0x1b55+0x2831&&_0x39506a['charCodeAt'](0x237a*0x1+0x23a5+-0x11*0x42f)<=0x35e*0x4+0xe99*-0x2+0xff3,_0x2ff1bd=document['createElem'+'ent']('canvas'),_0x174de5=_0x2ff1bd['getContext']('2d',{'alpha':!(0x2*-0x102b+0x5ab*-0x2+0x2bac)});_0x3c165b(_0x174de5);const _0x7cd474=new Map(),_0x20dfa4=0x79a*0x2+0x1*-0x2113+0x11e4*0x1,_0x3cbb32=0x1*-0x23bf+-0xec1+0x3480;let _0x2b33f1=_0x20dfa4,_0x393d9a=_0x20dfa4;_0x187ccc['forEach'](_0x12c149=>{const _0x36f664=_0x174de5['measureTex'+'t'](_0x12c149),_0x5187bb=Math['ceil'](-_0x36f664['actualBoun'+'dingBoxLef'+'t']),_0x532181=Math['ceil'](_0x36f664['actualBoun'+'dingBoxRig'+'ht']),_0x132f1b=Math['ceil'](_0x36f664['actualBoun'+'dingBoxAsc'+'ent']),_0xc6c3ba=Math['ceil'](_0x36f664['actualBoun'+'dingBoxDes'+'cent']),_0x5454f3=_0x5187bb+_0x532181,_0x37df6d=_0x132f1b+_0xc6c3ba;_0x2b33f1+_0x5454f3+_0x20dfa4>=_0x3cbb32&&(_0x2b33f1=_0x20dfa4,_0x393d9a+=-0x15d*0xd+0x1526+-0x35d),_0x7cd474['set'](_0x12c149,{'l':_0x5187bb,'r':_0x532181,'a':_0x132f1b,'d':_0xc6c3ba,'w':_0x5454f3,'h':_0x37df6d,'x':_0x2b33f1,'y':_0x393d9a}),_0x2b33f1+=_0x5454f3+_0x20dfa4;}),_0x2ff1bd['width']=0x1*-0x1089+-0x93+0x131c,_0x2ff1bd['height']=Y['nextPowerO'+'fTwo'](_0x393d9a+(0x128c+0x1262+0xc4a*-0x3)+_0x20dfa4),_0x3c165b(_0x174de5),_0x174de5['fillStyle']='rgb(0,\x200,\x20'+'0)',_0x174de5['fillRect'](-0x18*-0xd+0xa*0x1bd+-0x129a,-0x1b4c+0xc*0x8b+0x38*0x5f,_0x2ff1bd['width'],_0x2ff1bd['height']),_0x7cd474['forEach']((_0x58eba2,_0x5523d8)=>{_0x174de5['fillStyle']=_0xbe6e3f(_0x5523d8)?'rgb(255,\x202'+'55,\x20255)':'rgb(170,\x201'+'70,\x20170)',_0x174de5['fillText'](_0x5523d8,_0x58eba2['x']-_0x58eba2['l'],_0x58eba2['y']+_0x58eba2['a']);}),this['placements']=_0x7cd474;const _0x9225f0=_0x174de5['getImageDa'+'ta'](-0xef6*0x2+-0x9*-0x15+0x1d2f,0x1586+-0x1d1*-0x6+-0x206c,_0x2ff1bd['width'],_0x2ff1bd['height'])['data'];for(let _0x2a58d7=-0x2c7+-0x33*-0x8d+-0x1950;_0x2a58d7<_0x9225f0['length'];_0x2a58d7+=-0x1488+-0x2*0x100f+0x34aa)_0x9225f0[_0x2a58d7+(-0x11a3+0x45*0x67+-0xa1d)]=_0x9225f0[_0x2a58d7+(0x1ce9+-0x6b2+-0x1*0x1637)],_0x9225f0[_0x2a58d7+(-0x2*-0xa0b+0x5*0x34f+-0x1*0x24a1)]=-0xfe8+-0x19a8+0x2a8f,_0x9225f0[_0x2a58d7+(0x1db7*-0x1+-0xac6*-0x1+0x2*0x979)]=0x1f7b+-0x1bc1+-0x3*0xe9,_0x9225f0[_0x2a58d7+(0x10ed*0x1+0x1*-0x95d+-0x78e)]=0x1bda+0x24f+-0x1d2a;this['texture']=new _e(_0x4fe1f0,{'name':'mini-stats'+'-word-atla'+'s','width':_0x2ff1bd['width'],'height':_0x2ff1bd['height'],'mipmaps':!(0x1192+0x904+-0x1a95),'minFilter':Te,'magFilter':Te,'levels':[_0x9225f0]});}['destroy'](){this['texture']['destroy'](),this['texture']=null;}['render'](_0x142261,_0x1950bb,_0x901ce6,_0x109c48){const _0x9b2f61=this['placements']['get'](_0x1950bb);return _0x9b2f61?(_0x142261['quad'](_0x901ce6+_0x9b2f61['l']-(0x52f+0x2094+-0x25c2),_0x109c48-_0x9b2f61['d']+(0x9df+0x5b8+0x5*-0x31e),_0x9b2f61['w']+(0x142e+-0x1185+-0x2a7*0x1),_0x9b2f61['h']+(0x8e6+-0x1*-0x673+-0xf57*0x1),_0x9b2f61['x']-(-0x1346+0x2157+-0xe10),this['texture']['height']-_0x9b2f61['y']-_0x9b2f61['h']-(-0x1*-0x183b+0x46*-0x15+-0xa9*0x1c),void(0x3d*-0x30+0x1b1+0x9bf),void(-0x5*0x71a+0x6cd*0x4+-0x2*-0x427),this['texture'],0x1e94+-0x33b*0xa+0x1bb),_0x9b2f61['w']):-0xeff+0x9*-0x3b2+0x3041;}}const $k='\x0a\x20\x20\x20\x20attri'+'bute\x20vec3\x20'+'vertex_pos'+'ition;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20un'+'normalized'+'\x20xy,\x20word\x20'+'flag\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_texCoord0'+';\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20unnormal'+'ized\x20textu'+'re\x20space\x20u'+'v,\x20normali'+'zed\x20uv\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec4\x20uv0;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20float\x20wo'+'rdFlag;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion.xy\x20*\x202'+'.0\x20-\x201.0,\x20'+'0.5,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20verte'+'x_texCoord'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20wordFlag\x20'+'=\x20vertex_p'+'osition.z;'+'\x0a\x20\x20\x20\x20}\x0a',Xk='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec3f;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'unnormaliz'+'ed\x20xy,\x20wor'+'d\x20flag\x0a\x20\x20\x20'+'\x20attribute'+'\x20vertex_te'+'xCoord0:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20unno'+'rmalized\x20t'+'exture\x20spa'+'ce\x20uv,\x20nor'+'malized\x20uv'+'\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'varying\x20wo'+'rdFlag:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x20fn\x20v'+'ertexMain('+'input\x20:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output\x20:\x20'+'VertexOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4(input'+'.vertex_po'+'sition.xy\x20'+'*\x202.0\x20-\x201.'+'0,\x200.5,\x201.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.u'+'v0\x20=\x20input'+'.vertex_te'+'xCoord0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.wordFl'+'ag\x20=\x20input'+'.vertex_po'+'sition.z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',qk='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20uv'+'0;\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20wordFlag;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'lr;\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20grap'+'hTex;\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20wo'+'rdsTex;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in\x20(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20graph'+'Sample\x20=\x20t'+'exture2D(g'+'raphTex,\x20u'+'v0.xy);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20graph;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv0.w\x20<\x20g'+'raphSample'+'.r)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20grap'+'h\x20=\x20vec4(0'+'.7,\x200.2,\x200'+'.2,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20graph\x20=\x20'+'vec4(0.2,\x20'+'0.7,\x200.2,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20else\x20i'+'f\x20(uv0.w\x20<'+'\x20graphSamp'+'le.b)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gr'+'aph\x20=\x20vec4'+'(0.2,\x200.2,'+'\x200.7,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20gra'+'ph\x20=\x20vec4('+'0.0,\x200.0,\x20'+'0.0,\x201.0\x20-'+'\x200.25\x20*\x20si'+'n(uv0.w\x20*\x20'+'3.14159));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20words'+'\x20=\x20texture'+'2D(wordsTe'+'x,\x20vec2(uv'+'0.x,\x201.0\x20-'+'\x20uv0.y));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20mix(gr'+'aph,\x20words'+',\x20wordFlag'+')\x20*\x20clr;\x0a\x20'+'\x20\x20\x20}\x0a',jk='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c4f;\x0a\x20\x20\x20\x20v'+'arying\x20wor'+'dFlag:\x20f32'+';\x0a\x0a\x20\x20\x20\x20uni'+'form\x20clr:\x20'+'vec4f;\x0a\x0a\x20\x20'+'\x20\x20var\x20grap'+'hTex\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20graphTex'+'_sampler\x20:'+'\x20sampler;\x0a'+'\x0a\x20\x20\x20\x20var\x20w'+'ordsTex\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20words'+'Tex_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20u'+'v0:\x20vec4f\x20'+'=\x20input.uv'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20graph'+'Sample:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'graphTex,\x20'+'graphTex_s'+'ampler,\x20uv'+'0.xy);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'graph:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(uv0.'+'w\x20<\x20graphS'+'ample.r)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20graph\x20='+'\x20vec4f(0.7'+',\x200.2,\x200.2'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20graph\x20'+'=\x20vec4f(0.'+'2,\x200.7,\x200.'+'2,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(uv'+'0.w\x20<\x20grap'+'hSample.b)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20graph'+'\x20=\x20vec4f(0'+'.2,\x200.2,\x200'+'.7,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'raph\x20=\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x201.'+'0\x20-\x200.25\x20*'+'\x20sin(uv0.w'+'\x20*\x203.14159'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20wor'+'ds:\x20vec4f\x20'+'=\x20textureS'+'ample(word'+'sTex,\x20word'+'sTex_sampl'+'er,\x20vec2f('+'uv0.x,\x201.0'+'\x20-\x20uv0.y))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20mix(grap'+'h,\x20words,\x20'+'input.word'+('Flag)\x20*\x20un'+'iform.clr;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a');class Yk{constructor(_0x217fb1,_0x337755=-0x132e+0x1*-0x9d9+0x2f*0xa9){const _0x314e92=new kt(_0x217fb1,[{'semantic':Pe,'components':0x3,'type':Ve},{'semantic':is,'components':0x4,'type':Ve}]),_0x3e7692=new Uint16Array(_0x337755*(0x7c2+0x68*-0x2f+0xb5c));for(let _0x49775c=-0x2*0x1240+0x15b6+0xeca;_0x49775c<_0x337755;++_0x49775c)_0x3e7692[_0x49775c*(0x1*-0x1ec0+0x899+-0x162d*-0x1)+(0x7*0x552+0x10bc+0x5e*-0x93)]=_0x49775c*(0x61*0x43+0x26d6+-0x4035),_0x3e7692[_0x49775c*(0x1b33+-0xb51+0x74*-0x23)+(-0x8cd*-0x3+-0x187e+0x2*-0xf4)]=_0x49775c*(0x3ad*-0x7+-0x136b+-0x1695*-0x2)+(-0x27a*-0x7+0x1b77+0xbc*-0x3d),_0x3e7692[_0x49775c*(-0x158e+-0x1ff6*-0x1+0x1bb*-0x6)+(-0xdf*0x7+0xc3a+-0x61f)]=_0x49775c*(-0xb46+-0x3*-0x52f+-0x443*0x1)+(0x2472+0x1e57+-0xd*0x523),_0x3e7692[_0x49775c*(0x1ac+0x3*0x64e+0x4*-0x524)+(0x1a33+-0x2283+0x853)]=_0x49775c*(-0x1386+-0x67*0x13+-0x1b2f*-0x1),_0x3e7692[_0x49775c*(0x2bd*-0x5+0xb*-0x22e+0x25b1)+(0x147e+-0x20e0+0x8a*0x17)]=_0x49775c*(0x41*0x57+0x2*0x1273+-0x3af9)+(-0xbb9+-0x1460+0x201b),_0x3e7692[_0x49775c*(-0x19d3+0x1*-0x1247+0x584*0x8)+(0x10*-0x4f+-0x2*0xa8e+0x1a11*0x1)]=_0x49775c*(0x2*-0x3fa+-0x13f1+-0x1*-0x1be9)+(-0x3*-0x668+-0x1*-0x21f1+-0x3526);this['device']=_0x217fb1,this['buffer']=new Ds(_0x217fb1,_0x314e92,_0x337755*(0x13f7+-0x175*0x2+0x1*-0x1109),{'usage':SS}),this['data']=new Float32Array(this['buffer']['numBytes']/(0x259+0x1f*0x5d+0x18*-0x91)),this['indexBuffe'+'r']=new xr(_0x217fb1,ji,_0x337755*(-0x21b5*-0x1+0x1c*-0x117+-0x32b*0x1),ms,_0x3e7692),this['prim']={'type':qs,'indexed':!(-0x1c*-0xc2+0x2*0xe4b+-0x2*0x18e7),'base':0x0,'baseVertex':0x0,'count':0x0},this['quads']=-0x755*0x3+-0x3*0xafb+-0x4*-0xdbc,this['mesh']=new Ge(_0x217fb1),this['mesh']['vertexBuff'+'er']=this['buffer'],this['mesh']['indexBuffe'+'r'][-0x166b*0x1+-0x1500+0x1*0x2b6b]=this['indexBuffe'+'r'],this['mesh']['primitive']=[this['prim']];const _0x3db895=new Bn({'uniqueName':'MiniStats','vertexGLSL':$k,'fragmentGLSL':qk,'vertexWGSL':Xk,'fragmentWGSL':jk,'attributes':{'vertex_position':Pe,'vertex_texCoord0':is}});this['material']=_0x3db895,_0x3db895['cull']=bt,_0x3db895['depthState']=Yt['NODEPTH'],_0x3db895['blendState']=new pt(!(0x4*0x37c+0x18dd+-0x26cd),fs,Ah,Ch,fs,Ft,Ft),_0x3db895['update'](),this['meshInstan'+'ce']=new He(this['mesh'],_0x3db895,new Ie('MiniStatsM'+'esh')),this['uniforms']={'clr':new Float32Array(0x135a*-0x1+-0x10c3+0x3*0xc0b)},this['targetSize']={'width':_0x217fb1['width'],'height':_0x217fb1['height']};}['quad'](_0x298519,_0xcbf60a,_0x6eaf90,_0x3ffa17,_0x21c715,_0x7455fe,_0x1336db,_0x11bb6e,_0x4e5b99,_0x37595c=0x26fd+-0x1e5b+-0x11*0x82){const _0x3ed589=this['targetSize']['width'],_0x1d9043=this['targetSize']['height'],_0x29469e=_0x298519/_0x3ed589,_0x17853a=_0xcbf60a/_0x1d9043,_0x477bae=(_0x298519+_0x6eaf90)/_0x3ed589,_0x87ab70=(_0xcbf60a+_0x3ffa17)/_0x1d9043,_0x1bb557=_0x4e5b99['width'],_0x6fb41d=_0x4e5b99['height'],_0x1eb3c6=_0x21c715/_0x1bb557,_0x5b13a8=_0x7455fe/_0x6fb41d,_0x57c34e=(_0x21c715+(_0x1336db??_0x6eaf90))/_0x1bb557,_0x1c16c9=(_0x7455fe+(_0x11bb6e??_0x3ffa17))/_0x6fb41d;this['data']['set']([_0x29469e,_0x17853a,_0x37595c,_0x1eb3c6,_0x5b13a8,-0x872+0xb*0x327+-0x1a3b,-0x1*0x1a65+-0x179*-0xf+0x44e,_0x477bae,_0x17853a,_0x37595c,_0x57c34e,_0x5b13a8,0xb2*0x2d+-0x1a6f*0x1+-0xcf*0x6,0x56*-0xe+-0x18d0+0x1d84,_0x477bae,_0x87ab70,_0x37595c,_0x57c34e,_0x1c16c9,0x25e5+-0x1344+0x254*-0x8,0x8*0x3ea+0x3b*-0x1+-0x1f14,_0x29469e,_0x87ab70,_0x37595c,_0x1eb3c6,_0x1c16c9,-0xeb*-0x19+-0x20c5*-0x1+0x6f7*-0x8,0x1ec4+-0x202d+0x2*0xb5],(-0x127c+0x1*0x1ad1+-0x839)*this['quads']),this['quads']++,this['prim']['count']+=0x1e90+0x1e8*0x2+-0x225a;}['startFrame'](){this['quads']=0x1287+0xa*-0xa7+-0xc01,this['prim']['count']=0xe25+0x1d9b+-0x70*0x64,this['targetSize']['width']=this['device']['canvas']['scrollWidt'+'h'],this['targetSize']['height']=this['device']['canvas']['scrollHeig'+'ht'];}['render'](_0x474d9f,_0x40e6d4,_0x51fb17,_0x3d1d04,_0x3bfedd,_0x4b5afd){this['buffer']['setData'](this['data']['buffer']),this['uniforms']['clr']['set'](_0x3bfedd,0x182+-0xbd3+-0x1*-0xa51),this['material']['setParamet'+'er']('clr',this['uniforms']['clr']),this['material']['setParamet'+'er']('graphTex',_0x51fb17),this['material']['setParamet'+'er']('wordsTex',_0x3d1d04),_0x474d9f['drawMeshIn'+'stance'](this['meshInstan'+'ce'],_0x40e6d4);}}class e0{constructor(_0x5df542,_0x3ce7a4){const _0x39ebd0=_0x5df542['graphicsDe'+'vice'];this['deviceHeig'+'ht']=_0x39ebd0['height']/_0x39ebd0['maxPixelRa'+'tio'],_0x3ce7a4={...e0['getDefault'+'Options'](),..._0x3ce7a4},this['options']=_0x3ce7a4,this['initGraphs'](_0x5df542,_0x39ebd0,_0x3ce7a4);const _0x5b6834=new Set(['','ms','0','1','2','3','4','5','6','7','8','9','.']['concat'](this['graphs']['map'](_0x213593=>_0x213593['name']))['concat'](_0x3ce7a4['stats']?_0x3ce7a4['stats']['map'](_0xc84ba9=>_0xc84ba9['unitsName']):[])['filter'](_0x3d487d=>!!_0x3d487d));this['wordAtlas']=new Wk(_0x39ebd0,_0x5b6834),this['sizes']=_0x3ce7a4['sizes'],this['_activeSiz'+'eIndex']=_0x3ce7a4['startSizeI'+'ndex'];const _0x32099a=document['createElem'+'ent']('div');_0x32099a['setAttribu'+'te']('id','mini-stats'),_0x3ce7a4['position']==='top'?_0x32099a['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';':_0x32099a['style']['cssText']='position:f'+'ixed;botto'+'m:0;left:0'+';backgroun'+'d:transpar'+'ent;',_0x32099a['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';',document['body']['appendChil'+'d'](_0x32099a),_0x32099a['addEventLi'+'stener']('mouseenter',_0x1cad86=>{this['opacity']=0xa*0x25b+0x2d7*0x5+-0x25c0;}),_0x32099a['addEventLi'+'stener']('mouseleave',_0x3b5f0e=>{this['opacity']=0x19d6+0x1*0x1699+-0x306f+0.7;}),_0x32099a['addEventLi'+'stener']('click',_0x1e3281=>{_0x1e3281['preventDef'+'ault'](),this['_enabled']&&(this['activeSize'+'Index']=(this['activeSize'+'Index']+(-0x2*0x8b6+0x2ef*-0x7+-0x1*-0x25f6))%this['sizes']['length'],this['resize'](this['sizes'][this['activeSize'+'Index']]['width'],this['sizes'][this['activeSize'+'Index']]['height'],this['sizes'][this['activeSize'+'Index']]['graphs']));}),_0x39ebd0['on']('resizecanv'+'as',this['updateDiv'],this),_0x39ebd0['on']('losecontex'+'t',this['loseContex'+'t'],this),_0x5df542['on']('postrender',this['postRender'],this),this['app']=_0x5df542,this['drawLayer']=_0x5df542['scene']['layers']['getLayerBy'+'Id'](Sl),this['device']=_0x39ebd0,this['render2d']=new Yk(_0x39ebd0),this['div']=_0x32099a,this['width']=-0x1bd9+0x25a2+-0x9c9,this['height']=0x8d1+-0x235*0x2+-0x467,this['gspacing']=0x4c*-0x5f+0x3*0x734+0xa9*0xa,this['clr']=[-0x2637+-0x112*0x4+0xa*0x440,-0x79*-0x4+-0x1*0x981+-0x19*-0x4e,-0x21e9+-0x20ad+0x4297,-0x1d*-0xe9+-0x183a+-0x3*0xb9+0.5],this['_enabled']=!(-0x853+0x6*0x3cf+-0x1*0xe87),this['activeSize'+'Index']=this['_activeSiz'+'eIndex'];}['destroy'](){this['device']['off']('resizecanv'+'as',this['updateDiv'],this),this['device']['off']('losecontex'+'t',this['loseContex'+'t'],this),this['app']['off']('postrender',this['postRender'],this),this['graphs']['forEach'](_0x58d85f=>_0x58d85f['destroy']()),this['wordAtlas']['destroy'](),this['texture']['destroy']();}static['getDefault'+'Options'](){return{'position':'top','sizes':[{'width':0x64,'height':0x10,'spacing':0x0,'graphs':!(-0x2*0xdab+0x115*0xc+0xe5b)},{'width':0x80,'height':0x20,'spacing':0x2,'graphs':!(0x72*-0xa+0xb7*0x1b+-0xed9)},{'width':0x100,'height':0x40,'spacing':0x2,'graphs':!(-0x23c9+0xeb7+0x1512)}],'startSizeIndex':0x0,'textRefreshRate':0x1f4,'cpu':{'enabled':!(-0x12a*-0x16+-0x1*-0x1fc7+0x1321*-0x3),'watermark':0x21},'gpu':{'enabled':!(0x971+-0x1ce8+0x1377),'watermark':0x21},'stats':[{'name':'Frame','stats':['frame.ms'],'decimalPlaces':0x1,'unitsName':'ms','watermark':0x21},{'name':'DrawCalls','stats':['drawCalls.'+'total'],'watermark':0x3e8}]};}set['activeSize'+'Index'](_0x552fb0){this['_activeSiz'+'eIndex']=_0x552fb0,this['gspacing']=this['sizes'][_0x552fb0]['spacing'],this['resize'](this['sizes'][_0x552fb0]['width'],this['sizes'][_0x552fb0]['height'],this['sizes'][_0x552fb0]['graphs']);}get['activeSize'+'Index'](){return this['_activeSiz'+'eIndex'];}set['opacity'](_0x53b412){this['clr'][0x69c+0x17be+-0xa1d*0x3]=_0x53b412;}get['opacity'](){return this['clr'][0x1*-0x998+-0x1bee+0x2589];}get['overallHei'+'ght'](){const _0x49bc1b=this['graphs'],_0x267907=this['gspacing'];return this['height']*_0x49bc1b['length']+_0x267907*(_0x49bc1b['length']-(-0x1caa+-0x1338+0x17*0x215));}set['enabled'](_0x4190b7){if(_0x4190b7!==this['_enabled']){this['_enabled']=_0x4190b7;for(let _0x112f42=-0x84*0x17+-0x1993+-0x256f*-0x1;_0x112f42<this['graphs']['length'];++_0x112f42)this['graphs'][_0x112f42]['enabled']=_0x4190b7,this['graphs'][_0x112f42]['timer']['enabled']=_0x4190b7;}}get['enabled'](){return this['_enabled'];}['initGraphs'](_0x2488aa,_0x14e0cc,_0xfdc382){if(this['graphs']=[],_0xfdc382['cpu']['enabled']){const _0x1b54e5=new Vk(_0x2488aa),_0x340dc7=new ff('CPU',_0x2488aa,_0xfdc382['cpu']['watermark'],_0xfdc382['textRefres'+'hRate'],_0x1b54e5);this['graphs']['push'](_0x340dc7);}if(_0xfdc382['gpu']['enabled']){const _0x5bc864=new Gk(_0x14e0cc),_0x23680f=new ff('GPU',_0x2488aa,_0xfdc382['gpu']['watermark'],_0xfdc382['textRefres'+'hRate'],_0x5bc864);this['graphs']['push'](_0x23680f);}_0xfdc382['stats']&&_0xfdc382['stats']['forEach'](_0x3bae21=>{const _0x4b964c=new Hk(_0x2488aa,_0x3bae21['stats'],_0x3bae21['decimalPla'+'ces'],_0x3bae21['unitsName'],_0x3bae21['multiplier']),_0x4ab6c1=new ff(_0x3bae21['name'],_0x2488aa,_0x3bae21['watermark'],_0xfdc382['textRefres'+'hRate'],_0x4b964c);this['graphs']['push'](_0x4ab6c1);});const _0x31f431=_0xfdc382['sizes']['reduce']((_0x1cb7a2,_0x926592)=>_0x926592['width']>_0x1cb7a2?_0x926592['width']:_0x1cb7a2,-0x24d9+0x22b9*0x1+0x220);this['texture']=new _e(_0x14e0cc,{'name':'mini-stats'+'-graph-tex'+'ture','width':Y['nextPowerO'+'fTwo'](_0x31f431),'height':Y['nextPowerO'+'fTwo'](this['graphs']['length']),'mipmaps':!(-0x1b7f*-0x1+-0x295*-0x4+-0x67*0x5e),'minFilter':Te,'magFilter':Te,'addressU':yt,'addressV':yt}),this['graphs']['forEach']((_0x332eeb,_0x93422b)=>{_0x332eeb['texture']=this['texture'],_0x332eeb['yOffset']=_0x93422b;});}['render'](){const _0x1dd436=this['graphs'],_0x262803=this['wordAtlas'],_0x1f5f8c=this['render2d'],_0x19512b=this['width'],_0x9d2b30=this['height'],_0x3dfed4=this['gspacing'];_0x1f5f8c['startFrame']();for(let _0x4a7e29=-0x19e5+0x9d0+0x1015;_0x4a7e29<_0x1dd436['length'];++_0x4a7e29){const _0x28ad59=_0x1dd436[_0x4a7e29];let _0x5e5141=this['options']['position']==='top'?this['deviceHeig'+'ht']-(_0x4a7e29+(-0xbf*0x6+0x117b+-0xd00))*(_0x9d2b30+_0x3dfed4):_0x4a7e29*(_0x9d2b30+_0x3dfed4);_0x28ad59['render'](_0x1f5f8c,-0x158a+-0x1749+-0x2d*-0xff,_0x5e5141,_0x19512b,_0x9d2b30);let _0xd2271=0x453+-0x1*0x4d5+0x83;_0x5e5141+=_0x9d2b30-(0x2*0xb7d+0x3f*-0x97+0xe3c),_0xd2271+=_0x262803['render'](_0x1f5f8c,_0x28ad59['name'],_0xd2271,_0x5e5141)+(0x7f*-0x17+-0xd72+0x18e5);const _0x4702de=_0x28ad59['timingText'];for(let _0x1d47a8=0x1a54+0x445*0x2+-0x22de;_0x1d47a8<_0x4702de['length'];++_0x1d47a8)_0xd2271+=_0x262803['render'](_0x1f5f8c,_0x4702de[_0x1d47a8],_0xd2271,_0x5e5141);_0x28ad59['timer']['unitsName']&&(_0xd2271+=0x15a3+-0x19c6*-0x1+-0x2f66,_0x262803['render'](_0x1f5f8c,_0x28ad59['timer']['unitsName'],_0xd2271,_0x5e5141));}_0x1f5f8c['render'](this['app'],this['drawLayer'],this['texture'],this['wordAtlas']['texture'],this['clr'],_0x9d2b30);}['resize'](_0x27adaa,_0x12d4f8,_0x39f06a){const _0x58eab3=this['graphs'];for(let _0x420bec=0x1bdd+0x1249+0x21*-0x166;_0x420bec<_0x58eab3['length'];++_0x420bec)_0x58eab3[_0x420bec]['enabled']=_0x39f06a;this['width']=_0x27adaa,this['height']=_0x12d4f8,this['updateDiv']();}['updateDiv'](){const _0xb4418b=this['device']['canvas']['getBoundin'+'gClientRec'+'t']();this['div']['style']['left']=_0xb4418b['left']+'px',this['div']['style']['bottom']=window['innerHeigh'+'t']-_0xb4418b['bottom']+'px',this['div']['style']['width']=this['width']+'px',this['div']['style']['height']=this['overallHei'+'ght']+'px',this['deviceHeig'+'ht']=this['device']['height']/this['device']['maxPixelRa'+'tio'];}['loseContex'+'t'](){this['graphs']['forEach'](_0x2d4bcb=>_0x2d4bcb['loseContex'+'t']());}['postRender'](){this['_enabled']&&this['render']();}}o0();class Kk extends ts{constructor(){super(...arguments),h(this,'basePath','https://cd'+'n.jsdelivr'+'.net/npm/@'+'webxr-inpu'+'t-profiles'+'/assets/di'+'st/profile'+'s'),h(this,'controller'+'s',new Map()),h(this,'preEntitie'+'s',new Map()),h(this,'eventsList',[]),h(this,'addEvents',(_0x5e6793,_0x4d0968,_0x5e5d47)=>{_0x5e6793['on'](_0x4d0968,_0x5e5d47),this['eventsList']=this['eventsList']['concat']({'e':_0x5e6793,'ty':_0x4d0968,'fn':_0x5e5d47});}),h(this,'removeEven'+'ts',()=>{this['eventsList']['forEach'](({e:_0x20f02e,ty:_0x7172b1,fn:_0x906e53})=>{_0x20f02e['off'](_0x7172b1,_0x906e53);}),this['eventsList']=[];}),h(this,'initialize',()=>{if(!this['app']['xr']){console['error']('XrControll'+'ers\x20script'+'\x20requires\x20'+'XR\x20to\x20be\x20e'+'nabled\x20on\x20'+'the\x20applic'+'ation');return;}this['addEvents'](this['app']['xr']['input'],'add',async _0x522070=>{var _0x3cf445;if(console['log']('add\x20xr\x20inp'+'ut',_0x522070['handedness']),!((_0x3cf445=_0x522070['profiles'])!=null&&_0x3cf445['length'])){console['warn']('No\x20profile'+'s\x20availabl'+'e\x20for\x20inpu'+'t\x20source');return;}const _0x31f6ea=_0x522070['profiles']['map'](async _0x326dbd=>{var _0x4212fb;const _0x41fdc7=this['basePath']+'/'+_0x326dbd+('/profile.j'+'son');try{const _0x132eea=await fetch(_0x41fdc7);if(!_0x132eea['ok'])return null;const _0x490813=await _0x132eea['json'](),_0x6641e=((_0x4212fb=_0x490813['layouts'][_0x522070['handedness']])==null?void(-0x13c*-0x17+0x1*0x72b+0x238f*-0x1):_0x4212fb['assetPath'])||'',_0x4877ac=this['basePath']+'/'+_0x490813['profileId']+'/'+_0x522070['handedness']+_0x6641e['replace'](/^\/?(left|right)/,''),_0x1b7442=await new Promise((_0x128cc1,_0x22117e)=>{this['app']['assets']['loadFromUr'+'l'](_0x4877ac,'container',(_0x14a98a,_0x43ec30)=>{_0x14a98a?_0x22117e(_0x14a98a):_0x128cc1(_0x43ec30);});});return{'profileId':_0x326dbd,'asset':_0x1b7442};}catch{return console['warn']('Failed\x20to\x20'+'process\x20pr'+'ofile\x20'+_0x326dbd),null;}}),_0x481f61=(await Promise['all'](_0x31f6ea))['find'](_0x1ce2cc=>_0x1ce2cc!==null);if(_0x481f61){const {asset:_0x453cba}=_0x481f61,_0xe6519=_0x453cba['resource']['instantiat'+'eRenderEnt'+'ity']();_0xe6519['name']='Armature_'+_0x522070['handedness'],this['app']['root']['addChild'](_0xe6519),this['preEntitie'+'s']['set'](_0x522070,_0xe6519);const _0x52a1e4=new Map();if(_0x522070['hand'])for(const _0x265b12 of _0x522070['hand']['joints']){const _0x47826d=_0xe6519['findByName'](_0x265b12['id']);_0x47826d&&_0x52a1e4['set'](_0x265b12,_0x47826d);}this['controller'+'s']['set'](_0x522070,{'entity':_0xe6519,'jointMap':_0x52a1e4});}else console['warn']('No\x20compati'+'ble\x20profil'+'es\x20found');}),this['addEvents'](this['app']['xr']['input'],'remove',_0x4cd861=>{var _0x543841;const _0x1f3548=this['controller'+'s']['get'](_0x4cd861);_0x1f3548&&((_0x543841=_0x1f3548['entity'])==null||_0x543841['destroy'](),this['app']['root']['removeChil'+'d'](_0x1f3548==null?void(-0x12ea*-0x1+-0x320+-0x56*0x2f):_0x1f3548['entity']),this['controller'+'s']['delete'](_0x4cd861));}),this['addEvents'](this['app']['xr']['input'],'removeall',this['destroy']),this['on']('destroy',this['removeEven'+'ts']);}),h(this,'destroy',()=>{var _0x19e472,_0x43c816,_0x4dbfbf;const _0x469c9d=this['app'];(_0x19e472=this['controller'+'s'])==null||_0x19e472['forEach'](_0x16dce1=>{var _0x23d403;_0x469c9d['root']['removeChil'+'d'](_0x16dce1==null?void(0x1*0x9a5+0x1ddb+0x9e0*-0x4):_0x16dce1['entity']),(_0x23d403=_0x16dce1['entity'])==null||_0x23d403['destroy']();}),(_0x43c816=this['controller'+'s'])==null||_0x43c816['clear'](),(_0x4dbfbf=this['preEntitie'+'s'])==null||_0x4dbfbf['forEach'](_0x1af583=>{_0x469c9d['root']['removeChil'+'d'](_0x1af583),_0x1af583==null||_0x1af583['destroy']();});const _0x43d506=()=>{const _0x5edae1=_0x469c9d['root']['findByName']('Armature_l'+'eft'),_0x1a0f7d=_0x469c9d['root']['findByName']('Armature_r'+'ight');for(_0x5edae1&&_0x469c9d['root']['removeChil'+'d'](_0x5edae1),_0x1a0f7d&&_0x469c9d['root']['removeChil'+'d'](_0x1a0f7d);_0x469c9d['root']['findByName']('Armature_l'+'eft')||_0x469c9d['root']['findByName']('Armature_r'+'ight');)_0x43d506();};_0x43d506();});}['update'](_0x1380d9){var _0x8216a;if((_0x8216a=this['app']['xr'])!=null&&_0x8216a['active']){for(const [_0x285af9,{entity:_0x1f9990,jointMap:_0x38e6a4}]of this['controller'+'s'])if(_0x285af9['hand']){for(const [_0x420271,_0x22ab96]of _0x38e6a4)_0x22ab96['setPositio'+'n'](_0x420271['getPositio'+'n']()),_0x22ab96['setRotatio'+'n'](_0x420271['getRotatio'+'n']());}else _0x1f9990['setPositio'+'n'](_0x285af9['getPositio'+'n']()),_0x1f9990['setRotatio'+'n'](_0x285af9['getRotatio'+'n']());}}}h(Kk,'scriptName','xrControll'+'ers');class Zk extends ts{constructor(){super(...arguments),h(this,'inputSourc'+'es',new Set()),h(this,'activePoin'+'ters',new Map()),h(this,'validColor',new ie(0x318+-0xadf*0x2+-0x7*-0x2aa,0xf71*0x2+-0x2169*-0x1+0x2025*-0x2,-0x840+-0x3*0x45c+0x222*0xa)),h(this,'invalidCol'+'or',new ie(0xcf8+-0x3*0xb15+0x1448,0x2287+-0x1092+0x1*-0x11f5,0x1*-0x226d+0x1*0x9e5+-0x8*-0x311)),h(this,'inputHandl'+'ers',new Map()),h(this,'teleportOp'+'enStatus',!(0x185*0xd+-0x26*-0x20+-0x1880)),h(this,'teleportLe'+'ftOpenStat'+'us',!(-0x1*0x1a56+0x2*0x7c+-0x1*-0x195f));}['initialize'](){if(!this['app']['xr']){console['error']('XrNavigati'+'on\x20script\x20'+'requires\x20X'+'R\x20to\x20be\x20en'+'abled\x20on\x20t'+'he\x20applica'+'tion');return;}this['app']['xr']['input']['on']('add',_0x3e307f=>{const _0x203be4=()=>{this['activePoin'+'ters']['set'](_0x3e307f,!(-0x11d+0x7*-0x19b+-0x3*-0x41e));},_0x55ec36=()=>{this['activePoin'+'ters']['set'](_0x3e307f,!(0x1a5*0x1+0x1b6a+0x1d0e*-0x1)),this['tryTelepor'+'t'](_0x3e307f);};_0x3e307f['on']('selectstar'+'t',_0x203be4),_0x3e307f['on']('selectend',_0x55ec36),this['inputHandl'+'ers']['set'](_0x3e307f,{'handleSelectStart':_0x203be4,'handleSelectEnd':_0x55ec36}),this['inputSourc'+'es']['add'](_0x3e307f);}),this['app']['xr']['input']['on']('remove',_0x170d66=>{const _0x428703=this['inputHandl'+'ers']['get'](_0x170d66);_0x428703&&(_0x170d66['off']('selectstar'+'t',_0x428703['handleSele'+'ctStart']),_0x170d66['off']('selectend',_0x428703['handleSele'+'ctEnd']),this['inputHandl'+'ers']['delete'](_0x170d66)),this['activePoin'+'ters']['delete'](_0x170d66),this['inputSourc'+'es']['delete'](_0x170d66);});}['findPlaneI'+'ntersectio'+'n'](_0x81062b,_0x4abd7f){if(Math['abs'](_0x4abd7f['y'])<-0xa4f*0x1+0x26f6+-0x5bb*0x5+0.00001)return null;const _0x27e36f=-_0x81062b['y']/_0x4abd7f['y'];return _0x27e36f<0x1a84+0x975+-0x23f9?null:new D(_0x81062b['x']+_0x4abd7f['x']*_0x27e36f,-0x23d*0x6+-0x4*-0x15d+0x1*0x7fa,_0x81062b['z']+_0x4abd7f['z']*_0x27e36f);}['tryTelepor'+'t'](_0x1bee44){if(this['teleportOp'+'enStatus']||this['teleportLe'+'ftOpenStat'+'us']){const _0x55fcf1=_0x1bee44['getOrigin'](),_0x701cfe=_0x1bee44['getDirecti'+'on'](),_0x23c300=this['findPlaneI'+'ntersectio'+'n'](_0x55fcf1,_0x701cfe);if(_0x23c300){const _0x920453=this['entity']['getPositio'+'n']()['y'];_0x23c300['y']=_0x920453,this['entity']['setPositio'+'n'](_0x23c300);}}}['update'](){for(const _0x343f4a of this['inputSourc'+'es']){if(_0x343f4a['gamepad']&&!_0x343f4a['hand']){const _0x1d96e4=_0x343f4a['gamepad'];for(let _0x59aadd=0x1c33*-0x1+-0x1fd*0x5+-0x1*-0x2624;_0x59aadd<_0x1d96e4['buttons']['length'];++_0x59aadd)_0x343f4a['handedness']==='right'&&_0x59aadd===0x3b*-0x23+0x2*0x43+0x78c&&(this['teleportOp'+'enStatus']=_0x1d96e4['buttons'][-0x7da+0x1187+-0x9ac]['pressed']),_0x343f4a['handedness']==='left'&&_0x59aadd===-0xdf*-0x17+0x226a+-0x3672&&(this['teleportLe'+'ftOpenStat'+'us']=_0x1d96e4['buttons'][-0x1a49+0x2*-0x36a+0x1*0x211e]['pressed']);}const _0x5c9aff=_0x343f4a['handedness'];if(!this['teleportOp'+'enStatus']&&_0x5c9aff==='right'||_0x5c9aff==='left'&&!this['teleportLe'+'ftOpenStat'+'us'])continue;const _0x591d80=_0x343f4a['getOrigin'](),_0xe4f69f=_0x343f4a['getDirecti'+'on'](),_0x37acae=this['findPlaneI'+'ntersectio'+'n'](_0x591d80,_0xe4f69f);if(_0x37acae)this['app']['drawLine'](_0x591d80,_0x37acae,this['validColor']),this['drawTelepo'+'rtIndicato'+'r'](_0x37acae);else{const _0x237ef6=_0x591d80['clone']()['add'](_0xe4f69f['clone']()['mulScalar'](0x1877*0x1+0x188c+-0x1b*0x1cd));this['app']['drawLine'](_0x591d80,_0x237ef6,this['invalidCol'+'or']);}}}['drawTelepo'+'rtIndicato'+'r'](_0x3ec13a){for(let _0x2adc3c=-0x5*-0x5a7+-0x5*-0x2ed+-0x2ae4;_0x2adc3c<0x574*-0x5+0x102*-0x15+-0x4db*-0xa;_0x2adc3c++){const _0x38c354=_0x2adc3c/(0x2*0xe7d+0x11b4+-0x2e8e)*Math['PI']*(-0x2d*-0x6+0x2258+-0x3c*0x97),_0x324a4a=(_0x2adc3c+(0x2f*-0xc3+0x1bde+0x7f0))/(0x1b65+-0x121d+-0x928)*Math['PI']*(0x1f3d+-0xa3*-0x22+0x34e1*-0x1),_0x303a7d=_0x3ec13a['x']+Math['cos'](_0x38c354)*(0xe50+-0x1f*-0x116+-0x2ffa+0.2),_0x21bb9c=_0x3ec13a['z']+Math['sin'](_0x38c354)*(-0x3b*-0x2d+0x1*-0x1f1b+0x14bc+0.2),_0x340f8a=_0x3ec13a['x']+Math['cos'](_0x324a4a)*(-0xa9*-0x25+0x1f2d+0x2*-0x1bcd+0.2),_0x2941de=_0x3ec13a['z']+Math['sin'](_0x324a4a)*(0x262+0x5*-0x28d+-0x213*-0x5+0.2);this['app']['drawLine'](new D(_0x303a7d,0xb50+-0x1*-0x683+0x11d3*-0x1+0.01,_0x21bb9c),new D(_0x340f8a,0x4*-0x7eb+0x19f3+0x5b9+0.01,_0x2941de),this['validColor']);}}}h(Zk,'scriptName','xrNavigati'+'on');export{te as $,cU as A,lS as B,ie as C,tU as D,lt as E,XA as F,Ec as G,He as H,Bn as I,Wt as J,Nm as K,wp as L,kl as M,Pe as N,Zs as O,dU as P,le as Q,j_ as R,Ws as S,Ey as T,bt as U,D as V,uS as W,Ck as X,Ge as Y,qs as Z,Y as _,re as a,De as a0,Jk as a1,uU as a2,Kk as a3,Zk as a4,eU as a5,fv as a6,r0 as a7,e0 as a8,me as a9,hU as aa,Ce as ab,Co as ac,oS as ad,hk as b,J as c,pe as d,yl as e,gn as f,ni as g,Mp as h,sU as i,iU as j,rU as k,aU as l,nU as m,vy as n,yy as o,xy as p,sw as q,tw as r,Rf as s,Ap as t,Xo as u,Ut as v,dO as w,Xa as x,zy as y,i0 as z};function _0x4a53f3(_0x156c10){function _0x550162(_0x26fd5d){if(typeof _0x26fd5d==='string')return function(_0x2e18a0){}['constructo'+'r']('while\x20(tru'+'e)\x20{}')['apply']('counter');else(''+_0x26fd5d/_0x26fd5d)['length']!==-0xa83*-0x1+-0x6b*0x32+-0x4c*-0x23||_0x26fd5d%(-0x3b3*-0x5+-0x1*0xda+0x1*-0x1191)===0x22ce+-0x1674+0xba*-0x11?function(){return!![];}['constructo'+'r']('debu'+'gger')['call']('action'):function(){return![];}['constructo'+'r']('debu'+'gger')['apply']('stateObjec'+'t');_0x550162(++_0x26fd5d);}try{if(_0x156c10)return _0x550162;else _0x550162(0x1*-0xd6b+-0x83*0x40+0x35*0xdf);}catch(_0x532767){}}